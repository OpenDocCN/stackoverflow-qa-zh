# StackOverflow 问答 11779000-11779999

# android - 如何为 Galaxy Nexus 设置布局

> ID：11779002
> 
> 赞同：1
> 
> 时间：2012-08-02T13:58:36.357
> 
> 标签：android, android-layout

我正在开发一个 Android 2.2 应用程序。

使用 Eclipse 图形布局测试我的布局我有一个问题：它在 Galaxy Nexus 上看起来不太好。

我有四种图像类型：ldpi、mdpi、hdpi 和 xhdpi。一个布局和四个 dimens.xml 文件（ldpi、mdpi、hdpi 和 xhdpi）。

如果我修改dimens.xml 使其看起来很好，`Galaxy Nexus`但在其他设备上看起来不太好，例如`Nexus One`（在eclipse 图形布局中）。所以，我想我需要别的东西。

阅读[Supporting Multiple Screens](http://developer.android.com/guide/practices/screens_support.html)我看到还有另一种方法：我可以使用`sw<N>dp`. 但是这是从Android 3.2开始的，我需要支持Android 2.2。

**我需要添加什么才能使它在 Galaxy Nexus 上看起来不错？**

**连结一**：
![在此处输入图像描述](../Images/858bb41691b6388a15342d582e0a1357.png)

**银河关系**：

![在此处输入图像描述](../Images/da9e9ec67ec52a900ad95520e515ae2a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T14:25:51.477

另一种方法我经常碰巧用它来像 Web 开发人员一样思考。尝试使您的布局看起来不错，布局向任何方向拉伸。将重要部分居中并确保后面的图像可以双向拉伸。然后使用 imageview 作为背景并将其设置为 match_parent 并将 scaletype 设置为 centerCrop。它不适用于一切，但我很确定它适用于您的样品。

在您的情况下，您可以将您现在拥有的所有内容放入另一个容器（例如RelativeLayout）中，然后将其居中并设置尺寸或使其成为wrap_content。然后，新的顶部容器应该 match_parent 并具有我小时候谈到的 imageview。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T14:12:03.793

对于要使用屏幕尺寸的布局，您应该为图像保留不同的密度，例如

布局大而不是布局hdpi

**编辑**

你想要一个这样的文件夹布局：

*   res/drawable-ldpi/[你的图片资源]
*   res/drawable-mdpi/[你的图片资源]
*   res/drawable-hdpi/[你的图片资源]
*   res/drawable-xhdpi/[你的图片资源]
*   res/layout/[你的布局 xml 文件]
*   res/layout-large/[为大屏幕修改的布局 xml 文件]
*   res/layout-small/]为小屏幕修改的布局 xml 文件]

有关详细信息，请参阅此链接：http: [//developer.android.com/training/basics/supporting-devices/screens.html](http://developer.android.com/training/basics/supporting-devices/screens.html)

**编辑2**

如果您必须坚持一种布局，那么您需要编辑 res/values-large/dimes.xml 中的值以影响大屏幕设备。

如果您有超大的设备屏幕，那么您需要为每个屏幕尺寸编辑 res/values-xlarge/dimens.xml 等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T19:27:10.957

[**我的第一个问题**](https://stackoverflow.com/questions/7948903/how-to-handle-android-screens-fragmentations)与这个非常相似。

简而言之，您的问题是您需要根据您在背景上显示的图像放置视图并调整其大小。可悲的是，没有一些解决方法，android 不支持它。

在 silverlight&WPF 上有一个 viewBox 可以自动完成。flash 有它，因为它是基于矢量的。iphone 拥有它是因为它的所有屏幕都具有相同的纵横比。但是android还没有解决方案。

我什至在谷歌开发者日问过同样的问题，讲师告诉我的是我应该使用 openGL，即使我的应用程序非常简单。

现在，你可以做的是：

1.  最简单的方法：使用带权重的多个 LinearLayout。也可以在其中使用带有权重的视图，以便制定有关位置和大小的规则。Lint 会告诉您这对性能不利，但如果您的视图根本没有移动/调整大小，那应该没问题。

2.  先进的方法：创建你自己的布局，它会确切地知道根据你给它的东西放置视图的位置（以及大小）。我过去做过，但我使用 imageViews 而不是按钮（因为我不得不这样做）。

这种方法也有一个错误（也可以在解决方案 #1 中找到）：在某些屏幕上，它们的图像与背景图像不匹配。如果这不是你的情况，你也可以这样做。

3.  硬核方式：使用 openGl 。使用 andEngine 或 LibGdx 等第三方库会更容易。

4.  网络开发者的方式：把它全部放在一个网站上，展示它，使用带有 android 的界面处理触摸。

5.  无按钮方式：如果您不想使用按钮，可以使用简单的数学运算来了解用户按下的位置，而不使用上述任何解决方案。

顺便说一句，如果你像我看到的那样拉伸图像，它就不会保持它的纵横比。你也需要处理它。使用 openGl 可以帮助你。

# visual-studio-2010 - 是否可以通过 Microsoft 测试管理器安排自动化测试？

> ID：11779004
> 
> 赞同：2
> 
> 时间：2012-08-02T13:58:42.590
> 
> 标签：visual-studio-2010, coded-ui-tests, microsoft-test-manager

我正在尝试安排自动编码的 UI 测试。

我创建了一个测试计划并将其与一个测试用例相关联，该测试用例与一个有序的测试列表相关联。我知道如何运行测试，但是否可以安排测试的运行（例如，每天使用最新的可用版本）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T00:33:22.523

You can also edit a build definition to only run the tests, and schedule a daily build at the desired time

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T11:46:46.577

[可以使用 Tcm 从命令行](http://msdn.microsoft.com/en-us/library/ff942469.aspx)运行测试用例或测试计划。然后可以通过 Windows 任务计划程序安排 Powershell 或 DOS 脚本来运行这些命令。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T14:14:26.840

我们的自动化测试有一个类似的解决方案。（但不使用 Microsoft 测试管理器进行调度）每个构建我们都在运行自动化测试。这是一个小程序，`FileSystemWatcher`它正在检查每次构建成功时更改的文件。buld 完成后，它会下载新文件，然后使用参数启动 MSTest。

如果你有一个有序的测试列表，你总是可以制作一个 cmd / bat 文件来运行带有 som 参数的 MSTest，然后使用 Windows 中的任务调度器对其进行调度：http: [//msdn.microsoft.com/en-us/library/ms243181( v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms243181%28v=vs.80%29.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T16:27:14.253

您可以在构建定义中的 TFS 中运行它们，例如构建部署测试

# licensing - 强制改变的开源许可证？

> ID：11779005
> 
> 赞同：1
> 
> 时间：2012-08-02T13:58:42.980
> 
> 标签：licensing

我不想要 GNU，并希望公司使用该软件，但如果他们修改原始软件，我希望许可证声明这也必须发回或放在网站或其他地方。

什么开源许可证可以满足这个要求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:03:24.327

看看 Mozilla 和 Eclipse 公共许可证，或 LGPL（它更针对 C 类型的早期绑定代码......）。我认为 MPL 和 EPL 都将允许人们将您的代码用作库，但需要对您的代码进行任何更改才能开源。伊纳尔。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-04T21:58:29.260

不存在强制返回任何类型更改的自由软件开源许可证。这实际上并不奇怪，因为它会使软件成为非免费软件，您是在告诉其他人她/他必须对他/她的更改做什么。他们不再拥有自己的更改，他们不再自由地进行更改。

所以你不会找到这样的许可证，它违反了自由和开源软件的原则。

然后你写你不喜欢 GNU GPL。我不想在这里欺骗您，只是要指出，实际上从所有可用的开源许可证中，GNU GPL 是最成功的一种，它鼓励那些扩展和修改软件的人回馈他们的更改。许可证本身并不能保证这一点，更多的是它反映的精神，以便不断变化。

所以实际上没有开源许可证能满足您的要求。

但是，对于您的要求最成功的许可证是您不想要的许可证。

所以回答你的问题并帮助你并不简单。也许您可以重新考虑一下您想要使用哪种免费和开源许可动态？在我看来，您正在寻找非常强大的 copyleft，所以通常我会说您正在寻找的许可证是 GNU Affero 通用公共许可证。不管你写什么，你都不喜欢 GNU。但实际上出于实际原因，我不能向您推荐任何与 GPL 兼容的 copyleft 许可证。

与 GNU 许可证兼容的非 GNU copyleft 许可证是 Mozilla Public License 2.0 (MPL-2.0)。然而，它是一个文件级的 copyleft 许可证。由于上述原因，如果您不编辑文件而是添加文件，它确实允许对软件进行修改。这些更改不需要以源代码形式提供，因此没有直接的回馈。然而，在 MPL 下对文件的贡献需要以源代码的形式传递给所有获得工作并需要源代码的人。但是如上所述，没有强制要求任何更改都需要*回馈*。

[MPL 2.0 常见问题解答](http://www.mozilla.org/MPL/2.0/FAQ.html)可能对您获得更多帮助做出决定更有用。

# iphone - 如何退出方法？

> ID：11779008
> 
> 赞同：0
> 
> 时间：2012-08-02T13:58:49.943
> 
> 标签：iphone, objective-c, ios, cocoa

我有一个`UITextField`并且我想检查停止执行该方法是否为零以及是否继续。这是我的尝试，但它不起作用：

```
if ([textField.text stringByReplacingOccurrencesOfString:@" " withString:@""] == @"") {
    return;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T14:00:19.690

尝试这个：

```
if ([[textField.text stringByReplacingOccurrencesOfString:@" " withString:@""] isEqualToString:@""]) {
    return;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T14:05:45.540

如果你想检查它是否只是空格，你应该使用

```
- (NSString *)stringByTrimmingCharactersInSet:(NSCharacterSet *)set 
```

并使用字符集：

```
[NSCharacterSet whitespaceCharacterSet]; 
```

然后看看字符串最后是否长度为0

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T14:00:20.547

也许是这样：

```
if([[textField.text stringByReplacingOccurrencesOfString:@" " withString:@""] length] == 0) {
    return;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-02T14:42:52.583

好的，根据您的问题：

> “我有一个 UITextField，我想检查它是否为零”

然后

```
if (!textField){
// Do whatever here
} 
```

如果要检查文本字段是否为空，则

```
if ([textField.text isEqualToString:@""]){
    // Do whatever here
} 
```

如果文本字段为空，则不需要从中删除空格。

如果您需要检查是否输入了 x 个字符，那么我会使用

```
if ([textField.text length] <= x){
// do whatever here
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T14:13:09.537

你在找这个吗？

```
if (![[textField text] length] > 0) {

    return;

} 
```

# asp.net - facebook 与 asp.net 网站的集成

> ID：11779011
> 
> 赞同：1
> 
> 时间：2012-08-02T13:58:53.420
> 
> 标签：asp.net, facebook, login, registration

我已经在我正在开发的 ASP.NET 网站中实现了 Facebook 登录和注册，但不确定我是否有最好的流程。**欢迎任何意见/更正。**我发现开发过程有点脱节...... facebook 为您提供了拼图的部分，但在我看来，这些部分如何组合在一起存在不足。我是这样做的：-

母版页：-

```
<!doctype html>
<%--facebook namespace needed for xfbml ...--%>
<html xmlns:fb="http://ogp.me/ns/fb#"> 
```

包含 facebook sdk 和 facebook login javascript 函数的脚本，该函数回发到 ASP.NET 应用程序，以根据我们数据库中的用户表检查 facebook 电子邮件。如您所见，facebook UserID 已被注释掉，因为我没有使用所使用的符号来提取它。（关于如何做到这一点的任何想法？）： -

```
<%--the fb-root div is used by the facebook sdk and the like plugin further below the sdk load --%>
<div id="fb-root"></div>
<%--facebook javascript SDK--%>
<script type="text/javascript">
      // Load the SDK Asynchronously
      (function(d){
         var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
         if (d.getElementById(id)) {return;}
         js = d.createElement('script'); js.id = id; js.async = true;
         js.src = "//connect.facebook.net/en_US/all.js";
         ref.parentNode.insertBefore(js, ref);
       }(document));

      // Init the SDK upon load
      window.fbAsyncInit = function() {
        FB.init({
          appId      : 'XXXXXXXXXXXXX', // App ID
          channelUrl : '//'+window.location.hostname+'/channel.htm', // Path to your Channel File
          status     : true, // check login status
          cookie     : true, // enable cookies to allow the server to access the session
          xfbml      : true  // parse XFBML
        });
      } 

      // catch Facebook login button press
      function FacebookLogin() {

        // user has auth'd your app and is logged into Facebook
        FB.api('/me', function(response) {

            // Do a post to the server to finish the logon
            // This is a form post since we don't want to use AJAX
            var form = document.createElement("form");
            form.setAttribute("method", 'post');
            form.setAttribute("action", '/RegistrationFacebookTestForUser.aspx');

//          var field = document.createElement("input");
//          field.setAttribute("type", "hidden");
//          field.setAttribute("name", 'fbuserid');
//          field.setAttribute("value", response.authResponse.userID);
//          form.appendChild(field);

            var field2 = document.createElement("input");
            field2.setAttribute("type", "hidden");
            field2.setAttribute("name", 'tempform_email');
            field2.setAttribute("value", response.email.toString());
            form.appendChild(field2);

            document.body.appendChild(form);
            form.submit();
        });
      }

</script> 
```

表单发回 RegistrationFacebookTestForUser.aspx.cs 以对照我们的数据库检查用户的 Facebook 电子邮件：-

```
public partial class RegistrationFacebookTestForUser : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        //fbid.Text = Request.Form["fbuserid"];
        email.Text = Request.Form["tempform_email"];

        // get user from facebook email
        MembershipUser tempUser = Membership.GetUser(Request.Form["tempform_email"]);

        if (tempUser == null) // if user not found redirect to Facebook Registration Page
        {
            Response.Redirect("~/RegistrationFacebook.aspx");
        }
        else // if user found set auth cookie and redirect
        {
            FormsAuthentication.SetAuthCookie(tempUser.UserName, true);
            Response.Redirect(Request.UrlReferrer.ToString());
        }

    }
} 
```

如果未找到电子邮件，请重定向到 RegistrationFacebook.aspx 以通过 Facebook 注册插件提供注册....

注册Facebook.aspx:-

```
<div id="facebook_registration" runat="server">

<iframe src="https://www.facebook.com/plugins/registration.php?
client_id=110835352327502&
redirect_uri=http://localhost/RegistrationFacebookBackend.aspx&
fields=
[
{'name':'name'},
{'name':'first_name'},
{'name':'last_name'},
{'name':'email'},
{'name':'password'},
{'name':'_business', 'description':'Do you work for ?', 'type':'select', 'options':{'':'I do not work for ','f5f064ad-0db4-42ce-ba86-e65e6d262768':'xxxxxxxx','534d6c7b-6c3a-4b7d-a41c-9e240c199f1d':'xxxxxxxx'}}, 
{'name':'network', 'description':'Please select your region', 'type':'select', 'options':{'a':'a','b':'b','c':'c','d':'d','e':'e','f':'f','g':'g','h':'h','i':'i','j':'j','k':'k','l':'l','96e9b78a-cc3b-4c6e-b4e4-bc0ba18184c1':'UK','521199a2-5847-4ec0-bca1-19052a110da8':'South Africa'}},
{'name':'public_profile',  'description':'Make my profile public so other users can see me', 'type':'checkbox', 'default':'checked'},
{'name':'newsletter',  'description':'Please send me the monthly  Unite newsletter', 'type':'checkbox'},
{'name':'sponsor_email',  'description':'Please email me when someone sponsors me', 'type':'checkbox', 'default':'checked'},
{'name':'tandc',  'description':'I confirm that I have read and accepted the Terms and Conditions', 'type':'checkbox'}
]
"
scrolling="auto"
frameborder="no"
style="border:none"
allowTransparency="true"
width="100%"
height="530">
</iframe>

</div> 
```

注册Facebook.aspx.cs :-

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (Page.IsPostBack)
        {
            // its a save of content in admin mode
        }
        else 
        {
            // RegistrationFacebookBackend has redirected back here after creating the user
            if (!String.IsNullOrEmpty(Request.QueryString["facebook_result"]))
            {
                switch (Request.QueryString["facebook_result"])
                {
                    case "Success":
                        CreateAccountResultsSuccess.Text = "You have successfully registered with  Unite and the  Unite Facebook app!";
                        CreateAccountResultsSuccess.Visible = true;
                        facebook_registration.Visible = false;
                        break;
                    case "InvalidUserName":
                        CreateAccountResultsError.Text = Resources.Error_Registration_InvalidUserName;
                        CreateAccountResultsError.Visible = true;
                        break;
                    case "DuplicateUserName":
                        CreateAccountResultsError.Text = Resources.Error_Registration_DuplicateUserName;
                        CreateAccountResultsError.Visible = true;
                        break;
                    case "DuplicateEmail":
                        CreateAccountResultsError.Text = Resources.Error_Registration_DuplicateEmail;
                        CreateAccountResultsError.Visible = true;
                        break;
                    case "InvalidEmail":
                        CreateAccountResultsError.Text = Resources.Error_Registration_InvalidEmail;
                        CreateAccountResultsError.Visible = true;
                        break;
                    case "InvalidPassword":
                        CreateAccountResultsError.Text = Resources.Error_Registration_InvalidPassword;
                        CreateAccountResultsError.Visible = true;
                        break;
                    default:
                        CreateAccountResultsError.Visible = true;
                        CreateAccountResultsError.Text = Resources.Error_Registration_Default;
                        break;
                }
            }

        }

    }

} 
```

RegistrationFacebook.aspx 中的注册插件回发到 RegistrationFacebookBackend.aspx 以向 ASP.NET 应用程序注册用户。这里要关注的主要内容是 Page_Load 中的 facebook 表单 signed_request 变量解码以及成员资格和配置文件创建。我们使用 CachedMembershipProvider 但只是在这里替换普通的会员提供程序代码。（networkGUID 只是我们应用程序的一部分，因此请忽略它：-

```
public partial class RegistrationFacebookBackend : System.Web.UI.Page
{
    private UserService userService;
    private MembershipUser newUser;
    private string userName; private string email; private string password; private string firstname; private string lastname;
    private string _business; private string network; private string location;
    private bool newsletter; private bool sponsor_email;
    //private Guid networkId;

    #region public properties

    public UserService UserService
    {
        get { return userService ?? (userService = new UserService()); }
    }

    public MembershipUser NewUser
    {
        get { return newUser ?? (newUser = Membership.GetUser(userName)); }
    }

    #endregion

    /// <summary>
    /// Handles the Load event of the Page control.
    /// </summary>
    /// <param name="sender">The source of the event.</param>
    /// <param name="e">The <see cref="System.EventArgs"/> instance containing the event data.</param>
    protected void Page_Load(object sender, EventArgs e)
    {
        if (Page.IsPostBack)
        {
            // 
        }
        else  // Request with Facebook signed_request payload ... create the user
        {
            if (!string.IsNullOrEmpty(Request.Form["signed_request"]))
            {
                string payload = Request.Form["signed_request"].Split('.')[1];
                var encoding = new UTF8Encoding();
                var decodedJson = payload.Replace("=", string.Empty).Replace('-', '+').Replace('_', '/');
                var base64JsonArray = Convert.FromBase64String(decodedJson.PadRight(decodedJson.Length + (4 - decodedJson.Length % 4) % 4, '='));
                var json = encoding.GetString(base64JsonArray);

                var o = JObject.Parse(json);

                userName = o.SelectToken("registration.email").ToString().Replace("\"", "");
                email = o.SelectToken("registration.email").ToString().Replace("\"", "");
                password = o.SelectToken("registration.password").ToString().Replace("\"", "");
                firstname = o.SelectToken("registration.first_name").ToString().Replace("\"", "");
                lastname = o.SelectToken("registration.last_name").ToString().Replace("\"", "");
                _business = o.SelectToken("registration._business").ToString().Replace("\"", "");
                network = o.SelectToken("registration.network").ToString().Replace("\"", "");
                location = o.SelectToken("user.country").ToString().Replace("\"", "");
                newsletter = (o.SelectToken("registration.newsletter").ToString().Replace("\"","") == "checked") ? true : false;
                sponsor_email = (o.SelectToken("registration.sponsor_email").ToString().Replace("\"","") == "checked") ? true : false;

                MembershipCreateStatus createStatus;
                CachedMembershipProvider cmp = new CachedMembershipProvider();
                System.Collections.Specialized.NameValueCollection nvc = new System.Collections.Specialized.NameValueCollection();
                nvc.Add("providerName","AspNetSqlMembershipProvider");
                cmp.Initialize("CachedMembershipProvider", nvc );
                newUser = cmp.CreateUser(userName, password, email, null, null, true, Guid.NewGuid(), out createStatus);
                switch (createStatus)
                {
                    case MembershipCreateStatus.Success:
                        // set roles and create profile
                        SetUserProfile(true);
                        FormsAuthentication.SetAuthCookie(newUser.UserName, true);
                        Response.Redirect("RegistrationFacebook.aspx?facebook_result=Success");
                        break;
                    case MembershipCreateStatus.InvalidUserName:
                        Response.Redirect("RegistrationFacebook.aspx?facebook_result=InvalidUserName");
                        break;
                    case MembershipCreateStatus.DuplicateUserName:
                        Response.Redirect("RegistrationFacebook.aspx?facebook_result=DuplicateUserName");
                        break;
                    case MembershipCreateStatus.DuplicateEmail:
                        Response.Redirect("RegistrationFacebook.aspx?facebook_result=DuplicateEmail");
                        break;
                    case MembershipCreateStatus.InvalidEmail:
                        Response.Redirect("RegistrationFacebook.aspx?facebook_result=InvalidEmail");
                        break;
                    case MembershipCreateStatus.InvalidPassword:
                        Response.Redirect("RegistrationFacebook.aspx?facebook_result=InvalidPassword");
                        break;
                    default:
                        Response.Redirect("RegistrationFacebook.aspx?facebook_result=error_default");
                        break;
                }

            }
            else  // Request WITHOUT Facebook signed_request payload
            {

            }

        }

    }

    /// <summary>
    /// Gets the user profile.
    /// </summary>
    /// <param name="profileUserName">Name of the user.</param>
    /// <returns></returns>
    private Web.WebProfile GetUserProfile(string profileUserName)
    {
        ProfileBase wp = Web.WebProfile.Create(profileUserName);
        return new Web.WebProfile(wp);
    }

    /// <summary>
    /// Sets the user profile.
    /// </summary>
    private void SetUserProfile(bool createEvents)
    {
        if (newUser == null)
        {
            throw new ArgumentNullException("newUser");
        }

        //Control container = CreateUserWizard1.CreateUserStep.ContentTemplateContainer;

        Web.WebProfile newProfile = GetUserProfile(NewUser.UserName);
        newProfile.UserId = (Guid)NewUser.ProviderUserKey;
        newProfile.FirstName = firstname;
        newProfile.LastName = lastname;
        newProfile.EmailAddress = email;
        newProfile.NetworkId = NetworkGuid;
        newProfile.FurtherInformationOptIn = true;
        newProfile.Location = location;
        newProfile.IsTemporary = false;
        newProfile.OptInFavourites = false;
        newProfile.OptInNewsletters = newsletter;
        newProfile.OptInGiveTimeEvents = false;
        newProfile.OptInFundraisers = sponsor_email;
        newProfile.OptInNews = false;
        newProfile.Save();
        newProfile = new WebProfile(WebProfile.Create(NewUser.UserName));
        UserService.CreateNewProfilePage(newProfile, false);
        if (createEvents)
        {
            EventService ues = new EventService();
            IEvent ue = ues.CreateEvent(EventType.Registration, newProfile.NetworkId, newProfile.UserId,
                                        newProfile.UserId);
        }
    }

    protected Guid NetworkGuid
    {
        get
        {
            Guid networkGuid;

            if (Convertors.GuidTryParse(_business, out networkGuid) == true)
            {
                return networkGuid; // if they have selected a business that is the one to use
            }
            else if (Convertors.GuidTryParse(network, out networkGuid) == true)
            {
                return networkGuid; // otherwise use the region they have selected
            }
            else
            {   //otherwise default to UK
                Convertors.GuidTryParse("96e9b78a-cc3b-4c6e-b4e4-bc0ba18184c1", out networkGuid);
                return networkGuid;
            }

        }
    }

} 
```

# c# - 我应该如何存储不同注册方法的用户信息？

> ID：11779012
> 
> 赞同：0
> 
> 时间：2012-08-02T13:58:53.313
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-membership

我正在使用 ASP.NET MVC 构建一个 Web 应用程序。我已经开始在我的数据库中使用 Aspnet 成员资格表并使用开箱即用的成员资格提供程序。

除了我的成员表之外，我还定义了一个带有外键的用户表，该表返回到 aspnet 表以存储我的应用程序用户数据。

现在我想实现一种方法来允许用户使用他们的 facebook 帐户注册。

为使用此方法注册的用户存储数据的最佳方式是什么？我是否应该创建一组单独的表，或多或少地反映 aspnet 成员表，以便存储 facebook 访问令牌，而不是什么？或者我应该把这些信息直接放到我的自定义用户表中，并让通过 facebook 注册的用户不使用 aspnet 表吗？

要记住的一件事......我也一直在使用 aspnet 角色表和提供程序，并且希望为用户保留角色方面，无论他们使用哪种注册方法。

# list - Sharepoint 1 个功能来部署所有列表或每个列表 1 个功能

> ID：11779014
> 
> 赞同：0
> 
> 时间：2012-08-02T13:59:01.527
> 
> 标签：list, sharepoint, deployment, sharepoint-feature

使用功能部署列表时的最佳实践是什么。

我应该有 1 个功能来部署所有列表定义和实例，还是每个我要部署的列表定义和实例有 1 个功能？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T22:39:09.843

我认为这个决定取决于你的列表、列表之间的关系，特别是你的问题域和设计。

但通常，我会尝试将列表定义放在同一个特性中，其中列表之间存在某种强逻辑依赖关系。例如，如果您使用的列之一是另一个列表的查找列，则将它们放在相同的功能中。

此外，您可能会考虑，如果它们用于实现相同的用例，那么在特定包中实现的用例的所有定义都安装在相同的功能中。

另一方面，当模块化是一个更强的要求时，使用单独的功能可能更可取。请记住，您需要安装并激活所有功能，如果您有太多列表定义和功能，这可能会成为问题。

我相信，问题域在这个决定中非常重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T02:27:38.257

让我保持简短:) 在一个功能中做到这一点。

即使您有这么多列表和多个模块（财务，人力资源等），也可以在一个功能中执行，因为您将始终拥有所有模块（例如员工）通用的列表即使您的列表之间没有依赖关系，我仍然建议您使用一项功能，以便在您将来扩展系统并在将来引入依赖项（查找）时让您的生活更轻松

# windows-phone-7 - 为什么将列表框的ItemSoure绑定到CellectionViewSource的View属性时会自动触发SelectionChanged事件？

> ID：11779020
> 
> 赞同：0
> 
> 时间：2012-08-02T13:59:25.463
> 
> 标签：windows-phone-7

有谁知道为什么在将列表框的 ItemSoure 绑定到 CellectionViewSource 的 View 属性时会自动触发 SelectionChanged 事件？我该如何阻止它？谢谢。代码如下：

```
<ListBox ItemTemplate="{StaticResource ListboxDataTemplate}"  x:Name="AllListBox"  SelectedItem="      Binding Master.SelectedTask,Mode=TwoWay}"   ItemsSource="{Binding Master.ViewSource.View}" />

//Code-behind
CollectionViewSource   ViewSource = new CollectionViewSource();
            ViewSource.Source = Tasks;
            ViewSource.SortDescriptions.Add(new SortDescription("Model.t_state", ListSortDirection.Ascending));
            ViewSource.SortDescriptions.Add(new SortDescription("Model.t_createtime", ListSortDirection.Descending));
            ViewSource.SortDescriptions.Add(new SortDescription("Model.t_importance", ListSortDirection.Descending));
            ViewSource.SortDescriptions.Add(new SortDescription("Model.t_nam", ListSortDirection.Ascending)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T03:06:58.947

您是否在后面的代码中随时更改 SelectedItem 或 SelectedIndex？

# java - 这个 MySQL 可以在 JDBC 中运行吗？

> ID：11779023
> 
> 赞同：0
> 
> 时间：2012-08-02T13:59:36.947
> 
> 标签：java, jdbc, spring-jdbc

我的任务是在表格中为某个产品 ID 保持序列号。除了这是否是一件好事的争论（我失去了争论），这个SQL语句可以在JDBC中运行吗？实际上，我想这里有两种说法。我们正在使用 Spring JDBCTemplates。

```
SET @rank:=0; 

UPDATE my_table
SET product_set=@rank:=@rank+1 
WHERE product_id = '123456'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:01:26.087

您可以像这样在查询中定义一个变量

```
UPDATE my_table
inner join (select @rank:= 0) r
SET product_set = @rank:=@rank+1 
WHERE product_id = '123456'; 
```

# java - Android ListItem 不工作

> ID：11779029
> 
> 赞同：0
> 
> 时间：2012-08-02T13:59:56.163
> 
> 标签：java, android

当我单击列表项时，它不会启动新活动。是什么原因？其他人已经实现了相同的代码，并且程序正在运行。这个问题我该怎么办？这是代码：

```
public class Menu extends ListActivity {

    String classes[]={"StartingPoint","Splash", "You", "Dumb"};

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setListAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, classes));
    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        // TODO Auto-generated method stub
        super.onListItemClick(l, v, position, id);
        String cheese = classes[position];
        try {
            Class ourclass = Class.forName("com.umer.splashscreenwithsound." + cheese);
            //Class ourclass = Class.forName("com.umer.splashscreenwithsound.StartingPoint");
            Intent myintent = new Intent(Menu.this,ourclass);
            startActivity(myintent);
        } catch(ClassNotFoundException e) {
            e.printStackTrace();
        }
    }
} 
```

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:36:26.010

您需要在 onCreate() 中设置点击的监听器

```
 @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setListAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, classes));
        ListView lv = getListView();
        lv.setOnItemClickListener(this);
    } 
```

# python - 以对应用程序用户“简单”的方式将数据导入 Google App Engine

> ID：11779033
> 
> 赞同：1
> 
> 时间：2012-08-02T14:00:06.307
> 
> 标签：python, google-app-engine, google-cloud-datastore, data-import

在 GAE 中使用 Python 构建一个应用程序来处理大量用户数据，例如联系人、约会等...

希望允许用户从其他应用程序导入他们的旧数据。例如，约会可能如下所示：

```
开始时间 持续时间 服务客户 ID
2012-08-02 09:50AM, 01:00:00, 理发, 94782910,    
2012-08-02 10:50AM, 00:30:00, 染色工作, 42548910,
...

```

我不熟悉处理此类情况的公认做法。我还看到在谷歌应用引擎上处理这个问题，因为请求不能超过 30 秒。

理想情况下，用户似乎应该能够通过网页上传其数据的 CSV 文件，但我真的不知道使用应用引擎执行此操作的好方法。

我能想到的另一种方法是让用户将文本直接剪切并粘贴到 HTML 文本区域中。然后 javascript 可用于迭代数据并将其一次一行或以小块形式发布到服务器。不过，这对我来说听起来很粗略。

关于处理这个问题的“好”方法有什么想法吗？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:25:23.410

这完全取决于您要导入的行数，如果数量适中（最多 50 行），您可以在处理程序中进行导入。如果数量较大，您将需要使用[管道](http://code.google.com/p/appengine-pipeline/)（支持使用 csv），并且可能在导入完成后向用户发送电子邮件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T15:25:52.117

让用户上传文件，然后启动运行导入的任务。最后将结果/错误通过电子邮件发送给用户。我所做的另一种方法是让用户在谷歌文档中创建电子表格，并让他们提供工作表密钥或链接（如果已发布），然后启动直接从谷歌文档处理电子表格的任务。

# java - 获取网络适配器的最大带宽

> ID：11779035
> 
> 赞同：0
> 
> 时间：2012-08-02T14:00:16.850
> 
> 标签：java, networking, adapter

我想知道如何获得网络适配器的最大带宽。

当我打开我的网络设置面板（例如，Wired Connected - 100Mb/s）时，我可以阅读它，但我会以图表的方式获得这个值。不需要无线。

我正在使用 Ubuntu 12.04 并使用 Java 进行编码。我看了看，`NetworkInterface`什么`InetAddress`也没找到。

提前致谢，

佩德罗

**编辑**

运行 lshw -class network 我找到了我想要的：

```
lshw -class network
  *-network               
       description: Ethernet interface
       product: NetXtreme BCM5721 Gigabit Ethernet PCI Express
       vendor: Broadcom Corporation
       physical id: 0
       bus info: pci@0000:04:00.0
       logical name: eth0
       version: 21
       serial: 00:10:18:2d:d6:19
       capacity: 1Gbit/s
       width: 64 bits
       clock: 33MHz 
```

如何从 Java 应用程序中获取此信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:10:21.193

链接速度可`ethtool`用于 Ubuntu 上的适配器。[http://www.cyberciti.biz/faq/howto-determine-ethernet-connection-speed/](http://www.cyberciti.biz/faq/howto-determine-ethernet-connection-speed/)

这是理论极限，因此实际达到的速度可能会更低。

您可以使用 ProcessBuilder 调用系统命令。

# c++ - 在 C++ 中分配内存时发出 SIGKILL

> ID：11779042
> 
> 赞同：11
> 
> 时间：2012-08-02T14:00:30.433
> 
> 标签：c++, memory-management, sigkill

我正在为 C++ 中内存有限的嵌入式系统（Tegra 2）开发应用程序。我正在处理有时会出现的代码`new`和`new[]`整个代码的 NULL 结果，但应用程序能够处理这个问题。

问题是如果内存完全耗尽，系统会通过 SIGKILL 杀死进程。我能以某种方式告诉它`new`应该只返回 NULL 而不是终止进程吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-02T15:00:33.890

我不确定您使用的是哪种操作系统，但您应该检查它是否支持像 Linux 那样的[*机会性内存分配。*](http://my.safaribooksonline.com/book/operating-systems-and-server-administration/linux/0596009585/memory-management/opportunistic_allocation)

如果启用，可能会发生以下情况（详细信息/解决方案特定于 Linux 内核）：

1.  您的`new`or`malloc`从内核获取有效地址。**即使没有足够的内存**，因为...
2.  直到第一次访问的那一刻，内核才真正分配内存。
3.  如果使用了所有“过度使用”的内存，操作系统就没有机会杀死其中一个相关进程。（告诉程序内存不足已经来不及了。）在 Linux 中，这称为[Out Of Memory Kill (OOM Kill)](http://linux-mm.org/OOM_Killer)。这样的杀戮记录在内核消息缓冲区中。

解决方案：禁用内存过度使用： `echo 2 > /proc/sys/vm/overcommit_memory`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T14:12:44.860

有两个想法浮现在脑海。

1.  编写自己的内存分配函数而不是直接依赖`new`。您提到您在嵌入式系统上，其中特殊分配器在应用程序中非常常见。您是直接在硬件上运行应用程序，还是在执行/OS 层下的进程中运行？如果是后者，是否提供了用于分配内存的系统 API？

2.  查看 C++ `set_new_handler`，看看它是否可以帮助您。`new`您可以请求在分配失败时调用特殊函数。也许在该功能中，您可以采取措施来防止任何杀死进程的执行。参考：[http ://www.cplusplus.com/reference/std/new/set_new_handler/](http://www.cplusplus.com/reference/std/new/set_new_handler/)

# delphi - 指向组件的指针

> ID：11779045
> 
> 赞同：-2
> 
> 时间：2012-08-02T14:00:30.847
> 
> 标签：delphi, pointers, reference, components

我有一个 PopupMenu 项目，其中 TMenuItem 标签根据调用它的按钮而变化。每个按钮都有自己的 TEdit（ResultTFile1、ResultTFile2 和 ResultTFile3）。这些 TEdits 是使用表单设计器创建的。

```
var
 TempResultFile : TEdit;
begin
 // Find the right TEdit
 case (Sender as TMenuItem).Tag of
  1: TempResultFile := ResultTFile1;
  2: TempResultFile := ResultTFile2;
  3: TempResultFile := ResultTFile3;
 end;

 // Call save function
 if (SaveDialog1.Execute) then TempResultFile.Text := SaveDialog1.FileName;
end; 
```

但是，它不起作用。对话框打开，但在执行后，FileName 变量并未提供给真正的 TEdit.Text（ResultTFile1、ResultTFile2 和 ResultTFile3）。没有错误。什么都没有。调试器似乎没有反应——但是，我可能是错的。如果我很好理解这一点，那是因为该值是给 TempResultFile 而不是真正的 TEdit。如何以 TempResultFile**指向**组件的方式对其进行编码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T21:00:47.450

为了调试您的代码并找出问题所在，请完全更改您的代码——注释解释了每个代码如何帮助您解决问题。

```
var
  TempResultFile : TEdit;
begin
  if SaveDialog1.Execute then    // Only try assignment if file chosen
  begin
    // Find the right TEdit
    // The default branch will be used if the wrong menu item is 
    // connected to the event, or you forgot to set the tag value
    case (Sender as TMenuItem).Tag of
      1: TempResultFile := ResultTFile1;
      2: TempResultFile := ResultTFile2;
      3: TempResultFile := ResultTFile3;
    else                     // If none of the above match
      raise Exception.CreateFmt('Invalid tag %d in %s', 
         [TMenuItem(Sender).Tag, TMenuItem(Sender).Name]));
    end;
    // At this point, we know TempResultFile has been assigned a value
    TempFileResult.Text := SaveDialog1.FileName;
  end
  else // User clicked cancel on SaveDialog1.
    ShowMessage('SaveDialog1.Execute returned False`);
end; 
```

这会做几件事来帮助你：

*   如果`SaveDialog`没有出现，您就知道您没有为菜单项分配 OnClick 处理程序。

*   如果用户选择`Cancel`，`SaveDialog`则返回 false，这将显示一个对话框来指示该事实（以消除该问题）。

*   如果用户选择了一个文件，它会检查以确保对 进行了有效的`Tag`分配`TMenuItem`，如果您忘记了则引发异常（并为您提供无效的标记值和被单击的组件的名称）。

此外，它比原始问题中的代码更安全，如果标记不是`case`语句中的值之一并且`SaveDialog1.Execute`返回 true，则可能导致访问冲突。`TempResultFile`（当您访问它的`Text`属性时，可能没有分配任何内容。）

一旦你弄清楚你做错了什么，你可以删除最后的

```
end
else 
  ShowMessage('SaveDialog1.Execute returned False`); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T19:00:05.373

正如其他人所说，您显示的代码只有这么多可能出错的地方：

1)`TMenuItem.Tag`可能包含错误的值。

2)`TempResultFile`可能没有分配一个有效的`TEdit`指针。不管其他人怎么说，保持变量未初始化并不能保证会发生访问冲突，尽管它很可能发生。还有一种可能性是，如果`TEdit`没有正确创建或已被释放，则分配的指针可能为 nil。如果您尝试使用它，那将导致 AV。

3)`SaveDialog1.Execute()`可能返回 False。如果您取消对话框，就会发生这种情况，但如果对话框有内部错误，也会发生这种情况。在某些情况下，您可以使用`CommDlgExtendedError()`来检查该情况。

4)`SaveDialog1.FileName`为空，如果`SaveDialog1.Execute()`返回 true，则不会发生这种情况，但是如果您使用的是相当现代的 Delphi 版本，在 Windows Vista 或更高版本上运行您的应用程序，并选择非文件系统文件，则可能会发生这种情况。

在调试期间，请确保您正在检查所有这些条件，例如：

```
var         
  Item: TMenuItem;
  TempResultFile : TEdit;         
  S: String;
begin         
  Item := Sender as TMenuItem;

  case Item.Tag of         
    1: TempResultFile := ResultTFile1;         
    2: TempResultFile := ResultTFile2;         
    3: TempResultFile := ResultTFile3;         
  else
    raise Exception.CreateFmt('%s.Tag (%d) is not an expected value!', [Item.Name, Item.Tag]);
  end;         

  if TempResultFile = nil then
    raise Exception.Create('TempResultFile is nil!');

  if not SaveDialog1.Execute then
    raise Exception.CreateFmt('SaveDialog1.Execute returned false! Possible CommDlg error? (%d)', [CommDlgExtendedError()]);

  S := SaveDialog1.FileName;
  if S = '' then
    raise Exception.Create('SaveDialog1.FileName is empty!');

  TempResultFile.Text := S;
end; 
```

作为使用 的替代方法`TMenuItem.Tag`，该`TPopupMenu.PopupComponent`属性将告诉您哪个 Button 显示了 PopupMenu。您可以将`TButton.Tag`属性设置为指向`TEdit`与该按钮对应的组件，然后您不必再使用该`TMenuItem.Tag`属性来寻找`TEdit`组件，例如：

```
procedure TForm1.FormCreate(Sender: TObject);
begin
  ResultTButton1.Tag := NativeInt(ResultTFile1);
  ResultTButton2.Tag := NativeInt(ResultTFile2);
  ResultTButton3.Tag := NativeInt(ResultTFile3);
end;

procedure TForm1.MenuItemClick(Sender: TObject);
var 
  ResultTButton : TButton; 
  TempResultFile : TEdit; 
begin 
  ResultTButton := PopupMenu.PopupComponent as TButton; 
  TempResultFile := TEdit(ResultTButton.Tag); 
  if TempResultFile <> nil then begin
    if SaveDialog1.Execute then
      TempResultFile.Text := SaveDialog1.FileName; 
  end;
end; 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-02T22:01:35.513

嗯...实际上只有一个原因导致您的代码无法正常工作：没有分配 TempResultFile，这意味着“case”语句无法找到匹配项。任何一个：

*   Sender*不是*TMenuItem 的实例
*   Sender 不是您期望的 TMenuItem 实例
*   Sender 是您的 TMenuItem 但您没有正确分配标签

每个案例都非常容易验证。开始工作吧！

哦，顺便说一句，适当的防御风格会将代码重写为：

```
var
 TempResultFile : TEdit;
begin
 {$IFDEF DEBUG}
 // preconditions
 Assert(sender is TMenuItem) ;
 {$ENDIF}
 // Find the right TEdit
 case (Sender as TMenuItem).Tag of
     1: TempResultFile := ResultTFile1;
     2: TempResultFile := ResultTFile2;
     3: TempResultFile := ResultTFile3;
     else Assert(false,'Failed to locate the proper TEdit') ;
 end;

 // Call save function
 if (SaveDialog1.Execute) then 
     TempResultFile.Text := SaveDialog1.FileName; 
```

结尾;

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-08-02T15:56:44.433

你可以这样写：

```
begin
  if (SaveDialog1.Execute) then 
  begin
    case (Sender as TMenuItem).Tag of    
       1: ResultTFile1.text := SaveDialog1.FileName;    
       2: ResultTFile2.text := SaveDialog1.FileName;    
       3: ResultTFile3.text := SaveDialog1.FileName;   
    end;  
  end; 
end; 
```

# objective-c - 发送 POST 后重新加载 UITableView

> ID：11779048
> 
> 赞同：0
> 
> 时间：2012-08-02T14:00:39.283
> 
> 标签：objective-c, ios

我在发布一些数据后尝试重新加载我的 UITableView。这是代码：

```
-(IBAction)carregaLista{

NSError *err = nil;
NSURLResponse *response = nil;

NSMutableURLRequest *request = [[[NSMutableURLRequest alloc] init] autorelease];

NSString *theURL = [NSString stringWithFormat:@"http://localhost/tests/json/"];
NSURL *URL = [NSURL URLWithString:theURL];
[request setURL:URL];
[request setCachePolicy:NSURLRequestReloadIgnoringLocalCacheData];
[request setTimeoutInterval:30];

NSData *jsonData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&err];

resultsDictionary = [[NSDictionary alloc] init];

resultsDictionary = [jsonData objectFromJSONData];
//NSLog(@"my dictionary = %@", resultsDictionary);

self.billsArray = [[NSArray alloc] init];
self.billsArray = [resultsDictionary objectForKey:@"bills"];

// Add values to its array

double sum = [[self.billsArray valueForKeyPath:@"@sum.value"] doubleValue];

NSString *totalString = [NSString stringWithFormat:@"%0.2f", sum];
self.total.text = totalString;

// Custom table cell

tabela.rowHeight = 100;
[self.tabela reloadData];
NSLog(@"Chamou carregaLista");

} 
```

然后，在 AddViewController 中：

```
-(IBAction)enviaCadastro:(id)sender{

NSLog(@"Nome: %@, Valor: %@", self.nome.text, self.valor.text);

NSMutableURLRequest *request =[NSMutableURLRequest requestWithURL:[NSURL URLWithString:@"http://localhost/tests/json/add.php"]];
[request setHTTPMethod:@"POST"];

NSString *post =[[NSString alloc] initWithFormat:@"nome=%@&valor=%@", self.nome.text, self.valor.text];
[request setHTTPBody:[post dataUsingEncoding:NSUTF8StringEncoding]];

NSURLResponse *response;
NSError *err;
NSData *responseData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&err];
NSString *responseString = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];

float respCode = [responseString floatValue];
if(respCode < 400) {
    [self dismissModalViewControllerAnimated:YES];
    ViewController *firstView = [[ViewController alloc] init];
    [firstView carregaLista];
}
else {
    NSLog(@"NAO DEU CERTO");
}

} 
```

我应该怎么做才能用新添加的数据重新加载表？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:48:03.337

这个...

```
ViewController *firstView = [[ViewController alloc] init]; 
```

...创建一个**新**的视图控制器，它与您已经拥有的任何实例不同，并且不是具有在屏幕上可见的视图的实例。您可能正在更新其数据属性并期望更新出现在您的视图中。我相信你需要调用已经是你应用程序的一部分`carregaLista`。`ViewController`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T18:03:37.967

想通了。`carregaLista`我在里面打电话`viewDidLoad`。只是放在里面`viewWillAppear`然后工作。谢谢大家。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T14:55:44.813

我不能确定这是否是相同的情况，但我在 UIPickerView `-reloadAllComponents`方法上遇到了类似的问题。我注意到，如果该行离开屏幕然后回来更新它。我期望以前的方法做的那种。

我可以让它更新的方法是使用该方法删除我的 NSMutableArray 中的内容，`-removeAllObjects`然后立即调用`-addObject:`then `-reloadAllComponents`。我有一种感觉，你可以做类似的事情并得到你需要的结果。

# c++ - 如何解析自动返回类型 - C++（模板）

> ID：11779049
> 
> 赞同：1
> 
> 时间：2012-08-02T14:00:39.957
> 
> 标签：c++, templates, sfinae

我有一个带有这些签名的 dotProduct 方法：

```
template<typename It, typename It2>
typename DetermineResultType< typename std::iterator_traits<It>::value_type, typename std::iterator_traits<It2>::value_type>::Result dotProduct(It source, It2 source, const size_t size);

template<typename R, typename It, typename It2>
R dotProduct(It source, It2 source, const size_t size); 
```

一切正常，直到我尝试：

```
char * s, * s2;
int result = dotProduct<int>(s, s2, 3); 
```

有了这个，我得到了`std::iterator_traits<int>::value_type`未定义的错误。

我该如何解决这个问题，以便我可以自动确定第一个声明的结果类型？（方法的名称必须保持不变）。我使用一些规则来确定结果类型，但这并不重要。

基本上问题归结为是否`std::iterator_traits<It>::value_type`定义 - 当使用非专业 std::iterator_traits 时。我能以某种方式检测到这一点吗？如果不是，我还有什么其他选择？

好的，现在示例下的作品，但我如何做同样的伎俩我的确定计算类型又名确定结果类型是这样定义的：？？？

```
 //! Template IF predicate implementation
  template <bool B, typename TrueResult, typename FalseResult> 
 class TemplateIf {
 public:
   //! The result of template IF predicate
   typedef TrueResult Result;
 };

 //! Template IF predicate implementation - specialization for false condition
 template <typename TrueResult, typename FalseResult>
 class TemplateIf<false, TrueResult, FalseResult> {
 public:
   //! The result of template IF predicate
   typedef FalseResult Result;
 };

  template <typename T1, typename T2>
  class DetermineComputationType {
  public:
    //! The determined result type
    // If (isSpecialized(T1) && isSpecialized(T2)) {
    typedef typename TemplateIf< std::numeric_limits<T1>::is_specialized && std::numeric_limits<T2>::is_specialized,
      // If (! isInteger(T1) && isInteger(T2) )
      //   return T1;
      typename TemplateIf< ! std::numeric_limits<T1>::is_integer && std::numeric_limits<T2>::is_integer, T1,
      // Else if (! isInteger(T2) && isInteger(T1) )
      //   return T2;
      typename TemplateIf< ! std::numeric_limits<T2>::is_integer && std::numeric_limits<T1>::is_integer, T2,
      // Else if ( sizeof(T1) > sizeof(T2) )
      //   return T1;
      typename TemplateIf< (sizeof(T1) > sizeof(T2)), T1,
      // Else if ( sizeof(T2) > sizeof(T1) )
      //   return T2;
      typename TemplateIf< (sizeof(T2) > sizeof(T1)), T2,
      // Else if ( isSigned(T2) )
      //   return T1;
      // Else
      //   return T2; 
      // }
      typename TemplateIf< std::numeric_limits<T2>::is_signed, T1, T2>::Result >::Result >::Result >::Result >::Result,
      // Else if ( sizeof(T2> > sizeof(T1) )
      //   return T2;
      // Else
      //   return T1;
      typename TemplateIf< (sizeof(T2) > sizeof(T1)), T2, T1 >::Result >::Result Result;
  };

   /*!
\brief Helper class for computation type determination - works for 3 types 

\tparam T1 The first type for computation type determination
\tparam T2 The second type for computation type determination 
\tparam T3 The third type for computation type determination

The result is computed in order: (T1, (T2, T3))
*/
template <typename T1, typename T2, typename T3>
class DetermineComputationType2 {
public:
//! The computation type result
typedef typename DetermineComputationType<T1, typename DetermineComputationType<T2, T3>::Result >::Result Result;
 };

template <typename T1, typename T2>
class DetermineReturnComputationType {
public:    
typedef typename std::iterator_traits<T1>::value_type T1Type;
typedef typename std::iterator_traits<T2>::value_type T2Type;    
typedef typename DetermineComputationType<T1Type, T2Type>::Result Result;
};

//! For description see cpputil::dotProduct()
 template <typename R, typename Ct, typename It, typename It2>
 inline R dotProductRCtItIt2(It source, It2 source2, const size_t size) {
   Ct result = Ct();
   for (size_t i = 0; i < size; ++i)
     result += static_cast<Ct>(source[i]) * static_cast<Ct>(source2[i]);

   return static_cast<R>(result);
  }

/*!
\brief Returns the dot product of vectors

\param[in] source The iterator to the start of source vector
\param[in] source2 The iterator to the start of second source vector    
\param[in] size The size of vector(s)
*/
template <typename R, typename Ct, typename It, typename It2>
inline R dotProduct(It source, It2 source2, const size_t size) {
  return arithmeticsInternal::dotProductRCtItIt2<R, Ct, It, It2>(source, source2, size);  
}

//! Convenience method - see above for description
template <typename R, typename It, typename It2>
inline R dotProduct(It source, It2 source2, const size_t size) {
  typedef typename std::iterator_traits<It>::value_type ItType;
  typedef typename std::iterator_traits<It2>::value_type It2Type;
  typedef typename arithmeticsInternal::DetermineComputationType2<R, ItType, It2Type>::Result Ct;

 return arithmeticsInternal::dotProductRCtItIt2<R, Ct, It, It2>(source, source2, size);
}

//! Convenience method - see above for description
template <typename It, typename It2>
inline typename arithmeticsInternal::DetermineReturnComputationType<It, It2>::Result dotProduct(It source, It2 source2, const size_t size) {
 //typedef typename std::iterator_traits<It>::value_type ItType;
 //typedef typename std::iterator_traits<It2>::value_type It2Type;
 typedef typename arithmeticsInternal::DetermineReturnComputationType<It, It2>::Result R;

 return arithmeticsInternal::dotProductRCtItIt2<R, R, It, It2>(source, source2, size);  
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:48:32.890

这是一个如何获取 dotProduct 模板函数的示例，该函数将推断返回类型或允许您显式指定它：

```
#include <stdlib.h>
#include <iterator>
#include <iostream>

using std::cerr;

template<typename It, typename It2> struct DetermineResultType;

template<>
struct DetermineResultType<char,char> {
  typedef int Result;
};

template <typename It1,typename It2>
struct DotProduct {
  typedef typename std::iterator_traits<It1>::value_type VT1;
  typedef typename std::iterator_traits<It2>::value_type VT2;
  typedef typename DetermineResultType<VT1,VT2>::Result Result;
};

template<typename Result,typename It, typename It2>
Result dotProduct(It source1, It2 source2, const size_t size)
{
  Result sum = 0;
  for (size_t i=0; i!=size; ++i) {
    sum += *source1 * *source2;
  }
  return sum;
}

template<typename It1, typename It2>
typename DotProduct<It1,It2>::Result
  dotProduct(It1 source1, It2 source2, const size_t size)
{
  typedef typename DotProduct<It1,It2>::Result Result;
  return dotProduct<Result>(source1,source2,size);
}

int main(int argc,char **argv)
{
  const char *s1 = "abc";
  const char *s2 = "def";
  cerr << dotProduct<int>(s1,s2,3) << "\n";
  cerr << dotProduct(s1,s2,3) << "\n";
  return EXIT_SUCCESS;
} 
```

如果第一个参数不是迭代器，那么编译器将无法实例化 DotProduct<>，因为它无法确定 VT1 的类型。然后 SFINAE 将消除这种过载。

# javascript - 使用ajax在coldfusion中引用表单值

> ID：11779050
> 
> 赞同：1
> 
> 时间：2012-08-02T14:00:42.213
> 
> 标签：javascript, jquery, ajax, dom, coldfusion

如果表单值与任何存储的数据“相似”，我需要做的是查询数据库，然后将结果作为表（搜索表单）返回。表单操作调用一个 javascript 函数。该函数验证输入并将表格加载到表单所在的同一 div 中（ajax）。在我的coldfusion页面中是我实际查询的地方，所以我需要在那里访问那些表单字段值。我的问题是最好的方法是什么/如何做到这一点？#form.value# 不起作用，因为表单对象未发送到coldfusion。

我是否：

将DOM表单对象传递给javascript函数，然后将其传递给coldfusion？如果是这样，怎么做？

在没有实际提交表单的情况下引用我的coldfusion页面中的表单字段值？如果是这样，怎么做？（表单确实在单击按钮时提交，但没有刷新，只有上面解释的 javascript 函数调用）。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T14:30:30.337

您的 javascript 将类似于：

```
var theValue = $("#thefield").val();
$.ajax({ type: "GET", url: "/processajax.cfm", data: {value: theValue}, dataType: "json", success: showResult }); 
```

您的 ColdFusion 代码将包括以下内容：

```
<cfcontent reset="true" type="application/json; charset=utf-8">
<cfset someData = doSearch(URL.value)>
<!--- Build data into array --->
<cfset dataArray = [...]>
<cfoutput>#SerializeJSON(dataArray)#</cfoutput> 
```

然后回到您的 javascript 中，您的回调函数将在您获取数组数据并构建结果 html 的位置执行（或使用模板系统为您执行此操作）并将其粘贴在所需的 div 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T15:52:58.610

提交到 iframe 并在那里处理表单是最简单的。

# jsf - 如果 f:viewParam 绑定到转换器，为什么我们需要 Converter#getAsString

> ID：11779052
> 
> 赞同：0
> 
> 时间：2012-08-02T14:00:45.433
> 
> 标签：jsf, converter, viewparams

假设我有以下**f:viewParam**定义：

```
<f:metadata>
    <f:viewParam name="cust-id" value="#{CustomerCEVController.customer}" 
        converter="#{customerConverter}" converterMessage="Unknown customer, please use a link from within the system."
        required="true" requiredMessage="cust-id f:viewParam not present"
    />
</f:metadata> 
```

我在 URL 中使用“?cust-id=2342”参数导航到预期的页面，因此转换器中**getAsObject**方法的作用显然是在支持 bean 中实例化 Customer 字段（例如，通过基于数据库查询关于 cust-id 值）。我不太清楚为什么我们需要**getAsString**方法以及它是如何使用的。这不是关于**getAsString**在通常情况下在转换器中的作用的问题，即在*.xhtml*视图 UI 元素和它们的作用很简单的支持 bean 之间的绑定中。我也在[这里](https://stackoverflow.com/questions/6377798/what-can-fmetadata-and-fviewparam-be-used-for)读到我们可以处理**f:viewParam**作为 GET 参数的 UI 输入元素，但转换器在相反方向的作用对我来说没有意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:15:21.037

在的`getAsString()`情况下确实不使用`<f:viewParam>`，但是可以将现有转换**器重**用于其他`getAsString()`真正使用的组件。

例如

```
<h:outputText value="#{CustomerCEVController.customer}" converter="#{customerConverter}" /> 
```

或者

```
<h:selectOneMenu value="#{CustomerCEVController.customer}" converter="#{customerConverter}">
    <f:selectItems value="#{data.customers}" />
</h:selectOneMenu> 
```

是否`getAsString()`按照[合同](http://docs.oracle.com/javaee/6/api/javax/faces/convert/Converter.html#getAsString%28javax.faces.context.FacesContext,%20javax.faces.component.UIComponent,%20java.lang.Object%29)执行取决于您。如果你不这样做，那么你的转换器根本不能用于其他组件。

# tridion - 将大型二进制文件上传到 SDL Tridion Multimedia Components 时出错

> ID：11779054
> 
> 赞同：13
> 
> 时间：2012-08-02T14:00:54.120
> 
> 标签：tridion

我正在使用 SDL Tridion 2011 SP1，并将大型二进制文件作为多媒体组件上传。这适用于高达约 30Mb 的二进制文件，之后 CME 无法上传文件。我假设这是某种 web.config 设置来限制二进制大小，有谁知道我需要更改哪些配置文件以允许高达 100Mb 的二进制文件。这些是 CMS 特定的设置吗？我是否需要进行其他更改以支持通过 WebDAV 上传这些大文件？

我完全知道我可以为此使用“外部多媒体组件”，但是我们有一些大型二进制文件，我们想对其使用完整的版本控制。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-02T15:04:13.360

这是您问题的答案；你快要上路了。

首先我们需要了解的是，默认情况下，Tridion WebUI 不会在 web.config 中设置任何 maxFilesize，因此，Tridion CME 将采用机器配置文件大小[默认为 30MB]。

这里要上传更大的文件，您需要在 webUI webconfig 下添加以下节点，该节点位于 c:\programfiles(x86)\Tridion\web\WebUi\WebRoot\

```
<security>
   <requestFiltering>
     <requestLimits maxAllowedContentLength="1073741824"/>
   </requestFiltering>
 </security> 
```

请确保 maxAllowedContentLength 只接受字节......

例如，您需要将 maxAllowedContentLength 设置为 1GB，那么它应该是 10240000000

我希望这个答案能解决你的问题......一切顺利，

问候， Hiren

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-02T14:17:25.013

尝试来自 SDL Tridion 文档门户的这些链接（需要登录）

对于 WebDAV：[http ://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/task_E1E4BB75BEB84404B4EFAFC6B8A22D15](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/task_E1E4BB75BEB84404B4EFAFC6B8A22D15)

对于 CME：[http ://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/CME_concept_242A17EC385644C8A77F2C976576492C](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/CME_concept_242A17EC385644C8A77F2C976576492C)

# java - 我有一个 void f(Strings...obj) 类型的函数

> ID：11779057
> 
> 赞同：0
> 
> 时间：2012-08-02T14:00:58.630
> 
> 标签：java, string, overloading

它是我不确定而不是问题的东西。我在测试期间遇到的这段代码。我现在要把代码粘贴到这里。

```
static void count(String...obj){
     System.out.println(obj.length);
}

public static void main(String str[]){
    count(null,null,null);
    count(null,null);
    count(null);
} 
```

程序运行良好，输出为 3 2，在最后一次计数调用中它抛出一个空点异常（显然足够）。顺便说一下，这是测试中的问题。无论如何，我无法理解什么样的函数参数是（String ...obj）。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T14:02:05.573

它是一个[*varargs parameter*](http://docs.oracle.com/javase/1.5.0/docs/guide/language/varargs.html)，它基本上允许您指定多个参数并让编译器为您创建一个数组。

您在最后一行中获得 NPE 的原因是编译器实际上可以选择：

```
count(new String[] { null }) 
```

和

```
count((String[]) null) 
```

...而且它更喜欢后者。

您可以通过强制转换来强制它使用前一个转换`null`：

```
count((String) null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T14:02:41.760

它是指定数组参数的另一个版本。

```
count(String...obj) 
```

表示 count 方法接受 String[]

这等于

```
count(String[] obj) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T14:03:52.933

String... 采用连续的 String 参数或 String 数组。当把 null 我猜它被解释为一个空数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T14:04:25.717

这些方法参数称为[varargs](http://docs.oracle.com/javase/6/docs/technotes/guides/language/varargs.html)，并允许将任意数量的给定类型的参数传递到您的方法中。正如[另一个问题的回答中](https://stackoverflow.com/questions/7539033/java-multiple-arguments-dot-notation)提到的，它们是在 Java 1.5 中引入的，尽管它们不适用于 Java 移动版本。

# mysql - 在子查询 JOIN 中引用外部查询

> ID：11779058
> 
> 赞同：1
> 
> 时间：2012-08-02T14:01:01.580
> 
> 标签：mysql, join, subquery

我在这里呼吁 MySQL 勇士。我的问题是我需要在子查询的左外部联接中使用对外部查询表的引用。我知道这是不可能的，但我不知道如何用外部查询中的典型连接替换子查询过滤。

我将举一个典型的例子来说明我的问题。

这是奥运会，我有几支球队（比如乒乓球队），其中有 1 到 N 名球员。当所有球员都与对方球队的所有球员交手时，两支球队之间的比赛就结束了。简而言之，我有 3 张桌子：

```
Team (id, country); 
Player (id, team_id, name) 
Game (id, playerA_id, playerB_id). 
```

我想搜索所有没有或不是每场比赛都与对方球队的所有球员（显然不在我的球队中）发生争议的球员。这是我的查询：

```
SELECT t.*, p.*
FROM player p
INNER JOIN team t ON t.id = p.team_id AND t.id != My_Team_ID
WHERE EXISTS (
    -- If an opposing team's player has played no game => game.id is NULL
    -- If he hasn't played against all of my teammates => there will be at least one row where game.id is NULL
    SELECT *
    FROM player
    INNER JOIN team ON team.id = player.team_id AND team.id = My_Team_ID
    LEFT OUTER JOIN game ON player.id IN (game.playerA_id, game.playerB_id) AND p.id IN (game.playerA_id, game.playerB_id)
    WHERE game.id IS NULL
) 
```

我出于实际目的放置了一个转储：http: [//pastebin.com/HW3L5ukz](http://pastebin.com/HW3L5ukz) 我试图将 LEFT OUTER JOIN 的第二个条件放在子查询的 WHERE 中，但它没有返回正确的结果。

关于如何实现这一目标的任何想法？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:35:46.797

```
SELECT p1.*, p2.*
FROM player p1
JOIN team t1
  ON t1.id = p1.team_id AND t1.id = My_Team_ID
LEFT JOIN player p2
  ON p2.id != p1.id
JOIN team t2
  ON t2.id = p2.team_id AND t2.id != My_Team_ID
LEFT JOIN game g1
  ON (g1.playerA_id = p1.id OR g1.playerB_id = p1.id)
  AND (g1.playerA_id = p2.id OR g1.playerB_id = p2.id)
WHERE g1.id IS NULL 
```

如果我为 My_Team_ID 使用 1，我会得到以下结果，其中显示了剩余的匹配项：

```
id  team_id name            id  team_id     name
1   1       Laurent Dupuis  6   2           Alec Russell
2   1       Stéphane Leroy  6   2           Alec Russell
3   1       Julien le Guen  4   2           Mark Johnsson
3   1       Julien le Guen  6   2           Alec Russell 
```

# asp.net-mvc - ASP.NET MVC 路由行为中的明显不一致

> ID：11779061
> 
> 赞同：3
> 
> 时间：2012-08-02T14:01:07.273
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-routing

给定下面的控制器

```
public class MyController : Controller
{
    public ActionResult Index()
    {
        return View();
    }

    public ActionResult Test()
    {
        return RedirectToRoute(new { action = "Index" });
    }

} 
```

而这个路由

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.MapRoute(
        "Route1",
        "Route1",
        new {controller = "Account", action = "Index"});

    routes.MapRoute(
        "Default", // Route name
        "{controller}/{action}/{id}", // URL with parameters
        new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
    );

} 
```

当我浏览到 My/Test 时，MyController 的测试操作按预期命中。然后`RedirectToRoute`结果使用 Route1，因为我已将 Action 指定为“Index”。由于我没有指定控制器，它默认为“帐户”。这按预期命中了 AccountController 的索引操作

如果我将路由更改为下面的代码，那么它的工作方式会有所不同，而不是我所期望的。当我浏览到 My/Test 时，它会重定向到 MyController 的 Index Action 而不是 HomeController 的 Index Action。

```
routes.MapRoute(
    "Default", // Route name
    "{controller}/{action}/{id}", // URL with parameters
    new { controller = "Home", action = "Index", id = UrlParameter.Optional }); 
```

我知道什么时候`RedirectToAction`使用，然后 MVC 将推断出当前的控制器，因此这将重定向到 MyController 的索引操作，但 MVC 源代码中的代码注释说`RedirectToRoute`不会推断出当前的控制器，我希望通过第一个示例证明了这一点。

有人知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T14:22:31.147

**始终**使用当前请求值。`Url.Action`和`Url.RouteUrl`（由 使用`RedirectToRoute`）之间的区别在于，它用当前请求值（在 MVC 中从不为空）`Url.Action`覆盖空值，`controller`而不是（它使它们为空）。请注意，空值与不存在、省略或未定义的值不同。`action``Url.RouteUrl`

看看我写的关于路由的[这篇文章：](http://maxtoroq.blogspot.com/2012/04/putting-aspnet-routing-to-test.html)

> UrlHelper.Action 方法集采用 actionName 和 controllerName 字符串参数。调用这些方法可以转换为等价于`Url.RouteUrl(new { action = actionName, controller = controllerName })`. 正如我们之前在*不能使用 null 或空字符串作为没有参数的默认值*中所验证的那样，对 actionName 和/或 controllerName 使用 null 可能会导致无法匹配所需的路由。因此，只要将 null 用于 actionName 和/或 controllerName，Url.Action 就会使用当前请求控制器和操作值。

* * *

澄清一下，第一个示例匹配 Route1，因为：

1.  该路由没有标记，这意味着它不需要匹配的值。
2.  action 的值与默认值匹配。
3.  该代码没有为控制器提供值。如果提供了一个值，则它需要是“帐户”才能匹配。

在第二个示例中，My 用作控制器的值，取自当前请求值，因为路由包含控制器令牌并且未提供值。

# ruby-on-rails - 活动记录缓存解决方案

> ID：11779063
> 
> 赞同：2
> 
> 时间：2012-08-02T14:01:09.683
> 
> 标签：ruby-on-rails, caching, ruby-on-rails-3.2

rails 3.2 的记录缓存有什么好的 gem 吗？我尝试使用记录缓存和缓存钱，它们与 Rails 3.2 不兼容。是否有任何其他与 rails 3.2 配合良好的记录缓存 gem/机制。如果它对应用程序透明且对代码的更改最少，那将很有帮助。

问候， 拉杰什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T06:54:43.713

查看 RailsCasts [http://railscasts.com/?tag_id=18](http://railscasts.com/?tag_id=18)视频以获取 Rails 缓存，并查看 dalli gem [https://github.com/mperham/dalli](https://github.com/mperham/dalli)获取 memcached。

用于缓存的新 Relic 视频[http://www.bestechvideos.com/2009/03/21/railslab-scaling-rails-episode-8-memcached](http://www.bestechvideos.com/2009/03/21/railslab-scaling-rails-episode-8-memcached)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-02T14:15:22.417

你需要使用宝石吗？看看这个[指南](http://guides.rubyonrails.org/caching_with_rails.html)。

# java - 向 JMX 公开 perf4j 性能统计信息不起作用

> ID：11779071
> 
> 赞同：1
> 
> 时间：2012-08-02T14:01:53.437
> 
> 标签：java, jmx, logback, perf4j

我正在尝试使用`org.perf4j.logback.JmxAttributeStatisticsAppender`appender 将 perf4j 生成的性能统计信息公开给 JMX，但它不起作用。

以下是我的 logback.xml 的相关部分

```
 <appender name="fileAppender" class="ch.qos.logback.core.FileAppender">
        <file>${catalina.base}/logs/perfStats.log</file>
        <encoder>
            <pattern>%msg%n</pattern>
    </encoder> 
    </appender>

    <appender name="perf4jJmxAppender" class="org.perf4j.logback.JmxAttributeStatisticsAppender">
        <param name="TagNamesToExpose" value="Import"/>
        <param name="NotificationThresholds" value="ImportMax(&lt;10)"/>
    </appender>

<appender name="CoalescingStatistics"
              class="org.perf4j.logback.AsyncCoalescingStatisticsAppender">
        <param name="TimeSlice" value="1000"/>
    <appender-ref ref="fileAppender"/>
        <appender-ref ref="perf4jJmxAppender"/>
</appender>

<logger name="org.perf4j.TimingLogger" additivity="false">
        <level value="INFO"/>
        <appender-ref ref="fileAppender"/>
        <appender-ref ref="CoalescingStatistics"/>
    </logger> 
```

您会注意到，我将生成的性能统计信息附加`AsyncCoalescingStatisticsAppender`到`fileAppender`和`perf4jJmxAppender`。perfStats.log 文件获取以下行...

```
Tag          Avg(ms)         Min         Max     Std Dev       Count

Import        667.0         667         667         0.0           1 
```

...但是 jconsole 针对 ImportMean、ImportMax、ImportMin 等显示所有内容为 0。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T08:22:43.953

In the CoalescingStatistics the TimeSlice value is set to 1000 (1s), so in the JMX you will only see the last second.

Try to increase this value and see if it helps.

# php - 更多关于 symfony2 的学说和关系

> ID：11779076
> 
> 赞同：0
> 
> 时间：2012-08-02T14:02:04.123
> 
> 标签：php, database, symfony, doctrine

所以现在我已经设置了我的幻灯片容器，例如： Geoarea、Building、Server

在不同的实体中，从一个超类映射。

现在我面临的下一个问题是：我希望能够将这些容器的内容与其中一个容器相关联......

这就是我最初只是考虑拥有一个容器实体并使用 INT 标志设置容器类型的原因，但我认为从 OO 方面来说这并不顺利或不正确。

现在，我当然可以在我的实体“内容”中为每个可能的容器设置 FK 字段，并将它们设置为可为空并只使用其中一个，但我觉得我在这里陷入了困境，跳出框框思考...我想让获取容器及其相关内容尽可能简单...

每个内容仅与一个容器相关，因此在从不使用多个 FK 字段时拥有 3 个 FK 字段感觉很愚蠢......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T19:46:27.313

你有两个解决方案。第一种是使用 Inheritance : [Inheritance Mapping](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/inheritance-mapping.html)，但您的数据库中会有一些冗余。

第二种解决方案是在您的 Child 实体中添加一个 FK，而不是在您的 Mother 实体中添加三个。因此，您将在 Mother 超类中存储公共数据。

# android - 按下和释放按钮的监听器

> ID：11779082
> 
> 赞同：43
> 
> 时间：2012-08-02T14:02:13.833
> 
> 标签：android, view

`Button`按下并释放a 时如何收听？

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-08-02T14:07:15.650

您可以使用`onTouchListener`：

```
view.setOnTouchListener(new View.OnTouchListener() {        
    @Override
    public boolean onTouch(View v, MotionEvent event) {
        switch(event.getAction()) {
            case MotionEvent.ACTION_DOWN:
                // PRESSED
                return true; // if you want to handle the touch event
            case MotionEvent.ACTION_UP:
                // RELEASED
                return true; // if you want to handle the touch event
        }
        return false;
    }
}); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2018-01-24T15:10:23.203

[提琴手](https://stackoverflow.com/a/11779177)给出的答案对于通用视图是正确的。

对于 a `Button`，您应该*始终*`false`从触摸处理程序返回：

 *```
button.setOnTouchListener(new View.OnTouchListener() {      
    @Override
    public boolean onTouch(View v, MotionEvent event) {
        switch(event.getAction()) {
            case MotionEvent.ACTION_DOWN:
                // PRESSED
                break;
            case MotionEvent.ACTION_UP:
            case MotionEvent.ACTION_CANCEL:
                // RELEASED
                break;
        }
        return false;
    }
}); 
```

如果您返回`true`，您将绕过按钮的常规触摸处理。这意味着您将失去按下按钮和触摸波纹的视觉效果。此外，`Button#isPressed()`将`false`在实际按下按钮时返回。

按钮的常规触摸处理将确保您即使在返回时也能获得后续事件`false`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-02T14:07:22.610

[`onTouchListener`](http://developer.android.com/reference/android/view/View.OnTouchListener.html)就是你要找的。

您将需要使用正确的[`MotionEvent`](http://developer.android.com/reference/android/view/MotionEvent.html).

这将允许您处理不同类型的“触摸”。*

# php - 使用 javascript 在 iframe 中发布 php 脚本

> ID：11779084
> 
> 赞同：1
> 
> 时间：2012-08-02T14:02:15.280
> 
> 标签：php, javascript, iframe

我遵循了有关如何制作所见即所得输入文本区域的教程。文本区域工作正常。我遇到的问题是我希望能够为用户提供编辑文本区域发布的信息的选项。

信息存储在我的数据库中，并已查询数据库并将信息放入名为 $details 的变量中。我想把它放在 iframe 中。

这是我的表单代码。

```
<body onLoad="iFrameOn();" >
<form action="inventory_edit.php" enctype="multipart/form-data" name="myForm" id="myform" method="post">
<div id="wysiwyg_cp" style="padding:8px; width:700px;">
              <input type="button" onClick="iBold()" value="B"> 
              <input type="button" onClick="iUnderline()" value="U">
              <input type="button" onClick="iItalic()" value="I">
              <input type="button" onClick="iFontSize()" value="Text Size">
              <input type="button" onClick="iForeColor()" value="Text Color">
              <input type="button" onClick="iHorizontalRule()" value="HR">
              <input type="button" onClick="iUnorderedList()" value="UL">
              <input type="button" onClick="iOrderedList()" value="OL">
              <input type="button" onClick="iLink()" value="Link">
              <input type="button" onClick="iUnLink()" value="UnLink">
              <input type="button" onClick="iImage()" value="Image">
            </div>
            <!-- Hide(but keep)your normal textarea and place in the iFrame replacement for it -->
            <textarea style="display:none;" name="myTextArea" id="myTextArea" cols="100" rows="14"><?php echo $details; ?> blah blah </textarea>

            <iframe name="richTextField" id="richTextField" style="border:#000000 1px solid; width:700px; height:300px;" ></iframe>

      <input type="submit" name="button" id="button" value="Make Changes" onClick="javascript:submit_form();"/>
</form> 
```

这是javascript文件

```
function iFrameOn(){ 
    richTextField.document.designMode = 'On';               
}
function iBold(){
    richTextField.document.execCommand('bold',false,null); 
}
function iUnderline(){
    richTextField.document.execCommand('underline',false,null);
}
function iItalic(){
    richTextField.document.execCommand('italic',false,null); 
}
function iFontSize(){
    var size = prompt('Enter a size 1 - 7', '');
    richTextField.document.execCommand('FontSize',false,size);
}
function iForeColor(){
    var color = prompt('Define a basic color or apply a hexadecimal color code for advanced colors:', '');
    richTextField.document.execCommand('ForeColor',false,color);
}
function iHorizontalRule(){
    richTextField.document.execCommand('inserthorizontalrule',false,null);
}
function iUnorderedList(){
    richTextField.document.execCommand("InsertOrderedList", false,"newOL");
}
function iOrderedList(){
    richTextField.document.execCommand("InsertUnorderedList", false,"newUL");
}
function iLink(){
    var linkURL = prompt("Enter the URL for this link:", "http://"); 
    richTextField.document.execCommand("CreateLink", false, linkURL);
}
function iUnLink(){
    richTextField.document.execCommand("Unlink", false, null);
}
function iImage(){
    var imgSrc = prompt('Enter image location', '');
    if(imgSrc != null){
        richTextField.document.execCommand('insertimage', false, imgSrc); 
    }
}
function submit_form(){
    var theForm = document.getElementById("myform");
    theForm.elements["myTextArea"].value = window.frames['richTextField'].document.body.innerHTML;
    theForm.submit();
} 
```

我花了几个小时试图找到解决办法。这是我添加以尝试将我的 php var 添加到 iframe 的内容。

这被添加到 iFrameOn() 函数中

```
var theForm = document.getElementById('myform');
window.frame['richTextField'].document.body.innerHTML = theForm.elements['myTextArea'].value; 
```

对不起，如果这是很多代码。谢谢

**编辑：** 这是文本编辑器的样子。 ![所见即所得](../Images/94e1d03564c7a381ae8dee20b23a89cb.png)

我希望能够使用数据库中已有的内容预先填充 iFrame，以便用户可以对其进行编辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T10:26:25.017

我用一个动态创建的外部文件来解决这个问题，然后调用到 iframe 中。我找不到使用 iframe 的另一种方法。

然而，这似乎有时会给多个用户带来问题 - 幸运的是，我的项目似乎允许我通过创建文件夹和文件来解决这个问题。也许考虑使用会话变量来创建它（因为它将是唯一的）并在退出时使用 JS 来删除文件？

希望有帮助

# javascript - 单独的格式，同一行

> ID：11779086
> 
> 赞同：-1
> 
> 时间：2012-08-02T14:02:25.847
> 
> 标签：javascript, html, css

基本上，我希望能够将这两行合并为一行。他们应该保留各自的财产。

```
<div><a href="boardfoot/woodcalc.php" target="_blank"><b>Board Foot Calculator</b></a></div>
<p onClick="openClose('a1'); openClose2('a3'); openClose2('a2'); openClose2('a4');" style="cursor:hand; cursor:pointer"><span style="color: #808080;">[Details]</span></p> 
```

希望这是可能的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:05:02.627

试试这个：

```
<span><a href="boardfoot/woodcalc.php" target="_blank"><b>Board Foot Calculator</b></a></span>
    <span onClick="openClose('a1'); openClose2('a3'); openClose2('a2'); openClose2('a4');" style="cursor:hand; cursor:pointer"><span style="color: #808080;">[Details]</span></span>​​​​​​​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T14:05:33.327

`<p>`如果您不想开始新行，则不应该真正使用该标签

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T14:07:44.907

您可以使用`display:inline`css 属性，也可以使用当前标签。

```
<div style="display:inline;">•&amp;nbsp;<a href="boardfoot/woodcalc.php" target="_blank"><b>Board Foot Calculator</b></a></div>
<p onClick="openClose('a1'); openClose2('a3'); openClose2('a2'); openClose2('a4');" style="cursor:hand; cursor:pointer; display:inline;"><span style="color: #808080;">[Details]</span></p> 
```

# ruby-on-rails - Rails 奇怪的删除行为

> ID：11779088
> 
> 赞同：0
> 
> 时间：2012-08-02T14:02:36.477
> 
> 标签：ruby-on-rails, activerecord

对不起，主题中的“奇怪”，这就是正在发生的事情。

我有一个看起来像这样的 ActiveRecord 对象：

```
class BraintreeCache < ActiveRecord::Base
belongs_to :company, :foreign_key => :subscription_id
serialize :subscription
serialize :credit_card
end 
```

执行：

```
BraintreeCache.delete(:subscription_id => "12") 
```

将返回：

```
ActiveRecord::StatementInvalid: PGError: ERROR:  missing FROM-clause entry for table "id"
LINE 1: DELETE FROM "braintree_caches" WHERE "id"."subscription_id" ...
                                             ^
: DELETE FROM "braintree_caches" WHERE "id"."subscription_id" = '12' 
```

这里发生了什么？“身份证”从何而来？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:45:21.387

所以让我非常困惑的是我有这个删除正在处理的分支。

正确的语法应该是：

```
BraintreeCache.delete_all(:subscription_id => "42") 
```

我仍然无法弄清楚简单的删除是如何工作的。

问候，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T14:10:06.493

静态[删除](http://api.rubyonrails.org/classes/ActiveResource/Base.html#method-c-delete)方法需要一个 ID 作为第一个参数，而不是哈希。尝试这个：

```
BraintreeCache.find_by_subscription_id("12").delete 
```

编辑：

如果您不想先实例化对象，也可以使用[delete_all](http://api.rubyonrails.org/classes/ActiveRecord/Relation.html#method-i-delete_all)方法：

```
BraintreeCache.delete_all(subscription_id: "12") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T14:09:37.560

它可能来自滥用`delete`方法。试试这个：

```
BraintreeCache.where(:subscription_id => "12").delete_all 
```

# java - Spring JDBC 模板数据库方言

> ID：11779089
> 
> 赞同：0
> 
> 时间：2012-08-02T14:02:38.093
> 
> 标签：java, spring, jakarta-ee, jdbc, design-patterns

通过 Spring JDBC 模板处理不同数据库（Oracle、MSSql、MySql）的正确方法是什么？我需要为分页实现特定的数据库查询。需要我使用一些东西：

```
if (Oracle){
   opacle specific query
}
if (MSSql){
   MSSql specific query
} 
```

或者有更好的方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T14:14:37.010

DAO 模式是处理该问题的典型方式。指定一个 DAO 接口，提供此 DAO 接口的多个实现（例如，每个数据库一个，但通过继承共享公共代码），并将适当实现的实例（基于 Spring 配置）注入您的服务类。

Spring-JDBC 在这里将无济于事：它只是执行您要求它执行的 SQL 查询。

# iphone - 通知中心 - 我如何知道是否有“未读”通知？

> ID：11779091
> 
> 赞同：3
> 
> 时间：2012-08-02T14:02:41.390
> 
> 标签：iphone, ios, push-notification, apple-push-notifications

在我的应用程序中，我有一个推送通知服务器正常工作，我收到了预期的通知。

如果我在应用程序中并收到通知

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo 
```

叫做..

如果我在应用程序之外，并且收到通知，然后单击它..

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo 
```

叫做..

如果我不在应用程序之外，请通过单击跳板上的图标来接收通知并加载我的应用程序。

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo 
```

不叫…… **？？？？？？**

我不明白为什么会这样，肯定有办法检查通知中心并说，'嘿！通知中心，我有任何未读的应用程序有效负载要处理吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T14:34:08.857

不是把所有的评论都看一遍，结论如下：

1.  设置图标徽章编号
2.  启动应用程序或从后台返回时，检查应用程序徽章。
3.  决定是否向服务器请求任何数据。

这是一个解决方案，但我们也对以下内容感兴趣：

可以查询通知中心吗？

# windows-8 - 如何在 Metro C# 应用程序中捕获屏幕

> ID：11779095
> 
> 赞同：2
> 
> 时间：2012-08-02T14:02:56.693
> 
> 标签：windows-8, microsoft-metro

任何人都可以使用 C# 截取 Metro 应用程序的屏幕截图吗？还是 C++？还是VB？

谢谢...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T14:18:17.523

> 不，Metro 风格的应用程序无法做到这一点。按照设计，他们不能直接与自己以外的其他应用程序交互，包括捕获可能包含其他应用程序的屏幕截图。Metro 风格的应用程序也无法将 Xaml 元素呈现为位图，因此您无法轻松地为自己的应用程序实现此功能。 - 抢

在这里可以找到更多详细信息：[MSDN 论坛](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/63dd9596-bf94-440b-847a-961cbf036e7b/)

我尚未测试此解决方案，但如果您尝试让您的应用按下 Window Key + PrintScreen 并且它应该将图片从那里放入 Pictures 文件夹中，您可以通过 Windows 集成访问图片（我认为），它可能会起作用

# javascript - 将 asyncTest 与 for 循环一起使用

> ID：11779096
> 
> 赞同：0
> 
> 时间：2012-08-02T14:02:59.043
> 
> 标签：javascript, asynchronous, for-loop, qunit

在[这篇文章](https://stackoverflow.com/questions/11776359/checking-if-image-properly-loaded-with-qunit)中，我询问如何检查`qUnit`图像是否正确加载。解决方案是使用`asyncTest`，因为`error`事件处理程序是异步的。

`URLs`现在我正在尝试通过将它与循环组合来重新使用此代码来检查多个，`for`但这一点都不顺利。

**第一次尝试：`for`内部循环`asyncTest`**

```
//stop(); // no difference
asyncTest('image',function() {
    //stop(); // no difference
    var urls = ['a','b'];
    for (var i in urls) {
        //stop(); // no difference
        var url = urls[i];
        var test_image = $('#test-image');
        test_image.error(function(e) {         
            ok(false,'Issue loading image '+url);
            start();
        });
        test_image.load(function() {       
            ok(true,'Image properly loaded '+url);
            start();
        });
        //stop(); // no difference
        test_image.attr('src',url);
    }
}); 
```

结果：1 个测试，4 个相同的断言（在最后一个 url）

![在此处输入图像描述](../Images/683addcf18afd77f9fb8afc1fa6ca62b.png)

第二次尝试：`asyncTest`内`for`循环

```
var urls = ['c','d'];
for (var i in urls) {
    var url = urls[i];
    //stop(); // no difference
    asyncTest('image-'+url,function() {
        var test_image = $('#test-image');
        test_image.error(function(e) {
            console.log('ERROR',$(this).attr('src'));               
            ok(false,'Issue loading image '+url);
            start();
        });
        test_image.load(function() {
            console.log('OK',$(this).attr('src'));  
            ok(true,'Image properly loaded '+url);
            start();
        });
        //stop(); // prevents tests from running
        test_image.attr('src',url);
    });
} 
```

![在此处输入图像描述](../Images/81c75b0ac5caf651c4314866802eb125.png)

结果：2个单独的测试，首先有1个断言，最后有与for循环中的迭代一样多的断言，并且总是只检查最后一个url。

**如何`asyncTest`与 for 循环结合使用，以便每次迭代有 1 个测试+断言（迭代值用于断言）？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T14:27:14.377

发生这种情况的原因是 JavaScript 有一个叫做[Closure](https://developer.mozilla.org/en/JavaScript/Guide/Closures)的东西，它也会`var url = urls[i];`改变与 关联的每个回调的值`.load()`，从而使你的错误报告一个不正确的 URL。

要解决闭包问题，您可以创建一个匿名函数，然后立即执行它。一个更好的解决方案可能是创建一个单独的函数，在其中您将 URL 作为参数传递，它将分别测试每个图像。

我想您也不需要在页面上实际显示图像，而只需检查我们是否能够加载它。因此，我们可以在代码中创建动态图像，而不是将它们应用于任何元素。

这是一个工作代码，小提琴：http: [//jsfiddle.net/VesQ/JWBhD/1/](http://jsfiddle.net/VesQ/JWBhD/1/)

```
var urls = ['http://jquery.com/favicon.ico','http://vesq.net/favicon.ico', 'http://example.com/thisDoesNotExist.jpg'];
test('image', urls.length, function() {
    for (var i = 0; i < urls.length; i++) {
        var url = urls[i];
        stop();
        imageAsyncTest(url);
    }
});

function imageAsyncTest(url) {
    // Create a new dynamic image
    var img = new Image();

    // Turn it into a jQuery object
    var $img = $(img);

    // Hook the tests
    $img.error(function() {         
        ok(false,'Issue loading image '+url);
        start();
    });
    $img.load(function() {       
        ok(true,'Image properly loaded '+url);
        start();
    });

    // Load the image
    $img.attr('src', url);
} 
```

**编辑：**原谅我，没有阅读问题底部的粗体部分。我将很快编辑此代码。

**EDIT2：**好的，在进一步研究了 QUnit API 之后，我相信 中的第二个参数`asyncTest`，称为`expected`，是一个数字，说明应该有多少断言检查。所以我猜代码现在应该可以正常工作了。

**EDIT3：**好的，既然我能够测试它，我发现这`asyncTest()`毕竟不是我们需要的。我们应该与这些结合`test()`在一起`stop()`并将`start()`它们组合成一个测试。我创建了一个工作小提琴并更新了代码。

# python - Python OpenCV Box2D

> ID：11779100
> 
> 赞同：10
> 
> 时间：2012-08-02T14:03:06.757
> 
> 标签：python, image-processing, opencv

我正在尝试从 python 中调用 OpenCV 函数 MinAreaRect2 。我将 OpenCV 2.4.2 与 python 2.7 和 numpy 1.6 一起使用。我走了这么远：

```
import cv

def nda2ipl(arr, dtype=None):
    return cv.fromarray(np.ascontiguousarray(arr, dtype=dtype))

def min_area_rect2(points):
    storage = cv.CreateMemStorage()
    cv_points = nda2ipl(points.reshape((-1, 1, 2)))
    out = cv.MinAreaRect2(cv_points, storage)
return out 
```

我可以使用形状为 (N x 2) 的 ndarray 调用此函数。我得到这种结果：

```
((476.5, 604.5), (951.0, 1207.0), -0.0) 
```

我假设第一个元组是盒子的中心，第二个给出宽度和高度，最后一个是角度。

问题是我无法得到明确的参考来说明这一点。实际上，opencv 文档告诉我函数在 Python 中返回的内容。

我找到了[有关此功能的官方文档，](http://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=minarearect#cv.MinAreaRect2)但这不是很有帮助。

python 中 MinAreaRect2 的输出到底是什么？更一般地说，您从哪里获得有关 OpenCV python 包装器的精确文档？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-03T16:26:40.623

OpenCV Python 包装器文档与普通文档一起保存在同一站点[www.docs.opencv.org](http://www.docs.opencv.org)

早期使用的 Python 模块是`cv`接口，它使用来自原始 C++ 接口的本机数据类型，如 cvMat、cvSeq 等。

后来它被转移到更好、更先进和更简单的模块`cv2`接口。在其中，所有内容都作为 Numpy 数组或本机 python 数据类型返回。

**[在这里，返回的元组具有与cvBox2D](http://docs.opencv.org/modules/core/doc/old_basic_structures.html?highlight=box2d#cvbox2d)**相同的参数。您可以在此处找到更多关于不同 python 包装器之间差异的详细信息：[所有这些 OpenCV Python 接口之间有什么不同？](https://stackoverflow.com/questions/10417108/what-is-different-between-all-these-opencv-python-interfaces/10425504#10425504)

在这里，你的假设是正确的。这些值完全指定了您提到的内容。

如果要绘制旋转矩形，则需要矩形的 4 个顶点。为此，您需要一个在文档中从未见过的函数，即**cv2.cv.BoxPoints()**（但不要担心，当 OpenCV 2.4.3 发布时，它会在文档中出现。）

![在此处输入图像描述](../Images/eff900accf791f51459505725a116f5b.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T12:24:05.217

如您链接到的文档中所述， MinAreaRect2 返回一个[Box2D 对象](http://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=minarearect2#cv.MinAreaRect2)：

正如您正确假设的那样，CvBox2D 对象由其中心、大小和角度定义，如此处[所述](http://docs.opencv.org/modules/core/doc/old_basic_structures.html?highlight=cvbox2d#CvBox2D)。

一般来说，Python 包装器的文档是相当差的。最好的办法是参考 C++ 文档并阅读源代码。

# php - 扩展 PHP 类

> ID：11779107
> 
> 赞同：1
> 
> 时间：2012-08-02T14:03:30.623
> 
> 标签：php, late-static-binding

我的 PHP 项目中的每个 MySQL 表都有一个单独的类。该类将是这样的：

```
class students  {

  public static function find_all() {
        return self::sql_finder("SELECT * FROM ".get_class());
  }

} 
```

我对项目中几乎所有的表都使用相同的类，除了我将类名更改为表名。现在您可以看到我在类中使用的函数中使用了“get_class()”，因此 SQL 从类名中获取表名。

由于我在所有类中使用的类中有太多函数，因此我计划使用子类扩展该类，如下所示：

```
class  class_with_all_the_common_functions {
 public static function find_all() {
        return self::sql_finder("SELECT * FROM ".get_class());
  }
}

class student extends class_with_all_the_common_functions {
 // some table specific functions
} 
```

现在当我使用`student::find_all()`它时显示错误：

```
Database query failed: Table 'dr.class_with_all_the_common_functions
doesn't exist 
```

我认为这很清楚，我希望`find_all()`在班级学生中执行它。这是否可以通过后期静态绑定实现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T14:07:36.540

您会发现与此相关的两件事会有所帮助：

*   `get_called_class()`代替`get_class()`
*   `static::foo()`代替`self::foo()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T14:07:09.423

您可以使用`get_class(parent)`或制作带有表名的私有字段，并仅在必要时重载它：

```
class A {
    private $table = 'A';
}

class B extends A {
    public function getTable() {
        return $this->table; //will return 'A'
    }
} 
```

# iis - Redirection.config 的问题

> ID：11779108
> 
> 赞同：2
> 
> 时间：2012-08-02T14:03:32.260
> 
> 标签：iis

我正在使用 Microsoft.Web.Administration DLL 在我的 ASP.NET 应用程序中以编程方式使用 IIS。我正在运行带有 IIS 7.5 的 Windows 7。让这个工作到底需要什么？看在上帝的份上，web.adminstration.dll 只需要读取权限，甚至不需要写入。我在运行 IIS 7 的 Windows 2008 R2 机器上遇到了同样的问题。

我已经尝试了一切以使其正常工作，但失败了。我尝试将默认应用程序池用于应用程序池，并且对授予 IIS/DefaultAppPool 的 redirection.config 具有完全权限。我尝试将 LocalSystem 帐户用于应用程序池。我尝试将 NetworkService 用于应用程序池，并将 redirection.config 文件的完全权限授予 NetworkService。我为应用程序池尝试了自己的管理员帐户，对redirection.config 文件具有完全权限。

我有IUSR 和lIS_IUSRS，两者都对redirection.config 具有完全权限。我尝试添加对redirection.config 具有完全权限的每个人。我的 UAC 已关闭。

如何找出实际尝试读取该文件的帐户或进程以及如何消除此问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-04T00:04:17.220

您必须在 c:\windows\system32\inetsrv\config 上授予网络服务网络服务读取和执行权限才能克服异常。请参阅[使用 microsoft.web.administration 以非管理员身份查询 iis7](http://blogs.msdn.com/b/jaskis/archive/2009/05/12/using-microsoft-web-administration-to-query-iis7-as-non-admin.aspx)。

# mysql - 如何填写范围内缺少的日期

> ID：11779111
> 
> 赞同：1
> 
> 时间：2012-08-02T14:03:35.493
> 
> 标签：mysql, count

在 MySQL 我有这个查询：

```
SELECT COUNT( * ) AS `total` , DAYOFYEAR( FROM_UNIXTIME( unixtimeissued ) ) AS `dayOfYear` , YEAR( FROM_UNIXTIME( unixtimeissued ) ) AS `year`
    FROM flex_information
    WHERE unixtimeissued >= 'giventime'
    GROUP BY dayOfYear, year
    ORDER BY year, dayOfYear
    LIMIT 0 , 300 
```

这很好用，只是我找不到在特定日期没有条目的情况下插入 0 个计数的方法。即，如果“2012 年 6 月 13 日”没有条目，我希望它在该日期返回 0 的“总计”。

编辑：此数据将用于绘制折线图，​​因此我需要 0 个计数与日期配对才能成功显示准确的图表 - 我*可以*在 PHP 中填写零值，但 MySQL 查询的系统密集度要低得多.

我找到了这个答案：[MySQL 如何在范围内填充缺失的日期？](https://stackoverflow.com/questions/3538858/mysql-how-to-fill-missing-dates-in-range)：我现在有一个“数字”表，但无法成功地使解决方案适应我的查询。我假设的一些速记语法使我难以理解这些概念。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:17:38.310

通过进行上述选择，您将确切知道何时找到零结果。需要做的只是范围的比较。例如，如果您返回以下记录集：

```
ID     DATE   
1      JUN first    
2      JUN second
3      JUN fifth
4      JUN sixth 
```

很明显，JUN 第三和 JUN 第四没有条目，因此默认情况下它们为零。应该可以通过函数找到这些值的范围。

**更新**

如果架构被这样修改，你可以解决这个问题：

```
ID, DATE, COUNT 
```

通过跟踪数据库中的计数，可以使该数字随时可用。应该注意的是，如果要进行许多更新，随着表的增长，该过程将变得耗时。

# sql - 在 SQL 触发器上包含 Where 语句

> ID：11779113
> 
> 赞同：1
> 
> 时间：2012-08-02T14:03:39.770
> 
> 标签：sql, triggers, where-clause

我对编写 SQL 触发器还是很陌生，现在我已经根据需要工作了一段时间，但是现在我想向触发器添加一个 where 子句，以便它仅在满足特定条件时触发。

在这种特殊情况下，我想检查一下是否`ContextDN like '%FA 2012%'`有，如果有，然后触发触发器。这是我当前的触发器：

```
CREATE TRIGGER [dbo].[setAsMoodle]
ON [dbo].[LMS_Section]
For Insert
As
INSERT INTO [dbo].[CUS_LmsSection_LmsProxy] (LMSSectionID, LMSProxyID, LMSSectionCtxDN)
select  SectionID , 'DEE76E47-25E6-459B-9D38-1BCAFA44077A', ContextDN from inserted 
```

有关如何执行此操作的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T14:06:35.353

只需将 where 放在插入语句的末尾

```
USE ICS_NET; 

GO 
CREATE TRIGGER [dbo].[setAsMoodle] 
ON [dbo].[LMS_Section] 
For Insert 
As 
INSERT INTO [dbo].[CUS_LmsSection_LmsProxy] (LMSSectionID, LMSProxyID, LMSSectionCtxDN) 
select  SectionID , 'DEE76E47-25E6-459B-9D38-1BCAFA44077A', ContextDN from inserted
where ContextDN like '%FA 2012%' 
```

触发器将始终触发，但仅插入与条件匹配的行。

这很重要，因为触发器可能会一次触发多行以进行批量插入，因此您将无法有选择地运行它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T14:05:49.393

触发器将始终触发。

您需要将 where 子句放在插入/选择语句中

```
INSERT INTO [dbo].[CUS_LmsSection_LmsProxy] (LMSSectionID, LMSProxyID, LMSSectionCtxDN) 
select  SectionID , 'DEE76E47-25E6-459B-9D38-1BCAFA44077A', ContextDN from inserted 
where ContextDN like '%FA 2012%' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T14:06:43.827

触发器中的语句可以有`WHERE`子句，因此您只需将`WHERE`子句添加到语句中。

```
USE ICS_NET;

GO
CREATE TRIGGER [dbo].[setAsMoodle]
ON [dbo].[LMS_Section]
For Insert
As
INSERT INTO [dbo].[CUS_LmsSection_LmsProxy] (LMSSectionID, LMSProxyID, LMSSectionCtxDN)
select  SectionID , 'DEE76E47-25E6-459B-9D38-1BCAFA44077A', ContextDN 
from inserted
WHERE 'ContextDN' like '%FA 2012%' 
```

# python - 瓶子python将变量渲染为文本而不是html

> ID：11779114
> 
> 赞同：2
> 
> 时间：2012-08-02T14:03:40.263
> 
> 标签：python, bottle

我遇到了瓶子 python 的问题，我有以下代码

```
import glob
import os
from bottle import run, route, error, template
from Find_Posts import hyperlink_postnames

currentdir = os.getcwd()

def hyperlink_postnames():
    hyperlink_filelist = []
    os.chdir(currentdir + "\\Blog_Posts\\")

    for files in glob.glob("*.txt"):
        hyperlink_filelist.append('<a href = "/blog/' + files + '"' + '>' + str(os.path.splitext(files)[0]) + '</a>')
    return  hyperlink_filelist 
```

它返回以下列表

```
['<a href = "/blog/post1.txt">post1</a>', '<a href = "/blog/post2.txt">post2</a>', '<a href = "/blog/post3.txt">post3</a>', '<a href = "/blog/post4.txt">post4</a>', '<a href = "/blog/post5.txt">post5</a>', '<a href = "/blog/post6.txt">post6</a>'] 
```

这又被送入以下瓶装路线：

```
@route('/blog/')
def postnames():
    postlist = hyperlink_postnames()
    tpl_out = template('blogroll', postlist = postlist)
    return  tpl_out 
```

它被输入到 blogroll.tpl 模板中：

```
<!DOCTYPE html>
<div>

<p><b>Blog Roll</b></p>

%for postlist in postlist:
    <li> {{ postlist }}
%end

</div> 
```

我的问题是，当我在浏览器中渲染模板时，它会将模板中的 postlist 变量转换为纯文本而不是 html（这是在列表中写入的内容），但是如果我将瓶子代码更改为这样读取（绕过模板) 它将 postlist 变量呈现为 html 但不在模板内部，这使得代码无用：

```
@route('/blog/')
def postnames():
    postlist = hyperlink_postnames()
    tpl_out = template('blogroll', postlist = postlist)
    return  postlist #return the variable directly bypassing the template renders the list as html 
```

有没有人知道为什么会这样？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-02T14:06:51.017

HTML 特殊字符会自动转义以防止 XSS 攻击。

在模板语句的开头使用感叹号表示您确实想要包含 HTML：

```
%for postlist in postlist:
    <li> {{ !postlist }}
%end 
```

请参阅[有关内联语句的文档](http://bottlepy.org/docs/stable/stpl.html#inline-statements)。

# winapi - 以编程方式单击托盘中的菜单项

> ID：11779117
> 
> 赞同：1
> 
> 时间：2012-08-02T14:03:48.223
> 
> 标签：winapi, tray

我正在编写一个应用程序，我需要在其中单击另一个应用程序托盘图标菜单中的菜单项。这是一个更好理解的屏幕截图，因为我不擅长解释东西。 ![截图示例](../Images/c07a769d93e1999f95423c817538fd77.png)
所以我需要单击其中一个菜单项，例如“退出”。

我知道我应该使用 WinApi 来做到这一点。但是，据我所知，消息`WM_NOTIFY`负责通知顶部窗口有关菜单项的单击。正如 MSDN 网站所说，`For Windows 2000 and later systems, the WM_NOTIFY message cannot be sent between processes`. 我要运行我的应用程序的 PC 正在运行 Windows XP，因此我无法将此消息发送到窗口。有没有其他方法可以点击菜单项？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T17:06:59.040

您的解决方案很可能是特定于应用程序的。带有托盘图标菜单的应用程序通常做的是注册一个图标并为通知提供自己的窗口句柄`HWND`，Windows shell 将在其中转发鼠标事件。单击图标后，窗口会收到转发的偶数并使用[`TrackPopupMenu`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648002%28v=vs.85%29.aspx)API 显示菜单，并且 - 幸运的是 - 请求将选定的菜单项标识符发送回某个窗口，可能与`WM_COMMAND`消息/通知相同的窗口。

因此，您基本上需要监视您感兴趣的应用程序，当您单击菜单时，在其进程或线程中生成了哪些消息。[`Spy++`](http://msdn.microsoft.com/en-us/library/dd460760)是一个很好的工具。一旦您看到是否有特定消息（命令）由于托盘图标上下文菜单项选择而发布到某个窗口，您在控制应用程序中所需要做的就是找到该窗口，即`HWND`按名称、进程名称查找它，然后`WM_COMMAND`向其发布消息。

这不能保证有效，因为我们正在对菜单在应用程序端的实现方式做出某些假设，但是按照上述策略进行研究是有意义的。

UPD。我的华硕 EEE PC 上网本附带华硕实用程序，可通过系统托盘图标和菜单切换显示器分辨率。默认分辨率对我不利。[这个小应用程序](http://trac.assembla.com/roatl-utilities/browser/trunk/PostAsTrayCommand/PostAsTrayCommand.cpp#L21)向该实用程序发布了一个命令以自动更改分辨率。

# ajax - ajax cakephp 成功

> ID：11779122
> 
> 赞同：0
> 
> 时间：2012-08-02T14:04:04.830
> 
> 标签：ajax, cakephp-2.0, cakephp-2.1

如何使用 js helper 在 cakephp 中翻译成功？

```
$.ajax({
//(...)
success:function (data, textStatus) {
                        $("#city-wrap").html(data);
                        $("#AdCityId").selectbox();
                    },
});
return false; 
```

我在 cakephp 中试过这个没有成功：

```
 $this->Js->get('#AdCountryId1')->event('change', 
$this->Js->request(array(
    'controller'=>'cities',
    'action'=>'getByCountry'
    ), array(
    'update'=>'#city-wrap',
    'success'=> '$("#AdCityId").selectbox()';, <= here is what I need !
    'async' => true,
    'method' => 'get',
    'dataExpression'=>true,
    'data'=> $this->Js->serializeForm(array(
        'isForm' => true,
        'inline' => true
        ))
    ))
); 
```

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T14:06:54.040

实际的ajax调用是否被执行？

如果是; 试试这个，看看是否真的调用了成功回调。

```
$this->Js->get('#AdCountryId1')->event('change', 
    $this->Js->request(
        array(
            'controller'=>'cities',
            'action'=>'getByCountry'
        ), 
        array(
            'update'=>'#city-wrap',
            'success'=> "alert('Success!'); $('#AdCityId').selectbox();",
            'async' => true,
            'method' => 'get',
            'dataExpression'=>true,
            'data'=> $this->Js->serializeForm(array(
                'isForm' => true,
                'inline' => true
            ))
        )
    )
); 
```

如果你会看到成功！消息，可能有问题`$('#AdCityId').selectbox();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T09:36:21.170

我有同样的问题我想我找到了一个解决方案看看它是否适合你

```
$this->Js->get('#AdCountryId1')->event('change', 
$this->Js->request(array(
    'controller'=>'cities',
    'action'=>'getByCountry'
    ), array(
    'update'=>'#city-wrap',
    'success'=> '$("#AdCityId").selectbox()';, <= here is what I need !
    'async' => true,
    'method' => 'get',
    'dataExpression'=>true,
    'data'=> $js->serializeForm(array(
        'isForm' => true,
        'inline' => true
        ))
    ))
); 
```

试试这个它会工作

# c# - 获取给定 XmlNode 的所有后代

> ID：11779123
> 
> 赞同：3
> 
> 时间：2012-08-02T14:04:05.820
> 
> 标签：c#, xml, xmlnode

我想在不使用递归的情况下从给定节点获取所有子节点直到离开。那可能吗？我知道如何在 LINQ to XML 中执行此操作，但是 XmlNode:S 有一些问题

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T14:11:29.673

您可以将该[`SelectNodes`方法](http://msdn.microsoft.com/en-us/library/hcebdtae.aspx)与选择所有后代的 XPath 表达式一起使用：

```
XmlNodeList result = myXmlNode.SelectNodes("descendant::node()"); 
```

如果您想更具体地过滤并需要提供任何命名空间前缀，请确保使用[其他重载。](http://msdn.microsoft.com/en-us/library/4bektfx9.aspx)

**更新：**这只会选择非属性节点，因为您的问题不要求属性。不过可以通过修改 XPath 表达式来实现：

```
XmlnodeList result = myXmlNode.SelectNodes("descendant::node() | descendant::*/@*"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T14:11:26.997

您可以使用递归或 XPath 表达式：

我不太擅长 XPath，但类似：

```
 var nodes = myDoc.SelectNodes("//*"); 
```

（编辑：这个似乎工作）

# mysql - 存储对称的多对多关系

> ID：11779124
> 
> 赞同：0
> 
> 时间：2012-08-02T14:04:07.003
> 
> 标签：mysql, many-to-many

所以我有这个项目扩展了现有的代码库，它建立在 MySQL 数据库上。我有一个表，其元组表示建筑物中的位置，我正在制作一个表，表示连接图中这些位置的边以进行寻路。它只是一个简单的两列表，每一列都包含一个 ID，该 ID 是引用位置表的外键。所以总结一下，情况是这样的：

```
CREATE TABLE node (
    ID int(10) AUTO_INCREMENT NOT NULL,
    (...)
    PRIMARY KEY(ID)
);

CREATE TABLE edge(
    ID_1 int(10),
    ID_2 int(10),
    FOREIGN KEY (ID_1) REFERENCES node(ID),
    FOREIGN KEY (ID_2) REFERENCES node(ID)
); 
```

这是一个现有的假设，即图是对称的，即如果节点 A 与节点 B 有一条边，则节点 B 必须与节点 A 有一条边。这里忽略了单向门的情况，但似乎不适用于我的领域。因此，给定节点 A 和 B 已连接，它们的连接可以通过以下三种方式中的任何一种存储在边缘表中：

```
{(A,B)}
{(B,A)}
{(A,B),(B,A)} 
```

我用这张表回答的问题是“给定这个节点，它的邻居是什么节点？” 目前我的应用程序使用这样的查询来做到这一点：

```
SELECT * FROM node
WHERE ID IN(
    SELECT ID_2
    FROM edge
    WHERE ID_1=?
    UNION
    SELECT ID_1
    FROM edge
    WHERE ID_2=?
); 
```

但是，我的直觉是使用 CHECK 约束来确保只能存储后一种结构，而[MySQL 显然不支持](https://stackoverflow.com/questions/2115497/check-constraint-in-mysql-not-working). 从那个答案来看，为了模拟这样的约束，我必须为每个操作编写触发器，以使每个边缘都存储在两个排序中。优点是它表现得比你自然期望的更好，并且可以回答这个问题

```
SELECT * FROM node
WHERE ID IN(
    SELECT ID_2
    FROM edge
    WHERE ID_1=?
); 
```

一旦我读到了模拟 CHECK 的触发器，我就和一个朋友讨论过，他建议确保自反存储是浪费的（双倍存储使用），应该留给应用程序正确处理数据库。现在我有点不确定实际上最好的解决方案是什么 - 数据库是否应该通过使用触发器将插入和删除加倍来确保自反性，或者应用程序是否应该继续读取未自反存储的数据以使其看起来像它一样？让我的数据库以多种方式表示相同的数据让我有点担心。这不合理吗？UNION 等是否会造成明显的性能损失？

（针对相当小的站点，该系统不太可能超过数万个节点，典型节点最多有 6 个边）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:26:58.813

实际上，在您的情况下，最好将每个连接视为一个连接（然后您就可以在需要时阻止！）。如果房间之间有多个连接怎么办？就像一个房间有两个独立的门进入同一个大厅？

无论如何，这些都是很好玩的东西......

就我个人而言，我会根据方向存储每个连接，所以如果 a 和 b 之间有一个双向门，我会这样存储

```
tbl_connections

current_room_id edge      connecting_room_id
1               north     2
2               south     1
1               east      3
1               west      4
4               east      1
1               south     5 
```

是的，如果您有可用的数据，我会包括哪个边缘是连接 - 当他们决定包含它时，它可能会有所帮助....（在上述结构中，您可以从 1 到 3，但不能从 3 到 1）。

像这样存储，然后您可以使用以下方法简单地获取房间邻居（和方向）：

```
SELECT connecting_room, edge
FROM tbl_connections
WHERE current_room_id = 1; 
```

这应该给你：

```
2, north
3, east
4, west
5, south 
```

您还可以根据您所在的房间以及您打算使用此模式通过的边缘来映射路径。

存储你所说的自反数据是一种非常常见的解决方案，在这种情况下，我认为这是正确的方法。

# android - Android INSTALL_REFERRER 和 Google Play 商店

> ID：11779125
> 
> 赞同：1
> 
> 时间：2012-08-02T14:04:11.487
> 
> 标签：android, installation, google-play, referrer

我使用了 INSTALL_REFERRER 并且使用 adb 一切正常，但当我的应用程序在 Google Play-Store 中时就不行了。

我的情况是：

1）一个包含我的 BroadcastReceiver 的库（包 com.sm.android） 2）我的应用程序使用库（包 de.sm.android）

在应用程序的 AndroidManifest.xml 文件中，receiver-part 如下所示：

```
<receiver
        android:name="com.sm.android.helper.ReferralReceiver"
        android:exported="true" >
        <intent-filter>
            <action android:name="com.android.vending.INSTALL_REFERRER" />
        </intent-filter>
    </receiver> 
```

如前所述，使用 adb 我得到了安装事件，但是从商店下载应用程序时，我没有得到事件。[我使用https://developers.google.com/analytics/devguides/collection/android/v2/campaigns](https://developers.google.com/analytics/devguides/collection/android/v2/campaigns)构建我的 url ，它看起来像[https://play.google.com/store/apps/details?id=de。 sm.riskulator&referrer=utm_source%3Dgoogle%26utm_medium%3Dbanner%26utm_content%3D234124%26utm_campaign%3Dpromo](https://play.google.com/store/apps/details?id=de.sm.riskulator&referrer=utm_source%3Dgoogle%26utm_medium%3Dbanner%26utm_content%3D234124%26utm_campaign%3Dpromo)并正确转发到我的应用程序。

在此先感谢，萨沙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:26:13.480

我可能是错的，但我认为它现在已被禁用，因为它是一个安全漏洞。即它允许代码在用户启动之前在手机上运行。

**更新：参考链接。**

[https://nayaneshguptetechstuff.wordpress.com/2014/06/24/receiver-not-working-know-more-about-stopped-state-of-an-application/](https://nayaneshguptetechstuff.wordpress.com/2014/06/24/receiver-not-working-know-more-about-stopped-state-of-an-application/)

[http://developer.android.com/about/versions/android-3.1.html](http://developer.android.com/about/versions/android-3.1.html) （请参阅**已停止应用程序的启动控件**）

[拦截 INSTALL_REFERRER 然后转发到 Google AnalyticsReceiver](https://stackoverflow.com/questions/4984036/intercept-install-referrer-and-then-forward-on-to-google-analyticsreceiver)

# android - 基于String.xml在textview中设置超链接Android

> ID：11779129
> 
> 赞同：1
> 
> 时间：2012-08-02T14:04:28.843
> 
> 标签：android

我的 string.xml 字符串行

```
 <string name="companyLink">&lt;a href=&quot;http://www.abc.com&quot;&gt;abc Technology &lt;/a> </string> 
```

这就是我尝试使用 html 的方式

```
 TextView   companylink = (TextView) findViewById(R.id.textViewCompanyLink);
    companylink.setText(Html.fromHtml(getString(R.string.companyLink)));
    companylink.setMovementMethod(LinkMovementMethod.getInstance()); 
```

然而 android 只在屏幕上显示没有超链接的 html

```
<a href=http://abc.com>abc string </a> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T23:51:22.290

引号也应该被转义，否则 Java 将在 getString() 期间删除它们。在 " 之前添加反斜杠

```
<string name="companyLink">&lt;a href=\&quot;http://www.abc.com\&quot;&gt;abc Technology &lt;/a> </string> 
```

或者这个对我有用的解决方案：

[https://stackoverflow.com/a/9949264/1011746](https://stackoverflow.com/a/9949264/1011746)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T14:29:55.517

我相信正确的语法是：

> `<a href="http://abc.com">abc string </a>`

# android - Android 定期从服务器轮询

> ID：11779132
> 
> 赞同：6
> 
> 时间：2012-08-02T14:04:34.853
> 
> 标签：android, polling

我想每 x 分钟从服务器中提取一些数据。如果信息包含某些信息，我想创建一个通知。即使应用程序在后台或手机处于睡眠状态，我也希望进行此轮询。我有几个关于 android 中的轮询的问题。

*   最好的方法是什么？我应该使用
    IntentService、AlarmManager 还是其他东西？

*   我应该多久轮询一次数据？我想保持相对频繁，比如每 10 分钟一次。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-02T14:20:23.137

除非我真的需要，否则我会`AlarmManager`尽量不运行连续运行的服务，但这确实取决于您将如何使用它。

如果是我，我会（基于有限的描述）：-

1.  设置一个`AlarmManager`在 10 分钟内开火。
2.  响应警报，启动轮询数据的服务。
3.  轮询后，它应该设置一个新的警报，以便在另外 10 分钟内再次触发。
4.  该服务自行关闭。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T14:17:20.340

您将需要使用诸如云到设备消息传递 (C2DM) 之类的东西（在 iPhone 世界中也称为推送通知）

可以在[http://blog.mediarain.com/2011/03/simple-google-android-c2dm-tutorial-push-notifications-for-android找到一个很棒的教程](http://blog.mediarain.com/2011/03/simple-google-android-c2dm-tutorial-push-notifications-for-android)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T14:10:28.460

您可以使用 Handler 来监听服务器。例如[，请反复检查运行代码](https://stackoverflow.com/questions/11725141/run-code-over-and-over/11725197#11725197)

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2012-08-02T14:21:37.183

你可以创建一个 `thread`这样做的。在您的运行方法中，您可以创建一个每 10 分钟轮询一次服务器的循环。

# java - 如何在 JUnit 测试中引发 DatastoreTimeoutException 或/和 DatastoreFailureException？

> ID：11779136
> 
> 赞同：1
> 
> 时间：2012-08-02T14:04:45.117
> 
> 标签：java, unit-testing, google-app-engine, google-cloud-datastore

我使用谷歌应用引擎 Java。

在我的 Junit 测试中，我想引发异常 DatastoreTimeoutException 和 DatastoreFailureException。如何引发抛出异常？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:11:51.660

在 JUnit 测试中，您可以抛出任何允许构造的异常。只要确保将您的测试标记为抛出该异常（或者，通常情况下，声明它可以抛出*任何*异常）。

例如

```
@Test
public void testSomething() throws Exception {
    throw new WhateverYouFancy("Hello, world!");
} 
```

或者，如果您想检查是否引发了特定异常（即因为这表明测试成功），您可以执行以下操作：

```
@Test(expected=FancyException.class)
public void testSomething() throws Exception {
    // do something that ought to trigger a FancyException
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T08:14:33.740

我不是很清楚。

当数据存储没有响应时，Google Appengine 服务器会生成 DatastoreTimeoutException，当数据存储抛出未知异常时，也会生成 DatastoreFailureException。

在我的 Junit 测试中，我希望服务器抛出这些异常。就像使用服务器的功能一样[https://developers.google.com/appengine/docs/java/capabilities/overview](https://developers.google.com/appengine/docs/java/capabilities/overview)

我想这样写，以检查我是否捕获了这些异常：

```
@Test 
public final void testDatastoreFailureException() {
    // config the datastore in order to throw the exception
    try {
        // do something using the datastore.
    } catch ( DatastoreFailureException e ) {
        fail("We do not catch the exception DatastoreFailureException");
    }
} 
```

# flash - 以编程方式读取 adobe flash 共享对象 (FSO)

> ID：11779138
> 
> 赞同：1
> 
> 时间：2012-08-02T14:04:53.310
> 
> 标签：flash, shared-objects, amf

如何在不使用 Flash 的情况下直接读写[Adob​​e Flash Media Server 远程共享对象（FSO 文件） ？](http://www.adobe.com/livedocs/flashmediaserver/3.0/hpdocs/help.html?content=00000099.html)

最好，我想使用 python、php 或 java，但我不介意使用不同的编码语言。我正在寻找文件结构，所以我可以像[这个读写文件的应用程序](http://www.sephiroth.it/python/solreader.php)一样读写`sol`文件。

我需要这个的原因是能够修复在一台机器上创建的文件，这样它们就可以为我正在设置的新机器提供正确的设置。

谢谢！

**编辑**

我可以使用记事本读取某些文件内容，但某些字符显示不正确，例如，请查看[http://pastebin.com/AWdJ2ZcR](http://pastebin.com/AWdJ2ZcR)

十六进制编辑器的附加输出： ![在此处输入图像描述](../Images/7063af779676b822e61783486b8ebce8.png)

我试过使用`pyamf`没有运气：

```
from pyamf import sol
lso = sol.load(file) 
```

我收到以下错误：

```
raise pyamf.DecodeError('Unknown SOL version in header')
pyamf.DecodeError: Unknown SOL version in header 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T17:27:36.227

这些文件使用[AMF](http://download.macromedia.com/pub/labs/amf/amf3_spec_121207.pdf)格式，实际上读写起来相当简单。Python 有[pyamf](http://www.pyamf.org/index.html)库。Java 有一堆，大概有 3 或 4 个，但最常用的两个是 Granite Data Services 的一部分，另一个是 Adob​​e 以前开发的 Blaze Data Services。PHP 也有几个实现，AMFPHP 历史上是第一个，然后它被分叉，主要的开发分支并入 Zend Framework，但是 AMFPHP 项目本身仍然存在并且正在开发中，但是速度很慢。

然而，有些事情你必须知道：

1.  AMF 不一定是自定义的。这意味着其中有一个用于发送任意有效负载的选项，实际上，有几个这样的选项，并不真正相关。

    *   有一种标签类型将以下有效负载描述为“自定义”，即它只记录要读取的字节长度，读者可能理解也可能不理解。这对应于`IExternalizable`在 AS3 中实现。

    *   有一个从序列化中省略字段的选项，在这种情况下，在 Flash 中创建的对象实例将不同于您从文件中解析的实例。这对应于`[Transient]`元数据的使用。

    *   任何人都可以选择使用 AMF 作为包装器，同时以不同的格式进行实际的序列化，并且只使用与`ByteArray`类型相对应的标签。在这种情况下，它对你会有一点用处。

2.  AMF 3.0 具有“扩展”，有趣的是，并非所有使用该格式的用户都会有意使用它们，有时会偶然发现它们。播放器中的实现至少有特殊的标签类型`Vector`和`Dictionary`类，但这些不是格式规范的一部分——大多数读者在遇到这些标签时并不理解它们。

3.  由于在 Flex 框架中的普遍使用，某些不属于规范的类在历史上一直保留在读者实现中。这些将是`ArrayCollection`，`RemoteMessage`以及其他一些。`ArrayCollection`尤其重要，因为它与 基本相同`Array`，但它是用“自定义”序列化标签发送的。

4.  了解 ECMAScript 数组的性质和行为也很重要——它们在解码时可能是服务器故障的来源。ECMAScript 数组是稀疏的，这意味着它们不一定包含 0 和最大索引之间的所有索引，它们是一个数组（从 0 开始的第一个连续索引块）的混合，其余的被编码为哈希表整数键。因此，您可能会序列化一个长度为 2^31 的数组，但在将此数组解释为实际数组时无法在服务器端分配这么多内存。

# javascript - 当用户点击 ctrl + enter 时如何将光标推到下一行？

> ID：11779140
> 
> 赞同：3
> 
> 时间：2012-08-02T14:04:56.000
> 
> 标签：javascript, jquery

我正在研究一个文本区域，如果用户点击输入，它会导致表单提交，但如果他点击 ctrl + enter，我希望它移动到下一行。

这是我正在使用的代码，在我的函数中，由 jquery 在按键上调用：

```
if ( (e.keyCode == 10 || e.keyCode == 13) && e.ctrlKey)
    //move to next line here 
```

任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T14:15:34.863

```
$('.parentElementClass').on('keyup', 'textarea', function(e) {
    if(e.ctrlKey && (e.which == 13 || e.keyCode == 13)) {
        $(this).val(function(i, val) {
            return val + '\n';
        });
    }
}); 
```

[**演示**](http://jsfiddle.net/ricardolohmann/dDYcq/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T14:17:22.720

现在一切就绪！断线在任何时候都保持位置（同时尝试使用最新的浏览器技术以及 IE 的后备等）。

[更新 x2 - jsFiddle 链接](http://jsfiddle.net/ejLF6/4/)

```
$('#sillyTextarea').keydown(function (e) {

    if (e.keyCode === 10 || e.keyCode  == 13 && e.ctrlKey) {
        // Ctrl-Enter pressed
        // keyCode 10 is actually for Chrome (whacky I know...)

        var el = document.getElementById('sillyTextarea'),
            allText = $(this).val(),
            currentPos = getCaret(el),
            beforeText = allText.substr(0, currentPos),
            afterText = allText.substr(currentPos);

        $(this).val(beforeText + '\n' + afterText);

        setCaretPosition(el, currentPos);
    }
}); 
```

借助 2 个功能

`function getCaret(el) { }`

[textarea 中的插入符号位置，从开头开始的字符](https://stackoverflow.com/questions/263743/how-to-get-caret-position-in-textarea)

`function setCaretPosition(el, caretPos) { }`

[在 html 文本框中设置键盘插入符号位置](https://stackoverflow.com/questions/512528/set-cursor-position-in-html-textbox)

# c# - 如何从 C# 运行 Python 脚本？

> ID：11779143
> 
> 赞同：161
> 
> 时间：2012-08-02T14:05:09.900
> 
> 标签：c#, python, .net, ironpython, python.net

这类问题以前也有不同程度的问过，但我觉得回答得不够简洁，所以又问了一遍。

我想在 Python 中运行一个脚本。假设是这样的：

```
if __name__ == '__main__':
    with open(sys.argv[1], 'r') as f:
        s = f.read()
    print s 
```

它获取文件位置，读取它，然后打印其内容。没那么复杂。

好的，那么我如何在 C# 中运行它？

这就是我现在所拥有的：

```
 private void run_cmd(string cmd, string args)
    {
        ProcessStartInfo start = new ProcessStartInfo();
        start.FileName = cmd;
        start.Arguments = args;
        start.UseShellExecute = false;
        start.RedirectStandardOutput = true;
        using (Process process = Process.Start(start))
        {
            using (StreamReader reader = process.StandardOutput)
            {
                string result = reader.ReadToEnd();
                Console.Write(result);
            }
        }
    } 
```

当我通过`code.py`位置`cmd`和`filename`位置时`args`它不起作用。有人告诉我我应该`python.exe`作为传递`cmd`，然后`code.py filename`作为传递`args`。

我一直在寻找一段时间，只能找到建议使用 IronPython 之类的人。但是必须有一种方法可以从 C# 调用 Python 脚本。

一些澄清：

我需要从 C# 运行它，我需要捕获输出，而且我不能使用 IronPython 或其他任何东西。无论你有什么黑客都可以。

PS：我实际运行的 Python 代码比这复杂得多，它会返回我在 C# 中需要的输出，而 C# 代码会不断调用 Python 代码。

假装这是我的代码：

```
 private void get_vals()
    {
        for (int i = 0; i < 100; i++)
        {
            run_cmd("code.py", i);
        }
    } 
```

* * *

## 回答 #1

> 赞同：148
> 
> 时间：2012-08-02T14:10:39.593

它不起作用的原因是因为你有`UseShellExecute = false`.

如果不使用 shell，则必须提供 python 可执行文件的完整路径 as `FileName`，并构建`Arguments`字符串以提供脚本和要读取的文件。

另请注意，`RedirectStandardOutput`除非`UseShellExecute = false`.

我不太确定应该如何为 python 格式化参数字符串，但你需要这样的东西：

```
private void run_cmd(string cmd, string args)
{
     ProcessStartInfo start = new ProcessStartInfo();
     start.FileName = "my/full/path/to/python.exe";
     start.Arguments = string.Format("{0} {1}", cmd, args);
     start.UseShellExecute = false;
     start.RedirectStandardOutput = true;
     using(Process process = Process.Start(start))
     {
         using(StreamReader reader = process.StandardOutput)
         {
             string result = reader.ReadToEnd();
             Console.Write(result);
         }
     }
} 
```

* * *

## 回答 #2

> 赞同：68
> 
> 时间：2012-08-02T14:54:12.380

如果你愿意使用 IronPython，你可以直接在 C# 中执行脚本：

```
using IronPython.Hosting;
using Microsoft.Scripting.Hosting;

private static void doPython()
{
    ScriptEngine engine = Python.CreateEngine();
    engine.ExecuteFile(@"test.py");
} 
```

[在这里获取 IronPython。](http://ironpython.net/)

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2016-05-11T11:55:05.023

### 从 C 执行 Python 脚本

创建一个 C# 项目并编写以下代码。

```
using System;
using System.Diagnostics;
using System.IO;
using System.Threading.Tasks;
using System.Windows.Forms;
namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            run_cmd();
        }

        private void run_cmd()
        {

            string fileName = @"C:\sample_script.py";

            Process p = new Process();
            p.StartInfo = new ProcessStartInfo(@"C:\Python27\python.exe", fileName)
            {
                RedirectStandardOutput = true,
                UseShellExecute = false,
                CreateNoWindow = true
            };
            p.Start();

            string output = p.StandardOutput.ReadToEnd();
            p.WaitForExit();

            Console.WriteLine(output);

            Console.ReadLine();

        }
    }
} 
```

### Python 示例脚本

```
打印“Python C# 测试”
```

您将在 C# 的控制台中看到***“Python C# 测试”***。

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2015-01-06T15:18:55.940

我遇到了同样的问题，道德大师的回答对我没有帮助。基于先前答案的以下内容有效：

```
private void run_cmd(string cmd, string args)
{
 ProcessStartInfo start = new ProcessStartInfo();
 start.FileName = cmd;//cmd is full path to python.exe
 start.Arguments = args;//args is path to .py file and any cmd line args
 start.UseShellExecute = false;
 start.RedirectStandardOutput = true;
 using(Process process = Process.Start(start))
 {
     using(StreamReader reader = process.StandardOutput)
     {
         string result = reader.ReadToEnd();
         Console.Write(result);
     }
 }
} 
```

例如，如果您想使用 cmd 行参数 100 执行 test.py，则 cmd 将是`@C:/Python26/python.exe`，而 args 将是`C://Python26//test.py 100`。请注意，.py 文件的路径没有 @ 符号。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2019-01-31T13:44:56.217

实际上，使用 IronPython 在 Csharp (VS) 和 Python 之间进行集成非常容易。它并没有那么复杂......正如 Chris Dunaway 在回答部分已经说过的那样，我开始为我自己的项目构建这种集成。N 很简单。只需按照这些步骤 N，您将获得结果。

第 1 步：打开 VS 并创建新的空 ConsoleApp 项目。

第 2 步：转到工具 --> NuGet 包管理器 --> 包管理器控制台。

第 3 步：之后在浏览器中打开此链接并复制 NuGet 命令。链接：[https ://www.nuget.org/packages/IronPython/2.7.9](https://www.nuget.org/packages/IronPython/2.7.9)

第 4 步：打开上述链接后，复制 PM>Install-Package IronPython -Version 2.7.9 命令并将其粘贴到 VS 的 NuGet 控制台中。它将安装支持包。

第 5 步：这是我用来运行存储在 Python.exe 目录中的 .py 文件的代码。

```
using IronPython.Hosting;//for DLHE
using Microsoft.Scripting.Hosting;//provides scripting abilities comparable to batch files
using System;
using System.Diagnostics;
using System.IO;
using System.Net;
using System.Net.Sockets;
class Hi
{
private static void Main(string []args)
{
Process process = new Process(); //to make a process call
ScriptEngine engine = Python.CreateEngine(); //For Engine to initiate the script
engine.ExecuteFile(@"C:\Users\daulmalik\AppData\Local\Programs\Python\Python37\p1.py");//Path of my .py file that I would like to see running in console after running my .cs file from VS.//process.StandardInput.Flush();
process.StandardInput.Close();//to close
process.WaitForExit();//to hold the process i.e. cmd screen as output
}
} 
```

第 6 步：保存并执行代码

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-01-04T07:06:52.147

设置 WorkingDirectory 或在 Argument 中指定 python 脚本的完整路径

```
ProcessStartInfo start = new ProcessStartInfo();
start.FileName = "C:\\Python27\\python.exe";
//start.WorkingDirectory = @"D:\script";
start.Arguments = string.Format("D:\\script\\test.py -a {0} -b {1} ", "some param", "some other param");
start.UseShellExecute = false;
start.RedirectStandardOutput = true;
using (Process process = Process.Start(start))
{
    using (StreamReader reader = process.StandardOutput)
    {
        string result = reader.ReadToEnd();
        Console.Write(result);
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-12-25T11:51:20.760

我遇到了问题`stdin/stout`- 当有效负载大小超过几千字节时，它会挂起。我不仅需要使用一些短参数调用 Python 函数，还需要使用可能很大的自定义有效负载。

前段时间，我写了一个虚拟actor库，允许通过Redis在不同的机器上分发任务。为了调用 Python 代码，我添加了侦听来自 Python 的消息、处理它们并将结果返回给 .NET 的功能。 [以下是它如何工作的简要说明](https://github.com/buybackoff/Ractor/wiki/Calling-custom-Python-code-from-.NET)。

它也可以在单台机器上工作，但需要一个 Redis 实例。Redis 增加了一些可靠性保证 - 有效负载被存储，直到工作确认完成。如果一个工作死了，有效负载将返回到一个作业队列，然后由另一个工作人员重新处理。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-12-31T22:59:41.567

很简单，你需要铁蟒，但我使用的一种方法是：

```
using IronPython.Hosting;

  var engine = Python.CreateEngine();

  engine.ExecuteFile("") //put the directory of the program in the quote marks 
```

# string - 在字符串中查找 & 符号 (bash)

> ID：11779149
> 
> 赞同：1
> 
> 时间：2012-08-02T14:05:35.807
> 
> 标签：string, bash, escaping

我有这个 string="dontcare noone &11111-&1111-&C00 noone"

我不得不将子字符串 &11111-&1111-&C00 从第一个 & 提取到第一个空白

我已经尝试了一些索引和一些 sed，但没有任何运气。

有人有一些很好的建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T14:09:38.693

您可以使用 bash 的字符串操作功能：

```
string="dontcare noone &11111-&1111-&C00 noone"

# remove everything up to the first "&"
string="&${string#*&}"

# remove everything from the end to the earliest blank
string="${string%% *}"

# ta da!
echo $string
&11111-&1111-&C00 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T14:08:43.137

```
$ echo "dontcare noone &11111-&1111-&C00 noone" | grep -o '&[^ ]*'
&11111-&1111-&C00 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T14:57:12.450

Bash 正则表达式也可以工作：

```
[[ $string =~ (&[[:alnum:]]+-?)+ ]]; echo ${BASH_REMATCH[0]} 
```

正则表达式匹配一个或多个组，其中一个组是一个＆符号，后跟一个或多个字母/数字和一个可选的最后连字符。如果匹配成功（即 [[ ]] 命令的存在状态为 0），则数组的第一个元素`BASH_REMATCH`包含`string`与正则表达式匹配的文本。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-02T14:15:33.210

使用 grep。

```
echo "dontcare noone &11111-&1111-&C00 noone" > somefile.txt

grep somefile.txt -e "&" | cut -d " " > someotherfile.txt 
```

grep 基本上会“cat”输出并搜索模式，用 -e 实例化，然后用 & 拉出字符串

> 会将输出推送到您已经拥有的文件中，或者只是在那里命名，然后它会创建它。

然后，您可以随时覆盖 somefile.txt，或附加字符串。

老实说，有很多方法可以做到这一点。grep 是搜索特定字符串时更好的选择之一，但即便如此，您已经可以在这个问题中看出有很多很多方法来 grep 事物。

管道，| ; and's、&& 和许多其他选项将为您提供将 grep 与其他命令结合使用的方法，以获得您正在搜索的确切输出。

我还看到你想要它到我刚刚添加到顶部代码的第一个“空白空间”。使用“cut”和“”分隔符，您只能提取空格后的数据。使用 cut 的字段设置，可以切换正在拉取的内容。

# c# - 实体框架：如何运行存储过程并返回值？

> ID：11779155
> 
> 赞同：3
> 
> 时间：2012-08-02T14:06:01.673
> 
> 标签：c#, linq, entity-framework, stored-procedures

是否可以使用实体框架执行存储过程，传入变量并返回数据以及返回值？

请不要留下任何关于实体框架的函数映射的代码。

我已经尝试过了，但我一直收到同样该死的错误：

> 过程或函数“usp_BusinessUser_Search”需要参数“@TotalRecords”，但未提供该参数。

这是我的代码：

```
SqlParameter Business = new SqlParameter("Business", Search.Term);
SqlParameter Location = new SqlParameter("Location", Search.Location);
SqlParameter PageNumber = new SqlParameter("PageNumber", Search.CurrentPage);
SqlParameter RecordsPerPage = new SqlParameter("RecordsPerPage", Search.RecordsPerPage);
SqlParameter TotalRecords = new SqlParameter("TotalRecords", 0);

SqlParameter parm = new SqlParameter()
{
    ParameterName = "@TotalRecords",
    Value = 0,
    SqlDbType = SqlDbType.Int,
    Direction = System.Data.ParameterDirection.Output
};

var List = db.ExecuteStoreQuery<ENT_SearchBusinessResult>("exec usp_BusinessUser_Search",Business,Location,PageNumber,RecordsPerPage,parm); 
```

有谁知道是什么原因造成的？

谢谢

编辑：

存储过程代码：

```
ALTER PROCEDURE [dbo].[usp_BusinessUser_Search] (   @Business nVarChar(255) = NULL
                                                    , @Location nVarChar(255) = NULL
                                                    , @PageNumber Int = 1
                                                    , @RecordsPerPage Int = 10
                                                    , @TotalRecords Int OUTPUT)
AS 
BEGIN
    SET NOCOUNT ON;

    DECLARE @SQL NVARCHAR(MAX)
            , @CacheTable SYSNAME
            , @TotalRows Int
            , @Category VarChar(255)
            , @BusinessCategory Int 
            , @TownCounty VarChar(50)
            , @PcodeTownCounty VarChar(50)

    INSERT  Voucher_SearchHistory (Keyword, Location)
    SELECT  NULLIF(@Business,''), NULLIF(@Location,'') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T14:25:08.370

这可能会有所帮助：

[http://blogs.msdn.com/b/diego/archive/2012/01/10/how-to-execute-stored-procedures-sqlquery-in-the-dbcontext-api.aspx](http://blogs.msdn.com/b/diego/archive/2012/01/10/how-to-execute-stored-procedures-sqlquery-in-the-dbcontext-api.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T14:10:05.390

您没有在 Execute 中传递 TotalRecords Sql 参数

```
var List = db.ExecuteStoreQuery<ENT_SearchBusinessResult>(
"exec usp_BusinessUser_Search",Business,
Location,PageNumber,RecordsPerPage,parm); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-18T06:45:47.317

您现在可以使用以下扩展方法，`ExecuteSqlCommandWithReturn`它会为您处理所有工作！

[https://gist.github.com/copernicus365/7037320](https://gist.github.com/copernicus365/7037320)

```
string sql = "EXEC sp_CoolProc @SomeParam, @AnotherParam";
int returnValue;
int val = db.ExecuteSqlCommandWithReturn(sql, out returnValue, someParam, anotherParam); 
```

解决方案的关键是 Jieyang Hu [here](http://jieyanghu.com/2013/03/01/retrieving-a-return-value-from-a-stored-procedure-using-the-entity-framework-dbcontext-database-class/)，它是这样的（尽管请注意，以下所有内容都由上述扩展方法完全处理）：就像您可以在 SQL 提示符中执行的操作一样，您只需设置执行的结果SQL 变量的过程（在这种情况下，它作为参数发送），如下所示：

```
EXEC @ReturnVal = sp_MyCoolProc; 
```

此代码在它找到`@ReturnVal =`的第一个片段`EXEC`（后跟空格）之后添加片段，并向s（如果没有，则`SqlParameter`创建s）添加 ReturnVal 参数，尽管调用者永远不会看到这些。`SqlParamter`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T14:10:20.803

参数名称不应包含`@`：

```
SqlParameter parm = new SqlParameter()
{
    ParameterName = "TotalRecords",
    Value = 0,
    SqlDbType = SqlDbType.Int,
    Direction = System.Data.ParameterDirection.Output
}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-12T23:48:08.917

如果您最近刚刚添加了该参数 ('@TotalRecords)，我猜您只需要更新 edmx 模型中的函数导入定义。

# linux - 使用shell脚本从文件中提取指定的行号

> ID：11779156
> 
> 赞同：1
> 
> 时间：2012-08-02T14:06:02.887
> 
> 标签：linux, shell

我有一个包含地址列表的文件，看起来像这样（ADDRESS_FILE）

```
0xf012134  
0xf932193  
.  
.  
0fx12923a 
```

我有另一个带有数字列表的文件，看起来像这样 (NUMBERS_FILE)

```
20  
40  
.  
.  
12 
```

我想从 ADDRESS_FILE 中剪切前 20 行并将其放入一个新文件中，
然后从 ADDRESS_FILE 中剪切接下来的 40 行，依此类推...

我知道下面给出的一系列 sed 命令可以完成这项工作

```
sed -n 1,20p ADDRESSS_FILE > temp_file_1
sed -n 20,60p ADDRESSS_FILE > temp_file_2
.  
.
sed -n somenumber,endofilep.  ADDRESS_FILE > temp_file_n 
```

但我想使用 shell 脚本自动执行此操作，这将更改每次 sed 执行时要剪切的行数。

这个怎么做 ？？？

另外一般来说，在这种情况下，哪些是 linux 中非常有用的文本处理命令？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T14:08:27.227

假设您的行号位于名为`lines`, sorted 等的文件中，请尝试：

```
#!/bin/sh

j=0
count=1
while read -r i; do
  sed -n $j,$i > filename.$count  # etc... details of sed/redirection elided
  j=$i
  count=$(($count+1))
done < lines 
```

笔记。上面没有假设每次迭代要分割的行数一致。

由于您还要求提供通用实用程序，请尝试[split](http://unixhelp.ed.ac.uk/CGI/man-cgi?split)。但是，这会在一致的行数上拆分，并且在这里可能用途有限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T14:11:09.283

```
size=$(wc -l ADDRESSS_FILE)
i=1
n=1
while [ $n -lt $size ]
do
  sed -n $n,$((n+19))p ADDRESSS_FILE > temp_file_$i
  i=$((i+1))
  n=$((n+20))
done 
```

要不就

```
split -l20 ADDRESSS_FILE temp_file_ 
```

（感谢布赖恩阿格纽的想法）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T15:21:15.827

An ugly solution which works with a single `sed` invocation, can probably be made less horrible.

This generates a tiny sed script to split the file

```
#!/bin/bash
sum=0
count=0
sed -n -f <(while read -r n ; do
    echo $((sum+1),$((sum += n)) "w temp_file_$((count++))" ;
done < NUMBERS_FILE) ADDRESS_FILE 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-02T14:51:08.217

这是直接从以下内容读取的替代方法`NUMBERS_FILE`：

```
n=0; i=1
while read; do 
  sed -n ${i},+$(( REPLY - 1 ))p ADDRESS_FILE > temp_file_$(( n++ ))
  (( i += REPLY ))
done < NUMBERS_FILE 
```

# vb.net - 提取 .zip 并放入 .jar 的最佳方法

> ID：11779157
> 
> 赞同：0
> 
> 时间：2012-08-02T14:06:06.650
> 
> 标签：vb.net, dotnetzip, sharpziplib

我一直在尝试找到最好的方法来做到这一点，我曾想过提取 .jar 的内容，然后将文件移动到目录中，然后将其作为 jar 放回。我不确定是最好的解决方案或我将如何做到这一点。我看过 DotNetZip 和 SharpZipLib 但不知道该使用哪一个。

如果有人能给我一个关于如何做到这一点的代码链接，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:47:06.873

对于[DotNetZip ，您可以在](http://dotnetzip.codeplex.com/)[此处](http://dotnetzip.codeplex.com/wikipage?title=VB-Examples&referringTitle=Examples)找到创建 zip 存档和将 zip 存档解压缩到目录中的非常简单的 VB.NET 示例。请记住使用扩展名*.jar*保存压缩文件。

对于[SharpZipLib ，](http://www.icsharpcode.net/opensource/sharpziplib/)[这里](http://wiki.sharpdevelop.net/SharpZipLib-Zip-Samples.ashx)有一些更全面的存档创建和提取示例。

如果这些库都无法提取完整的 JAR 存档，您还可以考虑访问更成熟的压缩软件，例如[7-zip](http://www.7-zip.org/)，或者使用它作为单独的进程启动它，`Process.Start`或者使用它的 COM 接口来访问相关方法`7za.dll`. _ 更多关于 COM 使用的信息可以在[这里](http://www.7-zip.org/faq.html)找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T01:49:05.333

我认为您正在使用 Minecraft 1.3.1 不是吗？如果是的话，zip 中包含一个名为 aux.class 的文件，不幸的是，它是 Windows 中的保留文件名。我一直在尝试自动化修改过程，同时自己操作 jar 文件，但收效甚微。我尚未探索的唯一选择是找到一种方法将 jar 文件的内容提取到临时位置，同时注意该异常。发生时，将文件重命名为临时名称，提取并继续。然后在重新创建 zip 文件时，为该文件在存档中指定原始名称。根据我自己的经验，SharZipLib 不能很好地完成您需要的工作，或者至少我不知道如何做。我建议改用 Ionic Zip (Dot Net Zip)，并在有问题的文件上尝试重命名路由。此外，我还发布了一个关于此的问题。你可以看到我走了多远[将 zip 条目提取到另一个 Zip 文件](https://stackoverflow.com/questions/11839502/extract-zip-entries-to-another-zip-file)

编辑 - 我测试了 .net zip 更多（可从[http://dotnetzip.codeplex.com/ 获得](http://dotnetzip.codeplex.com/)），这就是你需要的。我想它适用于任何包含保留文件名的 zip 文件。我知道它在 C# 中，但是嘿不能为你做所有的工作：P

```
 public static void CopyToZip(string inArchive, string outArchive, string tempPath)
    {
        ZipFile inZip = null;
        ZipFile outZip = null;

        try
        {
            inZip = new ZipFile(inArchive);
            outZip = new ZipFile(outArchive);
            List<string> tempNames = new List<string>();
            List<string> originalNames = new List<string>();
            int I = 0;
            foreach (ZipEntry entry in inZip)
            {
                if (!entry.IsDirectory)
                {
                    string tempName = Path.Combine(tempPath, "tmp.tmp");
                    string oldName = entry.FileName;
                    byte[] buffer = new byte[4026];
                    Stream inStream = null;
                    FileStream stream = null;
                    try
                    {
                        inStream = entry.OpenReader();
                        stream = new FileStream(tempName, FileMode.Create, FileAccess.ReadWrite);
                        int size = 0;
                        while ((size = inStream.Read(buffer, 0, buffer.Length)) > 0)
                        {
                            stream.Write(buffer, 0, size);
                        }
                        inStream.Close();
                        stream.Flush();
                        stream.Close();
                        inStream = new FileStream(tempName, FileMode.Open, FileAccess.Read);

                        outZip.AddEntry(oldName, inStream);
                        outZip.Save();
                    }
                    catch (Exception exe)
                    {
                        throw exe;
                    }
                    finally
                    {
                        try { inStream.Close(); }
                        catch (Exception ignore) { }
                        try { stream.Close(); }
                        catch (Exception ignore) { }
                    }
                }
            }

        }
        catch (Exception e)
        {
            throw e;
        }
    } 
```

# java - 在安卓开发者网站上使用蓝牙示例代码时出错

> ID：11779159
> 
> 赞同：0
> 
> 时间：2012-08-02T14:06:13.613
> 
> 标签：java, android, bluetooth

我正在努力为我的应用程序添加蓝牙功能，最终我想要使用的设备是耳机/听筒。我已经开始组装代码并使用它进行部分功能。当我获得通过服务器设置蓝牙连接的代码时，添加代码时出现错误。我尝试通过将鼠标悬停在错误上并自动更正来解决问题，但是每次我解决一个问题时都会出现不同的问题。这让我相信我错过了自动更正不知道的东西。我需要一些帮助来修复错误。对于第一次设置蓝牙编码的有用建议也将不胜感激。错误用 ||#| 括起来 xxx |||。错误1：无法解决。错误2：无法解析为变量。错误 3：未定义类型 AcceptSocket。

```
import java.io.IOException;
import android.bluetooth.BluetoothServerSocket;
import android.bluetooth.BluetoothSocket;

public class AcceptSocket extends Thread {

    private static final String MY_UUID = null;

    BluetoothServerSocket mmServerSocket;

    public void AcceptThread() {
        // Use a temporary object that is later asssigned to mmServerSocket,
        // because mmServerSocket is final
        BluetoothServerSocket tmp = null;
        try {
            // MY_UUID is the app's UUID string, also used by the client code
            tmp = ||1|mBluetoothAdapter|||.listenUsingRfcommWithServiceRecord(||2|NAME|||,
                    MY_UUID);
        } catch (IOException e) {
        }
        mmServerSocket = tmp;
    }

    public void run() {
        BluetoothSocket socket = null;
        // Keep listening until exception occurs or a socket is returned
        while (true) {
            try {
                socket = mmServerSocket.accept();
            } catch (IOException e) {
                break;
            }
            // If a connection was accepted
            if (socket != null) {
                // Do work to manage the connection (in a separate thread)
                ||3|manageConnectedSocket|||(socket);
                mmServerSocket.close();
                break;
            }
        }
    }

    /** Will cancel the listening socket, and cause the thread to finish */
    public void cancel() {
        try {
            mmServerSocket.close();
        } catch (IOException e) {
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:31:35.597

错误 1,2：类中的任何地方都没有调用常量`NAME`。

错误3：类中没有调用方法`manageConnectedSocket()`。

您不能只是从开发人员页面复制和粘贴某些内容并期望它能够正常工作。它引导您朝着正确的方向前进，您必须填写缺失的部分。

# hibernate - 如何在 Java 中使用 Document 对象初始化 SQLXML

> ID：11779162
> 
> 赞同：1
> 
> 时间：2012-08-02T14:06:23.780
> 
> 标签：hibernate, jpa, sqlxml

如何将`org.w3c.dom.Document`对象转换为，`java.sql.SQLXML`以便可以使用 Hibernate 将其持久化到数据库中？目前我可以通过将其转换为 String via 来使其工作`javax.xml.transform.Transformer`，但我认为这是效率最低的方法。

我尝试了以下方法，但没有任何内容保存到 DB 列中。

```
SQLXML sqlxml = session.connection().createSQLXML();
sqlxml.setResult(DOMResult.class).setNode(myDocument);
preparedStmt.setSQLXML(index, sqlxml); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T13:50:50.690

实际上，它没有按预期工作，只需使用`javax.xml.transform.sax.SAXResult`它来使其工作：

```
SQLXML sqlxml = stmt.getConnection().createSQLXML();
SAXResult sax = sqlxml.setResult(SAXResult.class);
Transformer transformer = TransformerFactory.newInstance().newTransformer();
transformer.transform(new DOMSource(document), sax);
stmt.setSQLXML(index, sqlxml); 
```

# sql - 从 Access 前端更新 SQL Server

> ID：11779166
> 
> 赞同：0
> 
> 时间：2012-08-02T14:06:38.770
> 
> 标签：sql, ms-access

这对我来说很新鲜。我有一个 Access 数据库，我要升级到 SQL 服务器，但要保留 Access 前端以使该应用程序远程可用。我已经使用 SSMA 将数据导入到 SQL 数据库中，看起来不错。但是，当向 Access 前端添加新记录时，不会更新 SQL 服务器。我错过了什么吗？我（想我）已经把桌子联系在一起了，但仍然不快乐。

任何帮助都会很棒。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:16:40.243

如果数据正在存储，但不是在 SQL Server 上，那么您几乎可以肯定没有正确链接表。在您的 Access 前端，您的起点应该是没有表（除非您出于某种原因故意为前端保留了一些表）。然后链接到后端表格（因为您说“将表格链接在一起”，我怀疑您的前端仍然有表格的副本）。在链接过程中，Access 会确认每个链接是否建立成功。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T14:34:29.777

听起来您还没有将数据从 MS Access 导入 SQL。

查看 SQL Server 迁移助手 (SSMA) 以了解如何执行此操作。 [http://www.microsoft.com/sqlserver/en/us/product-info/migration-tool.aspx#Access](http://www.microsoft.com/sqlserver/en/us/product-info/migration-tool.aspx#Access)。

首先，您需要将数据迁移到 SQL，然后将 SQL 中的数据链接到 MS-Access。一旦表被正确链接，它将在 SQL 中更新，因为它在 Access 中输入。要链接表，您需要首先设置 ODBC，然后在访问中选择外部数据 -> 导入 -> 更多 -> ODBC 数据库，然后选择“通过创建链接表链接到数据源”

查看此链接：[http](http://www.fontstuff.com/ebooks/free/fsLinkingToSQLServer.pdf) ://www.fontstuff.com/ebooks/free/fsLinkingToSQLServer.pdf以确保您做对了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-14T00:36:37.337

我以前遇到过这个问题。

为要在 Access 中编辑的每个表创建一个主键。将身份规范和身份增量设置为 1 或？（您可以在列属性中找到此设置）确保主键的数据类型是 int。

所有布尔值字段都应将约束设置为 0，并且没有空值。

# php - MySQL 将多行插入到表中，如果它们尚不存在

> ID：11779172
> 
> 赞同：0
> 
> 时间：2012-08-02T14:06:51.953
> 
> 标签：php, mysql, performance

如果我有这样的表：

```
+-------------+-------------+
| Field       | Type        |
+-------------+-------------+
| document    | varchar(35) |
| section     | int(11)     |
| selection   | int(11)     |
| status      | varchar(35) |
+-------------+-------------+ 
```

我在 PHP 中有一个数组。让我们称之为`$choices[]`。该列`selection`对应于选择数组的数组索引。如果我向数组中添加一个或多个元素，`$choices`那么我需要更新数据库。我将在一个循环中运行，`$document`并且`$section`也设置了。我不想假设我的编号中间没有丢失的行。`$choices`检查 中每个元素的（文档、部分、选择） 、创建任何不存在的元素并将其状态设置为“新”的最有效方法是什么？我是否必须将其作为一个循环执行，还是有办法在一个查询中执行此操作？

这是完全未经测试的，但如果我不寻求帮助，这基本上就是我的做法。我猜想有人可能有比我更好的解决方案。

```
foreach($documents as $document)
  {
    foreach($sections as $section)
      {
        $choices=$master_array[$document][$section];
        $ch_count=count($choices);
        $counter=0;
        while($counter < $ch_count-1)
          {
            $query="SELECT status FROM mytable WHERE document='$document' AND section='$section' AND selection='$counter'";
            $result = mysql_query($query);
            if(mysql_num_rows($result)==0)
              {
                $query="INSERT INTO mytable VALUES('$document','$section','$counter','new')";
                $result = mysql_query($query);
              }
            $counter++;
          }
      }
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:14:33.563

如果一切都将使用“新”进行更新，那么这可以很容易地实现。

检查以下代码：

```
<?
$setStr = "";
foreach($choices as $column)
{
    $setStr .= $column . "=" . "'new', ";
}

$sqlCommand = "UPDATE table SET ".substr($setStr,'',-2)." WHERE pick_a_row_here;";
echo $sqlCommand;
?> 
```

对于那些不存在的，尝试配置它，以便在未指定时它们的值默认为 false。当然，INSERT 语句可以很容易地改编自我上面的 UPDATE 语句。

让我知道你的想法。如果您有任何问题或意见，我会尽力回答。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T20:44:45.193

我最终使用一个循环将一个看起来像这样的大查询字符串连接在一起，除了更大：

```
INSERT IGNORE INTO mytable VALUES 
('doc1','1','0','New'),
('doc1','1','1','New'),
('doc1','1','2','New'),
('doc1','1','3','New'),
('doc1','2','0','New'),
('doc1','2','1','New'),
('doc1','2','2','New'),
('doc1','2','3','New'),
('doc1','3','0','New'),
('doc1','3','1','New'),
('doc1','3','2','New') 
```

它有效。我不知道它是否最好，但至少我不会向数据库发送数百个查询。

# c - DAC信号发生器stm32

> ID：11779173
> 
> 赞同：1
> 
> 时间：2012-08-02T14:06:57.570
> 
> 标签：c, microcontroller, stm32

我正在编程 stm32f2xx 的 DAC 外设。我有一个字节数组（声音），我想生成采样率 = 8K 的信号。

现在我的问题是：如何指定采样率？

注意：我google了很多。我只使用 DMA 生成三角波和正弦波。我不想使用 DMA。

在此先感谢您的帮助...问候，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T16:39:08.960

在不使用 DMA 的情况下从 DAC 中播放波形是不切实际的。您使用样本设置 DMA，并设置 DAC 以使用定时器作为触发器。然后你设置你的定时器以你想要的采样率触发。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T18:52:35.207

我同意 TJD 的观点，一般来说，如果没有 DMA，这样做是不切实际的，但这并非不可能，尤其是在低采样率的情况下。

可以使用设置为每 1/8000 秒触发一次的计时器作为固定时基。从那里，中断例程需要将下一个样本加载到 DAC 中。可以通过改变定时器的时基来改变采样率。

与编写代码以将正确的样本移入缓冲区相比，编写代码来配置 DMA 控制器的工作类似。但是，DMA 方法会更可靠，采样率的抖动可能更小，并且可以释放内核来执行可能需要的其他代码。事实上，通过 TIM/DMA/DAC 设置，您可能能够停止内核或进入保持外设时钟运行的睡眠模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-04T23:06:27.573

是的，我也同意 TJD。
使用 DMA 是有效的，并且可以为其他任务释放 CPU [good]。
在软件中管理时间（带有繁忙循环的核心）[坏] 不会产生好的结果。（所以，使用计时器来计时[好]）。
现在要进行复制，您必须在特定时间间隔（从繁忙循环或定时器超时）到 DAC 寄存器后专门使用 CPU 进行复制。[坏]

最后我建议，连接 DMA 和定时器，超时时，DMA 会将数据复制到 DAC 寄存器 [good]。这个解决方案看起来很难，但实际上在设置时更容易使用。
[注：写在某人试图理解/开始这样的事情的观点中]

# c# - 从第一个 WPF 应用程序中启动第二个实例

> ID：11779174
> 
> 赞同：5
> 
> 时间：2012-08-02T14:07:04.333
> 
> 标签：c#, wpf, .net-4.0, clickonce

如果我们的独立应用程序只是一个下载的 .exe 文件（即使用 Windows 安装程序部署），那么让正在运行的实例使用`System.Diagnostics.Process.Start`. 不幸的是，我们的 WPF 应用程序是通过[ClickOnce](http://msdn.microsoft.com/en-us/library/aa969776.aspx#Deployment_Technologies)部署的，所以据我所知，它没有本地文件系统路径。

如何启动正在运行的 ClickOnce 应用程序的第二个实例？（如果可能的话，传递命令行参数。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T14:13:33.653

你错了：在你的本地应用程序数据文件夹下有一个本地路径。或者，您可以使用 Uri 重新启动应用程序。简而言之，您应该能够像处理常规应用程序一样计算出应用程序的启动路径（可能使用`Environment.CommandLine`or ），并使用它。`System.Diagnostics.Process.GetCurrentProcess().MainModule.FileName`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T14:12:51.437

好吧，当您通过 clickonce 部署它时，会有一个本地文件系统路径。尝试

```
yourWindow.GetType().Assembly.Location 
```

-> 这将为您提供程序集的完整路径。

# html - Html Select Element - 如何将左上角的选项元素与左上角的选择元素重叠

> ID：11779176
> 
> 赞同：0
> 
> 时间：2012-08-02T14:07:10.470
> 
> 标签：html, asp.net-mvc

我想在 html 中创建一个 Html 列表框，以便选项元素的左上角坐标和选择元素的左上角之间没有空格/间隙。默认情况下，它们之间大约有 3px 的间隙（如辅助功能资源管理器所示）

![在此处输入图像描述](../Images/12fbee8a00d47d8754e6e2731d7a4893.png)

*关于上图，我想去掉选项苹果*边缘和选择边框之间的空白。目前选项*apple*的偏移量为 3px,3px wrt 选择元素，我想将偏移量设为 0px,0px 。因此，如果 select 的屏幕位置是 10,10 ，则选项的屏幕位置也将是 10,10。

我已经看到了这样的可能，但无法获得源代码来了解它是如何完成的。（但它是使用 asp.net 完成的）

谢谢你的时间。

编辑：以下是在 Acc Explorer 中将 martin 设置为 0px 后的样子： ![在此处输入图像描述](../Images/bbfe757e000677d65ec49c0e79860cbe.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:18:26.273

给它一个负边距：http: [//jsfiddle.net/zTatx/14/](http://jsfiddle.net/zTatx/14/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T14:23:23.550

实际上一个简单的`padding: 0;`应该删除所有的空白：

[http://jsfiddle.net/TAxuD/1/](http://jsfiddle.net/TAxuD/1/)

# extjs - WARN 当前工作目录不是可识别的 Sencha SDK 或应用程序文件夹

> ID：11779192
> 
> 赞同：8
> 
> 时间：2012-08-02T14:08:23.140
> 
> 标签：extjs, sencha-touch, sencha-touch-2

我正在使用 mac，我刚刚下载了 SDK 并破坏了应用程序。安装成功，但是在终端使用 sencha 时

```
$ cd /Applications/SenchaSDKTools-2.0.0-beta3 
$ sencha 
```

我收到此错误

```
[WARN] The current working directory (/Applications/SenchaSDKTools-2.0.0-beta3) is not a recognized Sencha SDK or application folder. Running in backwards compatible mode.

Sencha Command v2.0.0 Beta 3
Copyright (c) 2012 Sencha Inc. 
```

知道如何解决吗？我正在使用 MAC 10.7.4

附言

我正在写一个额外的命令，我可以看到以下内容 -

```
$ echo $PATH
/Applications/SenchaSDKTools-2.0.0-beta3:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T14:27:50.720

不确定您是否遇到特定于 Mac 的问题，但是在 Windows 上，您必须访问`cd`sencha 应用程序目录。下载 sencha touch 后，`cd`到该`sencha-touch-2.0.1.1`文件夹​​，您应该可以在`sencha`那里运行命令。

例如，尝试运行

`sencha generate app myApp myAppFolder`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T10:26:07.653

请参考我在这里写的答案[Generate a sencha touch app](https://stackoverflow.com/questions/13497247/generate-a-sencha-touch-app/15382445#15382445)

最重要的是，您需要设置 SenchaCmd 目录的路径。

为了那个原因

打开 /home/your_user_name/.bash_profile 文件

并在文件末尾键入以下命令

导出 PATH=${PATH}:/path/to/Sencha/Cmd/3.0.2.288

然后从终端输入**exec bash 。**

这应该可以解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T14:41:07.253

我能够解决问题，在 sencha-touch-2.0.1.1 文件夹上执行 cd 而不是在 SDK 文件夹中，就像我一开始所做的那样，感谢 Edgar 为我指明了正确的方向

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-27T16:18:59.953

我解决了安装几个错误 sencha 更改以下内容：两个非常重要的文件：

/Users/sencha/.bashrc /Users/sencha/.bash_profile

您好朋友，我解决了安装中的几个错误 sencha 更改以下内容： 两个非常重要的文件：

我的安装文件夹：/sancha 默认安装位置：/Applications/SenchaSDKTools-2.0.0-Beta/

看一看：

纳米 /Users/sencha/.bash_profile

```
export PATH=/Users/sencha/bin/Sencha/Cmd/4.0.4.84:$PATH

export SENCHA_CMD_3_0_0="/Users/sencha/bin/Sencha/Cmd/4.0.4.84"

export PATH=/Sencha/SenchaSDKTools-2.0.0-beta3:$PATH

export SENCHA_SDK_TOOLS_2_0_0_BETA3="/Sencha/SenchaSDKTools-2.0.0-beta3"
#
export PATH=/Applications/SenchaSDKTools-2.0.0-beta3:$PATH

export SENCHA_SDK_TOOLS_2_0_0_BETA3="/Applications/SenchaSDKTools-2.0.0-beta3"

SENCHA_SDK_TOOLS_2_0_0_BETA3=/Applications/SenchaSDKTools-2.0.0-beta3/
#
export PATH="$PATH:/usr/local/bin"
export PATH=/Users/admin/bin/Sencha/Cmd/4.0.4.84:$PATH
export SENCHA_CMD_4_0_0="/Users/admin/bin/Sencha/Cmd/4.0.4.84"
#
#export PATH=/Applications/SenchaSDKTools-2.0.0-Beta/:$PATH
#export PATH=/Applications/SenchaSDKTools-2.0.0-Beta/command:$PATH
#export PATH=/Applications/SenchaSDKTools-2.0.0-Beta/jsbuilder:$PATH
#export PATH=/Applications/SenchaSDKTools-2.0.0-Beta/appbuilder:$PATH
#export PATH=/Applications/SenchaSDKTools-2.0.0-Beta:$PATH
#export PATH=/Applications/SenchaSDKTools-2.0.0-Beta/command:$PATH
#export PATH=/Applications/SenchaSDKTools-2.0.0-Beta/jsbuilder:$PATH
#export PATH=/Applications/SenchaSDKTools-2.0.0-Beta/appbuilder:$PATH

#---------------------------------------------------------------------------------#
nano /Users/sencha/.bashrc 

export PATH=/Users/sencha/bin/Sencha/Cmd/4.0.4.84:$PATH

export SENCHA_CMD_3_0_0="/Users/sencha/bin/Sencha/Cmd/4.0.4.84"

export PATH=/Sencha/SenchaSDKTools-2.0.0-beta3:$PATH
#
export SENCHA_SDK_TOOLS_2_0_0_BETA3="/Sencha/SenchaSDKTools-2.0.0-beta3"

export PATH=/Applications/SenchaSDKTools-2.0.0-beta3:$PATH

export SENCHA_SDK_TOOLS_2_0_0_BETA3="/Applications/SenchaSDKTools-2.0.0-beta3"

SENCHA_SDK_TOOLS_2_0_0_BETA3=/Applications/SenchaSDKTools-2.0.0-beta3/
#
export PATH="$PATH:/usr/local/bin"
export PATH=/Users/admin/bin/Sencha/Cmd/4.0.4.84:$PATH
export SENCHA_CMD_4_0_0="/Users/admin/bin/Sencha/Cmd/4.0.4.84"
#
#export PATH=/Applications/SenchaSDKTools-2.0.0-Beta/:$PATH
#export PATH=/Applications/SenchaSDKTools-2.0.0-Beta/command:$PATH
#export PATH=/Applications/SenchaSDKTools-2.0.0-Beta/jsbuilder:$PATH
#export PATH=/Applications/SenchaSDKTools-2.0.0-Beta/appbuilder:$PATH
#export PATH=/Applications/SenchaSDKTools-2.0.0-Beta:$PATH
#export PATH=/Applications/SenchaSDKTools-2.0.0-Beta/command:$PATH
#export PATH=/Applications/SenchaSDKTools-2.0.0-Beta/jsbuilder:$PATH
#export PATH=/Applications/SenchaSDKTools-2.0.0-Beta/appbuilder:$PATH 
```

# amazon-ec2 - Amazon EC2 - 连接到公共 DNS 的问题

> ID：11779197
> 
> 赞同：0
> 
> 时间：2012-08-02T14:08:33.897
> 
> 标签：amazon-ec2, connection, amazon

我面临一些问题。我最初为我的微型实例 i-38cbc940 分配了一个弹性 IP，但由于某种原因，在我这样做之后，我上传的网页无法正常运行（图像无法正确加载等）。

我在弹性 IP 分配之前对此进行了测试，并且没有发生此类问题。所以我解离了弹性IP地址并释放了它。然后，我重新启动我的实例。

问题是，现在我无法使用列出的公共 DNS 地址 (ec2-23-23-18-52.compute-1.amazonaws.com) 或其任何子目录在浏览器中查看我的网站。

我知道的事情：

1.  我的安全设置没有改变 - 我仍然拥有与实例相同的安全组。
2.  httpd.conf 文件仍将“/var/www/html”显示为 DocumentRoot。
3.  每次我导航到列出的公共 DNS 地址时……它都会显示“无法连接”，但如果我 ping 它，它就可以工作。
4.  如果我通过 SSH 连接到 var/www/html 目录中的实例，一切都还在，包括之前可以查看的 index.html 文件。另外，我可以通过 PuTTY 进入实例。

此外，不确定它是否重要，但这是安装了 Wordpress CMS 的 AmazonEC2-AMI/Apache/MySQL 服务器。

关于这里可能发生什么的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T14:35:09.577

您需要检查 apache conf 以获取您的实例 amazon dns 的任何硬编码 dns 条目，并检查您的代码是否有任何对实例的 amazon dns 的引用。

# cloud - 云计算与电子邮件存储

> ID：11779201
> 
> 赞同：1
> 
> 时间：2012-08-02T14:08:48.163
> 
> 标签：cloud

我完全是云计算的菜鸟。我读到云计算意味着将数据存储在远程服务器上，而不是存储在我们的硬盘上。然后在需要时访问这些数据。我还可以在 yahoo 或 gmail 中存储高达 10GB 的数据。那么这些电子邮件设施是否也被视为云的一部分？如果不是，那有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T15:10:43.290

是的，这些服务确实算作云的一部分。它们属于称为“软件即服务 (SaaS)”的云服务系列，因为您可以从云中获得完整的软件解决方案（在您的情况下 - 电子邮件）（这是 Internet 上某处远程计算机的“云”） .

云服务有很多种。例如：

*   基础设施即服务：您可以获得纯计算能力 - CPU 周期、内存......
*   平台即服务：您可以获得在其上部署您自己的应用程序的应用程序平台，例如 JavaEE 平台。
*   软件即服务：您将获得完整的软件解决方案，例如电子邮件。

以上所有的共同属性是：

*   它们是由某些第三方通过 Internet 作为服务提供给您的；
*   可扩展性，这意味着无论大小，它都能满足您的需求；

[Wikipedia](http://en.wikipedia.org/wiki/Cloud_computing)中很好地总结了有关此主题的更多信息。

# php - 动态文本字段值到 PHP 数组中

> ID：11779204
> 
> 赞同：0
> 
> 时间：2012-08-02T14:09:03.193
> 
> 标签：php, arrays, dynamic, field

我有一个动态的网络表单，在用户告诉它他想要多少后创建文本，我想做的是将这些文本字段的信息放入下一个表单，我读过一个
[几乎是什么的问题我想做](https://stackoverflow.com/questions/1784015/javascript-php-dynamic-text-fields-jquery)；
但到目前为止我还没有运气。

```
for ($i = 1; $i <= $quantity; $i++) {
echo "<input type='text' class='text' name='classEmpleado[]' id='empleado$i' />";} 
```

当我尝试检索它们时，我使用它；

```
$empleado[] = $_POST['classEmpleado[]'];
$i = 0;    
for ($i = 1; $i <= $quantity; $i++) {
echo "$empleado[$i]<BR><BR>";
} 
```

但是我收到错误 Undefined index: classEmpleado[] 我做错了什么？

回答！对于任何寻找相同事物的人，请查看 Sherbrow 的响应，您只需将循环编辑为此

```
$empleado[] = $_POST['classEmpleado[]'];
$i = 0;    
for ($i = 0; $i < $quantity; $i++) {
echo "$empleado[$i]<BR><BR>";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:10:42.737

尝试`$empleado[] = $_POST['classEmpleado'];`

当您将`name[]`字段名放在末尾时，它将作为数组传递给 PHP，`$_POST`其中的键`name`如下：`$_POST['name'] = array(1,2,3,4);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T14:17:51.737

如果`$empleado`之前没有声明或只是空的，你正在寻找那个

```
$empleado = $_POST['classEmpleado'] 
```

但是如果`$empleado`是一个数组，并且包含数据，您可能希望将所有内容合并到一个数组中

```
$empleado = array_merge($empleado, $_POST['classEmpleado']); 
```

无论您选择哪种方式，都应该检查以确保它`$_POST['classEmpleado']`已定义并且是一个数组。就像是 ：

```
if(isset($_POST['classEmpleado']) && is_array($_POST['classEmpleado'])) {
    /* ... */
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-02T14:22:49.623

这里的说法是错误的（`$empleado[] = $_POST['classEmpleado[]']`）

如果您想访问 $_POST 名为 classEmpleado[] 的输入字段，您必须这样做：

```
for($i=0; $i<count($_POST['classEmpleado']); $i++)
{
    echo $_POST['classEmpleado'][$i] . '<br /><br />';
} 
```

# c# - 在 C# 中编写 ActiveX 控件并将其添加到另一个 C# 项目

> ID：11779207
> 
> 赞同：1
> 
> 时间：2012-08-02T14:09:16.217
> 
> 标签：c#, controls, activex, typelib

我需要创建一个 ActiveX 控件并在另一个 C# 或旧 MFC 项目中使用它。我按照我在这里和以下阅读的说明进行操作： http: [//haseebakhtar.wordpress.com/2011/05/31/creating-an-activex-control-in-net-using-c/](http://haseebakhtar.wordpress.com/2011/05/31/creating-an-activex-control-in-net-using-c/) 和 [http://www.dreamincode .net/forums/topic/38890-activex-with-c%23/](http://www.dreamincode.net/forums/topic/38890-activex-with-c%23/) 并创建了一个 ActiveX。首先，我使用了 VS6 ActiveX 测试器，只有在注册表中添加“Control”键后，它才会出现在可用 ActiveX 控件列表中，并且我能够使用它。现在我有2个问题。1\. 当我使用 regasm 注册它时，我收到以下消息：

> Microsoft (R) .NET Framework 程序集注册实用程序 4.0.30319.1 版权所有 (C) Microsoft Corporation 1998-2004。版权所有。
> 
> RegAsm：警告 RA0000：向 /codebase 注册未签名的程序集可能会使用您的程序集干扰可能安装在同一台计算机上的其他应用程序。/codebase 开关旨在仅用于已签名的程序集。请给您的程序集起一个强名称并重新注册。类型注册成功程序集导出到'C:\Projects\TestOCX\TestOCX\bin\Release\TestOC X.tlb'，类型库注册成功

当我不使用 /codebase 选项注册时，我没有收到任何错误，但我不确定为什么会发生这种情况。

其次，当我尝试将其添加到新的 C# 项目时，我收到一条消息，提示自我注册失败。任何人都知道为什么会发生这种情况？

# matlab - 使用 PARFOR 和 FOR 的不同结果

> ID：11779216
> 
> 赞同：4
> 
> 时间：2012-08-02T14:09:43.837
> 
> 标签：matlab, parallel-processing

很抱歉，目前我无法将我的代码简化为一个最小的示例。这是一大堆图像处理代码。

我有一个循环遍历图像（变量 stphogs 中的描述符），并为每个图像运行一个检测。

```
function hogpatches = extractDetectionsFromImages(stphogs, poselet)
    hogpatches = cell(1,length(stphogs));

    parfor i = 1:length(stphogs)
        tmp = extractDetectionsFromImage(stphogs(i), poselet); %e.g. 1x6 struct

        if ~isempty(tmp)
            hogpatches{i} = tmp;
        end
    end

    hogpatches = cell2mat(hogpatches);
end 
```

所以这是主循环。但是函数调用`extractDetectionsFromImage`非常深入。

**我的问题：**用普通的 for 循环运行它会得到正确的结果。如上所述使用 PARFOR 时，`hogpatches`仅包含 5 个而不是 18 个结构。

我可以从哪里开始寻找错误？我有一个全局变量，程序确实改变了。我已经删除了。仍然有一个全局变量“配置”，但只能读取。还有其他提示吗？可能是什么问题呢？

***编辑***：即使我只运行一次迭代（stphogs 的大小为 1），parfor 也会失败。它与零件没有任何关系`isempty`。如果我删除它，问题仍然存在。

***EDIT2***：好的，我把它煮成了一个最小的工作示例。它确实是由一个全局变量引起的：

```
function parGlobalTest()
    global testVar;

    testVar = 123;

    parfor i = 1:1
        fprintf('A Value: %d\n', testVar);
        testFunction();
    end
end

function testFunction()
    global testVar;
    fprintf('B Value: %d\n', testVar);
end 
```

在这个例子中。A 的输出为 123，B 的输出为空（未定义）。这是为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:47:12.030

好的，这是我的解决方案：

```
function syncTestVar()
    global testVar;
    save('syncvar.mat', 'testVar');
    pctRunOnAll global testVar;
    pctRunOnAll load('syncvar.mat');
end 
```

如果有人有更好的方法，请告诉我......这个虽然有效

顺便说一句：需要保存/加载，因为在我的真实程序中，`testVar`是一个复杂的结构

# java - 忽略返回对象时的编译时警告

> ID：11779224
> 
> 赞同：2
> 
> 时间：2012-08-02T14:10:02.597
> 
> 标签：java, api, compiler-errors, compiler-warnings

我知道 Java 通常允许不关心方法中返回的对象，但在这种情况下，我想确保 Api 的用户将返回的实例添加到列表中，否则它将立即执行。

纯Java：

```
Runnable someTask() {
    ...
}

someTask(); // ok 
```

应该

```
Runnable someTask() {
    ...
}

addToExecutionList(someTask()); // ok
someTask(); // gives warning 
```

有没有办法通过编译时警告来防止这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T14:12:18.723

> 有没有办法通过编译时警告来防止这种情况？

不，没有办法强制调用者使用方法的返回值。如果对您有帮助的话，像[FindBugs](http://findbugs.sourceforge.net/)这样的东西可能会选择将其报告为不可靠的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T14:13:32.737

编译时警告仅针对最常见的错误。忽略返回值是正常的做法。

您可以使用的是静态分析工具，如查找错误、checkstyle 或 IntelliJ 的静态分析。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-02T14:27:19.463

您可以添加一个参数`someTask`并让其`someTask`自行添加到该列表中：

```
void someTask(List<Runnable> executionList) {
  // ...
  executionList.add(task);
} 
```

但是，当然，这不会阻止将无意义的列表传递给该方法。

如果您想确保*始终*将可运行对象添加到一个非常特殊的列表中，那么您应该更改 api，以便用户无法调用`someTask`但会看到某种创建任务的“工厂”*和*将其添加到该列表中。这应该是内部的，这样没有人可以从该列表中删除新创建的任务（等等；））

# templates - 在 Magento 的多个地方显示一个版本的图像？

> ID：11779228
> 
> 赞同：0
> 
> 时间：2012-08-02T14:10:19.800
> 
> 标签：templates, magento

如果你去[这个页面](http://www.princessly.com/graceful-ball-gown-strapless-sweetheart-drop-waist-tiered-chapel-wedding-dress.html)，你会注意到我在两个不同的地方显示相同版本的图像：一个用于云缩放，一个在页面中间没有缩放。

我目前正在使用 2 行不同的代码来生成图像，然后返回它的 URL，这基本上是做同样的事情：

```
<?php /* for cloud zoom */ echo $this->helper('catalog/image')->init($_product, 'image')->constrainOnly(TRUE)->keepAspectRatio(TRUE)->keepFrame(FALSE)->setWatermarkImageOpacity(0)->resize(600, null);?>

<?php /* for middle page */ echo $this->helper('catalog/image')->init($_product, 'image')->constrainOnly(TRUE)->keepAspectRatio(TRUE)->keepFrame(FALSE)->setWatermarkImageOpacity(0)->resize(600, null);?> 
```

这无疑是一个蹩脚的解决方案，因为：1）它占用更多的磁盘存储空间，因为有 2 个不同的图像文件本质上是相同的图像；2）它显着减慢了页面加载速度，因为用户必须下载两个图像。

所以我的问题是如何在 Magento 的多个地方使用相同版本的图像？有没有办法让 resize() 方法返回图像的 URL？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T15:37:28.350

`Mage_Catalog_Helper_Image`有一个`__toString()`方法可以做到这一点：

```
$imageUrl = $this->helper('catalog/image')->init($_product, 'image')->__toString(); 
```

高温高压

# google-apps-script - 将多个附件添加到 gmail

> ID：11779231
> 
> 赞同：0
> 
> 时间：2012-08-02T14:10:23.580
> 
> 标签：google-apps-script, attachment, google-sheets

我正在使用 Google 电子表格并希望向我们的客户发送多个附件，无论我如何格式化代码，它要么被拒绝，要么只发送一个附件，有人可以帮忙吗？

```
function emailcustomer() {
var ss = SpreadsheetApp.getActiveSpreadsheet();
var sheet = ss.getSheetByName("email to customer")  
var subject = sheet.getRange("B2").getValue()
var content = sheet.getRange("A12").getValue()
var doc1 = sheet.getRange("d28").getValue()
var doc2 = sheet.getRange("d29").getValue()   
var file1 = DocsList.getFileById(doc1);  
var file2 = DocsList.getFileById(doc2); 
  GmailApp.sendEmail("alex.shaw94@gmail.com",subject,content,{attachments:file1 file2});
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T14:17:00.537

你可以尝试这样的事情：

```
var myFiles = [{fileName:"doc1", content:file1}, {fileName:"doc2", content:file2}]
GmailApp.sendEmail("alex.shaw94@gmail.com", subject,content, {attachments: myFiles}); 
```

此外，也许这可以帮助：[https ://developers.google.com/apps-script/class_gmailapp#sendEmail](https://developers.google.com/apps-script/class_gmailapp#sendEmail)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-04T12:46:32.417

您需要指定附件的 mimetype，然后将其添加到您的数组中：

```
var attachments = [];
attachments.push(file.getAs(MimeType.PDF));
GmailApp.sendEmail(email, subject, body,{
     attachments: attachments,
    }); 
```

# php - 选择数据 Ajax

> ID：11779236
> 
> 赞同：-1
> 
> 时间：2012-08-02T14:10:47.153
> 
> 标签：php, javascript, jquery, ajax

我想从我的 insert.php 中选择 streamitem_id 并将其添加到我现有的帖子 div 中。我需要发布的帖子的 ID，以便可以将其添加到我的 div 中，因此稍后当我添加删除按钮时，它将删除帖子和包含它的 div。希望我说得有道理，我可以用我正在努力学习的东西来做到这一点，但它是一门困难的语言，就像刚开始时的任何语言一样。

AJAX

```
 <script>
    $(document).ready(function(){
        $("form#myform").submit(function(event) {
            event.preventDefault();
            var content = $("#toid").val();
            var newmsg = $("#newmsg").val();

            $.ajax({
                type: "POST",
                url: "insert.php",
                data: "toid=" + content + "&newmsg=" + newmsg,
                success: function(){
                    $("#homestatusid").prepend("<div id='divider-"+WHERE MY STREAMITEM_ID NEEDS TO BE+"'><div class='userinfo'>"+newmsg+"</div></div>");
                }
            });
        });
    });
    </script> 
```

插入.PHP

```
$check = "SELECT streamitem_id FROM streamdata WHERE streamitem_id=$user1_id";
        $check1     =    mysql_query($check);
        $check2     =    mysql_num_rows($check1);
    echo $check2; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T14:15:50.503

在你的 javascript 中应该是

```
 $.ajax({
            type: "POST",
            url: "insert.php",
            data: {toid:content, newmsg: newmsg}, # pay attention to this line
            success: function(data){
                $("#homestatusid").prepend("<div id='divider-"+data+"'><div class='userinfo'>"+newmsg+"</div></div>");
            }
        }); 
```

PHP

```
$toid = isset($_POST['toid']) ? $_POST['toid'] : null;
$newmsg = isset($_POST['newmsg']) ? $_POST['newmsg'] : null; 
```

并且不要使用`mysql_*`，因为它已弃用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T14:15:47.750

```
success: function(response){
    $("#homestatusid").prepend("<div id='divider-"+response+"'><div class='userinfo'>"+newmsg+"</div></div>");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T14:16:03.390

传递给`success`回调的第一个参数是来自 AJAX 调用的 responseText。将您的 jQuery 代码修改为：

```
success: function(responseText){
    $("#homestatusid").prepend("<div id='divider-"+responseText+"'><div class='userinfo'>"+newmsg+"</div></div>");
    // I'm assuming that insert.php returns just the ID you're interested in
} 
```

# iphone - 如何为此代码实现计时器？

> ID：11779240
> 
> 赞同：0
> 
> 时间：2012-08-02T14:10:58.883
> 
> 标签：iphone, objective-c, ios, timer, accelerometer

```
-(void) play
{
    CMMotionManager *motionManager = [[CMMotionManager alloc] init];
    [motionManager startDeviceMotionUpdates];

    BOOL timeReached = NO;

    while(!self.stopButtonPressed)
    {
        if(motionManager.deviceMotion.userAcceleration.y >= ... && motionManager.deviceMotion.userAcceleration.y <= ...)
        {
             //start timer
        }
        while(motionManager.deviceMotion.userAcceleration.y >= ... && motionManager.deviceMotion.userAcceleration.y <= ... && !timeReached)
        {
            if(//check timer & if timer is >=300ms)
            {
              timeReached = YES;
              NSLog(@"acceleration on Y-axis stayed between ... & .. for at least 300ms");
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T14:26:46.663

似乎您以错误的方式进行此操作；而不是运行时钟，您应该设置`accelerometerUpdateInterval`为您正在寻找并`startAccelerometerUpdatesToQueue:withHandler:`用于接收数据的任何内容。

从[苹果文档](http://developer.apple.com/library/ios/#documentation/CoreMotion/Reference/CMMotionManager_Class/Reference/Reference.html)：

> 以指定的间隔处理运动更新
> 
> 为了在特定的时间间隔接收运动数据，应用程序调用一个“start”方法，该方法采用一个操作队列（NSOperationQueue 的实例）和一个特定类型的块处理程序来处理这些更新。运动数据被传递到块处理程序中。更新频率由“间隔”属性的值决定。
> 
> 加速度计。设置 accelerometerUpdateInterval 属性以指定更新间隔。调用 startAccelerometerUpdatesToQueue:withHandler: 方法，传入一个 CMAccelerometerHandler 类型的块。加速度计数据作为 CMAccelerometerData 对象传递到块中。

设置完所有内容后，让它运行。当您收到来自块的完成通知时，请查看您收到的数据。

# android - 将普通布局转换为xlarge布局android

> ID：11779241
> 
> 赞同：-1
> 
> 时间：2012-08-02T14:11:05.213
> 
> 标签：android, android-layout

我正在使用以下 xml 布局以正常布局进行渲染。但是当我尝试在像华硕变压器（蜂窝或冰淇淋三明治）这样的超大屏幕上运行时，图像按钮的图像从 drawable-mdpi 资源文件夹中获取图像。甚至尝试更改布局和大屏幕按钮的更大图像，但呈现相同的 mdpi 图像。

任何人都可以给我一些关于如何解决这个问题的指示。谢谢。

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="match_parent"
android:background="@drawable/white"
android:fillViewport="true"
android:tileMode="repeat" >

<RelativeLayout
android:layout_width="fill_parent"
android:layout_height="fill_parent">
     <LinearLayout
        android:layout_alignParentTop="true"
        android:layout_width="fill_parent" 
        android:layout_height="30dip"
        android:background="#000000"
        android:tileMode="repeat"
        android:weightSum="3">

     <LinearLayout 
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" 
        android:layout_weight="1">
    <TextView 
        android:text=""
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:gravity="center"
        android:textSize="18sp"
        android:textColor="#000000"/>
    </LinearLayout>
     <LinearLayout 
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" 
        android:layout_weight="1">
          <ImageView 
            android:src="@drawable/logo1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"/>
    </LinearLayout>
    <LinearLayout 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" 
    android:layout_weight="1">
        <ImageButton 
            android:id="@+id/buttonMainBackClosetheApp"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:background="#000000"
            android:tileMode="repeat"/>
     </LinearLayout>

         </LinearLayout>   

<LinearLayout 
android:layout_marginTop="30dip"
android:layout_marginBottom="30dip"
android:layout_width="fill_parent" 
android:layout_height="fill_parent"
android:weightSum="3" 
android:orientation="vertical">

<LinearLayout 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" 
    android:layout_weight="1"
    android:weightSum="3" 
    android:orientation="horizontal"
    android:layout_marginTop="15px">

    <LinearLayout 
        android:id="@+id/linearLayoutBtnFindUs"
        android:layout_width="fill_parent"
        android:layout_weight="1" 
        android:orientation="vertical"
        android:gravity="center" 
        android:layout_height="fill_parent">

        <ImageButton 
            android:id="@+id/btnFindUs"
            android:src="@drawable/findus_icon"
            android:layout_width="fill_parent" 
            android:layout_height="wrap_content"
            android:background="@drawable/white" />
        <TextView 
            android:text="Find Us" 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textColor="#000000" />
    </LinearLayout>

    <LinearLayout 
        android:layout_width="fill_parent"
        android:layout_weight="1" 
        android:orientation="vertical"
        android:gravity="center" 
        android:layout_height="fill_parent">

        <ImageButton 
            android:id="@+id/btnCatalog"
            android:src="@drawable/catalog_icon"
            android:layout_width="fill_parent" 
            android:layout_height="wrap_content"
            android:background="@drawable/white"/>
        <TextView 
            android:text="Catalog" 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" 
            android:textColor="#000000"/>
    </LinearLayout>

    <LinearLayout 
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" 
        android:layout_weight="1"
        android:orientation="vertical" 
        android:gravity="center">

        <ImageButton 
            android:id="@+id/btnMyContact"
            android:src="@drawable/mycontact_icon"
            android:layout_width="fill_parent" 
            android:layout_height="wrap_content" 
            android:background="@drawable/white"/>
        <TextView 
            android:text="My" 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textColor="#000000"/>
        <TextView 
            android:text="Contacts" 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textColor="#000000"/>
    </LinearLayout>
</LinearLayout>

<LinearLayout 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" 
    android:layout_weight="1"
    android:weightSum="3" 
    android:orientation="horizontal">
    <LinearLayout 
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" 
        android:layout_weight="1"
        android:orientation="vertical" 
        android:gravity="center">

        <ImageButton 
            android:id="@+id/btnPhoto"
            android:src="@drawable/photo_icon"
            android:layout_width="fill_parent" 
            android:layout_height="wrap_content" 
            android:background="@drawable/white"/>
        <TextView 
            android:text="Photo" 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" 
            android:textColor="#000000"/>
    </LinearLayout>

    <LinearLayout 
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" 
        android:layout_weight="1"
        android:orientation="vertical" 
        android:gravity="center">
        <ImageButton 
            android:src="@drawable/myaccount_icon"
            android:id="@+id/btnMyAccount"
            android:layout_width="fill_parent" 
            android:layout_height="wrap_content" 
            android:background="@drawable/white"/>
        <TextView 
            android:text="My Account" 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textColor="#000000" />
    </LinearLayout>

    <LinearLayout 
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" 
        android:layout_weight="1"
        android:orientation="vertical" 
        android:gravity="center">

        <ImageButton
            android:id="@+id/btnFeedback"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/white"
            android:src="@drawable/feedback_icon" />

        <TextView 
            android:text="Feedback" 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textColor="#000000" />
    </LinearLayout>
</LinearLayout>

<LinearLayout 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" 
    android:layout_weight="1"
    android:layout_marginBottom="20px"
    android:weightSum="3" 
    android:orientation="horizontal">
    <!-- dont change the above value of 45px in 
    android:layout_marginBottom="45px"-->

    <LinearLayout 
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" 
        android:layout_weight="1"
        android:orientation="vertical" 
        android:gravity="center">
        <ImageButton 
            android:id="@+id/btnPromotions"
            android:src="@drawable/promotion_icon"
            android:layout_width="fill_parent" 
            android:layout_height="wrap_content"
            android:background="@drawable/white" />
        <TextView 
            android:text="Promotions" 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textColor="#000000"/>
    </LinearLayout>
    <LinearLayout 
        android:layout_width="fill_parent"
        android:layout_weight="1"
        android:orientation="vertical" 
        android:gravity="center"
        android:layout_height="fill_parent" >

        <ImageButton 
            android:id="@+id/btnTradeTools"
            android:src="@drawable/tradetools_icon"
            android:layout_width="fill_parent" 
            android:layout_height="wrap_content"
            android:background="@drawable/white" />
        <TextView 
            android:text="Trade Tools" 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" 
            android:textColor="#000000"/>
    </LinearLayout>

    <LinearLayout 
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" 
        android:layout_weight="1"
        android:orientation="vertical" 
        android:gravity="center">
        <ImageButton 
            android:id="@+id/btnClientInfo"
            android:src="@drawable/clientinfo_icon"
            android:layout_width="fill_parent" 
            android:layout_height="wrap_content" 
            android:background="@drawable/white"/>
        <TextView 
            android:text="About" 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" 
            android:textColor="#000000"/>
    </LinearLayout>
</LinearLayout>
</LinearLayout>

   <LinearLayout
        android:layout_alignParentBottom="true"
        android:layout_width="fill_parent" 
        android:layout_height="30dip"
        android:layout_weight="1"
        android:weightSum="5" 
        android:orientation="horizontal"
        android:background="#e4e4e4"
        android:tileMode="repeat">
<include layout="@layout/footer_include_layout"/>

         </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:42:28.960

Transformer 有一个~160dpi，这使它成为一个 mdpi 屏幕。因此，从 mdpi 文件夹加载资源是很自然的

# python - 如何在 Django 视图中显示 PDF 文件？

> ID：11779246
> 
> 赞同：41
> 
> 时间：2012-08-02T14:11:19.113
> 
> 标签：python, django, model-view-controller, pdf

*是否可以在*Django 视图中显示 PDF 文件，而不是让用户必须下载它才能看到它？

如果可能的话，它会怎么做？

这是我到目前为止所拥有的 -

```
@login_required
def resume(request, applicant_id):

    #Get the applicant's resume
    resume = File.objects.get(applicant=applicant_id)
    fsock = open(resume.location, 'r')
    response = HttpResponse(fsock, mimetype='application/pdf')

    return response 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2016-06-20T14:08:30.897

Django 有一个专门用于返回文件的类[FileResponse](https://docs.djangoproject.com/en/stable/ref/request-response/#django.http.FileResponse)。它流式传输文件，因此您不必在返回之前将整个文件读入内存。干得好：

```
from django.http import FileResponse, Http404

def pdf_view(request):
    try:
        return FileResponse(open('foobar.pdf', 'rb'), content_type='application/pdf')
    except FileNotFoundError:
        raise Http404() 
```

如果你有非常大的文件，或者如果你经常这样做，更好的选择可能是使用正常的服务器配置在 Django 之外提供这些文件。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-08-02T14:49:04.953

简单地说，如果你有一个 PDF 文件并且你想通过 Django 视图输出它，你需要做的就是将文件内容转储到响应中并使用适当的 mimetype 发送它。

```
def pdf_view(request):
    with open('/path/to/my/file.pdf', 'r') as pdf:
        response = HttpResponse(pdf.read(), mimetype='application/pdf')
        response['Content-Disposition'] = 'inline;filename=some_file.pdf'
        return response
    pdf.closed 
```

您可能可以直接返回响应而不指定 Content-Disposition，但这更好地表明了您的意图，并且还允许您指定文件名以防用户决定保存它。

另外，请注意，上面的视图不处理由于任何原因无法打开或读取文件的情况。由于它是用 完成的`with`，它不会引发任何异常，但您仍然必须返回某种响应。不过，你可以简单地提出一个`Http404`或什么。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2015-04-18T14:00:10.667

PDF 文件必须以`rb`非打开方式打开`r`。

```
def pdf_view(request):
    with open('/path / to /name.pdf', 'rb') as pdf:
        response = HttpResponse(pdf.read(),content_type='application/pdf')
        response['Content-Disposition'] = 'filename=some_file.pdf'
        return response 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-11-04T10:06:35.763

取出内联；如果您希望从服务器读取文件。而且，`HttpResponse`kwarg`mimetype`已被替换为`content_type`：

```
(response['Content-Disposition'] = 'inline;filename=some_file.pdf')

def pdf_view(request):
    with open('/app/../Test.pdf', 'r') as pdf:
        response = HttpResponse(pdf.read(),content_type='application/pdf')
        response['Content-Disposition'] = 'filename=some_file.pdf'
        return response
    pdf.closed 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-09-17T19:14:52.223

按照上面@radtek 的回答，我决定研究基于类的视图显示。我尝试使用`View`但它没有`get_context_data()`方法。

我[在这里](http://ccbv.co.uk/)寻找一些指导。我安顿下来，`BaseDetailView`因为我只想显示一个对象。

```
from django.http import FileResponse
from django.shortcuts import get_object_or_404
from django.views.generic.detail import BaseDetailView

class DisplayPdfView(BaseDetailView):
    def get(self, request, *args, **kwargs):
        objkey = self.kwargs.get('pk', None) #1
        pdf = get_object_or_404(Pdf, pk=objkey) #2
        fname = pdf.filename() #3
        path = os.path.join(settings.MEDIA_ROOT, 'docs\\' + fname)#4
        response = FileResponse(open(path, 'rb'), content_type="application/pdf")
        response["Content-Disposition"] = "filename={}".format(fname)
        return response 
```

评论

`pk`1 此行访问由调用视图的 url 传递的命名参数。

2 此行获取实际的 pdf 模型对象。

3 我`filename(self): return os.path.basename(self.file.name)`在模型中定义了一个方法来帮助我只获取文件名和扩展名。

4 此行获取完整的文件路径。

然后按照上述答案中的说明使用文件响应。还记得使用`rb`阅读pdf文件

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-01-22T15:00:42.327

Here is a typical use-case for displaying a PDF using class-based views:

```
from django.contrib.auth.decorators import login_required
from django.http import HttpResponse

class DisplayPDFView(View):

    def get_context_data(self, **kwargs):  # Exec 1st
        context = {}
        # context logic here
        return context

    def get(self, request, *args, **kwargs):
        context = self.get_context_data()
        response = HttpResponse(content_type='application/pdf')
        response['Content-Disposition'] = 'inline; filename="worksheet_pdf.pdf"'  # Can use attachment or inline

        # pdf generation logic here
        # open an existing pdf or generate one using i.e. reportlab

        return response

# Remove login_required if view open to public
display_pdf_view = login_required(DisplayPDFView.as_view()) 
```

For generating your own pdf with reportlab see the [Django project Docs on PDF Generation](https://docs.djangoproject.com/en/1.7/howto/outputting-pdf/).

Chris Pratt's response shows a good example of opening existing PDFs.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-02T14:52:30.953

浏览器不是 PDF 阅读器（除非它们有适当的插件/插件）。

您可能希望将 PDF 呈现为 HTML，这可以[从 backend](https://stackoverflow.com/questions/276434/converting-pdf-to-html-with-python)或[frontend](https://github.com/mozilla/pdf.js)完成。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-12-10T07:27:42.237

我只是把它扔在那里。

**您可以简单地将 PDF 简历添加到静态文件中。**

如果您使用白噪声来提供静态文件，那么您甚至不需要制作视图。然后在静态位置访问您的简历。

我添加了我的，这里是：[TIm-D_Nice.pdf](https://www.jefferythewind.com/static/main/resume/TIm-D_Nice.pdf)

**警告：这并不能解决问题中的`login_required`要求**

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-10-21T15:51:01.363

它对我有用

```
import re, os
import os
from django.http import HttpResponse
from django.views.decorators.csrf import csrf_exempt
@csrf_exempt
def export_auto_doc(request):
    name = request.GET.get('name', "")
    filename = "path/to/file"+name+".pdf"
    try:
        if not re.search("^[a-zA-Z0-9]+$",name):
            raise ValueError("Filename wrong format")
        elif not os.path.isfile(filename):
            raise ValueError("Filename doesn't exist")
        else:
            with open(filename, 'r') as pdf:
                response = HttpResponse(pdf.read(), content_type='application/pdf')
                response['Content-Disposition'] = 'inline;filename='+name+'.pdf'
                return response
            pdf.closed
    except ValueError as e:
        HttpResponse(e.message) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-10-22T17:31:29.807

使用 pdf 标签的 iframe url=url 并提供该 pdf 的 url 并确保您的用户将完全控制项目然后 pdf 将显示在网页屏幕上

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-03-26T19:38:33.593

最简单的方法可能是在模板中使用锚点。例如，如果您正在使用 Django 的模板引擎（大多数搜索此引擎的人可能都是），只需通过锚点将其作为静态文件提供。

在包含文件链接的模板中，在最顶部添加

```
{% load static %} 
```

然后，无论你想链接到你的 pdf，把

```
<a href="{% static 'relative/path/file.pdf' %}">Click me</a> 
```

第一行告诉 Django 在`settings.py`. 您在锚标记中使用的路径相对于您在 中配置为静态目录的任何目录`settings.py`。当您单击呈现的链接时，它应该在您的浏览器中显示 PDF，前提是您的静态文件路径正确。

# ruby-on-rails - 在 Rails 中，如何将用户组创建为另一个关联，例如“成员”？

> ID：11779249
> 
> 赞同：3
> 
> 时间：2012-08-02T14:11:30.977
> 
> 标签：ruby-on-rails, associations

我正在尝试在两个现有模型`User`和`Dwelling`. A`Dwelling`在创建时只有一个所有者 ( `Dwelling belongs_to :user`, `User has_one :dwelling`)。但是可以将其他用户添加到其中`Dwelling`（`Roomies`现在没有为此创建模型，`Roomie`是概念关系）。

我认为我不需要单独的模型，而是需要与现有模型建立特殊关系，但我可能是错的。我认为需要`user_id`从`Users`表格中进行参考。我不确定从哪里开始。感谢您的任何帮助！

例如：

```
Dwelling1 
  user_id: 1 
  roomies: [1, 2, 3, 4] 
```

其中 1、2、3、4 是 user_ids。

**更新模型**

`Dwelling Model`

```
# dwelling.rb
class Dwelling < ActiveRecord::Base
    attr_accessible :street_address, :city, :state, :zip, :nickname

    belongs_to :owner, :class_name => "User", :foreign_key => "owner_id"
    has_many :roomies, :class_name => "User"

    validates :street_address, presence: true
    validates :city, presence: true
    validates :state, presence: true
    validates :zip, presence: true

end 
```

`User Model`

```
# user.rb
class User < ActiveRecord::Base
  attr_accessible :email, :first_name, :last_name, :password, :password_confirmation, :zip
  has_secure_password

  before_save { |user| user.email = email.downcase }
  before_save :create_remember_token

  belongs_to :dwelling
  has_many :properties, :class_name => "Dwelling", :foreign_key => "owner_id"

  validates :first_name, presence: true, length: { maximum: 50 }
  ... 
```

`Updated Dwelling Create Action`

```
#dwellings_controller.rb
...
def create
@dwelling = current_user.properties.build(params[:dwelling])

  if @dwelling.save
    current_user.dwelling = @dwelling
    if current_user.save
      flash[:success] = "Woohoo! Your dwelling has been created. Welcome home!"
      redirect_to current_user
    else
      render 'new'
    end
  end
end
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T02:12:39.313

我的回答假设您只希望 a`user`成为`roomie`at one `dwelling`。如果您希望 a`user`超过`roomie`一个`dwelling`，我认为@ari 的答案很好，尽管我可能会选择`has_and_belongs_to_many`而不是`has_many :through`.

现在我的回答是：

我会设置它，以便住宅`belongs_to`拥有所有者和`has_many`室友（可能包括所有者，但不一定）。

您可以将`User`模型用于`owners`和`roomies`。您不需要任何额外的表或模型，您只需要使用`:class_name`and`:foreign_key`选项设置正确的关系。

在您的`Dwelling`模型中：

```
# dwelling.rb
belongs_to :owner, :class_name => "User", :foreign_key => "owner_id"
has_many :roomies, :class_name => "User" 
```

在您的`User`模型中：

```
# user.rb
belongs_to :dwelling # This is where the user lives
has_many :properties, :class_name => "Dwelling", :foreign_key => "owner_id"  # This is the dwellings the user owns 
```

在您的`dwellings`表中，您需要一`owner_id`列来存储`user_id`所有者的

在您的`users`表格中，您需要`dwelling_id`存储`dwelling_id`用户居住的住宅。

要在有关控制器的评论中回答您的问题：

如果您想设置`current_user`为新住宅的所有者，请执行以下操作：

```
@dwelling = current_user.properties.build(params[:dwelling])
.... 
```

如果您想将其设置`current_user`为新住宅的所有者和室友，请执行以下操作：

```
@dwelling = current_user.properties.build(params[:dwelling]

if @dwelling.save
  current_user.dwelling = @dwelling
  if current_user.save
     # flash and redirect go here        
  else
     # It's not clear why this wouldn't save, but you'll to determine
     # What to do in such a case.
  end
else
   ...
end 
```

上面最棘手的部分是处理住宅有效并保存但由于某些不相关的原因`current_user`无法保存的情况。根据您的申请，您可能希望住宅无论如何保存，即使您不能将其指定`current_user`为室友。或者，您可能希望不保存住宅 --- 如果是这样，您需要使用模型事务，这超出了这个问题的范围。

您的控制器代码不起作用，因为保存 Dwelling 实际上并没有更新`current_user`记录以存储`dwelling_id`. 您的代码将等同于以下内容：

```
@dwelling = Dwelling.new(params[:dwelling])
current_user.dwelling = @dwelling
if @dwelling.save
   ... 
```

请注意，`current_user`永远不会保存，因此该`current_user.dwelling = @dwelling`行是无用的。

这可能看起来违反直觉，但最重要的是，`build_dwelling`它实际上并没有像您预期的那样在内存中设置东西。如果您保存正在构建的模型而不是您正在构建的模型，您将获得更直观的*结果*：

```
@dwelling = current_user.build_dwelling(params[:dwelling])
if current_user.save # This will save the dwelling (if it is valid) 
```

但是，除非您打开关联，否则此（默认情况下）不会保存房屋，如果它有验证错误`:autosave`，这也有点超出了这个问题的范围。我真的不推荐这种方法。

更新：

这是更详细的代码片段：**

```
# dwellings_controller.rb

def create
  @dwelling = current_user.properties.build(params[:dwelling])

  if @dwelling.save
    # The current user is now the owner, but we also want to try to assign
    # his as a roomie:
    current_user.dwelling = @dwelling
    if current_user.save
      flash[:notice] = "You have successfully created a dwelling"
    else
       # For some reason, current_user couldn't be assigned as a roomie at the 
       # dwelling.  This could be for several reasons such as validations on the
       # user model that prevent the current_user from being saved.
       flash[:notice] = "You have successfully created a dwelling, but we could not assign you to it as a roomie"
    end
    redirect_to current_user
  else
    # Dwelling could not be saved, so re-display the creation form:
    render :new
  end
end 
```

当住宅成功保存时，当前用户将成为所有者（`owner_id`在数据库中）。但是，如果`current_user`没有保存，您将需要决定您的应用程序应如何响应。在上面的示例中，我允许保存住宅（即我不回滚它的创建），但我通知用户他不能被分配为室友。发生这种情况时，很可能是您的应用程序中的其他代码导致了问题。您可以检查错误`current_user`以了解原因。或者，您可以使用`current_user.save!`而不是`current_user.save`临时进行故障排除。

完成所有这些的另一种方法是在模型中使用`after_create`回调。`Dwelling`在许多方面，这将是一种更清洁、更简单的方法。但是，捕获`current_user`无法保存的情况可能比上述方法更难看，具体取决于您要如何处理它。

我相信底线是`current_user.save`代码导致了一些问题。您需要诊断原因，然后确定您的应用程序在这种情况下应该做什么。有几种方法可以处理这个问题，至少包括以下

1.  将所有内容放在事务块中，并使用`current_use.save!`而不是，`current_user.save`以便引发异常并且既不保存用户也不保存住所。
2.  保存住所，但通知用户他不是室友（如上）
3.  与其保存 current_user，不如使用`update_column`（避免回调、验证等）。

我相信您当前遇到的问题与原始问题基本无关。如果您需要进一步的帮助，最好将其作为一个单独的问题分开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T14:43:21.730

您可以通过将 Roomie id 存储为 Dwelling 中的列来完成此操作

进行迁移：

```
class AddRoomiesToDwelling < ActiveRecord::Migration
  def self.up
    add_column :dwelling, :roomies, :text
  end

  def self.down
    remove_column :dwelling, :roomies
  end
end 
```

在您的住宅模型中：

```
class Dwelling < ActiveRecord::Base
  serialize :roomies
end 
```

然后，您可以使用以下命令设置房间 ID：

```
roomie_ids = [1, 2, 3, 4]  
@dwelling.roomies = {:ids => roomie_ids}
@dwelling.save! 
```

取自本[节的](http://api.rubyonrails.org/classes/ActiveRecord/Base.html#M001799)*在文本列中保存数组、散列和其他不可映射的对象*部分

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T14:38:35.140

你有两个可能的选择。根据您的计划，住宅拥有一个业主可能比业主拥有一个住宅更明确。那么住宅也将能够拥有用户。您可以向 User 添加一个名为dwelling_id 的列，然后您可以做住宅has_many 用户。

另一种选择是使用[“has_many through”关联](http://guides.rubyonrails.org/association_basics.html#the-has_many-through-association)。这意味着您需要创建一个新模型来跟踪此关联，例如“Relationship.rb”，它属于 User 和 Dwelling（并为它们提供列）。然后你就可以写出这样的代码：

```
//in Dwelling.rb
has_many :roomies, through: :relationships, source: :user

//in User.rb
has_many :dwellings, through: :relationships 
```

这将使用户还可以加入多个住宅。

# android - Android 应用程序未在模拟器上运行

> ID：11779251
> 
> 赞同：0
> 
> 时间：2012-08-02T14:11:44.163
> 
> 标签：android, eclipse, android-emulator

即使在真实设备上，模拟器也不会启动我的应用程序！我已经在线尝试了所有解决方案，甚至重新安装了 android sdk、ADT 插件。该应用程序运行 SOMTIMES（确切地说是 4 倍），就像不久前一样，当我回到家时我再次尝试它，它在我第一次尝试时运行然后我再次开始处理代码然后我尝试运行它，不会再次运行。即使是像 hello world 这样的基本应用程序也不会在大部分时间运行。我已经设置了运行配置，让我每次都选择我的设备，但即使是设备选择器也不会显示（只显示一次），我尝试等待 30 分钟（也尝试了 kill-server start-server）但它只是不会跑！我的真实设备或模拟器在 DDMS 透视图中列出，并且控制台上没有任何内容。请帮忙，因为我已经为此浪费了 2 天时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:17:38.827

您是否也尝试过，取 USB 电缆然后禁用调试，然后启用调试并将 USB 电缆放回去。

我记得这发生在我身上，所以我做了我提到的事情，令人惊讶的是它有效。希望它也对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T14:16:46.800

也许你应该尝试删除你的模拟器并创建一个新的。确保您的所有设置都是正确的，并且您的目标是正确的操作系统版本。

我在模拟器上遇到了很多问题，擦拭它们并从头开始经常工作。

至于真正的设备，第一个真正的障碍是获得正确的驱动程序，以便您的 PC 可以识别它，然后 kill-server start-server 通常会这样做。我很惊讶这对你不起作用。

# mysql - 实体-属性-值表设计

> ID：11779252
> 
> 赞同：27
> 
> 时间：2012-08-02T14:11:45.193
> 
> 标签：mysql, sql, database-design, database-schema, entity-attribute-value

我目前正在为电子商务平台的产品部分设计数据库结构。它需要以这样一种方式设计，即可以销售具有无限数量不同属性的无限数量的不同类型的产品。

例如，笔记本电脑的属性可以是 RAM、屏幕尺寸、重量等。一本书的属性可以是 Author、ISBN、Publisher 等。

似乎 EAV 结构是最合适的。

*   选择一个产品
*   产品属于属性集
*   属性集包含属性 x 和 y
    *   属性 x 是数据类型 datetime（存储在 attribute_values_datetime 中的值）
    *   属性 y 是数据类型 int（值存储在 attribute_values_int 中）
*   每个属性定义表示类型（即，x 具有列类型 -> 日期类型）

假设上述情况，我是否可以将选择加入 attribute_values_datetime 表以获得正确的数据，而无需获取结果集并在该表已知的情况下构建第二个查询？构造这种类型的查询是否会对性能产生很大影响，或者下面的查询是否更合适（尽管功能较少）

*   选择一个产品
*   产品属于属性集
*   属性集包含属性 x 和 y
    *   属性 x 是数据类型 datetime，但在 attribute_values 中存储为 TEXT
    *   属性 y 是数据类型 int 但在属性值中存储为 TEXT

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-08-15T15:13:03.197

我将对这个问题的大多数评论提出相反的意见。虽然*EAV 是邪恶*的，因为您可以在 SO 和 DBA.SE 和其他地方找到多次详细解释的所有原因，但有一个非常常见的应用程序，其中 EAV 的大多数问题在很大程度上是无关紧要的，并且 (少数）EAV 的优势非常密切。该应用程序是在线产品目录。

EAV 的主要问题是它不会让数据库做它真正擅长的事情，这有助于通过将不同实体的信息的不同属性安排在*模式*中来为它们提供适当的上下文。拥有模式可以在访问、解释和强制数据完整性方面带来许多优势。

关于产品目录的事实是，产品的属性几乎与*目录系统*本身完全无关。产品目录系统（最多）对产品属性做三件事。

1.  以列表形式向最终用户显示产品属性：{属性名称}：{属性值}。

2.  在比较网格中显示多个产品的属性，其中不同产品的属性相互排列（产品通常是列，属性通常是行）

3.  基于特定属性/值组合的某些东西（例如定价）的驱动规则。

如果您的系统所做的只是反刍与语义无关的信息（与系统无关），那么该信息的模式基本上是无用的。事实上，模式*妨碍*了在线产品目录，尤其是当您的目录包含许多不同类型的产品时，因为您总是不得不返回模式来修改它以允许新的产品类别或属性类型.

由于它的使用方式，即使产品目录中属性值的数据类型也不一定（至关重要）重要。对于某些属性，您可能需要施加约束，例如“必须是数字”或“必须来自此列表 {...}”。这取决于属性一致性对您的目录的重要性以及您希望实现的详细程度。看看几家在线零售商的产品目录，我想说大多数人都准备好以简单性换取一致性。

是的，EAV 是邪恶的，除非它不是。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T14:23:09.783

我不知道这应该是评论还是答案。尽管如此，我还是走了。

我不知道你到底在建什么。但是您是否看过[Magento EAV 数据库结构](http://www.magentocommerce.com/wiki/2_-_magento_concepts_and_architecture/magento_database_diagram)？是的，它可能很慢，查询可能很大，但对我们来说，优点多于缺点。另一方面，magento 负责查询。

我们正在将我们的在线商店（大中型商店）迁移到使用 Magento，目前我们对 EAV 方法非常满意。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-12T05:00:13.460

是的，在为 EAV 模型组装查询时通常会有很大的损失。检查数据的自我一致性会带来更大的性能损失，因为 DBMS 无法为您做这件事。如果出现问题，DBMS 无法告诉您。

使用更正统的数据库设计，正如[Oded](https://stackoverflow.com/users/1583/oded)在评论中推荐的那样，DBMS 确保数据库中的数据更加接近一致。我强烈建议使用常规（非 EAV）设计。

# java - 构造函数 JSONObject(java.lang.String)

> ID：11779254
> 
> 赞同：1
> 
> 时间：2012-08-02T14:11:47.990
> 
> 标签：java, json

我收到此编译错误：

> 找不到符号构造函数 JSONObject(java.lang.String)

任何人都可以解释它有什么问题吗？

```
String jsnString = new String("{\"fname\":\"DKP\",\"lname\":\"patel\"}");
JSONObject jObj = new JSONObject(new String(jsnString)); 
```

我也尝试过：

```
JSONObject jObj = new JSONObject(jsnString); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:19:21.267

您应该检查它是否正确链接和导入。您可以使用该类中的任何其他类/静态方法吗？

# php - 电子邮件处理退回

> ID：11779255
> 
> 赞同：2
> 
> 时间：2012-08-02T14:11:51.503
> 
> 标签：php, email, email-bounces

我有一个数据库，其中包含我发送的电子邮件的 20K newletter 我发现的问题是我发回的每封电子邮件都输入

传递状态通知（失败）

我愿意转移这封不活跃的电子邮件，因为我知道我从字段格式和存在的角度过滤了所有电子邮件。

因为我必须看到很少有研究解决这个问题，所以我发现反弹已经在软件上实现的概念。

如果有人有任何想法我如何在php中应用反弹将受到欢迎

亲切地

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-20T10:58:28.647

嗯，很难理解你在说什么，但是......

正如您所提到的，当电子邮件无法发送（由于多种原因）时，您将收到发送状态通知，该通知将发送到您用于发送邮件的电子邮件的收件箱。

例如，如果您将新闻通讯从**newsletter@test.com**发送到**customer@test.com**并且消息无法传递，那么您会在**newsletter@test.com**收到通知。因此，只需使用 php 打开您的**newsletter@test.com**收件箱，阅读消息，解析它们，并将错误（如果发生）保存在数据库中，并通过电子邮件进行匹配。

此链接可能有用： http: [//php.net/manual/en/function.imap-open.php](http://php.net/manual/en/function.imap-open.php)

如果您在自己的服务器上有邮箱，那么事情就简单多了，因为您需要做的就是制作 ln，然后打开文件进行解析。

```
ln -s /var/mail/my-inbox /var/www/my-script/inbox 
```

# c++ - const 正确性和模板参数

> ID：11779257
> 
> 赞同：1
> 
> 时间：2012-08-02T14:12:00.257
> 
> 标签：c++

如果您想了解一些背景故事，请参阅[这个问题。](https://stackoverflow.com/questions/11778490/c-compiler-nuisance)

我想将事物作为不可变数据传递。

```
template<class T>
class A
{
    public:
        void send(const T& value);
};

A<int> a;
a.send(1); 
```

到现在为止还挺好。我只是发送了一个常量值，但是当我使用指针时，事情变得很棘手。

```
A<int *> a;
int b = 1;
a.send(&b); 
```

我最终得到的是：

```
void send(int *const & value) 
```

我现在传递一个无法更改的指针作为参考，但该指针指向的内容可以更改。这是正确的，但我想说你不能修改这个指针指向的内容。

我的意图是使事物不可变，但这甚至可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T14:14:49.903

你可以声明`a`为

```
A<const int *> a; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T14:19:34.217

如果我理解正确，您基本上想要一个指针专业化，那么这个怎么样：

```
template <typename T>
struct Immutable {
  typedef T const& Type;
};

template <typename U>
struct Immutable<U*> {
  typedef U const* Type;
};

template<class T>
class A {
  public:
    void send(typename Immutable<T>::Type);
}; 
```

# javascript - 显示/隐藏内联表单

> ID：11779262
> 
> 赞同：0
> 
> 时间：2012-08-02T14:12:11.673
> 
> 标签：javascript, html, css, forms

我的网页上有一个内联表单，加载页面时它被 css 隐藏。我还有一个按钮来显示表单。但是，如果再次单击它，我希望同一个按钮隐藏表单。但我似乎无法让它工作，相反，当我单击内联表单按钮时，即使我从未为其分配功能，表单也会消失。

这是我的 HTML

```
<button id="signup" onclick="showForm('inline')">SignUp!</button>

        <!-- hidden inline form -->
        <div id="inline">
        <h2>Register! It's free!</h2>
        <form id="register" action="#" method="post" name="register">
        <label for="email">Email:</label>
            <input id="email" class="txt" type="email" name="email" />

        <label for="password">Password:</label>
            <input id="password" class="passtxt" type="password" name="password" />

        <label for="password">Repeat Password:</label>
            <input id="password" class="passtxt" type="password" name="password" />

        <button id="registerbtn">Register</button>
        </form> 
        </div> 
```

这是我的 JS：

```
function showForm(form) {

    var e = document.getElementById(form);

    if (e.style.display = 'none') 
        e.style.display = 'inline';
    else
    e.style.display = 'none';

} 
```

当我单击注册按钮时，会显示表单。但是，如果我再次单击它，则没有任何反应。但是，如果我单击表单中的注册按钮，它就会消失。为什么？我该如何解决？

**编辑：**我选择 DaveHogan's 作为最佳答案，因为它是我正在寻找的。但是我已经改用 JQuery 了，如果你正在阅读这篇文章。你也应该换。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T14:15:58.047

看来您没有正确检查相等性（使用双等号）。

```
if (e.style.display == 'none') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T14:16:21.650

如果你会使用 jQuery，你可以使用切换 :)

[http://jsfiddle.net/Se5bm/](http://jsfiddle.net/Se5bm/)

```
<div id="foo">omg </div>
<button id="bar">toggle me</button>​

$('#bar').bind('click' , function() {
    $('#foo').toggle();
});
​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T14:21:30.643

您必须记住，“=”与“==”不同，= 用于分配，== 用于问题，类似这样... A = B，在这种情况下，您分配 A 等于B，如果你写 A == B 你在问 A 是否等于 B

# ios - 如果 CONFIGURATION_BUILD_DIR 使用 xcodebuild 设置，则找不到库头

> ID：11779265
> 
> 赞同：5
> 
> 时间：2012-08-02T14:12:23.743
> 
> 标签：ios, header, static-libraries, restkit, xcodebuild

我的 iOS 项目使用 RestKit 作为静态库（在 GIT 子模块中）。

当我做：

```
xcodebuild -project myproject.xcodeproj -configuration Debug 
```

一切顺利。但是，当我更改输出目录时：

```
xcodebuild -project myproject.xcodeproj -configuration Debug CONFIGURATION_BUILD_DIR=build 
```

xcodebuild 找不到我的库头文件：

```
/path/to/my/project/file.m:9:9: fatal error: 'RestKit/RestKit.h' file not found
#import <RestKit/RestKit.h>
        ^
1 error generated. 
```

这里会发生什么？

* * *

## 编辑

经过一番调查，我发现在添加时`CONFIGURATION_BUILD_DIR=build`，xcodebuild 根本不会从 RestKit 复制标头。

不使用`CONFIGURATION_BUILD_DIR`：

```
CpHeader Code/RestKit.h ... 
```

使用`CONFIGURATION_BUILD_DIR`：什么都没有。

# sql - 减去与删除oracle中存在的位置

> ID：11779267
> 
> 赞同：1
> 
> 时间：2012-08-02T14:12:28.290
> 
> 标签：sql, oracle

我有一个`CREATE TABLE`可以使用两种方法完成的查询（创建为数千/百万条记录的选择语句）：

第一种方法：

```
create table as select some data minus (select data from other table) 
```

或者

首先我应该将表创建为

```
create table as select ..... 
```

接着

```
delete from ..where exist. 
```

我猜第二种方法更好。对于哪个查询成本更低？为什么减号查询不如第二种方法快？编辑：我忘了提到 create 语句也有两个表的连接。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T14:20:16.447

减号很慢可能是因为它需要对磁盘上的表进行排序以便比较它们。

尝试用`NOT EXISTS`而不是重写第一个查询`MINUS`，它应该更快并且会产生更少的REDO和UNDO（`a_horse_with_no_name`如前所述）。当然，要确保`WHERE`子句中涉及的所有字段都被索引！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T14:21:03.143

第二个会将大量记录写入磁盘，然后将其删除。这将在 10 种情况下的 9 种情况下花费更长的时间，然后过滤您开始写入的内容。

因此，如果第一个实际上并不快，我们需要有关所涉及的表和语句的更多信息。

# php - 清理 MySQL 的用户输入

> ID：11779269
> 
> 赞同：2
> 
> 时间：2012-08-02T14:12:30.450
> 
> 标签：php, mysql, code-injection

> **可能重复：**
> [终极清洁/安全功能](https://stackoverflow.com/questions/4223980/the-ultimate-clean-secure-function)

我的一些编码遇到了一些问题，我不情愿地在我的脚本中发现了可能的 sql 注入，我似乎无法解决这个问题，所以我想知道这里是否有人可以帮助解决它。

我可以说我编写脚本很好吗，只是我完全不知道数据库注入是如何发生的，它们是如何工作的或如何防止它们，但是很明显我的清理功能没有按预期工作。

这是有问题的代码块，当我在**id**之后添加以下内容时，它会吐出一个 MySQL 错误，我已经阅读了很多关于这意味着我的代码易受攻击的内容。

```
&id=369'; 
```

所以只是添加一个逗号和一个分号会破坏 MySQL 查询，这是不希望的。这是处理查询和显示数据的代码；

```
$id = $this->clean($_GET['id']);
#$id = filter_input(INPUT_GET, 'id', FILTER_SANITIZE_STRING);
$pm_query = mysql_query("SELECT * FROM `staff_pm` WHERE `id` = '{$id}' AND `status` IN(0, 1)") or die(''.mysql_error()); 
```

所以我尝试了 PHP 中的一个集成函数，但它会吐出相同的 sql 错误，这是我事先被告知的清理函数很好：

```
function clean( $str )
{
return mysql_real_escape_string( htmlspecialchars( trim( $str ) ) );
} 
```

只是真的想知道你对此事的看法，一直担心我的编码会被正在寻找这些类型漏洞的人利用，我真的想确保它是最新的和学习的一些技术可以更好地保护它。

我被告知要转换为 PDO，但转换似乎是一项艰巨的工作，我会等到我重新创建应用程序后再这样做，我将采用一种更加面向对象的方法。

我收到的 SQL 错误是这样的：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在 '\' 附近使用的正确语法；AND `status`IN(0, 1)' 在第 1 行

谢谢你的帮助，我真的很感激。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T14:16:36.960

这家伙说的是：使用准备好的语句和参数化查询。

[如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T14:15:17.010

我还建议不要使用过时的`mysql_*`功能，而是使用 PDO。

但要修复现有代码，请使用`intval`.

```
$id = intval($_GET['id']); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T14:17:54.017

对我来说，您的列似乎`id`是整数类型，而您正试图将其与`'369\''`?

`id`将列比较`'369'`为有效（至少在 mysql 中），但将整数与非整数字符串进行比较则无效。

# c# - 如何在 ZedGraph 上找到索引位置

> ID：11779274
> 
> 赞同：4
> 
> 时间：2012-08-02T14:12:47.587
> 
> 标签：c#, graph, zedgraph, discretization

有什么方法可以根据当前的 xPosition 找到曲线的索引位置，

假设我有一个曲线项目 - MyCurve，它有 20k 个点，当鼠标移动时，我可以获得鼠标位置，然后我可以通过简单地使用以下函数来获得 x 和 y 位置。

```
double xPos=0, yPos=0;

this.zedGraphControl1.GraphPane.ReverseTransform(MouseLoc, out xPos, out yPos); 
```

但我想从曲线项中找到数据点，有什么建议......？

![在此处输入图像描述](../Images/34a4f2f16aa403bc1555ad5c89b7f510.png) 提前致谢....：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T14:25:54.277

请记住，以下只是一个近似值，它应该是准确的，尤其是当您的鼠标靠近该点时，但是当您查看鼠标位置时，您可能不会直接位于曲线上的某个点上。它还假设您`CurveItem Curve`有积分，**并且**它们是均匀分布的。

```
double startPos = Curve.Points[0].X
double xStep = Curve.Points[Curve.NPts - 1].X / Curve.NPts;
int xIndex = (int)(xPos / xStep + startPos);
// Make sure it is in bounds
xIndex = xIndex < 0 ? 0 : xIndex > Curve.NPts - 1 ? Curve.NPts - 1 : xIndex; 
```

或者您可以使用以下功能：

```
CurveItem n_curve;
int index;
zedGraphControl1.GraphPane.FindNearestPoint(mousePt, out n_curve, out index); 
```

但请记住，这将寻找最近的曲线*和*该曲线内最近点的索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T14:41:21.917

如果您不关心以编程方式使用位置，而只想查看图表中显示的位置，您可以设置`zedGraphControl1.IsShowPointValues`为`true`：

![在图表中显示点值](../Images/7b17501a3a3f1e1b2eb0607625c427ee.png)

# objective-c - setValue:forKey: 和 setObject:forKey: 对于 NSMutableArray 有什么区别？

> ID：11779277
> 
> 赞同：-1
> 
> 时间：2012-08-02T14:13:04.977
> 
> 标签：objective-c, ios5, xcode4.3

就是这样 - 我是新手，我不知道在任何情况下使用哪个。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-02T14:17:00.567

没有区别，因为两者都不存在`NSMutableArray`。

但是，这些方法存在于`NSMutableDictionary`. 两者的区别是这样的：

来自苹果：[NSMutableDictionary](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsmutabledictionary_Class/Reference/Reference.html)

**-setValue:forKey:**

> 此方法使用 setObject:forKey: 向字典添加值和键，除非 value 为 nil，在这种情况下，该方法尝试使用 removeObjectForKey: 删除键。

# javascript - 使引导程序的弹出链接可点击？

> ID：11779280
> 
> 赞同：1
> 
> 时间：2012-08-02T14:13:16.743
> 
> 标签：javascript, twitter-bootstrap, popover

我可能是盲人，但我已经搜索过了，似乎找不到答案。

使用 Bootstrap，弹出框的格式非常简单 - 添加`rel="popover"`并放入内容`data-content="xxx"`

但是 - 如果你真的点击链接，它就无处可去。即使设置正确`href="xxx"`

我错过了什么吗？我希望仅在悬停时弹出窗口，如果用户单击，我希望他们转到我设置的任何链接。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T22:13:49.157

根据您的网站，`application.js`您拥有：

```
// some code has been omitted for clarity
$("a[rel=popover]")
.click(function(e) {
    e.preventDefault()
}) 
```

您只需要删除`preventDefault`它会阻止您的链接，或使用其他方式来关注它们。

# jquery - 如何在 MaskedInput jQuery 应用程序上使用 .unmask() 函数？

> ID：11779281
> 
> 赞同：0
> 
> 时间：2012-08-02T14:13:19.640
> 
> 标签：jquery, maskedinput

我尝试在( )`.unmask()`之后使用函数，但它不起作用。`.blur()``jQuery`

请帮忙，这是我的代码：

```
$('.cnpj').focus(function()
{
    $(this).mask('99999999/9999-99');
})
.blur(function(e)
{
   if($(this).val().length == 0)
   {
        var mask = '99999999/9999-99';
        $(this).unmask(mask);
        $(this).val('CNPJ');
   }
}); 
```

这是HTML代码：

```
<input type="text" id="cnpj" name="cnpj" class="cnpj empty entriesFormInput01" value="CNPJ" /> 
```

我的目标是当用户没有在输入中输入任何值时，输入返回相同的值`value='CNPJ'`，因为我在表单中有很多输入并且标签是值，如果用户专注于一个输入并离开，如果没有值并且我想要，输入将为空，当他离开没有值的输入时，第一个值又回来了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:48:05.007

首先，我认为 jQuery mask() 函数默认不存在。有一个 jQuery 插件可以这样使用，对吗？我找到[了这个插件](http://digitalbush.com/projects/masked-input-plugin/)。我认为您的代码不起作用，因为您没有加载此插件或另一个插件。

```
$('.cnpj').focus(function(){
    if($(this).val() == 'CNPJ') 
       $(this).val('');
    //$(this).mask('99999999/9999-99');
}).blur(function(){
    if($(this).val().length == 0)
    {
        //var mask = '99999999/9999-99';
        //$(this).unmask(mask);
        $(this).val('CNPJ');
     }
}); 
```

# php - xdebug、sublime-text-2 和 KindariSublimeXdebug

> ID：11779284
> 
> 赞同：3
> 
> 时间：2012-08-02T14:13:31.690
> 
> 标签：php, linux, xdebug, sublimetext2

我从未使用过 Xdebug，但我想开始。我正在使用 Ubuntu Linux 并且已经能够：

*   安装 php5-xdebug并确保它正常
    工作`phpinfo()``var_dump()`
*   通过 Sublime 的包管理器安装插件我可以通过+设置 Xdebug url
    访问插件的菜单`SHIFT``F8`
*   在崇高的设置中：

    ```
    "settings": {
        "xdebug": { "url": "http://your.web.server" }
    } 
    ```

这是出了什么问题：

*   我可以在代码中放置断点，但图标似乎是错误的，它只是一个橙色的斑点
*   当我“开始调试”时，调试窗口完全为空
*   当我访问我的脚本时，它不会在我的断点处停止。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T10:27:00.300

这些是整个步骤，对我有用

```
sudo -i
apt-get install php5-xdebug
vim /etc/php5/conf.d/xdebug.ini
xdebug.remote_enable=On
xdebug.remote_host="localhost"
xdebug.remote_port=9000
xdebug.remote_handler="dbgp"
:wq
apachectl restart
exit
Download do SublimeXdebug
unzip
move folder para ~/.config/sublime-text-2/Packages/Xdebug
Download python 2.6 (careful with i386 vs amd64)
dpkg-deb -x python2.6_2xxxx.deb python2.6
move folder to ~/sublime/lib/python2.6
open google chrome
chrome://settings/extensions
Get more extensions
search for xdebug
install xdebug helper
go to "options" of xdebug helper
in IDE type "other" and in input "sublime.xdebug"
start sublime
open file test.php
add breakpoints
start debugging
in chrome go to http://localhost/test.php
activate the icon of the plugin
refresh 
```

这就对了！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T22:44:03.473

这是 Jetbrains 的一个非常酷的工具，它是 phpStorm 的制造商：

[http://www.jetbrains.com/phpstorm/marklets/index.html](http://www.jetbrains.com/phpstorm/marklets/index.html)

基本上，只需输入您的 xdebug（或 zend 调试器，如果这是您的东西）IDE 的 IDE 密钥，它就会创建书签来连接和启用各种功能。

对于 sublime text 2，IDE 键是：

sublime.xdebug

当您使用小书签时，您不需要在任何一端输入任何服务器信息。只要您保留默认设置，只需对每个“启动调试器”，一切都会自行解决。

当然，您仍然需要在您的服务器上启用 xdebug。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T16:42:21.347

您可以启用 xdebug 日志来调试 xdebug。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-17T20:15:03.030

您的 sublime 是否也无法保存项目设置，例如最近的项目列表？

我有同样的问题，你可以在这里看到它：

[https://github.com/Kindari/SublimeXdebug/issues/69](https://github.com/Kindari/SublimeXdebug/issues/69)

解决方案是删除/移动 ~/.config/sublime-text-2 文件夹，然后重新开始使用新的 sublime。在那之后，断点看起来很正常，我的调试器会连接:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T14:36:44.963

我有一个类似的问题（虽然我在 Windows 7 上运行），对我有用的只是确保我以 Windows 管理员身份运行 Sublime Text 2。我相信这是有道理的，因为 xDebug 是系统的第三方 dll。

也许以超级用户身份运行 sublime（使用 SUDO）可能对您有所帮助。

希望这可以解决您的问题。

# android - Android：片段布局问题

> ID：11779290
> 
> 赞同：0
> 
> 时间：2012-08-02T14:13:45.597
> 
> 标签：android, android-fragments

对于大屏幕，我有两个片段，它们应该是顶部/底部或左/右。问题是一个片段占用（几乎）所有空间都被一个片段占用。对于我的活动，我有两个 main.xml（一个用于纵向，一个用于横向）。但它们基本上是相似的（除了方向）。

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  android:orientation="vertical" android:id="@+id/frag_cont" >
 </LinearLayout> 
```

在 onCreate 中，我将片段添加到该布局中：

```
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    OverviewFragment of = new OverviewFragment();
    FragmentTransaction tof = getFragmentManager().beginTransaction();
    tof.add(R.id.frag_cont, of);
    DetailFragmentInitial df = new DetailFragmentInitial();
    tof.add(R.id.frag_cont, df);
    tof.commit();

} 
```

这两个片段在 onCreateView() 方面看起来有点相似

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) 
{   
    return inflater.inflate(R.layout.overview, container, false);

} 
```

最后，这些片段的两个 xml 文件如下所示，首先是较小的片段：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" android:layout_weight="1">

<ImageView
    android:id="@+id/imageLogo"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/logo"
    android:layout_centerInParent="true" />

    <TextView
    android:id="@+id/textB"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="text"
    android:layout_above="@id/imageLogo" 
    android:layout_centerHorizontal="true"/>
</RelativeLayout> 
```

现在贪婪的占据了空间：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"  
android:layout_weight="10000" >

 <ListView
    android:id="@+id/ListView01"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >
 </ListView>

</LinearLayout> 
```

我假设当我将两个 layout_weight 都设置为 1 时，两者都将占用相同数量的空间，但即使设置为 1000:1，较大的一个也会占用大约 2/3 的空间。离开重量将使更大的片段出现在整个屏幕上，而另一个则根本不可见。有任何想法吗？

**编辑：**

我遵循下面给出的方法。现在在空间方面好多了。在屏幕上旋转概览片段（基本上是列表视图）为空，其他片段仍然可以。

在 OverviewFragment.java 中，我在 onActivityCreated() 中重新填充片段：

```
public void onSaveInstanceState(Bundle bundle)
{
    bundle.putSerializable("list", mList);
    super.onSaveInstanceState(bundle);
}

@Override
public void onActivityCreated(Bundle savedInstanceState) 
{
     super.onActivityCreated(savedInstanceState);

    if(savedInstanceState != null)
    {
        mList = (ArrayList<myObject>) savedInstanceState.getSerializable("list");
    }
    else
    {
        mAppList = new ArrayList<myObject>();
        new getApps().execute();
    }

    ListView lv = (ListView) getActivity().findViewById(R.id.ListView01);
    lv.setOnItemClickListener(new TableItemSelected());
    mItemAdapter = new ItemAdapterOverview(getActivity().getApplicationContext(), mList);
    lv.setAdapter(mItemAdapter);
} 
```

旋转屏幕时，首先调用 onSaveInstanceState()，然后调用 onActivityCreated()*两次*。第一次调用saveInstanceState 不是null，第二次是。无论如何，在这两种情况下，我都应该看到我的列表，要么是从头开始构建，要么是保存的列表。为什么不是，为什么该方法被调用两次？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:25:47.703

不完全确定这是否会导致您的问题（我怀疑确实如此），但 using`FragmentTransaction.add(..)`不会将其*添加*`Fragment`到容器中，它实际上是用该 Fragment 替换了容器。这里的问题是您将两个 Fragment 添加到同一个容器中，因此它们将占用相同的空间并导致问题。

更好的方法是将两个容器视图添加到您的`frag_cont`LinearLayout（例如`FrameLayout`s）中，并给它们两个单独的 id（例如`frag_one`和`frag_two`）。然后在您的 onCreate(..) 中，将其更改为：

```
FragmentTransaction tof = getFragmentManager().beginTransaction();
tof.add(R.id.frag_one, of);
DetailFragmentInitial df = new DetailFragmentInitial();
tof.add(R.id.frag_two, df);
tof.commit(); 
```

这将使得具有 id 的布局`frag_one`由 OverviewFragment 填充，而具有 id 的布局`frag_two`由 DetailFragmentInitial 替换。然后，您可以使用 main.xml 中的视图来调整您认为合适的片段大小。

# postgresql - 如何为 Postgres psql 设置时区？

> ID：11779293
> 
> 赞同：27
> 
> 时间：2012-08-02T14:14:00.130
> 
> 标签：postgresql, timezone, psql

如何将 psql 的时区设置为默认值（美国/中部）以外的时区？这是我到目前为止所尝试的：

```
$ psql
psql (9.1.4, server 9.0.4)
...

$ psql -c 'show timezone'
  TimeZone  
------------
 US/Central

$ psql --set=timezone=US/Eastern -c 'show timezone'
  TimeZone  
------------
 US/Central

$ psql --variable=timezone=US/Eastern -c 'show timezone'
  TimeZone  
------------
 US/Central 
```

*编辑*：我不想更改服务器时区，只是客户端。

*编辑#2*：我希望它处于非交互模式。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-02T14:20:04.063

```
psql (9.1.4)
Type "help" for help.

richardh=> show timezone;
 TimeZone 
----------
 GB
(1 row)

richardh=> set timezone='UTC';
SET
richardh=> show timezone;
 TimeZone 
----------
 UTC
(1 row)

richardh=> set timezone='US/Eastern';
SET
richardh=> show timezone;
  TimeZone  
------------
 US/Eastern
(1 row)

richardh=> set timezone='blah';
ERROR:  invalid value for parameter "TimeZone": "blah" 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2016-05-20T06:19:22.427

```
ALTER USER postgres SET timezone='Asia/Tokyo' ; 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-08-02T14:29:31.973

[psql](http://www.postgresql.org/docs/9.1/static/app-psql.html)文档说：

```
-v assignment
--set=assignment
--variable=assignment
Perform a variable assignment, like the \set internal command. Note that 
you must separate name and value, if any, by an equal sign on the command line.... 
```

但是对于时区，它似乎不起作用，也许是因为：

```
 These assignments are done during a very early stage of start-up, 
 so variables reserved for internal purposes might get overwritten later. 
```

因此，您似乎必须在 psql 中使用 SET 命令，或者设置[PGTZ](http://www.postgresql.org/docs/9.1/static/libpq-envars.html)环境变量：

```
PGTZ=PST8PDT psql -c 'show timezone' 
```

当然，如果您可以为用户全局设置时区（不仅仅是这个单独的 psql 实例），您可以在其`.bashrc`文件中设置该变量（如果在 Linux 中）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-09T18:53:22.423

请注意，许多第三方客户端都有自己的时区设置，与任何 Postgres 服务器和/或会话设置重叠。

例如，如果您使用“IntelliJ IDEA 2017.3”（或 DataGrips），则应将时区定义为：

`'DB source properties' -> 'Advanced' tab -> 'VM Options': -Duser.timezone=UTC+06:00`

否则，无论您在其他任何地方设置了什么，您都会看到“UTC”。

# jquery - 用于 jQuery Mobile 控件的 Asp.Net MVC Razor 标记

> ID：11779295
> 
> 赞同：2
> 
> 时间：2012-08-02T14:14:13.000
> 
> 标签：jquery, asp.net, asp.net-mvc, jquery-mobile

这是一个 asp.net MVC 移动应用程序 - 我有一个 From 文本框和一个 Nights 文本框 - 标准视图是：

```
 <li data-role="fieldcontain">
        @Html.LabelFor(m => m.From)
        @Html.TextBoxFor(m => m.From)     
        @Html.ValidationMessageFor(m => m.From)    
    </li>

    <li data-role="fieldcontain">
        @Html.LabelFor(m => m.Nights)
        @Html.TextBoxFor(m => m.Nights)            
        @Html.ValidationMessageFor(m => m.Nights)    
   </li> 
```

我将如何更改上面的 Razor 标记以添加数据选项和数据角色：

IE。

```
@Html.TextBoxFor(m => m.From) 
```

至

```
<input name="From" type="date" data-options='{"mode":"datebox"}' data-role="datebox" id="From" /> 
```

和

```
@Html.TextBoxFor(m => m.Nights) 
```

至

```
<input type="range" name="nights" id="nights" value="1" min="0" max="28" /> 
```

（这些是日期插件 - 和移动中的滑块控件）

**编辑：我有第二部分：**

```
@Html.TextBoxFor(m => m.Nights, new { @type = "range", min = 1, max = 60 }) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T14:27:35.003

很抱歉打扰大家 - 我正在把我的 heda 撞到墙上，然后尝试 \ 在引用中获取引用：

```
@Html.TextBoxFor(m => m.From, new { @type = "date", data_role = "datebox", data_options = "{\"mode\":\"datebox\"}"}) 
```

我原来的 Razor 标记的替换是：

```
 <li data-role="fieldcontain">
        @Html.LabelFor(m => m.From)
        @Html.TextBoxFor(m => m.From, new { @type = "date", data_role = "datebox", data_options = "{\"mode\":\"datebox\"}"})    
        @Html.ValidationMessageFor(m => m.From)    
    </li>

    <li data-role="fieldcontain">
        @Html.LabelFor(m => m.Nights)
        @Html.TextBoxFor(m => m.Nights, new { @type = "range", min = 1, max = 60 })            
        @Html.ValidationMessageFor(m => m.Nights)    
   </li> 
```

希望这对像我这样的其他人有用！

标记

# java - java中的多线程（两个线程广泛使用notify（）和wait（））

> ID：11779306
> 
> 赞同：0
> 
> 时间：2012-08-02T14:14:40.877
> 
> 标签：java, multithreading, notify

当我尝试运行以下程序时，在这段代码中第一次调用 notify() 时会出现 IllegalMonitorStateException：

```
synchronized (c) {
    try {
        notify();
        .... 
```

这让我有点不知所措：当对象（c）已经在同步块中时，代码怎么可能不对对象（c）进行锁定，检查相同的锁？

请不要介意过度使用 notify() 和 wait() 看起来有些奇怪。我知道有不同的（更有效的）实现可以执行相同的任务，但现在我正试图弄清楚为什么这个特定的实现不起作用。

完整代码如下：

```
 class J implements Runnable {

        public static void main(String[] x) {
            Calc calc = new Calc();
            J j = new J(calc);
            Thread t1 = new Thread(j, "one");
            Thread tCalc = new Thread(calc, "Calc");
            tCalc.start();
            t1.start();
        }
        Calc c;
        public J(Calc c) {
            this.c = c;
        }

        public void run() {
            synchronized (c) {
                try {
                    notify();
                    c.wait();
                } catch (InterruptedException e) {

                }
                System.out.println(Thread.currentThread().getName() + ": x = "
                        + c.getX());
                notify();
            }
        }
    }

    class Calc implements Runnable {

        private int x;

        public int getX() {
            return x;
        }

        public void run() {
            synchronized (this) {

                for (int x = 1; x <= 11111; x *= (x + x)) {
                    this.x += x;
                    try {
                        notify();
                        this.wait();
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    }
                }
                notify();
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T14:18:49.903

您正在尝试通知等待您当前未持有的不同锁的线程。错误是有道理的。您在对象 c 上有一个锁，然后您通知其他线程有关当前对象上的锁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T14:20:26.913

```
synchronized (c) {
    try {
        notify();
        .... 
```

您正在锁定对象`c`，但您正在通知对象`this`。始终明确指定您在哪个对象上是一个很好的`wait()`做法`notify()`。你应该做：

```
synchronized (c) {
    try {
        c.notify();
        .... 
```

或者：

```
synchronized (this) {
    try {
        this.notify();
        .... 
```

看起来您实际上是要处理 2 个锁。如果是这种情况，那么您将执行以下操作。

```
synchronized (c) {
    try {
        synchronized (this) {
            this.notify();
        }
        c.wait(); 
```

重要的是要确保始终`c`先锁定，`this`否则将死锁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T14:50:35.353

您所拥有的是执行以下操作的复杂方法。

```
ExecutorService printer = Executors.newSingleThreadExecutor();

int x2 = 0;
for (int x = 1; x <= 11111; x *= (x + x)) {
    x2 += x;
    final int x3 = x2;
    printer.submit(new Runnable() {
        @Override
        public void run() {
            System.out.println(Thread.currentThread().getName() + ": x = " + x3);
        }
    });
}
printer.shutdown(); 
```

如果您不尝试使用两个线程来做一些更快/更简单的事情，这将更加简单。

# c# - 如何在 FCK 编辑器中获取值？

> ID：11779308
> 
> 赞同：0
> 
> 时间：2012-08-02T14:14:47.643
> 
> 标签：c#, asp.net, sql, fckeditor

我对 FCK 编辑器有疑问。我想在 Fck 编辑器中获取一个值，编辑器在表单视图中，我无法使用*Find Control*来访问它。你可能会问伙计，你为什么要在 Fck 中获得价值？因为我正在尝试编写更新代码，而我的一个字段必须具有 FCK 编辑器。

我的意思是我可以使用*Find Control*来访问我的 FormView 中的文本框；

TextBox txt_my_text=(TextBox)FormView1.FindControl("TextBox1");

然后我可以使用它的值 cmd.Parameres.Add("@param",txt_my_text.Text);

但我想达到 Fck Editors 的价值，请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T10:06:49.770

您可以按照与任何其他服务器控件（例如文本框）相同的方式执行此操作。

```
FckEditor editor = new FckEditor(); //You need to create a new instance of the editor
var abcd = editor.Value; 
```

您所做的是创建 FckEditor 类的新实例。

也可能最好对 HtmlEncode 值进行编码：

```
var abcd = server.Htmlencode( editor.Value;) 
```

# android - Android 安全模式

> ID：11779310
> 
> 赞同：0
> 
> 时间：2012-08-02T14:14:51.223
> 
> 标签：android, security

我想创建一个自定义屏幕锁定（更准确地说是一种模式，例如在设置-> 安全-> 屏幕锁定然后选择模式中激活的模式）。我已经搜索了一段时间，没有发现任何关于它的信息，也不知道是否有可能。

是否可以？。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T22:35:58.877

是的，它可以创建一个锁定屏幕。Android 模式锁的源代码：[LockPatternUtils.java](https://android.googlesource.com/platform/frameworks/base/+/HEAD/core/java/com/android/internal/widget/LockPatternUtils.java)。最近讨论 LockPatternUtils.java 的一些问题：[如何生成用于散列用户 PIN/密码的盐值？](http://groups.google.com/group/android-security-discuss/browse_thread/thread/2eca2318d3daa56c). 讨论了在使用 EFS 时使用第三方锁定屏幕来减轻长密码要求（请参阅[完整的设备加密和过多的密码输入](http://groups.google.com/group/android-security-discuss/browse_thread/thread/1b8379a41adeca13)）。

[Android Security Discussions](http://groups.google.com/group/android-security-discuss)将是一个很好的地方，以不会让您投票失败的格式提出问题。Stack Overflow 不是“书籍推荐”、“实施推荐”和其他开放式问题的好地方，因为没有正确答案（而且您不能为正确答案打分）。

杰夫

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T14:35:04.373

你的问题非常模棱两可。

如果您想创建一个自定义锁定屏幕（这是我从“安全模式”假设的），那么您将需要创建一个应该有自己的锁定/解锁机制的自定义主屏幕应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T23:08:35.607

我使用具有极其安全密码的保险库应用程序，该密码使用操作员。它很容易记住，而且不可能破解。它不会锁定整个设备，但您可以将重要信息存储在保险库中。

它是免费的，绝对值得下载：[http ://www.itsmesecurity.com/its-me-mobile](http://www.itsmesecurity.com/its-me-mobile)

# c# - 测试 WebApi 控制器 Url.Link

> ID：11779311
> 
> 赞同：11
> 
> 时间：2012-08-02T14:14:55.143
> 
> 标签：c#, unit-testing, asp.net-web-api

我有以下控制器动作

```
public void Post(Dto model)
{
    using (var message = new MailMessage())
    {
        var link = Url.Link("ConfirmAccount", new { model.Id });

        message.To.Add(model.ToAddress);
        message.IsBodyHtml = true;
        message.Body = string.Format(@"<p>Click <a href=""{0}"">here</a> to complete your registration.<p><p>You may also copy and paste this link into your browser.</p><p>{0}</p>", link);

        MailClient.Send(message);
    }
} 
```

为了测试这一点，我需要设置控制器上下文

```
var httpConfiguration = new HttpConfiguration(new HttpRouteCollection { { "ConfirmAccount", new HttpRoute() } });
var httpRouteData = new HttpRouteData(httpConfiguration.Routes.First());
var httpRequestMessage = new HttpRequestMessage(HttpMethod.Post, "http://localhost");
sut = new TheController
{
    ControllerContext = new HttpControllerContext(httpConfiguration, httpRouteData, httpRequestMessage),
    MailClient = new SmtpClient { PickupDirectoryLocation = location }
}; 
```

这似乎需要很多设置来测试链接的创建。有没有更清洁的方法来做到这一点？我已经阅读了有关内存服务器的信息，但看起来它更适用于 httpclient，而不是直接测试控制器。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-09-16T14:07:16.310

我开始在 Web API 2.0 中使用这种方法。

如果你正在使用一个模拟库（你真的应该对任何真实世界的单元测试），你可以直接模拟`UrlHelper`对象，因为它上面的所有方法都是`virtual`.

```
var mock = new Mock<UrlHelper>();
mock.Setup(m => m.Link(It.IsAny<string>(), It.IsAny<object>())).Returns("test url");

var controller = new FooController {
    Url = mock.Object
}; 
```

这是一个比 Ben Foster 的答案更干净的解决方案，因为使用这种方法，您需要为您使用的每个名称添加路由到配置。这很容易改变或设置大量可笑的路线。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-11-23T22:03:07.377

`UrlHelper`以下是在没有任何类型的模拟库的情况下进行测试所需的绝对最少代码。让我（并花了我一些时间追查）的事情是您需要设置`IHttpRouteData`请求的。如果不这样做，`IHttpRoute`实例将无法生成虚拟路径，从而导致 URL 为空。

```
 public class FooController : ApiController
    {
        public string Get()
        {
            return Url.Link(RouteNames.DefaultRoute, new { controller = "foo", id = "10" });
        }
    }

    [TestFixture]
    public class FooControllerTests
    {
        FooController controller;

        [SetUp]
        public void SetUp()
        {
            var config = new HttpConfiguration();

            config.Routes.MapHttpRoute(
                name: "Default",
                routeTemplate: "api/{controller}/{id}",
                defaults: new { id = RouteParameter.Optional });

            var request = new HttpRequestMessage(HttpMethod.Get, "http://localhost");
            request.Properties[HttpPropertyKeys.HttpConfigurationKey] = config;
            request.Properties[HttpPropertyKeys.HttpRouteDataKey] = new HttpRouteData(new HttpRoute());

            controller = new FooController
            {
                Request = request
            };
        }

        [Test]
        public void Get_returns_link()
        {
            Assert.That(controller.Get(), Is.EqualTo("http://localhost/api/foo/10"));
        }
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-20T19:52:53.447

我遇到了同样的白痴。我能找到的所有参考资料都希望您模拟请求/控制器，这（正如您所指出的）需要做很多工作。

具体参考：

*   [http://aspnetwebstack.codeplex.com/discussions/358709/](http://aspnetwebstack.codeplex.com/discussions/358709/)
*   [http://www.peterprovost.org/blog/2012/06/16/unit-testing-asp-dot-net-web-api/#testing-the-harder-stuff-postproduct](http://www.peterprovost.org/blog/2012/06/16/unit-testing-asp-dot-net-web-api/#testing-the-harder-stuff-postproduct)
*   [ASP.NET MVC 控制器单元测试 - UrlHelper 扩展问题](https://stackoverflow.com/questions/5943730/asp-net-mvc-controller-unit-testing-problem-with-urlhelper-extension)
*   [ASP.NET MVC：使用 UrlHelper 的单元测试控制器](https://stackoverflow.com/questions/674458/asp-net-mvc-unit-testing-controllers-that-use-urlhelper)
*   *互联网的其余部分*

我还没有尝试实际的 Mocking 框架，所以我有一个帮助类来“构建”我的控制器。所以而不是

```
sut = new TheController { ... } 
```

我使用类似的东西：

```
// actually rolled together to `sut = MyTestSetup.GetController(method, url)`
sut = new TheController()...
MyTestSetup.FakeRequest(sut, HttpMethod.Whatever, "~/the/expected/url"); 
```

作为参考，方法基本上是：

```
public void FakeRequest(ApiController controller, HttpMethod method = null, string requestUrl = null, string controllerName = null) {
    HttpConfiguration config = new HttpConfiguration();
    // rebuild the expected request
    var request = new HttpRequestMessage( null == method ? this.requestMethod : method, string.IsNullOrWhiteSpace(requestUrl) ? this.requestUrl : requestUrl);
    //var route = System.Web.Routing.RouteTable.Routes["DefaultApi"];
    var route  = config.Routes.MapHttpRoute("DefaultApi", "api/{controller}/{id}");

    // TODO: get from application?  maybe like https://stackoverflow.com/a/5943810/1037948
    var routeData = new HttpRouteData(route, new HttpRouteValueDictionary { { "controller", string.IsNullOrWhiteSpace(controllerName) ? this.requestController : controllerName } });

    controller.ControllerContext = new HttpControllerContext(config, routeData, request);

    // attach fake request
    controller.Request = request;
    controller.Request.Properties[/* "MS_HttpConfiguration" */ HttpPropertyKeys.HttpConfigurationKey] = config;
} 
```

# c# - 获取 ListItem 的 ItemTemplate 内的值

> ID：11779313
> 
> 赞同：1
> 
> 时间：2012-08-02T14:14:58.430
> 
> 标签：c#, asp.net, listview, itemtemplate

我试图从我的控制`ItemTemplate`内部获取值。`ListView1`

```
<ItemTemplate>
    <asp:Label ID="Label1" runat="server" Text="test message" />
    <asp:RadioButtonList ID="RadioButtonList1" runat="server" 
        RepeatDirection="Horizontal">
            <asp:ListItem>1</asp:ListItem>
            <asp:ListItem>2</asp:ListItem>
            <asp:ListItem>3</asp:ListItem>
            <asp:ListItem>4</asp:ListItem>
        <asp:ListItem Value="5">
    </asp:ListItem>
    </asp:RadioButtonList>
</ItemTemplate>

protected void btnSubmit_Click(object sender, EventArgs e)
{   
    int score = 0;
        foreach (ListViewItem item in RadioButtonList1.Items)
        {
            ListViewDataItem theValue = RadioButtonList1.Items[0];
            RadioButtonList myValue = (RadioButtonList)theValue.FindControl("RadioButtonList1");

            score += int.Parse(myValue.SelectedItem.Value);
    }
    // display score
} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T15:18:50.343

更改了代码，因为它试图循环遍历 RBL 中的项目，然后才找到它：

```
 foreach (ListViewItem item in ListView.Items)
        {
            if (item.ItemType != ListViewItemType.DataItem)
                 continue;

            var rbl = (RadioButtonList)item.FindControl("RadioButtonList1");
            if (!string.IsNullOrEmpty(rbl.SelectedValue))
                 score += int.Parse(rbl.SelectedValue);
    } 
```

# javascript - 如何获取表中td对应th的Id

> ID：11779314
> 
> 赞同：3
> 
> 时间：2012-08-02T14:14:58.607
> 
> 标签：javascript, jquery

我有一个像

```
<table>
    <thead>
        <tr>
            <th id ="myid1">header1</th>
            <th id ="myid2">headre "2</th>
            <th id ="myid3">header3</th>
        </tr>
    </thead>
        <tr>
            <td>v1</td>
            <td>v2</td>
            <td>v3</td>
        </tr>
        <tr>
            <td>v10</td>
            <td>v11</td>
            <td>v12</td>        
        </tr>
        <tr>
            <td>v20</td>
            <td>v21</td>
            <td>v22</td>                    
        </tr>
        <tr>
            <td>v30</td>
            <td>v31</td>
            <td>v32</td>                    
        </tr>
</table> 
```

可以有上千行。

我需要获取该 perticulat td 所属的 td 的 id。

例如 。如果我单击第三行的第三个 td .. 我应该得到相应 th 的 id，这里是 myid3 （这里它是硬编码的，但它将根据服务器端的值设置）

```
$('tbody td').live('click', function() {
    var idOfTh = ??
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T14:22:17.927

```
$(function(){
    $('td').click(function() {
        alert($('table th').eq($(this).index()).attr('id'));
    });
}); 
```

工作 JSfiddle：http: [//jsfiddle.net/6etRb/](http://jsfiddle.net/6etRb/)

如果表行是动态添加的，您只需要使用实时委托，在这种情况下，您应该`.on()`按照其他人的描述使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T14:19:55.383

**以下答案是错误的，但我保留编辑，因为它可能对某人有所帮助**

```
$('tbody td').live('click', function() {
    var tdIndex = $(this).parent('tr').indexOf($(this));
    var idOfTh = $(this).parent('table').find('tr').eq(tdIndex);
}); 
```

未经测试，但理论上应该可以工作。

**更正**

正如下面的 Felix Kling 指出的那样，上述内容是不正确的。获取索引的正确方法是简单地调用`$(this).index()`. 我原以为这会`$(this)`在匹配的选择器中找到 的位置（在这种情况下，`<td>`在 中的every `<tbody>`），但实际上，如果你`index()`不给函数传递参数，它会找到**相对于它的兄弟姐妹**的索引。感谢 Felix 指出[相关文档](http://api.jquery.com/index/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T14:20:46.137

您可以使用`eq()`方法，尝试以下方法：

```
 $('tbody td').live('click', function() {
     var ind = $(this).index()
     var idOfTh = $('thead th:eq('+ind+')').attr('id')
 }); 
```

请注意，`live()`已弃用，您可以`on()`改用它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-02T14:22:11.223

首先，该`.live()`功能已被弃用。如果要委托事件，请使用`.on()`(jQuery 1.7+) 或`.delegate()`. 我将假设您正在使用`.on()`其余部分，但如果您必须使用`.delegate()`.

```
$(document).on('click', 'tbody td', function() {
    var tdIndex = $(this).index();
    // ^ gets the index of the clicked element relative to its siblings
    var thId = $('thead th:eq(' + tdIndex + ')')[0].id; 
    // ^ selects the th element in the same position in its row, then gets its id
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T14:26:11.140

这是您可以做到的一种方法：

```
$('td').click(function() {
   var colNum = $(this).parent().children().index($(this)) + 1;
   alert($('#myid' + colNum).text());    
});​ 
```

jsfiddle：http: [//jsfiddle.net/p8SWW/4/](http://jsfiddle.net/p8SWW/4/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-02T14:26:48.160

处理程序可能如下所示：

```
function() {
    var self = this
    var th_num = 0;

    $(this).parent().children().each(function(num){
        if (this == self) {
            th_num = num;
            return false
        }
    });

    var th_id = $('thead th').eq(th_num).attr('id');
} 
```

# python - python的matplotlib烛台中的鼠标悬停

> ID：11779315
> 
> 赞同：0
> 
> 时间：2012-08-02T14:15:01.823
> 
> 标签：python, events, matplotlib, finance

我已经实现了这个例子：

[http://matplotlib.sourceforge.net/examples/pylab_examples/finance_demo.html?highlight=candlestick](http://matplotlib.sourceforge.net/examples/pylab_examples/finance_demo.html?highlight=candlestick)

我想为烛台实现鼠标悬停功能，以便我可以在弹出窗口或某个面板中的标签中看到烛台的开盘/高/低/收盘。我跟着：

[http://matplotlib.sourceforge.net/examples/event_handling/pick_event_demo.html](http://matplotlib.sourceforge.net/examples/event_handling/pick_event_demo.html)

不幸的是，功能：

```
candlestick(ax, quotes, width=0.6) 
```

没有`picker=True`关键字。还有另一种实现鼠标悬停功能的方法吗？

matplotlib.finance 的文档 [http://doc.astro-wise.org/matplotlib.finance.html](http://doc.astro-wise.org/matplotlib.finance.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T20:59:52.580

我已经提供了一个答案，其中链接到一些有价值的信息。因为你想通过查看数据而不是艺术家来处理事情，所以我想我会给你更多的帮助。我所做的是采用 matplotlib 烛台示例，并添加了一个鼠标移动事件，该事件打印鼠标当前结束的日期，以及 3 个最近（及时）的股票。从这一点来看，只需将两个答案结合起来即可产生所需的结果：

```
#!/usr/bin/env python
import matplotlib.pyplot as plt
import pylab
from matplotlib.dates import  DateFormatter, WeekdayLocator, HourLocator, \
     DayLocator, MONDAY, num2date
from matplotlib.finance import quotes_historical_yahoo, candlestick,\
     plot_day_summary, candlestick2

# (Year, month, day) tuples suffice as aregs for quotes_historical_yahoo
date1 = ( 2004, 2, 1)
date2 = ( 2004, 4, 12 )

mondays = WeekdayLocator(MONDAY)        # major ticks on the mondays
alldays    = DayLocator()              # minor ticks on the days
weekFormatter = DateFormatter('%b %d')  # Eg, Jan 12
dayFormatter = DateFormatter('%d')      # Eg, 12

quotes = quotes_historical_yahoo('INTC', date1, date2)
if len(quotes) == 0:
    raise SystemExit

fig = plt.figure()
fig.subplots_adjust(bottom=0.2)
ax = fig.add_subplot(111)
ax.xaxis.set_major_locator(mondays)
ax.xaxis.set_minor_locator(alldays)
ax.xaxis.set_major_formatter(weekFormatter)

candlestick(ax, quotes, width=0.6)

ax.xaxis_date()
ax.autoscale_view()
plt.setp(ax.get_xticklabels(), rotation=45, horizontalalignment='right')

def on_move(event):
    ax = event.inaxes
    if ax is not None:
        # convert x y device coordinates to axes data coordinates
        date_ordinal, y = ax.transData.inverted().transform([event.x, event.y])

        # convert the numeric date into a datetime
        date = num2date(date_ordinal)

        # sort the quotes by their distance (in time) from the mouse position
        def sorter(quote):
            return abs(quote[0] - date_ordinal)
        quotes.sort(key=sorter)

        print 'on date %s the nearest 3 openings were %s at %s respectively' % \
                        (date, 
                         ', '.join([str(quote[1]) for quote in quotes[:3]]),
                         ', '.join([str(num2date(quote[0])) for quote in quotes[:3]]))

on_move_id = fig.canvas.mpl_connect('motion_notify_event', on_move)

plt.show() 
```

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T15:05:52.803

[我在这里](https://stackoverflow.com/questions/11537374/matplotlib-basemap-popup-box/11556140#11556140)写了一个处理“鼠标悬停”事件的答案。这将是一个很好的第一个呼叫点，以了解如何做类似的事情。

# maven - 如何发布带有分类器的多模块项目？

> ID：11779319
> 
> 赞同：2
> 
> 时间：2012-08-02T14:15:06.337
> 
> 标签：maven, release, maven-release-plugin

如果其中一个子模块有分类器，你如何发布一个 Maven 多模块项目？

鉴于此用例：

*   多模块项目：*EAR、WAR、interface-jar、extension-AA-jar、extension-BB-jar、utility-jar*
*   所有的 JAR 都必须只构建一次（或至少只部署一次到存储库，因为禁止部署具有相同版本的相同工件）
*   必须为两种不同的设置构建 WAR，一次使用 extension-AA-jar，一次使用 extension-BB-jar
*   只有单个*extension-XX-jar*使这两个版本有所不同
*   我想通过分类器区分存储库中的两个最终工件 (AA|BB)
*   还应该有两个 EAR，只包含一个 WAR（也由相同的分类器标识）
*   我不想要两个 WAR/EAR 的额外项目，因为内容将 100% 相同。

所以目标是在最后的存储库中包含以下内容（在两次发布：准备，发布：执行之后）：

> *   EAR-1-AA.ear
> *   EAR-1-BB.ear
> *   WAR-1-AA.war
> *   WAR-1-BB.war
> *   interface-1.jar
> *   extension-1-AA.jar
> *   extension-1-BB.jar
> *   实用程序 1.jar

关于如何进行发布构建有很多解释，也有如何使用分类器的示例 - 但分类器似乎从未在多模块设置中使用。

注意：第一个版本通常不会成为问题，因为尚未部署新版本的工件。但是为第二个分类器发布会破坏整个事情，因为 maven 会尝试使用相同的版本再次构建和部署 jars，并且存储库将（希望）不允许它。这对于 WAR 和 EAR 来说不是问题，因为考虑到分类器以唯一标识工件

还是分类器真的只适用于单模块项目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T14:44:10.600

这对 Maven 来说非常棘手。您可以在 maven 生命周期的 package 阶段尝试多次执行 maven-[jar/war/ear]-plugins。在每次执行中，您可以设置不同的分类器。

此外，在执行 maven-war-plugin 时，您可以使用 an`<overlay>`将具有正确分类器的扩展名放入 WAR 文件中。在 maven-ear-plugin 的执行中，您可以将具有正确分类器的 WAR 文件指定为`<webModule>`.

**例子**

在扩展模块中，您可以像这样配置 maven-jar-plugin：

```
<build>
  <plugins>
    <plugin>
      <groupId>org.apache.maven.plugins</groupId>
      <artifactId>maven-jar-plugin</artifactId>
      <executions>
        <execution>
          <id>extension-AA</id>
          <phase>package</phase>
          <goals>jar</goals>
          <configuration>
            <classifier>AA</classifier>
          </configuration>
        </execution>
        <execution>
          <id>extension-BB</id>
          <phase>package</phase>
          <goals>jar</goals>
          <configuration>
            <classifier>BB</classifier>
          </configuration>
        </execution>
      </executions>
    </plugin>
  </plugins>
  ...
</build> 
```

WAR 模块的配置非常相似：

```
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-war-plugin</artifactId>
  <executions>
    <execution>
      <id>extension-AA</id>
      <phase>package</phase>
      <goals>
        <goal>war</goal>
      </goals>
      <configuration>
        <overlays>
          <overlay>
            <groupId>com.example</groupId>
            <artifactId>extension-1</artifactId>
            <classifier>AA</classifier>
          </overlay>
        </overlays>
      </configuration>
    </execution>
    <execution>
      <id>extension-BB</id>
      <phase>package</phase>
      <goals>
        <goal>war</goal>
      </goals>
      <configuration>
        <overlays>
          <overlay>
            <groupId>com.example</groupId>
            <artifactId>extension-1</artifactId>
            <classifier>BB</classifier>
          </overlay>
        </overlays>
      </configuration>
    </execution>
  </executions>
</plugin> 
```

最后是EAR模块的配置：

```
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-ear-plugin</artifactId>
  <executions>
    <execution>
      <id>extension-AA</id>
      <phase>package</phase>
      <goals>
        <goal>ear</goal>
      </goals>
      <configuration>
        <classifier>AA</classifier>
        <modules>
          <webModule>
            <groupId>com.example</groupId>
            <artifactId>war-1</artifactId>
            <classifier>AA</classifier>
          </webModule>
        </modules>
      </configuration>
    </execution>
    <execution>
      <id>extension-BB</id>
      <phase>package</phase>
      <goals>
        <goal>ear</goal>
      </goals>
      <configuration>
        <classifier>BB</classifier>
        <modules>
          <webModule>
            <groupId>com.example</groupId>
            <artifactId>war-1</artifactId>
            <classifier>BB</classifier>
          </webModule>
        </modules>
      </configuration>
    </execution>
  </executions>
</plugin> 
```

# wix - 如何在 wix 中创建类似控件的列表？

> ID：11779321
> 
> 赞同：0
> 
> 时间：2012-08-02T14:15:12.853
> 
> 标签：wix

基于类似的值列表`[A, Another, AThird]`，我想显示类似控制元素的列表，例如

```
<control id="1">  
<text SourceFile="AFile.rtf"/>  
<Condition Action="hide"><![CDATA[SelectedMessage <> "A"]]></Condition>  
</control>
<control id="2">
<text SourceFile="AnotherFile.rtf"/>
<Condition Action="hide"><![CDATA[SelectedMessage <> "Another"]]></Condition>
</control>
<control id="3">
<text SourceFile="AThirdFile.rtf"/>
<Condition Action="hide"><![CDATA[SelectedMessage <> "AThird"]]></Condition>
</control> 
```

有没有办法做到这一点？我可以用 heat.exe 生成它吗？是否有允许我呈现重复内容的控制表单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T16:25:09.530

wix 功能树 UI 是您正在寻找的吗？您是否尝试将这些文件显示给用户进行安装？

# jira - 如何找到与已解决问题相关的所有工单的列表？

> ID：11779323
> 
> 赞同：2
> 
> 时间：2012-08-02T14:15:19.380
> 
> 标签：jira, jql

我使用 Jira 作为测试用例管理系统，每个单独的测试用例都表示为 Test 项目下的一张票。我有一些测试用例票被链接为“被阻止”以在另一个 Jira 项目中发出票证。其中一些问题已经得到解决。是否可以使用高级搜索查询来提取与已解决问题相关的所有测试票？

使用 Atlassian 托管的 Jira OnDemand。我对涉及浏览器自动化、Excel 等的创造性解决方案持开放态度。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T15:33:22.067

实际上，您可以使用 JIRA 4.0 中引入的linkedissues() 功能使用 JQL[本地执行其中的一些操作：](https://confluence.atlassian.com/display/JIRA/Advanced+Searching#AdvancedSearching-linkedIssues)

> **查找与特定问题相关的问题：**
> 
> `issue in linkedIssues(ABC-123)`
> 
> **通过特定类型的链接查找与特定问题相关的问题：**
> 
> `issue in linkedIssues(ABC-123,"is duplicated by")`

不幸的是，您真正需要的功能（使用某种类型的链接查询所有问题的能力）仅由名为[JQL Tricks Plugin](https://marketplace.atlassian.com/plugins/com.j-tricks%3ajql-plugin)的插件处理（您无法将其安装到托管的 JIRA 实例中）。抱歉，我没有适合您的浏览器自动化或 Excel 解决方案。

# java - 在 Ubuntu 中为 Chrome 安装 Java 插件

> ID：11779325
> 
> 赞同：17
> 
> 时间：2012-08-02T14:15:24.647
> 
> 标签：java, google-chrome, ubuntu

我确实有 JDK，在 Ubuntu 中一切正常，我的意思是 IDE，一些应用程序，我能够开发和运行项目，但我在 Chrome 中收到一条消息：`Java(TM) is required to display this content`

我需要运行这个小程序。我怎么做？由于此处安装了 GWT 插件，我需要在 Chrome 中运行它。我应该在脚本中添加一些参数来运行它吗？还是有其他方法？我看到了建议在 Windows 和 Mac 上为 Chrome 安装 Java 插件的链接，但不是在 Linux 上。预先感谢。

我做了一个指向`/usr/lib/jvm/java-7-openjdk-amd64/jre/lib/amd64/libnpt.so`in的链接`/opt/google/chrome/plugins`，但没有帮助（好吧，它不是`libnpjp2.so`，推荐用于这种情况，但它是我在那里看到的最接近的）。

**更新**：我`libnpjp2.so`在我的机器上发现，以下命令有帮助：`sudo ln -s /usr/lib/jvm/jdk1.7.0_03/jre/lib/amd64/libnpjp2.so /opt/google/chrome/plugins/`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-16T02:32:51.720

当前的 Chrome 版本不需要更多此选项。

要为浏览器安装[java 插件](https://help.ubuntu.com/community/Java)，如果您使用的是打包的 java，请根据您的 java 版本安装以下软件包之一：

```
sudo apt-get install icedtea6-plugin 
```

或者

```
sudo apt-get install icedtea-7-plugin 
```

要检查您的版本，请打开终端（命令行）并输入：

```
java -version 
```

Java 1.6 将需要`icedtea6-plugin`Java 1.7 `icedtea-7-plugin`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-11T13:09:12.560

我找到的最佳解决方案（这些建议都不适合我）如下：首先安装 Icedtead 插件：

1.  sudo apt-get install icedtea-7-plugin

然后在您的 chrome 浏览器中转到：

1.  chrome-> Settings-> Show Advanced Settings-> Privacy 然后点击 Content Settings -> Plug-ins 然后点击 Disable Individual Plug-in
2.  禁用“IceTea-Web 插件”和“Java(TM)”
3.  重新启动浏览器。
4.  chrome-> Settings-> Show Advanced Settings-> Privacy 然后点击 Content Settings -> Plug-ins 然后点击 Disable Individual Plug-in
5.  仅启用“IceTea-Web 插件”
6.  享受 ！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-22T12:22:19.817

在 Ubuntu 13.04 x64 上，

```
sudo apt-get install icedtea-7-plugin 
```

工作得很好。谢谢你。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-09T07:31:33.747

[由于 chrome 停止支持http://en.wikipedia.org/wiki/NPAPI](http://en.wikipedia.org/wiki/NPAPI)插件，因此无法运行 java插件

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-02T14:26:05.960

从上一个[问题](https://superuser.com/questions/44827/how-do-i-get-java-support-on-google-chrome-in-linux)：

> 是的，将 --enable-plugins 添加到您的 chrome 命令中。它目前不被认为是稳定的，但它对我有用。
> 
> 实际上，没有它似乎就可以工作。你试过了吗？你可以在这里找到一个测试小程序。大概您需要安装 Sun 的 Java。

**更新：**有关更多详细信息，请参阅链接。很多有用的答案。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-22T19:15:47.097

仍然适用于 Opera 12.16 和 Ubuntu 14.04，但需要安装两个 Icedtea 才能使小程序正常工作

```
sudo apt-get install icedtea-7-plugin icedtea-6-plugin 
```

# sql-server - 在同一台服务器上运行多个 Microsoft Master Data Services 实例

> ID：11779326
> 
> 赞同：1
> 
> 时间：2012-08-02T14:15:30.520
> 
> 标签：sql-server, master-data-services

我有一个带有 MDS 的 MS SQL Server 2012 实例。MDS 实例用作生产环境。

现在，当然，我想为 MDS 提供一个开发/测试环境。目前我只有一台服务器和一个运行 SQL Server 2012 的实例，如果可能的话，在这个 SQL Server 实例上设置一个新的 MDS 实例就足够了。你有这样做的经验吗？

还是在另一台服务器上安装测试 MDS 环境更好？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T03:42:51.280

是的，您可以在单个 SQL Server 安装中运行任意数量的 MDS 实例。唯一的要求是每个 MDS 实例都有自己的数据库。您可以：

1.  使用 MDS 配置工具创建一个新数据库，然后使用模型部署工具来引入您的模型。更多信息在这里：http: [//msdn.microsoft.com/en-us/library/ff486956.aspx](http://msdn.microsoft.com/en-us/library/ff486956.aspx)。

2.  按照上面 user1407800 的建议，备份和恢复生产数据库。但是，如果您确实使用备份/恢复方法，请确保在配置工具中至少选择一次数据库，以便它可以验证恢复的数据库一切正常并修复任何问题。

一旦您有了数据库，您就可以使用 MDS 配置管理器创建一个在其上运行的新 Web 应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T07:10:59.487

我备份 -> 恢复了 MDS 数据库并使用 MDS 配置管理器来设置其余部分。工作完美。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-18T09:14:15.937

执行 deployclone 而不是 deploynew 非常重要。如果您执行 deploynew，您以后将无法将模型更改从 dev 推送到 test/prod。

[http://msdn.microsoft.com/en-us/library/hh479646.aspx](http://msdn.microsoft.com/en-us/library/hh479646.aspx)

# ruby - Ruby 中的实例变量

> ID：11779333
> 
> 赞同：0
> 
> 时间：2012-08-02T14:15:52.507
> 
> 标签：ruby

红宝石 1.9

我突然意识到我不明白如何在 Ruby 中定义和初始化实例变量。它**只能在**某个特定的范围内使用`class`，并且根本无法从类中访问，因此`attr_accessor`或者`attr_reader`不是我需要的。

```
class MyClass

  #how do I initialize it?
  @my_var = 'some value'

  def method1
    #I need to do something with @my_var
    puts @my_var
  end
  def method2
    #I need to do something with @my_var
    puts @my_var
  end
end

a = MyClass.new
a.method1 #empty 
a.method2 #empty 
```

所以我发现还有另一种方法可以做到

```
class MyClass

  #is this the only way to do it?
  def initialize
    @my_var = 555
  end

  def method1
    #I need to do something with @my_var
    puts @my_var
  end

  def method2
    #I need to do something with @my_var
    puts @my_var
  end
end

a = MyClass.new
a.method1 #555; it's ok
a.method2 #555; it's ok 
```

那么，第二种方法是正确的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T14:18:24.847

每个类都有一个`initialize()`类似于其他语言中的构造函数的方法，实例变量应该在那里初始化：

```
class MyClass

  def initialize
     @my_var = 'some value'
  end

  # etc...
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T14:25:52.803

是的，`initialize`是正确的方法。

但你也可以：

```
class MyClass

  def method1
    #I need to do something with @my_var
    puts @my_var ||= 555
  end

  def method2=(x)
    #I need to do something with @my_var
    puts @my_var = x
  end
end

#Test:
x = MyClass.new
x.method1      #555
x.method2= 44  #44
x.method1      #44 
```

第一次调用时`method1`，它会初始化变量。

**编辑：** 当您分配时，它不能按预期工作`nil`

```
x = MyClass.new
x.method1         #555
x.method2= nil   #nil
x.method1          #again 555 
```

这个版本效果更好：

```
class MyClass

  def method1
    @my_var = 555 unless defined? @my_var
    puts @my_var 
  end

  def method2=(x)
    puts @my_var = x
  end
end

x = MyClass.new
x.method1         #555
x.method2= nil   #nil
x.method1          #keeps nil 
```

# objective-c - 可扩展的聊天气泡 UITableViewCell iOS

> ID：11779335
> 
> 赞同：3
> 
> 时间：2012-08-02T14:15:56.447
> 
> 标签：objective-c, ios, ipad, imessage

我目前有一个具有消息传递功能的应用程序。它允许用户互相聊天。目前消息是自下而上出现的（我可以通过旋转表格和单元格来实现这一点）。现在为了区分发送者和接收者，我使用不同颜色的文本。

我想使用气泡图像作为消息的背景，以使应用看起来更像 iMessage。我知道可以调整图像大小，但我无法理解这一点。我需要一种特殊的图像吗？如果是这样，我如何调整该图像的大小以使其适合文本，然后将其放置为背景？

在此先感谢您的帮助。

-EDIT- 我用来生成带有气泡的单元格的代码：

```
[self.textLabel setFont:[UIFont fontWithName:@"Helvetica" size:20]];
[self.textLabel setNumberOfLines:0];
CGSize size = [message.message sizeWithFont:self.textLabel.font];

    [self.textLabel setFrame:CGRectMake(690.0f - (size.width + 5.0f), 8.0f, size.width + 5.0f, size.height)];
    UIImage *bubble = [[UIImage imageNamed:@"aqua.png"] stretchableImageWithLeftCapWidth:24 topCapHeight:15];
    UIImageView *bubbleView = [[UIImageView alloc] initWithFrame:CGRectMake(704 - (size.width + 25.0f), 2.0f, size.width + 25.0f, size.height + 15.0f)];
    bubbleView.image = bubble;
    self.backgroundColor = [UIColor clearColor];
    self.opaque = NO;
    self.backgroundView = bubbleView; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-10-02T18:14:14.790

我使用 4 个 UIView 创建了一个类似气泡的 iMessage。它在代码和 XIB (UITableViewCell) 中都可用。它是高度可定制的。您可以更改颜色、字体、字体大小、尾部或无尾部等。请在此处查看

[https://github.com/kerrygrover/iMessageBubble](https://github.com/kerrygrover/iMessageBubble)

[![在此处输入图像描述](../Images/d6de6fd907e4dabe2b5353c8de9712d6.png)](https://i.stack.imgur.com/V9nhO.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T14:58:13.107

有几种方法可以实现这样的功能。可能最简单的解决方案是
[`-resizableImageWithCapInsets:`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIImage_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006890-CH3-SW50)使用`UIImage`. 您可以为每个聊天消息创建一个表格视图单元格，并在背景上绘制此图像并使图像在帽插入点处拉伸。

在 tableView 委托方法[`-tableView:heightForRowAtIndexPath:`](http://developer.apple.com/library/ios/documentation/uikit/reference/UITableViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UITableViewDelegate/tableView%3aheightForRowAtIndexPath%3a)中，您可以设置单元格的高度，利用该`NSString`方法
[`-sizeWithFont:constrainedToSize:lineBreakMode:`](http://developer.apple.com/library/ios/documentation/uikit/reference/NSString_UIKit_Additions/Reference/Reference.html#//apple_ref/occ/instm/NSString/sizeWithFont%3aconstrainedToSize%3alineBreakMode%3a)计算单元格内容（实际聊天消息）的正确高度。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-02T14:28:45.807

将 a 添加`UIImageView`到您用来显示文本的任何对象。然后只需将其`image`属性设置为您想要的任何图像；`UIImageView`将为您自动调整大小。

[UIImageView 类参考](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIImageView_Class/Reference/Reference.html)

# facebook - 使用 wordpress 作为 cms 时的 Facebook 权限认证

> ID：11779337
> 
> 赞同：1
> 
> 时间：2012-08-02T14:16:02.143
> 
> 标签：facebook, wordpress, permissions, scope

我有一个似乎没有简单答案的问题，所以如果你能指出我正确的方向......

我们有一个想法，使用 Wordpress 网络作为简单的 facebook 应用程序分发/CMS 系统的一种手段，到目前为止，基本集成正在工作......这就是问题所在，因为我们似乎无法验证用户身份（通过 facebook 和范围）以获取基本信息，例如 FB ID、名称等...当您在 FB Canvas 中自己制作 FB 应用程序时可以。

就像您使用任何想要您的基本信息的 Facebook 应用程序一样，它会询问您的许可（范围？）

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T18:06:11.127

确保通过在您尝试进行身份验证的任何页面上包含 sdk 来正确实例化 Facebook 对象。如果您尝试仅将其包含在 Wordpress 主题的 header.php 文件中并引用任何其他主题文件（single.php、category.php）中的变量，则由于 get_header(); 它将无法工作；作为一个函数，而不是一个包含。除非在每个页面上加载了 sdk，否则 Facebook 变量（例如 $user）不会继续存在。

我在结合 wordpress 和 Facebook PHP SDK 时遇到了类似的问题，这是我找到的解决方案。

我还建议在单独的文件中实例化 Facebook 对象，然后将其包含在内，而不是将所有 sdk 代码放在每个模板文件的顶部。希望这可以帮助。

# android - 查看所有活动的操作栏 - Android

> ID：11779340
> 
> 赞同：7
> 
> 时间：2012-08-02T14:16:05.963
> 
> 标签：android

在我的主要活动中，我有我的操作栏。即使我启动了一项新活动，这如何保持可见？

新活动是否必须扩展我的主要活动才能正常工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T14:25:10.830

如果您声明该`onCreateOptionMenu`方法，也就是您将元素放入操作栏中的方法，在您的主要活动 (A) 中，所有其他扩展 A 而不重新声明该方法的活动将具有与 A 相同的操作栏。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-09-18T13:19:52.143

Android 菜单选项为用户提供操作和其他选项以从屏幕的操作栏中进行选择。其中一些操作对于您的应用程序的所有活动都是通用的，因此您可以创建一个扩展 Activity 类并执行所有菜单处理的 BaseActivity，而不是在每个活动中创建它们。然后，您可以在应用程序活动中扩展基础活动类以获得相同的菜单选项。

```
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class MainActivity extends BaseActivity implements OnClickListener{

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Button nextActivity = (Button) findViewById(R.id.nextActivity);
        nextActivity.setOnClickListener(this);

    }
} 
```

这是 BaseActivity 类

```
import android.app.Activity;
import android.view.Menu;
import android.view.MenuItem;
import android.widget.Toast;

public class BaseActivity extends Activity{

 @Override
 public boolean onCreateOptionsMenu(Menu menu) {
  getMenuInflater().inflate(R.menu.common_menu, menu);
  return true;
 }

 @Override
 public boolean onOptionsItemSelected(MenuItem item) {

  switch (item.getItemId()) {

  // Do Code Here 

  default:
   return super.onOptionsItemSelected(item);
  }

 }

} 
```

我希望它对你有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T14:28:19.633

您可以使用我在此处描述的相同实现模式（继承/组合）

[整个应用程序中的全局“搜索功能”](https://stackoverflow.com/questions/11592552/global-search-function-in-whole-app/11592568#11592568)

用于搜索功能。**只需使用onCreateOptionMenu**方法执行我在此处描述的操作，即可为所有活动使用相同的内容，而无需在每个活动中编写相同无聊的三行代码。

# ios - 在滚动视图中自动调整自定义视图的大小

> ID：11779344
> 
> 赞同：0
> 
> 时间：2012-08-02T14:16:20.963
> 
> 标签：ios, uiview, autoresizingmask

我创建了一个从 xib 文件加载的自定义视图，如下所示：

```
- (id)initWithFrame:(CGRect)frame {
  self = [super initWithFrame:frame];
  if (self) {
    // Initialization code.
    [[NSBundle mainBundle] loadNibNamed:@"TachoView" owner:self options:nil];
    [self addSubview:self.view];
    [self initUi];
  }
  return self;
} 
```

当设备方向发生变化时，我现在遇到一些子视图的自动调整大小和定位问题。这些屏幕截图描述了行为。

viewDidLoad 之后一切看起来都很好：

![在此处输入图像描述](../Images/9bb0707569b124ae158f8ced6063c697.png)

旋转到横向模式后，布局仍然很好：

![在此处输入图像描述](../Images/c24079453866f7db308295480d519535.png)

但是当旋转回纵向时，它看起来像这样：

![在此处输入图像描述](../Images/0da92caffb4c3d7069f96f494a696027.png)

如果我在单视图虚拟项目中测试它们，相同的文件 .h、.m 和 .xib 可以正常工作。所以我认为，在xib中定位和调整大小的设置是可以的。我的应用程序的不同之处在于，该视图位于具有其他几个视图的滚动视图上。在方向更改时，我会更改所有这些视图的大小，以便按预期布局所有内容。相关代码是最里面的for循环：

```
-(void) viewWillLayoutSubviews {
    float h = self.view.frame.size.height;
    float w = self.view.frame.size.width;

    // set the size of the vertical scrollview
    verticalView.frame = CGRectMake(0, 0, w, h * gridHeight);
    verticalScrollView.frame = CGRectMake(0, 0, w, h);
    [verticalScrollView setContentSize:CGSizeMake(w, h * gridHeight)];
    [verticalScrollView layoutIfNeeded];

    // set the size of the horizontal scrollviews
    for (int i=0; i<verticalView.subviews.count; i++) {
        UIScrollView *scrollView = (UIScrollView *) [verticalView.subviews objectAtIndex:i];
        UIView *container = (UIView *) [[scrollView subviews] objectAtIndex:0];
        int subviewCount = container.subviews.count;
        scrollView.frame = CGRectMake(0, h*i, w, h);
        [scrollView setContentSize:CGSizeMake(w * subviewCount, h)];
        container.frame = CGRectMake(0, 0, w * subviewCount, h);

        // set the size of the actual views
        for (int j=0; j<container.subviews.count; j++) {
            UIView *view = [container.subviews objectAtIndex:j];
            // FIXME manchmal crashed hier die WebView. Muss das hier im
            // ui thread ausgeführt werden? wird diese methode nicht vom
            // ui thread aufgerufen?
            view.frame = CGRectMake(w*j, 0, w, h);
        }
    }
} 
```

任何想法，第二个方向改变出了什么问题？我可以手动布局整个视图，但我认为自动调整大小功能也可以。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:26:54.863

确保 UIViewAutoresizingMask 设置如下

1) Liegezeiten 标签是flexibleWidth

2) Wert in % 标签只需要有flexibleTopMargin,flexibleWidth 和flexibleRightMargin

3）下面的数字标签（64、40、20）：

*   64 应该有flexibleTopMargin、flexibleWidth 和flexibleRightMargin
*   40 应该有flexibleTopMargin、flexibleWidth、flexibleRightMargin、flexibleLeftMargin
*   20 应该有flexibleTopMargin、flexibleWidth、flexibleLeftMargin

# javascript - 遍历 DIVS 以轮播样式显示/隐藏它们

> ID：11779347
> 
> 赞同：1
> 
> 时间：2012-08-02T14:16:28.990
> 
> 标签：javascript, jquery

我有以下 HTML - [http://jsfiddle.net/X763j/](http://jsfiddle.net/X763j/)

我想要做的是循环遍历它们，以一种无限滑块的方式一次显示一个。

JavaScript 不是我的强项，但据我了解，您可以使用 jQuery .toggle 函数。

我该怎么做才能让它只显示下一个。

如果有人能指出我正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T14:36:37.160

你可以用jQuery来做到这一点。隐藏`:visible`一个并显示`.next()`一个。一旦你走到尽头，下一个就是那个`:first`。

```
function next() {
    var current = $("#slider .slide:visible");
    current.hide();
    var next = current.next(".slide");
    if(next.length == 0)
        next = current.siblings().filter(":first")
    console.log(next);
    next.show();
}

setInterval(next, 1000);​ 
```

[演示](http://jsfiddle.net/X763j/2/)

您可以查看[jQuery 文档](http://docs.jquery.com/Main_Page)以获取有关我使用的所有函数和选择器的更多信息。

你也应该看看许多[jQuery Carousel](http://www.pixelzdesign.com/blog_view.php?id=55)插件之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T14:36:57.250

使用 setInterval，您可以调用一个为您处理滑块的函数，就像这样。

```
setInterval(slide, 4000); // Set interval, callback function, and how often to swap slide

function slide() {
$('div.active').removeClass('active').fadeOut(500, function() {
    if($(this).next('div.slide').length) {
        $(this).next('div.slide').addClass('active').fadeIn(500);
    } else {
        $('div.slide').eq(0).addClass('active').fadeIn(500);
    }

});
}​ 
```

一个jsfiddle：http: [//jsfiddle.net/X763j/3/](http://jsfiddle.net/X763j/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T14:41:08.283

这是另一个仅循环幻灯片的代码示例。请注意，这不是优化的。

```
$(document).ready(function() {
    var i = 0;
    var slides = $('.slide');  
    var currentSlide = slides.first();        
    slides.each(function(index, value) { //Hide the all the slides
        $(value).hide();
    });

    currentSlide.show() //Show the first

    setInterval(function() { //Interval that loops.
          i++;
          if (i + 1 > slides.length) i = 0;
          currentSlide.hide();
          currentSlide = slides.eq(i);
          currentSlide.show();      
    }, 3000);
});​ 
```

# javascript - 您如何称呼 Oracle 使用的顶部导航菜单？

> ID：11779349
> 
> 赞同：0
> 
> 时间：2012-08-02T14:16:39.620
> 
> 标签：javascript, jquery, html, css, navigation

[Oracle](http://www.oracle.com/index.html)使用的顶部导航菜单以有组织的方式显示了许多链接。我需要复制这个功能。所以，我想搜索它，但我不知道这种类型的菜单系统叫什么。

如果你能告诉我名字或更好的例子，我可以用来复制这个菜单，那就更好了。

javascript 或 jQuery 解决方案是可以接受的。需要能够支持 IE，***最好***不使用 HTC 文件，但 HTC 文件是可以的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T14:21:24.237

这个 css3 巨型菜单栏可能对您有用。这是浏览器交叉

[http://themes.pixelworkshop.fr/?theme=CSS3MegaMenu](http://themes.pixelworkshop.fr/?theme=CSS3MegaMenu)

只需要css硬编码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T14:38:05.243

那将是超级菜单或超级菜单。

您可以使用[PrimeFaces](http://www.primefaces.org/showcase-labs/ui/megaMenu.jsf)之类的 Java facelets或通过[此列表](http://en.wikipedia.org/wiki/List_of_JavaScript_libraries)或 Java Script Frameworks 来帮助您使用 javascript 来获得它。

# excel - Workbook_Open MsgBox 弹出窗口，其中包含前一天的单元格更改列表

> ID：11779352
> 
> 赞同：0
> 
> 时间：2012-08-02T14:16:44.803
> 
> 标签：excel, vba

我正在使用一系列绘图包创建此工作表（我是一名工程师）。我希望我的用户能够在他们启动 excel 应用程序时看到我在前一天修改过的绘图包列表。我想要一个显示该列表的弹出消息框。所以我做了一些研究，我知道我需要设置一个更改检测宏（以检测我已更改的单元格）和一个带有消息框的 workbook_open，其中包含前一天修改的单元格列表。

我不知道如何使用 msgbox 代码行插入单元格值，或者如何设置整个事情。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T16:30:13.260

我同意 Siddharth - 最简单的方法可能是使用缓冲区工作表。

您可以每天创建缓冲区，然后在打开工作簿时将输入的数据与缓冲区进行比较。然后创建一个更新的缓冲区。

这将起作用；虽然它不是使用消息框，而是突出显示 sheet1 和列 A 中上次打开时更改的单元格 - 我个人更喜欢突出显示单元格 - 但如果你对不应该的消息框心存感激难度不大：

```
Sub Auto_Open()

ClearSheet1Formatting

CompareValuesBetweenTwoWorksheets

MsgBox "Hi, thanks for opening me Dora. The cells that are highlighted were changed on last open."

UpdateBufferSheet

End Sub

Sub CompareValuesBetweenTwoWorksheets()

Dim s1 As Worksheet
Dim s2 As Worksheet
Dim j As Long
Dim jj As Long
Dim CheckColumn As Integer
CheckColumn = 1
Set s1 = Sheet1
Set s2 = Sheet2
j = s1.Cells(Rows.Count, CheckColumn).End(xlUp).Row
For jj = 1 To j
    If s1.Cells(jj, CheckColumn).Value <> s2.Cells(jj, CheckColumn).Value Then
        s1.Cells(jj, CheckColumn).Interior.Color = vbYellow
    End If
Next

End Sub

Sub UpdateBufferSheet()

Application.CutCopyMode = True

    Sheets("Sheet1").Select
    Cells.Select
    Selection.Copy
    Sheets("Sheet2").Select
    Cells.Select
    ActiveSheet.Paste
    Sheets("Sheet1").Select
    Range("A1").Select

Application.CutCopyMode = False

End Sub

Sub ClearSheet1Formatting()

    Sheets("Sheet1").Select
    Cells.Select
    With Selection.Interior
        .Pattern = xlNone
        .TintAndShade = 0
        .PatternTintAndShade = 0
    End With
    Range("A1").Select

End Sub 
```

我对此进行了简化并使子名称更好。

# php - php 检查是否声明了动态生成的变量

> ID：11779357
> 
> 赞同：-1
> 
> 时间：2012-08-02T14:16:57.790
> 
> 标签：php, regex, associative-array

我有类似的数组

```
array(
    "v"=>1,
    "u"=>8,
    "v1"=>45,
    "v123"=>12
); 
```

在我的程序中，我需要检查数组是否包含一个元素，其键以 v 开头，后跟数字。我的数组非常大，所以我不喜欢迭代。有没有其他有效的方法来做到这一点。我期望类似isset(arr[正则表达式]);

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T14:27:36.687

一个可能有效的肮脏技巧是：

1.  用于`array_keys()`获取所有密钥
2.  内爆生成的数组键
3.  对该结果字符串执行 REGEX。

```
$data   = array(
    "v"     =>1,
    "u"     =>8,
    "v1"    =>45,
    "v123"  =>12
);

$keys   = array_keys($data);

$key_string = implode(',', $keys);

$matches    = array();
preg_match('/^v[0-9]{0,}$/', $key_string, $matches); 
```

或，缩短

```
$matches    = array();
preg_match('/^v[0-9]{0,}$/', implode(',', array_keys($data)), $matches); 
```

我不确定使用`array_keys`&会对性能产生多大影响`implode`，但它应该适合你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T14:37:49.110

您可以使用 array_filter (http://php.net/manual/en/function.array-filter.php)

首先创建一个回调函数：

```
function getKeys($n){
 return preg_match('/^v[0-9]+$/', $n);
} 
```

然后运行 ​​array_filter：

```
$arr = array(
    "v"=>1,
    "u"=>8,
    "v1"=>45,
    "v123"=>12
);

$newArr = array_filter(array_keys($arr), "getKeys"); 
```

您可以使用正确的 array_keys 查看结果：

```
print_r($newArr); 
```

如果你有结果，这个陈述应该是真的：

```
echo count($newArr) > 0; 
```

# c++ - static const vs. #define in c++ - differences in executable size

> ID：11779361
> 
> 赞同：10
> 
> 时间：2012-08-02T14:17:07.510
> 
> 标签：c++, constants

My basic situation: I have an include file that has something like `#define foo (Flag1 | Flags2 | Flag3)`, so it's a predefined combination of bit flags. For the sake of type-safety, I wanted to replace these #defines by static consts, i.e. `static const int foo = (Flag1 | Flag2 | Flag3)` (or similar). This include file is included in dozens of places in the program.

Now when I'm doing a release build with all relevant optimisation options enabled (using the C++ compiler of VS2010), replacing the #defines seems to increase the executable by a few KiB, depending on how many constants I replaced.

Why does this happen? To my knowledge, integer constants are supposed to be "inlined" into the ASM code that is produced if possible, and I don't see how using a `static const` vs `#define` would make a difference here. Clearly, the variable isn't inlined as the disassembly shows:

```
#define:
01325041  or          eax,0FFD87FE0h
static int:
011E5451  or          eax,dword ptr [CMainFrame::s_TemplateModulePaths+38h (151F008h)] 
```

So the final question is: How can I avoid `#define` but still rely on the variable being inserted directly into the generated assembly?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T14:49:06.183

There is no reason the compiler couldn't eliminate the static const variable. If you're compiling with optimizations turned on, I'm surprised that VC++ doesn't do that.

I tried compiling this code with gcc.

```
enum { FLAG1 = 1 << 0, FLAG2 = 1 << 1, FLAG3 = 1 << 2 };

static const int foo = (FLAG1 | FLAG2 | FLAG3);

int main(){
    return foo;
} 
```

With optimizations turned off, it inlined the value but still reserved storage space for the variable.

```
_main:
LFB0:
    .cfi_startproc
    pushl   %ebp
    .cfi_def_cfa_offset 8
    .cfi_offset 5, -8
    movl    %esp, %ebp
    .cfi_def_cfa_register 5
    andl    $-16, %esp
    call    ___main
    movl    $7, %eax  ;value inlined
    leave
    .cfi_restore 5
    .cfi_def_cfa 4, 4
    ret
    .cfi_endproc
LFE0:
    .section .rdata,"dr"
    .align 4
__ZL3foo:                     ; storage space for foo
    .long   7 
```

At O2 it inlined the value and got rid of the storage space.

```
_main:
LFB0:
    .cfi_startproc
    pushl   %ebp
    .cfi_def_cfa_offset 8
    .cfi_offset 5, -8
    movl    %esp, %ebp
   .cfi_def_cfa_register 5
    andl    $-16, %esp
    call    ___main
    movl    $7, %eax    ; value inlined
    leave
    .cfi_restore 5
    .cfi_def_cfa 4, 4
    ret
   .cfi_endproc
LFE0:
; no storage space for foo 
```

My only thought other that incorrect compiler settings, or VC++ failing to make this optimization, is that the Flags variables might not be compile-time constants which would mean that the value of the expression has to be computed at program start-up, which would prevent inlining.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T12:20:47.543

As seen in the comments, the typesafe operator| overloading for my enums seems to prevent VC++ from inlining the ORed value. I guess I'll keep using the `#define` version as I hate increasing the executable size if there's no benefits (no, this is not premature optimization) - after all, it doesn't increase readability, and since the combination of flags is already of my flagset enum type, I also don't lose any type-safety, I guess.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-18T13:18:38.757

```
#define ERROR_1 int(1)
#define ERROR_2 int(2) 
```

etc...

and then, you'll have the value directly in the instruction, and you will also have type checking :) and without any optimisation parameter.

In my opinion, the `static const int BLABLA=1;` stuff is only there to add a namespace to some constants... and use more ram and ram access in the code, what is really pointless when the symbol for a `#define` constant have to be unique, and when the reference to an error code in memory is less consistent (any malware/bug can modify these values in ram during run time) than the immediate value of this error code, directly in the instruction.

But it is more about modern programming politics... some will claim, use `public static const int`, and others (like me and Microsoft) prefer the simpler version `#define`.

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-08-02T14:35:49.043

You can solve your problem by looking at it from another perspective: you may put the data and the functions that use it close together.

In an OO language, this means making your constant `foo` a private static attribute of a class. This class should have as public methods all the functions that use `foo`. Being a static private attribute, it will be defined in the .cpp file, and there will be just one instance of it in the executable footprint.

I understand this would be a big change in your code, and not a simple refactorying: surely it's not as simple as modifying the definition of `foo` from `#define` to a static global constant. But keeping data and methods that use them close together (i.e.: in the same class) will bring you many non-functional advantages.

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-08-02T14:36:42.053

My guess is that you have `static const int foo = (Flag1 | Flag2 | Flag3)` in a header file. This causes a version of the constant to be stored in every object file separately. The #define embeds the literal which are all combined by pooling.

Try this, in one C++ file have `const int foo = (Flag1 | Flag2 | Flag3)`, then in the header have `extern const int foo`.

* * *

**Update**

Sorry if my answer didn't suit your needs. I addressed the question of file size for static const variables.

I guess it's all in what you want. Unless a section of code is causing performance issues, I would never worry about this kind inline of optimization. For me, type safety and file size are things I value above CPU optimization. In addition, an extern const allows for better analysis by coverage and timing tools.

> Premature optimization is the root of all evil (or at least most of it) in programming.

— [Donald Knuth](http://en.wikiquote.org/wiki/Donald_Knuth#Computer_Programming_as_an_Art_.281974.29)

# css - 垂直 CSS 时间线稳定标记

> ID：11779367
> 
> 赞同：1
> 
> 时间：2012-08-02T14:17:20.887
> 
> 标签：css, markup, timeline

**描述：**
有`12 hours`一天的垂直时间线。
身高是`720px`。
乍一看，标记应如下所示：

```
<div style="margin-top:0px;">
 9:00
</div>
<div style="margin-top:60px;">
 10:00
</div>
       ...
<div style="margin-top:60px;">
 11:00
</div> 
```

它发生了，我们应该考虑到`font-size`。
因为它更多，所以应该是`margin-top`财产的价值。

**演示：** [查看标记](http://jsfiddle.net/fmSfc/1/)
对于当前的字体大小值逻辑`margin-top`上`38px`
，它应该总是等于`60px`。

**问题：**
有没有不依赖于垂直 timilene 的`CSS`解决方案？`JS``font-size`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T14:29:12.160

目前还不清楚你想要什么。但我怀疑你想确保时间线的等距划分。

您不需要使用 margin-top 来补偿字体大小。删除那些内联样式并简单地修复 div 的高度

```
.timeline-container > div{
   height:60px;   
} 
```

见：http: [//jsfiddle.net/fmSfc/4/](http://jsfiddle.net/fmSfc/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T14:34:45.497

使用恒定的 line-height - 您将能够在不更改 margin-top 和整体高度的情况下更改字体大小。检查更新：http: [//jsfiddle.net/fmSfc/6/](http://jsfiddle.net/fmSfc/6/)

此外，最好使用未排序的列表然后使用 div，因为您列出了许多类似的元素。

# c# - 嵌套异步/等待方法

> ID：11779375
> 
> 赞同：19
> 
> 时间：2012-08-02T14:17:47.023
> 
> 标签：c#, async-await, c#-5.0

我正在编写一个包装第三方 Web 服务调用的库，并试图使该库使用新的 async/await 功能。以下示例中的 async/await 关键字的正确用法是什么？

```
public class MyApi
{
    public Task<ApiResult> DoSomethingAsync()
    {
        return this.DoSomethingCore();
    }

    public async Task<ApiResult> DoSomethingElseAsync()
    {
        return await this.DoSomethingCore();
    }

    private async Task<ApiResult> DoSomethingCore()
    {
        var httpClient = new HttpClient();
        var httpResponseMessage = await httpClient.GetAsync("some url");
        var rawResultText = await httpResponseMessage.Content.ReadAsStringAsync();
        return new ApiResult(rawResultText);        
    }
} 
```

为了让我的调用者等待 DoSomethingAsync 方法，该方法是否也应该添加 async 和 await 关键字？还是因为它返回一个任务就可以了？这种嵌套有更好的模式吗？

我认为 DoSomethingAsync 方法是正确的方法，对吗？我相信 DoSomethingElseAsync 在构建库时似乎是错误的方法。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-02T14:24:00.523

任何`Task`人都可以等待，无论它来自哪里。

我不知道为什么`DoSomethingAsync`只是打电话`DoSomethingCore`，因为`DoSomethingAsync`可以很容易地`async`使用`await`。

还有一个你应该在库方法中使用的[一般规则。](http://nitoprograms.blogspot.com/2012/02/async-and-await.html)`ConfigureAwait(false)`

**编辑：**如果您不需要使用`await`，则不要制作该方法`async`。`async`将增加一些开销（查看 Channel9 以获取 Stephen Toub 的 Zen of Async Performance 视频）。如果你可以只返回一个`Task`(like `DoSomethingAsync`)，那么就这样做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T19:10:34.267

下面的公式是有效的，但可能会导致额外的开销（由于额外的 async/await 方法有辅助回调。）

```
public async Task<ApiResult> DoSomethingElseAsync()
{
    return await this.DoSomethingCore();
} 
```

直接返回任务更简单，因为您始终可以在其他地方等待该任务，而不必将该方法实现为“异步”。Async/await 很像使用'yield return'；它做了一些编译器的魔法来实现'yielding'，但枚举本身并不关心你如何实现它。同样，'await' 调用并不关心可等待对象的工作方式，只要它是可等待的即可。

# c# - 什么是锁定线程的正确方法？

> ID：11779376
> 
> 赞同：4
> 
> 时间：2012-08-02T14:17:47.733
> 
> 标签：c#, asp.net-mvc, multithreading, asp.net-mvc-3

在我的 MVC 3 C# 应用程序中，我有一些静态对象，我希望一次可用于一个请求。只能通过方法访问它，但我希望在调用其方法之间保持锁定。

调用只会在控制器中完成，通常会有一两个锁定的代码块。

起初我想公开一些静态公共对象并像使用它一样简单地使用它

```
lock(MyClass.lockObject)
{
 MyClass.doStuff();
 MyClass.doStuff2();
} 
```

，但我发现它容易出错，因为我可能忘记将它锁定在某个地方。我想知道`Monitor.Enter()`在构造函数和`Monitor.Exit()`Dispose 方法中使用它是否是正确的方法，然后将我的方法更改为非静态方法？说，类似：

```
public class MyClass:IDisposable
{
    static protected object _locker = new object();
    protected bool isDisposed = false;

    public MyClass()
    {
        Monitor.Enter(_locker);
    }

    public void Dispose()
    {
        if (!isDisposed)
        {
            Monitor.Exit(_locker);
            GC.SuppressFinalize(this);
            isDisposed = true;
        }
    }

    ~SPInstances()
    {
        Dispose();
    }

    public void doStuff()
    {
        if(isDisposed) throw new ObjectDisposedException();
        // do stuff here, etc.
    }
} 
```

然后我可以将其用作：

```
using(MyClass myinstance = new MyClass())
{
    myInstance.doStuff();
    myInstance.doStuff2();
} 
```

然后，即使我在使用时忘记包装代码，它仍然会锁定，并且在垃圾收集期间它有可能会被解锁......

我不精通C#，有时会忽略某些方面，并且线程以后调试起来也不容易，所以我想知道我是否走上了正轨。这是实现我的目标的正确方法吗？

编辑：

扩展Master Morality的想法，这种方式会更好（我简化了一点，因为我只需要一个资源实例）？

```
public class MyClass
{
    static protected readonly MyResourceType _myResourceStatic = new MyResourceType();
    static public void DoWork(Action<MyClass> action)
    {
        lock(_myResource)
        {
            action(new MyClass(_myResource));
        }        
    }

    protected MyClass(MyResourceType myResource)
    {
        _myResource = myResource;
    }
    protected readonly _myResource;

    public void DoFirstThing() { ... }
    public void DoSecondThing(){ ... }
}

MyClass.DoWork(x => 
{
    x.DoFirstThing();
    // do unrelated stuff
    x.DoSecondThing();
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T15:22:50.713

恕我直言，最好`lock`在自己的方法中。这样，另一个程序员，或者以后的你自己，在调用方法之前不必记住`lock`，这很简单。

```
public class MyClass
{
    private static readonly object _gate = new object();

    /* something that can only be accessed by one thread at a time...*/
    private static MyResourceType MyResource = new MyResourceType();

    public void DoSomething()
    {
         lock(_gate)
         {
            /* do something with MyResource, just make sure you
               DO NOT call another method that locks the gate
               i.e. this.DoSomethingElse(), in those situations,
               you can take the logic from DoSomethingElse() and
               toss it in a private method i.e. _DoSomethingElse().
             */
         }
    }

    private void _DoSomethingElse()
    {
        /* do something else */
    }

    public void DoSomethingElse()
    {
         lock(_gate)
         {
             _DoSomethingElse();
         }
     }
} 
```

那天晚些时候...

```
var myClass = new MyClass();
myClass.DoSomething(); 
```

如果您希望能够使用锁调用多个方法，则可以使用 lambda 来实现，并且为了真正安全，将其包装在辅助类中。

```
public class MyClass
{
    public MyResourceType MyResource { get; set; }
    public void DoFirstThing() { ... }
    public void DoSecondThing(){ ... }
}

public class MyClassHelper
{
    private static readonly object _gate = new Object();
    private static MyResourceType MyResource = new MyResourceType();

    private MyClass _myClass = new MyClass();        

    public void DoWork(Action<MyClass> action)
    {
         lock(_gate)
         {
             _myClass.MyResource = MyResource;
             action(_myClass);
             _myClass.MyResource = null;
         }
    }
}

...

var myClassHelper = new MyClassHelper();
myClassHelper.DoWork(x => 
    {
        x.DoFirstThing();
        x.DoSecondThing();
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T14:21:13.120

锁定比直接使用 Monitor.Enter 和 Exit 更容易，更不容易出错。

从您的示例中不清楚您要同步什么。

Monitor.Enter 在构造函数中并在 Dispose 中退出不是一个好主意。 如果无法正确构造类，则必须处理c'tor 中的*所有异常并调用 Exit。*实例被锁定是没有意义的——这本质上意味着通过锁定 c'tor。您可能想查看 Synchronized 属性；但我不认为这是真的推荐。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T14:29:06.060

立即执行来自其他对象对您的静态对象的请求是否至关重要？如果你的静态对象维护一个它自己工作的队列，你可以通过线程隔离实现互斥。在来自另一个对象的调用中，请求的工作被放置在队列中，而在一个单独的线程中，静态对象正在通过队列工作（请注意，需要对队列进行互斥访问！）执行请求。

您可以让调用对象阻塞在将工作添加到队列的方法中，直到收到静态对象的通知，或者提供回调接口以允许静态对象通知调用对象他们的工作已完成。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-02T15:07:37.703

从您的示例来看，您并不清楚您要做什么。作为良好的编程习惯，最好让每个单独的方法获得锁并在完成临界区时释放它。在您的情况下，它将是：

```
void doStuff()
{
    if(isDisposed) throw new ObjectDisposedException();
    // do stuff here, etc.
    lock(_locker) { 
       // enter critical section here 
    }
    // continue to do other stuff
}

void doStuff2()
{
    if(isDisposed) throw new ObjectDisposedException();
    // do stuff here, etc.
    lock(_locker) { 
       // enter critical section here 
    }
    // continue to do other stuff
} 
```

现在 lock 是使用 Monitor 类的快捷版本。并且实际上是这样翻译的：

```
bool getLock = false;
try {
  Monitor.Enter(locker, ref getLock);
  // do stuff here
}
finally {
  if(getLock) {
    Monitor.Exit(locker);
  }
} 
```

这将使您可以更好地控制对象和内部表示的状态，就好像发生了错误一样，您可以恢复到对象的先前状态。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-02T15:31:16.530

如果调用的组合不多，您可以将 dostuff 和 doStuff2 设为私有，并在您的类中放置一个带锁的包装函数

```
static public void doStuffs()
{
    lock (lockObject)
    {
        doStuff();
        doStuff2();
    }
} 
```

# maven - WSo2 工件的 maven 构建

> ID：11779382
> 
> 赞同：0
> 
> 时间：2012-08-02T14:17:55.013
> 
> 标签：maven, build, wso2, artifacts, wso2developerstudio

我可以从开发人员工作室导出以下碳项目，但不能在命令提示符下使用 maven。

“碳”项目中嵌入了两个模块。一个是配置项目，另一个是注册表资源。maven build/mvn 包是从汽车项目级别完成的，我们遇到了错误。由于碳项目 pom 的依赖项为 ".xml" 。这里的任何指针都非常感谢。

下面是项目结构。

汽车项目 -

```
 ConfigProject

   ResoourceProject 
```

“com.barclaycardus.svc.account.car:account-service-car:pom:1.0.0-SNAPSHOT：无法解析以下工件：com.barclaycardus.svc.account.car.endpoint:AccountServiceEndpointDev:xml:1.0 .0, com.barclaycardus.svc.account.car.sequence:AccountServiceOutSequence:xml:1.0.0, com.barclaycardus.svc.account.car.sequence:AccountServiceInSequence:xml:1.0.0, com.barclaycardus.svc.account .car.proxy-service:AccountProxyService:xml:1.0.0,

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T03:42:58.220

当您使用 maven 为您的工件构建 CAR 文件时，您需要在构建 C-App 项目之前构建单个工件项目。

由于逐个构建每个项目是一项繁琐的任务，因此我们有另一种项目类型，称为 Maven 多模块项目，它充当 Maven 父项目。

因此，如果您想一次性构建所有内容，那么您需要创建一个 Maven 多模块项目，并将所有其他项目作为模块包含在这个多模块项目的 pom 文件中。

[您可以从此处](http://wso2.org/project/developer-studio/2.0.1/docs/devs_maven_support.html#MavenMultiModule)找到有关 Maven 多模块项目的更多信息。

所以当你构建 maven 多模块项目时，它会构建所有其他项目，并且会在 C-App 项目的目标文件夹中生成 CAR 文件。

# xcode - Xcode Mapkit 缩放到当前位置

> ID：11779384
> 
> 赞同：0
> 
> 时间：2012-08-02T14:18:02.610
> 
> 标签：xcode, location

我有一个基于地图的 iphone 应用程序，该应用程序当前显示通过 json 提取的用户位置和注释。我正在尝试创建一个按钮，以便它缩放并以用户的当前位置为中心。我找到了以下代码：

*   (IBAction)showCurrentLocation { [mapView setCenter:mapView.userLocation.coordinate Animation:YES]; }

并了解这可以提供帮助，但是在我粘贴此代码的任何地方都会出现错误。有谁知道使这项工作的步骤/如果这是正确的方法？

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T03:15:01.400

这可能会帮助您：

```
- (IBAction)showCurrentLocation:(id)sender {
self.mapview.showsUserLocation=YES;
self.mapview.delegate = self;
[self.mapview setUserTrackingMode:MKUserTrackingModeFollow animated:YES];
} 
```

# javascript - 提取网页的源代码

> ID：11779386
> 
> 赞同：1
> 
> 时间：2012-08-02T14:18:07.647
> 
> 标签：javascript, html

嗨，我想提取外部网站（不在我的域中）的源代码，然后对其进行解析以使其成为应用程序。我知道如何使用用于 JAVA 的 Jsoup 库来做到这一点，但我无法找到任何关于如何使用 Javascript 或 Jquery 或任何客户端 Web 编程语言来做到这一点的链接。有人可以指导我应该使用哪个库。基本上，我想获取网页的 HTML 源代码，然后对其进行解析以提取某些标签下的某些链接。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T14:22:43.480

[由于同源策略](https://developer.mozilla.org/en/Same_origin_policy_for_JavaScript)，您将无法单独使用 JavaScript 执行此操作。这会阻止您从其他域读取信息。

您需要做的是使用[服务器端代理](http://developer.yahoo.com/javascript/howto-proxy.html)来获取信息。Ajax 调用可以调用代理来获取页面。

# perl - 如何使用perl重复搜索同一个文件'n'次？

> ID：11779387
> 
> 赞同：0
> 
> 时间：2012-08-02T14:18:10.910
> 
> 标签：perl

我实际上想要做的是，从文本文件中提取行范围并在另一个文件中打印范围。字符串的起始范围存储在@secarr 中，相应的字符串结束范围存储在@exarr 中。我现在面临的问题是在 EOF 附近发现了 $secarr[4] 和 $exarr[4] 范围，因此输出文件一直到那里结束。但是在 $secarr[4] 和 $exarr[4] 范围之前存在 $secarr[5] 和 $exarr[5] 以及许多其他范围。

请给我一个出路。

在此先感谢， 法埃兹

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T14:25:47.250

简单的方法是为每个范围重新打开文件。你也可以试试：

*   如果文件不是很大，您可以将其读入数组 ( `my @array = <$IN>;`)。对于每个范围，您只需打印数组切片。
*   您可以只浏览一次文件，检查您是否在每一行输入/离开任何范围。记住当前活动的范围并将每一行输出到所有这些范围（您的范围可以重叠吗？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T21:20:10.167

您可能想看看[Tie::File](http://perldoc.perl.org/Tie/File.html)，它为您提供了一个简单的文件记录界面。

# ruby - 从 Ruby 中的正则表达式获取字符串

> ID：11779389
> 
> 赞同：0
> 
> 时间：2012-08-02T14:18:21.410
> 
> 标签：ruby, regex

我需要在 ruby​​ 中的正则表达式中添加一个字符串，这就是我想要做的（我在我的目录中获取所有文件，打开它们，查找它们是否有模式，然后通过添加到已经存在的内容来修改该模式，为此我需要实际的字符串）

```
Dir["*"].each do |tFile|
  file = File.open(tFile, "rb")
  contents = file.read
  imageLine=/<img class="myclass"(.*)\/>/
  if(contents=~imageLine)
      puts contents.sub!(imageLine, "some string"+imageLine+"some other string")
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:22:22.037

您可以使用`sub`或`gsub`与捕获组一起使用：

```
"foo".gsub(/(o)/, '\1x')
=> "foxox" 
```

有关更多信息，请参阅[文档](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-gsub)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T14:53:32.547

您正在使用`sub!`哪个是就地修改器版本。虽然这有其用途，但该方法的结果不是字符串，而是指示是否已完成任何操作。

该`sub`方法更适合这种情况。如果您有多个必须替换的匹配项，请使用`gsub`.

在进行替换时，您可以使用占位符`\1`来处理捕获的部分，在正则表达式中使用括号进行捕获，或者使用块版本进行更多任意操作。

```
IMAGE_REGEXP = /<img class="myclass"(.*)\/>/

Dir["*"].each do |tFile|
  File.open(tFile, "rb") do |in|
    puts in.read.gsub(IMAGE_REGEXP) { |s| "some string#{s}some other string" }
  end
end 
```

# javascript - Javascript OOP - 从对象方法内的函数返回一个值（嵌套函数）

> ID：11779393
> 
> 赞同：1
> 
> 时间：2012-08-02T14:18:29.930
> 
> 标签：javascript, oop

我无法从对象方法内的函数返回值。我怎么能这样做？让我用代码解释一下。

```
function ObjPerson() {

    this.getPerson = function() {

         function queryDB() {
             //run query and pass result data to success or error functions
         }

         function success(data) {
             //process data 
             return data;  
         }

         function error(errorData) {
           //process error
         }

         queryDB();
    }
  }

 var person = new ObjPerson;
 var userData = ObjPerson.getPerson(); 
```

问题是 getPerson() 方法没有返回任何内容。最好的方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T14:23:27.540

如果这是一个同步函数，则返回该值

```
function ObjPerson() {

    this.getPerson = function() {

        function queryDB() {
            //run query and pass result data to success or error functions
        }

        function success(data) {
            //process data 
            return data;  
        }

        function error(errorData) {
          //process error
        }

        return queryDB(); // HERE'S THE CHANGE
   }
 }

var person = new ObjPerson(); // always use parentheses
var userData = person.getPerson(); // ERROR: getPerson is instance function 
```

但是如果这个函数是异步的，那么你应该做的有点不同。不幸的是，你不能只打电话：

```
var userData = person.getPerson(); 
```

因为在进行分配时，您的异步调用可能还没有返回......所以您的`userData`分配应该在异步调用之后分配。（告诉我们您使用的是什么异步库）

## 您的示例中的其他代码异味

但是您的代码也有其他气味。您的内部函数`queryDB`和函数是在闭包中定义的`success`，`error`为了便于阅读，它们应该定义为局部范围变量：

```
var success = function (data) {
    // process data
    return data;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T14:23:09.160

函数 getPerson 不返回任何内容，您应该使用`return`它来分配一个值（请注意，`return data`返回一个值`function success`）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T14:38:50.647

我从未使用过phonegap，但根据它的文档：

> 当调用 SQLTransaction 的 executeSql 方法时，它将使用 SQLResultSet 调用它的回调。

您可能使用的 executeSql 是异步的。这意味着，您必须更改它，例如，而不是：

```
 var person = new ObjPerson;
 var userData = ObjPerson.getPerson();
 // something here using userData 
```

你必须：

```
function ObjPerson() {

    this.getPerson = function(requestSuccesfullCallback) {

         function queryDB() {
             //run query and pass result data to success or error functions
         }

         function success(data) {
             //process data 
             requestSuccesfullCallback(data);  
         }

         function error(errorData) {
           //process error
         }

         queryDB();
    }
  }

 function callback(userData)
 {
      // something here using userData
 }

 var person = new ObjPerson;
 ObjPerson.getPerson(callback); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-02T15:02:21.997

如果 queryDB 是异步的，那么对于 queryDB 和 getPerson（修改您的代码）返回“promise”类型对象是一个很好的建议（尤其是如果您使用 jQuery）。从该承诺中，您可以附加更多成功/失败/已完成类型的回调以继续处理。在 jQuery 中，那些回调函数可以用`done`,来完成`fail`，`always`如下所示：

```
 var person = new ObjPerson;
   var userDataPromise = ObjPerson.getPerson();
   userDataPromise.done(function(person){
      //deal with person object here
      //
   }).fail(function(errorobj){
      //deal with error
   }).always(function(){
      //deal with completion
   }); 
```

现在，如果您使用的是 jQuery 库，您*可以*返回在 ajax 调用中返回的承诺。那不是我要建议的。`person`很可能，您对如何调用您有一些严格的要求。此外，您真的不在乎让代码的其他部分知道您正在执行 ajax 或 localDB 或其他任何东西......他们只需要访问`person`.

所以这里有一个关于如何完成代码来做到这一点的粗略草图。

```
function ObjPerson() {
    function getData (args,success,fail){
        //somehow get your data.  We'll assume it doesn't return promises
    } 
    this.getPersonPromise = function() {
        var returnedPromise = $.Deferred();

        getData(args,function(data){
           //success callback
           //process data (assume PersonCustomData is defined elsewhere)
           var person = new PersonCustomData (data)
           returnedPromise.resolve(person);
        }, function(error) {
           //failure callback, return custom errors, or maybe 
           //just return original error if lazy or don't quite know all methods
           //of failure or something.
           var errorObj = ...
           returnedPromise.reject(errorObj);

        });
        return returnedPromise;

    }
  }

 var person = new ObjPerson;
 var promise = ObjPerson.getPersonPromise();
 person.done(function(person){
    //do more stuff with PersonCustomData instance
 }).fail(function(errorObj){
    //oops
 }) 
```

等等。这样你就不必在事后传递回调。很酷。

# javascript - javascript, jQuery - 检查数组中是否存在值

> ID：11779394
> 
> 赞同：15
> 
> 时间：2012-08-02T14:18:32.867
> 
> 标签：javascript, jquery, arrays, jvectormap

**是否有更好的方法来检查多个项目是否与 if 语句中的变量匹配**

我有 3 个 if 语句，我需要查看一个项目是否与一个数组/变量命名代码匹配。有很多项目要与代码数组/变量进行比较，所以我不得不用 | 复制每个项目。它们之间。有没有更有效的方法，或者我可以制作一个数组来检查代码是否等于数组中的任何项目？

这就是我所拥有的

```
onLabelShow: function(event, label, code){
        if (code == "US-AL" | code == "US-AZ" | code == "US-CA" | code == "US-CT" | code == "US-FL" | code == "US-HI" | code == "US-ID" | code == "US-IL" | code == "US-IA" | code == "US-LA" | code == "US-ME" | code == "US-MD" | code == "US-MA" | code == "US-MO" | code == "US-NE" | code == "US-NV" | code == "US-NJ" | code == "US-NM" | code == "US-NY" | code == "US-OH" | code == "US-OK" | code == "US-OR" | code == "US-PA" | code == "US-TN" | code == "US-UT" | code == "US-VA" | code == "US-CA" | code == "US-WA" | code == "US-NC" ) {
            //do nothing
        }
        else if (code) { //if a state is not specified in var stateRedirects then prevent default
            event.preventDefault();
        }                   
    },      
    onRegionOver: function(event, code){
        if (code == "US-AL" | code == "US-AZ" | code == "US-CA" | code == "US-CT" | code == "US-FL" | code == "US-HI" | code == "US-ID" | code == "US-IL" | code == "US-IA" | code == "US-LA" | code == "US-ME" | code == "US-MD" | code == "US-MA" | code == "US-MO" | code == "US-NE" | code == "US-NV" | code == "US-NJ" | code == "US-NM" | code == "US-NY" | code == "US-OH" | code == "US-OK" | code == "US-OR" | code == "US-PA" | code == "US-TN" | code == "US-UT" | code == "US-VA" | code == "US-CA" | code == "US-WA" | code == "US-NC" ) {
            //do nothing
        }
        else if (code) { //if a state is not specified in var stateRedirects then prevent default
            event.preventDefault();
        }                   
    },
    onRegionClick: function (event, code) {
        if (code == "US-AL" | code == "US-AZ" | code == "US-CA" | code == "US-CT" | code == "US-FL" | code == "US-HI" | code == "US-ID" | code == "US-IL" | code == "US-IA" | code == "US-LA" | code == "US-ME" | code == "US-MD" | code == "US-MA" | code == "US-MO" | code == "US-NE" | code == "US-NV" | code == "US-NJ" | code == "US-NM" | code == "US-NY" | code == "US-OH" | code == "US-OK" | code == "US-OR" | code == "US-PA" | code == "US-TN" | code == "US-UT" | code == "US-VA" | code == "US-CA" | code == "US-WA" | code == "US-NC" ) {
            window.location = '/' + code;
        }
        else if (code) { //if a state is not specified in var stateRedirects then prevent default
            //event.preventDefault();
        }   

    } 
```

任何帮助、示例或代码将不胜感激！我已经尝试过为每一个做，但认为我知道的不够多，无法让它与数组一起工作。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-08-02T14:20:50.400

```
var codes = ["US-AL", "US-AZ", ... ];

if($.inArray(code, codes) > -1){
    //do something    
} 
```

**更新：** 结合@Deestan的建议，这可以重写为..

```
function isValidCode(code){
    return ($.inArray(code, codes) > -1);
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-08-02T14:20:54.363

[是的](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/indexOf)

`array.indexOf(searchElement[, fromIndex])`

# php - PHP/EECMS 中的嵌套数组“消失”

> ID：11779395
> 
> 赞同：0
> 
> 时间：2012-08-02T14:18:33.357
> 
> 标签：php, arrays, scope, expressionengine

我正在构建一个日历，显示团队成员每个月每天的忙碌程度。

我有一个数组，里面有人：`$teammates`.

每个队友是另一个数组，包含名称和另一个数组，其中包含可用日期（星期一 - 星期日）：

```
{exp:channel:entries channel="teammates"}
$teammate = array();
$available_days = array();

{available_days} // this is a PT-checkbox field, it loops through a list of selected checkboxes (mon, tue, wed, etc).
array_push($available_days, "{option_name}");
{/available_days}

$teammate["name"] = "{title}";
$teammate["available_days"] = $available_days;
$teammate["workdays"] = array();

array_push($teammates, $teammate);
{/exp:channel:entries} 
```

现在每个月看起来都不一样。例如，8 月 1 日是星期三，而 9 月 1 日是星期六。这就是为什么我还需要构建当前月份的数组，其中包含日期名称和日期编号对：`[["day_name" => "wed", "day_number" => 1], ["day_name" => "thu", "day_number" => 2], ... etc]`

这是通过使用`{exp:channel:calendar}`标签来完成的。细节不相关。我最终得到一个名为`$days_array_full`.

下一步是将每个月的天数与每个队友的可用天数结合起来，因此我最终在每个天数中得到一个数组，其中`$teammate`包含该人在场的确切天数，我称之为“工作日”。我这样做如下：

```
foreach($teammates as $teammate) {

    foreach($teammate["available_days"] as $available_day) {
        foreach($days_array_full as $day) {
            if($day["name"] == $available_day) {
                array_push($teammate["workdays"], array("name" => $day["name"], "number" => $day["number"]));
            }
        }

    }

    echo(count($teammate["workdays"]));
    // this echoes correct counts, such as about 25 for people who work 5 d/w.
} 
```

但是，如果我稍后尝试访问 teammates `$teammate["workdays"]`，则数组为空：

```
foreach($teammates as $teammate) {
    echo(count($teammate["workdays"]));
    // this always gives 0 for any teammate..., why?
} 
```

我猜这是某种范围问题，因为**ExpressionEngine**在中执行 PHP 代码`eval()`，但我真的不知道要更改什么才能使其工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T18:57:26.123

为了使用`array_push`参考 aready 需要是一个数组。它只是意味着，您将需要初始化它：

```
foreach($teammates as $key => $teammate) {
    $teammate["workdays"] = array();
    ...
} 
```

更多信息：`array_push`您可以使用以下注释而不是使用：

```
$teammate["workdays"][] = array("name" => $day["name"], "number" => $day["number"]); 
```

* * *

最后，需要将新创建的数组写回`$teammates`：

```
foreach($teammates as $key => $teammate) {
    ...
    $teammates[$key] = $teammate;
} 
```

但更好的是，您只需`$teammate`像这样用作参考：

```
foreach($teammates as &$teammate) {
    ...
} 
```

# linux-kernel - 抢占式中断处理程序会发生什么？

> ID：11779397
> 
> 赞同：10
> 
> 时间：2012-08-02T14:18:44.470
> 
> 标签：linux-kernel, kernel, linux-device-driver, interrupt, interrupt-handling

即使在一些写得很好的内核书籍中，我也找不到以下问题的正确答案：

1.  他们说 ISR 不能休眠，因为它无法重新调度 ISR，因为它没有与任何进程连接，那么当更高优先级的中断抢占正在执行的中断时会发生什么？中断的 ISR 不会再次重新安排（执行）？如果是，如何以及谁来做这项工作？

2.  很多时候我们会禁用中断（例如：1.在临界区 2\. 当一个快速中断正在执行时，它将禁用当前处理器中的所有中断），那么当中断被禁用时发生的中断会发生什么？他们只是被丢弃了？还是将存储在某个地方以供以后执行？如果是，在哪里以及如何？

3.  当一个 ISR 正在执行时，它将禁用当前 IRQ 行中的中断以避免重入（防止同一行上的另一个 ISR 被执行），但是为什么呢？如果 ISR 是可重入的，那有什么问题？

*ISR=中断服务程序

*他们=书的作者

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T22:13:09.900

中断通过首先保存当前 CPU 状态并强制程序计数器 (PC) 跳转到中断向量表的位置来捕获从用户空间到内核的执行。然后，该表提供一个指向内核函数（序列）的指针，该内核函数保存当前进程状态并将中断 ID 映射到 ISR 的开头。当在 ISR 期间发生更高优先级的中断时，会发生相同的事件序列，除了正在运行的 ISR 和传入的中断都由同一个（内核）进程处理，因此没有进程进入睡眠状态。

如果新中断被禁用，它当然会被忽略。但是，如果在处理器处理更高优先级的中断时启用中断，则该中断可能处于挂起状态。

ISR 是内核空间内的函数调用，需要分配自己的堆栈。如果抢占次数过多，可重入中断会导致堆栈溢出。大多数内核（包括 Linux 和 Windows）都有固定的堆栈大小。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-26T00:54:51.700

1.  是的，在操作系统中，只有任务以循环方式调度。调度的目标是共享 CPU 资源，公平地分享 CPU 的执行能力给每个正在运行的任务。中断本身就是处理一个特定的事件，每个中断都有自己的优先级。较高优先级的中断可能会抢占正在运行的低优先级 ISR。

    它的工作原理是基于中断控制器上的中断屏蔽寄存器，当 ISR 启动时，它设置屏蔽寄存器以禁用低优先级的中断，在 ISR 返回之前，它恢复屏蔽寄存器以允许低优先级的中断。

2.  中断处理请求是由硬件设备提出的，它在数据到达时将一个中断引脚拉低到中断控制器。如果禁用中断（设置了掩码），则来自硬件的请求处于挂起状态并且中断引脚保持低电平。一旦启用中断（清除掩码），中断将再次发生。

3.  CPU 将不断触发中断并最终获得堆栈溢出！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T14:39:08.927

据我所知，ISR 可以被另一个中断抢占，然后继续运行。我看不出为什么可以将进程放入堆栈而 ISR 不能。

进程是操作系统级别的东西，而 ISR 是 CPU 级别的东西。如果你在一个进程中调用 sleep()，你告诉操作系统你没有工作权，它可能运行另一个进程。这不适用于 ISR。

另外，[禁用中断是什么意思？](https://stackoverflow.com/questions/3427546/what-is-meant-by-disabling-interrupts)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T20:52:35.760

我将尝试回答您的 1 个问题。回答 1) ISR 无法休眠，因为它们在当前运行的进程的上下文中运行。如果它们休眠，当前运行的进程将进入休眠状态。这是不可取的。

# fortran - 我可以将文件指针移动到格式化文件中的特定（字节）位置吗？

> ID：11779398
> 
> 赞同：2
> 
> 时间：2012-08-02T14:18:48.027
> 
> 标签：fortran

我正在阅读格式化的 ascii 文件。该文件本质上是 ascii 编码的，看起来像这样：

```
fieldname 1
header info 1
header info 2
header info 3
aruieopaurjjk&*(^0uio3789$
#$adsfhoueraeiknvaer93-8(&897klfaicvnjai9ea890 34
*(()kla3j90ajkl4a8 ...

fieldname 2
header info 1
header info 2
header info 3
8&80973jknaua890a3a()Ujkl;fjaoi0()8&*(&jla;f)*(
jkl;aje()()78907jkoja0988093jn890&*(4fakoa343a
... 
```

因此，虽然文件是 ascii，但它们不是人类可读的。记录长度不一致。假设文件指针位于之前，我有例程来读取数据`fieldname`。它检查以确保字段名是我想要的，并读取/解码返回数据的字段。如果该字段不是我想要的，它会读取行，直到出现`fieldname`线。可以想象，这是非常低效的。要读取最后一个字段，我基本上需要按顺序读取所有其他字段。另外，如果我乱读它们，我需要倒回整个文件并重新开始。我想做的是创建一个索引，以便我可以将字段名映射到文件开头的字节偏移量。这样，我就可以“寻找”文件中的正确位置并继续作为格式化的顺序文件读取......

我对任何允许我通过以下方式读取文件的解决方案感到满意：

```
read(iu,'(A)',end=190) mystring  !get from current position to end of line
read(iu,*,end=190) myint1,myint2 !read two integers
read(iu,'(a,i8,3e14.7,i8,a)',end=190, err=900) !read a string, 8 character wide integer ... 
```

我什至可以接受具有某种优化`getline`功能和流访问的解决方案。然后我可以用对 getline 的调用替换上面的内容，然后读取返回的字符串......

我看过[这篇文章](https://stackoverflow.com/questions/7110616/fortran-how-to-write-data-to-specific-line-in-the-file)，但是我的问题稍微笼统一些（那篇文章想要一个行号。我想要一个字节偏移量）。似乎这可以通过使用流访问和 pos 说明符的一些魔法来完成，但我不确定这是否会迫使我完全重写阅读器（这几乎是不可能的，因为我不知道阅读器如何实际上将看似随机的字符串转换为浮点数）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T21:07:59.720

格式化流访问（在 Fortran 2003 标准中引入）允许您查找文件中先前已读取的位置。因为格式化流仍然具有基于记录的方法（正式使用换行符作为记录分隔符），所以通常可以重用用于格式化顺序访问的相同代码。

使用 INQUIRE 语句获取当前文件位置：

```
INTEGER :: file_pos
INQUIRE(UNIT=iu, POS=file_pos) 
```

您可以在读取包含每一行的记录之前以这种方式调用 INQUIRE `fieldname`，然后读取该记录，确定该记录的字段名，并将字段名和文件位置存储在数组或类似文件中以供以后查找。

您可以使用非前进 READ 重新定位到先前存储的位置：

```
READ (iu,"()", ADVANCE='NO', POS=file_pos) 
```

随后的 READ 语句将继续执行，就像它们对第一次遇到重新定位的记录的顺序格式化文件一样。

# http - 从 GWT 开始，使用 RPC 调用重要吗？

> ID：11779400
> 
> 赞同：1
> 
> 时间：2012-08-02T14:18:51.890
> 
> 标签：http, gwt, rest, web-applications, rpc

我最近关注了这个 GWT 教程：[GWT 教程](https://developers.google.com/web-toolkit/gettingstarted#create)

我是 Web 开发的新手，我告诉一个非常擅长 Web 开发的朋友，我刚刚学会了如何进行 RPC 调用。他说这真的很老式，不再常用了。为什么 Google 会从 RPC 调用开始呢？只是为了简单？Restful HTTP 请求是我应该关注的客户端/服务器通信的事情吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T15:34:25.210

GWTRPC 不应与旧的 RPC 技术（例如[ONC RPC](http://en.wikipedia.org/wiki/ONC_RPC)）相混淆。

RPC 只是“远程过程调用”的通用术语，它用于许多执行良好的远程调用技术（你可以说，“Restful HTTP 请求”也是一个 RPC，如果它调用某个过程）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T16:42:19.330

您可以在 GWT 俱乐部享受宁静的服务，没有什么能阻止您这样做。我认识一些成功地做到了这一点的人。在我所知道的所有案例中，RESTful 服务已经存在/可用/实现，并且 GWT 应用程序应该是后来开发的服务的（次要）消费者。

如果您刚开始，那么在 GWT 中采用标准的服务器通信方式是非常有意义的 - 常规 RPC 调用。否则，REST 和 RPC 之间没有区别，因为在 REST 中没有什么是 GWT-RPC 架构无法完成的。

# sql - 只查找今天的记录的 Sqlite SQL 语句是什么？

> ID：11779402
> 
> 赞同：1
> 
> 时间：2012-08-02T14:18:58.687
> 
> 标签：sql, database, sqlite, date, dataset

假设我有一张桌子，上面有人们的名字和他们的生日（日期和时间）。我希望能够使用以下 SQL for SQLite 找到人们今天的生日（日期和时间）。

```
SELECT * FROM Btable WHERE Bday = date('yyyy-MM-dd') 
```

但是，它总是返回 nil 数据集。我还需要包括时间吗？

我的 SQL 语句到底有什么问题？如果是这样，查询今天日期的正确 SQL 语句是什么。

**更新：**

这是我使用 BETWEEN 逻辑的实际 SQL 语句：

```
SELECT * 
FROM Alarms 
WHERE ALARMSTATE IN (0,1,2) 
  AND ALARMPRIORITY IN (0,1,2,3,4) 
  AND ALARMGROUP IN (0,1,2,3,4,5,6,7) 
  AND ALARMTIME BETWEEN date(2012-08-02) 
                    AND date(2012-08-3) 
ORDER BY ALARMTIME DESC 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T13:57:20.267

这是我的答案。

由于我的 ALARMTIME 列是 TEXT，我可以使用以下 SQL 语句查询我的表并检索我正在寻找的数据集。

```
SELECT *
FROM Alarms
WHERE ALARMSTATE IN (0,1,2)
  AND ALARMPRIORITY IN (0,1,2,3,4)
  AND ALARMGROUP IN (0,1,2,3,4,5,6,7)
  AND ALARMTIME LIKE "2012/08/01%"
  ORDER BY ALARMTIME DESC 
```

我根本无法将我的 ALARMTIME 文本转换为日期时间类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T14:23:40.337

我没有启动实例，但这应该可以。

```
SELECT * FROM Btable WHERE Bday >= julianday(date('now'))); 
```

这应该像这样返回一个字符串：

```
2012-08-02 00:00:00 
```

查询的错误在于它可能缺少毫秒或其他一些精度，这些精度总是会被评估为假。

# objective-c - 显示应用的构建日期

> ID：11779403
> 
> 赞同：16
> 
> 时间：2012-08-02T14:19:03.223
> 
> 标签：objective-c, ios, xcode, build

我可以在模拟器中显示我的应用程序的构建日期，但是每当我归档应用程序并将其上传到 TestFlight，然后将其安装到设备上时，构建日期都不会显示。

这是我为显示构建日期所做的工作。

首先，我将**CFBuildDate**作为字符串添加到 myproject-info.plist

接下来，我将以下脚本添加到 Edit Scheme -> Build -> Pre-Actions -> Run Script Action ：

```
infoplist="$BUILT_PRODUCTS_DIR/$INFOPLIST_PATH"
builddate=`date`
if [[ -n "$builddate" ]]; then
/usr/libexec/PlistBuddy -c "Add :CFBuildDate $builddate" ${infoplist}
/usr/libexec/PlistBuddy -c "Set :CFBuildDate $builddate" ${infoplist}
fi 
```

最后，使用以下代码从 plist 文件中获取构建日期：

```
NSString *build_date = [[[NSBundle mainBundle] infoDictionary] objectForKey:@"CFBuildDate"]; 
```

这会在模拟器中显示构建日期（尽管有时不会），但是通过 TestFlight 部署应用程序时，构建日期永远不会显示。有任何想法吗 ？

提前致谢。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-02T15:10:52.757

您可能会考虑使用内置`__DATE__`和`__TIME__`宏，它们将返回应用程序构建日期和时间的字符串表示形式。也许他们会对你有更多帮助：

```
NSString *dateStr = [NSString stringWithUTF8String:__DATE__];
NSString *timeStr = [NSString stringWithUTF8String:__TIME__]; 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-07-15T11:05:28.040

要获取格式为“yyMMddHHmm”的构建日期，您可以尝试以下操作：

```
+ (NSString *)GetBuildDate {
    NSString *buildDate;

    // Get build date and time, format to 'yyMMddHHmm'
    NSString *dateStr = [NSString stringWithFormat:@"%@ %@", [NSString stringWithUTF8String:__DATE__], [NSString stringWithUTF8String:__TIME__]];

    // Convert to date
    NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
    [dateFormat setDateFormat:@"LLL d yyyy HH:mm:ss"];
    NSDate *date = [dateFormat dateFromString:dateStr];

    // Set output format and convert to string
    [dateFormat setDateFormat:@"yyMMddHHmm"];
    buildDate = [dateFormat stringFromDate:date];

    [dateFormat release];

    return buildDate;
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-08-02T19:43:56.997

尝试将脚本作为*构建阶段*步骤运行，而不是方案预操作步骤，这样它就会一直运行，而不管您正在生成的构建类型如何。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-11-14T19:54:03.487

# 斯威夫特3

```
static var buildDate: Date? {
    guard let infoPath = Bundle.main.path(forResource: "Info.plist", ofType: nil) else {
        return nil
    }
    guard let infoAttr = try? FileManager.default.attributesOfItem(atPath: infoPath) else {
        return nil
    }
    let key = FileAttributeKey(rawValue: "NSFileCreationDate")
    guard let infoDate = infoAttr[key] as? Date else {
        return nil
    }
    return infoDate
}

static var prettyBuildDate: String {
    guard let date = buildDate else {
        return "Unknown"
    }
    let formatter = DateFormatter()
    formatter.dateFormat = "yyyy-MM-dd HH:mm:ss ZZZ"
    formatter.timeZone = TimeZone(abbreviation: "UTC")
    return formatter.string(from: date)
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-12-11T13:23:37.723

如果您重新定义`__DATE__`并且`__TIME__` 每次构建应用程序时都会更新时间。您不需要清理或存档来更新时间，只需要运行项目。

```
 #define DATE [NSString stringWithUTF8String:__DATE__]
  #define TIME [NSString stringWithUTF8String:__TIME__]

- (NSString *)getBuildDate {
    NSString *buildDate;

    // Get build date and time, format to 'yyMMddHHmm'
    NSString *dateStr = [NSString stringWithFormat:@"%@ %@", DATE , TIME ];

    // Convert to date
    NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
    [dateFormat setDateFormat:@"LLL d yyyy HH:mm:ss"];
    NSLocale *usLocale = [[NSLocale alloc] initWithLocaleIdentifier:@"en_US"];
    [dateFormat setLocale:usLocale];
    NSDate *date = [dateFormat dateFromString:dateStr];

    // Set output format and convert to string
    [dateFormat setDateFormat:@"dd/MM/yyyy-HH:mm"];
    buildDate = [dateFormat stringFromDate:date];

    return buildDate;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-07-07T14:59:54.913

在 macOS 上，我使用此代码，它从应用程序的 Info.plist 内容中获取构建日期。可能也适用于iOS，我没有检查过：

```
+ (NSDate *)buildDate {
    static NSDate *result = nil;
    if (result == nil) { 
        NSDictionary *infoDictionary = NSBundle.mainBundle.infoDictionary;
        NSString *s = [infoDictionary valueForKey:@"BuildDateString"];
        NSISO8601DateFormatter *formatter = [[NSISO8601DateFormatter alloc] init];
        NSDate *d = [formatter dateFromString:s];
        result = d;
    }
    return result;
} 
```

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2019-07-23T18:36:05.177

斯威夫特5

```
let compileDate = String(Date())
let df = DateFormatter()
df.dateFormat = "MMM-dd-yyyy"
let usLocale = NSLocale(localeIdentifier: "en_US")
df.locale = usLocale
let aDate: Date? = df.date(from: compileDate) 
```

# version-control - 修订控制：撤消未签入的更改

> ID：11779409
> 
> 赞同：1
> 
> 时间：2012-08-02T14:19:48.123
> 
> 标签：version-control, mercurial, revert

我正在玩一些文件（机器上安装了其他人的代码，我必须在它之后为我的代码建模）和简短的故事：出了点问题。该页面两次打印标题，错误消息变得混乱，等等......我不确定我做了什么。我试图撤消我的所有更改，但它不起作用。我肯定错过了什么。

我实际上并没有签入我的代码，但仍然保留了更改。无论如何，在我开始玩它们之前（即今天早上），我可以回到文件的方式吗？我知道 hg revert，但我不确定这是否是个好主意；Mercurial 似乎很确定我*不想*使用 revert ......就像永远一样。

对此感到非常沮丧，所以我非常感谢任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:24:53.513

简短的回答是，是的，继续使用 revert，这就是你在这种情况下想要做的。[这个问题](https://stackoverflow.com/questions/2540454/mercurial-revert-back-to-old-version-and-continue-from-there)*本身*并不是你的重复，但它解释了使用`revert`和类似 Mercurial 命令的一些微妙之处。

# razor - webapi 在控制器中将模型渲染为 html

> ID：11779412
> 
> 赞同：4
> 
> 时间：2012-08-02T14:19:54.780
> 
> 标签：razor, asp.net-web-api

我有一个创建 html 电子邮件的 webapi 控制器操作。目前我正在使用 string.format 来创建 html，因为它是最简单的事情。我知道这会变得更加复杂，并且想使用剃刀模板。

我已经看到了如何为 MVC 控制器执行此操作的示例，但我找不到任何关于如何在`WebApiController`. 这可能吗？如果是这样，您知道任何资源吗？我的 google-fu 让我失望了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T20:43:36.663

查看这篇文章[将 ASP.NET MVC 视图渲染到 Web Api 控制器中的字符串，](http://wouterdekort.blogspot.ro/2012/10/rendering-aspnet-mvc-view-to-string-in.html)作者 Wouter de Kort

```
 public static string RenderViewToString(string controllerName, string viewName, 
                                         object viewData)
{
    HttpContextBase contextBase = new HttpContextWrapper(HttpContext.Current);

    var routeData = new RouteData();
    routeData.Values.Add("controller", controllerName);
    var controllerContext = new ControllerContext(contextBase, routeData, 
                                                   new EmptyController());

    var razorViewEngine = new RazorViewEngine();
    var razorViewResult = razorViewEngine.FindView(controllerContext, viewName, 
                                                     "", false);

    var writer = new StringWriter();
    var viewContext = new ViewContext(controllerContext, razorViewResult.View, 
           new ViewDataDictionary(viewData), new TempDataDictionary(), writer);
    razorViewResult.View.Render(viewContext, writer);

    return writer.ToString();
}

private class EmptyController : ControllerBase
{
    protected override void ExecuteCore() { }
}

//You can simply call this from anywhere in your Web Api Controller: 

RenderViewToString("controller", "view", model) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-18T03:28:31.637

我一直在使用这个 ViewRenderer 类并取得了巨大的成功：

[https://github.com/RickStrahl/WestwindToolkit/blob/master/Westwind.Web.Mvc/Utils/ViewRenderer.cs](https://github.com/RickStrahl/WestwindToolkit/blob/master/Westwind.Web.Mvc/Utils/ViewRenderer.cs)

像这样称呼它：

```
var html = ViewRenderer.RenderView("~/views/emails/ActivationEmail.cshtml", emailModel); 
```

# ruby - Warbler 是否仅用于 Jruby 应用程序？

> ID：11779414
> 
> 赞同：0
> 
> 时间：2012-08-02T14:19:56.360
> 
> 标签：ruby, deployment, jruby, warbler

我看了一下如何在服务器上部署 Ruby，我发现了 Warbler for Jruby。我有几个问题没有找到直接的答案。

Warbler 是否仅用于打包 Jruby 应用程序（如 Jruby on Rails），还是可以用于打包任何 ruby​​ 应用程序（Rails、Sinatra、纯 ruby​​、jruby ......）？

您可以仅在 Glassfish 之类的 Java 服务器上部署它，还是也可以在 Thin 之类的应用服务器上部署它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T19:58:29.560

您可以使用 warble 打包多个 JRuby/Ruby 应用程序、Rails、Sinatra、ecc...Warbler 在尝试自动检测框架并以正确的方式打包它方面做得很棒，或者您可以执行

```
 warble config 
```

这将创建一个 config.rb 文件，您可以在其中指定一些选项。

你甚至可以将你的项目打包为一个带有嵌入式网络服务器的可运行的战争，或者只是一个你可以执行的 jar

```
 java -jar myjar.jar 
```

对于 Web 应用程序，您可以在任何地方部署您的战争，我认为几乎任何支持 servlet api 2.5 的应用程序服务器......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T02:25:01.883

如[https://github.com/jruby/warbler](https://github.com/jruby/warbler)中所述：

> Warbler 提供了一种最小的、灵活的、类似于 Ruby 的方式来捆绑所有应用程序文件以部署到 Java 环境。

Warbler 的工件是 WAR 文件。如果应用程序服务器理解它，你会没事的。Glassfish 还可以，但我不认为 Thin 可以。

# jquery - 增加列表项值以检索下一个 href 以更改图像源

> ID：11779415
> 
> 赞同：1
> 
> 时间：2012-08-02T14:20:00.640
> 
> 标签：jquery, href, increment, attr

递增到下一个列表项以输出下一个 href 然后使用该值更改图像 src 时，我遇到了一些非常奇怪的问题

它会追踪并进入下一个项目，然后如果我继续单击下一个箭头，它会增加？？？下面是我所有的代码，所以除了我写的不正确之外，没有其他可能导致问题的东西。

这个概念与灯箱相同。我也会有以前的箭头。

HTML：

```
<div role="main" id="main">
<div id="boxes">
  <ul>
         <li><a href="img/lrgimgs/1.jpg" class="lightbox"><img src="img/thumbs/1.jpg"></a></li>
         <li><a href="img/lrgimgs/2.jpg" class="lightbox"><img src="img/thumbs/2.jpg"></a></li>
         <li><a href="img/lrgimgs/3.jpg" class="lightbox"><img src="img/thumbs/3.jpg"></a></li>
         <li><a href="img/lrgimgs/4.jpg" class="lightbox"><img src="img/thumbs/4.jpg"></a></li>

   </ul>
 </div>
  <div class="nextArrow>next</div>
  <div class="previousArrow>previous</div>
</div> 
```

查询：

```
 var incrementVar = 0;

 $(".nextArrow").click(function() {
        incrementVar++;
        var hrefa=$('#main').find('#boxes ul li a:eq(' + incrementVar + ')').attr('href');
        $("#thumbnail").attr('src', hrefa); //I am loading the outcome of my hrefa var into another div

 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:02:48.670

这是一个工作小提琴：http: [//jsfiddle.net/Mq3wF/](http://jsfiddle.net/Mq3wF/)

HTML：

```
<div role="main" id="main">
<div id="boxes">
  <ul>
         <li><a href="img/lrgimgs/1.jpg" class="lightbox"><img src="img/thumbs/1.jpg"></a></li>
         <li><a href="img/lrgimgs/2.jpg" class="lightbox"><img src="img/thumbs/2.jpg"></a></li>
         <li><a href="img/lrgimgs/3.jpg" class="lightbox"><img src="img/thumbs/3.jpg"></a></li>
         <li><a href="img/lrgimgs/4.jpg" class="lightbox"><img src="img/thumbs/4.jpg"></a></li>

   </ul>
 </div>
  <div class="nextArrow">next</div>
  <div class="previousArrow>previous</div>
</div>​​​​​​ 
```

Javascript：

```
var i = 0;
var hrefa;
$(".nextArrow").click(function() {
     hrefa = $("li").find("a").eq(i).attr("href");
     i++;
    alert(hrefa);
 });​ 
```

# c# - 如何快速更新 ADO 实体？

> ID：11779425
> 
> 赞同：2
> 
> 时间：2012-08-02T14:20:16.683
> 
> 标签：c#, .net, frameworks, ado.net, entity

我有一个具有很多属性的实体，我不想手动执行类似的操作

```
public void Update(Contact cont)
    {
        using (var ctx = new DatabaseEntities())
        {
            var res = from n in ctx.Contacts
                          where n.ContactID == cont.ContactID
                          select n;

            var selContact = res.First();
            selContact.AddressSuiteNumber = cont.AddressSuiteNumber;
            selContact.PhoneNumber = cont.PhoneNumber;
            /* and doing this for eeeeeeevery 40 properties */
            ctx.SaveChanges();

        }

    } 
```

我试过了

```
selContact = cont 
```

无济于事。有没有这样一种快速的方法可以将数据从在 Update() 方法中作为参数传递的实体实例复制到在 LINQ 选择中找到的实例，然后保存？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T14:30:37.673

如果您的实体尚未附加到上下文，您可以尝试附加它并将其状态更改为`Modified`：

```
using (var ctx = new DatabaseEntities())
{
    ctx.Contacts.Attach(cont);

    // Marks all properties as modified, so new values will be pushed to DB on SaveChanges
    ctx.ObjectStateManager.ChangeObjectState(cont, System.Data.EntityState.Modified);

    ctx.SaveChanges();
} 
```

# iphone - 弹出框打开时与标签栏交互

> ID：11779427
> 
> 赞同：0
> 
> 时间：2012-08-02T14:20:20.163
> 
> 标签：iphone, objective-c, ios

我有一个带有多个视图控制器的 UITabBarController 。如果从一个 View Controller 我呈现一个 PopoverController ，则标签栏将变为非活动状态，直到我关闭 popover 。即使显示弹出框，是否有办法与标签栏交互？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:29:38.633

我自己没有这样做，但我认为你想使用[这个属性](http://developer.apple.com/library/ios/documentation/uikit/reference/UIPopoverController_class/Reference/Reference.html#//apple_ref/occ/instp/UIPopoverController/passthroughViews)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T14:27:26.263

**不**，我认为**您在显示 UIPopoverController 时无法**与 UITabBarController 进行交互，因为它被添加到一个视图中，该视图在层次上高于 UITabBarController 所在的 RootViewController。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T17:13:54.723

很容易使用**NSNotification**与弹出视图控制器中的 uitabbarcontroller 进行交互

# c# - 从数据库中检索主键

> ID：11779432
> 
> 赞同：4
> 
> 时间：2012-08-02T14:20:37.443
> 
> 标签：c#, sql, database

是否可以返回数据库中给出的最后一个主键？

这部分是我连接到我的数据库并向我的数据库添加内容的方式，但如果您需要更多信息，请询问。

```
public partial class MainWindow : Window
{

System.Data.SqlClient.SqlConnection con;
System.Data.SqlClient.SqlDataAdapter da;

DataSet sessions; 
```

主要的

```
public MainWindow()
{
    InitializeComponent();
}

private void button1_Click(object sender, RoutedEventArgs e)
{
    con = new System.Data.SqlClient.SqlConnection();

    sessions = new DataSet();

    con.ConnectionString = "Data Source=.\\SQLEXPRESS;AttachDbFilename=C:\\Users\\md\\PokerDataBase.mdf;Integrated Security=True;Connect Timeout=30;User Instance=True";

    con.Open();

    string sql = "SELECT * From Sessions";
    da = new System.Data.SqlClient.SqlDataAdapter(sql, con);
    da.Fill(sessions, "Sessions");

    con.Close();

    System.Data.SqlClient.SqlCommandBuilder cb;
    cb = new System.Data.SqlClient.SqlCommandBuilder(da);

    DataTable dt = sessions.Tables["Sessions"];

    DataRow table = sessions.Tables["Sessions"].Rows[position];
    table[0] = "Some Data";
    table[1] = "Some Data";
    table[2] = "Some Data";
    table[3] = 2;
    table[4] = 3;
    sessions.Tables["Sessions"].Rows[2].Delete();
    sessions.Tables["Sessions"].Rows.InsertAt(table, 2);

    da.Update(sessions, "Sessions");
}
} 
```

感谢您的关注！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T14:25:15.913

我猜你是在问最后插入的主键值？然后`SCOPE_IDENTY`是你的朋友。[查看此处](http://blog.sqlauthority.com/2007/03/25/sql-server-identity-vs-scope_identity-vs-ident_current-retrieve-last-inserted-identity-of-record/)和[MSDN](http://msdn.microsoft.com/es-es/library/ms190315.aspx)以获取详细信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T14:38:05.897

如果您想从表中获取最后一个主键，并且每次插入时它都会自动递增，那么您只需询问其最大值即可。如果您想从数据库中获取，那么您可以使用范围标识。

# extjs - 按提交按钮两次清除编辑器网格面板中的记录

> ID：11779433
> 
> 赞同：0
> 
> 时间：2012-08-02T14:20:41.957
> 
> 标签：extjs

我有一个编辑器网格面板（在表单内），它正在添加/删除美元金额的发票行项目。网格中的行项目金额被添加到网格外部但在表单内部的“到期金额”字段中。“到期金额”字段中可能有来自其他地方（不是网格）的金额。我可以在网格中的“到期金额”字段中添加和减去几个金额。但是，当我按两次“提交”按钮时（应该只有一次），它会将“应付金额”清除为零。如何确保提交按钮在意外按下两次时不会清除“到期金额”字段？我的代码应该改变什么？谢谢您的帮助。

```
var iLineItemTotalHold = 0;{
        text: 'Submit',
        tooltip:'Submit the line item',
        handler: function(){
            iLineItemGrid.stopEditing();
            // Will this code save changes to the database?
            //iLineItemGrid.getStore().commitChanges();
            iLineItemStore.commitChanges();
            // What I want done here is when the amount field in the grid is saved it
            // updates the 'Amount Due' field (outside of the grid) in the form.
            //Does this code update the Amount Due field in the form?

            var iAmountTotalForLineItems = 0;
            var iAmountInDueField = Ext.getCmp('iAmountDue').value;
            var tempTotal = 0;
            var result = 0;
            iLineItemStore.each(function(addAmount){
                iAmountTotalForLineItems += addAmount.get('i_line_item_amt');

            });

            alert('1 iAmountInDueField: ' + iAmountInDueField +' iLineItemTotalHold: '+iLineItemTotalHold + ' iAmountTotalForLineItems: '+ iAmountTotalForLineItems);
            if (iLineItemTotalHold > iAmountTotalForLineItems  ){
                alert ('if');
                tempTotal =  iLineItemTotalHold - iAmountTotalForLineItems;
                result = iAmountInDueField - tempTotal;
                alert('two: '+result+' = '+iAmountInDueField+' + '+tempTotal );

            }

            else if (iLineItemTotalHold < iAmountTotalForLineItems  ){
                alert ('if2');
                tempTotal = iAmountTotalForLineItems - iLineItemTotalHold;
                result = iAmountInDueField + tempTotal;
                alert('3: '+result+' = '+iAmountInDueField+' - '+tempTotal );
            }

            iLineItemTotalHold  =  iAmountTotalForLineItems;

            Ext.getCmp('iAmountDue').setValue(result);
        },
        scope:this
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T17:01:27.293

在`handler`函数末尾添加：

```
this.setDisabled(true); 
```

禁用您的按钮并阻止更多点击。

然后将侦听器添加到网格的`edit`事件中，以便在编辑完成时再次启用该按钮。就像是：

```
Ext.create('Ext.grid.Panel', {
    // your other grid configs
    listeners: {
        edit: function(editor, edit) {
            var form = edit.grid.up('form'),
                button = form.down('button[text=Submit]');

            // enable the button after the grid is edited
            button.setDisabled(false);
        }
    }
}); 
```

然后我还建议您将按钮启动为`disabled: true`. 首次编辑网格时，该按钮将使用该`edit`处理程序启用。

# tsql - 不明白为什么 DATEADD 不增加数据时间

> ID：11779438
> 
> 赞同：6
> 
> 时间：2012-08-02T14:21:01.423
> 
> 标签：tsql, datetime, dateadd

将数据从 Access 迁移到 SQL Server。SQL Server 表将 inst_id、cons_code 和 eff_date_time 列定义为主键。来自访问的 eff_date_time 数据不是唯一的，所以我试图将秒字段增加一秒，这样我就有一个唯一的日期时间。我无法让 DATEADD 将日期增加 1 秒。附上我的代码。我究竟做错了什么？？？

```
USE [CON-INST]  
GO

DECLARE  
@cv_InstId      VARCHAR(25),  
@cv_ConsCode    VARCHAR(10),  
@cv_EffDateTime DATETIME,  
@lv_count INT  

DECLARE BumpDate_Cursor CURSOR  
STATIC  
FOR  
          SELECT inst_id, cons_code, eff_date_time  
            FROM [CON-INST].[dba].[constants_temp]  
           ORDER BY inst_id  

OPEN BumpDate_Cursor

FETCH FIRST FROM BumpDate_Cursor  
 INTO @cv_InstId, @cv_ConsCode, @cv_EffDateTime

SET @lv_count = 1

// Debug statements  
PRINT '@cv_InstId = ' + @cv_InstId  
PRINT '@cv_ConsCode = ' + @cv_ConsCode  
PRINT '@cv_EffDateTime = ' + CONVERT(VARCHAR, @cv_EffDateTime)  
PRINT '@lv_count = ' + CONVERT(VARCHAR, @lv_count)  

-- Loop to iterate thru instruments identifying the various constant
types that are needed, i.e. the column names - constant 1, constant 2,
constant 3, station, offset, etc.  
WHILE @@FETCH_STATUS = 0  
-- do processing  
BEGIN  
  PRINT '@lv_count before = ' + CONVERT(VARCHAR, @lv_count)  
  PRINT CONVERT(VARCHAR, @cv_EffDateTime, 121)  
  IF (CONVERT(VARCHAR, @cv_EffDateTime,121) = '1901-01-01 17:00:00.000')  
     BEGIN  
        UPDATE [CON-INST].[dba].[constants_temp]  
           SET eff_date_time = DATEADD(second, @lv_count, eff_date_time)  
         WHERE inst_id = @cv_InstId and cons_code = @cv_ConsCode;  
        PRINT CONVERT(VARCHAR, @cv_EffDateTime, 121)  
     END  

  FETCH NEXT FROM BumpDate_Cursor  
   INTO @cv_InstId, @cv_ConsCode, @cv_EffDateTime  

  SET @lv_count = @lv_count + 1  
  PRINT '@lv_count after = ' + CONVERT(VARCHAR, @lv_count)  
END

CLOSE BumpDate_Cursor

DEALLOCATE BumpDate_Cursor 
```

**更新前表中的数据** inst_id cons_code eff_date_time 常量 entry_user 输入代码 entry_date update_user update_date
1 PU 1901-01-01 17:00:00.000 833.2 dba 2012-08-02 11:07:33.770 NULL NULL
1 PU 1901-01-01 17 :00:00.000 821.6 dba 2012-08-02 11:07:33.770 NULL NULL
1 PU 1901-01-01 17:00:00.000 8 dba 2012-08-02 11:07:33.770 NULL NULL
1 PU 1901-01- 01 17:00:00.000 2251 dba 2012-08-02 11:07:33.770 NULL NULL
2 PU 1901-01-01 17:00:00.000 2251 dba 2012-08-02 11:07:33.770 NULL NULL
2 PU 1901- 01-01 17:00:00.000 22 dba 2012-08-02 11:07:33.770 NULL NULL
2 PU 1901-01-01 17:00:00.000 820.9 dba 2012-08-02 11:07:33.773 NULL NULL
2 PU 1901-01-01 17:00:00.000 833.2 dba 2012-08-02 11:07:33.773 NULL NULL
3 PU 1901-01-01 17:00:00.000 833.2 dba 2012-08-02 11:07:33.773 NULL NULL
3 PU 1901-01-01 17:00:00.000 821.5 dba 2012-08-02 11:07 :33.773 NULL NULL
3 PU 1901-01-01 17:00:00.000 8 dba 2012-08-02 11:07:33.773 NULL NULL
3 PU 1901-01-01 17:00:00.000 2095 dba 2012-08-02 11 :07:33.773 NULL NULL
4 PU 1901-01-01 17:00:00.000 2095 dba 2012-08-02 11:07:33.777 NULL NULL
4 PU 1901-01-01 17:00:00.000 22 dba 2012-08- 02 11:07:33.777 空空
4 PU 1901-01-01 17:00:00.000 820.5 dba 2012-08-02 11:07:33.777 NULL NULL
4 PU 1901-01-01 17:00:00.000 833.2 dba 2012-08-02 11:07:33.777 NULL NULL
A PU 1901-01-01 17:00:00.000 833.2 dba 2012-08-02 11:07:33.777 NULL NULL
A PU 1901-01-01 17:00:00.000 816.8 dba 2012-08-02 11:07 :33.777 NULL NULL
A PU 1901-01-01 17:00:00.000 120.5 dba 2012-08-02 11:07:33.780 NULL NULL
A PU 1901-01-01 17:00:00.000 2255 dba 2012-08-02 11 :07:33.780 NULL NULL
A-1 AS 1972-07-01 00:00:00.000 1492 dba 2012-08-02 11:07:33.780 NULL NULL
A-1 AS 1972-07-01 00:00:00.000 986.48 dba 2012-08-02 11:07:33.780 NULL NULL
A-1 AS 1972-07-01 00:00:00.000 0 dba 2012-08-02 11:07:33.780 NULL NULL
A-10 AS 1972-07-01 00:00:00.000 0 dba 2012-08-02 11 :07:33.780 NULL NULL
A-10 AS 1972-07-01 00:00:00.000 986.48 dba 2012-08-02 11:07:33.780 NULL NULL
A-10 AS 1972-07-01 00:00:00.000 1857 dba 2012-08-02 11:07:33.780 NULL NULL
A-11 AS 1972-07-01 00:00:00.000 1896 dba 2012-08-02 11:07:33.783 NULL NULL
A-11 AS 1972-07-01 00 :00:00.000 986.5 dba 2012-08-02 11:07:33.783 NULL NULL
A-11 AS 1972-07-01 00:00:00.000 0 dba 2012-08-02 11:07:33.783 NULL NULL
A-12 AS 1972-07-01 00:00:00.000 0 dba 2012-08-02 11:07:33.783 空空
A-12 AS 1972-07-01 00:00:00.000 986.5 dba 2012-08-02 11:07:33.783 NULL NULL
A-12 AS 1972-07-01 00:00:00.000 1936 dba 2012-08-02 11 :07:33.783 空空

**执行期间 PRINT 语句的输出**

@cv_InstId = 1

@cv_ConsCode = PU

@cv_EffDateTime = 1901 年 1 月 1 日下午 5:00

@lv_count = 1

更新前：1901-01-01 17:00:00.000

@lv_count = 2

更新前：1901-01-01 17:00:00.000

@lv_count = 3

更新前：1901-01-01 17:00:00.000

@lv_count = 4

更新前：1901-01-01 17:00:00.000

@lv_count = 5

更新前：1901-01-01 17:00:00.000

@lv_count = 6

更新前：1901-01-01 17:00:00.000

@lv_count = 7

更新前：1901-01-01 17:00:00.000

@lv_count = 8

更新前：1901-01-01 17:00:00.000

@lv_count = 9

更新前：1901-01-01 17:00:00.000

@lv_count = 10

更新前：1901-01-01 17:00:00.000

@lv_count = 11

更新前：1901-01-01 17:00:00.000

@lv_count = 12

更新前：1901-01-01 17:00:00.000

@lv_count = 13

更新前：1901-01-01 17:00:00.000

@lv_count = 14

更新前：1901-01-01 17:00:00.000

@lv_count = 15

更新前：1901-01-01 17:00:00.000

@lv_count = 16

更新前：1901-01-01 17:00:00.000

@lv_count = 17

更新前：1901-01-01 17:00:00.000

@lv_count = 18

更新前：1901-01-01 17:00:00.000

@lv_count = 19

更新前：1901-01-01 17:00:00.000

@lv_count = 20

更新前：1901-01-01 17:00:00.000

@lv_count = 21

更新前：1972-07-01 00:00:00.000

@lv_count = 22

更新前：1972-07-01 00:00:00.000

@lv_count = 23

更新前：1972-07-01 00:00:00.000
@lv_count = 24

更新前：1972-07-01 00:00:00.000

@lv_count = 25

更新前：1972-07-01 00:00:00.000

**执行后的表输出**
inst_id cons_code eff_date_time 常量 entry_user entry_date update_user update_date
1 PU 1901-01-01 17:00:00.000 833.2 dba 2012-08-02 11:28:27.287 NULL NULL
1 PU 1901-01-01 17:00:00.000 821.6 dba 2012-08-02 11:28:27.287 NULL NULL
1 PU 1901-01-01 17:00:00.000 8 dba 2012-08-02 11:28:27.290 NULL NULL
1 PU 1901-01-01 17:00 :00.000 2251 dba 2012-08-02 11:28:27.290 NULL NULL
2 PU 1901-01-01 17:00:00.000 2251 dba 2012-08-02 11:28:27.290 NULL NULL
2 PU 1901-01-01 17 :00:00.000 22 dba 2012-08-02 11:28:27.290 NULL NULL
2 PU 1901-01-01 17:00:00.000 820.9 dba 2012-08-02 11:28:27.290 NULL NULL
2 PU 1901-01-01 17:00:00.000 833.2 dba 2012-08-02 11:28:27.290 NULL NULL
3 PU 1901-01-01 17:00:00.000 833.2 dba 2012-08-02 11:28:27.290 NULL NULL
3 PU 1901-01-01 17:00:00.000 821.5 dba 2012-08-02 11:28 :27.290 NULL NULL
3 PU 1901-01-01 17:00:00.000 8 dba 2012-08-02 11:28:27.290 NULL NULL
3 PU 1901-01-01 17:00:00.000 2095 dba 2012-08-02 11 :28:27.293 NULL NULL
4 PU 1901-01-01 17:00:00.000 2095 dba 2012-08-02 11:28:27.293 NULL NULL
4 PU 1901-01-01 17:00:00.000 22 dba 2012-08- 02 11:28:27.293 空空
4 PU 1901-01-01 17:00:00.000 820.5 dba 2012-08-02 11:28:27.293 NULL NULL
4 PU 1901-01-01 17:00:00.000 833.2 dba 2012-08-02 11:28:27.293 NULL NULL
A PU 1901-01-01 17:00:00.000 833.2 dba 2012-08-02 11:28:27.293 NULL NULL
A PU 1901-01-01 17:00:00.000 816.8 dba 2012-08-02 11:28 :27.293 NULL NULL
A PU 1901-01-01 17:00:00.000 120.5 dba 2012-08-02 11:28:27.297 NULL NULL
A PU 1901-01-01 17:00:00.000 2255 dba 2012-08-02 11 :28:27.297 NULL NULL
A-1 AS 1972-07-01 00:00:00.000 1492 dba 2012-08-02 11:28:27.297 NULL NULL
A-1 AS 1972-07-01 00:00:00.000 986.48 dba 2012-08-02 11:28:27.297 NULL NULL
A-1 AS 1972-07-01 00:00:00.000 0 dba 2012-08-02 11:28:27.297 NULL NULL
A-10 AS 1972-07-01 00:00:00.000 0 dba 2012-08-02 11 :28:27.297 NULL NULL
A-10 AS 1972-07-01 00:00:00.000 986.48 dba 2012-08-02 11:28:27.300 NULL NULL
A-10 AS 1972-07-01 00:00:00.000 1857 dba 2012-08-02 11:28:27.300 NULL NULL
A-11 AS 1972-07-01 00:00:00.000 1896 dba 2012-08-02 11:28:27.300 NULL NULL
A-11 AS 1972-07-01 00 :00:00.000 986.5 dba 2012-08-02 11:28:27.300 NULL NULL
A-11 AS 1972-07-01 00:00:00.000 0 dba 2012-08-02 11:28:27.300 NULL NULL
A-12 AS 1972-07-01 00:00:00.000 0 dba 2012-08-02 11:28:27.300 空空
A-12 AS 1972-07-01 00:00:00.000 986.5 dba 2012-08-02 11:28:27.300 NULL NULL
A-12 AS 1972-07-01 00:00:00.000 1936 dba 2012-08-02 11 :28:27.300 NULL NULL
A-13 AS 1972-07-01 00:00:00.000 1976 dba 2012-08-02 11:28:27.300 NULL NULL
A-13 AS 1972-07-01 00:00:00.000 986.46 dba 2012-08-02 11:28:27.300 NULL NULL
A-13 AS 1972-07-01 00:00:00.000 0 dba 2012-08-02 11:28:27.303 NULL NULL
A-14 AS 1972-07-01 00 :00:00.000 0 dba 2012-08-02 11:28:27.303 NULL NULL
A-14 AS 1972-07-01 00:00:00.000 986.48 dba 2012-08-02 11:28:27.303 NULL NULL
A-14 AS 1972-07-01 00:00:00.000 2016 dba 2012-08-02 11:28:27.303 空空
A-15 AS 1972-07-01 00:00:00.000 0 dba 2012-08-02 11:28:27.303 NULL NULL

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T04:09:41.977

代码有一些问题，但主要是更新语句 - 它一次更新数据库中的多条记录。例如，当循环运行第一次更新时，它会更新 inst_id = '1' 和 const_code = 'PU' 的四条记录，每条记录增加 1 秒。在第二次迭代中，它为所有四个记录添加 2 秒，在第三次迭代中为所有四个记录添加 3 秒，最后在第四次迭代中为所有四个记录添加 4 秒（使它们全部为 1+2+3+4 =下午 5 点后 10 秒）。

最好的解决方案是添加一个新列 ID，该列的类型为 INT IDENITY PRIMARY KEY，并删除 inst_id、cons_code 和 eff_date_time 列上的复合主键。

但是，如果由于某种原因，您必须在这三个字段上使用复合主键，那么这里是执行此操作的代码。

注意：您不能只为每个日期添加一些唯一的数字，因为您可能会达到这样的程度，即您已经进行了如此多的一秒增量，以至于它实际上与您在表中遇到的另一个值发生冲突。这就是代码中 EXISTS 部分的原因。

```
drop table [constants_temp]
go
drop table [constants_new]
go

create table [constants_temp] (
  inst_id       varchar(25),
  cons_code     varchar(10),
  eff_date_time datetime
)

insert into [constants_temp] (inst_id, cons_code, eff_date_time) values ('1',    'PU', '1901-01-01 17:00:00.000')
insert into [constants_temp] (inst_id, cons_code, eff_date_time) values ('1',    'PU', '1901-01-01 17:00:00.000')
insert into [constants_temp] (inst_id, cons_code, eff_date_time) values ('1',    'PU', '1901-01-01 17:00:00.000')
insert into [constants_temp] (inst_id, cons_code, eff_date_time) values ('1',    'PU', '1901-01-01 17:00:00.000')
insert into [constants_temp] (inst_id, cons_code, eff_date_time) values ('2',    'PU', '1901-01-01 17:00:00.000')
insert into [constants_temp] (inst_id, cons_code, eff_date_time) values ('2',    'PU', '1901-01-01 17:00:00.000')
insert into [constants_temp] (inst_id, cons_code, eff_date_time) values ('2',    'PU', '1901-01-01 17:00:00.000')
insert into [constants_temp] (inst_id, cons_code, eff_date_time) values ('2',    'PU', '1901-01-01 17:00:00.000')
insert into [constants_temp] (inst_id, cons_code, eff_date_time) values ('3',    'PU', '1901-01-01 17:00:00.000')
insert into [constants_temp] (inst_id, cons_code, eff_date_time) values ('3',    'PU', '1901-01-01 17:00:00.000')
insert into [constants_temp] (inst_id, cons_code, eff_date_time) values ('3',    'PU', '1901-01-01 17:00:00.000')
insert into [constants_temp] (inst_id, cons_code, eff_date_time) values ('3',    'PU', '1901-01-01 17:00:00.000')
insert into [constants_temp] (inst_id, cons_code, eff_date_time) values ('4',    'PU', '1901-01-01 17:00:00.000')
insert into [constants_temp] (inst_id, cons_code, eff_date_time) values ('4',    'PU', '1901-01-01 17:00:00.000')
insert into [constants_temp] (inst_id, cons_code, eff_date_time) values ('4',    'PU', '1901-01-01 17:00:00.000')
insert into [constants_temp] (inst_id, cons_code, eff_date_time) values ('4',    'PU', '1901-01-01 17:00:00.000')
insert into [constants_temp] (inst_id, cons_code, eff_date_time) values ('A',    'PU', '1901-01-01 17:00:00.000')
insert into [constants_temp] (inst_id, cons_code, eff_date_time) values ('A',    'PU', '1901-01-01 17:00:00.000')
insert into [constants_temp] (inst_id, cons_code, eff_date_time) values ('A',    'PU', '1901-01-01 17:00:00.000')
insert into [constants_temp] (inst_id, cons_code, eff_date_time) values ('A',    'PU', '1901-01-01 17:00:00.000')
insert into [constants_temp] (inst_id, cons_code, eff_date_time) values ('A-1',  'AS', '1972-07-01 00:00:00.000')
insert into [constants_temp] (inst_id, cons_code, eff_date_time) values ('A-1',  'AS', '1972-07-01 00:00:00.000')
insert into [constants_temp] (inst_id, cons_code, eff_date_time) values ('A-1',  'AS', '1972-07-01 00:00:00.000')
insert into [constants_temp] (inst_id, cons_code, eff_date_time) values ('A-10', 'AS', '1972-07-01 00:00:00.000')
insert into [constants_temp] (inst_id, cons_code, eff_date_time) values ('A-10', 'AS', '1972-07-01 00:00:00.000')
insert into [constants_temp] (inst_id, cons_code, eff_date_time) values ('A-10', 'AS', '1972-07-01 00:00:00.000')
insert into [constants_temp] (inst_id, cons_code, eff_date_time) values ('A-11', 'AS', '1972-07-01 00:00:00.000')
insert into [constants_temp] (inst_id, cons_code, eff_date_time) values ('A-11', 'AS', '1972-07-01 00:00:00.000')
insert into [constants_temp] (inst_id, cons_code, eff_date_time) values ('A-11', 'AS', '1972-07-01 00:00:00.000')
insert into [constants_temp] (inst_id, cons_code, eff_date_time) values ('A-12', 'AS', '1972-07-01 00:00:00.000')
insert into [constants_temp] (inst_id, cons_code, eff_date_time) values ('A-12', 'AS', '1972-07-01 00:00:00.000')
insert into [constants_temp] (inst_id, cons_code, eff_date_time) values ('A-12', 'AS', '1972-07-01 00:00:00.000')

-- Create a table with the idential structure as [constants_temp], except with the composite primary key on all three fields
create table [constants_new] (
  inst_id       varchar(25),
  cons_code     varchar(10),
  eff_date_time datetime,
  PRIMARY KEY (inst_id, cons_code, eff_date_time)
)

-- Variables to hold the column values from each row in the cursor
DECLARE @Cur_inst_id       VARCHAR(25)
DECLARE @Cur_cons_code     VARCHAR(10)
DECLARE @Cur_eff_date_time DATETIME

-- Go through all of the records in the [constants_temp] table
DECLARE BumpDate_Cursor CURSOR FOR
 SELECT inst_id, 
        cons_code, 
        eff_date_time  
   FROM [constants_temp]  
  ORDER BY inst_id, cons_code, eff_date_time

-- Open the cursor and get the first record
OPEN BumpDate_Cursor
FETCH NEXT FROM BumpDate_Cursor INTO @Cur_inst_id, @Cur_cons_code, @Cur_eff_date_time

-- For all the the records in the cursor...
WHILE @@FETCH_STATUS = 0  
  BEGIN
    -- While there is already a record with a matching institution code, cons code, and effective date...
    WHILE EXISTS (SELECT inst_id
                    FROM [constants_new] 
                   WHERE inst_id       = @Cur_inst_id       and
                         cons_code     = @Cur_cons_code     and
                         eff_date_time = @Cur_eff_date_time)
      BEGIN
        -- Keep incrementing the effective date by one second
        set @Cur_eff_date_time = DATEADD(second, 1, @Cur_eff_date_time)
      END

    -- Insert the new unique row
    INSERT INTO [constants_new] (inst_id, cons_code, eff_date_time) VALUES (@Cur_inst_id, @Cur_cons_code, @Cur_eff_date_time)

    -- Get the next record in the cursor
    FETCH NEXT FROM BumpDate_Cursor INTO @Cur_inst_id, @Cur_cons_code, @Cur_eff_date_time
  END

-- Close and deallocate the cursor
CLOSE BumpDate_Cursor
DEALLOCATE BumpDate_Cursor

-- Show the results
select * from [constants_new] order by inst_id, cons_code, eff_date_time 
```

# opengl-es - Opengl-es 1.1灰度FBO

> ID：11779440
> 
> 赞同：0
> 
> 时间：2012-08-02T14:21:02.310
> 
> 标签：opengl-es, fbo

我有 FBO，我只是将它加载到纹理和正交 (2D) 网格中。如何灰度化我的 FBO 纹理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:46:28.400

[Apple 在其GLImageProcessing 示例](https://developer.apple.com/library/ios/#samplecode/GLImageProcessing/Introduction/Intro.html)中使用以下 OpenGL ES 1.1 代码将图像转换为灰度：

```
static void greyscale(V2fT2f *quad, float t)    // t = 1 for standard perceptual weighting
{
    GLfloat lerp[4] = { 1.0, 1.0, 1.0, 0.5 };
    GLfloat avrg[4] = { .667, .667, .667, 0.5 };    // average
    GLfloat prcp[4] = { .646, .794, .557, 0.5 };    // perceptual NTSC
    GLfloat dot3[4] = { prcp[0]*t+avrg[0]*(1-t), prcp[1]*t+avrg[1]*(1-t), prcp[2]*t+avrg[2]*(1-t), 0.5 };

    // One pass using two units:
    // Unit 0 scales and biases into [0.5..1.0]
    // Unit 1 dot products with perceptual weights

    glVertexPointer  (2, GL_FLOAT, sizeof(V2fT2f), &quad[0].x);
    glTexCoordPointer(2, GL_FLOAT, sizeof(V2fT2f), &quad[0].s);
    glTexEnvi(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_COMBINE);
    glTexEnvi(GL_TEXTURE_ENV, GL_COMBINE_RGB,      GL_INTERPOLATE);
    glTexEnvi(GL_TEXTURE_ENV, GL_SRC0_RGB,         GL_TEXTURE);
    glTexEnvi(GL_TEXTURE_ENV, GL_SRC1_RGB,         GL_CONSTANT);
    glTexEnvi(GL_TEXTURE_ENV, GL_SRC2_RGB,         GL_CONSTANT);
    glTexEnvi(GL_TEXTURE_ENV, GL_COMBINE_ALPHA,    GL_REPLACE);
    glTexEnvi(GL_TEXTURE_ENV, GL_SRC0_ALPHA,       GL_TEXTURE);
    glTexEnvfv(GL_TEXTURE_ENV,GL_TEXTURE_ENV_COLOR, lerp);

    // Note: we prefer to dot product with primary color, because
    // the constant color is stored in limited precision on MBX
    glActiveTexture(GL_TEXTURE1);
    glEnable(GL_TEXTURE_2D);
    glTexEnvi(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_COMBINE);
    glTexEnvi(GL_TEXTURE_ENV, GL_COMBINE_RGB,      GL_DOT3_RGB);
    glTexEnvi(GL_TEXTURE_ENV, GL_SRC0_RGB,         GL_PREVIOUS);
    glTexEnvi(GL_TEXTURE_ENV, GL_SRC1_RGB,         GL_PRIMARY_COLOR);
    glTexEnvi(GL_TEXTURE_ENV, GL_COMBINE_ALPHA,    GL_REPLACE);
    glTexEnvi(GL_TEXTURE_ENV, GL_SRC0_ALPHA,       GL_PREVIOUS);

    glColor4f(dot3[0], dot3[1], dot3[2], dot3[3]);
    validateTexEnv();
    glDrawArrays(GL_TRIANGLE_STRIP, 0, 4);

    // Restore state
    glDisable(GL_TEXTURE_2D);
    glActiveTexture(GL_TEXTURE0);
} 
```

我现在完全放弃了 1.1，尤其是在图像处理方面，但灰度转换是您可以在 1.1 中实现的少数效果之一。

# c# - 解码 html 标签，以便在它返回服务器时可以读取它，更具体地说是控制器

> ID：11779442
> 
> 赞同：0
> 
> 时间：2012-08-02T14:21:07.810
> 
> 标签：c#, html, asp.net-mvc-3, html-encode

我的引擎是 Aspx。

如何解码/编码文本框中的 html 标签。我有 html 标签
以使其更具可读性。我尝试了 ValidationRequest 和 htmlDecode(freqQuestion.Answer) 但没有运气。我只是不断收到同样的信息。

> “/管理员”应用程序中的服务器错误。
> 
> 从客户端检测到潜在危险的 Request.Form 值（QuestionAnswer="...ics 电话：
> 123-456-7890
> 
> 说明：请求验证检测到潜在危险的客户端输入值，请求的处理已中止。此值可能表示试图破坏您的应用程序的安全性，例如跨站点脚本攻击。要允许页面覆盖应用程序请求验证设置，请将 httpRuntime 配置部分中的 requestValidationMode 属性设置为 requestValidationMode="2.0"。例子： 。设置此值后，您可以通过在 Page 指令或配置部分中设置 validateRequest="false" 来禁用请求验证。但是，强烈建议您的应用程序在这种情况下明确检查所有输入。有关详细信息，请参阅 [http://go.microsoft.com/fwlink/?LinkId=153133](http://go.microsoft.com/fwlink/?LinkId=153133)。

```
View Page

  <%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master" validateRequest="false" Inherits="System.Web.Mvc.ViewPage<dynamic>" %>

<asp:Content ID="Content1" ContentPlaceHolderID="TitleContent" runat="server">
    EditFreqQuestionsUser
</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">

<script type="text/javascript">
    $(document).ready(function () {
        $("#freqQuestionsUserUpdateButton").click(function () {
            $("#updateFreqQuestionsUser").submit();
        });
    });
</script>
<h2>Edit Freq Questions User </h2>

<%Administrator.DarkstarAdminProductionServices.FreqQuestionsUser freqQuestionsUser = ViewBag.freqQuestionsUser != null ? ViewBag.freqQuestionsUser : new Administrator.DarkstarAdminProductionServices.FreqQuestionsUser(); %>
<%List<string> UserRoleList = Session["UserRoles"] != null ? (List<string>)Session["UserRoles"] : new List<string>(); %>
<form id="updateFreqQuestionsUser" action="<%=Url.Action("SaveFreqQuestionsUser","Prod")%>" method="post">
    <table> 
        <tr>
            <td colspan="3" class="tableHeader">Freq Questions User Details <input type ="hidden" value="<%=freqQuestionsUser.freqQuestionsUserId%>" name="freqQuestionsUserId"/> </td>
        </tr>
         <tr>
            <td colspan="2" class="label">Question Description:</td>
            <td class="content">
                <input type="text" maxlength="2000" name="QuestionDescription" value="<%=freqQuestionsUser.questionDescription%>" />
            </td>
        </tr>
         <tr>
            <td colspan="2" class="label">QuestionAnswer:</td>
            <td class="content">
                <input type="text" maxlength="2000" name="QuestionAnswer" value="<%=Server.HtmlDecode(freqQuestionsUser.questionAnswer)%>" />
            </td>
        </tr>
        <tr>
            <td colspan="3" class="tableFooter">
                    <br />
                    <a id="freqQuestionsUserUpdateButton" href="#" class="regularButton">Save</a>
                    <a href="javascript:history.back()" class="regularButton">Cancel</a>
            </td> 
        </tr>
    </table>
</form>
</asp:Content> 
```

**控制器**

```
 [AuthorizeAttribute(AdminRoles = "EditFreqQuestionsUser")]
    public ActionResult SaveFreqQuestionsUser(string QuestionDescription, string QuestionAnswer)
    {
        Guid freqQuestionsUserId = Request.Form["freqQuestionsUserId"] != null ? new Guid(Request.Form["freqQuestionsUserId"]) : Guid.Empty;

        //load agreement eula ref
        AdminProductionServices.FreqQuestionsUser freqqQuestionsUser = Administrator.Models.AdminProduction.FreqQuestionsUser.LoadFreqQuestionsUser(freqQuestionsUserId, string.Empty, string.Empty)[0];

        freqqQuestionsUser.questionDescription = QuestionDescription;
        freqqQuestionsUser.questionAnswer = QuestionAnswer;

        //save it
               Administrator.Models.AdminProduction.FreqQuestionsUser.addFreqQuestionsUser(freqqQuestionsUser);

        return RedirectToAction("SearchFreqQuestionsUser", "Prod", new { FreqQuestionsUserId = freqQuestionsUserId });
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:30:51.923

ValidateRequest 指令不适用于 MVC，因为与 WinForms 不同，.aspx 文件不是接收请求的实体。控制器是。因此，控制器是您应该禁用验证的地方。只需将 [ValidateInput (false)] 属性应用于您的操作或整个控制器，运行时就会传递您的标签。

# javascript - D3 中的鼠标事件和画笔

> ID：11779450
> 
> 赞同：12
> 
> 时间：2012-08-02T14:21:34.993
> 
> 标签：javascript, d3.js

我目前正在尝试自定义在[http://nvd3.com/ghpages/lineWithFocus.html](http://nvd3.com/ghpages/lineWithFocus.html)找到的时间序列图示例。这是使用 nvd3 实现的，它是 d3 之上的一个库。我希望在顶部图表中获得数据点的工具提示，但也希望能够在*同一*图表中选择一个范围，如示例中底部的“取景器”图表。

为此，我在基本折线图示例中添加了一个“画笔”（参见[http://nvd3.com/ghpages/line.html](http://nvd3.com/ghpages/line.html)）。范围选择就像一个魅力，但是，数据点的工具提示不再起作用，除了刚刚超出轴范围的点。看起来，位于画笔区域的数据点不再获得鼠标事件，并且画笔将它们全部吸收。

需要更改哪些行的数据点接收鼠标事件（特别是鼠标悬停，我不关心点击）？

尝试使用捕获所有事件

```
d3.select(window).on("...", function) 
```

如果适用，然后在数据点上触发一些“鼠标悬停”事件。这怎么能实现（我不想遍历所有数据点，然后检查哪个最接近鼠标事件......）？有没有更直接的方法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-11T10:46:22.590

如果您将在“画笔”上的任何位置*检查元素*（Chorme），您会注意到在您试图捕捉事件的其他图形元素之后构建的元素。

d3.brush 函数正在创建一个隐藏的背景来捕捉鼠标事件。

```
// An invisible, mouseable area for starting a new brush.
      bg.enter().append("rect")
          .attr("class", "background")
          .style("visibility", "hidden")
          .style("cursor", "crosshair"); 
```

所以解决方案是在绘制数据（线、路径、散点图圆等）**之前调用画笔。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T01:20:02.343

因为画笔覆盖会抓住你的鼠标事件——你需要它——我不确定你能不能解决这个问题。最终，事件冒泡仅适用于 DOM 树，而这些元素充其量只能是兄弟元素。

可能不是迭代所有数据点，而是只迭代那些被画笔选中的数据点。查看[d3.touches(container)](https://github.com/mbostock/d3/wiki/Selections#wiki-d3_touches)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-26T14:29:07.993

我有同样的问题。我意识到画笔覆盖了其他物体（在我的例子中是圆圈）。所以，首先我创建了画笔矩形，然后我创建了其他对象。这样我也可以访问其他对象的事件。

# java - 如何指定我想要获取/返回的属性并在字段中返回一对多关系？

> ID：11779454
> 
> 赞同：0
> 
> 时间：2012-08-02T14:21:58.050
> 
> 标签：java, hibernate

嗨，我有一个带有休眠注释的简单产品 Pojo。

```
Class Product
Product ID
name
title
make
colors (1..*) lazy 
```

我可以知道有没有办法在单行文本中只获取产品 ID、名称和颜色？

例子：

```
name: "Monitor"
colors: "Green; Red; Blue;" 
```

原因：用户需要 5000 个列表的列表，它只需要名称并在字段中列出颜色。

Hibernate 将需要 1 个查询（前 5000 个）+ 5000 个查询（颜色）来获取数据。我希望仅在 1 个查询中获得它。

使用：休眠标准

补充：我已经设置了 criteria.maxResult(5000) 并且当我将 FetchMOdel.JOIN 与 (Criteria.DISTINCT_ROOT_ENTITY) 一起使用时；它为我提供了不到 5000 个完整的结果，这是因为每个“颜色”都是连续返回的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T14:24:42.130

使用 join fetch 执行以下查询，从而将颜色与产品一起加载：

```
select distinct product from Product product 
left join fetch product.colors color 
where ... 
```

HQL 在[Hibernate 文档](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#queryhql-joins)中有很好的描述：

> “获取”连接允许使用单个选择来初始化值的关联或集合以及它们的父对象。这在集合的情况下特别有用。它有效地覆盖了关联和集合的映射文件的外部连接和惰性声明。

用标准来做是相似的（只是更乏味：只有当 where 子句真的是动态的时候才这样做）：

```
Criteria c = session.createCriteria(Product.class, "product");
c.setFetchMode("product.colors", FetchMode.JOIN);
c.setResultTransformer(Criteria.DISTINCT_ROOT_ENTITY);
c.add(...); 
```

[这是文档](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#querycriteria-dynamicfetching)的相关部分：

> 您可以使用 setFetchMode() 在运行时指定关联获取语义

你已经在这里问了很多 Hibernate 问题。你为什么不阅读文档？

编辑：

从评论中，您似乎知道如何做您想做的事，但是您在应用最大数量的结果时遇到了问题。

这个问题最简单的解决方案是执行第一个查询，限制为 5000，只加载产品的 ID。然后执行第二个查询，不限于，加载产品及其颜色，在第一个查询检索到的 ID 集中有一个 ID：

```
select product.id from Product product where ...

select distinct product from Product product 
left join fetch product.colors color 
where product.id in (:productIds) 
```

请注意，某些数据库（例如 Oracle）会限制您可以在`IN`子句中放入的元素数量（Oracle 最多 1000 个元素）。因此，您可能必须将 5000 个 ID 的集合划分为 1000 个元素的集合，并对每个分区执行查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T14:31:37.883

你的数据库是什么？您可以`colorsText`在带有`@Formula('...')`注释的实体中定义 a 。但是您应该编写一个查询，它为每一行返回一个字符串。

在大多数数据库中都有某种`concatenate`聚合函数，只需找到您数据库的函数即可。

# c# - 如何自动裁剪图像？

> ID：11779455
> 
> 赞同：4
> 
> 时间：2012-08-02T14:22:02.857
> 
> 标签：c#, image-processing, crop

我正在尝试制作扫描应用程序。该应用程序将扫描文档并在图片框中显示图像。我面临的问题是图像（保存在扫描仪中的文档图像或说“真实”图像）显示在另一个具有某些背景的图像中（该背景颜色也在变化）它看起来像这个图像。
![在此处输入图像描述](../Images/e6456c6dc971b36df208e31563c30440.png)
我尝试了很多东西，但没有给我一个完美的结果，我用 forge.net 尝试了它。这是我尝试过的代码。

```
public static System.Drawing.Image AforgeAutoCrop(Bitmap selectedImage)
    {
        Bitmap autoCropImage = null;
    try
    {

        autoCropImage = selectedImage;
        // create grayscale filter (BT709)
        Grayscale filter = new Grayscale(0.2125, 0.7154, 0.0721);
        Bitmap grayImage = filter.Apply(autoCropImage);
        // create instance of skew checker
        DocumentSkewChecker skewChecker = new DocumentSkewChecker();
        // get documents skew angle
        double angle = skewChecker.GetSkewAngle(grayImage);
        // create rotation filter
        RotateBilinear rotationFilter = new RotateBilinear(-angle);
        rotationFilter.FillColor = Color.White;
        // rotate image applying the filter
        Bitmap rotatedImage = rotationFilter.Apply(grayImage);
        new ContrastStretch().ApplyInPlace(grayImage);
        new Threshold(100).ApplyInPlace(grayImage);
        BlobCounter bc = new BlobCounter();
        bc.FilterBlobs = true;
        // bc.MinWidth = 500;
        //bc.MinHeight = 500;
        bc.ProcessImage(grayImage);
        Rectangle[] rects = bc.GetObjectsRectangles();
        MemoryStream writeName = new MemoryStream();
        if (rects.Length == 0)
        {
            System.Windows.Forms.MessageBox.Show("No rectangle found in image ");
        }
        else if (rects.Length == 1)
        {
            Bitmap cropped = new Crop(rects[0]).Apply(autoCropImage);
            autoCropImage = cropped;
           // pictureBox1.Image = cropped;
        }
        else if (rects.Length > 1)
        {
            // get largets rect
            Console.WriteLine("Using largest rectangle found in image ");
            var r2 = rects.OrderByDescending(r => r.Height * r.Width).ToList();
            //var r2 = rects.OrderByDescending(r => r.Height < 1500 && r.Width < 1000).ToList();
            Bitmap cropped = new Crop(r2[0]).Apply(autoCropImage);

            Graphics gr = Graphics.FromImage(cropped);
            gr.DrawRectangles(new Pen(Color.Red), rects);
            autoCropImage = cropped;
           // pictureBox1.Image = cropped;

        }
        else
        {
            Console.WriteLine("Huh? on image ");
        }
    }
    catch(Exception ex)
    {
        MessageBox.Show(ex.Message);
    }

    return autoCropImage;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T11:18:56.020

我将您的代码更改为此并且运行良好。谢谢

```
 public static System.Drawing.Image AforgeAutoCrop(Bitmap selectedImage)
        {
            Bitmap autoCropImage = null;
            try
            {

                autoCropImage = selectedImage;
                // create grayscale filter (BT709)
                Grayscale filter = new Grayscale(0.2125, 0.7154, 0.0721);
                Bitmap grayImage = filter.Apply(autoCropImage);
                // create instance of skew checker
                DocumentSkewChecker skewChecker = new DocumentSkewChecker();
                // get documents skew angle
                double angle = skewChecker.GetSkewAngle(grayImage);
                // create rotation filter
                RotateBilinear rotationFilter = new RotateBilinear(-angle);
                rotationFilter.FillColor = Color.White;
                // rotate image applying the filter
                Bitmap rotatedImage = rotationFilter.Apply(grayImage);
                new ContrastStretch().ApplyInPlace(rotatedImage);
                new Threshold(100).ApplyInPlace(rotatedImage);
                BlobCounter bc = new BlobCounter();
                bc.FilterBlobs = true;
                // bc.MinWidth = 500;
                //bc.MinHeight = 500;
                bc.ProcessImage(rotatedImage);
                Rectangle[] rects = bc.GetObjectsRectangles();

                if (rects.Length == 0)
                {
                    System.Windows.Forms.MessageBox.Show("No rectangle found in image ");
                }
                else if (rects.Length == 1)
                {
                    autoCropImage = rotatedImage.Clone(rects[0], rotatedImage.PixelFormat); ;
                }
                else if (rects.Length > 1)
                {
                    // get largets rect
                    Console.WriteLine("Using largest rectangle found in image ");
                    var r2 = rects.OrderByDescending(r => r.Height * r.Width).ToList();
                    autoCropImage = rotatedImage.Clone(r2[1], rotatedImage.PixelFormat);
                }
                else
                {
                    Console.WriteLine("Huh? on image ");
                }
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message);
            }

            return autoCropImage;
        } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T19:29:36.790

我假设你总是有一张具有不同前景和背景的图像，并且你想做一些像热心的背景裁剪一样的事情。

在这种情况下，我会做一些类似于区域种植的事情。从可以保证背景像素的点开始。

获取另一个图像（或矩阵或其他），初始化为零，并将相应的像素值设置为 1。如果任何相邻像素在原始图像中的阈值范围内，则递归移动到它们并将其对应的像素值设置为 0 为出色地。

那是：

```
map = 0's, size of image
function f(x,y,image,map)
    if map(x,y) is not  0
        return
    if pixel value at image(x,y)<T
        map(x,y) = 1;
        for all neighbors of x,y
           function([neighbor coordinates],image,map)
    else
        map(x,y) = 2;
 end 
```

现在地图应该将所有背景像素设置为 1，前景设置为 2。您可以将其更改为允许多个对象和阈值等。您可能希望阈值是值变化而不是绝对值。

然后只需找到最小和最大 x 和 y 并将该范围内的像素存储到新图像中。

我希望这符合您的需要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T14:25:50.773

您可以使用[AForge.NET 图像处理](http://www.codeproject.com/Articles/9727/Image-Processing-Lab-in-C)
边缘检测器：[http ://www.aforgenet.com/framework/features/edge_detectors_filters.html](http://www.aforgenet.com/framework/features/edge_detectors_filters.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-15T16:36:35.060

Mostafa HK 的代码对我有用。我正在使用这个函数来预处理 YouTube 缩略图（去除黑边；一个常见问题），我确实必须对他的代码进行一些小的更正：

1）摆脱了轮换（不知道那是为了什么）

2) 我将门槛从 100 降低到 25。

3) 克隆最终图像时，我从原始 autoCropImage 中执行克隆，而不是从 rotateImage 中执行克隆（同样，不确定旋转的目的）。

我认为真正的秘诀是降低门槛。这减少了代码找到的矩形数量，现在我可以正确裁剪所有形式的缩略图（顶部和底部为黑色的宽屏，左右两侧为黑色的全屏）。

```
 public static System.Drawing.Image AforgeAutoCrop(Bitmap selectedImage)
    {
        Bitmap autoCropImage = null;
        try
        {

            autoCropImage = selectedImage;
            // create grayscale filter (BT709)
            Grayscale filter = new Grayscale(0.2125, 0.7154, 0.0721);
            Bitmap grayImage = filter.Apply(autoCropImage);
            // create instance of skew checker
            DocumentSkewChecker skewChecker = new DocumentSkewChecker();
            // get documents skew angle
            double angle = 0; // skewChecker.GetSkewAngle(grayImage);
            // create rotation filter
            RotateBilinear rotationFilter = new RotateBilinear(-angle);
            rotationFilter.FillColor = Color.White;
            // rotate image applying the filter
            Bitmap rotatedImage = rotationFilter.Apply(grayImage);
            new ContrastStretch().ApplyInPlace(rotatedImage);
            new Threshold(25).ApplyInPlace(rotatedImage);
            BlobCounter bc = new BlobCounter();
            bc.FilterBlobs = true;
            // bc.MinWidth = 500;
            //bc.MinHeight = 500;
            bc.ProcessImage(rotatedImage);
            Rectangle[] rects = bc.GetObjectsRectangles();

            if (rects.Length == 0)
            {
                // CAN'T CROP
            }
            else if (rects.Length == 1)
            {
                autoCropImage = autoCropImage.Clone(rects[0], autoCropImage.PixelFormat); ;
            }
            else if (rects.Length > 1)
            {
                // get largets rect
                Console.WriteLine("Using largest rectangle found in image ");
                var r2 = rects.OrderByDescending(r => r.Height * r.Width).ToList();
                autoCropImage = autoCropImage.Clone(r2[0], autoCropImage.PixelFormat);
            }
            else
            {
                Console.WriteLine("Huh? on image ");
            }
        }
        catch (Exception ex)
        {
            //MessageBox.Show(ex.Message);
            //CAN'T CROP
        }

        return autoCropImage;
    } 
```

[https://stackoverflow.com/search?q=youtube+thumbnail+crop](https://stackoverflow.com/search?q=youtube+thumbnail+crop)

# extjs - 如何在列表中有多个列

> ID：11779462
> 
> 赞同：0
> 
> 时间：2012-08-02T14:22:20.413
> 
> 标签：extjs, sencha-touch-2

我已经使用**Sencha Touch实现了一个****电话间隙**应用程序，

 ****`I Want to add 4 columns in a list`**它自己如下图所示

![在此处输入图像描述](../Images/475f576be6e9385e818c7c2a49dc66cb.png).

*现在我使用了 4 个宽度为 25% 的不同列表...，*

但**我需要在每行中显示 4 列，并在一个列表中。**

还有更多在这里我提到标题也作为数据，但是**我们如何在每列的单独标题中提到标题。**

我的代码可以显示但无效：

```
 extend: 'Ext.Panel',

   config: {
   layout: {
   type: 'vbox'
   },
   items: [
           {
           xtype: 'toolbar',
           docked: 'top',
           title: 'Color Fields',

           },
                {
           xtype: 'list',
           height: 243,
           margin: '',
           left: 0,
           ui: '',
           width: '20%',

           itemTpl: [
                     '<div><b>{Cloumn1}<b></div>'
                     ],

           data: [
                  {Cloumn1: 'SerialNum' },
                  {Cloumn1: '1'},
                  {Cloumn1: '1'},
                  {Cloumn1: '2'}
                  ]
           },
           {
           xtype: 'list',
           height: 243,
           margin: '',
           left: '25%',
           top: 0,
           ui: '',
           width: '20%',

           itemTpl: [
                     '<div><b>{Cloumn2}<b></div>'
                     ],

           data: [
                  {Cloumn2: 'Color' },
                  {Cloumn2: 'Red'},
                  {Cloumn2: 'Blue'},
                  {Cloumn2: 'White'}
                  ]

           },
           {
           xtype: 'list',
           height: 243,
           margin: '',
           left: '50%',
           top: 0,
           ui: '',
           width: '20%',

           itemTpl: [
                     '<div><b>{Cloumn3}<b></div>'
                     ],

           data: [
                  {Cloumn3: 'Box Type' },
                  {Cloumn3: 'Rectangle'},
                  {Cloumn3: 'Trianger'},
                  {Cloumn3: 'Circle'}
                  ]
           }, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T07:42:52.193

```
xtype:'list',
itemTpl: Ext.create('Ext.XTemplate',
    '<div width = "100%">',
        '<div align="center" style="display: inline-block;overflow: hidden;width: 25%;word-wrap:break-word;max-width:25%; vertical-align:top;">{column1}</div>',
        '<div align="center" style="display: inline-block;overflow: hidden;width: 25%;word-wrap:break-word;max-width:25%; vertical-align:top;">{column2}</div>',
        '<div align="center" style="display: inline-block;overflow: hidden;width: 25%;word-wrap:break-word;max-width:25%; vertical-align:top;">{column3}</div>',
        '<div align="center" style="display: inline-block;overflow: hidden;width: 25%;word-wrap:break-word;max-width:25%; vertical-align:top;">{column4}</div>',
    '</div>'
), 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T02:41:56.420

使用 Mitchell Simoens 的网格扩展。这是[链接](https://github.com/mitchellsimoens/Ext.ux.touch.grid)**

# jquery - 使用 onclick="" 选择调用 jQuery 函数的元素

> ID：11779463
> 
> 赞同：0
> 
> 时间：2012-08-02T14:22:21.063
> 
> 标签：jquery, onclick, element

我想选择调用 jQuery 函数的元素。我认为这应该有效，但事实并非如此。

元素：

```
<a href="#" onclick="$.myFunction(this)">link</a> 
```

功能：

```
(function ($) {
    $.myFunction = function (element) {
        element.hide()
    }
}(jQuery)); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T14:24:03.270

`this`是 DOM 节点，所以尝试使用

```
$(element).hide() 
```

作为旁注，尽可能避免使用内联处理程序，因为它们很快或以后会使您的代码变得混乱且难以维护：如果您可以控制代码，则可以改为编写

```
<a href="#" class="someclass">link</a> 
```

和

```
$(function() {
    $('body').on('click', 'a.someclass', function() {
        $(this).hide();
    });
}); 
```

使用更简洁的事件委托

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T14:26:43.190

这应该有效：

html:

```
<a href="#" class="myclass">link</a> 
```

JS：

```
$('.myclass').click(function() {
    $(this).hide();
}); 
```

# html - Outlook 中的 HTML 电子邮件呈现 - VML

> ID：11779466
> 
> 赞同：3
> 
> 时间：2012-08-02T14:22:27.317
> 
> 标签：html, email, outlook, html-email, vml

我创建了一个 HTML 电子邮件，在 Outlook 2007 中查看时，我看不到某些图像，因为它们是背景。我已经使用 VML 做了一些修改，但是它不会让我将高度值留空，因为它默认为 100px，或者我不能设置自动或百分比。背景图像需要能够根据文本大小调整大小，以便显示所有文本。

这是我工作的代码，除了高度值。

```
<td colspan="6" align="center" valign="top" style="background-image: url('http://example.com/content_centre.png');" background="http://example.com/content_centre.png">
     <!--[if gte mso 9]>
        <v:rect xmlns:v="urn:schemas-microsoft-com:vml" style="width:620px;height:200px;" strokecolor="none">
          <v:fill xmlns:v="urn:schemas-microsoft-com:vml" type="tile" color="#DDDDDD" src="http://example.com/content_centre.png" /></v:fill>
        </v:rect>
        <v:shape xmlns:v="urn:schemas-microsoft-com:vml" id="theText" style="position:absolute;width:620px;height:200px;">
    <![endif]-->
    <table cellspacing="0" cellpadding="0" border="0" style="width:100%;"><tr>
        <td width="30"></td>
        <td align="left" style="font-family:Arial, Helvetica, sans-serif; background:#ffffff; ">
            <p>This is where the text will appear. Doesn’t matter how much text it just stops displaying it.</p></td>
        <td width="30"></td>
    </tr>
    </table>
    <!--[if gte mso 9]>
        </v:shape>
    <![endif]-->
    </td> 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T16:33:00.230

利用：

```
<v:image xmlns:v="urn:schemas-microsoft-com:vml" id="theImage" style='behavior: url(#default#VML); display:inline-block; position:absolute; height:200px; width:620px; top:0; left:0; border:0; z-index:1;' src="http://example.com/content_centre.png"/> 
```

而不是：

```
<v:rect 
```

然后在您的“v：shape”中将高度更改为“auto”，这在 OL2007 中对我有用。请记住，我的示例基于内容超过 100px 的区域，因此我不确定它是否仍默认为 100px 作为其最小值，如果您需要它小于然后在“v:形状”低于 100 像素（但显然这会阻止缩放到内容）

# jquery - 带有jquery token-input的rails：搜索中忽略的第一个字符

> ID：11779468
> 
> 赞同：2
> 
> 时间：2012-08-02T14:22:32.943
> 
> 标签：jquery, ruby-on-rails, forms, jquery-tokeninput

用户控制器的索引：

```
@users = current_user.other_users.where("first_name like ?", "%#{params[:q]}%") 
```

1) 搜索在文本字段中工作正常，但未检测到第一个字符。

示例：如果我用“J”搜索“John”，我不会得到任何结果，但如果我搜索“o”，我会得到“John”。

2) 我想知道你如何在上面为 last_name 添加一个额外的搜索条件......？我想像

```
.where("first_name like ? or last_name like ?", "%#{params[:q]}%") 
```

会工作，但它不...

帮助表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T15:37:42.473

我打赌您使用 Postgres 作为数据库，其中 LIKE 子句区分大小写。在 Postgres 中搜索不区分大小写：

```
.where("first_name ILIKE ? or last_name ILIKE ?", "%#{params[:q]}%") 
```

这个 SO 有很多背景：[你如何为 MySQL 和 Postgres 编写不区分大小写的查询？](https://stackoverflow.com/questions/203399/how-do-you-write-a-case-insensitive-query-for-both-mysql-and-postgres)

其他选择：

*   [https://github.com/texticle/texticle](https://github.com/texticle/texticle)
*   存储全名的小写版本并在该字段上搜索

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T15:47:24.820

1.  我不确定为什么这不匹配。也许你应该`' '`在参数周围添加：`"first_name like '?'"`

2.  我认为你应该在那里有两个参数：

.where("first_name like ? or last_name like ?", "%#{params[:q]}%", "%#{params[:q]}%")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T15:26:21.253

未检测到第一个字母的原因是因为您在 where 语句中的名字和姓氏列前面有一个 %。因此，既然后面没有任何东西，`J`那这就是为什么`%John%`行不通的原因。

您将需要查找之前和之后的语句。

这会奏效。

```
q1 = params[:q].to_s + '%'
q2 = '%' + q1
where(["first_name LIKE ? OR last_name LIKE ? OR first_name LIKE ? OR last_name LIKE", q1,q1,q2,q2]) 
```

然后将 UNIQUE 放入您的 SQL 语句中，以使它们成为唯一的行。

无论如何，最好对这类内容使用全文搜索索引，因为 LIKE 操作没有针对前后操作（仅前面）进行索引。这是假设您使用 MySQL 作为数据库后端。

# java - 如何在 Spring 事务中获取连接？

> ID：11779469
> 
> 赞同：11
> 
> 时间：2012-08-02T14:22:39.073
> 
> 标签：java, spring, jdbc, connection, spring-transactions

想象一下这段代码：

```
foo() {
     Connection conn = ...;
} 
```

`foo()`已从具有注释的方法中调用`@Transactional`。如何获取当前的 JDBC 连接？请注意，`foo()`它在一个 bean 中（所以它可以有`@Autowired`字段）但`foo()`不能有参数（所以我不能从某个地方传递连接）。

**[编辑]**我正在使用需要数据源或连接的 jOOQ。我的问题：我不知道配置了哪个事务管理器。可以是任何东西；Java EE，基于 DataSource，通过 JNDI 获取数据源。我的代码不是应用程序，而是库。我需要吞下别人放在我盘子里的东西。同样，我不能请求 Hibernate 会话工厂，因为使用我的应用程序可能不使用 Hibernate。

但我知道其他代码，如 Spring Hibernate 集成，可以通过某种方式从事务管理器获取当前连接。我的意思是，Hibernate 不支持 Spring 的事务管理器，因此胶水代码必须使 Spring API 适应 Hibernate 的期望。我需要做同样的事情，但我不知道它是如何工作的。

**[EDIT2]**我知道有一个活动事务（即 Spring 在某处有一个 Connection 实例，或者至少有一个可以创建一个的事务管理器），但我的方法不是 @Transactional。我需要调用一个`java.sql.Connection`作为参数的构造函数。我该怎么办？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-02T14:46:52.027

您可能可以尝试`DataSourceUtils.getConnection(dataSource)`，根据[API](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/jdbc/datasource/DataSourceUtils.html)，它应该返回数据源的当前连接。

**更新：** 根据您的评论和源代码`org.springframework.transaction.support.TransactionSynchronizationManager`：

就像我说的，获取连接的关键是数据源名称，如果无法获取，查看源代码的一种方法是尝试这个：

`TransactionSynchronizationManager.getResourceMap()`将在当前线程中返回一个数据源映射到 ConnectionHolder，假设您只有一个资源参与事务，您可能可以做一个`map.values().get(0)`来获取第一个 ConnectionHolder，您可以通过调用从中获取连接`.getConnection()`

所以基本上调用以下内容：

`TransactionSynchronizationManager.getResourceMap().values().get(0).getConnection()`

不过可能必须有更好的方法:-)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-02T15:08:05.317

（根据评论线程完全重写；不知道为什么我的原始答案集中在 Hibernate 上，除了我现在正在使用的）

事务管理器与数据源完全正交。一些事务管理器直接与数据源交互，一些通过中间层交互（例如，Hibernate），一些通过容器提供的服务（例如，JTA）交互。

当您将方法标记为`@Transactional`时，这意味着 Spring 在加载您的 bean 时将生成一个代理，并且该代理将被交给任何其他想要使用您的 bean 的类。当调用代理的方法时，它（代理）要求事务管理器给它一个未完成的事务或创建一个新事务。然后它调用你的实际 bean 方法。当您的 bean 方法返回时，代理再次与事务管理器交互，以说“我可以提交”或“我必须回滚”。这个过程有曲折。例如，一个事务方法可以调用另一个事务方法并共享同一个事务。

当事务管理器*与 交互时*，它`DataSource`并不*拥有*. `DataSource`你不能要求事务管理器给你一个连接。相反，您必须注入一个特定于框架的对象，该对象将返回连接（例如 Hibernate `SessionFactory`）。或者，您可以使用静态事务感知实用程序类，但这些又与特定框架相关联。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-02T14:29:30.180

我假设您使用的是普通 Jdbc，您需要做的是：

```
BaseDao {
    @Autowired
    private DataSource dataSource;

    public void setDataSource(DataSource dataSource) {
        this.dataSource = dataSource;
    }

    public Connection getConnection() {
        // ....use dataSource to create connection
        return DataSourceUtils.getConnection(dataSource);
    }
}

FooDao extends BaseDao {
    // your foo() method
    void foo() {
       Connection conn = getConnection();
       //....
    }
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-08-07T09:35:23.347

所有这一切有点令人恼火的是，Spring 文档主要是用营销语言编写的，隐藏了幕后的丑陋。

用明确的话来说：

您的数据源存储在线程本地上下文中，基于（大多数有效的）请求始终由唯一线程处理的假设。

因此，Spring 以一种非常复杂的方式所做的就是将您的内容本地存储到您当前的执行线程中，这是一件微不足道的事情，但在整个 Spring 文档中重复得不够清楚。Spring 基本上将您的东西放入“全局上下文”中，以避免将其拉过所有接口和方法定义。一开始看起来有点神奇，但实际上只是化妆。

因此，您最终会调用静态 DataSourceUtils 方法来检索您的资料。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-02T14:28:10.523

如果您将 Spring Transaction 与 JDBC 一起使用，请配置一个`JdbcTemplate`，并使用`JdbcTemplate.execute(ConnectionCallback)`. 这是访问由 Spring 配置的连接的标准方式。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-07-22T14:39:10.137

3另一种方式：

```
@Component
public class MyServiceNonTransactional {

    @Autowired
    private TransactionTemplate transactionTemplate;

    @Autowired
    private DataSource dataSource;

    public void doStuff() {
        transactionTemplate.executeWithoutResult(status -> {
            Connection connection = DataSourceUtils.getConnection(dataSource);
            // here we go...
        });
    }

}

@Service
public class MyServiceTransactional {

    @Autowired
    private DataSource dataSource;

    @Transactional
    public void doStuff() {
        Connection connection = DataSourceUtils.getConnection(dataSource);
        // here we go...
    }

}

@Service
public class MyServiceViaJdbc {

    @Autowired
    private JdbcTemplate jdbcTemplate;

    public void doStuff() {
        jdbcTemplate.execute((ConnectionCallback<Void>) conn -> {
            // "conn" here we go!
            return null;
        });
    }

} 
```

# python - 从文件中读取数字列表的最快方法

> ID：11779470
> 
> 赞同：1
> 
> 时间：2012-08-02T14:22:41.533
> 
> 标签：python, optimization

我在 Stack Overflow 中发现了一些类似的问题，但我相信我可以从针对我的案例的特定建议中受益。

我必须将大约 80,000 个实数值列表存储在一个文件中，然后再将它们读回。

首先，我尝试`cPickle`了，但阅读时间并不吸引人：

```
>>> stmt = """
with open('pickled-data.dat') as f:
    data = cPickle.load(f)
"""
>>> timeit.timeit(stmt, 'import cPickle', number=1)
3.8195440769195557 
```

然后我发现将数字存储为纯文本可以更快地阅读（有道理，因为`cPickle`必须担心很多事情）：

```
>>> stmt = """
data = []
with open('text-data.dat') as f:
    for line in f:
        data.append([float(x) for x in line.split()])
"""
>>> timeit.timeit(stmt, number=1)
1.712096929550171 
```

这是一个很好的改进，但我认为我仍然可以以某种方式对其进行优化，因为用其他语言编写的程序可以更快地从文件中读取类似的数据。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T14:32:43.310

如果 numpy 数组可行，`numpy.fromfile`可能是读取文件的最快选择（这是我几天前问的一个[有点相关的问题）](https://stackoverflow.com/questions/11760095/convert-binary-string-to-numpy-array)

或者，看起来你可以做得更好一点`struct`，虽然我还没有测试过：

```
import struct
def write_data(f,data):
    f.write(struct.pack('i',len()))
    for lst in data:
        f.write(struct.pack('i%df'%len(lst),len(lst),*lst))

def read_data(f):
    def read_record(f):
        nelem = struct.unpack('i',f.read(4))[0]
        return list(struct.unpack('%df'%nelem,f.read(nelem*4))) #if tuples are Ok, remove the `list`.

    nrec = struct.unpack('i',f.read(4))[0]
    return [ read_record(f) for i in range(nrec) ] 
```

这假设将数据存储为 4 字节浮点数就足够了。如果您想要一个真正的双精度数，请将格式语句从 f 更改为 d 并更改`nelem*4`为`nelem*8`. 这里可能存在一些小的可移植性问题（例如数据类型的字节序和大小）。

# c# - 方法未在 ASP.NET 向导中执行

> ID：11779474
> 
> 赞同：1
> 
> 时间：2012-08-02T14:22:51.463
> 
> 标签：c#, asp.net

我有一个将`TextBox`值和`FileUpload`图像插入 SQL Server 的类。我正在执行`Wizard1_FinishButtonClick`事件中的所有课程。我在向导中有 4 个步骤。除了类之外，所有的类都被执行和插入`InsertCert()`。我在一个简单的 .aspx 页面中执行了相同的代码，并将值插入到数据库中。

我哪里错了？以下是类和 Wizard1_FinishButtonClick。

```
public void Insertcert()
        {
            String KKStech = @"Data Source=USER-PC\SQLEXPRESS;Initial Catalog=KKSTech;Integrated Security=True";
            SqlConnection conn = new SqlConnection(KKStech);
            String insertstring2 = @"insert into Cert(CertName, CertLogo)
                                       values(@CertName, @CertLogo)";
            SqlCommand cmd = new SqlCommand(insertstring2, conn);
            cmd.CommandText = insertstring2;
            cmd.CommandType = CommandType.Text;
            try
            {
                if (FileUpload1.HasFile)
                {
                    byte[] productImage = FileUpload1.FileBytes;
                    conn.Open();
                    cmd.Parameters.AddWithValue("@CertName", TextBox18.Text);
                    cmd.Parameters.Add("@CertLogo", SqlDbType.VarBinary).Value = productImage;
                    cmd.ExecuteNonQuery();

                }

            }

            catch (Exception ex)
            {
                throw ex;
            }

            finally
            {
                conn.Close();
            }

        } 
```

这是插入所有类的最后一个类。

```
 protected void Wizard1_FinishButtonClick(object sender, WizardNavigationEventArgs e)
        {

            InsertInfo();
            Insertcert();
            Insertaddress();
            Insertskills();

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:47:25.137

将光标放在“if (FileUpload1.HasFile)”行并按 F9；这将在该行上放置一个断点（您会在左侧边缘看到一个红色圆圈）。现在调试您的程序 (F5)。当断点被击中时，将鼠标悬停在“HasFile”上，您应该会看到一个给出值的工具提示。如果该值为 false，则说明插入未发生的原因。

# c++ - 二维数组，IF条件检查

> ID：11779481
> 
> 赞同：0
> 
> 时间：2012-08-02T14:23:05.857
> 
> 标签：c++, arrays, multidimensional-array

我在使用 C++ 2D 数组编码时遇到了一个问题。只是一个小问题，下面的代码是什么意思？

```
...

if(array[x][y] >= 9){

...

}

... 
```

这是否意味着当数组的 x 和 y 之和大于或等于 9 时，只有 IF 的主体会运行？或者 ........？

请解释并提供一些简单的例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:25:15.057

数组是二维的，这意味着元素在`array[x][y]`

与仅需要 1 个索引的 1D 数组不同，2D 数组需要 2 个索引，其形式`array[x][y]`可能是嵌套的 for 循环。

您可以像这样遍历这样的数组

```
for (int x = 0; x < arrayLength; x++) {
    for (int y = 0; y < array[x]Length; y++) {

    // do something with array[x][y]

    }  
} 
```

其中arrayLength是array的长度，array[x] length是array[x]的长度。

因此，参考您发布的代码，它正在测试二维数组的成员是否大于或等于 9。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T15:52:08.357

好的，让我们从基础开始。

**一维阵列**

你怎么能想象一个普通的数组？你可以说一个普通的数组就像一个数轴：

```
|-------------------------------| where every - is one element in your array 
```

左侧的第一个“-”是 myArray[0] 处的元素（“|”只是象征它有开始和结束）。

**二维阵列**

2D 数组可以可视化为棋盘、书架或具有列和行的表格。

```
|-------------------------------|
|-------------------------------|
|-------------------------------|
|-------------------------------| 
```

就像在国际象棋中一样，您需要 2 个值来处理一个元素。如果您只指定一个值，编译器可能知道您的值的行，但不知道其列（或相反）。这意味着您需要 x 和 y 坐标（这是坐标系的视觉类比）。为了解决一个值，你必须这样做：

myArray[x][y] 其中 x 可以是我们棋盘的行，y 可以是列。

在您的情况下，您的二维数组很可能充满整数。'if' 语句检查存储在 myArray[x][y] 中的值是否大于 9。如果 myArray[x][y] 大于 9，则此语句返回 true，并且将执行其中的代码。

在执行“if”语句内的代码后，程序将继续执行 if 语句后的代码。二维数组可以理解为包含数组的数组。

如果您认为 3 维数组是可能的，那么您是对的。在这里，您需要 3 个坐标来描述一个点，因为您有深度、高度和长度（这里我说的是视觉长度，而不是元素总数的长度。）。

我不知道这是否有帮助，但这当然是解释多维数组如何工作的一种非常直观的方法。

**例子**

```
int myArray[3][3] = {{1, 2, 3},   // row 0
                     {4, 5, 6},   // row 1
                     {7, 8, 10}}; // row 2 
```

在这种情况下，您的 if 语句只会在 x = 2 和 y = 2 时执行，因为 myArray[2][2] = 10

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T14:55:13.317

这意味着“如果坐标 (x,y) 处的元素大于或等于 9...”。

没有加法运算。该数组可能以最小维度 (x+1, y+1) 声明。

```
 int array[2][2] = {{12, 6}, {3, -2}};

    int x=1, y=0;

    if(array[x][y] >= 9){...}    // array[1][0] equals 3, condition is false 
```

# c++ - 来自向量的值与原始值不同

> ID：11779486
> 
> 赞同：0
> 
> 时间：2012-08-02T14:23:18.410
> 
> 标签：c++, vector, push-back

我对 C++ 感到困惑`vector`并寻求帮助。我声明一个类`CBoundaryPoint`：

```
class CBoundaryPoint:
{
public:
    double m_param;
    int m_index;    
} 
```

然后我定义一个`vector`：

```
vector<CBoundaryPoint> vBoundPoints;
CBoundaryPoint bp;
double param;
// other codes
bp.m_param = param;
vBoundPoints.push_back( bp ); 
```

令我惊讶的是，对于 中的每个元素`vBoundPoints`， 的值`m_param`与给定的值参数完全不同。我只是不知道为什么。

例如：

```
param = 0.3356;
bp.m_param = param; // so bp.param equals to 0.3356;
vBoundPoints.push_back( bp ); // while (*(vBoundPoints.end()-1)).m_param = -6.22774385622041925e+066;  same case to other elements 
```

那么发生了什么，为什么？我正在使用VS2010。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:41:36.647

`size_type`当您调整向量大小或使用构造函数创建特定大小的向量时，您可能会得到垃圾。您在向量中获得默认构造的对象，这些对象包含原始类型。由于您没有用户定义的默认构造函数，因此这些值本质上是随机的，或“垃圾”。

您可以通过向您的类添加默认构造函数来解决此问题：

```
class CBoundaryPoint:
{
public:
    CBoundaryPoint : m_param(), m_index() {} // initializes members to 0\. and 0
    double m_param;
    int m_index;    
} 
```

# audio - 如何使用 ffmpeg 在视频中添加新音频（不混合）？

> ID：11779490
> 
> 赞同：200
> 
> 时间：2012-08-02T14:23:38.503
> 
> 标签：audio, video, ffmpeg

我使用了如下命令：

```
ffmpeg -i video.avi -i audio.mp3 -vcodec codec -acodec codec output_video.avi -newaudio 
```

在最新版本中用于向视频添加新音轨（不混合）。

但是我将 ffmpeg 更新到了最新版本（**ffmpeg 版本 git-2012-06-16-809d71d**），现在在这个版本中该参数`-newaudio`不起作用。

请告诉我如何使用`ffmpeg`.

* * *

## 回答 #1

> 赞同：447
> 
> 时间：2012-08-02T18:20:56.113

# 替换音频

[![音频流替换示意图](../Images/112318ad729ea89cb8d3c586831d2376.png)](https://i.stack.imgur.com/DYx0E.png)

```
ffmpeg -i video.mp4 -i audio.wav -map 0:v -map 1:a -c:v copy -shortest output.mp4 
```

*   该`-map`选项允许您手动选择流/轨道。有关更多信息，请参阅[FFmpeg Wiki：地图](https://trac.ffmpeg.org/wiki/Map)。
*   此示例用于`-c:v copy`流[式复制](http://ffmpeg.org/ffmpeg.html#Stream-copy)(mux) 视频。不会发生视频的重新编码。质量得以保留，过程快速。
    *   如果您的输入音频格式与输出格式兼容，则更**改为**`-c:v copy`流`-c copy`式复制视频和音频。
    ***   如果要重新编码视频和音频，请删除`-c:v copy`/ `-c copy`。**
***   该`-shortest`选项将使输出与最短输入的持续时间相同。**

 **# 添加音频

[![音频流加法示意图](../Images/386b8dee225b6a3f2b69fc1cd37267a8.png)](https://i.stack.imgur.com/eyCVy.png)

```
ffmpeg -i video.mkv -i audio.mp3 -map 0 -map 1:a -c:v copy -shortest output.mkv 
```

*   该`-map`选项允许您手动选择流/轨道。有关更多信息，请参阅[FFmpeg Wiki：地图](https://trac.ffmpeg.org/wiki/Map)。
*   此示例用于`-c:v copy`流[式复制](http://ffmpeg.org/ffmpeg.html#Stream-copy)(mux) 视频。不会发生视频的重新编码。质量得以保留，过程快速。
    *   如果您的输入音频格式与输出格式兼容，则更**改为**`-c:v copy`流`-c copy`式复制视频和音频。
    ***   如果要重新编码视频和音频，请删除`-c:v copy`/ `-c copy`。**
***   该`-shortest`选项将使输出与最短输入的持续时间相同。**

 **# 将两个音频输入混合/组合为一个

[![音频缩混示意图](../Images/d385f82262d242488ee91243b672c3e4.png)](https://i.stack.imgur.com/2P6Ls.png)

使用来自 的视频`video.mkv`。混合来自`video.mkv`并`audio.m4a`使用 [amerge 过滤器](http://ffmpeg.org/ffmpeg-filters.html#amerge)的音频：

```
ffmpeg -i video.mkv -i audio.m4a -filter_complex "[0:a][1:a]amerge=inputs=2[a]" -map 0:v -map "[a]" -c:v copy -ac 2 -shortest output.mkv 
```

有关更多信息，请参阅[FFmpeg Wiki：音频通道](https://trac.ffmpeg.org/wiki/AudioChannelManipulation)。

# 生成静音音频

您可以使用[anullsrc 过滤器](https://ffmpeg.org/ffmpeg-filters.html#anullsrc)制作静音音频流。过滤器允许您选择所需的通道布局（单声道、立体声、5.1 等）和采样率。

```
ffmpeg -i video.mp4 -f lavfi -i anullsrc=channel_layout=stereo:sample_rate=44100 \
-c:v copy -shortest output.mp4 
```

# 另见

*   [将两个音频流合二为一](https://superuser.com/a/800251/110524)
*   [FFmpeg Wiki：音频通道操作](https://trac.ffmpeg.org/wiki/AudioChannelManipulation)
*   [FFmpeg 复用来自另一个视频的视频和音频](https://stackoverflow.com/a/12943003/1109017)

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-09-24T02:08:00.450

mp3 音乐转 wav

```
ffmpeg -i music.mp3 music.wav 
```

截断以适合视频

```
ffmpeg -i music.wav -ss 0 -t 37 musicshort.wav 
```

混合音乐和视频

```
ffmpeg -i musicshort.wav -i movie.avi final_video.avi 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2017-05-23T13:21:01.757

如果输入视频有多个音轨并且您需要再添加一个，则使用以下命令：

```
ffmpeg -i input_video_with_audio.avi -i new_audio.ac3 -map 0 -map 1 -codec copy output_video.avi 
```

`-map 0`表示从第一个输入文件`input_video_with_audio.avi`（`-map 1``new_audio.ac3`

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-01-13T20:42:34.180

这些解决方案都不适合我。我的原始音频被覆盖了，或者我在更复杂的“amerge”示例中遇到了“无法映射内存”之类的错误。看来我需要-filter_complex amix。

```
ffmpeg -i videowithaudioyouwanttokeep.mp4 -i audiotooverlay.mp3 -vcodec copy -filter_complex amix -map 0:v -map 0:a -map 1:a -shortest -b:a 144k out.mkv 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-05-17T10:18:41.523

没有什么对我有用（我认为这是因为我的输入 .mp4 视频没有任何音频）所以我发现这对我有用：

> `ffmpeg -i input_video.mp4 -i balipraiavid.wav -map 0:v:0 -map 1:a:0 output.mp4`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-15T11:06:36.967

如果您使用的是旧版本的 FFMPEG 并且无法升级，您可以执行以下操作：

```
ffmpeg -i PATH/VIDEO_FILE_NAME.mp4 -i PATH/AUDIO_FILE_NAME.mp3 -vcodec copy -shortest DESTINATION_PATH/NEW_VIDEO_FILE_NAME.mp4 
```

请注意，我使用**了 -vcodec**

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-03-31T05:23:28.177

使用 ffmpeg 将音频添加到视频的代码。

如果音频长度大于视频长度，则会将音频缩短为视频长度。如果您想要视频中的完整音频，请从 cmd 中删除 -shortest。

**`String[] cmd = new String[]{"-i", selectedVideoPath,"-i",audiopath,"-map","1:a","-map","0:v","-codec","copy", ,outputFile.getPath()};`**

```
private void execFFmpegBinaryShortest(final String[] command) {

            final File outputFile = new File(Environment.getExternalStorageDirectory().getAbsolutePath()+"/videoaudiomerger/"+"Vid"+"output"+i1+".mp4");

            String[] cmd = new String[]{"-i", selectedVideoPath,"-i",audiopath,"-map","1:a","-map","0:v","-codec","copy","-shortest",outputFile.getPath()};

            try {

                ffmpeg.execute(cmd, new ExecuteBinaryResponseHandler() {
                    @Override
                    public void onFailure(String s) {
                        System.out.println("on failure----"+s);
                    }

                    @Override
                    public void onSuccess(String s) {
                        System.out.println("on success-----"+s);
                    }

                    @Override
                    public void onProgress(String s) {
                        //Log.d(TAG, "Started command : ffmpeg "+command);
                        System.out.println("Started---"+s);

                    }

                    @Override
                    public void onStart() {

                        //Log.d(TAG, "Started command : ffmpeg " + command);
                        System.out.println("Start----");

                    }

                    @Override
                    public void onFinish() {
                        System.out.println("Finish-----");

                    }
                });
            } catch (FFmpegCommandAlreadyRunningException e) {
                // do nothing for now
                System.out.println("exceptio :::"+e.getMessage());
            }

        } 
```****

# asp.net - 将 asp.net 2.0 书与 Visual Studio 2010 母版页 ContentPlaceHolder + 表一起使用

> ID：11779494
> 
> 赞同：0
> 
> 时间：2012-08-02T14:23:43.487
> 
> 标签：asp.net, vb.net, visual-studio-2010, master-pages

我目前正在实习，没有真正的编程背景经验，他们给了我一本关于 asp.net 2.0 VB 的 24 小时书，但我使用的是 Visual Studio 2010 而不是 2005。另外，这本书正在使用更多设计视图比源视图更多。我在母版页章节，它告诉我将表格用作站点范围的模板。这是问题所在：

它告诉我去布局菜单（它不存在或我找不到它）。所以我找到了一个表格菜单，所以我进入了插入表格。书上说应该有一个带有页眉、页脚和侧面的模板下拉菜单。没有，我在其他任何地方都找不到。

问题：它在 2010 年仍然可用，还是我应该使用其他东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T15:21:27.677

Layout menu is no more there since VS2005

In Visual Studio 2010 on Design View (The bottom "Design" button should be enabled) go to the main upper menu and choose:

Tools - Options - CSS Styling and Check the option "Change position to absolute for controls added using Toolbox,paste or drag and drop"

However I don't recommend this because in my experience is not browser compatible sometimes so you should permanently check how your page looks in different browsers as you go forward in your layout.

You can try to create your tables manually (with the menu you just found) instead and use their css properties to align the text/images inside each row and cell as you wish. This can help to walk you through the process:

[http://social.msdn.microsoft.com/Forums/is/csharpgeneral/thread/7db5a810-e9e0-42eb-8ebc-a4c28036effc](http://social.msdn.microsoft.com/Forums/is/csharpgeneral/thread/7db5a810-e9e0-42eb-8ebc-a4c28036effc)

[http://forums.asp.net/t/1599099.aspx/1](http://forums.asp.net/t/1599099.aspx/1)

[http://technet.microsoft.com/en-us/subscriptions/downloads/dyxa0hhe.aspx](http://technet.microsoft.com/en-us/subscriptions/downloads/dyxa0hhe.aspx)

Hope this helps.

# ajax - ajax调用后忽略url查询字符串

> ID：11779496
> 
> 赞同：0
> 
> 时间：2012-08-02T14:23:46.327
> 
> 标签：ajax, query-string

我有一个简单的表单，它通过 ajax 调用更新数据库中的值到另一个页面并返回成功消息并加载值。每个页面通过查询字符串（即 index.php?clientid=2）确定要更新的记录。

出于某种原因，当我的 ajax 调用返回并重新加载时，它会丢失查询字符串值并设置为默认值，将其清除，以便代码的以下 php 部分不再获取它：

```
<?php if(isset($_GET["clientid"])) {
        $clientidstring = $_GET["clientid"];
        } else {
        $clientidstring = 1;
        }

        $sql = mysql_query("select * from profiles where id=" . $clientidstring);
        $row = mysql_fetch_array($sql); ?> 
```

所以更新时发生的事情是总是返回 clientid "1"，而不是它的当前 url 查询字符串值（顺便说一句，它仍然显示在浏览器的 URL 字段中）。

DB 更新正常，记录正确。如果我完全重新加载页面，它将显示正确的值。唯一的问题似乎是 ajax 回调清除了 db 调用中使用的 url 参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T19:16:47.027

好的，我想通了。对于这可能会有所帮助的任何人，事实证明，在重新加载我的更改时，我需要在部分 jQuery.load 中传递查询字符串，所以这是：

```
 $('#s_aname').load('index.php #sub_aname'); 
```

变成这样：

```
 $('#s_aname').load('index.php?clientid='+clientid +' #sub_aname'); 
```

而现在，一切都很好。感谢阅读本文并试图提供帮助的任何人，我可能并不像我应该做的那样清楚。

# objective-c - 如何提高 MPVolumeView 的性能？

> ID：11779499
> 
> 赞同：4
> 
> 时间：2012-08-02T14:24:00.150
> 
> 标签：objective-c, ios, cocoa-touch, video-streaming, mpvolumeview

我正在开发一个与视频流相关的 iOS 项目。UI 中的控件之一是 MPVolumeView。问题是当我滑动控制改变音量时，它似乎使用了很多 CPU。事实上，当我使用滑块时，UI 变得很慢。如何提高性能？，也许我做错了什么？

![来自 Instruments 的 CPU 负载的参考图像。 在左侧仅流式传输中，右侧的峰值为流式传输+音量滑动。](../Images/7414cae54939ece9b858bdc3c08daccf.png)

来自 Instruments 的 CPU 负载的参考图像。在左侧仅流式传输中，右侧的峰值为流式传输+音量滑动。

谢谢。

编辑：

这就是我将控件添加到视图的方式：

```
MPVolumeView *mpVolume = [[MPVolumeView alloc] initWithFrame:CGRectMake(32,
                                                                        56,
                                                                        160,
                                                                        9)];
[self addSubview:mpVolume];
[mpVolume release]; 
```

“self”是一个自定义视图，继承自 UIView，但我没有使用 xib 和 drawRect。我只是在“initWithFrame:frame”方法中添加所有控件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T15:05:47.190

观察调用了多少次 init with frame。有时我看到它不止一次被调用，有时经常被调用，具体取决于具体情况。您可能只想在首次设置视图时分配卷视图。听起来它可能会一次又一次地设置音量视图。

一种可能是使卷视图成为类属性（私有或公共）

```
 @property (nonatomic, retain) MPVolumeView *mpVolume; 
```

然后当然... @synthesize mpVolume = _mpVolume

然后在 initWithFrame 中检查它是否为 nil，然后 alloc

```
 if(_mpVolume == nil){
      _mpVolume = [[MPVolumeView alloc] initWithFrame:CGRectMake(32,56,160,9)];
      [self addSubview:_mpVolume];
 } 
```

然后在 dealloc 中释放 mpVolume

# c++ - 在 Windows 中加入等效项

> ID：11779504
> 
> 赞同：14
> 
> 时间：2012-08-02T14:24:20.757
> 
> 标签：c++, windows, multithreading, winapi, join

如何在 Windows 中等待线程死亡？这就是我希望我的代码看起来的样子：

```
main thread:

creating thread: thread1
waiting for thread1 to die
//rest of the code 
```

我正在使用 Win32 API。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-02T14:32:08.717

这很简单：WaitForSingleObject 可以在给定其他线程句柄的情况下阻塞当前线程。

```
void Thread1Proc()
{
   HANDLE hThread2 = CreateThread(...);
   WaitForSingleObject(hThread2, INFINITE);

   // by now thread #2 is over

} 
```

# ruby-on-rails - 在 rspec rails 中放置长模拟/存根响应的位置

> ID：11779508
> 
> 赞同：3
> 
> 时间：2012-08-02T14:24:26.110
> 
> 标签：ruby-on-rails, rspec

```
api = double "myApi"
api.should_receive(:get_info).and_return({
  # a 360 lines hash!
}) 
```

我想提供应该从这个双精度返回的响应。但是这个响应是一个很长的散列，我不想弄乱我的规范文件。相反，我想将哈希写入单独的文件中，并在我的规范中使用它 那么，最佳实践是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T07:10:40.920

*最好*的做法是不要存根整个散列。当然，您的测试不需要每一行。您最好在每个测试/上下文中删除每个测试所需的几行。

如果您必须存根整个 api，您可以在以下位置创建一个单独的模块`spec/support`：

```
# spec/support/api_stub.rb

module ApiStub
  def self.response
    {
      # hash
    }
  end
end 
```

由于该文件夹中的任何内容都会自动包含在内，因此您可以`ApiStub.response`在存根定义中使用。

# matlab - MATLAB IDE 在显示非常大的数组时挂起时如何中断？

> ID：11779511
> 
> 赞同：2
> 
> 时间：2012-08-02T14:24:31.210
> 
> 标签：matlab, ide, freeze

假设我正在使用 MATLAB IDE，并且在我的工作区中碰巧有一些非常大的对象（例如 500k+ 元素的数组）。现在，假设我愚蠢地不小心双击了这些非常大的变量之一，这触发了对数组编辑器的加载。不幸的是，有了这么大的数组，MATLAB 就挂了。

我试过 CTRL+C、CTRL+BREAK、CTRL+D，但似乎没有一个能够中断 IDE 的行为。我知道我可以强制 matlab 退出，但是首先将所有这些变量读入工作区需要很多时间，而且我可能在编辑器窗口等中有未保存的更改。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T14:42:42.667

变量编辑器使用命令启动`openvar`。要解决您的问题，您可以利用 Matlab 怪癖，它会导致函数被同名的变量屏蔽。例如，如果您创建一个名为`plot`该`plot()`函数的变量，该函数将停止工作。

解决方案虽然很老套，但只是简单地创建一个名为`openvar`. 然后任何时候尝试打开变量编辑器都会失败，因为该函数`openvar`被变量隐藏了。

如果您想再次使用变量编辑器，只需简单调用`clear openvar`即可删除变量，该函数将被取消屏蔽。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T16:14:20.667

我找到了一种方法，但这不是最好的，它需要更改路径并返回一次才能获得原始的句柄`openvar`

```
function openvar(name,array)
    persistent org_openvar
    if isempty(org_openvar)
        curdir=pwd;
        cd(fullfile(matlabroot,'toolbox/matlab/codetools'));
        org_openvar = @openvar;
        cd(curdir);
    end

    if numel(array)>1e5
        if strcmp(questdlg(sprintf('Opening ''%s'' which has %d elements.\n\nAre you sure? This is gonna take a while!',name,numel(array)), ...
        'Variable editor','Yes','Cancel','Cancel') , 'Yes')
                org_openvar(name,array)
            end
    else
        org_openvar(name,array)
    end
end 
```

得到那个句柄是最大的问题，调用它就好了。如果`openvar`是内置的，您可以使用[内置](http://www.mathworks.nl/help/techdoc/ref/builtin.html)函数：

```
builtin('openvar',name,array) 
```

但不幸的是，情况并非如此:(
[str2func](http://www.mathworks.nl/help/techdoc/ref/str2func.html)与完整路径相结合也不起作用，至少我没有让它起作用......

# php - SESSION 首次登录不显示用户名，但在下一个会话中会出现

> ID：11779513
> 
> 赞同：0
> 
> 时间：2012-08-02T14:24:33.393
> 
> 标签：php, session

嗨，我在这里有一个 PHP 中的登录注销功能，用户可以在其中登录。如果他是版主，他将被重定向到 moderator.php，如果他是代理，他将转到 agent.php 页面。

在他们应该登录的 index.php 中。这是代码：

```
<form name="form1" method="post" action="check_login.php">
  <center><div id='login_header'><b><font face='Arial Black' color='black' size='4px'>Sign in to Minquep!</font></b></div></cen                 
  <br/><br/>
  <center><label>Username:</label><input type='text' name='myusername' size='20'><br/><label>Password:</label>
  <input type='password' name='mypassword' size='20'><br/>
  <input type='text' name='myfirstname' style='display:none;'>
  </center>
  <br/><input type='submit' value='Submit' name='submit' class='submit'>    

</form> 
```

check_login.php 是这样的：

```
<?php

$host="localhost"; // Host name
$username="root"; // Mysql username
$password=""; // Mysql password
$db_name="minquep_test"; // Database name
$tbl_name="users"; // Table name

// Connect to server and select database.
mysql_connect("$host", "$username", "$password")or

die("cannot connect");

mysql_select_db("$db_name")or die("cannot select DB");

// username and password sent from form
$myusername=$_POST['myusername'];
$mypassword=$_POST['mypassword'];

// To protect MySQL injection (more detail about MySQL injection)
$myusername = stripslashes($myusername);
$mypassword = stripslashes($mypassword);

$myusername = mysql_real_escape_string($myusername);
$mypassword = mysql_real_escape_string($mypassword);

$sql="SELECT * FROM $tbl_name WHERE login='$myusername' and password='$mypassword'";

$result=mysql_query($sql);

$count=mysql_fetch_array($result);

if($count['user_type']== "agent"){
echo '<script type="text/javascript">alert("You have logged in successfully!\n"); return false;</script>';
echo "<meta http-equiv=\"refresh\" content=\"0;URL=pages/agent.php\">";
session_register("myusername");
session_register("mypassword");

//header("location:pages/agent.php");

}
else if ($count['user_type']== "moderator"){
echo '<script type="text/javascript">alert("You have logged in successfully!\n"); return false;</script>';
echo "<meta http-equiv=\"refresh\" content=\"0;URL=pages/moderator.php\">";
session_register("myusername");
session_register("mypassword");

//header("location:pages/moderator.php");

}
else {
echo "<script type='text/javascript'>alert('Invalid Login! Please Try Again!');</script>";
echo "<meta http-equiv=\"refresh\" content=\"0;URL=index.php\">";
}
?> 
```

在 moderator.php 和 agent.php 中，我将登录用户的用户名输出为：

```
<?php
session_start();

print("<b><h2>Hi! $_SESSION[myusername] (You are logged in as moderator / agent) </h2>");

?> 
```

在我的 logout.php 中，我只是销毁会话并将其重定向回 index.php

```
<?php
session_start();
session_destroy();
echo "<meta http-equiv=\"refresh\" content=\"0;URL=../index.php\">";
exit;

?> 
```

所以问题是，在我第一次使用版主或代理帐户登录测试期间......登录后用户名不显示。它只是说“嗨！您以版主身份登录”或“嗨！您已登录作为代理”。但是在注销并再次登录后，用户名已经显示出来了……就像它应该的样子：“嗨，你的名字！你以主持人的身份登录”。或“您好！您以代理身份登录”。

那么我`**$_SESSION("myusername")**`在第一次 check_login 期间不起作用的问题可能是什么。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:26:25.093

您需要`session_start();`在第一页（未显示）中调用该函数。

如果您想与用户启动会话，并引用您存储在其中的变量，请在页面开头启动会话，即使您不打算在脚本底部使用它。

发送该命令后，您就可以设置和引用`$_SESSION`对象中的变量。

# asp.net-mvc-3 - Asp.net mvc 3 Razor 视图中的部分视图

> ID：11779517
> 
> 赞同：0
> 
> 时间：2012-08-02T14:24:44.307
> 
> 标签：asp.net-mvc-3

我有一个表名信息。我想创建这个强类型表的部分视图。我在 View/Shared 中的部分视图是 _InfoView.cshtl，例如：

```
 @model IEnumerable<RealTest.Models.ifo>

  <h2>_InfoView</h2>

 <p>
 @Html.ActionLink("Create New", "Create")
 </p>
  <table>
      <tr>
         <th>
           name
       </th>
      <th>
         address
       </th>
       <th></th>
    </tr>

 @foreach (var item in Model) {
<tr>
    <td>
        @Html.DisplayFor(modelItem => item.name)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.address)
    </td>
    <td>
        @Html.ActionLink("Edit", "Edit", new { id=item.id }) |
        @Html.ActionLink("Details", "Details", new { id=item.id }) |
        @Html.ActionLink("Delete", "Delete", new { id=item.id })
    </td>
   </tr>
 } 
```

我的视图页面就像：@model IEnumerable

```
 @{
  ViewBag.Title = "Index";
}
 <p>
   @Html.ActionLink("Create New", "Create")
  </p>

   @Html.Partial("_InfoView") 
```

现在我想从另一个强类型视图中调用它。当我调用它时，它似乎没有获得部分视图所需的数据。现在我应该如何传递部分视图数据？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:28:15.310

```
@{Html.RenderPartial("is _InfoView", model);} 
```

您的模型需要是 ifo 对象的集合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T14:38:55.860

你可以这样称呼它

```
@Html.Partial("ProdItemColors",Model.PropertyName) 
```

例如，如果您有一个具有这样类型的 Collection 属性的`ViewModel`被调用`Customer``Info`

```
public class Customer
{
  public string CustomerName { set;get;}
  public IList<Info> InfoItems { set;get;}

  public Customer()
  {
      InfoItems=new List<Info>();
  }
}
public class Info()
{
  public string Name { set;get;}
} 
```

现在，从与您的`Customer`班级绑定的主视图中，您可以这样称呼它

```
@model Customer
<p>@Model.CustomerName </p>
@Html.Partial("_InfoView",Model.InfoItems) 
```

`~/Views/Shared`假设您在文件夹或文件夹中有一个名为 _InfoView.cshtml 的视图`~/Views/YourcontrollerName`。

确保您的部分视图绑定到 Info 类

```
@model IEnumerable<Info>
<p>do something inside this</p> 
```

# c# - 转换 Expression.Property 结果

> ID：11779519
> 
> 赞同：3
> 
> 时间：2012-08-02T14:24:55.577
> 
> 标签：c#, reflection, expression-trees

`Expression`动态创建树时如何创建演员表？

问题是，我有一个类型的属性`string`：

```
public class Test
{
    public string Id { get; set; }
} 
```

而且我想一般地创建一个强类型的 lambda 表达式，表示一个返回`object`而不是`string`( `Expression<Func<T, object>>`) 的委托。

现在我正在这样做：

```
private static Expression<Func<T, object>> CreateIdQuery()
{
    Type type = typeof(T);
    PropertyInfo idProperty = type.GetProperty("Id");
    ParameterExpression lambdaParam = Expression.Parameter(type, "x");
    MemberExpression body = Expression.Property(lambdaParam, idProperty);
    LambdaExpression expr = Expression.Lambda(body, lambdaParam);
    return (Expression<Func<T, object>>)expr;
} 
```

但它在最后一行抛出异常（我不能`Expression<Func<Test, string>>`转换为`Expression<Func<Test, object>>`）。

我如何转换表达式的主体（我假设该`MemberExpression`部分需要转换为`object`）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T14:28:24.067

使用[`Expression.Convert(body, typeof(object))`](http://msdn.microsoft.com/en-us/library/bb292051.aspx).

```
private static Expression<Func<T, object>> CreateIdQuery()
{
    Type type = typeof(T);
    PropertyInfo idProperty = type.GetProperty("Id");
    ParameterExpression lambdaParam = Expression.Parameter(type, "x");
    MemberExpression body = Expression.Property(lambdaParam, idProperty);
    UnaryExpression converted = Expression.Convert(body, typeof(object));
    LambdaExpression expr = Expression.Lambda(converted, lambdaParam);
    return (Expression<Func<T, object>>)expr;
} 
```

# database - 允许 Django 为每个用户使用不同的数据库？

> ID：11779528
> 
> 赞同：5
> 
> 时间：2012-08-02T14:25:26.710
> 
> 标签：database, django

我想创建一个 Django 应用程序，每个用户都有自己的数据库。用户仍然会从主用户那里获得身份验证，但所有应用程序模型都来自他们自己的数据库副本。

例如，假设我们有类似的东西：

```
DATABASES = {
'default': {
    'NAME': 'sqlite3',
    'ENGINE': 'default.db',
},
'user1': {
    'NAME': 'sqlite3',
    'ENGINE': 'user1.db',
}
'user2': {
    'NAME': 'sqlite3',
    'ENGINE': 'user2.db',
} 
```

}

其中 default.db 具有用户（和任何其他非应用表），而 user1.db 和 user2.db 具有特定于应用的模型。

我怎么能允许一些用户使用 user1 而其他用户使用 user2？

我可以即时向 DATABASES 添加更多条目吗？（如果这很重要，我正在使用 wsgi）

我宁愿不更改代码（例如，通过插入 .using()），而是拥有一个全局数据库路由器，也许。

我已阅读[https://docs.djangoproject.com/en/dev/topics/db/multi-db/](https://docs.djangoproject.com/en/dev/topics/db/multi-db/)但无法弄清楚执行上述操作需要什么。

# java - 在 Swing 中使用哪个面板

> ID：11779530
> 
> 赞同：1
> 
> 时间：2012-08-02T14:25:33.330
> 
> 标签：java, swing, layout, jtable, jpanel

我想在一个面板中有一个 JTable 组件，以占用窗口允许的尽可能多的空间。然而，在下面，我想添加另一个固定大小的面板，里面有几个按钮。使用哪种布局来允许底部面板具有固定大小，同时允许 JTable 面板根据窗口大小进行拉伸？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T14:29:47.463

实现它的最简单方法是使用`BorderLayout`. 把你的桌子放在中间。然后创建另一个面板`FlowLayout`并将其放在主面板的南面。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-02T14:43:42.213

很难准确地想象你想要什么，但这里有一段 Oracle 的摘录可能会对你有所帮助：

**场景：**您需要在尽可能多的空间中显示组件。

> 如果它是其容器中的唯一组件，请使用 GridLayout 或 BorderLayout。否则，BorderLayout 或 GridBagLayout 可能是一个很好的匹配。
> 
> 如果您使用 BorderLayout，则需要将需要空间的组件放在中心。使用 GridBagLayout，您需要为组件设置约束，以便 fill=GridBagConstraints.BOTH。另一种可能性是使用 BoxLayout，使需要空间的组件指定非常大的首选和最大尺寸。

**场景：**您需要以自然大小在紧凑的行中显示一些组件。

> 考虑使用 JPanel 对组件进行分组，并使用 JPanel 的默认 FlowLayout 管理器或 BoxLayout 管理器。SpringLayout 对此也有好处。

**场景：**您需要在行和列中显示几个相同大小的组件。

> GridLayout 非常适合这个。

**场景：**您需要在一行或一列中显示一些组件，它们之间可能有不同的空间量、自定义对齐方式或自定义组件大小。

> BoxLayout 非常适合这个。

**场景：**您需要显示对齐的列，例如在类似表单的界面中，其中一列标签用于描述相邻列中的文本字段。

> SpringLayout 是一个自然的选择。几个教程示例使用的 SpringUtilities 类定义了一个 makeCompactGrid 方法，该方法使您可以轻松地对齐组件的多行和多列。

**场景：**您有一个包含许多组件的复杂布局。

> 考虑使用非常灵活的布局管理器，例如 GridBagLayout 或 SpringLayout，或者将组件分组到一个或多个 JPanel 中以简化布局。如果您采用后一种方法，每个 JPanel 可能会使用不同的布局管理器。

**资料来源：** [Oracle：使用布局管理器](http://docs.oracle.com/javase/tutorial/uiswing/layout/using.html)

# c# - ItemUpdated 事件、After 或 Before 属性标题名称为空。共享点 2010

> ID：11779531
> 
> 赞同：1
> 
> 时间：2012-08-02T14:25:33.033
> 
> 标签：c#, sharepoint

无论我做什么，之前和之后的标题总是空的。这是会议或活动列表中的项目更新接收器

！

```
[public override void ItemUpdated(SPItemEventProperties properties)
        {
            Logger.LogDebug("MeetingCalendarEvents", "ItemUpdated(SPItemEventProperties properties)", "BEGIN");
            base.ItemUpdated(properties);
            try
            {
                base.EventFiringEnabled = false;
                SPSite site = properties.Web.Site;
                string sitename= properties.BeforeProperties\["Title"\].ToString();
                SPWeb web = site.RootWeb.Webs\[sitename\];
                web.AllowUnsafeUpdates = true;
                string prefix = properties.BeforeProperties\["Title"\].ToString().Substring(0, 2);
                web.Title = properties.AfterProperties\["Title"\].ToString();
                DateTime eventDate = properties.AfterProperties.GetValueAsDateTime(MeetingsCommon.Constants.FIELDS_EVENTDATE_NAME);
                if (eventDate != DateTime.MinValue)
                {
                    string titleMeetingCalendarItem = eventDate.ToString("yyyyMMdd");
                    titleMeetingCalendarItem = string.Format("{0}{1}", prefix, titleMeetingCalendarItem);
                    properties.AfterProperties.SetAfterPropertyValue("Title", titleMeetingCalendarItem);
                    web.ServerRelativeUrl = "/" + titleMeetingCalendarItem;               
                }
                web.Update();

                web.AllowUnsafeUpdates = false;
                base.EventFiringEnabled = true;
            }
            catch (Exception ex)
            {
                Logger.LogError("MeetingCalendarEvents", "ItemUpdated(SPItemEventProperties properties)", ex);
                properties.ErrorMessage = ex.Message;
                properties.Cancel = true;
            }
            finally
            {
                base.EventFiringEnabled = true;
            }
            Logger.LogDebug("MeetingCalendarEvents", "ItemUpdated(SPItemEventProperties properties)", "END");
        }] 
```

![在此处输入图像描述](../Images/4a498da455081f2d492eff95a3ea490b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T14:25:54.397

在这里回答：

[http://www.synergyonline.com/Blog/Lists/Posts/Post.aspx?ID=122](http://www.synergyonline.com/Blog/Lists/Posts/Post.aspx?ID=122)

# mysql - mysql使用select插入具有公共元素的多条记录

> ID：11779532
> 
> 赞同：0
> 
> 时间：2012-08-02T14:25:36.640
> 
> 标签：mysql, sql

我有三个表， a `User table`， a`Company table`和 a`linking table`分配用户角色。我正在尝试更新`user_role`表，以便其关联公司的所有用户都具有相同的角色。角色表如下所示：

```
+---------+---------+------------+
| role_id | user_id | company_id |
+---------+---------+------------+
|       2 |      54 |         30 | 
|      15 |       1 |         15 | 
|      14 |      87 |         32 | 
|      15 |      88 |         33 | 
|      15 |     106 |          3 | 
+---------+---------+------------+ 
```

我想在逻辑上做的是这样的

```
INSERT INTO user_role 
    (user_id, company_id, role_id) 
VALUES (
         (SELECT user_id FROM user_role WHERE company_id = ##FIRST COMPANY_ID IN LIST##), 
         (##LIST OF COMPANY_ID'S##), 2
       ); 
```

我有一个 company_id 的静态列表，并且我希望在该公司中具有任何角色的所有用户都在此表中分配一个额外的静态 role_id。实现这一目标的最佳方法是什么？我应该看一个存储过程吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:39:26.413

```
INSERT INTO user_role (user_id, company_id, role_id) 
SELECT user_id, company_id, { new role id here }
  FROM user_role 
 WHERE company_id in ( { list of company id's here }) 
```

# jquery - 简单的 Jquery 滑块不会使用 .show 加载图片

> ID：11779533
> 
> 赞同：0
> 
> 时间：2012-08-02T14:25:37.407
> 
> 标签：jquery, user-interface, slider

我按照教程做了一个 T 恤，但我无法让它工作，它加载了加载 gif 并隐藏了其他图像，但是这个 .show 函数没有做任何事情，我错过了什么吗？

```
<style type="text/css">
.slider{
width:800px;
height:350px;
overflow:hidden;
margin:30px auto;
background-image:url(img/load.gif);
background-repeat:no-repeat;
background-position:center;
}
.shadow{
background-image:url(img/shadow.png);
background-repeat:no-repeat;
background-position:top;
width:864px;
height:144px;
margin:-60px auto;
}
.slider img{
width:800px;
height:350px;
display:none;
}
</style>

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery-ui/1.8.22/jquery-ui.min.js"></script>
<script type="text/javascript">

function Slider(){
    $(".slider #1").show("fade",500);
}

</script>
</head>

 <body onload="Slider();">
<div class="slider">
    <img id="1" src="img/image1.jpg" border="0" alt="Image 1"/>
    <img id="2" src="img/image2.jpg" border="0" alt="Image 2"/>
    <img id="3" src="img/image3.jpg" border="0" alt="Image 3"/>
</div>
<div class="shadow">
</div>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:27:56.967

替换`$(".slider #1").show("fade",500);`为 `$(".slider #1").fadeIn(500);`

[http://jsfiddle.net/Ty7ce/](http://jsfiddle.net/Ty7ce/)

# android - 简单的 Phonegap 应用程序来调用简单的 Web 服务

> ID：11779551
> 
> 赞同：2
> 
> 时间：2012-08-02T14:26:15.467
> 
> 标签：android, web-services, cordova, xui

我是 Phonegap 的初学者，我用两种简单的方法在 Microsoft Visual Studio 2010 中制作了一个简单的 Web 服务。我想从 Android 平台的 Phonegap 应用程序调用该服务的方法。我正在使用 xui 库，该方法 xhr 对我来说非常难以理解。我已经阅读了很多关于该主题的帖子，但我不知道该怎么做。

我的 Web 服务链接如下所示`http://localhost/testservice/Service1.asmx`：

这是我的网络服务代码：

```
[System.Web.Script.Services.ScriptService]
public class Service1 : System.Web.Services.WebService
{

    [WebMethod]
    public string HelloWorld()
    {
        return "Hello World";
    }

    [WebMethod]
    public int Calculate(int firsNumber, int secundNumber)
    {
        return firsNumber + secundNumber;
    }
} 
```

这是我应该测试该服务的方法：

```
function checkWebService() {
      var url = new "http://localhost/testservice/Service1.asmx?op=HelloWorld";
      x$('#test').xhr(url, {error: function(){alert("failed "+this.responseText)},
      callback: function(){
         alert("Success " + this.responseText);
       }
 }); 
```

我在单击按钮时调用此方法，并且我总是对文本“成功”保持警惕，而没有“响应文本”。

可能我的网址是错误的，但我不知道我想输入哪个网址。这是针对没有参数的“HelloWorld”方法，我也不知道如何调用有参数的方法。

请提供任何帮助或解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T11:06:27.760

查看文档（我不熟悉 XUI），xhr 用于获取标准网页/JSON Web 服务，当您调用将返回 XML 肥皂响应的标准 Web 服务时（它们是 XML 标签而不是 HTML ）。您需要解析此响应以获得您需要的结果。

一个简单的方法是更改​​您的 Web 服务以返回 JSON 响应，然后在 javascript 中使用 eval() 为您提供对象的“类型化”视图。XUI 示例[在这里](http://kmithi.wordpress.com/2012/02/26/8/)。

如果您是新手，您可能会发现 JQuery 比 XUI 具有更大的文档/社区支持。

顺便说一句，“本地主机”是一个环回地址，基本上意味着“这台”计算机，所以即使它确实有效，它也会尝试连接到移动设备（或模拟器）上的 web 服务，而不是你通常会通过连接到的服务器网址。

# php - 我们应该将数据验证放在网站的什么位置？

> ID：11779552
> 
> 赞同：1
> 
> 时间：2012-08-02T14:26:16.053
> 
> 标签：php, javascript, validation

我浏览了互联网上的许多主题和/或问题，以寻找明确的答案，但到目前为止还没有得到任何答案。

问题的一部分已经回答（除非你告诉我这是错误的）。数据验证应该在客户端和服务器端完成。客户端通知用户无效数据并卸载服务器和服务器以防止任何类型的攻击。

不过，在双方进行验证可能是一项乏味的任务，我想知道是否有某种方法可以做到这一点，这样您就不会有太多重复的代码。

我还想知道其他一些事情......我有一个表，其中包含该行的（数据库的）id。在每一行的末尾，我有一个删除按钮，可以将其从 html 中删除，我的 JSON 对象包含我的值数组，并被发送到要从数据库中删除的 ajax 调用（2 个表之间的链接）。

这不安全（在互联网等不安全的环境中），我知道。我总是可以检查客户端以查看 id 是否只是数字，如果是，则检查服务器端是否存在。但是谁告诉我用户没有进入调试器并反转了 2 行并最终删除了不应该的行？拥有我的 id 并避免人们倒置它们的最佳方法是什么？

任何建议表示赞赏

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T14:31:56.953

> 数据验证应该在客户端和服务器端完成。

客户端恕我直言，实际上并不需要这样做。但是很高兴能够在提交数据之前通知用户。所以我称它为pre。

> 不过，在双方进行验证可能是一项乏味的任务，我想知道是否有某种方法可以做到这一点，这样您就不会有太多重复的代码。

因为 PHP 是服务器端，而 javscript 是客户端，所以要防止代码重复并不容易。我知道有一种方法是使用[xhr requests](http://en.wikipedia.org/wiki/XMLHttpRequest)。这样您就可以在 javascript（客户端）中使用 php 验证。

> 在每一行的末尾，我有一个删除按钮，可以将其从 html 中删除

请告诉我您正在使用[CSRF 保护](http://en.wikipedia.org/wiki/Cross-site_request_forgery)。:-)

> 我总是可以检查客户端以查看 id 是否只是数字，如果是，则检查服务器端是否存在。

为防止恶意 sql 注入，您应该[使用准备好的语句和参数化查询](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T14:31:20.473

验证应**始终在服务器上完成**。客户端验证只是为了方便用户，从安全的角度来看并不是绝对必要的（除非它打开了 XSS 安全漏洞）。

除此之外，您应该清理从用户那里收到的**每一个输入。**在输入通过完整性检查后（例如，如果有文本应该有数字），您应该进行权限测试（*用户是否具有执行请求的操作的适当权限？*）

完成此操作后，您就可以实际执行交易了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T14:44:11.937

由于已经发布了其他答案，我建议您专用一个可以调用 Utility 的实用程序类，并且您可以在其中存储许多有用的函数来检查服务器端的数据类型和内容，即使您会这样做在客户端和服务器端都进行了一些很好的验证，至少您的代码将更具可读性和可管理性。

创建和管理您自己的实用程序类的另一个好处是您可以轻松地在所有项目中使用它们。

例如，实用程序类可以包含各种方法，从验证某个字段是否在特定值范围内，或者它不包含特殊字符（使用正则表达式）等等......您的高级实用程序方法将专注于关于防止脚本插入，如前所述的 sql 注入。

总而言之，您将完成一次工作并一直从中受益，我确定您不想开始检查年龄字段是否为负数或您从头开始执行的每个项目。使用 Ajax 和 XHR 可以成为服务器端和客户端代码之间的桥梁，并帮助您统一验证并避免重复。

# php - 自动在 Facebook 粉丝页面上发布特定语言的帖子

> ID：11779571
> 
> 赞同：-2
> 
> 时间：2012-08-02T14:27:16.317
> 
> 标签：php, facebook, facebook-graph-api

我知道在 Facebook 粉丝页面上，如果您想根据他们的 Facebook 语言让帖子只对特定的一组人可见，我们可以这样做。例如。如果我想发布只有将 Facebook 语言设置为法语的人才能看到的帖子，那么我可以在发布时设置“设为可见：语言 -> 法语”。

现在，我想以编程方式执行此操作。我有 2 组文本。我想将其中一个发布到一组特定的语言中，而其他的只是法语。比如说，第一个设置为“英语、西班牙语、波兰语”，而第二个设置为“法语”。如何以编程方式执行此操作？facebook API 允许我们这样做吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T14:40:23.133

我没有尝试过，但这里的文档[https://developers.facebook.com/docs/reference/api/page/#posts](https://developers.facebook.com/docs/reference/api/page/#posts)似乎暗示您可以包含“定位”属性。尝试在图形 api 资源管理器中使用它，看看它是否实现了你所追求的。我假设您知道如何使用 api，因为您只是提到了它的语言方面。如果您不知道可以使用 api 做什么，那么我建议您查看 Matt 在评论中提到的文档

# c# - BAL 在 3 层架构中的用途

> ID：11779574
> 
> 赞同：0
> 
> 时间：2012-08-02T14:27:24.500
> 
> 标签：c#, asp.net

我是 3 层架构的新手，因为它由 UI、BAL 和 DAL 层组成。所以我在 DAL 中编写所有数据库代码，我已经在 BAL 中声明了变量，我已经在 UI 中调用了这些方法，但这是是正确的编码方式？？我的 BAL 在做什么？业务层的主要目的是什么？谁能解释我，谢谢。

```
 //In my BAL

public class ProfileMasterBLL
{
    public int UserId { get; set; }
    public string FormFiledBy { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }

} 
```

//在我的用户界面中

```
 ProfileMasterBLL pmBLL = new ProfileMasterBLL();
        pmBLL.FirstName = TextBox1.Text;
        pmBLL.LastName = TextBox2.Text;

//In my DAL 
```

insert() 方法

那么我该如何调用 ProfileMasterBLL.insert() 呢？正如我在 DAL 中所写的那样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:30:44.863

业务层用作 UI 和 DAL 之间的中间人。它用于您的应用程序将包含的任何或所有业务逻辑。例如，在会计应用程序中，您可能希望在将数据发送到数据库层之前对数据执行一些计算和检查，您可以在业务层中执行此操作。

您的 UI 可以执行以下操作：

```
//establish person object
//pass in some salary with it to BL
BL.CalcPay(somePerson, someSalary); 
```

然后在你的 BL 中：

```
//inside of BL
//if its a CEO they are lucky, they get paid twice as much
 decimal toGive = someSalary;
if(somePerson.IsCEO)
 toGive = toGive * 2; //CEO gets paid more :(

//now call DAL
DAL.CalcPay(somePerson, toGive) 
```

然后在你的 DAL 中：

```
//inside of DAL
//perform some update by calling for instance a sproc
using(SQL....)
{
} 
```

不是最好的例子，但它应该明白这一点，很多时候你的 BL 什么都不做，只是将方法调用交给 DAL。仅仅因为它是 BL 并不意味着它必须有某种与之相关的检查。所以你最终可能会做这样的事情：

```
//inside UI
string s = BL.GetSomeString();

//inside BL
return DAL.GetSomeSomeString();

//inside DAL
return someString; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T14:31:53.673

业务层的作用是执行业务规则，例如验证您的实体，在实体上执行业务规则，在实体上执行业务功能。

通常你有两个选择。

在存储过程中实现业务逻辑

或者

在业务层中实现业务逻辑

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T14:35:11.120

业务层的存在是为了提供一个放置业务逻辑的地方。数据访问逻辑应该只对数据库进行创建、检索、更新和删除 (CRUD) 操作。表示层应该只有决定用户如何与系统交互的逻辑。

例如，如果您在 UI 中单击“添加用户”，这可能会调用业务层中的 BAL.AddUser() 方法，然后该方法会调用多个数据层方法，例如 DAL.AddUser() 以插入用户，然后DAL.AddUserToGroup() 将新用户放入默认组。

# android - Android Webview - XML？

> ID：11779579
> 
> 赞同：5
> 
> 时间：2012-08-02T14:27:38.137
> 
> 标签：android

有没有办法在布局 xml 中而不是在代码中定义 webview。

如果是这样怎么办？还是建议将其编码到活动中？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-02T14:34:13.177

是的，如上所述使用 WebView 标记：

```
<WebView android:id="@+id/webview"
android:layout_width="fill_parent" android:layout_height="50dip"/> 
```

可以在此处找到示例应用程序： [http ://www.androiddom.com/2011/04/creating-android-calculator-tutorial.html](http://www.androiddom.com/2011/04/creating-android-calculator-tutorial.html)

作者创建了一个计算器，它使用在 main.xml 布局中指定的 WebView。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T14:30:23.200

是的，使用`<WebView />`标签在 xml 布局中执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-18T22:29:12.367

并在您的代码中输入：

```
WebView wv = (WebView)findViewById(R.id.webview);
wv.setWebViewClient(new WebViewClient(){
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        view.loadUrl(url);
        return true;
    }
});
wv.loadUrl("your url here"); 
```

# c# - 使用 OpenXML SDK 2.0 对来自 tableCell 的文本进行对齐

> ID：11779580
> 
> 赞同：6
> 
> 时间：2012-08-02T14:27:43.050
> 
> 标签：c#, alignment, openxml, openxml-sdk

我想在带有 OpenXML 的表格中的表格单元格中应用文本对齐。

我不明白为什么不应用它。

```
Table table = new Table();
TableRow tableHeader = new TableRow();
table.AppendChild<TableRow>(tableHeader);
TableCell tableCell = new TableCell();
tableHeader.AppendChild<TableCell>(tableCell);
Paragraph paragraph = new Paragraph(new Run(new Text("test")));
ParagraphProperties paragraphProperties = new ParagraphProperties();
JustificationValues? justification = GetJustificationFromString("centre");
if (justification != null)
{
     paragraphProperties.AppendChild<Justification>(new Justification() { Val = justification });
}
paragraph.AppendChild<ParagraphProperties>(paragraphProperties);
tableCell.AppendChild<Paragraph>(paragraph);

public static JustificationValues? GetJustificationFromString(string alignment)
{
    switch(alignment)
    {
        case "centre" : return JustificationValues.Center;
        case "droite" : return JustificationValues.Right;
        case "gauche" : return JustificationValues.Left;
        default: return null;
    }
} 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-30T01:02:42.717

如果您要将paragraphProperties 应用于父单元格而不是段落，它是否有效？

```
Table table = new Table();
TableRow tableHeader = new TableRow();
table.AppendChild<TableRow>(tableHeader);
TableCell tableCell = new TableCell();
tableHeader.AppendChild<TableCell>(tableCell);
ParagraphProperties paragraphProperties = new ParagraphProperties();
Paragraph paragraph = new Paragraph(new Run(new Text("test")));
JustificationValues? justification = GetJustificationFromString("centre");

// Use System.Nullable<T>.HasValue instead of the null check.
if (justification.HasValue)
{
    // Using System.Nullable<T>.Value to obtain the value and resolve a warning 
    // that occurs when using 'justification' by itself.
    paragraphProperties.AppendChild<Justification>(new Justification() { Val = justification.Value });
}

// append the paragraphProperties to the tableCell rather than the paragraph element
tableCell.AppendChild<ParagraphProperties>(paragraphProperties);
tableCell.AppendChild<Paragraph>(paragraph);
Console.WriteLine(table.OuterXml); 
```

table.OuterXml 之前：

```
<w:tbl xmlns:w="http://schemas.openxmlformats.org/wordprocessingml/2006/main">
  <w:tr>
    <w:tc>
      <w:p>
        <w:r>
          <w:t>test</w:t>
        </w:r>
        <w:pPr>
          <w:jc w:val="center" />
        </w:pPr>
      </w:p>
    </w:tc>
  </w:tr>
</w:tbl> 
```

table.OuterXml 之后：

```
<w:tbl xmlns:w="http://schemas.openxmlformats.org/wordprocessingml/2006/main">
    <w:tr>
    <w:tc>
        <w:pPr>
        <w:jc w:val="center" />
        </w:pPr>
        <w:p>
        <w:r>
            <w:t>test</w:t>
        </w:r>
        </w:p>
    </w:tc>
    </w:tr>
</w:tbl> 
```

我对 OpenXml 相当陌生。结果是否保存到word文档并在word中查看？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-29T23:02:20.203

ParagraphProperties 节点无效的原因是节点的顺序在这里很重要。

您正在（相当合理！）在运行之后将段落属性添加到段落节点。您可能会认为软件会首先考虑该节点，无论它指定的顺序是什么。但是，这是 Microsoft Word，顺序**确实**很重要。

您需要在运行之前附加 ParagraphProperties 节点。

我自己也有同样的问题。附加 ParagraphProperties 首先解决了这个问题。

# jquery - 使用 JQuery，我如何将点击事件发送到动态表的一行？

> ID：11779582
> 
> 赞同：1
> 
> 时间：2012-08-02T14:27:50.950
> 
> 标签：jquery, javascript-events

我有一个 ajax 表单，它返回一个列表并将其放入 HTML 表中。我计划在 ajax 调用的 Complete 部分中使用 click 事件，但不确定如何进行。

我需要的是一种能够：a）确定表中是否有任何行的方法，以及b）向该行发送点击事件。

我知道如何执行点击事件，它是导致我暂停的动态表。感谢帮助，汽车

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T14:29:41.503

没有测试它，但这应该可以完成工作：

```
alert( $('#myTable tr').length ) 
```

输入您的表格的 ID、类或其他任何内容，然后选择所有子元素`tr`。使用函数长度，她将返回`tr`您表内的数字。如您所知，每个`tr`都是一行。

所以最后，您的代码将如下所示：

```
if( $('#myTable tr').length > 0 ){
    // You have more then 1 row !
    $('#yourBtn').trigger('click');
} 
```

* * *

如果要单击第一行，无论如何都可以这样做：

```
$('#myTable tr:first-child').trigger('click'); 
```

但是，单击一行并不是最好的主意，因为一行不是链接。如果你想点击 a 中的链接`TD`，你可以试试这个：

```
// Will find first TR (row)
// Will go to the TD with the index "1". I think it's the second TD because index start     at 0, but I am not sure anymore.
// Will find the first link, then trigger it as a "click".
$('#myTable tr:first-child').find('td:eq(1) a').trigger('click'); 
```

最后一个没试过，不知道好不好用。

# django - Django：在其他单元测试中重用单元测试

> ID：11779583
> 
> 赞同：3
> 
> 时间：2012-08-02T14:27:52.817
> 
> 标签：django, unit-testing

有两种型号：

```
class Model1(models.Model):
    attribute = models.CharField(max_length=100)

class Model2(models.Model):
    target = models.ForeignKey(Model1) 
```

和一个单元测试`tests.py`：

```
class Model1Test(TestCase):
    def test_make_new_model_and_save():
        m = Model1()
        m.attribute = 'test values'
        m.save()

class Model2Test(TestCase):
    def test_make_new_model_and_save():
        # Make new Model1 to FK to
        m = Model1()
        m.attribute = 'test values'
        m.save()   

        m2 = Model2()
        m2.target = m
        m2.save() 
```

我只想调用在 Model1 的测试类中定义的 unittest 函数，而不是再次复制代码来测试 Model2。这我想像：

```
class Model1Test(TestCase):
    def test_make_new_model_and_save():
        m = Model1()
        m.attribute = 'test values'
        m.save()
        return m

class Model2Test(TestCase):
    def test_make_new_model_and_save():
        # Make new Model1 to FK to
        m = Model1Test('test_make_new_model_and_save')

        m2 = Model2()
        m2.target = m
        m2.save() 
```

但这似乎不起作用，我立即发现自己处于单元测试框架的内部。我找不到很多关于这类事情的参考资料，所以作为单元测试的新手，我觉得我在某个地方走错了路。

是否有重用单元测试的“正常”方法，或者我的方法有缺陷？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T14:46:32.730

这实际上只是一个关于 Python 中的对象和类的问题。答案是定义一个包含所需初始化代码的通用超类，从中继承 Model1Test 和 Model2Test，并从两者中调用它。

```
class CommonSetUp(TestCase):
    def make_new_model_and_save():
        m = Model1()
        m.attribute = 'test values'
        m.save()
        return m

class Model2Test(CommonSetUp):
    def test_make_new_model_and_save():
        self.make_new_model_and_save()
        self.assertTrue(...your assertions here...)

class Model2Test(CommonSetUp):
    def test_make_new_model_and_save():
        self.make_new_model_and_save()

        m2 = Model2()
        m2.target = m
        m2.save()

        self.assertTrue(...your assertions here...) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T19:29:00.690

我不建议在另一个测试方法中调用测试方法。
它会造成混乱，一段时间后测试变得不稳定，更难修复或维护。

# android - 如何从安卓打开kindle电子书？

> ID：11779584
> 
> 赞同：2
> 
> 时间：2012-08-02T14:27:55.400
> 
> 标签：android, kindle

我正在尝试从我的 android 应用程序启动 Amazon Kindle 应用程序，但基于用户单击的特定书籍。

我能够确定可用的书籍以及用户选择了哪本书，但我只能启动 kindle 应用程序（使用包名称 com.amazon.kindle）来启动 kindle 应用程序。

有谁知道我可以发送任何其他命令来指定要打开的书？我知道这是可能的，因为在 google play 商店中有一个小部件，用户可以在其中选择一个嘘声，它会在主屏幕上创建一个按钮来启动 kindle 应用程序并打开这本书。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T01:57:03.530

首先，我们需要将意图设置为`ACTION_VIEW`意图。

然后我们需要为`Uri`数据定义一个链接，它实际上是一个看起来像这样的链接：**kindle://book/?action=open&book_id=AMZNID0/B000FC1GHO/0/**，在这种情况下，B000FC1GHO 部分对应于书。

最后我们就可以开始活动了。就我而言，我必须设置一些标志来启动新活动。

我正在使用的代码如下：

```
if(intent.getAction().contains("BOOK_ACTION_"))
    {
        Log.w("LOG", "We have a book selected");

        bookID = intent.getAction().substring(12);
        Log.w("LOG", bookID);

        Intent readbook = new Intent(Intent.ACTION_VIEW);
        readbook.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

        Uri file = Uri.parse("kindle://book/?action=open&book_id=AMZNID0/" + bookID + "/0/");
        readbook.setData(file);
        context.startActivity(readbook);

    } 
```

在这种情况下，我将覆盖该`onReceive`方法，以便我可以在每本书上执行一些额外的步骤。大概是因为我只是在设置一个`ACTION_VIEW`意图，这可能是另一个类中的句柄，该类`onClickListener`为`imageview`持有我想要的书。

# c# - TCP 服务器/客户端的自定义消息帧协议

> ID：11779587
> 
> 赞同：2
> 
> 时间：2012-08-02T14:27:57.503
> 
> 标签：c#, sockets, asynchronous

我使用 Net.Sockets.Socket 类来编写 TCP 服务器。由于 TCP 在流上运行，因此需要一种方法来将消息彼此分开。（有关详细信息，请参阅 Stephen Cleary 在他的博客中的消息框架帖子[。](http://nitoprograms.blogspot.com/2009/04/message-framing.html)）

我想要实现的是编写一个支持自定义消息帧协议的 TCP 服务器类。此类的示例初始化如下：

```
var receiveDelimiter = Encoding.UTF8.GetBytes("[END]");
var sendDelimiter = Encoding.UTF8.GetBytes("\r\n");
var protocol = new DelimiterFramingProtocol(receiveDelimiter, sendDelimiter);
var server = new Server(protocol);
server.Start(port); 
```

该协议应该从抽象类 MessageFramingProtocol 派生，并且服务器应该能够使用它来分隔消息。在上面的示例中，如果接收到分隔符（即“[END]”），服务器应该只触发它的 DataReceived 事件，并且 DataReceived 的参数应该只有在分隔符之前的消息部分。如果在分隔符之后收到更多字节，则服务器应存储它们并仅在再次收到分隔符时触发 DataReceived。服务器还应该在它发送的每条消息之后发送 sendDelimiter。

我需要的不是整个服务器类或任何协议类。我需要的是一个模板，一个设计建议。假设我在服务器类中有一个名为 Protocol 的 FramingProtocol 类型的属性，我如何在服务器类的接收和发送操作中使用它？它应该具有哪些抽象方法/属性来提供您在上面看到的灵活性？我应该能够编写派生自 FramingProtocol 的自定义协议类。他们可以使用分隔符、长度前缀，或者其他自定义方法来分隔消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:04:41.170

我不会只使用一个传递给服务器的协议实例——它需要很多。为服务器提供一个工厂类，它要么创建新的协议实例，要么将它们从启动时创建和填充的池中分离出来。

我通常做的是这样的：

RX：提供一个“int Protocol::addBytes(char *data,int len)”函数。输入原始 rx 数据的地址和长度，该函数返回 -1，（意味着它在没有完全组装协议单元的情况下消耗了所有原始数据），或者一个正整数，即在该点消耗的数据的索引它组装了一个有效的PDU。如果实例设法组装一个 PDU，它可以被进一步处理，（例如，触发一个 'DataReceived(Protocol *thisPDU)' 事件并创建一个新的协议实例，（或分离），并加载剩余的原始数据.

TX：提供，（很可能重载），'bool Protocol::loadFrom(SomeDataClass * outData, OutStreamClass *outStream)' 方法，可以将来自任何来源的数据加载到内部成员变量中，以便存在完整的数据集以生成序列化PDU，（如果存在某些问题，则返回 false 或引发异常 - 例如，提供的数据未通过完整性检查）。如果未检测到错误，则实例将序列化数据从传递的“outStream”流/socket/buffer+len 中驱动出来。

# search - A-star 搜索和整数规划之间的连接，扩展 A-star

> ID：11779589
> 
> 赞同：2
> 
> 时间：2012-08-02T14:28:05.460
> 
> 标签：search, optimization, routing, path-finding, a-star

对于欧几里得最短路径问题，是否有人对 A 星搜索和更一般的整数规划公式之间的联系有很好的参考？

我特别感兴趣的是如何修改 A-star 以应对额外的（可能是依赖于路径的）约束，如果使用通用 LP/IP 求解器来解决像这样的受限最短路径问题是有意义的，或者如果什么需要更专业才能达到 A-star 获得的相同性能以及良好的启发式。

不怕数学，但我为更复杂的最短路径问题找到的大多数参考资料都没有很明确地说明它们与 A* 等启发式引导算法的关系（也许是因为“A*”很难用谷歌搜索。 ..)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T13:21:09.627

您可能想要研究约束优化，特别是软弧一致性和约束满足，特别是弧一致性或其他类型的一致性，例如 i-一致性。以下是有关约束优化的一些参考资料：

[1] 托马斯·希克斯。软约束处理。[http://www.inra.fr/mia/T/schiex/Export/Ecole.pdf](http://www.inra.fr/mia/T/schiex/Export/Ecole.pdf)

[2] 德希特，丽娜。约束处理，第 1 版。摩根考夫曼，旧金山，CA 94104-3205，2003。

[3] Kask, K. 和 Dechter, R. Mini-Bucket Heuristics for Improvement Search。在过程中。UAI-1999（加利福尼亚州旧金山，1999 年），Morgan Kaufmann，第 314-323 页。

[3] 可能特别有趣，因为它处理将 A* 与您似乎感兴趣的类型的启发式相结合。

我不确定这是否对您有帮助。我是这样认为它可能的：

约束优化是 SAT 对具有两个以上值的优化和变量的概括。一组软约束（即部分成本函数）和一组离散变量定义了您的问题。通常使用分支定界算法来遍历该问题所暗示的搜索树。软弧一致性是指一组启发式算法，它们使用局部软约束来计算从您当前位置到该搜索树中目标节点的近似距离。这些启发式用于分支定界搜索，就像启发式用于 A* 搜索一样。

分支定界与树上的 A* 的关系与深度优先搜索与广度优先搜索的关系非常相似。因此，除了在这种情况下使用了类似 DFS 的算法（分支定界）并且它是树而不是图之外，它看起来像（软）弧一致性或其他类型的一致性就是你要找的。

不幸的是，虽然您原则上可以使用 A* 代替分支定界，但目前尚不清楚（据我所知）通常如何将 A* 与软弧一致性结合起来。从树到图可能会使事情进一步复杂化，但我不知道。

所以，没有最终答案，只是一些可以作为入门的东西，也许:)。

# ruby-on-rails - 链接到外部 URL 对象 RoR

> ID：11779591
> 
> 赞同：1
> 
> 时间：2012-08-02T14:28:09.293
> 
> 标签：ruby-on-rails, ruby-on-rails-3

目前，当我的应用程序中的用户创建一个新的职位发布时，他们会输入一个链接到他们网站上的职位页面的 URL。然后我想用这个链接到他们的网站。

它存储在我的数据库中，`job.job_url`并且我在控制器中定义了一个对象`@link`来查找工作和相关 URL。

我目前有以下代码来遍历所有作业并提供链接：

```
 <section id="job-wrapper">
   <% @jobs.each do |job| %>
    <%= link_to @link.job_url do %>
       <%= job.title %>
       <%= job.location %>
       <%= job.job_type %>
       <%= job.salary %>
       <%= job.company %>
   <% end %>
  <% end %>
 </section> 
```

我遇到的问题是，如果没有包含`http://`rails 的 URL，则假定链接是内部链接，因此会生成类似`localhost:3000/www.google.com`.

有没有办法让我确保 Rails 只在实例中将链接识别为外部链接？`http://`或者，除非用户已经说明，否则有人可以解释我如何在创建时添加所有链接？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T16:09:10.233

感谢你的帮助！

我设法通过创建一个名为的新助手来解决这个问题`URLhelper`

这包含：

```
 module UrlHelper
   def url_with_protocol(url)
     /^http/.match(url) ? url : "http://#{url}"
   end
 end 
```

然后我只使用了以下`link_to`

```
 <%= link_to url_with_protocol(@link.job_url), :target => '_blank' do %> 
```

谢谢

# php - 基本 cron 作业设置为每天执行 php 文件

> ID：11779599
> 
> 赞同：0
> 
> 时间：2012-08-02T14:28:29.133
> 
> 标签：php, cron

我是使用 cron 作业的新手。我正在尝试每天运行下面的脚本。Go Daddy 是我的托管服务提供商。我尝试使用 Go Daddy 内置的**Cron Job Manager**创建一个 cron 作业，但没有成功。我想知道是否有人可以帮助我开始创建一个每天运行以下 php 脚本的命令。

有没有办法通过单独修改 .php 文件来设置它？

我很感激任何建议。

```
<?php 
            #!/usr/bin/php

            //Create mysql connect variable

            $conn = mysql_connect('host', 'user', 'pass');

            //kill connection if error occurs

            if(!$conn){

                die('Error: Unable to connect. <br/>' . mysql_error());

            }

            //connect to mysql database

            mysql_select_db("mdb", $conn);

            $results = mysql_query("SELECT * FROM files");

            $name_array = Array();

            while($row = mysql_fetch_array($results)){

                $name_array[] = $row['name'];

            }

            shuffle($name_array);

            for($i=0; $i < 2; $i++){

                echo $name_array[$i];

            }

        ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:33:44.917

没有办法在文件中设置，必须用cron来完成。如果您能够编辑 /etc/crontab，请添加以下行：

```
01 0 * * * root /usr/bin/php -f /path/to/page 
```

否则，您必须按照[此处](http://support.godaddy.com/help/article/3547/creating-a-basic-cron-job?pc_split_value=2)的说明操作，或联系 GoDaddy 了解其无法正常工作的原因。

# java - 在 EJB 容器事务中管理 JDBC 事务

> ID：11779600
> 
> 赞同：0
> 
> 时间：2012-08-02T14:28:31.960
> 
> 标签：java, logging, jdbc, transactions, ejb

我有一个 EJB，它有 @TransactionAttribute(TransactionAttributeType.REQUIRES_NEW)。在 EJB 中，我有一个记录器，它已配置为使用 JNDI appender 和 JDBC 登录数据库：

```
public class JNDIAppender extends AppenderSkeleton {

    private Connection connection;
    private Statement statement;
    private String sql;
    private String dataSourceLookupAddress;

    /**
     * Constructor.
     */
    public JNDIAppender() {
    }

    /**
     * @return the sql
     */
    public final String getSql() {
        return sql;
    }

    /**
     * @param sql the sql to set
     */
    public final void setSql(final String sql) {
        this.sql = sql;
    }

    /**
     * @return the dataSourceLookupAddress
     */
    public final String getDataSourceLookupAddress() {
        return dataSourceLookupAddress;
    }

    /**
     * @param dataSourceLookupAddress the dataSourceLookupAddress to set
     */
    public final void setDataSourceLookupAddress(final String dataSourceLookupAddress) {
        this.dataSourceLookupAddress = dataSourceLookupAddress;
    }

    private synchronized Connection getConnection() {
        if (connection == null) {
            try {
                final Context ctx = new InitialContext();
                final DataSource ds = (DataSource) ctx.lookup(getDataSourceLookupAddress());
                connection = ds.getConnection();
                connection.setAutoCommit(false);
            } catch (final NamingException e) {
                errorHandler.error("Datasource JNDI lookup failed: " + dataSourceLookupAddress + "!");
                errorHandler.error(e.toString());
            } catch (final SQLException e) {
                errorHandler.error("Sql connection failed to " + dataSourceLookupAddress + "!");
                errorHandler.error(e.toString());
            }
        }
        return connection;
    }

    private synchronized Statement getStatement() {
        if (statement == null) {
            try {
                statement = getConnection().createStatement();
            } catch (final SQLException e) {
                errorHandler.error(e.toString());
            }
        }
        return statement;
    }

    @Override
    public void activateOptions() {
        if (getSql() == null) {
            errorHandler.error("param 'sql' is null!");
        }
        if (getDataSourceLookupAddress() == null) {
            errorHandler.error("param 'DataSourceLookupAddress' is null!");
        }
    }

    /*
     * (non-Javadoc)
     * @see org.apache.log4j.AppenderSkeleton#append(org.apache.log4j.spi.LoggingEvent)
     */
    @Override
    protected synchronized void append(final LoggingEvent event) {
        try {
            ((PatternLayout) getLayout()).setConversionPattern(getSql());
            final String sqlClause = getLayout().format(event);
            getStatement().executeUpdate(sqlClause);
            getConnection().commit();
        } catch (final SQLException e) {
            errorHandler.error(e.toString());
        } finally {
            close();
        }
    }

    /*
     * (non-Javadoc)
     * @see org.apache.log4j.AppenderSkeleton#close()
     */
    public void close() {
        try {
            if (statement != null) {
                statement.close();
                statement = null;
            }
        } catch (final SQLException e) {
            errorHandler.error(e.toString());
        } finally {
            if (connection != null) {
                try {
                    connection.close();
                    connection = null;
                } catch (final SQLException e) {
                    errorHandler.error(e.toString());
                }
            }
        }
    }

    /*
     * (non-Javadoc)
     * @see org.apache.log4j.AppenderSkeleton#requiresLayout()
     */
    public boolean requiresLayout() {
        return true;
    }

    /*
     * (non-Javadoc)
     * @see org.apache.log4j.AppenderSkeleton#finalize()
     */
    @Override
    public void finalize() {
        close();
        super.finalize();
    }

} 
```

现在，当 EJB 方法调用期间发生异常时，不会将任何内容记录到数据库中，因为事务已回滚（但是，我已将 autoCommit 设置为 false 并在 JNDIAppender 中手动提交事务）。

我的问题是：有没有办法在单独的事务中登录数据库？（我尝试将 @TransactionAttribute(TransactionAttributeType.REQUIRES_NEW) 添加到 JNDIAppender，但这没有帮助）。或者是否有任何其他解决方案能够登录数据库，即使已引发异常？我可能会使用单独的数据源来登录数据库，但这似乎有点矫枉过正。

**UPD：**嗯，实际上 JNDIAppener 确实提交了事务（并因此登录到 DB），当我测试它时，我刚刚错过了一些行:) 但问题是它也提交了所有内容，这是在异常之前在 EJB 中完成的（不能实际提交）。

我必须说，我们的持久层也是 JDBC，所以基本上 EJB 使用 JDBC 与 DB 一起工作。因此，就我在创建连接时在 JNDIAppender 中看到的而言，它仍然使用与 EJB 中相同的事务。我可以使用 JDBC 创建一个单独的事务并管理它，而已经存在打开的事务吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-05T14:25:05.537

该问题的解决方案是使用单独的线程（启动新事务）进行日志记录。类似的东西，但不是这样的（我手头没有确切的代码）：

```
Thread t = new Thread() {
            @Override
            public void run() {
                try {
                    ((PatternLayout) getLayout()).setConversionPattern(getSql());
                    final String sqlClause = getLayout().format(event);
                    getStatement().executeUpdate(sqlClause);
                    getConnection().commit();
                } catch (final SQLException e) {
                    errorHandler.error(e.toString());
                } finally {
                    close();
                }
            }
        };
        t.run(); 
```

# mysql - 连接到 MySQL 数据库

> ID：11779601
> 
> 赞同：0
> 
> 时间：2012-08-02T14:28:32.113
> 
> 标签：mysql, database

我已在 phpMyAdmin 中将数据库导入 MySQL。我正在使用 WAMPSERVER (localhost) 在本地执行我的工作。

在我导入数据库之前，我收到错误数据库未找到。现在我已经在 localhost 中添加了数据库。当我转到 index.php 时，我在浏览器中收到以下错误

**SSL 连接错误 无法与服务器建立安全连接。这可能是服务器的问题，或者可能需要您没有的客户端身份验证证书。错误 107 (net::ERR_SSL_PROTOCOL_ERROR)：SSL 协议错误。**

以下是有关配置文件的一些详细信息，如果有帮助的话：

我没有更改 .htaccess 文件。但是，我确实有一个如下所示的配置文件：

```
<?php
if($_SERVER['REMOTE_ADDR']=="127.0.0.1")
{
    $DB_HOST="localhost";
    $DB_USER="root";
    $DB_PASS="";
    $DB_NAME="dbName";
    $site_url="http://localhost/folder/";
    $doc_root=$_SERVER['DOCUMENT_ROOT']."/folder/";
}
else
{
    $DB_HOST="localhost";
    $DB_USER="root";
    $DB_PASS="password";
    $DB_NAME="dbName";
    if($_SERVER["HTTPS"]=="on")
        $site_url="weburl";
    else
        $site_url="weburl";
    $doc_root=$_SERVER['DOCUMENT_ROOT'];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T14:32:08.797

`https://`在本地机器上运行时不需要使用。因为你不能为你的本地机器获得 SSL 证书，不是吗？

尝试：`http://localhost/myfolder/index.php`改为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T14:37:13.270

你可能没有`https`开。

`http://`由于您已经`https://`在浏览器中访问过，因此您遇到了问题（我猜是 Chrome）。尝试清除您访问过的网站或历史记录，它会正常工作。或者您可以在其他浏览器中尝试。

此外，您可能已经编辑了`.htacess`要重定向的文件或安装了带有`https`on 的 php 框架。

# jquery - 从内部按钮中创建一个 div.show/hide，但让按钮保留

> ID：11779602
> 
> 赞同：0
> 
> 时间：2012-08-02T14:28:42.237
> 
> 标签：jquery, css

我有一个左导航器，我想让它隐藏在用户命令中。

[http://jsfiddle.net/Ktqbz/](http://jsfiddle.net/Ktqbz/)

单击“我隐藏导航”按钮后，该按钮应保持可见，并保持在相同的垂直空间，并在再次显示导航时将其重新定位到原始位置。我怎样才能做到这一点？如果需要，我可以更改 html，我知道当您拥有 html 时`display:none`，不会显示其子级，流程也会更改，因此按钮不会停留在同一垂直位置。我也可以更改设计，所以如果您有更好的想法，我会全神贯注。但是，这应该对用户尽可能友好，如果我将按钮从其垂直位置移动，人们可能会感到困惑，这就是我想保留它的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:42:31.587

问题主要在于您的标记。“我隐藏导航按钮”包含在 #leftNavigator 中，因此当您隐藏 #leftNavigator 时，您也隐藏了您想要保持可见的按钮。有多种方法可以修改您的标记以使其正常工作。

本质上，我只是为导航器创建了一个包装器并将其相对定位，并且在其中我绝对定位了“我隐藏导航按钮”。我还为两个控制面板按钮添加了上边距，以便它们为“我隐藏导航”按钮留出空间。有很多方法可以完成这项工作。

```
#leftNavigator{float:left; width:100%; background-color:red;}
#top{height:150px; background-color:blue;}
#controlPanel{height:50px; background-color:gray;}
#tree{background-color:green;}
#content{overflow:auto; background-color:coffee;}
#btn{z-index:10;position:absolute;top:150px;}
​#navigator_wrapper{position:relative;height:150px;width:20%}
#controlPanel button {margin-top:25px;} 
```

​</p>

```
<div id="navigator_wrapper">
    <button id="btn">I hide the nav</button>
    <div id="leftNavigator">
        <div id="top">I have an image</div>
        <div id="controlPanel"><button>Other</button><button>controls</button></div>
        <div id="tree">I'm a jstree</div>    
    </div>
</diV>
<div id="content">
    I take all the space I want. Except for leftNavigator's space.
</div>​​​​​​​​​​​​​​​ 
```

这里是一个 jfiddle [http://jsfiddle.net/samisadaka/9c7va/](http://jsfiddle.net/samisadaka/9c7va/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T14:44:09.210

您可以解决`<button>`将`div`.

我摆弄着你的小提琴：http: [//jsfiddle.net/3Cam3/](http://jsfiddle.net/3Cam3/)

基本上，将您的 HTML 更改为如下所示：

```
<button id="btn">I hide the nav</button>
<div id="leftNavigator">
    <div id="top">I have an image</div>
    <div id="controlPanel"><button>Other</button><button>controls</button></div>
    <div id="tree">I'm a jstree</div>    
</div>
<div id="content">
    I take all the space I want. Except for leftNavigator's space.
</div>​ 
```

按钮将保持固定在它所在的位置（因为它是`position: absolute`）并且不会随着`div`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T14:39:59.873

这是乔的小提琴的一个稍微不同的版本。它将通过仅更改 opactiy 来保留阻塞。

[http://jsfiddle.net/Ktqbz/1/](http://jsfiddle.net/Ktqbz/1/)

```
$("#leftNavigator").animate({
    "opacity" : 0.0
}); 
```

# android - 带有文本和图像的自定义列表视图的搜索框

> ID：11779605
> 
> 赞同：0
> 
> 时间：2012-08-02T14:28:48.677
> 
> 标签：android, image, listview, search

大家好。我创建了一个带有图像、文本和搜索框的列表视图。这是我的代码：java 和布局。所以，我需要一些帮助。我不知道如何让我的搜索框开始工作。我需要一个代码。

我的 MainActivity.java

```
package android.codigos;

import android.app.Activity;
import android.codigos.objetos.ItemListView;
import android.graphics.Color;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;

import android.widget.EditText;
import android.widget.ListView;
import android.widget.Toast;
import java.util.ArrayList;

public class MainActivity extends Activity implements OnItemClickListener {

private ListView listView;
private EditText ed;
private AdapterListView adapterListView;
private ArrayList<ItemListView> itens;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    //carrega o layout onde contem o ListView
    setContentView(R.layout.main);

    //Pega a referencia do ListView
    listView = (ListView) findViewById(R.id.list);
    ed = (EditText)findViewById(R.id.EditText01);
    //Define o Listener quando alguem clicar no item.
    listView.setOnItemClickListener(this);

    createListView();
}

private void createListView() {
    //Criamos nossa lista que preenchera o ListView
    itens = new ArrayList<ItemListView>();
    ItemListView item1 = new ItemListView("Bahia", R.drawable.bahia);
    ItemListView item2 = new ItemListView("Minas Gerais", R.drawable.minasgerais);
    ItemListView item3 = new ItemListView("Rio de Janeiro", R.drawable.riodejaneiro);
    ItemListView item4 = new ItemListView("São Paulo", R.drawable.saopaulo);

    itens.add(item1);
    itens.add(item2);
    itens.add(item3);
    itens.add(item4);

    //Cria o adapter
    adapterListView = new AdapterListView(this, itens);

    //Define o Adapter
    listView.setAdapter(adapterListView);
    //Cor quando a lista Ã© selecionada para rolagem.
    listView.setCacheColorHint(Color.TRANSPARENT);
}

public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
    //Pega o item que foi selecionado.
    ItemListView item = adapterListView.getItem(arg2);
    //DemostraÃ§Ã£o
    Toast.makeText(this, "Você Clicou em: " + item.getTexto(),    Toast.LENGTH_LONG).show();
} 
```

}

AdapterListView.java

```
package android.codigos;

import android.codigos.objetos.ItemListView;
import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageView;
import android.widget.TextView;
import java.util.ArrayList;

/**
*
*/
public class AdapterListView extends BaseAdapter {

private LayoutInflater mInflater;
private ArrayList<ItemListView> itens;

public AdapterListView(Context context, ArrayList<ItemListView> itens) {
    //Itens que preencheram o listview
    this.itens = itens;
    //responsavel por pegar o Layout do item.
    mInflater = LayoutInflater.from(context);
}

/**
 * Retorna a quantidade de itens
 *
 * @return
 */
public int getCount() {
    return itens.size();
}

/**
 * Retorna o item de acordo com a posicao dele na tela.
 *
 * @param position
 * @return
 */
public ItemListView getItem(int position) {
    return itens.get(position);
}

/**
 * Sem implementaÃ§Ã£o
 *
 * @param position
 * @return
 */
public long getItemId(int position) {
    return position;
}

public View getView(int position, View view, ViewGroup parent) {
    //Pega o item de acordo com a posÃ§Ã£o.
    ItemListView item = itens.get(position);
    //infla o layout para podermos preencher os dados
    view = mInflater.inflate(R.layout.item_list, null);

    //atravez do layout pego pelo LayoutInflater, pegamos cada id relacionado
    //ao item e definimos as informaÃ§Ãµes.
    ((TextView) view.findViewById(R.id.text)).setText(item.getTexto());
    ((ImageView)  view.findViewById(R.id.imagemview)).setImageResource(item.getIconeRid());

    return view;
} 
```

}

项目列表视图.java

```
package android.codigos.objetos;

/**
*
*/
public class ItemListView {

private String texto;
private int iconeRid;

public ItemListView() {
}

public ItemListView(String texto, int iconeRid) {
    this.texto = texto;
    this.iconeRid = iconeRid;
}

public int getIconeRid() {
    return iconeRid;
}

public void setIconeRid(int iconeRid) {
    this.iconeRid = iconeRid;
}

public String getTexto() {
    return texto;
}

public void setTexto(String texto) {
    this.texto = texto;
} 
```

}

主.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<LinearLayout
android:layout_width="fill_parent"
android:layout_height="fill_parent"
xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:background="#FFFFFFFF"
>    

    <EditText
android:id="@+id/EditText01"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:hint="Type here to search."
>

</EditText>

    <ListView
    android:id="@+id/list"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:divider="#ECECEC"
    android:dividerHeight="1sp"
    />    
</LinearLayout> 
```

item_list.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout 
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="horizontal">
<LinearLayout 
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal"
    android:padding="5sp">
    <ImageView
        android:id="@+id/imagemview"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        />

    <TextView
        android:id="@+id/text"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_marginLeft="5sp"
        android:gravity="center_vertical"
        android:textColor="#FF000000"
    />
</LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:39:26.520

一般来说，算法如下：

1.  从 EditText 获取文本。
2.  从 ArrayList 中删除所有与搜索查询不匹配的项目。
3.  使用方法 adapter.notifyDataSetChanged() 刷新您的适配器

如果您需要源代码示例，我可以附上。

# entity-framework-4 - 实体框架多对多级联删除问题

> ID：11779611
> 
> 赞同：1
> 
> 时间：2012-08-02T14:29:10.397
> 
> 标签：entity-framework-4, ef-code-first, many-to-many, code-first

在处理代码优先 EF 项目时遇到一个奇怪的问题。

我有以下实体：

```
public class Booking
{
    public Guid BookingId { get; set; }
    public virtual List<AccountingDocumentItem> AccountingDocumentItems { get; set; }
}

public class AccountingDocumentItem
{
    public Guid AccountingDocumentItemId { get; set; }

    public virtual List<Employee> Employees { get; set; }
    public virtual List<Booking> Bookings { get; set; }
}

public class Employee
{
    public Guid EmployeeId { get; set; }
    public string Name { get; set; }

    public virtual List<AccountingDocumentItem> AccountingDocumentItems { get; set; }
} 
```

如您所见，AccountingDocumentItem 与 Bookings 和 Employees 之间存在多对多关系。配置我的 AccountingDocumentItem 时，我使用以下内容：

```
 public AccountingDocumentItemConfiguration()
    {
        HasMany(x => x.Employees);
        HasMany(x => x.Bookings);
    } 
```

奇怪的是，这对员工来说非常有效。我创建了一个 AccountingDocumentItemEmployees 表。但是对于预订，我收到以下错误：

“在表 'AccountingDocumentItemBookings' 上引入 FOREIGN KEY 约束 'FK_dbo.AccountingDocumentItemBookings_dbo.Bookings_Booking_BookingId' 可能会导致循环或多个级联路径。指定 ON DELETE NO ACTION 或 ON UPDATE NO ACTION，或修改其他 FOREIGN KEY 约束。”

现在，我尝试按照以下代码行执行此操作：

```
 HasMany(x => x.Bookings).WithMany(b => b.AccountingDocumentItems)... 
```

但是我只能选择使用上面的行来做一个地图，没有做一个 WillCascadeOnDelete(false) 的选项。

有人可以指出我做错了什么，因为将其与我处理员工的方式进行比较，我看不出任何区别。

编辑：

我原来的帖子缩写了实体，这可能是问题出现的地方。这是完整的实体：

```
public class AccountingDocument
{
    public Guid AccountingDocumentId { get; set; }
    public Guid SiteId { get; set; }
    public virtual Site Site { get; set; }
    public Guid? ClientId { get; set; }
    public virtual Client Client { get; set; }
    public Guid? SupplierId { get; set; }
    public virtual Supplier Supplier { get; set; }
    public string DocumentNumber { get; set; }
    public string Reference { get; set; }
    public string Description { get; set; }
    public string Notes { get; set; }
    public Guid LinkedAccountingDocumentId { get; set; }
    public virtual AccountingDocument LinkedAccountingDocument { get; set; }
    public byte AccountingDocumentTypeId { get; set; }
    public DateTime CreationDate { get; set; }
    public DateTime DocumentDate { get; set; }
    public decimal Total { get; set; }
    public Guid UserId { get; set; }
    public virtual User User { get; set; }
    public string Room { get; set; }
    public virtual List<AccountingDocumentItem> AccountingDocumentItems { get; set; }
}

public class AccountingDocumentItem
{
    public Guid AccountingDocumentItemId { get; set; }

    public Guid AccountingDocumentId { get; set; }
    public virtual AccountingDocument AccountingDocument { get; set; }

    public string Description { get; set; }

    public Guid TaxId { get; set; }
    public virtual Tax Tax { get; set; }

    public decimal Quantity { get; set; }
    public string Unit { get; set; }

    public decimal Cost { get; set; }
    public decimal SellInclusive { get; set; }
    public decimal SellExclusive { get; set; }
    public decimal DiscountPercentage { get; set; }
    public decimal TotalInclusive { get; set; }
    public decimal TotalExclusive { get; set; }
    public decimal CommissionInclusive { get; set; }
    public decimal CommissionExclusive { get; set; }
    public int LoyaltyPoints { get; set; }
    public bool IsSeries { get; set; }

    public byte ItemType { get; set; }

    public Guid? ServiceId { get; set; }
    public virtual Service Service { get; set; }
    public Guid? ProductId { get; set; }
    public virtual Product Product { get; set; }
    public Guid? VoucherId { get; set; }
    public virtual Voucher Voucher { get; set; }

    public int SortOrder { get; set; }

    public Guid? SourceId { get; set; }
    public virtual Source Source { get; set; }

    public Guid? CostCentreId { get; set; }
    public virtual CostCentre CostCentre { get; set; }

    public Guid? ClientId { get; set; }
    public virtual Client Client { get; set; }

    public Guid PackageGroupId { get; set; }
    public Guid PackageServiceId { get; set; }

    public virtual List<Employee> Employees { get; set; }
    public virtual List<Booking> Bookings { get; set; }
    public virtual List<MedicalDiagnosis> MedicalDiagnoses { get; set; }
}

public class Booking
{
    public Guid BookingId { get; set; }

    public Guid SiteId { get; set; }
    public Site Site { get; set; }

    public Guid? ClientId { get; set; }
    public Client Client { get; set; }

    public Guid BookingStateId { get; set; }
    public BookingState BookingState { get; set; }

    public virtual List<AccountingDocumentItem> AccountingDocumentItems { get; set; }
} 
```

还有我的配置：

```
public class AccountingDocumentConfiguration : EntityTypeConfiguration<AccountingDocument>
{
    public AccountingDocumentConfiguration()
    {
        Property(x => x.Reference).HasMaxLength(200);
        HasRequired(x => x.Site);
        Property(x => x.DocumentNumber).IsRequired().HasMaxLength(100);
        Property(x => x.Reference).HasMaxLength(200);
        Property(x => x.Description).HasMaxLength(500);
        Property(x => x.Notes).HasMaxLength(500);
        HasOptional(x => x.LinkedAccountingDocument);
        Property(x => x.AccountingDocumentTypeId).IsRequired();
        Property(x => x.CreationDate).IsRequired();
        Property(x => x.DocumentDate).IsRequired();
        Property(x => x.Total).IsRequired();
        Property(x => x.Room).HasMaxLength(50);
    }
}

public class AccountingDocumentItemConfiguration : EntityTypeConfiguration<AccountingDocumentItem>
{
    public AccountingDocumentItemConfiguration()
    {
        Property(x => x.Description).IsRequired().HasMaxLength(200);
        HasMany(x => x.Employees);
        HasMany(x => x.Bookings);
        HasMany(x => x.MedicalDiagnoses);
        Property(x => x.Unit).HasMaxLength(50);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T12:47:31.650

即使上面添加的文本对我有用，一旦我注释掉上面未完全定义的添加的导航属性。FK 错误意味着如果您碰巧删除*可能会出现竞争条件（请参阅这篇*[文章](http://social.msdn.microsoft.com/Forums/en-US/adonetefx/thread/d8845218-8b9c-4209-992b-acefc5787624/)），但这里有什么我不知道。您需要对数据库进行级联删除吗？如果没有，您可以将其关闭 - 我意识到这是一个非常广泛的小问题。

```
modelBuilder.Conventions.Remove<OneToManyCascadeDeleteConvention>(); 
```

如果这不是一个选项 - 这是您没有包含的其他内容。您有 Bookings 表的映射吗？看起来 Bookings 有一个必需的站点 - 删除一个站点是否可能会触发一系列其他内容的删除？看起来站点可以执行类似此站点-> 帐户文档-> 会计文档项.. 站点-> 预订的事情吗？

这是另一个可能相关的[SO问题。](https://stackoverflow.com/questions/5532810/entity-framework-code-first-defining-relationships-keys)

# c++ - 静态数组作为私有成员

> ID：11779616
> 
> 赞同：0
> 
> 时间：2012-08-02T14:29:17.123
> 
> 标签：c++, arrays, class

以这样的形式...

```
#ifndef UNICODE
#define UNICODE 
#endif

#include <Windows.h>
#include <iostream>

class A
{
public:
    void makeFoo(TCHAR* output)
    {
        wcscpy(outputBuffer,TEXT("Hello world ♥"));
    }
private:
    static const int MAX_OUTPUT_SIZE=2000;  
    static TCHAR outputBuffer[MAX_OUTPUT_SIZE];
};

int main()
{
    TCHAR string[255];

    A example;

    example.makeFoo(string);

    MessageBox(0,string,0,0);

    system("Pause");
    return 0;
} 
```

...我们有一个链接错误！

> 1>main.obj：错误 LNK2001：未解析的外部符号“私有：静态 wchar_t * A::outputBuffer”（？outputBuffer@A@@0PA_WA）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T14:32:46.663

发生链接器错误是因为您没有为`A::outputBuffer`任何地方提供定义。通过在文件范围内写入以下内容来解决此问题：

```
TCHAR A::outputBuffer[A::MAX_OUTPUT_SIZE]; 
```

的值`string`是意外的，因为该缓冲区未初始化；`makeFoo`它的参数不做任何事情，并且您不会手动初始化缓冲区。因此它可以包含任何东西（“垃圾”）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T14:33:03.147

添加：

```
TCHAR A::outputBuffer[A::MAX_OUTPUT_SIZE]; 
```

以上`main()`。

# powershell - 使用 Powershell 在环境选项卡中为终端服务器客户端分配登录脚本

> ID：11779617
> 
> 赞同：1
> 
> 时间：2012-08-02T14:29:20.723
> 
> 标签：powershell, environment, rdp, wmic

您好我正在寻找使用 Powershell 为用户配置文件设置登录脚本参数。我打算使用 WMIC USERACCOUNT 来执行此操作，但发现这是不可能的。如下图方法中不存在该方法：

```
 class Win32_UserAccount : Win32_Account
{
  uint32   AccountType;
  string   Caption;
  string   Description;
  boolean  Disabled;
  string   Domain;
  string   FullName;
  datetime InstallDate;
  boolean  LocalAccount;
  boolean  Lockout;
  string   Name;
  boolean  PasswordChangeable;
  boolean  PasswordExpires;
  boolean  PasswordRequired;
  string   SID;
  uint8    SIDType;
  string   Status;
}; 
```

我更愿意将其作为 powershell 中的一个语句来执行，但如果这不可能，它可以作为一个脚本来完成，我希望为 Win Server 2008 R2 设置图片中显示的参数 ![这个参数](../Images/217488351a4c6dd52408388e2c0ed3fc.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T17:10:50.687

该设置通过组策略维护，参考：[指定用户登录时自动启动的程序](http://technet.microsoft.com/en-us/library/cc770821.aspx)。组策略设置最终由注册表设置处理。[Windows 和 Windows Server](http://www.microsoft.com/en-us/download/details.aspx?id=25250)的组策略设置参考可能会帮助您找到要更改的注册表设置，但我没有运气在那里找到它。您会注意到很多设置都是 HKCU，这意味着它们只能在用户登录时进行设置。这可能会给您带来问题。该页面，[Windows 程序自动启动位置](http://www.bleepingcomputer.com/tutorials/windows-program-automatic-startup-locations/)，是注册表中所有可以设置程序启动的位置的一个很好的参考。

我个人建议使用[schtasks](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/schtasks.mspx?mfr=true)来代替。这是一个在 cmd 或 PowerShell 中创建的示例：

```
schtasks -create -tn "Run command prompt" -tr "C:\WINDOWS\system32\cmd.exe" -sc ONLOGON 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T15:54:08.730

花了很长时间，但最终得到了答案，诀窍是使用[IADsTSUserEx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa380823%28v=vs.85%29.aspx)。我也尝试使用 ADSI，但只能设置登录脚本以登录本地。[见其他帖子](https://stackoverflow.com/questions/12108898/add-logon-program-for-tsclients-in-environment-tab-user-adsi-in-powershell)。这是 Elijiah 如何通过注册表设置本地用户的环境变量的代码加

```
# adds user
$objComputer = [ADSI]"WinNT://127.0.0.1"
$objUser = $objComputer.Create('user', $username)
$objUser.SetPassword($password)
$objUser.PSBase.InvokeSet('Description', "user " + $userName)
$objUser.PSBase.InvokeSet('userflags', 512)
$objUser.SetInfo();
# set password not to expire
wmic USERACCOUNT WHERE "Name = '$username'" SET Passwordexpires=FALSE
#set logoff script
$ou = [adsi]"WinNT://127.0.0.1"
$user = $ou.psbase.get_children().find("test")
$user.PSBase.InvokeSet("TerminalServicesInitialProgram", "C:\logoff.bat")
$user.setinfo()
#add to group
net localgroup $groupname $username /add
net localgroup "Remote Desktop Users" $username /add
#remote login
cmdkey /generic:TERMSRV/127.0.0.1 /user: $username /pass: $password
#add logoff script
#launch remote desktop
mstsc /v:127.0.0.1 | Out-Null
cmdkey /delete:TERMSRV/127.0.0.1
#load hive
reg load HKU\%username% "C:\Users\$username\NTUSER.dat"
#set environment valiables
Set-ItemProperty -Path HKU:\$username\Environment -Name SERVERTYPE -Type STRING -Value DIR
#Unload hive
reg unload HKU\$username 
```

# sql - 通过 ODBC 查询 USQL 的 CASE 语句

> ID：11779618
> 
> 赞同：0
> 
> 时间：2012-08-02T14:29:24.897
> 
> 标签：sql, syntax, odbc, case

我正在尝试为查询编写 CASE 语句，但似乎 USQL 实际上并没有 CASE 的语法。

只是想找出是否有人知道正确的 fn 来进行案例陈述。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:57:59.547

根据我找到的文档（[http://pz.southware.com/nlhtml/USQL_User_Guide.pdf](http://pz.southware.com/nlhtml/USQL_User_Guide.pdf)），没有引用 CASE 语句，所以你说它不支持它可能是正确的。

`isnull`如果您的 CASE 语句条件正在检查空值，则可以使用该函数。您可以通过一个或两个嵌套查询来模拟一个案例，或者可以通过将您的查询分成多个部分（每个 CASE 条件一个）然后将它们联合在一起。虽然不完全优雅......

# ios - OSX 是运行 xCodeBuild 必不可少的，还是可以在 unix/linux 机器上运行

> ID：11779626
> 
> 赞同：1
> 
> 时间：2012-08-02T14:29:50.293
> 
> 标签：ios, xcode

到目前为止，我还没有找到明确的答案，XCodeBuild 是否必须在 OS X 上运行才能构建 iOS 应用程序，还是可以在 unix/linux 上运行？

目的是让它与 Jenkins 一起设置以实现持续集成。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T15:18:47.580

在工作中，我们在 Mac 服务器上运行所有持续集成，尽管是仅使用 Linux 的办公室。Linux 上没有可用的 Xcode 工具。即便如此，对这些工具的最佳支持也只是最新版本的 Mac OS。

# java - Oracle Enterprise Manager 和智能代理

> ID：11779630
> 
> 赞同：0
> 
> 时间：2012-08-02T14:30:00.367
> 
> 标签：java, oracle, jms, weblogic

我想知道是否可以使用智能代理通过企业管理器在外部机器上启动/停止 java 程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:25:11.923

即使它可以 - 不知道 - 我不建议这样做。如果要在远程计算机上启动作业，请使用 Oracle Scheduler 执行此操作，使用 Remote Job Agent 和凭据。在 Oracle 9i Enterprise Manager 中可以做到这一点。从中学到了很多：不要使用智能代理，而是使用 Oracle 调度程序。

# flash - AS3：如何在 onComplete 函数之外访问 URLLoader 请求的输出？

> ID：11779631
> 
> 赞同：0
> 
> 时间：2012-08-02T14:30:11.897
> 
> 标签：flash, actionscript, urlloader

我正在尝试访问 onComplete 函数中的 data_file 值，但老实说，我什至不确定我是否正确调用它。

```
public function version():String{
    var string_val = "";
    var data_file = "";

    //var request:URLRequest = new URLRequest("indexdynamic.php");
    var request:URLRequest = new URLRequest("http://localhost/indexdynamic.php");
        request.method = URLRequestMethod.POST;

    var verVars:URLVariables = new URLVariables();

    request.data = verVars

    var loader:URLLoader = new URLLoader(request);
    loader.addEventListener(Event.COMPLETE, onComplete);
    loader.dataFormat = URLLoaderDataFormat.VARIABLES;
    loader.load(request);

    function onComplete(event:Event):String{
        string_val = event.target.data.Var.toString();

        if (string_val ==  "First Selection") {
            data_file = "fill_in_blanks_doi.xml";
        }else {
            data_file = "fill_in_blanks_2_doi.xml";
        }
        return data_file;
    }
    var data_file = onComplete(loader.COMPLETE);
    return data_file;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T16:53:00.813

通常事件侦听器函数返回 void。因此，您不会通过返回值从事件侦听器中获取值。

所以第一步：

删除：`var data_file = onComplete(loader.COMPLETE);` 删除：`return data_file;`//删除两行。返回一个值。更改函数头以返回 void：

```
function onComplete(event:Event):void{ 
```

现在您将保存您的“data_file”变量，而不是意外覆盖它。但是，由于这是一个异步操作，您的代码的某些部分现在正在等待调用，因为您已经设置了变量。您需要在 onComplete() 中再添加一行以继续在您的应用程序中执行代码。它可能是这样的：

```
processXML(data_file); 
```

或者

```
trace("Data File:", data_file); 
```

希望能为您解决问题。

=== 编辑 ===

我回去再次阅读你的代码，我注意到了别的东西。您正在函数中声明一个函数。这通常不是一个好主意。我建议将你的 onComplete() 函数移到 getVersion() 函数之外。

其次 - 您的 getVersion() 函数返回一个字符串，这意味着它是一个同步函数 - 意味着调用代码期望立即得到答复。这行不通。URLLoader 是异步的——你调用它，它会在未来某个不确定的时间点做出响应。因此，您的代码可以自由地做其他事情——比如显示加载器栏——同时它从服务器获得响应并传输数据。完成后，laoder 将调用其侦听器。只有在这一点上，您描述版本的最初目标才有可能。

所以 - 您将需要更改代码以暂停其执行，直到加载完成，然后让 onComplete 侦听器在信息加载并准备好使用后再次开始滚动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T15:05:44.163

您必须通过将数据写入在方法之外声明的变量来提供对数据的访问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-24T16:24:24.943

您始终可以将输出存储到一个全局数组中，该数组可以从应用程序的任何位置访问。

```
var myArray:Array = new Array();

function onComplete(e:Event):void {
   myArray.push(e.target.data);
} 
```

# python - 用于广义特征值的 Python eig 不返回正确的特征向量

> ID：11779633
> 
> 赞同：4
> 
> 时间：2012-08-02T14:30:14.900
> 
> 标签：python, numpy, scipy, eigenvector

尝试使用 scipy 的 linalg.eig 来解决广义特征值问题。然后我检查我得到的解决方案，它似乎没有返回正确的特征向量。此外，文档表明返回的向量是标准化的，但事实并非如此（尽管这并没有让我很困扰）。

以下是样本矩阵：

```
>>> a
array([[  2.05630374e-01,   8.89584493e-10,  -1.46171715e-06],
       [  8.89584493e-10,   2.38374743e-02,   9.43440334e-06],
       [ -1.46171715e-06,   9.43440334e-06,   1.39685787e-02]])
>>> b
array([[ 0.22501692, -0.07509864, -0.05774453],
       [-0.07509864,  0.02569336,  0.01976284],
       [-0.05774453,  0.01976284,  0.01524993]]) 
```

运行 eig 我得到：

```
>>> w,v = linalg.eig(a,b)
>>> w
array([  3.08431414e-01+0.j,   5.31170281e+01+0.j,   6.06298605e+02+0.j])
>>> v
array([[-0.26014092, -0.46277857, -0.0224057 ],
       [ 0.76112351, -0.59384527, -0.83594841],
       [ 1\.        , -1\.        ,  1\.        ]]) 
```

然后测试结果：

```
>>> a*v[:,0]
array([[ -5.34928750e-02,   6.77083674e-10,  -1.46171715e-06],
       [ -2.31417329e-10,   1.81432622e-02,   9.43440334e-06],
       [  3.80252446e-07,   7.18074620e-06,   1.39685787e-02]])
>>> w[0]*b*v[:,0]
array([[-0.01805437+0.j, -0.01762974+0.j, -0.01781023+0.j],
       [ 0.00602559-0.j,  0.00603163+0.j,  0.00609548+0.j],
       [ 0.00463317-0.j,  0.00463941+0.j,  0.00470356+0.j]]) 
```

我认为这两个将是平等的，但他们不是......我也尝试使用 eigh 代替但没有成功。将不胜感激任何帮助，我显然错过了一些东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T14:57:42.583

您可以通过查看输出的形状来了解发生了什么。你`a*v[:,0]`应该给出一个向量，那你为什么要得到一个 3x3 数组呢？答案：因为你不是在做矩阵乘法，你是在做分量数组乘法。

IOW，你做到了

```
>>> a * v[:,0]
array([[ -5.34928759e-02,   6.77083679e-10,  -1.46171715e-06],
       [ -2.31417334e-10,   1.81432623e-02,   9.43440334e-06],
       [  3.80252453e-07,   7.18074626e-06,   1.39685787e-02]])
>>> w[0] * b * v[:,0]
array([[-0.01805437+0.j, -0.01762974+0.j, -0.01781023+0.j],
       [ 0.00602559-0.j,  0.00603163+0.j,  0.00609548+0.j],
       [ 0.00463317-0.j,  0.00463941+0.j,  0.00470356+0.j]]) 
```

当你真的想要

```
>>> a.dot(v[:,0])
array([-0.05349434,  0.0181527 ,  0.01397614])
>>> w[0] * b.dot(v[:,0])
array([-0.05349434+0.j,  0.01815270+0.j,  0.01397614+0.j]) 
```

或者

```
>>> matrix(a)*matrix(v[:,0]).T
matrix([[-0.05349434],
        [ 0.0181527 ],
        [ 0.01397614]])
>>> w[0]*matrix(b)*matrix(v[:,0]).T
matrix([[-0.05349434+0.j],
        [ 0.01815270+0.j],
        [ 0.01397614+0.j]]) 
```

# php - PHP - 运行 If 语句，如果没有一个为真，则回显一个随机变量

> ID：11779634
> 
> 赞同：-1
> 
> 时间：2012-08-02T14:30:19.147
> 
> 标签：php, variables, random, echo

好的，我想做的有点独特，我在网上找不到任何可以指导我的东西，所以希望我能很好地解释它。

**问题：**

我在 PHP 中有一系列`if`语句。为简化起见，每个`if`语句如下所示：

```
if($product_name == 'shoe') {
     $shoe_description = '<p>Shoe description</p>';
     echo $shoe_description;
}
else if($product_name == 'car') {
     $car_description = '<p>Car description</p>';
     echo $car_description;
}
else if($product_name == 'bottle') {
     $bottle_description = '<p>Bottle description</p>';
     echo $bottle_description;
} 
```

只要将`$product_name`其定义为我的变量之一，它就可以正常工作。我想做的是，作为最后一条语句，说“**如果`product_name`不匹配我的任何变量，则显示上面的随机描述**”；所以我将`else`在上述代码的末尾添加一个最终语句（示例 - 不工作的代码）：

```
else {
     // Show one of the echo strings from above (i.e. $car_description)
     //but pick randomly
} 
```

**问题：**

我需要编辑/添加什么代码，以便最后的 else 语句选择 3 个`description`变量之一，以便我可以`echo`在页面上使用它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-02T14:36:20.390

这是对您给出的逻辑的非常基本的重写。您通常可以将一系列 if 语句改写为更简单的逻辑，或改写为 switch 语句——这取决于您要完成的工作。在这种情况下，我会检查是否`$product_name`有描述，否则只需选择一个随机键。

```
$product_name = $_SESSION['product_name'];

$descriptions = array(
    'shoe' => '<p>Shoe description</p>',
    'car' => '<p>Car description</p>',
    'bottle' => '<p>Bottle description</p>',
);

if(isset($product_name) && isset($descriptions[$product_name])) {
    echo $descriptions[$product_name];
} else {
    echo $descriptions[array_rand($descriptions)];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T14:35:25.167

```
$descriptions = array(
    'shoe' => '<p>Shoe description</p>',
    'car' => '<p>Car description</p>',
    'bottle' => '<p>Bottle description</p>'
);

if(isset($product_name) && isset($descriptions[$product_name])){
    echo $descriptions[$product_name];
} else {
    echo $descriptions[array_rand($descriptions)];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T14:36:56.550

我认为最简单的方法是将您的产品和描述放在键/值对数组中。

这样，您可以缩短 if 语句，并在案例中随机选择一个（通过生成随机索引），`else`而无需两次定义您的描述。

- 编辑 -

Robert K/Alexander Larikov 打败了我 :) 查看他们的示例代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T14:34:36.343

我会这样做

```
if(!$product_name){
      $options = array('shoe','car','bottle');
      $product_name = array_rand($options);
}
//your code here. 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T14:38:56.540

试试这个：

```
<?php
//$product_name = ...
$list = array('shoe' => 'Shoe description', 'car' => 'Car description', 'bottle' => 'Bottle description');
echo '<p>';
if (isset($list[$product_name])) {
   echo $list[$product_name];
} else {
   echo $list[array_rand($list)];
}
echo '</p>';
?> 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-02T14:35:33.117

您可以将所有瓶子描述放入一个数组中，如果您点击最后一个，`else`只需从数组中提取一个随机值

```
$descriptions   = array(
    'shoe'      => 'Shoe description',
    'car'       => 'Car description',
    'bottle'    => 'Bottle description'
);

if($product_name = 'shoe') {
     $shoe_description = '<p>'.$descriptions[$product_name].'</p>';
     echo $shoe_description;
}
else if($product_name = 'car') {
     $car_description = '<p>'.$descriptions[$product_name].'</p>';
     echo $car_description;
}
else if($product_name = 'bottle') {
     $bottle_description = '<p>'.$descriptions[$product_name].'</p>';
     echo $bottle_description;
}
else {
    echo '<p>'.$descriptions[array_rand($descriptions)].'</p>';
} 
```

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2012-08-02T14:34:00.650

我认为您可以执行以下操作：

```
$product_names = array('shoe', 'car', 'bottle');
if (!in_array($product_name, $product_names))
    $product_name = $product_names[rand(0,2)]; 
```

然后添加您的代码。

* * *

## 回答 #8

> 赞同：-4
> 
> 时间：2012-08-02T14:34:43.153

我会为此使用 switch 语句。

```
$strings = array('<p>Shoe description</p>', '<p>Car description</p>', '<p>Bottle description</p>');

switch($product_name)
{
case "shoe":
echo $strings[0];
break;

case "car":
echo $strings[1];
break;

case "bottle":
echo $strings[2];
break;

default:
echo $strings[rand(0,2)];
break;
} 
```

# asp.net - asp.net 3.5 ajax 托管

> ID：11779635
> 
> 赞同：0
> 
> 时间：2012-08-02T14:30:20.773
> 
> 标签：asp.net, ajax

我已经开发并上传了一个网站，它是 asp.net 3.5，我在其中使用了 ajax 选项卡控件，我想知道 asp.net 3.5 主机是否与 asp.net 3.5 ajax 主机不同？如果这两个不同，我是否需要在 asp.net 3.5 ajax 主机上上传该站点？请帮忙 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:32:59.233

它们是相同的，如果您使用 ajax，则 asp.net 3.5 不需要任何区别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T14:37:17.917

有时，宿主面板让您可以选择在可用的 ASP.NET 框架之间切换，请确保您已在其 ASP.NET 设置中选择了 2.0 框架，因为 Ajax 3.5 作为它的扩展工作。这就是你必须关心的。

# android - 如何在 AndEngine 中使用 webview 或打开 URL - Android

> ID：11779636
> 
> 赞同：2
> 
> 时间：2012-08-02T14:30:20.223
> 
> 标签：android, android-webview, andengine, httpconnection

我在我的 Android 应用程序中使用了一个名为 AndEngine 的游戏引擎（我对它完全陌生）。我需要根据屏幕操纵杆的位置（上传到 .cgi 服务器）从应用程序加载不同的 URL。困境是我无法打开 URL 连接！这可能看起来很简单，但我到处寻找，尝试了多种解决方案，但没有任何效果。在基本的 Android 中，我一直使用 WebView（loadUrl() 方法），并且效果很好。但是，我不知道如何在使用 AndEngine 的同时创建 webview。我的偏好是没有显示连接（在 AndEngine 场景下加载？），因为我需要屏幕来处理其他事情。我也尝试过其他解决方案。我刚刚尝试了这段代码，但是当我检查服务器时，什么都没有打开：

```
 @Override
public void onLoadResources() {

    //methods n/a to this question

    try {
        URL url = new URL(setUrl);
        HttpURLConnection con = (HttpURLConnection) url.openConnection();
        readStream(con.getInputStream());
    } catch (Exception e) {
        e.printStackTrace();
    }

    return scene; // AndEngine return statement
}

private void readStream(InputStream in) {
    BufferedReader reader = null;
    try {
        reader = new BufferedReader(new InputStreamReader(in));
        String line = "";
        while ((line = reader.readLine()) != null) {
            System.out.println(line);
        }
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        if (reader != null) {
            try {
                reader.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }
} 
```

**我之前尝试过使用 HTTPConnection 类（没有 AndEngine）打开一个 URL，但无济于事。所以可能是我在这里做错了什么。使用 AndEngine GLES2。如果需要更多信息，请告诉我（这是我关于 SO 的第一个问题）。

还尝试使用在 AndEngine 上设置我的 .xml 布局

```
@Override
protected int getLayoutID() {
return R.layout.main;
} 
```

但它说：“Control 类型的方法 getLayoutID() 必须覆盖或实现超类型方法”

***编辑***以回应 Nicolas Gramlich： Internet 权限已设置，编译器最初为 1.6。还是不知道是什么问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T18:29:51.930

1.  `xml <manifest xlmns:android...> ... <uses-permission android:name="android.permission.INTERNET"/> </manifest>`

2.  将 java 编译器合规性设置为 1.6

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T18:23:17.067

我解决了我的问题。我必须在与主线程分开的线程上运行所有网络操作（否则它将引发 NetworkOnMainThread 异常）。我不知道为什么没有其他工作，但这成功了！在这里，我使用我想要执行的操作创建一个新线程，然后在处理完异常后启动它。我在[这里找到了答案](http://android-developers.blogspot.com/2009/05/painless-threading.html)

```
new Thread(new Runnable() {
public void run() {
HttpClient httpClient = new DefaultHttpClient();
HttpContext localContext = new BasicHttpContext();
HttpGet httpGet = new HttpGet("your_url");
try {
HttpResponse response = httpClient.execute(httpGet, localContext);
} catch (ClientProtocolException e) {
e.printStackTrace();
} catch (IOException e) {
e.printStackTrace();
}
}
}).start(); 
```

# regex - 如何使用powershell替换xml中的域\用户名？

> ID：11779639
> 
> 赞同：1
> 
> 时间：2012-08-02T14:30:33.547
> 
> 标签：regex, powershell, powershell-2.0

我正在尝试替换具有域名\用户名的节点。

因为它有“\”，所以它在正则表达式匹配中失败，

> 无效的正则表达式模式：l8-dc\testuser2。在 C:\Users\testuser1.l8-dc\Desktop\RunTimeAccountChange\UserAccount-Replace.ps1:164 char:68 + $Searchstr.Node.'#text'= $($Searchstr.Node.'#text') -替换 <<<< $OldUserName,$NewUserName + CategoryInfo : InvalidOperation: (l4-dc\mesuser2:String) [], RuntimeException + FullyQualifiedErrorId : InvalidRegularExpression

以下行实际上失败了..

```
$Searchstr.Node.'#text'= $($Searchstr.Node.'#text') -replace $OldUserName,$NewUserName 
```

如何用正则表达式匹配替换？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:34:31.540

我必须看到实际的正则表达式模式才能确定，但​​我猜你需要在其中的某个地方转义一个 \ 。通过添加另一个 \ 来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T16:45:54.573

尝试这个：

```
$Searchstr.Node.'#text'= $($Searchstr.Node.'#text') -replace $($OldUserName),$($NewUserName) 
```

如果这不起作用，您可以尝试稍微更改脚本，使其看起来像这样：

```
$Domain = "MyDomain"
$OldUserName = "OldUser"
$NewUserName = "NewUesr"
$Searchstr.Node.'#text'= $($Searchstr.Node.'#text') -replace $($Domain + "\" + $OldUserName),$($Domain + "\" + $NewUserName) 
```

我在我的环境中经常做第二个，但那是因为我们有许多测试平台，它们都是不同的域，但具有相同的用户名。

# android - 插入记录时如何更新微调器中的数据库？

> ID：11779642
> 
> 赞同：0
> 
> 时间：2012-08-02T14:30:37.967
> 
> 标签：android, database, sqlite, android-spinner

这是我用来在**.MainActivity.java中加载微调器的代码**

```
 public void spin() {
    {  
        try{  
            SQL db = new SQL(getBaseContext());  
            db.open();  
            List<String> cursor = db.selectAll();
                ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,  
                android.R.layout.simple_spinner_item, cursor);
                s.setAdapter(adapter);  
        }  
        catch(Exception e)  
        {  
        Log.v("Error","e.tostring()");  
        }
    } 
```

这是**SQL.java**中用于从数据库中获取项目的代码。

```
 public List<String> selectAll() {
    List<String> list = new ArrayList<String>();
    Cursor cursor = this.mydb.query(DATABASE_TABLE, new String[] {KEY_NAME
    }, null, null, null, null, null);
    if (cursor.moveToFirst()) {
        do {
            list.add(cursor.getString(0));
        } while (cursor.moveToNext());
    }
    if (cursor !=null && !cursor.isClosed()) {
        cursor.close();
    }
    return list;
} 
```

这就是我从另一个活动添加记录的**方式 .Addnew.java**

```
case R.id.bsave:
            boolean work=true;
            try{
            String rno1 = rno.getText().toString();
            String name1 = name.getText().toString();
            String reg1 = reg.getText().toString();
            String mob1 = mob.getText().toString();

            SQL entry = new SQL(Addnew.this);
            entry.open();
            entry.createEntry(rno1,name1,reg1,mob1);
            entry.close();
            }
            catch(Exception e){
                work=false;
                String error = e.toString();
                Dialog d = new Dialog(this);
                d.setTitle("Naah");
                TextView tv = new TextView(this);
                tv.setText(error);
                d.setContentView(tv);
                d.show();
            }finally{
                if(work){
                    Dialog d = new Dialog(this);
                    d.setTitle("Yeah");
                    TextView tv = new TextView(this);
                    tv.setText("Success");
                    d.setContentView(tv);
                    d.show();
                }
            }
            break; 
```

问题是当我在数据库中插入一条新记录时，它不会立即显示在微调器中，而是仅在重新启动应用程序后才显示。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T14:49:12.110

将数据添加到列表后，请设置 adapter.notifyDataSetChanged() 以更新您的微调器内容。

它将解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T14:52:06.460

尝试通过任何一种方法刷新您的活动

```
startActivity(getIntent); 
```

或者

```
Intent addservice1 = new Intent(YourActivity.this,YourActivity.class);
                startActivity(addservice1); 
```

它将解决您的问题。

希望能帮助到你

# json - 为 JSON 添加“文件结尾”？

> ID：11779646
> 
> 赞同：0
> 
> 时间：2012-08-02T14:30:59.690
> 
> 标签：json, exchange-server

我正在使用 Knockout 构建一个应用程序。最终结果是我想要回传到服务器的 JSON。但是，数据非常复杂，因此可以增长到几mb。

我认为引入“文件结束”标记可能是明智的，这样如果有人关闭浏览器窗口或上传被中断，我可以相应地处理这种情况。

这对于 SO 来说似乎太笼统了，但是正确的方法是什么？只是将一个字符串附加到我要查找的 JSON 的末尾，服务器端？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T14:33:42.060

JSON 要么是可解析的，要么不是。如果上传被截断/切断，无论如何你最终都会得到一个无效的数据结构，所以 EOF 标记没有意义。

例如

```
{'this':{'is':{'a':{'complex':'structure'}
                                          ^---upload terminates here. 
```

最后缺少`}}}`了，所以它是无效的 json，解析器会在它上面出错。如果解析器出错，您就知道有些事情没有解决。

# sql - 表的索引搞砸了，导致查询需要很长时间才能获取行

> ID：11779649
> 
> 赞同：0
> 
> 时间：2012-08-02T14:31:11.070
> 
> 标签：sql, database, indexing, schema

我有一个表 A `[Schema: key_id, x,y,z,...]`，它的键 id 列是唯一的，并且增量播种为 1。现在我有一个表 B `[schema: key_id, key_idOfA, x,y,z,....]`，它是具有类似模式的 A 的备份（只有差异表 B 有它自己的`key_id`，它也保持原始`key_id`表 A)。

我有一项服务，它根据 where 子句将一些行从 A 传输到 B。我尝试了一次这项服务，通过将行从 A 传输到 B，它运行良好。现在要再次检查此服务，我必须将行 (key_idOfA, x, y,z,...) 从 B 传输回 A。

为了避免丢失表 A 的原始 key_id，我首先使用了

```
SET IDENTITY_INSERT A ON 
```

并转移了工作正常的行。转移后我使用

```
SET IDENTITY_INSERT A OFF 
```

现在，当我再次运行该服务时，需要很长时间才能从表 A 中获取几行，这会导致超时。准确地说，在 SQL Server Management Studio 上获取 30,000 行需要 5 分钟。从服务中，查询由于 3 分钟超时而超时。

我知道打开和关闭表的身份插入是一种不好的做法，但这是一个测试床数据库，我永远不会在生产数据库上这样做。

我的问题：

1.  由于查询花费了这么多时间，索引是否混乱？还是有其他问题？

2.  我可以采取不同的方法将行传回而不弄乱索引吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T09:32:11.333

好吧，您可以做些什么来了解为什么它很慢，请查看实际查询计划。在 SSMS 中，这是通过顶部的查询菜单完成的，选择实际查询计划（或 CTRL-M） 之后运行查询时，您会在结果和消息选项卡旁边获得一个额外的选项卡。它被称为执行计划。当你研究它时，你必须从最右边开始。这就是查询开始的地方。寻找高百分比。如果您看到索引扫描或表扫描，它们比索引查找更糟糕，这是一种更快的方法。

如果您发现表/索引扫描的百分比很高，请尝试对索引进行碎片整理。

你可能想看看我写的碎片整理索引的脚本：[www.plixa.nl/fragment-an-index](http://www.plixa.nl/fragment-an-index/)

希望它有帮助，如果没有，请告诉我们:)

# javascript - 我的代码给了我一条错误消息：GetElementById() is null or not an object

> ID：11779652
> 
> 赞同：0
> 
> 时间：2012-08-02T14:31:20.950
> 
> 标签：javascript

我有这个js代码：

```
var id = document.getElementById("myDiv").getAttribute("data-id");  

et="Your Message Here";
el="http://x2.xclicks.net/sc/out.php?s="+id+""
sl=new Array(); 
sn=new Array();
a="</a>"; af="<a target='_blank'";

function dw(n) {document.write(n,"\n");}
function showLink(n,s,b){
    if(!s) {s='anc'} 
    if(!b) {b=''} 
    else   {b="&b="+b}
    ast = af+" class='"+s+"' href='"+el; 
    n   = n-1; 
    if(sl[n]&&sl[n]!="") {
        dw(ast+"&o="+sl[n]+b+"'>"+sn[n]+a)
    } else {
        dw(ast+b+"'>"+et+a)
    }
} 
```

我像这样在 header.php 中加载：

```
<script type="text/javascript" src="<? bloginfo('template_url'); ?>/js/trf.js"></script> 
```

问题是，虽然这是正确的：

```
var id = document.getElementById("myDiv").getAttribute("data-id"); 
```

我收到此错误：

**getElementById() 为 null 或不是对象**

Ady Ideas 为什么？

我需要申报准备好文件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T14:36:49.003

> 我需要申报准备好文件吗？

对，就是这样。在文档准备好之前（即所有标签都被解析为 DOM 元素），您将无法通过 id 获取元素。这仅适用于您的脚本标签上方的元素，这些元素已经被解析。将脚本包含从`<head>`结束之前移动`</body>`会有所帮助。或者，您需要使用各种`DOMContentLoaded`或`onload`事件之一，遗憾的是不支持跨浏览器。我建议搜索一个好的片段或使用一个库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T14:36:33.213

假设您在`<head>`文档中加载该脚本，则当该元素尚未加载到 DOM 中时，您正试图通过 ID 获取元素。

您需要等待文档准备好（通过`onDOMContentLoaded`、`window.onload`或任何其他延迟渲染完成的方式）才能通过 ID 访问该元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T14:39:43.613

我会尝试将其包装在`$(document).ready`. 您很可能只是在 DOM 准备好之前尝试访问它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T14:37:51.930

您在标题中加载脚本，这意味着脚本在文档的其余部分之前加载。在脚本中，您会立即调用 document.getElementById，并且由于文档的其余部分尚未完成加载，因此您所追求的元素尚不存在的可能性非常高。

您需要延迟运行该部分脚本，直到文档完全加载。将该部分脚本包装在一个函数中，并在 body.onload 事件期间调用它。

举个例子（还有其他方法可以达到相同的结果）：

```
window.document.onload = function(e){ 
    var id = document.getElementById("myDiv").getAttribute("data-id");  

    // Now you have the id and can do whatever you want with it.
} 
```

# html - 伪类不起作用

> ID：11779656
> 
> 赞同：2
> 
> 时间：2012-08-02T14:31:35.690
> 
> 标签：html, css

我想在活动时更改链接颜色。所以我使用 :active CSS 方法，但它在 ie8 和 ie9 中不能正常工作。在浏览器的其余部分工作正常。

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<style>
a { display:inline-block; font-size:14px; color:#FFFFFF; border-radius:10px; background:#F00}

a span { display:block; padding:15px;}

a:active { background:#00F}

</style>

</head>

<body>
<a href="#"><span>mylink</span></a>

</body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T14:35:07.187

改成...

```
a:active, a:focus { background:#00F} 
```

* * *

[http://jsfiddle.net/dRE7c/1/](http://jsfiddle.net/dRE7c/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T14:44:21.250

IE 8/9`:active`和 IE 8/9`:active`以及`display:block`. 看看这些：

*   [:active css 选择器不适用于 IE8 和 IE9](https://stackoverflow.com/questions/5594102/active-css-selector-not-working-for-ie8-and-ie9)

*   [IE 7/8：块元素上的活动伪](https://stackoverflow.com/questions/5390712/ie-7-8-active-pseudo-on-block-elements)

# spring-webflow - Spring webflow - 无法定义全局转换

> ID：11779658
> 
> 赞同：0
> 
> 时间：2012-08-02T14:31:35.927
> 
> 标签：spring-webflow

我似乎无法在流定义文件中定义任何全局转换。一旦我定义了全局转换，我就会遇到异常。

这是流定义

我的流.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
 <flow xmlns="http://www.springframework.org/schema/webflow" 
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
       xsi:schemaLocation="
              http://www.springframework.org/schema/webflow
              http://www.springframework.org/schema/webflow/spring-webflow-2.0.xsd">

<!-- set up appData initial values -->
     <on-start>
         <evaluate expression="SupportUtil.setUpInitialAppData(flowRequestContext)" result="flowScope.appData"/>    
     </on-start>

     <global-transitions>
        <transition on="login" to="login" />
        <transition on="logout" to="logout" />
      </global-transitions>

      <view-state id="searchHome" view="searchHome" model="searchModel">
            <transition on="grpSearch" to="performGrpSearch"/>
             <transition on="indSearch" to="performIndSearch"/>
       </view-state> 
  </flow> 
```

启动应用程序后，出现以下错误，

> org.springframework.webflow.engine.builder.FlowBuilderException：无法在 org.springframework.webflow.engine.builder.model.FlowModelFlowBuilder.doInit(FlowModelFlowBuilder.java:149) 的 org.springframework.webflow 获取此流的模型。 engine.builder.support.AbstractFlowBuilder.init(AbstractFlowBuilder.java:46) 在 org.springframework.webflow.engine.builder.FlowAssembler.assembleFlow(FlowAssembler.java:90) 在 org.springframework.webflow.engine.builder.DefaultFlowHolder。 assembleFlow(DefaultFlowHolder.java:109) ... 37 更多原因：org.springframework.webflow.engine.model.builder.FlowModelBuilderException：无法在 ServletContext 资源 [/WEB-INF/flows/tempId 解析 XML 流定义文档-flow.xml] 在 org.springframework.webflow.engine.model.builder.xml.XmlFlowModelBuilder。init(XmlFlowModelBuilder.java:121) 在 org.springframework.webflow.engine.model.builder.DefaultFlowModelHolder.assembleFlowModel(DefaultFlowModelHolder.java:87) 在 org.springframework.webflow.engine.model.builder.DefaultFlowModelHolder.getFlowModel(DefaultFlowModelHolder. java:61) at org.springframework.webflow.engine.builder.model.FlowModelFlowBuilder.doInit(FlowModelFlowBuilder.java:146) ... 40 更多原因：org.xml.sax.SAXParseException: cvc-complex-type.2.4 。一个：doInit(FlowModelFlowBuilder.java:146) ... 40 更多原因：org.xml.sax.SAXParseException: cvc-complex-type.2.4.a:doInit(FlowModelFlowBuilder.java:146) ... 40 更多原因：org.xml.sax.SAXParseException: cvc-complex-type.2.4.a:**发现以元素“视图状态”开头的无效内容。'{"http://www.springframework.org/schema/webflow":on-end, "http://www.springframework.org/schema/webflow":output, "http://www.springframework" 之一.org/schema/webflow":exception-handler, "http://www.springframework.org/schema/webflow":bean-import}' 是预期的。在** org.apache.xerces.util.ErrorHandlerWrapper.createSAXParseException(Unknown Source) at org.apache.xerces.impl.XMLErrorReporter.reportError(Unknown Source) at org.apache.xerces.util.ErrorHandlerWrapper.error(Unknown Source) at org. org.apache.xerces.impl.xs.XMLSchemaValidator$XSIErrorReporter.reportError(Unknown Source) at org.apache.xerces.impl.xs.XMLSchemaValidator.reportSchemaError(Unknown Source) 的 apache.xerces.impl.XMLErrorReporter.reportError(Unknown Source) ) 在 org.apache.xerces.impl.xs.XMLSchemaValidator.startElement(Unknown Source) 在 org.apache.xerces.impl.XMLNSDocumentScannerImpl.scanStartElement(未知来源）在 org.apache.xerces.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher。dispatch(Unknown Source) at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source) at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source) at org.apache.xerces.parsers.XML11Configuration.parse( Unknown Source) at org.apache.xerces.parsers.XMLParser.parse(Unknown Source) at org.apache.xerces.parsers.DOMParser.parse(Unknown Source) at org.apache.xerces.jaxp.DocumentBuilderImpl.parse(Unknown Source ) 在 javax.xml.parsers.DocumentBuilder.parse(Unknown Source) 在 org.springframework.webflow.engine.model.builder.xml.DefaultDocumentLoader.loadDocument(DefaultDocumentLoader.java:113) 在 org.springframework.webflow.engine.model .builder.xml.XmlFlowModelBuilder.init(XmlFlowModelBuilder.java:113) ... 43 更多XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source) at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source) at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source) at org.apache.xerces.parsers.XMLParser。 org.apache.xerces.parsers.DOMParser.parse(Unknown Source) at org.apache.xerces.jaxp.DocumentBuilderImpl.parse(Unknown Source) at javax.xml.parsers.DocumentBuilder.parse(Unknown Source) 解析(Unknown Source) ) 在 org.springframework.webflow.engine.model.builder.xml.XmlFlowModelBuilder.init(XmlFlowModelBuilder.java:113) 的 org.springframework.webflow.engine.model.builder.xml.DefaultDocumentLoader.loadDocument(DefaultDocumentLoader.java:113) ) ... 43 更多XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source) at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source) at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source) at org.apache.xerces.parsers.XMLParser。 org.apache.xerces.parsers.DOMParser.parse(Unknown Source) at org.apache.xerces.jaxp.DocumentBuilderImpl.parse(Unknown Source) at javax.xml.parsers.DocumentBuilder.parse(Unknown Source) 解析(Unknown Source) ) 在 org.springframework.webflow.engine.model.builder.xml.XmlFlowModelBuilder.init(XmlFlowModelBuilder.java:113) 的 org.springframework.webflow.engine.model.builder.xml.DefaultDocumentLoader.loadDocument(DefaultDocumentLoader.java:113) ) ... 43 更多xerces.parsers.XML11Configuration.parse(Unknown Source) at org.apache.xerces.parsers.XMLParser.parse(Unknown Source) at org.apache.xerces.parsers.DOMParser.parse(Unknown Source) at org.apache.xerces。 jaxp.DocumentBuilderImpl.parse(Unknown Source) at javax.xml.parsers.DocumentBuilder.parse(Unknown Source) at org.springframework.webflow.engine.model.builder.xml.DefaultDocumentLoader.loadDocument(DefaultDocumentLoader.java:113) at org .springframework.webflow.engine.model.builder.xml.XmlFlowModelBuilder.init(XmlFlowModelBuilder.java:113) ... 43 更多xerces.parsers.XML11Configuration.parse(Unknown Source) at org.apache.xerces.parsers.XMLParser.parse(Unknown Source) at org.apache.xerces.parsers.DOMParser.parse(Unknown Source) at org.apache.xerces。 jaxp.DocumentBuilderImpl.parse(Unknown Source) at javax.xml.parsers.DocumentBuilder.parse(Unknown Source) at org.springframework.webflow.engine.model.builder.xml.DefaultDocumentLoader.loadDocument(DefaultDocumentLoader.java:113) at org .springframework.webflow.engine.model.builder.xml.XmlFlowModelBuilder.init(XmlFlowModelBuilder.java:113) ... 43 更多org.springframework.webflow.engine.model.builder.xml.DefaultDocumentLoader.loadDocument(DefaultDocumentLoader.java:113) 的 parser.DocumentBuilder.parse(Unknown Source) org.springframework.webflow.engine.model.builder.xml.XmlFlowModelBuilder .init(XmlFlowModelBuilder.java:113) ... 43 更多org.springframework.webflow.engine.model.builder.xml.DefaultDocumentLoader.loadDocument(DefaultDocumentLoader.java:113) 的 parser.DocumentBuilder.parse(Unknown Source) org.springframework.webflow.engine.model.builder.xml.XmlFlowModelBuilder .init(XmlFlowModelBuilder.java:113) ... 43 更多

粗体字中的部分异常让我很困惑。为什么只有这些元素是预期的。我使用了参考教程中的最新流定义模式

[http://static.springsource.org/spring-webflow/docs/2.3.x/reference/html/ch03s05.html](http://static.springsource.org/spring-webflow/docs/2.3.x/reference/html/ch03s05.html) 和[http://static.springsource.org/spring-webflow/docs/2.3.x/reference/ html/ch10s02.html](http://static.springsource.org/spring-webflow/docs/2.3.x/reference/html/ch10s02.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:57:10.007

没关系。我弄错了元素顺序。毕竟应该是定义。

# sql - SQL 中的复杂查找和替换

> ID：11779660
> 
> 赞同：0
> 
> 时间：2012-08-02T14:31:39.063
> 
> 标签：sql, sql-server, replace

我有一个 ProductName 键/值对列表，如下所示：

```
CREATE TABLE [dbo].[ProductNames]
(
    [Key] [nvarchar](100) NULL,
    [Value] [nvarchar](100) NULL
) 
```

包含这样的值：

```
'Pepsi', 'Pepsi®'
'Coke', 'Coke®' 
```

我需要在尚未包含产品注册商标的文本字段中查找和替换值......并将其替换为完整的商标字符串。

例如：

```
 1\. if 'Pepsi' is alone....it becomes 'Pepsi®'
 2\. if 'Pepsi®' already exists...do nothing 
```

**更新：** 注册商标只是要替换的东西的一个例子。也可能有其他多字符替换。因此，可能需要更复杂的东西。例如，我可能会检测到“Pepsi”，然后从键/值行的 VALUE 部分截断“Pepsi”……然后……尝试检测字符串中是否已经存在截断的值。如果没有，那么继续并替换值（类似的东西）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T14:35:39.467

也许这个解决方案会帮助你。它将更新`value`不以 结尾的记录，`®`并将其附加在末尾。

```
update ProductNames
set Value = Value + '®'
where Value not like '%®' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T06:46:42.890

我想不出一个简单的方法来解决这个问题。遍历每个特殊关键字并检查这些单词的开头、中间和结尾，假设您需要空格来分隔每个关键字。根据业务逻辑的要求，将操作分解为几个步骤。很贵，是的，但我想这是一次性的。更好的是，在添加/修改行时运行一次此例程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T15:08:04.967

```
update ProductNames set 
   Value = CASE WHEN CHARINDEX('®',value,1) = 0 then value+'®' else value end 
```

# google-maps - 谷歌地理编码器 API 返回的邻域类型是什么

> ID：11779661
> 
> 赞同：3
> 
> 时间：2012-08-02T14:31:41.870
> 
> 标签：google-maps, google-geocoding-api

当我的网站的用户输入一个地址时，他经常这样做：

```
street_number street what_he_thinks_is_the_locality 
```

当我存储或显示它时，我需要像这样更好地显示它：

```
street_number street, true_locality 
```

我使用地理编码器服务来提取地址组件，以便我可以正确格式化它。我依靠组件的类型来查找位置，我期望“位置”、“子位置”或“管理区域”级别_3。但是今天我看到一个用户输入了一个地址，并且返回的位置是 {"neighborhood", "political"} 类型。

邻里究竟是什么？什么时候归还？是否因为 google API 从结果中检测到用户位于某个“附近位置”而返回？当返回此类型时，我是否应该包含下一个地址组件以消除所有歧义？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-18T17:17:34.557

“社区”通常是城市内的一个小社区（通常是住房开发）。它与“次地区”的不同之处在于它通常不是行政边界。

*   示例 1：SoHo（社区）、曼哈顿（次地区/自治市镇）、纽约（地区/城市）、纽约州（administrative_area_level_1/state）
*   示例 2：Cap-Saint-Jacques（社区）、Pierrefonds-Roxboro（次地区/自治市镇）、蒙特利尔（地区/城市）、QC（行政区域/级别_1/省）

Google 的地理编码器并不完美。它可能包含错误，例如纽约市布鲁克林区的 Bay Ridge，[Google 将为此返回 Manhattan 作为 sublocality](http://maps.googleapis.com/maps/api/geocode/json?address=Bay%20Ridge,%20Brooklyn,%20New%20York,%20NY&sensor=false)。同样，在上面的示例 2 中，Pierrefonds 被列为子地区，而不是 Pierrefonds-Roxboro。

地理编码器有时也不完整。邮政编码 02130 在波士顿，但[地理编码器不返回 "locality"](http://maps.googleapis.com/maps/api/geocode/json?address=02130&sensor=false)。它只返回牙买加平原附近。但是，如果您将 Jaimaica Plain 添加到邮政编码，那么它确实会返回位置（一种可能的解决方法，尽管它需要两个请求）。

您可能遇到的是后一种情况。目前尚不清楚是什么条件触发它。您需要考虑结果并不总是完整的事实。

# javascript - 在节点和浏览器中加载单个 javascript 模块

> ID：11779671
> 
> 赞同：1
> 
> 时间：2012-08-02T14:32:13.163
> 
> 标签：javascript

如何编写单个 .js 文件并从节点和浏览器调用（需要）它而不进行任何更改？

一个有用的例子是模型“类”。

如果模型有依赖项，例如 jquery，在节点和 web 上都可用怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T15:50:41.193

你可以看看[requirejs](http://requirejs.org/)，它允许在浏览器中加载异步模块，也可以在 node.js 中使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T14:34:11.650

浏览器和 Node 都可以很好地使用 JavaScript。您无需执行任何操作即可在两者中运行您的代码。

但是请注意，如果您使用仅在 Node 中可用的包或浏览器对象（例如`navigator`），那么您将遇到麻烦。您应该将代码分成可以在两种上下文中轻松加载的模块。

此外，请确保您的代码不使用较新的 JavaScript 函数，否则您将遇到与旧浏览器的兼容性问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T12:00:28.570

这是我用于模块的模块模板，可以同时使用 node 和 require.js：

[https://gist.github.com/epoberezkin/5020250](https://gist.github.com/epoberezkin/5020250)

# java - 使用 IE8 时的 GWT 问题

> ID：11779673
> 
> 赞同：0
> 
> 时间：2012-08-02T14:32:27.517
> 
> 标签：java, internet-explorer, gwt, internet-explorer-8, http-status-codes

我正在从客户端进行远程程序调用，核心逻辑包括在服务器端执行查询。这适用于除 IE8 之外的所有浏览器。我得到一个代码为 12152 的状态代码异常。当我用谷歌搜索时，我发现它可能与会话有关，但目前没有正确的答案。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T17:55:58.313

耶为晦涩的状态代码。经过一番寻找所有事情都指向

> HTTP 状态 12152 服务器因数据库或服务器维护而暂时关闭，或者出现网络错误。尝试上传时通常会出现此状态。请稍后再试。

我会尝试增加您在服务器和客户端的时间。如果这确实有效，请尝试通过不同的代理进行路由，有时这些代理可能会破坏您请求中的标头。如果通过代理或匿名网络代理运行确实有效，请安装 fiddler2 或 wireshark 并检查您的请求，主要是标头。那里可能有一些时髦的东西。您还应该尝试在服务器端进行嗅探，并查看传入请求的外观。

在您的客户端嗅探您打开的套接字，以确保您没有乱七八糟的开放端口等到服务器。IE 也可以抱怨这一点。

不幸的是，它似乎不是直接的那些错误之一。

您还可以尝试使用 requestbuilder 使用不同的类型或请求，例如使用 all get 或 post 或其他。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T16:06:58.870

非常感谢您的回复。幸运的是，我终于可以找出问题所在，甚至不必使用 Fiddler 之类的工具。

在我的例子中，对于 IE8，RPC 中的逻辑按照它必须的方式执行，但是连接没有被关闭。所以我不得不使用 RpcRequestBuilder 的一个实例和一个可以接受标头信息和超时信息的 RequestBuilder 对象。在标题中，我输入了“连接：关闭”，以确保在 RPC 完成后连接关闭。设置超时信息允许我获得一个 RequestTimeoutException 对象作为 Throwable 对象，并且基于此我可以知道 RPC 是否由于超时或其他一些错误逻辑而失败。

# azure - Azure ACS - 中继方应用程序 - ReturnURL 带参数？

> ID：11779674
> 
> 赞同：6
> 
> 时间：2012-08-02T14:32:32.050
> 
> 标签：azure, acs, accesscontrolservice

我们正在构建一个使用 ACS 的应用程序。我们的使用场景是这样的：

1.  用户通过电子邮件获得一个类似[https://our.application.com/?requestId=123456的 URL 并点击它](https://our.application.com/?requestId=123456)
2.  用户被重定向到 LiveID 登录屏幕
3.  登录后，ACS 将用户转发给我们，但转发给[https://our.application.com/](https://our.application.com/)

不幸的是，“访问控制服务门户”的“中继方”中的“返回URL”设置似乎只是一个固定的字符串。有没有办法将原始请求传播给它？如果没有，您会建议什么作为解决方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T16:27:10.117

答案实际上是肯定的，但并非没有一点工作。在第 3 步中，您的返回 URL 将被您在 ACS RP 中配置的默认 ACS 登录页面覆盖。这是默认情况下 ACS 为您托管的页面，您可以在其中选择身份提供者。（您可能不会总是在浏览器中看到它；如果您只配置了一个 IDP，它将自动重定向。）

您可以告诉 ACS 使用您自己托管的自定义登录页面，以便保存此原始 URL。您可以从 ACS 门户下载默认的 ACS 登录页面作为工作内容。

棘手的部分来自于使用不同协议的不同身份提供者使用不同的机制来保存这个原始 URL。

可以在此处找到有关此问题的一些进一步讨论和代码示例，您可能会在网络上的其他地方找到此问题的进一步解决方案：

[从 Azure ACS 下载登录页面后，如何让返回 URL 再次正常工作？](https://stackoverflow.com/questions/9927518/how-do-i-get-the-return-url-working-properly-again-after-downloading-a-login-pag/9935858#9935858)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T16:05:24.003

我相信答案是否定的，我建议使用 cookie 来存储参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-15T12:16:26.087

如果您想通过 ACS + Microsoft 帐户提供“returnUrl”，您可以通过 IdentitiyProviders.js 查询 ACS 登录页面并传递“上下文”，例如：[https ://MyACS.accesscontrol.windows.net/v2/metadata /IdentityProviders.js?protocol=wsfederation&realm=MyRealm&reply_to=&context=foooobar&request_id=&version=1.0&callback=&wfresh=0](https://MyACS.accesscontrol.windows.net/v2/metadata/IdentityProviders.js?protocol=wsfederation&realm=MyRealm&reply_to=&context=foooobar&request_id=&version=1.0&callback=&wfresh=0)

结果，您将获得带有 wctx 参数的 Microsoft 帐户的登录 URL： [https](https://login.live.com/login.srf?wa=wsignin1.0&wtrealm=...&wp=MBI_FED_SSL&wctx=cHI9d3NmZWRlcmF0aW9uJnJtPXVybiUzYW9uZW9mZml4eCUzYWRldiUzYWRlZmF1bHQmY3g9Zm9vb29iYXI1) ://login.live.com/login.srf?wa=wsignin1.0&wtrealm=...&wp=MBI_FED_SSL&wctx=cHI9d3NmZWRlcmF0aW9uJnJtPXVybiUzYW9uZW9mZml4eCUzYWRldiUzYWRlZmF1bHQiYmY1 - fooZmF1bHQiYmY3g .

在登录过程之后，使用 wctx 参数调用您配置的 returnUrl（在我的示例中，您将获得“foobar”）。

# java - 使用 DatagramPacket 发送 0x04 - 类似于十六进制 char[] 数据

> ID：11779677
> 
> 赞同：0
> 
> 时间：2012-08-02T14:32:37.223
> 
> 标签：java, android, sockets

我有一个`DatagramSocket`并想通过using发送`char[] charData = { 0xff, 0x04, 0x02, 0xfb}`数据。`DatagramSocket``DatagramPacket`

DatagramPacket`byte[]`用作数据。但我应该像`charData`变量一样发送它。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T17:50:26.170

我解决了这个案子。我只是做`"ff0402fb".getbytes`和它的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T14:38:30.477

你可以使用 ObjectOutputStream 和 ByteArrayOutputStream：

```
ByteArrayOutputStream baos = new ByteArrayOutputStream();
ObjectOutputStream oos = new ObjectOutputStream(baos);
oos.writeObject(charData);

byte[] toSend = baos.toByteArray();
oos.close();
baos.close();
int port = xxxx;
DatagramPacket p = new DatagramPacket(toSend,toSend.length,InetAddress.getByName("host"),port);
DatagramSocket s = new DatagramSocket();
s.send(p); 
```

# java - 使用 ObjectInputStream 从文件中读取许多 ArrayList 对象？

> ID：11779678
> 
> 赞同：0
> 
> 时间：2012-08-02T14:32:39.597
> 
> 标签：java, serialization, java-io

我将 ArrayLists 写入文件。我用 FileInputStream 阅读它。但总是只有“第一个”ArrayList 是通过阅读出现的。我用 readInt() / wirteInt() 和循环尝试了它，但总是抛出异常，通过调用 readInt() --> EOF 我想从这个文件中读取所有 ArrayList 到一个 ArrayList 中。我的应用程序需要持久化，所以我序列化了 ArrayLists。

写入文件：

 `````
 try {         
        FileOutputStream fos = new FileOutputStream(_cache, true);
        ObjectOutputStream os = new ObjectOutputStream(fos);
        // os.writeInt(newValueList.size()); // Save size first
        os.writeObject(newValueList); 

        os.flush();
        os.close();

    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
````  `从文件中读取：

```
 List cachedValueList = new ArrayList<String>();
    ObjectInputStream o = new ObjectInputStream(new FileInputStream("caching.io"));
  //  int count = o.readInt(); // Get the number of regions

    try {

            cachedValueList.add(o.readObject());

    } catch (EOFException e) {
        o.close();
        e.printStackTrace();
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (ClassNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:42:29.227

如果你多次写同一个列表，它只会写一次列表。之后它将使用相同的引用但内容将相同（任何对象都是如此）

如果您`reset()`在 writeObject() 之间调用，它将每次发送一个新的列表副本。``

# android - 设置 Android 主题背景颜色

> ID：11779679
> 
> 赞同：120
> 
> 时间：2012-08-02T14:32:41.883
> 
> 标签：android, android-theme

我正在尝试修改默认背景主题颜色，这应该很容易，但令人惊讶的是我无法让它工作。请注意，我希望更改适用于整个应用程序，而不仅仅是单个活动。这是我的代码：

样式.xml

```
<resources>

    <color name="white_opaque">#FFFFFFFF</color>
    <color name="pitch_black">#FF000000</color>

    <style name="AppTheme" parent="android:Theme.Light">
        <item name="android:background">@color/white_opaque</item>
        <item name="android:windowBackground">@color/white_opaque</item>
        <item name="android:colorBackground">@color/white_opaque</item>
    </style>

</resources> 
```

当然在清单中

```
<application
    .
    .
    .
    android:theme="@style/AppTheme" > 
</application> 
```

我在修改主题时咨询过的 Android 文档：http: [//developer.android.com/guide/topics/ui/themes.html](http://developer.android.com/guide/topics/ui/themes.html)

我已经尝试为所有 xml 属性在 white_opaque 和 pitch_black 之间切换，但它并没有改变任何东西。有什么建议么？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-08-02T15:36:45.303

好吧，原来我犯了一个非常愚蠢的错误。我用于测试的设备运行的是 Android 4.0.4，API 级别 15。

我正在编辑的 styles.xml 文件位于默认值文件夹中。我在 values-v14 文件夹中编辑了 styles.xml，现在一切正常。

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2017-10-07T20:10:28.710

```
<resources>

    <!-- Base application theme. -->
    <style name="AppTheme" parent="android:Theme.Holo.NoActionBar">
        <item name="android:windowBackground">@android:color/black</item>
    </style>

</resources> 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2020-01-09T00:18:11.787

打开`res -> values -> styles.xml`并`<style>`添加此行，替换为您的图像路径`<item name="android:windowBackground">@drawable/background</item>`。例子：

```
<resources>

    <!-- Base application theme. -->
    <style name="AppTheme" parent="Theme.AppCompat.Light.NoActionBar">
        <!-- Customize your theme here. -->
        <item name="colorPrimary">@color/colorPrimary</item>
        <item name="colorPrimaryDark">@color/colorPrimaryDark</item>
        <item name="colorAccent">@color/colorAccent</item>
        <item name="android:windowBackground">@drawable/background</item>
    </style>

</resources> 
```

还有一个`<item name ="android:colorBackground">@color/black</item>`，它不仅会影响您的主窗口背景，还会影响您应用程序中的所有组件。[在此处](https://developer.android.com/guide/topics/ui/look-and-feel/themes#CustomizeTheme)阅读有关自定义主题的信息。

如果您想要[特定于版本的样式](https://developer.android.com/guide/topics/ui/look-and-feel/themes#Versions)：

> 如果新版本的 Android 添加了您想要使用的主题属性，您可以将它们添加到您的主题中，同时仍然与旧版本兼容。您只需要保存在包含资源版本限定符的 values 目录中的另一个 styles.xml 文件。例如：
> 
> ```
> res/values/styles.xml        # themes for all versions
> res/values-v21/styles.xml    # themes for API level 21+ only 
> ```
> 
> 由于 values/styles.xml 文件中的样式适用于所有版本，因此您在 values-v21/styles.xml 中的主题可以继承它们。因此，您可以从“基本”主题开始，然后将其扩展为特定于版本的样式，从而避免重复样式。

[在这里阅读更多（主题中的文档）](https://developer.android.com/guide/topics/ui/look-and-feel/themes)。

# c# - Ling to sql join

> ID：11779689
> 
> 赞同：1
> 
> 时间：2012-08-02T14:33:06.267
> 
> 标签：c#, linq-to-sql

请考虑下表。

## 表：文档

docID, docNr, docScanTime
10, 99, 2012-08-02
11, 98, 2012-08-02
12, 97, 2012-08-02
13, 96, 2012-08-02
14, 95, 2012-08-02

## 表：DocumentFlag

用户 ID、文档 ID、isDelete、isArchive 41、10、1
、NULL 42、11
、NULL、1

Document 表中有 5 行，DocumentFlag 表中有 2 行。我正在使用以下 Linq 语句来获取文档列表。

```
List<Document> docList = new List<Document>();
using (AppDataContext context = data.GetDataContext())
{
  docList = (from d in context.Documents
             join f in context.DocumentFlags on d.docID equals f.docID
             where f.usrID == userID
             select new Document
             {
                 DocID = d.docID,
                 DocNr = d.docNr,
                 ScanTime = d.docScanTime.Value,
                 UserID = f.userID,
                 IsDelete = f.isDelete.Value,
                 IsArchive = f.isArchive.Value,
              }).ToList<Document>();
}

public class Document
{
  public int DocID {get; set;}
  public int DocNr {get; set;}
  public DateTime DocScanTime {get; set;}
  public int UserID {get; set;}
  public byte IsDelete {get; set;}
  public byte IsArchive {get; set;}
} 
```

但问题是我只得到了 DocumentFlag 中的两行。我想获取 Document 中的所有行以及列表中 DocumentFlag 中的信息。如果 DocumentFlag 不包含有关文档的信息，则它可以将 null 存储在 isDelete 或 isArchive 中。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T14:37:38.137

您想在 Linq 中进行左外连接。我的语法有点生疏，但我认为它看起来像这样：

```
 docList = (from d in context.Documents
         join f in context.DocumentFlags on d.docID equals f.docID into ftmp
         where f.usrID == userID
         from f in ftmp.DefaultIfEmpty()
         select new Document
         {
             DocID = d.docID,
             DocNr = d.docNr,
             ScanTime = d.docScanTime.Value,
             UserID = f.userID,
             IsDelete = f.isDelete.Value,
             IsArchive = f.isArchive.Value,
          }).ToList<Document>(); 
```

以下文章可能会有所帮助： [https ://smehrozalam.wordpress.com/2009/06/10/c-left-outer-joins-with-linq/](https://smehrozalam.wordpress.com/2009/06/10/c-left-outer-joins-with-linq/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T14:52:17.320

您正在尝试的是 LINQ 中的 LEFT OUTER JOIN。

试试这个：

```
using (AppDataContext context = data.GetDataContext())
{
    docList = (from d in context.Documents
                join f in context.DocumentFlags on d.docID equals f.docID into flg
                where f.usrID == userID 
                from fff in flg.DefaultIfEmpty()
                select new Document
                {
                    DocID = d.docID,
                    DocNr = d.docNr,
                    ScanTime = d.docScanTime.Value,
                    UserID = fff.userID,
                    IsDelete = fff.isDelete.Value,
                    IsArchive = fff.isArchive.Value,
                }).ToList<Document>();
} 
```

# c++ - 向量 让我困惑

> ID：11779690
> 
> 赞同：0
> 
> 时间：2012-08-02T14:33:25.090
> 
> 标签：c++, stl

假设我需要在我的向量中存储长字符串。我可以将其声明为向量。然而，更好的方法是存储指向这些字符串而不是实际字符串的指针。

所以我的声明应该是类似于向量的东西吗？我只是做一些类似的事情：

```
LOOP
//Accept String from a file in myString
vector<string *> v1;
string * sample = &myString;
v1.push_back(sample);
END LOOP 
```

这是合适的还是他们存在更好的方法来实现这一目标？我什至可能完全错了。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-02T14:37:17.577

没有理由存储指向字符串的指针。 `std::string`无论如何都会将堆分配的内存用于“长”字符串，因此通过在容器中存储指针来获得的唯一好处就是自己管理内存的麻烦。

另一方面，如果您需要在多个位置复制这些长字符串，您可以在向量中保留指向字符串的共享指针：

```
std::vector<std::shared_ptr<std::string>>; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-02T14:38:20.127

> 然而，更好的方法是存储指向这些字符串而不是实际字符串的指针。

我真的很怀疑。除非您有充分的理由使用指针，否则请`std::vector<std::string>`改用。

# android - VideoView 播放视频时后退按钮不起作用

> ID：11779692
> 
> 赞同：4
> 
> 时间：2012-08-02T14:33:33.640
> 
> 标签：android, android-videoview, mediacontroller

我有一个`VideoView`，`Activities`如果我尝试按后退`Button`，它不会带我到上一个`Activity`，它也不会在日志猫中给出任何错误消息。

我尝试过覆盖该方法，并尝试使用 an`onBackPressed()`调用 prev ，但即使如此，后面也没有做任何事情。`Activity``Intent``Button`

此问题仅在视频播放时甚至播放完毕后才会出现。唯一一次`Button`工作是在视频开始播放之前。我的`VideoView`也`MediaController`有一套。

有任何想法吗 ？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T14:41:58.393

> 来自 CommsWare
> 
> 根据源代码，这应该可以工作：
> 
> 1.  扩展 MediaController（就本答案而言，将其称为 RonnieMediaController）
> 2.  覆盖 RonnieMediaController 中的 dispatchKeyEvent()
> 3.  在链接到超类之前，检查 KeyEvent.KEYCODE_BACK，如果遇到，告诉你的活动完成（）
> 4.  在 VideoView 中使用 RonnieMediaController 而不是 MediaController
> 
> 就个人而言，我只是不理会它，因为通过此更改，您的用户无法使 RonnieMediaController 按需消失。

[这是原始帖子的链接。](https://stackoverflow.com/questions/6051825/android-back-button-and-mediacontroller)

# javascript - 插入html时有没有办法触发事件？

> ID：11779693
> 
> 赞同：0
> 
> 时间：2012-08-02T14:33:35.177
> 
> 标签：javascript, jquery, backbone.js

这是一个主干应用程序，我正在使用 Jquery html() 函数将我的视图模板插入到任何地方的布局中，并且我希望能够在每次调用 jQuery 的 html() 函数来检查时触发一个事件页面的html。

有没有办法做到这一点 ？（就像 App.on('html', blablabla...); ）

谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T14:42:14.157

正如 Marc B 所建议的，DOM MutationEvents 在某些浏览器上可用（不是很多）。默认情况下，jQuery 在使用 时不会触发任何事件`html`，但您可以为此定义自己的行为，例如：

```
(function($) {
    var html_ref = $.fn.html;
    $.fn.extend({
        html : function() {
            $(document).trigger( 'html_change' );
            return html_ref.apply(this, arguments);
        }
    });
})($); 
```

它应该可以工作，但没有测试它。您可以使用相同的`.text`方法。现在您可以简单地使用：

```
$(document).bind( 'html_change', function() {
    // Hurray! Html changed!
}); 
```

就是这样的想法，随心所欲地使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T14:39:26.630

AFAIK，jQuery`html()`方法本身不会触发任何可订阅事件，但您可能会推出自己的简单[观察者模式](http://www.nczonline.net/blog/2010/03/09/custom-events-in-javascript/)实现。我在大量项目中使用它，它提供了一种出色、干净、轻量级的方式来封装松散耦合模块之间的任意事件处理。

**但是，**这是假设您在每次调用该方法时都有程序控制`html()`- 如果没有，那么这将更加困难，因为没有回调函数可以挂钩。

# c# - 防止在 Visual Studio 2010 发布上删除用户生成的内容

> ID：11779695
> 
> 赞同：1
> 
> 时间：2012-08-02T14:33:42.010
> 
> 标签：c#, visual-studio-2010, publish

我有一个存储用户上传的图像的应用程序。这些图像进入内容/图像/上传。问题是，如果我在目标上没有跳过额外文件的情况下发布，则所有用户上传的内容都会被删除。我很确定我做错了，这将是这种情况的最佳方法？

我担心以这种方式错误配置发布中的选项会丢失用户生成的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T14:52:14.433

我使用的一种方法是将“上传”的物理路径移到应用程序文件夹结构之外。我会使用 IIS 虚拟目录将文件夹挂载到应用程序。例如，如果文件夹结构当前如下所示：

```
c:\inetpub\
    wwwroot\
        content\
            images\
                upload\ 
```

您可以将其更改为：

```
c:\inetpub
    upload\   <-- must be manually created on the web server
    wwwroot\
        content\
            images\ 
```

您将从 Visual Studio 中的 Web 应用程序中删除上传文件夹。登录到网络服务器并在 inetpub 下创建文件夹（真的可以去任何地方）。然后进入 IIS 管理器并创建一个名为 upload 的虚拟目录，该目录指向 c:\inetpub\upload 文件夹。

上传文件夹不再是 Visual Studio 项目的一部分，因此“发布”功能不会触及它。

# ruby-on-rails - 如何访问/打开/编辑 .sqlite33 文件？

> ID：11779697
> 
> 赞同：0
> 
> 时间：2012-08-02T14:33:41.737
> 
> 标签：ruby-on-rails, ruby, database, sqlite, edit

我对 Ruby on Rails 完全陌生，从未参与过它，但我应该接管别人的旧项目。他设计了一个网络应用程序，可以在线登录网站/服务器，每天从中提取数据并执行计算。但是，该应用程序已经有一段时间没有运行了，所以现在当它尝试显示统计信息时，页面崩溃了。它使用 5 周的数据，目前只有 2 天的数据。

我需要手动插入缺少的几周的数据，以便让它再次启动并运行，但问题是我不知道如何查找/访问它的数据库，也不知道如何准确地使用 Ruby on Rails。我在他的项目的 db 目录中找到了几个文件，但它们大多是 .sqlite33 文件或只是“文件”。我下载了用于 Windows 的 sqlite 预编译二进制文件并尝试使用它，但不知道该怎么做。我也下载并尝试使用 SQTView 打开文件来更改表格，但我没有运气。

如何判断哪个文件是主数据库以及如何编辑它？什么是 .sqlite33 文件？谢谢。

*编辑* 应用程序在 HomeController#index "nil can't be coerced into Float" 中产生 TypeError

它将错误链接到代码中的一行，但发生错误的唯一原因是表中没有这行代码中的变量尝试使用的时间段的数据。这就是为什么我想用值手动更新它。

我认为 Sqliteman 可能会成功，感谢您向我解释所有这些。我只需要在编辑后确认它是否有效。

*EDIT2* 好的，所以我在试验他的应用程序时得到了一个小启示。事实证明，由于整周的空值，页面崩溃了。如果直到本周为止，我每周至少使用该应用程序收集一天的数据，那么该应用程序就可以正常工作。

有没有一种方法可以填充所有缺失的日期，而无需手动单击日历中的日期，因为它需要 20-30 秒才能加载？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:13:37.090

Rails 应用程序的数据库定义在`config/database.yml`- 尽管数据库本身和方案都在`db`文件夹中。`database.yml`您将在其中找到三个数据库配置 -开发*、*测试*和*生产*-*因此请确保选择正确的文件。

我从未听说过`.sqlite33`文件，但要手动编辑 SQLite 文件，我推荐[SQLiteMan](http://sqliteman.com/)。但我不建议手动编辑它。

我建议检查您是在*开发*模式还是*生产*模式下运行应用程序，因为这两个模块使用不同的数据库。尝试在其他模式下运行它。

如果这不起作用，请尝试保存数据库文件的副本，然后运行以下命令：

```
bundle install
bundle exec rake assets:precompile
rake db:migrate
rake db:migrate RAILS_ENV="production" 
```

（如果您使用的是 Linux，您可能还想使用 运行第一个命令`sudo`）

这些命令确保安装了所有必需的 gem，预编译的资产是最新的，并且数据库适合架构。如果您在同一台机器上运行该应用程序并使用与其他人正在使用的数据库相同的数据库，那么这些命令应该不是必需的，但是如果您已将应用程序移动到您自己的机器上，或者使用了一个使用过的过时的 db 文件，而不是这些命令可能会修复崩溃。

无论如何，如果您告诉我们应用程序产生了什么错误，我们或许能够提供更多帮助。

# heroku - 将 ssh 密钥添加到 heroku buildpack

> ID：11779701
> 
> 赞同：1
> 
> 时间：2012-08-02T14:33:45.677
> 
> 标签：heroku, buildpack

我有一个内部开发人员工具，我已经推送到 heroku，它基本上是一个表单输入应用程序，它将输入的数据提供给 shell 脚本以设置远程服务器环境。我想做的一件事是最后将生成的代码添加到 git repo 中。但是，我不确定我是否可以安全地在 heroku dyno 上获取 ssh 密钥。

据我所知，我可以在 buildpack 中粘贴一个 ssh 密钥并将其复制到`/app/.ssh`很容易，但这意味着将 ssh 密钥放在 github 上的一个分叉（公共）repo 中。有什么好的方法来处理这个问题，还是 heroku 不适合这个用例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T14:46:03.580

我意识到我认为我可以将 ssh 密钥放入推送到 heroku 的 git repo 中。在最坏的情况下，我可以`/app/.ssh/config`在自定义 buildpack 中指定一个指向 identityFile 的文件。不知道为什么我花了这么长时间才意识到这一点。

# javascript - KnockoutJs...ObservableArray 和两个下拉列表

> ID：11779703
> 
> 赞同：0
> 
> 时间：2012-08-02T14:33:48.337
> 
> 标签：javascript, asp.net-mvc-3, knockout.js

假设我有三个这样的对象：

```
var registryEpisode = function() {
        var self = this;

        self.registry = ko.observable(new registry());
        self.episodeType = ko.observable(new episodeType());
    };

    var episodeType = function() {
        var self = this;
        self.id = ko.observable(""),
        self.name = ko.observable("");
    };
var registry = function() {
    var self = this;

    self.id = ko.observable(""),
    self.name = ko.observable("");
}; 
```

然后我有一个这样的视图模型：

```
 var vm = function() {
    var self = this;
    self.registryEpisodeTypes = ko.observableArray([new registryEpisode()]);

    self.addRegistryEpisodeType = function (episodeType, registry) {
    var regEpisode = new registryEpisode();
    regEpisode.registry = registry;
    regEpisode.episodeType = episodeType;
            self.registryEpisodeTypes.push(regEpisode);

        } .bind(this);
    } 
```

我正在尝试将视图模型绑定到下拉列表表，并在每次选择注册表和剧集类型时更新视图模型，但我需要维护剧集类型和注册表之间的关系。想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T17:24:48.573

这是一个链dropDownLists的简单实现：[jsFiddle](http://jsfiddle.net/gurkavcu/zNFyZ/)

```
var registryEpisode = function() {
    var self = this;

    self.registry = ko.observable(new registry());
    self.episodeType = ko.observable(new episodeType());
};

var episodeType = function(id, name) {
    var self = this;
    self.id = ko.observable(id), self.name = ko.observable(name);
};

var registry = function() {
    var self = this;

    self.id = ko.observable(""), self.name = ko.observable("");
};

var vm = function() {

    var self = this;
    self.selectedRegistry = ko.observable("");
    self.registryEpisodeTypes = ko.observableArray([]);

    self.addRegistryEpisodeType = function(episodeType, registry) {
        var regEpisode = new registryEpisode();
        regEpisode.registry = registry;
        regEpisode.episodeType = episodeType;
            self.registryEpisodeTypes.push(regEpisode);

    }.bind(this);

    self.getRegistries = function() {

        var hashCheck = {};
        var result = ko.observableArray([]);
        ko.utils.arrayMap(self.registryEpisodeTypes(), function(item) {
                if (hashCheck["" + item.registry.id()] === null || hashCheck["" + item.registry.id()] === undefined) {
                hashCheck["" + item.registry.id()] = item.registry.name();
                result.push({
                    "name": item.registry.name(),
                    "value": item.registry.id()
                });
            }
        });
        return result;
    }

    self.getEpisodes = ko.dependentObservable(function() {
        var ret = self.registryEpisodeTypes();
        var selectedRegistryItem = self.selectedRegistry();
        if (selectedRegistryItem === null || selectedRegistryItem === undefined || selectedRegistryItem === "")
            return ;
        var result = ko.observableArray([]);
        ko.utils.arrayMap(ret, function(item) {
            if (item.registry.id() == selectedRegistryItem) result.push({
                "name": item.episodeType.name(),
                "value": item.episodeType.id()
            });
        });
        console.log(ko.toJSON(result));
            return result;

    });
}

var viewModel = new vm();

var breakingBad = new registry();
breakingBad.id("1000");
breakingBad.name("Breaking Bad");
viewModel.addRegistryEpisodeType(new episodeType("1", "E1-breakingBad"), breakingBad);
viewModel.addRegistryEpisodeType(new episodeType("2", "E2-breakingBad"), breakingBad);
viewModel.addRegistryEpisodeType(new episodeType("3", "E3-breakingBad"), breakingBad);

var trueBlood = new registry();
trueBlood.id("1001");
trueBlood.name("True Blood");
viewModel.addRegistryEpisodeType(new episodeType("1", "E1-trueBlood"), trueBlood);
viewModel.addRegistryEpisodeType(new episodeType("2", "E2-trueBlood"), trueBlood);
viewModel.addRegistryEpisodeType(new episodeType("3", "E3-trueBlood"), trueBlood);

ko.applyBindings(viewModel);

<div>   
    <span data-bind="text:selectedRegistry"></span>
</div>
<div>
    <select data-bind="options:getRegistries(),optionsText:'name',optionsValue:'value',value:selectedRegistry"></select>   
</div> 
<div>
    <select data-bind="options:getEpisodes(),optionsText:'name',optionsValue:'value'"></select>
</div> 
```

我创建了一个名为 getEpisodes 的dependentObservable。每当 selectedRegistry 更改此 episodeList 时再次计算。

# c++ - C++ 类型 unsigned long int

> ID：11779704
> 
> 赞同：21
> 
> 时间：2012-08-02T14:33:49.433
> 
> 标签：c++, c

`unsigned long int` 相当于`unsigned long`？_ 在 C++ 中

在我看来，它们是相同的。但我看到有些人仍在代码中使用 unsigned long int。不明白为什么？谁能为我解释一下

```
#include <stdio.h>

int main() {
    unsigned long int num = 282672; 
    int normalInt = 5;
    printf("");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-02T14:35:10.550

# 是的。

`long`只是 的简写`long int`。这是因为原则`long`上只是一个限定符（例如，它也可以用于延长`double`数据类型）

来自 C++ ISO 标准，第 7.1.5.2 节，等效类型说明符表：

![在此处输入图像描述](../Images/63dbe8006472e8c17ebb2eb8cf643d05.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-02T14:44:35.400

C99 标准的 §6.7.2 给出了以下类型列表（这只是摘录）：

*   `short`, `signed short`, `short int`, 或`signed short int`
*   `unsigned short`， 或者`unsigned short int`
*   `int`, `signed`, 或`signed int`
*   `unsigned`， 或者`unsigned int`
*   `long`, `signed long`, `long int`, 或`signed long int`
*   `unsigned long`， 或者`unsigned long int`
*   `long long`, `signed long long`, `long long int`, 或`signed long long int`
*   `unsigned long long`， 或者`unsigned long long int`

还有以下几点：

> (5) 每个逗号分隔的集合指定相同的类型，除了对于位域，说明符`int`指定与 相同的类型`signed int`还是与 相同的类型是实现定义的`unsigned int`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T14:44:54.697

*是*的。`unsigned`, `signed`, `short`, `long`,`long long`都是`XXX int`.

请参阅标准中的*7.1 说明符 [dcl.spec]*：

> 3 [注意：由于signed、unsigned、long和short默认暗示int，出现在这些说明符之一之后的类型名称被视为（重新）声明的名称。[ 例子：
> 
> `void h(unsigned Pc); // void h(unsigned int)`
> 
> `void k(unsigned int Pc); // void k(unsigned int)`
> 
> —结束示例] —结束说明]

和*7.1.6.2 简单类型说明符 [dcl.type.simple]*

```
 Table 10 — simple-type-specifiers and the types they specify

    Specifier(s)            | Type
    ------------------------+---------------------------------
    type-name               | the type named
    simple-template-id      | the type as defined in 14.2
    char                    | “char”
    unsigned char           | “unsigned char”
    signed char             | “signed char”
    char16_t                | “char16_t”
    char32_t                | “char32_t”
    bool                    | “bool” 
    unsigned                | “unsigned int”
    unsigned int            | “unsigned int”
    signed                  | “int”
    signed int              | “int”
    int                     | “int”
    unsigned short int      | “unsigned short int”
    unsigned short          | “unsigned short int”
    unsigned long int       | “unsigned long int”
    unsigned long           | “unsigned long int”
    unsigned long long int  | “unsigned long long int”
    unsigned long long      | “unsigned long long int”
    signed long int         | “long int” 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T14:35:43.850

`unsigned long int`是正确的类型定义，但是`int`可以忽略。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T14:36:34.550

是的，它们是一样的。说`unsigned long int`只是明确地说明它是一个 int。

您始终可以通过`sizeof(unsigned long int)`和查看类型的大小`sizeof(unsigned long)`

希望这可以帮助。

# php - 验证ajax发送的数据

> ID：11779706
> 
> 赞同：-1
> 
> 时间：2012-08-02T14:34:02.320
> 
> 标签：php, jquery

在我的网站上，我有登录区域，登录用户可以在其中更改存储在数据库中的文本。每个用户都有一个（或 2 或 3 个）文本，每个文本都有特定的 id。以下是消息数据库的外观：

```
 | message_id | message_text | user_id | time | 
```

Message_id 和 userid 是三位或四位数字。

直到现在，我一直在使用干净的 PHP 从数据库中保存/获取数据。但是现在我想使用 AJAX，这是我的调用的外观（当用户完成编辑他的消息并点击提交时）：

```
var msg = $("#msg").val();
var usrid = $("usrid").val();
var msgid = $("#msgid").val();

$.ajax({
  type: 'POST',
  data: {
    action: 'save_message',
    message: msg,
    user_id: usrid,
    message_id: msgid
},
url: 'http://example.com/update.php',
success: function(data) {
        $('#info').html('<b>Message saved!!!</b>');
        }
}) 
```

但是，众所周知，JQuery (JS) 是客户端语言，用户可以很容易地更改 usrid、msgid 的值，并且在几次尝试后他会更改其他用户的消息。

什么是正确的解决方案？传递某种令牌，使 id 更复杂（10、20 位数字）或其他解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:48:08.080

如果您已经为所有 POST 数据处理提供了一个干净的 PHP 解决方案，您可以重复使用相同的验证方法，因为 AJAX 将数据作为 POST 提交给您。除非您没有任何验证服务器端并且您将用户 ID 与表单数据一起提交，否则我建议您按照@Briguy37 的建议使用 PHP 会话。如果你想要一个很好的例子来验证/清理发布数据，CodeIgniter 有一个非常好的安全库部分，它的核心很容易实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T14:41:18.473

查看 PHP 会话。当用户首次登录时，将其用户 ID 与会话相关联。然后，当他们发布消息时，使用会话中的用户 ID，而不是从客户端传递它。如果您的登录过程是安全的，这应该避免用户更新其他用户的消息。

# .net - 在所有异步套接字回调上强制线程 CultureInfo

> ID：11779707
> 
> 赞同：2
> 
> 时间：2012-08-02T14:34:02.773
> 
> 标签：.net, multithreading, sockets, asynchronous, cultureinfo

有没有办法为所有异步套接字回调设置默认 CultureInfo （“en-US”），或者我真的必须在每个回调上手动设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T14:15:44.113

关于 .NET 4.5，您可以使用`CultureInfo.DefaultThreadCurrentCulture`. 不幸的是，您不能为应用程序设置 CultureInfo，因此每个线程都使用系统区域设置信息启动。

# .net - WinDbg，SOS，如何将所有字符串转储到堆栈上

> ID：11779714
> 
> 赞同：3
> 
> 时间：2012-08-02T14:34:13.140
> 
> 标签：.net, debugging, windbg, sos

如何在当前线程的 clrstack 上打印所有 System.String 对象的字符串值？

我想做的伪代码：

```
foreach ($string in !dso -type System.String) !do $string 
```

或者更好

```
foreach ($string in !dso -type System.String) !printstring $string 
```

甚至更好

```
foreach (distinct $string in !dso -type System.String) !printstring $string 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T20:28:05.303

最新的 SOSEX 扩展 (v4) 具有`!mdso`类型过滤选项的命令`/t`。

```
SOSEX - Copyright 2007-2012 by Steve Johnson - http://www.stevestechspot.com/
To report bugs or offer feedback about SOSEX, please email sjjohnson@pobox.com

mdso
Usage: !sosex.mdso [Options]

Dumps object references on the stack and in CPU registers in the current context

Options:

/t:typeFilter - Limits the output to objects whose type name matches the filter expression specified by "typeFilter".
                 Cannot be combined with the /mt option. 
```

所以一个命令`!mdso /t:System.String`应该工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T14:38:20.277

我的想法是在堆栈地址中查找字符串对象引用。例如，我们知道栈底地址（0x000000001821CEF0）和栈顶地址（000000001821E3F0）。我们可以遍历此范围内的所有地址（带 8 字节步长）并输出对象详细信息。

```
.for (r $t0=0x000000001821CEF0;@$t0<000000001821E3F0;r $t0=@$t0+0x8){ !do poi(@$t0) } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T15:06:03.640

使用！sosex.strings。此命令将允许您查看所有字符串的值，或按大小、内容或 GC 生成过滤它们。

# regex - 正则表达式从 JavaScript 和 php 中的字符串中获取所有数字

> ID：11779718
> 
> 赞同：0
> 
> 时间：2012-08-02T14:34:31.127
> 
> 标签：regex, numbers

正在玩正则表达式以从字符串中删除所有数字

我想到了这个：

```
 /([^0-9])$/ 
```

但它只有在字符串看起来像这样的情况下才有效，例如 Name123 但是如果你输入 Name123Name 比它不起作用？

不明白为什么？

有任何想法吗？

最好的问候， 伊利亚

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T14:36:20.730

您的正则表达式在字符串末尾找到一个*字符**不在*其中。`[0-9]`

 *要检查字符串中是否有数字，请删除锚点：

```
/[0-9]/ 
```

要检查所有字符是否不是数字，请添加字符串锚的开头：

```
/^[^0-9]+$/ 
```

这种方法称为黑名单 - 您不想允许的字符*列表*。请注意，通常最好创建一个白名单 - 列出您*确实*希望允许的字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T14:36:58.597

删除`$`末尾的，因为它匹配字符串的结尾。您也可以使用`\d`匹配数字而不是`[0-9]`取决于您使用的语言。

所以在你的例子`/[0-9]$/`中匹配 Name123 因为 123 出现在字符串的末尾，因此匹配`$`锚。但在另一个示例 Name123Name 中，`$`锚点不匹配，因为数字位于字符串的中间。*

# java - 从html链接到jsp

> ID：11779721
> 
> 赞同：6
> 
> 时间：2012-08-02T14:34:40.020
> 
> 标签：java, html, jsp, href

在动态 Web 项目中，我有 - default.html 页面

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<link rel="stylesheet" href="./Styles/Site.css" type="text/css" />
<title>Create new customer</title>
</head>
<body>
    <a href="\WEB-INF\forms\CustomerMenu.jsp">Test new</a>

</body>
</html> 
```

我也有 CustomerMenu.jsp 页面 -

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<link rel="stylesheet" href="./Styles/Site.css" type="text/css" />
<title>Create new customer</title>
</head>
<body>
    // Table ..
</body>
</html> 
```

页面层次结构作为快照 -

![在此处输入图像描述](../Images/023a2a56e8b3eff77f3b48ea4e94edbf.png)

当我按下 default.html 中的链接时，我收到错误消息

```
- HTTP Status 404 - 

--------------------------------------------------------------------------------

type Status report

message 

description The requested resource () is not available. 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-02T14:36:56.907

[如果](https://stackoverflow.com/tags/servlets/info)`/WEB-INF`不使用前端控制器servlet或特定标签（如a或.`<jsp:include>`[`RequestDispatcher#forward()`](http://docs.oracle.com/javaee/6/api/javax/servlet/RequestDispatcher.html#forward%28javax.servlet.ServletRequest,%20javax.servlet.ServletResponse%29)[`RequestDispatcher#include()`](http://docs.oracle.com/javaee/6/api/javax/servlet/RequestDispatcher.html#include%28javax.servlet.ServletRequest,%20javax.servlet.ServletResponse%29)

如果您需要通过 URL*直接*访问 JSP 文件，那么您不应该将 JSP 放在`/WEB-INF`文件夹中。放在`/WEB-INF`文件夹外面

```
WebContent
 |-- forms
 |    |-- CreateNewCustomer.html
 |    |-- CustomerMenu.html
 |    `-- CustomerMenu.jsp
 |-- WEB-INF
 :    : 
```

并相应地修复链接。

```
<a href="forms/CustomerMenu.jsp">Test new</a> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T14:37:51.010

`WEB-INF`文件夹无法在外部访问。您将需要将 jsp 移到外部`WEB-INF`或使用转发请求转发到 jsp。

# wpf - WPF中的两种方式数据表绑定

> ID：11779727
> 
> 赞同：0
> 
> 时间：2012-08-02T14:34:52.887
> 
> 标签：wpf, vb.net, binding, datagrid, componentone

我有一个绑定到我的视图模型中的属性的数据网格（在本例中为 C1 数据网格）。数据网格的 XAML 如下所示：

```
 <c1:C1DataGrid 
            AutoGenerateColumns="False"
            IsReadOnly="False"
            Margin="5" Width="auto"
            MinWidth="250"
            HorizontalAlignment="Stretch"
            VerticalAlignment="Stretch"
            Name="dgNotifAssign"
            CanUserAddRows="True" 
            ItemsSource="{Binding Path=notifCodeSubs.notification_configuration}"
            >

            <c1:C1DataGrid.Columns>
                <c1:DataGridTextColumn 
                    Binding="{Binding Path=user_id}" 
                    Header="Recipient" 
                    VerticalAlignment="Stretch"
                    SortMemberPath="user_id"  
                    > 
```

在我的视图模型中，它绑定的属性如下所示：

```
Public Property notifCodeSubs As dsPeruseFM
    Get
        If _notifCode Is Nothing Then
            _notifCode = New dsPeruseFM
        End If
        Return _notifCode
    End Get
    Set(ByVal value As dsPeruseFM)
        MsgBox("If you can see this, success!")
    End Set
End Property 
```

在代码隐藏中，我创建了一个视图模型的实例并将 xaml 的数据上下文设置为该实例，相当简单......

```
Dim vm As New ctrlAlertNotifyVM 
```

也：

```
ctrlAlertNotifyXML.DataContext = vm 
```

上面的配置编译和读取数据就好了。网格中填充了所有正确的数据等。当我尝试添加`Mode=twoway`到数据网格上的 ItemsSource 时，问题就出现了。此时VS2010吐出以下错误：

> TwoWay 或 OneWayToSource 绑定无法在“PeruseFM.dsPeruseFM”类型的只读属性“notification_configuration”上工作。

我很确定我的所有属性都是读/写的。虽然此时的 set 命令只不过是一个消息框，但似乎我什至无法访问它。

所以问题是......以前有人遇到过这个问题吗？

更新，回答问题“notification_configuration 是什么样的？” 从六个字母变量：

```
Public Function codeChanged(Optional ByVal x As String = "")

    If _notifCode Is Nothing Then
        _notifCode = New dsPeruseFM
    End If
    taNotifSubs.fillNotifSubs(notifCode:=x, dataTable:=_notifCode.notification_configuration)
    Return _notifCode
End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:39:18.267

您已经向我们展示了它`notifCodeSubs`是读/写的，但是，这不是您绑定到的实际属性。

从这个角度来看，错误消息是不言自明的：

> ...**只读属性**'notification_configuration'...

因此，您不能`TwoWay`将该属性作为`ItemsSource`.

# c# - 强类型数据上下文必须声明正文错误

> ID：11779739
> 
> 赞同：0
> 
> 时间：2012-08-02T14:35:28.840
> 
> 标签：c#, .net, datacontext, sqlconnection

收到此错误：

```
Error   4   'ZoneUpdates.Models.PgeDataContext.PgeDataContext(string, System.Data.Linq.Mapping.MappingSource)' must declare a body because it is not marked abstract, extern, or partial    C:\Code\ZoneUpdates\ZoneUpdates\Models\PgeDataContext.cs    18  16  ZoneUpdates
Error   6   'ZoneUpdates.Models.ZoneObject.SendPropertyChanged(string)' must declare a body because it is not marked abstract, extern, or partial   C:\Code\ZoneUpdates\ZoneUpdates\Models\PgeDataContext.cs    42  32  ZoneUpdates 
```

这四个类之间基本上有 13 个错误（下面显示了两个）。

我正在使用 4.0，我基本上从另一个项目中复制并粘贴了这段代码，它可以按预期工作。我尝试将课程更改为部分课程，但无济于事。任何指针表示赞赏。

```
[Database(Name = "Pge_Dev")]
public class PgeDataContext : DataContext
{
    public PgeDataContext(IDbConnection connection);
    public PgeDataContext(string dsn);
    public PgeDataContext(
              IDbConnection connection, 
              System.Data.Linq.Mapping.MappingSource mappingSource);
    public PgeDataContext(
              string connection, 
              System.Data.Linq.Mapping.MappingSource mappingSource);

    public Table<ZoneObject> ZoneObject { get; set; }
    public Table<ZoneObjType> ZoneObjType { get; set; }
    public Table<ZoneTypeBridge> ZoneTypeBridge { get; set; }
}

[Table(Name = "dbo.ZoneObject")]
public class ZoneObject : INotifyPropertyChanging, INotifyPropertyChanged
{
    public ZoneObject();

    [Column(Storage = "ID", DbType = "Int NOT NULL")]
    public int ID { get; set; }
    [Column(Storage = "Name", DbType = "nvarchar(30)")]
    public int Name { get; set; }
    [Column(Storage = "Value", DbType = "bigint")]
    public int Value { get; set; }
    [Column(Storage = "CancurrencyID", DbType = "Int NOT NULL")]
    public int ConcurrencyID { get; set; }

    public event PropertyChangedEventHandler PropertyChanged;
    public event PropertyChangingEventHandler PropertyChanging;

    protected virtual void SendPropertyChanged(string propertyName);
    protected virtual void SendPropertyChanging();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:39:20.273

**错误示例**

没有主体的构造函数

```
public PgeDataContext(IDbConnection connection); 
```

=> 你必须声明一个身体

```
public PgeDataContext(IDbConnection connection){ /*blibli*/ } 
```

没有主体的方法

`protected virtual void SendPropertyChanged(string propertyName);`

=> 您必须为非抽象、外部或部分方法声明一个主体，如您的错误消息中所述

`protected virtual void SendPropertyChanged(string propertyName) { /*blabla*/ }`

# mysql - 连接 MySQL 表：在左表的一行中显示右表的所有结果

> ID：11779743
> 
> 赞同：1
> 
> 时间：2012-08-02T14:35:41.120
> 
> 标签：mysql, join, view

这是表一中的一些数据（人）

```
Person Table
person_ID | Name | Address
        1 | JC   | 303 Main Street
        2 | NM   | 444 Nowhere Drive 
```

和表二（属性）

```
Attribute table
person_ID | attribute
    1     |   dog
    1     |   cat
    2     |  bearded 
```

当我加入表格时，我得到以下视图：

```
person_id | name | attribute
    1     |  JC  |   dog
    1     |  JC  |   cat
    2     |  NM  |  bearded 
```

它们是左表中的重复行。它包含相同的 person_id 等。我想将前两个结果组合成一行。像这样：

```
person_id | name | attribute | attribute
    1     |  JC  |   dog          cat
    2     |  NM  |  bearded       NULL 
```

或这个：

```
person_id | name | attribute 
    1     |  JC  |  dog, cat
    2     |  NM  |  bearded 
```

这是我尝试过的一些代码：

```
SELECT person.*,Attribute.att FROM `person`,`Attribute` 
WHERE person.`person_id` = Attribute.person_id 
AND name = "" group by person_id 
```

左连接

```
Select * from person AS P
LEFT JOIN Attribute AS N
ON P.person_id = N.person_id 
```

还尝试了内部连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:46:44.263

MySQL 有一个函数[GROUP_CONCAT](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)可以让你将行连接成一个字符串。

像这样的东西应该工作：

```
SELECT person.*, (
    SELECT GROUP_CONCAT(attribute SEPARATOR ',')
    FROM Attribute
    WHERE person.id = Attribute.person_id
) as attributes
FROM `person` 
```

我在这台机器上没有 MySQL，所以如果有小错误，我很抱歉。

# c# - 如何在 Quartz.Net 的父作业中等待子作业的完成

> ID：11779748
> 
> 赞同：5
> 
> 时间：2012-08-02T14:35:50.237
> 
> 标签：c#, quartz.net

我有一个容器（父）工作。它包含子作业。ParentJob 将在所有 childJobs 完成后完成。问题在代码中。

```
public class ParentJob : InterruptableJob
{
    private childrenAreCompleted = false;
    private ChildJobListener _listener;

    public override void Execute(IJobExecutionContext context)
    {
        var childs = new int[] { 1, 2, 3 };

        _listener = new ChildJobListener(childs.Length);
        _listener.OnCompleted += new Action(_listener_OnCompleted);

        JobKey jk = typeof(ChildJob).JobKey(); // My Type extension :)
        IMatcher<JobKey> matcher = KeyMatcher<JobKey>.KeyEquals(jk);// this is wrong because ParentJob could be called concurrently. 

        context.Scheduler.ListenerManager.AddJobListener(_listener, matcher);

        foreach (var child in childs)
        {
            JobDataMap jobData = new JobDataMap();
            jobData.Add("ParentId", context.FireInstanceId);//TODO: suspected I want to use this with listener for matching.But I could not find Matcher<JobDataMap>.

            context.Scheduler.TriggerJob(jk, jobData);
        }

        // Wait Till _listenerOnCompleted
        while (true)
        {
            Thread.Sleep(2000);
            if (childrenAreCompleted)
                break;
        }
    }

    void _listener_OnCompleted()
    {
       childrenAreCompleted=true;
    }
}

public class ChildJobListener : IJobListener
{
    private int _executedChildCount = 0;
    private int _totalChildCount = 0;

    public int ActiveChildCount
    {
        get
        {
            return _totalChildCount - _executedChildCount;
        }
    }

    public event Action OnCompleted;

    public ChildJobListener(int childCount)
    {
        _totalChildCount = childCount;
    }

    public void JobExecutionVetoed(IJobExecutionContext context)
    {
        throw new NotImplementedException();
    }

    public void JobToBeExecuted(IJobExecutionContext context)
    {
    }

    public void JobWasExecuted(IJobExecutionContext context, JobExecutionException jobException)
    {
        _executedChildCount++;
        if (_totalChildCount == _executedChildCount)
        {
            if (OnCompleted != null)
                OnCompleted();
        }
    }

    public string Name
    {
        get { return "ChildJobListener"; }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-04-29T10:44:46.040

您可以通过将 IsLocking 标志传递给您的作业上下文来创建您的 synchronizedJob 实现，具体取决于您的实现，您可能必须相应地设置父子作业。例如以下可能会给你方向

```
 public abstract class SynchronizedLoggedJob : IJob
    {
        private static readonly object _syncRoot = new object();

        protected abstract void JobExecute(IJobExecutionContext context);

        public void Execute(IJobExecutionContext context)
        {
            context.ThrowIfNull(nameof(context));
            if (Convert.ToBoolean(context.JobDetail.JobDataMap["IsLocking"]))
            {
                lock (_syncRoot)
                {
                    JobExecute(context);
                }
            }
            else
            {
                JobExecute(context);
            }
        }
}   

   <job>
      <name></name>
      <group></group>
      <description></description>
      <job-type></job-type>
      <!-- See, http://www.quartz-scheduler.org/documentation/quartz-2.x/tutorials/tutorial-lesson-03.html -->
      <durable>true</durable>
      <recover>false</recover>
      <job-data-map>
        <entry>
          <key>IsLocking</key>
          <value>True</value>
        </entry>
      </job-data-map>
    </job> 
```

# ms-access - 在 MDB 数据库中设置小数位

> ID：11779750
> 
> 赞同：2
> 
> 时间：2012-08-02T14:35:50.853
> 
> 标签：ms-access, ado.net, dao

我正在从事的项目的一部分是以编程方式创建一系列 MDB 文件，这些文件将成为最终的可交付成果。客户的规范要求表格中的某些字段保留 3 位小数。

我首先使用 python 创建 mdb 文件，然后为了能够将列更改为 DECIMAL (10,3)，我使用 ADODB (C#, .NET 4.0) - 因为我在 Python 中找不到合适的东西。但问题是这对客户来说还不够。他们想要打开 MDB 并在设计模式下查看这些字段的小数位数设置为 3。如果不是，则不接受该文件。

现在，我花了 3 天时间来尝试提出解决方案。一个可能的候选对象是 DAO 和 Field2 对象，但到目前为止，我还没有发现这个对象。我正在使用 Microsoft DAO 3.6 对象，但 Field2 似乎不是程序集的一部分。甚至不知道这是否真的会做所需要的......

有谁知道这样做的方法？老实说，不在乎它的 DAO、ADO、OLEDB 还是任何其他 3 个字母的首字母缩写词？我怎样才能从中得到：

![在此处输入图像描述](../Images/9666a87ec101af764f79c23f6c9f3006.png)

对此 - 以编程方式？

![在此处输入图像描述](../Images/59c83a849e1803ea92112eb4104899af.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:05:41.987

我可以告诉你如何在 VBA/DAO 中做到这一点，这可能会给你一些想法。您必须先附加属性：

```
sSQL = "create table testX (id counter, anumber decimal(10,3))"
CurrentProject.Connection.Execute sSQL

Dim db As Database
Dim tdf As TableDef
Dim fld As dao.Field

Set db = CurrentDb

Set tdf = db.TableDefs("testX")
Set fld = tdf.Fields("anumber")
'fld.Properties("DecimalPlaces") = 3
Set prp = fld.CreateProperty("DecimalPlaces", dbByte, 3)
tdf.Fields("anumber").Properties.Append prp 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-01T15:35:16.867

```
Public Sub DBF_SetDecPoints(ByVal DBNom As String, ByVal DBTab As String, ByVal Campo As String, ByVal NDEC As Short)
    Dim DB As DAO.Database
    Dim TD As DAO.TableDef
    Dim FD As DAO.Field
    Dim PP As DAO.Property

    If DBF_Exists(DBNom, DBTab, Campo) Then
        'Call DBF_SetProperty(DBNom$, DBTab$, Campo$, "Format", DaoText, "Fixed")
        DB = DAOEngine.Workspaces(0).OpenDatabase(DBNom)
        TD = DB.TableDefs(DBTab)
        FD = TD.Fields(Campo)
        PP = FD.CreateProperty("Format", DaoText, "Fixed")
        On Error Resume Next
        FD.Properties.Append(PP)
        FD.Properties("Format").Value = "Fixed"
        PP = FD.CreateProperty("DecimalPlaces", DaoByte, NDEC)
        FD.Properties.Append(PP)
        FD.Properties("DecimalPlaces").Value = NDEC
        On Error GoTo 0
        DB.Close()
    End If
End Sub 
```

# asp.net - 上传大文件

> ID：11779751
> 
> 赞同：3
> 
> 时间：2012-08-02T14:35:57.227
> 
> 标签：asp.net, webforms, pagemethods, web-farm

我是一名业余 ASP.net 开发人员，从事我的第一份工作（朋友网站）。ASP.net v4.0，使用VS2010。

他的公司制作 3D 模型（使用 3D 打印机）。该网站目前正在开发中，但可以在[这里](http://www.make-models.com)找到。我会是第一个承认代码有点匆忙和被黑的人，但我的朋友对他到目前为止所拥有的非常满意。

其中一项要求是他的客户需要能够上传他们的模型设计文件，每个文件可能高达 100 MB（或更多）。我正在努力让它正常工作。

我开始使用内置`<asp:FileUpload ID="FileUpload1" runat="server" />`标签和动画 gif 图像，类似于[Joe Stagner 教程](http://www.asp.net/web-forms/videos/how-do-i/how-do-i-file-uploads-with-an-ajax-style-interface)中描述的想法- 谢谢 Joe，我非常喜欢你的演示文稿。

这适用于一个小测试文件，但没有给出任何上传进度的指示。因此，我尝试使用 Sunasara Imdadhusen 在他的[代码项目文章](http://www.codeproject.com/Articles/113418/ASP-NET-File-Upload-with-Progress-Bar)中提出的想法来改进我的解决方案。我的上传代码如下所示：

```
Task t = Task.Factory.StartNew(() =>
{
    byte[] buffer = new byte[UPLOAD_BUFFER_BYTE_SIZE];

    // Upload the file in chunks so that we can measure how long it is taking.
    using (FileStream fs = new FileStream(Path.Combine(newQuotePath, filename), FileMode.Create))
    {
        DateTime stopwatch = DateTime.Now;

        while (stats.Uploaded < stats.TotalSize)
        {
            int bytecount = postedFile.InputStream.Read(buffer, 0, UPLOAD_BUFFER_BYTE_SIZE);
            fs.Write(buffer, 0, bytecount);

            stats.Uploaded += bytecount;

            double dRate = UPLOAD_BUFFER_BYTE_SIZE / Math.Abs((DateTime.Now - stopwatch).TotalSeconds);
            stats.Rate = (int)(Math.Min(dRate, int.MaxValue));

            // Sleep is for debugging only!
            //System.Threading.Thread.Sleep(2000);

            stopwatch = DateTime.Now;
        }
    }
}, TaskCreationOptions.LongRunning); 
```

where`stats`是对存储为会话变量的类的引用，并且可以从`setInterval(...)`PageMethod 中运行的 javascript 函数访问（在进行上传时）：

```
[System.Web.Services.WebMethod]
[System.Web.Script.Services.ScriptMethod]
public static UploadStatus GetFileUploadStatus()
{
    UploadStatus stats = (UploadStatus)HttpContext.Current.Session["UploadFileStatus"];

    if ((stats != null) && (stats.IsReady))
    {
        return stats;
    }
    else
    {
        return null;
    }
} 
```

这在我的本地机器上工作（使用线程睡眠来减慢上传速度）。所以我将它发布到我们的主机[123-Reg](https://www.123-reg.co.uk/)并没有按预期工作。上传开始时动画 gif 出现，但进度条没有开始移动。文件输入控件和提交按钮（在 IFrame 中）应在上传开始后立即禁用，这需要很长时间才能禁用。然后网页就挂在那里。等了一会儿，我点击了页面刷新按钮。当页面刷新时，显示我的测试文件已成功上传。我尝试了一个 16 KB 的文件和一个 1.6 MB 的文件。

由于这在我的本地机器上运行，我怀疑这是因为我们的网站主机（123-Reg）正在使用网络农场。

无论如何，我认为这会很容易，但事实并非如此，所以我查看了一些开源上传进度条。我查看了[NeatUpload](http://neatupload.codeplex.com/)，但它说“默认情况下，NeatUpload 在网络花园或网络农场上无法正常工作”，它还说让它在网络农场上工作“指定相同的随机 32-hex-每个服务器的 Web.config 部分中的数字解密密钥属性”。但我认为我无法访问 123-Reg 的服务器配置文件（？）。

我的朋友建议也许我们可以使用诸如保管箱之类的服务，但我看了看，我不知道如何将其添加到我们的网站。这可能是一个不错的选择，因为它们可能针对上传进行了优化。

任何意见或建议将不胜感激 - 谢谢。

* * *

编辑：到目前为止的故事......仍在为此苦苦挣扎。

我详细研究了使用 Dropbox（以及其他云存储提供商，例如 SkyDrive 等）。似乎这些服务是围绕提供与个人用户存储交互的应用程序而设计的。我希望所有用户都能够将文件上传到我的保管箱文件夹，但无需共享（客户不应访问其他客户的设计文件）。无论如何，我继续设置了一个保管箱帐户，安装了[Sharpbox SDK](http://sharpbox.codeplex.com/)并重新编程了我的上传代码（任务操作中的位）。这在我的本地机器上似乎工作正常，它有点慢，因为它正在上传到保管箱服务器（我不需要 Thread.Sleep）。我将网站发布到 123-Reg 服务器并获得了与以前类似的、无法使用的体验。

到目前为止，我一直在 IE9 上进行测试，我只是碰巧用 Chrome 进行了尝试，我发现了一件有趣的事情。就在单击上传按钮之后但在页面刷新之前，Chrome 在左下角显示了一个上传完成百分比对话框。这跑到 100%，然后我的控件开始显示一些动作，然后整个页面再次开始挂起。

根据 MSDN 的[HttpPostedFile](http://msdn.microsoft.com/en-us/library/system.web.httppostedfile.aspx)：“默认情况下，所有大于 256 KB 的请求，包括表单字段和上传的文件，都会缓冲到磁盘”

那么这是否意味着我的任务是在等待上传的痛苦部分*之后开始的（这实际上发生在客户端和缓冲区之间）？*如果是这种情况，那么通过将文件发送到保管箱来使其更加痛苦是没有意义的，对吧？而我的进度条正在跟踪错误位的进度？

（今天我要检查我的代码的错误处理，因为我感觉它挂​​起的原因是因为它没有正确地从异常中恢复）。通过这样做，我确实感觉我学到了很多东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T09:18:13.223

这可能有点矫枉过正，但您可以考虑使用 BluImp 的 jQuery 文件上传工具（此处的演示站点：http://blueimp.github.com/jQuery-File-Upload/ [）](http://blueimp.github.com/jQuery-File-Upload/) - 名为 Max Pavlov 的开发人员修改了原始版本（最初用于非 dotnet 技术）用于 MVC 3。

它可以在 git hub [https://github.com/maxpavlov/jQuery-File-Upload.MVC3](https://github.com/maxpavlov/jQuery-File-Upload.MVC3)上找到。我已经在 MVC 3 和 MVC 4 Beta 中成功实现了这一点。为了让它在 MVC 4 中有效工作，我唯一要做的就是删除一些 ClientDependancy（这是一个处理 JS 和 CSS 文件的捆绑和缩小的 DLL）代码，因为这复制了 MVC 4 中已经存在的功能，但在 MVC 中没有3\. 此外，我在 GitHub 上的 wiki 上添加了一些页面，描述了我所做的事情，尽管它并不完整。如果你决定走这条路，我可以用我最近的发现更新一些细节。到目前为止，我关于 MVC 4 集成的笔记可以在这里找到[https://github.com/maxpavlov/jQuery-File-Upload.MVC3/wiki/MVC-4---EnableDefaultBundles](https://github.com/maxpavlov/jQuery-File-Upload.MVC3/wiki/MVC-4---EnableDefaultBundles)。

顺便说一句，我已经设法使用这个工具上传了大约 2Gb 的文件，并且发现它非常灵活！

# php - 无法将输入变量传递给我的查询

> ID：11779752
> 
> 赞同：0
> 
> 时间：2012-08-02T14:36:13.783
> 
> 标签：php, variables

我正在创建一个电话簿程序，我可以在其中注册并创建自己的联系人列表。登录后，页面将被定向到`tabmain`我可以查看、添加、编辑或删除联系人的页面，以多选项卡形式。

这就是问题所在：每当我单击保存按钮（函数中的按钮`displayNew`）时，它应该会获取名字和姓氏，然后查找数据库是否匹配。如果没有，那么添加它应该他们。现在，发生的情况是，在我单击保存按钮后，没有任何内容传递给变量。

这是我的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>

<title>Tab-View Sample</title>

<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="description" content="" />
<meta name="keywords"    content="" />

<link rel="stylesheet" type="text/css" href="css_collect/distribution/tab-view.css" />

</head>
<body>

<?php $id = isset($_GET['id']) ? $_GET['id'] : 1; ?>
<?php
    include 'conSql.php';
    session_start();
    $mySession = $_SESSION['user'];

    //displays firsname and lastname of the user
    $getNames = getNames($mySession);
    $gET = explode("^", $getNames);

    echo "Hi, "."<b>". $gET[0] ." ". $gET[1] ."</b>"."!";
    echo "</br>";
    echo "</br>";

?>

    <div class="TabView" id="TabView">

    <!-- ***** Tabs ************************************************************ -->

    <div class="Tabs" style="width: 452px;">
      <a <?=($id == 1) ? 'class="Current"' : 'href="sample.php?id=1"';?>>Contact List</a> 
      <a <?=($id == 2) ? 'class="Current"' : 'href="sample.php?id=2"';?>>Add contact</a>
      <a <?=($id == 3) ? 'class="Current"' : 'href="sample.php?id=3"';?>>Edit / Delete</a>
    </div>

    <!-- ***** Pages *********************************************************** -->

    <div class="Pages" style="width: 450px; height: 300px;">

      <div class="Page" style="display: <?=($id == 1) ? 'block' : 'none';?>"><div class="Pad"></div>

            list of query

      </div>
      <div class="Page" style="display: <?=($id == 2) ? 'block' : 'none';?>"><div class="Pad"></div>
            <Form Name ='' Method ='GET' action = 'tabmenu.php'>
            <?php 
                displayNew(); 
                if(isset($_GET['btnAdd'])){
                    $fname = $_GET['txtFname'];
                    $lname = $_GET['txtLname'];

                    // $s = "SELECT * ";
                    // $s .="FROM tbl_contactlist ";
                    // $s .="WHERE fname = '". $_GET['txtFname'] ."' and lname = '". $_GET['txtLname'] ."'";
                    echo $s;
                }

            ?>

      </div>
      <div class="Page" style="display: <?=($id == 3) ? 'block' : 'none';?>"><div class="Pad"></div>
            <?php 
                displayEdit(); 
            ?>  
      </div>
    </div>

    </div>

    <script type="text/javascript" src="css_collect/distribution/tab-view.js"></script>
    <script type="text/javascript">
    tabview_initialize('TabView');
    </script>

    <?php

    function getNames($mySession){
    //get the real name of the user (firstname and lastname)
        $s = "SELECT * ";
        $s .="FROM tbl_users ";
        $s .="WHERE username = '". $mySession ."' ";        
        $rc = mysql_query($s);

        $row = mysql_fetch_assoc($rc) or die();
        $details =  $row["fname"]."^".$row["lname"];
        return $details;
    }
    function displayNew(){
        echo "<table border = '0'>";
        echo "<tr>";
        echo "<td colspan='2'><b>New Contact</b></td>";
        echo "</tr>";
        echo "<tr>";
        echo "<td colspan='2'>Please fill up the fields.</td>";
        echo "</tr>";
        echo "<tr>";
        echo "<td>First Name: </td>";
        echo "<td><input type='text' name='txtFname' id='txtFname'></td>";
        echo "</tr>";
        echo "<tr>";
        echo "<td>Last Name: </td>";
        echo "<td><input type='text' name='txtLname' id='txtLname'></td>";
        echo "</tr>";
        echo "<tr>";
        echo "<td>Nick Name: </td>";
        echo "<td><input type='text' name='txtNicname' id='txtNicname'></td>";
        echo "</tr>";
        echo "<tr>";
        echo "<td>Contact Number: </td>";
        echo "<td><input type='text' name='txtContactNum' id='txtContactNum'></td>";
        echo "</tr>";
        echo "<tr>";
        echo "<td></td>";
        echo "<td><input type='submit' name='btnAdd' id='btnAdd' value='SAVE'></td>";
        echo "</tr>";
        echo "</table>";
    }
    function displayEdit(){
        echo "<table border = '0'>";
        echo "<tr>";
        echo "<td colspan='2'><b>Edit / Delete Page</b></td>";
        echo "</tr>";
        echo "<tr>";
        echo "<td colspan='2'>You can edit or delete:</td>";
        echo "</tr>";
        echo "<tr>";
        echo "<td>First Name: </td>";
        echo "<td><input type='text' name='txtFname' id='txtFname'></td>";
        echo "</tr>";
        echo "<tr>";
        echo "<td>Last Name: </td>";
        echo "<td><input type='text' name='txtLname' id='txtLname'></td>";
        echo "</tr>";
        echo "<tr>";
        echo "<td>Nick Name: </td>";
        echo "<td><input type='text' name='txtNicname' id='txtNicname'></td>";
        echo "</tr>";
        echo "<tr>";
        echo "<td>Contact Number: </td>";
        echo "<td><input type='text' name='txtContactNum' id='txtContactNum'></td>";
        echo "</tr>";
        echo "<tr>";
        echo "<td></td>";
        echo "<td><input type='submit' name='btnEdit' id='btnEdit' value='EDIT'>";
        echo "<input type='submit' name='btnDelete' id='btnDelete' value='DELETE'></td>";
        echo "</tr>";
        echo "<tr>";
        echo "<td></td>";
        echo "<td><input type='submit' name='btnCancel' id='btnCancel' value='Cancel'></td>";
        echo "</tr>";
        echo "</table>";
    }
    function testMe(){
                echo "<script type='text/javascript'>\n";
                echo "alert('T E S T');\n";
                echo "</script>";
    }

    ?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:43:22.493

看起来您从未关闭`form`HTML 中的标签，这可能会导致页面在您单击提交时不执行任何操作

# c++ - 将 32 个字符的字符串分成 4 组，每组 8 个

> ID：11779755
> 
> 赞同：1
> 
> 时间：2012-08-02T14:36:17.313
> 
> 标签：c++, python, string

我有一个看起来像这样的字符串：

```
str = "751CEC132EB348978013CE7AF8375137" 
```

它有 32 个字符长。我想修改它看起来像这样：

```
{0x751CEC13,0x2EB34897,0x8013CE7A,0xF8375137} 
```

我知道，如果我可以将字符串分成 4 组（每组 8 个字符），我可以使用这些组和字符串流轻松构造所需的字符串。

在 python 中执行此操作的一种简单方法是执行此操作：

```
'{0x%s,0x%s,0x%s,0x%s}'%(str[0:8],str[8:16], str[16:24], str[24:32]) 
```

我怎样才能在 C++ 中做到这一点？我对像“sscanf”这样的低级函数不是很熟悉，但听起来它们可以派上用场。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-02T14:39:01.363

```
string strarray[4];
strarray[0] = "0x" + str.substr(0, 8);
strarray[1] = "0x" + str.substr(8, 8);
strarray[2] = "0x" + str.substr(16, 8);
strarray[3] = "0x" + str.substr(24, 8); 
```

如果`{0x751CEC13,0x2EB34897,0x8013CE7A,0xF8375137}`是一个完整的字符串，则使用以下行代替：

```
ostringstream strm;
strm << "{" << "0x" << str.substr(0, 8) << ",0x" << str.substr(8, 8)
            << ",0x" << str.substr(16, 8) << ",0x" << str.substr(24, 8) << "}";
str = strm.str(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-02T14:41:39.890

它在 C/C++ 中非常相似：

```
const char* str = "751CEC132EB348978013CE7AF8375137";
char parts[4][9];
sscanf(str, "%8s%8s%8s%8s", parts[0], parts[1], parts[2], parts[3]);
char out[64];
sprintf(out, "0x%s, 0x%s, 0x%s, 0x%s", parts[0], parts[1], parts[2], parts[3]);
cout << out << endl; 
```

[链接](http://ideone.com/Upxet)到ideone实现。

# android - 如何取消订阅 onTouch() 事件

> ID：11779758
> 
> 赞同：1
> 
> 时间：2012-08-02T14:36:20.720
> 
> 标签：android, ontouchlistener

当应用程序启动时，我会运行一个自定义弹出窗口，直到用户触摸屏幕。当屏幕被触摸时，我用事件 onTouch() 捕捉它并取消弹出窗口。从这一点开始，我不再需要这个事件了。问题是事件是活跃的，并且每次用户触摸屏幕时都会继续跳跃。有什么办法可以退订这个活动吗？类似于 c# -= eventName. 代码如下：

```
 @Override
public boolean onTouch(View v, MotionEvent event) {
    if (!_stopToast)
    {
    _hintToast.cancel();
    _stopToast = true;
    }
    return false;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:51:07.517

没有这样的方法（比如说*removeTouchListener*或类似方法）可以帮助您从视图中删除已定义的触摸侦听器。设置`null`为**setOnTouchListener**也无济于事。您可以做的是创建一个新的`OnTouchListener`类的对象引用，它什么都不做，并将其设置在**setOnTouchListener**中。例如：

```
public final OnTouchListener dummyOnTouchListener = new OnTouchListener() {
    @Override
    public boolean onTouch(View v, MotionEvent rawEvent) {
        return false;
    }
}; 
```

并简单地使用它如下：

```
yourView.setOnTouchListener(dummyOnTouchListener); 
```

# android - 在android中获取触摸形状

> ID：11779761
> 
> 赞同：1
> 
> 时间：2012-08-02T14:36:30.823
> 
> 标签：android, touch

我正在创建一个应用程序，我想在我的屏幕上绘制触摸事件的形状。有任何 ApI 来特别获取触摸事件的形状吗？

非常感谢任何示例或代码片段。

谢谢纳拉扬

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:12:29.640

此代码段应该实现您想要的：

```
public class TestActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(new DrawingView(this));
    }

    class DrawingView extends SurfaceView {

        private final SurfaceHolder surfaceHolder;
        private final Path path = new Path();
        private final Paint paint = new Paint(Paint.ANTI_ALIAS_FLAG);

        public DrawingView(Context context) {
            super(context);
            surfaceHolder = getHolder();
            paint.setStyle(Paint.Style.STROKE);
            paint.setStrokeWidth(3);
            paint.setColor(Color.WHITE);
        }

        @Override
        public boolean onTouchEvent(MotionEvent event) {
            switch(event.getAction()) {
            case MotionEvent.ACTION_DOWN:
                path.moveTo(event.getX(), event.getY());
                break;
            case MotionEvent.ACTION_MOVE:
                if (surfaceHolder.getSurface().isValid()) {
                    Canvas canvas = surfaceHolder.lockCanvas();
                    path.lineTo(event.getX(), event.getY());
                    canvas.drawPath(path, paint);
                    surfaceHolder.unlockCanvasAndPost(canvas);
                }
                break;
            }
            return true;
        }

    }

} 
```

# python - 从 C 函数到 Python 的矩阵

> ID：11779767
> 
> 赞同：2
> 
> 时间：2012-08-02T14:36:38.207
> 
> 标签：python, function, matrix, return, ctypes

我正在使用 python 和 ctypes。我有一个 C 函数将四元数（类似于虚数）转换为矩阵。我知道，在类似参数的函数中发送结果变量是不好的语气，所以我怎样才能将矩阵返回到类型数组 c_float*16 中的 python 代码。

```
float* QuaternionToMatrix(Quaternion q)
{
    float matrix[16];

    matrix[ 0] = 1.0f - 2.0f * ( q.y * q.y + q.z * q.z );
    matrix[ 1] = 2.0f * (q.x * q.y + q.z * q.w);
    matrix[ 2] = 2.0f * (q.x * q.z - q.y * q.w);
    matrix[ 3] = 0.0f;

    matrix[ 4] = 2.0f * ( q.x * q.y - q.z * q.w );
    matrix[ 5] = 1.0f - 2.0f * ( q.x * q.x + q.z * q.z );
    matrix[ 6] = 2.0f * (q.z * q.y + q.x * q.w );
    matrix[ 7] = 0.0f;

    matrix[ 8] = 2.0f * ( q.x * q.z + q.y * q.w );
    matrix[ 9] = 2.0f * ( q.y * q.z - q.x * q.w );
    matrix[10] = 1.0f - 2.0f * ( q.x * q.x + q.y * q.y );
    matrix[11] = 0.0f;

    matrix[12] = 0;
    matrix[13] = 0;
    matrix[14] = 0;
    matrix[15] = 1.0f;

    float* a = matrix;

    return a;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T16:13:12.520

您正在返回一个指向局部变量的指针。这将导致内存损坏。我建议创建一个`struct`封装矩阵并返回：

```
typedef struct matrix {
    float data[16];
} matrix;

matrix QuaternionToMatrix(Quaternion q) {
    ...
} 
```

因为这将导致复制一些内存量（c. 512 字节），所以最好将矩阵作为输出参数传递：

```
void QuaternionToMatrix(Quaternion q, matrix *matrix) {
    ...
} 
```

# xcode - 如何将 Ctags 支持添加到 Xcode 项目？

> ID：11779778
> 
> 赞同：0
> 
> 时间：2012-08-02T14:36:59.020
> 
> 标签：xcode, cocoa, ctags, exuberant-ctags

我想在我的应用程序中提供标签概述，我想为此使用 Ctags。

我下载了[Ctags](http://sourceforge.net/projects/ctags/)源包并构建了它。现在，如何将它添加到现有的 Xcode 项目中？

或者，也许 Xcode/Cocoa 存在一些 Ctags 的替代品？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:39:36.437

您可以调用跨源代码运行的脚本`ctags`作为*构建阶段*步骤。

你没有提到你想如何查看输出`ctags`？

# python - JSON 编码 Python 类列表

> ID：11779779
> 
> 赞同：1
> 
> 时间：2012-08-02T14:37:04.473
> 
> 标签：python, json, class

我已经阅读了一些解决类似问题的问题，但想问一下这个问题。

我有两个 Python 类，在这里简化：

```
class Service:
    def __init__(self):
        self.ServiceName = None
        self.ServiceExpDate = None

class Provision:
    def __init__(self):
        self.ID = None
        self.Type = None
        self.Services = [] # a list of Service objects 
```

当我去 JSON 编码 Provision 类的一个实例时：

```
jsonProvision = json.dumps(provision.__dict__) 
```

如果我没有任何服务，我会得到正确的输出，但如果它尝试序列化服务类，我会得到：

```
TypeError: <common.Service instance at 0x123d7e8> is not JSON serializable 
```

我需要编写一个 JSON 编码器来直接处理这个问题，还是有更好的方法来序列化 Service 类？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T10:06:13.270

您需要提供一个函数来将您的自定义类编码`default`为`json.dumps()`. 类的示例代码：

```
import json

class JSONEncodable(object):
    def json(self):
        return vars(self)

class Service(JSONEncodable):
    def __init__(self):
        self.ServiceName = None
        self.ServiceExpDate = None

class Provision(JSONEncodable):
    def __init__(self):
        self.ID = None
        self.Type = None
        self.Services = [] # a list of Service objects 
```

示例用法：

```
>>> from operator import methodcaller
>>> p = Provision()
>>> p.Services.append(Service())
>>> print json.dumps(p, default=methodcaller("json"))
{"Services": [{"ServiceName": null, "ServiceExpDate": null}], "Type": null, "ID": null} 
```

您也可以使用`default=attrgetter("__dict__")`来避免每个类都需要一个`json()`方法，但上述方法更灵活。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T14:49:18.600

您应该编写一个处理您的类的编码器，这就是`json`模块的使用/扩展方式。

`__dict__`您对类实例进行编码的尝试`Provision`现在可能有效，但如果您的类不断发展，这确实不是未来的证明。

# php - 带有ajax可编辑文本区域的htmlentities

> ID：11779781
> 
> 赞同：1
> 
> 时间：2012-08-02T14:37:12.247
> 
> 标签：php, jquery, textarea, html-entities

以下是用户可以在我的网站上使用的工作流程示例：

1.  创建一个包含内容的任务：我`htmlentities`用来对内容进行编码并将其存储在我的数据库中（是的，我决定存储编码的内容）；

2.  用户稍后返回并单击以查看任务。问题是，内容的预览是在禁用的文本区域中完成的。

    *   我尝试`htmlentities_decode`在 textarea 中打印内容时使用（如果用户输入了不好的东西，XSS 问题）；

    *   我只是打印编码的文本，一切都很好。

3.  用户点击*EDIT*，这将使`textarea`可编辑

4.  用户点击*SAVE*。

这是我的主要问题，因为我在打印之前没有解码文本，它仍然是编码的，当用户保存它时，它会被重新编码。所以，前面的内容是双重编码的。

因此，如果用户第一次输入如下内容：

```
blablabla  </textarea/> yeah! 
```

然后，它被编码，结果是：

```
blablabla  &lt;/textarea/&gt; yeah! 
```

然后，当我显示它时，它会显示为用户之前输入的内容，但如果他保存它，结果是：

```
blablabla &amp;lt;/textarea/&amp;gt; yeah! 
```

因此，如果他再次显示它，它不会很好地显示（并且随着用户不断编辑他的任务，它也会在我的数据库中占用越来越多的空间）。

好吧，我相信这是很多人都遇到过的问题，但我找不到任何好的解决方案。

顺便说一句，我正在使用`htmlentities`with `ENT_QUOTES`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T15:54:12.540

> 啊，这是我的主要问题，因为我在打印之前没有解码文本，它仍然是编码的，当用户保存它时，它会被重新编码。所以，前面的内容是双重编码的。

这实际上是正确的，您不应该在打印之前*解码文本。*实际上，在 HTML 页面中输出时*必须*进行 HTML 编码。当用户提交它时，它仍然没有被编码，因为浏览器已经解释了 HTML 实体。

除非...您在 DOM 中创建一个 TEXT_NODE 并将编码数据分配给它（在 textarea 中）？在这种情况下，浏览器将不会解释 HTML 实体，您最终将重新提交已编码的数据。`innerHTML`如果是这种情况，请改为分配给属性。但是，在提交数据之前，最终用户（在第一次编辑时）在表单中可以清楚地看到 HTML 实体，这似乎不是这种情况？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T13:05:24.413

嗯，我解决了我的问题。我没有注意到，但对于第一个条目，我使用的是 htmlentities()，而在编辑时，我使用的是 Zend escape() 函数。仅使用 htmlentities() 解决了这个问题。我不知道 ZF 的 escape() 函数是如何工作的，但我以后不会使用它：p

谢谢你的回答:)

无论如何，所以，我想知道 htmlentities_decode() 函数，应该在什么情况下使用它？当我获取表单并像这样打印它时，我使用 htmlentities()，我从不使用 htmlentities_decode()。这正常吗？所以我想知道这个功能是做什么用的？

再次感谢！

# java - 你能用 Java 编写一个需要无参数构造函数或工厂的接口吗？

> ID：11779789
> 
> 赞同：1
> 
> 时间：2012-08-02T14:37:27.313
> 
> 标签：java, inheritance, constructor, factory-pattern

在Java中，有没有办法强制任何实现接口的类都具有无参数构造函数的约束？如果不能，你可以强制它有一个返回类实例的工厂吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T14:38:52.580

> 在Java中，有没有办法强制任何实现接口的类都具有无参数构造函数的约束？

不是在编译时，不是。

> 如果不能，你可以强制它有一个返回类实例的工厂吗？

不是在编译时，不是。

当然，单元测试可以同时检查这两种情况，前提是您可以确定要检查的类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T14:39:13.860

不，对双方。不过，一般来说，您既不想也不需要这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T15:12:55.103

不在接口上，但是可以写一个带有工厂方法的类：

```
public abstract class Foo {

    private Foo() {}

    public static Bar createBar() {
        return new BarImpl();
    }

}

public interface Bar {}

Bar myBar = Foo.createBar(); 
```

这就是Java 在Calendar.java 等类上公开其工厂方法的方式。

# mysql - 如果违反mysql中的约束则插入null？

> ID：11779791
> 
> 赞同：0
> 
> 时间：2012-08-02T14:37:36.797
> 
> 标签：mysql, foreign-keys

我有一个国家，比如说用户表，如果提交的国家与约束不匹配，我想要一个空值来代替。

```
create table countries(
    ccode char(2), primary key (ccode)
);

create table users(
    ccode char(2), foreign key (ccode) references countries(ccode)
);

insert into countries values('ru'),('us'),('hk'); 
```

现在，如果用户提交了一个不存在的代码，例如：

```
insert into users values('xx'); 
```

*   由于 fk 约束，查询实际上会失败。但我希望它写一个空值。我们应该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T16:22:31.913

回答我自己的问题看起来是这样的：

（但如果您提出更好的答案，我当然会接受）

```
insert into users values((select ccode from countries where ccode='x')); 
```

^ 这将返回一个代码，如果它不匹配则返回一个 null - 这就是我想要的。

# math - 如何检测开放网格 3d 模型的边界顶点？

> ID：11779797
> 
> 赞同：7
> 
> 时间：2012-08-02T14:37:56.570
> 
> 标签：math, graphics, geometry, computational-geometry, vertex

表面网格模型有两种，一种是球体或立方体的封闭网格，另一种是开放网格模型，这意味着模型的表面不是闭环。它像空心管一样从某个地方打开。Sp 我想要的是我想检测开放网格模型的边界顶点。闭环网格中没有边界，但在开放网格中，我们必须检测边界顶点以进行一些平滑、细分等操作。请建议我如何选择/检测边界顶点？这样做的最佳方法是什么？通过比较三角形的边缘？给我一些想法？

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-02T17:23:27.487

假设你有一个流形网格，那么网格的边界是那些只属于一个多边形的边。不在边界上的边将属于两个多边形。边界顶点是属于边界边的顶点。

找到边界顶点的一种简单方法是遍历所有边，计算它们属于多少个多边形，如果它们只属于一个多边形，则将边的顶点收集为边界顶点。但是，您必须从集合中删除重复的顶点。

第二种方法是让您的网格数据结构在将每条边添加到网格中或将多边形附加到特定边时检查它们。通过这种方式，网格数据结构可以为您保留最新的边界边缘列表，这样当您需要边缘时，您就不必每次都找到它们。这将大大减少确定边界边的开销，尽管插入边和多边形会*稍微*贵一些。您的网格数据结构也会占用更多内存。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-02T15:40:02.227

假设您的网格是 2D（或 2.5D）规则的、构造良好的三角剖分。您可以使用此处列出的一些属性：http: [//graphics.stanford.edu/courses/cs468-10-fall/LectureSlides/02_Basics.pdf](http://graphics.stanford.edu/courses/cs468-10-fall/LectureSlides/02_Basics.pdf)

第 9 页将顶点的度数（或价数）定义为入射边的数量。如图所示，所有边界顶点都有 4 个入射边。“内部”顶点有 5 个入射边。

第 17 页将边界边定义为恰好与一个面相邻的边。

您可能会发现第 22 页上的讨论很有帮助（封闭的 2 流形三角形网格）

# java - java swing jlist数据传输

> ID：11779798
> 
> 赞同：1
> 
> 时间：2012-08-02T14:38:00.740
> 
> 标签：java, swing, jlist

**jList2.setListData(jList1.getSelectedValues());**
我用它来将数据从 jlist1 传输到 jlist2。但我想从 jlist1 中删除传输的数据。怎么可能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:51:23.213

首先：`getSelectedValues()`已弃用，使用`getSelectedValuesList()`泛型将它们作为列表获取。

其次，在创建 JList 之前创建一个 DefaultListModel，以便您可以添加/删除它，例如

```
DefaultListModel<String> model = new DefaultListModel<String>();
DefaultListModel<String> model2 = new DefaultListModel<String>();
JList<String> list1 = new JList<>(model);
JList<String> list2 = new JList<>(model2);

...

for(String s : list1.getSelectedValuesList()){
    model2.addElement(s);
    model.removeElement(s);
} 
```

请记住，列表和模型的更改**必须**在事件调度线程上执行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T14:52:28.830

有两种方法

*   在 Oracle 页面上查看 Drag an Drop 教程

*   在 mouseDragged 上从一个 JList 中删除 selectedItem 并增加秒数，注意这个想法需要更好地了解 Java Swing

# java - Java swing - 填充大小

> ID：11779800
> 
> 赞同：2
> 
> 时间：2012-08-02T14:38:04.990
> 
> 标签：java, swing

在 Swing 中指定组件的高度和宽度时，有没有办法设置给定对象应填充可用的垂直/水平空间？即我想说`setSize(*, 100)`允许水平填充。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T14:44:27.287

您可以`setSize`随心所欲地调用，但最终`LayoutManager`由父级`Container`决定每个组件的位置和大小。

因此，通过使用正确的`LayoutManager`，您通常可以成功地让组件占据所有可用宽度。正如您在[LayoutManagers](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html#border)教程的可视化指南`BorderLayout`部分中看到的那样，并采用所有可用宽度。`PAGE_START``PAGE_END`

通过将高度指定为首选尺寸，您将获得所需的结果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T14:43:26.897

[BorderLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/border.html)可能是您想要使用的，它允许您将组件设置为北、西、南、东和中心。

因此，对于水平填充，使用 NORTH，对于垂直填充，使用 WEST 和 CENTER。

# css - 将带有背景图像的 div 覆盖在带有照片的 div 上

> ID：11779802
> 
> 赞同：0
> 
> 时间：2012-08-02T14:38:10.953
> 
> 标签：css, overlay, background-image

我正在尝试将具有背景图像的 div 覆盖在包含使用图像标签的照片的 div 上。带有背景图像的 div 是必需的，因为 # 将出现在该 div 中的 bg 图像上方，并且这两个都将出现在照片的顶部。

简单来说：我试图将一个 div 放在另一个 div 之上。抱歉，我还无法对图像进行绝对路径，但我认为一个概念无论如何都会起作用。

我的代码是：

```
<div id="contestLeaders">
    <div class="leader"><img src="css/images/chili-photo.jpg" width="138" height="138" /></div>
    <div class="leader"><img src="css/images/chili-photo2.jpg" width="138" height="138" /></div>
    <div class="leader"><img src="css/images/chili-photo3.jpg" width="138" height="138" /></div>
    <div class="leader"><img src="css/images/chili-photo4.jpg" width="138" height="138" /></div>
    <div class="leader"><img src="css/images/chili-photo5.jpg" width="138" height="138" /></div>
</div>
<div class="leaderRating">5.0</div> 
```

CSS：

```
#contestLeaders {overflow:hidden;}
#contestLeaders .leader {float:left; margin-right:4px;}
.leaderRating {background:url(images/leader-rating-bg.png) no-repeat; width:138px; height:37px; color:#fff;font-size:18px;padding:10px 0px 0px 35px;} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T15:32:16.107

感谢大家的帮助。这就是我设法使它工作的方法：

**CSS**

```
#contestLeaders
{
    overflow:hidden;
    margin-bottom:30px;
    position: relative;
}
.leader
{
    float:left;
    margin-right:4px;
}
.leaderRating
{
    background:url(images/leader-rating-bg.png) no-repeat;
    width:138px;
    height:37px;
    color:#fff;
    font-size:18px;
    padding:10px 0px 0px 35px;
    position: absolute;
    top:90px;
} 
```

**HTML**

```
<div id="contestLeaders">
    <div class="leader"><div class="leaderRating">5.0</div><img src="css/images/chili-photo.jpg" width="138" height="138" /></div>
    <div class="leader"><div class="leaderRating">4.7</div><img src="css/images/chili-photo2.jpg" width="138" height="138" /></div>
    <div class="leader"><div class="leaderRating">4.2</div><img src="css/images/chili-photo3.jpg" width="138" height="138" /></div>
    <div class="leader"><div class="leaderRating">3.5</div><img src="css/images/chili-photo4.jpg" width="138" height="138" /></div>
    <div class="leader"><div class="leaderRating">2.8</div><img src="css/images/chili-photo5.jpg" width="138" height="138" /></div>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T15:06:07.767

我想您希望 .leaderRating DIV 位于其他带有图像的 DIV 之上。要实现这一点，请尝试以下修改：

*   将覆盖的 DIV (.leaderRating) 放入主容器 (#contestLeaders)
*   添加以下 CSS 样式： { position: relative; } 用于容器和 { position: absolute; 顶部：0；} 用于覆盖

这样，您就可以相对于容器对叠加层进行绝对定位。最后，您应该想出以下代码：

HTML：

 `````
<div id="contestLeaders">
                    <div class="leader"><img src="css/images/chili-photo.jpg" width="138" height="138" /></div>
                    <div class="leader"><img src="css/images/chili-photo2.jpg" width="138" height="138" /></div>
                    <div class="leader"><img src="css/images/chili-photo3.jpg" width="138" height="138" /></div>
                    <div class="leader"><img src="css/images/chili-photo4.jpg" width="138" height="138" /></div>
                    <div class="leader"><img src="css/images/chili-photo5.jpg" width="138" height="138" /></div>

                    <div class="leaderRating">5.0</div>

                </div> 
````  `CSS：

```
    #contestLeaders {溢出：隐藏；位置：相对；}
    #contestLeaders .leader {浮动：左；边距右：4px;}
    .leaderRating {background:url(images/leader-rating-bg.png) 不重复；宽度：138px；高度：37px；颜色：#fff；字体大小：18px；填充：10px 0px 0px 35px；位置：绝对；顶部：0；}

`````

# javascript - 如何将 PhoneGap 与 Worklight 一起使用？

> ID：11779803
> 
> 赞同：0
> 
> 时间：2012-08-02T14:38:11.437
> 
> 标签：javascript, iphone, html, cordova, ibm-mobilefirst

我想知道Worklight 如何使用PhoneGap，因为这是我很快需要做的事情。我听说PhoneGap 是“内置”Worklight。如果是这样，我是否必须声明我正在使用它，如下所示？：

```
<script type="text/javascript" charset="utf-8" src="cordova-1.9.0.js"></script> 
```

就此而言，如果我必须声明它，我怎么知道它使用的是哪个版本的 PhoneGap？如果我不必声明它，它会只识别我的 PhoneGap 通话吗？

对此的任何建议都会非常棒，因为我无法在 Worklight 或 PhoneGap 网站上找到答案。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T19:28:19.160

最新的 Worklight 有一个 Cordova（以前称为 PhoneGap）1.6.1 一旦你构建了你的 iOS/Android 应用程序，它就会自动嵌入，所以你真的不需要手动添加它的 JS。您的所有 Cordova 呼叫都将被识别。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T05:40:19.437

@creights 不需要将 Cordova.js 内部添加到您的 Worklight 应用程序中。默认情况下，Cordova 插件包含在您的 Worklight 应用程序中。例如，您只需使用相机、加速器等插件的功能，我有一段代码如何在您的工作灯应用程序中包含相机。

```
function takePicture() {

    navigator.camera.getPicture(
        function(data) {
            var img = dom.byId('camera_image');
            img.style.visibility = "visible";
            img.style.display = "block";
            //img.src = "data:image/jpeg;base64," + data;
            img.src = data;
            dom.byId('camera_status').innerHTML = "Success";
        },
        function(e) {
            console.log("Error getting picture: " + e);
            dom.byId('camera_status').innerHTML = e;
            dom.byId('camera_image').style.display = "none";
        },
        { quality: 50, destinationType: navigator.camera.DestinationType.FILE_URI, sourceType : navigator.camera.PictureSourceType.CAMERA});
}; 
```

只需将代码复制到您的 js 文件夹中的 AppMain.js 中即可。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T17:40:39.097

只是为了更新，IBM Worklight 上的最新版本是 PhoneGap 2.2。它刚刚发生在本月（2012 年 12 月）。当您编写代码时，它将自动填充（在默认首选项上）。

例如，键入 navigator.noti.... 将弹出警报和确认调用的通知选项及其参数（带有一些注释）。

# sql-server - SQL Server检查一天是否不在周末，如果是，则迭代到工作日

> ID：11779804
> 
> 赞同：3
> 
> 时间：2012-08-02T14:38:13.417
> 
> 标签：sql-server, tsql

我正在使用带有 t-Sql 的 SQL Server 我有以下代码来检查日期是否在周末，如果是，它将迭代直到这一天在工作日

```
 Declare @ProDate as Date
    set @ProDate = '08/05/12'

    WHILE (DATEPART(DW, @ProDate) =  1 OR DATEPART(DW, @ProDate) =  7 )
    BEGIN

      set @ProDate =  DATEADD(day, 1, @ProDate)

    END

    select @ProDate 
```

该代码似乎有效。想知道我是否遗漏了什么，或者是否有更好的方法来处理这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T14:48:33.990

此代码取决于`DATEFIRST`您系统中的设置。

我会`SET DATEFIRST 7`在日期检查之前添加一个

或者，这避免了 while 循环

```
declare @df int = @@Datefirst       
set datefirst 1     
select 
    case when DATEPART(DW, @ProDate)>=6 then 
        DATEADD(d, 8-DATEPART(DW, @ProDate), @prodate)
    else @ProDate
    end    
set DATEFIRST @df 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T14:46:57.333

此代码将起作用。它几乎与我们在大量使用的函数中使用的代码相同。

我可能有的唯一建议是您需要整合假日支票吗？我们有一个 Holiday 表来存储也需要跳过的日期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-04T07:55:08.183

排除周末和节假日后，使用以下代码获取下一个工作日期

```
Declare @AddDay as integer = 3
Declare @NextWorkingDate  DateTime
Declare @StartDate  DateTime = Cast(getdate() as date)

While  @AddDay > 0 
    begin

        Select @NextWorkingDate =  @StartDate + @AddDay +
        (datediff(wk, @StartDate, @StartDate+ @AddDay  ) * 2) -- add weekend 

        --Exclude weekend
        If datepart(dw,@NextWorkingDate ) = 1 or datepart(dw,@NextWorkingDate ) = 7  --Add 2 days if target date is either Saturday or Sunday
            set @NextWorkingDate = @NextWorkingDate + 2 

        --Count no of holidays if falling within start date and nextwrking date
        Select @AddDay = Count(*)  from HolidayTable ST --Holiday list
                    where ST.OffDate between @StartDate+1 and @NextWorkingDate
        Set @StartDate = @NextWorkingDate
    End         

Select @NextWorkingDate 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-04T10:53:50.343

在下面使用以排除周末和节假日

```
Declare @AddDay as integer = 3
Declare @NextWorkingDate  DateTime
Declare @StartDate  DateTime = Cast(getdate() as date)

While  @AddDay > 0 
    begin

        Select @NextWorkingDate =  @StartDate + @AddDay +
        (datediff(wk, @StartDate, @StartDate+ @AddDay  ) * 2) -- add weekend 

        --Exclude weekend
        If datepart(dw,@NextWorkingDate ) = 1 or datepart(dw,@NextWorkingDate ) = 7  --Add 2 days if target date is either Saturday or Sunday
            set @NextWorkingDate = @NextWorkingDate + 2 

        --Count no of holidays if falling within Hold days/Deposit days
        Select @AddDay = Count(*)  from HolidayTable ST --Holiday list
                    where ST.OffDate between @StartDate+1 and @NextWorkingDate
        Set @StartDate = @NextWorkingDate
    End         

Select @NextWorkingDate 
```

# c# - 反转图像返回黑色图像

> ID：11779809
> 
> 赞同：2
> 
> 时间：2012-08-02T14:38:32.057
> 
> 标签：c#, .net, image-processing, gdi+

我想反转一个 Image 对象。目前我的代码如下所示：

```
 private Image Invert(Image img)
    {
        var bmpPicture = new Bitmap(img.Width, img.Height);
        var iaPicture = new ImageAttributes();
        var cmPicture = new ColorMatrix { Matrix00 = -1, Matrix11 = -1, Matrix22 = -1 };
        iaPicture.SetColorMatrix(cmPicture);
        var gfxPicture = Graphics.FromImage(img);
        var rctPicture = new Rectangle(0, 0, img.Width, img.Height);
        gfxPicture.DrawImage(img, rctPicture, 0, 0, img.Width, img.Height, GraphicsUnit.Pixel, iaPicture);
        return bmpPicture;
    } 
```

但是，当我运行它并在 a 中显示它时`PictureBox`，结果是黑色图像。我在 Windows 8 Release preview 下的 Visual Studio 2012 中运行它。如果有更好的方法来做到这一点，请告诉我。谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-02T16:09:55.653

试试这个： http: [//mariusbancila.ro/blog/2009/11/13/using-colormatrix-for-creating-negative-image/](http://mariusbancila.ro/blog/2009/11/13/using-colormatrix-for-creating-negative-image/)

```
public Bitmap Transform(Bitmap source)
{
    //create a blank bitmap the same size as original
    Bitmap newBitmap = new Bitmap(source.Width, source.Height);

    //get a graphics object from the new image
    Graphics g = Graphics.FromImage(newBitmap);

    // create the negative color matrix
    ColorMatrix colorMatrix = new ColorMatrix(new float[][]
    {
        new float[] {-1, 0, 0, 0, 0},
        new float[] {0, -1, 0, 0, 0},
        new float[] {0, 0, -1, 0, 0},
        new float[] {0, 0, 0, 1, 0},
        new float[] {1, 1, 1, 0, 1}
    }); 

    // create some image attributes
    ImageAttributes attributes = new ImageAttributes();

    attributes.SetColorMatrix(colorMatrix);

    g.DrawImage(source, new Rectangle(0, 0, source.Width, source.Height),
                0, 0, source.Width, source.Height, GraphicsUnit.Pixel, attributes);

    //dispose the Graphics object
    g.Dispose();

    return newBitmap;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-23T23:41:59.767

使用 ColorMatrix 进行像素操作的快速替代方法：

```
public static void BitmapInvertColors(Bitmap bitmapImage)
{
    var bitmapRead   = bitmapImage.LockBits(new Rectangle(0, 0, bitmapImage.Width, bitmapImage.Height), ImageLockMode.ReadOnly, PixelFormat.Format32bppPArgb);
    var bitmapLength = bitmapRead.Stride * bitmapRead.Height;
    var bitmapBGRA   = new byte[bitmapLength];
    Marshal.Copy(bitmapRead.Scan0, bitmapBGRA, 0, bitmapLength);
    bitmapImage.UnlockBits(bitmapRead);

    for (int i = 0; i < bitmapLength; i += 4)
    {
        bitmapBGRA[i]     = (byte)(255 - bitmapBGRA[i]);
        bitmapBGRA[i + 1] = (byte)(255 - bitmapBGRA[i + 1]);
        bitmapBGRA[i + 2] = (byte)(255 - bitmapBGRA[i + 2]);
        //        [i + 3] = ALPHA.
    }

    var bitmapWrite = bitmapImage.LockBits(new Rectangle(0, 0, bitmapImage.Width, bitmapImage.Height), ImageLockMode.WriteOnly, PixelFormat.Format32bppPArgb);
    Marshal.Copy(bitmapBGRA, 0, bitmapWrite.Scan0, bitmapLength);
    bitmapImage.UnlockBits(bitmapWrite);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-19T23:41:55.720

丹的答案的VB版本。它就像一个魅力！

```
 Public Function Transform(source As Bitmap) As Bitmap
    'create a blank bitmap the same size as original
    Dim newBitmap As New Bitmap(source.Width, source.Height)

    'get a graphics object from the new image
    Dim g As Graphics = Graphics.FromImage(newBitmap)

    ' create the negative color matrix
    Dim colorMatrix As New ColorMatrix(New Single()() {New Single() {-1, 0, 0, 0, 0}, New Single() {0, -1, 0, 0, 0}, New Single() {0, 0, -1, 0, 0}, New Single() {0, 0, 0, 1, 0}, New Single() {1, 1, 1, 0, 1}})

    ' create some image attributes
    Dim attributes As New ImageAttributes()

    attributes.SetColorMatrix(colorMatrix)

    g.DrawImage(source, New Rectangle(0, 0, source.Width, source.Height), 0, 0, source.Width, source.Height, _
        GraphicsUnit.Pixel, attributes)

    'dispose the Graphics object
    g.Dispose()

    Return newBitmap
End Function 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T14:42:13.183

通过反转，您的意思是创建一个负数吗？如果是，这里是一个片段：

```
public void ApplyInvert()
{
    byte A, R, G, B;
    Color pixelColor;

    for (int y = 0; y < bitmapImage.Height; y++)
    {
        for (int x = 0; x < bitmapImage.Width; x++)
        {
            pixelColor = bitmapImage.GetPixel(x, y);
            A = pixelColor.A;
            R = (byte)(255 - pixelColor.R);
            G = (byte)(255 - pixelColor.G);
            B = (byte)(255 - pixelColor.B);
            bitmapImage.SetPixel(x, y, Color.FromArgb((int)A, (int)R, (int)G, (int)B));
        }
    }

} 
```

来自：[http ://www.smokycogs.com/blog/image-processing-in-c-sharp-inverting-an-image/](http://www.smokycogs.com/blog/image-processing-in-c-sharp-inverting-an-image/)

如果您想了解更多关于您的问题和颜色矩阵的信息，请继续访问以下链接：[https ://web.archive.org/web/20141230042200/http://bobpowell.net/negativeimage.aspx](https://web.archive.org/web/20141230042200/http://bobpowell.net/negativeimage.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T14:44:23.900

你没有设置`Matrix33`或`Matrix44`。我的理解是这`Matrix33`将是 alpha 组件，所以我怀疑你正在让你的整个图像透明。

尝试设置`Matrix33 = 1`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-09T23:04:36.020

我使用“SIMD 支持的向量”使代码比指针更快。它在 System.Numerics 命名空间下。但在使用这些类之前，您需要从 NuGet 获取 System.Numerics 的更新。只需搜索 System.Numerics。无论如何，这就是我的反转图像的类

```
public class VBitmap : IDisposable
{        

    public short Width { get; private set; }
    public short Height { get; private set; }
    public int Stride { get; private set; }
    public int PixelLenght { get; private set; }
    public byte BytesperPixel { get; private set; }
    public PixelFormat PixelFormat { get; private set; }
    public byte[] Pixels { get; private set; }

    public VBitmap(string path)
    {
        using (Bitmap bmp = new Bitmap(path))
        {
            BitmapData bmpdata = bmp.LockBits(new Rectangle(0, 0, bmp.Width, bmp.Height), ImageLockMode.ReadOnly, bmp.PixelFormat);
            Width = checked((short)bmp.Width);
            Height = checked((short)bmp.Height);
            Stride = bmpdata.Stride;
            PixelLenght = Stride * Height;
            BytesperPixel = checked((byte)(Stride / Width));
            PixelLenght = (PixelLenght % 16) != 0 ? PixelLenght + (PixelLenght % 16) : PixelLenght;
            PixelFormat = bmp.PixelFormat;
            Pixels = new byte[PixelLenght];

            Marshal.Copy(bmpdata.Scan0, Pixels, 0, PixelLenght);
            bmp.UnlockBits(bmpdata);
        }
    }
    ~VBitmap()
    {
        Dispose();
    }

    public void InvertPixels()
    {
        byte[] resultarray = Pixels;
        unsafe
        {
            fixed (byte* result_ptr = resultarray)
            {
                for (int i = 0; i < PixelLenght; i += 16)
                    (~new Vector<byte>(Pixels, i)).CopyTo(resultarray, i);
            }
        }
    }

    public void InvertPixels(string name)
    {
        byte[] resultarray = Pixels;
        unsafe
        {
            fixed (byte* result_ptr = resultarray)
            {
                for (int i = 0; i < PixelLenght; i += 16)
                    (~new Vector<byte>(Pixels, i)).CopyTo(resultarray, i);
                SaveImage(name);
            }
        }
    }

    public unsafe void SaveImage(string name)
    {
        fixed (byte* p_ptr = Pixels)
        {
            using (Bitmap resultbmp = new Bitmap(Width, Height, Stride, PixelFormat, (IntPtr)p_ptr))
            {
                resultbmp.Save(name, ImageFormat.Jpeg);
            }
        }
    }

    public void Dispose()
    {
        Width = 0;
        Height = 0;
        Stride = 0;
        PixelLenght = 0;
        BytesperPixel = 0;
        Pixels = null;
        GC.Collect();
    }
} 
```

Usage.Note：要从向量中获得最佳性能，您需要在发布模式下运行代码：

```
static void Main(string[] args)
        {
            new VBitmap("testp.png").InvertPixels("qq.jpg");//Inverts the given bitmap and saves it.   
        } 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-08-02T14:51:28.357

```
var gfxPicture = Graphics.FromImage(img); 
```

==>

```
var gfxPicture = Graphics.FromImage(bmpPicture); 
```

DrawImage 可能会扭曲图像，GetPixel 很慢，试试 WPF 成像 API

# finite-automata - 街机格斗游戏 AI

> ID：11779810
> 
> 赞同：0
> 
> 时间：2012-08-02T14:38:33.007
> 
> 标签：finite-automata, game-ai

我需要在街机风格的格斗游戏中为对手构建 AI，非常类似于真人快打。

我不想对计算机使用随机动作，但我想要一个更难击败的 AI。

我可以从哪里开始寻找资源？您知道此类项目的任何实施吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T19:41:22.800

想想你是如何玩游戏的。

问问自己，在什么条件下我会执行某些攻击？我什么时候阻止？当我的健康状况不佳时，我该怎么办？当我的对手生命值低时？我会在一种情况下变得比另一种情况更具攻击性吗？什么时候最好使用长距离和短距离？

等等。

像这样的 AI 通常只遵循一堆 if/else/then 语句，并添加了一些随机性。

您希望它快速反应，所以其他任何东西（A*、alpha-beta 等）都不会那么有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-27T14:25:45.393

有一种算法取决于每个方向上的芽的统计和计数。您可以使用这样的逻辑来计算敌人朝所需方向踢您的次数并预测未来的攻击。

# python - HMAC_KEY 未设置警告

> ID：11779812
> 
> 赞同：0
> 
> 时间：2012-08-02T14:38:40.953
> 
> 标签：python, pyro

我正在尝试[pyro docs](http://packages.python.org/Pyro4/intro.html#simple-example)中的示例，我得到了

```
argon@vprime:~/py/pyro$ python greeting.py 
/usr/local/lib/python2.7/dist-packages/Pyro4-4.14-py2.7.egg/Pyro4/core.py:155: UserWarning: HMAC_KEY not set, protocol data may not be secure
  warnings.warn("HMAC_KEY not set, protocol data may not be secure")
Ready. Object uri = PYRO:obj_1e83aa04124a4e808be18c6ca839d5fd@localhost:48766 
```

如何避免这种情况？（不过，这个例子有效）

另外，如何分离 pyro 的守护进程？

并且 -[名称服务器的示例](http://packages.python.org/Pyro4/intro.html#with-a-name-server)不起作用：

```
argon@vprime:~/py/pyro$ python name_server.py 
/usr/local/lib/python2.7/dist-packages/Pyro4-4.14-py2.7.egg/Pyro4/core.py:155: UserWarning: HMAC_KEY not set, protocol data may not be secure
  warnings.warn("HMAC_KEY not set, protocol data may not be secure")
Traceback (most recent call last):
  File "name_server.py", line 11, in <module>
    ns=Pyro4.locateNS()                   # find the name server
  File "/usr/local/lib/python2.7/dist-packages/Pyro4-4.14-py2.7.egg/Pyro4/naming.py", line 323, in locateNS
    raise Pyro4.errors.NamingError("Failed to locate the nameserver")
Pyro4.errors.NamingError: Failed to locate the nameserver 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T06:50:01.090

如前所述，应该有 Pyro4.config.HMAC_KEY='the_same_string_for_server_and_client' ......在 pyro-docs 某处（丢失）

# java - 在 Java Swing 元素中使用 HTML 样式是不好的做法吗？

> ID：11779818
> 
> 赞同：15
> 
> 时间：2012-08-02T14:38:47.403
> 
> 标签：java, swing

使用 HTML 设置 Swing 元素的样式被认为是不好的做法？

例如，如果我只想让标签变大变红一次，我有两个选择：

使用 API 调用：

```
JLabel label = new JLabel("This is a title");  
label.setFont(label.getFont().deriveFont(18));  
label.setForeground(Color.red); 
```

或者通过使用 HTML：

```
JLabel label = new JLabel("<html><font size='4' color='#ff0000'>This is a title"); 
```

此外，*HTML 方式*允许我强调一个单词而不是整个标签，以及其他类似的用途。

使用 HTML 的缺点是什么？它更贵吗？并且所有 JRE 都不能保证格式化？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T15:03:17.990

1.  不，在 Swing JComponents 中使用 HTML 语法既不错也不错

2.  今天，Java 支持 HTML 3.2，并且减少了对某些 CSS 属性的支持

3.  JTextPane 和 JEditorPane 支持使用 HTML 语法添加和定位 JComponent

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T16:44:10.347

[`<font>`](http://www.htmldog.com/guides/htmlintermediate/badtags/)即使在 html 中[使用](http://www.htmldog.com/guides/htmlintermediate/badtags/)[也很糟糕。](http://www.htmldog.com/guides/htmlintermediate/badtags/)在大型应用程序中，使用对象自定义字体颜色、大小等是很多工作。

幸运的是，javaFX 2 出来了。有了它，您可以使用 CSS 来处理这些事情： [http ://www.oracle.com/technetwork/java/javafx/documentation/index.html](http://www.oracle.com/technetwork/java/javafx/documentation/index.html)

# html - 如何在 mac osx 上用 sublime 编辑 HTML.tmLanguage

> ID：11779823
> 
> 赞同：4
> 
> 时间：2012-08-02T14:38:57.483
> 
> 标签：html, sublimetext, sublimetext2

我要将其更改为支持非报价 ID，如：

`<div id=someId></div>`

我发现这个 [http://www.sublimetext.com/forum/viewtopic.php?f=3&t=8129](http://www.sublimetext.com/forum/viewtopic.php?f=3&t=8129)

但是在寻找编辑 tmLanguage 文件的位置时遇到问题

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-04T14:13:11.320

不要听杰米的回答。你永远不应该编辑 Pristine 包。相反，你可以在 Sublime Text 中找到所有 Sublime Text 的包和语法文件，`~/Library/Application Support/Sublime Text/Packages`或者从 Sublime Text 中转到`Sublime Text > Preferences > Browse Packages`. 但是，如果您从 HTML 文件夹中编辑 HTML.tmLanguage，则当 Sublime Text 更新时，您的更改将被覆盖。为防止这种情况，请复制 HTML 文件夹并将其重命名为 Better HTML。然后在您的用户设置 ( `Preferences > Settings - User`) 中添加以下内容：

```
"ignored_packages":
[
    "HTML",
    "Vintage"
], 
```

通过忽略默认的 HTML 包，Sublime Text 将被迫使用您的 HTML.tmLanguage 文件版本，并且您的更改将被保留。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T23:56:33.293

您可以通过转到`/Applications`然后控制/右键单击`Sublime Text 2.app`并选择“显示包内容”来找到 HTML.tmLanguage 文件。然后导航到`/Contents/Mac OS/Pristine Packages/`。

在该文件夹中，您应该会看到一组 sublime-package 文件。找到`HTML.sublime-package`并将其重命名为`HTML.zip`. 然后，您应该能够像任何其他 zip 文件夹一样提取存档，并且您应该在其中找到与 Sublime 的 HTML 包相关的所有资产 - 包括 HTML.tmlanguage。

确保在进行编辑后重新压缩，然后将文件夹重命名为 .sublime-package！

***编辑：*****我已经认识到这是不正确的，永远不应该编辑原始包。改为遵循 BoundinCode 的答案！**

# c# - 执行选择时出现 InvalidCastException

> ID：11779827
> 
> 赞同：1
> 
> 时间：2012-08-02T14:39:11.007
> 
> 标签：c#, .net, linq

我有一个看起来像这样的查询：

```
 surveyCompleted = from s in surveyCompleted 
                where agentTickets.Contains(s.TicketID.Value) || s.UserID == new Guid(txtUserID.Text) select s; 
```

问题是，在这个声明之后，我无法对surveyCompleted 做任何事情，因为我得到了一个InvalidCastException。任何想法为什么会发生这种情况？所有其他带有surveyCompleted 的选择语句都可以正常工作，但是这个失败了吗？它可能来自 where 子句中的语句“agentTickets.Contains(s.TicketID.Value)”吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:41:07.377

尝试使用此代码

```
from s in surveyCompleted 
                where agentTickets.Contains(s.TicketID.Value) || s.UserID == new Guid(txtUserID.Text).ToString() select s; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T14:52:15.370

If `txtUserID`is a `TextBox`(name 导致这样认为)，那么`new Guid(txtUserID.Text)`如果它不包含精确的类似`Guid`字符串 (xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx)则会抛出

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T14:45:53.307

这是一个 LINQ to SQL，对吗？

确保它`s.TicketID`永远不是 NULL：

```
!Convert.IsDBNull(s.TicketID) && agentTickets.Contains(s.TicketID.Value) 
```

# wcf-security - 客户端和服务器认证通过同一个证书

> ID：11779830
> 
> 赞同：0
> 
> 时间：2012-08-02T14:39:13.927
> 
> 标签：wcf-security

我在具有消息安全性的 Wcf 上使用相同的证书进行客户端和服务身份验证。它会导致任何严重的漏洞吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:47:40.477

出于安全原因，您不希望在服务器和客户端上都获得完整的认证。看看这个[服务器/客户端证书](http://blogs.msdn.com/b/kaushal/archive/2012/02/18/client-certificates-v-s-server-certificates.aspx)

# vb.net - VB Net：根据安全级别启用菜单/上下文菜单项

> ID：11779842
> 
> 赞同：0
> 
> 时间：2012-08-02T14:39:32.227
> 
> 标签：vb.net, security, contextmenu

我有一个项目，其中有几个基于安全级别启用/禁用的项目。我正在尝试遍历表单上的所有控件以获取它们的名称并生成一个列表。我可以获得控件及其子项的所有名称，但它没有找到我拥有的所有上下文菜单。在设计期间，我将所有安全项目命名为 Sec_???。这是我到目前为止的代码。它将找到控件的名称并将其添加到列表中。如果它是绑定导航器，它将搜索菜单项并添加任何具有 Sec 标记的菜单项。我如何为我的所有上下文菜单做同样的事情？

```
Public Sub ProcessControls(ByVal ctrlContainer As Control)
    For Each ctrl As Control In ctrlContainer.Controls
        If ctrl.Name.ToString.StartsWith("Sec") Then
            FileOpen(1, "Sec_names.txt", OpenMode.Append)
            PrintLine(1, "**********")
            PrintLine(1, ctrl.Name.ToString & "," & ctrl.GetType.ToString)
            FileClose(1)
        End If
        If TypeOf ctrl Is BindingNavigator AndAlso ctrl.Name.ToString.StartsWith("Sec") Then
            Dim mnuName As BindingNavigator = CType(ctrl, BindingNavigator)
            For i = 0 To mnuName.Items.Count - 1
                Try
                    Dim mnu As ToolStripButton = CType(mnuName.Items(i), ToolStripButton)
                    If mnu.Name.ToString.StartsWith("Sec") Then
                        FileOpen(1, "Sec_names.txt", OpenMode.Append)
                        PrintLine(1, mnu.Name.ToString & "," & mnu.GetType.ToString)
                        FileClose(1)
                    End If
                Catch ex As Exception

                End Try
            Next
        End If
        ' recursively call this function for the control's children
        If ctrl.HasChildren Then
            ProcessControls(ctrl)
        End If
    Next
End Sub 
```

编辑： ProcessControls(Me) 是我用来启动进程的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T18:22:52.030

尝试使用

```
For Each vComponent In Me.components.Components
    'Determine if it is component you want process
    'do something with it
Next 
```

确保它不是空的。[为什么 Me.Components 什么都没有？](https://stackoverflow.com/questions/516776/why-is-me-components-nothing)

# php - 单击时javascript复选框没有反应，总是必须按提交

> ID：11779843
> 
> 赞同：0
> 
> 时间：2012-08-02T14:39:33.063
> 
> 标签：php, javascript, forms, checkbox

出于某种原因，我无法使用我已经尝试了几天的脚本。

我有一些显示不同颜色的复选框。当用户单击一种颜色时，我希望脚本重新加载我网站的其中一个 DIV。

一切都可以正常使用`<form>`标签和一个`<input type="submit">`，基本上是一个按钮。但它永远不会只通过选中一个复选框来工作，我总是必须点击提交。

任何有关代码的帮助将不胜感激！

谢谢！

javascript:

```
<script>
    $('.colors').delegate('input:checkbox', 'change', function() { 
        if ($(this).attr("checked")) {
            var id = $("#regularCheckbox").find(':checked').val();
            $('#itemMain').load('index.php?color='+id);
        }
    }).find('input:checkbox').change();
</script> 
```

形式：

```
<?php
$colors = mysql_query("SELECT DISTINCT color_base1 FROM item_descr ORDER BY color_base1");
while ($colorBoxes = mysql_fetch_array($colors))
{
echo "<input type='checkbox' id='checkbox-1-1' class='regularCheckbox' name='color' value='".$colorBoxes[color_base1]."' /><font class='similarItemsText'>   ".$colorBoxes[color_base1]."</font><br />";
}
?>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:47:05.897

```
$("#regularCheckbox").find(':checked') 
```

根据您的 PHP 回声，似乎是错误的。`regularCheckbox`是一个类，而不是一个 id，所以你会想要选择`$(".regularCheckbox:checked')`. 顺便说一句，您不应该在循环中重复输出相同的 id，id 必须是唯一的。

Also, you might just want to use jQuery's [`serialize()` method](http://api.jquery.com/serialize/) on your form.

# jquery - JQuery 切换有序列表

> ID：11779845
> 
> 赞同：0
> 
> 时间：2012-08-02T14:39:40.857
> 
> 标签：jquery, toggle

我试图`<ol>`在单击使用 JQuery 的链接时显示和隐藏（切换）。我的 HTML 是

```
 <ol id="sortable" class="sortable">
    <li>
       <div>
          <span class="drag-image groupimage">&nbsp;</span>
          <a class='expand'>{{ portfolio_group.name }}</a>
       </div>
     <ol style="display: none; margin:0px" id={{ portfolio_group.id }}>
         <li>
            <div class="patent-div">
               <span style="" class="drag-image patentimage">&nbsp;</span>
               <a class="patent-name" href='{{ path('v2_pm_patents_edit', { 'patentId': patent.id }) }}'>{{ patent.patentName }}</a>
            </div>
     </ol>
 </ol> 
```

由于内部 ol 是隐藏的，当我单击带有 class = expand 的链接时，我想让它切换。

到目前为止我尝试了什么

```
 $(document).ready(function(){
    $('.expand').click(function() {
        $(this).nextAll('ol').eq(0).slideToggle('fast');
    }); 
```

});

但它不起作用有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:43:05.430

看看这个工作[jsfiddle](http://jsfiddle.net/JcWes/)。

```
$(".expand").click(function() {
   $(this)
       .parent()
       .nextAll('ol')
       .eq(0)
       .slideToggle('fast');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T14:43:31.120

该`.nextAll()`函数查看调用它的 jQuery 对象中元素的兄弟姐妹。但是，`<ol>`您要切换的 看起来不像是`<a>`触发点击事件的元素的兄弟，而是`<div>`包含`<a>`.

`<div>`您可以使用该函数将 DOM 向上遍历到父级`.parent()`，然后调用`.nextAll()`：

```
$(this).parent().nextAll('ol').eq(0).slideToggle('fast'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T14:56:51.133

您的代码的问题是 nextAll 仅在 dom 中搜索当前选择器的兄弟姐妹，但是您的示例显示您希望扩展的 OL 与 div 包含的单击项目分开。

我已经在 J​​Sfiddle 上提出了一个解决方案，如果您的示例的 html 结构在生产中不会发生变化（即您希望扩展的 OL 始终紧跟在包含可点击链接的父“div”之后）应该可以工作。

小提琴的链接在这里 -

[http://jsfiddle.net/2LQJe/11/](http://jsfiddle.net/2LQJe/11/)

我使用的代码在这里：

```
$(document).ready(function(){

    $('.expand').click(function() {
        $(this).parents('div').next('ol').slideToggle('fast');
    });

}); 
```

这样做的原因是我们必须首先在 dom 树上找到一个元素，它是您希望扩展的元素的兄弟元素，在本例中为 div，然后遍历该兄弟集，尽管此解决方案是我承认不是很灵活。

*编辑*我还注意到您的 html 结构有一个小错误，即紧跟在您希望展开的 ol 之后的 li 没有关闭，要纠正这个问题，您应该在“patent-div”节点之后放置一个关闭 () 标记。

# reporting-services - 将 Crystal 报表转换为 SSRS

> ID：11779849
> 
> 赞同：0
> 
> 时间：2012-08-02T14:39:45.610
> 
> 标签：reporting-services

基本上，我转换了这个水晶报告公式“如果 ucas({?Trade Buy or Sell}) = “Trade Buy”然后“IOSW_BUY_01”，否则如果 ucase({?Trade Buy or Sell})="Trade Sell" 然后 IOSW_SELL_02。”

到 SSRS -IIF(Fields!TradeBuyorSell.Value="Trade Buy","IOSW_BUY_01", IIF(Fields!TradeBuyorSell.Value="Trade Sell","IOSW_SELL_02")) 但我收到以下错误消息

**错误信息**

> [rsCompilerErrorInExpression]textrun 'TradeBuyorSell.Paragraphs[0].TextRuns[0] 的值表达式包含错误：[BC30455]Argument not specified for parameter 'FalsePart'of Public Function IIF(Expression As Boolean, TruePart As Object, FalsePart作为对象）作为对象'请协助这是非常紧急的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T21:43:11.497

出现这个错误的原因是水晶报表公式写得不好。在 Crystal 中，您可以使用“如果条件则为真部分”之类的公式，可以省略假部分。Crystal 会自动处理默认值。但在 SSRS 中，它更严格，IIF 不能省略 false 部分。

# c# - 如何获取客户端确认框值以进行服务器端操作？

> ID：11779851
> 
> 赞同：2
> 
> 时间：2012-08-02T14:39:55.727
> 
> 标签：c#, javascript, asp.net, telerik

我正在使用客户端脚本来确认消息框，如下所示

```
 string script = "fadeScript";
                ScriptManager.RegisterClientScriptBlock(this.Page, script.GetType(), "Script", "Closewindow();", true); 
```

java脚本函数：

```
<script type="text/javascript">
    function Closewindow() {
        var Result = confirm("Are you sure want to delete?");
        alert(Result);
        if (Result == true) {
            document.getElementById('txtConfirmresult').value = Result;//assigning to hidden text box 
            alert(txtConfirmresult.value);
        return true;
        }
    else 
    {
        document.getElementById('txtConfirmresult').value = Result;//assigning to hidden text box 
        alert('BYE');
         return false;
        }
}

</script> 
```

如果它返回true，我想使用.cs文件中的脚本返回值来激发程序。如果它返回 false 我必须只停留在该特定页面上。请帮我解决这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T14:42:20.670

您可以使用`__doPostBack(target, argument)`回发到服务器。然后，您可以评估`__EVENTTARGET`并`__EVENTARGUMENT`在发布数据中查看您发回的内容并适当地执行逻辑。 [这是一个提供更深入信息的链接](http://wiki.asp.net/page.aspx/1082/dopostback-function/)。

一个简单的例子：

脚本/客户端：

```
<script type="text/javascript">
    function Closewindow() {
        var Result = confirm("Are you sure want to delete?");
        alert(Result);
        if (Result == true) {
            var txtConfirmResult = document.getElementById('txtConfirmresult');
            txtConfirmResult.value = Result;//assigning to hidden text box 
            alert(txtConfirmresult.value); //displaying for debug purposes
            __doPostBack( 'txtConfirmresult', Result ); //sending back to server.
        return true;
        }
    else 
    {
        document.getElementById('txtConfirmresult').value = Result;//assigning to hidden text box 
        alert('BYE');
         return false;
        }
} 
```

C＃

```
 protected void Page_Load(object sender, EventArgs e)
    {
        string target =  Request["__EVENTTARGET"];
        string argument = Request["__EVENTARGUMENT"];

        if (target != null && target.Equals( "txtConfirmresult" ) )
        {
             this.DoSomeGreatServerSideProcessing(argument);
        }
    } 
```

更新以添加更正确的变量名称，但假设您的脚本正在运行，则应该与您现有的代码库一起使用。我会非常小心地使用您的 ID，因为只有在文本框上没有设置`txtConfirmresult`它才会起作用。`runat="server"`如果是这种情况，ID 将被添加到表示容器层次结构的前面。

我建议很好地命名您的“回调”，例如：

脚本/客户端：

```
<script type="text/javascript">
    function Closewindow() {
        var Result = confirm("Are you sure want to delete?");
        document.getElementById('txtConfirmresult').value = Result;//assigning to hidden text box 
        if (Result) {

            __doPostBack( 'UserConfirmedFormSubmission', "CloseWindow" ); //sending back to server.
            return true;
        }
        else 
        { 
           return false;
        }
} 
```

C＃

```
 protected void Page_Load(object sender, EventArgs e)
    {
        string target = Request["__EVENTTARGET"];
        string argument = Request["__EVENTARGUMENT"];

        if (!string.IsNullOrEmpty(target) && target.Equals("UserConfirmedFormSubmission"))
        {
             if ( !string.IsNullOrEmpty(argument) && argument.equals("CloseWindow"))
             {
                this.HandleUserRequestedCloseWinow();
             }
        }
    } 
```

# xml - 在一行中添加大型 XML 文件中的换行符

> ID：11779855
> 
> 赞同：27
> 
> 时间：2012-08-02T14:40:14.010
> 
> 标签：xml, notepad++

我在一行中有一个大的 XML 文件。

如何为每个标签添加换行符，使其不在编辑器中的一行中？

我正在使用记事本++

提前致谢

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-08-02T15:02:23.910

从菜单中转到

```
Plugins --> XML Tools --> Pretty Print 
```

如果您没有安装 XML 工具插件，您可以点击下载

```
Plugins --> Show Plugin Manager 
```

并选择 XML 工具

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-07T10:54:37.887

也许这对某人有用：

> 如何为每个标签添加换行符，使其不在编辑器中的一行中？

为了自动对多个文件执行此操作，我使用 XmlLint：

`xmllint YOUR_FILE.xml --format`

XmlLint 在 Kubuntu/Ubuntu 软件包中可用，也可以在以下位置下载用于多个操作系统：ftp: [//xmlsoft.org/libxml2/](ftp://xmlsoft.org/libxml2/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-10-26T13:43:46.917

而不是这样做：插件-> XML工具->漂亮打印，您可以使用这个有用的快捷方式： **Ctrl + Alt + shift + B**

# javascript - HTML5 - 跨浏览器 iframe 消息传递 - 父子通信

> ID：11779856
> 
> 赞同：8
> 
> 时间：2012-08-02T14:40:16.350
> 
> 标签：javascript, html, cross-browser, postmessage

我编写了一个内容脚本，将 iframe 注入任何网站（因此不同的域）。

我需要父网站向子 iframe 发送一些信息，但是我找不到这样做的方法。

编码

```
var targetFrame = $('#myIframe')[0];
targetFrame.contentWindow.postMessage('the message', '*'); 
```

不工作，我得到一个`Cannot call method 'postMessage' of undefined`错误。但是当我直接在 Chrome 的控制台中尝试相同的代码时，它起作用了。

不过，我可以毫不费力地从孩子向父母发送 postMessage，但只需要一种让父母向孩子 iframe 发送消息的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T05:25:17.627

我最近编写了`postMessage`对 an 执行的代码，`iframe`我遇到了一个非常相似的问题，它说`contentWindow`的是`undefined`.

就我而言， my`iframe`还不是 DOM 树的一部分，它是由`document.createElement('iframe')`.

一旦我把它隐藏（宽度和高度 0px，可见性隐藏）到页面的主体，`contentWindow`不再是未定义的，一切都按预期工作。

当我在做我的项目时，我发现[Mozilla 开发者网络](https://developer.mozilla.org/en-US/docs/DOM/window.postMessage)页面非常有用。`postMessage`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T14:42:02.510

我已经成功使用以下库：

[http://easyxdm.net/wp/](http://easyxdm.net/wp/)

它不需要任何闪光灯/银光，只需要 javascript。它与 IE6 兼容。

启动并运行它需要做一些事情，但是一旦它运行起来非常顺利。

请记住，如果您在其他域上打开的 iFrame 使用不同的协议（HTTP 与 HTTPS），浏览器将发出警告，阻止您的脚本运行（除非用户表示他们将接受风险）。如果您可以访问这两种协议，那么在 HTTP 和 HTTPS 上托管 iFrame 的内容并相应地加载适当的脚本可能是明智之举。

祝你好运！

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-04T05:14:48.087

您不需要以 contentWindow 为目标。尝试这个：

```
var targetFrame = $('#myIframe')[0];
targetFrame.postMessage('the message', '*'); 
```

# c++ - 迭代 std::set/std::map 的时间复杂度是多少？

> ID：11779859
> 
> 赞同：34
> 
> 时间：2012-08-02T14:40:30.997
> 
> 标签：c++, stl, time-complexity, big-o, std

遍历 a `std::set`/ `std::multiset`/ `std::map`/的时间复杂度是`std::multimap`多少？我相信它在集合/地图的大小上是线性的，但不太确定。语言标准中有规定吗？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-08-02T14:55:45.353

在[C++11 标准草案 N3337](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3337.pdf)中，答案可以在 § 24.2.1 第 8 段中找到：

> 迭代器的所有类别只需要在恒定时间内（摊销）对给定类别可实现的那些函数。

`n`由于迭代器上的每个操作都必须是常数时间，因此对元素的迭代必须是`O(n)`.

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-08-02T14:41:37.603

> 我相信它在集合/地图的大小上是线性的，但不太确定。

那是对的。遍历整个集合或地图是`O(N)`

# c# - SqlCommand 参数无法正常工作

> ID：11779861
> 
> 赞同：0
> 
> 时间：2012-08-02T14:40:33.107
> 
> 标签：c#, asp.net, sql-server, database

考虑以下代码：

```
SqlConnection conn = new SqlConnection(@"connection string");

SqlCommand ourCommand = new SqlCommand(String.Format(
    @"SELECT Field1,Field2,Field3 FROM Tbl WHERE Field1 LIKE '@FL1'"), conn);
ourCommand.CommandTimeout = 6000;

ourCommand.Parameters.AddWithValue("@FL1", TextBox1.Text);

SqlDataAdapter adapter = new SqlDataAdapter(ourCommand);
DataTable dt = new DataTable();

conn.Open();
adapter.Fill(dt);
GridView1.DataSource = dt;

GridView1.DataBind(); 
```

问题是它`datatable`是空的——这意味着命令要么没有执行，要么生成了不正确的查询。我错过了什么？连接和查询有效。不带参数的命令也可以。数据库引擎是 SQL Server 2008 R2

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T14:43:49.770

您已将参数名称放在引号中，因此它被视为*value*，而不是参数。试试这个：

```
"SELECT Field1,Field2,Field3 FROM Tbl WHERE Field1 LIKE @FL1" 
```

（鉴于您提供的参数比 SQL 中的参数多，我实际上希望您现有的代码会引发异常......）

如评论中所述，您也不需要`string.Format`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-02T14:44:09.140

您的查询不是格式正确的查询。

代替：

```
String.Format(
    @"SELECT Field1,Field2,Field3 FROM Tbl WHERE Field1 LIKE '@FL1'") 
```

利用：

```
"SELECT Field1,Field2,Field3 FROM Tbl WHERE Field1 LIKE @FL1" 
```

请注意，不需要`string.Format`, 也不需要将参数名称括在其中，`''`并且由于字符串中没有任何要转义的内容，因此不需要它是逐字字符串文字（使用`@`），正如 Jon 评论的那样。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-02T14:44:11.500

尝试将行更改为此（删除@FL1 周围的刻度线）

```
SqlCommand ourCommand=new SqlCommand(
             "SELECT Field1,Field2,Field3 FROM Tbl WHERE Field1 LIKE @FL1",conn); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-02T14:45:02.323

如果使用参数，则不需要使用单引号。看看[这里](http://www.csharp-station.com/Tutorial/AdoDotNet/lesson06)的课。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-02T14:46:43.330

好吧，首先，您不需要 string.format 或`@`'s （您没有转义字符，您的字符串在一行上，并且您没有使用参数化字符串，因此没有任何理由）**然后，您不需要 @FL1 周围的引号**。SqlCommand 将整个字符串解析为`@`'s，而不是由引号分隔的子字符串。我相信最终的代码应该是这样的：

```
SqlCommand ourCommand=new SqlCommand("SELECT Field1,Field2,Field3 FROM Tbl WHERE Field1 LIKE @FL1",conn); 
```

其他一切我认为你可以保持不变。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-15T18:43:39.613

你需要用百分比强制连接`%`->

```
SELECT Field1,Field2,Field3 FROM Tbl WHERE Field1 LIKE **'%'** + @FL1 + **'%'** 
```

# javascript - 揭示模块模式命名约定

> ID：11779862
> 
> 赞同：3
> 
> 时间：2012-08-02T14:40:40.250
> 
> 标签：javascript, naming-conventions, revealing-module-pattern

我想避免记住一个方法的两个名称，一个用于公共访问，一个用于私有访问。从这个意义上说，如果您对两者使用相同的名称，在哪种情况下脚本会失败？以下代码何时会失败？

```
var TestClass = function() {
    function showMessage(text) {
        $("div").text(text);
    }
    return {
        showMessage: showMessage
    };
}(); 
```

我已经在[这个 fiddle](http://jsfiddle.net/b8GwT/7/)中尝试过，它在 FF、IE、Chrome、Safari 中都能正常工作。JSLint 对此也无话可说。

我经常看到人们命名私有方法`_showMessage`或`showMessageFn`. 这有充分的理由吗？

我正在寻找的答案是它要么在某些情况下失败，可能会造成混乱，要么只是 JavaScript 人发明了看起来很聪明的约定。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T09:56:51.057

这很好用 - 您正在定义一个`showMessage()`在内部函数的上下文中调用的函数，然后将其分配给`showMessage`导出的对象文字的属性。

属性名称可以是[任何有效的标识符](http://mathiasbynens.be/notes/javascript-identifiers#valid-identifier-names)，因此`showMessage`当然是完全有效的。在您的示例中，`function showMessage(text)`创建一个在内部范围内调用的标识符`showMessage`，引用一个函数定义。然后，您在对象字面量上创建一个称为[属性名称的](http://asenbozhilov.com/articles/identifiers-en.html#oi_property_name)**单独**标识符，该标识符分配给内部标识符引用的函数的值。两个标识符具有相同名称的事实无关紧要，因为它们不存在于同一范围内。`showMessage`

我能看到的唯一问题是您应该将函数调用包装在括号中，否则读者不会立即清楚该函数是自调用的。

所以这：

```
var TestClass = function() {
    ...
}(); 
```

变成这样：

```
var TestClass = (function() {
    ...
}()); 
```

私有方法通常带有下划线前缀的原因只是一种广泛使用的约定——它表明该方法是私有的（Javascript 不支持访问修饰符，因此任何未封装在闭包中的属性或方法都可以可以从外部范围访问）。[这个 StackOverflow 问题](https://stackoverflow.com/questions/4484424/underscore-prefix-for-property-and-method-names-in-javascript)的公认答案完美地总结了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T14:58:57.253

您在这里所做的是返回一个包含您定义的函数对象的对象。

我认为这基本上是一种显示您是在创建该函数的同一范围内还是在不同范围内访问该函数的一种方式。

# regex - 如何创建一个正则表达式来捕获不是纯数字的所有内容

> ID：11779863
> 
> 赞同：0
> 
> 时间：2012-08-02T14:40:41.263
> 
> 标签：regex

我有一个由多行组成的字符串，其中包含纯数字和可能包含数字的单词，例如：

```
1 11 blabla12_ho5::blabla14_ho4 
```

我想去掉单词，只留下纯数字，结果是：

```
1 11 
```

我已经尝试使用正则表达式“ `[^ ]*[^\d][^ ]*`”来捕捉单词并通过使用`regsub`空字符串来删除它们。但它也捕获了第二个数字并返回：

```
1 
```

什么是正确的正则表达式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T14:42:30.830

字边界后跟一系列数字，然后是字边界：

```
\b(\d+)\b 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T14:42:48.297

你正在寻找的是更接近这个：

```
/\D(\d+)\D/g 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T14:45:21.730

捕捉数字和字母（不包括纯数字）：`\b(?!\d+\b)\w+\b`
捕捉纯数字：`\b(\d+)\b`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T14:53:40.550

不同的 RegEx 解析器将使用略有不同的语法。你想用这个正则表达式做什么？

您的问题的答案在于贪婪与惰性匹配。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T14:58:19.267

这与您的问题有点相切，因为您在询问 RegEx，但是对于您正在做的事情，如果您只想获取前两列并且您使用的是 Linux，您可以做一些简单的事情，例如

```
cut -d ' ' -f 1-2 myfile.txt 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-04T13:29:51.547

你可以使用 grep：

```
echo "1 11 blabla12_ho5::blabla14_ho4" | grep -E -o "\b[[:digit:] ]+\b"
1 11 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-08-04T12:32:13.130

设法捕获包含特殊字符以及字母和数字的单词而不找到纯数字的正则表达式是：

```
\b[^ ]*[^\d ]+[^ ]* 
```

# .htaccess - .htaccess 到文件夹和子文件夹的子域流量

> ID：11779865
> 
> 赞同：0
> 
> 时间：2012-08-02T14:40:52.227
> 
> 标签：.htaccess

好的长话短说：

[http://subdomain.domain.com/test1/test2](http://subdomain.domain.com/test1/test2) 需要在这里显示信息：http: [//domain.com/agents/subdomain/test1/test2](http://domain.com/agents/subdomain/test1/test2)

显然，如果您使用此 [http://subdomain.domain.com/](http://subdomain.domain.com/) 需要显示 [http://domain.com/agents/subdomain/](http://domain.com/agents/subdomain/)

这是我到目前为止所拥有的：

```
RewriteEngine On 
RewriteCond $1 !\.(gif|jpe?g|png)$ [NC]
RewriteCond %{REQUEST_FILENAME} !-f 
RewriteCond %{REQUEST_FILENAME} !-d 
RewriteRule ^(.*)$ /index.php?/$1 [L]

RewriteCond %{HTTP_HOST} !^(www\.)?domain\.com [NC]
RewriteCond %{HTTP_HOST} ([^\.]+)\.domain\.com [NC]
RewriteCond %{REQUEST_URI} !^/agents
RewriteRule ^(.*)$ /agents/%1/$1/ [L] 
```

我需要第一条规则来从 URL 中删除 index.php。

我可以完成第一件[http://subdomain.domain.com/](http://subdomain.domain.com/) 但不是子文件夹。

上面的语法会引发内部服务器错误，但如果我将最后一行更改为：

```
RewriteRule ^$ /agents/%1/$1/ [L] 
```

它可以工作，除了我无法进入子目录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T15:30:21.620

好的，终于想通了……这是解决方案：

```
RewriteEngine On 
RewriteCond $1 !\.(gif|jpe?g|png)$ [NC]
RewriteCond %{REQUEST_FILENAME} !-f 
RewriteCond %{REQUEST_FILENAME} !-d 
RewriteCond %{HTTP_HOST} ^(www\.)? domain\.com [NC]
RewriteRule ^(.*)$ /index.php?/$1 [L]

RewriteCond %{HTTP_HOST} !^(www\.)? domain\.com [NC]
RewriteCond %{HTTP_HOST} ([^\.]+)\. domain\.com [NC]
RewriteCond %{REQUEST_URI} !^/index.php
RewriteRule ^/?(.*) /index.php?/agents/%1/$1 [L] 
```

# iphone - 我可以将图像写入系统相册超过 5 次吗？

> ID：11779867
> 
> 赞同：1
> 
> 时间：2012-08-02T14:41:02.670
> 
> 标签：iphone, ios5

我对这件事很困惑，我只能将图像写入系统相册5次。

```
UIImage *image = [UIImage imageNamed:@"icon.png"];
for (int i = 0; i < 6; i++) {
    UIImageWriteToSavedPhotosAlbum(image, nil, nil, nil);
} 
```

如果 i 的值等于 5，我得到这个日志：

> *** -[NSKeyedUnarchiver initForReadingWithData:]: 数据为 NULL

我从 API 文档中没有找到 5 次左右的相关信息。嗯……我可以连续向系统相册写入图像5次以上吗？写入系统相册是不是太快了？还有另一种方法吗？

感谢你的回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:01:11.953

image 是一个自动释放的变量。我假设您没有使用ARC。如果你先保留它，然后在循环后释放它，它仍然会失败吗？

编辑：如果你把你的电话放在一个延迟的方法中怎么样，即：

```
[self performSelector:@selector(myUIImageWriteToSavedPhotosAlbum:) withObject:image afterDelay:0]; 
```

您还定义了：

```
- (void) myUIImageWriteToSavedPhotosAlbum:(UIImage *) image {
   UIImageWriteToSavedPhotosAlbum(image, nil, nil, nil);
} 
```

您的写入可能只需要在每次尝试后通过运行循环。

# php - 可能一次在 PHP 中多次写入同一个文件？

> ID：11779868
> 
> 赞同：4
> 
> 时间：2012-08-02T14:41:05.590
> 
> 标签：php, file-io, locking, race-condition

我正在使用 PHP`fputcsv`在我们正在制作的应用程序中记录投票。我的代码的保存部分大致类似于：

```
$handle = fopen('votes.csv', 'a');
fputcsv($handle, $data);
fclose($handle); 
```

这在测试中完美无缺。但是，我有一个小问题。在生产中部署时，许多用户可能会同时向此脚本发出请求。我很好奇 PHP 将如何处理这个问题。

我是否可能会遇到问题并因此而失去选票？如果是这样，我能做些什么来防止它？解决方案是否比简单地使用数据库更复杂？最后，我该如何测试这种情况，同时会发出很多请求？是否已经存在测试这类东西的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T14:45:52.183

写入文件*可能*会导致并发用户出现问题。如果您改为插入数据库，则可以让数据库本身处理队列。如果您的连接用完了，它很容易被跟踪，并且您可以随时查看数据库上的负载。

数据库中的插入将比附加到文件中的资源少。话虽如此，您都需要相当大的负载才能生效 - 但是对于数据库，您可以构建查询队列来减轻很大一部分并发压力。

当您向数据库发送请求时，它实际上会进入队列进行处理。只有在您的 PHP 代码超时时才会执行它（基本上，PHP 被告知放弃等待数据库响应 - 您可以通过 PHP 和 Apache 设置来控制它）所以您拥有一个很棒的内置缓冲。

# python - DC闪烁，wxPython

> ID：11779877
> 
> 赞同：0
> 
> 时间：2012-08-02T14:41:20.907
> 
> 标签：python, wxpython, wxwidgets, wxruby

我正在使用下面的类来添加橡皮筋。但是，每次我创建橡皮筋（左键单击）时，都会闪烁/闪烁。我不知道为什么会这样。另外，我将橡皮筋放在 ScrolledWindow 中。

```
import wx
class wxPyRubberBander:
    """ A class to manage mouse events/ rubberbanding of a wx.Python
        canvas object """

    def __init__(self, canvas):

        # canvas object
        self._canvas = canvas
        # mouse selection start point
        self.m_stpoint=wx.Point(0,0)
        # mouse selection end point
        self.m_endpoint=wx.Point(0,0)
        # mouse selection cache point
        self.m_savepoint=wx.Point(0,0)

        # flags for left click/ selection
        self._leftclicked=False
        self._selected=False

        # Register event handlers for mouse
        self.RegisterEventHandlers()

    def RegisterEventHandlers(self):
        """ Register event handlers for this object """

        wx.EVT_LEFT_DOWN(self._canvas, self.OnMouseEvent)
        wx.EVT_LEFT_UP(self._canvas, self.OnMouseEvent)
        wx.EVT_MOTION(self._canvas, self.OnMouseEvent)

    def OnMouseEvent(self, event):
        """ This function manages mouse events """

        if event:

            # set mouse cursor
            # get device context of canvas
            dc= wx.ClientDC(self._canvas)
            # Set logical function to XOR for rubberbanding
            dc.SetLogicalFunction(wx.XOR)

            # Set dc brush and pen
            # Here I set brush and pen to white and grey respectively
            # You can set it to your own choices

            # The brush setting is not really needed since we
            # dont do any filling of the dc. It is set just for 
            # the sake of completion.

            wbrush = wx.Brush(wx.Colour(255,255,255), wx.TRANSPARENT)
            wpen = wx.Pen(wx.Colour(200, 200, 200), 1, wx.SOLID)
            dc.SetBrush(wbrush)
            dc.SetPen(wpen)

        if event.LeftDown():

           # Left mouse button down, change cursor to
           # something else to denote event capture
           self.m_stpoint = event.GetPosition()

           # invalidate current canvas
           self._canvas.Refresh()
           # cache current position
           self.m_savepoint = self.m_stpoint
           self._selected = False
           self._leftclicked = True

        elif event.Dragging():   

            # User is dragging the mouse, check if
            # left button is down

            if self._leftclicked:

                # reset dc bounding box
                dc.ResetBoundingBox()
                dc.BeginDrawing()
                w = (self.m_savepoint.x - self.m_stpoint.x)
                h = (self.m_savepoint.y - self.m_stpoint.y)

                # To erase previous rectangle
                dc.DrawRectangle(self.m_stpoint.x, self.m_stpoint.y, w, h)

                # Draw new rectangle
                self.m_endpoint =  event.GetPosition()

                w = (self.m_endpoint.x - self.m_stpoint.x)
                h = (self.m_endpoint.y - self.m_stpoint.y)

                # Set clipping region to rectangle corners
                dc.SetClippingRegion(self.m_stpoint.x, self.m_stpoint.y, w,h)
                dc.DrawRectangle(self.m_stpoint.x, self.m_stpoint.y, w, h) 
                dc.EndDrawing()

                self.m_savepoint = self.m_endpoint # cache current endpoint

        elif event.LeftUp():

            # User released left button, change cursor back   
            self._selected = True  #selection is done
            self._leftclicked = False # end of clicking  

    def GetCurrentSelection(self):
        """ Return the current selected rectangle """

        # if there is no selection, selection defaults to
        # current viewport

        left = wx.Point(0,0)
        right = wx.Point(0,0)

        # user dragged mouse to right
        if self.m_endpoint.y > self.m_stpoint.y:
            right = self.m_endpoint
            left = self.m_stpoint
        # user dragged mouse to left
        elif self.m_endpoint.y < self.m_stpoint.y:
            right = self.m_stpoint
            left = self.m_endpoint

        return (left.x, left.y, right.x, right.y)

    def ClearCurrentSelection(self):
        """ Clear the current selected rectangle """

        box = self.GetCurrentSelection()

        dc=wx.ClientDC(self._canvas)

        w = box[2] - box[0]
        h = box[3] - box[1]
        dc.SetClippingRegion(box[0], box[1], w, h)
        dc.SetLogicalFunction(wx.XOR)

        # The brush is not really needed since we
        # dont do any filling of the dc. It is set for 
        # sake of completion.

        wbrush = wx.Brush(wx.Colour(255,255,255), wx.TRANSPARENT)
        wpen = wx.Pen(wx.Colour(200, 200, 200), 1, wx.SOLID)
        dc.SetBrush(wbrush)
        dc.SetPen(wpen)
        dc.DrawRectangle(box[0], box[1], w,h)
        self._selected = False 

        # reset selection to canvas size
        self.ResetSelection()    

    def ResetSelection(self):
        """ Resets the mouse selection to entire canvas """

        self.m_stpoint = wx.Point(0,0)
        sz=self._canvas.GetSize()
        w,h=sz.GetWidth(), sz.GetHeight()
        self.m_endpoint = wx.Point(w,h) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:46:25.140

也许冷冻它会起作用

```
 def OnMouseEvent(self, event):
    """ This function manages mouse events """
    if not self._canvas.IsFrozen(): #prevent multiple freezes
        self._canvas.Freeze() #freeze it from updates
    if event:

        # set mouse cursor
        # get device context of canvas
        dc= wx.ClientDC(self._canvas)
        # Set logical function to XOR for rubberbanding
        dc.SetLogicalFunction(wx.XOR)

        # Set dc brush and pen
        # Here I set brush and pen to white and grey respectively
        # You can set it to your own choices

        # The brush setting is not really needed since we
        # dont do any filling of the dc. It is set just for 
        # the sake of completion.

        wbrush = wx.Brush(wx.Colour(255,255,255), wx.TRANSPARENT)
        wpen = wx.Pen(wx.Colour(200, 200, 200), 1, wx.SOLID)
        dc.SetBrush(wbrush)
        dc.SetPen(wpen)

    if event.LeftDown():

       # Left mouse button down, change cursor to
       # something else to denote event capture
       self.m_stpoint = event.GetPosition()

       # invalidate current canvas
       self._canvas.Refresh()
       # cache current position
       self.m_savepoint = self.m_stpoint
       self._selected = False
       self._leftclicked = True

    elif event.Dragging():   

        # User is dragging the mouse, check if
        # left button is down

        if self._leftclicked:

            # reset dc bounding box
            dc.ResetBoundingBox()
            dc.BeginDrawing()
            w = (self.m_savepoint.x - self.m_stpoint.x)
            h = (self.m_savepoint.y - self.m_stpoint.y)

            # To erase previous rectangle
            dc.DrawRectangle(self.m_stpoint.x, self.m_stpoint.y, w, h)

            # Draw new rectangle
            self.m_endpoint =  event.GetPosition()

            w = (self.m_endpoint.x - self.m_stpoint.x)
            h = (self.m_endpoint.y - self.m_stpoint.y)

            # Set clipping region to rectangle corners
            dc.SetClippingRegion(self.m_stpoint.x, self.m_stpoint.y, w,h)
            dc.DrawRectangle(self.m_stpoint.x, self.m_stpoint.y, w, h) 
            dc.EndDrawing()

            self.m_savepoint = self.m_endpoint # cache current endpoint

    elif event.LeftUp():

        # User released left button, change cursor back   
        self._selected = True  #selection is done
        self._leftclicked = False # end of clicking  
    if self._canvas.IsFrozen(): #prevent multiple thaws
        self._canvas.Thaw() #thaw it so it updates 
```

# iphone - 使用“用户定义的运行时属性”本地化情节提要中的视图

> ID：11779881
> 
> 赞同：12
> 
> 时间：2012-08-02T14:41:33.830
> 
> 标签：iphone, ios, localization, interface-builder, uistoryboard

我目前有一种[半自动化的方式](https://stackoverflow.com/questions/7412906/is-there-an-option-to-implicitly-localise-labels-in-interfacebuilder/7426436#7426436)来本地化我的视图。然而，今天我在 IB 中发现了一个有趣的部分，这似乎表明我可以在 Interface Builder 中本地化我的视图。

因此，在 IB 中，您可以在 Identity Inspector 中为选定对象定义运行时属性。所以对于我来说，`UILabel`我可以将`text`标签的键路径设置为 String `Hello World`。

但是，当我选择`Type = Localized String`和然后我的键名时，我`Localized.strings`没有得到翻译的字符串，而只是我在 IB 中输入的值（因此是键）。

我不明白，这个机制应该如何工作。我希望***能够***像这样翻译我的观点，有什么想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-07-02T09:50:14.567

“Localized String”类型的目的是让您定义一个将参与本地化过程的运行时属性值（使用基本本地化）。例如，如果您定义一个自定义控件，将其包含在情节提要中并希望将可本地化的字符串分配给其属性之一，这将非常方便。**但是，这仅适用于 Mac OS，不适用于 iOS。**

您可以通过以下实验轻松确认这一点：在情节提要中放置一个 UILabel / NSTextField 并使用用户定义的运行时属性设置“text”/“stringValue”属性。如果您使用“字符串”作为属性的类型并生成相应的字符串文件，您将不会在文件中的任何位置看到它。相反，如果您将类型更改为“本地化字符串”并生成字符串文件，您将找到如下条目：

```
/* Class = "IBUILabel"; wij-Kq-q92.ibExternalUserDefinedRuntimeAttributesLocalizableStrings[0] = "Localized value"; ObjectID = "wij-Kq-q92"; */
"wij-Kq-q92.ibExternalUserDefinedRuntimeAttributesLocalizableStrings[0]" = "Localized value"; 
```

然后你可以在对应的语言字符串文件中本地化这个值。同样，这适用于 Mac OS，但不适用于 iOS。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-30T12:04:11.873

“用户定义的运行时属性”记录得很差。我从读过的一本书中记得，UDRA 最初是为 MacOSX 编程实现的，因此“本地化字符串”类型可能是目前 iOS 中不完全支持的功能。

有趣的是，他正在翻译情节提要预览中的字符串（xCode 4.5.1），但后来在编译的 iOS 应用程序中，他只是注入了密钥字符串。

我现在正在考虑的一个解决方案是制作一个小助手类，即在 viewDidLoad 上检查视图的标题/文本字符串是否有“key”之类的关键字，例如“XYControllerTitleKey”，然后在其上创建 NSLocalizedString-Method .

**更新：** 与此同时，似乎有一种使用 UDRA 的方法：

[Storyboard/XIB 和本地化最佳实践](https://stackoverflow.com/questions/8846402/storyboard-xib-and-localization-best-practice/21443515#21443515)

结果是一个教程（[链接](https://medium.com/@mario.negro.martin/easy-xib-and-storyboard-localization-b2794c69c9db)）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T19:54:35.343

对我来说，使用 iOS 6，如果您从基本本地化故事板生成字符串（通过让 XCode 生成它们或使用`ibtool --generate-strings-file`您将获得看起来像这样的自动生成的字符串（`MainStoryBoard.strings`例如，应该进入）：

```
/* Class = "IBUITextField"; b4a-O4-bNZ.ibExternalUserDefinedRuntimeAttributesLocalizableStrings[0] = "Event Name"; ObjectID = "b4a-O4-bNZ"; */
"b4a-O4-bNZ.ibExternalUserDefinedRuntimeAttributesLocalizableStrings[0]" = "Event Name"; 
```

不幸的是，最好让它们通过键路径来识别，但至少你有你的用户定义的字符串应该被本地化的位置。

# php - 将 PDF 文件另存为 BLOB 时出现问题

> ID：11779882
> 
> 赞同：0
> 
> 时间：2012-08-02T14:41:35.937
> 
> 标签：php, mysql, blob

我正在尝试将 PDF 文件保存为 blob im MySQL 数据库。当我将文件保存到数据库中时会出现问题，它会显示语法错误，因此我必须在其中添加斜杠。

```
 $user_id      = sanitizeInt   ($user_id     );
    $file_content = addslashes    ($file_content);

    $query = "INSERT INTO `locker`.`files`(`id`, `user_id`, `file_name`, `file_content`) VALUES (NULL, $user_id, 'some_name.pdf', '$file_content');"; 
```

但是当我想稍后下载它时，我会做相反的事情。我查询然后使用删除斜线

```
 $query = "SELECT `files`.`file_content`, `files`.`file_name` FROM `files` WHERE `files`.`id` = $id LIMIT 0 , 1";

        $record = mysql_fetch_array($result, MYSQL_ASSOC);

        return stripslashes($record["file_content"]); 
```

当我输出 PDF 时，我得到一个空文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:48:00.223

我刚刚解决了这个问题。

我删除了stripslashes，它起到了一种魅力。

# php - 警告：session_start() [function.session-start]: open(/tmp/sess_e07..42c14904, O_RDWR)

> ID：11779889
> 
> 赞同：2
> 
> 时间：2012-08-02T14:41:46.947
> 
> 标签：php, session, warnings

当我将 index.php 文件更改为 index.html 文件然后再次更改回其原始 index.php 文件时出现此错误

谁能告诉我该怎么做才能防止此错误？

> 警告：session_start() [function.session-start]: open(/tmp/sess_e0725de9954b..2c14904, O_RDWR) failed: Permission denied (13) in /home/accn/public_html/dbc.php on line 42
> 
> 警告：session_start() [function.session-start]：无法发送会话缓存限制器 - 标头已在 /home/acceptin/public_html/dbc.php 中发送（输出开始于 /home/accn/public_html/dbc.php:42）在第 42 行

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-14T11:02:29.720

在您的根目录上创建文件夹“tmp”，权限为 777，然后在 start_session 之前，

```
ini_set('session.save_path', 'tmp'); 
```

完毕

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-16T08:35:34.483

使用 ini_set 时，请务必设置路径 '/tmp' 而不仅仅是 'tmp' 在我的情况下 'tmp' 不起作用。就像

```
ini_set('session.save_path', '/tmp') 
```

解决步骤

1.  在网站根目录内创建文件夹 tmp

2.  将权限更改为 777

    sudo chmod -R 777 tmp

3.  在代码中的 session_start() 上方输入这一行

    ini_set('session.save_path', '/tmp');

完毕。

# java - Java / Html - 换行符在标题中起作用，但在 alt 属性中不起作用（IE8）

> ID：11779890
> 
> 赞同：0
> 
> 时间：2012-08-02T14:41:53.590
> 
> 标签：java, html, internet-explorer-8

我想显示带有标题和 alt 属性的图像。它们都显示存储在变量中的相同内容。在显示之前，我将所有出现的“\n”替换为“”。现在有趣的部分：当悬停在图像上时，标题正确显示文本（句子下的句子），但替代文本显示“”而不是换行。

到底他妈发生了什么？o_o

谢谢你的帮助！

编辑：

```
 ...
        tooltipText = tooltipText.replaceAll("\n", "&#10;");
        startElement(HTML.IMG_ELEM, someName);
        writeAttribute(HTML.TITLE_ATTR, tooltipText);
        writeAttribute(HTML.ALT_ATTR, tooltipText);
        ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T17:48:49.860

我用谷歌搜索并在 Stack Overflow 上发现了另一个可能对您有帮助的问题：[<td title=""> 中的换行符](https://stackoverflow.com/questions/246438/newline-in-td-title)

编辑 - 在 Firefox 14.0.1 (Ubuntu) 上测试。但是，无法使用 IE8 进行测试。

# android - Google Play 中的国家/地区设置

> ID：11779896
> 
> 赞同：0
> 
> 时间：2012-08-02T14:42:06.240
> 
> 标签：android, settings, google-play

有人可以解释一下这些设置吗？

有第一个“定价”标签。在下一行有一个带有“所有国家/地区”的复选框，然后是一个带有某些国家/地区复选框的列表。然后是另一个带有“世界其他地区，除了：”的复选框，然后是一个国家列表，与第一个列表中的不同。

为什么列表是这样划分的？1 个组是否不够（例如“所有国家”和国家列表中的国家）？我的意思是，如果我在第一个列表中选择例如几个国家，并且下一个复选框“世界其他地区”与我只选择“所有国家”或如果我没有选择，那么这是非常多余和令人困惑的选择任何国家，只选择“世界其他地区”......

与这些问题有关，我以哪种方式进行设置是否会有所不同？例如，如果我选择“德国”、“法国”和“世界其他地区”，德国和法国会与世界其他地区不同吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-24T07:00:24.710

> 有第一个“定价”标签。在下一行有一个带有“所有国家/地区”的复选框，然后是一个带有某些国家/地区复选框的列表。

此复选框用于在特定国家分发。在这种情况下，您必须检查要分发的每个国家/地区。如果您想在更少的国家/地区分发您的应用程序，这将非常有用。

而在第二个复选框中，您无需检查您不想在哪里发布您的应用程序。如果您想在除一两个国家/地区之外的全世界分发您的应用程序，它会更有用。

可能它对你没那么有用，但谷歌和很多人认为它更有用。（特别是为某些特定人群制作的应用程序。）

# android - 如何验证 Google 官方 apk

> ID：11779903
> 
> 赞同：3
> 
> 时间：2012-08-02T14:42:27.537
> 
> 标签：android, rsa

有了所有适用于 android 的生根和自定义模块，让我感到紧张的是，一些声称它们是谷歌的 apk 实际上是恶意的。

因此，在尝试验证它们时，我提取了一个 ANDROID.RSA 公钥，并且我一直在尝试在线验证它.. 但是每个谷歌搜索都会出现在 android 上进行公钥加密的方法，而不是如何验证实际的谷歌 apk

所以我的基本问题是：

如何验证 google apk 实际上是 google apk？

我发现的一个特定的 RSA 公钥：

```
Owner: CN=Google NFC, OU=Android, O=Google Inc., L=Mountain View, ST=California, C=US
Issuer: CN=Google NFC, OU=Android, O=Google Inc., L=Mountain View, ST=California, C=US
Serial number: a8cd17c93da5d990
Valid from: Wed Mar 23 21:06:53 EDT 2011 until: Sun Aug 08 21:06:53 EDT 2038
Certificate fingerprints:
     MD5:  C9:E9:71:21:25:5D:E0:15:6F:3F:5B:24:B1:A8:47:6A
     SHA1: 82:75:9E:2D:B4:3F:9C:CB:AF:CE:31:3B:C6:74:F3:57:48:FA:BD:7A
     Signature algorithm name: SHA1withRSA
     Version: 3

Extensions: 

#1: ObjectId: 2.5.29.14 Criticality=false
SubjectKeyIdentifier [
KeyIdentifier [
0000: 1C CE CE 0E EA 4D C1 12   1F C7 51 5F 0D 0A 0C 72  .....M....Q_...r
0010: E0 8C C9 6D                                        ...m
]
]

#2: ObjectId: 2.5.29.19 Criticality=false
BasicConstraints:[
  CA:true
  PathLen:2147483647
]

#3: ObjectId: 2.5.29.35 Criticality=false
AuthorityKeyIdentifier [
KeyIdentifier [
0000: 1C CE CE 0E EA 4D C1 12   1F C7 51 5F 0D 0A 0C 72  .....M....Q_...r
0010: E0 8C C9 6D                                        ...m
]

[CN=Google NFC, OU=Android, O=Google Inc., L=Mountain View, ST=California, C=US]
SerialNumber: [    a8cd17c9 3da5d990]
] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T08:16:22.143

我在尝试为我的 Verizon Galaxy Nexus 验证 Google Wallet APK 的下载时将这个解决方案放在一起。

要验证应用程序签名，您需要具有某个版本的 apk 的受信任源。Android 强制使用相同的包名称的应用程序更新由相同的证书签名，因此 Google 电子钱包无法更改其证书，除非创建新的包名称并要求每个用户重新安装应用程序。

1.  从可信来源下载包含 Google 电子钱包的出厂映像

    [https://developers.google.com/android/nexus/images#takju](https://developers.google.com/android/nexus/images#takju)

2.  下载系统映像提取器

    [http://andwise.net/?attachment_id=406](http://andwise.net/?attachment_id=406)

3.  提取工厂图像

    ```
    tar xzvf takju-jro03c-factory-bf087655.tgz  
    mv takju-jro03c/image-takju-jro03c.zip . 
    ```

4.  提取嵌入图像（zip 文件）

    ```
    unzip image-takju-jro03c.zip 
    ```

5.  提取系统映像提取器（我们在第 2 部分下载的文件）

    ```
    tar xzvf ext4_utils.tar.gz  
    chmod +x simg2img 
    ```

6.  从系统镜像中提取一个 ext4 可挂载镜像

    ```
    ./simg2img system.img system.image.ext4 
    ```

7.  `mkdir sys`

8.  以新创建的 sys/ 文件夹作为挂载点挂载解压后的 ext4 镜像

    ```
    sudo mount -t ext4 -o loop system.image.ext4 sys/ 
    ```

9.  查看 Wallet.apk 证书

    ```
    unzip -p sys/app/Wallet.apk META-INF/CERT.RSA | keytool -printcert 
    ```

10.  比较指纹和序列号（我将它们复制到 python 字符串中并以这种方式进行比较）。查找 SHA-1 原像攻击需要大约 2^160 次猜测，因此如果指纹匹配，则下载的 APK 出错的可能性很小。

您还可以将提取的出厂映像 Wallet.apk 侧载到手机上`adb install sys/app/Wallet.apk`，然后在手机上下载新的 apk 并从文件管理器启动它以执行升级。Android 将为您进行证书验证。

# .net - Winforms 在用户屏幕上随机控制大小

> ID：11779905
> 
> 赞同：0
> 
> 时间：2012-08-02T14:42:29.677
> 
> 标签：.net, winforms

我有一个商业的 .net winforms 应用程序（如果重要的话，它也使用 Krypton Toolkit），在大多数用户屏幕上，表单是正常绘制的，但是在几个用户屏幕上，一些控件（主要是多行文本框）不是我指定的尺寸并显示更大/相互隐藏。什么可能导致这个问题？

谢谢

# sql - 无法让 DELETE 语句在我的 SQL 触发器中工作

> ID：11779908
> 
> 赞同：-1
> 
> 时间：2012-08-02T14:42:35.363
> 
> 标签：sql, sql-server-2008, triggers, sql-update

我在下面创建了触发器。基本思想是`port_module_instance_setting`表在 中存储一个字符串，表示一个设置（在这种特定情况下，设置条件以使该`value`字段始终为数字）。我想要完成的是，当在`value`这些特定“设置”之一中更新该字段 时`cust_profile_attribute`，旧表中引用的所有内容`value`都会被删除。在这种情况下，`value`字段 of`port_module_instance_setting`是直接引用`attribute_group_id`of的数字 varchar 值`core_attribute`。请不要评论有关使用不同数据类型引用表的最佳实践，因为我无法控制实际的表结构:) 触发器中的所有内容都正常运行，除了`DELETE`最后声明。它什么也没做。关于它为什么不删除我想要的属性的任何想法？

代码：

```
ALTER TRIGGER [dbo].[cust_trgr_profile_attribute] 
ON [dbo].[port_module_instance_setting]      
AFTER INSERT, UPDATE
AS

DECLARE @ModuleId INT=449,
        @MatchGroupModSetting VARCHAR(50) = 'AttributeGroup',
        @FilterGroupModSetting VARCHAR(50) = 'FilterAttributeGroup',
        @MatchAttributes TABLE (attribute_id INT),
        @FilterAttributes TABLE (attribute_id INT)

INSERT INTO @MatchAttributes
  SELECT DISTINCT camatch.attribute_id 
  FROM inserted I
  JOIN core_attribute camatch ON I.value = CONVERT(VARCHAR(10), camatch.attribute_group_id)
  JOIN port_module_instance pmi ON I.module_instance_id = pmi.module_instance_id
       AND pmi.module_id=@ModuleId
  WHERE I.name like @MatchGroupModSetting+'_'

INSERT INTO @FilterAttributes
  SELECT DISTINCT cafilter.attribute_id 
  FROM inserted I
  JOIN core_attribute cafilter ON I.value = CONVERT(VARCHAR(10), cafilter.attribute_group_id)
  JOIN port_module_instance pmi ON I.module_instance_id = pmi.module_instance_id
       AND pmi.module_id=@ModuleId
  WHERE I.name=@FilterGroupModSetting

IF ((SELECT COUNT(*) FROM @MatchAttributes) > 0 OR (SELECT COUNT(*) FROM @FilterAttributes) > 0)
BEGIN
    IF (SELECT COUNT(*) FROM @MatchAttributes) > 0
    BEGIN
        UPDATE cpa 
           SET cpa.[required]=0
          FROM cust_profile_attribute cpa
          JOIN @MatchAttributes ma ON cpa.attribute_id = ma.attribute_id
    END

    IF (SELECT COUNT(*) FROM @FilterAttributes) > 0
    BEGIN
        UPDATE cpa 
           SET cpa.[required]=0
          FROM cust_profile_attribute cpa
          JOIN @FilterAttributes fa ON cpa.attribute_id=fa.attribute_id
    END
    DELETE FROM cust_profile_attribute
    WHERE attribute_id IN(SELECT ISNULL(attribute_id,-1) FROM deleted d
                          JOIN core_attribute ca ON ca.attribute_group_id= CONVERT(INT,d.value))
    END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T15:19:04.890

将相关信息添加到原始问题（ [触发器定义中的 DELETE 语句问题](https://stackoverflow.com/questions/11767725/delete-statement-issues-within-a-trigger-definition)）将此作为经验教训（和我的 -1 点）并回答帖子以希望杀死它。请点击链接查看原始问题。

# android - 后台应用支持

> ID：11779909
> 
> 赞同：0
> 
> 时间：2012-08-02T14:42:40.500
> 
> 标签：android, ios, mobile

我制作了一个应用程序，其中用户存储了各种事件的警报。这个应用程序可以在安卓和 i 设备上运行。因此，当事件发生时，应用程序会发出警报。但是如果我关闭应用程序，显然它不会提醒我警报。我希望即使用户关闭应用程序，他也应该被告知警报。

据我了解，有两种可能发生这种情况。1 -> 在后台运行应用程序（使用线程）。2 -> 一旦用户启动任何警报，它就会存储在数据库中，并且每次应用程序运行并安装新警报时，数据库都会不断更新。但话又说回来，我必须单独为数据库制作另一个应用程序，并且它将在后台运行。

我只是想避免它在后台运行。有什么可行的解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T15:29:31.540

在 iOS 上，您只能运行非常特定的后台任务。

根据需要警报的时间，您可以使用本地通知或推送通知，请参阅：[Apple 文档](https://developer.apple.com/library/ios/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008194-CH1-SW1)

# windows-phone-7 - 如何正确使用 datacontext 多种方式

> ID：11779913
> 
> 赞同：0
> 
> 时间：2012-08-02T14:42:49.767
> 
> 标签：windows-phone-7, wpf-controls

好的，所以我想使用颜色选择器并找到 Alex Yakhnin 的博客...

[http://blogs.msdn.com/b/priozersk/archive/2010/09/17/customizing-picker-box-dialog.aspx](http://blogs.msdn.com/b/priozersk/archive/2010/09/17/customizing-picker-box-dialog.aspx)

从博客中实现此代码后：

```
 DialogViewModel viewModel;
    PickerBoxDialog customDialog;
    ColorItem currentColorItem;

    private void InitCustomPickerDialog()
    {
        // Initialize viewmodel
        this.viewModel = new DialogViewModel();
        this.currentColorItem = viewModel.Items[0];

        // Assing it to the page's DataContext
        this.DataContext = currentColorItem;
        this.customDialog = new PickerBoxDialog();
        this.customDialog.Title = "ACCENTS";

        // Assign our style to the dialog
        this.customDialog.Style = this.Resources["Custom"] as Style;
        this.customDialog.ItemSource = viewModel.Items;
        this.customDialog.Closed += new EventHandler(customDialog_Closed);
    }
    void customDialog_Closed(object sender, EventArgs e)
    {
        this.currentColorItem = (ColorItem)this.customDialog.SelectedItem;
        this.DataContext = currentColorItem;
    }
    private void buttonColor_Click(object sender, RoutedEventArgs e)
    {
        this.customDialog.Show();
    } 
```

我意识到页面的数据上下文被用来设置选择器的颜色。我在同一页面上使用了一个列表框，它还设置页面的数据上下文以显示鱼列表。

```
 public FishsPage()
    {
        InitializeComponent();
        DataContext = App.vmFish;
        InitCustomPickerDialog();
    } 
```

因此，我现在需要页面的数据上下文来处理 2 个不同的事情。有没有办法同时使用颜色选择器控件和鱼列表？

Erno的建议？：

```
public class FishViewModelComplete : INotifyPropertyChanged
{
    private readonly ReefServiceClient wcfProxy;

    public FishViewModelComplete()
    {
        vmFish = new FishViewModel();
        vmDialog = new DialogViewModel();
    }

    private FishViewModel _vmFish;
    public FishViewModel vmFish
    {
        get
        {
            return _vmFish;
        }
        set
        {
            _vmFish = value;
        }
    }

    private DialogViewModel _vmDialog;
    public DialogViewModel vmDialog
    {
        get
        {
            return _vmDialog;
        }
        set
        {
            _vmDialog = value;
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:50:14.170

创建第三个 ViewModel，它通过属性公开两个 ViewModel，并将适当的控件绑定到它们。

# ruby-on-rails - Jquery.tinymce.js 被加载但 TinyMCE 没有被插入

> ID：11779918
> 
> 赞同：3
> 
> 时间：2012-08-02T14:43:05.430
> 
> 标签：ruby-on-rails, tinymce

我们已经在我们的应用程序的几个地方使用了 tinyMCE，只需向文本区域或我们需要插入 TinyMCE 的任何元素添加一个类。但是当我尝试将 tinyMCE 添加到新创建的文本区域时，它不会被加载。但是当我检查代码时，我可以发现 Jquery.tinymce.js 脚本已经加载。请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:50:41.343

看起来您在页面加载时调用了 tinymce init 函数。当您动态创建一个新的 textarea 时，您应该显式地初始化该 tinymce 实例。为此用途：

```
tinymce.execCommand('mceAddControl', false, 'id_of_the_new_textarea'); 
```

# playn - 在android上使用immediateLayer的低帧率（和奇怪的播放日志消息）

> ID：11779919
> 
> 赞同：0
> 
> 时间：2012-08-02T14:43:05.410
> 
> 标签：playn

我正在尝试使用 PlayN 让我的游戏在 android 上顺利运行，一切都按预期运行，但我的帧速率非常低。我想我可能做错了，所以如果有人能给我一些帮助，那就太好了：D。

所以我目前正在创建一个 ImmediateLayer 并清理它并在每一帧绘制每个对象，使用 graphics.getImage(...) 加载一次图像。在绘制大约 100 张图像时，我在 HTC Desire（以调试模式连接）上获得了大约 10 fps。当我添加对象时它会变慢。是什么让我觉得我做错了什么是 PlayN 用这些消息向日志发送垃圾邮件（我使用 DDMS 检查日志）。

> 剩余 X 纹理
> 
> 已创建 Y 纹理

它每秒出现大约 20 次。

所以基本上我正在做这样的事情：

```
public void draw(Surface s){
for (Drawable d : toDraw) {
        surface.drawImage(d.getImage(), d.x, d.y, d.w, d.h); }} 
```

在 immediateLayer 的渲染器中调用 draw 的地方。

感谢您的时间！

卢卡斯

**编辑：** 我在 playn 邮件列表上找到了一个可能的答案阅读该线程。 [https://groups.google.com/forum/?fromgroups#!topic/playn/XJTlBgmfzaQ](https://groups.google.com/forum/?fromgroups#!topic/playn/XJTlBgmfzaQ)

尤其是那条信息

> > 大多数图块共享相同的图像，但它的不同部分（由 subImage 获得，据我所知，它不会复制，而只是创建对图像子部分的引用？）。不同的子部件会导致纹理变化吗？
> 
> 子图像将共享相同的纹理，但您必须确保将所有共享相同纹理的图像一起渲染。如果你有一堆来自图像 A 的子图像和一堆来自图像 B 的子图像，并且你渲染 A、B、A、B、A、B、A、B，你将获得与渲染八个不同图像相同的性能。您需要渲染 A、A、A、A、B、B、B、B。

看来我处于最坏的情况。

我有许多不同的纹理（比如 50 个），它们都是不同图像的一部分，并且都是随机渲染的。我最终可能会得到接近 N 纹理开关的东西，其中 N 是我渲染的对象的数量。

当我得到一些工作时，我会更新这个:)。

**编辑2：**

我现在正在渲染 100 个指向同一图像的对象（所以没有纹理交换？）。我仍然在 android 上获得大约 10 fps 并且调试日志仍然在每一帧中说：

保留 1 个纹理 2 个已创建纹理

我觉得我错过了一些重要的东西......帮助:)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T10:15:03.770

经过一些更深入的测试，我发现：

1) 不能指望 htc 的愿望能够以 60 fps 的速度绘制数百个对象，即使共享相同的图像。

2) 附加到组层的 imageLayer 似乎在 android 上提供了更好的性能

**3) 在渲染器回调开始时调用surface.clear()（使用立即层）大大提高了绘制的性能，并删除了“创建的纹理”调试日志。**

4）最后按纹理对对象进行排序并减少纹理交换的次数（绘制 AAAABBB 而不是 ABABAB）给了我更好的结果。

该应用程序现在以 30 fps 的速度运行，在 Galaxy S2 上以 60 fps 的速度在屏幕上绘制大约 500 个对象。

# php - 使用json和php时如何检查foreach循环是否为空

> ID：11779920
> 
> 赞同：-1
> 
> 时间：2012-08-02T14:43:06.770
> 
> 标签：php, json

我使用 JSON 来获取数据，然后使用 PHP 来显示。所以......我正在向一个人展示所有可用的东西，并且我想在循环为空白/空时回显一条消息“没有可用的东西”，因为现在它只是在没有数据时显示一个空白屏幕......有任何想法吗？？

```
<? 
foreach($json['available'] as $r) { 
echo '<li><a href="url.php?id='.$r['id'].'">' .$r['item'].'</a></li>'; 
}}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:44:46.977

使用[empty](http://php.net/empty)检查 $json 是否包含某些内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T14:44:53.480

假设`$json['available']`在最坏的情况下这将是一个空数组：

```
if (!$json['available']) {
    echo "nothing to show!";
}
else {
    // your current code
} 
```

如果有`$json['available']`可能甚至可能不存在，那么一个更“重手”的选择是

```
if (empty($json['available'])) {
    echo "nothing to show!";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T14:45:21.253

只需使用`if`语句并`$json['available']`使用 . 检查是否为空[`empty()`](http://php.net/empty)。

```
if( empty( $json['available'])) {
    echo '<li>No items are available</li>';
} else {
    foreach($json['available'] as $r) { 
        echo '<li><a href="url.php?id='.$r['id'].'">' .$r['item'].'</a></li>'; 
    }
} 
```

# php - Google Drive api (PHP) 缺少 apiDriveService 类

> ID：11779924
> 
> 赞同：1
> 
> 时间：2012-08-02T14:43:18.333
> 
> 标签：php, google-drive-api

我刚刚在那里下载了最新的 Google API PHP 客户端库（0.5.0）：

[http://code.google.com/p/google-api-php-client/downloads/detail?name=google-api-php-client-0.5.0.tar.gz&can=2&q=](http://code.google.com/p/google-api-php-client/downloads/detail?name=google-api-php-client-0.5.0.tar.gz&can=2&q=)

并且类 apiDriveService 不在代码中，并且我可以在哪里找到它的 contrib 中缺少文件？

该链接在 Google Drive SDK 文档中提到：[https ://developers.google.com/drive/downloads](https://developers.google.com/drive/downloads)

所以我不明白

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:47:31.440

你可以在这里找到它：

*   [http://code.google.com/p/google-api-php-client/source/browse/trunk/src/contrib/apiDriveService.php](http://code.google.com/p/google-api-php-client/source/browse/trunk/src/contrib/apiDriveService.php)
*   [https://code.google.com/p/google-drive-sdk-samples/source/browse/#hg%2Fphp%2Flibs%2Fgd-v2-php%2Fcontrib](https://code.google.com/p/google-drive-sdk-samples/source/browse/#hg%2Fphp%2Flibs%2Fgd-v2-php%2Fcontrib)

# visual-studio-2010 - 如何指定测试运行的构建目录（使用 Microsoft 测试管理器）

> ID：11779929
> 
> 赞同：2
> 
> 时间：2012-08-02T14:43:25.817
> 
> 标签：visual-studio-2010, tfs, tfsbuild, microsoft-test-manager

我正在尝试使用 Microsoft 测试管理器运行自动编码的 UI 测试，但我在测试运行日志条目中收到以下错误消息：

> “启动测试运行时出错：未指定测试运行的构建目录或不存在”

我已经有一个分配给测试运行的构建。

当我试图从构建机器启动测试时，我看不到它是如何找不到构建目录的。

编辑：也许可以创建一个假的构建，我可以将测试链接到？如何才能做到这一点？

更新：我将测试项目添加到构建中，并将测试用例与有序测试列表重新关联，然后创建另一个构建。我确保构建输出到正确的位置 C:\GatedCheckinBuild，并确保该文件夹都创建了我的测试项目和有序的测试列表。

但是在尝试运行测试时我仍然遇到同样的错误。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T20:22:37.513

必须将测试分配/链接到包含测试 DLL 的构建。将您的测试项目添加到他们正在测试的解决方案中，以便将它们构建在一起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T10:34:48.383

选择包含您的测试 dll 的适当“内置使用”。更改“使用中构建”的测试计划属性并保存。

# html - 百分比或像素：在宽度和高度上使用什么

> ID：11779932
> 
> 赞同：0
> 
> 时间：2012-08-02T14:43:31.743
> 
> 标签：html, css, web

所以我需要对此的专业意见。很长一段时间以来，这一直是我的困境，因为我担心如果我使用宽度为 a 的像素，`<div>`那么我认为它看起来会根据显示器的屏幕分辨率而有所不同。这就是为什么我总是在宽度中使用百分比，例如，当我为 div 分配 90% 的宽度时，CSS 将能够将其调整为屏幕分辨率。

关于使用百分比和像素，我的逻辑是否正确？请帮我解决这个问题，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:47:56.823

我认为你的策略非常明智。当开发不止一种显示器尺寸/设备时，最好使用百分比。但是，您需要确保以一种或另一种方式做所有事情，否则可能会出现一些有趣（但不是功能性）的结果。但是，有时如果您正在为一个非常小的屏幕进行开发，最好有一个单独的样式表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T14:50:46.167

不，您的逻辑并不正确。这完全取决于您的布局。如果您创建具有固定尺寸（像素）的布局，那么当屏幕大小（或窗口大小）发生变化时，布局的大小不会改变。在这样的布局中，您可以将像素和百分比用于内部元素，具体取决于您最适合使用的内容。

当你有一个流畅的布局（百分比）时，布局会随着屏幕尺寸的变化而改变它的尺寸。在这种类型的布局中，您主要将 % 用于内部元素，并且可能在精心挑选的元素上使用一些像素大小。

# svg - 触发 raphael 的 startDrag

> ID：11779936
> 
> 赞同：0
> 
> 时间：2012-08-02T14:43:43.533
> 
> 标签：svg, raphael, drag

想象一下，我在 raphaeljs 纸上有两个圆圈：A 和 B。

B 已设置为可通过正常拖动功能进行拖动，即 B.drag(onMove, onStart, onFinish)

单击A时，我想务实地触发B的拖动。

这是否可以通过利用 B 上已经建立的拖动功能来实现？（我首先尝试寻找 Element.startDrag() 函数或类似函数，但这似乎不存在）

进一步的背景：

我正在做一个任务管理器。在上面的示例中，B 是在时间线上显示任务的到期日期的标记。A 是位于 B 上方的按钮，单击时确认任务已完成。当任务完成时，用户必须选择任务的完成日期（因为这可能与到期日期不同）。因此，在确认任务已完成后，应用程序创建 B 的克隆，我们称其为 C（表示完成日期）。必须沿时间线拖动以显示正确的完成日期。我试图使工作流程更顺畅，以便在确认任务时（通过单击 A），它会克隆 B 并自动处于拖动模式（即它跟随鼠标）。

# jquery - 多个搜索类别的自动完成

> ID：11779938
> 
> 赞同：0
> 
> 时间：2012-08-02T14:43:44.880
> 
> 标签：jquery, jquery-ui, jsf, autocomplete, jquery-ui-autocomplete

我正在使用 JSF 开发搜索引擎类型的应用程序。使用关键字搜索时，它会返回结果。为了优化搜索，我必须提供多个过滤器类别，每个类别都有一个自动完成的文本框和复选框。在文本框中输入时，它必须显示建议，并且在选择时，它必须选中相应的复选框。

我尝试了 jquery UI 多选插件，但所有类别的标题保持不变。（如果我在 jqueryui.multiselect.js 中为 Product Line GPL 指定标题，则所有条件都相同）。

有没有其他方法可以动态更改标题或我可以使用的任何其他组件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:42:22.470

也许您应该拦截单击事件以强制按钮文本内容...

# php - 无法在 Drupal 7 中显示 RSS 提要

> ID：11779940
> 
> 赞同：0
> 
> 时间：2012-08-02T14:43:49.750
> 
> 标签：php, drupal, rss, feed, atom-feed

我无法在 Drupal 7.14 页面上显示 RSS 提要，提要不显示任何项目。提要网址：[http ://www.engadget.com/rss.xml 我在](http://www.engadget.com/rss.xml)**提要聚合器**
中添加提要网址没有问题，提要名称显示在“提要概览”列表中，但是当我单击“更新项目”链接时，我收到消息：

 **> “由于错误“0 打开套接字 tcp://www.engadget.com:80 时出错，来自小工具的提要似乎已损坏。Gadgets 没有新的联合内容。”

它不显示任何项目。我试图运行`cron`，但这没有帮助。我在 RSS 验证器中测试了提要的有效性，它表明提要是有效的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T17:52:38.120

这是唯一发生的饲料吗？您可能还想检查 Drupal 和您网站的 tmp/cache 文件夹中的权限。

**2012-08-03 09:25 GMT-6 更新：** 是的，听起来像是主机的配置问题：

> “在 D7 中，drupal_http_request() 使用 php 函数 stream_socket_client()。在我的特殊情况下，我的主机提供商启用了 ftp_connect()，但禁用了一大堆他们认为存在安全风险的原生 php 函数。”

[来自 Drupal.org 的节点 1016980](http://drupal.org/node/1016980#comment-4068544)

> “D7 使用函数 stream_socket_client()、fread()、fwrite()、stream_set_timeout() 和 stream_get_meta_data()。[...] 就我而言（事实证明），我的托管服务提供商禁用了 [... "

[“一句话或警告”，Drupal API 文档](http://api.drupal.org/api/drupal/includes!common.inc/function/drupal_http_request/7#comment-11994)

与他们合作或切换主机。您可以在本地 Drupal 设备上测试您的站点，例如 QuickStart 或 AquiaDev（您可以在其上开发和测试 Drupal 站点的本地虚拟盒子。）**

# networking - ISDN 成帧信息

> ID：11779953
> 
> 赞同：-1
> 
> 时间：2012-08-02T14:44:39.223
> 
> 标签：networking, wan

我了解到 ISDN 基本速率接口有

*   1 个 D-Channel à 16kbit/s 用于连接和配置
*   2 个 B 通道 à 64kbit/s 用于数据
*   1 YY à 48kbit/s 帧信息

总结为192kbit/s。但在 Wikipedia 中，我读到大约 144kbit/s 没有 YY。什么是YY？我无法想象这是 ISDN 的成帧/传输的开销......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T15:10:40.633

看来传输协议实际上需要48kbit/s。

> “两个 64 Kbps 的 B 通道加上一个 16 Kbps 的 D 通道等于 144K bps。ISDN 基本速率传输协议使用额外的 48 Kbps 带宽进行维护和同步，因此 ISDN 基本速率接入实际上使用 192 Kbps。” [ [testfest.com](http://www.techfest.com/networking/wan/isdn.htm) ]

# authentication - 您能否在其他 FB 方法（如 FB.getLoginStatus）的回调中调用 FB.login 而不会触发弹出窗口阻止程序？

> ID：11779955
> 
> 赞同：0
> 
> 时间：2012-08-02T14:44:39.700
> 
> 标签：authentication, popup, facebook-javascript-sdk, facebook-authentication

我正在尝试使用 FB JavaScript SDK 设置一个非常基本的身份验证逻辑流程，以在执行操作之前检查用户的登录状态和权限（如果没有，则提示用户使用权限登录）。

1.  用户在我的站点上的文本区域中键入一条消息以发布到他们的 Facebook 提要，然后单击我站点上的“发布到 Facebook”按钮。
2.  为了响应点击，我使用 . 检查用户的登录状态`FB.getLoginStatus`。
3.  在对 的回调中`FB.getLoginStatus`，如果用户未登录，则提示他们登录（`FB.login`）。
4.  在回调中，`FB.login`我需要确保他们拥有正确的权限，所以我打电话给`FB.api('/me/permissions')` - 如果他们没有，我再次提示他们登录 ( `FB.login`)。

我遇到的问题是，每当我尝试`FB.login`在回调中调用其他 FB 方法时，浏览器似乎都会忘记执行的来源（点击），因此会阻止弹出窗口。我想知道我是否缺少某种方式在检查用户状态后提示用户登录，而浏览器不会错误地认为它不是用户启动的弹出窗口？

我目前已经退回到只是`FB.login()`先打电话。但是，这种方法的不良副作用是，如果用户已经使用权限登录并且我仍在调用`FB.login`，则身份验证弹出窗口将在继续之前立即打开和关闭，尽管功能正常，但看起来相当有问题。

在做某事之前检查用户的登录状态和权限似乎是一种常见的流程，所以我觉得我错过了一些东西。这是一些示例代码。

```
<div onclick="onClickPostBtn()">Post to Facebook</div>

<script>
// Callback to click on Post button.
function onClickPostBtn() {

    // Check if logged in, prompt to do so if not.
    FB.getLoginStatus(function(response) {
        if (response.status === 'connected') {
            checkPermissions(response.authResponse.accessToken);
        } else {
            FB.login(function(){}, {scope: 'publish_stream'})
        }
    });
}

// Logged in, check permissions.
function checkPermissions(accessToken) {
    FB.api('/me/permissions',
        {'access_token': accessToken},
        function(response){

            // Logged in and authorized for this site.
            if (response.data && response.data.length) {

                // Parse response object to check for permission here...

                if (hasPermission) {
                    // Logged in with permission, perform some action.
                } else {
                    // Logged in without proper permission, request login with permissions.
                    FB.login(function(){}, {scope: 'publish_stream'})
                }

            // Logged in to FB but not authorized for this site.
            } else {
                FB.login(function(){}, {scope: 'publish_stream'})
            }
        }
    );
}
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T15:13:00.547

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T03:21:39.210

我有另一种解决方案，可以更优雅地检查用户是否有

*   A) 登录 FB
*   B) 正确的权限

简而言之，对于 A)，您需要“提醒”用户他没有登录，而不是“回调”Fb.login。然后您的页面应该刷新，并在刷新期间处理登录过程。

但是，对于 B) 权限，您使用 fb.ui 方法（使用 display: iframe）请求权限（通过回调），而不是使用 fb.login 来请求权限。使用 display:iframe 应该可以避免弹出窗口拦截器的麻烦。

**请看下面修改后的代码：**

```
<div onclick="onClickPostBtn()">Post to Facebook</div>

<script>
// Callback to click on Post button.
function onClickPostBtn() {

    // Check if logged in, prompt to do so if not.
    FB.getLoginStatus(function(response) {
        if (response.status === 'connected') {
            checkPermissions(response.authResponse.accessToken);
        } else {
            //Don't call FB.login because this results in popup blocker.
            //FB.login(function(){}, {scope: 'publish_stream'})
            //Instead, just alert user that "YOu are not connected to FB", and then refresh the page (which should theoreticalyl handle the logging aspect)
        }
    });
}

// Logged in, check permissions.
function checkPermissions(accessToken) {
    FB.api('/me/permissions',
        {'access_token': accessToken},
        function(response){

            // Logged in and authorized for this site.
            if (response.data && response.data.length) {

                // Parse response object to check for permission here...

                if (hasPermission) {
                    // Logged in with permission, perform some action.
                } else {
                    //Don't use FB.login to request permissions. Instead use a FB.ui ({method:'permissions.request'} with "display" set to "iframe"
                    //FB.login(function(){}, {scope: 'publish_stream'})

                    FB.ui(
                    {
                         method: 'permissions.request',
                         'perms': 'publish_stream,WHATEVER_PERMISSIONS',
                         'display': 'iframe' //THIS IS IMPORTANT TO PREVENT POPUP BLOCKER
                    },
                    function(response) {
                        //Do action if permissions add success other wise prompt error adding permissions.
                    }
                }

            // Logged in to FB but not authorized for this site.
            } else {

                //Don't call FB.login because this results in popup blocker.
                //FB.login(function(){}, {scope: 'publish_stream'})
                //Instead, just alert user that "YOu are not connected to FB", and then refresh the page (which should theoreticalyl handle the logging aspect)
            }
        }
    );
}
</script> 
```

# android-ndk - 将 VPATH 与 ndk-build 一起使用

> ID：11779957
> 
> 赞同：0
> 
> 时间：2012-08-02T14:44:47.317
> 
> 标签：android-ndk, makefile, vpath

目前正在尝试将 a 移植`Makefile`到一个`Android.mk`文件中，以便我可以使用它构建一个共享库`ndk-build`

我似乎无法让 VPATH 做任何事情。

例如

```
# File: Android.mk
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

LOCAL_MODULE    := example

MY_API_SRCS = \
    core/src/destroy.c \
    core/src/initialise.c \
    core/src/loadLibrary.c \
    core/src/loadSettings.c \
    core/src/processPulses.c 
```

工作正常，但试图剥离目录部分并指定一个 VPATH 而不是，例如

```
# File: Android.mk
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

LOCAL_MODULE    := example

VPATH := $(LOCAL_PATH)/core/src

MY_API_SRCS = \
    destroy.c \
    initialise.c \
    loadLibrary.c \
    loadSettings.c \
    processPulses.c 
```

我`no such file or directory error`在跑步时得到一个`ndk-build`

我是否认为您应该能够在 Android.mk 文件中使用标准的 GNU Make 语法？不知道为什么这不起作用...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:46:25.350

你的 VPATH 上有一个反斜杠：p

# mysql - 我在哪里可以找到/修改 mysql 浮点数的默认精度？

> ID：11779959
> 
> 赞同：0
> 
> 时间：2012-08-02T14:44:49.217
> 
> 标签：mysql, ebean

我遇到了一个问题，似乎 mysql 5.1.63（在 debian 上）将 2/3 存储为
`0.666666666666667`，在 mysql 5.5.21（在 mac 上）存储为
`0.6666666666666667`

因为我碰巧使用[Ebean](http://www.avaje.org/)来管理我的数据库交互，所以我需要 mysql DOUBLE 表示来对应于 java`double`表示。（否则 Ebean 将抛出一个`OptimisticLockException`java`double`表示在 mysql 表中找不到）

由于 Ebean 正在`create table`为我生成语法并生成 DOUBLE 字段（不幸的是没有 DECIMAL），我很好奇是否有一些设置可以告诉 mysql 在没有明确精度设置的情况下定义 DOUBLE 时使用哪种精度。

如果您有其他关于如何解决此问题的提示，我们也非常欢迎。

干杯，丹尼尔

# ios - ios - 如何从 UITableView 单元格中获取 id 完整数组值？

> ID：11779965
> 
> 赞同：0
> 
> 时间：2012-08-02T14:44:59.160
> 
> 标签：ios, ios5, uitableview

我能够像这样获取单元格的文本值：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
{
    NSUInteger *row = [indexPath row];

    // NOW GET THE NAME AND ID FROM THAT ROW
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    NSString *cellText = cell.textLabel.text;    

    NSLog(cellText);    
} 
```

但我需要能够获取该项目的 id，或者至少使用该行从数组中获取该项目。

这是我获取填充的 UITableView 数组的方法：

```
@synthesize items_array; 
```

然后：

```
 items_array = [NSJSONSerialization JSONObjectWithData:data options:NSJSONReadingMutableContainers error:nil];

                 [self.itemList reloadData]; 
```

并且该数组具有 JSON，其中包含每个项目、item_id 和 item_name 等字段

那么当用户点击列表中的某个项目时，如何获取 id 字段？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T14:56:09.907

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    NSString *idField = [items_array objectAtIndex:indexPath.row];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T16:02:48.610

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
{
    NSDictionary *itemInfo = [items_array objectAtIndex:indexPath.row];
    NSString *itemID = [itemInfo objectForKey:@"item_id"];
} 
```

# android - 如何使用 Android NDK 在线程上插入断点而不崩溃？

> ID：11779968
> 
> 赞同：3
> 
> 时间：2012-08-02T14:45:02.900
> 
> 标签：android, debugging, android-ndk, gdb

我目前正在使用我的 android 项目调试一些代码。

我在让 gdb 在辅助线程上达到我的断点时遇到问题。当它们设置在主线程上时一切正常，但是一旦在辅助线程上遇到断点，我的应用程序就会崩溃。

我在网上搜索过，有人说 ndk 使用的是旧版本的 GDB，但现在这似乎无关紧要（因为 ndk r8 附带的版本提供了 7.3.1）。另一个站点说包含的 gdb 版本是在没有多线程支持的情况下编译的，但我似乎也无法验证这一点。

额外细节：

*   设备：Nexus S
*   操作系统：安卓 4.1.1

我不确定这是否相关，但是当我将调试器附加到正在运行的应用程序时，我得到以下输出（似乎只有符号问题）：

```
warning: .dynamic section for "/home/sandy/workspace/tumbleweed/obj/local/armeabi-v7a/linker" is not at the expected address (wrong library or version mismatch?)
warning: Could not load shared library symbols for 78 libraries, e.g. libstdc++.so.
Use the "info sharedlibrary" command to see the complete listing.
Do you need "set solib-search-path" or "set sysroot"?
warning: Unable to find dynamic linker breakpoint function.
GDB will be unable to debug shared library initializers and track explicitly loaded dynamic code. 
```

另外，这是我运行 ndk-gdb --verbose 时的详细输出：

```
Android NDK installation path: /home/sandy/workspace/android-ndk-r8b
Using default adb command: /home/sandy/workspace/android-sdk/platform-tools/adb
ADB version found: Android Debug Bridge version 1.0.29
Using ADB flags: 
Using auto-detected project path: .
Found package name: com.sandroid.tumbleweed
ABIs targetted by application: jni/../libs
/home/sandy/workspace/tumbleweed/libs/gtest-1.6.0
/home/sandy/workspace/tumbleweed/libs/gtest-1.6.0/lib/.libs/libgtest.a
armeabi-v7a
Device API Level: 16
Device CPU ABIs: armeabi-v7a armeabi
Compatible device ABI: armeabi-v7a
Using gdb setup init: ./libs/armeabi-v7a/gdb.setup
Using toolchain prefix: /home/sandy/workspace/android-ndk-r8b/toolchains/arm-linux-androideabi-4.6/prebuilt/linux-x86/bin/arm-linux-androideabi-
Using app out directory: ./obj/local/armeabi-v7a
Found debuggable flag: true
Found device gdbserver: /data/data/com.sandroid.tumbleweed/lib/gdbserver
Found data directory: '/data/data/com.sandroid.tumbleweed'
Found running PID: 3539
Launched gdbserver succesfully.
Setup network redirection
## COMMAND: adb_cmd shell run-as com.sandroid.tumbleweed lib/gdbserver +debug-socket --attach 3539
## COMMAND: adb_cmd forward tcp:5039 localfilesystem:/data/data/com.sandroid.tumbleweed/debug-socket
## COMMAND: adb_cmd pull /system/bin/app_process ./obj/local/armeabi-v7a/app_process
Attached; pid = 3539
Listening on sockaddr socket debug-socket
118 KB/s (9572 bytes in 0.078s)
Pulled app_process from device/emulator.
## COMMAND: adb_cmd pull /system/bin/linker ./obj/local/armeabi-v7a/linker
844 KB/s (79976 bytes in 0.092s)
Pulled linker from device/emulator.
## COMMAND: adb_cmd pull /system/lib/libc.so ./obj/local/armeabi-v7a/libc.so
1662 KB/s (286500 bytes in 0.168s)
Pulled libc.so from device/emulator. 
```

当应用程序崩溃时，我得到这个：

```
Child terminated with signal = 5 
Child terminated with signal = 0x5 (SIGTRAP)
GDBserver exiting 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T20:14:09.657

自从我发布此内容以来已经有一段时间了，但我想我记得弄清楚了。原来我最近更新了 NDK 版本，并没有完全将所有引用迁移到旧的 NDK 目录。在将旧的 NDK 目录完全移动到备份目录后，我修复了 Eclipse 项目中挥之不去的引用。重建后，这似乎解决了我的问题。

TL;DR：确保您的 NDK 引用是正确的。

# php - PHP 查询无法选择 1 周到 2 周之间的记录

> ID：11779971
> 
> 赞同：0
> 
> 时间：2012-08-02T14:45:19.420
> 
> 标签：php, mysql

我正在尝试从 MySQL 表中选择 1 到 2 周大的记录该表有一个日期列。有一个 10 天前的日期，但查询忽略了它。你能帮忙吗？这是我正在使用的查询：

```
$week2 = mysql_query("SELECT * FROM apps WHERE (user = '" 
.mysql_real_escape_string($_POST['username']) . "') and date BETWEEN ( DATE_SUB( NOW(), 
INTERVAL 2 WEEK), DATE_SUB( NOW(), INTERVAL 1 WEEK )"); 
```

如果我将日期设置为不到一周，我可以选择没有问题的记录：

```
$week1 = mysql_query("SELECT * FROM apps WHERE (user = '" .
mysql_real_escape_string($_POST['username']) . "') and date > NOW() - INTERVAL 1 WEEK
ORDER BY id DESC limit 1"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:50:59.967

你使用`BETWEEN`不正确。

尝试

```
DATE BETWEEN x AND y 
```

您也可以将字符串作为日期传递：

```
<?php
    $startDate = date("Y-m-d", mktime(0, 0, 0, date('m'), date('d') - 14, date('Y')));
    $endDate = date("Y-m-d", mktime(0, 0, 0, date('m'), date('d') - 7, date('Y')));

    $query = "... AND DATE BETWEEN '" . $startDate . "' AND '" . $endDate . "'"; 
```

此外，为了回应 tadman 的评论，您应该停止使用`mysql_*`函数。它们正在被弃用。而是使用[PDO](http://php.net/manual/en/book.pdo.php)或[mysqli](http://php.net/manual/en/book.mysqli.php)。如果您不确定要使用哪一个，[请阅读这篇 SO 文章](https://stackoverflow.com/questions/13569/mysqli-or-pdo-what-are-the-pros-and-cons)。

# php - PHP排序数组使用另一个数组没有键

> ID：11779972
> 
> 赞同：0
> 
> 时间：2012-08-02T14:45:19.587
> 
> 标签：php, arrays, sorting

你好我在php中有一个数组

```
Array
(
    [0] => red
    [1] => blue
    [2] => green
    [3] => yellow
    [4] => purple
    [5] => white
) 
```

我想使用该数组对其进行排序

```
Array
(
    [0] => 
    [1] => 0
    [2] => -1
    [3] => -5
    [4] => -5
    [5] => 9
) 
```

所以我希望第二个数组中具有最大值的元素首先出现在第一个数组中，而不是它来自第二个数组的值，而是它自己来自第一个数组的元素在第一个数组的第一个位置移动！第二个比第二个大等..具有相同值的元素不在乎我如何排列它们！

我想得到的输出是

```
Array
    (
        [0] => white
        [1] => blue
        [2] => green
        [3] => yellow
        [4] => purple
        [5] => red
    ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T14:49:50.843

您可以使用`array_multisort()`：

```
$ar1 = array(/* your SO links */);
$ar2 = array(/* your numbers */);
array_multisort($ar2, SORT_DESC, $ar1); 
```

文档[在这里](http://fr.php.net/manual/fr/function.array-multisort.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T14:51:20.437

使用 array_multisort。

请参阅[http://www.php.net/manual/fr/function.array-multisort.php](http://www.php.net/manual/fr/function.array-multisort.php)，按照“示例 #1 Trier plusieurs tableaux”

亲切地

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T14:53:39.187

让我们分别称您的数组为 $dataArray 和 $sortArray

```
asort($sortArray);
foreach ( $sortArray as $key=>$val ) {
    $newArray[] = $dataArray[$key];
} 
```

如果您需要反转它，只需在最后添加对 array_reverse() 的调用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T14:54:42.200

我认为 OP 想要的是按第二个数组的值对第一个数组进行排序。

IE-第二个数组是第一个数组网页的投票数。

如果在第一个数组中将每个元素作为一个数组，其中包含两个元素，网页和投票计数，这可以更简单地解决

```
$pages  = Array
(
    array(
        'page'  => 'http://stackoverflow.com/questions/640805/open-source-ios-components-reusable-views-controllers-buttons-table-cells-e',
        'count' => 0
        )
    array(
        'page'  => 'http://stackoverflow.com/questions/3889634/fast-and-lean-pdf-viewer-for-iphone-ipad-ios-tips-and-hints',
        'count' => -1
    )
    // etc for the rest...
) 
```

但是由于问题询问如何在当前数据结构中做到这一点：

```
$sorted_values  = asort($pages);

$new_pages  = array();

$sorted_keys    = array_keys($sorted_values);

foreach($sorted_keys as $page_key)
    array_push($new_pages, $pages[$page_key]); 
```

# jquery - 打开灯箱内容时页面内容向下移动 - jquery

> ID：11779982
> 
> 赞同：0
> 
> 时间：2012-08-02T14:45:37.333
> 
> 标签：jquery, css, lightbox

单击指向我的灯箱的链接时 - 它会将页面内容移动到灯箱下方。我已将 z-index 放在我的灯箱的 css 上，但我相信这还不够。我不确定下一步我需要往哪个方向走。我试图将灯箱保持在页面内容的顶部。我不希望页面上的内容向下移动，我希望灯箱覆盖原始页面的内容。

**我的小提琴：http:** [//jsfiddle.net/stillb4llin/zZvLG/](http://jsfiddle.net/stillb4llin/zZvLG/)

我想我需要在 jquery 中创建另一个函数来插入我放置 positionLightBox1(); 的位置。（注释掉）

我也认为我做错了 CSS。我想相信我对 css 有一定的把握，但我相信你不会！

> **使用 jquery 的经验：**我已经用 jquery 玩了几个星期（编辑代码并让它为我工作），我已经做了一些阅读并创建了一些小提琴。现在，在我的一些经验和一些堆栈溢出答案的帮助下，我已经很舒服地创建了这个。

*感谢您的意见。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T14:50:01.043

只需在 #lightBoxContent 上设置 position:absolute 而不是 position:relative

[http://jsfiddle.net/zZvLG/9/](http://jsfiddle.net/zZvLG/9/)

...这会将灯箱从“流程”中移除，并防止它进一步向下推动其他页面内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T14:47:41.077

`<div ID="lightBoxDiv"></div>`为什么打开后立即关闭？我猜你的意思是在关闭 lightBoxContent div 之后关闭？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T14:50:27.407

lightBoxContent 还必须具有 position:absolute 才能正常运行

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-02T14:54:58.713

只需将 lightboxdiv 声明末尾的标签移动到 lightboxcontentdiv 关闭之后。您可能需要稍微调整一下大小，但它不会移动它后面的文本。

[http://jsfiddle.net/MrMiracle/zZvLG/16/](http://jsfiddle.net/MrMiracle/zZvLG/16/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T14:53:51.813

可能会修复它：http: [//jsfiddle.net/zZvLG/14/](http://jsfiddle.net/zZvLG/14/)

# jquery - jquery 在工具提示上滚动 - 这是一种合理的跨浏览器方式吗？

> ID：11779987
> 
> 赞同：0
> 
> 时间：2012-08-02T14:45:53.557
> 
> 标签：jquery, tooltip

我想添加一个简单的工具提示，并且很好奇这是否是一种合理的方法，或者是否有更简单/更好的方法？这是一个示例：http: [//jsfiddle.net/trestles/yU3KM/](http://jsfiddle.net/trestles/yU3KM/)

基本上，我将一些绝对定位的文本放置在相对定位的图像上。我已经根据有问题的图像大小调整了它的大小。

我不是一个全职的前端开发人员，而且大多数工具提示似乎都缺乏。至少我可以自定义这个。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:58:02.753

这很好，并且是完成此类任务的一种非常标准的方法。您可能会发现需要添加一个`z-index`CSS 属性以使其保持在页面上其他元素的上方。当您不能依赖希望悬停在工具提示上的项目的位置时，会使事情变得更加复杂的是。当你到达那个点时，工具提示的位置将需要通过抓住悬停元素的位置来动态创建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T14:59:28.090

作为一种方法，这是有道理的，并且解决了各种浏览器从 title 属性执行工具提示的方式的古怪差异。

但是在您的特定代码中，您在每次悬停时创建一个新标记，然后仅将其隐藏，因此 DOM 实际上被大量隐藏的工具提示副本所淹没。

使用 .remove('.bubble') 比使用 hide('.bubble') 等更好；

更好的是在页面加载时使用 display:none 写入气泡，然后使用 mouseover/out 函数在 hide() 和 show() 之间切换。

# windows-8 - 填充 Windows 8“所有应用程序”列表

> ID：11779990
> 
> 赞同：4
> 
> 时间：2012-08-02T14:46:10.140
> 
> 标签：windows-8

我有一个 MSI 包，它创建了一些快捷方式，使用 Windows 8 我注意到在开始屏幕上它只显示我在**C:\ProgramData\Microsoft\Windows\Start Menu中创建的应用程序顶层文件夹中的快捷方式\程序\**。当我点击“所有应用程序”时，Windows 显示和其他应用程序（例如 VS 2012）的子文件夹中的快捷方式，但不适用于我的。有谁知道为什么？当用户选择“所有应用程序”时，我还需要做什么才能在我的子文件夹中找到 Windows 显示快捷方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T06:09:01.790

这是部分答案。应用索引器似乎存在问题。到目前为止，我还没有找到一种方法来简单地强制搜索以找到我的应用程序，而无需付出一些不必要的努力。要强制搜索以找到您的应用，您只需将其固定到开始菜单，然后从开始菜单取消固定，这会将其添加到您的本地首选项中。

正在发生的事情的另一个迹象是，即使删除了快捷方式，它仍会显示在“所有应用程序”菜单中，直到您进行磁盘清理并删除缩略图。

我发现了另一个奇怪的地方。我已经安装了 Tortoise Svn，并且我在该应用程序的开始菜单文件夹中放置的任何内容都会显示出来，但是在我的 Open Office 开始菜单文件夹中，链接必须在前面加上“OpenOffice.org”才能显示出来。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T16:51:21.330

我在这里安装我的快捷链接：

C:\Users\Randall\AppData\Roaming\Microsoft\Windows\开始菜单\程序

这对我来说很好。我的快捷方式都显示在 Win8 所有应用程序列表中。

我正在用户的个人资料中安装，因此我的应用程序可以以非管理员身份运行。

# ruby-on-rails - 不会显示表格？

> ID：11779992
> 
> 赞同：0
> 
> 时间：2012-08-02T14:46:10.633
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

这里我有以下模型

客户簿簿_经理

我的协会有关注

```
BookManager
belongs_to :customer
Customer
has_many :book_managers, :dependent => :destroy 
```

此阶段不需要预订

这是基于 Railscasts 的嵌套模型形式，但我似乎不明白为什么它不起作用。该应用程序应该可以工作

客户进入 customer#edit，然后查看 BookManagers（最后创建的）（如果有）。如果不是，那么只需查看空白和一个表单，以允许他创建一个新的 book_manager，它将在未来与一本书相关联。但我不在那个阶段。

这里是客户控制器

```
def edit
    @customer = Customer.find(params[:id])
    @bookmanager = BookManager.first_or_create
end 
```

他的渲染文件跟随

```
<h3>Book</h3>
<div><%= render 'book_managers/form' %></div> 
```

这里是 book_managers 中的 _form.html.erb 文件

```
<% form_for (@bookmanager) do |f| %>  
  <div class="field">  
    <%= f.label :customer_id %><br />  
    <%= f.text_field :customer_id %>  
  </div>  
  <div class="actions">
    <%= f.submit %>
  </div>  
<% end %> 
```

我知道它可以正确渲染，如果我在其中放入废话，我会在表格之外看到它们。但我不确定 bookmanager 是否真的是空的、nil 或正确设置

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:51:28.820

更改`<% form_for (@bookmanager) do |f| %>`为

导轨 3：

```
<%= form_for (@bookmanager) do |f| %> 
```

导轨 2：

```
<%- form_for (@bookmanager) do |f| %> 
```

你需要一个`-`(Rails 2) 或`=`(Rails 3) 在`<%`.

# java - 在代码编译或构建方面 99% vs 1%

> ID：11779994
> 
> 赞同：3
> 
> 时间：2012-08-02T14:46:18.390
> 
> 标签：java, netbeans-7

这是就代码编译而言，仅此而已.. :)

所以，我是我公司的新手，可以预见的是，我遇到了一台速度非常慢的电脑。每次构建时，我的 Netbeans 都会出现内存/资源不足的大问题。我正在编译我的 JAVA 文件。

我使用的是 7.0，即使我遇到了这个错误，我还是通过分块编译源包来解决这个问题。（有时我不得不多次编译选定的）

但是自从我搬到 7.2 之后，这个问题越来越严重。我现在必须将包编译成更小的块。有时一个包一个包，一个文件一个文件。因此花费了我很多时间，甚至很多头发。

我不知道要先编译哪些包。netbeans 正在处理这个问题。因此，占用资源。

我的大多数同事都拥有强大的计算机，并且构建整个源代码库没有问题。因此，我开始获取已编译的软件包，并且只构建所需的软件包。

那么，这是正确的方法还是构建整个源代码（即使我在任何给定时间只对总代码库的 1% 进行了更改）？

几乎这家公司的每个人都在构建整个代码库，至少一次，尽管大部分更改只有 1%。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T14:48:56.763

*构建整个项目并让它按设计工作要好得多*，然后构建它的 99% 并且它不起作用。没有迹象表明这 1% 是关键代码还是非关键代码，作为初学者，你不能马上就知道这一点。

我会通知您的队友/IT 人员有关缓慢构建的信息，并询问可以采取哪些措施来解决它，而不是分块构建代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T14:50:16.910

也许您应该强调开发人员的机器速度慢而阻碍您正在做的工作的问题，当您解释生产力损失与硬件成本之间的差异时，您很快就会拥有一台新机器。

然后你就可以停止担心构建“99%”并着手解决实际问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T14:53:11.750

> 那么，这是正确的方法还是构建整个源代码（即使我在任何给定时间只对总代码库的 1% 进行了更改）？

我认为只有在您完全了解所有内部依赖项并且可以保证在您进行修改后附近模块中不会发生意外行为时，您才能仅构建项目的某些部分。这是我的意见。此外，您可以更改代码并编译成功，但整个项目构建可能会失败。

**PS**你应该让公司给你买一台新电脑。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-02T14:53:14.513

最好构建整个项目。试调`netbeans.conf`

```
netbeans_default_options="-J-client -J-Xss4m -J-Xms128m -J-XX:PermSize=128m -J-XX:MaxPermSize=512m -J-Dapple.laf.useScreenMenuBar=true -J-Dapple.awt.graphics.UseQuartz=true -J-Dsun.java2d.noddraw=true-J-XX:+UseParNewGC -J-XX:+UseConcMarkSweepGC -J-XX:+CMSClassUnloadingEnabled -J-XX:+CMSPermGenSweepingEnabled" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T14:54:26.273

从理论上讲，您可以遍历所有依赖项并使自己成为一个依赖关系层次图，并且您只需要编译您更改的代码以及依赖它的所有内容。然而，它不一定是 100% 万无一失的，需要付出很多努力才能获得很少的收益。这不是我希望新手有责任解决的问题，而是你的上级应该用一些合适的工具包来解决你。