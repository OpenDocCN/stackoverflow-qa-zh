# StackOverflow 问答 10483000-10483999

# c# - 修改响应标头时，WCF Web 服务未返回正确的状态代码

> ID：10483007
> 
> 赞同：3
> 
> 时间：2012-05-07T13:32:29.883
> 
> 标签：c#, jquery, .net, web-services

我有一个非常简单的 WCF Web 服务，我使用 Ajax 在客户端调用它：

这是我的网络服务：

```
public string TestService() {
    throw new Exception();
    return "";
} 
```

这是我的客户端 Ajax 调用的样子：

```
var mySuccess = function(result,statuscode,xhr){
    alert('success');
}

var myFail = function(result,statuscode,xhr){
    alert('failure');
}

$.ajax({
    type: 'Post'
    contentType: "application/json; charset=utf-8",
    url: '../myService.svc/TestService',
    data: '',
    dataType: "json",
    success: mySuccess,
    error: myFail
}); 
```

此 Web 服务每次都失败（应该如此！），返回状态和代码“500：内部服务器错误”。'myFail' 回调函数被触发。

但是，如果我在我的 Web 服务中修改响应标头，如下所示：

```
public string TestService() {
    WebOperationContext.Current.OutgoingResponse.Headers.Add("token", "1");
    throw new Exception();
    return "";
} 
```

那么每次返回的状态/代码都是'200：OK'！

这意味着每次都会触发“mySuccess”函数，即使 Web 服务应该失败也是如此。我不明白为什么简单地将我自己的自定义标头添加到响应中会以这种方式覆盖返回状态。

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-23T09:11:40.280

一个选项是抛出`WebFaultException`一个有意义的 HTTP 状态和消息。示例： `throw new WebFaultException("Invalid request received.", HttpStatusCode.BadRequest);`
BadReuqest 代码为 400。

# android - 飞溅和下载数据

> ID：10483009
> 
> 赞同：0
> 
> 时间：2012-05-07T13:32:33.330
> 
> 标签：android, download

我有一个启动活动，这个活动从互联网上下载了一些 XML。一切都很好，但问题是当连接太慢时，操作系统认为应用程序没有响应，并要求终止或等待。

我怎样才能防止这种情况？或者这种事情有更好的做法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T13:36:04.670

您可能正在 UI 线程中下载 XML。不。[改用 AsyncTasks](http://developer.android.com/reference/android/os/AsyncTask.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T13:36:14.163

将您的下载过程放在一个线程或 AsyncTask 中并让主 UI 线程空闲，然后操作系统不会给您 ANR（应用程序无响应）对话框

AsyncTask 的教程链接

[http://www.vogella.com/articles/AndroidPerformance/article.html](http://www.vogella.com/articles/AndroidPerformance/article.html)

# java - 修剪对象的最后 4 个字符

> ID：10483010
> 
> 赞同：-10
> 
> 时间：2012-05-07T13:32:34.407
> 
> 标签：java, string, oop, object, substring

我想修剪显示在第 3`(Room Type)`和第 4 (`Meal type)`列中的对象的最后 4 个字符。在底部我提供了输出示例。您可以在第 3 和第 4 列中清楚地看到最后 4 个字符是括号中的价格，这是我想要的跳闸。

```
public void showAll()

    {
        String name ="";
        String ID="";
        Object roomItem;
        Object mealItem;
        int roomIn;
        int meal;
        int days=0;
        double tprice=0;

        display.setText("");
        display.append("ID  Customer Name   RoomType    MealType    Days    TotalCharge($)");
        display.append("\n ---------------------------------");

        for (int i = 0; i < myList.size(); i++)
           {
        Customer c = myList.get(i);

        ID = c.getID();
        name = c.getName();
        roomIn = c.getRoomIndex();                  // Get the room index stored in Linked list
        roomItem = roomTypeCombo.getItemAt(roomIn); // Get the item stored on that index.
        meal = c.getMealIndex();                    // Get the Meal index stored in Linked list
        mealItem = mealCombo.getItemAt(meal);       // Get the item stored on that index.
        days = c.getDaysIndex();
        tprice = c.getTotalPrice();
        display.append("\n"+ID+"    "+name+"        "+roomItem+"    "+mealItem+"    "+days+ "   "+tprice);
            }
        display.append("\n \n Total "+myList.size()+" Entrie(s) !");

    } // end of function 
```

我的程序的输出是这样的：

```
ID  Customer Name           RoomType    MealType    Days    TotalCharge
__________________________________________________________________

234 John Andersen       Standard($75)   Any Two($30)     4    420.0 
```

我怎样才能绊倒`Room Type`and的最后 4 个字符`Meal Type`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T13:34:52.930

```
String pricey = "Breakfast($10)";
String yummy = pricey.substring(0, pricey.length() - 4); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T13:36:59.540

首先，在发布此类问题之前，您应该阅读 Java String API：[http ://docs.oracle.com/javase/7/docs/api/java/lang/String.html。](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html)

然后，您可以使用类似 substring 的方法。

```
public String substring(int beginIndex,
               int endIndex)

Returns a new string that is a substring of this string. The substring begins at the specified beginIndex and extends to the character at index endIndex - 1\. Thus the length of the substring is endIndex-beginIndex.

Examples:

     "hamburger".substring(4, 8) returns "urge"
     "smiles".substring(1, 5) returns "mile"

Parameters:
    beginIndex - the beginning index, inclusive.
    endIndex - the ending index, exclusive.
Returns:
    the specified substring.
Throws:
    IndexOutOfBoundsException - if the beginIndex is negative, or endIndex is larger than the length of this String object, or beginIndex is larger than endIndex. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T13:34:13.003

您可以使用[`substring()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#substring%28int%29)：

```
String word = "Breakfast($10)".substring(0, "Breakfast($10)".length() - 4); 
```

# python - 如何使用代理签署 OAuth

> ID：10483013
> 
> 赞同：0
> 
> 时间：2012-05-07T13:33:07.923
> 
> 标签：python, oauth, proxy

Twitter、Facebook 和其他一些网站在我国被封锁。我想调用开放 API 来做一些黑客攻击。我已经搜索过，但它不能解决我的问题。任何 python 库都可以帮助我通过代理签署 OAuth 请求并获取访问令牌？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T09:44:41.323

我猜你必须为此设置自己的代理服务，即在你自己国家以外的服务器上设置你的整个 API 和 OAuth 逻辑。如果您从您自己的国家/地区调用此代理服务，您可能并不明显地实际与 Twitter 进行通信。

您将需要在您的客户端和您的代理/中继服务之间建立某种加密层，以使其有点安全/模糊。可以这么说，您自己的请求签名机制，并且您的代理/中继端点肯定应该交谈（HTTPS/SSL）。

# php - 说mysqli有错误

> ID：10483016
> 
> 赞同：-1
> 
> 时间：2012-05-07T13:33:18.307
> 
> 标签：php, mysqli

这是因为我来自丹麦并使用谷歌翻译，因为我的英语不好，所以希望它可以与它保持一致，但是，这就是我的 MySQLI 代码一直到最后一句话的方式，并说有错误。我试过写正确的密码和电子邮件，但它根本无法以某种方式工作，它总是出错，怎么可能？

```
<?php
    session_start();

    include("include/database/db.php"); 

    if($stmt = $mysqli->prepare("SELECT id, djnavn, hemmelig, rank FROM `brugere` WHERE `email` = ? AND `password` = ?"))
            {
            $stmt->bind_param('ss', $email, $password);
            $email = $_POST['email'];
            $password = sha1($_POST['password']);
            $stmt->execute();
            $stmt->bind_result($id, $djnavn, $hemmelig, $rank);
            $stmt->fetch();
            $count_res = $stmt->num_rows;
            $stmt->close();

            if($count_res > 0) {
                $_SESSION["logged_in"] = true;
                $_SESSION["user_id"] = $id;
                $_SESSION["djnavn"] = $djnavn;
                $_SESSION["hemmelig"] = $hemmelig;
                $_SESSION["rank"] = $rank;
                if($rank == 0)
                {
                    echo "Your can not log in!";
                }
                if($rank == 1)
                {
                    echo "Ok, members you can log in now!";
                }
                if($rank == 2)
                {
                    echo "Ok, Admin you can log in now!";
                }
            }
            else {
                echo 'fail her: ' . $mysqli->error; 
            }
        }
?> 
```

**你能帮我吗！！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T13:49:39.860

首先是通知，它发生是因为您在使用 $email 和 $password 之前没有定义它们。

```
$email = $_POST['email'];
$password = sha1($_POST['password']); 
```

在绑定参数之前剪切并粘贴它们：

```
$stmt->bind_param('ss', $email, $password); 
```

# ios - 在 iOS 中动态创建 x509 证书

> ID：10483024
> 
> 赞同：4
> 
> 时间：2012-05-07T13:33:55.267
> 
> 标签：ios, ssl, certificate, x509

我需要在运行时生成 x509 证书，我做了一些谷歌，发现很少使用证书而不是创建证书的示例。

谢谢和问候， S. Murali Krishnan

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T13:38:08.837

我的建议是[编译并静态链接 openssl](http://atastypixel.com/blog/easy-inclusion-of-openssl-into-iphone-app-projects/)与您的 iOS 项目。

然后使用 openssl API 创建您的 x509 证书（[查看此示例代码](https://www.codeblog.org/gonzui/markup/openssl-0.9.8a/demos/x509/mkcert.c)）

# actionscript-3 - 柔性。pushView 数据对象被转换为字符串

> ID：10483027
> 
> 赞同：0
> 
> 时间：2012-05-07T13:34:03.520
> 
> 标签：actionscript-3, apache-flex, flexbuilder

在使用数据对象执行 navigator.pushView 后，我需要将数据对象接收到下一个视图中，但在某个阶段转换为字符串以在 sql 函数中使用。下面的代码显示了我目前正在做的事情。

```
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009"
    xmlns:s="library://ns.adobe.com/flex/spark" title="{data.toString()}"
    xmlns:model="model.*"
    creationComplete  = "{data=srv.findByCategory(data.toString())}"
    > 
```

.toString() 是我的快速尝试，但结果输出很简单

> [对象对象]

没有任何错误，但仅在调试期间显示。

有任何想法吗？

* * *

作为附录，这里是来自数据对象的初始视图的代码

```
<s:List id="list" top="0" bottom="0" left="0" right="0" width="100%"
        alternatingItemColors="0xffffff"
        contentBackgroundColor="0xffffff"
        downColor="0xfc7d1a"
        selectionColor="0xfc7d1a"           
        dataProvider="{data}"
        labelFunction="getFullName"
        change="navigator.pushView(CategoryView, list.selectedItem.toString())"> 
```

这是一些需要数据对象为字符串的代码。

```
public function findByCategory(searchKey:String):ArrayCollection
        {
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T13:40:30.300

data 是一个键控对象，其中包含您从初始视图传递的信息。您需要访问对象中的正确键。

它应该是类似的东西`data.myKey.toString()`。如果您粘贴 pushView 代码，我将能够准确地告诉您。

# java - 在 UML 类图中表示摆动组件

> ID：10483029
> 
> 赞同：5
> 
> 时间：2012-05-07T13:34:12.393
> 
> 标签：java, swing, uml, diagram

我对 uml 类图中的 gui 对象的表示有一些疑问。

例如，如果有一个扩展 JFrame 的类，那么我将设计带有继承符号的 UML 类图，但在 JFrame 中，我不需要写下它所有的类变量和方法，只需要写下我的类会用对吗？？

其次，我将如何表示我的班级将使用特定的布局管理器？使用关联符号，我质疑但我不确定。

* * *

例如，我有一个名为 的包`gr.mydomain.exampleproject`，并且我有一个扩展 JFrame 的类。

以下方法是否正确，还是我需要将 JFrame 放在单独的包中 ( `javax.swing`)？

![在此处输入图像描述](../Images/8361b8e9589641ef0eae9397a768f282.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T13:37:54.850

是的，你必须给类画继承符号`JFrame`，但是把`JFrame`类留空，不要在里面放任何字段或方法。每个人都知道或可以查看 API 以查看`JFrame`包含的内容。此外，您将使用`JFrame`.

像这样做：

![UML 截图](../Images/00e177fe20dcabd250feeb1d7271e633.png)

至于布局管理器：我相信在这种情况下依赖关系是正确的。如果您在布局管理器的类上调用方法，则关联关系将是正确的。但是您可能只是在做类似`frame.setLayout (new LayoutManagerClass ());`的事情（也就是创建对象）。在这种情况下，它是一种依赖关系。

# spring - 弹簧，属性文件，空值

> ID：10483032
> 
> 赞同：10
> 
> 时间：2012-05-07T13:34:19.353
> 
> 标签：spring, spring-security, placeholder

我已经用ldap服务器配置了spring security（但是继续阅读，如果你不了解它也不是问题，这确实是一个spring问题）。一切都像魅力一样运行。这是我用于此的行：

```
<ldap-server ldif="" root="" manager-dn="" manager-password="" url=""  id="ldapServer" /> 
```

如果我填写 ldif 和 root 属性，它将运行一个嵌入式服务器：

```
<ldap-server ldif="classpath://ldap.ldif" root="dc=springframework,dc=org" manager-dn="" manager-password="" url=""  id="ldapServer" /> 
```

如果我填写其他字段，它将运行一个远程服务器：

```
<ldap-server ldif="" root="" manager-dn="dc=admin,dc=springframeworg,dc=org" manager-password="password" url="ldap://myldapserver.com/dc=springframeworg,dc=org" id="ldapServer" /> 
```

所有这些东西都运行正常。现在我想使用 Spring 机制从属性文件中加载这些参数：

所以我像这样替换属性值：

```
<ldap-server ldif="${ldap.ldif.path}" root="${ldap.ldif.root}" manager-dn="${ldap.server.manager.dn}" manager-password="${ldap.server.manager.password}" url="${ldap.server.url}"  id="ldapServer" /> 
```

并创建一个属性文件：

```
ldap.server.url=
ldap.server.manager.dn=
ldap.server.manager.password=

ldap.ldif.path= 
ldap.ldif.root= 
```

现在，问题的有趣部分。如果我在文件中填写以下属性：

```
ldap.server.url=ldap://myldapserver.com/dc=springframeworg,dc=org
ldap.server.manager.dn=dc=admin,dc=springframeworg,dc=org
ldap.server.manager.password=password

ldap.ldif.path= 
ldap.ldif.root= 
```

它按预期运行远程服务器。

如果我像这样填写属性文件：

```
ldap.server.url=
ldap.server.manager.dn=
ldap.server.manager.password=

ldap.ldif.path= classpath:ldap.ldif
ldap.ldif.root= dc=springframeworg,dc=org 
```

它没有运行，抱怨缺少 ldap url。但问题是，如果我从以下位置更改弹簧配置：

```
<ldap-server ldif="${ldap.ldif.path}" root="${ldap.ldif.root}" manager-dn="${ldap.server.manager.dn}" manager-password="${ldap.server.manager.password}" url="${ldap.server.url}"  id="ldapServer" /> 
```

到（只需删除对变量 ${ldap.server.url} 的引用）

```
<ldap-server ldif="${ldap.ldif.path}" root="${ldap.ldif.root}" manager-dn="${ldap.server.manager.dn}" manager-password="${ldap.server.manager.password}" url=""  id="ldapServer" /> 
```

它运行！

我的想法是，如果该属性值为空，则 spring 不会将属性值替换为属性配置之一。但我觉得很奇怪。

你能给我一些线索来理解吗？通过属性文件配置我的 ldap 服务器的最佳方法是什么？

**编辑：这是由于设计选择不佳（查看接受的答案），在 jira 上打开了一个问题： [https ://jira.springsource.org/browse/SEC-1966](https://jira.springsource.org/browse/SEC-1966)**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T08:02:21.510

好的，我认为这是一个弹簧安全错误。

如果我调试并查看 LdapServerBeanDefinition 类，有一个名为“parse”的方法。这是一个摘录：

```
public BeanDefinition parse(Element elt, ParserContext parserContext) {
    String url = elt.getAttribute(ATT_URL);

    RootBeanDefinition contextSource;

    if (!StringUtils.hasText(url)) {
        contextSource = createEmbeddedServer(elt, parserContext);
    } else {
        contextSource = new RootBeanDefinition();
        contextSource.setBeanClassName(CONTEXT_SOURCE_CLASS);
        contextSource.getConstructorArgumentValues().addIndexedArgumentValue(0, url);
    }

    contextSource.setSource(parserContext.extractSource(elt));

    String managerDn = elt.getAttribute(ATT_PRINCIPAL);
    String managerPassword = elt.getAttribute(ATT_PASSWORD);

    if (StringUtils.hasText(managerDn)) {
        if(!StringUtils.hasText(managerPassword)) {
            parserContext.getReaderContext().error("You must specify the " + ATT_PASSWORD +
                    " if you supply a " + managerDn, elt);
        }

        contextSource.getPropertyValues().addPropertyValue("userDn", managerDn);
        contextSource.getPropertyValues().addPropertyValue("password", managerPassword);
    }

    ...
} 
```

如果我在这里调试，所有变量（url、managerDn、managerPassword...）都不会被属性文件中指定的值替换。因此，url 的值为 ${ldap.server.url}，managerDn 的值为 ${ldap.server.manager.dn}，依此类推。

方法 parse 创建一个 bean，一个将被进一步使用的上下文源。当这个 bean 被使用时，占位符将被替换。

在这里，我们得到了错误。parse 方法检查 url 是否为空。问题是这里的 url 不是空的，因为它的值是 ${ldap.server.url}。因此，parse 方法创建了一个上下文源作为远程服务器。

当使用创建的源时，它会将 ${ldap.server.url} 替换为空值（如属性文件中指定的）。而且.......错误！

我现在真的不知道如何解决这个问题，但我现在明白为什么它会出错；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T17:50:03.757

我无法解释它，但我认为您可以使用自 Spring 3.0.0.RC1 起提供的默认语法来解决您的问题（[请参阅](http://static.springsource.org/spring/docs/3.0.x/changelog.txt)参考资料）。

在 chageg 日志中，您可以阅读：PropertyPlaceholderConfigurer 支持“${myKey:myDefaultValue}”默认语法

无论如何，我认为问题在于“”是有效值，但属性文件中没有值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T12:53:52.030

我认为这是`url=""`有效的，因为`url`属性是`xs:token`spring-security XSD 中的类型，并且空字符串被转换为`null`（`xs:token`正在删除任何前导或尾随空格，因此`""`可以被识别为无值）。也许 的值`${ldap.server.url}`被解析为空字符串，这就是您遇到错误的原因。

您可以尝试使用 Spring 配置文件来定义 ldap 服务器的不同配置（有关配置文件的详细信息，请参阅[Spring 团队博客](http://blog.springsource.com/2011/02/11/spring-framework-3-1-m1-released/)）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-28T07:44:32.320

我相信在使用占位符时存在问题。以下最有可能解决问题：

创建一个扩展 PropertyPlaceHolderConfigurer 的类，并在该方法中覆盖其方法 convertPropertyValue() 如果您发现除 LDAP url 类型的字符串以外的任何内容（即 ldap://myldapserver.com/dc=springframeworg），您可以将属性作为空字符串返回,dc=org

您还需要在上下文文件中配置类 PropertyPlaceHolderConfigurer 的新专业化。

希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-06T04:33:11.973

`String`您可以在文件中定义空，`application.properties`如下所示：

com.core.estimation.stopwords=\ \ [![在此处输入图像描述](../Images/e1fb5460c9282298a80aea4f90d601a4.png)](https://i.stack.imgur.com/NjYHs.png)

# node.js - 猫鼬模型中的元排序

> ID：10483033
> 
> 赞同：1
> 
> 时间：2012-05-07T13:34:21.557
> 
> 标签：node.js, sorting, routes, mongoose

我正在开发一个应用程序，您可以在其中上传图像，并且上传的图像在缩略图中并排显示。我想实现过滤器的可能性，以便可以以不同的顺序显示图像，例如，具有最多点的图像按降序排列。

我很难想出一个很好的解决方案来解决这个问题，我唯一能想到的就是为此创建一条新路线（与我现在使用的路线相同，如下所示），但是不同的排序。

然而，这是 DRY 编码，并不是一件好事，尤其是因为我计划提供更多的排序选项。

我对此有两个问题：

1.  有没有更好的方法来实现这一点（一种解决方案，这样我就不需要调用路由，而是在客户端执行它？或者可能将参数传递给路由并使用 if 语句决定如何排序） ?
2.  如果应该在服务器端进行排序，我该如何处理积分？点数是计算出来的（upvotes - downvotes），而不是直接存储在 Schema 中。

图像模型：

```
var ImageSchema = new Schema({
    name : String,
    size : Number,
    title   : String,
    body : String,
    buf : Buffer,
    date: { type: Date, default: Date.now },
    comments : [CommentSchema],
    meta : {
        upvotes : Number,
        downvotes : Number,
        favs : Number,
        uniqueIPs : [String],
        tags : [String]
    }
}); 
```

渲染图像的路线：

```
app.get('/images/:num?', function(req, res){

    var query = model.ImagePost.find({});

    query.where('date').lte(new Date());
    query.desc('date');

    query.exec(function (err, images) {
        if (err) {
            console.log(err);
            // do something
        }

        var query = tagModel.Tag.find({});

        query.exec(function (err, tags) {

            if (err) {
                console.log(err);
                // do something
            }

            query = albumModel.Album.find({});

            query.exec(function (err, albums) {

                if (err) {
                    console.log(err);
                    // do something
                }

                res.render('blogs/index', { title: 'Images', imageList: images, tagList: tags, albumList: albums, dateFormatter: dateFormatter });
            });
        });
    });
}); 
```

将图像呈现给客户端的 Jade 文件（部分）：

```
#image
    div.post
        input(type='hidden', value=image.name + ',' + image.body + ',' + image.date);
        button.imageValue(value= image.name, name= image._id)
        div.albumImgChooseCover +
        img.images(src='../images/' + image.name)
        div.postDesc
            a#single_1(href='../images/' + image.name, title= image.body + ' (Published: '+ formatter.format(image.date) +')')
                img.zoom(src='../img/zoom.png')
            a.various#box1(data-fancybox-type='iframe', href='/image/' + image._id.toHexString())
                img.comments(src='../img/comments.png')
                p.nrOfComments= image.comments.length
            h2.subtitle= image.title
            p.postDescContent= 'Points' + ': ' + (image.meta.upvotes - blog.meta.downvotes)
            form.deleteButtonBox(action='/image/delete/' + image._id.toHexString(), method='POST')
                input(class='deleteButton', type='submit', value='x')
            a.various#box2(data-fancybox-type='iframe', href='/image/edit/' + blog._id.toHexString()) Edit
            - if (image.meta.tags)
                ul.tags
                    h3  Tags:
                        each tag in tagList
                            - if (image.meta.tags.indexOf(tag._id) != -1)
                                a(href='/tag/' + tag._id.toHexString())
                                    span.tagInImage= tag.name 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T03:35:55.807

`sort=<value>`向现有路由 URL添加参数是处理此问题的典型方法。

至于按点排序，现在 Mongo 2.2 可用，您可以使用聚合框架：

```
ImageSchema.aggregate([
    {$project: {
        name: 1,
        size: 1,
        // ... more fields you want included
        points: {$subtract: {['$meta.upvotes', '$meta.downvotes']}}
    }},
    {$sort: {points: -1}}
], function(err, results) {
    console.log(results);
}); 
```

# javascript - 空 JS 对象

> ID：10483035
> 
> 赞同：5
> 
> 时间：2012-05-07T13:34:35.927
> 
> 标签：javascript, json

有没有更好的方法来检查对象是否为空？我正在使用这个：

```
function isObjEmpty(obj)
{
    for (var p in obj) return false;
    return true;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-07T13:36:38.063

如果您正在寻找单线，请考虑[`Object.keys`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/keys)：

```
var isEmpty = !Object.keys(obj).length; 
```

您当前的方法很危险，因为它`Object.prototype`在扩展时总是会返回 false：http: [//jsfiddle.net/Neppc/](http://jsfiddle.net/Neppc/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T14:00:14.123

另一个选项内置在[jQuery](http://api.jquery.com/jQuery.isEmptyObject/)中：`jQuery.isEmptyObject(obj)`

编辑：有趣的是，该实现与问题中的代码相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-28T10:47:16.667

实际上这是检查对象是否为空的好方法！对于 exmpty 对象，它比使用上面建议的 Object.keys() 快 10 倍 :)

在 Node、Chrom、Firefox 和 IE 9 下测试，很明显对于大多数用例：

*   **(for...in...) 是最快的选择！**
*   **Object.keys(obj).length 比空对象慢 10 倍**
*   **JSON.stringify(obj).length 总是最慢的**（并不奇怪）
*   **Object.getOwnPropertyNames(obj).length 比 Object.keys(obj).length 花费**的时间更长，在某些系统上可能更长。

底线性能明智，使用：

```
function isEmpty(obj) { 
   for (var x in obj) { return false; }
   return true;
} 
```

或者

```
function isEmpty(obj) {
   for (var x in obj) { if (obj.hasOwnProperty(x))  return false; }
   return true;
} 
```

查看详细的测试结果和测试代码，[对象是否为空？](https://stackoverflow.com/questions/4994201/is-object-empty/34491287#34491287)

# c# - 未授权在 MVC3 中分页时重定向用户

> ID：10483036
> 
> 赞同：4
> 
> 时间：2012-05-07T13:34:42.617
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, error-handling, active-directory

我有一个 mvc 3 项目，我使用 AD 来授权用户。我有一个页面，只有具有“管理员”角色的用户才能访问。

我已使登录正常工作并授权用户，因此只有管理员可以访问网站的管理部分。我遇到的问题是当用户不是管理员时，我似乎无法显示好的错误消息。

这是我的 actionFilter 属性

```
public class AdminOnlyAttribute : ActionFilterAttribute
{
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        base.OnActionExecuting(filterContext);
        bool isAuthorised = false;

        IPrincipal user = filterContext.HttpContext.User;
        if (user.Identity.IsAuthenticated)
        {
            if (user.IsInRole("Admin"))
            {
                isAuthorised = true;
            }
        }

        if (!isAuthorised)
        {
            //error message here
        }
    } 
```

这是我的管理员控制器

```
 [AdminOnly]
        public ActionResult Index()
        {
        //admin stuff
        } 
```

任何帮助表示赞赏，在此先感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T13:43:18.250

如果`isAuthorised`为假，您需要将他们带到可以显示“您无权访问该页面等”的页面。要进行重定向，您必须执行以下操作（在我的示例中，我将它们重定向到 Account/AccessDenied 这将返回一个包含“您无权访问等...”消息的视图：

```
if (!isAuthorised)
{
    filterContext.Result = new RedirectToRouteResult(
        new RouteValueDictionary {{"action", "AccessDenied"}, 
            {"controller", "Account"}});
} 
```

# javascript - 如何让段落在从包装标题的最后一行开始的浮动标题之后流动

> ID：10483042
> 
> 赞同：0
> 
> 时间：2012-05-07T13:34:56.503
> 
> 标签：javascript, html, css, ios, safari

我有一个只能在移动 Safari 中查看的页面。我试图达到一定的效果来匹配印刷出版物。我已经非常接近了，但对于最后一个细节。

在我的页面中，我有这样的 HTML 标记：

```
<section>
  <h2>Header</h2>

  <p>A long paragraph...</p>
</section> 
```

和这样的 CSS 样式：

```
section {
  padding-left: 200px;
  width: 700px;
}

h2 {
  float: left;
  width: 180px;
  margin-left: -200px;
} 
```

结果是这样的：

```
Header          A long paragraph, blah blah blah...
                blah blah blah... 
```

这是完美的。但是，如果标头中的内容稍长一些，则可能如下所示：

```
This is a       A long paragraph, blah blah blah...
longer header   blah blah blah... 
```

而我想做的是在标题的最后一行开始段落，如下所示：

```
This is a
longer header   A long paragraph, blah blah blah...
                blah blah blah... 
```

我想我可以使用 JavaScript 解决这个问题，但我想以尽可能不干扰的方式修复它，或者纯粹在 CSS 中，或者对标记进行最小的更改。除此之外，关于 JavaScript 解决方案的任何想法？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T14:42:51.730

这只能使用 CSS 来完成。也不需要浮动：

```
section {
  width: 700px;
}

section p {
  padding-left: 200px; 
  margin-top: -20px
}

section h2 {
  padding-right: 500px; 
  margin-bottom:0
} 
```

您的 HTML 保持不变。

# c# - Backgroundworker.CancelAsync() 不工作

> ID：10483043
> 
> 赞同：4
> 
> 时间：2012-05-07T13:34:58.123
> 
> 标签：c#, backgroundworker

我有一个运行单个进程的后台工作人员。我希望能够在处理过程中取消处理，但是当我调用 CancelAsync() 方法时，它实际上从未取消。我哪里错了？

这是 DoWork() 方法：

```
 private void bgw_DoWork(object sender, DoWorkEventArgs e)
    {
        BackgroundWorker b = sender as BackgroundWorker;

        if (b != null)
        {
             if (!b.CancellationPending)
            {
                try
                {
                    // Let's run the process as a backgroundworker so we have the ability to cancel the search, and/or be able to view results while it's still searching
                    ProcessParameters pp = e.Argument as ProcessParameters;

                    if (pp.DoReplace)
                        results = FindReplace.FindReplace.FindAndReplace(pp.PathToSearch, pp.FindText, pp.ReplaceText, pp.UseRegularExpressions, pp.IncludeList, pp.ExcludeList, pp.RecurseSubdirectories, pp.IgnoreCase);
                    else
                        results = FindReplace.FindReplace.Find(pp.PathToSearch, pp.FindText, pp.UseRegularExpressions, pp.IncludeList, pp.ExcludeList, pp.RecurseSubdirectories, pp.IgnoreCase);
                }
                catch (Exception ex)
                {
                    MessageBox.Show(ex.ToString());
                }
            }
            else
            {
                // Cancel was clicked
                e.Cancel = true;
            }
        }
    } 
```

这是开始处理的方法：

```
 private void btnGo_Click(object sender, EventArgs e)
    {
        if (btnGo.Text == "Cancel")
        {
            if (DialogResult.Yes == MessageBox.Show("Are you sure you wish to cancel?", "Cancel Requested", MessageBoxButtons.YesNo, MessageBoxIcon.Question))
                bgw.CancelAsync();

            return;
        }

        if (tbFind.Text.Length == 0)
        {
            MessageBox.Show("Find text is not valid.");
            return;
        }

        tbFound.Text = String.Empty;
        tbFoundInThisFile.Text = String.Empty;
        lvResults.Items.Clear();
        includeList = null;
        excludeList = null;
        results = null;

        if (radDirectory.Checked && !radFile.Checked)
        {
            includeList = BuildIncludeExcludeList(tbIncludeFiles.Text);
            excludeList = BuildIncludeExcludeList(tbExcludeFiles.Text);
        }

        ProcessParameters pp = null;

        if (chkReplace.Checked)
            pp = new ProcessParameters(tbPath.Text, tbFind.Text, tbReplace.Text, chkUseRegEx.Checked, includeList, excludeList, chkRecursion.Checked, chkIgnoreCase.Checked, true);
        else
            pp = new ProcessParameters(tbPath.Text, tbFind.Text, chkUseRegEx.Checked, includeList, excludeList, chkRecursion.Checked, chkIgnoreCase.Checked, false);

        bgw.RunWorkerAsync(pp);

        // Toggle fields to locked while it's running
        btnGo.Text = "Cancel";
    } 
```

这是 WorkerCompleted() 事件：

```
 private void bgw_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        btnGo.Text = "Go";

        string message = String.Empty;
        const string caption = "FindAndReplace is Complete";

        if (!e.Cancelled)
        {
            if (results != null)
            {
                tbFound.Text = results.Found.ToString();
                tbSearched.Text = results.FilesSearched.ToString();
                tbSkipped.Text = results.FilesSkipped.ToString();

                message = String.Format("Search finished resulting in {0} match(es).", results.Found);
            }
            else
                message = "The FindAndReplace results were empty. The process was cancelled or there was an error during operation.";
        }
        else
            message = "The FindAndReplace process was cancelled.";

        if (e.Error != null)
            message += String.Format("{0}{0}There was an error during processing: {1}", Environment.NewLine, e.Error);

        MessageBox.Show(message, caption);
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-07T13:38:35.863

> `CancelAsync`实际上并没有中止你的线程或类似的东西。它向工作线程发送一条消息，表明工作应该通过 BackgroundWorker.CancellationPending 取消。在后台运行的 DoWork 委托必须定期检查此属性并自行处理取消。

[在这里](https://stackoverflow.com/a/4732784/128217)阅读更多

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-07T13:39:53.023

你真的没有办法取消操作。问题是这段代码

```
 if (pp.DoReplace)
                    results = FindReplace.FindReplace.FindAndReplace(pp.PathToSearch, pp.FindText, pp.ReplaceText, pp.UseRegularExpressions, pp.IncludeList, pp.ExcludeList, pp.RecurseSubdirectories, pp.IgnoreCase);
                else
                    results = FindReplace.FindReplace.Find(pp.PathToSearch, pp.FindText, pp.UseRegularExpressions, pp.IncludeList, pp.ExcludeList, pp.RecurseSubdirectories, pp.IgnoreCase); 
```

一旦开始运行，就没有任何方法可以打破。因此，最终发生的事情是您点击了取消，但除非您在操作开始之前取消，否则取消永远不会注册。一旦该操作完成，DoWork 方法就会成功返回，并且后台工作人员永远不会触发取消。

**编辑：**如果您有办法将文本分成更小的块，然后可以“搜索和替换”，您可以遍历这些段并在每个循环上执行取消检查。但是，您需要确保将搜索字符串考虑到跨越这些中断边界，因此实际上可能需要更长的时间才能允许取消。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-07T13:43:40.783

您的代码是正确的，但是如果您再次仔细阅读，您会发现一旦后台工作人员启动，它很快就会超出取消检查。之后，即使您尝试取消，它也将不再起作用。

您必须重新设计您的搜索和替换算法以包括取消检查，以便支持您希望的取消。

# extjs4 - 在 extjs 中附加节点时，node.updateInfo 不是函数

> ID：10483047
> 
> 赞同：0
> 
> 时间：2012-05-07T13:35:24.657
> 
> 标签：extjs4, treepanel

我正在尝试将数据加载到 extjs 4`TreeStore`中，但是在附加节点时`node.updateInfo is not a function`出现错误。

我的模型类如下：

**维度.js**

```
Ext.define('ilp.model.Dimension', {
    extend : 'Ext.data.Model',
    require : [
        'ilp.model.DimensionLevel'
    ],
    fields : [
        'actualName', 
        'displayName'
    ],
    hasMany : {model : 'ilp.model.DimensionLevel', name : 'dimensionLevels'}
}); 
```

**DimensionLevel.js**

```
Ext.define('ilp.model.DimensionLevel', {
    extend : 'Ext.data.Model',
    fields : [
        {name : 'name', type : 'string'},
        {name : 'totalTrainees', type : 'int'}
    ]
}); 
```

树存储代码如下：

```
Ext.define('ilp.store.DimensionTree', {
    extend : 'Ext.data.TreeStore',
    requires : [
        'ilp.model.Dimension',
        'ilp.model.DimensionLevel'
    ],
    model : 'ilp.model.Dimension',

    root: {
    name: 'Dimensions'
    },

    proxy: {
    type: 'ajax',
    url: 'http://localhost:8080/pentaho/content/cda/doQuery',
    reader: {
            type: 'pentahoReader',
        root: 'resultset'
    },
    extraParams: {
        path: 'RINXDashboards%2FCDAs%2FILP_Employee_Qeries.cda',
        dataAccessId:'Get_All_Levels_From_All_Dimensions',
        userid : 'joe',
        password : 'password'
    }
    },

    listeners: {
    append : function(parentNode, newNode, index, options) {
            if(newNode.get('text') != 'Root') {
        console.log('newNode text value = ' + newNode.get('text'));
        newNode.set('checked', null);
        newNode.set('expandable', true);
        if(Ext.ClassManager.getName(newNode) == "ilp.model.Dimension") {
            newNode.set('expanded', true);
        newNode.set('text', newNode.get('displayName'));
        if(newNode.dimensionLevels().getCount() > 0) {
            newNode.dimensionLevels().each(function(level) {
            newNode.appendChild(level);
        });
        } else {
        newNode.set('leaf', true);
              }
        }else if(Ext.ClassManager.getName(newNode) == "ilp.model.DimensionLevel") {
            newNode.set('leaf', true);
        newNode.set('text', newNode.get('name'));
        }
    }
      }
    }
}); 
```

我在以下行遇到错误： `newNode.dimensionLevels().each(function(level) {`

在调试时我发现`updateInfo()`方法`newNode`是`undefined`.

谁能告诉我为什么会出现这个错误？我现在完全无能为力了！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T20:11:38.623

这可能是由错误 EXTJSIV-6051 引起的

有关更多信息，请参阅[Sencha 论坛](http://www.sencha.com/forum/showthread.php?199888-4.1.0-updateInfo-is-not-a-function-when-adding-a-model-instance-to-a-node)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T16:32:26.640

我认为您的问题来自：

```
root: {
   name: 'Dimensions'
}, 
```

根属性的类型必须为：Ext.data.Model/Ext.data.NodeInterface/Object。所以尝试用这个替换'root'属性：

```
root: {
    text: "Dimensions",
    leaf: false
} 
```

查看 Sencha 文档以获取更多信息：[http ://docs.sencha.com/ext-js/4-1/#!/api/Ext.tree.Panel-cfg-root](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.tree.Panel-cfg-root)

# arrays - excel不同的SUM.IF数组函数

> ID：10483048
> 
> 赞同：0
> 
> 时间：2012-05-07T13:35:25.210
> 
> 标签：arrays, excel, sum

我有一个非常具体的报告，我无法更改布局。基本上，它看起来像这样：

```
 A     B       C
1  ASD   Other   10
2  ASD   Other   10
3  ASD   Other   10
4  JKL   Other   20
5  EFG   Other   5
6  EFG   Other   5
7  GHJ   Other   10 
```

因此，可以重复行，并且当它们重复时，该行的值（C）保持不变。

使用条件格式 (=$A2<>$A1)，重复值（仅限 C 列）变为白色。

我怎样才能对这些值求和，以便每条不同的行只计算一次（应该返回 45）？

提前谢谢

PS：我使用的是 Excel 2003

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T13:48:13.863

当我将其放入单元格`D9`并将其作为数组公式输入 (Ctrl+Shift+Enter) 时，它适用于您的场景。但请注意，第 8 行中有一个空白行可以正常工作：

```
=SUM(IF(B1:B7<>B2:B8,D1:D7,0)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T13:39:17.750

使用过滤器功能对您有用吗？

[http://office.microsoft.com/en-us/excel-help/filter-for-unique-values-or-remove-duplicate-values-HP010073943.aspx](http://office.microsoft.com/en-us/excel-help/filter-for-unique-values-or-remove-duplicate-values-HP010073943.aspx)

[http://office.microsoft.com/en-us/excel-help/count-occurrences-of-values-or-unique-values-in-a-data-range-HP003056118.aspx](http://office.microsoft.com/en-us/excel-help/count-occurrences-of-values-or-unique-values-in-a-data-range-HP003056118.aspx)

**编辑：**我刚刚为你解决了。干杯!

[https://docs.google.com/spreadsheet/ccc?key=0AsSiq9ugaybxdHk2MGIyVFRHbXN2LUYxdHRaTVM2cUE](https://docs.google.com/spreadsheet/ccc?key=0AsSiq9ugaybxdHk2MGIyVFRHbXN2LUYxdHRaTVM2cUE)

# java - @Generated Annotation，我们如何使用它？

> ID：10483053
> 
> 赞同：23
> 
> 时间：2012-05-07T13:35:42.970
> 
> 标签：java, generated

我最近阅读了一篇关于 Java 注释的文章，而在后者中出现了***@Generated***注释。他们说它用于自动生成代码。

有人可以用一个小例子进一步解释我吗？

我在网上找到的所有内容都是一些专业问题或超出我所寻找的东西。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-07T13:41:43.273

根据[JavaDoc](http://docs.oracle.com/javase/8/docs/api/javax/annotation/Generated.html)：

> Generated 注解用于标记已生成的源代码。它还可用于区分用户编写的代码和单个文件中生成的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-12-16T17:55:09.250

[`@Generated`](http://docs.oracle.com/javase/8/docs/api/javax/annotation/Generated.html)由诸如[Auto/Value](https://github.com/google/auto/blob/master/value/userguide/index.md)等生成源代码的元程序使用，因此您不必手动编写它。如果您正在`.java`手动编写文件（通常是这样做的），请不要使用`@Generated`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-05T14:39:37.730

Fox 示例是关于生成代码和编写代码之间边界的好坏策略。（我相信）编译（静态）语言的思维方式不同，解释/动态。

最糟糕的是修改生成的代码（将在下一代丢失，或禁止下一代）通常被接受从生成的（手动）类派生，或生成扩展核心“手动”类的类。如果有人知道这方面的好政策，请发表评论。

# ruby-on-rails - 将 Drupal 用户帐户导入 Rails，无需用户更改密码

> ID：10483062
> 
> 赞同：2
> 
> 时间：2012-05-07T13:36:12.550
> 
> 标签：ruby-on-rails, drupal, devise

我想将一系列 Drupal 用户帐户导入到一个*新*的Rails 项目中。我在 Rails 中使用 Devise 进行用户身份验证。

我希望能够将加密的密码从 Drupal 导入到 Rails 中，以便用户在迁移站点时获得无缝体验。

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T13:40:10.963

似乎drupal[存储了用 加密的密码`md5`](http://api.drupal.org/api/drupal/modules!user!user.module/function/user_load/5)，所以如果在您的rails应用程序中，您将根据用户输入计算的md5与存储在drupal中的加密密码进行比较，那么您将得到匹配

# php - PHP：通过引用传递给函数的数组？

> ID：10483074
> 
> 赞同：5
> 
> 时间：2012-05-07T13:36:48.407
> 
> 标签：php, arrays, function, parameter-passing, pass-by-reference

我有这个 php 函数，它必须对给定的数组执行一些处理：

```
processArray($arrayToProcess) {

  $arrayToProcess['helloStackOverflow'] = TRUE;
} 
```

稍后，代码调用以下内容：

```
$niceArray = array('key' => 'value');
processArray($niceArray); 
```

键 'helloStackOverflow' 在 processArray 函数之外不可用。我尝试调用以下内容：

```
processArray(&$niceArray); 
```

使用“&”会有所帮助，但会引发一些警告：

> 不推荐使用的功能：不推荐使用调用时传递引用；如果您想通过引用传递它，请修改 populateForm_withTextfields() 的声明

在那里尝试了 & ，但这只是停止了代码。

我该怎么做？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-07T13:39:44.747

您必须在函数中定义引用，而不是在函数调用中。

```
function processArray(&$arrayToProcess) { 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-07T13:39:07.120

```
processArray(&$arrayToProcess) {

  $arrayToProcess['helloStackOverflow'] = TRUE;
} 
```

以 PHP 方式实现引用。

有关参考的有用信息，请参见[http://fi2.php.net/references](http://fi2.php.net/references)。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-07T13:38:55.170

```
processArray(&$arrayToProcess) {

  $arrayToProcess['helloStackOverflow'] = TRUE;
} 
```

引用传递现在发生在函数声明处，而不是在调用函数时。

[http://php.net/manual/en/language.references.pass.php](http://php.net/manual/en/language.references.pass.php)

获取完整文档。

# opencl - OpenCL中命令的提交和开始时间之间的长时间

> ID：10483075
> 
> 赞同：0
> 
> 时间：2012-05-07T13:36:53.197
> 
> 标签：opencl

我在一个大阵列上运行一个内核。当我分析 clEnqueueNDRange 命令时，执行时间（结束-开始）为 0.001 毫秒，但提交和开始（开始-提交）之间的时间约为 120 毫秒，这随输入数据的大小而变化。提交命令直到它开始执行时会发生什么。获得这么大的时间是否合理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T17:16:17.890

OpenCL 以异步方式运行。也就是说，当你要求完成一项工作时，它可能不会在那个时候发生。它会在未来的某个时间发生。这有点奇怪，尤其是当您开始分析事物时，但它的工作原理是这样的，以便 CPU 可以为 OpenGL 设备排队大量工作，然后在工作完成时去做其他事情。

例如：

```
clEnqueueWriteBuffer(blah);
clEnqueueNDRange(blah);
clEnqueueReadBuffer(blah, but blocking_read = CL_TRUE); 
```

在这里，writeBuffer 和 NDRange 可能会花费很少的时间。他们所要做的就是记录需要做的事情。阻塞的 readBuffer 会花费很长时间，因为它要等待读取的结果。为了完成读取，写入和内核执行必须在读取开始之前完成。

现在读取可能非常小，但是因为它正在等待它之前的所有内容完成它似乎花费的时间取决于它之前的命令中的工作量。

我不太明白你从你的问题中衡量了什么，但我希望你看到的是这种效果。工作时间被计入其他职能部门，因为他们必须等待之前的工作完成。

在编写高性能代码时，了解哪些函数会导致 CPU 在 GPU 上等待是一大技巧。任何时候你引入这样的等待，CPU 都会停止做任何有用的工作，GPU 很可能会在 CPU 准备下一个工作块时空闲。有时，别无选择，您只能等待。

# reporting - SQL Azure 通过电子邮件报告？

> ID：10483080
> 
> 赞同：1
> 
> 时间：2012-05-07T13:37:06.253
> 
> 标签：reporting, azure-sql-database

我是 Windows Azure 和 SQL Azure 的新手，想知道是否有一种方法可以导出我创建的报告（在我的报告服务器上）并像每周一样自动通过电子邮件将它们发送给管理员？

亲切的问候！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T16:17:02.100

由于您是 Windows Azure 和 SQL Azure 的新手，我建议如下：

1.  SQL Azure 报告仍处于预览（或 CTP）模式，因此可用的功能有限。
2.  SQL Azure 报告预览提供以下 3 种方案：

    2.1 在 Web 或客户端应用程序中嵌入 Microsoft 报告

    2.2 在 SQL Azure Reporting 报表服务器上设计、发布和查看报表 (.rdl) 和报表相关项。

    2.3 使用 SOAP API 调用与报表服务器 Web 服务交互。

3.  因此，当您使用 SQL Azure 报告预览版时，您可以生成报告，但是要通过电子邮件发送这些报告，您需要一个前端来处理连接到 SQL Azure 报告服务的本地运行的作业或自定义代码。

    3.1 此前端可以是 Windows Azure Web 角色（使用第 3 方电子邮件提供商或在线 MS Exchange 发送电子邮件）或您自己的 SQL Azure 报告服务，使用自定义代码发送电子邮件。

    3.2 您还可以编写一个客户端应用程序，通过 SOAP 与 Reporting Service Web 服务通信以获取报告，然后通过电子邮件发送到所需的目的地。

有关 SQL Azure 报告预览的更多信息在这里：

[http://msdn.microsoft.com/en-us/library/windowsazure/gg430129.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/gg430129.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T23:25:27.203

我假设您的报告服务器正在 Azure 上运行？Azure 没有 SMTP 服务器，所以基本上你需要做的是

1) 使用第三方 SMTP 服务器（Gmail 是免费的）发送电子邮件。Azure 最近与提供 SMTP 和电子邮件服务的 sendgrid 达成了交易。2) 编写一个以工作者角色运行并定期生成报告并将其发送出去的小应用程序。

# windows-phone-7 - 使用 ExpanderView & Binding 时页面加载缓慢（Windows Phone 7）

> ID：10483082
> 
> 赞同：3
> 
> 时间：2012-05-07T13:37:13.983
> 
> 标签：windows-phone-7, xaml, binding, silverlight-toolkit

我有一个全景控件，它有一个 ExpanderView 项（来自 Silverlight 工具包）。我的客户希望这个页面是可定制的。这就是我创建 3 级绑定的原因：PanoramaItems、ExpanderView 标头和 ExpanderView 内容。设置全景控件的 itemssource 时的问题。显示项目大约需要 5 秒钟。

知道如何解决这个问题吗？

C#代码：

```
private void panorama_Loaded(object sender, RoutedEventArgs e)
{
        this.DataContext = App.Products; 
} 
```

XAML 代码：

```
<controls:Panorama Loaded="panorama_Loaded" x:Name="panorama" ItemsSource="{Binding}">
        <controls:Panorama.ItemTemplate>
            <DataTemplate>
                <ListBox  ItemsSource="{Binding Sub_Products}" >
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <toolkit:ExpanderView  Header="{Binding}" Expander="{Binding}" ItemsSource="{Binding Sub_Sub_Products}">
                                <toolkit:ExpanderView.ExpanderTemplate>
                                    <DataTemplate>
                                        <StackPanel Orientation="Horizontal">
                                            <Image VerticalAlignment="Center" Source="Images/List.png" Width="25" />
                                            <TextBlock Text="{Binding Title}" />
                                        </StackPanel>
                                    </DataTemplate>
                                </toolkit:ExpanderView.ExpanderTemplate>
                                <toolkit:ExpanderView.ItemTemplate>
                                    <DataTemplate>
                                        <Grid Margin="-30,0,0,0" Background="White"  Width="450" Tap="Grid_Tap" >
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto" />
                                                <ColumnDefinition Width="*" />
                                            </Grid.ColumnDefinitions>
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="Auto" />
                                                <RowDefinition Height="*" />
                                            </Grid.RowDefinitions>
                                            <Image Grid.Row="0"  Source="{Binding ImageSource}" />
                                            <StackPanel  VerticalAlignment="Top" Grid.Column="1">
                                                <TextBlock Text="{Binding Title}"  />
                                                <TextBlock Text="{Binding Description}"  />
                                                <Grid>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="Auto" />
                                                        <ColumnDefinition Width="*" />
                                                    </Grid.ColumnDefinitions>
                                                    </Grid>
                                                <TextBlock Margin="0,12,32,0" Grid.Row="1" Text="Learn more" />
                                            </StackPanel>
                                        </Grid>
                                    </DataTemplate>
                                </toolkit:ExpanderView.ItemTemplate>
                            </toolkit:ExpanderView>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
            </DataTemplate>
        </controls:Panorama.ItemTemplate>
    </controls:Panorama> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T17:45:44.307

您可以尝试折叠不在屏幕上的全景项目，并且仅将可见性设置为按需可见。这至少应该减少可见树的大小。

查找慢速部分的一个好方法是使用 Visual Studio 中的分析器。您会发现一帧非常慢（在您的情况下，它的渲染时间为 5 秒）。然后深入研究该帧的可视化树，看看哪些元素需要很长时间才能渲染并尝试优化这些元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-14T09:08:49.303

移除 xaml 中的 ExpanderView ItemsSource 绑定，并在代码中对 Expander 进行操作时绑定到它。将其保留为`ItemsSource="{Binding}"`. 这样，您将在用户点击扩展器时动态构建您的可视化树。

事件处理程序如下所示。***我假设 Product 是您的 App.Products list 中的类型***。还要确保在扩展器的 xaml 中连接事件。

```
 private void ExpanderView_ManipulationStarted(object sender, System.Windows.Input.ManipulationStartedEventArgs e)
        {
            var expander = sender as ExpanderView;
            expander.ItemsSource = (expander.DataContext as Product).Sub_Sub_Products;
        } 
```

希望这可以解决您加载缓慢的问题，并且此时还为时不晚。

# html - HTML/CSS - 不一致的href

> ID：10483088
> 
> 赞同：1
> 
> 时间：2012-05-07T13:37:36.480
> 
> 标签：html, css

请参考我的页面[http://vault-x.com/v3/contact.html](http://vault-x.com/v3/contact.html)

```
Contact me via email: hello[at]vault-x.com 
```

`Follow Vault-X on Twitter`

这两个链接应该具有相同的链接样式，顶部正确但底部不正确。

为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T13:39:55.270

默认情况下，它们具有相同的样式。但是，如果您访问一个然后返回此页面，它们的风格会有所不同。您需要确保为以下内容设置样式：

```
a:visited { /* ... */ } 
```

您似乎也在写旧样式：

```
a:link, a:visited, a:active {
  color: #663300;
  text-decoration: none;
}

/* ... */

a.menu:link, a:visited, a:active {
  color: #999;
  text-decoration: none;
} 
```

也许您的意思是在底部的一组选择器上，`a.menu:link, a.menu:visited, a.menu:active`而不是在第一个选择器之后删除`.menu`类。

# python - 抓取 Google - 可检索结果的数量与总数不匹配

> ID：10483089
> 
> 赞同：0
> 
> 时间：2012-05-07T13:37:38.180
> 
> 标签：python, web-crawler, google-search

我想用 python 获得谷歌搜索结果，到目前为止我有以下脚本，我从这篇[文章](https://stackoverflow.com/questions/1657570/google-search-from-a-python-app)中学到了：

```
import urllib2
from bs4 import BeautifulSoup
import lxml
import sqlite3
import urllib
import json

def showSome(searchFor):
    query = urllib.urlencode({'q':searchFor})
    url = 'http://ajax.googleapis.com/ajax/services/search/web?v=1.0&%s'%query
    searchResponse = urllib.urlopen(url)
    searchResults = searchResponse.read()
    results = json.loads(searchResults)
    data = results['responseData']
    print 'Total results: %s'%data['cursor']['estimatedResultCount']
    hits = data['results']
    print 'Top %d hits'%len(hits)
    for h in hits:
        print ' ', h['url']

showSome("site:www.hitmeister.de/shops/") 
```

它显示了 4380 个结果，当我使用浏览器搜索相同的查询时，它给了我大约 6650 个结果，我如何从谷歌中提取所有结果？这也给了我前 4 个结果，我怎样才能获取所有结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T14:18:40.390

这里的问题是谷歌的估计结果数量总是估计值，仅此而已。这些估计值可能会因多种因素而异，显然包括您是通过 API 搜索还是通过 Web 浏览器进行搜索。事实上，当您从同一系统上的不同浏览器运行相同的查询时，Google 会返回不同的估计值并不是未知的。这可能是由另一台服务器回答您的查询来解释的，但我对此表示怀疑，而且众所周知，Google 会考虑搜索上下文。

另请参阅[此短片](http://homepage.ntlworld.com/jonathan.deboynepollard/FGA/google-result-counts-are-a-meaningless-metric.html)和[有关该主题的 Google 文档](https://developers.google.com/search-appliance/documentation/50/xml_reference#appendix_num_results)。尽管该附录似乎是专门为 Google Search Appliances 编写的，但它很好地描述了这些结果计数的准确性。

实际上，Google 无论如何都不会为查询返回超过 1,000 次点击，因此无论初始估计如何，您都不会获得查询的所有结果。至少，我没有尝试从 API 请求超过 1000 个结果，但这是 Web 界面的行为，我假设 API 具有相同的限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T14:18:44.803

Google is very complex and not the results depend on many different parameters.

For example, if I search for a term on `google.co.uk`, I get different results than `google.com`.

This behavior can also be the same for different user-agents and cookies (e.g. because you have set a different language in your cookie).

Very important is also, that the result count is not accurate. It is just an estimation of the google search. If you want to change this behaviour, I would try to inject the same parameters via ajax, that you inject with a normal search (including cookie, etc).

Ultimately my counter-question would be: Why do you need this? This count is most of the time not accurate, because the counter is just an estimation. Much more important is the question if the top results are the same. If this is not the case, that would be a problem I think.

# python - 学习循环时出现语法错误

> ID：10483093
> 
> 赞同：0
> 
> 时间：2012-05-07T13:38:05.213
> 
> 标签：python

我是“如何像计算机科学家一样思考”第 6 章关于迭代/While 循环部分的初学者。

在书中，二维表的语法如下：

```
i=1
while i <= 6:
  print 2*i, '   ', 
  i=i+1 
print 
```

但是，这样做会导致语法错误。终端给了

```
File "<stdin>", line 4
    print
        ^
SyntaxError: invalid syntax 
```

我知道第二个打印语句是不必要的，删除它会纠正错误；但是，本书后面部分的一行解释说，第二个 print 语句旨在在打印水平表后创建一个新行。因此，我认为这可能是一个拼写错误。我尝试了几种变体，但仍然无法找到解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T13:56:46.383

**好像是shell的问题**

执行您作为文件发布的代码段时，它会运行。您似乎在 shell 中运行（`<stdin>`提示），并且在 shell 中，相同的片段也不适用于我（Ubuntu 上的 python 2.7.2）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T14:00:43.417

您没有提及文件中是否包含这些内容，或者您​​是否手动输入。

在后一种情况下，您的终端看起来像

```
>>> i=1
>>> while i <= 6:
...   print 2*i, '   ',
...   i=i+1
... print
  File "<stdin>", line 4
    print
        ^
SyntaxError: invalid syntax 
```

也就是说，为了终止预期的`while`子句，您必须输入一个空行：

```
>>> i=1
>>> while i <= 6:
...   print 2*i, '   ',
...   i=i+1
... 
```

在这里执行已经发生。

`if 1`另一种解决方法可能是在子句中输入要执行的内容：

```
>>> i=1
>>> if 1:
...  while i <= 6:
...   print 2*i, '   ',
...   i=i+1
...  print
...
2     4     6     8     10     12
>>> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T13:41:26.380

~~...我认为这是`print`语句末尾的连续逗号。如前所述，如果您使用的是 Python 3，它会变成一个函数（例如`print(2*i)`）。~~

**编辑：** 仔细观察后，简单地删除多余的`print`. 这是没有必要的。如果您要打印一个水平表，那么在初始打印语句中附加换行符并没有错。

# jquery - 如何更改 jQuery 标记以显示 html

> ID：10483099
> 
> 赞同：0
> 
> 时间：2012-05-07T13:38:17.510
> 
> 标签：jquery, markup

我的问题在下面这个 HTML 代码中的 HTML 注释中

```
<div id="section-uvitaci_text" class="section section-checkbox ibutton">
  <h3 class="heading">Uvítací text</h3>
  <div class="option">
    <div class="controls">
      <input type="hidden" class="fld checkbox aq-input" name="uvitaci_text" id="uvitaci_text" value="0">
      <div class="ibutton-container">
        <input type="checkbox" class="fld checkbox of-input" name="uvitaci_text" id="uvitaci_text" value="1">
        <div class="ibutton-handle" style="left: 0px; ">
          <div class="ibutton-handle-right">
            <div class="ibutton-handle-middle"></div>
          </div>
        </div>
        <div class="ibutton-label-off"><span style="margin-right: 0px; ">
          <label>OFF</label>
          </span></div>
        <div class="ibutton-label-on" style="width: 4px; overflow-x: hidden; overflow-y: hidden; "><span style="margin-left: -50px; ">
          <label>ON</label>
          </span></div>
        <div class="ibutton-padding-left"></div>
        <div class="ibutton-padding-right"></div>
      </div>
    </div>
    <div class="explain">This will show an offline message. Except for administrators, nobody will be able to access the site</div>
    <div class="clear"> </div>
  </div>
</div>

<!--- Code below I want to slideDown and slideUp ---->

<div id="section-uvitacitext_nadpis" class="f_uvitaci_text section section-text ">
  <h3 class="heading">Nadpis uvítacího textu</h3>
  <div class="option">
    <div class="controls">
      <input class="of-input " name="uvitacitext_nadpis" id="uvitacitext_nadpis" type="text" value="Proč vybrat nás">
    </div>
    <div class="explain">Zde můžete zadat nadpis uvítacího textu</div>
    <div class="clear"> </div>
  </div>
</div> 
```

这是我的 jQuery

```
jQuery('.fld').click(function() {
    var $fold='.f_'+this.id;
    $($fold).slideToggle('normal', "swing");
}); 
```

我必须如何更改我的 jQuery 以向下滑动和向上滑动指示的 HTML？​</p>

# delphi - Delphi xe ，单位 dbExcept ，未找到。在德尔福 2009

> ID：10483100
> 
> 赞同：0
> 
> 时间：2012-05-07T13:38:27.183
> 
> 标签：delphi, delphi-xe

在数据库中，Embarcadero 是否删除了 dbExcept？

是否被移除或更换？

什么可以代替它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T17:58:14.113

该单元及其包含的代码已经消失。但看起来它实际上并没有做任何事情。我怀疑这是早已停止使用但留在原地的残留代码。该单元中的代码未被 Delphi 提供的任何其他源代码单元引用。

我希望您`DbExcept`的 uses 子句中有一个可以简单地删除的流浪者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T14:43:59.120

它似乎是已弃用的 Borland 数据库引擎 (BDE) 的一部分。安装了吗？

# cakephp - CakePHP 跨多个数据源查找查询

> ID：10483101
> 
> 赞同：5
> 
> 时间：2012-05-07T13:38:28.847
> 
> 标签：cakephp, orm

我正在尝试执行以下操作：

*   我的“公司”模型存储在“默认”数据源中。在模型中，我设置了 var $useDbConfig = 'default';
*   我的“用户”模型存储在另一个名为“users_db”的数据源中。在这个模型中，我设置了 var $useDbConfig = 'users_db';

“Company”和“User”模型之间存在“belongsTo”关系。

我想做一个递归查找查询，一次性带回每家公司的所有用户。我觉得我不能像现在这样用 Cake 做到这一点。

当我尝试以下操作时：

```
$res2 = $this->Company->find('all', array(
                'conditions' => array('Company.id' => 1),
                'recursive'=>2
            )); 
```

我收到一条消息，它找不到用户表（它在默认源中查找）：错误：在数据源**默认**中找不到模型用户的表 user_groups 。

有什么办法可以做到这一点吗？

非常感谢您提供的任何帮助......

kSeudo。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T13:16:54.280

* * *

好的，问题解决了。一旦我在模型中正确设置了数据源，一切似乎都正常。

多谢你们

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T20:47:13.193

为什么不这样替换你原来的声明：

```
$this->loadModel('User');
$res2 = $this->User->find('all', 
                array( 'conditions' => array( 'User.company_id' => 1 ) )); 
```

这将产生您想要的结果。

否则，如果你想要更整洁的东西，你可以`fetch_users()`在你的`Company`类中添加一个实现类似逻辑的函数。

# mysql - 子查询中的Mysql LIMIT

> ID：10483106
> 
> 赞同：1
> 
> 时间：2012-05-07T13:38:39.880
> 
> 标签：mysql

我有这个 mysql 语句，但在子查询错误中收到 LIMIT

```
SELECT  id
FROM    articles
WHERE  section=1 AND id NOT IN 
        (
        SELECT  id
        FROM    articles
        WHERE   is_top_story=1  ORDER BY timestamp DESC LIMIT 2
        ) 
```

我想从表中选择所有 id-s，其中 section=1 和 id-s 不在我的内部（第二个）语句中

```
+--id--+section+-is_top_story-+--timestamp--+
|  54  |   1   |     1        |    130      |
|  70  |   2   |     0        |    129      |      
|  98  |   3   |     1        |    128      |
|  14  |   1   |     1        |    127      |
|  58  |   4   |     0        |    126      |
|  13  |   3   |     1        |    125      |
|  64  |   1   |     1        |    124      |
|  33  |   1   |     1        |    123      | 
```

我的 sql 应该返回 64 和 33（它们是 section=1 和 is_top_story=1），因为 54 和 14（在内部语句中）

如果有人可以给我一些代码，我将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T13:54:33.687

这个怎么样：

```
SELECT a.id, a.times
  FROM articles AS a
  LEFT JOIN (
       SELECT id
         FROM articles
        WHERE is_top_story =1
     ORDER BY times DESC LIMIT 2) AS ax
  USING (id)
WHERE section = 1 AND ax.id IS NULL; 
```

当您需要限制子查询时，加入是一种常见的解决方法；需要排除逻辑只需将这些“左连接-joined.id IS NULL”部分添加到查询中。)

**更新：**你的例子有点困惑。您引用的原始查询是“取一些 section = 1 的文章，然后取出那些属于 2 个最近的 top_stories 的文章”。但是在您的示例中，在选择这些要忽略的故事时，还应考虑该部分...

使用该条件更新我的查询实际上也很容易：只需替换

```
WHERE is_top_story = 1 
```

和

```
WHERE is_top_story = 1 AND section = 1 
```

...但我认为在客户端代码中可能会更好地解决它。首先，您发送一个简单的查询，没有任何连接：

```
 SELECT id, is_top_story 
      FROM articles 
     WHERE section = 1
  ORDER BY times DESC; 
```

然后，您只需遍历获取的行集，并忽略两个带有“is_top_story”标志的第一个元素，如下所示：

```
 ...
  $topStoriesToIgnore = 2;
  foreach ($rowset as $row) {
    if ($row->is_top_story && $topStoriesToIgnore-- > 0) {
      continue;  
    }
    // actual processing code goes here
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T14:02:09.420

我不知道这是不是你想要的，这个问题有点混乱。我不明白你为什么对同一个表使用子查询。无论如何 LIMIT 与 MSSQL 的“TOP”相同，因此 LIMIT 2 应该只返回两条记录。

如果这不是您想要的，请发表评论，我将编辑我的答案：

```
SELECT  id
FROM    articles
WHERE  section=1 AND is_top_story != 1
ORDER BY timestamp DESC 
```

# java - 如何在 geotools 中创建一个简单的地图比例尺

> ID：10483110
> 
> 赞同：3
> 
> 时间：2012-05-07T13:39:17.307
> 
> 标签：java, scale, geotools

使用 GeoTools，我能够使用 JMapPane 类显示一个简单的形状文件。我的要求是像在任何地图中一样绘制一个条形图，当我放大/缩小时，以米为单位显示地图的比例相对于条形图的长度。

我已经搜索了好几天，但我找不到任何具体的提示。

甚至将地图中的两个给定点转换为像素距离的方法也会对我有所帮助

请任何提示非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T06:17:55.163

我没有示例，但是对于这个用例，如果您使用的是 GeoTools 8.x，您应该实现自己的 DirectLayer (http://docs.geotools.org/latest/userguide/library/render/map. html). 生成比例尺的代码可以在 uDig（LGPL，但不确切知道在哪个类）或 GeoServer（GPL'd，这里：[http ://svn.codehaus.org/geoserver/trunk/src/ wms/src/main/java/org/geoserver/wms/decoration/LegendDecoration.java](http://svn.codehaus.org/geoserver/trunk/src/wms/src/main/java/org/geoserver/wms/decoration/LegendDecoration.java) )

# spring - 来自@RequestScoped bean 的数据在不同的浏览器中共享

> ID：10483115
> 
> 赞同：3
> 
> 时间：2012-05-07T13:39:39.660
> 
> 标签：spring, jsf, scope, managed-bean

我有一个`@RequestScoped`带有`List`属性的bean。

```
import javax.faces.bean.ManagedBean;
import javax.faces.bean.RequestScoped;
import org.springframework.stereotype.Controller;

@Controller
@ManagedBean
@RequestScoped
public class MyBean implements Serializable {

    private List list;

    // getters and setters
} 
```

此属性链接到数据表：

```
<ice:dataTable value="#{myBean.list}" ..other stuff.. /> 
```

List动态填充没有问题，数据表显示没有问题。但是，如果，我导航到另一个页面，然后返回到初始页面，数据表仍然包含初始请求的数据。它不应该又是空的吗？如果 bean 是请求范围的，它应该在请求之后被销毁，我应该得到并清空数据表作为开始。

更奇怪的是，如果我在一个浏览器（如 Firefox）中打开页面，用请求填充数据表，然后我打开另一个浏览器（如 Chrome）并转到数据表页面，它会填充来自先前请求的数据从另一个浏览器！我认为 bean 的行为类似于应用程序。

有任何想法吗？

* * *

**更新 1**：该类既不是静态的，也不是它的变量。另外，我禁用了tomcat缓存，但仍然无法正常工作。

**更新2**：我想可能发现了问题。`@Controller`我的 backing bean 是用Spring注释的。我使用这个注解是因为然后用于`@Autowired`绑定服务。这可能是在创建一个单例，为什么没有在每个请求中创建和销毁？我认为很确定问题出在 Spring 和 JSF2 注释的混合中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T18:52:12.413

您不应该通过多个不同的 bean 管理框架（如 JSF、CDI 和 Spring）来管理单个 bean。选择一个或另一个。例如，当通过 Spring 管理 bean 时`@Controller`，其他框架（如 JSF`@ManagedBean`和 CDI）的所有与 bean 管理相关的注释`@Named`都将被**忽略**。

我不使用 Spring，我不知道您为什么使用它而不是标准的 Java EE 6 API，但是症状和文档表明这种 Spring bean 的范围确实默认为应用程序范围。您需要通过 Spring`@Scope`注解指定 bean 范围。您还想删除 JSF bean 管理注释，因为它们已经没有任何价值，只会让开发人员/维护人员感到困惑。

```
@Controller
@Scope("request")
public class MyBean implements Serializable {
    // ...
} 
```

或者，您也可以摆脱 Spring`@Controller`注释并坚持 JSF `@ManagedBean`。您可以使用`@ManagedProperty`而不是`@Autowired`注入另一个`@ManagedBean`实例甚至是 Spring 托管 bean（如果您配置了 Spring Faces EL 解析器），或者使用 Java EE 标准`@EJB`来注入一个`@Stateless`或`@Stateful`实例。

例如

```
@ManagedBean
@RequestScoped
public class MyBean implements Serializable {

    @EJB
    private SomeService service;

    // ...
} 
```

### 也可以看看：

*   [Spring JSF 集成：如何在 JSF 托管 bean 中注入 Spring 组件/服务？](https://stackoverflow.com/questions/18387993/declaring-a-bean-as-managedbean-and-or-controller-in-order-to-inject-a-spring)

# html - 960 网格 css：如何更改 div 之间的垂直填充？

> ID：10483118
> 
> 赞同：0
> 
> 时间：2012-05-07T13:39:45.773
> 
> 标签：html, css, grid, 960.gs

我正在尝试使用 960 网格 css 。

如何消除两个 div 之间的空间，一个在另一个之上？[如图所示蓝线之间的空间]![在此处输入图像描述](../Images/bd6caeb23176f386e6894d7d1fbc5bd4.png)

[我使用位于http://grids.heroku.com/](http://grids.heroku.com/)的 CSS 生成器生成了我的 CSS 。我为一个有 12 列、宽度为 720 的网格生成了 CSS [如下]

[http://grids.heroku.com/grid?column_width=59&column_amount=12&gutter_width=1](http://grids.heroku.com/grid?column_width=59&column_amount=12&gutter_width=1)

我的html代码如下

```
<div class="container container_12">  

<div class="grid_12">  
    <p>  
        12 
    </p>  
</div>  

<div class="clear"></div>   

<div class="grid_5">  
    <p>  
        5  
    </p>  
</div>  

<div class="grid_7">  
    <p>  
        7  
    </p>  
</div>  

<div class="clear"></div>   

<div class="grid_3">  
    <p>  
        3 
    </p>  
</div>  

<div class="grid_9">  
    <p>  
        9 
    </p>  
</div>  

</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T13:44:21.917

它是创建垂直空间的那些 div 内的 P 标签上的边距。设置`container div p {margin:0}`，一切都消失了。

# mysql - 如何在 MySQL 中将时间戳日期与仅日期参数进行比较？

> ID：10483123
> 
> 赞同：100
> 
> 时间：2012-05-07T13:39:57.213
> 
> 标签：mysql, datetime, date

在 SQL 语句中，如何将保存为 TIMESTAMP 的日期与 YYYY-MM-DD 格式的日期进行比较？

前任。：`SELECT * FROM table WHERE timestamp = '2012-05-25'`

我希望此查询返回在指定日期具有时间戳的所有行，但它只返回具有午夜时间戳的行。

谢谢

* * *

## 回答 #1

> 赞同：170
> 
> 时间：2012-05-07T13:42:49.917

您可以使用该`DATE()`函数来提取时间戳的日期部分：

```
SELECT * FROM table
WHERE DATE(timestamp) = '2012-05-25' 
```

但是，如果您在时间戳列上有一个索引，这会更快，因为如果您有一个索引，它可以利用时间戳列上的索引：

```
SELECT * FROM table
WHERE timestamp BETWEEN '2012-05-25 00:00:00' AND '2012-05-25 23:59:59' 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-07T13:43:24.257

```
 WHERE cast(timestamp as date) = '2012-05-05' 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2018-09-13T10:17:01.380

正如一些人所建议的那样，通过使用`DATE(timestamp)`您正在对列进行操作，因此您不能依赖索引排序。

但是，`BETWEEN`只有在包含毫秒的情况下，使用才会可靠。在示例时间戳中`BETWEEN '2012-05-05 00:00:00' AND '2012-05-05 23:59:59'`，您排除了时间戳介于`2012-05-05 23:59:59.001`和之间的记录`2012-05-05 23:59:59.999`。然而，由于数据类型的精度，即使这种方法也存在一些问题。有时会向上取整 999 毫秒。

最好的办法是：

```
SELECT * FROM table
WHERE date>='2012-05-05' AND date<'2012-05-06' 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-05-07T13:43:26.033

```
SELECT * FROM table WHERE timestamp >= '2012-05-05 00:00:00' 
    AND timestamp <= '2012-05-05 23:59:59' 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-07T13:43:21.293

使用 MYSQL 的转换函数：

```
SELECT * FROM table WHERE DATE(timestamp) = '2012-05-05' 
```

这应该工作

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-01-09T18:01:53.557

当我研究这个时，我认为修改 BETWEEN 解决方案以显示特定非静态/字符串日期的示例，而不是可变日期或今天的日期（例如`CURRENT_DATE()`. 这将使用log_timestamp 列上**的索引。**

```
SELECT *
FROM some_table
WHERE
    log_timestamp
    BETWEEN 
        timestamp(CURRENT_DATE()) 
    AND # Adds 23.9999999 HRS of seconds to the current date
        timestamp(DATE_ADD(CURRENT_DATE(), INTERVAL '86399.999999' SECOND_MICROSECOND)); 
```

我做了几秒/微秒以避免第二天上午 12 点的情况。但是，您也可以通过比较运算符执行“INTERVAL '1 DAY”，以获得更易于阅读的非 BETWEEN 方法：

```
SELECT *
FROM some_table
WHERE
    log_timestamp >= timestamp(CURRENT_DATE()) AND
    log_timestamp < timestamp(DATE_ADD(CURRENT_DATE(), INTERVAL 1 DAY)); 
```

这两种方法都将使用索引并且应该执行得更快。两者似乎都一样快。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-02-20T16:24:56.357

如果您使用 SQL 参数来运行查询，那么这将很有帮助

```
SELECT * FROM table WHERE timestamp between concat(date(?), ' ', '00:00:00') and concat(date(?), ' ', '23:59:59') 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-01-26T13:39:36.747

采用

```
SELECT * FROM table WHERE DATE(2012-05-05 00:00:00) = '2012-05-05' 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-08-23T07:36:19.033

当我读到你的问题时，我以为你在**Oracle DB**上，直到我看到标签“MySQL”。无论如何，对于使用 Oracle 的人来说，方法如下：

```
SELECT *
FROM table
where timestamp = to_timestamp('21.08.2017 09:31:57', 'dd-mm-yyyy hh24:mi:ss'); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-10-25T16:27:56.787

```
SELECT * FROM table WHERE DATE(timestamp) = '2012-05-25' 
```

如果由于 DATE 函数而有任何索引，它将起作用，但不会在“时间戳”列上使用索引。下面的查询使用索引并提供更好的性能

```
SELECT * FROM table WHERE timestamp >= '2012-05-05 00:00:00' 
    AND timestamp <= '2012-05-05 23:59:59' 
```

或者

```
SELECT * FROM table
WHERE timestamp >= '2012-05-05' AND timestamp < '2012-05-06' 
```

尝试运行这些以检查统计信息

```
explain SELECT * FROM table
WHERE DATE(timestamp) = '2012-05-25' 
```

```
explain SELECT * FROM table WHERE timestamp >= '2012-05-05 00:00:00' 
    AND timestamp <= '2012-05-05 23:59:59' 
```

# ajax - SelectOneMenu Ajax 更新仍然落后一步

> ID：10483128
> 
> 赞同：2
> 
> 时间：2012-05-07T13:40:12.003
> 
> 标签：ajax, jsf, primefaces

我对 ajax 更新有疑问。从 SelectOneMenu 组件中，我想选择一个排序选项，但始终使用最后一个非当前选项进行 ajax 调用。这是使用的代码片段，更新组件是我想要排序的数据的 LazyDataModel。我是 jsf 和 primefaces 的新手，希望我足够清楚。

```
<p:selectOneMenu id="selectSortDirection" value="#{notificationListView.sortDirection}">
                            <f:selectItems value="#{notificationListView.sortDirections}" var="currItem"
                                itemLabel="#{currItem.label}" itemValue="#{currItem.value}" />
                            <p:ajax event="change" update="notificationListDataTable"  />
                        </p:selectOneMenu> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T14:53:01.030

检查以下内容：

如果您添加一个侦听器`ajax`，在`listener`方法中您会看到正确的`notificationListView.sortDirection`? `notificationListView.sortDirection`并且在您的侦听器方法之后调用的 getter吗？

# cocoa - 可可屏保预览

> ID：10483130
> 
> 赞同：0
> 
> 时间：2012-05-07T13:40:15.663
> 
> 标签：cocoa, opengl, preview, screensaver

我在屏幕保护程序预览方面遇到了一些问题。这是一个简单的 OpenGL 屏幕保护程序，将背景清除为某种颜色（图像上的紫色）。它必须全屏填充颜色，并且在测试运行中确实如此，但在预览时我只看到这个：

![预览框](../Images/f057c12a1148cd76b55222146b084a37.png)

一些代码：

```
- (void)initOpengl {
    [[openglView openGLContext] makeCurrentContext];
    glShadeModel(GL_SMOOTH);
    glClearColor(0.5f, 0.3f, 0.8f, 0.5f);

    glClearDepth(1.0f); 
    glEnable(GL_DEPTH_TEST);
    glDepthFunc(GL_LEQUAL);
    glHint(GL_PERSPECTIVE_CORRECTION_HINT, GL_NICEST);
}

- (void)resize:(NSSize)newSize {
    [openglView setFrameSize:newSize];

    [[openglView openGLContext] makeCurrentContext];

    glViewport(0, 0, (GLsizei)newSize.width, (GLsizei)newSize.height);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    gluPerspective(30.0f, (GLfloat)newSize.width / (GLfloat)newSize.height, 
                   0.1f, 100.0f);

    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();
    [[openglView openGLContext] update];
    [self setNeedsDisplay:YES];
}

- (void)setFrameSize:(NSSize)newSize {
    [super setFrameSize:newSize];
    [self resize:newSize];
}
- (void)setFrame:(NSRect)frameRect {
    [super setFrame:frameRect];
    [self resize:frameRect.size];
}
- (void)drawRect:(NSRect)rect {
    [super drawRect:rect];

    [[openglView openGLContext] makeCurrentContext];
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    glLoadIdentity();

    glFlush();
}

- (void)animateOneFrame {
    [self setNeedsDisplay:YES];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T11:06:17.310

非常愚蠢的错误，问题解决了。而不是 [openglView setFrameSize:newSize]; 我应该使用 [openglView setFrame:...]; 有适当的论据

# jakarta-ee - Java EE 声明性安全性，无法为 JDBC 领域用户加载组

> ID：10483132
> 
> 赞同：6
> 
> 时间：2012-05-07T13:40:22.563
> 
> 标签：jakarta-ee, jdbcrealm, declarative-security

这是我在这里的第一篇文章。关于声明式 Java EE 安全性，我有两个问题：(1) 基于文件的身份验证和 (2) 基于 DB 的身份验证。我为这两个问题附上了配置的相关部分。我在 Glassfish 3.1.1 上运行代码。也提前感谢您的帮助。

我也在寻找我的问题的答案，并找到了一些有用的例子，我也把它们放在了消息的底部。我尝试关注它们，以便配置的当前状态可以包含这些示例的详细信息，但它们并没有解决问题。

- 如果勾选了“默认主体到角色映射”，则基于文件的身份验证可以正常工作，否则即使将主体添加到映射中，它也不起作用。我可能以不正确的方式配置了一些东西。

-基于数据库的身份验证。就授权而言，它不起作用，因为无法读取组名。请参阅下面的详细信息。身份验证工作正常，即用户被识别。我什至尝试重命名表格以避免与 Glassfish 的一些内部内容发生潜在的名称冲突......

**（1）基于文件的身份验证：** 文件领域，2个用户：用户，管理员添加并分配给组：用户和管理员（configurations/server-config/security/realms/file -> Manage Users）

配置/服务器配置/安全默认主体到角色映射“已勾选”->它可以工作默认主体到角色映射“未勾选”->即使将其添加到安全映射中它也不起作用。

```
web.xml

[...]
    <security-constraint>
        <display-name>Admin Pages</display-name>
        <web-resource-collection>
            <web-resource-name>Protected Admin Area</web-resource-name>
            <description/>
            <url-pattern>/faces/admin/*</url-pattern>
            <http-method>GET</http-method>
            <http-method>POST</http-method>
            <http-method>HEAD</http-method>
            <http-method>PUT</http-method>
            <http-method>OPTIONS</http-method>
            <http-method>TRACE</http-method>
            <http-method>DELETE</http-method>
        </web-resource-collection>
        <auth-constraint>
            <description/>
            <role-name>admin</role-name>
        </auth-constraint>
    </security-constraint>
    <security-constraint>
        <display-name>User Pages</display-name>
        <web-resource-collection>
            <web-resource-name>Protected Users Area</web-resource-name>
            <description/>
            <url-pattern>/faces/users/*</url-pattern>
            <http-method>GET</http-method>
            <http-method>POST</http-method>
            <http-method>HEAD</http-method>
            <http-method>PUT</http-method>
            <http-method>OPTIONS</http-method>
            <http-method>TRACE</http-method>
            <http-method>DELETE</http-method>
        </web-resource-collection>
        <auth-constraint>
            <description/>
            <role-name>user</role-name>
        </auth-constraint>
    </security-constraint>
    <login-config>  
        <auth-method>FORM</auth-method>
        <realm-name>file</realm-name>
        <form-login-config>
            <form-login-page>/faces/loginForm.xhtml</form-login-page>
            <form-error-page>/faces/loginError.xhtml</form-error-page>
        </form-login-config>
    </login-config>

[...] 
```

* * *

```
glassfish-web.xml:

<glassfish-web-app>
    <security-role-mapping>
        <role-name>admin</role-name>
        <group-name>admin</group-name>
    </security-role-mapping>
    <security-role-mapping>
        <role-name>user</role-name>
        <group-name>user</group-name>
    </security-role-mapping>  
</glassfish-web-app> 
```

没有默认主体映射的记录错误：

1.  没有映射到角色 [用户] 的主体。
2.  没有映射到角色 [admin] 的委托人。

* * *

```
Log without the default principal mapping:
    <security-role-mapping>
        <role-name>admin</role-name>
        <group-name>admin</group-name>
        <principal-name>admin</principal-name>
    </security-role-mapping>
    <security-role-mapping>
        <role-name>user</role-name>
        <group-name>user</group-name>
        <principal-name>user</principal-name>
    </security-role-mapping> 
```

没有默认主体映射的记录错误： 1\. 没有映射到角色 [用户] 的主体。2\. 没有映射到角色 [admin] 的委托人。

* * *

**(2)基于数据库的认证：**

Realm 在 web.xml 中将上述领域更改为 jdbcRealm

*   1）mn（用户和组表之间的多对多关系）

    SEC1111，无法为 JDBC 领域用户 [tamas] 加载组。

*   2) 1-n 相同（用户和组表之间的一对多关系）

    SEC1111，无法为 JDBC 领域用户 [tamas] 加载组。

*   3) 组名与用户名和密码在同一个表中

    SEC1111，无法为 JDBC 领域用户 [tamas] 加载组。

*领域配置：（* 我也尝试将“分配组”留空或填写“默认”，但结果是一样的。）

```
Image had to be omitted, summary:
JAAS context: jdbcRealm
JNDI: jdbc/securityDataSource
User Table: TBLUSERS
User Name Column: USERNAME
Password Column: PASSWORD
Group Table: TBLGROUPS
Group Name Column: GROUPNAME
Assign Groups: default
Digest Algorithm: none 
```

*mn关系的DB ER图：*

必须省略图像，但作为补偿 :-) 您可以在下面找到 SQL 脚本。

```
SQL Script:
SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL';

CREATE SCHEMA IF NOT EXISTS `jdbcrealm` ;
USE `jdbcrealm` ;

-- -----------------------------------------------------
-- Table `jdbcrealm`.`TBLUSERS`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `jdbcrealm`.`TBLUSERS` ;
CREATE  TABLE IF NOT EXISTS `jdbcrealm`.`TBLUSERS` (
  `USERID` INT NOT NULL AUTO_INCREMENT ,
  `USERNAME` VARCHAR(30) NOT NULL ,
  `PASSWORD` VARCHAR(45) NOT NULL ,
  UNIQUE INDEX `USERNAME_UNIQUE` (`USERNAME` ASC) ,
  PRIMARY KEY (`USERID`) )

ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `jdbcrealm`.`TBLGROUPS`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `jdbcrealm`.`TBLGROUPS` ;
CREATE  TABLE IF NOT EXISTS `jdbcrealm`.`TBLGROUPS` (
  `GROUPID` INT NOT NULL AUTO_INCREMENT ,
  `GROUPNAME` VARCHAR(30) NOT NULL ,
  PRIMARY KEY (`GROUPID`) )

ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `jdbcrealm`.`USERS_GROUPS`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `jdbcrealm`.`USERS_GROUPS` ;
CREATE  TABLE IF NOT EXISTS `jdbcrealm`.`USERS_GROUPS` (
  `USER_USERID` INT NOT NULL ,
  `GROUP_GROUPID` INT NOT NULL ,
  PRIMARY KEY (`USER_USERID`, `GROUP_GROUPID`) ,

  INDEX `fk_USER_has_GROUP_GROUP1` (`GROUP_GROUPID` ASC) ,
  INDEX `fk_USER_has_GROUP_USER` (`USER_USERID` ASC) ,
  CONSTRAINT `fk_USER_has_GROUP_USER`
    FOREIGN KEY (`USER_USERID` )
    REFERENCES `jdbcrealm`.`TBLUSERS` (`USERID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_USER_has_GROUP_GROUP1`
    FOREIGN KEY (`GROUP_GROUPID` )
    REFERENCES `jdbcrealm`.`TBLGROUPS` (`GROUPID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)

ENGINE = InnoDB;

SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS; 
```

我在这里复制了一些有趣的谷歌链接，这些链接对我很有帮助。原来，我跟着第二个。也许其他人也会发现它们很有用。

*   [http://docs.oracle.com/javaee/6/tutorial/doc/bnbxj.html](http://docs.oracle.com/javaee/6/tutorial/doc/bnbxj.html)
*   [http://blog.eisele.net/2011/01/jdbc-security-realm-and-form-b​​ased.html](http://blog.eisele.net/2011/01/jdbc-security-realm-and-form-based.html)
*   ...还有一些我不得不省略，因为第一篇文章中可能只包含两个链接。

感谢您到目前为止的阅读。最良好的祝愿，

塔马斯

* * *

* * *

**第 2 部分** 感谢您的回复。我创建了 2 个具有一对多关系的新表用户和组。在领域配置页面上，我为用户名、密码和组设置了表名和列。马特的评论也与链接一致（见下文我不能在这里发布）

> [...] 这里有趣的部分是，对于用户表和组表，我使用 v_user_role 作为属性的值。v_user_role 是一个包含用户和组信息的数据库视图。我没有直接使用用户表的原因是因为 glassfish 假设用户表和组表都包含一个包含用户名的列，这会导致重复数据。[...]

```
-- -----------------------------------------------------
-- Table `jdbcrealm`.`user`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `jdbcrealm`.`user` ;
CREATE  TABLE IF NOT EXISTS `jdbcrealm`.`user` (
  `userid` VARCHAR(30) NOT NULL ,
  `password` VARCHAR(45) NOT NULL ,
  PRIMARY KEY (`userid`) )
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `jdbcrealm`.`group`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `jdbcrealm`.`group` ;
CREATE  TABLE IF NOT EXISTS `jdbcrealm`.`group` (
  `groupid` VARCHAR(30) NOT NULL ,
  `userid` VARCHAR(30) NOT NULL ,
  INDEX `fk_group_user1` (`userid` ASC) ,
  CONSTRAINT `fk_group_user1`
    FOREIGN KEY (`userid` )
    REFERENCES `jdbcrealm`.`user` (`userid` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB; 
```

出现同样的错误。我还尝试将主键放在组表中的 groupid 列上，但从问题的角度来看，我没有遇到任何变化。有趣的是，我尝试对 1 个用户名、密码、组所在的表执行相同操作，并且出现相同的错误。

* * *

* * *

**走向解决方案和解决方案**

来自 Matt 的评论帮助很大，感谢这篇精彩的帖子。综上所述，在我写关于基于数据库的身份验证的问题时，很明显无法加载用户组。server.log 中的错误消息表明了这一点。

然而，我的怀疑转向了表和它们的列名之间的链接。然而，在简化了用户组实体的数据模型后，我无法解释为什么即使使用包含用户、密码和组的简单表也无法工作。我继续朝这个方向进行调查。我假设列名也会影响这一点。当我应用马特的配置时，“无法加载组”消息从 server.log 中消失了，但现象仍然存在。因此，我假设这些组可能已经加载，但也存在不同的问题。然后我采用了马特的配置并开始逐步更改列名以接近原始配置，但“无法加载组”消息没有出现在日志中。当我用我的原始设置重现这个案例并且日志消息不存在时，我知道日志记录有问题，它已经以某种方式被关闭了。所以我开始调查整个配置。

当我查看已部署的应用程序时，我选择了部署描述符并将它们加载到 glassfish 控制台上。web.xml 没问题，它和我写的内容一样，但是**glassfish-web.xml 的内容完全不同**！它的生成就像我没有 glassfish-web.xml 一样。然后我注意到**我的 glassfish-web.xml 没有放在 WEB-INF 目录中**. 我将它移到那里并进行了“全部清理，构建”并部署了应用程序。之后我回到了 db 视图，它以多对多的关系表示 TBLUSERS 和 TBLGROUPS 之间的数据。我最喜欢这个解决方案，因为它从数据的角度显示了最清晰的画面。我在领域配置页面上设置了适当的列。我用两个用户“tamas”和“arpi”对其进行了测试。“tamas”被添加到用户和管理员组，同时“arpi”被添加到用户组。角色和用户组之间的映射在 glassfish-web.xml 中。授予“tamas”对用户和管理员资源的访问权限，而“arpi”仅获得对用户资源的访问权限。

感谢您的帮助。塔马斯

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-07T14:25:10.883

乍一看，我会发现您的表格列名。

根据我自己的经验，我记得用户表中的用户列需要与表中的用户列具有完全相同的名称`USER_GROUPS`。匹配是通过列名完成的。

因此，您的`USER_GROUPS`表需要一个与表`USERNAME`中的用户名匹配的列`TBLUSERS`。

请注意，您必须为此更改表关系。

可能还有很多其他原因，但您可以尝试一下。

**这是我的本地配置：**

```
CREATE TABLE `user` (
  `LOGIN` varchar(32) NOT NULL,
  `password` varchar(256) DEFAULT NULL,
  PRIMARY KEY (`LOGIN`)
)

CREATE TABLE `group` (
  `IDGROUP` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(45) DEFAULT NULL,
  PRIMARY KEY (`IDGROUP`)
)

CREATE TABLE `group_has_user` (
  `IDGROUP` int(11) NOT NULL,
  `LOGIN` varchar(32) NOT NULL,
  PRIMARY KEY (`IDGROUP`,`LOGIN`),
  KEY `fk_group_has_user_user1` (`LOGIN`),
  CONSTRAINT `fk_group_has_user_user1` FOREIGN KEY (`LOGIN`) 
     REFERENCES `user` (`LOGIN`) 
     ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `fk_group_has_user_group1` FOREIGN KEY (`IDGROUP`) 
     REFERENCES `group` (`IDGROUP`) 
     ON DELETE NO ACTION ON UPDATE NO ACTION
) 
```

在 GF 管理控制台中进行以下设置：

![在此处输入图像描述](../Images/4f927db47e7965fda0709e705ca33ef5.png)

这是我从 sun-web.xml（现为 glassfish-web.xml）的安全角色映射：

```
<security-role-mapping>
    <role-name>user</role-name>
    <group-name>1</group-name>
  </security-role-mapping>
  <security-role-mapping>
    <role-name>sponsor</role-name>
    <group-name>2</group-name>
  </security-role-mapping>
  <security-role-mapping>
    <role-name>admin</role-name>
  <group-name>3</group-name>
</security-role-mapping> 
```

我在登录配置下的 web.xml 中定义了以下安全角色：

```
<security-role>
   <description/>
   <role-name>user</role-name>
</security-role>
<security-role>
   <description/>
   <role-name>sponsor</role-name>
</security-role>
<security-role>
   <description/>
   <role-name>admin</role-name>
</security-role> 
```

# javascript - 只允许从右下角调整大小

> ID：10483133
> 
> 赞同：0
> 
> 时间：2012-05-07T13:40:22.857
> 
> 标签：javascript, resize

是否可以只允许用户从右下角调整浏览器窗口的大小？我正在使用`window.onresize = function () {};`，但用户可以从任何一侧调整窗口大小。我想限制它，只允许它从右下角

可以用 JavaScript 实现解决方案吗？

# sql-server - 使用 SQL Server 2008 Enterprise 创建数据仓库

> ID：10483137
> 
> 赞同：1
> 
> 时间：2012-05-07T13:40:35.800
> 
> 标签：sql-server, etl, data-warehouse, denormalization, star-schema

我需要为现有的 SQL Server 数据库构建一个数据仓库。我已经设计了星型模式维度和事实表。我的问题是：

SQL Server 2008 Enterprise 中是否有工具可以帮助我将数据从事务数据库转换到新的数据仓库数据库？我正在寻找一种工具来帮助我清理数据并填充仓库表。我以前在使用 Oracle 数据库的学术环境中做过这个。在这种情况下，我必须使用 SQL “手动”完成所有操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T13:51:37.613

您必须检查 MS - SQL SERVER 的导入和导出功能，观看此视频： [http ://www.youtube.com/watch?v=eDfhTPU7P-M](http://www.youtube.com/watch?v=eDfhTPU7P-M)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T16:45:05.717

您应该学习 SSIS（不是那么难），但第一步是加载数据。快速而肮脏的方法是导入/导出向导——一旦你完成了它的步骤，你甚至可以将它保存为 SSIS 包，然后根据需要对其进行调整。

一些开发人员专门使用 SSIS 数据流来清理和整合数据。一些开发人员仅使用 SSIS 将数据带到暂存区域（表），然后使用 SQL 存储过程来转换/操作 SQL Server 上的数据。

# ios - 尝试建立 SQLite 连接/语句时应用程序崩溃

> ID：10483138
> 
> 赞同：0
> 
> 时间：2012-05-07T13:40:45.723
> 
> 标签：ios, xcode, sqlite

我在使用 SQLite 时遇到问题，我的应用程序在运行时崩溃，而我正在尝试连接到 SQLite 数据库并获取它的一些内容。这是我的代码：

```
-(IBAction)setInput:(id)sender
{
    NSString *strStoreNumber;
    NSString *strRegNumber;

    strStoreNumber = StoreNumber.text;
    strRegNumber = RegNumber.text;
    lblStoreNumber.text = strStoreNumber;
    lblRegNumber.text = strRegNumber;

    NSString* databasePath = [[NSBundle mainBundle] pathForResource:@"tblStore" ofType:@"sqlite"];

    if(sqlite3_open([databasePath UTF8String], &database) == SQLITE_OK) 
    {
        NSLog(@"Opened sqlite database at %@", databasePath);
        //...stuff
    } 
    else 
    {
        NSLog(@"Failed to open database at %@ with error %s", databasePath, sqlite3_errmsg(database));
        sqlite3_close (database);
    }

    NSString *querystring;

    querystring = [NSString stringWithFormat:@"SELECT strStore FROM tblStore WHERE strStore = %@;", strStoreNumber];  

    const char *sql = [querystring UTF8String];

    NSString *szStore = nil;
    NSString *szReg = nil;

    sqlite3_stmt *statement = nil;
    if (sqlite3_prepare_v2(database, sql, -1, &statement, NULL)!=SQLITE_OK) //queryString = Statement
    {
        NSLog(@"sql problem occured with: %s", sql);
        NSLog(@"%s", sqlite3_errmsg(database));
    }
    else
    {
        // you could handle multiple rows here
        while (sqlite3_step(statement) == SQLITE_ROW) // queryString = statement
        {            
            szStore = [NSString stringWithUTF8String:(char*)sqlite3_column_text(statement, 0)];
            szReg = [NSString stringWithUTF8String:(char*)sqlite3_column_text(statement, 1)];
        } // while        

    }

    sqlite3_finalize(statement);    
    // go on with putting data where you want    
} 
```

我在控制台中遇到的错误：

```
2012-05-07 09:39:33.619 CCoDBTry[962:f803] Opened sqlite database at /Users/*******/Library/Application Support/iPhone Simulator/5.1/Applications/5DB7A218-A0F6-485F-B366-91FD2F9BC062/CCoDBTry.app/tblStore.sqlite
2012-05-07 09:39:33.623 CCoDBTry[962:f803] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** +[NSString stringWithUTF8String:]: NULL cString'
*** First throw call stack:
(0x1593022 0x1724cd6 0x153ba48 0x153b9b9 0x9d4973 0x27c9 0x1594e99 0xd714e 0xd70e6 0x17dade 0x17dfa7 0x17d266 0xfc3c0 0xfc5e6 0xe2dc4 0xd6634 0x147def5 0x1567195 0x14cbff2 0x14ca8da 0x14c9d84 0x14c9c9b 0x147c7d8 0x147c88a 0xd4626 0x1f82 0x1ef5)
terminate called throwing an exception(lldb) 
```

任何帮助是极大的赞赏！

编辑：注意我在数据库中寻找的值是 type `VARCHAR`。我不确定知道这是否会有所作为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T13:49:16.530

```
+[NSString stringWithUTF8String:]: NULL cString 
```

它抱怨您已将空值输入`stringWithUTF8String:`. 您的代码对该方法有两个调用，每个调用都从查询结果中输入一个值。查看您的查询，您只选择了一个列，`strStore`. 我会假设分配给的行`szReg`失败，因为您正在尝试检索未在查询中选择的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-07T07:35:39.747

对于访问可能为空且我们不确定的值，我通常更喜欢事先检查它

```
char *sk = (char *)sqlite3_column_text(statement, 0);
if (sk != nil) {
    szStore = [NSString stringWithUTF8String:sk];
} 
```

这将阻止应用程序崩溃。

# java - 不能使用 char 类型的 ArrayList 作为方法的参数

> ID：10483139
> 
> 赞同：5
> 
> 时间：2012-05-07T13:40:46.807
> 
> 标签：java, generics

不能定义`ArrayList<char>`为 的参数`validate`。为什么做不到？尝试`ArrayList<?>`时它有效。为什么？应该`ArrayList<?>`用`ArrayList<char>`? 有什么区别？

```
public boolean validate(ArrayList<char> args){ ... } 
```

错误：`Syntax error on token "char", Dimensions expected after this token`

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-07T13:42:29.233

```
public boolean validate(List<Character> args){ ... } 
```

它必须是包装器类型 - `Character`- `List<Character>`。您不能将泛型与原始类型一起使用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-07T13:42:15.647

```
public boolean validate(ArrayList<Character> args){ ... } 
```

在 java 中使用泛型时，不能使用原始数据类型，但可以使用[Character](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Character.html)，它是表示原始数据类型的 Object，`char`内存开销很小。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T13:45:13.287

你可以尝试做这样的事情：`public boolean validate(ArrayList<Character> args){ ... }`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-07T13:53:38.257

Java中char的包装类是Character，在ArrayList中添加char对象或验证char对象时，应将char指定为Character。

```
ArrayList<Character>list = new ArrayList<Character>(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-07T13:49:34.160

通常，当您处理通用对象时，例如`ArrayList<T>`，您需要使用对象。`char`和之间的区别在于`Character`它`Character`是一个对象，并且允许在通用对象内部使用。

作为参考，每个原始类型都有自己的包装对象。你可以在[这里查看](http://en.wikipedia.org/wiki/Primitive_wrapper_class)。

# multithreading - (Java) XSLT 转换是否支持多线程？

> ID：10483140
> 
> 赞同：1
> 
> 时间：2012-05-07T13:40:49.460
> 
> 标签：multithreading, xslt

消息来源告诉我，Java XSLT 转换是“单线程”的，并且会“阻止”内核执行其他代码，直到转换完成。

但是，我在网络中找不到其他独立的来源来支持这一说法。

任何人都可以澄清这一点吗？

**资料来源：**

> XSLT 通常是单线程的并且 100% 受 CPU 限制（包括内存总线）。如果需要 250 毫秒，这意味着它将每秒处理 8 页（2 个 CPU x（1 秒 *（1000 毫秒/秒）/250 毫秒））。如果思考时间为 10 秒，则该应用程序将支持少于 80 个并发用户（实际上可能是 60 个）

[通过 theserverside.com 上的 Cameron Purdy](http://www.theserverside.com/discussions/thread.tss?thread_id=17866)

> 然后创建一个 Transformer 类的实例来执行实际的转换。与样式表本身不同，转换器不能被许多客户端共享并且不是线程安全的。

[来自 O'REILLY Java 和 XSLT](http://docstore.mik.ua/orelly/xml/jxslt/ch05_01.htm)

> newTransformer (...) 返回： 可用于在单个线程中执行转换的 Transformer 对象，从不为空。

[来自 Java 6 API TransformerFactory](http://docs.oracle.com/javase/6/docs/api/javax/xml/transform/TransformerFactory.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T19:27:01.790

如果没有迈克尔凯的帖子，我可以确定，但是......

否 - 不会阻止内核执行其他代码

这与 XSLT 无关。所有现代操作系统和 cpu 都实现了抢占式多线程。请参阅[http://en.wikipedia.org/wiki/Thread_(computing)#Multithreading](http://en.wikipedia.org/wiki/Thread_(computing)#Multithreading)。

这可以防止任何进程阻塞 CPU。

# collections - Meteor 使用本地连接导致错误：插入失败：404 -- 找不到方法

> ID：10483142
> 
> 赞同：8
> 
> 时间：2012-05-07T13:40:52.057
> 
> 标签：collections, client-side, meteor

我在客户端有一个流星集合

```
Friends = new Meteor.Collection("Friends");
Meteor.subscribe("Friends"); 
```

我有一个用户通过 facebook 进行身份验证，我想获取他们的朋友列表：

```
FB.api("/me/friends?    auth_token="+response.authResponse.accessToken,
    function(response){
        for (i = 0; i<response.data.length;i++){
            Friends.insert(response.data[i]);
    }
); 
```

我有一个函数来获取该列表：

```
Template.Friends.all_friends = function(){
    return Friends.find();
} 
```

我有一个模板想在屏幕上显示所有朋友：

```
<template name="Friends">
    {{#each all_friends}}
    <div id="{{id}}" class="friend">
        <img src="http://graph.facebook.com/{{id}}/picture" />
        {{name}}
    </div>
    {{/each}}
</template> 
```

页面上似乎发生的事情是所有朋友都在屏幕上*闪现*一秒钟，然后屏幕立即闪回空白。

在 javascript 控制台中，每个朋友都会出现一次消息（是的，它大于零，感谢您的提问）

```
insert failed: 404 -- Method not found 
```

所以！我错过了什么？任何人？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-07T20:09:42.680

您需要在客户端和服务器上都使用该 Collection 声明。

```
// common code, do not put under /client or inside Meteor.is_client test
Friends = new Meteor.Collection("Friends"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-16T00:02:49.487

如果您只想在客户端使用 Collection 并且不需要将该数据保存到服务器，您可以在“client”文件夹或 .isClient() 函数中声明您的集合，方法是将 null 传递给构造函数，如下所示：

```
if(Meteor.isClient()){
// Some other code
...

onlyClientCollection = new Meteor.Collection(null);

// Some other code
...
} 
```

# sql - SQL Server - 评估动态查询中的函数

> ID：10483145
> 
> 赞同：0
> 
> 时间：2012-05-07T13:41:14.370
> 
> 标签：sql, sql-server

我有一段动态 SQL，其中一部分检索一个依赖于查询的其他结果的函数，但也使用这些结果来评估这个函数。我知道 eval() 在 SQL 中不存在，所以我用什么？

一个非常简化的版本

```
select reading, functiontype, @result = eval(f.functionformula)
from readingstables r
join functiontable f on (r.functiontype = f.functiontype) 
```

所以基本上（注意这些只是示例公式）我想通过公式类型使用与一组读数相关的函数公式

如果 f.functiontype == 'A' then f.functionformula = reading * reading if f.functiontype == 'B' then f.functionformula = reading * costant / anothervalue //etc etc

实际版本是驱动游标的存储过程中的一大块动态 SQL。我宁愿在一个查询中执行此操作，但怀疑我可能不得不妥协并从第一个动态查询驱动第二个动态查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T14:12:21.993

为什么不简单地使用[POWER](http://msdn.microsoft.com/en-us/library/ms174276.aspx)功能：

```
Case functionType
    When 'A' Then Power( reading, 2 )
    When 'B' Then Power( reading, 3 )
    ...
    End 
```

你甚至可以像这样变得超级花哨：

```
Power( reading, Ascii( functionType ) - Ascii('A') + 2 ) 
```

* * *

**编辑**

鉴于您对 OP 的更改，除了动态 SQL 之外，没有办法动态执行函数调用。您可以创建一个 UDF，它采用函数类型参数并执行正确的表达式，但是 UDF 本身需要是一个大的 Case 表达式。

```
Create Function FunctionTypeExpression( @FunctionType char(1) )
Returns float
As

Return Case @FunctionType
    When 'A' Then ..expression 1
    When 'B' Then ..expression 2
    ... 
```

需要注意的是，您需要使函数的返回值与表达式中任何可能的返回类型兼容。希望它们都是数字。如果它们不是全部数字（或全部文本），则需要更详细地解释为什么不是这种情况。

# bash - Bash 脚本验证/最佳实践

> ID：10483148
> 
> 赞同：1
> 
> 时间：2012-05-07T13:41:20.427
> 
> 标签：bash, shell

我正在编写一个 Bash 脚本来设置一些环境变量，然后启动一个 Web 服务器。有哪些好的验证检查可以添加到脚本中，以确保它尽可能地是失败证明：

```
 1 #!/bin/bash
  2 
  3 # Allow checking that variables don't get set to empty strings.
  4 set -o nounset
  5 
  6 readonly qi_redmine_base="/srv/redmine"
  7 
  8 if test "${qi_redmine_base}" -eq "notset"
  9 then
 10 »···echo
 11 fi
 12 
 13 readonly qi_redmine_etc="/etc/redmine/default"
 14 
 15 if test "${qi_redmine_etc}" -eq "notset"
 16 then
 17 »···echo
 18 fi
 19 
 20 
 21 readonly RAILS_ETC="${qi_redmine_etc}"
 22 export RAILS_ETC
 23 
 24 readonly RAILS_LOG="${qi_redmine_base}/log"
 25 export RAILS_LOG
 26 
 27 readonly RAILS_VAR="${qi_redmine_base}"
 28 export RAILS_VAR
 29 
 30 readonly RAILS_CACHE="${qi_redmine_base}/tmp"
 31 export RAILS_CACHE
 32 
 33 export RAILS_ENV=production
 34 export X_DEBIAN_SITEID=default
 35 
 36 
 37 ruby /usr/share/redmine/script/server webrick -e production
 38 if [$? -ne 0]; then
 39   echo "Server failed to start"
 40 fi 
```

任何帮助是极大的赞赏！

格雷格

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T14:05:12.740

```
help test 
```

显示了字符串（长度> 0）和未定义变量的一些可能的测试机会。

甚至还有一个定义默认值的结构：

```
 ${parameter:-word}
          Use  Default  Values.   If  parameter is unset or null, the expansion of word is
          substituted.  Otherwise, the value of parameter is substituted.
   ${parameter:=word}
          Assign Default Values.  If parameter is unset or null, the expansion of word  is
          assigned  to parameter.  The value of parameter is then substituted.  Positional
          parameters and special parameters may not be assigned to in this way.
   ${parameter:?word}
          Display Error if Null or Unset.  If parameter is null or unset, the expansion of
          word  (or  a  message  to  that effect if word is not present) is written to the
          standard error and the shell, if it is not interactive, exits.   Otherwise,  the
          value of parameter is substituted.
   ${parameter:+word}
          Use  Alternate  Value.   If  parameter is null or unset, nothing is substituted,
          otherwise the expansion of word is substituted. 
```

（引用`man bash`）。

通常，您需要解决停机问题才能完成任务。

# flyway - 如何在没有所有 JDBC 驱动程序的情况下构建 Flyway

> ID：10483152
> 
> 赞同：0
> 
> 时间：2012-05-07T13:41:31.557
> 
> 标签：flyway

我发现在 Weblogic Server 中运行的 FlyWay 存在问题。

我克隆了源存储库并添加了单元测试+修复。但我无法在 Weblogic 中测试我的修复，因为 Maven 构建所需的所有 JDBC 驱动程序在公共存储库中不可用。

有没有一种简单的方法可以绕过这些依赖关系？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T22:49:52.907

正如[**如何贡献**](http://code.google.com/p/flyway/wiki/HowToContribute)wiki 页面中所述：

**使用-P-MediumTests**禁用 MediumTests Maven 配置文件。

前任。：`mvn clean install -P-MediumTests`

# android - 在通知栏中显示进度

> ID：10483158
> 
> 赞同：1
> 
> 时间：2012-05-07T13:41:43.747
> 
> 标签：android

我使用下面的代码在通知区域中显示进度条。我不确定它是否正确。请检查并让我知道。我想在视频上传时显示进度条，并想在上传后关闭。请给我建议。

```
protected Void doInBackground(Void... arg0) {   

            Intent intent = new Intent();
            final PendingIntent pendingIntent = PendingIntent.getActivity(getApplicationContext(), 0, intent, 0);
            // configure the notification          
            notification.flags = notification.flags | Notification.FLAG_ONGOING_EVENT;
            notification.contentView = new RemoteViews(getApplicationContext().getPackageName(), R.layout.uploadprogress);
            notification.contentIntent = pendingIntent;
            notification.contentView.setImageViewResource(R.id.status_icon, R.drawable.progressbar);
            notification.contentView.setTextViewText(R.id.status_text, "Uploading...");
            notification.contentView.setProgressBar(R.id.status_progress, 100, progress, false);

            notificationManager = (NotificationManager) getApplicationContext().getSystemService(
                    getApplicationContext().NOTIFICATION_SERVICE);

            notificationManager.notify(10, notification);

            final SharedPreferences prefs = PreferenceManager
            .getDefaultSharedPreferences(getApplicationContext());
            UUID uniqueKey = UUID.randomUUID();
                fname = uniqueKey.toString();
                Log.e("UNIQUE NAME", fname);
                String hostName = "MY HOST NAME";
                String username = "test";
                String password = "****";
                String location = selectedPath;         
                InputStream in = null;
                try {
                    Thread upload = new Thread() {

                        @Override
                        public void run() {

                            for (int i = 1; i < 100; i++) {   
                                progress=progress+1;
                                notification.contentView.setProgressBar(R.id.status_progress, 100, progress, false);                               
                                // inform the progress bar of updates in progress
                                notificationManager.notify(id, notification);                      
                                try {
                                    Thread.sleep(2000);
                                } catch (InterruptedException e) {
                                    // TODO Auto-generated catch block
                                    e.printStackTrace();
                                }
                            }      
                        }
                    };
                    upload.run();
                    FTPClient ftp = new FTPClient();
                    ftp.connect(hostName);
                    ftp.login(username, password);

                    ftp.setFileType(FTP.BINARY_FILE_TYPE);
                    ftp.enterLocalPassiveMode();
                    ftp.changeWorkingDirectory("/uploads");

                    int reply = ftp.getReplyCode();
                    System.out.println("Received Reply from FTP Connection:" + reply);

                    if (FTPReply.isPositiveCompletion(reply)) {
                        System.out.println("Connected Success");
                    }

                    File f1 = new File(location);
                    in = new FileInputStream(f1);

                    ftp.storeFile(fname+"."+extension, in);

                    System.out.println("SUCCESS");
                    System.out.println("Video Title:" +strTitle+" is uploaded successfully");
                    System.out.println("Video Name:" +fname+" is uploaded successfully");
                    ftp.logout();
                    ftp.disconnect();
                } catch (Exception e) {
                    e.printStackTrace();
                }
                StringBuffer inStreamBuf = new StringBuffer();
                strUserName = prefs.getString(
                        getResources().getString(R.string.username), null);
                strToken = prefs.getString(
                        getResources().getString(R.string.token), null);
                url = prefs.getString("VALUE", null);
                try {                   
                        inStreamBuf = XmlUtil.getUploadAuthResponse(url,
                                strUserName, strToken, strType, strTitle,
                                fname, strDesc, strCatId, strTags, strAccess,
                                strComments, strEmbed, strRating, strPublish);
                        strXmlResponse = inStreamBuf.toString();
                        Log.e("Response:", strXmlResponse);
                        DocumentBuilder db = DocumentBuilderFactory
                                .newInstance().newDocumentBuilder();
                        InputSource is = new InputSource();
                        is.setCharacterStream(new StringReader(strXmlResponse));
                        Document doc = db.parse(is);
                        NodeList nodes = doc
                                .getElementsByTagName(getResources().getString(
                                        R.string.xmlResponse));
                        Element element = (Element) nodes.item(0);
                        NodeList nl_request_type = element
                                .getElementsByTagName(getResources().getString(
                                        R.string.response));
                        Element el_request_type = (Element) nl_request_type
                                .item(0);
                        String strType = getCharacterDataFromElement(el_request_type);
                        // System.out.println("Response----------->"+strType);
                        if (strType.equalsIgnoreCase(getResources().getString(
                                R.string.success))) {   
                            finish();
                            Intent intent1 = new Intent(NewVideoActivity.this,
                                    MainscreenActivity.class);
                            startActivity(intent);
                        } else if (strType.equalsIgnoreCase(getResources()
                                .getString(R.string.expired))) {
                            XmlUtil.session = null;
                            Intent intent2 = new Intent(NewVideoActivity.this,
                                    MainscreenActivity.class);
                            startActivity(intent);
                            finish();
                            System.exit(0);
                        }                                           
                } catch (Exception e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }   
                notificationManager.cancel(10); 
                return null;

            } 
```

# java - 如何使用托管bean单击行并传递变量

> ID：10483159
> 
> 赞同：0
> 
> 时间：2012-05-07T13:41:45.747
> 
> 标签：java, jsf, jsf-2

我有一个 h:datatable 示例，用于在用户单击表格行时打开一个新页面。不幸的是，此示例使用 http 标头将参数传递给打开的页面。我的问题是这可以实现，但将参数传递到后台而不是标题？

这是完整的源[代码](http://www.2shared.com/file/oihxAbzw/RowClickTest_2.html)：

这是 JSF 页面：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core">
    <head>
        <title>test</title>
        <script type="text/javascript">
            function addOnclickToDatatableRows() {
                //gets all the generated rows in the html table
                var trs = document.getElementById('myForm:dataTable').getElementsByTagName('tbody')[0]
                .getElementsByTagName('tr');
                //on every row, add onclick function (this is what you're looking for)
                for (var i = 0; trs.length > i; i++) {
                    trs[i].onclick = new Function("rowOnclick(this)");
                }
            }

            function rowOnclick(tr) {
                //                var childNodes = tr.childNodes;
                //                for(var i = 0; childNodes.length > i; i++) {
                //                    
                //                }

                var elements = tr.cells[0].childNodes;
                for(var i = 0; elements.length > i; i++) {
                    if ((typeof elements[i].id !== "undefined") &amp;&amp;
                    (elements[i].id.indexOf("lnkHidden") > -1)) {
                      //opne in a new window//  window.open(elements[i].href);
                        location.href=elements[i].href
                        break;
                    }
                }
                return false;
            }
        </script>
    </head>
    <body onload="addOnclickToDatatableRows();">
        <h:form id="myForm">
            <h1>Click on table row example</h1>
            <h:dataTable id="dataTable" var="data" value="#{datatableBean.lstData}" border="1">
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="ID" />
                    </f:facet>
                    <h:outputText value="#{data.id}" />
                    <h:outputLink id="lnkHidden" value="AnotherPage.xhtml"
                                  style="display:none">
                        <f:param name="id" value="#{data.id}" />
                    </h:outputLink>
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="Value1" />
                    </f:facet>
                    <h:outputText value="#{data.value}" />
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="Value2" />
                    </f:facet>
                    <h:outputText value="#{data.value}" />
                </h:column>
            </h:dataTable>
        </h:form>
    </body>
</html> 
```

这是托管 bean：

```
 package edu.home;

    import edu.home.model.Data;
    import java.util.ArrayList;
    import java.util.List;
    import javax.faces.bean.ManagedBean;
    import javax.faces.bean.ViewScoped;

    @ManagedBean
    @ViewScoped
    public class DatatableBean {

        private List<Data> lstData;
        /**
         * Creates a new instance of datatableBean
         */
        public DatatableBean() {
            lstData = new ArrayList<Data>();
            lstData.add(new Data(1, "Hello World"));
            lstData.add(new Data(2, "Hello 123"));
            lstData.add(new Data(3, "Hello abv"));
            lstData.add(new Data(4, "Hello qaz"));
        }

        /**
         * @return the lstData
         */
        public List<Data> getLstData() {
            return lstData;
        }

        /**
         * @param lstData the lstData to set
         */
        public void setLstData(List<Data> lstData) {
            this.lstData = lstData;
        }
    }

This is the class Data:

package edu.home.model;

public class Data {

    private int id;
    private String value;

    public Data(int id, String value) {
        this.id = id;
        this.value = value;
    }
    /**
     * @return the id
     */
    public int getId() {
        return id;
    }

    /**
     * @param id the id to set
     */
    public void setId(int id) {
        this.id = id;
    }

    /**
     * @return the value
     */
    public String getValue() {
        return value;
    }

    /**
     * @param value the value to set
     */
    public void setValue(String value) {
        this.value = value;
    }
} 
```

我确信这是可能的，但我可以将论点传递给适当的方式。

最良好的祝愿

**编辑** 我知道`h:outputLink`必须以这种方式更改：

```
<h:column>
    <f:facet name="header">
        <h:outputText value="ID" />
    </f:facet>
    <h:outputText value="#{data.id}" />
    <h:commandLink id="lnkHidden" value="AnotherPage.xhtml"
                    style="display:none">
        <f:param name="id" value="#{data.id}" />
    </h:commandLink>
</h:column> 
```

但我不明白必须如何更改托管 bean。也许我想是否`AnotherPage.xhtml`可以访问`DataTable.x`hml 的托管 bean 并获取我想要传递的值？但也许我需要更改javascript？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T13:54:13.283

您尝试自己使用和渲染您的表格。

这是我的样本。根据您的要求进行修改。我使用了 JSF 2.0

```
<h:form id="nextPage">

    <table>
        <ui:repeat var="row" value="#{shoppingCartMB.shoppingItems}">
            <tr onclick="clickedMe('#{row.productId}');">
                <td>#{row.productId}</td>
            </tr>
        </ui:repeat>
    </table>

    <script>

        function clickedMe(id)
        {

            // Please modify following URL base on ur requirment.. 
            // Following is just for sample..
            location.href="#{request.contextPath}/product/" + id;
        }

    </script>
</h:form> 
```

这是一些漂亮的config.xml

```
<url-mapping id="productMB-loadProductDetail">
    <pattern value="/product/#{ productMB.productId }" />
    <view-id value="/pages/product-detail.jsf" />      
    <action>#{productMB.loadProductDetail}</action>  
</url-mapping> 
```

在 productMB (managed bean) 的 loadProductDetail() 中，您放置了另一个重定向(..)。

像这样的东西。。

```
response.sendRedirect(request.getContextPath() + "/product-info"); 
```

再次在漂亮的配置中..

您必须为上面的网址设置配置..

```
<url-mapping id="product-info">
    <pattern value="/product-info" />
    <view-id value="/pages/product-info.jsf" />
</url-mapping> 
```

在我的应用程序中，我做了类似的事情来隐藏一些 URL。

希望这有帮助。

这是我的示例源代码和我的理解。我以 zip 文件的形式上传到 4shared.com [http://www.4shared.com/zip/ctPZ4Dbj/URL_Hidding.html](http://www.4shared.com/zip/ctPZ4Dbj/URL_Hidding.html)

# java - Java 枚举类型编码约定

> ID：10483168
> 
> 赞同：19
> 
> 时间：2012-05-07T13:42:27.297
> 
> 标签：java, enums, coding-style

我有一个枚举类型...

```
public static enum Methods {
    NOTEQUAL,
    ORDERED,
    minMatch,
    minItem,
    minLength,
    sameLength,
} 
```

问题是我应该如何使用编码约定。我应该使用camelCase `NotEqual`（我在一个简单的类中使用）还是应该这样做：`NOT_EQUAL`？或者干脆使用大写字符：`NOTEQUAL`, `SAMELENGTH`?

是否有一些代码约定？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-05-07T13:45:04.277

我想说枚举本身，因为它是一个类，应该像每个类一样遵循骆驼大小写约定，而枚举的条目，因为它们是常量，应该是带有下划线的大写（例如。`NOT_EQUAL`）。

没有下划线的大写版本是绝对不可读的，千万不要使用它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T13:47:44.197

请参阅以下讨论：

[编码约定 - 命名枚举](https://stackoverflow.com/questions/3069743/coding-conventions-naming-enums)

我自己的观点是枚举就像常量，所以它们应该都是大写的。

# c# - 一个 lambda 表达式中的多个赋值操作

> ID：10483171
> 
> 赞同：4
> 
> 时间：2012-05-07T13:42:38.283
> 
> 标签：c#, lambda, expression-trees

我正在尝试创建一个动态 lambda 表达式（从文本解析），它执行多个任务。创建单独的作业相当容易，但是我被困在如何组合它们上。所以我想要实现的是相同的：

```
Action<Entity> action = (entity) => 
{ 
    entity.Property1 = "1"; 
    entity.Property2 = "2";
}; 
```

有没有办法将多个 Expression.Assign 表达式组合成一个（因为 Expression.Lambda 只接受一个 Expression 作为输入）？

--编辑：所以为了澄清我写的代码只是伪代码，所以错字（现在更正）不会改变任何东西。我现在拥有的代码类似于：

```
Expression parameter = Expression.Parameter(typeof(Entity), "param");
Expression firstProperty = Expression.Property(parameter, "Property1");
Expression first = Expression.Assign(firstProperty, "1");
Expression secondProperty = Expression.Property(parameter, "Property2");
Expression second = Expression.Assign(secondProperty, "2");
Expression final = [INSERT MAGIC HERE]
Action<Entity> action = Expression.Lambda<Action<Entity>>(final, entity).Complie(); 
```

注意，属性名实际上来自文本输入，赋值表达式的数量不限于2个，仅用于演示目的。我的问题是，是否有一个表达式可以让我组合赋值表达式，还是我必须为每个表达式创建不同的 lambda？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T14:47:23.263

试试这个魔法：

```
Expression.Block(first, second); 
```

# java - 如何检测是否在 Mac OsX 10.7 上下载了 JavaVM

> ID：10483172
> 
> 赞同：1
> 
> 时间：2012-05-07T13:42:40.700
> 
> 标签：java, macos, jvm

在 Mac OSX 10.7 上，JavaVM 在首次使用时会自动下载（当某些应用程序加载 /System/Library/Frameworks/JavaVM.framework/JavaVM 时）。但如果 JavaVM 不存在，应用程序会立即以退出代码 97 结束。

我的问题是，有没有办法以编程方式（最好是 carbon 方法）确定 JavaVM 是否已经下载并安装，所以我的应用程序可以相应地运行？

我的应用程序是用 C++ 编写的，它基本上是 Java 应用程序的本机启动器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T14:20:29.510

I found one way. If java is not installed /usr/libexec/java_home doesn't return java home dir and doesn't start download. Downloading could be started by parameter --request.

Anyway would prefer some API.

# geolocation - 无法在 webview 中获取位置

> ID：10483173
> 
> 赞同：1
> 
> 时间：2012-05-07T13:42:48.430
> 
> 标签：geolocation, android-webview, webviewclient

嗨，我没有在我的 java 脚本函数中获取位置，在 android web 视图中打开相同的代码在 android 浏览器中打开它时获取位置

```
_webview.getSettings().setJavaScriptCanOpenWindowsAutomatically(true);
        _webview.getSettings().setAppCacheEnabled(true);
        _webview.getSettings().setDatabaseEnabled(true);
        _webview.getSettings().setDomStorageEnabled(true);
        //  _webview.getSettings().setGeolocationEnabled(true);
        _webview.setWebViewClient(new GeoWebViewClient());
        _webview.getSettings().setJavaScriptEnabled(true);
        _webview.getSettings().setGeolocationEnabled(true);
        // _webview.setWebChromeClient(new GeoWebChromeClient());

        Log.i("onPageStarted", "Processing webview url click..."+this.getApplicationContext().getDir("database",
                Context.MODE_PRIVATE).getPath());
        _webview.getSettings().setGeolocationDatabasePath( "/data/data/" +this.getClass().getPackage().getName() + "/app_database/");
        _webview.setWebChromeClient(new WebChromeClient() {
            public void onGeolocationPermissionsShowPrompt(String origin, GeolocationPermissions.Callback callback) {
                callback.invoke(origin, true, false);
            }
        });
        _webview.loadUrl("file:///android_asset/www/hello.html"); 
```

这些是我在清单中给出的权限

```
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS"/> 
```

# dreamweaver - 是否可以安装和运行两个版本的 Dreamweaver（旧版本和新版本）？

> ID：10483174
> 
> 赞同：0
> 
> 时间：2012-05-07T13:42:48.670
> 
> 标签：dreamweaver, flash-cs5

我使用 DW`CS5`并想在`CS5.5`不卸载的情况下进行测试`CS5`。两者都可以安装在一台计算机上并同时或单独运行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T00:50:04.970

You can have both installed at the same time. On Mac you can run both at the same time, on Windows, you can run one or the other, but both at the same time.

# entity-framework - 实体框架数据注释和多语言

> ID：10483179
> 
> 赞同：2
> 
> 时间：2012-05-07T13:43:05.677
> 
> 标签：entity-framework, entity-framework-4, globalization

我的实体有此代码。

我想知道是否有一种方法可以根据用户选择的语言将硬编码文本替换为对资源文件的一些引用。

```
public class Applicant
    {
        [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
        public int ApplicantID { get; set; }

        [Required(ErrorMessage = "Name is required")]
        [StringLength(20, MinimumLength = 3, ErrorMessage = "Name should not be longer than 20 characters.")]
        [Display(Name = "First and LastName")]
        public string Name { get; set; } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T13:46:51.543

你在谈论本地化。检查这个

[http://adamyan.blogspot.com/2010/02/aspnet-mvc-2-localization-complete.html](http://adamyan.blogspot.com/2010/02/aspnet-mvc-2-localization-complete.html)

```
 [Display(Name = "Email", ResourceType = typeof(Localization))]
 [Required(ErrorMessageResourceName = "Required", ErrorMessageResourceType = typeof(Localization))]
 [Email(ErrorMessageResourceName = "EmailFormatError", ErrorMessageResourceType = typeof(Localization))]
 public string Email { get; set; } 
```

# java - Maven 的 pom.xml 中的 pluginManagement 是什么？

> ID：10483180
> 
> 赞同：298
> 
> 时间：2012-05-07T13:43:08.607
> 
> 标签：java, maven, build, pom.xml, maven-dependency-plugin

这是我的 pom 文件的片段。

```
....
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-dependency-plugin</artifactId>
                <version>2.4</version>                        
                <executions>
                    <execution>
                        <phase>install</phase>
                        <goals>
                            <goal>copy-dependencies</goal>
                        </goals>
                        <configuration>
                            ......
                        </configuration>
                    </execution>
                </executions>
            </plugin>
        </plugins>
... 
```

我通过命令成功使用它

```
mvn install 
```

但是，当我尝试将它包含在“pluginManagement”标签中时，`maven-dependency-plugin`当我启动`install`目标时停止工作。为什么“pluginManagement”标签会改变构建行为？或者我应该使用另一个目标或选项？

* * *

## 回答 #1

> 赞同：331
> 
> 时间：2012-05-07T13:49:21.903

您仍然需要添加

```
<plugins>
    <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-dependency-plugin</artifactId>
    </plugin>
</plugins> 
```

在您的构建中，因为`pluginManagement`这只是在所有项目模块之间共享相同插件配置的一种方式。

来自 Maven 文档：

> **pluginManagement** : 是一个可以在侧面插件中看到的元素。插件管理以几乎相同的方式包含插件元素，除了不是为这个特定的项目构建配置插件信息，它旨在配置从这个项目继承的项目构建。但是，这仅配置子级的 plugins 元素中实际引用的插件。孩子们有权覆盖 pluginManagement 定义。

* * *

## 回答 #2

> 赞同：307
> 
> 时间：2012-05-07T13:59:31.500

`<pluginManagement/>`和之间的区别`<plugins/>`在于`<plugin/>`：

*   `<pluginManagement/>`定义将由构建中的模块继承的插件的设置。这对于您有父 pom 文件的情况非常有用。

*   `<plugins/>`是插件实际调用的部分。它可能会或可能不会从`<pluginManagement/>`.

`<pluginManagement/>`如果它不是父 POM，则不需要在项目中有 a 。但是，如果它是父 pom，那么在孩子的 pom 中，您需要有如下声明：

```
<plugins>
    <plugin>
        <groupId>com.foo</groupId>
        <artifactId>bar-plugin</artifactId>
    </plugin>
</plugins> 
```

请注意您没有定义任何配置。您可以从父项目继承它，除非您需要根据子项目的需要进一步调整您的调用。

有关更具体的信息，您可以查看：

*   Maven pom.xml 参考：[插件](https://maven.apache.org/pom.html#Plugins)

*   Maven pom.xml 参考：[插件管理](https://maven.apache.org/pom.html#Plugin_Management)

* * *

## 回答 #3

> 赞同：44
> 
> 时间：2012-05-07T13:49:49.423

您可以使用`pluginManagement`in a`parent pom`来配置它，以防有人`child pom`想要使用它，但不是每个子插件都想要使用它。例如，您`super pom`为 Maven Javadoc 插件定义了一些选项。

不是每个人都`child pom`可能想要使用 Javadoc，因此您可以在一个`pluginManagement`部分中定义这些默认值。想要使用 Javadoc 插件的子 pom 只定义了一个插件部分**，**`pluginManagement`并将从`parent pom`.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-07T13:47:24.643

> pluginManagement：是一个在侧面插件中可见的元素。插件管理以几乎相同的方式包含插件元素，除了不是为这个特定的项目构建配置插件信息，它旨在配置从这个项目继承的项目构建。但是，这仅配置子级的 plugins 元素中实际引用的插件。孩子们有权覆盖 pluginManagement 定义。

来自[http://maven.apache.org/pom.html#Plugin%5FManagement](http://maven.apache.org/pom.html#Plugin%5FManagement)

复制自：

[Maven2 - pluginManagement 和父子关系的问题](https://stackoverflow.com/questions/1266226/maven2-problem-with-pluginmanagement-and-parent-child-relationship)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-08-05T15:29:28.233

因此，如果我理解得很好，我会说`<pluginManagement>`就像`<dependencyManagement>`两者都用于仅在父模块及其子模块之间共享配置。

为此，我们在父项目中定义了依赖项和插件的通用配置，然后我们只需要在子模块中声明依赖项/插件即可使用它，而无需为其定义配置（即版本或执行、目标、 ETC）。虽然这并不妨碍我们覆盖子模块中的配置。

相反`<dependencies>`，and`<plugins>`是随配置一起继承的，不应在子模块中重新声明，否则会发生冲突。

那正确吗 ？

# c# - 围绕添加到面板的隐藏字段创建 html 的最佳方法是什么？

> ID：10483183
> 
> 赞同：0
> 
> 时间：2012-05-07T13:43:11.997
> 
> 标签：c#, .net

我将这些隐藏的输入字段添加到面板中：

```
foreach (Object obj in Objects)
{
    HiddenField hf = new HiddenField();
    hf.Value = "";
    hf.ID = "categoria" + obj.ID;
    panelCategorieGuida.Controls.Add(hf);
} 
```

但是，在每个隐藏字段周围，我需要添加以下代码：

```
<div class="option-box"><a href="javascript:void(0);" class="option-box-item">&nbsp;</a>
    <span class="option-box-testo">Hello</span>
    <!-- HERE I NEED TO PUT THE HIDDEN FIELD i, so think to this whole option-box item into a cycle -->
</div> 
```

我想避免写`Literal`在cs上并将它们添加到面板中。

你能给我什么建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T14:29:10.053

您可以使用中继器控件，标记：

```
<asp:Repeater ID="catRep" runat="server" onitemcreated="catRep_ItemCreated">
  <ItemTemplate>
    <div class="option-box"><a href="javascript:void(0);" class="option-box-item">&nbsp;</a>
      <span class="option-box-testo">Hello</span>
      <asp:PlaceHolder ID="hiddenPlaceHolder" runat="server"></asp:PlaceHolder>          
    </div>
  </ItemTemplate>
</asp:Repeater> 
```

后面的代码：

```
protected void catRep_ItemCreated(object sender, RepeaterItemEventArgs e)
{
  Control placeHolder = e.Item.FindControl("hiddenPlaceHolder");
  if (placeHolder != null)
  {
    MyItemClass my = (MyItemClass)e.Item.DataItem;
    HiddenField hf = new HiddenField();
    hf.Value = "";
    hf.ID = "categoria" + my.ID;
    placeHolder.Controls.Add(hf);
  }
} 
```

当然，您必须将转发器与对象列表绑定

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T14:07:35.117

您可以像这样使用 HtmlGenericControl ..

```
HtmlGenericControl div = new HtmlGenericControl("div");
div.Attributes.Add("class", "option-box");

HtmlGenericControl a = new HtmlGenericControl("a") { InnerText = "&nbsp;" };
a.Attributes.Add("href", "javascript:void(0);");
a.Attributes.Add("class", "option-box-item");

HtmlGenericControl span = new HtmlGenericControl("span") { InnerText = "Hello" };
a.Attributes.Add("class", "option-box-testo");

div.Controls.Add(a);
div.Controls.Add(span);
div.Controls.Add(hf); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T14:11:49.897

如果你一遍又一遍地需要这种东西，你可能应该考虑把它变成一个[用户控件](http://msdn.microsoft.com/en-us/library/y6wb1a0e.aspx "用户控制")，这样你就可以简单地编写你需要的代码，然后重用它，而不用担心它周围需要什么。此时，您可以将隐藏字段设置为您需要的任何内容，并稍后以编程方式访问它。

或者，更好的是，考虑[Microsoft MVC](http://www.asp.net/mvc "微软 MVC")是否合适，并在其中制作类似的东西作为可替换视图。

根据评论进行编辑：您并不太清楚需要如何使用它，因此在我对您对隐藏字段的使用做出很多假设的情况下，这是一个粗略的尝试。

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="test.ascx.cs" Inherits="stuff.test" %>
<div class="option-box"><a href="javascript:void(0);" class="option-box-item">&nbsp;</a>
    <span class="option-box-testo">Hello</span>
    <asp:label id="label1" runat="server" visible="false"/>
</div> 
```

然后在代码隐藏中插入：

```
 public Label HiddenField
    {
        get { return (Label)FindControl("label1"); }
    } 
```

从那里您可以添加尽可能多的这些控件，无论您在使用什么，都可以随意调用，然后使用类似的 FindControl 调用（或者如果您需要多次调用，则将它们放在 NamingContainer 中，请参阅[这篇文章](http://forums.asp.net/t/1313476.aspx "命名容器")以了解如何做到这一点 在您拥有使用它的用户控件后，您只需执行 UserControl.HiddenField.Text 即可获得您要查找的标签。

这样做的最大假设是，这些隐藏字段都必须在总体上孤立地处理——这是你的 ForEach 给我的印象，因为你似乎在处理每一个字段，但彼此独立。如果所有这些事情都必须根据彼此的值来处理，那么您最好还是使用中继器的建议。

# windows - 是否有 API 调用来获取所有 sata 硬件设备？

> ID：10483196
> 
> 赞同：0
> 
> 时间：2012-05-07T13:43:50.027
> 
> 标签：windows, winapi, wdk

我试图让所有连接的 SATA 硬件设备。

我该怎么做 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T13:46:13.023

```
Get-WMIObject -Class Win32_DiskDrive | Select Caption 
```

您可以从结果输出中提取驱动器类型。

# c - Aztec (DB) 条码生成器

> ID：10483197
> 
> 赞同：2
> 
> 时间：2012-05-07T13:43:54.170
> 
> 标签：c, aztec-barcode

是否有阿兹台克二维条码（用于德国联邦铁路）生成器的开放实现。我不需要“aztec-data to bitmap”，但我需要“input-data to aztec-data”部分，绘图本身对绘图图元没有问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-14T16:27:21.127

[ZXing](https://code.google.com/p/zxing/)从 2.2 版本开始也支持 Aztec 编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T19:27:57.860

好吧，经过长时间的搜索，我发现[http://sourceforge.net/projects/zint/](http://sourceforge.net/projects/zint/)能够通过对代码进行细微调整来实现这一点。

# c# - 为什么Visual C# express 2010，变慢，断断续续，任务管理器的句柄太高？

> ID：10483199
> 
> 赞同：3
> 
> 时间：2012-05-07T13:44:05.380
> 
> 标签：c#, .net, sql, winforms

我正在使用 Visual c# express 2010。通常它工作正常，但通常（并非总是）当我将其打开几天时，程序本身会变得不稳定。鼠标单击或击键需要半秒钟才能注册。即使在屏幕上移动鼠标也很不稳定。我过去曾尝试通过运行它并玩它几个小时，然后让它运行几天来测试它是否是我正在处理的项目，但它似乎没有任何问题。只有 VCSExpress.exe 似乎有问题。

我今天选择发布这个问题的原因是当我开始工作时，它很不稳定，我将其关闭并重新启动，工作了一个小时，然后开始变得不稳定（仅一个小时后），和往常一样的问题，关闭它关闭并重新启动，现在它工作正常。

有人有想法么。

我在 Windows 中编程。C# Winforms。和 sql

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T13:55:51.440

Visual Studio 是一个非常反复无常的生物，这类性能问题并不少见。据我所知，这是由其他程序中的资源死锁引起的，这些程序导致一些不同的请求争夺对特定资源的权利，无论是鼠标、文件、显卡还是它认为可能的其他任何东西需要。我在几十台不同的计算机上遇到过类似的问题，这些计算机的硬件完全不同。除了VS2010之外，其中一些没有安装其他主要应用程序。

我能找到的唯一有助于控制问题的方法是使用像[Process Lasso](http://www.bitsum.com/prolasso.php "过程套索")这样的程序，它允许您在加载时为 Visual Studio 设置核心亲和力，以限制 VS 使用机器上的前 1 个或 2 个核心. 这不会完全解决问题，但根据我的经验，它使它不那么常见，并且在它发生时也降低了严重性（它至少不会冻结基本文件导航并强制 Ctrl-Alt-Del 以终止进程匆忙）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T14:23:58.713

我也有类似的问题。

这里有一些可能会有所帮助的建议。

*   防毒软件？排除 VS2010 进程可能会有所帮助，因为具有实时保护的 AV 将监视每个接触文件的进程。
*   操作系统？遇到问题时我在XP下，也许升级到Win7会有所帮助。
*   任何扩展？Resharper，生产力工具？

我对这 3 点有疑问，在操作系统升级和 AV 进程排除之后，情况要好一些。希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T13:48:03.643

我认为这与图形驱动程序或硬件加速有关。

试试我在以下问题中的回答：

[vs2010在任何类型的滚动中卡住/冻结](https://stackoverflow.com/questions/9663585/vs2010-stuck-freeze-in-any-kind-of-scrolling)

# php - 如何在php中使用多线程

> ID：10483200
> 
> 赞同：4
> 
> 时间：2012-05-07T13:44:08.933
> 
> 标签：php, multithreading, ffmpeg

我现在正在开发一个关于在 Internet 上共享视频的网站。流程如下：用户上传视频->服务器端接收视频并使用ffmpeg将视频格式转换为flv->用户继续在站点做其他事情。现在我想建立另一个线程来做转换工作（使用ffmpeg将视频格式转换为flv），这样用户就可以在不等待视频转换为flv的情况下做其他事情。但不知道如何！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T13:45:53.887

PHP 不支持线程。您应该使用由 cron 脚本运行的后台任务来执行此操作。

您可以有一个包含要处理的作业的表，例如，包含磁盘上的文件名、状态（待处理、转换、准备好）等，然后让脚本获取所有待处理作业，将它们的状态更改为正在转换，转换文件，然后将状态更改为就绪。通过这种方式，您还可以将信息呈现给用户，如果您希望同时转换多个文件，则可以运行多个脚本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T13:46:25.360

制作一个需要转换的视频队列，并以`cron`作业为例，将视频一个一个地转换。该队列可以存储在消息队列或数据库之类的东西中。

`ID`使用数据库，您可以创建一个包含、`StartDatetime`、`EndDatetime`、`Filename`、列的表`Status`，`Owner`并在上传视频时适当地设置这些列。当一些用户请求他或她的任何视频的状态时，您只需在数据库中查找状态，其中（例如）1 = 已添加，2 = 当前正在处理，3 = 完成，4 = 错误。

现在您的 cron 作业开始处理状态等于 1 的所有项目；处理时将其更新为 2，然后适当地更新为 3 或 4。

* * *

通过所有类似 fork/exec/run-on-background 的解决方案，您可以立即开始处理上传的视频，您允许所有用户阻塞服务器。如果多个用户同时开始处理一个大视频怎么办？您无法控制单独的进程，并且所有进程都在同时运行，这可能会大大降低您的服务器速度。

通过使用一个流程（从 开始`cron`）按顺序处理项目，您可以更好地管理正在使用的资源。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-07T13:46:43.493

看起来像是[工作服务器](http://gearman.org/)的工作。只需将其添加为[后台任务](http://php.net/gearmanclient.addtaskbackground)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-07T13:47:07.940

PHP 在任何方式、形状或形式上都不是多线程的。你可以用一些方法来伪造它，但它们不是真正的“线程”：

1.  [`ignore_user_abort(TRUE)`](http://php.net/manual/en/function.ignore-user-abort.php)允许脚本在用户断开连接后继续运行。
2.  [`exec()`](http://php.net/manual/en/function.exec.php)可以在 shell 级别启动一个可以在后台运行的新进程，但这将是一个完全独立的进程，并且在没有额外措施的情况下无法从父脚本控制
3.  [`pcntl_fork()`](http://php.net/manual/en/function.pcntl-fork.php)将创建当前脚本的克隆，然后可以继续处理，但再次名义上独立于父脚本。这要求`pcntl`扩展程序可用，并且在 Web 请求的上下文中使用是不安全的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-07T13:50:47.700

我认为人们通常会求助于 Gearman 来完成这些任务： http: [//php.net/manual/en/book.gearman.php](http://php.net/manual/en/book.gearman.php)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-07T13:48:52.770

您可以将 ffmpeg 作为后台进程生成。[请参阅此处](http://911-need-code-help.blogspot.com/2010/04/running-background-process-in-php.html)的详细说明。

我建议将上传的视频文件保存在某处，然后在其上运行 ffmpeg，并显示“正在处理文件..”直到文件创建（但您不必等待 ffmpeg，只需检查它是否已创建文件）。

另一种选择是将文件放在某个目录中，例如 /videos。然后创建一个将监视 /videos 文件夹并转换任何新文件的 cron 作业。

当然，您可以想出一种更精细、更安全的方法。

# php - Cyber source 未定义函数 cybs_load_config()

> ID：10483201
> 
> 赞同：0
> 
> 时间：2012-05-07T13:44:09.090
> 
> 标签：php

我浏览了网络资源 api 的文档以在 linux 上使用 PHP 进行设置。

我按照所有说明将所需文件添加到扩展目录并将其添加到 php.ini 并重新启动 httpd。

现在，当我调用 php 文件时，它给出：

```
PHP Fatal error:  Call to undefined function cybs_load_config() 
```

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T19:52:37.880

是我的错。忘记设置 LD_LIBRARY_PATH

这是如何设置它：

```
export LD_LIBRARY_PATH=/path/simapin.nn/libfolder:$LD_LIBRARY_PATH 
```

第二天解决了，今天才意识到在这里发帖。希望这可能对某人有所帮助。

# struts2 - 如何 -- 过滤器中的 url 映射？

> ID：10483202
> 
> 赞同：0
> 
> 时间：2012-05-07T13:44:10.653
> 
> 标签：struts2, struts

我在这里已经有一个未回答的问题，即当我们使用 servlet 时，如何以及何时将 .do 附加到任何 url 中......

今天在学习过滤器的时候，又产生了一个疑惑：

```
<filter-mapping>
        <filter-name>struts2</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping> 
```

在这种情况下，什么是 /*，如果它意味着它将检查所有请求？此外，当调用一个动作时，附加了`url says: http://..../myapp/register.action.`Like `.do`， `.action`甚至在映射中都没有提到它。请清除这个疑问，如果可能的话，这个`.do`疑问也......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T07:24:37.037

让我们尝试一一消除您的疑虑。web.xml中的以下行

```
<filter-mapping>
        <filter-name>struts2</filter-name>
        <url-pattern>/*</url-pattern>
</filter-mapping> 
```

是调用 S2 过滤器的条目。line `<url-pattern>/*</url-pattern>`，告诉容器（tomcat/weblogic 等）容器何时应该调用过滤器。因为对于 S2，我们需要做很多初始化工作才能让您的应用程序正常工作，所以我们告诉容器发送到容器的每个请求都应该通过 S2 过滤器。

关于 URL 之类的扩展`.action,.do`，这是 S2 内部的，与您在 中看到的过滤器映射无关`web.xml`。

所以简而言之，如果你点击像这样的网址

```
yourapplication-domian/abc.action
yourapplication-domian/abc.do
yourapplication-domian/abc.jsp 
```

所有上述请求都将通过过滤器，现在一旦它们通过过滤器，S2 将在内部检查哪个 URL 是有效的 S2 URL，例如，如果您设置了扩展名，因为`.action`S2 将仅识别具有这些扩展名的 URL 并处理它们而过滤器将处理所有。

希望这可以帮助您消除疑虑

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T14:37:05.920

在 struts-core jar 中找到 struts-default.properties，您可以找到这些设置。

您可以提供一个逗号分隔的列表，

例如`struts.action.extension=action,jnlp,do`

```
 struts.action.extension=action (default setting) 
```

# javascript - 短父元素中浮动图像上不需要的底部边距

> ID：10483205
> 
> 赞同：0
> 
> 时间：2012-05-07T13:44:17.520
> 
> 标签：javascript, html, css, ios, safari

我有一个只能在移动 Safari 中查看的页面，带有以下 HTML 标记：

```
<blockquote>
  <p><img src="..."/> A paragraph...</p>

  <p>...</p>

  ...
</blockquote> 
```

像这样的CSS：

```
blockquote {
  border-left: 1px solid #888;
}

blockquote img {
  float: left;
  margin: 0 20px 20px 0;
} 
```

当段落文本足够长时，这会产生预期的效果：

```
| IMAGE  A paragraph, blah blah blah...
| IMAGE  blah blah blah...
| IMAGE  
|        More paragraph, blah blah blah...
| blah blah blah, blah blah blah... 
```

例如，参见[http://jsfiddle.net/KDYCN/](http://jsfiddle.net/KDYCN/)

图像右侧和底部的边距需要在图像和文本之间提供所需的空白。

但是，当段落文本很短时，它会在底部产生不需要的边距。通常这不会是一个问题，但左边的边界线使这个故障像拇指酸痛一样突出：

```
| IMAGE  A paragraph, blah blah blah...
| IMAGE  blah blah blah...
| IMAGE  
| 
```

例如，参见[http://jsfiddle.net/KDYCN/1/](http://jsfiddle.net/KDYCN/1/)

除了使所有引号足够长之外，有关如何解决此问题的任何想法？:) 即使是 JavaScript 解决方案也是可以接受的，尽管并不理想。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T14:14:20.427

改变这个：

```
blockquote img {
  float: left;
  margin: 0 20px 20px 0;
} 
```

对此：

```
blockquote img {
  float: left;
  margin: 0 20px 0 0;
} 
```

编辑：

我删除了它，它似乎可以解决问题：

```
blockquote:after {
  content: "\0020";
  display: block;
  height: 0;
  clear: both;
  visibility: hidden;
} 
```

原因是这个隐藏的东西是在带有 clear:both 的图像之后，这使得块引用足够高以包含文本和图像。通过暂时给块引用一个边框来查看它的实际效果：

```
blockquote {
    border: 1px solid #00ff00;
} 
```

我喜欢霓虹绿，因为它很容易看到，而且通常不应该是那种颜色，所以也很容易看出我是否将调试代码留在原处。

# python - 如何使用 python HTMLParser 提取 HTML 标签内容

> ID：10483209
> 
> 赞同：-1
> 
> 时间：2012-05-07T13:44:37.687
> 
> 标签：python, html

我正在处理 HTML 页面，最后得到这样的行：

```
<td class="border">AAA</td><td class="border">BBB</td> 
```

我需要使用 HTMLParser 将 AAA 和 BBB 提取到变量中，但我无法弄清楚如何简单地做到这一点。我不能使用任何其他解析器，因为我在 python 工具方面受到限制。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T13:53:09.767

这将打印 TD 标签内的数据：

```
from HTMLParser import HTMLParser

inTD = False

# create a subclass and override the handler methods
class MyHTMLParser(HTMLParser):
    def handle_starttag(self, tag, attrs):
        global inTD
        if tag.upper() == "TD":
            inTD = True
    def handle_endtag(self, tag):
        global inTD
        if tag.upper() == "TD":
            inTD = False
    def handle_data(self, data):
        global inTD
        if inTD:
            print data 
```

# java - Netty 3.5.0 的稳定性

> ID：10483213
> 
> 赞同：-1
> 
> 时间：2012-05-07T13:44:59.207
> 
> 标签：java, netty

我看到 netty 3.5.0 版本只剩下 1 个问题。

我不需要半关闭套接字，我只需要文件上传功能。代码是否足够稳定，可以让我安全地使用文件上传内容？

另外，预计发布 3.5.0 的时间是什么时候？你们这些天似乎进展得相当快，看来可能不会太久。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T16:19:07.510

3.5.0.Final 应该真的很稳定。我预计它会在大约 2-3 周内发布，因为我们还想添加一些其他内容。

# c# - 拖放图片框

> ID：10483214
> 
> 赞同：1
> 
> 时间：2012-05-07T13:44:59.620
> 
> 标签：c#, winforms

我正在编写一个简单的纸牌游戏，只是为了好玩和一些练习，但不知道如何将卡片拖放到指定位置。卡片本身被设置为图片框中的图像，我想我想要做的是将这个图片框拖放到另一个图片框位置的指定位置。

也许有什么建议。

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-03-30T13:07:40.257

Just add:

```
myPixtureBox.AllowDrop = true; 
```

Note: This is not available at design time.

[https://msdn.microsoft.com/en-us/library/system.windows.forms.picturebox.allowdrop(v=vs.110).aspx](https://msdn.microsoft.com/en-us/library/system.windows.forms.picturebox.allowdrop(v=vs.110).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T13:49:19.500

这是有关该主题的文章。

[一个简单的拖放示例](http://www.codeproject.com/Articles/9017/A-Simple-Drag-And-Drop-How-To-Example)

# django - Django 模板的 Vim 内部标签块

> ID：10483218
> 
> 赞同：5
> 
> 时间：2012-05-07T13:45:15.610
> 
> 标签：django, templates, vim, django-templates

是否存在为 Django 模板提供这些文本对象的插件？例如，在 HTML/XML 中，如果我有以下文本

```
<p>This is some text.<p> 
```

我的光标位于标签内的任何位置，我可以`cit`用来更改标签内的文本。我正在为 Django 模板寻找类似的东西。例如，与文本

```
{% block title %}This is the title{% endblock %} 
```

我想要同样的行为。如果什么都不存在，任何 vimscripters 都知道这是否可能并愿意提供一些提示？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T13:49:24.097

查看官方 Django 文档。有一个“在 Django 中使用 Vim”部分。

[https://code.djangoproject.com/wiki/UsingVimWithDjango](https://code.djangoproject.com/wiki/UsingVimWithDjango)

和*环绕*映射部分。

* * *

这是一个摘录：

```
let b:surround_{char2nr("v")} = "{{ \r }}"
let b:surround_{char2nr("{")} = "{{ \r }}"
let b:surround_{char2nr("%")} = "{% \r %}"
let b:surround_{char2nr("b")} = "{% block \1block name: \1 %}\r{% endblock \1\1 %}"
let b:surround_{char2nr("i")} = "{% if \1condition: \1 %}\r{% endif %}"
let b:surround_{char2nr("w")} = "{% with \1with: \1 %}\r{% endwith %}"
let b:surround_{char2nr("f")} = "{% for \1for loop: \1 %}\r{% endfor %}"
let b:surround_{char2nr("c")} = "{% comment %}\r{% endcomment %}" 
```

将上面的内容放在 ~/.vim/ftplugin/htmldjango.vim 中。

可视模式下的示例（先选择一些文本）：

*   为变量输入**Sv**或**S{**
*   为块键入**Sb**
*   为 if 语句键入**Si**
*   为 with 语句键入**Sw**
*   输入**Sc**发表评论
*   为 for 语句键入**Sf**
*   为其他模板标签键入**S%**

PS：另一种可能性是使用 eclim (vim + eclipse)，它支持 Django 项目和模板编辑[http://eclim.org/vim/python/django.html](http://eclim.org/vim/python/django.html)但这要重得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-03T08:33:02.737

django-template-textobjects 插件 ( [https://github.com/mjbrownie/django-template-textobjects](https://github.com/mjbrownie/django-template-textobjects) ) 允许您实现这一点。它添加了一系列文本对象（例如 db 用于 Django 块，df 用于 Django 循环等）。

例如，cidb 将允许您更改以下内容：

```
{% block stylesheets %}My stylesheets here{% endblock %} 
```

该插件依赖于另一个插件 vim-textobj-user ( [https://github.com/kana/vim-textobj-user](https://github.com/kana/vim-textobj-user) )，所以记得先安装它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T00:05:33.557

您可能必须为此编写自己的文本对象。有关如何完成此操作的示例，请参见[textobj-rubyblock](http://www.vim.org/scripts/script.php?script_id=3382)和[vim-indent-object 。](http://www.vim.org/scripts/script.php?script_id=3037)

# reporting-services - SSRS+MDX+标量轴 -> 为缺失的 X 值评估 Y 值

> ID：10483219
> 
> 赞同：3
> 
> 时间：2012-05-07T13:45:15.797
> 
> 标签：reporting-services, ssas, mdx

我的 MDX 查询检索了大约 10 个列名称（其中一个实际上是键 EVENT_ID - 用于报告中的链接目的和向下钻取行为）+ 一个时间度量（我们工厂每天的时间损失）+ 一个预算度量。

由于我拥有所有这些列，因此我将无法“包含空单元格”-> 导致数百万行。

我在柱形图中呈现时间损失 + 评估移动平均线（来自后面的代码，非常复杂..） + 呈现预算线。我已经使用子报表在自上而下的布局中放置了一系列图表，只有图表系列使用参数进行了更改，所以我希望所有图表看起来都相同（x 轴上的起点和终点相同）纵观他们，只有系列组会改变->比较会很容易。

**我的问题是，**

由于 MDX 查询仅报告我们实际有时间损失的天数，

*   我将无法评估数据集中最后一天之后发生的天数的移动平均值。

*   我无法显示数据集中最后一天之后发生的天数的预算值。

这会导致非常不愉快的布局或子报表，其中一些图表具有上个月/天的值并且不...

请问有没有人解决过类似的问题？我已经尝试过在另一个保存所有日期的 DataSet 之间使用 Lookup-function 来解决这个问题，但是 seriesGroups 的使用使它有点不可用。

**添加信息：**

看下面的图片

**da*n 我只有 6 分，需要 10 才能发布图片：/**

细线可以评估滑动平均值，但我无法在**mar之后填充值，因为我的数据集在****mars**之后没有值。

图像应显示一月、二月、三月、四月、五月的柱形图。我只有在 2 月和 3 月评估的值和滑翔平均值 - > 滑翔平均值不会在 3 月之后显示。我希望它也能在 4 月和 5 月进行评估。滑翔平均值是从代码隐藏中评估的：

```
iif(DateValue(Fields!Date.Value)>=DateValue(First(Fields!Date.Value, "TimeData"))
,Code.movAvg.movingAverage(
    Sum(Fields!Time.Value,"CategoryGroup")
    ,DateValue(Min(Fields!Date.Value, "TimeData"))
    ,DateValue(Fields!Date.Value)
    ,DateValue(Max(Fields!Date.Value, "TimeData"))
    ,Parameters!Type.Value
    ,"TOTAL"
)
,Nothing 
```

)

但是此代码不会针对“空”日期执行...

我看到两个选项：

1.  更改 mdx 查询以给我所有期间的 0 值（包括空单元格？）
2.  或者以某种方式在 SSRS 中能够填充数据集中不存在的时间段的值

如果我选择选项 1，我需要减少查询中的字段计数（当前 10 个不行），但由于报告参数之一实际上映射到这些字段中的 5 个（能够更改分组行为) 我需要使查询动态、评估的 fron 连接字符串，这导致以后无法使用查询设计器......

这就是我瞄准选项 2 的原因。但我已经开始明白选项 1 是唯一的选择……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T09:03:32.480

我现在已经解决了这个问题，这样做：

> 我在 SSRS 中创建了两个数据集。

1.  此数据集包括该期间的所有日期和所有“度量”，MDX 查询中没有其他维度属性。
2.  该数据集仅包括该期间的 NON EMPTY 日期、主要度量（小时）以及我感兴趣的所有维度属性（大约 10 个属性）。

> 然后我在我的图表中设置数据集#1（所有日期都显示），并且我有兴趣显示维度属性，我使用 SSRS 函数**LookupSet**来连接数据集之间的数据（我在日期字段上连接数据）。不是最漂亮的解决方案，但最终效果肯定很好。

# javascript - Javascript有很多像Java小程序一样的木马和病毒吗？如何最好地防范它们？

> ID：10483223
> 
> 赞同：1
> 
> 时间：2012-05-07T13:45:27.273
> 
> 标签：javascript

我认为 Javascript 没有像 Java 小程序那样的病毒。我在浏览器中关闭了我的 Java 插件，但我无法真正关闭 Javascript。如果我这样做了，什么都行不通。

这是一个例子：

我只是在浏览 Javascript 教程和 GWT，其中一个博客站点感染了 Javascript 病毒。

有人知道这件事吗？这是我的 ESET 在我的 PC 上报告的屏幕截图。它似乎已经阻止了它。

![在此处输入图像描述](../Images/752b09ebede2c686d516188e3899409c.png)

它被称为 JS/IFramne.DE 特洛伊木马，来自一个名为*www.gmarwaha.com/blog的不良站点*

（**请勿点击或访问以上站点，它有 JAVASCRIPT TROJAN，错误站点！**）

我的问题是，如何保护自己免受 Javascript 病毒和木马的侵害？

在病毒方面，Javascript 和 java applet 一样糟糕吗？除了在 PC 上安装了杀毒软件，并且在访问哪些网站时可以很聪明，还有什么可以做的呢？

我开始认为一个人甚至不应该再上网了。

到处都有病毒和木马，现在还有Javascript。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T13:58:23.297

这是第 3 方小部件或整个网站失控的情况。

JS 本身不是病毒构建语言，也无法访问系统。它在浏览器中被隔离。但是，JS 可用于将您重定向到恶意站点或嵌入显示恶意站点的 iframe。但是 JS 不是执行攻击的语言，它只是辅助攻击。

主要攻击是在浏览器本身或其插件存在安全漏洞或攻击者利用的功能时进行的。最近的攻击是针对 Java 和 Flash，这两个插件都可以访问本地机器资源。

# javascript - 模态确认自定义对话框

> ID：10483224
> 
> 赞同：0
> 
> 时间：2012-05-07T13:45:28.707
> 
> 标签：javascript, jquery

我想知道是否有人可以帮助我。

我已经编写了一个脚本，允许用户以画廊格式查看他们上传的图像，如下[所示](http://www.mapmyfinds.co.uk/development/gallerytest.php#/0)。

[使用此处](http://jqueryui.com/demos/dialog/modal-confirmation.html)的 jQuery 演示，我现在尝试实现一个自定义对话框，以便在用户选择要删除的图像时出现。我已经编写了如下摘录所示的错误消息：

```
Galleria.ready(function() {
    this.$('thumblink').click();

    $(".galleria-image").append("<span class='btn-delete'></span>");  
    $(".btn-delete").live("click", function() {
        var img = $(this).closest(".galleria-image").find("img");      
        alert('Deleting image... ' + $(img).attr("src"));     
        return false; 
    }); 
}); 
```

我遇到的问题是我找不到一种方法来创建`div`对话框所必需的周围环境。我对 Javascript 比较陌生，所以也许这是一个非常基本的错误，但我只是想知道是否有人可以看看这个，让我知道我哪里出错了？

非常感谢和问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T13:55:35.317

想要图像周围的 div 吗？

您可以轻松地将 div 包裹在图像周围。

```
 <div id="inner">Hello/> 
```

尝试使用以下代码：

```
$('#inner').wrap('<div class="new" />'); 
```

输出如下：

```
<div class="new">
    <div id="inner">Hello</div>
  </div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T13:51:26.137

你可以这样做：

```
$('<div>').html('Deleting image... ' + $(img).attr("src")).dialog({autoOpen:true}); 
```

--

我认为这对你有用：

```
Galleria.ready(function() {
    this.$('thumblink').click();

    $(".galleria-image").append("<span class='btn-delete'></span>");  
    $(".btn-delete").live("click", function() {
        var img = $(this).closest(".galleria-image").find("img");      

// Dialog
var dialog=$('<div>').addClass('cDialog').html('Deleting image... ' + $(img).attr("src")).appendTo('#galleria').hide().fadeIn();

// On Success Delete You Can Do
// dialog.text('Deleted').delay(1000).remove();
// or

// dialog.remove();

        return false; 
    }); 
}); 
```

CSS：

```
#galleria{
overflow:hidden;
position:relative;
}

.cDialog{
width:100%;
position:absolute;
top:0;
right:0;
padding:13px;
background-color:#F2F2F2;
text-align:center;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T15:00:48.180

首先，您必须正确设置图像删除链接；

喜欢：

`<a title="delete img.jpg" href="delete.php?img={$id}"><span class="btn-delete"></span></a>`

然后：

```
Galleria.ready(function() {
    this.$('thumblink').click();

    $(".galleria-image").append("<span class='btn-delete'></span>");  
    $(".btn-delete").parent().live("click", function() {
        var link = this.href;  // Get Image delete link    

        var dialog = $("<div>").text("Are you want to " + this.title + " ?");
        dialog.dialog({
            resizable: false,
            height:140,
            modal: true,
            buttons: {
                "Delete all items": function() {
                    var result = $.get(link + "&ajax=1"); // you must echo "YES" with php if success of "NO" if false
                    if(result == "YES"){
                       // Show 
                       // alert('Deleted');
                    } else {
                        // Fail
                        // Try Again

                    }
                    $( this ).dialog( "close" );
                },
                Cancel: function() {
                    $( this ).dialog( "close" );
                }
            }
        });

        return false; 
    }); 
}); 
```

# iphone - iphone：单击一个按钮时，按钮的标题应打印在另一个按钮上

> ID：10483225
> 
> 赞同：0
> 
> 时间：2012-05-07T13:45:36.447
> 
> 标签：iphone, objective-c, ios5

我想从下图创建功能

![在此处输入图像描述](../Images/5177cd9d63e1264d691ff011cbfac618.png)

在此图像中有按钮“A”、“A”、“C”、“E”等。

现在单击此按钮时，我希望该按钮的文本位于第一个空白框中，然后单击另一个按钮后，我希望该按钮的文本位于第二个空白框中。

我怎样才能实现这种功能。

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T14:14:11.567

让这些按钮 'A'、'A'、'C'、'E' 等共享一个通用的操作方法，例如

```
-(void)blueButtonClick:(id)sender {

    UIButton* blueButton = (UIButton*)sender; // we got the button reference here whichever is clicked

    // suppose those white box is a UITextField

    if([self.textField1.text length] == 0){
        self.textField1.text = blueButton.currentTitle;
    } else if([self.textField2.text length] == 0) {
        self.textField2.text = blueButton.currentTitle;
    } else if([self.textField3.text length] == 0) {
        self.textField3.text = blueButton.currentTitle;
    } else if([self.textField4.text length] == 0) {
        self.textField4.text = blueButton.currentTitle;
    } else if([self.textField5.text length] == 0) {
        self.textField5.text = blueButton.currentTitle;
    } else {
        NSLog(@" I am full now .... Sorry !!");
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T13:47:15.097

使用 iboutlet 属性，并将它们连接到您的按钮，然后在其他按钮单击时更改其文本

喜欢

```
-(IBAction) butoonAPressed;
{
 self.buttonC.text = self.buttonA.text;
self.buttonB.text = self.buttonA.text;
} 
```

或者使用标签来证明按下了哪个按钮并将所有按钮文本保存在一个数组中，并根据标签进行检索。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T13:59:38.490

您应该为当前的空框（在本例中为 box=button 与白色背景）实现按钮操作设置文本。您需要做的是跟踪已填充的按钮以及下一个按钮（您可以考虑使用 UIButton 标签或其他方法来跟踪按钮）。

另外：您应该有办法让人们能够擦除最后一个框的值（以防他们不小心按错了按钮）。

亲切的问候，
博

# wcf - Visual Studio 2010 - Interop.ActiveDs.dll 未复制到 IIS Publish bin 文件夹

> ID：10483230
> 
> 赞同：1
> 
> 时间：2012-05-07T13:46:12.603
> 
> 标签：wcf, visual-studio-2010, publishing

我创建了一个 VS2010 WCF 服务项目。

我在服务项目中添加了对 Interop.ActiveDs.dll 的引用。作为旁注，Stdole.dll 在我机器上的 GAC 中。

当我构建服务项目时，Interop.ActiveDs.dll 被复制到项目文件夹下的 bin 目录中，但是当我使用 File System publish 发布项目时，Interop.ActiveDs.dll 没有被复制到发布文件夹中的 bin 目录中.

什么会导致发布操作不将程序集复制到 bin 目录？我可以做些什么来解决这个问题？

谢谢，

# android - Android 将文件保存到内部存储器有效，而保存到 SD 卡失败

> ID：10483232
> 
> 赞同：1
> 
> 时间：2012-05-07T13:46:21.630
> 
> 标签：android, file, file-io, sd-card

我有一个需要保存文件的 Android 应用程序。我创建这样的文件：

```
FileOutputStream fOut = openFileOutput(fileName, 
                    MODE_WORLD_READABLE);
            osw = new OutputStreamWriter(fOut); 
```

我这样打开它：

```
FileInputStream srcFileStream = openFileInput(fileName); 
```

这适用于内部存储器文件。我在我的应用程序中添加了一个偏好，用户可以在其中选择将文件保存到 sd 卡。我试试这个命令：

```
if (Prefs.getCard(this))
        fileName="/sdcard/"+fileName; 
```

这意味着如果 Prefrences 是 yes，我会在文件名前添加“/sdcard/”。其余代码保持不变，

这似乎不起作用，因为我得到一个例外：

```
File /sd/file1 contains a path seperator 
```

我如何使用相同的代码来保存到 SD 卡和内部存储器，只需像上面尝试的那样进行小修改？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T14:03:42.920

您当然没有忘记在清单中添加正确的权限...

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

您还可以尝试使用以下方式访问外部路径：

```
Environment.getExternalStorageDirectory(); 
```

我已经看到不同的外部路径名，具体取决于设备......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T13:58:33.980

这应该工作..

```
String baseDir = "";
String fileName = "myFile.txt";
FileOutputStream fOut = null;
if (Prefs.getCard(this)) {
    baseDir = Environment.getExternalStorageDirectory().getAbsolutePath();
    File file = new File(baseDir + fileName);
    fOut = new FileOutputStream(file)
}  else {
    fOut = openFileOutput(fileName, MODE_WORLD_READABLE);
}
if (fOut != null) {
    osw = new OutputStreamWriter(fOut);
    ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T14:00:14.537

**编辑被七人组击败：**

你可以尝试这样的事情：

```
File f = Environment.getExternalStorageDirectory(); 
String fullfilename = f.getAbsoluteFile() + "/Android/data/NameOfApp/fileshere/" ;

File folderToWrite = new File(fullfilename);
folderToWrite.mkdirs();

File fileToWrite = new File(fullfilename,"filename.txt"); 
```

# xslt - XSLT 中上个月的最后一天

> ID：10483246
> 
> 赞同：2
> 
> 时间：2012-05-07T13:47:03.520
> 
> 标签：xslt, xslt-2.0, xpath-2.0, functx

是否可以在 XSLT 中获取上个月的最后一天？我找到了这个函数：[http](http://www.xsltfunctions.com/xsl/functx_last-day-of-month.html) ://www.xsltfunctions.com/xsl/functx_last-day-of-month.html但我不知道如何使用它来获取上个月。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T14:30:35.863

**使用**：

```
current-date()
  - xs:dayTimeDuration(concat('P', day-from-date(current-date()), 'D')) 
```

**这会产生（在 2012 年 5 月的任何一天进行评估时）：**

```
 2012-04-30-07:00 
```

# linux - 无法在机架空间云服务器上的 ubuntu 上运行 jbossas7

> ID：10483249
> 
> 赞同：1
> 
> 时间：2012-05-07T13:47:20.510
> 
> 标签：linux, ubuntu, jboss, java, rackspace

我是ubuntu（linux）的新手，我正在尝试在rackspace云服务器上设置jbossas7，我通过ftp上传这些文件然后通过putty使用命令行在服务器上安装了jbossas7和jdk6，它适用于大约24小时，但在那之后它停止工作，我认为jbossas7拒绝启动，我尝试了很多东西，包括卸载和安装jdk。当我运行 /home/cuelearn/jboss/jboss-as-web-7.0.2.Final/bin/standalone.sh 命令时，出现以下错误...

```
 Exception in thread "main" java.lang.ExceptionInInitializerError
    at java.lang.Class.initializeClass(libgcj.so.12)
    at __redirected.__JAXPRedirected.initAll(__JAXPRedirected.java:87)
    at org.jboss.modules.Module$1.run(Module.java:88)
    at org.jboss.modules.Module$1.run(Module.java:75)
    at java.security.AccessController.doPrivileged(libgcj.so.12)
    at org.jboss.modules.Module.<clinit>(Module.java:75)
    at java.lang.Class.initializeClass(libgcj.so.12)
    at org.jboss.modules.Main.main(Main.java:260)
    Caused by: java.lang.IllegalArgumentException: Problem configuring DatatypeFactory
    at __redirected.__DatatypeFactory.<clinit>(__DatatypeFactory.java:70)
    at java.lang.Class.initializeClass(libgcj.so.12)
    ...7 more
    Caused by: javax.xml.datatype.DatatypeConfigurationException:                
    java.lang.ClassNotFoundException: gnu.xml.datatype.JAXPDatatypeFactory
    at javax.xml.datatype.DatatypeFactory.newInstance(libgcj.so.12)
    at __redirected.__DatatypeFactory.<clinit>(__DatatypeFactory.java:62)
    ...8 more
    Caused by: java.lang.ClassNotFoundException: gnu.xml.datatype.JAXPDatatypeFactory
    at java.lang.Class.forName(libgcj.so.12)
    at javax.xml.datatype.DatatypeFactory.newInstance(libgcj.so.12)
    ...9 more 
```

请指导我完成这件事，因为我因此承受着很大的压力。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-04T11:53:59.880

我得到了完全相同的问题。我想你已经在两年后解决了这个问题。以防万一其他人面临同样的问题：只需在standalone.conf 中配置java 路径。然后服务器应该毫不费力地启动。干杯

# .net - 使用 MSBuild 进行 ClickOnce 部署 -> 如何传递应用程序版本/或自动增量的当前内部版本号

> ID：10483254
> 
> 赞同：5
> 
> 时间：2012-05-07T13:47:34.533
> 
> 标签：.net, msbuild, clickonce

我们有一个使用 ClickOnce 部署的 Outlook 加载项。

开发人员签入构建后，PC 将构建排队并将应用程序发布到共享驱动器上的某个位置。

问题是构建不会将发布版本更改为当前的程序集版本，因此它会在以前版本的文件夹中发布，这会导致安装程序损坏，说无法安装该版本。

我读过[那篇文章](https://stackoverflow.com/questions/8482360/how-can-i-get-msbuild-to-increment-clickonce-publish-revision-version-number-on)。我设置了[程序集：AssemblyVersion("1.0.*")]。依然没有。

`<ApplicationVersion></ApplicationVersion>`我想出了一种通过增加*.csproj 文件中的来解决这个问题的方法。但我希望它是自动化的。

另一种解决方法是在执行 msbuild.exe 时：

```
/target:publish   /property:PublishDir="\\sharedDir\\" /property:GenerateManifests=true
/property:ApplicationVersion=1.0.0.123 
```

而且它仍然不是自动化的。我真的很想将当前版本号传递给 msbuild.exe 或在每个版本中将值替换`<ApplicationVersion></ApplicationVersion>`为实际版本号。还是有其他方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T13:57:39.753

我遇到了同样的问题，这就是我来到这里的方式。我能够使用您问题中的代码作为基础来解决。以下是使用 TFS 解决的步骤。

打开您的构建模板并打开工作流底部的参数选项卡。找到 MSBuildArguments 并修改默认值。以下是我最终得到的结果：

```
// Note: You can use /p for /property and /t for /target

"/t:Publish /p:PublishDir=<PublishDirectory> /p:ApplicationVersion="
    + Date.Today.ToString("yyyy") + "."
    + Date.Today.ToString("MMdd") + "."
    + Date.Now.Hour.ToString() + "."
    + Date.Now.Minute.ToString() 
```

当然，现在您需要保存并签入新的构建文件。我在让构建定义使用新值时遇到问题，所以我刚刚创建了一个新的构建定义。

这将创建一个新的应用程序文件夹，如：

```
<ApplicationName>_2013_0315_09_55 
```

我知道这是对旧帖子的新答案，所以我相信您已经找到了另一个解决方案，但我希望这可以帮助任何想要将 ClickOnce 部署与 TFS 一起使用的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T02:53:04.433

我使用[Hudson](https://en.wikipedia.org/wiki/Hudson_%28software%29)作为构建服务器并使用[MSBuild](http://en.wikipedia.org/wiki/MSBuild)进行构建。Hudson 使用内部版本号设置环境变量。然后，我将该环境变量作为命令行参数传递给我编写的程序，该程序解析`assemlyinfo.cs`文件并更新程序集版本、文件版本和程序集信息版本。

另一种方法是创建自定义任务而不是可执行文件来执行此操作（现在更容易，因为它现在支持[内联任务](http://msdn.microsoft.com/en-us/library/dd722601.aspx)）。以前版本的[TFS](http://en.wikipedia.org/wiki/Team_Foundation_Server)在设置环境变量时做了类似的事情，但它可能在 TFS 2010 中发生了变化。

以下是可以帮助您的资源：

*   *[TFS 2010 内部版本号和程序集文件版本：仅与 MSBuild 4.0 完全同步](http://www.wintellect.com/cs/blogs/jrobbins/archive/2009/11/09/tfs-2010-build-number-and-assembly-file-versions-completely-in-sync-with-only-msbuild-4-0.aspx)*

*   *[在 TFS 构建期间控制程序集编号](http://www.codewrecks.com/blog/index.php/2009/08/21/take-control-of-assembly-numbering-during-a-tfs-build/)*

*   *[GetBuildProperties 任务](http://msdn.microsoft.com/en-us/library/bb399152.aspx)*

此外，我们正在使用[Mage](http://msdn.microsoft.com/en-us/library/acz3y3te%28v=vs.100%29.aspx)命令行来创建[ClickOnce](http://en.wikipedia.org/wiki/ClickOnce)应用程序和部署清单。我们将 Mage 称为`Exec`MSBuild 项目中的任务。

# c# - 在运行时更改 Label[,] 属性

> ID：10483260
> 
> 赞同：0
> 
> 时间：2012-05-07T13:48:02.957
> 
> 标签：c#, winforms, multidimensional-array, labels

我有一种方法可以制作一个（新的）35 个标签的 lblArray，但是数组上的标签需要在按下按钮时重置。

所以我在 button1_onclick 中放置了相同的方法，但它只是在前一个数组下面创建了一个新数组..

你们能把我推向正确的方向吗？

提前致谢！大卫

一些代码：

```
public void CreateLableArray() {      
      LblArray = new Label[5, 7];
      int xpos = 0;
      int ypos = 0;

      for (int x= 0; x< 5; x++) {
        for (int y= 0; y< 7; y++) {
          LblArray[x, y] = new Label();
          LblArray[x, y].Left = xpos;
          LblArray[x, y].Top = ypos;
          LblArray[x, y].Width = 50;
          LblArray[x, y].Height = 50;
          LblArray[x, y].Text = String.Empty;         
          LblArray[x, y].Click += lblArray_Click;
          LblArray[x, y].BackColor = Color.Aqua;
          LblArray[x, y].BorderStyle = BorderStyle.FixedSingle;

          pnlPanel.Controls.Add(LblArray[x, y]);

          xpos += LblArray[x, y].Width;
        }
        ypos += LblArray[x, 0].Width;
        xpos = 0;
      }
    }/*CreateLableArray*/

private void EmptyLabels() {
      for (int x = 0; x < 5; x++) {
        for (int y = 0; y < 7; y++) {
          LblArray[x, y].BackColor = Color.Aqua;
        }
      }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T13:55:25.903

听起来您只需要更改标签的颜色，因此与其制作新标签并完成删除旧标签和添加新标签的所有工作，只需更改标签的颜色会容易得多现有标签。既然您首先发现了如何将其更改为另一种颜色，我认为您有能力做到这一点，是吗？如果没有，同样如此，我们可以帮助您提供相关的代码片段。

# jsf-2 - 访问 .jsf 时所需资源 (jsp) 不可用

> ID：10483268
> 
> 赞同：0
> 
> 时间：2012-05-07T13:48:33.440
> 
> 标签：jsf-2, jboss

我是 JSF 的新手，所以不要认为这不是什么愚蠢的错误。

我正在将我的 web 应用程序从 Eclipse Indigo 部署到 JBoss 6.1。我可以检查 webapp 是否部署在服务器中，因为静态 index.html 文件可以正常工作（并且其中的更改通过 Web 浏览器反映）。

我在 pages/NewRequest.jsf 中有一个 JSF2 Facelet，它的逻辑很少（实际上它是纯 XHTML）：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:f="http://java.sun.com/jsf/core">
<h:body>
Hola mundo again....
</h:body>
</html> 
```

我的 web.xml 如下（我检查了 FaceServlet 是否已配置）

```
<?xml version="1.0"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee web-app_3_0.xsd">
<display-name>GesMan</display-name>
<servlet>
  <servlet-name>Faces Servlet</servlet-name>
  <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
  <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
  <servlet-name>Faces Servlet</servlet-name>
  <url-pattern>*.jsf</url-pattern>
</servlet-mapping>
<servlet-mapping>
  <servlet-name>Faces Servlet</servlet-name>
  <url-pattern>*.faces</url-pattern>
</servlet-mapping>
<servlet-mapping>
  <servlet-name>Faces Servlet</servlet-name>
  <url-pattern>/faces/*</url-pattern>
 </servlet-mapping>
<welcome-file-list>
  <welcome-file>index.html</welcome-file>
  <welcome-file>NewRequest.jsf</welcome-file>
</welcome-file-list>
</web-app> 
```

这一切对我来说都是合法的，但是当我尝试访问 JSF 时，我只得到一个 404 错误页面，告诉我与我的 JSP 同名的 JSP 不存在。控制台和 server.log 文件中均未显示错误

你能告诉我我做错了什么，或者我怎样才能得到更具体的错误信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T13:53:22.870

实际视图文件的文件扩展名应该代表使用的视图技术（例如`.xhtml`或`.jsp`），而不是 JSF 映射（例如`.jsf`）。你应该有一个`pages/NewRequest.xhtml`，而不是一个`pages/NewRequest.jsf`。

您的另一个问题是欢迎文件不能代表映射（虚拟）文件名，但必须代表实际文件名。所以你需要`NewRequest.xhtml`那里。但这反过来又要求您将其映射到`FacesServlet`该 URL 模式上。

所以，总而言之，只需简化`web.xml`如下：

```
<servlet>
  <servlet-name>Faces Servlet</servlet-name>
  <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
  <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
  <servlet-name>Faces Servlet</servlet-name>
  <url-pattern>*.xhtml</url-pattern>
</servlet-mapping>
<welcome-file-list>
  <welcome-file>NewRequest.xhtml</welcome-file>
</welcome-file-list> 
```

这样您就可以继续`.xhtml`在 URL 中使用，而无需摆弄虚拟 URL。

# javascript - 需要使用 __doPostBack 调用服务器端事件

> ID：10483271
> 
> 赞同：5
> 
> 时间：2012-05-07T13:48:43.427
> 
> 标签：javascript, asp.net, rad-controls

我有这样的服务器端事件。

```
protected void RadTreeView1_ContextMenuItemClick(object sender, RadTreeViewContextMenuEventArgs e)
    {
         // implementation here.
    } 
```

我正在尝试从客户端 javascript 调用它。我试过 __doPostBack("contextMenuItemID", "some string")

它将页面发布回服务器，但这不会调用原始的 ContextMenuItemClick 事件。如何使用正确的事件 Args 调用原始 contextMenuItemClick 事件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-07T13:59:43.417

你会想看看使用[ClientScriptManager.GetPostBackEventReference](http://msdn.microsoft.com/en-us/library/system.web.ui.clientscriptmanager.getpostbackeventreference.aspx)方法。*这将使用 ClientScriptManager（未经测试的示例*）为控件/操作创建正确的 javascript 调用（“__doPostBack” ）：

```
<script type="text/javascript">
    function callPostBack() {
        <%= Page.ClientScript.GetPostBackEventReference(RadTreeView1, String.Empty) %>;
    }
</script> 
```

# macos - Applescript 使用 if/else if 和一个列表

> ID：10483274
> 
> 赞同：2
> 
> 时间：2012-05-07T13:48:45.703
> 
> 标签：macos, applescript, itunes

我正在编写一个脚本来控制学校戏剧的 iTunes。问题是我无法让它通过 if 语句。它确实设置了变量`selectedOption`，但是一旦它使 ifs 和 else ifs 变热，它似乎只是跳过了它们。

```
--repeat
activate
set myOption to {"Start Play", "Scene 1", "Between Scenes", "Scene 2", "Next Song", "End Play"}
set selectedOption to {choose from list myOption}
---------End Play---------
if selectedOption is "End Play" then
    tell application "iTunes"
        set currentvolume to the sound volume
        if (player state is playing) then
            -- if so, fade out the current track
            repeat with i from currentvolume to 0 by -2
                set the sound volume to i
                delay 0.1
            end repeat
            stop
        end if
    end tell
    display dialog "Volume Back Up?" buttons {"Full", "80", "End"} default button "Full"
    if the selectedOption is "Full" then
        tell application "iTunes"
            set sound volume to 100
        end tell
    else if the selectedOption is "80" then
        tell application "iTunes"
            set sound volume to 80
        end tell
    end if
    exit repeat
    ---------Scene 1---------
else if the selectedOption is "Scene 1" then
    tell application "iTunes"
        -- get the initial volume
        set currentvolume to the 60
        -- are we playing?
        if (player state is playing) then
            -- if so, fade out the current track
            repeat with i from currentvolume to 0 by -2
                set the sound volume to i
                delay 0.02
            end repeat
            next track
        end if
        -- now, regardless of whether we were playing or not, fade in the next track
        set the sound volume to 0
        play playlist "2012 Play Christmas"
        repeat with j from 0 to currentvolume by 2
            set the sound volume to j
            delay 0.02
        end repeat
        --do shell script "open ~/Desktop/2.app"
        exit repeat
    end tell
    ---------Between Scenes---------
else if the selectedOption is "Between Scenes" then
    tell application "iTunes"
        -- get the initial volume
        set currentvolume to the 60
        -- are we playing?
        if (player state is playing) then
            -- if so, fade out the current track
            repeat with i from currentvolume to 0 by -2
                set the sound volume to i
                delay 0.02
            end repeat
            next track
        end if
        -- now, regardless of whether we were playing or not, fade in the next track
        set the sound volume to 0
        play playlist "2012 Play Intermission"
        repeat with j from 0 to currentvolume by 2
            set the sound volume to j
            delay 0.02
        end repeat
    end tell
    ---------Scene 2---------
else if the selectedOption is "Scene 2" then
    tell application "iTunes"
        -- get the initial volume
        set currentvolume to the 60
        -- are we playing?
        if (player state is playing) then
            -- if so, fade out the current track
            repeat with i from currentvolume to 0 by -2
                set the sound volume to i
                delay 0.02
            end repeat
            next track
        end if
        -- now, regardless of whether we were playing or not, fade in the next track
        set the sound volume to 0
        play playlist "2012 Play Christmas2"
        repeat with j from 0 to currentvolume by 2
            set the sound volume to j
            delay 0.02
        end repeat
    end tell
    ---------Next Song---------
else if the selectedOption is "Next Song" then
    tell application "iTunes"
        -- get the initial volume
        set currentvolume to the 60
        -- are we playing?
        if (player state is playing) then
            -- if so, fade out the current track
            repeat with i from currentvolume to 0 by -2
                set the sound volume to i
                delay 0.02
            end repeat
            next track
        end if
        -- now, regardless of whether we were playing or not, fade in the next track
        set the sound volume to 0
        play
        repeat with j from 0 to currentvolume by 2
            set the sound volume to j
            delay 0.02
        end repeat
    end tell
    ---------Begin Play---------
else if the selectedOption is "Begin Play" then
    tell application "iTunes"
        set sound volume to 100
        play playlist "2012 Play Intro"
    end tell
end if
--end repeat 
```

我注释掉了重复，直到我可以让它选择正确的语句。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T13:52:19.587

尝试：

```
set selectedOption to {choose from list myOption} as text 
```

自从

```
set selectedOption to {choose from list myOption}
return class of selectedOption 
```

是一个列表。

# jquery - 如何加载尽可能流畅的网页

> ID：10483277
> 
> 赞同：1
> 
> 时间：2012-05-07T13:48:53.097
> 
> 标签：jquery, ajax, html, css

我想在我的项目中模仿[苹果的一种页面](http://www.apple.com/mac/)行为（最好在 FF、Chrome、Safari 上查看）：

1.  在第一时刻页面是空的，除了标题 -**但是页面的高度已经设置为最终高度，所有内容都将被加载**，因此浏览器滚动条不会改变。
2.  页面元素（主横幅、中级横幅、最后横幅、页脚等）以平滑淡入的方式从上到下一一出现。

这两件事使页面加载看起来非常流畅和令人惊叹。

一般来说，这就是我的页面的样子：

```
<header></header>
<div id="content>
     <div id="mainImage"></div>
     <div id="gallery"></div>
     <div id="info"></div> 
</div>
<footer></footer> 
```

**我有一些猜测苹果是如何做到的，但我不确定：**

1.  尽管所有内容都在其中，但所有页面都已完全加载，`opacity:0`并且只有在那之后，才有一个脚本可以为每个元素的外观一一设置动画。我认为这不是有效的。
2.  所有页面都建立在每个部分的 ajax 调用上：当它完成加载时，它就会出现。这也不合适，因为它们总是从上到下出现，而不是先出现。以及他们如何在开始时计算页面的高度。

我很高兴有想法，也很高兴有一种方法可以使它尽可能高效和通用，以使代码易于使用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T14:15:26.667

苹果网站使用[scriptaculous](http://script.aculo.us/)。他们的网页可以免费下载该库以及文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T14:08:26.370

您可以使用 jquery 并按照您想要的顺序淡入每个元素，并在其回调中淡入下一个元素。

[http://jsfiddle.net/lucuma/Pd7We/](http://jsfiddle.net/lucuma/Pd7We/)

```
$('#nav').fadeIn(500,function() {
    $('#main').fadeIn(1000,function() {
       $('#footer').fadeIn(1000);     
    });
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T17:57:06.847

像这样的东西怎么样：

```
jQuery(function ($) {
    $('.loading').show();
    $('.main').hide();
});
$(document).on('load', function () {
    $('.main').fadeIn(500);
    $('.loading').hide();
}); 
```

# sql - 如何在 sql 的 NOT EXISTS 中使用 where 子句？

> ID：10483280
> 
> 赞同：0
> 
> 时间：2012-05-07T13:49:08.433
> 
> 标签：sql, sql-server

我需要将 where 条件放在`NOT EXISTS`sql 中的子句中。

在下面需要检查下面的 sql 查询中的重复记录，我需要输入 Date='2012-05-07' 和 SecurityId='52211' 但问题是使用了内部连接，我是新手，不知道如何把这些where子句请帮忙。

```
SELECT DISTINCT

    SecurityPriceId

FROM 
    dbo.Indicative Bond
    INNER JOIN 
    dbo.BondPrice BondPrice ON 
        Indicative.SecurityId = BondPrice.SecurityId AND
        BondPrice.SecurityPriceSourceId = @SecurityPriceSourceComposite
WHERE
    Date = @Date -- Date='2012-05-07' like this
    AND
    NOT EXISTS
    (
        SELECT
            'z'
        FROM
            dbo.Reporting_BondPrices
    WHERE
        Reporting_BondPrices.SecurityId = BondPrice.SecurityId AND
        Reporting_BondPrices.Date = BondPrice.Date 
        --how can i put Date='2012-05-07' and SecurityId='52211'                 
    ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T13:54:09.257

在您更新之后，我认为（？？）您想要这个？

```
SELECT DISTINCT

    BondPrice.SecurityPriceId

FROM 
    dbo.Reporting_BondIndicative Reporting_BondIndicative
    INNER JOIN 
    dbo.BondPrice BondPrice ON 
        Reporting_BondIndicative.SecurityId = BondPrice.SecurityId AND
        BondPrice.SecurityPriceSourceId = @SecurityPriceSourceComposite
WHERE
    BondPrice.Date = @Date -- BondPrice.Date='2012-05-07' like this
    AND
    NOT EXISTS
    (
        SELECT
            'z'
        FROM
            dbo.Reporting_BondPrices
    WHERE
        Reporting_BondPrices.SecurityId = BondPrice.SecurityId AND
        Reporting_BondPrices.Date = BondPrice.Date 
        --how can i put Date='2012-05-07' and SecurityId='52211'                 
        --simply put them in with and
        and Reporting_BondPrices.SecurityId='52211' and Reporting_BondPrices.Date='20120507'
    ) 
```

早期尝试解码您的问题：

~~您可以给表起别名，如下所示：~~

 ~~```
select ...
from table as t1  --t1 will be the outer table
where not exists(select ...
                 from table as t1  --t2 will be the inner table
                 where t1.column1=t2.column1 and t1.column2<>t2.column2) 
```~~

# jquery - 添加覆盖元素背景属性的类

> ID：10483287
> 
> 赞同：0
> 
> 时间：2012-05-07T13:49:27.457
> 
> 标签：jquery, css, background, overriding

我有一个灰色背景的按钮列表，当单击按钮时，我想将按钮的背景颜色更改为蓝色。我已经尝试过 jQuery 的“addClass”并添加了一个具有不同背景的类，但它不会覆盖元素背景（使用默认类设置）。我可以删除默认类，但我需要保留它，因为它用于触发其他事件。

我该怎么做（如果甚至可以这样）？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T13:53:25.077

您可以使用内联 css，它将覆盖默认值；或者在使用 jQuery.addClass() 添加的类中，使用 !important; 即.btnCool {背景：红色！重要；}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T13:53:59.003

我认为问题出在您的 .css 文件中。尝试设置一个包含这两个类的新 css 规则。

你会有这个：

```
.class1 { styles }
.class1 .class2 { styles } //more specific, higher priority 
```

希望能帮助到你！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T13:56:01.597

```
$('.btns').click(function(){
   this.css({backgroundColor:'blue'});
}); 
```

或者

```
.blue{background-color:blue!important}
$('.btns').click(function(){
   this.addClass('blue');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T13:57:32.057

您可能应该添加一些代码示例，因为这可能有许多不同的变化，但这里的答案是假设您的大部分代码都非常标准：

CSS 样式有一个层次结构，可以帮助他们决定使用哪个属性。

例子：

```
.button{
   background: blue;
}
.button.clicked{
   background: red;
} 
```

每当您有一个按钮也被单击时，第二条规则将赢得参数，因为它通过使用***2 个类***而不是一个类来引用元素。

非常相似，如果你为一个元素设置了两次颜色，一次使用它的类来引用它，一次使用它的id，id引用下的规则将获胜，因为它具有更高的优先级

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-07T14:54:03.487

试试这个[小提琴](http://jsfiddle.net/parush/vYUhn/)

# git - 从 svn 存储库克隆的 Git 无法识别远程

> ID：10483288
> 
> 赞同：1
> 
> 时间：2012-05-07T13:49:31.867
> 
> 标签：git, git-svn

今天我将我们的 svn 存储库克隆到 git 中。不过，我有一些未提交的工作，所以我`svn commit`把它们拉到了 git 存储库中。

问题是，git 似乎对 svn 存储库感到困惑。

首先，`git remote`什么都不显示！但是，如果我写`git pull <tab>`，它会自动完成`svn-remote.svn`。尝试导致

```
fatal: 'svn-remote.svn' does not appear to be a git repository
fatal: The remote end hung up unexpectedly 
```

我去查看了 git 自己的文件。这是配置文件：

```
[core]
        repositoryformatversion = 0
        filemode = true
        bare = false
        logallrefupdates = true
[svn-remote "svn"]
        url = svn+ssh://myname@repository_address
        fetch = libskin/dev:refs/remotes/trunk
        branches = libskin/branch/*:refs/remotes/* 
```

所以遥控器*实际上*是存在的（虽然奇怪的是分支不存在）。所以我开始尝试`git pull svn`和`git pull trunk`其他事情，但他们都以同样的信息失败了。

我什至尝试在配置文件中手动添加一个分支：

```
[branch "master"]
        remote = svn
        merge = refs/heads/master 
```

但问题仍然存在。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T13:53:42.093

要同时使用 Git 和 Subversion，您使用的命令是[git-svn](http://man.github.com/git/git-svn.html)

```
git svn fetch
git svn rebase 
```

您无法使用普通的 git 命令提交新的 svn。你可以在这里阅读更多[教程](http://andy.delcambre.com/2008/03/04/git-svn-workflow.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T13:02:13.017

要同时使用 Git 和 Subversion，只需将[SubGit](http://subgit.com)安装到您的存储库中。它使 SVN 和 Git 存储库在服务器上自动保持同步。因此，您可以使用任何 SVN 或 Git 客户端来处理存储库。与 git-svn 相比，它更好地保留了 SVN 概念，如忽略、EOL、标签等（将它们翻译成 .gitignore、.gitattributes、Git 标签等）。

如果您需要仅限客户端的解决方案，我建议您使用[SmartGit](http://www.syntevo.com/smartgit/index.html)。它也比 git-svn 更好地保留了这些 SVN 概念。.

# reporting-services - 如何在 Microsoft Server Reporting Services (Visual Basic) 中的字符串中列出组的值？

> ID：10483290
> 
> 赞同：1
> 
> 时间：2012-05-07T13:49:37.193
> 
> 标签：reporting-services

## 视觉基础

![在此处输入图像描述](../Images/d3f0884d3dc431fed530c6772f21101c.png)

### SQL 结果和报告

每个组的 PI 值（红色）应以逗号分隔。我不知道。请问，有人能帮帮我吗？

![在此处输入图像描述](../Images/8b9f598611abc5cd258872a90fdbf641.png)

# mysql - MYSQL：过去一周的日期指示器

> ID：10483295
> 
> 赞同：0
> 
> 时间：2012-05-07T13:49:52.560
> 
> 标签：mysql, date

下面是一个MYSQL脚本：

如果 tstamp 日期在本周的星期日到星期六之间，我有以下脚本在字段中输入“1”，但它可以追溯到所有年份，并插入 1，而不仅仅是当前年份。

有任何想法吗？

```
IF(FROM_UNIXTIME(renprop_commercial_new.tstamp, "%U") = FROM_UNIXTIME(UNIX_TIMESTAMP(NOW()),"%U"),1,0) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T13:53:39.987

由于 %U 仅返回一年中的第几周，因此无论时间戳实际在哪一年，您还需要比较年份。最简单的方法是使用`%Y-%U`格式字符串。那会给你（比如说）`2012-23`而不是只是`23`.

但是，请注意，只有在进行相等比较时，这才是可靠的。如果您开始进行大于/小于比较，例如`2012-2`while evaluate as "greater than" 之类的`2012-13`，因为比较将作为字符串进行，而不是以数字形式进行。

# static - 关于 gfortran 静态链接和未定义的引用

> ID：10483296
> 
> 赞同：1
> 
> 时间：2012-05-07T13:50:02.090
> 
> 标签：static, hyperlink, gfortran

我需要静态链接我的应用程序，它使用 csparse、gsl、pthread、lapack 和 blas 等库。最后两个还需要 libgfortran。所以我的命令是

```
gcc -o main bunch_of_object_files.o -fopenmp -static -lcsparse -lgsl -lgslcblas -lpthread -llapack -lblas -lm -lgfortran 
```

输出是

```
/usr/lib/gcc/x86_64-linux-gnu/4.4.3/libgfortran.a(fpu.o): In function `_gfortrani_set_fpu':
(.text+0xa): undefined reference to `fedisableexcept'
/usr/lib/gcc/x86_64-linux-gnu/4.4.3/libgfortran.a(fpu.o): In function `_gfortrani_set_fpu':
(.text+0x56): undefined reference to `feenableexcept'
/usr/lib/gcc/x86_64-linux-gnu/4.4.3/libgfortran.a(fpu.o): In function `_gfortrani_set_fpu':
(.text+0x6e): undefined reference to `feenableexcept'
/usr/lib/gcc/x86_64-linux-gnu/4.4.3/libgfortran.a(fpu.o): In function `_gfortrani_set_fpu':
(.text+0x86): undefined reference to `feenableexcept'
/usr/lib/gcc/x86_64-linux-gnu/4.4.3/libgfortran.a(fpu.o): In function `_gfortrani_set_fpu':
(.text+0xb6): undefined reference to `feenableexcept'
/usr/lib/gcc/x86_64-linux-gnu/4.4.3/libgfortran.a(fpu.o): In function `_gfortrani_set_fpu':
(.text+0x4a): undefined reference to `feenableexcept'
collect2: ld returned 1 exit status 
```

但如果我使用 gfortran 而不是 gcc 链接，它会起作用。为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T14:41:34.097

放在`-lm`后面`-lgfortran`。当静态链接时，排序很重要。

# php - Zend - 不存在名称为 '' 的属性

> ID：10483302
> 
> 赞同：0
> 
> 时间：2012-05-07T13:50:33.307
> 
> 标签：php, zend-framework, zend-form, aptana, validation

我要做的是检查从表格发送的日期的年份是否具有正确的值。正确的值是在验证器的构造函数中作为参数给出的计划年份。

我使用下一个自定义验证器从标题中收到消息。这是因为变量 $this->$plan_year，但我不明白为什么。这是验证器：

```
class MyValidate_YearValidator extends Zend_Validate_Abstract
{
    const MSG_YEAR = '';

    private $plan_year = 0;

    public $minimum = 0;
    public $maximum = 0;

    protected $_messageVariables = array(
        'min' => 'minimum',
        'max' => 'maximum'
    );

    protected $_messageTemplates = array(
        self::MSG_YEAR => "Valoarea '%value%' nu este corecta! Anul trebuie sa aibe una din urmatoarele doua valori: '%min%' sau '%max%'."
    );

    public function __construct( $plan_year )
    {
        $this->$plan_year = $plan_year;

    }

    public function isValid($value)
    {

        $this->_setValue($value);

        $anul = substr($value, 0, 4);

        //here is the problem
        $this->minimum = $this->$plan_year;
        $this->maximum = $this->$plan_year + 1;

        if ($anul <> $this->minimum && $anul <> $this->maximum && $value != '') {
            $this->_error(self::MSG_YEAR);
            return false;
        }

        return true;
    }
} 
```

谢谢！索林

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T14:06:30.553

引用类成员时没有美元符号（仅当它们是静态的时）！否则，该名称将被视为另一个变量。

```
$this->$plan_year // wrong
$this->plan_year  // correct 
```

# objective-c++ - Algorithm.h 和 Objective-C++

> ID：10483304
> 
> 赞同：1
> 
> 时间：2012-05-07T13:50:35.607
> 
> 标签：objective-c++

因为我想在我的 Objective-C 文件中使用 algorithm.h 中的一些函数，所以我将此类文件的扩展名更改为 .mm 以使用 Objective-C++。

无论如何，当我包含 algorithm.h 文件时，编译器告诉我找不到该文件：

我试过：

```
#include <algorithm.h>
#include <algorithm>
#import <algorithm.h>
#import <algorithm> 
```

但我总是遇到同样的错误。我正在使用 Xcode 4.3 和 Lion。有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T16:40:38.990

我们在评论中制定了解决方案：

似乎默认的 XCode 安装不包括 C++ 标准库头文件 - 您必须通过**Preferences** -> **Downloads**对话框安装*命令行工具*包。

 ****符合标准的标头`<algorithm>`没有 .h。`#import`我看不出有任何不应该工作的理由（相对于`#include`）。****

# macos - 在 AppleScript 中从 PDF 文档到 JPEG 图像

> ID：10483307
> 
> 赞同：2
> 
> 时间：2012-05-07T13:50:58.173
> 
> 标签：macos, pdf, applescript

如何使用 AppleScript 从 PDF 文件中提取 JPEG 图像？有没有这样的命令`saveJpegFromPage(PDFstream, numberOfPage)`？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-07T15:28:08.837

**简短**的回答：你没有直接使用 AppleScript（因为没有这样的命令）——但你可以通过使用 AppleScript 中的*poppler* shell 实用程序包来回避这个问题。

**长答案：** AppleScript 的默认功能（由*Standard Additions*定义）和操作系统提供的字典及其包含的应用程序不包括 PDF 处理。很明显，OS X 自己的 PDF 应用程序*Preview.app*在其存在的大部分时间里甚至都无法编写脚本。

至于第三方应用程序，[Adobe 的*Acrobat X Pro*](https://www.adobe.com/acrobat/acrobat-pro.html)可能可以做到这一点（我无法检查，因为价格标签对我来说太高了，而且[没有 OS X 的试用版](https://www.adobe.com/acrobat/free-trial-download.html)），但最好的两个已知负担得起的可编写脚本的第三方 PDF 应用程序，[*Skim*](https://skim-app.sourceforge.io/)和[*PDFPen*](https://pdfpen.com/pdfpen/)，AS 字典都不包含用于处理 PDF 文件中的图像的命令。

但是，通常情况下，shell 提供了一种替代方法。*xpdf*包包含一个名为的实用程序，`pdfimages`它将完成您的工作。命令

```
pdfimages -j -f 1 -l 1 "/path/to/my file.pdf" "/path/to/folder for images" 
```

会将第 1 页上的所有图像以 JPEG 格式保存`/path/to/my file.pdf`到文件夹中（请参阅所有选项的说明）。请注意，这取自[*poppler*](https://poppler.freedesktop.org/)的手册页，它是[原始](https://web.archive.org/web/20170810060643/http://www.foolabs.com:80/xpdf/)[*xpdf*](https://web.archive.org/web/20170810060643/http://www.foolabs.com:80/xpdf/)[包](https://web.archive.org/web/20170810060643/http://www.foolabs.com:80/xpdf/)的演变。*安装poppler*的最佳选择可能是[*自制*](https://brew.sh/)[软件包管理器](https://brew.sh/)( )。`/path/to/folder for images``man pdfimages`[](https://poppler.freedesktop.org/)*`pdfimages`[](https://web.archive.org/web/20170810060643/http://www.foolabs.com:80/xpdf/)**[](https://brew.sh/)*`brew install poppler`****

 ***一旦你在系统上安装了这个包，你所要做的就是在 AppleScript 中使用它的能力，将它包装在一个`do shell script`命令中，沿着

```
do shell script "'path/to/pdfimages' -j -f " & pageNum & " -l " & pageNum & " '" & (POSIX path of myPDF) & "' '" & (POSIX path of targetFolder) & "'" 
```

你应该被设置。***

# jquery - JQuery 动画在第一个周期后在 ie 中运行得更快？

> ID：10483310
> 
> 赞同：1
> 
> 时间：2012-05-07T13:51:04.727
> 
> 标签：jquery, performance, internet-explorer, animation, jquery-animate

好的，所以我有一个表格行，其中有一个带有 id 的图像，让我们说“家”。然后在这下面我有一个 id 为“homeExpand”的 div，所以当我点击图片主页时，它会调整 homeExpand div 的大小，显示我在那里得到的链接。这在 chrome 和 firefox 中运行良好。它也可以在我第一次在 IE 资源管理器中单击它时工作，然后在此之后它似乎将动画速度提高了大约一倍。我可以通过增加持续时间在 Internet Explorer 中修复它，但这会减慢它在 chrome 和 firefox 中的速度......

```
 $(function() 
{
        $('.rollover').click( function() {

        var selector = '#' + $(this).attr("id") + 'Expand';

        var size = (($( selector + ' > a' ).size())*25);

        if ( $(selector).height() > 0 )
        {
            //$(selector).css( 'height' , size );
             $(selector).animate( {height:0} , 400 , function() {$(this).css( 'visibility' , 'hidden' );} );
        }
        else
        {
                $(selector).css( 'visibility' , 'visible' );
            //$(selector).css( 'height' , '0px' );
            $(selector).animate( {height:size} , {duration: 400 ,easing: 'linear'} );
        }
    });
}); 
```

# c++ - 检查派生类的类型

> ID：10483311
> 
> 赞同：4
> 
> 时间：2012-05-07T13:51:10.657
> 
> 标签：c++

在我的程序中，我有一个名为 Entity 的类。另一个类 Invader 继承了 Entity。由于我想拥有 4 种不同类型的入侵者，我声明了继承自 Invader 的类 Invader1、Invader2、Invader3 和 Invader4。现在我声明一个实体指针类型向量来存储所有入侵者，例如：

```
entities.push_back(new Invader4());
entities.push_back(new Invader3());
entities.push_back(new Invader2());
entities.push_back(new Invader1());
entities.push_back(new Invader0()); 
```

当我在运行时检查实体中元素的类型时，说

```
typeid(*entities->at(index)) 
```

它可能会返回四种入侵者中的一种。在实体中还有其他继承实体的对象。所以我只想检查对象的类型是否是Invader，我不想知道它是Invader1，Invader2等。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T14:13:34.597

在 C++ 中有很多方法可以做到这一点，但基本问题是，一旦您必须开始查询应该是多态的容器中的元素，您可能会放弃使用多态的想法。拥有多态元素集合的全部意义在于您可以对它们一视同仁。所以如果你有 a`vector<Entity*>`你应该只把它的元素当作`Entity*`s。如果你发现你需要`Invader`在 an 上调用一些类似的函数`Entity`，那么你最好也持有一个容器`Invader*`（使用与原始容器相同的指针）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T13:55:01.167

您可以检查是否`dynamic_cast<Invader*>(entities->at(index))`不返回（因为当指针未指向其类派生自的对象时`NULL`，它会产生一个指针）。`NULL``Invader`

有关一些文档，请参阅[此链接](http://www.cplusplus.com/doc/tutorial/typecasting/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-07T13:57:56.977

创建一个`Invader`继承自`Entity`. 让您的`Invader1`,`Invader2`等类继承自`Invader`.

然后，您可以添加 a `virtual bool IsInvader() const;`which return `false`in`Entity`和`true`in `Invader`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-07T14:12:54.497

仅仅问这个问题通常意味着您实际上在界面中缺少一个虚拟功能。

如果你有类似的东西：

```
if (myEntity->Type() == TypeInvader)
{
  static_cast<Invader*>(myEntity)->invade();
} 
```

您几乎可以肯定地通过添加来重构它

```
virtual void tryInvade() {/* normally, entities don't invade*/} 
```

在您的实体中和

```
virtual void tryInvade() {invade(); /*but invaders do!*/} 
```

在你的入侵者课程中。

另一种选择是永远不要“丢失”实体的类型。如果您不想在这种情况下使用虚函数，很可能您不应该通过引用它们的基类指针来存储这些实体，而是作为指向您实际想要使用的类的指针。也就是说，您只需保留实体的类型，而不是稍后再请求它。这可能表明您不应该使用继承，因为您将违反[liskov 替换原则](http://en.wikipedia.org/wiki/Liskov_substitution_principle)各自的存储。

# android - 将 pdf 从资产传递到 sdcard

> ID：10483313
> 
> 赞同：0
> 
> 时间：2012-05-07T13:51:12.487
> 
> 标签：android

我正在尝试从我的原始文件夹中传递 sdcard 一个 pdf 以默认意图打开它。

当我打开它时，它对我说 pdf 已损坏。因为我不太了解流的工作原理，所以我认为问题来自那里。

```
final String extStorageDirectory = Environment
                        .getExternalStorageDirectory().toString();
                final String festivalDirectory_path = extStorageDirectory
                        + Constants.PDF_STORAGE_PATH;
                File pdfOutputFile = new File(festivalDirectory_path, "/");
                if (pdfOutputFile.exists() == false) {
                    pdfOutputFile.mkdirs();
                }
                File pdfFile = new File(pdfOutputFile, nameOfThePdf);

                try {
                    InputStream in = getResources().openRawResource(R.raw.blablublo);

                    FileOutputStream out = new FileOutputStream(pdfFile);
                    byte[] buffer = new byte[1024];
                    int bufferLength = 0;
                    while ((bufferLength = in.read(buffer)) > 0) {
                        out.write(buffer, 0, bufferLength);
                    }
                    out.close();
                } catch (Exception e) {
                    Log.e("tag", e.getMessage());
                }
                Uri path = Uri.fromFile(pdfFile);
//              Uri path = Uri.parse(Constants.SPLASH_URI + R.raw.cartecannotpdf);
                Intent intent = new Intent(Intent.ACTION_VIEW);
                intent.setDataAndType(path, "application/pdf");
                intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                startActivity(intent); 
```

希望有人能帮助我！

谢谢

雷诺

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T14:03:06.633

好吧，看起来你的解决方案已经完成了一半。

`InputStream inputStream = assetManager.open("cartecanotpdf.pdf");`- 创建一个流，您可以使用该流从资产文件夹中的 PDF 文件中读取所有数据。

`File file = new File(dir, "cartecannotpdf.pdf");`- 这只是创建一个指向 SDCARD 上文件所在位置的链接。

您缺少的部分实际上是将字节从输入流复制到输出流。目前，SDCARD 上的文件要么不存在，要么只是一个空壳（没有任何数据），因此您的意图会抱怨它已损坏。

这是一个为您提供完整解决方案的 QA。 [如何将文件从“资产”文件夹复制到 SD 卡？](https://stackoverflow.com/questions/4447477/android-how-to-copy-files-in-assets-to-sdcard)

编辑：此外，我不确定您是否需要将文件放在资产文件夹中，或者是否可以将其保留在 RAW 文件夹中。我一直使用资产文件夹中的文件。确保您在调用assetManager.open(...) 时实际上得到了一个文件

# c# - 如何获取 StreamWriter 的完整路径

> ID：10483314
> 
> 赞同：18
> 
> 时间：2012-05-07T13:51:14.390
> 
> 标签：c#, streamwriter

我正在`StreamWriter`使用相对路径创建一个。但是文件没有出现。要进行故障排除，我想检查完整路径是否符合我的预期。所以有一个`StreamWriter`实例，我怎样才能得到它要写入的文件的完整路径？

```
string fileName = "relative/path.txt"
StreamWriter sw= new StreamWriter(fileName);
// What is the full path of 'sw'? 
```

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-05-07T14:03:14.850

在我的框架版本中，这似乎有效：

```
string fullPath = ((FileStream)(streamWriter.BaseStream)).Name; 
```

（通过调试发现。）

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-07T13:57:04.920

要从相对路径获取完整路径，请使用[Path.GetFullPath](http://msdn.microsoft.com/en-us/library/system.io.path.getfullpath.aspx)方法。

例如：

```
string fileName = "relative/path.txt";
string fullPath = Path.GetFullPath(fileName); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T13:59:59.267

可能是“相对”目录不存在。要么手动创建它。或以编程方式创建它，如下所示

```
string fileName = @"relative\path.txt";
fileName = Path.GetFullPath(fileName);
Directory.CreateDirectory(Path.GetDirectoryName(fileName));

StreamWriter sw= new StreamWriter(fileName, true); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-10T23:15:39.090

使用可空类型和安全转换（`as`不抛出异常）：

```
_logger.LogInformation("Wrote file at {0}", (streamWriter.BaseStream as FileStream)?.Name); 
```

`?`仅当左侧表达式的结果不是时才访问该属性`null`，否则返回（计算为）`null`（就像它等价于`E is T ? (T)(E) : (T)null`）。

如果你愿意，你可以像这样检查演员阵容`null`：

```
var fs = streamWriter.BaseStream as FileStream;

if (fs != null)
{
    _logger.LogInformation("Wrote file at {0}", fs.Name);
} 
```

但这比您需要的代码更多。用 C# 7+ 编写上述示例的更现代的方法是使用`is`运算符：

```
if (streamWriter.BaseStream is FileStream fs)
{
    _logger.LogInformation("Wrote report file at {0}", fs.Name);
} 
```

这具有额外的好处，即如果无法执行强制转换，则根本不会发生日志调用，因为实际上`fs`在`null`使用`is`. 整个`is`表达式的计算结果为真或假，但从不`null`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-16T21:59:34.933

作为对@Jeppe Stiehl Nielsen 回复的评论，这会更好，但我不能添加评论：在 VB.Net 中，这变成：

`Dim fullPath As String = CType(streamWriter.BaseStream, FileStream).Name`

我不确定为什么`CType`需要它，并且仅用于此属性，而所有其他属性都不需要，但它是必需的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-29T13:17:23.017

```
Dim fs As FileStream = CType(sw.BaseStream, FileStream)
Dim fi As New FileInfo(fs.Name)
Console.WriteLine(fi.FullName) 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-05-07T14:44:51.187

```
 var fstream = sw.BaseStream as System.IO.FileStream;
  if (fstream != null)
    Console.WriteLine(GetAbsolutePathByHandle(fstream.SafeFileHandle));

[DllImport("ntdll.dll", CharSet = CharSet.Auto)]
private static extern int NtQueryObject(SafeFileHandle handle, int objectInformationClass, IntPtr buffer,  int StructSize, out int returnLength);

static string GetAbsolutePathByHandle(SafeFileHandle handle)
{
  var size = 1024;
  var buffer = Marshal.AllocCoTaskMem(size);
  try
  {
    int retSize;
    var res = NtQueryObject(handle, 1, buffer, size, out retSize);
    if (res == -1073741820)
    {
      Marshal.FreeCoTaskMem(buffer);
      size = retSize;
      Marshal.AllocCoTaskMem(size);
      res = NtQueryObject(handle, 1, buffer, size, out retSize);
    }
    if (res != 0)
      throw new Exception(res.ToString());
    var builder = new StringBuilder();
    for (int i = 4 + (Environment.Is64BitProcess ? 12 : 4); i < retSize - 2; i += 2)
    {
      builder.Append((char)Marshal.ReadInt16(buffer, i));
    }
    return builder.ToString();
  }
  finally
  {
    Marshal.FreeCoTaskMem(buffer);
  }
} 
```

输出：

```
\Device\HarddiskVolume2\bla-bla\relative\path.txt 
```

# java - 在 wsdl 文件中描述字符串数组

> ID：10483318
> 
> 赞同：6
> 
> 时间：2012-05-07T13:51:47.743
> 
> 标签：java, wsdl, globus-toolkit

我正在为一个项目使用 globus 工具包。在我的服务中，我有一个资源：一个字符串数组。我想从 Android 客户端获取此资源。我怎样才能做到这一点？如何在 wsdl 文件中描述“字符串数组”类型？谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T13:54:20.610

我猜你正在寻找这个

```
<complexType name='ArrayOfString'>
    <sequence>
        <element name='item' type='xsd:string' maxOccurs='unbounded'/>
    </sequence>
</complexType> 
```

来源：[http ://www.activebpel.org/samples/samples-2/BPEL_Samples/Resources/Docs/arrays.html](http://www.activebpel.org/samples/samples-2/BPEL_Samples/Resources/Docs/arrays.html)

更新：

我已经使用 NetBeans 7.0.1 进行了测试。结果是这样的：

声明一个接收 String[] 参数的方法：

```
@WebMethod(operationName = "helloArray")
public String helloArray(@WebParam(name = "name") String[] name) {
    StringBuilder sb = new StringBuilder("Hello ");
    if (name != null) {
        for(int i = 0; i < name.length; i++) {
            sb.append(name[i]);
            if (i < (name.length - 1)) {
                sb.append(" and ");
            }
        }
    }
    sb.append('!');
    return sb.toString();
} 
```

WSDL 使用 String 数组元素为我的方法生成了一个复杂类型

```
<xs:complexType name="helloArray">
    <xs:sequence>
        <xs:element name="name" type="xs:string" nillable="true" minOccurs="0" 
            maxOccurs="unbounded"/>
    </xs:sequence>
</xs:complexType> 
```

在客户端，IDE 生成一个`List<String>`来使用它：

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "helloArray", propOrder = {"name"})
public class HelloArray {

    @XmlElement(nillable = true)
    protected List<String> name;

    public List<String> getName() {
        if (name == null) {
            name = new ArrayList<String>();
        }
        return this.name;
    }
} 
```

以及使用服务的方法

```
private String helloArray(java.util.List<java.lang.String> name) {
    edu.home.wsclient.HelloWorldWS port = service.getHelloWorldWSPort();
    return port.helloArray(name);
} 
```

我已经[在这个地址上传了两个项目](http://www.2shared.com/file/KB-HOU7P/WSExample.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T13:55:35.800

您可以使用具有多重性 > 1 的 String 元素（以及更多数据，如果您愿意）的自定义类型。

```
<xsd:sequence>
  <xsd:element name="YourClass" type="pre:YourClass" maxOccurs="unbounded" minOccurs="0">
  </xsd:element>
</xsd:sequence> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T13:54:34.897

让 XML 调用具有多个子级的父标记，每个子级都有一个来自数组的字符串值：

```
<parent>
    <child>String 1</child>
    <child>String 2</child>
</parent> 
```

适当地命名标签。

# mysql - Kohana 3.1.4：Database_Exception [ 2 ]：mysql_connect()：访问被拒绝

> ID：10483322
> 
> 赞同：1
> 
> 时间：2012-05-07T13:52:21.717
> 
> 标签：mysql, database, kohana-3

我正在尝试浏览[kohana 的教程](http://kowsercse.com/2011/09/04/kohana-tutorial-beginners/)

我已复制脚本，但收到以下错误消息：

> 错误：Database_Exception [ 2 ]：mysql_connect()：拒绝访问用户 'www-data'@'localhost'（使用密码：否）~ MODPATH/database/classes/kohana/database/mysql.php [67]

谁能给我一些提示问题可能出在哪里？我有其他使用 mysql 的项目，所以我知道密码和用户名是正确的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T18:16:55.020

如果您更改 config/database.php 中的用户名，错误消息会更改还是保持不变？

如果它发生变化，那么您可能在安装 mysql 时遇到用户权限问题。如果您有 PhpMyAdmin，则很容易修复。转到权限，单击用户并输入 % 以获取允许的主机（或者如果您偏执，只需键入 127.0.0.1 以便您只能在本地访问它）。

如果不是，那么您没有正确设置 database.php，我们需要查看它来纠正它。

# javascript - 使用 :hover 修改另一个类的css？

> ID：10483323
> 
> 赞同：55
> 
> 时间：2012-05-07T13:52:34.140
> 
> 标签：javascript, css, class, hover

当只使用 css 将鼠标悬停在另一个类的元素上时，有没有办法修改一个类的 css ？

就像是：

```
.item:hover .wrapper { /*some css*/ } 
```

只有“包装器”不在“项目”内，它在其他地方。

我真的不想将 javascript 用于这么简单的事情，但如果我必须这样做，我该怎么做？这是我失败的尝试：

```
document.getElementsByClassName('item')[0].onmouseover="document.getElementsByClassName('wrapper')[0].style.background="url('some url')";"; 
```

每个类只有一个元素。不知道为什么他们在制作模板时不使用 ID，但事实就是如此，我无法更改它。

[编辑]

这是一个菜单。每个菜单元素都有一个不同的类。当您将鼠标悬停在元素上时，右侧会弹出一个子菜单。这就像一个叠加层，当我使用“检查元素”工具时，我可以看到当子菜单处于活动状态时整个网站的 html 都发生了变化（这意味着除了子菜单什么都没有）。我称之为“包装器”的类具有控制子菜单背景的 css。我真的看不出这两个类之间有什么联系。

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2012-05-07T14:30:39.247

您可以采用两种方法，让悬停的元素影响 ( `E`) 另一个元素 ( `F`)：

1.  `F`是 的子元素`E`，或
2.  `F`是`E`（`E`出现在标记/DOM *before* `F`中）的后来兄弟（或兄弟的后代）元素：

为了说明这些选项中的第一个（`F`作为 的后代/孩子`E`）：

```
.item:hover .wrapper {
    color: #fff;
    background-color: #000;
}​ 
```

为了演示第二个选项，`F`作为 的兄弟元素`E`：

```
.item:hover ~ .wrapper {
    color: #fff;
    background-color: #000;
}​ 
```

在此示例中，如果`.wrapper`是`.item`（两者之间没有其他元素）的直接兄弟，您也可以使用`.item:hover + .wrapper`.

[JS 小提琴演示](http://jsfiddle.net/davidThomas/4vaY6/1/)。

参考：

*   [CSS 2.1 选择器，位于 W3.org](http://www.w3.org/TR/2001/CR-css3-selectors-20011113/#selectors)。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-12T12:40:34.497

目前在 CSS 中是不可能的，除非你想选择一个子元素或兄弟元素（微不足道，并在此处的其他答案中描述）。

对于所有其他情况，您将需要 JavaScript。jQuery 和 Angular 等框架可以相对轻松地解决这个问题。

[编辑]

使用新的 CSS (4) 选择器[:has()](http://css4.rocks/relational-pseudo-class.php)，您将能够定位父元素/类，从而在不久的将来使纯 CSS 解决方案可行！

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-03-12T10:22:18.007

您可以通过制作以下 CSS 来做到这一点。你可以把你需要影响子类的css放在这里，以防悬停在根目录上

```
.root:hover    .child {

}
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-05-07T14:17:06.557

如果 .wrapper 在 .item 中，并且如果您不在 IE 6 中或 .item 是 a 标签，那么您拥有的 CSS 应该可以正常工作。你有证据表明不是吗？

编辑：

单独的 CSS 不能影响其中不包含的内容。要做到这一点，请像这样格式化您的菜单：

```
<ul class="menu">
    <li class="menuitem">
        <a href="destination">menu text</a>
        <ul class="menu">
            <li class="menuitem">
                <a href="destination">part of pull-out menu</a>
... etc ... 
```

你的CSS是这样的：

```
.menu .menu {
    display: none;
}

.menu .menuitem:hover .menu {
    display: block;
    float: left;
    // likely need to set top & left
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-06T13:10:25.157

你可以这样做。
当悬停到 时`.item1`，它将改变`.item2`元素。

```
.item1 {
  size:100%;
}

.item1:hover
{
   .item2 {
     border:none;
   }
}

.item2{
  border: solid 1px blue;
} 
```

# ios5 - iOS5：如何知道 iPhone 用户当前是否设置了密码并启用了加密？

> ID：10483327
> 
> 赞同：3
> 
> 时间：2012-05-07T13:52:56.753
> 
> 标签：ios5

在我看来，iOS 4 提示（[如何确定 iPhone 用户当前是否设置了密码并启用了加密？](https://stackoverflow.com/questions/3806455/how-can-i-find-out-if-the-iphone-user-currently-has-a-passcode-set-and-encryptio)）不再起作用。我想确保用户在使用我的应用程序之前选择了密码，但我在 iOS5 中没有找到任何方法来找到它。创建一个文件并像这样比较

```
 BOOL fileProtectionEnabled = [NSFileProtectionNone isEqualToString:[testFileAttributes objectForKey:NSFileProtectionKey]]; 
```

在锁定和解锁设备中没有区别。

我也尝试创建这样的文件

```
[[NSFileManager defaultManager] createFileAtPath:documentFile contents:[@"super secret file contents" dataUsingEncoding:NSUTF8StringEncoding] attributes:[NSDictionary dictionaryWithObject:NSFileProtectionCompleteUntilFirstUserAuthentication forKey:NSFileProtectionKey]]; 
```

期望仅在有密码时才会创建 documentFile，但它也是在没有密码的情况下创建的。

# objective-c - 检查是否已将 CALayer 添加为子层

> ID：10483333
> 
> 赞同：14
> 
> 时间：2012-05-07T13:53:16.557
> 
> 标签：objective-c, ios, calayer

我有 5 个 CALayers，每个都是一个属性。假设我添加了 3 个作为子视图。如果其中一个图层已经添加到图层中，我需要能够检查。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-07T13:55:40.847

你试过`superlayer`房产吗？如果您的图层未添加到任何地方，则它应该为零。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-07T13:55:42.523

```
if (layer.superlayer == parentLayer) {
    ...
} else {
    ...
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-09-03T14:08:03.580

view.layer.sublayers 为您提供了一个子图层数组，以查看您的图层是否已添加，您可以执行类似 view.layer.sublayers.count 的操作，一旦图层数达到您的预期，就不要为 ex 添加更多。

```
if (view.layer.sublayers.count  < 3) {
//add layer
}else{
// do nothing because the layer has already been added.
} 
```

您还可以检查子图层数组中的每个图层，以更好地识别您要查找的图层。由于它们是属性，因此您应该能够对数组中的每个图层进行比较，以查看您要查找的图层是否已添加。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-04-27T18:58:54.553

我需要检查一个 gradientLayer 是否是另一个视图的 subLayer。这是那里唯一的一层，所以我不必检查其他任何东西。上面的答案对我不起作用。

我遇到了[这个答案](https://stackoverflow.com/a/53597262/4833705)，即使出于不同的原因使用它也是一种简单的方法来检查 gradientLayer 是否是另一个视图的 layer 属性（parentLayer）的子级，并且对我来说效果很好：

```
if let _ = (yourParentView.layer.sublayers?.compactMap { $0 as? CAGradientLayer })?.first {

    print("the gradientLayer IS already a subLayer of this parentView's layer property")
} else {

    print("the gradientLayer IS NOT a subLayer of this parentView's layer property")
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-11-24T13:07:29.380

XCode 11 - 斯威夫特 5

```
if view.layer.sublayers == nil {

    // add Sublayer

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-15T06:14:02.877

*   //检查CALayer包含子层（shpapelayer/textlayer）

    ```
     if myShapeLayer.sublayers?.count>0
                               {
                                   var arr:NSArray? = myShapeLayer.sublayers as NSArray
                                   var i:Int=0
                                   for i in 0..<arr!.count
                                   {
                                       var a: AnyObject = arr!.objectAtIndex(i)
                                       if a.isKindOfClass(CAShapeLayer) || a.isKindOfClass(CATextLayer)
                                       {
                                           if a.isKindOfClass(CAShapeLayer)
                                           {
                                               a = a as! CAShapeLayer

                                               if CGPathContainsPoint(a.path, nil, pointOfCircle, true)
                                               {
                                                   NSLog("contains shape layer")

                                               }
                                               else
                                               {
                                                   NSLog("not  contains shape layer")

                                               }
                                           }
                                           if a.isKindOfClass(CATextLayer)
                                           {
                                               a = a as! CATextLayer
                                               var fr:CGRect = a.frame as CGRect
                                               if CGRectContainsPoint(fr, pointOfCircle)
                                               {
                                                   NSLog("contains textlayer")

                                               }
                                               else
                                               {
                                                   NSLog("not contains textlayer")

                                               }
                                           }

                                       }
                                   }
                               } 
    ```

# android - Oauth 验证错误

> ID：10483334
> 
> 赞同：0
> 
> 时间：2012-05-07T13:53:18.553
> 
> 标签：android, oauth, verification

我正在尝试使用 Oauth 进行验证。我的示例代码是：

```
ArrayList <NameValuePair> params = new ArrayList<NameValuePair>();
  boolean flag=false;
  URL url;

  String oauth_nonce="q14F5ApN4Ka5RJGbYgabXwMSZ4BxVrlNGedN9zoFAoi3rc7dpLjIgri1erAAriPu";
  String oauth_timestamp="1336069726";
  String signatureString =
    URLEncoder.encode("device_id=id_here")
    +URLEncoder.encode("&device_type=psw_here")
    +URLEncoder.encode("&oauth_consumer_key=consumer_key_here...&oauth_nonce=" +
      oauth_nonce+
      "&oauth_signature_method=HMAC-SHA1&oauth_timestamp=1336069726&oauth_version=1.0");

  String percent_encoded_url = URLEncoder.encode("http://www.example.com");
  String signatureBaseString = "POST"+
    "&"+percent_encoded_url+
    "&"+signatureString;

  String oauth_signature=URLEncoder.encode(computeHmac(signatureBaseString, "aWAQTWR7VvHapaNhWBCL0VaUdGN2xzN4&"));

  String headerValue ="OAuth "+
    "oauth_consumer_key=\""+"consumer_key_here..."+"\","+
    "oauth_signature_method=\"HMAC-SHA1"+"\","+
    "oauth_signature=\""+oauth_signature+"\","+
    "oauth_timestamp=\"1336069726"+"\","+
    "oauth_nonce=\""+oauth_nonce+"\"," +        
    "oauth_version=\"1.0"+"\"";

  HttpPost httppost = new HttpPost("http://www.example.com/");

  httppost.setHeader("Content-Type","application/x-www-form-urlencoded");
  httppost.setHeader("Authorization",headerValue);
  HttpEntity httpentity = new UrlEncodedFormEntity(params);

  HttpClient httpclient = new DefaultHttpClient(clientConnectionManager, httpparams);

  StringBuilder sb = new StringBuilder();
  try {

   HttpResponse response = httpclient.execute(httppost); 
```

当我发送请求时，它总是说“签名匹配错误”。我对Oauth一无所知。我不知道我错在哪里。有人可以指导我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T09:25:05.747

在我看来，您正在以正确的方式生成签名，但服务器以通用`signature mismatch`消息响应，因为：

**首先**，您不能对每个请求都使用相同的随机数。您需要为每个请求随机生成一个新的 nonce。

**其次**，对于每个请求，时间戳都必须是 UTC 的当前时间。如果正确实施 OAuth 提供程序，它将允许在不久的将来或过去的时间戳。所以确保你的时钟是正确的。

据我所知，您的签名生成看起来不错，至少在您尝试获取请求令牌时。试试上面的两点，让我知道它是怎么回事:)

# node.js - 无法在同一页面中第二次执行 Socket.on('connect',function(){})

> ID：10483337
> 
> 赞同：0
> 
> 时间：2012-05-07T13:53:32.673
> 
> 标签：node.js, socket.io

我正在尝试使用简单的注销和登录创建一个简单的应用程序。登录时加入房间，注销时使用 socket.leave('room');

问题是，如果我在没有刷新的情况下再次登录同一页面，则 socket.on('connect',...) 中的代码不会执行。请帮我解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T18:41:02.460

就像 Jakub 说的，当客户端连接到服务器时触发 'connect' 事件，而不是加入房间。房间是连接之上的一个额外命名空间。如果您想在每次有人加入时执行代码，最简单的方法是在`socket.join('whatever')`调用后运行该代码。

有点棘手，尽管可能更全面的解决方案是附加某种处理程序以加入房间。我不确定你是否可以做`socket.on('join', fn)`，但试一试。如果它不起作用，您应该能够通过后端订阅，这样的事情可能会起作用：

```
socket.manager.store.subscribe('join', function (id, room) {
    //do whatever
}); 
```

# android - 拥有从 Android 到 BlackBerry 的 mp3 播放器

> ID：10483340
> 
> 赞同：0
> 
> 时间：2012-05-07T13:53:37.440
> 
> 标签：android, blackberry, blackberry-simulator

我正在尝试制作一个用 Java 编写的 Android 应用程序，也可以在 Playbook 上工作。应用程序基本上是一个 mp3 播放器，我正在使用 MediaPlayer 类。在模拟器中我听不到声音，我不知道为什么。

问题是我无法访问 PlayBook 设备。

你知道我在哪里/如何找到问题吗？即使在模拟器中我听不到声音，我的应用程序是否有可能在真实设备上运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T14:11:09.210

它现在可以工作了，我只需要修改 PlayBook 模拟器上的音量。以前是80%，现在是100%。我会调查看看这是否是唯一的原因。

无论如何，它现在有效。

# android - 为什么我收到的串行 BT 数据会被截断？

> ID：10483342
> 
> 赞同：0
> 
> 时间：2012-05-07T13:53:38.197
> 
> 标签：android, bluetooth, serial-port

我从 BT 串行连接接收到的数据应该是：

```
0
1
2
3
.
.
.
27
28
29
0
1
2
3
.
.
.
etc 
```

但我实际上得到的是一些数据被切掉了。像这样：

```
11
12
1
3
14
15
1
6
1
7
18
19
2
0 
```

**在 BTSerialService.java**

/** * 此线程在与远程设备连接期间运行。*它处理所有传入和传出的传输。*/

```
private class ConnectedThread extends Thread {
    private final BluetoothSocket mmSocket;
    private final InputStream mmInStream;
    private final OutputStream mmOutStream;

public ConnectedThread(BluetoothSocket socket) {
    Log.d(TAG, "create ConnectedThread");
    mmSocket = socket;
    InputStream tmpIn = null;
    OutputStream tmpOut = null;

    // Get the BluetoothSocket input and output streams
    try {
        tmpIn = socket.getInputStream();
        tmpOut = socket.getOutputStream();
    } catch (IOException e) {
        Log.e(TAG, "temp sockets not created", e);
    }

    mmInStream = tmpIn;
    mmOutStream = tmpOut;
}

public void run() {
    Log.i(TAG, "BEGIN mConnectedThread");
    byte[] buffer = new byte[1024];
    //final byte[] buffer = new byte[1024];
    int bytes;

    // Keep listening to the InputStream while connected
    while (true) {
        try {

            // Read from the InputStream
            bytes = mmInStream.read(buffer);

            //Send the obtained bytes to the UI Activity
            mHandler.obtainMessage(FinalSetting.MESSAGE_READ, bytes, -1, buffer).sendToTarget();

            } catch (IOException e) {
            Log.e(TAG, "disconnected", e);
            connectionLost();
            break;
        }
    }
} 
```

**然后在 FinalSetting.java** 案例消息中读取：

```
case MESSAGE_READ:
                int i;

                byte[] readBuf = (byte[]) msg.obj; 

             // construct a string from the valid bytes in the buffer
                String readMessage = new String(readBuf, 0, msg.arg1);
                Log.i(LOG_TAG, readMessage);

                mTextView.setText(readMessage);
                String [] numbers = readMessage.split("\n");
                int [] intNumber = new int[numbers.length];

                for (String number : numbers) {
                    if(number.trim().length()>0){

                       try{
                           for (i=0;i<numbers.length;i++){
                                intNumber[i] = Integer.valueOf(number.trim());
                                if (intNumber[i]<0 || intNumber[i]>95){
                                    //some action
                                }
                            }
                       } catch (NumberFormatException e){
                        Log.i(LOG_TAG, "Unable to parse integer" + e);
                       }    
                    }

                }

                break; 
```

**LogCat 显示的内容：**

```
 05-06 17:28:07.079: I/HBAS(15090): 10

05-06 17:28:07.079: I/HBAS(15090): 11

05-06 17:28:07.079: I/HBAS(15090): 12

05-06 17:28:07.969: I/HBAS(15090): 1
05-06 17:28:08.029: I/HBAS(15090): 3

05-06 17:28:09.019: I/HBAS(15090): 14

05-06 17:28:09.979: I/HBAS(15090): 1
05-06 17:28:10.029: I/HBAS(15090): 5

05-06 17:28:10.989: I/HBAS(15090): 16

05-06 17:28:12.009: I/HBAS(15090): 17

05-06 17:28:12.999: I/HBAS(15090): 18

05-06 17:28:13.999: I/HBAS(15090): 19

05-06 17:28:14.999: I/HBAS(15090): 20

05-06 17:28:16.009: I/HBAS(15090): 21 
```

那么有谁知道如何解决这个问题？？？提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T15:25:46.000

再次查看您的数据 - 您实际上正在接收所有数据，您只是做出了一个无效的假设，即您将以与发送数据相同大小的块接收数据。

```
05-06 17:28:07.079: I/HBAS(15090): 11
05-06 17:28:07.079: I/HBAS(15090): 12
05-06 17:28:07.969: I/HBAS(15090): 1
05-06 17:28:08.029: I/HBAS(15090): 3 
```

看到你得到了你的“13”——只是它以“1”的形式出现，然后是“3”。

这是完全允许的，并且您应该期望经常发生的事情。您将需要引入一些方法来重新组合数据并将其划分为有用的部分。

你可以做类似发送

```
0011
0012
0013 
```

等等，并且总是在尝试解析它们之前组装四字节块。如果传输是有保证的，这实际上会起作用，尽管它感觉有风险 - 如果它不同步，它将保持不同步，直到系统重置或随机重新启动。但是，如果保证传输不会丢弃或重新订购任何东西（至少没有警告您它有），那么理论上可能不会被看到（在您的错误处理程序之外）。

另一个常见的想法是引入数据中不能出现的分隔符，例如

```
11\n
12\n
13\n 
```

并在尝试解析之前寻找终止的换行符。这样做的好处是您可以丢弃乱码并通过同步到您找到的下一个换行符来恢复。

最后，存在数据中所有值都可能的情况，因此您不能为分隔符/终止符保留一个。在这种情况下，通常将一个作为转义字符保留在一系列特殊含义之前，并让这些特殊序列中的一个代表转义字符的文字出现 - 这就像在引号字符串中处理“\ n" 表示换行，"\\" 表示文字 \

编辑：哦，幽默，我不得不转义双反斜杠才能让它们显示，但不是反斜杠 n

# java - 具有多个连接列的 OneToMany 关系

> ID：10483346
> 
> 赞同：3
> 
> 时间：2012-05-07T13:53:43.297
> 
> 标签：java, hibernate, jpa, bidirectional-relation

我有这个实体`Friendship`：

```
@ManyToOne
private User user1;
@ManyToOne
private User user2;
... and other properties of the friendship 
```

每个友谊只有这个实体的一个实例/记录（不是 2 个），所以约翰是简的朋友的情况不会有任何问题，但反之亦然。条目也被规范化，因此 ID 最低的友谊成员是`user1`，而另一个成员是`user2`，这意味着我可以通过简单的唯一约束来防止重复条目。

为了获得某个用户的友谊，我执行了一个查询

`WHERE user1 = :me OR user2 = :me`.

是否可以将其映射到 的`@OneToMany Set<Friendship>`属性上`User`？

（`Friendship`有其他属性，所以这不简单`@ManyToMany Set<User> friends`）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T14:33:15.603

最简洁的答案是不。对于双向提取，我相信完成您所要求的唯一方法是使用命名查询。类似于以下内容：

```
@Entity
@NamedQuery(name="User.friendships", query="
    select u 
    from User u
    where u in (
        select f.User1
        from Friendship f
        where f.User2.id = :userId
    ) or u in (
        select f.User2
        from Friendship f
        where f.user1.id = :userId
)")
public class User {

private Set<User> friends = new HashSet<User>()

public Collection<User> getFriendships(Session s) {
    return s.getNamedQuery("User.friendships")
        .setParameter("userId", this.id)
        .list();
} 
```

}

我过去这样做的方法是以某种方式对连接表进行非规范化，无论是通过重复列（在每个方向上映射关联）还是重复行。任何一个都可以让你简化你的获取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T14:11:31.293

对的，这是可能的。但是为什么你需要@OneToMany？您可以使用@ManyToMany。它会是一样的。在 @ManyToMany 注释中，您可以指定将存储 id 对 user1 - user2 的表。然后只需对该表进行查询。

# r - 主题建模：如何使用我的拟合 LDA 模型来预测 R 中新数据集的新主题？

> ID：10483349
> 
> 赞同：5
> 
> 时间：2012-05-07T13:53:46.103
> 
> 标签：r, lda, topic-modeling

我在 R 中使用“lda”包进行主题建模。我想使用适合新数据集的潜在狄利克雷分配（LDA）模型来预测新主题（文档中相关单词的集合）。在这个过程中，我遇到了 predict.distribution() 函数。但是该函数将 document_sums 作为输入参数，这是拟合新模型后的结果的输出。我需要帮助来了解现有模型在新数据集上的使用并预测主题。以下是 Johnathan Chang 为包编写的文档中的示例代码： 以下是它的代码：

```
#Fit a model
data(cora.documents)
data(cora.vocab)

K <- 10 ## Num clusters

result <- lda.collapsed.gibbs.sampler(cora.documents,K, cora.vocab,25, 0.1, 0.1) 

# Predict new words for the first two documents
predictions <-  predictive.distribution(result$document_sums[,1:2], result$topics, 0.1, 0.1)

# Use top.topic.words to show the top 5 predictions in each document.
top.topic.words(t(predictions), 5) 
```

任何帮助将不胜感激

感谢和问候，

Ankit

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T02:37:10.110

我不知道如何在 R 中实现这一点，但请看一下 Wallach 等人在 2009 年发表的一篇文章。人。[此处](http://dl.acm.org/citation.cfm?id=1553515)标题为“主题模型的评估方法” 。看一下第 4 节，它提到了三种计算 P(z|w) 的方法，一种基于重要性采样，另外两种称为“Chib-style estimator”和“left-to-right estimator”。

Mallet 实现了从左到右的估计方法

# uitableview - 使 UITableView tableHeaderView 清晰，所有其他单元格为白色

> ID：10483352
> 
> 赞同：3
> 
> 时间：2012-05-07T13:53:56.457
> 
> 标签：uitableview, jtableheader

我的 UITableView 跨越 iPhone 视图的大小，其中一个 tableHeaderView 包含其他内容。希望标题清晰而表格的其余部分为白色，我将表格的背景颜色设置为清除，并在视图委托方法`-(void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath`中将单元格的背景设置为白色。

这会处理带有内容的单元格，但现在还有另一个问题：我的表格的数据没有延伸到底部，因此有许多单元格空间是清晰的。

我只是在寻找一个清晰的 tableHeaderView 和白色单元格。我接近这个错误吗？将表格背景设置为白色并将 headerView 设置为清除并不能解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-06T16:02:02.643

我今天尝试了另一个想法并且有效。我将 tableView 的背景颜色设为 as `[UIColor clearColor]`，并在标题视图后面放置了一个滚动视图。我的解决方案是确保我在表格标题视图后面的滚动视图已`clipsToBounds`设置为`YES`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T10:50:55.820

这是一个似乎至少工作得很好的解决方法：

*   `UITableView`设置要清除的背景颜色。
*   在委托方法中将单元格的背景颜色设置为白色`- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath`
*   返回`UIView`具有清晰背景的标题视图。
*   返回一个`UIView`白色背景作为页脚视图，并根据您拥有的单元格数量动态调整其高度。那是，`tableView.frame.size.height - (rowHeight * numberOfRows + headerHeight)`

# android-layout - Admob 视图设置为 GONE 不断收到点击

> ID：10483362
> 
> 赞同：0
> 
> 时间：2012-05-07T13:54:30.593
> 
> 标签：android-layout, view, admob, visibility

请注意：目前没有使用任何 XML 进行布局！我不想改变这一点。

我的游戏中某个时刻出现了 Admob 横幅。我使用[了本](http://rx-games.com/admob-adverts-on-surfaceview-no-xml-tutorial/)教程。它工作正常。

现在，当我删除横幅时，它应该会消失。但是..它不断收到点击，阻止底层视图处理这些点击。:(

我使用此代码删除广告横幅：

```
public static void HideAd() {
    AppelzActivity.runOnUiThread(new Runnable() {
        @Override
        public void run() {
            AlphaAnimation animation = new AlphaAnimation(1.0f, 0.0f);
            animation.setDuration(400);
            animation.setFillAfter(true);
            animation.setInterpolator(new AccelerateInterpolator());
            AppelzActivity.adView.startAnimation(animation);
            AppelzActivity.adView.setClickable(false);
            AppelzActivity.adView.setVisibility(View.GONE);

        }});
} 
```

我会认为 setClickable(false) 和 setVisibility(View.GONE) 就足够了。我还尝试了 setClickable(true)，因为我发现了一个关于这个布尔值反过来工作的错误报告..：S

因此，当我调用 HideAd 时，广告肯定会消失（AlphaAnimation == 工作）。但是，当我点击广告曾经所在的区域时，它仍然会将我带到广告所代表的 URL。我希望该点击由用户可见的视图处理（就像我点击横幅曾经所在区域之外的某个地方时所做的那样）..

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T22:29:01.930

嗯。当我注释掉它时它起作用了

```
 animation.setFillAfter(true); 
```

# macos - Mac 上 Mono 的 sysctl

> ID：10483363
> 
> 赞同：3
> 
> 时间：2012-05-07T13:54:32.267
> 
> 标签：macos, mono

是否有可能以某种方式从 Mac 上基于 Mono 的应用程序调用[sysctl ？](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/Manpages/man3/sysctl.3.html#//apple_ref/doc/man/3/sysctl)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T07:41:06.373

当然，只需使用 DllImport，就像使用任何其他 C 函数一样。这是一个示例：

```
using System;
using System.Runtime.InteropServices;

class TestSysctl {

    [DllImport ("libc")]
    static extern int sysctlbyname (string name, out int int_val, ref IntPtr length, IntPtr newp, IntPtr newlen);

    static void Main (string[] args) {
            int value;
            IntPtr size = (IntPtr)4;
            string param = "kern.maxproc";
            if (args.Length > 0)
                    param = args [0];
            int res = sysctlbyname (param, out value, ref size, IntPtr.Zero, (IntPtr)0);
            Console.WriteLine ("{0}: {1} {2} (res: {3})", param, value, size, res);
    }
} 
```

请注意，您应该为第二个参数中返回的不同数据类型定义多个重载（您可能必须定义正确的结构，因为它们在标头中指定）。

# java - Android：获取本地日期格式，因为它是带有字母而不是数字的字符串

> ID：10483367
> 
> 赞同：0
> 
> 时间：2012-05-07T13:54:41.567
> 
> 标签：java, android, date, locale

我想获取本地日期格式。我的意思是我想要返回 String 的方法（或方法列表）`yyyy-MM-dd`，如果它是 LT；`yyyy/MM/dd`如果是 EN 等等。我不需要像这样的确切数字`2001/02/26`，而只需要格式。我怎么能得到那个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T14:26:40.427

SimpleDateFormat 类包含一个可能对您有用的 toPattern 方法。您的问题类似于[从 java SimpleDateFormat 获取模式字符串](https://stackoverflow.com/questions/2761442/getting-pattern-string-from-java-simpledateformat)中的问题，其中有更多信息。

# linux - Tomcat maxSavePostSize 值？

> ID：10483369
> 
> 赞同：2
> 
> 时间：2012-05-07T13:54:56.667
> 
> 标签：linux, security, tomcat

Tomcat 错误`403 the request body was too large to be cashed during authentication process`

它与 maxSavePostSize 设置其当前默认值相关，即 4096 (4KB)。在谷歌搜索中，人们建议 -1（不受限制）。这是否意味着它可能会受到 DOS 攻击？你有什么建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T14:12:11.927

在不受信任的用户可以访问的 Tomcat 实例上将 maxSavePostSize 设置为 -1 将是一件非常愚蠢的事情，因为 - 正如您正确怀疑的那样 - 它会使服务器受到 DoS 攻击。

此设置仅在身份验证期间需要保存 POST 的内容时使用。即，当未经身份验证的用户 POST 请求受 FORM 或 CLIENT-CERT 身份验证保护的资源时。

有几个解决方案：a) 以这样一种方式构建您的应用程序，使用户在能够访问触发 POST 的页面之前始终经过身份验证 b) 将 maxSavePostSize 增加到您希望应用程序必须处理的最大 POST。如果这比 4k 大得多，那么您可能仍然容易受到 DoS 攻击。

顺便说一句，请确保您没有将此设置与 maxPostSize 混淆。

# iptables - 我们可以通过“/proc”FS 发出“iptables”命令吗？

> ID：10483371
> 
> 赞同：1
> 
> 时间：2012-05-07T13:55:01.067
> 
> 标签：iptables, proc

我有一个被大量剥离的嵌入式 Linux 平台。它没有'/sbin/iptables' 二进制文件，并且不可能（政治/技术）安装它。许多其他工具也被剥离了，所以在过去我已经能够通过操作“/proc”文件系统来做我需要的事情。

我需要发出以下命令以阻止所有 IP（“localhost”除外）访问我们的端口：

```
iptables -A INPUT -i eth0 -p tcp --destination-port $PORT -s $IP_ADDR -j DROP 
```

proc中是否有一个地方我可以写入它以模拟上面的'iptables'命令？

或者可能是网络配置文件，但我猜这对于几个 Linux 平台会有所不同。

**更新 - 2012.05.08**

我最终能够在设备上安装“iptables”包，却发现内核没有内置支持。现在不，它是一个编译内核模块（ko）并添加它们的游戏。我不是甚至确定应该启用除“CONFIG_NETFILTER”之外的哪些编译标志......似乎还有很多其他的。

# python - random.sample 的时间复杂度

> ID：10483377
> 
> 赞同：11
> 
> 时间：2012-05-07T13:55:26.743
> 
> 标签：python, time-complexity

在另一个线程中，我看到二进制堆加权随机样本的时间复杂度等于 O(n * log(m))，其中 n 是选择数，m 是可供选择的节点数。

我想知道 Python 用作 random.sample 的未加权随机样本的时间复杂度。时间复杂度只是 O(n) 还是完全不同？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T14:10:41.537

Python 源代码：（[`random.py`](http://hg.python.org/cpython/file/ab500b297900/Lib/random.py#l267)第 267 行）。

这是相关的位：

```
 315             selected = set()
   316             selected_add = selected.add
   317             for i in range(k):
   318                 j = randbelow(n)
   319                 while j in selected:
   320                     j = randbelow(n)
   321                 selected_add(j)
   322                 result[i] = population[j] 
```

它基本上将随机索引“掷骰子”到`population`. 如果它得到一个已经在 set 中的索引`selected`，它会重新滚动。冲洗、起泡和重复`k`次数（`k`您要求的样品数量在哪里。）

它似乎`O(n)`在所请求的样本数量的大小中。小型集合有一些优化，但最重要的是上面的主循环。

* * *

编辑：

我相信第 305-313 行是一个特殊情况，因为当请求的样本数量`k`占总人口的很大一部分时`n`。我们不是从整个种群中滚动随机元素（如果我们与已经选择的元素发生碰撞则重新滚动），我们明确地维护一个我们尚未选择的元素列表。我们保证每次都会得到一个新元素，但代价是我们必须维护列表。

如果我解释错了，请随时在下面发表评论。

```
 303         result = [None] * k
   304         setsize = 21        # size of a small set minus size of an empty list
   305         if k > 5:
   306             setsize += 4 ** _ceil(_log(k * 3, 4)) # table size for big sets
   307         if n <= setsize:
   308             # An n-length list is smaller than a k-length set
   309             pool = list(population)
   310             for i in range(k):         # invariant:  non-selected at [0,n-i)
   311                 j = randbelow(n-i)
   312                 result[i] = pool[j]
   313                 pool[j] = pool[n-i-1]   # move non-selected item into vacancy
   314         else:
   315             selected = set()
   316             selected_add = selected.add
   317             for i in range(k):
   318                 j = randbelow(n)
   319                 while j in selected:
   320                     j = randbelow(n)
   321                 selected_add(j)
   322                 result[i] = population[j]
   323         return result 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-11T18:03:20.657

来源：[https ://hg.python.org/cpython/file/ab500b297900/Lib/random.py](https://hg.python.org/cpython/file/ab500b297900/Lib/random.py)

这个答案类似于上面 Li-aung Yip 的答案，但我认为精度对于某些应用程序可能很重要。

对于一个大小的总体`n`和一个大小的样本`k`，复杂性可能会受到总体输入类型的影响：如果总体是一个集合，则 random.py 的第 296行将[其](https://hg.python.org/cpython/file/ab500b297900/Lib/random.py)复制到一个元组，即`O(n)`什么是`n`或`k`。如果是序列，则无需预处理。

之后，如果`k`足够大（见下文），则 random.sample 使用以下循环（random.py 的第 305-313 行[）](https://hg.python.org/cpython/file/ab500b297900/Lib/random.py)，这`O(n)`又是因为人口的副本。

```
 if k > 5:
        setsize += 4 ** _ceil(_log(k * 3, 4)) # table size for big sets
    if n <= setsize:
        # An n-length list is smaller than a k-length set
        pool = list(population)
        for i in range(k):         # invariant:  non-selected at [0,n-i)
            j = randbelow(n-i)
            result[i] = pool[j]
            pool[j] = pool[n-i-1]   # move non-selected item into vacancy 
```

与 不同的平均情况复杂度的唯一希望`O(n)`是 when`k`足够小，以至于使用以下循环：

```
else:
    selected = set()
    selected_add = selected.add
    for i in range(k):
        j = randbelow(n)
        while j in selected:
            j = randbelow(n)
        selected_add(j)
        result[i] = population[j] 
```

这似乎是`O(k)`一般情况，但我不确定如何证明这一点。如果我犯了错误，请随时发表评论。

# c# - 设置一年中的日期 DateTime

> ID：10483381
> 
> 赞同：1
> 
> 时间：2012-05-07T13:55:37.117
> 
> 标签：c#, windows-phone-7

我需要为 DateTime 设置一年中的哪一天，我从过去的日期说“5/7/2000”那一天是 128，我现在想在那一天设置另一个 DateTime 128，所以我可以求今年那个日期是星期一。你能帮我吗？

这是我正在尝试的代码，我在列表框中绑定了日期，我正在点击它来获取选定的日期

```
string selectedTap = "";
int dayOfYear;
DateTime dayOfThisYear;
var selected = listBoxItem.SelectedValue as Ages;
selectedTap = selected.DOB;
dayOfYear = (DateTime.Parse(selectedTap, CultureInfo.InvariantCulture).DayOfYear);
//dayOfThisYear.DayOfYear = dayOfYear;    //Need to set this date

MessageBox.Show(selectedTap + dayOfYear); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-07T14:02:42.010

您可以为当年创建一个新的 DateTime，然后添加适当的天数：

```
dayOfThisYear = new DateTime(DateTime.UtcNow.Year, 1, 1).AddDays(dayOfYear - 1); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-07T13:59:25.917

获取 1/1/（无论年份）。AddDays（一年中的一天 - 1）

# sql - 如果没有字段包含字符串，则返回 true 的短 SQL 命令？

> ID：10483388
> 
> 赞同：3
> 
> 时间：2012-05-07T13:56:15.677
> 
> 标签：sql, sql-server, database, oracle

我想要一个简短形式的 SQL 命令（我正在使用 Oracle SQL）

```
SELECT * from table1 
WHERE field1 not like '%test%' 
AND field2 not like '%test%' 
AND field3 not like '%test%' 
```

是否有与该命令等效的语法？我在想类似的东西

```
SELECT * from table1 
WHERE '%test%' not in (field1, field2, field3) 
```

但不幸的是，这种语法不起作用？！非常感谢所有提示和建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T13:59:22.467

抱歉，伙计，我认为您不会找到比问题中的第一个陈述更短或更简单的陈述。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-07T14:00:19.843

不，这真的不可能。

[使用德摩根定律](http://en.wikipedia.org/wiki/De_Morgan%27s_laws)之一的这种转换非常短，但只有几个字符差异：

```
SELECT *
FROM table1 
WHERE NOT (field1 LIKE '%test%' OR
           field2 LIKE '%test%' OR 
           field3 LIKE '%test%') 
```

`'%test%'`还有一个更短的hack，但我建议不要这样做，因为如果您将字符串文字更改为可能包含下划线的内容，它会降低您的查询性能以及引入错误的可能性，例如`'%te_st%'`：

```
SELECT *
FROM table1 
WHERE (field1 + '_' + field2 + '_' + field3) NOT LIKE '%test%' 
```

我认为您已经在做的是最好的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T13:58:56.867

```
SELECT CASE WHEN (
    (field1 NOT LIKE '%test%') AND
    (field2 NOT LIKE '%test%') AND
    (field3 NOT LIKE '%test%')
THEN true
ELSE false AS truthiness 
```

# ios - 在多个 ios 设备之间共享非续订应用项目订阅

> ID：10483389
> 
> 赞同：1
> 
> 时间：2012-05-07T13:56:24.900
> 
> 标签：ios, in-app-purchase, storekit

由于以下原因，我的应用最近被 iTunes 商店拒绝。

11.6 使用 IAP 的内容订阅必须至少持续 7 天，并且用户可以从他们的所有 iOS 设备上使用

我通过以下链接查看 [如何恢复非续订 Apple 订阅](https://stackoverflow.com/questions/8138594/how-to-restore-non-renewing-apple-subscriptions)

但不知道如何在多个 ios 设备之间共享在应用程序中购买的项目。我在应用程序项目中使用非更新。

任何朋友都有这个想法。帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-08T02:42:19.207

为了在用户的所有设备上提供非续订订阅，您必须在自己的服务器上跟踪购买，这意味着您还必须实施一种识别个人用户的方法，通常通过用户名和密码（与他们的 iTunes 分开）账户凭证）。

您应该在您的应用程序中提供“创建帐户”和“登录”功能选项，并提示用户将他们可能购买的任何订阅保存到您的服务器。然后，当他们在另一台设备上登录时，您可以恢复交易。

Apple 的 restoreCompletedTransactions 不适用于不可更新的订阅。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-05-07T14:36:06.880

有一个 call in `StoreKit`, on 被`SKPaymentQueue`调用`[[SKPaymentQueue defaultQueue] restoreCompletedTransactions]`，它应该能够从 iTunes 中检索以前的事务并将它们返回到您的应用程序。使用此信息，您可以在众多设备上“共享”以前购买的内容。

# visual-studio-2010 - 为 Azure 设置 Visual Studio 2010

> ID：10483392
> 
> 赞同：1
> 
> 时间：2012-05-07T13:56:46.270
> 
> 标签：visual-studio-2010, azure

我有 VS2010 Ultimate，我想创建一个

> Windows Azure 项目

但是在云模板下我只有

> 启用 azure 工具项目

已经安装了 WindowsAzureTools 和 IIS7.5，但是仍然没有创建 azure 项目的选项

还需要设置什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T14:16:18.623

要安装 Windows Azure 工具，请转到菜单栏，选择“文件”->“新建”->“项目”，然后在已安装的模板中选择“Visual C#”或“Visual Basic”，然后选择一个名为“启用 Windows Azure 工具”的项目模板。

**稍后编辑：以管理员身份**启动 Visual Studio ->文件->新建->项目->为 Azure 选择项目->选择 .net 框架->在名称文本框中，键入项目名称->确定->现在您有了一个 Windows Azure 的“新项目”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T15:40:50.027

您的 Windows Azure 安装似乎没有按预期进行，您只安装了 Windows Azure SDK，但“Windows Azure 创作工具”要么未能安装，要么您分别安装了这两个组件。要首先解决您的问题，请从您的程序中卸载所有 Windows SDK 组件。

之后请使用下面的链接从 Web 平台安装程序 (WebPI) 安装 Windows Azure，它将在您的计算机中安装所有 4 个组件：

[http://go.microsoft.com/fwlink/?LinkID=234939&clcid=0x409](http://go.microsoft.com/fwlink/?LinkID=234939&clcid=0x409)

在 Visual Studio 中成功集成 Windows Azure SDK 所需的组件列表如下： ![Windows Azure SDK 组件](../Images/66b9844e83b50a86ae62c26558027288.png)

# codeigniter - 如何使用 Netbeans 对 CodeIgniter 进行 ftp？

> ID：10483395
> 
> 赞同：0
> 
> 时间：2012-05-07T13:57:01.813
> 
> 标签：codeigniter, netbeans

我有 Codeigniter，我将我的系统和应用程序文件夹放在网站的根目录中，位于 www/public_html 之前。我如何通过 Netbeans 工作？据我所知，netbeans 只能更新 public_html 中的文件/文件夹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T15:17:36.590

在netbeans中，您可以根据需要选择工作目录[这](http://netbeans.org/kb/docs/php/remote-hosting-and-ftp-account.html#runPHPApplicationOnRemoteServer)是一个指南

# javascript - 测试 overflow-y:auto 在 android < 3 上返回 true，即使它不起作用

> ID：10483397
> 
> 赞同：2
> 
> 时间：2012-05-07T13:57:10.470
> 
> 标签：javascript, android, css, android-browser, browser-support

我正在为android开发一个webapp。在某个地方，我需要查找浏览器是否支持**溢出-y:auto**，因为我需要滚动一个 div。**但是在android < 3**
中对此返回 true 的测试，告诉它受支持，但是在使用时它不能按照预期的方式工作，即 div 与

 **```
overflow-y:auto 
```

不滚动。

是否有任何可靠的方法可以查看浏览器是否支持此属性。我使用modernizr编写了这个测试，但它总是返回true，这意味着它支持。

```
Modernizr.addTest('overflowauto', function(){
var bool = false;
var testProp = "overflow-y";
var testVal = "auto";
var styles = Modernizr._prefixes.join(testProp + ":" + testVal + "; ");
var ret = true;
ret =  Modernizr.testStyles('#modernizr { '+styles+' }', function(elem, rule){
    for(var i = 0; i < Modernizr._prefixes.length; i++) {
        bool = (window.getComputedStyle ?
                getComputedStyle(elem, null) :
                elem.currentStyle)[Modernizr._prefixes[i] + testProp] == testVal;

        if(bool) break;
    }

    return bool;

});
return ret; 
```

});

但很明显，当我使用它时它不起作用。请告诉我**一个可靠的方法来确定该物业是否可以安全使用**，或者我能做些什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T05:55:44.970

你可以试试这个：

```
Modernizr.addTest("overflowscrolling",function(){
    return Modernizr.testAllProps("overflowScrolling");
}); 
```

然后检查Modernizr 将插入到DOM 元素中的`overflowscrolling`or类。这似乎适用于 iOS 和 Android 设备。（或者直接检查 的值。）`no-overflowscrolling``html``Modernizr.overflowscrolling`

因为`overflowscrolling`特定于某些浏览器/设备（例如，最近的 iPhone），所以我`Modernizr.touch`也会检查。如果它不是触摸设备，我认为它可以处理溢出滚动。由于 Android 是触摸设备，它们将被测试，`Modernizr.overflowscrolling`但您不必测试，例如，笔记本电脑上的 Chrome（这将返回 false，但可以处理`overflow:auto`得很好）。

所以测试可能不完美，但它似乎对我所测试的所有我关心的用例做了正确的事情：所有现代桌面浏览器、最近的 iPhone 和 Android 2.X 设备。如果您要支持的设备/浏览器范围更广，则必须对其进行测试并进行适当的调整。**

# c# - 为插件架构动态加载程序集

> ID：10483400
> 
> 赞同：1
> 
> 时间：2012-05-07T13:57:28.070
> 
> 标签：c#, plugins, .net-assembly

我在 C#.NET 中构建了一个插件架构，可以从预定义的物理文件路径动态加载 DLL。我知道程序集可能存在于两个位置的内存位置中，因此使用类似...的方式验证程序集中的成员（接口）是不可靠的。

```
if(plugin is T)
    // cache the assembly 
```

...所以目前我正在使用接口名称进行比较，然后从中激活一个实例。但是，这也有局限性，因为接口“IPlugin”是许多第三方程序集使用的非常常见的接口名称（例如 log4net 等）

采取以下代码（这是行不通的）：

```
foreach (Type t in assembly.GetTypes())
{
    type = t;

    if (!type.IsInterface)
    {
        var plugin = type.GetInterface(typeof(T).Name);

        if (plugin != null)
            if (plugin is T)
            {
                T p = (T)Activator.CreateInstance(type);

                if (!this.Plugins.Select(sp => sp.Name).Contains(p.Name))
                    this.Plugins.Add(p);
            }
    }
} 
```

我的问题：验证动态加载的 DLL 与 IPlugin 接口匹配的最佳（可靠）方法是什么？

一种想法是对 IPlugin 的公钥令牌进行硬编码并对其进行验证，但我想知道是否有更正式的方式。例如，我可以想象一个潜在的安全漏洞，其中程序集欺骗了 IPlugin 名称或公钥令牌......所以也许有一个很好的方法来测试加载的 DLL 是否与加载它的程序集的签名相匹配。

请让我知道是否需要更清楚。

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T14:05:55.000

我这样解决它：

```
public List<T> LoadPluginsFromPath<T>( string Path ) {          
    List<T> results = new List<T>();

    DirectoryInfo Directory = new DirectoryInfo( Path );
    if ( !Directory.Exists ) {
        return results; // Nothing to do here
    }

    FileInfo[] files = Directory.GetFiles( "*.dll" );
    if ( files != null && files.Length > 0 ) {
        foreach ( FileInfo fi in files ) {
            List<T> step = LoadPluginFromAssembly( fi.FullName );
            if ( step != null && step.Count > 0 ) {
                results.AddRange( step );
            }
        }
    }

    return results;
}

private List<T> LoadPluginFromAssembly<T>( string Filename ) {
    List<T> results = new List<T>();

    Type pluginType = typeof( T );

    Assembly assembly = Assembly.LoadFrom( Filename );
    if ( assembly == null ) {
        return results;
    }

    Type[] types = assembly.GetExportedTypes();
    foreach ( Type t in types ) {

        if ( !t.IsClass || t.IsNotPublic ) {
            continue;
        }

        if ( pluginType.IsAssignableFrom( t ) ) {
            T plugin = Activator.CreateInstance( t ) as T;
            if ( plugin != null ) {
                results.Add( plugin );
            }
        }

    }

    return results;
} 
```

我这样称呼它：

```
List<MyPlugin> plugins = LoadPluginsFromPath<MyPlugin>( "plugins" ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T15:33:38.953

除了枚举汇编中的所有类型，你为什么不定义一个工厂类？

工厂类将有一个更合适的名称，例如“YourFramework.PluginTypeFactory”，确实消除了可能的名称冲突。

此外，在某些程序集上`Assembly.GetTypes`可能[会](https://stackoverflow.com/questions/4350363/reflectiontypeloadexception-type-is-attempting-to-implement-an-inaccessible-int)严重失败，并在错误程序集上花费大量时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T14:01:27.327

使用`IsAssignableFrom`：

```
var yourIPlugin = typeof(IPlugin);
foreach (Type t in assembly.GetTypes())
{
    if (yourIPlugin.IsAssignableFrom(t))
    {
            T p = (T)Activator.CreateInstance(t);
            if (!this.Plugins.Select(sp => sp.Name).Contains(p.Name))
                this.Plugins.Add(p);
    }
} 
```

[`IsAssignableFrom`](http://msdn.microsoft.com/en-us/library/system.type.isassignablefrom.aspx)使用一种类型来查看是否可以从中分配另一种类型。它充分考虑了实际类型，而不仅仅是类型的名称。因此，即使您的程序集或其他程序集包含名为`IPlugin`的类型，也只会找到 from 之一`yourIPlugin`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-07T15:37:46.673

我碰巧遇到了和你一样的问题，一些“插件”被加载了两次，.NET Framework 在使用时无法解析类型

```
IsAssignableFrom 
```

我解决了它，为 AppDomain 的 AssemblyResolve 事件添加了一个处理程序，如果它已经加载到当前 AppDomain 的 Assemblies 集合中，则不再加载“插件”。

当一些插件开始相互依赖并且程序集加载器在它们已经加载时一遍又一遍地加载相同的程序集时，这种情况发生得最多。

希望它有助于解决您的问题，它确实让我发疯了！

# ios - 无法 ctrl 将视图拖动到头文件

> ID：10483409
> 
> 赞同：4
> 
> 时间：2012-05-07T13:58:00.347
> 
> 标签：ios

嗨，我对 ios 开发非常陌生。

我正在开发一个使用 mapkit 的地图应用程序。我有一个带有地图视图的 viewController 和一个相应的 viewController 类。

现在我想操作 mapView，并尝试设置委托。但是我不能 ctrl+拖动任何东西（包括 mapView）到我的头文件。那我该怎么办？？

我试图在我的头文件中编写自动实现的东西，但这也不起作用:(

任何帮助都非常感谢..

这是我的头文件：

```
#import <UIKit/UIKit.h>
#import <MapKit/MapKit.h>

#define METERS_PER_MILE 1609.344

@interface MapViewController : UIViewController<MKMapViewDelegate> {

}

@property (weak, nonatomic) IBOutlet MKMapView *mapView;

@end 
```

并给 ios 开发人员一个注释，这个拖放在 IDE 中到底是做什么的？！？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-07T14:16:30.097

以下是在 XCode 中创建 IBOutlet 的步骤：

1.  单击`xib`/`Storyboard`在 Interface Builder 中编辑它
2.  将您要为其创建插座的视图放在前面
3.  确保这`Assistant editor`是可见的。如果没有点击此图标： ![在此处输入图像描述](../Images/c3520407214479d8f62adb3c1c93c64e.png)
4.  现在你应该在你的 UI 编辑器旁边看到你的源文件（还要确保你已经在身份检查器中设置了控制器的自定义类）
5.  **重要提示**：确保您的编辑器**没有**缩小。单击**=**按钮执行此操作。
6.  如果您没有看到您的头文件，请将助手模式设置为“**自动”并控制+拖动到您的源以创建**`IBOutlet` ![在此处输入图像描述](../Images/47a591024395e03362fa47022757bbf9.png)

我希望这将为您阐明整个过程。请注意，这只是为了方便。您也可以手动声明`IBOutlet`并将其连接到您的视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T14:13:19.490

确保助手类型设置为对应项，![在此处输入图像描述](../Images/4ca8ecb0d9948836d07046ba6475b142.png) 有时 xcode 会自动将其设置为手动，您将尝试拖动到与您的 xib 无关的标题

# javascript - 如何在某人的网页上添加自己的图层？

> ID：10483411
> 
> 赞同：0
> 
> 时间：2012-05-07T13:58:03.590
> 
> 标签：javascript, css, greasemonkey

我想使用别人的网页向我的朋友展示一个概念。如何在某人的网页上添加自己的图层？Greasemonkey会工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T02:30:24.023

是的，Greasemonkey 可以通过添加（或删除或更改）页面 DOM 元素来做到这一点。

这是一个“添加层”到 Stack Overflow 页面的启动脚本：

```
// ==UserScript==
// @name        _Add a "layer" to a webpage
// @namespace   Stack Overflow
// @include     http://stackoverflow.com/*
// @require     http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
// ==/UserScript==

$("body").prepend (
      '<div id="gmLayerWrapper">'
    + '<p>All your overflow are belong to us.<br>'
    +   '<img src="http://2.bp.blogspot.com/-hEJb82Ni7V8/TrnNc8Ljj3I/AAAAAAAABG4/Ow2GnJyDo74/s400/UnicornRainbow.jpg"'
    +   ' alt="They\'re everywhere!">'
    + '</p>'
    + '<div id="gmTransparentFilm"></div>'
    + '</div>'
);
$("#gmLayerWrapper").width  ( $(window).width  () )
                    .height ( $(window).height () )
                    ;
//--- Fudge our text width for aesthetics.
$("#gmLayerWrapper p").width  ( $(window).width () / 2 )

GM_addStyle ( (<><![CDATA[
    #gmLayerWrapper {
        margin:                 0;
        padding:                0;
        position:               fixed;
        top:                    0;
        left:                   0;
        min-width:              200px;
    }
    #gmTransparentFilm {
        margin:                 0;
        padding:                0;
        background:             red;
        opacity:                0.7;
        height:                 100%;
        width:                  100%;
        position:               absolute;
        top:                    0;
        left:                   0;
        z-index:                666;
    }
    #gmLayerWrapper p {
        padding:                0.5em 1.5em;
        margin:                 1em auto;
        background:             white;
        border-radius:          2em;
        font-size:              30px;
        line-height:            2.5;
        text-align:             center;
        vertical-align:         middle;
        min-width:              4em;
        position:               relative; /*Required for z-index*/
        z-index:                888;
    }
]]></>).toString () ); 
```

它用：

*   [CSS](http://reference.sitepoint.com/css)
*   [jQuery](http://jquery.com/)
*   和[油猴](http://wiki.greasespot.net/Main_Page)

来实现这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T14:00:17.350

你可以用greasemonkey做到这一点。您将不得不再创建一个`div`s 与正确的`z-index`, 和 要么`position:fixed`要么`position:absolute`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T14:10:10.647

可能最简单的方法是`File -> Save As`自己工作并编辑生成的文件。您可以创建一个 GreaseMonkey 脚本来动态执行此操作，但对于快速 hi-5 来说，这听起来需要做很多工作。

# c++ - 如何检查用户是否使用 C++ 桌面应用程序在线

> ID：10483412
> 
> 赞同：0
> 
> 时间：2012-05-07T13:58:05.150
> 
> 标签：c++, internet-explorer, visual-c++

如果用户离线，我的应用程序需要加载本地 html 文件，否则它将通过嵌入式控件加载他的 Web 应用程序。

如何检查用户是否在线使用嵌入了浏览器控件的 C++ 桌面应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T14:04:11.750

您可以使用[网络位置感知 (NLA)](http://msdn.microsoft.com/en-us/library/windows/desktop/ms739931%28v=vs.85%29.aspx)来确定机器所连接的当前网络的特征。这与检查“用户是否在线”并不完全相同，但应该足够了。

即使这样，如果可以访问互联网，您也不能保证应用程序将正确加载。如果在线情况正常，您最好尝试在线加载，如果失败则回退到本地 HTML。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T14:17:34.907

您可以尝试使用[InternetGetConnectedState](http://msdn.microsoft.com/en-us/library/aa384702%28v=vs.85%29.aspx)函数。但是，请确保您尊重备注部分中给出的评论，尤其是：

> InternetGetConnectedState 的返回值 TRUE 表示至少有一个 Internet 连接可用

您也可以尝试直接对您的特定 URL 使用[InternetCheckConnection](http://msdn.microsoft.com/en-us/library/aa384346%28v=vs.85%29.aspx)函数。

还有更新的 COM 接口具有相同（或更好）的功能：

*   [INetworkListManager::GetConnectivity()](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370773.aspx)
*   [INetworkListManager::get_IsConnectedToInternet()](http://msdn.microsoft.com/en-us/library/windows/desktop/aa965309%28v=vs.85%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T14:01:07.960

您可以尝试 ping www.google.com。如果使用 Visual C++，可以使用[IcmpSendEcho 函数](http://msdn.microsoft.com/en-us/library/aa366050%28VS.85%29.aspx)。

# jquery - HTML5 - 翻页效果

> ID：10483414
> 
> 赞同：-2
> 
> 时间：2012-05-07T13:58:27.787
> 
> 标签：jquery, html, page-flipping

我正在尝试在 div 中加载外部 html 页面。如何在加载外部页面（使用 CSS3、HTML5 或 jQuery）时产生翻页效果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T19:09:48.853

检查[turn.js](http://www.turnjs.com) “是一个 JavaScript 库，它可以利用 HTML5 的所有优点使您的内容看起来像一本真正的书籍或杂志。基于 HTML5 的新用户界面让网络变得越来越漂亮；turn.js 最适合基于 HTML5 的杂志、书籍或目录。”

或者使用 HTML5 画布的翻转效果的[简单教程。](http://www.html5rocks.com/en/tutorials/casestudies/20things_pageflip/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T14:12:02.690

以[http://jquerymobile.com/demos/1.1.0/docs/pages/page-transitions.html](http://jquerymobile.com/demos/1.1.0/docs/pages/page-transitions.html)为例。jQuery Mobile 开箱即用。

# javascript - 是否有标准库或函数来解析 JSON 中的字符串

> ID：10483416
> 
> 赞同：0
> 
> 时间：2012-05-07T13:58:33.170
> 
> 标签：javascript, json, parsing

> **可能重复：**
> [如何在 javascript 中解析 json](https://stackoverflow.com/questions/4935632/how-to-parse-json-in-javascript)

我的服务器配置为发送回 JSON 数据，但它并没有像我预期的那样真正在键/值对中。

我得到这个：

```
["Value1","Value2","Value3"] 
```

所以我的问题是，是否有一个标准库人们用来解析上述内容以仅获取字符串值`Value1`、、`Value2`和`Value3`？

现在，我只是使用一个代码块来替换`[`,`]`和. 它非常笨拙，正在寻找更清洁的东西。`"``","`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T14:01:09.113

您可能看起来只是一个数组而不是 JSON，但可以回答您的问题。

[使用原生 JSON](https://developer.mozilla.org/En/Using_native_JSON)

```
var jsObject = JSON.parse(jsonString); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T14:01:44.933

浏览器具有[原生 JSON 功能](https://developer.mozilla.org/En/Using_native_JSON#Parsing_JSON.C2.A0strings)，[几乎所有现代浏览器都支持](http://caniuse.com/#search=json)

至于不支持的浏览器，[Crockford 有一个](https://github.com/douglascrockford/JSON-js)解析 JSON的库

此外，[数组是有效的 JSON](http://jsonlint.com/)。尝试将此字符串放入验证器中：

```
["Value1","Value2","Value3"] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T14:02:51.227

json 字符串的格式也与您正在编码的数据类型有关。

对象在编码为 json 时看起来与数组略有不同。

你在使用 jQuery 吗？如果是这样，您可以使用：

```
myArray = $.parseJSON(myString); 
```

来源：[http ://api.jquery.com/jQuery.parseJSON/](http://api.jquery.com/jQuery.parseJSON/)

# ruby - 如何在 Ruby 的 RestClient gem 中设置超时？

> ID：10483418
> 
> 赞同：40
> 
> 时间：2012-05-07T13:58:34.760
> 
> 标签：ruby, timeout, rest-client

我通过调用服务器来使用 RestClient gem。问题是如何从客户端设置超时。

```
RestClient.get "http://127.0.0.1:7819/tokenize/word/stackoverflow" 
```

我想将其设置为 10 秒。

提前致谢！！

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-08-21T14:21:01.117

你不需要修补任何东西。您可以`RestClient::Request`直接使用，例如：

```
RestClient::Request.execute(:method => :get, :url => url, :timeout => 10, :open_timeout => 10) 
```

但请记住，最坏的情况是 20 秒。

检查另一个帖子答案[https://stackoverflow.com/a/5445421/565999](https://stackoverflow.com/a/5445421/565999)

# android - 刷新列表视图

> ID：10483419
> 
> 赞同：1
> 
> 时间：2012-05-07T13:58:40.363
> 
> 标签：android, listview

我知道我被问了很多，但我就是不能让它工作。

我有一个 listView，我正在尝试更新它..

编辑：所有代码，也许我在其他地方出错了。

```
public class TestActivity extends Activity {
private TasksDataSource dataSource;
private ArrayAdapter<Task> adapter;
private ListView list;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    list = (ListView) findViewById(R.id.list);

    Button btnAdd = (Button) findViewById(R.id.btnAdd);
    Button btnRefresh = (Button) findViewById(R.id.btnRefresh);
    Button btnClear = (Button) findViewById(R.id.btnClear);

    dataSource = new TasksDataSource(this);
    dataSource.open();
    List<Task> tasks = dataSource.getAllTasks();

    adapter = new ArrayAdapter<Task>(this, android.R.layout.simple_list_item_1, tasks);
    list.setAdapter(adapter);

    btnAdd.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            Intent startAddIntent = new Intent(TestActivity.this, AddActivity.class);
            TestActivity.this.startActivity(startAddIntent);
        }
    });

    btnRefresh.setOnClickListener(new View.OnClickListener() {

        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            updateList();

        }
    });
    btnClear.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            dataSource.deleteAll();
        }
    });
} 
```

更新列表（）

```
public void updateList(){

    runOnUiThread(new Runnable() {

        public void run() {
            // TODO Auto-generated method stub
            adapter.notifyDataSetChanged(); 
            list.refreshDrawableState(); 
            list.invalidate(); 
            Toast.makeText(TestActivity.this, "AHHHH", Toast.LENGTH_SHORT).show();
        }
    });
} 
```

我尝试了很多不同的方法，但似乎都没有奏效。

提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T14:15:08.927

尝试

```
public void updateList(){

    runOnUiThread(new Runnable() {

        public void run() {
            // TODO Auto-generated method stub
            adapter.notifyDataSetChanged();
            list.refreshDrawableState();
            list.invalidate();
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T14:17:07.893

两个都

```
notifyDataSetChanged(); 
```

和

```
invalidate() 
```

应该更新你的观点。

我唯一一次看到这不起作用，是因为处理通知/无效消息的延迟。如果在 UI 线程上运行多个排队的消息，则必须以串行方式处理它们。所有 UI 操作都必须处理一个 UI 线程。确保您没有等待 UI 线程上的其他事情完成，并且您的代码应该可以工作。

# mysql - MySQL“On 子句中的未知列”

> ID：10483421
> 
> 赞同：15
> 
> 时间：2012-05-07T13:58:41.393
> 
> 标签：mysql, sql, join, mysql-error-1054

我有以下 MySQL 查询：

```
SELECT posts.id,  posts.name,  LEFT(posts.content, 400),  posts.author,  posts.date, users.display_name,
  GROUP_CONCAT(tags.tag ORDER BY tag_linking.pid ASC SEPARATOR ",") update_tags
FROM posts, tag_linking, tags
INNER JOIN `users`
ON posts.author=users.id;
WHERE tag_linking.pid = posts.id 
  AND tags.id = tag_linking.tid 
ORDER BY posts.date DESC 
```

哪个，你可以看到，连接三个表等等等等。无论如何，问题是它给出了一个错误：

```
ERROR CODE:
SQL Error (1054): Unknown column 'posts.author' in 'on clause' 
```

即使在另一个页面上使用的这个更简单的查询有效：

```
SELECT posts.id,  posts.name,  LEFT(posts.content, 400),  posts.author,  posts.date, users.display_name FROM `posts`
INNER JOIN `users`
ON posts.author=users.id 
```

有人对为什么会发生这种情况有想法吗？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-05-07T14:04:42.480

因为你的混合连接语法

[`From Mysql`*^([文档])*](http://dev.mysql.com/doc/refman/5.0/en/join.html)

> 但是，逗号运算符的优先级低于 INNER JOIN、CROSS JOIN、LEFT JOIN 等。**如果在存在连接条件的情况下将逗号连接与其他连接类型混合使用，则可能会出现形式为 Unknown column 'col_name' in 'on Clause' 的错误**。本节稍后将提供有关处理此问题的信息。

解决方案是：

> 要允许处理连接，请将前两个表用括号显式分组，以便 ON 子句的操作数是 (t1,t2) 和 t3：
> 
> **SELECT * FROM (t1, t2) 加入 t3 ON (t1.i1 = t3.i3);**
> 
> **或者**，避免使用逗号运算符，而是使用 JOIN：
> 
> **SELECT * FROM t1 加入 t2 加入 t3 ON (t1.i1 = t3.i3);**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T14:02:33.207

你有那个半结肠吗`ON posts.author=users.id;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T14:14:57.563

它只是说作者在 post 表中不存在。还是拼写错误？？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T14:08:31.850

在子句中为您的表提供别名`from`并用括号括起来会使其工作。但是混合连接仍然是一种不好的做法。

# java - 在 Rhino 中拦截 java 对象的字段访问

> ID：10483422
> 
> 赞同：6
> 
> 时间：2012-05-07T13:58:42.623
> 
> 标签：java, javascript, rhino

是否可以在执行的 JavaScript 代码中拦截 Java 对象的字段（和方法）访问？就像 JSCocoa 中允许处理属性和方法访问的委托一样。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T14:49:27.570

您可以使用 Context.setWrapFactory 来指定如何包装 Java 对象。这里显示了打印字段访问和方法调用的包装器：

InterceptWrapFactory.java

```
import org.mozilla.javascript.Context;
import org.mozilla.javascript.Scriptable;
import org.mozilla.javascript.WrapFactory;
public class InterceptWrapFactory extends WrapFactory{
    @Override
    public Scriptable wrapAsJavaObject(Context cx, Scriptable scope,
            Object javaObject, Class<?> staticType) {
        return new InterceptNativeObject(scope, javaObject, staticType);
    }
} 
```

拦截NativeObject.java

```
import org.mozilla.javascript.NativeJavaMethod;
import org.mozilla.javascript.NativeJavaObject;
import org.mozilla.javascript.Scriptable;
public class InterceptNativeObject extends NativeJavaObject {
    @Override
    public Object get(String name, Scriptable start) {
        Object res = super.get(name, start);
        System.out.println("Field get name="+name+" result="+res);
        if (res instanceof NativeJavaMethod) {
            NativeJavaMethod method = (NativeJavaMethod) res;
            return new JavaMethodWrapper(method);
        }
        return res;
    }
    public InterceptNativeObject(Scriptable scope, Object javaObject,
            Class<?> staticType) {
        super(scope, javaObject, staticType);
    }
} 
```

JavaMethodWrapper.java

```
import org.mozilla.javascript.Context;
import org.mozilla.javascript.Function;
import org.mozilla.javascript.NativeJavaMethod;
import org.mozilla.javascript.Scriptable;

public class JavaMethodWrapper implements Function {
    NativeJavaMethod method;
    public JavaMethodWrapper(NativeJavaMethod method) {
        this.method = method;
    }
    public boolean hasInstance(Scriptable instance) {
        return method.hasInstance(instance);
    }
    public Object call(Context cx, Scriptable scope, Scriptable thisObj,
            Object[] args) {
        System.out.println("Call method: "+method);
        return method.call(cx, scope, thisObj, args);
    }
    public boolean has(int index, Scriptable start) {
        return method.has(index, start);
    }
    public Scriptable construct(Context cx, Scriptable scope, Object[] args) {
        return method.construct(cx, scope, args);
    }
    public void put(int index, Scriptable start, Object value) {
        method.put(index, start, value);
    }
    public void delete(int index) {
        method.delete(index);
    }
    public Scriptable createObject(Context cx, Scriptable scope) {
        return method.createObject(cx, scope);
    }
    public boolean has(String name, Scriptable start) {
        return method.has(name, start);
    }
    public void defineConst(String name, Scriptable start) {
        method.defineConst(name, start);
    }
    public void put(String name, Scriptable start, Object value) {
        method.put(name, start, value);
    }
    public void delete(String name) {
        method.delete(name);
    }
    public Scriptable getPrototype() {
        return method.getPrototype();
    }
    public void setPrototype(Scriptable m) {
        method.setPrototype(m);
    }
    public Scriptable getParentScope() {
        return method.getParentScope();
    }
    public void setParentScope(Scriptable m) {
        method.setParentScope(m);
    }
    public Object[] getIds() {
        return method.getIds();
    }
    public Object get(int index, Scriptable start) {
        return method.get(index, start);
    }
    public Object get(String name, Scriptable start) {
        return method.get(name, start);
    }
    public String getClassName() {
        return method.getClassName();
    }
    public Object getDefaultValue(Class<?> typeHint) {
        return method.getDefaultValue(typeHint);
    }
} 
```

这是一个测试代码：

```
import java.util.Vector;

import org.mozilla.javascript.Context;
import org.mozilla.javascript.Scriptable;
import org.mozilla.javascript.ScriptableObject;

public class InterceptTest {
    public static void main(String[] args) {
        Context cx=Context.enter();
        cx.setWrapFactory(new InterceptWrapFactory());
        Scriptable root=cx.initStandardObjects();
        ScriptableObject.putProperty(root,"v", new Vector<String>());
        cx.evaluateString(root, "v.add('foo'); v.get(0)", "src", 1, null);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T07:16:00.197

作为 hog1e3 建议的替代方案，还可以实现 Scriptable 接口来拦截对类的方法/字段的调用。

# java - 编译时的 Java 代码转换

> ID：10483423
> 
> 赞同：26
> 
> 时间：2012-05-07T13:58:49.880
> 
> 标签：java, compilation, code-translation

我想在将源代码传递给编译器之前**在编译时****转换**java 源代码。换句话说，我想创建一个能够转换的**预处理器**

 ****```
"bla bla bla" 
```

进入任何其他代码，例如：

```
new MyClass("bla", 3) 
```

我的实际动机是进行字符串加密，如此[处所述](https://stackoverflow.com/questions/6547753/how-to-use-java-annotations-to-modify-source-code-before-final-compilation)

有些人建议编写自定义注释处理器，但据我了解注释：

*   它们可用于生成新的类文件，但不能在传递给编译器之前转换现有代码
*   它们似乎适用于包、类或方法级别，但不适用于方法体/实现。

有人建议使用 Spoon 或 ObjectsWeb ASM 等框架，但这些框架在现有代码库上学习和部署似乎很复杂。

我很高兴为这两种方法找到一个简单的 java 代码预处理示例。

有没有人看到任何进行代码转换的聪明方法，而无需完全改变具有多个常春藤模块的现有大型代码库？注释似乎是最好的方法，但我不明白该怎么做。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-08T09:25:31.940

我认为您可以尝试在[Project Lombok中使用的相同技术](http://projectlombok.org/)

[作者在本次采访](https://dzone.com/articles/interview-lombok)中大致解释了这一点：

> *引擎盖下发生了什么？即，注释如何导致样板文件以字节码结尾？*
> 
> **Reinier**：注解处理器 API 只允许您创建新文件，它不允许您修改其中包含注解的文件。这就是 Lombok 所做的，因此 Lombok 不使用注释处理器 API。
> 
> 相反，Lombok 仅将注解处理器 API 用作将自身注入编译过程的一种机制。所有注解处理器都在编译过程的早期初始化，Lombok 在初始化为注解处理器时会修改 javac。我们只改变一件事：AST（原始源代码，解析成树形）首先交给 Lombok，在 javac 继续之前，Lombok 会生成需要生成的任何内容。

在龙目岛是[如何工作的？](https://stackoverflow.com/questions/6107197/how-lombok-works)

也可以根据您的需要扩展 Project Lombok

*   [使用 Project Lombok 进行自定义 AST 转换](http://www.ibm.com/developerworks/java/library/j-lombok/)
*   [Project Lombok：创建自定义转换](http://notatube.blogspot.com.es/2010/12/project-lombok-creating-custom.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T15:09:17.957

有人已经在 python/jython 中编写了一个类似 C 的小型预处理器 ant 插件。你可以在[这里](http://www.slashdev.ca/javapp/)找到它。请注意，我从未使用过它，但也许它可以成为满足您需求的一个很好的起点。

google 代码中还有一个[java-comment-preprocessor](http://code.google.com/p/java-comment-preprocessor/) maven 插件（类似样式），这也可能是一个有用的起点。

祝你好运。听起来是个有趣的挑战。当然，请记住，混淆只是让提取字符串变得更具挑战性，但仍然不是不可能的。如果你真的想让它变得更加困难，那么你可能想看看加密你的字符串和/或使用 AOP。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T11:12:00.560

如果 C 预处理器就足够了，我确实设法让它在 Windows 中与 Eclipse 一起工作。它只适用于朱诺。

[https://stackoverflow.com/a/10497206/1137626](https://stackoverflow.com/a/10497206/1137626)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-27T07:53:14.010

也许重新考虑勺子？一旦你知道[抽象语法树](https://en.wikipedia.org/wiki/Abstract_syntax_tree)是什么，它就很直观了。您基本上可以导航、过滤和替换 AST 上代表您的代码的节点，直到您获得所需的转换。

如果我们有以下类：

```
public class Test {
    Object method(){
        return "bla bla bla";
    }
} 
```

您的示例可能的 Spoon 解决方案是：

```
Launcher spoon = new Launcher();
spoon.addInputResource("./src/main/java/Test.java");
spoon.buildModel();
CtClass ctClass = spoon.getModel().getRootPackage().getType("Test");
CtLiteral match = ctClass.filterChildren((CtLiteral l) -> l.getType().getSimpleName().equals("String") && l.getValue().equals("bla bla bla")).first();
Factory factory = spoon.getFactory();
match.replace(factory.createCodeSnippetExpression("new MyClass(\"bla\", 3)"));
System.out.println(ctClass); 
```

前四行构建输入程序的 Spoon 模型并检索感兴趣的类元素。

接下来要修改的文字使用过滤器检索，该过滤器返回类型为 name`"String"`和 value的第一个也是唯一的文字`"bla bla bla"`。

最后匹配的文字在 AST 中被替换为所需的代码片段。使用代码构造类将代码片段从字符串自动解析为 Spoon 模型`Factory`。

打印类模型时，会给出所需的转换：

```
public class Test {
    java.lang.Object method() {
        return new MyClass("bla", 3);
    }
} 
```****

# android - 如何配置安卓模拟器模拟HTC Mytouch Slide 4G

> ID：10483424
> 
> 赞同：0
> 
> 时间：2012-05-07T13:58:55.293
> 
> 标签：android, android-emulator

是否可以在模拟器中设置与 HTC Mytouch slide 4G 几乎相同的环境，如果可以，任何人都可以告诉我设置该环境的设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T14:16:08.090

您可以匹配屏幕分辨率/大小、内存和一些硬件，但您不能使用感知来让它使用系统映像。甚至 sense sdk 也会加载一个通用的完整库存系统映像。因此，如果您正在谈论模拟实际的 HTC 操作系统，那么不会。

# android - Android GridView 项目调整大小

> ID：10483428
> 
> 赞同：1
> 
> 时间：2012-05-07T13:59:20.987
> 
> 标签：android, gridview, imageview

我使用 GridView 来显示提要。如果条目有背景图像，则从设备或服务器加载图像。我的问题是，当加载图像时，gridview 的项目会扩展以容纳图像。我希望图像按比例缩小以适合盒子。

我尝试使用具有各种比例类型的 ImageView 并使用视图的背景。似乎没有任何效果。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T14:28:24.803

我发现的答案是，当我膨胀 XML 时，我正在使用：

```
LayoutInflater.from(context).inflate(R.layout.item, null) 
```

代替

```
LayoutInflater.from(context).inflate(R.layout.item, container, false); 
```

如果你使用第一个，膨胀的视图和容器不通信，所以视图的“layout_XXX”属性被忽略。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T20:06:16.013

Gridview 就像任何其他布局一样需要定义边界，否则它将根据内容进行调整。由于您的图像很可能具有不同的大小，因此您需要明确此边界。假设您正在为您的 gridview 使用自定义适配器，那么在 getView 中设置以下内容可能会解决您的问题：

```
imgView.setLayoutParams(new GridView.LayoutParams(100,100)); 
```

# javascript - AJAX 内容中的 JavaScript 使用 jQuery 自行引用更多 AJAX 内容

> ID：10483438
> 
> 赞同：0
> 
> 时间：2012-05-07T13:59:42.967
> 
> 标签：javascript, jquery, ajax

前几天我问了一个类似的问题，并认为我已经解决了，但现在我意识到我没有。不过，我确实从另一个问题中学到了一些有价值的东西，所以我正在创建这个新问题，而不是删除某人的答案。这次我将尝试更具体地说明我的问题。

我有一个*HTML页面，它使用自定义函数从**PHP*文件加载一些动态*AJAX*内容来调用，例如：*`jQuery.ajax`*

 *```
$('#navigation a').click(function() {
  var getPage = $(this).attr("class");
  generatePage(getPage);
});

function generatePage(pageNum) {
  $('#ajax-content').load(page.php + ' #someDiv-' + pageNum);
} 
```

因此，在这种情况下，您单击`#navigation`主页上的任何链接，它会将与其类名匹配的内容（假设在这种情况下为“1”，所以`#someDiv-1`）从 page.php 到`#ajax-content`也位于的容器中在主页上。很好。那部分有效。

当我尝试以相同的方式在检索到的*AJAX*内容中创建链接时，就会出现问题。因此，如果检索到的`#someDiv-1`内容包含如下链接：

```
<a href="#" class="4">Page 4</a> 
```

我怎样才能使它工作，以便在单击它时将其`page.php`内容转储`#someDiv-4`到主`#ajax-content`容器中？我意识到容器甚至不存在于*AJAX*内容中，那么还有其他方法可以做到这一点吗？

寻求*AJAX*专业人士！您不必将答案交给我，但我们将不胜感激朝正确方向大力推动。谢谢阅读。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T14:06:52.737

我会创建一个 jQuery 事件处理程序来查找该类名并更改该元素上的 URL。

通过这种方式，我可能会更容易：

```
<a href="#" class="linkto _4">Page 4</a> 
```

这样，您可以选择具有“linkto”类的所有元素`$(.linkto)`，并解析其他类名称以构建事件处理程序的 URL。

jQuery 的`.on()`and`.live()`将自动将事件处理程序连接到通过 AJAX 加载的内容。

或者，您可以使用 HTML5`data-`属性来保存 URL 信息而不是类名：

```
<a href="#" class="linkto" data-alt_url="_4">Page 4</a>

$('.linkto').data('alt_url') 
```*

# ios - 如何获取 Facebook 用户通过我的应用发布的帖子列表

> ID：10483440
> 
> 赞同：0
> 
> 时间：2012-05-07T13:59:52.040
> 
> 标签：ios, facebook, cocoa-touch

我想知道如何通过我的应用程序将用户完成的帖子列表或分享到他的 Facebook 墙上。

问候， 吉瓦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T14:57:47.380

在 Graph API Explorer 中使用 FQL，您可以通过以下方式获得它：

```
fql?q=SELECT post_id, type, message, description, created_time, app_id FROM stream WHERE source_id = me() AND app_id = '5085647995' 
```

这将通过 Hulu 应用返回您时间轴上的所有帖子。将其替换为您的 app_id。

请记住，`stream`默认情况下，该对象最多只能返回 30 天或 50 个帖子。

# ftp - 用于处理共享文件的 FTP 替代方案

> ID：10483441
> 
> 赞同：0
> 
> 时间：2012-05-07T13:59:55.850
> 
> 标签：ftp

我想知道 ftp 服务器的不同选项或替代方案，以便在 java 应用程序和可以编辑该文件的管理员之间共享文件。

该文件只是一个列表，可以由管理员修改，它会被已经实现的 CSV 解析器读取：

```
 String strFile = "C:\\localPath\\stopphrases.csv";

            //create BufferedReader to read csv file
            BufferedReader br = new BufferedReader( new FileReader(strFile));
            String strLine = "";
            StringTokenizer st = null;

            while( (strLine = br.readLine()) != null){
                st = new StringTokenizer(strLine, ";");
            } 
```

我唯一的想法是 ftp 服务器，但我确信还有其他我不知道的可能性。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T14:08:42.550

我不确定您想在客户端中更改多少。但也许像 DropBox 或 Google drive 这样的云服务可以工作？这样您就可以设置一个本地文件夹，该文件夹会自动同步到可以更改它的“管理员”，并且它将被同步回来。

此解决方案意味着您可能必须更改代码，如果是这样，路径将是唯一的更改。

# c - 如何在 openCL 中将 char* 类型转换为 int*

> ID：10483445
> 
> 赞同：3
> 
> 时间：2012-05-07T14:00:05.027
> 
> 标签：c, visual-studio, pointers, opencl

谁能告诉我如何在 OpenCL 内核函数中键入一个`char*`指针？`int*`我试过`((int*) char_pointer)`了，但它不工作。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-07T15:07:33.717

我认为，您必须使用正确的地址空间来限定指针。

如果您不指定地址空间，`__private`则假定，但您的源指针似乎是一个`__global`指针（来自您的评论），因此地址空间不兼容。

所以尝试使用`(__global int*)`而不是仅仅使用`(int*)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T14:34:56.677

将指针填充到联合中，使用 char* 进行初始化，将其与 int* 一起使用：

```
 union {
     char *cp;
     int  *ip;
 } ptr;

 ptr.cp = allocatedBuf;
 a[0] = *(ptr.ip); 
```

丑陋，但至少在 C 中没有演员表的伎俩。这是未定义的行为，但是嘿，你不是在心脏监视器中使用它，也不是在另一端使用核弹头，对吧？

# android - Android Admob 查询 - 月球着陆器

> ID：10483453
> 
> 赞同：0
> 
> 时间：2012-05-07T14:00:38.770
> 
> 标签：android, admob

我曾经使用旧 Lunar Lander 示例中的处理来使用 Admob 在 Android 应用程序中显示广告。但是现在当我尝试时，我在以下代码中遇到问题“LunarLander 类型的 onReceiveInterstitial(InterstitialAd) 方法必须覆盖超类方法”：

```
@Override
public void onReceiveInterstitial(InterstitialAd interstitialAd) {
  if(interstitialAd == mInterstitialAd) {
    mInterstitialAd.show(this);
  }
} 
```

如果我删除@override，我仍然会遇到问题。Activity 定义为公共类 LunarLander 扩展 Activity 实现 AdListener、InterstitialAdListener

有没有其他人经历过这个？我曾经能够让它编译，但自从我重新加载 Eclipse 后它就不会了。提前感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T22:38:12.697

这很可能是在 Google AdMob SDK 重写之前使用旧版本的 AdMob SDK。Google AdMob SDK 的 API 中没有 InterstitialAdListener。

我建议[下载](https://developers.google.com/mobile-ads-sdk/download)最新的 Google AdMob SDK 并查看有关如何开始的官方[文档。](https://developers.google.com/mobile-ads-sdk/docs/android/fundamentals)

# android - 对 Dropbox 进行身份验证使浏览器保持打开状态

> ID：10483458
> 
> 赞同：8
> 
> 时间：2012-05-07T14:00:49.177
> 
> 标签：android, authentication, webview, browser, dropbox

我试图让我的应用程序在 Dropbox 上上传一个文件，我下载了他们的 DBRoulette 测试程序，但我也发现了我现在要解释的奇怪行为

基本上，一旦您按下按钮以验证应用程序并授权它与您的 Dropbox 链接，库提供的命令就是

> > 私有 DropboxAPI mApi；
> > 
> > mApi.getSession().startAuthentication(context);

处理此命令**后，本机浏览器**将打开并显示按钮拒绝或允许接受或不接受授权，但问题是当您按下它时，应用程序会返回并显示自己，而本机浏览器位于后台，准备就绪退出应用程序后再次出现，这很烦人（尽管它仅在您第一次启动应用程序时才会出现）

ps 在我忘记之前我确实在 onResume 中使用了教程中建议的以下代码

> > session.finishAuthentication();

感谢任何能帮助我更好地理解这个问题并（希望）解决它的人，在 Webview 中重定向授权或在按下按钮并处理身份验证后关闭本机浏览器

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T18:43:02.720

不幸的是，您对此无能为力。

身份验证过程在服务器端运行，即在 Dropbox 上。这意味着 Dropbox 定义了您作为客户必须遵循的对用户进行身份验证的操作过程。[这是OAuth](http://oauth.net/)身份验证流程理念的一部分。

我自己的经历是，如果您安装了官方的 Dropbox 应用程序，该应用程序用于验证用户（而不是浏览器），并且在用户按下允许/取消按钮后也会关闭。

# c# - 如何在控制台应用程序中获取光标的位置？

> ID：10483459
> 
> 赞同：15
> 
> 时间：2012-05-07T14:01:00.963
> 
> 标签：c#, console

我希望能够检查光标的位置是否没有超过某个点。我无法通过谷歌找到任何给出文本光标位置的东西。我不太确定还能去哪里看。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-07T14:03:31.837

查看 Console 类的各种方法和属性。具体来说，使用 Console.CursorLeft 和 Console.CursorTop 可以获取和设置光标的位置。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-07T14:05:05.923

使用 Console.CursorLeft 和 Console.CursorTop

请查看此 MSDN 链接以获取更多信息

[http://msdn.microsoft.com/en-us/library/system.console.aspx](http://msdn.microsoft.com/en-us/library/system.console.aspx)

# ruby-on-rails - 来自 Acts as Taggable On 的样式 tag_list 类

> ID：10483473
> 
> 赞同：0
> 
> 时间：2012-05-07T14:01:46.243
> 
> 标签：ruby-on-rails, css, acts-as-taggable-on, acts-as-taggable

毫无疑问，我遗漏了一些明显的东西，但是我应该如何设置由 生成的单个标签的输出`<%= user.tag_list %>`？

`<%= user.tag_list, :class => 'tags' %>`不工作...

请注意，我想设置单个结果的样式，而不是整个块。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T11:37:03.217

这应该可以解决问题：

```
<% user.tag_list.each do |tag| %>
  <span class="tags"><%= tag %></span>
<% end %> 
```

# mobile - Twitter Bootstrap 弹出框/工具提示错误与移动设备？

> ID：10483474
> 
> 赞同：15
> 
> 时间：2012-05-07T14:01:58.783
> 
> 标签：mobile, tooltip, twitter-bootstrap, popover

我正在使用 Twitter Bootstrap 并在 iPad 和 iPhone 上进行测试时遇到了一些我无法修复的问题。在移动设备（至少是那些设备）上，您需要单击以启用提示或弹出窗口（如预期的那样）。问题是一旦你关闭它就永远无法关闭。如果您再次单击它，我添加了一个侦听器以将其关闭，但我很难相信默认行为不会是单击以将其删除。这是 Bootstrap 弹出框和工具提示中的错误吗？我的代码在下面 - 它似乎有效，但只有当您单击创建提示或弹出框的同一项目时 - 不在页面上的任何位置（无法使其工作）。

触发代码：

```
$(function () {
    //Remove the title bar (adjust the template)
    $(".Example").popover({ 
        offset: 10,
        animate: false,
        html: true,
        placement: 'top',
        template: '<div class="popover"><div class="arrow"></div><div class="popover-inner"><div class="popover-content"><p></p></div></div></div>'
        //<h3 class="popover-title"></h3>
        //Need to have this click check since the tooltip will not close on mobile
        }).click(function(e) {
            jQuery(document).one("click", function() {
                $('.Example').popover('hide')
        });   
    });
}); 
```

HTML：

```
<a href="javascript:void(0);" class="Example" rel="popover" data-content="This is the Data Content" data-original-title="This is the title (hidden in this example)"> 
```

提前致谢！

丹尼斯

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-11-03T17:38:10.450

我尝试*了数十种*发布到 stackoverflow 和网络其他各个角落的解决方案，以下是**唯一**对我有用的解决方案！

# 解释

[如此处](https://stackoverflow.com/a/30832684)所述，您可以对元素使用 CSS 指令，以使其可触摸设备点击。我不能告诉你为什么会这样或者那里发生了什么，但似乎就是这样。所以，我想让整个文档也可以`body`在移动设备上点击，这将允许我触摸任何地方来关闭弹出框。

# 弹出框 JS

```
$(function () {
  $('[data-toggle="popover"]').popover({ trigger: "hover"}})
}); 
```

# 方向

### 1\. 安装 Modernizr

我正在使用 rails，所以我使用了[gem](https://github.com/russfrisch/modernizr-rails)。

```
gem 'modernizr-rails' 
```

### 2\. 使用 css-directive 创建一个`touch`类

将以下内容添加到您的 CSS 中：

```
.touch {
  cursor: pointer
} 
```

### 3\. 仅在触摸设备上，将`touch`类添加到`body`

如果您希望其他元素是可点击的，而不是整个`body`，请将`touch`类添加到它们。

```
if (Modernizr.touch) {
  $( "body" ).addClass( "touch" );
} 
```

**而已！**现在，您可以在桌面上正常使用弹出框（即使使用悬停触发器），并且在移动设备上可以触摸关闭。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-03T18:59:41.360

我的 iPad 也有同样的问题。但在浏览器中它工作正常。我的解决方案是为我可以隐藏工具提示的所有可能元素添加侦听器：

```
$('*').bind('touchend', function(e){
   if ($(e.target).attr('rel') !== 'tooltip' && ($('div.tooltip.in').length > 0)){
     $('[rel=tooltip]').mouseleave();
     e.stopPropagation();
   } else {
     $(e.target).mouseenter();
   }
}); 
```

是的，为所有工具提示发送事件的开销很小，但您无法定义显示哪个元素工具提示。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-08-30T09:10:32.167

主要概念是**在移动设备上手动制作弹出框**

```
$(document).ready(function() {
    if ('ontouchstart' in window) {
        $('[data-toggle="popover"]').popover({
            'trigger': 'manual'
        });            
    }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-13T04:43:06.140

请参阅以下代码片段以使其正常工作：

```
$('[data-toggle="popover"]').popover();

$('body').on('click', function (e) {
  $('[data-toggle="popover"]').each(function () {
    //the 'is' for buttons that trigger popups
    //the 'has' for icons within a button that triggers a popup
    if (!$(this).is(e.target) && $(this).has(e.target).length === 0 && $('.popover').has(e.target).length === 0) {
      $(this).popover('hide');
    }
  });
}); 
```

这是检测主体点击并关闭页面上所有工具提示的最简单方法。

[您可以在此处](http://jsfiddle.net/mattdlockyer/C5GBU/2/)查看实时示例

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-10-07T16:45:41.693

对此[jsfiddle](http://jsfiddle.net/stereotipo/suhq88b0/18/)的解决方案，在 iOS（iPad 和 iPhone）、Android 和 Windows 上进行测试。

```
$(document).ready(function(){

    var toolOptions;
    var toolOptions2;
    var isOS = /iPad|iPhone|iPod/.test(navigator.platform);
    var isAndroid = /(android)/i.test(navigator.userAgent);

    ///////////////////////////////////////// if OS
    if (isOS){

        toolOptions = {
            animation: false,
            placement:"bottom",
            container:"body"
        };
        $('.customtooltip').tooltip(toolOptions);

        $('.customtooltip').css( 'cursor', 'pointer' );
         $('body').on("touchstart", function(e){
            $(".customtooltip").each(function () {
                // hide any open tooltips when the anywhere else in the body is clicked
                if (!$(this).is(e.target) && $(this).has(e.target).length === 0 && $('.tooltip').has(e.target).length === 0) {
                    $(this).tooltip('hide');
                }////end if
            });
        });

    ///////////////////////////////////////// if Android
    } else if(isAndroid){
        toolOptions = {
            animation: false,
            placement:"bottom",
            container:"body"
        };
        toolOptions2 = {
            animation: false,
            placement:"left",
            container:"body"
        };
        $('.c_tool1').tooltip(toolOptions);
        $('.c_tool2').tooltip(toolOptions);
        $('.c_tool3').tooltip(toolOptions2);

    ///////////////////////////////////////// if another system
    } else {
        toolOptions = {
            animation: true,
            placement:"bottom",
            container:"body"
        };
        $('.customtooltip').tooltip(toolOptions);

    }//end if system

    document.getElementById("demo").innerHTML = "Sys: "+navigator.platform+" - isOS: "+isOS+" - isAndroid: "+isAndroid;

}); 
```

```
<h6>
    first <a href="#!" title="" class="customtooltip c_tool1" data-original-title="data del toolltip numero 1">tooltip</a> 
    Second <a href="#!" title="" class="customtooltip c_tool2" data-original-title="data del toolltip numero 2">tooltip</a> 
    third <a href="#!" title="" class="customtooltip c_tool3" data-original-title="data del toolltip numero 3">tooltip</a>
</h6>

<p id="demo"></p> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-08-08T16:06:14.110

引导工具提示**v3.3.7**

**实际：**悬停时的工具提示不适用于我们项目中的*触摸*设备

**解决方案：**订阅tooltip的*show*事件并调用*mouseenter*

```
$body = $('body');

$body.tooltip({selector: '.js-tooltip'});

// fix for touch device.
if (Modernizr.touch) { // to detect you can use https://modernizr.com
  var hideTooltip = function(e) {
    tooltipClicked = !!$(e.target).closest('.tooltip').length;
    if (tooltipClicked) { return; }

    $('.js-tooltip').tooltip('hide');
  }
  var emulateClickOnTooltip = function(e) {
    tooltipsVisible = !!$('.tooltip.in').length;
    if (tooltipsVisible) { return; }

    $(e.target).mouseenter();
  }
  var onTooltipShow = function(e) {
    tooltipClicked = !!$(e.target).closest('.tooltip').length;
    if (tooltipClicked) { return; }

    $body.on('touchend', hideTooltip); 
  }
  var onTooltipHide = function() {
    $body.off('touchend', hideTooltip);
  }

  $body
    .on('touchend', '.js-tooltip', emulateClickOnTooltip)
    .on('show.bs.tooltip', onTooltipShow)
    .on('hide.bs.tooltip', onTooltipHide);
} 
```

# css - 段落中的 CSS span 标签

> ID：10483483
> 
> 赞同：2
> 
> 时间：2012-05-07T14:02:54.527
> 
> 标签：css

我必须从 a) 转到 b)：http: [//i.imgur.com/xxgV0.png](http://i.imgur.com/xxgV0.png) （绿色股票图像来自精灵）

我有以下 HTML 代码：

```
 <p class="stock"><span class="img"></span>in stock</p> 
```

并遵循 CSS 代码：

```
 p span.img {
       display:inline-block;
       width: 14px;
       height: 17px;
       padding-right: 5px;
       background: transparent url(images/page1/tho_main_sprite.png) -0px -580px;
   }

   p.stock {
       font-size: 9px;
       color: #000;
   } 
```

我试图给 p.stock 一些高度和行高，但没有结果......

非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T14:06:27.817

也许[垂直对齐](http://www.w3schools.com/cssref/pr_pos_vertical-align.asp)可以帮助

```
p span.img {
       display:inline-block;
       width: 14px;
       height: 17px;
       padding-right: 5px;
       background: transparent url(images/page1/tho_main_sprite.png) -0px -580px;

       vertical-align: bottom;
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T14:19:14.940

一种被黑的方法，但它实现了你正在寻找的东西。首先将文本“in stock”放在一个跨度中。

```
<p class="stock"><span class="img"></span><span class="line">in stock</span></p> 
```

使两个跨度都阻塞并向左浮动。还要添加行高

```
p span.img {
    display: block;
    float: left;
    width: 14px;
    height: 17px;
    padding-right: 5px;
    background: transparent url(images/page1/tho_main_sprite.png) -0px -580px;
}

p.stock span.line {
    display: block;
    float: left;
    height: 17px;
    line-height: 17px;
    font-size: 9px;
    color: #000;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T14:21:58.137

所以我的一些边距和宽度值会不正确，不知道其余的代码，但您可以轻松修复。

让我们在段落中创建两个跨度：

```
p span.img {
       display:inline-block;
       width: 14px;
       height: 17px;
       background: transparent url(images/page1/tho_main_sprite.png) -0px -580px;
       float: left;
   }

p span.txt {float: left; margin: 10px 0 0 5px;}

   p.stock {
       font-size: 9px;
       color: #000;
       clear: both;
       width: 150px;
   }

<p class="stock"><span class="img"></span><span class="txt">in stock</span></p> 
```

PS：保证金解释，它有四个参数可以接受。方向顺时针

边距：从上到下 从左到下 从右到下

# java - Android活动内部类-更改对父级的引用

> ID：10483487
> 
> 赞同：0
> 
> 时间：2012-05-07T14:03:05.307
> 
> 标签：java, android

我在活动中有一个内部类。

在 onSaveInstanceState 方法中，我将包中的内部类的一个实例保存为可序列化对象。当活动恢复时，对象被恢复。

在内部类中使用了一些外部类方法，例如 findViewById。问题是恢复的活动现在是一个不同的实例，但 MyActivity.this 仍然引用旧的实例，因此例如在 findViewById 的情况下返回错误的视图。

我知道我可以将新引用传递给内部类并使用它，但我想知道是否有办法更改引用以使其指向新实例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T14:13:40.957

抱歉，如果您正在序列化数据，则没有自动的方法来执行此操作。

我认为您最好的选择是在反序列化时更新参考。

# javascript - 保存网页以在 Web 应用程序中离线访问

> ID：10483490
> 
> 赞同：1
> 
> 时间：2012-05-07T14:03:11.273
> 
> 标签：javascript, android, web-applications, cordova, extjs

我有一个网络应用程序（sencha/phonegap），其中包含一项功能，允许用户单击链接到维基百科文章的按钮。如果设备可以访问互联网，这显然可以正常工作，但是当应用程序也离线时，我收到了许多让应用程序工作的请求。为此，我想为用户提供下载链接文章/网页以供离线访问的选项。当设备无法访问互联网时，应用程序将改为显示保存的版本（可能是陈旧/过时的，但总比没有好）。有哪些可能的方法来完成这项任务？

我的第一个想法是以某种方式使用 html 清单来缓存手机浏览器中的页面，这在 Android 浏览器上听起来可能，但 iOS 显然有 5MB 浏览器缓存限制 - 太小了。

我的下一个想法是保存所需的 html 和相关文件并将它们捆绑在应用程序中。但这似乎是一种相当繁琐的方法，应用程序变得比它需要的大得多，而且网页在应用程序安装之日就已经过时了。

使用 javascript，是否可以下载网页，然后我可以保存（例如，在 sd 卡上）以供以后访问？

还是有更优雅的方法？

如果有人能指出我正确的方向，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T14:31:36.430

在纯 Javascript 中，您可以发出[Ajax](http://www.w3schools.com/ajax/ajax_example.asp)请求来下载页面。然后您可以使用[FileWriter](http://docs.phonegap.com/en/1.7.0/cordova_file_file.md.html#FileWriter)将 responseText 写入文件系统上的文件。但是，在图像方面，这对您没有帮助。您需要使用[FileTransfer.download()](http://docs.phonegap.com/en/1.7.0/cordova_file_file.md.html#FileTransfer_download)命令来获取二进制图像文件。

如果我是你，我会：

1.  使用 AJAX 下载 html。
2.  解析 html 以查找图像。
3.  使用 FileTransfer.download 获取图像。

# android - 以编程方式删除我的应用程序 (Android)

> ID：10483493
> 
> 赞同：15
> 
> 时间：2012-05-07T14:03:25.283
> 
> 标签：android, uninstallation

我想在单击按钮时卸载我的应用程序。为此，我使用以下代码。

```
Uri packageURI = Uri.parse("package:"+packageName);
Intent uninstallIntent = new Intent(Intent.ACTION_DELETE, packageURI);
startActivity(uninstallIntent); 
```

它给了我结果，但我想直接删除而不点击对话框的“确定”按钮，消息“此应用程序将被卸载”。

我只想直接卸载应用程序。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-07T14:14:27.033

未经用户确认卸载第三方应用程序是不允许的。

正如 xDragonZ 所指出的那样，根进程可以通过删除目录并让包管理器来处理丢失来粗略地做到这一点，但这不是一个可广泛部署的解决方案，因为 AFAIK 没有设备提供这种功能来让应用程序运行它们自己的根助手进程 - 这是一个有风险的售后修改。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-09-29T05:03:40.703

是的，可以在 Android 中卸载软件包。此外，您还可以跳过要求用户在卸载屏幕上按 OK 按钮。您可以通过使用 Android 中的辅助功能服务来做到这一点。

```
public class MyAccessibilityService extends AccessibilityService {
    private static final String TAG = MyAccessibilityService.class
            .getSimpleName();

    @Override
    public void onAccessibilityEvent(AccessibilityEvent event) {
        Log.i(TAG, "ACC::onAccessibilityEvent: " + event.getEventType());

        //TYPE_WINDOW_STATE_CHANGED == 32
        if (AccessibilityEvent.TYPE_WINDOW_STATE_CHANGED == event
                .getEventType()) {
            AccessibilityNodeInfo nodeInfo = event.getSource();
            Log.i(TAG, "ACC::onAccessibilityEvent: nodeInfo=" + nodeInfo);
            if (nodeInfo == null) {
                return;
            }

            List<AccessibilityNodeInfo> list = nodeInfo
                    .findAccessibilityNodeInfosByViewId("com.android.settings:id/left_button");
            for (AccessibilityNodeInfo node : list) {
                Log.i(TAG, "ACC::onAccessibilityEvent: left_button " + node);
                node.performAction(AccessibilityNodeInfo.ACTION_CLICK);
            }

            list = nodeInfo
                    .findAccessibilityNodeInfosByViewId("android:id/button1");
            for (AccessibilityNodeInfo node : list) {
                Log.i(TAG, "ACC::onAccessibilityEvent: button1 " + node);
                node.performAction(AccessibilityNodeInfo.ACTION_CLICK);
            }
        }

    }

    @Override
    public void onServiceConnected() {
        Log.i(TAG, "ACC::onServiceConnected: ");
    }

    @Override
    public void onInterrupt() {
        // TODO Auto-generated method stub

    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-09-06T16:27:06.943

您应该首先查看 Android 本机[PackageInstaller](https://developer.android.com/reference/android/content/pm/PackageInstaller.html)。我建议您更新您使用的所有代码。

* * *

下一步是检查[PackageInstaller](https://developer.android.com/reference/android/content/pm/PackageInstaller.html)这是一个普通的类。您会在`uninstall`那里找到该功能。坏消息是，这需要`Manifest.permission.DELETE_PACKAGES`权限并且只授予系统应用程序。这意味着其他开发人员无法直接使用它。但是我们可以使用设备所有者权限访问它。

* * *

这需要：

*   Android 6.0 或更新版本
*   设备所有者卸载软件包的权限

一般来说，`DELETE_PACKAGES`许可说：

> 允许应用程序删除包。
> 
> 不供第三方应用程序使用。

一旦您的应用获得设备所有者权限，您就可以像这样卸载一个包：

```
String appPackage = "com.your.app.package";
Intent intent = new Intent(getApplicationContext(), 
getApplicationContext().getClass()); //getActivity() is undefined!
PendingIntent sender = PendingIntent.getActivity(getActivity(), 0, intent, 0);
PackageInstaller mPackageInstaller = 
getActivity().getPackageManager().getPackageInstaller();
mPackageInstaller.uninstall(appPackage, sender.getIntentSender()); 
```

此处使用的代码：

[PackageInstaller“设备所有者静默安装和卸载应用程序” - Android M Preview](https://stackoverflow.com/questions/32473158/packageinstaller-silent-install-and-uninstall-of-apps-by-device-owner-androi/37251196#37251196)

# iphone - 电子邮件中附加的数据？

> ID：10483497
> 
> 赞同：0
> 
> 时间：2012-05-07T14:03:35.730
> 
> 标签：iphone, ios, nsmutablearray, nsdata, mfmailcomposeviewcontroller

我的 NSMutableArray 数据采用 NSData 格式。我正在尝试将 NSMutableArray 数据附加到电子邮件正文。这是我的 NSMutableArray 代码：

```
 NSUserDefaults *defaults1 = [NSUserDefaults standardUserDefaults];
      NSString *msg1 = [defaults1 objectForKey:@"key5"];
      NSData *colorData = [defaults1 objectForKey:@"key6"];
      UIColor *color = [NSKeyedUnarchiver unarchiveObjectWithData:colorData];
      NSData *colorData1 = [defaults1 objectForKey:@"key7"];
      UIColor *color1 = [NSKeyedUnarchiver unarchiveObjectWithData:colorData1];
      NSData *colorData2 = [defaults1 objectForKey:@"key8"];
      UIFont *color2 = [NSKeyedUnarchiver unarchiveObjectWithData:colorData2];
      CGFloat x =(arc4random()%100)+100;
      CGFloat y =(arc4random()%100)+250;  
      lbl = [[UILabel alloc] initWithFrame:CGRectMake(x, y, 100, 70)];
      lbl.userInteractionEnabled=YES;
      lbl.text=msg1;
      lbl.backgroundColor=color;
      lbl.textColor=color1;
      lbl.font =color2;
      lbl.lineBreakMode = UILineBreakModeWordWrap;
      lbl.numberOfLines = 50;
      [self.view addSubview:lbl];
      [viewArray addObject:lbl ]; 
```

viewArray 是我的 NSMutableArray 。viewArray 中的所有数据存储都在 NSData 格式中。我尝试将此代码附加到电子邮件中的 viewArray 数据中。

```
 - (IBAction)sendEmail {
          if ([MFMailComposeViewController canSendMail])
      {
     NSArray *recipients = [NSArray arrayWithObject:@"example@yahoo.com"];
    MFMailComposeViewController *controller = [[MFMailComposeViewController 
                                        alloc] init];
     controller.mailComposeDelegate = self;
     [controller setSubject:@"Iphone Game"];
     NSLog(@"viewArray: %@", viewArray);
     NSString *string = [viewArray componentsJoinedByString:@"\n"];
     NSString *emailBody = string; 
     NSLog(@"test=%@",emailBody);
     [controller setMessageBody:emailBody isHTML:YES];
     [controller setToRecipients:recipients];
     [self presentModalViewController:controller animated:YES];
    [controller release];
  }
 else 
 { 
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Alert" 
        message:@"Your device is not set up for     email." delegate:self 
                                  cancelButtonTitle:@"OK" otherButtonTitles: nil];
[alert show];   
[alert release];
 } 
 } 
```

在这里，我看到对象存储在 viewArray.in 控制台中，它看起来像这样.. [2012-05-07 18:48:00.065 Note List[279:207] test=UILabel: 0x8250850; 帧 = (140 341; 56 19); 文本 = 'Xxxxxxx'; clipsToBounds = YES; layer = > 但在电子邮件中我只看到这个..>> 请建议任何人如何在电子邮件中附加我的 viewArray 数据。]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T14:09:21.310

在电子邮件附件中，您只能将 NSData 或字符串发送到电子邮件，现在如果您想通过字符串发送，然后获取您想要发送电子邮件的所有值，例如，lable.text、lable.color、lable.alpha 等，并使用适当的键并将其放在正文中并在那里解析，否则找到某种方法将您的对象转换为 NSData 并使用 mfmailcomposer attach data 方法附加它

阅读此内容以将 NSArray 转换为 NSData

[如何将 NSArray 转换为 NSData？](https://stackoverflow.com/questions/1286212/how-to-convert-nsarray-to-nsdata)

这将 NSData 转换回 NSArray

[如何将 NSData 转换为 NSArray？](https://stackoverflow.com/questions/6108924/how-can-i-convert-a-nsdata-to-nsarray)

然后将此数据写入文件，

```
-(void)writeDataToFile:(NSString*)filename
{
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];

    if(filename==nil)
    {
        DLog(@"FILE NAME IS NIL");
        return;
    }
    // the path to write file
    NSString *filePath = [documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat: @"%@",filename]];
    /*NSData *writeData;
     writeData=[NSKeyedArchiver archivedDataWithRootObject:pArray]; */
    NSFileManager *fm=[NSFileManager defaultManager];
    if(!filePath)
    {
        //DLog(@"File %@ doesn't exist, so we create it", filePath);
        [fm createFileAtPath:filePath contents:self.mRespData attributes:nil];
    }
    else 
    {
        //DLog(@"file exists");
        [self.mRespData writeToFile:filePath atomically:YES];
    }

    NSMutableData *resData = [[NSMutableData alloc] init];
    self.mRespData=resData;
    [resData release];
} 
```

最后使用

```
- (void)addAttachmentData:(NSData *)attachment mimeType:(NSString *)mimeType fileName:(NSString *)filename 
```

# javascript - 如何从 textarea 中获取新输入的文本？

> ID：10483506
> 
> 赞同：1
> 
> 时间：2012-05-07T14:04:11.977
> 
> 标签：javascript, dom-events, textarea

我想制作一个像 Google Wave 这样的聊天程序，它可以实时显示输入的内容。目前我只是使用文本区域。我只想知道用户对 textarea 做了什么更改（一个字符或粘贴的文本），而不必对整个 textarea 执行差异。我是`setTimeout`在`oninput`事件中使用 a 的东西，但我相信这只能给我“文本之前”和“文本之后”。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T14:10:29.740

您将要查看`key`事件：`keydown`, `keypressed`,`keyup`

[W3C 键盘事件](http://www.w3.org/TR/DOM-Level-3-Events/#events-keyboardevents)

但是您还需要考虑粘贴的文本——它可能没有按键。

一种简化事件处理的策略是有一个“提交”按钮。然后您将知道用户何时完成他们的声明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T14:20:36.577

这种类型的功能很可能使用消息批处理类型设置来完成。

以下是它的分解方式：

1.  将事件处理程序附加到文本区域以跟踪字符级别的修改（think、keydown、keypress、keyup 等）并将它们记录到消息缓冲区中

2.  您需要备份“结束事务”类型的事件，例如“onchange”、“onpaste”等。这些事件用于检查您的状态的完整性并准备好运行“完全重新同步” （例如，如果您认为自己有不匹配的情况，请向其他客户发出信号以进行完整的“拉动”）

3.  每隔一段时间（每 0.3 - 1 秒），您清空消息缓冲区并将消息重新传输到其他客户端（直接连接 [websockets？]，或通过服务器间接连接）

4.  当客户端收到消息时，他们会按照收到的顺序处理它们[希望]以相同的状态、错误或冲突回退：信号完全同步

5.  在完全同步的客户端上，应重新拉动完整状态并尝试将焦点/胡萝卜尽可能靠近最后一个位置

附带说明：这通过“区域”的概念得到了极大的简化，您可以在不影响我的区域的情况下对您的区域进行干净的完全交换......

希望这会有所帮助-ck

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T14:40:06.457

使用 setInterval 跟踪文本区域的值，并将其与自身进行比较以查看它是否发生变化。这适用于粘贴、普通按键等。

**例子：**

```
var lastVal = $("#myTextInput").val();
setInverval(function(){
    if($("#myTextInput").val() != lastVal) {
        lastVal = $("#myTextInput").val();
        // the text changed, do something with the current value (AJAX, whatever)
    }
}, 300); 
```

# ruby - 带有特殊字符的 Ruby 1.9

> ID：10483507
> 
> 赞同：2
> 
> 时间：2012-05-07T14:04:16.807
> 
> 标签：ruby, string, ruby-1.9

我有很多这样的代码行：

```
 @breadcrumb = []
@breadcrumb << ["#!", "Hladať"] 
```

它在 ruby​​ ree-1.8 中，但我可以将其更改为 1.9，但出现此错误：

```
/app/controllers/index_controller.rb:36: syntax error, unexpected $end, expecting ']'
@breadcrumb << ["#!", "Hladať"] 
```

当我删除“ť”和其他特殊字符（ľščťžýáí...）时，没关系，但我需要这些字符。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T14:12:31.427

将指定编码的“魔术注释”添加到每个具有非 ASCII 字符的 Ruby 文件的顶部：

```
# encoding: UTF-8 
```

这在 Rails 视图文件中不需要`config.encoding`设置正确（默认为 UTF-8）。您还应该阅读有关[Ruby 1.9 编码行为的](http://blog.grayproductions.net/articles/ruby_19s_three_default_encodings)更多信息。

# mongodb - 计算工作集的过程是什么？

> ID：10483508
> 
> 赞同：2
> 
> 时间：2012-05-07T14:04:22.817
> 
> 标签：mongodb

如果我在 Mongo DB 上有 100 万条记录，并且每条记录有 5 KB 大。假设我想对这些数据运行 Map-Reduce，并想估计这个应用程序所需的 RAM。在 map-reduce 操作期间，不会对该数据库进行读取或写入。map-reduce 将聚合一些记录并对聚合记录进行逻辑比较。

我想了解 map-reduce 如何将数据带入 RAM 以及如何计算工作集（例如：我是否应该假设 1 MM x 5 Kb 将是我的工作集）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T15:19:29.163

据我了解，Map-Reduce 作业的工作集将是您将在其中运行 map() 函数的整个数据集。例如，如果您的数据是 1M 对象并且您的 map() 函数查看每个文档，那么工作集将为 1M x 5K。如果您使用数据的某些子集（例如 500K 对象）为 map() 函数提供数据，那么它将是 500K x 5K。在任何一种情况下，您都必须包括任何预定义索引的大小。

# android - Android - 带有适配器支持数据的向导类型活动

> ID：10483514
> 
> 赞同：1
> 
> 时间：2012-05-07T14:04:51.227
> 
> 标签：android, android-layout, android-contentprovider

我试图找出解决Android以下问题的最佳方法。

我有来自问题对象数组形式的内容提供者的数据。Question 对象有一些文本和一个 id。每个问题有 4 个答案，这些答案将在 QuestionResponse 对象中发送回其余服务器。

我希望在视图中一次显示一个问题（用户阅读问题，选择答案，然后点击“下一个”，移动到新屏幕上的下一个问题）但我需要以相同的方式执行此操作正如 ListView 在注册内容观察者方面所做的那样（因为问题可能会在服务器上发生变化，而服务器又会在内容提供者中更新它们。）存储在内容提供者中的数据的变化应该会在它们发生时更新屏幕上的问题.

我想我需要的是一个类似于 SimpleCursorAdaptor 的东西，但不是视图是列表视图，而是视图是光标指向的行之一的全屏表示。我试过制作自己的适配器，但我对下一步要去哪里有点卡住了。这是我的适配器....

```
public class QuestionAdapter implements Adapter {

public ArrayList<Question> questions = new ArrayList<Question>();
private Context context ;

public QuestionAdapter(ArrayList<Question> questions, Context context)
{
    this.questions.clear();
    this.questions.addAll(questions);
    this.context = context;
}

public void updateQuestions(ArrayList<Question> questions)
{
    questions.clear();
    questions.addAll(questions);
}

@Override
public int getCount() {
    return questions.size();
}

@Override
public Object getItem(int arg0) {
    // TODO Auto-generated method stub
    return questions.get(arg0);
}

@Override
public long getItemId(int arg0) {
    // TODO Auto-generated method stub
    return Long.parseLong(questions.get(arg0).get_id());
}

@Override
public int getItemViewType(int arg0) {
    // TODO Auto-generated method stub
    return IGNORE_ITEM_VIEW_TYPE;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    LayoutInflater inflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View questionView = inflater.inflate(R.layout.question, parent);
    return questionView;
}

@Override
public int getViewTypeCount() {
    return 1;
}

@Override
public boolean hasStableIds() {
    // TODO Auto-generated method stub
    return true;
}

@Override
public boolean isEmpty() {
    // TODO Auto-generated method stub
    return questions.isEmpty();
}

@Override
public void registerDataSetObserver(DataSetObserver arg0) {
    // TODO Auto-generated method stub

}

@Override
public void unregisterDataSetObserver(DataSetObserver arg0) {
    // TODO Auto-generated method stub

}
} 
```

这是我的观点 question.xml。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TextView
    android:id="@+id/questionText"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginBottom="20dp"
    android:layout_weight="0.27"
    android:text="Medium Text"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<TableLayout
    android:id="@+id/tableLayout1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginBottom="20dp" >

    <TableRow
        android:id="@+id/tableRow1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <ToggleButton
            android:id="@+id/passButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textOn="Pass"
            android:textOff="Pass" />

        <ToggleButton
            android:id="@+id/advisoryButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textOn="Advisory"
            android:textOff="Advisory" />

        <ToggleButton
            android:id="@+id/defectButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textOn="Defect" 
            android:textOff="Defect"/>

        <ToggleButton
            android:id="@+id/naButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textOn="N/A"
            android:textOff="N/A" />

    </TableRow>

</TableLayout>

<Button
    android:id="@+id/next"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="right"
    android:text="Next..." />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T14:23:50.927

这是对可能起作用的有根据的猜测。

我不确定是否还有其他易于绑定到列表视图的视图，因此我将尝试修改您的示例以使用列表视图。首先，如果您将 Listview 本身设为 fill_parent 并将子项设置在 listview Fill_parent 中，那么您基本上会得到一个只能显示一个子项的列表视图。然后您可以尝试以下操作：

**改变 getCount**

我相信`getCount(...)`用于确定应该显示多少行数据。通常，我们希望将此设置为我们正在使用的 ArrayList 的计数/大小。在您的情况下，我认为您希望将其设置为 1，因为您一次只希望显示一个问题。

**为问题创建跟踪器**

您需要为当前正在处理的问题创建一个跟踪器，以便知道要显示哪个问题。为此，您需要一个简单的`int questionTracker`变量，您可以在他们每次回答/通过/跳过问题时递增。

**修改 getView(...) 以显示正确的问题**

在 getView(...) 调用中，您需要使用正确的问题填充屏幕，这将基于您的跟踪器。像这样的东西

```
@Override public View getView(int position, View convertView, ViewGroup parent) 
{     
    LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);     
    View questionView = inflater.inflate(R.layout.question, parent);     

    //Get the next question
    Question currentQuestion = questions.get(questionTracker);

    //Fill the fields in the inflated layout with the data from the Question object
    TextView questionField = questionView.findViewById(R.id.questionText)
    questionField.setText(Question.question);

    return questionView; 
} 
```

**强迫问题改变**

棘手的部分将是在您点击下一个/通过/回答问题后强制重新绘制视图。您也许可以手动调用 getView(...)，尽管我从未这样做过，所以我不确定。

# php - MySQL表存在时不存在

> ID：10483515
> 
> 赞同：0
> 
> 时间：2012-05-07T14:05:02.277
> 
> 标签：php, mysql

我有这个查询：

```
mysql_select_db('scanner');
$query = "SELECT * FROM scanner.proxy ORDER BY RAND() LIMIT 20";
$result = mysql_query($query) or die(mysql_error()); 
```

它告诉我：'scanner.proxy' 不存在.. 即使我确实有它与数据库的表。这很奇怪，因为我的其他查询有效..但这个没有。

更新：

当我把这个事件：

```
$user='root';
            $user='root'
        $password='<removed_password>';
        $dbname = 'scanner';
        $host = 'localhost';
        $link = mysql_connect($host, $user, $password) or die (mysql_error());

mysql_select_db($dbname, $link) or die (mysql_error()); 
```

它给了我这个……

> 未知数据库“扫描仪”

但我可以在 phpmyadmin 中看到扫描仪数据库

即使我在 phpmyadmin 中输入 sql 语句 SHOW TABLES FROM 'scanner'

它说它找不到扫描仪

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T18:29:55.597

我们通过在每个语句之前添加重新连接方法解决了在同一脚本中连接到多个远程**MySQL**数据库时发生的这个问题。`mysql_query`re-connect 方法调用了`mysql_connect`和`mysql_select_db`函数。我们之前曾尝试在连接语句中将新的链接参数设置为 true，但我们仍然遇到数据库错误和各种有趣的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T14:15:10.693

您已设置 $dbname = 'aws_backlinks'，但您正尝试在查询中连接到不同的数据库。更改您的连接字符串以包含此数据库，或者只是连接到服务器并在查询时设置您的数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T14:08:45.193

确保您用来连接的用户有足够的权限来查询该表。也许该表是由另一个用户创建的。

编辑：也许您需要从远程位置授予对扫描仪的访问权限。运行这个 sholud 帮助。

```
GRANT ALL ON scanner.* TO your_user@'IP_ofServer_where_PHP_runs' IDENTIFIED BY 'PASSWORD'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-14T03:17:02.217

$db_host = '本地主机：端口'; 指定本地主机的端口。我遇到了同样的问题，指定端口解决了这个问题。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-07T14:15:46.197

您缺少在 mysql_select_db() 调用中指定连接的参数（mysql_connect() 的结果）：

```
$db_host = 'localhost';
$db_username = 'root';
$db_password = 'whatever';
$db_name = 'scanner';
$link = mysql_connect($db_host, $db_username, $db_password);
mysql_select_db($db_name, $link); 
```

# excel - 如何使用宏将数据从sharepoint导入excel

> ID：10483521
> 
> 赞同：0
> 
> 时间：2012-05-07T14:05:29.063
> 
> 标签：excel, sharepoint-2010, import

我想知道是否有一种方法可以使用宏将数据从 SharePoint 导入 Excel。我想要做的是在我的共享点中有一个库，其中有一个 excel 文档。当我下载文档并打开它时，我想自动从 sharepoint 导入数据并有一些图表。

我尝试做的是使用 SharePoint 功能区导出列表的数据。然后我在记事本中打开了file.dll.iqy，希望能找到导入数据的宏。我发现的是这样的：

```
WEB
1
http://win-sharepoint:9090/sites/PPMO/_vti_bin/owssvr.dll?XMLDATA=1&List={C51D70F2-4D7B-4F20-AE05-379DA264F685}&View={8399F350-92C7-4942-  B8B0-464A735AFC72}&RowLimit=0&RootFolder=%2fsites%2fPPMO%2fLists%2fStade%20du%20projet

Selection={C51D70F2-4D7B-4F20-AE05-379DA264F685}-{8399F350-92C7-4942-B8B0-464A735AFC72}
EditWebPage=
Formatting=None
PreFormattedTextToColumns=True
ConsecutiveDelimitersAsOne=True
SingleBlockTextImport=False
DisableDateRecognition=False
DisableRedirections=False
SharePointApplication=http://win-sharepoint:9090/sites/PPMO/_vti_bin
SharePointListView={8399F350-92C7-4942-B8B0-464A735AFC72}
SharePointListName={C51D70F2-4D7B-4F20-AE05-379DA264F685}
RootFolder=/sites/PPMO/Lists/Stade du projet 
```

我试图将它保存为宏，但我得到的结果不是预期的。你知道怎么做吗？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T20:48:07.337

In Excel 2010, you can go to Data / Get External Data / From Web

Then you can browse to your SharePoint List and select your table using the helpful arrow icons.

Similarly, you can open the iqy file with Excel (enabling security on the prompt) then save the new worksheet. You can see the iqy file details under Data / Connections.

# android - Android：使用预编译库？

> ID：10483522
> 
> 赞同：2
> 
> 时间：2012-05-07T14:05:31.367
> 
> 标签：android, performance

每次我向我的 Android 项目添加一个库时，编译过程都会变慢。**有没有办法缓存（库）dex 文件，以便每次只重新编译应用程序？**理想情况下，构建过程应检查库 JAR 是否已更改，如果未更改，则应重用现有的 dex 文件。

我正在使用[nbandroid](http://www.nbandroid.org/)，但我认为 Eclipse 构建遇到了同样的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T14:32:29.950

我正在使用 Eclipse，并且有一些项目包含 2-3MB 的库，除了使用 proguard 编译和签署最终 APK 时，没有注意到任何减速。看起来 Eclipse 不会每次都重新编译库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T01:27:11.270

Android SDK（无论使用哪个 IDE）中的构建过程（尤其是在 dex 步骤）非常不灵活。dx.jar AFAIK 的唯一命令用法如下所示：

> [信息] C:\Program Files\Java\jdk1.6.0_21\jre\bin\java -Xmx1024M, -jar, C:\Program Files\Android\android-sdk\platform-tools\lib\dx.jar, - -dex, --output=C:\workspace\myproject\target\classes.dex, C:\workspace\myproject\target\classes, C:\workspace\myproject\libs\common-lib.jar, ... 。 ..

从这里您可以看到带有外部 jar 库的编译类在项目构建时被 dexed。

> **有没有办法缓存（库）dex 文件，以便每次只重新编译应用程序？**

每次构建项目时，Jar 库都会被 dexed，而不是由 Android SDK 重新编译。我不认为 Android SDK 提供了 dx.jar 的另一种命令用法，您可以使用它来仅对没有外部 jar 库的编译类进行 dex，然后合并到预先存在的 classes.dex 中（可能是上次生成的）。

这在项目构建时是不可能的，但是，它可能是题外话，但是您可能对这篇关于在运行时动态加载 jar 库的[博客](http://android-developers.blogspot.co.nz/2011/07/custom-class-loading-in-dalvik.html)感兴趣，值得一试。

# git - 我们如何在 git 中的两个分支之间同步文件？

> ID：10483524
> 
> 赞同：1
> 
> 时间：2012-05-07T14:05:32.363
> 
> 标签：git

我已经分叉了一个有许多分支的项目。我特别感兴趣的两个分支。

```
1.8.x
2.2.x 
```

我引入了一个新文件“newfile.source”并更改了两个分支中都存在的文件“existingfile.source”。我想在两个分支之间同步我在 newfile 和 existingfile 中所做的更改。

我在脑海中建模的方式是这样的：

```
commit -- commit -- commit -- commit -- commit -- commit -- commit -- 2.2.x
                            \
                             -- commit -- 1.8.x 
```

我想要一个结构（分支，但仅包含对现有文件和新文件的更改），我可以对其进行更改并合并到 1.8.x 和 2.2.x 中：

```
nothing -- custom_changes -- nothing 
```

然后执行以下操作：

```
git checkout 2.2.x
git merge custom_changes
git checkout 1.8.x
git merge custom_changes 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T14:23:02.367

只需将其提交到一个分支（像往常一样）。我更喜欢这里的更新版本（2.2.x）。然后切换到旧分支（1.8.x）并使用“反向移植”提交[`cherry-pick`](http://linux.die.net/man/1/git-cherry-pick)

# linux - 使用 pty（通过 ssh）和管道连接到更多

> ID：10483525
> 
> 赞同：1
> 
> 时间：2012-05-07T14:05:37.160
> 
> 标签：linux, shell, unix, ssh, pty

这是一个让我发疯的问题，我无法找到解决方案。我的程序：

```
#!/usr/bin/sh
ssh -t myuser@anotherhost "cat ~/severalLineFile" 
```

并且看起来像`~/severalLineFile`：`anotherhost`

```
line1
line2
line3
line4
line5
line6 
```

当我自己运行我的程序时，我的终端的输出看起来像预期的那样。但是，当调整我的终端大小使其只有 5 行，并将我的程序通过管道传输到更少时，它看起来像：

```
line1
     line2
          line3
               line4
                    : 
```

并且在该点按空格键时，它会打印出`line5`和`line6`（以及任何其他行），例如：

```
line5
line6 
```

现在我明白这是在伪终端中运行 ssh 的结果，并且由于回车符包含在换行符中而发生这种阶梯式。我已经尝试过使用`stty ocrnl`，但这并没有达到我想要的效果，即在我按下空格键后，最初打印的 less 表现得像所有东西一样。

顺便说一句，我需要`ssh`在`-t`模式下运行，因为我希望所有`ctrl+C`键盘中断都能进入远程进程。如果在这方面有解决方案，我会全力以赴。我在 Linux Server 6.1 上，终端是通过 Mac OS 10.6.8

我也尝试用 替换`\r\n`伪终端生成的`\n`，但这并不能解决问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-02-13T16:04:59.317

要删除您必须使用的额外回车符`stty -onlcr`，而不是`stty onlcr`（请参阅：[每个打印行上](http://www.censoft.com/support/kb/?p=528)的额外回车符）。

如果您先将`ssh`命令的输出通过管道传输到`cat -v`然后再传输到，会发生`less`什么？

```
ssh -t localhost "stty -echo -onlcr; cat testfile.txt; stty echo onlcr" | cat -v | less -U 
```

如果您希望`ctrl+C`键盘中断传播到远程进程，您可以通过命名管道尝试“EOF 到 SIGHUP”转换器（请参阅：[ssh 命令在 ssh 终止后意外在其他系统上继续](https://unix.stackexchange.com/a/74883)；杀死整个远程 shell 使用：`kill -HUP -- -$$`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T15:01:59.093

您的问题是 EOL 标记；MacOS 使用 CR ( `\r`aka `\x0d`) 字符，Linux 使用 LF ( `\n`aka `\x0a`)。由于支持终端绘图字符（如 CR），ssh 将它们解释为在屏幕上移动光标的字符，而不是 EOL 标记。尝试这个：

```
ssh -t myuser@anotherhost "sed -e 's,\\r,\\n,' ~/severalLineFile" 
```

或者

```
ssh -t myuser@anotherhost "tr '\\r' '\\n' < ~/severalLineFile" 
```

如果这不起作用，您可以使用`scp`将文件复制到终端：

```
scp myuser@anotherhost:severalLineFile /dev/stdout 
```

# javascript - html/javascript/php 运行脚本 onclick 复选框

> ID：10483526
> 
> 赞同：0
> 
> 时间：2012-05-07T14:05:50.303
> 
> 标签：javascript, html, function, onclick

这应该是一件很容易做的事情，但我找不到如何做的很好的参考。

我想在单击复选框后提交表单。为了使其成为一键式流程并节省用户单击复选框然后单击表单提交的步骤，我希望在单击复选框时提交表单。

我的问题是我需要调用 javascript 函数来执行此操作还是 html 可以本地执行此操作？

```
<form action="post.php" method="post"><input type="checkbox" name="done" id="done" value="1" onclick="post.php"></input></form> 
```

似乎不起作用。我是否必须调用一个javascript函数，或者我错过了一些简单的东西。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T14:08:25.470

尝试更换

```
onclick="post.php" 
```

经过

```
onclick="submit();" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T14:09:39.373

尝试`onclick="this.parentNode.submit()"`

# sharepoint-2010 - 在站点定义上激活 Web 范围的功能

> ID：10483527
> 
> 赞同：1
> 
> 时间：2012-05-07T14:05:50.633
> 
> 标签：sharepoint-2010

我正在创建一个具有网络范围功能的站点定义，该功能在当前站点上创建一个子站点。当用户根据该定义创建站点时，我想在站点上激活此功能。

该功能在我激活时正常工作，问题是当我尝试根据定义创建站点时出现以下错误：

此场中未安装 ID 为“Id”的功能，因此无法将其添加到此范围。

我试图将范围更改为农场，但它让我出现错误“部署步骤'添加解决方案'中发生错误：无法将'Microsoft.SharePoint.Administration.SPWebService'类型的对象转换为'Microsoft.SharePoint.SPWeb' "，另外，我想把这个功能放在农场范围内是没有意义的。

我的站点定义“网络功能”节点包含：

```
 <WebFeatures>
            <Feature ID="6e512cb1-1a3f-43d6-a756-55c1a9eadd2c" />
    </WebFeatures> 
```

我的特征接收器方法是：

```
 public override void FeatureActivated(SPFeatureReceiverProperties properties)
    {
        SPWeb web = (SPWeb)properties.Feature.Parent;
        if (!web.Webs["subsite1"].Exists)
        {
            web.Webs.Add("subsite1");
            web.Update();
        }
    } 
```

如果有人需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-14T22:48:48.247

打开功能设计器并选择范围：WebApplication

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-07T12:57:20.277

```
<SiteFeatures>

    <Feature ID="C85E5759-F323-4EFB-B548-443D2216EFB5" />

    <Feature ID="A392DA98-270B-4e85-9769-04C0FDE267AA" />

    <Feature ID="7C637B23-06C4-472d-9A9A-7C175762C5C4" />

</SiteFeatures>

<WebFeatures>

    <Feature ID="00BFEA71-DE22-43B2-A848-C05709900100" />

    <Feature ID="00BFEA71-E717-4E80-AA17-D0C71B360101" />

</WebFeatures>

<Modules>

    <Module Name="Home" />

</Modules> 
```

# javascript - wget vs 使用 QtWebkit 加载页面

> ID：10483529
> 
> 赞同：0
> 
> 时间：2012-05-07T14:05:52.257
> 
> 标签：javascript, webkit, wget

我试图了解使用 QtWebkit 和`wget`命令的简单加载页面的结果输出之间的区别，除了 QtWebkit 有一个大型 API，我们可以在网页中使用它来用 Python 做很多事情。

a 的过程是什么，`wget`它如何下载包含所有组件（图像等）的网页。两个进程的输出大小有区别吗？

`onload`最后一个问题：使用 QtWebkit（除了事件处理程序）在加载页面中正在执行什么（javascript ）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T14:46:01.003

默认情况下，wget 不会检索任何页面必需品，除非您通过[`-p`/`--page-requisites`或`-r`/`--recursive`标志](http://man.cx/wget)告诉它。它不处理任何 JavaScript 命令，也不会尝试对标记或 CSS 做任何事情，除非您明确告诉它这样做。即便如此，我很确定它只是使用简单的字符串匹配来确定资源名称和链接 URL。总而言之，除非您正确配置它（几乎所有强大的 *NIX 工具的基础），否则它是非常愚蠢的。

由于 WebKit 库非常广泛，因此了解您正在尝试使用它做什么会很有用，例如您正在执行什么代码。但是，既然你已经知道你正在做的是执行 JavaScript 调用，那么可以合理地假设它所做的不仅仅是检索页面。

也许如果您提供一些您正在尝试做的事情的例子，我将能够更彻底地回答您的问题。

# android - 系统运行 OutOfMenory 时，android 框架不会调用 Activity 的 public void onLowMemory() 方法

> ID：10483532
> 
> 赞同：7
> 
> 时间：2012-05-07T14:06:15.740
> 
> 标签：android

我从大图像创建位图可绘制对象，当时发生 OutOfMemory 错误。Activity.onLowMemory() 方法应该被调用，但实际上它不是被框架调用的。

是否有任何解决方案，或者是否有任何其他方法可以在 android 中捕获 OutOfMemory 错误？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-07T14:13:04.223

这不是 onLowMemory 的工作方式。当整个系统内存不足时调用它，而不是你的应用程序，所以你不能用它完全避免 OOM。更多细节[在这里](http://developer.android.com/reference/android/app/Application.html#onLowMemory%28%29)。
另请参阅 Romain Guy 的博客文章，了解有关内存泄漏的更多信息：[链接](http://www.curious-creature.org/2008/12/18/avoid-memory-leaks-on-android/)

至少有数百个问题如何在 Stackoverflow 上处理位图：

[Android Bitmap Memory Leak, 怎么办](https://stackoverflow.com/questions/5734892/android-bitmap-memory-leak-what-to-do-more)
[Bitmap, Bitmap.recycle(), WeakReferences, and Garbage Collection](https://stackoverflow.com/questions/4959485/bitmap-bitmap-recycle-weakreference-and-garbage-collector)
[Android 自定义视图 Bitmap 内存泄漏](https://stackoverflow.com/questions/4197794/android-custom-view-bitmap-memory-leak)

# iphone - 如何查找 mapview 引脚是否重叠和缩放？

> ID：10483539
> 
> 赞同：2
> 
> 时间：2012-05-07T14:06:37.120
> 
> 标签：iphone, objective-c, ios, mkmapview, mkannotation

如果有多个重叠的引脚并且它们不只是想显示一些详细信息页面，我想放大。

我想出了一个解决方案，但它大部分时间都有效，但并非总是如此

```
- (void)mapView:(MKMapView *)mapView didSelectAnnotationView:(MKAnnotationView *)view{
     MKMapPoint annotationPoint = MKMapPointForCoordinate(view.annotation.coordinate);
    MKMapRect mRect = self.mapView.visibleMapRect;
    MKMapRect pointRect = MKMapRectMake(annotationPoint.x, annotationPoint.y, (mRect.size.width/view.frame.size.width)*[self.mapView currentZoomLevel]*10 , (mRect.size.height/view.frame.size.height)*[self.mapView currentZoomLevel]*10 );    
    NSLog(@"point rect origin %f ..%f.....size %f....%f",pointRect.origin.x, pointRect.origin.y, pointRect.size.width, pointRect.size.height);
    NSSet * AnnSet = [self.mapView annotationsInMapRect:pointRect];
    NSLog(@"annotations obtained :%i",[[AnnSet allObjects] count]);
    //    [self.mapView setVisibleMapRect:pointRect animated:YES];

    NSLog(@"max zoom level :%i",[self.mapView currentZoomLevel]);
    if ([[AnnSet allObjects] count]>1 && [self.mapView currentZoomLevel]<19 ) {//zoom it
        [self.mapView setCenterCoordinate:view.annotation.coordinate zoomLevel:[self.mapView currentZoomLevel]+1 animated:YES];
        [self.mapView deselectAnnotation:view.annotation animated:NO];
    }
    else{
  //Show detail page
}
} 
```

问题似乎是我如何生成pointRect。

```
MKMapRect pointRect = MKMapRectMake(annotationPoint.x, annotationPoint.y, (mRect.size.width/view.frame.size.width)*[self.mapView currentZoomLevel]*10 , (mRect.size.height/view.frame.size.height)*[self.mapView currentZoomLevel]*10 ); 
```

欢迎任何形式的帮助:)

# access-token - 将存储的 Twitter access_tokens 与 Twitterizer 一起使用

> ID：10483542
> 
> 赞同：0
> 
> 时间：2012-05-07T14:06:52.817
> 
> 标签：access-token, twitterizer

我正在使用 C3 和最新的 twitterizer api。我设法让用户对我的 Twitter 应用程序进行身份验证和授权，之后我只保留 access_token、access_token_secret 和 access_token_verifier。

我现在遇到的问题是，当用户返回时（在稍后阶段，cookie 被删除/过期），他们使用我们自己的凭据系统标识自己，然后我尝试查看他们的 twitter 凭据是否仍然有效。我通过调用以下方法来做到这一点

```
OAuthTokens t = new OAuthTokens();
t.ConsumerKey = "XXX"; // my applications key
t.ConsumerSecret = "XXX";// my applications secret
t.AccessToken = "XXX";// the users token from the DB
t.AccessTokenSecret = "XXX";//the users secret from the DB

TwitterResponse<TwitterUser> resp = TwitterAccount.VerifyCredentials(tokens); 
```

这是我得到的错误：“错误”：“无法使用 OAuth 进行身份验证。”，“请求”：“/1/account/verify_credentials.json”

我知道我的令牌是有效的，因为如果我调用这个方法：

```
TwitterResponse<TwitterUser> showUserResponse = TwitterUser.Show(tokens, CORRECT_SCREEN_NAME_HERE); 
```

传入我的屏幕名称和相同的 OAuth 令牌，它会正确返回。

有任何想法吗？

C# -> v4.0.30319 Twitterizer
-> 2.4.0.2028

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T22:38:27.763

在您的代码中，您将标记定义为`t`，但是当您调用时，`VerifyCredentials`您正在传递它`tokens`。这只是您的示例代码中的错误吗？

# gdb - 在 GDB 中的第一条机器代码指令处停止

> ID：10483544
> 
> 赞同：76
> 
> 时间：2012-05-07T14:07:04.820
> 
> 标签：gdb, reverse-engineering

将可执行文件加载到 gdb 后，如何在执行第一条指令之前在入口点中断？

我正在分析的可执行文件是一段经过加密的恶意软件，因此`break main`完全没有任何作用。

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2018-02-02T18:01:46.613

从 GDB 8.1 开始，有一个特殊的命令：`starti`. 示例 GDB 会话：

```
$ gdb /bin/true
Reading symbols from /bin/true...(no debugging symbols found)...done.
(gdb) starti
Starting program: /bin/true 

Program stopped.
0xf7fdd800 in _start () from /lib/ld-linux.so.2
(gdb) x/5i $pc
=> 0xf7fdd800 <_start>: mov    eax,esp
   0xf7fdd802 <_start+2>:       call   0xf7fe2160 <_dl_start>
   0xf7fdd807 <_dl_start_user>: mov    edi,eax
   0xf7fdd809 <_dl_start_user+2>:       call   0xf7fdd7f0
   0xf7fdd80e <_dl_start_user+7>:       add    ebx,0x1f7e6 
```

* * *

## 回答 #2

> 赞同：74
> 
> 时间：2012-05-07T14:15:56.507

该`info files`命令可能会为您提供一个可以中断的地址：

```
(gdb) info files
    ...
    Entry point: 0x80000000
    ...
(gdb) break *0x80000000
(gdb) run 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2017-05-01T16:02:54.797

这个 hack 已经过时了`starti`，但如果你被旧的 GDB 卡住了，它会很有用。

不费吹灰之力的解决方案是使用失败的副作用来设置断点：

```
$ gdb /bin/true
Reading symbols from /bin/true...(no debugging symbols found)...done.
(gdb) b *0
Breakpoint 1 at 0x0
(gdb) r
Starting program: /bin/true 
Warning:
Cannot insert breakpoint 1.
Cannot access memory at address 0x0

(gdb) disas
Dump of assembler code for function _start:
=> 0xf7fdd800 <+0>:     mov    eax,esp
   0xf7fdd802 <+2>:     call   0xf7fe2160 <_dl_start>
End of assembler dump.

(gdb) d 1       # delete the faulty breakpoint 
```

（您需要**`delete`先到无效断点**，然后才能继续或单步执行。）

从[这个答案中得到的想法 RE.SE](https://reverseengineering.stackexchange.com/a/8748/2434)。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-05-07T14:16:07.450

" `b _start`" 或 " `b start`" 可能会或可能不会起作用。如果没有，使用 readelf/objdump 找出入口点地址并使用“ `b *0x<hex address>`”。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-04-18T08:21:06.010

> 将可执行文件加载到 gdb 后，如何在执行第一条指令之前在入口点中断？

`int main()`您可以找到在使用之前和之后调用了哪些函数`set backtrace past-main on`，在它们上设置断点并重新启动程序：

```
>gdb  -q  main
Reading symbols from /home/main...done.
(gdb) set backtrace past-main on
(gdb) b main
Breakpoint 1 at 0x40058a: file main.cpp, line 25.
(gdb) r
Starting program: /home/main

Breakpoint 1, main () at main.cpp:25
25        a();
(gdb) bt
#0  main () at main.cpp:25
#1  0x0000003a1d81ed1d in __libc_start_main () from /lib64/libc.so.6
#2  0x0000000000400499 in _start ()
(gdb) b _start
Breakpoint 2 at 0x400470
(gdb) r
The program being debugged has been started already.
Start it from the beginning? (y or n) y
Starting program: /home/main

Breakpoint 2, 0x0000000000400470 in _start () 
```

# aem - 在 CQ5 中获取默认选中复选框

> ID：10483546
> 
> 赞同：17
> 
> 时间：2012-05-07T14:07:09.703
> 
> 标签：aem

我试图在编辑时在组件对话框上设置一个默认选中复选框。以下是该字段的属性：

```
jcr:primaryType: widget
checked: true (boolean) *Documentation says this determines default checked status
type: checkbox (string) *read this as a fix to making checkbox selections stick
xtype: selection (string)
name: ./foo (string)
fieldValue: true (string) 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-08T14:44:03.837

是的，看起来[文档](http://dev.day.com/docs/en/cq/current/widgets-api/index.html)有点不稳定。我做了一些实验，这种属性组合对我有用：

```
defaultValue (String) true
fieldLabel (String) Foo Mode
inputValue (String) false
jcr:primaryType (Name) cq:Widget
name (String) ./foomode
type (String) checkbox
xtype (String) selection 
```

defaultValue 属性似乎是关键。

您确实有 cq:Widget 作为您的主要类型，而不是小部件，不是吗？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-16T18:27:16.583

要将其保存为布尔值...

```
<nodeName
jcr:primaryType="cq:Widget" 
fieldLabel="check this nodename" 
name="./nodeName" 
defaultValue="{Boolean}false" 
type="checkbox"
xtype="selection" />

<nodeNameHint
  jcr:primaryType="cq:Widget"
  ignoreData="{Boolean}true"
  name="./nodeName@TypeHint"
  value="Boolean"
  xtype="hidden"/> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-03-18T05:30:29.200

要将复选框设置为默认值已选中*并将*属性保存为 JCR 中的布尔属性类型（而不是字符串），请使用以下经典 UI 设置：

```
<myCheckbox
    jcr:primaryType="cq:Widget"
    fieldLabel="My Checkbox"
    name="./myCheckbox"
    value="true"
    defaultValue="true"
    checkboxBoolTypeHint="{Boolean}true"
    type="checkbox"
    xtype="selection"/> 
```

或者在 Granite Touch UI 中使用以下设置：

```
<myCheckbox
    jcr:primaryType="nt:unstructured"
    sling:resourceType="granite/ui/components/foundation/form/checkbox"
    text="My Checkbox"
    name="./myCheckbox"
    value="true"
    checked="true"/>
<myCheckboxType
    jcr:primaryType="nt:unstructured"
    sling:resourceType="granite/ui/components/foundation/form/hidden"
    name="./myCheckbox@TypeHint"
    value="Boolean"/> 
```

在[http://www.nateyolles.com/blog/2015/11/aem-checkboxes-using-sling-post-servlet](http://www.nateyolles.com/blog/2015/11/aem-checkboxes-using-sling-post-servlet)上有详细的文章和演示。

# ios - 如何以编程方式在 iOS 和 OS X 应用程序之间进行交互？

> ID：10483548
> 
> 赞同：1
> 
> 时间：2012-05-07T14:07:14.930
> 
> 标签：ios, macos, cocoa-touch, cocoa

这听起来可能有点奇怪，所以我必须告诉你我*为什么*要制作这个应用程序。我刚买了一台非常旧的 iMac，它的处理能力非常低。我正在尝试为我的 iPod Touch 制作一个应用程序，让它充当 OS X Panther 的外部处理器。我几乎所有事情都解决了，但我需要 iPhone 能够直接与我正在制作的 OS X 应用程序交互，就像 iTunes 一样。

需要明确的是，我只希望 iPod 作为外部处理器工作，方法是将数据从我的 OS X 应用程序移动到 iPod 应用程序，完成代码块，然后将其发送回（这是最简单的部分）。它不必与任何其他 OS X 应用程序一起使用。我需要知道的是如何通过电缆将数据直接发送到我的 iOS 应用程序。如果无法做到这一点，我有一个备份数据传输解决方案，但电缆会快得多。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T14:21:37.060

Good idea, don't post good idea's online ;-)

I'm going to tell you up front; unless you are lucky I don't think you will be able to get this to work.

I know that someone once found out that iTunes uses some kind of daemon program to communicate with your iDevices. I'm not sure if this is still true, but that daemon is undocumented but 'available'. I have no more clues than this, maybe you get lucky and find something on Google.

I'd go with wireless communication, I don't think speed is such an issue if we're talking about small instruction sets.

Also [there's this](http://redpark.com/c2db9.html), but I'm not sure if that will be of any help to you.

UPDATE: found this post: [Where is the mount point for the iPod/iPhone in Mac?](https://stackoverflow.com/questions/5844586/where-is-the-mount-point-for-the-ipod-iphone-in-mac) Which should help you write to the iDevice disk. You should be able to continuously look for filesystem updates on your device to process the data, and vice versa, to establish some kind of transfer system.

# iphone - 来自 iPhone 的 Rails 后端的 POST 请求

> ID：10483550
> 
> 赞同：2
> 
> 时间：2012-05-07T14:07:16.650
> 
> 标签：iphone, ruby-on-rails-3, session, backend, authenticity-token

我想从我的 iPhone 应用程序向我的 rails 后端执行 POST 请求。但是，我无权访问真实性令牌，这使我无法执行此操作。我正在浏览互联网上的一些资源，并找到了[这些幻灯片](http://www.slideshare.net/sujee/iphone-clientserver-app-with-rails-backend-v3)。

在第 19 页，作者说这个问题可以通过禁用真实性令牌或使用基于 db 的会话来解决。

按照关于[这个问题](https://stackoverflow.com/questions/2588241/rails-sessions-current-practices-especially-for-rails-3)的说明，我已经将我的 rails 应用程序设置为使用基于 db 的会话。但我不明白如何用这种技术绕过真实性令牌。谁能给我解释一下？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T08:13:27.380

> 但我不明白如何用这种技术绕过真实性令牌。谁能给我解释一下？

这应该回答您的问题 [如何忽略 Rails 中特定操作的真实性令牌？](https://stackoverflow.com/questions/1177863/how-do-i-ignore-the-authenticity-token-for-specific-actions-in-rails)

# c++ - 使用 std::tr1::bind 或 std::tr1::mem_fn 时，将使用什么替代 std::not1

> ID：10483555
> 
> 赞同：3
> 
> 时间：2012-05-07T14:07:38.493
> 
> 标签：c++, stl, functor

我有一个我的类 Foo 的智能 ptr 向量：

```
struct Foo
{
  Foo() : mEnabled( false ) {}

  bool mEnabled;

  bool isEnabled() const { return mEnabled; }
  void setEnabled( bool inEnabled ) { mEnabled = inEnabled; }
  /* ... */
};

typedef std::tr1::shared_ptr< Foo > tFooPtr;

typedef std::vector< tFooPtr > tFooVec; 
```

我有这个工作得很好：

```
 tFooVec foo_vector; // insert couple of elements
 size_t count = count_if( foo_vector.begin(), foo_vector.end(), std::tr1::mem_fn( &Foo::isEnabled ) ); 
```

但是当我想 count_if “禁用” Foo 对象时使用什么功能性“助手”

```
 size_t count = count_if( foo_vector.begin(), foo_vector.end(), std::not1( std::tr1::mem_fn( &Foo::isEnabled ) ) ); // does not compile 
```

上面的行不编译：

```
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/bits/stl_algo.h:446: error: no match for call to '(std::unary_negate<std::tr1::_Mem_fn<bool (Foo::*)()const> >) (std::tr1::shared_ptr<Foo>&)'
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/bits/stl_function.h:322: note: candidates are: bool std::unary_negate<_Predicate>::operator()(const typename _Predicate::argument_type&) const [with _Predicate = std::tr1::_Mem_fn<bool (Foo::*)()const>]
make: *** [src/shared_ptr_tests.o] Error 1 
```

（在 Linux 上使用 g++ 4.1.2）

我认为编译问题来自于`std::not1`使用`std::unary_negate`需要提供的函数/谓词的事实`Predicate::argument_type`。后者在谓词源自 sigh 时`std::unary_function` *给出*

话虽如此，我假设`std::tr1::mem_fn`既不使用`std::unary_function`也不提供`argument_type`.

我现在使用的解决方案是，我现在使用 boost::bind 而不是 std::tr1::bind

```
#include <boost/bind.hpp>
using namespace boost;
...
size_t countboost = count_if( foo_vector.begin(), foo_vector.end(), !( bind( &Foo::isEnabled, _1 )) ); 
```

为了避免复杂化（和混乱），我在我的代码中用 boost::bind 替换了 std::tr1::bind 的使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T14:25:21.753

!boost::bind(... 为我工作：

```
 bool test(int i)
  {
    return i < 2;
  }

  TEST( boost_bind_test, negateTest )
  {
    std::vector<int> vec;
    vec.push_back(1);
    vec.push_back(2);
    vec.push_back(3);

    ASSERT_EQ(2, count_if( vec.begin(), vec.end(), !boost::bind(&test, _1)));
  }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T15:53:56.913

潜在的问题是`mem_fun(isEnabled)`需要 a `const Foo *`，而算法`count_if`将 a 传递`shared_ptr<Foo>`给它的谓词。

我不完全确定为什么它适用于`mem_fn( &Foo::isEnabled )`，但不适用于`not1(mem_fn( &Foo::isEnabled ))`. 我能想到的是，额外的包装器需要进行不同的转换。但你可以解决它：

```
bool sharedEnabled(tFooPtr x) {
  return x->isEnabled();
}

size_t count2 = std::count_if( foo_vector.begin(), foo_vector.end(), std::not1( std::ptr_fun(&sharedEnabled ) ) ); 
```

# android - 没有价值强制的 Edittext 关闭我的应用程序

> ID：10483556
> 
> 赞同：0
> 
> 时间：2012-05-07T14:07:40.360
> 
> 标签：android, integer, android-edittext

当我的 edittext 上有 Int 并且按下 OK 按钮时，我正在强制关闭。

05-07 16:00:12.945: E/AndroidRuntime(28366): java.lang.NumberFormatException: 无法将“”解析为整数

这就是我得到的 logcat 错误。

这是代码：

```
//Button OK

Button bOK = (Button) findViewById(R.id.bOK);
bOK.setOnClickListener(new View.OnClickListener() {

    public void onClick(View v) {
        // TODO Auto-generated method stub

        Toast invalid = Toast.makeText(getApplicationContext(), "Only values between 0-255 will be accepted.", Toast.LENGTH_LONG);
        uin = Integer.parseInt(value.getText().toString());

        if ( uin <= 255 ) {
            Process process = null;
            try {
                process = Runtime.getRuntime().exec("su");
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            DataOutputStream os = new DataOutputStream(process.getOutputStream());
            try {
                os.writeBytes("chmod 644 sys/class/leds/button-backlight/brightness\n");
                os.writeBytes("echo " +uin+ " > sys/class/leds/button-backlight/brightness\n");
                os.writeBytes("chmod 444 sys/class/leds/button-backlight/brightness\n");
                os.writeBytes("exit\n");
                os.flush();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        } else if ( uin > 255 ) {
            invalid.show(); 
        }
    }
}); 
```

`EditText`如果(uin missing) 显示 toast上没有值输入，我如何告诉应用程序，而不是强制关闭？:D

请对我温柔，这是我使用java和android的第二周，我之前从未有过任何编程语言经验:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T14:11:31.520

你需要包围线 uin = Integer.parseInt(value.getText().toString()); 像这样的 try/catch 块

```
try {
    uin = Integer.parseInt(value.getText().toString());
} catch(NumberFormatException e){
    //do something here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T14:20:27.153

set your Edittext in .xml

```
android:inputType="number" 
```

and try to enclose with Try-catch block like

```
try {
    uin = Integer.parseInt(value.getText().toString());   
} catch(Exception e) {
    e.printStackTrace();
} 
```

using `e.printStackTrace();` u can find which Exception occur at this stage.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T14:13:11.213

也许您应该捕获抛出的异常：

```
try {
    uin = Integer.parseInt(value.getText().toString());
} catch (NumberFormatException exception) {
    //What to do if the exception is thrown...
    [... Your code ...] 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T14:11:18.850

只需检查您的editext是否为空，如果它是然后捕获异常，并且它没有继续执行您想要做的事情。

# php - 如何避免 SQL 查询检查 IS NULL 的误报？

> ID：10483557
> 
> 赞同：2
> 
> 时间：2012-05-07T14:07:46.450
> 
> 标签：php, sql, sql-server

如何避免 SQL 查询检查 IS NULL 的误报？

我似乎通过添加`if(sqlsrv_has_rows`声明纠正了我的误报。

PHP：

```
/*

IF select of 1900 datein has rows
update datein

IF select of 1900 dateout has rows
update dateout

IF select of 1900 datein AND dateout no rows
insert datein

*/
$datein_s="SELECT TOP 1 datein FROM clocked WHERE datein='1900-01-01 00:00:00' AND userid=? ORDER BY datein DESC";
$datein_sr=sqlsrv_query($dbconnect,$datein_s,$params) or die("Error datein:".print_r(sqlsrv_errors(),true));
$datein=sqlsrv_fetch($datein_sr);
if(sqlsrv_has_rows($datein_sr)===FALSE)
{
$datein="NOROWS";
}
else
{
$datein="HASROWS";
}

$dateout_s="SELECT TOP 1 dateout FROM clocked WHERE dateout='1900-01-01 00:00:00' AND userid=? ORDER BY dateout DESC";
$dateout_sr=sqlsrv_query($dbconnect,$dateout_s,$params) or die("Error dateout:".print_r(sqlsrv_errors(),true));
$dateout=sqlsrv_fetch($dateout_sr);
echo $dateout;
if(sqlsrv_has_rows($dateout_sr)===FALSE)
{
$dateout="NOROWS";
}
else
{
$dateout="HASROWS";
}

if($datein==="HASROWS")
{
$datein_q1="UPDATE clocked SET datein=GETDATE() WHERE EXISTS(SELECT TOP 1 datein FROM clocked WHERE datein='1900-01-01 00:00:00' AND userid=? ORDER BY datein DESC);";
$datein_qr1=sqlsrv_query($dbconnect,$datein_q1,$params) or die("Error update datein:".print_r(sqlsrv_errors(),true));
echo "Datein and out are HASROWS";
}
else if ($dateout==="HASROWS")
{
$dateout_q1="UPDATE clocked SET dateout=GETDATE() WHERE EXISTS(SELECT TOP 1 dateout FROM clocked WHERE dateout='1900-01-01 00:00:00' AND userid=? ORDER BY dateout DESC);";
$dateout_qr1=sqlsrv_query($dbconnect,$dateout_q1,$params) or die("Error update dateout:".print_r(sqlsrv_errors(),true));
echo "Dateout NOROWS";
}
else if ($datein==="NOROWS"&&$dateout==="NOROWS")
{
$datein_q2="INSERT INTO clocked(datein,userid) VALUES(GETDATE(),?);";
$datein_qr2=sqlsrv_query($dbconnect,$datein_q2,$params) or die("Error insert datein:".print_r(sqlsrv_errors(),true));
echo "Datein and Dateout NOROWS";
}
else
{
echo "ERROR your query may be broken!";
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T15:21:25.057

我似乎通过添加 if(sqlsrv_has_rows 语句来纠正我的误报。

# javascript - jquery - fancybox - 以“/”开头的 URL 的语法错误

> ID：10483568
> 
> 赞同：1
> 
> 时间：2012-05-07T14:08:31.760
> 
> 标签：javascript, jquery, jquery-plugins, fancybox

我正在使用 Fancybox 2.0.6 和 jQuery 1.7.2，当我使用以斜杠开头的 href url 时，出现以下错误：

```
Syntax error, unrecognized expression: /path/to/load 
```

如果我删除斜线，它会起作用。显然，我得到了 404，但打开了幻想框。

是的，我确实需要网址以斜杠开头。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T12:21:50.387

您必须将此属性添加到您的链接：data-fancybox-type="iframe"

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T08:33:16.803

我在带有 Fancybox 2.0.5 的 jQuery 1.7.1 中有类似的问题。

在我的测试中，不仅开头的斜线，斜线前的字母“a”或一个或多个点也会导致同样的问题。似乎输入其他字母或更多字母“a”可以正常工作。

我通过在“href”属性中使用**绝对路径来解决它。**另一种解决方案，您可以尝试 Fancybox 的“href”选项。（[文件](http://fancyapps.com/fancybox/#docs)）

我已经尝试过了，发现使用`$(this).attr('href')`可以正常工作，即使路径是相对的并且以斜杠开头。

我试过的代码：

```
$('.fancybox').fancybox({
    href: $(this).attr('href')
}); 
```

2012 年 7 月 3 日更新：

我发现我上面尝试的代码并不总是有效，并在[这里](https://github.com/fancyapps/fancyBox/issues/290#issuecomment-6735140)做了一些演示。使用“类型”选项时似乎没有错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T15:43:40.073

这是一个较旧的线程，但在 Google 上仍然更高。您可以查看在 Github 上为 Fancybox 提交的错误：

[https://github.com/fancyapps/fancyBox/issues/290](https://github.com/fancyapps/fancyBox/issues/290)

> 笔记！如果 fancyBox 无法获取内容类型，将显示错误消息（这与以前使用 'ajax' 作为默认类型的版本不同）。

这意味着您需要指定请求的类型（'ajax'、'iframe'、'inline'）：

前任：

```
$('.fancybox').fancybox({
     type: 'ajax'
}); 
```

或者

```
$('.fancybox').fancybox({
     type: $.support.ajax? 'ajax':'iframe'
}); 
```

# javascript - 使用 JavaScript 链接放大标记

> ID：10483569
> 
> 赞同：2
> 
> 时间：2012-05-07T14:08:40.180
> 
> 标签：javascript, maps

我是谷歌地图和 JavaScript 的初学者。

我正在使用 Maps API V3 在谷歌地图上创建一个随机标记，我想在包含所有标记 ID 的一侧创建一个列表，因此当我单击标记 ID 时，它会放大，在地图上显示标记。具体来说，我想知道如何在 javascript 中创建该链接

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T16:19:11.987

这个答案是从初学者到初学者的；）我喜欢 benastan 对简洁性和闭包应用的回答，但我仍然想通过编写函数来展示一种更“基本”的方法。

我觉得没有资格谈论闭包和函数作用域，但我可以根据经验说，这些闭包“包装器”可以防止循环或其他函数中调用的函数出现意外行为。一个这样的错误可能是循环迭代器值最终都是相同的值（最后一次迭代）或未定义。[（我自己的例子）](https://stackoverflow.com/questions/10095371/object-creation-in-loop-broken-unrolled-works)

完整代码链接：http: [//jsfiddle.net/WaWBw/](http://jsfiddle.net/WaWBw/)

单击地图以放置标记，然后单击侧面的标记或链接放大。

```
 function addMarker(pos) {
    var marker = new google.maps.Marker({
      map: map,
      position: pos
    });
    markers.push(marker);
    count = markers.length - 1;
    addMarkerListener(marker, count, 6);
    makeDiv(count, 4, "Marker #");
    count++;
  }

  function addMarkerListener(marker, index, zoomLevel) {
    google.maps.event.addListener(marker, 'click', function(event) {
      zoomIn(index, zoomLevel);
    });
  }

  function makeDiv(index, zoomLevel, content) {
    document.getElementById("sidebar").innerHTML += '<div onclick="zoomIn(' + index + ',' + zoomLevel + ')">' + content + ' ' + index + '</div>';
  }

  function zoomIn(index, zoomLevel) {
    map.setCenter(markers[index].getPosition());
    map.setZoom(zoomLevel);
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T14:45:55.263

假设您有一组 lat/lng 坐标：

```
var coords = [[32, -70], [50, -10], [0, 20]]; 
```

循环遍历坐标，在地图上绘制标记并生成列表项。**同时**绑定点击处理程序：

```
var tpl = '<a href="javascript: void(0)">Click here to view a point</a>';
// Loop through coordinates.
for (var i in coords) {
    // Create a closure.
    (function() {
        var pt = coords[i],
            latlng = new google.maps.LatLng(pt[0], pt[1]),
            marker = new google.maps.Marker({
                position: latlng,
                map: map // variable containing your google map.
            }),
            elm = document.createElement('li');
        elm.innerHTML = tpl;
        // When you click the list item, set map center to latlng of marker.
        elm.onclick = function() {
            map.setCenter(latlng);
        };
        document.body.appendChild(elm);
    })();
} 
```

# php - 优化插入数百万条记录，MySQL 和 PHP

> ID：10483572
> 
> 赞同：4
> 
> 时间：2012-05-07T14:08:46.160
> 
> 标签：php, mysql, performance, performance-testing, mysql5

我需要用 PHP 函数生成的随机 SHA-1 哈希值填充 MySQL 表。我试图通过将其拆分为 10000 个块来优化插入。我的问题是：以下方法有效吗？这是代码。

```
//MySQL server connection routines are above this point
if ($select_db) {
$time_start = microtime(true);
//query
$query = 'INSERT INTO sha1_hash (sha1_hash) VALUES ';
for ($i=1; $i<1000001; $i++) {
 $query .= "('".sha1(genRandomString(8))."'),";
    $count++;
    if ($count ==10000) {
    //result
 $result = mysql_query(rtrim($query,',')) or die ('Query error:'.mysql_error());
    if ($result) mysql_free_result($result);
    $count = 0;
    }
}

$time_end = microtime(true);
echo '<br/>'. ($time_end - $time_start);
}

//function to generate random string
function genRandomString($length)
{
$charset='abcdefghijklmnopqrstuvwxyz0123456789';
$count = strlen($charset);
 while ($length--) {
  $str .= $charset[mt_rand(0, $count-1)];
 }
return $str;
} 
```

编辑：`$time_start`and`$time_end`变量仅用于性能测试目的。MySQL表也只有两个字段：`ID int(11) UNSIGNED NOT NULL AUTO_INCREMENT`和`sha1_hash varchar(48) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL`，引擎是`MyISAM` EDIT2：计算机硬件观点与问题无关。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T14:36:53.213

插入通常以大批量完成，因为每次插入后都会更新索引。批处理允许您插入许多记录，然后只在最后而不是在每行之后更新索引一次。

但是，在自动递增主键索引的情况下，必须扩展索引才能添加新行，因此您没有保存任何内容，因为您没有任何其他索引。

批处理还节省了解析查询和锁定的一些开销。但是，您也可以考虑使用参数化查询 (PDO)。

使用 PDO 的参数化查询一次插入一条记录也会非常快，因为 MySQL 只需解析一次查询，从那时起，它使用行数据的低开销二进制传输。

您可以在插入开始之前锁定表`LOCK TABLES`。这将节省一点表锁开销。

Also, since SHA1 will always be 40 character hex encoded ASCII value, you should consider using `CHAR(40)` instead of `VARCHAR()`. This will speed things up as well. Also, if the SHA1 column is indexed, use a single-byte character set instead of UTF8 to reduce the size of the index and speed things up.

# perl - 如何在 Cygwin 中安装 Perl 库？

> ID：10483574
> 
> 赞同：39
> 
> 时间：2012-05-07T14:08:55.950
> 
> 标签：perl, cygwin, perl-module

我是 C/C++/Java/Unix 行业的极客，但现在我必须在 Windows 中编写 Perl 程序。所以我安装了 Cygwin，安装了 EPIC 的 Eclipse，并运行了简单的测试程序。我没有可以运行 Eclipse 的 Unix 机器。

但是我需要使用`Net::TCP::Server`，我不知道如何安装它。它似乎不是 Cygwin Perl 安装的一部分，我不想花 5 天时间学习 Perl 和 CPAN 以及 Perl 配置的世界。我只想写我的程序。

在 Cygwin 中安装 Perl 模块的任何简单方法？我在想像这样的东西`apt-get install`会很好，但我希望这太过分了。

谢谢

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-05-07T14:24:16.157

```
$ perl -MCPAN -e shell
cpan shell -- CPAN exploration and modules installation (v1.9402)
Enter 'h' for help.

cpan[1]> install Net::TCP::Server 
```

使用命令列出配置很有指导`o conf`意义。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-09-08T09:52:02.397

看到这里的一些信息有点过时而且太复杂，我宁愿建议以下。有几种不同的 Perl 包管理器正在使用中。它们都安装了`cpan`（这已经是 Cygwin Perl 安装的一部分），如下所示：

```
# Install ppm (outdated)
cpan PPM 

# Install cpanp (still used)
cpan CPANPLUS

# Install cpanm (most recent)
cpan App::cpanminus 
```

然后你可以安装任何你喜欢的 Perl 包，例如在 OP 中，使用`cpanm`：

```
cpanm Net::TCP::Server 
```

有时（如上所述）Cygwin 可能无法通过某些测试。例如，在仅配置了 IPv4 的机器上使用 IPv6 时，或者当您的 Windows 防火墙阻止某些测试时等。要尝试安装，请尝试使用*force*标志；`-f`.

```
cpanm -f Net::TCP::Server 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-07T22:28:41.273

> 我是一名 C/C++/java unix 极客，但现在我必须在 windows 中编写一个 perl 程序。所以我安装了 cygwin，安装了 EPIC 的 eclipse，并运行了简单的测试程序。我没有可以运行 eclipse 的 unix 机器。

您应该能够在没有 Cygwin 的情况下在 Windows 下使用 EPIC 运行 Eclipse。我在很多方面都喜欢 Cygwin，但它并不是一个非常稳定的平台。Eclipse 作为 Java 程序运行，因此您所要做的就是确保在您的 PC 上安装了 Java。甚至还有一个预构建的 Eclipse 包。

您还可以获得在 Windows 下运行的像样的 Perl。ActivePerl[或](http://activestate.com)草莓[Perl](http://strawberryperl.com)。尽管许多 Unix 负责人更喜欢 Strawberry Perl，但任何一个都可以工作，因为它具有与 Cygwin 相同的 MIGW 环境，并且许多人认为它与 Unix Perl 兄弟更兼容。但是，ActiveState Perl 可以使用包含预构建模块的 Perl 包管理器 (PPM)。不幸的是，您想要的模块无法通过 PPM 获得。

> 但是我需要使用 Net::TCP::Server 并且我不知道如何安装它。它似乎不是 cygwin perl 安装的一部分，我不想花 5 天时间学习 perl 和 cpan 以及 perl 配置的世界。我只想写我的程序。

从 CPAN 安装非常简单。第一次运行 CPAN 时，它几乎应该自行配置。然后，要进行安装，您运行`cpan install Net::TCP::Server`，应该就是这样。但是，我已经在几台 Mac、Unix 和 Linux 机器上进行了尝试，但我无法让它工作。因此，这与其说是 Windows 问题，不如说是这个模块的问题。它相当陈旧，在新版本的 Perl 中可能无法正常工作。您可能不得不强制安装超过测试的反对意见。

也许您可以改用Perl 附带的已安装的[IO 模块之一。](http://perldoc.perl.org/index-modules-I.html)这将为您省去一大堆麻烦，因为所需的模块是 Perl 现有包的一部分。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-03-16T00:09:13.960

尽管有 Cygwin 的“问题”，但每当我必须使用 Windows 时，我都会经常使用它。我建议首先使用 perlbrew 安装一个单独的 Perl 安装，这样您就不会干扰 Cygwin 的 Perl 副本，以防万一发生不好的事情，因为 Cygwin 不强制执行 root 用户策略。在 cygwin shell 中，键入

```
\curl -L http://install.perlbrew.pl | bash 
```

这应该完成 perlbrew 的安装并将其设置在您的可执行路径之一中。下一个类型

```
perlbrew init
perlbrew install --force stable
perlbrew switch stable 
```

稍等片刻薄荷 Perl 编译。由于未知的原因，Perl 只能通过 Cygwin 上 99.23% 的核心模块测试（至少在我的机器上），因此 --force 标志）。我的经验是，它主要与处理设备文件有关，例如端口和管道。我不知道有人试图解决这个问题，因为它看起来像是一个 Cygwin 问题。尽管对于一般系统和 Web 编程任务对我来说并没有太大问题。如果存在任何问题，模块测试例程将失败，所以我不会为此烦恼。

下一步是安装cpanm（cpanminus），输入

```
perlbrew install-cpanm 
```

从现在开始，要从 CPAN 安装任何库，只需键入

```
cpanm [library::name1] [library::name2] 
```

cpanm 使安装任何 Perl 模块变得轻而易举。您甚至可以从本地目录而不是 CPAN 安装。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-11T17:39:45.370

您的里程可能会有所不同，但是我遇到了很多麻烦，直到我意识到 Strawberry perl 在我的 PATH 中有很多 bin 文件夹，并且当我将 .bashrc 更改为仅导出一个非常简单的 PATH=/bin:/usr/bin :/usr/local/bin，Cygwin 的 perl 安装的 cpan 开始运行良好。我使用 local:lib 因为 Cygwin 不支持 sudo。在它进入一个坏循环之前，一遍又一遍地说“按空格键退出补丁”。

# jquery - 加载时的css3转换

> ID：10483578
> 
> 赞同：0
> 
> 时间：2012-05-07T14:09:13.183
> 
> 标签：jquery, css, onload

我尝试在我的页面上创建一个 css3 过渡效果，但我需要使用 jquery 在加载时开始过渡，所以我写了这个：

```
#igrac1 {
    width:120px;
    height:100px;
    float:left;
    border:2px solid;
    border-color:#FFF;  
  border-radius:5px;  
  box-shadow:0 0 5px rgba(0,0,0,0.4);  
  -moz-box-shadow:0 0 5px rgba(0,0,0,0.4);  
  -webkit-box-shadow:0 0 5px rgba(0,0,0,0.4);
    background-color:#F00;
}
.css {
    background:#000000;
}

    </style>
<script type="text/javascript">

$(document).ready(function() {
    $('#igrac1')
        .css({"opacity":0})   // Set to 0 as soon as possible – may result in flicker, but it's not hidden for users with no JS (Googlebot for instance!)
        .delay(200)           // Wait for a bit so the user notices it fade in
        .css({"opacity":1});  // Fade it back in. Swap css for animate in legacy browsers if required.
});

</script> 
```

和课外：

```
<div id="igrac1" class="css"></div> 
```

在身体标签中......但没有工作负载。这是为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T14:20:30.867

add `display:none;` to the id. then `fadeIn()`, see working example

[http://jsfiddle.net/efortis/UfTQd/](http://jsfiddle.net/efortis/UfTQd/)

```
#igrac1 {
    width:120px;
    height:100px;
    float:left;
    border:2px solid;
    border-color:#FFF;  
    border-radius:5px;  
    box-shadow:0 0 5px rgba(0,0,0,0.4);  
    -moz-box-shadow:0 0 5px rgba(0,0,0,0.4);  
    -webkit-box-shadow:0 0 5px rgba(0,0,0,0.4);
    background-color:#F00;

    /*note this line*/ display:none;
}​

$(document).ready(function () {
   $('#igrac1').fadeIn();    
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T14:12:06.993

```
$('#igrac1').fadeOut(10).delay(200).fadeIn(); 
```

你也可以试试这个：

```
.css {
    background:  #000000;
    display: none;
} 
```

接着

```
$('#igrac1').fadeIn(); 
```

# salesforce - 我们可以在 SOSL 查询中建立关系吗

> ID：10483579
> 
> 赞同：0
> 
> 时间：2012-05-07T14:09:14.250
> 
> 标签：salesforce, apex-code

我想使用 SOSL 来获取关系值？

```
List<List<SObject>> searchList = [FIND :mySearchText IN ALL FIELDS 
                              RETURNING 
                                 Account (id, name,phone, BillingStreet,BillingCity,BillingState, ownerID.Alias,ownerID.MobilePhone )]; 
```

我收到一个错误

```
Save error: Didn't understand relationship 'ownerID' in field path. If you are attempting to use a custom relationship, be sure to append the '__r' after the custom relationship name. Please reference your WSDL or the  describe call for the appropriate names. 
```

我做错了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T14:15:56.150

您可以访问关系，但您需要使用`Owner.UserField`而不是`OwnerId.UserField`.

这应该适合你：

```
List<List<Account>> searchList = [FIND 'test' IN ALL FIELDS RETURNING 
    Account (id, name, phone, BillingStreet, BillingCity, BillingState, 
    OwnerId, Owner.Alias, Owner.MobilePhone)];

system.debug(searchList[0][0].Owner.Alias);
system.debug(searchList[0][0].Owner.MobilePhone); 
```

# python - 如何告诉 py2app 使用/包含 32 位 Python（用于 wxPython）？

> ID：10483580
> 
> 赞同：1
> 
> 时间：2012-05-07T14:09:15.653
> 
> 标签：python, wxpython, osx-lion, 32bit-64bit, py2app

我正在使用 OS X Lion (10.7.3)，并且正在尝试使用`wxPython`和`py2app`.

我尝试使用 Lion 附带的 Python 2.7.1。

我得到了`wxPython2.8`二进制文件（wxPython2.8-osx-unicode-py2.7）。

我`py2app`是通过 pip 安装的。

这是我的小测试应用程序：

```
#!/usr/bin/python
import wx
app = wx.App()
frame = wx.Frame(None, -1, 'test.py')
frame.Show()
app.MainLoop() 
```

这是我的`setup.py`：

```
from setuptools import setup
setup(
    app=["test.py"],
    setup_requires=["py2app"],
) 
```

wxPython 2.8 想要 32 位模式，所以我使用`arch`命令：

```
arch -i386 /usr/bin/python2.7 test.py 
```

**如何告诉 py2app 使用/包含 32 位 Python？**

可以手动交换应用程序包中的相关文件，但这是一个相当笨拙的解决方法。我也可以使用 64 位 wxPython2.9，但还没有稳定的版本可用。我应该切换到`cx_Freeze`? 这里的最佳做法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T15:42:17.557

如果您安装了 64 位 Python，那么它将创建一个 64 位应用程序。
如果您安装了 32 位 Python，那么它将创建一个 32 位应用程序。

如果你都安装了，那么创建的内容将取决于 Python 从哪里收集它的库，32 位或 64 位安装文件夹。
在 Windows 上，这取决于实际运行的 Python 可执行文件。这取决于您的系统或用户 PATH 设置中的第一个。

当您键入**python setup.py**时，Windows 运行**python.exe**从命令行运行 python.exe 取决于您的**PATH**环境变量。如果您在资源管理器中双击**setup.py** ，则运行哪个取决于您与**.py**文件的文件关联。

您可以轻松地让 setup.py 通过从任意实例中生成一个 32 位 python 实例来确保运行正确。

# objective-c - 如何将（aiff）文件转换为在 Windows 操作系统上运行的任何格式（.asf、.asx、.avi、.wav、.wax、.wma、.wm、.wmv）？

> ID：10483582
> 
> 赞同：0
> 
> 时间：2012-05-07T14:09:25.793
> 
> 标签：objective-c, cocoa-touch, mp3, audiotoolbox, caf

我正在开发一个 iPhone 项目，并且想要保存 mp3 文件而不是汽车，我编写了这段代码以将记录文件保存在 .caf 扩展名中：

```
NSMutableDictionary* recordSetting = [[NSMutableDictionary alloc] init];
    [recordSetting setValue :[NSNumber numberWithInt:kAudioFormatAppleIMA4] forKey:AVFormatIDKey];
    [recordSetting setValue:[NSNumber numberWithFloat:44100.0] forKey:AVSampleRateKey]; 
    [recordSetting setValue:[NSNumber numberWithInt: 2] forKey:AVNumberOfChannelsKey];
    NSString *recorderFilePath =[NSString stringWithFormat:@"%@/%@.caf",  DOCUMENTS_FOLDER,fileName]; 
```

我试过这个：

```
[recordSetting setValue :[NSNumber numberWithInt:kAudioFormatMPEGLayer3] forKey:AVFormatIDKey];
 NSString *recorderFilePath =[NSString stringWithFormat:@"%@/%@.mp3", DOCUMENTS_FOLDER,fileName]; 
```

但它没有保存为 mp3 格式！它是在目标 c 中可用还是有任何第三方代码可以实现，我在 AudioToolbox.framework 中看到了该方法：

```
OSStatus AudioConverterConvertBuffer (
AudioConverterRef  inAudioConverter,
UInt32             inInputDataSize,

const void         *inInputData,

UInt32             *ioOutputDataSize,

void               *outOutputData

); 
```

欢迎任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T14:27:13.863

有一个开源项目[la脚](http://lame.sourceforge.net/)。挑战在于让它适用于 iPhone。 [这](http://tinsuke.wordpress.com/2011/02/17/how-to-cross-compiling-libraries-for-ios-armv6armv7i386/)将为 ios 的交叉编译指明方向。

另请注意，它是 GPL。

# c# - 使用 WinForm UI 样式的 WinForm 中的 WPF

> ID：10483583
> 
> 赞同：0
> 
> 时间：2012-05-07T14:09:28.760
> 
> 标签：c#, wpf, winforms, winforms-interop

我正在考虑在我的 WinForms 项目中使用 WPF 控件。我很想知道 WPF 控件是否有可能与我的其他 WinForms 控件具有相同的 UI 样式。例如，这是一个 WPF 属性网格 - 请注意，控件 UI 样式看起来与常规属性网格的样式不同（例如数字上下控件）。

![在此处输入图像描述](../Images/bb8026e4b52b44d791441c2cbce8ba98.png)

# groovy - groovy 元类替换超类方法

> ID：10483585
> 
> 赞同：6
> 
> 时间：2012-05-07T14:09:35.227
> 
> 标签：groovy, metaprogramming, metaclass

有没有办法使用元类对象替换，这是一个超类的方法。例子：

```
class A {
    def doIt(){
        two()
        println 'do it!'
    }
    protected two(){   
        println 'two'
    }
}

class B extends A{
    def doLast(){
        doIt()
    }
}

B b = new B();
b.doIt()
/*
 * two
 * doit!
 */
b.metaClass.two = {
    println 'my new two!'
}
b.doIt();
/*
 * my new two!
 * do it!
 */ 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-07T15:31:30.053

由于`two`和`doIt`在同一个类中声明，groovy 将跳过此调用的元对象协议。您可以通过将超类标记为 来覆盖此行为[`GroovyInterceptable`](http://groovy.codehaus.org/api/groovy/lang/GroovyInterceptable.html)，这会强制*所有*方法调用通过`invokeMethod`。例如：

```
class A implements GroovyInterceptable {
    def doIt(){
        two()
        println 'do it!'
    }
    protected two(){   
        println 'two'
    }
}

class B extends A {
    def doLast(){
        doIt()
    }
}

B b = new B()
b.doIt()  // prints two
b.metaClass.two = {
    println 'my new two!'
}
b.doIt() // prints my new two! 
```

# java - 带有 TabHost 问题的上下文菜单

> ID：10483591
> 
> 赞同：1
> 
> 时间：2012-05-07T14:09:47.777
> 
> 标签：java, android

我有一个带有 2 个片段的 TabHost，两个列表。onCreateContextMenu 对两者都适用，但是 onContextItemSelected 都“指向”第一个 Fragment 类。我为 XML 文件中的列表使用了不同的名称，因此 ID 不一样。

这是 onCreateContextMenu 的代码

```
@Override
    public void onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo menuInfo) {
        super.onCreateContextMenu(menu, v, menuInfo);
        AdapterView.AdapterContextMenuInfo info = (AdapterView.AdapterContextMenuInfo) menuInfo;
        int itemID = info.position;

        Map m = (HashMap) this.listView.getAdapter().getItem(itemID);

        menu.setHeaderTitle(getString(R.string.options));
        menu.add(0, v.getId(), 0, activity.getString(R.string.delete));
    } 
```

这里 onContextItemSelected 用于第一个 Fragment，第二个几乎是相同的代码，只是更改了 var 名称。事实上，这并没有改变任何问题，因为这个方法只在第一个 Fragment 上运行，即使我在第二个列表上也是如此。

```
@Override
    public boolean onContextItemSelected(MenuItem item) {
        ContextMenuInfo menuInfo = (ContextMenuInfo) item.getMenuInfo();
        AdapterView.AdapterContextMenuInfo info = (AdapterView.AdapterContextMenuInfo) menuInfo;
        int itemID = info.position;
        Map m = (HashMap) this.listView.getAdapter().getItem(itemID);
        processId = Integer.parseInt(m.get("processId").toString());

        activity.setSupportProgressBarIndeterminateVisibility(true);
        runBackground(activity.getString(R.string.accessingECM), false, false, ACTION_REMOVE);
        return true;
    } 
```

这就是我在 onActivityCreated 方法上注册上下文菜单的方式。请注意，onCreateContextMenu 适用于这两个片段。

```
listView = (ListView) this.view.findViewById(R.id.listProcess);
        registerForContextMenu(listView); 
```

我试图将 menu.add() 的第一个和第三个参数更改为 (1,1) 和 (1,2)。还尝试将两者都设为 Menu.NONE。还是不行。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T14:54:53.230

对于 tabhost（根据我的经验），您需要在 tabhost 的活动中设置一个 onCreateContextMenu 并使用开关来获取适当的菜单/操作。

例子：

```
// ***************************************************************
// Create the various context menus depending on which list it is from
// ***************************************************************
@Override
public void onCreateContextMenu(ContextMenu menu, View v,
        ContextMenuInfo menuInfo) {
    super.onCreateContextMenu(menu, v, menuInfo);
    switch (v.getId()) {
    case R.id.list1: {
        menu.setHeaderTitle("Tool CC Menu");
        menu.add(0, v.getId(), 0, "Edit/Add Cutter Comp Info");
        menu.add(0, v.getId(), 0, "Clear Cutter Comp Info");
        break;
    }
    case R.id.list2: {
        menu.setHeaderTitle("WPC Menu");
        menu.add(0, v.getId(), 0, "Edit WPC Info");
        menu.add(0, v.getId(), 0, "Clear WPC Info");
        break;
    }
    }
}
// ***************************************************************
// Create the various context menu actions based on which list
// ***************************************************************
@Override
public boolean onContextItemSelected(MenuItem item) {
    AdapterContextMenuInfo info = (AdapterContextMenuInfo) item
            .getMenuInfo();
    cc_id_int = (int) info.id;
    if (item.getTitle() == "Edit/Add Cutter Comp Info") {
        showDialog(CCEDIT_DIALOG_ID);
    } else if (item.getTitle() == "Clear Cutter Comp Info") {
        showDialog(CLEARCC_DIALOG_ID);
    } else if (item.getTitle() == "Edit WPC Info") {
        removeDialog(WPCEDIT_DIALOG_ID);
        showDialog(WPCEDIT_DIALOG_ID);
    } else if (item.getTitle() == "Clear WPC Info") {
        showDialog(CLEARWPC_DIALOG_ID);
    }
    return super.onContextItemSelected(item);
} 
```

希望这可以帮助！

# php - 关联数组到嵌套集

> ID：10483594
> 
> 赞同：0
> 
> 时间：2012-05-07T14:10:10.327
> 
> 标签：php, nested-sets

我正在尝试获取关联数组的嵌套集数据。该数组需要作为嵌套集存储在 mysql 数据库中。我想获取嵌套集数据的数组：嵌套集实现的链接 [http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/](http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/)

```
Array
(
    [NEOPLASMS OF MATURE T CELLS OR NK CELLS] => Array
        (
            [Adult T-cell leukemia/lymphoma] => Array
                (
                    [1] => Helper T cell
                    [2] => HTLV-1 provirus present in tumor cells
                    [3] => Adults with cutaneous lesions, marrow involvement, and hypercalcemia; occurs mainly in Japan, West Africa, and the Caribbean; aggressive
                )

            [Peripheral T-cell lymphoma, unspecified] => Array
                (
                    [4] => Helper or cytotoxic T cell
                    [5] => No specific chromosomal abnormality
                    [6] => Mainly older adults; usually presents with lymphadenopathy; aggressive
                )

            [Anaplastic large-cell lymphoma] => Array
                (
                    [7] => Cytotoxic T cell
                    [8] => Rearrangements of ALK
                    [9] => Children and young adults, usually with lymph node and soft-tissue disease; aggressive
                )

            [Extranodal NK/T-cell lymphoma] => Array
                (
                    [10] => NK-cell (common) or cytotoxic T cell (rare)
                    [11] => EBV-associated; no specific chromosomal abnormality
                    [12] => Adults with destructive extranodal masses, most commonly sinonasal; aggressive
                )

            [Mycosis fungoides/Sézary syndrome] => Array
                (
                    [13] => Helper T cell
                    [14] => No specific chromosomal abnormality
                    [15] => Adult patients with cutaneous patches, plaques, nodules, or generalized erythema; indolent
                )

            [Large granular lymphocytic leukemia] => Array
                (
                    [16] => Two types: cytotoxic T cell and NK cell
                    [17] => No specific chromosomal abnormality
                    [18] => Adult patients with splenomegaly, neutropenia, and anemia, sometimes, accompanied by autoimmune disease
                )

        )

) 
```

我想要的数组输出：

```
Array
(
    [0] => Array
        (
            [0] => NEOPLASMS OF MATURE T CELLS OR NK CELLS
            [1] => 1
            [2] => 26
        )

    [1] => Array
        (
            [0] => Adult T-cell leukemia/lymphoma
            [1] => 2
            [2] => 9
        ) 
```

.............. 等等。

)

这是我被困在的地方：

```
 class nested_data
{
    var $nc = 1;
    var $map;
    var $nest = array();

    function make_nest()
    {
        array_walk($this->map, array($this,"fetch_nest_data"));
        foreach($this->map as $map)
        {
            array_walk($map,array($this,"fetch_nest_data"));
        }

    }

    function fetch_nest_data($val,$key)
    {
        $content = (is_array($val)) ? $key : $val;
        $lft = $this->nc++;
        $rgt= (is_array($val)) ? (count($val, COUNT_RECURSIVE) + $this->nc) : $this->nc++;
        $this->nest[]=array($content,$lft,$rgt);
    }

} 
```

谢谢您的帮助 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T02:45:12.557

我所做的是创建一个嵌套集管理器，它具有 addChild()、addSibling()、moveNodeUp()、moveNodedown()、setNodePosition() 等方法或函数。从那里你可以循环遍历一个数组、文本文件表示等，然后很快地将它们变成一个嵌套集。最难的部分是分解所有的小节点移动。

# jquery - 当描述位于同一 td 中的两行时，表固定列不起作用

> ID：10483599
> 
> 赞同：1
> 
> 时间：2012-05-07T14:10:30.327
> 
> 标签：jquery, html, css

我尝试创建一个具有固定列的表，但我遇到了各种各样的问题。例如：位置不对，因为可以很容易地将固定列与 tbody 表的其余部分区分开来，如果我调整浏览器的大小，固定列会破坏表格设计。固定列的 td 的背景颜色与 tbody 的其余部分不同，最重要的是列的描述显示在同一 tr td 的更多行上，固定列的 td 高度将保持小于其余部分tr 从我的示例中可以看到最后一个 tr。谁能帮我这个？

```
Please check my fiddle: 
```

[http://jsfiddle.net/Ksb2W/81/](http://jsfiddle.net/Ksb2W/81/)

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T13:40:44.657

好的，所以你可以稍微设置一下

```
<table id='main'>

    <tr>
        <td>
            <div>
                use this div to define width of the viewable area
                <table>
                    this is your table with the data
                </table>
            </div>
        </td>
        <td>action table here, don't need special positioning</td>
    </tr>

</table> 
```

使用定义的宽度，如果您使用 % 那么您需要将其应用于两个表，以便它们都调整大小，但我认为定义的宽度会更好。如果您不理解我的代码，请告诉我

# windows-7 - Selenium grid 2 over cygwin

> ID：10483601
> 
> 赞同：1
> 
> 时间：2012-05-07T14:10:35.390
> 
> 标签：windows-7, cygwin, selenium-grid

好的，这是一个棘手的问题。我正在尝试使用一些 Windows 7 VM 设置 Selenium Grid 2 来运行 Webdriver 测试。为了自动化整个过程，我使用了一些通过 ssh 连接到 VM 的 ant 脚本来启动/停止/重新配置节点。

一切正常，节点可以向集线器主机注册并执行测试。唯一的问题是在测试运行期间我没有看到任何浏览器窗口。可以看到进程，看到正在执行的测试日志，但是没有图形界面。

另一方面，如果我通过 Windows 手动启动节点，一切正常。

我想问题是在cygwin下执行的进程无法启动Windows显示，但在这种情况下，不应该抛出错误吗？我在想的另一个选择是Webdriver使用HTMLunit作为后备，但是......为什么只要测试持续并消耗CPU和内存，我就会看到firefox进程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T14:34:44.893

通过 ssh，您只能与 Windows 的 stdin、stdout 和 stderr 流进行交换。ssh 连接正在隧道化这些流，仅此而已。你看不到 Windows 桌面界面，*但*桌面对象存在于 Windows 机器上，程序（这里是浏览器）连接到它，所有的 GUI 交互都在那里。

1.  如果 GUI 不需要任何用户交互，那么一切都很好。对话框被创建，程序运行，一旦完成，对话框被应用程序销毁并且应用程序关闭。就我们的应用程序的 GUI 而言，没有什么是阻塞的。

2.  如果您的程序需要在已创建但不可见的对话框中执行用户操作，您的程序将在那里等待您的交互继续进行。您将在任务管理器中看到该过程，除了等待之外什么都不做。由于您无权访问创建和虚拟“显示”对话框的 Windows 桌面，因此程序似乎挂起。

典型的情况 2 是，如果您远程运行程序等待用户做某事，比如记事本。您可以启动记事本，它会被生成，然后它会等待您输入一些文本或关闭它。

在您的 Selenium 测试中，您是第一种情况：使 GUI 工作所需的所有浏览器交互实际上都是由 Selenium 服务器完成的，该服务器为您执行导航点击和程序退出。他们的 GUI 实际上是通过浏览您的测试 Web 服务器来实现的，您只是看不到它。

[Microsoft 网站上有关Desktops](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682573%28v=vs.85%29.aspx)和[Desktop Creation](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687105%28v=vs.85%29.aspx)的一些进一步阅读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T14:51:49.590

如果您想查看测试并获得有效的屏幕截图，则需要让用户登录并且这些测试需要以该用户身份运行。一切都必须通过该单个桌面会话运行，因此您无法使用 RDP 远程连接到计算机。最好的办法是使用 VNC，因为它会连接到已经建立的会话。

# php - 使用 Curl 和 PHP 将多部分 PUT 上传到 REST 端点

> ID：10483606
> 
> 赞同：3
> 
> 时间：2012-05-07T14:11:00.630
> 
> 标签：php, http, rest, curl

我需要使用 PHP 和 Curl 的多部分 POST 将 csv 文件和一些 POST 字段 HTTP PUT 到 REST API 端点。

文件上传的内容存储在变量 $list 中。另一个端点是 $url。

```
$ch = curl_init($url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_PUT, true);
$post = array(
    //Other Post fields array
);
curl_setopt($ch, CURLOPT_POSTFIELDS, $post);

$fh = fopen('php://memory', 'rw');
fwrite($fh, $list);
rewind($fh);
curl_setopt($ch, CURLOPT_INFILE, $fh);  
curl_setopt($ch, CURLOPT_INFILESIZE, strlen($list));  
$response = curl_exec($ch); 
```

上面的代码似乎可以工作，唯一的问题是另一个端点需要一个特定的字段名来上传文件。如何设置文件名？

难道我做错了什么 ？

这是他们在 API 上提到的 PUT 格式

```
Content-Disposition: form-data; name="list[csv]"; filename="RackMultipart20110923-63966-hfpyg"
Content-Length: 33
Content-Type: text/csv
Content-Transfer-Encoding: binary

xxxx
yyyy
zzzz
-------------MultipartPost
Content-Disposition: form-data; name="list[list_type]"

Blacklist
-------------MultipartPost-- 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T16:09:49.247

仅供参考`multipart/form-data`。我认为您需要自己构建主体，我认为不能使用 cURL 来构建带有 PUT 请求的那种请求。但是，这不是一个严重的问题：

```
<?php

  function recursive_array_mpfd ($array, $separator, &$output, $prefix = '') {
    // Recurses through a multidimensional array and populates $output with a 
    // multipart/form-data string representing the data
    foreach ($array as $key => $val) {
      $name = ($prefix) ? $prefix."[".$key."]" : $key;
      if (is_array($val)) {
        recursive_array_mpfd($val, $separator, $output, $name);
      } else {
        $output .= "--$separator\r\n"
                 . "Content-Disposition: form-data; name=\"$name\"\r\n"
                 . "\r\n"
                 . "$val\r\n";
      }
    }
  }

  // This will hold the request body string
  $requestBody = '';

  // We'll need a separator
  $separator = '-----'.md5(microtime()).'-----';

  // First add the postfields
  $post = array(
    //Other Post fields array
  );
  recursive_array_mpfd($post, $separator, $requestBody);

  // Now add the file
  $list = "this,is,some,csv,data"; // The content of the file
  $filename = "data.csv"; // The name of the file
  $requestBody .= "--$separator\r\n"
                . "Content-Disposition: form-data; name=\"list[list_type]\"; filename=\"$filename\"\r\n"
                . "Content-Length: ".strlen($list)."\r\n"
                . "Content-Type: text/csv\r\n"
                . "Content-Transfer-Encoding: binary\r\n"
                . "\r\n"
                . "$list\r\n";

  // Terminate the body
  $requestBody .= "--$separator--";

  // Let's go cURLing...
  $ch = curl_init($url);
  curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
  curl_setopt($ch, CURLOPT_PUT, true);
  curl_setopt($ch, CURLOPT_POSTFIELDS, $requestBody);
  curl_setopt($ch, CURLOPT_HTTPHEADER, array(
    'Content-Type: multipart/form-data; boundary="'.$separator.'"'
  ));
  $response = curl_exec($ch); 
```

如果您对此有任何问题，`echo $requestBody;`请在 cURL 请求之前尝试并确保它看起来像您期望的那样。

# c# - 使用 IValueConverter 时 InitializeComponent 上的 FatalExecutionEngineError

> ID：10483607
> 
> 赞同：1
> 
> 时间：2012-05-07T14:11:01.153
> 
> 标签：c#, windows-runtime, ivalueconverter, winrt-xaml

我有一个列表框中的项目列表。当所选项目更改时，将显示其详细信息：我将`DataContext`a`Grid`设置为该对象，并插入一个显示详细信息的特定 UserControl。我正在`FatalExecutionEngineError`了解这些用户控件的 InitializeComponent()。

```
The runtime has encountered a fatal error. The address of the error was at 0x6d8c104e, on thread 0xcf4\. The error code is 0xc0000005\. This error may be a bug in the CLR or in the unsafe or non-verifiable portions of user code. Common sources of this bug include user marshaling errors for COM-interop or PInvoke, which may corrupt the stack. 
```

当我删除使用值转换的绑定时，错误消失了。某些转换器似乎不会导致异常...此外，仅当我为要显示的每个项目创建用户控件的新实例时才会出现错误，但在重新使用在应用程序启动时创建的相同用户控件时不会出现错误-向上。IValueConverter 是否有任何已知问题？如果是这样，我不应该在我的应用程序中使用它们吗？我在哪里可以找到消费者预览版的错误列表，这样我就不会浪费我的时间来寻找将在以后的版本中修复的错误的变通办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T10:41:42.753

对我来说似乎使这些更稳定的一种可能的解决方法是将转换器资源 () 和使用它的东西（例如 DataTemplate）从中央应用程序范围的 ResourceDictionary 移动到单个页面的资源部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T02:04:26.790

没有错误列表，但正如您在此处和 Microsoft 论坛上看到的那样，这个错误已经给很多人带来了数小时甚至数天的挫败感。在我们 6 月份发布新版本之前，请避免使用自定义转换器。即使你认为你有一个工作的转换器，你可能没有，你的应用程序仍然会在看似随机的时间崩溃。糟透了，但这就是我想的测试版。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T21:51:12.333

我把所有的资源都放在了一个共同的项目中。这就是造成我问题的原因。我将资源复制到每个单独的项目并解决了问题。1

非常感谢这个答案。我已经在这上面花了 6 个小时，直到我偶然发现了这篇文章。！！！哇。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T19:36:11.877

将处理器的属性从 86x 更改为 64x

# android - 单击操作栏中的按钮时弹出菜单

> ID：10483612
> 
> 赞同：5
> 
> 时间：2012-05-07T14:11:17.393
> 
> 标签：android, popup, android-actionbar

我正在尝试实现一个操作栏，其中单击按钮之一显示弹出菜单。这是菜单。XML（操作栏中的菜单项）

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

<item
    android:id="@+id/search"
    android:icon="@drawable/ic_action_search"
    android:orderInCategory="0"
    android:showAsAction="always"
    android:title="@string/menu_search"/>
<item
    android:id="@+id/refresh"
    android:icon="@drawable/ic_action_refresh"
    android:orderInCategory="1"
    android:showAsAction="always"
    android:title="@string/menu_refresh"/>

 <Item
    android:id="@+id/popup"
    android:icon="@drawable/ic_action_search"
    android:onClick="showPopup"
    android:orderInCategory="1"
    android:showAsAction="always"
    android:title="@string/menu_search" /> 
```

我希望在单击具有 id "@+id/popup" 的项目时显示一个弹出菜单。

这是弹出菜单的 XML

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

<item
    android:id="@+id/item1"
    android:icon="@drawable/ic_action_search"
    android:orderInCategory="0"
    android:showAsAction="always"
    android:title="@string/menu_search"/>
<item
    android:id="@+id/item2"
    android:icon="@drawable/ic_action_search"
    android:orderInCategory="1"
    android:showAsAction="always"
    android:title="@string/menu_search"/> 
```

这是按钮的 onClick 方法

```
public void showPopup(View v) {
    PopupMenu popup = new PopupMenu(this, v);
    MenuInflater inflater = popup.getMenuInflater();
    inflater.inflate(R.menu.overflow, popup.getMenu());
    popup.show();
} 
```

问题是单击该按钮时没有弹出窗口。需要帮助的人。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-02-25T07:01:35.407

我在这里找到了这个：http: [//developer.android.com/guide/topics/ui/menus.html](http://developer.android.com/guide/topics/ui/menus.html)

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:id="@+id/selectImg"
        android:icon="@android:drawable/ic_dialog_dialer"
        android:showAsAction="always">

        <menu>
            <item android:id="@+id/top"
                android:title="@string/topimg"/>
            <item android:id="@+id/bottom"
                android:title="@string/botimg" />
        </menu>

    </item>
</menu> 
```

您可以在菜单中放置一个菜单以在单击该项目时显示子菜单。然后，在 Java 中，您可以像往常一样使用相同的方法。

```
@Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu items for use in the action bar
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.main, menu);
        return super.onCreateOptionsMenu(menu);
    }
    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        // Handle presses on the action bar items
       // View v = findViewById(R.id.f);
        switch (item.getItemId()) {
            case R.id.top:
                //action
                return true;
            default:
                return super.onOptionsItemSelected(item);
        }
    } 
```

xml 中“top”的 id 仍然可以识别，即使它是子菜单。这对我有用，它看起来就像弹出菜单。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-05-09T22:55:20.797

> 大家好，这是我自己的解决方案：我创建了 showPopup 方法，然后我在 onOptionsItemSelected 中调用它，如下所示：

```
public void showPopup(){
    View menuItemView = findViewById(R.id.menu_save);
    PopupMenu popup = new PopupMenu(getActivity(), menuItemView);
    MenuInflater inflate = popup.getMenuInflater();
    inflate.inflate(R.menu.popup, popup.getMenu());
    popup.show();

}

@Override
public boolean onOptionsItemSelected(MenuItem item) {

    switch (item.getItemId()) {
    case R.id.menu_save:    
        showPopup();
        return true;
    default:
        return super.onOptionsItemSelected(item);
}

} 
```

> 弹出.xml

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
<item
    android:id="@+id/decon"
    android:showAsAction="ifRoom"
    android:title="@string/decon"/>

<item
    android:id="@+id/mRes"
    android:showAsAction="ifRoom"
    android:title="@string/mesRes"/>

</menu> 
```

> main.xml => 它被称为 onCreateOptionsMenu

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

<item
    android:id="@+id/menu_save"
    android:enabled="true"
    android:icon="@drawable/action_save"
    android:showAsAction="ifRoom|withText"
    android:title="@string/action_save"
    android:visible="true"/>

</menu> 
```

最后我

```
implements PopupMenu.OnMenuItemClickListener to @Override onMenuItemClick method. 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-07T14:26:35.687

由于弹出菜单是一个 MENU，您必须通过实现“onOptionsItemSelected”来处理这个问题。您将能够说出每个菜单选项的操作。它将替换您定义的“onClick”选项并自动调用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-07T14:45:43.937

尝试将“this”更改为 getActivity()。

```
public void showPopup(View v) {
    PopupMenu popup = new PopupMenu(getActivity(), v);
    MenuInflater inflater = popup.getMenuInflater();
    inflater.inflate(R.menu.overflow, popup.getMenu());
    popup.show();
} 
```

希望能帮助到你..！！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-08T11:41:15.567

我找到了解决方案。我没有使用菜单 XML 来扩展弹出菜单，而是制作了一个 XML 布局文件。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/container"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:background="#8b8989"
android:orientation="vertical"
android:padding="10dip" >

<TextView
    android:id="@+id/menuItem1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginTop="10dip"
    android:text="@string/menu1" />

<TextView
    android:id="@+id/menuItem2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginTop="10dip"
    android:text="@string/menu2" />
<TextView
    android:id="@+id/menuItem3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginTop="10dip"
    android:text="@string/menu3" />
</LinearLayout> 
```

我改变了 onClick 方法

```
public void showPopup(View v) {
    LayoutInflater inflater = (LayoutInflater) MainActivity.this
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        PopupWindow pw = new PopupWindow(inflater.inflate(
                R.layout.overflow_layout, null, false), 300, 400, true);
        pw.showAtLocation(findViewById(R.id.container), Gravity.CENTER, 0,
                0);
} 
```

这解决了这个问题

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-07T14:18:15.300

```
android:onClick="popup" 
```

可能你应该把它改成`android:onClick="showPopup"`?

# ms-access-2007 - 访问 2007 截断

> ID：10483626
> 
> 赞同：0
> 
> 时间：2012-05-07T14:12:00.210
> 
> 标签：ms-access-2007

我有一个将数据导入临时表的导入。将数据插入暂存后，根据数据将其移动到主表或错误表。例如，名称字段是长度为 25 的文本字段。如果记录的名称超过 25 个字符，则数据将移动到错误表中。

目前，VBA 逻辑尝试将数据从暂存表移动到主表，如果失败（因为主键违规或 mndatory 字段的数据丢失），则将记录移动到错误表。

问题在于超过字段最大长度的数据。我希望当数据从登台移动到主表并且数据超过文本字段长度时，插入 SQl 将失败。相反，访问会截断数据并将其插入到主表中。

尝试插入时，是否存在阻止自动截断数据的访问？

问候开发

# javascript - Javascript - 检查是否配置了电子邮件

> ID：10483630
> 
> 赞同：4
> 
> 时间：2012-05-07T14:12:07.900
> 
> 标签：javascript, jquery, html, mailto

`mailto:`我们可以使用HTML 和 JavaScript发送邮件。是否有任何可能的方法来检查电子邮件是否已配置（即是否有任何用于发送电子邮件的默认电子邮件服务 - 例如 Outlook - 可用）？

我需要处理这个

```
if(emailConfigured == true)

{
    // send mail

} else {

    // give alert
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-07T14:16:30.460

不，你不能这样做。这是完全不可能的。JavaScript 环境无法访问主机来判断是否配置了某些东西来处理`mailto:`链接。这远远超出了您的 webapp 责任范围，您不应该也不能担心它。确定用户是否知道如何发送电子邮件不是您页面的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-20T12:12:53.573

是否可以使用 javascript 打开新的电子邮件窗口，然后检查窗口是否更改？

```
 window.location.assign("mailto:abc@axample-test.com?Subject=ABC); 
```

如果窗口没有改变，您可以断定电子邮件没有正确配置。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-07T14:24:04.860

如果电子邮件由 php 或 ... 配置，您可以添加以下 html 并执行以下操作：

```
<!-- html -->
<input type="hidden" value="mymail@gmail.com" id="mailto" />

// Javascript
if($("#mailto")[0])

{
    // send mail
 window.location = "mailto:"+#("mailto").val();

} else {

    // give alert
} 
```

# delphi - 什么是 ActiveX 容器？

> ID：10483632
> 
> 赞同：6
> 
> 时间：2012-05-07T14:12:21.183
> 
> 标签：delphi, activex, containers, intranet

在我的整个编程生涯中，我从未真正有机会使用 Microsoft ActiveX 做任何事情。所以，我对它是什么或它的用途知之甚少。虽然我在 Internet 上搜索过答案，但我发现 ActiveX 或 ActiveX Container 的定义有很多不同。我的一位客户要求为我没有的软件提供 ActiveX 容器。他想通过这个 ActiveX 容器远程查看或控制我的软件。这可能吗？另外，ActiveX 还在吗？我想看看我是否可以让这个 ActiveX 容器真正快速地供他使用。

我假设 ActiveX 用于将您的软件的某些部分公开到 Internet 或 Intranet。因此，用户可以远程访问您的应用程序。

任何回应将不胜感激。谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T16:07:19.623

Activex 容器是 ActiveX 控件可以运行的框架，这些容器可以嵌入到桌面应用程序或网页中。

由于 ActiveX 控件包含本机代码，您必须设置浏览器的安全设置才能运行此类对象。唯一完全支持 ActiveX 的浏览器是 IE（存在一些实验项目来支持 Firefox 和 chrome 中的 Activex）而且这些容器只能在 Windows 下运行。

将现有应用程序转换为 ActiveX 控件的最快方法是使用[TActiveForm](http://docwiki.embarcadero.com/Libraries/en/Vcl.AxCtrls.TActiveForm)（下面有一个示例链接）。

有关更多信息，请尝试这些链接

*   [`Introduction to ActiveX Control Containers`](http://msdn.microsoft.com/en-us/library/aa768175%28v=vs.85%29.aspx)
*   [将 Delphi TFrame 后代包装为 ActiveX 控件](https://stackoverflow.com/questions/3066015/wrapping-a-delphi-tframe-descendant-as-an-activex-control)

# asp.net - jabber.net 不适用于 vb.net

> ID：10483634
> 
> 赞同：0
> 
> 时间：2012-05-07T14:12:22.423
> 
> 标签：asp.net

我正在尝试将 jabber.net 用于 Web 应用程序我知道这是用于桌面应用程序，如下面给出的链接所示

[http://www.codeproject.com/Articles/34300/Google-Chat-Desktop-Application-using-Jabber-Net](http://www.codeproject.com/Articles/34300/Google-Chat-Desktop-Application-using-Jabber-Net)

但我发现了一篇关于堆栈溢出的帖子，上面说有一个家伙已经用 Web 应用程序实现了它

[网络聊天应用程序 - ASP.NET/Jabber/Ajax/WCF/Comet/ReverseAjax - 面临的问题 - 寻求见解](https://stackoverflow.com/questions/3226688/web-chat-application-asp-net-jabber-ajax-wcf-comet-reverseajax-issues-faced)

实际上代码项目代码是用c#编写的

```
using System;    
using System.Collections;    
using System.Collections.Generic;    
using System.ComponentModel;    
using System.Data;    
using System.Drawing;    
using System.Text;    
using jabber.client;    
using System.Threading;    
using jabber.protocol.iq;    
using jabber;    
using Google.GData.Contacts;    
using Google.GData.Extensions;    
using jabber.protocol;

namespace WebApplication1    
{    
    public partial class _Default : System.Web.UI.Page    
    {    
        static ManualResetEvent done = new ManualResetEvent(false);    
        private jabber.client.JabberClient jabberClient1=new jabber.client.JabberClient();    

        protected void Page_Load(object sender, EventArgs e)
        {
            jabberClient1.OnMessage += new MessageHandler(jabberClient1_OnMessage);
            jabberClient1.OnDisconnect += new bedrock.ObjectHandler(jabberClient1_OnDisconnect);
            jabberClient1.OnError += new bedrock.ExceptionHandler(jabberClient1_OnError);
            jabberClient1.OnAuthError += new jabber.protocol.ProtocolHandler(jabberClient1_OnAuthError);
            jabberClient1.User = "sa";
            jabberClient1.Server = "gmail.com";
            jabberClient1.Password = "download";
            jabberClient1.Connect();
            jabberClient1.OnAuthenticate += new bedrock.ObjectHandler(jabberClient1_OnAuthenticate);
        }

        void jabberClient1_OnAuthenticate(object sender)
        {
            done.Set();
        }

        void jabberClient1_OnAuthError(object sender, System.Xml.XmlElement rp)
        {
            if (rp.Name == "failure")
            {
                Response.Write("Invalid User Name or Password");
            }
        }

        void jabberClient1_OnError(object sender, Exception ex)
        {
            Response.Write(ex.Message);
        }

        void jabberClient1_OnDisconnect(object sender)
        {
            Response.Write("Disconnected");
        }

        private void jabberClient1_OnMessage(object sender, jabber.protocol.client.Message msg)
        {
            Response.Write("Message Posted");
            //frmChat[(int)chatIndex[msg.From.Bare]].ReceiveFlag = true;
            //string receivedMsg = msg.From.User + " Says : " + msg.Body + "\n";
            //frmChat[(int)chatIndex[msg.From.Bare]].AppendConversation(receivedMsg);
            //frmChat[(int)chatIndex[msg.From.Bare]].Show();
        }
    }

} 
```

所以我像这样将它转换为vb.net

```
Imports System    
Imports System.Collections    
Imports System.Collections.Generic    
Imports System.ComponentModel    
Imports System.Data    
Imports System.Drawing    
Imports System.Text    
Imports jabber.client    
Imports System.Threading    
Imports jabber.protocol.iq    
Imports jabber    
Imports Google.GData.Contacts    
Imports Google.GData.Extensions    
Imports jabber.protocol    

Public Class GtalkIntegration    
    Inherits System.Web.UI.Page    
    Shared done As New ManualResetEvent(False)    
    Private WithEvents jabberClient1 As New jabber.client.JabberClient()    

    Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        AddHandler jabberClient1.OnMessage, AddressOf jabberClient1_OnMessage
        AddHandler jabberClient1.OnDisconnect, AddressOf jabberClient1_OnDisconnect
        AddHandler jabberClient1.OnError, AddressOf jabberClient1_OnError
        AddHandler jabberClient1.OnAuthError, AddressOf jabberClient1_OnAuthError
        jabberClient1.User = "sa"
        jabberClient1.Server = "gmail.com"
        jabberClient1.Password = "download"
        jabberClient1.Connect()
        AddHandler jabberClient1.OnAuthenticate, AddressOf jabberClient1_OnAuthenticate
    End Sub

    Private Sub jabberClient1_OnAuthenticate(ByVal sender As Object)
        done.[Set]()
    End Sub

    Private Sub jabberClient1_OnAuthError(ByVal sender As Object, ByVal rp As System.Xml.XmlElement)
        If rp.Name = "failure" Then
            Response.Write("Invalid User Name or Password")
        End If
    End Sub

    Private Sub jabberClient1_OnError(ByVal sender As Object, ByVal ex As Exception)
        Response.Write(ex.Message)
    End Sub

    Private Sub jabberClient1_OnDisconnect(ByVal sender As Object)
        Response.Write("Disconnected")
    End Sub

    Private Sub jabberClient1_OnMessage(ByVal sender As Object, ByVal msg As jabber.protocol.client.Message)
        Response.Write("Message Posted")
        'frmChat[(int)chatIndex[msg.From.Bare]].ReceiveFlag = true;
        'string receivedMsg = msg.From.User + " Says : " + msg.Body + "\n";
        'frmChat[(int)chatIndex[msg.From.Bare]].AppendConversation(receivedMsg);
        'frmChat[(int)chatIndex[msg.From.Bare]].Show();
    End Sub
End Class 
```

但它给了我这样的错误

连接尝试失败，因为连接的一方在一段时间后没有正确响应，或者连接失败，因为连接的主机没有响应

请帮帮我提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T19:55:55.417

确保引用 jabber-net.dll、zlib.net.dll 和 netlib.Dns.dll。

# javascript - 为什么很多程序员把逗号移到下一行？

> ID：10483635
> 
> 赞同：22
> 
> 时间：2012-05-07T14:12:30.383
> 
> 标签：javascript

请告诉我，以下风格的神圣力量是什么：

```
var javascript = new Language(
  'Brendan Eich'
, new Date(1995, 0, 1)
, ['C', 'Java', 'Scheme']
); 
```

为什么很多程序员都使用这种风格？它有什么好处？例如，

```
var javascript = new Language(
  'Brendan Eich',
  new Date(1995, 0, 1),
  ['C', 'Java', 'Scheme']
); 
```

我比以前更喜欢。谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-11-16T20:34:19.877

已经有很多很棒的答案了。请允许我给你我自己的，让事情尽可能清楚。

我个人将这种编写代码的方式称为“Haskell 风格”，因为它是在 Haskell 中使用的一种常见风格。让我先给你一个 Haskell 的例子：

```
data Settings = -- The user settings
    { has_sound     :: Bool   -- Determines if the user has sound
    , has_power     :: Bool   -- Determines if the user has electricity
    , has_graphics  :: Bool   -- Determines if the user has graphics
    , user_name     :: String -- The name of the user
    , user_password :: String -- The hashed password of the user
    , user_email    :: Email  -- The email address of the user
    , stylesheet    :: Style  -- The stylesheet to use
    } 
```

还有我的一个项目的 Javascript 片段：

```
var events // Holds the events to generate a event handler for.
  , var2   // Quick description for var2.
  , var3   // Quick description for var3.
  , ...    // ...
  ;
events = // Event handlers will be generated for the following events:
    [ "onmousedown"  // Works outside of the window element
    , "onmouseup"    // Works outside of the window element
    , "onmousemove"  // Works outside of the window element
    , "onmousewheel" // This will handle DOMMouseScroll aswell
    ]; 
```

# “Haskell 风格”的好处

## 易于阅读

“Haskell 样式”利用了列样式布局。这种列样式使您的代码更具可读性。事实上，它使您的代码更具可读性，以至于您一直都在使用它。想象一下编写没有制表符或前导空格的代码！

通过利用列样式布局，变量名称、类型等也更易于阅读。通过按前缀对变量进行分组，我们未来的读者将很容易找到他正在寻找的内容，而无需使用高级搜索查询。

## 易于记录

列式布局更有优势。通过对我们的代码进行分组，我们可以添加一个保留用于注释的列。现在您可以阅读您的代码，甚至不需要颜色突出显示，并且向您的评论添加信息就像找到正确的列并修改它一样简单。此外，这种列式记录代码的方式与使用 Doxygen 之类的文档生成器后得到的差不多，无需使用此类工具。

## 容易发现错误

使用这种编码风格，注意到缺少的逗号是小菜一碟。只需寻找不以它开头的行！另一方面，我们在行尾有逗号。我们错过了一个？不，因为它是最后一个元素，或者因为表达式在下一行继续。查找列表中的第一个元素非常简单。在处理长行时，第一个元素很容易被忽略，但是通过将第一个元素放在它自己的行上并在其前面放置一个`[`或`{`而不是`,`右，很容易发现。

## 易于扩展

您可能会说“但是一旦表达式变大，这种布局样式将变得无法处理！”，这是非常正确的，但这对于您的其余代码有什么不同吗？我认为通过使用列样式，您至少可以使代码保持可读性，从长远来看，这比您可能不得不将其放入列布局中的努力更有价值。

## 一个例子！

```
var scalable = // This is a example variable
    [
        [ new MyObject // This is how I would style Object Allocation
              ( "11"
              , "This is the first element"
              , function // This is a very secret function...
                  ( secret   // ..with secret..
                  , variable // ..variable..
                  , names    // ..names!
                  )
                {
                    // <-- Use spaces, not tabs :)
                }
              )
        , "12"
        ]
    ,
        [ { id:   21                          // Where's 20?
          , name: "This is the third element" // It sure is
          , func: function() { /* My body feels empty :c */ }
          }
        , "22" // Notice how 21 is a integer, not a string. Sneaky!
        ]
    ]; 
```

# TL; 博士

这种放置逗号的风格，“Haskell 风格”，有几个优点：

*   易于阅读
*   易于记录
*   容易发现错误
*   易于扩展

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-07T14:27:53.833

如果您**在最后一行的末尾有一个额外的逗号，**它将在某些浏览器中有效，**但并非在所有浏览器中都**有效。使错误比开头的额外逗号更难检测（在所有浏览器上都失败）。大多数开发人员更愿意立即看到错误（以便他们可以修复它），而不是冒着因无意中不支持某些浏览器而出现生产问题的风险。特别是如果解决方案就像删除逗号一样简单。

另外，在行的开头有逗号，可以更简单地**在末尾添加一行，**您只需**触摸该行**（您不需要在之前的行中添加逗号）。如果您使用版本控制（例如 diff、annotate、bisect），这很重要。有人可能会争辩说，在数组或对象的开头添加一行需要与两行相同的额外工作（如果您在开头使用逗号），但根据我的经验，在开头插入一行的可能性要小得多在末尾插入一行。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-05-07T14:13:54.577

这是因为逗号属于~~新行~~下一条语句，而不是前一条。（正如@Dave Newton 在下面的评论中所说：伪 BNF 将是 foo [, foo]*-ish）

例如：

如果你有这个：

```
a,
b,
c 
```

如果你需要删除，`c`那么你需要删除两件事：de`c`和上一行的逗号。如果你这样做：

```
a
,b
,c 
```

现在您只需要删除 ,c 行。这种方式更有意义，因为`b`第一个示例中的 . 后面的逗号仅需要，因为`c`. 不过这样看起来确实更糟。这是代码的可维护性和外观之间的权衡。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-05-07T18:52:30.650

我认为这样做是为了更容易发现遗漏的逗号。

```
var something = 0,
    foo = "a string",
    somethingElse = []
    bar;

var something = 0
  , foo = "a string"
    somethingElse = []
  , bar; 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-05-07T14:14:35.777

只需查看您的代码以验证您在需要的地方有一个逗号会更容易。如果您必须扫描每行代码的末尾，那么缺少的逗号不会像它们在左侧排列时那样跳出来。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-05-07T14:15:01.907

这在不接受尾随逗号的语言中提供了一些保护，以免意外引入尾随逗号的语法错误

在 SQL 中，尾随逗号会导致语法错误。在 JavaScript 中，它会在大多数地方被接受，但在某些 Internet Explorer 版本中会失败并出现一个神秘的错误，例如。

### JS 适用于大多数浏览器，但在某些浏览器中失败

```
var thing = {
 a: 1,
 b: 2,
 // trailing comma
 c: 3,
}; 
```

### SQL 中的语法错误

```
SELECT
  col1,
  col2,
  -- Syntax error in SQL
  col3,
FROM table 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-07T14:14:17.417

这是确保在将新项目添加到集合时不会忘记逗号的一种方法，并且不会意外地在集合中留下逗号。

通过将其放在新线上，它在视觉上很明显。

我不在乎，但我明白人们为什么会这样。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-07T14:48:14.233

您可能正在查看生成的代码，例如，在编写循环以生成 SQL 选择语句时，有时我会这样写：

```
sql =  "SELECT";
sql += "  table.id"; // or some field that will always be in the query
for (var i = 0; i < 10; i++;) {
  sql += ",  table.field" + i; 
}
sql += "FROM table" // etc 
```

而不是在末尾添加逗号，然后有一个条件在循环的最后一次迭代中省略它或执行：

```
sql =  "SELECT";
for (var i = 0; i < 10; i++;) {
  sql += "  table.field" + i + ","; 
}
sql += "  table.id";
sql += "FROM table" // etc 
```

这在功能上是等效的，但是 ID 并没有出现在我通常想要的位置。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2012-05-07T14:15:45.003

可能是因为删除或添加行及其逗号在第二个示例中更简单

# dependencies - Kettle 中的 Jar 依赖管理

> ID：10483637
> 
> 赞同：0
> 
> 时间：2012-05-07T14:12:41.563
> 
> 标签：dependencies, executable-jar, kettle

有没有办法在调用 jar 文件时在 Kettle 中指定依赖的 jar？还是我必须包括所有依赖的罐子，罐子被水壶调用？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T02:38:37.477

根据 wiki：[http](http://wiki.pentaho.com/display/EAI/Kettle+dependency+management) ://wiki.pentaho.com/display/EAI/Kettle+dependency+management ，kettle 使用 Apache Ivy 来管理 jars 依赖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T05:26:58.430

据我所知，它们都需要包括在内。所以很明显，你也必须意识到预先存在的那些。但可以肯定的是，我会查看kettle-dev 邮件列表——在那里得到非常好的快速答案。

# c# - LINQ to SQL 查询的问题

> ID：10483641
> 
> 赞同：0
> 
> 时间：2012-05-07T14:13:01.847
> 
> 标签：c#, sql, winforms, linq-to-sql

我无法让我的 LINQ to SQL 查询之一正常工作。我有三个表设置如下：

供应商 ID - 主键

制造商 id - 主键

ManufacturerVendorRelationships id - 主键manufacturer_id - 到manufacturer.id 的外键 vendor_id - 到vendor.id 的外键

我正在尝试编写一个 LINQ to SQL 查询，该查询将获取当前与给定制造商无关的供应商。例如，下表数据应该只导致 ID 为 1 的制造商的 2 个供应商。有人可以帮我解决这个例子的 LINQ to SQL 吗？现在，应用程序正在执行此逻辑。提前致谢。

```
Vendors
ID
1
2
3
4
5

Manufacturers
ID
1
2
3
4
5

ManufacturerVendorRelationships
ID               ManufacturerID                   VendorID
1                1                                1
2                1                                2
3                1                                3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T14:18:18.050

也许是这样的：

```
var result=(
        from v in db.Vendors
        where !db.ManufacturerVendorRelationships
                 .Select(s=>s.VendorID)
                 .Contains(v.ID)
        select v
    ); 
```

或者，如果您希望它像一个字段：

```
var result=(
        from v in db.Vendors
        select  new
        {
            v.ID,
            HasManufacturer=db.ManufacturerVendorRelationships
                           .Select(s=>s.VendorID)
                           .Contains(v.ID)
        }
    ); 
```

其中 db 是 linq 数据上下文

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T14:29:27.900

```
int id= 1;
var result = 
dc.Vendors
  .Where(v => !dc.ManufacturerVendorRelationships
                 .Any(rel => rel.VendorId == v.Id && rel.ManufacturerId == id)); 
```

# android - Android 光标错误 - “确保光标在从中访问数据之前已正确初始化......”

> ID：10483644
> 
> 赞同：11
> 
> 时间：2012-05-07T14:13:09.037
> 
> 标签：android, listview, mediastore, android-cursor, viewflipper

我有一个活动，其中 viewflipper 显示了一个包含来自 mediastore 的艺术家的列表，单击该列表会显示所选艺术家的专辑列表，进而显示该专辑中的歌曲。单击歌曲后，它应该使用字符串“标题”填充文本视图。

到此为止，所有游标都工作正常，但最后一个游标似乎以某种方式偏离了位置。谁能告诉我为什么 logcat 告诉我：

```
05-07 23:58:54.195: E/AndroidRuntime(1961): java.lang.IllegalStateException: Couldn't read row 3, col -1 from CursorWindow.  Make sure the Cursor is initialized correctly before accessing data from it. 
```

无法读取的特定行取决于选择的艺术家/专辑/歌曲。代码如下。非常感谢您的帮助。

```
package music.flipper;

import android.app.Activity;
import android.database.Cursor;
import android.os.Bundle;
import android.provider.BaseColumns;
import android.provider.MediaStore;
import android.provider.MediaStore.Audio.AlbumColumns;
import android.provider.MediaStore.Audio.ArtistColumns;
import android.provider.MediaStore.Audio.AudioColumns;
import android.provider.MediaStore.MediaColumns;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListView;
import android.widget.SimpleCursorAdapter;
import android.widget.TextView;
import android.widget.ViewFlipper;

public class MusicFlipper extends Activity implements OnItemClickListener {
    /** Called when the activity is first created. */

    ViewFlipper viewflipper;
    Cursor cursor;

    private String currentList = "Artist";
    @SuppressWarnings("deprecation")
    @Override
    public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

        setContentView(R.layout.flipper);
        //set the main view to flipper.
        viewflipper = (ViewFlipper) findViewById(R.id.viewFlipper1);

        String[] columns = { 
                BaseColumns._ID,
                ArtistColumns.ARTIST 
                };
        //The columns to return for each row.   

        cursor = managedQuery(MediaStore.Audio.Artists.EXTERNAL_CONTENT_URI,
            columns, null, null, null);

        ListView listView = (ListView) findViewById(R.id.listView1);
        listView.setOnItemClickListener(this);

        //set an onitemclicklistener to the first listview in flipper

        String[] displayFields = new String[] { ArtistColumns.ARTIST };
        //set all the artist names to the array 'displayfields'
        int[] displayViews = new int[] { R.id.rowItem };
        //number of rows to display and where to bind them

        SimpleCursorAdapter adapter = new SimpleCursorAdapter(this,
            R.layout.row_item, cursor, displayFields, displayViews);
        listView.setAdapter(adapter); }
        //Take the display fields array, and bind to the matching display row

     @SuppressWarnings("deprecation")

    public void onItemClick(AdapterView<?> a, View v, int position, long id) {

        if( currentList.equals("Artist")) {
            if (cursor.moveToPosition(position)) {
            //once an item is clicked, move the cursor to that items position

            String where = AudioColumns.ARTIST + "=?";
            // Have the cursor look within the artist row?

            String whereVal[] = { cursor.getString(cursor
          .getColumnIndex(AlbumColumns.ARTIST)) };
            //Choose the particular row with the chosen artist's name

            String[] columns = {
                    BaseColumns._ID,
                    AudioColumns.ALBUM,
               };

                String orderBy = BaseColumns._ID;

            cursor = managedQuery(MediaStore.Audio.Albums.EXTERNAL_CONTENT_URI,
                columns, where, whereVal, orderBy);

            ListView listView = (ListView) findViewById(R.id.listView2);
            listView.setOnItemClickListener(this);
            String[] displayFields = new String[] { AudioColumns.ALBUM };
            int[] displayViews = new int[] { R.id.rowItem };
            SimpleCursorAdapter adapter = new SimpleCursorAdapter(this,
                R.layout.row_item, cursor, displayFields, displayViews);
            listView.setAdapter(adapter);
            currentList = "Album";
            viewflipper.showNext();}

        } if (currentList.equals("Album")) {
            if (cursor.moveToPosition(position)) {

                String where = AudioColumns.ALBUM
                + "=?";

                String whereVal[] = { cursor.getString(cursor
                .getColumnIndex(AlbumColumns.ALBUM)) };

                String[] columns = {
                        MediaColumns.DATA,
                        BaseColumns._ID,
                        MediaColumns.TITLE,
                        MediaColumns.DISPLAY_NAME,
                        MediaColumns.MIME_TYPE,
                   };

                    String orderBy = MediaColumns.TITLE;

                cursor = managedQuery(MediaStore.Audio.Media.EXTERNAL_CONTENT_URI,
                    columns, where, whereVal, orderBy);

                ListView listView = (ListView) findViewById(R.id.listView3);
                listView.setOnItemClickListener(this);
                String[] displayFields = new String[] { MediaColumns.TITLE };
                int[] displayViews = new int[] { R.id.rowItem };
                SimpleCursorAdapter adapter = new SimpleCursorAdapter(this,
                    R.layout.row_item, cursor, displayFields, displayViews);
                listView.setAdapter(adapter);
                currentList.equals("Songs");
                viewflipper.showNext();}

        } if (currentList.equals("Songs")) {
            if (cursor.moveToPosition(position)) {

                String title = cursor.getString(cursor.getColumnIndex(MediaColumns.TITLE));

                TextView myTextView = (TextView) findViewById(R.id.title);
                myTextView.setText(title);

            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-07T14:30:26.440

问题不在于行，而在于列。

```
Couldn't read row 3, **col -1** from CursorWindow.  Make sure the Cursor is initialized correctly before accessing data from it. 
```

这基本上是说光标中不存在您的 MediaColumns.TITLE 列。这是真的。它不在您的第一个光标（它正在引用的光标）中。您的其他游标都在`if`语句内，因此超出范围，只留下第一个。

您可以像在`if`语句的其他部分中那样重新拉动游标，也可以找到某种方法来保留从上一条`if`语句中获得的游标。

**编辑**

修复起来非常简单，将游标设为类变量。另外，我不会继续重复使用“光标”。将它们标记为个人和描述性的，它将帮助您保持代码的可读性。我可能会这样做：

```
public class MusicFlipper extends Activity implements OnItemClickListener {
    private Cursor artistCursor;
    private Cursor albumCursor; 
```

然后你像以前一样称呼他们，但使用个人名字。

```
albumCursor = managedQuery(MediaStore.Audio.Media.EXTERNAL_CONTENT_URI,
                columns, where, whereVal, orderBy); 
```

由于您将其声明为类变量，因此在整个类中都可以使用它，因此在最后一部分中您将执行以下操作：

```
if (currentList.equals("Songs")) {
    if (albumCursor.moveToPosition(position)) {
            String title = albumCursor.getString(albumCursor.getColumnIndex(MediaColumns.TITLE));
            TextView myTextView = (TextView) findViewById(R.id.title);
            myTextView.setText(title);
    }
} 
```

# java - 使用 Apache POI 在 pptx 中创建表

> ID：10483646
> 
> 赞同：2
> 
> 时间：2012-05-07T14:13:13.220
> 
> 标签：java, powerpoint, apache-poi

我正在尝试使用 Apache POI 创建一些幻灯片，一切都很好，除了表格。[我使用与他们的教程](http://svn.apache.org/repos/asf/poi/trunk/src/examples/src/org/apache/poi/xslf/usermodel/Tutorial4.java)之一相同的代码，结果是（在我的代码和执行教程中）一个单一的、空的和未格式化的单元格。此外，使用此表 OpenOffice 无法打开文件（并且 Powerpoint 显示该单个单元格）。

有任何想法吗？

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T08:52:28.413

我已经解决了，我会在这里发布以供将来参考

我不得不用[ooxml-schema-1.1.jar](http://search.maven.org/#search%7Cga%7C1%7Ca:%22ooxml-schemas%22)替换 poi-ooxml-schema-3.8-20120326.har并且一切正常

# msbuild - DefaultLabeller 在巡航控制.net 中以日期为前缀

> ID：10483648
> 
> 赞同：0
> 
> 时间：2012-05-07T14:13:15.000
> 
> 标签：msbuild, cruisecontrol.net

我正在研究巡航控制.net，我需要 ccnet.config 中包含当前日期的变量，以便我可以在具有 prifix 和 postfix 两个标签的 defaultlabeller 中使用它。所以我可以在我的 defaultlabeller 块中引用这个变量作为前缀。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T02:27:22.917

你可以使用这个：

```
<UsingTask AssemblyFile="MSBuild.Community.Tasks.dll" TaskName="MSBuild.Community.Tasks.Time" />
<MSBuild.Community.Tasks.Time Format="MM.dd.yyyy.HH.mm">
  <Output TaskParameter="FormattedTime" PropertyName="CurrentDate" />
</MSBuild.Community.Tasks.Time> 
```

此任务的结果将放置在属性中`CurrentDate`

这是一个现实生活中的例子：

[https://github.com/jupaol/NCastor/blob/develop/Solutions/NCastor.AutoBuilder/NCastor.AutoBuilder.Runner/Targets/Labels/FormatLabelNameSufixWhenLabelExists.target](https://github.com/jupaol/NCastor/blob/develop/Solutions/NCastor.AutoBuilder/NCastor.AutoBuilder.Runner/Targets/Labels/FormatLabelNameSufixWhenLabelExists.target)

并且你需要下载社区任务：

[http://msbuildtasks.tigris.org/](http://msbuildtasks.tigris.org/)

# url - 将 POST 重定向到非操作 url

> ID：10483649
> 
> 赞同：1
> 
> 时间：2012-05-07T14:13:15.957
> 
> 标签：url, web-applications, struts2

如何使用所有参数将发送到 struts 操作的 POST 请求重定向到另一个不是 struts 操作的 url（因此重定向操作似乎对我没有帮助）。

说 form1 使用参数 1 发布到 action1.action

如何重定向该请求并将 param1 传递给不是 struts 操作的新 url？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T13:06:14.967

使用注释我会这样做，在你的动作类：

```
@Results({
    @Result(name = "input", location = "home.jsp"),
    @Result(name = "success", location = "http://www.url.com", type = "redirect", params={"param1", "value1", "param2", "value"})
}) 
```

# salesforce - 是否可以刷新页面布局上的相关列表？

> ID：10483650
> 
> 赞同：1
> 
> 时间：2012-05-07T14:13:18.617
> 
> 标签：salesforce

单击相关列表按钮后是否可以刷新**标准**页面布局上的单个相关列表（可能使用带有 OnClick JavaScript 的 Ajax）？有没有人尝试过这样的事情？

我知道使用 Visualforce 可以做到这一点，我可能需要走那条路。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T19:51:10.803

在研究了`main.js`所有标准 Salesforce 页面中包含的 JavaScript 文件后，我找到了一种方法来获取页面上所有相关列表的数组。这是一个“hack”，不保证可以正常工作（当然也不受支持，尤其是在每个新版本的 Salesforce 之后）。

```
window.sfdcPage.relatedLists; // returns an array of related lists 
```

返回的每个相关列表都有可用的函数。每个列表都可以通过调用该`makeRLAjaxRequest`函数来刷新。

```
// where 4 is the Related List number
window.sfdcPage.makeRLAjaxRequest(null,window.sfdcPage.relatedLists[4].listId); 
```

# matlab - Matlab如何轻松循环圆形数组

> ID：10483665
> 
> 赞同：2
> 
> 时间：2012-05-07T14:14:16.960
> 
> 标签：matlab, slice

嗨，我正在寻找一种方法来从近端到开始附近获取数组的一部分。我知道我可以分两部分执行此操作，然后添加它们，但这似乎是一个普遍需要的操作，我认为 matlab 可能已经内置了它，但我在搜索中找不到任何信息。为了澄清，我想说：

```
y = 1:10
y(-3:3) or y(8:3)
returns:
8 9 10 1 2 3 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T14:48:47.170

实际上*有*一种方法可以做到这一点（无需将其拆分为索引的负数和正数部分的串联）：在所需范围内使用模运算符：

```
>>  y = 1:10;
>>  y(mod([-3:3]-1,numel(y))+1)

ans =

     7     8     9    10     1     2     3 
```

这个结果由 7 个数字组成（与您想要的 [8 9 10 1 2 3] 相反），这是合乎逻辑的，因为 -3:3 实际上跨越 7 个数字。

使用此方法，数字 0 对应于 y(end)，-1 对应于 y(end-1)，依此类推。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T14:37:02.980

你可以试试这个：

```
y = 1:10;   
n = 3;   
y([end-n+1:end 1:n]); 
```

这返回

```
ans =

     8     9    10     1     2     3 
```

# asp.net-mvc - 传入字典的模型项的类型为 'System.Collections.Generic.List ErroR

> ID：10483672
> 
> 赞同：0
> 
> 时间：2012-05-07T14:14:40.220
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我在这里收到以下错误：

```
 Line 45:         <tr>
        Line 46:             <td width="15%" valign="top">
        Line 47:                 @{Html.RenderAction("GetMenu","RoomType");}
        Line 48:             </td>
        Line 49:             <td valign="top"

 'The model item passed into the dictionary is of type   
 'System.Collections.Generic.List`1[System.Object]', but this dictionary requires a model item of type 'System.Collections.Generic.IEnumerable`1[LicentaTest.Models.RoomType]'. 
```

我不知道我错在哪里。这是 RoomTypecontroller 的 GetMenu 方法：

```
 'public ActionResult GetMenu()
        {
        DBContext.Current.Open();
        var model =RoomType.SelectAll();
        DBContext.Current.Close();
        return PartialView(model);
         }' 
```

这是我的获取菜单视图：

```
 @model IEnumerable<LicentaTest.Models.RoomType>
      @using LicentaTest.Models
      <script type="text/javascript">
      $(function () {
      $("#categories").addClass("ui-widget");
      $("a", "#categories").button().width(200);
      });
      </script>
      <ul id="categories">
      @foreach (var tipcamera in Model) 
      { 
<li>@Html.ActionLink(tipcamera.Room_Type,"Browse","RoomType",new{RoomType=tipcamera.Room_Type},null)
       </li>

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T14:29:04.660

实际上我不知道你在`RoomType.SelectAll()`做什么，但我想它会以`List<object>`任何方式返回，尝试一下它应该可以工作：

```
var model = RoomType.SelectAll().Cast<RoomType>(); 
```

# ios - 视网膜显示器的图形不适用于 IPAD

> ID：10483673
> 
> 赞同：1
> 
> 时间：2012-05-07T14:14:43.457
> 
> 标签：ios, ipad, retina-display

我将更新我的应用程序以显示视网膜。为此，我设置了带有@2x 后缀的图像名称。但 iPad 3 不加载高清图形。我也尝试使用后缀@2x~ipad，但没有任何运气。如何为 iPad3 设置视网膜图形？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T14:30:57.157

@2x~ipad 后缀应该可以解决问题，可能还有其他问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T19:17:21.473

加载图像时，请去掉后缀。例如，做

```
UIImage *image = [UIImage imageNamed:@"myImage"]; 
```

并不是

```
UIImage *image = [UIImage imageNamed:@"myImage.png"]; 
```

# iphone - 崩溃日志 - 找不到崩溃

> ID：10483674
> 
> 赞同：0
> 
> 时间：2012-05-07T14:14:50.850
> 
> 标签：iphone, ios, sdk, crash

我从运行我的应用程序的测试人员那里得到以下崩溃日志。

```
Incident Identifier: 6E2A5626-7366-4CDE-AEB2-0A9302FAED33
CrashReporter Key:   b60265c86e67319d09e467ba61230f5d8cb62f41
Hardware Model:      iPhone3,1
Process:         MyApplication [12798]
Path:            /var/mobile/Applications/364708D2-EC63-4AA5-AF06-F9A1658BAFE2/MyApplication.app/MyApplication
Identifier:      MyApplication
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2012-05-06 11:53:47.852 +0200
OS Version:      iPhone OS 5.1 (9B176)
Report Version:  104

Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x00000000, 0x00000000
Crashed Thread:  0

Last Exception Backtrace:
0   CoreFoundation                  0x354ee88f __exceptionPreprocess + 163
1   libobjc.A.dylib                 0x36915259 objc_exception_throw + 33
2   CoreFoundation                  0x3544623d -[__NSArrayI objectAtIndex:] + 165
3   MyApplication                   0x00018ad9 -[iPhoneNewsViewController tableView:cellForRowAtIndexPath:] (iPhoneNewsViewController.m:458)
4   UIKit                           0x3256d0a3 -[UITableView(UITableViewInternal) _createPreparedCellForGlobalRow:withIndexPath:] + 547
5   UIKit                           0x3256c181 -[UITableView(_UITableViewPrivate) _updateVisibleCellsNow:] + 1077
6   UIKit                           0x3256b90b -[UITableView layoutSubviews] + 207
7   UIKit                           0x325100df -[UIView(CALayerDelegate) layoutSublayersOfLayer:] + 183
8   CoreFoundation                  0x3544d1fb -[NSObject performSelector:withObject:] + 43
9   QuartzCore                      0x36fd8aa5 -[CALayer layoutSublayers] + 217
10  QuartzCore                      0x36fd86bd CA::Layer::layout_if_needed(CA::Transaction*) + 217
11  QuartzCore                      0x36fdc843 CA::Context::commit_transaction(CA::Transaction*) + 227
12  QuartzCore                      0x36fdc57f CA::Transaction::commit() + 315
13  QuartzCore                      0x36fd44b9 CA::Transaction::observer_callback(__CFRunLoopObserver*, unsigned long, void*) + 57
14  CoreFoundation                  0x354c2b1b __CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ + 19
15  CoreFoundation                  0x354c0d57 __CFRunLoopDoObservers + 259
16  CoreFoundation                  0x354c10b1 __CFRunLoopRun + 761
17  CoreFoundation                  0x354444a5 CFRunLoopRunSpecific + 301
18  CoreFoundation                  0x3544436d CFRunLoopRunInMode + 105
19  GraphicsServices                0x36740439 GSEventRunModal + 137
20  UIKit                           0x3253ae7d UIApplicationMain + 1081
21  MyApplication                   0x00015d9b main (main.m:16)
22  MyApplication                   0x00015d34 0x14000 + 7476

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libsystem_kernel.dylib          0x352e232c __pthread_kill + 8
1   libsystem_c.dylib               0x371de208 pthread_kill + 48
2   libsystem_c.dylib               0x371d7298 abort + 88
3   libc++abi.dylib                 0x30ea3f64 abort_message + 40
4   libc++abi.dylib                 0x30ea1346 _ZL17default_terminatev + 18
5   libobjc.A.dylib                 0x36915350 _objc_terminate + 140
6   libc++abi.dylib                 0x30ea13be _ZL19safe_handler_callerPFvvE + 70
7   libc++abi.dylib                 0x30ea144a std::terminate() + 14
8   libc++abi.dylib                 0x30ea281e __cxa_rethrow + 82
9   libobjc.A.dylib                 0x369152a2 objc_exception_rethrow + 6
10  CoreFoundation                  0x35444506 CFRunLoopRunSpecific + 398
11  CoreFoundation                  0x35444366 CFRunLoopRunInMode + 98
12  GraphicsServices                0x36740432 GSEventRunModal + 130
13  UIKit                           0x3253ae76 UIApplicationMain + 1074
14  MyApplication                   0x00015d94 main (main.m:16)
15  MyApplication                   0x00015d2c 0x14000 + 7468

Thread 1 name:  Dispatch queue: com.apple.libdispatch-manager
Thread 1:
0   libsystem_kernel.dylib          0x352d23a8 kevent + 24
1   libdispatch.dylib               0x3151fea4 _dispatch_mgr_invoke + 708
2   libdispatch.dylib               0x3151fbc2 _dispatch_mgr_thread + 30

Thread 2:
0   libsystem_kernel.dylib          0x352e2cd4 __workq_kernreturn + 8
1   libsystem_c.dylib               0x37199f36 _pthread_wqthread + 610
2   libsystem_c.dylib               0x37199cc8 start_wqthread + 0

Thread 3:
0   libsystem_kernel.dylib          0x352e2cd4 __workq_kernreturn + 8
1   libsystem_c.dylib               0x37199f36 _pthread_wqthread + 610
2   libsystem_c.dylib               0x37199cc8 start_wqthread + 0

Thread 4 name:  WebThread
Thread 4:
0   libsystem_kernel.dylib          0x352d2004 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x352d21fa mach_msg + 50
2   CoreFoundation                  0x354c23ec __CFRunLoopServiceMachPort + 120
3   CoreFoundation                  0x354c1124 __CFRunLoopRun + 876
4   CoreFoundation                  0x3544449e CFRunLoopRunSpecific + 294
5   CoreFoundation                  0x35444366 CFRunLoopRunInMode + 98
6   WebCore                         0x372c70f0 _ZL12RunWebThreadPv + 396
7   libsystem_c.dylib               0x3719f72e _pthread_start + 314
8   libsystem_c.dylib               0x3719f5e8 thread_start + 0

Thread 5:
0   libsystem_kernel.dylib          0x352d2004 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x352d21fa mach_msg + 50
2   CoreFoundation                  0x354c23ec __CFRunLoopServiceMachPort + 120
3   CoreFoundation                  0x354c1124 __CFRunLoopRun + 876
4   CoreFoundation                  0x3544449e CFRunLoopRunSpecific + 294
5   CoreFoundation                  0x35444366 CFRunLoopRunInMode + 98
6   CFNetwork                       0x33f20e14 CFURLConnectionSendSynchronousRequest + 340
7   Foundation                      0x313104a6 +[NSURLConnection sendSynchronousRequest:returningResponse:error:] + 242
8   Foundation                      0x31365312 -[NSData(NSData) initWithContentsOfURL:options:error:] + 294
9   MyApplication                   0x00017510 -[iPhoneNewsViewController getNewsFeed] (iPhoneNewsViewController.m:207)
10  Foundation                      0x31310a7a -[NSThread main] + 66
11  Foundation                      0x313a458a __NSThread__main__ + 1042
12  libsystem_c.dylib               0x3719f72e _pthread_start + 314
13  libsystem_c.dylib               0x3719f5e8 thread_start + 0

Thread 6 name:  com.apple.NSURLConnectionLoader
Thread 6:
0   libsystem_kernel.dylib          0x352d2004 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x352d21fa mach_msg + 50
2   CoreFoundation                  0x354c23ec __CFRunLoopServiceMachPort + 120
3   CoreFoundation                  0x354c1124 __CFRunLoopRun + 876
4   CoreFoundation                  0x3544449e CFRunLoopRunSpecific + 294
5   CoreFoundation                  0x35444366 CFRunLoopRunInMode + 98
6   Foundation                      0x31310bb2 +[NSURLConnection(Loader) _resourceLoadLoop:] + 302
7   Foundation                      0x31310a7a -[NSThread main] + 66
8   Foundation                      0x313a458a __NSThread__main__ + 1042
9   libsystem_c.dylib               0x3719f72e _pthread_start + 314
10  libsystem_c.dylib               0x3719f5e8 thread_start + 0

Thread 7:
0   libsystem_kernel.dylib          0x352e2cd4 __workq_kernreturn + 8
1   libsystem_c.dylib               0x37199f36 _pthread_wqthread + 610
2   libsystem_c.dylib               0x37199cc8 start_wqthread + 0

Thread 8:
0   libsystem_kernel.dylib          0x352e2cd4 __workq_kernreturn + 8
1   libsystem_c.dylib               0x37199f36 _pthread_wqthread + 610
2   libsystem_c.dylib               0x37199cc8 start_wqthread + 0

Thread 9 name:  com.apple.CFSocket.private
Thread 9:
0   libsystem_kernel.dylib          0x352e2570 __select + 20
1   CoreFoundation                  0x354c663a __CFSocketManager + 726
2   libsystem_c.dylib               0x3719f72e _pthread_start + 314
3   libsystem_c.dylib               0x3719f5e8 thread_start + 0

Thread 0 crashed with ARM Thread State:
    r0: 0x00000000    r1: 0x00000000      r2: 0x00000001      r3: 0x00000000
    r4: 0x00000006    r5: 0x3fbead98      r6: 0x00000002      r7: 0x2fe12a68
    r8: 0x328fb38b    r9: 0x30ea4a4a     r10: 0x00000000     r11: 0x328ec3e0
    ip: 0x00000148    sp: 0x2fe12a5c      lr: 0x371de20f      pc: 0x352e232c
  cpsr: 0x000f0010

Binary Images:
   0x14000 -    0xabfff +MyApplication armv7  <1d6e8c75a32f3bb89eac5790a98d8eb4> /var/mobile/Applications/364708D2-EC63-4AA5-AF06-F9A1658BAFE2/MyApplication.app/MyApplication
0x2fe13000 - 0x2fe34fff  dyld armv7  <4a817f3e0def30d5ae2032157d889c1d> /usr/lib/dyld
0x3075d000 - 0x30761fff  IOMobileFramebuffer armv7  <42dbc26828e934acabb4f3b0a35d8250> /System/Library/PrivateFrameworks/IOMobileFramebuffer.framework/IOMobileFramebuffer
0x30762000 - 0x30762fff  liblangid.dylib armv7  <644ff4bcfbf337b5b5859e3f0fc0a9a8> /usr/lib/liblangid.dylib
0x307c2000 - 0x30d06fff  FaceCoreLight armv7  <f326d88709683520b251dc53cb847c11> /System/Library/PrivateFrameworks/FaceCoreLight.framework/FaceCoreLight
0x30d07000 - 0x30d86fff  libsqlite3.dylib armv7  <bf01f5ed47b033d8bde30d735ff44416> /usr/lib/libsqlite3.dylib
0x30dae000 - 0x30e86fff  vImage armv7  <caf3648be2933384b6aa1ae7408ab4f0> /System/Library/Frameworks/Accelerate.framework/Frameworks/vImage.framework/vImage
0x30e9d000 - 0x30ea4fff  libc++abi.dylib armv7  <bab4dcbfc5943d3fbb637342d35e8045> /usr/lib/libc++abi.dylib
0x30ea5000 - 0x30ef6fff  CoreText armv7  <5bfac4ee88d03d5b87a1f105abb7756c> /System/Library/Frameworks/CoreText.framework/CoreText
0x30f88000 - 0x30f88fff  libkeymgr.dylib armv7  <ebd2dddf55d83cf48a18913968775960> /usr/lib/system/libkeymgr.dylib
0x30f89000 - 0x30ff9fff  CoreImage armv7  <86ac6f5a267637b6b7f8a831dfc7c64b> /System/Library/Frameworks/CoreImage.framework/CoreImage
0x3106c000 - 0x31077fff  AccountSettings armv7  <373e59421d983c93931cfbad87b1ae35> /System/Library/PrivateFrameworks/AccountSettings.framework/AccountSettings
0x31078000 - 0x31078fff  Accelerate armv7  <55b24cf91a8b3532bde6733c96f14c08> /System/Library/Frameworks/Accelerate.framework/Accelerate
0x3109c000 - 0x310e5fff  libc++.1.dylib armv7  <5b690e5dd5a43a7fb166ade9fe58a7a4> /usr/lib/libc++.1.dylib
0x310e6000 - 0x310e9fff  libmacho.dylib armv7  <e52b77623bd031bc807e77029566c777> /usr/lib/system/libmacho.dylib
0x311aa000 - 0x311abfff  DataMigration armv7  <d77f0e8f39ee37f5a2ac713a3fd9e693> /System/Library/PrivateFrameworks/DataMigration.framework/DataMigration
0x311be000 - 0x311fefff  libGLImage.dylib armv7  <40448706190031f6b0d9636cc11ee81d> /System/Library/Frameworks/OpenGLES.framework/libGLImage.dylib
0x311ff000 - 0x31200fff  libsystem_blocks.dylib armv7  <9fdc27af7350323bbc7d98e14e027907> /usr/lib/system/libsystem_blocks.dylib
0x31219000 - 0x31238fff  libSystem.B.dylib armv7  <0c55744b6f7335eebba4ca2c3d10b43c> /usr/lib/libSystem.B.dylib
0x31239000 - 0x31271fff  VideoToolbox armv7  <9f25f38d1cd13a1daff99cfde8884410> /System/Library/PrivateFrameworks/VideoToolbox.framework/VideoToolbox
0x31300000 - 0x3147efff  Foundation armv7  <c40ddb073142315bb4ebb214343d0b7f> /System/Library/Frameworks/Foundation.framework/Foundation
0x3148a000 - 0x3148bfff  libdyld.dylib armv7  <977b0ad6f2f433108b4a0324a57cd2ab> /usr/lib/system/libdyld.dylib
0x3148c000 - 0x314a1fff  libresolv.9.dylib armv7  <66f7557fa4b43979b186e00271839fdb> /usr/lib/libresolv.9.dylib
0x314a2000 - 0x314c7fff  OpenCL armv7  <ec915bfc3f7633dda61b5fc87459119b> /System/Library/PrivateFrameworks/OpenCL.framework/OpenCL
0x3150c000 - 0x31512fff  MobileIcons armv7  <ed1b46f917903c9b9baaa2be4392dafe> /System/Library/PrivateFrameworks/MobileIcons.framework/MobileIcons
0x31513000 - 0x31529fff  libdispatch.dylib armv7  <9ecfaef4110a3bf9a92d12f0fe8d1d78> /usr/lib/system/libdispatch.dylib
0x3152a000 - 0x31534fff  libbz2.1.0.dylib armv7  <40e4045fb79e382b8833707746cf28b1> /usr/lib/libbz2.1.0.dylib
0x31580000 - 0x31591fff  DataAccessExpress armv7  <e6144ba265da3bb7b9a263aa1a29b054> /System/Library/PrivateFrameworks/DataAccessExpress.framework/DataAccessExpress
0x31592000 - 0x31592fff  vecLib armv7  <a2cfe25e77aa36bfb4a30b2d0d2dd465> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/vecLib
0x3166a000 - 0x316a6fff  AppSupport armv7  <311eac85b2a433a884dacba77217b49e> /System/Library/PrivateFrameworks/AppSupport.framework/AppSupport
0x31841000 - 0x31865fff  PrintKit armv7  <08509c7bc915358b953de6f5cbef5c56> /System/Library/PrivateFrameworks/PrintKit.framework/PrintKit
0x318c5000 - 0x318c9fff  libGFXShared.dylib armv7  <998fccc16cf735dbb62324202995e193> /System/Library/Frameworks/OpenGLES.framework/libGFXShared.dylib
0x3199f000 - 0x319ddfff  IOKit armv7  <fcda71d29d6136dfbd84c1725f4998e5> /System/Library/Frameworks/IOKit.framework/Versions/A/IOKit
0x31a48000 - 0x31a49fff  libdnsinfo.dylib armv7  <9aede8d6579d3430ac39ae5f95cce498> /usr/lib/system/libdnsinfo.dylib
0x31b47000 - 0x31b4efff  AssetsLibraryServices armv7  <0703f561f9a038b6850d6e93bba7e5f4> /System/Library/PrivateFrameworks/AssetsLibraryServices.framework/AssetsLibraryServices
0x31b4f000 - 0x31b50fff  libremovefile.dylib armv7  <402f8956975d3b6fb86ab9b31a43242c> /usr/lib/system/libremovefile.dylib
0x31bb6000 - 0x31c00fff  libvDSP.dylib armv7  <441b42aca07b3da39feab25f8349918f> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvDSP.dylib
0x31e7c000 - 0x31fc1fff  CoreGraphics armv7  <903545b89a7f311d95100ac7d1d44709> /System/Library/Frameworks/CoreGraphics.framework/CoreGraphics
0x31fe7000 - 0x31ff6fff  GenerationalStorage armv7  <d84c3fd0e7bd36e78c256f2f4c5a4e91> /System/Library/PrivateFrameworks/GenerationalStorage.framework/GenerationalStorage
0x320fc000 - 0x32154fff  CoreAudio armv7  <be335e8eb6f93594b028a6ddd503a183> /System/Library/Frameworks/CoreAudio.framework/CoreAudio
0x32155000 - 0x32161fff  libCRFSuite.dylib armv7  <bdb2b4d1a78c39c1ba60d791207aed2a> /usr/lib/libCRFSuite.dylib
0x32168000 - 0x3216efff  liblaunch.dylib armv7  <aa2bcba6fc7a36a191958fef2e995475> /usr/lib/system/liblaunch.dylib
0x3216f000 - 0x32173fff  IOSurface armv7  <6ae77a40f8e93f28bc466ca93f5675d4> /System/Library/PrivateFrameworks/IOSurface.framework/IOSurface
0x3218a000 - 0x321adfff  Bom armv7  <c3435ecd2e5839f89de51edad0e1bb00> /System/Library/PrivateFrameworks/Bom.framework/Bom
0x3227b000 - 0x3227ffff  AggregateDictionary armv7  <3a3a33f3a05538988c6e2bb363dc46a8> /System/Library/PrivateFrameworks/AggregateDictionary.framework/AggregateDictionary
0x32292000 - 0x3229ffff  libbsm.0.dylib armv7  <750a0de73a733019a77144b805d4d2f8> /usr/lib/libbsm.0.dylib
0x32488000 - 0x32494fff  libz.1.dylib armv7  <36ce86a3dc8c344596c8c325615f374b> /usr/lib/libz.1.dylib
0x324e1000 - 0x324f2fff  libxpc.dylib armv7  <ccf25b1e49ce3b2fa58d8c8546755505> /usr/lib/system/libxpc.dylib
0x32505000 - 0x32508fff  NetworkStatistics armv7  <7848d8ebad99367cb4f7f4e3fe88e5d6> /System/Library/PrivateFrameworks/NetworkStatistics.framework/NetworkStatistics
0x32509000 - 0x329abfff  UIKit armv7  <d72bcc68e76a3a55a963590cdcffe8cd> /System/Library/Frameworks/UIKit.framework/UIKit
0x331d0000 - 0x331dffff  OpenGLES armv7  <e80acc691001301e96101bb89d940033> /System/Library/Frameworks/OpenGLES.framework/OpenGLES
0x331e0000 - 0x331eafff  libvMisc.dylib armv7  <e8248c797b9b363594bb652ddf7ce16d> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvMisc.dylib
0x33aba000 - 0x33abefff  libcache.dylib armv7  <d6a7436ed8dc33d795c9b42baf864882> /usr/lib/system/libcache.dylib
0x33ac5000 - 0x33b95fff  WebKit armv7  <6ff2796c2f933050ac6ecdee9fc6a216> /System/Library/PrivateFrameworks/WebKit.framework/WebKit
0x33c71000 - 0x33cbdfff  CoreTelephony armv7  <e8eb52ca5fe33c7488a33efd222e7804> /System/Library/Frameworks/CoreTelephony.framework/CoreTelephony
0x33cdf000 - 0x33d27fff  CoreMedia armv7  <eb1f503312be3c93b07b2d0d25177000> /System/Library/Frameworks/CoreMedia.framework/CoreMedia
0x33dcc000 - 0x33ebafff  libiconv.2.dylib armv7  <2cfefe2ad1d335dd9549562910e7a2e2> /usr/lib/libiconv.2.dylib
0x33ebb000 - 0x33f92fff  CFNetwork armv7  <765a472c824830eea91b8f02d12867e4> /System/Library/Frameworks/CFNetwork.framework/CFNetwork
0x34108000 - 0x3422dfff  JavaScriptCore armv7  <2ffc6c87b94434288366bd53765ee267> /System/Library/PrivateFrameworks/JavaScriptCore.framework/JavaScriptCore
0x342e0000 - 0x342ecfff  CoreVideo armv7  <364fa32d513f3c11b50970120545f1a8> /System/Library/Frameworks/CoreVideo.framework/CoreVideo
0x34454000 - 0x3446afff  DictionaryServices armv7  <6ed2e967136f37d4a4b9b318d6c43b83> /System/Library/PrivateFrameworks/DictionaryServices.framework/DictionaryServices
0x347ff000 - 0x34ac0fff  libLAPACK.dylib armv7  <0e94e9a7e7a334649afaccae0f1215a2> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libLAPACK.dylib
0x34ac1000 - 0x34ad7fff  libmis.dylib armv7  <258bc92be5823b239b4412dd42cb4807> /usr/lib/libmis.dylib
0x34af9000 - 0x34b4afff  libstdc++.6.dylib armv7  <c352af5a742e3c7a8d4d7e5f6f454793> /usr/lib/libstdc++.6.dylib
0x34b4b000 - 0x34b82fff  Security armv7  <eea56f71fde83c2981f9281dc7823725> /System/Library/Frameworks/Security.framework/Security
0x34c31000 - 0x34c6cfff  libCGFreetype.A.dylib armv7  <55941c96cf1f3b048e72a148c4496c16> /System/Library/Frameworks/CoreGraphics.framework/Resources/libCGFreetype.A.dylib
0x34c8c000 - 0x34c91fff  libcopyfile.dylib armv7  <52e874396c393ed29099789ce702cfe2> /usr/lib/system/libcopyfile.dylib
0x34d6c000 - 0x34d72fff  MobileKeyBag armv7  <e1f06241ef0e3f0aae00f15df572077e> /System/Library/PrivateFrameworks/MobileKeyBag.framework/MobileKeyBag
0x34e6b000 - 0x34eb5fff  ManagedConfiguration armv7  <5e0a131bbfec305ea01f9e01f486da63> /System/Library/PrivateFrameworks/ManagedConfiguration.framework/ManagedConfiguration
0x34ee3000 - 0x34eecfff  libMobileGestalt.dylib armv7  <4a15e845dc6f3a4a980de66c1cc44c42> /usr/lib/libMobileGestalt.dylib
0x350e8000 - 0x350fcfff  PersistentConnection armv7  <65682d21486836a3aa3e17b9461e7b3a> /System/Library/PrivateFrameworks/PersistentConnection.framework/PersistentConnection
0x35140000 - 0x351b9fff  ProofReader armv7  <6db611d8df6530d480f97a40bc519f70> /System/Library/PrivateFrameworks/ProofReader.framework/ProofReader
0x352c7000 - 0x352cafff  CaptiveNetwork armv7  <f5cc4b97ce9432da9426f12621453325> /System/Library/PrivateFrameworks/CaptiveNetwork.framework/CaptiveNetwork
0x352d1000 - 0x352e7fff  libsystem_kernel.dylib armv7  <7ac5560851ce3cb3981068092074b409> /usr/lib/system/libsystem_kernel.dylib
0x352e8000 - 0x353c7fff  RawCamera armv7  <98fb7b5042b2314b86f4be8d2881bd04> /System/Library/CoreServices/RawCamera.bundle/RawCamera
0x35435000 - 0x3554cfff  CoreFoundation armv7  <6d450fe923d7387f8b01845e0edd713d> /System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
0x356d0000 - 0x35715fff  GeoServices armv7  <a26be2e76e8730ab91a16502aba376be> /System/Library/PrivateFrameworks/GeoServices.framework/GeoServices
0x35861000 - 0x35896fff  SystemConfiguration armv7  <4464a4e3bb3f32f7abaa35ebf31fda49> /System/Library/Frameworks/SystemConfiguration.framework/SystemConfiguration
0x35897000 - 0x359e0fff  libicucore.A.dylib armv7  <b70646b63f1f3b33896dd8cb91b8dab1> /usr/lib/libicucore.A.dylib
0x359e8000 - 0x35a31fff  AddressBook armv7  <b17a2962e9043e0385c3c2c652155f2b> /System/Library/Frameworks/AddressBook.framework/AddressBook
0x35d37000 - 0x35d3dfff  liblockdown.dylib armv7  <9e45ce468a6f31e5b8263f2c224aa800> /usr/lib/liblockdown.dylib
0x35d3e000 - 0x35efbfff  ImageIO armv7  <02e3578171fa3b6a969b244275fd2bab> /System/Library/Frameworks/ImageIO.framework/ImageIO
0x35f26000 - 0x35f28fff  MobileInstallation armv7  <215d93dbb0f63cbf828f9126eb7b5349> /System/Library/PrivateFrameworks/MobileInstallation.framework/MobileInstallation
0x35ffe000 - 0x3604cfff  CoreLocation armv7  <44550ebedf23334d85441d9743b74e03> /System/Library/Frameworks/CoreLocation.framework/CoreLocation
0x36209000 - 0x3620cfff  libsystem_network.dylib armv7  <356cb66612e836968ef24e6e5c3364cc> /usr/lib/system/libsystem_network.dylib
0x363c5000 - 0x365a9fff  AudioToolbox armv7  <c91e27850452330ea804db6408840fd2> /System/Library/Frameworks/AudioToolbox.framework/AudioToolbox
0x365aa000 - 0x365aafff  libunwind.dylib armv7  <e0a73a57795f3e1698a52ebe6fc07005> /usr/lib/system/libunwind.dylib
0x366e8000 - 0x366eefff  libnotify.dylib armv7  <9406297de3e43742887890662a87ab53> /usr/lib/system/libnotify.dylib
0x36733000 - 0x3673bfff  ProtocolBuffer armv7  <0e846afacf823d2b8c029cc3010a8253> /System/Library/PrivateFrameworks/ProtocolBuffer.framework/ProtocolBuffer
0x3673c000 - 0x36746fff  GraphicsServices armv7  <e21a6e61bdd136b6805a9e3abe2e3d1f> /System/Library/PrivateFrameworks/GraphicsServices.framework/GraphicsServices
0x3675c000 - 0x36772fff  EAP8021X armv7  <fffe86a22bc434a6ae84f23bfecef9d6> /System/Library/PrivateFrameworks/EAP8021X.framework/EAP8021X
0x36906000 - 0x3690afff  libAccessibility.dylib armv7  <9a17d07b5a3b38cfafdf16f78c99b572> /usr/lib/libAccessibility.dylib
0x3690c000 - 0x369d2fff  libobjc.A.dylib armv7  <90014d1bc583366d85622e43097df416> /usr/lib/libobjc.A.dylib
0x369d3000 - 0x369d3fff  libgcc_s.1.dylib armv7  <eb82984fa36c329387aa518aa5205f3d> /usr/lib/libgcc_s.1.dylib
0x36b87000 - 0x36ba7fff  libxslt.1.dylib armv7  <39348471007e39dab80af68b08390456> /usr/lib/libxslt.1.dylib
0x36d0b000 - 0x36d28fff  libsystem_info.dylib armv7  <50863bcbf478323e96a8e5b1a83ea6f9> /usr/lib/system/libsystem_info.dylib
0x36d29000 - 0x36d38fff  SpringBoardServices armv7  <ca5b10014b473d2eaec5c48d89ee1b54> /System/Library/PrivateFrameworks/SpringBoardServices.framework/SpringBoardServices
0x36d79000 - 0x36d79fff  libCVMSPluginSupport.dylib armv7  <a80aaa9989483ce3a496a061fd1e9e0a> /System/Library/Frameworks/OpenGLES.framework/libCVMSPluginSupport.dylib
0x36ea7000 - 0x36ea8fff  CoreSurface armv7  <7850befd26b630f183ee326aaadd7b34> /System/Library/PrivateFrameworks/CoreSurface.framework/CoreSurface
0x36f96000 - 0x36f99fff  libcompiler_rt.dylib armv7  <b2c05d8601c13be884097192dca4e187> /usr/lib/system/libcompiler_rt.dylib
0x36fd3000 - 0x370c4fff  QuartzCore armv7  <a2afbe6483683d05ad51b106f98776e2> /System/Library/Frameworks/QuartzCore.framework/QuartzCore
0x37149000 - 0x3714afff  libsystem_sandbox.dylib armv7  <66e985f3eea03ef08afb7cf4c153f76e> /usr/lib/system/libsystem_sandbox.dylib
0x37191000 - 0x3721dfff  libsystem_c.dylib armv7  <f859ce1ad1773f0ba98d7c6e135b7697> /usr/lib/system/libsystem_c.dylib
0x3721e000 - 0x379dcfff  WebCore armv7  <814351ff217e3425a8e532c2e2251f73> /System/Library/PrivateFrameworks/WebCore.framework/WebCore
0x37d90000 - 0x37da9fff  libRIP.A.dylib armv7  <1828cddc5dd93c61afbefb59587d7f8a> /System/Library/Frameworks/CoreGraphics.framework/Resources/libRIP.A.dylib
0x37deb000 - 0x37e95fff  libBLAS.dylib armv7  <bf822cc1a3243ae7b104cf73ca22d352> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libBLAS.dylib
0x37eac000 - 0x37eeffff  libcommonCrypto.dylib armv7  <95b49daf4cf038b6bea8010bba3a1e26> /usr/lib/system/libcommonCrypto.dylib
0x37f1a000 - 0x37fc7fff  libxml2.2.dylib armv7  <58d47f064e0232119f4b838ad659f9c1> /usr/lib/libxml2.2.dylib
0x38007000 - 0x3800ffff  MobileWiFi armv7  <b76c3e9fb78234c392058250d4620e72> /System/Library/PrivateFrameworks/MobileWiFi.framework/MobileWiFi
0x38012000 - 0x38017fff  libsystem_dnssd.dylib armv7  <27bb5462450732e380f5a2c170546e93> /usr/lib/system/libsystem_dnssd.dylib
0x380bb000 - 0x380fffff  MobileCoreServices armv7  <757226927a873d5492be721908077b48> /System/Library/Frameworks/MobileCoreServices.framework/MobileCoreServices
0x3834e000 - 0x38350fff  libCoreVMClient.dylib armv7  <d4d4aa3090c83e87bcb15ed00b93fd5c> /System/Library/Frameworks/OpenGLES.framework/libCoreVMClient.dylib
0x3836b000 - 0x3836efff  CoreTime armv7  <a398de5ba1e43a11b7008e9bb5a7f6fe> /System/Library/PrivateFrameworks/CoreTime.framework/CoreTime 
```

我在日志中找不到什么问题，线程 0 崩溃了，但我不知道为什么。

该应用程序对我来说很好，但我的测试人员 - 在同一 iPhone (3,1) 和同一 iOS 版本上使用临时构建。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T14:21:06.483

您的应用程序正在调用 UIKit 以强制在 libc 中中止调用。在您表示崩溃日志之前，我们真的无法告诉您更多信息。

更多信息可以在这里找到： [Symbolicating iPhone App Crash Reports](https://stackoverflow.com/questions/1460892/symbolicating-iphone-app-crash-reports)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T14:22:14.033

您可以将任何崩溃报告拖放到 Xcode Organizer 的 Device Logs 部分，它们会自动为您符号化。我认为如果您使用 Build & Archive 构建该版本的应用程序，这将最有效。它会告诉你发生错误的文件行，

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-07T14:56:29.733

它看起来像在线错误`iPhoneNewsViewController.m:458`。看起来`NSArray`' 的`objectAtIndex:`方法有问题。可能，您正在从空数组或索引超出数组范围的对象请求对象。

# solr - 如何确保 solr 返回按位置相关性与关键字相关性排序的结果

> ID：10483677
> 
> 赞同：0
> 
> 时间：2012-05-07T14:14:58.483
> 
> 标签：solr, sunspot-solr

我有一个模型，它有一个位置和描述/标题，这个信息在 Solr 中被索引。当我搜索数据时，我试图先按位置，然后按关键字来确定相关性，但是，我似乎无法完成它 - 如果同时提供关键字和位置，则结果首先按关键字排序。

```
searchable do
  location :coordinates do
    Sunspot::Util::Coordinates.new(self.location.latitude, self.location.longitude) if self.location
  end
  text :title
  text :description
  ...
end 
```

搜索被定义为

```
 search.build do
    with(:coordinates).near(latitude, longitude, :precision=>radius)
    keywords "#{search_words}", :fields => [:title, :description], :minimum_match => 1
  end 
```

如果它有帮助，当没有提供关键字时，结果已经按位置排序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T16:46:31.450

尝试强制距离优先于关键字。

`:score`是一个内部字段，包含每个搜索结果的 Solr dismax 分数。`:score, :desc`当您未指定`order_by`.

`order_by_geodist(:coordinates, latitude, longitude)`强制 Solr 忽略 dismax 分数，所以你得到一个距离排序。之后添加`order_by(:score, :desc)`将重新考虑 dismax 分数，但仅当距离相等（或缺失）时。

```
search.build do
  with(:coordinates).near(latitude, longitude, :precision=>radius)
  keywords "#{search_words}", :fields => [:title, :description], :minimum_match => 1
  order_by_geodist(:coordinates, latitude, longitude)
  order_by(:score, :desc)
end 
```

# linux - 使用 shell 脚本删除文件夹的内容

> ID：10483678
> 
> 赞同：7
> 
> 时间：2012-05-07T14:15:00.900
> 
> 标签：linux, macos, bash, shell, command

我在尝试清空脚本中的文件夹时遇到问题。

这在我的命令行中工作：

```
rm -r Folder1/Folder2/* 
```

但是如果在我的脚本中我这样做：

```
DIR="Folder1/Folder2/"
rm -r "$DIR*" 
```

它说“rm：Folder1/Folder2/*：没有这样的文件或目录”，问题出在哪里？

我在尝试命令时在同一文件夹中运行脚本。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-07T14:17:26.533

全局扩展不会发生在引号内。

尝试：

```
rm -r -- "$DIR"* 
```

（只要确保你没有在引号后面加空格。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T14:22:04.630

```
rm -r $DIR* 
```

That should work, without quotes

# java - 如何在语法上改进包含语句

> ID：10483684
> 
> 赞同：-1
> 
> 时间：2012-05-07T14:15:14.550
> 
> 标签：java, jsp

使用下面的代码，我需要维护包含加载顺序，但我想知道是否有更好的方法可以在不使用这么多的情况下在语法上完成此操作`<%` `%>`

**基础.jsp**

```
<%

List<String> cssFiles = new ArrayList<String>();
List<String> jsFiles = new ArrayList<String>();

/*
 * Load all CSS/JS files we want on every page
 */

%>
<%@ include file="includes/jquery.jsp" %>
<%

cssFiles.add("/css/global");
jsFiles.add("/js/global");

%>
<%@ include file="includes/jquery_ui.jsp" %> 
```

**视图.jsp**

```
<%@ include file="../base.jsp" %>
<% cssFiles.add("/css/content/view"); %>
<%@ include file="../header.jsp" %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T14:54:29.313

一个明显更好的方法是使用模型-视图-控制器模式并将所有代码移动到控制器中，因此您的 JSP 首先不会有那么多`<% %>`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T15:08:18.490

`<% /*foo*/ %>`在现代 JSP 应用程序中根本不需要表单的 Scriptlet 代码片段。使用表达式语言将数据注入视图，并利用标签库进行显示逻辑。

使用 MVC 方法进行开发。开发人员通常会利用一个框架（其中有很多。）

至少，使用[servlet 作为控制器，只使用 JSP 作为视图](http://www.datadisk.co.uk/html_docs/jsp/jsp_scriptless_jsp.htm)。

# c# - Gridview 人口

> ID：10483688
> 
> 赞同：3
> 
> 时间：2012-05-07T14:15:25.633
> 
> 标签：c#, asp.net

我整个周末都在看这段代码。我知道有数据，我可以通过其他查询提取它，但 GridView 不会显示和填充。建议？

```
 string sqlSelection =
                    "SELECT * FROM [COMPANY].[dbo].[parking] ";

        SqlConnection cn = new SqlConnection(ConfigurationManager.ConnectionStrings["DATACONNECTION"].ToString());
        //This connection works in MSSMS and in other pages I have on the same server

        SqlDataAdapter sda = new SqlDataAdapter(sqlSelection, cn);

        SqlCommandBuilder scb = new SqlCommandBuilder(sda);

        DataTable dTable = new DataTable();

        sda.Fill(dTable);
            //debug shows: dTable <not set>

        GrdDynamic.Visible = true;
        GrdDynamic.DataSource = dTable;
        GrdDynamic.DataBind(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T05:22:38.443

当连接字符串中的帐户无权访问数据库时，我会出现这种行为，因为 Web 服务的帐户无权访问该帐户。如果您使用的是机器帐户（不是 sql 登录名），请尝试创建一个 sql 登录名（如果可能）并将其分配给数据库。或者您可以临时使用匿名帐户来使用您用于管理工作室的登录名（很可能是您自己）。当 Web 服务器由于路由问题而无法看到 SQL 服务器时，我也遇到过这种情况。您可以通过转到服务器并尝试 ping sql 服务器来测试最后一个。最糟糕的一种情况是防火墙阻止端口连接。对于这种情况，我不确定是否可以进行可靠的防火测试，因为这在很大程度上取决于您的网络配置方式。

# android - ListView 背景图片裁剪

> ID：10483690
> 
> 赞同：0
> 
> 时间：2012-05-07T14:15:28.927
> 
> 标签：android, image, listview, background, crop

我有带有图像背景的 ListView（它实际上是一个片段），但我仍然设置了背景`getListView().setBackgroundResource(R.drawable.table);`：解决这个问题，`getListView().setPadding()`但我无法裁剪背景图像。还有其他方法吗？我需要带有附加按钮的背景视图...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T14:31:20.270

方法 setPadding 只是影响 ListView 的内容，而不是它的容器，例如背景。所以基本上填充会在 ListView 内产生未使用的空间。如果要限制 ListView 可以使用 margin 属性：

```
LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams  (LinearLayout.LayoutParams.FILL_PARENT, LinearLayout.LayoutParams.WRAP_CONTENT);
layoutParams.setMargins(30, 20, 30, 0); 
```

另一种在我看来更好的使用下面带有按钮的 ListView 的方法是：使用具有垂直方向的 LinearLayout。将 ListView 和 Button 添加到此布局中。ListViews 的高度是`fill_parent`和 Button 的`wrap_content`. 现在将 Button 的值为 0 和 ListView 的值为 1 添加到 layout_weight。结果是 Button 被绘制在屏幕底部，而 ListView 可以扩展到屏幕的其余部分（也是它的背景）。

# excel - 避免在 VBA 中使用 ADO 记录集检索“回声”打印

> ID：10483696
> 
> 赞同：0
> 
> 时间：2012-05-07T14:15:41.727
> 
> 标签：excel, vba, odbc, ado, recordset

我不是 VBA 和 excel 宏的出色专家，但我需要执行数据库中存在的 SQL 宏。该宏在其 SQL 定义中执行一些“echo”操作（开头 4 个“echo”，结尾有 2 个“echo”），然后 SQL 宏检索 18 列。删除“回声”检索执行良好，但我需要在 SQL 代码中维护“回声”，因为此宏是由系统自动创建的。为了从我的外部源中检索数据，我使用了 ADO 记录集，如下所示：

```
'If the recordset is empty
If (rs.EOF And rs.BOF) Then
    iReply = MsgBox(Prompt:="No data retrieved", _
        Buttons:=vbOKOnly, Title:="Error")
Else 'If the recordset contains data
    rs.MoveFirst
    Row = 2
    Do While (rs.EOF = False And rs.BOF = False)         
        p = rs.GetRows
        Sheet2.Range("A" & Row).Value = p(0, 0)
        Sheet2.Range("B" & Row).Value = p(1, 0)
        Sheet2.Range("C" & Row).Value = p(2, 0)
        Sheet2.Range("D" & Row).Value = p(3, 0)
        Sheet2.Range("E" & Row).Value = p(4, 0)
        Sheet2.Range("F" & Row).Value = p(5, 0)
        Sheet2.Range("G" & Row).Value = p(6, 0)
        Sheet2.Range("H" & Row).Value = p(7, 0)
        Sheet2.Range("I" & Row).Value = p(8, 0)
        Sheet2.Range("J" & Row).Value = p(9, 0)
        Sheet2.Range("K" & Row).Value = p(10, 0)
        Sheet2.Range("L" & Row).Value = p(11, 0)
        Sheet2.Range("M" & Row).Value = p(12, 0)
        Sheet2.Range("N" & Row).Value = p(13, 0)
        Sheet2.Range("O" & Row).Value = p(14, 0)
        Sheet2.Range("P" & Row).Value = p(15, 0)
        Sheet2.Range("Q" & Row).Value = p(16, 0)
        Sheet2.Range("R" & Row).Value = p(17, 0)
        Row = Row + 1
    Loop
End If 
```

事实是，使用 SQL 宏中的“echo”，只有第一个“echo”被检索并打印在我的 excel 表的第一列中，然后它不会检索其他任何东西，其他的“echo”和我感兴趣的 18 列数据。我尝试使用记录集 MoveNext 和 Move 方法移动到第 5 个位置（因为我认为第 5 个位置对应于前 18 列数据，因为我在开头有 4 个“回声”）但它没有工作:(即使移动到第二个位置也不起作用，所以我得出结论，在我的记录集中我只有一个对应于第一个“回声”的条目，然后记录集到达其 EOF 并退出循环。有没有办法或改变我的代码可以避免检索 SQL 宏产生的“回声”吗？

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T15:46:20.873

这里可能有一个错误，但我认为你想要这样的东西。您只想调用一次 GetRows，因为调用它之后，它与说 MoveLast 是一样的。这里的想法是将记录集转储到一个数组中，然后遍历“行”的每个元素（这是第二维）。在其中，循环浏览第 4 到 21 列，我认为这会跳过你的“回声”。

```
Dim p as Variant
Dim i as Long
Dim j as Long

'If the recordset is empty
If (rs.EOF And rs.BOF) Then
    iReply = MsgBox(Prompt:="No data retrieved", _
        Buttons:=vbOKOnly, Title:="Error")
Else 'If the recordset contains data
   'just fetch it once
   p = rs.GetRows
   'loop through the rows
   For i = Lbound(p,2) to Ubound(p,2)
      'loop through the columns that don't have "echo"
      For j = 4 to 21
        Sheet2.Cells(i,j-2).Value = p(j, i)
      Next j
   Next i
End If 
```

# java - 使用日历设置日期的问题

> ID：10483714
> 
> 赞同：1
> 
> 时间：2012-05-07T14:17:19.457
> 
> 标签：java, datetime, calendar

我正在尝试使用以下代码段将日期设置为 2012 年 12 月 31 日，但我得到的是 2013 年 3 月 3 日，这里有什么问题。

```
Calendar today = Calendar.getInstance();
today.set(Calendar.MONTH, 13);
today.set(Calendar.DAY_OF_MONTH, 31);
today.set(Calendar.YEAR, 2012);

long calendarNeverEndDate = today.getTime().getTime();
System.out.println("calendarNeverEndDate:"
                   + sdf.formatLocal(calendarNeverEndDate)); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T14:19:49.867

That's because months are 0-indexed (yes, it's inconsistent with days :-( ).

**edit:** As Romain mentioned, it's better to use constants

```
Calendar.DECEMBER 
```

# android - 安卓引导

> ID：10483715
> 
> 赞同：0
> 
> 时间：2012-05-07T14:17:23.057
> 
> 标签：android, menu, sequence, boot, launcher

考虑 ICS 设备的启动顺序，
什么是 android 端（java，不是在谈论底层 linux 系统）引导应用程序堆栈？我知道实现底部ICS菜单栏的应用是SystemUI.apk，但是之前加载了什么？
谁（如果有）在没有收到任何广播意图的情况下启动？
可能是加载后启动Launcher和SystemUI的ActivityManager？

在此先感谢
L

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T06:20:17.533

你所说的“应用程序堆栈”是什么意思，你想做什么？通常，系统服务器启动所有服务和活动管理器。然后活动管理器发送并`Intent.CATEGORY_HOME`导致启动器启动。当您按下启动器上的图标时，它会调用活动管理器，然后再与 zygote 对话，zygote 会自行为新应用程序创建一个进程。

# iphone - OpenGL ES 问题 - 应该很简单？

> ID：10483722
> 
> 赞同：0
> 
> 时间：2012-05-07T14:18:13.057
> 
> 标签：iphone, opengl-es, opengl-es-2.0

我对 OpenGL ES 很陌生，我正在尝试使用一些着色器。我的问题是，当我初始化矩阵中的一些值时，但不是全部，默认值是多少？我以为它会为零，但是我在片段着色器中使用了以下代码：

```
highp vec4 c = texture2D(inputImageTexture, textureCoordinate) ;

highp mat4 m;

m[0] = vec4(1.0);
m[1] = vec4(1.0);
m[2] = vec4(1.0);

c = m * c;

gl_FragColor = c; 
```

显然，数组的最后一列还没有初始化。只是为了确保 m 的最后一列中的所有值都为零，我添加了该行`m[3] = vec4(0.0);`并得到了不同的结果。我尝试将第四列设置为`255.0`and `1.0`，但每次我得到不同的结果时，我没有初始化该列。有谁知道默认值是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T14:43:41.957

默认值是“未定义”，就像在 C 中一样。换句话说，它可以是在分配矩阵之前该内存单元中的任意值，因为分配不会以任何其他方式清除或初始化单元。在以一种标准方式使用矩阵之前，您应该始终初始化矩阵的所有元素。

# web-services - 使用 Sharepoint 2010 Web 服务修改文档的 ContentType

> ID：10483730
> 
> 赞同：0
> 
> 时间：2012-05-07T14:18:41.540
> 
> 标签：web-services, sharepoint-2010

似乎 Sharepoint List Service 的[UpdateListItems](http://msdn.microsoft.com/en-us/library/websvclists.lists.updatelistitems.aspx)是正确使用的功能，但正确的 xml 用于实际更新特定文档的内容类型是什么？所以，如果我有这个开始：

```
XmlDocument xmlDoc = new XmlDocument();
XmlElement updates = xmlDoc.CreateElement("Batch");
updates.SetAttribute("OnError", "Continue");
updates.SetAttribute("ListVersion", "0");
updates.SetAttribute("ViewName", "");
updates.InnerXml = "<Method ID="1" Cmd="Update"><what should go here?/></Method";

ListService.UpdateListItems(repositoryId, updates); 
```

更新列表项的内容类型的内部 xml 应该是什么样子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T17:43:56.483

这段代码对我有用，也许会有所帮助：

```
<Method ID='1' Cmd='Update'><Field Name='FSObjType'>1</Field><Field Name='ContentType'>SubFolder</Field><Field Name='BaseName'>MyFolder</Field> <Field Name='ID'>New</Field></Method> 
```

问候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T17:12:43.173

这被接受为有效，并更改了列表项的 ContentType：

```
updates.InnerXml = "<Method ID='1' Cmd='Update'><Field Name='ID'>" + listItemId + 
"</Field><Field Name=\"Title\">ModifiedFile</Field>"+
"<Field Name='FSObjType'>0</Field><Field Name='ContentType'>" + contentTypeName + 
"</Field></Method>"; 
```

# html - 为什么垂直滚动条出现时我的 div 的大小会发生变化？

> ID：10483734
> 
> 赞同：0
> 
> 时间：2012-05-07T14:19:12.490
> 
> 标签：html, css

当我更改页面的高度以显示垂直滚动条时，页面上的 div 元素会伸出，页面底部会出现一个空白块。当前站点在这里：

[http://cliqups.herokuapp.com/](http://cliqups.herokuapp.com/)

我应该怎么做才能停止调整 div 的大小？我应该完全禁用垂直滚动条吗？

为了后代，我添加了一些屏幕截图。

没有滚动条： ![在此处输入图像描述](../Images/db8a713b2b0d7bf7c6d33636cb5d7da7.png)

带滚动条： ![在此处输入图像描述](../Images/9c9ec999331587df4ffe8e151399b9c7.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T14:26:36.880

这是您在 /assets/application-67b0f50f40b31242c0515ffd40544866.css 文件中的罪魁祸首，@media-queries css 在特定的屏幕高度启动。

```
@media screen and (max-height: 855px)
    div#wrapper div.container div.sign-up {
    margin-top: 271px;
    } 
```

找到这条线并取出 margin-top: 271px; 你应该会看到多余的间距消失了。您无需禁用滚动条。我希望这有帮助。

# c++ - 类型转换的元函数

> ID：10483739
> 
> 赞同：2
> 
> 时间：2012-05-07T14:19:25.687
> 
> 标签：c++, templates, metaprogramming, boost-mpl

> **可能重复：**
> [我必须在哪里以及为什么要放置“模板”和“类型名称”关键字？](https://stackoverflow.com/questions/610245/where-and-why-do-i-have-to-put-the-template-and-typename-keywords)

我正在通过《C++ 模板元编程：Boost 及其他领域的概念、工具和技术》一书学习模板编程，但不知何故，我在第一个练习中就陷入了困境。

任务是编写一个一元元函数`add_const_ref<T>`，`T`如果它是引用类型则返回，否则返回`T const &`。

我的做法是：

```
template <typename T>
struct add_const_ref
{
    typedef boost::conditional
      <
        boost::is_reference<T>::value, // check if reference
        T,                             // return T if reference
        boost::add_reference           // return T const & otherwise
          <
            boost::add_const<T>::type
          >::type
      >::type
    type;
}; 
```

我尝试对其进行测试（我使用的是 Google 单元测试框架，因此使用了语法）：

```
TEST(exercise, ShouldReturnTIfReference)
{
    ASSERT_TRUE(boost::is_same
      <
        int &,
        add_const_ref<int &>::type
      >::value
    );
} 
```

但它不编译：

```
main.cpp:27:5: error: type/value mismatch at argument 1 in template parameter list for ‘template<class T> struct boost::add_reference’
main.cpp:27:5: error:   expected a type, got ‘boost::add_const<T>::type’
main.cpp:28:4: error: template argument 3 is invalid 
```

我真的不明白为什么`boost::add_const<T>::type`不符合成为类型的要求。我会很感激提示我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T14:26:12.707

你在`typename`这里错过了很多 s ：

```
template <typename T>
struct add_const_ref
{
    typedef typename boost::conditional
    //      ^^^^^^^^
      <
        boost::is_reference<T>::value, // check if reference
        T,                             // return T if reference
        typename boost::add_reference           // return T const & otherwise
    //  ^^^^^^^^
          <
            typename boost::add_const<T>::type
    //      ^^^^^^^^
          >::type
      >::type
    type;
}; 
```

# jboss - Can't lookup OSGI services through JNDI

> ID：10483740
> 
> 赞同：3
> 
> 时间：2012-05-07T14:19:27.153
> 
> 标签：jboss, osgi, jndi

I'm working with JBossAS7. My application has some OSGI modules and big non-OSGI part. I tried lookup osgi services in non-osgi subsystem through JNDI but they are not present in JNDI context. I found similar problem at [JBOSS 7 - Osgi Bundles not present in JNDI TREE](https://stackoverflow.com/questions/7513242/jboss-7-osgi-bundles-not-present-in-jndi-tree) but I dont found any solution there. If JBoss team didn't implement this functionality yet, how can I resolve this problem now?

I tried adding my service to JNDI context manually but got an exception because JNDI context is read only(according to [https://issues.jboss.org/browse/AS7-421](https://issues.jboss.org/browse/AS7-421))

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T16:04:19.450

它还没有完全集成（监视[JBOSGI-81](https://issues.jboss.org/browse/jbosgi-81)以检查状态），但是我认为您可以通过使用 Apache Aries JNDI OSGi 捆绑包并将它们部署在 JBoss AS7 中来完成这项工作。

为此，请部署并启动

*   [Aries JNDI 捆绑](http://search.maven.org/remotecontent?filepath=org/apache/aries/jndi/org.apache.aries.jndi/0.3.1/org.apache.aries.jndi-0.3.1.jar)包
*   白羊座[代理捆绑](http://search.maven.org/remotecontent?filepath=org/apache/aries/proxy/org.apache.aries.proxy/0.4/org.apache.aries.proxy-0.4.jar)
*   [白羊座实用程序](http://search.maven.org/remotecontent?filepath=org/apache/aries/org.apache.aries.util/0.4/org.apache.aries.util-0.4.jar)包

JNDI 包会抱怨它不能使用 NamingManager 设置一些静态，但是您可以忽略它，因为 AS7 JNDI 会处理这些。安装了上面的捆绑包后，您应该可以做到

```
osgi:service/org.foo.SomeInterface 
```

和

```
osgi:servicelist 
```

键入查找... 例如，您可以尝试以下方法来查找框架注册的 Start Level Service：

```
osgi:service/org.osgi.service.startlevel.StartLevel 
```

我刚刚用 AS7 7.1.2 尝试过它，它对我有用......

需要注意的一点是，如果您要查找的实体实现了在另一个 AS7/MSC 模块或 OSGi 包中定义的接口，那么如果您希望能够转换到此接口，则需要确保消费者对其具有可见性。在 OSGi 世界中，您可以只导入包，但在 AS7 模块（例如，war 文件）中，您可以通过添加*Dependencies*清单头来实现这一点。

# ruby-on-rails - 路由错误“未初始化的常量信息”

> ID：10483750
> 
> 赞同：3
> 
> 时间：2012-05-07T14:20:05.563
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我在 /lib 中有一个模块

```
Module Info
class Inf

  def getNum
    num = Array.new

    num.push(2,1)

  end

end 
```

在控制器 informations_controller 我有“需要信息”和以下代码：

```
 def index
    @informations = Info::Inf.getNum().num

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @informations }
    end
  end 
```

但它总是给出错误

```
Routing Error

uninitialized constant Info 
```

由于路由器我已经定义了“root :to => 'informations#index'”，可能会缺少什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T14:37:05.973

它不应该是`module`Module 并且你应该命名文件`info.rb`并且你应该确保 lib 在 auto_load 路径中`config/application.rb`

```
config.autoload_paths += %W(#{config.root}/lib) 
```

所以它应该是这样的`lib/info.rb`：

```
module Info
  class Inf
    ...
  end
end 
```

# actionscript-3 - Setting focus of input field in externally loaded swf

> ID：10483753
> 
> 赞同：0
> 
> 时间：2012-05-07T14:20:20.937
> 
> 标签：actionscript-3, flash, focus, textinput, setfocus

I'm loading a swf form into my swf movie (to save on file size). I have a 'faux-form' of static MCs in the main swf, and when a user clicks one, it loads the 'real form' which is its own swf file. What I want to do is properly set the focus of the real form's input field, based on the MC of the faux form the user clicks.

For example: User watches animation and sees form on last frame (faux form). User clicks on the 'city' input field to enter their city. Externally loaded swf file with 'real form' is immediately loaded into the main swf on top of the faux form, so the user has active input fields to interact with. Text input field 'city' should now be in focus.

Thanks in advance for any help!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T16:53:45.030

如果您有对要设置焦点的文本输入的引用，可以使用以下内容：

```
var cityInputField:TextField = mc.getChildByName("cityInputField") as TextField;
if(cityInputField)
   stage.focus = cityInputField; 
```

# get - Ext.NET 2.0 how to get the value of datefield

> ID：10483757
> 
> 赞同：1
> 
> 时间：2012-05-07T14:20:35.083
> 
> 标签：get, ext.net, datefield

I want to get from datefield. Ext.NET 2.0 is a little bit difficult to study. This is a source of simple datefield.

```
<ext:DateField ID="DateField1" runat="server" 
     Vtype="daterange" FieldLabel="To" EnableKeyEvents="true" /> 
```

and I'd like to set the value on my Textbox.

```
myTextbox.setValue(App.MainContent_DateField1.getValue()); 
```

help!!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T14:06:08.590

刚刚找到了答案 - 使用`getRawValue()`函数

```
myTextbox.setValue(App.MainContent_DateField1.getRawValue()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T07:17:05.403

我测试了基本场景，它似乎可以正常工作。

您可能需要调用`.format()`将您的`DateField`值转换为格式良好的字符串，但这不是必需的。

这是演示该场景的完整示例。`Date`从 中选择一个`DateField`，然后单击`Button`。该`DateField`值将被复制到`TextField`.

**例子**

```
<%@ Page Language="C#" %>

<%@ Register assembly="Ext.Net" namespace="Ext.Net" tagprefix="ext" %>

<!DOCTYPE html>

<html>
<head runat="server">
    <title>Ext.NET Example</title>
</head>
<body>
    <form runat="server">
        <ext:ResourceManager runat="server" />

        <ext:DateField ID="DateField1" runat="server" />
        <ext:TextField ID="TextField1" runat="server" />

        <ext:Button 
            runat="server" 
            Text="Submit" 
            OnClientClick="TextField1.setValue(DateField1.getValue().format('d-M-Y'));" 
            />
    </form>
</body>
</html> 
```

# c# - 匹配某个正则表达式后的任何 az/AZ 和 - 字符

> ID：10483766
> 
> 赞同：0
> 
> 时间：2012-05-07T14:21:18.687
> 
> 标签：c#, asp.net, regex

我需要某个字符串采用这种格式：[0000] anyword

所以在 [] 括号之间我需要 4 个数字，后跟一个空格。之后，只允许从 a 到 z 的字符和 - 字符。

所以应该允许这样做：

[0000] 富吧

[0000] 富

[0000] foo-bar-foo

ETC..

到目前为止，我有这个：

```
\[[0-9]{4}\]\s 
```

这与 [0000] 匹配，因此它匹配其中包含 4 个数字的括号和空格。在那之后我似乎找不到允许字符的东西。我试过放一个“。” 在表达式的末尾，因为这应该匹配任何字符，但这似乎不起作用。

```
\[[0-9]{4}\]\s^[A-Z]+[a-zA-Z]*$ 
```

以上也不起作用..

我需要这个表达式作为 asp.net 自定义验证器的 Validationexpression。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T14:29:16.603

`(\[[0-9]{4}\])\s+([A-z\-]+)`应该有希望工作。它还将数字和字母捕获到两个捕获组中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T14:30:56.417

试试这个

```
@"\[[0-9]{4}\] [a-zA-Z]+(-[a-zA-Z]+)*" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T14:34:14.940

这适用于您的输入：[http](http://regexr.com/?30sb7) ://regexr.com/?30sb7 。与 Cornstalk 的答案不同，它不会捕获任何东西，并且`-`如果它被转义，确实可以稍后放置在一个范围内。

# objective-c - ipad frame max size is not enough

> ID：10483770
> 
> 赞同：1
> 
> 时间：2012-05-07T14:21:37.967
> 
> 标签：objective-c, ios, cocoa-touch

I'm developing an ipad application about 2d drawing. I need a UIView.frame size of 4000x4000\. But if I set a frame with size 4000x4000 the application crash since i get memory warning.

Right night I'm using 1600*1000 frame size and the user can add new object (rectangle) on frame. User can also translate fram along x and y axis using pan gesture in order to see or add new object.

Have you got some suggestion? how can I tackle this problem?

thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T18:02:49.103

好吧，我会建议长期以来在视频游戏中使用的东西 - 创建一个平铺 LOD 机制，只有当您放大特定图块时，它们才会以更高的分辨率渲染，而当缩小时，您只会渲染较低的分辨率.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T20:19:53.963

Sounds like you want to be using UIScrollView.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T22:30:36.413

如果基于形状（矩形、点、线或任何可以用简单的矢量数据表示）的绘图，则没有理由为绘图的整个大小创建 UIView。当用户使用存储的矢量数据在图形上平移时，您只需重绘当前可见的视图。绘图没有持久的位图表示。

如果使用位图数据进行绘图（即 Photoshop 类型的应用程序），那么您可能需要使用一种机制，将屏幕外数据缓存到辅助存储中，并在用户平移屏幕时将其加载回屏幕。无论哪种情况，UIView 只需要与物理屏幕尺寸一样大。

抱歉，我没有任何 iOS 代码示例 - 将其作为高级抽象并从那里开始工作。

# php - 使用数组在foreach循环中将PHP变量设置为MySQL数据

> ID：10483775
> 
> 赞同：0
> 
> 时间：2012-05-07T14:22:11.820
> 
> 标签：php, mysql, variables, foreach

我似乎到处寻找这个。

这是我用来将变量设置为 MySQL 数据库中的一条数据的代码

```
$PartNo=mysql_result($result,$i,"PartNo"); 
```

在哪里

```
 $result = mysql_query("SELECT * FROM PriceList"); 
```

`$i = 0`, 每次我的 while 循环重新启动时加 1
PartNo 是我的 MySQL 表中的字段名称，也是我想将数据库中的数据设置为
PriceList 的变量的名称是我的数据库名称

我想遍历所有字段名称（数组有它们）并将具有相同名称的变量设置为该数据。像这样：

```
$PartNo=mysql_result($result,$i,"PartNo");
$Group=mysql_result($result,$i,"Group");
$OnHand=mysql_result($result,$i,"OnHand");
$QOO=mysql_result($result,$i,"QOO");
$Description=mysql_result($result,$i,"Desc");
$Cost=mysql_result($result,$i,"Cost"); 
```

但是有一个 foreach 循环，所以它没有那么多代码。
我在想这样的事情，但无论我采用哪种方式（parse_str、eval、exec 等），它都不会执行

```
$nDatabaseVars=array("PartNo","Group","OnHand","QOO","Desc","Cost");

foreach ($nDatabaseVars as $X) {
    $$X=mysql_result($result,$i,'$X');
} 
```

我需要 " `$$X`" 在第一次迭代时进行评估，它更改为 $PartNo= 然后设置`$PartNo`为第一行数据库中的任何数据。这部分是什么：`mysql_result($result,$i,"PartNo")`

如果我回显它：

```
foreach ($nDatabaseVars as $X) {
    echo "$$X=mysql_result($result,$i,'$X')";
} 
```

我可以让它准确地说出我需要执行什么 ($PartNo=mysql_result($result,$i,"PartNo");) 但实际上并没有得到变量集。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T14:26:12.190

您正在传递一个包含`"$X"`to的字符串`mysql_result`，而不是您的列名。删除单引号：

```
$$X=mysql_result($result, $i, $X); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T14:27:20.450

```
$$X=mysql_result($result,$i,'$X'); // these single quotes around $X avoid your actual string to be used.

$$X=mysql_result($result,$i,"$X"); 
```

# c++ - 类结构保证是访问顺序

> ID：10483777
> 
> 赞同：3
> 
> 时间：2012-05-07T14:22:19.293
> 
> 标签：c++

考虑一下：

```
class Vec3
{
    private:
        float n[3];
    public:
        float& x;
        float& y;
        float& z;
        Vec3(float x_, float y_, float z_) : x(n[0]), y(n[1]), z(n[2])
        {
            x = x_;
            y = y_;
            z = z_;
        }
} 
```

我可以确定这样做：

```
Vec3 v(1,2,3);
cout<<reinterpret_cast<float*>(&v)[0]<<"\t";
cout<<reinterpret_cast<float*>(&v)[1]<<"\t";
cout<<reinterpret_cast<float*>(&v)[2]<<"\t"; 
```

`1 2 3`每个遵循标准的编译器/操作系统都会给我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T14:37:56.973

不，要让它工作，你需要（至少）一个标准布局类型。`float&`不是，因此`Vec3`也不是。（9/7，第一个子弹）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T14:53:57.980

正如在其他答案中所说，这是行不通的，因为`float&`. 有关标准布局的详细说明，请参阅[标准布局类和可简单复制的类型](http://www.informit.com/guides/content.aspx?g=cplusplus&seqNum=565)。

您可以考虑稍微不同的方法：

```
class Vec3
{
    private:
        float n[3];
    public:
        float& x() { return n[0]; }
        float& y() { return n[1]; }
        float& z() { return n[2]; }
        Vec3(float x_, float y_, float z_)
        {
            x() = x_;
            y() = y_;
            z() = z_;
        }
}; 
```

因此，

```
Vec3 v(1,2,3);
cout<<reinterpret_cast<float*>(&v)[0]<<"\t";
cout<<reinterpret_cast<float*>(&v)[1]<<"\t";
cout<<reinterpret_cast<float*>(&v)[2]<<"\t"; 
```

`1 2 3`将为所有编译器打印

**编辑**

您可能还想查看[什么是聚合和 POD（第一个答案）](https://stackoverflow.com/questions/4178175/what-are-aggregates-and-pods-and-how-why-are-they-special/4178176#4178176)和[什么是聚合和 POD（第二个答案）](https://stackoverflow.com/questions/4178175/what-are-aggregates-and-pods-and-how-why-are-they-special/7189821#7189821)以获取更准确的信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T14:24:11.867

没有。你的课不是 POD，所以没有任何保证，AFAIK。

# c# - 检查资源管理器是否具有管理权限

> ID：10483779
> 
> 赞同：0
> 
> 时间：2012-05-07T14:22:49.103
> 
> 标签：c#, wpf, admin, explorer

该应用程序是使用 WPF 用 C# 编写的。

如何检查 Windows 资源管理器是否以管理员身份运行？原因是 UAC 阻止资源管理器将文件拖放到我的应用程序中。如果资源管理器没有以管理员身份运行，我将重新启动它。

功能

```
IsUserAnAdmin() 
```

不允许我检查外部进程，只有我的，所以我需要一个替代解决方案。

# php - Does anyone know how to convert binary data stored into a database back into an image?

> ID：10483781
> 
> 赞同：1
> 
> 时间：2012-05-07T14:22:57.230
> 
> 标签：php, image, binary

A database has stored an image as binary. I'm looking to convert it back to a JPEG in PHP. Does anyone know how this might be accomplished?

I'm aware this might be something that I can find through Google but I have not yet tracked down an answer and thought it would be best to hedge my bets and ask a question here.

If I find out before I get a response, I will post the solution here.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T14:29:17.080

Simply select the data from the database and put it in the variable $image_data_from_database

Save to file:

```
<?php
    file_put_contents("image.jpg", $image_data_from_database);
?> 
```

or display the image in-place:

```
<?php
    header('Content-Type: image/jpeg');
    echo $image_data_from_database;
?> 
```

# ruby-on-rails - Rails 3 路由：非 CRUD 控制器

> ID：10483785
> 
> 赞同：1
> 
> 时间：2012-05-07T14:23:25.740
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在将路由从 Rails 2 转换为 Rails 3 时，我需要一些帮助。

在`app/views/layouts/application.html.erb`中，我有：

```
<%= link_to "Reports", reports_path %><br> 
```

有一个`ReportsController`，在`app/views/reports/index.html.erb`，我有这个：

```
<%= link_to "Clients With Animals", :action => "getAnimals", :controller => "clients" %> 
```

然后，在 config/routes.rb 中，我有这个（Rails 3）

```
match '/reports' => "reports#index"
match '/clients/getAnimals', to: "clients#getAnimals" 
```

单击报告页面上的“getAnimals”链接时出现此错误：

```
ActiveRecord::RecordNotFound in ClientsController#show
Couldn't find Client with id=getAnimals 
```

我不希望“getAnimals”成为 ID - 我希望它成为动作。

我怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T14:26:54.140

假设您也有一个`resources :clients`条目，您要确保`match '/clients/getAnimals', to: "clients#getAnimals"`它在它之上（Rails 将匹配它首先击中的任何内容）。

但是，更好的方法可能是将其放入资源中：

```
resources :clients do
  get 'getAnimals', :on => :collection
end 
```

# netty - Netty 服务器在本地运行时无法正确关闭

> ID：10483799
> 
> 赞同：1
> 
> 时间：2012-05-07T14:24:33.477
> 
> 标签：netty

在同一个 jvm 中运行 Netty 客户端和服务器并尝试停止服务器时出现问题。这是我的代码来举例说明：

```
@BeforeMethod
public void setUp() {
    serverBootstrap = new ServerBootstrap(new DefaultLocalServerChannelFactory());
    serverBootstrap.getPipeline().addLast("my-server-handler", new ServerHandler());
    LocalAddress local = new LocalAddress("1");
    serverChannel = serverBootstrap.bind(local);

    clientBootstrap = new ClientBootstrap(new DefaultLocalClientChannelFactory());

    clientBootstrap.setPipelineFactory(new ChannelPipelineFactory() {
        @Override
        public ChannelPipeline getPipeline() throws Exception {
            ChannelPipeline pipeline = Channels.pipeline();
            pipeline.addLast("my-client-handler", new ClientHandler());
            return pipeline;
        }
    });

    ChannelFuture future = clientBootstrap.connect(local);
    if (future.isSuccess())
        System.out.println("Client connected");
    clientChannel = future.getChannel();
}

@AfterMethod
public void tearDown() {
    closeServer();
    clientChannel.close().awaitUninterruptibly();
    clientBootstrap.releaseExternalResources();
}

@Test
public void shoulClose() {        
    sendData();
    closeServer();
    sendData();       
}

private void closeServer() {
    serverChannel.close().awaitUninterruptibly();
    serverBootstrap.releaseExternalResources();
}

private void sendData() {
    clientChannel.write(new byte[] { 1, 2, 3 });
} 
```

我已经用 Netty 3.4.0.Final 和 3.4.4.Final 对此进行了测试，但我不知道我做错了什么。

为什么服务器宕机后客户端还能向服务器发送数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T16:22:51.923

客户端可以发送数据，但 clientChannel.write(..) 的 ChannelFuture 应该失败。

您可以通过以下方式进行检查：

```
boolean success = clientChannel.write(new byte[] { 1, 2, 3 }).awaitUninteruptable().isSucess(); 
```

或者使用 ChannelFutureListener 以异步方式获得通知。

# php - 如何在 PHP 中解码以下字符串？

> ID：10483800
> 
> 赞同：0
> 
> 时间：2012-05-07T14:24:34.260
> 
> 标签：php, string, decode

有谁知道如何正确解码 PHP 中的以下字符串？

```
=?iso-8859-1?Q?OLG=20Slots=20at=20Windsor=20=26=20Caesars=20Windsor=20w?= 
```

我尝试使用

```
quoted_printable_decode() 
```

但没有产生预期的结果。

从电子邮件标题中检索的此字符串。上面的字符串是“主题”。电子邮件客户端（基于 Web 的和应用程序）似乎能够正确解码字符串。

谢谢你的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T14:28:44.473

它不是 url_encoded，而是试试这个：

```
$subject = '=?iso-8859-1?Q?OLG=20Slots=20at=20Windsor=20=26=20Caesars=20Windsor=20w?=';

echo utf8_decode(imap_utf8($subject)); 
```

[手动的](http://php.net/manual/en/function.imap-utf8.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T14:30:25.217

第一位表明它是用[ISO-8859-1](http://en.wikipedia.org/wiki/ISO/IEC_8859-1)编码的，如果我正确阅读维基百科，它就是标准 ASCII 码。

这意味着您可能不需要*解码*字符串，您只需要*理解*它;-)

你在哪里找到它？你觉得它的意义可能是什么？（例如，是提交的表单数据、某种 RPC 编码，还是其他？）

谢谢！刚刚看到你的编辑。你试过b64解码吗？猜测它是[base64 编码的 ASCII](http://en.wikipedia.org/wiki/Base64)。试试[`base64_decode()`](http://www.php.net/manual/en/function.base64-decode.php)。

# css - 带有过渡的下拉菜单

> ID：10483803
> 
> 赞同：2
> 
> 时间：2012-05-07T14:24:51.007
> 
> 标签：css, css-transitions

经过长时间的 javascript 编码后，我想尝试在没有**任何**javascript（当然也没有 jQuery）的情况下做一个漂亮的网站。我想做一个带有像这个网站这样的标签的下拉菜单：[下拉标签](http://www.webdesigndev.com/web-development/create-the-fanciest-dropdown-menu-you-ever-saw)。但这一个是在javascript中的。我做到了：http: [//jsfiddle.net/jHeRm/](http://jsfiddle.net/jHeRm/)。但是当我添加过渡时，我遇到了一个问题：过渡是从一个点到另一个点，没有计算我无法知道起点（a`li`的高度*个数`li`）。

我怎样才能以任何方式进行这种转换，但没有 jQuery、javascript、php、ID 和类？

**编辑：**我想到了一种方法，通过从 to 过渡来做到这一点，`bottom:0px`但`top:21px`过渡总是从`top:0px`to开始`top:21px`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T14:52:08.943

您可以使用 CSS 并为嵌套的高度设置动画`ul`：

[http://jsfiddle.net/jHeRm/2/](http://jsfiddle.net/jHeRm/2/)

* * *

以下是使用负边距的更新版本：

[http://jsfiddle.net/jHeRm/4/](http://jsfiddle.net/jHeRm/4/)

# java - 单击Java Swing中的按钮后如何调用Outlook？

> ID：10483805
> 
> 赞同：-2
> 
> 时间：2012-05-07T14:25:06.830
> 
> 标签：java, outlook

我用 Java Swing 开发了一个桌面应用程序。当我单击一个按钮时，我想打开 Microsoft Outlook。我无法弄清楚这样做。有谁能够帮我？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T14:32:47.537

一种方法是使用Outlook 为其默认使用者的类`Desktop`。`open(File)`或者正如@Guillaume 所指出的那样，[`Dekstop.mail()`](http://docs.oracle.com/javase/8/docs/api/java/awt/Desktop.html#mail--)专门针对电子邮件客户端使用（或重载变体）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T15:31:22.143

也许你可以使用这个方法：

```
Runtime.getRuntime.exec(command) 
```

# iphone - @property 中的内存损坏

> ID：10483808
> 
> 赞同：0
> 
> 时间：2012-05-07T14:25:23.817
> 
> 标签：iphone, objective-c, ios, ipad

我有下一段代码，一个具有此属性的 iVar 保留并在其类`dealloc`方法中释放。iVar 用于 2 种方法并不断更改值，但有时当我使用时值已损坏。这是为什么？

。H

```
@interface ChatController : NSObject <ASIHTTPRequestDelegate>{
NSTimer *timer;
NSString *_idLastMessageFromServer;
}

@property(nonatomic, retain)NSString *idLastMessageFromServer;
@end 
```

.m

```
@implementation ChatController

@synthesize idLastMessageFromServer = _idLastMessageFromServer;

- (void)initLoopTimer{
timer = [NSTimer timerWithTimeInterval:5 target:self selector:@selector(update:) userInfo:nil repeats:YES];
[[NSRunLoop mainRunLoop] addTimer:timer forMode:NSDefaultRunLoopMode];
}

- (void)update:(id)sender{
ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:CONSTANT_YYYY];
[request setDelegate:self];
[request addPostValue:_idLastMessageFromServer forKey:CONSTANT_XXX];
[request setDidFinishSelector:@selector(requestUpdateFinish:)];
[request startAsynchronous];
}

- (void)requestUpdateFinish:(ASIHTTPRequest *)request{
NSString *response = [request responseString];
if(response && response.length){
    if(![response isEqualToString:CHAT_RESPONSE_NO_MESSAGES]){
        NSArray *array = [response componentsSeparatedByString:CHAT_PARSE_RESPONSE];
        if(array && [array count] == 2){
            **_idLastMessageFromServer = [array objectAtIndex:0];**
        }
     }
   }
} 
```

但是当循环调用方法**update:**时，它在这行代码中崩溃了

```
[request addPostValue:_idLastMessageFromServer forKey:CONSTANT_XXX]; 
```

带有 EXC_BAD_ACCESS 消息，但为什么呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T14:29:20.310

这一行：

```
_idLastMessageFromServer = [array objectAtIndex:0]; 
```

应该是

```
self.idLastMessageFromServer = [array objectAtIndex:0]; 
```

这将直接访问属性而不是变量，从而在分配期间触发保留/释放。否则，指针被分配，但从数组中取出的对象不会被保留，它可能很快就会变得无效，并且你会留下一个指向已释放对象的指针。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T14:34:46.960

通过使用`_idLastMessageFromServer`而不是`self.idLastMessageFromServer`，您不会保留字符串。允许保留计数降至零，从而解除分配对象。那时你有一个对坏内存的引用，因此应用程序崩溃了。

不要直接使用 iVar，除非你有充分的理由（如 -init 或 -dealloc）。改为使用该属性。

```
 [request addPostValue:self.idLastMessageFromServer forKey:CONSTANT_XXX]; 
```

和

```
self.idLastMessageFromServer = [array objectAtIndex:0]; 
```

* * *

我将添加更多关于属性的详细说明。

`self.idLastMessageFromServer`当用于读取属性值时调用自动生成的方法`-idLastMessageFromServer`。这个方法看起来像：

```
- (NSString *)idLastMessageFromServer
{
    return _idLastMessageFromServer;
} 
```

`self.idLastMessageFromServer`当用于设置属性值时调用一个自动生成的方法`-setIdLastMessageFromServer:`。这个方法看起来像：

```
- (void)setIdLastMessageFromServer:(NSString *)idLastMessageFromServer
{
    if (_idLastMessageFromServer != idLastMessageFromServer) {
        [_idLastMessageFromServer release];
        _idLastMessageFromServer = idLastMessageFromServer;
        [_idLastMessageFromServer retain];
    }
} 
```

最后一点：一定要在你的`-dealloc`方法中释放 _idLastMessageFromServer。就像是：

```
- (void)dealloc
{
    [_idLastMessageFromServer release];
    [super dealloc];
} 
```

* * *

有关属性和 iVar 的更多详细信息。

属性（如 self.idLastMessageFromServer）只是处理 getter 和 setter 方法的简单方法。它们不能保存数据，因为它们是方法。iVar（如 _idLastMessageFromServer）是指向内存中某个位置的指针。它们无法控制访问和维护状态，因为它们只是一个指针。

属性和 iVar 一起工作。

该行`@property(nonatomic, retain) NSString *idLastMessageFromServer;`说在我的实现中的某个地方，我的类将具有属性 idLastMessageFromServer 的 getter 和 setter。

该行`@synthesize idLastMessageFromServer = _idLastMessageFromServer;`使用 iVar _idLastMessageFromServer 自动为 idLastMessageFromServer 生成 getter 和 setter 方法。

简而言之，该属性控制对 iVar 的访问；iVar 是属性的存储位置。

# c# - 动态改变背景出错

> ID：10483812
> 
> 赞同：1
> 
> 时间：2012-05-07T14:25:40.010
> 
> 标签：c#, windows-phone-7

首先，我创建了一个按钮（名为 BackgroundChooser），用于动态更改背景图像（他们可以选择自己的图像作为背景）。但我已经为我的 windows phone 7 应用程序使用了默认背景图像（image1.jpg）。当我点击选择背景按钮时，它会指向我们保存的图片。之后，我选择了我的图像作为我自己的背景图像。但是默认的背景图像仍然没有改变。然后，当我将默认背景更改为黑色时，我可以设置自己的背景图像（它工作得很好）。需要帮忙！！！提前感谢您的辛勤工作！！！

以下是我使用的代码-：

```
 private void BackgroundChooser_Click(object sender, MouseEventArgs e)
    {
        var PhotoChooser = new PhotoChooserTask();
        PhotoChooser.Completed += new EventHandler<PhotoResult(PhotoChooser_Completed);
        PhotoChooser.Show();
    }

    void PhotoChooser_Completed(object sender, PhotoResult e)
    {
        {
            if (e.TaskResult == TaskResult.OK)
            {
                System.Windows.Media.Imaging.BitmapImage bmp = new System.Windows.Media.Imaging.BitmapImage();
                bmp.SetSource(e.ChosenPhoto);
                var app = Application.Current as App;
                if (app == null)
                return;
                var imageBrush = new ImageBrush { ImageSource = bmp, Opacity = 0.5d };
                app.RootFrame.Background = imageBrush;
                //app.RootFrame.Background = new SolidColorBrush(Colors.Black);  //we can apply just color too like this
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T23:52:18.700

而不是`app.RootFrame.Background`，尝试在页面上的某个显示对象上设置 Background 属性，例如`myPanoramaControl.Background = imageBrush;`或`LayoutRoot.Background = imageBrush;`（其中 LayoutRoot 是新 WP 页面的默认网格控件的名称）

# css - div 的高度适合容器 div 的高度与自动滚动

> ID：10483820
> 
> 赞同：1
> 
> 时间：2012-05-07T14:26:11.963
> 
> 标签：css, html, css-tables

我遇到了页面的 CSS 样式问题。基本上我有一个 div 将用作一个对话框，我想在其中组织 2 列中的内容：第一个可以包含一长串元素，并且应该是可滚动的，第二个应该很小并且在一个固定的位置。因此，我不希望所有对话内容都是可滚动的，而只是其中的一半。我[在 jsfiddle 上](http://jsfiddle.net/Zw8WK/1/)放了一个例子，以防你需要做一些尝试......代码是：

CSS

```
#container {
border: 1px solid black;
height: 200px;
}
#main {
    display: table;
    border: 1px dashed blue;
    height: 200px;
}
#row{
    display: table-row;
    height: 200px;
}
#leftPanel{
    display: table-cell;
    width: 50%;
    height: 200px;
    overflow: auto;
    border: 1px dotted red;
}
#rightPanel{
    display: table-cell;
    width: 50%;
    vertical-align: top;
    height: 200px;
} 
```

HTML

```
<div id="container">
    <div id="main">
        <div id="row">
            <div id="leftPanel"> <!-- This one should be scrollable -->
                <!-- Long list of element here-->
            </div>
            <div id="rightPanel">
                <div style="height: 50px;">
                    Something here
                </div>
                <div style="height: 50px;">
                    Something else here
                </div>
            </div>
        </div>
    </div>
</div>​​​​​​​​​​​​​​​​​​​ 
```

如何让 leftPanel 可滚动？如您所见，我什至尝试为 CSS 表的每个组件设置一个固定高度，但没有任何结果......这里有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T14:30:41.727

像这样：http: [//jsfiddle.net/Zw8WK/10/](http://jsfiddle.net/Zw8WK/10/)

使用`overflow-y: scroll`或 替代`overflow : scroll`

现在，如果您需要将左列的高度设置为某种可变高度，这可能会更加棘手，这里我将其设置为父容器的高度。

# java - Swt LAyout：能够布局控制

> ID：10483823
> 
> 赞同：0
> 
> 时间：2012-05-07T14:26:15.797
> 
> 标签：java, eclipse, swt

我对 SWT 布局很陌生。我创建了一个新的复合材料，复合材料分为 2 列。现在我想把 2 个按钮放在第一列本身 sd-by-side。有可能吗？

谢谢，托

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T14:38:32.607

添加另一个组合作为第一列的子项，并将其布局设置为可以按照您想要的方式排列按钮的内容。然后将按钮添加为第二个复合的子级。

嵌套组合和布局是构建有趣布局的关键，无论是在 SWT 还是 AWT 中。

# java - 将证书导入 Java 密钥库，JVM 忽略新证书

> ID：10483828
> 
> 赞同：22
> 
> 时间：2012-05-07T14:26:37.467
> 
> 标签：java, security, tomcat, ssl-certificate, keytool

我试图让一个在 Tomcat 6 之上运行的应用程序通过 SSL 连接到 LDAP 服务器。

我使用以下方法将服务器证书导入密钥库：

```
C:\Program Files\Java\jdk1.6.0_32\jre\lib\security>keytool -importcert -trustcacerts -file mycert -alias ca_alias -keystore "c:\Program Files\Java\jdk1.6.0_32\jre\lib\security\cacerts" 
```

当我在 SSL 调试打开的情况下启动 Tomcat 时，根据日志 Tomcat 正在使用正确的证书文件：

```
trustStore is: C:\Program Files\Java\jdk1.6.0_32\jre\lib\security\cacerts 
```

但是，Tomcat 没有添加我刚刚导入的证书——cacerts 文件中的所有其他证书都打印到日志中——并且连接失败：

```
handling exception: javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target 
```

重新启动 Tomcat 没有帮助。我已使用 keytool -list 命令验证文件中确实存在新证书。

为什么 Tomcat 一直忽略我的新证书？

编辑：

似乎该问题是由 Windows 7 VirtualStore 引起的。Keytool 创建了 cacert 文件的新副本，而 Tomcat 使用了原始文件。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2015-10-28T17:23:22.510

将证书导入密钥库后，JVM 需要重新启动。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-07T14:32:45.910

检查是否存在具有相同CN信息但别名不同的密钥。

当我尝试导入较新版本的证书但将旧版本留在密钥库中时，我曾遇到过类似的问题。我的 Java 程序将简单地在密钥库中找到第一个匹配的 CN 密钥（这是旧的过期密钥）并尝试使用它，即使有一个新的也与 CN 匹配。

还要确保密钥库中存在验证根证书（和中间证书，如果适用）。如果您要针对 Verisign 或 Globalsign 等主要安全提供商之一进行身份验证，他们通常会为您提供根证书和中间证书。如果这些证书已经存在于密钥库中，请确保它们仍然有效。您需要拥有从您的个人证书一直到身份验证链的所有证书，一直到存在于您的密钥库中的根目录，以便它了解如何验证您的凭据。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-24T12:22:45.863

您所描述的正是我在使用`cmd.exe`普通用户时所得到的，尽管它是 Windows Server 上管理组的成员。您必须`cmd.exe`在管理模式下启动才能将更改应用到 cacerts 文件。至少在 Win2k8 操作系统上。

如果您不这样做，插入符号将在`keytool.exe -list`视图中显示新添加的证书，但 Tomcat 不会看到它们。不知道为什么会这样。但是，当您使用以管理员身份启动的 cmd.exe 添加它时，Tomcat 对新添加的证书很好。

您还可以使用`Djavax.net.debug="ssl,handshake"`查看 Tomcat 从 cacerts 文件中读取的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-06T00:41:45.640

在我的情况下，我查看了很多东西，然后才弄清楚出了什么问题......我将证书添加到不同的密钥库中，我添加了链中的所有证书（顺便说一句，这是毫无意义的），为了我自己的理智，我再次下载了证书并检查序列号，甚至检查下载的证书以确保它具有所有正确的信息。

我最终编写了一个 TLS 验证客户端应用程序以调试问题。我连接的远程服务器不仅只支持 TLS 1.2（在我的 Java 7 版本中默认禁用），而且该服务器也不支持在我的客户端中启用的任何密码。事实证明，Java 7 启用了不到一半的受支持密码，其中许多确实不安全，并且一些最安全的密码被禁用。

经过一些交叉检查，我想出了以下 TLS 1.2 支持的安全密码的有序列表：

```
new String[] {
    "TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256",
    "TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256",
    "TLS_ECDHE_PSK_WITH_CHACHA20_POLY1305_SHA256",
    "TLS_DHE_RSA_WITH_CHACHA20_POLY1305_SHA256",
    "TLS_DHE_PSK_WITH_CHACHA20_POLY1305_SHA256",
    "TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384",
    "TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256",
    "TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384",
    "TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256",
    "TLS_ECDHE_PSK_WITH_AES_256_GCM_SHA384",
    "TLS_ECDHE_PSK_WITH_AES_128_GCM_SHA256",
    "TLS_DHE_RSA_WITH_AES_256_GCM_SHA384",
    "TLS_DHE_RSA_WITH_AES_128_GCM_SHA256",
    "TLS_DHE_PSK_WITH_AES_256_GCM_SHA384",
    "TLS_DHE_PSK_WITH_AES_128_GCM_SHA256",
    "TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384",
    "TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA",
    "TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256",
    "TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA",
    "TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384",
    "TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA",
    "TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256",
    "TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA",
    "TLS_DHE_RSA_WITH_AES_256_CBC_SHA256",
    "TLS_DHE_RSA_WITH_AES_256_CBC_SHA",
    "TLS_DHE_RSA_WITH_AES_128_CBC_SHA256",
    "TLS_DHE_RSA_WITH_AES_128_CBC_SHA",
    "TLS_ECDHE_PSK_WITH_AES_128_CCM_SHA256",
    "TLS_DHE_RSA_WITH_AES_256_CCM",
    "TLS_DHE_RSA_WITH_AES_128_CCM",
    "TLS_DHE_PSK_WITH_AES_256_CCM",
    "TLS_DHE_PSK_WITH_AES_128_CCM",
    "TLS_CHACHA20_POLY1305_SHA256",
    "TLS_AES_256_GCM_SHA384",
    "TLS_AES_128_GCM_SHA256",
    "TLS_AES_128_CCM_SHA256"
} 
```

如果周围有任何加密专家，请随时更新此列表。我使用[Qualys SSL Labs](https://github.com/ssllabs/research/wiki/SSL-and-TLS-Deployment-Best-Practices#23-use-secure-cipher-suites)、[这个 Information Security SE answer](https://security.stackexchange.com/a/77018/19908)和[IANA](https://www.iana.org/assignments/tls-parameters/tls-parameters.xhtml#table-tls-parameters-4)作为我的来源。

对于那些想要我使用的源代码示例的人，请参见下文。我使用的是 Apache Commons HttpClient 3.0，因此您可能需要下载以下二进制文件：

*   [https://archive.apache.org/dist/httpcomponents/commons-httpclient/3.0/binary/commons-httpclient-3.0.1.zip](https://archive.apache.org/dist/httpcomponents/commons-httpclient/3.0/binary/commons-httpclient-3.0.1.zip)
*   [https://archive.apache.org/dist/commons/logging/binaries/commons-logging-1.0.4.zip](https://archive.apache.org/dist/commons/logging/binaries/commons-logging-1.0.4.zip)
*   [https://archive.apache.org/dist/commons/codec/binaries/commons-codec-1.3.zip](https://archive.apache.org/dist/commons/codec/binaries/commons-codec-1.3.zip)
*   [https://archive.apache.org/dist/commons/lang/binaries/commons-lang-2.6-bin.zip](https://archive.apache.org/dist/commons/lang/binaries/commons-lang-2.6-bin.zip)

## TLS12SocketFactory.java

```
import java.io.*;
import java.net.*;
import java.util.*;
import org.apache.commons.httpclient.params.HttpConnectionParams;
import org.apache.commons.httpclient.protocol.*;
import org.apache.commons.lang.StringUtils;

public class TLS12SocketFactory implements SecureProtocolSocketFactory {

        private final SecureProtocolSocketFactory base;
        public TLS12SocketFactory()
        {
            this.base = (SecureProtocolSocketFactory)Protocol.getProtocol("https").getSocketFactory();
        }
        private Socket acceptOnlyTLS12(Socket socket)
        {
            if(socket instanceof javax.net.ssl.SSLSocket) {
                final javax.net.ssl.SSLSocket s = (javax.net.ssl.SSLSocket)socket;

                // Set TLS 1.2
                s.setEnabledProtocols(new String[]{ "TLSv1.2" });

                // Using recommended ciphers from https://www.iana.org/assignments/tls-parameters/tls-parameters.xhtml#table-tls-parameters-4
                List<String> recommended = new ArrayList(Arrays.asList(new String[]{ "TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256", "TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256", "TLS_ECDHE_PSK_WITH_CHACHA20_POLY1305_SHA256", "TLS_DHE_RSA_WITH_CHACHA20_POLY1305_SHA256", "TLS_DHE_PSK_WITH_CHACHA20_POLY1305_SHA256", "TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384", "TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256", "TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384", "TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256", "TLS_ECDHE_PSK_WITH_AES_256_GCM_SHA384", "TLS_ECDHE_PSK_WITH_AES_128_GCM_SHA256", "TLS_DHE_RSA_WITH_AES_256_GCM_SHA384", "TLS_DHE_RSA_WITH_AES_128_GCM_SHA256", "TLS_DHE_PSK_WITH_AES_256_GCM_SHA384", "TLS_DHE_PSK_WITH_AES_128_GCM_SHA256", "TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384", "TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA", "TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256", "TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA", "TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384", "TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA", "TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256", "TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA", "TLS_DHE_RSA_WITH_AES_256_CBC_SHA256", "TLS_DHE_RSA_WITH_AES_256_CBC_SHA", "TLS_DHE_RSA_WITH_AES_128_CBC_SHA256", "TLS_DHE_RSA_WITH_AES_128_CBC_SHA", "TLS_ECDHE_PSK_WITH_AES_128_CCM_SHA256", "TLS_DHE_RSA_WITH_AES_256_CCM", "TLS_DHE_RSA_WITH_AES_128_CCM", "TLS_DHE_PSK_WITH_AES_256_CCM", "TLS_DHE_PSK_WITH_AES_128_CCM", "TLS_CHACHA20_POLY1305_SHA256", "TLS_AES_256_GCM_SHA384", "TLS_AES_128_GCM_SHA256", "TLS_AES_128_CCM_SHA256" }));
                recommended.retainAll(Arrays.asList(s.getSupportedCipherSuites()));
                if(recommended.size() == 0) {
                    System.err.println("No supported modern ciphers. Update crypto policy or install JCE Unlimited Strength Jurisdiction Policy files." + System.lineSeparator());
                } else if(recommended.size() < 3) {
                    System.out.println("Few supported modern ciphers. It's recommended to update crypto policy or install JCE Unlimited Strength Jurisdiction Policy files." + System.lineSeparator());
                }
                s.setEnabledCipherSuites(recommended.toArray(new String[0]));

                // Log matched cipher and cert
                s.addHandshakeCompletedListener(new javax.net.ssl.HandshakeCompletedListener() {
                    @Override
                    public void handshakeCompleted(javax.net.ssl.HandshakeCompletedEvent hce) {
                        String print = s.getInetAddress().getHostName() + System.lineSeparator() + hce.getCipherSuite() + System.lineSeparator();
                        try {
                            for(java.security.cert.Certificate cert : hce.getPeerCertificates()) {
                                List<String> certStrings = Arrays.asList(cert.toString().split("\r?\n"));
                                for(int line = 0; line < certStrings.size(); line++) {
                                    if(certStrings.get(line).startsWith("Certificate Extensions:")) {
                                        print += System.lineSeparator() + StringUtils.join(certStrings.subList(2, line-1), System.lineSeparator()) + System.lineSeparator();
                                        break;
                                    }
                                }
                            }
                        } catch (javax.net.ssl.SSLPeerUnverifiedException ex) {
                            print += "Non-certificate based cipher used" + System.lineSeparator();
                        }
                        System.out.println(print);
                    }
                });
            }
            return socket;
        }

        @Override
        public Socket createSocket(String host, int port) throws IOException
        {
            return acceptOnlyTLS12(base.createSocket(host, port));
        }
        @Override
        public Socket createSocket(String host, int port, InetAddress localAddress, int localPort) throws IOException
        {
            return acceptOnlyTLS12(base.createSocket(host, port, localAddress, localPort));
        }
        @Override
        public Socket createSocket(String host, int port, InetAddress localAddress, int localPort, HttpConnectionParams params) throws IOException
        {
            return acceptOnlyTLS12(base.createSocket(host, port, localAddress, localPort, params));
        }
        @Override
        public Socket createSocket(Socket socket, String host, int port, boolean autoClose) throws IOException
        {
            return acceptOnlyTLS12(base.createSocket(socket, host, port, autoClose));
        }
} 
```

## 主.java

```
import java.io.*;
import java.security.*;
import java.security.cert.*;
import java.util.*;
import org.apache.commons.httpclient.protocol.Protocol;
import org.apache.commons.httpclient.*;
import org.apache.commons.httpclient.cookie.CookiePolicy;
import org.apache.commons.httpclient.methods.*;
import org.apache.commons.httpclient.params.HttpClientParams;

public class Main {
    public static void main(String[] args) {
        List<java.net.URI> locations = new ArrayList<>();
        for(String arg : args) {
            java.net.URI location = java.net.URI.create(arg);
            if(location.isAbsolute() && location.getScheme().equals("https")) {
                locations.add(location);
            } else {
                System.out.println("Skipping invalid URL: " + arg);
            }
        }
        System.out.println("Connecting to URL's");
        System.out.println();
        System.out.println("-------------------------");

        TLS12SocketFactory tls12factory = new TLS12SocketFactory();
        Protocol.registerProtocol("httpss", new Protocol("httpss", tls12factory, 443));
        for(java.net.URI location : locations) {
            System.out.println();
            try {
                // Form request
                String tls12url = location.toString().replaceFirst("^https:", "httpss:");
                HttpMethod method = new HeadMethod(tls12url);

                // Send request
                HttpClientParams params = new HttpClientParams();
                params.setParameter(HttpClientParams.COOKIE_POLICY, CookiePolicy.IGNORE_COOKIES);
                new HttpClient(params).executeMethod(method);
                method.setFollowRedirects(true);

                // Print response
                System.out.println(location.toString());
                System.out.println(method.getStatusLine().toString());
            } catch (javax.net.ssl.SSLHandshakeException ex) {
                System.out.println("There was an error making a secure connection to " + location.getHost());
                ex.printStackTrace(System.out);
            } catch (HttpException ex) {
                System.out.println("There was an error with the external webpage");
                ex.printStackTrace(System.out);
            } catch (Exception ex) {
                System.out.println("Could not complete request");
                ex.printStackTrace(System.out);
            }
        }
        System.out.println();
        System.out.println("-------------------------");
        System.out.println();
        try {
            // Load supported SSL Ciphers
            System.out.println("Supported ciphers");
            System.out.println();
            System.out.println("-------------------------");
            System.out.println();
            javax.net.ssl.SSLSocket socket = (javax.net.ssl.SSLSocket)tls12factory.createSocket("www.google.com", 443);
            for(String cipher : socket.getSupportedCipherSuites()) {
                System.out.println(cipher);
            }
            System.out.println();
            System.out.println("-------------------------");
            System.out.println();

            // Load enabled SSL Ciphers
            System.out.println("Enabled ciphers");
            System.out.println();
            System.out.println("-------------------------");
            System.out.println();
            for(String cipher : socket.getEnabledCipherSuites()) {
                System.out.println(cipher);
            }
            System.out.println();
            System.out.println("-------------------------");
            System.out.println();

            // Load the JDK's cacerts keystore file
            String filename = System.getProperty("java.home") + "/lib/security/cacerts".replace('/', File.separatorChar);
            System.out.println("Loading keystore");
            System.out.println(filename);
            System.out.println();
            System.out.println("-------------------------");
            System.out.println();
            FileInputStream is = new FileInputStream(filename);
            KeyStore keystore = KeyStore.getInstance(KeyStore.getDefaultType());
            String password = "changeit";
            keystore.load(is, password.toCharArray());

            // This class retrieves the most-trusted CAs from the keystore
            PKIXParameters params = new PKIXParameters(keystore);

            // Get the set of trust anchors, which contain the most-trusted CA certificates
            for (TrustAnchor ta : params.getTrustAnchors()) {
                // Print certificate
                System.out.println(ta.getTrustedCert());
            }
        } catch (CertificateException | KeyStoreException | NoSuchAlgorithmException | InvalidAlgorithmParameterException | IOException ex) {
            System.out.println("Could not load keystore");
            ex.printStackTrace(System.out);
        }
    }
} 
```

# nginx - Apache ab 将不起作用 - ab：测试 python 旋风时的 URL 无效

> ID：10483833
> 
> 赞同：39
> 
> 时间：2012-05-07T14:26:56.160
> 
> 标签：nginx, apachebench, cyclone

我正在尝试 ab 测试旋风。

当我跑

```
ab -n 2000 -c 25 http://127.0.0.1 
```

我得到 ab：无效的 URL。

好吧...当我在我的开发机器上访问 ff 时，该站点就在那里。

这是我的 nginx 配置

```
http {

    upstream frontends {
        server 127.0.0.1:8051;
    }

    ##
    # Basic Settings
    ##

    sendfile on;
    tcp_nopush on;
    tcp_nodelay on;
    keepalive_timeout 30;
    types_hash_max_size 2048;
    # server_tokens off;
    # server_names_hash_bucket_size 64;
    # server_name_in_redirect off;

    include /etc/nginx/mime.types;
    default_type application/octet-stream;

        # Only retry if there was a communication error, not a timeout
        # on the Tornado server (to avoid propagating "queries of death"
        # to all frontends)
        proxy_next_upstream error;

    server {
        listen   80;
        server_name 127.0.0.1;

                location / {
            proxy_pass_header Server;
            proxy_set_header Host $http_host;
            proxy_redirect false;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Scheme $scheme;
                 proxy_pass http://frontends;
        } 
```

* * *

## 回答 #1

> 赞同：173
> 
> 时间：2012-06-11T06:42:28.023

`ab`URL 后面需要一个斜杠。

这应该有效：

```
ab -n 2000 -c 25 http://127.0.0.1/ 
```

# javascript - RequireJS 依赖序列

> ID：10483835
> 
> 赞同：1
> 
> 时间：2012-05-07T14:27:14.513
> 
> 标签：javascript, jquery, jquery-plugins, requirejs

我有这个需要 jQuery 的插件。由于某些不相关的原因，我不会使用 jQuery 版本的 require。

```
define(['jquery','dep1','dep2','mymodule'],function($,foo,bar,plugin){
    //all loaded
}); 
```

由于 AMD 加载程序的性质，无法保证订单。[订单插件](http://requirejs.org/docs/api.html#order)还声明该插件不能与定义调用一起使用，因此，模块定义。而且[API](http://requirejs.org/docs/api.html#defdep)只保证参数的顺序，不保证执行的顺序。因此，如果在 jQuery 之前发生 mymodule 加载的事件，它将失败。

如何保证在插件之前加载所需的依赖项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T14:49:51.700

首先，您似乎没有使用订单插件；订单插件需要您`order!`在文件名之前添加。

其次，您的`mymodule`文件也应该有定义`jQuery`为要求。这将确保 jquery 在 mymodule 之前加载，而不必依赖于 order 插件。

**模块 1**

```
define(['jquery','dep1','dep2','mymodule'],function($,foo,bar,plugin){
    //all loaded
}); 
```

**mymodule.js**

```
define(['jquery'],function($){
    //all loaded
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T14:29:03.040

你可以这样做：

```
define(['jquery', 'dep1', 'dep2'], function() {
    //load myModule separately
    var m = require('mymodule');
}); 
```

# android - 来自 Play 商店的 NullPointerException 报告

> ID：10483837
> 
> 赞同：2
> 
> 时间：2012-05-07T14:27:17.587
> 
> 标签：android, nullpointerexception, report

今天我收到了`NullPointerException`一份报告。我无法在自己的手机上重现此 NullPointerException。

我真的找不到导致 NullPointerException 的原因。

这是报告：

```
java.lang.NullPointerException
at com.dsf.sdf.ManActivity$25.onTouch(ManActivity.java:445)
at android.view.View.dispatchTouchEvent(View.java:3762)
at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:936)
at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:936)
at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:936)
at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:936)
at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:936)
at com.android.internal.policy.impl.PhoneWindow$DecorView.
    (PhoneWindow.java:1674)
at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1109)
at android.app.Activity.dispatchTouchEvent(Activity.java:2086)
at com.android.internal.policy.impl.PhoneWindow$DecorView.
    dispatchTouchEvent(PhoneWindow.java:1658)
at android.view.ViewRoot.handleMessage(ViewRoot.java:1785)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:123)
at android.app.ActivityThread.main(ActivityThread.java:4627)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:521)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.
    run(ZygoteInit.java:876)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:634)
at dalvik.system.NativeStart.main(Native Method) 
```

这是第 936 行的代码：

```
sdff.setOnTouchListener(new OnTouchListener() {
    @Override
    public boolean onTouch(View v, MotionEvent event) {
        if (event.getAction() == MotionEvent.ACTION_DOWN) {
            sdff.setBackgroundDrawable(getResources().
                getDrawable(R.drawable.pressed));
        } 

        else if (event.getAction() == MotionEvent.ACTION_UP) {
            if (play != null) {
                play.reset();
                play.release();
            }

            play = MediaPlayer.create(ManActivity.this,
                R.raw.sdff);
            play.start();
            sdff.setBackgroundDrawable(getResources().
                getDrawable(R.drawable.button));
        } 

        else if (event.getAction() == MotionEvent.ACTION_CANCEL) {
            sdff.setBackgroundDrawable(getResources().
                getDrawable(R.drawable.button));
        }

        return false;
    }
}); 
```

这是一个简单的按钮，按下时会发出声音。

那么是什么导致了异常呢？

编辑：

```
Code at line 445:

play = MediaPlayer.create(ManActivity.this,
    R.raw.bf);
play.start();
auth.setBackgroundDrawable(getResources().getDrawable(
    R.drawable.button)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T14:46:46.753

Rajesh 是对的，@ManActivity.java:445（第 445 行）的代码是什么。如果这是代码，也可以将以下代码用作您的触摸监听器。

```
 sdff.setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            if (event.getAction() == MotionEvent.ACTION_DOWN) {
                // dont use sdff, use v param that is passed in.
                v.setBackgroundDrawable(getResources()
                        .getDrawable(R.drawable.pressed));
            } else if (event.getAction() == MotionEvent.ACTION_UP) {
                if (play != null) {
                    play.reset();
                    play.release();
                }
                play = MediaPlayer.create(ManActivity.this,
                        R.raw.sdff);

                play.start();
                v.setBackgroundDrawable(getResources()
                        .getDrawable(R.drawable.button));
            } else if (event.getAction() == MotionEvent.ACTION_CANCEL) {
                v.setBackgroundDrawable(getResources()
                        .getDrawable(R.drawable.button));
            }
            return false;
        }
    }); 
```

无论如何，您是否尝试过调试您的应用程序？（右键单击包资源管理器中的 Project > Debug As > Android Application ）。然后这将切换到调试视角。找到断点窗格（窗口 > 显示视图 > 断点）。单击 Add JAva execption Breakpoint 按钮（它是一个带有“！”的“J”）。输入“Null”并双击出现的 NullPointerException”。

# android - 如何使用 Android 设备使受控计算机光标更准确

> ID：10483839
> 
> 赞同：-1
> 
> 时间：2012-05-07T14:27:26.453
> 
> 标签：android, mouse, touchpad

我正在创建一个移动应用程序，例如 Android 设备上流行的键盘和鼠标，我面临的问题是鼠标在计算机屏幕上无法正常移动，我使用 Java 机器人类使光标不断抖动并且很难移动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T14:34:51.437

我想你会想看看基于用户手指速度的某种运动缩放算法。如果用户在 Android 设备上缓慢移动手指，则鼠标光标移动缓慢（距离更短）。如果用户快速移动他们的手指，那么鼠标光标可以在屏幕上快速移动更远的距离。

# dojo - dojo 1.6 DataGrid 不能显示列表？

> ID：10483844
> 
> 赞同：0
> 
> 时间：2012-05-07T14:27:53.273
> 
> 标签：dojo, dojox.grid.datagrid

在 dojo 1.7.2 中，如果我创建一个包含数组值的数据存储，dojox.grid.DataGrid 将毫无问题地显示它们，并用逗号分隔每个项目。

但是，在 dojo 1.6 中，它只需要数组的第一个元素。我有一个项目，我必须使用 1.6 版。在那个版本中是否有任何解决方法？

为了说明这个问题，这里有两个例子：

*   在道场 1.6 上：http: [//jsfiddle.net/psoares/HbFNY/](http://jsfiddle.net/psoares/HbFNY/)
*   在道场 1.7 上：http: [//jsfiddle.net/psoares/QLm65/](http://jsfiddle.net/psoares/QLm65/)

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T14:53:54.170

显然问题来自 ItemFileReadStore 而不是来自网格。我修改了 1.6 的代码以使用 ObjectStore 和 MemoryStore 代替，它工作。

见[http://jsfiddle.net/psoares/HbFNY/16/](http://jsfiddle.net/psoares/HbFNY/16/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T06:08:59.163

这是一个缺陷，但事实并非如此.. JSON 的构造并不完全正确，因为任何值都不允许作为数组，除非它是 childAttrs 之一。由于 [1,2,3].toString() 的性质，这就是为什么您尝试将值设置为数组被认为是有效的。

ItemFileReadStore 中的 get/set 与它的项目一起工作，如下所示：

```
store._arrayOfAllItems = {
 value1 : { values : [ 'realvalue' ] },
 value2 : { values : [ 'realvalue' ] }
}; 
```

吸气剂然后说

```
store.get = function(itemById, val) { return itemById[val][0]; } 
   // why only the first arrayslot is pulled from store---/^ 
```

在您的 JSON 构造中，是什么禁止您设置如下值？

```
 var data = {
        id: 'id',
        label: 'id',
        items: [
            {
            id: "value1",
            values: "a,b,c"   // permit-able string value
        },
        {
            id: "value2",
            values: "foo"}
        ]
    }; 
```

如果您想通过一个 ID 的相同键获得多个值，那么您必须将数据作为子项传递并按此方式处理它们，例如；

```
 data: {
        id: 'id',
        label: 'id',
        childrenAttrs: [ 'items', 'children'], // << default behavior
        items: [ {
            id: "value1",
            children: [
              { id: "value1_1", values: 'a' },
              { id: "value1_2", values: 'b' },
              { id: "value1_3", values: 'c' }
            ]
        }, {
            id: "value2",
            values: "foo"
        } ]
    } 
```

但是，只有 dojox.grid.TreeGrid 允许使用多级数据存储

# python - 从 Python 守护进程认真打印到标准输出

> ID：10483846
> 
> 赞同：1
> 
> 时间：2012-05-07T14:28:28.663
> 
> 标签：python, python-daemon

[我使用python-daemon](http://pypi.python.org/pypi/python-daemon/)编写了一个简单的脚本，它打印到`sys.stdout`：

```
#!/usr/bin/env python
#-*- coding: utf-8 -*-

import daemon
import sys
import time

def main():
    with daemon.DaemonContext(stdout=sys.stdout):
        while True:
            print "matt daemon!!"
            time.sleep(3)

if __name__ == '__main__':
    main() 
```

该脚本按我希望的那样工作，除了一个主要缺陷——当我在我的 shell 中输入时它会中断我的输入：

```
(daemon)modocache $ git clomatt daemon!!
matt daemon!!ne
matt daemon!! https://github.com/schacon/cowsay.git
(daemon)modocache $ 
```

有没有办法以非侵入性的方式显示输出？我希望有类似的东西：

```
(daemon)modocache $ git clo
matt daemon!! # <- displayed on new line
(daemon)modocache $ git clo # <- what I had typed so far is displayed on a new line 
```

如果这是一个愚蠢的问题，请原谅，我对 shell 的一般工作方式不太熟悉。

### 编辑：澄清

我希望这个脚本运行守护进程的原因是我想从 shell 中向 shell 用户提供更新，例如以非侵入方式将天气更新打印到控制台。如果有更好的方法来实现这一点，请告诉我。但目的是在终端内显示信息（而不是通过，比如说，Growl 通知），而不会阻塞。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T14:33:21.603

根据定义，守护进程应该在后台运行。因此它应该写入日志文件。

因此，要么将其输出重定向到日志文件（shell 重定向或将其移交给某些 sys 日志记录守护进程），要么将其写入 python 代码中的日志文件。

更新：

```
man write
man wall 
```

[http://linux.die.net/man/1/write](http://linux.die.net/man/1/write) , [http://linux.die.net/man/1/wall](http://linux.die.net/man/1/wall)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T14:44:01.233

写入守护程序的日志文件可能是最佳实践。但是你能不能不写信给 stderr 并通过交织线获得上述所需的行为？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-07T14:53:26.833

如果它不需要是“即时”通知，并且您可以等到用户下次运行命令时，您可以将各种东西烘焙到您的`bash`shell 提示符中。例如，我的告诉我时间和我所在目录的 git 存储库状态。

“普通用户”shell 提示的 shell 变量是`PS1`，所以谷歌搜索`bash PS1`or`bash prompt customisation`会得到一些有趣的例子。

这里有一些链接：

*   [一些基本的自定义](http://www.thegeekstuff.com/2008/09/bash-shell-ps1-10-examples-to-make-your-linux-prompt-like-angelina-jolie/)
*   一个更复杂的例子：[`git bash`提示](http://www.opinionatedprogrammer.com/2011/01/colorful-bash-prompt-reflecting-git-status/)

通常，您可以在提示字符串中包含任意脚本的输出。但是请注意，高延迟命令会延迟提示字符串的打印，直到可以对其进行评估，因此缓存信息可能是个好主意。（例如，如果您要显示来自天气网站的天气，请不要`bash`在每次显示提示时都让您的提示退出并检索网页！）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-07T15:35:44.193

查看***日志***库（标准库的一部分）。这可以根据系统的状态将调试和运行时数据路由到控制台或文件（或任何地方）。
它提供了多种日志工具，例如错误、调试、信息。每个都可以进行不同的配置。

[请参阅有关日志记录的文档 - 链接](http://docs.python.org/library/logging.html)

```
import logging
logging.basicConfig(filename='example.log',level=logging.DEBUG)
logging.debug('This message should go to the log file')
logging.info('So should this')
logging.warning('And this, too') 
```

# php - PHP - $_GET 仍然可以在 URL 中使用空格吗？

> ID：10483855
> 
> 赞同：-4
> 
> 时间：2012-05-07T14:28:59.350
> 
> 标签：php, if-statement, get

我有一个简单的问题......如果你在 URL 中有空格`$_GET`，可以说 `"page=about us"`，如果你然后使用这个代码`IF($_GET['page']=='about us')`。那行得通吗？或者你必须使用`IF($_GET['page']=='about%20us')?`

谢谢你的时间！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T14:34:14.847

`+`在发送 HTTP 请求之前，您的浏览器会将 URL 中的文字空间转换为符号。当 PHP 看到那个`+`标志时，它将再次成为`$_GET`.

所以，是的，将它与`== "about us"`. 不要与`%20`. （无论如何，这是 URL 中有效但不太可能的编码。）

*侧节点*。最好不要依赖浏览器魔法。输出链接时，自己嵌入`+`代替空格。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T14:30:04.950

看看[url_decode](http://nl3.php.net/manual/en/function.urldecode.php)。

# jquery - 如何在 jQuery Mobile 中传递值？

> ID：10483857
> 
> 赞同：0
> 
> 时间：2012-05-07T14:29:04.223
> 
> 标签：jquery, mobile, cordova

在使用 PhoneGap 时，我创建了一个 SQLite 数据库，其中存储了姓名和电话号码以及一个自动递增的 id 字段。我正在使用 jQuery Mobile 来获取结果并将其显示在列表视图中，这是代码

```
 function queryDB(tx){

    tx.executeSql('SELECT * FROM DEMO',[],querySuccess,errorCB);
}

 function querySuccess(tx,result){

    $('#contactList').empty();

    $.each(result.rows,function(index){

        var row = result.rows.item(index);

        $('#contactList').append('<li><a href="#"><h3 class="ui-li-heading">'+row['name']+'</h3><p class="ui-li-desc">Phone '+row['phone']+'</p></a></li>');

    });

  $("#contactList").listview();

} 
```

现在我希望当用户点击屏幕上的某个列表元素时，他应该被带到一个新页面。除此之外，我想将该用户的 ID 传递到新页面，以便我可以使用该 ID 在数据库中保存更多详细信息。因为我是 JQM 的新手，所以我不知道该怎么做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T09:58:41.033

首先你需要向所有 LI 攻击事件

```
 $('#contactsList li').on("vclick",function(){
        //do what you need to do to change the page
    }); 
```

您还缺少 li 内每个链接上的 'data-role="button"'。我会像这样改变它们：

```
 $('#contactList').append('<li><a href="#" id='+row['id']+' data-role="button"><h3 class="ui-li-heading">'+row["name"]+'</h3><p class="ui-li-desc">Phone '+row["phone"]+'</p></a></li>'); 
```

到底：

```
 $('#contactsList li').on("vclick",function(){
        localStorage.currentId = $('a',this).attr("id");
        $.mobile.changePage('myOtherPage.html');
    }); 
```

要从其他页面访问 id：

```
 var currentId = localStorage.currentId; 
```

# mysql - SQL foreach 等效查询

> ID：10483861
> 
> 赞同：0
> 
> 时间：2012-05-07T14:29:10.840
> 
> 标签：mysql, sql, foreach

我在创建查询时遇到了困难。我用谷歌搜索了很多，但没有找到合适的解决方案。我有一个名为“博客”（父）的表和一个名为“条目”（子）的表：

**博客**

*   ID
*   学科
*   所有者

**入口**

*   ID
*   blog_id
*   已发布（1 = 已发布，0 = 未发布）
*   date_created（时间戳，创建时间和发布时间）

一个博客有多个条目。只有已发布的条目对其他用户可见。

我想创建一个查询，它获取 10 个最新修改的博客。为此，我可能需要 SQL 中的“foreach”等效项来搜索所有博客，并按最新的 PUBLISHED 条目（entry.date_modified）对它们进行排序，但只有 IF entry.published = 1

我的 SQL 知识不在允许我创建这样一个查询的水平上。附加信息：在 MySQL 中使用 PHP (codeigniter)

我试过这个，知道它永远不会起作用，但它可以帮助你作为我想要完成的参考

```
SELECT blog.id
FROM blog
JOIN entry ON entry.blog_id = blog.id
WHERE entry.published = 1
ORDER by entry.date_created desc
LIMIT 0, 10 
```

我希望我的最终结果是他们的子条目最近发布的 10 个 blog.id。有人可以帮忙吗？非常感谢所有帮助。

如果这不可能在 1 个查询中实现，也许使用 PHP 我可以创建一个 foreach 语句来执行单个查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T14:39:24.797

我相信这会奏效：

```
SELECT blog_id
FROM entry
WHERE published = 1
GROUP BY blog_id
ORDER BY MAX(date_created) DESC
LIMIT 0, 10 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-07T14:32:11.000

这可能就是您所需要的。

```
SELECT blog_id
FROM entry
WHERE published = 1
Group By blog_id
ORDER by date_created desc
LIMIT 0, 10 
```

# sql-server-2008 - SQL查询中的IF条件

> ID：10483862
> 
> 赞同：0
> 
> 时间：2012-05-07T14:29:12.877
> 
> 标签：sql-server-2008

这是我的 SQL 查询

```
Declare @Type varchar

select  
  if
    (tn.notification_type=1)
  begin
    set @Type= 'WORK FLOW'
    print  'status  '+ CAST(@type AS nvarchar(58))  
  end
from tbl_Notification tn 
```

在这里，我遇到了包含基于表列值的条件的问题

例如，我有值 1 和 2 和 3

当我执行时，我得到了错误。

> 消息 156，级别 15，状态 1，第 3 行
> 关键字“if”附近的语法不正确。
> 消息 156，级别 15，状态 1，第 9 行
> 关键字“来自”附近的语法不正确。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T14:31:08.827

用 case 语句替换 if 语句。你不能在这样的查询中使用 if 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T14:36:26.880

详细说明 Namphibian 的答案，这是准确的：

```
SELECT
      @Type = (CASE tn.Notification_Type 
                   WHEN 1 THEN 'WORK FLOW' 
                   ELSE 'SOMETHING ELSE' 
                END)
FROM tbl_Notification tn 
```

您也无法像这样在 SQL 查询中执行打印，您必须在之后或在某种循环情况下执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T14:33:56.237

```
Declare @Type varchar 

if((select tn.notification_type from tbl_Notification tn) = 1) 
begin
   set @Type= 'WORK FLOW' 
   print 'status '+ CAST(@type AS nvarchar(58))
end 
```

# wpf - WPF MediaElement（MediaFailed，慢动作视频）的稳定性问题，是否有解决方法？

> ID：10483865
> 
> 赞同：6
> 
> 时间：2012-05-07T14:29:17.017
> 
> 标签：wpf, mediaelement

我有几个问题：

*   媒体无法播放并继续失败，直到应用程序重新启动
*   音频播放正常，但视频慢动作，直到应用程序重新启动才能正常播放。
*   除了重新启动应用程序之外，没有其他方法可以重新初始化。（据我所知）
*   没有真正可靠的方法可以知道视频是否正在渲染。我可以观察位置来验证它是否正在*播放*，但这并不能保证有任何视频输出。

我在我的 WPF 应用程序中运行 MediaElement 扩展版本的两个实例，这取决于它们的稳定性。经过多次测试，我得出的结论是，由于仅使用 GPU 进行解码，它是性能最高的视频播放器，高于 MediaKit 和 vlcdotnet。我在 WVC1 (Windows Media Video AP@l3 VC-1) 中编码了 1080p 质量和相对较小的文件大小的视频。最终，在多次播放后，视频将无法播放，此时会触发 MediaFailed 事件并随后完全停止工作，直到重新启动应用程序。

据我了解，当它像这样失败时，它是底层 Windows Media Player OCX 控件中的核心故障，除了完全重新启动应用程序之外，无法以任何方式修复它。有没有人为这些问题找到任何可靠的解决方法？妈妈在微软论坛上的词...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T18:56:00.707

*在这里回答我自己的问题，以方便可能遇到这些问题的未来 SO'ers。* 问题在于 WPF，不打算改进。要以最少的开销获得更可靠的解决方案，请尝试[WPFMediaKit](http://wpfmediakit.codeplex.com/)。

# android - 安卓下载

> ID：10483871
> 
> 赞同：-1
> 
> 时间：2012-05-07T14:29:30.667
> 
> 标签：android

我下载了 Android SDK 安装程序文件，当我安装它时，它会启动 SDK 管理器，然后安装许多东西。我有以下疑问

1.  Android SDK 管理器要求我们安装的东西是否必不可少，因为我的 Internet 连接速度非常慢，并且 SDK 管理器下的文件大小太大。
2.  其次，如果SDK管理器下的文件可以在具有高速互联网连接的另一台计算机上下载，然后可以复制到我的计算机上？这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T14:37:37.973

1.  这实际上取决于您为应用程序定位的最低平台是什么。例如，如果您的最低平台是 android-14，请不要下载 android-7，因为您不需要它。
2.  据我所知（未经测试），您应该能够将您的 android-N 文件夹复制到您的 {sdk-path}/platforms 目录。

# mysql - 搜索返回最多匹配项的多个列

> ID：10483872
> 
> 赞同：0
> 
> 时间：2012-05-07T14:29:34.030
> 
> 标签：mysql, sql, count

我想在多个输入上搜索 styleID 和 colorID 字段。例如，我想搜索 styleID = 3、styleID = 4、colorID =1、colorID = 5 的表，然后按 boxID 对这些结果进行分组。按该组中的实际匹配数对结果进行排序。

包含 styleID 4 和 styleID 3 以及 colorID 1 和 colorID 5 的 boxID 将首先显示，因为它匹配所有条件。

```
ID boxID styleID colorID keys 

1 1 4 1 Sexy Tie 

2 1 3 2 Red Tie 

3 1 3 6 Striped Blue 

4 2 3 2 Checkers 

5 2 3 5 不是蓝色

6 2 4 6 Cyan is Purple 

7 3 4 2 Fancy 

8 3 4 5 花式

9 3 4 2 花式

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T14:52:14.160

你可以尝试类似的东西

```
select boxId, sum(matches) 
from (select boxID, 
      (case when styleId IN (4) then 1 else 0 end) + 
      (case when colorId in (1, 5) then 1 else 0 end) matches 
       from test) t1
group by boxId
order by sum(matches) desc; 
```

[http://sqlfiddle.com/#!2/b5879/20](http://sqlfiddle.com/#!2/b5879/20)

# jsp - JSF 2.0 标签未出现在 Tomcat 6.0 服务器上

> ID：10483875
> 
> 赞同：0
> 
> 时间：2012-05-07T14:29:43.327
> 
> 标签：jsp, jsf, tomcat, xhtml, tomcat6

我刚刚使用eatj.com 部署了我的第一个JSF 站点。

我已经使用 glassfish 在 netbeans 上测试了我的应用程序，并且带有 JSF 标记的站点在 localhost 上运行良好。

我已经通过 ftp 将项目文件上传到了 tomcat 服务器上的 webapps 目录下。

jsp-api.jar 文件存在于 Tomcat 服务器上的 /lib 文件中。

当我重新启动服务器并转到 /webapps/myproject/web/index.xhtml 页面加载但不可见 jsf 标记。

我试图将 jar 库复制到 /webapps/myproject/web/WEB-INF/lib/ 但是没有任何变化。

也许这与我的主页是 .xhtml 而不是 .jsf 的事实有关？但我会想如果它在我的本地主机上工作，那么它在这台服务器上工作？

我确信服务器支持 JSF，因为有运行 JSF 页面的示例。

任何帮助将不胜感激。

谢谢

编辑：

下面是我当前的 web.xml 文件

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee     http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

<context-param>
    <param-name>javax.faces.PROJECT_STAGE</param-name>
    <param-value>Development</param-value>
</context-param>
<servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.xhtml</url-pattern>
</servlet-mapping>
<session-config>
    <session-timeout>
        30
    </session-timeout>
</session-config>
<welcome-file-list>
    <welcome-file>faces/index.xhtml</welcome-file>
</welcome-file-list> 
```

编辑：

下面是我的 catalina.out 文件中用于服务器启动的粘贴：

```
INFO: Server startup in 1594 ms
May 7, 2012 1:09:50 PM org.apache.coyote.http11.Http11Protocol pause
INFO: Pausing Coyote HTTP/1.1 on http-6713
May 7, 2012 1:09:51 PM org.apache.catalina.core.StandardService stop
INFO: Stopping service Catalina
May 7, 2012 1:09:51 PM org.apache.coyote.http11.Http11Protocol destroy
INFO: Stopping Coyote HTTP/1.1 on http-6713
May 7, 2012 1:09:57 PM org.apache.catalina.core.AprLifecycleListener init
INFO: 
May 7, 2012 1:09:57 PM org.apache.coyote.http11.Http11Protocol init
INFO: Initializing Coyote HTTP/1.1 on http-6713
May 7, 2012 1:09:57 PM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 1017 ms
May 7, 2012 1:09:57 PM org.apache.catalina.core.StandardService start
INFO: Starting service Catalina
May 7, 2012 1:09:57 PM org.apache.catalina.core.StandardEngine start
INFO: Starting Servlet Engine: Apache Tomcat/6.0.14
May 7, 2012 1:09:59 PM org.apache.coyote.http11.Http11Protocol start
INFO: Starting Coyote HTTP/1.1 on http-6713
May 7, 2012 1:09:59 PM org.apache.jk.common.ChannelSocket init
INFO: JK: ajp13 listening on /0.0.0.0:4713
May 7, 2012 1:09:59 PM org.apache.jk.server.JkMain start
INFO: Jk running ID=0 time=0/62  config=null
May 7, 2012 1:09:59 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 1580 ms 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T14:32:06.923

仅当请求 URL 与in匹配时`<url-pattern>`，才会处理 JSF 标记。您似乎已将其映射到，但of不匹配。您有 2 个选项：`FacesServlet``web.xml``*.jsf``<welcome-file>``index.xhtml`

*   将 映射到`FacesServlet`of`<url-pattern>`而`*.xhtml`不是`*.jsf`。这样，您就无需摆弄虚拟 URL。

*   更改并在根文件夹`<welcome-file>`旁边`index.jsf`创建一个空`index.jsf`文件，`index.xhtml`以欺骗服务器它确实存在，以防止 404 错误。

By the way, the confirmation that you've a `jsp-api.jar` file in Tomcat's `/lib` is irrelevant to this problem. First, that's standard part of Tomcat and second, that's not used at all when you're using Facelets.

Last but not least, make sure that you ship a concrete JSF implementation along with your webapp in its `/WEB-INF/lib` folder. Tomcat does as being a simple JSP/Servlet container namely not ship with JSF bundled, while Glassfish as being a full fledged Java EE application server does. If you don't have any one, [download](http://javaserverfaces.java.net) and drop the `javax.faces.jar` file in `/WEB-INF/lib` folder of your webapp before deploying to Tomcat. Also make sure that your `web.xml` is declared conform Servlet 2.5, because Tomcat 6 is a rather old version which doesn't support Servlet 3.0 like as Glassfish 3.

# ios - 在 UIWebView 内基于 Web 的表单登录中使用 ASIHTTPRequest 自动登录

> ID：10483877
> 
> 赞同：0
> 
> 时间：2012-05-07T14:29:46.720
> 
> 标签：ios, uiwebview, asihttprequest, autologin, uiwebviewdelegate

我正在尝试在 UIWebView 内基于 Web 的表单登录中使用 ASIHTTPRequest 库完成自动登录。我想让它持久化，因此用户在 UIWebView 中发出的以下请求使用网络库提供的凭据。

我试过这个：

```
- (void)viewDidLoad {

[super viewDidLoad];
NSString *fullURL = @"http://myweb/loginform";

NSURL *url = [NSURL URLWithString:fullURL];
NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];
[request setUseKeychainPersistence:YES];
[request setUseSessionPersistence:YES];
[request setUseCookiePersistence:YES];
[request setPostValue:@"myuser" forKey:@"__ac_name"];
[request setPostValue:@"mypass" forKey:@"__ac_password"];
[request setDelegate:self];
[request startAsynchronous];

}

- (void)requestFinished:(ASIHTTPRequest *)request {
NSError *error = [request error];
if (!error) {
    [webView loadData:[request responseData] MIMEType:@"text/html" textEncodingName:@"UTF-8" baseURL:[request url]]; }
} 
```

但是当我尝试通过 UIWebView 导航时，凭据不会保留在其中，并且会收到未经身份验证的请求。

有一种方法可以在 ASIHTTPRequest 世界和 UIWebView 之间共享凭据吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T08:39:46.123

好的，代码完全正确，我在形成请求时丢失了一个 POST 值。每个 Web 应用程序都可能需要自己的 POST 参数，而不仅仅是用户名和密码。我缺少的参数是：

```
[request setPostValue:@"1" forKey:@"form.submitted"]; 
```

现在它就像一个魅力。

# mysql - 错误 (150) 由 SQL 脚本生成？

> ID：10483888
> 
> 赞同：0
> 
> 时间：2012-05-07T14:30:27.213
> 
> 标签：mysql, sql, database

我正在尝试使用 SQL 脚本在 MySQL 上创建一个表，而 MySQL 数据库不断给我错误 150。我在 Navicat 和 MySQL Workbench 中都尝试了以下代码，并且都给出了 150 错误。

看来这是一个外键问题，但我实际上看不到我的代码有什么问题，并且想知道是否有更多经验丰富的数据库用户会对这个问题有所了解？

```
SET FOREIGN_KEY_CHECKS=0;
CREATE TABLE `network_invites` (
`invite_ID` int(11) NOT NULL AUTO_INCREMENT,
`invite_From` int(11) NOT NULL,
`invite_Network` int(11) NOT NULL,
`invite_NetCreator` int(11) NOT NULL,
`invite_Message` varchar(256) NOT NULL,
`invite_Date` date DEFAULT NULL,
PRIMARY KEY (`invite_ID`),
KEY `invite_From` (`invite_From`),
KEY `invite_Network` (`invite_Network`),
KEY `invite_NetCreator` (`invite_NetCreator`),
CONSTRAINT `network_invites_ibfk_1` FOREIGN KEY (`invite_From`) REFERENCES `users`     (`user_ID`) ON DELETE CASCADE ON UPDATE CASCADE,
CONSTRAINT `network_invites_ibfk_2` FOREIGN KEY (`invite_Network`) REFERENCES `networks` (`network_ID`) ON DELETE CASCADE ON UPDATE CASCADE,
CONSTRAINT `network_invites_ibfk_3` FOREIGN KEY (`invite_NetCreator`) REFERENCES `networks` (`network_Creator`) ON DELETE CASCADE ON UPDATE CASCADE
)ENGINE=InnoDB AUTO_INCREMENT=21 DEFAULT CHARSET=latin1; 
```

我看不出 FK 问题是什么，这些字段确实存在于数据库中，并且它们具有相同的数据类型。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T15:19:34.397

问题是一个错字：

```
CONSTRAINT `network_invites_ibfk_2` 
  FOREIGN KEY (`invite_Network`) 
  REFERENCES `networks` (`network_ID`)       ---<--- either here
  ON DELETE CASCADE ON UPDATE CASCADE,

CONSTRAINT `network_invites_ibfk_3` 
  FOREIGN KEY (`invite_NetCreator`) 
  REFERENCES `networks` (`network_Creator`)  ---<--- or here (more probable)
  ON DELETE CASCADE ON UPDATE CASCADE 
```

您的`networks`表主键可能是`network_ID`而不是`network_Creator`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T15:02:00.897

我认为解决方法是：

1.  创建没有约束的表

2.  使用 ALTER TABLE 添加约束

再次，这是一种解决方法，并且希望收到 people@mysql 或更有经验的人的来信

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T15:02:43.857

确保 2 个表类型都是 InnoDB。还要确保您的主键和外键都是未签名的。

所有这些设置都可以在 NaviCat 中使用“设计表”选项进行更改。

我已经多次遇到这个问题，并且 99% 的时间都可以解决这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T15:04:58.380

您需要在 上具有索引`users.user_ID`，`networks.network_ID`并且`networks.network_Creator`列的类型应该与表中的完全相同`network_invites`。

# java - 暂停/停止 WaveAudioStream 时的延迟

> ID：10483895
> 
> 赞同：0
> 
> 时间：2012-05-07T14:31:05.417
> 
> 标签：java, multithreading, delay, wav

我刚刚找到了一个[小型 WAV 播放器](http://www.fobec.com/CMS/java/class/wav-player-avec-bouton-stop-barre-progression_1106.html)的代码。

它运行良好，但是当单击“暂停”和“停止”按钮时，会有 2 秒的延迟，这使得应用程序看起来非常不专业。我不知道是什么原因造成的，但我真的很想修复它，谁能检查代码并告诉我它来自哪里？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T08:35:13.710

我写了这个样本一段时间，不太记得了。

在我看来，延迟主要来自更新帧功能。在 VisualPlayer 类中，UI 由一个计时器更新，该计时器从线程中获取当前值。编写此示例的效率不是很高，但速度更快。更新 UI 的最佳方式是实现一个 Runnable 类并使用 SwingUtilities.invokeLater() 调用它。

您是否还尝试减少读取缓冲区的大小？

# c++ - MKL Intel C++ 和准随机数生成器

> ID：10483896
> 
> 赞同：0
> 
> 时间：2012-05-07T14:31:06.633
> 
> 标签：c++, random, random-sample, intel-mkl

我正在使用 MKL Intel 进行随机数计算。我使用准随机算法。此外，在我看来，生成的数字根本不是随机的。我知道准随机算法将提供最大化空间占用的采样点。因此，它们不需要完全出乎意料和随机，而只是为了适当地覆盖空间。

我想以随机方式使用这个数字，而不是让它们以预期的方式排序，以便在使用这些“随机”点之前，我对它们进行置换。

我没有正确使用 MKL 库吗？还是听起来很正常，因为正如我所提到的，点是为了覆盖整个空间，而不是完全随机？

如果一些 MKL 或准随机生成。有用户，欢迎指教。

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T12:02:50.403

理论上，任何均匀分布的序列的随机排列都应该产生随机样本。以 1, 2, 3, ..., n 为例，对它进行随机置换，得到随机均匀样本。

随机排列算法的质量对结果样本的质量至关重要。

同时我想知道为什么你需要来自 MKL 的准随机 RNG。对我来说，这看起来有点矫枉过正。如果您需要良好的伪随机序列，那么使用 MKL 的其他 RNG 可能是有意义的，例如 MT19937 或 MT2203 或 SFMT19937，它们速度快且质量高。你能解释一下为什么你需要一个准随机序列作为排列的基础吗？

问候，谢尔盖

# algorithm - 在给定字符串中找到最长回文的最佳算法是什么？

> ID：10483902
> 
> 赞同：-4
> 
> 时间：2012-05-07T14:31:17.523
> 
> 标签：algorithm, palindrome

> **可能重复：**
> [编写一个函数，返回给定字符串中最长的回文](https://stackoverflow.com/questions/1115001/write-a-function-that-returns-the-longest-palindrome-in-a-given-string)

给定长度为“n”的字符串，我需要最长的回文，其时间和空间复杂度应该是有效的。

任何人都可以至少用伪代码帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T14:34:51.560

一种方法是将字符串中的每个字符视为回文的可能“中心”，然后向左和向右扩展，只要左侧位置的字符等于右侧位置的字符（这是sub-string 是回文，显然必须考虑 sub-string 的奇数和偶数长度的两种子情况）。对源字符串中的所有位置 1..n 执行此操作将为您提供字符串中包含的连续字符中最长的回文。

# objective-c - 应用程序崩溃而不通过我的代码

> ID：10483905
> 
> 赞同：1
> 
> 时间：2012-05-07T14:31:31.330
> 
> 标签：objective-c, ios, crash, uikit, segmentation-fault

在分析我们的崩溃日志时，我发现一个相当常见的崩溃甚至不会发生在我自己的课程中。这些是外部崩溃日志，因此我无法重现该问题。

由于我无法调试我想知道的框架，因此解决此问题的可行方法是什么。

我唯一的线索是 SIGSEGV 可能是分段错误或无效指针。但就像我说的那样，因为我的课程*似乎没有*直接参与，所以这对我没有多大帮助。

迷恋;撞车;崩溃：

```
Exception Type:  SIGSEGV
Exception Codes: SEGV_ACCERR at 0x6b636f6c
Crashed Thread:  0

Thread 0 Crashed:
0   libobjc.A.dylib                     0x365c7f94 objc_msgSend + 43
1   CoreFoundation                      0x31cd23fd -[NSObject performSelector:withObject:withObject:] + 52
2   UIKit                               0x3291cfaf -[UIApplication sendAction:to:from:forEvent:] + 62
3   UIKit                               0x3291cf6b -[UIApplication sendAction:toTarget:fromSender:forEvent:] + 30
4   UIKit                               0x3291cf49 -[UIControl sendAction:to:forEvent:] + 44
5   UIKit                               0x3291ccb9 -[UIControl(Internal) _sendActionsForEvents:withEvent:] + 492
6   UIKit                               0x3291d5f1 -[UIControl touchesEnded:withEvent:] + 476
7   UIKit                               0x3291bad3 -[UIWindow _sendTouchesForEvent:] + 318
8   UIKit                               0x3291b4c1 -[UIWindow sendEvent:] + 380
9   UIKit                               0x3290183d -[UIApplication sendEvent:] + 356
10  UIKit                               0x329010e3 _UIApplicationHandleEvent + 5826
11  GraphicsServices                    0x3572d22b PurpleEventCallback + 882
12  CoreFoundation                      0x31d4c523 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 38
13  CoreFoundation                      0x31d4c4c5 __CFRunLoopDoSource1 + 140
14  CoreFoundation                      0x31d4b313 __CFRunLoopRun + 1370
15  CoreFoundation                      0x31cce4a5 CFRunLoopRunSpecific + 300
16  CoreFoundation                      0x31cce36d CFRunLoopRunInMode + 104
17  GraphicsServices                    0x3572c439 GSEventRunModal + 136
18  UIKit                               0x3292fe7d UIApplicationMain + 1080
19  MyApp                               0x0000321f main (main.m:14) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-07T14:49:03.320

此崩溃可能是您的错误导致的。如果您查看堆栈跟踪顶部的几行，它应该会提示您出现了什么问题。

```
1   CoreFoundation   0x31cd23fd -[NSObject performSelector:withObject:withObject:] + 52
2   UIKit            0x3291cfaf -[UIApplication sendAction:to:from:forEvent:] + 62
3   UIKit            0x3291cf6b -[UIApplication sendAction:toTarget:fromSender:forEvent:] + 30
4   UIKit            0x3291cf49 -[UIControl sendAction:to:forEvent:] + 44 
```

看起来您在某处有一个对象（可能是视图控制器），该对象已为事件注册但过早地被释放。最好的办法是在连接到调试器时尝试重现它。首先检查处理 UIControl 回调的代码，例如 UIButtons。

# tsql - 使用 SQL INSERT 创建包含 FileTable 的目录

> ID：10483906
> 
> 赞同：4
> 
> 时间：2012-05-07T14:31:31.570
> 
> 标签：tsql, filestream, sql-server-2012, filetable

有没有办法在不使用文件 I/O API的情况下在[FileTable中创建目录？](http://msdn.microsoft.com/en-us/library/ff929144.aspx)它就像创建 SQL INSERT 语句一样简单吗？

这是我第一次使用 SQL Server 2012，我不熟悉`FileTable`SQL Server 中的限制。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-07T16:13:34.323

以下对我有用。希望这对其他人有帮助。

```
INSERT INTO FileTable0 (name,is_directory,is_archive) VALUES ('Directory', 1, 0); 
```

*   您还应该查看Bob Beauchemin的[Techdays 2012 视频](http://channel9.msdn.com/Events/TechDays/Techdays-2012-the-Netherlands/2270)，了解有关.`FileStream``FileTable`

# c# - 如果没有用户登录到服务器，Windows 服务将不会运行

> ID：10483912
> 
> 赞同：0
> 
> 时间：2012-05-07T14:32:01.930
> 
> 标签：c#, windows, windows-services

我创建了一个 Windows 服务，它基本上是一个文件观察器，除非用户登录到它所在的机器，否则它不会运行。

该服务在 Windows Server 2003 机器上运行。它旨在侦听文件夹中的 excel 文件。当有一个 excel 文件时，它开始向 Web 服务发送一些信息。完成后，它将处理后的文件复制到存档文件夹。

谁能帮我？

最好的问候巴里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T14:33:38.233

以有权在计算机上作为服务登录的用户身份运行它。确保此用户有权访问您观看的目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T14:49:55.090

在这种情况下，我总是做的就是让用户以批处理作业的形式登录，并以服务的身份登录。
这 2 个中的 1 个很可能会解决您的问题。[您可以按照此处](http://kbase.gfi.com/showarticle.asp?id=KBID003504)
所述在本地组策略编辑器中进行配置 请注意，如果您的计算机位于域中，则组策略可能每 15 分钟被推送到服务器，因此您可能必须与系统管理员交谈把事情整理好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T14:50:25.807

当您实际上只想在有人登录时运行时，在这种情况下不要使用服务，而是使用自动启动应用程序。

如果您因为帐户权限而必须成为服务，则该服务可能会自行检测当前登录，但您可以将服务与连接到该服务的客户端（自动启动）应用程序结合使用。这样，您还可以显示托盘 incos、状态信息，并使用户能够使用客户端应用程序控制您的服务。使用 Win7 及更高版本，服务本身（在会话 0 中运行）不能再在用户桌面上显示 UI 交互。

请记住，当前操作系统上可能有多个用户登录...

# .net - 使用 MAPI Mail 发送 HTML 格式的邮件

> ID：10483915
> 
> 赞同：0
> 
> 时间：2012-05-07T14:32:10.877
> 
> 标签：.net, unmanaged, mapi

我正在使用此[链接](http://www.codeproject.com/Articles/17561/Programmatically-adding-attachments-to-emails-in-C?msg=4112958#xx4112958xx)使用 Mapi 发送邮件。但我想以 HTML 格式撰写邮件。

阅读[这个](http://msdn.microsoft.com/en-us/library/ff960439.aspx)网站和其他网站时，我遇到了一个名为：MAPI_NATIVE_BODY_TYPE_HTML 的“常量”。这给了我“希望”，即一切皆有可能。不幸的是，我无法做到这一点。我不习惯将 .NET Framework (mapi32.dll) 之外的非托管功能“转换”为托管代码。

欢迎任何想法/链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T14:47:07.860

不，该常量用于扩展 MAPI，但第一个链接处理简单 MAPI（这就是您正在使用的，对吗？）。

# ajax - 在 Wordpress 中使用 Ajax 按类别过滤循环

> ID：10483925
> 
> 赞同：3
> 
> 时间：2012-05-07T14:32:45.927
> 
> 标签：ajax, wordpress, loops, categories

好吧，我一直在到处寻找几个小时，似乎有很多方法可以做到这一点，因为我以前从未使用过 Ajax 并且对 havascript 知之甚少，这对我来说太难了。

我的首页（索引）或 wordpress 上有循环，我想要一个过滤器，一个具有不同类别的下拉菜单，当点击它时，在同一屏幕上显示的唯一帖子是来自该类别的帖子。我需要使用 ajax 刷新循环，因此在您使用过滤器时整个页面仍然完好无损。

这是我的索引文件中的内容：

```
<script type="text/javascript" src="http://www.google.com/jsapi"></script>
<script type="text/javascript">google.load("jquery", "1.2.6")</script>
<script type="text/javascript">
$(function(){
     $('#main_cat').change(function(){
         var $mainCat=$('#main_cat').val();
          $("#sub_cat").empty();
              // call ajax
                  $.ajax({

              url:"<?php bloginfo('wpurl'); ?>/wp-admin/admin-ajax.php",       
              type:'POST',
              data:'action=my_special_ajax_call&main_catid=' + $mainCat,
              success:function(results)
              {
            //  alert(results);
              $('#sub_cat *').fadeOut(500);
              $('#sub_cat + p').fadeOut(500);
              $("#sub_cat").append(results);
                  $('#sub_cat').load('http://localhost:8888/public_html/wp-content/themes/twentyten-child/templateloop.php');
              $('#sub_cat + p').fadeIn(1);
                  }
                      });

            }
    );
}); 
```

带有类别的下拉菜单如下所示：

```
<?php
wp_dropdown_categories('show_count=0&selected=-1&hierarchical=1&depth=1&hide_empty=0&exclude=1&show_option_none=Main Categories&name=main_cat');
?> 
```

因此，下拉菜单有效，它应该通过仅过滤一个类别的查询（从 wp_dropdown_categories 中获取）加载 wp 模板文件。如果我在 templateloop.php 文件中有一个虚拟文本，加载工作正常，但是当我有 wp 查询时，什么也没有发生。#sub_cat div，这是循环所在的位置，应该由模板文件切换，所有帖子列表都消失了，我只剩下页面的上半部分（直到 #sub_cat div 曾经是）。

有这么多的试验和错误，我尝试在模板文件、索引文件、函数中使用查询调用，我似乎从来没有得到任何结果。

在我的functions.php文件上，我得到了这个：

```
function implement_ajax() {
if(isset($_POST['main_catid']))
            {
              echo '<?php $paged = (get_query_var("paged")) ? get_query_var("paged") : 1; query_posts("cat='.$_GET['maincatid'].'&paged=$paged"); ?>';

            die();
            } // end if
}
add_action('wp_ajax_my_special_ajax_call', 'implement_ajax');
add_action('wp_ajax_nopriv_my_special_ajax_call', 'implement_ajax');//for users that are not logged in. 
```

我在这之前使用的查询行在索引文件中是：

```
 <?php $paged = (get_query_var('paged')) ? get_query_var('paged') : 1;
 query_posts("cat=1,2,3,4,5&paged=$paged"); ?> 
```

我试过使用 wp_query 但它无处可去，我真的需要指导。任何帮助表示赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T15:01:07.600

That is more complicated than it needs to be. You shouldn't need additional queries or AJAX at all. If you theme is using the [`post_class()`](http://codex.wordpress.org/Function_Reference/post_class) function as it should be, your posts all have classes associated with your categories. These classes are the category name prepended with 'category-'-- 'category-uncategorized', for example. All you really need to do is show and hide posts based on those classes.

I haven't written anything specifically for your circumstance but I have done this with some very large search results-- sometimes 400 or more per page-- and it works quite well. Here is the idea: Use jQuery to watch your select menu. You want [change](http://api.jquery.com/change/). When the select changes, parse the information to work out the category (I don't know off hand what information `wp_dropdown_categories()` includes in its markup.), [`show()`](http://api.jquery.com/show/) the selected category and [`hide()`](http://api.jquery.com/hide/) everything else.

# php - Magento If 语句采购订单

> ID：10483928
> 
> 赞同：0
> 
> 时间：2012-05-07T14:32:58.563
> 
> 标签：php, magento, if-statement

我正在尝试在 magento 中为采购订单的订单发票编写 PHP if 语句 - 基本上我想让它说采购订单：（＃）对于大多数发票，但对于我的一家商店而不是 PO，他们使用 Co-OP id 很好，我想将发票更改为 Co-Op ID: (#) 每当它是某个商店时。这是我最可能需要更改的代码行：

```
<?php echo Mage::helper('payment')->__('Purchase Order Number/Co-Op ID: %s', $this->htmlEscape($this->getInfo()->getPoNumber())) ?> 
```

这是我试图用于我的 if 语句的代码（我不确定这是否正确，因为我不是 PHP 专家也不是 Magento 专家）

```
<?php if (Mage::app()->getStore()->getName() != "verizon") { 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T14:59:35.793

您可以直接从发票 php 文件中的此语句中获取商店 ID `$invoice->getStoreId()`，您可以根据您的商店 ID 创建条件

# c# - 是否可以在 C# 中订阅事件订阅？

> ID：10483935
> 
> 赞同：6
> 
> 时间：2012-05-07T14:33:24.153
> 
> 标签：c#, events

如果我有这样的活动：

```
public delegate void MyEventHandler(object sender, EventArgs e);
public event MyEventHandler MyEvent; 
```

并添加一个像这样的事件处理程序：

```
MyEvent += MyEventHandlerMethod; 
```

...然后可以以某种方式注册吗？换句话说 - 是否有可能有类似的东西：

```
MyEvent.OnSubscribe += MySubscriptionHandler; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-07T14:37:03.323

与自动实现的属性类似，事件也是默认自动实现的。

`event`您可以按如下方式扩展 an 的声明：

```
public event MyEventHandler MyEvent
{
    add
    {
        ...
    }
    remove
    {
        ...
    }
} 
```

例如，请参阅[如何：使用字典存储事件实例（C# 编程指南）](http://msdn.microsoft.com/en-us/library/z4ka55h8.aspx)

有关 C# 3 和 C# 4 之间自动实现的事件有何不同，请参阅[事件在 C# 4 中进行了一些大修，第 I 部分：锁](http://blogs.msdn.com/b/cburrows/archive/2010/03/05/events-get-a-little-overhaul-in-c-4-part-i-locks.aspx)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-07T14:36:54.790

可以专门声明事件访问器，即添加和删除访问器。

这样做可以在添加新事件处理程序时执行自定义逻辑。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T14:38:10.873

当你定义你的事件时，当人们从你的事件中附加或删除自己时，你实际上可以使用更长的格式来执行更多的代码。

查看有关[添加](http://msdn.microsoft.com/en-us/library/cc713648.aspx)和[删除](http://msdn.microsoft.com/en-us/library/cc713642.aspx)关键字的信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-07T14:38:46.987

如果你声明你的自定义事件是可能的，就像这个*伪代码*：

```
class MyClass
{

    public event EventHandler MyEvent
    {
        add    {     //someone subscribed to this event  ! }
        remove {     //someone unsubscribed from this event ! }
    }

    ...
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-07T14:42:25.110

我猜，您正在寻找事件访问器。自定义对订阅者的引用的方法。这是你如何做到的

```
public class TestClass
{

   private event EventHandler UnderlyingEvent;
   public event EventHandler TestEvent
   {
        add
        {
             UnderlyingEvent += value;
        }
        remove
        {
             UnderlyingEvent -= value;
        }
   }
} 
```

欲了解更多信息，请访问这篇文章

[http://msdn.microsoft.com/en-us/magazine/cc163533.aspx](http://msdn.microsoft.com/en-us/magazine/cc163533.aspx)

# php - 这是什么数据类型？

> ID：10483936
> 
> 赞同：0
> 
> 时间：2012-05-07T14:33:28.817
> 
> 标签：php, json, types

我想知道这是什么数据类型，所以我可以在 PHP 中对其进行解码：

```
{s:31:"xperience_achievements_you_have";s:20:"You have %1$s points";s:26:"xperience_award_drawnin_of";s:69:"<b>%1$s</b> drawn-in of <a href="member.php?u=%2$s">%3$s</a> on %4$s.";s:26:"xperience_award_issued_for";s:68:"<b>%1$s</b> issued for <a href="member.php?u=%2$s">%3$s</a> on %4$s.";s:35:"xperience_award_issued_for_multiple";s:42:"<b>%1$s</b> issued for more than one user.";s:27:"xperience_award_issued_none";s:36:"<b>%1$s</b> has not yet been issued.";s:20:"xperience_awards_log";s:25:"Activity on issued Awards";s:28:"xperience_awards_used_fields";s:12:"Fields used:";s:17:"xperience_details";s:12:"Show details";s:14:"xperience_earn";s:11:"Earn Points";s:21:"xperience_earn_factor";s:6:"Factor";s:20:"xperience_earn_yours";s:5:"Yours";s:20:"xperience_gap_choose";s:16:"Give Away Points";s:27:"xperience_gap_choose_amount";s:66:"Enter the amount of points. They must be below the amount you have";s:26:"xperience_gap_choose_field";s:63:"Choose the category from where the points are being substracted";s:25:"xperience_gap_choose_user";s:49:"Type the name of the user who will receive points";s:23:"xperience_gap_give_away";s:9:"Give Away";s:18:"xperience_gap_more";s:31:"<a href="%1$s">Show more...</a>";s:18:"xperience_gap_text";s:156:"This is an automated message to inform you of a transfer to your Experience points.\r\n          \r\n            User [URL=%1$s]%2$s[/URL] has give away points to you:\r\n          %3$s";s:19:"xperience_gap_title";s:46:"Experience: Notification of a Points Give Away";s:22:"xperience_gap_you_have";s:8:"You have";s:16:"xperience_groups";s:13:"Group Ranking";s:22:"xperience_groups_empty";s:17:"No Social Groups.";s:20:"xperience_groups_max";s:10:"Max Points";s:20:"xperience_groups_min";s:10:"Min Points";s:27:"xperience_groups_minmembers";s:96:"Only public and moderated Social Groups with at least %1$s members are included in this ranking.";s:17:"xperience_insight";s:18:"Insight Experience";s:26:"xperience_insight_featured";s:8:"Featured";s:20:"xperience_insight_sg";s:10:"Best Group";s:23:"xperience_insight_tipps";s:26:"Hints on collecting points";s:28:"xperience_insight_tipps_desc";s:77:"With Experience you can see how you progress compared to the whole Community.";s:28:"xperience_insight_tipps_earn";s:105:"Use the <a href="xperience.php?go=earn">Earn Points</a> feature to learn how you can collect points.<br/>";s:35:"xperience_insight_your_achievements";s:17:"Your Achievements";s:29:"xperience_insight_your_awards";s:11:"Your Awards";s:35:"xperience_most_achieved_achievement";s:25:"Most achieved Achievement";s:27:"xperience_most_active_user7";s:27:"This Week: Most Active User";s:36:"xperience_most_exclusive_achievement";s:26:"Most exclusive Achievement";s:25:"xperience_no_achievements";s:30:"No Achievements are available.";s:19:"xperience_no_awards";s:23:"No Awards are assigned.";s:23:"xperience_no_promotions";s:28:"No Users have been promoted.";s:28:"xperience_promotion_benefits";s:41:"Benefits you can get with this usergroup:";s:37:"xperience_promotion_benefits_assigned";s:21:"Assigned Permissions:";s:36:"xperience_promotion_benefits_revoked";s:20:"Revoked Permissions:";s:32:"xperience_promotion_benefits_set";s:47:"<i>%1$s</i> set from <b>%2$s</b> to <b>%3$s</b>";s:33:"xperience_promotion_benefits_sets";s:22:"Additional allowances:";s:27:"xperience_promotion_ingroup";s:21:"You are in this group";s:25:"xperience_promotion_jumps";s:59:"Promotions are possible to these usergroups and conditions:";s:30:"xperience_promotion_notingroup";s:32:"You are <i>not</i> in this group";s:25:"xperience_promotion_users";s:37:"%1$s Users promoted to this Usergroup";s:19:"xperience_recent_aa";s:41:"Recently assigned Awards and Achievements";s:25:"xperience_recent_activity";s:15:"Recent Activity";s:15:"xperience_stats";s:10:"Statistics";} 
```

它看起来像某种 JSON，但 json_decode 返回一个空字符串。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T14:34:09.450

这是一个序列化变量，使用`unserialize($string);`.

请参阅[序列化](http://php.net/serialize)和[反序列化](http://php.net/unserialize)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T14:42:50.950

数据类型为 varchar()，存储方法在 php中称为[serialize 。](http://php.net/manual/en/function.serialize.php)

序列化有助于减少磁盘存储空间，因为您将所有数据压缩为单个可存储值！

# javascript - 需要在右键单击时禁用“上下文菜单”并在右键单击时调用函数

> ID：10483937
> 
> 赞同：0
> 
> 时间：2012-05-07T14:33:28.880
> 
> 标签：javascript, html, javascript-events

我已经使用 oncontextmenu 在鼠标右键单击上调用函数，它在 firefox 上运行良好，但在 ie 上导致问题，上下文菜单也与函数一起出现。

我只需要在纯 javascript 中调用左右单击具有一些参数的相同函数。

```
<html>
<script>
function mouseDown(e,param) {
  if (parseInt(navigator.appVersion)>3) {
    var clickType=1;
    if (navigator.appName=="Netscape") clickType=e.which;
    else clickType=event.button;

    if (clickType==1) {
      alert("left" +param);
    }

    if (clickType!=1) { 
      alert('right' + param);
    }
 }
 return true;
}

</script>
<body>
<a href="javascript:void(0)"
   onclick="mouseDown(event,'test1');"
   oncontextmenu="mouseDown(event,'test2');">mouse</a>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T14:37:32.183

您需要`return false;`在 contextmenu 事件中以防止出现默认菜单。

请记住，某些浏览器（尤其是 Firefox）默认不允许 JavaScript 阻止上下文菜单，因此您可能会在此处遇到问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T14:40:31.007

尝试使用 onmousedown 而不是 onclick，因为这可能会在 IE 上下文菜单出现之前运行，然后您可以使用 jQuery 停止默认行为`.preventDefault()`

# java - Java：删除结果集中的空列

> ID：10483941
> 
> 赞同：0
> 
> 时间：2012-05-07T14:33:53.210
> 
> 标签：java

如何从结果集或数据列表中删除空列？

例如：我运行一个查询，然后 SQL 返回一个结果集

```
Name    Age    Address    Telephone
----    ---    -------    ---------
Zed      23               12345456
Charlo   25               53232323 
```

如何删除结果集中的空列“地址”？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T15:00:00.447

不。你告诉 SQL 你想要查询中的哪些列，它会为你提供你要求的所有列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T14:52:51.440

如果地址始终为空或不需要，则只需更改生成`ResultSet`. 例如，您的查询将类似于...

```
SELECT Name, Age, Telephone FROM Table; 
```

否则，如果某些条目有地址，您将需要在`ResultSet`.

您还可以将查询更改为仅返回带有地址的结果，例如...

```
SELECT Name, Age, Address, Telephone FROM Table WHERE Address IS NOT NULL; 
```

您无法提前知道整列是否为空 - 您必须遍历您的每个条目`ResultSet`以检测它，或者编写这样的计数查询......

```
SELECT COUNT(Address) FROM Table WHERE Address IS NOT NULL; 
```

`0`如果没有地址，这将返回。您也可以在其他列上使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T14:58:50.560

如果该列始终为空，则无法从查询中删除该列，但可以从映射`ResultSet`到的对象中排除所有 NULL 值。（你不会`ResultSet`超出持久层，是吗？）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T15:00:12.477

如果该列始终为空，那么正如其他人所指出的，只需将其从查询的 SELECT 子句中删除即可。如果您使用“SELECT *”，请不要。这是一个不好的做法。您可能正在处理各种未使用的数据。如果 SELECT * 选择了一个不必要的 5 字节字段，我想没什么大不了的。但即使这就是它现在所做的一切，下周您或其他人可能会在记录中添加一个 50k BLOB 字段，然后为了获得您需要的 50 个字节，您还需要处理您不需要的 50k。

如果您的意思是在获得 ResultSet 后发现该列始终为空白或 null，那又如何呢？您必须阅读数据才能发现这一点。列在您的 ResultSet 中这一事实不会强制您在屏幕上显示什么。如果要从显示中删除列，可以在代码中执行此操作。

# bash - 如何强制 grep 仅返回文件并忽略目录？

> ID：10483945
> 
> 赞同：6
> 
> 时间：2012-05-07T14:34:04.567
> 
> 标签：bash, unix, grep, locate

我正在尝试使用 grep 在用户的 bin 文件夹中自动定位 bibtex 程序。

问题是，它经常返回一个名为 bibtex 的目录，这意味着脚本无法自动运行命令。

如何强制 grep （或者实际上是 locate 命令）自动忽略目录？

编辑：当前命令是：`locate bibtex | grep "/bibtex$" -d skip | head -n1`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-07T14:37:02.410

`find`命令？

```
find /bin -name bibtex -type f 
```

查找类型为“f”的文件名“bibtex”，这是一个常规文件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-07T14:44:28.900

```
locate --basename '\bibtex' --limit 1 
```

消除了`grep`and的需要`head`，但仍然没有解决结果是否是目录的问题。

你为什么不这样做：

```
type -P bibtex 
```

哪个将在该`PATH`名称中查找程序？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-07T16:39:29.233

我不完全理解，所以也许我的解决方案是错误的：你为什么不使用[which](http://linux.die.net/man/1/which)？或者*bibtex*不在*PATH*中？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-07T15:01:27.697

*叹息*，不是我最干净的，但它有效。`perl -ne 'chomp($f=$_);print if !-d $f'`

这使您的命令`locate bibtex | perl -ne 'chomp($f=$_);print if !-d $f' | grep "/bibtex$" -d skip | head -n1`

# android - Javah 错误 android.app.Activity 未找到

> ID：10483959
> 
> 赞同：13
> 
> 时间：2012-05-07T14:34:58.113
> 
> 标签：android, android-ndk, java-native-interface, javah

我正在尝试为一个简单的 NDK 项目创建一个 .h 头文件。使用 cygwin 我浏览到`myprojectDIR\jni`目录，然后执行以下命令：

```
javah -o com_myproject_MyActivity.h -classpath  myprojectDIR\bin\classes com.myproject.MyActivity 
```

然后出现此错误消息：

```
Error: cannot access android.app.Activity
class file for android.app.Activity not found 
```

我在类中有一个本地方法`MyActivity`，所以我尝试创建一个名为`NativeAccess`（不从 android SDK 扩展任何类）的新类，它工作正常，创建了 .h 文件，ndk-build 并在成功的设备上测试！

所以我的问题是我需要在我创建的 android 活动和服务中使用我的本机方法，但我不能这样做，因为该`Javah`命令无法从 android-sdk 本身内部访问类。请注意我正在使用（Windows-7 x64）并且我有这些环境变量：

```
ANDROID_NDK : C:\Android\android-ndk-r7b
ANDROID_SDK : C:\Android\android-sdk
ANT_HOME    : C:\ANT\apache-ant-1.8.3
JAVA_HOME   : C:\Program Files\Java\jdk1.7.0_02
PATH        : %JAVA_HOME%\bin;%ANDROID_SDK%\tools;%ANDROID_SDK%\platform-tools;%ANDROID_NDK%;%ANT_HOME%\bin; (other unrelated stuff) 
```

提前致谢

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-14T04:29:11.383

尝试添加到您的类路径：

```
-classpath <android-sdk-location>/platforms/android-8.jar 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-18T14:24:50.877

我找到了，事情是这样的：

```
javah -o com_myproject_MyActivity.h -classpath <android-sdk-location>/platforms/android-8.jar;myprojectDIR\bin\classes com.myproject.MyActivity 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-09-23T07:21:06.067

在 Eclipse 中尝试以下操作，

转到 > 运行 | 外部工具| 程序下的外部工具配置通过单击小图标创建新配置。

命名它。

位置是：C:\Program Files\Java\jdk1.7.0_04\bin\javah.exe

工作目录将是： ${workspace_loc:/My_First_NDK/bin/classes} 和

参数是：-classpath ${workspace_loc:/My_First_NDK/bin/classes} -bootclasspath "C:\adt-bundle-windows-x86-20140624\sdk\platforms\android-19\android.jar" -v -d $ {workspace_loc:/My_First_NDK/jni} com.mypackage.ndk.HelloNDK

![在此处输入图像描述](../Images/7d6d809108909e0a73d18d91cd07a0b0.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-18T08:47:42.740

为了生成本机头文件`javah`需要：

*   你的课（通常在 下`build/intermediates/classes`）
*   Android 类（通常在 下`$ANDROID_HOME/platforms/android-%ver%/android.jar`）

`-classpath`所以你只需在参数中传递它们

对我来说主要的挑战基本上是通过它们 - 你必须`:`用作分隔符并且路径必须是绝对的。
请参阅[Oracle 文档](https://docs.oracle.com/javase/7/docs/technotes/tools/solaris/javah.html)

因此，您最终可能会得到这样的结果：
`javah -classpath <full path to app>build/intermediates/classes/debug:<full path to sdk>/platforms/android-26/android.jar com.myproject.MyActivity`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-10-10T08:51:22.717

我找到了，事情是这样的：

```
 E:\workspeaceResearch\DAMMADARJNI\src>javah -classpath "E:\Software\sdk\platform
   s\android-19/platforms/android-8.jar"; -jni com.dammadar.jni.Home_Screen 
```

# powershell - 调用其他程序时的Powershell变量扩展

> ID：10483960
> 
> 赞同：5
> 
> 时间：2012-05-07T14:34:59.737
> 
> 标签：powershell, variable-expansion

我在尝试使用[`7za`](http://7-zip.org/download.html) Powershell 中的命令行实用程序解压缩文件时遇到了一个小问题。

我将`$zip_source`变量设置为 zip 文件的路径和 `$unzip_destination`所需的输出文件夹。

然而，命令行使用`7za`需要这样指定的参数：

```
7za x -y <zip_file> -o<output_directory> 
```

所以我现在的电话是这样的：

```
& '7za' x -y "$zip_source" -o$unzip_destination 
```

由于与目标之间没有空格`-o`，PowerShell 似乎不会扩展`$unzip_destination`变量，而是`$zip_source`扩展。

目前，该程序只是将所有文件提取到`C:\`名为`$unzip_destination`. 在变量周围设置不同类型的引号也不起作用：

```
-o"$unzip_destination" : still extracts to C:\$unzip_destination
-o'$unzip_destination' : still extracts to C:\$unzip_destination
-o $unzip_destination  : Error: Incorrect command line 
```

在运行命令之前有什么方法可以强制扩展？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T14:49:27.117

试试这个：

```
& '7za' x -y "$zip_source" "-o$unzip_destination" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T14:45:08.173

试试这样：

```
-o $($unzip_destination) 
```

^(编者注：此解决方案仅适用*于*后面的空格`-o`（在这种情况下只`-o $unzip_destination`会这样做） - 如果您删除它，该命令将无法按预期工作。
因此，这种方法不适合按照 OP 的要求将变量值直接附加到选项名称。)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T14:20:49.490

这应该有效：

```
& '7za' x -y $zip_source -o${unzip_destination} 
```

# mysql - MySQL 查询在某些 WHERE 条件下中断

> ID：10483961
> 
> 赞同：0
> 
> 时间：2012-05-07T14:35:08.480
> 
> 标签：mysql

我有一个 MySQL 查询，它只在一个特定的 where 子句上崩溃，它说`table has crashed and needs to be repaired`.

此查询有效：

```
SELECT
    DirectionId
FROM
    Messages
WHERE
    CustomField1 = 56 AND DirectionId = 1 
```

这个不

```
SELECT
    DirectionId
FROM
    Messages
WHERE
    CustomField1 = 209 AND DirectionId = 1 
```

但如果我这样做，它会起作用：

```
SELECT
    DirectionId
FROM
    Messages
WHERE
    CustomField1 = 209 
```

或者这也有效

```
SELECT
    DirectionId
FROM
    Messages
WHERE
    DirectionId = 1 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T10:03:30.667

尝试使用 MySQL 内部清理例程来修复您的索引：

在 MySQL CLI 上键入：

```
REPAIR TABLE Messages 
```

# dependencies - Makefile 先决条件中的复杂模式替换

> ID：10483965
> 
> 赞同：3
> 
> 时间：2012-05-07T14:35:41.350
> 
> 标签：dependencies, makefile, build-automation

我有以下目录结构：

```
./
 |- obj/
 |--- debug/
 |--- release/
 |- bin/
 |--- debug/
 |--- release/
 |- src/
 |--- main.c
 |--- libb/
 |----- foo.c
 |- include/
 |--- libb/
 |----- foo.h 
```

此外，我`Makefile`以以下格式（示例）手动指定单个对象的依赖关系：

```
 main_DEPS = libb/foo 
```

现在我希望能够输入`make bin/debug/main`，这会生成必要的依赖项和目标文件：

*   `obj/debug/libb/foo.o`
*   `obj/debug/main.o`
*   `bin/debug/main`

**我怎么做？**我目前的方法非常复杂且不完整：

*   下面创建目标文件。`libb`但是，如果它们尚不存在，则无法创建任何必要的子文件夹 ( )。它也不跟踪任何更改的头文件。可以调整[自动生成先决条件](http://www.gnu.org/software/make/manual/make.html#Automatic-Prerequisites)的Makefile 教程技巧吗？

    ```
    CFLAGS+=-I include

    obj/*/%.o: src/%.cpp
        $(CC) $(CFLAGS) $< -c -o $@ 
    ```

*   以下尝试解决二进制文件的依赖关系并从所有必需的目标文件构建它。但我不知道如何从`*_DEPS`变量中检索这些目标文件。

    ```
    .SECONDEXPANSION:

    bin/debug/%: obj/debug/%.o $(patsubst %,obj/debug/%.o,$($(patsubst bin/debug/%,%,$@)_DEPS))
        $(LD) $(LDFLAGS) $< $(patsubst %,obj/debug/%.o,$($(patsubst bin/debug/%,%,$@)_DEPS)) -o $@

    bin/release/%: obj/release/%.o $(patsubst %,obj/release/%.o,$($(patsubst bin/release/%,%,$@)_DEPS))
        $(CXX) $(LDFLAGS) $< $(patsubst %,obj/release/%.o,$($(patsubst bin/release/%,%,$@)_DEPS)) -o $@ 
    ```

    不幸的是，这不会自动构建依赖关系：它只是抱怨“obj/debug/libb/foo.o：没有这样的文件或目录”——但如果我使用`mkdir obj/debug/libb; make obj/debug/libb/foo.o`.

    它也非常复杂，并且使用了无缘无故的代码重复（如果不让它变得更加复杂，我就无法摆脱它）。

最简单的解决方案是什么？原则上，我不反对使用其他东西，`make`除非它可以广泛使用（autoconf ...），但我更喜欢将努力（以及所需的新学习）保持在最低限度，并且从我迄今为止所看到的所有其他构建系统似乎比 复杂得多`make`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T15:10:49.417

**更新**以响应[聊天消息](https://chat.stackoverflow.com/transcript/message/3604699#3604699)

> *@sehe 它让它稍微容易了一点，是的......但是重复仍然存在，并且也没有构建依赖项的问题*

我找到了一种冗长但有效（不​​复杂）的方法来使其与 submake 调用（*在单个 Makefile 中*）一起使用。

我们有只包含一个规则和依赖定义的“外部制作”

```
A_DEPS=dep1 dep2
C_DEPS=dep2

##########################
# "outer" Make
bin/%/A bin/%/B bin/%/C:
    $(MAKE) BUILD="$*" TARGET=$(@F) DEPS="$($(@F)_DEPS)" GENRULE 
```

实际上，我们将“推导”的信息转换为子调用 make 的显式变量。Makefile 的其余部分包含我们的“*通用目标规则*”的定义，`GENRULE`：

```
##########################
# "inner" Make

%/*.o:
    mkdir -p "$(@D)" && touch "$@"

GENRULE: obj/$(BUILD)/$(TARGET).o $(DEPS:%=obj/$(BUILD)/%.o) 
    echo gcc -o "bin/$(BUILD)/$(TARGET)" $^
    mkdir -p "bin/$(BUILD)" && touch "bin/$(BUILD)/$(TARGET)"
.PHONY: GENRULE 
```

再次，测试运行：

```
$ for target in bin/{debug,release}/{A,B,C}; do make -Bs "$target"; done

gcc -o bin/debug/A obj/debug/A.o obj/debug/dep1.o obj/debug/dep2.o
gcc -o bin/debug/B obj/debug/B.o
gcc -o bin/debug/C obj/debug/C.o obj/debug/dep2.o
gcc -o bin/release/A obj/release/A.o obj/release/dep1.o obj/release/dep2.o
gcc -o bin/release/B obj/release/B.o
gcc -o bin/release/C obj/release/C.o obj/release/dep2.o 
```

对象已全部创建：

```
$ find bin obj

bin
bin/debug
bin/debug/A
bin/debug/B
bin/debug/C
bin/release
bin/release/A
bin/release/B
bin/release/C
obj
obj/debug
obj/debug/A.o
obj/debug/B.o
obj/debug/C.o
obj/debug/dep1.o
obj/debug/dep2.o
obj/release
obj/release/A.o
obj/release/B.o
obj/release/C.o
obj/release/dep1.o
obj/release/dep2.o 
```

* * *

对于简单变量（非依赖项），这是一个使用 $@ 和 $(@F)*自动变量*的简单示例：

```
EXTRA="--standardopts"
A_FLAGS="--a-opts"
B_FLAGS="--b-opts"

.SECONDEXPANSION:

debug/% release/%: EXTRA+=$($(@F)_FLAGS)

%/A %/B %/C:
    echo building $@ with $(EXTRA) 
```

# java - 将java对象转换为xml的最简单方法

> ID：10483966
> 
> 赞同：-1
> 
> 时间：2012-05-07T14:35:52.467
> 
> 标签：java, xml, serialization, jaxb, xmlbeans

> **可能重复：**
> [使用开源 api 将 java 对象转换为 xml 的最佳方法是什么](https://stackoverflow.com/questions/736343/what-is-the-best-way-to-convert-a-java-object-to-xml-with-open-source-apis)

我发现了关于该主题的现有问题[1](https://stackoverflow.com/questions/736343/what-is-the-best-way-to-convert-a-java-object-to-xml-with-open-source-apis)和[2](https://stackoverflow.com/questions/5056171/optimal-way-to-convert-xml-to-objects)，但我不确定它是否是最新的，是否最适合我正在尝试做的事情。

我对 XMLBeans 有一个强烈的建议，但是这里没有太多关于 SO 的讨论，甚至在上面的第一个链接中也没有提到（无论如何也没有任何支持）。

JAXB 仍然是最好的建议吗？如果是这样，是否有任何简单的教程使用 object->xml 演练 A->B？

**更新：** 我得到了 java 对象的列表，并且需要按照给定的模式将它们转换为 xml。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T14:39:40.093

我更喜欢使用同时支持注释和基于 XML 的映射的[JAXB 。](http://docs.oracle.com/cd/E17802_01/webservices/webservices/docs/2.0/tutorial/doc/JAXBUsing.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T14:41:03.167

正如您的[问题 2](https://stackoverflow.com/questions/5056171/optimal-way-to-convert-xml-to-objects)所建议的那样，我会选择[XStream](http://xstream.codehaus.org/)。

它不需要注释，只需要配置，并且可以开箱即用地序列化简单的对象。为了使对象适合给定的模式，您首先将它们转换为与模式非常相似的对象，然后将它们序列化为 XML。

XStream 页面还包含您请求的[教程。](http://xstream.codehaus.org/tutorial.html)

# lua - 使用 lua 读取文件元数据

> ID：10483972
> 
> 赞同：1
> 
> 时间：2012-05-07T14:36:37.327
> 
> 标签：lua, metadata

我想知道是否有更好的代码/库可以读取文件元数据？

到目前为止，我已经尝试过使用`LuaFileSystem`and `LuaCom`( `Scripting.FileSystemObject`) 但到目前为止还没有一个能够提取所有数据。当我指的是除了通常的标准数据（例如访问日期、创建日期、修改日期等）之外的所有数据时，我想要更多的数据，例如 pdf 的情况，它将包含其他数据，例如作者和标题以及图像，它将包含位深度，分辨率等数据。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T16:45:12.650

您似乎缺少*文件系统*元数据和*文档*元数据之间的区别。文件系统元数据是文件系统存储的关于文件的元数据。*每个*文件都有这些东西，因为每个文件都存储在文件系统上。此元数据实际上并未存储*在*文件中；如果您加载了文件，则不会让您访问文件系统元数据。您必须与文件系统交谈才能获得它。

*文档元数据是文件*中用作元数据的一些信息。要获取此数据，您必须读取文件，了解文件的格式，然后解析出元数据。

我不知道任何旨在从任意文件类型中提取任意元数据的库（Lua 或其他库）。

# android - Android 服务、活动和处理程序？

> ID：10483981
> 
> 赞同：0
> 
> 时间：2012-05-07T14:37:09.703
> 
> 标签：android

我在 Android 中开发一个 Android 服务，需要弹出一个新的对话框进行确认。

我可以使用 Intent 和 Context 弹出一个新活动

```
Intent myIntent = new Intent(context, ConfirmationActivity.class); 
```

但随后我需要处理对话框中选择的选项（确定或取消）。

有什么建议吗？

**注意：不是为智能手机开发的。**

**更新：**我需要将结果返回到我调用对话框的地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T15:00:20.430

服务根本不应该弹出任何东西。想象一下，当您的对话框弹出时，用户正在打电话。

如果您需要用户确认，最好的办法是使用 NotificationManager 并使用 PendingIntent 来启动 Activity。如果您愿意，Activity 仍然可以具有对话框样式。

然后控制从活动流回您的服务，因此当用户按下确定或取消时，您将调用绑定接口或使用 SharedPreferences 告诉服务用户的选择。

# iphone - 如何更改 iOS 模拟器 SDK

> ID：10483983
> 
> 赞同：1
> 
> 时间：2012-05-07T14:37:11.093
> 
> 标签：iphone, ios, xcode, ipad, ios-simulator

> **可能重复：**
> [如何更改 ios sdk？](https://stackoverflow.com/questions/8338957/how-can-i-change-ios-sdk)

是否有其他方法可以将 iOS 模拟器 SDK 更改为硬件 -> 版本？

感谢帮助。

**编辑：** 最后我用applescript得到了它

```
set selectedVersion to "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk"

set thePListFolderPath to path to preferences folder from user domain as string
set thePListPath to thePListFolderPath & "com.apple.iphonesimulator.plist"
tell application "System Events"
tell property list file thePListPath
tell contents
set value of property list item "currentSDKRoot" to selectedVersion
end tell
end tell
end tell 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T14:45:58.573

不确定您想要的结果是什么？

您可以在 Xcode Preferences 中安装其他模拟器：

![Xcode 首选项：下载](../Images/177e86a46a928f82c5864cf2cdf12936.png)

如果您想在 iOS 4.3 或 5.0 上测试您的应用程序，您需要将您的部署目标设置为所需的版本。如果您将部署目标设置为 4.3，您将能够使用运行 iOS 4.3、5.0 或 5.1 的模拟器进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T14:45:55.333

是的，如果你已经安装了 isd，然后去 project/target 并选择 3.0 的目标，你所有的模拟器都将显示在那里，你的应用程序将被定位到所需的版本

要下载 sdk，请转到 xocde>downloadds

# c# - 使用 foreach 循环创建一个列表（空对象）

> ID：10483984
> 
> 赞同：0
> 
> 时间：2012-05-07T14:37:20.373
> 
> 标签：c#, object, model

我有这段代码可以从`membershipuser`..的foreach循环中创建一个列表

```
public List<UsersModels> _users;
MembershipUserCollection iduser = Membership.GetAllUsers();
foreach (MembershipUser member in iduser)
{

      UsersModels usmodel = new UsersModels();
      usmodel.Username = member.UserName;
      usmodel.Email = member.Email;
      usmodel.LastLoginDate = member.LastLoginDate;
      usmodel.LastActivityDate = member.LastActivityDate;
      _users.Add(usmodel); // BREAKPOINT

} 
```

当我在底部放置一个断点时，我可以看到所有数据都正常，但是在添加对象（另一个对象到列表中）之后它告诉：

> 你调用的对象是空的。

这是显示数据显然没问题的断点

[http://i.imgbox.com/aafDt7MJ.png](http://i.imgbox.com/aafDt7MJ.png)

有人能告诉我有什么问题吗？我不明白为什么 usmodel 对象的数据显然可以，但无法将其添加到显示上述错误的列表中。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T14:39:40.633

您尚未初始化 _users 变量。因此， _users.Add() 抛出错误

# sql-server - SQL CLR 集成 - 定义函数参数类型

> ID：10483990
> 
> 赞同：0
> 
> 时间：2012-05-07T14:38:01.500
> 
> 标签：sql-server, parameters, clr, mismatch

我正在将一个相当复杂的 .NET WinForms 程序转换为一个完全集成的 SQL Server 存储过程和函数集。

我正在开发一个我完全**无法**控制的第 3 方数据库。

整个数据库中使用的唯一标识符都是`numeric(21)`. 这是否是一个好主意并不重要......我必须在这个限制内工作。

我无法弄清楚如何编写使用这些值的函数。到目前为止，我习惯`System.Decimal`这样做，当从 .dll 本身调用代码时，这似乎工作正常。

但是，在 SSMS 中，当我检查任何函数时，输入参数数据类型为`numeric(18,0)`. 我假设它是根据`System.Decimal`类型假设的，但这是错误的。最终结果是，当我尝试手动调用该函数（在 SSMS 中）时，出现以下错误：

> 将数字转换为数字数据类型的算术溢出错误。

奇怪的是，当我从 .dll 中调用函数时，调用**不会失败。**如何覆盖`numeric(18,0)`指定？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T14:47:45.707

伙计，我讨厌在我发布问题 30 秒后进一步谷歌搜索找到答案！

我发誓，我已经看了好几天了……

无论如何，我需要在`SqlFacet`我的输入参数中添加一个。

我从这个出发：

```
<Microsoft.SqlServer.Server.SqlProcedure()> 
Public Shared Sub Check(ByVal ID As Decimal) 
```

对此：

```
<Microsoft.SqlServer.Server.SqlProcedure()> _
Public Shared Sub Check(<SqlFacet(Precision:=21, Scale:=0)> ByVal ID As Decimal) 
```

# css - 在 Eclipse 中抑制 JavaFX CSS 错误？

> ID：10483991
> 
> 赞同：1
> 
> 时间：2012-05-07T14:38:07.763
> 
> 标签：css, eclipse, javafx-2

按照这个 JavaFX 2.0[教程](http://docs.oracle.com/javafx/2/get_started/css.htm)，我在 eclipse 中创建了一个 css 文件，其中包括该行

```
 -fx-fill: FIREBRICK; 
```

现在 Eclipse 不知道该颜色，因此将其标记为错误。如何抑制此警告（因为 JavaFX 中确实存在该颜色）或更好：如何让 Eclipse 意识到 JavaFX 中确实存在这种颜色的事实？

![在此处输入图像描述](../Images/83822c1c3ff8a4021fb86c1ef80a243b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T17:16:59.867

如果您以小写形式编写它，则工具不会显示错误。我已经提交票[http://efxclipse.org/trac/ticket/142](http://efxclipse.org/trac/ticket/142)以支持大小写

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T18:57:36.673

试试 efxclipse 插件。作者声明有 CSS 支持：[http ://efxclipse.org/#about-tooling](http://efxclipse.org/#about-tooling)

![在此处输入图像描述](../Images/d7dd18d930625e0a9270589378cc5e69.png)

# c# - 更快的扑克手评估

> ID：10483993
> 
> 赞同：19
> 
> 时间：2012-05-07T14:38:18.890
> 
> 标签：c#, winforms, ranking, poker

我正在尝试使用“RayW 手牌评估器”方法来获得卡片组合分数（7 张中的 5 张最佳卡片）。但是，我在使用这种方法时遇到了一些**性能问题。**据消息人士称——使用这种方法，每秒必须能够评估超过 3 亿只手！我的结果是 1.5 秒内 10 次磨机，这要慢很多倍。

“RayW 手部评估器”背后的理念如下：

> 二加二评估器由一个包含大约 3200 万个条目（准确地说是 32,487,834 个）的大型查找表组成。为了查找给定的 7 张牌手，您可以在这张表中追踪一条路径，每张牌执行一次查找。当您到达最后一张牌时，所获得的值就是该手牌的官方等值值

这是代码的样子：

```
namespace eval
{
public struct TPTEvaluator
{
    public static int[] _lut;

    public static unsafe void Init() // to load a table
    {
        _lut = new int[32487834];
        FileInfo lutFileInfo = new FileInfo("HandRanks.dat");
        if (!lutFileInfo.Exists)
        {throw new Exception("Handranks.dat not found");}

        FileStream lutFile = new FileStream("HandRanks.dat", FileMode.Open, FileAccess.Read, FileShare.ReadWrite, 4096);

        byte[] tempBuffer = new byte[32487834 * 4];
        lutFile.Read(tempBuffer, 0, 32487834 * 4);

        fixed (int* pLut = _lut)
        { Marshal.Copy(tempBuffer, 0, (IntPtr)pLut, 32487834 * 4);}
        tempBuffer = null;
    }

    public unsafe static int LookupHand(int[] cards) // to get a hand strength
    {
        fixed (int* pLut = _lut)
        {
            int p = pLut[53 + cards[0]];
            p = pLut[p + cards[1]];
            p = pLut[p + cards[2]];
            p = pLut[p + cards[3]];
            p = pLut[p + cards[4]];
            p = pLut[p + cards[5]];
            return pLut[p + cards[6]];
        }
    }
} 
```

}

这就是我测试这种方法的方式：

```
 private void button4_Click(object sender, EventArgs e)
    {
        int[] str = new int[] { 52, 34, 25, 18, 1, 37, 22 };

        int r1 = 0;

        DateTime now = DateTime.Now;
        for (int i = 0; i < 10000000; i++) // 10 mil iterations 1.5 - 2 sec
        { r1 = TPTEvaluator.LookupHand(str);} // here
        TimeSpan s1 = DateTime.Now - now;
        textBox14.Text = "" + s1.TotalMilliseconds;
    } 
```

我相信这个方法最初是用 C++ 实现的，但是 C# 端口应该工作得更快。**有什么办法可以在一秒钟内接近至少 1 亿手牌？**

到目前为止我尝试了什么：

*   尝试使用静态和非静态方法 - 没有区别。
*   尝试使用字典查找而不是数组

    ```
    public void ArrToDict(int[] arr, Dictionary<int, int> dic)
    {
        for (int i = 0; i < arr.Length; i++)
        {
            dic.Add(i, arr[i]);
        }
    }

    public unsafe static int LookupHandDict(int[] cards)
    {
        int p = dict[53 + cards[0]];
        p = dict[p + cards[1]];
        p = dict[p + cards[2]];
        p = dict[p + cards[3]];
        p = dict[p + cards[4]];
        p = dict[p + cards[5]];
        return dict[p + cards[6]];
    } 
    ```

10 次手的经过时间几乎慢了 6 倍。

*   据一位人士说 - 他通过删除“不安全”代码将性能提高了 200 个。我尝试做同样的事情，但结果几乎相同。

    ```
    public static int LookupHand(int[] cards)
    {
            int p = _lut[53 + cards[0]];
            p = _lut[p + cards[1]];
            p = _lut[p + cards[2]];
            p = _lut[p + cards[3]];
            p = _lut[p + cards[4]];
            p = _lut[p + cards[5]];
            return _lut[p + cards[6]];
    } 
    ```

这是报价：

> 在删除了“不安全”的代码部分并在 c# 版本中进行了一些小调整后，它现在也在 310 mio 左右。

有没有其他方法可以提高这个手牌排名系统的性能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T20:26:02.913

首先 - 基准测试总是很棘手。在您的机器上以一种方式执行的事情在其他机器上并不总是以相同的方式执行，并且有很多“幕后”可能使数据无效（例如由操作系统甚至硬件完成的缓存）。

话虽如此 - 我只看了你的 Init() 方法，它让我摸不着头脑。我发现很难跟上。我使用“不安全”的经验法则是不要使用它，除非我绝对必须这样做。我假设这个 Init() 方法被调用一次，对吧？我决定对其进行基准测试：

```
static void BenchmarkIt(string input, Action myFunc)
{
    myWatch.Restart();
    myFunc();
    myWatch.Stop();

    Console.WriteLine(input, myWatch.ElapsedMilliseconds);
}

BenchmarkIt("Updated Init() Method:  {0}", Init2);
BenchmarkIt("Original Init() Method: {0}", Init1); 
```

其中 Init1() 是您的原始代码，而 Init2() 是我重写的代码（为了公平起见，我还多次颠倒了顺序）。这是我得到的（在我的机器上）......

> 更新的 Init() 方法：110
> 
> 原始 Init() 方法：159

这是我使用的代码。不需要不安全的关键字。

```
public static void Init2()
{
    if (!File.Exists(fileName)) { throw new Exception("Handranks.dat not found"); }            

    BinaryReader reader = new BinaryReader(File.Open(fileName, FileMode.Open));            

    try
    {
        _lut = new int[maxSize];
        var tempBuffer = reader.ReadBytes(maxSize * 4); 
        Buffer.BlockCopy(tempBuffer, 0, _lut, 0, maxSize * 4);
    }
    finally
    {
        reader.Close();
    }
} 
```

在我看来，这段代码更容易阅读，而且运行起来似乎更快。

我知道您可能更关心 LookupHand() 的性能，但我无法做出任何重大改进。我尝试了几种不同的方法，但没有任何帮助。

我能够在 500 毫秒内运行您的代码 100,000,000 次。我正在一台相当强大的 64 位笔记本电脑上运行——这似乎是您所期望的速度。就像其他人所说的那样 - 在发布模式下运行（启用优化）会对性能产生很大影响。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-09T00:38:23.117

如果您想要通用速度，我建议您使用 Brecware 的评估器：[https](https://web.archive.org/web/20160502170946/http://brecware.com/Software/software.html) ://web.archive.org/web/20160502170946/http://brecware.com/Software/software.html 。对于以随机顺序进行的评估，Steve Brecher 的评估器比 RayW 评估器更快，并且更紧凑。

如评论中所述，RayW 评估器的速度取决于参考的位置。如果您没有以与查找表完全相同的顺序遍历评估，那么它会很慢。如果这是您的问题，则有三种方法：

1.  使您的评估顺序与表格更加匹配。
2.  制作符合您的评估顺序的表格
3.  使评估器针对您的用例进行优化。

# android - 从我的 android 应用程序更改 android 中的环配置文件（基于位置的环配置文件更改应用程序）

> ID：10483995
> 
> 赞同：1
> 
> 时间：2012-05-07T14:38:23.897
> 
> 标签：android, gps, profile

当用户到达他的办公室时，我需要将响铃配置文件更改为静音（如果一般）。当他回到家时，将其恢复正常。基本上它是基于位置的环配置文件更改应用程序。任何有关这方面的信息都会有所帮助。我需要工作的 android 源代码甚至可以帮助我的教程。

# android - android令人困惑的崩溃

> ID：10483998
> 
> 赞同：1
> 
> 时间：2012-05-07T14:38:36.723
> 
> 标签：android, android-asynctask, out-of-memory, bitmapfactory

```
05-07 08:27:16.910: D/dalvikvm(31777): GC_EXTERNAL_ALLOC freed 622K, 41% free 6376K/10695K, external 21288K/22163K, paused 62ms
05-07 08:27:16.972: D/dalvikvm(31777): GC_FOR_MALLOC freed <1K, 41% free 6376K/10695K, external 21455K/22163K, paused 43ms
05-07 08:27:16.988: D/skia(31777): Loading ARM decoder...
05-07 08:27:16.996: D/szipinf(31777): Initializing inflate state
05-07 08:27:17.003: D/skia(31777): Loading ARM decoder...
05-07 08:27:17.035: D/szipinf(31777): Initializing inflate state
05-07 08:27:17.050: D/skia(31777): Loading ARM decoder...
05-07 08:27:17.113: D/dalvikvm(31777): GC_EXTERNAL_ALLOC freed 181K, 40% free 6441K/10695K, external 21790K/22163K, paused 53ms
05-07 08:27:17.183: I/dalvikvm-heap(31777): Clamp target GC heap from 32.097MB to 32.000MB
05-07 08:27:17.183: D/dalvikvm(31777): GC_FOR_MALLOC freed <1K, 40% free 6441K/10695K, external 21958K/22163K, paused 43ms
05-07 08:27:17.183: D/skia(31777): Loading ARM decoder...
05-07 08:27:17.238: D/dalvikvm(31777): GC_EXTERNAL_ALLOC freed 5K, 40% free 6477K/10695K, external 21958K/22163K, paused 53ms
05-07 08:27:17.253: E/dalvikvm-heap(31777): 171600-byte external allocation too large for this process.
05-07 08:27:17.253: E/GraphicsJNI(31777): VM won't let us allocate 171600 bytes
05-07 08:27:17.300: I/dalvikvm-heap(31777): Clamp target GC heap from 32.132MB to 32.000MB
05-07 08:27:17.300: D/dalvikvm(31777): GC_FOR_MALLOC freed 0K, 40% free 6477K/10695K, external 21958K/22163K, paused 45ms
05-07 08:27:17.300: D/skia(31777): --- decoder->decode returned false
05-07 08:27:17.300: D/skia(31777): Loading ARM decoder...
05-07 08:27:17.363: W/dalvikvm(31777): threadid=13: thread exiting with uncaught exception (group=0x40015560)
05-07 08:27:17.363: D/dalvikvm(31777): GC_EXTERNAL_ALLOC freed 34K, 40% free 6476K/10695K, external 21958K/22163K, paused 59ms
05-07 08:27:17.394: E/dalvikvm-heap(31777): 171600-byte external allocation too large for this process.
05-07 08:27:17.449: I/dalvikvm-heap(31777): Clamp target GC heap from 32.131MB to 32.000MB
05-07 08:27:17.449: D/dalvikvm(31777): GC_FOR_MALLOC freed 0K, 40% free 6476K/10695K, external 21958K/22163K, paused 45ms
05-07 08:27:17.464: D/szipinf(31777): Initializing inflate state
05-07 08:27:17.496: E/GraphicsJNI(31777): VM won't let us allocate 171600 bytes
05-07 08:27:17.496: D/skia(31777): --- decoder->decode returned false
05-07 08:27:17.496: W/dalvikvm(31777): threadid=14: thread exiting with uncaught exception (group=0x40015560)
05-07 08:27:17.496: I/Process(31777): Sending signal. PID: 31777 SIG: 9
05-07 08:27:17.496: E/AndroidRuntime(31777): FATAL EXCEPTION: AsyncTask #3
05-07 08:27:17.496: E/AndroidRuntime(31777): java.lang.RuntimeException: An error occured while executing doInBackground()
05-07 08:27:17.496: E/AndroidRuntime(31777):    at android.os.AsyncTask$3.done(AsyncTask.java:200)
05-07 08:27:17.496: E/AndroidRuntime(31777):    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
05-07 08:27:17.496: E/AndroidRuntime(31777):    at java.util.concurrent.FutureTask.setException(FutureTask.java:125)
05-07 08:27:17.496: E/AndroidRuntime(31777):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
05-07 08:27:17.496: E/AndroidRuntime(31777):    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
05-07 08:27:17.496: E/AndroidRuntime(31777):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
05-07 08:27:17.496: E/AndroidRuntime(31777):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
05-07 08:27:17.496: E/AndroidRuntime(31777):    at java.lang.Thread.run(Thread.java:1019)
05-07 08:27:17.496: E/AndroidRuntime(31777): Caused by: java.lang.OutOfMemoryError: bitmap size exceeds VM budget
05-07 08:27:17.496: E/AndroidRuntime(31777):    at android.graphics.BitmapFactory.nativeDecodeStream(Native Method)
05-07 08:27:17.496: E/AndroidRuntime(31777):    at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:470)
05-07 08:27:17.496: E/AndroidRuntime(31777):    at com.test.kindle.NetworkAsync.doInBackground(NetworkAsync.java:103)
05-07 08:27:17.496: E/AndroidRuntime(31777):    at com.test.kindle.NetworkAsync.doInBackground(NetworkAsync.java:1)
05-07 08:27:17.496: E/AndroidRuntime(31777):    at android.os.AsyncTask$2.call(AsyncTask.java:185)
05-07 08:27:17.496: E/AndroidRuntime(31777):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
05-07 08:27:17.496: E/AndroidRuntime(31777):    ... 4 more 
```

为什么当消息让我有大约 40% 的空闲时，我会收到消息`VM won't let us allocate 171600 bytes`并崩溃？`java.lang.OutOfMemoryError: bitmap size exceeds VM budget``GC`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T16:06:16.910

浏览[源码](https://github.com/android/platform_frameworks_base/blob/e59e0309a1301908eae0075db02413fda90848d5/core/jni/android/graphics/Graphics.cpp)后，似乎位图分配在Dalvik管理的外部堆上。

因此，您应该查看日志中报告的“外部”尺寸，这些尺寸确实很接近。

除了确保调用`recycle()`已完成的任何位图等一般建议外，我怀疑我们可以为您提供更多帮助。

# java - 如何将 HTML 代码转换为 Confluence 风格的 Wiki 标记？

> ID：10483999
> 
> 赞同：14
> 
> 时间：2012-05-07T14:38:38.483
> 
> 标签：java, html, confluence, mylyn, wiki-markup

Mylyn Wikitext 的 API 文档具有将 Wiki 标记转换为 HTML 的功能，但我找不到将 HTML 代码转换/解析为 Wiki 标记的功能。类`MarkupParser`有方法`parseToHTML`，但我在哪里可以找到相反的？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-25T14:46:32.980

试试[维基百科](http://www.amnet.net.au/~ghannington/confluence/wikifier/)。

它并不完全符合您的要求，但您可能会发现它已经足够了，或者是一个有用的起点。

Wikiifier 将 Confluence 4 XML 存储格式的片段（即由 Confluence Source Editor 插件呈现，没有单个文档根元素）转换为 Confluence 3 wiki 标记。

为什么这与您的问题完全相关？Confluence 4 XML 存储格式包括一些与 XHTML 元素和属性同名的元素和属性。

如需更多信息，请单击 Wikiifier 网页上的帮助链接。

注意：Wikiifier 网页使用的 XSLT 样式表比与相关模式包捆绑的 XSLT 样式表稍微更新一些。

稍后添加：[Wikiifier RT](http://www.amnet.net.au/~ghannington/confluence/wikifier/rt/)更接近您想要的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-16T17:45:13.303

以下是您在 Mylyn 中使用[WikiText Standalone](http://www.eclipse.org/mylyn/downloads/)的方法。替换`DocumentBuilder`为您想要的 Wiki 标记的适当标记（您必须检查 API 以查看可用的内容；`TextileDocumentBuilder`也存在）。

文件**ConvertToConfluence.java**：

```
package com.stackoverflow.mylyn;

import java.io.File;
import java.io.FileInputStream;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.StringWriter;

import org.eclipse.mylyn.internal.wikitext.confluence.core.ConfluenceDocumentBuilder;
import org.eclipse.mylyn.wikitext.core.parser.HtmlParser;
import org.xml.sax.InputSource;

public class ConvertToConfluence {

    public static String convertHTML(File htmlFile) {

        InputStream in = null;

        try {

            in = new FileInputStream(htmlFile);

        } catch (Exception ex) {

            // TODO: handle or re-throw file exception
        }

        InputSource inputSource = new InputSource(new InputStreamReader(in));
        StringWriter writer = new StringWriter();
        ConfluenceDocumentBuilder builder = new ConfluenceDocumentBuilder(writer);
        HtmlParser parser = new HtmlParser();

        try {

            parser.parse(inputSource, builder);

        } catch (Exception ex) {

            // TODO: handle or re-throw parsing exception
        }

        return writer.toString();       
    }   

    public static void main(String args[]) {

        File file = new File("c:\\filename.html");
        System.out.println(convertHTML(file));
    }
} 
```

文件文件**名.html**：

```
<HTML>
<BODY>
<p>This is <b>bold text</b> and some <i>italic text</i>.<br/><br/>TEST!</p>
</BODY>
</HTML> 
```

产生 Confluence 输出：

```
This is *bold text* and some _italic text_.
\\TEST! 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-06-03T21:46:55.860

我能够使用`DefaultWysiwygConverter`来自 Atlassian 自己的 Java 库的 HTML 到 Confluence 风格的 WikiMarkup。这是一个简化的单元测试：

```
import com.atlassian.renderer.wysiwyg.converter.DefaultWysiwygConverter;

String htmlString = "This is <em>emphasized</em> and <b>bold</b>";
DefaultWysiwygConverter converter = new DefaultWysiwygConverter();
String wikiMarkupString = converter.convertXHtmlToWikiMarkup(htmlString);
Assert.assertEquals("This is _emphasized_ and *bold*", wikiMarkupString); 
```

POM 必须包含正确的存储库和依赖项

```
 <dependency>
        <groupId>com.atlassian.renderer</groupId>
        <artifactId>atlassian-renderer</artifactId>
        <version>8.0.5</version>
        <exclusions>
            <exclusion>
                <!-- This exclusion is necessary if you are in a situation which 
                     it conflicts, EG: using spring-boot -->
                <groupId>javax.servlet</groupId>
                <artifactId>servlet-api</artifactId>
            </exclusion>
        </exclusions>
    </dependency>

    <repositories>
        <repository>
            <!-- https://developer.atlassian.com/docs/advanced-topics/working-with-maven/atlassian-maven-repositories -->
            <id>atlassian-public</id>
            <url>https://packages.atlassian.com/maven/repository/public</url>
            <snapshots>
                <enabled>true</enabled>
                <updatePolicy>never</updatePolicy>
                <checksumPolicy>warn</checksumPolicy>
            </snapshots>
            <releases>
                <enabled>true</enabled>
                <checksumPolicy>warn</checksumPolicy>
            </releases>
        </repository>
    </repositories> 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-05-08T06:01:07.887

据我所知，没有办法将 HTML 转换为 Confluence wiki 标记。由于 Atlassian 在 Confluence 4.x 中停止使用纺织品作为 wiki 标记，因此无需进行转换。页面格式是 XHTML。