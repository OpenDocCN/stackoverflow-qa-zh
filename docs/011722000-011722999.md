# StackOverflow 问答 11722000-11722999

# javascript - 允许用户订购选择列表？

> ID：11722003
> 
> 赞同：2
> 
> 时间：2012-07-30T12:52:58.383
> 
> 标签：javascript, jquery

我认为我想做的事情很简单，但它不适合我（新手）。

例如，我有一份客户可以购买的 10 项服务的清单。我希望客户能够根据他想要做的第一、第二、第三等服务来订购这个服务列表。

我正在设想一个下拉框或复选框，它首先显示所有 10 个选项，然后在用户选择一个选项后消除第一个选项，依此类推。

理想情况下，我希望用户选择的服务按顺序显示在下拉列表下方（或页面上的其他位置），也许还有关于服务的其他详细信息，这样他就可以看到他最后选择的顺序。它本质上是该人的服务实现的自定义列表。

我更喜欢用 javascript/jquery 和 HTML（和 CSS）来完成这一切。有什么简单的方法可以做到这一点？

提前致谢！

**编辑** 只是我可能想做的一个例子，以使其更清楚。

```
<select name="products" size="6"> 
<option selected>Select A Starting Product</option> 
<option value="1">Car Wash</option> 
<option value="2">Wax</option> 
<option value="3">vacuum</option> 
<option value="4">polish</option> 
<option value="5">drying</option> 
</select> 
```

根据人们从盒子中挑选的物品和顺序，一个列表将填充在盒子下方，其中的物品以正确的顺序被选中。也可以使用复选框来执行此操作。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T12:55:49.747

我认为您正在寻找[jQuery UI 可排序](http://jqueryui.com/demos/sortable/)功能。在 Stack Overflow 上提问之前，请尝试做一些研究和测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T13:00:28.150

你想要的不是完全排序。您希望用户按照他/她选择的顺序查看要查看的项目/服务。

在选择任何服务时调用 javascript 函数并将新服务附加到显示所选服务的列表中。

```
$('#ddlServices').change(function() {
  // Append the new service to the list you are showing.
  var str = "";
  $("select option:selected").each(function () {
       str += $("div").text() + "<br/>" + $(this).text() + " ";
  });
  $("#divServices").text(str);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T12:54:19.817

jQuery UI 有一个[可排序](http://jqueryui.com/demos/sortable/)的组件，它允许将列表项按不同的顺序排序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-30T12:55:44.573

试试[DataTables](http://datatables.net/)，这将允许您从数据库中检索数据，或手动输入数据，然后用户可以按所有列排序，甚至使用搜索框动态更新。

# javascript - 将 jQuery 菜单按钮链接到 url

> ID：11722009
> 
> 赞同：1
> 
> 时间：2012-07-30T12:53:12.347
> 
> 标签：javascript, jquery

我有这个 jQuery 菜单脚本：

```
<script type="text/javascript">
        jQuery(document).ready(function(){

            jQuery('#promo').pieMenu({icon : [
                    { 
                        path : "/wp-content/themes/Tersus/images/piemenu/winamp.png",
                        alt  : "Winamp",
                        fn   : function(){alert('Click:: Find');return false}
                    },  { 
                        path : "/wp-content/themes/Tersus/images/piemenu/vlc.png",
                        alt  : "VLC Media Player",
                        fn   : function(){alert('Click:: Plus');return false}   
                    },{ 
                        path : "/wp-content/themes/Tersus/images/piemenu/QuickTime.png",
                        alt  : "Quick Time Player",
                        fn   : function(){alert('Click:: Home');return false}
                    },{ 
                        path : "/wp-content/themes/Tersus/images/piemenu/WMP.png",
                        alt  : "Windows Media Player",
                        fn   : function(){alert('Click:: Music');return false}
                    },{ 
                        path : "/wp-content/themes/Tersus/images/piemenu/popup.png",
                        alt  : "נגן Popup",
                        fn   : function(){alert('Click: E-Mail');return false}
                    },{ 
                        path : "/wp-content/themes/Tersus/images/piemenu/iTunes.png",
                        alt  : "iTunes",
                        fn   : function(){alert('Click: Config');return false}

            });
        })
    </script>
                        },{ 
```

单击时我需要将图标链接到外部 URL，我该如何实现？

我写这行是因为它需要更好的代码解释，因为代码很长......（？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T12:56:28.110

```
function(){       
   window.location.href = 'http://domain.com/'; 
   return false
} 
```

# gridview - 使用功能模块时如何设置ALV网格的大小？

> ID：11722011
> 
> 赞同：2
> 
> 时间：2012-07-30T12:53:16.317
> 
> 标签：gridview, abap, resizable, alv

尝试在我的屏幕上显示超过 1 个 alv 网格，并尝试将它们放置在特定位置。

我猜想找到一种方法来指定我的 alv 网格的位置和大小将解决这两个问题。

i_screen_start(end)_column(row) - 类似参数只为我创建一个对话框，但这不是我想要的。

is_layout-min_linesize 和 -max_linesize 似乎也没有任何作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T13:06:43.900

通过使用功能模块来创建 ALV，这是不可能的，因为它们总是以“全屏”模式显示 ALV。

要获得您想要的功能，您必须使用自定义容器（或多个）创建您自己的屏幕，并使用类 CL_GUI_ALV_GRID 将您的 ALV 网格附加到此容器。

要了解有关不同自定义容器选项的更多信息，您可以从查看事务 DWDM 中的示例开始

# vim - Vim omnicompletion：可选的预览窗口

> ID：11722016
> 
> 赞同：12
> 
> 时间：2012-07-30T12:53:44.583
> 
> 标签：vim, omnicomplete

我已经搜索了不同类型的解决方法来处理在 Omnicompletion 中进行选择时拆分当前窗口以显示文档的预览窗口，例如在您离开插入模式时关闭预览窗口（如果它存在）。

然而，这些解决方案是不切实际的。有时您可能想进入预览窗口阅读有关当前完成模块的一些文档，但是使用自动命令是不可能的。

即使会，我也希望文档永远不会出现，因为我真的不想要它。

阅读源代码，`pythoncomplete.vim`我发现文档的值是硬编码的，如果它有任何内容，它将强制显示预览窗口（如果它不能为模块提供文档，它会跳过这个）。

是否有一个我不知道的全局选项告诉 Vim 从不显示文档？或者能够切换它？

如果我*确实*想在拆分窗口中阅读文档，请允许我这样做（可能使用一些快捷方式），否则不要显示任何内容。

我真的很想避免复制/粘贴`pythoncomplete.vim`来根据自己的喜好调整这个特定的设置。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-30T13:36:31.270

预览由全局`'completeopt'`设置控制。要关闭它，请使用

```
:set completeopt-=preview 
```

# iphone - 在IOS（Iphone）中使用opencv进行模板匹配

> ID：11722023
> 
> 赞同：1
> 
> 时间：2012-07-30T12:53:55.587
> 
> 标签：iphone, objective-c, ios, ipad, opencv

我是IOS的新手。我正在尝试使用 OpenCV 搜索一些用 ObjectiveC 编写的示例以进行模板匹配。我需要从相机中捕获一个标志，并且需要与我项目中保存的一些图像相匹配。即使尝试了很长时间，我也没有找到有用的东西。我尝试了这个[项目](http://www.eosgarden.com/en/opensource/opencv-ios/download/)，但编译器给出了以下错误：Command /usr/bin/make failed with exit code 2

我不知道如何解决这个错误。

我在我的 MAC mini 上使用 XCode 版本 4.3.3 和 IOS 5。

我需要你的帮助。请考虑一件事，我刚开始研究 MAC 和 IOS（1-2 个月）。分步指南或一些工作示例将更有帮助。

我在日志中收到以下文本：

> ***解压 OpenCV (2.0.0)...
> 
> 修补文件 src/cv/cvcalibration.cpp
> 
> ```
> *** Configuring  OpenCV (2.0.0 - iPhoneSimulator)... 
> ```
> 
> 检查构建系统类型... i686-apple-darwin
> 
> 检查主机系统类型... i686-apple-darwin9
> 
> 检查目标系统类型... i686-apple-darwin9
> 
> 检查与 BSD 兼容的安装... /usr/bin/install -c
> 
> 检查构建环境是否健全......是的
> 
> 检查 i686-apple-darwin9-strip... 否
> 
> 检查脱衣...脱衣
> 
> 配置：警告：使用不以主机三元组为前缀的交叉工具
> 
> 检查线程安全的 mkdir -p... /Users/Manish/Downloads/OpenCV-iPad/OpenCV/build/iPhoneSimulator/../.././tmp/OpenCV-2.0.0/autotools/install-sh -c -d
> 
> 检查傻瓜...不
> 
> 检查mawk...不
> 
> 检查 nawk... 不
> 
> 检查 awk ... awk
> 
> 检查 make 是否设置 $(MAKE)... 是
> 
> 检查 make 是否设置 $(MAKE)... (cached) 是
> 
> 检查 make 使用的包含样式... GNU
> 
> 检查 C++ 编译器默认输出文件名...
> 
> 配置：错误：在`/Users/Manish/Downloads/OpenCV-iPad/OpenCV/build/iPhoneSimulator'中：
> 
> 配置：错误：C++ 编译器无法创建可执行文件
> 
> 更多细节见“config.log”。
> 
> 制作：*** [opencv_simulator] 错误 77
> 
> 命令 /usr/bin/make 失败，退出代码为 2

感谢您的建议和支持，这是我为我的公司客户开发的项目的一部分，所以别无选择，只是为了完成这项任务。

还有一件事我在不止一个 MAC mini 上遇到了同样的问题。所以如果你下载相同的[项目](http://www.eosgarden.com/en/opensource/opencv-ios/download/)，你可能会遇到同样的问题。

马尼什

# javascript - 如何在 jquery 和 javascript 中检索 html 标签属性？

> ID：11722027
> 
> 赞同：0
> 
> 时间：2012-07-30T12:54:03.247
> 
> 标签：javascript, jquery, html, arrays, html-table

我尝试使用以下代码从数组中绘制表格并从行中检索属性 id。任何建议将不胜感激。

```
$(document).ready(function(){

$.get('php/php.php', function(data){
    $.each(data, function(index, value){
    $('table').append(
        "<tr id='someid'>"
            +"<td>"+value.ticker+"</td>"
            +"<td>"+value.bid+"</td>"
        +"</tr>");
    }); 
}, "json");

$('tr').click(function(){
var id = $(this).attr("id");
alert(id);

}) 

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T12:58:20.097

您将单击事件绑定到尚不存在的元素，因为它们是在异步回调中构造的。而不是使用`click`，使用`on`。由于您的表不是动态构造的，因此您可以将`on`处理程序附加到该表。

```
$('table').on('click', 'tr', function () {
    ...
}); 
```

[http://api.jquery.com/on/](http://api.jquery.com/on/)

此外，您正在生成多个`<tr>`具有相同 ID 的 s；那不是有效的标记。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T12:55:48.910

由于您将新内容动态注入 DOM，因此它不知道您绑定的 click 事件。所以你的点击事件将不起作用。

解决方案：**使用 jQuery[`on`](http://api.jquery.com/on/)**

```
$(document).on("click","tr",function(){
  var id = $(this).attr("id");
  alert(id);
}) 
```

这个方法在**jQuery 1.7+**版本中可用。如果您使用的是旧版本，您可以考虑使用[委托](http://api.jquery.com/delegate/)

从 jQuery 1.7 开始，`.live()`&`.delegate()`方法已被弃用。使用`on`方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T13:01:57.517

一切都很好，但是您刚刚错过了 tr click 事件结束时的分号

```
$('tr').click(function(){
    var id = $(this).attr("id");
    alert(id);
}); 
```

如果 tr id 是唯一的，这将提醒 tr 的 id

确保在任何语法错误中都不允许执行 jquery 代码。

# hook - 如何在liferay中覆盖属性“sites.email.membership.reply.body”

> ID：11722032
> 
> 赞同：1
> 
> 时间：2012-07-30T12:54:25.927
> 
> 标签：hook, liferay, liferay-6

我想覆盖我的以下属性`portal-ext.properties`：

```
sites.email.membership.reply.subject=com/liferay/portlet/sites/dependencies/email_membership_reply_subject.tmpl
sites.email.membership.reply.body=com/liferay/portlet/sites/dependencies/email_membership_reply_body.tmpl
sites.email.membership.request.subject=com/liferay/portlet/sites/dependencies/email_membership_request_subject.tmpl
sites.email.membership.request.body=com/liferay/portlet/sites/dependencies/email_membership_request_body.tmpl 
```

像这样：

```
sites.email.membership.reply.subject=com/krishna/email_membership_reply_subject.tmpl
sites.email.membership.reply.body=com/krishna/email_membership_reply_body.tmpl
sites.email.membership.request.subject=com/krishna/email_membership_request_subject.tmpl
sites.email.membership.request.body=com/krishna/email_membership_request_body.tmpl 
```

我已经在 in 中完成了此操作`EXT`，即我已经创建了 package: `ext-impl/src/com/krishna/`in`EXT-plugin`并且它工作正常，但我无法在`hook`or中执行此操作`portlet`。为什么？因为它给了我例外：

```
java.io.IOException: Unable to open resource in class loader com/krishna/email_membership_request_subject.tmpl 
```

所以，我的问题是：**有没有办法在 hook 或 portlet 中做到这一点，或者只能使用 EXT？**

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T18:55:40.627

这只能在 EXT 插件中完成。由于以下两个原因：

1.  钩子可以有利于覆盖少数属性/服务，但不是全部。挂钩不支持此特定属性。

2.  这对于 portlet 绝对是不可能的，因为您已经面临类加载问题。As`portal-impl.jar`位于`ROOT/WEB-INF/lib`liferay 内部，您的 portlet 无权访问它。

所以EXT插件是唯一的方法。

# logging - Python：使用自定义 *kwargs 记录异常

> ID：11722035
> 
> 赞同：3
> 
> 时间：2012-07-30T12:54:36.973
> 
> 标签：logging, exception-handling, python-2.7

正如您可能知道的那样，python 日志记录模块支持[定义 *kwargs](http://docs.python.org/library/logging.html#logging.debug)来自定义日志条目。这似乎不支持[记录异常](http://docs.python.org/library/logging.html#logging.exception)。

我的问题：有没有一种简单的方法可以将自定义 kwargs 与 logging.exception 一起使用？

一个最小的例子如下：

```
import logging
import logging.handlers

def create_logger(): 
    """ initialize logging using sys log

    """
    logger = logging.getLogger()

    form = '%(asctime)s [%(levelname)-8s] %(xyz)s %(message)s'
    local_log_handler = logging.handlers.SysLogHandler(address='/dev/log')
    formatter = logging.Formatter(form)
    local_log_handler.setFormatter(formatter)

    logger.addHandler(local_log_handler)
    return logger

log = create_logger()
try:
    raise AttributeError("whatever")
except:
    log.warn('Alarm! Fire!', extra={'xyz':'POLICE'})
    log.exception('') 
```

输出：

```
Traceback (most recent call last):
  File "logexample.py", line 27, in <module>
    log.exception('')
  File "/usr/lib/python2.7/logging/__init__.py", line 1172, in exception
    self.error(msg, exc_info=1, *args)
  File "/usr/lib/python2.7/logging/__init__.py", line 1166, in error
    self._log(ERROR, msg, args, **kwargs)
  File "/usr/lib/python2.7/logging/__init__.py", line 1258, in _log
    self.handle(record)
  File "/usr/lib/python2.7/logging/__init__.py", line 1268, in handle
    self.callHandlers(record)
  File "/usr/lib/python2.7/logging/__init__.py", line 1308, in callHandlers
    hdlr.handle(record)
  File "/usr/lib/python2.7/logging/__init__.py", line 748, in handle
    self.emit(record)
  File "/usr/lib/python2.7/logging/handlers.py", line 791, in emit
    msg = self.format(record) + '\000'
  File "/usr/lib/python2.7/logging/__init__.py", line 723, in format
    return fmt.format(record)
  File "/usr/lib/python2.7/logging/__init__.py", line 467, in format
    s = self._fmt % record.__dict__
KeyError: 'xyz' 
```

系统日志：

```
Jul 30 14:56:27 localhost 2012-07-30 14:56:27,131 [WARNING ] POLICE Alarm! Fire! 
```

PS：一点背景，我正在写一个线程的进程，我想以以下方式记录信息：

[应用线程1] [应用线程2] ...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-30T13:14:04.917

你可以只使用例如

```
logger.error('Message with %s', 'args', exc_info=1, extra={...}) 
```

# c# - 如何在程序退出时保存变量值？

> ID：11722040
> 
> 赞同：7
> 
> 时间：2012-07-30T12:54:53.023
> 
> 标签：c#, visual-studio-2010, arraylist

我正在尝试使用 ArrayList 来存储可变数量的字符串，并且想知道如何保存 ArrayList 及其元素，以便我的 Windows 窗体可以在程序加载和退出之间调用它们的值。

我曾经将信息存储在文本文件中，但如果可能的话，我想避免使用外部文件。

感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-30T12:57:20.063

[您可以使用Properties.Settings](http://msdn.microsoft.com/en-us/library/aa730869%28v=vs.80%29.aspx)保存 ArrayList（如果不是 ArrayList，它们是其他等效类），最好的部分是它允许您在应用程序和用户级别设置变量

一个很好的例子可以在这里找到如何使用 Settigns [http://www.codeproject.com/Articles/17659/How-To-Use-the-Settings-Class-in-C](http://www.codeproject.com/Articles/17659/How-To-Use-the-Settings-Class-in-C)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T12:58:48.517

我一直使用（在你的情况下，从它的声音来看，在 Winforms 中），将 Form_Closing 存储到你事先创建的 Properties.Settings 变量中。如果它是一个 ArrayList，您可以将它存储到 XML 或逗号分隔的列表中。您的序列化/反序列化方法将取决于您的数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T12:58:18.407

看看[隔离存储](http://msdn.microsoft.com/en-us/library/3ak841sy.aspx)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-30T13:14:40.017

> 我曾经将信息存储在文本文件中，但如果可能的话，我想避免使用外部文件。

在运行之间不可避免地存储数据将需要程序可执行文件之外的东西。

注册表可以工作，但注册表不适合存储少量信息。添加文件可以使用数据库。

对于文本字符串，可以在单个语句中保存和加载文本文件（每行^(1个字符串）。)将文件放入隔离存储或 %AppData% 中的专用文件夹下可以限制用户搞砸它的机会。² .

```
// Load
var theStrings = new ArrayList();
var path = GetSavePath();
if (File.Exists(path)) {
  theStrings.AddRange(File.ReadLines(path);
}

// Save:
File.WriteAllLines(GetSavePath(), theStrings.ToArray()); 
```

在这里使用`ToArray()`as`ArrayList`没有实现`IEnumerable<String>`（`List<String>`对于集合来说是一个更好的选择并避免这种情况）。

* * *

¹这假设行尾在字符串中无效。如果需要支持，则有多种选择。通过另一种机制分隔字符串的某种文件格式，或者最简单的可能是使用简单的转换（例如`\`→ `\\`、换行符 →`\n`和回车符 → `\r`）来转义字符。

²如果没有显着的额外复杂性，您无法防止这种情况发生，即使用服务之类的东西来加载/保存为不同的用户，从而允许数据受到 ACL 的保护。

# android - 如何使用DOM在android中检索xml元素

> ID：11722044
> 
> 赞同：0
> 
> 时间：2012-07-30T12:55:09.603
> 
> 标签：android, xml-parsing

我创建了一个 xml 文件并存储在我的 sdcard 中。我正在使用 DOM 解析器来检索它。我的 xml 文件就像。我使用了一个简单的 xml 文件进行演示。它是：

```
<?xml version="1.0"?>
<root>
    <staff>
        <word>1</word>
        <meaning>one</meaning>

    </staff>
    <staff>
        <word>2</word>
        <meaning>two</meaning>

    </staff>
</root> 
```

在我的活动中，我有一个自动完成文本视图。当我输入 1 时，它应该显示在其含义中给出的值“一”。是否可以这样做以及如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T13:12:05.413

使用获取节点列表`getElementsByTagName("staff")`

获取子节点`getChildNodes()`

现在获取节点名`getNodeName()`和节点值`getNodeValue()`

请参阅下面的代码：

```
 Element root=doc.getDocumentElement();    
                 NodeList nodeList=root.getElementsByTagName("staff");
                 for(int i=0;i<nodeList.getLength();i++)
                 {
                     Node statenode=nodeList.item(i);  

                     NodeList idList= statenode.getChildNodes();
                    for(int j=0;j<idList.getLength();j++)
                    {
                      Node property = idList.item(j);
                  String name = property.getNodeName();

                  if (name.equalsIgnoreCase("word"))
                  {
                     //Read your values here

                      Log.e("",property.getFirstChild().getNodeValue());

                   }
                  if (name.equalsIgnoreCase("meaning"))
                  {
                      //Read your values here
                      Log.e("",property.getFirstChild().getNodeValue());

                   }
                    }

                   } 
```

# android - JNI so 文件未找到

> ID：11722045
> 
> 赞同：1
> 
> 时间：2012-07-30T12:55:10.577
> 
> 标签：android, java-native-interface

我想用一些代码创建 jni 示例，但它在 logcate 中显示错误

```
07-30 18:34:48.720: W/dalvikvm(3484): Exception Ljava/lang/UnsatisfiedLinkError; thrown during Lcom/org/HelloNDK/HelloNDK;.<clinit>
07-30 18:34:48.740: W/dalvikvm(3484): Class init failed in newInstance call (Lcom/org/HelloNDK/HelloNDK;)
07-30 18:34:48.740: D/AndroidRuntime(3484): Shutting down VM
07-30 18:34:48.760: W/dalvikvm(3484): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
07-30 18:34:48.810: E/AndroidRuntime(3484): FATAL EXCEPTION: main
07-30 18:34:48.810: E/AndroidRuntime(3484): java.lang.ExceptionInInitializerError
07-30 18:34:48.810: E/AndroidRuntime(3484):     at java.lang.Class.newInstanceImpl(Native Method)
07-30 18:34:48.810: E/AndroidRuntime(3484):     at java.lang.Class.newInstance(Class.java:1429)
07-30 18:34:48.810: E/AndroidRuntime(3484):     at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
07-30 18:34:48.810: E/AndroidRuntime(3484):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2577)
07-30 18:34:48.810: E/AndroidRuntime(3484):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
07-30 18:34:48.810: E/AndroidRuntime(3484):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)
07-30 18:34:48.810: E/AndroidRuntime(3484):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
07-30 18:34:48.810: E/AndroidRuntime(3484):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-30 18:34:48.810: E/AndroidRuntime(3484):     at android.os.Looper.loop(Looper.java:123)
07-30 18:34:48.810: E/AndroidRuntime(3484):     at android.app.ActivityThread.main(ActivityThread.java:4627)
07-30 18:34:48.810: E/AndroidRuntime(3484):     at java.lang.reflect.Method.invokeNative(Native Method)
07-30 18:34:48.810: E/AndroidRuntime(3484):     at java.lang.reflect.Method.invoke(Method.java:521)
07-30 18:34:48.810: E/AndroidRuntime(3484):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
07-30 18:34:48.810: E/AndroidRuntime(3484):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
07-30 18:34:48.810: E/AndroidRuntime(3484):     at dalvik.system.NativeStart.main(Native Method)
07-30 18:34:48.810: E/AndroidRuntime(3484): Caused by: java.lang.UnsatisfiedLinkError: Library libndkfoo not found
07-30 18:34:48.810: E/AndroidRuntime(3484):     at java.lang.Runtime.loadLibrary(Runtime.java:461)
07-30 18:34:48.810: E/AndroidRuntime(3484):     at java.lang.System.loadLibrary(System.java:557)
07-30 18:34:48.810: E/AndroidRuntime(3484):     at com.org.HelloNDK.HelloNDK.<clinit>(HelloNDK.java:12)
07-30 18:34:48.810: E/AndroidRuntime(3484):     ... 15 more 
```

代码是：

主要活动（java文件）

```
package com.org.HelloNDK;

import android.app.Activity;
import android.app.AlertDialog;
import android.os.Bundle;

public class HelloNDK extends Activity {
    /** Called when the activity is first created. */

      static {
            System.out.println("Lib 1");
            System.loadLibrary("libndkfoo");
            System.out.println("Lib 2");
          }

      private native String invokeNativeFunction();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        try {

             // this is where we call the native code
            String hello = invokeNativeFunction();
            new AlertDialog.Builder(this).setMessage(hello).show();

        } catch (Exception e) {
            // TODO: handle exception
            System.out.println("Error in On Create == >"+e.toString());
        }
    }
} 
```

Android.mk 文件代码

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

# Here we give our module name and source file(s)
LOCAL_MODULE    := ndkfoo
LOCAL_SRC_FILES := ndkfoo.c

include $(BUILD_SHARED_LIBRARY) 
```

ndkfoo.c 文件代码

```
#include <string.h>
#include <jni.h>
JNIEXPORT jstring JNICALL Java_org_pielot_hellondk_HelloNDK_sayHello(JNIEnv *env, jobject obj) 
{
     return (*env)->NewStringUTF(env, "Hello from native code!");
} 
```

.SO 文件是用

```
infoware@infoware-PC /cygdrive/d/SecondWorkspace/HelloNDK
$  /cygdrive/d/android-ndk-r8b/ndk-build
Compile thumb  : ndkfoo <= ndkfoo.c
SharedLibrary  : libndkfoo.so
Install        : libndkfoo.so => libs/armeabi/libndkfoo.so 
```

结构的项目屏幕

![在此处输入图像描述](../Images/d6de4811aad1fc3b4e66ce6d28a40854.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T13:07:24.813

1.  在您的活动中：重命名 `private native String invokeNativeFunction();`
    为`private native String sayHello();`
2.  在您的 c 文件中：重命名
    `JNIEXPORT jstring JNICALL Java_org_pielot_hellondk_HelloNDK_sayHello(JNIEnv *env, jobject obj)`
    为
    `JNIEXPORT jstring JNICALL Java_com_org_hellondk_HelloNDK_sayHello(JNIEnv *env, jobject obj)`

# c# - multipart/form-data + Sockets = 服务器无响应

> ID：11722047
> 
> 赞同：0
> 
> 时间：2012-07-30T12:55:13.920
> 
> 标签：c#, http, sockets, post

我正在使用我自己的使用套接字的 HTTP 包装器。到目前为止，除了 multipart/form-data POST 之外一切正常。当我将数据发送到服务器时，它根本没有响应，所以我猜我在我的 POST 中遗漏了一些东西，就像我需要 "\r\n\r\n" 来处理常规请求。

这是我的要求：

```
POST /getproxies/get.php HTTP/1.1
Host: myhost.com
User-Agent: Mozilla/5.0 (Windows NT 6.1; rv:12.0) Gecko/20100101 Firefox/12.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-us,en;q=0.5
Cookie: sid=UtozR43zQQAtVA2Np0KP_ZLnO0IYwwU1S_Tt4Z3N80wctL; 
Connection: Close
Content-Type: multipart/form-data; boundary=---------------------------4664151417711
Content-Length: 411

---------------------------4664151417711
Content-Disposition: form-data; name="proxy_count"

20 proxies
---------------------------4664151417711
Content-Disposition: form-data; name="u"

13
---------------------------4664151417711
Content-Disposition: form-data; name="opt_1"

---------------------------4664151417711
Content-Disposition: form-data; name="opt_2"

GET
---------------------------4664151417711-- 
```

当我发送数据时，连接是打开的，就像它在服务器上等待一样，但服务器没有响应。任何想法我在这里想念什么？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T12:59:38.093

您的边界与边界 = 部分上声明的边界不匹配。

```
Content-Type: multipart/form-data; boundary=AaB03x

--AaB03x
Content-Disposition: form-data; name="submit-name"

Larry
--AaB03x
Content-Disposition: form-data; name="files"; filename="file1.txt"
Content-Type: text/plain

... contents of file1.txt ...
--AaB03x-- 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T13:00:29.687

> [RFC 2046 - 多用途 Internet 邮件扩展 (MIME) 第二部分：媒体类型](https://www.rfc-editor.org/rfc/rfc2046#section-5.1.1)：

> 多部分实体的 Content-Type 字段需要一个参数，“boundary”。然后，边界分隔符行被定义为完全由两个连字符（“-”，十进制值 45）组成的行，后跟来自 Content-Type 标头字段的边界参数值、可选的线性空格和终止 CRLF。

所以我想这应该可行：

```
Content-Type: multipart/form-data; boundary=54472172614771
Content-Length: 47

--54472172614771
Your data
--54472172614771-- 
```

请注意，在 Content-Type 标头的边界参数中指定的边界应与您在有效负载中使用的边界相匹配。另请注意，边界也计入内容长度。

# android - 带有片段和列表视图的蜂窝状视图

> ID：11722049
> 
> 赞同：0
> 
> 时间：2012-07-30T12:55:20.283
> 
> 标签：android, listview, android-fragments, fragment

我们正在开发一个应用程序，我们需要一个像 Honeycomb Gmail 应用程序这样的屏幕：

[http://www.cnx-software.com/wp-content/uploads/2011/02/android_3.0_honeycomb_gmail_app_fragments_700px.png](http://www.cnx-software.com/wp-content/uploads/2011/02/android_3.0_honeycomb_gmail_app_fragments_700px.png)

我们正在尝试使用片段并包含一个列表视图来显示我们的项目。我们在这个链接上做了完全相同的事情：[http ://www.vogella.com/articles/Android/article.html#fragments_tutorial](http://www.vogella.com/articles/Android/article.html#fragments_tutorial)

但是无论如何我们都无法查看不同的布局，我的意思是，我们唯一可以在正确的片段上显示单个文本视图。但是我们需要一个列表视图，我们可以查看缩略图，一些解释，这需要是可点击的。

有人帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T13:06:23.900

应该管用。我想你想实例化一个 ListFragment，在用户选择一行时，实例化另一个 ListFragment。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T13:11:02.943

也许也阅读[这篇](http://developer.android.com/guide/components/fragments.html)文章。

下面是一个布局 xml 文件的示例，该文件具有两个相邻且宽度相等的片段。

```
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal"
    >
    <fragment 
        class="package.of.fragmentA"
        android:layout_width="0dp"
        android:layout_weight="1"
        android:layout_height="match_parent"
        android:id="@+id/fragmentA"
        />
    <fragment
        class="package.of.fragmentB"
        android:layout_width="0dp"
        android:layout_weight="1"
        android:layout_height="match_parent"
        android:id="@+id/fragmentB"
        />
</LinearLayout> 
```

在 GMail 应用程序中，fragmentA 类**是**ListFragment，**fragmentB**是具有自定义布局文件的普通 Fragment 类。

# c++ - 创建一个非拥有的shared_ptr？

> ID：11722050
> 
> 赞同：6
> 
> 时间：2012-07-30T12:55:22.600
> 
> 标签：c++, c++11, shared-ptr, resourcemanager

我对 C++11 还是很陌生，现在正在努力通过避免直接使用指针来提高我的 C++ 技能。我正在尝试编写一个精灵管理器来跟踪以前加载的精灵并释放未使用的精灵。我正在尝试为此使用 shared_ptr （指向位图的指针），但管理器还必须保留一个 shared_ptr 来创建精灵 - 所以引用计数不会下降到 0。我可以以某种方式声明“父”shared_ptr在我的经理非拥有所以它不算作参考（并且仍然创建该shared_ptr的拥有副本）？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-30T12:56:08.420

使用[weak_ptr](http://en.cppreference.com/w/cpp/memory/weak_ptr)。这将解决你的问题。您不需要释放它们，因为它们会自动释放。在weak_ptr 上使用锁来获取实际的shared_ptr。

use_count 还将为您提供当前的引用数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T13:00:47.713

`shared_ptr`被制造为拥有。如果你想在你的 prgram 的某些部分使用非拥有指针，`weak_ptr`如下所示：

```
std::shared_ptr<Object> sp(new Object);
std::weak_ptr<Object>(sp); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T13:09:50.323

你正在尝试做一种“后座司机”风格的内存管理；你想使用`shared-ptr`，但你也想控制何时`shared_ptr`释放资源！

您可以在这里做一些显而易见的事情。

1.  只需使用`shared_ptr`精灵管理器类中的任何类型的内存管理或资源所有权即可。信任`shared_ptr`做它的工作。如果您需要知道资源何时被销毁，您始终可以使用观察者模式等，并让您的资源类在销毁时向管理器发送消息。当然，这意味着您不能要求您的精灵管理器提供对现有精灵的额外引用，这不是很好。

2.  编写自己的智能指针。这不一定是微不足道的，但编写一个特定于资源的引用计数智能指针并不是火箭科学（它比编写类似的东西要简单得多`shared_ptr`，例如）。然后，当只剩下一个对资源的引用（例如，它自己的引用）时，管理器可以终止资源。

3.  其他人都已经提到了`weak_ptr`。具有 (1) 的所有优点，只有您可以创建`shared_ptr`引用相同底层资源的其他实例。

您可能还需要考虑资源使用模式以及加载资源的成本。您可能不一定要在应用程序停止引用资源后立即销毁它；如果一秒钟后再次请求它，可能需要一些时间来重新加载它。在资源闲置一段时间后懒惰地释放资源可能是一种更好的方法。只是一个想法。

# javascript - IE 8 变量范围错误

> ID：11722058
> 
> 赞同：2
> 
> 时间：2012-07-30T12:55:49.747
> 
> 标签：javascript, global

在 IE 8 中，第二个版本会导致以下错误：

> 对象不支持此属性或方法。

错误在`map = new L.Map`。在第一个版本中，没有错误。

我想如果你不包括 var 它会自动进入全局范围。为什么 IE 8 会出现错误？请注意，这在 IE 9 中不会发生。

```
var map;
jQuery(document).ready(function() 
{
    map = new L.Map('map', {'scrollWheelZoom': false});
 ...
} 
```

对比：

```
jQuery(document).ready(function() 
{
    map = new L.Map('map', {'scrollWheelZoom': false});
 ...
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T13:04:19.230

> 我想如果你不包括 var 它会自动进入全局范围。

这是非常糟糕的做法，因为无法判断您是否有意这样做。它还会导致严格模式下的错误。

`map`当您在文档中有一些具有名称的元素时，它也会导致 IE 中的错误。

您可以像这样显式创建一个全局变量：

```
jQuery(document).ready(function() {
    window.map = new L.Map('map', {
        'scrollWheelZoom': false
    });
}); 
```

在这里，您可以清楚地表明您的意图，并且不会收到此错误。

* * *

以下是演示它的 jsfiddles（在 IE8 或更低版本中运行）：

[http://jsfiddle.net/3Jn5N/](http://jsfiddle.net/3Jn5N/)作品

[http://jsfiddle.net/3Jn5N/1/](http://jsfiddle.net/3Jn5N/1/)不起作用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T13:31:49.273

在非严格模式下，分配给未声明的变量会创建一个具有分配值的全局变量。尝试访问未声明和未初始化变量的值将引发引用错误：

```
x = 5;
alert( x ); // shows 5

alert( y ); // Error: y is undefined
y = 10; 
```

在执行任何代码之前处理声明的变量，因此它们不会引发引用错误。

但是，您没有收到引用错误，您收到的是 IE 在尝试调用对象的不存在方法时抛出的错误，因此很可能存在访问`window.map()`或类似尝试的尝试：

例如在 IE 中：

```
var o = {};
o.x(); // Object doesn't support this property or method 
```

这是否是您问题的答案未知，是否`new L.Map(...)`返回可以调用的对象？

# php - 使用 json_encode() 的 PHP 数组到 JSON 数组；

> ID：11722059
> 
> 赞同：95
> 
> 时间：2012-07-30T12:55:52.037
> 
> 标签：php, arrays, json

我已经使用内置`json_encode();`函数对我制作的数组进行了编码。我需要它的数组格式，如下所示：

```
[["Afghanistan",32,12],["Albania",32,12]] 
```

但是，它返回为：

```
{"2":["Afghanistan",32,12],"4":["Albania",32,12]} 
```

如何在不使用任何正则表达式技巧的情况下删除这些行号？

* * *

## 回答 #1

> 赞同：198
> 
> 时间：2012-07-30T12:59:36.403

如果您的 PHP 数组中的数组键不是连续的数字，则`json_encode()` *必须*使另一个构造一个对象，因为 JavaScript 数组总是以连续的数字索引。

[`array_values()`](http://us3.php.net/manual/en/function.array-values.php)在 PHP 的外部结构上使用以丢弃原始数组键并用从零开始的连续编号替换它们：

### 例子：

```
// Non-consecutive 3number keys are OK for PHP
// but not for a JavaScript array
$array = array(
  2 => array("Afghanistan", 32, 13),
  4 => array("Albania", 32, 12)
);

// array_values() removes the original keys and replaces
// with plain consecutive numbers
$out = array_values($array);
json_encode($out);
// [["Afghanistan", 32, 13], ["Albania", 32, 12]] 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2018-04-23T19:26:51.547

**json_encode()**函数将帮助您在 php 中将**数组**编码为**JSON**。

如果您将直接使用**json_encode**函数而不使用任何特定选项，它将返回一个数组。就像上面提到的问题

```
$array = array(
  2 => array("Afghanistan",32,13),
  4 => array("Albania",32,12)
);
$out = array_values($array);
json_encode($out);
// [["Afghanistan",32,13],["Albania",32,12]] 
```

由于您正在尝试将 Array 转换为 JSON，那么我建议在**json_encode中使用****JSON_FORCE_OBJECT**作为附加选项（参数），如下所示

 **```
<?php
$array=['apple','orange','banana','strawberry'];
echo json_encode($array, JSON_FORCE_OBJECT);
// {"0":"apple","1":"orange","2":"banana","3":"strawberry"} 
?> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-11-01T15:52:53.393

我想在 Michael Berkowski 的回答中补充一点，如果数组的顺序颠倒了，也会发生这种情况，在这种情况下，观察这个问题有点棘手，因为在 json 对象中，顺序将按升序排列。

例如：

```
[
    3 => 'a',
    2 => 'b',
    1 => 'c',
    0 => 'd'
] 
```

将返回：

```
{
    0: 'd',
    1: 'c',
    2: 'b',
    3: 'a'
} 
```

所以在这种情况下的解决方案是`array_reverse`在将其编码为json之前使用

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-06-26T22:51:53.987

将 PHP 数组转换为 JSON 时，我遇到了重音字符的问题。我把 UTF-8 的东西到处都是，但没有解决我的问题，直到我在我的 PHP while 循环中添加了这段代码，我正在推送数组：

```
$es_words[] = array(utf8_encode("$word"),"$alpha","$audio"); 
```

只有“$word”变量有问题。之后它做了一个 jason_encode 没问题。

希望有帮助**

# php - 带有 BST 更新的 PHP 世界时间

> ID：11722062
> 
> 赞同：1
> 
> 时间：2012-07-30T12:56:18.297
> 
> 标签：php

我试图在我的网站上展示几个世界时间。我正在寻找更新时间/保持准确的最精确方法，同时结合 BST 1 小时飞跃。

到目前为止我有

```
<?php
date_default_timezone_set('Europe/London');
$uk_time = date("g:i A");
$month = date("n");

if ($month < 3 || $month > 10)  //January, February, November and December are not BST months.
{
$us_time = date("g:i A", strtotime('-4 hours'));
$dub_time = date("g:i A", strtotime('+4 hours'));
$kong_time = date("g:i A", strtotime('+8 hours'));
}
elseif ($month > 3 || $month < 10)  //April to September are BST months.
{
$us_time = date("g:i A", strtotime('-5 hours'));
$dub_time = date("g:i A", strtotime('+3 hours'));
$kong_time = date("g:i A", strtotime('+7 hours'));
}
?>
<div class="time-left">
<ul>
  <li class="clock"><strong>New York:</strong> <?php echo "$us_time" ?></li>
  <li><strong>London:</strong> <?php echo "$uk_time" ?></li>
  <li><strong>Dubai:</strong> <?php echo "$dub_time" ?></li>
  <li><strong>Hong Kong:</strong> <?php echo "$kong_time" ?></li>
</ul>
</div> 
```

我想知道是否有更好的方法

干杯

杰夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T13:04:33.443

就在这里。使用[`DateTime`](http://il.php.net/manual/en/class.datetime.php)对象（与对象结合使用。您可以使用**[此列表](http://il.php.net/timezones)**[`DateTimeZone`](http://il.php.net/manual/en/class.datetimezone.php)中的时区实例化更多`DateTimeZone`对象。

例子：

```
<?php

    $london_tz    = new DateTimeZone("Europe/London");
    $hong_kong_tz = new DateTimeZone("Asia/Hong_Kong");
    $dubai_tz     = new DateTimeZone("Asia/Dubai");

    $london_time    = new DateTime("now", $london_tz);
    $hong_kong_time = new DateTime("now", $hong_kong_tz);
    $dubai_time     = new DateTime("now", $dubai_tz);

    echo $london_time->format("H:i:s Y-m-d") . PHP_EOL;
    echo $hong_kong_time->format("H:i:s Y-m-d") . PHP_EOL;
    echo $dubai_time->format("H:i:s Y-m-d") . PHP_EOL; 
```

PHP 的 DateTime 和 DateTimeZone 的伟大之处在于，**它们为你做了所有的魔法**，你不需要考虑 DST 或任何其他奇怪的自定义因素，DateTime 已经知道:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T13:05:50.330

```
<?php
$date = new DateTime(null, new DateTimeZone('Europe/London'));
$tz = $date->getTimezone();
echo $tz->format('Y-m-d H:i:s');

$date = new DateTime(null, new DateTimeZone('Asia/Hong_Kong'));
$tz = $date->getTimezone();
echo $tz->format('Y-m-d H:i:s');
?> 
```

ETC...

以下是支持的时区列表：http: [//php.net/manual/en/timezones.php](http://php.net/manual/en/timezones.php)

# javascript - 将json数据渲染到asp.net mvc中的网格中

> ID：11722065
> 
> 赞同：0
> 
> 时间：2012-07-30T12:56:33.797
> 
> 标签：javascript, jquery, ajax, asp.net-mvc, json

我希望用 JSON 数据填充我的网格。数据格式如下：

```
[{
  "SiteId":"1",
  "SiteName":"University of Minessota",
  "SiteStatus":"Fully Operational"
},{
  "SiteId":"2",
  "SiteName":"MSP Airport-Humphrey",
  "SiteStatus":"Settlement Required"
},{
  "SiteId":"3",
  "SiteName":"City Of Minneapolis-Lot C",
  "SiteStatus":"Fully Operational"
},{
  "SiteId":"4",
  "SiteName":"TargetCenter",
  "SiteStatus":"Low Tickets"
},{
  "SiteId":"5",
  "SiteName":"Excel Energy Center",
  "SiteStatus":"Out Of Tickets"
}] 
```

我正在使用我的控制器方法将其传递给视图：

```
public JsonResult StatusReport()
{
    List<CenterStatus> status = MvcList.Models.CenterStatus.GetStatus();
    return this.Json(status, JsonRequestBehavior.AllowGet);
} 
```

现在在我看来，我需要将此 JSON 数据填充到网格中：

```
$(document).ready(function () {
    $.ajax({
        type: "POST",
        contentType: "application/json; charset=utf-8",
        url: "CenterStatus/StatusReport.aspx",
        data: "{}",
        dataType: "json",
        success: function (data) {
            for (var i = 0; i < data.d.length; i++) {
                $("#GridView1").append("<tr><td>" + data.d[i].siteID + "</td><td>" + data.d[i].siteName + "</td><td>" + data.d[i].siteStatus + "</td></tr>");    
            }
    },
    error: function (result) {
        alert("Error");
    }
}); 
```

但到目前为止，我没有运气实现我的目标。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T16:09:54.947

像这样做。不要`append`循环调用。将其设置为一个变量并`html`仅调用该函数一次。

```
success: function (data) {
                            var row=""
                            $.each(data,function(index,item){
                                row+="<tr><td>"+item.SiteName+"</td></tr>";
                            });
                            $("#GridView1").html(row);
                       }, 
```

工作样本：http: [//jsfiddle.net/x76LD/1/](http://jsfiddle.net/x76LD/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T13:01:49.163

可能你应该使用 just`data`而不是`data.d`在你的成功函数中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T13:00:36.710

我猜这`url: "CenterStatus/StatusReport.aspx",`可能与它有关。正确的 url 应该是：

`url: "/CenterStatus/StatusReport"`

# vim - 如何在 Vim 中将 F1 映射到 Ctrl+P

> ID：11722067
> 
> 赞同：3
> 
> 时间：2012-07-30T12:56:43.133
> 
> 标签：vim

我正在使用以下命令：

```
:imap <F1> ^P 
```

在插入模式下映射`F1`到`Ctrl`+ 。`P`

但它不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T13:20:44.433

如果那`^P`是两个字符，`^`和`P`，那就错了。它必须是单个字符（0x10），通过`CTRL-V CTRL-P`（或`CTRL-Q CTRL-P`在许多 Windows 版本的 Vim 上，由于重新映射`mswin.vim`）输入。

最好通过使用特殊符号完全避免这些问题`<C-P>`。CP。`:help keycodes`

哦，在重新映射内置功能时，建议使用`noremap`：

```
:inoremap <F1> <C-P> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T13:02:36.383

尝试：

```
:imap <F1> <c-p> 
```

# ios - 用jquery mobile做iphone应用专业吗

> ID：11722068
> 
> 赞同：2
> 
> 时间：2012-07-30T12:56:46.820
> 
> 标签：ios, jquery-mobile

我有一个问题，我想知道将 jQuery mobile 用于 iPhone 应用程序是否专业？我的意思是，我只需要创建照片画廊，我使用了 jQuery mobile，然后为它创建了一个 webview。

以这种方式创建 iPhone 应用程序可以吗？还是不专业？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T19:24:19.207

每个人都会对它是否专业有意见......这完全取决于您如何交付最终产品。

如果您的应用程序看起来很精致、性能良好并且符合 HIG 指南，那么是的，它是可以接受的。

但是，如果您将一些看起来很糟糕、性能不佳且不起作用的东西放在一起，那就不要打扰。您可能无法通过审批流程。

看看：[http](http://www.jqmgallery.com/) ://www.jqmgallery.com/ 。很多人使用 jQuery Mobile 来制作看起来非常漂亮的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T19:35:00.670

Ask the basic questions -

1.  Can I maintain it easily
2.  Can someone else maintain it easily
3.  Does it work with my SCM
4.  Does it meet the requirements - fast enough, no crashing, etc.

It's professional, as long as you use best practices, and write decent scripts.

# ruby-on-rails - 如何为 emacs 安装 rails 片段

> ID：11722071
> 
> 赞同：1
> 
> 时间：2012-07-30T12:57:09.430
> 
> 标签：ruby-on-rails, emacs

我已经安装了 yasnippet。我想向它添加 Rails 片段。

我找到了这个 repo - [https://github.com/eschulte/yasnippets-rails](https://github.com/eschulte/yasnippets-rails)。如何包含它以显示 Rails 片段？

此外，上述回购最后一次更新是在 3 年前。有没有最近的片段回购？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T14:26:02.313

以下对我有用。下载并解压 github 提供的存档`.emacs.d/my_plugins`，并将此行添加到您的`.emacs`：

`(add-to-list 'load-path "~/.emacs.d/my_plugins/eschulte-yasnippets-rails-9b12c79")`

然后 eval-current-buffer 你应该会在菜单中看到一堆新的片段。我的建议是不要学习它们，而是从它们中获得灵感并创建自己的集合。

# android - Android：SQLite 删除效率

> ID：11722074
> 
> 赞同：0
> 
> 时间：2012-07-30T12:57:12.890
> 
> 标签：android, database, sqlite

我有一个关于如何在移动开发中完成删除的问题，当然代替数据库，哪些或什么是这些领域的最佳实践，是否在移动开发上推荐永久删除数据库中的记录，或在数据库中标记该记录删除效率更高？...我知道在大规模 DBMS 中，您必须标记已删除的记录，以便您可以查看我刚刚在 DBMS 书中读到的过去记录，考虑到相同的原则是否适用于移动开发我只是在开发一个非常小规模的应用程序

任何输入都来自所有资深的 DBA 和 Mob。开发人员非常感谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T13:02:26.947

由于移动设备上的数据库不太可能变得很大，因此删除应该不会太低效。

但是我会说标记已删除的行是有用的，因为通常这些场景中的数据库用于在设备离线等待与网络同步时在本地保存数据，并且查询删除和上传它们要容易得多，而不是将本地行与远程行进行比较，以找到需要删除的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T13:03:22.120

这取决于您的应用程序的设计要求，因此与应用程序的效率无关。您阅读的内容适用于需要审计的大型系统。由于您正在开发将在移动平台上运行并且可能不需要审核的应用程序，因此在这种情况下删除此类记录是可以的（至少这是我更愿意这样做）。

标记记录会增加数据库的大小，并且在您的设备上留下不需要的数据（内存）不是一个好主意。

# java - 在多个 Matrox 设备上使用 JOGL 时的 Xinerama 和 OpenGL

> ID：11722075
> 
> 赞同：1
> 
> 时间：2012-07-30T12:57:15.963
> 
> 标签：java, linux, centos, jogl, xorg

我在使用 2 个 Matrox Extio F2408 设备时遇到问题。我运行一个带有 5 个显示器的 Centos 5.0 系统，其中 4 个连接到第一个 Extion 设备，第五个连接到第二个。Xinerama 模式已启用。

一切都很好，但是当我们使用 OpenGL（在 Java 中使用 JOGL 实现）打开一个应用程序功能时，CPU 会 100% 跳跃，并且我们的应用程序的内存消耗会急剧增加。应用程序像这样冻结。

只有当我们在 Xinerama 模式下连接两个 Extio 设备时，我才会遇到这个问题。Xinerama 中只有一个设备，或者两者都有但没有 Xinerama 没有问题。

我已经更新到最新的官方matrox 显卡驱动程序，但这不是一个解决方案。

你能指出我调试或解决这个问题的正确方向吗？

# c# - C# LINQ to Entities 查询两个不同属性的交集

> ID：11722084
> 
> 赞同：6
> 
> 时间：2012-07-30T12:57:34.117
> 
> 标签：c#, entity-framework, linq-to-entities

我有3个模型命名：

> **具有 Pencil.Id(int) 和 Pencil.Colors(IEnumerable) 属性的**铅笔****
> 
>  ****具有 Pen.Id(int) 和 Pen.Colors(IEnumerable) 属性的**笔****
> 
>  ****具有 ID 和名称的**颜色。********

 ****铅笔与颜色有关系（多对多） 钢笔与颜色有关系（多对多）

我想建立一个查询，它会显示我拿着的笔的相同颜色的铅笔。

我正在使用以下 LINQ-to-Entities 查询：

```
int id = id_of_the_pen_that_i_am_holding;
Pen p = db.Pens.Find(id);
var list = from m in db.Pencils where m.Colors.Intersect(p.Colors) != null select m; 
```

颜色模型是 IEnumerable 所以它有超过 1 种颜色。例如; 钢笔有 15 种不同的颜色，铅笔有 25 种不同的颜色。如果我拿着的笔的其中一种颜色在该铅笔的调色板中也可用，我想带上相应的铅笔。

但是我遇到了一个例外，即使用 int 或 string 等常规变量而不是对象。

我能做些什么？提前感谢您的帮助。

**已编辑：** 我为下一个可能的问题创建了一个新问题：[C# LINQ to Entities- Properties on the intersection of an object and a collection of objects](https://stackoverflow.com/questions/11760499/c-sharp-linq-to-entities-properties-on-the-intersection-set)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-30T13:04:13.617

```
int id = id_of_the_pen_that_i_am_holding;
Pen p = db.Pens.Find(id);
var penColorIds = p.Color.Select(m => m.Id).ToList();
var list = db.Pencils.Where(pencil => pencil.Color.Any(color => penColorIds.Contains(color.Id)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T13:11:39.290

如何简化您的代码并以这种方式执行它，我知道它不是特别优雅，但我不确定（在我脑海中）LINQ 是否有一种**很好的**方式来做你想做的事情：

```
IList<Pencil> sameColorPencils = new List<Pencil>();

Pen p = db.Pens.Find(id);

foreach (Color color in p.Color)
{
    var pencils = from pencil in db.Pencils
                  where pencil.Color == color
                  select pencil;

    foreach (Pencil pencil in pencils)
    {
        if (sameColorPencils.Count(e => e.Id == pencil.Id) == 0)
        {
            sameColorPencils.Add(pencils);
        }
    }
} 
```****

# ios - 什么是可以准确检测 iOS 上的 UIWebView 的最可靠的解决方案？

> ID：11722085
> 
> 赞同：1
> 
> 时间：2012-07-30T12:57:35.057
> 
> 标签：ios, uiwebview

我们知道 iOS 上的许多浏览器和应用程序都使用 iOS 提供的 UIWebView。铬就是一个例子。

什么是最可靠的解决方案可以准确地检测到用户正在通过 UIWebView 访问网站，而不是移动 Safari？

随着 UIWebView 的演进，UIWebView 的一些东西会发生变化。我想知道是否有最可靠的解决方案。苹果是否提供相关解决方案？

谢谢！

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-07-30T14:07:29.393

UIWebView 是移动 safari。如果用户代理是相同的，你必须同样对待它。

# sql-server - SQL Server 2005 十进制字段行为

> ID：11722088
> 
> 赞同：2
> 
> 时间：2012-07-30T12:57:41.743
> 
> 标签：sql-server

我创建了一个包含十进制类型字段 x 的简单表（28,15）

我运行以下查询来插入一个值：

> 插入测试表值（1234567890123）

当我从 testtable I 中进行选择时，字段 x 的值为

> 1234567890123.000000000000000

有没有办法指定（可能在表设计中）如果不需要，sql server 不应该在小数点后存储零？即当进行选择时，数据将返回为

> 1234567890123

另外为什么插入到testtable值（12345678901234）中会出现以下错误：

> 将数字转换为数字数据类型的算术溢出错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T13:10:09.390

> 另外为什么插入到testtable值（12345678901234）中会出现以下错误：

您指定的总宽度为 28，小数点后有 15 位。小数点前最多保留 13 位数字。

> 如果不需要，有没有办法指定 sql server 不应该在小数点后存储零？

严格来说，“十进制”是一种固定精度格式，因此任何数字都将占据与任何其他数字完全相同的空间（请参阅[MSDN](http://msdn.microsoft.com/en-us/library/ms187746.aspx)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T13:03:49.593

试试下面的查询。它工作正常...

```
 select cast(1234567890123.000000000000000 as decimal) 
```

# javascript - 通过 Javascript 处理 Windows Phone 7 后退按钮

> ID：11722091
> 
> 赞同：0
> 
> 时间：2012-07-30T12:57:44.517
> 
> 标签：javascript, windows-phone-7, cordova

我想知道当我们通过javascript点击win phone 7后退按钮时我们如何执行事件..

```
document.addEventListener("deviceready", onDeviceReady, false);

function onDeviceReady() {
            document.addEventListener("backbutton", onBackKeyDown, false);
}
function onBackKeyDown() {
//want to redirect a particular page.?? want to handle functioning of back button
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T19:43:04.860

尝试以下操作：

```
<!DOCTYPE html>
<html>
  <head>
    <title>gaurish's Cordova Back Button Example</title>

    <script type="text/javascript" charset="utf-8" src="cordova-2.0.0.js"></script>
    <script type="text/javascript" charset="utf-8">

    // Call onDeviceReady when Cordova is loaded.
    //
    // At this point, the document has loaded but cordova-2.0.0.js has not.
    // When Cordova is loaded and talking with the native device,
    // it will call the event `deviceready`.
    //
    function onLoad() {
        document.addEventListener("deviceready", onDeviceReady, false);
    }

    // Cordova is loaded and it is now safe to call Cordova methods
    //
    function onDeviceReady() {
        // Register the event listener
        document.addEventListener("backbutton", onBackKeyDown, false);
    }

    // Handle the back button
    //
    function onBackKeyDown() {
    }

    </script>
  </head>
  <body onload="onLoad()">
  </body>
</html> 
```

现在，来测试一下

1.  添加一些`onBackKeyDown()`您想要运行的代码，例如

    `function onBackKeyDown() { currentId = $.mobile.activePage.attr('id'); if(currentId == "#swipediv"){ $.mobile.changePage("#home", "slide", false, true); } else{ history.go(-1); } }`

2.  加载`cordova-2.0.0.js`

3.  结帐[WP7 PhoneGap 后退按钮支持重新访问](http://www.scottlogic.co.uk/blog/colin/2012/01/wp7-phonegap-backbutton-support-re-visited/)
4.  阅读[文档](http://docs.phonegap.com/en/2.0.0/cordova_events_events.md.html#backbutton)

如果这仍然不起作用，请提交[错误报告](https://issues.apache.org/jira/browse/CB)。

# lua - 在 Lua 中检测脚本/文本的结尾

> ID：11722094
> 
> 赞同：-2
> 
> 时间：2012-07-30T12:57:52.140
> 
> 标签：lua

如果用户停止在富文本框/对象中输入，我如何在 lua 中检测，以便让我比较用户输入的当前文本以进行进一步的实现？也就是说，在用户停止在富文本对象或框中键入文本后，将比较刚刚键入的文本。但是，我已经设法执行进一步的实现部分，例如比较和要执行的操作，但我的问题是如何检测用户是否停止在富文本框中输入以供其他实现遵循。

我已经尝试了几种方法，但我仍然没有得到正确的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T20:16:32.263

我猜您正在使用某种 GUI 库来获取富文本框。

您应该寻找的是一种查看键盘事件的方法。一些 GUI 工具包有它们。每次用户按下一个键（或键盘有其他输入）时，操作系统都会触发程序可以访问的键盘事件。您可以使用它来判断用户是否输入了文本。如果事件之间有很大的停顿，可能是 2 秒，您可以判断用户已经停止输入并继续进行比较。

另一种方法是查看文本框的内容。基本上，看看文本框的内容。如果自您上次查看后它们发生了变化，那么您应该稍等片刻，然后再次检查。如果它们没有改变，假设用户已经停止输入并运行您的比较。

请记住，有些人打字速度很慢，或者可能会在打字到一半时停下来思考。这意味着如果您检查得太频繁，您可能会自欺欺人，并且更改用户刚刚键入的文本*可能*会吓到和混淆用户。（当您阅读所有数据时，一些 GUI 工具包会从文本框中删除文本，这意味着用户只是看到他们所有的工作都消失了！）请小心。

老实说，有关您正在尝试做的事情的一些细节会非常有帮助。正如 Mike Corcoran 所指出的，该脚本的运行位置可以真正改变您拥有的选项以及哪些选项最适合整个程序。例如，第三种解决方案是简单地要求用户按下按钮或以其他方式指示他们已完成输入。这在文本编辑器中不是一个好主意，但它可以在其他一些 GUI 中工作。

# c# - ASP.Net ReportViewer - 无法隐藏文档图

> ID：11722095
> 
> 赞同：2
> 
> 时间：2012-07-30T12:57:54.027
> 
> 标签：c#, asp.net, reportviewer

我有一个包含`ReportViewer`控件的 .aspx 页面。报告正确显示，但我无法让文档图消失。如果您查看以下两个图像：

![文档地图展开](../Images/4581747410fe4e346b676ff55411a330.png) ![文档地图已折叠](../Images/1e437a4d0eb6ef9c2974c0ef50cb7e0b.png)

您可以看到切换按钮存在，但是当我单击它时没有任何反应。我还在启用开发人员控制台的 chrome 中尝试了这个，并且没有 javascript 错误。

关于我可能需要做些什么来解决这个问题有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T14:44:09.510

我将`AsyncRendering`属性设置为 true，将`SizeReportToContent`属性设置为 false，文档地图展开/折叠按钮开始正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T15:28:32.803

[这](http://social.msdn.microsoft.com/forums/en-US/sqlreportingservices/thread/a737fdc3-6845-4304-b305-2f3c693b9599/)是一个论坛帖子，描述了将“rc:DocMap=false”参数传递给报告以隐藏文档映射。

# php - 有没有办法为静态类方法定义别名？

> ID：11722097
> 
> 赞同：3
> 
> 时间：2012-07-30T12:58:01.000
> 
> 标签：php, alias, static-methods

基本上我的问题如标题所述......

我想让用户能够为类中的静态方法定义别名（在我的情况下专门针对 MyClass）。

我没有发现任何与 class_alias 功能相似的东西。当然，用户可以定义自己的函数来调用静态方法来实现这个目标......但是还有其他/更好/更简单/不同的方法来做到这一点吗？

到目前为止，这是我的尝试...

```
<?php
class MyClass {

    /**
     * Just another static method.
     */
    public static function myStatic($name) {
        echo "Im doing static things with $name :)";
    }

    /**
     * Creates an alias for static methods in this class.
     *
     * @param   $alias      The alias for the static method
     * @param   $method     The method being aliased
     */
    public static function alias($alias, $method) {
        $funcName = 'MyClass::'.$method;    // TODO: dont define class name with string :p
        if (is_callable($funcName)) {
            $GLOBALS[$alias] = function() use ($funcName){
                call_user_func_array($funcName, func_get_args());
            };
        }
        else {
            throw new Exception("No such static method: $funcName");
        }
    }
}

MyClass::alias('m', 'myStatic');
$m('br3nt'); 
```

另外，请随意评论我可能没有考虑过的方法中的任何优点或缺点。我了解这种方法存在一些风险，例如，别名变量可能在用户定义后被覆盖。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T13:05:34.993

也许您可以利用`__callStatic`“魔术”方法。有关详细信息，请参见[此处](http://www.php.net/manual/en/language.oop5.overloading.php#object.callstatic)。

不过，我不确定您打算如何在别名和实际静态方法之间进行映射。也许您可以有一个配置 XML，您可以在其中指定映射，并`__callStatic`基于此将调用转发到实际方法。

# java - GWT 应用程序在没有浏览器插件的情况下运行

> ID：11722100
> 
> 赞同：1
> 
> 时间：2012-07-30T12:58:06.207
> 
> 标签：java, gwt, jakarta-ee, plugins, browser

如何在没有任何浏览器插件的情况下运行 gwt 应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T13:09:52.250

您必须将它部署到服务器（例如 Tomcat 或 Jetty）并从那里运行它。这称为[生产模式](https://developers.google.com/web-toolkit/gettingstarted#compile)。

您可以查看官方[GWT 教程](https://developers.google.com/web-toolkit/doc/latest/tutorial/)以获取更多信息。

# google-analytics - 登录时跳过 Tumblr 上的 Google Analytics

> ID：11722103
> 
> 赞同：1
> 
> 时间：2012-07-30T12:58:15.790
> 
> 标签：google-analytics, tumblr

我正在将 Google Analytics 集成到我的 tumblr 模板中。问题是，每次我访问博客查看它的外观时，Google 都会将我视为访问者。我想避免它。所以我的模板中需要这样的东西：

```
{block:NotAdmin}
   <#Google-Script>
{/block:NotAdmin} 
```

[我在tumblr-Site](http://www.tumblr.com/docs/en/custom_themes/)上找不到任何有用的东西。

有什么建议么？

附言。我从不同的 IP 访问博客，所以 Google-IP-Filter 不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T14:39:27.547

检测用户是否登录的一些可能方法：[如何检测 tumblr 用户是否登录？](https://stackoverflow.com/questions/11626074/how-to-detect-if-a-tumblr-user-is-logged-in)

假设您可以使上述代码的某种形式正常工作，您可以在 _trackPageview 调用中添加一个条件：

```
 if (!logged_in)_gaq.push(['_trackPageview']); 
```

这样，所有分析代码仍在加载中，但在您登录时不会跟踪页面浏览量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T13:01:58.767

也许试试[谷歌的退出扩展](https://tools.google.com/dlpage/gaoptout/)？一个好的做法是在 Google Chrome 中设置一个新用户，并在您想查看博客时切换到该用户。

# opengl - 在渲染期间设置 glTexParameteri() 是不是很糟糕？

> ID：11722107
> 
> 赞同：6
> 
> 时间：2012-07-30T12:58:31.080
> 
> 标签：opengl, opengl-es

我面临纹理包装的问题。这导致了伪影。由于我的代码库已经变得庞大，我能想到的唯一方法是执行某些检查以查看某些纹理是否属于导致伪影的类别，并在绘制到渲染缓冲区之前更改参数。

那么一般情况下可以吗？设置参数，如

```
glTexParameteri( GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_MIRRORED_REPEAT);
glTexParameteri( GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_MIRRORED_REPEAT); 
```

在渲染循环期间glBindTexture之后？还是会影响 FPS，因为它会增加每个渲染帧期间的操作？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-30T13:02:17.173

更改纹理参数通常不会对性能产生太严重的影响，因为它会保持缓存完好无损并且只会更改访问模式。

然而，在更高版本的 OpenGL 中，针对这种非常具体的使用场景“采样器对象”已经被引入。我想你可能想看看他们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T14:31:52.747

一般的经验法则是：不要改变任何你不需要的状态。

如果纹理具有使您使用镜像重复包装模式的内在属性，那么它应该*始终*具有该属性。因此，纹理最初应该是使用该环绕模式设置的。

如果这是您在渲染时*需要*做的事情，那么是的，您可以做到。它是否会对您的性能产​​生不利影响完全取决于您的渲染代码对 CPU 的约束程度。

笔记：

> 由于我的代码库变得庞大

This is never a good reason to do *anything*. If you can't figure out a way to make your code do this the right way, then something bad has probably happened within your codebase. And you should fix *that* before trying to deal with this texture issue.

# geolocation - navigator.geolocation.watchPosition 在三星 Galaxy Xcover 上不起作用 - GPS 保持关闭

> ID：11722108
> 
> 赞同：1
> 
> 时间：2012-07-30T12:58:43.583
> 
> 标签：geolocation, gps, sencha-touch-2, cordova

我有一个用 javascript 编写的应用程序，使用 Sencha Touch 和 Cordova 库。它是适用于 Android 设备的移动应用程序。

我`navigator.geolocation.watchPosition()`用来获取 GPS 位置。我的代码适用于我测试过的其他手机（HTC one X、LG optimus black、LG optimus 2X、HTC evo 3D 和其他一些手机），但不适用于三星 Galaxy Xcover S5690。

问题是 Xcover 上的 GPS 从未打开，所以我最多只能得到一个非常不准确的位置（可能基于移动塔）。在其他设备上，状态栏上的 GPS 图标开始闪烁，最终我得到了一个非常准确的位置。

我的清单文件正常（`ACCESS_FINE_LOCATION`行），我的 plugins.xml 正常（cordova.GeoBroker 行）。GPS只是保持关闭状态。

我正在使用 ST 2.0 和 Cordova 2.0。我`navigator.geolocation.watchPosition()`从我的`onDeviceReady()`听众那里打电话。我的代码适用于其他手机和 Chrome 浏览器。

# php - 远程读取的最大文件大小

> ID：11722113
> 
> 赞同：2
> 
> 时间：2012-07-30T12:59:06.740
> 
> 标签：php, xml, xmlreader

我的应用程序 XMLReader 从远程位置读取 XML 文件。我开始阅读的最大文件大小（以字节为单位）是多少？

谢谢

```
if ($file_size > XXX)
{
   exit('Wohooo that is a massive file to handle for me. Chop it up please');
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T13:03:04.240

你为什么关心 max_file 的大小？使用[fgets](http://php.net/manual/en/function.fgets.php)之类的东西，您可以一次读取一行，或者使用[fread](http://www.php.net/manual/en/function.fread.php)之类的东西，您可以设置一次获取多少。

使用其中任何一种，如果您控制内存，您可以轻松控制脚本将使用多少资源。

如果您担心脚本会占用过多的系统资源，那么[这](https://stackoverflow.com/questions/584960/whats-better-at-freeing-memory-with-php-unset-or-var-null)是一本关于如何更好地利用服务器上的内存与 CPU 周期的精彩读物。我通常选择`unset()`顺便说一句，似乎发现它会得到更好的结果。

# c - 在调试模式下在 ILE C 程序中搜索时找不到字段

> ID：11722114
> 
> 赞同：0
> 
> 时间：2012-07-30T12:59:08.953
> 
> 标签：c, debugging, ibm-midrange

当我在调试模式下处理 ILE C 程序时，我打算通过程序搜索字段的出现。该字段是结构的一部分，因此我也在搜索中包含了结构变量名称。但搜索并不总是奏效。它偶尔会显示未找到的消息字段，即使该变量就在我眼前。当我尝试使用该字段设置条件断点时，再次发生这种情况。有谁知道为什么会这样？以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T10:22:27.340

Are you taking account of the fact that C is case-sensitive? If you don't use the exact case of the variable name then the variable will not be found; certainly on the conditional breakpoint.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T14:18:08.273

如果您使用 F 命令在 ILE 调试器中进行搜索，请务必从顶部开始。ILE 调试器将从当前点开始搜索，有时从最后一个搜索结果开始。使用 T 转到源的顶部将重置它，然后您可以使用 F 从顶部再次查找。

# html - 如何修改基于 AJAX 的站点内容 OnDocumentComplete 事件

> ID：11722116
> 
> 赞同：0
> 
> 时间：2012-07-30T12:59:11.190
> 
> 标签：html, ajax, bho

我在页面的 DocumentComplete 事件下有一个 IE 工具栏应用程序，我正在使用 BHO（浏览器帮助器对象）的概念禁用 HTML 链接，这对某些网站运行良好，但是当我浏览一些基于 AJAX/JQUERY 的网站时，数据将被动态填充并且更多源代码对于动态数据也不可见，此链接禁用功能不起作用.....

加载到浏览器时如何禁用或修改动态数据的内容？

```
HTMLDocument document = (HTMLDocument)webBrowser.Document;
IHTMLElementCollection hh = ((IHTMLElementCollection)document.getElementsByTagName("a"));

foreach (IHTMLElement ht in hh)
{

 ((HTMLAnchorElement)ht).removeAttribute("href", 1);
 ((HTMLAnchorElement)ht).style.color = "#b9b0b0";

} 
```

任何帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T12:36:26.797

这取决于您的 IE 版本。直到 IE 8 没有生成[DOM Mutation 事件](http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-eventgroupings-mutationevents)，但是这里[提到](https://stackoverflow.com/questions/5108993/is-there-an-event-that-fires-when-dom-is-modified-in-mshtml-ie8)了另一种方法。[尽管 IE 9 支持本 IE 博客](http://blogs.msdn.com/b/ie/archive/2010/03/26/dom-level-3-events-support-in-ie9.aspx)中提到的一些基本 dom 突变事件。此外，请参阅此[MSDN 条目](http://msdn.microsoft.com/en-us/library/ff975904%28v=vs.85%29.aspx)以了解 IE9 中支持的接口。

一种非常***粗略***的方法是使用计时器事件来监视 DOM 内容的任何变化。但是您必须处理线程问题并且必须保留每个窗口的文本信息（通过窗口我指的是选项卡以及 IFrame 内容）。

另一种方法是使用[异步可插入协议](http://msdn.microsoft.com/en-us/library/ie/aa767916%28v=vs.85%29.aspx)来监视任何 Ajax 请求，然后相应地通知相应的选项卡/窗口。这比以前的***粗略***方法更难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T12:13:58.937

我得到了上述问题的答案。以下是我针对该问题所遵循的解决步骤。

我只是将整个页面内容读入问题中提到的“MSHTML”对象

```
 HTMLDocument document = (HTMLDocument)webBrowser.Document; 
```

我再次将它加载到 Web 浏览器控件中。

从那里我可以轻松地读取数据，我只是删除了“href”属性。

# workflow - 自定义工作流如何获取执行实体

> ID：11722128
> 
> 赞同：6
> 
> 时间：2012-07-30T12:59:59.310
> 
> 标签：workflow, dynamics-crm-2011

这是我为 CRM 2011 定制的第一个 WF，这需要是任何实体的通用 EF，我想知道如何从上下文中获取执行实体，或者如果不可能，任何想法都会非常好。

我这样启动WF：

```
public class WFIntegracao: CodeActivity
    {

        protected override void Execute(CodeActivityContext context)
        {

            IWorkflowContext contexto = context.GetExtension<IWorkflowContext>();

        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T08:34:29.420

`IWorkflowContext`应该包含您需要的信息。

```
IWorkflowContext contexto = context.GetExtension<IWorkflowContext>();
String entityName = contexto.PrimaryEntityName;
Guid entityId = contexto.PrimaryEntityId; 
```

[MSDN IWorkflow上下文](http://msdn.microsoft.com/en-us/library/microsoft.xrm.sdk.workflow.iworkflowcontext_properties)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T13:26:23.587

我之前没有为未指定类型的实体创建工作流，但是您可以更改此代码来执行此操作；这是一个联系参考：

```
[RequiredArgument]
[Input("Contact")]
[ReferenceTarget("contact")]
public InArgument<EntityReference> Contact { get; set; }

protected override void Execute(CodeActivityContext context)
{
    ContactReference = Contact.Get(context);
    if (ContactReference == null)
        throw new InvalidPluginExecutionException("Contact reference is null.");

    DoSomething();
} 
```

请注意，我已明确指出预期的输入类型是联系人实体引用。您可以排除 ReferenceTarget 属性以解除此限制。稍后您可以通过简单地查看 .Get() 结果的 LogicalName 成员来确定类型，因此在示例中为：

```
string entityType = ContactReference.LogicalName; 
```

# c - 指针/结构

> ID：11722130
> 
> 赞同：0
> 
> 时间：2012-07-30T13:00:10.317
> 
> 标签：c, structure

我想问关于指针的问题。我不知道在这里做什么，我在 main 中有一个方法正在调用 main 之外的方法，我需要使用指针。基本上这是它的草稿：谢谢！

```
 char *book[] = { "x", "y", "z",};
 int number[] = { 1, 2, 3};

 struct data{ char *bookname; int booknumber;};

 struct data *list[3];

  my_method(char *x, int y, int *z)
 {

   //creating a new struct 
   list[(*z)++] = (struct data*) malloc( sizeof(struct data) );

   //assigning arguments
   list[(*z)++]->bookname = x;
   list[(*z)++]->booknumber = y;

   (*z)++;
 }

 int main()
 {
   int nextValue = 0;

   my_method(book[nextValue], book[nextValue], &nextValue);

   int i;
   for(i = 0; i < 3; i++)
   {
     function(book[i], number[i]);

     printf("name: %c number: %d", list[i]->bookname, list[i]->booknumber);
   }
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T13:09:29.180

看起来您将错误的参数传递给您的方法。尝试更改以下行：

```
my_method(book[nextValue], number[nextValue], &nextValue); 
```

此外，在您的方法中，您似乎将 z 增加了四次，我怀疑这是您想要的行为。您应该只在最后增加一次，如下所示：

```
//creating a new struct 
list[*z] = (struct data*) malloc( sizeof(struct data) );

//assigning arguments
list[*z]->bookname = x;
list[*z]->booknumber = y;

(*z)++; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T13:07:53.587

试试下面的代码。简单地去除了不必要的静态空隙。

```
 //declaration of method outside the main 
  void my_method(............,int *nextValue)
  {
  //................................//
  //..............................//

  //then increment the pointer
  (*nextValue)++;
  }//my_method

  int main()
  {

   int nextValue = 0;

  //Removed static void
  my_method(............, &nextValue);
  //........................................//
  }//main 
```

# flash - Flash：解释来自外部 txt 文件的换行符

> ID：11722131
> 
> 赞同：0
> 
> 时间：2012-07-30T13:00:15.200
> 
> 标签：flash, actionscript

我正在尝试将外部 txt 文件中的变量放入闪存中。文本文件如下所示：

```
[Settings]
AllowSetConflicts=1

[Hotkeys]
Music=F2
Sound=F6
PTT=
ChatAllies=Tab 
```

等有没有办法让闪光灯识别换行符并过滤掉 [Settings] 之类的文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T14:57:04.780

如果可能的话，我建议您使用 XML 或 JSON 而不是您自己的格式，因为它更安全并且您不需要编写解析器。

**动作脚本：**

```
import flash.net.URLLoader;
import flash.net.URLRequest;
import flash.events.Event;

var textLoader:URLLoader = new URLLoader();
textLoader.addEventListener(Event.COMPLETE, textHandler);
textLoader.load(new URLRequest('txt.txt'));

function textHandler(e:Event):void{
    var s:String = e.target.data;
    var params:Array = s.split('\r');
    trace(params[0].replace('\n',''));
    trace(params[1].replace('\n',''));
}

var xmlLoader:URLLoader = new URLLoader();
xmlLoader.addEventListener(Event.COMPLETE, xmlHandler);
xmlLoader.load(new URLRequest('xml.txt'));

function xmlHandler(e:Event):void{
    var xml:XML = new XML(e.target.data);
    trace(xml.settings.AllowSetConflicts);
} 
```

**txt.txt：**

```
[Settings]
AllowSetConflicts=1

[Hotkeys]
Music=F2
Sound=F6 
```

**xml.txt：**

```
<root>
   <settings>
       <AllowSetConflicts>
           1
       </AllowSetConflicts>
   </settings>
</root> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T16:31:42.590

我同意福克斯穿袜子的观点。事实上，有多少应用程序正在保存其设置（以 xml 格式）。

但是，如果您没有机会更改文件，这就是我要做的。

```
package  {

    import flash.display.Sprite;
    import flash.net.URLRequest;
    import flash.net.URLLoader;
    import flash.events.Event;
    import flash.events.IOErrorEvent;

    public class Main extends Sprite {

        private var urlL:URLLoader;
        private var props:Object = {};
        // props will be assigned all the data from the txt file
        private var file:String = 'file.txt';

        public function Main() {
            urlL = new URLLoader(new URLRequest(file));
            urlL.addEventListener(Event.COMPLETE,processFile);
        }

        private function fileNotLoaded(e:IOErrorEvent):void {
            trace(file, 'could not be loaded');
        }

        private function processFile(e:Event):void {
            var str:String = urlL.data.toString();
            var ref:Object, prop:String, val:*;
            var lines:Array = str.split(/\r\n?|\n/g);
            for (var i:int = 0; i < lines.length; i++) {
                // if it's an empty line...
                if (/^\s*$/.test(lines[i])) continue;
                // if it's a category line...
                if (/^\[.+?\]$/.test(lines[i])) {
                    ref = props[lines[i].replace(/^.(.+?).$/,'$1')] = {};
                // if it's a variable-value pair line...
                } else if (/^[^\r\n]+=[^\r\n]*$/.test(lines[i])) {
                    prop = lines[i].split('=')[0];
                    val = detectType(lines[i].substr(prop.length+1));
                    ref[prop] = val;
                }
            }
        }

        private function detectType(s:String):* {
        // this is an optional function to convert strings
        // with basic data types into appropriate class instances
            if (s == 'null') return null;
            if (/^(\d+|(\d+)?\.\d+)$/.test(s)) return Number(s);
            if (/^true$/.test(s)) return true;
            if (/^false$/.test(s)) return false;
            return s;
        }

    }

} 
```

# omnet++ - 如何将 OMNeT++ bin 目录添加到路径中，以便可以找到 opp_configfilepath？

> ID：11722133
> 
> 赞同：1
> 
> 时间：2012-07-30T13:00:22.323
> 
> 标签：omnet++

我正在尝试在 omnet++/MiXiM 中构建一个项目，编译器抛出 2 个错误：

**不存在 ConfigFile -- 将 OMNeT++ bin 目录添加到路径中，以便可以找到 opp_configfilepath**，或者将 OMNETPP_CONFIGFILE 变量设置为指向 Makefile.inc) 两次

如何将它添加到路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-15T14:02:14.367

首先，您需要修改`.bashrc`主目录中的文件

1.  访问`.bashrc`：`gedit ~/.bashrc`
2.  将此行插入该文件：`export PATH=$PATH:/<path-where-omnet-is-located-goes-here>/omnetpp-4.6/bin`
3.  注销并再次登录

# security - AntiForgeryToken 是如何工作的？

> ID：11722137
> 
> 赞同：4
> 
> 时间：2012-07-30T13:00:33.683
> 
> 标签：security, asp.net-mvc-2, xss, antiforgerytoken

我正在将安全性应用于我的 .net 3.5 mvc2 Web 应用程序。我的网站不包含任何用户身份验证，并且在 .js 文件中包含许多 ajax 调用

在我写的 .aspx 文件中

```
<%= Html.AntiForgeryToken() %> 
```

在我写的 .js 文件函数中

```
$(document).ready(function() {

var token = $('input[name=__RequestVerificationToken]').val();

    $.ajax({
    url: "/Home/getCurrentLanguage/" + Math.random(),
        cache: false,
        type: "POST",
        async: false,
        data: {"__RequestVerificationToken":token},
        success: function(data) {
            if (data == "mr") {
                alert("its Marathi");
            } else {
                alert("its English huh !!!");
            }
            return false;
        },
        error: function(data) {
            alert("some Error" + data);
        }
    });

}); 
```

在我的控制器中我写了

```
 [AcceptVerbs(HttpVerbs.Post), ValidateAntiForgeryToken]
    public JsonResult getCurrentLanguage(string id)
    {
        return new JsonResult
        {
            Data = "mr"
        };

    } 
```

这对我来说很好，但我有 2 个问题
Q1。这是正确的方法吗？如果我看到页面源代码，我发现了这段代码

```
<input name="__RequestVerificationToken" type="hidden" value="WFd+q5Mz0K4RHP7zrz+gsloXpr8ju8taxPJmrLO7kbPVYST9zzJZenNHBZqgamPE1KESEj5R0PbNA2c64o83Ao8w8z5JzwCo3zJKOKEQQHg8qSzClLdbkSIkAbfCF5R6BnT8gA==" /> 
```

但是当我创建外部 html 文件并复制 __RequestVerificationToken 的值并传入 ajax 调用时，我收到此错误
**A required anti-forgery token is not provided 或无效。** 然后
是 Q2。运行时如何知道此页面正在提供复制的 __RequestVerificationToken？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T16:11:18.127

这个“AntiForgeryToken”用于防止[跨站点请求伪造](http://en.wikipedia.org/wiki/Cross-site_request_forgery)攻击。如果您的应用程序存在跨站点脚本漏洞，攻击者可能会破坏该系统。

此令牌可防止 CSRF 攻击，因为由于[同源策略](http://code.google.com/p/browsersec/wiki/Part2#Same-origin_policy)，攻击者可以发送请求，但他无法从页面读取令牌以使请求成功（除非他有 xss 漏洞）。

对于 Q2，这个值对于每个用户必须是唯一的，因此每次页面加载时都会更新。如果它只是一个静态值，那么它在停止 CSRF 时毫无用处，因为攻击者会知道这个相同的静态值。

# c# - 如何将 Global ActionFilter 应用于所有控制器并返回 Result？

> ID：11722140
> 
> 赞同：3
> 
> 时间：2012-07-30T13:00:43.897
> 
> 标签：c#, asp.net, .net, asp.net-mvc-3, global-filter

如何正确应用全局动作过滤器，使其触发所有动作，然后返回触发过滤器的自定义动作结果？我将提供到目前为止我所做的事情的示例，但无法**触发**`filterContext.Result = ...`

*全球.asax*

```
public static void RegisterGlobalFilters(GlobalFilterCollection filters)
{
    filters.Add(new HandleErrorAttribute());
    filters.Add(new RequestCounter());
}

public class RequestCounter : ActionFilterAttribute
{

    public override void OnResultExecuted(ActionExecutingContext filterContext)
    {  
          if (!LogCounter())
          {
               if (!filterContext.IsChildAction)
               {
                   var values = new RouteValueDictionary(new
                   {
                       controller = "Account",
                       action = "LogOff"
                   });

                   filterContext.Result = new RedirectToRouteResult(values);

                   //--> Here, the action is not redirected to LogOff method,
                   //    the goal is to logoff user, program just continues???
               }
          }

          base.OnResultExecuted(filterContext);
     }
} 
```

如何从这个上下文中正确重定向到 LogOff() 方法，使用 Result 或其他方式？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T13:05:53.277

根据this [answer](https://stackoverflow.com/questions/6900333/redirect-with-redirecttorouteresult-does-not-work-from-other-area#6900386) on a similar question，您需要将`Area`参数分配给空字符串，例如

```
var values = new RouteValueDictionary(new
{
    controller = "Account",
    action = "LogOff",
    area = ""
}); 
```

# java - 获取在 Java 中的方法内部调用的方法

> ID：11722142
> 
> 赞同：1
> 
> 时间：2012-07-30T13:00:50.153
> 
> 标签：java, unit-testing, parsing, junit

我想进行 JUnit 测试以确保某些类不使用一组特定的方法（来自另一个类）。例子

```
class MyClass
{
   void myMethod()
   {
       otherClass.otherClassStaticMethod();
   }
}

class myTest
{
    void test()
    {
        assertFalse(CalledMethods.getMethodsCalledBy("myClass.myMethod").Contains("otherClass.otherClassStaticMethod"));
    }
} 
```

在这个测试中，我想确保 myMethod 不会调用 otherClassStaticMethod。如何在编译时找到方法内部调用了哪些方法（忽略使用反射调用的方法）？我想到了一个 .java 解析器，你有什么推荐的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T13:05:01.247

您可以模拟“otherClass”并验证未调用该方法。例如，使用[Mockito](http://code.google.com/p/mockito/)，您甚至可以指定应该调用哪些方法（在它们的实例是模拟的条件下）并指定不允许调用哪些方法

正如 coding.mof 所说，要模拟静态方法，您应该使用 PowerMock/PowerMockito：

例子：

```
PowerMockito.mockStatic(OtherClass.class);

PowerMockito.verifyStatic(never());
OtherClass.otherClassStaticMethod(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T13:07:46.067

听起来您应该使用模拟库并让它为您处理一切。我推荐 JMock 作为我的首选库。如果您使用的是实例方法，那么这对您来说是完美的 - 如果如您的示例所示，它是静态方法，那么 PowerMock 可能会工作*1。

使用 JMock，您将拥有类似的东西：

```
public class MyClass {
    public MyClass(Dependency dependency) {
        this.dependency = dependency;
    }

    void myMethod() {
        dependency.someMethod();
    }
}

@RunWith(JMock.class)
public class MyTest {
    private Mockery context = new Mockery();

    @Test
    public void doesNotCallSomeMethod() {
        Dependency dependency = context.mock(Dependency.class);
        MyClass obj = new MyClass(dependency);

        obj.myMethod();  <--- this will fail fast
    }
} 
```

当您调用 obj.myMethod 时，JMock 会立即报告您从未​​说过依赖项应该调用任何方法。它还会告诉您您 DID 调用的方法以及传入的参数（如果有）

*1 我不使用 PowerMock，因为我避开静态方法，除非它们是纯函数

# windows - 我可以在 vim 键盘映射中使用环境变量吗？

> ID：11722144
> 
> 赞同：2
> 
> 时间：2012-07-30T13:01:00.593
> 
> 标签：windows, environment-variables, vim

可能有更好的方法来做到这一点，但这就是我想要做的。我有几个 html 文件，我需要在更新内容之前更新元标记。我正在尝试通过使用类似于以下内容的键盘映射来自动执行此操作：

```
nnoremap <leader>mt /<meta name="developer"<cr>f";;lct"$username 
```

除了`$username`部分之外，这似乎有效。如何使映射评估变量？

我确实有一些标签要更新每页，但不知道该怎么做。如果有人有更好的方法，我会很高兴听到它。我正在搜索的内容类似于以下内容：

```
<meta name="owner" content="someowner">
<meta name="developer" content="somedev">
<meta name="date" content="2012-07-26">
<meta name="expires" content="2013-07-26"> 
```

这`date`将是我打开文件进行编辑的日期，而`expires`将是一年后`date`

注意：这是 Windows 上的 gvim，如果这会改变的话。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T13:29:20.563

`$username`确实引用了 environment variable `username`，但是要在映射中使用它，您必须遵守 Vim 的（有点不直观，但完全一致的）解释规则。

*直到 double-quote*的`ct"`平均变化，所以接下来是插入模式。要插入环境变量（或任何其他 Vim 表达式），请使用：*`<C-R>=`*

 *```
nnoremap <leader>mt /<meta name="developer"<cr>f";;lct"<C-R>=$username<CR> 
```

这将评估每个映射调用的环境变量。（并保持插入模式；追加`<Esc>`以返回正常模式！）或者，您也可以将值烘焙到映射本身中：

```
execute 'nnoremap <leader>mt /<meta name="developer"<cr>f";;lct"' . $username 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T13:24:35.963

我不知道这是否是最好的解决方案，但是对于 unix 机器上的用户名，您可以从 vim 调用 'whoami' 命令作为外部命令，并将其返回值存储在变量中以供以后重用

对于日期，vim 中有一个 strftime() 函数。您可以为 VimEnter 事件添加一个自动命令，并将当时的时间/日期也存储在一个变量中，以便以后重用。*

# android - 查询不起作用 android sqlite

> ID：11722152
> 
> 赞同：0
> 
> 时间：2012-07-30T13:01:37.033
> 
> 标签：android, sqlite

我正在使用 SQL 开发一个简单的 Android 应用程序。我遵循了以下指南 -[在 Android 应用程序中使用您自己的 SQLite 数据库](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)。

尝试查询数据库时出现错误。

这是我的 DataBaseHelp.Java 类：

```
package namae.nombebe;

import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;

import android.content.Context;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteException;
import android.database.sqlite.SQLiteOpenHelper;

public class DataBaseHelper extends SQLiteOpenHelper{

    //The Android's default system path of your application database.
    private static String DB_PATH = "/data/data/namae.nombebe/databases/";

    private static String DB_NAME = "myDBName";

    private SQLiteDatabase myDataBase; 

    private final Context myContext;

    /**
     * Constructor
     * Takes and keeps a reference of the passed context in order to access to the application assets and resources.
     * @param context
     */
    public DataBaseHelper(Context context) {

        super(context, DB_NAME, null, 1);
        this.myContext = context;
    }   

  /**
     * Creates a empty database on the system and rewrites it with your own database.
     * */
    public void createDataBase() throws IOException{

        boolean dbExist = checkDataBase();

        if(dbExist){
            //do nothing - database already exist
        }else{

            //By calling this method and empty database will be created into the default system path
               //of your application so we are gonna be able to overwrite that database with our database.
            this.getReadableDatabase();

            try {

                copyDataBase();

            } catch (IOException e) {

                throw new Error("Error copying database");

            }
        }

    }

    /**
     * Check if the database already exist to avoid re-copying the file each time you open the application.
     * @return true if it exists, false if it doesn't
     */
    private boolean checkDataBase(){

        SQLiteDatabase checkDB = null;

        try{
            String myPath = DB_PATH + DB_NAME;
            checkDB = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);

        }catch(SQLiteException e){

            //database does't exist yet.

        }

        if(checkDB != null){

            checkDB.close();

        }

        return checkDB != null ? true : false;
    }

    /**
     * Copies your database from your local assets-folder to the just created empty database in the
     * system folder, from where it can be accessed and handled.
     * This is done by transfering bytestream.
     * */
    private void copyDataBase() throws IOException{

        //Open your local db as the input stream
        InputStream myInput = myContext.getAssets().open(DB_NAME);

        // Path to the just created empty db
        String outFileName = DB_PATH + DB_NAME;

        //Open the empty db as the output stream
        OutputStream myOutput = new FileOutputStream(outFileName);

        //transfer bytes from the inputfile to the outputfile
        byte[] buffer = new byte[1024];
        int length;
            while ((length = myInput.read(buffer))>0){
            myOutput.write(buffer, 0, length);
        }

        //Close the streams
        myOutput.flush();
        myOutput.close();
        myInput.close();

    }

    public void openDataBase() throws SQLException{

        //Open the database
        String myPath = DB_PATH + DB_NAME;
        myDataBase = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);

    }

    @Override
    public synchronized void close() {

            if(myDataBase != null)
                myDataBase.close();

            super.close();

    }

    @Override
    public void onCreate(SQLiteDatabase db) {

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

    }

        // Add your public helper methods to access and get content from the database.
       // You could return cursors by doing "return myDataBase.query(....)" so it'd be easy
       // to you to create adapters for your views.
} 
```

我想做什么：

```
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    DataBaseHelper myDbHelper = new DataBaseHelper(null);
    myDbHelper = new DataBaseHelper(this);

    try 
    {
            myDbHelper.createDataBase();
    } 
    catch (IOException ioe) 
    {
        throw new Error("Unable to create database");
    }

    try 
    {
        myDbHelper.openDataBase();
    }
    catch(SQLException sqle)
    {
        throw sqle;
    }

    myDataBase = myDbHelper.getWritableDatabase();

    Cursor c = myDataBase.rawQuery("SELECT * FROM A", null); 
```

// 这个查询的问题 }

所以我不知道出了什么问题。

我尝试使用简单的数据库名称“test.sqlite3”，有两个表“android_metadata”和“A”。

我已经完成 INSERT INTO "android_metadata" VALUES ('en_US')

而在 A 只有 2 列 _id 和 TEXT，只有一个值“你好！” 和“10”。

我的错误是：

> 07-30 13:39:03.886: E/AndroidRuntime(307): java.lang.RuntimeException: 无法启动活动 ComponentInfo{namae.nombebe/namae.nombebe.NomBebeActivity}: android.database.sqlite.SQLiteException: 没有这样的表: A: , 编译时: SELECT * FROM A

因此，如果有人有任何想法，请提前致谢。我已经找了好几个小时了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T13:32:57.213

您得到的错误与您的 sqlite 使用无关。您的活动有问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T13:50:48.217

当您实例化时，您的代码会创建一个空数据库，然后您从活动中检查它，它已经存在并且复制代码不会运行。因此，当您尝试查询时，您的表不存在的消息。

一个示例 DBAdapter 类：

```
public class DBAdapter {

    // tool groups table
    public static final String TOOL_GROUP_TABLE = "ToolGroups";
    public static final String TOOLGROUP_ROWID = "_id";
    public static final String TOOLGROUP_DESCRIPTION = "GroupDescription";

    // DB info
    public static final String MAIN_DATABASE_NAME = "yourDB";
    public static String MAIN_DB_PATH = "/data/data/your.package.name/databases/";
    public static final int MAIN_DATABASE_VERSION = 1;

    // database control
    private DatabaseHelper mDbHelper;
    private static SQLiteDatabase mDb;
    private static Context mCtx;

    private static class DatabaseHelper extends SQLiteOpenHelper {
        DatabaseHelper(Context context, String dbname, int dbversion) {
            super(context, dbname, null, dbversion);
            if (checkDataBase(dbname)) {
                openDataBase(dbname);
            } else {
                try {
                    this.getReadableDatabase();
                    copyDataBase(dbname);
                    this.close();
                    openDataBase(dbname);
                } catch (IOException e) {
                    throw new Error("Error copying database");
                }
                Toast.makeText(context,
                        "Initial " + dbname + " database has been created",
                        Toast.LENGTH_LONG).show();
            }
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        }
    }

    public DBAdapter(Context ctx) {
        DBAdapter.mCtx = ctx;
    }

    public DBAdapter open(String dbname, int dbversion) throws SQLException {
        mDbHelper = new DatabaseHelper(mCtx, dbname, dbversion);
        mDb = mDbHelper.getWritableDatabase();
        return this;
    }

    public void close() {
        mDbHelper.close();
    }

    private static void copyDataBase(String dbname) throws IOException {
        InputStream myInput = mCtx.getAssets().open(dbname);
        String outFileName = MAIN_DB_PATH + dbname;
        OutputStream myOutput = new FileOutputStream(outFileName);
        byte[] buffer = new byte[1024];
        int length;
        while ((length = myInput.read(buffer)) > 0) {
            myOutput.write(buffer, 0, length);
        }
        myOutput.flush();
        myOutput.close();
        myInput.close();
    }

    private static boolean checkDataBase(String dbname) {
        SQLiteDatabase checkDB = null;
        boolean exist = false;
        try {
            String db = MAIN_DB_PATH + dbname;
            checkDB = SQLiteDatabase.openDatabase(db, null,
                    SQLiteDatabase.OPEN_READONLY);
        } catch (SQLiteException e) {
            Log.v("db log", "database does't exist");
        }
        if (checkDB != null) {
            exist = true;
            checkDB.close();
        }
        return exist;
    }

    private static void openDataBase(String dbname) throws SQLException {
        String dbPath = MAIN_DB_PATH + dbname;
        mDb = SQLiteDatabase.openDatabase(dbPath, null,
                SQLiteDatabase.OPEN_READWRITE);
    }

    public Cursor fetchAllGroups() {
        return mDb.query(TOOL_GROUP_TABLE, new String[] { TOOLGROUP_ROWID,
            TOOLGROUP_DESCRIPTION }, null, null, null, null, null);
    }
} 
```

然后你像这样从你的活动中调用它：

```
myDBHelper = new DBAdapter(this);  // constructor copies database if it doesn't exist yet
myDBHelper.open(DBAdapter.MAIN_DATABASE_NAME, DBAdapter.MAIN_DATABASE_VERSION);
Cursor toolGroupCursor = mDBHelper.fetchAllGroups(); 
```

# asp.net - MVC4：如何控制多个参数

> ID：11722154
> 
> 赞同：0
> 
> 时间：2012-07-30T13:01:43.763
> 
> 标签：asp.net, rest, asp.net-mvc-routing, asp.net-mvc-4, asp.net-web-api

> **可能重复：**
> [使用 ASP.NET MVC 使用多个参数进行路由](https://stackoverflow.com/questions/2246481/routing-with-multiple-parameters-using-asp-net-mvc)

尝试使用 MVC4 web api，我在 Global.asax 中定义了以下路由

```
routes.MapRoute(
  name:="API Default", 
  url:="api/{systemid}/{controller}/{id}",
  defaults:=New With {.id = RouteParameter.Optional}
) 
```

我相应地更改了控制器

```
Public Class ValuesController
    Inherits ApiController

 Public Function GetValues(systemid As Integer) As IEnumerable(Of String)
     ---
 End Function

 Public Function GetValue(systemid As Integer, ByVal id As Integer) As String
     ---
 End Function
End Class 
```

我正在寻找格式请求 uri 喜欢

```
http://localhost/api/13/values/5 
```

但唯一有效的调用是带有显式参数的，至于

```
http://localhost/api/values?id=5&systemid=4 
```

有没有办法完成我正在寻找的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T14:38:18.027

我猜你使用了错误的路由类，而不是使用Web API路由，你使用了MVC路由，应该是：

```
routes.MapHttpRoute(
  name:="API Default", 
  routeTemplate:="api/{systemid}/{controller}/{id}",
  defaults:=New With {.id = RouteParameter.Optional}
) 
```

# jquery - 语法错误，无法识别的表达式：[name=ctl00$MainContent$mainProgress]

> ID：11722160
> 
> 赞同：6
> 
> 时间：2012-07-30T13:02:02.190
> 
> 标签：jquery

我正在使用 jquery 1.3.2 但我已更新到最新版本：

以下不适用于最新版本的 jquery - 这里出了什么问题？

```
var input = $(this);

            // get the associated label using the input's id
            var label = $('label[for=' + input.attr('id') + ']');

            //get type, for classname suffix 
            var inputType = (input.is('[type=checkbox]')) ? 'checkbox' : 'radio';

            // wrap the input + label in a div 
            $('<div class="custom-' + inputType + '"></div>').insertBefore(input).append(input, label);

            // find all inputs in this set using the shared name attribute
            var allInputs = $('input[name=' + input.attr('name') + ']'); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-30T13:03:19.670

尝试将最后一行更改为：

```
var allInputs = $('input[name="' + input.attr('name') + '"]'); 
```

# string - 根据表格标题和单列更改单元格值

> ID：11722161
> 
> 赞同：0
> 
> 时间：2012-07-30T13:02:10.497
> 
> 标签：string, excel, vba, search

我正在尝试根据来自单行和单列的信息将某些单元格变为红色。我的算法应该做的是搜索单个列并找到匹配的字符串并保存列号，然后对行执行相同的操作。然后脚本选择单元格并将其变为红色。

我搜索的所有键都来自我在网上找到的一段代码，并根据我的需要进行了修改。它完美地工作。问题是我无法让搜索正常工作。

```
Option Explicit

Sub Blahbot()

Dim xRow As Long
Dim x As Long, y As Long
Dim xDirect$, xFname$, InitialFoldr$, xFF$

InitialFoldr$ = "G:\" '<<< Startup folder to begin searching from

With Application.FileDialog(msoFileDialogFolderPicker)
    .InitialFileName = Application.DefaultFilePath & "\"
    .Title = "Please select a folder to list Files from"
    .InitialFileName = InitialFoldr$
    .Show
    If .SelectedItems.Count <> 0 Then
        xDirect$ = .SelectedItems(1) & "\"
        xFname$ = Dir(xDirect$, 7) '<<< Where the search terms come from
        Do While xFname$ <> ""
            y = Application.WorksheetFunction.Match(Mid(xFname$, 11, 4), Range("D2:KD2"), 0) '<<< Find a matching string in table header
            x = Application.WorksheetFunction.Match(Mid(xFname$, 16, 4), Range("B3:B141"), 0) '<<< Find matching string in column B
            Cells(x, y).Select '<<<Select the cell and turn it red
            With Selection.Interior
                .Pattern = xlSolid
                .PatternColorIndex = xlAutomatic
                .Color = 255
                .TintAndShade = 0
                .PatternTintAndShade = 0
            End With
            xFname$ = Dir
        Loop
    End If
End With
End Sub 
```

代码的作用是读取文件夹、获取文件名并将它们拆分。名称将始终为@@@@_####（其中@= 大写字母和#### 是24 小时格式的时间）。

Mid 函数将该名称拆分为 4 个字母和时间。

如果您了解我要做什么，您能否建议一个更好的搜索算法或查看我的代码做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T14:49:20.980

我简化了我的答案，因为我可能误解了你的问题。`MATCH`返回一个*相*对于您查看的范围的值。因此，如果匹配项在 D 列中，则`MATCH`返回 1。因此，您需要偏移返回的值。

```
'Add 2 to x, since we start on 3rd row, add 3 to y since we start on 4th column
Cells(x+2, y+3).Select 
```

您可能还需要包含代码以检查是否不匹配。要查看您是否遇到此问题，您可以使用下面的代码对此进行测试或添加手表。

```
On Error Resume Next
y = Application.WorksheetFunction.Match(...)
If Err = 0 Then
    MsgBox "All is well"
Else
    MsgBox "There was an error with Match"
End If
On Error Goto 0 
```

# shell - 为目录中的所有文件运行 gdb 宏

> ID：11722164
> 
> 赞同：0
> 
> 时间：2012-07-30T13:02:25.043
> 
> 标签：shell, gdb

我想创建一个宏，将为其提供目录路径。宏又必须为目录中的所有文件运行另一个宏。这在 gdb 中可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T17:02:24.997

我假设您要运行的宏是 gdb 宏。为了解决这个问题，我建议你使用 gdb 中的 Python 支持来解决这个问题。将以下内容放入`forallindir.py`

```
import gdb
import os

class ForAllInDir (gdb.Command):
  "Executes a gdb-macro for all files in a directory."

def __init__ (self):
  super (ForAllInDir, self).__init__ ("forallindir",
                                      gdb.COMMAND_SUPPORT,
                                      gdb.COMPLETE_NONE, True)

def invoke(self, arg, from_tty):
  arg_list = gdb.string_to_argv(arg)
  path = arg_list[0]
  macro = arg_list[1]
  for filename in os.listdir(path):
    gdb.execute(macro + ' ' + os.path.join(path, filename))

ForAllInDir() 
```

然后在 gdb 中`source forallindir.py`它应该可以工作。例如，定义一个测试宏，如

```
define testit
  print "i got called with $arg0"
end 
```

并且`forallindir /tmp/xx testit`在该目录中有两个示例文件会给我们

```
$1 = "i got called with /tmp/xx/ape"
$2 = "i got called with /tmp/xx/bear" 
```

希望有帮助。

# javascript - 使用javascript将颜色设置为字符串

> ID：11722166
> 
> 赞同：0
> 
> 时间：2012-07-30T13:02:27.737
> 
> 标签：javascript, html, css

我正在构建一个动态数组并具有以下代码，我正在尝试为数组的“名称”添加颜色。**除了"fontcolor("red")"**之外，其他一切都完美无缺。

```
if (val < 0) {
    myArray.push({
            "name" : myVariable.fontcolor("red"),
            "size" : -10
    });
} else {
    myArray.push({
            "name" : myVariable,
            "size" : 5
    });
} 
```

在 HTML 页面上显示时，我最终得到以下内容：

```
<font color="red">Strong rubber(minus)</font> 
```

我实际上正在绘制一个图表，我正在使用 d3.js 来绘制图表，我的代码绘制了“Dog Toys”。myVariable 的值为“myVariable”

```
 <g style="cursor: pointer; opacity: 1; " transform="translate(0,0)"> 
  <text x="-6" y="10" dy=".50em" text-anchor="end">Dog Toys</text> 
  <rect width="478.57142857142867" height="20" style="fill: #4682b4; "></rect> 
 </g> 
```

知道当文本显示在网页上时如何为文本设置颜色吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T13:03:30.713

尝试

```
myVariable.style.color = "Red" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T13:04:55.463

```
myVariable.style.color = "red"; 
```

# sql - 如何在列中添加相同项目的值？

> ID：11722174
> 
> 赞同：5
> 
> 时间：2012-07-30T13:02:58.063
> 
> 标签：sql

我在表中有以下列：

1.  产品名称
2.  数量
3.  描述

如果产品名称相同，我想添加产品的数量。例如，如果我有两次具有相同名称的产品，我希望将产品的总数量相加并得到结果。

这是表格，我想添加相同项目的数量：

```
Name            Quantity   Description
Pen              3 
Pencil           2
Pen              6
Eraser           7
Eraser           6 
```

例如：

*   我有两次笔，所以想加（3 + 6）并将总数显示为9，然后......
*   我有两次橡皮擦（7+6），所以总数应该是 13。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-30T13:04:39.767

解决方案是`GROUP BY`子句：

```
SELECT Name, SUM(Quantity) 
FROM Table
GROUP BY Name 
```

`GROUP BY`在 SQL 查询中用于将行分组在一起以进行聚合。例如：如果您的输入表有行：

```
ItemName       Qty
Pen            4
Pencil         7
Pen            6 
```

SQL 代码：

```
SELECT ItemName, SUM(Qty) 
FROM Table
GROUP BY ItemName 
```

在您的查询中使用`GROUP BY ItemName`将为您提供输出：

```
ItemName       Qty
Pen            10
Pencil         7 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-30T13:05:38.390

```
SELECT SUM(column_name) FROM table_name 
```

这是最好的例子！

# c# - Ninject - 类库项目中静态类中的内核

> ID：11722175
> 
> 赞同：3
> 
> 时间：2012-07-30T13:03:00.497
> 
> 标签：c#, dependency-injection, inversion-of-control, ninject

[我和Ninject - 静态类中的内核](https://stackoverflow.com/questions/7628365/ninject-kernel-in-static-class)有同样的问题？ 但我没有使用 WCF，只有一个类库。

拥有静态内核还是随时实例化它更好？我的 UI（现在在 MVC 应用程序中）使用服务，所以它会调用静态内核吗？最好的方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T13:14:55.437

使用 IoC 时，首选方法是尽可能少地使用内核。应该在初始化时使用它来连接所有东西，然后快速而安静地淡入背景。因此应用了“好莱坞原则”：“不要调用 IoC 容器，让它调用你！”。包含内核的静态类就是所谓的服务定位器反模式，请参见[此处](http://blog.ploeh.dk/2010/02/03/ServiceLocatorIsAnAntiPattern.aspx)。

简而言之：您将希望使用构造函数注入来注入依赖项，而不是每次都创建内核或引用静态类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T11:46:26.287

Mark Seemann 在他的博客中说[http://blog.ploeh.dk/2011/07/28/CompositionRoot.aspx](http://blog.ploeh.dk/2011/07/28/CompositionRoot.aspx) 只有应用程序应该有组合根。库和框架不应该。

这就是我的问题的答案，我更好地理解了作文根模式。感谢 Akim 和 Alexander R 的帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T13:20:14.527

MVC 扩展有[Ninject](https://github.com/ninject/ninject.web.mvc)，那么为什么不将它用于 MVC UI 呢？

并且 WCF 服务可以有自己的[*组合根*](http://blog.ploeh.dk/2011/07/28/CompositionRoot.aspx)。当然，您可以`NinjectModule`在两者中重用一个实现。所以不需要`Kernel`是静态的，只需`NinjectModule`在每个*组合根*中重用实现即可。

例如，您的应用程序配置：

```
public class ApplicationModule : NinjectModule
{
    public override void Load()
    {
        Bind<IAbstraction>().To<Implemtation>();
        //  and other general bindings
    }
} 
```

[带有 Ninject 的 MVC](https://github.com/ninject/ninject.web.mvc)：

```
public class YourWebApplication : NinjectHttpApplication
{
  public override IKernel CreateKernel()
  {
     var kernel = new StandardKernel(new ApplicationModule ());

     // add some UI specific bindings, for example authorization
     kernel.Bind<IAuthProvider>().To<AuthProvider>();

     // binding between service contract and implementation/client
     kernel.Bind<IServiceContract>().To<WcfServiceClient>();

     return kernel;
  }
} 
```

和[WCF 与 Ninject](https://github.com/ninject/ninject.extensions.wcf/blob/Maintenance_2.2/src/Examples/WcfTimeService/Global.asax.cs)：

```
public class Global : NinjectWcfApplication
{
    protected override IKernel CreateKernel()
    {
        var kernel = new StandardKernel(new ApplicationModule ());

        // add some service specific bindings, for example authorization
        // service has also some other small services that i call providers 
        // so ex Service 1 : has Iprovider1 Iprovider2 Iprovider3 
        kernel.Bind<IProvider1>().To<Provider1>();
        kernel.Bind<IProvider2>().To<Provider2>();
        kernel.Bind<IProvider3>().To<Provider3>();

        return kernel;
    }
} 
```

# c# - 在 C# winform 中搜索 pdf

> ID：11722176
> 
> 赞同：0
> 
> 时间：2012-07-30T13:03:03.367
> 
> 标签：c#, winforms, pdf, solr, ghostscript

我需要使用 C# 在 Visual Studio 2010 中创建一个 winform，它在目录中搜索 pdf 文件，然后在 pdf 中搜索某些文本。例如，用户可以在 winform 中输入“John Smith”。该程序需要在给定目录中的所有 pdf 中搜索文本“John Smith”。我目前没有 Adob​​e Acrobat，可能无法购买它或任何非免费插件。我被告知要查看 Apache Solr 和 Ghostscript，但看不到如何在 winform 中使用它们。我已经搜索了很多并看到了很多建议，但是找不到任何关于如何设置 winform 来搜索 pdf 的简单示例或教程。有人可以为我提供一些关于如何在 winform 中搜索 pdf 的示例代码吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T13:07:11.137

[要在 PDF 中搜索特定文本，您可以使用位于http://sourceforge.net/projects/itextsharp/](http://sourceforge.net/projects/itextsharp/)的 ITextSharp 库

这是一个简单的例子

```
var reader = new PdfReader(pdfPath); 
StringWriter output = new StringWriter();  

for (int i = 1; i <= reader.NumberOfPages; i++) 
    output.WriteLine(PdfTextExtractor.GetTextFromPage(reader, i, new SimpleTextExtractionStrategy()));

//now you can search for the text from outPut.ToString(); 
```

# mysql - 我可以使用 ColdFusion 查询 MySQL IN 语句中使用的字符串吗？

> ID：11722181
> 
> 赞同：1
> 
> 时间：2012-07-30T13:03:19.253
> 
> 标签：mysql, string, coldfusion, query-parameters

我正在运行 MySQL 5.0.88 和 Coldfusion8。

在一个表单中，我从一个表中获取了一些记录 ID 并将它们发送到服务器。字符串将如下所示：

```
 9900000002985,9900000003180,9900000003203,9900000003487,9900000003579 
```

然后我将它传递给 MySQL，最初是这样的：

```
SELECT bk.*
   FROM header AS bk
   WHERE 1
   AND bk.iln_kaeufer IN ( #passed_in_string# ) 
```

我一直在尝试像这样使用 cfqueryparam：

```
<cfqueryparam cfsqltype="cf_sql_longvarchar" value="#passed_in_string#"> 
```

但这会导致 ColdFusion 出现错误。而如果我直接在 MySQL 中运行查询，它就可以工作。所以它必须与我的 cfqueryparam 声明有关。

我从远程位置通过 AJAX 传递此表单。因此，除了 AJAX 提交错误之外，我没有收到任何错误消息。

**问题**：
如果我不能使用上面的字符串，我该如何保护`cfqueryparam`？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-30T13:11:04.187

您想使用 的`list`和`separator`参数`cfqueryparam`。

```
SELECT bk.*
  FROM header AS bk
  WHERE 1
    AND bk.iln_kaeufer IN ( <cfqueryparam list="yes" separator="," cfsqltype="cf_sql_longvarchar" value="#passed_in_string#">) 
```

# java - RMI：如何创建线程？

> ID：11722187
> 
> 赞同：1
> 
> 时间：2012-07-30T13:03:41.070
> 
> 标签：java, log4j, aspectj

我很难理解哪个线程执行特定的方法。服务器端有什么方法吗？我是 RMI 的新手。

你好客户：

```
public class HelloClient 
{
    Random rand = new Random();

    public static void main(String[] args) 
    {
        Thread.currentThread().setName("Thread of a client");
        if(System.getSecurityManager() == null) 
        {
            System.setSecurityManager(new RMISecurityManager());
        }

        HelloClient hc = new HelloClient();
        hc.methodToMeasureEnglish();
    } 

    void methodToMeasureEnglish()
    {
        try
        {
            Thread.sleep(Math.abs(rand.nextInt()%4000));
            Registry reg = LocateRegistry.getRegistry("localhost", 6666);
            HelloIF hello = (HelloIF) reg.lookup("HELLO"); 
            System.out.println(hello.sayHelloEnglish());
        }
        catch( Exception e ) 
        {
            e.printStackTrace();
        }
    }
} 
```

你好：

```
public class Hello extends UnicastRemoteObject implements HelloIF 
{
    public Hello(String name) throws RemoteException
    {
        try 
        {
            Registry registry = LocateRegistry.createRegistry(6666);
            registry.rebind(name, this);
        }
        catch(Exception e) 
        {
            e.printStackTrace();
        }
    }

    public String sayHelloEnglish() 
    {
        return "GOOD MORNING";
    }
} 
```

你好IF

```
public interface HelloIF extends Remote 
{
    public String sayHelloEnglish() throws RemoteException;
} 
```

你好服务器

```
public class HelloServer 
{ 
        public static void main(String[] args) throws Exception 
        {
            Thread.currentThread().setName("Server Thread");
            if(System.getSecurityManager() == null) 
            { 
                System.setSecurityManager(new RMISecurityManager()); 
            }
            Hello myObject = new Hello("HELLO");
            System.out.println( "Server is ready..." );
        }

} 
```

我使用 RMI 对吗？

我添加了 AspectJ 类

```
@Aspect
public class MeasureAspect 
{  
    private static Logger logger = Logger.getLogger(MeasureAspect.class);

    @Around("call(void method*())")  
    public Object condition2(ProceedingJoinPoint joinPoint) throws Throwable 
    {   
        PropertyConfigurator.configure("log4j.properties");
        Object res = joinPoint.proceed();
        logger.info("Thread method " + Thread.currentThread().getName());     
        return res;
    }  

    @Around("call(String say*())")  
    public Object condition1(ProceedingJoinPoint joinPoint) throws Throwable 
    {   
        PropertyConfigurator.configure("log4j.properties");
        Object res = joinPoint.proceed();
        logger.info("Thread say " + Thread.currentThread().getName());   
        return res;
    }  

} 
```

所有日志都来自客户端线程。你能解释一下女巫线程执行我的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T22:17:46.957

RMI 规范说您不能对执行哪些线程远程方法做出任何假设。具体来说，这意味着几件事：

1.  你不能假设它是单线程的。
2.  您不能假设来自同一个客户端线程的连续调用将在同一个服务器线程中执行。
3.  你不能假设它都会在主线程中执行，这没有任何意义。

在实践中，如果服务器上有线程池（Oracle JVM 不这样做，但我相信 IBM 会），和/或客户端的集合池（Oracle JVM 这样做，不了解 IBM），每个方法调用在它自己的线程上执行。

# sql - SQL查询计算同一张表的列之间的关系

> ID：11722201
> 
> 赞同：2
> 
> 时间：2012-07-30T13:04:50.697
> 
> 标签：sql, join

我有一个表，其中包含, ,`exchange_rate`之类的条目。例如（不要担心费率的准确性）：`currA``currB``rate`

```
currA       currB    rate   rowId
 USD         USD     1        1
 USD         GBP     0.87     2
 ZWD         EUR     0.5      3
 EUR         KRN     1.5      4
 RUP         USD     0.78     5
 YEN         FRA     0.67     6
 INR         RUP     1.3      7
 FRA         USD     1.08     8
 KNR         USD     0.76     9
 GBP         YEN     1.4     10 
```

rate 显示`currA`wrt的转换率`currB`。示例：第二行表示`1 USD = 0.87 GBP`

现在，我想要每种货币兑美元的汇率。例如，要将 EUR 转换为 USD，我可以使用第 4、9 行。类似地，将 GBP 转换为 USD 可以将 1 除以 0.87（第 2 行的结果），或者我可以从第 10、6 和 8 行计算这个汇率。

是否有任何 SQL 查询可以帮助我做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T14:57:44.070

使用递归 CTE 可以获得结果，但如果您不使用 sql-server（2005 或更高版本），这可能不起作用。

```
declare @data table (currA varchar(3), currB varchar(3), rate decimal(4,2), rowId int)
insert into @data values
('USD', 'USD', 1, 1),
('USD', 'GBP', 0.87, 2),
('ZWD', 'EUR', 0.5, 3),
('EUR', 'KRN', 1.5, 4),
('RUP', 'USD', 0.78, 5),
('YEN', 'FRA', 0.67, 6),
('INR', 'RUP', 1.3, 7),
('FRA', 'USD', 1.08, 8),
('KRN', 'USD', 0.76, 9),
('GBP', 'YEN', 1.4, 10)

-- GBP to USD
-- EUR to USD
declare @from varchar(3) = 'GBP'
declare @to varchar(3) = 'USD'

;with cte as
(
    select
        lvl = 1,
        rt.currA,
        rt.currB,
        rt.rate,
        rt.rowId
    from @data rt
    where rt.currA = @from

    union all

    select
        lvl = t.lvl + 1,
        ct.currA,
        ct.currB,
        ct.rate,
        ct.rowId
    from @data ct
    inner join cte t on t.currB = ct.currA
    where ct.currA <> ct.currB
    and ct.currB <> @to 
)

select @from, @to, exp(sum(log(rate)))
from
(
select currA, currB, rate, rowId from cte
union all 
select currA, currB, rate, rowId 
from @data 
where currA in 
(
    select cte.currB 
    from cte 
    where lvl in 
    (
        select MAX(lvl) 
        from cte
    )
) and currB = @to
)t 
```

所以 GBP -> USD 的结果是 1.01304

# xml - 覆盖 for-each xslt

> ID：11722202
> 
> 赞同：2
> 
> 时间：2012-07-30T13:04:52.640
> 
> 标签：xml, xslt

我有一个 xml 文件，比方说：  

```
<parent>
    <notimportant1>
    </notimportant1>.    
    <notimportant2>
    </notimportant2>.   
     ....
    <child>
        <grandchild>.   
         ....
        </grandchild>
        <grandchild>
         ....
        </grandchild>. 
         ....
        <notimportant3>
        </notimportant3>
    </child>
<parent> 
```

还有xsl文件：

```
<xsl:template match="parent">.   
      ...
      ...
     <xsl:for-each select="child">.    
         <xsl:for-each select="grandchild">
          ...
         </xsl:for-each>.    
     </xsl:for-each>
      ....
</xsl:template> 
```

现在，我必须创建新`xsl`文件，该文件只能导入/包含这个现有的`xsl`.

是否可以覆盖这个 for-each 行为，以便我只能显示一些预定义的文本/链接来代替它？

我无法修改现有的 xsl，并且我想使用模板中的所有其他内容 - 不能只定义具有更高优先级的新 xsl。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T13:40:52.410

您可以重新设计原始样式表以使用`xsl:apply-templates`而不是`xsl:for-each`. 像这样的东西：

```
<xsl:template match="parent">
  ...   
  ...
  <xsl:apply-templates select="child"/>
  ....
</xsl:template>

<xsl:template match="child">
   <xsl:apply-templates select="grandchild"/>    
</xsl:template>

<xsl:template match="grandchild">
   ...
</xsl:template> 
```

然后，当您将此样式表导入另一个样式表时，您可以覆盖匹配的模板`child`或`grandchild`根据需要覆盖。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T13:09:21.567

这里的策略是定义第二个模板匹配`parent`以确保导入的模板永远不会运行（因为您无法更改导入的模板，也无法在匹配后抑制其行为）。

默认情况下，导入模板的优先级低于本地模板，因此只需定义另一个模板即可解决此问题。

您还可以通过为模板赋予`priority`属性来控制优先级。它越高，匹配节点集的可能性就越大（意味着较低优先级的节点集不会匹配）。

模板模式也是一种选择，但我认为你已经足够在这里进行了。

[XML 转换 - xsl:template（优先级）](http://www.edankert.com/transforms/xslt.template-priority.html)

[XSLT 元素](http://www.w3schools.com/xsl/el_template.asp)

# instance - JavaFX2 FXML如何动态添加元素（例如按钮）

> ID：11722208
> 
> 赞同：5
> 
> 时间：2012-07-30T13:05:10.497
> 
> 标签：instance, javafx-2, building, fxml

所以，我想做的是，使用 fxml 创建一个自定义元素，然后将该元素的几个实例添加到一个容器中，比如 GridPane。“新”运算符对我不起作用，因为我想使用 @fxml 注释器来访问元素。克隆会很好，但它不起作用。FXMLLoader 在使用 for() 结构添加许多元素时非常慢。如果我可以将引用写入 fxml 父节点，那将是完美的，它可以从控制器调用。

对不起...这里是伪...

```
public class Controller implements Initializable {

    @FXML
    private VBox stack;

    @FXML
    private Button button;

    @FXML
    private void Change(KeyEvent event) throws IOException {     
        for (int i=0; i<10; i++){
            stack.getChildren().add(button);   
        }
    }

} 
```

将THE按钮添加到VBox是没有问题的。但是在 for-construct（添加多个按钮）中它失败了。我可以在 for 构造中使用 new 运算符，但我想知道这是否是唯一的可能性。我认为必须有另一种方法，例如使用@FXML 注释器来“获取”按钮然后复制它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-30T19:08:03.443

我相信它失败了，因为您试图一遍又一遍地添加相同的按钮。在 for 循环中，每次运行循环中的代码时，您都需要创建一个按钮的实例。

就像是：

```
@FXML
private void Change(KeyEvent event) throws IOException {     
    for (int i=0; i<10; i++){
        stack.getChildren().add(new Button("test")) ;   
    }   
} 
```

如果我误解了你，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T02:15:38.033

如果要访问该按钮，只需为其创建类变量。

```
private Button okButton = null;
private Button cancelButton = null; 
```

在 initialize() 方法中，初始化 Button 并添加到容器中。

```
okButton = new Button("OK");
cancelButton = new Button("Cancel");
stack.getChildren().addAll(okButton, cancelButton) ; 
```

然后你可以处理按钮动作事件：

```
cancelButton.setOnAction(new EventHandler<ActionEvent>() {
        public void handle(ActionEvent arg0) {
            try {                    
               //close screen
               ((Button)arg0.getSource()).getScene().getWindow().hide();
            } catch (Exception e) {

            }
        }
    }); 
```

# android - 更改选项卡布局中线条的颜色

> ID：11722216
> 
> 赞同：2
> 
> 时间：2012-07-30T13:05:38.827
> 
> 标签：android, tabview

我正在关注本教程： [http](http://www.androidhive.info/2011/08/android-tab-layout-tutorial/) : //www.androidhive.info/2011/08/android-tab-layout-tutorial/ 我想更改 tabLayout 的视图。我通过以下方式更改了选项卡式按钮的颜色：

> tabHost.getTabWidget().getChildAt(i).setBackgroundColor(Color.parseColor("#878787"));

但是我需要做一个更改，如何更改选项卡式按钮下的这条橙色细线？： ![橙色细线](../Images/4096d433ef2cfdd54a824ec6c6c23fb9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T13:10:40.730

最好禁用它，因为当您尝试更改它的颜色时，我认为没有线条效果是显示线条和标签颜色被合并。

您可以使用 android:tabStripEnabled XML 属性禁用它。

在 AndroidManifest.xml 中：

```
 <activity android:name=".ActivityName" android:theme="@style/tabTheme"/> 
```

在值/styles.xml 中：

```
 <style name="tabTheme" parent="android:style/Theme"> 
      <item name="android:tabWidgetStyle">@style/Widget.TabWidget</item>
 </style> 

 <style name="Widget.TabWidget" parent="android:Theme"> 
      <item name="android:tabStripEnabled">false</item>
 </style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-05T12:19:30.470

或者你可以在你的代码中尝试这个；

```
TabHost tabHost = getTabHost();
tabHost.getTabWidget().setStripEnabled(false); 
```

# r - 如何在 R 中制作二维散点图，第三维表示反映 z 值的色谱？

> ID：11722218
> 
> 赞同：0
> 
> 时间：2012-07-30T13:05:44.213
> 
> 标签：r

我正在尝试在 R 中制作一个二维散点图，其中第三维表示色谱反射值。我已经为此工作了 2 周，但没有任何博客有帮助。这是我的数据集：

```
x=c(0,0,0,0,264,330,594,726,825,825,2145,2475,3630,5082,8250,10725)
y=c(450,540,2250,630,540,2160,1170,2340,1080,738,540,648,900,900,2340,1152)   
z=c(.017778,0,.079365,.037333,0,0,.052991,0,0,.009259,.048148,0,0,0,.004274,.003472) 
```

我试过这段代码...

```
jet.colors <-colorRampPalette(c("#00007F", "blue", "#007FFF", "cyan","#7FFF7F", "yellow", "#FF7F00", "red", "#7F0000"))

plot(x,y, col=jet.colors(12)[z], ylim=c(0,100), pch=20, cex=2)

legend(8.5,90, col = jet.colors(12)[z], legend=z, pch=15) 
```

...但是当我这样做时没有出现任何点，只是一个空白的 xy 平面。我在 ggplot2 包上取得了一些成功，但它看起来很难看，我希望能够使用简单的 plot 命令来做到这一点。我已经成功地从 scatterplot3d、wireframe 和 countours 制作了 3d 图，但是这些图又过于复杂和丑陋了 有人请帮助我知道我缺少一些简单的东西，比如我的 z 值可能为零或小于一。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T13:18:13.280

我真的不知道如何解释它，除了`cut`在这里可以工作。它将您的数值变量转换为一个因子，然后它就可以工作了。PS ggplot2 恕我直言，很漂亮，也许你没有正确使用它（它非常灵活）：

```
plot(x,y, col=jet.colors(12)[cut(z, 12)], pch=20, cex=2) 
```

**编辑：**我想我可以解释一下，我看到 plannapus 已经尝试过了。当您使用`[]`您正在索引的符号时。索引需要一个整数输入，但您提供了一个连续输入。通过将其转换为一个因子，您可以为其赋予整数属性（对不起，解释的屠杀，但根据非程序员，这是 R）。您可以在下面看到这一点：

```
> jet.colors(12)[cut(z, 12)]
 [1] "#0039FF" "#00007F" "#7F0000" "#50FFAD" "#00007F" "#00007F" "#FF9600" "#00007F" "#00007F" "#0000DC"
[11] "#FFF300" "#00007F" "#00007F" "#00007F" "#00007F" "#00007F"

> jet.colors(12)[as.numeric(cut(z, 12))]
 [1] "#0039FF" "#00007F" "#7F0000" "#50FFAD" "#00007F" "#00007F" "#FF9600" "#00007F" "#00007F" "#0000DC"
[11] "#FFF300" "#00007F" "#00007F" "#00007F" "#00007F" "#00007F" 
```

注意输出是一样的吗？

# javascript - 如何将 Tokbox flash 附加到动态 div

> ID：11722220
> 
> 赞同：1
> 
> 时间：2012-07-30T13:05:50.510
> 
> 标签：javascript, opentok, tokbox

我想知道是否有办法将动态 div id 传递给 TB.initPublisher。我使用 Basic 教程作为构建框架，Flash 附加在正文的末尾，而不是我想要的 div 中。我目前正在尝试的是：

```
session.addEventListener('sessionConnected', sessionConnectedHandler);

function sessionConnectedHandler(event, chatBoxPublisherDiv) {
publisher = TB.initPublisher(chatBoxPublisherDiv);
session.publish(publisher);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T13:11:03.870

尝试这个

```
function sessionConnectHandler(event) {
    var publisherProperties = {width: 400, height:300, name:"Bob's stream"};
    publisher = TB.initPublisher(API_KEY, 'publisher', publisherProperties);
    session.publish(publisher);
} 
```

`'publisher'`您希望内容出现的元素的 id 在哪里

[此处的文档用于`initPublisher`方法](http://www.tokbox.com/opentok/api/tools/js/documentation/api/TB.html#initPublisher)

# c# - C# UDP 多播

> ID：11722221
> 
> 赞同：0
> 
> 时间：2012-07-30T13:05:52.507
> 
> 标签：c#, udp, windows-ce, multicast

[我需要像这里](http://msdn.microsoft.com/en-us/library/system.net.sockets.multicastoption.aspx#Y1400)描述的那样的多播发送者和接收者

虽然我的多播发送器是桌面应用程序，但接收器是 PDA 设备并使用紧凑型框架（Windows CE 5.0）。我应该从哪里开始挖掘？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T14:55:19.593

我会首先研究套接字多播。它不是特定于 CE 的，因此总体上理解它会有所帮助。这可能是从 C# 特定的角度来看的。例如： http: [//www.codeproject.com/Articles/1705/IP-Multicasting-in-C](http://www.codeproject.com/Articles/1705/IP-Multicasting-in-C)提供了很好的介绍。与[http://www.jarloo.com/c-udp-multicasting-tutorial/](http://www.jarloo.com/c-udp-multicasting-tutorial/) 一样，我没有注意到为 CE 执行此操作有太大区别；但可能会有一些细微差别。熟悉该技术后，开始确保 CE 5 支持各个类型和方法。

# c# - iis 7.5 - 只允许一个域名用户查看站点

> ID：11722224
> 
> 赞同：0
> 
> 时间：2012-07-30T13:06:00.320
> 
> 标签：c#, .net, iis, permissions, active-directory

我希望只有 1 个域名用户查看我的网站 (username1)。到目前为止，我无法让它正常工作。要么每个人都可以访问，要么没有人可以访问。

网络配置：

```
 <authentication mode="Windows"> 
```

IIS设置：

```
Anonymous - disabled
Windows Authentication - enabled 
```

站点文件夹权限设置：

```
IIS_USER (domain\iis_user) - no access
domain\username1 - read access 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T13:11:35.383

您需要`identity impersonate`在 web.config 中设置为 true。这会将用户信息传递给`WindowsIdentity`对象（而不仅仅是`User`对象）。该`WindowsIdentity`对象用于确定对文件和文件夹的访问。

```
<configuration>
  <system.web>
    <identity impersonate="true" />
  </system.web>
</configuration> 
```

更多信息可以在[http://msdn.microsoft.com/en-us/library/134ec8tc.aspx找到](http://msdn.microsoft.com/en-us/library/134ec8tc.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T13:25:04.247

“找到适合特定用户帐户的第一个访问规则”尝试使用 web.config。并把 domain\username1 先允许，然后`<deny users="*"/>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T13:16:34.043

您可以添加授权规则以允许或拒绝 IIS 中的特定组/人员。文件权限仍然适用。另外，顺便说一句，我们还允许摘要式身份验证。YMMV。

这是有关 IIS 授权规则的演练。

[http://www.iis.net/ConfigReference/system.webServer/security/authorization](http://www.iis.net/ConfigReference/system.webServer/security/authorization)

# mysql - 在 Rails 应用程序中设置 MySQL

> ID：11722225
> 
> 赞同：2
> 
> 时间：2012-07-30T13:06:13.757
> 
> 标签：mysql, ruby-on-rails, database, ruby-on-rails-3, sqlite

我已经开始了一个新的 rails 3.2 项目，默认情况下它使用 SQLite。

我的数据库中还没有数据，现在我打算使用 MySQL，所以我在 Gemfile 中添加了 gem 'mysql2' 并运行了 'bundle install'。

现在，

我有点不确定该怎么做。我读过我应该只更改`database.yml`.

但我想知道为什么我应该输入 MySQL 的用户和密码值。

是否应该在 MySQL 中手动设置这些值？

如果是这样，这是如何完成的？为什么 SQLite 不要求用户和密码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T13:26:41.700

`database.yml`这是mysql 作为 DB的文件片段。请确保`mysql2`在 Gemfile 中添加并运行`bundle install`

```
# Ensure the MySQL gem is defined in your Gemfile
#   gem 'mysql2'
#
# And be sure to use new-style password hashing:
#   http://dev.mysql.com/doc/refman/5.0/en/old-client.html

development:
  adapter: mysql2
  encoding: utf8
  reconnect: false
  database: example_development
  pool: 5
  username: root
  password: root 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T13:14:49.353

[http://www.tutorialspoint.com/ruby-on-rails/rails-database-setup.htm](http://www.tutorialspoint.com/ruby-on-rails/rails-database-setup.htm)显示了您需要的语法的快速示例。你真的很接近，你只需要通过授予它对你的数据库的权限来创建一个新的 mysql 用户。

顺便说一句，这是我更喜欢使用 postgresql 开发的原因之一。配置 pg_hba.conf 以向本地用户授予权限后，您可以省略 database.yml 中的用户名和密码字段。当你将它与部署到 heroku （他们用他们的生产值覆盖你的 database.yml ）结合起来时，它使管理（和共享）这个文件变得非常简单。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T13:19:52.140

1.  使用 rails => [Rails + MySQL 配置 MySQL](http://cakebaker.42dh.com/2009/03/13/generating-a-rails-project-configured-to-use-mysql/)
2.  为什么 SQLite[在 sqlite3 中不询问用户名/密码 => 用户名](https://stackoverflow.com/questions/1807320/username-in-sqlite3)

# ruby-on-rails - 无法使 ruby -electric.el 在 emacs 中工作

> ID：11722226
> 
> 赞同：0
> 
> 时间：2012-07-30T13:06:15.290
> 
> 标签：ruby-on-rails, ruby, emacs

我已经安装了 ruby​​-electric.el 来启用 def 和 end 的自动配对。我在 .emacs 文件中需要它并评估了缓冲区。

但是，当我在缓冲区中键入“def”时，我没有看到添加了相应的“结束”块。我如何测试我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T13:51:12.770

您需要在`ruby-mode`缓冲区中启用它。例如，这种方式：

```
(add-hook 'ruby-mode-hook 'ruby-electric-mode) 
```

键入 Space after`end`时应添加关键字。`def`

顺便说一句，如果您使用的是来自[此存储库](https://github.com/qoobaa/ruby-electric)的版本，则不需要执行上述操作，它已经在`autoload`表单中添加了钩子。这也是打包在[Tromey 的 ELPA 存储库](http://tromey.com/elpa/index.html)中的版本。

# xpages - 为什么我需要使用@Text 来显示日期字段？

> ID：11722232
> 
> 赞同：0
> 
> 时间：2012-07-30T13:06:30.453
> 
> 标签：xpages

我有一个具有以下公式的计算字段。

```
var time = "";
if(@IsNewDoc()==1) time = @Now();
else time = @Text(@GetField("FormCreated"));
return time; 
```

我可以让它工作的唯一方法是用@Text 包装@GetField("FormCreated")。计算字段设置为 DateTime，FormCreated 是文档中的实际日期/时间值。

为什么@Now 不需要@Text？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T21:21:22.137

当您使用@GetField 时，您将获得一个NotesDateTime 并且@Now 返回一个java 日期。试试这个代码

```
var time = "";
if(@IsNewDoc()==1){
 time = @Now();
}else{
var time2:NotesDateTime = @GetField("FormCreated")[0];
time=time2.toJavaDate();
}
return time; 
```

更新了代码并在 @GetField 行的末尾添加了 [0] 以从返回的向量中获取第一个条目。

# php - 通过json编码AJAX发送和接收imagepng输出

> ID：11722238
> 
> 赞同：3
> 
> 时间：2012-07-30T13:07:05.017
> 
> 标签：php, ajax, json, uiimagepngrepresentation

我使用 PHP GD 库创建了一个 PNG 图像，根据用户输入添加了一些文本，而不是保存它，我想在用户提交更改之前显示它。

他们会添加一些单词，更改字体等，因此需要显示他们的更改。我让它工作的唯一方法是将图像保存到服务器，但它会为用户所做的数十次细微更改保存数十张图像。我需要覆盖文件，或者如果合适的话，请执行以下想法。这个想法是创建一个临时文件来操作。

那么，如何将它发送到“成功回调”，就像我处理的其他变量一样？我阅读了有关如何使用的信息`ob_get_contents()`，我相信这应该以某种方式临时存储图像。这是它的工作原理吗？

如何在表单页面（而不是处理 PHP 页面）上显示图像，这是防止在用户提交之前保存到服务器的好计划吗？

```
// more image manipulation code above

ob_start();
imagepng( $my_img );
$imageData = ob_get_contents();
ob_clean(); 

$results = array(
'price' => $_GET['priceX'],
'imageprocessed' => base64_encode($imageData) <<<  EDIT change based on answer.
);

$json = json_encode($results);
echo $json;
?> 
```

编辑：这是成功回调中用于接收 base64_encode 的 javascript。

```
<script type="text/javascript">
function doGen(){
var priceX = $('#couponprice').val();

$.get('processimage.php',
{priceX:priceX}, 
function(data) {
var imgFldr = '/images/';                   
data = $.parseJSON(data);
$('.price-placeholder').html(data.price);
var imageCallback = (data.couponnamecall);
$('#couponbuilt img').attr('src', 'data:image/jpeg;base64,' + imageCallback);
// ...
});
return false;
};
</script> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-30T13:12:51.190

你可以`base64encode($imageData)`。

在客户端，您只需从 base64 编码数据创建一个数据 url 并将其传递到图像标签的 src 属性中。

我测试了它：

PHP 代码

```
ob_start();
imagepng($my_img);
$imageData = ob_get_contents();
ob_clean(); 

$results = array(
  'price' => $_GET['priceX'],
  'image' => base64_encode($imageData)
);

$json = json_encode($results);
echo $json; 
```

Javascript代码：

```
$.getJSON("/ajax-script.php", function(data) {
  $("#element").append($("<img />").attr('src', 'data:image/png;charset=utf8;base64,' + data.image));
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T13:24:33.310

为此，您不需要 json 或 XHR ('ajax')。

最简单的方法是简单地动态创建图像，并通过将图像的 src 更改为动态生成图像的 PHP 文件来请求新图像。

您可以通过多种方式做到这一点。这里描述了最简单的方法：如果表单中的数据不多（没有千字节的文本等），那么您可以简单地将预览图像的 src 设置为生成 PNG 的脚本的 URL。所以你的 img src 是一个 PHP 脚本，而不是一个存储的静态 png 文件。

确保您的接收 PHP 脚本发送正确的标题 (image/png)，然后您就可以开始了。您需要一些 JavaScript 来组装 URL，并将其放入 img src。

如果您想让图像永久化，只需在 url 中添加一个额外的名称/值对，例如 storepermanent=yes

# mysql - MYSQL 选择其中计数 > 1

> ID：11722245
> 
> 赞同：3
> 
> 时间：2012-07-30T13:07:44.927
> 
> 标签：mysql, count

需要执行查询以查找第 3 列值计数 > 1 的行。示例：

桌子：

```
 col1   col2    col3  
------------------------  
1\.   val1   val2    val3
2\.  val11  val21    val3
3\.  val12  val22   val31
4\.  val13  val23   val32
5\.  val14  val24   val32 
```

结果将是第 1,2,4,5 行，因为我们在 col3 中有 count > 1 的值

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-30T13:11:28.287

您的问题非常不清楚，这可能是您要问的：

```
SELECT COUNT(col3) as countCol3
FROM table
GROUP BY col3
HAVING countCol3 > 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T15:20:17.763

这是一个可以帮助您的答案。我已经包含了一些示例数据，以帮助其他会发现一些示例数据有用的人：

```
drop table if exists valTable;

create table valTable
(
id int unsigned primary key auto_increment not null,
col1 varchar(50),
col2 varchar(50),
col3 varchar(50)
);

insert into valTable (col1,col2,col3) values ('val1','val2','val3');
insert into valTable (col1,col2,col3) values ('val11','val21','val3');
insert into valTable (col1,col2,col3) values ('val12','val22','val31');
insert into valTable (col1,col2,col3) values ('val13','val23','val32');
insert into valTable (col1,col2,col3) values ('val14','val24','val32');

select vt.*
from valTable vt
where vt.col3 in
(select col3Multi from (
select col3 col3Multi,count(*) as c
from valTable
group by col3
having c > 1) t ); 
```

# cordova - Sencha touch 2 - 背景图片 url 与 base64 编码

> ID：11722247
> 
> 赞同：1
> 
> 时间：2012-07-30T13:07:50.807
> 
> 标签：cordova, sencha-touch, sencha-touch-2, sencha-touch-theming

我在 sencha touch 2 中构建了一个 phonegap 应用程序。一切正常，但我注意到在加载图像/图标时切换选项卡时会出现短暂的挂起。

我原以为它会是即时的，因为图像都包含在应用程序中。

我将图像加载为 css 背景图像。

作为测试，我拍摄了其中一张图像并将其转换为 base64 编码字符串并将其放在 css 中。没有不同。

phonegap 应用程序是这样的吗？或者有没有办法让图像立即加载？预加载？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T14:48:27.117

You can do this using native javascript, see my code example below

```
var me = this; 
me.image = new Image();
me.image.src = 'test.jpg';
me.image.onload = function() {
    console.log("Image Loaded");
} 
```

You could apply this to multiple images by creating an array of image sources and looping through them to utilize the above code.

# objective-c - 带有对象名称的 RestKit PUT

> ID：11722248
> 
> 赞同：2
> 
> 时间：2012-07-30T13:07:50.907
> 
> 标签：objective-c, json, rest, restkit

我正在开发一个与用 Java 编写的 Web 服务器交互的应用程序。该服务与我的 iOS 应用程序上的 RestKit 框架一起使用。

**来自**服务器的JSON 字符串

```
{"object":{"value":"key"}} 
```

JSON字符串**到**服务器

```
{"value":"key"} 
```

从服务器发送到应用程序使用前面的对象名称，但从应用程序到服务器的方式不起作用，因为缺少对象名称。

有没有办法将 ObjectName 添加到我的 RestKitMapping 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T13:32:29.050

自己发现了：

```
[[RKObjectManager sharedManager].mappingProvider registerMapping:objectmapping withRootKeyPath:@"objectname"]; 
```

# apache-flex - Flex 桌面库项目找不到移动皮肤定义

> ID：11722249
> 
> 赞同：3
> 
> 时间：2012-07-30T13:07:50.890
> 
> 标签：apache-flex, mobile, adobe, skin

我正在尝试制作一个 Flex 桌面库项目，并在我的代码中抱怨这样的行：

导入 spark.skins.mobile.ButtonSkin；

我已经尝试导入所有看起来相关的 SWC，但我无法让这些编译错误消失。

导入 mobilecomponents.swc 使我可以消除 LabelItemRenderer 错误，但不能消除皮肤。

有人知道解决方案吗？或者我是否必须将任何引用皮肤的文件放入顶级应用程序中。

是的。我知道，最终我的最终库中可能不会有移动皮肤。目前只是试图让它编译为桌面运行，并且不想对代码进行数千次更改。

谢谢，

肖恩

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T13:21:03.637

我不得不这样做已经有一段时间了。但移动皮肤与移动组件位于单独的 SWC 中。在库项目中，不添加皮肤 SWC。有一次我想我什至在 Adob​​e Bug Base 中提出了请求，但在这一点上，我怀疑它是否会得到修复。

我认为最好的解决方案是手动将移动皮肤 SWC 添加到类路径中。它将位于：

```
[Path to Flex4.6 SDK]\frameworks\themes\Mobile\mobile.swc 
```

您也可以使用主题命令行参数。[不过，我不确定主题参数是否可用于图书馆项目]

```
 -theme="[Path to Flex4.6 SDK]\frameworks\themes\Mobile\mobile.swc" 
```

# java - JAVA 中的 POJO 和 DOJO 是什么？

> ID：11722251
> 
> 赞同：13
> 
> 时间：2012-07-30T13:08:00.217
> 
> 标签：java, pojo

我对 POJO 有很多疑惑。并通过一个小例子寻求明确的定义。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-07-30T13:10:34.807

**POJO**普通的旧 Java 对象。基本上是一个具有属性的类，它是 getter 和 setter。

```
public class User{
 private String name;
 private int age;

 public void setName(String name){
    this.name = name;
 }

 public String getName(){
    return this.name;
 }

 //same for age

} 
```

**DOJO**没听说过。一个 JavaScript 框架。:)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-30T13:11:15.243

pojo : 普通的旧 java 对象

dojo : [http://dojotoolkit.org/](http://dojotoolkit.org/) 一个 javascript ajax 框架虽然与 java 无关

编辑1：

例如。对于 pojo 类：

```
public Customer{
  private String name;
  private String surname;

  public String getName(){
    return name;
  }
  public String getSurname(){
    return surname;
  }
  public void setName(String name){
    this.name=name;
  }
  public void setSurname(String surname){
    this.surname=surname;
  }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-30T13:12:05.450

**POJO** =plain old java object == Java object，它对任何框架等没有技术依赖。

**DOJO** = 我只知道[这个](http://en.wikipedia.org/wiki/Dojo_Toolkit)javascript 框架...

# javascript - 扩展 Backbone.Collection/View/Models 的最佳方式

> ID：11722253
> 
> 赞同：1
> 
> 时间：2012-07-30T13:08:19.057
> 
> 标签：javascript, backbone.js

我需要使用一组函数来扩展backbone.collection：

例子：

```
var collection1 = Backbone.Collection.extend({});
var collection2 = Backbone.Collection.extend({}); 
```

应该有以下自定义方法：

```
console.log(collection1.method1); // function () {}
console.log(collection1.method2); // function () {} 
```

另一方面

```
var collection3 = Backbone.Collection.extend({}); 
```

不应该有这些方法。

```
console.log(collection3.method1); // undefined 
```

如何仅为 collection1 和 collection2 而不是为 collection3 扩展 Backbone.Collection？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-30T13:29:44.750

你的意思是这样的：

```
var CustomCollection = Backbone.Collection.extend({
    method1: function() {},
    method2: function() {}
});
var collection1 = CustomCollection.extend({});
var collection2 = CustomCollection.extend({});

var collection3 = Backbone.Collection.extend({}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-31T07:51:30.263

按照 Marionette 示例，您应该向对象类的原型属性添加属性或方法：

无论如何，以下代码等效于@anto_byrma。
但是这种方法的优点是您可以以相同的方式扩展集合或模型或视图。

```
var obj = {
    method1: function() {},
    method2: function() {}
};

var collection1 = Backbone.Collection.extend({});
var collection2 = Backbone.Model.extend({});
var collection3 = Backbone.Collection.extend({});

_.extend(collection1.prototype, obj);
_.extend(collection2.prototype, obj); 
```

# c++ - 这个结构试图做什么？

> ID：11722256
> 
> 赞同：2
> 
> 时间：2012-07-30T13:08:27.673
> 
> 标签：c++, struct

在以下`C++`代码中：

```
struct Features {
  int F1;
  int F2;
  int F3;
  int F4;
  Features(int F1,int F2,int F3,int F4)
  : F1(F1), F2(F2), F3(F3), F4(F4) { }
}; 
```

这部分是什么意思？

```
Features(int F1,int F2,int F3,int F4)
      : F1(F1), F2(F2), F3(F3), F4(F4) { } 
```

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-30T13:09:51.880

它使用构造函数的初始化列表初始化成员变量。如果构造函数参数的名称与数据成员的名称不同会更清楚：

```
Features(int a,int b,int c,int d)
      : F1(a), F2(b), F3(c), F4(d) { } 
```

对数据成员有一些命名约定是很有用的，这样它们就可以很容易地识别并与代码中的局部变量区分开来。示例是前缀`m_`或使用尾随`_`：

```
struct Features {
  int m_f1;
  int m_f2;
  int m_3f;
  int m_f4;
  Features(int f1,int f2,int f3,int f4)
  : m_f1(f1), m_f2(f2), m_f3(f3), m_f4(f4) { }
}; 
```

这两个构造函数都可以像这样使用：

```
Features f(11,22,33,44);
std::cout << f.m_f1 << "\n"; // prints 11
std::cout << f.m_f2 << "\n"; // prints 22
std::cout << f.m_f3 << "\n"; // prints 33
std::cout << f.m_f4 << "\n"; // prints 44 
```

请注意，已定义此构造函数的事实意味着编译器将不再提供默认构造函数。因此，如果您希望能够做到这一点：

```
Features f; 
```

那么你需要提供你自己的默认构造函数：

```
Features() : m_f1(), m_f2(), m_f3(), m_f4() {} // initializes data members to 0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T13:09:12.957

是成员变量初始化

你可以这样做：

```
Features(int F1,int F2,int F3,int F4)
{
    this->F1 = F1;
    this->F2 = F2;
    this->F3 = F3;
    this->F4 = F4;
} 
```

但

```
Features(int F1,int F2,int F3,int F4)
      : F1(F1), F2(F2), F3(F3), F4(F4) { } 
```

是首选，因为对于用户定义的类型，默认构造函数将自动调用并且会给您一些开销。如果您的成员变量没有默认构造函数，则有必要在初始化列表中初始化它们。常量字段也必须在初始化列表中初始化

而且我认为使用初始化列表更清楚

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T13:10:14.023

阅读[本教程](http://www.cprogramming.com/tutorial/initialization-lists-c++.html)。它应该回答你的问题。

# sql-server-2008 - 如何使用存储过程从两个不同的表中获取数据？

> ID：11722259
> 
> 赞同：0
> 
> 时间：2012-07-30T13:08:31.903
> 
> 标签：sql-server-2008, function, stored-procedures, join

我是新手，所以在这里遇到了一些麻烦

我有两张这样的桌子

**错误**

```
BugID | Title | ProjectName | CreatedBy 
```

**错误历史**

```
BughistoryID | BugID | Assignedto | ToStatus | FromStatus 
```

**员工表**

```
EmployeeID | EmployeeName | 
```

`[AssignedTo]`列 from`BugHistory`是`[EmployeeId]`in的外键`EmployeeTable`。

我想要一个选择语句，我必须在 gridview 中显示 bugs 表，其中包含表中`[AssignedTo]`的`[Tostatus]`列`BugHistory`。请问我如何为这两个过程使用函数？

在`Assigned to`列中我想要员工的姓名 - 我如何映射这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T13:12:20.790

听起来你想要这个：

```
SELECT b.BugId
    , b.Title
    , b.ProjectName
    , b.CreatedBy
    , e.EmployeeName As AssignedTo
    , bh.ToStatus
FROM Bugs b
INNER JOIN BugHistory bh
    ON b.bugid = bh.bugid
INNER JOIN Employee e
    ON bh.AssignedTo = e.EmployeeId 
```

# jquery - 覆盖效果在ie7上不起作用

> ID：11722260
> 
> 赞同：0
> 
> 时间：2012-07-30T13:08:39.777
> 
> 标签：jquery, background, internet-explorer-7, opacity

我创建了社交网络按钮，其中有一个 javascript 函数，可以创建覆盖 css hover 的灯泡*慢***点火**效果。它工作，但在**IE7**没有。奇怪的是“IE 调试”不报告错误。您可以在此链接上看到[http://www.matteowebdesigner.com/test/yesimove/](http://www.matteowebdesigner.com/test/yesimove/)

 ***代码说明：

```
<!-- html -->
<div class="social">
    <a href="http://www.facebook.com/yesimove" class="facebook" rel="external">facebook</a>
    <a href="https://twitter.com/yesimove" class="twitter" rel="external">twitter</a>
    <a href="#" class="google" rel="external">google</a>
</div> 
```

一些用于即时悬停效果的 CSS。

```
 #footer .social .facebook,
    #footer .social .facebook .fade {background-position:-80px -90px;}
    #footer .social .twitter,
    #footer .social .twitter .fade {background-position:-107px -90px;}
    #footer .social .google,
    #footer .social .google .fade{background-position:-134px -90px;}
    /*hover*/
    #footer .social .facebook:hover {background-position:-80px -117px;}
    #footer .social .twitter:hover {background-position:-107px -117px;}
    #footer .social .google:hover {background-position:-134px -117px;} 
```

此代码在*a*元素上创建两个*跨度*以覆盖背景和 :hover css。然后在第二个*跨度*中，它使用适当的*opacity:0*隐藏，然后使用 onmouseover opacity 将变为 1。

 ***```
/*= socialOver =*/
function socialOver(){
    var socials = $('#footer .social a');
    $('<span class="fade"></span><span class="fade"></span>').appendTo(socials);
    socials.each(function(i,o){
        var bpx = $(o).css('backgroundPositionX');
        $(o).find('.fade:eq(1)').css({
            backgroundPosition:bpx+' -117px',
            opacity:0
        });
    });
    socials.find('.fade').on('mouseover',function(e){
        $(this).stop(true,true).animate({
            'opacity':'1'
        },300);
    }).on('mouseout',function(e){
        $(this).stop(true,true).animate({
            'opacity':'0'
        },600);
    });
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T13:18:43.030

IE<=8 不理解 opacity 属性，它使用过滤器，你应该使用 jquery 的 fadeTo 方法来处理所有浏览器

```
socials.find('.fade').hover(function(){
    $(this).stop().fadeTo(300,1);
  }), function(){
    $(this).stop().fadeTo(600,0);
  }
); 
```

编辑：使用 hover 而不是 mouseover 和 mouseout

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T12:58:21.233

ie7 中的问题是，如果锚元素内部的元素设置为适当的位置：绝对，它们是不可见的，但如果使用位置：相对，您可以看到 javascritp 代码工作。所以对于 ie7 我使用了 ie7 hack ***:first-child+html**来为 ie7 创建一个不同的 css

```
/*Css*/
*:first-child+html #footer .social a .base {position:relative;top:-27px;cursor:pointer;} /*IE7 Hack*/
*:first-child+html #footer .social a .fade {position:relative;top:-54px;cursor:pointer;} /*IE7 Hack*/ 
```

然后我修改了 javascript，现在代码正在创建一个两个元素 span.base 和 span.fade

```
/*= socialOver =*/
function socialOver(){
    var socials = $('#footer .social a');
    $('<span class="base"></span><span class="fade"></span>').appendTo(socials);
    socials.each(function(i,o){
        var bpx = $(o).css('backgroundPositionX');
        $(o).find('.fade').css({
            backgroundPosition:bpx+' -117px'
        }).fadeTo(0,0);
    });
    socials.find('.fade').hover(function(){
        $(this).stop().fadeTo(300,1);
    },function(){
        $(this).stop().fadeTo(600,0);
    });
}; 
```******

# javascript - 在 JS 中解析数据的奇怪行为

> ID：11722262
> 
> 赞同：1
> 
> 时间：2012-07-30T13:08:57.160
> 
> 标签：javascript, parsing, date, datejs

我正在使用库[Date.js](http://www.datejs.com/)和 Date.parse() 方法

当我解析 Date.parse('30/07/2012') 我得到正确的日期 Mon Jul 30 2012 00:00:00 GMT+0200 (CEST) 但是当我试图解析 Date.parse( '01/08/2012'）（日期 2 天后）我得到了 Sun Jan 08 2012 00:00:00 GMT+0100 (CET) 它正在转换日期和月份！

有谁知道这是为什么？

我相信这不是问题不是在 Date.js 而是在 JS 本身......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T13:13:02.310

我的猜测是 date.js 足够聪明，可以意识到这`30`不是一个有效的月份，所以它会自行切换为 dd/mm/yyyy 格式。

但是，默认格式是 mm/dd/yyyy，并且它确实识别`01`为有效月份（一月），因此它为您提供 1 月 8 日而不是 8 月 1 日。

要解决此问题，只需指定您正在使用的格式字符串：

```
Date.parse('30/07/2012', 'MM/dd/yyyy'); 
```

[http://code.google.com/p/datejs/wiki/APIDocumentation](http://code.google.com/p/datejs/wiki/APIDocumentation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T14:48:45.980

谢谢大家的提示。

实际的解决方案是使用**Date.parseExact()**并指定日期的输入。在这种情况下`Date.parseExact('01/08/2012', "d/M/yyyy")`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T13:13:18.923

您的格式可能是错误的（“mm/dd/yyyy”）而不是（“dd/mm/yyyy”）。

当您使用 30 作为一个月时，库将其解析为一天，但在下一种情况下，没有任何借口，您将被解析为一个月而不是一天。

# android - Android 设备上的 AppCache

> ID：11722266
> 
> 赞同：0
> 
> 时间：2012-07-30T13:09:05.223
> 
> 标签：android, html, application-cache, html5-appcache

我在安卓手机上试用 appCache 网站时遇到了这个奇怪的问题。我已经在 Froyo 2.2 Android 设备上对其进行了测试。我正在使用这个 AppCache 演示[http://people.opera.com/shwetankd/demos/2/index.htm在 Android 手机上测试 AppCache 的功能](http://people.opera.com/shwetankd/demos/2/index.htm)

我已经使用 Dolphin Browser 对其进行了测试，并且可以正常工作。当我在 Android 的默认浏览器中测试它时出现问题。

所以我访问了该页面，然后关闭了我的互联网连接。然后我重新加载页面，它会显示类似页面未找到的消息，并在消息上附加 URL。事情是当我单击错误消息中的同一个 URL 时，它会加载缓存的页面。当我在页面上新建标签时也是如此，它可以工作。

它只是无法访问页面->关闭互联网->重新加载现有页面。

有任何想法吗？或者它只是我的测试设备？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T20:23:27.423

对我来说似乎是正确的行为：当您使用重新加载时，您要求浏览器重新加载页面，这意味着“从 Internet 获取它”。

如果您正常访问该页面，您只需要该页面和应用程序缓存就足够了。

现在，即使重新加载也尊重应用程序缓存以避免混淆可能是有意义的，但是你需要另一种方式（如桌面浏览器上的 Ctrl-F5）来表达“不，我的意思是我希望你下载一个全新的副本”。

选择你的癌症：用户混淆或新控件（这也可能导致用户混淆）。

（我意识到这已经快一岁了，但我只是偶然发现了它）

# hadoop - Apache Pig：从公共列上的多个表中选择而不连接

> ID：11722268
> 
> 赞同：0
> 
> 时间：2012-07-30T13:09:14.710
> 
> 标签：hadoop, apache-pig

我是猪和hadoop的新手。我需要从公共列上的多个表中选择和分组行（但它不是连接）。

例如，如果表 1 是：

```
adv1,app1,adg1,camp1  
adv2,app3,adg2,camp2 
```

表2是：

```
adv1,app2,adg2,camp1  
adv3,app1,adg3,camp3  
adv1,app1,adg4,camp2 
```

然后我想要这样的东西：

```
adv1,app1,adg1,camp1  
adv1,app2,adg2,camp1  
adv1,app1,adg4,camp2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T17:34:48.900

我认为您想要做的是加载两个表，然后执行[过滤](http://pig.apache.org/docs/r0.10.0/basic.html#filter)操作。

如果您有一个名为`table1`包含内容的文件

```
adv1,app1,adg1,camp1
adv2,app3,adg2,camp2 
```

和`table2`有内容的文件

```
adv1,app2,adg2,camp1
adv3,app1,adg3,camp3
adv1,app1,adg4,camp2 
```

那么您可以执行以下操作：

```
T = load '{/path/to/table1,/path/to/table2}' using PigStorage(',')
        as (adv:chararray, app:chararray, adg:chararray, camp:chararray);
result = filter T by adv == 'adv1';

> dump result
(adv1,app2,adg2,camp1)
(adv1,app1,adg4,camp2)
(adv1,app1,adg1,camp1) 
```

或者，如果您有两个不是从文件加载的关系，您可以使用[联合](http://pig.apache.org/docs/r0.10.0/basic.html#union)来组合它们，然后进行过滤。

```
> dump T1
(adv1,app1,adg1,camp1)
(adv2,app3,adg2,camp2)
> dump T2
(adv1,app2,adg2,camp1)
(adv3,app1,adg3,camp3)
(adv1,app1,adg4,camp2)

T = union T1, T2;
result = filter T by adv == 'adv1'; 
```

此外，如果您尝试根据所有可能的键进行分组，而不仅仅是 adv1，那么您可以对最后一行进行[分组](http://pig.apache.org/docs/r0.10.0/basic.html#GROUP)而不是过滤。

```
result = group T by adv;

> dump result
(adv1,{(adv1,app1,adg1,camp1),(adv1,app2,adg2,camp1),(adv1,app1,adg4,camp2)})
(adv2,{(adv2,app3,adg2,camp2)})
(adv3,{(adv3,app1,adg3,camp3)}) 
```

# iphone - iOS 的 SMTP 发送框架

> ID：11722269
> 
> 赞同：2
> 
> 时间：2012-07-30T13:09:17.793
> 
> 标签：iphone, ios, ipad, smtp

我想知道是否有任何好的框架/库可以使用 iOS 5.x 通过 SMTP 发送电子邮件

我已经尝试过 SKSMTPMessage 并且没有预期的那么强大。

任何帮助将不胜感激。

问候，

基督教

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-30T13:14:02.720

你已经尝试过[MailCore 了](https://github.com/mronge/MailCore)吗？

> MailCore 是一个 Mac 和 iOS 框架，旨在减轻处理电子邮件协议的痛苦。MailCore 通过向您隐藏 MIME 组合等令人讨厌的细节，使发送电子邮件的过程变得容易。取而代之的是，有一个很好的接口来编写消息，然后只需要一个方法来发送消息。在 IMAP 服务器上检查电子邮件是一件更复杂的事情，但 MailCore 使这项工作变得更简单，但将所有内容呈现为一组抽象对象，如消息、文件夹和帐户。

# opengl - 如何使 glOrtho 平行六面体旋转？

> ID：11722273
> 
> 赞同：0
> 
> 时间：2012-07-30T13:09:29.130
> 
> 标签：opengl, rotation, plane, frustum, orthogonal

我已经渲染了我的世界。根据一些特定要求，它包括（有时）地板上的一些灯。我正在使用三角形基元渲染这些灯光。现在我有以下代码来缩放和限制渲染区域：

```
 if(aspect>1)    
                gl.glOrtho(-scale*aspect, scale*aspect, -scale, scale, 0, 2);
            else
                gl.glOrtho(-scale, scale, -scale/aspect, scale/aspect, 0, 2); 
```

正如您在这张图片中看到的那样，远平面将光线穿过一条线（平行于 B 和 D 之间的圆上的线）

![在此处输入图像描述](../Images/50a51554b88dbee1a4ca12486fd3b929.png)

当我旋转我的场景时出现问题...... glOrtho“盒子”保持固定。您可以通过始终查看灯上的切割线来注意到它。它不再平行于B和D之间的线......

![在此处输入图像描述](../Images/cc35e52e6cf1160dcd58fbe9addadde9.png)

我的一位朋友向我推荐了[这份文件](http://www.cs.otago.ac.nz/postgrads/alexis/planeExtraction.pdf)。基本上它解释了如何提取平截头体平面......

但这意味着我应该手动检查每个原语是否在里面。

有没有使用 glOrtho 调用的方法？

我想获得这样的东西：

![在此处输入图像描述](../Images/8407218d373e884babeae27add7e77da.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T23:09:12.847

好的，在评论中选择解释后，答案是：您对查看体积剪辑平面的概念有误解。

*它们不是*某种与场景对齐的边界框。

近处和远处的剪裁平面是屏幕到世界的投影，根据定义，它们总是与视图对齐。您对此无能为力，因为这是 OpenGL 使用的数学基础。

在 OpenGL 中也不可能让图元向无穷大扩展，因此无论如何几何都必须以某种方式受到限制。

# google-bigquery - BigQuery 数据类型

> ID：11722274
> 
> 赞同：8
> 
> 时间：2012-07-30T13:09:39.863
> 
> 标签：google-bigquery

我从一个新项目开始，只是想在定义表架构之前进行验证

BigQuery 是否支持以下内容：

```
string – 
integer –
float– 
boolean – 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-02T00:27:28.407

BigQuery 数据类型官方文档：

*   [https://cloud.google.com/bigquery/data-types](https://cloud.google.com/bigquery/data-types)
*   [https://cloud.google.com/bigquery/docs/reference/standard-sql/data-types](https://cloud.google.com/bigquery/docs/reference/standard-sql/data-types)

* * *

上一个答案列出了基本数据类型：

*   细绳
*   整数 (INT64)
*   浮点数 (FLOAT64)
*   布尔值

BigQuery 还支持：

*   RECORD（JSON 对象，请参阅嵌套记录）
*   时间戳
*   字节
*   日期
*   时间
*   约会时间
*   大批
*   结构

2018 年和现在：

*   数字
*   地理

* * *

更多关于：

*   嵌套记录：[https ://developers.google.com/bigquery/docs/data#nested](https://developers.google.com/bigquery/docs/data#nested)
*   使用时间戳：[https ://developers.google.com/bigquery/docs/timestamp](https://developers.google.com/bigquery/docs/timestamp)
*   文档：[https ://developers.google.com/bigquery/preparing-data-for-bigquery#datatypes](https://developers.google.com/bigquery/preparing-data-for-bigquery#datatypes)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T14:32:07.790

确实是的。

```
BigQuery Type   ICD Type    Length    Checks

INTEGER         Integer     
FLOAT           Decimal     
STRING          Text        <65536  
BOOLEAN         Choice                "true" or "false", case-insensitive 
```

[https://developers.google.com/bigquery/articles/ingestionbestpractices#cutplace](https://developers.google.com/bigquery/articles/ingestionbestpractices#cutplace)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-22T17:39:05.563

布尔值还支持 1 表示真，0 表示假，时间戳支持 UTC 或“YYYY-MM-DD HH:MM:SSSS”

# wpf - ToggleButton 样式单击行为

> ID：11722278
> 
> 赞同：0
> 
> 时间：2012-07-30T13:09:54.167
> 
> 标签：wpf, button, styles, geometry, togglebutton

我想设计一个新的切换按钮。我使用此代码进行设计：

```
<UserControl.Resources>
    <Style TargetType="ToggleButton">
        <Setter Property="Width" Value="20" />
        <Setter Property="Height" Value="20" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ToggleButton">
                    <Border BorderBrush="Black" BorderThickness="1 1 1 1" CornerRadius="8 8 8 8">
                        <Path Name="Arrow" Fill="Black" HorizontalAlignment="Center" VerticalAlignment="Center" />
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsChecked" Value="true">
                            <Setter TargetName="Arrow" Property="Data" Value="M 0 0 L 4 4 L 8 0 Z" />
                        </Trigger>
                        <Trigger Property="IsChecked" Value="false">
                            <Setter TargetName="Arrow" Property="Data" Value="M 0 4 L 4 0 L 8 4 Z" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</UserControl.Resources> 
```

所以它现在看起来： ![在此处输入图像描述](../Images/79cbf421192d0ed0bff9ad27f37c630c.png)

这是非常好的。

我的问题是该按钮仅在我单击三角形时才会切换。但它应该在圆圈中的任何位置切换。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T13:13:07.900

尝试给你`Border`一个，`Background`否则它不会收到任何 Mouse.Clicks。

```
<Border Background="Transparent" 
```

# c# - 为不同类型的用户创建不同权限的页面？

> ID：11722280
> 
> 赞同：1
> 
> 时间：2012-07-30T13:09:57.957
> 
> 标签：c#, asp.net, permissions

> **可能重复：**
> [如何创建具有不同权限视图的页面](https://stackoverflow.com/questions/5184202/how-to-create-pages-with-different-permissions-views)

我只是一个初学者，无法理解代码。有人可以帮助我吗？还有其他方法吗？

[如何创建具有不同权限视图的页面](https://stackoverflow.com/questions/5184202/how-to-create-pages-with-different-permissions-views)

管理员将创建具有不同查看和编辑权限的不同用户。每当用户访问页面时，程序都会检查数据库以查看他是否具有适当的权限。只有这样，他才能查看数据。

我能想到的只是创建一个表，其中权限可以存储为 0 或 1。

但现在这似乎只是愚蠢和天真。

还有其他方法吗？

# asp.net-mvc-3 - 客户端验证不适用于 Razor MVC3 中的 DropDownListFor？

> ID：11722282
> 
> 赞同：2
> 
> 时间：2012-07-30T13:10:07.100
> 
> 标签：asp.net-mvc-3

当我单击按钮客户端验证不起作用时，下面是我的视图和模型

看法：

```
 <script src="@Url.Content("~/Scripts/jquery.validate.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.js")" type="text/javascript"></script>

 @using (Html.BeginForm("Guestlogin", "Home", FormMethod.Post))
            {
                for (int i =0; i <1; i++)
                {
             @Html.DropDownListFor(per => per.[i].Gender, new[] {
                                            new SelectListItem(){Text = "Male" , Value="Male"},
                                            new SelectListItem(){Text ="Female" , Value = "Female"},
                                        }, "Select Your Gender")@Html.ValidationMessageFor(o => o[i].Gender)
            }

            <button type="submit" name="Button"/>
            } 
```

模型：

```
[Required]
public string Gender { set;get;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T13:14:49.803

检查你的模型：

```
public class urvalidationmodel
{
    [Required]
    [Display(Name = "Gender")]
    public IEnumerable<Gender> gender { get; set; }
} 
```

js：

```
function Gender(sender, args) {
    var v = document.getElementById('Gender').value;
    if (v == 'Male' || v == 'Female') {
        args.IsValid = true; // Valid
    }
    else {
        args.IsValid = false; // Invalid
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T14:11:43.193

只需在表单之前的视图中查看此代码即可：

```
@using (Html.BeginForm("Guestlogin", "Home", FormMethod.Post))
        {
            for (int i =0; i <1; i++) 
```

在此之前添加以下代码：

```
 @{ Html.EnableClientValidation(); }
   @using (Html.BeginForm("Guestlogin", "Home", FormMethod.Post))
        {
            for (int i =0; i <1; i++) 
```

# java - FTPClient::retrieveFile 的套接字异常

> ID：11722284
> 
> 赞同：0
> 
> 时间：2012-07-30T13:10:11.053
> 
> 标签：java, apache-commons-net

我有一个应用程序应该连接到 ftp 服务器并下载文件。几个月前，一切正常，但现在我想更改一些部分并在retrieveFile 中获取异常：

```
FTPClient ftp=ConnectToServer();
OutputStream stream = new FileOutputStream("TempServerLog.txt");
ftp.retrieveFile(FileName, stream); 
```

这是堆栈跟踪：

```
java.net.SocketOutputStream.socketWrite0(Native Method)
java.net.SocketOutputStream.socketWrite(Unknown Source)
java.net.SocketOutputStream.write(Unknown Source)
sun.nio.cs.StreamEncoder.writeBytes(Unknown Source)
sun.nio.cs.StreamEncoder.implFlushBuffer(Unknown Source)
sun.nio.cs.StreamEncoder.implFlush(Unknown Source)
sun.nio.cs.StreamEncoder.flush(Unknown Source)
java.io.OutputStreamWriter.flush(Unknown Source)
java.io.BufferedWriter.flush(Unknown Source)
org.apache.commons.net.ftp.FTP.__send(FTP.java:501)
org.apache.commons.net.ftp.FTP.sendCommand(FTP.java:475)
org.apache.commons.net.ftp.FTP.sendCommand(FTP.java:552)
org.apache.commons.net.ftp.FTP.port(FTP.java:877)
org.apache.commons.net.ftp.FTPClient._openDataConnection_(FTPClient.java:709)
org.apache.commons.net.ftp.FTPClient._retrieveFile(FTPClient.java:1677)
org.apache.commons.net.ftp.FTPClient.retrieveFile(FTPClient.java:1669)
Util.FtpServer.DownloadConfigurationFile(FtpServer.java:83)
Main.main(Main.java:40) 
```

sendCommand 中的命令是“PORT 127,0,0,1,192,226\r\n”。我在 Win7 机器上使用 FileZilla FTP 服务器。服务器运行良好，我可以使用具有相同用户名/密码的 FileZilla 客户端。

服务器日志告诉我：

```
(not logged in) (127.0.0.1)> Connected, sending welcome message...
(not logged in) (127.0.0.1)> 220-FileZilla Server version 0.9.37 beta
(not logged in) (127.0.0.1)> 220 Lokaler Test FTP Server - have fun!
(not logged in) (127.0.0.1)> USER peter
(not logged in) (127.0.0.1)> 331 Password required for peter
(not logged in) (127.0.0.1)> PASS 
peter (127.0.0.1)> 230 Logged on
peter (127.0.0.1)> disconnected. 
```

所以我可以成功登录，但是在检索文件期间我断开了连接。

我仍然有一个旧版本的编译 jar，可以与我的本地服务器一起使用。我还尝试将 Apache-Commons-net 从 2.2（我在启动项目时使用）更新到当前版本 3.1，但错误仍然相同。

我还从我的项目的 git repo 中检查了一个旧版本，它现在有同样的问题。我为这个项目使用了额外的 Eclipse 安装，所以整个环境不应该被改变，但我仍然得到这个套接字错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T09:48:01.833

看起来，Windows 防火墙导致了这个问题。此外，它应该只对公共网络有效，当我连接到本地主机时，它会以某种方式引起问题。完全停用它后，我的程序开始工作。

# php - 如何将 XML 传输到 Web 服务？

> ID：11722288
> 
> 赞同：0
> 
> 时间：2012-07-30T13:10:30.903
> 
> 标签：php, xml, web-services, soap

我了解到 SOAP 是一个有用的 PHP 库，用于向 wsdl Web 服务发送信息。我正在构建要发送到 Web 服务的 XML 表。我的朋友做了网络服务，他说它需要一串字符。我试图向他发送一个 XML 表字符串，当他复制粘贴 XML 时，这是正确的，但是当我尝试使用 Web 服务时，他得到的只是一个空指针。

```
while($row=mysql_fetch_array($result))
    {

        //Product Id is called ProductID in the XML
        $product_id = $row['product_id'];

        //Final price is called SalesPrice in the XML
        $final_price = $row['final_price'];
        echo $final_price.'<br>';
        //qty is called Quantity in the XML
        $qty = $row['qty'];
        echo $qty.'<br>';
        //Purchase cost is called PurchaseCost in the XML
        $purchase_cost = $row['purchase_cost'];
        echo $purchase_cost.'<br>';

        $xml_output .="<SalesOrderLine>"; 
        $xml_output.='<ProductID>'.$product_id.'</ProductID>';
        $xml_output.='<Quantity>'.$qty.'</Quantity>';
        $xml_output.='<SalesPrice>'.$final_price.'</SalesPrice>';
        $xml_output.='<PurchaseCost>'.$purchase_cost.'</PurchaseCost>';

         // Escaping illegal characters 

        $xml_output.='</SalesOrderLine>';
        //$amount = $amount + $final_price;
        //$i++;
    }

    $xml_output .="</SalesOrder>"; 

    $xml = new SimpleXMLElement($xml_output);
    $xml->asXML();
    echo $xml;

    try {  
    $client = new SoapClient("http://*&#^%(@%(*#(#$%)%CreateDB?wsdl");  
    $result = $client->addSalesOrder($xml);

} catch (SoapFault $e) {
    var_dump(libxml_get_last_error());
    var_dump($e);
}

    //$result = $client->addSalesOrder($xml_output);
    if (is_soap_fault($result)) {
    trigger_error("SOAP Fault: (faultcode: {$result->faultcode}, faultstring: {$result->faultstring})", E_USER_ERROR);
} 
```

当我回显整个 $xml_output 字符串时，我可以通过检查代码看到它变成了一个 XML 表。无论是否使用 SimpleXML 库，将函数传递给 Web 服务都不起作用。如何安全地将字符串传输到作为 XML 表的 Web 服务，同时将其保留为字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T06:09:17.393

您不能将 XML 作为 Soap 函数的参数发送。如果要操作 XML 作为输入，请使用以下方式

```
// xml content

$xmlDocument = '<Result>

    <Product id="12345" language="fr-BE">

        <Data>

            <Brand>BrandName</Brand>

            <ProductName>Bag</ProductName>

        </Data>

    </Product>

</Result>';

// initiate soap client

ini_set("soap.wsdl_cache_enabled", "0");

$client = new SoapClient(
        "http://dotnetwebservice.com/Products.asmx?wsdl",

        array(
            'trace' => 1,
            'exceptions' => 1,
            'soap_version' => SOAP_1_1,
            'encoding' => 'ISO-8859-1',
            'features' => SOAP_SINGLE_ELEMENT_ARRAYS
        )
);

$xmlvar = new SoapVar(

      "<ns1:xmlDocument>'.$xmlDocument.'</ns1:xmlDocument>", XSD_ANYXML 
);

$params->xmlDocument = (object)$xmlvar;

$save_result = $client->SaveProduct($params); 
```

请在链接[http://www.php.net/manual/en/soapvar.soapvar.php上找到更多详细信息](http://www.php.net/manual/en/soapvar.soapvar.php)

# java - 如何获取正在运行的 c 程序的标准输入和标准输出

> ID：11722290
> 
> 赞同：0
> 
> 时间：2012-07-30T13:10:35.020
> 
> 标签：java, c

我想用java编写一个管理器程序，它将执行ac程序并可以读取它的输入流并写入输出流。

客户端将请求 c exe 然后服务器将处理它的请求，如下所示：

1.  经理程序将执行。
2.  它将执行 ac 程序。
3.  可以将c程序的输出发送到浏览器。（输入流）。
4.  应该能够接受来自浏览器的输入并提供给 c 程序。

我曾尝试使用运行时和进程执行 c 代码。但它给出了例外

```
---------------------------
16 bit MS-DOS Subsystem
---------------------------
Error while setting up environment for the application. Choose 'Close' to terminate the application.
---------------------------
Close   
--------------------------- 
```

帮助？

代码：导入 java.io.*；

```
class Dev
{
public static void main(String args[])
{
    try
    {
        Process p = Runtime.getRuntime().exec("dev.exe");
        InputStream is = p.getInputStream();
        // from her i'll do the stuff but it gives error.

    }
    catch(Exception e)
    {
        System.out.print("\n\n\t Error : "+e);
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T13:22:07.740

`Runnable`您可以通过创建一个实现的类，然后将其传递给它来执行程序`Process`，这在[此答案](https://stackoverflow.com/a/659933/377628)中进行了描述。那里的答案还描述了如何在`InputStream`. 至于传入一些输入，这可以通过在命令行中传递一个字符串来完成。在该`Process`答案的制作线上，您可以添加：

```
//...
String someInput, command; // Set these to the appropriate values.
Process p = Runtime.getRuntime().exec("echo \"" + someInput + "\"|" + command);
//... 
```

这将通过管道`someInput`传递 to的值`command`。这是基于命令行的，并且在技术上是特定于平台的，但应该可以在 Linux、OS X 和 Windows 上运行而无需更改。

# objective-c - sqlite select语句中没有返回行

> ID：11722297
> 
> 赞同：0
> 
> 时间：2012-07-30T13:11:03.293
> 
> 标签：objective-c, ios, sqlite

我无法从我的数据库中选择数据。也许它只是在这里很早，但看起来我从来没有得到任何返回，但我在 while 语句中设置了断点以停止，它永远不会到达代码的那部分。我在这件事上搞砸了吗？我确实省略了 create 语句，因为它相当长，而且我认为它不相关，因为它确实包含`IF NOT EXISTS`. 我还验证了我的所有数据都在数据库中。

```
sqlite3 *database;
if(sqlite3_open([[self dataFilePath] UTF8String], &database)
   != SQLITE_OK) {
    sqlite3_close(database);
    NSAssert(0,@"Failed to open database");
}

NSString *createSQL = @"--CREATE STATEMENT HERE --";

char *errorMsg;

if(sqlite3_exec (database, [createSQL UTF8String], NULL, NULL, &errorMsg) != SQLITE_OK) {
    sqlite3_close(database);
    NSAssert(0,@"Error creating table: %s", errorMsg);
}

NSString *query = @"SELECT name, number FROM DATA";
sqlite3_stmt *statement;
if (sqlite3_prepare_v2(database, [query UTF8String], -1, &statement, nil) == SQLITE_OK) {
    while (sqlite3_step(statement) == SQLITE_ROW) {
        int myNumber = sqlite3_column_int(statement, 1);
        char *name = (char *)sqlite3_column_text(statement, 0);
        NSString *message = [NSString stringWithFormat:@"Number: %d, Name: %@", myNumber,name];
        //DO MORE STUFF HERE.
    }
    sqlite3_finalize(statement);
}
sqlite3_close(database); 
```

dateFilePath 方法：

```
-(NSString*)dataFilePath {
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    return [documentsDirectory stringByAppendingPathComponent:@"Spaces.sqlite"];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T13:19:17.917

您正在选择姓名和号码..但是从什么？你需要完成你的sql查询语句..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T20:04:21.007

您说您检查了数据是否存在，您是否查看了模拟器的 Documents 文件夹中的副本，或者您是否检查了 Xcode 项目中的副本？（如果可以的话，您确实需要检查模拟器上应用程序的 Documents 文件夹中的数据库内容。）我问的原因是一个非常常见的错误是假设成功调用`sqlite3_open`意味着它找到了您的数据库。它没有。如果它没有找到您的数据库，它将为您创建一个空白数据库。

如果您在编译之前准备好数据库，我真的鼓励您使用`sqlite3_open_v2`而不是`sqlite_open`这里讨论的：[SQLite will not prepare query when access database in Xcode](https://stackoverflow.com/questions/11605072/sqlite-will-not-prepare-query-when-accessing-database-in-xcode/11605495#11605495)

因此，如果这是问题所在，我建议：

1.  重置您的模拟器（通过模拟器菜单上的“重置内容和设置”，或者只是删除应用程序并重新安装）以摆脱那里的任何空白数据库。

2.  确保数据库包含在您的包中，如上述链接中所述。

3.  确保以编程方式将数据库从包复制到文档，如下所述：[无法在 iOS 中连接 SQLite 数据库](https://stackoverflow.com/questions/11664043/unable-to-connect-sqlite-database-in-ios/11674730#11674730)

4.  并`sqlite3_open_v2`按照上述两个链接中的任何一个中的说明使用。

# c# - C# LINQ - 过滤查询

> ID：11722304
> 
> 赞同：2
> 
> 时间：2012-07-30T13:11:26.680
> 
> 标签：c#, linq

我对 LINQ 很陌生，我正在寻找一些指导，以了解我的项目的最佳途径。

我正在开发一个通过电子邮件或短信发送通知消息的应用程序。

我目前在我的 SQL 数据库中有 3 个表，我在 c# 中获取：-

```
 var contacts = db.GetTable<Contact>();
        var distributionLists = db.GetTable<DistributionList>();
        var JunctionTable = db.GetTable<ContactsDistribution>(); 
```

用户可以从列表框控件中选择多个分发列表。我需要找到一种将记录添加到每个选定项目的列表/对象的方法。获得最终数据后，我需要删除所有重复项，因为联系人可以属于多个分发列表。

最后，列表中的每个联系人应该只有 1 个条目，因为我不想多次向 1 个联系人发送相同的通知。

我的 LINQ 查询如下：-

```
foreach (var li in listBox1.SelectedItems)
        {
            string text = "";
            text += li.ToString();

            var InitialList = (from j in JunctionTable
                  where j.DistributionName.Equals(text)
                  join c in contacts
                  on j.ContactID equals c.ContactID
                  select new { c.ContactID,  j.DistributionName }).ToList();

        } 
```

我需要为列表框中的每个选定项目继续添加到此查询。我确实尝试过使用 List 对象，但我不确定它是否是正确的方法。

一旦我有了所有条目..然后我可以删除重复项，但不确定我是否走在正确的道路上？

有更好的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T13:18:19.617

我不完全了解您想要做什么，但这可能会对您有所帮助：

```
var listBoxItems = listBox1.SelectedItems.Select(x => x.ToString()); 
```

或者：

```
var listBoxItems = from li in listBox1.SelectedItems
                   select new { x.ToString() };

var InitialList = (from j in JunctionTable
                   where listBoxItems.Contains(j.DistributionName)
                   join c in contacts on j.ContactID equals c.ContactID
                   select new { c.ContactID,  j.DistributionName }).ToList(); 
```

如果您需要从中删除重复项，`InitialList`可以使用[Distinct](http://msdn.microsoft.com/en-us/library/bb348436.aspx)方法：

```
var InitialList = (from j in JunctionTable
                   where listBoxItems.Contains(j.DistributionName)
                   join c in contacts on j.ContactID equals c.ContactID
                   select new { c.ContactID,  j.DistributionName }).Distinct().ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T13:20:24.727

不要忘记将您的代码切成小块！

如果它足够快并且为了可读性，我选择这个解决方案：

```
var contacts = db.GetTable<Contact>();
var distributionLists = db.GetTable<DistributionList>();
var JunctionTable = db.GetTable<ContactsDistribution>();

var distributionNames = listBox1.SelectedItems
                          .Cast<object>()
                          .Select(t => t.ToString());

var junctions = JunctionTable.Where(j => distributionNames.Contains(j.DistributionName));

var contactIds = junctions.Select(j => j.ContactID).Distinct();

var contacts = contacts.Where(c => contactIds.Contains(c.ContactID)); 
```

# qt - 未调用 Qt 插槽

> ID：11722308
> 
> 赞同：1
> 
> 时间：2012-07-30T13:11:28.477
> 
> 标签：qt, signals-slots

我正在尝试以这种方式连接到信号：

```
QObject::connect(myObj, SIGNAL(mySignal(std::list<MyClass*> myList)), this, SLOT(mySlot(std::list<MyClass*> myList))); 
```

插槽未被调用。那是错的吗？我可以`std::list`成对`signal/slot`使用吗？

**编辑：**没有参数的同一对工作

```
class TestThread : public QThread
{
    Q_OBJECT

public:
    .....
    protected:
     virtual void run();

private:
    std::list<MyClass*> myList;

signals:
    void mySignal(std::list<MyClass*>&);

};
Q_DECLARE_METATYPE (std::list<MyClass*>) 
```

编辑：

```
void mySlot(const std::list<MyClass*> &);

void 
MyManager::mySlot(const std::list<MyClass*> &theList)
{
    std::cout << "mySlot " << std::endl;
}

void mySignal(const std::list<MyClass*> &theList);

TestThread ::TestThread (std::list<MyClass*>&theList, QObject *parent)
    :  QThread(parent),  myList(theList)
{

}

void
TestThread ::run() 
{
   ...
   emit mySignal(myList);
} 
```

到底：

```
QObject::connect(threadObj, SIGNAL(mySignal(std::list<MyClass*>)), this, SLOT(mySlot(std::list<MyClass*>))); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T14:02:05.303

如果信号发射对象和接收对象位于不同的线程中，则必须在发射之前使用[qRegisterMetaType注册元类型。](http://doc.qt.nokia.com/4.7-snapshot/qmetatype.html#qRegisterMetaType)在你的情况下：

```
qRegisterMetaType<std::list< MyClass* > >("std::list<MyClass*>"); 
```

在你的应用程序开始的某个地方应该这样做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T13:22:06.260

您只需要类型，而不需要变量的实际名称。

```
QObject::connect(myObj, SIGNAL(mySignal(std::list<MyClass*>)), this, SLOT(mySlot(std::list<MyClass*>))); 
```

如果你试图发送一个`int`，你会使用

```
SIGNAL(mySignal(int)) 
```

不是

```
SIGNAL(mySignal(int x)) 
```

编辑：正如@Chris 指出的那样，不匹配`const`and`&`不应该有所作为。

下面的代码正确地发出信号并在另一个线程中接收它。如果您不使用`qRegisterMetaType`，您会收到一条运行时警告消息，告诉您这样做。

```
class A
{
public:
    A(): i(1) {}
    int i;
};

class T : public QThread
{
    Q_OBJECT
public:
    void run()
    {
       emit mySignal(myList);
    }

    std::list<A*> myList;

signals:
    void mySignal(const std::list<A*>&);
};

Q_DECLARE_METATYPE (std::list<A*>)
class Test: public QDialog
{   
    Q_OBJECT//this macro flags the class for the moc tool

public:
    Test()
    {
       qRegisterMetaType<std::list< A* > >("std::list<A*>");

       t = new T;
       connect(t, SIGNAL(mySignal(std::list<A*>)), this, SLOT(mySlot(std::list<A*>)));
       printf("after connect\n");

       t->start();
    }

public slots:
    void mySlot(const std::list<A*>& list){printf("mySlot");}

protected:
    T* t;
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T13:47:53.500

如果您从 派生`QObject`，将`Q_OBJECT`宏添加到类头中，并确保所涉及的信号和插槽具有正确的访问修饰符（即`public slots`） - 那么这可能意味着您需要添加：

```
#include <QMetaType>
Q_DECLARE_METATYPE( std::list<MyClass*> ); 
```

# javascript - 如何在 Javascript 中构造一个新类型？

> ID：11722313
> 
> 赞同：1
> 
> 时间：2012-07-30T13:11:34.743
> 
> 标签：javascript, types, ecmascript-5

> **可能重复：**
> [如何在 JavaScript 中“正确”创建自定义对象？](https://stackoverflow.com/questions/1595611/how-to-properly-create-a-custom-object-in-javascript)

是否可以在 Javascript 中构造新类型？如果“一切都是对象”，那么您使用对象构造函数来构造新类型吗？如果是这样，这使得对象构造函数也是类型构造函数，对吧？非常感谢您的帮助，早上好 Stack Overflow！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T13:19:18.880

您可以使用以下代码创建新类并向其添加方法和属性。

```
函数类名（）{

   //私有属性
   变量变量 1，变量 2；

   //公共属性
   this.public_property = "Var1";

   //私有方法
   变种方法1 = 函数（）{
      //代码
   };

   //特权方法。这可以访问 var1、var2 和 public_property。
   this.public_method1 = function() {
      //代码
   };
}

//使用“原型”的公共属性
ClassName.prototype.public_property2 = "值 2";

//使用“原型”的公共方法
//这可以访问this.public_property和public_property2。
//但不是 var1 和 var2。
ClassName.prototype.public_method2 = function() {
   //这里的代码
}

//创建新对象
var obj1 = new ClassName();
//访问属性
obj1.public_property1 = "价值1";

```

您还可以扩展现有的类。

检查[克罗克福德的网站](http://www.crockford.com/javascript/private.html)

感谢[Glutamat](https://stackoverflow.com/users/1487756/glutamat)和[Felix Kling](https://stackoverflow.com/users/218196/felix-kling)

# python - 在特使中使用 rm *（通配符）：没有这样的文件或目录

> ID：11722318
> 
> 赞同：6
> 
> 时间：2012-07-30T13:12:08.870
> 
> 标签：python, wildcard, rm, python-envoy

我正在使用 Python 和 Envoy。我需要删除目录中的所有文件。除了一些文件，该目录是空的。在终端中，这将是：

```
rm /tmp/my_silly_directory/* 
```

常识表明，在特使中，这转化为：

```
r = envoy.run('rm /tmp/my_silly_directory/*') 
```

然而：

```
r.std_err -> "rm: cannot remove `/tmp/my_silly_directory/*': No such file or directory" 
```

在这种情况下自然有使用 envoy 的替代方法，我只是想知道为什么它不起作用。

有什么线索吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T13:15:29.160

在 UNIX 上，由 shell 来解释通配符，如`*`. 如果你执行一个程序并将其中的参数`*`直接传递给程序——这大概就是这里正在做的事情——那么你会得到一个你所看到的错误。`rm`只是假设`*`是一个文件名，实际上，它实际上是可以创建这样一个文件的。

一种解决方案可能是执行 shell 并让它代表您执行您的命令，例如

```
r = envoy.run('sh -c "rm /tmp/my_silly_directory/*"') 
```

shell 将解释`*`调用之前的`rm`.

# android - 文本视图中的图像

> ID：11722320
> 
> 赞同：0
> 
> 时间：2012-07-30T13:12:18.670
> 
> 标签：android, textview

在我的应用程序中，我在列表视图中显示来自数据库的数据。在该列表视图中，我有 4 个按列排列的文本视图。现在在第二个文本视图之后，我必须添加 1 个图像（星号）来指示某些内容。但是当我尝试添加所有文本视图都远远落后于屏幕时，不影响我拥有的其他文本视图表明这一点。

我的显示：

```
30/07/2012 | gfgdh | 78 | 78
30/07/2012 | hjkk  | 45 | 45 
```

我想要的是：

```
30/07/2012 | ghgdh* |78  |78 
```

我的 XML 代码是：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    android:id="@+id/Layout1"
     xmlns:android="http://schemas.android.com/apk/res/android"
     android:paddingTop="4dip"
     android:paddingBottom="6dip"
     android:layout_width="fill_parent"
     android:layout_height="wrap_content"
     android:orientation="horizontal"
     >     

     <TextView android:id="@+id/text1"      
        android:layout_width="80dip"
        android:layout_height="wrap_content"        
        /> 

     <View
            android:layout_width="1dp"
            android:layout_height="fill_parent"
            android:layout_marginLeft="2dp"
            android:layout_marginRight="2dp"
            android:background="#FF909090" />

     <TextView android:id="@+id/text3"          
        android:layout_width="60dip"
        android:layout_height="wrap_content"        
        android:layout_marginLeft="30dp"/>

     <View
            android:layout_width="1dp"
            android:layout_height="fill_parent"
            android:layout_marginLeft="2dp"
            android:layout_marginRight="2dp"
            android:background="#FF909090" />

       <TextView android:id="@+id/text5"            
        android:layout_width="60dip"
        android:layout_height="wrap_content"
        android:layout_marginLeft="20dp"
        />
       <View
            android:layout_width="1dp"
            android:layout_height="fill_parent"
            android:layout_marginLeft="2dp"
            android:layout_marginRight="2dp"
            android:background="#FF909090" />

        <TextView android:id="@+id/text7"           
        android:layout_width="60dip"
        android:layout_height="wrap_content"
        android:layout_marginLeft="10dp"
        />

          <TextView android:id="@+id/text9"         
        android:layout_width="60dip"
        android:layout_height="wrap_content"
        android:layout_marginLeft="10dp"            
         android:visibility="gone"/>

</LinearLayout> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T13:17:37.553

您可以创建一个 spannableString 并将您的图像放置在 TextView 中您想要的位置。或者你可以使用

```
ImageSpan is = new ImageSpan(context, resId);
text.setSpan(is, index, index + strLength, 0); 
```

[资源](https://stackoverflow.com/questions/5561981/how-to-display-image-in-androids-textview)

# python - 使用 qt 将绘图添加到选项卡

> ID：11722322
> 
> 赞同：2
> 
> 时间：2012-07-30T13:12:28.627
> 
> 标签：python, qt

我在 qt 中有一个 python gui。gui是使用设计师的。它包含选项卡。我想添加一个情节。我的绘图对象是一个继承自 QtCore.QObject 的类（称为 MyPlot）。要将它添加到 gui，我可以简单地在继承自 QtGui.QMainWindow 的类 MainWindow 中执行操作：

```
self.Myplot(self)
self.MyPlot.plot() 
```

但我不知道如何告诉 python 只将绘图放在一个选项卡中。我想我必须在 MainWindow 内做类似的事情：

```
self.tab(0).Myplot(self) 
```

但我找不到具体是什么。有人有任何线索吗？

谢谢！

编辑：尝试在以下代码中读取由设计器生成的 ui 文件的选项卡失败（我只是试图将我用设计器构建的东西放入选项卡，而不是添加绘图）：

```
import sys
from PyQt4 import QtCore, QtGui, uic

class MyWidget(QtGui.QWidget):
  def __init__(self, parent = None):
    uic.loadUi('mainwindow.ui', self)

class TabWidget(QtGui.QTabWidget):  
  def __init__(self, parent=None):  
    super (TabWidget, self).__init__(parent)  
    self.setTabsClosable(True)  
    self.tabCloseRequested.connect(self.removeTab)
    self.inside = MyWidget()

  def tabInserted(self, index):  
    self.tabBar().setVisible(self.count() > 1)  

  def tabRemoved(self, index):  
    self.tabBar().setVisible(self.count() > 1) 

class MainWindow(QtGui.QMainWindow):
  def __init__(self,parent=None):
    QtGui.QMainWindow.__init__(self, parent)

def main():
  qApp = QtGui.QApplication(sys.argv)  

  tab = TabWidget()  

  button = QtGui.QPushButton('Hello')  
  @button.clicked.connect  
  def clicked():  
    tab.addTab(QtGui.QLabel('Hello'), 'Hello')  

  tab.addTab(button, 'Button')  

  layout = QtGui.QHBoxLayout()  
  layout.addWidget(tab)  

  window = QtGui.QWidget()  
  window.setLayout(layout)  
  window.resize(600, 400)  
  window.show()  

  qApp.exec_()  

if __name__ == "__main__":
  main() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T13:29:06.700

正常的使用方法`QTabWidget`是执行以下操作：

1.  创建一个`QTabWidget`.
2.  为选项卡对话框中的每个页面创建一个`QWidget`，但不要为它们指定父窗口小部件。
3.  将子小部件插入页面小部件，使用布局将它们正常定位。
4.  调用`addTab()`或`insertTab()`将页面小部件放入选项卡小部件中，为每个选项卡提供一个合适的标签，并带有可选的键盘快捷键。

[http://qt-project.org/doc/qt-5.0/qtabwidget.html#details](http://qt-project.org/doc/qt-5.0/qtabwidget.html#details)

更新：

`untitled.ui`我在 Qt Designer 中用一个复选框创建了一个文件。我还在以下位置添加了对父级`__init__`的调用`MyWidget`：

```
import sys
from PyQt4 import QtCore, QtGui, uic

class MyWidget(QtGui.QWidget):
  def __init__(self, parent = None):
    QtGui.QWidget.__init__(self)
    uic.loadUi('untitled.ui', self)

class TabWidget(QtGui.QTabWidget):  
  def __init__(self, parent=None):  
    super (TabWidget, self).__init__(parent)  
    self.setTabsClosable(True)  
    self.tabCloseRequested.connect(self.removeTab)
    self.inside = MyWidget()

  def tabInserted(self, index):  
    self.tabBar().setVisible(self.count() > 1)  

  def tabRemoved(self, index):  
    self.tabBar().setVisible(self.count() > 1) 

class MainWindow(QtGui.QMainWindow):
  def __init__(self,parent=None):
    QtGui.QMainWindow.__init__(self, parent)

def main():
  qApp = QtGui.QApplication(sys.argv)  

  tab = TabWidget()  

  button = QtGui.QPushButton('Hello')  
  @button.clicked.connect  
  def clicked():  
    tab.addTab(QtGui.QLabel('Hello'), 'Hello')  

  tab.addTab(button, 'Button')  

  layout = QtGui.QHBoxLayout()  
  layout.addWidget(tab)  

  window = QtGui.QWidget()  
  window.setLayout(layout)  
  window.resize(600, 400)  
  window.show()  

  qApp.exec_()  

if __name__ == "__main__":
  main() 
```

它有效。

# android - CipherInputStream 和 CipherOutputStream 的轻量级密码类型

> ID：11722323
> 
> 赞同：0
> 
> 时间：2012-07-30T13:12:28.150
> 
> 标签：android, security, encryption

我正在使用 128 位 AES 密码算法。但是该程序需要很长时间，因为要加密的文件很大。

我想知道在 Android 中是否有更轻的密码算法。我在 Android 中找不到支持的密码列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T14:35:49.763

您是否尝试过在 AES 中使用较短的密钥？您可以尝试将 OpenSSL 构建为本机代码，但我猜 dalvik 已经使用优化的库，我认为它不会有帮助。AES 需要一些时间是有充分理由的，通过选择更快的东西，您将不得不降低真正的安全性。

如果您需要速度，我建议您不要加密整个文件。相反，仅加密文件的标题或部分，否则文件的其余部分将无用。但是，这取决于您要加密的数据，并且不适用于通用数据文件。

# sql - 如何在informix数据库中搜索列

> ID：11722329
> 
> 赞同：4
> 
> 时间：2012-07-30T13:13:06.367
> 
> 标签：sql, informix

我希望能够在 Informix DB 中搜索列。在主表中有一个 cust_nbr 列，然后在未知数量的表中引用该列。

在 Informix 中，有没有办法查询数据库并获取所有使用 cust_nbr 的表？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-30T16:18:51.663

```
SELECT tabname, colno, colname  
FROM systables a, syscolumns b 
WHERE a.tabid = b.tabid 
and colname = "cust_nbr"
ORDER BY colno; 
```

我在同一个地方找到了这段代码，并用 colname = cust_nbr 添加了额外的限制。

这似乎对我有用。我会验证它，但所有迹象看起来都有效。

我发现在另一篇文章中提到的[使用 Informix 目录中](http://www.ibm.com/developerworks/data/zones/informix/library/techarticle/0305parker/0305parker.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T13:18:43.017

特别是，您应该能够从[系统目录表](http://publib.boulder.ibm.com/infocenter/idshelp/v10/index.jsp?topic=/com.ibm.sqlr.doc/sqlrmst27.htm)中获得这种类型的东西`sysreferences`。取自[Using the Informix System Catalog](http://www.ibm.com/developerworks/data/zones/informix/library/techarticle/0305parker/0305parker.html)：

```
SELECT a.tabname, constrname, d.tabname 
  FROM systables a, sysconstraints b, sysreferences c, 
       systables d 
 WHERE b.constrtype = 'R' 
   AND a.tabid = b.tabid 
   AND b.constrid = c.constrid 
   AND c.ptabid = d.tabid 
   AND a.tabname = ?; 
```

# css - 水平显示 div 和 iframe

> ID：11722333
> 
> 赞同：1
> 
> 时间：2012-07-30T13:13:17.763
> 
> 标签：css, layout, html, iframe

您能否提供以下内容的html代码？

我需要显示`div`并`iframe`水平适合整个页面。但我需要将 div 固定大小（100px）并且 iframe 适合剩余空间。

![div+iframe](../Images/8753a95041a63b36dff98992c7337652.png)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T13:21:56.727

[小提琴](http://jsfiddle.net/dipaks2011/9ed4B/1/)

CSS

```
div{ border: 1px solid #f00; width: 100px; position: absolute; left: 0; top: 0;}
iframe{ width: 100%; margin: 0 0 0 100px;} 
```

HTML

```
<div>hi</div>
<iframe src="http://www.google.com/"></iframe> 
```

**编辑：**

为避免水平滚动条在`%`两个元素中定义宽度 -[更新小提琴](http://jsfiddle.net/dipaks2011/9ed4B/6/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T13:24:07.443

[http://jsfiddle.net/gZNKk/1/](http://jsfiddle.net/gZNKk/1/)

```
<html><head>
    <style>
        body, html {
            height: 100%;
            width: 100%;
            padding: 0;
            margin: 0;
        }
        #left {
            float: left;
            width: 100px;
            background: blue;
            height: 100%;
        }
        #right {
            width: auto; /* This is the default */
            float: none;
            margin-left: 100px;
            background: red;
            height: 100%;
        }
        #right-iframe {
            background: yellow;
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body>
<div id="left"></div>
<div id="right">
    <iframe id="right-iframe"></iframe>
</div>
</body></html>​ 
```

编辑：修复了右侧导致滚动条出现的额外间距。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T13:22:26.570

**CSS：**

```
#content-wrapper {
width: 100%;
overflow:hidden;
}

#content-left {
width: 49.5%;
min-height: 100%;
float: left;
border-right: solid 1px #A9D0D6;
}

#content-right {
width: 49.5%;
min-height: 100%;
float: right;
} 
```

**HTML：**

```
<div id='content-wrapper'>
    <div id='content-left'></div>
    <div id='content-right'><iframe src="http://www.google.com"></div>
</div> 
```

您可以根据需要调整宽度。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-30T13:28:48.713

试试这个，

[http://jsfiddle.net/anglimass/UUmsP/15/](http://jsfiddle.net/anglimass/UUmsP/15/)

# ruby-on-rails - Rspec POST 控制器创建测试失败，但基于 Web 的提交工作

> ID：11722339
> 
> 赞同：0
> 
> 时间：2012-07-30T13:13:39.267
> 
> 标签：ruby-on-rails, ruby, rspec

我在我的 create 方法中有以下 rspec 测试

```
describe "with valid information" do
  it "should respond with success" do
    post 'create', :show_secretary_id => @show_secretary.id, :show => @show
    response.should be_success
  end

  it "should incremenet the show count" do
    expect do 
      post 'create', :show_secretary_id => @show_secretary.id, :show => @show
    end.to change(Show,'count').by(1)
  end
end 
```

测试失败。但是，当我在浏览器中尝试 create 方法时，它可以工作。关于我所缺少的任何想法？

编辑：我的控制器代码

```
 def create
    @show_secretary = ShowSecretary.find_by_id(params[:show_secretary_id])
    @show = @show_secretary.shows.build(params[:show])
    if @show.save
      flash[:notice] = "Successfully created show"
      redirect_to show_path @show 
    else
      render 'new'
    end
  end 
```

编辑：@show_secretary，@show

这两个对象分别是 FactoryGirl 创建和构建的 ActiveRecords。

```
@show_secretary = FactoryGirl.create(:show_secretary_user).verifiable
@show = FactoryGirl.build(:show) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T15:14:41.193

代替

```
@show = FactoryGirl.build(:show) 
```

和：

```
@show = FactoryGirl.attributes_for(:show) 
```

# java - 按需编辑文本小部件

> ID：11722340
> 
> 赞同：1
> 
> 时间：2012-07-30T13:13:41.360
> 
> 标签：java, android, android-layout, android-widget, android-edittext

我想要一个 TextView 显示文本，当您单击/长按它时，文本框应该“显示”并允许编辑所述文本。当你完成编辑（我想是按键输入）它应该恢复到带有更新文本的文本视图......

我想知道实现这样的小部件是否可行，或者我应该破解一个解决方法？非常欢迎提示和建议。

如果您需要进一步了解我的意思，只需转到您的例如（Windows）Skype 配置文件并亲自查看。

编辑：澄清：我特别要求一个小部件等，它是一个文本视图，直到被点击，然后转换为一个包含相同文本的编辑文本；一旦完成编辑，它就会转换回代表新更改文本的文本视图。这就是我所说的“按需编辑文本小部件”的意思。

但我希望能得到比

```
public class Widget {
     TextView text;
     EditText edit;
     String   textToRepresent;
     //...
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T15:45:04.650

您在这里有几个不同的选择。

首先，您必须将 onClick 或 onLongClick 注册到要进行交互的 TextView。*只要确保用户知道它是可点击的*

然后让你的 onClick 函数启动一个[DialogFragment](http://developer.android.com/reference/android/app/DialogFragment.html)。我喜欢创建显示功能。请注意，您可以使用此处的支持库来使您的应用向后兼容。

```
private void showDialog() {
    MyDialogFragment dialog = new MyDialogFragment();
    dialog.show(getSupportFragmentManager(), "dialog");
} 
```

DialogFragment 非常简单。在您的 onCreateView 中，您将膨胀您想要向用户显示的视图。如果您不想自定义，也可以使用简单的[AlertDialogBu​​ilder包装它。](http://developer.android.com/reference/android/app/DialogFragment.html#AlertDialog)

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle     savedInstanceState) {
    View view = inflater.inflate(R.layout.your_dialog_layout);

    mTitleEditText = (TextView) view.findViewById(R.id.title);
    mTitleEditText.setOnClickListener(this);

    return view;
} 
```

在您的 findViewByIds 设置您的 onClickListeners 之后。您最后需要注意的是将数据返回到原始 TextView 中。您可以通过在 Activity 中创建一个可以从 DialogFragment 内部调用的公共方法来做到这一点。像这样的东西

```
 @Override
    public void onClick(View v) {
        int clickedId = v.getId();

        if (clickedId == mDoneButton.getId()) {
            MyActivity activity = (MyActivity)getActivity();

            mTitle = mTitleEditText.getText().toString();
            activity.setText(mTitle);
            dismiss();
        }
    } 
```

我建议使用 DialogFragment，因为它可以很好地处理您的生命周期。但是，另一种选择是创建一个以对话框为主题的新 Activity

```
<activity android:theme="@android:style/Theme.Dialog" /> 
```

然后您可以[startActivityForResult](http://developer.android.com/reference/android/app/Activity.html#startActivityForResult%28android.content.Intent,%20int%29)显示您的对话框，然后在[onActivityResult中捕获您的结果](http://developer.android.com/reference/android/app/Activity.html#onActivityResult%28int,%20int,%20android.content.Intent%29)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T16:22:07.393

这是我的解决方案。我只给你一个基本的。`TextView`在前面创建一个`EditText`和两个`Button` `OK`，`Cancel`（您可以更改为`ImageButton`喜欢Skype）。更改两个视图的可见性。代码很简单，没有注释。您可以根据您的逻辑添加一些空值检查。

```
public class CompoundTextView extends RelativeLayout implements OnClickListener {
private EditText edt;
private TextView txt;
RelativeLayout layout;

public SkypeTextView(Context context, AttributeSet attrs) {
    super(context, attrs);
    // TODO Auto-generated constructor stub
}

@Override
protected void onFinishInflate() {
    super.onFinishInflate();
    edt = (EditText) findViewById(R.id.edt);
    txt = (TextView) findViewById(R.id.txt_name);
    layout = (RelativeLayout) findViewById(R.id.layout);
    Button ok = (Button) findViewById(R.id.ok_btn);
    Button cancel = (Button) findViewById(R.id.cancel_btn);
    ok.setOnClickListener(this);
    cancel.setOnClickListener(this);
    txt.setOnClickListener(this);

}

public void onClick(View v) {
    // TODO Auto-generated method stub
    switch (v.getId()) {
    case R.id.ok_btn:
        String editString = edt.getText().toString();

        txt.setText(editString);
        layout.setVisibility(View.INVISIBLE);
        txt.setVisibility(View.VISIBLE);

        break;

    case R.id.cancel_btn:
        layout.setVisibility(View.INVISIBLE);
        txt.setVisibility(View.VISIBLE);
        break;
    case R.id.txt_name:
        txt.setVisibility(View.INVISIBLE);
        layout.setVisibility(View.VISIBLE);

        break;

    }

} 
```

}

创建一个 XML `skypetextview`。您可以自定义字体和背景，使其更漂亮。

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TextView
        android:id="@+id/txt_name"
        android:layout_width="fill_parent"
        android:layout_height="100dp"
        android:textColor="#FFFFFF"
        android:textSize="14sp"
        android:background="#ff0000" />

    <RelativeLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:visibility="invisible"
        android:id="@+id/layout" >

        <EditText
            android:id="@+id/edt"
            android:layout_width="270dp"
            android:layout_height="100dp" />

        <Button
            android:id="@+id/ok_btn"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_toRightOf="@id/edt"
            android:text="OK" />

        <Button
            android:id="@+id/cancel_btn"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@id/ok_btn"
            android:layout_toRightOf="@id/edt"
            android:text="Cancel" />
    </RelativeLayout>
</RelativeLayout> 
```

将此视图添加（或包含）到您想要的布局中。例子 ：

```
public class TestActivity extends Activity  {   

SkypeTextView test;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    LayoutInflater inflate = getLayoutInflater();
    test = (SkypeTextView ) inflate.inflate(R.layout.compound_text_view,
            null);
    setContentView(test);
} 
```

PS：我忘了。您应该为您的文本视图添加一些`underline`格式，以使用户注意到它可点击

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T18:35:43.360

让一个`EditText`基于其状态（可编辑或冻结）更改其背景。设置执行此操作的背景选择器。

使用此选择器 xml

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:state_focused="true" android:drawable="@android:drawable/edit_text"/>
    <item android:drawable="@android:drawable/screen_background_light_transparent"/>
</selector> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T17:04:29.217

就像我在星期四说的那样……尤尔非常接近，但不是很接近。他确实有一个大致相同的想法，但（理论上）过早地冲进代码；）

下面提供的 TextBoxOnDemand 代码可用于生产。这个想法类似于我想在 OP 中避免的以及 Yul 建议的，但具有最佳实现（例如，使用 ViewSwitcher 而不是 RelativeLayout）

我在以下文章中收集了为此所需的资源：

[从 xml 创建自定义视图](https://stackoverflow.com/questions/5756642/creating-custom-view-from-xml)

[使用 XML 声明一个自定义的 android UI 元素](https://stackoverflow.com/questions/2695646/declaring-a-custom-android-ui-element-using-xml)

[定义自定义属性](https://stackoverflow.com/questions/3441396/defining-custom-attrs)

[如何在 java 和 xml 中传递自定义组件参数](https://stackoverflow.com/questions/4495511/how-to-pass-custom-component-parameters-in-java-and-xml)

[http://kevindion.com/2011/01/custom-xml-attributes-for-android-widgets/](http://kevindion.com/2011/01/custom-xml-attributes-for-android-widgets/)

并决定在这里发布它们，因为官方的谷歌“培训”文档是无用的，要么已经过时（不推荐），要么没有涵盖我需要的内容。我希望你不介意我声称自己的赏金，但这是我想要的解决方案（并且预期，因此赏金）。我想代码将不得不这样做;）

TextBoxOnDemand.java：

```
 package com.skype.widget;

import android.content.Context;
import android.content.res.ColorStateList;
import android.content.res.TypedArray;
import android.text.SpannableString;
import android.text.style.UnderlineSpan;
import android.text.util.Linkify;
import android.util.AttributeSet;
import android.util.Log;
import android.view.KeyEvent;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.View.OnFocusChangeListener;
import android.view.View.OnHoverListener;
import android.view.View.OnLongClickListener;
import android.widget.EditText;
import android.widget.ImageButton;
import android.widget.RelativeLayout;
import android.widget.TextView;
import android.widget.TextView.OnEditorActionListener;
import android.widget.ViewSwitcher;

import com.skype.ref.R;
import com.skype.ref.RemoteKeys;

public class TextBoxOnDemand extends ViewSwitcher implements OnClickListener, OnLongClickListener, OnFocusChangeListener, OnHoverListener,
        OnEditorActionListener
{
    public static final String  LOGTAG          = "TextBoxOnDemand";

    private View                btmGuard;
    private ImageButton         cancel, accept;
    private EditText            editor;
    private RelativeLayout      editorLayout;
    private TextView            face;
    private String              hint            = new String();
    private boolean             inEditMode      = false;                    //normally this is in textview mode
    private boolean             inputReady      = false;
    private String              ourData         = new String();
    private String              prefillData     = new String();
    private String              tag             = new String();         //usually tag is empty.
    private View                topGuard;
    private int                 autoLinkMask;// = Linkify.EMAIL_ADDRESSES;  //Linkify.ALL;
    private ColorStateList      textColor, hintColor = null;

    public TextBoxOnDemand(Context context)
    {
        super(context);
        build(context);
        setEditable(false); //init
    }

    public TextBoxOnDemand(Context context, AttributeSet attrs)
    {
        super(context, attrs);
        build(context);
        init(context, attrs);
        setEditable(false); //init
    }

    public String getPrefillData()
    {
        return prefillData;
    }

    public String getTag()
    {
        return tag;
    }

    public String getText()
    {
        Log.d(LOGTAG, "getText() returning '" + ourData + "'");
        return ourData;
    }

    public boolean hasPrefillData()
    {
        return prefillData.isEmpty();
    }

    public boolean isEditable()
    {
        Log.d(LOGTAG, "isEditable() returning " + inEditMode);
        return inEditMode;
    }

    @Override
    public void onClick(View v)
    {
        Log.d(LOGTAG, "onClick(" + v + ")");
        if (inEditMode)
        {
            if (v.equals(accept))
            {
                if (editor.getEditableText().length() == 0 || editor.getEditableText().length() > 5)
                    ourData = editor.getEditableText().toString();

                setEditable(false);
            } else if (v.equals(cancel))
            {
                setEditable(false);
            }
        }
    }

    @Override
    public boolean onEditorAction(TextView v, int actionId, KeyEvent event)
    {
        //      Log.d(LOGTAG, "onEditorAction(" + v + ", " + actionId + ", " + event + ") fired!");
        Log.d(LOGTAG, "onEditorAction() fired, inputReady = " + inputReady);
        if (editor.getEditableText().length() > 0 && editor.getEditableText().length() < (prefillData.length() + 2)) return true;   //the user needs to enter something

        if (inputReady && (event.getKeyCode() == RemoteKeys.ENTER.keycode() || event.getKeyCode() == KeyEvent.KEYCODE_ENTER))   //always is
        {
            if (editor.getEditableText().length() > prefillData.length() || editor.getEditableText().length() == 0)
                ourData = editor.getEditableText().toString();

            setEditable(false);
            return false;
        }

        if ((editor.getEditableText().toString().compareToIgnoreCase(ourData) == 0 || editor.getEditableText().toString()
                .compareToIgnoreCase(prefillData) == 0)
                && !inputReady) //means we didn't just keep on holding enter
            return true;
        else
            inputReady = true;

        return true;
    }

    @Override
    public void onFocusChange(View v, boolean hasFocus)
    {
        Log.d(LOGTAG, "onFocusChange(" + v + ", " + hasFocus + ")\tinEditMode = " + inEditMode);
        if (inEditMode)
        {
            if (hasFocus && (v.equals(topGuard) || v.equals(btmGuard)))
            {
                setEditable(false);
                requestFocus();
            }

            if (hasFocus && (v.equals(editor) || v.equals(accept) || v.equals(cancel)))
            {
                //do nothing, you should be able to browse freely here
                if (ourData.isEmpty() && editor.getEditableText().length() < prefillData.length())
                {
                    Log.d(LOGTAG, "adding prefill, before = " + editor.getEditableText());
                    editor.setText("");
                    editor.append(prefillData);
                    Log.d(LOGTAG, "now is = " + editor.getEditableText());
                }
            }
        } else
        {
            String text = (ourData.isEmpty()) ? hint : ourData;
            ColorStateList color;
            if (hintColor != null && ourData.isEmpty())
                color = hintColor;
            else
                color = textColor;
            face.setTextColor(color);
            if (hasFocus)
            {
                SpannableString ss = new SpannableString(text);
                ss.setSpan(new UnderlineSpan(), 0, text.length(), 0);
                face.setText(ss);
            } else
                face.setText(text);
        }
    }

    @Override
    public boolean onHover(View v, MotionEvent event)
    {
        //      Log.d(LOGTAG, "onHover()");
        String text = (ourData.isEmpty()) ? hint : ourData;
        ColorStateList color;
        if (hintColor != null && ourData.isEmpty())
            color = hintColor;
        else
            color = textColor;
        face.setTextColor(color);
        switch (event.getAction())
        {
            case MotionEvent.ACTION_HOVER_ENTER:
                SpannableString ss = new SpannableString(text);
                ss.setSpan(new UnderlineSpan(), 0, text.length(), 0);
                face.setText(ss);
                break;
            case MotionEvent.ACTION_HOVER_EXIT:
                face.setText(text);
                break;
        }
        return true;
    }

    @Override
    public boolean onLongClick(View v)
    {
        Log.d(LOGTAG, "onLongClick()\tinEditMode = " + inEditMode);
        if (!inEditMode) //implies that getDisplayedChild() == 0, meaning the textview
        {
            setEditable(true);
            return true;
        } else
            return false;
    }

    public void setEditable(boolean value)
    {
        Log.d(LOGTAG, "setEditable(" + value + ")");
        inEditMode = value;
        if (inEditMode)
        {
            //display the editorLayout
            face.setOnLongClickListener(null);
            face.setOnHoverListener(null);
            face.setOnFocusChangeListener(null);    //because of GC.
            face.setOnClickListener(null);
            face.setVisibility(View.GONE);
            setDisplayedChild(1);
            editorLayout.setVisibility(View.VISIBLE);
            editor.setOnFocusChangeListener(this);
            editor.setOnEditorActionListener(this);
            cancel.setOnClickListener(this);
            accept.setOnClickListener(this);
            accept.setOnFocusChangeListener(this);
            cancel.setOnFocusChangeListener(this);
        } else
        {
            editor.setOnFocusChangeListener(null);
            editor.setOnEditorActionListener(null);
            cancel.setOnClickListener(null);
            accept.setOnClickListener(null);
            accept.setOnFocusChangeListener(null);
            cancel.setOnFocusChangeListener(null);
            editorLayout.setVisibility(View.GONE);
            setDisplayedChild(0);
            face.setVisibility(View.VISIBLE);
            face.setOnLongClickListener(this);
            face.setOnHoverListener(this);
            face.setOnFocusChangeListener(this);
            face.setOnClickListener(this);
            face.setFocusable(true);
            face.setFocusableInTouchMode(true);
        }
        updateViews();
    }

    @Override
    public void setNextFocusDownId(int nextFocusDownId)
    {
        super.setNextFocusDownId(nextFocusDownId);
        face.setNextFocusDownId(nextFocusDownId);
        //      editor.setNextFocusDownId(nextFocusDownId);
        accept.setNextFocusDownId(nextFocusDownId);
        cancel.setNextFocusDownId(nextFocusDownId);
    }

    @Override
    public void setNextFocusForwardId(int nextFocusForwardId)
    {
        super.setNextFocusForwardId(nextFocusForwardId);
        face.setNextFocusForwardId(nextFocusForwardId);
        editor.setNextFocusForwardId(nextFocusForwardId);
    }

    @Override
    public void setNextFocusLeftId(int nextFocusLeftId)
    {
        super.setNextFocusLeftId(nextFocusLeftId);
        face.setNextFocusLeftId(nextFocusLeftId);
        editor.setNextFocusLeftId(nextFocusLeftId);
    }

    @Override
    public void setNextFocusRightId(int nextFocusRightId)
    {
        super.setNextFocusRightId(nextFocusRightId);
        face.setNextFocusRightId(nextFocusRightId);
        cancel.setNextFocusRightId(nextFocusRightId);
    }

    @Override
    public void setNextFocusUpId(int nextFocusUpId)
    {
        super.setNextFocusUpId(nextFocusUpId);
        face.setNextFocusUpId(nextFocusUpId);
        //      editor.setNextFocusUpId(nextFocusUpId);
        accept.setNextFocusUpId(nextFocusUpId);
        cancel.setNextFocusUpId(nextFocusUpId);
    }

    public void setPrefillData(String prefillData)
    {
        this.prefillData = new String(prefillData);
    }

    public String setTag()
    {
        return tag;
    }

    public void setText(String text)
    {
        Log.d(LOGTAG, "setText(" + text + ")");
        ourData = text;
        updateViews();
    }

    private void build(Context context)
    {
        Log.d(LOGTAG, "build()");
        addView(View.inflate(context, R.layout.textboxondemand, null));
        setFocusable(true);
        setFocusableInTouchMode(true);
        setDescendantFocusability(FOCUS_AFTER_DESCENDANTS);
        setOnFocusChangeListener(this);
        setOnLongClickListener(this);

        face = (TextView) findViewById(R.id.TBOD_textview);
        editorLayout = (RelativeLayout) findViewById(R.id.TBOD_layout);
        editor = (EditText) findViewById(R.id.TBOD_edittext);
        accept = (ImageButton) findViewById(R.id.TBOD_accept);
        cancel = (ImageButton) findViewById(R.id.TBOD_cancel);
        topGuard = (View) findViewById(R.id.TBOD_top);
        btmGuard = (View) findViewById(R.id.TBOD_bottom);

        face.setFocusable(true);
        face.setFocusableInTouchMode(true);

        face.setOnLongClickListener(this);
        face.setOnHoverListener(this);
        face.setOnFocusChangeListener(this);
        face.setOnClickListener(this);

        editor.setOnFocusChangeListener(this);
        editor.setOnEditorActionListener(this);
        editor.setHint(hint);
        editor.setFocusable(true);
        editor.setFocusableInTouchMode(true);

        accept.setOnClickListener(this);
        accept.setOnFocusChangeListener(this);
        accept.setFocusable(true);
        cancel.setFocusable(true);
        cancel.setOnFocusChangeListener(this);
        cancel.setOnClickListener(this);

        topGuard.setFocusable(true);
        topGuard.setOnFocusChangeListener(this);
        btmGuard.setFocusable(true);
        btmGuard.setOnFocusChangeListener(this);

        editor.setNextFocusRightId(R.id.TBOD_accept);
        editor.setNextFocusDownId(R.id.TBOD_bottom);
        editor.setNextFocusUpId(R.id.TBOD_top);

        accept.setNextFocusLeftId(R.id.TBOD_edittext);
        accept.setNextFocusRightId(R.id.TBOD_cancel);
        cancel.setNextFocusLeftId(R.id.TBOD_accept);
    }

    private void init(Context context, AttributeSet attrs)
    {
        TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.TextBoxOnDemand);
        //Use a
        Log.d(LOGTAG, "init()");
        if (a == null) Log.d(LOGTAG, "Did you include 'xmlns:app=\"http://schemas.android.com/apk/res-auto\"' in your root layout?");

        final int N = a.getIndexCount();
        for (int i = 0; i < N; ++i)
        {
            int attr = a.getIndex(i);
            switch (attr)
            {
                case R.styleable.TextBoxOnDemand_android_hint:
                    hint = new String(a.getString(attr));
                    editor.setHint(a.getString(attr));
                    break;
                case R.styleable.TextBoxOnDemand_android_text:
                    ourData = new String(a.getString(attr));
                    break;
                case R.styleable.TextBoxOnDemand_android_inputType:
                    int inputType = a.getInt(attr, -1);
                    if (inputType != -1) editor.setInputType(inputType);
                    break;
                case R.styleable.TextBoxOnDemand_android_textColor:
                    textColor = a.getColorStateList(attr);
                    face.setTextColor(textColor);
                    break;
                case R.styleable.TextBoxOnDemand_android_linksClickable:
                    face.setLinksClickable(a.getBoolean(attr, true));
                    break;
                case R.styleable.TextBoxOnDemand_android_textColorHint:
                    hintColor = a.getColorStateList(attr);
                    break;
                case R.styleable.TextBoxOnDemand_android_autoLink:
                    autoLinkMask = a.getInt(attr, 0);
                    face.setAutoLinkMask(autoLinkMask);
                    break;

                default:
                    Log.d(LOGTAG, "Skipping attribute " + attr);
            }
        }

        //Don't forget this
        a.recycle();
    }

    private void updateViews()
    {
        Log.d(LOGTAG, "updateViews()");
        //      if (getDisplayedChild() == 0)   //first child - textview
        if (!inEditMode)    //first child - textview
        {
            if (ourData.isEmpty())
            {
                if (hintColor != null) face.setTextColor(hintColor);
                face.setText(hint);
            } else
            {
                face.setTextColor(textColor);
                face.setText(ourData);
            }
            face.setFocusable(true);
            face.setFocusableInTouchMode(true);
            face.setAutoLinkMask(autoLinkMask);
        } else
        {   //second child - edittext
            editor.setFocusable(true);
            editor.setFocusableInTouchMode(true);
            if (ourData.startsWith(prefillData) || ourData.length() >= prefillData.length())
                editor.setText("");
            else
                editor.setText(prefillData);

            editor.append(ourData);
            inputReady = false;

            editor.requestFocus();
        }
    }

    public void setAutoLinkMask(LinkifyEnum linkifyEnumConstant)
    {
        switch (linkifyEnumConstant)
        {
            case ALL:
                autoLinkMask = Linkify.ALL;
                break;
            case EMAIL_ADDRESSES:
                autoLinkMask = Linkify.EMAIL_ADDRESSES;
                break;
            case MAP_ADDRESSES:
                autoLinkMask = Linkify.MAP_ADDRESSES;
                break;
            case PHONE_NUMBERS:
                autoLinkMask = Linkify.PHONE_NUMBERS;
                break;
            case WEB_URLS:
                autoLinkMask = Linkify.WEB_URLS;
                break;

            case NONE:
            default:
                autoLinkMask = 0;
                break;
        }
        //set it now
        face.setAutoLinkMask(autoLinkMask);
    }

    public enum LinkifyEnum
    {
        ALL, EMAIL_ADDRESSES, MAP_ADDRESSES, PHONE_NUMBERS, WEB_URLS, NONE
    };

} 
```

我仍在解决一些与焦点相关的问题，但这按预期工作。当我使用 onFocuslistener 1 时，您无法从一个 TextBox 聚焦到另一个；当文本框本身可聚焦时，我可以从一个聚焦到另一个聚焦，但我不能通过孩子相互聚焦，因此不能专注于要输入的编辑文本。

XML文件：

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <TextView
        android:id="@+id/TBOD_textview"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:autoLink="email"
        android:focusable="true"
        android:focusableInTouchMode="true"
        android:linksClickable="true"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <RelativeLayout
        android:id="@+id/TBOD_layout"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <EditText
            android:id="@+id/TBOD_edittext"
            android:layout_width="300dp"
            android:layout_height="30dp"
            android:layout_below="@+id/TBOD_textview"
            android:focusable="true"
            android:focusableInTouchMode="true"
            android:imeOptions="actionDone"
            android:inputType="none"
            android:maxLines="1"
            android:padding="2dp"
            android:singleLine="true"
            android:textColor="@android:color/black"
            android:textSize="14dp" />

        <ImageButton
            android:id="@+id/TBOD_accept"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignTop="@+id/TBOD_edittext"
            android:layout_marginLeft="15dp"
            android:layout_toRightOf="@+id/TBOD_edittext"
            android:background="@drawable/button_accept_selector" />

        <ImageButton
            android:id="@+id/TBOD_cancel"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignTop="@+id/TBOD_edittext"
            android:layout_marginLeft="5dp"
            android:layout_toRightOf="@+id/TBOD_accept"
            android:background="@drawable/button_cancel_selector" />

        <View
            android:id="@+id/TBOD_top"
            android:layout_width="fill_parent"
            android:layout_height="0dp"
            android:layout_alignParentTop="true"
            android:background="@android:color/transparent" />

        <View
            android:id="@+id/TBOD_bottom"
            android:layout_width="fill_parent"
            android:layout_height="0dp"
            android:layout_alignParentBottom="true"
            android:background="@android:color/transparent" />
    </RelativeLayout>

</RelativeLayout> 
```

最后是 attrs.xml 文件：

```
 <?xml version="1.0" encoding="utf-8"?>
<resources>

    <declare-styleable name="TextBoxOnDemand">
        <attr name="android:text" />
        <attr name="android:inputType" />
        <attr name="android:hint" />
        <attr name="android:textColor" />
        <attr name="android:textColorHint" />
        <attr name="android:linksClickable" />
        <attr name="android:autoLink" />
    </declare-styleable>

</resources> 
```

这就是我在我的主 xml 中使用它的方式（在包含所需的命名空间添加之后）：

```
 <com.shark.widget.TextBoxOnDemand
    android:id="@+id/profile_email2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/profile_skypename"
    android:layout_below="@+id/profile_email_placeholder"
    android:hint="@string/add_email"
    android:inputType="textEmailAddress"
    android:textColor="@android:color/white"
    android:textColorHint="@color/skype_blue" /> 
```

编辑：我已经调试了焦点问题。事实证明，除非你打电话给孩子，否则很难把注意力集中在孩子身上

```
setDescendantFocusability(FOCUS_AFTER_DESCENDANTS); 
```

哪一种可以解决问题，但仍然没有解决。在与仍然试图获得完美行为的听众一起玩了一段时间之后`onFocusChange()`，我认输并添加了两个焦点守卫。我意识到我不能只在我的容器上跟踪焦点的丢失（因为它从未接收到焦点），但我不妨跟踪想要离开编辑字段的想法......所以我走了肮脏的路线并添加了两个不可见的条形视图将编辑文本夹在中间。一旦他们获得焦点，我就可以隐藏组件并确保它们正确过渡。

它就在那里，现在它可以正常工作了。感谢所有参与了的人。

EDIT3：最终完善的版本，我放弃了自定义标签，因为它们根本无法可靠地工作。要吸取的教训：如果有某个东西的 android 标签，不要费心去克隆它。

# magento - 从magento 1.7中的类别获取“活跃于”属性

> ID：11722342
> 
> 赞同：0
> 
> 时间：2012-07-30T13:13:53.443
> 
> 标签：magento, categories, magento-1.7

Mangento 1.7 类别中有预定义的属性，命名为

*   活跃于

*   主动

我可以使用以下方法获取当前产品类别的名称：

```
 $productId=$_helper->productAttribute($_product, $_product->getId(), 'id');
 $product = Mage::getModel('catalog/product')->load($productId);
 $cats = $product->getCategoryIds();
 foreach ($cats as $category_id) {
 $_cat = Mage::getModel('catalog/category')->load($category_id) ;
 echo $_cat->getName();
 } ?> 
```

但我还需要找到当前类别的活动日期。我如何获取这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T14:07:32.713

可能值得注意的是，这些值是针对类别的自定义设计的活动状态，而不是类别本身的实际活动状态......

**作为一个数组在一起：**

```
$_cat = Mage::getModel('catalog/category')->load($category_id);
$_customDesignDates = $_cat->getCustomDesignDate(); 
```

**或单独：**

```
$_cat = Mage::getModel('catalog/category')->load($category_id);
$fromDate = $_cat->getData('custom_design_from');
$toDate = $_cat->getData('custom_design_to'); 
```

# asp.net-mvc-3 - C#中如何计算文件大小

> ID：11722345
> 
> 赞同：0
> 
> 时间：2012-07-30T13:14:00.100
> 
> 标签：asp.net-mvc-3, c#-4.0

在我的 asp mvc 3 应用程序中，我有一个允许用户下载给定文件的操作。

这是代码：

```
public FilePathResult DownloadFile(string fileName)
    {
        try
        {
            string uploadsDocumentPath = System.Configuration.ConfigurationManager.AppSettings["uploadsDocumentPath"].ToString();
            string ext = Path.GetExtension(fileName).ToLower();
            Microsoft.Win32.RegistryKey regKey = Microsoft.Win32.Registry.ClassesRoot.OpenSubKey(ext); // henter info fra windows registry
            if (regKey != null && regKey.GetValue("Content Type") != null)
            {
                mimeType = regKey.GetValue("Content Type").ToString();
            }

            return File(uploadsDocumentPath + fileName, mimeType, fileName);
        }
        catch (Exception)
        {

            throw;
        }
    } 
```

我希望能够只允许下载大小小于 150MB 的文件。但我找不到如何计算这种文件的大小。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T13:15:59.457

我想这应该可行：

```
FileInfo file = new FileInfo(uploadsDocumentPath + fileName);
if(file.Length > 157286400)
{
      // Return error here.
} 
```

# shell - 用于 shell 脚本的便携式 getopt_long 等效项

> ID：11722349
> 
> 赞同：4
> 
> 时间：2012-07-30T13:14:27.867
> 
> 标签：shell, posix, getopt

我想在 shell 脚本中解析长选项。POSIX 仅提供`getopts`解析单字母选项。有谁知道在 shell 中实现长选项解析的可移植（POSIX）方法？我已经查看了`autoconf`生成`configure`脚本时的作用，但结果远非优雅。我可以接受只接受长选项的完整拼写。仍应允许单个字母选项，可能是分组。

我正在考虑一个 shell 函数，它采用空格分隔的 args 列表，形式为 option[=flags]，其中标志表示该选项采用 arg 或可以指定多次。与它的 C 对应物不同，不需要区分字符串、整数和浮点数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T14:40:21.860

### 针对可移植 shell`getopt_long`命令的设计说明

我有一个程序`getoptx`可以使用单字母选项（因此它不是您问题的答案），但它可以正确处理带有空格的参数，而原始`getopt`命令（与 shell 内置命令相反`getopts`）没有。源代码中的规范说：

```
/*
** Usage: eval set -- $(getoptx abc: "$@")
**        eval set -- $(getoptx abc: -a -c 'a b c' -b abc 'd e f')
** The positional parameters are:
** $1 = "-a"
** $2 = "-c"
** $3 = "a b c"
** $4 = "-b"
** $5 = "--"
** $6 = "abc"
** $7 = "d e f"
**
** The advantage of this over the standard getopt program is that it handles
** spaces and other metacharacters (including single quotes) in the option
** values and other arguments.  The standard code does not!  The downside is
** the non-standard invocation syntax compared with:
**
**        set -- $(getopt abc: "$@")
*/ 
```

我推荐`eval set -- $(getopt_long "$optspec" "$@")`你的符号`getopt_long`。

一个主要问题`getopt_long`是参数规范的复杂性——`$optspec`在示例中。

您可能想查看 Solaris [CLIP](http://wiki.open-esb.java.net/attach/GeneralUsageInformation/clip.pdf)（命令行界面范式）中使用的表示法；它使用单个字符串（如原始`getopt()`函数）来描述选项。（谷歌：“solaris clip 命令行界面范例”；仅使用“solaris clip”即可获得视频剪辑。）

该材料是源自 Sun 的部分示例`getopt_clip()`：

```
/*

Example 2: Check Options and Arguments.

The following example parses a set of command line options and prints
messages to standard output for each option and argument that it
encounters.

This example can be expanded to be CLIP-compliant by substituting the
long string for the optstring argument:

While not encouraged by the CLIP specification, multiple long-option
aliases can also be assigned as shown in the following example:

:a(ascii)b(binary):(in-file)(input)o:(outfile)(output)V(version)?(help)

*/

static const char *arg0 = 0;

static void print_help(void)
{
    printf("Usage: %s [-a][-b][-V][-?][-f file][-o file][path ...]\n", arg0);
    printf("Usage: %s [-ascii][-binary][-version][-in-file file][-out-file file][path ...]\n", arg0);
    exit(0);
}

static const char optstr[] =
    ":a(ascii)b(binary)f:(in-file)o:(out-file)V(version)?(help)";

int main(int argc, char **argv)
{
    int c;
    char *filename;

    arg0 = argv[0];
    while ((c = getopt_clip(argc, argv, optstr)) != -1)
    {
        ...
    }
    ...
} 
```

# java - 为什么 Set.contains() 似乎没有使用 o.equals()？

> ID：11722350
> 
> 赞同：5
> 
> 时间：2012-07-30T13:14:29.397
> 
> 标签：java, set, equals, comparable

我有一个包含包装器的 TreeSet，这些包装器将`Foo`对象存储在某个位置`position`，定义如下：

```
class Wrapper implements Comparable<Wrapper> {
  private final Foo foo;
  private final Double position;

  ...

  @Override boolean equals(Object o) {

    ... 

    if(o instanceof Wrapper)
        return o.getFoo().equals(this.foo);

    if(o instanceof Foo)
        return o.equals(this.foo);
  }

  @Override public int compareTo(MarkerWithPosition o) {
      return position.compareTo(o.getPosition());
  }
}

NavigableSet<Wrapper> fooWrappers = new TreeSet<Wrapper>(); 
```

因为我希望 my`TreeSet`被排序`position`但可以被搜索`foo`。但是当我执行这些操作时：

```
Foo foo = new Foo(bar);
Wrapper fooWrapper = new Wrapper(foo, 1.0);
fooWrappers.add(fooWrapper);

fooWrapper.equals(new Wrapper(new Foo(bar), 1.0));
fooWrapper.equals(new Foo(bar));
fooWrappers.contains(fooWrapper);
fooWrappers.contains(new Wrapper(foo, 1.0));
fooWrappers.contains(new Wrapper(new Foo(bar), 1.0));
fooWrappers.contains(new Wrapper(foo, 2.0));
fooWrappers.contains(foo); 
```

我得到：

```
true
true
true
true
true
false
Exception in thread "main" java.lang.ClassCastException: org.gridqtl.Marker cannot be cast to java.lang.Comparable
    at java.util.TreeMap.getEntry(TreeMap.java:325)
    at java.util.TreeMap.containsKey(TreeMap.java:209)
    at java.util.TreeSet.contains(TreeSet.java:217) 
```

当我希望他们全部返回`true`时，似乎没有像 API[建议](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html#contains%28java.lang.Object%29)`TreeSet.contains`的那样使用我的方法。我需要覆盖另一种方法吗？`equals`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-30T13:17:39.143

TreeSet 是一个确实使用的 Set 实现`compareTo`，如[javadoc-](http://docs.oracle.com/javase/7/docs/api/java/util/TreeSet.html)强调我的解释：

> 请注意，如果要正确实现 Set 接口，集合维护的顺序（无论是否提供显式比较器）必须与 equals 一致。（参见 Comparable 或 Comparator 以获得与 equals 一致的精确定义。）这是因为**Set 接口是根据 equals 操作定义的，但 TreeSet 实例使用其 compareTo（或 compare）方法执行所有元素比较**，所以**两个从集合的角度来看，此方法认为相等的元素是 equal**。一个集合的行为是明确定义的，即使它的顺序与equals不一致；它只是不遵守 Set 接口的一般约定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T13:19:05.977

TreeSet 是一个有序集合。

`equals`无法为您提供订购信息，因此 TreeSet 必须使用其他东西。

这个“其他东西”是`Comparable`接口，或者它的表亲`Comparator`接口。

这两个接口都提供了有关如何对一个类的 2 个对象进行排序的信息。

# design-patterns - 为什么我们需要访问者设计模式中的访问方法？

> ID：11722352
> 
> 赞同：3
> 
> 时间：2012-07-30T13:14:39.463
> 
> 标签：design-patterns

为什么我们需要在访问者 DP 中同时使用`accept`和函数？`visit`如果我们举一个典型的例子：

```
class Visitor {
  visit(A a) { }
  visit(B b) { }
}

interface Element {
  accept(Visitor v);
}

class A implements Element {
  accept(Visitor v) {
    v.visit(this); // will call visit(A)
  }
}

class B implements Element {
  accept(Visitor v) {
    v.visit(this); // will call visit(B)
  }
} 
```

要使用访问者 DP，我们有一个 的实例和一个 的实例`v`，我们这样做：`Visitor``e``Element`

```
e.visit(v) 
```

它只是调用

```
v.visit(e) 
```

那么为什么我们不能简单地进行第二次调用并绕过中介函数呢？由于我认为 GoF 并不愚蠢，我想我错过了一些东西。它是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T13:31:04.717

[这](http://en.wikipedia.org/wiki/Visitor_pattern)是访问者模式的一个很好的参考，他们在其中提到了以下内容：

> 当在程序中调用 accept() 方法时，它的实现是基于以下两者来选择的：
> 
> *   元素的动态类型。
> *   访问者的静态类型。
> 
> 当调用关联的 visit() 方法时，它的实现是基于以下两者选择的：
> 
> *   访问者的动态类型。
> *   从 accept() 方法的实现中已知的元素的静态类型，它与元素的动态类型相同。（作为奖励，如果访问者无法处理给定元素类型的参数，那么编译器将捕获错误。）
> 
> 因此，visit() 方法的实现是基于以下两种情况选择的：
> 
> *   元素的动态类型。
> *   访问者的动态类型。

然后他们继续提到以下内容：

> 这有效地实现了双重调度......
> 
> 这样，可以编写一个算法来遍历元素图，并且可以在遍历期间执行许多不同类型的操作，方法是根据元素的动态类型和元素的动态类型提供不同类型的访问者与元素进行交互来访者。

这可以在 Java car 示例中看到：

```
class Car implements CarElement {
    CarElement[] elements;
    // ...
    public void accept(CarElementVisitor visitor) {     
        for(CarElement elem : elements) {
            elem.accept(visitor);
        }
        visitor.visit(this); 
    }
} 
```

因此，总而言之，在您的示例中，您不会从原始 DP 实现中获得太多好处，但如果示例更复杂，例如它是具有多个 Element 内部实现的[Composite](http://en.wikipedia.org/wiki/Composite_pattern)（如上面的 Java 汽车示例），那么它可以将访问者行为应用于其部分或全部内部元素。

根据您对原始问题的评论，此模式有两个部分：

1.  该模式的最初动机是：访问对象的复杂结构并对它们执行操作，而不改变被访问的类接口。
2.  模式是如何实现的：正如你提到的那样，它是双重调度。

我强烈推荐以下设计模式书，因为它确实简化了许多概念。GoF 的书有时过于学术。

[头部优先设计模式](https://rads.stackoverflow.com/amzn/click/com/0596007124)

根据这本书，以下是使用访客的利弊：

（在所用示例的上下文中）

专业人士

*   允许您在不更改结构本身的情况下向复合结构添加操作
*   添加新操作相对容易
*   访问者执行操作的代码是集中的

缺点

*   当使用访问者时，复合类的封装被破坏。
*   因为涉及到遍历函数，所以修改Composite结构比较困难

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T14:00:33.727

它非常简单（但可能有点混乱），访问者模式的重点是将访问者与被访问的事物分离。

accept() 允许访问者选择它将向特定类型的访问者公开的行为。

布雷迪说了同样的话，我只是想少说几句

# android - 无法从联系人获取正确的生日和周年纪念数据

> ID：11722353
> 
> 赞同：0
> 
> 时间：2012-07-30T13:14:40.260
> 
> 标签：android, contactscontract

我能够获取联系人的其他信息（显示名称、组织、电话号码和 email_id），但无法获取该联系人的生日和周年纪念日。

这是我用于生日的代码。它确实获取了数据，但给了我错误的数据，即为所有联系人重复相同的数据。

```
private String getBDate(String id) {
    String bday = null;
    ContentResolver cr = getContentResolver();
    Uri uri = ContactsContract.Data.CONTENT_URI;
    String[] projection = new String[] {
            ContactsContract.Contacts.DISPLAY_NAME,
            ContactsContract.CommonDataKinds.Event.CONTACT_ID,
            ContactsContract.CommonDataKinds.Event.START_DATE };
    String where = ContactsContract.Data.MIMETYPE + "= ? AND "
            + ContactsContract.CommonDataKinds.Event.TYPE + "="
            + ContactsContract.CommonDataKinds.Event.TYPE_BIRTHDAY;
    String[] selectionArgs = new String[] { ContactsContract.CommonDataKinds.Event.CONTENT_ITEM_TYPE };
    String sortOrder = null;
    Cursor cur = cr.query(uri, projection, where, selectionArgs, sortOrder);
    while (cur.moveToNext()) {
        bday = cur
                .getString(cur
                        .getColumnIndex(ContactsContract.CommonDataKinds.Event.START_DATE));
        Log.v("Birthday", bday);
    }
    cur.close();
    return bday;
} 
```

周年纪念日也是如此，这是它的代码。在某些情况下，不会添加周年纪念日，但仍会显示来自其他联系人的数据。

```
private String getAnnv(String id) {
    String annv = null;
    ContentResolver cr = getContentResolver();
    Uri uri = ContactsContract.Data.CONTENT_URI;
    String[] projection = new String[] {
            ContactsContract.Contacts.DISPLAY_NAME,
            ContactsContract.CommonDataKinds.Event.CONTACT_ID,
            ContactsContract.CommonDataKinds.Event.START_DATE };
    String where = ContactsContract.Data.MIMETYPE + "= ? AND "
            + ContactsContract.CommonDataKinds.Event.TYPE + "="
            + ContactsContract.CommonDataKinds.Event.TYPE_ANNIVERSARY;
    String[] selectionArgs = new String[] { ContactsContract.CommonDataKinds.Event.CONTENT_ITEM_TYPE };
    // String sortOrder = null;
    Cursor cur = cr.query(uri, projection, where, selectionArgs, null);
    while (cur.moveToNext()) {
        annv = cur
                .getString(cur
                        .getColumnIndex(ContactsContract.CommonDataKinds.Event.START_DATE));
        Log.v("Anniversary", annv);
    }
    cur.close();
    return annv;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T13:21:49.517

您没有在 where 条件下使用 String id 参数，因此请再次检查。

例如，私有 String getAnnv(String id) 函数具有 ID 输入，但似乎没有与函数一起使用，因此请将该 ID 用于条件检查，这应该可以工作。

例如

```
ContactsContract.CommonDataKinds.Event.CONTACT_ID + "=  " +  ID
AND ContactsContract.Data.MIMETYPE + "= ? AND " 
```

# php - mysql like 子句不适用于数组 php

> ID：11722359
> 
> 赞同：0
> 
> 时间：2012-07-30T13:14:58.697
> 
> 标签：php, mysql, arrays

您好，我正在尝试计算位置列中有多少行，其中名称包括预定义的 $uk_array 中的任何名称。

mysql 打印出我的列“there are ()”中没有任何值与数组中的名称匹配，尽管有一个“Dublin, Ireland”。

这是代码：

```
 <?php
    include'connect.php';
    $uk_array = array('Liverpool','London','London UK','UK','London',
    'Dublin, Ireland','Manchester','Norwich','United Kingdom','Norwich','Duplin','England','ENGLAND',
    'united kingdom');

    $string = '';

    foreach($uk_array as $term=>$i) {
        $string = $string."location LIKE '%".$i."%' AND";
    }
    $string = substr($string, 0, -5);
    $query="SELECT COUNT(location) as location FROM tweets WHERE $string";
    $result = mysql_query($query) or die(mysql_error());
    while($row = mysql_fetch_array($result)){
        echo "There are ". $row['location']."";

    }

    ?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T13:16:26.010

你应该做

```
$string = $string."location LIKE '%".$i."%' OR"; 
```

用 OR 运算符切换 AND 运算符，否则该字段必须包含 uk_array 中的所有值。

另外，你有一个错字——都柏林？

编辑：更多错误

```
foreach($uk_array as $term=>$i) {
    if($term) $string .= ' OR '; // only append OR if it's not the first one
    $string .= "location LIKE '%".$i."%'";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T13:19:35.793

您可能需要使用**OR**运算符

```
 // change this
  // $string = $string."location LIKE '%".$i."%' AND";
  // to
   $string = $string."location LIKE '%".$i."%' OR";
 // and 
 // $string = substr($string, 0, -5);
 // to
 $string = substr($string, 0, -3); 
```

# android - 网格布局兼容性

> ID：11722362
> 
> 赞同：0
> 
> 时间：2012-07-30T13:15:15.867
> 
> 标签：android

我正在开发一个需要使 GridLayout 兼容的应用程序。因此，我正在按照[此](https://github.com/dlew/android-gridlayout)链接中给出的步骤进行操作。我已经下载了 zip 文件夹，并且也将其作为库。在实施之前一切正常。当我尝试按照给定链接中的描述更改 main.xml 时，我得到了。错误代码如下。

```
<com.gridlayout.GridLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:gridlayout="http://schemas.android.com/apk/res/com.CompatGrid.MakeCompatible"
android:layout_width="match_parent"
android:layout_height="match_parent"
gridlayout:alignmentMode="alignBounds"
gridlayout:columnCount="4"
gridlayout:columnOrderPreserved="false"
gridlayout:useDefaultMargins="true" > 
```

我的包名称是`"com.CompatGrid"`，我`Activity`的`"MakeCompatible".`错误是在第 3 行、第 4 行、第 5 行和第 6 行。错误是这样的。

```
error:No resource identifier found for attribute 'alignmentMode' in package 'MakeCompatible'.
error:No resource identifier found for attribute 'columnCount' in package 'MakeCompatible'.
error:No resource identifier found for attribute 'columnOrderPreserved' in package 'MakeCompatible'.
error:No resource identifier found for attribute 'useDefaultMargins' in package 'MakeCompatible'. 
```

我已经按照指示完成了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T12:36:51.633

一遍又一遍地阅读后，我发现了我的错误。它在第 2 行。

```
xmlns:gridlayout="http://schemas.android.com/apk/res/com.CompatGrid.MakeCompatible" 
```

我将其编辑为

```
xmlns:gridlayout="http://schemas.android.com/apk/res/com.CompatGrid" 
```

我的错误是我必须使用包名，而不是 main.xml 中的主 Activity 类名。

# java - Struts1 根据具体格式输出 util.Date 对于不同的语言环境

> ID：11722363
> 
> 赞同：1
> 
> 时间：2012-07-30T13:15:26.227
> 
> 标签：java, date, date-format, struts-1

我使用 Struts 1。

还有下一颗豆子

```
import java.util.Date;

public class Event {
     private String name;
     private Date date;
     // getters & setters
} 
```

并形成

```
public class Holiday {
    private Event event;
    // getters & setters
} 
```

我有用于添加新假期的 jsp

```
<html:text name="holidayForm" property="event.date" altKey="date.pattern" maxlength="10" size="10" /></label> 
```

而且我无法在 jsp 上获取日期或将默认日期设置为`Date date = new Date();`特定格式。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T13:25:51.830

`Date`与其将您的字段设为 a ，不如将其设为 a`String`以正确格式表示日期。您可以使用`SimpleDateFormatter`该类在两者之间进行转换。您还可以查看[jQuery UI Datepicker 模块](http://jqueryui.com/demos/datepicker/)（Javascript，因此它将在客户端运行）以允许您的用户选择日期（以正确的格式），而不是自己输入日期。

Struts 1 form bean 属性几乎总是字符串，因为内置类型转换非常有限。如果您将文本输入直接映射到表单 bean 类中的日期字段，则该值应采用格式`YYYY-MM-DD`，如果不匹配，您将收到错误 500: beanUtils.populate 错误。

# linux - Linux：将 DD 结果输出到文本文件

> ID：11722365
> 
> 赞同：10
> 
> 时间：2012-07-30T13:15:27.257
> 
> 标签：linux, bash, shell

我正在编写一个脚本来测试我的硬盘的读写速度。我已经能够使用 hdparm 命令输出读取速度。我正在使用这条线来测试写入速度： dd if=/dev/zero of=/tmp/test.data bs=1k count=128k

这将输出到窗口：

131072+0 记录在 131072+0 记录输出 134217728 字节 (134 MB) 复制，1.18678 秒，113 MB/秒

我尝试使用 >> 和 > 将结果输出到文本文件，但这些都不起作用。有谁知道我如何将结果输出到文本文件？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-30T13:18:32.283

它们输出到标准错误，所以尝试使用`2>`而不是`>`

```
dd if=/dev/zero of=/tmp/test.data bs=1k count=128k 2> output.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T17:17:21.680

dd 适合顺序写入，但也可以检查 iozone 和 bonnie。轨道内的寻道往往比从一个轨道到另一轨道的寻道快得多，因此随机 I/O 可能与顺序 I/O 非常不同。

# c# - 与 C# 中的自动完成文本框相关的问题

> ID：11722368
> 
> 赞同：1
> 
> 时间：2012-07-30T13:15:33.427
> 
> 标签：c#, vb.net, winforms

我有 Windows 应用程序，我添加了一个`Textbox`并设置了`AutoCompleteSource`属性...

```
 txt.AutoCompleteMode = AutoCompleteMode.Suggest;
            txt.AutoCompleteSource = AutoCompleteSource.CustomSource;
            txt.AutoCompleteCustomSource = collection; 
```

我已经从数据库中设置了收集数据..

但是，当用户从`Textbox`.. 的下拉列表中选择一些文本并点击`tab`移动到其他文本框或控件时.. 没有任何反应.. 我的意思是`tab`键不起作用并且`Textbox`不会丢失它`focus()`，为什么？解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T13:20:33.157

它应该转到下一个控件 - 除非您在任何 textBox1 的事件中指定了一些代码。我刚刚检查了这段代码，它可以工作，它通过按 Tab 键进入下一个控件：

```
 public partial class Form1 : Form
 {
    public Form1()
    {
        InitializeComponent();
        string[] array = { "aaa", "abc", "acc", "aac", "acc", "bcc", "cbb", "bbb" };
        //upper line iy my custom array, you get it from database
        AutoCompleteStringCollection autoComplete = new AutoCompleteStringCollection();
        autoComplete.AddRange(array);
        textBox1.AutoCompleteMode = AutoCompleteMode.SuggestAppend;
        textBox1.AutoCompleteSource = AutoCompleteSource.CustomSource;
        textBox1.AutoCompleteCustomSource = autoComplete;

    }

    private void button1_Click(object sender, EventArgs e)
    {
        //you can use this event to get some data:
        string item = textBox1.Text.Trim();
    }
} 
```

如果你只有这个与 textBox 相关的代码就必须工作！

# windows-phone-7 - 如何在 wp7 中使用 RadJumpList 标头的 GroupDescriptors 添加更多项目？

> ID：11722372
> 
> 赞同：1
> 
> 时间：2012-07-30T13:15:52.997
> 
> 标签：windows-phone-7

如何在 wp7 中使用 RadJumpList 标头的 GroupDescriptors 添加更多项目？默认情况下，我们将 GroupDescriptors 作为 Header，我需要再添加一个属性，该属性包含在同一个 itemsource 中。

# git - 如何在不丢失工作的情况下返回上一次提交？

> ID：11722376
> 
> 赞同：1
> 
> 时间：2012-07-30T13:16:06.297
> 
> 标签：git

我刚刚做了一个提交，不小心留下了一些我应该删除的文件。如何在不丢失任何工作的情况下撤消此提交？我想撤消该提交，进入并删除 2 个文件，然后重新提交所有更改。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T13:17:48.633

您无需撤消任何操作。只要您没有推送提交：

```
git commit -a --amend -C HEAD 
```

将修改您刚刚所做的提交，保持相同的提交消息，提交任何更新或删除（但不是未跟踪的新）文件。

* * *

> 所以如果我删除文件然后运行它会将它添加到提交中？

是的，如果你想超级安全，你可以`git rm`文件并删除`-a`标志：

```
git rm files/to/delete
git commit --amend -C HEAD 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T14:28:58.660

首先存储你当前的工作

> 混帐藏匿

然后开始交互式变基：

> git rebase -i HEAD~5

您将看到您的提交列表，例如：

```
pick ff9c256 Added file manager logic
pick 8e09710 Added file manager UI 
```

将“pick”更改为“e”以进入提交的编辑模式，例如：

```
e 8e09710 Added file manager UI 
```

然后从提交中添加/删除文件，编辑要在提交中更改的文件，

然后

> git commit --amend

最后

> git rebase -- 继续

去最后一次提交和

> git 存储应用

恢复您当前的工作进度

# android - 在 AsyncTask 中调用 Web 服务时，应用程序因异常“已泄漏窗口”而崩溃

> ID：11722377
> 
> 赞同：0
> 
> 时间：2012-07-30T13:16:09.300
> 
> 标签：android, web-services, exception, android-asynctask, memory-leaks

以下是仅在我尝试调用方法 soapPHP() 时才会产生异常的代码，否则它会完美运行。经过多次尝试解决这个问题，我现在筋疲力尽。你们的任何帮助都将不胜感激。

```
private ProgressDialog pd;

@Override
protected void onCreate(Bundle savedInstanceState) 
{
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

    ThemeUtils.sTheme = ThemeUtils.THEME_BLUE;

    ThemeUtils.onActivityCreateSetTheme(MainMenuActivity.this);

    requestWindowFeature(Window.FEATURE_NO_TITLE);

    setContentView(R.layout.main_menu_screen);

    asynThread = new AsynThread();

    handler = new Handler() 
    {
        @Override
        public void dispatchMessage(Message msg) 
        {
            super.dispatchMessage(msg);
            dispLayMsg(globalMessage);
        }
    };

    asynThread.execute(GET_MAIN_MENU);

} 
```

--

```
public Object soapPHP(String METHOD_NAME, String SOAP_ACTION, String NAMESPACE, String URL)  
{
    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME); 
    request.addProperty("yourName", "Mohsin"); 

    SoapSerializationEnvelope envelope = 
    new SoapSerializationEnvelope(SoapEnvelope.VER11);

    envelope.setOutputSoapObject(request);
    AndroidHttpTransport httpTransport = new AndroidHttpTransport(URL);
    httpTransport.debug = true;
    Object response = null;
    try {

        httpTransport.call(SOAP_ACTION, envelope);
        response = envelope.getResponse();

    } 
    catch (Exception e) 
    {
    }

    return response;
} 
```

--

```
public class AsynThread extends AsyncTask<String, Void, String> 
{
    private String inputParam = "";

    @Override
    protected void onPreExecute() 
    {
        // TODO Auto-generated method stub
        super.onPreExecute();
        pd = ProgressDialog.show(MainMenuActivity.this, "Attention..",
            "Please wait");
    }

    @Override
    protected String doInBackground(String... params) 
    {
        // TODO Auto-generated method stub
        inputParam = params[0];
        if (inputParam.equalsIgnoreCase(GET_MAIN_MENU)) 
        {
            menu_adapter = new MenuListAdapter();
            MenuListItem item = new MenuListItem();

            item.setMenu_name("Menu");

            item.setMenu_desc("Menu Description");

            menu_adapter.add(item);

            Object obj = soapPHP(METHOD_NAME, SOAP_ACTION, NAMESPACE, URL);

            menu_adapter.add(item);

            menu_list = (ListView) findViewById(R.id.main_menu_list);

            menu_list.setAdapter(menu_adapter);
        }
        return null;
    }

    @Override
    protected void onPostExecute(String result) 
    {
        // TODO Auto-generated method stub
        super.onPostExecute(result);
        pd.dismiss();
        /*
        * if (inputParam.equalsIgnoreCase(UPLOAD)) { // uploadData(); }
        */
    }

} 
```

--

LogCat 中的异常：

```
07-30 17:51:10.882: E/WindowManager(5916): android.view.WindowLeaked: Activity com.tgu.sample.onlinemenu.ui.MainMenuActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@4052db78 that was originally added here 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T10:02:48.950

首先，这是因为您尝试在 UiThread 上运行 ProgressDialog 并且它必须在不同的线程上运行。

你可以试试这样使用

```
public class AsyncTaskHttpGet extends AsyncTask<String, Integer, String> {
private IHttpCallbackHandler _dataListener;
private ProgressDialog _dialog;
private Context mContext;

public AsyncTaskHttpGet(IHttpCallbackHandler dataListener, ProgressDialog dialog, Context context) {
    _dataListener = dataListener;
    _dialog = dialog;
    mContext = context;
}

@Override
protected String doInBackground(String... urls) {
    //todo: request via GET to certain URL
    return HttpClientWrapper.HttpGet(urls[0]);
}

@Override
protected void onPostExecute(String result) {
    if ( _dialog != null ) {
        if (_dialog.isShowing()) {
            _dialog.dismiss();
        }
    }
    _dataListener.OnHttpRequestDoneLoad(result); //gets data oncomplete
}

@Override
protected void onProgressUpdate(Integer... progress) {
}

@Override
protected void onPreExecute() {
    if ( _dialog != null ) {
        _dialog.setMessage(mContext.getString(R.string.load_data));
        _dialog.show();
    }
}

public interface IHttpCallbackHandler {
    void OnHttpRequestDoneLoad(String result);
} 
```

}

# android - Android - 在不同应用程序之间共享活动/代码

> ID：11722379
> 
> 赞同：7
> 
> 时间：2012-07-30T13:16:12.327
> 
> 标签：android, share

我有一个带有自定义徽标、一些自定义 json 服务端点、偶尔的自定义文本以及可能的自定义配色方案的 android 应用程序。

对于我的客户，这个特定的应用程序需要重新命名并作为一个完全不同的应用程序分发大约 5-10 次。所以我正在寻找重用最多代码的方法——除了我提到的自定义内容之外，活动和服务将是相同的。

首先，我如何共享项目，因为一个项目将包含所有代码（包括活动），而其他项目只修改一些值。我想不出一种聪明的方法来共享服务代码和活动代码，以及偶尔通过属性抛出的值。

android 布局/字符串资源文件是否能够从属性中提取？活动可以捆绑在一个 jar 中并与其他项目共享吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T13:20:43.673

您可以使用 Android 库项目来共享通用代码。从阅读 [这篇](https://developer.android.com/tools/projects/index.html#LibraryProjects)文章开始

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T14:24:14.030

您不必拥有不同的 java 命名空间，它们可以对所有项目通用。您只需要替换资源并修改清单以包含每个应用程序的不同命名空间。内部具有相同类名的多个应用程序没有问题。当然，除非您想一直重新命名它，否则用户找不到它实际上是相同的代码。

# ruby-on-rails-3 - 如何在 Rails 3 应用程序中显示具有动态数据的世界区域地图

> ID：11722380
> 
> 赞同：0
> 
> 时间：2012-07-30T13:16:11.663
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.1, wicked-pdf

我想在我的应用程序中显示具有区域明智数据分布的世界地图。在 Rails 应用程序中有哪些可用的不同选项

例子：

假设我有 3 个地区的 A、B 和 C。

还有总共 20 个用户，其中

10 个用户属于 A 区，

5属于区域B

5属于C区。

我想生成基于用户突出显示区域的世界地图。

如何在 Rails 3 中执行此操作？

**注意**： -`The map generated using this need to be shown inside PDF document.`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T13:33:30.553

你的意思是像谷歌地图这样的东西吗？使用 gmap api [Google-Maps-for-Rails 的](https://github.com/apneadiving/Google-Maps-for-Rails)Gem还有一些带有示例的截屏视频。

要生成 PDF，请尝试使用 html 生成器：[PDFkit](https://github.com/jdpace/PDFKit)

# perl - 使用系统命令通过 R 运行 perl 程序的问题

> ID：11722388
> 
> 赞同：0
> 
> 时间：2012-07-30T13:16:49.133
> 
> 标签：perl, r, system

当我使用系统运行我的 perl 程序时，出现以下错误。

```
> system("perl txt2xlsx.pl", intern=TRUE, wait=TRUE)
character(0)
attr(,"status")
[1] 2
Warning message:
running command 'perl txt2xlsx.pl' had status 2 
```

但是，当我从终端/控制台运行脚本时，它工作得非常好。出于测试目的，我将另一个仅将“输出”打印到屏幕的 perl 脚本放入同一目录并运行它：

```
> system("perl test.pl",     intern=TRUE, wait=TRUE) 
```

[1] “输出”

工作正常。

当您不带任何参数运行我的 txt2xlsx.pl 脚本时，它会打印：

```
Usage: txt2xlsx.pl <directory> <output file> 
```

谁能想象为什么 R 返回这个错误？在我更新到最新的 perl 版本之前它运行良好：

```
This is perl 5, version 12, subversion 4 (v5.12.4) built for darwin-multi-2level 
```

干杯

这是我的一些 perl 脚本：

```
#!/usr/bin/perl

use Excel::Writer::XLSX;

# Check command line args
if($#ARGV != 1) {
     die("Usage: $0 <directory> <output file>\n\n");
}

my $dir = $ARGV[0];
my $output = $ARGV[1];

print "Output    : $output\n";
print "Directory : $dir\n";

# Create excel workbook
my $wb = Excel::Writer::XLSX->new($output);

# Process files
foreach (glob("$dir/*.txt")) {

....

}
#EOF 
```

我做了一些更多的测试并减少了 perl 脚本以仅打印两个参数：

```
#!/usr/bin/perl

#use Excel::Writer::XLSX;

# Check command line args
if($#ARGV != 1) {
     die("Usage: $0 <directory> <output file>\n\n");
}

my $dir = $ARGV[0];
my $output = $ARGV[1];

print "Output    : $output\n";
print "Directory : $dir\n"; 
```

当我使用它的两个预期参数调用程序时，系统工作：

```
> system("perl test.pl asd dasd", intern=TRUE, wait=TRUE)
[1] "Output    : dasd" "Directory : asd" 
```

没有它会产生相同的错误消息：

```
> system("perl test.pl", intern=TRUE, wait=TRUE)
character(0)
attr(,"status")
[1] 255
Warning message:
running command 'perl test.pl asd dasd' had status 255 
```

我注意到当我使用失败评论`#use Excel::Writer::XLSX;`系统调用时：`system`

```
> system("perl test.pl asd dasd", intern=TRUE, wait=TRUE)
character(0)
attr(,"status")
[1] 2
Warning message:
running command 'perl test.pl asd dasd' had status 2 
```

所以看起来它不喜欢 XLSX perl 模块。但是，正如我已经提到的，在终端中运行脚本绝对可以。它还与更新前的 R 系统调用一起工作......

## --------------------

我正在使用 StatET 和 Eclipse，并尝试在普通 R 版本中运行它。那里的错误信息更加清晰。当我通过 R 调用 perl 调用时，perl 找不到代码中使用的 XLSX 包：

```
> system("perl test.pl asd asd", intern=TRUE, wait=TRUE)
character(0)
attr(,"status")
[1] 2
Warning message:
running command 'perl test.pl asd asd' had status 2 
Can't locate Excel/Writer/XLSX.pm in @INC (@INC contains: /Library/Perl/5.12/darwin- 
thread-multi-2level /Library/Perl/5.12 /Network/Library/Perl/5.12/darwin-thread-multi-
2level /Network/Library/Perl/5.12 /Library/Perl/Updates/5.12.4 
/System/Library/Perl/5.12/darwin-thread-multi-2level /System/Library/Perl/5.12 
/System/Library/Perl/Extras/5.12/darwin-thread-multi-2level 
/System/Library/Perl/Extras/5.12 .) at test.pl line 3.
BEGIN failed--compilation aborted at test.pl line 3. 
```

有人知道如何解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T13:23:39.893

我怀疑您的 perl 脚本实际上确实返回了退出代码 2，这是一个非标准值，意在发出信号。

正是因为通过 via 进行通信`system()`非常乏味，您可以考虑在 R 本身中执行此操作。如果源文件是ascii，则很容易阅读。并且包[XLConnect](http://cran.r-project.org/package=XLConnect)和[xlsx](http://cran.r-project.org/package=xlsx)允许您在 R 支持的任何平台上用 xlsx 编写（并且支持 Java，因为 xlsx 读/写代码来自 Java jar 文件库）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-17T09:05:43.653

当您在终端中运行程序时，您将设置一些环境变量集（如 PERL5LIB），在通过 R 运行时会丢失这些变量集，并且是指示 perl 查找 Excel::Writer::XLSX 的那个。

运行`env | grep PERL`找出哪个

然后您可以导出它，或将所需的值传递给 -I 参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T13:31:41.280

您的 perl 文件**需要命令行上的参数**。它应该像这样执行：

```
perl txt2xlsx.pl dir_to_outputfile outputfile.xls 
```

尝试将您的 R 文件更改为

```
system("perl txt2xlsx.pl dir_to_outputfile output.xls", intern=TRUE, wait=TRUE) 
```

# makefile - 在 Makefile 中导出环境变量

> ID：11722389
> 
> 赞同：2
> 
> 时间：2012-07-30T13:16:58.347
> 
> 标签：makefile, environment-variables

我有一个简单的 Makefile：

```
app : app.cpp
      g++ -c app.cpp -o app 
```

但是我的应用程序要求`var`设置环境变量（var := "/etc/file.cfg"），如何在 Makefile 中执行此操作？我的意思是，如何使它在我运行命令后`make Makefile`能够做到这一点：

`mazix@computer:~/Desktop/ echo $(var)`我将能够看到“/etc/file.cfg”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T13:18:33.327

进程不能在其父进程中设置环境变量；这就是 UNIX 的工作原理。

您可以创建一个设置变量并运行程序的小脚本。如果脚本的内容有些可变，您可以编写 Makefile 来为您生成脚本：

```
#!/bin/bash
export my_var=12345_mazix
./app 
```

或者，您的 Makefile 可以显示一个要复制并粘贴到`~/.profile`文件中的字符串，其中包含用于设置这些环境变量的一个或多个命令：

```
export my_var=12345_mazix 
```

# animation - 将非分层变换应用于分层骨架？

> ID：11722391
> 
> 赞同：3
> 
> 时间：2012-07-30T13:17:02.017
> 
> 标签：animation, 3d, matrix, blender, blender-2.61

我使用 Blender3D，但答案可能不是 API 专有的。

我有一些矩阵需要分配给 PoseBones。当没有骨骼层次（父子关系）时，生成的姿势看起来很好，而当有骨骼层次时，姿势看起来很乱。 ![在此处输入图像描述](../Images/4eb84017c27f6ceda7e62e815329bed0.png)

我在这里上传了一个包含装配模型、文本动画导入器和测试动画文件的示例混合的存档： [http](http://www.2shared.com/file/5qUjmnIs/sample_files.html)
: //www.2shared.com/file/5qUjmnIs/sample_files.html 通过选择一个骨架并运行来导入动画“sba”文件的进口商。对两个骨架执行此操作。

这就是我在真实（复杂）导入器中分配姿势的方式：

```
matrix_bases = ... # matrix from file
animation_matrix = matrix_basis * pose.bones['mybone'].matrix.copy()
pose.bones[bonename].matrix = animation_matrix 
```

如果我进入编辑模式，选择所有骨骼并按 Alt+P 撤消育儿，姿势看起来又很好了。

API 文档说 PoseBone.matrix 位于“对象空间”中，但从这些测试中我似乎很清楚它们与父骨骼相关。

> 应用约束和驱动程序后的最终 4x4 矩阵（**对象** 空间）

我试着做这样的事情：

```
matrix_basis = ... # matrix from file
animation_matrix = matrix_basis * (pose.bones['mybone'].matrix.copy()  * pose.bones[bonename].bone.parent.matrix_local.copy().inverted())
pose.bones[bonename].matrix = animation_matrix 
```

但看起来更糟。尝试了操作顺序，没有运气。

作为记录，在旧的 2.4 API 中，这就像一个魅力：

```
matrix_basis = ... # matrix from file
animation_matrix = armature.bones['mybone'].matrix['ARMATURESPACE'].copy() * matrix_basis
pose.bones[bonename].poseMatrix = animation_matrix

pose.update() 
```

链接到 Blender API 参考：

[http://www.blender.org/documentation/blender_python_api_2_63_17/bpy.types.BlendData.html#bpy.types.BlendData](http://www.blender.org/documentation/blender_python_api_2_63_17/bpy.types.BlendData.html#bpy.types.BlendData)

[http://www.blender.org/documentation/blender_python_api_2_63_17/bpy.types.PoseBone.html#bpy.types.PoseBone](http://www.blender.org/documentation/blender_python_api_2_63_17/bpy.types.PoseBone.html#bpy.types.PoseBone)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T06:23:02.163

“对象空间”可能确实意味着相对于父骨骼。您可以通过乘以父变换矩阵的逆矩阵从全局转换为局部。您可能还会发现您需要乘以所有父逆变换的串联：乘 B1 * inverse(B0) 和 B2 * (inverse(B1) * inverse(B0))。

下面是一些执行类似操作的示例代码（在 Panda3D 中，不是 Blender，但总体思路相同）。我们从 3 个具有全局位置和旋转值的骨骼开始，将它们放在一起，然后将全局坐标转换为正确的局部矩阵。

```
 # Load three boxes ('bones'), give them global position and rotation
    # each is 3 units long, at a 30 degree angle.  

    self.bone1=loader.loadModel("box.egg")
    self.bone1.reparentTo(render)

    self.bone2=loader.loadModel("box.egg")
    self.bone2.reparentTo(self.bone1)

    self.bone3=loader.loadModel("box.egg")
    self.bone3.reparentTo(self.bone2)

    ''' 
    equivalent code, in local coordinates
    self.bone1.setPos(0,0,0)
    self.bone1.setHpr(0,0,30)

    self.bone2.setPos(0,0,3)
    self.bone2.setHpr(0,0,30)

    self.bone3.setPos(0,0,3)
    self.bone3.setHpr(0,0,30)
    '''

    # give each a global rotation value

    R1=Mat4()
    R1.setRotateMat(30,Vec3(0,1,0))

    R2=Mat4()
    R2.setRotateMat(60,Vec3(0,1,0))

    R3=Mat4()
    R3.setRotateMat(90,Vec3(0,1,0))

    # set global translation values

    T1=Mat4()

    # position of bone 2 in global coords
    T2 = Mat4.translateMat(1.271,0,2.606) 

    # position of bone 3 in global coords
    T3 = Mat4.translateMat(3.782,0,4.036) 

    # set the matrix for bone 1
    M1 = R1 * T1
    self.bone1.setMat(M1)

    # get inverse of matrix of parent
    I1 = Mat4()
    I1.invertFrom (M1)

    # multiply bone2 matrix times inverse of parent

    M2 = R2 * T2
    M2 = M2 * I1

    self.bone2.setMat(M2)

    # get inverse of parent for next bone 

    I2 = Mat4()
    I2.invertFrom(M2)

    M3 = R3 * T3
    # notice that M3 * I2 isn't enough - needs to be M3 * (I1 * I2)
    M3 =  M3 * (I1 * I2)

    self.bone3.setMat(M3) 
```

# java - 如何将文件从applet返回到jsp

> ID：11722392
> 
> 赞同：0
> 
> 时间：2012-07-30T13:17:05.577
> 
> 标签：java, javascript, jsp, applet

我开发了一个签名的小程序，用于以加密形式上传文件。我从 jsp 调用的这个小程序运行良好，但我的问题是：我可以从 jsp 调用该小程序，以在 jsp 中返回加密文件并将该文件传递到服务器端吗？我可以在 applet 或 jsp 中为该加密文件创建多部分文件并将其发送到服务器吗？

**我正在运行的小程序看起来像：**

```
public static void encryptDecryptFile(String srcFileName,
            String destFileName, Key key, int cipherMode) throws Exception {
        OutputStream outputWriter = null;
        InputStream inputReader = null;     
        try {                   
            Cipher cipher = Cipher.getInstance("RSA/ECB/PKCS1Padding");         
            byte[] buf = cipherMode == Cipher.ENCRYPT_MODE ? new byte[100]
                    : new byte[128];
            int bufl;
            cipher.init(cipherMode, key);           
            outputWriter = new FileOutputStream(destFileName);
            inputReader = new FileInputStream(srcFileName);
            while ((bufl = inputReader.read(buf)) != -1) {          
                byte[] encText = null;
                if (cipherMode == Cipher.ENCRYPT_MODE)
                    encText = encrypt(copyBytes(buf, bufl), (PublicKey) key);
                else
                    encText = decrypt(copyBytes(buf, bufl), (PrivateKey) key);              
                outputWriter.write(encText);
            }           
        } catch (Exception e) {e.printStackTrace();
            throw e;
        } finally {
            try {
                if (outputWriter != null)
                    outputWriter.close();
                if (inputReader != null)
                    inputReader.close();
            } catch (Exception e) {
            }
        }
    } 
```

**我的调用 jsp 看起来像：**

```
<applet id="upload" name="upload" code="TestApplet.class" archive="Encrypt.jar" width="360" height="350"></applet> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T13:37:38.690

最简单的方法是使用[HttpClient Apache Commons](http://hc.apache.org/httpclient-3.x/apidocs/org/apache/commons/httpclient/package-summary.html)库。你必须在你的小程序中做这样的事情：

```
 public void sendFile throws IOException {
        HttpClient client = new HttpClient();
        PostMethod postMethod = new PostMethod("http://yourserverip:8080/yourServlet");

        File f = new File(destFileName);

        postMethod.setRequestBody(new FileInputStream(f));
        postMethod.setRequestHeader("Content-type",
            "text/xml; charset=ISO-8859-1");

        client.executeMethod(postMethod);
        postMethod.releaseConnection();
    } 
```

这将触发您的 servlet doPost() 方法，您可以在其中检索文件。正如您所说，您的小程序应该被签名以允许这样做。

# c# - MySQL中的数据库每日计数器

> ID：11722395
> 
> 赞同：1
> 
> 时间：2012-07-30T13:17:11.270
> 
> 标签：c#, mysql, sql, sql-update, database-schema

我想在 MySQL 数据库中创建计数器，用于存储每个产品在特定日期、月份和年份中的查看次数。

问题是我有大约 2000 种产品。我考虑过使用以下架构：

```
 id (BIGINT)
 year (INT[4])
 month (TINYINT)
 day (TINYINT)
 product_id (INT)
 pageviews (BIGINT) 
```

该解决方案的问题在于，如果在最坏的情况下，每天查看每个产品，我的数据库中每天将有 2000 行。乘以 36 天，我每个月将有 72,000 个。

我想知道是否有更好的方法来实现这一点。我认为每日数据将仅作为应用程序变量（在 .NET 中开发）和 ArrayList 保存在内存中。如果我选择了这个方向，我将拥有更少的行/数据，每月 2000 行。

我真的很想保持累积的每日页面浏览量。顺便说一句，预览只是为了说明目的，我会存储不同的数据，但这些数据会非常频繁地更新。

如果我使用每日专栏，它将非常频繁地更新，几乎每 2-5 秒一次。我打算通过从 Javascript 调用 ASP.NET Web 服务、传递 product_id 并增加计数器 +1 来更新 MySQL 异步。这是为了防止应用程序等待更新发生。

我也想知道估计表的大小。如果我做对了：

BIGINT = 8 个字节

日期时间 = 10 个字节

INT - 4 个字节

^如果我决定使用数据时间列而不是年/月/日

30 字节 * 2000 = 60,000 字节

60KB（大约）* 30 天 = 180KB 月

180KB 月 * 12 个月 = 2160KB / 年

我做对了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T07:36:39.753

好吧，我在数据库设计方面并不是那么出色，但我知道的很多……您应该问问自己，您希望将这些 2K 产品的每日点击量保存多长时间？

如果您只想将它​​们保存一周，那么您可以计算尺寸需要多少（如果您想保存一个月）。

如果您想将其保存一个月，那么您总是可以每个月制作一个表格，并将每日点击中的数据保存到该表格并将它们汇总起来，这样每个表格中只有 2K 行

或者您可以使用一个“仓库”表来保存每个月的所有点击量，并且每个月的数据将在您对每个月进行汇总后复制到该仓库表中。

如果您希望无限期地保存这些命中，那么据我所知，这就是方法（同样不是数据库设计大师）。

如果您想将点击次数最多保存一个月，这也是您应该做的。

希望我能帮到你，萨吉。

# c# - 只获取网站名称

> ID：11722397
> 
> 赞同：0
> 
> 时间：2012-07-30T13:17:16.163
> 
> 标签：c#, wpf

例如，我有以下 URL：

[http://www.beta.microsoft.com/path/page.htm](http://www.beta.microsoft.com/path/page.htm)

我需要从中检索名称，在这种情况下是：

微软

我需要获取网站的名称——没有子域、www、.com 扩展名和其他东西——只有名称。

如何以最快、最方便的方式获得它？

丁。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T13:18:37.167

听起来您的意思是*域名*：

```
new Uri(string).Host 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T13:56:43.930

您可以创建一个包含所有域扩展名的数组，将其替换为 String.Empty 以将其删除，然后从 Split('.') 中选择最后一项。这将在大多数情况下为您提供您想要的东西。否则不可能知道哪个部分是正确的。

更新：这段代码做了想要的，但我猜有一个更好的方法，也许是正则表达式或那个方向的东西。

[http://pastebin.com/SVkiJ1Vq](http://pastebin.com/SVkiJ1Vq)

# java - 多应用实例日志记录

> ID：11722398
> 
> 赞同：2
> 
> 时间：2012-07-30T13:17:18.833
> 
> 标签：java, networking, logging

我的应用程序允许运行多个实例，我想记录所有正在运行的实例的事件。我目前正在使用 java util logging 的套接字处理程序来集中日志记录过程。当第一个实例启动时，它也会启动一个新的套接字服务器线程。问题是当这个实例关闭时，服务器线程也关闭并且日志方法（来自另一个实例）抛出异常。我不打算将它作为一个单独的进程运行（使用 Runtime exec），因为我无法从我的应用程序中优雅地关闭它。

那么有没有办法让另一个实例在看到服务器关闭时创建一个新的服务器线程？这种类似的方法是在 H2 数据库 AUTO_SERVER 模式下完成的，它会自动切换到客户端和服务器模式。

那么关于如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T04:37:23.010

我最终使用了[Logback 的谨慎模式](http://logback.qos.ch/manual/appenders.html#prudent)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T13:28:03.307

我认为如果套接字服务器尚未运行，您可能需要一个带有[工厂方法的](http://en.wikipedia.org/wiki/Factory_%28software_concept%29)[单例来初始化套接字服务器：](http://en.wikipedia.org/wiki/Singleton_pattern)

# android - Alarmmanager - 如何让它注册一次

> ID：11722399
> 
> 赞同：1
> 
> 时间：2012-07-30T13:17:23.403
> 
> 标签：android

我的应用程序有 2 个不同的活动，让我们将它们命名为 A 和 B。我在活动 A 中设置了一个警报，并设置了 5 分钟后触发警报的时间。我转到活动 B 并在那里做一些不到一分钟的事情。我回到活动 A，这里发生的事情是警报再次注册，而不是之前的 5 分钟时间，从现在开始需要 5 分钟......为了清楚起见，A 行为 - 注册警报 - 5 分钟触发哔声...移至活动 B，动作 B - 做一些事情 - x 分钟...移回动作 A - 再次注册警报 - x+5 分钟以触发哔声...。

我不希望发生上述情况。我只想在 5 分钟而不是 x+5 时触发警报？请问有什么帮助吗？这真的让我很烦......从星期四开始......

在行动 A

```
 AlarmManager am = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
            Intent checkIntent = new Intent(getApplicationContext(),Alarm_class.class);
            checkIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            PendingIntent pi = PendingIntent.getBroadcast(this, 0, checkIntent, 0);

            if(PendingIntent.getBroadcast(getBaseContext(), 0, checkIntent, PendingIntent.FLAG_NO_CREATE) != null)
            {
                Log.d("kunal", "Alarm is running");             
                if(log_days_came.equals("Three"))
                {
                     Log.d("kunal","3 days selected to zip log file.");
                    // am.setInexactRepeating(AlarmManager.RTC_WAKEUP, System.currentTimeMillis(), 180000, pi);
                     am.setInexactRepeating(AlarmManager.RTC_WAKEUP, System.currentTimeMillis(), 2*60000, pi);
                     Log.d("kunal","after the pending intent 3.");
                 }
    }
            else
            {
                if(log_days_came == null)
                {
                    Toast.makeText(getApplicationContext(), "configure the days to zip log files", Toast.LENGTH_LONG).show();
                    Log.d("kunal", "Alarm is not running");
                }

            }

            if(log_days_came.equals("Three"))
            {
                 Calendar calendar2 = Calendar.getInstance();
                 calendar2.setTimeInMillis(System.currentTimeMillis());
                 calendar2.add(Calendar.MINUTE, 3);   
            } 
```

我去行动 B...做一些事情...回来行动 A...它再次调用警报的 OnReceive，而触发器没有过期...我做错了什么？

# javascript - 以编程方式更改 img 标签的 src

> ID：11722400
> 
> 赞同：287
> 
> 时间：2012-07-30T13:17:28.597
> 
> 标签：javascript, html, image, src

如何使用 javascript 更改标签的`src`属性？`img`

```
<img src="../template/edit.png" name=edit-save/> 
```

起初我有一个默认的 src，它是“../template/edit.png”，我想用“../template/save.png” onclick 来改变它。

更新：这是我的 html onclick：

```
<a href='#' onclick='edit()'><img src="../template/edit.png" id="edit-save"/></a> 
```

和我的 JS

```
function edit()
{   
    var inputs = document.myform;
    for(var i = 0; i < inputs.length; i++) {
        inputs[i].disabled = false;
    }
} 
```

我试过在edit（）中插入它，它可以工作，但需要单击图像两次

```
var edit_save = document.getElementById("edit-save");
    edit_save.onclick = function(){
       this.src = "../template/save.png";
    } 
```

* * *

## 回答 #1

> 赞同：364
> 
> 时间：2012-07-30T13:18:51.033

给你的img标签一个id，然后你可以

```
document.getElementById("imageid").src="../template/save.png"; 
```

* * *

## 回答 #2

> 赞同：79
> 
> 时间：2015-02-12T17:58:28.823

您可以同时使用 jquery 和 javascript 方法：如果您有两个图像，例如：

```
<img class="image1" src="image1.jpg" alt="image">
<img class="image2" src="image2.jpg" alt="image"> 
```

1）jQuery方法->

```
$(".image2").attr("src","image1.jpg"); 
```

2)Javascript方法->

```
var image = document.getElementsByClassName("image2");
image.src = "image1.jpg" 
```

对于这种类型的问题，jquery 是最简单易用的。

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2013-12-03T13:52:12.503

如果您使用 JQuery 库，请使用以下指令：

```
$("#imageID").attr('src', 'srcImage.jpg'); 
```

* * *

## 回答 #4

> 赞同：31
> 
> 时间：2012-07-30T14:33:07.237

its ok now

```
function edit()
{   
    var inputs = document.myform;
    for(var i = 0; i < inputs.length; i++) {
        inputs[i].disabled = false;
    }

    var edit_save = document.getElementById("edit-save");

       edit_save.src = "../template/save.png";                              
} 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2014-07-18T23:31:52.800

给你的图片一个id。然后你可以在你的javascript中做到这一点。

```
document.getElementById("blaah").src="blaah"; 
```

您可以使用此语法来更改任何元素的任何属性的值。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2012-07-30T13:20:50.920

```
<img src="../template/edit.png" name="edit-save" onclick="this.src = '../template/save.png'" /> 
```

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2014-10-03T17:24:20.017

在这种情况下，当您想要更改`src`元素的第一个值时，您无需构建函数。您可以在元素中更改此权限：

```
<a href='#' onclick='this.firstChild.src="../template/save.png"')'>
  <img src="../template/edit.png" id="edit-save"/>
</a> 
```

你有几种方法可以做到这一点。您还可以创建一个函数来自动化该过程：

```
function changeSrc(p, t) { /* where p: Parent, t: ToSource */
  p.firstChild.src = t
} 
```

那么你也能：

```
<a href='#' onclick='changeSrc(this, "../template/save.png");'>
  <img src="../template/edit.png" id="edit-save"/>
</a> 
```

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2012-07-30T13:21:17.507

使用您提供的代码段（并且不对元素的父级做出假设），您可以使用以下方式获得对图像的引用

```
document.querySelector('img[name="edit-save"]'); 
```

并更改 src

```
document.querySelector('img[name="edit-save"]').src = "..." 
```

所以你可以达到预期的效果

```
var img = document.querySelector('img[name="edit-save"]');
img.onclick = function() {
    this.src = "..." // this is the reference to the image itself
}; 
```

否则，正如其他建议的那样，如果您可以控制代码，最好将 an 分配`id`给图像以获取引用`getElementById`（因为它是检索元素的最快方法）

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2017-01-19T09:06:22.813

也许是因为你有一个标签，比如标签的父级。这就是为什么你必须点击两次图像。

对我来说，解决方案是： [http ://www.w3schools.com/js/tryit.asp?filename=tryjs_intro_lightbulb](http://www.w3schools.com/js/tryit.asp?filename=tryjs_intro_lightbulb)

# android - GPS 提供程序已启用，但 getLastKnownLocation(provider) 返回 null

> ID：11722401
> 
> 赞同：3
> 
> 时间：2012-07-30T13:17:29.207
> 
> 标签：android, gps, provider

我正在尝试为我的应用程序使用 GPS 提供程序。

该应用程序使用 GPS 位置提供程序查找设备的当前位置。

该应用程序运行良好。但是，虽然我的 GPS_Provider 已启用，但`geLastKnownLocation()`返回 null。

**MainActivity.java**

* * *

```
public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        LocationManager locationManager;
        String context = Context.LOCATION_SERVICE;
        locationManager = (LocationManager)getSystemService(context);

        String provider = LocationManager.GPS_PROVIDER;
        Location location = locationManager.getLastKnownLocation(provider);

        Log.v("BEFORE", "Location is: " + location);
        updateWithNewLocation(location);
        Log.v("AFTER", "LOCATION FOUND");
    }

    private void updateWithNewLocation(Location location){
        String latLongString;
        TextView myLocationText;
        myLocationText = (TextView)findViewById(R.id.myLocationText);

        if (location != null) {
            double lat = location.getLatitude();
            double lng = location.getLongitude();
            latLongString = "Lat:" + lat + "\nLong:" + lng;
        } 
        else {
            latLongString = "No location found";
        }

        myLocationText.setText("Your Current Position is:\n" + latLongString);
    }

} 
```

**清单.xml**

* * *

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.paad.whereami"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="4"
    android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

    <uses-permission
        android:name="android.permission.ACCESS_FINE_LOCATION"
    />

</manifest> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-30T13:23:13.717

根据[文档](http://developer.android.com/reference/android/location/LocationManager.html#getLastKnownLocation%28java.lang.String%29)，如果设备不知道最后一个已知位置，则返回 null。GPS可能无法定位您。无论如何，这需要大约一分钟。所以尽量走到外面，在晴朗的天空下，远离高楼，等到 GPS 可以找到你。可能这会有所帮助。并且不要忘记权限。如果您尝试使用`GPS_PROVIDER`，则不需要互联网访问，也不需要网络状态。

## 编辑：

要让 GPS 在模拟器上工作，请参阅此[链接](https://stackoverflow.com/questions/2279647/how-to-emulate-gps-location-in-the-android-emulator)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-22T04:03:37.363

对于谁仍在尝试理解愚蠢的功能“getLastKnownLocation”。

此函数仅在 GPS 被另一个应用程序使用时返回一些内容。因此，除非您经常将 GPS 用于其他应用程序，否则它将在 90% 的时间返回 null。我一直在模拟器和我自己的 Android 手机上对此进行测试。我在使用模拟位置应用程序每 5 秒更改一次坐标时开始获得结果，但是一旦我停止模拟位置应用程序，我就开始得到空结果。

# java - 使用 Servlet 过滤器记录请求和响应

> ID：11722409
> 
> 赞同：0
> 
> 时间：2012-07-30T13:18:10.547
> 
> 标签：java, servlets, httprequest, httpresponse, servlet-filters

我正在研究开发一个 servlet/过滤器以在 Web 应用程序中使用，过滤器必须记录 Web 应用程序的所有用户在网站上的每个请求。在我的脑海中，过滤器必须以这种方式工作

过滤器 -> 请求 -> 保存请求 -> do.chain

```
public class ServletFilter implements Filter {
  private Application fApp;
 StringWriter ResponseRECORDER; 
 StringWriter RequestRECORDER;
  @Override
  public void init(FilterConfig config) throws ServletException {
    fApp = (Application)config.getServletContext().getAttribute("application");
  }

  @Override
  public void doFilter(ServletRequest request, ServletResponse response,
      FilterChain chain) throws IOException, ServletException {

    chain.doFilter(request,response);
    // Ignore non-http requests.
    if (!(request instanceof HttpServletRequest))
    {
        chain.doFilter(request,response);
        return;
    }

    ((HttpServletRequest)request).getSession();

    // Write the request out to the recording file.
    recordReqResHTTP((HttpServletRequest) request,
            (HttpServletResponse) response); 
    StringBuilder Fixed = new StringBuilder();
    Fixed.append("[Message]");
    Fixed.append("[time]");  
    Fixed.append(System.currentTimeMillis());
    Fixed.append("[/time]");
    Fixed.append("[Request]");
    Fixed.append(RequestRECORDER);
    Fixed.append("[/Request]");
    Fixed.append("[Response]");
    Fixed.append(ResponseRECORDER);
    Fixed.append("[/Response]");
    Fixed.append("[/Message]");

    MessagingService s = (MessagingService)fApp
        .getService("it.interprise.core.workflow.MessagingService");    
    try {
      s.send("recorder", Fixed.toString());
    } catch (Exception e) {
      // TODO Auto-generated catch block
      e.printStackTrace();
    }
  }

  @Override
  public void destroy() {
  }

  public void recordReqResHTTP(HttpServletRequest request,
     HttpServletResponse response)
{
  //HttpSession session = request.getSession();

  //costruisco una stringa per la raccolta dati
  StringWriter ResponseRECORDER = new StringWriter();  
  StringWriter RequestRECORDER = new StringWriter();

  try
  {

    //Registro la Request 

      PrintWriter out = new PrintWriter(RequestRECORDER);
      out.println("<request>");
      out.print("<uri>");
      out.print(request.getRequestURI());
      out.println("</uri>");
      Enumeration e = request.getParameterNames();
      while (e.hasMoreElements())
      {
          String paramName = (String) e.nextElement();
          String[] values = request.getParameterValues(paramName);
          for (int i=0; i < values.length; i++)
          {
              out.print("<param><name>");
              out.print(paramName);
              out.print("</name><value>");
              out.print(values[i]);
              out.println("</value></param>");
          }
      }
      out.println("</request>");
      out.close();
    //Registro la Response

      PrintWriter res = new PrintWriter(ResponseRECORDER);
      res.println("<request>");
      res.print("<uri>");
      res.print(request.getRequestURI());
      res.println("</uri>");
      Enumeration f = request.getParameterNames();
      while (f.hasMoreElements())
      {
          String paramName = (String) f.nextElement();
          String[] values = request.getParameterValues(paramName);
          for (int i=0; i < values.length; i++)
          {
              res.print("<param><name>");
              res.print(paramName);
              res.print("</name><value>");
              res.print(values[i]);
              res.println("</value></param>");
          }
      }
      out.println("</request>");
      out.close();
  }

  catch (Exception exc)
  {

  }
}
} 
```

和响应一样，你知道我该如何解决这个问题吗？使用此过滤器，Web 应用程序停止响应...

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T13:33:41.140

您应该做的第一件事是至少在示例的底部*记录。*`Exception`也许有一个`Exception`无法通过检查代码来识别的凸起。

关闭两次之前的几行`PrintWriter`，这可能导致`IOException`.

第二：您声明了实例变量`ResponseRECORDER`和`RequestRECORDER`，但后来您声明了两个同名的局部变量。删除实例变量 -`filter`必须实现线程安全。

完成后，我猜我们会看到一个隐藏的`NullPointer`.

# linux - 为什么在 shell 中读取 fifo 时会出错？

> ID：11722413
> 
> 赞同：0
> 
> 时间：2012-07-30T13:18:20.127
> 
> 标签：linux, bash, pipe

试图在 bash 中读取 fifo。为什么我会出错？

```
pipe="./$1"

trap "rm -f $pipe" EXIT

if [[ ! -p $pipe ]]; then
    mkfifo $pipe
fi

while true
do
    if read line <$pipe; then
            if "$line" == 'exit'  || "$line" == 'EXIT' ; then
                break       
            elif ["$line" == 'yes']; then
                echo "YES"
            else
                echo $line
            fi
    fi
done

echo "Reader exiting" 
```

我得到的错误：

```
./sh.sh: line 12: [: missing `]' ./sh.sh: line 14: [HelloWorld: command not found 
```

从其他 shell 运行并打印时`HelloWorld`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T13:40:37.000

您缺少语句的命令，并且`if`语句中需要空格`elif`。

```
if "$line" == 'exit'  || "$line" == 'EXIT' ; then
    break       
elif ["$line" == 'yes']; then 
```

应该

```
if [ "$line" = 'exit' ] || [ "$line" = 'EXIT' ] ; then
    break       
elif [ "$line" = 'yes' ]; then 
```

如果您不介意bashisms，则可以选择更清洁的选项：

```
if [[ $line = exit || $line = EXIT ]]; then
    break
elif [[ $line = yes ]]; then 
```

# iphone - 在同一文件中调用返回类型为“void”的方法时出现问题

> ID：11722414
> 
> 赞同：0
> 
> 时间：2012-07-30T13:18:22.593
> 
> 标签：iphone, ios, xcode4.3

我在调用返回类型的方法时遇到`-(void)`问题`class`

问题是：`Instance method - someMethodName not found (return type defaults to 'id')`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T13:26:18.180

`someMethodName`在你的`.h`文件中声明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T13:36:18.910

问题是 Xcode 找不到该方法的声明。`.m`在最新版本的 Xcode 中，如果实现与您调用它的方法相同，则不需要为方法提供声明。例如：

```
//ExampleClass.m
@implementation ExampleClass
-(void)aMethod {
    [self anotherMethod]; //Xcode can see anotherMethod so doesn't need a declaration.
}

-(void)anotherMethod {
    //...
}
@end 
```

但是在早期版本的 Xcode 中，您需要提供声明。您可以在`@interface`in`.h`文件中执行此操作：

```
//example.h
@interface ExampleClass : NSObject
-(void)anotherMethod;
@end 
```

将声明放在 中的问题`.h`是所有其他类都可以看到该方法，这可能会导致问题。为了解决这个问题，您可以在以下声明中声明一个类延续`.m`：

```
//ExampleClass.m
@interface ExampleClass ()
-(void)anotherMethod;
@end

@implementation ExampleClass
   //...
@end 
```

# c# - C中的地理编码查找

> ID：11722423
> 
> 赞同：1
> 
> 时间：2012-07-30T13:18:54.250
> 
> 标签：c#, c++, c, search, geocode

我想做一个超快速的地理编码查找，返回输入城镇、城市或国家的坐标。我的知识是基本的，但据我所知，用 C 编写它是一个好的开始。我认为拥有这样的树结构是有意义的：

*   英国
    *   肯特
    *   奥尔平顿
    *   查塔姆
    *   罗切斯特
    *   多佛
    *   伊登布里奇
*   威尔特郡
    *   斯温顿
    *   马姆斯伯里

在我的文件/数据库中，我将拥有坐标和城镇/城市名称。如果给我的程序命名为“Kent”，我想要一个可以以最快的方式返回与“Kent”相关的坐标的程序

出于性能原因，我应该将数据存储在二进制文件还是 SQL 数据库中？搜索这些数据的最佳方法是什么？也许二叉树搜索？数据应该如何存储？也许？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T13:39:47.433

这里有一点建议，但仅此而已：

如果您想按名称或名称前缀查找地点，如您所愿，那么您将不明智地设置一个数据结构，按照您的建议将数据存储在国家、地区、城镇的层次结构中你可能会。如果您有一个操作主导数据结构的使用，那么您通常最好选择适合该操作的数据结构。

在这种情况下，按字母顺序排列的地点列表将更适合您的查询。对于不在最顶层的每个地方，您都希望为其“父级”的名称添加某种引用。如果您有一个按字母顺序排列的地点列表，您可能还需要考虑一个索引，也许它直接指向列表中以字母表中的每个字母开头的第一个位置。

当您描述您的问题时，它似乎与在字典中存储单词有更多共同点（我的意思是您查找单词而不是任何特定编程语言中的任何特定集合数据类型名称）而不是大多数以地理编码为幌子的东西。

我的猜测是，一个包含世界上所有人口超过 1000 的城镇、城市、地区和国家（及其坐标）的名称的地名词典可以存储在一个非常简单的数据结构中（基本上是一个列表）带有一个或两个索引，用于快速定位第一个 A 地名、第一个 B 等等。只需稍加压缩，您就可以将其保存在大多数现代台式电脑的内存中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T23:38:18.557

You should not worry about how the information is stored, except not to duplicate data.

You should create one or more *indices* for the data. The *indicies* are associative arrays / maps data structures that contain a key (the item you want to search) and a value (such as the record and other information associated with the key). This will enable you with fast lookups without altering your data for each type of search.

On the other hand, your case is an excellent fit for a data base. I suggest you let the database manager your data (such as efficient lookups). After all, that is what they live for.

See also: [At what point is it worth using a database?](https://stackoverflow.com/questions/2648802/at-what-point-is-it-worth-using-a-database/2649916#2649916)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T13:37:31.413

我认为我能给出的最好建议是使用任何你熟悉的语言来获得你想要的结果。一旦你的代码工作，就担心性能。然后，您可以一次将非常具体的功能片段翻译成 C 或 C++，直到获得您想要的结果。

# java - 即使在命令行上告知 -D mapred.reduce.tasks=0 后 hadoop reduce 任务仍在运行

> ID：11722424
> 
> 赞同：0
> 
> 时间：2012-07-30T13:19:03.607
> 
> 标签：java, hadoop, mapreduce

我有一个`MapReduce`程序

```
public static class MapClass extends MapReduceBase implements Mapper<Text, Text, IntWritable, IntWritable> {

        private final static IntWritable uno = new IntWritable(1);
        private IntWritable citationCount = new IntWritable();

        public void map(Text key, Text value, OutputCollector<IntWritable, IntWritable> output, Reporter reporter) throws IOException {
            citationCount.set(Integer.parseInt(value.toString()));
            output.collect(citationCount, uno);
        }
    }

    public static class Reduce extends MapReduceBase implements Reducer<IntWritable, IntWritable, IntWritable, IntWritable> {

        public void reduce(IntWritable key, Iterator<IntWritable> values, OutputCollector<IntWritable, IntWritable> output, Reporter reporter) throws IOException {
            int count = 0;
            while (values.hasNext()) {
                count += values.next().get();
            }

            output.collect(key, new IntWritable(count));
        }
    } 
```

我只想运行**任务** `map`，输出应该是形式`<number, 1>` 当我从命令行运行它时，我说

```
$ hadoop jar Hadoop-programs.jar com/hadoop/patent/CitationHistogram input output -Dmapred.reduce.tasks=0 
```

但这是我在命令行输出中看到的

```
12/07/30 06:13:14 INFO mapred.JobClient:  map 50% reduce 0%
12/07/30 06:13:23 INFO mapred.JobClient:  map 58% reduce 0%
12/07/30 06:13:26 INFO mapred.JobClient:  map 60% reduce 8%
12/07/30 06:13:29 INFO mapred.JobClient:  map 68% reduce 8%
12/07/30 06:13:32 INFO mapred.JobClient:  map 76% reduce 8%
12/07/30 06:13:35 INFO mapred.JobClient:  map 85% reduce 16%
12/07/30 06:13:38 INFO mapred.JobClient:  map 93% reduce 16%
12/07/30 06:13:41 INFO mapred.JobClient:  map 98% reduce 16%
12/07/30 06:13:44 INFO mapred.JobClient:  map 100% reduce 16%
12/07/30 06:13:55 INFO mapred.JobClient:  map 100% reduce 69%
12/07/30 06:13:58 INFO mapred.JobClient:  map 100% reduce 78%
12/07/30 06:14:01 INFO mapred.JobClient:  map 100% reduce 94%
12/07/30 06:14:08 INFO mapred.JobClient:  map 100% reduce 100% 
```

当我看到作业的输出时，我会看到类似的条目

```
1       2
13      2
24      1
29      1
31      2
42      3
6796    7
6799    1
6806    1
6815    1
6824    2 
```

这意味着数据正在聚合

我怎么能根本不运行减速器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T19:15:36.660

只有当你实现 ToolRunner.run 方法并在你的 main 方法中传递它的参数时，这才有效。

```
ToolRunner.run(new Configuration(), new YourClasImplmentingToolRunner(), args); 
```

如果您不想尝试设置

```
job.setNumReduceTasks(0); 
```

或者另一个选项是在 conf 中设置值并在作业中使用该配置。

```
Configuration conf = new Configuration();
conf.set("mapred.reduce.tasks", "0");
Job job = new Job(conf, "My job Name"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T15:30:34.280

在 -D 选项之后添加一个空格，它应该可以工作；）

`hadoop jar Hadoop-programs.jar com/hadoop/patent/CitationHistogram input output -D mapred.reduce.tasks=0`

# php - 'imagecreatefrompng' 正在输出崩溃的图像

> ID：11722428
> 
> 赞同：0
> 
> 时间：2012-07-30T13:19:07.087
> 
> 标签：php, png, gd

当我尝试执行 imagecratefrompng 时，我遇到了 PHP 中的 gd 库问题。我正在运行一个脚本，用户输入文本并将其添加到预先创建的图像中。问题是，当我输出图像时，图像显示为损坏。

如果我的脚本/图像有问题，谁能帮忙指出？

图像为 PNG、600x956、220kb 文件大小。

GD 库已启用。启用 PNG、JPEG、GIF 支持。

这是代码。

```
// Text inputed by user
  $text = $_POST['text'];
// Postion of text inputed by the user
  $text_x = 50;
  $text_y = 817;
// Color of the text
  $text_color = imagecolorallocate($img, 0, 0, 0);
// Name of the file (That is in the same directory of the PHP file)
  $nomeDaImagem = "Example";

$img = imagecreatefrompng($nomeDaImagem);

//Text is retrieved by Post method
imagestring($img, 3, $text_x, $text_y, $text, $text_color);

header("Content-type: image/png");
imagepng($img);

imagedestroy($img); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T13:31:04.183

您的脚本存在许多问题：

1.  在实际创建图像之前，您尝试将颜色分配给图像。
2.  您要写入的字符串在变量`$nome`中，但您正在打印`$text`。
3.  您不检查是否`$_POST['text']`存在，这可能会导致通知级错误。
4.  您不检查文件是否存在，这可能会导致警告级别的错误。

这是您的代码示例，已修复：

```
// Text inputed by user 
  $nome = isset($_POST['text']) ? $_POST['text'] : "<Nothing to write>"; 
// Postion of text inputed by the user 
  $text_x = 50; 
  $text_y = 817; 
// Name of the file (That is in the same directory of the PHP file) 
  $nomeDaImagem = "Example"; 

$img = file_exists($nomeDaImagem)
   ? imagecreatefrompng($nomeDaImagem)
   : imagecreate(imagefontwidth(3)*strlen($nome)+$text_x,imagefontheight(3)+$text_y);

// Color of the text 
  $text_color = imagecolorallocate($img, 0, 0, 0); 
//Text is retrieved by Post method 
imagestring($img, 3, $text_x, $text_y, $nome, $text_color); 

header("Content-type: image/png"); 
imagepng($img); 
imagedestroy($img); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T13:25:29.317

阅读更多： -

[http://php.net/manual/en/function.imagecreatefrompng.php](http://php.net/manual/en/function.imagecreatefrompng.php)

[http://www.php.net/manual/en/function.imagecreatefromstring.php](http://www.php.net/manual/en/function.imagecreatefromstring.php)

或试试这个

```
<?php
function LoadPNG($imgname)
{
    /* Attempt to open */
    $im = @imagecreatefrompng($imgname);

    /* See if it failed */
    if(!$im)
    {
        /* Create a blank image */
        $im  = imagecreatetruecolor(150, 30);
        $bgc = imagecolorallocate($im, 255, 255, 255);
        $tc  = imagecolorallocate($im, 0, 0, 0);

        imagefilledrectangle($im, 0, 0, 150, 30, $bgc);

        /* Output an error message */
        imagestring($im, 1, 5, 5, 'Error loading ' . $imgname, $tc);
    }

    return $im;
}

header('Content-Type: image/png');

$img = LoadPNG('bogus.image');

imagepng($img);
imagedestroy($img);
?> 
```

# c#-4.0 - 将数据添加到像字典一样的 ExpandoObject 时出错

> ID：11722429
> 
> 赞同：2
> 
> 时间：2012-07-30T13:19:07.100
> 
> 标签：c#-4.0, dynamic, dynamic-language-runtime

我正在尝试理解 c# 动态。我有一个分配给动态变量的 ExpandoObject 实例。我了解 ExpandoObject 正在实施 IDictionary。但是下面的分配失败了。

```
dynamic obj = new ExpandoObject();
obj["Test"] = "TestValue";
Console.WriteLine(obj.Test); 
```

有人可以告诉我哪里出错了吗？

```
obj.Test="TestValue"; 
```

然而，上述声明似乎工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T13:21:44.297

为此，您需要将 to 强制`ExpandoObject`转换为`IDictionary<string, object>`.

这是正常的 Expando 用法：

```
obj.Test = "TestValue"; 
```

这是字符串文字（或字符串变量）的用法：

```
var d = (IDictionary<string, object>)obj;
d["Test"] = "TestValue";

string s = "Test";
d[s] = "TestValue"; 
```

如果接口实现是显式的，则需要强制转换为接口的引用才能访问成员。我猜这就是这里发生的事情。

# sql - 像命令 SQL

> ID：11722430
> 
> 赞同：0
> 
> 时间：2012-07-30T13:19:07.847
> 
> 标签：sql, oracle, oracle-sqldeveloper, sql-like

我正在尝试构建一个查找多个不同事物的 SQL 查询，我认为 like 命令是实现此目的的最佳方法

查询中的行是：

`where *field* like 'AB%'`它列出了表中以 AB 开头的所有实例。

当我尝试添加多个实例时，虽然我收到一条错误消息，但我想做如下的事情：

```
where *field* like ('AB%','CD%','EF%') 
```

所以我得到了以我提供的文本列表开头的特定条目的字段

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T13:21:12.060

你要`OR`

```
WHERE field LIKE 'AB%' 
   OR field LIKE 'CD%'
   OR field LIKE 'EF%' 
```

如果您使用其他`WHERE`子句标准，则需要使用括号将 OR 子句括起来。

希望能帮助到你...

**编辑：**

在您发表评论后，您可以尝试在您的子句中使用[正则表达式](http://docs.oracle.com/cd/B19306_01/appdev.102/b14251/adfns_regexp.htm)，尤其是[REGEXP_LIKE 。](http://docs.oracle.com/cd/B14117_01/server.101/b10759/conditions018.htm)`WHERE`

类似于（未经测试）的东西：

```
SELECT *
  FROM table
 WHERE regexp_like(field, '^(AB|CD|EF).*$') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T13:19:59.270

`WHERE *field* LIKE 'AB%' OR *field* LIKE 'CD%' OR *field* LIKE 'EF%'`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T02:47:39.213

您可以使用 instr 函数。如果它在字符串的第一个位置找到您想要的子字符串，它将返回 1：

```
where instr(field,'AB') = 1
OR instr(field,'CD') = 1
OR instr(field,'ED') = 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T13:45:31.273

如果您使用的是 Oracle，则可以编写：

```
where regexp_like(t1, '^AB|^CD|^EF') 
```

等等

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-30T13:45:01.790

如果要使用单个字符串，请尝试使用 REGEXP：

```
WHERE *field* REGEXP 'AB(.*)|CD(.*)|EF(.*)' 
```

# iphone - 如何通过首选项包启用或禁用 mobilesubstrate

> ID：11722431
> 
> 赞同：1
> 
> 时间：2012-07-30T13:19:12.733
> 
> 标签：iphone, ios, cydia, tweak, logos

我想知道，假设我有一个调整，我将如何让人们通过开关启用或禁用它？我需要帮助我正在进行的当前调整。这是由 Theos 中的徽标制作的移动基板调整

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T23:00:24.047

创建一个 Preferences plist，如*许多*基于 MobileSubstrate 的开源项目中所例示的那样，并且如此[处](http://iphonedevwiki.net/index.php/PreferenceLoader)所述。

然后，体面地检查您的调整是否在您认为最有必要的钩子中启用，仅此而已。

请注意，在检查首选项时，请正确执行。[这个函数](https://github.com/DHowett/cydelete/blob/master/Hook.xm#L51)就是一个很好的例子。

# mingw - 使用 mingw 构建 gdb-Insight 时出错

> ID：11722435
> 
> 赞同：0
> 
> 时间：2012-07-30T13:19:18.707
> 
> 标签：mingw, insight

我正在尝试使用 mingw 构建 Insight，但出现以下错误：

```
make[4]: *** [pe-i386.lo] Error 1
make[4]: Leaving directory '/c/Users/pshek/Downloads/insight-6.8/bfd'
make[3]: *** [all-recursive] Error 1
make[3]: Leaving directory '/c/Users/pshek/Downloads/insight-6.8/bfd'
make[2]: *** [all] Error 2
make[2]: Leaving directory '/c/Users/pshek/Downloads/insight-6.8/bfd'
make[1]: [all-bfd] Error 2
make[1]: Leaving directory '/c/Users/pshek/Downloads/insight-6.8/bfd
make: *** [all] Error 2 
```

这就是我所做的：

打开 mingw 外壳

cd 到源文件夹

。/配置

制作

我在最新版本的 Insight 和稍旧的版本上都试过这个，但我两次都收到类似的错误消息。

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-08T00:28:54.117

我曾经也有过一样的问题。您将能够使用

```
./configure --disable-werror 
```

代替

```
./configure 
```

如果您已经配置，即使您尝试使用必要的标志，它也不会工作。只需再次下载源代码并使用正确的标志进行配置。

来源：[http ://ubuntuforums.org/showthread.php?t=1876116](http://ubuntuforums.org/showthread.php?t=1876116)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-03T11:32:12.660

只需使用已构建的版本：

[http://sourceforge.net/projects/mingw/files/Other/UserContributed/insight/mingw-insight-6.3.exe/download](http://sourceforge.net/projects/mingw/files/Other/UserContributed/insight/mingw-insight-6.3.exe/download)

# perl - 如何使用 AnyEvent::XMPP 在聊天室中获取用户 jabber ID？

> ID：11722437
> 
> 赞同：2
> 
> 时间：2012-07-30T13:19:24.340
> 
> 标签：perl, xmpp, anyevent

有一种方法可以根据文档在聊天室中获取用户的昵称（roomName@domain.com/nick），但是如何获取用户的真实jid（name@domain.com/resource_name）？是否可以根据 XMPP 协议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T18:15:03.210

你可以，除非房间是匿名的。Jabber 协议使聊天室中的人可能是匿名的成为可能，因此您无法返回他们真实的 JID。这也是它在房间内提供私人消息聊天的原因，因此您仍然可以向这样做的人发送私人消息。

我在[Bot::Backbone::Service::JabberChat](http://metacpan.org/module/Bot%3a%3aBackbone%3a%3aService%3a%3aJabberChat)中有一些代码：

```
# Figure out who sent this message
my $from_user = $room->get_user($xmpp_message->from_nick);

# Prefer the real JID as the username
my $from_username = $from_user->real_jid // $from_user->in_room_jid;
my $from_nickname = $from_user->nick; 
```

有关详细信息，请参阅[AnyEvent::XMPP::Ext::MUC::User](https://metacpan.org/module/AnyEvent%3a%3aXMPP%3a%3aExt%3a%3aMUC%3a%3aUser)和[AnyEvent::XMPP::Ext::MUC::Room](https://metacpan.org/module/AnyEvent%3a%3aXMPP%3a%3aExt%3a%3aMUC%3a%3aRoom)。

# sql-server - IF 语句中间的 GO 命令

> ID：11722438
> 
> 赞同：0
> 
> 时间：2012-07-30T13:19:29.243
> 
> 标签：sql-server, tsql

我只在当前数据库上不存在表时才查看有关创建表的内容（以便能够在可能或可能没有它们的不同数据库中创建它）并发现这两个有用的主题

*   [SQL Server：检查表是否存在](https://stackoverflow.com/questions/167576/sql-server-check-if-table-exists)
*   [如何检查 SQL Server 表中是否存在列](https://stackoverflow.com/questions/133031/how-to-check-if-column-exists-in-sql-server-table)

所以我做了这个查询

```
IF (NOT EXISTS (SELECT * 
             FROM INFORMATION_SCHEMA.TABLES 
             WHERE TABLE_NAME = 'EMAILCONTAS'))
BEGIN
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

SET ANSI_PADDING ON
GO

CREATE TABLE [dbo].[EMAILCONTAS](
    [NRSEQEMAILCONTAS] [numeric](8, 0) NOT NULL,
    [CDEMAILCONTAS] [varchar](40) NULL,
    [MSGEMAILCONTAS] [varchar](4000) NOT NULL,
    [CCOEMAIL] [varchar](100) NULL,
    [NRSEQOPERADORA] [numeric](8, 0) NOT NULL,
 CONSTRAINT [PK_EMAILCONTAS] PRIMARY KEY CLUSTERED 
(
    [NRSEQEMAILCONTAS] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

GO

SET ANSI_PADDING OFF
GO

ALTER TABLE [dbo].[EMAILCONTAS]  WITH CHECK ADD FOREIGN KEY([NRSEQOPERADORA])
REFERENCES [dbo].[OPERADORA] ([NRSEQOPERADORA])
GO

ALTER TABLE [dbo].[EMAILCONTAS]  WITH CHECK ADD  CONSTRAINT [FK_EMAILCONTAS_OPERADORA] FOREIGN KEY([NRSEQOPERADORA])
REFERENCES [dbo].[OPERADORA] ([NRSEQOPERADORA])
GO

ALTER TABLE [dbo].[EMAILCONTAS] CHECK CONSTRAINT [FK_EMAILCONTAS_OPERADORA]
GO
END 
```

但是当我执行它时，我在错误列表中得到了这个。

```
Msg 102, Level 15, State 1, Line 5
Incorrect syntax near 'ON'. 
```

但它无论如何都会创建我的表（**我在上面的代码之后放置了一个“Select * from PERSON;”，以检查错误是否会阻止下一个脚本编译。并且错误阻止了它。显示此错误：**

```
Msg 156, Level 15, State 1, Line 3
Incorrect syntax near the keyword 'Select'. 
```

**有办法避免吗？**）。当我执行这个查询并且表已经存在时，我得到了以下错误。

```
Msg 102, Level 15, State 1, Line 5
Incorrect syntax near 'ON'.
Msg 2714, Level 16, State 6, Line 2
There is already an object named 'EMAILCONTAS' in the database.
Msg 2714, Level 16, State 5, Line 2
There is already an object named 'FK_EMAILCONTAS_OPERADORA' in the database.
Msg 1750, Level 16, State 0, Line 2
Could not create constraint. See previous errors. 
```

* * *

我怎么能做到这一点而不会出现这些错误？有没有办法可以毫无问题地创建多个这样的代码？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T13:26:01.787

`GO`类似于脚本的结尾；您可以`GO`从 BEGIN-END 语句中删除 s 。

如果您绝对需要`GO`在代码中包含，您可以将查询分解为：

```
IF (criteria)
BEGIN
    ...
END

GO

IF (newcriteria)
BEGIN
    ...
END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T13:25:38.600

在我工作的地方，所有脚本都必须进行该检查。在此示例中，我在检查之前拥有所有设置：

```
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

SET ANSI_PADDING ON
GO

IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[DimTime]') AND type in (N'U'))
    BEGIN
        Create Table [dbo].[DimTime]
        (
            TimeID int PRIMARY KEY IDENTITY(1,1),
            Month int,
            Year int,
            Day int,
        )
    END 
```

# java - Tomcat：按记录器名称过滤 log4j

> ID：11722440
> 
> 赞同：0
> 
> 时间：2012-07-30T13:19:35.343
> 
> 标签：java, tomcat, logging, log4j, verbosity

我正在使用一个非常详细地使用 log4j 的外部包。我查看了代码并找到了预期的`log4j`行：

```
private Logger log = Logger.getLogger("SomeLoggerName");
...
log.info("Trivial message");
log.info("More trivial data"); 
```

由于我无法更改代码，因此我尝试更改`log4j.xml`：

```
<category name="SomeLoggerName">
  <level value="${log4j_level:-WARN}"/>
  <appender-ref ref="FileLogger"/>
</category> 
```

我猜想该`category name`属性等同于记录器名称。这是真的吗？如果没有，如何按记录器名称过滤？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T13:28:38.660

实际上，您可以`<logger>`用作元素名称，例如

```
<logger name="SomeLoggerName">
  <level value="${log4j_level:-WARN}"/>
  <appender-ref ref="FileLogger"/>
</logger> 
```

我认为这`category`是为了向后兼容，它的使用已被弃用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T13:43:26.140

如果您只是想减少冗长，我会调高优先级：

```
<category name="SomeLoggerName">
  <level value="WARN"/>
</category> 
```

否则，您可能希望将[过滤器](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/spi/Filter.html)添加到现有的 appender。首先，实现一个 log4j 过滤器。在您的情况下，这将是一个简单的比较来确定日志事件是否来自不需要的类。像这样的东西会起作用：

```
public class MyAuditFilter extends Filter{

    @Override
    public int decide(LoggingEvent event) {
        if(event.getClass.getCanonicalName().equalsIgnoreCase("class.you.don't.want"))
            return Filter.DENY;
        else
            return Filter.ACCPET;
    }
} 
```

实现过滤器后，只需将其添加到 log4j appender 中，如下所示：

```
<appender name="myAppender" class="my.appender.class">
  .
  .
  <filter class="my.namespace.MyAuditFilter">
    <param name="AcceptOnMatch" value="True"/>
  </filter>
  .
  .
</appender> 
```

如果您需要更多控制，过滤器将能够为您提供对日志记录的极其精细的控制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T13:24:03.900

你是对的，记录器 == 类别。你的配置有问题吗？一般来说，它看起来不错，应该可以工作。

# css - 有没有办法在 css 媒体查询中使用 DPI 而不是 px

> ID：11722442
> 
> 赞同：25
> 
> 时间：2012-07-30T13:19:37.073
> 
> 标签：css, media-queries

像素宽度和高度的数量并不总是能说明问题。这对于在屏幕上添加或删除项目非常有用，但对于设置正确的图像并不完全正确。使用 MBP 上的 Retina 显示屏，设置为屏幕一半的浏览器窗口将具有与当今大多数机器相同的像素数。然而，考虑到更高的 DPI，显示的图像可能会太小。

有没有办法根据 DPI 而不是像素宽度和高度来改变图像？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-30T13:24:49.080

您可以执行以下任一操作：

```
<link
    rel="stylesheet"
    type="text/css"
    href="/css/retina.css"
    media="only screen and (-moz-min-device-pixel-ratio: 2), only screen and (-o-min-device-pixel-ratio: 2/1), only screen and (-webkit-min-device-pixel-ratio: 2), only screen and (min-device-pixel-ratio: 2)"
/> 
```

或者

```
@media only screen and (-moz-min-device-pixel-ratio: 2), 
       only screen and (-o-min-device-pixel-ratio: 2/1), 
       only screen and (-webkit-min-device-pixel-ratio: 2), 
       only screen and (min-device-pixel-ratio: 2) {
 /*use CSS to swap out your low res images with high res ones here*/
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-10-13T08:17:57.033

在 2021 年，您可以在除 safari 之外的所有现代浏览器中使用媒体查询来获取分辨率、最小分辨率、最大分辨率。

```
header {
  background-image: url(low-res-background.jpg);
}
@media (resolution >= 2dppx) {
  header {
    background-image: url(hi-res-background.jpg);
  }
} 
```

但 CSS 并不是唯一的答案。您也可以只使用 HTML。看看 Resposive Images withe `<img srcset=...>`。

ps

您也可以使用 dpi 指定分辨率，但这仅对打印有意义：

```
@media print and (min-resolution: 72dpi) {
  p {
    text-decoration: underline;
  }
} 
```

请参阅[https://developer.mozilla.org/en-US/docs/Web/CSS/@media/resolution](https://developer.mozilla.org/en-US/docs/Web/CSS/@media/resolution)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-30T13:25:02.803

您正在寻找的是设备像素比率。因为像 iPhone 这样的东西显示像一个 320 像素的屏幕，但布局是 640 像素（像素比为 2）。在媒体查询中，使用“设备像素比率”。虽然我会确保仍然使用供应商前缀。

关于它的好帖子： http://menacingcloud.com/?c= [highPixelDensityDisplays](http://menacingcloud.com/?c=highPixelDensityDisplays)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-09T07:43:35.763

也有`<img srcset>`和`-webkit-image-set`css 功能，但似乎只有 Safari/Chrome/Opera 支持。例子：

```
<img src="image.png" srcset="image-1x.png 1x, 
     image-2x.png 2x, image-3x.png 3x">

background-image:  -webkit-image-set(
     url(icon1x.jpg) 1x,
     url(icon2x.jpg) 2x
); 
```

我不确定 Moin Zaman 接受的答案中的示例是否适用于 IE/Firefox。可能需要使用“最小分辨率”：

```
@media only screen and (min-resolution: 192dpi),
       only screen and (min-resolution: 2dppx) 
```

# c# - 尝试远程连接时远程证书无效

> ID：11722454
> 
> 赞同：1
> 
> 时间：2012-07-30T13:20:11.110
> 
> 标签：c#, asp.net, ssl

我有一个我编写的 asp.net 4.0 脚本，它基本上用于从安全站点获取 RSS 提要（我们使用 SSO 解决方案）。该脚本将正确的凭据发布到表单并收集所有 cookie，然后使用这些 cookie 再次发出请求。我遇到的问题是，当我从服务器请求它时，我收到了错误`"The remote certificate is invalid according to the validation procedure."`

在与我们的一位处理证书的人交谈后，他说这与我们购买的证书类型有关。基本上他告诉我他无能为力。

我的问题是我能做些什么来阻止这个错误出现并让我的脚本工作？

```
 CookieContainer cookieJar = new CookieContainer();

            HttpWebRequest wr = (HttpWebRequest)HttpWebRequest.Create("OURADDRESS");
            wr.UserAgent = "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 3.5.30729;)";
            wr.Method = "POST";
            wr.Accept = "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8";
            wr.Headers.Add("Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7");
            wr.KeepAlive = true;
            wr.Headers.Add("Keep-Alive: 300");
            wr.AllowAutoRedirect = false;

            wr.ContentType = "application/x-www-form-urlencoded";

            wr.CookieContainer = cookieJar;

            StreamWriter sw = new StreamWriter(wr.GetRequestStream());
            sw.Write("USER=" + UserName + "&PASSWORD=" + Password);
            sw.Close();

            HttpWebResponse response = (HttpWebResponse)wr.GetResponse();

            foreach (Cookie cookie in response.Cookies)
            {
                cookieJar.Add(new Cookie(cookie.Name.Trim(), cookie.Value.Trim(), cookie.Path, cookie.Domain));
            }

            HttpWebRequest request2 = (HttpWebRequest)HttpWebRequest.Create(RssFeedLink);
            request2.UserAgent = "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 3.5.30729;)";
            request2.Method = "GET";
            request2.Accept = "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8";
            request2.Headers.Add("Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7");
            request2.KeepAlive = true;
            request2.Headers.Add("Keep-Alive: 300");
            request2.CookieContainer = cookieJar;

            request2.ContentType = "text/html";

            HttpWebResponse response2 = (HttpWebResponse)request2.GetResponse();
            StreamReader reader2 = new StreamReader(response2.GetResponseStream()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T16:31:21.930

我在 SO 的其他地方遇到了这个问题（[“根据验证程序，远程证书无效。”使用 Gmail SMTP 服务器）。](https://stackoverflow.com/questions/777607/the-remote-certificate-is-invalid-according-to-the-validation-procedure-using)但是，该解决方案也适用于此：

```
 ServicePointManager.ServerCertificateValidationCallback = (s, certificate, chain, errs) => true; 
```

# eclipse - Eclipse 编辑器行颜色

> ID：11722462
> 
> 赞同：1
> 
> 时间：2012-07-30T13:20:41.500
> 
> 标签：eclipse, colors, editor

有什么方法可以让 Eclipse**将以某个表达式开头的行的颜色设置为**指定值？

在我的代码中，我有很多工作的“日志”调用，我想保存它们，直到出现任何类似生产的版本，但它们使代码难以阅读。所以我需要这些调用（行，或者如果它在“;”之前完全构造会更好）以其他颜色显示，如浅灰色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T16:06:46.970

您可以添加一个任务标签，例如“TODO”，但使用“log”。或类似的东西。并且任务标记行以用户指定的颜色显示。

# python - duckduckgo API 不返回结果

> ID：11722465
> 
> 赞同：16
> 
> 时间：2012-07-30T13:20:46.997
> 
> 标签：python, api, parsing, search

**编辑**我现在意识到 API 根本不够用，甚至无法正常工作。我想重定向我的问题，我希望能够使用他们的“我感觉很笨”来自动搜索duckduckgo。这样我就可以搜索“stackoverflow”并获得主页（“ [https://stackoverflow.com/](https://stackoverflow.com/) ”）作为我的结果。

我正在使用duckduckgo API。[这里](http://pypi.python.org/pypi/duckduckgo2)

我发现使用时：

```
r = duckduckgo.query("example") 
```

结果不反映手动搜索，即：

```
for result in r.results:
    print result 
```

结果是：

```
>>> 
>>> 
```

没有。

并且查找索引会`results`导致越界错误，因为它是空的。

我应该如何获得搜索结果？

似乎 API（根据其记录的示例）应该回答问题并以以下形式给出一种“我感觉很糟糕”`r.answer.text`

但是该网站的制作方式使我无法使用常规方法对其进行搜索和解析结果。

我想知道我应该如何使用这个 API 或来自这个站点的任何其他方法来解析搜索结果。

谢谢你。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-12T16:27:57.627

如果你访问[DuckDuck Go API Page](http://duckduckgo.com/api.html)，你会发现一些关于使用 API 的注意事项。第一个注释清楚地表明：

> 由于这是一个零点击信息 API，大多数深度查询（非主题名称）将为空白。

这是这些字段的列表：

```
Abstract: ""
AbstractText: ""
AbstractSource: ""
AbstractURL: ""
Image: ""
Heading: ""
Answer: ""
Redirect: ""
AnswerType: ""
Definition: ""
DefinitionSource: ""
DefinitionURL: ""
RelatedTopics: [ ]
Results: [ ]
Type: "" 
```

所以可能有点遗憾，但他们的 API 只是截断了一堆结果，并没有给你；可能工作得更快，除了使用[DuckDuckGo.com](http://duckduckgo.com)之外似乎无能为力。

所以，显然，在这种情况下 API 不是要走的路。

至于我，我只看到了一条出路：从[duckduckgo.com](http://duckduckgo.com)检索原始html并使用例如[html5lib](http://code.google.com/p/html5lib/)对其进行解析（值得一提的是，他们的html 结构良好）。

还值得一提的是，解析 html 页面并不是最可靠的数据报废方式，因为 html 结构可以更改，而 API 通常保持稳定，直到公开宣布更改。

[下面是如何使用BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)实现这种解析的示例：

```
from BeautifulSoup import BeautifulSoup
import urllib
import re

site = urllib.urlopen('http://duckduckgo.com/?q=example')
data = site.read()

parsed = BeautifulSoup(data)
topics = parsed.findAll('div', {'id': 'zero_click_topics'})[0]
results = topics.findAll('div', {'class': re.compile('results_*')})

print results[0].text 
```

此脚本打印：

```
u'Eixample, an inner suburb of Barcelona with distinctive architecture' 
```

在主页上直接查询的问题是它使用JavaScript产生所需的结果（不是相关主题），因此您只能使用HTML版本来获取结果。HTML 版本有不同的链接：

*   [http://duckduckgo.com/?q=example](http://duckduckgo.com/?q=example) # JavaScript 版本
*   [http://duckduckgo.com/html/?q=example](http://duckduckgo.com/html/?q=example) # 纯 HTML 版本

让我们看看我们能得到什么：

```
site = urllib.urlopen('http://duckduckgo.com/html/?q=example')
data = site.read()
parsed = BeautifulSoup(data)

first_link = parsed.findAll('div', {'class': re.compile('links_main*')})[0].a['href'] 
```

存储在`first_link`变量中的结果是指向搜索引擎输出的第一个*结果*（不是*相关搜索）的链接：*

> [http://www.iana.org/domains/example](http://www.iana.org/domains/example)

要获取所有链接，您可以遍历找到的标签（可以以类似方式接收除链接之外的其他数据）

```
for i in parsed.findAll('div', {'class': re.compile('links_main*')}):
    print i.a['href']

http://www.iana.org/domains/example
https://twitter.com/example
https://www.facebook.com/leadingbyexample
http://www.trythisforexample.com/
http://www.myspace.com/leadingbyexample?_escaped_fragment_=
https://www.youtube.com/watch?v=CLXt3yh2g0s
https://en.wikipedia.org/wiki/Example_(musician)
http://www.merriam-webster.com/dictionary/example
... 
```

请注意，仅 HTML 版本仅包含*results*，并且对于*相关搜索*，您必须使用 JavaScript 版本。（`html`网址中没有部分）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T13:54:08.400

在已经得到我接受并给予赏金的问题的答案之后 - 我找到了一个不同的解决方案，为了完整起见，我想在这里添加它。非常感谢所有帮助我找到这个解决方案的人。尽管这不是我要求的解决方案，但它可能会在未来帮助某人。

在本网站上进行了长时间的艰苦对话并附有一些支持邮件后发现：[https ://duck.co/topic/strange-problem-when-searching-intel-with-my-script](https://duck.co/topic/strange-problem-when-searching-intel-with-my-script)

这是解决方案代码（来自上面发布的线程中的答案）：

```
>>> import duckduckgo
>>> print duckduckgo.query('! Example').redirect.url
http://www.iana.org/domains/example 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T14:35:33.020

尝试：

```
for result in r.results:
    print result.text 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-12T18:07:51.790

如果它适合您的应用程序，您也可以尝试相关搜索

```
r = duckduckgo.query("example")
for i in r.related_searches:
    if i.text:
        print i.text 
```

这产生：

```
Eixample, an inner suburb of Barcelona with distinctive architecture
Example (musician), a British musician
example.com, example.net, example.org, example.edu  and .example, domain names reserved for use in documentation as examples
HMS Example (P165), an Archer-class patrol and training vessel of the British Royal Navy
The Example, a 1634 play by James Shirley
The Example (comics), a 2009 graphic novel by Tom Taylor and Colin Wilson 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-16T14:39:15.400

对于 python 3 用户，@Rostyslav Dzinko 代码的转录：

```
import re, urllib
import pandas as pd
from bs4 import BeautifulSoup

query = "your query"
site = urllib.request.urlopen("http://duckduckgo.com/html/?q="+query)
data = site.read()
soup = BeautifulSoup(data, "html.parser")

my_list = soup.find("div", {"id": "links"}).find_all("div", {'class': re.compile('.*web-result*.')})[0:15]

(result__snippet, result_url) = ([] for i in range(2))

for i in my_list:         
      try:
            result__snippet.append(i.find("a", {"class": "result__snippet"}).get_text().strip("\n").strip())
      except:
            result__snippet.append(None)
      try:
            result_url.append(i.find("a", {"class": "result__url"}).get_text().strip("\n").strip())
      except:
            result_url.append(None) 
```

# java - 在片段之后添加方法

> ID：11722471
> 
> 赞同：0
> 
> 时间：2012-07-30T13:20:53.000
> 
> 标签：java, android, android-fragments, android-fragmentactivity

我有一个可以在任何地方添加的“计时器”片段。在片段中，我以编程方式更改了一个 textView，它运行得很漂亮。我的问题是，在它下面的另一种方法中使用构造函数膨胀的布局中的视图（？不确定这是否是正确的术语）。

```
public class Timer_fragment extends android.support.v4.app.Fragment {
    int testpins;
    String testedpin;
    TextView text;  
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    View v = inflater.inflate(R.layout.timer_frag, container, false);

    TextView text = (TextView) v.findViewById(R.id.pwd_status);
    text.setText("Setting text in fragment not main");
    /* set the TextView's text, click listeners, etc. */
    updateStatus();
    return v;
} 
```

所有这些代码都可以正常工作，但是当我尝试添加此方法时：

```
private void updateStatus() {
            TextView text = (TextView) findViewById(R.id.pwd_status);
            testPin();

            text.setText(testedpin);                         
        } 
```

我在 findViewById 下得到一条红线`The method findViewById(int) is undefined for the type Timer_fragment`。

我想过在我所有的方法中夸大视图而不是返回它们，但这肯定会以某种方式影响性能，对吧？

*刚刚尝试在使用视图之前膨胀布局，但我收到一个错误，`inflater`并`container`说它们无法解决。*

我这样做对吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T13:34:16.683

您的 Fragment 范围内已经有一个名为`text`. 不要在您的方法中重新声明它，只需分配它。

```
text = (TextView) v.findViewById(R.id.pwd_status); 
```

和

```
private void upateStatus() {
        testPin();
        text.setText(testedpin);                         
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T13:32:11.533

方法“findViewById”由活动提供。虽然此类扩展了 Fragment，但您将无法访问与活动相关的方法调用，除非您将活动提供给片段。查看： http: [//developer.android.com/reference/android/app/Activity.html#findViewById](http://developer.android.com/reference/android/app/Activity.html#findViewById(int) (int )

基本上，要么将活动实例传递给 Timer_fragment：

```
private final Activity _activity;

Timer_fragment(Activity activity)
{
    _activity = activity;
}
...

private void updateStatus()
{
    TextView text = (TextView) _activity.findViewById(R.id.pwd_status);
    testPin();

    text.setText(testedpin);                         
} 
```

或者从正在使用的任何活动中设置视图的文本，而不是从计时器类中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-02T08:58:04.147

只需替换`findViewById`为`getActivity().findViewById`.

findViewById 方法是在 Activity 类中定义的。片段不是活动。但是片段可以使用 getActivity 方法获得对将其添加到屏幕的 Activity 的引用。

# android - 当 screenOrientation 发生变化时，修复 SurfaceView 大小的纵横比以在 Android 中固定为 4:3

> ID：11722477
> 
> 赞同：1
> 
> 时间：2012-07-30T13:21:19.677
> 
> 标签：android, surfaceview

在我的 android 应用程序中，横向模式下`SurfaceView`的大小为 (320*240, 4:3) 。`screenOrientation`当我将暴徒旋转到纵向模式时，SurfaceVeiw 的大小为 (240,340)，我如何在更改`SurfaceView`时强制保持 4:3 的纵横比`screenOrientation`。我正在使用`Absolute`/`Frame`布局。

如何`SurfaceView`在Android中修复大小的纵横比以修复为4：3。？谢谢并恭祝安康，

# javascript - 如何使用backbone.js在父视图中注入多个视图

> ID：11722482
> 
> 赞同：1
> 
> 时间：2012-07-30T13:21:28.827
> 
> 标签：javascript, backbone.js

我有一个 update.html 模板，只有一个标题，看看它是否有效。我想删除 id 为 registerPageContent 的 div 并添加 id 为 pdateTariffContent 的 div，我想在单击按钮 updateButton 时完成。我不知道我哪里错了。

# android - Android中的getText().toString()阿拉伯字符

> ID：11722488
> 
> 赞同：0
> 
> 时间：2012-07-30T13:21:40.903
> 
> 标签：android, string, arabic

我有一个edittext和一个按钮。当我按下按钮时，edittext 中的文本使用 JSON 上传到服务器上。JSON 部分正在使用阿拉伯语和其他东西。我验证了。当我从 mysql 获取值时，我可以用阿拉伯字符设置文本。

谢谢。

编辑：好的。你是对的。问题出在php上。这个想法是，当我在 JSON 中打印并从 MYSql 数据库中读取时，它可以查看阿拉伯文本。但我不能发布它们。

所以，我可以阅读，但我不能用阿拉伯语写作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T13:40:29.627

```
 Button buton =(Button) findViewById(R.id.button);
 EditText editmessage =(EditText ) findViewById(R.id.button);

 button.setetOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
     String message = editmessage.getText().toString() 

  }
} 
```

# javascript - 如果子菜单项之一处于活动状态，则展开下拉菜单

> ID：11722494
> 
> 赞同：1
> 
> 时间：2012-07-30T13:21:57.630
> 
> 标签：javascript, jquery, html

我有一个通过单击展开的下拉菜单。默认情况下，菜单是折叠的。如果子菜单页面之一处于活动状态，我希望菜单看起来被扩展。我希望这很清楚。这是我的代码。

HTML

```
<li class="dropdown">
            <a class="disablelink" href="#">Carbohydrates, proteins &amp; fats</a>
            <ul class="sub_navigation">
                <li><a href="carbohydrates.php">Carbohydrates</a></li>
                <li><a href="proteins.php">Proteins</a></li>
                <li><a href="fats.php">Fats</a></li>
            </ul>
        </li> 
```

jQuery

```
$(document).ready(function() {
        $('.dropdown').click(function() {
                        // When the event is triggered, grab the current element 'this' and
                        // find it's children '.sub_navigation' and display/hide them
            $(this).find('.sub_navigation').slideToggle(); 
        });

        $(".disablelink").click(function(e) {
            e.preventDefault();
        });

    }); 
```

因此，如果用户打开`carbohydrates.php`，`proteins.php`或者 `fats.php`我希望扩展菜单。我不知道该怎么做。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T13:34:10.507

例如，当页面处于活动状态时，您需要为其链接提供额外的类；

`<li class="current_page"><a href="carbohydrates.php">Carbohydrates</a></li>`.

然后，您可以使用 jQuery 循环遍历菜单并在任何菜单项具有该类时展开它。

```
$('.dropdown li').each(function() {
    if ($(this).hasClass('current_page')) {
           $(this).closest('.sub_navigation').slideDown();          
    }            
}); 
```

演示：http: [//jsfiddle.net/R7gkw/](http://jsfiddle.net/R7gkw/)

# r - 如何在R中制作维恩图？

> ID：11722497
> 
> 赞同：2
> 
> 时间：2012-07-30T13:22:15.433
> 
> 标签：r, venn-diagram

嗨，我是 R 新手，我必须用它来制作维恩图。我已经用谷歌搜索了一段时间，我能找到的所有示例都处理二进制变量。但是我有 2 个列表（实际上是 2 个 csv 文件）。列表中的项目只是字符串，例如 PSF113_xxxx。我必须对它们进行比较，看看它们各自的独特之处和共享的东西。我将如何在 R 中制作维恩图？

此外，这些文件中的东西数量也不相同，一个比另一个稍多，这意味着 cbind 函数返回错误。

到目前为止，我已经想出了这个，但这只是给我一个名为 group 1 的圆圈的图像，里面有一个 1，外面有一个 0。

```
matLis <- list(matrix(A), matrix(B))

n <- max(sapply(matLis, nrow))
do.call(cbind, lapply(matLis, function (x)
     rbind(x, matrix(, n-nrow(x), ncol(x))))) 

x = vennCounts(n)
vennDiagram(x) 
```

这是数据的一个例子

```
2 PSF113_0018
3 PSF113_0079
4 PSF113_0079a
5 PSF113_0079b 
```

左边的编号不是我做过的任何事情，它补充说，当我从 excel 将文件导入 R 时

```
head(A)
> head(A)
            V1
1 PSF113_0016a
2  PSF113_0018
3  PSF113_0079
4 PSF113_0079a
5 PSF113_0079b
6 PSF113_0079c

> head(b,10)
             V1
1  PSF113_0016a
2   PSF113_0021
3   PSF113_0048
4   PSF113_0079
5  PSF113_0079a
6  PSF113_0079b
7  PSF113_0079c
8   PSF113_0295
9  PSF113_0324a
10 PSF113_0324b 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T13:52:53.960

您的代码仍然不能完全重现，因为您还没有定义 A 或 B。这是包中维恩图的指南，`venneuler`因为我发现它更灵活。

```
List1 <- c("apple", "apple", "orange", "kiwi", "cherry", "peach")
List2 <- c("apple", "orange", "cherry", "tomatoe", "pear", "plum", "plum")
Lists <- list(List1, List2)  #put the word vectors into a list to supply lapply
items <- sort(unique(unlist(Lists)))   #put in alphabetical order
MAT <- matrix(rep(0, length(items)*length(Lists)), ncol=2)  #make a matrix of 0's
colnames(MAT) <- paste0("List", 1:2)
rownames(MAT) <- items
lapply(seq_along(Lists), function(i) {   #fill the matrix
    MAT[items %in% Lists[[i]], i] <<- table(Lists[[i]])
})

MAT   #look at the results
library(venneuler)
v <- venneuler(MAT)
plot(v) 
```

**编辑：**头部非常有帮助，因为它给了我们一些可以使用的东西。试试这个方法：

```
#For reproducibility (skip this and read in the csv files)
A <- structure(list(V1 = structure(1:6, .Label = c("PSF113_0016a", 
    "PSF113_0018", "PSF113_0079", "PSF113_0079a", "PSF113_0079b", 
    "PSF113_0079c"), class = "factor")), .Names = "V1", 
    class = "data.frame", row.names = c("1", 
    "2", "3", "4", "5", "6"))

B <- structure(list(V1 = structure(1:10, .Label = c("PSF113_0016a", 
    "PSF113_0021", "PSF113_0048", "PSF113_0079", "PSF113_0079a", 
    "PSF113_0079b", "PSF113_0079c", "PSF113_0295", "PSF113_0324a", 
    "PSF113_0324b"), class = "factor")), .Names = "V1", 
    class = "data.frame", row.names = c("1", 
    "2", "3", "4", "5", "6", "7", "8", "9", "10")) 
```

# 从这里运行代码：

```
#after reading in the csv files start here
Lists <- list(A, B)  #put the word vectors into a list to supply lapply
Lists <- lapply(Lists, function(x) as.character(unlist(x)))
items <- sort(unique(unlist(Lists)))   #put in alphabetical order
MAT <- matrix(rep(0, length(items)*length(Lists)), ncol=2)  #make a matrix of 0's
colnames(MAT) <- paste0("List", 1:2)
rownames(MAT) <- items
lapply(seq_along(Lists), function(i) {   #fill the matrix
    MAT[items %in% Lists[[i]], i] <<- table(Lists[[i]])
})

MAT   #look at the results
library(venneuler)
v <- venneuler(MAT)
plot(v) 
```

这种方法的不同之处在于我没有列出两个数据帧（如果它们是数据帧），然后将它们转换为字符向量。我认为这应该有效。

# python - OpenCV：从用户定义的关键点中提取 SURF 特征

> ID：11722502
> 
> 赞同：6
> 
> 时间：2012-07-30T13:22:31.123
> 
> 标签：python, opencv, surf

我想从我指定的关键点计算 SURF 特征。我正在使用 OpenCV 的 Python 包装器。以下是我尝试使用的代码，但我在任何地方都找不到工作示例。

```
surf = cv2.SURF()
keypoints, descriptors = surf.detect(np.asarray(image[:,:]),None,useProvidedKeypoints = True) 
```

如何指定此函数要使用的关键点？

类似的，未回答的问题： [cvExtractSURF don't work when useProvidedKeypoints = true](https://stackoverflow.com/questions/10144106/cvextractsurf-dont-work-when-useprovidedkeypoints-true?rq=1)

[文档](http://docs.opencv.org/modules/nonfree/doc/feature_detection.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T08:59:53.897

如果我正确理解 Python 绑定的源代码，则 C++ 接口中存在的“关键点”参数永远不会在 Python 绑定中使用。所以我冒着风险，用当前的绑定做你想做的事情是不可能的。一个可能的解决方案是编写自己的绑定。我知道这不是你希望的答案...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-30T11:03:33.130

**尝试为此使用 cv2.DescriptorMatcher_create 。**

例如，在下面的代码中，我使用的是 pylab，但你可以得到消息；）

它使用 GFTT 计算关键点，然后使用 SURF 描述符和蛮力匹配。每个代码部分的输出显示为标题。

* * *

```
%pylab inline
import cv2
import numpy as np

img = cv2.imread('./img/nail.jpg')
gray= cv2.cvtColor(img,cv2.COLOR_BGR2GRAY)
imshow(gray,  cmap=cm.gray) 
```

输出类似于[http://i.stack.imgur.com/8eOTe.png](http://i.stack.imgur.com/8eOTe.png)

（对于这个例子，我将作弊并使用相同的图像来获取关键点和描述符）。

```
img1 = gray
img2 = gray
detector = cv2.FeatureDetector_create("GFTT")
descriptor = cv2.DescriptorExtractor_create("SURF")
matcher = pt1=(int(k1[m.queryIdx].pt[0]),int(k1[m.queryIdx].pt[1]))("FlannBased")

# detect keypoints
kp1 = detector.detect(img1)
kp2 = detector.detect(img2)

print '#keypoints in image1: %d, image2: %d' % (len(kp1), len(kp2)) 
```

# image1中的关键点：1000，image2：1000

```
# descriptors
k1, d1 = descriptor.compute(img1, kp1)
k2, d2 = descriptor.compute(img2, kp2)

print '#Descriptors size in image1: %s, image2: %s' % ((d1.shape), (d2.shape)) 
```

# image1 中的描述符大小：(1000, 64)，image2: (1000, 64)

```
# match the keypoints
matches = matcher.match(d1,d2)

# visualize the matches
print '#matches:', len(matches)
dist = [m.distance for m in matches]

print 'distance: min: %.3f' % min(dist)
print 'distance: mean: %.3f' % (sum(dist) / len(dist))
print 'distance: max: %.3f' % max(dist) 
```

# 匹配数：1000

距离：分钟：0.000

距离：平均值：0.000

距离：最大：0.000

```
# threshold: half the mean
thres_dist = (sum(dist) / len(dist)) * 0.5 + 0.5

# keep only the reasonable matches
sel_matches = [m for m in matches if m.distance < thres_dist]

print '#selected matches:', len(sel_matches) 
```

# 选择匹配：1000

```
#Plot
h1, w1 = img1.shape[:2]
h2, w2 = img2.shape[:2]
view = zeros((max(h1, h2), w1 + w2, 3), uint8)
view[:h1, :w1, 0] = img1
view[:h2, w1:, 0] = img2
view[:, :, 1] = view[:, :, 0]
view[:, :, 2] = view[:, :, 0]

for m in sel_matches:
    # draw the keypoints
    # print m.queryIdx, m.trainIdx, m.distance
    color = tuple([random.randint(0, 255) for _ in xrange(3)])
    pt1=(int(k1[m.queryIdx].pt[0]),int(k1[m.queryIdx].pt[1]))
    pt2=(int(k2[m.queryIdx].pt[0]+w1),int(k2[m.queryIdx].pt[1]))
    cv2.line(view,pt1,pt2,color) 
```

输出是这样的[http://i.stack.imgur.com/8CqrJ.png](http://i.stack.imgur.com/8CqrJ.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-19T21:09:51.250

前面提到的如何做到这一点的例子`Mahotas`：

```
import mahotas
from mahotas.features import surf
import numpy as np

def process_image(imagename):
    '''Process an image and returns descriptors and keypoints location'''
    # Load the images
    f = mahotas.imread(imagename, as_grey=True)
    f = f.astype(np.uint8)

    spoints = surf.dense(f, spacing=12, include_interest_point=True)
    # spoints includes both the detection information (such as the position
    # and the scale) as well as the descriptor (i.e., what the area around
    # the point looks like). We only want to use the descriptor for
    # clustering. The descriptor starts at position 5:
    desc = spoints[:, 5:]
    kp = spoints[:, :2]

    return kp, desc 
```

# apache - Web 服务器 - 特定响应超时？

> ID：11722510
> 
> 赞同：0
> 
> 时间：2012-07-30T13:23:15.137
> 
> 标签：apache, nginx, timeout

我们正在开发一种需要在 50 毫秒内做出响应的服务，并且它需要一个良好的 SLA，即必须始终保持实时和响应。

问题 - 是否可以设置默认响应（例如使用空白 JSON 对象响应）以在 Web 服务器（nginx 或 Apache）超时的情况下使用？如果是这样 - 怎么做？

我可以将它添加到应用程序逻辑中，但在服务器级别设置它会更防故障。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T22:00:39.570

您可以使用该[`error_page`](http://nginx.org/r/error_page)指令。

例如：

```
error_page 502 504 =200 @blank_json;

location @blank_json {
    return 200 "{}";
} 
```

# c# - 如何在 SyndicationFeed 中使用非标准命名空间？

> ID：11722519
> 
> 赞同：0
> 
> 时间：2012-07-30T13:23:59.190
> 
> 标签：c#, xml-parsing

再会。首先，让我警告您：我的 XML 知识是基础知识，所以我可能在我的研究中找到了正确的答案，只是不明白如何应用它。

我目前有一些 C# 代码读取国家气象服务 XML 文件并在元素中查找文本以确定是否有天气警报。这行得通，但我更愿意测试另一个元素的存在，然后使用它的文本将警报写入网页。带有警告的 XML 文件示例如下：http: [//www.co.frederick.va.us/dev/scrapewarning.xml](http://www.co.frederick.va.us/dev/scrapewarning.xml)。我想测试是否存在，`<cap:event>`然后使用它的文本来填充网页上的文字。

这就是我现在正在做的事情：

```
// Create an instance of XmlReader with the warning feed and then load it into a SyndicationFeed.
XmlReader reader = XmlReader.Create(strWarningFeed);
SyndicationFeed feed = SyndicationFeed.Load(reader);

// Read through the XML, pull out the items we need depending on whether or not there is a warning.
foreach (var str in feed.Items)
{
    if (str.Title.Text.Contains("no active"))
    {
        weatherWarning.Visible = false;
    }
    else
    {
        string strTitle = str.Title.Text;
        string strId = str.Id.ToString();
        strTitle = strTitle.Substring(0, strTitle.LastIndexOf("issued"));
        litOut.Text += String.Format("<p class=\"warningText\">{0}</p><p class=\"warningText\"><a href=\"{1}\">Read more.</a></p>", strTitle, strId);
    }
} 
```

因此，与其看到它的标题包含“无活动”，我宁愿询问文档是否有一个名为的元素`<cap:event>`，然后使用它的文本。伪代码：

```
foreach (var str in feed.Items)
{
    if (<cap:event> doesn't exist)
    {
        weatherWarning.Visible = false;
    }
    else
    {
        string strTitle = <cap:event>.Text;
    }
} 
```

如果您需要更多信息，请告诉我。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T13:42:25.363

使用linq to xml，检查是否存在（以及任何现有值）之类的事情要容易得多。如果将 xml 加载到 XDocument 中，则可以使用 linq 的优点来查询元素和后代。无需在 IDE 前或能够非常仔细地查看该示例 xml，例如 doc.Descendants("weather").Where(e => e.Element("event") == "whatever") .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T14:51:07.207

我相信您缺少名称空间管理器。以下是代码如何与 XmlDocument 一起使用：

```
 var xmlDoc = new XmlDocument();
        xmlDoc.Load(@"http://www.co.frederick.va.us/dev/scrapewarning.xml");
        var nsm = new XmlNamespaceManager(xmlDoc.NameTable);
        nsm.AddNamespace("s", "http://www.w3.org/2005/Atom");
        nsm.AddNamespace("cap", "urn:oasis:names:tc:emergency:cap:1.1");
        var nodes = xmlDoc.SelectNodes("//s:entry[cap:event]", nsm); 
```

# apache-flex - 如何在 flex 4.5 中应用 css 运行时？

> ID：11722520
> 
> 赞同：0
> 
> 时间：2012-07-30T13:24:00.487
> 
> 标签：apache-flex, flex4, flex4.5

我有这种样式的 CSS 文件：

```
@namespace s "library://ns.adobe.com/flex/spark";
@namespace mx "library://ns.adobe.com/flex/mx";

global{
chrome-color: #DEEBFF;
color: #444444;
content-background-color: #FFFFFF;
symbol-color: #333333;
roll-over-color: #EBF4FF;
selection-color: #DEEBFF;
focus-color: #EEEEEE;
accent-color: #C0E3FF;}

s|Application{
background-color: #EBF4FF; 
```

}

我想在运行时更改其中一些颜色，例如 chrome-color 或 symbol-color，但找不到 setStyle 的这些属性。

有什么线索吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T15:42:35.380

您可以更改特定组件的全局样式和样式。

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
    xmlns:mx="library://ns.adobe.com/flex/mx"
    xmlns:s="library://ns.adobe.com/flex/spark">

    <fx:Style>
        @namespace s "library://ns.adobe.com/flex/spark";
        @namespace mx "library://ns.adobe.com/flex/mx";

        global
        {
            fontWeight: bold;
            fontSize: 20;
        }

    </fx:Style>

    <fx:Script>
        <![CDATA[
            protected function button1_clickHandler(event: MouseEvent): void
            {
                styleManager.getStyleDeclaration("global").setStyle("fontSize", 12);
                styleManager.getStyleDeclaration("global").setStyle("fontWeight", "normal");
            }

            protected function button2_clickHandler(event: MouseEvent): void
            {
                myLabel.setStyle("fontSize", 100);
            }
        ]]>
    </fx:Script>

    <s:Button click="button1_clickHandler(event)"
        label="Global" />

    <s:Button x="100 "
        click="button2_clickHandler(event)"
        label="Label" />

    <s:Label id="myLabel"
        y="50"
        text="Some text" />

</s:Application> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T17:56:02.510

如果您在运行时有一些预定义的更改集，那么您可以创建多个 css 文件并在运行时加载它们。要在运行时加载 CSS，您必须将 css 编译为 swf，在 flash builder 中，这可以通过右键单击 css 文件并选择将 CSS 编译为 swf 来完成，或者您可以使用将 CSS 编译为 swf

```
mxmlc filename.css 
```

此命令将在您的 css 文件所在的同一目录中生成 filename.swf。然后你可以使用加载编译的css

```
styleManager.loadStyleDeclarations("../assets/filename.swf"); 
```

# lua - Lua中输入文本的自定义滚动按钮

> ID：11722524
> 
> 赞同：0
> 
> 时间：2012-07-30T13:24:26.150
> 
> 标签：lua, custom-scrolling

请问我现在面临的问题是，我想创建两个按钮来使用lua左右滚动输入框中的文本，特别是当部分文本隐藏在输入框中时。我知道这可以使用键盘上的左右箭头来完成，但我需要的是如何以自定义方式执行此操作，使用一个按钮向左，一个按钮向右。实际上，我什至不知道是否应该说如何使用滚动条形式的两个按钮来控制光标移动。但是，无论哪种方式都很清楚，在创建按钮之后，我怎么能用 lua 语言做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:30:16.377

也许看看[IUP](http://www.tecgraf.puc-rio.br/iup/)。它是专用的 Lua GUI 库，当然也有这样的功能。

# cocoa - cocoa：NSbutton sender intValue是什么意思？

> ID：11722530
> 
> 赞同：1
> 
> 时间：2012-07-30T13:24:33.567
> 
> 标签：cocoa

我创建了一个 IBAction，如下所示：

```
- (IBAction)okButton:(id)sender {
    NSLog(@"%d",[sender intValue]);
} 
```

当我反复单击按钮时，代码打印出 1,0,1,0,1,0。我想知道发件人的 intValue 的含义。引用是 以 int 形式返回接收者的值。但我不知道这不是什么意思。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T15:10:00.997

那将是 NSButton 状态，它是一个 NSInteger，但您应该改用这个枚举：

```
enum {
   NSMixedState = -1,
   NSOffState   = 0,
   NSOnState    = 1
}; 
```

该按钮通常会一直存在，`NSOffState`直到您单击它并更改为`NSOnState`，然后下一次单击将其再次更改回 - 对于一个简单的按钮，您不会在视觉上看到此状态，但对于某些按钮类型（如复选框），会显示状态视觉上。

这里`sender`将是你的`NSButton`，使用它会更正确，`state`而不是`intValue`（但你需要`NSButton`先将它转换为）。

# git - 回滚 Git 合并

> ID：11722533
> 
> 赞同：312
> 
> 时间：2012-07-30T13:24:45.463
> 
> 标签：git

```
develop branch
--> dashboard (working branch) 
```

我`git merge --no-ff develop`用来将任何上游更改合并到仪表板中

混帐日志：

```
commit 88113a64a21bf8a51409ee2a1321442fd08db705
Merge: 981bc20 888a557
Author: XXXX <>
Date:   Mon Jul 30 08:16:46 2012 -0500

    Merge branch 'develop' into dashboard

commit 888a5572428a372f15a52106b8d74ff910493f01
Author: root <root@magneto.giveforward.com>
Date:   Sun Jul 29 10:49:21 2012 -0500

    fixed end date edit display to have leading 0

commit 167ad941726c876349bfa445873bdcd475eb8cd8
Author: XXXX <>
Date:   Sun Jul 29 09:13:24 2012 -0500 
```

合并中有大约 50 多个提交，我想知道如何恢复合并，以便仪表板回到合并前的状态

第二部分是，如果我不与 合并`--no-ff`，我不会得到提交'**合并分支'开发'到仪表板**'..我将如何回滚该合并？

* * *

## 回答 #1

> 赞同：443
> 
> 时间：2012-07-30T13:32:27.917

[其他问题](https://stackoverflow.com/questions/2389361/git-undo-a-merge)已经详尽地介绍了恢复合并提交。当您进行快进合并时，您描述的第二个合并，您可以使用`git reset`它返回到之前的状态：

```
git reset --hard <commit_before_merge> 
```

你可以找到`<commit_before_merge>`with `git reflog`, `git log`, 或者，如果你感觉很奇怪（并且没有做任何其他事情）：`git reset --hard HEAD@{1}`

* * *

## 回答 #2

> 赞同：193
> 
> 时间：2015-07-29T10:24:29.540

从这里：

[http://www.christianengvall.se/undo-pushed-merge-git/](http://www.christianengvall.se/undo-pushed-merge-git/)

```
git revert -m 1 <merge commit hash> 
```

Git revert 添加一个回滚指定提交的新提交。

using`-m 1`告诉 git 这是一个合并，我们想回滚到主分支上的父提交。您将使用`-m 2`指定开发分支。

* * *

## 回答 #3

> 赞同：46
> 
> 时间：2012-07-30T13:30:47.463

只需重置合并提交`git reset --hard HEAD^`。

如果你使用 --no-ff git 总是会创建一个合并，即使你没有在两者之间提交任何东西。如果没有 --no-ff git 只会快进，这意味着您的分支 HEAD 将设置为合并分支的 HEAD。要解决此问题，请找到您要恢复为的提交 ID 和`git reset --hard $COMMITID`.

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2015-03-17T21:36:11.117

```
git revert -m 1 88113a64a21bf8a51409ee2a1321442fd08db705 
```

但可能有意想不到的副作用。请参阅[git-scm.com/docs/git-revert](http://git-scm.com/docs/git-revert)`--mainline parent-number`中的选项

也许一种粗暴但有效的方法是检查该提交的左父级，复制所有文件，`HEAD`再次检查，并用旧文件替换所有内容。然后 git 会告诉你正在回滚什么，然后你创建自己的还原提交 :) ！

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2020-06-08T11:00:16.097

如果您合并了分支，则使用拉取请求恢复合并并合并该拉取请求以恢复。

我觉得最简单的方法是：

1.  从develop/master（您合并的地方）取出一个新分支
2.  使用`git revert -m 1 xxxxxx`（如果使用分支合并还原）或使用`git revert xxxxxx`简单还原来还原“还原”
3.  新分支现在应该有您想要再次合并的更改。
4.  进行更改或将此分支合并到开发/主

# c# - Linq to Sql 的 SubmitChanges 不保存到基础表

> ID：11722537
> 
> 赞同：0
> 
> 时间：2012-07-30T13:24:49.890
> 
> 标签：c#, linq, linq-to-sql

我有一个代码：

```
 MyDataClassesDataContext dc = new MyDataClassesDataContext();
        Table<FormsAuthorisation> databaseAuthorisation = GetFormsAuthorisation();
        Table<ADForm> databaseForms = GetADForm();

        foreach (var auth in authorisation)
        {
            var databaseAuth = databaseAuthorisation.Where(p => p.GroupID == auth.GroupID && p.FormID == auth.FormID).FirstOrDefault();

            databaseAuth.CanRead = auth.CanRead;
            databaseAuth.CanWrite = auth.CanWrite;
            dc.SubmitChanges();

        }

        foreach (var form in forms)
        {
            var databaseForm = databaseForms.Where(p => p.FormID == form.FormID).FirstOrDefault();
            databaseForm.FormDescription = form.FormDescription;
            dc.SubmitChanges();

        }

        dc.SubmitChanges(); 
```

此代码根本不保存任何更新的值。

google了很久但是没有好的结果

**我所有的表都定义了主键。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T13:27:46.753

我想说这很简单，因为您`databaseAuthorisation`从不同的数据上下文中提取（通过`GetFormsAuthorisation`方法）。您实际上并没有对`dc`. 因此，当您提交更改时，上下文无需进行任何更改。

这同样适用于`databaseForms`.

选项是您可以重载您的方法以允许`dc`传入和使用数据上下文。或者您可以在此代码块中复制您的方法的功能。显然，如果您的方法应用了任何合理数量的逻辑，那么复制并不理想。

例如：

```
public Table<FormsAuthorisation> GetFormsAuthorisation()
{
    MyDataClassesDataContext dc = new MyDataClassesDataContext();
    return GetFormsAuthorisation(dc);
}

public Table<FormsAuthorisation> GetFormsAuthorisation(MyDataClassesDataContext dc)
{
    //do whatever you already do inside your GetFormsAuthorisation function using dc parameter
} 
```

现在，您仍然可以使用不带参数的函数进行只读执行（例如查看记录），并且可以使用重载版本来允许修改记录：

```
MyDataClassesDataContext dc = new MyDataClassesDataContext();
Table<FormsAuthorisation> databaseAuthorisation = GetFormsAuthorisation(dc);
//make any changes
dc.SubmitChanges(); 
```

# wix - WiX：在 CustomAction 期间动态更改状态文本

> ID：11722541
> 
> 赞同：8
> 
> 时间：2012-07-30T13:25:11.800
> 
> 标签：wix, wix3.5

我在 wix 安装程序中有一个相当长的 CustomAction，我希望能够在操作运行时更改“状态：...”文本，以查看其内部状态的进展和更新。我知道如何设置自定义操作的进度文本 - 但我想要的是在自定义操作运行期间动态更改进度文本。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-30T15:36:39.520

延迟自定义操作可以调用 MsiProcessMessage 函数。然后，您可以使用 INSTALLMESSAGE_ACTIONSTART、INSTALLMESSAGE_ACTIONDATA 和 INSTALLMESSAGE_PROGRESS 将消息发布到 UI。

另一种可能性是将您的自定义操作分解为更小的自定义操作并使用 ProgressText（ActionText 表）来描述安装的不同阶段。（让每个 CA 承担单一职责。）

有时，当 CA 做太多工作时，很难正确计划回滚。

[获取延迟执行自定义操作的上下文信息](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370543%28v=vs.85%29.aspx)

[MsiProcessMessage 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370354%28v=vs.85%29.aspx)

使用 C#/DTF 它看起来像：

```
 using (Record record = new Record(0))
    {
        record.SetString(0, "foo");
        session.Message(InstallMessage.ActionData, record);
    } 
```

using 语句处理记录以释放底层 MSI 句柄。记录中的字段数以及设置数据的方式将取决于 ActionText 表中定义的模板。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-05T14:58:17.443

Chris 已经正确解释了如何`ActionData`从您的 CA 发送消息，但如果您使用的是 InstallShield，请确保在对话框上创建一个标签并将文本事件`SetupProgress`订阅到它。`ActionData`简单地说，为标签创建`ActionText`事件是不够的，因为它只会显示您在 ActionText 表中创建的 CA 描述。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-05T01:36:54.677

上面的答案对我不起作用。状态永远不会更新。

直接调用 AddProgressInfo 函数适用于我的情况。

```
 Action<Session, string> updateStatusMessage = (session, msg) =>
      {
            session.Message(InstallMessage.ActionStart, new Record("callAddProgressInfo", msg, ""));
      }; 
```

# jquery - jeditable（内联编辑器）不适用于动态生成的元素

> ID：11722542
> 
> 赞同：2
> 
> 时间：2012-07-30T13:25:17.070
> 
> 标签：jquery, jeditable

生成动态元素的代码：

```
$(".add_entry").click(function(event) {
    id=event.target.id;
    var parent_id=($("#"+id+"").parent().get(0).id);
    var i=$("#"+parent_id+"_add").children().children().length;
    i=i+1;
    var content='<li id="'+parent_id+'_'+i+'"><div class="timelineUnit"><h4 class="click"        style="float:left;">Manager</h4><h4 style="float:right;"><span class="timelineDate   click">2010 - Present</span></h4><h5 class="click" style="clear:both;">Ligula Non Lectus</h5><p class="autogrow">Lorem ipsum dolor sit amet, consectetur adipiscingVivamus sit amet ligula non lectus cursus egestas. Cras erat lorem, fringilla quis sagittis in, sagittis inNam leo tortor Nam leo tortor Vivamus.</p></div></li>';
    $("#"+parent_id+"_add").append(content);
}); 
```

和**可编辑的功能代码**

```
$(function() {
    $(".click").editable("<?php echo HTTP_URL; ?>inline/php/assign.php", { 
        indicator : "<img src='<?php echo HTTP_URL; ?>inline/img/indicator.gif'>",
        tooltip   : "Click to edit...",
        style  : "inherit",
        submit    : 'Ok',
        cancel    : 'Cancel',
    });
}); 
```

上面的代码适用于类似 html 的代码， `<span class="click" id="name2">test</span>` 但不适用于动态生成的 html 表单 jquery（上述函数）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-26T11:59:07.030

对于动态生成的元素，还必须在生成脚本中调用可编辑脚本。

像这样替换您的代码：

```
 $(".add_entry").click(function(event) {
     id=event.target.id;
     var parent_id=($("#"+id+"").parent().get(0).id);
     var i=$("#"+parent_id+"_add").children().children().length;
     i=i+1;
     var content='<li id="'+parent_id+'_'+i+'"><div class="timelineUnit"><h4   class="click"        style="float:left;">Manager</h4><h4 style="float:right;"><span class="timelineDate   click">2010 - Present</span></h4><h5 class="click" style="clear:both;">Ligula Non Lectus</h5><p class="autogrow">Lorem ipsum dolor sit amet, consectetur adipiscingVivamus sit amet ligula non lectus cursus egestas. Cras erat lorem, fringilla quis sagittis in, sagittis inNam leo tortor Nam leo tortor Vivamus.</p></div></li>';
      $("#"+parent_id+"_add").append(content);

      $(".click").editable("<?php echo HTTP_URL; ?>inline/php/assign.php", { 
       indicator : "<img src='<?php echo HTTP_URL; ?>inline/img/indicator.gif'>",
       tooltip   : "Click to edit...",
       style  : "inherit",
       submit    : 'Ok',
       cancel    : 'Cancel',
      });

    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T20:20:00.530

绝不是 javascript 的家伙，但有时会修补。

但是如果你在 DOM 中注入 html，你不需要用 .live 或 .on 来编写它吗？

# php - 如何使用 shadowbox.js 保存和设置 window.pageYOffset

> ID：11722543
> 
> 赞同：0
> 
> 时间：2012-07-30T13:25:22.687
> 
> 标签：php, javascript, ajax, shadowbox

在[shadowbox](http://www.shadowbox-js.com)的盒子里，我有一长串元素，我希望当我关闭盒子并重新打开它时，滚动条的位置与我之前离开的位置相同。我找到了这个库：[redips-scroll.js](http://www.redips.net/javascript/maintain-scroll-position/)，它适用于简单页面，而不是 shadowbox，实际上它捕获`window.pageYOffset`了背景页面或前景页面。有没有办法使用另一个支持 AJAX 调用的灯箱库来获得所需的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:07:08.260

我通过改变我的页面构建方式解决了，[shadowbox](http://www.jacklmoore.com/colorbox/)不如 Colorbox 好、开源和灵活，所以我转向它，除此之外，[DataTables](http://www.datatables.net/)默认提供分页和状态保存。所以 scr*w shadowbox, :.)

Linuxatico

# c# - 将C#公钥导入java进行验证

> ID：11722548
> 
> 赞同：0
> 
> 时间：2012-07-30T13:25:38.893
> 
> 标签：c#, java, rsa, sha512

我在 C# 中创建了一个 pub/priv 密钥对，我想在 C# 中对其进行签名，然后在 Java 中对其进行验证。我如何使用 SHA512withRSA 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T07:21:45.287

您可以通过 JNI 接口轻松进行交换。

查看示例：

[csharp-in-java](http://arunkumarnonascii.blogspot.in/2011/12/csharp-in-java.html)

[cshapin-java-ii-字符串处理](http://arunkumarnonascii.blogspot.in/2012/01/csharpin-java-ii-string-handling.html)

同时必须通过 JNI 调用中的对象处理来改进。

# java - 在页面中集成 Java 小程序

> ID：11722550
> 
> 赞同：1
> 
> 时间：2012-07-30T13:25:44.527
> 
> 标签：java, jsp, applet

我正在尝试将处理小程序集成到 jsp 中，并在 jsp 中添加以下代码：

```
<!--<applet code="Test1.class" archive="C:\Users\user\Desktop\MyApplet.jar" width="600" height="600">
</applet> --!> 
```

我正在使用tomcat服务器。jar 包含 Test1.class 文件。但是每当我运行此页面时，我都会在网页中收到错误消息。单击以获取详细信息时，显示的消息是

```
IllegalArgumentException: name![enter image description here][1] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T00:08:17.077

极简主义示例：

```
<applet 
  code="Test1" 
  codebase="."
  archive="MyApplet.jar" 
  width=400
  height=400>
</applet> 
```

*   `code`- 完全限定的类名（例如`javax.swing.JApplet`）
*   `codebase`- A`.`表示“当前目录”——HTML 的加载位置。虽然当前目录是默认目录，但我喜欢让它显式。
*   `archive`- 从代码库到存档的相对路径。为简单起见，假定存档与 HTML 位于同一位置。
*   `width`/ `height`- 必须指定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T13:33:41.147

您必须使用“代码库”属性来设置路径。考虑将它放在同一个文件夹（或当前文件夹的子文件夹）中，*而不是绝对路径*。

```
<applet code="Test1" name="yourName" archive="MyApplet.jar" codebase="C:\Users\user\Desktop">
</applet> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T17:32:55.630

如果您使用 Tomcat，您可以将小程序部署为...

*   A）将您的 jar + 它的 html 启动页面放到同一个文件夹中（我仍然推荐一个 war 文件及其**WEB-INF**文件夹）
*   B）并将小程序标签配置为

> ```
>  <applet code="Test1" archive="MyApplet.jar" codebase="."  width="600" height="600">
>     </applet> 
> ```

更多...清除文件结构应如下图所示...

|网络应用

||aWarFile.war

|||WEB-INF

|||MyApplet.jar

|||MyAppletLauncher.html（或 *.jsp）

* * *

有帮助的报告

祝你好运

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T08:05:16.797

```
<applet code="package1.Test1" name="myApplet" archive="MyApplet.jar,core.jar" codebase="." width="600" height="600"> 
```

上面的代码让我得到了结果。

# cocoa - 无法存储通过 InterfaceBuilder 设置的 NSTextField 的背景颜色

> ID：11722556
> 
> 赞同：0
> 
> 时间：2012-07-30T13:26:06.790
> 
> 标签：cocoa, colors, interface-builder, background-color, nstextfield

我正在尝试`NSTextField`通过 Interface Builder 将背景颜色集缓存在成员变量中，以便以后在另一个组件中使用。启动时，背景颜色`NSTextField`设置为透明。

```
@implementation CTTextField

- (id)initWithCoder:(NSCoder*)coder {
    self = [super initWithCoder:coder];
    if (self) {
        [self customize];
    }
    return self;
}

- (id)initWithFrame:(NSRect)frame {
    self = [super initWithFrame:frame];
    if (self) {
        [self customize];
    }
    return self;
}

- (void)awakeFromNib {
    ...
    [self customize];
}

- (void)customize {
    // Store the user defined background color.
    // FIXME: The color is not stored.
    m_userDefinedBackgroundColor = self.backgroundColor;
    // Disable the background color.
    self.backgroundColor = [NSColor colorWithCalibratedWhite:1.0f alpha:0.0f];
    ...
}

@end 
```

然而，`m_userDefinedBackgroundColor`总是**黑色**的。我正在处理
的整个[CocoaThemes 项目都可以在 GitHub 上找到。](https://github.com/johnjohndoe/CocoaThemes)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T19:55:33.747

你的`-customize`方法被调用了两次。当 nib 正在加载时，所有对象都在初始化，`-initWithCoder:`然后接收`-awakeFromNib`. 您应该像这样删除您的或`-initWithCoder:`或`-awakeFromNib`检查：`m_userDefinedBackgroundColor``nil``-customize`

```
- (void)customize {
    // Store the user defined background color.
    // FIXME: The color is not stored.

    if (m_userDefinedBackgroundColor == nil)
        m_userDefinedBackgroundColor = self.backgroundColor;

    // Disable the background color.
    self.backgroundColor = [NSColor colorWithCalibratedWhite:1.0f alpha:0.0f];
    ...
} 
```

# php - 在 Safari 中强制文件下载

> ID：11722560
> 
> 赞同：0
> 
> 时间：2012-07-30T13:26:29.250
> 
> 标签：php, file, safari, http-headers

我正在尝试使文件可在 Safari 中下载。这是我的代码：

```
<?php
$file = $_GET['file'];
header ("Content-Disposition: attachment");
header ("Content-type: application/octet-stream");
header ("Content-disposition: attachment; filename=".$file.";");
header("Content-Length: ".filesize($file));
readfile($file);
exit;
?> 
```

它在 FF 中运行良好，但在 Safari 中我得到一个 0kb 文件。

我想我发送的标题有问题。可能是什么错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T17:33:48.940

试试这个。

```
<?php
$file = $_GET['file'];
header('content-type: application/octet-stream');
header('content-Disposition: attachment; filename='.$file);
header('Pragma: no-cache');
header('Expires: 0');
readfile($file);
?> 
```

**当心：**在没有任何卫生或限制的情况下依赖`$_GET['file']`是非常危险的。可用于危害整个服务器应用程序！

# java - java锁定对象实例......这安全吗？

> ID：11722561
> 
> 赞同：2
> 
> 时间：2012-07-30T13:26:36.810
> 
> 标签：java, multithreading, synchronisation

我的问题是关于锁定 Java 中的对象实例。我有以下方法可以被多个线程同时调用。我选择锁定一个对象实例，因为我希望允许并发处理，只要一个实例一次只能由一个线程访问。

我的简化代码是这样的，我基本上锁定了一个局部变量。这真的能满足我的需要吗？我一直在阅读建议不要锁定可能会改变的对象，我突然不确定这是否是我正在做的事情！

谢谢！

编辑：

哦，天哪……我只是意识到我试图简化发布代码的尝试可能会有点误导。

我将之前调用“getInstance”的方法重命名为其他名称（“getFromMap”），以证明该方法调用是自定义代码，它返回对哈希图中对象的引用。

之前的答案还会成立吗？为混乱道歉！

```
public boolean processInput(...) {
if(message == 1) {
    Class_0 context = (Class_0)Class_0.getFromMap("xyz");
    synchronized(context) {
        context.setContextParams("abc");
       context.evaluateContextRules(message, this);
    }
} else if(message == 2) {
    Class_1 context = (Class_1)Class_1.getFromMap("efg");
    synchronized(context) {
        context.setContextParams("abc");
        context.evaluateContextRules(message, this);
    }
}
.....
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T13:30:26.787

对象类型的变量只是对对象的*引用*；锁定的是*对象*，而不是引用。当且仅当所有可能读取或写入相关数据的客户端都同意这样做时，这样的锁才有效，只有当持有同一对象的锁时。它是否是一个局部变量并不重要——重要的是每个人是否都在使用同一个对象作为锁。

在这里，您的物品似乎来自某种工厂；如果`getInstance(X)`总是为给定的*X*值返回相同的对象，那么你可能很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T13:28:42.280

假如说：

```
Class_1 context = (Class_1)TestForInternals_0.getInstance("efg"); 
```

只需检索对现有对象的引用而不创建新实例，然后该对象的监视器将被锁定并且您正在做的事情是有效的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T13:34:41.490

您的问题中没有足够的“上下文”（双关语不是有意的）来确定此代码是否完全是线程安全的。

但是，如果我们假设 1)`message`是一个局部变量，并且 2) 访问或更新上下文对象的所有内容在对象上同步时都会这样做，那么此片段中的代码是线程安全的。

* * *

> 我一直在阅读建议不要锁定可能会改变的对象，我突然不确定这是否是我正在做的事情！

你应该担心的是这样的：

```
public class Foo {
    // some state variables

    public Object lock = new Object();

    public void doSomething(...) {
        synchronized (lock) {
            ....
        }
    }
} 
```

这可能是不安全的。`lock`如果某些东西在正确的时间改变了 的值，并且同一`Foo`实例上的两个操作最终可能会使用不同的锁对象进行同步。这可能导致涉及`Foo`状态的操作无法正确同步。

在您的示例中，同步`context`似乎是针对上下文对象本身的操作，因此上述问题不适用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T13:54:44.930

据我了解，正在调用您的方法 processInput 并且您的同步块确保 context.evaluateContextRules(...) 仅在一个线程中运行。

如果这是您的目标，那么是的，您的代码就是这样做的。

其他人提到您必须确保锁定对象，而不是对对象的引用。好吧，正如它在您的代码中所看到的那样，您正在同步调用方法的同一个对象，所以这不应该是一个问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-30T13:33:51.233

只要您所做的修改`context`不影响`getInstance`方法返回的内容，您的代码就可以工作

# java - jsp response.redirect 导致 jquery.mobile 出现问题

> ID：11722563
> 
> 赞同：3
> 
> 时间：2012-07-30T13:26:41.860
> 
> 标签：java, jquery, jsp

我的应用程序是用 jsp 页面和 jquery.mobile 构建的。我使用 Java 函数来检查登录状态，并在这样的 Bean 中进行重定向时执行重定向：

```
public String getMenu(HttpSession session, HttpServletResponse response, MenuType menuType, CurrentPage currentPage)
{
    if (session.getAttribute("state") == LoginChecked.UNDEFINED))
    {
        response.sendRedirect("../index.jsp");

        return null;
    }
    else
    {
        ... 
```

问题是到 index.jsp 的重定向由 jquery.mobile 处理为页面内容的 ajax 重新加载，而不是完整的重定向。

如何强制完全重新加载 index.jsp 页面的浏览器？

- 添加 -

在 html 中，这将通过像这样的“rel”属性来解决，所以我需要某种方法来从我的 Java sendRedirect 中使用这个 rel：

```
<a href='../index.jsp' data-role='button' data-icon='plus' rel='external'> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T13:35:35.830

在**ajax**中你必须这样做：

```
success: function(data, textStatus) {
        if (data.redirect) {
            // data.redirect contains the string URL to redirect to
            window.location.href = data.redirect;
        }
} 
```

这会将您重定向到**服务器**指定的**网页**`data`

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T13:52:23.960

我最近正在考虑自己解决一个类似的问题（实际上是在重定向 AJAX 请求时进行重定向），并在这里找到了一个非常好的答案，我显然没有添加书签。但是，在为自己成功实施后，我将根据该答案分享我采取的方法。

第一阶段是识别 AJAX 请求，以便能够以不同于标准请求的方式处理它们。这可以通过检查`X-Requested-With`请求头的值来完成；的值`XMLHttpRequest`表示 AJAX 请求。在标准请求的情况下，我们照常进行重定向。在处理 AJAX 请求的情况下，而不是继续进行重定向，我所做的是设置一个响应标头以表示*将*发生重定向，并将其值设置为我要重定向到的 URL。

然后，我使用以下 jQuery 代码检查所有已完成的 AJAX 请求，并在适当时重定向：

```
$(document).bind('ajaxComplete', function(event, xhr, options) {
    var redirectHeader = xhr.getResponseHeader('YourHeader');
    if(xhr.readyState == 4 && redirectHeader != null) {
        window.location.href = redirectHeader;
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T13:29:50.360

从技术上讲，Ajax 调用不支持重定向（调用总是在调用者端结束）。您可能需要在客户端识别响应代码并进行客户端重定向，例如 window.location(href)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-06-06T18:01:49.383

我也有这样的问题，我找到了有效的解决方法，希望对你有帮助：

This has something to do with AJAX, and my solution is : add `data-ajax="false"` as an attribute of your `<form>`. Just like I did:

```
<form id="reg-input" action="/Myservlet" method="post" data-ajax="false">
    <!-- .. -->
</form> 
```

this will cause your ajax unavailable, take care.**

# asp.net-mvc-4 - Dapper 类与 dll？

> ID：11722564
> 
> 赞同：3
> 
> 时间：2012-07-30T13:26:51.367
> 
> 标签：asp.net-mvc-4, dapper

将 Dapper.cs 复制到我的项目中与使用 dll 而不是安装 nuget 包的优缺点是什么？

如果重要的话，这是一个 MVC4 项目。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T13:38:45.547

通过复制 Dapper.cs 文件，您可以直接编辑您自己的文件实例。这种方式可以让你最大程度地控制 Dapper 提供给你的功能，但你也冒着破坏它的风险。这种方式在设置一切正常工作时也可能容易出错。

安装 nuget 包和使用 dll 几乎是等价的。在这两种情况下，您都可以访问 Dapper.cs 提供的功能。这就是代码的使用方式。安装 nuget 包可能是您最好的选择，因为 .Net 会自动将所有内容放在应有的位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T18:42:27.803

我喜欢使用 Dapper.cs 进行调试。如果某些事情没有按预期工作，或者抛出错误，我可以很快找出原因。在未来的某个时候，当我对 Dapper 感觉更舒服时，我计划切换到使用 DLL 或 nuget 包。

此外，拥有源文件允许您对其进行自定义修改。

# c# - Enterprise Library 5 验证分配优先级

> ID：11722567
> 
> 赞同：0
> 
> 时间：2012-07-30T13:26:58.303
> 
> 标签：c#, .net, validation, enterprise-library

我正在使用 Enterprise Library 5 验证应用程序块来满足企业验证需求。我想知道，是否有任何方法可以使用数据注释为应用于字段的验证规则分配优先级。

# r - 大致相等的频率分箱

> ID：11722568
> 
> 赞同：1
> 
> 时间：2012-07-30T13:27:06.613
> 
> 标签：r, stat

我想以这样一种方式对频率进行分箱，使每个分箱包含大致相同的数量。到目前为止，我设法通过平均划分范围来划分频率，但我还没有找到一种自动计算 bin 大小的方法。

数据：

```
> dput(sumsq)
structure(list(difftim = c(-170L, -17L, 71L, -487L, -301L, -107L, 
-202L, -71L, 404L, 99L, -252L, -18L, 253L, -505L, 421L, 597L, 
-454L, 420L, 66L, -202L, 84L, -657L, 0L, -253L, -35L, 21L, -101L, 
-152L, -33L, 150L, -253L, -185L, -137L, -100L, -370L, -67L, -218L, 
-68L, -71L, 1332L, -151L, -67L, 438L, 34L, 201L, -35L, -83L, 
-17L, 269L, -380L, -336L, -125L, 67L, -59L, 170L, 130L, 486L, 
-118L, -16L, -33L, -73L, -50L, -404L, 302L, -51L, 302L, 17L, 
-17L, 18L, -28L, 388L, 337L, 405L, -34L, -152L, 386L, 152L, 119L, 
51L, -17L, 138L, 269L, 219L, 17L, -50L, 302L, 137L, 101L, 49L, 
33L, 152L, -34L, 1186L, -33L, 57L, 69L, -338L, 251L, -18L, 67L, 
-54L, -437L, 134L, -336L, 322L, -118L, 17L, -824L, 118L, 438L, 
1L, 84L, 135L, 52L, -118L, 50L, 87L, -185L, 90L, 73L, -136L, 
16L, -37L, -135L, -117L, 235L, 303L, -286L, 286L, 50L, -521L, 
151L, 420L, -87L, -184L, -67L, -168L, -33L, -135L, -118L, 1379L, 
256L, -34L, -84L, -17L, 135L, 254L, 811L, 168L, 403L, -443L, 
-253L, 152L, -185L, -16L, 601L, -825L, -220L, -51L, -219L, 488L, 
-51L, 19L, -365L, -249L, 274L, -503L, 37L, 14L, -84L, -320L, 
-201L, 118L, 85L, -270L, -121L, 152L, -25L, 17L, -18L, -203L, 
-33L, -236L, -371L, 252L, -438L, 219L, 1852L, 3082L, 1026L, -51L, 
201L, 371L, 140L, 50L, -499L, 433L, -350L, 57L, -472L, 17L, 185L, 
-51L, -118L, 174L, -49L, 185L, -118L, -185L, -337L, -121L, 166L, 
-50L, -83L, 250L, 83L, -149L, 83L, -555L, -51L, -100L, -102L, 
148L, 116L, 382L, -100L, -174L, 84L, 657L, -232L, -17L, -100L, 
-68L, -34L, 135L, 84L, 236L, 153L, -252L, 0L, -169L, 51L, 168L, 
163L, 135L, -51L, -303L, -202L, 33L, 101L, -219L, -34L, 51L, 
168L, 179L, 404L, 135L, 67L, -233L, 371L, -202L, -112L, -319L, 
16L, 115L, -220L, -370L, 682L, -236L, 504L, 8L, -151L, 34L, -45L, 
-283L, -69L, 167L, -82L, -102L, -51L, -202L, 534L, -17L, 39L, 
55L, 79L, 55L, -35L, -902L, -124L, -1L, -101L, 25L, 214L, 459L, 
-367L, -186L, -104L, 50L, 261L, -474L, -168L, 16L, 17L, -209L, 
-556L, -236L, -17L, -235L, -67L, -17L, -49L, 504L, -319L, 1702L, 
286L, 538L, 657L, 66L, -50L, 269L, 151L, -434L, -404L, -725L, 
68L, -572L, -86L, -455L, -236L, -421L, -152L, -370L, 135L, 118L, 
-169L, -269L, -286L, -118L, -539L, -68L, -20L, -121L, 785L, -169L, 
400L, -253L, -1L, 0L, 84L, -126L, -151L, -50L, -101L, -151L, 
-163L, -50L, 0L, -100L, -169L, 497L, -34L, 170L, 154L, -505L, 
-338L, -330L, 67L, 306L, -51L, -16L, -17L, 118L, -270L, -168L, 
-85L, 977L, 1127L, 34L, -166L, -489L, 0L, -404L, -84L, -455L, 
286L, -51L, -403L, 454L, -387L, 371L, -50L, -202L, -219L, -34L, 
84L, -303L, 28L, 33L, -10L, -370L, 35L, -151L, 59L, 214L, -101L, 
0L, 185L, 252L, 67L, -67L, 362L, -50L, 151L, -16L, -151L, -150L, 
50L, -1227L, -320L, -112L, -60L, 85L, 135L, 99L, 20L, -807L, 
-50L, 925L, 1177L, -15L, -67L, 2606L, 17L, 539L, 34L, -34L, 34L, 
606L, 101L, -85L, -50L, 17L, 444L, -199L, 142L, -17L, -16L, -504L, 
134L, -617L, 235L, 202L, -101L, -554L, -17L, -303L, 17L, -118L, 
-185L, 0L, -67L, -50L, -118L, 590L, -537L, -80L, -119L, -286L, 
354L, -488L, -235L, -336L, -101L, -185L, 169L, -370L, 218L, -101L, 
16L, 336L, 0L, 387L, 168L, 219L, 118L, 202L, 236L, -185L, -134L, 
-874L, -50L, 118L, 17L, 218L, -67L, 51L, -101L, 34L, 34L, -100L, 
16L, 67L, 0L, 0L, -152L, 151L, 51L, 67L, -185L, -337L, 68L, 118L, 
84L, 101L, -167L, -404L, 403L, -387L, -127L, 202L, -214L, 84L, 
-1L, 33L, 269L, 0L, 112L, 101L, -33L, 50L, -219L, 17L, 17L, -253L, 
252L, 51L, 51L, 252L, -17L, -134L, 153L, 135L, 151L, 40L, 294L, 
-67L, -61L, -118L, 38L, 0L, -50L, 152L, -218L, -168L, 67L, -67L, 
68L, 39L, -1L, 134L, -168L, -135L, 17L, -82L, -17L, 16L, 135L, 
51L, 134L, -101L, 101L, 152L, 16L, 118L, 100L, 202L, 218L, -168L, 
269L, -118L, 201L, -403L, -420L, 0L, 0L, -370L, -201L, 67L, 319L, 
320L, -67L, -335L, 285L, 269L, 151L, 185L, -204L, -403L, -84L, 
-111L, 1L, 369L, -67L, -50L, 150L, 0L, 319L, -168L, 16L, -117L, 
-39L, -67L, -202L, 249L, -101L, -331L, -49L, -67L, 285L, -168L, 
85L, -17L, 118L, 115L, -102L, -84L, 184L, 33L, -151L, -269L, 
-118L, -150L, -50L, 67L, -17L, 180L, -5L, -135L, 154L, -51L, 
73L, -117L, -123L, -82L, -83L, 959L, -168L, -19L, 134L, -100L, 
-135L, -252L, -16L, 202L, -36L, -18L, -39L, -172L, -84L, -286L, 
135L, 32L, -138L, -1429L, -84L, 117L, 51L, 134L, -134L, -134L, 
151L, -34L, 0L, 689L, 386L, 134L, 117L, -100L, -17L, -69L, -34L, 
118L, 50L, -117L, 286L, 68L, 95L, 98L, 204L, -16L, 17L, -168L, 
-135L, 151L, -68L, 200L, 169L, 100L, 375L, -152L, -33L, 1L, 17L, 
50L, 0L, -17L, 16L, -119L, 202L, 66L, -17L, 0L, 134L, 33L, 14L, 
252L, 67L, 84L, -122L, -84L, -68L, 12L, -1397L, 51L, -101L, -68L, 
-17L, 186L, 118L, 33L, 85L, -18L, 16L, 98L, 135L, 0L, -17L, 340L, 
-35L, -34L, -34L, 336L, 85L, 101L, -98L, -1L, 251L, 101L, 151L, 
-519L, -201L, -68L, -319L, -169L, -421L, -269L, -342L, 236L, 
-543L, -1785L, -87L, 100L, 304L, 118L, 0L, -16L, 639L, 101L, 
67L, -160L, 276L, 135L, -51L, 85L, 15L, -219L, -336L, 926L, 236L, 
-320L, 200L, -33L, -50L, -611L, -353L, -67L, -17L, -160L, 17L, 
-269L, -286L, -151L, 135L, 183L, -387L, -101L, -169L, -219L, 
17L, -137L, -33L, -101L, -80L, 269L, -17L, 252L, -67L, -66L, 
118L, -324L, -100L, -135L, 235L, -17L, 68L, -488L, 387L, 205L, 
-117L, -455L, 0L, 455L, -125L, -370L, -34L, 185L, -34L, -1L, 
-101L, -123L, -729L, 504L, 0L, 123L, 352L, 218L, 134L, 588L, 
537L, -68L, 202L, 135L, 101L, -285L, 23L, -201L, 363L, 65L, 202L, 
-211L, 34L, 0L, -134L, -219L, 17L, 420L, 50L, -1L, 319L, -48L, 
151L, 17L, 152L, 945L, 46L, -33L, 232L, 16L, 15L, -304L, -168L, 
151L, -55L, 51L, 0L, 33L, 50L, -183L, 806L, -422L, -185L, -102L, 
-151L, 66L, -148L, 353L, -337L, -14L, 67L, -185L, -17L, -118L, 
-134L, 134L, 18L, -168L, 6L, 588L, 235L, -232L, 253L, 67L, -51L, 
-151L, -118L, -135L, 212L, -131L, -135L, -18L, 102L, 56L, -100L, 
84L, 84L, 150L, 50L, 17L, -35L, 136L, 34L, -147L, -35L, 51L, 
-51L, 0L, -118L, 16L, -118L, -67L, -67L, -123L, -84L, 168L, -17L, 
-353L, 51L, -84L, 17L, -101L, -17L, 202L, -220L, -1L, -159L, 
304L, -792L, -219L, 92L, -185L, 31L, -252L, 572L, -421L, 33L, 
1128L, -270L, 0L, 235L, -639L, -54L, 135L, 34L, 236L, -152L, 
124L, 33L, -17L, -67L, 202L, 723L, -34L, 82L, 201L, 1L, -169L, 
110L, -348L, -11L, 606L, -17L, -394L, -118L, 673L, 35L, 51L, 
-842L, 118L, 68L, -13L, -33L, 84L, -67L, -320L, 17L, 168L, -16L, 
84L, -268L, -201L, -487L, -68L, 17L, -34L, 336L, -56L, 67L, 101L, 
1L, 0L, -101L, 68L, -16L, 16L, -101L, 67L, 33L, 0L, 34L, 51L, 
-18L, 52L, 353L, -153L, 117L, -17L, 605L, 252L, 219L, 438L, -31L, 
-219L, -101L, 135L, 34L, 51L, 34L, 1497L, -487L, -85L, -137L, 
-67L, -135L, -51L, 202L, 51L, -1110L, -67L, -1043L, -308L, -185L, 
135L, -202L, -354L, -253L, 84L, -185L, -50L, -354L, 0L, -33L, 
7L, -252L, -134L, -284L, 34L, -219L, -219L, -303L, -287L, -135L, 
102L, -35L, 860L, -34L, 118L, 68L, -61L, -264L, -168L, 47L, 236L, 
-287L, -103L, 17L, -95L, -607L, 438L, -388L, 17L, -287L, -68L, 
-253L, 34L, -113L, -101L, 168L, 1885L, 168L, 708L, 135L, 387L, 
118L, 556L, 219L, 68L, 51L, 68L, 202L, -370L, -572L, 487L, 0L, 
-253L, 405L, 118L, -269L, 741L, -185L, -152L, -84L, -167L, 169L, 
102L, 573L, -151L, 235L, 820L, 169L, -186L, 539L, -58L, 4L, 100L, 
101L, -573L, -118L, -17L, -34L, -252L, 84L, 1L, 101L, -286L, 
269L, 270L, 370L, -168L, 152L, -83L, 34L, -50L, -84L, -51L, 84L, 
118L, 51L, 253L, 67L, -117L, 87L, 52L, -319L, -1L, 51L, 149L, 
68L, 219L, 589L, -67L, -219L, 689L, 17L, -17L, -219L, -202L, 
555L, 806L, -151L, 353L, 673L, -252L, 151L, 438L, 403L, 50L, 
-235L, -252L, 84L, -235L, -336L, 182L, 1059L, 84L, -505L, 169L, 
134L, -168L, 404L), ratperc = c(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -8, 0.8, 0.8, 0.8, 0.8, 0.8, 
0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 
0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 
0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 
0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 
0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 
0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 
0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 
0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 
0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 
0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0, 0, 0, 0, 0, 0, 75.6, 0, 89.6, 
24.8, -100, -100, 75.6, 100, 100, -100, -100, -100, -100, -100, 
-100, 75.6, 98.4, 98.4, -51.2, -51.2, 0.8, 0.8, 0.4, 0.4, 0.4, 
0.4, 75.2, -100, -100, -100, 1.2, -0.4, -0.4, -0.4, -0.4, 100, 
100, -1.6, 0, 0, 0, 0, -100, 0.4, 100, 0.4, 0.4, 100, -0.4, -78.4, 
0.4, 100, 100, 100, 100, -100, 23.6, 61.2, 61.2, 69.2, 75.6, 
75.6, 75.6, 75.6, 75.6, 98, 98, 98, -75.2, -75.2, 47.2, 47.2, 
47.2, 47.2, 76.8, 97.6, -71.6, -71.6, -71.6, -71.6, 24, 52, 52, 
52, 75.2, 75.2, -77.6, 25.2, 47.2, 76.4, 76.4, 76.4, 76.4, 76.4, 
76.4, 76.4, 76.4, 76.4, 76.4, 76.4, 76.4, 76.4, 76.4, -73.2, 
-73.2, -73.2, -73.2, 0.8, 0.8, 75.2, 75.2, 75.2, 75.2, 75.2, 
75.2, 0.4, 0.4, 0.4, 0.4, 0.4, -100, -100, -100, -100, -100, 
73.2, 2, -0.8, -0.8, -0.8, -100, -0.4, -0.4, 50.4, 50.4, 50.4, 
50.4, 50.4, 50.4, -76.4, 99.6, 99.6, -76.4, 100, 100, 50.4, 1.2, 
28, -1.2, 93.6, 41.2, 1.6, 24.8, -1.6, 0, 0, 24.8, -24, 26, 50.8, 
2, 28, 36.4, 24, -43.6, 33.6, 61.2, 81.2, 86.8, 34, -51.6, -2, 
28.4, 2, 82, 41.6, 25.6, 82, 0.8, 92, 1.2, 86.4, 54, 96, 0.4, 
-54.4, 1.2, -93.2, -49.2, -98.4, -2, -77.2, 93.2, 23.6, 78.8, 
42.4, 0.4, 2.8, 70.8, 24.4, 2.4, 62, 92.8, 16.4, -61.2, 24.4, 
-77.2, -0.4, 74.8, 3.6, 82, 82, 18, 54, 9.2, 55.2, 96.4, 96.4, 
90, 90, -84.4, -84.4, -2.8, -2, -90.4, 2.4, 34.8, 24, -1.6, -16.8, 
2.8, 2.4, -83.2, 22.4, 22.4, -1.6, -1.6, 60, -2.4, 2.4, 2, 0.8, 
-22.8, 2, -1.6, 25.2, 2, 2, -52.8, -1.2, -1.2, 3.2, -74.4, 3.2, 
3.2, -78.4, 0.4, -2.4, 0.4, 0.4, 0.4, 0.4, 0.4, 0.4, -79.2, -0.8, 
-0.8, -0.8, -0.8, -0.8, -3.2, 41.2, -0.8, -0.8, -0.8, -0.8, -83.2, 
-1.6, -1.6, 0.4, 0.4, 0.4, -90, -1.6, -1.6, -1.6, -1.6, -1.6, 
-1.6, -1.6, -1.6, -1.6, -1.6, -1.6, 77.6, -79.6, 80.8, -81.6, 
-93.2, -100, 8.4, 75.6, 82.8, 67.2, -27.2, 78.8, 65.6, 84.8, 
73.6, 46.8, -62.4, 57.2, 74, 13.6, -0.8, 32.8, -27.2, 6.4, -67.2, 
79.2, -64, 58, -40.4, 64, 8, 60, 76.8, -24.8, -52.4, 56.8, 75.6, 
38.4, -50.4, -72.8, -83.6, 24, 34.8, 54.4, -54, 67.6, 78.4, -41.6, 
-64.4, -83.6, -93.6, 76.8, -2.4, -19.2, -54, -38, 5.2, 52.4, 
64.8, 42.4, 77.6, -46.4, -74.8, -60.4, -83.2, -56.4, -34.8, -16.8, 
21.2, 40, 59.2, 0.4, -17.6, 24.4, -14.4, 35.2, -26.8, 42, 44, 
-1.2, -35.6, 10.8, -19.6, -35.2, 22.4, -18.4, 27.6, -9.6, 43.2, 
-31.2, 45.2, 23.6, -16.4, 28.8, 40.4, 25.6, -8, 15.6, 11.2, -17.2, 
15.6, -17.6, 18, 24, -9.6, -34.8, 12.4, -17.2, 36.4, -9.2, -35.2, 
-19.6, 10.4, -15.6, -30.4, 30.8, 16.4, -14.8, -26.4, -34.4, 52.8, 
34.4, 55.6, 21.2, 41.2, 52, 36.8, 50, 15.6, 36, 53.6, -22.8, 
14.8, 25.2, -13.2, -18.8, 32, 20.8, -6.8, -16.4, -27.6, 14.4, 
26.8, 38, -28.4, 19.6, -23.6, 18.4, -19.6, 11.6, 0, 0, 0, -26, 
-52.4, -24.4, 2, 19.6, -10.8, 3.6, 3.6, -25.2, 28.4, 12, -11.2, 
3.2, 37.2, 26, 0.8, 47.6, -17.2, 2.4, -12, -52.4, 0.8, 28.4, 
-12, 36.4, 2.4, 50.4, -16, 24.4, -2.4, -2.4, 15.2, -1.6, -1.6, 
-1.6, 24.4, -36, 33.2, 1.2, 1.2, -48.8, -22.4, -1.2, -100, -1.6, 
-1.6, -26.4, 28, -47.6, 86, -1.6, -1.6, -1.6, -1.6, -1.6, 41.6, 
-16, 29.6, -14.8, 3.2, 3.2, 100, 0.8, 0.8, 0.8, 0.8, 25.6, 24.8, 
-28, 0.8, -39.2, -97.6, -97.6, -50, 0, 0, 49.6, 0.8, 54, 25.6, 
-1.2, -1.2, -90.8, 4.4, 4.4, 41.6, -40.8, -6, -6, 51.6, -8.4, 
0, 0, 0, -60, 2.8, -52.4, 1.6, 1.6, 1.6, 18.8, 24.4, -0.4, -0.4, 
-0.4, -0.4, -51.6, -0.4, -0.4, -0.4, 26, 0, 18, -42.4, -1.6, 
-0.4, 60.4, -2.8, -2.8, -2.8, 76, 2.8, 2.8, -29.2, -23.2, 23.6, 
-26.8, 0.4, 0.4, -40.8, -3.6, -47.6, 27.6, -2.4, -2.4, -76, -2, 
-2, -2, -30.8, 26.8, -4.4, -4.4, -4.4, 3.6, -0.8, -0.8, 67.2, 
-1.2, -48.8, 63.2, -42, 50, 30.8, 57.6, -48.8, -48.8, 41.6, -39.2, 
-39.2, -35.6, 40, -44, -39.6, -39.6, -50.8, 0, -48.8, 40, -53.2, 
52, -47.2, -47.2, -46, 26.4, -29.2, 0, -46.8, -46.8, 34.8, -43.6, 
0, 39.2, 0.4, -48.4, 0, -23.6, 29.2, 29.2, -53.2, -53.2, 19.2, 
46.4, 46.4, -2, 36, 2, -25.2, -50, -1.6, -2, 35.2, -32.8, 31.2, 
-43.2, 46, -28.8, -0.4, -50.4, 0.8, -43.6, 0.4, 27.6, -37.6, 
-37.6, 37.6, -50, 40.8, -0.8, -50.4, -49.6, 45.6, 45.6, -48.8, 
-0.8, -54, -54, 43.2, -48.8, 46.4, -42.8, 54, -54.4, 34.8, 0.4, 
0.4, 0.4, 0.8, -50.4, -50.8, -50.8, 51.6, -68.8, 0.8, 52, -42, 
-42, 0, -56.8, -56.8, 0.8, -48, -46.4, -46.8, -46.8, 0.4, 0.4, 
37.2, -36.8, -36.8, -0.4, -0.4, -0.4, -0.4, -0.4, -48.8, 0.8, 
0.8, 58.8, 2, 2, 2, 2, 29.2, -50.4, 49.6, 41.2, -39.2, 38.8, 
-38.8, 28, -38, 40.8, 0.8, 0.8, 0.8, 0.8, 0.8, -51.2, 27.2, -54.8, 
0.8, 0.8, -40.4, -40.4, 0, -46.8, 35.2, -50.4, 9.6, -0.4, -15.2, 
17.6, -26.8, -14.4, 42.8, 18.8, 2.8, 0, -33.2, -36.4, -7.6, 18.8, 
34.4, 8.8, -25.6, -16.8, -10, -50.8, 10, -11.2, -7.2, -15.2, 
-62.8, 27.6, -12.8, -1.2, -24.4, 18.8, -7.2, 37.2, 8.4, -40, 
-9.6, 20, -27.2, 27.2, 7.2, -31.6, -31.6, 27.6, -1.6, -20, -20, 
34.4, 18, -23.6, 28.4, -16, 15.2, -30.4, -9.2, -7.6, 12.4, 23.2, 
15.6, 23.2, 37.2, -8.8, -21.6, -31.6, -23.2, 25.2, 33.2, 9.2, 
34.4, 18, 5.2, -50.4, 34.8, 12.4, -13.6, -7.2, 6.4, 15.2, 2, 
12.8, -14.4, 32.4, 15.6, 23.2, 30, -11.6, -34.8, 12, -24, -11.2, 
-41.2, 34.4, 18.8, 18.8, 12, 37.6, 10, 35.2, -24.4, 24.8, 40.4, 
52.4, 14, -41.6, 34, 43.2, -6, -28, 24, 35.2, 26.8, -15.2, 28, 
38.8, 11.6, 57.6, 28, 12, -18.8, 35.6, 25.2, 40.4, 59.2, -58.4, 
10.4, -23.6, 18, -14, 35.2, 13.6, 48.4, 32.8, 32.8, -17.2, -11.2, 
26, -24, 15.2, -66.4, 24.4, -30.4, 39.6, 30, 53.2, 59.6, -40.4, 
-14, 36, 36, 41.6, 32, 57.6, 8.4, 62, 85.6, 85.6, 84.4, 38, 63.2, 
67.2, -42.8, 63.6, 95.2, 65.2, 86.8, 87.2, 9.2, 83.2, 11.6, 83.2, 
83.2, 79.6, 63.2, 88.8, -62, -84.8, -84.8, -86.8, -4.4, 87.2, 
86, 17.2, 81.6, -60.8, -87.6, 80, 37.2, -64.8, 86.4, 87.2, 94.4, 
94, -61.6, 86.8, 86.4, 86.8, 86, -86, 94.4, -87.6, 80, 84.8, 
86.8, -64.8, 85.2, 83.2, -90.8, 88.8, 85.6, 85.2, 87.2, 85.2, 
85.6, -64, 84.8, 84.4, -90, 84.8, 82, -83.6, 88.4, 92, 80.8, 
79.6, 80.4, 78.4, 78.4, 80, 80, 79.2, 81.2, 84.8, -78.4, 80.8, 
-88.8, 81.6, 81.6, -64.8, -85.6, 89.2, 90.4, -84, 85.2, -32.8, 
49.6, 83.2, 81.2, 79.2, 80, 85.6, 81.6, 34.4, -85.6, 83.6, 82.4, 
84, 81.2, 85.6, 85.6, 87.6, 84.8, 85.6, 82.8, -86.4, -60, 36.8, 
-85.6, 86.4, -65.6, 81.6, -81.2, 92.8, -86.4, 84.8, 63.2, 36, 
86.4, 86.4, 82.4, 83.2, 82.8, 82.4, 80.8, 80.4, 80.4, -63.6, 
84.8, 84.8, 68, 93.2, 88, 89.6, 33.6, 83.6, -67.2, 88.8, 88, 
85.2, -39.6, 84.8)), .Names = c("difftim", "ratperc"), row.names = c(1L, 
2L, 3L, 4L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 12L, 13L, 14L, 15L, 
16L, 17L, 18L, 19L, 20L, 21L, 22L, 23L, 24L, 25L, 26L, 27L, 28L, 
29L, 30L, 31L, 32L, 33L, 34L, 35L, 36L, 37L, 38L, 39L, 40L, 41L, 
42L, 43L, 44L, 45L, 46L, 47L, 48L, 49L, 50L, 51L, 52L, 53L, 54L, 
55L, 56L, 57L, 58L, 59L, 60L, 61L, 62L, 63L, 64L, 65L, 66L, 67L, 
68L, 69L, 70L, 71L, 72L, 73L, 74L, 75L, 76L, 77L, 78L, 79L, 80L, 
81L, 82L, 83L, 84L, 85L, 86L, 87L, 88L, 89L, 90L, 91L, 92L, 93L, 
94L, 95L, 96L, 97L, 98L, 99L, 100L, 101L, 102L, 103L, 104L, 105L, 
106L, 107L, 108L, 109L, 110L, 111L, 112L, 113L, 114L, 115L, 116L, 
117L, 118L, 119L, 120L, 121L, 122L, 123L, 124L, 125L, 126L, 127L, 
128L, 129L, 130L, 131L, 132L, 133L, 134L, 135L, 136L, 137L, 138L, 
139L, 140L, 141L, 142L, 143L, 144L, 145L, 146L, 147L, 148L, 149L, 
150L, 301L, 302L, 303L, 304L, 305L, 306L, 307L, 308L, 309L, 310L, 
311L, 312L, 313L, 314L, 315L, 316L, 317L, 318L, 319L, 320L, 321L, 
322L, 323L, 324L, 325L, 326L, 327L, 328L, 329L, 330L, 331L, 332L, 
333L, 334L, 335L, 336L, 337L, 338L, 339L, 340L, 341L, 342L, 343L, 
344L, 345L, 346L, 347L, 348L, 349L, 350L, 351L, 352L, 353L, 354L, 
355L, 356L, 357L, 358L, 359L, 360L, 361L, 362L, 363L, 364L, 365L, 
366L, 367L, 368L, 369L, 370L, 371L, 372L, 373L, 374L, 375L, 376L, 
377L, 378L, 379L, 380L, 381L, 382L, 383L, 384L, 385L, 386L, 387L, 
388L, 389L, 390L, 391L, 392L, 393L, 394L, 395L, 396L, 397L, 398L, 
399L, 400L, 401L, 402L, 403L, 404L, 405L, 406L, 407L, 408L, 409L, 
410L, 411L, 412L, 413L, 414L, 415L, 416L, 417L, 418L, 419L, 420L, 
421L, 422L, 423L, 424L, 425L, 426L, 427L, 428L, 429L, 430L, 431L, 
432L, 433L, 434L, 435L, 436L, 437L, 438L, 439L, 440L, 441L, 442L, 
443L, 444L, 445L, 446L, 447L, 448L, 449L, 450L, 601L, 602L, 603L, 
604L, 605L, 606L, 607L, 608L, 609L, 610L, 611L, 612L, 613L, 614L, 
615L, 616L, 617L, 618L, 619L, 620L, 621L, 622L, 623L, 624L, 625L, 
626L, 627L, 628L, 629L, 630L, 631L, 632L, 633L, 634L, 635L, 636L, 
637L, 638L, 639L, 640L, 641L, 642L, 643L, 644L, 645L, 646L, 647L, 
648L, 649L, 650L, 651L, 652L, 653L, 654L, 655L, 656L, 657L, 658L, 
659L, 660L, 661L, 662L, 663L, 664L, 665L, 666L, 667L, 668L, 669L, 
670L, 671L, 672L, 673L, 674L, 675L, 676L, 677L, 678L, 679L, 680L, 
681L, 682L, 683L, 684L, 685L, 686L, 687L, 688L, 689L, 690L, 691L, 
692L, 693L, 694L, 695L, 696L, 697L, 698L, 699L, 700L, 701L, 702L, 
703L, 704L, 705L, 706L, 707L, 708L, 709L, 710L, 711L, 712L, 713L, 
714L, 715L, 716L, 717L, 718L, 719L, 720L, 721L, 722L, 723L, 724L, 
725L, 726L, 727L, 728L, 729L, 730L, 731L, 732L, 733L, 734L, 735L, 
736L, 737L, 738L, 739L, 740L, 741L, 742L, 743L, 744L, 745L, 746L, 
747L, 748L, 749L, 750L, 901L, 902L, 903L, 904L, 905L, 906L, 907L, 
908L, 909L, 910L, 911L, 912L, 913L, 914L, 915L, 916L, 917L, 918L, 
919L, 920L, 921L, 922L, 923L, 924L, 925L, 926L, 927L, 928L, 929L, 
930L, 931L, 932L, 933L, 934L, 935L, 936L, 937L, 938L, 939L, 940L, 
941L, 942L, 943L, 944L, 945L, 946L, 947L, 948L, 949L, 950L, 951L, 
952L, 953L, 954L, 955L, 956L, 957L, 958L, 959L, 960L, 961L, 962L, 
963L, 964L, 965L, 966L, 967L, 968L, 969L, 970L, 971L, 972L, 973L, 
974L, 975L, 976L, 977L, 978L, 979L, 980L, 981L, 982L, 983L, 984L, 
985L, 986L, 987L, 988L, 989L, 990L, 991L, 992L, 993L, 994L, 995L, 
996L, 997L, 998L, 999L, 1000L, 1001L, 1002L, 1003L, 1004L, 1005L, 
1006L, 1007L, 1008L, 1009L, 1010L, 1011L, 1012L, 1013L, 1014L, 
1015L, 1016L, 1017L, 1018L, 1019L, 1020L, 1021L, 1022L, 1023L, 
1024L, 1025L, 1026L, 1027L, 1028L, 1029L, 1030L, 1031L, 1032L, 
1033L, 1034L, 1035L, 1036L, 1037L, 1038L, 1039L, 1040L, 1041L, 
1042L, 1043L, 1044L, 1045L, 1046L, 1047L, 1048L, 1049L, 1050L, 
1201L, 1202L, 1203L, 1204L, 1205L, 1206L, 1207L, 1208L, 1209L, 
1210L, 1211L, 1212L, 1213L, 1214L, 1215L, 1216L, 1217L, 1218L, 
1219L, 1220L, 1221L, 1222L, 1223L, 1224L, 1225L, 1226L, 1227L, 
1228L, 1229L, 1230L, 1231L, 1232L, 1233L, 1234L, 1235L, 1236L, 
1237L, 1238L, 1239L, 1240L, 1241L, 1242L, 1243L, 1244L, 1245L, 
1246L, 1247L, 1248L, 1249L, 1250L, 1251L, 1252L, 1253L, 1254L, 
1255L, 1256L, 1257L, 1258L, 1259L, 1260L, 1261L, 1262L, 1263L, 
1264L, 1265L, 1266L, 1267L, 1268L, 1269L, 1270L, 1271L, 1272L, 
1273L, 1274L, 1275L, 1276L, 1277L, 1278L, 1279L, 1280L, 1281L, 
1282L, 1283L, 1284L, 1285L, 1286L, 1287L, 1288L, 1289L, 1290L, 
1291L, 1292L, 1293L, 1294L, 1295L, 1296L, 1297L, 1298L, 1299L, 
1300L, 1301L, 1302L, 1303L, 1304L, 1305L, 1306L, 1307L, 1308L, 
1309L, 1310L, 1311L, 1312L, 1313L, 1314L, 1315L, 1316L, 1317L, 
1318L, 1319L, 1320L, 1321L, 1322L, 1323L, 1324L, 1325L, 1326L, 
1327L, 1328L, 1329L, 1330L, 1331L, 1332L, 1333L, 1334L, 1335L, 
1336L, 1337L, 1338L, 1339L, 1340L, 1341L, 1342L, 1343L, 1344L, 
1345L, 1346L, 1347L, 1348L, 1349L, 1350L, 1501L, 1502L, 1503L, 
1504L, 1505L, 1506L, 1507L, 1508L, 1509L, 1510L, 1511L, 1512L, 
1513L, 1514L, 1515L, 1516L, 1517L, 1518L, 1519L, 1520L, 1521L, 
1522L, 1523L, 1524L, 1525L, 1526L, 1527L, 1528L, 1529L, 1530L, 
1531L, 1532L, 1533L, 1534L, 1535L, 1536L, 1537L, 1538L, 1539L, 
1540L, 1541L, 1542L, 1543L, 1544L, 1545L, 1546L, 1547L, 1548L, 
1549L, 1550L, 1551L, 1552L, 1553L, 1554L, 1555L, 1556L, 1557L, 
1558L, 1559L, 1560L, 1561L, 1562L, 1563L, 1564L, 1565L, 1566L, 
1567L, 1568L, 1569L, 1570L, 1571L, 1572L, 1573L, 1574L, 1575L, 
1576L, 1577L, 1578L, 1579L, 1580L, 1581L, 1582L, 1583L, 1584L, 
1585L, 1586L, 1587L, 1588L, 1589L, 1590L, 1591L, 1592L, 1593L, 
1594L, 1595L, 1596L, 1597L, 1598L, 1599L, 1600L, 1601L, 1602L, 
1603L, 1604L, 1605L, 1606L, 1607L, 1608L, 1609L, 1610L, 1611L, 
1612L, 1613L, 1614L, 1615L, 1616L, 1617L, 1618L, 1619L, 1620L, 
1621L, 1622L, 1623L, 1624L, 1625L, 1626L, 1627L, 1628L, 1629L, 
1630L, 1631L, 1632L, 1633L, 1634L, 1635L, 1636L, 1637L, 1638L, 
1639L, 1640L, 1641L, 1642L, 1643L, 1644L, 1645L, 1646L, 1647L, 
1648L, 1649L, 1650L, 1801L, 1802L, 1803L, 1804L, 1805L, 1806L, 
1807L, 1808L, 1809L, 1810L, 1811L, 1812L, 1813L, 1814L, 1815L, 
1816L, 1817L, 1818L, 1819L, 1820L, 1821L, 1822L, 1823L, 1824L, 
1825L, 1826L, 1827L, 1828L, 1829L, 1830L, 1831L, 1832L, 1833L, 
1834L, 1835L, 1836L, 1837L, 1838L, 1839L, 1840L, 1841L, 1842L, 
1843L, 1844L, 1845L, 1846L, 1847L, 1848L, 1849L, 1850L, 1851L, 
1852L, 1853L, 1854L, 1855L, 1856L, 1857L, 1858L, 1859L, 1860L, 
1861L, 1862L, 1863L, 1864L, 1865L, 1866L, 1867L, 1868L, 1869L, 
1870L, 1871L, 1872L, 1873L, 1874L, 1875L, 1876L, 1877L, 1878L, 
1879L, 1880L, 1881L, 1882L, 1883L, 1884L, 1885L, 1886L, 1887L, 
1888L, 1889L, 1890L, 1891L, 1892L, 1893L, 1894L, 1895L, 1896L, 
1897L, 1898L, 1899L, 1900L, 1901L, 1902L, 1903L, 1904L, 1905L, 
1906L, 1907L, 1908L, 1909L, 1910L, 1911L, 1912L, 1913L, 1914L, 
1915L, 1916L, 1917L, 1918L, 1919L, 1920L, 1921L, 1922L, 1923L, 
1924L, 1925L, 1926L, 1927L, 1928L, 1929L, 1930L, 1931L, 1932L, 
1933L, 1934L, 1935L, 1936L, 1937L, 1938L, 1939L, 1940L, 1941L, 
1942L, 1943L, 1944L, 1945L, 1946L, 1947L, 1948L, 1949L, 1950L, 
2101L, 2102L, 2103L, 2104L, 2105L, 2106L, 2107L, 2108L, 2109L, 
2110L, 2111L, 2112L, 2113L, 2114L, 2115L, 2116L, 2117L, 2118L, 
2119L, 2120L, 2121L, 2122L, 2123L, 2124L, 2125L, 2126L, 2127L, 
2128L, 2129L, 2130L, 2131L, 2132L, 2133L, 2134L, 2135L, 2136L, 
2137L, 2138L, 2139L, 2140L, 2141L, 2142L, 2143L, 2144L, 2145L, 
2146L, 2147L, 2148L, 2149L, 2150L, 2151L, 2152L, 2153L, 2154L, 
2155L, 2156L, 2157L, 2158L, 2159L, 2160L, 2161L, 2162L, 2163L, 
2164L, 2165L, 2166L, 2167L, 2168L, 2169L, 2170L, 2171L, 2172L, 
2173L, 2174L, 2175L, 2176L, 2177L, 2178L, 2179L, 2180L, 2181L, 
2182L, 2183L, 2184L, 2185L, 2186L, 2187L, 2188L, 2189L, 2190L, 
2191L, 2192L, 2193L, 2194L, 2195L, 2196L, 2197L, 2198L, 2199L, 
2200L, 2201L, 2202L, 2203L, 2204L, 2205L, 2206L, 2207L, 2208L, 
2209L, 2210L, 2211L, 2212L, 2213L, 2214L, 2215L, 2216L, 2217L, 
2218L, 2219L, 2220L, 2221L, 2222L, 2223L, 2224L, 2225L, 2226L, 
2227L, 2228L, 2229L, 2230L, 2231L, 2232L, 2233L, 2234L, 2235L, 
2236L, 2237L, 2238L, 2239L, 2240L, 2241L, 2242L, 2243L, 2244L, 
2245L, 2246L, 2247L, 2248L, 2249L, 2250L), class = "data.frame") 
```

到目前为止进行分箱的方法......

```
timevec = seq(min(sums$difftim), max(sums$difftim), by=round( (max(sums$difftim) - min(sums$difftim))/8 ) ) 
#cut
sumstab = xtabs(~ratperc +cut(difftim, timevec ), dat=sumsid1)
#to dataframe
sumstab = data.frame(sumstab)
#rename
colnames(sumstab) = c("rating", "range", "freq")

#convert rating to numeric
sumstab$rating = as.numeric(as.character(sumstab$rating))

#prepare data for summary
sumstab$fresum = sumstab$rating * sumstab$freq

sumstab2 = ddply(sumstab, .(range), summarise, meanrat = sum(fresum)/sum(freq), no_obs = sum(freq)) 
```

我认为最简单的方法是找到一种需要一种新方法来计算`timevec`我用于`cut`数据的向量。但是，如果有人知道做整个事情的更好方法，请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T13:55:48.453

**ggplot2**是`cut_number()`一个方便的便捷函数，它可以找到定义*n*大致相同人口间隔的断点，然后使用它们对数据进行分箱。听起来它可能会做你想做的事。

```
require(ggplot2)
cut_number(sumsq$difftim, n = 10) 
```

检查其输出：

```
data.frame(table(cut_number(sumsq$difftim, 10)))
#                Var1 Freq
# 1  [-1.78e+03,-287]  121
# 2       (-287,-168]  128
# 3       (-168,-101]  124
# 4        (-101,-50]  121
# 5          (-50,-3]  106
# 6           (-3,34]  130
# 7         (34,84.3]  110
# 8        (84.3,152]  124
# 9         (152,302]  118
# 10   (302,3.08e+03]  118 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T13:44:16.047

试试这个`classInt`包 - 它实现了几种生成分类间隔的方法，包括相等的数字。

# algorithm - OpenCV 线拟合算法

> ID：11722569
> 
> 赞同：18
> 
> 时间：2012-07-30T13:27:08.657
> 
> 标签：algorithm, opencv, statistics, curve-fitting

我试图了解 OpenCV [fitLine()](http://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=fitline#fitline)算法。

这是来自 OpenCV 的代码片段： `icvFitLine2D`函数 - [icvFitLine2D](http://code.opencv.org/projects/opencv/repository/revisions/master/entry/modules/imgproc/src/linefit.cpp#L339)

我看到有一些随机函数选择近似点，然后计算从点到拟合线的距离（使用选择的点），然后选择其他点并尝试使用 choosen 最小化距离`distType`。

[有人可以澄清从这一刻起](http://code.opencv.org/projects/opencv/repository/revisions/master/entry/modules/imgproc/src/linefit.cpp#L392)会发生什么，而无需经过严格的数学运算并假设没有出色的统计知识吗？OpenCV 代码注释和变量名并不能帮助我理解这段代码。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-03T10:52:31.357

（这是一个老问题，但这个话题激起了我的好奇心）

OpenCV`FitLine`实现了两种不同的机制。

如果参数`distType`设置为`CV_DIST_L2`，则使用[标准的未加权最小二乘拟合](http://en.wikipedia.org/wiki/Least_squares)。

如果`distTypes`使用其中之一（`CV_DIST_L1`, `CV_DIST_L12`, `CV_DIST_FAIR`, `CV_DIST_WELSCH`, `CV_DIST_HUBER`），则该过程是某种[RANSAC](http://en.wikipedia.org/wiki/RANSAC)拟合：

*   最多重复 20 次：
    *   选择 10 个随机点，只为它们做一个最小二乘法
    *   最多重复 30 次：
        *   使用当前找到的线和选择的线计算所有点的权重`distType`
        *   对所有点进行加权最小二乘拟合
        *   （这是一个[迭代重新加权最小二乘拟合](http://en.wikipedia.org/wiki/Iteratively_re-weighted_least_squares)或[M-Estimator](http://en.wikipedia.org/wiki/M-estimator)）
*   返回找到的最佳 linefit

这是伪代码中更详细的描述：

```
repeat at most 20 times:

    RANSAC (line 371)
     - pick 10 random points, 
     - set their weights to 1, 
     - set all other weights to 0

    least squares weighted fit (fitLine2D_wods, line 381)
     - fit only the 10 picked points to the line, using least-squares

    repeat at most 30 times: (line 382)
     - stop if the difference between the found solution and the previous found solution is less than DELTA  (line 390 - 406)
       (the angle difference must be less than adelta, and the distance beween the line centers must be less than rdelta)
     - stop if the sum of squared distances between the found line and the points is less than EPSILON (line 407)
       (The unweighted sum of squared distances is used here ==> the standard L2 norm)

        re-calculate the weights for *all* points (line 412)
         - using the given norm (CV_DIST_L1 / CV_DIST_L12 / CV_DIST_FAIR / ...)
         - normalize the weights so their sum is 1
         - special case, to catch errors: if for some reason all weights are zero, set all weight to 1

        least squares weighted fit (fitLine2D_wods, line 437)
         - fit *all* points to the line, using weighted least squares

    if the last found solution is better than the current best solution (line 440)
        save it as the new best
        (The unweighted sum of squared distances is used here ==> the standard L2 norm)

        if the distance between the found line and the points is less than EPSILON
             break

return the best solution 
```

权重的计算取决于所选的`distType`，根据[手册](http://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=fitline#fitline)的公式是`weight[Point_i] = 1/ p(distance_between_point_i_and_line)`，其中 p 是：

> distType=CV_DIST_L1 ![在此处输入图像描述](../Images/835f8f4222a9c086463f46571241039a.png)
> 
> distType=CV_DIST_L12 ![在此处输入图像描述](../Images/d978c016e5d654ee78e02257c88a24c0.png)
> 
> distType=CV_DIST_FAIR ![在此处输入图像描述](../Images/902cf1435d1f02c14d37df71ca84256b.png)
> 
> distType=CV_DIST_WELSCH ![在此处输入图像描述](../Images/198db2ddf9a08290a59f11452173fc7b.png)
> 
> distType=CV_DIST_HUBER ![在此处输入图像描述](../Images/d78d77041fe1c0636c72f8dced75dc1c.png)

不幸的是，我不知道哪种`distType`数据最适合哪种数据，也许其他人可以对此有所了解。

* * *

我注意到一些有趣的事情：选择的范数仅用于迭代重新加权，找到的最佳解决方案总是根据 L2 范数选择（*未加权*最小二乘和最小的线）。我不确定这是否正确。

# javascript - 向 Titanium 添加查询

> ID：11722571
> 
> 赞同：0
> 
> 时间：2012-07-30T13:27:22.800
> 
> 标签：javascript, sql, json, titanium

我正在使用 Titanium 来列出特定产品中可用的数量，并且我正在使用查询“SELECT product_name, SUM(product_quantity)FROM mobile_product GROUP BY product_name”..

我在将这个查询实现到 Titanium JS 时感到困惑。

我的钛代码是

* * *

```
var currentWin = Ti.UI.currentWindow;

var sendit = Ti.Network.createHTTPClient();
sendit.open('GET', 'http://localhost/mobileapp/productread.php');
sendit.send();

sendit.onload = function(){
var json = JSON.parse(this.responseText);

var json = json.mobile_product;

var picker = Ti.UI.createPicker();
// turn on the selection indicator (off by default)
picker.selectionIndicator = true;

var data = [];
var pos;
for (pos=0; pos < json.length; pos++) {
data.push (Ti.UI.createPickerRow({title:''+ json[pos].product_name +    '',custom_item:'b'}));
}
picker.add(data);
currentWin.add(picker);

//var rw = db.execute("SELECT product_name, SUM(product_quantity)FROM mobile_product    GROUP BY product_name");

picker.addEventListener("change", function(e){
Ti.API.info(''+ json[pos].product_name + '');
})
}; 
```

* * *

请有人帮助我如何在此代码中使用此查询...我正在使用 JSON 从 PHPMyAdmin 解析.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T16:13:53.043

重读你的问题后，你真的在​​这里问了几个关键部分。您在问我如何将我的数据放入数据库，然后我如何对该数据库执行查询。

创建数据库：

```
var db = Ti.Database.open('MyDatabase');
db.execute('CREATE TABLE IF NOT EXISTS [mobile_product](id INTEGER, product_name TEXT, product_quantity INTEGER');
db.close(); 
```

加载数据库：

```
var json = JSON.parse(this.responseText);

for(var i=0; json.length; i++){
 var product = json[i];
 addProductToDatabase(product);
}

function addProductToDatabase(_args){
  var db = Ti.Database.open('MyDatabase');
  var result = db.execute('INSERT INTO mobile_product(product_name, product_quantity) VALUES (?, ?)', _args.product_name, _args.product_quatity);
  db.close();

}

result = db.execute("SELECT product_name, SUM(product_quantity)FROM mobile_product GROUP BY product_name");
var myList = [];
while(result.isValidRow()){
  myList.push({
    product_name: result.fieldByName('product_name'),
    product_quantity: result.fieldByName('product_quantity')
  }];
  result.next();
}
result.close();
db.close();

var data = [];
for (i=0; i<myList.length; i++) {
 data.push (Ti.UI.createPickerRow({title:''+ myList[i].product_name + '',custom_item:'b'}));
}
picker.add(data); 
```

# linux - 批量运行 imageJ

> ID：11722573
> 
> 赞同：0
> 
> 时间：2012-07-30T13:27:29.297
> 
> 标签：linux, batch-file, imagej

我已经下载`imageJ`了`Linux`，

但我无法使用批处理标志 ( `-batch`) 运行它。

这里的 [说明](http://rsbweb.nih.gov/ij/docs/install/linux.html) ：

假设它`imageJ`是使用`./run`运行的，并且可以使用带有`batch`-scriptPath 的脚本运行。

但是运行*./run -batch* 不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T14:30:59.467

当您键入 ./run 时，您将执行一个包含该行的 shell 脚本

```
./jre/bin/java -Xmx512m -jar ij.jar 
```

尝试在命令行输入

```
./jre/bin/java -Xmx512m -jar ij.jar -batch <your_args> 
```

从 imageJ 目录。

# javascript - 在表之间移动 tr

> ID：11722575
> 
> 赞同：1
> 
> 时间：2012-07-30T13:27:43.900
> 
> 标签：javascript, jquery, jquery-ui, jquery-plugins, jinja2

我有一个自动生成 X 个表的应用程序，并根据它们的值为它们分配随机 id。然后，我有一个充当数据池的主表，在将数据放入新表之前将其存储在其中。

最终，一旦将数据存储在它的新表中，它将是可排序的，因此我可以更改表的层次结构。此外，它应该能够从其表中移出并移入任何其他表。我计划使用一个小按钮/图像在每个表中上下移动数据，但是从一个表移动到另一个表应该能够在单击该行时起作用。

我在网上看到的所有教程和代码片段都显示了在表之间移动数据，但是在您的 jquery 脚本中，您必须手动分配所有表类和 id。我不能这样做，因为它们对于从初始 SQL 查询返回的内容是可变的。

我当前的 html 模板看起来像这样（我知道它不会工作，但可拖放和可拖放只是为了向您展示我希望它如何工作）。这甚至可以使用 jquery，还是我应该寻找另一条路线？

```
<script>
$(function() {
    $( ".draggable" ).draggable();
    $( ".droppable" ).droppable({
        drop: function( event, ui ) {
            $( this )
                .addClass( "ui-state-highlight" )
                .find( "p" )
                    .html( "Dropped!" );
        }
    });
});
</script>

{% for vehicle in vehicles %} <!-- List the vehicles available -->
<h1>{{ vehicle.reg }} </h1>
<table class="listing droppable" id="{{ vehicle.reg }}">
<tr>
<th>Account #</th>
<th>Customer</th>
<th>Order #</th>
<th>Order Weight</th>
</tr>
<!-- want items to be dropped as rows in here -->
</table>
<br /><br />
{% endfor %}

<br /><br />
<h1>Unassigned Orders</h1>
<table class="listing">
<tr>
<th>Account #</th>
<th>Customer</th>
<th>Order #</th>
<th>Order Weight</th>
</tr>
{% for order in orders %}
<tr class="draggable"> <!-- rows should be able to get dropped into any vehicle table -->
<td>{{ order.oh_custaccref }}</td> <!-- and then into any other table (if required) -->
<td>{{ order.name }}</td> 
<td>{{ order.oh_orderno }}</td>  
<td>{{ order.oh_orderwgt }}</td>  
</tr>

{% endfor %}
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:01:04.323

我用[http://www.redips.net/javascript/drag-and-drop-table-content/解决了这个问题](http://www.redips.net/javascript/drag-and-drop-table-content/)

它是一个非常酷的扩展，可让您在表格内和表格之间移动单元格和整行。

我的 html 模板最终变成：

```
<div id="drag">
{% for vehicle in vehicles %} <!-- List the vehicles available -->
<table class="listing" id="{{ vehicle.reg }}">
<colgroup><col width="100"/><col width="120"/><col width="480"/><col width="100"/><col width="100"/></colgroup>
<tr>
<th class="mark">{{ vehicle.reg }}</th>
</tr>
<tr>
<th class="mark">  </th>    
<th class="mark">Account #</th>
<th class="mark">Customer</th>
<th class="mark">Order #</th>
<th class="mark">Order Weight</th>
</tr>
<tr> 
<td class="rowhandler"><div class="drag row"></div> </td> 
<td></td> 
<td></td> 
<td></td>  
<td></td>
</tr>
<!-- want items to be dropped as rows in here -->
</table>
{% endfor %}

<table class="listing">
<colgroup><col width="100"/><col width="120"/><col width="480"/><col width="100"/><col width="100"/></colgroup>
<tr>
<th class="mark">NO REG</th>
</tr>
<tr>
<th class="mark">  </th>    
<th class="mark">Account #</th>
<th class="mark">Customer</th>
<th class="mark">Order #</th>
<th class="mark">Order Weight</th>
</tr>   
{% for order in orders %}
<tr> 
<!-- rows should be able to get dropped into any vehicle table -->
<td class="rowhandler"><div class="drag row"></div> </td> 
<td>{{ order.oh_custaccref }}</td> <!-- and then into any other table (if required) -->
<td>{{ order.name }}</td> 
<td>{{ order.oh_orderno }}</td>  
<td>{{ order.oh_orderwgt }}</td>
</tr>

{% endfor %}    
</table>
</div> <!-- end drag -->
{% endblock %} 
```

# python - 变量作为 Django admin 中的字段

> ID：11722578
> 
> 赞同：1
> 
> 时间：2012-07-30T13:27:50.427
> 
> 标签：python, django

我需要在 list_filter 中使用内联类的字段，在我的操作中，我的操作需要字段才能工作。查询是最好的方法吗？

管理员.py

```
class TelefoneIPInline(admin.StackedInline):
        model = MovimentoTelefoneIP
        extra = 1
        list_filter = ['nome']

class TelefoneIPAdmin(admin.ModelAdmin):
        def cliente():
                movimento = MovimentoTelefoneIP.objects.filter(id = 1)
                for cliente in movimento:
                        cli = cliente.cliente
                return cli

        cliente = cliente()
        file = open('lala', 'w')
        file.write(str(cliente))
        list_display = ('mac', 'modelo', 'fornecedor', )
        search_fields = ['mac']
        inlines = [TelefoneIPInline] 
```

模型.py

```
class TelefoneIP(models.Model):
        mac = models.CharField(max_length=12, help_text="Este campo deve ter 12 digitos")
        modelo = models.ForeignKey(ModeloTelefoneIP)
        fornecedor = models.ForeignKey(Fornecedor)
        datacompra = models.DateField(verbose_name="Data de compra", null=True, blank=True)
        nfcompra = models.IntegerField(verbose_name="Nota fiscal de compra", blank=True, null=True)
        obs = models.TextField(max_length=500, null=True, blank=True)

class MovimentoTelefoneIP(models.Model):
        equipamento = models.ForeignKey(TelefoneIP)
        cliente = models.ForeignKey(Cliente)
        sentido = models.ForeignKey(sentido)
        nfentrada = models.IntegerField(verbose_name="Nota fiscal de entrada", null=True, blank=True)
        dataentrada = models.DateField(verbose_name="Data de entrada", null=True, blank=True)
        nfvenda = models.IntegerField(verbose_name="Nota fiscal de saída", null=True, blank=True)
        datavenda = models.DateField(verbose_name="Data de saída", null=True, blank=True) 
```

# javascript - 是否有用于生成 Web 应用程序上下文特定字体列表的 JavaScript 库？

> ID：11722582
> 
> 赞同：0
> 
> 时间：2012-07-30T13:28:08.003
> 
> 标签：javascript, localization, fonts, internationalization

我的意思是使用关于我的用户及其操作系统的语言选择的可用信息，我想在我的 Web 应用程序中显示一个字体列表，其中所有字体都适用于可能使用的字符/符号。

所以，在 Mac 上，我不想显示 Windows 特定的字体。对于泰语用户，我不想显示没有泰语符号的字体。如果 JavaScript 中不存在任何内容，或者客户端无法获得用于确定此类集合的信息，那么是否有人知道任何技术的服务器端解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T14:03:57.503

您可以做的最好的事情是指定多种字体并允许系统自动从列表中向下查找，直到找到它拥有的一种。JavaScript 中没有用于检测客户端机器上的字体的钩子。

话虽如此，检测字体有一种稍微痛苦的方法——将一些文本与该字体放在一个 SPAN 中，然后测量 SPAN 的最终宽度。[如本文所述，](http://www.lalit.org/lab/javascript-css-font-detect/)已知字体将具有已知宽度。

![在此处输入图像描述](../Images/adcb8f8fbbe9ed6965975b460c817477.png)

# javascript - 限制用户在 textarea 中粘贴最大 (40) 个字符

> ID：11722583
> 
> 赞同：0
> 
> 时间：2012-07-30T13:28:10.207
> 
> 标签：javascript, asp.net, html, asp.net-mvc

我限制用户在文本区域中输入字符的最大限制（40Char）。我在以下事件中调用此`JS`函数。`onKeyUp``textarea`

但是当**我复制粘贴超过 40chars 的内容**时，直到我在 textarea 上执行 keyup/down 时才会弹出（警报）。

```
function checkLength(textBox, e, maxLength) {
  if (textBox.value.length > maxLength - 1) {        
     alert("* You have reached max limit ");
     textBox.value = textBox.value.substr(0, maxLength);
  }
  else {
     alert(maxLength - textBox.value.length + " characters remaining");
  }
} 
```

有没有办法在不`keyup/down`粘贴后获得警报`textarea`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T13:29:56.090

您可能应该`onChange`为此使用该事件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T13:35:53.113

如果您想即时修剪多余的字符，另一种可能的方法如下。

*   创建一个修剪功能，它将修剪超过 40 个字符。例如 - `trimText()`。
*   onFocus - 添加一个`setInterval`函数以`trimText()`在每 500 毫秒后调用一次。
*   onBlur - 清除`setInterval`功能并`trimText()`再次运行。
*   onChange -`trimText()`再次运行。如果需要，这将是一个额外的检查。

根据您的要求，您可以更新持续时间。

示例：http: [//jsfiddle.net/codebombs/AyLdW/](http://jsfiddle.net/codebombs/AyLdW/)

如果您只想显示一条警报消息，请使用`onchange`.

演示：http: [//jsfiddle.net/codebombs/3Jdvg/1/](http://jsfiddle.net/codebombs/3Jdvg/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-29T11:24:02.400

假设我们有一个 asp 文本框，那么我们可以使用“OnPaste”事件，如下所示

```
 <asp:TextBox TextMode="MultiLine" runat="server" ID="txtComment_c" 
    onpaste="return maxLengthPaste(this, 40)" MaxLength="40"></asp:TextBox> 
```

在粘贴内容之前，首先我们需要检查已经占用了多少长度，然后 window.clipboard.getdata.length 会给我们即将粘贴的数据长度。考虑下面的代码

```
 function maxLengthPaste(field, maxChars) {

        if ((field.value.length + window.clipboardData.getData("Text").length) > maxChars) {
            alert("Cannot have more than " + maxChars + " Characters");
            return false;
        }

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T13:37:05.580

就像是：

```
$('#textbox1').on('change', function() {
    var currentText = $(this).val();
    if(currentText.length > 40)
        $(this).val(substr(currentText,0,40));
}); 
```

甚至还有一个[省略号](http://webdood.com/?p=261)插件可以为您添加省略号 (...)。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-30T13:51:19.920

得到解决方案的家伙:)

```
onKeyUp = "checkLength(this);">
</form>
<script>
function fncKeyLength(textBox){
if (window.event.ctrlKey){
if (window.event.keyCode == 86)//Paste 
if (textBox.value.length > maxLength - 1)
{            
  alert("* You have reached max limit ");
  textBox.value = textBox.value.substr(0, maxLength); 
}
</script> 
```

# actionscript-3 - Flex，移除事件监听器和绑定设置器

> ID：11722584
> 
> 赞同：1
> 
> 时间：2012-07-30T13:28:18.127
> 
> 标签：actionscript-3, apache-flex, flex3

我有一个带有复杂 UI（内置于 Flex 3.6）的大型应用程序。有很多嵌套组件，其中大多数都有事件侦听器或绑定设置器。结构类似于：

```
- Client View
         - Portfolio View
         - Personal data
         - etc. etc.
- Manager view
         - etc. etc. 
```

有时我必须破坏客户端视图以重新初始化它；我所做的是将它从它的容器中取出；但似乎内存没有得到正确的垃圾收集（问题是事件侦听器和数据绑定的存在）。

阅读书籍和论坛我发现管理这种情况的最佳方法是删除对象销毁时的数据绑定和事件侦听器。但我怎么能做到这一点？谁告诉客户端视图层次结构的最后一个孩子它已被删除？

我已经通过“addToStage”和“removedFromStage”事件处理程序实现了它——它似乎有效，但它是一种解决方法；这个事件被调用了很多时间，这会减慢渲染速度。

**所以我的问题是：我认为这个问题很常见，有更好的解决方案吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T14:15:38.230

为什么您认为根据组件在舞台上的外观来处理和重新激活组件是一种解决方法？这样做是很常见的，我个人认为没有什么特别的理由不这样做。

虽然我只从事移动项目，但这基本上与我处理组件的停用和重新激活的方法完全相同。一旦从阶段中删除，所有事件处理程序都会在再次添加组件时被删除并再次添加。除此之外，我还有一个完全释放组件的附加方法，因此首先删除事件侦听器，删除对对象的任何引用，最后将其置空。

# php - apache服务器上的php mkdir

> ID：11722586
> 
> 赞同：-4
> 
> 时间：2012-07-30T13:28:33.633
> 
> 标签：php, apache, mkdir

我必须在 apache 服务器中创建一个目录，但它看起来好像无法识别 coomand。这是我的代码。

```
<?php

mkdir("var/www/devData/",0777);
print "created";

?> 
```

当我启动file.php时，我将“创建”作为输出，但是在我使用shell检查目录是否存在但没有目录之后。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T13:31:24.103

```
error_reporting(E_ALL);
ini_set('display_errors', 1);

// a new directory in your current working directory (cwd)
$path = dirname(__FILE__) . "/your/path";

if(!mkdir($path, 0777, true)) {
    echo "Failure";
} else {
    echo "Success";
} 
```

我假设您没有创建该路径的权限。[`is_writable()`](http://at.php.net/manual/en/function.is-writable.php)您可以使用[`mkdir()`文档](http://php.net/mkdir)告诉您更多信息来检查您是否能够写入该目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T13:37:45.897

以下代码可以使用 php 函数来降低查找当前目录的复杂性。

```
 $thisdir = getcwd(); //current directory
    if(mkdir($thisdir ."/mydir", 0777 ))
    {
       echo "Directory has been created successfully...";
    }
    else
    {
       echo "Failed to create directory...";

    } 
```

这东西很好用。确保您的父目录是可写的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T13:34:22.853

你可能没有权利这样做

```
 <?php
      $new_folder = "var/www/devData";
      if(!mkdir($new_folder,0777,true)) { // true = for recrusive createing
         echo "Can't creating ".$_SERVER['DOCUMENT_ROOT']."/".$new_folder;
      }
      else 
         echo "Successful creating ".$_SERVER['DOCUMENT_ROOT']."/".$new_folder;
 ?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T13:34:44.187

读这个

[http://php.net/manual/en/function.mkdir.php](http://php.net/manual/en/function.mkdir.php)

试试这个：-

```
<?php
// Desired folder structure
$structure = './depth1/depth2/depth3/';

// To create the nested structure, the $recursive parameter 
// to mkdir() must be specified.

if (!mkdir($structure, 0, true)) {
    die('Failed to create folders...');
}

// ...
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-30T13:36:15.820

首先确保`file.php`脚本的所有者对目录具有写访问权`/var/www/`。[`is_writable()`](http://www.php.net/manual/en/function.is-writable.php)会告诉你。

然后：您使用的是相对路径，因此脚本尝试创建一个相对于其自身位置的目录。你需要

a) 使用绝对路径 ( `/var/www/...`)

或者

b) 使用相对路径但没有路径`file.php`本身所在的位置（例如：`file.php`is = `/var/www/file.php`、 use `mkdir("devData/",0777);`）。

另外：它当然会说“创建”，因为无论如何您都将其打印出来。如果您想让它仅在没有出现任何问题时才说“创建”，请尝试

```
if (mkdir("devData/",0777)) {
    echo "created";
}
else {
    echo "something went wrong...";
} 
```

# c# - 在 LINQ 中加入列并运行包含运算符

> ID：11722588
> 
> 赞同：3
> 
> 时间：2012-07-30T13:28:37.460
> 
> 标签：c#, asp.net, linq, webforms

我正在尝试创建一种搜索方法，我想检查关键字是否包含在给定记录的任意数量的不同列中。

我的 Linq 语句如下：

```
string[] searchFilter = {"john", "iceberg"};

var q = from qua in qual
                    join del in deliverables on qua.ID equals del.Q_ID
                    where searchFilter.All(s => (qua.Name + " " + qua.Project + " " + qua.Summary + " " + del.Name + " " + del.Summary).ToLower().Contains(s))
                    select qua; 
```

但是，我收到一条错误消息，其中指出：“本地序列不能用于查询运算符的 LINQ to SQL 实现中，但 Contains() 运算符除外。”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T13:44:54.830

实际上，您不能使用 All 方法，而只能使用 Contains 方法：

```
var q = from qua in qual
        join del in deliverables on qua.ID equals del.Q_ID
        where searchFilter.Contains(qua.Name) ||  searchFilter.Contains(qua.Project)...
        select qua; 
```

当然，您可以将您的 linq 查询与表达式动态组合（但它可能需要更多的工作），或者使用动态 linq。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T13:59:54.807

不要以为你有选择：

但是当您停留在“可查询”的世界中时，这只会生成一个 sql 请求（丑陋，但是...）

```
var q = from qua in qual
        join del in deliverables on qua.ID equals del.Q_ID
        select new{ qua, del};

foreach (var filter in searchFilter)
     q = q.Where(v => (v.qua.Name + " " + v.qua.Project + " " + v.qua.Summary + " " + v.del.Name + " " + v.del.Summary).ToLower().Contains(filter));

var result = q.Select(p => p.qua); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T18:28:13.363

无论出于何种原因， contains 方法在第二次通过循环时都没有使用过滤结果。最终奏效的方法是：

```
var SearchColumn = from qua in Qual
               join del in deliverables on qua.Q_ID equals del.Q_ID into left_j
                            from del in left_j.DefaultIfEmpty()
                            select new { qua.Name + " " + qua.Project + " " + qua.Summary + " " + del.Name + " " + del.Summary).ToLower() };

foreach (var f in searchFilter)
{
   var likestr = string.Format("%{0}%", f);
   SearchColumn = SearchColumn.Where(x => SqlMethods.Like(x.Search_Col, likestr));
} 
```

# android - 在哪里重新创建活动？

> ID：11722597
> 
> 赞同：3
> 
> 时间：2012-07-30T13:29:14.623
> 
> 标签：android, android-activity, preferenceactivity, android-theme

我在我的应用程序中实现了两个简单的主题，您可以在`SettingsActivity`( `extending PreferenceActivity`) 中选择它们。

此时，当您更改主题时，它仅应用于新创建的活动，因为您调用设置的活动是活动堆栈中的旧活动。

我进行了很多搜索，发现这非常有用：[如何重新启动活动](https://stackoverflow.com/questions/1397361/how-do-i-restart-an-android-activity)。

顺便说一句，我并不完全清楚该代码的放置位置。使它起作用的唯一方法是将其放入`onRestart()`方法中，

但这是对 CPU、电池和用户体验的巨大浪费。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T13:43:53.587

我会为 onPreferenceChanged 注册一个监听器。在那里，您可以检查您的主题偏好是否是已更改的主题。然后，您可以使用以下代码重新启动您的活动。

```
Intent intent = getIntent();
finish();
startActivity(intent); 
```

通过使用 getIntent() 获取意图，您可以确保您的 Activity 将以完全相同的方式启动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T13:45:59.017

`PreferenceChangedListener`在主题偏好上设置一个。如果它被解雇，请将您的用户清除回应用程序的顶层。你可以重新开始当前的活动，但如果你有几个活动很深，那么这会变得有点痛苦。更容易将应用程序重置回开始。

```
 Intent i = new Intent(this, MainActivity.class);
        i.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        this.finish();
        this.startActivity(i); 
```

# c++ - 是否可以为模板类型专门化一个模板？

> ID：11722604
> 
> 赞同：1
> 
> 时间：2012-07-30T13:29:52.190
> 
> 标签：c++, templates, template-specialization

对于我的程序，我需要定义一个可以解决问题或嵌套问题的*Solver类。*

```
template< typename ProblemT >
struct Solver {
    static void a() {
        ProblemT::func();
    }
};

template< typename < typename SubT> ProblemT >
struct Solver<ProblemT< SubT> > {
    static void a() {
        ProblemT::func();
        SubT::func();
    }
}; 
```

用法：

```
Solver<Problem1> solver;
Solver<Problem2<Problem3> > nested_solver; 
```

在*Solver*的专用版本中，我需要知道*ProblemT*和*SubT*类型，以便正确定义类型并调用正确的函数。

是否只是一个简单的错误或无法定义这样的类？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T13:34:09.767

您可以使用模板模板参数执行此操作：

```
template<template <typename> class ProblemT, typename SubT>
struct Solver<ProblemT<SubT>>
{
    ...
};

// And you use it like this
Solver<ProblemTemplate<SubProblem>> solver; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T13:50:23.183

你可以尝试这样的事情：

```
template <typename T>
struct Solver
{
    static void solve() { T::func(); }
};

template <template <typename> class Tmpl, typename U>
struct Solver<Tmpl<U>>
{
    static void solve() { Tmpl<U>::solve(); }
}; 
```

`Solver`显然，您可以使用可以在专业化等中访问的其他成员函数来装饰您的主模板。

# jquery - Jquery Mobile 自定义按钮图片

> ID：11722609
> 
> 赞同：0
> 
> 时间：2012-07-30T13:30:20.933
> 
> 标签：jquery, mobile, button, jquery-mobile

我有一个按钮：

```
<a href="#" data-role="button" data-icon="mapa" data-theme="a">Vidi Mapu</a> 
```

使用这个 CSS：

```
.ui-icon-mapa {
    background-image: url("images/mapa.png") !important;
    background-position: 4px 50%;
    background-size: 26px 21px;
    height: 24px;
    margin-top: -12px !important;
    width: 35px;
} 
```

问题是按钮根本不显示图像/图标。我使用了所有可能的解决方案，但这不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-12T08:17:43.890

我不知道您使用的是哪个版本的 JQM，但在 1.3 版本中可以通过以下方式完成。

首先你需要创建 CSS 类：

```
 .ui-icon-tipwin-download {
    background-image: url("images/other/download_app_icon_18x18.png");
} 
```

然后在您的 HTML 标记中，您可以通过以下方式在按钮中使用此图标：

```
 <a href='javascript:void();' data-role='button' data-theme='a' data-icon='tipwin-download'>Download</a> 
```

注意**data-icon**属性，它是我们的 css 类**tipwin-download**的第二部分。

这对我来说很好。也可能是您必须使用大图标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T13:32:19.137

您正在尝试`button`使用 a 设置 的图像，`class`但不要将任何设置`class`为`a`. 所以设置`class=.ui-icon-mapa`如下：

```
$('a[data-icon=mapa]').addClass('.ui-icon-mapa'); // using jQuery 
```

或者如果可能的话，直接使用 HTML，如：

```
<a class="ui-icon-mapa" href="#" data-role="button" data-icon="mapa" data-theme="a">Vidi Mapu</a> 
```

或者

在您的 CSS 中尝试：

```
a[data-icon="mapa"].ui-icon-mapa {
    background-image: url("images/mapa.png") !important;
    background-position: 4px 50%;
    background-size: 26px 21px;
    height: 24px;
    margin-top: -12px !important;
    width: 35px;
} 
```

### 笔记

检查给定的 CSS 属性是否被其他 CSS 覆盖！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T13:32:32.270

我认为您应该`class="ui-icon-mapa"`在 html 或`a[data-icon="mapa"]`css 中使用

# git - 使用自定义 git 别名使 zsh 自动更正工作

> ID：11722613
> 
> 赞同：13
> 
> 时间：2012-07-30T13:30:25.910
> 
> 标签：git, zsh

我有一个用于 git 的自定义别名`git df`（它基本上是 git 的快捷方式`git diff`）。

但是，使用 git 的 zsh 自动更正功能，每次我`git df`在包含`db`目录的目录中使用时，都会得到以下信息：

```
% ls
app/ config/ db/ lib/ log/ spec/

% git alias | grep "df"
df = diff

% git df
zsh: correct 'df' to 'db' [nyae]? 
```

有没有办法让 zsh 知道我的 git 别名，以便在尝试自动更正我的命令时将它们考虑在内？我希望它检测到`git df`存在而不是建议我`git db`。

我不想创建 zsh 别名（例如`alias gdf="git diff"`）或使用`alias git="nocorrect git"`.

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T22:33:33.687

您可以通过运行命令`hash -rf`或`rehash`. 当 zsh 自动更正错误的东西时，这解决了我的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T08:28:10.893

Git 有一个自动更正功能：

```
git config --global help.autocorrect 
```

在自动更正之前将等待 2 秒：

```
git config --global help.autocorrect 2 
```

我认为如果你想在 zsh 中实现这个功能，你将不得不直接更改 git 完成功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-16T16:22:26.027

有时，我发现自动更正有点烦人。所以我在我的 ~/.zshrc 中做，

```
DISABLE_CORRECTION="true" 
```

这将禁用自动更正功能。否则，你可以做

```
alias git="nocorrect git" 
```

但你似乎对此很反感

# ios - Graph API：如何使用关键字搜索朋友

> ID：11722614
> 
> 赞同：4
> 
> 时间：2012-07-30T13:30:34.183
> 
> 标签：ios, facebook, facebook-graph-api, search

我需要为我的朋友提供一个搜索选项。如果我使用“我/朋友”，它将列出我所有的朋友。如果我使用“search?q=keyword”，我会得到包含非好友的搜索结果。

他们是一种搜索 FB 用户的方式，我的朋友是谁？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T13:55:30.880

可能最简单的方法是通过 FQL 使用如下代码：

```
SELECT name, about_me FROM user WHERE 
   uid IN (SELECT uid2 FROM friend WHERE uid1 = me()) 
   AND 
     (
        strpos(lower(name), lower([SEARCH])) >= 0 
        OR 
        strpos(lower(about_me), lower([SEARCH])) >= 0
      ) 
```

# javascript - 出现一秒钟然后消失 Javascript 的消息

> ID：11722615
> 
> 赞同：0
> 
> 时间：2012-07-30T13:30:42.843
> 
> 标签：javascript, settimeout

愚蠢的问题。我试图让一条消息在几秒钟后出现并消失。我只是想我会有一个超时功能，最后我会附加一个空字符串。

```
setTimeout(function() {
    $('#resultDivSE').append('<b><p style="font:color:rgb(128,0,128)">' + data + '</p></b>');
}, 1000)
$('#resultDivSE').append(''); 
```

这似乎不起作用。我在这里遗漏了什么...另外，您将如何设置文本的颜色？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T13:32:29.510

Append 是在末尾添加一个空白字符串，你想要替换它，你想要`.html('')`

对于你想要的颜色`$('#resultDivSE').css('color' , '#FF0000')`（我想，我不怎么使用 jQuery）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T13:37:57.463

你的逻辑是倒退的。您需要立即设置消息，然后在超时时清除它。要让消息显示一秒钟，您可以这样做：

```
$('#resultDivSE').html('<b><p style="color: #ff00ff">' + data + '</p></b>');
setTimeout(function() {
    $('#resultDivSE').html("");
}, 1000); 
```

PS 我还填写了正确的样式值来设置文本的颜色。

PPS 显示消息的时间不是很长。您可能想要 5 秒之类的时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T13:35:07.297

append 命令将文本添加到您选择的 div 中。要清除 div 中的所有文本，您需要：

```
$('#resultDivSE').html(''); 
```

要更改 css 中文本的颜色，您只需使用 color: 这样您的段落标签将如下所示：

```
<p style="color:rgb(128,0,128)"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T13:38:28.937

jquery css可以帮你设置字体颜色： http: [//api.jquery.com/css/](http://api.jquery.com/css/) 使用css属性`Color`

看起来您在`setTimeout`字符串的末尾缺少一个分号。也许我只是在这里一无所知，或者对代码片段感到困惑，但似乎您正在做相反的事情，并且您想要附加到结果 div 的 html 将在 1000 毫秒后出现。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-30T13:33:43.100

使用`.html`而不是`.append`. Append 将向您的 div 添加一些内容，而`.html`实际上会更改 HTML。

# java - 日期字段未正确更新。提交日期更新为上午 12:00:00，而不是原始值

> ID：11722622
> 
> 赞同：0
> 
> 时间：2012-07-30T13:31:12.857
> 
> 标签：java, oracle, jakarta-ee, oracle10g, oracle9i

我有一个以“日期”为参数的存储过程。

该过程是从一个函数调用的，而该函数又是从 Java 代码调用的。

我将`Date`来自 Java 代码的作为参数传递。

现在的问题是存储过程没有更新数据库的“日期”列中的正确时间。

得到正确更新，`Date`但时间使用默认值更新`12:00:00AM`，而不是原始值。

我使用`DBMS_SQL.EXECUTE`方法从函数中调用存储过程。

**JAVA代码：**

```

    import java.sql.CallableStatement;
    import java.sql.ResultSet;

    import org.hibernate.Session;
    import org.hibernate.SessionFactory;
    import org.hibernate.Transaction;
    import org.hibernate.cfg.Configuration;

    public class StackOvFlow {

    /**
    * 
    * @param args
    */

    public static void main(String[] args) {
    String status = "";
    try {
    System.out.println("IN MAIN");

    int userId = 1360822386;
    StringBuffer batchUpdateSQL = new StringBuffer("BEGIN ");
    StringBuffer updateSQLnew = null;
    String date = "30-JUL-2012 10:30:00";

    String currDate = "to_date(" + "'" + date + "'"
    + ",'DD-MON-YYYY HH24:MI:SS')";

    updateSQLnew = new StringBuffer(
    "BEGIN PKG_AMB_LOGIN.P_TRACK_USER("
    + userId
    + ",'" 
    + currDate
    + ""
    + ");Exception When BufferMgr.app_errors_exit Then Rollback; Return; End; ");

    batchUpdateSQL.append(updateSQLnew);

    batchUpdateSQL
    .append(" Exception When BufferMgr.app_errors_exit Then Rollback; Return; End;");

    System.out.println("INPUT ::::");

    System.out.println(batchUpdateSQL);

    String res = getMonthlySave(batchUpdateSQL.toString());
    System.out.println("Response: " + res);

    } catch (Exception e) {
    System.out.println("Exception" + e);
    e.printStackTrace();
    }
    System.out.println(status);

    }

    public static String getMonthlySave(String plSqlBlk) {

    String output = "";
    System.out.println("IN GET MONTHLY SAVE");

    Session session = null;

    CallableStatement cstmt = null;

    ResultSet rs = null;

    SessionFactory sessionFactory = new Configuration().configure(
    "hibernate.cfg.xml")

    .buildSessionFactory();

    session = sessionFactory.openSession();

    Transaction transaction = session.beginTransaction();

    try {

    System.out

    .println("******calling SP* ********");

    cstmt = session.connection().prepareCall(

    "{? = call PKG_THR.P_UPDT(?,?)}");

    cstmt.setFetchSize(10000);

    cstmt.registerOutParameter(1,

    oracle.jdbc.driver.OracleTypes.CURSOR);
        cstmt.setInt(2,186);

    cstmt.setString(3, plSqlBlk);
    cstmt.execute();

    rs = (ResultSet) cstmt.getObject(1);
    int size = rs.getFetchSize();

    System.out.println("The size of fetch is " + size);

    while (rs.next()) {

    output = output + rs.getString(1);

    }
    System.out.println("OUTPUT ::::::::::::");

    System.out.println(output);

    } catch (Exception e) {

    System.out

    .println("Exception occured in executing query  in fetchdetails....... ");

    e.printStackTrace();

    }

    finally {

    transaction.commit();

    session.close();

    }
    return output;
    }

    }** **PL/SQL 功能：** 

```
 CREATE or REPLACE
    PACKAGE BODY PKG_THR AS
    FUNCTION  P_UPDT(login_id number,plsql_block varchar2) RETURN cursor_type IS
    louvtBuff a_XMLBUFFER_TABLE;
    loutRowBuff a_XMLBUFFER_TABLE := a_XMLBUFFER_TABLE();
    EXIT_MESSAGE EXCEPTION;
    lreturn number;
    offset BINARY_INTEGER := 1;
    kount BINARY_INTEGER := 5;
    ln_dbms_cur NUMBER;
    ln_cur_execute NUMBER;
    j number := 1;
    i number;

    buffout cursor_type;
    BEGIN
     BufferMgrXML.CLEARBUFFER;
     BEGIN
     pkg_glbl.g_login_id  := login_id;
     pkg_glbl.g_connect:='1';

     ln_dbms_cur := DBMS_SQL.OPEN_CURSOR;

     DBMS_SQL.PARSE(ln_dbms_cur,plsql_block,DBMS_SQL.NATIVE);

     ln_cur_execute := DBMS_SQL.EXECUTE(ln_dbms_cur);

     EXCEPTION
     WHEN BufferMgr.app_errors_exit then
           lreturn := BufferMgrXML.getXML(louvtBuff,1,1);
           RAISE EXIT_MESSAGE;
     END; 
```

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2012-07-30T13:37:06.880

因为没有太多代码可以观察，所以很难说在这种情况下到底出了什么问题。

非常典型的原因是使用[java.sql.Date](http://docs.oracle.com/javase/6/docs/api/java/sql/Date.html)，它将所有时间字段设置为 0。如果是这种情况，您可以使用[java.sql.Timestamp](http://docs.oracle.com/javase/6/docs/api/java/sql/Timestamp.html)代替（秒的小数部分会丢失）。 
```

# c# - RegEx 提取前 6 到 10 位数字，不包括 8 位数字

> ID：11722625
> 
> 赞同：7
> 
> 时间：2012-07-30T13:31:24.857
> 
> 标签：c#, regex

我有以下测试文件名：

```
abc001_20111104_summary_123.txt
abc008_200700953_timeline.txt
abc008_20080402_summary200201573unitf.txt
123456.txt
100101-100102 test.txt
abc008_20110902_summary200110254.txt
abcd 200601141 summary.txt
abc008_summary_200502169_xyz.txt 
```

我需要从每个文件名 中提取**一个数字。**

该号码必须为**6、7、9 或 10 位数字**（因此，**不包括 8 位**数字）。

如果找到多个，我想获得**第一个数字**，如果没有找到，我想获得空字符串。

我设法通过**2 个步骤**完成此操作，首先删除 8 位数字，然后从我的列表中提取 6 到 10 位数字。

```
step 1 
  regex:  ([^0-9])([0-9]{8})([^0-9])
  replacement:  \1\3

step 2
  regex: (.*?)([1-9]([0-9]{5,6}|[0-9]{8,9}))([^0-9].*)
  replacement:  \2 
```

我在这 2 个步骤过程后得到的数字正是我正在寻找的：

```
[]
[200700953]
[200201573]
[123456]
[100101]
[200110254]
[200601141]
[200502169] 
```

现在，问题是： **有没有办法在一步过程中做到这一点？**

我已经看到了一个类似问题的[很好的解决方案](https://stackoverflow.com/questions/8899552/regex-to-find-numbers-excluding-four-digit-numbers)，但是，如果找到多个，它会给我最新的数字。

**注意：使用**[Regex Coach](http://www.weitz.de/regex-coach/)进行测试。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-30T13:35:27.070

假设您的正则表达式引擎支持后向断言：

```
(?<!\d)\d{6}(?:\d?|\d{3,4})(?!\d) 
```

**解释：**

```
(?<!\d)   # Assert that the previous character (if any) isn't a digit
\d{6}     # Match 6 digits
(?:       # Either match
 \d?      # 0 or 1 digits
|         # or
 \d{3,4}  # 3 or 4 digits
)         # End of alternation
(?!\d)    # Assert that the next character (if any) isn't a digit 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T13:42:15.330

试试这个：

```
regex: /(?:^|\D)(\d{6}(?:\d(?:\d{2,3})?)?)(?:\D|$)/
replacement: \1 
```

这将提取六位数字，可选地后跟一位（总共 7 位），可选地后跟 2 或 3 位（9 或 10）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T13:44:29.397

对于每个字符串 $subject

```
$subject = "abc001_20111104_summary_123.txt";
$subject ="abc008_200700953_timeline.txt";
$subject ="abc008_20080402_summary200201573unitf.txt";
$subject ="123456.txt"
$subject ="100101-100102 test.txt"
$subject ="abc008_20110902_summary200110254.txt";
$subject ="abcd 200601141 summary.txt";
$subject ="abc008_summary_200502169_xyz.txt";

$pattern = '*(?<!\d)(\d{6,7}|\d{9,10})(?!\d)*';
preg_match_all($pattern, $subject, $matches);
print_r($matches); 
```

你会得到预期的结果：

*   空的
*   200700953
*   200201573
*   123456
*   100101
*   200110254
*   200601141
*   200502169

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T14:02:13.743

匹配单词边界或边缘的非数字`[0-9]{6,7}|[0-9]{9,10}`应该这样做：

```
([^0-9]|\<)([0-9]{6,7}|[0-9]{9,10})([^0-9]|\>) 
```

# sql - 连接 SQL 表但只检索一个？

> ID：11722630
> 
> 赞同：0
> 
> 时间：2012-07-30T13:31:51.057
> 
> 标签：sql, sql-server-2008-r2

我有三个与此 SQL 语句相关的表。

**项目**

*   项目记录 ID
*   项目名称

**项目_竞赛类别**

*   ProjectCompetitionCategoryRecordId
*   项目记录 ID
*   CompetitionCategoryRecordId

**比赛类别**

*   CompetitionCategoryRecordId
*   比赛类别名称

我试图从我的表中检索的是`ProjectRecordId, ProjectName, CompetitionCategoryName`值。

但是 a`Project`可能会参与多个`Competition Category`. 我需要将信息放在一行中，并将比赛放在它自己的列中。

下面的例子

```
1\. 1 | Project No 1 | Competition 1, Competition 2
2\. 2 | Project No 2 | Competition 2, Competition 3, Competition 4
3\. 3 | Project No 3 | Competition 1, Competition 4 
```

这是我拥有的当前 SQL 语句：

```
DECLARE @Data VARCHAR(2000)
DECLARE @pID INT
DECLARE @pName VARCHAR(300)

SELECT 
    @pID = Project.ProjectRecordId, 
    @pName = Project.ProjectName,@Data = COALESCE(@Data + ',' + CompetitionCategoryName, CompetitionCategoryName)
FROM 
    Project_CompetitionCategory 
INNER JOIN
    CompetitionCategory ON Project_CompetitionCategory.CompetitionCategoryRecordId = CompetitionCategory.CompetitionCategoryRecordId 
INNER JOIN
    Project ON Project_CompetitionCategory.ProjectRecordId = Project.ProjectRecordId
WHERE 
    Project.ProjectRecordId = 10

SELECT 
   @pID AS 'Project Record ID',  
   @pName AS 'Project Name', 
   @Data AS Competition, 
   (SELECT COUNT(ProjectRecordId) FROM Presentation WHERE ProjectRecordId = @pID) AS 'Number of Recorded Presentations' 
```

如果我删除

```
WHERE Project.ProjectRecordId = 10 
```

然后它只获取最后一个值，`CompetitionCategory`然后搞砸了。

像下面的东西。

```
1\. 15 | Project No 15 | Competition1, Competition 2, Competition 3, Competition 2, Competition 4 
```

我已经阅读了这篇stackoverflow文章的各种答案[Concatenate many rows into a single text string?](https://stackoverflow.com/questions/194852/concatenate-many-rows-into-a-single-text-string)

并用谷歌搜索在网站上找到解决方案，例如

1.  [http://databases.aspfaq.com/general/how-do-i-concatenate-strings-from-a-column-into-a-single-row.html](http://databases.aspfaq.com/general/how-do-i-concatenate-strings-from-a-column-into-a-single-row.html)
2.  [http://www.simple-talk.com/sql/t-sql-programming/concatenating-row-values-in-transact-sql/](http://www.simple-talk.com/sql/t-sql-programming/concatenating-row-values-in-transact-sql/)

但是我仍然找不到解决方案。我正在使用 SQL Server 2008 R2。我是 SQL 新手，想了解为什么无法获得我想要的数据。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T13:54:03.590

您拥有的表结构没有很好地设计用于查询类似的东西。除了与查询连接之外，还有什么理由不能使用一对多关系结果，如下所示：

```
SELECT p.ProjectRecordId, p.ProjectName, cc.CompetitionCategoryName FROM Project p JOIN Project_CompetitionCategory pcc on p.ProjectRecordId = pcc.ProjectRecordId JOIN CompetitionCategory cc on pcc.CompetitionCategoryRecordId = cc.CompetitionCategoryRecordId 
```

您提到的查询将连接您选择的 projectRecordID 的表，但删除 recordId 只会列出表中所有项目的所有可能类别。

```
DECLARE @compCat VARCHAR(1000)

SELECT @compCat = COALESCE(@compCat + ',', '') + cc.CompetitionCategoryName 
FROM Project p JOIN Project_CompetitionCategory pcc on p.ProjectRecordId = pcc.ProjectRecordId JOIN CompetitionCategory cc on pcc.CompetitionCategoryRecordId = cc.CompetitionCategoryRecordId WHERE p.ProjectRecordId=10 
```

此时@compCat 将只有项目 10 的竞赛类别。删除项目 10 过滤器将生成所有项目类别的列表。为了以这种方式获得连接结果，您需要使用选择 projectId 并将其传递给连接查询的游标编写 sql ......如下所示：

```
DECLARE @compCat VARCHAR(1000)
DECLARE projectIdSelect CURSOR FOR SELECT ProjectRecordId FROM Project

OPEN projectIdSelect
FETCH NEXT FROM projectIdSelect INTO @projectID
WHILE @@FETCH_STATUS = 0
BEGIN
    SET @compCat = ''
    SELECT @compCat = COALESCE(@compCat + ',', '') + cc.CompetitionCategoryName 
    FROM Project p JOIN Project_CompetitionCategory pcc on p.ProjectRecordId = pcc.ProjectRecordId JOIN CompetitionCategory cc on pcc.CompetitionCategoryRecordId = cc.CompetitionCategoryRecordId WHERE p.ProjectRecordId=@vars
    PRINT('Project ID: ' + @vars + ' | ' + @compCat)    
END
CLOSE projectIdSelect 
DEALLOCATE projectIdSelect 
```

# vertica - Vertica-在主内存上容易吗？

> ID：11722633
> 
> 赞同：1
> 
> 时间：2012-07-30T13:32:04.280
> 
> 标签：vertica

我是 Vertica 的新手，并且已经阅读了很多材料，但还没有太多动手操作。从我目前所读到的内容中，我了解到真正回答查询的只读存储 (ROS) 完全从磁盘运行，并且根本不使用主内存。这是否意味着 Vertica 中没有查询缓存的概念？这是因为“无共享”架构吗？

考虑到上述情况——这是否意味着 Vertica 不需要 GB 的内存来回答查询？我知道只写存储（WOS）主要在内存之外工作，因此 WOS 需要内存。但是考虑到 OLAP 的使用（与写入相比，读取更复杂），Vertica 在内存上看起来很容易。

我的理解正确吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T15:38:14.800

Vertica 的性能受内存影响。

当尝试加入 2 个大表（例如）时，它会尝试在内存中进行 Hash/Merge/whatever join。当数据不适合时，它会“溢出到磁盘”，这会导致过程比在内存中慢得多。

Vertica 可以正常工作，但如果内存不足，则会对性能产生负面影响。（留有足够的故意模糊）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T16:12:41.110

RE: Nija - 实际上，MergeJoin 和其他基于排序的优化使用相对较少的内存。

WOS 用于通过从写入优化存储中的多个负载收集元组并在更大的批量中对它们进行排序/写入来分摊执行许多小负载的成本。通常它不会提高查询性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T18:24:42.103

ROS 和 WOS 代表读优化存储和写优化存储，而不是只读和只写。

根据自己选择的时间表，Vertica 将逐个表地将元组从 WOS 移动到 ROS。最终，读取/查询性能取决于数据在磁盘上的存储方式。

当然，正如 Nija 所描述的那样，存在内存限制。但是您永远不应将 WOS 中的数据视为永久驻留在那里。从长远来看，预计它最终会进入 ROS。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T06:36:38.760

除了 Stephen 的评论，使用 WOS 收集数据，会影响插入性能，但如果你一次插入超过 100MB，最好绕过 WOS 直接插入到 ROS，这样 Vertica 不会被强制使用元组移动数据，避免其他次优数据分布情况。

# c++ - std::cout 不打印到控制台

> ID：11722636
> 
> 赞同：1
> 
> 时间：2012-07-30T13:32:12.893
> 
> 标签：c++, pointers, pass-by-reference

```
#include <iostream>

void swap(int &pi, int &pj){

    std::cout << "In function swap: " <<  &pi << " " << &pj << "\n";

        int temp = pi;
        pi = pj;
        pj = temp;
}

int main(){

        int i = 10, j = 20;
        int *pi = &i, *pj = &j;
        swap(pi, pj);

        std::cout << *pi << " " << *pj;
        return 0;
} 
```

上面的程序没有给出任何编译错误。（虽然交换函数不是 POINTER TO REFERENCE 类型）并给出正确的输出。但无论我试图在**“交换”功能中打印什么，都不会打印到控制台**。谁能解释我为什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-30T13:35:24.600

看起来您可能正在使用`std::swap`交换两个指针而不是调用自己的交换例程。我怀疑你有一个`using namespace std;`地方你没有向我们展示？尝试将交换例程的名称更改为 eg `my_swap`，然后查看调用是否`my_swap`有效（它应该会因编译错误而失败）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T13:47:20.680

如果你能编译你的程序，你就不会向我们展示你所有的代码。您发布的此代码片段无法编译，因为您试图将 int* 类型的对象传递给您的函数 swapm，该函数需要对 int 的引用。

如果您的代码编译，我怀疑您包含一个“使用命名空间标准；” 原始代码中的任何位置。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-30T13:37:35.117

您正在尝试获取通过引用传递的指针的地址...我认为您不太了解自己在做什么。C++ 中的按引用传递功能允许您传递引用，因此您不需要指针。您的代码应如下所示。

```
#include <iostream>

void swap(int &i, int &j){

    std::cout << "In function swap: " <<  i << " " << j << "\n";

        int temp = i;
        i = j;
        j = temp;
}

int main(){

        int i = 10, j = 20;
        swap(i, j);

        std::cout << i << " " << j;
        return 0;
} 
```

# android - android数据库扩展未显示在文件资源管理器中

> ID：11722638
> 
> 赞同：3
> 
> 时间：2012-07-30T13:32:15.713
> 
> 标签：android, sqlite

我已经使用 sqliteOpenHelper 来使用数据库，它工作正常，但我想查看表和那里的数据

为此，我安装了[SqlLite Manager](http://www.coderzheaven.com/2011/04/18/sqlitemanager-plugin-for-eclipse/)以在文件资源管理器中查看我的表数据。但是当我到达目录 data/data/[myPackage]/databases 时，我的数据库文件存在但没有任何扩展名（.db 不是用它写的），并且可能这个[SqlLite 管理器](http://www.coderzheaven.com/2011/04/18/sqlitemanager-plugin-for-eclipse/)没有打开表

*我检查了本地闹钟的数据库，它正在打开并且有扩展闹钟“.db”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T15:26:46.857

创建数据库时，您可以分配扩展名（.sqlite 或 .db），但扩展名在这里不是强制性的，它可以使用/不使用扩展名。如果您对扩展感兴趣，那么您应该在创建数据库时指定扩展。

例如，如果您使用了 SQLiteOpenHelper，那么您可以使用 DB_NAME 作为 DbName.Extension，如下所示：

```
public class DataBaseHelper extends SQLiteOpenHelper{ 
private Context mycontext; 

//the extension may be .sqlite or .db
private static String DB_NAME = "(datbasename).sqlite";
//OR
private static String DB_NAME = "(datbasename).db";

...... other code goes here 
```

# android - Android：如何动态使视图具有相同的高度

> ID：11722646
> 
> 赞同：0
> 
> 时间：2012-07-30T13:32:37.217
> 
> 标签：android, android-layout, view

我正在 Android 应用程序中制作一张表格。现在我无法使视图具有相同的高度。

*   每行有 2 个`TextView`s`tmp_name`和`tmp_content`。
*   的高度`tmp_content`取决于 的长度`course_description(i)`。
*   `tmp_content`自动设置它的高度。

我想获得的高度`tmp_content`和重置高度`tmp_name`相同`tmp_content`。

如果您有任何提示，请告诉我。

```
for (int i = 0; i < course_name.size(); i++) {
    TableRow.LayoutParams lp = new TableRow.LayoutParams(TableRow.LayoutParams.WRAP_CONTENT, TableRow.LayoutParams.WRAP_CONTENT);
    lp.setMargins(1, 1, 1, 1);

    TextView tmp_name = new TextView(General.this);
    tmp_name.setText(course_name.get(i));
    tmp_name.setPadding(10, 0, 10, 0);
    tmp_name.setLayoutParams(lp);
    tmp_name.setBackgroundColor(getResources().getColor(R.color.white));

    TextView tmp_content = new TextView(General.this);
    tmp_content.setHorizontallyScrolling(false);
    tmp_content.setPadding(10, 0, 10, 0);
    tmp_content.setLayoutParams(lp);
    tmp_content.setBackgroundColor(getResources().getColor(R.color.white));
    tmp_content.setText(course_discription.get(i));

    TableRow tmp_row = new TableRow(General.this);
    tmp_row.addView(tmp_name);
    tmp_row.addView(tmp_content);
    tmp_row.setGravity(Gravity.CENTER_VERTICAL);

    course_display.removeView(tmp_row);
    course_display.addView(tmp_row);

} 
```

# jquery - 如何在 github 存储库的子文件夹中搜索特定单词或条目

> ID：11722650
> 
> 赞同：9
> 
> 时间：2012-07-30T13:33:06.547
> 
> 标签：jquery, unit-testing, search, github

我只是在寻找一个关于在特定存储库**的文件夹中搜索单词的示例（在 github 的高级搜索中触发的正确命令）。**我想这将涉及“路径：”选项，但不确定如何使用它

例如，我需要在以下位置的 jquery 测试套件中搜索函数名称“clean”或“clean”或类似函数的测试用例 -
[https://github.com/jquery/jquery/tree/master /测试](https://github.com/jquery/jquery/tree/master/test)

我知道有一些过滤器，如 repo: 和 path: 由 github 提供，但不知道如何使用它们。

此外，我对发布的类似问题的答案不满意 - [在 github 存储库中搜索定义给定函数的文件](https://stackoverflow.com/questions/9401923/search-a-github-repository-for-the-file-defining-a-given-function)

我知道我可以将它分叉到我的本地机器并在那里进行搜索，但我不想下载整个存储库只是为了搜索它。我只需要在 github 站点本身在线搜索它。

提前致谢 ！！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-30T13:54:07.287

[我用这个查询](https://github.com/search?q=repo%3ahadley/ggplot2%20facet_wrap&repo=&langOverride=&start_value=1&type=Code&language=R)得到 41 个结果。

关键是指定用户/reponame，而不是 reponame：

```
repo:hadley/ggplot2 
```

结合路径参数的**通配符**，我只选择[这个查询的](https://github.com/search?q=repo%3ahadley/ggplot2%20facet_wrap%20path%3ainst/%2a.r&repo=&langOverride=&start_value=1&type=Code&language=R)*一个*参数：

```
repo:hadley/ggplot2 facet_wrap path:inst/*.r 
```

因此，对于路径，关键是添加通配符（似乎在任何地方都没有记录）。
`path:inst/`单独是行不通的。`path:*`或`path:*.r`将。

* * *

从评论：

> 我需要`beforeSend`在此文件中找到“”条目-“ `jquery / test / unit / ajax.js`”，`github.com/jquery/jquery/blob/master/test/unit/ajax.js`但是当我在高级搜索中触发时`repo:jeresig/jquery beforeSend path:jquery/test/unit*.js`，我没有得到任何结果。
> 我也很困惑我应该使用哪个用户，因为 jquery 有很多贡献者，比如 John Resig、timmywil

在这种情况下：

*   回购是`jquery/jquery`（这里不需要用户名）
*   要使用的**`path:`**指令**不得重复 repo 名称**：so, `path:test/unit*.js`, not`path:jquery/test/unit*.js`

```
     repo:jquery/jquery beforeSend path:test/unit*.js

```

将起作用，并[在 JQuery Code 中提供 4 个结果](https://github.com/search?q=repo%3ajquery/jquery%20beforeSend%20path%3atest/unit%2a.js&repo=&langOverride=&start_value=1&type=Code&language=)。

# c# - 多内容页面控制 Windows Phone 7

> ID：11722651
> 
> 赞同：0
> 
> 时间：2012-07-30T13:33:08.767
> 
> 标签：c#, windows-phone-7, contentcontrol, pagecontrol

我在网上搜索了一段时间的 Windows Phone 7 内容控件，其中包含多个页面，我可以通过更改索引来更改内容，例如 PageControl 或 TabControl，但没有选项卡，但是我没有运气。想法是为用户提供内容的多个视图，但我不想使用枢轴，因为它将位于枢轴项目内。它不能滚动。我会给用户视图选项，控件会显示他选择的选项。

有谁知道可以做这种事情的任何类型的控制？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T13:48:20.633

您可以使用**UserControl**并只切换该**单个页面**上的视图。您将不得不尝试自己想要的实现。但是控件应该具有足够的可扩展性，以便在其工作方式上有您自己的自定义实现。

我还建议转到此[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.windows.controls.usercontrol.aspx)并检查 UserControl 的继承。

更具体地说，为了让您更轻松地检查[Caliburn Micro](http://caliburnmicro.codeplex.com/)，以便在单个页面中轻松切换内容。希望能帮助到你！

# java - RemoteViewsFactory 中的 onClickPendingIntent

> ID：11722657
> 
> 赞同：4
> 
> 时间：2012-07-30T13:33:34.853
> 
> 标签：java, android, android-appwidget, android-pendingintent, remoteview

我正在为应用程序开发一个 Android 小部件，问题是我无法`onClickPendingIntent()`在`RemoteViewsFactory`.

我解释一下：我创建了一个`AppWidgetProvider`，它调用了一个扩展，`RemoteViewsService`它调用了一个扩展，用于在我的小部件`RemoteViewsFactory`中完成一个。必须返回所有项目以进行更新或创建它们并显示在小部件上`ListView`。`RemoteViewsFactory`但是对于列表视图的每个项目，我有两种类型的按钮：

1.  一个打开 gmaps/dialer/sms 的按钮（有效）。
2.  一个按钮，它在我的应用程序中调用一个活动并在参数中将其发送到项目的 ID。

问题是第二个按钮，我的解决方案不起作用。

这是问题所在：

因此，这是不起作用的代码：

```
row.setOnClickPendingIntent(R.id.taskButton, onClickPendingIntent);

// Creating an onclick event for the done button
Intent doneIntent = new Intent(mContext, WidgetProvider.class);
doneIntent.putExtra("DONE_TASK", "DOOOOM");

PendingIntent onDoneIntent = PendingIntent.getActivity(mContext, 0, doneIntent, 0);
row.setOnClickPendingIntent(R.id.doneButton, onDoneIntent); 
```

这是完整的`WidgetFactory`课程：

```
import java.util.Collections;
import java.util.Comparator;
import java.util.GregorianCalendar;
import java.util.Vector;

import android.app.PendingIntent;
import android.content.Context;
import android.content.Intent;
import android.graphics.Color;
import android.net.Uri;
import android.view.View;
import android.widget.RemoteViews;
import android.widget.RemoteViewsService;

public class WidgetFactory implements RemoteViewsService.RemoteViewsFactory {

    private Vector<EventInfo> mAllEvents;
    private Context mContext;

    public WidgetFactory(Context ctxt, Intent intent) {
        // Creating member vars
        mContext = ctxt;

        updateAllEventsVector();
    }

    private void updateAllEventsVector() {
        SharedInstances sharedInstances = SharedInstances.get();
        mAllEvents = new Vector<EventInfo>(); 

        if (sharedInstances != null) {
            TaskRequestManager taskManager = sharedInstances
                    .getTaskRequestManager();
            CalendarRequestManager calManager = sharedInstances
                    .getCalendarRequestManager();

            Vector<TaskEvent> tasks = null;
            Vector<CalendarEvent> events = null;

            if (taskManager != null) 
                tasks = taskManager.readTasksToday(mContext);

            if (calManager != null)
                events = calManager.readCalendarEventsToday(mContext);

            if (!tasks.isEmpty())
                mAllEvents.addAll(tasks);

            if (!events.isEmpty())
                mAllEvents.addAll(events);

            mAllEvents = sortByDate(mAllEvents);
        }
    }

    @SuppressWarnings({ "unchecked", "rawtypes" })
    public Vector<EventInfo> sortByDate(Vector<EventInfo> events)
    {

        Vector<EventInfo> sortedEvents = new Vector<EventInfo>();

        for(EventInfo event : events)
        {
            if ((event.getStartTime()+event.getEventDuration()) > GregorianCalendar.getInstance().getTimeInMillis())
                sortedEvents.add(event);
        }

        Collections.sort(events, new Comparator() {
            public int compare(Object arg0, Object arg1)
            {
                EventInfo event0 = (EventInfo)arg0;
                EventInfo event1 = (EventInfo)arg1;

                if (event0.getStartTime()+event0.getEventDuration() > event1.getStartTime()+event1.getEventDuration())
                    return 1;
                else if (event0.getStartTime()+event0.getEventDuration() == event1.getStartTime()+event1.getEventDuration())
                    return 0;
                else if (event0.getStartTime()+event0.getEventDuration() < event1.getStartTime()+event1.getEventDuration())
                    return -1;

                return 0;
            }
        });

        return sortedEvents;
    }

    @Override
    public int getCount() {
        return mAllEvents.size();
    }

    @Override
    public long getItemId(int arg0) {
        return (arg0);
    }

    @Override
    public RemoteViews getLoadingView() {
        return null;
    }

    @Override
    public RemoteViews getViewAt(int position) {

        // Getting item view
        RemoteViews row = new RemoteViews(mContext.getPackageName(),
                R.layout.done_task_item);

        EventInfo eventInfo = mAllEvents.get(position);

        row.setInt(R.id.item_event, "setBackgroundColor", Color.argb(60, Color.red(eventInfo.getColor()), Color.green(eventInfo.getColor()), Color.blue(eventInfo.getColor())));

        // Converts startTime and endTime in string
        String startTime = TimeCursor.getAdaptativeTime(eventInfo.getStartTime());
        String endTime = TimeCursor.getAdaptativeTime((eventInfo
                .getEventDuration() + eventInfo.getStartTime()));

        //Get title
        String title = eventInfo.getTitle();

        // Setting data in the view
        row.setTextViewText(R.id.titleTask, title);
        row.setTextViewText(R.id.periodTask, startTime + " to " + endTime);

        //Check type of event
        if (eventInfo.isTask()) {
            //endDate > GregorianCalendar.getInstance().getTimeInMillis() ) {

            //Check if action exists
            if (eventInfo.getAction() != null) {

                //Get the action title
                String action = eventInfo.getAction()
                        .getTitleText();

                //Create a onClickPendingIntent for taskButton
                PendingIntent onClickPendingIntent = null;

                //Add related button
                if (action.equals("Call"))
                {
                    //Set call icon to taskButton
                    row.setImageViewResource(R.id.taskButton, R.drawable.ic_call_white );

                    //Get numbers from the contact
                    Vector<TelOrEmailItem> tel = eventInfo.getContact().getAllPhoneNumbers(mContext.getResources() , mContext, eventInfo.getAction());

                    // Creating an onclick event for call somebody
                    Intent callIntent = new Intent(Intent.ACTION_CALL, Uri.parse("tel:"+tel.get(0).getMainText()));
                    onClickPendingIntent = PendingIntent.getActivity(
                            mContext, 0, callIntent, 0);

                }
                else if (action.equals("SMS"))
                {
                    //Set sms icon to taskButton
                    row.setImageViewResource(R.id.taskButton, R.drawable.ic_sms_white);
                    //Get numbers from the contact
                    Vector<TelOrEmailItem> tel = eventInfo.getContact().getAllPhoneNumbers(mContext.getResources() , mContext, eventInfo.getAction());

                    // Creating an onclick event for call somebody
                    Intent smsIntent = new Intent(Intent.ACTION_SENDTO, Uri.parse("smsto:"+tel.get(0).getMainText()));
                    onClickPendingIntent = PendingIntent.getActivity(
                            mContext, 0, smsIntent, 0);
                }
                /*else if (action.equals("Chat with"))
                    row.setImageViewResource(R.id.taskButton, R.drawable.ic_chat_white);*/
                else if (action.equals("eMail") || action.equals("Mail") || action.equals("Write to"))
                {
                    //Set email icon to taskButton
                    row.setImageViewResource(R.id.taskButton, R.drawable.ic_email_white);

                    //Get numbers from the contact
                    Vector<TelOrEmailItem> tel = eventInfo.getContact().getAllEMails(mContext, eventInfo.getAction());

                    //Creating an onclick event for email somebody
                    Intent emailIntent = new Intent(Intent.ACTION_SEND);
                    emailIntent.setType("plain/text");

                    emailIntent.putExtra(Intent.EXTRA_EMAIL, 
                                    new String[]{tel.get(0).getMainText()}); 

                    onClickPendingIntent = PendingIntent.getActivity(
                            mContext, 0, emailIntent, 0);
                }
                /*else if (action.equals("Skype"))
                    row.setImageViewResource(R.id.taskButton, R.drawable.ic_skype_white);*/

                //Assign the intent to the taskButton
                row.setOnClickPendingIntent(R.id.taskButton, onClickPendingIntent);

                // Creating an onclick event for the done button
                Intent doneIntent = new Intent(mContext, WidgetProvider.class);

                doneIntent.putExtra("DONE_TASK", "DOOOOM");

                PendingIntent onDoneIntent = PendingIntent.getActivity(mContext, 0, doneIntent, 0);

                row.setOnClickPendingIntent(R.id.doneButton, onDoneIntent);

            }
            else
                row.setViewVisibility(R.id.taskButton, View.GONE); //hidde the taskButton

            return row;

        }
        //Check if it's an event
        else if(eventInfo.isEvent()) {

            //hidde task button (Done)
            row.setViewVisibility(R.id.doneButton, View.GONE);

            CalendarEvent ev = eventInfo.getCalendarEvent();
            String location = ev.getEventLocation();
            if (location != null && !location.isEmpty())
            {
                //Set the locate icon on the taskButton
                row.setImageViewResource(R.id.taskButton, R.drawable.ic_locate_white);

                //Define the place to open the map
                Intent mapIntent = new Intent(Intent.ACTION_VIEW, Uri.parse("geo:0,0?q="+location));
                PendingIntent onMapIntent = PendingIntent.getActivity(
                        mContext, 0, mapIntent, 0);
                row.setOnClickPendingIntent(R.id.taskButton, onMapIntent);
            }
            else
                row.setViewVisibility(R.id.taskButton, View.GONE);

            return row;
        }

        return null;
    }

    @Override
    public int getViewTypeCount() {
        return 1;
    }

    @Override
    public boolean hasStableIds() {
        return (true);
    }

    @Override
    public void onCreate() {
    }

    @Override
    public void onDataSetChanged() {
        // On data changes, update mTasks
        updateAllEventsVector();
    }

    @Override
    public void onDestroy() {
        mAllEvents = null;
    }

} 
```

谢谢你:)

* * *

**编辑：** 耶耶！问题解决与否...

方法`onClickPendingIntent()`现在有效，代码如下：

```
// Creating an onclick event for the done button
Intent onClickDone = new Intent(mContext, DoneTaskActivity.class);
onClickDone.putExtra("TASK_ID", eventInfo.getTaskEvent().getTaskId());
PendingIntent onClickPendingDone = PendingIntent.getActivity(mContext, 0, onClickDone, 0);
row.setOnClickPendingIntent(R.id.doneButton, onClickPendingDone); 
```

但存在另一个问题：`DoneTaskActivity`没有收到额外声明为`TASK_ID`. 在 的`onCreate()`方法中`DoneTaskActivity`，参数中的`Bundle`var 保持为`null`。

帮助 ：（

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-05T05:57:53.453

在小部件中使用列表视图时，您需要使用[setOnClickFillInIntent](https://stuff.mit.edu/afs/sipb/project/android/docs/reference/android/widget/RemoteViews.html#setOnClickFillInIntent%28int,%20android.content.Intent%29)侦听器。来自官方文档；

> 在小部件中使用集合（例如 ListView、StackView 等）时，在单个项目上设置 PendingIntents 的成本非常高，因此是不允许的。相反，可以在集合上设置单个 PendingIntent 模板

在您的 RemoteViewsFactory 中，您可以像这样使用它；

```
public RemoteViews getViewAt(int position) {
    // position will always range from 0 to getCount() - 1.

    // Construct a RemoteViews item based on the app widget item XML file, and set the
    // text based on the position.
    RemoteViews rv = new RemoteViews(mContext.getPackageName(), R.layout.widget_item);
    rv.setTextViewText(R.id.widget_item, mWidgetItems.get(position).text);

    // Next, set a fill-intent, which will be used to fill in the pending intent template
    // that is set on the collection view in StackWidgetProvider.
    Bundle extras = new Bundle();
    extras.putInt(StackWidgetProvider.EXTRA_ITEM, position);
    Intent fillInIntent = new Intent();
    fillInIntent.putExtras(extras);
    // Make it possible to distinguish the individual on-click
    // action of a given item
    rv.setOnClickFillInIntent(R.id.widget_item, fillInIntent);

    ...

    // Return the RemoteViews object.
    return rv;
} 
```

您还需要使用标准的 PendingIntent，因为单个列表项无法设置 PendingIntents，请参阅[AppWidgets](https://developer.android.com/guide/topics/appwidgets/index.html)上的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-15T17:40:30.743

'putExtra' 的第一个参数必须包含一个包前缀。如果您的应用程序包名称为“com.test”，则应输入“com.test.TASK_ID”。接收部分同名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-16T21:49:36.233

尝试添加这个：

```
// When intents are compared, the extras are ignored, so we need to embed the extras
// into the data so that the extras will not be ignored.
onClickDone.setData(Uri.parse(onClickDone.toUri(Intent.URI_INTENT_SCHEME))); 
```

前

```
row.setOnClickPendingIntent(R.id.doneButton, onClickPendingDone); 
```

# ipad - MPMoviePlayerController 不会在装有 iOS 5 的 iPad 1 上循环播放

> ID：11722659
> 
> 赞同：1
> 
> 时间：2012-07-30T13:33:41.060
> 
> 标签：ipad, ios5, mpmovieplayercontroller

我有一部短片可以在我的视图背景中循环播放。我使用 MPMoviePlayerController 播放电影。repeatMode 设置为 MPMovieRepeatModeOne，这在 iPad 2、3 和模拟器上运行良好。然而，在 iPad 1 上，影片循环播放一次并在第二次播放后立即停止。该项目是 iOS 5 w/o ARC（从 GM 测试到 5.1.1）。

```
- (void)loadVideo {
    NSString *urlStr = [[NSBundle mainBundle] pathForResource:@"movieFileName.m4v" ofType:nil];
    self.videoPlayer = [[MPMoviePlayerController alloc] initWithContentURL:[NSURL fileURLWithPath:urlStr]];
    self.videoPlayer.controlStyle = MPMovieControlStyleNone;
    self.videoPlayer.scalingMode = MPMovieScalingModeFill;
    self.videoPlayer.repeatMode = MPMovieRepeatModeOne;
    self.videoPlayer.view.userInteractionEnabled = NO;
    [self.videoPlayer.view setFrame:self.movieContainer.bounds];
    [self.movieContainer addSubview:self.videoPlayer.view];
} 
```

如何让电影在 iPad 1 上循环播放？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T17:36:50.643

尝试了很多之后，我终于找到了解决这个问题的方法：

在注册更改播放状态 MPMoviePlayerPlaybackStateDidChangeNotification 的通知后，影片会无限循环，并且在 iPad 1 上第二次播放后不会停止。请记住，此行为不会发生在 iPad 2、3 或模拟器上。

为通知执行的选择器不能为空。只需分配一个布尔值或其他东西。上面的扩展代码将是：

```
- (void)loadVideo {
    // Create the controller
    NSString *urlStr = [[NSBundle mainBundle] pathForResource:@"movieFileName.m4v" ofType:nil];
    NSURL *url = [NSURL fileURLWithPath:urlStr];
    self.videoPlayer = [[MPMoviePlayerController alloc] initWithContentURL:url];

    // Configure the controller
    self.videoPlayer.controlStyle = MPMovieControlStyleNone;
    self.videoPlayer.scalingMode = MPMovieScalingModeFill;
    self.videoPlayer.repeatMode = MPMovieRepeatModeOne;
    self.videoPlayer.view.userInteractionEnabled = NO;
    [self.videoPlayer.view setFrame:self.movieContainer.bounds];

    // Register for notifications
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(moviePlayerNotification:) name:MPMoviePlayerPlaybackStateDidChangeNotification object:videoPlayer];
    self.listeningToMoviePlayerNotifications = YES;

    // Add its view to the hierarchy
    [self.movieContainer addSubview:self.videoPlayer.view];
}

- (void)moviePlayerNotification:(NSDictionary *)userInfo {
    // Do anything here, for example re-assign the listeningToMoviePlayerNotification-BOOL
    self.listeningToMoviePlayerNotifications = YES;
} 
```

# installation - 如何安装 expr lib java

> ID：11722662
> 
> 赞同：1
> 
> 时间：2012-07-30T13:33:42.747
> 
> 标签：installation, expression, java

如何 [在自述](http://github.com/darius/expr#installing-it)文件中安装 java 的 Expr 库（关于评估数学表达式）我可以理解框架“要安装，请将 expr.jar 放入您的类路径中。（如果您下载了，您需要先运行 make 创建它这个来自 GitHub。）要试用它，请将 expr 目录放在你的类路径中。”

我如何运行“make”？请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T14:53:31.800

通过从[这里](http://gnuwin32.sourceforge.net/packages/make.htm)获取 make 来安装它。

Make 是一个命令行程序。打开终端，键入 cd C:\some_path\expr 以进入名为“makefile”的文件所在的目录。然后只需键入“make”。如果您设置了其他所有内容，它应该可以编译（它还需要 javac，所以如果您没有它，请安装它）。

# r - randomForest 的重要性只包含 MeanDecreaseGini

> ID：11722663
> 
> 赞同：3
> 
> 时间：2012-07-30T13:33:48.883
> 
> 标签：r, data-mining, random-forest

我有两个脚本，它们都在**R**中生成随机森林，据我所知，它们具有相同的输入，尽管我的问题表明情况并非如此。其中一个返回一个重要性表，其中包含

`row.names importance.blue importance.red importance.MeanDecreaseAccuracy importance.MeanDecreaseGini`

另一个重要性表只包含

```
row.names   MeanDecreaseGini 
```

这两个森林之间有什么区别，更重要的是，考虑到我认为相同的输入，是什么导致了差异？

（脚本太大，无法粘贴在这里，但两者都试图根据一堆连续变量来预测一个因素）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T14:06:12.113

randomForest 的帮助页面告诉我们，重要性（用于分类时）是一个具有 nclass + 2 列的矩阵。第一个 nclass 列是特定于类的度量，计算为准确度的平均下降。nclass + 1st 列是所有类的平均精度下降。最后一列是基尼指数的平均下降。如果importance=FALSE，最后一个度量仍然作为向量返回。

因此，在我看来，您调用 randomForest 一次，重要性 = TRUE，一次调用重要性 = FALSE。

# ruby-on-rails - Rails 2.3.11 RESTful 路由未从表单调用创建操作

> ID：11722666
> 
> 赞同：0
> 
> 时间：2012-07-30T13:34:05.310
> 
> 标签：ruby-on-rails, rails-routing

我有一个名为“Notes”的控制器，它的关联模型是 Note，带有一个名为“note”的文本字段（我知道）。

我在 new.html.erb 视图中有一个非常简单的表单：

```
<% form_for(@note) do |f| %>
    <p><%= f.error_messages %>&nbsp;</p>
    <h2 class="productList"><label for="">Note: </label>
    <%= f.text_area :note, :cols => "50", :rows => "10" %></h2>
    <br />
    <p><%= f.submit "Create" %></p>
<% end %> 
```

但是，单击“提交”按钮后，被调用的操作来自完全不同的控制器：

```
Processing OtherController#add_note (for 127.0.0.1 at 2012-07-30 09:04:42) [POST] 
```

请注意，尽管控制器被设置为资源，但甚至没有在 routes.rb 中定义此操作。

我在 routes.rb 中的“notes”行如下所示：

```
map.resources :notes, :collection => { :note_list => :get, :get_json_list => :get }, :member => { :applications => :get, :replace => :get } 
```

并且“rake routes”为控制器产生这些行：

```
get_json_list_notes GET    /notes/get_json_list(.:format) {:controller=>"notes", :action=>"get_json_list"}
note_list_notes     GET    /notes/note_list(.:format) {:controller=>"notes", :action=>"note_list"}
notes               GET    /notes(.:format)  {:controller=>"notes", :action=>"index"}
                    POST   /notes(.:format)  {:controller=>"notes", :action=>"create"}
new_note            GET    /notes/new(.:format)  {:controller=>"notes", :action=>"new"}
edit_note           GET    /notes/:id/edit(.:format) {:controller=>"notes", :action=>"edit"}
replace_note        GET    /notes/:id/replace(.:format) {:controller=>"notes", :action=>"replace"}
applications_note   GET    /notes/:id/applications(.:format) {:controller=>"notes", :action=>"applications"}
note                GET    /notes/:id(.:format) {:controller=>"notes", :action=>"show"}
                    PUT    /notes/:id(.:format) {:controller=>"notes", :action=>"update"}
                    DELETE /notes/:id(.:format) {:controller=>"notes", :action=>"destroy"} 
```

我的 Javascript 中的表单或控件也没有任何绑定。什么会使它调用错误的控制器和动作？

更新 - 这是 form_for 标记的输出：

```
<form id="new_note" class="new_note" method="post" action="/notes">
  <p>&nbsp;</p>
  <h2 class="productList">
    <label for="">Note: </label>
    <textarea id="note_text" rows="10" name="note_text" cols="50"></textarea>
  </h2>
  <br>
  <p>
    <input id="note_submit" type="submit" value="Create" name="commit">
  </p>
</form> 
```

更新 2 - 表单正在传递“Note.new”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T14:41:32.653

我是个彻头彻尾的白痴。我有一个 Javascript 侦听器绑定到另一个页面上的“note_submit”。

# jquery - Canvas Jquery添加链接a href

> ID：11722673
> 
> 赞同：0
> 
> 时间：2012-07-30T13:34:29.633
> 
> 标签：jquery, html5-canvas

......

```
var ctx = canvas.getContext("2d")

ctx.clearRect(pt.x-w/2, pt.y-7, w,14)

ctx.font = "bold 11px Arial"

ctx.textAlign = "center"

ctx.fillStyle = "#888888"

ctx.fillText(label||"", pt.x, pt.y+4) 
```

......

如何向此文本添加更多属性，例如单击打开 url、悬停时执行某些操作等

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T13:40:04.287

组成画布的部分不是 HTML 元素。您不能将事件附加到它们，并且确实没有任何一个组件的单独记忆；一旦您将其提交到画布上，它就会与其他所有内容合并为一张图片。

解决方法是自己记住事物所在位置的坐标，然后，当在画布上注册单击时，手动解释它的含义。

这是不平凡的，并且有许多库可以自动化这种事情。[看看**KineticJS**](http://www.kineticjs.com/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T21:30:16.083

除了 Utkanos 所说，您还可以`<a href=""></a>`使用 css 覆盖 html 链接 ( ) 元素是定位和样式。

# java - 带首字母的成员变量的命名约定

> ID：11722677
> 
> 赞同：7
> 
> 时间：2012-07-30T13:34:47.897
> 
> 标签：java, naming-conventions, member-variables

我想知道有人会如何命名以首字母而不是单词开头的成员字段。

```
public class MyClass {

    // I know this is how it is for a member field with words.
    private String myString;

    // What about this String? It is representing the term "RV Scale" which is 
    // short for "Reclose Volts Scale."
    private String RVScale;

} 
```

我知道我可以只使用`private String recloseVoltsScale`，但我宁愿保留它 RVScale。如果有人知道它是否应该是`rVScale`或`RVScale`其他东西，我会很感激这些信息。

编辑 ：

另外，像这样的成员字段呢...

```
private int RV; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T13:42:28.290

根据 java**命名约定**，成员字段应该以混合大小写开头，**所以**它应该是`rvScale`，成员字段`RV`应该是这样的`private int rv;`

使用正确的字母大小写是遵循命名约定的关键：

**小写**是一个单词中的所有字母都没有大写（例如，while、if、mypackage）。

**大写**是单词中的所有字母都用大写字母书写的地方。当名称中有两个以上的单词时，使用下划线将它们分开（例如，MAX_HOURS、FIRST_DAY_OF_WEEK）。

**CamelCase**（也称为Upper CamelCase）是每个新词都以大写字母开头的地方（例如，CamelCase、CustomerAccount、PlayingCard）。

**混合大小写**（也称为Lower CamelCase）与CamelCase 相同，只是名称的第一个字母是小写的（例如，hasChildren、customerFirstName、customerLastName）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T13:49:43.100

你应该把它拼出来。

话虽如此，我会保留它`rvScale`。

请记住，唯一*不*应该使用的是，`rVScale`因为这可能会导致与内省混淆。

`getRVScale`这种情况会生成名为and的getter 和 setter `setRVScale`，但使用 bean 自省来查找与这些关联的属性，会搜索名为 RVScale 的属性，但该属性并不存在。这是因为在搜索对应的属性时，get/set后面的第一个字母是小写的，除非有两个相邻的大写字母（RV），这样的话，名字就保持原样，生产 RVScale。

就像这里解释的那样：

[Javabean 约定 - 属性 gId 的方法命名](https://stackoverflow.com/questions/11114147/javabean-convention-method-naming-for-property-gid)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T13:51:24.137

除非需要，否则不要使用快捷方式。即使它们是私有的（或者可能因为它们是私有的），命名变量也足够清楚。如果潜在的代码阅读器不将 rv 理解为 Reclose Volts 之类的快捷方式，请不要使用快捷方式。如果您需要提供提示，它实际上是快捷方式，您暗示他应该在某处查找它是什么意思。他会在哪里找到它？如果在评论中，则您的成员名称错误，因为您必须解释名称的含义。除非您的应用程序完全是关于重合电压。我建议遵循 java 约定，因为它们确实有理由出现。

# ruby-on-rails - Redmine 插件仅出现在某些项目菜单中

> ID：11722678
> 
> 赞同：4
> 
> 时间：2012-07-30T13:34:47.830
> 
> 标签：ruby-on-rails, redmine, redmine-plugins

我让我的 Redmine (v2.0.3) 工作。它现在显示在每个项目的项目菜单中，但我不知道如何只为选定的项目激活它。例如，仅适用于项目自定义字段设置为特定值的项目。我创建了自定义字段并确定了数据的存储位置。但是我如何告诉 Redmine 何时在项目菜单中显示插件？

我确实遇到了使用 :if 来指定 proc 的可能性，但 proc 不允许我调用我的插件创建模型之一的方法。例如，我创建了一个名为 Param 的模型，我想调用方法 Param.check_to_display。但显示错误信息

```
ActionView::Template::Error (undefined method 'check_to_display' for Param(....):Class) 
```

我的 init.rb 说：

```
menu :project_menu, :info, {:controller=>'info', :action=>'index'}, :caption=>'Ticker', :after=>:activity, :param=>:project_id, :if=>Proc.new{||Param.check_to_display()} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T12:39:09.083

多么尴尬，一个简单的错误。我将方法 check_to_display 定义如下：

```
def check_to_display 
```

显然应该是

```
def self.check_to_display 
```

对于那些对总代码感兴趣的人：

```
class Param < ActiveRecord::Base
  unloadable

  def self.check_to_display(p)
    cf = CustomField.where("type='ProjectCustomField' and name='THE_FLAG'").first
    return false if cf.nil?
    return false if p.nil?
    cv = CustomValue.where("customized_type='Project' and customized_id=? and custom_field_id=?",p.id,cf.id).first
    return false if cv.nil?
    return false if cv.value.nil?
    cv.value.strip!
    return cv.value != ""
  end
end 
```

不要忘记，init.rb 应该如下所示：

```
menu :project_menu, :info, {:controller=>'info', :action=>'index'}, :caption=>'Ticker', :after=>:activity, :param=>:project_id, :if=>Proc.new{|p|Param.check_to_display(p)} 
```

# c - 使用 find -exec 时出现 exec() 错误

> ID：11722679
> 
> 赞同：3
> 
> 时间：2012-07-30T13:34:50.833
> 
> 标签：c, find, exec

我必须使用脚本找到一个名为*Test*的可执行文件，该可执行文件将路径作为参数，并执行它。我用这条线做这个：

```
find -name Test -exec {} path \; 
```

在*测试*中，我得到了一个 execl：

```
 execl("./Test1","Test1",(char*)0);
    perror("Exec failed");
    exit(EXIT_FAILURE); 
```

其中*Test1与**Test*位于同一目录中。“手动”执行*测试* 一切正常，但使用上面写的行我有一个 *Exec failed: No such file or directory*错误。

怎么了 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T13:47:00.433

find`Test`从您正在执行的目录中执行`find`。如果你可以更改Test的代码，那么把Test1的绝对路径：

```
execl("/home/myuser/some/path/Test1","Test1",(char*)0);
perror("Exec failed");
exit(EXIT_FAILURE); 
```

或者您可以使用`-execdir`而不是`-exec`：

```
find -name Test -execdir {} path \; 
```

从查找手册页：

> **-execdir**：与 -exec 类似，但指定的命令是从包含匹配文件的子目录运行的，通常不是您开始查找的目录

# asp.net - asp.net中下拉列表的酷样式？

> ID：11722682
> 
> 赞同：6
> 
> 时间：2012-07-30T13:34:59.197
> 
> 标签：asp.net, css, drop-down-menu

我想知道我们是否可以使用 css/styling 给默认下拉列表一个酷而优雅的外观。我不想使用 jquery/jscript，因为我不熟悉这些。可以使用 css/html 样式来完成吗？

```
I want it to look something like this : 
```

![在此处输入图像描述](../Images/5e7d05018e51e6b1aaa4c21202c2d0cf.png)

或者

![在此处输入图像描述](../Images/81d51b3c8c23389a9119cb51b0c6589f.png)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-30T13:39:24.520

你当然可以。

我建议查看[http://bavotasan.com/2011/style-select-box-using-only-css/](http://bavotasan.com/2011/style-select-box-using-only-css/)

它实际上只是您的标准命令的混合：高度、宽度、背景、颜色、边框。全部放在一起让它更漂亮。我不确定是否像您的示例 2 中那样抵消它，但示例 1 很容易。

# c# - Keys枚举中的感叹号

> ID：11722683
> 
> 赞同：3
> 
> 时间：2012-07-30T13:35:01.317
> 
> 标签：c#, winapi, enums

里面有`Keys`枚举`.NET` `(System.Windows.Forms.Keys)`，但是找不到`Exclamation`mark(!)和冒号(:)，怎么办？或者有没有办法自动将字母转换为`Keys`枚举，没有`Enum.TryParse`？感谢您的帮助，粉丝。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T13:37:25.750

它们属于喜欢等`Oem`类别。`Keys``Keys.Oem1`

你必须检查特殊的按键，比如 Shift 来查找你的角色。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T13:38:05.693

冒号 (:) 它是两个键的组合，具体取决于配置键盘。所以也许你应该同时检测到按下的组合。同上！：Shift + 1

# iphone - NSURLConnection 证书

> ID：11722684
> 
> 赞同：1
> 
> 时间：2012-07-30T13:35:06.427
> 
> 标签：iphone, objective-c, ios, macos, ipad

如果我在 mobileconfig 中安装了 .pfx 证书，我应该在服务器要求时做些什么，还是系统会自动处理它？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T14:25:09.567

我不是这个主题的专家，但是：mobileconfig 支持 pfx 证书，如此[处](http://manuals.info.apple.com/en_us/enterprise_deployment_guide.pdf)所述，但我相信您必须实现 NSURLConnection 的委托才能完成握手，即

```
- (void)connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge 
```

[正如这篇文章](https://stackoverflow.com/questions/3749429/how-to-use-client-certificate-authentication-in-ios-app)中已经解释的那样。

然后你可以从[这篇文章](https://stackoverflow.com/questions/11718305/nsurlauthenticationmethodclientcertificate)中找到一些有用的代码片段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T18:05:29.357

您应该声明 NSURLConnection 代表 `connection:didReceiveData`： `connection:didReceiveResponse`和 `connectionDidFinishLoading`。

# eclipse - open eclipse perspective in eclipse from command line

> ID：11722687
> 
> 赞同：1
> 
> 时间：2012-07-30T13:35:21.130
> 
> 标签：eclipse, plugins, eclipse-rcp

I want to open eclipse application and pass perspective ID in it through command line.

so that eclipse opens and show the perspective

How can I do that ?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T18:06:02.130

I believe you can just add a command line switch of **-perspective {name}**.

[You can look at a command line switch reference here](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/misc/runtime-options.html).

# hibernate - Hibernate 无法在表中输入外键值

> ID：11722688
> 
> 赞同：0
> 
> 时间：2012-07-30T13:35:21.200
> 
> 标签：hibernate, nhibernate-mapping, hibernate-annotations

下面是我试图在我的代码中实现但无法继续进行的场景。由于这个问题，我在过去 3 天卡住了

表 A、B、C
表 A {
colmnn PKA
列测试；

```
@OneToMany
@Cascade( { org.hibernate.annotations.CascadeType.ALL, org.hibernate.annotations.CascadeType.DELETE_ORPHAN })
@JoinColumn(name = "PKA")
private Collection<TableC> tablec= new ArrayList<TableC>(); 
```

}

表B{
列PKB
列test2；
`@OneToMany(mappedBy = "tablec",fetch=FetchType.LAZY) @Cascade( { org.hibernate.annotations.CascadeType.ALL,org.hibernate.annotations.CascadeType.DELETE_ORPHAN}) private List tableC= new ArrayList(); //List is used only for Hibernate mapping`

}

表 c{
列 PKC

@ManyToOne @JoinColumn(name = "PKA" ) private TableA tableA;

```
@ManyToOne(fetch = FetchType.LAZY)
@JoinColumn(name = "PKB",nullable = false,unique=true)
private TableB tableb; 
```

}

所以表C和表A是多对一的关系，和表B是一对一的关系（通过唯一实现的就是“真”）

现在我的问题是，当我插入数据时，休眠首先插入表 B 数据，然后它试图插入表 c 数据并抛出错误不能在非空列中插入 Null。如果我将表 C 中的 PkA 设置为非空，则它正在正确插入所有数据。在休眠日志中，它正在按以下顺序触发 sql 语句
表 B 表 C 表 A。表 C 插入查询应在最后执行。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T15:29:16.437

每种关联都在 hibernate 文档中进行了描述，并附有示例。您应该阅读文档。

无论如何，这是您的映射存在的问题。

如果 B 和 C 之间存在一对一关联，则要使用的注释是`@OneToOne`和`@OneToOne`。不是`@OneToMany`和`@ManyToOne`。当然，你应该有一个类型`TableC`的`TableB`字段而不是一个类型的字段`List<TableC>`。

当您具有双向 OneToOne 或 OneToMany 关联时，其表中包含外键的一侧必须是所有者一侧。另一面必须是插入面。在反面，必须有一个`mappedBy`属性，并且没有`JoinColumn`注释。所以，在 TableA 中，与 TableC 的关联应该这样定义：

```
@OneToMany(mappedBy = "tableA")
@Cascade( { org.hibernate.annotations.CascadeType.ALL,
            org.hibernate.annotations.CascadeType.DELETE_ORPHAN })
private Collection<TableC> tablec= new ArrayList<TableC>(); 
```

# javascript - 输入文本和按钮字段在 Firefox 中不起作用

> ID：11722689
> 
> 赞同：0
> 
> 时间：2012-07-30T13:35:22.560
> 
> 标签：javascript, jquery, jquery-ui, firefox, widget

我正在开发一些使用 JQUERY 小部件的应用程序。在那个小部件中，有一些输入字段，如文本、文本区域和按钮。我只能通过 TAB 访问这些字段，但是直接单击鼠标无法完成。这个应用程序在 Chrome 上运行良好。带有这些字段的简单 html 可以工作，但是当我在 js 文件中添加这些字段，然后在其他 js 文件中调用这些文件时，这些字段在 Firefox 中不起作用。

这是.js文件：

```
var AddNewDepartment = "<br />\
<form>\
<table class='AddNewDepartment-table'>\
<tr>\
<td>\
Department Name:<span style='color: red'>*</span>&nbsp;\
<input type='text' name='departmentName' id='departmentName' class='expanded-input-text' />\
<input type='button' name='save' id='save' onclick='createDepartment()' Value='Save' class='newDepartment-submit' />\
<input type='button' name='cancel' Value='Cancel' class='newDepartment-submit'  />\
</td>\
</tr>\
</table>\
</form>\
"; 
```

拜托，我需要帮助来解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T13:37:13.657

从您的帖子看来，您正在动态地将表单附加到 DOM，即在页面加载之后。因为您需要为他们处理委托事件。

您可以尝试`.on()`以下方法：

```
$(document).on('click', 'form AddNewDepartment-table input,form AddNewDepartment-table textarea', function() {

 // your code

}); 
```

对于委托事件处理，语法`.on()`是：

```
$(StaticParent).on( eventName, targets, handlerFunction ); 
```

这里`StaticParent`指的是非动态的DOM元素，在页面加载时属于DOM。`eventName`对于多个事件绑定，可以用空格分隔。

# android - (Android) 我在使用 web 服务的代码中收到 ClassCastException

> ID：11722693
> 
> 赞同：0
> 
> 时间：2012-07-30T13:35:33.330
> 
> 标签：android, web-services, adapter, classcastexception

我`ClassCastException`在这一行进入 Logcat：`Standort standort = (Standort) response;`

从这段代码：

```
private void loadLocationMenuList() {
    ServiceProxy.createWebServiceTask(getActivity(), new RemoteCallListener() {

            @Override
        public void onRemoteCallError(String response) {
            // TODO Auto-generated method stub

       }

        @Override
        public void onRemoteCallComplete(Object response) {
            Log.d("debug", "response is = "+response+"\t"+response.getClass()); 
            Standort standort =  (Standort) response;
            locationMenuAdapter = new LocationMenuAdapter(StandorteFragment.this, standort);
            menuItemListLoc.setAdapter(locationMenuAdapter);
        }

        @Override
        public void onNoInternetError() {
            // TODO Auto-generated method stub
        }

        @Override
        public void onNoAccess() {
            // TODO Auto-generated method stub
        }
    }, true).invokeGetStandorte();
} 
```

服务代理：

```
public class ServiceProxy {

    private static final boolean useFakeService = true;

    public static IWebServiceTask createWebServiceTask(Context ctx, RemoteCallListener listener, boolean hasInternet) {
        //if (useFakeService) {
        return new FakeService(ctx, listener);
    }
} 
```

假服务：

```
public class FakeService extends CallWebServiceTask {

    private final boolean hasInternet = true;

    public FakeService(Context ctx, RemoteCallListener listener) {
        super(ctx, listener);
    }

    @Override
    protected WebEntityInterface doInBackground(CallWebServiceTask.InputParam... params) {
        System.currentTimeMillis();
        WebEntityInterface result = null;
        CallWebServiceTask.InputParam param = null;
        param = params[0];
        if (param.url.startsWith(Constants.invokeGetStandorte)) {
            return super.doInBackground(params);
        }
        try {
            if (hasInternet) {
                if (param.CALL_TYPE == InputParam.GET) {
                    result = sendGET(param);
                } else if (param.CALL_TYPE == InputParam.POST) {
                    result = sendPOST(param);
                }
            } else {
                LogService.log("CALL WEBSERVICE TASK", " NO INTERNET!!!!");
                result = new WebEntity(1, "No internet connection!");
            }
        } catch (UnknownHostException e) {
            LogService.err("WEB-SERVER-ERROR", e.getMessage(), e, LogService.LOG_LEVEL_FULL);
            result = new WebEntity(1, "No internet connection!");
        } catch (SocketException e) {
            LogService.err("WEB-SERVER-ERROR", e.getMessage(), e, LogService.LOG_LEVEL_FULL);
            result = new WebEntity(1, "No network connection!");
        } catch (Throwable e) {
            LogService.err("WEB-SERVER-ERROR", e.getMessage(), e, LogService.LOG_LEVEL_FULL);
            result = new WebEntity(2, "Network connection error!");
        }
        return result;
    }

    @Override
    public WebEntityInterface sendGET(CallWebServiceTask.InputParam param) throws Exception {
        if (param.url.startsWith(Constants.invokeGetStandorte)) {
            return super.sendGET(param);
        }
        SessionToken.Sessiontoken = "dfasmdfnasdfb";
        System.out.println("-----GET[" + param.clazz + "] : " + param.url);
        WebEntityInterface result = null;
        Populator populator = new Populator(new RandomDriver());
        result = populator.fill(param.clazz);
        result.setSuccess(true);
        System.out.println("------------RESULT :" + result);
        return result;
    }

    @Override
    public WebEntityInterface sendPOST(CallWebServiceTask.InputParam param) throws Exception {
        if (param.url.startsWith(Constants.invokeGetStandorte)) {
            return super.sendPOST(param);
        }
        SessionToken.Sessiontoken = "dfasmdfnasdfb";
        System.out.println("-----POST : " + param.url);
        WebEntityInterface result = null;
        Populator populator = new Populator(new RandomDriver());
        result = populator.fill(param.clazz);
        result.setSuccess(true);
        System.out.println("------------RESULT :" + result);
        return result;
    }

} 
```

我的 LocationMenuAdapter：

```
public class LocationMenuAdapter extends BaseAdapter {
    private LayoutInflater mInflater;
    private AQuery aQuery;
    private Standort standort;
    private StandorteFragment standorteFragment;

    public LocationMenuAdapter(StandorteFragment standorteFragment, Standort standort) {
        this.standorteFragment  =standorteFragment;
        this.standort  =standort;
        this.aQuery = standorteFragment.aQuery;  
        mInflater = LayoutInflater.from(standorteFragment.getActivity());
    }

    public int getCount() {
        return standort.size();
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public StandortItem getEKUrl(int i) {
        return standort.get(i);
    }

    public View getView(int position, View convertView, ViewGroup parent) { 
        ListContent holder;
        StandortItem standortItem = getEKUrl(position);
        if (convertView == null) {
            convertView = mInflater.inflate(R.layout.listviewinflate, null);
            holder = new ListContent();
            holder.text = (TextView) convertView.findViewById(R.id.TextView01);
            convertView.setTag(holder);
        } else {
            holder = (ListContent) convertView.getTag();
        }

        holder.text.setText(standortItem.Name);
        return convertView;
    }

    class ListContent {
        TextView text;

    }
} 
```

最后但并非最不重要的：WebEntity：

```
public class Standort extends WebEntity {
    public static int IDtest;
    public ArrayList<StandortItem> standort = new ArrayList<StandortItem>();

    public void add(StandortItem standortItem) {
        standort.add(standortItem);
    }

    public int size() {
        return standort.size();
    }

    public StandortItem get(int i) {
        return standort.get(i);
    }

    public class StandortItem implements Serializable{
        public Integer ID;
        public String Name;
        public String Strasse;
        public String Email;
        public Integer PLZ;
        public String Ort;
        public String Telefon;
        public String Fax;
        public String Oeffnungszeiten;
        public Boolean Bar;
        public Boolean BusinessLunch;
        public Boolean Parkplatz;
        public Boolean Raucher;
        public String GooglemapsStrasse;

        public StandortItem(Integer ID, String Name,String Strasse, String Email,Integer PLZ, String Ort,String Telefon, String Fax,String Oeffnungszeiten, Boolean Bar,Boolean BusinessLunch, Boolean Parkplatz,Boolean Raucher,String GooglemapsStrasse) {
            super();
            this.ID = ID;
            this.Name = Name;
            this.Strasse = Strasse;
            this.Email = Email;
            this.PLZ = PLZ;
            this.Ort = Ort;
            this.Telefon = Telefon;
            this.Fax = Fax;
            this.Oeffnungszeiten = Oeffnungszeiten;
            this.Bar = Bar;
            this.BusinessLunch = BusinessLunch;
            this.Parkplatz = Parkplatz;
            this.Raucher = Raucher;
            this.GooglemapsStrasse = GooglemapsStrasse;
            IDtest=ID;
        }

        public String toString() {
            return "Standort [ID=" + ID + ", Name=" + Name + ", Strasse=" + Strasse + ", Email=" + Email + ", PLZ=" + PLZ + ", Ort=" + Ort + ", Telefon=" + Telefon + ", Fax=" + Fax + ", Oeffnungszeiten=" + Oeffnungszeiten + ", Bar=" + Bar + ", BusinessLunch=" + BusinessLunch + ", Parkplatz=" + Parkplatz + ", Raucher=" + Raucher + ",GooglemapsStrasse=" + GooglemapsStrasse + "]";
        }
    }
} 
```

"Log.d("debug", "response is = "+response+"\t"+response.getClass())" 行说明如下：

```
 07-30 16:48:22.031: D/debug(25496): response is = [WebEntity [success=false, errorCode=0, errorMessage=null], WebEntity [success=false, errorCode=0, errorMessage=null], WebEntity [success=false, errorCode=0, errorMessage=null], WebEntity [success=false, errorCode=0, errorMessage=null], WebEntity [success=false, errorCode=0, errorMessage=null], WebEntity [success=false, errorCode=0, errorMessage=null], WebEntity [success=false, errorCode=0, errorMessage=null], WebEntity [success=false, errorCode=0, errorMessage=null], WebEntity [success=false, errorCode=0, errorMessage=null], WebEntity [success=false, errorCode=0, errorMessage=null], WebEntity [success=false, errorCode=0, errorMessage=null], WebEntity [success=false, errorCode=0, errorMessage=null], WebEntity [success=false, errorCode=0, errorMessage=null], WebEntity [success=false, errorCode=0, errorMessage=null], WebEntity [success=false, errorCode=0, errorMessage=null], WebEntity [success=false, errorCode=0, errorMessage=null], WebEntity [success=false, errorCode=0, errorMessage=null], WebEntity [success=false, errorCode=0, errorMessage=null], WebEntity [success=false, errorCode=0, errorMessage=null], WebEntity [success=false, errorCode=0, errorMessage=null], WebEntity [success=false, errorCode=0, errorMessage=null], WebEntity [success=false, errorCode=0, errorMessage=null]]   class com.weinco.webservice.entity.Standorts 
```

标准类：

```
public class Standorts extends WebListEntity<Standort> {
    public Standorts() {
        super();
    }

} 
```

PS：我并没有真正使用Web服务，所以我是这方面的初学者，所以可能有部分代码写得不太正确，如果你也能提供帮助，我会非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T14:29:39.477

所以我猜是这样的？我真的不知道你想在这里做什么......

```
 @Override
    public void onRemoteCallComplete(Object response) {
        Log.d("debug", "response is = "+response+"\t"+response.getClass()); 
        Standorts standorts =  (Standorts) response;

        //to get individual Standort objects from this WebListEntity<Standort> wrapper you need

        //get WebEntity from standorts

        //do whatever you need to do to make a Standort object out of that.

        Standort standort = new Standort();
        standort.restoreFromWebEntity(theWebEntityYouGotInStepOne);

        locationMenuAdapter = new LocationMenuAdapter(StandorteFragment.this, standort);
        menuItemListLoc.setAdapter(locationMenuAdapter);
        }
    } 
```

但你得到的回应肯定是 Standorts。

看看这个 WebListEntity 类......它不是你发布的 WebEntity。换句话说，除了这个函数之外，你发布的所有这些代码都有点没用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T11:37:12.707

我设法通过使用 weblistentity 类 Standorts 作为适配器膨胀 webentities (Standort) 的列表来使其工作。

# displaytag - display:footer 显示在表格的顶部

> ID：11722694
> 
> 赞同：0
> 
> 时间：2012-07-30T13:35:35.353
> 
> 标签：displaytag

我使用 displaytag 粘贴我的表格代码。我的问题是[页脚](http://displaytag.sourceforge.net/11/displaytag/tagreference.html#footer)显示在表格的顶部，即使使用 css 我也无法将其放在底部。

我在桌子周围使用表格和 Spring web flow。会不会引起一些冲突？？如果是这样，我该如何解决？任何帮助都会非常感激。

```
<form:form method="POST" id="tableForm">
    <display:table id="row" name="displayTagValueList" requestURI="overview?_eventId=tableAction">
        <display:setProperty name="paging.banner.item_name" value="Thread"/>
        <display:setProperty name="paging.banner.items_name" value="Threads"/>
        <display:setProperty name="paging.banner.group_size" value="5"/>
        <display:setProperty name="basic.msg.empty_list" value="No threads found."/>

        <display:setProperty name="paging.banner.full" value='<span class="pagelinks"><a href="{1}">&lt;&lt;First</a>&nbsp;&nbsp;<a href="{2}">&lt;Prev</a>&nbsp;&nbsp;{0}&nbsp;&nbsp;<a href="{3}">Next&gt;</a>&nbsp;&nbsp;<a href="{4}">Last&gt;&gt;</a></span>'/>
        <display:setProperty name="paging.banner.first" value='<span class="pagelinks">&lt;&lt;First&nbsp;&nbsp;&lt;Prev&nbsp;&nbsp;{0}&nbsp;&nbsp;<a href="{3}">Next&gt;</a>&nbsp;&nbsp;<a href="{4}">Last&gt;&gt;</a></span>'/>
        <display:setProperty name="paging.banner.last" value='<span class="pagelinks"><a href="{1}">&lt;&lt;First</a>&nbsp;&nbsp;<a href="{2}">&lt;Prev</a>&nbsp;&nbsp;{0}&nbsp;&nbsp;Next&gt;&nbsp;&nbsp;Last&gt;&gt;</span>'/>

        <display:column title="">
            <form:checkbox path="chosenIds" value="${row.id}"/>
        </display:column>

        <display:column title="Some title" >
            <c:out value="${row.someValue}"/>
        </display:column>

        <display:footer>
            <div class="tableFooter" >
                <input type='checkbox' name='checkall' onclick='checkedAll(tableForm);'>  select all
                <input type="submit" name="_eventId_someTransitions" value="Send" />
            </div>
        </display:footer>
    </display:table>
    </form:form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T08:57:34.737

显然， display:footer 标签必须在里面包含一个表格。`<div>`标签不包含在`tfoot`. 所以解决方案是

```
<display:footer>
                <tr>
                    <td class="footerColumn"><input type='checkbox' name='checkall' onclick='checkedAll(tableForm);'>  select all
                    <td class="footerColumn"><input type="submit" name="_eventId_someTransitions" value="Send" /></td>
                    <td class="footerColumn"></td>
                    <td class="footerColumn"></td>
                    <td class="footerColumn"></td>
                    <td class="footerColumn"></td>
                    <td class="footerColumn"></td>
                    <td class="footerColumn"></td>
                    <td class="footerColumn"></td>
                    <td class="footerColumn"></td>
                <tr>
        </display:footer> 
```

我也觉得很烦人，如果声明了类，则样式不会采用`<tr>`（样式只是黑色背景色）。

Besides, since in my table I have 10 columns, I have to declare 10 `<td>`, and all the column take the correspondent footer witdh. I have googled, but nothing found. Is there a way to play more independant with styles? The styles are just inherit from the table ones.

# iphone - 获取图像路径而不是图像 - PhoneGap Listview

> ID：11722708
> 
> 赞同：0
> 
> 时间：2012-07-30T13:36:30.337
> 
> 标签：iphone, image, listview, ios5, cordova

我正在开发一个 PhoneGap 应用程序，在该应用程序中我保存了用户的姓名、号码和电子邮件，之后我将该数据显示到列表视图中的另一个页面。这已经非常成功地完成了。但是现在当我想将用户的图像存储在本地存储中时，我得到的是图像的路径而不是图像。

我以这种方式保存我的数据：

```
<SCRIPT Language="JavaScript" charset="utf-8" type="text/javascript">

 var userName, userNumber, userEmail, userImage ;

 function showAndClearField(frm)
{

   userName = frm.name.value;
   userNumber = frm.number.value;
   userEmail = frm.email.value;
  if (frm.name.value == "" )
      {
        alert("Please enter your name!")
      }
  else if(frm.number.value == "")
  {

 alert("Please enter your number!")

 }
   else if(frm.email.value == "")
   {
     alert("Please enter your Email !")
   }
 else
{                

 alert("Name : " + userName + '\n' + " Number: " + userNumber + '\n' + "  Email: " + userEmail  )

 frm.name.value = ""
  frm.number.value = ""
  frm.email.value = ""

  var db = window.openDatabase("TestingDemo", "1.0", "PhoneGapTesting Demo", 200000);
   db.transaction(populateDB, errorCB, successCB);

  }

   function populateDB(tx)
     {

      tx.executeSql('INSERT INTO DEMO (id, data, userName, userNumber, userEmail, userImage) VALUES (1, "Third row", "'+ userName +'" , "'+ userNumber +'" , "'+ userEmail +'", "'+ userImage +'")');

      } 
```

在显示数据时，我使用以下代码：

```
 var nameOfUser , numberOfUser , emailOfUser, imageOfUser;

  for (var i=0; i<len; i++)
  {
     nameOfUser = results.rows.item(i).userName;

     numberOfUser = results.rows.item(i).userNumber;

     emailOfUser = results.rows.item(i).userEmail;

     imageOfUser = results.rows.item(i).userImage;

    numArr.push({ name : nameOfUser  , number  : numberOfUser  , email : emailOfUser, image : imageOfUser });  

   }

 function createCheckboxes(){
     $("#createBtn").remove();

     $("#content").append('<fieldset id="cbFieldSet" data-role="controlgroup" style = "padding : 20px" >');

    var length = numArr.length;

    for(var i=0;i<length;i++)
     {

    $("#cbFieldSet").append('<input type="checkbox" name= "cb-'+i+'" id="cb-' + i +'" number = "'+numArr[i].name+'"/>  <label for= "cb-'+i+'">'  +   "Name :  " + numArr[i].name + ' <br>' + "Email : " + numArr[i].email  +' <br>' + " Number " +  numArr[i].number +' <br>' +  numArr[i].image + ' <br><br> </label>' );

   alert("List Created !");

   }

   alert("Out of For loop !");      

   $("#content").trigger("create");
   alert("Content Created !");
  $("#showBtn").css("visibility","visible");
  }

  function showSelectedNames(){
   var count = $("#cbFieldSet input:checked").length;
   var str = '';
   for(i=0;i<count;i++){
   str += ' '+$("#cbFieldSet input:checked")[i].value;
 }
 alert("You selected----"+str);
}

                </script> 
```

我得到的观点是：

![这是图像路径而不是图像的显示方式](../Images/4c30fd51d8c8b74af8dccdc35ece95bf.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T13:59:54.620

我不知道这个特定的程序，

但我知道您将图像位置作为参数（文本）传递。

其他参数也是文本，并且您没有对 image 参数做任何不同的事情来让 UI 显示图像。也许您缺少图像标签或“getImage(location)”类型的函数。

编辑：

```
<img src="PATH" /> 
```

您需要将 PATH 作为图像位置，这就是将显示它的内容。

# iphone - 视图控制器过渡

> ID：11722710
> 
> 赞同：0
> 
> 时间：2012-07-30T13:36:36.463
> 
> 标签：iphone, objective-c, ios, transition

我有代码：

```
ListViewController * listViewController = [[ListViewController alloc] initWithNibName:@"ListViewController" bundle:nil];    

[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:1.5];
[UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];

[UIView setAnimationTransition:UIViewAnimationTransitionFlipFromRight forView:self.view cache:YES];
[self viewWillDisappear:YES];
[listViewController viewWillAppear:YES];

self.view.hidden = YES;
listViewController.view.hidden = NO;

[self viewDidDisappear:YES];
[listViewController viewDidAppear:YES];
[UIView commitAnimations]; 
```

但是它不起作用，并且 listViewController 不显示（请，有人可以告诉我这个问题的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T13:39:24.377

删除不必要的代码，然后写这个......

```
ListViewController * listViewController = [[ListViewController alloc] initWithNibName:@"ListViewController" bundle:nil];    
[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:1.5];
[UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
[UIView setAnimationTransition:UIViewAnimationTransitionFlipFromRight forView:self.view cache:YES];
[self.view addSubview:listViewController.view];
[UIView commitAnimations]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T13:42:00.500

尝试类似：

```
UIViewAnimationOptions ops = UIViewAnimationOptionTransitionFlipFromRight;
NSArray *temp = [[NSBundle mainBundle] loadNibNamed:@"NameOfNib" owner:self options:nil];
UIView* newView = [[temp objectAtIndex:0] view];
[UIView transitionFromView:self.view toView:newView duration:1.5 options:ops completion:nil];
self.view = newView; //Lets you control the new view from the current controller (you might want to save a reference to the old one if you need to change back) 
```

**正如meronix 所说，Apple 不鼓励在较新的 iOS 版本中使用基于非块的动画。**上述方法是“批准”的方法。

请注意`viewWillAppear`，`viewDidDisappear`, 和类似的方法不是您调用来使视图执行操作的方法。当这些事情发生时，它们会被自动调用。

您的代码有一些误解；我在下面评论了他们

```
//This looks fine (depending on what is in the nib)
ListViewController * listViewController = [[ListViewController alloc] initWithNibName:@"ListViewController" bundle:nil]; 

//Normally I use these to move things around, not change the view
[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:1.5];
[UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
[UIView setAnimationTransition:UIViewAnimationTransitionFlipFromRight forView:self.view cache:YES];

[self viewWillDisappear:YES]; //These two methods aren't things that you call
[listViewController viewWillAppear:YES];

self.view.hidden = YES; //If you're flipping or otherwise moving a view out of 
listViewController.view.hidden = NO; //sight then you don't need to hide/unhide views

[self viewDidDisappear:YES]; //Same as above, you don't call these
[listViewController viewDidAppear:YES];
[UIView commitAnimations]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T13:53:11.917

它不能工作！

您只需创建和分配一个 UIViewController，但永远不要将其推送到任何堆栈上，或将其视图添加到可见视图。

当您将 listViewController.view.hidden 设置为 no 时，您不会神奇地在屏幕上显示它：您需要将其视图添加到已经在屏幕上的视图（或窗口）中......

ps beginAnimation 已弃用：改用块动画...

# php - 网址路由正则表达式 PHP

> ID：11722711
> 
> 赞同：8
> 
> 时间：2012-07-30T13:36:36.863
> 
> 标签：php, regex, routing

我正在编写一个处理我的 PHP web 服务路由的类，但我需要更正正则表达式，我想知道解析 url 的最有效方法是什么。

示例网址：

*   发布/用户
*   获取/用户
*   获取 /users&limit=10&offset=0
*   GET /users/search&keyword=理查德
*   获取 /users/15/posts/38

我想在 PHP 中为类创建的是这样的：

```
$router = new Router();
$router->addRoute('POST', '/users', function(){});
$router->addRoute('GET', '/users/:uid/posts/:pid', function($uid, $pid){});
$target = $router->doRouting(); 
```

目标变量现在将包含一个数组：

*   方法
*   网址
*   回调方法

这是我到目前为止得到的：

```
class Router{
    use Singleton;

    private $routes = [];
    private $routeCount = 0;

    public function addRoute($method, $url, $callback){
        $this->routes[] = ['method' => $method, 'url' => $url, 'callback' => $callback];
        $this->routeCount++;
    }

    public function doRouting(){
        $reqUrl = $_SERVER['REQUEST_URI'];
        $reqMet = $_SERVER['REQUEST_METHOD'];

        for($i = 0; $i < $this->routeCount; $i++){
            // Check if the url matches ...
            // Parse the arguments of the url ...
        }
    }
} 
```

所以我首先需要一个正则表达式：

1.  /mainAction/:argumentName/secondaryAction/:secondaryActionName

检查它是否与 $reqUrl 匹配（参见上面的 for 循环）

1.  提取参数，以便我们可以在回调函数中使用它们。

我自己尝试过的：

```
(code should be in the for loop @ doRouting function)

// Extract arguments ...
$this->routing[$i]['url'] = str_replace(':arg', '.+', $this->routing[$i]['url']);

// Does the url matches the routing url?
if(preg_match('#^' . $this->routes[$i]['url'] . '$#', $reqUrl)){
    return $this->routes[$i];
} 
```

我真的很感谢所有的帮助，非常感谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-30T14:03:51.583

这现在基本上可以工作了。

```
public function doRouting(){
    // I used PATH_INFO instead of REQUEST_URI, because the 
    // application may not be in the root direcory
    // and we dont want stuff like ?var=value
    $reqUrl = $_SERVER['PATH_INFO'];
    $reqMet = $_SERVER['REQUEST_METHOD'];

    foreach($this->routes as  $route) {
        // convert urls like '/users/:uid/posts/:pid' to regular expression
        $pattern = "@^" . preg_replace('/\\\:[a-zA-Z0-9\_\-]+/', '([a-zA-Z0-9\-\_]+)', preg_quote($route['url'])) . "$@D";
        $matches = Array();
        // check if the current request matches the expression
        if($reqMet == $route['method'] && preg_match($pattern, $reqUrl, $matches)) {
            // remove the first match
            array_shift($matches);
            // call the callback with the matched positions as params
            return call_user_func_array($route['callback'], $matches);
        }
    }
} 
```

PS：你不需要`$routeCount`属性

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-05-10T10:32:29.107

很好的答案@MarcDefiant。我遇到的最干净的 PHP 路由器。做了一个小的修改来支持正则表达式。不知道你为什么使用 preq_quote ？

小任务是将数组转换为 assoc 数组。例如，将 ['0' => 1] 替换为 ['id' => 1]

```
function matchRoute($routes = [], $url = null, $method = 'GET')
{
    // I used PATH_INFO instead of REQUEST_URI, because the 
    // application may not be in the root direcory
    // and we dont want stuff like ?var=value
    $reqUrl = $url ?? $_SERVER['PATH_INFO'];
    $reqMet = $method ?? $_SERVER['REQUEST_METHOD'];

    $reqUrl = rtrim($reqUrl,"/");

    foreach ($routes as $route) {
        // convert urls like '/users/:uid/posts/:pid' to regular expression
        // $pattern = "@^" . preg_replace('/\\\:[a-zA-Z0-9\_\-]+/', '([a-zA-Z0-9\-\_]+)', preg_quote($route['url'])) . "$@D";
        $pattern = "@^" . preg_replace('/:[a-zA-Z0-9\_\-]+/', '([a-zA-Z0-9\-\_]+)', $route['url']) . "$@D";
        // echo $pattern."\n";
        $params = [];
        // check if the current request params the expression
        $match = preg_match($pattern, $reqUrl, $params);
        if ($reqMet == $route['method'] && $match) {
            // remove the first match
            array_shift($params);
            // call the callback with the matched positions as params
            // return call_user_func_array($route['callback'], $params);
            return [$route, $params];
        }
    }
    return [];
}

$match = matchRoute([
    [
        'method' => 'GET',
        'url' => '/:id',
        'callback' => function($req) {
            exit('Hello');
        }
    ],
    [
        'method' => 'GET',
        'url' => '/api/(.*)', // Match all /api/hello/test/...
        'callback' => function($req) {
            print_r($req);
            exit('cool');
        }
    ]
]);

list($route,$params) = $match;

call_user_func_array($route['callback'], [$params]); 
```

# objective-c - 获取另一个注释周围的所有注释

> ID：11722716
> 
> 赞同：1
> 
> 时间：2012-07-30T13:37:00.587
> 
> 标签：objective-c, ios, mkannotation, mkmaprect

我试图在指定区域的另一个注释周围获取所有注释，但我不知道该怎么做。现在我正在尝试：

```
MKMapRect mapRect = MKMapRectMake(annotation.coordinate.longitude, annotation.coordinate.latitude, 10.0, 10.0);
NSSet *nearbyAnnotations = [map annotationsInMapRect:mapRect]; 
```

但附近的Annotations 是空的。我尝试将经度与纬度交换，并为第三个和第四个参数使用更大的数字，但仍然没有结果。我应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T14:17:14.557

An`MKMapRect`使用与*不同*的`MKMapPoint`单位。*`CLLocationDegrees`*

 *该[`MKMapRectMake`函数](http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MapKitFunctionsReference/Reference/reference.html#//apple_ref/doc/uid/TP40008209-CH2-SW9)需要左上角`MKMapPoint`，然后是宽度和高度（再次以单位为`MKMapPoint`单位）。

基本上，您需要使用该`MKMapPointForCoordinate`函数来帮助您完成从度到`MKMapPoint`单位的转换。

首先，您可以构造 an`MKCoordinateRegion`然后将其转换为`MKMapRect`.

例如：

```
//create a region 10km around the annotation...
MKCoordinateRegion mapRegion = MKCoordinateRegionMakeWithDistance
                                 (annotation.coordinate, 10000, 10000);

//convert the MKCoordinateRegion to an MKMapRect...
MKMapRect mapRect = [self mapRectForCoordinateRegion:mapRegion]; 
```

`mapRectForCoordinateRegion`方法是你必须写的东西 。

有关一种编写方式的示例，请参阅此答案：
[如何在两个 MKCoordinateRegion 之间建立联合](https://stackoverflow.com/questions/6775718/how-to-make-the-union-between-two-mkcoordinateregion)

顺便说一句，请注意，在您的情况下，`annotationsInMapRect`将包括您正在搜索的注释（因为您使用它作为中心）。*

# c# - 从excel复制和粘贴到windows窗体

> ID：11722721
> 
> 赞同：2
> 
> 时间：2012-07-30T13:37:17.597
> 
> 标签：c#, winforms, clipboard, keycode

我`_KeyDown`在我的 Windows 窗体中使用了该功能：

```
if ((e.KeyCode == Keys.V) && (e.Modifiers == Keys.Control))
{
    // do stuff
} 
```

然后用于获取复制的数据：

```
 string[] clipboardRows = Clipboard.GetText(TextDataFormat.UnicodeText).Split(new string[] {"\r\n"},
                                                                                                 StringSplitOptions.None); 
```

这很好用，但是当您从电子表格中选择说选定的单元格时，它最终会复制其间的所有单元格，例如：

```
1.Test
2.Test2
3.Test3
4.Test4 
```

如果我同时选择`test`并`test 4`使用`ctrl`然后按复制`C`，当按`ctrl`+`v`并单步执行时，它会在 so`test2`和`test3`.

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T04:07:57.133

我会告诉你为什么你不能这样做。我在Excel中记录了一个宏，输入了四行数据。我选择了单元格 A1 和 A4，按 Ctrl + C

```
Range("A1").Select
ActiveCell.FormulaR1C1 = "abc"
Range("A2").Select
ActiveCell.FormulaR1C1 = "def"
Range("A3").Select
ActiveCell.FormulaR1C1 = "hij"
Range("A4").Select
ActiveCell.FormulaR1C1 = "klm"
Range("A4,A1").Select    'It actually concatenates the cells you've selected, that info isn't in the clipboard, if I selected three cells in the column it would be Range("A4,A1,A2").Select
Range("A1").Activate
Selection.Copy  

'Range("B1").Select
'ActiveSheet.Paste   'when I paste onto new cells, only two rows are taken up 
```

您可以在 VSTO 中执行此操作，例如[Copy & Paste VSTO - Excel Power Tools](http://social.msdn.microsoft.com/Forums/en/vsto/thread/1f671283-1187-43d2-a3fd-a4f8c7ae4efc)，但这是另一个问题。

# c# - 追踪丢失键盘插入符号的情况

> ID：11722725
> 
> 赞同：0
> 
> 时间：2012-07-30T13:37:31.260
> 
> 标签：c#, .net, winforms, textbox

在我们应用程序的某些窗口中，当我们签入/签出对象时，键盘插入符号会消失。这使得 UI 只读或可编辑。

因此，如果我在文本字段上并且它是可编辑的，并且我在闪烁的插入符号消失时检查它。我检查了它，插入符号仍然消失了。之前和之后我都可以使用 Shift+向左箭头或向右箭头来查看控件仍然具有焦点（.NET 文本框控件）。

奇怪的是，某些窗口上的所有控件似乎都发生了，但其他窗口上的所有控件都可以正常工作。

我知道这有点含糊，但我只是在寻找可能使键盘插入符号像这样消失的想法。（或如何解决或调试此问题）

我们没有任何 Cursor.Hide 调用，没有任何调用 ShowCaret 或 HideCaret 的代码（我看了看，我们在任何地方都没有带有“插入符号”这个词的代码。

我检查了好控件和坏控件并进行了一些调试以查看光标是“IBeam”，并且我已经对 GetCaretPos 和 GetCaretBlinkTime 进行了一些调用，但是在好的和坏的情况下，这些值似乎都是合理的.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T13:02:56.043

DevExpress 已确认这将在下一个版本中修复，并在我需要时为我提供了一个临时版本。出色的客户支持。

# string - Fortran 读取带 * 的数据以表示相似数据

> ID：11722727
> 
> 赞同：1
> 
> 时间：2012-07-30T13:37:34.883
> 
> 标签：string, fortran

我的数据看起来像这样

```
-3442.77 -16749.64 893.08 -3442.77 -16749.64 1487.35 -3231.45 -16622.36 902.29 
```

......

```
159*2539.87 10*0.00 162*2539.87 10*0.00 
```

这意味着我从每行 7 或 8 个实数开始，然后（接近尾声）有 159 个 2539.87 值，然后是 10 个 0 值，然后是 162 个 2539.87 等。这似乎是一种节省空间的方法，就像以前的版本一样这种文件格式是常规的每行 6 个实数。

由于不知道每行是 7 个还是 8 个数字，我已经将数据读入一个字符串。因此，我可以很容易地发现包含 *. 但那又如何呢？我想我必须确定每个 * 的位置，然后在分配给数组之前确定之前的整数和之后的实数值。我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T14:46:22.950

阅读该行。将其拆分为由空格分隔的标记。`*`将具有它的 in 标记替换为空格。然后从字符串中读取一个或两个值，这取决于是否有星号。示例代码如下：

```
REAL, DIMENSION(big) :: data
CHARACTER(LEN=40) :: token
INTEGER :: iptr, count, idx
REAL :: val

iptr = 1
DO WHILE (there_are_tokens_left)
  ... ! Get the next token into "token"
  idx = INDEX(token, "*")
  IF (idx == 0) THEN
    READ(token, *) val
    count = 1
  ELSE
    ! Replace "*" with space and read two values from the string
    token(idx:idx) = " "
    READ(token, *) count, val
  END IF
  data(iptr:iptr+count-1) = val  ! Add "val" "count" times to the list of values
  iptr = iptr + count
END DO 
```

这里我任意设置了token的长度为40个字符。根据您希望在输入文件中找到的内容进行调整。

顺便说一句，为了完整起见，这种通过用值/重复计数对替换重复值来压缩某些内容的方法称为*游程编码*(RLE)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T21:34:52.213

您的输入数据可能已以适合列表定向输入的形式写入（其中 READ 语句中的格式规范只是“*”）。列表定向输入支持您看到的 r*c 形式，其中 r 是重复计数，c 是要重复的常数。

如果输入项的总数是预先知道的（也许它对于该程序是固定的，也许它是由文件中较早的条目定义的），那么读取文件就像这样简单：

```
REAL :: data(size_of_data)
READ (unit, *) data 
```

例如，对于示例中显示的最后一行，它自己的“size_of_data”需要为 341，从 159+10+162+10 开始。

使用列表定向输入，数据可以跨越多条记录（多行）——您不需要提前知道每行有多少项目——只需知道有多少项目出现在下一个数据“块”中。

列表定向输入还有一些其他类似的“功能”，这就是为什么使用它来解析没有考虑到它的“任意”输入通常不是一个好主意 - 改用显式格式规范（如果事先不知道，这可能需要动态创建格式规范以匹配输入字段的宽度）。

如果您在 READ 语句之前不知道（或无法计算）项目数，那么您将需要自己解析行。

# objective-c - 键盘隐藏 UIView iOS

> ID：11722732
> 
> 赞同：1
> 
> 时间：2012-07-30T13:38:02.527
> 
> 标签：objective-c, ios5

我知道这个问题已经被问过几次了。我了解在出现键盘时如何向上移动视图或文本字段，但是我遇到了一个我似乎无法弄清楚的故障。

我试图向上移动的视图位于 UIViewController 内，它充当两个视图的容器。这个容器本身就是一个滑动视图控制器内的视图（有点像 Facebook 实现的那个）。

当您第一次加载视图时，文本字段会向上移动，但是如果您转到不同的视图并返回，键盘会导致视图消失。

这是我用来向上移动视图的代码：

```
 - (void) animateTextField:(BOOL)up {

    const int movementDistance = 350; // tweak as needed
    const float movementDuration = 0; // tweak as needed

    int movement = (up ? -movementDistance : movementDistance);

    [UIView beginAnimations: @"anim" context: nil];
    [UIView setAnimationBeginsFromCurrentState: YES];
    [UIView setAnimationDuration: movementDuration];

    self.sendingToolbar.frame = CGRectOffset(self.sendingToolbar.frame, 0, movement);
    self.messagesTable.frame = CGRectOffset(self.messagesTable.frame, 0, movement);
    //[splitController moveViewUp:up];
    [UIView commitAnimations];

}

- (void)registerForKeyboardNotifications
{
    NSLog(@"was this method called");

    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(keyboardWasShown:)
                                                 name:UIKeyboardDidShowNotification object:nil];

    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(keyboardWillBeHidden:)
                                                 name:UIKeyboardWillHideNotification object:nil];

}

// Called when the UIKeyboardDidShowNotification is sent.
- (void)keyboardWasShown:(NSNotification*)aNotification
{
    [self animateTextField:YES];
}
// Called when the UIKeyboardWillHideNotification is sent
- (void)keyboardWillBeHidden:(NSNotification*)aNotification
{
    [self animateTextField:NO];
} 
```

任何想法为什么会发生这种故障？谢谢

添加布尔值的建议以检查文本字段是否已经启动后，视图会在显示键盘时一直消失，而不仅仅是在您离开视图并返回时。这是修改后的方法：

```
- (void) animateTextField:(BOOL)up {

    const int movementDistance = 350; // tweak as needed
    const float movementDuration = 0; // tweak as needed

    int movement = movementDistance;

    [UIView beginAnimations: @"anim" context: nil];
    [UIView setAnimationBeginsFromCurrentState: YES];
    [UIView setAnimationDuration: movementDuration];

    if(textFieldIsUp && (up == YES)) {
        NSLog(@"Case 1");
        // Do nothing since text field is already up
    }
    else if(textFieldIsUp && (up == NO)) {
        NSLog(@"Case 2");
        // Move the text field down
        self.sendingToolbar.frame = CGRectOffset(self.sendingToolbar.frame, 0, -movement);
        self.messagesTable.frame = CGRectOffset(self.messagesTable.frame, 0, -movement);

        textFieldIsUp = NO;
    }
    else if((textFieldIsUp == NO) && (up == YES)) {
        NSLog(@"Case 3");
        // Move the text field up
        self.sendingToolbar.frame = CGRectOffset(self.sendingToolbar.frame, 0, movement);
        self.messagesTable.frame = CGRectOffset(self.messagesTable.frame, 0, movement);

        textFieldIsUp = YES;
    }
    else if((textFieldIsUp == NO) && (up == NO)) {
        NSLog(@"Case 4");
        // Do nothing since the text field is already down
    }
    else {
        NSLog(@"Default");
        // Default catch all case. Does nothing
    }

    [UIView commitAnimations];

} 
```

以下是有关我的设置的更多详细信息：

视图控制器是应用程序的消息中心。视图控制器包含两个子视图，左侧的子视图是用于选择对话的菜单，右侧的菜单是包含该对话中消息的子视图。由于我希望从下往上加载消息，因此表格视图旋转了 180 度，单元格也向相反方向旋转了 180 度。此外，表格视图使用 NSTimer 每 5 秒重新加载一次，以便可以使用任何新消息更新消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T13:59:45.287

文本字段已向上移动，但在您离开视图时并未向下移动。当您重新访问视图时，它会再次向上移动 - 并离开屏幕。

我以前遇到过这个问题；通过保持布尔变量指示文本字段是处于向上还是向下位置来解决它。在再次向上移动之前检查变量以确保文本字段尚未启动。

我是怎么做到的。我`NSNumber`在我的视图上使用一个属性来存储视图是否被向上推，以便其他视图可以传达他们是否向上或向下推视图。

```
//In viewDidLoad
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardDidShow:) name:UIKeyboardWillShowNotification object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardDidHide:) name:UIKeyboardWillHideNotification object:nil];

//Pushes the view up if one of the table forms is selected for editing
- (void) keyboardDidShow:(NSNotification *)aNotification
{
    if ([isRaised boolValue] == NO)
    {
        [UIView beginAnimations:nil context:NULL];
        [UIView setAnimationDuration:0.25];
        self.view.center = CGPointMake(self.view.center.x, self.view.center.y-moveAmount);
        [UIView commitAnimations];
        isRaised = [NSNumber numberWithBool:YES];
    }
}

//Push view back down
- (void) keyboardDidHide:(NSNotification *)aNotification
{
    if ([isRaised boolValue])
    {
        [UIView beginAnimations:nil context:NULL];
        [UIView setAnimationDuration:0.25];
        self.view.center = CGPointMake(self.view.center.x, self.view.center.y+moveAmount);
        [UIView commitAnimations];
        isRaised = [NSNumber numberWithBool:NO];
    }
} 
```

**-编辑-**

查看您的代码，您似乎正在从框架的 y 坐标中减去框架以向下移动框架。iOS 坐标系`CGRect`与普通坐标系不同——y 轴是翻转的（这在图形系统中比较常见）。你会想做与你正在做的事情相反的事情。

# design-patterns - 是否允许在统一拦截管道中的策略处理程序中注入参数？

> ID：11722737
> 
> 赞同：0
> 
> 时间：2012-07-30T13:38:10.997
> 
> 标签：design-patterns, dependency-injection, unity-container, transactionscope, distributed-transactions

所以我把我的交易范围拉到了`aspect/policy`. 我想在调用`pipeline`其中将调用一个或可能多个与 CRUD 相关的和/或嵌套的方法。

我可以通过注入我想要使用的数据库连接作为调用处理程序中的输入参数之一来做到这一点。然而，这确实增加了属性和它的目标方法之间的紧密耦合，这很不正常。

我可以重构数据层以确保任何嵌套调用（对同一连接）都是非嵌套的和顺序的（确保在使用`SQL Server 2008`和事务范围时不会升级为分布式事务）。

另一种选择可能是连接工厂，它提供连接但让我的业务层与底层连接类型无关。`IDBConnection`可以做到这一点。其他一些想法是子类化 TransactionScope（通过向其添加特定的连接功能，在“re”-useless elewhere 旁边），一个全局/静态数据连接对象，不赞成或只是简单地穿过数据连接我想在事务中使用的方法中共享对象。

所有这一切背后的基本原理是，我想要一种干净的方法来包装依赖于单个数据库连接的方法或方法集，而不会引起愤怒，`MSDTC`并且尽可能避免使用静态连接对象。

# c++ - QTreeWidget 中的垂直标题标签

> ID：11722740
> 
> 赞同：0
> 
> 时间：2012-07-30T13:38:31.953
> 
> 标签：c++, qt, qtreewidget, qtgui, qheaderview

我现在有一个带有水平标题标签的 QTreeWidget，我的意图是 **只**垂直绘制 headerLabels，其余的水平绘制。

我不想重新实现 QTreeWidgets`paintEvent`方法中的所有内容，所以我正在考虑控制标题标签的paintevent，然后调用超类`paintevent`。

类似这样的东西：

```
class MyTreeWidget: public QTreeWidget
{
  public void paintEvent (QPaintEvent *e)
  {
      ..... //Draw header labels vertically
      QTreeWidget::paintEvent(e);
  }
} 
```

在插入 headerLabels 时，我尝试`\n`在每个字符后插入一个，但这是一个非常丑陋的 hack，而且我真的不想这样做。

我的问题是我真的不知道如何获取标题项目或如何垂直绘制它们。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T13:52:23.853

我相信您想创建一个`QHeaderView`派生类，在其中更改默认实现`paintEvent( QPaintEvent* );`

然后将您的自定义`QHeaderView`派生类安装为您的类的水平标题`MyTreeWidget`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T13:55:19.530

如果您使用自定义`paintEvent()`，则可以使用 手动放置字符`QPainter::DrawText()`。要么逐一打印它们并`y`每次增加输出的坐标，要么尝试使用`Qt::TextWordWrap`标志使它们自动换行（我相信在这种情况下你需要制作一个非常窄的边界矩形，我没有没试过）。

# javascript - JavaScript 和传递事件实例来运行

> ID：11722741
> 
> 赞同：1
> 
> 时间：2012-07-30T13:38:38.260
> 
> 标签：javascript, javascript-events

我在尝试从 onclick 事件传递事件对象时遇到跨浏览器问题。

目前，我正在执行以下操作

```
for (var i = 0; i < list.length; i++)
{
  var link= list[i];     
  link.onclick = function(el) {  return function () {LinkManager.HandleOnClick(window.event, el); }}(link);
 } 
```

Firefox 不尊重 window.event。但是，我还能如何通过它？

我采用了“不”干净的解决方案：

```
for (var i = 0; i < list.length; i++)
{
  var link= list[i];     
  link.onclick =  SomeClickHandler;
 }

function SomeClickHandler(e)
{
  e = e || window.event;
  if (typeof (e) !== 'undefined')
  {
    var element = e.target || e.srcElement;
    LinkManager.HandleOnClick(e, element);
  }
} 
```

谁能推荐一个更好的解决方法？我真的不喜欢我所做的解决方法。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T13:43:28.563

```
var handler = function (evt) {
    // do something here
}

if(window.addEventListener) {
    link.addEventListener("click", handler);
} else if(document.attachEvent) {
    link.attachEvent("onclick", handler)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T14:27:38.590

如果我理解正确，您希望您的处理程序在调用时能够访问`el`变量和事件对象。这是可能的，并不难，但你可能想阅读闭包：

```
link.onclick = (function(el)
{
    return function (e)//this function will receive the event object
    {
        e = e || window.event;//for ie
        LinkManager.HandleOnClick(e, el);
    }
})(link); 
```

但是，老实说，这有点矫枉过正，试试这个（双关语）：

```
link.onclick = function(e)
{//this refers to `link`, the clicked element
    e = e || window.event;//for ie
    LinkManager.HandleOnClick(e, this);
}; 
```

甚至更少的代码：

```
link.onclick = function(e)
{//this refers to `link`, the clicked element
    e = e || window.event;//for ie
    LinkManager.HandleOnClick.apply(this,[e]);
    //LinkManager.HandleOnClick will receive 1 argument, the event object, and 'this' will point to 'link'
}; 
```

甚至更少：

```
link.onclick = LinkManager.HandleOnClick;//this === link, 1 argument: the event object 
```

* * *

也就是说，您正在迭代一个列表，并将一个事件侦听器附加到每个单独的子元素。我强烈建议您使用 delegion：

```
if (list.addEventListener)
{
    list.addEventListener('click',LinkManager.HandleOnClick,false);
}
else if (list.attachEvent)
{
    list.attachEvent('onclick',LinkManager.HandleOnClick);
}
else
{
    //use the loop you have now as a last resort
}

//LinkManager.HandleOnClick should start like so:
LinkManager.HandleOnClick = function(e)
{
    e = e || window.event;//<- you have the event object here
    var target = e.target || e.srcElement;//=== list item: your link variables, your element
    console.log(this);//<-should reference the list element (<ul> || <ol>)
}; 
```

不管怎样，我就是这样解决这个问题的

# jquery - 使用jquery将项目添加到列表时，对象[对象对象]没有方法'listview'

> ID：11722742
> 
> 赞同：2
> 
> 时间：2012-07-30T13:38:41.053
> 
> 标签：jquery, html, jquery-mobile, html-lists

我正在尝试通过 jquery 将项目动态添加到一个中，并[在此处](http://the-jquerymobile-tutorial.org/jquery-mobile-tutorial-CH11.php)`<ul>`遵循文档

我似乎正在为`listview`调用而苦苦挣扎......

这是我的 HTML：

```
<ul data-role="listview" id="tweets">
        <li><a href="astra.html">Astra</a></li>
        <li><a href="ford.html">Ford</a></li>
        <li><a href="triumph.html">Triump</a></li>
        <li><a href="chevrolet.html">Chevrolet</a></li>
        <li><a href="dodge.html">Dodge</a></li>
    </ul> 
```

这是我的jQuery：

```
$("#tweets").append("<li>Nissan</li>");
                $("#tweets").listview("refresh"); 
```

这是我在 Chrome JS 控制台中看到的错误：

> 未捕获的类型错误：对象 [object Object] 没有方法“listview”

这是我在浏览器中看到的：

![在此处输入图像描述](../Images/42fd80f18a58a204df33ce8be791f871.png)

我试过在有和没有“刷新”的情况下调用listview，两者似乎都给出了同样的错误，我做错了什么？

我已经查看了大约 5 个之前的 SO 问题，但他们的答案都没有帮助。

**编辑**：

我已经在元素中有以下`<head>`内容：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
<script type="text/javascript" src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script> 
```

**编辑 2**

单击按钮后正在执行上述javascript，不确定是否有任何效果...

HTML：

```
<a href="#" data-role="button" onclick="getTweets()">GetTweets</a> 
```

JS：

```
function getTweets() {
// some static value for now, to get it working...
    $("#tweets").append("<li>Nissan</li>");

try {
                    $('#tweets').listview('refresh');
                } catch(e) {
                    $('#tweets').listview();
                }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T13:47:50.400

我猜您的列表视图在您第一次添加项目时没有启动。试试这个，例如：

```
try {
    $('#tweets').listview('refresh');
} catch(e) {
    $('#tweets').listview();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T16:55:39.963

您的错误是未定义 jQuery Mobile。它包含在 jQuery 之前吗？你是否以某种方式超越了 jQuery？我需要更多代码来帮助您解决这个问题。

# java - 如何找到父线程的名称？

> ID：11722749
> 
> 赞同：10
> 
> 时间：2012-07-30T13:39:12.740
> 
> 标签：java, multithreading

我知道当我们谈论流程时，我们可以有“父母”和“孩子”。但是有可能得到父母的`Thread`名字吗？

我做了我的研究，但我只找到了[.Net的答案](https://stackoverflow.com/questions/4214492/net-is-there-a-way-to-get-the-parent-thread-id)

* * *

编辑：我尝试设置名称：

```
public class Main {

    public static void main(String[] args) {
        Thread r = new ThreadA();
        r.start();
    }

}

public class ThreadA extends Thread {
    public void run() {
        Thread.currentThread().setName("Thread A");
        System.out.println("Here  " + Thread.currentThread().getName());
        Thread r = new ThreadB();
        r.setName(Thread.currentThread().getName());
        r.start();
    }
}

public class ThreadB extends Thread {
    public void run() {
        Thread.currentThread().setName("Thread B");
        System.out.println("Here " + Thread.currentThread().getName());
        Thread r = new ThreadC();
        r.setName(Thread.currentThread().getName());
        r.start();
    }
}

public class ThreadC extends Thread {
    public void run() {
        Thread.currentThread().setName("Thread C");
        System.out.println("Here " + Thread.currentThread().getName());
    }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-30T13:48:28.323

> 我知道当我们谈论流程时，我们可以有“父母”和“孩子”。但是有可能获得父线程名称吗？

线程没有对父线程的引用，因此您无法从特定线程获取父线程的名称。在查看代码时，父线程用于获取守护进程状态、优先级和其他信息，但名称并未存储在新`Thread`对象中。

您提到您需要拥有线程的名称，以便您可以将那些“一起进入控制流”的线程分组。我会调查`ThreadGroup`s。它们不经常使用，但在这种情况下您可能想要：

```
ThreadGroup threadGroup = new ThreadGroup("mythreadgroup");
Thread thread = new Thread(threadGroup, new Runnable() {...});
...
// then you can do such methods as
threadGroup.enumerate(...); 
```

使用线程组，您可以将多个线程绑定在一起。当然，您也可以自己使用集合来执行此操作。

* * *

**编辑：**

您提到*真正的*问题是如何衡量分布式系统的每个组件（在本例中为 RMI 处理程序）中的“花费时间”。

恐怕这里没有简单的答案。对于挂钟，您必须将`System.currentTimeMillis()`每个 RMI 方法调用开始时的时间与结束时的时间进行比较。您还可以使用以下代码来测试线程使用的 CPU 时间。

```
ThreadInfo threadInfo =
    ManagementFactory.getThreadMXBean().getThreadCpuTime(thread.getId()); 
```

要获得您使用的“用户”时间`getThreadUserTime(...)`。我不确定是否重复使用线程 ID，因此您可能需要做的就是将 RMI 调用中的所有线程 ID 记录在一个集合中，然后在监视线程中记录它们的 CPU 和用户时间。

我怀疑 RMI 线程有一个特定的名称，因此您的监视线程可以在线程列表中找到线程来执行此操作，但您将无法确定哪个线程正在处理哪个 RMI 请求。

最后，要考虑的一件事是在过程中的多个点获取时间戳，并`long[]`在调用之间传递它。这会增加一小部分数据开销，但是您将能够很好地了解分布式系统各个不同部分的性能。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-30T13:41:55.397

不——在 Java 或 .NET 中都没有“父”线程的特定概念。但是，根据您引用的 .NET 答案，如果您自己创建线程，则始终可以在新线程的名称中给出一个指示“创建者”线程名称的名称。

编辑：您的示例代码在开始*之前*设置名称......但在开始后覆盖它*，*忽略以前的名称。

我希望是这样的：

```
String currentName = Thread.currentThread.name();
Thread thread = new Thread(new RunnableC());
thread.setName("C (started by" + currentName + ")");
thread.start(); 
```

那将是*唯一*设置线程名称的地方。

请注意，这也使用了实现`Runnable`而不是扩展的思想`Thread`。这是另一回事，但在大多数情况下是首选方法。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-05-05T20:23:03.947

使用`InheritableThreadLocal<T>`精心制作的

```
@Override protected T childValue(T parentValue) {
    // Use Thread.currentThread() -- the parent -- to make a return value.
} 
```

使您无法控制的线程可以将对它们自己的引用传递给它们创建的任何子线程——这将是它们的子线程与父线程最接近的东西。

正如 Gray 所说，保留此类引用可能会阻碍 GC，因此`WeakReference<Thread>`可能有必要将它们包装在 a 中。

这是一个每个线程都知道其完整祖先的示例，除非祖先已死并被 GC 掩埋。

```
import java.lang.ref.WeakReference;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;
import java.util.stream.IntStream;

import static java.lang.Thread.currentThread;

public class ThreadAncestry {

    /** Linked list holding the thread which created the current one, and its ancestry */
    static class Chain {

        final Chain ancestors;
        final WeakReference<Thread> parent;

        Chain(Chain ancestors, Thread parent) {
            this.ancestors = ancestors;
            this.parent = new WeakReference<>(parent);
        }

        @Override
        public String toString() {
            Thread parent = this.parent.get();
            return   (parent == null ? "[dead and buried]" : parent.getName())
                   + (ancestors == null ? "" : " -> " + ancestors);
        }

    }

    /** Prints the current thread's ancestry, then spawns a new thread which does the same. */
    static void spawnRecursively(InheritableThreadLocal<Chain> ancestors, int remainingSpawns) {
        System.out.println(  "The ancestors of " + currentThread().getName() + " are " + ancestors.get());
        if (remainingSpawns > 0)
            new Thread(() -> spawnRecursively(ancestors, remainingSpawns - 1)).start();
    }

    /** Uses an InheritableThreadLocal to record the ancestry of each thread as they are created. */
    public static void main(String[] args) {
        InheritableThreadLocal<Chain> ancestors = new InheritableThreadLocal<Chain>() {
            @Override
            protected Chain childValue(Chain parentValue) {
                return new Chain(parentValue, currentThread()); // This is called by the parent thread.
            }
        };

        spawnRecursively(ancestors, 3);

        IntStream.range(0, 6).parallel().forEach(
                i -> System.out.println(  i + " ran on " + currentThread().getName()
                                        + " with ancestors " + ancestors.get()));

        ExecutorService service = Executors.newSingleThreadExecutor();
        service.submit(() -> {
            System.out.println(  currentThread().getName() + " has ancestors "
                               + ancestors.get() + "; it will now attempt to kill these.");
            System.gc(); // May not work on all systems.
            System.out.println(  currentThread().getName() + " now has ancestors "
                               + ancestors.get() + " after attempting to force GC.");
            service.shutdown();
        });
    }

} 
```

此示例在我的机器上产生以下输出：

```
The ancestors of main are null
The ancestors of Thread-0 are main
The ancestors of Thread-1 are Thread-0 -> main
The ancestors of Thread-2 are Thread-1 -> Thread-0 -> main
3 ran on main with ancestors null
4 ran on main with ancestors null
5 ran on ForkJoinPool.commonPool-worker-2 with ancestors main
0 ran on ForkJoinPool.commonPool-worker-3 with ancestors ForkJoinPool.commonPool-worker-1 -> main
1 ran on ForkJoinPool.commonPool-worker-1 with ancestors main
2 ran on ForkJoinPool.commonPool-worker-2 with ancestors main
pool-1-thread-1 has ancestors main; it will now attempt to kill these.
pool-1-thread-1 now has ancestors [dead and buried] after attempting to force GC. 
```

我不确定这有多大用处，但它可以用于，例如，分层显示多个线程（您无法控制）中的每一个已打印`System.out`或记录的内容`java.util.Logger`；例如，这是您希望作为具有并行测试运行的测试框架的一部分来实现的东西。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-03-09T02:58:12.087

在公认的答案中，Gray 提到线程本地变量可能是从启动另一个线程的线程继承的（即父级到子级；请注意，术语“父级”和“子级”在这里没有任何特殊的技术含义）。

基于这个想法，似乎有一种方法可以使用[InheritableThreadLocal](https://stackoverflow.com/a/9007793/1143274)找出父线程：在父线程中设置的任何值（如`name`）都将自动在子线程中可用。

* * *

此外，如果我们不控制子线程（例如，我们在线程中运行第三方组件，并且它产生了一些我们希望跟踪的线程），那么也可以使用这种机制。[反射可以让我们看到其他线程的线程局部变量](https://stackoverflow.com/a/19225582/1143274)。

这可能允许我们拍摄所有正在运行的线程的快照，并找出哪些线程是由我们的线程启动的，以及这些线程的子线程等——所有它们的后代。应该可以很好地用于监控目的。不确定它是否对其他任何事情都有好处。

# forms - 如何使用重力表单下拉值重定向到另一个页面？

> ID：11722756
> 
> 赞同：0
> 
> 时间：2012-07-30T13:39:35.147
> 
> 标签：forms, wordpress, gravity

我正在尝试在重力表单中创建一个包含下拉菜单的表单。下拉列表在标签中包含站点上的页面名称，然后在值中包含相应的页面地址值。我正在尝试将用户发送到他们选择的页面。这将如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T16:39:43.040

实际上，在这里使用钩子：http: [//www.gravityhelp.com/documentation/page/Gform_confirmation](http://www.gravityhelp.com/documentation/page/Gform_confirmation)

您可以获取下拉列表的值，然后在他们提交表单后根据他们的选择进行重定向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T15:16:52.727

Javascript。

```
 // get your select element and listen for a change event on it
  $('#the_drop_down').change(function() {
     // set the window's location property to the value of the option the user has selected
     window.location = $(this).val();
  }); 
```

via：[从选择下拉列表中选择项目时自动重定向](https://stackoverflow.com/questions/580281/redirect-automatically-when-selecting-an-item-from-a-select-drop-down-list)

那篇文章涵盖了*IE 兼容性*和使用*jQuery*版本等问题。

# android - 如何在不询问android中的createchooser的情况下发送彩信

> ID：11722758
> 
> 赞同：0
> 
> 时间：2012-07-30T13:39:47.543
> 
> 标签：android

我想从我的手机发送一个彩信而不询问意图创建选择器，我把我的编码放在下面，我没有在编码中添加 intent.createchooser 但是当我运行应用程序时它会显示创建选择器对话框，

```
Intent intent1=new Intent(Intent.ACTION_SEND);
intent1.putExtra("address",to.getText().toString());
intent1.putExtra("sms_body",body);
intent1.setType("text/*");
startActivity(intent1); 
```

告诉我如何在不询问 createchooser 的情况下发送彩信

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T14:10:06.750

使用`ACTION_SENDTO`和`smsto:` `Uri`指定将 SMS 发送到的电话号码的值，而不是`ACTION_SEND`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-19T08:20:53.577

```
Intent sendIntent = new Intent(Intent.ACTION_SEND);
    sendIntent.putExtra("sms_body", "hi\nSend u Audio File.");
    sendIntent.setType("audio/*");
    sendIntent.setClassName("com.android.mms", "com.android.mms.ui.ComposeMessageActivity");
    sendIntent.putExtra("address", sender_num); 
```

# dom - 我无法通过 JavaScript 删除页面中的所有段落

> ID：11722760
> 
> 赞同：1
> 
> 时间：2012-07-30T13:39:53.710
> 
> 标签：dom, iteration, addeventlistener, removechild, getelementsbytagname

```
<!DOCTYPE html>
<meta charset="utf-8">
<title>An HTML5 Document</title>
<p>1
<p>2
<p>3
<p>4
<p>5
<p>6
<p>7
<p>8
<p>9
<p>10
<p>11
<p>12
<script>
    // When the document is clicked, codes below should remove all the paragraphs in the page.
    // There are 12 paragraphs in the page, but codes below can just remove 6 of them.
    document.addEventListener('click', function () {
        var i, allParagraphElements = document.getElementsByTagName('p');
        console.log('allParagraphElements.length: ' + allParagraphElements.length);
        for (i = 0; i < allParagraphElements.length; i += 1) {
            console.log('i: ' + i);
            allParagraphElements[i].parentNode.removeChild(allParagraphElements[i]);
        }
    }, false);
</script> 
```

请参阅 jsFiddle 上的代码：http: [//jsfiddle.net/7NmRh](http://jsfiddle.net/7NmRh)

我该如何解决这个问题？谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T13:43:23.910

你从上到下迭代：

**迭代一：** 十二段，index = 0

索引 0 处的段落被删除，第 1 段现在位于索引 0

**第二次迭代：** 11个段落，index = 1

索引 1 处的段落被删除，第 2 段现在位于索引 1

* * *

你明白出了什么问题吗？你只删除了一半的段落

反过来迭代，所有段落都被删除

[**JSFIDDLE**](http://jsfiddle.net/7NmRh/2/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T13:42:17.403

`.getElementsByTagName`返回一个活动节点列表，当您更改它所代表的底层子树时，该节点列表会自动更新。基本上，当您删除元素时，它`.length`也会发生变化，并且循环将“过早地”结束。

您可以使用`.querySelectorAll`来获取静态节点列表。

[http://jsfiddle.net/7NmRh/1/](http://jsfiddle.net/7NmRh/1/)

```
allParagraphElements = document.querySelectorAll('p'); 
```

* * *

​ 您还可以将节点列表转换为数组，其行为也类似于静态节点列表：

```
allParagraphElements = [].slice.call( document.getElementsByTagName('p') ); 
```

[http://jsfiddle.net/7NmRh/4/](http://jsfiddle.net/7NmRh/4/)

# ruby-on-rails - gmaps4rails 在生产机器上运行缓慢

> ID：11722762
> 
> 赞同：0
> 
> 时间：2012-07-30T13:39:59.230
> 
> 标签：ruby-on-rails, gmaps4rails

我刚刚将我的应用程序部署到 VPS，并且在 apache2 + 乘客设置上使用 Rails 3.1.3 和 Ruby 1.9.3-p125。我正在使用最新的 gmaps4rails 1.5.2。

在本地运行应用程序时，我可以非常快速地使用 gmaps4rails 找到位置。当我在我的 VPS 上尝试这个时，需要 60 到 70 秒。如果我注释掉以下行，那么我可以非常快速地提交我的表单，但不会检索到任何位置。

```
acts_as_gmappable :check_process => false 
```

在生产服务器上找到位置后，它可以正常工作，显示地图并将正确的位置存储在模型中。

**更新**

在使用 WEBrick 以开发模式在 VPS 上运行我的应用程序并运行相同的测试时，它也很慢。这排除了 apache2、乘客和生产环境。我开始认为这是VPS的问题。

**更新**

仍然试图找出为什么需要很长时间来处理，我在服务器上的控制台中手动使用了 Gmaps4rails，如下所示：

```
require 'gmaps4rails'
Gmaps4rails.geocode("66 Elizabeth st, Melbourne Victoria Australia") 
```

这花了 62 秒，没有错误消息。

**更新**

阅读 gmaps4rails 的源代码，并认为这可能是所有 http 请求的问题

所以我用 curl 来证明这一点

```
curl www.google.com.au 
```

这花了 63 秒。在我的开发箱上是 2 秒。看起来有些东西正在延迟我在服务器上的 http 请求。

**更新**

看起来我目前使用的 VPS 最近遭受了很多 DOS 攻击，并且可能仍然遇到一些。这会增加网络延迟和数据包丢失。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T13:45:32.320

gmaps4rails 只是查询 google 的 api 以从地址获取坐标。

如果这太慢，请考虑使用`Gmaps4rails.geocode(address)`.

在这种情况下，请在保存时禁用地理编码：`acts_as_gmappable :process_geocoding => false`

# c# - DNN 检查用户是否在角色组中

> ID：11722765
> 
> 赞同：4
> 
> 时间：2012-07-30T13:40:07.750
> 
> 标签：c#, dotnetnuke, roles

我在我的 DNN 模块中添加了一项检查，以排除某些用户在登录时必须回答一些问题。我不想对每个单独的角色进行硬编码，而是只排除特定角色组中的任何人。这样，如果我们将来有更多角色，我们可以将它们添加到角色组中，如果我们希望它们被排除在外。

但是，我不知道您如何检查用户是否在角色组中。我知道如何检查角色，但如果他们合二为一，则不知道该组。

解决方案：这是我根据得到的答案汇总的代码。应该管用。

```
RoleGroupInfo RoleGrp = RoleController.GetRoleGroupByName(this.PortalId, "Role Group");
bool bShouldSkipQuestions = false;
if (RoleGrp != null)
{
    Dictionary<string, RoleInfo> GroupChk = RoleGrp.Roles;
    if (GroupChk.Count > 0)
    {
        foreach (var item in GroupChk.Values)
        {
            if (_user.IsInRole(item.RoleName))
            {
                bShouldSkipQuestions = true;
                break;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-30T14:19:09.137

角色组并不是真的打算像那样使用（它们仅用于最终用户组织），因此没有直接的方法来检查它。您需要获取组 ( `RoleController.GetRolesByRoleGroup`) 中的所有角色，然后检查`PortalSecurity.IsInRoles`，传入以逗号分隔的角色名称字符串。

试试这个代码：

```
var roleGroup = RoleController.GetRoleGroupByName(this.PortalId, "Role Group");
var shouldSkipQuestions = roleGroup != null 
                          && roleGroup.Roles.Keys.Any(role => _user.IsInRole(role)); 
```

# vb.net - 使按钮具有多种用途

> ID：11722766
> 
> 赞同：0
> 
> 时间：2012-07-30T13:40:13.730
> 
> 标签：vb.net

好吧...我如何解释这个而不完全混淆？...好吧，我有这个具有 MenuScripts（顶级和二级）的表单。我遇到的问题是第二级之一是“添加”，它会在单击时将您带到另一个表单。这种另一种形式有一个按钮（“记录”）和文本框。这种另一种形式允许用户输入数据，当点击记录按钮时，输入的数据被写入文本文件。好的，回到第一种形式。另一个二级菜单脚本是“更新”，它也将用户带到另一个表单；但首先，用户必须单击列表框中的项目才能继续。

有没有办法使用“if”语句来表示“如果单击 mnuAdd 然后”“然后单击 elseif mnuUpdate”。类似的东西可以让记录按钮多次使用吗？

另外，如果有人可以给我一些关于确保用户选择列表框中的项目的指示，那肯定是一个加号！多谢你们！

不幸的是，由于我的声誉太低，我无法添加图像。

[这是我最终目标的可视化表示](http://www.flickr.com/photos/83812754@N07/7674806270/in/photostream)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T14:32:38.120

You need to put a public property on the second form (Details) which specifies which mode it is in. For instance, you could create a mode enumeration like this:

```
Public Enum EntryModes
    AddBook
    UpdateBook
End Enum 
```

Then, define a public mode property on the second form, like this:

```
Public Property EntryMode As EntryModes
    Get
        Return _entryMode
    End Get
    Set(ByVal value As EntryMode)
        _entryMode = value
    End Set
End Property
Private _entryMode As EntryMode 
```

Then, when you show the second form from the menu, just set the property first, before showing it:

```
Private Sub mnuAdd_Click(sender As Object, e As EventArgs)
    Dim dialog As New DetailsDialog()
    dialog.EntryMode = EntryModes.AddBook
    dialog.ShowDialog()
End Sub

Private Sub mnuUpdate_Click(sender As Object, e As EventArgs)
    Dim dialog As New DetailsDialog()
    dialog.EntryMode = EntryModes.UpdateBook
    dialog.BookToUpdate = ListBox1.SelectedItem
    dialog.ShowDialog()
End Sub 
```

As you can see, in the Upate menu click, I also added a line that passes the information for which book should be updated.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T14:29:49.690

最简单的方法：在显示第二个表单之前，将它的`Tag`属性设置为不同的东西——比如`"Add"`或`"Update"`——取决于选择的菜单项。然后您只需测试`Tag`按钮`Click`事件中的值并相应地继续。

至于判断一个列表项是否被选中：如果没有，ListBox的`SelectedIndex`属性将被设置为-1。

# svn - 限制 SVN 存储库大小或文件大小

> ID：11722768
> 
> 赞同：3
> 
> 时间：2012-07-30T13:40:16.450
> 
> 标签：svn

如何在`SVN`不使用的情况下限制存储库大小`pre-commit hooks`？当所有需要提交的文件都已经在服务器上时，会引发预提交挂钩。

我的存储库是公开的，我不想提交要提交的`500 Gb`文件。

我想将存储库的`5 Mb`大小限制为包括所有提交。可能我可以使用一些 3rd 方软件来做到这一点？例如限制文件夹大小的软件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T12:59:26.440

所以，答案：

1.  为 SVN 创建 windows 用户帐户
2.  为所有 NTFS 驱动器启用配额控制（我的电脑 -> 驱动器 -> 属性 -> ...）
3.  将配额限制设置为您需要的大小（例如，20 Mb）
4.  配置 SVN 服务器以在您刚刚创建的帐户下运行
5.  享受！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T14:41:35.957

如果您使用的是 apache 服务器，您可能可以这样做（我自己从来没有理由这样做，所以它不被允许工作）

限制请求体 524288000

在你的目录配置中限制提交，为了限制整体存储库大小，我建议你使用配额......我想一旦你达到配额的想法，它会相当模棱两可地死去。出于好奇，您对预先提交有什么看法？

# makefile - 如何在另一个 makefile 中包含 Android.mk

> ID：11722777
> 
> 赞同：2
> 
> 时间：2012-07-30T13:40:53.143
> 
> 标签：makefile, android-ndk

我有一个问题，包括另一个 Android.mk 并构建了依赖共享库。

生成文件：

```
LOCAL_PATH := $(call my-dir)

MY_CORE_PATH := $(abspath $(LOCAL_PATH)/../..)
include $(CLEAR_VARS)

LOCAL_MODULE     := Phone
LOCAL_SRC_FILES  := phone.cpp
LOCAL_SHARED_LIBRARIES := libCore

include $(BUILD_SHARED_LIBRARY)    
include $(MY_CORE_PATH)/Android.mk 
```

当我编译这个我得到一个错误，

```
make: *** No rule to make target 'libCore.so' needed by 'libPhone.so'. Stop. 
```

然而，libCore.so 的构建没有任何问题，但这个 makefile 无法正确引用。请提供有关如何解决此问题的任何建议。

NDK 和 Android 版本：android-ndk-r6，为 Android ICS 构建的 API 级别 9。

我目前可以通过进行以下更改来解决。

```
# Modified Android.mk

LOCAL_PATH := $(call my-dir)
MY_CORE_PATH := $(abspath $(LOCAL_PATH)/../..)

# libCore
include $(CLEAR_VARS)
LOCAL_MODULE := Core
include $(MY_CORE_PATH)/Android.mk

include $(CLEAR_VARS)

LOCAL_MODULE     := Phone
LOCAL_SRC_FILES  := phone.cpp
LOCAL_SRC_FILES += libCore

include $(BUILD_SHARED_LIBRARY) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:14:35.480

我找到了编译错误的原因。这是因为其他 makefile 中未正确提供 LOCAL_MODULE 名称。以下是所做的更改，

[1] 在构建 libCore.so 的 Android.mk 中，模块名称被提及为，

```
LOCAL_MODULE := Core 
```

代替

```
LOCAL_MODULE := libCore 
```

[2] 最后两个语句互换；首先包含 Makefile，然后构建库。

我的理解是模块名称中的“lib”是可选的。我不怀疑这一点，因为它在 NDK 中构建良好，当它作为 Android 源代码树的一部分构建时出现问题。

# c# - MySqlDataAdapter.Fill(DataTable) 超时

> ID：11722778
> 
> 赞同：2
> 
> 时间：2012-07-30T13:41:04.673
> 
> 标签：c#, mysql, timeout

我在使用 MySqlDataAdapter.Fill(DataTable) 方法时遇到问题。

显然，我使用的是 MySQL。

昨天开始出现这个问题，在此之前，一切正常。这个问题“不知从何而来”。

我有一个包含约 300 行的表。而且会更大。当我使用 Fill 方法进行查询时，获取行需要太多时间。并抛出超时异常。

仅成功获取**80**行需要大约 30 秒！

**但是**当我直接在 MySQL 查询浏览器中执行**SAME查询时，所有行都会立即获取。**

两天前我测试了相同的方法，一切正常。

为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T16:33:11.900

我解决了这个问题！

几天前，我配置了我的 app.config 以在我的应用程序中进行一些跟踪，但我忘记删除了。我放了这个：

```
<system.diagnostics>
  <trace autoflush="true" />

  <sources>
    <source name="System.Net">

      <listeners>
        <add name="System.Net"/>
      </listeners>
    </source>
    <source name="System.Net.Sockets">
      <listeners>
        <add name="System.Net"/>
      </listeners>
    </source>
    <source name="System.Net.Cache">
      <listeners>
        <add name="System.Net"/>
      </listeners>
    </source>
  </sources>
  <sharedListeners>
    <add
     name="System.Net"
     type="System.Diagnostics.TextWriterTraceListener"
     initializeData="System.Net.trace.log"
            />
  </sharedListeners>
  <switches>
    <add name="System.Net" value="Verbose" />
    <add name="System.Net.Sockets" value="Verbose" />
    <add name="System.Net.Cache" value="Verbose" />
  </switches>
</system.diagnostics> 
```

我删除了它，重新编译并解决了问题：D

# python - 深入 Python 输出错误

> ID：11722782
> 
> 赞同：0
> 
> 时间：2012-07-30T13:41:15.977
> 
> 标签：python

我正在从 Dive Into Python 运行这段代码：

```
def buildConnectionString(params):
    """Build a connection string from a dictionary of parameters.
    Returns string."""
    return ";".join(["%s=%s" % (k, v) for k, v in params.items()])
if __name__ == "__main__":
    myParams = {"server":"mpilgrim", \
                "database":"master", \
                "uid":"sa", \
                "pwd":"secret" \
                }
    print buildConnectionString(myParams) 
```

这本书说它的输出应该是：

```
server=mpilgrim;uid=sa;database=master;pwd=secret 
```

但是当我运行它时，它会反过来：

```
pwd=secret;database=master;uid=sa;server=mpilgrim 
```

任何想法为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-30T13:42:24.273

事实上，它的顺序完全相反，这实际上只是一个巧合。使用不同版本/实现的 python 运行代码，您可能会得到不同的排序。这样做的原因是因为在 python 字典中没有排序，所以你的函数的输出顺序没有很好地定义。（你把东西放入字典的顺序不是你遍历字典时产生它们的顺序）。

如果你想要一个特定的顺序，你可以`parames.items()`使用内置`sorted`函数进行排序（可选地使用`key`关键字来告诉`sorted` *如何*对项目进行排序）。另一种选择是使用出现在 python2.7 中的[集合](http://docs.python.org/library/collections.html#collections.OrderedDict)模块中的 OrderedDict（如 sr2222 所指出的那样）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T13:42:50.227

因为您正在打印字典，而字典是无序的。字典的迭代顺序取决于许多因素，包括解释器类型、解释器版本和操作系统。如果您希望它以与放入相同的顺序出现，则必须使用它`collections.OrderedDict`。或者，正如 mgilson 在他的回答中所说，您可以在打印字典内容之前对其进行排序，但鉴于您想要的顺序不是字母顺序，这可能比它的价值更麻烦。

# c++ - eclipse 在 mutex 类型上显示错误，尽管编译通过了

> ID：11722785
> 
> 赞同：2
> 
> 时间：2012-07-30T13:41:20.980
> 
> 标签：c++, multithreading, mutex, eclipse-cdt

在 Ubuntu 上使用 eclipse-cdt（最新版本）。我用一行代码创建新项目 - 声明性互斥锁。

编译通过（使用 Eclipse 编译），但 Eclipse 将互斥体标记为红色并抱怨 - “无法解析互斥体类型”

我将“-std=c++0x -pthread”添加到 g++ 并刷新 eclipse 索引器，但没有帮助。

有什么建议吗？

```
#include <mutex>
using namespace std;

static mutex m;

int main(int argc, char *argv[]) {
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T13:55:05.917

C/C++ 常规 -> 路径和符号 -> 符号 -> GNU C++。单击“添加...”并粘贴`__GXX_EXPERIMENTAL_CXX0X__`（确保附加并预先添加两个下划线）到“名称”并将“值”留空。

这样就解决了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-17T12:40:42.270

-D__cplusplus=201103L 帮助了我。使用 Eclipse Luna。**GXX_EXPERIMENTAL_CXX0X**没有帮助

# sqlite - SQLite 查询在 3.4.2 版中成功运行，但在 3.7.11 版中出现错误 - 使用聚合函数

> ID：11722789
> 
> 赞同：1
> 
> 时间：2012-07-30T13:41:33.410
> 
> 标签：sqlite, aggregate-functions

我有一个查询：

```
SELECT MIN(stat_md5) AS stat_md5 
FROM 
     (select * from ( mem_stat NATURAL LEFT OUTER JOIN host ))
GROUP BY stat_md5; 
```

此查询在**SQLite** version中运行良好`3.4.2`，但是当我升级到 version 时`3.7.11`，出现以下错误：

```
SQL error: aggregate functions are not allowed in the GROUP BY clause 
```

如果我从查询中删除`MIN()`or `GROUP BY`or `AS`，那么它在 version 中工作正常`3.7.11`。

这意味着以下查询变体工作正常：

```
SELECT MIN(stat_md5) AS stat_md5 
FROM 
     (select * from ( mem_stat NATURAL LEFT OUTER JOIN host ))

SELECT MIN(stat_md5) 
FROM 
     (select * from ( mem_stat NATURAL LEFT OUTER JOIN host ))
GROUP BY stat_md5;

SELECT stat_md5 
FROM 
     (select * from ( mem_stat NATURAL LEFT OUTER JOIN host ))
GROUP BY stat_md5; 
```

有人可以解释为什么它在版本 3.7.11 中给出错误及其解决方法。

**更新：**

这是原始查询。

```
SELECT 
      stat_day, obs_day, stat_week, obs_week, 
      NULL AS stat_cputotal, stat_memfree, stat_md5,
      stat_month, obs_month, stat_type, stat_memused, stat_10min, obs_10min, 
      NULL AS stat_cpusystem, stat_epoch, obs_epoch, stat_30day, obs_30day, 
      stat_idx, obs_idx, NULL AS stat_cpuidle, stat_memtotal, stat_qtr, obs_qtr,
      NULL AS stat_cpuuser, stat_hour, obs_hour, obs_10min, stat_10min, 
      obs_30day,stat_30day, obs_day, stat_day, obs_epoch, stat_epoch, obs_hour,
      stat_hour, obs_idx, stat_idx, obs_month, stat_month, obs_qtr, stat_qtr, 
      obs_week, stat_week, serial_num, NULL AS dputil_cpuid, NULL AS wms_pk 
      FROM (
       (
       SELECT stat_qtr, obs_qtr, stat_qtr AS cus_qtr, stat_qtr AS crash_qtr, 
              stat_qtr AS evt_qtr, stat_30day, obs_30day, stat_30day AS cus_30day, 
              stat_30day AS crash_30day, stat_30day AS evt_30day, stat_month, 
              obs_month, stat_month AS cus_month, stat_month AS crash_month, 
              stat_month AS evt_month, stat_week, obs_week, stat_week AS cus_week, 
              stat_week AS crash_week, stat_week AS evt_week, stat_day, obs_day, 
              stat_day AS cus_day, stat_day AS crash_day, stat_day AS evt_day, 
              stat_hour, obs_hour, stat_hour AS cus_hour, stat_hour AS crash_hour, 
              stat_hour AS evt_hour, stat_10min, obs_10min, stat_10min AS cus_10min, 
              stat_10min AS crash_10min, stat_10min AS evt_10min, stat_epoch, 
              obs_epoch, stat_epoch AS cus_epoch, stat_epoch AS crash_epoch, 
              stat_epoch AS evt_epoch, stat_idx, obs_idx, stat_idx AS cus_idx, 
              stat_idx AS crash_idx, stat_idx AS evt_idx, obs_10min, obs_30day, 
              obs_day, obs_epoch, obs_hour, obs_idx, obs_month, obs_qtr, obs_week, 
              serial_num, stat_md5, MIN(stat_memfree) AS stat_memfree, MIN(stat_md5) 
              AS stat_md5, MIN(stat_type) AS stat_type, MIN(stat_memused) AS 
              stat_memused, MIN(stat_memtotal) AS stat_memtotal 
              FROM 
                   (select * from ( mem_stat NATURAL LEFT OUTER JOIN host )) 
                    GROUP BY 
                            stat_qtr, stat_30day, stat_month, stat_week, 
                            stat_day, stat_hour, stat_10min, stat_epoch, 
                            stat_idx, obs_10min,obs_30day, obs_day, obs_epoch, 
                            obs_hour, obs_idx, obs_month, obs_qtr, obs_week, 
                            serial_num, stat_md5
                   )) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T14:37:57.890

> , stat_md5, MIN(stat_memfree) AS stat_memfree, MIN(stat_md5) AS stat_md5,

stat_md5 在 SELECT 列表中出现了两次：一次单独出现，一次作为 MIN() 的别名。3.4.2 必须使用第一个，3.7.11 必须使用第二个。

按聚合字段分组没有意义，因此错误是正确的。

只需将第二次的别名更改为类似的名称`AS min_stat_md5`，它就会正常工作。在任何情况下，在 SELECT 上拥有两个具有相同名称的字段都是一个坏主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T18:35:14.013

这个内联视图中的括号对我来说看起来很时髦：

```
 (select * from ( mem_stat NATURAL LEFT OUTER JOIN host )) 
```

此外，IMO，为了查询的清晰和可读性，最好为内联视图分配别名：

```
 select Books4Kids.Price
      from
      (
       select authors.name, titles.price
       from authors inner join titles on authors.authorid = titles.authorid
       where titles.category = 'Childrens Literature'
      ) as Books4Kids 
```

# java - 如何在 Java 中将 JavaScript 日期转换为日期？

> ID：11722790
> 
> 赞同：42
> 
> 时间：2012-07-30T13:41:33.200
> 
> 标签：java, javascript, date

我需要转换`JsDate`为`java.util.Date.`我搜索过的，但我找不到任何东西。那么你能帮我解决这个问题吗？

**编辑：**我在 GWT 屏幕上执行此转换过程。我`Datepicker`在屏幕上，`JsDate`当我使用它的`getValue()`方法时它给了我价值。所以我应该将此值放入具有 Date 类型的对象的属性中。

```
ObjectName.setDate(PickerName.getValue()); 
```

我希望我的编辑会更清楚。

**编辑2：**

这条线是我的问题的解决方案：

```
myObject.setDate(new Date((long) myPicker.getValue().getTime())); 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-07-30T13:50:17.117

日期转换的最佳方式是使用以毫秒为单位的时间，UTC。JS Date 对象和 java.util.Date 类都支持转换为毫秒 ( `getTime()`) 并从毫秒实例化（使用构造函数）。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-07-30T13:50:17.693

`java.util.Date`您可以从 JS 的“自纪元以来的时间”值创建一个对象`Date`

**javascript**

```
var d = new Date().getTime(); 
```

**爪哇**

```
// get value from client (ajax, form, etc), and construct in Date object

long valueFromClient = ...

Date date = new Date(valueFromClient);

String formatted = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss").format(date); 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-11-29T23:24:42.167

如果像我这样的人被迫解析 JS 格式的日期字符串（作为`(new Date()).toString()`JavaScript 的结果），这里是我使用的 SimpleDateFormat 规范：

```
DateFormat jsfmt = new SimpleDateFormat("EE MMM d y H:m:s 'GMT'Z (zz)"); 
```

如果您可以控制日期的生产者，我同意使用时间戳或至少`.toUTCString()`肯定更健壮。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-22T02:12:21.243

你可能想要这个：

```
java:
String jsDate="2013-3-22 10:13:00";
Date javaDate=new SimpleDateFormat("yy-MM-dd HH:mm:ss").parse(jsDate);
System.out.println(javaDate); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2021-07-12T06:01:13.620

## ISO 8601 和 java.time

ISO 8601 是日期和时间的国际标准，包括日期和时间格式。几乎任何编程语言都支持它，包括 JavaScript 和 Java。

在 JavaScript 中，使用 . 生成 ISO 8601 格式的字符串`Date.toISOString()`。我们不需要任何格式化程序。

```
 var d = new Date();
  var n = d.toISOString();
  console.log(n);
```

只要您记得它是 UTC 格式，结果在某种程度上是人类可读的，由结尾的`Z`.

在 Java 中使用`Instant.parse()`. 我们也不需要在这里指定任何格式化程序。

```
 String stringFromJavaScript = "2021-07-12T05:54:03.365Z";
    Instant inst = Instant.parse(stringFromJavaScript);
    System.out.println(inst); 
```

输出：

> 2021-07-12T05:54:03.365Z

该问题要求`java.util.Date`日期选择器的结果。我们应该避免使用`java.util.Date`它，因为尽管名称 a`Date`不代表日期，并且因为`Date`该类设计不良且早已过时。对于没有时间的日期 a`LocalDate`是合适的：

```
 LocalDate date = inst.atZone(ZoneId.systemDefault()).toLocalDate();
    System.out.println(date); 
```

在我的时区，输出是：

> 2021-07-12

`atZone()`转换取决于时区，并且仅当 JVM 的默认时区（或您传递到的时区）与日期选择器使用的相同时才会正确。

如果您确实需要`Date`尚未升级到 java.time 的旧版 API：

```
 Date oldfashionedDate = Date.from(inst);
    System.out.println(oldfashionedDate); 
```

> 2021 年 7 月 12 日星期一 07:54:03 CEST

## 链接

*   [维基百科文章：ISO 8601](https://en.wikipedia.org/wiki/ISO_8601)
*   [Oracle 教程：日期时间](https://docs.oracle.com/javase/tutorial/datetime/)解释如何使用 java.time。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-30T13:48:22.860

我建议使用 DateFormat 解析方法（可以在[此处](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/DateFormat.html#parse%28java.lang.String%29)找到文档）。它可以解析日期的字符串表示并返回 java.util.Date。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-08-14T09:26:03.833

JS 日期 -- new Date() 2019 年 8 月 14 日星期三 14:54:38 GMT+0530（印度标准时间）

Java 日期 -- new Date().toISOString() "2019-08-14T09:25:50.136Z"

# javascript - 原型 - 图像上的点击事件

> ID：11722791
> 
> 赞同：0
> 
> 时间：2012-07-30T13:41:42.520
> 
> 标签：javascript, prototypejs, dom-events

我正在尝试像这样响应图像上的点击事件。为什么这不起作用？

```
$$('refresh').each(function(element) {     
    element.observe('click', respond); 
}) 

function respond(event) {     
    alert("hello"); 
} 

<img src="images/refresh.jpg" id="refresh" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T13:47:44.770

***更新***

见[演示](http://jsfiddle.net/M7Es3/)

使用`$('refresh')`代替`$$('refresh')`, 或`$$('#refresh')`。但是第二个变体无论如何都会返回数组。请参阅链接：[$](http://prototypejs.org/api/utility/dollar)和[$$](http://prototypejs.org/api/utility/dollar-dollar)。而且我不明白你如何绑定事件处理程序。

所有代码：

```
<img id="refresh" src="images/refresh.jpg" />

<script>
  $$('#refresh').each(function (element) {     
    Event.observe(element, 'click', respond); 
  });

  function respond (event) {
    alert("hello"); 
  }
</script> 
```

# ubuntu - 将规范文件转换为 debian

> ID：11722792
> 
> 赞同：6
> 
> 时间：2012-07-30T13:41:52.037
> 
> 标签：ubuntu, centos, rpm, deb, specifications

我们正在将我们的服务器从 CentOS 迁移到 ubuntu。对于一个自行编写的应用程序，我们创建了一个规范文件来创建 RPM，以便在 CentOS 上轻松安装。现在我们要将其转换为 debian 格式。最简单的方法是什么？我的意思不是从 rpm 创建 .deb 文件，而是将规范文件转换为 ubuntu 控制文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T05:08:55.240

规范的答案似乎围绕着.[`alien`](http://joeyh.name/code/alien/) [`--generate`](http://alnahian.wordpress.com/tag/alien-generate/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-16T23:07:24.950

为此，我编写[了 spec2deb](https://bitbucket.org/gdraheim/spec2deb)。

# android - BroadcastReceiver 和 AlarmManager 无法使用

> ID：11722793
> 
> 赞同：2
> 
> 时间：2012-07-30T13:41:53.160
> 
> 标签：android, broadcastreceiver

我已经尝试解决这个问题好几个小时了，但我仍然不明白。

我的代码非常基本：

广播接收器

```
 public class TimerNotif extends BroadcastReceiver
 {

    @Override
    public void onReceive(Context context, Intent intent)
    {
        notificationStatus(context);
    }

    private void notificationStatus(Context context) {
        final NotificationManager mNotificationManager = (NotificationManager) 
                context.getSystemService(Context.NOTIFICATION_SERVICE);

        final int icon = R.drawable.ic_launcher;
        final Notification notification = new Notification(icon, "test", System.currentTimeMillis());
        final Intent notificationIntent = new Intent(context.getApplicationContext(), Main.class);
        final PendingIntent pIntent = PendingIntent.getActivity(context.getApplicationContext(), 0, notificationIntent, 0);

        notification.setLatestEventInfo(context, "ticker", "title", pIntent);
        mNotificationManager.notify(1, notification);
    }
} 
```

主要活动

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Calendar cal = Calendar.getInstance();

    Intent intent = new Intent(Main.this, TimerNotif.class);
    PendingIntent pIntent = PendingIntent.getBroadcast(Main.this, 0, intent, 0);

    AlarmManager alarm = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
    alarm.set(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), pIntent);
} 
```

这进入清单中的应用程序标签

```
<receiver android:name="TimerNotif"></receiver> 
```

什么都没发生！TimeNotif 的代码没有运行，但为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T13:51:41.953

应该：

```
<receiver android:name=".TimerNotif"></receiver> 
```

因为`".TimerNotif"`是完整类名的快捷方式，如果您的类位于应用程序的根包中。否则，它应该是：

```
<receiver android:name="your.package.name.TimerNotif"></receiver> 
```

# linux - 通过 Tor 汇集所有 WiFi 热点流量

> ID：11722795
> 
> 赞同：1
> 
> 时间：2012-07-30T13:41:56.843
> 
> 标签：linux, tor

我将 Fedora 16 机器用作 WiFi 热点，我想通过[Tor](https://www.torproject.org/)汇集所有网络流量（来自笔记本电脑和所有其他设备） ，这可能吗？或者还有其他解决方案可以实现这一目标吗？

# node.js - 在 node.js 中处理 ZIP-Buffer

> ID：11722798
> 
> 赞同：1
> 
> 时间：2012-07-30T13:42:09.590
> 
> 标签：node.js, zip

我正在使用 node.js 构建 webapp 的服务器部分。这涉及从 thetvdb.com 获取数据（thetvdb[的 API 文档](http://www.thetvdb.com/wiki/index.php/Programmers_API)）。数据以 zip 文件的形式提供。HTTP 下载是没有问题的，但是，解析文件是。实际上，我从不保存文件，而只是将其保存在内存中，如[如何在 NodeJs 中下载和解压缩内存中的 zip 文件？](https://stackoverflow.com/questions/10359485/how-to-download-and-unzip-a-zip-file-in-memory-in-nodejs)

我有一个包含有效数据的缓冲区（与我使用浏览器/curl 下载文件时的数据相同......）。但是，adm-zip（我也厌倦了其他 zip 库，有些建议无效的 zip 长度）无法打开它。它没有显示错误，但最后的 zipEntries 长度为 0。当我将缓冲区写入文件系统并使用 gui 或 cli 工具打开它时，它可以工作。

我无法提供该文件的直接链接，因为它会涉及我的 API 密钥，但是我[在这里](http://cl.ly/3D212d2B2M2R)重新上传了它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T15:36:34.833

我想我可能会给你一个答案：

不要依赖`npm install`。我刚刚使用您提供的 zip 文件运行了您链接到的[示例](https://stackoverflow.com/questions/10359485/how-to-download-and-unzip-a-zip-file-in-memory-in-nodejs)，我得到了`"0"`.

我在另一个 StackOverflow 页面上看到了一条评论，说`adm-zip`on npm 的版本不是最新的。我从 github 获取了一份新副本`adm-zip`，覆盖了我的 node_modules 文件夹中的副本并重新运行示例代码，现在得到以下内容：

```
...
<Actor>
  <id>237811</id>
  <Image>actors/237811.jpg</Image>
  <Name>Peter Pratt</Name>
  <Role>The Master</Role>
  <SortOrder>3</SortOrder>
</Actor>
<Actor>
  <id>23780s/237811.jpg</Image> 
```

试一试！

# php - 如何使用 SimpleXMLElement 将属性添加到 xml 标头

> ID：11722805
> 
> 赞同：0
> 
> 时间：2012-07-30T13:42:31.977
> 
> 标签：php, xml, simplexml

> **可能重复：**
> [让 SimpleXMLElement 在输出中包含编码](https://stackoverflow.com/questions/869650/getting-simplexmlelement-to-include-the-encoding-in-output)

**PHP：**

```
$xml = new SimpleXMLElement("<Title0></Title0>");
$xml->Title1='Some Text  1';
$output = $xml->asXML('mak.xml'); 
```

**XML 输出：**

```
<?xml version="1.0"?>  
<Title0>
    <Title1>Some Text 1</Title1>
</Title0> 
```

但我想在`encoding="utf-8"`xml 标头中添加类似的属性，这样我就可以拥有这样的东西：

```
<?xml version="1.0" encoding="utf-8" ?>  
<Title0>
    <Title1>Some Text 1</Title1>
</Title0> 
```

我不想在输出文件上使用查找和替换之类的东西。

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-07-30T14:27:59.617

读这个： -

[http://php.net/manual/en/simplexml.examples-basic.php](http://php.net/manual/en/simplexml.examples-basic.php)

尝试这个：-

Example #10 添加元素和属性

```
<?php
include 'example.php';
$movies = new SimpleXMLElement($xmlstr);

$character = $movies->movie[0]->characters->addChild('character');
$character->addChild('name', 'Mr. Parser');
$character->addChild('actor', 'John Doe');

$rating = $movies->movie[0]->addChild('rating', 'PG');
$rating->addAttribute('type', 'mpaa');

echo $movies->asXML();
?> 
```

# c# - 使用 HTML 链接

> ID：11722807
> 
> 赞同：0
> 
> 时间：2012-07-30T13:42:36.517
> 
> 标签：c#, asp.net, css

我有一个抛出`"Object reference not set to an instance of an object`“异常”的 C# ASP.NET 应用程序。

引发异常的行是

```
HtmlLink cssTemplate = new HtmlLink(); 
```

我`cssTemplate`在我的站点中使用变量来根据登录用户`CSS`在我的工作表上设置工作表。`masterpage`

关于为什么我会在实例化 cssTemplate 对象时收到此错误的任何想法？

更新：异常的整个片段是

```
Message: Object reference not set to an instance of an object.
Stack Trace: at LRMasterPage.Page_Load(Object sender, EventArgs e in
LRMasterPage.master.cs:line 49
Target Site: Void Page_Load(System.Object, System.EventArgs)
Data: System.Collections.ListDictionaryInternal 
```

我现在想知道是否是 System.Collections.ListDictionaryInternal 实际上可能是问题所在。

# c# - 将 LINQ 与 Open XML (Excel) 一起使用

> ID：11722808
> 
> 赞同：2
> 
> 时间：2012-07-30T13:42:41.903
> 
> 标签：c#, linq, openxml

我有一个 excel 表，我正在使用**Open XML SDK 2.0**处理它。情况是，我的 excel 表中有一个包含日期的列。我需要从该列中获取最大和最小日期。

我可以通过循环并到达该单元格，进行比较并找到所需的答案来做到这一点。

但是由于**最优性**，我想通过使用**LINQ**来获取最小和最大日期来做到这一点。

有可能这样做吗？如果是，那么如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T14:04:02.387

您可以看到如何从那里的列中获取所有单元格的 IEnumerable：[Read excel sheet data in columns using OpenXML](https://stackoverflow.com/questions/4715690/read-excel-sheet-data-in-columns-using-openxml)，并在其上使用 Max()。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T09:35:09.230

**谢谢大家**

我这样用过

```
IEnumerable<Cell> cells = workSheetPart.Worksheet.Descendants<Cell>().Where(c => string.Compare(GetColumnName(c.CellReference.Value), strIndex, false) == 0).OrderBy(c => c.CellValue.Text); 
```

并获得像这样的最小值和最大值

```
int cellCount = cells.Count();
Cell MaxCell = cells.ToArray()[0];
Cell MinCell = cells.ToArray()[cellCount - 1]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T23:21:20.117

你会想看看 LINQ`Min()`和`Max()`函数。如果需要返回整个`Cell`对象，可以使用`OrderByDescending()`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T09:10:35.213

您可以阅读 Eric White 的这篇文章[Open XML SDK and LINQ to XML](http://blogs.msdn.com/b/ericwhite/archive/2008/07/09/open-xml-sdk-and-linq-to-xml.aspx)（Eric 写了很多关于 OpenXML 和 LINQ 的文章）。然后您将能够使用 LINQ 查询您的 Excel 文件数据。您可能希望在[The Open XML SDK Productivity Tool](http://www.youtube.com/watch?v=KSSMLR19JWA)中查看电子表格对象结构，它可以为您生成源代码。您可以使用此代码来了解如何以编程方式访问您需要的数据。

# c# - 在 Nuget 的后期构建中获取版本

> ID：11722812
> 
> 赞同：5
> 
> 时间：2012-07-30T13:43:00.273
> 
> 标签：c#, nuget

代码：

```
if $(ConfigurationName) == Release (
    cd $(ProjectDir)
    nuget spec Entities -f
    nuget pack DeusPak.Entities.csproj -Prop Configuration=Release
    nuget push DeusPak.Entities.$(version).nupkg  $(MYGET_API_KEY) -Source     http://www.myget.org/F/lojaali/api/v2/package
) 
```

我刚刚开始使用 NuGet，想知道如何在我的 NuGet 包中包含版本号。我目前正在将其硬编码到构建后事件中，这显然不是我想要继续做的事情。有人可以帮忙吗？

这是我当前的构建后事件：

```
if $(ConfigurationName) == Release (
    cd $(ProjectDir)
    nuget spec Dev-f
    nuget pack Dev.csproj -Prop Configuration=Release
    nuget push Dev.1.0.0.0.nupkg  $(MYGET_API_KEY) -Source     http://www.myget.org/F/api/v2/package
) 
```

**更新：**

好的，我已经设法使用正确的自动递增版本号构建 DLL：

```
if $(ConfigurationName) == Release (
    cd $(ProjectDir)
    nuget spec Dev -f
    nuget pack Dev.csproj -Prop Configuration=Release
    nuget push Dev.$(version).nupkg  $(MYGET_API_KEY) -Source     http://www.myget.org/F/api/v2/package
) 
```

但是这个版本没有显示在我的 MyGet 包列表中。如何让它在那里显示以便可以下载？还是只能通过单击“添加包”手动完成？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-10-05T00:40:31.263

只是扩展了 Carlos J López 提供的解决方案，我使用 AfterBuild 脚本实际调用 NuGet 并提供版本参数。

就我而言，我还在构建后事件中添加了“cd $(ProjectDir)”，这实际上发生在 AfterBuild 脚本之前。

干杯，

```
 <Target Name="AfterBuild" Condition="'$(Configuration)' == 'Release'">
      <GetAssemblyIdentity AssemblyFiles="$(TargetPath)">
          <Output TaskParameter="Assemblies" ItemName="AssemblyVersion" />
      </GetAssemblyIdentity>
      <Exec Command="$(SolutionDir)\.nuget\nuget pack $(ProjectName).nuspec -Version %(AssemblyVersion.Version)" />
      <Message Text="$(SolutionDir)\.nuget\nuget pack $(ProjectName).nuspec -Version %(AssemblyVersion.Version)" Importance="high" />
    </Target> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-30T16:28:33.533

您的问题尚不清楚，但*假设*您要将包的版本与程序集的版本同步，您可以简单地管理项目的 AssemblyInfo.cs 文件中的 AssemblyVersion 属性。

```
[assembly: AssemblyVersion("1.0.0")] 
```

或者如果您想使用自动生成的内部版本号

```
[assembly: AssemblyVersion("1.0.0.*")] 
```

如果要偏离程序集的版本，并且只指定包版本，可以使用 AssemblyInfo.cs 文件中的[AssemblyInformationalVersion](http://msdn.microsoft.com/en-us/library/system.reflection.assemblyinformationalversionattribute.aspx)属性。

```
[assembly: AssemblyInformationalVersion("1.0.0")] 
```

从问题中也不清楚您使用什么版本控制策略，但我*假设*您想要应用[语义版本控制](http://semver.org)（前 3 个版本号最相关）。通常，在自动创建 NuGet 包时，我建议您在 csproj 目录中创建一个[标记化的 nuspec 文件](http://docs.nuget.org/docs/reference/nuspec-reference#Replacement_Tokens)，这样您就可以更轻松地操作包元数据。仅供参考，甚至还有一个 NuGet 包可以帮助您：

```
Install-Package NuSpec 
```

NuGet 将在定位 MyProject.csproj 时查找此 nuspec（确保它称为 MyProject.nuspec）。

```
<package>
  <version>$version$</version>
  ...
</package> 
```

我还在这篇文章的[MyGet](http://www.myget.org)博客上解释了这一点：http: [//blog.myget.org/post/2012/04/27/NuGet-version-token-explained.aspx](http://blog.myget.org/post/2012/04/27/NuGet-version-token-explained.aspx)

*假设*您只是在构建之前更改程序集版本，那么调用 nuget pack 的后期构建应该足够好。

```
nuget pack MyProject.csproj 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-22T15:13:04.640

这就是如何在构建后事件中获取 $(version) 变量的方法，它应该与构建后一样好。

```
<Target Name="AfterBuild" Condition="'$(Configuration)' == 'Release'">
    <GetAssemblyIdentity AssemblyFiles="$(TargetPath)">
        <Output TaskParameter="Assemblies" ItemName="AssemblyVersion" />
    </GetAssemblyIdentity>
    <Exec Command="echo %(AssemblyVersion.Version)" />
    <Message Text="Released %(AssemblyVersion.Version)" Importance="high" />
</Target> 
```

所以你必须修改你的 .csproj 文件，因为 VS 没有为此提供 UI。

# c++ - 从 VS2010 链接到 ARPACK

> ID：11722826
> 
> 赞同：2
> 
> 时间：2012-07-30T13:43:53.833
> 
> 标签：c++, linker, fortran, arpack

我正在尝试让`ARPACK`库在`VS2010`.

我想使用 ++ 提供的 C++ 包装器`ARPACK`（一些背景 - 我需要获取巨大矩阵的特征值和特征向量）。这里有一个很好的关于这个主题的[教程](http://www-bcf.usc.edu/~jbarbic/arpack.html)。

按照教程，我设法使用`g77`on编译了 fortran 代码`mingw`，我成功地生成了所描述的 dll 和 lib。尝试将我的 Visual Studio 项目链接到库时出现问题。

我试图链接的方式如下：

1.  我制作了一个简单的 VS2010 C++ 控制台应用程序
2.  我已将包含 ARPACK++ 库的文件夹添加到我的“其他包含文件夹”中
3.  我已将 lib 文件添加到“其他依赖项”
4.  我已将包含 lib 文件的目录添加到我的“其他库目录”中

尽管有这些设置，当我尝试编译这个简短的测试代码时：

```
#include "stdafx.h"
#include "arrsnsym.h"

int _tmain(int argc, _TCHAR* argv[])
{
    ARrcNonSymStdEig<float> prob(100, 4L);
    printf("Bok!");
    return 0;
} 
```

我收到一条错误消息：

```
>arpackcpp.obj : error LNK2001: unresolved external symbol scopy_
1>arpackcpp.obj : error LNK2001: unresolved external symbol snaupd_
1>arpackcpp.obj : error LNK2001: unresolved external symbol sneupd_ 
```

我不明白为什么链接器找不到上述方法。检查 dllwrap 实用程序生成的 .def 文件确实提到了所有这些功能，所以我相当确定它们应该可用。不过，我觉得我错过了一些明显的东西。

更新（让它工作！）：

事实证明，当在配置设置中切换到 x86 并在配置属性-> 链接器-> 输入-> 附加定义文件中包含生成的 def 文件时，我试图将 64 位程序链接到 32 位库，它起作用了对于 32 位（但我需要 64 位）。对我有用的最终解决方案是在 Linux 上使用 MinGW 和 gfortran 为 Win64 交叉编译它。效果出奇的好，并生成了一个 dll，我可以从 VS 中的 64 位 C++ 应用程序链接到该 dll。我想我现在应该去写一个关于如何做到这一点的教程:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T15:09:51.990

我的猜测是这是一个名称修改方案问题。在 fortran 中，没有很好地定义符号在目标文件的符号表中的名称。例如，一个名为的例程`foo`可能在符号表中以`foo`、`FOO`、`foo_`等结尾`foo__`。这些天来，我不知道有太多使用双下划线的编译器（g77 除外）。我假设 ARPACK++ 包装器假设一个下划线。此处的解决方案是告诉编译器在符号名称中使用单个下划线（使用`g77`，表示使用`-fno-second-underscore`）。注意`gfortran`是一个较新的（仍然受支持的）开源 fortran 编译器，默认情况下使用单下划线。您可能还想尝试使用该编译器构建代码。（它可能会产生比 g77 更优化的输出。）

# jquery - 使用 jquery 选择画布元素

> ID：11722828
> 
> 赞同：1
> 
> 时间：2012-07-30T13:44:10.110
> 
> 标签：jquery, canvas, jqplot

我有一个仪表板页面，它有（或者还可以有）多个使用 jqPlots 插件绘制的图表。

我希望能够将其“导出”到图像中，以便用户可以根据需要简单地打印图表。

我的减速带不是从画布上获取图像，而是更多地了解如何获取我想要打印的确切画布。

我的问题是 jqplots 没有为画布分配一个唯一的 id 来抓取它，而且我没有找到关于 jquery 如何找到画布的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T14:25:26.453

我找到了一个可行的解决方案

我使用以下作为我的基础：

[https://bitbucket.org/michelts/jqplot/src/18f31b092903/examples/exportImage.html](https://bitbucket.org/michelts/jqplot/src/18f31b092903/examples/exportImage.html)

这帮助我找到了正确的方向。

# git - 在 Mac 中安装后 git gui 不工作（例如 Mountain Lion）

> ID：11722830
> 
> 赞同：72
> 
> 时间：2012-07-30T13:44:19.190
> 
> 标签：git

当我跑步`git gui`时，我得到了这个：

```
$ git gui
git: 'gui' is not a git command. See 'git --help'.

Did you mean one of these?
    grep
    init
    pull
    push 
```

但我很好地运行了其他 git 命令，包括`gitk`. 我怎样才能解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2012-09-26T18:25:57.743

编辑您的 git 配置以在别名部分添加 gui 条目

```
nano ~/.gitconfig 
```

> [别名]
> 
> gui = !sh -c '/usr/local/git/libexec/git-core/git-gui'

## 编辑 2020

看起来原始答案中的路径现在已经过时了。更新说明：

> [别名]
> 
> gui = !sh -c '/usr/local/opt/git/bin/git gui'

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-08-03T11:19:55.427

这篇文章：[http](http://www.cmsimike.com/blog/2012/07/30/git-gui-and-osx-mountain-lion/) ://www.cmsimike.com/blog/2012/07/30/git-gui-and-osx-mountain-lion/救了我。

编辑`~/.bash_profile`并放入

```
alias gui='/usr/local/git/libexec/git-core/git-gui' 
```

现在新命令`gui`代替了`git gui`.

**编辑（2013 年 1 月 28 日）**

`git gui`对于为什么不起作用，我找到了一个更好的答案： [Apple 在 XCode 4.5 命令行工具中删除了“git gui”命令吗？](https://stackoverflow.com/questions/12667936/did-apple-remove-the-git-gui-command-in-xcode-4-5-command-line-tools). 请改为参考此解决方案。

苹果确实删除了“git gui”命令。我决定只自制 git 而不是依赖 XCode 命令行工具。

```
brew install git 
```

然后我编辑了 /etc/paths 文件，使 /usr/local/bin 目录位于 /usr/bin 目录之前，因为这也不对。然后退出终端窗口并重新启动，现在我得到：

```
$ which git
/usr/local/bin/git

$ git --version
git version 1.7.12.1 
```

并且 git gui 命令再次起作用。

**编辑 (2020-02-03)**

从 2.25.0_1 版开始，`git gui`现在由 brew 中的单独公式提供，名为`git-gui`. 有关此更改的背景，请参阅以下 PR 和问题：[https ://github.com/Homebrew/homebrew-core/pull/49136](https://github.com/Homebrew/homebrew-core/pull/49136)

因此，除了安装 Homebrew 之外`git`，还`git gui`必须运行

```
brew install git-gui 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2017-11-19T08:39:21.097

似乎在 2021 年年中，所有答案都已过时（甚至是我的！），所以这是我的新答案：

```
brew install git-gui || brew upgrade git-gui
git gui || /usr/local/opt/git/bin/git gui 
```

**旧答案**：似乎在 2017 年末，上述所有答案都已过时，所以这是我的新答案：

```
brew install git || brew upgrade git
git gui || /usr/local/opt/git/bin/git gui 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2020-02-15T02:44:50.857

2020

```
brew install git
brew install git-gui
git config --global --add alias.gui '!sh -c '/usr/local/opt/git/libexec/git-core/git-gui'' 
```

现在，享受：

```
git gui 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-30T13:48:17.963

安装 Mountain Lion 后，您可能需要单独安装/升级 git-gui 包。
如“ [Linux 的 Git GUI 客户端](https://stackoverflow.com/a/1518844/6309)”中所述，`git gui`有自己的包（旁边`git-core`）。

从评论看来，山狮似乎还没有 git-gui 包。
但是，[这篇文章](http://www.1771.in/coda-2-mountain-lion-git.html)报告使工作成为像**[Source Tree](http://www.sourcetreeapp.com/)***这样的替代 gui*。 这可能是一个很好的解决方法。

![源树应用程序](../Images/34116b4cfe4da3dbc481220a9eaf916f.png)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-31T02:10:58.880

我有同样的问题。Git-gui 似乎仍然为我安装（/usr/local/git/libexec/git-core/git-gui 是我的位置），但如果不指定完整路径，它就不能正常工作。这表明存在路径问题，但我没有进一步研究它。

**编辑** 尝试将 /usr/local/git/libexec/git-core 添加到 PATH 变量的开头。看起来所有的 git 二进制文件都在那里，所以应该可以工作。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-21T17:21:13.770

添加到路径对我有用。

我刚刚将这一行添加到我的 ~/.profile 中，并且 git gui 再次活跃起来。&(%ing 山狮。export PATH=PATH:/usr/local/git/libexec/git-core

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-07-02T22:51:04.217

除了上面维克多的回答，您还需要一个额外的步骤，因为 brew install git 没有为 git-gui 创建 simlink。

在 /usr/local/bin 中，运行以下命令：

ln -s ../Cellar/git/1.8.3.2/libexec/git-core/git-gui git-gui

（用你自己的替换 git 版本）

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-01T19:11:56.917

虽然我不确定如何从 Mountain Lion 的终端打开 git gui，但可以使用 OpenInGitGUI 从 Finder 中打开 git gui 来使用它。下载和说明可[在此处](http://code.google.com/p/git-osx-installer/wiki/OpenInGitGui)获得。

这可能不如在终端中输入“git gui”那么方便，但它非常接近。基本上你需要做的就是输入'open'。在 Finder 中打开当前目录，然后单击 Git 按钮打开 git gui。

# java - java.lang.RuntimeException：无法启动活动 ComponentInfo Android Eclipse

> ID：11722833
> 
> 赞同：2
> 
> 时间：2012-07-30T13:44:36.687
> 
> 标签：java, android, error-handling

我知道很多人都问过同样的问题，但我只是不知道发生了什么。我正在尝试在 Eclipse 中制作计算器，但我不断收到错误列表。程序注意到的文件中没有错误，虽然 layout.xml 中有错误但之前没有引起问题，所以应该不会引起问题。

```
07-30 08:19:50.470: D/AndroidRuntime(2071): Shutting down VM
07-30 08:19:50.470: W/dalvikvm(2071): threadid=1: thread exiting with uncaught
exception (group=0x40a421f8)
07-30 08:19:50.480: E/AndroidRuntime(2071): FATAL EXCEPTION: main
07-30 08:19:50.480: E/AndroidRuntime(2071): java.lang.RuntimeException: Unable to start
activity
ComponentInfo{com.example.se.miun.chris.calculator/com.example.se.miun.chris.
calculator.MainActivity}: java.lang.NullPointerException
07-30 08:19:50.480: E/AndroidRuntime(2071):     at
android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
07-30 08:19:50.480: E/AndroidRuntime(2071):     at
android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
07-30 08:19:50.480: E/AndroidRuntime(2071):     at
android.app.ActivityThread.access$600(ActivityThread.java:123)
07-30 08:19:50.480: E/AndroidRuntime(2071):     at
android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147
07-30 08:19:50.480: E/AndroidRuntime(2071):     at
android.os.Handler.dispatchMessage(Handler.java:99)
07-30 08:19:50.480: E/AndroidRuntime(2071):     at
android.os.Looper.loop(Looper.java:137)
07-30 08:19:50.480: E/AndroidRuntime(2071):     at
android.app.ActivityThread.main(ActivityThread.java:4424)
07-30 08:19:50.480: E/AndroidRuntime(2071):     at
java.lang.reflect.Method.invokeNative(Native Method)
07-30 08:19:50.480: E/AndroidRuntime(2071):     at
java.lang.reflect.Method.invoke(Method.java:511)
07-30 08:19:50.480: E/AndroidRuntime(2071):     at
com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
07-30 08:19:50.480: E/AndroidRuntime(2071):     at
com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
07-30 08:19:50.480: E/AndroidRuntime(2071):     at
dalvik.system.NativeStart.main(Native Method)
07-30 08:19:50.480: E/AndroidRuntime(2071): Caused by: java.lang.NullPointerException
07-30 08:19:50.480: E/AndroidRuntime(2071):     at
com.example.se.miun.chris.calculator.MainActivity.onCreate(MainActivity.java:60)
07-30 08:19:50.480: E/AndroidRuntime(2071):     at
android.app.Activity.performCreate(Activity.java:4465)
07-30 08:19:50.480: E/AndroidRuntime(2071):     at
android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
07-30 08:19:50.480: E/AndroidRuntime(2071):     at
android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
07-30 08:19:50.480: E/AndroidRuntime(2071):     ... 11 more 
```

这是我的编码。它还没有真正做任何事情，但我只想运行它以查看它是否遇到任何错误。这是 mainActivity.java 文件。

```
import android.os.Bundle;
import android.app.Activity;
import android.text.Editable;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;

public class MainActivity extends Activity implements OnClickListener {
Button Seven;
Button Eight;
Button Nine;
Button Four;
Button Five;
Button Six;
Button One;
Button Two;
Button Three;
Button Zero;
Button Point;
Button Negative;
TextView TextBox;
int x;
int y;
String z;

@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Seven = (Button)findViewById(R.id.NumberSeven);
    Seven.setOnClickListener(this);
    Eight = (Button)findViewById(R.id.NumberEight);
    Eight.setOnClickListener(this);
    Nine = (Button)findViewById(R.id.NumberNine);
    Nine.setOnClickListener(this);
    Four = (Button)findViewById(R.id.NumberFour);
    Four.setOnClickListener(this);
    Five = (Button)findViewById(R.id.NumberFive);
    Five.setOnClickListener(this);
    Six = (Button)findViewById(R.id.NumberSix);
    Six.setOnClickListener(this);
    One = (Button)findViewById(R.id.NumberOne);
    One.setOnClickListener(this);
    Two = (Button)findViewById(R.id.NumberTwo);
    Two.setOnClickListener(this);
    Three = (Button)findViewById(R.id.NumberThree);
    Three.setOnClickListener(this);
    Zero = (Button)findViewById(R.id.NumberZero);
    Zero.setOnClickListener(this);
    Point = (Button)findViewById(R.id.Point);
    Point.setOnClickListener(this);
    Negative = (Button)findViewById(R.id.NNegative);
    Negative.setOnClickListener(this);
    TextBox = (TextView)findViewById(R.id.Screen);
    x = (Integer) null;
    y = (Integer) null;

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

public void onClick(View One) {
    if(z == null){
        x = 1;
            TextBox.setText(x);
            TextBox.setText("diggity");
        }
        else if(z != null) {
            y = 1;
            TextBox.setText(x);
            TextBox.setText(z);
            TextBox.setText(y);
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T15:13:51.170

第 60 行：x = (Integer) null；这一行将编译成这个字节码（由 javap 反汇编）：

1.  **aconst_null**
2.  **检查广播** *#2；//类 java/lang/Integer*
3.  **调用虚拟** *#3；//方法java/lang/Integer.intValue:()I*

第三行将导致 NullPointerException 因为 Integer 对象实际上是您的空常量:)

原始数据类型（int、long 等）是 Java 中唯一的非对象类型。**null**用于表明当前变量（对象变量）没有实际对象支持（没有分配内存）。对于原始类型，内存会立即分配，因此它们不能具有这种**空**状态。

因此，您应该检查“if(x == 0)”或将其定义为整数。

PS并且不要将null转换为任何东西:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T13:49:26.033

就像这样

由于应用程序无法启动，您不会收到太多错误。它无法启动，因为它的 onCreate() 无法完成。

由于 nullPointerException，onCreate() 无法完成。

您将 null 转换为整数两次，而不是简单地实例化一个默认为 0 的新整数。一旦摆脱它，它应该可以工作。

看？

```
E/AndroidRuntime(2071): Caused by: java.lang.NullPointerException
E/AndroidRuntime(2071):     at
MainActivity.onCreate(MainActivity.java:60) 
```

我敢打赌这是第 60 行

```
x = (Integer) null; 
```

所以把它改成

```
x = new Integer(); 
```

# nservicebus - NserviceBus 托管在 IIS 问题中

> ID：11722835
> 
> 赞同：0
> 
> 时间：2012-07-30T13:44:44.473
> 
> 标签：nservicebus

我一直在从事一个需要将 Nservicebus 托管在 IIS 中的项目。我需要 MVC3 Web 应用程序来发送消息，nservicebus 主机应该处理此消息，然后将某种消息发送回 Web 应用程序。

异步页面示例[http://docs.particular.net/samples/web/asp-mvc-application/](http://docs.particular.net/samples/web/asp-mvc-application/) 显示了一种方法。我可以让它工作，但这并不能完全满足我的要求。我需要从处理程序返回一个对象，而不仅仅是一个 int。

为了让它工作，我尝试在 IIS 下设置一个主机，在我的 Global.asax 中我有这个代码：

```
Bus = Configure.WithWeb()                
               .DefineEndpointName("CQRS")
               .Log4Net()                   
               .DefaultBuilder()                
               .DisableTimeoutManager()                
               .XmlSerializer()
               .MsmqTransport()
                   .IsTransactional(true)
                   .PurgeOnStartup(false)
                   .InMemorySubscriptionStorage()
               .UnicastBus()              
                   .AllowSubscribeToSelf()
                   .ImpersonateSender(false)
                   .LoadMessageHandlers()  
                   .CreateBus().Start(); 
```

我的 web.config：

```
<MessageForwardingInCaseOfFaultConfig ErrorQueue="CQRS.error" />
 <MsmqTransportConfig NumberOfWorkerThreads="1" MaxRetries="5"  />

 <UnicastBusConfig  DistributorControlAddress="" DistributorDataAddress="" TimeoutManagerAddress="CQRS.timeouts">
  <MessageEndpointMappings>
     <add Messages="Nokavision.InvoiceProcessing.CQRS.Messages" Endpoint="CQRS" />
     <add Messages="NServiceBus.Scheduling.Messages.ScheduledTask" Endpoint="CQRS" />      
  </MessageEndpointMappings>
</UnicastBusConfig> 
```

使用 Bus 对象发送消息效果很好，一条消息出现在“cqrs”队列中。但是，Web 应用程序中的处理程序不会触发。这是代码：

```
public class UpdateInkoopFactuurAlgemeenHandler : IHandleMessages<UpdateInkoopFactuurAlgemeenCommand>
{
    public IBus Bus { get; set; }

    public void Handle(UpdateInkoopFactuurAlgemeenCommand message)
    {
        P2PEntities entities = new P2PEntities();

        var factuur = (from f in entities.Documenten.OfType<InkoopFactuur>()
                       where f.DocumentId == message.DTO.DocumentId
                       select f).FirstOrDefault();

        if (factuur != null)
        {
            factuur.FactuurNummer = message.DTO.FactuurNummer;
            entities.SaveChanges();
        }

        //Bus.Return(new UpdateInkoopFactuurAlgemeenResponse(message.DTO.ClientConnectionId));

    }
} 
```

我确定我在这里遗漏了一些小东西，但是我做错了什么，为什么处理程序没有被触发，而我可以清楚地看到队列中的一条消息。同样在 Bus 对象上，我可以看到正在加载的处理程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T04:55:08.420

如果您在流利的配置中正确配置安装程序，则 NSB 会正确设置队列的权限。 [http://andreasohlund.net/2012/01/26/installers-in-nservicebus-3-0/](http://andreasohlund.net/2012/01/26/installers-in-nservicebus-3-0/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T07:00:57.400

好的，我想我明白了，NSB 创建的队列似乎没有 IIS USER 的完全访问权限。我已经为每个队列上的每个人设置了“完全控制”并重新启动了 IIS。不知何故它现在似乎工作

# visual-studio-2010 - 如何用视觉生成函数的标题

> ID：11722840
> 
> 赞同：0
> 
> 时间：2012-07-30T13:44:48.820
> 
> 标签：visual-studio-2010, visual-studio, editor, hotkeys

你知道是否有一种方法可以在视觉中使用热键生成评论？

这是一个示例：当我按“ctrl + h”（例如）时，我希望生成以下行：

```
 /*
         * Creation: 2012-07-24 by user
         * Modification: 2012-07-25 by user
        */
        Int myFunction()
        {

        } 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T15:13:43.977

如果您在**项目**`Generate XML documentation file`选项下打勾（这不是 IDE 或解决方案选项，而是项目选项），那么您可以直接在函数上方键入。**`///`**

 **这将创建以下示例注释，您可以在 XML 标记之间填写详细信息...

```
/// <summary>
/// 
/// </summary>
/// <param name="id"></param>
/// <returns></returns>
public Lookup FindById(int id)
{ 
```

然后，在代码的其他部分中使用该函数时，Visual Studio 将使用您放在标签之间的信息来填充智能感知信息。它也可以与属性、枚举等一起使用。

这并不完全符合您的要求（包括用户名、日期等），但我相信这可能是您的一个选择。

（注意，这也可用于 VB.NET，并`'''`改为使用）**

# sql-server-2008 - Context_Info SQL Azure 的替换

> ID：11722846
> 
> 赞同：3
> 
> 时间：2012-07-30T13:45:06.250
> 
> 标签：sql-server-2008, azure, azure-sql-database, context-info

我目前正在使用 Master 数据库的 CONTEXT_INFO 属性来存储登录的用户名，以便稍后在表触发器中使用它进行审计。

在迁移到 SQL Azure 时，跨数据库连接的问题突然出现，我找不到该问题的直接解决方案。

以下是问题详情：

1.  我从数据访问层调用存储过程 XXX 并将用户名作为参数传递
2.  用户名用于设置 XXX 中的 CONTEXT_INFO 值
3.  然后在表插入/更新/删除触发器中使用 CONTEXT_INFO 值来存储用户名以进行应用程序审计

到目前为止我找到的解决方案：

1.  在数据库中创建表以用作 CONTEXT_INFO
2.  在数据访问层中使用 2 个连接字符串，一个用于主数据库（设置 CONTEXT_INFO），另一个用于应用程序并在每次打开与我的应用程序的连接之前执行 SET CONTEXT_INFO

但我发现这两种解决方案都有风险，特别是将来在多个 SQL Azure 数据库上扩展数据库时。

感谢您的支持。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T22:43:28.813

我采取的方法如下所示。诀窍是检查是否在 SQL Azure 上运行，然后我们需要调用“SET CONTEXT_INFO ...”。这允许在本地 SQL Server Express 和 Azure 上执行相同的代码而无需更改。

1.  创建一个表来存储上下文信息（不在 master 中，而是在同一个数据库中）

    ```
    CREATE TABLE [dbo].[ContextInfo] (
        [ContextInfo] varbinary(128) not null,
        [ApplicationUsername] nvarchar(128) not null,
        [UpdatedAt] datetime NOT NULL,
        CONSTRAINT [PK_UserContextInfo] PRIMARY KEY CLUSTERED ([ContextInfo] ASC)
    ) 
    ```

2.  创建从应用程序调用的“设置上下文信息”的存储过程

    ```
    CREATE PROCEDURE [dbo].[SetContextInfo]
      @ApplicationUsername nvarchar(128)
    AS

    SET NOCOUNT ON

    -- Remove all context items older than an 5 minutes ago
    DELETE
      FROM [dbo].[ContextInfo]
     WHERE [UpdatedAt] < DATEADD(mi, -5, GETUTCDATE())

    --
    -- Use the MERGE command to do an update/insert
    -- See: http://technet.microsoft.com/en-us/library/bb510625.aspx
    --

    IF SERVERPROPERTY('edition') <> 'SQL Azure'
    BEGIN
        DECLARE @b varbinary(128)
        SET @b = CONVERT(varbinary(128),newid())
        EXEC sp_executesql @statement=N'SET CONTEXT_INFO @b',@params=N'@b varbinary(128)',@b=@b
    END

    DECLARE @ContextInfo varbinary(128)
    SELECT @ContextInfo = CONTEXT_INFO()

    MERGE [dbo].[ContextInfo] AS target
    USING (SELECT @ContextInfo, @ApplicationUsername) AS source ([ContextInfo], [ApplicationUsername])
       ON (target.[ContextInfo] = source.[ContextInfo])
     WHEN MATCHED THEN 
            UPDATE SET [ApplicationUsername] = source.[ApplicationUsername], [UpdatedAt] = GETUTCDATE()
     WHEN NOT MATCHED THEN  
            INSERT ([ContextInfo], [ApplicationUsername], [UpdatedAt])
            VALUES (source.[ContextInfo], source.[ApplicationUsername], GETUTCDATE()); 
    ```

3.  创建一个存储过程来“获取上下文信息”

    ```
    CREATE PROCEDURE [dbo].[GetContextInfo]
    AS
        SET NOCOUNT ON
        DECLARE @ContextInfo varbinary(128)
        SELECT @ContextInfo = CONTEXT_INFO()

        SELECT [ApplicationUsername]
          FROM [dbo].[ContextInfo]
         WHERE [ContextInfo] = @ContextInfo
    GO 
    ```

4.  在触发源中，使用：

    ```
    DECLARE @UserContext TABLE ([Username] VARCHAR(128))
    INSERT INTO @UserContext (Username)
    EXEC [dbo].[GetContextInfo] 
    ```

现在您将用户名存储在表变量中。如果您的应用程序之外的管理员应用了更改，您可能还需要检查用户名是否未设置并默认为 *SYSTEM_USER* 之类的名称。

# google-maps-api-3 - 适合旅行应用的 Places API

> ID：11722847
> 
> 赞同：0
> 
> 时间：2012-07-30T13:45:19.917
> 
> 标签：google-maps-api-3, maps, google-places-api, bing-maps, here-api

我正在寻找可以与地图 API 一起使用的地点 API。以下是我一直在考虑的三个 API： - Google Maps/Places：[https](https://developers.google.com/maps/) ://developers.google.com/maps/ - Microsoft Bing：[https](https://www.microsoft.com/maps/developers/mapapps.aspx) ://www.microsoft.com/maps/developers/mapapps.aspx - 诺基亚地图：[http ://api.maps.nokia.com/2.1.0/devguide/overview.html](http://api.maps.nokia.com/2.1.0/devguide/overview.html)

他们似乎有可能给出好的结果。我要处理的应用程序是关于旅行信息的。所以我们想用最好的API来寻找观光、住宿、餐馆，但我们不关心与旅行无关的牙医、杂货店等。

你们认为哪一个最适合我们的需求？（如果你想到另一个我没有提到的好 API，请务必告诉我！）

谢谢你，J

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T11:39:21.453

在这里很难给出一个绝对的答案，因为每个 API 背后的数据质量会因地而异，而“最佳”将取决于您的应用程序的性质及其解决的问题 - 例如谷歌数据的范围（选择您的选项之一）通常被认为在美洲更强而在欧洲更弱。我听说的另一个例子是一家巴西公司决定使用诺基亚地图，因为它在农村地区的覆盖范围更好，尽管在大城市的覆盖率较弱。当然，数据的广度和质量可能会随着时间而改变。

我想你最好的选择是举办一个简单的选美比赛。

以相关 API 开发者网站的代码示例为起点

*   [必应搜索](http://www.bingmapsportal.com/isdk/ajaxv7#SearchModule5)
*   [谷歌搜索](https://google-developers.appspot.com/maps/documentation/javascript/examples/place-search)
*   [诺基亚搜索](http://developer.here.net/apiexplorer/examples/api-for-js/places-search/places-search-by-category.html)

然后修改代码以针对您的一些典型用例（例如住宿、餐厅）获得**相同**的结果，然后根据您的标准对每个 API 进行评分

*   在与您相关的领域获得什么样的覆盖？
*   修改代码有多容易？
*   你喜欢结果的呈现方式吗？
*   获得更详细的信息有多容易？
*   API 的数据计划费用是多少？

然后使用记分卡找出最适合您的 API。

这是柏林“书店”的所有三个 API 覆盖范围差异的示例 ![书店](../Images/ba4d03c2daf708c078199db30f53cb66.png)

在这种特殊情况下，诺基亚 API 返回更多数据，但如果您查找“波士顿的书店”，可能会给出不同的结果 - 您需要确定哪些位置和哪些查询与您的应用程序最相关。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-09-19T09:29:16.087

我认为以下 API 列表将对您有所帮助。

[http://www.programmableweb.com/news/134-travel-apis-kayak-yahoo-travel-and-hotelscombined/2012/02/28](http://www.programmableweb.com/news/134-travel-apis-kayak-yahoo-travel-and-hotelscombined/2012/02/28)

大约有 134 个 API 专门用于 Travel App。

# sql - 使用具有多个条件的sql获取总和

> ID：11722852
> 
> 赞同：1
> 
> 时间：2012-07-30T13:45:40.400
> 
> 标签：sql, ms-access

我在列中有数据： -

```
 Process   Volume      TAT
  1            1        Pass
  1            2        Fail
  2            5        Fail
  2            5        Pass
  3            1        Pass
  4            6        Fail
  4            4        Pass 
```

现在按进程分组，我想要体积总和（不考虑任何 TAT），TAT = 通过的体积总和，TAT = 失败的体积总和。

像这样

```
Process     Total Volume    Volume(TAT=Pass)    Volume(TAT = Fail)
1           3               1                   2
2           10              5                   5
...
... 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T13:52:56.367

对于 SQL Server，您可以使用`CASE`表达式有条件地确定需要添加的数量，然后将`SUM`它们放在一起，如下所示：

```
SELECT Process, SUM(Volume) AS TotalVolume, 
    SUM(CASE WHEN TAT = 'Pass' THEN Volume ELSE 0 END) AS Pass,
    SUM(CASE WHEN TAT = 'Fail' THEN Volume ELSE 0 END) AS Fail
FROM (
     -- Dummy data here for testing
    SELECT 1 AS Process, 1 as Volume, 'Pass' AS TAT
    UNION SELECT 1, 2, 'Fail'
    UNION SELECT 2, 5, 'Fail'
    UNION SELECT 2, 5, 'Pass'
    UNION SELECT 3, 1, 'Pass'
    UNION SELECT 4, 6, 'Fail'
    UNION SELECT 4, 4, 'Pass'
) MyTable
GROUP BY Process
ORDER BY Process 
```

对于 Microsoft Access，`CASE`不支持，因此您可以使用`SWITCH`or `IIF`，如下所示：

```
SUM(IIF(TAT = 'Pass', Volume, 0)) AS Pass 
```

# plone - 在 Plone 中添加页眉和页脚到 pdf 添加

> ID：11722853
> 
> 赞同：2
> 
> 时间：2012-07-30T13:45:42.820
> 
> 标签：plone

我正在使用 aws.pdfbook add on plone。此插件使用 htmldoc 并将页面转换为可打印或下载的 pdf。我想在 pdf-ed 内容中附加页眉和页脚。我怎样才能做到这一点？。我对 plone 很陌生，不知道附加组件的代码存储在哪里。如果有人能给我代码以将页眉和页脚附加到 pdf，我也将不胜感激。我在 linux 机器上使用 plone 4.2。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T15:22:37.993

好吧，您实际上可以自己检查[HTMLDOC 文档](https://www.msweet.org/documentation/project1/HTMLDOC.html)。

页眉和页脚可使用 HTML 注释进行配置。

由于 aws.pdfbook 使用每个内容类型的自定义模板

[https://svn.plone.org/svn/collective/aws.pdfbook/trunk/aws/pdfbook/browser/templates/](https://svn.plone.org/svn/collective/aws.pdfbook/trunk/aws/pdfbook/browser/templates/)

您应该能够通过在您自己的策略包中使用 z3c.jbot 来自定义相关模板，以便覆盖这些模板之一。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T19:28:48.427

固定的。这很简单。转到 ZMI> portal_view_customizations> printlayout (aws.pdfbook.interfaces.IAWSPDFBOOKLayer) 并在标签中添加标题。

# python - python子字符串没有被打印

> ID：11722854
> 
> 赞同：1
> 
> 时间：2012-07-30T13:45:44.037
> 
> 标签：python, find, substring

我不知道这部分代码有什么问题

```
if value.find("\\") > -1:
    newstr = int(value.find("\\"))
    print newstr
    print value
    print value[newstr:7] 
```

正在`newstr`正确打印以及`value`显示`value[newstr:7]`空白。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T13:48:11.123

`value[newstr:7]`会给你从一个位置`newstr`到另一个位置`7`。

也许你的意思是`value[newstr:newstr + 7]`？

# java - 展开 Java 中的选项卡

> ID：11722855
> 
> 赞同：4
> 
> 时间：2012-07-30T13:45:49.243
> 
> 标签：java, string, whitespace

您知道将文本字符扩展为空格的 java 方法吗？

我的文字：

```
1\. <tab>  firstpoint  <tab> page  1
10\. <tab> secondpoint <tab> page 10 
```

如果我直接用 4 个空格替换制表符，我将拥有

```
1\.    firstpoint    page1
10\.    secondpoint    page2 
```

取而代之的是，我需要一种方法来用它真正对应的空格数替换每个制表符（正如命令 :retab 的 vim 所做的那样）。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-01-21T20:18:36.600

我认为上面的 retab() 函数可能存在问题，忽略了初始选项卡。我自己做的；特此置于公有领域。

```
public static String expandTabs(String s, int tabSize) {
    if (s == null) return null;
    StringBuilder buf = new StringBuilder();
    int col = 0;
    for (int i = 0; i < s.length(); i++) {
        char c = s.charAt(i);
        switch (c) {
            case '\n' :
                col = 0;
                buf.append(c);
                break;
            case '\t' :
                buf.append(spaces(tabSize - col % tabSize));
                col += tabSize - col % tabSize;
                break;
            default :
                col++;
                buf.append(c);
                break;
        }
    }
    return buf.toString();
}

public static String spaces(int n) {
    StringBuilder buf = new StringBuilder();
    for (int sp = 0; sp < n; sp++) buf.append(" ");
    return buf.toString();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-30T13:53:25.390

虽然可能有一个库可以做到这一点，但手动解决方案非常简单：

1.  创建一个输出缓冲区 ( `StringBuilder`)。
2.  遍历字符串的字符
3.  对于每个字符，检查它是否是制表符。
    一种。如果它不是选项卡，请将其添加到输出缓冲区。
    湾。如果它是一个制表符，请先添加一个空格，然后添加尽可能多的空格，以使输出缓冲区的长度可以被 4 整除。（您的制表符长度。）
4.  返回输出缓冲区。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-30T14:48:22.217

我没有在网上找到任何实现，所以我自己写了它，基于 biziclop 的想法：

```
/**
 * Replace the tabulator characters of a String by the corresponding number of spaces.
 * Example:<pre>
 *   1.&lt;tab&gt;firstpoint&lt;tab&gt;page  1
 *   10.&lt;tab&gt;secondpoint&lt;tab&gt;page 10 </pre>
 * will become<pre>
 *   1\.      firstpoint      page  1
 *   10\.     secondpoint     page 10</pre>
 *
 * @param text     the text
 * @param tabstop  the espacement between the tab stops, typically 4 or 8
 * @return The text, with no &lt;tab&gt; character anymore
 */
public static String retab(final String text, final int tabstop)
{
    final char[] input = text.toCharArray();
    final StringBuilder sb = new StringBuilder();

    int linepos = 0;
    for (int i = 0; i<input.length; i++)
    {
        // treat the character
        final char ch = input[i];
        if (ch == '\t')
        {
            // expand the tab
            do
            {
                sb.append(' ');
                linepos++;
            } while (linepos % tabstop != 0);
        }
        else
        {
            sb.append(ch);
            linepos++;
        }

        // end of line. Reset the lineposition to zero.
        if (ch == '\n' || ch == '\r' || (ch|1) == '\u2029' || ch == '\u0085')
            linepos = 0;

    }

    return sb.toString();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-11-27T21:37:15.797

我使用 Java 8 Streams 重写了[ANTLR Guy 的答案](https://stackoverflow.com/a/34933524/2147204)，还使用[了 Alexis C. 的基于 Streams 的代码来重复一个字符串](https://stackoverflow.com/a/27690536/2147204)：

```
static String repeatString(String s, int count) {
   return Stream.generate(() -> s).limit(count).collect(Collectors.joining());
}

static String expandTabs(String s, int tabSize) {
   int[] col = new int[1];
   return s.chars().mapToObj(c -> {
      switch (c) {
         case '\t':
            int expandBy = tabSize - col[0] % tabSize;
            col[0] += expandBy;
            return repeatString(" ", expandBy);
         case '\n':
            col[0] = 0;
            break;
         default:
            col[0]++;
      }
      return String.valueOf((char) c);
   }).collect(Collectors.joining());
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-08-12T20:46:41.783

Eldar（Abusalimov，Terence Parr）帖子的变体。

更改：
1\. 将 if 语句拆分为两行，以便您可以在主体上设置断点
2\. 使用 StringBuffer 的容量构造函数来帮助它预先分配存储空间。

```
public static String expandTabs(String str, int tabSize) {
    if (str == null)
        return null;
    StringBuilder buf = new StringBuilder(str.length()+tabSize);
    int col = 0;
    for (int i = 0; i < str.length(); i++) {
        char c = str.charAt(i);
        switch (c) {
            case '\n' :
                col = 0;
                buf.append(c);
                break;
            case '\t' :
                buf.append(spaces(tabSize - col % tabSize));
                col += tabSize - col % tabSize;
                break;
            default :
                col++;
                buf.append(c);
                break;
        }
    }
    return buf.toString();
}

public static StringBuilder spaces(int n) {
    StringBuilder buf = new StringBuilder(n);
    for (int sp = 0; sp < n; sp++)
        buf.append(" ");
    return buf;
} 
```

# javascript - jQuery如何通过选择显示/隐藏选择

> ID：11722862
> 
> 赞同：1
> 
> 时间：2012-07-30T13:46:24.190
> 
> 标签：javascript, jquery

我需要一些关于我的 jquery 脚本的帮助。

我有两个`select`盒子。当我从第一个`select`框中选择一个选项时，第二个框应显示所有可用选项中的 3 个项目。`select`执行此操作的脚本，还在第二个框的顶部向我显示了“附加”值。

有人能告诉我为什么吗？

这是我的 HMTL 代码：

```
<select id="viewSelector" style="float: left;">
 <option value="0">-- Select a View --</option>       
 <option value="view1">W</option>
 <option value="view2">X</option>
 <option value="view3">Y</option>
 <option value="view4">Z</option>
</select>

<select id="viewSelect1">

 <option id="view1a">W1</option>
 <option id="view1b">W2</option> 
 <option id="view1c">W3</option>

 <option id="view2a">X1</option>
 <option id="view2b">X2</option> 
 <option id="view2c">X3</option>

 <option id="view3a">Y1</option>
 <option id="view3b">Y2</option> 
 <option id="view3c">Y3</option>

 <option id="view4a">Z1</option>
 <option id="view4b">Z2</option> 
 <option id="view4c">Z3</option>

</select> 
```

这是我的 jQuery/JavaScript：

```
$(document).ready(function() {
  $.viewMap = {
    '0' : $([]),
    'view1' : $('#view1a, #view1b, #view1c'),
    'view2' : $('#view2a, #view2b, #view2c'),
    'view3' : $('#view3a, #view3b, #view3c'),
    'view4' : $('#view4a, #view4b, #view4c'),
  };

  $.each($.viewMap, function() { this.hide(); });
    $('#viewSelect1').hide();

  $('#viewSelector').change(function() {
    // hide all
    $.each($.viewMap, function() { this.hide(); });
      $('#viewSelect1').hide();
    // show current
    $.viewMap[$(this).val()].show();
      $('#viewSelect1').show();
  });
});​ 
```

您可以在这里找到工作示例：http: [//jsfiddle.net/amarcinkowski/Sg8Xf/9/](http://jsfiddle.net/amarcinkowski/Sg8Xf/9/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T14:09:03.490

简单获取所选值的 id 并添加属性 selected 。

```
var id = $.viewMap[$(this).val()].attr("id");

$('#'+id).attr('selected', 'selected'); 
```

* * *

```
$(document).ready(function() {
  $.viewMap = {
    '0' : $([]),
    'view1' : $('#view1a, #view1b, #view1c'),
    'view2' : $('#view2a, #view2b, #view2c'),
    'view3' : $('#view3a, #view3b, #view3c'),
   'view4' : $('#view4a, #view4b, #view4c'),
};

$.each($.viewMap, function() { this.hide(); });
$('#viewSelect1').hide();

$('#viewSelector').change(function() {
// hide all
$.each($.viewMap, function() { this.hide(); });
  $('#viewSelect1').hide();
// show current
$.viewMap[$(this).val()].show();
  $('#viewSelect1').show();
  var id = $.viewMap[$(this).val()].attr("id");

  $('#'+id).attr('selected', 'selected');
});
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T13:57:58.817

**此处编辑**的是一个有效的 jsFiddle[示例](http://jsfiddle.net/uttara/Sg8Xf/24/)

添加

```
<option id="view0">Select</option> 
```

到

```
<select id="viewSelect1">
....
</select> 
```

修改了你的对象

```
$.viewMap = {
    '0' : $([]),
    'view1' : $('#view1a, #view1b, #view1c'),
    'view2' : $('#view2a, #view2b, #view2c'),
    'view3' : $('#view3a, #view3b, #view3c'),
    'view4' : $('#view4a, #view4b, #view4c'),
    'viewBlank' : $("#view0")
}; 
```

并添加了一行

```
// show current
    $.viewMap[$(this).val()].show();
    $.viewMap['viewBlank'].show();
    $('#viewSelect1').show(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T13:58:02.937

改变

```
$('#viewSelect1').show() 
```

到

```
$('#viewSelect1')
             .show()
             .find('option:visible:first')  // get the first visible option
             .attr('selected', 'selected'); // set that option as selected 
```

**[演示](http://jsfiddle.net/Sg8Xf/16/)**

### 根据评论

```
 $('#viewSelector').change(function() {
        var str = $('#viewSelect1 option:selected').attr('id').replace(/view\d/,'');
        // hide all
        $.each($.viewMap, function() {
            this.hide();
        });
        $('#viewSelect1').hide();
        // show current
        $.viewMap[$(this).val()].show();
        $('#viewSelect1')
            .show()
            .find('option:visible[id*='+ str+']')
            .attr('selected', 'selected');
    }); 
```

**[演示](http://jsfiddle.net/Sg8Xf/26/)**

# git - 从生产文件夹创建 git 存储库

> ID：11722863
> 
> 赞同：1
> 
> 时间：2012-07-30T13:46:26.687
> 
> 标签：git, repository

我有一台带有生产网站的机器，我想在该机器上创建一个 git 存储库，以便使用 git 管理网站。

所以我做的第一件事就是在生产机器上创建一个空的 .git 存储库：

```
mkdir repos
cd repos
mkdir production.git
cd production.git
git init --bare 
```

在 hooks/post-receive 下的这个存储库中，我添加了以下几行：

```
#!/bin/sh
GIT_WORK_TREE=/var/www/production_website git checkout -f 
```

然后我已经将我的生产网站的文件夹下载到我的本地机器中并启动了 git：

```
cd production_website
git init 
```

之后我做了第一次提交：

```
git add .
git commit -m "first commit" 
```

最后，我添加了远程存储库并进行了第一次推送：

```
git remote add origin ssh://myuser@productionmachine.com/repos/production.git
git push origin master 
```

但是当我进行推送时，它会给我以下错误消息：

```
remote: fatal: This operation must be run in a work tree 
```

它在接收后挂钩被激活时触发。

关于我可能做错了什么的任何建议？

**更新**：

在第一步中，在生产机器中创建一个空的 .git 存储库时，如果我使用`git init`而不是`git init --bare`在进行推送时收到此错误消息：

```
remote: error: refusing to update checked out branch: refs/heads/master
remote: error: By default, updating the current branch in a non-bare repository
remote: error: is denied, because it will make the index and work tree inconsistent
remote: error: with what you pushed, and will require 'git reset --hard' to match
remote: error: the work tree to HEAD.
remote: error: 
remote: error: You can set 'receive.denyCurrentBranch' configuration variable to
remote: error: 'ignore' or 'warn' in the remote repository to allow pushing into
remote: error: its current branch; however, this is not recommended unless you
remote: error: arranged to update its work tree to match what you pushed in some
remote: error: other way.
remote: error: 
remote: error: To squelch this message and still keep the default behaviour, set
remote: error: 'receive.denyCurrentBranch' configuration variable to 'refuse'. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T15:16:00.257

我宁愿保持 repo 裸露，然后在 post-receive 钩子中

```
cd /path/to/non-bare/repo
git --git-dir /path/to/non-bare/repo/.git --work-tree=/path/to/non-bare/repo pull 
```

那是：

*   从一个裸仓库拉取（你可以推到它），然后从*第二个*非裸仓库拉取
*   而不是尝试直接推送到裸仓库（这很困难，如“[如何使用 git 裸仓库推送到非裸仓库？](https://stackoverflow.com/a/11373954/6309) ”中所述）

# c++ - 顺序前向选择 (SFS) 算法

> ID：11722864
> 
> 赞同：0
> 
> 时间：2012-07-30T13:46:28.743
> 
> 标签：c++, algorithm, function, vector, struct

我正在尝试实现本[文档](http://research.cs.tamu.edu/prism/lectures/pr/pr_l11.pdf)的`SFS`算法。`pages 11-12`

到目前为止，我所拥有的`C++`是以下内容：

```
#include "stdafx.h"
#include <iostream>
#include <vector>
#include <algorithm>
#include <iterator>
using namespace std;

struct Features
{
    int m_f1;
    int m_f2;
    int m_f3;
    int m_f4;

    Features(int a, int b, int c, int d) :
        m_f1(a),
        m_f2(b),
        m_f3(c),
        m_f4(d)
    {

    }
};

int criterionFunction(Features const& features)
{
    return -2 * features.m_f1 * features.m_f2 +
            3 * features.m_f3 + 
            5 * features.m_f4 +
           -2 * features.m_f1 * features.m_f2 * features.m_f3 + 
            7 * features.m_f3 +
            4 * features.m_f4 +
           -2 * features.m_f1 * features.m_f2 * features.m_f3 * features.m_f4;
}

int main(){

    Features feature,
    vector<Features> listOfFeatures(4);

    listOfFeatures.push_back(Features(1,0,0,0));
    listOfFeatures.push_back(Features(0,1,0,0));
    listOfFeatures.push_back(Features(0,0,1,0));
    listOfFeatures.push_back(Features(0,0,0,1));

    vector<int> listOfCriterion;

} 
```

我的问题是：

**- 有什么方法可以调用`criterionFunction()`任何通过的功能（即m_f1）将获取值`1`，而未通过的将具有值`0`？**

**- 在这里，我想选择（我的输出）最佳`three`特征的组合。我怎样才能做到这一点？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T14:29:52.253

我并不完全清楚您的问题对您的要求是什么，但是一般的答案是使用 C++ 线性代数库，例如犰狳：

[http://arma.sourceforge.net/](http://arma.sourceforge.net/)

这将为您提供一个矩阵类和相关操作，具有与 MATLAB 类似的接口。

# python - setup.py 中的脚本名称，为什么我需要脚本文件名的文件扩展名？

> ID：11722870
> 
> 赞同：0
> 
> 时间：2012-07-30T13:46:53.053
> 
> 标签：python, distutils

与[我之前的回答](https://stackoverflow.com/questions/4404258/distutils-not-a-regular-file-skipped/11709778#11709778)相关——我对使用 setup.py 分发 python 包非常陌生。

根据[python 文档](http://docs.python.org/distutils/setupscript.html#installing-scripts)，在 setup.py 文件中将脚本参数传递给 setup() 时，看起来您应该使用不带文件扩展名的脚本名称。

```
setup(...,
      scripts=['scripts/xmlproc_parse', 'scripts/xmlproc_val']
      ) 
```

但是，我发现我自己的测试用例需要在脚本参数中添加“.py”扩展名才能使打包工作。例如：

```
config = {...
    'scripts': ['bin/testscript3.py'],
    }
....

setup(**config) 
```

我做错了什么，还是预期的行为？我的猜测是这是意料之中的，但我只是对 python 文档感到困惑。我确实意识到这可能有一个微不足道的解释，但经过一番谷歌搜索后我无法弄清楚，也许其他一些新手会从这个问题中受益。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T14:08:57.497

您必须完全按照文件系统上的表示来编写脚本名称。

我认为您对文档感到困惑，因为在某些平台（Unix）上，文件扩展名不是选择在哪个程序中执行文件的标准方式（如果您想了解更多信息，请查找“ [unix shebang](https://en.wikipedia.org/wiki/Shebang_%28Unix%29) ”），因此，脚本上通常没有文件扩展名。

# java - 映射任务中长正则表达式的最佳选择是什么？

> ID：11722871
> 
> 赞同：0
> 
> 时间：2012-07-30T13:46:54.990
> 
> 标签：java, python, regex, pypi

我有一本关于生物医学实体的术语词典。每个术语（键）都有一个标识符（值）列表。

我必须在自由文本中找到这个术语。我有几本大约 300,000 个术语的词典，对于这个任务，我使用 Python 和 Java 来评估速度。

该算法就像（在 Python 中）：

```
for sentence in text_list:
    terms = dictionary.keys()
    pattern = re.compile("|".join(terms))
    matches = pattern.finditer(sentence)
    for m in matches:
        ini = m.start()
        end = m.end()
        match = m.group(1)
        save_result(ini, end, match) 
```

我正在使用[pypi.python.org/pypi/regex](http://pypi.python.org/pypi/regex)包，因为标准 re 包无法编译我的长正则表达式。此外，我在 Java 中完成了相同的算法。

我使用了大约 650,000 个句子，在 Python 中，编译需要 3-4 分钟，算法可以在 3-4 小时内完成。

Java 在几秒钟内编译正则表达式，但算法需要 16-18 小时...O_o

我一直在阅读不同的网站，[http://swtch.com/~rsc/regexp/regexp1.html](http://swtch.com/~rsc/regexp/regexp1.html)有一个有趣的信息，但我不知道如何处理。

我的问题是......我已经在大约 3 小时内完成了所有句子，你知道另一种在更短的时间内完成同样任务的方法吗？也许用其他语言，或者使用其他库或包？（在 Java 中，我使用的是标准库`java.util.regex.*`）。上面的网站谈到了 Thonpson NFA 算法，有这个算法的库或包，用于 Java、Python 或其他什么？`grep`（Linux）是一个强大的工具，你认为我可以使用它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T13:50:19.967

正则表达式对于这项工作来说是一个错误的工具。使用您的术语创建一个字典（Python 的哈希表名称），将您的文本拆分为单词（使用 string.split 和 string.rstrip 删除标点符号），并根据该字典检查文本中的每个单词。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T15:19:56.703

您正在为文本的每个句子重建和重新编译 RE。在循环外编译一次：

```
terms = dictionary.keys()              # why are you using a dict?
pattern = re.compile("|".join(terms))

for sentence in text_list:
    matches = pattern.finditer(sentence)
    # etc. 
```

这应该可以节省你一些时间。

如果您想要一个具有 Cox 描述的算法的 RE 库，请四处寻找与他的[RE2](http://swtch.com/~rsc/regexp/regexp3.html)库的 Python 或 Java 绑定。或者，使用`egrep`或 Awk。

# c# - 使用 LINQ 大写对象列表

> ID：11722874
> 
> 赞同：5
> 
> 时间：2012-07-30T13:47:08.603
> 
> 标签：c#, linq

我有下面的代码。我想将此列表中的所有项目转换为大写。

有没有办法在 Linq 中做到这一点？

```
public class Person
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public int Age { get; set; }
}

public class MyClass
{
    List<Person> myList = new List<Person>{ 
        new Person { FirstName = "Aaa", LastName = "BBB", Age = 2 },
        new Person{ FirstName = "Deé", LastName = "ève", Age = 3 }
    };
} 
```

**更新**

我不想逐场循环或逐场进行。有没有办法通过反射将每个属性的值大写？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-30T13:51:19.537

为什么要使用 LINQ？

使用`List<T>.ForEach`：

```
myList.ForEach(z =>
                {
                    z.FirstName = z.FirstName.ToUpper();
                    z.LastName = z.LastName.ToUpper();
                }); 
```

* * *

编辑：不知道你为什么要通过反射来做到这一点（我个人不会这样做......），但这里有一些代码会将所有返回字符串的属性大写。请注意，它远非完美，但它是您的基础，以防您真的想使用反射......：

```
public class Person
{
    public string FirstName { get; set; }

    public string LastName { get; set; }

    public int Age { get; set; }
}

public static class MyHelper
{
    public static void UppercaseClassFields<T>(T theInstance)
    {
        if (theInstance == null)
        {
            throw new ArgumentNullException();
        }

        foreach (var property in theInstance.GetType().GetProperties(BindingFlags.Public | BindingFlags.Instance))
        {
            var theValue = property.GetValue(theInstance, null);
            if (theValue is string)
            {
                property.SetValue(theInstance, ((string)theValue).ToUpper(), null);
            }
        }
    }

    public static void UppercaseClassFields<T>(IEnumerable<T> theInstance)
    {
        if (theInstance == null)
        {
            throw new ArgumentNullException();
        }

        foreach (var theItem in theInstance)
        {
            UppercaseClassFields(theItem);
        }
    }
}

public class Program
{
    private static void Main(string[] args)
    {
        List<Person> myList = new List<Person>{
            new Person { FirstName = "Aaa", LastName = "BBB", Age = 2 },
            new Person{ FirstName = "Deé", LastName = "ève", Age = 3 }
        };

        MyHelper.UppercaseClassFields<Person>(myList);

        Console.ReadLine();
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-30T13:49:27.250

LINQ 不提供任何工具来更新基础数据。使用 LINQ，您可以从现有列表创建一个新列表：

```
// I would say this is overkill since creates a new object instances and 
// does ToList()
var updatedItems = myList.Select(p => new Person 
                              {
                                FirstName = p.FirstName.ToUpper(), 
                                LastName = p.LastName.ToUpper(), 
                                Age = p.Age
                              })
                         .ToList(); 
```

如果使用 LINQ 不是主要的，我建议使用`foreach`循环。

**更新：**

为什么需要这样的解决方案？只有一种以通用方式执行此操作的方法 - 反射。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-06-30T02:38:49.817

最简单的方法是使用`ConvertAll`：

```
myList = myList.ConvertAll(d => d.ToUpper()); 
```

`ForEach`与循环原始列表`ConvertAll`并创建一个您需要重新分配的新列表没有太大区别。

```
var people = new List<Person> { 
    new Person { FirstName = "Aaa", LastName = "BBB", Age = 2 },
    new Person{ FirstName = "Deé", LastName = "ève", Age = 3 }
};
people = people.ConvertAll(m => new Person 
         {
             FirstName = m.FirstName?.ToUpper(), 
             LastName = m.LastName?.ToUpper(), 
             Age = m.Age
         }); 
```

回答您的更新

> 我不想逐场循环或逐场进行。有没有办法通过反射将每个属性的值大写？

如果您不想逐场循环或逐场进行。你可以使用类上的属性来给你大写，就像这样

```
public class Person
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public int Age { get; set; }
    public string FirstNameUpperCase => FirstName.ToUpper();
    public string LastNameUpperCase => LastName.ToUpper();
} 
```

或者你可以像这样使用后场

```
public class Person
{
    private string _firstName;
    public string FirstName {
        get => _firstName.ToUpper();
        set => _firstName = value;
    }

    private string _lastName;
    public string LastName {
        get => _lastName.ToUpper();
        set => _lastName = value;
    }

    public int Age { get; set; }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-30T13:52:41.247

您只能真正使用 linq 来提供新对象的列表

```
var upperList = myList.Select(p=> new Person {
   FirstName = (p.FirstName == null) ? null : p.FirstName.ToUpper(),
   LastName = (p.LastName == null) ? null : p.LastName.ToUpper(),
   Age = p.Age
   }).ToList(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-12T02:39:29.640

```
p.lastname.ToString().ToUpper().Contains(TextString) 
```

# ios - 获取有关 YouTube 视频的信息

> ID：11722875
> 
> 赞同：0
> 
> 时间：2012-07-30T13:47:10.370
> 
> 标签：ios, youtube

我正在寻找 YouTube 视频的标题和持续时间并将其显示在我的应用程序中。我想动态地做到这一点，因为会有几个视频，它们会改变。我一直在寻找提供此信息的 URL，但我没有运气。有谁知道这样做的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T13:57:42.467

您需要使用 Youtube API，有关如何为单个视频执行此操作的详细信息如下：

[https://developers.google.com/youtube/2.0/developers_guide_protocol_video_entries](https://developers.google.com/youtube/2.0/developers_guide_protocol_video_entries)

这是获取星期五 API 数据的 URL：

[https://gdata.youtube.com/feeds/api/videos/kfVsfOSbJY0?v=2](https://gdata.youtube.com/feeds/api/videos/kfVsfOSbJY0?v=2)

# java - 在发布请求后对 URL 进行编码

> ID：11722876
> 
> 赞同：0
> 
> 时间：2012-07-30T13:47:10.040
> 
> 标签：java, google-app-engine, jakarta-ee, post, url-encoding

当访问者从以下 URL 上传文件时：

```
me.appspot.com/contact.jsp 
```

更改为：

```
http://me.appspot.com/_ah/upload/AMmfu6bOSMzJWAvFtAg59tmmHbOso2f9vU2Uf9e4oqa3ZxDYiZEXh2P04ZesTAiT2B6seI8JzfdHC7ufiO6E-C4bfIm9qgsjBjc6JJ6X2yhIQEz-WkUrMKE/ALBNUaYAAAAAUBaPuEgAbsrLSPhaMXi5FaOkGPeLI3TI/ 
```

在重定向到用户上传文件的同一页面之后。

```
<form action="<%= blobstoreService.createUploadUrl("/contact.jsp") %>" method="post" enctype="multipart/form-data"  > 
```

有什么办法可以将 URL 更改为 simple`me.appspot.com/contact.jsp`吗？我的意思是我想将 URL 编码为刚才提到的 URL。有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T14:02:56.660

Blobstore 上传通过将上传数据重定向到 AppEngien 中的空间处理程序来工作，该处理程序不受前端处理程序的限制（如 32MB 请求限制或 60 秒超时）。完成上传后，它重定向到您的处理程序。

您可以使用您的处理程序执行上传到 blobstore，但您将仅限于相对论小型上传。

# python - 在 python 中使用“finally”子句的范围是什么？

> ID：11722879
> 
> 赞同：2
> 
> 时间：2012-07-30T13:47:21.387
> 
> 标签：python, try-finally

> **可能重复：**
> [else 的目的和最后的异常处理](https://stackoverflow.com/questions/6051934/purpose-of-else-and-finally-in-exception-handling)

我想了解为什么该`finally`子句存在于`try/except`语句中。我理解它的作用，但如果它应该在语言中占有一席之地，我显然会错过一些东西。`finally`具体来说，在字段中编写子句与在语句之外编写子句有什么区别`try/except`？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-30T13:49:15.820

无论套件中发生什么，`finally`套件都*保证*被执行`try`。

使用它来清理文件、数据库连接等：

```
try:
    file = open('frobnaz.txt', 'w')
    raise ValueError
finally:
    file.close()
    os.path.remove('frobnaz.txt') 
```

无论异常处理程序（`except`套件）是否捕获异常，或者`return`您的代码中是否存在语句，这都是正确的：

```
def foobar():
    try:
        return
    finally:
        print "finally is executed before we return!" 
```

在循环中使用`try`/语句，然后使用or`finally`退出循环，将再次执行该套件。保证在所有情况下都执行。`continue``break``finally`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T13:50:30.223

`finally`如果您错过了代码中的异常类型，该子句将始终执行。

引用[文档](http://docs.python.org/reference/compound_stmts.html#the-try-statement)：

> 如果 finally 存在，它指定一个“清理”处理程序。执行 try 子句，包括任何 except 和 else 子句。如果任一子句发生异常且未处理，则暂时保存该异常。finally 子句被执行。如果有一个保存的异常，它会在 finally 子句的末尾重新引发。如果 finally 子句引发另一个异常或执行 return 或 break 语句，则保存的异常将丢失。在 finally 子句执行期间，异常信息对程序不可用。

# php - 将 PHP 字符串（html 源代码）转换为 jQuery 对象美元符号 $?

> ID：11722880
> 
> 赞同：2
> 
> 时间：2012-07-30T13:47:29.807
> 
> 标签：php, jquery, json, jquery-selectors, encode

假设我有一个完整的 html 页面源字符串（在 PHP 中），例如：

```
<?php
$html_source = '
    <html>
        <head>
        </head>
        <body>
            <div class="class1">Hello!</div>
            <div class="class2">World</div>
        </body>
    </html>'; //PHP
?> 
```

然后我想将该 php 字符串用作 jQuery`$`对象，以便使用：

```
alert(
    $("div.class1").html(); //jQuery
); 
```

那么如何将 PHP 字符串转换为 jQuery 美元符号`$`？

***注意***：
这是因为我的情况是......我有一个包含完整 html 页面源的数据库。然后我必须将它们解析出来，但不是整个页面。一些 DOM 过滤区域。就像，里面那个页面源的“右面板”。那就是问题所在。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T13:55:27.567

首先，使字符串 JavaScript 安全。给定一个字符串，`json_encode`将使其 JS 安全（尽管不是 JSON）。

然后，您可以将其输出到 HTML 中的脚本块中，并将其传递给 jQuery 函数。

```
<script>
var foo = $(<?php echo json_encode($html_source); ?>);
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T13:51:10.323

尝试使用 Zend 框架/库的[Zend_Dom_Query](http://framework.zend.com/manual/en/zend.dom.query.html)部分。它了解大部分 CSS2，当您需要更强大的功能时，您总是可以回退到 xpath。

如果您想拥有更像 JQuery 的外观，您也可以尝试[phpquery](http://code.google.com/p/phpquery/)项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T13:57:05.543

如果您需要 html 部分，或者如果您需要使用 php 处理此部分，则可以使用 php dom 文档扩展。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-30T14:10:04.900

尝试这个

```
<script>
     var myStr = $(<?php echo $html_source; ?>);
</script> 
```

# python - 在 Python 中将字符串列表转换为整数（或双精度）

> ID：11722882
> 
> 赞同：6
> 
> 时间：2012-07-30T13:47:41.010
> 
> 标签：python, list, int, double

我有很多与此类似的字符串列表：

```
list = ['4', '-5', '5.763', '6.423', '-5', '-6.77', '10'] 
```

我想将其转换为整数（或双精度）列表，但`-`不断产生错误。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-31T09:54:50.630

```
>>> lst = ['4', '-5', '5.763', '6.423', '-5', '-6.77', '10']
>>> map(float, lst)
[4.0, -5.0, 5.763, 6.423, -5.0, -6.77, 10.0] 
```

并且不要`list`用作变量名

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-02-15T00:58:26.580

对于 Python 3：

```
listOfStrings = ['4', '-5', '5.763', '6.423', '-5', '-6.77', '10']
listOfFloats = list(map(float, listOfStrings)) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-31T10:01:24.047

```
>>> [float(x) for x in ['4', '-5', '5.763', '6.423', '-5', '-6.77', '10']]
[4.0, -5.0, 5.763, 6.423, -5.0, -6.77, 10.0] 
```

# android - android.R.layout.simple_list_item_1 和 android.R.layout.simple_list_item_2 有什么区别

> ID：11722885
> 
> 赞同：26
> 
> 时间：2012-07-30T13:47:44.613
> 
> 标签：android

谁能解释 android.R.layout.simple_list_item_1 和 android.R.layout.simple_list_item_2 在 android 的 arrayadapter 中。

我知道 android.R.layout.simple_list_item_1 和 android.R.layout.simple_list_item_2 是在 android 本身中定义的布局。

在 android.R.layout.simple_list_item_1 中只包含一个文本视图，但 android.R.layout.simple_list_item_2 包含两个文本视图。

我想以 android.R.layout.simple_list_item_2 为例 ...如何使用适配器在列表视图中显示两个文本视图。

我的代码是

```
package com.app.listview;

import android.app.Activity;
import android.os.Bundle;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class ExampleListViewActivity extends Activity {

    private String[] nameArr = new String[]{"Arun","Anil","Ankit","Manoj"};
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        ListView listView =  (ListView)findViewById(R.id.lv);
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                                                                android.R.layout.simple_list_item_1,
                                                                android.R.id.text1,
                                                                nameArr);
        listView.setAdapter(adapter);
    }
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-08-30T10:00:49.753

我发现这是对您的问题的最简单的答案：

```
ArrayAdapter adapter = new ArrayAdapter(context, android.R.layout.simple_list_item_2, android.R.id.text1, list) {
  @Override
  public View getView(int position, View convertView, ViewGroup parent) {
    View view = super.getView(position, convertView, parent);
    TextView text1 = (TextView) view.findViewById(android.R.id.text1);
    TextView text2 = (TextView) view.findViewById(android.R.id.text2);

    text1.setText(person[position].getName());
    text2.setText(person[position].getAge());
    return view;
  }
}; 
```

如果您没有注意到：诀窍是向`android.R.id.text1`ArrayAdapter 提供 as（主要是不必要的）参数，否则调用`super`将导致异常。

此外，此解决方案不需要`Inflater`或使用`TwoLineListItem`API 17 中已弃用的 。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-07-30T13:59:30.717

区别如下。`simple_list_item_1`仅包含一个`TextView`，而`simple_list_item_2`在 的子类中有两个`RelativeLayout`。这些都取自果冻豆。

**simple_list_item_1**

```
<?xml version="1.0" encoding="utf-8"?>
<!-- Copyright (C) 2006 The Android Open Source Project

     Licensed under the Apache License, Version 2.0 (the "License");
     you may not use this file except in compliance with the License.
     You may obtain a copy of the License at

          http://www.apache.org/licenses/LICENSE-2.0

     Unless required by applicable law or agreed to in writing, software
     distributed under the License is distributed on an "AS IS" BASIS,
     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     See the License for the specific language governing permissions and
     limitations under the License.
-->

<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/text1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:textAppearance="?android:attr/textAppearanceListItemSmall"
    android:gravity="center_vertical"
    android:paddingLeft="?android:attr/listPreferredItemPaddingLeft"
    android:paddingRight="?android:attr/listPreferredItemPaddingRight"
    android:minHeight="?android:attr/listPreferredItemHeightSmall"
/> 
```

**simple_list_item_2**

```
<?xml version="1.0" encoding="utf-8"?>
<!-- Copyright (C) 2006 The Android Open Source Project

     Licensed under the Apache License, Version 2.0 (the "License");
     you may not use this file except in compliance with the License.
     You may obtain a copy of the License at

          http://www.apache.org/licenses/LICENSE-2.0

     Unless required by applicable law or agreed to in writing, software
     distributed under the License is distributed on an "AS IS" BASIS,
     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     See the License for the specific language governing permissions and
     limitations under the License.
-->

<TwoLineListItem xmlns:android="http://schemas.android.com/apk/res/android" 
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:minHeight="?android:attr/listPreferredItemHeight"
    android:mode="twoLine"
>

    <TextView android:id="@android:id/text1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
    android:layout_marginLeft="?android:attr/listPreferredItemPaddingLeft"
    android:layout_marginTop="8dip"
        android:textAppearance="?android:attr/textAppearanceListItem"
    />

    <TextView android:id="@android:id/text2"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@android:id/text1"
    android:layout_alignLeft="@android:id/text1"
        android:textAppearance="?android:attr/textAppearanceSmall"
    />

</TwoLineListItem> 
```

根据[ArrayAdapter 的文档](http://developer.android.com/reference/android/widget/ArrayAdapter.html)：

> 默认情况下，此类期望提供的资源 id 引用单个 TextView。

所以默认情况下， an`ArrayAdapter`不会自动填充多个`TextView`实例。但是，您可以覆盖该`getView()`方法并填写出现的两个`TextView`s`R.layout.simple_list_item_2`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-30T13:59:01.747

正如您所注意到的，layout_1 有一个 textView，它是默认使用的。layout_2 有两个文本视图 - 另一个用作子文本。

但这是诀窍 - 并非所有适配器都使用潜台词；）

我发现为任何事物编写一个专门构建的自定义适配器更容易（不是强制性的）......

例如，这是一个自定义适配器，它将使用这个 simple_list_item_2 显示名称和状态

这**不会**是复制/粘贴代码，但你会通过一些调整来修复它......

```
 public class BuddyArrayAdapter extends ArrayAdapter<Buddy>
 {

private static final String tag         = "BuddyArrayAdapter";
private Context             context;

private TextView            buddyName;
private TextView            buddyStatus;
private List<Buddy>         buddies     = new ArrayList<Buddy>();

/**
 * The default constructor which is invoked to create the buddy array
 * adapter.
 * <p>
 * The adapter is needed to 'translate' data into a viewable item / widget.
 * 
 * @param context
 *            the application context
 * @param objects
 *            the backing array populated by Buddy objects to be displayed.
 * @see {@link ArrayAdapter}<T>
 */

public BuddyArrayAdapter(Context context, int textViewResourceId, List<Buddy> objects)
{
    super(context, textViewResourceId, objects);
    this.context = context;
    this.buddies = objects;
    Collections.sort(buddies);
}

/**
 * The method used for determining how many views are in this list or in
 * other words, how many views are managed by this adapter.
 * 
 * @return the number of items this adapter controls.
 */
@Override
public int getCount()
{
    return this.buddies.size();
}

/**
 * Get the data item associated with the specified position in the data set.
 * 
 * @param index
 *            Position of the item whose data we want within the adapter's
 *            data set.
 * @return the Buddy object data at the specified position.
 */
@Override
public Buddy getItem(int index)
{
    if (index <= getCount())    //IndexOutOfBoundsException fix
        return this.buddies.get(index);
    return this.buddies.get(getCount() - 1);
}

/**
 * Get a View that displays the data at the specified position in the data
 * set. You can either create a View manually or inflate it from an XML
 * layout file. When the View is inflated, the parent View (GridView,
 * ListView...) will apply default layout parameters unless you use
 * inflate(int, android.view.ViewGroup, boolean) to specify a root view and
 * to prevent attachment to the root.
 * <p>
 * This method is used to generate views to be used in the ListView. This
 * the method that defines how data will look and be represented throughout
 * the UI.
 * 
 * @param position
 *            The position of the item that is being placed / The position
 *            of the item within the adapter's data set of the item whose
 *            view we want.
 *            <p>
 * @param convertView
 *            The old view to reuse, if possible. Note: You should check
 *            that this view is non-null and of an appropriate type before
 *            using. If it is not possible to convert this view to display
 *            the correct data, this method can create a new view.
 *            Heterogeneous lists can specify their number of view types, so
 *            that this View is always of the right type (see
 *            getViewTypeCount() and getItemViewType(int))
 *            <p>
 * @param parent
 *            The parent that this view will eventually be attached to.
 * @return the view that defines how this Buddy object is represented in the
 *         ListView / A View corresponding to the data at the specified
 *         position.
 * 
 * @see {@link BaseAdapter#getView(int, View, ViewGroup)}
 */
@Override
public View getView(int position, View convertView, ViewGroup parent)
{
    View row = convertView;

    if (row == null)
    {
        // ROW INFLATION
        LayoutInflater inflater = (LayoutInflater) this.getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        row = inflater.inflate(R.layout.simple_list_item_2, parent, false);
    }

    // Get item
    Buddy buddy = getItem(position);
    buddy.refresh();

    buddyName = (TextView) row.findViewById(R.id.buddy_name);   //change this to textField1  from simple_list_item_2
    buddyName.setText(buddy.toString());

    buddyStatus = (TextView) row.findViewById(R.id.buddy_mood); //change this to textField2 from simple_list_item_2
    buddyStatus.setText(buddy.getMood());
    //      Log.d(tag, buddy.getIdentity()+"'s mood is "+buddyStatus.getText());

    return row;
} 
```

因此，我建议您使用包含子文本的附加 ArrayList 扩展构造函数，然后使用 em 而不是 buddy.getMood() 调用。

最后，实例化这个适配器并将其设置为listView的适配器。瞧，您已经显示了两个文本；）

为了进一步细化，制作您自己的包含两个 textView 的 XML 文件，如下所示。

```
 <?xml version="1.0" encoding="utf-8"?>
 <com.skype.widget.CheckableLinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="horizontal" >

<CheckedTextView
    android:id="@+id/buddy_name"
    android:layout_width="fill_parent"
    android:layout_height="?android:attr/listPreferredItemHeight"
    android:checkMark="?android:attr/textCheckMark"
    android:gravity="center_vertical"
    android:paddingLeft="6dip"
    android:paddingRight="6dip"
    android:text="@string/buddy_name"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<TextView
    android:id="@+id/buddy_mood"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/empty_string"
    android:layout_marginLeft="-350dp"
    android:layout_marginTop="16dp"
    android:gravity="center_vertical|bottom"
    android:textAppearance="?android:attr/textAppearanceSmall" /> 
```

而不是

```
 row = inflater.inflate(R.layout.simple_list_item_2, parent, false); 
```

做

```
 row = inflater.inflate(R.layout.buddy_list_item, parent, false); 
```

好了，现在您知道了如何使适配器与自定义 XML 和 listView 一起工作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-05-31T10:45:31.700

消息 - 是 a `List<Map<String, String>>`，标题和数据 - 是地图的键。

```
SimpleAdapter adapter = new SimpleAdapter(this, messages,
            android.R.layout.simple_list_item_2,
            new String[] {"title", "data"},
            new int[] {android.R.id.text1,
        android.R.id.text2,
    });
list.setAdapter(adapter); 
```

这就是你所需要的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-30T14:02:55.523

ArrayAdapter 只知道如何处理每行一个 TextView。如果您希望它处理更多内容，则需要通过子类化 ArrayAdapter 并覆盖该`getView()`方法来自己处理。

根据您创建阵列的方式，可能还有另一个答案。

如果数组是从数据库创建的（您显示了一个硬编码的字符串数组，但据我所知，这可能只是您的示例）并且您不受其他因素的限制，您可以考虑使用一个 CursorAdapter，因为它们已经设置为处理多个 TextView，而无需对适配器进行子类化，它可以节省您将 DB 数据转换为数组的处理能力。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-30T14:02:44.853

我也使用基本项目以编程方式完成了此操作：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:layout_marginLeft="3dp"
    android:id="@+id/linearLayoutBasicItem"
     >

    <ImageView
        android:id="@+id/imageViewBasicItem"
        android:layout_marginTop="3dp"
        android:layout_width="80dp"
        android:layout_height="100dp"
        android:src="@drawable/blockbreaker3"
        android:background="#b3b3b3"
         />
    <RelativeLayout 
        android:id="@+id/relativeLayoutInsideBasicItem"
        android:layout_width="fill_parent"
        android:layout_marginTop="3dp"
        android:layout_height="100dp"
        android:background="#b3b3b3"
        >
        <TextView
            android:id="@+id/textViewBasicItem"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="Affronta livelli ancora più complessi che ti porteranno al di là di un semplice schermo pieno di mattoncini."
            android:textSize="10dp"
            android:textColor="#000000"
            android:gravity="top"
            android:ems="10" />

        <TextView
          android:id="@+id/textViewPlatformItem"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:layout_below="@+id/textViewBasicItem"
          android:layout_marginTop="3dp"
          android:text="Platform: "
          android:textSize="8dp"
          android:textColor="#000000"
          android:gravity="top"
          android:ems="10" />
        <TextView
          android:id="@+id/textViewTypeItem"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:layout_below="@+id/textViewPlatformItem"
          android:layout_marginTop="3dp"
          android:text="Genere: "
          android:textSize="8dp"
          android:textColor="#000000"
          android:gravity="top"
          android:ems="10" />
        <TextView
          android:id="@+id/textViewDateItem"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:layout_below="@+id/textViewTypeItem"
          android:layout_marginTop="3dp"
          android:text="Data di lancio: "
          android:textSize="8dp"
          android:textColor="#000000"
          android:gravity="top"
          android:ems="10"
          android:layout_marginBottom="3dp"
           />
        <TextView
          android:id="@+id/textViewPriceItem"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:layout_alignParentBottom="true"
          android:layout_alignParentRight="true"
          android:text="Gratis    "
          android:gravity="right"
          android:textSize="15dp"
          android:textColor="#0096ff"
          android:ems="10"
           />

    </RelativeLayout>

</LinearLayout> 
```

通过将此层添加到我的主要活动中的垂直线性布局

```
...
<ScrollView 
        android:id="@+id/scrollViewStep1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"        
        android:layout_below="@+id/textViewStep1"
        android:layout_marginTop="35dp"
        android:layout_marginRight="10dp"
        android:layout_marginLeft="10dp"
        android:layout_marginBottom="32dp"
        android:background="#e8e8e8"
        android:orientation="vertical" >

        <LinearLayout 
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:id="@+id/collector"
            ></LinearLayout>

    </ScrollView>
... 
```

添加修改其内容的项目的 tha 活动中的代码是：

```
public void listViewTailer(int rootId, int itemId){

        LinearLayout collector = (LinearLayout) findViewById(rootId);    
        LinearLayout inflatedView;

        for(int i = 0; i < listFeeder.size(); i++){

            inflatedView = (LinearLayout) View.inflate(this, itemId, null);
            TextView description = (TextView) inflatedView.findViewById(id.textViewBasicItem);
            description.setText(listFeeder.getGameList().get(i).getPrdDescription());
            TextView platform = (TextView) inflatedView.findViewById(id.textViewPlatformItem);
            platform.setText(platform.getText() + "" + listFeeder.getGameList().get(i).getPrdPlatform());
            TextView type = (TextView) inflatedView.findViewById(id.textViewTypeItem);
            type.setText(type.getText() + "" + listFeeder.getGameList().get(i).getPrdType());
            TextView date = (TextView) inflatedView.findViewById(id.textViewDateItem);
            date.setText(date.getText() + "" + listFeeder.getGameList().get(i).getPrdDateAvailability());
            TextView price = (TextView) inflatedView.findViewById(id.textViewPriceItem);
            price.setText(listFeeder.getGameList().get(i).getPrdPrice() + "    ");

            collector.addView(inflatedView);

          ImageView imageView = (ImageView) inflatedView.findViewById(id.imageViewBasicItem);
          imageView.setImageResource(listFeeder.getGameList().get(i).getPrdImage());

        }

    } 
```

其中 rootId 是收集器布局，itemId 是添加到垂直线性布局的基本项目。

希望这能有所帮助。

# c# - NUnit 测试用例源

> ID：11722888
> 
> 赞同：22
> 
> 时间：2012-07-30T13:47:53.300
> 
> 标签：c#, nunit, testcasesource

我正在使用 TestCaseSource 属性。一个问题：当 sourceName 字符串无效时，测试会被忽略而不是失败。如果源方法被重命名，sourceName 字符串没有得到更新，那么这将是非常糟糕的，然后你失去了测试提供的覆盖率。有没有办法改变 NUnit 的行为，以便在 sourceName 无效时测试失败？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T22:45:31.820

这在 NUnit 2.6.2 中得到解决。属性有一个新的构造函数，它需要一个`Type`（必须实现`IEnumerable`）；“建议优先使用它而不是其他形式，因为它不使用字符串来指定数据源，因此更容易重构。” （来自[文档](http://www.nunit.org/index.php?p=testCaseSource&r=2.6.2)。）

这确实需要您的测试运行程序支持最新的 NUnit。

一个非常基本的示例（有关更多详细信息，请参见上面的文档链接）：

```
public class TestDataProvider : IEnumerable
{
    public IEnumerator GetEnumerator()
    {
        return new List<int>{ 2, 4, 6 }.GetEnumerator();
    }
}

[TestFixture]
public class MyTests
{
    [TestCaseSource(typeof(TestDataProvider))]
    public void TestOne(int number)
    {
        Assert.That(number % 2, Is.EqualTo(0));
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T22:21:54.797

我已经查看了它在 NUnit 内部是如何工作的。如果特定来源不存在，它们只会抛出异常：

```
MemberInfo[] members = providerType.GetMember(
 providerName,
 MemberTypes.Field | MemberTypes.Method | MemberTypes.Property,
 BindingFlags.Static | BindingFlags.Instance | BindingFlags.Public | BindingFlags.NonPublic);

if (members.Length == 0)
 throw new Exception(string.Format(
  "Unable to locate {0}.{1}", providerType.FullName, providerName)); 
```

后来他们抓住它并将特定`ParameterSet`的（包装测试用例源的类）标记为`RunState.NotRunnable`稍后将作为忽略测试处理。

因此，在不更改 NUnit 代码的情况下可能无法更改此行为 - 顺便说一句，可以下载。您也可以尝试与 NUnit 团队联系，或者将忽略的测试与失败的测试相同:)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-08-26T11:56:01.610

如何使用C#6 中引入的**nameof功能**

```
public static class TestCasesData 
{ 
  public static string[] TestStringsData() 
  {
       return new string[] {"TEST1", "TEST2"};
  }
}

[TestFixture]
public class MyTest
{
     [Test]
     [TestCaseSource(typeof(TestCasesData), nameof(TestCasesData.TestStringsData))]
     public void TestCase1(...)
     {
     }
} 
```

# android - Mac/Windows 和 Android 之间的 WiFi-Direct 通信

> ID：11722891
> 
> 赞同：9
> 
> 时间：2012-07-30T13:48:15.310
> 
> 标签：android, windows, macos, wifi, wifi-direct

是否可以让 Android (>4.0) 设备与 Mac OS 或 Windows 设备建立 WiFi-Direct 连接？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T14:07:25.160

根据[Wifi-Direct Docs](http://developer.android.com/guide/topics/connectivity/wifip2p.html)，该协议允许：

> Android 4.0（API 级别 14）或更高版本的设备，具有适当的硬件，可通过 Wi-Fi 直接相互连接

谷歌似乎没有通过 API 提供此功能。虽然 WiFi-Direct 不是专有协议，但可以在任何平台上实现。网上有一些帖子试图让 Wifi-Direct 在 Windows 下工作：

*   [使用 WIFI 连接从台式电脑向 Android 设备广播消息](https://stackoverflow.com/questions/6757665/broadcast-message-from-desktop-pc-to-android-device-using-wifi-connectivity)
*   [https://superuser.com/questions/417888/how-do-i-connect-a-laptop-running-windows-7-to-an-android-phone-using-wifi-direct](https://superuser.com/questions/417888/how-do-i-connect-a-laptop-running-windows-7-to-an-android-phone-using-wifi-direct)
*   [http://www.intel.com/content/www/us/en/wireless-products/my-wifi-technology.html](http://www.intel.com/content/www/us/en/wireless-products/my-wifi-technology.html)
*   [http://androidforums.com/android-lounge/552970-howto-wifi-direct-use-your-laptop-desktop-softap-android-reverse-tethering.html](http://androidforums.com/android-lounge/552970-howto-wifi-direct-use-your-laptop-desktop-softap-android-reverse-tethering.html)

* * *

## 回答 #2

> 赞同：-7
> 
> 时间：2012-07-30T14:14:43.213

您只需要使用 java.net.Socket。取决于建立直接连接是什么意思。当您在目标设备（Windows 或 Mac）上通过 ServerSocket 打开侦听套接字时，就会建立 TCP 连接。在其他设备上，您可以使用带有目标地址的 Socket。当然，windows 或 mac 盒子可能必须在防火墙中打开该端口。

我想您真正需要知道的是如何获取目标计算机的名称或如何发现本地网络上的计算机。不幸的是，我认为它不依赖于 android 版本。您应该查看[http://en.wikipedia.org/wiki/Zero_configuration_networking](http://en.wikipedia.org/wiki/Zero_configuration_networking)以了解一些提示。我担心需要在 android 上打开特权端口可能会出现问题，因为通常你必须是 root。那将需要有根的android。

当然，您应该指定使用该直接连接的目的以及您需要什么软件。如果两端都有您的应用程序，您可以在 android 上打开任何未分配和未授权的端口。使用 UDP 定期广播 android 设备的名称（适当要求用户输入他的设备名称）。使用多播发送请求，并以相同的方式接收回复。多播发送和接收将需要您在 android 和 windows 以及 mac 上的应用程序。现在您可以从多播应用程序中读取它是什么类型的机器，以及它为您的直接连接打开的本地端口。从 udp 消息的来源，您知道在哪里连接。

您可以使用一些框架来加快速度。所有这些都需要一些有关网络的知识，但我不知道更简单且运行良好的解决方案。除非您提供有关您的直接联系的详细信息。

# iphone - 从没有 NIB 的情节提要中导航

> ID：11722897
> 
> 赞同：0
> 
> 时间：2012-07-30T13:48:23.330
> 
> 标签：iphone, uitabbarcontroller, storyboard, uistoryboardsegue

使用故事板，我创建了一个包含 5 个选项卡的选项卡栏应用程序。所以初始视图——标签栏视图——没有NIB，因为它只是用故事板创建的。
一切都运行得很好——但是如果我想以编程方式在这个标签栏视图上加载其他视图控制器怎么办？
如果它有自己的 Nib/View，我可以做

```
[self presentModalViewController:openingVC animated:YES]; 
```

或者 `[self.view addSubview:specialVC.view];`

但由于一开始没有“自我”，我无法将另一个视图加载到“自我”上。

我尝试使用情节提要代码

`instantiateViewControllerWithIdentifier`

但这不起作用。

我是否必须创建一个标签栏视图控制器（带有“.h”、“.m”和“.xib”文件）并使情节提要的初始屏幕属于该类？
几乎似乎违背了故事板的目的......

有什么建议吗？

# ruby-on-rails - 卡在 rvm, capistrano, :system, :user 旋转门

> ID：11722901
> 
> 赞同：1
> 
> 时间：2012-07-30T13:48:57.667
> 
> 标签：ruby-on-rails, rvm, capistrano

在服务器上安装 ruby​​、gemset 的最佳实践是什么。我目前有一个应用程序和一个同名帐户。我将来会在同一个 VPS 上部署其他应用程序。

我已经使用 sudo 在 Debian6 上安装了 rvm 系统范围。

在系统 ruby​​ 位置或 ~/.rvm 中安装特定于应用程序的 gem 集是否更好？我应该在 deploy.rb 中放入什么代码来实现其中一个？

我正在 deploy.rb 中尝试各种命令组合，但最终出现错误，最新的是

```
Gemset 'rails-322' does not exist, 'rvm gemset create rails-322' first, or append '--create'. 
```

我不确定 rails-322 gemset 来自哪里，因为我正在运行 rails 3.2.6。它是默认值吗，因为我没有在任何地方指定它。

我刚才`rvm --rvmrc ---create 1.9.3@myapp`在项目目录中创建的更改为`set :use_sudo, true`将看看它是如何进行的。

我发现有太多的书和参考文献，它们做的事情有点不同。我正在关注 Rails3 in Action - Katz Deploying Rails - Burns 书籍。

我遇到的问题是为我的应用程序收集正确的代码，因为我没有运行 vagrant 而是部署到 VPS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T14:32:36.080

Assuming that you're installing this server primarily for installing rails applications or other things that use bundler -- [http://gembundler.com/](http://gembundler.com/) -- your best bet is just to use bundler for your rails applications and not worry about gem management outside of that. This will install local bundles with each app.

This is how to add bundler to your capistrano deploy: [http://gembundler.com/deploying.html](http://gembundler.com/deploying.html)

This is how to use capistrano and rvm together in a way that has worked for me in the past, but generally this will be more of an issue once you have multiple apps: [https://rvm.io/integration/capistrano/](https://rvm.io/integration/capistrano/)

Does this answer your question?

# sqlite - 将 C 应用程序从 linux 移植到 windows

> ID：11722902
> 
> 赞同：0
> 
> 时间：2012-07-30T13:49:00.183
> 
> 标签：sqlite, mingw

我正在使用 MinGW 和 Code::Blocks 将 linux wxwidgets 应用程序移植到 Windows。该应用程序有一些我不知道如何在 Windows 上解决的依赖项：

1) endian.h 2) sqlite3.h

1) 我似乎找不到像 be32toh() 这样的 Windows 版本的函数。有谁知道我在哪里可以买到这些？

2) 你如何安装 sqlite3 包含文件和库？我在 sqlite 下载页面上看到了各种 tarball，但似乎我必须从源代码构建 sqlite3。那是对的吗？

非常感谢，托马斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T20:13:16.973

1）使用wxWidgets提供的字节序宏；`wxINT32_SWAP_ON_LE`和别的。显然，在 Linux 版本中也使用它们是有意义的，以避免重复基本相同的功能。请参阅[wx 文档](http://docs.wxwidgets.org/2.9.2/group__group__funcmacro__byteorder.html)。

# java - 基于模式拆分字符串的正则表达式

> ID：11722907
> 
> 赞同：1
> 
> 时间：2012-07-30T13:49:21.287
> 
> 标签：java, regex, string

我想有人帮我纠正我的正则表达式来拆分这个字符串：

```
{constraint.null.invalid}{0,1,2} 
```

基本上，我想要里面的任何东西`{`，`}`所以我的输出必须是：

*   `constraint.null.invalid`
*   `0,1,2`.

我仔细尝试过的正则表达式是：

```
\{([\S]+)\} 
```

但我得到的价值是：

```
constraint.null.invalid}{0,1,2 
```

我错过了什么？

示例代码：

```
public static void main(String[] args) {
    Pattern pattern = Pattern.compile("\\{([\\S]+)\\}", Pattern.MULTILINE);
    String test = "{constraint.null.invalid}{0,1,2}";
    Matcher matcher = pattern.matcher(test);
    while (matcher.find()) {
        System.out.println(matcher.group(1));
    }
} 
```

谢谢

* * *

PS：字符串可以包含以 1 或多个为界的值`{`和`}`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T13:51:40.033

`+`量词是贪婪的。用于`+?`不情愿的版本。

有关详细信息，请参阅[http://docs.oracle.com/javase/tutorial/essential/regex/quant.html](http://docs.oracle.com/javase/tutorial/essential/regex/quant.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T14:02:57.597

有点不同的方法，使用这种模式 "\{([^\{\}]*)\}"

```
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class ReTest {

    /**
     * @param args
     */
    public static void main(String[] args) {
        String s = "bla bla {constraint.null.invalid} bla bla bla {0,1,2} bla bla";
        Pattern p = Pattern.compile("\\{([^\\{\\}]*)\\}");

        Matcher m = p.matcher(s);

        while (m.find()){
            System.out.println(m.group(1));
        }
    }
} 
```

# java - 如何在 eclipse 或 Qt Java 项目中与 XML 结构相处？（！警告！里面的菜鸟内容）

> ID：11722910
> 
> 赞同：0
> 
> 时间：2012-07-30T13:49:27.887
> 
> 标签：java, xml, eclipse, qt

给我一些链接，这将使我知道 XML 文档在我的项目中负责什么。我找到的所有编程书籍都是关于语法和 OOP 的，但我不知道在软件开发环境中该做什么。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T14:11:09.457

只需在 Eclipse 中创建一个新的 Java 项目：

1.  打开透视图（最右边的按钮）-> Java
2.  文件 -> 新建 -> Java 项目
3.  给它起任何你想要的名字并说完成
4.  右键单击这个新项目，新建 -> 包
5.  输入 com.foo（或任何你想要的，全部小写，com.something）并说完成
6.  右键单击这个新包，新建 -> 类
7.  输入 XmlReader（或其他），选择复选框`public static void main`并说完成
8.  右键单击项目，新建 -> 其他 -> XML -> XML 文件
9.  输入您想要的任何名称并说完成

现在您有了一个 XML 和一个 Java 类来读取它。将您想要的任何内容放入该 XML 中，然后在该 XmlReader 中编写一些 Java 代码来读取它。

[编辑：确保你有来自http://eclipse.org/downloads/](http://eclipse.org/downloads/)的“Eclipse IDE for Java EE Developers”，这样你就有了 XML 工具。

# iphone - 使用 CoreTelephony 在 iPhone 上发送彩信

> ID：11722914
> 
> 赞同：4
> 
> 时间：2012-07-30T13:49:45.293
> 
> 标签：iphone, ios, mms, iphone-privateapi, core-telephony

我有兴趣在 iPhone 上的私人应用程序中发送彩信。我需要的很多信息都是专有的，因此我在任何地方都找不到。基本上，我正在寻找构建 CTMessage 并将其编码为 MMS 的正确方法，然后通过重载的 sendMMS 函数之一发送它。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T04:31:11.343

For those interested: here is what I managed to dig up (&/OR piece together myself).

For every MMS, a CTMessage is allocated & initialized. addRecipient/setRecipient is called to do just that.

For each data/text section a CTMessagePart is built with its data and corresponding datatype, and then added to the CTMessage's items array. The first item in each MMS items array is always a CTMessagePart containing a SMIL-formatted layout that the recipient interprets to display the message. Each CTMessagePart following the first is in the order that it is referenced from the SMIL data.

Each (unmodifiied) iPhone has an instance of CTMessageCenter running, with the id sharedMessageCenter. Calling sharedMessageCenter's sendMMS, giving the id of the CTMessage you just created will automate the rest of the process. Essentially, the CTMessage is encoded using the CTMmsEncoder into an MMS-PDU hex string. (Not to sure of the correct name for it, hah). Anyways, sharedMessageCenter's send method will then send the (encoded) MMS to your provider's MMSC.

That pretty much sums it up, and should give anyone looking to head down that path a good place to start depending on what they're doing. I can do my best to answer any questions.

# php - PHP 丢弃 HTTP 连接

> ID：11722915
> 
> 赞同：2
> 
> 时间：2012-07-30T13:49:53.877
> 
> 标签：php

> **可能重复：**
> [提前关闭连接](https://stackoverflow.com/questions/138374/close-a-connection-early)
> [如何在 PHP 中响应 ajax 请求后继续处理？](https://stackoverflow.com/questions/1481247/how-to-continue-process-after-responding-to-ajax-request-in-php)

我需要在 ajax 操作中断开连接：

```
$response = getResponse($params);
echo $response; // don't make user to wait
flushAndDropConnection();
someLongActionsFor5Seconds(); 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T13:54:45.253

只需让用户断开连接，但让脚本运行。

```
ignore_user_abort(true);
ob_start();
echo "response";
$size = ob_get_length();
header("Content-Length: $size");
header('Connection: close');
ob_end_flush();
ob_flush();
flush();
if (session_id()) session_write_close();
//your long running action here 
```

# java - 如果函数不止一次附加加载消息

> ID：11722918
> 
> 赞同：0
> 
> 时间：2012-07-30T13:50:01.407
> 
> 标签：java, android, if-statement, count

我有一个加载屏幕，我想显示 loadingMessage1 3 秒，而不是显示加载消息 2。我只希望加载消息 2 出现一次，但是当我尝试这样做时，加载消息 2 一直在无限循环中附加。

所以我尝试在每个加载消息 2 附加后增加一个计数变量，但它不起作用。我哪里出错了，还有其他解决方案吗？

```
final TextView loadingMessage1 = (TextView)this.findViewById(R.id.loadingMessage1);
int count = 0;
final Handler handler = new Handler();

if (count == 0){
    handler.post(new Runnable(){    
            @Override
            public void run(){
                loadingMessage1.append("Loading Message 2");
                handler.postDelayed(this, 3*1000L);
            }   
    }); 
    count++;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T13:56:27.537

您需要避免在每次执行后发布另一个事件。也许更像这样：

```
void showMessage1() {
    // ... code to show message 1 ...

    handler.postDelayed(new Runnable(){    
        @Override
        public void run(){
            showMessage2();
        }   
    }, 3*1000L); 
}

void showMessage2() {
    // ... code to show message 2 ... 
} 
```

请注意，消息显示代码每条消息仅执行一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T14:00:48.080

您在以下行中犯了一个错误：

```
handler.postDelayed(this, 3*1000L); 
```

在这里，您`Runnable`在处理时将此对象发送给处理程序`this`。这意味着当您第一次执行时`Runnable`，最后您将它再次添加到处理程序的消息循环中。因此，您获得了一个无限循环。类似的东西会解决你的问题：

```
final TextView loadingMessage1 = (TextView)this.findViewById(R.id.loadingMessage1);
int count = 0;
final Handler handler = new Handler();

handler.postDelayed(new Runnable(){    
        @Override
        public void run(){
            loadingMessage1.append("Loading Message 2");
        }   
}, 3*1000L); 
```

## 编辑：

要使所有这些东西灵活，请执行以下操作：

```
// inner class
class TextChanger implements Runnable {
    private final String message;

    public TextChanger(String message) {
        this.message = message;
    }

    @Override
    public void run() {
        loadingMessage1.append(message);
    }

} 
```

然后在你的代码中的某个地方：

```
public static final long TIME_CONSTANT = 3*1000L;

final TextView loadingMessage1 = (TextView)this.findViewById(R.id.loadingMessage1);
int count = 0;
final Handler handler = new Handler();

handler.postDelayed(new TextChanger("Whatever 1"), TIME_CONSTANT);
handler.postDelayed(new TextChanger("Whatever 2"), 2 * TIME_CONSTANT); 
```

等等。诀窍是不要`this`像以前那样引用，因为它会创建一个无限循环。

# sql-server - SSAS 多维数据集错误，未部署

> ID：11722920
> 
> 赞同：1
> 
> 时间：2012-07-30T13:50:13.393
> 
> 标签：sql-server, ssas, cube, bids

我收到两个非常模糊的错误。

```
Internal error: The operation terminated unsuccessfully.
Server: The operation has been cancelled. 
```

当我尝试将多维数据集部署到服务器时会发生这种情况。

有谁知道如何解决这个错误？

谢谢，伊桑

编辑：我只是单独处理了每个维度，除了一个维度之外的所有维度都成功处理了。我也有一条可疑的警告信息

```
Errors in the OLAP storage engine: The attribute key cannot be found when processing: Table: 'dbo_DimPractice', Column: 'Phone', Value: '(111) 111-1111 ‎'. The attribute is 'Phone'. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T15:07:20.393

所以问题是有不同电话号码的重复电话号码。我通过更改属性列上的键以包含其他属性来解决此问题。

修复该问题后，我的时间维度出现了相同的警告，我为它做了同样的事情，然后它成功部署。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-13T10:34:10.843

重新应用服务帐户，如果它之前工作并重新启动 SSAS 的服务，它将开始工作。

# algorithm - Matlab 数组计算的错误结果

> ID：11722927
> 
> 赞同：0
> 
> 时间：2012-07-30T13:50:23.493
> 
> 标签：algorithm, matlab

我试图从一篇论文中重现结果，我给出了一个链接以避免写下所有需要的数学：

> [基于博弈论的DoS和DDoS攻击防御机制建模与仿真](http://gtcs.cs.memphis.edu/roy/springSim10.pdf)

更具体地说，我遇到的问题是图 3 的情节。在给定两个变量 m 和 M 的情况下，该图在 z 轴上给出了方程 3 的结果。需要的其他方程是 5、6、7，在方程 6 之前的段落中还有两个小方程。要查看 Xi 是什么，请查看 4.2 部分。所有需要的变量值都在绘图之前给出。

现在说到重点，我试图在 matlab 中创建完全相同的情节，但我失败了，我需要帮助，因为我的 matlab 技能不太好。

我有一个脚本文件，其中包含以下内容：

```
w1  = 1000;
w2  = 1000;
w3  = 10;  
B   = 2000;
n   = 20;  
r_l = 60;  
s_l = 20;  
g   = 10;  
a_f = 5000;
b   = 20;  

vx = 0 : 1 : 500;
vy = 0 : 1 : 90;

[x,y] = meshgrid(vx,vy);

z = payoff(w1, w2, w3, y, r_l, n, g, B, b, x, s_l, a_f);

h = surfc(x,y,z);
set(h, 'edgecolor','none')
xlabel('Firewall Midpoint (M)')
ylabel('Number of zombies')
zlabel('Attackers payoff')
view(-41,11); 
```

Payoff 是一个函数，如下所示：

```
function out = payoff(w1, w2, w3, m, r_l, n, g, B, b, M, s_l, a_f)

r_a = a_f./ m;
r_a_dash = r_a.*(1-Fx(r_a, b, M, B));
r_l_dash = r_l.*(1-Fx(r_l, b, M, B));

v_b = ( m .* r_a_dash ) ./ ( n .* r_l_dash + m .* r_a_dash );
v_n = normcdf(( g .* ( n .* r_l_dash + m .* r_a_dash ) ./ B ), r_l, s_l);

out = w1 * v_b + w2 * v_n - w3 * m; 
```

Fx 又是一个执行以下操作的函数：

```
function out = Fx(x,b,M,B)

out=1./(1+exp(-b.*(x-M)./B)); 
```

我不知道错误到底出在哪里，但我得到的情节如下，与论文中的情节不同。

论文中的图形沿`Firewall Midpoint`轴呈 U 形曲线，而我的图形是单调递增的。 ![我的结果](../Images/7f4578443a20efa3975e2ce85f0118b0.png)

谁能发现我有任何错误？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T13:34:07.010

我注意到的一件大事是在您使用的代码中：

```
v_n = normcdf(( g .* ( n .* r_l_dash + m .* r_a_dash ) ./ B ), r_l, s_l); 
```

当你应该使用（我认为）：

```
v_n = normcdf(( g .* ( n .* r_l_dash + m .* r_a_dash ) ./ B ), r_l_dash, s_l); 
```

在论文中，他们指出：

> 回想一下，*r [l]*表示合法流的预期速率。设合法流通过防火墙的平均速率为*r [l]* '。

在`normcdf`函数中，第二个参数应该是平均值，`mu`。这给了我沿着防火墙中点的 U 形曲线，但是我可以看到它与图片不完全一致，我相信这是由于 b 的值，因为有人已经说过没有给出。

希望这可以帮助。可能仍然存在计算错误，因为我使用了各种 b 值，但仍然无法匹配论文中的图像。

# c# - 在c#中将模板类型转换为接口类型时出现运行时错误

> ID：11722930
> 
> 赞同：1
> 
> 时间：2012-07-30T13:50:33.607
> 
> 标签：c#, generics

我正在尝试将 Java 代码转换为 C#，但在泛型转换时遇到了问题。

我有一个名为 Copyable 的接口类型，它公开了以下方法......

```
interface Copyable { void copyTo(Copyable target); } 
```

还有一个 AtomicObject 类型，它以一个泛型类型作为参数，该泛型类型被限制为实现 Copyable 接口......

```
class AtomicObject<T> where T : class, Copyable {
    public T openRead(); 
```

我将 AtomicObjects 存储在对象类型的字典中，但我需要将对象转换回 AtomicObjects 以调用特定于 AtomicObject 类的“openRead”方法......

```
foreach (KeyValuePair<object, object> entry in dict)
{
    AtomicObject<Copyable> obj = (AtomicObject<Copyable>)entry.Key;
    Copyable dest = (Copyable)obj.openRead();//get the destination
} 
```

我已经实现了一个 ListNode 类型，它扮演 AtomicObject 参数的角色......

```
class ListNode<T> : Copyable
AtomicObject<ListNode<string>> atomic = new AtomicObject<ListNode<string>>(); 
```

我可以编译这段代码，但是当我运行这个程序时，它会产生一个“InvalidCastException”，因为运行时系统无法转换类型的对象......

```
AtomicObject<ListNode<string>> 
```

到...

```
AtomicObject<Copyable>. 
```

然而 ListNode 是 Copyable 类型的。谁能解释为什么不能正确转换？最重要的是，任何人都可以建议一个不依赖于字典或 foreach 循环的修复，而必须知道 ListNode 包含什么类型的参数？例如，在 Java 中，我可以做到...

```
AtomicObject<?> obj = (AtomicObject<?>)entry.Key; 
```

但这在 C-Sharp 中是不可能的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T14:01:52.717

您将无法做到这一点，因为您需要协变，而类不能是协变的。

所以你必须从你的`AtomicObject`：

```
interface IAtomicObject<out T> where T : class, Copyable
{
    public T openRead();
} 
```

（请`out`在泛型声明中注明），并让您的`AtomicObject`类实现它。

之后，您应该能够运行以下代码

```
foreach (KeyValuePair<object, object> entry in dict)
{
    IAtomicObject<Copyable> obj = (IAtomicObject<Copyable>)entry.Key;
    Copyable dest = obj.openRead();
} 
```

另请注意，.net 标准建议在接口名称前加上 I。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T14:02:43.230

您遇到的问题是由于泛型在 C# 与 Java 中的实现方式不同。Java 使用类型擦除来实现泛型——也就是说， an在运行时`AtomicObject<Anything>`实际上是 a 。`AtomicObject<Object>`在 C# 中，情况并非如此——泛型是使用具体类型实现的，因此在运行时维护它们的类型参数化。在 C# 中， an`AtomicObject<Whatever>`始终是`AtomicObject<Whatever>`，而永远不是 an `AtomicObject<SomethingElse>`（除非 AtomicObject 是接口 - 请参阅泛型变体）。

您可以做的是对包含循环的方法进行类型参数化：

（注意- C# 中的接口按照惯例应以大写 I 开头。我已将您的 Copyable 重命名为这样）

我认为以下应该做你所追求的。注意我已经注意测试了这段代码：

```
public void DoSomething<TObj>(IEnumerable<AtomicObject<TObj>, Object> dict) 
    where TObj : ICopyable {
    foreach (KeyValuePair<AtomicObject<TObj>, Object> entry in dict)
    {
        ICopyable dest = entry.Key.openRead();
        // Whatever...
    }
} 
```

# wso2 - 访问 wso2 stratos 实时部署的跟踪日志

> ID：11722932
> 
> 赞同：0
> 
> 时间：2012-07-30T13:50:51.640
> 
> 标签：wso2, wso2esb, wso2stratos

我希望访问我部署到 Stratos live 的 WSO2 ESB 代理的跟踪日志。我需要一个可用于 ESB_HOME/repository.logs 文件夹中的本地的跟踪日志文件。

那可能吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T03:35:23.867

否 目前我们没有在 Stratoslive 中查看 ESB 跟踪日志的功能。它将很快在我们的下一个版本中可用。但是，您可以通过转到 Monitor--> System Logs 查看系统日志

# gridview - 使用 CheckboxModel 的多个网格

> ID：11722943
> 
> 赞同：0
> 
> 时间：2012-07-30T13:51:27.490
> 
> 标签：gridview, extjs, checkbox

我已经定义了 xtype，它是具有 2 列和 selModel 的简单网格：Ext.selection.CheckboxModel。

```
Ext.define('MySimpleType',
{
    extend: 'Ext.grid.Panel',
    alias: 'widget.MySimpleXType',
    autoScroll: true,
    store: mySimpleStore,
    selModel: Ext.create("Ext.selection.CheckboxModel", {
        checkOnly : true
    }),
    border: false,
    columns: [
        {
            header: 'Code',
            flex: 1,
            sortable: true,
            dataIndex: 'Code'
        },
        {
            header: 'Name',
            flex: 1,
            width: 80,
            sortable: true,
            dataIndex: 'Name'
        }
    ]
}); 
```

当我尝试在一个面板中多次使用此 xtype 时：每个 xtype 都使用已创建的 CheckboxModel 的相同实例，而不是为每次使用创建新的 CheckboxModel。在这种情况下，几个复选框列出现在第一个网格中，并且行为不正确。你能给我一些关于如何解决这个问题的想法吗？最简单的解决方案是为每个 xtype 使用创建新的 Ext.selection.CheckboxModel 实例，但这会使代码复制粘贴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T09:10:12.307

解决方案是将 selModel 定义移动到网格的 initComponent 属性：

```
Ext.define('MySimpleType',
{
    extend: 'Ext.grid.Panel',
    alias: 'widget.MySimpleXType',
    autoScroll: true,
    store: mySimpleStore,
    border: false,
    columns: [
        {
            header: 'Code',
            flex: 1,
            sortable: true,
            dataIndex: 'Code'
        },
        {
            header: 'Name',
            flex: 1,
            width: 80,
            sortable: true,
            dataIndex: 'Name'
        }
    ],
    initComponent: function(){
        this.selModel = Ext.create("Ext.selection.CheckboxModel", { checkOnly : true });
        this.callParent(arguments); //it's necessary to call in order to initialize parent components of this grid
    }
}); 
```

# c++ - Visual Studio 中的“创建预编译头文件”（/Yc）和“使用预编译头文件”（/Yu）有什么区别？

> ID：11722944
> 
> 赞同：20
> 
> 时间：2012-07-30T13:51:28.373
> 
> 标签：c++, visual-studio, visual-studio-2008, precompiled-headers, compiler-options

我阅读了 MSDN 中的文档，但最后我并不清楚它们之间的实际区别是什么。两者似乎都需要将 stdafx.h 添加到每个 *.cpp 文件的顶部。

我正在使用VS2008。

任何人都可以帮助解决问题吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-30T15:38:11.827

如何在 Visual Studio 中使用 PCH 文件的简短摘要：

*   项目中的所有 cpp 文件都必须包含`stdafx.h`（如果您愿意，可以将其更改为其他内容）
*   在解决方案资源管理器中选择项目`Properties -> C++ -> Precompiled Headers`并将“创建/使用预编译头”设置为“使用”。点击应用
*   虽然仍然显示属性页，​​但`stdafx.cpp`在解决方案资源管理器中选择并将值设置为“创建”

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-30T14:00:32.903

好吧，我认为您必须首先了解预编译头文件的用途。例如，在大型项目中，处理单个客户端扩展所需的所有标头可能需要很长时间，因此有些人更喜欢将 .pch 文件与他们的库一起分发。为了生成 .pch 文件，您使用`/Yc`编译器标志，想要使用您的库的人将设置该`/Yu`标志。有关详细信息，请参见[此处](http://msdn.microsoft.com/en-us/library/7zc28563)和[此处](http://msdn.microsoft.com/en-us/library/z0atkd6c.aspx)。

# jquery - Django：表单类不起作用？

> ID：11722950
> 
> 赞同：0
> 
> 时间：2012-07-30T13:51:46.867
> 
> 标签：jquery, python, django

由于我正在创建的网站规模较小，我决定跳过 JSON，只创建一个 ajax 页面，该页面返回实际的 html 或单个单词来说明要做什么。代码好像有错误，因为在`new_user_pass = new_user(request.POST)`服务器突然返回`500 (INTERNAL SERVER ERROR)`网站检查用户之前是否登录过，然后做出决定：如果有，则在创建会话后重定向到主页（尚未编码）。如果他们没有：返回一个告诉 JQuery 向他们询问其他信息的单词。如果某处出现错误，它应该到达返回错误的文件末尾（尚未完全编码）。

这是 forms.py 文件：

```
class log_in(forms.Form):
    username = forms.EmailField()
    password = forms.PasswordInput()

class new_user(forms.Form):
    username = forms.EmailField()
    password = forms.PasswordInput()
    password2 = forms.PasswordInput()
    pen_name = forms.CharField(max_length=30) 
```

views.py 文件：

```
def user_log_in(request):
    #add stuff for ajax request
    user_pass = log_in(request.POST)
    er = []
    if user_pass.is_valid():
        cleaned_info = user_pass.cleaned_data
        user_object = User.objects.filter(email = cleaned_info['username'])
        if user_object.exists():
            #create session
            return HttpResponseRedirect('/home')
        else:
            new_user_pass = new_user(request.POST)#where bug is
            cleaned_info = new_user_pass.cleaned_data
            if new_user_pass.is_valid():
                if cleaned_info['password'] == cleaned_info['password2']:
                    new_user = User(activated = 0, email = cleaned_info['username'], pen_name = cleaned_info['pen_name'], password = cleaned_info['password'])
                    new_user.save()
                    msg = ""
                    if send_mail('Activate', msg, '*******', [cleaned_info['username']], fail_silently=False):
                        return HttpResponse('e_act')
                    else:
                        er.append("Error Sending Email")
                else:
                    er.append('Passwords are not the same')
            elif cleaned_info['TN']:
                for e in new_user_pass.errors:
                    er.append(e)
            else:
                return HttpResponse('n_usr')
    return HttpResponse('SOS') 
```

而且，虽然我不认为错误在这里，但 Jquery 函数：n_usr = false;

```
function log_in () {
    //add code to check if it's the wrong usr, pass, correct, or if they've never logged in before.
    //code to reveal section 
```

编辑：Django给出了错误`new_user' referenced before assignment`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T14:12:31.513

您还没有将`new_user`表单导入到您的视图中。

而且我**确实**希望您没有创建自己的 User 类，您在其中以纯文本形式存储密码。那会很糟糕。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T14:17:19.337

下一个片段是错误的：

```
def new_user():
    print "in new_user"

def f():
    new_user()
    if True:
        new_user = 23
        print "new_user"

f() 
```

您不能调用 new_user()，因为编译器认为它在 f() 的范围内，因为 new_user 的初始化更远。

您将 new_user 用作两个不同的东西 - 作为表单的构造函数

```
new_user(request.POST) 
```

并作为用户实例：

```
new_user = User(activated = 0, email = cleaned_info['username'], pen_name = cleaned_info['pen_name'], password = cleaned_info['password']) 
```

就编程风格而言，它也不好——为完全不同的变量使用一个名称。

例如，您可以为局部变量使用另一个名称，并且它必须是可以的：

```
new_user_inst = User(activated = 0, email = cleaned_info['username'], pen_name = cleaned_info['pen_name'], password = cleaned_info['password'])
... 
```

# sql - Hive 查询：详尽搜索

> ID：11722955
> 
> 赞同：0
> 
> 时间：2012-07-30T13:51:55.037
> 
> 标签：sql, hive, mathematical-optimization

我在下面的架构中有这张表......

```
 Pos1 Pos2 Pos3
KW1    $1   $2   $3
KW2    $4   $5   $6
KW3    $7   $8   $9 
```

我需要所有可能组合的成本。说当关键字`KW1`出现在位置 1 ( `Pos1`) 时，相关的成本是`$1`。

因此，一个这样的组合将是`Comb1=$1+$4+$7`另一种可能的组合是`Comb2=$1+$5+$7`。唯一的限制是每个关键字只能选择一个位置。是否可以使用 Hive Query 进行此搜索？寻找任何指针。

**目标：**找到满足目标支出的组合。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T08:56:09.807

It seems to me, that your problem is the [assignment problem](http://en.wikipedia.org/wiki/Assignment_problem), which can be efficiently solved by the [Hungarien method](http://en.wikipedia.org/wiki/Hungarian_algorithm).

If not, you should provide a more detailed explanation.

# php - 使用请求率有限的 API

> ID：11722956
> 
> 赞同：1
> 
> 时间：2012-07-30T13:51:59.790
> 
> 标签：php, api

我正在使用 PHP 来处理一个 API，该 API 将我限制为每 10 秒 1 个请求。它一次最多可以返回 10 个结果。

这意味着要获得 1000 个结果，我需要拨打 100 个电话，如果一个接一个地完成，大约需要 17 分钟，因此“即时”执行它并不是一个真正的选择。

如果我需要从 API 中获取 1000 行，那么最好的方法是什么？

有什么方法可以“在后台”获取 API 数据，以便当我需要信息时它已经在我的数据库中？API 仅每 4 周更新一次，因此它只需要在该时间段内同步一次。

我已经考虑过使用 cron 作业来执行此操作，但考虑到脚本必须运行多长时间，我不确定它是如何工作的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T13:56:15.183

使用 cron 作业是将 API 中的值存储到数据库中的好方法。您需要为 API 和本地数据库使用更新的时间字段。检查 API 的最后一次记录更新日期是否大于本地数据库中最后一次记录更新的日期。如果是这样，请获取新数据。

如果您想对服务器的本地数据库执行相同的过程，您可以。这是同步项目流程和减少 API 请求的常用操作。

# html - 自定义字体仍然无法在 IE 中使用

> ID：11722959
> 
> 赞同：3
> 
> 时间：2012-07-30T13:52:13.463
> 
> 标签：html, css, internet-explorer, font-face, custom-font

我试图让自定义字体“Duke-Fill”显示的网页是[http://www.hamlinforcongress.com/helpout.php](http://www.hamlinforcongress.com/helpout.php)

我正在使用：

```
@font-face {
font-family: 'header_font';
src: url('Duke-Fill.eot?#iefix') format('embedded-opentype'), 
     url('Duke-Fill.woff') format('woff'), 
     url('Duke-Fill.ttf')  format('truetype'),
     url('Duke-Fill.svg#svgFontName') format('svg');
}
.header_font{
font-family: header_font;
} 
```

我已经尝试了可以​​在 Internet 上找到的所有其他建议，但没有什么可以使自定义字体在 Internet Explorer 中显示。它在所有其他可以想象的浏览器中都能完美运行，但在 IE 中却不行（出乎意料）。帮助？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T13:55:34.650

```
@font-face {
    font-family: 'NimbusSanConD-Lig';
    src: url('fonts/228BFB_1_0.eot');
    src: url('fonts/228BFB_1_0.eot?#iefix') format('embedded-opentype'),
         url('fonts/228BFB_0_0.woff') format('woff'),
         url('fonts/228BFB_0_0.ttf') format('truetype');
    font-weight: normal;
    font-style: normal;
} 
```

此代码适用于 IE。它是使用[字体松鼠生成的](http://www.fontsquirrel.com/fontface/generator)

# ios - 在Xcode中为tesseract ocr创建静态库并在MonoTouch中绑定静态库

> ID：11722961
> 
> 赞同：2
> 
> 时间：2012-07-30T13:52:17.870
> 
> 标签：ios, xcode, xamarin.ios, static-libraries, tesseract

我为 tesseract 创建了一个静态库，该库具有接受`UIImage`作为输入并处理图像并返回文本的方法。我还为 MonoTouch 中的静态库创建了一个包装器。

在构建解决方案的monotouch项目中实现dll时，应用程序抛出构建错误/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/gcc -gdwarf-2 -miphoneos-version-min=5.0 -arch armv7 - isysroot /Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.0.sdk /var/folders/96/96OqndqqHICBMOsx0EQOFU+++TM/-Tmp-/tmp1cdf0f88.tmp/System.dll.7.o /var/文件夹/96/96OqndqqHICBMOsx0EQOFU+++TM/-Tmp-/tmp1cdf0f88.tmp/TesseractWrapper.dll.7.o /var/folders/96/96OqndqqHICBMOsx0EQOFU+++TM/-Tmp-/tmp1cdf0f88.tmp/testOCRApp.exe。 7.o /var/folders/96/96OqndqqHICBMOsx0EQOFU+++TM/-Tmp-/tmp1cdf0f88.tmp/mscorlib.dll.7.o /var/folders/96/96OqndqqHICBMOsx0EQOFU+++TM/-Tmp-/tmp1cdf0f88。 tmp/System.Core.dll.7.o /var/folders/96/96OqndqqHICBMOsx0EQOFU+++TM/-Tmp-/tmp1cdf0f88.tmp/monotouch.dll.7。o /var/folders/96/96OqndqqHICBMOsx0EQOFU+++TM/-Tmp-/tmp1cdf0f88.tmp/registrar.7.o /var/folders/96/96OqndqqHICBMOsx0EQOFU+++TM/-Tmp-/tmp1cdf0f88.tmp/main。 7.o -o /var/folders/96/96OqndqqHICBMOsx0EQOFU+++TM/-Tmp-/tmp1cdf0f88.tmp/testOCRApp -framework CFNetwork -framework Foundation -framework UIKit -framework AudioToolbox -lz -u _mono_pmip -u _CreateZStream -u _CloseZStream -u _Flush -u _ReadZStream -u _WriteZStream -liconv -lmono-2.0 -lmonotouch -L/Developer/MonoTouch/SDKs/MonoTouch.iphoneos.sdk/usr/lib -force_load /var/folders/96/96OqndqqHICBMOsx0EQOFU+++TM/ -Tmp-/tmp1cdf0f88.tmp/libTesseractStaticLib.a ld：在 /var/folders/96/96OqndqqHICBMOsx0EQOFU+++TM/-Tmp-/tmp1cdf0f88.tmp/main.7.o 和 /var/folders/96 中重复符号 _main /96OqndqqHICBMOsx0EQOFU+++TM/-Tmp-/tmp1cdf0f88.tmp/libTesseractStaticLib.a(svpaint.o) 用于架构 armv7 collect2：ld 返回 1 个退出状态

我不知道如何继续。请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T20:15:42.167

> ld：重复符号_main

只有 MonoTouch 主应用程序应该导出`main`函数。

错误消息告诉您该函数也存在于您的静态库中。尝试删除它（或将其注释掉）并重新构建静态库。

# python - Python算法从正数据集中获取随机负数据集

> ID：11722972
> 
> 赞同：4
> 
> 时间：2012-07-30T13:52:59.380
> 
> 标签：python, algorithm, random

我有一个包含独特蛋白质对的文件，即阳性数据集。让我们称之为`infile`。下面是 infile 内容的示例：

```
Q9VRA8  A1ZBB4
Q03043  Q9VX24
B6VQA0  Q7KML2 
```

条目是制表符分隔的。我们称之为随机数据集，它`outfile`必须包含单个蛋白质的组合，它们不能**以任何顺序**匹配 infile 的内容。例如，对于上面的**第一行**，随机输出文件不能包含以下对：

```
Q9VRA8  A1ZBB4
A1ZBB4  Q9VRA8 
```

此外，生成的负数据集必须包含正数据集中完全相同数量的蛋白质对。为了解决这个问题，我尝试了以下方法：

```
# Read original file
data = list(infile.readlines())
ltotal = len(data)
lwritten = 0

# Split original file in words
with open (infilename, 'rt') as infile:
    pairs = set(frozenset(line.split()) for line in infile)
words = list(itertools.chain.from_iterable(pairs))
random.shuffle(words)

# Obtain pairs of words
with open(outfilename, 'wt') as outfile:
    for pair in itertools.izip(*[iter(words)] * 2):
        if frozenset(pair) not in pairs and lwritten != ltotal:
            outfile.write("%s\t%s\n" % pair)
            lwritten += 1 
```

这行得通。但是，infile 总共有 856471 行，outfile 获得了不同范围的蛋白质对，最少有 713000。

我该如何解决这个问题，以便生成的对数与 infile 完全相同？此外，我无法解决反向配对顺序问题。对这两个问题有什么想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T14:10:21.313

要否决与顺序无关的配对，我只需将两个顺序都放入我的配对列表中：即我将添加：`line.split()`和`line.split()[::-1]`到配对集合中。

要生成更多对，而不是遍历单词列表，只需选择随机对（使用`random.choice`可能？），然后根据无效对列表否决它们（您可能还需要考虑生成对“A1ZBB4”的情况A1ZBB4" 并采取适当的行动）。只要你愿意，你就可以一直这样做。由于您需要确保输出仅包含唯一元素，因此可以在生成时将输出项添加到否决列表（或作为单独的否决列表维护）。

如果要减少内存占用，可以设置：

*   `pairs`是要否决的对集合，但每一对都是内部排序的，即如果您阅读“Q9VRA8 A1ZBB4”，则将其存储为“A1ZBB4，Q9VRA8”对。
*   you generate random pairs above, check to see if the sorted version of that pair is in your veto list, if so ignore it.

# php - 从 Android 将阿拉伯语文本发布到 MySQL

> ID：11722974
> 
> 赞同：0
> 
> 时间：2012-07-30T13:53:00.673
> 
> 标签：php, android, mysql, arabic

这是我将文本上传到 PHP 文件然后到 MySQL 服务器的代码：

```
 List<NameValuePair> params = new ArrayList<NameValuePair>();
        params.add(new BasicNameValuePair("title", title));
        params.add(new BasicNameValuePair("text", text));
        params.add(new BasicNameValuePair("date", currentDate()));
        params.add(new BasicNameValuePair("photoid", photoId()));
        params.add(new BasicNameValuePair("latitude", latit));
        params.add(new BasicNameValuePair("longitude", longi));

        JSONObject json = jsonParser.makeHttpRequest(URL_UPLOAD,
                "POST", params); 
```

来自的代码`EditText`是阿拉伯语，所以它可以在 MySQL 中工作。我可以添加阿拉伯语，它有效。我尝试手动从 PHP 添加到 MySQL 并且它有效。

因此，问题似乎是在 Android 应用程序的 PHP 文件中没有很好地接收文本。

在 MySQL 中，它的存储方式类似于`?????`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T14:01:40.797

只需在您发送到查询的字符串之前添加（N）个字符

> 呸呸呸呸

一切都会好起来的

祝你好运

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T16:41:05.180

我可以建议以 JSOn 格式发布所有参数，在这种情况下您不必担心文本编码。使用 GSON 将所有参数序列化为 JsonObject 然后作为正文的一部分发布

# android - 带有2个字段的ArrayList进入ORMLite android

> ID：11722976
> 
> 赞同：0
> 
> 时间：2012-07-30T13:53:02.603
> 
> 标签：android, arraylist, ormlite

我从 Web 服务获取 JsonArray 并使用 Gson 将其解析为相应类的 ArrayList。这是我的课：

```
@DatabaseTable(tableName = "categories")
public class Category {
    public final static String CATEGORY_TITLE_FIELD_NAME  = "title";
    @SerializedName("id")
    @DatabaseField(id = true)
    int id;
    @SerializedName("title")
    @DatabaseField(dataType = DataType.STRING, columnName = CATEGORY_TITLE_FIELD_NAME)
    String title;

    // need for ORMlite
    public Category() {}

    public Category (int id, String title) {
        this.id = id;
        this.title = title;
    }

    // getters/setters/toString methods here
} 
```

在我的活动中，我将其解析为 ArrayList：

```
Type listType = new TypeToken<List<Category>>() {}.getType();
List<Category> tasks = new ArrayList<Category>();
tasks = gson.fromJson(array.toString(), listType); 
```

结果，我得到了带有我的数据的 ArrayList 并正确保存。然后，在从 OrmLiteSqliteOpenHelper 扩展的 DatabaseHandler 中，我使用将 ArrayList 保存在数据库中的方法：

```
 public void saveCategories(List<Category> contacts) throws SQLException {
        Dao<Category, Integer> daoContact=this.getDao(Category.class);
        for (Category contact : contacts) {
            daoContact.create(contact);
        }
    } 
```

但是当我用我的 ArrayList 调用这个方法时，我得到：

```
java.sql.SQLException: Unable to run insert stmt on object {title=Non-categorized id=1}: INSERT INTO `categories` (`title` ,`id` ) VALUES (?,?)
    at com.j256.ormlite.misc.SqlExceptionUtil.create(SqlExceptionUtil.java:22)
    at com.j256.ormlite.stmt.mapped.MappedCreate.insert(MappedCreate.java:124)
    at com.j256.ormlite.stmt.StatementExecutor.create(StatementExecutor.java:363)
    at com.j256.ormlite.dao.BaseDaoImpl.create(BaseDaoImpl.java:306)
    at com.library.DatabaseHandler.saveCategories(DatabaseHandler.java:148)
    at com.assignmentexpert.LoginActivity$1.onClick(LoginActivity.java:104)
    at android.view.View.performClick(View.java:2485)
    at android.view.View$PerformClick.run(View.java:9080)
    at android.os.Handler.handleCallback(Handler.java:587)
    at android.os.Handler.dispatchMessage(Handler.java:92)
    at android.os.Looper.loop(Looper.java:123)
    at android.app.ActivityThread.main(ActivityThread.java:3687)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:507)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
    at dalvik.system.NativeStart.main(Native Method)
 Caused by: java.sql.SQLException: inserting to database failed: INSERT INTO `categories` (`title` ,`id` ) VALUES (?,?)
    at com.j256.ormlite.misc.SqlExceptionUtil.create(SqlExceptionUtil.java:22)
    at com.j256.ormlite.android.AndroidDatabaseConnection.insert(AndroidDatabaseConnection.java:134)
    at com.j256.ormlite.stmt.mapped.MappedCreate.insert(MappedCreate.java:89)
    ... 15 more
Caused by: android.database.sqlite.SQLiteConstraintException: error code 19: constraint failed
at android.database.sqlite.SQLiteStatement.native_execute(Native Method)
at android.database.sqlite.SQLiteStatement.executeInsert(SQLiteStatement.java:88)
    at com.j256.ormlite.android.AndroidDatabaseConnection.insert(AndroidDatabaseConnection.java:122)
    ... 16 more 
```

请告诉我，我应该如何在类和数据库中组织正确的数据保存。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T14:41:01.543

正如您的异常试图告诉您的那样，错误正在发生，因为 Sqlite 正在抛出异常：`"error code 19: constraint failed"`。[这是有关Sqlite 错误代码](http://www.sqlite.org/c3ref/c_abort.html)的有限文档：

因此，您遇到了一些限制。如果您使用[ORMLite](http://ormlite.com/)生成架构，那么我唯一能想到的就是您正在尝试插入具有重复 ID 字段的行。

**编辑：**

来来回回，原来数据库中已经有相同id的对象了。通过在执行*之前*查询 id ，`create(...)`您可以决定是否调用`update(...)`or `create(...)`。

但是，当我这样做时，我得到了一个更好的例外：

```
java.sql.SQLException: Unable to run insert stmt on object
    com.j256.ormlite.db.SqliteConnectTest$IdConstraint@7971f189:
    INSERT INTO `idconstraint` (`id` ,`stuff` ) VALUES (?,?)
...
Caused by: java.sql.SQLException: Unable to run insert stmt on object
    com.j256.ormlite.db.SqliteConnectTest$IdConstraint@7971f189:
    INSERT INTO `idconstraint` (`id` ,`stuff` ) VALUES (?,?)
...
Caused by: java.sql.SQLException: [SQLITE_CONSTRAINT]  Abort due to
    constraint violation (PRIMARY KEY must be unique) 
```

您确定您使用的是最新版本的 Xerial Sqlite 驱动程序吗？我使用的是 3.6.20 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T08:02:03.390

问题是我向数据库添加了两次元素。感谢[格雷](https://stackoverflow.com/users/179850/gray)

# jpa - Spring Roo注解（或jpa注解）实体中如何定义大字符串，varchar(255)不够用

> ID：11722978
> 
> 赞同：4
> 
> 时间：2012-07-30T13:53:06.263
> 
> 标签：jpa, spring-roo

在spring-roo实体中，我定义了一个content字段来记录文章的内容：

```
@NotNull
private String content; 
```

但是在 mysql 字段中，它映射到 varchar(255)，它太短了，无法记录文章的内容，所以抛出了以下异常：

```
ERROR org.hibernate.util.JDBCExceptionReporter - Data truncation: Data too long for column 'content' at row 1 
```

我的问题是mysql中的大字符串字段类型是什么？（在access db中，是“memo”），如何在Spring Roo中定义这个注解，让它记录更多的数据？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T17:18:00.963

一种选择是添加 Size 注释，例如

```
@NotNull
@Size(max = 500)
private java.lang.String content; 
```

另一种选择是使用 LOB 字段：

```
@NotNull
@Lob
private byte[] content; 
```

如果我需要一个大于大约 255 个字符的字符串字段，我通常使用 LOB 字段。但是，请注意，通常不可能在 LOB 字段内搜索数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T20:06:15.917

尝试

```
@Column(columnDefinition="varchar(255)") 
```

# tsql - Sql 在表中查找相似名称

> ID：11722979
> 
> 赞同：0
> 
> 时间：2012-07-30T13:53:08.907
> 
> 标签：tsql

我有一个 WinForms C# 应用程序，它使用 SqlCommand 从后端 SqlServer DB 中提取信息。当用户输入名称时，我想检查我的数据库表以查找相似的名称（例如具有相同的两个初始字符）。我一直在尝试以下 sql 命令文本：

```
SELECT Name
FROM tblCases
WHERE Name LIKE SUBSTRING(@Name,1,2); 
```

其中@Name是应用程序生成的SqlCommand中的一个参数，其值由用户设置。

但这每次都会返回 nil 查询结果，即使我知道它应该返回一些结果。

我想要实现的是用户类型说名称“Smith”，我希望数据库返回像“Smythe”或“Smithson”这样的值，但我看不到正确的 SQL 命令文本。

帮助最受赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T13:58:55.397

您可以使用该`LIKE`子句以这种方式执行此操作。`%`它在您传递的名称末尾添加通配符：

```
SELECT Name
FROM tblCases
WHERE Name LIKE (SUBSTRING(@name,1,2) + '%') 
```

# php - 如何仅使用用户名字段来使用 CakePHP 2.2+ 的 Auth 组件？

> ID：11722981
> 
> 赞同：1
> 
> 时间：2012-07-30T13:53:12.710
> 
> 标签：php, cakephp

我正在开发一个管理两种登录的控制器：

1.  电子邮件和密码
2.  电子邮件

第二种类型只有电子邮件字段。原因是第三方提供商向我提供了已登录用户的电子邮件，但我还需要检查该电子邮件是否存在于我的数据库中。

所以我有两种类型的身份验证，问题是：

我可以将 Auth 用于第二种类型吗？（仅电子邮件检查）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T14:15:00.293

我看不到在这里使用 Auth 的原因（您正在使用这种方法滥用整个 Auth 机制。处理简单的查找也只是一个巨大的开销）。只需使用 find(first) 检查电子邮件是否存在并相应地使用结果。这里的所有都是它的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T14:20:43.127

读这个

[http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html)

尝试这个：-

```
<?php
// Pass settings in $components array
public $components = array(
    'Auth' => array(
        'loginAction' => array(
            'controller' => 'users',
            'action' => 'login',
            'plugin' => 'users'
        ),
        'authError' => 'Did you really think you are allowed to see that?',
        'authenticate' => array(
            'Form' => array(
                'fields' => array('username' => 'email')
            )
        )
    )
);

?> 
```

或者

```
<?php
// Pass settings in $components array
public $components = array(
    'Auth' => array(
        'authenticate' => array(
            'Form' => array(
                'fields' => array('username' => 'email')
            )
        )
    )
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T13:59:28.443

您可以在此链接中看到：http: [//book.cakephp.org/2.0/en/core-libraries/components/authentication.html#configuring-authentication-handlers](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html#configuring-authentication-handlers)

```
<?php
// Pass settings in $components array
public $components = array(
    'Auth' => array(
        'authenticate' => array(
            'Form' => array(
                'fields' => array('username' => 'email')
            )
        )
    )
); 
```

这对我来说对你很好！

# sql - 如何处理搜索关键字中的空间？我想通过 AND 匹配结果

> ID：11722982
> 
> 赞同：2
> 
> 时间：2012-07-30T13:53:14.103
> 
> 标签：sql, tsql, search

我有一个搜索框，sql语句如下：

```
SELECT ..... WHERE ... LIKE '%A%' 
```

但是当用户输入“A B”（A和B之间的空格）

我想选择内容同时包含 A 和 B 的所有记录。

但我不能写：

```
.... LIKE '%A%B%' 
```

因为它不会匹配 B 首先出现的字符串，例如：“ilikeBnotA”

它应该是

```
...LIKE '%A%' AND ...LIKE '%B%' 
```

但是用户可能会输入多个空格，例如“ABC ...”，所以我需要编写一个循环，将每个关键字联系到：

```
AND ...LIKE '%keyword%' 
```

我认为这不是一个好主意，我怀疑它在搜索大字符串（如博客文章内容）时可能会导致性能问题。

这个问题有什么好的解决办法吗？搜索引擎是这样做的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T14:44:59.310

首先，您需要一个拆分功能：

```
CREATE function [dbo].[f_split]
(
@param nvarchar(max), 
@delimiter char(1)
)
returns @t table (val nvarchar(max), seq int)
as
begin
set @param += @delimiter

;with a as
(
select cast(1 as bigint) f, charindex(@delimiter, @param) t, 1 seq
union all
select t + 1, charindex(@delimiter, @param, t + 1), seq + 1
from a
where charindex(@delimiter, @param, t + 1) > 0
)
insert @t
select substring(@param, f, t - f), seq from a
option (maxrecursion 0)
return
end 
```

然后你可以像这样搜索：

```
-- declaring a tablevariable to represent your table
declare @yourtable table(id int identity(1,1), searchcol varchar(50))
insert @yourtable values('abc')
insert @yourtable values('za')
insert @yourtable values('az')
insert @yourtable values('zz')
declare @input varchar(50)
set @input = 'a b c'

-- show if one or more match exists
select * from @yourtable a 
where exists (select 1 from f_split(@input, ' ') b 
              where a.searchcol like '%'+ b.val + '%')

--show only if all matches exists
select * from @yourtable a 
where not exists (select 1 from clausens_base.dbo.f_split(@input, ' ') b 
              where not a.searchcol like '%'+ b.val + '%') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T14:14:40.137

您可以[在 SQL](http://msdn.microsoft.com/en-us/magazine/cc163473.aspx#S2)[中使用](https://stackoverflow.com/a/267935/471214)正则表达式并编写[一个正则表达式](https://stackoverflow.com/a/6035557/471214)来[匹配所有给定的字符串](https://stackoverflow.com/a/1082333/471214)：

```
(?=.*one)(?=.*two)(?=.*three) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T13:59:02.013

如果存在一个空格字符并且您的搜索字符串位于名为@a 的变量中，则下面的编写代码应该这样做

```
 ...LIKE LEFT(@a,CHARINDEX(' ',@a)) AND ... LIKE RIGHT(@a,CHARINDEX(' ',@a)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T14:13:50.350

在表中创建另一列，例如关键字，在插入数据时还可以通过删除空格字符并插入到该列来创建数据的关键字。搜索时搜索此列中的关键字。

```
create function createKeyword(@data nvarchar(256))
returns nvarchar(256)
as
begin
-- remove whitespace characters
return @kword
end 
```

并且在搜索使用时

```
t.keywords like '%' + dbo.createKeyword(@data) + '%' 
```

# objective-c - 静态库很大

> ID：11722986
> 
> 赞同：4
> 
> 时间：2012-07-30T13:53:33.930
> 
> 标签：objective-c, ios, build, static-libraries

[我在这个模板](https://github.com/michaeltyson/iOS-Universal-Library-Template)的帮助下构建了通用静态库

问题是我的库 libWrapper.a 的大小为 1.3 mb？？？:0 而我的源代码有 130 kb。

**如何减小静态库的大小？**

其他奇怪的事情-

![在此处输入图像描述](../Images/19f893de55839862b78d60ac39b2c2df.png)

每个库都具有相同的大小 - 1.3 mb。我认为通用（胖）库应该有更大的尺寸。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-03T14:59:03.080

还要确保在构建设置中将 Generate Debug Symbols 设置为 NO。这可以将静态库的大小减少大约 30%。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-08-18T03:16:37.493

在终端运行

```
strip -x [youStaticlib.a] 
```

描述

```
For dynamic shared libraries, the maximum level of stripping is usually
 -x (to remove all non-global symbols). 
```

如果你想知道剥离其他参数，在终端运行

```
man strip 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-30T14:36:11.053

你不能。静态库包括它们在可执行文件中以框架形式引用的所有代码。

# c - 编写递归函数，在 C 中打印 1 和 n 个零

> ID：11722987
> 
> 赞同：-2
> 
> 时间：2012-07-30T13:53:36.740
> 
> 标签：c, function, recursion

**我在 C 中编写递归**函数时遇到问题：

```
void func(int n) 
```

对于给定的数字 n 打印“1”并且在其后打印*n 个*零。

例如：

```
func(3); 
```

打印：1000

```
func(5); 
```

打印：100000

**不允许使用全局变量（函数外部），并且不得增加参数计数。不允许使用其他辅助函数。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T14:01:40.813

只是一些指针：

1.  为什么你认为你必须只在第一次调用函数时打印“1”？
2.  为什么不能在最后一次调用递归函数时打印它，然后打印所有的 0？
3.  您将如何确定对函数的调用是否是递归方式的最后一次调用？（“n”的值能保持答案吗？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T14:07:18.563

我建议您查看静态变量。您可以设置一个静态变量来判断您的函数是否被递归调用。如果您不允许使用全局变量，这只是一个棘手的解决方法。当你的递归完成后，只需将其设置为下一次调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T14:11:09.377

您可以使用两个函数解决此问题，例如`func`和`func_rec`。`func`将打印`1`并且它会调用递归函数，该函数`func_rec`将仅打印零（递归）。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-30T14:21:18.400

```
#include <stdio.h>

void func(int n)
{
    static one = 1;
    if (one == 1){
        printf("1");
        one--;
        func(n - 1);
    }
    else {
        if (n < 0){
            printf("\n");
            return;
        }
        else {
            printf("0");
            func(n - 1);
        }
    }
}

int main() {
    func(5);
    return 0;
} 
```

代码非常琐碎，所以即使它看起来像是一个家庭作业，我也会给出代码。

您之前的问题表明您不太喜欢 c 编码。我正在尝试做的是通过提供代码来减少您的挫败感，但要有所改变。

请回答我们为什么我给出的代码不是“纯”函数？为什么这个解决方案应该与具有全局存储的解决方案一起丢弃。

你应该学习这些东西，它很有趣:)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-30T13:59:09.207

```
#include <stdio.h>

void func(int k){
  if(k==0){
    printf("1");
    return;
  }
  func(k-1);
  printf("0");
}

int main(){
  func(3);
  return 0;
} 
```

# php - 用给定的相应键替换数组键

> ID：11722988
> 
> 赞同：19
> 
> 时间：2012-07-30T13:53:41.297
> 
> 标签：php, arrays, multidimensional-array, array-key

我有一个如下所示的数组

```
$old = array(
       'a' => 'blah',
       'b' => 'key',
       'c' => 'amazing',
       'd' => array(
                0 => 'want to replace',
                1 => 'yes I want to'
              )
       ); 
```

我有另一个数组，其中包含用密钥信息替换的密钥。

```
$keyReplaceInfoz = array('a' => 'newA', 'b' => 'newB', 'c' => 'newC', 'd' => 'newD'); 
```

我需要用数组`$old`中的相应值替换数组的所有键`$keyReplaceInfo`。

输出应该是这样的

```
$old = array(
       'newA' => 'blah',
       'newB' => 'key',
       'newC' => 'amazing',
       'newD' => array(
                0 => 'want to replace',
                1 => 'yes I want to'
              )
       ); 
```

我必须手动完成，如下所示。我期待更好的选择。任何人都可以提出更好的方法来实现这一点吗？

```
$new = array();
foreach ($old as $key => $value)
{
     $new[$keyReplaceInfoz[$key]] = $value;
} 
```

我知道这可以更简单。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-07-30T14:08:44.083

```
array_combine(array_merge($old, $keyReplaceInfoz), $old) 
```

我认为这看起来比你提出的要容易。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-07-25T15:58:49.483

```
array_combine(
    ['newKey1', 'newKey2', 'newKey3'],
    array_values(['oldKey1' => 1, 'oldKey2' => 2, 'oldKey3' => 3])
); 
```

只要您具有相同数量的值和相同的顺序，这应该可以解决问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-03-11T10:25:53.540

IMO 使用 array_combine、array_merge，甚至 array_intersect_key 都是矫枉过正的。原始代码足够好，而且速度非常快。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-03-17T05:41:14.777

调整@shawn-k 解决方案，这里使用array_walk 的代码更简洁，它只会替换所需的键，当然您可以根据自己的方便进行修改

```
array_walk($old, function($value,$key)use ($keyReplaceInfoz,&$old){
        $newkey = array_key_exists($key,$keyReplaceInfoz)?$keyReplaceInfoz[$key]:false;
        if($newkey!==false){$old[$newkey] = $value;unset($old[$key]);
        }
    });

    print_r($old); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-04-24T07:00:08.477

我刚刚在我自己的应用程序中解决了同样的问题，但是对于我的应用程序 $keyReplaceInfoz 就像白名单一样 - 如果找不到密钥，则从结果数组中删除整个元素，而匹配的白名单密钥被转换为新值.

[我想您可以通过巧妙地使用 array_map ( http://php.net/manual/en/function.array-map.php](http://php.net/manual/en/function.array-map.php) )来应用相同的算法，而总代码可能更少，这也许是另一个慷慨的读者会做的。

```
function filterOldToAllowedNew($key_to_test){       
    return isset($keyReplaceInfoz[$key_to_test])?$keyReplaceInfoz[$key_to_test]:false;
}   

$newArray = array();

foreach($old as $key => $value){
    $newkey = filterOldToAllowedNew($key);
    if($newkey){
       $newArray[$newkey] = $value;
    }
}

print_r($newArray); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-01T20:45:25.583

这是我为同一主题实施的解决方案：

```
/**
 * Replace keys of given array by values of $keys
 * $keys format is [$oldKey=>$newKey]
 *
 * With $filter==true, will remove elements with key not in $keys
 *
 * @param  array   $array
 * @param  array   $keys
 * @param  boolean $filter
 *
 * @return $array
 */
function array_replace_keys(array $array,array $keys,$filter=false)
{
    $newArray=[];
    foreach($array as $key=>$value)
    {
        if(isset($keys[$key]))
        {
            $newArray[$keys[$key]]=$value;
        }
        elseif(!$filter)
        {
            $newArray[$key]=$value;
        }
    }

    return $newArray;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-03-04T06:36:24.513

如果您正在寻找在多维数组上使用的递归解决方案，请查看以下方法。它将替换所有请求的密钥，并保留所有其他密钥。

```
/**
 * Given an array and a set of `old => new` keys,
 * will recursively replace all array keys that
 * are old with their corresponding new value.
 *
 * @param mixed $array
 * @param array $old_to_new_keys
 *
 * @return array
 */
function array_replace_keys($array, array $old_to_new_keys)
{
    if(!is_array($array)){
        return $array;
    }

    $temp_array = [];
    $ak = array_keys($old_to_new_keys);
    $av = array_values($old_to_new_keys);

    foreach($array as $key => $value){
        if(array_search($key, $ak, true) !== false){
            $key = $av[array_search($key, $ak)];
        }

        if(is_array($value)){
            $value = array_replace_keys($value, $old_to_new_keys);
        }

        $temp_array[$key] = $value;
    }

    return $temp_array;
} 
```

使用 OP 的示例数组：

```
$old = array(
       'a' => 'blah',
       'b' => 'key',
       'c' => 'amazing',
       'd' => array(
                0 => 'want to replace',
                1 => 'yes I want to'
              )
       );
$replace = ["a" => "AA", 1 => 11];

var_export(array_replace_keys($old, $replace)); 
```

给出以下输出：

```
array (
  'AA' => 'blah',
  'b' => 'key',
  'c' => 'amazing',
  'd' => 
  array (
    0 => 'want to replace',
    11 => 'yes I want to',
  ),
) 
```

[演示](https://3v4l.org/qmfFp)

受[以下代码段](https://programmer.group/php-recursive-multidimensional-array-replacement-key-name-and-value.html)的启发。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-06-13T05:22:04.443

这与数组顺序和数组计数无关。输出顺序和值将基于replaceKey。

```
$replaceKey = array('a' => 'newA', 'b' => 'newB', 'c' => 'newC', 'd' => 'newD', 'e' => 'newE','f'=>'newF');

$array = array(
       'a' => 'blah',
       'd' => array(
                0 => 'want to replace',
                1 => 'yes I want to'
              ),
       'noKey'=>'RESIDUAL',
       'c' => 'amazing',
       'b' => 'key',
       );

$filterKey = array_intersect_key($replaceKey,$array);
$filterarray = array_intersect_key(array_merge($filterKey,$array),$filterKey);

$replaced = array_combine($filterKey,$filterarray);

//output
var_export($replaced);
//array ( 'newA' => 'blah', 'newB' => 'key', 'newC' => 'amazing', 'newD' => array ( 0 => 'want to replace', 1 => 'yes I want to' ) ) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-10-13T22:59:49.527

这个问题很老，但因为它首先出现在谷歌上，所以我想我会添加解决方案。

```
// Subject
$old = array('foo' => 1, 'baz' => 2, 'bar' => 3));

// Translations    
$tr  = array('foo'=>'FOO', 'bar'=>'BAR');

// Get result
$new = array_combine(preg_replace(array_map(function($s){return "/^$s$/";}, 
           array_keys($tr)),$tr, array_keys($old)), $old);

// Output
print_r($new); 
```

结果：

```

    大批
    (
       [FOO] => 1
       [巴兹] => 2
       [酒吧] => 3
    )

```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-03-23T15:32:39.623

这使用[了@Summoner](https://stackoverflow.com/users/1562299/summoner)的[示例](https://stackoverflow.com/a/11723232/7451109)，但牢记@ [Leigh](https://stackoverflow.com/users/599857/leigh)的[提示](https://stackoverflow.com/questions/11722988/replace-array-keys-with-given-respective-keys#comment15553730_11723232)：

```
$start = microtime();
$array = [ "a" => 1, "b" => 2, "c" => 3 ];

function array_replace_key($array, $oldKey, $newKey) {
    $keys = array_keys($array);
    $idx = array_search($oldKey, $keys);
    array_splice($keys, $idx, 1, $newKey);
    return array_combine($keys, array_values($array));
}

print_r(array_replace_key($array, "b", "z")); 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2012-07-30T14:24:45.387

```
<?php
$old = array(
       'a' => 'blah',
       'b' => 'key',
       'c' => 'amazing',
       'd' => array(
                0 => 'want to replace',
                1 => 'yes I want to'
              )
       );
$keyReplaceInfoz = array('a' => 'newA', 'b' => 'newB', 'c' => 'newC', 'd' => 'newD');

$new = array(); 

foreach ($old as $key => $value)
{
    $newvalue =  $keyReplaceInfoz[$key];
   $new[$key] = $newvalue;
}
print_r($new);

?> 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2012-07-30T14:07:57.670

```
 <?php
$new = array(); 

foreach ($old as $key => $value)
{
     $new[$keyReplaceInfoz][$key] = $value;

}
?> 
```

# azure - 如何公开访问 Microsoft Azure 存储服务中的对象？

> ID：11722989
> 
> 赞同：4
> 
> 时间：2012-07-30T13:53:43.713
> 
> 标签：azure, storage, azure-storage, azure-blob-storage

我想上传一些要存储在 Azure 中的图像，我发现 Blob 中有一个叫做“存储”的东西，经过一些研究后，我能够在存储服务中创建我的帐户，我正在使用“Azure 存储资源管理器”访问它.

1）还有其他软件可以访问我的存储帐户吗？或者另一种方式来做到这一点？

2)“公共容器”和“公共 blob”有什么区别？

3）我想创建子文件夹，我该怎么做？

4）我怎样才能制作一张我上传到名为“图像”的“公共博客”的图像，就像这样`image\azure.png`并且可以从互联网上的任何人访问？

在 S3（来自亚马逊）中，您可以说该对象是否是公共的，然后从某个 url 访问它。使用 Azure 存储服务可以做到这一点吗？

我知道有很多问题，但对我来说，理解这些东西以及如何让它们现在工作似乎有点复杂。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-30T14:04:32.097

以下是您的问题的答案：

1.  访问您的存储帐户的唯一“官方”方式是通过 REST API（或使用此 API 的 SDK）。除此之外，还有一些很好的工具可以让您访问您的存储帐户：

    *   [http://www.cerebrata.com/products/cloudstoragestudio/](http://www.cerebrata.com/products/cloudstoragestudio/)
    *   [http://www.cloudberrylab.com/free-microsoft-azure-explorer.aspx](http://www.cloudberrylab.com/free-microsoft-azure-explorer.aspx)
    *   [https://www.myazurestorage.com/](https://www.myazurestorage.com/)（基于网络！）
    *   [http://azurestorageexplorer.codeplex.com/](http://azurestorageexplorer.codeplex.com/)
2.  公共容器允许您获取该容器中所有可用 Blob 的列表并获取容器元数据。公共 blob 意味着您必须知道 blob 的确切 url 才能访问它。参考：http: [//msdn.microsoft.com/en-us/library/dd179354](http://msdn.microsoft.com/en-us/library/dd179354)

3.  目录实际上并不存在。只需在“mydir/myblob.txt”中重命名您的 blob，例如模拟目录。如果您使用 CloudBerry 的工具，您将看到目录结构（我使用它来存储文件）。

4.  将容器权限更改为公共 blob，上传图像。然后它将在 url 上可用（这里我假设您的容器称为**image**）：http: [//YOURSTORAGEACCOUNTHERE.blob.core.windows.net/image/azure.png](http://YOURSTORAGEACCOUNTHERE.blob.core.windows.net/image/azure.png)

# jquery - jQuery视差效果

> ID：11722990
> 
> 赞同：1
> 
> 时间：2012-07-30T13:54:01.497
> 
> 标签：jquery

我一直在看很多很多视差教程，对于我实际需要实现的目标来说太复杂了，而且我确信在没有插件的情况下有一些棘手但更简单的方法可以做到这一点。

基本上，我想做的就是拥有例如..

一艘火箭飞船。在空间背景上。当用户向下滚动时，火箭飞船会以两倍或一半的速度滚动。在 x 或 y 中？有没有人有任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T14:30:26.320

当然。我有很多想法。这听起来并不过分复杂。

在函数范围之外创建一个变量。给它起一个名字`last_position`，给它一个值`0`。

```
var last_position = 0; 
```

现在捕获滚动事件。

```
$(window).scroll(function(){

}); 
```

现在，捕捉我们从滚动顶部到的距离。将此变量保存到 last_position 变量中，并创建一个 if 语句。

```
$(window).scroll(function(){
  var winTop = $(this).scrollTop(); 
  if(winTop > last_position){
    //we're scrolling down
  }else{
    //we're scrolling up
  }
  //update last_position here
  last_position = winTop;
}); 
```

不，在这些 if 语句中，用于分别`.animate()`设置`top & left`距离。用任何数学计算你想达到你想要的效果。重要的是要注意，`.stop()`在再次调用它之前，您需要每个动画。如果你不......好吧，你会明白为什么......

```
$(window).scroll(function(){
  var winTop = $(this).scrollTop(); 
  if(winTop > last_position){
    $('#spaceship').stop(true).animate({
      top: "+=15px",
      left: "-=15px"
    });
  }else{
    $('#spaceship').stop(true).animate({
      top: "-=15px",
      left: "+=15px"
    });
  }
  //update last_position here
  last_position = winTop;
}); 
```

自己尝试一下。

# joomla - Joomla 2.5.6 - 403 被禁止

> ID：11722992
> 
> 赞同：0
> 
> 时间：2012-07-30T13:54:05.540
> 
> 标签：joomla, joomla2.5, http-status-code-403

我已经安装了 joomla 2.5.6 并创建了自己的模板。我无法将它作为 zip 上传，所以我使用了 FTP，而不是从文件夹安装。尝试上传内容或单击管理面板中任意位置的保存按钮时，我仍然收到错误 403 Forbidden。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T15:17:39.087

请务必检查服务器上的文件/文件夹权限。这是 403 错误最常见的情况。抱歉一开始太短了。转到管理控制面板 -> 站点 -> 系统信息 -> 目录权限并检查每个目录是否可写。特别注意底部的2个字符串：日志目录和临时目录

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T19:05:07.843

我建议您确保*所有** 您的模板文件都已到位，并且扩展表中有适当的数据库条目。403 错误不一定来自网络服务器，Joomla 经常在找不到东西时使用它们。

# r - r 中基于月份的总列

> ID：11722994
> 
> 赞同：0
> 
> 时间：2012-07-30T13:54:07.693
> 
> 标签：r

我正在尝试根据月份汇总数据。例如，我有这个数据集：

```
x
        Date App Vol
1 2010-01-30   A 100
2 2010-01-28   B 140
3 2010-01-30   C 160
4 2010-02-28   A 110
5 2010-02-28   B 120
6 2010-02-28   C 300 
```

我希望能够按月汇总 App 数据。根据上面的数据框，A应该是210，B=260，C=460等等。

我在下面使用聚合函数 ase，但出现错误：

```
y<-aggregate(x$Vol, list(Month = format(as.POSIXct(x$Date), "%Y-%m")), sum) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T14:12:21.437

从`Vol`变成数字开始（不知何故搞砸了）：

```
x$Vol <- as.numeric(as.character(x$Vol)) 
```

我可以通过变成一个因素来重现您的错误，`Vol`如下所示：

```
x$Vol <- as.factor(x$Vol)
aggregate(x$Vol, list(x$App), sum)

#> aggregate(x$Vol, list(x$App), sum)
#Error in Summary.factor(1:2, na.rm = FALSE) : 
#  sum not meaningful for factors 
```

你还说：

```
I would like to be able to summary App data by each month. According to the 
data frame above, A should be 210, B = 260, C=460 etc. 
```

如果是这种情况，请使用：

```
x$Month <-  format(as.POSIXct(x$Date), "%Y-%m")
aggregate(x$Vol, list(x$Month, x$App), sum) 
```

否则使用 ttmacer 的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T14:05:00.750

```
x<-read.table(header=T,text="Date       App   Vol
    1 2010-01-30   A        100
    2 2010-01-28   B     140
    3 2010-01-30   C     160
    4 2010-02-28   A        110     
    5 2010-02-28   B         120      
    6 2010-02-28   C         300") 

y<-aggregate(x$Vol, list(Month = format(as.POSIXct(x$Date), "%Y-%m")), sum)
y<-aggregate(x$Vol, list(x$App), sum) 
```

尝试使用这些数据。

# regex - Postgres中的正则表达式查找和替换

> ID：11722995
> 
> 赞同：36
> 
> 时间：2012-07-30T13:54:11.080
> 
> 标签：regex, postgresql

我有一个表，其中包含许多行，其中的列包含 URL。URL 的格式为：

`http://one.example1.com:9999/dotFile.com`

我想替换该列中的所有匹配项，`http://example2.com/dotFile.com`同时保留 :9999 之后的所有内容。我找到了一些关于 regexp_matches 和 regexp_replace 的文档，但我不能完全理解它。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-07-30T14:04:23.183

要替换固定字符串，请使用简单`replace()`函数。

要替换动态字符串，您可以`regexp_replace()`这样使用：

```
UPDATE
  YourTable
SET
  TheColumn = regexp_replace(
    TheColumn, 'http://[^:\s]+:9999(\S+)', 'http://example2.com\1', 'g'
  ) 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-07-30T14:04:06.720

如果您知道网址，则不必使用正则表达式。replace() 函数应该适合你：

```
replace(string text, from text, to text)        
Replace all occurrences in string of substring from with substring to   
example: replace('abcdefabcdef', 'cd', 'XX')    abXXefabXXef 
```

你可以试试：

```
UPDATE yourtable SET
  yourcolumn = replace(yourcolumn, 'one.example1.com:9999','example2.com')
; 
```

# css - 将网格显示为文本输入背景

> ID：11722996
> 
> 赞同：0
> 
> 时间：2012-07-30T13:54:14.757
> 
> 标签：css, textinput

我正在尝试设置文本输入的样式以显示与文本对齐的“网格”，请参见下面的示例：

![具有自定义网格背景的文本输入](../Images/2c34cc7bedaad036cf07fd7c15da4a33.png)

我使用固定宽度的字体，具有固定的字母间距。理论上，应该有可能在每个浏览器上获得相同的预期渲染，但众所周知的事实是字体在不同浏览器中的显示方式不同。

如果我在 Firefox 中正确对齐，它在 IE 等上不起作用。作为一种解决方法，我可以在 IE 和 Firefox 之间使用不同的 CSS 来显示稍微不同的背景图像。但即使在 Firefox 上，渲染似乎也取决于屏幕分辨率（我在 4:3 和 16:9 上得到了不同的结果）。

有没有人知道我如何才能在文本和网格之间完成正确的对齐？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-13T10:03:20.650

您可以将此代码添加到 css 文件中：

```
letter-spacing: 24px; 
```

然后你会在任何字符之后有间距，你也可以用网格添加准备好的背景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T14:10:06.327

有一种解决方法，无论分辨率和浏览器如何，它都可以工作。

在你的 div 中取一个 span 和 input 字段。显示相互重叠的跨度和输入字段。

现在创建一个字符串'|' 具有与输入字段字符相同的字符间距和宽度。由于这些是重叠的，当用户键入时它看起来像一个网格。

希望这会奏效。

# wordpress - 带有 $authors 的 Wordpress 自定义 foreach 循环出现错误

> ID：11722997
> 
> 赞同：0
> 
> 时间：2012-07-30T13:54:15.483
> 
> 标签：wordpress, wordpress-theming

默认`wp_list_authors`将按以下格式返回作者列表：
`<a href="#">AuthorName</a> (PostCount)`

我想以以下格式显示带有帖子计数的作者列表：
`<a href="#">AuthorName (PostCount)</a>`

以下`custom foreach loop`与作者一起出现错误 ( `Invalid argument supplied`)。
**任何建议我做错了什么？**

```
<?php
    $args = array(
        'orderby'       => 'post_count', 
        'order'         => 'DESC', 
        'optioncount'   => true, 
        'exclude_admin' => false, 
        'show_fullname' => true,
        'hide_empty'    => false,
        'echo'          => false,
        'style'         => none,
        'html'          => false );

    $author = wp_list_authors($args);
      foreach($author as $author->ID) {
        echo '<li><a href="'.get_the_author_link( $author->name ).'">'.get_the_author().' ('.count_user_posts($author->ID).')</a></li> ';
    }

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T14:02:40.077

您实际上是在重做该[`wp_list_authors`](http://codex.wordpress.org/Function_Reference/wp_list_authors)功能已经可以做的事情。您可以删除整个`foreach`，只需使用以下代码来实现您想要的：

```
$args = array(
    'orderby'       => 'post_count',
    'order'         => 'DESC',
    'optioncount'   => true,
    'exclude_admin' => false,
    'show_fullname' => true,
    'hide_empty'    => false
);

$authors = wp_list_authors( $args ); 
```

在您希望列表显示的位置使用它，因为它会显示在那里。

# c++ - 无法向 MFC ActiveX 添加功能

> ID：11722999
> 
> 赞同：0
> 
> 时间：2012-07-30T13:54:21.743
> 
> 标签：c++, mfc, activex

我正在尝试使用 Visual Studio 2010 c++ MFC 库创建 ActiveX 组件 mfc_activeX。完成向导系统后编译没有错误。

通过在 Cmfc_activeXCtrl Add>>Add Function 上单击鼠标右键并填写/输出参数表单添加简单的新方法后，我得到了简单的功能：

```
int Cmfc_activeXCtrl::Hello(int i)
 {
 return 0;
 } 
```

在这个过程之后，我不能再编译代码了。我有消息：

```
Error   85  error MSB8011: Failed to register output. Please try enabling Per-user Redirection or register the component from a command prompt with elevated permissions.   C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\Microsoft.CppCommon.targets   744 6   mfc_activeX

86  IntelliSense: #error directive: Please use the /MD switch for _AFXDLL builds    c:\program files (x86)\microsoft visual studio 10.0\vc\atlmfc\include\afxver_.h 81  3 
```

如何摆脱这些错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T15:59:44.887

Visual Studio 与无权运行 regsvr32 的用户一起运行，该用户在成功构建后尝试注册组件。

您可以通过以管理员身份运行 Visual Studio 来解决此问题。

至于第二个错误

[#error 请为 _AFXDLL 构建使用 /MD 开关](https://stackoverflow.com/questions/4229120/error-please-use-the-md-switch-for-afxdll-builds)

实际上，我不得不切换到另一个 /Mx 设置，然后切换回来，所以选择是粗体的，看来 IDE 没有正确更新。