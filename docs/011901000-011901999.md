# StackOverflow 问答 11901000-11901999

# windows-phone-7 - Windows Phone 中不同方向的不同值（例如高度或宽度）

> ID：11901006
> 
> 赞同：1
> 
> 时间：2012-08-10T11:47:19.693
> 
> 标签：windows-phone-7, windows-phone-7.1

我有一个 ListBox `Height="515"`，当我打开我的应用程序时，这个 ListBox 的一部分在屏幕外。

如何指定 ListBox 的横向高度应为例如 350 像素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T11:55:32.407

检测方向变化

```
private void PhoneApplicationPage_OrientationChanged(object sender, OrientationChangedEventArgs e)
    {
        if ((e.Orientation & PageOrientation.Portrait) == (PageOrientation.Portrait))
        {
            listbox.Height = 515;
        }
        else
        {
            listbox.Height = 350;
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T12:19:12.547

它不能像在 Android 中那样容易。但是，如果您想为“正确”呈现实现纯粹基于 XAML 的解决方案，那么您可以考虑使用 Grid 布局容器。当方向发生时，网格布局将重新打包给定页面中包含的元素。

# python - Python中的反向DNS查找

> ID：11901010
> 
> 赞同：6
> 
> 时间：2012-08-10T11:47:25.840
> 
> 标签：python, ipv6

如果我有一个像 2001:4860:4860::8888 这样的 IP 地址

如何获得 foo.ip6.arpa 格式的完全限定域？

编辑：到目前为止，这两种解决方案都给了我 google-public-dns-a.google.com - 也许反向 DNS 是错误的名称。为此，我希望输出类似于 8.8.8.8.0...etc.ip6.arpa

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-10T11:51:14.513

使用 dnspython。

```
from dns import resolver,reversename
addr=reversename.from_address("2001:4860:4860::8888")
str(resolver.query(addr,"PTR")[0]) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-10T17:14:14.260

[IPy](http://pypi.python.org/pypi/IPy/)提供了你想要的方法：

```
>>> from IPy import IP
>>> ip = IP('127.0.0.1')
>>> ip.reverseName()
'1.0.0.127.in-addr.arpa.' 
```

适用于 IPv4 和 IPv6，尽管原始 IPy 对 IPv6 有一些错误。[我在https://github.com/steffann/python-ipy](https://github.com/steffann/python-ipy)创建了一个带有一些扩展和修复的 fork，只要这些修复尚未合并回原始代码，您就可以使用它。

# 更新：

您当然也可以使用内置`socket`模块：

```
>>> import socket
>>> socket.getnameinfo(('2001:4860:4860::8888', 0), 0)
('google-public-dns-a.google.com', '0')
>>> socket.getnameinfo(('127.0.0.1', 0), 0)
('localhost', '0') 
```

你需要提供一个主机+端口元组，但你可以提供`0`端口，你会得到主机名。

# javascript - Phonegap：无法通过 HTTP 调用远程主机

> ID：11901011
> 
> 赞同：0
> 
> 时间：2012-08-10T11:47:26.480
> 
> 标签：javascript, jquery, iphone, ajax, cordova

我用 jQuery 和 jQueryMobile 创建了一个 HTML5 网站。

如果我在浏览器中运行它，一切正常。

当我通过Phonegap将它部署到iPhone模拟器时，它找不到我这样包含的jQuery对象（$）：

```
<script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>

console.log($); // undefined 
```

如果我修改 src 属性，以便我的应用程序使用 jQuery 的本地副本，则 jQuery 对象存在：

```
<script src="lib/jquery.js"></script>

console.log($); // works 
```

**但**后来我注意到**我的应用程序中的 Ajax 调用都不起作用**。

因此，我假设我的 iPhone 应用程序拒绝与远程主机的 HTTP 连接。

我怎样才能解决这个问题？

* * *

**更新：**我检查了我的应用程序在 iPhone 应用程序中部署的 URL，它看起来像这样：

file:///Users/mobile/Library/Application Support/iPhone Simulator/5.1/Applications/9767E436-B93422-5423-5HLD-1680170C8AC5/MyApp.app/www/index.html

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T12:02:00.963

您需要在 Cordova.plist 中指定允许连接的主机

此功能称为[白名单](http://docs.phonegap.com/en/1.9.0/guide_whitelist_index.md.html)，可避免您的应用连接到您不想连接的服务器

# regex - 使用正则表达式获取值

> ID：11901012
> 
> 赞同：0
> 
> 时间：2012-08-10T11:47:30.673
> 
> 标签：regex, perl, tcl

我有一个字符串：

```
set a "ODUCTP-1-1-1-2P1"
regexp {.*?\-(.*)} $a match sub 
```

我希望 sub 的值是 1-1-1-2P1

但我得到了空字符串。谁能告诉我如何正确使用正则表达式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T12:40:04.730

问题在于，非贪婪性`.*?`正在泄漏到`.*`后面，这是正在使用的 RE 引擎的一个特性（自动机理论而不是基于堆栈的）。

最简单的解决方法是用不同的方式编写正则表达式。因为 Tcl 具有未锚定的正则表达式（默认情况下）并尽快开始匹配，所以从字符串的第一个`-`到结尾的贪婪匹配是完美的（`sub`在 之后分配所有内容`-`）。这是一个非常简单的 RE: `-(.*)`。要使用它，请执行以下操作：

```
regexp -- {-(.*)} $a match sub 
```

注意`--`; 这里需要它，因为正则表达式以`-`符号开头，否则会被混淆为奇怪（且不受支持）的选项。除了那一个小问题，这一切都是直截了当的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T11:58:24.413

```
$str = "ODUCTP-1-1-1-2P1";
$str =~ s/^.*?-//;
print $str; 
```

或者：

```
$str =~ /^.*?-(.*)$/;
print $1; 
```

# javascript - EXT中的Javascript

> ID：11901019
> 
> 赞同：0
> 
> 时间：2012-08-10T11:47:56.513
> 
> 标签：javascript, extjs, ext.net

我正在使用 ext.net 框架来开发工作中的项目。但是我遇到了 jQuery 的 (document).ready 函数的问题。

特别是在加载页面时，jQuery 似乎永远不会被执行。

```
$(document).ready(function () 
{
    var find = $("#NewsPanel");
    var offset = find.offset();
    var top = offset.top - 5;
    var left = offset.left + 70;
    $("#img_NewsnoteOnAll").offset({ top: top, left: left });
    $("#debug").text = top.toString + left.toString();
} 
```

如果我删除文档就绪功能，它就无法获取对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T11:50:31.390

```
$(document).ready(function () 
{
    var find = $("#NewsPanel");
    var offset = find.offset();
    var top = offset.top - 5;
    var left = offset.left + 70;
    $("#img_NewsnoteOnAll").offset({ top: top, left: left });
    $("#debug").text = top.toString + left.toString();
}); 
```

`);`你在最后一个之后忘记了`}`。

# c# - mvvm的一般疑惑和messageBox

> ID：11901027
> 
> 赞同：2
> 
> 时间：2012-08-10T11:48:16.807
> 
> 标签：c#, mvvm

我正在使用该模式开发一个`WPF`应用程序。`MVVM`

我知道该`MVVM`模式很好地分离`GUI`了应用程序的逻辑，所以我可以`GUI`独立地测试逻辑。

但是，如果我需要向用户发送一些消息，使用 messageBox 是否是个好主意？因为我正在阅读一些解决方案，所以他们都试图实现一个新的视图及其视图模型......等等。但我不太清楚这个实用程序。

我的意思是，如果我想向用户通知一些东西，我的结果取决于用户的决定，我该如何分离我的测试（GUI 和逻辑）？不直接使用 messageBox 而是使用带有视图模型的新视图以及这需要的所有额外工作有什么好处？因为在这两种情况下，我的结果都取决于用户的决定。在这种情况下如何测试我的应用程序？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T11:54:42.057

> 因为我正在阅读一些解决方案，所以他们都试图实现一个新的视图及其视图模型......等等。但我不太清楚这个实用程序。

如何对打开消息框的方法进行单元测试？

如果规范发生变化并且您需要使用不同的（自定义）消息框，或者甚至只记录错误（稍后显示在摘要报告中）怎么办？然后，您需要查找并替换每个`msgBox.Show`呼叫。

> 我的意思是，如果我想向用户通知一些东西，我的结果取决于用户的决定，我该如何分离我的测试（GUI 和逻辑）？

通过创建一个事件，当您需要做出决定时触发该事件。然后你会收回决定。你不在乎它是从哪里来的。

> 因为在这两种情况下，我的结果都取决于用户的决定。在这种情况下如何测试我的应用程序？

很简单。你只是嘲笑你的用户回复。您可以（并且可能应该）测试两种可能的情况，因此只需附加两个“假”事件处理程序：一个返回肯定决定，一个返回否定决定，就好像您的用户实际上在某个消息框中单击了“是”或“否”。

例如，参见[http://joyfulwpf.blogspot.com/2009/05/mvvm-communication-among-viewmodels.html 。](http://joyfulwpf.blogspot.com/2009/05/mvvm-communication-among-viewmodels.html)

**ASpirin**提出的注入通知器的建议也是一个不错的设计选择。

一些粗略的、过于简单的实现：

```
using System;
using System.Windows.Forms;

namespace Demo
{
    public delegate bool DecisionHandler(string question);
    /// <remarks>
    /// Doesn't know a thing about message boxes
    /// </remarks>    
    public class MyViewModel
    {
        public event DecisionHandler OnDecision;

        private void SomeMethod()
        {
            // something...

            // I don't know who or what replies! I don't care, as long as I'm getting the decision!
            // Have you made your decision for Christ?!! And action. ;)
            var decision = OnDecision("Do you really want to?"); 

            if (decision)
            {
                // action
            }
            else
            {
                // another action
            }
        }
    }

    class Program
    {
        static void Main(string[] args)
        {
            // this ViewModel will be getting user decision from an actual message box
            var vm = new MyViewModel();
            vm.OnDecision += DecideByMessageBox;

            // unlike that one, which we can easily use for testing purposes
            var vmForTest = new MyViewModel();
            vmForTest.OnDecision += SayYes;    
        }        

        /// <summary>
        /// This event handler shows a message box
        /// </summary>        
        static bool DecideByMessageBox(string question)
        {
            return MessageBox.Show(question, String.Empty, MessageBoxButtons.YesNo) == DialogResult.Yes;
        }
        /// <summary>
        /// Simulated positive reply
        /// </summary>        
        static bool SayYes(string question)
        {
            return true;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T11:59:01.193

在任何使用情况下，您都可以创建 Notifier 类（实现您的接口（例如`IUserNotifier{ void ShowMessage(string message);}`或更复杂）），它将显示消息框。并使用其他实现进行测试，它什么都不显示，只返回结果。当您创建特定样式的视图时，另一个实现将显示它

# mysql - mysql中不同行中字段的连接

> ID：11901032
> 
> 赞同：2
> 
> 时间：2012-08-10T11:48:40.413
> 
> 标签：mysql, concatenation, concat

我在mysql中有一个查询，结果如下：

```
val1_col1A  val1_col2A  val1_col1B val1_col2B
val1_col1A  val1_col2A  val2_col1B val2_col2B
val1_col1A  val1_col2A  val3_col1B val3_col2B 
```

像这样 ：

```
1 reza math 20
1 reza c++  19
1 reza C#   17 
```

我的查询是：

```
SELECT col1A,col2A,col1B,col2B
FROM  A join B
ON col3A=col3B 
```

我想查询它的结果如下：

```
val1_col1A  val1_col2A  val1_col1B,val2_col1B,val3_col1B val1_col2B,val2_col2B,val3_col2B 
```

像这样 ：

```
1 reza math,c++,c# 20,19,17 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T11:52:53.327

我认为这就是你要找的：

```
SELECT CONCAT(GROUP_CONCAT(DISTINCT val1_col1A), 
              GROUP_CONCAT(DISTINCT val1_col2A), 
              GROUP_CONCAT(DISTINCT val1_col1B),
              GROUP_CONCAT(DISTINCT val1_col2B)) AS value
FROM table_name; 
```

# c# - 根据状态组合框的值动态更新城市组合框的值

> ID：11901033
> 
> 赞同：0
> 
> 时间：2012-08-10T11:48:48.020
> 
> 标签：c#, jquery, html, ashx

> **可能重复：**
> [如何实现动态组合框选择系统](https://stackoverflow.com/questions/4439419/how-to-implement-a-dynamic-combo-box-selection-system)

我把这个问题作为公司的笔试之一：

> 使用 HTML/JQuery 编写代码，根据状态组合框的值动态更新城市组合框的值。您需要编写一个 HTML 页面/JS 脚本/ASP.net 处理程序 (ashx) 页面，该页面以您选择的任何格式返回值。
> 
> 有关表格和条件的详细信息，请查看图像。

由于我是学生并且还没有使用过 ashx 或 Jquery，所以我无法完成。如果有人可以建议我如何解决这个问题，那就太好了！

到目前为止，我已经创建了一个处理程序，它提取包含州和城市名称的 .txt 文件。

您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T12:34:10.063

第一个答案的示例代码；

```
<script type=”text/javascript”&gt;
            function Click() {
                PageMethods.SomeMethod(OnSucceeded, OnFailed);
            }

            function OnSucceeded(result, userContext, methodName) {
                $get(‘Label1′).innerHTML = result;
            }

            function OnFailed(error, userContext, methodName) {
                $get(‘Label1′).innerHTML = “Error text”;
            }
        </script>

    <asp:ScriptManager ID=”ScriptManager1″ runat=”server” EnablePageMethods=”true”&gt;</asp:ScriptManager>

                <asp:Label ID=”Label1″ runat=”server” Text=”Label”&gt;</asp:Label>
                <asp:Button ID=”Button1″ runat=”server” OnClientClick=”Click();return false;” Text=”Button” /> 
```

在aspx页面代码后面；

```
 [WebMethod]
        public static string SomeMethod()
        {

            //return cities as Json as suggested by the first answer
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T12:02:14.320

我建议将您的信息序列化为 json 以将值传递给您的页面。要获取值，请使用`onchange`状态组合框中的事件。发生此事件时，触发对处理程序的[ajax 调用](http://api.jquery.com/jQuery.ajax/)，从而在 ajax 调用的成功函数中返回数据。

在该成功函数中，使用检索到的数据填充第二个组合框。

# scala - Scala 代码 - 错误：缺少参数类型错误

> ID：11901035
> 
> 赞同：2
> 
> 时间：2012-08-10T11:48:56.373
> 
> 标签：scala

这段代码有什么问题？

```
object Numbers extends App {

  def decode(number: Int) : String = number match {
    case _ if _ % 15==0 => "fizzbuzz"
    case _ if _ % 3==0 => "fizz"
    case _ if _ % 5==0 => "buzz"
    case _ => _.toString
  }

  val test = List(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15)
  test.map(decode).foreach(println)
} 
```

我收到以下错误：

```
error: missing parameter type for expanded function
The argument types of an anonymous function must be fully known. (SLS 8.5)
Expected type was: String
case _ if _%15==0 => "fizzbuzz" 
```

为什么编译器不知道参数类型？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-10T12:11:29.917

`(_ % 15 == 0)`扩展为一个函数`(x: ?) => x % 15 == 0`。其他`if`检查也一样。
编译器无法推断它，因为它没有关于参数的信息，它是一个新名称，与`case _`. 所以你不能在那里使用下划线来引用匹配的名称，你必须实际为它分配一个名称，如`case x if x % 15 == 0`

# c++ - 如何使用 QStyle.drawControl() 渲染红色按钮？

> ID：11901037
> 
> 赞同：7
> 
> 时间：2012-08-10T11:49:01.233
> 
> 标签：c++, qt, qt4, qstyle

使用以下代码，我尝试使用以下代码呈现红色按钮`QStyle.drawControl()`：

```
#include <QtCore/QtCore>
#include <QtGui/QtGui>

class Widget : public QWidget
{
    virtual void paintEvent(QPaintEvent* event)
    {
        QStyleOptionButton opt;
        opt.palette = QPalette(Qt::red);
        opt.state = QStyle::State_Active | QStyle::State_Enabled;
        opt.rect = QRect(50, 25, 100, 50);
        QPainter painter(this);
        style()->drawControl(QStyle::CE_PushButton, &opt, &painter);
    }
};

int main(int argc, char** argv)
{
    QApplication app(argc, argv);
    Widget w;
    w.resize(200, 100);
    w.show();
    return app.exec();
} 
```

但是我得到以下结果：

![在此处输入图像描述](../Images/46fd20078c10bbb7d89be96bfdc7022c.png)

如何使用 渲染红色按钮`QStyle.drawControl()`？

我在 Windows XP 上使用 Qt 4.8.1 和 Visal Studio 2010。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-10T23:25:53.490

这些按钮是由原生样式引擎绘制的，因此可能根本不使用调色板（请参阅常见问题解答中的[那个](https://wiki.qt.io/Qt_project_org_faq#Why_does_nothing_happen_when_I_set_the_palette_background_color_on_a_QPushButton_in_some_styles.3F)问题）。

您可以使用带有样式表的实际按钮，将其作为最后一个参数传递给自己按钮的样式`drawControl`函数。

```
class Widget : public QWidget
{
  // To allow the automatic deletion without parenting it
  QScopedPointer<QPushButton> button;
public:
    Widget() : button(new QPushButton) {
      button->setStyleSheet("background-color: red");
    }
    virtual void paintEvent(QPaintEvent* event)
    {
        QStyleOptionButton opt;
        opt.state = QStyle::State_Active | QStyle::State_Enabled;
        opt.rect = QRect(50, 25, 100, 50);
        QPainter painter(this);
        button->style()->drawControl(QStyle::CE_PushButton, &opt, &painter, 
                                     button.data());
    }
}; 
```

但是你会失去原生风格，所以你必须伪造它（[bali182's answer](https://stackoverflow.com/a/11902958/894321)可能对那部分有用）。

或者您可以使用具有着色效果的相同按钮并调用其`render()`函数来绘制它：

![彩色按钮](../Images/53f9bc274bf25615f6b5c59f73768d1a.png)

```
class Widget : public QWidget {
    QScopedPointer<QPushButton> button;
public:
    Widget() : button(new QPushButton) {
        QGraphicsColorizeEffect *effect = new QGraphicsColorizeEffect(button.data());
        effect->setColor(Qt::red);
        button->setGraphicsEffect(effect);
    }
    virtual void paintEvent(QPaintEvent* event) {
        button->setFixedSize(100, 50);
        button->render(this, QPoint(50, 25));
    }
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T13:41:47.533

您正在尝试做的事情似乎过于复杂。如果你只想要一个红色按钮，为什么不使用QPushButton的[setStyleSheet()方法呢？](http://qt-project.org/doc/qt-4.8/qwidget.html#styleSheet-prop)它需要一个 QString，您可以定义类似于 CSS 的按钮。在这里，我为您创建了一个红色按钮，类似于 XP ui 按钮：

```
QPushButton 
{ 
    background: qlineargradient(x1:0,y1:0,x2:0,y2:1, stop:0 #f4a3a3,stop: 1 #cc1212);
    border-width: 1px; 
    border-color: #d91414; 
    border-style: solid; 
    padding: 5px; 
    padding-left:10px; 
    padding-right:10px; 
    border-radius: 3px; 
    color:#000;
}

QPushButton:hover
{
    border-color: #e36666;
} 

QPushButton:pressed 
{
    background:qlineargradient(x1:0,y1:0,x2:0,y2:1,stop: 0 #de8383, stop: 1 #ad0C0C); 
    border-color: #d91414;
} 
```

现在您只需要将上面的代码作为字符串传递给您的按钮 setStyleSheet() 方法。如果你想创建一个按钮小部件，默认是红色的，然后扩展QPushButton类，创建一个包含上面内容的静态QString字段，并在构造函数中将按钮设置为样式表。

**更易于理解的样式表示例：** [样式表示例](http://doc.qt.nokia.com/4.7-snapshot/stylesheet-examples.html)

# c# - 重新格式化字符串

> ID：11901042
> 
> 赞同：0
> 
> 时间：2012-08-10T11:49:36.050
> 
> 标签：c#, regex

我想用来`Regex.Replace()`将所有模式（例如（数字）（字母））更改为（数字）（空格）（字母）。

例如
15A >>> 15 A
123KK >>> 123 KK

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T11:52:50.300

您可以使用此表达式`(\d+)(.+)`和此替换：`$1 $2`.

```
Console.WriteLine(Regex.Replace("15A","(\\d+)(.*)","$1 $2")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T11:54:00.603

您可以尝试使用此代码

```
newValue = Regex.Replace(value, "([0-9])([A-Z])", "$1 $2"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-10T11:56:50.700

```
Regex r =new Regex(@"(?<=[0-9]{1,})(?=[a-zA-Z]{1,})");
r.Replace("t6y8sss5"," "); 
```

# ios - 为什么值不传递给下一个 TabbarViewController？

> ID：11901049
> 
> 赞同：0
> 
> 时间：2012-08-10T11:49:58.890
> 
> 标签：ios, uitabbarcontroller

在一个.m

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSUInteger row = [indexPath row];
    NSString *carNumber = [self.carNumberArrayFromPlistFile objectAtIndex:row];
    NSString *engineNumber  = [self.engineNumberArrayFromPlistFile objectAtIndex:row];
    CarInfo *oneCarInfo = [[CarInfo alloc] initWithCarNumber:carNumber engineNumber:engineNumber];
    Two *two = [[Two alloc] initWithNibName:@"Two" bundle:nil];
    two.car = oneCarInfo;
    [self.navigationController pushViewController:two animated:YES];
    [oneCarInfo release];
    [two release];
} 
```

在两个.h

```
@interface Two : UITabBarController
{
    CarInfo *car;
}
@property (nonatomic, retain)CarInfo *car; 
```

为什么 Two.m 中的汽车总是空的？请帮我解决一下这个。谢谢你们！

两米：

```
@interface Two ()
@end

@implementation Two
@synthesize car;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
    // Custom initialization
    }
    return self;
}
- (void)viewDidLoad
{
    [super viewDidLoad];   
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    self.car = nil;
}

- (void)dealloc
{
    [super dealloc];
}
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T07:07:41.153

@PeterPajchl：您不应该将 UITabBarController 的实例推送到 UINavigationController 的堆栈上 - 检查文档。

# kernel - 内核启动过程

> ID：11901056
> 
> 赞同：-1
> 
> 时间：2012-08-10T11:50:24.350
> 
> 标签：kernel

众所周知，操作系统需要 ac 文件才能执行。但是当我们启动内核时，首先将其解压缩，但使用 ac 函数进行解压缩。到目前为止，系统中还没有操作系统。那么这个c代码是如何执行的呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-26T18:48:35.747

引导加载程序负责解压和加载内核，然后将控制权交给解压和加载的内核。内核不像标准 C 可执行文件那样执行。因此，没有要求操作系统是执行 C 代码所必需的。例如，有很多嵌入式系统没有操作系统，但执行的是 C 代码。此外，引导加载程序也是用 C 编写的。执行的唯一要求是将代码加载到内存中并将控制权转移给它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T11:54:42.903

[关于Bootmgr](http://en.wikipedia.org/wiki/BOOTMGR#Windows_Boot_Manager)和[Vmlinux](http://en.wikipedia.org/wiki/Vmlinux)（以及[initrd](http://en.wikipedia.org/wiki/Initrd) ）的 Wikipedia 文章应该简要介绍该过程的工作原理。

基本上，当 BIOS 从磁盘的 MBR 加载引导加载程序 (GRUB) 时，GRUB 会将一个小型 ramdisk (initrd) 加载到内存中，这已经是一个非常轻量级的操作系统，能够处理它需要的最基本的进程：启动真正的操作系统。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T07:39:32.127

您不需要操作系统来运行 C 代码。

让我澄清一下。

当程序由 GCC 编译时，它会生成一个目标代码，作为汇编程序的输入，汇编程序将该目标代码转换为可以由机器直接执行的二进制代码。

但如果 GCC 直接生成二进制代码，则不需要任何汇编程序或任何操作系统。因此，二进制可以直接由硬件逐条指令执行。

# java - 在 Wicket 中使用 Hibernate 和 Spring 的问题

> ID：11901058
> 
> 赞同：0
> 
> 时间：2012-08-10T11:50:28.377
> 
> 标签：java, spring, hibernate, dependency-injection, wicket

我正在为我创建的数据库编写一个小的 Web 界面。数据库访问是通过 Hibernate 完成的，但它也使用 Spring 来注入 DAO 的实例（这反过来又注入了 SessionFactory）。我在嵌入式 Jetty 服务器上测试 Web 界面。独立使用时一切正常：我可以从数据库项目中获取数据库中的内容，我可以在 Jetty 服务器上使用 Wicket 运行网页，我什至设法让 Spring 为 WicketTester 工作，这有点痛苦在屁股。但是现在当我尝试从数据库中获取某些内容时（通过单击网页上的某个按钮），我收到一条错误消息：

```
java.lang.NullPointerException
     at nl.ru.cmbi.pdbeter.core.controller.DAO.GenericDAO.getCurrentSession(GenericDAO.java:37) 
```

不知何故，应该在 DAO 中注入的 sessionFactory 没有被注入。我在 Wicket 模块的 applicationContext.xml 中定义了 DAO bean，但我认为只要它看到 SessionFactory 的 @Autowired，它就会在该项目的 spring.xml 文件中查找，但显然不是。我将在下面放置一些代码来展示各个部分的工作情况。

检票应用：

```
@Service
public class WicketApplication extends WebApplication {
    @SpringBean
    private IPDBEntryDAO    pdbEntryDAO;

    public IPDBEntryDAO getPdbEntryDAO() {
        return pdbEntryDAO;
    }

    public void setPdbEntryDAO(IPDBEntryDAO pdbEntryDAO) {
        this.pdbEntryDAO = pdbEntryDAO;
    }

    /**
     * @see org.apache.wicket.Application#getHomePage()
     */
    @Override
    public Class<HomePage> getHomePage() {
        return HomePage.class;
    }

    /**
     * @see org.apache.wicket.Application#init()
     */
    @Override
    public void init() {
        super.init();

        new ClassPathXmlApplicationContext("applicationContext.xml").getAutowireCapableBeanFactory().autowireBean(this);
    }

    public void setupInjector() {
        getComponentInstantiationListeners().add(new SpringComponentInjector(this));
    }
} 
```

启动嵌入式 Jetty 服务器的类（复制自 Wicket 快速入门）：

```
public class Start {
    public static void main(String[] args) throws Exception {
        int timeout = (int) Duration.ONE_HOUR.getMilliseconds();

        Server server = new Server();
        SocketConnector connector = new SocketConnector();

        // Set some timeout options to make debugging easier.
        connector.setMaxIdleTime(timeout);
        connector.setSoLingerTime(-1);
        connector.setPort(8080);
        server.addConnector(connector);

        // check if a keystore for a SSL certificate is available, and
        // if so, start a SSL connector on port 8443\. By default, the
        // quickstart comes with a Apache Wicket Quickstart Certificate
        // that expires about half way september 2021\. Do not use this
        // certificate anywhere important as the passwords are available
        // in the source.

        Resource keystore = Resource.newClassPathResource("/keystore");
        if (keystore != null && keystore.exists()) {
            connector.setConfidentialPort(8443);

            SslContextFactory factory = new SslContextFactory();
            factory.setKeyStoreResource(keystore);
            factory.setKeyStorePassword("wicket");
            factory.setTrustStoreResource(keystore);
            factory.setKeyManagerPassword("wicket");
            SslSocketConnector sslConnector = new SslSocketConnector(factory);
            sslConnector.setMaxIdleTime(timeout);
            sslConnector.setPort(8443);
            sslConnector.setAcceptors(4);
            server.addConnector(sslConnector);

            System.out.println("SSL access to the quickstart has been enabled on port 8443");
            System.out.println("You can access the application using SSL on https://localhost:8443");
            System.out.println();
        }

        WebAppContext bb = new WebAppContext();
        bb.setServer(server);
        bb.setContextPath("/");
        bb.setWar("src/main/webapp");

        // START JMX SERVER
        // MBeanServer mBeanServer = ManagementFactory.getPlatformMBeanServer();
        // MBeanContainer mBeanContainer = new MBeanContainer(mBeanServer);
        // server.getContainer().addEventListener(mBeanContainer);
        // mBeanContainer.start();

        server.setHandler(bb);

        try {
            System.out.println(">>> STARTING EMBEDDED JETTY SERVER, PRESS ANY KEY TO STOP");
            server.start();
            System.in.read();
            System.out.println(">>> STOPPING EMBEDDED JETTY SERVER");
            server.stop();
            server.join();
        } catch (Exception e) {
            e.printStackTrace();
            System.exit(1);
        }
    }
} 
```

web.xml 文件：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    version="2.5">

    <display-name>web-interface</display-name>

    <!--
        There are three means to configure Wickets configuration mode and they 
        are tested in the order given.

        1) A system property: -Dwicket.configuration 
        2) servlet specific <init-param> 
        3) context specific <context-param>

        The value might be either "development" (reloading when templates change) or 
        "deployment". If no configuration is found, "development" is the default. -->

    <filter>
        <filter-name>wicket.web-interface</filter-name>
        <filter-class>org.apache.wicket.protocol.http.WicketFilter</filter-class>
        <init-param>
            <param-name>applicationClassName</param-name>
            <param-value>nl.ru.cmbi.pdbeter.WicketApplication</param-value>
        </init-param>
        <init-param>
            <param-name>applicationFactoryClassName</param-name>
            <param-value>org.apache.wicket.spring.SpringWebApplicationFactory</param-value>
        </init-param>
        <init-param>
            <param-name>applicationBean</param-name>
            <param-value>wicketApplication</param-value>
        </init-param>
    </filter>

    <filter-mapping>
        <filter-name>wicket.web-interface</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

    <!-- The SpringWebApplicationFactory will need access to a Spring Application context, configured like this... -->
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/applicationContext.xml</param-value>
    </context-param>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener> 
</web-app> 
```

applicationContext.xml 文件：

```
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:aop="http://www.springframework.org/schema/aop"
xmlns:tx="http://www.springframework.org/schema/tx"
xmlns:security="http://www.springframework.org/schema/security"
xsi:schemaLocation="
http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
http://www.springframework.org/schema/tx
http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
http://www.springframework.org/schema/aop
http://www.springframework.org/schema/aop/spring-aop-3.0.xsd
http://www.springframework.org/schema/security
http://www.springframework.org/schema/security/spring-security-3.0.xsd">

    <!--
    <context:component-scan base-package="nl.ru.cmbi.pdbeter" />
    -->

    <!-- setup wicket application -->
    <bean id="wicketApplication" class="nl.ru.cmbi.pdbeter.WicketApplication">
        <property name="pdbEntryDAO" ref="pdbEntryDAO"/>
    </bean>

    <bean id="pdbEntryDAO" class="nl.ru.cmbi.pdbeter.core.controller.DAO.PDBEntryDAO" />
</beans> 
```

来自数据库模块的 DAO 类的一部分：

```
public class GenericDAO<I> implements IGenericDAO<I> {
    private Class<I>        persistentClass;

    @Autowired
    private SessionFactory  sessionFactory;

    @SuppressWarnings("unchecked")
    public GenericDAO() {
        persistentClass = (Class<I>) ((ParameterizedType) getClass().getGenericSuperclass()).getActualTypeArguments()[0];
    }

    protected Session getCurrentSession() {
        return sessionFactory.getCurrentSession();
    } 
```

数据库模块使用的spring.xml文件：

```
<beans xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://www.springframework.org/schema/beans" 
    xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:context="http://www.springframework.org/schema/context" 
    xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:task="http://www.springframework.org/schema/task"
    xsi:schemaLocation="
        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
        http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task-3.0.xsd">

    <context:component-scan base-package="nl.ru.cmbi.pdbeter" />

    <!-- Transaction Manager -->
    <bean id="transactionManager"
        class="org.springframework.orm.hibernate3.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>

    <tx:annotation-driven />

    <!-- Session Factory -->
    <bean id="sessionFactory"
        class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
        <property name="configLocation" value="hibernate.cfg.xml" />
        <property name="packagesToScan" value="nl.ru.cmbi.pdbeter.core.model.domain" />
    </bean>
</beans> 
```

很抱歉发布了这么多代码，但我想如果我不这样做，我可能会泄露重要的东西。

有谁知道如何确保 Wicket 模块和数据库模块的所有内容都被注入？

# android - Android：CalendarView onDateChangelistener 毫秒值到 DatePicker 毫秒值

> ID：11901062
> 
> 赞同：1
> 
> 时间：2012-08-10T11:50:47.817
> 
> 标签：android

我似乎无法使用`cw.getDate()`方法正确比较 CalendarView 中的两个毫秒值

以及 DatePicker 的 OnDateListner 中的日历 c.set() 和 c.getTimeInMillis

```
Calendar c = Calendar.getInstance();
OnDateSetListener datePickerListener = new OnDateSetListener() {

    public void onDateSet(DatePicker view, int year, int monthOfYear,
            int dayOfMonth) {
        mYear = year;
        mDay = dayOfMonth;
        mMonth = monthOfYear;
        c.set(mYear, mMonth, mDay);
        dateView.setText(formatDate(c.getTimeInMillis()));
        dateViewMilli.setText(Long.toString(c.getTimeInMillis()));
    }
}; 
```

这是差异的图片

![在此处输入图像描述](../Images/dbeada25d1c6976427f6c698ae50b0a0.png)

![在此处输入图像描述](../Images/e4c07a2ab8556e4c777fc02e940009c0.png)

那么我如何获得 DatePicker 中的毫秒，其中它在 CalendarView 中的值完全相同？..因为我无法完美查询这两个值的值，因为它们具有不同的长值..我的意思是两个时间戳都不同，尽管它有同一天，同一个月，同一年......不知道发生了什么......也许它正在解析或wat..对于那些对此有所了解的人，请分享

更新

* * *

我刚刚读了一些文章，一个朋友也告诉我，两者都会产生不同的时间戳值，因此最好的办法是先格式化时间戳，比如 MM/DD/YYYY，然后存储为字符串 den 那是你的时间相比..

也欢迎任何其他输入...

# jquery - 如何可视化表格列 jQUery 中输入的文本？

> ID：11901064
> 
> 赞同：0
> 
> 时间：2012-08-10T11:50:57.587
> 
> 标签：jquery

我有以下结构的表：

```
<table>
<tr>
    <td class='visual'></td>
    <td class='input'><input type='text' name='input-value' value=''/></td>
</tr>
<tr>
    <td class='visual'></td>
    <td class='input'><input type='text' name='input-value' value=''/></td>
</tr>
    <tr>
    <td class='visual'></td>
    <td class='input'><input type='text' name='input-value' value=''/></td>
</tr> 
```

我希望在输入值中插入文本后显示在 td class='visual'

我怎么能用 jQuery 做到这一点？

提前致谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T11:53:55.713

所以你想把在文本框中输入的文本放到表格中？试试这个：

```
$(function(){
  $('[name="input-value"]').keyup(function(){
    var $this = $(this)
    $this.parent().prev().html($this.val())
  })
}) 
```

# jquery - 扩展/覆盖 jquery ui 自动完成功能

> ID：11901065
> 
> 赞同：0
> 
> 时间：2012-08-10T11:51:07.900
> 
> 标签：jquery, autocomplete

我正在使用 jquery geo-autocomplete 插件将位置建议为用户类型（http://code.google.com/p/geo-autocomplete/）。

用户选择建议后，我想编辑页面上的链接。我正在尝试扩展选择功能。我已经定义了一个新的选择函数来覆盖核心函数。这是一个javascript示例：

```
$.widget( "ui.geo_autocomplete", {

// setup the element as an autocomplete widget with some geo goodness added
_init: function() {
    this.options._geocoder = new google.maps.Geocoder; // geocoder object
    this.options._cache = {}; // cache of geocoder responses
    this.element.autocomplete(this.options);

    // _renderItem is used to prevent the widget framework from escaping the HTML required to show the static map thumbnail
    this.element.data('autocomplete')._renderItem = function(_ul, _item) {
        return $('<li></li>').data('item.autocomplete', _item).append(this.options.getItemHTML(_item)).appendTo(_ul);
    };
},

// default values
options: {

            select: function(event, ui) {
                alert('in override function');
             }, 
```

用户选择其中一个建议后，将出现警报，然后填充文本框。我希望执行核心选择功能（从而填充文本框），然后拥有要执行的代码（我将更改链接的href）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T13:15:08.227

你能不能试试这样的事情：

```
 options: {

            select: function(event, ui) {
            $(this).trigger('change');
     }, 
```

# sass - 在 Sublime Text 2 中自动编译 SCSS 文件

> ID：11901067
> 
> 赞同：7
> 
> 时间：2012-08-10T11:51:12.483
> 
> 标签：sass, sublimetext2

好的，这就是我想要的：

1.  我写的是 .scss 文件，而不是 .sass 文件
2.  保存文件时，我在同一文件夹中获得了相应的 .css 文件

现在 Sublime Text2 上有很多 SASS 插件，但似乎没有一个为我提供语法高亮之外的任何东西。

关于如何在 Sublime Text2 上进行自动编译的任何建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T18:48:11.387

我没有找到任何这样做的现有插件，所以这里是：

假设您已经从 Package Control 安装了 SCSS 插件，您可以将其保存为 Packages/User/SCSS.py。

```
import sublime_plugin
import subprocess
import os
from threading import Thread

def compile(input_file):
    output_file = os.path.splitext(input_file)[0] + ".css"
    cmd = "sass '{0}':'{1}'".format(input_file, output_file)
    subprocess.call(cmd, shell=True)

class SCSS(sublime_plugin.EventListener):

    def on_post_save(self, view):
        scope = (view.syntax_name(view.sel()[0].b)).split().pop()
        if scope == "source.scss":
            input_file = view.file_name()
            t = Thread(target=compile, args=(input_file,))
            t.start() 
```

当然，这作为一个官方的包控制插件会更好，它具有用户可配置的设置（保存文件的位置、开/关等），但这符合您的要求并且不会阻塞编辑器。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-12T14:42:26.967

您应该考虑使用构建系统而不是它的专用插件。这很简单。

[http://docs.sublimetext.info/en/latest/file_processing/build_systems.html](http://docs.sublimetext.info/en/latest/file_processing/build_systems.html)

像这样的东西：

```
{
  "cmd": ["sass","$file"],
  "selector": "source.scss",
  "path": "/usr/local/bin"
} 
```

只需点击`ctrl + b`t 构建当前文件。如果您有多个 scss 构建，您可以从构建菜单 ( `Tools -> Build Systems`) 中选择一个。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-12-27T10:42:08.103

你可以使用[SublimeOnSaveBuild](https://github.com/alexnj/SublimeOnSaveBuild)插件。在插件过滤器设置中只留下 .scss 文件！它的效果很好！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T09:56:18.817

我一直在为 Sublime Test 寻找 sass/scss 编译器插件，但我的源文件夹与我的 css 文件夹分开。所以，离开这里留下的评论，我写了 SassBuilder，它运行存储在你的源文件夹中的配置文件。它也已提交到 Sublime Package Control 存储库。一旦他们提出请求，您就可以从那里安装它。

[github 上的 SassBuilder](https://github.com/bnlucas/SassBuilder)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-05-14T10:10:27.750

Sass Builder 是 sublime text 包管理器中的新插件。这不需要任何配置。只需编写您的 scss 并按 cmd + b 进行编译。您的 css 文件将在与 scss 相同的文件夹中生成。

# php - PHP PDO 检查 mySQL 数据库中是否存在具有特定名称的表

> ID：11901071
> 
> 赞同：-1
> 
> 时间：2012-08-10T11:51:16.630
> 
> 标签：php, mysql, pdo

以下代码检查数据库中的表。

```
function checkdbexists(){
    global $krdb;
    return $krdb->query("show tables");
} 
```

我们要检查是否存在名为“systems”的表，如果存在则返回 1，如果不存在则返回 null 或 0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T11:52:59.410

```
select 1
from information_schema.tables
where table_name = 'systems'
limit 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T11:57:59.047

您可以使用

```
array_search('system',$krb->query('show tables')->fetch())!==false; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T13:24:05.800

```
$db_tables = array_keys($pdo->query('show tables')->fetchAll (PDO::FETCH_GROUP));

if(in_array('myTable', $db_tables)) 
{ 
    print "myTable exist"; 
} 
```

# java - 将不同类型的对象与可比较的对象进行比较

> ID：11901072
> 
> 赞同：0
> 
> 时间：2012-08-10T11:51:23.447
> 
> 标签：java, list, collections, comparable

`A.java`

```
public class A implements Comparable {
    private String id;
    private String name;

    public A(String a, String b) {
        id = a;
        name = b;
    }

    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public int compareTo(Object o) {
        A a = (A) o;
        return id.compareTo(a.getId());
    }
} 
```

`B.java`

```
public class B implements Comparable {
    private String b_id;
    private String other;

    public B(String a, String b) {
        b_id = a;
        other = b;
    }

    public String getBId() {
        return b_id;
    }

    public void setBId(String id) {
        this.b_id = id;
    }

    public String getOther() {
        return other;
    }

    public void setOther(String other) {
        this.other = other;
    }

    public int compareTo(Object o) {
        B b = (B) o;
        return b_id.compareTo(b.getId());
    }
} 
```

`Learn.java`

```
public class Learn {

    public static void main(String[] args) {

        List<A> listA = new ArrayList<A>();
        List<B> listB = new ArrayList<B>();
        List<Object> listAll = new ArrayList<Object>();
        listA.add(new A("aa", "bb"));
        listA.add(new A("ae", "bbn"));
        listA.add(new A("dfr", "GSDS"));
        listB.add(new B("nm", "re"));
        listB.add(new B("asd", "asfa"));

        listAll.addAll(listA);
        listAll.addAll(listB);
        Collections.sort(listAll);
        for (Object o : listAll) {
            if (o instanceof A)
                System.out.println(o.getId);
            else if (o instanceof B)
                Syatem.out.println(o.getBId);
        }

    }

} 
```

我得到的错误在`Collections.sort(listAll);` 它说的那一行。

```
Bound mismatch: The generic method sort(List<T>) of type Collections is not applicable
for the arguments (List<Object>). The inferred type Object is not a valid substitute
for the bounded parameter <T extends Comparable<? super T>> 
```

该怎么办？其余的逻辑也可以吗？

我想要做的是有一个 A 列表和 B 列表，其中一个属性与 id 相同；虽然变量名不一样。即`id`在B 中`A`和`bid`B 中。现在我将两个列表都放在ListAll 中，并在同一个变量id/bid 上对它们进行排序。我有 A 和 B 实施 Comparable。

我的 listAll 是 Object 类型的？

我该怎么做？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T12:03:55.537

您可以添加一个公共基类并在那里实现比较，如下所示：

```
abstract class AandBComparable implements Comparable {

  public int compareTo(Object o) {
    AandBComparable ab = (AandBComparable) o;
    return getId().compareTo(ab.getId());
  }

  public abstract String getId();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T11:57:48.827

为了能够对列表进行排序，其元素必须彼此可比较。这不是这里的情况。A 的实例只能与 A 的其他实例进行比较。B 也是如此。

如果您想对包含 A 和 B 实例的列表进行排序，您需要提供`Comparator`将愉快地接受两个`A`s、两个`B`s 或 an`A`和 a 的列表`B`，并根据需要比较这些对象。

```
public class AOrBComparator implements Comparator<Object> {
    @Override
    public int compare(Object o1, Object o2) {
        String o1Id = getId(o1);
        String o2Id = getId(o2);
        return o1Id.compareTo(o2Id);
    }

    private String getId(Object o) {
        if (o instanceof A) {
            return ((A) o).getId();
        }
        else if (o instanceof B) {
            return ((B) o).getId();
        }
        else {
            throw new IllegalArgumentException("Can only get ID from A or B");
        }
    }
} 
```

但也许 A 和 B 应该实现相同的 Identifiable 接口，列表应该是`List<Identifiable>`. 这样，您可以轻松编写一个比较器来比较 Identifiable 的两个实例，无论实际实例是 A、B 还是任何其他 Identifiable，它都可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T11:57:29.187

我不相信异常会在您所说的地方引发，而是在调用`sort()`

无论如何，这意味着类似

“排序方法需要一个`List`实现可比较的元素。但是你告诉他你给出了一个列表`Object`，而**不是所有的对象都实现了 Comparable**。所以，编译器不能确定在列表中传递的对象会实时实现 Comparable （根据需要），并引发错误”

解决方案？使用实现 Comparable 的绑定类定义列表

```
 List<A> listAll = new ArrayList<A>(); 
```

更新：要将所有项目放在同一个列表中，然后：

a) 让所有项目都派生自实现`Comparable`. 通常这将是对面向对象编程最友好的方法，因为如果您想比较这两个类，它们必须以某种方式相关。要么从 A 扩展 B，从 B 扩展 A，从另一个类扩展 A 和 B，或者使 A 和 B 实现另一个接口（它本身实现 Comparable）。

b）正如 JBNizet 所说，使用`Comparator`.

同样，我强烈建议使用 a 解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T12:07:33.953

您需要一个基本（虚拟）类，它将实现`Comparable`并让 A 和 B 从类派生。就像是：

```
public abstract class MyComparableClass implements Comparable {
}

public class A extends MyComparableClass {
... // implementation of compareTo
}

public class B extends MyComparableClass {
...// implementation of compareTo
} 
```

在您的主程序中，只需将 Collection 定义为：

```
List<MyComparableClass> listAll = new ArrayList<MyComparableClass>(); 
```

# eclipse - Jenkins 构建在编译时失败，出现“用于编码 ASCII 的不可映射字符”

> ID：11901073
> 
> 赞同：13
> 
> 时间：2012-08-10T11:51:25.150
> 
> 标签：eclipse, svn, encoding, utf-8, character-encoding

我有一个包含 UTF-8 字符的 .java 文件。所以我告诉 eclipse 对其 .java 文件使用 UTF-8 编码。当尝试通过 Jenkins 构建它时，它失败了，但是

```
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Compilation failure

.../... unmappable character for encoding ASCII 
```

当浏览到我的 svn 存储库时，我注意到特殊字符是使用奇怪的符号编码的。有没有办法让这些字符正确地进入我的存储库？我是否必须告诉我的 svn 存储库以某种方式使用 UTF-8。还是我的 subclipse 插件..？

**编辑**

更新了我的问题以帮助其他人找到问题。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-11T08:49:17.447

正如 Philippe Bossu 正确发现的那样，这毕竟不是 svn 或 eclipse 的问题，而是**maven 设置**。不知道，为什么它在本地构建，但显然你必须设置**maven 编译器插件**编码：

```
<build>
    <plugins>
        <plugin>
            <artifactId>maven-compiler-plugin</artifactId>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
                <encoding>UTF-8</encoding>
            </configuration>
        </plugin> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-10T13:59:09.773

*   设置 svn:mime-type 为 text/plain;charset=UTF-8 ，eclipse team> set property > change value > commit

*   像你一样将文件内容编码设置为 utf-8

*   在 pom.xml 中的编译插件集 Encoding 为 utf-8：

*   [http://maven.apache.org/general.html#encoding-warning](http://maven.apache.org/general.html#encoding-warning)

# javascript - Javascript：在特定时间段后调用函数

> ID：11901074
> 
> 赞同：92
> 
> 时间：2012-08-10T11:51:32.733
> 
> 标签：javascript, function, timer

在 JavaScript 中，如何在特定时间间隔后调用函数？

这是我要运行的函数：

```
function FetchData() {
} 
```

* * *

## 回答 #1

> 赞同：182
> 
> 时间：2012-08-10T11:57:11.537

您可以使用[JavaScript 定时事件](http://www.w3schools.com/js/js_timing.asp)在一定的时间间隔后调用函数：

这将每 3 秒显示一次警报框：

```
setInterval(function(){alert("Hello")},3000); 
```

您可以在 javascript.ie 中使用两种时间事件方法

1.  `setInterval()`: 以指定的时间间隔一遍又一遍地执行一个函数
2.  `setTimeout()`：在等待指定的毫秒数后执行一次函数

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2012-08-10T11:56:54.623

1000 毫秒后执行`FetchData()` **一次函数：**

```
setTimeout( function() { FetchData(); }, 1000); 
```

每 1000 毫秒`FetchData()` **重复**执行一次函数：

```
setInterval( FetchData, 1000); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-08-10T11:54:18.720

听起来您正在寻找[setInterval](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval?redirectlocale=en-US&redirectslug=window.setInterval)。就这么简单：

```
function FetchData() {
  // do something
}
setInterval(FetchData, 60000); 
```

如果您只想调用一次，则有[setTimeout](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2021-01-24T16:57:08.223

ECMAScript 6 引入了箭头函数，所以现在 setTimeout() 或 setInterval() 不必像这样：

```
setTimeout(function() { FetchData(); }, 1000) 
```

相反，您可以使用匿名箭头函数，它看起来更清晰，更不容易混淆：

```
setTimeout(() => {FetchData();}, 1000) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-12-01T13:36:29.127

### 暂停：

```
setTimeout(() => {
   console.log('Hello Timeout!')
}, 3000); 
```

### 间隔：

```
setInterval(() => {
   console.log('Hello Interval!')
}, 2000); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-08-16T14:19:48.153

设置超时（函数，5000）；

-- 它将在指定的时间后调用名为 func() 的函数。这里，5000毫秒，即）5秒后

# python - 只需要索引：枚举还是（x）范围？

> ID：11901081
> 
> 赞同：35
> 
> 时间：2012-08-10T11:51:48.957
> 
> 标签：python, range, enumerate

如果我只想在循环中使用索引，我是否应该更好地`range/xrange`结合使用该函数`len()`

```
a = [1,2,3]
for i in xrange(len(a)):
    print i 
```

还是`enumerate`？即使我根本不会使用`p`？

```
for i,p in enumerate(a):
    print i 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-10T12:05:35.747

我会使用`enumerate`它，因为它更通用-例如，它将适用于可迭代对象和序列，并且仅返回对对象的引用的开销并不是什么大问题-`xrange(len(something))`尽管（对我而言）您的意图更容易阅读-将打破不支持`len`...的物体

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-08-10T11:55:50.247

将 xrange 与 len 一起使用是很常见的用例，所以是的，如果您只需要按索引访问值，则可以使用它。

但是，如果您出于某种原因更喜欢使用 enumerate，则可以使用下划线 (_)，它只是一种常见的符号，表明您不会以某种有意义的方式使用该变量：

```
for i, _ in enumerate(a):
    print i 
```

使用下划线 (_) 也可能会发生陷阱。在 i18n 库和系统中将“翻译”函数命名为 _ 也很常见，因此请注意将其与 gettext 或其他此类库一起使用（感谢@lazyr）。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-08-10T11:53:14.397

这是一个罕见的要求——从容器中使用的唯一信息就是它的长度！在这种情况下，我确实会明确说明这一事实并使用第一个版本。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-10T12:06:24.483

`p`xrange 应该快一点，但是 enumerate 将意味着当您意识到您毕竟需要时不需要更改它

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-01-27T16:37:46.733

我进行了时间测试，发现范围比枚举快约 2 倍。（在用于 Win32 的 python 3.6 上）

最好的 3，对于 len(a) = 1M

*   枚举（a）：0.125s
*   范围（len（a））：0.058s

希望能帮助到你。

仅供参考：我最初开始这个测试是为了比较 python 和 vba 的速度……发现 vba 实际上比 range 方法快 7 倍……是因为我的 python 技能差吗？

当然python可以比vba做得更好

枚举脚本

```
import time
a = [0]
a = a * 1000000
time.perf_counter()

for i,j in enumerate(a):
    pass

print(time.perf_counter()) 
```

范围脚本

```
import time
a = [0]
a = a * 1000000
time.perf_counter()

for i in range(len(a)):
    pass

print(time.perf_counter()) 
```

vba 脚本 (0.008s)

```
Sub timetest_for()
Dim a(1000000) As Byte
Dim i As Long
tproc = Timer
For i = 1 To UBound(a)
Next i
Debug.Print Timer - tproc
End Sub 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-10T12:29:04.713

根据您的示例代码，

```
res = [[profiel.attr[i].x for i,p in enumerate(profiel.attr)] for profiel in prof_obj] 
```

我会用

```
res = [[p.x for p in profiel.attr] for profiel in prof_obj] 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-06-26T20:34:49.940

我写这个是因为我想测试它。因此，这取决于您是否需要使用这些值。

代码：

```
testlist = []
for i in range(10000):
    testlist.append(i)

def rangelist():
    a = 0
    for i in range(len(testlist)):
        a += i
        a = testlist[i] + 1   # Comment this line for example for testing

def enumlist():
    b = 0
    for i, x in enumerate(testlist):
        b += i
        b = x + 1   # Comment this line for example for testing

import timeit
t = timeit.Timer(lambda: rangelist())
print("range(len()):")
print(t.timeit(number=10000))
t = timeit.Timer(lambda: enumlist())
print("enum():")
print(t.timeit(number=10000)) 
```

现在您可以运行它，并且很可能会得到结果，即 enum() 更快。当您评论源代码时`a = testlist[i] + 1`，`b = x + 1`您会看到 range(len()) 更快。

对于上面的代码，我得到：

```
range(len()):
18.766527627612255
enum():
15.353173553868345 
```

现在，当如上所述发表评论时，我得到：

```
range(len()):
8.231641875551514
enum():
9.974262515773656 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2012-08-10T11:55:16.140

只需使用`range()`. 如果您无论如何都要使用所有索引，则`xrange()`不会提供任何真正的好处（除非`len(a)`真的很大）。并`enumerate()`创建一个更丰富的数据结构，您将立即丢弃。

# c++ - 将 lambda 表达式作为 C++ 中的成员函数指针传递

> ID：11901084
> 
> 赞同：6
> 
> 时间：2012-08-10T11:51:57.107
> 
> 标签：c++, lambda, c++11, function-pointers

我有一个框架函数，它需要一个对象和一个成员函数指针（回调），如下所示：

```
do_some_work(Object* optr, void (Object::*fptr)()); // will call (optr->*fptr)() 
```

如何将 lambda 表达式传递给它？想做这样的事情：

```
class MyObject : public Object
{
    void mystuff()
    {
        do_some_work(this, [](){ /* this lambda I want to pass */ });
    }
}; 
```

这一切的意义是不要让回调使 MyObject 类的接口变得混乱。

**UPD** 我无法改进`do_some_work`，因为我不控制框架，而且实际上它不是一个功能，有数百个。整个框架基于该类型的回调。没有 lambda 的常见用法示例：

```
typedef void (Object::*Callback)();
class MyObject : public Object
{
    void mystuff()
    {
        do_some_work(this, (Callback)(MyClass::do_work));
    }
    void do_work()
    {
        // here the work is done
    }
}; 
```

**解决方案**这是我基于马塞洛回答的解决方案：

```
class CallbackWrapper : public Object
{
    fptr fptr_;
public:
    CallbackWrapper(void (*fptr)()) : fptr_(fptr) { }
    void execute()
    {
        *fptr_();
    }
};

class MyObject : public Object
{
    void mystuff()
    {
        CallbackWrapper* do_work = new CallbackWrapper([]()
        {
           /* this lambda is passed */
        });
        do_some_work(do_work, (Callback)(CallbackWrapper::execute));
    }
}; 
```

由于我们创建了 CallbackWrapper，我们可以在异步使用回调的情况下控制它的生命周期。谢谢大家。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T12:14:39.743

这是不可能的。该构造`(optr->*fptr)()`要求 fptr 是指向成员的指针。如果`do_some_work`在您的控制之下，请将其更改为与 lambda 函数兼容的内容，例如`std::function<void()>`参数化类型。如果它是一个不受您控制的遗留框架，您可以包装它，如果它是一个函数模板，例如：

```
template <typename Object>
do_some_work(Object* optr, void (Object::*fptr)()); 
```

然后，您可以实现一个包装模板：

```
template <typename F>
void do_some_work(F f) {
    struct S {
        F f;
        S(F f) : f(f) { }
        void call() { f(); delete this; }
    };
    S* lamf = new S(f);
    do_some_work(lamf, &S::call);
}

class MyObject // You probably don't need this class anymore.
{
    void mystuff()
    {
        do_some_work([](){ /* Do your thing... */ });
    }
}; 
```

编辑：如果 do_some_work 异步完成，则必须`lamf`在堆上分配。为了安全起见，我已经相应地修改了上面的代码。感谢@David Rodriguez 指出这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T12:52:06.467

您尝试采用的方法存在比语法不匹配更深层次的问题。正如 DeadMG 建议的那样，最好的解决方案是改进接口`do_some_work`以采用某种函子（在 C++11 中或使用 boost ，`std::function<void()>`甚至是调用的泛型。`F``operator()`

Marcelo 提供的解决方案解决了语法不匹配问题，但由于库通过指针获取第一个元素，因此调用者有责任确保在执行回调时对象处于活动状态。假设回调是异步的，他的解决方案（以及其他类似的替代方案）的问题是对象可能在回调执行之前被销毁，从而导致未定义的行为。

我建议您使用某种形式的*plimp*惯用语，在这种情况下，目标是隐藏对回调的需求（因为可能不需要隐藏实现的其余部分，您可以只使用另一个类来处理回调，但是按值存储它，如果您不想动态分配更多内存）：

```
class MyClass;
class MyClassCallbacks {
   MyClass* ptr;
public:
   MyClassCallbacks( MyClass* ptr ) : ptr(ptr) {}
// callbacks that execute code on `ptr`
   void callback1() {
      // do some operations
      // update *ptr
   }
};
class MyClass {
   MyClassCallbacks callbackHandler;
public:
   void mystuff() {
      do_some_work( &callbackHandler, &MyClassHandler::callback1 );
   }
}; 
```

在这个设计中，两个类是分开的，但是代表一个唯一的单一实体，所以可以添加一个朋友声明并让`MyClassCallbacks`访问内部数据`MyClass`（它们都是*一个*单一的实体，分开只是为了提供更清晰的接口，但耦合已经很高，所以添加所需的额外耦合`friend`是没有问题的）。

`MyClass`因为和实例之间存在 1-1 的关系`MyClassCallbacks`，所以它们的生命周期是有约束的，除了在销毁期间，它们不会出现生命周期问题。在销毁期间，您必须确保没有注册的回调可以在`MyClass`对象被销毁时启动。

既然你在它上面，你可能想要加倍努力并做一个适当的*pimpl*：将所有数据和实现移动到由指针保存的不同类型中，并提供一个`MyClass`存储指针并仅提供公共功能的, 实现为*pimpl*对象的转发器。当您使用继承时，这可能会有些棘手，并且*pimpl*习惯用法在类型层次结构上实现有点麻烦（如果您需要扩展，则可以在*pimpl*`MyClass`对象中进行派生，而不是在接口类型中完成）。`Object`

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T12:06:13.580

我不认为你能做到这一点。你`do_some_work()`被声明接受指向类方法的指针`Object`，所以应该提供。否则`optr->*fptr`无效，因为 lambda 不是`Object`. 可能您应该尝试在其闭包中使用`std::function`和添加所需的成员。`Object`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-10T12:04:25.187

您必须使用`std::function<void()>`. 函数和成员函数指针都非常不适合作为回调。*

# objective-c - Sqlite_binding 方法

> ID：11901089
> 
> 赞同：1
> 
> 时间：2012-08-10T11:52:31.437
> 
> 标签：objective-c

如何在不使用 stringWithFormat 的情况下编写此查询。如何将参数传递给 SQLite 查询。现在我的代码是这样的：

```
NSString *querySQL = [NSString stringWithFormat:@"SELECT name, char_code, sound, status  From Tmy_table Where ID=\"%d\"", i]; 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T12:07:09.993

您应该使用 sqlite3 主机参数和 sqlite3_bind() 将变量绑定到它们。在您的示例中，这会像这样。

```
NSString* query = @"SELECT name, char_code, sound, status  From Tmy_table Where ID=?";
sqlite3_stmt* myStatement = NULL;
sqlite3_prepare_v2(myDBConnection, [query UTF8String], -1, &myStatement, NULL);
sqlite3_bind_int(myStatement, 1, i); 
```

注意事项：

*   这两个 sqlite3 函数返回您必须检查的错误代码。为了清楚起见，我把它省略了。
*   sqlite3_bind_int() 中的第二个参数告诉您用第三个参数替换哪个问题。索引从 1 开始，而不是 0。

另请参阅[有关 binding 的文档](http://www.sqlite.org/c3ref/bind_blob.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T12:00:48.640

```
NSString sql = @"SELECT name, char_code, sound, status  From Tmy_table Where ID=?";
sqlite3_stmt *stmt = NULL;
if (sqlite3_prepare_v2(database, [sql UTF8String], -1, &stmt, SQLITE_STATIC) == SQLITE_OK)
{
    // If 'i' was text:
    // if (sqlite3_bind_text(stmt, 1, i, -1, SQLITE_STATIC) == SQLITE_OK)
    if (sqlite3_bind_int(stmt, 1, i) == SQLITE_OK) // Note: 1-based column when binding!!!!
    {
        while (sqlite3_step(stmt) == SQLITE_ROW)
        {
            const char *name = sqlite3_column_text(stmt, 0); // Note: 0-based column when fetching!!!
            const char *sound = sqlite3_column_text(stmt, 1);
            const char *status = sqlite3_column_text(stmt, 2);
            // ... print the values or whatever
        }
    }
    else
    {
        NSLog(@"Failed to bind int: %s", sqlite3_errmsg(database));
    }
    sqlite3_finalize(stmt);
}
else
{
    NSLog(@"Failed to prepare statement '%@': %s", sql, sqlite3_errmsg(database));
} 
```

**编辑**将绑定更改`sqlite3_bind_text()`为`i`似乎是文本...

# ember.js - ember 数据 isLoad 集合

> ID：11901090
> 
> 赞同：1
> 
> 时间：2012-08-10T11:52:33.493
> 
> 标签：ember.js, ember-data

我使用 emberjs-data

```
allProcessPointsAreLoaded:(->
@get("reportDefinition.virtualColumns").everyProperty("processPoint.isLoaded", true)
).property("reportDefinition.virtualColumns.@each.processPoint.isLoaded") 
```

当 processPoint.isLoaded 更改为 true 时，我的属性未更新。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:25:23.797

最新的 ember-data 在整个内容集合上都有一个 isLoaded 属性，而不仅仅是每个字段。在我看来，我监视路径“controller.content.isLoaded”以确定所有内容何时都在那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T01:22:48.837

我相信 @each 目前只能支持一个嵌套属性`"reportDefinition.virtualColumns.@each.processPoint"`，但不能`"reportDefinition.virtualColumns.@each.processPoint.isLoaded"`。这是我发现的[github 问题。](https://github.com/emberjs/ember.js/issues/541)

我通过向 isLoaded 添加一个属性来解决它。所以你会有类似的东西：

```
processPointLoaded: function() {return this.get('processPoint.isLoaded')}.property('processPoint.isLoaded') 
```

我希望这会有所帮助！

# java - CXF 2.6.1 登录 jboss - 异常

> ID：11901093
> 
> 赞同：0
> 
> 时间：2012-08-10T11:52:40.707
> 
> 标签：java, cxf, jboss5.x, slf4j

我正在尝试在我的项目中将 cxf 从版本 2.3.1 升级到版本 2.6.1。

该项目是一个 web 应用程序，它使用 cxf 作为在 jboss 5.1 中运行的 web 服务使用者

该项目使用 slf4j 日志记录，但依赖关系是`provided`因为 jboss 容器带有 slf4j。

我在项目中创建了以下文件： `META-INF/cxf/org.apache.cxf.Logger`以单行作为其内容：（ `org.apache.cxf.common.logging.Slf4jLogger` 根据[cxf](http://cxf.apache.org/docs/debugging-and-logging.html#DebuggingandLogging-UsingSLF4JInsteadofjava.util.logging%28since2.2.8%29)说明）

当我在 jboss（独立或从 eclipse）中运行项目时，我收到以下错误：

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name '******' defined in class path resource [applicationContext.xml]: Instantiation of bean failed; nested exception is org.springframework.beans.factory.BeanDefinitionStoreException: Factory method [public synchronized java.lang.Object org.apache.cxf.jaxws.JaxWsProxyFactoryBean.create()] threw exception; nested exception is java.lang.NoSuchMethodError: org.slf4j.spi.LocationAwareLogger.log(Lorg/slf4j/Marker;Ljava/lang/String;ILjava/lang/String;[Ljava/lang/Object;Ljava/lang/Throwable;)V
    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:581)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1015)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:911)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:485)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:609)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:469)
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:383)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:283)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:3910)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4393)
    at org.jboss.web.tomcat.service.deployers.TomcatDeployment.performDeployInternal(TomcatDeployment.java:310)
    at org.jboss.web.tomcat.service.deployers.TomcatDeployment.performDeploy(TomcatDeployment.java:142)
    at org.jboss.web.deployers.AbstractWarDeployment.start(AbstractWarDeployment.java:461)
    at org.jboss.web.deployers.WebModule.startModule(WebModule.java:118)
    at org.jboss.web.deployers.WebModule.start(WebModule.java:97)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:157)
    at org.jboss.mx.server.Invocation.dispatch(Invocation.java:96)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)
    at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
    at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:668)
    at org.jboss.system.microcontainer.ServiceProxy.invoke(ServiceProxy.java:206) 
```

它似乎与日志记录有关，但是当我查找 jboss 提供的 slf4j-api 的类时，我可以看到该方法是正确的：

```
public abstract void log(Marker paramMarker, String paramString1, int paramInt, String paramString2, Throwable paramThrowable); 
```

此异常使应用程序无法启动。

我可以确认 slf4j 正在工作，因为所有日志都已正确写入。

我尝试像在 maven 中一样设置 slf4j ，`compile`但这会导致其他问题。我不知道如何继续。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T12:05:05.207

您是否**在**您的类路径？可能 jboss slf4j 库比新 cxf 预期使用的库要旧。另外，检查你的类路径是否有库冲突

# coldfusion - 如何使用 Coldfusion 在 Amazon S3 上创建 EU 存储桶？

> ID：11901102
> 
> 赞同：0
> 
> 时间：2012-08-10T11:53:22.373
> 
> 标签：coldfusion, upload, amazon-s3, amazon-web-services, bucket

我正在运行`Coldfusion8`并且正在使用[Amazon S3 Rest Wrapper CFC](http://amazons3.riaforge.org/)尝试使用欧盟存储桶进行设置。

我可以使用 cfc 在美国设置存储桶，但每当我更改为欧盟设置时，它都不起作用。

这是正在使用的功能：

```
<cffunction name="putBucket" access="public" output="false" returntype="boolean" description="Creates a bucket.">
    <cfargument name="bucketName" type="string" required="true">
    <cfargument name="acl" type="string" required="false" default="public-read">
    <cfargument name="storageLocation" type="string" required="false" default="">

    <cfset var strXML = "">
    <cfset var dateTimeString = GetHTTPTimeString(Now())>
    <cfset var destination = "http://s3.amazonaws.com/">

    <!--- Create a canonical string to send based on operation requested ---> 
    <cfset var cs = "PUT\n\ntext/html\n#dateTimeString#\nx-amz-acl:#arguments.acl#\n/#arguments.bucketName#">

    <cfset var signature = createSignature(cs)>
    <!--- added switch to EU --->
    <cfif arguments.storageLocation EQ "EU">
        <cfset destination = "http://s3-eu-west-1.amazonaws.com/">
    </cfif>

    <!--- Create a proper signature --->
    <cfif compare(arguments.storageLocation,'')>
        <cfsavecontent variable="strXML">
            <CreateBucketConfiguration xmlns="http://s3.amazonaws.com/doc/2006-03-01/"><LocationConstraint>#arguments.storageLocation#</LocationConstraint></CreateBucketConfiguration>
        </cfsavecontent>
    <cfelse>
        <cfset strXML = "">
    </cfif>

    <!--- put the bucket via REST --->
    <cfhttp method="PUT" url="#destination##arguments.bucketName#" charset="utf-8">
        <cfhttpparam type="header" name="Content-Type" value="text/html">
        <cfhttpparam type="header" name="Date" value="#dateTimeString#">
        <cfhttpparam type="header" name="x-amz-acl" value="#arguments.acl#">
        <cfhttpparam type="header" name="Authorization" value="AWS #variables.accessKeyId#:#signature#">
        <cfhttpparam type="body" value="#trim(strXML)#">
    </cfhttp>

    <cfreturn true>
</cffunction> 
```

我已将开关添加到欧盟区域 URL，但这也不起作用。

知道我需要做什么才能在欧盟创建一个存储桶吗？

**编辑**：
我已经修复了区域值。它仍然无法正常工作，因为如果我传递除 之外的区域值`""`，则此行：

```
 <cfif compare(arguments.storageLocation,'')>
    <cfsavecontent variable="strXML">
       <CreateBucketConfiguration xmlns="http://s3.amazonaws.com/doc/2006-03-01/"><LocationConstraint>#arguments.storageLocation#</LocationConstraint></CreateBucketConfiguration>
     </cfsavecontent>
 <cfelse>
     <cfset strXML = "">
 </cfif> 
```

将产生一个 strXML，如下所示：

```
 <CreateBucketConfiguration xmlns="http://s3.amazonaws.com/doc/2006-03-01/"><LocationConstraint>#arguments.storageLocation#</LocationConstraint></CreateBucketConfiguration> 
```

再次产生`bad request`错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T15:07:58.710

您需要[为存储位置使用正确的值](http://docs.amazonwebservices.com/AWSSDKforPHP/latest/index.html#m=s3browserupload/create_bucket)。从 API 文档中，我相信这些值是：

> 存储桶的首选地理位置。[允许的值：AmazonS3::REGION_US_E1、AmazonS3::REGION_US_W1、AmazonS3::REGION_EU_W1、AmazonS3::REGION_APAC_SE1、AmazonS3::REGION_APAC_NE1]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T12:50:06.557

如果您在 Linux 上运行它，您也可以使用 S3CMD 工具

```
sudo apt-get install s3cmd 
```

然后，您将需要运行配置过程，甚至更好，在源代码控制中构建和维护配置，并部署到服务器以生成 S3 命令

```
s3cmd --configure 
```

通常，配置包括有关您的 S3 帐户的信息（特别是密钥）。确保您使用的文件正确设置了文件的权限，这样您就不必以 root 身份执行 s3cmd

然后在你的应用程序中

```
<cfexecute name="s3cmd" arguments="mb s3://my-new-bucket-name"> 
```

# batch-file - Jenkins 处理批处理文件参数中的空格

> ID：11901106
> 
> 赞同：5
> 
> 时间：2012-08-10T11:53:32.717
> 
> 标签：batch-file, msbuild, jenkins

我正在 Windows 上设置 Jenkins 来处理我一直在从事的 Windows 项目的构建。到目前为止，我只是在本地构建。我有一个执行构建的批处理文件，最终会生成一些 msi 安装程序。

一些项目包含运行批处理文件的后期构建步骤。批处理文件的参数有时包含空格。当我从命令提示符运行构建批处理文件时，这不是问题。

但是，詹金斯似乎对此有疑问-我收到诸如

“找不到文件：C:\Program”

我很困惑为什么当 Jenkins 触发批处理时会发生错误，但当我手动运行它时不会发生错误 - 有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T14:29:49.123

对于包含空格的参数，将它们用双引号括起来。例子：

错误：PROCESS_FILE.EXE C:\Program Files\This File.txt

正确：PROCESS_FILE.EXE "C:\Program FIles\This File.txt"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T02:12:15.283

正如 Jason 提到的，您需要使用引号传递参数和路径。

此外，检查构建日志并查看您使用的是哪种类型的引号。根据传递的位置，您可能需要单引号或双引号，或某种转义字符。

如果您想查看 Jenkins 为您的外部命令或构建前/后事件运行的实际批处理文件，请检查构建日志并在编辑器中加载临时批处理文件以查看它的实际外观。有时这是调试构建所必需的。

# php - 从php中的静态函数访问私有变量

> ID：11901111
> 
> 赞同：7
> 
> 时间：2012-08-10T11:53:49.757
> 
> 标签：php, static

我的班级有一个私有变量

```
private $noms = array(
        "HANNY",
        "SYS",
        "NALINE"
); 
```

我想从静态方法访问它：

```
public static function howManyNom($searchValue){

        $ar = $this->noms;

        foreach($ar as $key => $value) {

... 
```

但像往常一样，我无法用 $this 检索它，因为静态方法上没有实例。

在我的静态函数中获取 $noms 的正确语法是什么？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-10T11:59:53.730

也使这个属性成为静态的！

```
private static $noms = array(
    "HANNY",
    "SYS",
    "NALINE"
);

public static function howManyNom($searchValue){

    $ar = self::$noms;

    foreach($ar as $key => $value) { 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T12:01:25.930

要访问 $noms 数组使其成为静态，您可以这样做：

`private static $noms = array();`

然后你像这样访问它：

`self::$noms['some key']`;

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T12:01:29.857

您也必须将 noms 设为静态并通过 self::$noms 访问它。

# php - 需要 MYSQL 查询在不同的列中插入值吗？

> ID：11901119
> 
> 赞同：0
> 
> 时间：2012-08-10T11:54:22.890
> 
> 标签：php, mysql

我正在使用 Php 将值插入 MySQL 表。

我要做的是：我必须检查三列。“namel1”、“namel2”和“namel3”。

条件：

*   如果三列中的任何一列中都不存在“$name”，则将值放入“namel1”中。
*   如果“namel1”中存在“$name”，则将值放入“namel2”，如果“namel2”包含该值，则将其放入“namel3”。

我当前用于插入名称和图像路径的 MySQL 查询是我想修改它以满足上述条件：

```
$chk_img_db = mysql_query("select * from cvapptable where img_path='$cvh_myimg_url'");
if(mysql_num_rows($chk_img_db)<1) {
mysql_query("insert into cvapptable(namel1,img_path) values ('$name','$cvh_myimg_url')");
} 
```

我无法从网上获得任何解决方案。请帮忙。谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T11:57:56.883

在网上很难找到，因为这是你不应该让自己陷入的情况。

您应该考虑规范化表格。

而不是有一个包含列的表：

```
cvapp: id | img_path | namel1 | namel2 | namel3 
```

考虑将其更改为两个表：

```
cvapp: id | img_path
names: id | cvapp_id   | name 
```

然后选择每个名称，您只需执行如下查询：

```
SELECT name
  FROM cvapp INNER JOIN names on cvapp.id = names.cvapp_id
 WHERE <condition> 
```

这样，您可以拥有任意数量的名称，并且插入新名称要容易得多：

```
INSERT INTO names (cvapp_id, name) VALUES (56, "Name 1");
INSERT INTO names (cvapp_id, name) VALUES (56, "Name 2");
INSERT INTO names (cvapp_id, name) VALUES (56, "Name 3"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T12:01:02.237

您可以尝试自我加入并搜索表格的列

# zend-framework - 社交引擎中的未知项目类型错误甚至在模块的 manifest.php 文件中注册

> ID：11901126
> 
> 赞同：0
> 
> 时间：2012-08-10T11:54:37.810
> 
> 标签：zend-framework, exception, socialengine

我收到奇怪的错误。请帮忙

我正在创建名为“Advinvite”的自定义模块

我创建了表：“engine4_advinvite_matchinvites”

我创建了 DbTable：“Advinvite_Model_DbTable_Matchinvites”

我已经创建了 DbTable 的 Row 类模型：“Advinvite_Model_Matchinvite”并且表中的主键是“matchinvite_id”

我还创建了 Api：“Advinvite_Api_Core”

主要部分我还在模块设置文件夹的 manifest.php 文件中注册了该项目，例如：

```
// Items ---------------------------------------------------------------------
  'items' => array(
    'advinvite_matchinvite',
  ) 
```

现在关于错误：

我想使用时收到错误“未知项目类型：advinvite_matchinvite”

`Engine:Api:_()->getItem('advinvite_matchinvite',its_Identity)`

我也在下面发送清单文件代码。请你帮我检查一下并帮助我。这是我生命中的第一次（奇怪的错误），我在过去的三四天里试图解决这个问题。甚至我所做的一切都是正确的为什么会发生不理解。请帮我搭档。将不胜感激。

而且，如果您也可以帮助我解决此问题，则意味着路线也无法正常工作....不知道为什么会出现这两个错误

请帮帮我。

Manifest.php 代码：

```
<?php return array (
  'package' => 
  array (
    'type' => 'module',
    'name' => 'advinvite',
    'version' => '4.0.0',
    'path' => 'application/modules/Advinvite',
    'title' => 'Advanced Invites',
    'description' => 'This will invite the users for matches and nets',
    'author' => 'Gitesh Dang',
    'callback' => 
    array (
      'class' => 'Engine_Package_Installer_Module',
    ),
    'actions' => 
    array (
      0 => 'install',
      1 => 'upgrade',
      2 => 'refresh',
      3 => 'enable',
      4 => 'disable',
    ),
    'directories' => 
    array (
      0 => 'application/modules/Advinvite',
    ),
    'files' => 
    array (
      0 => 'application/languages/en/advinvite.csv',
    ),
    // Items ---------------------------------------------------------------------
  'items' => array(
    'advinvite_matchinvite',
  ),
  // Routes --------------------------------------------------------------------
  'routes' => array(
    'advinvite_general' => array(
      'route' => 'invites/:action/*',
      'defaults' => array(
        'module' => 'advinvite',
        'controller' => 'index',
        'action' => '(match|matchview)',
      ),
      'reqs' => array(
        'action' => '\D+',
      )
    ),
  )
  ),
); ?> 
```

等待正面回应。亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T08:07:40.290

大佬，已经修复了 问题很小:)

项目在包数组中注册，它应该在包数组之外注册。包数组应该只对文件数组关闭。

更正的清单文件：

```
 <?php return array (
      'package' => 
      array (
        'type' => 'module',
        'name' => 'advinvite',
        'version' => '4.0.0',
        'path' => 'application/modules/Advinvite',
        'title' => 'Advanced Invites',
        'description' => 'This will invite the users for matches and nets',
        'author' => 'Gitesh Dang',
        'callback' => 
        array (
          'class' => 'Engine_Package_Installer_Module',
        ),
        'actions' => 
        array (
          0 => 'install',
          1 => 'upgrade',
          2 => 'refresh',
          3 => 'enable',
          4 => 'disable',
        ),
        'directories' => 
        array (
          0 => 'application/modules/Advinvite',
        ),
        'files' => 
        array (
          0 => 'application/languages/en/advinvite.csv',
        ),
      ),
 // Items ---------------------------------------------------------------------
      'items' => array(
        'advinvite_matchinvite',
      ),
      // Routes --------------------------------------------------------------------
      'routes' => array(
        'advinvite_general' => array(
          'route' => 'invites/:action/*',
          'defaults' => array(
            'module' => 'advinvite',
            'controller' => 'index',
            'action' => '(match|matchview)',
          ),
          'reqs' => array(
            'action' => '\D+',
          )
        ),
      )
    ); ?> 
```

干杯！！:)

# spring - org.springframework.orm.hibernate4.HibernateSystemException：请求未知服务 [org.hibernate.stat.spi.StatisticsImplementor]；

> ID：11901130
> 
> 赞同：2
> 
> 时间：2012-08-10T11:54:45.817
> 
> 标签：spring, hibernate, transactions

我正在使用 hibernate4 和 spring 3 和 jsf2.0 进行注入我的使用注释我在谷歌上搜索了这个异常但没有找到任何合适的解决方案我已经发布了我的日志、应用程序上下文和 dao 实现

```
Here is my logs
> BlockquoteHibernate: select employee0_.empid as empid0_, employee0_.emailId as emailId0_, employee0_.mobileNo as mobileNo0_, employee0_.password as password0_, employee0_.skypeID as skypeID0_, employee0_.userName as userName0_ from employee employee0_ where employee0_.userName=?
Aug 10, 2012 5:00:28 PM javax.faces.event.MethodExpressionActionListener processAction
SEVERE: Received 'org.springframework.orm.hibernate4.HibernateSystemException' when invoking action listener '#{loginBacking.empLogin}' for component 'j_idt16'
Aug 10, 2012 5:00:28 PM javax.faces.event.MethodExpressionActionListener processAction
SEVERE: org.springframework.orm.hibernate4.HibernateSystemException: Unknown service requested [org.hibernate.stat.spi.StatisticsImplementor]; nested exception is org.hibernate.service.UnknownServiceException: Unknown service requested [org.hibernate.stat.spi.StatisticsImplementor]
    at org.springframework.orm.hibernate4.SessionFactoryUtils.convertHibernateAccessException(SessionFactoryUtils.java:206)
    at org.springframework.orm.hibernate4.HibernateTransactionManager.convertHibernateAccessException(HibernateTransactionManager.java:606)
    at org.springframework.orm.hibernate4.HibernateTransactionManager.doRollback(HibernateTransactionManager.java:507)
    at org.springframework.transaction.support.AbstractPlatformTransactionManager.processRollback(AbstractPlatformTransactionManager.java:845)
    at org.springframework.transaction.support.AbstractPlatformTransactionManager.rollback(AbstractPlatformTransactionManager.java:822)
    at org.springframework.transaction.interceptor.TransactionAspectSupport.completeTransactionAfterThrowing(TransactionAspectSupport.java:411)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:114)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    at $Proxy17.empLogin_Service(Unknown Source)
    at com.airwatch.device.backingbeans.LoginBacking.empLogin(LoginBacking.java:66)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.el.parser.AstValue.invoke(AstValue.java:264)
    at org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:278)
    at javax.faces.event.MethodExpressionActionListener.processAction(MethodExpressionActionListener.java:149)
    at javax.faces.event.ActionEvent.processListener(ActionEvent.java:84)
    at javax.faces.component.UIComponentBase.broadcast(UIComponentBase.java:773)
    at javax.faces.component.UICommand.broadcast(UICommand.java:296)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:781)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1246)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:77)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:97)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:114)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:308)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: org.hibernate.service.UnknownServiceException: Unknown service requested [org.hibernate.stat.spi.StatisticsImplementor]
    at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:126)
    at org.hibernate.internal.SessionFactoryImpl.getStatisticsImplementor(SessionFactoryImpl.java:1710)
    at org.hibernate.internal.SessionFactoryImpl.getStatistics(SessionFactoryImpl.java:1706)
    at org.hibernate.engine.transaction.internal.TransactionCoordinatorImpl.afterTransaction(TransactionCoordinatorImpl.java:140)
    at org.hibernate.engine.transaction.internal.jdbc.JdbcTransaction.afterTransactionCompletion(JdbcTransaction.java:138)
    at org.hibernate.engine.transaction.spi.AbstractTransactionImpl.rollback(AbstractTransactionImpl.java:214)
    at org.springframework.orm.hibernate4.HibernateTransactionManager.doRollback(HibernateTransactionManager.java:500)
    ... 40 more

Aug 10, 2012 5:00:28 PM com.sun.faces.context.ExceptionHandlerImpl log
SEVERE: JSF1073: javax.faces.event.AbortProcessingException caught during processing of INVOKE_APPLICATION 5 : UIComponent-ClientId=j_idt10:j_idt16, Message=org.springframework.orm.hibernate4.HibernateSystemException: Unknown service requested [org.hibernate.stat.spi.StatisticsImplementor]; nested exception is org.hibernate.service.UnknownServiceException: Unknown service requested [org.hibernate.stat.spi.StatisticsImplementor]
Aug 10, 2012 5:00:28 PM com.sun.faces.context.ExceptionHandlerImpl log
SEVERE: org.springframework.orm.hibernate4.HibernateSystemException: Unknown service requested [org.hibernate.stat.spi.StatisticsImplementor]; nested exception is org.hibernate.service.UnknownServiceException: Unknown service requested [org.hibernate.stat.spi.StatisticsImplementor]
javax.faces.event.AbortProcessingException: org.springframework.orm.hibernate4.HibernateSystemException: Unknown service requested [org.hibernate.stat.spi.StatisticsImplementor]; nested exception is org.hibernate.service.UnknownServiceException: Unknown service requested [org.hibernate.stat.spi.StatisticsImplementor]
    at javax.faces.event.MethodExpressionActionListener.processAction(MethodExpressionActionListener.java:178)
    at javax.faces.event.ActionEvent.processListener(ActionEvent.java:84)
    at javax.faces.component.UIComponentBase.broadcast(UIComponentBase.java:773)
    at javax.faces.component.UICommand.broadcast(UICommand.java:296)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:781)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1246)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:77)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:97)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:114)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:308)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: org.springframework.orm.hibernate4.HibernateSystemException: Unknown service requested [org.hibernate.stat.spi.StatisticsImplementor]; nested exception is org.hibernate.service.UnknownServiceException: Unknown service requested [org.hibernate.stat.spi.StatisticsImplementor]
    at org.springframework.orm.hibernate4.SessionFactoryUtils.convertHibernateAccessException(SessionFactoryUtils.java:206)
    at org.springframework.orm.hibernate4.HibernateTransactionManager.convertHibernateAccessException(HibernateTransactionManager.java:606)
    at org.springframework.orm.hibernate4.HibernateTransactionManager.doRollback(HibernateTransactionManager.java:507)
    at org.springframework.transaction.support.AbstractPlatformTransactionManager.processRollback(AbstractPlatformTransactionManager.java:845)
    at org.springframework.transaction.support.AbstractPlatformTransactionManager.rollback(AbstractPlatformTransactionManager.java:822)
    at org.springframework.transaction.interceptor.TransactionAspectSupport.completeTransactionAfterThrowing(TransactionAspectSupport.java:411)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:114)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    at $Proxy17.empLogin_Service(Unknown Source)
    at com.airwatch.device.backingbeans.LoginBacking.empLogin(LoginBacking.java:66)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.el.parser.AstValue.invoke(AstValue.java:264)
    at org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:278)
    at javax.faces.event.MethodExpressionActionListener.processAction(MethodExpressionActionListener.java:149)
    ... 25 more
Caused by: org.hibernate.service.UnknownServiceException: Unknown service requested [org.hibernate.stat.spi.StatisticsImplementor]
    at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:126)
    at org.hibernate.internal.SessionFactoryImpl.getStatisticsImplementor(SessionFactoryImpl.java:1710)
    at org.hibernate.internal.SessionFactoryImpl.getStatistics(SessionFactoryImpl.java:1706)
    at org.hibernate.engine.transaction.internal.TransactionCoordinatorImpl.afterTransaction(TransactionCoordinatorImpl.java:140)
    at org.hibernate.engine.transaction.internal.jdbc.JdbcTransaction.afterTransactionCompletion(JdbcTransaction.java:138)
    at org.hibernate.engine.transaction.spi.AbstractTransactionImpl.rollback(AbstractTransactionImpl.java:214)
    at org.springframework.orm.hibernate4.HibernateTransactionManager.doRollback(HibernateTransactionManager.java:500)
    ... 40 more

> Blockquote> 
```

这是我的应用程序上下文

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:jee="http://www.springframework.org/schema/jee"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
    http://www.springframework.org/schema/beans/spring-beans.xsd
    http://www.springframework.org/schema/jee 
    http://www.springframework.org/schema/jee/spring-jee-3.1.xsd
    http://www.springframework.org/schema/tx 
    http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
    http://www.springframework.org/schema/context 
    http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <context:annotation-config/>
    <!-- .....................................Data Base Related Config............................. -->
    <bean id="DataSource"
        class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName">
            <value>com.mysql.jdbc.Driver</value>
        </property>
        <property name="url">
            <value>jdbc:mysql://localhost:3306/test</value>
        </property>
        <property name="username">
            <value>root</value>
        </property>
        <property name="password">
            <value>testn</value>
        </property>
    </bean>

    <!-- Session Factory Declaration -->
    <bean id="SessionFactory"
        class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="dataSource" ref="DataSource" />
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
                <prop key="hibernate.show_sql">true</prop>
            </props>
        </property>
        <property name="annotatedClasses">
            <list>
                <value>com.airwatch.device.model.Employee</value>
            </list>
        </property>
    </bean>

    <!-- Enable the configuration of transactional behavior based on annotations -->
    <tx:annotation-driven transaction-manager="txManager" />

    <!-- Transaction Manager is defined -->
    <bean id="txManager"
        class="org.springframework.orm.hibernate4.HibernateTransactionManager"
        lazy-init="true">
        <property name="sessionFactory" ref="SessionFactory" />
    </bean>

    <!-- ........................DAO and Bussiness Configurations................. -->
    <bean id="loginBussinessImpl" class="com.airwatch.device.bussinessImpl.LoginBussinessImpl">

    </bean>
    <bean id="loginDaoImpl" class="com.airwatch.device.daoImpl.LoginDaoImpl">
    </bean>
</beans> 
```

这是我的 DAO 类实现

```
 public class LoginDaoImpl implements ILoginDao {

        private Session mSession = null;

        @Autowired
        @Qualifier(value = "SessionFactory")
        private SessionFactory mHibernateSessionFcatory;

        /**
         * @param sessionfactory
         *            the sessionfactory to set
         */
        public void setSessionfactory(SessionFactory sessionfactory) {
            this.mHibernateSessionFcatory = sessionfactory;
        }

        @Override
        public void empLogin_Dao(Employee employee) {

            System.out.println("m in dao");

            mSession = mHibernateSessionFcatory.getCurrentSession();

            System.out.println(employee.getEmpID());

            Query query = mSession
                    .createQuery("from Employee where userName = :username ");
            query.setParameter("username", employee.getUserName());
            List list = query.list();
            // mSession.getTransaction().commit();
            mHibernateSessionFcatory.close();
            mSession.close();

        }

    }
    ` 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-11T07:05:30.500

在你的 DAO 代码中关闭整个会话工厂`mHibernateSessionFactory.close()`显然是不行的。

在工厂关闭后，您也无法访问 mSession，它在 java 文档中有所说明。

`void org.hibernate.SessionFactory.close() throws HibernateException`

> 销毁此 SessionFactory 并释放所有资源（缓存、连接池等）。
> 
> 应用程序有责任在调用此方法之前确保没有打开的会话，因为对这些会话的影响是不确定的。

如果您使用该`getCurrentSession()`方法，典型的模式是将会话打开和关闭委托给 Spring 并使用[@Transactional](http://static.springsource.org/spring/docs/3.0.x/reference/transaction.html#transaction-declarative)注释

```
 @Override
        @Transactional
        public void empLogin_Dao(Employee employee) {

            System.out.println("m in dao");

            //Please note that declaring mSession as a class member is another no-no
            //because DAO are typically singletons, so there's only ONE dao and ONE mSession variable 
            //that will be shared by all users - it's possible your class mSession field will be accessed
            //simultaneously, which will lead to an exception
            Session mSession = mHibernateSessionFactory.getCurrentSession();

            System.out.println(employee.getEmpID());

            Query query = mSession
                    .createQuery("from Employee where userName = :username ");
            query.setParameter("username", employee.getUserName());
            List list = query.list(); 
        } 
```

[您可以在此处](http://static.springsource.org/spring/docs/3.0.x/reference/transaction.html#transaction-declarative-rolling-back)阅读有关回滚策略的信息。

# javascript - 未捕获的类型错误：对象 [object Object] 没有方法“wipetouch”

> ID：11901131
> 
> 赞同：0
> 
> 时间：2012-08-10T11:54:45.730
> 
> 标签：javascript, jquery

我正在尝试将wipetouch插件集成到我的投资组合中[http://www.i-jp.nl](http://www.i-jp.nl)，目前没有成功。

Chrome给我以下错误：

> 未捕获的类型错误：对象 [object Object] 没有方法“wipetouch”

我无法弄清楚问题所在。这是调用wipetouch的代码，位于slider.js中：

```
$(document).wipetouch({
                wipeLeft: function(result) { 
                    //if (slide >= 0 && slide < 3){
                        //$(".slider").animate({"right": "+=320px"}, "slow");
                        //slide = slide + 1;
                    //};
                    alert('test');
                },
            }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T12:07:54.053

你有 jQuery 加载两次。这导致该`wipetouch`方法不可用的问题。

至于修复。我会**尝试删除您在代码中的第二个 jQuery 文件引用**。

以下是 Felix Kling 提供的更多信息：

> 问题是您正在加载两个不同的 jQuery 版本，`1.8.0`并且`1.7.2`. 附加的插件`jQuery.fn`是`1.7.2`版本，而不是`$`. 看到后来包含的版本 ( `1.7.2`) 调用`jQuery.noConflict();`，这将 恢复`$`为指向早期包含的版本。

您首先在第 11 行加载 jQuery：

```
<script src="http://code.jquery.com/jquery-latest.js"></script> 
```

然后在第 18 行：

```
<script type='text/javascript' src='http://i-jp.nl/wp-includes/js/jquery/jquery.js?ver=1.7.2'></script> 
```

# javascript - 引号 (" ")、段落和空格导致问题

> ID：11901133
> 
> 赞同：-2
> 
> 时间：2012-08-10T11:54:55.430
> 
> 标签：javascript, whitespace, prototype, paragraphs

我正在使用 Prototype 工具提示，但无法在内容中使用引号 (" ")、段落等。下面是示例。

```
<div style="margin-right: 2px" id="bio" class="masters-bio">Bio</div>

    <script type="text/javascript" language="javascript">
        new Tip('bio', "Lorem ipsum "dolor" sit amet, consectetur adipiscing elit. Ut rhoncus mollis tincidunt. Curabitur rhoncus suscipit dui, quis tristique est posuere in. Nam in pretium tellus.", {
            title: "Bio",
            closeButton: true,
            showOn: 'click',
            hideOn: { element: 'closeButton', event: 'click'},
            stem: 'bottomMiddle',
            hook: { target: 'topMiddle', tip: 'bottomMiddle' },
            offset: { x: 0, y: -2 },
            width: '300px',
            style: 'protogrey'
        });
    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T11:56:43.820

使用[反斜杠转义引号](http://www.w3schools.com/js/js_special_characters.asp)。只需将`\`它们放在每个字符串之前。例子：

```
"Lorem ipsum \"dolor\" sit amet" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T11:57:05.093

```
 new Tip('bio', "Lorem ipsum \"dolor\" sit amet..... 
```

使用反斜杠`\`转义引号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T11:57:48.953

像这样使用反斜杠

```
"This is \"text\" for" 
```

# c++ - 如何将两位添加到十六进制

> ID：11901138
> 
> 赞同：0
> 
> 时间：2012-08-10T11:55:06.713
> 
> 标签：c++, c, hex, bits

我有两个字节，我正在设置不同的位以获得不同的组合。例如，字节 1 位 7 和字节 2 位 1，位 2 使组合设备就绪。现在，我已经创建了面具

```
#define C1_device_ready   (0x80 | 0x100 | 0x200) 
```

然后我读取数据并尝试比较。我可以做 1 个字节（数据 [0] 和掩码 == 掩码）。但是我怎样才能为有两个字节 data[0] 和 data[1] 的 C1_device_ready 掩码计算它。是否很容易或者我应该只在单个字节中进行屏蔽。::add::data 是无符号字符数据[2]

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T11:59:16.490

如果`data`是一个数组`unsigned char`，你可以测试

```
if ((data[0] & mask) == (mask & 0xFF) && (data[1] & mask) == ((mask >> 8) & 0xFF)) 
```

或将两者结合`data[i]`并检查

```
if (((data[0] | (data[1] << 8)) & mask) == mask) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T12:01:29.337

采用

```
if (((data[0] | (data[1] << 8)) & mask) == mask) {
    // do something
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-10T12:01:49.230

```
((data[0] | (data[1]<<8)) & mask) == mask 
```

应该管用。可能需要将事物转换为`unsigned int`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T12:10:17.237

尝试：

```
if ((*(short *)data) & C1_device_ready) 
```

# java - Mysql ClusterJ 插件

> ID：11901139
> 
> 赞同：1
> 
> 时间：2012-08-10T11:55:15.613
> 
> 标签：java, mysql, cluster-computing

Mysql 集群自带了用于 clusterj 的 jars。我下载了 Mysql Cluster 7.2.7。在 shared/java 文件夹中`clusterj-7.2.7.jar`，`clusterj-api-7.2.7.jar`, 等。存在。但是，当我将它们添加到我的项目类路径并编写我的第一个使用 clusterj 的 Java 应用程序时，一些类，如,`SessionFactory`不包含在可用的 jar 中。换句话说，我的 jar 中没有一个包含这些类，然后我无法导入。为什么 ？`Session``ClusterJHelper`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T12:18:07.027

你真的需要下载最新的 MySQL Cluster 7.2。SessionFactory、Session 和 ClusterJHelper 包含在

```
clusterj-7.2.10.jar
clusterj-api-7.2.10.jar
clusterjpa-7.2.10.jar 
```

# bots - 如何混淆网页上的电子邮件地址？

> ID：11901143
> 
> 赞同：0
> 
> 时间：2012-08-10T11:55:24.113
> 
> 标签：bots, spam

我希望在我的网站上显示我的电子邮件，但我不希望抓取工具收集它。换句话说，我不想打开垃圾邮件的闸门。有没有一种有效的方法可以让我的电子邮件在视觉上保持完整，同时阻止电子邮件报废机器人？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T12:00:04.373

几种解决方案：

1.  将其包装成图像。确保您对图像进行了处理，以使机器人无法使用 OCR 读取它。
2.  使用您的自定义加密算法对其进行编码，将加密文本存储在网页中，然后在页面加载时，使用 JavaScript 对其进行解码。这可能不是很安全，因为某些机器人可能能够解释 JavaScript。
3.  最好的选择之一是要求用户输入验证码，然后才将他/她重定向到显示您的电子邮件地址的单独页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T12:36:40.557

访问者拥有 mailto:mail@example.com 非常方便，因此他们可以点击它。

所以考虑其他选项 - 按原样发布电子邮件地址，但使用 Google 的 Gmail 地址（提供非常好的垃圾邮件过滤） - 除了电子邮件地址之外放置“联系人”表单（但应该使用验证码或其他技巧保护表单免受垃圾邮件发送者的影响证明作为一个人）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T20:22:11.157

要获得深思熟虑的解决方案，请查看[reCAPTCHA Mailhide](http://www.google.com/recaptcha/mailhide/)。如果您愿意降低安全性，您可以尝试将您的电子邮件地址写成*我在域名 .com 上的名字*或类似的东西，尽管垃圾邮件发送者可以轻松编写软件来抓取这些（并且可能已经让这种方法越来越受欢迎） .

# sql-server - 使用 SQL 选择日期最近的行

> ID：11901146
> 
> 赞同：1
> 
> 时间：2012-08-10T11:55:27.597
> 
> 标签：sql-server, date, exists

我有一条 SQL 语句。

```
SELECT 
    ID, LOCATION, CODE,MAX(DATE),FLAG 
FROM 
    TABLE1 
WHERE 
     DATE <= CONVERT(DATETIME,'11-11-2012') 
     AND EXISTS (SELECT * FROM #TEMP_CODE WHERE TABLE1.CODE = #TEMP_CODE.CODE) 
     AND ID IN (14, 279)
GROUP BY 
     ID, LOCATION, CODE 
```

我需要与 2012 年 11 月 11 日最近的日期的行，但该表返回所有值。我究竟做错了什么。谢谢

```
ID     LOCATION              CODE            DATE              FLAG
-------------------------------------------------------------------
14  CAR STREET,UDUPI         234      2012-08-08 00:00:00.000   0
14  CAR STREET,UDUPI         234      2012-08-10 00:00:00.000   1
14  CAR STREET,UDUPI         234      2012-08-14 00:00:00.000   0
279 MADHUGIRI                234      2012-08-08 00:00:00.000   1
279 MADHUGIRI                234      2012-08-11 00:00:00.000   0 
```

我只想显示日期小于或等于给定日期的行。所需的结果是

```
ID     LOCATION              CODE            DATE              FLAG
-------------------------------------------------------------------
14  CAR STREET,UDUPI         234      2012-08-10 00:00:00.000   1
279 MADHUGIRI                234      2012-08-11 00:00:00.000   0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T12:04:31.987

```
;WITH x AS 
(
  SELECT ID, Location, Code, Date, Flag, 
    rn = ROW_NUMBER() OVER 
    (PARTITION BY ID, Location, Code ORDER BY [Date] DESC)
  FROM dbo.TABLE1 AS t1
  WHERE [Date] <= '20121111'
  AND ID IN (14, 279) -- sorry, missed this
  AND EXISTS (SELECT 1 FROM #TEMP_CODE WHERE CODE = t1.CODE)
)
SELECT ID, Location, Code, Date, Flag
FROM x WHERE rn = 1; 
```

这产生：

```
ID  LOCATION         CODE [Date]     FLAG
--- ---------------- ---- ---------- ----
14  CAR STREET,UDUPI 234  2012-08-14 0
279 MADHUGIRI        234  2012-08-11 0 
```

这与您要求的结果不一致，但我认为这些是错误的，我认为您应该检查它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T15:54:06.993

使用子查询获取每个 ID 的最大日期，然后将其连接到您的表中：

```
SELECT 
    ID, LOCATION, CODE, DATE, FLAG 
FROM 
    TABLE1 
JOIN (
    SELECT ID AS SubID, MAX(DATE) AS SubDATE 
    FROM TABLE1 
    WHERE DATE < '11/11/2012'
        AND EXISTS (SELECT * FROM #TEMP_CODE WHERE TABLE1.CODE = #TEMP_CODE.CODE) 
        AND ID IN (14, 279)
    GROUP BY ID
    ) AS SUB ON ID = SubID AND DATE = SubDATE 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-10T12:05:33.860

添加订单 BY DATE LIMIT 0,2

通过您的订单，您将按照最接近您的条件的日期排序，并且限制将仅返回前 2 个值！

```
SET ROWCOUNT 2  
SELECT 
    ID, LOCATION, CODE,MAX(DATE),FLAG 
FROM 
    TABLE1 
WHERE 
     DATE <= CONVERT(DATETIME,'11-11-2012') 
     AND EXISTS (SELECT * FROM #TEMP_CODE WHERE TABLE1.CODE = #TEMP_CODE.CODE) 
     AND ID IN (14, 279)
GROUP BY 
     ID, LOCATION, CODE
ORDER BY DATE 
```

# math - 使用整数的 3 个数字的平均值

> ID：11901152
> 
> 赞同：3
> 
> 时间：2012-08-10T11:55:53.717
> 
> 标签：math, floating-point, integer, average

我想计算三个数字的平均值，例如：

```
d = int(round((a + b + c) / 3.0)) 
```

其中`a`, `b`, `c`,`d`是整数。

是否可以仅使用整数获得相同的结果？

由于性能原因，我对此感兴趣，我认为使用整数进行数学运算应该比使用浮点数更快。

上面的示例将整数转换为浮点数，计算结果，四舍五入并转换回整数。是否可以避免 int <-> float 转换？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-10T12:10:14.377

给定 1, 1, 2 -> 1 的要求；1, 2, 2 -> 2 那么这可以使用整数除法来完成。

使用 // 表示整数除法，使用 n 表示元素数。

```
average = ( a+ b + c + .... + n//2 ) // n 
```

即总结所有值，然后添加一个数字来处理四舍五入。

正如@Henrik 的回答中所指出的，这假设所有数字都是正数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T12:06:56.283

`(a + b + c + 1) / 3`

解释：如果 (a + b + c) % 3 == 1，则向下取整；如果 (a + b + c) % 3 == 2，则四舍五入。

至少这应该适用于`a + b + c >= 0`. 您可能需要单独处理负值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-10T12:07:35.443

Mahmoud 答案的一种变体，仅使用一个除法：

```
d = (((a+b+c) * 10) + 15) / 30 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T12:02:56.470

它应该很简单：

```
d = (((a+b+c) * 10) / 3 + 5) / 10; 
```

# java - 缺少库 com.sun.tools.attach

> ID：11901156
> 
> 赞同：16
> 
> 时间：2012-08-10T11:56:06.043
> 
> 标签：java, virtual-machine, jdk-tools

我尝试按照[本教程](http://dhruba.name/2010/02/07/creation-dynamic-loading-and-instrumentation-with-javaagents/)进行操作，但是导入有问题。

我有：

```
The import com.sun.tools cannot be resolved 
```

排队

```
import com.sun.tools.attach.VirtualMachine; 
```

我试图在 Sun/Oracle 网站上查找一些信息，但没有发现任何有用的信息。

我正在开发 JDK 1.6.0_31。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-17T20:28:04.960

`tools.jar`需要添加到 IDE 的库路径和程序的类路径中。该`tools.jar`文件位于 JDK 的`lib`目录中。

例如，如果安装了 JDK，`C:\Program Files\Java\jdk1.7.0_11`则该`tools.jar`文件将位于`C:\Program Files\Java\jdk1.7.0_11\lib\tools.jar`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-10T12:03:31.077

你应该添加`tools.jar`到你的`classpath`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-10T12:11:26.403

请参阅本教程以包含 `tools.jar`.

[http://hobione.wordpress.com/2009/03/11/missing-comsuntoolsjar142/](http://hobione.wordpress.com/2009/03/11/missing-comsuntoolsjar142/)

# javascript - javascript if 条件问题

> ID：11901158
> 
> 赞同：-4
> 
> 时间：2012-08-10T11:56:19.110
> 
> 标签：javascript, jquery, asp.net

我有一个变量 CampaignType，它的值为 0。但在警报中（双星内）它变为 1。为什么会这样？这是我的 javascript 代码片段

```
 if (CampaignType != 2) 
      {
       if (CampaignType = '1') 
        {
            **alert(CampaignType);**
            var CampaignAmount = (SelValue * CampaignPrice) / 100;
            SelValue = SelValue - (CampaignAmount);

        }
        else if (CampaignType = '0')
        {
            SelValue = SelValue - CampaignPrice;

        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T11:58:57.637

`=`是赋值运算符。

`==`是比较运算符。

`===`是身份运算符。

[看看如何在 JavaScript 中进行比较！](http://www.c-point.com/javascript_tutorial/jsgrpComparison.htm)

您的代码应该是：

```
if (CampaignType != 2) 
  {
   if (CampaignType == 1) 
    {
        alert(CampaignType);
        var CampaignAmount = (SelValue * CampaignPrice) / 100;
        SelValue = SelValue - (CampaignAmount);

    }
    else if (CampaignType == 0')
    {
        SelValue = SelValue - CampaignPrice;

    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T11:58:39.327

您将值 1 分配给`CampaingType`：

```
CampaignType = '1' 
```

如果要比较：

```
CampaignType == '1' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T11:57:34.907

您正在分配它，请执行以下操作：

```
if (CampaignType == '1') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T11:57:41.810

那是因为您不是在评估而是在设置一个值

利用

```
if (CampaignType === '1') //if you also want to verify they are the same type

if (CampaignType == '1') //if you do not want to verify if they are the same type 
```

# wordpress - 带有wordpress的类似MODX的模板变量？

> ID：11901165
> 
> 赞同：0
> 
> 时间：2012-08-10T11:56:31.577
> 
> 标签：wordpress, modx

在 Wordpress 中归档诸如 MODX的[模板变量](http://rtfm.modx.com/display/revolution20/Template+Variables)之类的最合适的方法是什么？甚至可能吗？

应该可以将自定义字段附加到自定义帖子类型，并且必须能够向帖子添加不同的媒体类型（字符串、整数、布尔值、图像、URL 等）。输入的数据必须经过验证，并且不需要手动输入字段名称（与 WP 的常规[自定义字段](http://codex.wordpress.org/Custom_Fields)一样）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T08:55:45.790

检查这个 - [http://wordpress.org/extend/plugins/advanced-custom-fields/](http://wordpress.org/extend/plugins/advanced-custom-fields/)和更多 - [http://wordpress.org/extend/plugins/tags/custom-field](http://wordpress.org/extend/plugins/tags/custom-field)

# android - 找不到安卓应用的网页

> ID：11901171
> 
> 赞同：1
> 
> 时间：2012-08-10T11:57:00.827
> 
> 标签：android, facebook

我在 facebook developers.com 上制作了一个 android 应用程序。在 Mobile Web Url 字段中，我给了[http://www.facebook.com/apps/application.php?id=352658298145952](http://www.facebook.com/apps/application.php?id=352658298145952)这是我想成为应用程序的 URL 现在我正在打开应用程序，上面写着网页未找到 ：/

总是感谢帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T13:32:35.917

移动 Web URL 应该是托管您的移动网站的 URL。您已列出旧的、已弃用的应用配置文件页面链接 - 这将重定向到您网站的画布或网站 URL。将值更改为托管移动 Web 内容的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T12:03:52.447

您无法使用此设置在移动设备上加载 Canvas 应用程序。您应该链接到您网站的移动版本。

# javascript - 删除使用 append 方法附加的 div

> ID：11901174
> 
> 赞同：6
> 
> 时间：2012-08-10T11:57:08.363
> 
> 标签：javascript, jquery, css

这是我的代码...追加工作但删除不起作用。如何删除附加的div？

```
<html>
  <head>
    <script type="text/javascript">
      function view(){
        $('body').append('<div class="added"><p>something</p></div>');
      };
      function close(){
        $('.added').remove();
      } ;
    </script>
  </head>
  <body>
    <a onclick="view();">something</a>
    <a onclick="close();">close</a>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T11:58:22.373

`window.close`在您的 html 处理程序中指定：

```
 <a onclick="window.close();">close<a> 
```

[http://jsfiddle.net/ZTwd7/1/](http://jsfiddle.net/ZTwd7/1/)

否则`close()`指的是本机`close`方法，它不做任何事情。

以下是使用“javascript”（而不是内联 html 属性）处理程序来模拟它的方法：

```
elem.onclick = function(event) {
    with(Window.prototype) {
        with(document) {
            with(this) {
                close();
            }
        }
    }
}; 
```

这不是精确的复制（它在 IE 等中也不起作用，这不是重点），但它会将`.close`in放在范围内`Window.prototype`的全局前面`window.close`，因此它会遮蔽它。您仍然可以使用`window.close()`.

* * *

您还应该完全放弃上述内容并改用 jQuery：

```
<a id="view">something<a>
<a id="close">close<a> 
```

JS：

```
$(function() {
    $("#view").click(function() {
        $('body').append('<div class="added"><p>something</p></div>');

    });
    $("#close").click(function() {
        $('.added').remove();

    });
});​ 
```

[http://jsfiddle.net/ZTwd7/5/](http://jsfiddle.net/ZTwd7/5/)

* * *

发出一个获取要附加的 html 文件的 ajax 请求：

```
$.get("myhtml.html", function(html) {
    $("body").append(html);
}, "html"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T12:11:22.457

不知道为什么，但是通过给 close 函数加上另一个名字而不是 close() 它可以工作

```
<html>
    <head>
<script src="http://code.jquery.com/jquery-latest.js"></script>

   <script type="text/javascript">
            function view(){
                     $('body').append('<div class="added"><p>something</p></div>');
            };
            function close_it(){
                                       $('.added').remove();

            } ;

    </script>
</head>
<body>
   <a onclick="view();">something<a>
   <a onclick="close_it();">close<a>
</body></html> 
```

# javascript - 在Javascript中获取小数点后的数字

> ID：11901178
> 
> 赞同：1
> 
> 时间：2012-08-10T11:57:23.720
> 
> 标签：javascript

我有一个颜色选择器，返回的色调值是介于 0 和 1 之间的数字。为了创建色调的变化，我添加 0.2 表示 20%，0.8 表示 80% 等。

我怎样才能让数字绕着圆圈旋转，这样当数字超过 1 时，它会减去 1。我怎样才能使这个数字变成这个数字：1.73540012511 ---> .7354

我尝试使用“美分”javascript（http://www.irt.org/script/6.htm），但这返回的值大于 1：http: [//jsfiddle.net/Se9Dn/](http://jsfiddle.net/Se9Dn/)

我不能使用 Math.min，因为我希望 1.2 变为 .2（不要让颜色在达到 1 时全部变为红色）。

谢谢。:)

* * *

**编辑：** 确认解决方案，添加四舍五入。假设您有一个从 Farbtastic 返回的 HSL 颜色（色相、饱和度、亮度），并且想要以数学方式调整色相：

```
hslcolor  = (.73802938, .59832908, .948987);
colorStep = .2;
newcolor[0] = Math.round ( ((1*colorStep +hslcolor[0])%1)*10000 ) /10000; 
```

当心那些括号在那里非常棘手。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T12:00:05.467

您可以使用模运算符`%`( [MDN docu](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Arithmetic_Operators#.C2.A0.25_%28Modulus%29) )。

因此，对于添加，例如`0.8`：

```
result = (result + 0.8) % 1; 
```

**编辑**

JavaScript 的模运算符实际上更像是一个余数运算符。

引用[ECMAScript 规范第 5.2 节](http://ecma-international.org/ecma-262/5.1/#sec-5.2)：

> 符号“x modulo y”（y 必须是有限且非零）计算与 y（或零）符号相同的值 k，使得 abs(k) < abs(y) 并且 x−k = q × y 对于某些整数q。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T12:01:47.297

你只需减去整数：

```
function cent(amount) { return (+amount) - Math.floor(+amount); } 
```

如果数字可以是负数，那么它取决于您想要的语义。我会把它作为练习:-)

# android - Android 如何将图标添加到操作栏？

> ID：11901180
> 
> 赞同：-1
> 
> 时间：2012-08-10T11:57:29.150
> 
> 标签：android, menu, icons, android-actionbar

我想知道如何将图标添加到操作栏，就像下面来自 Android 市场的示例链接一样？

请附上示例代码。

[示例图片](http://i45.tinypic.com/2uonnk3.png)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-10T11:58:39.880

那不是标题栏..尝试寻找`ActionBar`

**编辑：** 这是创建自己的操作栏 [操作栏示例的示例](http://appfulcrum.com/2010/08/29/simple-actionbar-for-android-application/)

# android - 没有意图过滤器的Android BroadcastReceiver

> ID：11901195
> 
> 赞同：14
> 
> 时间：2012-08-10T11:58:05.993
> 
> 标签：android, android-intent, broadcastreceiver, intentfilter

我在几个 android 广告网络 sdk 中看到他们声明`BroadcastReceiver`没有意图过滤器。像这样的东西：

```
<receiver android:name="com.example.SampleReceiver" /> 
```

我的猜测是这样的接收器会捕获所有可能的事件。所以我自己尝试过并创建了一个`SampleReceiver`：

```
public class SampleReceiver extends BroadcastReceiver
{
    @Override
    public void onReceive(Context context, Intent intent)
    {
        System.out.println("Event captured: " + intent.getAction());
    }
} 
```

我已经启动了该应用程序，试图通过在我的手机上执行各种操作来触发一些事件，并注意到它`onReceive()`甚至没有被调用一次。

所以问题是——没有意图过滤器的广播接收器是如何工作的？也许它需要通过代码创建意图过滤器？如果是这样，怎么做？如果没有，那为什么它不接收任何事件？这里发生了什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-10T21:16:07.950

如果您没有一些意图过滤器，则接收某些内容的唯一方法是显式调用接收者。这看起来像这样：

```
context.sendBroadcast(new Intent(context, MyBroadcastReceiverClass.class)); 
```

另一个人已经在以下帖子中回答了这个问题： [https ://stackoverflow.com/questions/10051256/broadcast-receiver-not-receiving](https://stackoverflow.com/questions/10051256/broadcast-receiver-not-receiving)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T12:16:51.770

我认为以下问题/答案应该为您提供一些线索：

[在 android 中创建一个匹配所有意图的 IntentFilter](https://stackoverflow.com/questions/2403759/create-an-intentfilter-in-android-that-matches-all-intents)

# xml - LIBXML2：抑制控制台上的调试输出

> ID：11901206
> 
> 赞同：3
> 
> 时间：2012-08-10T11:58:55.213
> 
> 标签：xml, xml-parsing, xsd, libxml2

在我的软件中，我使用 libxml2 来操纵（显然）XML 数据结构。我主要使用 XSD 模式验证，到目前为止，它运行良好。

当客户端输入的数据结构与 XSD 架构不匹配时，libxml2 会向控制台输出一些调试消息。

这是一个例子：

/data/file_name:5230：解析器错误：StartTag：无效元素名称 < ^

虽然这些字符串对于调试目的很有用，但我不希望它们出现并污染最终应用程序中的控制台输出。到目前为止，我找不到这样做的官方方法。虽然，我确实有一种修改库本身的方法，但我正在寻找一种库配置，即无需修改代码。

您知道如何抑制调试输出或（甚至更好）将其重定向到自定义函数吗？

和平与问候。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T16:09:04.610

有一种回调机制可以按照您想要的方式输出警告和错误。

正如 API 文档中所说，[xmlSchemaSetParserErrors()](http://xmlsoft.org/html/libxml-xmlschemas.html#xmlSchemaSetParserErrors) `Set the callback functions used to handle errors for a validation context.`

您需要针对定义的签名编写两个回调函数：

*   [xmlSchemaValidityErrorFunc](http://xmlsoft.org/html/libxml-xmlschemas.html#xmlSchemaValidityErrorFunc)错误
*   [xmlSchemaValidityWarningFunc](http://xmlsoft.org/html/libxml-xmlschemas.html#xmlSchemaValidityWarningFunc)警告

一个例子可能是：

```
void err(void *ctx, const char *msg, ...)
{
  char buf[1024];
  va_list args;

  va_start(args, msg);
  int len = vsnprintf_s(buf, sizeof(buf), sizeof(buf)/sizeof(buf[0]), msg, args);
  va_end(args);

  if(len==0) // Can't create schema validity error!
  else       // Do something to store `buf`, 
             // you may need to use void *ctx to achieve this

  return;
} 
```

然后打电话

`xmlSchemaSetValidErrors(valid_ctxt_ptr, (xmlSchemaValidityErrorFunc) err, (xmlSchemaValidityWarningFunc) warn, ctx);`

打电话之前

```
xmlSchemaValidateDoc() 
```

# ruby-on-rails - 如何测试优惠券/促销代码的唯一性？

> ID：11901209
> 
> 赞同：2
> 
> 时间：2012-08-10T11:59:10.080
> 
> 标签：ruby-on-rails, rspec, rspec2, rspec-rails

我有一个模型`PromoCode`，它有一个`.generate!`方法，调用`.generate`它生成一个字符串`SecureRandom.hex(5)`并将其保存到数据库中：

```
class PromoCode < ActiveRecord::Base
  class << self
    def generate 
      SecureRandom.hex 5
    end

    def generate!
      return create! code: generate
    end
  end
end 
```

现在我想编写一个规范来测试生成的字符串的唯一性。`.generate`只要生成了不存在的 PromoCode，就应该调用该方法。

我不确定如何执行此操作，因为我无法真正删除`.generate`返回固定值的方法（因为那样它会陷入无限循环）。

这是迄今为止模型的通过规范：

```
describe PromoCode do
  describe ".generate" do
    it "should return a string with a length of 10" do
      code = PromoCode.generate
      code.should be_a String
      code.length.should eql 10
    end
  end

  describe ".generate!" do
    it "generates and returns a promocode" do
      expect {
        @promo = PromoCode.generate!
      }.to change { PromoCode.count }.from(0).to(1)

      @promo.code.should_not be_nil
      @promo.code.length.should eql 10
    end

    it "generates a uniq promocode" do
    end
  end
end 
```

任何方向表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T12:51:30.820

那么类似的东西呢：创建一个`PromoCode`，保存结果，并尝试使用前一个对象创建一个新`PromoCode`的：`code``PromoCode`

```
it "should reject duplicate promocode" do
  @promo = PromoCode.generate!
  duplicate_promo = PromoCode.new(:code => @promo.code)
  duplicate_promo.should_not be_valid
end 
```

另外，这是模型级别，我假设您在数据库中有一个键可以使您免于竞争条件...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T13:20:15.383

Rspec 的`and_return`方法允许您指定将循环通过的多个返回值

例如你可以写

```
PromoCode.stub(:generate).and_return('badcode1', 'badcode2', 'goodcode') 
```

这将导致第一次调用 generate 返回“badcode1”，第二个“badcode2”等...然后您可以检查返回的促销代码是否使用正确的代码创建。

如果您想成为竞争条件证明，您将需要一个数据库唯一性约束，因此您的代码实际上可能想要

```
def generate!
   create!(...)
rescue ActiveRecord::RecordNotUnique
  retry
end 
```

在您的规范中，您将存根创建！第一次引发但第二次返回值的方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T12:16:42.940

如果您将促销代码保存在数据库中，您将在模型中为 uniq 促销代码添加验证。因此，您也可以在 rspec 中进行相同的测试。

像这样，

```
it { should validate_uniqueness_of(:promocode) } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T13:15:55.767

此答案基于您的评论：

> 我需要确保生成！生成代码 - 无论如何，直到生成唯一代码。

我觉得你可能很难正确测试这个。单元测试“无论如何”具有无限循环的情况可能有点棘手。

> 我不确定如何执行此操作，因为我无法真正删除 .generate 方法以返回固定值（因为它会陷入无限循环）。

要考虑的一种可能性可能是，您是否尝试了两种方法而不是其中一种？（也就是说，找到一种方法让它在某些情况下返回一个固定的数字，并最终触发实际的随机数。实例变量计数器可能会有所帮助；将其设置为随机数，倒数，当它大于零时返回固定数字，或类似的东西）。尽管如此，这仍然不是一个完美的测试，甚至不是一个非常好的测试。

可能值得更多地研究生成相似字符串的方法，这些字符串很有可能是唯一的，并且有一些数学证明是这样的。我也不是说这也是最实用的想法，但如果你真的需要证明（就像你试图用测试做的那样），它可能是更可能的解决方案。

# android - 无法使按钮对 onClick 做出反应

> ID：11901213
> 
> 赞同：1
> 
> 时间：2012-08-10T11:59:21.013
> 
> 标签：android, android-layout, onclick, android-xml

我在 Activity 中有这两个按钮。工作正常，但是当`backBtn`我单击`reg_country`按钮时没有任何反应。知道发生了什么吗？

[编辑] 用一些日志编辑，`onClick`当我触摸按钮时不执行。

```
 08-10 09:33:08.608: D/dalvikvm(806): GC_EXTERNAL_ALLOC freed 365 objects / 24360 bytes in 58ms
 08-10 09:33:11.608: E/RegisterActivity(806): Activity started
 08-10 09:33:14.317: E/RegisterActivity(806): onClick (backBtn)
 08-10 09:33:16.268: E/RegisterActivity(806): Activity started 
```

部分活动代码

```
Log.e("RegisterActivity", "Activity started");

backBtn = (Button) findViewById(R.id.backBtn);
backBtn.setText("Cancelar");
backBtn.setVisibility(View.VISIBLE);

backBtn.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
        Log.e("RegisterActivity", "onClick (backBtn)");
        finish();
    }
});

reg_country = (Button) findViewById(R.id.reg_country);
reg_country.setText("reg_country");
reg_country.setClickable(true);
reg_country.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
        Log.e("RegisterActivity", "onClick (reg_country)");
        finish();
    }
}); 
```

也许是因为`reg_country`停留在一个`TableLayout`? backBtn 来自于包含的`actionbar_layout`

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#FFFFFF"
    android:orientation="vertical" >

    <include
        android:id="@+id/include1"
        layout="@layout/actionbar_layout" />

    <!-- Registration Form -->

    <TableLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="20dip"
        android:layout_marginRight="20dip"
        android:layout_marginTop="20dip"
        android:background="@drawable/balao_formulario_cadastrar"
        android:clickable="true"
        android:gravity="center"
        android:isScrollContainer="true"
        android:orientation="vertical"
        android:paddingLeft="10dip"
        android:paddingRight="10dip"
        android:paddingTop="50dip"
        android:stretchColumns="1" >

        <EditText
            android:id="@+id/reg_fullname"
            android:layout_width="fill_parent"
            android:layout_height="40dip"
            android:layout_marginBottom="20dip"
            android:layout_marginTop="5dip"
            android:background="@drawable/stroke"
            android:hint="Nome Completo"
            android:imeOptions="actionNext"
            android:inputType="textPersonName"
            android:singleLine="true" />

        <EditText
            android:id="@+id/reg_email"
            android:layout_width="fill_parent"
            android:layout_height="40dip"
            android:layout_marginBottom="20dip"
            android:layout_marginTop="5dip"
            android:background="@drawable/stroke"
            android:hint="E-mail"
            android:inputType="textEmailAddress"
            android:singleLine="true" />

        <EditText
            android:id="@+id/reg_password"
            android:layout_width="fill_parent"
            android:layout_height="40dip"
            android:layout_marginBottom="20dip"
            android:layout_marginTop="5dip"
            android:background="@drawable/stroke"
            android:hint="Senha"
            android:password="true"
            android:singleLine="true" />

        <Button
            android:id="@+id/reg_country"
            android:layout_width="fill_parent"
            android:layout_height="40dip"
            android:layout_marginBottom="25dip"
            android:clickable="true"
            android:gravity="left|center_vertical"
            android:text="Selecione um País"
            android:textSize="15dip" />

        <!-- Terms of Use TextView -->

        <TextView
            android:id="@+id/reg_terms_link"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:text="@string/termos"
            android:textColor="#3D3D3D"
            android:textSize="10dip" />
    </TableLayout>

    <Button
        android:id="@+id/registerBtn"
        android:layout_width="fill_parent"
        android:layout_height="35dip"
        android:layout_marginLeft="20dip"
        android:layout_marginRight="20dip"
        android:layout_marginTop="20dip"
        android:background="@drawable/button_cadastrar"
        android:text="Cadastrar"
        android:textColor="#3D3D3D"
        android:textSize="15dip" />

    <!-- Registration Form Ends -->

</LinearLayout> 
```

# ravendb - 将 RavenDB 与 ServiceStack 一起使用

> ID：11901216
> 
> 赞同：5
> 
> 时间：2012-08-10T11:59:28.273
> 
> 标签：ravendb, servicestack, funq

我阅读了 Phillip Haydon 的[这篇](http://www.philliphaydon.com/2012/06/using-nhibernate-with-servicestack/)关于如何将 NHibernate/RavenDB 与 ServiceStack 一起使用的文章。
每次我需要数据库中的一些东西时，我都看不到获取 IDocumentStore 并打开新会话的意义，如下所示：

```
public class FooService : ServiceBase<Foo>
{
    public IDocumentStore RavenStore{ get; set; }

    protected override object Run(ProductFind request)
    {
        using (var session = RavenStore.OpenSession())
        {
            // Do Something...

            return new FooResponse{/*Object init*/};
        }
    }
} 
```

为什么我不能每个请求只使用一个会话，当请求结束时，根据响应状态提交更改或回滚？

如果我的方法很好，那么我该如何实施呢？这是我的尝试：

我创建了这个类：

```
 public class RavenSession : IRavenSession
    {
        #region Data Members

        private readonly IDocumentStore _store;
        private IDocumentSession _innerSession;

        #endregion

        #region Properties

        public IDocumentSession InnerSession
        {
            get { return _innerSession ?? (_innerSession = _store.OpenSession()); }
        }

        #endregion

        #region Ctor

        public RavenSession(IDocumentStore store)
        {
            _store = store;
        }

        #endregion

        #region Public Methods

        public void Commit()
        {
            if (_innerSession != null)
            {
                try
                {
                    InnerSession.SaveChanges();
                }
                finally
                {
                    InnerSession.Dispose();
                }
            }
        }

        public void Rollback()
        {
            if (_innerSession != null)
            {
                InnerSession.Dispose();
            }
        }

        #endregion

        #region IDocumentSession Delegation

        public ISyncAdvancedSessionOperation Advanced
        {
            get { return InnerSession.Advanced; }
        }

        public void Delete<T>(T entity)
        {
            InnerSession.Delete(entity);
        }

        public ILoaderWithInclude<object> Include(string path)
        {
            return InnerSession.Include(path);
        }

        public ILoaderWithInclude<T> Include<T, TInclude>(Expression<Func<T, object>> path)
        {
            return InnerSession.Include<T, TInclude>(path);
        }

        public ILoaderWithInclude<T> Include<T>(Expression<Func<T, object>> path)
        {
            return InnerSession.Include(path);
        }

        public T Load<T>(string id)
        {
            return InnerSession.Load<T>(id);
        }

        public T[] Load<T>(params string[] ids)
        {
            return InnerSession.Load<T>(ids);
        }

        public T Load<T>(ValueType id)
        {
            return InnerSession.Load<T>(id);
        }

        public T[] Load<T>(IEnumerable<string> ids)
        {
            return InnerSession.Load<T>(ids);
        }

        public IRavenQueryable<T> Query<T, TIndexCreator>() where TIndexCreator : AbstractIndexCreationTask, new()
        {
            return InnerSession.Query<T, TIndexCreator>();
        }

        public IRavenQueryable<T> Query<T>()
        {
            return InnerSession.Query<T>();
        }

        public IRavenQueryable<T> Query<T>(string indexName)
        {
            return InnerSession.Query<T>(indexName);
        }

        public void Store(dynamic entity, string id)
        {
            InnerSession.Store(entity, id);
        }

        public void Store(object entity, Guid etag, string id)
        {
            InnerSession.Store(entity, etag, id);
        }

        public void Store(object entity, Guid etag)
        {
            InnerSession.Store(entity, etag);
        }

        public void Store(dynamic entity)
        {
            InnerSession.Store(entity);
        }

        #endregion

    } 
```

现在我的服务看起来像这样：

```
public class FooService : ServiceBase<Foo>
{
    public IRavenSession RavenSession { get; set; }

    protected override object Run(ProductFind request)
    {
        // Do Something with RavenSession...

        return new FooResponse {/*Object init*/};
    }
} 
```

但我仍然需要找到一种方法来知道何时结束提交/回滚更改的请求。
我发现最好的方法是使用 ResponseFilters：

```
public class AppHost : AppHostBase
{
    public AppHost()
        : base("", typeof (Foo).Assembly, typeof (FooService).Assembly)
    {
    }

    public override void Configure(Container container)
    {
        // Some Configuration...

        this.ResponseFilters.Add((httpReq, httpResp, respnseDto) =>
                                     {
                                         var currentSession = (RavenSession) this.Container.Resolve<IRavenSession>();

                                         if (!httpResp.IsErrorResponse())
                                         {
                                             currentSession.Commit();
                                         }
                                         else
                                         {
                                             currentSession.Rollback();
                                         }
                                     });

        // Some Configuration...
    }
} 
```

我确信有更好的方法可以做到这一点，但如何？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-07T21:54:03.527

我刚刚将它包含在 AppHost 的 Configure 方法中

```
var store = new DocumentStore()
{
    Url = "http://127.0.0.1:8080",
    DefaultDatabase = "Test"
}.Initialize();

container.Register(store);

container.Register(c => c.Resolve<IDocumentStore>().OpenSession()).ReusedWithin(ReuseScope.Request); 
```

您可以将其放在模块上并对其进行初始化。

然后在您的服务中添加一个接受 IDocumentSession 的构造函数

```
public HelloService : Service {
    private readonly IDocumentSession session;
    public HelloService(IDocumentSession session) {
        this.session = session;
    }
} 
```

你可以走了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T16:41:51.853

### 过滤 ServiceStack 中的响应

[在ServiceStack](http://www.servicestack.net)中自省 Response 的方法是：

*   [响应过滤器](https://github.com/ServiceStack/ServiceStack/wiki/Request-and-response-filters)或响应[过滤器属性](https://github.com/ServiceStack/ServiceStack/wiki/Filter-attributes)或[其他自定义挂钩](https://github.com/ServiceStack/ServiceStack/wiki/Order-of-Operations)
*   覆盖[AppHost.ServiceExceptionHandler 或自定义 OnAfterExecute() 挂钩](https://stackoverflow.com/a/13058304/85785)

其他一些可能有用的注释：

ServiceStack 的内置 IOC [(Funq) 现在支持 RequestScope](https://github.com/ServiceStack/ServiceStack/wiki/The-IoC-container)

您可以添加`IDisposable`到服务完成后立即调用的基类，例如，如果您要使用 RDBMS：

```
public class FooServiceBase : IService, IDisposable
{
    public IDbConnectionFactory DbFactory { get; set; }

    private IDbConnection db;
    public IDbConnection Db
    {
        get { return db ?? (db = DbFactory.OpenDbConnection()); }
    }

    public object Any(ProductFind request)
    {
        return new FooResponse {
            Result = Db.Id<Product>(request.Id)
        };
    }

    public void Dispose()
    {
        if (db != null) db.Dispose();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T15:22:47.130

我尝试了Felipe Leusin 给出的[答案](https://stackoverflow.com/a/13771595/523296)，但它对我没有用。我想要实现的主要目标是每个请求都有一个 DocumentSession.SaveChanges 调用。在查看了 RacoonBlog DocumentSession 生命周期管理和 ServiceStack 请求生命周期事件之后，我整理了一个适合我的配置：

```
 public override void Configure(Funq.Container container)
    {
        RequestFilters.Add((httpReq, httpRes, requestDto) =>
            {

                IDocumentSession documentSession = Container.Resolve<IDocumentStore>().OpenSession();
                Container.Register<IDocumentSession>(documentSession);
            });

        ResponseFilters.Add((httpReq, httpRes, requestDto) =>
            {
                using (var documentSession = Container.Resolve<IDocumentSession>())
                {
                    if (documentSession == null)
                        return;

                    if (httpRes.StatusCode >= 400 && httpRes.StatusCode < 600)
                        return;

                    documentSession.SaveChanges();
                }
            });
        var documentStore = new DocumentStore
            {
                ConnectionStringName = "RavenDBServer",
                DefaultDatabase = "MyDatabase",
            }.Initialize();

        container.Register(documentStore); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-11T00:36:52.683

我正在为我的 RavenSession 使用带有 RequestScope 的 funq，现在我将其更新为：

```
public class RavenSession : IRavenSession, IDisposable
{
    #region Data Members

    private readonly IDocumentStore _store;
    private readonly IRequestContext _context;
    private IDocumentSession _innerSession;

    #endregion

    #region Properties

    public IDocumentSession InnerSession
    {
        get { return _innerSession ?? (_innerSession = _store.OpenSession()); }
    }

    #endregion

    #region Ctor

    public RavenSession(IDocumentStore store, IRequestContext context)
    {
        _store = store;
        _context = context;
    }

    #endregion

    #region IDocumentSession Delegation

    public ISyncAdvancedSessionOperation Advanced
    {
        get { return InnerSession.Advanced; }
    }

    public void Delete<T>(T entity)
    {
        InnerSession.Delete(entity);
    }

    public ILoaderWithInclude<object> Include(string path)
    {
        return InnerSession.Include(path);
    }

    public ILoaderWithInclude<T> Include<T, TInclude>(Expression<Func<T, object>> path)
    {
        return InnerSession.Include<T, TInclude>(path);
    }

    public ILoaderWithInclude<T> Include<T>(Expression<Func<T, object>> path)
    {
        return InnerSession.Include(path);
    }

    public T Load<T>(string id)
    {
        return InnerSession.Load<T>(id);
    }

    public T[] Load<T>(params string[] ids)
    {
        return InnerSession.Load<T>(ids);
    }

    public T Load<T>(ValueType id)
    {
        return InnerSession.Load<T>(id);
    }

    public T[] Load<T>(IEnumerable<string> ids)
    {
        return InnerSession.Load<T>(ids);
    }

    public IRavenQueryable<T> Query<T, TIndexCreator>() where TIndexCreator : AbstractIndexCreationTask, new()
    {
        return InnerSession.Query<T, TIndexCreator>();
    }

    public IRavenQueryable<T> Query<T>()
    {
        return InnerSession.Query<T>();
    }

    public IRavenQueryable<T> Query<T>(string indexName)
    {
        return InnerSession.Query<T>(indexName);
    }

    public void Store(dynamic entity, string id)
    {
        InnerSession.Store(entity, id);
    }

    public void Store(object entity, Guid etag, string id)
    {
        InnerSession.Store(entity, etag, id);
    }

    public void Store(object entity, Guid etag)
    {
        InnerSession.Store(entity, etag);
    }

    public void Store(dynamic entity)
    {
        InnerSession.Store(entity);
    }

    #endregion

    #region Implementation of IDisposable

    public void Dispose()
    {
        if (_innerSession != null)
        {
            var httpResponse = _context.Get<IHttpResponse>();

            try
            {
                if (!httpResponse.IsErrorResponse())
                {
                    _innerSession.SaveChanges();
                }
            }
            finally
            {
                _innerSession.Dispose();
            }
        }
    }

    #endregion
} 
```

但这不起作用，因为：
1）虽然我使用的是RequestScope，但没有人注册请求的IRequestContext，所以funq无法解析我的RavenSession。
2) funq 在请求完成后没有运行 Dispose 方法，这很奇怪。

# haskell - xmonad：移动新的浮动窗口

> ID：11901221
> 
> 赞同：5
> 
> 时间：2012-08-10T11:59:55.253
> 
> 标签：haskell, window-managers, xmonad

如[本期](https://github.com/chjj/compton/issues/5)和[本期](http://code.google.com/p/xmonad/issues/detail?id=346)所述，当将 xmonad 与 compton 一起使用时，我的浮动窗口有时会呈现在其他窗口后面。我想尝试的一种可能的解决方法是让 xmonad 稍微移动新的浮动窗口，这应该将它们呈现在其他窗口之上。但是，作为 xmonad 和 Haskell 的新手，我不知道如何实现这一点。

如何告诉 xmonad “创建新的浮动窗口时，将其向右移动一个像素”？

（xmonad-0.10 和 xmonad-contrib-0.10）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T14:33:24.943

对于来这里真的想换窗户的人，你可以这样做：

在您的 $HOME/.xmonad.xmonad.hs 中：

添加一些导入（您可以跳过现有的，注意 Xmonad.StackSet 的合格导入和下面的“W.shift”，如果以其他名称导入则必须调整名称）

```
import XMonad.Hooks.XPropManage
import qualified XMonad.StackSet as W
import XMonad.Actions.TagWindows
import Data.List 
```

并添加

```
manageHook = xPropManageHook xPropMatches

xPropMatches :: [XPropMatch]
xPropMatches = [ ( [(wM_CLASS, any (const True))], (return (W.shift "2"))) ] 
```

这应该适用于所有窗户。如果要控制匹配，

```
(const True) 
```

可以替换为具有该类型的任何内容

```
String -> Bool 
```

例如

```
("Vimperator" `isInfixOf`) 
```

ETC

资料来源： [XPropManage](http://xmonad.org/xmonad-docs/xmonad-contrib/XMonad-Hooks-XPropManage.html "XPropManage")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T14:33:33.710

[问题已修复](https://github.com/chjj/compton/issues/5#issuecomment-8355235)，不再需要此解决方法。

# jquery - jQuery UI 2 日期选择器和范围选择

> ID：11901224
> 
> 赞同：4
> 
> 时间：2012-08-10T11:59:59.077
> 
> 标签：jquery, jquery-ui, jquery-ui-datepicker

我正在尝试连接 2 个日期选择器以允许用户选择日期范围。

我创建了这样的代码：

```
$(function() {
    var dates = $("#fromDate, #toDate").datepicker({
        dateFormat: 'yy-mm-dd',
        changeMonth: true,
        changeYear: true,
        minDate: new Date(2010, 2 - 1, 2),
        onSelect: function(selectedDate) {
            var option = this.id == "fromDate" ? "minDate" : "maxDate",
                instance = $(this).data("datepicker"),
                date = $.datepicker.parseDate(
                instance.settings.dateFormat || $.datepicker._defaults.dateFormat, selectedDate, instance.settings);
            dates.not(this).datepicker("option", option, date);
        }
    });
}); 
```

这工作正常，但我收到奇怪的错误：当我使用第一个输入选择日期一秒钟时，datepicker 显示第二个日期的日期。我认为 onSelect 函数以某种方式基于第二个日期选择器设置日期。

如果第一个日期选择器的日期与第二个日期相同，则不会显示此错误。

如何重新创建此行为：

*   在第一个日期选择器中选择“2010-02-05”（在您单击日期后第二个月份和年份字段从第二个日期选择器更改为月份和年份）

这是我的 jsFiddle：http: [//jsfiddle.net/Misiu/TyQSG/1/](http://jsfiddle.net/Misiu/TyQSG/1/)

我应该如何更改`onSelect`功能以消除此错误？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-10T13:10:49.797

请检查这个。我想这就是你想要的？

根据 UI 示例更改了您的代码。

```
$(function() {
    $( "#fromDate" ).datepicker({
        dateFormat: 'yy-mm-dd',
        changeMonth: true,
        changeYear: true,
        minDate: new Date(2010, 2 - 1, 2),
        onSelect: function( selectedDate ) {
            $( "#toDate" ).datepicker( "option", "minDate", selectedDate );
        }
    });
    $( "#toDate" ).datepicker({
        dateFormat: 'yy-mm-dd',
        changeMonth: true,
        changeYear: true,
        minDate: new Date(2010, 2 - 1, 2),
        onSelect: function( selectedDate ) {
            $( "#fromDate" ).datepicker( "option", "maxDate", selectedDate );
        }
    });
});​ 
```

**[小提琴](http://jsfiddle.net/TyQSG/32/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T12:15:32.030

这并不能解决他们在日期选择器代码中显然存在错误的事实，但这是一种解决方法。

如果将[showAnim](http://jqueryui.com/demos/datepicker/#option-showAnim)设置为空，则不会有任何动画，并且不会显示上一个日历中的日期：

```
 showAnim:"", 
```

# c# - 连接到 PC 时，应用程序在重定向到另一个 URL 后不退出

> ID：11901225
> 
> 赞同：0
> 
> 时间：2012-08-10T12:00:02.917
> 
> 标签：c#, windows-phone-7, windows-phone-7.1, exit

当有可用升级时显示消息时，我有条件，一旦用户单击“升级”按钮，应用程序就会重定向到给定的升级 URL 并退出应用程序。所以，当我按下返回键时，我会被带到应用程序列表屏幕。当我不再将设备连接到 PC 时，这可以正常工作。但是，当我通过将设备连接到 PC 进行测试时，重定向发生得很好，但是在后退键按下时，我被带到了我的应用程序的空白屏幕。

这是单击“升级”时发生的情况。

```
case 6:
  //APP_MINOR_UPGRADE_CONFIRM
  switch (dialogResult)
  {
    case 1:
      try
      {
        string url;
        //url = CacheManager.getInstance().getApplicationSettings(CacheManager.APP_APK_UPGRADE_URI);
        url = CacheManager.getInstance().getDataFromConfigFile(CacheManager.APP_APK_UPGRADE_URI);
        if (Utils.isNullString(url))
        {
          url = CacheManager.getInstance().getUpgradeURL();
        }
        DataManager.getInstance().UpdateBadge(false);
        WebBrowserTask browse = new WebBrowserTask();
        browse.URL = url;
        browse.Show();
        game = new Game();
        game.Exit();
        break;
      }
      catch (Exception ex)
      {
      }
      finally
      {
       // DataManager.getInstance().CheckCatalogUpgradeStatus();
      }
      break;
    default:
      //delete data from the DB
      ProgressBarControl.displayProgressBar(0, 10, AppResources.DOWNLOADING);
      try
      {
        //byte[] data = (byte[])CacheManager.getInstance().getPersistanceData(Utils.MINOR_UPGRADE_DATA);
        byte[] data = (byte[])CacheManager.getInstance().getDataFromDataFile();
        if (data != null && data.Length > 0)
        {
          DataManager.getInstance().processMyWidgetResponse(data);
          DataManager.getInstance().refresUI();
        }
        DataManager.getInstance().UpdateBadge(false);
        DataManager.getInstance().CheckCatalogUpgradeStatus();
      }
      catch (Exception ex)
      {
      }
      finally
      {
        CacheManager.getInstance().deletaFromApplicationCache(Utils.MINOR_UPGRADE_DATA);
      }

      break;

  }
  break; 
```

可能是什么原因？评论和答案表示赞赏:)

# google-app-engine - GWT 应用引擎错误

> ID：11901228
> 
> 赞同：-1
> 
> 时间：2012-08-10T12:00:06.527
> 
> 标签：google-app-engine, gwt

我的`GWT`应用程序有一个小问题。

这是控制台输出：

```
SEVERE: Received exception processing /Users/je/Documents/HelloWorld/ConnectrStage1/war/WEB-INF/appengine-web.xml
com.google.apphosting.utils.config.AppEngineConfigException: appengine-web.xml does not contain a <threadsafe> element.
See http://code.google.com/appengine/docs/java/config/appconfig.html#Using_Concurrent_Requests for more information.
You probably want to enable concurrent requests.
    at com.google.apphosting.utils.config.AppEngineWebXmlReader.readAppEngineWebXml(AppEngineWebXmlReader.java:79)
    at com.google.appengine.tools.development.AbstractContainerService.loadAppEngineWebXml(AbstractContainerService.java:360)
    at com.google.appengine.tools.development.AbstractContainerService.startup(AbstractContainerService.java:239)
    at com.google.appengine.tools.development.DevAppServerImpl.start(DevAppServerImpl.java:148)
    at com.google.appengine.tools.development.gwt.AppEngineLauncher.start(AppEngineLauncher.java:97)
    at com.google.gwt.dev.DevMode.doStartUpServer(DevMode.java:509)
    at com.google.gwt.dev.DevModeBase.startUp(DevModeBase.java:1093)
    at com.google.gwt.dev.DevModeBase.run(DevModeBase.java:836)
    at com.google.gwt.dev.DevMode.main(DevMode.java:311)
   [ERROR] Unable to start App Engine server
com.google.apphosting.utils.config.AppEngineConfigException: appengine-web.xml does not contain a <threadsafe> element.
See http://code.google.com/appengine/docs/java/config/appconfig.html#Using_Concurrent_Requests for more information.
You probably want to enable concurrent requests.
    at com.google.apphosting.utils.config.AppEngineWebXmlReader.readAppEngineWebXml(AppEngineWebXmlReader.java:79)
    at com.google.appengine.tools.development.AbstractContainerService.loadAppEngineWebXml(AbstractContainerService.java:360)
    at com.google.appengine.tools.development.AbstractContainerService.startup(AbstractContainerService.java:239)
    at com.google.appengine.tools.development.DevAppServerImpl.start(DevAppServerImpl.java:148)
    at com.google.appengine.tools.development.gwt.AppEngineLauncher.start(AppEngineLauncher.java:97)
    at com.google.gwt.dev.DevMode.doStartUpServer(DevMode.java:509)
    at com.google.gwt.dev.DevModeBase.startUp(DevModeBase.java:1093)
    at com.google.gwt.dev.DevModeBase.run(DevModeBase.java:836)
    at com.google.gwt.dev.DevMode.main(DevMode.java:311)
Unable to start embedded HTTP server
com.google.gwt.core.ext.UnableToCompleteException: (see previous log entries)
    at com.google.appengine.tools.development.gwt.AppEngineLauncher.start(AppEngineLauncher.java:102)
    at com.google.gwt.dev.DevMode.doStartUpServer(DevMode.java:509)
    at com.google.gwt.dev.DevModeBase.startUp(DevModeBase.java:1093)
    at com.google.gwt.dev.DevModeBase.run(DevModeBase.java:836)
    at com.google.gwt.dev.DevMode.main(DevMode.java:311)
[ERROR] shell failed in doStartupServer method 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T12:14:15.437

对我来说，这很清楚

```
com.google.apphosting.utils.config.AppEngineConfigException: appengine-web.xml does not contain a <threadsafe> element. 
```

有关更多信息，请参阅[https://developers.google.com/appengine/docs/java/config/appconfig?hl=fr#Using_Concurrent_Requests 。](https://developers.google.com/appengine/docs/java/config/appconfig?hl=fr#Using_Concurrent_Requestsfor)

# matlab - 匹配轴刻度

> ID：11901230
> 
> 赞同：5
> 
> 时间：2012-08-10T12:00:15.327
> 
> 标签：matlab, plot, matlab-figure

我使用“plot3”函数绘制了 3D 数据。我想约束 Y 轴和 Z 轴，使它们的比例相等。X 轴应该像往常一样自动缩放。

我从[这里](http://www.mathworks.co.uk/help/techdoc/ref/axis.html)知道，我可以使用以下命令使 X 轴成为唯一自动缩放的轴：

```
axis 'auto x'; 
```

但是，这会导致 Y 轴和 Z 轴仅从 0 绘制到 1；我的数据在所有轴上经常超过这个。我正在寻找的是一个包含单个视图中的所有数据的图，但 Y 或 Z 轴中最小的一个按比例缩小，以便 Y 轴和 Z 轴在比例上相等。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-10T12:33:03.060

试试`daspect`。

```
plot3(5*rand(10,1),10*rand(10,1),rand(10,1))

tmpAspect=daspect();
daspect(tmpAspect([1 2 2])) 
```

`daspect()`返回轴“自动”产生的当前纵横比。

`daspect(tmpAspect([1 2 2]))`然后强制 y 和 z 具有相同的比例。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-10T13:05:50.250

怎么样

```
axis equal 
```

甚至

```
axis tight
axis equal 
```

在绘制情节*之后。*

你是这个意思吗？

`help axis`在 Matlab 命令提示符下键入该函数的更多功能`axis`。

# symfony - Symfony 2.0 资产转储在调试模式下产生错误的名称

> ID：11901231
> 
> 赞同：5
> 
> 时间：2012-08-10T12:00:17.517
> 
> 标签：symfony, assetic

我正在通过资产（在一个目录中的所有脚本的树枝中阻止）压缩我的 javascript，这在 prod 模式下工作正常。现在我想为我的 prod 环境使用调试模式，所以我在配置中切换资产以调试，清除缓存并转储资产并启用调试。

这适用于一些 javascripts 但不是全部。Symfony 为它们添加了一个后缀编号，该后缀编号在网站（javascript 标记）上比真实文件高（一个）。有时清除缓存并再次转储可以解决问题，但这次没有。

例如：它转储：/web/js/main_part_3_jquery-ui_6.js 但使用：/web/js/main_part_3_jquery-ui_1.js

那么我该如何解决呢？

编辑：清除缓存后，错误的后缀不会出现在对站点的第一个请求中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T12:30:46.860

由于`app/console assetic:dump`对缓存文件是明智的`yml`- 您应该在每次更改配置时清除缓存以转储资产​​。

最重要的是按以下顺序进行：

```
rm -rf app/cache/*
app/console assets:install web
app/console assetic:dump 
```

当然，有调试密钥，需要的环境等等

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-27T10:52:02.487

我有多个生成的资产和 symfony 的类似问题，不包括展出的好资产。

这是因为在我的情况下启用了破坏缓存，并且显然配置错误。（显然，当您需要新版本的文件时，它很有用，例如当您在 dev 中更新 .js 但又不想破坏 prod 时）

所以在 config.yml 中禁用它修复了它。

```
资产：
    工作人员：
        缓存破坏：
            启用：假

```

# java - 通过 JNDI 连接到数据库时 Jboss 中的 NameNotFoundException

> ID：11901239
> 
> 赞同：0
> 
> 时间：2012-08-10T12:01:00.340
> 
> 标签：java, jdbc, jboss, datasource, jndi

我正在使用 JBoss 4.3.0。我正在尝试在服务器中创建一个数据源以连接到 MS SQL 服务器。

我创建了一个文件**myapp-mssql-ds.xml**并将其放在*C:\jboss-4.3.0\server\myapps\deploy*目录中。

以下是该文件的内容：

```
 <datasources>
  <local-tx-datasource>
<jndi-name>jdbc/MyDatasource</jndi-name>
    <connection-url>jdbc:jtds:sqlserver://urlhere</connection-url>

<driver-class>net.sourceforge.jtds.jdbc.Driver</driver-class>
<user-name>myuser</user-name>
<password>mypassword</password>

<min-pool-size>2</min-pool-size>
    <max-pool-size>70</max-pool-size>
    <blocking-timeout-millis>5000</blocking-timeout-millis>
    <idle-timeout-minutes>15</idle-timeout-minutes>

 </local-tx-datasource>
  </datasources> 
```

在Java代码中，我通过以下方式访问它

```
 DataSource dataSource;
     DAOFactory instance = null;

    String url ="jdbc/MyDatasource";
    try {
        dataSource = (DataSource) new InitialContext().lookup(url);
    } catch (NamingException e) {
        throw new DAOConfigurationException(
            "DataSource '" + url + "' is missing in JNDI.", e);
    }

      instance = new DataSourceDAOFactory(dataSource); 
```

最后，我得到了这个例外，

> javax.naming.NameNotFoundException：MyDatasource 未绑定

我错过了什么吗？我是否必须在其他地方进行任何其他条目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T12:32:06.313

JDBC 数据源的 JNDI 名称是相对于`java:/`上下文绑定的（[请参阅此处的文档](http://docs.jboss.org/jbossas/docs/Server_Configuration_Guide/4/html/Connectors_on_JBoss-Configuring_JDBC_DataSources.html)），因此您只需更改`String url = "jdbc/MyDatasource"`为`String url = "java:jdbc/MyDatasource"`.

或者，您可以将数据源配置为将`use-java-context`属性设置为`false`，而无需担心在 JNDI 名称前加上`java:`.

# ios5 - 模拟标准 UIAlertView 按钮的按钮样式

> ID：11901241
> 
> 赞同：1
> 
> 时间：2012-08-10T12:01:06.520
> 
> 标签：ios5

我们需要在`UIAlertView`. 原因是：您可以选择“取消”（关闭警报视图），或者您可以选择“继续”来启动相当长时间的更新过程。因此，这两个按钮被替换为一个“取消”按钮，以便用户能够停止正在运行的进程。

添加标准`UIButton`只是将它们呈现为蓝色边框和白色背景，就像普通视图中的普通按钮一样。但是有没有办法让它们看起来像正常`UIAlertView`提供的按钮（比如深蓝色和非破坏性选择的渐变）？

# sql-server-2008 - sql server 交叉连接

> ID：11901256
> 
> 赞同：0
> 
> 时间：2012-08-10T12:01:54.140
> 
> 标签：sql-server-2008

我有以下查询：

```
select 
    tt.ItemOrder, tt.DisplayVal as Task, tt.Responsible as ResParty, 
    tt.DaysDue,  
    ActualDate = (select convert(varchar(10), cnfmdate, 101) from ProSer where PId = @PID), PDate = @PDate 
from 
    tblTimeline tt
where
    tt.ID = 1 
```

我需要做的是把它放在一个视图中，这样我就可以简单地使用 PID 来调用视图。我想出了以下内容并使用了交叉连接：

```
create view view1 as
    select 
        ps.PID, tt.ID, tt.ItemOrder, tt.DisplayVal as Task, 
        tt.Responsible as ResParty, tt.DaysDue,  
        ps.cnfmdate As ActualDate, ProgStartDate as ProgramDate  
    from 
        tblTimeline tt 
   cross join 
        ProSer ps
   where 
        tt.ID = 1 and ps.cancelled = 0 
```

现在注意，我可以执行以下操作

```
select * 
from view1 
where PID = '34343' 
```

然后我可以从视图中检索它。

现在，我不确定如何对以下内容进行类似操作，在这种情况下，我需要将其放入交叉连接中，类似于我上面的操作。

请注意实际日期是如何更复杂的。我需要像上面那样使用交叉表，但不是如您所见，它涉及更多。

（注意这部分，我将简单地加入我上面与 UNION 的 view1

```
select 
    tt.ItemOrder, tt.DisplayVal as Task, tt.Responsible as ResParty, 
    ActualDate = (
          CASE
          WHEN
             NOT EXISTS(SELECT * FROM Spls WHERE RequestRcvd = 1 AND PID = @PID)
          THEN 
             'N/A'       
          WHEN EXISTS (SELECT * FROM spls WHERE RequestRcvd = 1 AND RequestRcvdDate IS NOT NULL)
          THEN
             (SELECT CONVERT(VARCHAR(10),MAX(RequestRcvdDate),101) from spls WHERE RequestRcvd = 1 AND PID = @PID)   
          END
          )   
from 
    tblTimeline tt
where 
    tt.ID = 9 
```

我需要知道如何在交叉连接中创建它（这将在视图内部），这样我就可以像执行上述操作一样执行以下操作

```
select * 
from view1 
where PID = '34343' 
```

然后我可以从视图中检索它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T13:53:17.350

可能有一种方法可以简化查询，但以下应该有效：

```
select p.pid, tt.ItemOrder, tt.DisplayVal as Task,
       tt.Responsible as ResParty,
       ActualDate = (CASE WHEN NOT EXISTS(SELECT * FROM Spls WHERE RequestRcvd = 1 AND spls.PID = p.PID) 
                          THEN 'N/A'
                          WHEN EXISTS (SELECT * FROM spls WHERE RequestRcvd = 1 AND RequestRcvdDate IS NOT NULL)
                          THEN (SELECT CONVERT(VARCHAR(10),MAX(RequestRcvdDate),101) from spls WHERE RequestRcvd = 1 AND spls.PID = p.PID)
                     END)
from tblTimeline tt cross join
     poser p
where tt.ID = 9 
```

我所做的只是将交叉连接添加到 poser 并用 p.pid 替换 @PID。结果是一个子查询，其中包含对外部级别表的引用。这样的子查询称为相关子查询。

# memory - 在 32 位进程中如何引用 64 位变量？

> ID：11901259
> 
> 赞同：0
> 
> 时间：2012-08-10T12:02:09.507
> 
> 标签：memory, kernel, x86-64, 32bit-64bit

我有一个 64 位内核，我在用户区运行 32 位进程。在用户进程代码中，如果我声明一个 64 位变量，它将如何被引用。它会导致 2 次内存读取吗？基本上情况是：我需要在我的用户进程中使用 64 位掩码。方法 1：-> 使用 u64bits 变量。方法 -> 使用 2 个 32 位变量的数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T20:09:21.890

首先：内核与这个问题的答案无关。

其次，我假设这是您正在谈论的 x86。在可能的情况下，编译器会将 64 位值放置在 2 个 32 位寄存器中。例如，如果您`uint64_t`从函数返回 a，则低 32 位将存储在`eax`寄存器中，而高位将存储在`edx`.

编译器通常会为性能和正确性做正确的事情：使用数组可能只会混淆它并导致更糟糕的结果。

顺便说一句，x86-64 CPU 通常会以与单个 64 位读取相同的速度执行 2 个相邻 32 位字的读取。64 位模式的优点是可以直接对 64 位值进行*算术运算*（1 个 64x64 乘法指令 vs 3-4 个 32x32 指令），寄存器中有更多可用空间（16 个寄存器而不是 8 个，寄存器是两倍一样宽），当然还有更大的虚拟地址空间。

# asp.net-mvc - 使用 IReportRepository 在 MVC 中报告

> ID：11901262
> 
> 赞同：0
> 
> 时间：2012-08-10T12:02:26.753
> 
> 标签：asp.net-mvc, model-view-controller

我正在使用现有系统，需要通过存储过程添加报告。我只是想先解决一些错误。

在 IReportingRepository.cs 我有：

```
 public interface IReportingRepository
 {
     IEnumerable<LastSundayDate<DateTime>> GetTradeMeKPISearches();
 } 
```

第一个错误在 LastSundayDate> 部分上方的行上，并说：非泛型类型“TradeUK.Entities.Reporting.LastSundayDate”不能与类型参数一起使用

我有一堂课 LastSundayDate.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace TradeUK.Entities.Reporting
{
    public class LastSundayDate
    {
       public virtual DateTime Date { get; set; }
    }
} 
```

在 ReportingServies.cs 我有：

```
public IEnumerable<LastSundayDate> GetTradeUKKPISearches()
{
  return ReportingRepository.GetTradeUKKPISearches();
} 
```

然后在 ReportingRepository.cs 我有：

```
 public IEnumerable<LastSundayDate<DateTime>> GetTradeMeKPISearches()
{
  try
  {
    using (SqlConnection conn = new SqlConnection(TradeUKModelContainer.CONNECTIONSTRING))
    {
      conn.Open();

      using (SqlCommand cmd = conn.CreateCommand())
      {
        cmd.CommandType = System.Data.CommandType.StoredProcedure;
        cmd.CommandText = "[Reporting].[GetTradeMEKPISearches]";

        using (SqlDataAdapter da = new SqlDataAdapter(cmd))
        {
          DataTable dt = new DataTable();
          da.Fill(dt);

          List<LastSundayDate<DateTime>> results = new List<LastSundayDate<DateTime>>();

          foreach (DataRow dr in dt.Rows)
          {
            string title = dr["Title"].ToString();
            int count = Convert.ToInt32(dr["Total"]);

            results.Add(new LastSundayDate<>());
          }

        }
      }
    }
  }
  catch (Exception ex)
  {
    throw new Exception("ReportingRepository GetTradeUKKPISearches: Error", ex);
  }
} 
```

为什么我不能将类型设置为 DateTime？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T12:07:04.923

你的班

```
public class LastSundayDate
{
   public virtual DateTime Date { get; set; }
} 
```

不是通用的，因此您不能将其用作`LastSundayDate<DateTime>`.

你为什么不写

```
public interface IReportingRepository
{
    IEnumerable<LastSundayDate> GetTradeMeKPISearches();
} 
```

# c# - 将 LINQ 查询结果用于 GridControl c# 的数据源

> ID：11901264
> 
> 赞同：2
> 
> 时间：2012-08-10T12:02:38.360
> 
> 标签：c#, linq, datagrid

我在静态类中有这样的函数

```
public static IEnumerable<MyObject> getFilteredList(int docType)
{
    var fItems = from i in list
                 where i.DocType == docType
                 select i;

    return fItems;
} 
```

当我以这样的形式将这个返回的列表用于我的网格的数据源时，例如：

```
GridControl.DataSource = staticClass.getFilteredList(10) 
```

Grids`DataSource`属性为空。你能解释一下为什么会这样吗？

编辑：列表变量是列表，其中包含 DocType = 10 的元素。项目包含元素。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T12:09:11.590

你应该使用

```
GridControl.DataSource = staticClass.getFilteredList(10).ToList(); 
```

创建一个新`List`实例以绑定到您的网格。

另一种方法是使用 a [`BindingList`](http://msdn.microsoft.com/en-us/library/ms132679.aspx)，它完全支持数据绑定并为您提供有用的事件，例如[`ListChanged`](http://msdn.microsoft.com/en-us/library/ms132742.aspx)and [`AddingNew`](http://msdn.microsoft.com/en-us/library/ms132741.aspx)。

```
var list = new BindingList(staticClass.getFilteredList(10).ToList());

GridControl.DataSource = list; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T12:09:03.053

尝试

```
GridControl.DataSource = staticClass.getFilteredList(10).ToList(); 
```

因为 DataSource 必须继承自 IList

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-10T12:10:00.823

你可以试试 ToList()

```
GridControl.DataSource = staticClass.getFilteredList(10).ToList();
GridControl.DataBind(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T12:07:22.867

```
public static IEnumerable<MyObject> getFilteredList(int docType)
    {
        var fItems = from i in list
                     where i.DocType.docTypeId == docType
                     select i;

        return fItems;
    } 
```

如果我错了，请纠正我，但现在似乎您正在将 int 与 DocType 类进行比较。如果不是这种情况，那么您的查询可能只是返回一个空集，因为它找不到任何匹配的内容。

# php - Codeigniter URI：创建默认控制器函数

> ID：11901268
> 
> 赞同：0
> 
> 时间：2012-08-10T12:02:46.603
> 
> 标签：php, codeigniter, codeigniter-2, codeigniter-routing

我的控制器中有以下类（codeigniter）

```
class Books extends CI_Controller {

    function index($id = NULL){

       //model
       //view
    }

} 
```

我的视图文件中有这个链接

```
<a href="<? echo base_url();">/books/index/<? echo $id ;?>  > Book1</a> 
```

当我点击上面的链接时，地址栏中的 URL 看起来像 >

```
 http://localhost/my_web/books/index/1 
```

但我试图使 URL 看起来像 -

```
 http://localhost/my_web/books/1 
```

因此，在学习了本[教程](http://codeigniter.com/user_guide/general/routing.html)之后，在我的 application/config/routes.php 中，我使用了以下代码。

```
$route['books/:num'] = "books/index"; 
```

然后我将链接更改为以下代码，但是当我单击它时，页面显示`404 Page not found`

```
 <a href="<? echo base_url();">/books/<? echo $id ;?>  > Book1</a> 
```

你能告诉我如何实现这一目标吗？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T12:06:02.370

您在路线中缺少参数，请尝试：

```
$route['books/(:num)'] = "books/index/$1"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-29T19:52:12.850

在 Route 中设置 application/config/route.php

```
$route['books/(:any)'] = "books/index/$1"; 
```

它绝对适合您的路线。

# c++ - 单词分割算法

> ID：11901272
> 
> 赞同：4
> 
> 时间：2012-08-10T12:03:08.970
> 
> 标签：c++, algorithm, embedded

我为嵌入式平台开发软件，需要一个单词划分算法。

问题如下：给定一个由 32 位字序列表示的大整数（可以是多个），我们需要将它除以另一个 32 位字，即计算商（也是大整数）和余数 ( 32 位）。

当然，如果我在 x86 上开发这个算法，我可以简单地使用 GNU MP，但是这个库对于嵌入式平台来说太大了。此外，我们的处理器没有硬件整数除法器（整数除法在软件中执行）。然而，处理器具有相当快的 FPU，因此诀窍是尽可能使用浮点运算。

任何想法如何实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T16:48:31.527

看一下这个：该算法使用浮点将整数 a[0..n-1] 除以单个单词 'c' 进行 64x32->32 除法。商 'q' 的四肢只是打印在一个循环中，如果你愿意，你可以将其保存在一个数组中。请注意，您不需要 GMP 来运行算法 - 我只是用它来比较结果。

```
#include <gmp.h>

// divides a multi-precision integer a[0..n-1] by a single word c
void div_by_limb(const unsigned *a, unsigned n, unsigned c) {

  typedef unsigned long long uint64;
  unsigned c_norm = c, sh = 0;
  while((c_norm & 0xC0000000) == 0) { // make sure the 2 MSB are set
     c_norm <<= 1; sh++;
  }
  // precompute the inverse of 'c'
   double inv1 = 1.0 / (double)c_norm, inv2 = 1.0 / (double)c;
   unsigned i, r = 0;

   printf("\nquotient: "); // quotient is printed in a loop
   for(i = n - 1; (int)i >= 0; i--) { // start from the most significant digit
      unsigned u1 = r, u0 = a[i];
      union {
        struct { unsigned u0, u1; };
        uint64 x;
      } s = {u0, u1}; // treat [u1, u0] as 64-bit int
      // divide a 2-word number [u1, u0] by 'c_norm' using floating-point
      unsigned q = floor((double)s.x * inv1), q2;
      r = u0 - q * c_norm;
      // divide again: this time by 'c'
      q2 = floor((double)r * inv2);

      q = (q << sh) + q2; // reconstruct the quotient
      printf("%x", q);
  }

  r %= c; // adjust the residue after normalization
  printf("; residue: %x\n", r);
}

int main() {
  mpz_t z, quo, rem;
  mpz_init(z); // this is a dividend
  mpz_set_str(z, "9999999999999999999999999999999", 10);
  unsigned div = 9; // this is a divisor
  div_by_limb((unsigned *)z->_mp_d, mpz_size(z), div);
  mpz_init(quo); mpz_init(rem);
  mpz_tdiv_qr_ui(quo, rem, z, div); // divide 'z' by 'div'
  gmp_printf("compare: Quo: %Zx; Rem %Zx\n", quo, rem);
  mpz_clear(quo);
  mpz_clear(rem);
  mpz_clear(z);
  return 1;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T14:11:18.740

听起来像是经典的优化。而不是除以`D`，乘以`0x100000000/D`然后除以`0x100000000`。后者只是一个字移，即微不足道。计算乘数有点困难，但不是很多。

另请参阅[这篇详细的文章](http://homepage.cs.uiowa.edu/~jones/bcd/divide.html)以获取更详细的背景信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T21:07:45.343

我相信查找表和[Newton Raphson](http://en.wikipedia.org/wiki/Newton%27s_method)逐次逼近是硬件设计人员使用的规范选择（他们通常买不起完整的硬件划分的大门）。您可以在准确性和执行时间之间进行权衡。

# python - 如何使用 Python 中的 boto 库在 Amazon SQS 中获取消息接收计数？

> ID：11901273
> 
> 赞同：8
> 
> 时间：2012-08-10T12:03:09.110
> 
> 标签：python, boto, amazon-sqs

我在 Python 中使用 boto 库来获取 Amazon SQS 消息。在特殊情况下，我不会从队列中删除消息，以便进行更多更改以恢复临时故障。但我不想不断收到失败的消息。我想做的是在收到超过 3 次后删除消息，或者如果接收计数超过 3 则不收到消息。

最优雅的做法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-11T09:07:11.740

There are at least a couple of ways of doing this.

When you read a message in boto, you receive a Message object or some subclass thereof. The Message object has an "attributes" field that is a dict containing all message attributes known by SQS. One of the things SQS tracks is the approximate # of times the message has been read. So, you could use this value to determine whether the message should be deleted or not but you would have to be comfortable with the "approximate" nature of the value.

Alternatively, you could record message ID's in some sort of database and increment a count field in the database each time you read the message. This could be done in a simple Python dict if the messages are always being read within a single process or it could be done in something like SimpleDB if you need to record readings across processes.

Hope that helps.

Here's some example code:

```
>>> import boto.sqs
>>> c = boto.sqs.connect_to_region()
>>> q = c.lookup('myqueue')
>>> messages = c.receive_message(q, num_messages=1, attributes='All')
>>> messages[0].attributes
{u'ApproximateFirstReceiveTimestamp': u'1365474374620',
 u'ApproximateReceiveCount': u'2',
 u'SenderId': u'419278470775',
 u'SentTimestamp': u'1365474360357'}
>>> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-19T10:14:01.227

其他方式可能是您可以在 SQS 队列中的消息末尾放置一个额外的标识符。这个标识符可以保持消息被阅读的次数的计数。

此外，如果您希望您的服务不应该一次又一次地轮询这些消息，那么您可以再创建一个队列，例如“死消息队列”，然后可以将超过阈值的消息传输到该队列。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-05-06T18:24:48.070

aws 对此具有内置支持，只需按照以下步骤操作：

1.  创建死信队列
2.  通过选中“使用重新驱动策略”为源队列启用重新驱动策略
3.  选择您在步骤#1 中为“死信队列”创建的死信队列
4.  将“最大接收数”设置为“3”或 1 到 1000 之间的任何值

它的工作原理是，每当工作人员收到消息时，接收计数就会增加。一旦达到“最大接收”计数，消息就会被推送到死信队列。请注意，即使您通过 aws 控制台访问消息，接收计数也会增加。

[使用 Amazon SQS 死信队列的](http://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/SQSDeadLetterQueue.html)来源

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-04-27T17:46:44.273

从您阅读的消息中获取 ApproximateReceiveCount 属性。将其移动到另一个队列（而不是您可以管理错误消息）或将其删除。

```
foreach (var message in response.Messages){
       try{
           var notifyMessage = JsonConvert.DeserializeObject<NotificationMessage>(message.Body);
                    Global.Sqs.DeleteMessageFromQ(message.ReceiptHandle);
           }
       catch (Exception ex){
           var  receiveMessageCount = int.Parse(message.Attributes["ApproximateReceiveCount"]);
           if (receiveMessageCount >3 ) 
              Global.Sqs.DeleteMessageFromQ(message.ReceiptHandle);
            }
        } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-14T20:57:36.017

应该分几步完成。

1.  创建 SQS 连接：- sqsconnrec = SQSConnection(AWS_ACCESS_KEY_ID, AWS_SECRET_ACCESS_KEY)
2.  创建队列对象：- request_q = sqsconnrec.create_queue("queue_Name")
3.  加载队列消息：-messages=request_q.get_messages()
4.  现在你得到消息对象的数组并找到消息的总数：- 只需执行 len(messages)

应该像魅力一样工作。

# regex - 用于识别负值和非负值的正则表达式

> ID：11901277
> 
> 赞同：0
> 
> 时间：2012-08-10T12:03:22.300
> 
> 标签：regex

识别负值和非负值的适当正则表达式是什么？

像这样的东西：

```
#define DECIMAL_NUMBER_REGEX @"[1-9][0-9]*|0" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T12:07:54.623

不知道为什么这被标记为“iOS”，但识别非负整数的正则表达式可能是

```
\+?0|[1-9][0-9]* 
```

对于负整数：

```
\-[1-9][0-9]* 
```

（假设`-0`被视为非负数）

如果你特别想为 iOS 开发创建正则表达式，你可以使用 NSRegularExpression 类：

```
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"\\+?0|[1-9][0-9]*" options:0 error:NULL]; 
```

# c# - 为新的 MVC 应用程序使用“默认”登录系统

> ID：11901284
> 
> 赞同：3
> 
> 时间：2012-08-10T12:03:59.973
> 
> 标签：c#, asp.net, asp.net-mvc

我刚刚创建了我的第一个 ASP.NET MVC 应用程序。由于我没有选择创建一个空项目，Visual Studio 为我生成了一些视图，包括一个注册用户页面。

但是我需要创建哪些表才能使用注册/登录功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T12:09:19.397

使用该`aspnet_regsql.exe`工具创建您的会员数据库。

[http://msdn.microsoft.com/en-us/library/ms229862(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms229862(v=vs.80).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T12:10:14.787

您实际上根本不需要创建任何用户表。尝试注册，您会发现第一次注册需要一点时间才能完成操作。这是因为正在为您创建 ASP.NET Membership 表结构。

但是，在 Visual Studio 中，您可以转到 Project->ASP.NET 配置，这将为您打开一个浏览器窗口，使您能够更轻松地配置帐户。

如果您想将 ASP.NET Membership 表添加到您自己的数据库中，这允许您添加与默认成员资格相关并扩展其功能的自定义表，您可以按照[此答案](https://stackoverflow.com/a/3861834/729541)中的步骤进行操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T12:07:19.947

您必须使用 ASP.NET Web 管理工具。此处为您提供官方说明，包括有关您的用户/密码的数据库的信息。

[http://www.asp.net/guided-tour/s27.aspx](http://www.asp.net/guided-tour/s27.aspx)

# php - PHP中的选择条件

> ID：11901290
> 
> 赞同：-2
> 
> 时间：2012-08-10T12:04:11.760
> 
> 标签：php, mysql

**page1.php**

```
 echo '<form action="page2.php" name="myform"><table>
        <tr><td>name:<input type="text" name="n"></td></tr>
        <tr><td>Choose Desc<select name="desc" value="0">
                  $descriptions = mysql_query('SELECT desc FROM desc_table');
                  while($row=mysql_fetch_array($descriptions))
                  {
                     $des = $row['desc'];
                     echo '<option>'.$des.'</option>';
                  }
                  </select>
       </td></tr>';
          <tr><td>Description:<textarea rows="10" cols="10" name="desc" value="1"></textarea></td>  </tr>     
 <tr><td><input type="submit" value="submit"></td></tr>
 </table>
  </form>'; 
```

**Page2.php**

```
 $n = $_POST['n'];
 $desc = $_POST['desc'];
 $sql = "INSERT INTO new (name,desc)
                VALUES ($n,$desc)";
 mysql_query($sql); 
```

我需要通过选择描述或在文本区域中输入描述来存储任一描述，但只有一个描述应该存储到数据库中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T12:07:47.730

您的表格严重混乱：

```
<form name="myform">
    <table>
        <tr>
            <td>name:<input type="text" name="n"></td>
        </tr>
        <tr>
            <td>Choose Desc
                <select name="desc" value="0">
                  <?php
                  $descriptions = mysql_query('SELECT desc FROM desc_table');
                  while($row=mysql_fetch_array($descriptions))
                  {
                     $des = $row['desc'];
                     echo '<option>'.$des.'</option>';
                  }
                  ?>
                  </select>
            </td>
        </tr>';
        <tr>
            <td>Description:<textarea rows="10" cols="10" name="desc" value="1"></textarea></td>
        </tr>     
        <tr><td><input type="submit" value="submit"></td></tr>
    </table>
</form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T12:25:08.880

![在此处输入图像描述](../Images/3ba6c4fc27c69557ccbc848873b0d9e5.png)改成这样：

```
$n = $_REQUEST['n'];
$desc = $_REQUEST['desc'];
$sql = "INSERT INTO new (name,desc)
            VALUES ("$n","$desc")";
mysql_query($sql); 
```

并为您的标签添加一个方法

```
<FORM action="resultscript.php" method="POST"></FORM> 
```

然后再试一次 ;-）

顺便说一句：如果您放入 SQL 中的变量可能包含字符串，则需要将它们放在双引号 (") 中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T12:08:20.583

您到处都缺少引号，并且您似乎错过了开始和结束 PHP 代码：

```
echo '<form name="myform">
    <table>
        <tr><td>name:<input type="text" name="n"></td></tr>
        <tr><td>Choose Desc
        <select name="desc" value="0">';

$descriptions = mysql_query('SELECT desc FROM desc_table');
    while($row=mysql_fetch_array($descriptions))
    {
        $des = $row['desc'];
        echo '<option>'.$des.'</option>';
    }
    echo '
            </select>
        </td></tr>
        <tr><td>Description:<textarea rows="10" cols="10" name="desc" value="1"></textarea></td></tr>     
        <tr><td><input type="submit" value="submit"></td></tr>
    </table>
    </form>'; 
```

# php - 将图像大小调整脚本展开为 .PNG 和 .GIF

> ID：11901302
> 
> 赞同：0
> 
> 时间：2012-08-10T12:05:12.900
> 
> 标签：php, image, resize, gif

我有一个脚本可以完美地调整 .JPG 图像的大小，它完全可以做到它应该做的事情。但是，我想为用户提供同时添加 .PNG 和 .GIF 图像的选项。有人可以帮我扩展以下脚本，使其也支持这些格式吗？提前致谢！

```
$image = $_POST['bedrijfslogo'];
$new_image = "../subdomains/{$gemeente7}/httpdocs/{$plaatsnaam7}/{$bedrijfsnaam7}/bedrijfslogo.jpg";
copy($_POST['bedrijfslogo'],"copylogo.jpg");
$width=250; //*** Fix Width & Heigh (Autu caculate) ***//
$size=GetimageSize($image);
$height=round($width*$size[1]/$size[0]);
$images_orig = ImageCreateFromJPEG($image);
$photoX = ImagesX($images_orig);
$photoY = ImagesY($images_orig);
$images_fin = ImageCreateTrueColor($width, $height);
ImageCopyResampled($images_fin, $images_orig, 0, 0, 0, 0, $width+1, $height+1, $photoX, $photoY);
ImageJPEG($images_fin, $new_image);
ImageDestroy($images_orig);
ImageDestroy($images_fin);
unlink($image); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T12:37:54.023

根据我的评论，我意识到您可以从返回的数据中提取图像的类型`getimagesize()`。

试试这个，它应该接受您的 PHP 实例能够理解的任何类型的图像（*未经测试*）：

```
// Get file paths
// Taking a local file path direct from the user? This is a *big* security risk...
$srcPath = $_POST['bedrijfslogo'];
$dstPath = "../subdomains/{$gemeente7}/httpdocs/{$plaatsnaam7}/{$bedrijfsnaam7}/bedrijfslogo.jpg";

// Not really sure why this is here, you don't seem to use the copy of the file
copy($srcPath, "copylogo.jpg");

// Get information about source image
$info = getimagesize($srcPath);
$srcWidth = $info[0];
$srcHeight = $info[1];
$srcType = $info[2];

// Calculate new width and height
// Width is fixed, height calculated from width
$dstWidth = 250;
$dstHeight = round($dstWidth * $srcHeight / $srcWidth);

// Get the image types supported by this instance of PHP
$supportedTypes = imagetypes();

// Create the source image resource based on it's type
switch ($srcType) {
  case IMG_GIF:
    if ($supportedTypes & IMG_GIF) {
      $srcImage = imagecreatefromgif($srcPath);
    } else {
      // GIF support not enabled on your PHP instance. Handle error here.
      exit('GIF support not enabled on this PHP instance');
    }
    break;
  case IMG_JPG: case IMG_JPEG: // Think these might have the same value?
    if ($supportedTypes & IMG_JPG) {
      $srcImage = imagecreatefromjpeg($srcPath);
    } else {
      // JPEG support not enabled on your PHP instance. Handle error here.
      exit('JPEG support not enabled on this PHP instance');
    }
    break;
  case IMG_PNG:
    if ($supportedTypes & IMG_PNG) {
      $srcImage = imagecreatefrompng($srcPath);
    } else {
      // PNG support not enabled on your PHP instance. Handle error here.
      exit('PNG support not enabled on this PHP instance');
    }
    break;
  case IMG_WBMP:
    if ($supportedTypes & IMG_WBMP) {
      $srcImage = imagecreatefromwbmp($srcPath);
    } else {
      // WBMP support not enabled on your PHP instance. Handle error here.
      exit('WBMP support not enabled on this PHP instance');
    }
    break;
  case IMG_XPM:
    if ($supportedTypes & IMG_XPM) {
      $srcImage = imagecreatefromxpm($srcPath);
    } else {
      // XPM support not enabled on your PHP instance. Handle error here.
      exit('XPM support not enabled on this PHP instance');
    }
    break;
  default:
    // Unknown input file type. Handle error here. Currently prints some debugging info
    echo 'Unknown input file type';
    var_dump($info);
    exit;
}

// Create the destination image resource
$dstImage = imagecreatetruecolor($dstWidth, $dstHeight);

// Resample source image onto destination image
imagecopyresampled($dstImage, $srcImage, 0, 0, 0, 0, $dstWidth + 1, $dstHeight + 1, $srcWidth, $srcHeight);

// Save new image to disk
imagejpeg($dstImage, $dstPath);

// Destroy resources
imagedestroy($srcImage);
imagedestroy($dstImage);
$srcImage = $dstImage = NULL;

// Remove source image - are you sure you want to do this?
unlink($srcPath); 
```

现在，这段代码似乎是为处理本地源图像而设计的，但您使用它的方式表明您可能会从用户那里获取 URL 并下载远程图像。如果是这种情况，请告诉我，我会稍微修改一下以更好地适应该目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T13:55:33.310

变化的是，

```
$images_orig = ImageCreateFromJPEG($image); //for jpg 
```

你可以***[在这里查看](http://us3.php.net/manual-lookup.php?pattern=imageCreateFrom&lang=en&scope=404quickref)***文档

您还可以查看ImageMagick 与 GD和PHP**[之间的一些比较](http://www.rubblewebs.co.uk/imagemagick/compair.php)****[： ImageMagick - Manual](http://php.net/manual/en/book.imagick.php)**。

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T12:20:40.193

根据您想要的输出文件类型，添加并选择：

```
imagecreatefrompng 
```

和

```
 imagecreatefromgif 
```

和

```
 imagepng 
```

和

```
 imagegif 
```

# arrays - cakephp 不能将字符串偏移量用作数组

> ID：11901309
> 
> 赞同：1
> 
> 时间：2012-08-10T12:05:38.837
> 
> 标签：arrays, cakephp, view

大家好，在我看来，我在尝试打印数组中的信息时遇到了这个错误。

这是我在控制器中的功能

```
public function view($name)
$fields = $this->Template->Field->find('list',array( 
          'fields'=> array('name'),
          'conditions' => array(
          'template_id'=> $name)));
$this->set('field', $fields); 
```

这是视图

```
</br><h2>Here is your template fields</h2></br>

            <?php if(!empty($field))
                  {
                    foreach($field as $name)
                    {?>
                        <tr>
                        <td>
                        <?php echo $name['Field']['name']; ?>
                        </tr></br>
                        <?php
            }
            }
            else
            {?>
             <tr> <td>No Templates Found.</td></tr>
             <?php 
             }?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T12:31:45.360

因为我已经回答了你的一些问题。所以我对你的项目的理解是“模板有很多字段”，你已经在相应的模型中定义了一个关联船。

您应该在视图中使用以下代码：

```
<?php if(!empty($field))
              {
                foreach($field as $name)
                {?>
                    <tr>
                    <td>
                    <?php echo $name; ?>
                    </td>
                    </tr>
                    <?php
        }
        }
        else
        {?>
         <tr> <td>No Template Fields Found.</td></tr>
         <?php 
         }?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T12:35:57.700

您对类型列表进行了操作，因此结果将是 [field.id] => [field.name] 中的数组

那么您将需要以下视图

```
<?php foreach($field as $name): ?>
<?= $name ?>
<?php endforeach ?> 
```

# c - c中的多维数组

> ID：11901310
> 
> 赞同：1
> 
> 时间：2012-08-10T12:05:40.563
> 
> 标签：c, multidimensional-array

请解释第一个和最后一个`printf`语句的输出。我认为他们应该给出相同的输出。

```
int main()
{
   char arr[5][7][6];
   char (*p)[5][7][6] = &arr;

   printf("%d\n", (&arr + 1) - &arr);
   printf("%d\n", (char *)(&arr + 1) - (char *)&arr);
   printf("%d\n", (unsigned)(arr + 1) - (unsigned)arr);
   printf("%d\n", (unsigned)(p + 1) - (unsigned)p);

   return 0;
} 
```

输出：

```
1
210
42
210 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T14:22:43.487

让我们先看看内存布局：

`char arr[5][7][6];`这`arr`是一个数组数组。

它将被布置到内存中，如下所示：

```
+--------------+ 
|              | arr[0]
+--------------+
|              | arr[1]
+--------------+
|              | arr[2]
+--------------+
|              | arr[3]
+--------------+

etc. 
```

现在`arr[i]`是一个数组的数组`char`。

所以`a[i]`会像

```
+--------------+  a[i][0]
|              |
+--------------+
|              |  a[i][1]
+--------------+
|              |  a[i][2]
+--------------+
|              |  a[i][3]
+--------------+

etc 
```

现在`arr[i][j]`是一个数组`chars`。

所以

```
+--------------+ 
|              | arr[i][j][0]
+--------------+
|              | arr[i][j][1]
+--------------+ 
|              | arr[i][j][2]
+--------------+

etc. 
```

编译器将在其符号表中使用名称`arr`和第一个块的地址创建一个条目，并跟踪总大小（5*6*7 = 210 字节）。

现在的表达

```
printf("%d\n", (&arr + 1) - &arr); 
```

它是一个指针算法。所以它将绑定到每个符号的类型。

让我们看看这个在行动。

```
(gdb) p &arr
$1 = (char (*)[5][7][6]) 0x7fffffffe160 
```

你看的类型`arr`是指针`char (*)[5][6][7]`

换句话说，它指向数组数组的数组。指针算术实际上与指针指向的类型有关。所以重要的是类型的大小。

```
(gdb) p sizeof(char [5][7][6])
$2 = 210 
```

因此，任何指向该类型的指针`char [5][6][7]`都将递增或递减，如下所示：

`&arr+1 => 0x7fffffffe160 +0xd2 => 0x7fffffffe232`

和`(&arr + 1) - &arr => 0x7fffffffe232 - 0x7fffffffe160=> 0xd2`

现在它实际上返回**0xd2**。但对于指针算术，这意味着`1*sizeof(char [5][7][6]) => 1`

指针算术返回`number of sizeof(type)`而不是实际的字节偏移量。

你得到正确的结果

```
printf("%d\n", (char *)(&arr + 1) - (char *)&arr); 
```

由于强制转换，您将其设为 char 指针。所以指针运算将使用`sizeof(char)`1 字节大小的单位。因此输出将是 210。

`printf("%d\n", (unsigned)(arr + 1) - (unsigned)arr);`

这里`arr`的表达式将衰减为类型`char (*)[7][6]`所以它是一个指向二维数组的指针。它指向的类型的大小为 6*7 = 42。这就是你得到的结果。

printf("%d\n", (unsigned)(p + 1) - (unsigned)p);

在这里，`p+1 - p`将导致指针算术`1 * sizeof(char(*)[5][6][7])`。所以在指针算术中，它应该返回 1。但是由于您将结果转换为 unsigned ，它将放弃指针算术并使用整数算术。因为使用整数运算，它会处理大数的指针值，所以你会得到实际的字节偏移量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T12:09:33.477

如果它们被视为指针，它们将打印相同的结果，但最后`printf`你通过强制转换强制它们被视为无符号整数。因此，`p + 1`和`p`被减去以下整数算术规则，而不是指针算术规则。

### 编辑

为了让事情更清楚一点：

*   当您减去 2 个指针时，结果是它们之间的元素数。在您的情况下，它们之间有 1 个元素
*   当您将指针投射到`unsigned`您告诉编译器“这些只是普通数字，这里什么都看不到”时。因此编译器将地址视为数字并减去它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T12:13:39.057

先取地址`arr`加一，再减去地址，结果明明是1。

不过，最后一个`p`是指向 的指针`char [5][7][7]`，并且 using`(*p)[x][y][z]`可以是 as `p[0][x][y][z]`。所以`(p + 1)`可以认为是`p[1]`，距离 210( `5 * 7 * 6`) 个字节`p`。

如果你这样做了`(((unsigned) p) + 1) - ((unsigned) p)`，那就是`1`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T12:14:25.603

地址之间的距离是 1 个元素或 210 个字节

第一个打印打印元素的数量最后一个 - 字节数

# spring - Spring DefaultAdvisorAutoProxyCreator 与 @Transactional 导致问题

> ID：11901311
> 
> 赞同：3
> 
> 时间：2012-08-10T12:05:43.727
> 
> 标签：spring, aop, shiro

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T12:42:32.820

这通常是因为当您将 @Transactional 放在一个方法上时，Spring 会为该 bean 创建一个动态代理 - 如果 bean 实现了一个接口，则基于该接口创建动态代理，否则 CGLIB 将用于创建代理。

我猜你的问题是因为你的控制器可能基于某个接口，或者你正在基于基类扩展它。这最终会基于该接口创建一个代理，因为当需要为您的请求创建映射时，Spring MVC 可能无法从您的 bean 中找到您的映射。

修复可能有几个：

一种。您可以尝试强制代理基于 CGLIB 进行交易：

```
<tx:annotation-driven transaction-manager="transactionManager" proxy-target-class="true"/> 
```

湾。您可以使用纯 Aspectj，加载时编织或编译时编织

C。您可以将@Transactional 移动到服务（具有接口）中并将调用从控制器委托给服务，这样可以避免控制器上的@Transaction

# struts2 - 使用拦截器时，Struts2 参数在动作类中为空

> ID：11901312
> 
> 赞同：3
> 
> 时间：2012-08-10T12:05:44.737
> 
> 标签：struts2, null, action, interceptor, interceptorstack

当我使用拦截器时，Action 类的值为 null。我已经删除了拦截器，这些值来自 JSP 页面。

**登录.jsp**

```
 <s:form id="loginFrm" name="loginFrm" action="LoginAction">  
            <s:textfield key="username"/>  
            <s:password key="password"/>  
            <s:submit/>  
    </s:form> 
```

**登录操作.java**

```
public class LoginAction {  

    private static Logger LOGGER = Logger.getLogger(LoginAction.class);  

    private String username;  
    private String password;  

    public String execute() throws Exception {  
        LOGGER.info("LoginAction : authenticate()");  
        LOGGER.info("LoginAction : {[" + username + "],["+password+ "]}");  
        return "success";  
    }  

    public String getUsername() {  
        return username;  
    }  

    public void setUsername(String username) {  
        this.username = username;  
    }  

    public String getPassword() {  
        return password;  
    }  

    public void setPassword(String password) {  
        this.password = password;  
    }  
} 
```

**web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>  
<web-app id="WebApp_9" version="2.4" xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">  
    <display-name>Bulk Fund Switching</display-name>  
    <context-param>  
        <param-name> org.apache.tiles.impl.BasicTilesContainer.DEFINITIONS_CONFIG </param-name>  
        <param-value>/WEB-INF/tiles.xml</param-value>  
    </context-param>  
    <listener>  
        <listener-class>org.apache.struts2.tiles.StrutsTilesListener </listener-class>  
    </listener>  
    <filter>  
        <filter-name>struts2</filter-name>  
        <filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class>  
    </filter>  
    <filter-mapping>  
        <filter-name>struts2</filter-name>  
        <url-pattern>/*</url-pattern>  
    </filter-mapping>  
    <welcome-file-list>  
        <welcome-file>jsp/Login.jsp</welcome-file>  
    </welcome-file-list>  
</web-app> 
```

**struts.xml（工作版本）**

```
<?xml version="1.0" encoding="UTF-8"?>  
<!DOCTYPE struts PUBLIC "-//Apache Software Foundation//DTD Struts Configuration 2.3//EN" "http://struts.apache.org/dtds/struts-2.3.dtd">  
<struts>  
    <constant name="struts.enable.DynamicMethodInvocation" value="false" />  
    <constant name="struts.devMode" value="false" />  
    <constant name="struts.custom.i18n.resources" value="BFSView,BFSMessages" />  

    <package name="home-default" extends="struts-default" namespace="/">  

        <result-types>  
            <result-type name="tiles" class="org.apache.struts2.views.tiles.TilesResult" />  
        </result-types>  

        <interceptors>  
            <interceptor name="AuthenticationInterceptor" class="com.lv.bfs.controller.interceptor.AuthenticationInterceptor"></interceptor>  
            <interceptor-stack name="SecureStack">  
                <interceptor-ref name="AuthenticationInterceptor" />  
            </interceptor-stack>  
        </interceptors>  

        <action name="LoginAction" class="com.lv.bfs.controller.action.LoginAction">  
            <result name="success">jsp/Welcome.jsp</result>  
            <result name="error">/jsp/Login.jsp</result>  
        </action>  
    </package>  
</struts> 
```

**struts.xml（非工作版本）**

```
<?xml version="1.0" encoding="UTF-8"?>  
<!DOCTYPE struts PUBLIC "-//Apache Software Foundation//DTD Struts Configuration 2.3//EN" "http://struts.apache.org/dtds/struts-2.3.dtd">  
<struts>  
    <constant name="struts.enable.DynamicMethodInvocation" value="false" />  
    <constant name="struts.devMode" value="false" />  
    <constant name="struts.custom.i18n.resources" value="BFSView,BFSMessages" />  

    <package name="home-default" extends="struts-default" namespace="/">  

        <result-types>  
            <result-type name="tiles" class="org.apache.struts2.views.tiles.TilesResult" />  
        </result-types>  

        <interceptors>  
            <interceptor name="AuthenticationInterceptor" class="com.lv.bfs.controller.interceptor.AuthenticationInterceptor"></interceptor>  
            <interceptor-stack name="SecureStack">  
                <interceptor-ref name="AuthenticationInterceptor" />  
            </interceptor-stack>  
        </interceptors>  

        <action name="LoginAction" class="com.lv.bfs.controller.action.LoginAction">  
            <interceptor-ref name="SecureStack"></interceptor-ref>  
            <result name="success">jsp/Welcome.jsp</result>  
            <result name="error">/jsp/Login.jsp</result>  
        </action>  
    </package>  
</struts> 
```

**AuthenticationInterceptor.java**

```
public class AuthenticationInterceptor extends AbstractInterceptor {  

    private static Logger LOGGER = Logger.getLogger(AuthenticationInterceptor.class);  

    private static final long serialVersionUID = 1844249996954274967L;  

    public String intercept(ActionInvocation invocation) throws Exception {  
        LOGGER.info("intercept : START");  
        return invocation.invoke();  
    }  
} 
```

**日志语句（两种情况）**

```
12:39:05,533 INFO  [AuthenticationInterceptor] intercept : START  
12:39:05,533 INFO  [LoginAction] LoginAction : authenticate()  
12:39:05,533 INFO  [LoginAction] LoginAction : {[null],[null]}  

12:09:05,533 INFO  [LoginAction] LoginAction : authenticate()  
12:09:05,533 INFO  [LoginAction] LoginAction : {[admin],[admin]} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T13:19:54.577

当您为特定操作定义拦截器堆栈时，您必须为该操作定义*所有*拦截器。在这种情况下，您*只*定义了自定义拦截器，这意味着“params”拦截*器不会*运行，因此不会设置操作属性。

定义一个包含普通 S2 拦截器的新堆栈，或者在您的操作配置中包含这些拦截器（或堆栈）。

# php - 使用存储经纬度的数据库动态绘制到谷歌地图上

> ID：11901313
> 
> 赞同：0
> 
> 时间：2012-08-10T12:05:49.360
> 
> 标签：php, javascript, jquery, maps

我正在为一家开发新住宅区的公司做一个网站。我有一个数据库，其中包含每个开发项目的邮政编码/纬度/经度表。

我需要做的是根据我编写的函数返回的搜索结果将这些经度/纬度绘制到页面内的谷歌地图上。上述属性可通过类的实例获得

我已经进行了漫长而艰苦的研究，但似乎找不到任何可以回答我实际问题的东西-我查看了 Google Maps API 和各种其他资源，我发现的最接近的是：[http：/ /www.multiplottr.com](http://www.multiplottr.com)本质上是我想要做的，除了点将从数据库中提取，并且将在它们上具有某种类/ID，以便我可以添加悬停和单击功能以及交互性页面上的其他元素

非常感谢，
马特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T12:11:07.903

嗨，你可以这样使用

```
 function initialize() {
        var fenway = new google.maps.LatLng( <? php echo latitude from db ?> , <? php echo echo longtitude from db; ?> );
        var mapOptions = {
            center: fenway,
            zoom: 16,

            mapTypeId: google.maps.MapTypeId.ROADMAP
        };

        var map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
        var image = '<?php echo $path;?>components/com_propertylist/images/Home.png';
        var beachMarker = new google.maps.Marker({
            position: fenway,
            map: map,
            icon: image
        });
        google.maps.event.addDomListener(window, 'load', initialize);
        // google.maps.event.trigger(map, 'resize');
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T12:10:06.910

获取存储在数据库中的纬度/经度值，并使用 Google Maps api 在地图上绘制它们。这些图通常被称为标记。这可能会对你的研究有所帮助。

本质上，您需要使用 PHP 编写 JS ......

# html - 如何在加载时在 div 中加载随机文件夹

> ID：11901314
> 
> 赞同：1
> 
> 时间：2012-08-10T12:05:54.337
> 
> 标签：html, css, random

好的，首先我很抱歉，如果我的问题不清楚，因为我很难解释。我不知道你们是否对编码有所帮助，但如果你们能让我朝着正确的方向前进，那就太好了。

**概述**- 基本上类似于 YouTube，在“推荐>>”下的侧面板上，有一列具有不同的行。每行都有一个`<div>`元素，其中包含图片、标题、上传者和视图。所以这些不同的部分，所以标题图片等都是特定的，并链接到那个视频。我知道推荐的不同视频是基于许多因素等。但是，无论如何，现在开车到这里-

**问**- 有没有办法让页面加载随机元素，或者我们应该说为`<div>`标签内的视频设置？

我将放置一些代码来演示基本布局：

```
<table>
<tr>
<td>
<div id="thumbnail">
<img src="thumbnail.png"
</div>
</td>

<td>
<div id="author">
<a> somebody </a>
</div>
</td> 
```

……等等。我已经阅读了如何在加载时出现随机图像，但是有没有办法制作整个部分或说随机样式表在加载时出现？每个都包含不同的视频（在这里只是在黑暗中刺伤）或某种脚本？再次抱歉，如果我听起来很模糊或者我使用了错误的术语......

# ios - 如何将数据传递给自定义类（子视图）drawRect 函数？

> ID：11901322
> 
> 赞同：1
> 
> 时间：2012-08-10T12:06:36.280
> 
> 标签：ios, object-code

编辑：

我正在使用`drawRect:`驻留在自定义类中的函数绘制一条线，该函数位于我在 MainStoryboard.storyboard 文件中创建的视图中。该视图确实指向界面构建器中的自定义类 (draw2D)。

我在主文件（viewController）中绘制的所有代码现在都是：（头文件）

```
@class draw2D;  
@property (weak, nonatomic) IBOutlet draw2D *draw; 
```

(m 文件)

```
#import "draw2D.h"  
[draw.listOfFreqToDraw addObject: closestChar];   
[draw setNeedsDisplay]; 
```

我现在似乎遇到的问题是它只在 draw2D 类中运行一次 drawRect 方法，并且不再调用它（因此在第一次运行后甚至没有调用 listOfFreqToDraw ）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T12:23:09.583

您可以随时更改 draw2D 中的变量

在 draw2D.h 中进行设置

```
@property (nonatomic, strong) NSMutableArray * listOfFreqToDraw; 
```

在draw2D.m

```
- (void)drawRect:(CGRect)rect {
 for (UIBezierPath *path in self. listOfFreqToDraw) {
    [path stroke]; 
   }
} 
```

在你的主要课程中

```
[draw.listOfFreqToDraw addObject: closestChar];
[draw setNeedsDisplay]; 
```

# java - JTextField：将十进制逗号重新映射到点

> ID：11901324
> 
> 赞同：3
> 
> 时间：2012-08-10T12:06:39.570
> 
> 标签：java, swing, events, keyboard, jtextfield

我想将十进制逗号（德语键盘）重新映射到某个点`JTextField`。我已经尝试过`getInputMap()`and `getActionMap`，但到目前为止没有任何效果。到目前为止，我得到的最好结果是逗号根本不起作用。

我认为应该有某种方式使用输入地图，但如何？

下面是一个小示例程序，有人可以提示我在评论位置填写什么吗？还是这完全错误？

```
import javax.swing.InputMap;
import javax.swing.JFrame;
import javax.swing.JTextField;
import javax.swing.KeyStroke;

public class KeyTest extends JFrame {

    private JTextField textField;

    public KeyTest() {
        textField = new JTextField();
        add(textField);

        InputMap map = textField.getInputMap();
        map.put(KeyStroke.getKeyStroke(','), /* what to do here? */);
    }

    public static void main(String args[]) {
        java.awt.EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                KeyTest test = new KeyTest();
                test.pack();
                test.setVisible(true);
            }
        });
    }
} 
```

**编辑：** 也许我对我的问题不够清楚。正常的数字没有问题。我只是想让用户在输入日期时输入更方便。这些是`"DD.MM.YYYY"`德国的格式。这意味着，您不能仅使用数字键盘输入日期，因为我们没有小数点，而是逗号。这就是为什么我想在用于输入日期的文本字段中用点替换逗号。

纯文本和数字的所有输入字段都可以正常工作，甚至日期输入也可以正常工作。我只是想让打字更容易。就在昨天，我注意到 Libreoffice 中的一个类似功能，其中数字小键盘上的逗号（我有一个德语键盘）在数字单元格（我的语言环境设置为英语）中自动替换，但仅在包含数值的单元格中。这也会在您键入时发生。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T12:17:00.333

正如@MKorbel 建议的那样，您也许可以使用`JFormattedTextField`并提供合适的`Locale`.

```
JFormattedTextField field = new JFormattedTextField(
    new NumberFormatter(NumberFormat.getNumberInstance(Locale.UK)));
field.setValue(new Double(123.45)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T12:37:32.323

*   必须使用带有数字格式化程序的[JFormattedTextField](https://stackoverflow.com/a/7284706/714968)或[JSpinner](https://stackoverflow.com/a/7570411/714968)，而不是普通的 JTextField，我没有设置小数分隔符的问题`Locale`

*   还有第二种方法可以使用[DocumentFilter](https://stackoverflow.com/a/9692926/714968)而不是`InputMask`, 来过滤 un_wanted`whitespace`和`non_numeric`chars，并将 dot 更改为所需的小数分隔符

*   注意，使用[JFormattedTextField](https://stackoverflow.com/a/7284706/714968)或[JSpinner](https://stackoverflow.com/a/7570411/714968)`DocumentFilter`的输出在内部保存为 ASCII 小数分隔符，与 相比，视图和模型（）之间只有区别，返回更改的分组（空格）和分隔符 `Java``dot``Swing Document``DocumentFilter`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-10T12:18:03.967

您正在寻找的是“NumberFormat”（http://docs.oracle.com/javase/6/docs/api/java/text/NumberFormat.html）

例子：

```
NumberFormat english = NumberFormat.getInstance(Locale.ENGLISH); 
Number n = english.parse("0.123");   //english notation
NumberFormat german = NumberFormat.getInstance(Locale.GERMAN);
System.out.println(german.format(n.floatValue())); //output 0,123 (german notation) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T13:20:36.943

使用以下

```
textField.addKeyListener(new KeyListener(){

  public void keyTyped(KeyEvent e) {
    char c = e.getKeyChar();
     if (c== ',')
       e.setKeyChar('.');
  }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-11T09:36:15.413

我找到了另一种管理逗号/点问题的方法，它既简单又简短。此解决方案应该适用于世界各地，并且不取决于您的键盘类型和/或您的 LOCALE 设置。

我正在使用 JFormattedTextField 来获得正确的本地化输出并将“.replace(',', '.')”添加到 parseDouble() 函数中，如下面的示例所示。

*私人无效 ConvertMilesToKilometers() {*

 *```
 Double inputNumber = 0.0;

 // to format the output string
 DecimalFormat df = new DecimalFormat("#,###.##");

 // another way will be to use LOCALE 
 // DecimalFormat df = (DecimalFormat)NumberFormat.getNumberInstance(Locale.GERMANY);

 // get user input
 try {
     inputNumber = Double.parseDouble(milesTextField.getText().replace(',', '.'));
 } catch (Exception e) {
     JOptionPane.showMessageDialog(this, "please enter a valid number!", null, JOptionPane.ERROR_MESSAGE);
 }

    // calculate and give the answer 
    String answer = df.format(inputNumber * 1.609344f);
    this.KilometersLabel.setText(answer + " Kilometers."); 

    // clear the input field 
    this.milesTextField.setText("");
} 
```*  *我希望这将有所帮助。来自德国的问候。*

# python - 如何在python中超时功能，超时不到一秒

> ID：11901328
> 
> 赞同：22
> 
> 时间：2012-08-10T12:06:54.063
> 
> 标签：python, regex, function, timeout

### 问题规范：

我正在搜索日志文件的大量行，并将这些行分配给组，以便使用该`re.match()`函数存储的正则表达式（RegExses）。不幸的是，我的一些正则表达式太复杂了，Python 有时会让自己陷入回溯地狱。因此，我需要通过某种超时来保护它。

### 问题：

*   `re.match`，我正在使用，是 Python 的函数，正如我在 StackOverflow 上的某个地方发现的那样*（我真的很抱歉，我现在找不到链接 :-( ）*。运行 Python 的库时很难中断线程。对于这个原因线程不在游戏中。
*   因为`re.match`函数的评估需要相对较短的时间，并且我想用这个函数分析大量的行，所以我需要一些不会花费太长时间执行的超时函数*（这使得线程更不适合，初始化需要很长时间新线程）*并且**可以设置为小于一秒**。
    出于这些原因，此处[的答案 - 函数调用](https://stackoverflow.com/questions/492519/timeout-on-a-python-function-call)超时 和此处 -[如果装饰器完成时间过长](https://stackoverflow.com/questions/2281850/timeout-function-if-it-takes-too-long-to-finish)（警报 - 1 秒或更多），则超时函数不在讨论范围内。

我今天早上一直在寻找这个问题的解决方案，但我没有找到任何令人满意的答案。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-08-10T12:18:10.613

**解决方案：**

我刚刚修改了此处发布的脚本：[Timeout function if it takes too long to finish](https://stackoverflow.com/questions/2281850/timeout-function-if-it-takes-too-long-to-finish)。

这是代码：

```
from functools import wraps
import errno
import os
import signal

class TimeoutError(Exception):
    pass

def timeout(seconds=10, error_message=os.strerror(errno.ETIME)):
    def decorator(func):
        def _handle_timeout(signum, frame):
            raise TimeoutError(error_message)

        def wrapper(*args, **kwargs):
            signal.signal(signal.SIGALRM, _handle_timeout)
            signal.setitimer(signal.ITIMER_REAL,seconds) #used timer instead of alarm
            try:
                result = func(*args, **kwargs)
            finally:
                signal.alarm(0)
            return result
        return wraps(func)(wrapper)
    return decorator 
```

然后你可以像这样使用它：

```
from timeout import timeout 
from time import time

@timeout(0.01)
def loop():
    while True:
       pass
try:
    begin = time.time()
    loop()
except TimeoutError, e:
    print "Time elapsed: {:.3f}s".format(time.time() - begin) 
```

哪个打印

```
Time elapsed: 0.010s 
```

# c++ - 如何在 Visual C++ 中将图像转换为十六进制或字符串

> ID：11901330
> 
> 赞同：0
> 
> 时间：2012-08-10T12:07:02.327
> 
> 标签：c++, visual-c++

我们有一个图像文件要通过串行通信传输到微处理器。我们要做的是将此图像文件传输到十六进制文档，以便该微处理器可以在其液晶显示器上查看此十六进制文档。如何将此图像文件传输到十六进制文档？我们是 Visual C++ 的新手。因此，请尽可能具体:) 提前致谢

# ruby - Ruby：代码“升级”从 1.8.6 到 1.9.2

> ID：11901331
> 
> 赞同：4
> 
> 时间：2012-08-10T12:07:04.263
> 
> 标签：ruby, ruby-1.9.2

我有兴趣将用 ruby​​ v 编写的代码更新`1.8.6`为`1.9.2`.
是否有任何有用的链接可供阅读（可能带有一些警告和建议）？

只是要清楚，所以，我现在不期待任何问题，但我想避免它们。

[像这样的](https://support.cloud.engineyard.com/entries/21016488-migrate-to-ruby-1-9-2)PS 链接大多没有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T12:11:38.403

显示差异的幻灯片： [http](http://slideshow.rubyforge.org/ruby19.html#11)
: //slideshow.rubyforge.org/ruby19.html#11 几天前我将一个应用程序从 ruby​​ 1.8.7 迁移到 1.9.3，没有发生任何问题。
但我建议你测试你所有的代码是否有小错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T12:13:52.440

验证您依赖的所有 gem 是否与 1.9.2 兼容。 [isitruby19.com](http://isitruby19.com/)是检查这一点的好资源。

除此之外，最好的策略是尝试迁移并进行一些测试。如果您的应用程序具有全面的单元测试覆盖率，那么这应该不会太痛苦。

# objective-c - Objective C 类和 UIViewController 子类的区别

> ID：11901340
> 
> 赞同：-3
> 
> 时间：2012-08-10T12:07:26.567
> 
> 标签：objective-c, class, uiviewcontroller

我在 ios 模板“Objective C Class”和“UiViewController Subclass”下得到两个选项。谁能向我解释“Objective C Class”和“UiViewController Subclass”之间的区别是什么？你用它们做什么？基本上在什么情况下我应该使用“Objective C Class”，在什么情况下我应该使用“UiViewController Subclass”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T12:11:23.613

如果要创建 UIViewController 的子类，则应使用 UIViewController 子类；如果要创建不从 UIViewController 子类化的泛型类，则应使用 Objective-C 类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T12:12:36.793

如果你想创建一个 viewController 那么你应该创建一个 UIViewController 的子类。如果你想创建一个具有任何通用功能的类，那么你应该创建一个 Objective-C 类的子类。

# uml - 从 UML 序列图中的成员方法调用外部方法

> ID：11901341
> 
> 赞同：1
> 
> 时间：2012-08-10T12:07:30.917
> 
> 标签：uml, sequence-diagram

[示例图](http://i.stack.imgur.com/qwo0G.jpg)

你好，

我在 UML 方面不是很有经验，所以这可能是一个非常简单的问题。我如何描述与成员方法调用不同的类的方法调用？还是我应该展示这个？

例如，类 Foo 有一个“FooMethod”。类 Bar 有一个“BarMethod”。Foo 调用 FooMethod，后者在返回之前调用 BarMethod。

为了说明这一点，我在 Foo 的生命线中绘制了一个 self 方法调用。然后我在 Foo 的自调用开始和结束之间的间隙中绘制了对 Bar 的方法调用。顶部链接中的图表描述了这种情况。这是对的吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T14:16:53.170

首先，我认为一些相关的链接：

[自我消息（非递归）与自我递归消息](https://stackoverflow.com/questions/11626473/self-messagenon-recursive-vs-self-recursive-message)

[序列图中消息类型的区别](https://stackoverflow.com/questions/2980176/difference-between-types-of-messages-in-sequence-diagrams)

[用序列图绘制调用流会导致歧义](https://stackoverflow.com/questions/3759790/drawing-call-flow-with-sequence-diagram-leads-to-ambiguity)

这就是我将如何绘制您要建模的内容：

![带有“递归”消息的示例序列图](../Images/c483c189bd7536f125c4328cd5cf2b1e.png)

如果您阅读大量 UML 教程，您会发现 UML 不是一门精确的科学（尽管它应该是），并且有很多解释。更糟糕的是，不同的工具会为您提供相同概念的不同实现。因此，两个图表可能看起来完全不同，但对组件之间的交互进行了建模。

例如，对于同步调用，返回消息是可选的：

[uml 2.0 序列图：在对同步消息建模时是必须的回复消息](https://stackoverflow.com/questions/1925283/uml-2-0-sequence-diagram-is-a-reply-message-obligatory-when-modeling-a-synchron)

我的示例显示了“递归”消息的返回行。但这可以跳过。

# mysql - 跳过或忽略 Mysqldump 中的定义器

> ID：11901344
> 
> 赞同：8
> 
> 时间：2012-08-10T12:07:34.037
> 
> 标签：mysql, mysqldump, database-backups

我想知道是否可以阻止 mysqldump 插入此命令

```
/*!50017 DEFINER=`root`@`localhost`*/ 
```

或者，如果我必须在之后使用 sed 执行此操作，例如

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-10-21T20:28:26.207

这个问题自 2006 年以来一直存在，没有得到修复的迹象。

但是，在编写转储文件之前，我已经通过 grep（仅限 Linux）将其通过管道删除了定义行：

```
mysqldump -u dbuser -p dbname | grep -v 'SQL SECURITY DEFINER' > dump.sql 
```

有点拗口（或键盘？），但我认为这是唯一的方法。

# android - 我们如何更改进度对话框的背景颜色

> ID：11901347
> 
> 赞同：2
> 
> 时间：2012-08-10T12:07:43.733
> 
> 标签：android

我们如何更改进度对话框的背景颜色？

```
progessDialog = ProgressDialog.show(this, "", "Please Wait....",true);
progessDialog.getWindow().setContentView(R.layout.progressdialog); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-05T10:39:57.613

更改颜色背景

```
 final ProgressDialog pDialog = new  ProgressDialog(this,AlertDialog.THEME_HOLO_LIGHT);

//final ProgressDialog pDialog = new  ProgressDialog(this);

// pDialog.getWindow().setBackgroundDrawable(new      ColorDrawable(Color.YELLOW));

    pDialog.setMessage("Loading...");

    pDialog.show(); 
```

# sql - SQL选择最后一次出现的行并计算出现次数

> ID：11901352
> 
> 赞同：3
> 
> 时间：2012-08-10T12:07:54.743
> 
> 标签：sql

我有一张桌子`OrderSpecs`。我需要从 a 中选择所有行，但仅`OrderSpecs`通过 a`customer ID`选择每个订单的最后一次出现（按时间戳）`order ID`。我还希望我的查询计算它为每个`OrderID`.

这是我的表格（浓缩为仅显示关键信息）：

**订单规格**

```
ID       OrderID    CustomerID        CreatedDate                 SpecDocument
1        1           5                 01/08/2012 11:00:00         *Amendment1*
2        1           5                 02/08/2012 15:32:41         *Amendment2*
3        2           31                04/08/2012 16:19:00         *Amendment1*
4        3           5                 05/08/2012 12:10:12         *Amendment1*
5        4           10                08/08/2012 09:32:56         *Amendment1*
6        1           5                 09/08/2012 11:47:02         *Amendment3* 
```

按日期和选择最近的订单行时，我的查询工作正常`CustomerID`：

```
SELECT 
    ID, CustomerID, EstimateNo, OrderYear, OrderNo, ProductionNo, AddedBy,    
    AddedDate, SizeLength, SizeWidth, HomeModelID, HomeTypeID, DrawingNo, 
    CustomerReference, BuildPieces, ProductionPieces, Notes, SpecDocument, OrderID
FROM  
    OrderSpecs AS o
WHERE 
    (AddedDate = (SELECT MAX(AddedDate) AS Expr1
                  FROM OrderSpecs AS i
                  WHERE (o.OrderID = OrderID))) 
    AND (CustomerID = @CustomerID) 
```

但是，我无法弄清楚如何计算每个`OrderID`.

例如，我希望我的输出表是这样的（搜索`CustomerID = 5`）：

```
ID     OrderID     CustomerID     CreatedDate            SpecDocument      Count
6      1           5              09/08/2012 11:47:02    *Amendment3*      3
4      3           5              05/08/2012 12:10:12    *Amendment1*      1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T12:17:47.713

应该使用 SELECT 中的子查询（未经测试）

```
SELECT 
    ID, CustomerID, EstimateNo, OrderYear, OrderNo, ProductionNo, AddedBy,    
    AddedDate, SizeLength, SizeWidth, HomeModelID, HomeTypeID, DrawingNo, 
    CustomerReference, BuildPieces, ProductionPieces, Notes, SpecDocument, OrderID,
    (SELECT COUNT(*) FROM OrderSpecs AS os WHERE o.OrderID=os.OrderID) as [Count]
FROM  
    OrderSpecs AS o
WHERE 
    (AddedDate = (SELECT MAX(AddedDate) AS Expr1
                  FROM OrderSpecs AS i
                  WHERE (o.OrderID = OrderID))) 
    AND (CustomerID = @CustomerID) 
```

# sql-server - 如何在sql server中的类似查询中包含空字符串

> ID：11901353
> 
> 赞同：1
> 
> 时间：2012-08-10T12:08:05.723
> 
> 标签：sql-server, sql-server-2005

这似乎是一件容易的事情，但不知何故我无法想到它。

我想用这种格式写一个类似的查询：

```
WHERE Searchfield LIKE '[ ;]Mark' 
```

现在这将检​​查是否发生

```
' Mark', ';Mark' 
```

我希望它也能够搜索以下字符串：

```
'Mark' 
```

如何指示它可以出现空格、分号或没有字符。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T12:23:33.360

可能最容易使用

```
WHERE Searchfield LIKE '[ ;]Mark' OR  Searchfield = 'Mark' 
```

如果`Searchfield`被索引，那么您可能会发现

```
WHERE Searchfield IN ('Mark', ' Mark', ';Mark') 
```

给你一个更好的计划。`Like`模式语法中没有与正则表达式可选字符类等效的东西。虽然您可以使用 CLR 正则表达式和以下正则表达式`[ ;]?Mark`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T10:08:22.663

这看起来像是全文设计的那种东西。如果是普通查询调用，请使用全文搜索。那么您的搜索词将只是“标记”。

# php - 教义计数不同的别名

> ID：11901355
> 
> 赞同：2
> 
> 时间：2012-08-10T12:08:20.413
> 
> 标签：php, doctrine

如何使用 Doctrine queryBuilder 为 countDistinct expr 设置别名？

```
$qb->addSelect($qb->expr()->countDistinct('_charges.id')); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-10T12:57:07.863

你不能。这是[countDistinct 函数](http://www.doctrine-project.org/api/orm/2.2/source-class-Doctrine.ORM.Query.Expr.html#247)返回的内容：

```
return 'COUNT(DISTINCT ' . implode(', ', func_get_args()) . ')'; 
```

但是，您可以像这样直接调用 select 函数：

```
select('COUNT(DISTINCT _charges.id) AS charges') 
```

# phpquery - phpquery dom解析器更改脚本标签内的内容

> ID：11901364
> 
> 赞同：0
> 
> 时间：2012-08-10T12:09:02.910
> 
> 标签：phpquery

Phpquery dom 解析器更改 javascript 标记内的内容。我使用以下代码

```
$pq         = phpQuery::newDocument($html);//$html -> grab the page using curl
echo $pq->html(); 
```

**实际浏览器页面查看源**

```
<script type="text/javascript">
    $('#div-id').append(
           '<div class="tool">'
                +'<div class="t1"></div>'
                +'<div class="t2"></div>'
           +'</div>'
   );
</script> 
```

**使用 phpquery dom 后**

```
<script type="text/javascript">
        $('#div-id').append(
               '<div class="tool">'
                    +'<div class="t1"></script>
</div>'
                    +'<div class="t2"></div>'
               +'</div>'
       );
    </script> 
```

另一个结束脚本标记是插入 dom 解析器。请帮助我如何解决这个问题。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T03:53:30.067

我不确定这是否完全回答了您的问题，似乎它可能是一个错误，但这就是我发现的：

当我`html()`这样打电话时：`$pq->html()`我得到以下信息

```
<script type="text/javascript">
    $('#div-id').append(
           '<div class="tool">'
                +'<div class="t1"/>'
                +'<div class="t2"/>'
           +'</div>'
   );
</script> 
```

但是当我这样做时：

```
foreach($pq->find('script') as $script){
    echo pq($script)->html();
} 
```

我得到正确的 html

```
$('something else').append(
       '<div class="tool">'
            +'<div class="t1"></div>'
            +'<div class="t2"></div>'
       +'</div>'
); 
```

我认为这是一个错误，我将报告它。如果我听到任何关于这件事的消息，我会告诉你的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-28T10:48:53.950

我在将 html 加载到 phpQuery 之前替换了所有脚本标记。并且在所有操作之后，替换回脚本。

```
function str_replace_once($search, $replace, $text)
{
    $pos = strpos($text, $search);
    return $pos!==false ? substr_replace($text, $replace, $pos, strlen($search)) : $text;
}
function replaceScripts($js_atricle_html){
    preg_match_all('/<script.*?>[\s\S]*?<\/script>/', $js_atricle_html, $tmp);
    $scripts_array = $tmp[0]; 
    foreach ($scripts_array as $script_id=>$script_item){
        $js_atricle_html = self::str_replace_once($script_item, '<div class="script_item_num_'.$script_id.'"></div>', $js_atricle_html);
    }

    return array('content'=> $js_atricle_html, 'scripts_array'=>$scripts_array);
}
function unreplaceScripts($aticle_content, $scripts_array){
    preg_match_all('/<div class="script_item_num_(.*?)"><\/div>/', $aticle_content, $tmp);
    foreach ($tmp[1] as $script_num_item){
        $aticle_content = str_replace('<div class="script_item_num_'.$script_num_item.'"></div>', $scripts_array[$script_num_item], $aticle_content);
    }
    return $aticle_content;
} 
```

# jquery - Jquery :contains 应该忽略空格

> ID：11901368
> 
> 赞同：0
> 
> 时间：2012-08-10T12:09:10.650
> 
> 标签：jquery, contains, space

这是我的代码，效果很好。在一个网站上找到它并稍作修改。

```
<script>
(function ($) {
// custom css expression for a case-insensitive contains()
jQuery.expr[':'].Contains = function(a,i,m){
return (a.textContent || a.innerText || "").toUpperCase().indexOf(m[3].toUpperCase())>=0;
};
function listFilter(header, list) { // header is any element, list is an unordered list
// create and add the filter form to the header
var form = $("<form>").attr({"class":"filterform","action":"#"}),
input = $("<input>").attr({"class":"filterinput","type":"text", "value":"Filterfunktion"});
$(form).append(input).appendTo(header);
$(input)
.change( function () {
var filter = $(this).val();

if(filter) {
// this finds all links in a list that contain the input,
// and hide the ones not containing the input while showing the ones that do
$(list).find("a:not(:Contains(" + filter + "))").parent().fadeOut();
$(list).find("a:Contains(" + filter + ")").parent().fadeIn();
} else {
$(list).find("li").slideDown();
}
return false;
})
.keyup( function () {
// fire the above change event after every letter
$(this).change();
});
}
//ondomready
$(function () {
listFilter($(".filter"), $(".list"));
});

$(function() {
    $(".filterinput").focus(function() {
      $(this).val('')

      });
 });

}(jQuery));
</script> 
```

但是我无法开始工作的一件事是，当脚本带有空格并且我在没有空格的情况下键入 ist 时，脚本应该找到/匹配一个字符串。

例如：

我有 DCB 112。当我现在在我的输入字段中输入“DCB 112”时，它会正确过滤并显示给我。但是当我输入“DCB112”时，脚本无法匹配这个并且什么也没有显示。有没有可能的解决方案？

来自波兰的问候！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T12:26:56.507

好的，也许有点扭曲，但我要做的是获取列表的所有链接并遍历它们，删除其文本的每个空格，并检查您要查找的文本是否在其中。像这样的东西：

```
var filter = $(this).val().replace(/\s+/g, '').toLowerCase();

// I'm omitting loads of code...
var text;
var index;
$(list).find('a').each(function(i, el){
    text = $(el).text().replace(/\s+/g, '').toLowerCase();
    index = text.indexOf(filter);
    if(index != -1){
        // The substring is contained -> show parent
    }else{
        // The substring is not contained -> hide parent
    }
}); 
```

希望它有所帮助并且有效，因为我没有测试它：/

编辑：

测试和工作:)

[http://jsfiddle.net/QVkuP/](http://jsfiddle.net/QVkuP/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T12:36:14.910

简单的方法：

```
filter.replace(/\s/g, ''); 
```

但是只有当你有一个空格时它才会很好用，比如“DCB 112”。

困难的方法：您需要首先遍历您的列表以删除不匹配的链接。小心从两个值中删除空格以进行比较。并展示好的一面。

```
$(list).find("a").each(function()
{
    if($(this).text().replace(/\s/g, '') == filter.replace(/\s/g, ''))
    {
        $(this).parent().fadeIn();
    }
    else
    {
        $(this).parent().fadeOut();
    }
} 
```

希望它会有所帮助，它仍然看起来有点难看，但它应该这样做......

# c# - 使用 C# 调用 Restful WCF POST 方法

> ID：11901370
> 
> 赞同：3
> 
> 时间：2012-08-10T12:09:12.070
> 
> 标签：c#, wcf

如何从 C# 类调用类型为 POST 的 WCF 方法？

WCF 方法

```
[OperationContract]
[WebInvoke(Method = "POST",
           UriTemplate = "/process",
           RequestFormat = WebMessageFormat.Json,
           ResponseFormat = WebMessageFormat.Json,
           BodyStyle = WebMessageBodyStyle.Wrapped)]
MyRespons Process(MyRequest req); 
```

如何从 aspx 代码隐藏中调用它？

我尝试使用 webclient 接收流，它适用于任何 get 方法，但不适用于 POST。该方法适用于 Fiddler 和 POSTER：

```
string getDeclarations = string.Format("{0}/process", ServiceBaseAddress);
var proxy = new WebClient();
proxy.DownloadStringCompleted += ProxyDownloadDeclarationsCompleted;
proxy.DownloadStringAsync((new Uri(getDeclarations))); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T12:44:36.893

您是否尝试在要使用 WCF 服务的项目中添加对 WCF 服务的服务引用？
为此，请在解决方案资源管理器中右键单击您的项目，然后选择添加服务引用。然后输入您的 WCF 服务的 URL，您可以使用它，因为您使用对象和方法引用任何其他 DLL 或项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T12:32:20.547

您可以使用 jQuery 来做到这一点。这是一个[很好的例子](http://www.codeproject.com/Articles/128478/Consuming-WCF-REST-Services-Using-jQuery-AJAX-Call)供你使用。

这是一个示例代码块。

```
$.ajax({
    cache: false,
    type: "POST",
    async: false,
    url: /* YOUR URL */,
    data: JSON.stringify(/* YOUR POST DATA */),
    contentType: "application/json",
    dataType: "json",
    success: function (response) {
        /* SUCCESS FUNCTION */
    },
    error: function (error) {
        /* ERROR FUNCTION */
    }
}); 
```

# 已编辑

这是对 Stackoverflow 示例的[参考](https://stackoverflow.com/questions/1117421/webclient-uploaddata-correct-usage-for-post-request)`WebClient`，用于执行`POST`.

# visual-studio-2010 - 是否可以更改 Visual Studio 查找 moc 文件的路径？

> ID：11901372
> 
> 赞同：0
> 
> 时间：2012-08-10T12:09:22.647
> 
> 标签：visual-studio-2010, qt

我正在使用带有 Qt 4.8.2 和 Qt 插件的 Visual Studio 2010。
我的项目由四个子项目组成，因此为每个子项目创建了“GeneratedFiles”文件夹。我试图将所有生成的文件（如 moc_.cpp *、ui_.cpp*）放在一个文件夹（GeneratedFiles/Release）中，通过 VS 中的加载项更改 qt-project-settings 就可以了。
但是，当我现在尝试构建时，找不到 moc 文件，并且每个 moc 文件都出现以下错误：

> 致命错误 C1083：无法打开源文件：“Release\moc_writerappender.cpp”：没有这样的文件或目录

所以它在“Release”而不是“GeneratedFiles/Release”中寻找，我似乎无法改变。经过一番认真的搜索，我不知道该去哪里找了。
我在哪里更改该文件夹？甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T18:35:48.707

您需要更新包含目录。

1.  右键单击解决方案资源管理器中的项目，然后单击菜单选项“Qt 项目设置”

2.  选择目录来放置每种类型的文件（.moc、.ui 等）。按确定

3.  右键单击解决方案资源管理器中的项目，然后单击菜单选项“属性”。

4.  单击“C/C++”选项卡，然后单击“常规”子选项卡。将这些目录添加到您的 Additional Include Directories 部分。

5.  确保为每个适用的配置（调试、发布等）执行此操作。

希望有帮助。

# html - Sharepoint 自定义列宽

> ID：11901377
> 
> 赞同：0
> 
> 时间：2012-08-10T12:09:30.260
> 
> 标签：html, css, sharepoint

我在 Sharepoint 项目列表的一行中有一些没有空格的长词。由于该列宽非常大，我需要将其设置为固定值。我还需要把那些长话包装起来。

找到这个[教程](http://aanuwizard.wordpress.com/2010/08/01/sharepoint-2010-how-to-change-width-of-list-column/)。它几乎可以工作，但是更改仅在设计器中可见，而在浏览器中则看不到。还有什么可能改变它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T12:34:33.687

尝试添加`!important`到您的样式声明中。

像那样：

```
div { width: 300px !important; } 
```

# java - 如何识别 MultiValueMap 中的重复键

> ID：11901379
> 
> 赞同：2
> 
> 时间：2012-08-10T12:09:33.147
> 
> 标签：java, data-structures, apache-commons

我创建了一个 MultiValueMap，它有重复的键。我想知道如何获取重复键及其值的列表？

```
核心价值
  4
  一个 6
  乙 7
  C 1
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T12:21:22.253

[MultiValueMap](http://commons.apache.org/collections/apidocs/org/apache/commons/collections/map/MultiValueMap.html)不允许重复键。请参见下面的示例。`A MultiValueMap decorates another map, allowing it to have more than one value for a key`.

```
 MultiValueMap lmap=new MultiValueMap();
    lmap.put("A", 4);
    lmap.put("A", 6);
    lmap.put("B", 7);
    lmap.put("C", 1);

    System.out.println("Size-->"+lmap.size()); 
```

**结果：**

```
Size-->3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T12:21:28.320

`MultiValueMap`将值放入映射中会将值添加到该键处的集合中。获取一个值将返回一个集合，其中包含放入该键的所有值。

```
getCollection(key) will return Collection of values 
```

# c# - 使用 WebRequests 下载 pdf 文件

> ID：11901381
> 
> 赞同：15
> 
> 时间：2012-08-10T12:09:41.590
> 
> 标签：c#, pdf, webrequest, binaryreader

我正在尝试自动下载一些 pdf 文件，给出一个 url 列表。

这是我的代码：

```
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);

request.Method = "GET";

var encoding = new UTF8Encoding();

request.Headers.Add(HttpRequestHeader.AcceptLanguage, "en-gb,en;q=0.5");
request.Headers.Add(HttpRequestHeader.AcceptEncoding, "gzip, deflate");

request.Accept = "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8";
request.UserAgent = "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:12.0) Gecko/20100101 Firefox/12.0";

HttpWebResponse resp = (HttpWebResponse)request.GetResponse();

BinaryReader reader = new BinaryReader(resp.GetResponseStream());

FileStream stream = new FileStream("output/" + date.ToString("yyyy-MM-dd") + ".pdf",FileMode.Create);

BinaryWriter writer = new BinaryWriter(stream);

while (reader.PeekChar() != -1)
      {
       writer.Write(reader.Read());
      }
       writer.Flush();
       writer.Close(); 
```

所以，我知道第一部分有效。我最初是使用 TextReader 获取它并阅读它 - 但这给了我损坏的 pdf 文件（因为 pdf 是二进制文件）。

现在，如果我运行它， reader.PeekChar() 始终为 -1 并且没有任何反应 - 我得到一个空文件。

在调试它时，我注意到 reader.Read() 在我调用它时实际上给出了不同的数字 - 所以可能 Peek 坏了。

所以我尝试了一些很脏的东西

```
try
{
 while (true)
   {
    writer.Write(reader.Read());
    }
 }
   catch
      {
      }
 writer.Flush();
 writer.Close(); 
```

现在我得到一个非常小的文件，里面有一些垃圾，但它仍然不是我想要的。

那么，任何人都可以指出我正确的方向吗？

附加信息：

标头并未暗示其压缩或其他任何内容。

```
HTTP/1.1 200 OK
Content-Type: application/pdf
Server: Microsoft-IIS/7.5
X-Powered-By: ASP.NET
Date: Fri, 10 Aug 2012 11:15:48 GMT
Content-Length: 109809 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-10T12:11:59.953

跳过`BinaryReader`and`BinaryWriter`并将输入流复制到输出`FileStream`。简要地

```
var fileName = "output/" + date.ToString("yyyy-MM-dd") + ".pdf";
using (var stream = File.Create(fileName))
  resp.GetResponseStream().CopyTo(stream); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-10T12:12:41.467

为什么不使用`WebClient`类？

```
using (WebClient webClient = new WebClient())
{
    webClient.DownloadFile("url", "filePath");
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-10T12:12:01.917

您的问题询问`WebClient`但您的代码显示您使用原始 HTTP 请求和响应。

你为什么不实际使用[`System.Net.WebClient`](http://msdn.microsoft.com/en-us/library/system.net.webclient.aspx)？

```
using(System.Net.WebClient wc = new WebClient()) 
{
    wc.DownloadFile("http://www.site.com/file.pdf",  "C:\\Temp\\File.pdf");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-27T07:24:02.930

```
 private void Form1_Load(object sender, EventArgs e)
        {

            WebClient webClient = new WebClient();
            webClient.DownloadFileCompleted += new AsyncCompletedEventHandler(Completed);
            webClient.DownloadProgressChanged += new DownloadProgressChangedEventHandler(ProgressChanged);
            webClient.DownloadFileAsync(new Uri("https://www.colorado.gov/pacific/sites/default/files/Income1.pdf"), @"output/" + DateTime.Now.Ticks ("")+ ".pdf", FileMode.Create);
        }

        private void ProgressChanged(object sender, DownloadProgressChangedEventArgs e)
        {
            progressBar = e.ProgressPercentage;
        }

        private void Completed(object sender, AsyncCompletedEventArgs e)
        {
            MessageBox.Show("Download completed!");
        }
    }
} 
```

# java - 如何检查文件是否可读？

> ID：11901382
> 
> 赞同：8
> 
> 时间：2012-08-10T12:09:43.927
> 
> 标签：java, winapi, java-native-interface, jna

我正在编写 Java 6 应用程序，我必须检查文件是否可读。但是，在 Windows 上`canRead()`总是返回`true`. 所以我认为，唯一的解决方案可能是一些基于 WINAPI 并用 JNA/JNI 编写的本机解决方案。

但是，还有另一个问题，因为在 WINAPI 中很难找到一个简单的函数来返回有关访问文件的信息。我发现`GetNamedSecurityInfo`或者`GetSecurityInfo`但我不是高级 WINAPI 程序员，而且它们对于我来说与 JNA/JNI 连接起来太复杂了。任何想法如何处理这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2018-02-17T14:44:12.940

Java 7 引入了`Files.isReadable`静态方法，它接受一个文件[`Path`](https://docs.oracle.com/javase/7/docs/api/java/nio/file/Path.html)，如果文件存在且可读，则返回 true，否则返回 false。

[从文档](https://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#isReadable(java.nio.file.Path))

> 测试文件是否可读。此方法检查文件是否存在以及此 Java 虚拟机是否具有允许它打开文件以进行读取的适当权限。根据实现，此方法可能需要读取文件权限、访问控制列表或其他文件属性，以检查对文件的有效访问。因此，该方法对于其他文件系统操作可能不是原子的。
> 
> 请注意，此方法的结果会立即过时，不能保证后续打开文件进行读取的尝试会成功（甚至不能保证它会访问同一个文件）。在安全敏感的应用程序中使用此方法时应小心。

例子：

```
File file = new File("/path/to/file");
Files.isReadable(file.toPath()); // true if `/path/to/file` is readable 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-10T12:50:41.977

尝试使用以下代码

```
public boolean checkFileCanRead(File file){
    try {
        FileReader fileReader = new FileReader(file.getAbsolutePath());
        fileReader.read();
        fileReader.close();
    } catch (Exception e) {
        LOGGER.debug("Exception when checking if file could be read with message:"+e.getMessage(), e);
        return false;
    }
    return true;
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-10T12:51:01.147

您可以通过这种方式更严格地使用[FilePermission](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/FilePermission.html)和[AccessController](http://docs.oracle.com/javase/1.4.2/docs/api/java/security/AccessController.html)：

```
FilePermission fp = new FilePermission("file.txt", "read");
AccessController.checkPermission(fp); 
```

> 如果请求的访问被允许，checkPermission 会安静地返回。如果被拒绝，则会引发 AccessControlException。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-11T03:12:06.613

如果您要阅读它，您只需要知道它是否可读。因此，请在需要时尝试阅读它，如果不能，请处理它。测试任何资源可用性的最佳方法就是尝试使用它并处理出现的异常或错误。不要试图预测未来。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-11-09T10:44:51.283

在资源的实际使用之前很久检查资源的可访问性（在这种情况下是文件的可读性）是完全合理的。

想象一个服务器应用程序将使用一个子组件，该子组件将在一段时间后在某些情况下读取特定文件。在服务器启动时检查文件的可读性并在不可读时发出警告可能很有用。然后有人可以在情况实际导致子组件尝试读取该文件之前解决这种情况（使文件可读，任何东西）。

当然，这种预先检查并不能替代子组件中正确的异常处理（文件很可能在开始时是可读的，但后来变得不可读）。

所以我认为关于预检查的问题是完全有效的。

至于检查资源的方法，尽量做与实际使用情况类似的事情。如果稍后将读取该文件，请尝试读取它！

至于 Files.isReadable(...)：不能保证 Files.isReadable(...) 下面的文件系统提供程序没有错误。它可以返回true，如果实际读取了文件，则抛出异常。

当然，如果您正在编写一个文件管理器应用程序，那么使用 Files.isReadable(...)，但我想情况并非如此。

# asp.net-mvc - 如何创建自定义路由？

> ID：11901385
> 
> 赞同：0
> 
> 时间：2012-08-10T12:10:01.540
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-routing

假设我有事件控制器。在控制器中，我有 3 个动作：与会者、照片和消息。

如何实现以下路由模式：

1.  www.site.com/event/{eventname}
2.  www.site.com/event/{eventname}/action/
3.  www.site.com/event/{eventname}/action/{actionid}

Controller 将被称为 EventController，Action 可以是三种动作（与会者、照片和消息）中的任何一种。例如

*   www.site.com/event/ - 列出所有事件
*   www.site.com/event/autiebirthday/ - 显示 auntibirthday 活动，在此页面中将有链接到呼叫照片、消息和与会者操作。
*   www.site.com/event/autiebirthday/photos/ - 列出阿姨生日活动的所有照片。
*   www.site.com/event/autiebirthday/photos/1 - 显示 ID 为 1 的照片以及评论。

谢谢。

鲁文迪

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T12:43:32.587

路由表：

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.MapRoute(
        "EventHome", // Route name
        "event/{eventName}/{action}/{id}", // URL with parameters
        new { controller = "Event", action = "Index", id = UrlParameter.Optional } // Parameter defaults
    );

    routes.MapRoute(
        "Default", // Route name
        "{controller}/{action}/{id}", // URL with parameters
        new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
    );
} 
```

控制器：

```
public class EventController : Controller
{
    public ActionResult Index(string eventName)
    {
        ViewBag.EventName = eventName;

        return View();
    }

    public ActionResult Photos(int? id)
    {
        ViewBag.Id = id;

        return View();
    }
} 
```

请注意，我只是用来`ViewBag`测试路线是否有效。您自然应该使用适当的数据源进行生产。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T12:14:56.360

我不清楚网址应该叫什么，但我认为应该这样做

```
routes.MapRoute("", "event/{eventname}", new { controller = "Event", action = "Messages" });
routes.MapRoute("", "event/{eventname}/action/{actionid}", new { controller = "Event", action = "Messages", actionId = UrlParameter.Optional }); 
```

# c# - C# 和并发读取线程安全对象？

> ID：11901386
> 
> 赞同：3
> 
> 时间：2012-08-10T12:10:03.003
> 
> 标签：c#, .net, multithreading, thread-safety, locking

处理线程安全对象 - 例如： [缓存对象](http://msdn.microsoft.com/en-us/library/system.web.caching.cache.aspx)

Msdn 指出：

> 线程安全：这种类型是线程安全的。

我确实意识到它在多线程环境中按键*设置的意义。*

但是在多线程环境中按键*获取呢？*

如果`200`线程想要读取一个值，`199`其他线程是否被阻塞/等待？

感谢您提供任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T19:31:32.807

提供线程安全的方式有很多种，没有指定使用哪种方式，但它可以在不需要锁定读取的情况下发生。简短的回答，读取不需要锁，因为它的结构方式。长答案：

在说“所有方法都是线程安全的”时做出的承诺是，如果同时调用这些方法，它们不会破坏对象或返回不正确的结果。让我们考虑对象`List<char>`。

假设我们有一个空调用，三个线程同时`List<char>`调用`list`以下内容：

1.  `char c = list[0]`.
2.  `list.Add('a');`
3.  `list.Add('b');`

有四种可能的正确结果：

1.  `c`包含`'a'`. `list`包含`{'a', 'b'}`. `list.Count`现在会回来`2`。
2.  `c`包含`'b'`. `list`包含`{'b', 'a'}`. `list.Count`现在会回来`2`。
3.  An`ArgumentOutOfRangeException`在第一个线程上引发。`list`包含`{'a', 'b'}`. `list.Count`现在会回来`2`。
4.  An`ArgumentOutOfRangeException`在第一个线程上引发。`list`包含`{'b', 'a'}`. `list.Count`现在会回来`2`。

所有这些都是正确的，因为列表是一个列表，我们必须在另一个之前插入一个项目。我们还必须将最终成为第一个的值作为返回的值`list[0]`。我们还必须将线程 1 的读取视为在此插入之后或之前发生，因此我们要么放入第一个元素，要么`c`抛出`ArgumentOutOfRangeException`（不是线程安全的缺陷，查看空的第一项list 超出范围，无论线程问题如何。

然而，由于`List<char>`不是线程安全的，因此可能会发生以下情况：

1.  上述可能性之一（我们很幸运）。
2.  `list`包含`{'a'}`. `list.Count` 返回 1.`c`包含`'b'`
3.  `list`包含`{'b'}`. `list.Count` 返回 1.`c`包含`'a'`
4.  `list`包含`{'a'}`. `list.Count` 返回 2.`c`包含`'b'`
5.  `list`包含`{'b'}`. `list.Count` 返回 2.`c`包含`'a'`
6.  一个或两个插入调用，和/或读取调用抛出一个`IndexOutOfRangeException`. （注意，不是`ArgumentOutOfRangeException`第一个线程引发的可接受行为）。
7.  断言失败。
8.  以上任何一项（包括正确的行为），然后在`list`半小时后执行的另一个操作会引发一些异常，该异常`List<char>`未记录为针对该方法引发的异常。

换句话说，我们完全把整个事情搞砸了，`list`以至于程序员认为它不可能处于一种状态，并且所有的赌注都被取消了。

好的，那么我们如何构建线程安全的集合。

一种简单的方法是锁定每个更改状态或依赖于状态（往往是所有状态）的方法。对于静态方法，我们锁定一个静态字段，例如我们锁定一个实例字段的实例方法（我们可以锁定一个静态字段，但对单独对象的操作会相互阻塞）。我们确保如果一个公共方法调用另一个公共方法，它只锁定一次（也许通过让公共方法每个调用一个不锁定的私有工作方法）。有可能一些分析表明我们可以将所有操作分成两个或多个相互独立的组，并为每个组拥有单独的锁，但不太可能。

优点是简单，缺点是它锁定了很多，可能会阻止许多相互安全的操作。

另一个是共享排他锁（因为 .NET 通过错误命名`ReaderWriterLock`和`ReaderWriterLockSlim`- 错误命名提供，因为除了单写多读之外还有其他场景，包括一些实际上完全相反的场景）。只读操作（从内部看 - 使用记忆的只读操作并不是真正的只读操作，因为它可能会更新内部缓存）可以安全地同时运行，但写操作必须是唯一发生的操作，共享独占锁让我们可以确保这一点。

另一种是通过条带锁定。这就是当前实施的`ConcurrentDictionary`工作方式。创建了几个锁，并为每个写操作分配一个锁。虽然其他写入可能同时发生，但那些会互相伤害的写入将试图获得相同的锁。某些操作可能需要获取所有锁。

另一种是通过无锁同步（有时称为“低锁”，因为所使用的原语的某些特性在某些方面类似于锁，但在其他方面则不然）。[https://stackoverflow.com/a/3871198/400547](https://stackoverflow.com/a/3871198/400547)显示了一个简单的无锁队列，并`ConcurrentQueue`再次使用了不同的无锁技术（在.NET 中，我上次查看 Mono 时与该示例很接近）。

虽然无锁方法可能听起来像是最好的方法，但并非总是如此。[我自己在https://github.com/hackcraft/Ariadne/blob/master/Collections/ThreadSafeDictionary.cs](https://github.com/hackcraft/Ariadne/blob/master/Collections/ThreadSafeDictionary.cs)上的无锁字典在某些情况下比`ConcurrentDictionary`'s 条带锁定更好，但在许多其他情况下则不如。为什么？好吧，首先`ConcurrentDictionary`几乎可以肯定的是，我花在调音上的时间比我所能提供的还多！不过说真的，确保无锁方法是安全的，需要与任何其他代码一样消耗周期和内存的逻辑。有时它超过了锁的成本，有时则不然。（编辑：目前，我现在`ConcurrentDictionary`在各种各样的情况下都击败了，但是背后的人`ConcurrentDictioanry`很好，所以在下一次更新时，平衡可能会在更多情况下恢复到他们的青睐）。

最后，有一个简单的事实，即某些结构对于某些操作本身是线程安全的。`int[]`例如是线程安全的，就好像有几个线程正在读写，`myIntArray[23]`虽然有多种可能的结果，但它们都不会破坏结构，所有读取都将看到初始状态，或者其中一个其中一个线程正在写入的值。尽管由于 CPU 缓存陈旧，您可能希望使用内存屏障来确保读取器线程在最后一个写入器完成后很长时间仍未看到初始状态。

现在，适用的`int[]`情况也适用`object[]`（但请注意，对于值类型大于其运行的 CPU 将以原子方式处理的数组的数组，情况并非如此）。由于`int[]`和`object[]`在一些基于字典的类内部使用 -`Hashtable`并且在这里特别感兴趣，`Cache`作为示例 - 可以以这样的方式构造它们，使得结构对于单个写入器线程和多个读取器线程（而不是多个写入器，因为作家时不时地必须调整内部存储的大小，这更难实现线程安全）。这是`Hashtable`（IIRC）的情况，`Dictionary<TKey, TValue>`对于某些类型也是如此，`TKey`并且`TValue``TKey`, 但不能保证这种行为，而且对于和`TValue`)的某些其他类型肯定不是真的。

一旦你的结构对于多个读取器/单个写入器来说是自然线程安全的，那么让它对多个读取器/多个写入器来说是线程安全的就是锁定写入的问题。

最终结果是，您获得了线程安全的所有好处，但成本根本不会影响读者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T12:19:40.020

线程安全不适用于阅读。缓存对于删除/插入记录是线程安全的。多个线程将能够同时读取一个值。如果值在线程读取时被删除，则在删除后进入的值只会从缓存中获取空值（缓存未命中）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T12:42:41.653

线程安全并不意味着实现线程安全的任何*特定*策略（例如锁定）。它只是说，如果多个线程正在与对象交互，那么它将继续产生其约定的行为——其中约定是每个公共或受保护成员的记录行为。

如果没有进一步的文档，那么它是关于如何实现线程安全的实现细节，并且可能会发生变化。

目前，它*可以对每次访问都采取排他锁。*或者它可能使用无锁技术。无论哪种方式都没有记录，但如果在读取操作期间出现排他锁*，*我会感到非常惊讶。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T12:15:50.707

据我了解，其他线程在写入对象时被阻塞。
在读取对象时阻塞其他线程没有任何意义——因为读取操作不会改变对象状态。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-10T12:42:24.020

对于并发编写，.NET 4 有一个[ConcurrentQueue](http://msdn.microsoft.com/en-us/library/dd267265.aspx)集合，效果很好。我已经使用了很多次，还没有遇到任何问题。至于阅读，我使用 List 集合进行并行处理并返回正确的值。请参阅下面的一个非常基本的示例，说明我如何使用它。

```
List<string> collection = new List<string>(); // Empty list in this example
ConcurrentQueue<string> concurrent = new ConcurrentQueue<string>();

Parallel.ForEach(collection, new ParallelOptions {MaxDegreeOfParallelism = Environment.ProcessorCount}, item =>
{
    concurrent.Enqueue(item);
}); 
```

不过，要回答您的问题，该集合在同时读取时不会锁定其他线程。但是，如果您正在写入队列（同时），则很有可能某些项目可能会被踢出而不插入。'lock' 可以用来避免这种情况，但这会暂时阻塞其他线程。

# javascript - 在 JavaScript 中捕获调用者的作用域

> ID：11901387
> 
> 赞同：2
> 
> 时间：2012-08-10T12:10:04.953
> 
> 标签：javascript, node.js, eval

此代码在运行 eval 的同一范围内工作：

```
function compile(fn) {
    //Actually calls fn.toString() then compiles some es.next type 
    //features to current versions of es.
    return 'function () { return a; }';
}

function runAsStringA() {
    var a = 10;
    var compiled = eval(compile());
    return compiled();
} 
```

这不起作用，但符合我在理想世界中想做的事情：

```
function compile(fn) {
    return eval('function () { return a; }');
}

function runAsStringA() {
    var a = 10;
    var compiled = compile();
    return compiled();
} 
```

本质上，我需要一种在父级范围内进行评估的方法。

我试过了：

```
function compile(fn) {
    return eval.bind(this, 'function () { return a; }');
}

function runAsStringA() {
    var a = 10;
    var compiled = compileSpecialFunction()();
    return compiled();
} 
```

问题是编译后的函数没有进入`a`范围。

我正在尝试在 node.js 环境中使用它，所以如果解决方案仅适用于 node.js 就可以了

它甚至可能需要一些本机代码，尽管我没有编写本机插件的经验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T19:01:54.897

不幸的是，这似乎是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T13:47:03.877

虽然我同意您应该避免`eval`，并且可能`veal`（正如我的拼写检查器所建议的那样），但这可能会有所帮助：

```
function compile(a) {
    return eval('(function(a) { return a; })').call(this, a);;
}

function runAsStringA() {
    var a = 10;
    var compiled = compile(a);
    return compiled;
}

console.log(runAsStringA()); 
```

# jquery - jQuery - 如何根据选择器更改元素

> ID：11901389
> 
> 赞同：0
> 
> 时间：2012-08-10T12:10:10.997
> 
> 标签：jquery

首先，我是 jQuery 的新手，来自 Java 背景，如果这个问题看起来有点奇怪，我深表歉意。

基本上，我在一个页面上有两个独立的不相关元素，并且根据一个的选择器结果，我需要更改第二个元素的样式。

我需要检查：

```
$("#slide1.current") 
```

找到后，我需要执行以下操作：

```
$('.asset.assetStyleNone.assetCount1').removeClass('assetStyleNone').addClass('currentSlide'); 
```

我想我理想情况下需要做的事情是：

```
$("#slide1.current").XXX(function() {
 $('.asset.assetStyleNone.assetCount1').removeClass('assetStyleNone').addClass('currentSlide');

}); 
```

但我的问题是知道“XXX”应该是什么。我知道它不能是一个“点击”事件，因为没有交互式点击可以改变这个页面上的元素状态。

这种事情在jQuery中可能吗？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T12:18:28.227

如果要检查是否`#slide1.current`存在，请使用：

```
if($("#slide1.current").length>0) { 
     $('.asset.assetStyleNone.assetCount1').removeClass('assetStyleNone').addClass('currentSlide');
} 
```

请注意，此检查仅进行一次，我不确定您是否希望在创建所选元素的事件上进行回调。

# generics - F# 泛型方法和运算符

> ID：11901394
> 
> 赞同：4
> 
> 时间：2012-08-10T12:10:21.347
> 
> 标签：generics, f#, type-inference

到目前为止，我对 F# 中的类型推断印象深刻，但是我发现了一些它并没有真正得到的东西：

```
//First up a simple Vect3 type
type Vect3 = { x:float; y:float; z:float } with 
  static member (/) (v1 : Vect3, s : float) = //divide by scalar, note that float
    {x=v1.x / s; y= v1.y /s; z = v1.z /s}
  static member (-) (v1 : Vect3, v2 : Vect3) = //subtract two Vect3s
    {x=v1.x - v2.x; y= v1.y - v2.y; z=v1.z - v2.z}
  //... other operators...

//this works fine
let floatDiff h (f: float -> float) x = //returns float
  ((f (x + h)) - (f (x - h)))/(h * 2.0)

//as does this
let vectDiff h (f: float -> Vect3) x = //returns Vect3
  ((f (x + h)) - (f (x - h)))/(h * 2.0)

//I'm writing the same code twice so I try and make a generic function:
let genericDiff h (f: float -> 'a) x : 'a = //'a is constrained to a float 
  ((f (x + h)) - (f (x - h)))/(h * 2.0) 
```

当我尝试构建最后一个函数时，一个蓝色波浪形出现在分隔符号下方，编译器说“此构造导致代码比类型注释指示的更通用。类型变量 'a 已被限制为输入‘浮动’”。我为 Vect3 提供了适合`/`该功能的运算符。为什么要警告我？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T12:13:55.423

标准 .NET 泛型的表达能力不足以支持这种泛型函数。问题是您的代码可以适用于任何`'a`支持减法运算符的代码，但 .NET 泛型无法捕获此约束（它们可以捕获接口约束，但不能捕获成员约束）。

但是，您可以使用 F#`inline`函数和可以具有附加成员约束的[静态解析类型参数。](http://msdn.microsoft.com/en-us/library/dd548046.aspx)我写了[一篇文章，提供了](http://tomasp.net/blog/fsharp-generic-numeric.aspx)有关这些的更多详细信息。

简而言之，如果您将函数标记为`inline`并让编译器推断类型，那么您会得到（我删除了对类型参数的明确提及，因为这会使情况变得更加棘手）：

```
> let inline genericDiff h (f: float -> _) x = 
>   ((f (x + h)) - (f (x - h))) / (h * 2.0);;

val inline genericDiff :
  float -> (float ->  ^a) -> float -> float
    when  ^a : (static member ( - ) :  ^a *  ^a -> float) 
```

编译器现在使用`^a`而不是`'a`说参数是静态解析的（在内联期间），它添加了一个约束，说`^a`必须有一个`-`接受两个*事物*并返回的成员`float`。

可悲的是，这不是您想要的，因为您的`-`运算符返回`Vect3`（而不是`float`编译器推断的）。我认为问题在于编译器希望`/`运算符具有两个相同类型的参数（而你的参数是`Vect3 * float`）。您可以使用不同的运算符名称（例如，`/.`）：

```
let inline genericDiff2 h (f: float -> _) x = 
  ((f (x + h)) - (f (x - h))) /. (h * 2.0);; 
```

在这种情况下，它会起作用`Vect3`（如果你重命名标量除法），但它不会很*容易*起作用`float`（尽管可能会有黑客使这成为可能 -[请参阅这个答案](https://stackoverflow.com/questions/4034802/how-would-i-translate-a-haskell-type-class-into-f/8439395#8439395)- 尽管我不会认为惯用的 F# 和我可能会尝试找到一种方法来避免这种情况）。`h`提供按元素划分并作为`Vect3`值传递是否有意义？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-10T14:11:30.703

如果您对文字使用通用数字，它会起作用：

```
let inline genericDiff h f x =
  let one = LanguagePrimitives.GenericOne
  let two = one + one
  ((f (x + h)) - (f (x - h))) / (h * two)

genericDiff 1.0 (fun y -> {x=y; y=y; z=y}) 1.0 //{x = 1.0; y = 1.0; z = 1.0;} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T12:48:20.550

由于某种原因，编译器假定除法的类型签名是

```
^a*^a -> ^b 
```

什么时候应该可以

```
^a*^c -> ^b 
```

我相信[规范](https://research.microsoft.com/en-us/um/cambridge/projects/fsharp/manual/spec.html#_Toc321997206)中的 9.7 暗示了这一点（这是用于度量单位，但我不明白为什么它们是特殊情况）。如果除法可以具有所需的类型签名，您可以这样做：

```
let inline genericDiff h (f: float -> ^a) x = 
    let inline sub a b = (^a: (static member (-):^a * ^a-> ^a) (a,b))
    let inline div a b = (^a: (static member (/):^a -> float-> ^c) (a,b))
    div (sub (f (x+h)) (f(x-h))) (h*2.0) 
```

我已经包含了隐含`sub`的，`div`但它们不应该是必需的 - 想法是使签名明确。

`^a`我相信除了浮动之外不允许其他任何东西的事实实际上可能是一个错误。

# c# - 用零向左填充

> ID：11901395
> 
> 赞同：37
> 
> 时间：2012-08-10T12:10:25.250
> 
> 标签：c#, regex

我想在我的字符串中用零填充每个数字（它必须是 8 位数字）。

例如

```
asd 123 rete > asd 00000123 rete
4444 my text > 00004444 my text 
```

是否可以使用正则表达式来做到这一点？特别是`Regex.Replace()`？

请注意，对于不同的数字，零的数量是不同的。我的意思是填充的数字必须是 8 位数字。

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2012-08-10T12:13:35.737

微软为此内置了函数：

```
someString = someString.PadLeft(8, '0'); 
```

这是[MSDN上的一篇文章](http://msdn.microsoft.com/en-us/library/dd260048.aspx)

要使用正则表达式，请执行以下操作：

```
string someText = "asd 123 rete"; 
someText = Regex.Replace(someText, @"\d+", n => n.Value.PadLeft(8, '0')); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-07-08T08:19:57.893

线程很旧，但也许有人需要这个。

Nickon 表示他想使用正则表达式。为什么？没关系，也许它很有趣。我必须在 SQL 中进行内联替换，因此一些调用 C# 正则表达式的自制 SQL 函数很有帮助。

我需要填充的东西看起来像这样：

```
abc 1.1.1
abc 1.2.1
abc 1.10.1 
```

我想要：

```
abc 001.001.001
abc 001.002.001
abc 001.010.001 
```

所以我可以按字母顺序排序。

到目前为止（我发现）唯一的解决方案是分两步进行填充和截断到正确的长度。我不能使用 Lambda，因为这是在 SQL 中，而且我还没有为此准备好我的函数。

```
//This pads any numbers and truncates it to a length of 8
var unpaddedData = "...";
var paddedData = Regex.Replace(unpaddedData , "(?<=[^\d])(?<digits>\d+)",
                                                     "0000000${digits}");
var zeroPaddedDataOfRightLength = Regex.Replace(paddedData ,"\d+(?=\d{8})",""); 
```

说明：

```
(?<=[^\d])(?<digits>\d+)
(?<=[^\d])       Look behind for any non digit, this is needed if there are 
                 more groups of numbers that needs to be padded
(?<digits>\d+)   Find the numbers and put them in a group named digits to be 
                 used in the replacement pattern

0000000${digits} Pads all the digits matches with 7 zeros

\d+(?=\d{8})     Finds all digits that are followed by at exactly 8 digits. 
                 ?= Doesn't capture the 8 digits.

Regex.Replace(...,"\d+(?=\d{8})","")   
                 Replaces the leading digits with nothing leaving the last 8. 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-10T12:14:10.803

如果您没有正则表达式的任何附件，只需使用格式字符串：

[C#将int转换为带有填充零的字符串？](https://stackoverflow.com/questions/4325267/c-sharp-convert-int-to-string-with-padding-zeros)

[http://www.xtremedotnettalk.com/showthread.php?t=101461](http://www.xtremedotnettalk.com/showthread.php?t=101461)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-26T19:55:20.990

```
static void Main(string[] args)
    {
       string myCC = "4556364607935616";
       string myMasked = Maskify(myCC);
       Console.WriteLine(myMasked);
    }        

public static string Maskify(string cc)
    {
       int len = cc.Length;
       if (len <= 4)
          return cc;

       return cc.Substring(len - 4).PadLeft(len, '#');
    } 
```

# 输出：

######5616

只需将“#”替换为 0 或“0”即可。希望有帮助:)

# jquery - 取消选中复选框

> ID：11901398
> 
> 赞同：0
> 
> 时间：2012-08-10T12:10:32.460
> 
> 标签：jquery, asp.net

我想使用 JQuery 取消选中处于禁用状态的复选框

我在 Jquery 中使用带有“更改”事件的实时类型。以下代码取消选择所有复选框。但我只需要禁用复选框。

```
$('.checkboxGroups').removeAttr('checked').trigger('change'); 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T12:16:25.140

尝试这个

```
 $(".checkboxGroups:disabled").prop('checked', false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T12:14:01.193

你可以使用类似的东西

```
$(".checkboxGroups:disabled") 
```

查看更多关于[:disabled 选择器](http://api.jquery.com/disabled-selector/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T12:21:37.570

首先，您必须使用以下语句找到禁用复选框，然后执行您的操作。

```
$('.checkboxGroups').attr('disabled', true) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T12:14:55.997

使用 CSS`:disabled`伪选择器：

```
$('.checkboxGroups:disabled').removeAttr('checked').trigger('change'); 
```

...虽然给定多个类名 - '.checkboxGroups' 是*容器*吗？

如果是这样，那么：

```
$('.checkboxGroups input:disabled').removeAttr('checked').trigger('change'); 
```

# vb.net - 使用 Visual Basic 读取 Access 2007 数据库

> ID：11901400
> 
> 赞同：0
> 
> 时间：2012-08-10T12:10:36.157
> 
> 标签：vb.net, ms-access-2007

在 Visual Studio 2010 中使用 Visual Basic（和 .NET 4），我想从 Access 2007 .accdb 数据库中读取数据。

我使用内置向导连接数据库（没有将其导入项目），即：“添加新数据源”>“数据库”> ...然后自动生成一个ConnectivityString。

网络上的许多文章都谈到了如何使用连接字符串连接到数据库，例如`Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\myFolder\myAccess2007file.accdb;Persist Security Info=False;`

但是我的 App.config 文件中已经有几个这样的命令（自动生成）。例如：

```
<connectionStrings>
        <add name="Wolf_Calc.My.MySettings.wolf_calcConnectionString"
            connectionString="Provider=Microsoft.ACE.OLEDB.12.0;Data Source=|DataDirectory|\wolf-calc.accdb"
            providerName="System.Data.OleDb" /> 
```

然后我可以开始在我的代码中编写查询并执行类似的操作 `value = table1.SearchCriterion("x").SearchRange("y")`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T14:54:57.893

使用向导添加数据源时，会自动创建连接字符串。但是为了能够正确使用数据库，还需要执行更多步骤。

1.  创建表[适配器](http://msdn.microsoft.com/en-us/library/bz9tthwx%28v=vs.100%29#Y0)。为此，请将表格从“数据源”窗格拖到表单上。
2.  将数据加载到您可以使用的表中。例如，假设我有一个名为 StarTrek 的数据库，其中包含一个表 Enterprise。以下行将数据加载到 Enterprise 表中：

    ```
    Me.EnterpriseTableAdapter.Fill(Me.StarTrekDataSet.Enterprise) 
    ```

3.  创建一个标量查询。它会在您的表中找到一个值。在数据设计器中，向 Enterprise 表添加一个查询（右键单击 TableAdapter 区域）。如果所需结果是 Spock 先生（“姓名”列）的年龄（“年龄”列），则查询将是：

    ```
    ' Access Database
    SELECT Age FROM Enterprise WHERE (Name = ?)

    ' for an SQL Database
    SELECT Age FROM Enterprise WHERE Name = [@Name] 
    ```

4.  现在可以进行搜索。假设您将查询命名为 ScalarQueryAge。下面将 Spock 先生的年龄显示在一个标签中。

    ```
    Dim AgeAdapter As New StarTrekDataSetTableAdapters.EnterpriseTableAdapter
    Dim Age As Integer = CType(AgeAdapter.ScalarQueryAge("Mister Spock"), Integer)
    LabelAgeMisterSpock.Text = "He is actually " & Age & "!!" 
    ```

# alfresco - 设置 alfresco open-cmis-extension

> ID：11901403
> 
> 赞同：0
> 
> 时间：2012-08-10T12:10:48.920
> 
> 标签：alfresco, liferay-6, cmis

我正在开发一个 Liferay portlet，它通过 Cmis 和 wsdl 绑定连接到 Alfresco 存储库，（BINDING_TYPE = BindingType.WEBSERVICES）

到目前为止，我已经实现了大部分必需的功能（浏览、文件夹/文档管理、文档版本、权限等）。现在是时候实现一些与方面相关的功能了，所以是时候使用 alfresco open-cmis-extensions 了，这似乎是一个简单的过程。

我必须做的一件事是将会话工厂更改为“AlfrescoObjectFactoryImpl”

```
parameter.put(SessionParameter.OBJECT_FACTORY_CLASS, "org.alfresco.cmis.client.impl.AlfrescoObjectFactoryImpl"); 
```

之后，我仍然可以成功获取会话，但是一旦我尝试获取任何存储库文件夹，我就会在文件夹属性被转换时收到 InvalidArgumentException

* * *

我的调试日志：

> ！12:51:11,542 调试 CmisWebServicesSpi:58 - 初始化 Web 服务 SPI ... 12:51:11,692 调试 AbstractPortProvider:244 - 初始化 Web 服务 org.apache.chemistry.opencmis.binding.webservices.ObjectService ... 12:51： 16,426 调试 PortProvider：65 - 创建 {http://docs.oasis-open.org/ns/cmis/ws/200908/}ObjectService ... 的 Web 服务端口对象... 12:51:36,103 错误 [render_portlet_jsp:154] java .lang.IllegalArgumentException：未知方面属性：[http ://docs.oasis-open.org/ns/cmis/core/200908/](http://docs.oasis-open.org/ns/cmis/core/200908/) 在 org.alfresco.cmis.client.impl.AlfrescoObjectFactoryImpl.convertProperties(AlfrescoObjectFactoryImpl.java:265) 在 org.apache.chemistry.opencmis.client.runtime.AbstractCmisObject.initialize(AbstractCmisObject.java:108) 在 org.alfresco.cmis .client.impl.AlfrescoFolderImpl.initialize(AlfrescoFolderImpl.java:46) 在 org.apache.chemistry.opencmis.client.runtime.FolderImpl.(FolderImpl.java:69) 在 org.alfresco.cmis.client.impl.AlfrescoFolderImpl。 (AlfrescoFolderImpl.java:39) .........................

* * *

我正在使用：Liferay 6.1 和 alfresco-opencmis-extension-0.3.jar

并且存储库是 alfresco Community - v4.0.0 (4003)

* * *

到目前为止，我最好的猜测是某些属性定义未正确设置，因为命名空间是作为方面属性传递的

对我做错了什么有任何想法吗？

请注意，我还没有尝试做任何与方面相关的事情。通过注释掉“OBJECT_FACTORY_CLASS”参数，一切正常！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T07:27:44.377

按照[Gagravarr](https://stackoverflow.com/users/685641/gagravarr)的思路，我尝试了一个 ATOMPUB 绑定而不是 Web Services，终于连接成功了。

事实证明，AlfrescoAspectsUtils.findAlfrescoExtensions 获取的 alfrescoExtensions 包含具有不正确 propertyDefinitionId 的属性，这导致 AlfrescoAspectsUtils.findAspect 崩溃。

可能没有正确设置该存储库的 Web 服务绑定

经过一些调试，相同的属性值是

> WSDL：-propertyDefinitionId = (http)://docs.oasis-open.org/ns/cmis/core/200908/
> 
> ATOM：propertyDefinitionId = 应用程序：图标

谢谢你加格拉瓦！

# algorithm - 如何计算两次在场的最少人数

> ID：11901406
> 
> 赞同：0
> 
> 时间：2012-08-10T12:10:51.850
> 
> 标签：algorithm, time

我会尽可能清楚。

我有一个事件有两次，开始和结束。（时间为 24 小时制）例如，此事件从 8 点开始，到 12 点结束。

在这个活动中，我有一份人员名单和他们的工作时间表。这是一个例子：

*   人 1 : 从 8:00 到 10:00
*   人 2 : 从 10:00 到 12:00
*   3人：从6:00到15:00
*   4人：从8:00到9:00
*   5人：从9:30到12:00

现在，我需要知道至少有多少人参加了整个活动。

就我而言，它将是**2**，因为：

*   第 1 人与第 2 人相辅相成
*   人 3 将永远在场
*   在 9:00 到 9:30 之间，第 4 和第 5 个人之间有喘息声，因此在此期间，第 4 和第 5 个人之间不会有人在场。

如果我用时间解释这一点：

*   从 8:00 到 9:00 : 人 1, 3, 4
*   从 9:00 到 9:30 : 人 1, 3
*   从 9:30 到 10:00 : 人 1, 3, 5
*   从 10:00 到 12:00 : 人 2, 3, 5

大多数情况下，该活动将有 3 人，但如果是 2 人，则最低。

我怎么能用算法得到这个数字，我不知道这个。

我想过以分钟为单位转换时间（我不会低于分钟），将范围设置为事件时间（从 8*60 到 12*60），并将每个人的存在添加为新范围，然后计数每分钟有多少个切片（1 个切片 = 1 人）。但我觉得这效率不高，因为我必须计算切片 4*60 分钟：/（从 8 -> 12）。

你会怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T12:18:18.480

取人号的开始时间和结束时间`i`，并命名为`s_i`和`e_i`。

将所有这些放在一个列表中，`times`. 然后执行以下操作：

```
# start_time contains the start time of the event
# end_time contains the start time of the event
sort(times) # When doing this sort, make sure that if a s_i
            # is at the same time as a e_j, put the s_i first.

current_number = number of people who're there at start_time
remove all times that match start_time from times

minimum_number = current_number

for time in times:
    if time is an s_i: current_number += 1

    if time is an e_i:
        current_number -= 1
        if current_number < minimum_number and time < end_time:
            minimum_number = current_number 
```

运行时间如下：

设为`n`人数。

我们花`O(n lg n)`时间进行排序，因为我们只有`2n`时间进行排序。

然后，我们花`O(n)`时间迭代时间，做不断的工作。

总体而言，`O(n lg n)`. 请注意，此运行时间完全独立于它跨越的时间间隔有多大，并且仅取决于您正在处理的人数。

这是[扫线算法](http://en.wikipedia.org/wiki/Sweep_line_algorithm)的一种形式。我们穿越时代，只停留在兴趣点（the `s_i`and `e_i`s.）

请注意，如果出现平局，我们将 s 排序在`s_i`s 之前的原因`e_j`如下：

如果我们不这样做，那么想象我们有两个人：Bob 从 8 点到 10 点在这里，Alice 从 10 点到 12 点在这里。如果我们不仔细排序，我们可能会得到以下时间列表：

```
times = [(s_Bob, 8), (e_Bob, 10), (s_Alice, 10), (e_Alice, 12)] 
```

如果我们这样排序，那么看起来 Bob 10 点离开后就没有人了。但是，Alice 在那里，因为她同时到达。因此，为了防止这种情况，我们对它进行排序，使得开始时间在结束时间之前，以防出现平局：

```
times = [(s_Bob, 8), (s_Alice, 10), (e_Bob, 10), (e_Alice, 12)] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T12:15:27.243

快速回答，也许每当有人开始/完成工作时更新人数？

例如，在 t0 时，您将其设置为知道谁在那里。每隔一分钟，或者更好，对于每个离开/进入日期（排序），请注意新的出席人数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T12:32:26.563

我认为你的算法应该这样设计：

*   从 8:00 开始：第 1、3、4 人
*   从 9:00 开始：第 1 人、第 3 人
*   从 9:30 开始：第 1、3、5 人
*   从 10:00 开始：第 2、3、5 人

首先将事件的开始和结束时间添加到*集合中* 接下来，遍历您的成员，构建一*组*开始和结束时间（集合防止重复）。然后遍历集合中的项目，并针对集合中的每个元素检查每个成员，以查看他的开始时间是否 >= 并且结束时间 > 然后是集合中的项目。有一个内部迭代的计数器来跟踪给定时间的人数，并在两个迭代之外有一个变量来跟踪给定时间的最小人数。在伪代码中：

```
var set : set
var event_start : time = 8:00
var event_end : time = 12:00
set.add(event_start)
foreach(person in people)
    set.add(person.start)
    set.add(person.end)
var min : int = people.size
var time_of_min : time
foreach time in set
    var num_people : int = 0
    foreach person in people
        if person.start >= time && person.end > time
            num_people++
    if num_people < min
        min = num_people
        time_of_min = time
// Handle the special case of the ending time
var num_people_at_end : int = 0
foreach person in people
    if person.end == event_end
        num_people_at_end++
if num_people_at_end < min
    min = num_people_at_end
    time_of_min = event_end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T12:26:38.587

如果您的活动中没有太多人，您可以去做类似的事情

```
minimum -> infinity
for each person in persons do:
    intersections -> 0
    for each other person in persons do:
        if other person start time <= person start time
            if other person end time >= person start time
                intersections++
        else if other person start time < person end time
            intersections++
    if intersections < minimum
        minimum = intersections 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-10T12:31:58.790

hauron 的回答帮助我创建了这个解决方案。

这是伪代码，因为没有语言标签。

有一个排序的开始时间列表和一个排序的结束时间列表
在零开始当前人员
的计数器 还有一个正无穷大的最小人员计数器 将最近时间作为事件的初始时间

一起浏览列表，选择第一个开始时间和第一个结束时间中较早的一个

如果开始时间越早，则增加计数器并删除第一个开始时间 否则结束时间越早，减少计数器并删除第一个结束时间

如果刚刚使用的时间和最近的时间不一样，检查最小人数计数器（例如，如果3个人同时进入，等待更新最小人数计数器，直到处理所有三个人）如果当前人数较少比最小人数，设置最小人数为当前人数

更新最近一次
重复直到两个列表都为空

最少的人数计数器应该有你的答案

# clojure - 用 c2 生成 svg

> ID：11901410
> 
> 赞同：0
> 
> 时间：2012-08-10T12:11:08.183
> 
> 标签：clojure, svg, clojurescript

我有以下代码，旨在将一组设备表示为 SVG：

```
(ns foo.core
  (:use [c2.core :only [unify]]
        [c2.dom :only [replace! append!]]
        [c2.svg :only [translate]]))

(def conf 
  { :devices [{:alias "OSC Sender",
               :name "OSC Sender",
               :ins []},
              {:alias "const2", :name "const",
               :outs []}],
    :layout [{:alias "const2",
              :x 72.12447405329594,
              :y 99.88499298737729},
             {:alias "tick",
              :x 82.5732819074334,
              :y 133.91374474053296},
             {:alias "OSC Sender",
              :x 185.17741935483872,
              :y 113.90322580645162}]})

(def render-config
  [:svg {:viewBox "0 0 900 400"}
   [:rect {:id "frame" :x "1" :y "1" :width "600" :height "300" :fill "none" :stroke "blue"}]
   (unify (:layout conf)
          (fn [{alias :alias x :x y :y}]
            [:g {:transform (translate [x y])}
              [:text alias]]))])

(append! "#main" render-config) 
```

试图`render-config`在 REPL 中进行评估，我得到：

```
[:svg {:viewBox "0 0 900 400"} [:rect {:width "600", :y "1", :x "1", :fill "none", :stroke "blue", :id "frame", :height "300"}] ([:g {:transform "translate(72,99)"} [:text "const2"]] [:g {:transform "translate(82,133)"} [:text "tick"]] [:g {:transform "translate(185,113)"} [:text "OSC Sender"]])] 
```

对我来说，这看起来像是一个适当的 Hiccup 表示（当然`unify`是它的魔力）。

`render-config`然而，在网页上下文中进行评估时（使用`singult`），我只得到一个错误。在浏览器中生成一个非常简单的 SVG（基本上只有封闭的“框架”矩形）。

任何提示/提示？

干杯!

*注意：`render-config`使用 进行渲染`Hiccup`，然后将结果输出到文件中，会得到 Inkscape 可读的 SVG 图像。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:48:31.603

问题是你`unify`不是独生子。在 ClojureScript 中，unify 的语义是“确保这里所有的孩子都是通过这个模板 fn 获得的这些数据”，而正在发生的事情是 Singult 正试图将`rect`变成 a `g`（以匹配模板）。这是荒谬的，这就是它爆炸的原因。如果你包装统一，它看起来像

```
[:g.devices (unify ...)] 
```

你应该没事。

这在服务器端有效，因为`unify`被视为`map`.

# c# - 保持 Viewstate 持久化并按需检索

> ID：11901411
> 
> 赞同：1
> 
> 时间：2012-08-10T12:11:08.667
> 
> 标签：c#, asp.net, viewstate, asp.net-4.0

我有一个包含多个控件的页面，例如 Checkboxlists 和两个保存搜索结果的容器。

我被告知要使该站点持久化，因此用户可以在浏览我们的站点时从任何地方返回并找到它的设置已恢复（阅读：框已选中；结果仍然可用）

到目前为止，我已经尝试覆盖 SavePageStateToPersistenceMedium 和 LoadPageStateFromPersistenceMedium，但是当我单击页面上的一个按钮时，我经常会遇到黄屏死机。

```
protected override void SavePageStateToPersistenceMedium(object viewState)
{
    string str = "VIEWSTATE_" + Request.UserHostAddress;
    Cache.Add(str, viewState, null, DateTime.Now.AddMinutes(Session.Timeout), TimeSpan.Zero, CacheItemPriority.Default, null);
    ClientScript.RegisterHiddenField("__VIEWSTATE_KEY", str);
    ClientScript.RegisterHiddenField("__VIEWSTATE", "");
}
protected override object LoadPageStateFromPersistenceMedium()
{
    string str = Request.Form["__VIEWSTATE_KEY"];
    if (!str.StartsWith("VIEWSTATE_"))
    {
        throw new Exception("Invalid viewstate key:" + str);
    }
    return Cache[str];
} 
```

我的代码有什么问题吗？我需要调用什么来检索 Page_Load 或 Page_init 上的 Viewstate 来检索它？

编辑：这是通过 session["xyz"] 解决它的方法

```
List<ListItem> selectItems = new List<ListItem>();
        foreach (ListItem item in CheckBoxListLevel.Items)
        {
            if (item.Selected)
                selectItems.Add(item);
        }

        Session.Add("SavedLevelItems", selectItems); 
```

//然后在Page_Load

```
 if (Session["SavedLevelItems"] != null)
    {
        List<ListItem> SessionList = (List<ListItem>)Session["SavedLevelItems"];
        foreach (var item in SessionList)
        {
            if (item.Selected)
            {
                CheckBoxListLevel.Items.FindByText(item.Text).Selected = item.Selected;
            }
        }
    } 
```

但是，如果我查看搜索结果，然后只触发 GET 以返回初始页面，则所有存储的项目都不会正确呈现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T12:22:48.847

根据这个：

> 因此用户可以在浏览我们的网站时从任何地方返回并发现它的设置已恢复（阅读：框已选中；结果仍然可用）

仅当您在同一页面上时，视图状态才有效。它用于记住跨回发的页面状态。如果您导航到另一个页面，之前的页面视图状态将丢失。您无法更改此行为。

您正在寻找的是[ASP.Net 配置文件](http://msdn.microsoft.com/en-us/library/2y3fs9xs.aspx)

我只是回答一个相关的问题：

[将html的状态保存到数据库](https://stackoverflow.com/q/11897549/1268570)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T14:33:20.590

你的方法有几个困难。

直接的问题是您`__VIEWSTATE`在方法中手动添加了“”隐藏字段`SavePageStateToPersistenceMedium`。这会导致在发送到浏览器的 html 页面中呈现两个空的隐藏字段。由于您正在覆盖该方法，因此该页面将自动发送一个空的此类字段。

但是您的方法的一个更大的问题是该`LoadPageStateFromPersistenceMedium`方法仅在页面检测到回发时才被页面调用。

通常，如果用户在您的站点（或其他站点）上执行其他操作，然后返回到您的页面，您的页面将重新加载（常规 GET，因此它不是回发）。因此，您为相关页面缓存的任何视图状态都不会被加载。

为了解决您的问题，我认为您不必存储页面的整个视图状态，而是只存储足够的信息来重新绑定/重新初始化页面上的控件。然后，当页面加载并且它不是回发时，您可以获取保存的状态`Page_Load`并重新初始化页面。

要存储状态，您可以使用几种可能的状态容器中的任何一种，包括：

*   会议
*   缓存
*   Sql server 或其他自定义进程外存储
*   配置文件（就像 Jupaol 建议的那样，这至少是存储在 sql 数据库中的“默认”Asp.Net 提供程序）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T08:22:55.250

最终解决方案非常简单。我只需要一些控件的状态而不是整个页面，因为结果可能随时改变。

问题是，CheckBoxLists 的数据源是在 aspx 文件中定义的。这导致当我尝试通过 Page_Load() 访问控件时没有加载任何项目。

所以我将整个数据访问逻辑转移到文件后面的代码中，包裹在一个 if 语句中。如果合适的会话对象可用，则数据源是会话对象，否则从数据库中获取。

```
 protected void fillEntrylevelList()
{
    using (OleDbConnection connection = new OleDbConnection(ConfigurationManager.ConnectionStrings["TestEnvironment"].ConnectionString))
    {
        string EntrylevelQuery = @"INSERT SQL STATEMENT HERE";
        OleDbCommand command = new OleDbCommand(EntrylevelQuery, connection);
        if (Session["SavedLevelItems"] != null)
            {
                CheckBoxListLevel.Items.Clear();
                List<ListItem> SessionList = (List<ListItem>)Session["SavedLevelItems"];
                foreach (var item in SessionList)
                {
                    try
                    {
                        CheckBoxListLevel.Items.Add(item);
                    }
                    catch { }

                }
            }
        else
        {
            connection.Open();
            CheckBoxListLevel.DataTextField = "bez_level";
            CheckBoxListLevel.DataValueField = "id_level";
            OleDbDataReader ListReader = command.ExecuteReader();
            CheckBoxListLevel.DataSource = ListReader;
            CheckBoxListLevel.DataBind();
            ListReader.Close(); ListReader.Dispose();
            GC.Collect();
        }
    }
} 
```

亲切的问候

# path - Lua 的 `require` 可以处理包含隐藏目录/句号的路径吗？

> ID：11901415
> 
> 赞同：2
> 
> 时间：2012-08-10T12:11:21.337
> 
> 标签：path, lua

在 Linux 下，使用 Lua 5.1，我有一个位于隐藏目录下的 lua 脚本：`~/.texmf/lua/print_table.lua`. （它与 LuaTeX 相关，这就是它位于 texmf 目录中的原因。）我`lua`从我的主目录交互式运行，尝试访问`require`该文件，并收到以下错误消息：

```
> require('.texmf/lua/print_table')
stdin:1: module '..texmf/lua/print_table' not found:
    no field package.preload['.texmf/lua/print_table']
    no file './/texmf/lua/print_table.lua'
    ... [file not found in other - irrelevant - trees, either, of course]

> require('/home/me/.texmf/lua/print_table')
stdin:1: module '/home/me/.texmf/lua/print_table' not found:
    no field package.preload['/home/me/.texmf/lua/print_table']
    no file './/home/me//texmf/lua/print_table.lua'
    ... 
```

因此，显然`require`将句点变成了斜线。转义句号不起作用：我尝试将句号加倍，在它前面贴一个反斜杠，然后在它前面贴两个反斜杠。有什么方法可以访问`require`在其路径中具有隐藏目录（或任何其他句号）的文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T13:08:55.900

`require`需要一个*模块名称*，而不是*路径*。

您可能想要添加`/home/me/.texmf/lua/?.lua`到`package.path`或`LUA_PATH`。然后你就可以说`require "print_table"`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-10T12:26:02.673

您可以使用`loadfile`而不是要求；这样，您可以指定直接路径。最近有个问题...

# cassandra - 无法使用 bin/cassandra 启动 Cassandra db

> ID：11901421
> 
> 赞同：23
> 
> 时间：2012-08-10T12:11:40.450
> 
> 标签：cassandra

我有带有 cassandra 1.1.3（tarball 安装）的 Ubuntu 12.04，当我尝试启动 cassandra 时，我得到以下信息：

```
user@ubuntu:~/apache-cassandra-1.1.3/bin$ sudo ./cassandra -f
xss =  -ea -javaagent:./../lib/jamm-0.2.5.jar -XX:+UseThreadPriorities -XX:ThreadPriorityPolicy=42 -Xms4G -Xmx4G -Xmn800M -XX:    +HeapDumpOnOutOfMemoryError -Xss128k
user@ubuntu:~/apache-cassandra-1.1.3/bin$ 
```

根据 cassandra 文档，输出看起来不像预期的那样：

```
The service should start in the foreground and log gratuitously to 
standard-out. Assuming you don't see messages with scary words like  
"error", or "fatal", or anything that looks like a Java stack trace,  
then chances are you've succeeded. 
```

那么，问题是什么？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-21T21:28:13.880

该问题可能是由使用 OpenJDK 引起的，如 Cassandra 错误报告中所述，*但是*，请参阅此处的评论以了解在 Sun/Oracle 和其他 JVM 上出现此问题的情况：

*   [https://issues.apache.org/jira/browse/CASSANDRA-2441](https://issues.apache.org/jira/browse/CASSANDRA-2441)

如果您无法安装 Oracle JVM，请尝试在配置脚本中更改**堆栈大小。**`conf/cassandra-env.sh`在第 185 行附近查找以下部分，并将 更改`-Xss180k`为更高的值。

```
if [ "`uname`" = "Linux" ] ; then
  # reduce the per-thread stack size to minimize the impact of Thrift
  # thread-per-client.  (Best practice is for client connections to
  # be pooled anyway.) Only do so on Linux where it is known to be
  # supported.
  # u34 and greater need 180k
  JVM_OPTS="$JVM_OPTS -Xss180k"
fi
echo "xss = $JVM_OPTS" 
```

在 Rackspace 和 Amazon 的 Ubuntu 服务器上测试安装时，我成功使用了 280k。

根据下面评论中的报告，我建议以 20k 为增量增加堆栈大小，从 开始`-Xss200k`，直到 Cassandra 正常启动。请注意，也可以删除此选项并使用每个线程的默认堆栈大小，但请注意这将对内存消耗产生影响。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-17T19:25:45.027

这很可能是由于尝试在 OpenJDK 1.6 下运行导致的，这会导致在 Ubuntu/Debian 下出现分段错误。由于 shell 脚本执行进程的方式，seg 错误被隐藏了。您可以通过修改 $CASSANDRA_HOME/bin/cassandra 来测试这个问题，如下所示：

更改此行：

```
exec $NUMACTL "$JAVA" $JVM_OPTS $cassandra_parms -cp "$CLASSPATH" $props "$class" 
```

对此：

```
echo $NUMACTL "$JAVA" $JVM_OPTS $cassandra_parms -cp "$CLASSPATH" $props "$class" 
```

然后运行`bin/cassandra -f`并复制生成的 java 命令。直接运行这个看看是否会产生分段错误。如果这是您的问题，您需要切换到 Sun 或 IBM JDK，或者您可以升级到 OpenJDK 1.7。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-02T07:07:48.323

我有同样的。流畅的脚步帮助了我。

删除卡桑德拉 `$ apt-get remove cassandra`

更新 apt 存储库 `$ sudo add-apt-repository ppa:webupd8team/java`

重新安装java `$ sudo apt-get install oracle-java8-set-default`

再次安装 cassandra `$ apt-get install cassandra`

我正在使用该[页面中的信息](https://www.digitalocean.com/community/tutorials/how-to-install-cassandra-and-run-a-single-node-cluster-on-ubuntu-14-04)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-07-11T10:22:37.497

如果您确定已正确设置环境变量，请尝试使用命令 - **./cassandra -f start**

# android - 在 Android 上加载时，圆圈太近了，我想我需要一个位图代码，但不知道在哪里.. 知道吗？

> ID：11901424
> 
> 赞同：-3
> 
> 时间：2012-08-10T12:11:44.770
> 
> 标签：android, bitmap, android-canvas

`public class Sample extends Activity { @Override public void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); setContentView(new Draw (this));

```
} 

private class Draw extends View {
    public Draw (Context context) {
        super(context);
    }

    @Override 
    public void onDraw(Canvas canvas) {
        super.onDraw(canvas);

        Paint paint1 = new Paint();
        paint1.setColor(Color.BLUE);
        paint1.setAntiAlias(true);

        Paint paint2 = new Paint();
        paint2.setColor(Color.BLACK);
        paint2.setAntiAlias(true);

        Paint paint3 = new Paint();
        paint3.setColor(Color.YELLOW);
        paint3.setAntiAlias(true);

        Paint paint4 = new Paint();
        paint4.setColor(Color.WHITE);
        paint4.setAntiAlias(true);

        Paint paint5 = new Paint();
        paint5.setColor(Color.RED);
        paint5.setAntiAlias(true);

        canvas.drawColor(Color.BLACK);

        canvas.drawCircle(200, 200, 180, paint1);

        canvas.drawLine(220, 180, 280, 40, paint2);
        canvas.drawLine(220, 180, 280, 40, paint2);

        canvas.drawLine(260, 170, 370, 100, paint2);
        canvas.drawLine(260, 170, 370, 100, paint2);

        canvas.drawLine(380, 200, 260, 200, paint2);
        canvas.drawLine(380, 200, 260, 200, paint2);

        canvas.drawLine(350, 300, 260, 240, paint2);
        canvas.drawLine(350, 300, 260, 240, paint2);

        canvas.drawLine(280, 370, 230, 260, paint2);
        canvas.drawLine(280, 370, 230, 260, paint2);

        canvas.drawLine(200, 380, 200, 200, paint2);
        canvas.drawLine(200, 380, 200, 200, paint2);

        canvas.drawLine(100, 350, 200, 200, paint2);
        canvas.drawLine(100, 350, 200, 200, paint2);

        canvas.drawLine(40, 300, 200, 200, paint2);
        canvas.drawLine(40, 300, 200, 200, paint2);

        canvas.drawLine(120, 200, 20, 200, paint2);
        canvas.drawLine(120, 200, 20, 200, paint2);

        canvas.drawLine(40, 100, 200, 200, paint2);
        canvas.drawLine(40, 100, 200, 200, paint2);

        canvas.drawLine(120, 40, 200, 200, paint2);
        canvas.drawLine(120, 40, 200, 200, paint2);

        canvas.drawLine(200, 200, 200, 20, paint2);
        canvas.drawLine(200, 200, 200, 20, paint2); 

    }
} 
```

}`

我想显示圆圈，但是在 android sdk 上加载它时它太大了，我相信我需要一个位图代码，但不知道在哪里放置它......有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T14:53:50.253

我不确定你想要达到什么目标，但如果圆圈看起来很大，你可以改变`radius`它。

我希望这有帮助。

# javascript - 这是 JavaScript 中变量阴影的一个例子吗？

> ID：11901427
> 
> 赞同：42
> 
> 时间：2012-08-10T12:12:00.637
> 
> 标签：javascript, shadowing

[我在Eloquent Javascript (Chapter 3)](http://eloquentjavascript.net/chapter3.html)中了解了术语变量阴影，但我试图理解这个概念的一个精确的基本示例。

这是阴影的例子吗？

```
var currencySymbol = "$";

function showMoney(amount) {
  var currencySymbol = "€";
  console.log(currencySymbol + amount);
}

showMoney("100");
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-10T12:14:54.530

这也就是所谓的**变量作用域**。

变量仅存在于其包含的函数/方法/类中，并且这些变量将覆盖属于更广泛范围的任何变量。

这就是为什么在您的示例中，将显示欧元符号，而不是美元。（因为包含美元的范围比包含欧元符号的`currencySymbol`范围更广（全球） ）。`currencySymbol`

至于您的具体问题：是的，这是可变阴影的一个很好的例子。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-08-10T12:15:22.833

> 在计算机编程中，当在某个范围（决策块、方法或内部类）中声明的变量与在外部范围中声明的变量具有相同的名称时，就会发生变量隐藏。据说这个外部变量被遮蔽了......

所以我相信你的例子很好。

您有一个与内部方法同名的全局命名变量。内部变量将仅在该函数中使用。没有该变量声明的其他函数将使用全局函数。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-08-10T12:20:00.003

是的，您的示例是阴影的示例。

由于闭包在 JavaScript 中的工作方式，阴影也会在其他场景中持续存在。这是一个例子：

```
var x = -1;
function xCounter() {
    var x = 0;
    return function() {
        ++x;
        return x;
    };
}

console.log(x);   // -1
counter = xCounter();
console.log(counter());   // 1
console.log(counter());   // 2
console.log(x);   // still -1, global was never touched 
```

请注意，在这种情况下，即使 xCounter 返回，它返回的函数仍然具有对其自身的引用，`x`并且该内部函数的调用对全局没有影响，即使原始函数早已超出范围。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-08-07T04:55:23.047

我们不能多次定义一个变量。但是我们可以在不同的范围内定义。

```
let name="tara"
if(true){
  let name="ali"
  if(true){
    console.log(name)
  }
} 
```

变量遮蔽是指局部范围内的变量使用其值而不是父范围内的变量。因此，局部变量的值会遮蔽父级。

在上面的代码中定义了两个名称变量，但它们没有在同一范围内定义。因此，console.log(name) 将检查本地范围，如果它找到它使用它的名称变量，如果没有，它会检查父范围一旦找到它，它会使用那个，所以它不会进入根。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-07-09T08:25:42.690

```
var role = "Engineer";
console.log(role);

function displayRole(){
    role = "developer";
    console.log(role);
}

displayRole();
console.log(role); 
```

注意最后一行代码（console.log）是如何打印`developer`的，但它不在函数范围内。这是一个很好的例子，`shadowing`说明全局作用域中的角色变量已被函数作用域中的角色覆盖。

为了避免遮蔽，函数作用域中的变量应该使用 var 关键字声明，以便它只能被函数访问。

# java - 如何在 servlet 中获取 HTML 滑块的值

> ID：11901432
> 
> 赞同：-1
> 
> 时间：2012-08-10T12:12:18.557
> 
> 标签：java, html, servlets

如果我使用的是 HTML 滑块，如何在 servlet 中获取它所在位置的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T12:23:12.313

您需要在 HTML 页面中设置一个 JavaScript 代码，当滑块移动时将滑块位置发送到服务器。然后 servlet 可以处理这些请求并将其用于您想要的任何事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T20:21:53.217

这里问了一个类似的问题[Servlet return value: JQuery Ajax request](http://www.coderanch.com/t/469356/Servlets/java/Servlet-return-JQuery-Ajax-request)

所说的是正确的，您需要一些类似于以下内容的 javascript 代码：

```
 $.ajax({
            url: "../slider",
            type : 'post',
            data : {
                position: position,
            },
            success : function(answer){

                }
            } 
```

如果您发布代码，我们可能会提供更多帮助。

# jquery - jQuery中的if / else

> ID：11901435
> 
> 赞同：1
> 
> 时间：2012-08-10T12:12:38.253
> 
> 标签：jquery

在这里真的很努力地处理这个简单的代码。我正在检查带有#setactionsuccess 的部分是否存在，如果不存在，我想创建它并将其添加到容器中。第一部分工作顺利，但它永远不会进入“其他”（并且满足条件 - 我三重检查了）。非常感谢任何帮助。

```
if ($('#setactionsuccess')){
    var currenttime = new Date();
    $('#setactionsuccess').empty();
    $('#setactionsuccess').html('<h2>Set successfully deleted</h2><p>Set was successfully removed from this Edition on '+currenttime+'</p>');
} else {
    console.log('here');
    var string = '<section class="successful" id="setactionsuccess"><h2>Set successfully deleted</h2><p>Set was successfully removed from this Edition on '+currenttime+'</p></section>';
    console.log(string);
    $('#currentsets').prepend(string);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T12:14:18.510

试试这个

```
if($('#setactionsuccess').length > 0) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T12:14:33.923

即使没有匹配项，您也总能从选择器中获得一些东西。您必须对照 0 检查匹配数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T12:14:50.837

您可以通过使用检查元素是否存在`length`

```
if($('#setactionsuccess').length) {
   ...
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T12:16:27.303

`if ($('#setactionsuccess'))`总是返回 true
，因为 javascript cheks for `null`and`undefined`和 jquery 永远不会返回 a`null`或`undefine`d 即使存在任何具有 id setactionsuccess dosent 的元素
尝试寻找选择器的长度`$('#setactionsuccess').length`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-10T12:22:20.037

如果您总是有带有 id 的块`#setactionsuccess`并且您需要检查它是否为空，那么这是正确的解决方案：

```
if ($('#setactionsuccess'.text().length != 0)){
    var currenttime = new Date();
    $('#setactionsuccess').empty();
    $('#setactionsuccess').html('<h2>Set successfully deleted</h2><p>Set was successfully removed from this Edition on '+currenttime+'</p>');
} else {
    console.log('here');
    var string = '<section class="successful" id="setactionsuccess"><h2>Set successfully deleted</h2><p>Set was successfully removed from this Edition on '+currenttime+'</p></section>';
    console.log(string);
    $('#currentsets').prepend(string);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-10T12:28:43.157

```
if ($(selector).length) 
```

您可以通过此代码进行检查。

# c++ - 计算 BST 节点移除的时间复杂度

> ID：11901442
> 
> 赞同：0
> 
> 时间：2012-08-10T12:13:11.153
> 
> 标签：c++, algorithm, binary-search-tree

我很难找出平均和最坏情况的时间复杂度。所以我用以下逻辑删除了这个 BST 节点

当您在二叉搜索树中删除一个节点时，有 3 种情况

```
1> The node to delete has no children. That's easy: just release its resources and you're done. Time complexity O(1)

2> The node has a single child node. Release the node and replace it with its child, so the child holds the removed node's place in the tree. Time complexity O(1)

3> The node has two children. Find the right-most child of node's left subtree. Assign its value  to root, and delete this child. **Here time compexity can be maximum O(N)**

To find the node to be deleted can be **maximum O(N)** 
```

那么如何计算总体平均时间复杂度和最差时间复杂度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T16:39:29.840

在这种情况下，我相信最坏情况的复杂性足以描述这种情况。

为了找到最坏情况的复杂性，只需从您提到的三个可能的情况中找出最坏的情况（O（n）情况）。因此，最坏情况的复杂度为 O(n)。

在一些罕见的情况下（例如快速排序），人们选择描述平均情况复杂性和最坏情况复杂性。在快速排序的情况下，这是因为快速排序几乎在所有情况下都是 O(n*log(n))，而在一些非常罕见的情况下只会减少到 O(n^2)。因此，人们既描述了平均情况，也描述了最坏情况的复杂性。

然而，在从二叉搜索树中删除节点的情况下，删除叶节点（没有子节点和最佳情况）不会比删除有两个子节点的节点更频繁或更少（除非您正在为特殊情况进行开发）。

因此，从二叉搜索树中移除节点的复杂度为 O(n)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-17T13:49:25.943

平均情况复杂度为 O(log(n) 在删除的情况下为查找节点需要 O(log(n) 并再次删除 O(log(n)) 因此平均值为 O(log(n))+ O(log(n))=O(log(n)) 最坏的情况显然是 O(n) 更多细节 - [http://en.wikipedia.org/wiki/Binary_search_tree#Deletion](http://en.wikipedia.org/wiki/Binary_search_tree#Deletion)

# apache-poi - 使用 java 生成 MS Word 报告和导出

> ID：11901448
> 
> 赞同：2
> 
> 时间：2012-08-10T12:13:30.850
> 
> 标签：apache-poi, java

我需要使用纯 java 从我的应用程序中导出表并生成报告。不允许使用 COM 或任何需要预安装应用程序的东西。我绝对需要`.doc`格式。`docx`格式是可选的。

*导出*表格就是在word文档中用数据创建简单的表格。生成*报告*就是用模板表中的一些值替换占位符。它还涉及在模板表中插入新的子表或合并单元格和行。

所以，任务是：

*   *在 MS Word 文档中创建表格**   *将子表插入表格单元格**   *合并表格单元格和行**   *替换保留格式的文档中的文本*

    我试图搜索网络，但我设法找到了**Apache POI**和**Aspose**库来完成这项工作。Aspose似乎还可以，但不幸的是我买不起。POI 的文档很差，我无法确定它是否适合。

    此外，我尝试将简单的表格插入到文档中。但它只会破坏文件。查看下面的代码：

    ```
     POIFSFileSystem fs = new POIFSFileSystem(new FileInputStream("poi.doc"));
        HWPFDocument doc = new HWPFDocument(fs);        
        Range range = doc.getRange();

        Table table = range.insertTableBefore((short)5, 5);
        table.getRow(0).getCell(0).replaceText("cell", true);       
        doc.write(new FileOutputStream("poi_out.doc")); 
    ```

    所以在那一刻我有三个问题：

    *   *在这个例子中我做错了吗？**   *POI 是否适用于我提到的任务？**   *您可以推荐哪些其他**免费库***

    感谢您的回复

    **PS**我已经阅读了本网站上有关该主题的一些帖子。他们都没有真正帮助过我。而且他们都老了。从那时起，一些新功能可能发生了变化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T12:29:01.983

有两种方法可以做到这一点：

1.  我真的建议这样做，因为这可以轻松解决您用实际值替换模板占位符的问题：

用你需要的东西创建一个 HTML 文件。使用速度作为您的模板引擎。现在，将占位符替换为代码中的值后，使用扩展名“.doc”或“.docx”保存文件。结果文件将很好地用word打开。它将在 Web 布局中打开，用户可以根据需要切换到打印布局。

[http://velocity.apache.org/engine/releases/velocity-1.5/user-guide.html](http://velocity.apache.org/engine/releases/velocity-1.5/user-guide.html)

1.  看看 docx4j。

[http://www.docx4java.org/trac/docx4j](http://www.docx4java.org/trac/docx4j)

但为此，您将了解 MS Office Word 文档 XML 结构的工作原理。把一张桌子放在另一张桌子里面可能真的很复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T08:02:48.497

你可能想看看免费的[JODReports](http://jodreports.sourceforge.net)，可以做 doc/docx。它可能比 POI 更快，但确实需要在某处安装 OpenOffice/LibreOffice。 [Docmosis](http://www.docmosis.com)是另一个可以做到这一点的工具，如果你能够调用云服务（这很便宜但不是免费的），你可以在不安装任何东西的情况下使用它。我不知道你的 POI 代码示例有什么问题，但是 POI 可以生成 doc 文档（我不确定 docx）而且它是免费的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-30T03:00:08.983

你也可以看看：

*   [Templater](http://templater.info)（适用商业许可证）
*   [XDocReport](http://code.google.com/p/xdocreport/wiki/Overview)（完全开源）

# iphone - 如何检查字符串值是否从 0 到 9？

> ID：11901449
> 
> 赞同：1
> 
> 时间：2012-08-10T12:13:30.623
> 
> 标签：iphone, ios, ipad

我有一个 iphone 应用程序，我想在其中检查字符串值是否从 0 到 9。如果是这样，我想做其他事情。有人知道怎么做这个吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T12:16:07.730

```
if (string.length == 1 && [string characterAtIndex:0] >= '0' && [string characterAtIndex:0] <= '9') {
    // do something
} 
```

这将检查字符串是否正好是 1 个字符长，并且该字符是 0、1、2、3、4、5、6、7、8 或 9。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T12:40:06.673

```
NSString *Number = @"0";
NSString *Regex = @"[0-9]"; 
NSPredicate *test = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", Regex]; 
BOOL matches = [test evaluateWithObject:Number];
NSLog(@"Status %d",matches); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T12:33:22.153

```
NSString *st=@"9"; // given number
    double val=[st doubleValue];
    int i=0;
       while(i==val)
       {
           if(i==val)
           { 
               NSLog(@"NUmber between 0 asnd 9");
               break;
           }
           else
           {
               i++;

           }
       } 
```

# javascript - html编码 value

How do I get the latest updated typed in value of a textarea and html encode the value.

To get the value I use:

```
$('textarea').val(); // t

> ID：11901455
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2012-08-10T12:13:45.673
> 
>         
> 
> 标签：javascript, jquery

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2012-08-10T12:54:04.563

试试下面的。

```
var string = $('textarea').val();
var encoded = $('<div/>').text(string).html(); 
```

[演示](http://jsfiddle.net/ricardolohmann/qhsUL/)

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2012-08-10T12:36:53.103

> 它在这里打破

这不是对错误的非常有用的描述，但我猜你的意思是*我得到一个空对象*。

拼写`textarea`正确（中间没有一个`e`），以便您分配 textarea 的值而不是`undefined`（这是您在调用`val()`空 jQuery 对象时得到的）。

这与 HTML 编码无关。HTML 根本不参与这个过程。您从 DOM 获取用户输入，然后将其放入 JSON。JSON.stringify 照顾您所有的编码需求。 
```

# android - 是否可以在 Android SQLite 数据库上禁用 WAL？

> ID：11901460
> 
> 赞同：0
> 
> 时间：2012-08-10T12:14:03.283
> 
> 标签：android, sqlite

在这些启用了 WAL（预写日志记录）的少数 Android 设备上，我在数据库备份/恢复方面确实存在很多问题。创建这样的数据库后是否可以将其关闭？

我的想法是：

1.) 使此工作在较旧的 Android 设备上运行的包装器：

```
public class SQLiteDatabaseWalWrapper {

    private boolean        available;
    private Method         disableWriteAheadLogging;
    private Method         enableWriteAheadLogging;
    private Method         isWriteAheadLoggingEnabled;
    private SQLiteDatabase sqliteDatabase;

    public SQLiteDatabaseWalWrapper(final SQLiteDatabase sqliteDatabase) {
        this.sqliteDatabase = sqliteDatabase;

        available = false;

        try {
            disableWriteAheadLogging = SQLiteDatabase.class.getMethod("disableWriteAheadLogging");
            enableWriteAheadLogging = SQLiteDatabase.class.getMethod("enableWriteAheadLogging");
            isWriteAheadLoggingEnabled = SQLiteDatabase.class.getMethod("isWriteAheadLoggingEnabled");

            available = true;
        } catch (NoSuchMethodException noSuchMethodException) {
        }
    }

    public boolean checkAvailable() {
        return available;
    }

    public void disableWriteAheadLogging() {
        if (disableWriteAheadLogging != null) {
            try {
                disableWriteAheadLogging.invoke(sqliteDatabase);
            } catch (IllegalAccessException illegalAccessException) {
            } catch (IllegalArgumentException illegalArgumentException) {
            } catch (InvocationTargetException invocationTargetException) {
            }
        }
    }

    public boolean enableWriteAheadLogging() {
        boolean result = false;

        if (enableWriteAheadLogging != null) {
            try {
                result = (Boolean) enableWriteAheadLogging.invoke(sqliteDatabase);
            } catch (IllegalAccessException illegalAccessException) {
            } catch (IllegalArgumentException illegalArgumentException) {
            } catch (InvocationTargetException invocationTargetException) {
            }
        }

        return result;
    }

    public boolean isWriteAheadLoggingEnabled() {
        boolean result = false;

        if (isWriteAheadLoggingEnabled != null) {
            try {
                result = (Boolean) isWriteAheadLoggingEnabled.invoke(sqliteDatabase);
            } catch (IllegalAccessException illegalAccessException) {
            } catch (IllegalArgumentException illegalArgumentException) {
            } catch (InvocationTargetException invocationTargetException) {
            }
        }

        return result;
    }
} 
```

2.）在带有 AsyncTask 的扩展应用程序中，我将发出一个完整的检查点并关闭 WAL：

```
public class MyApplication extends Application {

    private class MyAsyncTask extends AsyncTask<Void, Void, Boolean> {

        @Override
        protected Boolean doInBackground(final Void... voids) {
            // Make a full checkpoint
            sqliteDatabase.execSQL("PRAGMA wal_checkpoint(FULL);");

            // switch WAL off
            sqliteDatabaseWalWrapper.disableWriteAheadLogging();
        }

        @Override
        protected void onPostExecute(final Boolean result) {
        }
    }

    private Context                  context;
    private SQLiteDatabase           sqliteDatabase;
    private SQLiteDatabaseWalWrapper sqliteDatabaseWalWrapper;
    private MySQLiteOpenHelper       sqliteOpenHelper;
    private MyAsyncTask              task;

    @Override
    public void onCreate() {
        super.onCreate();

        context = getApplicationContext();

        sqliteOpenHelper = new MySQLiteOpenHelper(context);
        if (sqliteOpenHelper != null) {
            sqliteDatabase = sqliteOpenHelper.getWritableDatabase();
            if (sqliteDatabase != null) {

                if (Build.VERSION.SDK_INT >= 16) {
                    sqliteDatabaseWalWrapper = new SQLiteDatabaseWalWrapper(sqliteDatabase);
                    if (sqliteDatabaseWalWrapper != null && sqliteDatabaseWalWrapper.checkAvailable() && sqliteDatabaseWalWrapper.isWriteAheadLoggingEnabled()) {
                        task = new MyAsyncTask();
                        task.execute();
                    }
                }
            }
        }
    }

    @Override
    public void onTerminate() {
        if (sqliteDatabase != null) {
            sqliteDatabase.close();
        }

        if (sqliteOpenHelper != null) {
            sqliteOpenHelper.close();
        }

        super.onTerminate();
    }
} 
```

这行得通吗？这会删除 SQLite 在启用 WAL 的数据库上创建的各种附加文件吗？这会导致返回到 Android 文档中描述的单个数据库文件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-10-29T03:38:04.457

您可以通过这行代码将数据库模式更改为 TRUNCATE mote：

**setJournalMode(RoomDatabase.JournalMode.TRUNCATE)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T11:04:51.987

在数据库上执行`PRAGMA journal_mode=DELETE`应该移除 Wal 模式并返回到正常的操作方法。

完整文档在这里：[http ://www.sqlite.org/wal.html](http://www.sqlite.org/wal.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-12T12:10:48.303

我们可以通过编程方式启用和禁用 WAL 模式。它从 API 级别 11 开始就存在

有关更多信息，请参阅此文档

[http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#enableWriteAheadLogging()](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#enableWriteAheadLogging())

# iphone - 如何从索引路径获取单元格值？- IOS

> ID：11901462
> 
> 赞同：4
> 
> 时间：2012-08-10T12:14:05.293
> 
> 标签：iphone, objective-c, ios, xcode

我有表格视图。对于我设置了标签值的特定单元格，现在，在我的方法中，我正在接收索引路径，如何使用索引路径访问 cell.tag。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-10T12:18:07.167

```
UITableViewCell *cell = [theTableView cellForRowAtIndexPath:theIndexPath];
NSInteger tag = cell.tag; 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T12:19:35.870

```
int yourCellsTag = [[yourTableView cellForRowAtIndexPath:indexPath] tag]; 
```

# iphone - Youtube 视频在 Iphone 上加载不好

> ID：11901466
> 
> 赞同：0
> 
> 时间：2012-08-10T12:14:17.733
> 
> 标签：iphone, youtube

我正在开发以下网站：

[http://www.yuco.tv/](http://www.yuco.tv/)

我使用 IFrame 播放器 API：

[https://developers.google.com/youtube/iframe_api_reference](https://developers.google.com/youtube/iframe_api_reference)

视频编码为 h.264。

但是播放器显示一条消息说当前视频无法显示。

真正发生的是：一分钟后，第一个视频没有加载，也没有像在普通计算机中那样自动播放，但在 Iphone 上只有当你触摸屏幕两次时才会播放。

我在谷歌上找到了这个：

*并非所有 youtube 视频都可以在 iphone 上使用 .. 如果您想在 iPhone 上尝试这种使用 safari 并访问 Youtube ，则需要对其进行特殊编码 .. 不要使用默认的移动版本，您需要下载并使用新的浏览器版本。*

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T12:23:12.767

您可以通过检查该视频的 YouTube 页面上的“嵌入”按钮来验证该视频是否可以嵌入到另一个网站。

如果视频没有为嵌入编码，那么唯一的方法是破解原始页面以下载原始文件的 FLV 或 MP4，然后使用您的网站进行流式传输。但是您应该尊重这些视频的版权所有者权利（以防他们不想让他们的视频在 youtube 之外播放）

# mysql - 将 7 个表中的 8 个复杂查询合并为一个查询

> ID：11901469
> 
> 赞同：0
> 
> 时间：2012-08-10T12:14:19.477
> 
> 标签：mysql, sql

我需要通过将来自 7 个不同表的 8 个查询组合到一个查询中来创建一个复杂的查询，以创建一个完整的报告。我可以做基本的组合，但这个查询对我来说越来越好。我已经在网上浏览了复杂的连接查询，但我不正确......

所有的表都通过“plant_id”链接，但一些数据是最新的条目，当月的一些计算条目等。下面的查询，都可以自己完美地工作，但我必须将它们组合成以下：

[plant_id，plant_make_id，plant_model]，[current_plant_hrs，plant_hours_total]，[plant_error_report]，[plant_service_next]，[plant_status_ddl_id]，[使用的柴油总量，消耗量]，[location_id]

在细分+个别查询下方：-

```
1 plant [ plant_id, plant_make_id, plant_model ],       
SELECT `plant_id`,`plant_make_id`,`plant_model`
 FROM `plant`

2 plant_hrs [ current_plant_hrs, plant_hours_total  ],           
A
SELECT `plant_hrs_stop`
FROM `plant_hrs` s1
WHERE `plant_hrs_date`=(SELECT MAX(s2.`plant_hrs_date`)
FROM `plant_hrs` s2
WHERE s1.`plant_id` = s2.`plant_id`)
ORDER BY `plant_id`
B
SELECT (MAX(`plant_hrs_stop`)- MIN(`plant_hrs_start`) )total_hrs
FROM`plant_hrs` 
WHERE MONTH(`plant_hrs_date`)= MONTH( CURRENT_DATE ) 
GROUP BY`plant_id`

3 plant_error [ plant_error_report ],               
SELECT `plant_error_report`
FROM `plant_error` s1
WHERE `plant_error_date`=(SELECT MAX(s2.`plant_error_date`)
FROM `plant_error` s2
WHERE s1.`plant_id` = s2.`plant_id`)
ORDER BY `plant_id`

4 plant_service [ plant_service_next ],             
SELECT `plant_service_hrs` , `plant_service_next`
FROM `plant_service` s1
WHERE `plant_service_date`=(SELECT MAX(s2.`plant_service_date`)
FROM `plant_service` s2
WHERE s1.`plant_id` = s2.`plant_id`)
ORDER BY `plant_id`

5 plant_status [ plant_status_ddl_id ],              
SELECT `plant_status_ddl_id`
FROM `plant_status`
WHERE `plant_status_date` = ( CURRENT_DATE ) - 1
GROUP BY `plant_id

6 diesel [ total diesel used, consumption ],            // 'plant_id = diesel_vehicle_no' 
SELECT (SUM(`diesel_qty`) )total_d
FROM`diesel` 
WHERE MONTH(`diesel_date`)= MONTH( CURRENT_DATE ) 
GROUP BY `diesel_vehicle_no`

7 plant_location [ location_id ]                    
SELECT `location_id` FROM `plant_location`
ORDER BY `plant_id` 
```

任何帮助将非常感激...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T12:34:52.970

好的，让我们看一下：我们将从简单地组合您的查询开始——即使有很大的优化空间。

查询 1 和 7 什么都不做——所以我们将使用它们的基表——其余的我们“按原样”

```
SELECT
  `plant`.`plant_id`,
  IFNULL(`qry2A`.`plant_hrs_stop`,''),
  IFNULL(`qry2B`.`total_hrs`,''),
  IFNULL(`qry3`.`plant_error_report`,''),
  IFNULL(`qry4`.`plant_service_next`,''),
  IFNULL(`qry5`.`plant_status_ddl_id`,''),
  IFNULL(`qry6`.`total_d`,''),
  IFNULL(`plant_location`.`location_id`'')
FROM
  -- Query 1: Use table
  `plant`
  -- Query 2A: Use as-is, but with the plant_id field and without the ORDER BY
  LEFT JOIN (
    SELECT `plant_hrs_stop`, s1.`plant_id` AS `plant_id`
    FROM `plant_hrs` s1
    WHERE `plant_hrs_date`=(SELECT MAX(s2.`plant_hrs_date`)
    FROM `plant_hrs` s2
    WHERE s1.`plant_id` = s2.`plant_id`)
  ) AS `qry2A` ON `plant`.`plant_id`=`qry2A`.`plant_id`
  -- Query 2B: Use as-is, but with the plant_id field
  LEFT JOIN (
    SELECT (MAX(`plant_hrs_stop`)- MIN(`plant_hrs_start`) ) AS total_hrs, `plant_id`
    FROM`plant_hrs` 
    WHERE MONTH(`plant_hrs_date`)= MONTH( CURRENT_DATE ) 
    GROUP BY`plant_id`
  ) AS `qry2B` ON `plant`.`plant_id`=`qry2B`.`plant_id`
  -- Query 3: Use as-is, but with the plant_id field and without the ORDER BY
  LEFT JOIN (
    SELECT `plant_error_report`,s1.`plant_id` AS `plant_id`
    FROM `plant_error` s1
    WHERE `plant_error_date`=(SELECT MAX(s2.`plant_error_date`)
    FROM `plant_error` s2
    WHERE s1.`plant_id` = s2.`plant_id`)
  ) AS `qry3` ON `plant`.`plant_id`=`qry3`.`plant_id`
  -- Query 4: Use as-is, but with the plant_id field and without the ORDER BY
  LEFT JOIN (
    SELECT `plant_service_hrs` , `plant_service_next`,s1.`plant_id` AS `plant_id`
    FROM `plant_service` s1
    WHERE `plant_service_date`=(SELECT MAX(s2.`plant_service_date`)
    FROM `plant_service` s2
    WHERE s1.`plant_id` = s2.`plant_id`)
  ) AS `qry4` ON `plant`.`plant_id`=`qry4`.`plant_id`
  -- Query 5: Use as-is, but with the plant_id field
  LEFT JOIN (
    SELECT `plant_status_ddl_id`,`plant_id`
    FROM `plant_status`
    WHERE `plant_status_date` = ( CURRENT_DATE ) - 1
    GROUP BY `plant_id
  ) AS `qry5` ON `plant`.`plant_id`=`qry5`.`plant_id`
  -- Query 6: Use as-is, but with the plant_id field
  LEFT JOIN (
    SELECT (SUM(`diesel_qty`) ) AS total_d, `diesel_vehicle_no` AS `plant_id`
    FROM`diesel` 
    WHERE MONTH(`diesel_date`)= MONTH( CURRENT_DATE ) 
    GROUP BY `diesel_vehicle_no`
  ) AS `qry6` ON `plant`.`plant_id`=`qry6`.`plant_id`
  -- Query 7: Use table
  LEFT JOIN `plant_location` ON `plant`.`plant_id`=`plant_location`.`plant_id`
ORDER BY
  `plant`.`plant_id` 
```

**编辑**：按照@LuisSiquot 的建议，使用 LEFT 而不是 INNER 连接

**编辑**：在评论请求后添加 IFNULL()

# python - 从 solr 索引中删除文档 - 未触及索引

> ID：11901471
> 
> 赞同：1
> 
> 时间：2012-08-10T12:14:27.920
> 
> 标签：python, solr, pysolr

我试图理解为什么当我删除整个索引时我的 Solr 索引甚至没有被触及！

到目前为止，我已经尝试直接向 solr 查询：

```
curl 'http://localhost:8080/solr/update?stream.body=<delete><query>*:*</query></delete>&commit=true' 
```

我也试过pysolr：

```
In [242]: from pysolr import Solr

In [243]: conn = Solr('http://localhost:8080/solr/')

In [244]: conn.delete(q='*:*') 
```

上面这两个命令的输出在 catalina log 中是一样的。

无论我如何尝试（甚至从管理面板尝试过），索引仍然显示相同数量的文档：

```
Num Docs:
323
Max Doc:
323
Version:
52
Segment Count:
1 
```

起初我以为这是我的 solr/data 文件夹的权限问题，但事实并非如此。我在我的 solrconfig.xml 中注释掉了我的缓存，结果是一样的。

如果有人有任何提示，那就太好了！

* * *

后期编辑：

每次我运行上述命令时，只有具有较晚时间戳的文件被修改（仅来自拼写检查器目录） - 您还可以看到用户所有权从 www-data 更改为 root - 当我手动运行这些命令时

```
data/index:
total 2112
-rw-r--r-- 1 www-data root 1268535 2012-08-10 13:41 _f.fdt
-rw-r--r-- 1 www-data root    2618 2012-08-10 13:41 _f.fdx
-rw-r--r-- 1 www-data root    1135 2012-08-10 13:41 _f.fnm
-rw-r--r-- 1 www-data root  201513 2012-08-10 13:41 _f_Lucene40_0.frq
-rw-r--r-- 1 www-data root  207400 2012-08-10 13:41 _f_Lucene40_0.prx
-rw-r--r-- 1 www-data root  419705 2012-08-10 13:41 _f_Lucene40_0.tim
-rw-r--r-- 1 www-data root   11199 2012-08-10 13:41 _f_Lucene40_0.tip
-rw-r--r-- 1 www-data root     245 2012-08-10 13:41 _f_nrm.cfe
-rw-r--r-- 1 www-data root    2751 2012-08-10 13:41 _f_nrm.cfs
-rw-r--r-- 1 www-data root     382 2012-08-10 13:41 _f.si
-rw-r--r-- 1 www-data root      20 2012-08-10 13:41 segments.gen
-rw-r--r-- 1 www-data root      98 2012-08-10 13:41 segments_h
-rw-r--r-- 1 root     root       0 2012-08-10 13:55 write.lock

data/spellchecker:
total 792
-rw-r--r-- 1 root root 129251 2012-08-10 14:16 _q.fdt
-rw-r--r-- 1 root root  84282 2012-08-10 14:16 _q.fdx
-rw-r--r-- 1 root root   1119 2012-08-10 14:16 _q.fnm
-rw-r--r-- 1 root root 288855 2012-08-10 14:16 _q_Lucene40_0.frq
-rw-r--r-- 1 root root 257208 2012-08-10 14:16 _q_Lucene40_0.tim
-rw-r--r-- 1 root root   9355 2012-08-10 14:16 _q_Lucene40_0.tip
-rw-r--r-- 1 root root    306 2012-08-10 14:16 _q.si
-rw-r--r-- 1 root root     69 2012-08-10 14:16 segments_1p
-rw-r--r-- 1 root root     20 2012-08-10 14:16 segments.gen

data/tlog:
total 444
-rw-r--r-- 1 www-data root 363169 2012-08-10 12:11 tlog.0000000000000000019
-rw-r--r-- 1 www-data root  79280 2012-08-10 12:11 tlog.0000000000000000020 
```

* * *

Catalina 日志被截断， conn.delete(q=' *:* ') 运行 - 这是 catalina.log 中记录的内容

```
Aug 10, 2012 3:17:57 PM org.apache.solr.update.DirectUpdateHandler2 commit
INFO: start commit{flags=0,version=0,optimize=false,openSearcher=true,waitSearcher=true,expungeDeletes=false,softCommit=false}
Aug 10, 2012 3:17:57 PM org.apache.solr.search.SolrIndexSearcher <init>
INFO: Opening Searcher@1d4eeb5 main
Aug 10, 2012 3:17:57 PM org.apache.solr.core.QuerySenderListener newSearcher
INFO: QuerySenderListener sending requests to Searcher@1d4eeb5 main{StandardDirectoryReader(segments_h:52 _f(4.0):C323)}
Aug 10, 2012 3:17:57 PM org.apache.solr.core.QuerySenderListener newSearcher
INFO: QuerySenderListener done.
Aug 10, 2012 3:17:57 PM org.apache.solr.handler.component.SpellCheckComponent$SpellCheckerListener buildSpellIndex
INFO: Building spell index for spell checker: default
Aug 10, 2012 3:17:57 PM org.apache.solr.update.DirectUpdateHandler2 commit
INFO: end_commit_flush
Aug 10, 2012 3:18:02 PM org.apache.solr.core.SolrCore registerSearcher
INFO: [collection1] Registered new searcher Searcher@1d4eeb5 main{StandardDirectoryReader(segments_h:52 _f(4.0):C323)}
Aug 10, 2012 3:18:02 PM org.apache.solr.update.processor.LogUpdateProcessor finish
INFO: [collection1] webapp=/solr path=/update/ params={commit=true} {deleteByQuery=*:*,commit=} 0 5608 
```

* * *

稍后编辑：

我试图通过 id 删除，它的工作原理！所以由于某种原因删除

```
q=*:* 
```

失败...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T14:36:07.720

试一试卷曲，过去对我有用：

```
curl http://localhost:8080/solr/update/?commit=true -H "Content-Type: text/xml" --data-binary '<delete><query>*:*</query></delete>'; 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T15:39:50.630

我认为您需要切换 commit 和 stream.body 参数的顺序。从您的 catalina 日志中查看最后一个条目，提交值似乎未包含在删除查询中。

试试这个：

```
 curl 'http://localhost:8080/solr/update?commit=true&stream.body=<delete><query>*:*</query></delete>' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T18:16:07.193

我发现问题出在我的 schema.xml 中

我重写了它，现在就像一个魅力！

# ruby - 使用 ruby 从 sqlite 数据库中获取记录

> ID：11901474
> 
> 赞同：1
> 
> 时间：2012-08-10T12:14:36.403
> 
> 标签：ruby, sqlite

我使用 ruby​​ 创建了一个带有 sqlite 数据库的简单产品表。我可以按照将 product_code 作为 where 条件传递的正常 select 语句来检索记录。每当我检索记录时，我希望能够将记录存储在数组中，并添加到所选项目的价格中以获得总价值，就像在在线购物篮中一样。我在没有导轨的红宝石中这样做，只是控制台。选择语句的示例

```
def select(item_code)
 item_code = item_code
 begin
   db = SQLite3::Database.new "test.db"
   results = db.get_first_row "SELECT * FROM Products WHERE Product_code = ?",    
              item_code
   puts results.join "\s"

  rescue SQLite3::Exception => e 

  puts "Exception occured"
  puts e

ensure
db.close if db
end 
```

结尾

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T15:02:50.660

尝试这样的事情

```
$prices, $index_of_price = [], 0
#index_of_price is the index of the field in your result

def select(item_code) 
  begin 
    db = SQLite3::Database.new "test.db" 
    results = db.get_first_row "SELECT * FROM Products WHERE Product_code = ?", item_code 
    $prices << results[$index_of_price]
  rescue
    puts $!
  ensure 
   db.close if db
  end
end 

select 1
select 2

puts "Total is #{$prices.inject(0){|sum,item| sum + item}}" 
```

# sql - ASP 到 Access dababase - SQL 连接查询

> ID：11901479
> 
> 赞同：1
> 
> 时间：2012-08-10T12:14:50.567
> 
> 标签：sql, ms-access, asp-classic

想象一下同一个 Access 数据库中的两个表；

```
Transaction
 - Date
 - Time
 - TransactionNumber
 - UniqueID
 - Exception (boolean) 
```

（TransactionNumber是同一天记录的连续整数，然后每天从0重新开始。关键字段是UniqueID）

```
Exceptions
 - ExceptionNumber
 - Date
 - Time
 - TransactionNumber
 - ExceptionReason 
```

（ExceptionNumber 是同一天记录的连续整数，然后从 0 重新开始。TransactionNumber 是 Transactions 中的相同值，其中两个表中的 Date 相同）

如果 Transaction.Exception 为 TRUE，则与该 Transaction 相关的记录也将出现在 Exceptions 中。

我想从 Transaction 中输出所有记录，并且其中 Transaction.Exception 恰好是 TRUE 的记录，然后我想要一个显示 Exception.ExceptionReason 的列。对于其他记录，它应该是空白的。

我不知道这怎么可能。如果您通过 Date 和 TransactionNumber 字段连接两个表，您将只看到 Transaction.Exception = TRUE 的记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T12:33:39.587

在我看来，这听起来像是`LEFT JOIN`可以完成您想要的。

```
SELECT
    t.[Date],
    t.[Time],
    t.TransactionNumber,
    t.[Exception],
    e.ExceptionReason
FROM
    [Transaction] AS t
    LEFT JOIN Exceptions AS e
    ON
        t.[Date] = e.[Date]
        AND t.TransactionNumber = e.TransactionNumber 
```

# xtext - Xtext - 为范围提供字符串文字列表

> ID：11901492
> 
> 赞同：0
> 
> 时间：2012-08-10T12:15:26.120
> 
> 标签：xtext

在范围提供程序类中，我想返回一个“Elist”实例。但是，“scopedFor”不接受它，因为“String”不扩展“EObject”。我想我错过了一些基本的东西。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T18:35:50.597

范围用于交叉引用。您不能交叉引用字符串。所以你能详细说明你真正想做的事情吗？

# android - TextView 和背景颜色

> ID：11901494
> 
> 赞同：3
> 
> 时间：2012-08-10T12:15:30.957
> 
> 标签：android, colors, textview, background-color

我想为我的`textview`背景颜色设置透明的黑色。我该怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-19T18:11:51.797

```
android:background="#55000000" 
```

如果您使用 8 个数字而不是 6 个数字的颜色，则前两个设置不透明度。在这种情况下，不透明度为 0x55，即 85/255 [大约 33% 的不透明度]。

对于编程，您应该能够使用以下内容（myTextView 对应于您的视图）

```
myTextView.setBackgroundColor(0x55000000); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T12:22:48.363

```
 <?xml version="1.0" encoding="utf-8"?>
 <selector xmlns:android="http://schemas.android.com/apk/res/android">
 <item android:state_pressed="true" >
    <shape>
          <gradient 
            android:startColor="#2fDEDEDE"
            android:endColor="#2F000000"
            android:angle="270" />
        <stroke
            android:color="#cbc9c9" />

        <corners
            android:radius="3dp" /> 

        <padding
            android:left="5dp"
            android:top="5dp"
            android:right="5dp"
            android:bottom="5dp" />
    </shape>
</item>
<item>
    <shape>

            <gradient
            android:startColor="@android:color/transparent"
            android:endColor="@android:color/transparent"
            android:angle="270" />

            <stroke
            android:color="#c3c2c2" />

        <corners
            android:radius="4dp" /> 

        <padding
            android:left="5dp"
            android:top="5dp"
            android:right="5dp"
            android:bottom="5dp" />
    </shape>
</item> 
```

用法：==> `android:background="@drawable/btn_trans"`

如果你想设置黑色

```
android:background="#000" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T12:21:58.993

在photoshop中使图像透明并将其应用于textview背景......就是这样，你已经获得了文本视图的透明背景

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T12:29:58.097

设置背景颜色如下

```
android:background="@android:color/transparent" 
```

# android - 使用相同服务的多个计时器

> ID：11901498
> 
> 赞同：0
> 
> 时间：2012-08-10T12:15:56.570
> 
> 标签：android, service

我使用带有多个片段的 ActionBar 选项卡。每个片段都包含一个基于我的计时器服务的计时器。当我停止我的第一个计时器（停止计时器服务）时，第二个计时器也停止了，我想那是因为它们正在运行相同的服务。

是否可以区分另一个片段是否正在使用该服务，或者是否可以为每个计时器启动单独的服务？或者还有其他方法吗？

我一直在寻找解决方案一段时间了，我现在有点迷茫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T13:21:15.407

在没有看到您的代码的情况下：对该方法的调用`startService`将在服务未运行时启动服务，或者`onStartCommand`在服务已启动时调用。当计时器启动时，您可以调用`startService`并增加一个值（例如`int`表示实时计时器的值）。当计时器需要停止/完成时，您可以`BroadcastReceiver`在`Service`（如您显示的链接中）中实现 a 以侦听来自其他组件的“关闭”广播（您可以使用此模式让`Service`知道新计时器已开始（“开始”广播））。

从那你`BroadcastReceiver`会`Service`减少实时计时器计数，看看你是否在`0`，如果是这种情况，然后停止`Service`。

上述方法的主要问题是何时可靠关闭`Service`即使其他活动被杀死并且没有重新启动，因此它们无法广播所需的计时器关闭意图（如果其他活动被杀死并且没有重新启动服务可能是留下一些注册的计时器，你不希望服务无限期地运行）。要解决这个问题，需要有关您的实际代码的更多详细信息。

# image - 如何在wordpress中获取现有媒体的url

> ID：11901499
> 
> 赞同：2
> 
> 时间：2012-08-10T12:15:55.983
> 
> 标签：image, wordpress, get, media

我在我的 wordpress 库中添加了一些图片。现在我需要按名称检索其中一个并获取它的 URL。请注意，我没有在任何帖子中附加它们。

感谢您的关注。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T12:22:56.697

一种简单的方法 - 使用`SELECT`带有 WordPress 数据库抽象 API 的直接 SQL 语句：

```
$wpdb->get_var(
    $wpdb->prepare("
        SELECT    ID
            FROM  $wpdb->posts
            WHERE post_title = %s
              AND post_type = '%s'
    ", $title, $type)
); 
```

你可以把它合并到一个函数中（你可以放在你的functions.php文件中）：

```
function get_post_by_title($title, $type = 'post') {
    global $wpdb;

    $post_id = $wpdb->get_var(
        $wpdb->prepare("
            SELECT    ID
                FROM  $wpdb->posts
                WHERE post_title = %s
                  AND post_type = '%s'
        ", $title, $type)
    );

    if(!empty($post_id)) {
        return(get_post($post_id));
    }
} 
```

在您的模板中，您可以像这样调用您的函数：

```
$attachment = get_post_by_title('Filename', 'attachment');
echo $attachment->guid; // this is the "raw" URL
echo get_attachment_link($attachment->ID); // this is the "pretty" URL 
```

# vector - 如何在 PARI/GP 中获取行向量的总长度

> ID：11901501
> 
> 赞同：1
> 
> 时间：2012-08-10T12:16:03.143
> 
> 标签：vector, row, pari-gp

从一定数量的除数中，我试图随机选择一个除数。

但是我无法随机获得一个数字，因为我找不到任何可以让我获得行向量长度的函数。

例子：

```
temp=divisors(12);
[1,2,3,4,6,12]
vecmax(temp); \\will get me 10 instead of 6
temp[random(vecmax(temp))]; 
```

希望这里有人可以帮助我。谢谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T15:43:48.250

临时=除数（12）；

\\temp 的内容：[1,2,3,4,6,12]

打印（长度（温度））；

\\输出：6

# iphone - 在解析 XML 之前不显示进度 HUD

> ID：11901505
> 
> 赞同：0
> 
> 时间：2012-08-10T12:16:15.933
> 
> 标签：iphone, ios, stack, nsxmlparser, mbprogresshud

我实际上正在使用`NSXMLParser`该类来解析托管在服务器上的 XML 文件。当解析器在做他的工作时，我想显示 HUD 在那里抓取的进度：[https ://github.com/jdg/MBProgressHUD](https://github.com/jdg/MBProgressHUD)

这是我显示进度 HUD 的方式：

```
MBProgressHUD *hud = [MBProgressHUD showHUDAddedTo:self.view animated:NO];
hud.labelText = @"Update"; 
```

然后我使用我创建的类启动解析器：

```
[dm parseXMLAtURL:[NSURL URLWithString:@"myXML.xml.php"]]; 
```

这是完整的类方法：

```
- (void)parseXMLAtURL:(NSURL *)XMLUrl {
    NSXMLParser *parser = [[NSXMLParser alloc] initWithContentsOfURL:XMLUrl];
    [parser setDelegate:self];
    NSLog(@"start");
    [parser parse];    
} 
```

我显然`MBProgressHUD`在解析 XML 之前调用了 ，但没有办法：`MBProgressHUD`当解析器完成工作时会显示 。

我认为这个问题可能是由于堆栈管理，当他在其他人之前完成最长的工作时（解析完整的 XML 需要 6-7 秒）我是对的还是可能是另一回事？如果我是对的，我该如何管理呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T12:26:40.187

你说得对，它与时间有关。因为一切都是在同一个线程上完成的。只需将 XML 的解析延迟几毫秒：

```
MBProgressHUD *hud = [MBProgressHUD showHUDAddedTo:self.view animated:NO];
hud.labelText = @"Update"; 
[dm performSelector:@selector(parseXMLAtURL:)  withObject:[NSURL URLWithString:@"myXML.xml.php"] afterDelay:0.1f]; 
```

不如在新线程上运行 XML 解析好，但它会起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T12:28:15.227

我不能从您发布的代码中肯定地说，但这很可能是因为 XML 解析器阻塞了您的主线程。

`dispatch_async`要修复它，请使用或类似方法将您的 XML 解析生成到另一个线程。这也在 HUD 自述文件中的用法下进行了解释。

问候

# javascript - 远程 json 和 Javascript

> ID：11901506
> 
> 赞同：0
> 
> 时间：2012-08-10T12:16:19.273
> 
> 标签：javascript, cross-domain

我目前正在为我工​​作的学校开发一个 Web 应用程序。我们的一台专用服务器上有一个名为 FROG 的程序。不幸的是，这是非常锁定的，您使用 aa gui 创建网站。您可以对其进行的最多编码是 HTML 和 javascript。

我希望能够从我们也拥有的远程服务器中检索信息。由于跨域限制，我无法使用 ajax。但是，我想出了一个解决方法。

我在远程服务器上的一个名为 xrequest.js 的文件中调用了这个函数：

```
loadNotices({[{title: 'this is a test'},{title: 'this is another test'}]}); 
```

这只是一个将 json 对象作为参数传递的函数调用（参数最终将由从数据库检索的数据生成）。

在我的其他受限服务器上，我有这个 javacript：

```
<script type="text/javascript">
function loadNotices(data)
{
    alert(data);
}

var url = "http://somedomain.com/tests/xrequest.js";
var script = document.createElement('script');
script.setAttribute('src', url);

document.getElementsByTagName('head')[0].appendChild(script); 
</script>
<div id="notices"></div> 
```

我想要做的是遍历 xrequest.js 文件中的每个标题，并将它们显示为列表。

我不确定如何遍历标题。

如果您需要更多信息，请发表评论。任何帮助都会得到帮助。

非常感谢

菲尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T12:36:14.200

要遍历标题，首先需要删除数组周围的花括号。之后，循环浏览如下标题：

```
function loadNotices(arr) {
    var title, i = 0;
    for (; i < arr.length; i++) {
        title = arr[i].title;
    }
}​ 
```

另外，考虑改变：

```
document.getElementsByTagName('head')[0].appendChild(script); 
```

至

```
document.head.appendChild(script); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T12:35:24.460

您的实现看起来像 JSONP 调用。使用 Jquery，您可以轻松搞定

```
$.get('url?callback', {<data>}, function(data){

}); 
```

在 url的`?callback`末尾，jquery 自动创建一个随机回调函数。在您的服务器上，您可以在它周围添加包装回调函数，而不是返回正常的 JSON。以 php 为例：

```
$callback = $_GET['callback'];
echo $callback.'('.json_encode(obj).');'; 
```

这将成为

```
callback({your return data>}); 
```

你的脚本会收到它。

```
loadNotices({[{title: 'this is a test'},{title: 'this is another test'}]}); 
```

此函数调用不正确，请改为：

```
loadNotices([{title: 'this is a test'},{title: 'this is another test'}]); 
```

然后你可以像这样遍历你的标题

```
for (i = 0; i < titles.length; i++){
   alert(titles[i].title);
} 
```

# php - PHP在'strstr'匹配后获取5个字符

> ID：11901510
> 
> 赞同：1
> 
> 时间：2012-08-10T12:16:35.683
> 
> 标签：php, match

该变量`$page`包括一个网页（完整的 HTML 文件），但我想在这一行过滤该文件：

`<a href="http://[website]/[folder]/`

我希望在字符串中解析后的 5 个字符。

但是那个字符串在里面是多次`$page`的，所以数字也必须存储在一个数组中。

因此，如果找到匹配项`<a href="http://[website]/[folder]/23455`，我如何将 '23455' 放入`$nums[0]`

如果找到另一个匹配`<a href="http://[website]/[folder]/12345`'12345' 将被放入`$nums[1]`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T12:27:46.643

看看[http://net.tutsplus.com/tutorials/other/8-regular-expressions-you-should-know/](http://net.tutsplus.com/tutorials/other/8-regular-expressions-you-should-know/)也许这个正则表达式对你有用：

```
/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T12:39:17.343

根据我从您的问题中了解到的情况，您只是想获取 url 的结尾部分，然后进行比较然后将值存储在数组中？我相信这段代码应该可以解决问题。

```
$nums = new array(); //declare your array
$a = new SimpleXMLElement('<a href=<a href="http://[website]/[folder]/23455">Your Link</a>'); //create a new simple xml element
$a = $a['href'];
$array = explode("/",$a); //split the string into an array by using the / as the delimiter

if($array[count($array)-1] == '23455') { //get the count of the array and -1 from the count to get the last index then compare to required number
$nums[0] = '23455'; //store value in array
} else if ($array[count($array)-1] == '12345'{
$nums[1] = '12345'; //
} 
```

# python - Subprocess.poll() 错误地返回一个值

> ID：11901517
> 
> 赞同：6
> 
> 时间：2012-08-10T12:16:59.083
> 
> 标签：python, subprocess, popen

**测试1.py：**

```
process = Popen(["python","test2.py"])
time.sleep(3)

alive = process.poll()
if alive is None:
    print "Still running"
else:
    print "Not running\r\n"
    print "%r" % alive 
```

**test1.py 输出：**

`Not running`
`2`

**测试2.py：**

```
time.sleep(30)
print "done" 
```

到底是怎么回事？这不应该返回“仍在运行”吗？

* * *

由于一个矛盾的结果，这里是完整的 test1.py 代码：

```
import cStringIO
import os
import cgi
import time
from subprocess import Popen

def application(environ, start_response):
    headers = []
    headers.append(('Content-Type', 'text/plain'))
    write = start_response('200 OK', headers)

    input = environ['wsgi.input']
    output = cStringIO.StringIO()

    process = Popen(["python","test2.py"])
    time.sleep(3)

    alive = process.poll()
    if alive is None:
        print >> output, "Still running"
    else:
        print >> output, "Not running\r\n"
        print >> output, "%r" % alive

    output.write(input.read(int(environ.get('CONTENT_LENGTH', '0'))))
    return [output.getvalue()] 
```

* * *

**更新了 test1.py：**

```
process = Popen(["python","C:/wamp/www/python/popen/test2.py"], shell=True)
    time.sleep(5)

    alive = process.poll()
    if alive is None:
        #print >> output, "%r" % alive
        print >> output, "Still running"
    else:
        print >> output, "Not running"
        print >> output, "%r" % alive
        print >> output, "Current working dir : %s" % os.getcwd()
        print >> output, os.strerror(0) 
```

**更新的输出：**

`Not running`
`0`
`Current working dir : C:\wamp\bin\apache\apache2.2.22`
`No error`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-10T12:41:19.947

如果 Popen() 找不到 test2.py，它会产生错误“没有这样的文件或目录”，错误号为 2。这个错误号由 poll() 返回。由于您似乎是通过 wsgi 运行此脚本，因此似乎有些东西正在吞噬您的 stderr 并且您没有看到错误消息：

```
$ cat test1.py
from subprocess import Popen
import time

process = Popen(["python","doesnotexist.py"])
time.sleep(3)

alive = process.poll()
if alive is None:
    print "Still running"
else:
    print "Not running\r\n"
    print "%r" % alive
$ python test1.py 
python: can't open file 'doesnotexist.py': [Errno 2] No such file or directory
Not running

2 
```

现在，问题可能是因为前端服务器未将脚本的当前工作目录设置为脚本的目录，请尝试打印 os.getcwd() 以查看它是否是您所期望的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T12:47:35.890

据此[_](http://tldp.org/LDP/abs/html/exitcodes.html)

退出状态 2 表示执行命令的 shell 存在问题。您是否尝试过`test2.py`直接在 shell 中运行以验证它没有问题？正如 Lie 指出的那样，可能是 shell 找不到您要执行的文件，尽管可能还有另一个问题导致它中断。

# c - 更少的代码来实现这个效果？

> ID：11901520
> 
> 赞同：0
> 
> 时间：2012-08-10T12:17:07.463
> 
> 标签：c, string, performance, function, substring

我正在研究一些字符串操作函数，只是出于我自己的兴趣。但是，我可能想在以后的代码中使用这些函数。我编写了以下内容来检查字符串中是否存在子字符串。我遇到了一个问题。我的程序比较了两个字符串中的每个字符，但是它有乱序字符的问题。解释需要很长时间，所以我举个例子：

如果检查字符串“fooobar”中是否存在“oobar”，我的程序将无法找到子字符串的位置，因为它会在 char 'o' 的第一个实例上跳闸，我为此开发了一个解决方法，但这就是这是一种解决方法，而不是真正的可靠解决方案。所以我想知道是否有人可以告诉我他们将如何改进以下代码（请记住，我不想使用任何其他库）：

```
int chksbstr(char *str, char *sbstr)
{
    int i, sbstrlen, strlen, p = 0;

for(i = 0; sbstr[i] != '\0'; i++);
sbstrlen = i;
for(i = 0; str[i] != '\0'; i++);
strlen = i;
if(sbstrlen > strlen)
{
    printf("\n**Error substring is larger than base string!");
    return 2;
}
if(sbstrlen == strlen)
{
    if(str == sbstr) return 0;
    else return 1;
}
for(i = 0; i <= strlen; i++)
{
    if(str[i] == sbstr[p]) p++;
    else if(str[i] != str[i - 1]) p = 0;
    if(p == sbstrlen) return 0;
}
return 1;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T12:21:06.557

少了 23 行：

```
if (strstr(baseString, subString) != NULL)
{
    /* contains */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T12:52:01.277

递归可以更好地做到这一点。哦，顺便说一句，描述性标识符要好得多。没有理由随机删除所有元音，不要忘记`const`.

```
int check_substring(const char* str, const char* to_go, const char* substr) {
    if (*to_go == '\0') return 1; // Hit all
    if (*str == '\0') return 0; // Ran out of string to check
    if (*str == *to_go) return check_substring(str + 1, to_go + 1, substr);
    else {
        if (*str == *substr)
            return check_substring(str + 1, substr + 1, substr);
        else
            return check_substring(str + 1, substr, substr);
    }
}
int does_contain_substring(const char* str, const char* sbstr) {
    return check_substring(str, sbstr, sbstr);
} 
```

# php - 使用 PHP 替换文本文件中的字符串

> ID：11901521
> 
> 赞同：43
> 
> 时间：2012-08-10T12:17:10.193
> 
> 标签：php, file, text, replace

我需要打开一个文本文件并替换一个字符串。我需要这个

```
Old String: <span id="$msgid" style="display: block;">
New String: <span id="$msgid" style="display: none;"> 
```

这是我到目前为止所拥有的，但除了额外的空格之外，我没有看到文本文件中的任何变化。

```
$msgid = $_GET['msgid'];

$oldMessage = "";
$deletedFormat = "";

// Read the entire string
$str = implode("\n", file('msghistory.txt'));

$fp = fopen('msghistory.txt', 'w');

// Replace something in the file string - this is a VERY simple example
$str = str_replace("$oldMessage", "$deletedFormat", $str);

fwrite($fp, $str, strlen($str));
fclose($fp); 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-08-10T12:20:37.087

这是否有效：

```
$msgid = $_GET['msgid'];

$oldMessage = '';

$deletedFormat = '';

//read the entire string
$str=file_get_contents('msghistory.txt');

//replace something in the file string - this is a VERY simple example
$str=str_replace($oldMessage, $deletedFormat,$str);

//write the entire string
file_put_contents('msghistory.txt', $str); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-06-16T09:49:04.060

感谢您的评论。我制作了一个函数，当它发生时会给出错误消息：

```
/**
 * Replaces a string in a file
 *
 * @param string $FilePath
 * @param string $OldText text to be replaced
 * @param string $NewText new text
 * @return array $Result status (success | error) & message (file exist, file permissions)
 */
function replace_in_file($FilePath, $OldText, $NewText)
{
    $Result = array('status' => 'error', 'message' => '');
    if(file_exists($FilePath)===TRUE)
    {
        if(is_writeable($FilePath))
        {
            try
            {
                $FileContent = file_get_contents($FilePath);
                $FileContent = str_replace($OldText, $NewText, $FileContent);
                if(file_put_contents($FilePath, $FileContent) > 0)
                {
                    $Result["status"] = 'success';
                }
                else
                {
                   $Result["message"] = 'Error while writing file';
                }
            }
            catch(Exception $e)
            {
                $Result["message"] = 'Error : '.$e;
            }
        }
        else
        {
            $Result["message"] = 'File '.$FilePath.' is not writable !';
        }
    }
    else
    {
        $Result["message"] = 'File '.$FilePath.' does not exist !';
    }
    return $Result;
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-04-12T17:35:58.800

这就像一个魅力，快速而准确：

```
function replace_string_in_file($filename, $string_to_replace, $replace_with){
    $content=file_get_contents($filename);
    $content_chunks=explode($string_to_replace, $content);
    $content=implode($replace_with, $content_chunks);
    file_put_contents($filename, $content);
} 
```

用法：

```
$filename="users/data/letter.txt";
$string_to_replace="US$";
$replace_with="Yuan";
replace_string_in_file($filename, $string_to_replace, $replace_with); 
```

// 在字符串解析方面永远不要忘记 EXPLODE // 它是一个强大而快速的工具

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-09-12T21:49:44.953

```
public function fileReplaceContent($path, $oldContent, $newContent)
{
    $str = file_get_contents($path);
    $str = str_replace($oldContent, $newContent, $str);
    file_put_contents($path, $str);
} 
```

使用

```
fileReplaceContent('your file path','string you want to change', 'new string') 
```

# c# - 如何显示本地文件夹中的图像以使用 mvc 查看

> ID：11901528
> 
> 赞同：0
> 
> 时间：2012-08-10T12:17:47.370
> 
> 标签：c#, model-view-controller

我正在使用 MVC。我需要上传图像并将其显示在同一页面中。我已上传图像并将图像存储在本地文件夹中。如何使用mvc显示本地文件夹文件中的图像

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T12:19:28.210

最好的方法是创建一个动作，从文件夹中加载文件并返回它。

使用`FileContentResult`：

```
public FileContentResult Display(string filename) {
   byte[] byteArray = GetImageFromDisk(filename);
   return new FileContentResult(byteArray, "image/jpeg");
} 
```

*以上是一个非常简单的示例，可以帮助您入门。*

# java - 使用带有变量的配置/属性文件

> ID：11901530
> 
> 赞同：1
> 
> 时间：2012-08-10T12:17:53.797
> 
> 标签：java, variables, configuration, import, configuration-files

我使用这样的简单文本文件

```
BMG-P   (someLongComplicatedExpression)(.*P)
BMG T   (someLongComplicatedExpression)(.*[Tt])
BMG MPA (someLongComplicatedExpression)(.*MPA) 
```

配置我的应用程序（简单导入`bufferedReader.readLine().split("\t")`）。困扰我的是**冗余**。

我正在考虑这样的解决方案：

```
%s=(someLongComplicatedExpression)
BMG-P   %s(.*P)
BMG T   %s(.*[Tt])
BMG MPA %s(.*MPA) 
```

我在其中读取变量的值（如 %s），然后在导入后替换它们在字符串中的出现。

我的问题是：

*   您知道哪些替代方法？
*   在我的代码中实现变量替换的简单方法是什么？
*   您能指出任何支持此类属性文件的框架吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T12:38:41.533

`Properties`我为 Java类编写了这个简单的扩展：

```
import java.io.Serializable;
import java.util.Properties;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

/**
 * Allows properties to contain expansions of the form ${propertyName}. This
 * class makes no attempt to detect circular references, so be careful.
 */
public class ExpandingProperties extends Properties implements PropertySource {

    private static final long serialVersionUID = 259782782423517925L;
    private final Expander expander = new Expander();

    @Override
    public String getProperty(String key) {
        return expander.expand(super.getProperty(key), this);
    }
}

class Expander implements Serializable {

    private static final long serialVersionUID = -2229337918353092460L;
    private final Pattern pattern = Pattern.compile("\\$\\{([^}]+)\\}");

    /**
     * Expands variables of the form "${variableName}" within the
     * specified string, using the property source to lookup the
     * relevant value.
     */
    public String expand(final String s, final PropertySource propertySource) {
        if (s == null) {
            return null;
        }
        final StringBuffer sb = new StringBuffer();
        final Matcher matcher = pattern.matcher(s);
        while (matcher.find()) {
            final String variableName = matcher.group(1);
            final String value = propertySource.getProperty(variableName);
            if (value == null) {
                throw new RuntimeException("No property found for: " + variableName);
            }
            matcher.appendReplacement(sb, value.replace("$", "\\$"));
        }
        matcher.appendTail(sb);
        return sb.toString();
    }
}

interface PropertySource {

    String getProperty(String key);
} 
```

示例用法：

```
public static void main(String[] args) {
    Properties properties = new ExpandingProperties();
    properties.put("myVar", "myLongExpression");
    properties.put("foo", "${myVar}_1");
    properties.put("bar", "${foo}_abc");

    System.out.println(properties.getProperty("bar"));
} 
```

印刷：

```
myLongExpression_1_abc 
```

作为`ExpandingProperties`它的扩展，`Properties`它继承了`load...()`从属性文件加载值的所有方法。

另一种方法是[EProperties](http://code.google.com/p/eproperties/)，它与上面的代码做类似的事情，但更进一步，允许你嵌套属性文件等。我发现它对我需要的东西来说太过分了。

# c# - 从 C# 调用 C 函数时如何处理可选结构参数

> ID：11901534
> 
> 赞同：1
> 
> 时间：2012-08-10T12:17:59.557
> 
> 标签：c#, c, winscard

如何跳过 C# 中的可选参数 (pioRecvPci)？我认为主要问题是在 C 中参数是一个指针，因此可以提供 NULL 而在 C# 中使用结构上的 ref 关键字，根据定义不能为空。

**C代码**

```
typedef struct {
  DWORD dwProtocol;
  DWORD cbPciLength;
} SCARD_IO_REQUEST;

LONG WINAPI SCardTransmit(
      __in         SCARDHANDLE hCard,
      __in         LPCSCARD_IO_REQUEST pioSendPci,
      __in         LPCBYTE pbSendBuffer,
      __in         DWORD cbSendLength,
      __inout_opt  LPSCARD_IO_REQUEST pioRecvPci,
      __out        LPBYTE pbRecvBuffer,
      __inout      LPDWORD pcbRecvLength
    ); 
```

**C# 代码**

```
[StructLayout(LayoutKind.Sequential)]
public struct SCARD_IO_REQUEST
{
    public int dwProtocol;
    public int cbPciLength;
}

[DllImport("winscard.dll")]
public static extern int SCardTransmit(
     int hCard, 
     ref SCARD_IO_REQUEST pioSendRequest, 
     ref byte SendBuff, 
     int SendBuffLen, 
     ref SCARD_IO_REQUEST pioRecvRequest, 
     ref byte RecvBuff, 
     ref int RecvBuffLen); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T12:21:19.147

您可以将 更改`struct`为 a`class`然后通过`null`。请记住， C#`struct`与 C++ 完全不同`struct`，在这里您真的想使用 C# `class`。

或者，如果您总是想忽略`pioRecvRequest`更改`SCardTransmit`so`pioRecvRequest`类型的签名`IntPtr`。然后传递`IntPtr.Zero`值。

实际上，这`SCARD_IO_REQUEST`只是一个标头，如果你想在调用中传递它，你将不得不自己管理这个结构和额外的缓冲区空间，所以这`IntPtr`是正确的选择。然后，您必须在调用之前使用`Marshal`函数来分配和填充结构，并在调用之后解组数据并释放它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T13:14:18.000

C# 支持方法重载。您可以在这里利用一些东西，重新声明该方法，但现在给它一个 IntPtr 参数类型（无 ref）。并通过 IntPtr.Zero。

第二种方法是自己编组结构。声明参数类型 IntPtr。并使用 Marshal.AllocHGlobal() 为结构分配内存， Marshal.StructureToPtr() 将结构复制到其中。Marshal.FreeHGlobal() 通话后。或者通过 IntPtr.Zero。显然，超载技巧的痛苦要小得多。

# wpf - Beyond Compare 的 XAML 文件格式

> ID：11901535
> 
> 赞同：1
> 
> 时间：2012-08-10T12:18:02.563
> 
> 标签：wpf, silverlight, xaml, file-format, beyondcompare

是否有人为 XAML 文件创建了文件格式，以与[Beyond Compare](http://www.scootersoftware.com/)一起使用。虽然 xml 格式适合 xaml 文件，并且使用[XML 整理和 XML 整理的属性排序](http://weblogs.asp.net/lorenh/archive/2008/11/19/comparing-xml-files-with-beyond-compare-3-brilliant.aspx)格式可以使其更强大，但我计划基于这两种 xml 格式为 XAML 创建自定义文件格式。

如果有人使用 xaml 文件格式，那么请分享或让我知道我可以在我正在创建的 xaml 格式中进行哪些其他自定义。

# symfony-1.4 - Symfony 1.4 embedRelation where 子句

> ID：11901539
> 
> 赞同：0
> 
> 时间：2012-08-10T12:18:06.777
> 
> 标签：symfony-1.4, symfony-forms, doctrine-1.2

是否可以在 embedRelation 上设置 where 子句？

```
$this->embedRelation('treatedStones'); 
```

我需要得到其中stone_free = 0 的处理过的石头

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:04:40.100

我认为你不能这样做`embedRelation`，但你可以像在`sfFormDoctrine`.

```
$subForm = new sfForm();

// create a custom query e.g. in `TreatedStoneTable::queryFree($relatedId)` and
// a method to the class of `$this->getObject()` to retrieve free stones 
// e.g. `Class::getFreeTreatedStones()` to call the query
foreach ($this->getObject()->getFreeTreatedStones() as $index => $childObject)
{
  $form = new TreatedStoneForm($childObject);

  $subForm->embedForm($index, $form);
  $subForm->getWidgetSchema()->setLabel($index, (string) $childObject);
}

$this->embedForm('treated_stones', $subForm); 
```

[您可以在文档](http://www.symfony-project.org/more-with-symfony/1_4/en/06-Advanced-Forms)中找到有关表单如何工作的更多详细信息。

# c# - C# - 如何跳过具有默认值的参数？

> ID：11901546
> 
> 赞同：10
> 
> 时间：2012-08-10T12:18:34.873
> 
> 标签：c#, parameter-passing, optional-parameters

考虑以下方法示例：

```
public void MyMethod (string par1, bool par2 = "true", string par3="")
{
} 
```

现在假设我调用 MyMethod 并将 par3 的值设置为“IamString”。

**如果不将 par2 的值设置为 true 或 false，我怎么能做到这一点？**

我基本上想将 par2 值保留为默认值。

我问这个是因为在 Flash 的 ActionScript 中可以通过使用关键字*default*来做到这一点，所以我可以调用 MyMethod ("somestring", default, "IamString") 并且 par2 将被解释为*true*，这是它的默认值。我想知道在 C# 中是否也可以。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-10T12:20:43.530

```
public void MyMethod (string par1, bool par2 = "true", string par3=""){}
Myclass.MyMethod(par1:"par1", par3:"par3"); 
```

顺便说一句，这行不通：`bool par2 = "true"`

`string par2 = "true"`

或者

`bool par2 = true`

谈到默认值，您还可以使用它来获取特定类型的默认值：

`default(T)`

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-10T12:20:34.437

您可以通过命名参数来指定它：

```
instance.MyMethod( "Hello", par3:"bla" ); 
```

看看[这里](http://msdn.microsoft.com/en-us/library/dd264739.aspx)。

还有另一个错误：

```
bool par2 = true 
```

是正确的..

# .htaccess - RewriteEngine 调整 Action php-cgi

> ID：11901550
> 
> 赞同：1
> 
> 时间：2012-08-10T12:18:45.810
> 
> 标签：.htaccess

我根本不擅长 .htaccess 的东西，我们的客户安装了他的服务器，他需要将它添加到 .htaccess 以使 php 执行

```
Action php-cgi /~devoaas1/cgi-bin/.ht_bin/php5.cgi 
addHandler php-cgi .php 
```

但这似乎在我打开 RewriteEngine 时出现了一些问题，我不知道如何解释，但这是一个问题。

有没有办法为 Action php-cgi 创建忽略规则？

# jquery - 不显眼的验证忽略 data-val 属性，但使用 class="required"

> ID：11901552
> 
> 赞同：5
> 
> 时间：2012-08-10T12:18:46.403
> 
> 标签：jquery, html, razor, jquery-validate, unobtrusive-validation

我有以下看法：

```
@using (Html.BeginForm())
{
    <div class="left-column">
        @Html.LabelFor(m => m.Expression)
        @Html.TextAreaFor(m => m.Expression, new { @spellcheck = "false" })
        @Html.EditorFor(m => m.Sku)
    </div>
} 
```

使用以下在计时器上每秒运行的 JavaScript：

```
$("form").validate();

if ($("form").valid()) {
    //...
} 
```

为文本区域元素（唯一需要验证的元素）生成以下 html：

```
<textarea 
    data-val="true"
    data-val-required="The Expression field is required."
    cols="20" rows="2"
    id="Expression" name="Expression"
    spellcheck="false">
</textarea> 
```

问题是验证不会做任何事情，除非我使用浏览器工具手动添加 class="required"。如果我执行此验证工作并显示错误消息“表达式字段是必需的”。确切地说，即使 textarea 为空，“$("form").valid()” 也总是返回 true。由于我使用的是自动生成 data-val 属性的注释，所以我想依赖这些。我究竟做错了什么？

仅供参考，我的脚本参考如下所示：

```
<script src="/Scripts/modernizr-2.0.6-development-only.js" ...
<script src="/Scripts/jquery-1.6.2.js" ...
<script src="/Scripts/Parser.js" ...
<script src="/Scripts/jquery.unobtrusive-ajax.js" ...
<script src="/Scripts/jquery.validate.js" ...
<script src="/Scripts/jquery.validate.unobtrusive.js" ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T05:15:48.753

您是否为 .NET 启用了 Unobtrusive Javascript 和客户端验证？

尝试在您的视图中设置以下内容：

```
@{  Html.EnableUnobtrusiveJavaScript(true);
    Html.EnableClientValidation(true);
    Html.ValidationSummary(true);   
} 
```

你也可以在你的 web.config 中设置它

```
<appSettings>
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />
</appSettings> 
```

# windows-7 - 重命名多个jpg文件

> ID：11901555
> 
> 赞同：1
> 
> 时间：2012-08-10T12:19:15.120
> 
> 标签：windows-7, batch-file

我有一个带有时间戳的网络摄像头文件的目录。它从午夜开始，每分钟拍一张照片。

*0001webcamimage.jpg
0002webcamimage.jpg
0003webcamimage.jpg
...
0059webcamimage.jpg
0100webcamimage.jpg* 
现在我想将所有带有批处理文件的文件转换为这种格式。顺序很重要。

*0001.jpg
0002.jpg
0003.jpg
...
0060.jpg
0061.jpg* 

有人能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T12:34:52.307

假设 Windows 和 4 位前缀

```
setlocal enabledelayedexpansion
for %%f in (*webcamimage.jpg) do (
    set name=%%f
    ren "!name!" "!name:~0,4!.jpg"
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T21:56:15.650

以下类似于@Alex K. 的建议，但不从原始名称中提取数字。相反，它使用计数器并使用计数器的值形成新名称：

```
@ECHO OFF
SET /A num=10000
FOR %%I IN (*webcamimage.jpg) DO (
  SET /A num+=1
  SETLOCAL EnableDelayedExpansion
  RENAME "%%I" !num:~-4!.*
  ENDLOCAL
) 
```

请注意，新名称将始终以`0001.jpg`.

**更新**

如果批处理文件与图像不在同一目录中，您可以像这样指定它们的路径：

```
@ECHO OFF
SET /A num=10000
FOR %%I IN (**D:\path\to\images\***webcamimage.jpg) DO (
  SET /A num+=1
  SETLOCAL EnableDelayedExpansion
  RENAME "%%I" !num:~-4!.*
  ENDLOCAL
) 
```

或者，您可以`CD /D`在循环之前添加命令以更改图像所在的目录：

```
@ECHO OFF
**CD /D D:\path\to\images**
SET /A num=10000
FOR %%I IN (*webcamimage.jpg) DO (
  SET /A num+=1
  SETLOCAL EnableDelayedExpansion
  RENAME "%%I" !num:~-4!.*
  ENDLOCAL
) 
```

如果在完成作业后，您需要更改回在调用批处理文件之前处于活动状态的目录，请使用`PUSHD`and `POPD`：

```
@ECHO OFF
**PUSHD D:\path\to\images**
SET /A num=10000
FOR %%I IN (*webcamimage.jpg) DO (
  SET /A num+=1
  SETLOCAL EnableDelayedExpansion
  RENAME "%%I" !num:~-4!.*
  ENDLOCAL
)
**POPD** 
```

当然，您也可以对路径进行参数化，以便在调用批处理文件时可以在命令行中指定它。就是这样：

```
@ECHO OFF
**SET "imagepath=%~1"**
SET /A num=10000
FOR %%I IN (**"%imagepath%\*webcamimage.jpg"**) DO (
  SET /A num+=1
  SETLOCAL EnableDelayedExpansion
  RENAME "%%I" !num:~-4!.*
  ENDLOCAL
) 
```

现在您可以在命令提示符处或从另一个批处理文件中调用批处理文件，如下所示：

```
*batchname*.bat D:\path\to\images 
```

（如果您不知道：如果您从另一个批处理文件调用批处理文件，您可能需要`CALL`在被调用的批处理文件的名称之前添加，即。）`CALL *batchname parameters*`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-10T12:32:12.367

对于 linux，使用 rename ：

```
rename 'webcamimage' '' *.jpg 
```

# visual-studio - 在部署项目中混合本地和下载先决条件

> ID：11901556
> 
> 赞同：0
> 
> 时间：2012-08-10T12:19:23.827
> 
> 标签：visual-studio, deployment, installation, vsto, clickonce

根据[使用 ClickOnce 捆绑仅部分先决条件的问题，](https://stackoverflow.com/questions/3510938/bundling-only-part-of-the-prerequisites-with-clickonce) ClickOnce 安装程序可以从 Web 下载所有先决条件或期望本地的所有文件。这似乎与 Visual Studio 2008 部署项目相同。

由于我还希望在安装程序存档中仅包含选定的先决条件，所以我想知道这是否真的仍然是最先进的。升级到 Visual Studio 2010 会解决这个问题还是有什么我忽略的解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T11:33:49.073

所以这是我想出的一个想法。

*   将引导安装程序与除 .NET 框架之外的所有先决条件打包在一起，并设置“从组件供应商的网站下载先决条件”
*   创建一个启动的小程序（批处理文件或可执行文件），而不是执行以下操作的引导安装程序
    *   检查是否安装了 .NET 框架（引导程序包文件告诉您如何检查，例如 .NET 框架是否已安装 `HKLM\Software\Microsoft\NET Framework Setup\NDP\v3.5\1033\Install == 1`）
    *   如果是，执行`setup.exe -homesite=false`配置安装程序不下载任何文件
    *   执行`setup.exe`

欢迎评论！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T07:21:20.387

您可以打包先决条件并设置下载 URL 并将先决条件放在那里。然后，当引导程序安装了先决条件时，它将从 URL 下载它，而不必将其包含在部署包中。当然，这意味着您每次想要执行此操作时都必须设置自己的引导程序包，但它确实有效。

# algorithm - 在二叉树中找到 O(1) 中的中位数

> ID：11901558
> 
> 赞同：5
> 
> 时间：2012-08-10T12:19:34.233
> 
> 标签：algorithm, data-structures, language-agnostic, binary-search-tree

假设我有一个平衡的 BST（二叉搜索树）。每个树节点都包含一个特殊字段`count`，它计算该节点的所有后代 + 节点本身。他们称这种数据结构`order statistics binary tree`。

该数据结构支持 O(logN) 的两种操作：

*   `rank(x)`-- 小于的元素个数`x`
*   `findByRank(k)``rank`-- 找到带有==的节点`k`

现在我想添加一个新操作`median()`来查找中位数。如果树是平衡的，我可以假设这个操作是 O(1) 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T13:48:35.330

除非树是完整的，否则中位数可能是叶节点。所以在一般情况下，成本将是 O(logN)。我猜有一个具有请求属性和 O(1) findMedian 操作的数据结构（可能是一个跳过列表 + 一个指向中间节点的指针；虽然我不确定 findByRank 和 rank 操作）但平衡的 BST 不是其中之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T12:22:26.743

如果树是完整的（即所有级别都完全填充），是的，你可以。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T20:39:42.637

在平衡顺序统计树中，找到中位数是 O(log N)。如果在 O(1) 时间内找到中位数很重要，您可以通过维护指向中位数的指针来扩充数据结构。当然，问题是您需要在每次插入或删除操作期间更新此指针。更新指针将花费 O(log N) 时间，但由于这些操作已经花费 O(log N) 时间，更新中值指针的额外工作不会改变它们的大 O 成本。

实际上，与插入/删除的数量相比，这仅在您执行大量“查找中值”操作时才有意义。

[如果需要，您可以通过使用（双）线程二叉树](http://en.wikipedia.org/wiki/Threaded_binary_tree)将插入/删除期间更新中值指针的成本降低到 O(1) ，但插入/删除仍将是 O(log N)。

# ruby - 三元运算符：一个参数和不同的方法

> ID：11901568
> 
> 赞同：1
> 
> 时间：2012-08-10T12:20:12.033
> 
> 标签：ruby, ternary-operator

我使用简单的三元运算符编写了一些代码：

```
<%= (current_user.is_company?) 
    ? company_path(current_user.character)
    : individual_path(current_user.character) %> 
```

我可以把这个表达式写得更简单更简洁吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:12:16.990

没有什么可以简化的，但这是我能做的：

```
send((current_user.is_company? ? :company_path : :individual_path),
     current_user.character) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T12:25:40.017

我认为你不能简化它，但你可以做的是把代码放在你的控制器中，然后在视图上渲染变量：

```
@real_path = current_user.is_company? ? 
  company_path(current_user.character) : 
  individual_path(current_user.character)

<%= @real_path %> 
```

我相信它对视图的攻击性较小。

# magento - 如何在magento中使用orderid计算订单中的项目（当项目状态=混合时）？

> ID：11901572
> 
> 赞同：1
> 
> 时间：2012-08-10T12:20:27.070
> 
> 标签：magento

我正在尝试计算订单中的商品总数，但我无法正确计算。我正在使用此代码-

```
$total=0;
$order = Mage::getModel('sales/order')->load($oid);
$items = $order->getAllItems();

foreach($items as $item){
$qty = $item->getQtyToInvoice();
$total = $total + $qty;
}
echo "total :".$total; 
```

如果订单中的商品状态已发货，则打印正确的结果，但如果商品状态为混合，则打印 0 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T15:36:30.677

您是否只是在查找订购的商品数量，而不管其发货/开票/退款状态如何？

如果是这样，那么替换`getQtyToInvoice()`为`getQtyOrdered()`.

例如：

```
foreach($items as $item){
    $qty = $item->getQtyOrdered();
} 
```

要回答评论中的问题：“我也在寻找发货的物品数量”

```
$item->getQtyShipped() 
```

# jquery - com.google.gson.JsonSyntaxException：java.lang.IllegalStateException：应为 BEGIN_ARRAY 但为 STRING

> ID：11901575
> 
> 赞同：0
> 
> 时间：2012-08-10T12:20:34.543
> 
> 标签：jquery, ajax, json, gson

我目前正在将 Gson 与 JQWidgets 一起使用。

第 1 步：使用 gson 使用其 api 将以下格式的 json 数据作为 JQWidgets 支持的行发送到网格。

```
[
  { "CompanyName": "Alfreds Futterkiste", "ContactName": "Maria Anders", "ContactTitle": "Sales Representative", "Address": "Obere Str. 57", "City": "Berlin", "Country": "Germany" },
  { "CompanyName": "Ana Trujillo Emparedados y helados", "ContactName": "Ana Trujillo", "ContactTitle": "Owner", "Address": "Avda. de la Constitucin 2222", "City": "Mxico D.F.", "Country": "Mexico" }, 
  { "CompanyName": "Antonio Moreno Taquera", "ContactName": "Antonio Moreno", "ContactTitle": "Owner", "Address": "Mataderos 2312", "City": "Mxico D.F.", "Country": "Mexico" }
] 
```

Step2：在jsp的前端，网格行的数据发生了变化，这些变化被推送到一个临时数组中，如下所示。

// 这里创建了一个全局数组，并将网格每一行中所做的数据更改 // 放入数组中

```
 var tempArray = new Array();
    {
     var data = $('#jqxgridreq').jqxGrid('getrowdata', args.rowindex);
     var arr = $.makeArray(data);
     tempArray.push(data);                
    } 
```

随后是 --> var json_string = JSON.stringify(tempArray); 此处，创建 json 字符串时的数据与上面显示的示例数据相同。

Step3：修改后的数据作为AJAX调用发送到服务器，如下

```
[
  { "CompanyName": "IOK", "ContactName": "Maria Anders", "ContactTitle": "Sales Head", "Address": "Obere Str. 57", "City": "Berlin", "Country": "Germany" },                    
  { "CompanyName": "Dubiou", "ContactName": "Ana Trujillo", "ContactTitle": "Sales Manager", "Address": "Avda. de la Constitucin 2222", "City": "Mxico D.F.", "Country": "Mexico" }                    
] 
```

它到达我希望在发送时读取它的服务器端代码，我收到以下错误：

```
com.google.gson.JsonSyntaxException: java.lang.IllegalStateException: Expected BEGIN_ARRAY but was STRING 
```

请帮助并建议如何解决此问题。

感谢和问候牧场

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T12:33:54.533

> 它到达我希望在发送时读取它的服务器端代码，我收到以下错误：

您是否在服务器端阅读之前将其转换`String`为？`JSONArray`

像这样，

```
JSONArray array = new JSONArray(json_data); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-10T12:53:18.553

Gson 排除了要与 POJO 映射的键，例如

```
 public class Test {
    private List<Type> attr;
     } 
```

并且这个 attr 必须存在于 json {" **attr** " : [ { "CompanyName": "IOK", "ContactName": "Maria Anders", "ContactTitle": "Sales Head", "Address": "Obere Str . 57", "City": "Berlin", "Country": "Germany" },
{ "CompanyName": "Dubiou", "ContactName": "Ana Trujillo", "ContactTitle": "Sales Manager", "Address ": "Avda. de la Constitucin 2222", "City": "Mxico DF", "Country": "Mexico" }
] }

# asp.net-mvc - 调用 EditorForModel（自定义对象模板）时未使用集合属性的 EditorTemplate

> ID：11901577
> 
> 赞同：1
> 
> 时间：2012-08-10T12:20:36.993
> 
> 标签：asp.net-mvc, asp.net-mvc-3, mvc-editor-templates

我知道在使用 EditorForModel 时通常不会呈现复杂类型，但我使用的是自定义对象模板，该模板不进行检查并为包括复杂类型在内的每个属性调用 Html.Editor。

不幸的是，虽然我可以在对象模板中看到属性的正确 TemplateHint 值，但编辑器调用似乎没有使用它，而是使用了内置的集合模板。

我的对象模板基本上是这样的：

```
@foreach (var property in ViewData.ModelMetadata.Properties.Where(x => x.ShowForEdit))
{
  @Html.Editor(property.PropertyName)
} 
```

如果我通过将名称传递给 Editor 调用来强制使用模板，则模板中的 ModelMetadata 为空。

这是一个错误/有任何解决方法吗？

更多信息：

所以我的视图模型包含以下内容：

```
[ACustomAttribute("Something")]
public IEnumerable<int> SelectedOptions { get; set; } 
```

该属性实现了 IMetadataAware 并将一些内容添加到 ModelMetadata 的 AdditionalValues 集合以及设置 TemplateHint。我可以从对象模板中读取这些数据，但不能从我的自定义模板中读取。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T12:34:57.867

```
@foreach (var property in ViewData.ModelMetadata.Properties.Where(x => x.ShowForEdit))
{
    if (!string.IsNullOrEmpty(property.TemplateHint))
    {
        @Html.Editor(property.PropertyName, property.TemplateHint)
    }
    else
    {
        @Html.Editor(property.PropertyName)
    }
} 
```

但请注意，如果您不依赖已建立的约定来解析复杂集合类型（又名）的模板，并且在您的集合属性上`~/Views/Shared/EditorTemplates/NameOfTheTypeOfCollectionElements.cshtml`使用了 an ：`UIHint`

```
[UIHint("FooBar")]
public IEnumerable<FooViewModel> Foos { get; set; } 
```

那么`~/Views/Shared/EditorTemplates/FooBar.cshtml`编辑器模板必须是强类型的，`IEnumerable<FooViewModel>`而不是`FooViewModel`. 所以要小心，如果这是你的情况，如果你想访问集合的各个项目，你可以在这个自定义模板中循环。它将不再是 ASP.NET MVC，它会自动为您循环并为每个元素调用编辑器模板。

* * *

更新：

仍然无法重现您的问题。

自定义属性：

```
public class ACustomAttribute : Attribute, IMetadataAware
{
    private readonly string _templateHint;
    public ACustomAttribute(string templateHint)
    {
        _templateHint = templateHint;
    }

    public void OnMetadataCreated(ModelMetadata metadata)
    {
        metadata.AdditionalValues["foo"] = "bar";
        metadata.TemplateHint = _templateHint;
    }
} 
```

模型：

```
public class MyViewModel
{
    [ACustom("Something")]
    public IEnumerable<int> Foos { get; set; }
} 
```

控制器：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        var model = new MyViewModel
        {
            Foos = Enumerable.Range(1, 5)
        };
        return View(model);
    }
} 
```

查看 ( `~/Views/Home/Index.cshtml`):

```
@model MyViewModel

@using (Html.BeginForm())
{
    @Html.EditorForModel()
} 
```

对象类型 ( `~/Views/Shared/EditorTemplates/Object.cshtml`) 的编辑器模板：

```
@foreach (var property in ViewData.ModelMetadata.Properties.Where(x => x.ShowForEdit))
{
    if (!string.IsNullOrEmpty(property.TemplateHint))
    {
        @Html.Editor(property.PropertyName, property.TemplateHint)
    }
    else
    {
        @Html.Editor(property.PropertyName)
    }
} 
```

自定义编辑器模板 ( `~/Views/Shared/EditorTemplates/Something.cshtml`)：

```
@model IEnumerable<int>

<h3>
    @ViewData.ModelMetadata.AdditionalValues["foo"]
</h3>

@foreach (var item in Model)
{
    <div>
        @item
    </div>
} 
```

结果：

![在此处输入图像描述](../Images/92f4c6e50bc0c27f4fff5677fdd1c377.png)

如您所见，我们添加的其他元数据显示在模板中。

# sql - 对包含聚合或子查询的表达式执行聚合函数的问题

> ID：11901581
> 
> 赞同：0
> 
> 时间：2012-08-10T12:20:49.380
> 
> 标签：sql

```
select 
    A.ACCT as acct, COUNT(TRANS_key) as payments
from 
    DEBT A 
join 
    TRANS B on B.DEBT_KEY = A.DEBT_KEY
join 
    TRANS_CODE C on C.TRANS_CODE = B.TRANS_CODE
join 
    CLIENT D on D.CLIENT_KEY = A.CLIENT_KEY
join 
    STATUS S on S.STAT_KEY = A. STAT_KEY
where 
    S.CATEGORY = 'A' and D.CLIENT_KEY = 43 
```

错误：

> *无法对包含聚合或子查询的表达式执行聚合函数。*

运行此程序时出现上述错误。我不确定我是否应该以不同的方式加入这些表，但我需要这个工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T12:23:05.183

尝试

```
select A.ACCT as acct, COUNT(TRANS_key) as payments
from DEBT A 
join TRANS B on B.DEBT_KEY = A.DEBT_KEY
join TRANS_CODE C on C.TRANS_CODE = B.TRANS_CODE
join CLIENT D on D.CLIENT_KEY = A.CLIENT_KEY
join STATUS S on S.STAT_KEY = A. STAT_KEY
where S.CATEGORY = 'A' and D.CLIENT_KEY = 43
group by A.ACCT 
```

您不能使用像`count`这样的聚合函数只返回 1 个结果和返回多个结果的选择。如果你想计算每个`a.acct`然后执行上述操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T12:24:22.720

所有其他选择都必须分组。用这个

```
 select A.ACCT as acct, COUNT(TRANS_key) as payments

from DEBT A join TRANS B on B.DEBT_KEY = A.DEBT_KEY

join TRANS_CODE C on C.TRANS_CODE = B.TRANS_CODE

join CLIENT D on D.CLIENT_KEY = A.CLIENT_KEY

join STATUS S on S.STAT_KEY = A. STAT_KEY

where S.CATEGORY = 'A' and D.CLIENT_KEY = 43
GROUP BY A.ACCT 
```

# javascript - 如何关闭 javascript Metro 风格的应用程序？

> ID：11901584
> 
> 赞同：1
> 
> 时间：2012-08-10T12:21:05.060
> 
> 标签：javascript, windows-8, microsoft-metro

是否有退出 Metro 风格应用程序的代码？在 C#、C++ 或 VB 中，有类似的示例，`CoreApplication.Exit()`但我无法为 Javascript 找到类似的内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T15:06:43.323

一般建议是应用程序*不*提供它们自己的紧密可供性。在您的示例中，自动关闭以响应网络连接丢失将看起来好像应用程序在这种情况下崩溃。因此，它可能实际上并没有通过 Windows Store 认证（请参阅[要求](http://msdn.microsoft.com/en-us/library/windows/apps/hh694083.aspx)，第 3.2 节关于意外结束的应用程序）。此外，如前所述，第 3.6 节禁止应用程序自行关闭，因此您也会失败。

调用 window.close 将生成出现在 Windows 应用商店仪表板中的崩溃报告，并将记录为应用程序崩溃，事实上（这可能最终会影响应用商店中的应用程序——对此不确定，但我不会不要冒险）。在这种情况下，最好使用 MSApp.terminateApp 因为崩溃报告会更全面（您可以包含自己的信息）。尽管如此，MSApp.terminateApp 应该只用于真正不可恢复的情况。

如果您有应用程序无法继续有效运行的情况，但本身不是崩溃，例如网络连接丢失，最好通知用户该情况并让他们决定是否关闭应用程序（通过 Alt +F4 或自上而下的滑动关闭手势）作为响应。您还应该检测源的网络连接何时恢复并继续。这样，应用程序就不会丢失其状态，并且可以从中断的地方继续，从而提供连续的用户体验。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T12:32:27.950

Metro 风格应用程序的[应用程序生命周期](http://msdn.microsoft.com/en-us/library/windows/apps/hh464925.aspx)中确实没有明确的“关闭” 。

> 一般来说，用户不需要关闭应用程序，他们可以让 Windows 管理它们。但是，用户可以选择使用关闭手势或按 Alt+F4 来关闭应用程序。您不能在您的应用中包含任何 UI 以使用户能够关闭您的应用，否则它将无法通过商店认证流程。

您应该正确处理暂停和恢复，并允许用户控制应用程序的显式关闭（在 Windows 8 中有一个关闭 Metro 风格应用程序的手势，不需要像按钮一样提供视觉提示）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T22:42:47.333

你可以调用`MSApp.terminateApp`函数。此处的详细信息：http: [//msdn.microsoft.com/pl-pl/library/windows/apps/hh770781.aspx](http://msdn.microsoft.com/pl-pl/library/windows/apps/hh770781.aspx)

# security - 如何在 QtWebKit 中禁用 X-Frame-Options

> ID：11901596
> 
> 赞同：4
> 
> 时间：2012-08-10T12:21:34.233
> 
> 标签：security, webkit, qtwebkit, x-frame-options

我对 QtWebKit 的安全性有疑问，我想禁用 X-Frame-Options，这样我就可以在我的应用程序内的 iframe 中嵌入 facebook.com 等网站。

我知道可以使用 WebCore API（isWebSecurityEnabled 开关，[http](http://trac.webkit.org/wiki/ConfigurableFeatures) ://trac.webkit.org/wiki/ConfigurableFeatures ）来实现，但我没有找到任何使用 QtWebKit 的方法。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-09-26T03:14:11.117

我有同样的问题（但适用于带有渲染引擎QtWebKit的命令行浏览器**phantonjs**），分析问题后的唯一选择是修改QtWebKit的渲染行为。

好的，变化很小，我们只是将函数**FrameLoader :: shouldInterruptLoadForXFrameOptions**更改为在任何情况下都返回false（[https://github.com/deerme/phantomjs/blob/master/src/qt/qtwebkit/Source/WebCore /loader/FrameLoader.cpp#L2986](https://github.com/deerme/phantomjs/blob/master/src/qt/qtwebkit/Source/WebCore/loader/FrameLoader.cpp#L2986)）。

在我的特殊情况下，我在 QtWebKit ( [https://github.com/deerme/phantomjs](https://github.com/deerme/phantomjs) ) 中进行了这个小改动，对 phantonjs 存储库进行了分叉。

因此，在您的特定情况下，您应该下载 QtWebEngine 的源代码并进行更改，最后您可以使用在您的 Qt 应用程序中修改的 QtWebEngine。

# c++ - 使用整数值作为模板参数的函数模板中的参数推导

> ID：11901608
> 
> 赞同：2
> 
> 时间：2012-08-10T12:22:37.960
> 
> 标签：c++, templates, generic-programming

我正在尝试实现一个通用函数，它`std::string`从一个 id （它是一个`std::pair<uint32_,uint32_t>`）生成一个。

功能如下：

```
typedef uint32_t element_type;

template <element_type type>
std::string to_string (const std::pair<element_type, uint32_t>& id) {
    ....
    const char* name = elemen_type_traits<type>::element_type_name;
    ...
} 
```

我可以通过以下方式调用该函数：

```
std::cout << to_string<ELEMENT_TYPE_FOO> (foo_0) << std::endl;
std::cout << to_string<ELEMENT_TYPE_FOO> (foo_1) << std::endl; 
```

唯一的事情是我想确保模板参数与`std::pair`. 是否可以从中扣除参数值`std::pair.first`？

我不知道这是否可能，但最后我想要这样的东西：

```
std::cout << to_string (foo_0) << std::endl;
std::cout << to_string (foo_1) << std::endl; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T12:42:11.857

如果您在类型中编码值，这实际上是可以实现的：

```
// C++11 'enum class' emulation, you don't want to leak 'foo' everywhere
// also called a "scoped enum"
struct element_type_value{
   enum type{
     foo = 1337
   };
};

template<element_type_value::type V>
struct element_type{};

template<element_type_value::type V>
std::string to_string(std::pair<element_type<V>, uint32_t> const& /*id*/){
  // ...
  const char* name = element_type_traits<V>::element_type_name;
  // ...
} 
```

[活生生的例子。](http://liveworkspace.org/code/cf2138562f108b1a34b4765c9204a8d4)

当然，这仅在类型始终是静态已知值时才有效，实际上您甚至`id.first`不再需要它。但是，据我所知，没有其他方法可以实现此检查。

我个人可能会放弃`std::pair`并制作一个自定义结构，以及其他一些重构。

```
struct element_type{
   enum type{
     foo = 1337
   };
};

template<element_type::type V>
struct element_type_id{
  element_type_id(uint32_t id) : id(id){}
  uint32_t id; // or whatever your original std::pair::second represented
};

template<element_type::type V>
std::string to_string(element_type_id<V> const& /*id*/){
  // ...
  const char* name = element_type_traits<V>::element_type_name;
  // ...
} 
```

[活生生的例子。](http://liveworkspace.org/code/0acd48d7aeb1621e6a296c2ee2569f5c)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T12:49:03.590

如果我理解正确，您可以简单地写：

```
std::string to_string (const std::pair<element_type, uint32_t>& id) {
 const element_type type = id.first;
 ....
 const char* name = elemen_type_traits<type>::element_type_name;
 ...
} 
```

# javascript - primefaces 布局的内容重叠

> ID：11901613
> 
> 赞同：0
> 
> 时间：2012-08-10T12:22:49.427
> 
> 标签：javascript, html, css, primefaces, facelets

我正在使用 primefaces 布局组件，并在北布局单元中有一个下拉列表。下拉列表将被剪切，并且不会与其他布局单元重叠。如何改变这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T13:13:58.700

通过 css 找到了一个简单的解决方案：

```
.ui-layout-north {
    overflow:visible !important;
}

.ui-layout-north .ui-layout-unit-content {
    overflow:visible !important;
} 
```

# algorithm - 算法：如何将具有共同范围的集合分成每个不同的范围

> ID：11901615
> 
> 赞同：0
> 
> 时间：2012-08-10T12:22:52.343
> 
> 标签：algorithm, math, integer, range

我已经尝试了这个问题很长一段时间，但找不到一个好的解决方案：

假设我们有整数范围，例如

```
 100 - 1000
 200 - 300
 500 - 600
 550 - 575
 800 - 1200
 1100 - 2300 
```

所以我想将这些混合范围纳入每个单独的不同范围

```
 100 - 199
 200 - 300
 301 - 499
 500 - 549
 550 - 575
 575 - 600
 800 - 1099
 1100 - 1200
 1201 - 2300 
```

有一些标准算法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T12:40:10.440

将每个数字推入一个数组，排序和重复数据删除。在 C++ 中，将它们全部插入 a`std::set<int>`具有预期的效果。在 Python 中，您可以编写`sorted(set(x for (a, b) in ranges for x in (a, b)))`.

在结果集合中，相邻对表示不重叠的范围。

需要注意的是，这种技术依赖于 [a, b) 约定（即，包含在左侧；排除在右侧）来描述范围。

# jar - 在不创建 jar 文件的情况下运行 hadoop 作业

> ID：11901621
> 
> 赞同：1
> 
> 时间：2012-08-10T12:23:12.907
> 
> 标签：jar, hadoop, classpath

我写了一个简单的hadoop工作。现在我想在不创建 jar 文件的情况下运行它，而不是在网上找到很多教程。

我从运行 hadoop(2.0.0+91) 的 cloudera CHD4 发行版的 ubuntu 平台上的 shell 脚本调用它。

我无法创建作业的 jar 文件，因为它依赖于其他几个第三方 jar 和配置文件，这些文件已经集中部署在我的机器上，并且在创建 jar 时无法访问。因此，我正在寻找一种可以包含这些自定义 jar 文件和配置文件的方法。

我也不能使用 -libjars 和 DistributedCache 选项，因为它们只影响 map/reduce 阶段，但我的驱动程序类也在使用这些 jar 和配置文件。我的工作使用了几个内部实用程序代码，这些代码在内部使用这些第三方库和配置文件，我只能从集中部署的位置读取这些文件。

这是我从 shell 脚本中调用它的方式。

```
sudo -u hdfs hadoop x.y.z.MyJob /input /output 
```

它向我展示了一个

```
Caused by: java.lang.ClassNotFoundException: x.y.z.MyJob
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247) 
```

我的调用 shell 脚本成功地设置了 hadoop 类路径，并从一个集中部署的位置包含了我所需的所有第三方库和配置文件。

我确信我的类**xyzMyJob**以及所有必需的库和配置文件都在我在调用 hadoop 作业之前设置的**$CLASSPATH**和**$HADOOP_CLASSPATH环境变量中找到**

为什么在运行脚本时我的程序找不到类。我不能将作业作为普通的 java 类运行吗？我所有其他普通的 java 程序都使用相同的类路径，他们总是可以毫无问题地找到类和配置文件。

请让我知道如何访问集中部署的 haddop 作业代码并执行它。

**编辑：**这是我设置类路径的代码

```
CLASSES_DIR=$BASE_DIR/classes/current
BIN_DIR=$BASE_DIR/bin/current
LIB_DIR=$BASE_DIR/lib/current
CONFIG_DIR=$BASE_DIR/config/current
DATA_DIR=$BASE_DIR/data/current
CLASSPATH=./
CLASSPATH=$CLASSPATH:$CLASSES_DIR
CLASSPATH=$CLASSPATH:$BIN_DIR
CLASSPATH=$CLASSPATH:$CONFIG_DIR
CLASSPATH=$CLASSPATH:$DATA_DIR
LIBPATH=`$BIN_DIR/lib.sh $LIB_DIR`
CLASSPATH=$CLASSPATH:$LIBPATH
export HADOOP_CLASSPATH=$CLASSPATH 
```

lib.sh 是将所有第三方文件连接为 : 分隔格式的文件，CLASSES_DIR 包含我的工作代码 xyzMyJob 类。我所有的配置文件都在 CONFIG_DIR 下

当我打印我的 CLASSPATH 和 HADOOP_CLASSPATH 时，它会显示正确的值。但是，每当我在执行作业之前调用 hadoop 类路径时，它都会显示以下输出。

```
$ hadoop classpath

/etc/hadoop/conf:/usr/lib/hadoop/lib/*:/usr/lib/hadoop/.//*:myname:/usr/lib/hadoop-hdfs/./:/usr/lib/hadoop-hdfs/lib/*:/usr/lib/hadoop-hdfs/.//*:/usr/lib/hadoop-yarn/lib/*:/usr/lib/hadoop-yarn/.//*:/usr/lib/hadoop-0.20-mapreduce/./:/usr/lib/hadoop-0.20-mapreduce/lib/*:/usr/lib/hadoop-0.20-mapreduce/.//*

$ 
```

它显然没有附加任何以前设置的 $CLASSPATH 和 $HADOOP_CLASSPATH 变量。这些环境变量在哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T10:24:49.897

在我的 shell 脚本中，我使用 Cloudera 的 hdfs 用户运行 hadoop jar 命令

```
sudo -u hdfs hadoop jar x.y.z.MyJob /input /output 
```

该代码实际上是使用常规 ubuntu 用户从脚本中调用的，该用户正在设置 CLASSPATH 和 HADOOP_CLASSPATH 变量，如上所述。并且在执行时，没有使用相同的常规 ubuntu 用户调用 hadoop jar 命令。因此，出现了一个异常，表明未找到该类。

因此，您必须使用实际设置 CLASSPATH 和 HADOOP_CLASSPATH 环境变量的同一用户来运行作业。

谢谢大家的时间。

# xamarin.android - 从 monodroid 应用程序中调用 JNIEnv

> ID：11901631
> 
> 赞同：1
> 
> 时间：2012-08-10T12:23:51.517
> 
> 标签：xamarin.android, jnienv

这是我在 monodroid 应用程序中通过 JNIEnv 访问的 Java 类

```
package mypackage;

import android.util.Log;

public class JavaScriptInterface {

    public String submitAns = "";

    // The JNI in the original question uses a default constructor.
    // Either provide one explicitly or use the implicit one...
    public JavaScriptInterface() 
    {

    }   

    public String getSelctd()
    {
        return submitAns;
    }
} 
```

我可以通过以下语句实例化该类：

```
Java.Lang.Object jclassWrp_;

IntPtr JavaScriptInterface_Class = JNIEnv.FindClass("mypackage.JavaScriptInterface");

IntPtr JavaScriptInterface_ctor = JNIEnv.GetMethodID(JavaScriptInterface_Class, "<init>", "()V"); //(Landroid/context/Context;)V

IntPtr jsInterfaceinstance_ = JNIEnv.NewObject(JavaScriptInterface_Class, JavaScriptInterface_ctor);

jclassWrp_ = new Java.Lang.Object(jsInterfaceinstance_, JniHandleOwnership.TransferGlobalRef); 
```

但是当我尝试创建对象来访问**getSelctd()**方法时：

```
IntPtr ipApid = JNIEnv.GetMethodID(jclassWrp_, "getSelctd", "()Ljava/lang/String;"); 
```

它抛出 NoSuchMethodExist 异常...请告诉我我是否以正确的方式做这件事以及我在这里缺少什么...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T17:30:14.277

> 我可以通过以下语句实例化该类：

```
Java.Lang.Object jclassWrp_;
IntPtr JavaScriptInterface_Class = JNIEnv.FindClass("mypackage.JavaScriptInterface"); 
```

JNI 的使用应该使用 JNI 约定，因此`mypackage/JavaScriptInterface`（注意`/`而不是`.`）。

```
IntPtr JavaScriptInterface_ctor = JNIEnv.GetMethodID(JavaScriptInterface_Class, "<init>", "()V");
IntPtr jsInterfaceinstance_ = JNIEnv.NewObject(JavaScriptInterface_Class, JavaScriptInterface_ctor);
jclassWrp_ = new Java.Lang.Object(jsInterfaceinstance_, JniHandleOwnership.TransferGlobalRef); 
```

`JNIEnv.NewObject()`返回本地引用，而不是全局引用，所以你想要`JniHandleOwnership.TransferLocalRef`.

> 但是当我尝试创建对象来访问 getSelctd() 方法时：

```
IntPtr ipApid = JNIEnv.GetMethodID(jclassWrp_, "getSelctd", "()Ljava/lang/String;"); 
```

`JNIEnv.GetMethodID()`接受一个类句柄，而不是一个实例。首先，上面不应该编译（`Java.Lang.Object`!= `IntPtr`）。其次，`jclassWrp`包含一个`mypackage.JavaScriptInterface`实例，而不是`mypackage.JavaScriptInterface`Class实例。

相反，请执行以下操作：

```
IntPtr ipApid = JNIEnv.GetMethodID(JavaScriptInterface_Class, "getSelctd", "()Ljava/lang/String;"); 
```

最后，不要忘记`JNIEnv.DeleteGlobalRef(JavaScriptInterface_Class)`当你不再需要它时，否则你会泄漏 gref。

完整代码：

```
// FindClass() returns a gref; must be freed (see below)
IntPtr JavaScriptInterface_Class     = JNIEnv.FindClass("mypackage/JavaScriptInterface");

// MethodIDs do not need to be freed
IntPtr JavaScriptInterface_ctor      = JNIEnv.GetMethodID(JavaScriptInterface_Class,
        "<init>", "()V");
IntPtr JavaScriptInterface_getSelctd = JNIEnv.GetMethodID(JavaScriptInterface_Class,
        "getSelctd", "()Ljava/lang/String;");

// JNIEnv.NewObject() & JNIEnv.CallObjectMethod() return lrefs; freed below
IntPtr lrefInstance                  = JNIEnv.NewObject(JavaScriptInterface_Class,
        JavaScriptInterface_ctor);
IntPtr lrefSelectd                   = JNIEnv.CallObjectMethod(jsInterfaceinstance_, ipApid);

// JniHandleOwnership.TransferLocalRef causes lrefSelectd to be released for us
string selected                      = JNIEnv.GetString(lrefSelectd, JniHandleOwnership.TransferLocalRef);

// Resource cleanup
JNIEnv.DeleteLocalRef(lrefInstance);
JNIEnv.DeleteGlobalRef(JavaScriptInterface_Class); 
```

# performance - 在加载之前检查文件是否存在更快，还是在异常不存在时捕获异常？

> ID：11901632
> 
> 赞同：10
> 
> 时间：2012-08-10T12:23:54.013
> 
> 标签：performance, delphi, if-statement, try-except

我被推荐使用第二个，*try-except*变体，但我也想知道其他人的想法：下面两个（如果有的话）哪个过程更省时？

```
procedure LoadImage(img: TImage; filename: string);
begin
  if fileexists(filename) then
    img.Picture.Loadfromfile(filename)
  else
    img.Picture.Loadfromfile('default.jpg')
end; 
```

或者

```
procedure LoadImage(img: TImage; filename: string);
begin
  try
    img.Picture.Loadfromfile(filename)
  except
    img.Picture.Loadfromfile('default.jpg')
  end
end; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-10T13:17:05.577

忘记效率。代码可读性更重要。过早的优化是万恶之源。

第一个是明确的意图。每个人都可以很容易地弄清楚发生了什么。

第二个让我停下来走“什么....？”

你永远不希望你的代码引起第二反应。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-10T13:07:10.637

如果时间效率是您唯一的标准，那么第一个会更快，因为异常处理会消耗 CPU。

FileExists() 使用一个 WinApi 调用，因此速度很快，但它仅检查文件是否存在。如果文件存在但格式错误或被其他线程阻塞，您将获得未处理的异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T12:34:04.940

您的问题的一个问题是您没有指定所需的语义。有两种可能的解释，哪种解决方案更好，取决于那个选择。我认为无法加载后备是一个致命错误。

1.  如果第一个文件确实存在，则加载它，否则加载第二个。如果第一个文件存在，但无法加载，则显示错误。
2.  如果第一个文件无法加载，则回退到第二个。

如果您想要 1) 的语义，您的第一个代码就可以了。

如果你想要 2) 的语义，那么两者都不好。第一个代码没有这些语义，因为：

1.  它有一个竞争条件。如果图像在检查文件存在和加载之间被删除，它将失败。
2.  如果文件存在，但无法加载，则会抛出异常。如果文件不是有效图像或无法打开，则可能会发生这种情况。

第二个对常见情况使用异常，这很糟糕。

因此，为了实现第二个语义，我将使用：

```
procedure LoadImage(img: TImage; filename: string);
var success:boolean;
begin
  success := false;
  if FileExists(filename)
    then try
      img.Picture.LoadFromFile(filename);
      success := true;
    except
    end
  if not success
    then img.Picture.LoadFromFile('default.jpg');
end; 
```

在打开之前检查是否存在使错误情况更快，但成功情况更慢。所以哪个更快取决于您的使用情况。

就我个人而言，我会使用第三个变体而不是第二个，即使图像只是偶尔丢失，因为我相信正常运行的应用程序不应该抛出异常。如果基准测试显示它很明显，我只会关心性能问题。

您还应该考虑更有针对性的例外条款。捕捉所有异常的毯子是不好的风格。不幸的是，我找不到一个明确的规范，哪些异常是由 引发的`TPicture.LoadFromFile`，所以我现在将留在一揽子条款中。

# gwt - 如何使用 maven 编译单个 gwt 模块？

> ID：11901633
> 
> 赞同：1
> 
> 时间：2012-08-10T12:23:54.000
> 
> 标签：gwt

我的应用程序中有不同的 module.gwt.xml 文件，每次我对一个模块进行更改时都需要再次编译所有模块。有没有办法使用 maven 编译单个模块。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T12:31:23.183

您可以设置模块以在 pom.xml 中编译

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>gwt-maven-plugin</artifactId>
    <version>${gwt.version}</version>
    <configuration>
    <!-- mode>headless</mode -->
    <modules>
        <module>module1</module>
        <module>module2</module>
    </modules>
    <!-- <includes>**/*GwtTest.java</includes> -->
    </configuration>
</plugin> 
```

# php - 对数组使用字符串索引是否会减慢速度（或者：为什么我有时会随机丢失值）

> ID：11901634
> 
> 赞同：0
> 
> 时间：2012-08-10T12:23:56.840
> 
> 标签：php

我匆忙为我们的应用程序实现了一个拙劣的翻译系统，目前我将不同的单词和表达式存储为 $_SESSION['translate']['string_key']。我不知道这样做有多么错误，但现在我必须按照老板告诉我的去做，所以它可能会一直这样下去。

此外，'string_key' 可能会变得很长，因为它通常是要翻译成默认语言的单词/表达式 + 一个可选标志（用于在默认语言中听起来相同但在其他语言中具有不同翻译的事物）例如（add-form_submit vs add-imperative）。

现在谈谈这个问题。在某些情况下，我遇到了缺少文本的问题（不多，通常每个会话一个项目）。它似乎是随机的，但有些单词比其他单词丢失的频率更高，我想知道这是否与其中一些单词使用的长字符串索引有关，或者会话中的内容太多。

我不是在寻找解决我的问题的方法，只是想知道索引的大小和/或会话的大小是否会对我们的应用程序产生所描述的影响。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T12:27:24.297

会话数据存储在文件中，用于存储小的重要信息，例如存储在本地磁盘上的数据的 ID。您应该避免像这样滥用 $_SESSION 全局变量。

# javascript - extjs 4.1 treestore 延迟加载：q 是，它分支吗？

> ID：11901637
> 
> 赞同：2
> 
> 时间：2012-08-10T12:24:12.107
> 
> 标签：javascript, extjs, extjs4.1

我想在具有 extjs4.1 的 MVC 应用程序中实现树分支的延迟加载，其中分支位于不同的 url 上。我已经走了很多路，撞到了很多墙，现在它没有分支。

这是我失败的地方：

```
Ext.define('OI.view.tree.Tree' ,{
    extend: 'Ext.tree.Panel',
    alias : 'widget.treepanel',
    store: 'TreeStore',
    collapsible: true,
    rootVisible: false,

    viewConfig: {
        plugins: [{
            ptype: 'treeviewdragdrop'
        }]
    },
    height: 350,
    width: 400,
    title: 'Directory Listing',

    initComponent: function() {
        this.store = Ext.data.StoreManager.lookup(this.store);
        this.store.getProxy().url = 'data/level1.json'; // <-- init loading
        this.store.load();
        this.callParent(arguments);
    },

    listeners: {
        itemclick: function(view, record) {

            console.info('ID: '+record.get('id'));
            console.info('TEXT: '+record.get('text'));
            console.info('PrimType: '+record.get('primaryType'));
            console.info(record.fields.getCount());
            console.info('JCRPATH: '+record.get('jcrPath'));

            var newBranchStore = Ext.create('Ext.data.TreeStore', {
                model: 'OI.model.Branch',
                autoLoad: true,
                proxy: {
                    type: 'ajax',
                    reader: {
                        url: 'data/'+ record.get('jcrPath') +'/level1.json', //<-- load json at the level of the url path returned by the model
                        type: 'json'
                    }
                },  
                folderSort: false
            });

            newBranchStore.load({url: 'data/'+ record.get('jcrPath') +'/level1.json',
                callback: function(){
                    console.log('loaded');
                    var mynode = newBranchStore.getNodeById('content_mytest');
                    console.info(mynode.get('id'));
                    this.store.getNodeById(record.get('id')).appendChild(mynode).expand(); // <-- this does not work
                },
                scope: this
            });
        }
    }
}); 
```

第一级加载正确，但是当我触发节点上的点击时，我得到了从服务器返回的正确 json，在这种情况下是用于调试的静态 json 文件，我尝试静态获取节点并将其附加到被点击的那个。但它永远不会被注入。

我最终想要实现的是，我可以将 json 文件返回的所有子节点附加到已单击的节点上。

此外，我对树库有点困惑......当我说每棵树只能有一个树库时，我是否正确，对吧？所以我需要将新节点附加到原始树存储......我有点困惑，可能需要我能得到的所有指针。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T20:58:18.403

您过于复杂了，请改用这种方法（基本上只是在加载到正确的 url 之前换掉商店的 url）：

```
Ext.define('OI.view.tree.Tree' ,{
    extend: 'Ext.tree.Panel',
    alias : 'widget.treepanel',
    store: 'TreeStore',
    collapsible: true,
    rootVisible: false,

    viewConfig: {
        plugins: [{
            ptype: 'treeviewdragdrop'
        }]
    },
    height: 350,
    width: 400,
    title: 'Directory Listing',

    initComponent: function() {
        this.store = Ext.data.StoreManager.lookup(this.store);
        this.store.getProxy().url = 'data/level1.json'; // <-- init loading
        this.store.load();
        this.callParent(arguments);
    },

    listeners: {

        beforeload: function(store, operation) {
            store.getProxy().url = 'data/'+ operation.node.get('jcrPath') +'/level1.json';
        }
    }
}); 
```

# dependency-injection - DependencyResolver：传递参数

> ID：11901642
> 
> 赞同：0
> 
> 时间：2012-08-10T12:24:29.127
> 
> 标签：dependency-injection, asp.net-web-api, autofac

我使用 autofac 并且可以将参数传递给我的 resolve 方法。

如何使用微软的 DependencyResolver 接口来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T13:12:27.297

IDependencyResolver不支持[直接](http://msdn.microsoft.com/en-us/library/system.web.mvc.idependencyresolver%28v=vs.98%29.aspx)传递参数，我相信您已经注意到了。但是，由于您拥有 Autofac，因此您可以解析工厂委托，使您能够将参数传递给底层服务：

```
var factory = dependencyResolver.GetService<Func<int, string, IService>>();
var service = factory(5, "42"); 
```

注意：您可以使用`Func`委托或明确定义的工厂委托。更多关于这个[here](http://code.google.com/p/autofac/wiki/DelegateFactories)。

关于生命周期范围：必须从可以“到达”所请求服务的范围中解析工厂委托。考虑这个模拟 MVC 或 WebApi 的设置：

```
var cb = new ContainerBuilder();
cb.RegisterType<X>().InstancePerMatchingLifetimeScope("http");
var application = cb.Build();
var request = application.BeginLifetimeScope("http"); 
```

使用此设置，我们的`X`服务将仅在 http 范围内可用。尝试`X`从`application`范围解析将失败，并显示以下消息：

> 从请求实例的范围中看不到带有与“http”匹配的标记的范围。

从`request`范围解析将按预期工作：

```
var f = request.Resolve<Func<IX>>();
var x = f(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T13:24:25.387

一般的建议是解决工厂。您可以为需要解析的类型定义自定义工厂接口（这是我的偏好），或者解析委托（这是 Peter Lillevold 的建议）。无论哪种方式，您都不应该直接调用容器（或`DependencyResolver`就此而言），因为这是[次优](http://blog.ploeh.dk/2010/02/03/ServiceLocatorIsAnAntiPattern.aspx)的。

# asp.net-mvc-3 - Request.IsAuthenticated 在 IE 重复部分视图 MVC3 中不起作用

> ID：11901644
> 
> 赞同：0
> 
> 时间：2012-08-10T12:24:36.397
> 
> 标签：asp.net-mvc-3

我对 MVC3 应用程序有奇怪的问题。该应用程序在 Firefox 和 Chrome 上按预期运行，但在 IE 上不运行。

我有一个在页面上循环重复的部分视图。在局部视图的底部，我正在检查 Request.IsAuthenticated。如果经过身份验证，应该显示一个 ajax 表单。这适用于除 IE 之外的所有浏览器。在 IE 中，如果呈现的局部视图有多个实例，则表单不会出现（即使用户已登录）。

我在下面附上了部分视图代码。表格就在底部。

有没有其他人有类似的问题？任何帮助或想法都会很棒。谢谢

```
@using HERE_MVC.Extenstions
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.js")" type="text/javascript"></script>
@model HERE_MVC.Models.TilesModel
@{
    Layout = String.Empty; 
}
@foreach (var t in Model.NearestTiles)
{     
    <div id="div_tile @t.TileId" style="float: left; height: 235px; width: 300px; border: 0px solid black; margin: 5px;
        background-color: #DDDDDD;">
        <div id="tile @t.TileId" style="background-image: url(@Url.Action("GetTileBgImageWithCache", "Account", new { userName = @t.aspnet_Users.UserName })); background-repeat:no-repeat; height: 200px; width: 300px; border: 0px solid black;">
            @t.aspnet_Users.UserName
            <br />
            @t.Title
            <br />
            @t.Quote1
            <br />
            @t.UpdatedDateTime
        </div>
        <div id="collectbtn @t.TileId" style="padding-top: 5px;">
            @Html.ActionImage("Profile", "Home", new { userName = @t.aspnet_Users.UserName }, "~/content/img/Profile-Icon.jpg", "View Profile", "25")
            @if (Request.IsAuthenticated)
            {
                if (@User.Identity.Name == @t.aspnet_Users.UserName)
                {
                }
                else if (!Model.CheckAlreadyFollowing(@User.Identity.Name, @t.aspnet_Users.UserName))
                {         
                @Ajax.ActionImageLink("../content/img/add.jpg", "Collect Tile", "25", "imgOn1" + @t.aspnet_Users.UserName, "AddFollowedUser", "Home", new { userToFollowName = @t.aspnet_Users.UserName }, new AjaxOptions { HttpMethod = "POST", OnSuccess = "  $(#imgOn1" + @t.aspnet_Users.UserName + ").hide();" })
                }
                else
                {  
                @Ajax.ActionImageLink("../content/img/minus.jpg", "Drop Tile", "25", "imgOff2" + @t.aspnet_Users.UserName, "UnFollow", "Home", new { userToUnFollowName = @t.aspnet_Users.UserName }, new AjaxOptions { HttpMethod = "POST" })
                }
            }
            <a href="http://www.facebook.com/sharer.php?u=@t.ShareLink&t=%22+encodeURIComponent(document.title)" onclick="PopupCenter('http://www.facebook.com/sharer.php?u=@t.ShareLink&t=%22+encodeURIComponent(document.title)', 'NearRoar - Facebook',680,400); return false;" class="pin-it-button" count-layout="none">
                <img src="../../Content/img/Facebook-share.jpg" width="25px" alt="Facebook share" /></a>
            <a href="http://pinterest.com/pin/create/button/?url=@t.ShareLink&media=@t.PintrestShareImage&description=@t.PinterestShareText" onclick="PopupCenter('http://pinterest.com/pin/create/button/?url=@t.ShareLink&media=@t.PintrestShareImage&description=@t.PinterestShareText', 'NearRoar - Pin It',600,400); return false;" class="pin-it-button" count-layout="none" target="_blank">
                <img border="0" src="../../Content/img/pintrest.jpg" title="Pin It" width="25px" /></a>
            <a href="https://twitter.com/share" class="twitter-share-button" data-hashtags="@t.TwitterHashTag,NearRoar" data-url="@t.ShareLink" data-count="none" data-lang="en">
            </a>
            <script type="text/javascript" src="//platform.twitter.com/widgets.js"></script>
        </div>
        <div class="msg_list">
            <p class="msg_head @t.TileId">
                Comments (<span id='commentCount '@t.TileId>@t.CommentLines.Count</span>)</p>
            <div class="msg_body">
                @foreach (var c in t.CommentLines)
                {
                    <div class="clearfix">
                        <div class="msg_body_comment_item_image">
                            <img width="50" src="@Url.Action("GetImageWithCache", "Home", new { userName = @c.aspnet_Users.UserName })"/>
                        </div>
                        <div class="msg_body_comment_item_text">
                            @c.CommentLine1
                            <br />
                            @c.CommentTime
                        </div>
                    </div>
                }
                <div id="newComment @t.TileId">
                </div>
                <div id="formdiv @t.TileId">
                    @if (Request.IsAuthenticated)
                    {
                        <div>
                        @using (Ajax.BeginForm("Comment" + @t.TileId, "Home", new { tileId = @t.TileId }, new AjaxOptions { }, new { id = "form" + @t.TileId, name = "form" + @t.TileId }))
                        {
                        <fieldset>
                            @Html.TextBox("commentText " + @t.TileId, null, new { @class = "msg_body_comment_text_input", maxlength = 200 })
                            <input type="hidden" name="date" id="cmTimeHidden @t.TileId"  value="" />
                            <input type="hidden" name="commentText" id="commentTextHidden @t.TileId"  value="" />
                            <input type="submit" value="Post Comment" onClick="setHiddens(@t.TileId);setNewComment(@t.TileId);"/>
                        </fieldset>
                        }
                        </div>
                    }
                </div>
            </div>
        </div>
    </div>  
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T12:28:21.390

我会仔细检查呈现的标记是否有效。您的一个 ID 可能重复，而 IE 只是将其踢走。

更新：您有 4 个 ID 为 t.titleId 的元素。正如我上面所说，您在 HTML 页面上只能有一个特定的 ID。把它移到课堂上，一切都应该没问题。

# android - Android - 将 mp3 文件从 Android 设备流式传输到 Windows PC

> ID：11901648
> 
> 赞同：0
> 
> 时间：2012-08-10T12:24:58.987
> 
> 标签：android, stream, audio-streaming

我正在尝试编写一个应用程序，该应用程序可以通过本地 Wifi 网络将音乐文件从 android 设备流式传输到 windows PC。下面是我的问题。

我能够使用套接字通过 TCP 将 android 设备连接到 PC（我有一个编写的使用套接字进行连接的小型 c# 应用程序），并使用本地 wifi 网络在它们之间传输一些小消息。但是为了流式传输 mp3 文件从 Android 设备到 PC，我应该使用哪种协议，为什么？

编辑：我打算使用 C#.net 的 VLC 库来开发 windows 的音乐播放器。所以这个应用程序将从 Android 流式传输媒体。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T12:32:08.543

使用 RTSP。并查看以下内容：

[https://netty.io/](https://netty.io/)

[http://www.live555.com/](http://www.live555.com/)

# c# - Changing a part of text line in a file on mouse doubleclick by comparing it with a value

> ID：11901650
> 
> 赞同：0
> 
> 时间：2012-08-10T12:25:07.620
> 
> 标签：c#, file, listview, replace

I have a file-**message.txt** that contains raw data, my application reads the file, parses it and displays the data accordingly in the listview. The raw data contains a word called `REC UNREAD` meaning the record is unread. So for the first time when message is read it is `UNREAD` and I display such messages in `bold`. After I read it(*Using doubleclick event*) the word `REC UNREAD` should be changed to `REC READ`. This is what I have I tried, not working though

```
 private void lvwMessages_MouseDoubleClick_1(object sender, MouseEventArgs e)
    {
        try
        {
            ListViewItem item = lvwMessages.SelectedItems[0];
            if(item.Font.Bold)

                {
                    lvwMessages.SelectedItems[0].Font = new Font(lvwMessages.Font, FontStyle.Regular);
                    string tfile = File.ReadAllText("C:\\message.txt");
                    string m1 = lvwMessages.SelectedItems[0].SubItems[1].Text;
                    string m2 = lvwMessages.SelectedItems[0].SubItems[2].Text;
                    //No idea how to go forward from here 
```

This is a sample line in my text file:

```
+CMGL: 2,"REC UNREAD","+919030665834","","2012/08/10 17:04:15+22"
sample message 
```

In simple words I should be able to search for the line containing m1 and m2(as in the code) and replace the REC UNREAD with REC READ.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T05:19:51.190

This should solve your problem--

```
 ListViewItem item = lvwMessages.SelectedItems[0];
            if(item.Font.Bold)
                {
                    lvwMessages.SelectedItems[0].Font = new Font(lvwMessages.Font, FontStyle.Regular);
                    string tfile = File.ReadAllText("C:\\message.txt");
                    string m1 = lvwMessages.SelectedItems[0].SubItems[1].Text;
                    string m2 = lvwMessages.SelectedItems[0].SubItems[2].Text;
                    string line = string.Empty;
                    string nfile= "";
                    using (StreamReader sr = new StreamReader("C:\\message.txt"))
                    {
                      while ((line = sr.ReadLine()) != null)
                      {
                          if (line.Contains(m2)) 
                          {
                              string pline = line;
                             string result = line.Replace("REC UNREAD", "REC READ");
                             nfile= tfile.Replace(pline, result);
                          }
                       }
                   sr.Close();
                   }
                StreamWriter sw = new StreamWriter("C:\\message.txt");
                {
                    sw.Write(nfile);
                }
                sw.Close();                           
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T12:32:17.297

you can try with this code based on IndexOf and Replace

```
string line = string.Empty;

using (StreamReader sr = new StreamReader("C:\\message.txt"))
{
  while ((line = sr.ReadLine()) != null)
  {
      if (line.IndexOf(m1) > 0 &&
      line.IndexOf(m2)  )
      {
         var result = line.Replace(m2, "READ");
      }
   }
} 
```

# visual-studio-2010 - WiX 源可以引用解决方案中其他项目的 NuGet 包吗？

> ID：11901652
> 
> 赞同：4
> 
> 时间：2012-08-10T12:25:16.397
> 
> 标签：visual-studio-2010, wix, nuget, wix3.6

我有两个项目的解决方案：

*   .NET 应用程序
*   WiX 设置项目。

我知道，可以在 WiX 源 ( `$(var.WindowsFormsApplication1.TargetFileName)`) 中引用项目输出。

现在，我已将 NuGet 包引用添加到我的 .NET 应用程序。因此，我想将 NuGet 包内容引入我的设置。

有什么办法可以代替手动添加文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T14:24:10.490

我不相信有任何联系。我知道 nuget 是什么，但我没有太多使用它，因为它更多地是将您的 .NET 依赖项纳入范围，然后是软件分发。根据 nuget 放置文件的方式，您可能可以执行 $(var.SomeProject.TargetDir)nuget_fetched.dll 之类的操作。

这是假设 SomeProject 使用 nuget 的方式是引用在本地复制并在项目的 Outdir 中可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T10:25:53.820

我编写了一个 Resharper 实时模板来减少添加文件所涉及的大量输入，但基本上我只是手动添加了文件。为每个 nuget 包创建一个 Wix 组件可以保持整洁。

# sql - 如何使用“WITH AS”子句将结果插入表

> ID：11901665
> 
> 赞同：0
> 
> 时间：2012-08-10T12:26:02.377
> 
> 标签：sql, sql-server, sql-server-2008-r2

我的代码中有`WITH AS`子句

```
DECLARE @MyTable TABLE(Field_1 INT, Field_2 INT)
INSERT @MyTable VALUES
(1,2),
(2,2)

WITH x AS ( SELECT Field_1, Field_2  FROM @MyTable)
SELECT * FROM x 
```

如何将上述代码的结果插入到同一张表中？我想插入如下：

```
DECLARE @MyTable TABLE(Field_1 INT, Field_2 INT)
INSERT @MyTable VALUES
(1,2),
(2,2)
WITH x AS ( SELECT Field_1, Field_2  FROM @MyTable)

INSERT INTO @MyTAble (SELECT * FROM x)
SELECT * FROM @MyTable 
```

但它不起作用。Management Studio mark `@MyTAbl`e like`Invalid object name @MyTable` 我该怎么做？我正在使用 SQL Server 2008 R2。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T12:30:00.757

也许你的意思是这个（分号和其他小语法很重要！），

```
DECLARE @MyTable TABLE(Field_1 INT, Field_2 INT);
------------------------------------------------^

INSERT @MyTable VALUES
(1,2),
(2,2);
-----^    

WITH x AS ( SELECT Field_1, Field_2  FROM @MyTable)
------------------------------------------^
INSERT INTO @MyTAble  SELECT * FROM x ;
---------------------^---------------^^

SELECT * FROM @MyTable;
--------------^-------^ 
```

...但我认为这在 MySQL 中不起作用。

# c# - c#如何改变托盘图标

> ID：11901673
> 
> 赞同：3
> 
> 时间：2012-08-10T12:26:37.457
> 
> 标签：c#, embedded-resource, trayicon

我还在学习 C#，但我被困住了。我的问题是我有一个托盘图标，当发生某些事情时必须更改它。

我已将新图标作为现有项目添加到项目中，并尝试使用以下代码对其进行更改：

```
this.notifyIcon1.Icon = new Icon(GetType(), "newmailIcon.ico"); 
```

但我收到以下错误：

```
Resource 'newmailIcon.ico' cannot be found in class 'Traym_Icon.Form1'. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T12:28:46.320

您必须在项目中手动添加您`newmailIcon.ico`的资源文件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-10T12:28:50.683

右键单击您的图像，单击属性，然后在构建操作中，选择嵌入。

或创建一个 .resx，您将在其中保留您的图标。

# c# - ASP.NET 向导控件保存状态

> ID：11901679
> 
> 赞同：0
> 
> 时间：2012-08-10T12:26:56.443
> 
> 标签：c#, asp.net, state, wizard

我使用向导控件并希望保存状态。

我的问题是最后一个状态消失了，例如，如果用户转到另一个页面并单击浏览器的后退按钮。

当然，我可以保存用户在会话中完成的所有设置，但我想问是否有更简单的方法来保存状态？

# java - 在没有安装 JDK 并且进程作为服务运行的情况下，如何在 Windows 上从 Java 5 获取 JVM 堆转储

> ID：11901681
> 
> 赞同：0
> 
> 时间：2012-08-10T12:26:57.643
> 
> 标签：java

这对我来说很难：

1.  窗户，所以没有信号。
2.  不在控制台中，所以没有那种信号。
3.  作为一项服务，因此可能不在用户会话中运行。
4.  爪哇 5
5.  没有 JDK，所以机器上没有 jmap、jconsole 等。
6.  应用程序未运行 JMX。
7.  没有安装或重新配置的选项。
8.  可以插USB。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T12:31:00.263

AFAIK 即使您可以完全访问机器，也无法使用 Java 5.0 触发堆转储。（诚​​然，我已经超过五年没有使用 Java 5.0）使用 Java 6，您需要 JMX 或在内存不足错误时触发堆转储。

如果您可以找到支持 Java 5.0 的内存分析器，一些内存分析器可能允许您进行堆转储（它们自己的格式），但您必须从一开始就启用分析器，并且在 Java 5.0 上从内存中往往相对较慢。

# php - 用php计算xml中的项目数

> ID：11901683
> 
> 赞同：1
> 
> 时间：2012-08-10T12:27:08.943
> 
> 标签：php, xml, parsing, dom, count

我必须解析如下所示的 xml 文件：http: [//goo.gl/QQirq](http://goo.gl/QQirq)

我如何计算这个 xml 中的项目/记录的数量 - 'item' 我的意思是 'productItem' 元素，即示例 xml 中有 5 个项目。我在解析 xml 时没有指定标签名称“productItem”，所以我无法计算“productItem”的出现次数。这是我的代码：

```
 <?php
$doc = new DOMDocument();
$doc->load("test.xml");
$xpath = new DOMXpath( $doc );
$nodes = $xpath->query( '//*| //@*' );
$nodeNames = array();
foreach( $nodes as $node )
{
    $nodeNames = $node->nodeName;
    $name=$node->nodeName;
    $value=$node->nodeValue;
    echo ''.$name.':'.$value.'<br>';
    }

?> 
```

我怎样才能计算项目的数量并一个一个地显示它们，理想情况下是这样的：http: [//goo.gl/O1FI8](http://goo.gl/O1FI8)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T12:43:32.863

为什么不使用 DOMDocument::getElementsByTagName？

```
//get the number of product items
echo $doc->getElementsByTagName('productitem')->length;
 //traverse the collection of productitem
foreach($doc->getElementsByTagName('productitem') as $element){
  //$element is a DOMElement
  $nodeNames = $element->nodeName;
  $name=$element->nodeName;
  $value=$element->nodeValue;
  echo ''.$name.':'.$value.'<br>';
} 
```

当你想遍历你的文档时，使用 XPath 只是贪心而已。此外，即使您只需要一个或两个，您也会实例化文档的每个节点。

您可以使用 hasChildNodes 方法和 childNodes 属性来遍历您的文档

```
function searchInNode(DOMNode $node){

     if(isGoodNode($node)){//if your node is good according to your database
         mapTheNode($node);
     }
     if($node->hasChildNodes()){
         foreach($node->childNodes as $nodes){
             searchInNode($nodes);
         }
     }
}
searchInNode($domdocument); 
```

# java - SOA 客户端握手错误

> ID：11901684
> 
> 赞同：0
> 
> 时间：2012-08-10T12:27:13.757
> 
> 标签：java, ssl, soa

我正在尝试编写我的第一个 SOA 客户端，但在使用“2-way SSL”部分时遇到了困难。

我们的服务器在 Weblogic 下运行，但我的应用程序是一个简单的 Java 控制台应用程序——它不在任何容器中运行。

服务器使用并需要证书。我们使用来自 Godaddy.com 的可信证书，我们也有内部证书。

我们的 sysadm 给了我服务器证书，我使用 keytool 将其添加到我的 JRE“cacerts”文件中。有人告诉我应该使用 Spring-WS，因为它会让我的生活更轻松，但是我很难让它工作，因为 Chap. 7 次提及，我不确定我应该使用哪一个。他还为我个人创建了一个 .jks 文件，用于我的授权。

对于这个简单的应用程序，我宁愿完全不使用 Spring（SOA 方法是一种简单的“添加注释”方法，没有实质性的返回数据。

我正在使用 MyEclipse 9.1，并且也在尝试使用 Maven4MyEclipse。

我的问题是：

鉴于我的身份验证证书将通过 JRE cacerts 文件提供（如果我理解正确的话），我需要做的主要事情是能够在 SSL 握手期间展示我的 .jks 文件。

我可以在没有 Spring 的情况下做到这一点吗？如果是这样，有没有办法可以简单地使用我的 .jks 文件设置系统属性，以便自动处理它？还是我真的需要使用 Spring 来处理授权部分？

如果是后者，我怎么知道要使用*哪种*Spring 安全拦截器类型？XwsSecurityInterceptor 还是 Wss4jSecurityInterceptor？

或者我刚刚想到另一个问题。.jks 文件是否也可以添加到 cacerts 文件中并自动处理授权？

谢谢，

米奇

ps 信不信由你，我的组织中显然没有现有的 Java 客户端示例可以简单地查看模板。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T19:44:04.510

对于双向身份验证，我在启动客户端应用程序时一直使用以下内容：

```
java -Djavax.net.ssl.keyStore=myClientKeystore -Djavax.net.ssl.keyStorePassword=123456 -Djavax.net.ssl.trustStore=myTrustStore -Djavax.net.ssl.trustStorePassword=123456 -Djavax.net.debug=ssl 
```

也就是说，我的客户端私有证书在“myClientKeystore”中，然后服务器公共证书在“myTrustStore”中。javax.net.debug=ssl 将使您的生活更轻松，因为如果您无法使 SSL 会话正常工作，它会输出一些不错的调试信息。

这是 SSL 部分。然后我认为您将 SOA 与 Web 服务和 SOAP 混为一谈。SOA通常是指面向服务的架构，层次非常高。我认为您在谈论 SOAP 实现。

如果 Web 服务不仅仅是微不足道的，是的，一个框架将使您的生活更轻松。除了 Spring-ws（我也喜欢）之外，您可以在 google 上搜索 CXF 和 Axis2，您会发现大量如何编写 SOAP 客户端的示例。但可以肯定的是，如果您能够手动创建 SOAP 信封（使用 SoapUI 生成测试信封是一个好的开始......），您可以编写相当原始的 Web 服务调用。

然后，看一下：[this page](http://cafeconleche.org/books/xmljava/chapters/ch03s05.html)，它有一个示例，说明如何在没有任何框架的情况下通过 HTTP 进行 SOAP 调用。当然，由于您使用的是 SSL，因此您应该引用“https://”地址。

# excel - Excel 条件格式 - 如果复制此单元格

> ID：11901685
> 
> 赞同：1
> 
> 时间：2012-08-10T12:27:21.377
> 
> 标签：excel, conditional-formatting

我需要根据其他单元格进行一些条件格式设置。

基本上我需要它来做：

如果单元格包含是，则使用单元格 A1 的格式 如果单元格包含否，则使用单元格 B2 的格式

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T08:26:44.940

我设法通过添加参考单元格来做到这一点

```
=IF(SearchMultipleTbl($B21,E$20,Overview!$C$2:$XY$82)="Yes",VLOOKUP(E$20,Overview!$C$3:$E$961,3,FALSE)="On Hold",FALSE) 
```

SearchMultipleTbl 寻找答案，如果是，它使用参考单元格的 Vlookup

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-10T14:23:09.213

我不确切知道您在寻找什么，但这应该会有所帮助。

```
=IF(A2="yes","true","false") 
```

如果 A2 是，则使用第一个条件，否则使用第二个条件。

希望这可以帮助。

# vba - Excel - 根据值锁定单元格范围

> ID：11901686
> 
> 赞同：4
> 
> 时间：2012-08-10T12:27:22.970
> 
> 标签：vba, excel

是否可以根据数据行中下拉列表的输入锁定特定范围的单元格？

例如，我的电子表格的每一行代表一个病人，第一个单元格提出一个问题，需要回答“是”或“否”（通过下拉菜单选择/输入）。

**编辑**

**实际上，“是/否”单元格是两个单元格（G13 和 H13）的合并。我已经更新了我的示例以反映这一点。**

**编辑结束**

如果用户选择“否”，那么我希望锁定问题范围的其余部分（G13-H13:AB13），因为这里不需要输入数据。然而，如果用户选择“是”，那么剩余的单元格将保持可用于输入数据。

每个范围内的所有单元格都仅通过下拉菜单输入数据。

这是我希望实现的目标：

```
If "No"
    Then lock range G13-H13:AB13
Else If "Yes"
    Then do nothing

i.e.

 G13-H13  I13-J13  K13-L13   ....     ....     AB13
|  NO   |  ----  |  ----  |  ----  |  ----  |  ----  |  (Locked Cells)

OR

 G13-H13  I13-J13  K13-L13   ....     ....     AB13
|  YES  |        |        |        |        |        |  (Unlocked Cells) 
```

再次强调，所有数据都是通过下拉菜单输入的，无需手动输入；我希望这样，如果`G13-H13 = "No"`，则范围内具有下拉列表的其余单元格将被阻止或锁定，无法从它们各自的下拉列表中选择更多信息。

请注意，G13-H13 中的值可以是“是”或“否”。

这可以使用 VBA 实现吗？如果可以，如何实现？

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T13:16:05.507

编辑：您可以在没有 VBA 的情况下执行此操作。我基于这里的另一个答案：[https ://stackoverflow.com/a/11954076/138938](https://stackoverflow.com/a/11954076/138938)

G 列有“是”或“否”下拉菜单。

在单元格 H13 中，像这样设置数据验证：

1.  数据 --> 数据验证
2.  在**允许**下拉列表中选择**列表。**
***   **在源**字段中输入此公式：`=IF($G13="Yes", MyList, FALSE)`*   复制单元格 H13 并将验证（粘贴 --> pastespecial --> 验证）粘贴到单元格 I13:AB13。*   在公式中替换`MyList`为您希望允许用户为每列选择的列表。请注意，您需要将患者答案设置为“是”才能设置验证。设置完成后，您可以将其删除或设置为否。*   为第 13 行设置验证后，将验证复制并粘贴到所有需要它的行。**

 *** * *

如果您想使用 VBA，请使用以下内容，并使用 worksheet_change 事件或其他一些机制来触发 LockOrUnlockPatientCells。我不喜欢使用 worksheet_change，但在这种情况下可能有意义。

为了锁定单元格，您需要锁定它们，然后保护工作表。下面的代码就是这样做的。您需要将其传递给正在处理的患者的行。

```
Sub LockOrUnlockPatientCells(PatientRow As Long)
    Dim ws As Worksheet
    Dim YesOrNo As String

    Set ws = ActiveSheet
    YesOrNo = ws.Range("g" & PatientRow).Value

    ' unprotect the sheet so that we can modify locked settings
    ws.Unprotect
    ws.Range("a:g").Cells.Locked = False

    ' lock row
    Range("h" & PatientRow & ":AB" & PatientRow).Cells.Locked = True

    ' unlock the row depending on answer
    If YesOrNo = "Yes" Then
        Range("h" & PatientRow & ":AB" & PatientRow).Cells.Locked = False
    End If

    ' protect the sheet again to activate the locked cells
    ws.Protect

End Sub 
```

您可以使用以下方法测试功能，手动调整患者行的值。一旦你让它以你​​想要的方式工作，从用户的输入中获取行。

```
Sub testLockedCells()
    Dim AnswerRow As Long

    AnswerRow = 9

    LockOrUnlockPatientCells AnswerRow
End Sub 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T13:48:43.957

此代码应该可以帮助您入门。您可能需要对其进行调整以满足您的特定需求，但我的逻辑基于您原始帖子中的详细信息。

将模块放置在 VBE 中的相应工作表对象中。

```
Private Sub Worksheet_Change(ByVal Target As Range)

'assumes cell changed in column G and first row of data entry is 13
If Target.Column = 7 And Target.Row > 12 Then 'change to If Intersect(Target, Range("G13")) Then if all you care about is G13

    Application.EnableEvents = False 'stop events from processing

    Dim blnLock As Boolean
    Dim r As Integer

    Select Case Target.Value
        Case Is = "No"
            blnLock = True
            r = 191
        Case Is = "Yes"
            blnLock = False
            r = 255
    End Select

    Unprotect Password:="myPassword"

    With Range("H" & Target.Row & ":AB" & Target.Row)

        'just a suggestion, fill the cells grey before locking them, or turn them back to no fill if it's unlocked
        .Interior.Color = RGB(r, r, r)
        .Locked = blnLock

    End With

    .Protect Password:="myPassword"

    Application.EnableEvents = True

End If

End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T13:03:21.107

试试这个 ： -

应用循环然后检查

如果不”

ws.get_Range(StartCell, EndCell).Locked = true;

// ws 是工作表对象唯一需要注意的是，如果工作表被锁定，则需要将其解锁然后继续

否则，如果“是”

继续;**

# iphone - 在 iPhone 中允许受信任的 SSL 证书

> ID：11901692
> 
> 赞同：2
> 
> 时间：2012-08-10T12:27:58.693
> 
> 标签：iphone, https, nsurlconnection, ssl-certificate

我知道如何使用`NSURLConnection`异步请求实现“https”。它可以使用几个委托方法来实现。现在我的问题是，我的整个应用程序都使用同步请求工作，此时无法将其更改为异步。谁能告诉我如何为同步请求实现 SSL 验证 `NSURLConnection`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T02:33:41.310

I have never found a way to. NSURLConnection sync request are extremely limited in functionality. I wrote a wrapper around NSURLConnection I call GPHTTPRequest. Should allow you do to sync request with the ability to allow self-signed and works a lot like ASIHTTPRequest, but is based on NSURLConnection instead of being the lower level CFNetwork framework. link is here:

[https://github.com/daltoniam/GPHTTPRequest](https://github.com/daltoniam/GPHTTPRequest)

also quick code example:

```
GPHTTPRequest* request = [GPHTTPRequest requestWithString:@"https://selfsignedURLYouwanttoaccess"];
request.allowSelfSigned = YES;
[request startSync];
NSLog(@"response: %@",[request responseString]); 
```

also for the sake of options you can check out:

[http://allseeing-i.com/ASIHTTPRequest/](http://allseeing-i.com/ASIHTTPRequest/)

[https://github.com/afnetworking/afnetworking](https://github.com/afnetworking/afnetworking)

but I would recommend GPHTTPRequest just because I wrote it and know how it works. ;) Any questions let me know.

# javafx-2 - JFXPanel 调整大小

> ID：11901696
> 
> 赞同：1
> 
> 时间：2012-08-10T12:28:08.790
> 
> 标签：javafx-2

我目前正在测试将一些 JavaFX2 组件集成到一个摇摆应用程序中。

我有一个 JFXPanel，其中包含一个包含按钮列表的 HBox 窗格。我想要实现的是隐藏和显示一些按钮并调整 HBox 和 JFXPanel 的大小。我面临的问题：

1.  当隐藏一些按钮时，HBox 不会自行调整大小。
2.  我可以修改 HBox 大小（使用调整大小方法），但我必须指定底层 JFXPanel 不调整大小的尺寸（不自动调整大小）。autosize 方法似乎也无法实现这一点。

那么，我该如何调整它的大小？我正在使用 FXML 和控制器，所以我看不到调整 JFXPanel 大小的简单方法，但我想看看如何手动设置它，但如何自动完成？

顺便说一句，我没有在 swing 中使用绝对定位（没有布局管理器）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T15:14:25.823

尝试从 HBox 中删除按钮，而不仅仅是隐藏它。

我对 ToolBar 做了同样的事情，它会在添加或删除按钮时更新它的大小。

# java - 声纳如何成功运行单元测试

> ID：11901697
> 
> 赞同：4
> 
> 时间：2012-08-10T12:28:13.757
> 
> 标签：java, unit-testing, maven, automated-tests, sonarqube

我有一个用 maven 构建的项目，我最近集成了声纳......配置声纳来分析你的项目真的很容易，但我也无法配置它来运行我的项目单元测试。我用 Jacoco 尝试了一些东西，但我得到了一些 Seam 错误，并且所有其他测试都被跳过了。顺便说一句，我正在使用 TestNG 手动运行测试。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T17:38:40.947

您可以使用声纳的相关[分析参数](http://docs.codehaus.org/display/SONAR/Analysis+Parameters#AnalysisParameters-UnitandIntegrationTests)来重用您之前运行的测试报告。您可以根据运行测试的方式或根据运行测试的方式设置`sonar.dynamicAnalysis`属性`reuseReports`并指定报告的位置。`sonar.jacoco.reportPath``sonar.surefire.reportPath`

顺便说一句，`mvn sonar:sonar`调用 maven 的`test`目标，它将单元测试作为分析的一部分运行。因此，理想情况下，如果您的 Maven 可以运行单元测试，那么声纳应该能够运行它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T12:49:15.577

Sonar 不能运行测试，它只能分析测试报告。

您可以自己运行 JUnit（例如使用 Maven 或 Ant）并将报告推送到 Sonar（尝试使用 Sonar 的 Maven[插件](http://mojo.codehaus.org/sonar-maven-plugin/)）

或者您可以给自己一个构建工厂（以[hudson](http://hudson-ci.org/)为例）并将其插入[sonar](http://wiki.hudson-ci.org/display/HUDSON/Sonar+plugin)。

# sql - 有条件的顺序列 - SQL / Access

> ID：11901707
> 
> 赞同：1
> 
> 时间：2012-08-10T12:28:58.407
> 
> 标签：sql, ms-access, count

假设我们有一些看起来像这样的数据

```
R_Id    Nm      Base       Dest    Proj      Cust_id  201203   201202   201201
MRBR    Bob     LONDON     UK      Project1  1        0        0        0
MRBU    Frank   LONDON     London  Project2  2        11.68    0        248.93
MRBU    Frank   LONDON     UK      Project3  1        7.4      4.8      0
MRGB    Barry   GUILDFORD  Hull    Project4  1        50.36    12.85    48.92
MRGB    Barry   GUILDFORD          Project5  1        0        177.31   0
MRGB    Barry   GUILDFORD  INTL    Project6  3        0        331.08   0 
```

假设我们有比上面更多的列，但我们现在仅限于几个。

我希望能够使用 where 语句仅显示行需要进一步调查的行。这是通过说“哪里有两个以上的大数连续相邻？” 所以我需要计算数量很大的行数。

输出应该看起来像这样，我已经解释了我正在做什么过滤。

```
R_Id    Nm      Base       Dest    Proj      Cust_id  201203   201202   201201
MRBR    Bob     LONDON     UK      Project1  1        "Numbers not Large"
MRBU    Frank   LONDON     London  Project2  2        11.68    248.93   0   
MRBU    Frank   LONDON     UK      Project3  1        "Numbers not Large"
MRGB    Barry   GUILDFORD  Hull    Project4  1        50.36    12.85    48.92
MRGB    Barry   GUILDFORD          Project5  1        "Too few adjacent numbers"
MRGB    Barry   GUILDFORD  INTL    Project6  3        "Too few adjacent numbers" 
```

这是我试图过滤的相邻数字太少的情况。我需要计算这些特定列中相邻（或每隔一个！）数字的数量。

我看过这个问题：[Multiple Column Conditional Count SQL](https://stackoverflow.com/q/10603448/1075247)，但我不认为我可以使用 Count(*)，因为我收到此错误：您尝试执行不包含指定表达式“AT_RISK？”的查询 作为聚合函数的一部分。有风险的是仅存储是/否并位于 R_Id 左侧的列（为简洁起见，未包括在上面）

任何人都可以帮助或至少指出我正确的方向吗？我真的很感激。我已经阅读了上面的问题，并且查看了一般如何使用 count ，但这真的难倒我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T14:26:58.933

好吧，我可以想到一个有点丑陋的解决方案来解决这个问题，但它涉及到使用自定义 VBA 函数。

### 连接和测试字符串

您的 SQL 语句应类似于：

```
SELECT * FROM tblName 
WHERE IsSeqHigh([201203] & ";" & [201202] & ";" & ..., 1000); 
```

然后，在 VBA 模块中，我们定义：

```
Public Function IsSeqHigh(seq As String, thres As Double) As Boolean
    IsSeqHigh = False

    Dim valStrs() As String
    valStrs = Split(seq, ";")

    For n = 1 To UBound(valStrs) - 1
        If (valStrs(n) >= thres) And (valStrs(n + 1) >= thres) Then
            IsSeqHigh = True
            Exit For
        End If
    Next n
End Function 
```

### 另一种方法

或者，如果您的架构是固定的并且不太可能更改 - 并且您有一个主键值，您可以编写一个 VBA 函数，该函数采用主键值并扫描列以查找您正在寻找的特定条件。

简而言之，没有我能想到的好的纯 SQL 解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T13:03:06.520

您说“超过 1000 个订单”，这应该从输出中排除 Pjt_Id = 1。如果您实际上想要至少 1000 个订单，请在此查询中更改`>`为。`>=`

```
SELECT
    p.Pjt_Id,
    p.OrderPriceQ1,
    p.OrderPriceQ2,
    p.OrderPriceQ3,
    p.Customer
FROM TblPureferret AS p
WHERE
       (p.OrderPriceQ1 > 1000 AND p.OrderPriceQ2 > 1000)
    OR (p.OrderPriceQ2 > 1000 AND p.OrderPriceQ3 > 1000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T13:02:13.543

试试这个

```
select 
    Pjt_Id  ,OrderPriceQ1 ,OrderPriceQ2 ,OrderPriceQ3 ,Customer  
from 
    table
where 
(
    (OrderPriceQ1>=1000 and OrderPriceQ2 >=1000) or
    (OrderPriceQ1>=1000 and OrderPriceQ3 >=1000) or
    (OrderPriceQ2>=1000 and OrderPriceQ3 >=1000) 
) 
```

# javascript - Knockout JS foreach 循环遍历对象数组

> ID：11901712
> 
> 赞同：1
> 
> 时间：2012-08-10T12:29:06.683
> 
> 标签：javascript, knockout.js

我有一个 observableArray：

```
self.stats = ko.observableArray([
        {"DFTD" : new Stat("Defensive TD", "DFTD",0,20,0,self.playerGroups[1])},
        {"GL" : new Stat("Games Lost", "GL",0,16,0,self.playerGroups[2])},
        {"FGA" : new Stat("Field Goals ATT", "FGA",0,100,0,self.playerGroups[0])},

    ]); 
```

我试图用 foreach 循环它，然后打印出 Stat objects name 属性，它是该对象中的第一个元素。

```
<tbody data-bind="foreach: stats" id="stat-sliders">
        <tr>
            <td><span data-bind="text: stats.Stat().name"></span></td>
            <!--/*<td class="statsListItem">
                    </tr>
 </tbody> 
```

我不确定我是否做得对。我是淘汰赛的初学者，想知道是否有人可以提供帮助？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T17:39:55.217

下面的小提琴创建了一个足球统计数据数组，其中包含一个关键字段和一个统计字段。如果您愿意，可以使用键域来更快地访问。如果您想要一个以属性为键的对象，那将允许最快的索引，尽管它不是数组。

看看这是不是你想要的。

[http://jsfiddle.net/johnpapa/CgFjJ/](http://jsfiddle.net/johnpapa/CgFjJ/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T12:30:40.153

您不需要回拨到`stats`. 请注意，`span`绑定到数组内部模型的属性。

```
<tbody data-bind="foreach: stats" id="stat-sliders">
        <tr>
            <td><span data-bind="text: name"></span></td>
            <!--/*<td class="statsListItem">
                    </tr>
 </tbody> 
```

另外，我认为 Knockout 不能很好地与这样的键控数组配合使用。

# c# - 将两个下拉列表链接在一起不起作用

> ID：11901713
> 
> 赞同：0
> 
> 时间：2012-08-10T12:29:07.613
> 
> 标签：c#, asp.net

我有一个表单，其中有两个从同一数据集填充的下拉列表，因此它们的值应该相等。我在代码中有 OnSelectedIndexChanged 事件，并且第二个下拉菜单的 AutoPostBack 设置为 true。预期的行为是，当用户从第二个下拉列表中选择一个项目时，第一个应该更改为第二个中选择的内容。我在活动中的代码如下所示：

```
if(!ddl1.SelectedValue.Equals(ddl2.SelectedValue)
{
    ddl1.SelectedValue = ddl2.SelectedValue;
} 
```

OnSelectedIndexChanged 事件还包含根据第二个下拉列表的选择重新绑定页面底部的数据网格的代码。长话短说，datagrid 发生了变化，但第一个下拉列表并没有改变它的值。回发似乎不应该限制页面上的更改，那么我在这里缺少什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T12:35:56.730

```
if(!ddl1.SelectedValue.Equals(ddl2.SelectedValue)
{
     ddl1.ClearSelection();
     ddl1.Items.FindByValue(ddl2.SelectedValue).Selected = True
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T14:23:02.773

尝试以下操作：

```
 if (!ddl1.SelectedIndex == ddl2.SelectedIndex)
{
ddl1.SelectedIndex == ddl2.SelectedIndex
} 
```

# objective-c - 解析属性 NSserialization

> ID：11901714
> 
> 赞同：0
> 
> 时间：2012-08-10T12:29:09.367
> 
> 标签：objective-c, xcode, cocoa-touch, ios5

有人可以帮我解决一个问题，我正在尝试用 NSserialization 解析 Deet。我正在尝试解析下一个 JSON：

```
 {
    thing: "10",
    Product: [
        {
            @atri: {
                Name: "Single"
            },
            Price: [
                "21,40",

                "27,50"
            ]
        },
        {
            @atri: {
                Name: "Day"
            },
            Price: [
                "4,80",
                "3,80",
                "333,20",
                "436,60",
                "5,533553"
            ]
        }
    ]
} 
```

我正在尝试使用以下代码解析“价格”：

```
 Deeta *NSApiDeet = [Deeta DeetWithContentsOfURL:[NSURL URLWithString:Planner]];
    NSError *parseError = nil;
    id jsonObject = [NSJSONSerialization JSONObjectWithDeet:NSApiDeet options:NSJSONReadingAllowFragments error:&parseError];

    NSMutableArray *DeetNS = [[NSMutableArray alloc] init];

    if ([jsonObject respondsToSelector:@selector(objectForKey:)]) {
        for (NSDictionary *Deet in [jsonObject objectForKey:@"Product"]) {
            NSDictionary *scrubbedDeet = [NSDictionary dictionaryWithObjectsAndKeys:
                                          [Deet objectForKey:@"Price"], @"Price",

                                          nil];

            [self setTableDeet:[jsonObject objectForKey:@"Product"]];

            [DeetNS addObject:scrubbedDeet]; 
```

在 NSLog 我收到：

```
1: (
    "2,40",
    "1,90",
    "1,40",
    "4,10",
    "3,30",
    "2,50"
)
2012-08-10 14:26:10.242 [19716:707] 1: (
    "4,80",
    "3,80",
    "2,80",
    "8,20",
    "6,60",
    "5,00"
) 
```

现在我正在尝试解析表格单元中的每个价格，我尝试过类似的操作：

```
NSDictionary *Deet = [tableDeet objectAtIndex:[indexPath row]];
  cell.Price.text = [Deet objectForKey:@"Price"]; 
```

但它正在崩溃；

```
-[__NSCFArray isEqualToString:]: unrecognized selector sent to instance 0x2b8fc0
2012-08-10 14:28:40.835 Untitled[19734:707] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFArray isEqualToString:]: unrecognized selector sent to instance 0x2b8fc0'
*** First throw call stack:
(0x36f2a88f 0x33341259 0x36f2da9b 0x36f2c915 0x36e87650 0x350ff3f9 0xfdc89 0x3515befb 0x3515afd9 0x3515a763 0x350fef37 0x36e891fb 0x3259caa5 0x3259c6bd 0x325a0843 0x325a057f 0x325984b9 0x36efeb1b 0x36efcd57 0x36efd0b1 0x36e804a5 0x36e8036d 0x35047439 0x35129cd5 0xfa67d 0xfa618)
terminate called throwing an exception(lldb) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T15:06:49.600

首先，当您创建 'scrubbedData' NSDictionary 时，您将添加两个键 @"Price" 键，这不是一个好主意。

除此之外，我有点不清楚你实际上想要做什么。似乎您想要获取单个价格数组并将它们中的每一个输出到 UITableView 中的单独行。如果是这样的话，我会建议这样的事情：

（保留之前的代码）....

```
NSMutableArray *dataNS = [[NSMutableArray alloc] init];

if ([jsonObject respondsToSelector:@selector(objectForKey:)])
{
    for (NSDictionary *dataItem in [jsonObject objectForKey:@"Product"])
    {
        NSArray *priceArray = [dataItem objectForKey:@"Price"];
        for(NSString *individualPriceString in priceArray)
        {
            [dataNS addObject:individualPriceString];
        }
    }
} 
```

然后，在您的 UITableViewDataSource 方法中

```
cell.Price.text = [dataNS objectAtIndex:[indexPath row]]; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-10T12:41:19.270

键引用的对象`Price`是价格数组，而不是单个价格。`cell.Price.text`显然需要一个字符串，而不是一个数组。

# jquery - 简单的 ASP.NET MVC 移动应用程序与服务器同步一次重新联机

> ID：11901715
> 
> 赞同：0
> 
> 时间：2012-08-10T12:29:15.227
> 
> 标签：jquery, mobile, sync

好的，我想创建一个简单的应用程序，让用户可以将内容添加到手机上的列表中。

但是，如果离线，我希望它存储在本地存储中，然后一旦重新在线将所有尚未同步的内容发布到服务器。

最简单的方法是什么？我会使用 jQuery/mobile，并且主要用于 iPhone。

我是否需要设置 setTimout 以不断检查在线连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T13:04:11.123

如果由于缺少连接而导致命令失败，则切换到离线模式。在离线模式下，定期检查您是否与 setTimeout 建立了连接。如果连接恢复，请不要定期检查连接。

# php - Twitter API 未返回所有关注者

> ID：11901718
> 
> 赞同：1
> 
> 时间：2012-08-10T12:29:29.207
> 
> 标签：php, twitter, twitter-follow

我正在使用这段代码来吸引我的关注者：

```
 $trends_url = "http://api.twitter.com/1/statuses/followers/myname.json";
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $trends_url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    $curlout = curl_exec($ch);
    curl_close($ch);
    $response = json_decode($curlout, true);
    foreach($response as $friends){ 
       echo $friends['name'];
    } 
```

问题是，我无法获得整个列表，只有 100 个关注者。有没有办法让所有跟随我的人？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T12:43:10.667

分页已使用该`cursor`参数实现。您的初始请求应如下所示： [http ://api.twitter.com/1/statuses/followers/myname.json?curosr=-1](http://api.twitter.com/1/statuses/followers/myname.json?curosr=-1)

响应将有一个包含下一个光标值的参数。

例子：

```
{ ...
  "next_cursor" : 1408398970289681313,
  "next_cursor_str" : "1408398970289681313",
  "previous_cursor" : -1409120171445568880,
  "previous_cursor_str" : "-1409120171445568880"
} 
```

您将需要使用从每个响应返回的游标标识符进行其他调用。

您的下一个请求如下所示：

[http://api.twitter.com/1/statuses/followers/myname.json?curosr=](http://api.twitter.com/1/statuses/followers/myname.json?curosr=) **1408398970289681313**

您还可以在`count`每个请求中包含该参数以指定返回的总记录。

**推特 API 维基：**

[https://dev.twitter.com/docs/api/1/get/statuses/followers](https://dev.twitter.com/docs/api/1/get/statuses/followers)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T12:33:34.690

twitter API 返回 100 个项目的页面。您必须提出多个请求，与想要获取用户页面的数量一样多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T12:35:40.780

Twitter API 的此功能已弃用。它只返回最近发推文的前 100 个关注者。查看此链接了解更多信息： [Followers Twitter API Info](https://dev.twitter.com/docs/api/1/get/statuses/followers)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-16T12:26:04.977

```
enter code here $user_id        = $_GET['user_id'];
$screen_name    = $_GET['screen_name'];
$name       = $_GET['searchname'];
$code           = $connection->get('followers/list', array('screen_name' => $screen_name,'user_id' => $user_id)); 
```

> Blockquote 这对所有关注者都有用

# ios - 如何在iOS上用OpenGL ES实现多层绘图？

> ID：11901721
> 
> 赞同：2
> 
> 时间：2012-08-10T12:29:52.337
> 
> 标签：ios, opengl-es, uiview, paint

我想很快为 iOS 制作一个简单的绘图应用程序，但我不能完全让绘图工作 - 好吧，保存每个图层上的内容并恢复图层。似乎所有图层都保存相同的像素..

这个想法是拥有三层并使用 OpenGL ES 在每一层上绘制。由于没有这方面的经验，我只是平铺了三个 UIView，并为每个 UIView 添加了一个 OpenGL 绘图画布（教程中的 PaintingView 的修改版本）。当用户交换绘图层时，我只是禁用了其他层上的用户交互。

通过这种方法，我遇到了很多我认为源于我的方法的奇怪之处。所以现在，我认为我应该以某种方式在同一个 PaintingView 中制作三个全屏缓冲区，并在它们之间切换 OpenGL。

我在做某事吗？有没有人可行的方法？

任何有关主题的内容都可能有所帮助。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T15:28:11.383

您可以制作两种不同的帧缓冲区：一种用于绘制到屏幕，另一种用于绘制到纹理。然后，您可以制作 3 种不同的纹理，它们将成为您的图层。吸引他们。最后，您可以将您拥有的纹理绘制到第一个帧缓冲区并呈现在屏幕上。

您的抽奖周期将是这样的：

*   绑定 RenderToTextureFramebuffer
*   将 texture1 附加到 RenderToTextureFramebuffer
*   在第 1 层画出你想要的东西
*   将 texture2 附加到 RenderToTextureFramebuffer
*   在第 2 层画出你想要的东西
*   将 texture3 附加到 RenderToTextureFramebuffer
*   在第 3 层画出你想要的东西
*   绑定 RenderToScreenFramebuffer
*   绑定纹理1
*   绘制texture1（你的layer1）
*   绑定纹理2
*   绘制texture2（你的layer2）
*   绑定纹理3
*   绘制texture3（你的layer3）
*   在屏幕上呈现最终图片

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T14:12:00.483

要拥有画家的所有功能-撤消/重做等等恕我直言，您只需要几个图形对象数组并在每个渲染过程中遍历它们。

# android - 重启加载器中的 NullpointerException

> ID：11901724
> 
> 赞同：2
> 
> 时间：2012-08-10T12:30:04.987
> 
> 标签：android, android-activity

我正在开发我的 Android 应用程序，我有一个 Activity 显示项目列表，然后是另一个用于编辑特定项目的 Activity。但是现在我在从编辑项目返回时在 restartLoader() 中得到一个 NullpointerException。

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent intent) {
    super.onActivityResult(requestCode, resultCode, intent);
    getLoaderManager().restartLoader(LOADER_ID, null, this);
} 
```

我假设 ResultInfo 中的 who 不应该为空，但这只是一个猜测。

```
08-10 00:44:26.427: E/AndroidRuntime(723): java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=0, result=-1, data=null} to activity {duttsoft.travel/duttsoft.travel.TravelHealthActivity}: java.lang.NullPointerException
08-10 00:44:26.427: E/AndroidRuntime(723):  at android.app.ActivityThread.deliverResults(ActivityThread.java:2980)
08-10 00:44:26.427: E/AndroidRuntime(723):  at android.app.ActivityThread.handleSendResult(ActivityThread.java:3023)
08-10 00:44:26.427: E/AndroidRuntime(723):  at android.app.ActivityThread.access$1100(ActivityThread.java:123)
08-10 00:44:26.427: E/AndroidRuntime(723):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1177)
08-10 00:44:26.427: E/AndroidRuntime(723):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-10 00:44:26.427: E/AndroidRuntime(723):  at android.os.Looper.loop(Looper.java:137)
08-10 00:44:26.427: E/AndroidRuntime(723):  at android.app.ActivityThread.main(ActivityThread.java:4424)
08-10 00:44:26.427: E/AndroidRuntime(723):  at java.lang.reflect.Method.invokeNative(Native Method)
08-10 00:44:26.427: E/AndroidRuntime(723):  at java.lang.reflect.Method.invoke(Method.java:511)
08-10 00:44:26.427: E/AndroidRuntime(723):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
08-10 00:44:26.427: E/AndroidRuntime(723):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
08-10 00:44:26.427: E/AndroidRuntime(723):  at dalvik.system.NativeStart.main(Native Method)
08-10 00:44:26.427: E/AndroidRuntime(723): Caused by: java.lang.NullPointerException
08-10 00:44:26.427: E/AndroidRuntime(723):  at android.app.LoaderManagerImpl.restartLoader(LoaderManager.java:651)
08-10 00:44:26.427: E/AndroidRuntime(723):  at duttsoft.travel.TravelHealthActivity.onActivityResult(TravelHealthActivity.java:136)
08-10 00:44:26.427: E/AndroidRuntime(723):  at android.app.Activity.dispatchActivityResult(Activity.java:4649)
08-10 00:44:26.427: E/AndroidRuntime(723):  at android.app.ActivityThread.deliverResults(ActivityThread.java:2976) 
```

我正在画一个空白，为什么我会得到这个异常以及如何解决它，有什么想法吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-07-08T14:31:08.423

我有同样的问题。我的问题是，当我最初初始化加载器时，我在 onCreateLoader 回调方法中返回 null 作为加载器。当我修复我的崩溃停止出现时。即使这个问题已经存在将近一年了，但我想如果将来有人偶然发现同样的问题，我会把这个答案留在这里。

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2012-08-10T12:43:36.977

我的猜测是问题出在这条线上：

```
 getLoaderManager().restartLoader(LOADER_ID, null, this); 
```

你`null`作为参数传递，然后得到一个 NPE。尝试传递一个空的 Bundle 对象。

# objective-c - 如何在Objective c中附加到char数组

> ID：11901726
> 
> 赞同：0
> 
> 时间：2012-08-10T12:30:19.930
> 
> 标签：objective-c, c, arrays, char, append

我有两个`char`数组 -

```
char* c1[] = { 0x01, 0x02, 0x03, 0x04, ... 0x016 };
char* c2[] = { 0x01, 0x02, 0x03, 0x04, ... 0x016 }; 
```

我想要一个带有附加字节的`char`( )和`char* result``c1``c2`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T12:32:51.853

您需要分配内存，并将数据从旧数组复制到新数组。

```
char* result;
result=(char*)malloc( sizeof(c1) + sizeof(c) );
memcpy(result, c, sizeof(c));
memcpy(result+sizeof(c), c1, sizeof(c1)); 
```

当你用结果空闲内存完成你的工作时`free(result);`

# eclipse - 使用 gradle eclipse 插件指定 JRE 容器

> ID：11901737
> 
> 赞同：5
> 
> 时间：2012-08-10T12:31:17.803
> 
> 标签：eclipse, plugins, gradle, java

即使`sourceCompatibility`和的属性`targetCompatibility`设置为特定的 JRE 版本，唯一的类路径条目`JRE_CONTAINER`是否会生成为`<classpathentry kind="con" path="org.eclipse.jdt.launching.JRE_CONTAINER" exported="true"/>`在我的项目中使用。

当 gradle 运行时，我如何要求 gradle 将 JRE_CONTAINER 设置为特定版本`gradle eclipse`？

* * *

```
apply plugin: 'java'
apply plugin: 'eclipse'

ext {
    target = "1.5"
}

def jreContainer = 'org.eclipse.jdt.launching.JRE_CONTAINER'

if (target == '1.4' || target == '1.5') {
    jreContainer += '/org.eclipse.jdt.internal.debug.ui.launcher.StandardVMType/J2SE-' + target
} else if (target == '1.6' || target == '1.7') {
    jreContainer += '/org.eclipse.jdt.internal.debug.ui.launcher.StandardVMType/JavaSE-' + target
}

eclipse {
    classpath {
        containers.clear()
        containers.add(jreContainer)
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-10T07:09:56.823

就我而言，它运行良好，如下所示

```
containers.add('org.eclipse.jdt.launching.JRE_CONTAINER/org.eclipse.jdt.internal.debug.ui.launcher.StandardVMType/jdk6') 
```

但“jdk6”是用户特定的名称

# entity-framework - 通用实体框架和 IQueryable

> ID：11901741
> 
> 赞同：0
> 
> 时间：2012-08-10T12:31:36.810
> 
> 标签：entity-framework

我已经开始考虑通用 EF 方法，并且我发现了该帖子[http://blog.damianbrady.com.au/2012/03/07/a-generic-crud-repository-for-entity-framework/](http://blog.damianbrady.com.au/2012/03/07/a-generic-crud-repository-for-entity-framework/)

代码片段：

```
protected Dictionary<string, object> CachedObjects = new Dictionary<string, object>();

protected ObjectSet<TEntity> GetObjectSet<TEntity>() where TEntity : EntityObject
{
   var fulltypename = typeof(TEntity).AssemblyQualifiedName;
   if (fulltypename == null)
       throw new ArgumentException("Invalid Type passed to GetObjectSet!");
   if (!CachedObjects.ContainsKey(fulltypename))
   {
       var objectset = base.CreateObjectSet<TEntity>();
       CachedObjects.Add(fulltypename, objectset);
   }
            return CachedObjects[fulltypename] as ObjectSet<TEntity>;
}

...

public TEntity GetFirstOrDefault<TEntity>(Func<TEntity, bool> predicate) where TEntity : EntityObject
{
   return GetObjectSet<TEntity>().FirstOrDefault(predicate);
} 
```

现在，如果那两行代码相等？

```
adapter.db.GetFirstOrDefault<MyTable>(x => x.ID == 1);
adapter.db.MyTable.FirstOrDefault(x => x.ID == 1); 
```

我在问，因为我不想将所有项目加载到内存中，然后对它们进行一些过滤。有什么方法可以使这样的通用操作像`IQueryable<T>`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:34:31.433

> 我在问，因为我不想将所有项目加载到内存中，然后对它们进行一些过滤。是否有任何方法可以使像 IQueryable 这样的通用操作？

它加载所有项目并在内存中进行过滤，因为它使用`Func<TEntity, bool>`而不是`Expression<Func<TEntity, bool>>`. 此外，它使用一些无用的基础设施来进行设置。你只需要用来`objectContext.CreateObjectSet<TEntity>`获取一个对象集。

# objective-c - ios UIImage:imageWithContentsOfFile 被击中

> ID：11901745
> 
> 赞同：0
> 
> 时间：2012-08-10T12:31:54.097
> 
> 标签：objective-c, uiimageview, uiimage

在这里，我从 url 下载图像并将其保存到缓存目录中，我们从缓存路径中获取图像，但它被击中获取图像。是否有任何替代解决方案可以从本地路径获取图像

在这里，我分享了从本地路径获取图像的代码：

```
NSString *cachePath = [NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    NSString *path = [NSString stringWithFormat:@"%@/%@", cachePath,[[imageurl componentsSeparatedByString:@"/"]lastObject]];
UIImage *image = [UIImage imageWithContentsOfFile:path]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T10:11:59.950

您应该创建一个 NSObject 类来处理图像的下载和缓存。例子

接口文件

```
 #import <Foundation/Foundation.h>

            @interface ImageCache : NSObject
            {
             UIImage *background;
            }
   @property (nonatomic,retain) UIImage *background;         
            -(void)getImages;
            -(void) storeImages;
            -(void) clearCache;

    @end 
```

执行

```
 @implementation ImageCache

        @synthesize background;

            - (void) cacheImage: (NSString *) ImageURLString : (NSString *)imageName
            {
                NSURL *ImageURL = [NSURL URLWithString: ImageURLString];

                // Generate a unique path to a resource representing the image you want

                NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
                NSString *docDir = [paths objectAtIndex: 0];
                NSString *docFile = [docDir stringByAppendingPathComponent: imageName];

                // Check for file existence
                if(![[NSFileManager defaultManager] fileExistsAtPath: docFile])
                {
                    // The file doesn't exist, we should get a copy of it

                    // Fetch image
                    NSData *data = [[NSData alloc] initWithContentsOfURL: ImageURL];

                    UIImage *image = [[UIImage alloc] initWithData: data];

                    // Is it PNG or JPG/JPEG?
                    // Running the image representation function writes the data from the image to a file
                    if([ImageURLString rangeOfString: @".png" options: NSCaseInsensitiveSearch].location != NSNotFound)
                    {

                        [UIImagePNGRepresentation(image) writeToFile: docFile atomically: YES];

                    }
                    else if
                    (
                            [ImageURLString rangeOfString: @".jpg" options: NSCaseInsensitiveSearch].location != NSNotFound || 
                            [ImageURLString rangeOfString: @".jpeg" options: NSCaseInsensitiveSearch].location != NSNotFound
                    )
                    {
                        [UIImageJPEGRepresentation(image, 100) writeToFile: docFile atomically: YES];
                    }
                }
            }

            - (UIImage *) getCachedImage : (NSString *)imageName
            {

                NSArray *paths = NSSearchPathForDirectoriesInDomains
                (NSDocumentDirectory, NSUserDomainMask, YES);
                NSString *documentsDirectory = [paths objectAtIndex:0];
                NSString* cachedPath = [documentsDirectory stringByAppendingPathComponent:imageName];

                UIImage *image;

                // Check for a cached version
                if([[NSFileManager defaultManager] fileExistsAtPath: cachedPath])
                {
                    image = [UIImage imageWithContentsOfFile: cachedPath]; // this is the cached image
                }else
                {
                    NSLog(@"Error");
                }

                return image;
            }

        -(void)getImages
        {    
//I just googled background image and took first image I found for this example
         NSString *backgroundURL = @"http://www.dvd-ppt-slideshow.com/images/ppt-background/background-3.jpg";  
        [self cacheImage:backgroundURL: @"Background"];

        }

    -(void) clearCache
    {
    //If you ever need to clear the cache for whatever reason, good to have a method to handle it    
        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString *docDir = [paths objectAtIndex: 0];
        NSString *docFile1 = [docDir stringByAppendingPathComponent: @"Background"];
        NSFileManager *fileManager = [NSFileManager defaultManager];
        [fileManager removeItemAtPath:docFile1 error:NULL];

    }

    -(void) storeImages
    {
        background = [self getCachedImage:@"Background"];
    }

@end 
```

在我给出的示例中，我只使用了一张图片。但你明白我敢肯定。现在，如果您想下载并存储该图像。只需在 ViewController 中导入 ImageCache 类，然后调用

```
ImageCache *cacheMe = [[ImageCache alloc] init];
   [cache getImages];
    [cacheMe storeImages];
    UIImageView *image = [[UIImageView alloc] initWithImage:[cacheMe background]]; 
```

这就是您需要做的所有事情。如果你有一个专门用于缓存的类，那就容易多了。希望有帮助！！

编辑：更新忘记了两行代码。我自己测试过，现在应该可以正常工作了

# xml - XML 动态对象和 IEnumberables

> ID：11901753
> 
> 赞同：3
> 
> 时间：2012-08-10T12:32:09.743
> 
> 标签：xml, c#-4.0, dynamic, expandoobject

我的 DynamicXML 对象有一些问题，它解析 XML 很好，并且对于单个元素效果很好，但是当我有多个子元素时它会倒下。我显然错过了一些东西，但我不知道是什么。

这是课程：

```
public class DynamicXml : DynamicObject
{
    readonly XElement element;

    public DynamicXml(string xml)
    {
        element = XElement.Parse(xml);
    }

    public DynamicXml(XElement xElement)
    {
        element = xElement;
    }

    public override bool TryGetMember(GetMemberBinder binder, out object result)
    {
        if (element == null)
        {
            result = null;
            return false;
        }

        var sub = element.Element(binder.Name);

        if (sub == null)
        {
            result = null;
            return false;
        }
        else
        {
            result = new DynamicXml(sub);
            return true;
        }
    }

    public override string ToString()
    {
        return element != null ? element.Value : string.Empty;
    }

    public override bool TryConvert(ConvertBinder binder, out object result)
    {
        try
        {
            result = Convert.ChangeType(element.Value, binder.ReturnType);
            return true;
        }
        catch { }

        return base.TryConvert(binder, out result);
    }
} 
```

这就是我将如何使用它

```
var response = "<response><foo>some xml here</foo></response>"
result = new DynamicXml(response);

var newObj = new SumObject();
newObj.Foo = result.foo; 
```

现在这工作正常，但如果我的 xml 是：

```
<response>
   <foo>
     <bahs>
        <bah>value here</bah>
        <bah>value here</bah>
        <bah>value here</bah>
     </bahs>
   </foo>
<response> 
```

我想使用类似的东西：

```
for(var bahs in result.foo.bahs)
{
   //magic code here
} 
```

但这不是正在发生的事情我只是得到一个错误：

```
Cannot implicitly convert type 'DynamicXml' to 'System.Collections.IEnumerable'. An explicit conversion exists (are you missing a cast?) 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T13:25:10.760

我想出了解决方案，我需要实现 IEnumerable 和 GetEnumerator()

这是解决方案类：

```
 public class DynamicXml : DynamicObject, IEnumerable
    {
        readonly XElement element;

        public DynamicXml(string xml)
        {
            element = XElement.Parse(xml);
        }

        public DynamicXml(XElement xElement)
        {
            element = xElement;
        }

        public override bool TryGetMember(GetMemberBinder binder, out object result)
        {
            if (element == null)
            {
                result = null;
                return false;
            }

            var sub = element.Element(binder.Name);

            if (sub == null)
            {
                result = null;
                return false;
            }
            else
            {
                result = new DynamicXml(sub);
                return true;
            }
        }

        public override string ToString()
        {
            return element != null ? element.Value : string.Empty;
        }

        public IEnumerator GetEnumerator()
        {
            return element.Elements().Select(child => new DynamicXml(child)).GetEnumerator();
        }

        public override bool TryConvert(ConvertBinder binder, out object result)
        {
            try
            {
                result = Convert.ChangeType(element.Value, binder.ReturnType);
                return true;
            }
            catch { }

            return base.TryConvert(binder, out result);
        }
    } 
```

# python - 如何使用正则表达式搜索字符串以查找包含字符字母和特殊字符的字符串，例如使用python的-，（）

> ID：11901755
> 
> 赞同：1
> 
> 时间：2012-08-10T12:32:11.357
> 
> 标签：python

我想动态搜索一些字符串包含不区分大小写，一些字符串包含特殊字符，如 (TM)、(R) 如何搜索这些字符串

```
with open(logfile) as inf:
                for line in inf:
                    if re.search(string,line,re.IGNORECASE):
                       # print 'found line',line 
```

我想添加 re.IGNORECASE，re.escape() 出现错误，如何解决

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T12:47:50.260

如果我把它放到 python 控制台中......

```
>>> re.search(re.escape("Stack(R) Overflow"), "Hey bro, Stack(R) Overflow", re.I)
<_sre.SRE_Match object at 0xb778adb0> 
```

..我得到了正确的结果。

# php - 通过单击按钮更改 wordpress 主页中的 div 内容

> ID：11901762
> 
> 赞同：-2
> 
> 时间：2012-08-10T12:32:32.260
> 
> 标签：php, javascript, wordpress

嗨，我正在一个网站上工作 | 必须完全自定义精品主题。我现在需要做的就是在主页上有 2 个按钮，当按下每个按钮时，必须在同一页面中显示一组不同的产品。我正在尝试使用可见性属性，但它不起作用。有人可以帮我弄这个吗。我需要做的就是在单击按钮时更改主页的内容？？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T17:10:09.507

使用标签！

[**WordPress 帖子标签**](http://wordpress.org/extend/plugins/wordpress-post-tabs/)插件可帮助您轻松地将各种标签添加到您的 WordPress 帖子或页面。

您可以将每组产品添加到选项卡。通过修改选项卡的样式，它看起来也像一个按钮！！！

干杯。

# jquery - jQuery自动完成式搜索框从页面中提取链接列表

> ID：11901767
> 
> 赞同：1
> 
> 时间：2012-08-10T12:32:56.057
> 
> 标签：jquery

我有一个新闻编辑室页面，里面有一个简短的文章列表。我没有为此使用数据库或 CMS，因此暂时我想实现一个快速搜索功能，以使用搜索框解析标题列表。

我希望能够开始在输入框中输入内容，并且可能使用 .find() 来解析文章列表，然后在 div 中的搜索框下方有一个列表或结果（类似于自动完成）并有文章的链接可以点击到文章本身。我已经在使用 jQuery，所以我宁愿不必也使用 jQueryUI，所以关于如何实现这一点的任何提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T13:31:51.987

这就是你所追求的吗？[jsfiddle](http://jsfiddle.net/kU7Sn/47/)

```
$(function() {
    $("#searchbox").on("keyup", function() {

        var search = $(this).val().toLowerCase();
        $("#results").empty()

        if(search.trim().length) {
            var hits = $("#articles .articlelink").filter(function() {
                return $(this).text().toLowerCase().indexOf(search) !== -1;
            });
            $("#results").append(hits.clone());
        }        

    });
});​ 
```

要限制返回链接的数量，您可以使用`.slice()`：

```
var hits = $("#articles .articlelink").filter(function() {
    return $(this).text().toLowerCase().indexOf(search) !== -1;
}).slice(0,3); //return max three items 
```

请注意， using`slice()`不是一种非常有效的技术，因为它仍然返回所有元素，并且它只是在创建列表后截断列表。您*可以*计算返回的元素数量，`filter()`但上面的代码更简洁。除非性能真的成为问题，否则我会怎么做。

如果您想在搜索不存在的内容时提供默认的“无结果”消息，只需检查`hits`数组的长度是否为 0：

```
if (hits.length) {
    $("#results").append(hits.clone());
} else {
    $("#results").append("<li>No results!</li>");
} 
```

更新了上述更改的小提琴：[小提琴](http://jsfiddle.net/kU7Sn/65/)

# c# - 如何将八位字节流下载为 xls 文件？

> ID：11901769
> 
> 赞同：1
> 
> 时间：2012-08-10T12:33:04.807
> 
> 标签：c#, sql-server-2008, file-upload, xls

我正在使用 VS2010、SQLExpress 2008 R2 和 EntityFramework 来构建文档管理程序。

使用 提交表单时`HttpPostedFileBase`，xls 和 doc 格式以“application/octet-stream”作为其内容类型保存。我的问题是当我下载文件时，它不被识别为 xls 或 doc 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T12:36:42.487

你有几个选择：

1.  将文件格式或扩展名也保存在数据库列中（最简单）。
2.  将文件保存到磁盘并将位置（路径）保存在数据库中（更快）。
3.  尝试尝试读取二进制文件头以确定其格式的第三方库（几乎从不工作）。

# sql-server-2008 - 计算列是可为空的类型，即使所涉及的列不是空类型

> ID：11901773
> 
> 赞同：0
> 
> 时间：2012-08-10T12:33:22.490
> 
> 标签：sql-server-2008

我想创建一个计算列。

我有一个表说表 1，其中有一列称为加入日期。

我想创建一个列，通过减去今天的日期和 [Date of Joining] 列来返回 Months(int) 中的值。

我用这个：（datediff（月，[DateJoining]，getdate（）））

**它工作得很好，但我不知道为什么计算类型列是空类型，即使我将 DateJoining 列设为非空类型**

任何帮助都受到高度赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T12:53:36.817

我无法告诉您为什么 SQL Server 会以这种方式运行，我也无法理解它的重要性，除了理解之外（您不会真正理解，因为我不知道这里是否有人可以解释*为什么*会这样）。我认为对于 int 它可能会防止溢出（即使在这种情况下显然不可能）。

如果您确实希望系统目录为您确认该列不可为空：

```
ALTER TABLE dbo.whatever ADD column_name 
  AS (ISNULL(datediff(month, DateJoining, getdate()), 0)); 
```

注意：这个技巧不适用于`COALESCE`.

# html - 使用 CSS 创建块悬停效果的最佳实践

> ID：11901782
> 
> 赞同：1
> 
> 时间：2012-08-10T12:34:14.923
> 
> 标签：html, css, hover, block, effect

使用 CSS 在链接上创建块悬停效果的最佳做法是什么？这是我的例子：

的HTML：

```
<div id="links">
    <ul>
      <li><a href="#" title="Text">Link Heading One
        <em>Description of link.</em>
        <span>Date posted</span></a></li>
      <li><a href="#" title="Text">Link Heading One
        <em>Description of link.</em>
        <span>Date posted</span></a></li>
    </ul>
</div> 
```

CSS：

```
#links ul {
        list-style-type: none;
        width: 400px;
}

#links li {
        border: 1px dotted #999;
        border-width: 1px 0;
        margin: 5px 0;
}

#links li a {
        color: #990000;
        display: block;
        font: bold 120% Arial, Helvetica, sans-serif;
        padding: 5px;
        text-decoration: none;
}

 * html #links li a {  /* make hover effect work in IE */
    width: 400px;
}

#links li a:hover {
        background: #ffffcc;
}

#links a em {
        color: #333;
        display: block;
        font: normal 85% Verdana, Helvetica, sans-serif;
        line-height: 125%;
}

#links a span {
        color: #125F15;
        font: normal 70% Verdana, Helvetica, sans-serif;
        line-height: 150%;
} 
```

我已经看到了各种技术来实现这一点，尽管我缺乏编码经验使我无法理解哪种技术是好的做法。理想情况下，需要更少的代码并获得相同的结果。

这是一个小提琴： http: [//jsfiddle.net/RsDMk/](http://jsfiddle.net/RsDMk/) 如果您选择回答，请随时更新小提琴，以便我们可以有一个工作示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T12:40:23.590

您在小提琴中完成的方式是最佳实践。悬停仅适用于锚元素的某些 IE 版本，因此您所做的方式应该适用于所有现代浏览器。

# variance - 运行方差计算

> ID：11901784
> 
> 赞同：1
> 
> 时间：2012-08-10T12:34:16.847
> 
> 标签：variance

我正在寻找一种一次性计算滑动窗口方差的方法。我找到了一种使用 Power Sum Averages 的有效方法。但是，我正在寻找一种不需要我存储以前的数据点的解决方案。虽然，上述机制只需要 1 个历史值（series[bar-period]）来计算当前方差。在滑动窗口中，实际上它需要所有值以供将来计算。

这个问题有解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-04-07T14:57:37.210

你有几个选择：

1.  对均值/方差使用增量算法，并添加要从窗口中删除的元素，权重为 -1。但是您仍然需要将它们全部存储起来，以便您知道要丢弃什么。你可能会要求不可能的事情。

2.  如果您想要一个非常小的状态，您可以尝试使用 Python[动量](https://github.com/microprediction/timemachines)包，或者从相同的包中进行转换。我是作者。

# c++ - 通过使用 WIN32OLE 的 Ruby 对 C++ dll 的代码覆盖率

> ID：11901788
> 
> 赞同：1
> 
> 时间：2012-08-10T12:34:34.487
> 
> 标签：c++, ruby, code-coverage

当我想为我们的项目实现代码覆盖时，我遇到了一个特定的问题。我们的项目是使用 C++ 开发的，输出是库（dll）。

我们测试人员编写了使用 WIN32OLE 注册 dll 并测试库中的函数的 RUBY。

现在我们想为我们的项目实现代码覆盖率。但是我们不想花时间为 C++ 编写单元测试来查看代码覆盖率，因为我们已经在 Ruby 中实现了测试。

那么是否有任何工具或任何方法可以通过 Ruby 分析 DLL 的代码覆盖率？

谢谢，
维马尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T15:34:46.877

不确定这是否是您要查找的内容，但您可以使用[C++ Coverage Validator](http://www.softwareverify.com/cpp-coverage.php)获得 C/C++ DLL 的代码覆盖率。

**使用图形用户界面**

在启动对话框中，将 ruby​​ 解释器的路径作为您要启动的程序 ( **d:\ruby\ruby.exe** )。然后将您的 ruby​​ 脚本的名称放在参数字段 ( **test1.rb** ) 中，并将起始目录放在启动目录字段 ( **d:\tests\test1** ) 中。

然后使用 Go 或 Start Application 按钮启动程序。您的 ruby​​ 程序将被执行。当加载 DLL 时，C++ Coverage Validator 使用调试信息（PDB、COFF、Stabs、CodeView 等）识别 DLL，并为它们执行代码覆盖。

**使用命令行**

您也可以从命令行执行此操作：

**coverageValidator.exe -program d:\ruby\ruby.exe -arg test1.rb -directory d:\tests\test1**

# java - 如何基本简单地设置一个 Servlet 来处理和预处理 JSP 请求

> ID：11901789
> 
> 赞同：2
> 
> 时间：2012-08-10T12:34:39.697
> 
> 标签：java, jsp, servlets

我想让一个 Servlet 首先处理对 JSP 页面的所有请求。Servlet 将用于根据请求的 JSP 设置服务器端变量。

例如，我想要实现的是给定 url:example.com/index.jsp，Servlet 首先通过解析请求的 JSP (index.jsp) 来处理请求，设置特定于请求索引的变量。 jsp（使用`request.setAttribute`）然后分派到实际的 index.jsp（例如 /WEB-INF/index.jsp）。然后，JSP 将拥有它需要的正确变量。

到目前为止，我的问题是我使用“/ *** ”作为我的 Servlet 的映射模式。它处理请求，然后使用`requestDispatcher.forward("/WEB-INF/index.jsp")`它以无限循环结束，因为这也匹配“/ *”模式。

我的 Servlet 应该如何处理请求的 url？我应该使用什么作为 web.xml 中的映射模式？

有这个标准的设置吗？我只是在寻找一种“最佳实践”方法来为我的所有 JSP 设置预处理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T13:00:44.243

对于[servlet](https://stackoverflow.com/tags/servlets/info) URL 模式`/*`来说，这首先是一个奇怪的选择。这通常专门供[过滤器](https://stackoverflow.com/tags/servlet-filters/info)使用。默认情况下，Servlet 也会在转发和包含时调用，但不会在过滤器上调用。Using将完全覆盖容器的内置函数，应该在转发期间调用它。`/*``JspServlet``*.jsp`

而是使用更具体的 URL 模式，例如`/pages/*`, `/app/*`, `*.do`, `*.html`, 等等。

当使用前缀 servlet 映射时，比如`/pages/*`你想隐藏 URL 中的额外路径，那么你应该保持前缀 servlet 映射不变，将所有*其他*资源放在一个公共路径中（通常它只是像 CSS 这样的静态资源/JS/images) 并创建一个额外的过滤器来检查它是否是资源请求，如果是，则继续链，如果不是，则转发到 servlet。这不会更改 URL。servlet 又可以安全地转发到 JSP。

这是一个示例，假设您的 servlet 已映射，`/pages/*`并且不应由 servlet 处理的所有（静态）资源都放在`/resources`文件夹中（您可以将 JSP 保留在 中`/WEB-INF`，该部分不需要更改； forward 无论如何都不会击中过滤器）。

```
HttpServletRequest req = (HttpServletRequest) request;
String path = req.getRequestURI().substring(req.getContextPath().length());

if (path.startsWith("/resources/")) {
    chain.doFilter(request, response);
} else {
    request.getRequestDispatcher("/pages" + path).forward(request, response);
} 
```

最后，只需将上述过滤器映射到`/*`.

### 也可以看看：

*   [Tomcat 中的 URL 映射到 FrontController servlet](https://stackoverflow.com/questions/8902987/url-mapping-in-tomcat-to-frontcontroller-servlet)
*   [设计模式基于 Web 的应用程序](https://stackoverflow.com/questions/3541077/design-patterns-web-based-applications)
*   [servlet 映射 url 模式中 / 和 /* 之间的区别](https://stackoverflow.com/questions/4140448/servlet-mapping-vs)

# c# - 2个日期之间月差的Linq查询

> ID：11901794
> 
> 赞同：2
> 
> 时间：2012-08-10T12:34:53.323
> 
> 标签：c#, asp.net-mvc-3, linq, entity-framework

我在数据库中有 2 个字段 FromDate 和 ToDate。我想要结果 LINQ 查询具有 2 个日期的月差和一些动态值的记录。

实际上，我有一个数据库表作为就业历史，其中 NameOfCompany 作为 nvarchar(50)，ProfileID 作为 bigint，EmoploymentFrom 作为日期时间，EmploymentUpto 作为日期时间，IsCurrentEmployer 作为位。

ProfileID 是 Profile 的参考键我想按月的经验为所有配置文件生成查询。

如果 IsCurrentEmployer 为真，则 EmployUpto 为空。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-10T12:43:59.153

如果您在 .NET 4+ 下，您可以尝试[`EntityFunctions.DiffMonths`](http://msdn.microsoft.com/en-us/library/dd382850.aspx)实用方法，例如：

```
var query = query
            .Where(i=> 
                 EntityFunctions.DiffMonths(i.FromDate, i.ToDate) == 2
            ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T12:45:51.290

假设您正在使用实体框架..您可以

```
Query(q => q.ToDate < DateTime.Today && q.FromDate > DateTime.Today.AddMonths(-2)) 
```

Query 是任何 Iqueryable.. 可以选择，首先，firstOrDefault.. 当然你可以将*DateTime.Today*更改为你的参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T12:39:03.687

你可以执行这段代码

```
var resultWithMonth = datevalue2.Subtract(datevalue2).Days / (365.25 / 12) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T12:40:00.823

从数据库中提取日期后，您可以使用减法函数作为选择参数执行 zip 操作。

```
IEnumerable<DateTime> datesA = //blah;
IEnumerable<DateTime> datesB = //blah;
IEnumerable<DateTime> differences = 
  datesA.Zip( datesB, (dA,dB) => dA.Subtract(dB)); 
```

# java - 使用 Secure random 生成随机密码

> ID：11901799
> 
> 赞同：0
> 
> 时间：2012-08-10T12:35:09.040
> 
> 标签：java, security, random, passwords

我需要使用安全随机生成随机密码。我浏览了提供的一些示例以及crowne 提供的关于[如何创建密码的答案？](https://stackoverflow.com/questions/1741160/how-can-i-create-a-password) 很棒，我已经根据我的要求进行了修改。

问题是生成的密码应该总是以字母开头。怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-10T12:42:07.530

尝试这个

```
String password = RandomStringUtils.randomAlphabetic(1) + RandomStringUtils.randomAlphanumeric(7); 
```

如果您的密码长度为 8 个字符

# sencha-touch-2 - How does onUpdated work

> ID：11901800
> 
> 赞同：0
> 
> 时间：2012-08-10T12:35:11.387
> 
> 标签：sencha-touch-2

I'm currently trying to check wether there is a new update of my app before the whole app is loading, this in order to speed the loading up a bit.

So I was trying to figure out how and when the onUpdated function is called but I can't seem to find anything in the ST sources.

```
Ext.application({

  ...

  onUpdated: function() {
    var title, message;
    title   = 'Application Update';
    message = 'A new version of this site is available. Reload now?';
    Ext.Msg.confirm(title, message, function(buttonId) {
      if (buttonId === 'yes') {
        window.location.reload();
      }
    });
  }
}); 
```

Basically two questions :

**When is the onUpdated function called in the framework ?**

**How can I check wether there is an update or not before the whole app is loaded and rendered ?**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T08:46:56.670

Check out the detailed explanation by [Jacky Nguyen on Sencha Touch 2.x Forum post](http://www.sencha.com/forum/showthread.php?188446-When-will-run-onUpdated-function-in-app.js&s=355d4be2ee9c201df292a74f07ac9bb3)!

# asp.net-mvc-3 - 将多个 id 从一个视图传递到另一个视图

> ID：11901802
> 
> 赞同：0
> 
> 时间：2012-08-10T12:35:18.620
> 
> 标签：asp.net-mvc-3, visual-studio-2010, html

```
for (i = 0; i < query.length; i++) {
   sessionStorage.setItem("key", JSON.stringify(query[i].id));
   alert(sessionStorage.getItem("key"));
} 
```

在上面的 for 循环中，我将 id 值放入会话存储中，我面临的问题是，如果循环执行多次，那么在 sessionStorage 中，最后一个值仅存储和加载我的最后一条记录。

但我想在每次迭代中检索 id 值并使用所有值来显示所有记录。

这个怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T12:40:49.880

那是因为您使用的是同一个名为`key`. 您可以直接对整个对象进行字符串化，而无需编写任何循环：

```
sessionStorage.setItem('key', JSON.stringify(query)); 
```

现在在另一页上：

```
var query = $.parseJSON(sessionStorage.getItem('key'));

// directly access an element given its index
alert(query[0].id);

// or loop:
for (var i = 0; i < query.length; i++) {
    alert(query[i].id);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T13:21:38.627

或者更简单：为什么不使用已经内置的结构和组件？在发送页面：

```
TempData["<your key>"] = JSON.stringify(query) 
```

在接收页面上：

```
var yourVariable = TempData["Key"]
// at this point @yourVariable on receiving page has the same value as stringified query bu JSON

// as Darin mentioned you access elements like this:
alert(@yourVariable[<your index>].id); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T13:21:29.850

```
var z=0;
for (i = 0; i < query.length; i++) {
   z=z+1;
   sessionStorage.setItem("key"+(Z), JSON.stringify(query[i].id));
}
sessionStorage.setItem("keyResord", JSON.stringify(z));

for(i=0;i<sessionStorage.getItem("keyResord");i++)
{
    alert(sessionStorage.getItem("key"));
} 
```

可能对你有用，对我有用

# php - ajax中的javascript变量

> ID：11901812
> 
> 赞同：0
> 
> 时间：2012-08-10T12:35:52.087
> 
> 标签：php, javascript, jquery, mysql, ajax

这是我的 JavaScript 代码。

```
 $(\"img.agree\").click(function()
    {
    var follow_id = $(this).attr(\"id\");
    var user_id = $(\"img.user_id\").attr(\"id\");

    $.ajax({
     type: \"POST\",
     url: \"/sys/follow.php\",
     data: { 'follow_id': + follow_id, 'user_id': + user_id },
     success: function(html){}
    });

    $(\"img.agree\"+follow_id).hide();
    $(\"img.notagree\"+follow_id).css('display','inline-block');
    });

    $(\"img.notagree\").click(function()
    {
    var follow_id = $(this).attr(\"id\");
    var user_id = $(\"img.user_id\").attr(\"id\");

    $.ajax({
     type: \"POST\",
     url: \"/sys/dontfollow.php\",
     data: { 'follow_id': + follow_id, 'user_id': + user_id },
     success: function(html){}
    });

    $(\"img.notagree\"+follow_id).hide();
    $(\"img.agree\"+follow_id).css('display','inline-block');
    }); 
```

我在 class='agree$string' 或 class='notagree$string' 之后使用唯一的字符串作为 ajax 请求一个和特定的，而不是发送等于所有 img 标签数量的请求。但它不会工作。我认为问题在于 +follow_id 或类似的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T14:14:49.117

您是否考虑过将其移出到 javascript 文件中？我看不出用 PHP 生成它有什么意义，因为没有使用 PHP 变量。此外，您的 HTML 似乎看起来像这样。

```
<html>
<img id="1" class="agree1" src"" />
<img id="1" class="notagree1" src"" />
</html> 
```

如果是这种情况，您真的不应该有具有相同 ID 的不同元素。我想是这样的。

```
<html>
<img id="agree1" class="agree" src"" />
<img id="notagree1" class="notagree"  src"" />
</html> 
```

相应的 JS 将是：

```
$("img.agree").click(function()
    {
        var follow_id = /\d/.exec(this.id); //parse out the number you are looking for with a regex
        var user_id = $("img.user_id").attr("id");

        $.ajax({
             type: "POST",
             url: "/sys/follow.php",
             data: { 'follow_id': + follow_id, 'user_id': + user_id },
             success: function(html){}
        });

        $("#agree"+follow_id).hide();
        $("#notagree"+follow_id).css('display','inline-block');
    });

$("img.notagree").click(function()
    {
        var follow_id = /\d/.exec(this.id); //parse out the number you are looking for with a regex
        var user_id = $("img.user_id").attr("id");

        $.ajax({
             type: "POST",
             url: "/sys/dontfollow.php",
             data: { 'follow_id': + follow_id, 'user_id': + user_id },
             success: function(html){}
        });

        $("#notagree"+follow_id).hide();
        $("#agree"+follow_id).css('display','inline-block');
    }); 
```

再一次，我主张从 PHP 中删除它

# web-services - 从播放应用程序访问 SSL 安全网页

> ID：11901816
> 
> 赞同：2
> 
> 时间：2012-08-10T12:35:57.200
> 
> 标签：web-services, ssl, playframework, playframework-2.0

我正在从 Play 应用程序访问 SSL 安全页面。当页面的证书不可信时（因为它已过期或自签名或可能是其他任何原因），我想从我的通话中提取此信息并相应地执行一些操作。当我在浏览器中访问这样的页面时，它会警告我证书有问题。当我在游戏中写这样的东西时（这里的 https 页面有一个错误的证书）：

```
package controllers

import play.api.mvc.{Action, Controller}
import play.api.libs.ws.WS
import java.util.concurrent.TimeUnit

object CallHttpsController extends Controller{

  def callHttps() = Action {

    val url = "https://xceed.no-ip.org/"

    val response: play.api.libs.ws.Response = WS.url(url).get.await(3, TimeUnit.SECONDS).get

    response.status match {
      case OK => Ok("Got response: " + response.body)
      case _ => Ok("Something went wrong: "+response.status+" "+response.body)
    }
  }
} 
```

响应状态正常，我希望它会抛出证书有问题的异常。

当证书不可信时，是否可以调用这样的页面并获得异常？是否支持默认播放？有没有人有类似的问题/需要？

提前致谢。

**更新 #1：** 感谢 Ning 的提示。我在构建脚本中添加了依赖项：

```
 lazy val appDependencies = Seq(
    "com.ning" % "async-http-client" % "1.7.5"
  ) 
```

图书馆本身确实很有帮助。但是，要按预期使用 SSL，显然它需要初始化 SSL 上下文。我尝试了以下代码：

```
def callHttps() = Action {

    try{

      val url = "https://xceed.no-ip.org/"

      val response: play.api.libs.ws.Response = WS.url(url).get.await(3, TimeUnit.SECONDS).get // => No problem here

      Console.println(WS.client.getConfig.getSSLContext) // => null

      val sslContext = SSLContext.getDefault;
      val playConfig = play.api.Play.maybeApplication.map(_.configuration)
      val asyncHttpConfig = new AsyncHttpClientConfig.Builder()
    .setConnectionTimeoutInMs(playConfig.flatMap(_.getMilliseconds("ws.timeout")).getOrElse(120000L).toInt)
    .setRequestTimeoutInMs(playConfig.flatMap(_.getMilliseconds("ws.timeout")).getOrElse(120000L).toInt)
    .setFollowRedirects(playConfig.flatMap(_.getBoolean("ws.followRedirects")).getOrElse(true))
    .setUseProxyProperties(playConfig.flatMap(_.getBoolean("ws.useProxyProperties")).getOrElse(true))
    .setSSLContext( sslContext )

      playConfig.flatMap(_.getString("ws.useragent")).map { useragent =>
        asyncHttpConfig.setUserAgent(useragent)
      }
      val innerClient = new AsyncHttpClient(asyncHttpConfig.build())

      val resp = innerClient.prepareGet(url).execute().get() // => exception
      Console.println("All OK")

      Ok("Got response: " + resp.getResponseBody)

    }
    catch {
      case e: Exception =>
        var cause = e.getCause
        while (cause != null) {
          Console.println("Caused by: \n" + e.getLocalizedMessage + "\n" + e.getStackTraceString)
          cause = cause.getCause
        }

        Ok("Got Exception: " + e.getLocalizedMessage + "\n" + e.getStackTraceString)
    }
  } 
```

从 WS 源代码中提取了一个客户端初始化，并将默认 SSL 上下文传递给客户端。然后调用按预期失败。将尝试通过游戏筹集门票......干杯！

**更新#2：** 门票现已解决，将成为游戏 2.0.4 的一部分 [https://play.lighthouseapp.com/projects/82401/tickets/655-ws-call-wont-fail-upon-https-使用错误证书调用页面](https://play.lighthouseapp.com/projects/82401/tickets/655-ws-call-wont-fail-upon-https-call-to-a-page-with-wrong-certificate)

**更新#3：** 现在默认设置默认的 ssl 上下文。要在应用程序配置文件中关闭它，请设置 ws.acceptAnyCertificate=true

有关更多信息，请参阅 WS.scala 代码： [https ://github.com/playframework/Play20/blob/master/framework/src/play/src/main/scala/play/api/libs/ws/WS.scala](https://github.com/playframework/Play20/blob/master/framework/src/play/src/main/scala/play/api/libs/ws/WS.scala)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T22:31:48.557

在`play.api.libs.ws.WS`同类游戏中！框架使用[Ning Async HTTP 客户端库](https://github.com/sonatype/async-http-client)（版本 1.7.0），而后者又使用[Netty 网络应用程序框架](https://netty.io)（版本 3.5）。Netty 负责 SSL 验证，但其结果由 Async HTTP Client 库处理。

似乎 SSL 验证仅在[最近提交的 Async HTTP Client 库](https://github.com/sonatype/async-http-client/pull/99)中得到正确修复，该库仅包含在 1.7.5 版本中。您可以尝试将较新的版本强制到您的项目中（即覆盖 Play 引用的 1.7.0 版本！），并且可能会打开一个问题，以便可以在下一个 Play 中包含较新的库版本！释放。

# blackberry - 使用 SAX for Blackberry 解析 XML

> ID：11901822
> 
> 赞同：1
> 
> 时间：2012-08-10T12:36:24.240
> 
> 标签：blackberry

我想解析以下 xml 文件：

```
<login>
    <address id="1">
        <username>mahesh</username>
        <password>1234</password>
    </address>

    <address id="2">
        <username>admin</username>
        <password>admin</password>
    </address>  

    <address id="3">
        <username>a</username>
        <password>a</password>
    </address>  
</login> 
```

谁能帮我？给我一些示例代码来使用 SAX 解析器解析它。我想从 httpConnection 方法获取这个文件。我是BB开发的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T12:23:14.043

您可以使用 Dom & Sax 解析器进行 XML 解析。

有一个用于从 HTTP 请求调用 Xml 的代码片段，而不是使用 Sax Parser 对其进行解析。

```
SAXParserImpl saxparser = new SAXParserImpl();
ListParser receivedListHandler=new  ListParser();
static DataInputStream din = null;
public static String response;

    HttpConnection hc = null;
        OutputStream os;
           try
           {  
               final String url ="<Enter URL for Xml Http Address>"+ InitClass.getConnectionString()+";ConnectionTimeout=25000";

               hc = (HttpConnection)Connector.open(url);

               os = hc.openOutputStream();
               os.write(postDataBytes);

               if (hc.getResponseCode() == 200)
                    din = hc.openDataInputStream();
                else
                    response = "" + hc.getResponseCode();
                saxparser.parse(din, receivedListHandler);
           }
           catch (Exception e) 
           {

           }
           finally 
           {
              try 
              {
                  if(din!=null)
                      din.close();
                  din = null;
                  if(hc!=null)
                      hc.close();
                  hc = null;
              }
              catch (Exception e) {   }
           } 
```

/ ***解析器类*** /

```
 public class ListParser extends DefaultHandler 
{
private String Key="";
private  Hashtable ht=new Hashtable();
vector vec = new Vector();
public ListParser()
{

}
/**
* Gets called, whenever a Xml is start .
*/
public void startDocument() throws SAXException 
{

} 
/**
* Gets called, whenever a Xml is End .
*/
public void endDocument() throws SAXException 
{ 

} 
/**
* Gets called, whenever a new tag is found.
*/
public void startElement(String uri, String localName, String name, Attributes attributes) throws SAXException 
{
    if(name.equals("address"))
    {
        ht = null;
        ht = new Hashtable();
    }
    else if(name.equals("login"))
    {

    }
    Key=name;
}

/**
* Gets called, whenever a closed tag is found.
*/
public void endElement(String uri, String localName, String name) throws SAXException
{
    if(name.equals("address"))
    {
        vec.addElement(ht);
    }
}
public void characters(char[] ch, int start, int length) throws SAXException 
{
    String element=new String(ch, start, length);
    ht.put(Key, element);
}
} 
```

它将解析您的 XML，并在每个 XML 标签的哈希表中为您提供向量 vec 中的数据。

# mongodb - MongoDB MapReduce 作业可以写入 Mongo 之外的任何内容（例如关系数据库中的表）吗？

> ID：11901823
> 
> 赞同：-1
> 
> 时间：2012-08-10T12:36:26.727
> 
> 标签：mongodb, mapreduce, document-database, nosql

我有一个申请。它将其对象图写入 Mongo。对于某些集合，我们希望规范化数据并将其镜像到关系数据库（SQL Server 或 SQLite）。

我在想最好的方法是通过集合上的 MapReduce 工作。这是正确的方法吗？这可能吗？如果这有所作为，我们将在 Windows 上运行。

**更新**

我正在寻找的只是关于 JavaScript 中的 MapReduce 作业是否是解决此问题的最佳方法的一般指导。假设我有一个包含两个字段的对象，`FirstName`并且`LastName`. 当我将其写入集合时，我需要关系数据库中的一行（它有两列`FirstName`和`LastName`）。

当然，我可以在写入集合时将其写入应用程序中的 SQL 表。但我认为也许更好的地方是在数据库中。如果需要，这将允许我在将数据写入关系数据库之前对其进行整形。

现在我已经详细阐述了一些问题，我可以看到其他一些我没有明确提出但相关的问题。运行 MapReduce 作业的 JavaScript 甚至可以访问 Mongo 之外的任何内容吗？是沙盒吗？并且将这样做作为 MapReduce 工作会影响写入性能（我猜不是，而是 IANAE，因此是问题）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T13:26:05.487

不，MapReduce 作业不能写入 SQL 数据库。它甚至不能写入 mongo 集合（`out`选项中指定的集合除外）。

同样，您是否还会尝试从 mysql 触发器写入 mongodb？这个想法对我来说似乎很奇怪:)

因此，我建议您在应用程序中执行此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T13:56:14.480

为了加强前面的答案，不。

Map reduce 环境不能直接附加到其他数据库等的驱动程序，我也不确定它是否应该即使可以。至少可以说，这将导致集成毛球。

Map reduce 将始终在运行时影响系统的性能，因此请确保 MR 以与您的硬件兼容的方式运行，许多人运行大型数据集以增量方式处理对结果集合的一种增量更新。

此外，不，MySQL 不支持从触发器 ping 其他外部数据源（我上次检查过）。

这将更适合您应用程序中的 Active Record 处理程序。在您的网络中集成会更加灵活和容易。

# java - 解析 PDF 时出现奇怪的空格

> ID：11901825
> 
> 赞同：10
> 
> 时间：2012-08-10T12:36:36.827
> 
> 标签：java, pdf, whitespace, itext, pdf-parsing

我需要解析一个 PDF 文档。我已经实现了解析器并使用了**iText**库，到目前为止它可以正常工作。

但是不，我需要解析另一个在单词中间出现非常奇怪的空格的文档。例如，我得到：

> **Vo rber eitung** auf die **Motorr adsaison**。Viele **Motorr adf ahr er**

所有粗体字都应该连接起来，但 PDF 解析器会以某种方式在字词中添加空格。但是当我将 PDF 中的内容复制并粘贴到文本文件中时，我没有得到这些空格。

首先，我认为这是因为我正在使用 PDF Parsing 库，但对于另一个库，我也遇到了完全相同的问题。

我查看`singleSpaceWidth`了解析后的单词，我注意到它总是在变化，当它添加一个空格时。我试图手动将它们放在一起。但由于没有真正的模式来重新组合单词，这几乎是不可能的。

有没有其他人有类似的问题，甚至有解决该问题的方法？

根据要求，这里有更多信息：

*   iText 版本 5.2.1
*   [http://prine.ch/whitespacesProblem.pdf](http://prine.ch/whitespacesProblem.pdf)（链接到 pdf）

使用 SemTextExtractionStrategy 解析：

```
PdfReader reader = new PdfReader("data/SpecialTests/SuedostSchweiz/" + src);

SemTextExtractionStrategy semTextExtractionStrategy = new SemTextExtractionStrategy();

for (int i = 1; i <= reader.getNumberOfPages(); i++) {
    // Set the page number on the strategy. Is used in the Parsing strategies.
    semTextExtractionStrategy.pageNumber = i;

    // Parse text from page
    PdfTextExtractor.getTextFromPage(reader, i, semTextExtractionStrategy);
} 
```

这里是实际解析文本的 SemTextExtractionStrategy 方法。在那里，我在每个解析的单词之后手动添加了一个空格，但它确实在检测中拆分了单词：

```
@Override
public void parseText(TextRenderInfo renderInfo, int pageNumber) {      

    this.pageNumber = pageNumber;

    String text = renderInfo.getText();

    currTextBlock.getText().append(text + " ");

    ....
} 
```

这是整个 SemTextExtraction 类，但在那里它只调用上面的方法（parseText）：

```
public class SemTextExtractionStrategy implements TextExtractionStrategy {

    // Text Extraction Strategies
    public ColumnDetecter columnDetecter = new ColumnDetecter();

    // Image Extraction Strategies
    public ImageRetriever imageRetriever = new ImageRetriever();

    public int pageNumber = -1;

    public ArrayList<TextParsingStrategy> textParsingStrategies = new ArrayList<TextParsingStrategy>();
    public ArrayList<ImageParsingStrategy> imageParsingStrategies = new ArrayList<ImageParsingStrategy>();

    public SemTextExtractionStrategy() {

        // Add all text parsing strategies which are later on applied on the extracted text
        // textParsingStrategies.add(fontSizeMatcher);
        textParsingStrategies.add(columnDetecter);

        // Add all image parsing strategies which are later on applied on the extracted text
        imageParsingStrategies.add(imageRetriever);
    }

    @Override
    public void beginTextBlock() {

    }

    @Override
    public void renderText(TextRenderInfo renderInfo) {
        // TEXT PARSING
        for(TextParsingStrategy strategy : textParsingStrategies) {
            strategy.parseText(renderInfo, pageNumber);
        }
    }

    @Override
    public void endTextBlock() {

    }

    @Override
    public void renderImage(ImageRenderInfo renderInfo) {
        for(ImageParsingStrategy strategy : imageParsingStrategies) {
            strategy.parseImage(renderInfo);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-01-05T12:52:28.423

pdf 中的空格是一个已知问题，如 Roland 在此处的答案所述，并且在 [https://issues.apache.org/jira/browse/TIKA-724的第一条评论中也可以看到](https://issues.apache.org/jira/browse/TIKA-724)

对我也有用的答案是 huuhungus 在 [https://github.com/smalot/pdfparser/issues/72看到的答案](https://github.com/smalot/pdfparser/issues/72)

这是特定于 PDFParser 的，如果你知道你会遇到这个问题，它是更改实际上将这个额外空间添加到 PDFParser 的代码：

> src/Smalot/PdfParser/Object.php 注释掉这一行
> 
> ```
>  $text .= ' '; 
> ```
> 
> 没有完全解决，但可以接受

其他库也可能有类似的临时修复，因此在某些情况下它们可以帮助解决这个问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-08T10:45:12.310

[我已经使用以下Ghostscript](http://www.ghostscript.com/)命令处理了给定的 PDF 文件：

```
gs -o out.pdf -q -sDEVICE=pdfwrite -dOptimize=false -dUseFlageCompression=false -dCompressPages=false -dCompressFonts=false whitespacesProblem.pdf 
```

该命令创建了一个文件`out.pdf`，该文件没有流编码，因此可读性更好。有趣的部分在第 52 行，为了便于阅读，我将其拆分为多行：

```
[
  (&;&)-287.988
  (672744)29.9906
  (+\(%)30.01
  (+!4)29.9876
  (&4)-287.989
  (%4)30.0039
  (&1&8)-287.975
  (3=\)!)-288.021
  (*&4)30.0212
  (&=23)-287.996
  (+1%)-287.99
  (\(=&)-288.011
  (8&1&)-287.974
  (672744)29.9906
  (+\(3+=378$)-250.977
  (#7\)!)
]TJ 
```

括号之间是文本字符。我更改了其中的一些并查看了渲染的 PDF 文件，以查看哪个字符代表哪个字形。然后我解码了文本：

```
[
  (ele)-287.988
  (Motorr)29.9906 ***
  (adf)30.01 ***
  (ahr)29.9876 ***
  (er)-287.989
  (fr)30.0039
  (euen)-287.975
  (sich)-288.021
  ...
] 
```

所以字符之间确实有空格。在您的情况下，这可能是字体的字距调整。现在的问题是您的 PDF 库如何解释这个空格，在我看来，即使是“负空格”也被渲染到结果字符串中的空格中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T13:34:49.830

因为您拥有的文档被分成几列，所以明显的错误在

> 半文本提取策略

班级。我假设**ColumnDetecter**类可能是应该受到指责的，而不是 iText。我只能假设它是根据列的大小来实现的，然后根据它来检索文本。

如果您只想要文本，那么根据列的大小，实现可能会更简单。

# jquery - jquery show/hide submenu -> 如果单击了另一个子菜单，则隐藏一个子菜单

> ID：11901828
> 
> 赞同：1
> 
> 时间：2012-08-10T12:36:44.293
> 
> 标签：jquery

如果单击了其他子菜单，我需要关闭一个子菜单并打开一个新子菜单，这意味着我不希望一次打开多个子菜单。但是，所有子菜单都应该能够关闭。

这是我的 jquery 脚本：

```
<script> 
  $('.show_hide').hide();
  $("li:has(ul)").click(function(){
  $("ul",this).toggle('slow');
  });
</script> 
```

和html：

```
 <ul id="left-menu" class="menu-v">
   <li> 
     <a>Menu</a>
     <ul class="menu-v show_hide">
       <li>
         <a >submenu </a>
       </li>
       <li>
         <a >submenu 2</a>
       </li>
    </ul>
  </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T12:59:20.250

也许想要这样（我给你举了例子）-> [http://jsfiddle.net/7qyE9/3/](http://jsfiddle.net/7qyE9/3/)

html:

```
 <ul>
     <li class="main-menu">
         <span>Test</span>
         <ul class="submenu">
             <li>Item1</li>
             <li>Item2</li>
         </ul>
     </li>

     <li class="main-menu">
         <span>Abcde</span>
         <ul class="submenu">
             <li>Item3</li>
             <li>Item4</li>
         </ul>
     </li>
</ul> 
```

和 javascript

```
$(document).ready(function(){
    $(".main-menu .submenu").hide();

    $(".main-menu span").click(function(){
        $(".main-menu .submenu").hide('fast');
        $(this).parent().find("ul").toggle('fast');
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T13:00:52.370

我不知道您在寻找什么，如果您愿意详细说明，我可能会改进我的答案。

这是[jsfiddle](http://jsfiddle.net/tLwjH/)示例

**HTML**

```
<ul id="left-menu" class="menu-v">
     <li>
        <ul class="show_hide">
           <li>
             <a >submenu </a>
          </li>
          <li>
             <a >submenu 2</a>
          </li>
        </ul>
    </li>
    <li>
       <ul class="show_hide">
          <li>
             <a >submenu 4</a>
          </li>
          <li>
             <a >submenu 5</a>
          </li>
       </ul>
    </li>
 </ul>​ 
```

**查询**

```
$(document).ready(function() {
    $('.show_hide').hide();
    $("li:has(ul)").click(function() {
        $("ul", this).toggle('slow');
    });
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T13:22:14.923

## HTML

```
<ul>
    <li><a>0 Level menu<a></li>
    <li><a>0 Level menu<a></li>
    <li><a>0 Level menu<a></li>
    <li class="parentMenu">
        <ul>
            <li class="alwaysShow"><a>0 Level menu<a><li>
            <li class="hidden"><a>1 Level menu<a><li>
            <li class="hidden"><a>1 Level menu<a><li>
            <li class="hidden"><a>1 Level menu<a><li>
        </ul>
    </li>
</ul> 
```

## 查询

```
$(".parentMenu").hover(
        function () {
            $(this).find(".hidden").show("100");
        },
        function () {
            $(this).find(".hidden").hide("100");
        }
); 
```

# linux - 在 linux 中模拟网络接口上的传入数据包

> ID：11901830
> 
> 赞同：10
> 
> 时间：2012-08-10T12:36:57.047
> 
> 标签：linux, networking, network-programming

如果你通常通过一个接口比如eth0发送一个pcap的tcpreplay，数据包是出站的，即会通过网卡出去。有什么方法可以让 pcaps 入站，以便我的系统将其作为入站数据包处理？

可能的情况

我有一个从 eth0 接收数据包的应用程序，从数据包中提取一些详细信息并通过 eth1 发送。现在，如果网络已设置并且真正的数据包实际流入我的系统，情况就很好了。但出于测试目的，我没有任何东西连接到我的 eth0 或 eth1 端口，但我仍然想从 pcap（可能通过脚本）创建类似的流量，这样我就不必依赖外部物理网络连接用于测试应用程序。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T10:35:18.660

替换`eth0`为`lo`

1.  运行您的应用程序，它接收数据包`lo`并将数据包发送到`eth1`
2.  运行另一个程序（数据包生成器）将数据包发送到`lo`

每个发送到的数据包`lo`都将被`lo`再次接收，因此您的应用程序将从数据包生成器接收数据包。

如果您`lo`正忙于处理其他数据包，您可以通过内核参数添加更多环回设备`max_loop=x`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-19T08:18:11.980

有几种可能的解决方案：

*   *快速而肮脏的解决方案：*由于您有两个物理连接，您是否考虑过使用跳线连接机器上的两个以太网端口？然后，您将能够使用`libpcap`通过 发送数据包并通过`eth1`接收它们`eth0`。当然，此解决方案需要对机器进行物理访问，您也会失去正常使用这些连接的能力。

*   *正确的解决方案：*在我看来，您正在寻找的是一种通过物理网络接口模拟流量的方法。在 Linux（可能还有一些其他类 Unix 系统）上执行此操作的典型方法是创建[TAP](http://en.wikipedia.org/wiki/TUN/TAP)虚拟接口。[在这里](http://backreference.org/2010/03/26/tuntap-interface-tutorial/)查看有关 TUN/TAP 接口的简单教程。

    不幸的是，`tpcreplay`似乎还不支持 TUN/TAP 接口。你*也许*能够以某种方式使它工作，但我怀疑它会很尴尬。

*   *中间立场：在例如*[VirtualBox](http://www.virtualbox.org/)上使用 Linux 虚拟机。我不确定所需的确切网络配置，但据我所知，这应该可行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T12:44:34.323

您想通过特定的网卡/接口在同一台计算机上发送和接收数据包吗？
我知道如何做到这一点的唯一方法是设置一个反弹/回声服务器。

# java - 如何从 Java 中的 HTTP 请求中获取 JSON 对象

> ID：11901831
> 
> 赞同：4
> 
> 时间：2012-08-10T12:37:16.980
> 
> 标签：java, json, httprequest

我现在正在尝试使用 Java 线中的 HTTP 请求来获取 JSON 对象。

我想知道如何在以下线路中获取响应或 JSON 对象。

请告诉我。

（在这个程序中，我尝试获取文章“纽约”的维基百科类别。）

```
 String requestURL = "http://en.wikipedia.org/w/api.php?action=query&prop=categories&format=json&clshow=!hidden&cllimit=10&titles=" + words[i];
 URL wikiRequest = new URL(requestURL);
 URLConnection connection = wikiRequest.openConnection();  
 connection.setDoOutput(true);  

                    /**** I'd like to get response here. ****/

 JSONObject json = Util.parseJson(response); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-03-27T13:55:06.093

只需 2 行代码`JSONTokener`

```
JSONTokener tokener = new JSONTokener(wikiRequest.openStream());
JSONObject root = new JSONObject(tokener); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T12:48:31.510

```
Scanner scanner = new Scanner(wikiRequest.openStream());
String response = scanner.useDelimiter("\\Z").next();
JSONObject json = Util.parseJson(response);
scanner.close(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T12:44:15.750

如果您使用的是 URLConnection，您应该能够读取流而不是获取响应对象：

```
BufferedReader in = new BufferedReader(new InputStreamReader(connection.getInputStream())); 
```

请参阅：[http ://docs.oracle.com/javase/tutorial/networking/urls/readingWriting.html](http://docs.oracle.com/javase/tutorial/networking/urls/readingWriting.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-19T22:40:51.407

使用corn-httpclient 和corn-converter 的示例实现

```
HttpClient client = new HttpClient(new URI(http://en.wikipedia.org/w/api.php?action=query&prop=categories&format=json&clshow=!hidden&cllimit=10&titles=" + words[i]));
HttpResponse response = client.sendData(HTTP_METHOD.GET);
if (! response.hasError()) {
String jsonString = response.getData();
JsTypeComplex jsonResponse =  (JsTypeComplex) JsonStringParser.parseJsonString(jsonString);
JsTypeList resultsArr = (JsTypeList) jsonResponse.get("results"); 
```

Maven依赖：

```
<dependency>
    <groupId>net.sf.corn</groupId>
    <artifactId>corn-httpclient</artifactId>
    <version>1.0.0</version>
</dependency>
<dependency>
    <groupId>net.sf.corn</groupId>
    <artifactId>corn-converter</artifactId>
    <version>1.0.0</version>
</dependency> 
```

# tsql - T-SQL - 为什么 INNER MERGE JOIN 使多个连接定义执行得更快

> ID：11901834
> 
> 赞同：1
> 
> 时间：2012-08-10T12:37:27.140
> 
> 标签：tsql, merge, inner-join, join-hints

我对此感到非常困惑。我无法提供示例，因为最终的 SQL 语句是动态构建的，并且许多函数和过程在其中发挥作用......

一般来说，我有五个联接。我注意到当我删除其中一个时，语句执行 0 秒，否则超过 4 分钟。然后，我查看了实际的执行计划，并注意到“合并连接”需要很多成本。在 Google 中搜索给我留下了“INNER MERGE JOIN”使用或“OPTION (MERGE JOIN)”和语句的结尾。

这非常好，因为查询现在执行了 0 秒。但我的问题是为什么？

我做了一些研究，发现要使用 MERGE 连接，必须对两个语句进行排序 - 这不是我的情况，它们不是，我仍然在 0 秒内得到正确的结果。

有没有人在 T-SQL 想法方面取得进展，为什么会导致这种情况？

我知道我已经有了解决方案，但我想知道为什么它会起作用以及发生了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T12:43:30.307

发生这种情况的一个原因是，如果在慢速计划中，它使用嵌套循环连接，并在内部评估查询的成本很高（由于成本估计不准确而选择了计划）

给出合并连接提示将导致昂贵的查询仅被评估一次（作为您描述中的排序运算符的输入）而不是重复（合并连接会通过其每个输入）。

您需要捕获慢速和快速版本的执行计划，以查看是否属于这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T12:51:31.080

查询优化器在制定计划时会考虑连接数。我已经看到了同样的场景，在 5 个连接处它采用了不同的方法。您可以使用表提示来强制执行查询计划。您还可以重新构造查询以使用联合或相交而不是连接。

# android - 如何处理搜索建议点击的项目

> ID：11901836
> 
> 赞同：1
> 
> 时间：2012-08-10T12:37:33.510
> 
> 标签：android, android-listview, android-contentprovider, search-suggestion

我使用了官方的 Android 示例代码“SearchableDictionary”（链接：http://jayxie.com/mirrors/android-sdk/resources/samples/SearchableDictionary/index.html [）](http://jayxie.com/mirrors/android-sdk/resources/samples/SearchableDictionary/index.html)，它为我们提供了一个搜索界面，您可以在其中搜索一句话，你有两个选择：

1-输入您的关键字并单击搜索图标（键盘），所有匹配结果的列表视图将出现。您单击 ListView 中的一个词来检索定义。

2-输入您的关键字，每次searchView关键字更改时都会自动出现一个小建议列表，因此您可以单击一个建议来检索她的定义。

这是当您单击大列表视图中的项目时调用的搜索功能的代码，而不是建议列表中的项目。

```
 private void doSearch(String queryStr) { 
            // get a Cursor, prepare the ListAdapter and set it
     final DataBaseHelper myDbHelper = new DataBaseHelper(this);
     myDbHelper.openDataBase();
     Cursor cursor = managedQuery(DictionaryProvider.CONTENT_URI, null, null,
             new String[] {queryStr}, null);
    //Cursor cursor = myDbHelper.fetchListItems(queryStr);
    //cursorr.moveToFirst(); // moves the cursor to the first row in the result set, returns false if the result set is empty.

    startManagingCursor(cursor); /* Managing cursors take care of closing the cursor when
    the activity is destroyed, but they do more than that as well: they will be
    deactivated and required as the activities is stopped and restarted. */

    // set the custom list adapter
    // setListAdapter(new MyListAdapter(this, cursor));

     // Specify the columns we want to display in the result
     String[] from = new String[] { DataBaseHelper.KEY_WORD,
                                    DataBaseHelper.KEY_DEFINITION };

     // Specify the corresponding layout elements where we want the columns to go
     int[] to = new int[] { R.id.title,
                            R.id.details };

     // Create a simple cursor adapter for the definitions and apply them to the ListView
     SimpleCursorAdapter words = new SimpleCursorAdapter(this,
                                   R.layout.list_item_with_description, cursor, from, to);
     final ListView mListView = (ListView) findViewById(R.id.list);
     mListView.setAdapter(words);
    // search_keyword = queryStr ;

     // Define the on-click listener for the list items
     mListView.setOnItemClickListener(new OnItemClickListener() {
         public void onItemClick(AdapterView<?> parent, View view, int position, long id) {

             // Build the Intent used to open WordActivity with a specific word Uri
             Intent wordIntent = new Intent(getApplicationContext(), DefinitionActivity.class);
            // final Bundle bundle = new Bundle();

             Uri data = Uri.withAppendedPath(DictionaryProvider.CONTENT_URI,
                                             String.valueOf(id));

             Log.d(TAG,"clicked row id="+id);

             wordIntent.setData(data);
             wordIntent.putExtra("clicked_item_id",id);

             startActivity(wordIntent);
         }
     }); 
```

如您所见，我们可以处理在匹配词列表中单击的项目，但是我如何处理在小建议列表中单击的建议？我想捕捉点击建议的 id，而不是大列表视图中点击的项目。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T04:18:14.373

单击搜索建议时，会向您的可搜索活动发送一个 Intent。您可以通过配置 android:searchSuggestIntentAction 属性，通过可搜索的 XML 简单地定义此 Intent 的 Action 字段，如下所示：

```
<searchable 
...
    android:searchSuggestIntentAction = "android.intent.action.VIEW"> 
```

然后，在您的可搜索活动中：

```
Intent intent = getIntent();
if (Intent.ACTION_VIEW.equals(intent.getAction()) {
    //a suggestion was clicked... do something about it...
} 
```

# java - 为什么我在发送接收短信的 j2me 中得到“尚不支持”异常？

> ID：11901837
> 
> 赞同：1
> 
> 时间：2012-08-10T12:37:47.503
> 
> 标签：java, netbeans, java-me, netbeans-7, wma

我尝试在 j2me 中发送和接收短信，但是当 Netbeans 为我建议方法时，它也会在其中添加一个异常：

```
 ms.setMessageListener(new MessageListener() {

     public void notifyIncomingMessage(MessageConnection mc) {
         throw new UnsupportedOperationException("Not supported yet.");
     }
 }); 
```

我几乎可以肯定 j2me WMA 支持这种方法。那么Netbeans抛出这个异常是什么问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T13:03:02.450

NetBeans 只是创建一个模板供您编辑，您可以有自己的实现来代替不受支持的异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T12:47:23.310

netbeans 生成器将其放入，因此您可以对其进行更改以执行您想做的事情。如果您忘记更改它，异常会提醒您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T09:27:15.883

它只是 NetBeans 提醒您需要提供其实现。

# ruby - 从开始的文本文件中删除注释，用 Ruby 或其他方式

> ID：11901839
> 
> 赞同：1
> 
> 时间：2012-08-10T12:38:02.460
> 
> 标签：ruby, database, import

我的问题是：我有许多非常大的数据文件（总计几千兆字节），除了实际数据之外，文件开头还包含一些注释行。

所以它们看起来像这样：

```
# This is a file containing data.
# Here's how to use it:
# ...
# Now, let's get to the actual data:
DATA DATA DATA 
```

我要完成的任务是尽快从这些文件中删除评论，因为我用来将它们提取到我的数据库中的工具无法处理这些评论。

我目前的方法是这样的：

```
# For each data file...
system "sed '/^\\#/d' #{filename} > #{filename}.tmp"
system "mv #{filename}.tmp #{filename}" 
```

这可行，但总共需要大约 1 小时，因为文件太大了。我的假设是必须有一种更有效的方法来执行此操作，因为我确定注释**仅位于文件的开头**，因此无需在整个文件中搜索它们。

我不太在意该解决方案是使用纯 Ruby 还是像上面那样的 shell 命令，只要它比当前方法工作​​得快得多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T13:39:53.960

唔。你的方法是正确的。对于大文件来说，分叉系统工具是一个很好的策略。

我想知道这么简单的转码怎么会这么慢。有些东西要探索...

*   您确定 sed(1) 步骤是缓慢的部分吗？如果确实是导入速度很慢，请确保您没有将每一行都变成单独的事务
*   您的文件是否在某种网络卷上？如果是这样，您可以在服务器而不是客户端上运行脚本吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T14:44:32.517

是的，你可以像这样很快地做到这一点，我想你只想让 # 离开，否则要适应，但请记住，写入的字符串需要与读取的字符串完全一样长。

```
File.open('big.txt', 'rb+') do |file|
  loop do
    line = file.readline
    if (line[0]=='#')
      file.seek(-line.length, IO::SEEK_CUR)
      file.write line.sub!(/#/," ")
    else
      break
    end
  end
end 
```

# asp.net - 过滤后gridview选择的行

> ID：11901845
> 
> 赞同：0
> 
> 时间：2012-08-10T12:38:51.887
> 
> 标签：asp.net, gridview

我`gridview`有一些限制`sqldatasource`。
在第一列中，我有编辑按钮，在`GridView_SelectedIndexChanged`事件中，我根据行构建了一些查询字符串。
我得到这样的行：`GridViewRow row = GridView.SelectedRow`;

它工作正常但
有时我过滤gridView（通过更改sqldatasource中的selectcommand）
过滤工作正常但`GridViewRow row = GridView.SelectedRow`得到一行，就像所有行都可见。
示例：（当我点击 2 行时）
没有过滤器：

```
1
2
3
4 
```

`row.Cells[1].Text`- 我得到 2 好！
带过滤器：

```
1
4 
```

`row.Cells[1].Text`- 我得到 2 <- 也许你知道如何处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-11-08T19:28:17.377

我遇到了同样的问题，但我通过在page_load中删除一个将sql数据加载到gridview的函数来解决，即我创建了一个将数据从sql server加载到gridview的函数。当我从网格中选择过滤的行来填充到文本框时，它会用于填充不正确的行。创建用于将所有行加载到网格的函数。The Filtered rows were correct, and when select and populate a row to textbox it used to get changed as it used to autopostback(refresh).

# python - BeautifulSoup，来自 HTML 表的字典

> ID：11901846
> 
> 赞同：18
> 
> 时间：2012-08-10T12:38:52.240
> 
> 标签：python, beautifulsoup

我正在尝试从网站上抓取表格数据。

这是一个简单的示例表：

```
t = '<html><table>' +\
    '<tr><td class="label"> a </td> <td> 1 </td></tr>' +\
    '<tr><td class="label"> b </td> <td> 2 </td></tr>' +\
    '<tr><td class="label"> c </td> <td> 3 </td></tr>' +\
    '<tr><td class="label"> d </td> <td> 4 </td></tr>' +\
    '</table></html>' 
```

所需的解析结果是`{' a ': ' 1 ', ' b ': ' 2 ', ' c ': ' 3 ', ' d ' : ' 4' }`

* * *

这是我迄今为止最接近的尝试：

```
for tr in s.findAll('tr'):
  k, v = BeautifulSoup(str(tr)).findAll('td')
  d[str(k)] = str(v) 
```

结果是：

```
{'<td class="label"> a </td>': '<td> 1 </td>', '<td class="label"> d </td>': '<td> 4 </td>', '<td class="label"> b </td>': '<td> 2 </td>', '<td class="label"> c </td>': '<td> 3 </td>'} 
```

我知道的`text=True`参数，`findAll()`但我在使用它时没有得到预期的结果。

我正在使用 python 2.6 和 BeautifulSoup3。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-10T12:43:10.140

试试这个：

```
from BeautifulSoup import BeautifulSoup, Comment

t = '<html><table>' +\
    '<tr><td class="label"> a </td> <td> 1 </td></tr>' +\
    '<tr><td class="label"> b </td> <td> 2 </td></tr>' +\
    '<tr><td class="label"> c </td> <td> 3 </td></tr>' +\
    '<tr><td class="label"> d </td> <td> 4 </td></tr>' +\
    '</table></html>'

bs = BeautifulSoup(t)

results = {}
for row in bs.findAll('tr'):
    aux = row.findAll('td')
    results[aux[0].string] = aux[1].string

print results 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2019-07-01T12:17:06.237

`BeautifulSoup`和 Python 已经发展，所以如果有人带着更新的版本来到这里：

```
Python>=3.7
BeautifulSoup>=4.7 
```

这是有效的更新代码：

```
# import bs4 and create your 'soup' object

table = soup.find('table')

headers = [header.text for header in table.find_all('th')]
results = [{headers[i]: cell for i, cell in enumerate(row.find_all('td'))}
           for row in table.find_all('tr')] 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-11-30T15:27:31.783

如果你正在抓取一个有明确的“thead”和“tbody”的表，例如：

```
<table>
    <thead>
        <tr>
            <th>Total</th>
            <th>Finished</th>
            <th>Unfinished</th>
        </tr>
    </thead>
    <tbody>
        <tr> <td>63</td> <td>33</td> <td>2</td> </tr>
        <tr> <td>69</td> <td>29</td> <td>3</td> </tr>
        <tr> <td>57</td> <td>28</td> <td>1</td> </tr>
    </tbody>
</table> 
```

您可以使用以下内容：

```
headers = [header.text_content() for header in table.cssselect("thead tr th")]
results = [{headers[i]: cell.text_content() for i, cell in enumerate(row.cssselect("td"))} for row in table.cssselect("tbody tr")] 
```

这将产生：

```
[
  {"Total": "63", "Finished": "33", "Unfinished": "2"},
  {"Total": "69", "Finished": "29", "Unfinished": "3"},
  {"Total": "57", "Finished": "28", "Unfinished": "1"}
] 
```

PS这是使用lxml.html。如果您使用 BeautifulSoup，请将“.text_content()”替换为“.string”，将“.cssselect”替换为“.findAll”。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-11-18T16:37:04.457

[您可以采用与mvillaress](https://stackoverflow.com/users/1578965/mvillaress)相同的方法，但使用[List Comprehensions](https://docs.python.org/2/tutorial/datastructures.html#list-comprehensions)对其进行一些改进：

```
from BeautifulSoup import BeautifulSoup

t = '<html><table>' +\
    '<tr><td class="label"> a </td> <td> 1 </td></tr>' +\
    '<tr><td class="label"> b </td> <td> 2 </td></tr>' +\
    '<tr><td class="label"> c </td> <td> 3 </td></tr>' +\
    '<tr><td class="label"> d </td> <td> 4 </td></tr>' +\
    '</table></html>'

bs = BeautifulSoup(t)
tds = [row.findAll('td') for row in bs.findAll('tr')]
results = { td[0].string: td[1].string for td in tds }
print results 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-17T16:43:51.140

这是我认为更接近原始尝试的解决方案：

```
d={}
for tr in soup.findAll('tr'):
    key = tr.text.split()[0]
    val = tr.text.split()[1]
    d[key] = val

print(d) 
```

# crawler4j - crawler4j 爬取 url 列表而不爬取整个网站

> ID：11901848
> 
> 赞同：1
> 
> 时间：2012-08-10T12:38:54.887
> 
> 标签：crawler4j

我有一个需要抓取的网址列表。是否可以仅抓取网页列表而不进行深度抓取。如果我将 url 添加为种子，它会以完整的深度抓取整个网站。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T14:15:57.670

要仅抓取您作为种子添加的页面，请将 MaxDepthOfCrawling 设置为 0。

```
CrawlConfig config = new CrawlConfig();
config.setMaxDepthOfCrawling(0);
PageFetcher pageFetcher = new PageFetcher(config); 
```

# javascript - 使用 jQuery 的多个 AJAX XML 请求

> ID：11901853
> 
> 赞同：-1
> 
> 时间：2012-08-10T12:39:08.217
> 
> 标签：javascript, jquery, xml, ajax, recursive-query

我正在尝试使用 jQuery 在 Javascript 中创建一个 XML 解析器，并接收一个包含一些信息的 xml 文件以及指向其他 XML 文件的任意数量的链接。当解析器运行时，它可以找到例如 3 个带有指向其他 XML 文件的链接的标签。这些将开始处理和打印，直到所有链接都发布在页面上。这意味着在解析第一个 xml 文件时，底层的 XML 文件将被递归地打印出来。所有的xml文件都具有相同的结构，底层也可能有链接，就像第一个xml文件一样。

是否有可能以这种方式递归检索和处理相互链接的 XML 文件，如果可以，如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T15:28:21.400

您可以使用像[Sarissa](http://dev.abiss.gr/sarissa/)这样的跨浏览器 xml 解析库来处理为每个浏览器设置 DOM 解析器。然后，当您找到具有另一个 XML 链接的节点时，您可以调用您的函数，该函数应该执行以下操作：

1.  检索 XML 文档
2.  设置 DOM 解析器
3.  解析文件
4.  如果找到链接，请再次调用此函数（递归）
5.  如果 EOF 停止（停止条件）

# html - CSS边框 - 如何用边框填充div内的内容

> ID：11901857
> 
> 赞同：0
> 
> 时间：2012-08-10T12:39:20.013
> 
> 标签：html, css

我有 [这个](http://i45.tinypic.com/2prvkg9.png)：

现在，我想要两件事... 左 div（导航） 我想要边框一直到底部。其次，我希望#content div 中的内容和页脚必须在它之后。

为什么内容总是到内容和页脚？

谢谢你。

编辑：

CSS：

```
 #header { padding: 0px; color: #000; background: #fff;}
  #topnav { color: #aaa; background: transparent; position: inherit;}
  #main { margin: 10px 0; background: #fff;  height: 50%;}
  #footer { padding: 10px 0px 10px 0px; margin-top: 25px; color:#666; background: #f9f9f9; border-top: 5px #efefef solid; }

  #col1 { float: left; width: 13%;}
  #col2 { display:none}
  #col3 { width: auto; margin: 0 0 0 15%}
  #col1_content { padding: 0 10px 0 20px;}
  #col3_content { padding: 0 20px 0 10px;}
  #col1 { border-right: 5px #ddd ridge } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T12:53:09.087

以绝对定位放置您的页脚，以便它像所有页脚一样固定在最底部，除非您有不同的想法。

```
#footer { position:absolute; bottom: 0px; left: 0px; } 
```

# android - 在android中动态创建带有片段的Lis tView

> ID：11901864
> 
> 赞同：1
> 
> 时间：2012-08-10T12:40:13.840
> 
> 标签：android, android-fragments, android-listfragment

我需要在我的示例屏幕截图视图中`ListView`创建`Fragment`。

屏幕截图是

![在此处输入图像描述](../Images/0fc678e9f38ca3a9eb58782debb8fd63.png)

我知道这是可能的。但是如何动态地锻炼这种类型的 Fragment。

我不知道。在这个问题和答案对我来说非常有价值。请给出我的解决方案。

如果我把我的问题弄错了，对不起。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:56:21.540

该答案适用于所有寻找相同问题答案的人。答案是通过 FragmentManager 和 FragmentTransaction 使用以下语法实现的。

```
FragmentManager fragmentManager = getFragmentManager();
FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction(); 
```

那么您需要使用以下语法将您的片段添加到此片段事务中。

```
fragmentTransaction.replace(R.id.detailFragment, layout1); 
```

最后你必须提交你的交易。否则更改将不会持续。

```
fragmentTransaction.commit(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T12:49:13.753

我建议你阅读这篇文章：[这里](http://developer.android.com/guide/components/fragments.html) 然后看看这个例子： [这里](http://code.google.com/p/demofragment/source/browse/trunk/DemoFragment/?r=4)

# iphone - 滚动 uitableview 时 UIProgressView 被隐藏

> ID：11901867
> 
> 赞同：1
> 
> 时间：2012-08-10T12:40:18.340
> 
> 标签：iphone, ios, ios4, uitableview

我正在尝试使用 asinetworkqueue 下载 url 列表。它下载很好。但是当我滚动 uitableview 时，我的 uiprogressview 被隐藏了。

我的意思是如果进度显示在第 2 行中，并且如果我滚动它，那么进度视图将被隐藏。然后在完成第 2 行的下载后，它会在第 3 行显示进度视图。

简而言之，当滚动 uitableview 时，活动的 uiprogressview 被隐藏了。

## 更新

这里有一些更多的说明。当一行（例如第 1 行）的下载未完成时，现在如果我滚动 tableview 并查看第 1 行，即使尚未完成下载，progressview 也会被隐藏。一旦第 1 行的下载完成，它就会开始对第 2 行进行下载，现在显示进度视图。

```
 - (void)viewDidLoad
    {
        [super viewDidLoad];

        self.view.backgroundColor = [UIColor clearColor];

        self.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"bg.jpg"]];

        CGRect tblViewFrame = CGRectMake(7 , 0 , self.view.bounds.size.width - 14, self.view.bounds.size.height - 90);
        self.tblViewDownload = [[[UITableView alloc]initWithFrame:tblViewFrame style:UITableViewStyleGrouped]autorelease];
        self.tblViewDownload.backgroundColor = [UIColor clearColor];
        self.tblViewDownload.showsVerticalScrollIndicator = FALSE;
        self.tblViewDownload.scrollEnabled = YES;
        self.tblViewDownload.delegate = self;
        self.tblViewDownload.dataSource = self;
        [self.view addSubview:self.tblViewDownload];

        index = 0;

        dispatch_async(dispatch_get_global_queue( DISPATCH_QUEUE_PRIORITY_LOW, 0), ^{
            [self loadArray];
        }); // Do any additional setup after loading the view.
    }

    - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView

    {
        // Return the number of sections.
        return 1;
    }

    - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section

    {
        // Return the number of rows in the section.
        return [self.myUrlArray count];
    }

    - (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:
    (NSIndexPath *)indexPath

    {
        CGFloat rowHeight = 75.0;

        return rowHeight;  
    }

    // Customize the appearance of table view cells.
    - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:
    (NSIndexPath *)indexPath

    {
        NSString *CellIdentifier = [NSString stringWithFormat:@"Cell%d", indexPath.row];

        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

        UILabel *lblTitle, *lblAuthor;

        if (cell == nil)
        {
            cell = [[[UITableViewCell alloc] initWithFrame:CGRectZero]autorelease];

            cell.selectionStyle = UITableViewCellSelectionStyleNone;

            lblTitle = [[[UILabel alloc]initWithFrame:CGRectMake(65, 10, 220, 25)]autorelease];
            lblTitle.backgroundColor = [UIColor clearColor];
            //lblTitle.font = [UIFont boldSystemFontOfSize:15.0];
            lblTitle.font = [UIFont fontWithName:@"Palatino-Bold" size:15.0];
            lblTitle.text = @"Sample title";
            [cell.contentView addSubview:lblTitle];

            lblAuthor = [[[UILabel alloc]initWithFrame:CGRectMake(65, 30, 220, 25)]autorelease];
            lblAuthor.backgroundColor = [UIColor clearColor];
            lblAuthor.font = [UIFont italicSystemFontOfSize:13.0];
            lblAuthor.textColor = [UIColor grayColor];
            lblAuthor.text = @"sample authior";
            [cell.contentView addSubview:lblAuthor];

        }

        return cell;
    }

    -(void)loadArray{

      NSString *urk = @"http://sample/iphone/video/video_2.mov";
      self.myUrlArray = [[NSMutableArray alloc]init];

      for( int i = 0;i<10;i++){
        [self.myUrlArray addObject:urk];
      }

      dispatch_async(dispatch_get_global_queue( DISPATCH_QUEUE_PRIORITY_LOW, 0), ^{
        [self downLoadPoems];
      });

    }

    -(void)downLoadPoems{

        if( index < [myUrlArray count] )
        {
            NSLog(@"this is the index %d",index);

        NSIndexPath *myIP = [NSIndexPath indexPathForRow:index inSection:0];

        UITableViewCell *Cell = [self.tblViewDownload cellForRowAtIndexPath:myIP];

        progress = [[UIProgressView alloc]initWithProgressViewStyle:UIProgressViewStyleBar];
        progress.frame = CGRectMake(65, 55, 210, 25);
        progress.progress = 0.0;
        progress.backgroundColor = [UIColor redColor];
        [Cell.contentView addSubview:progress];
        }

        if(!self.networkQueue)
            self.networkQueue = [[[ASINetworkQueue alloc] init] autorelease];

        [self.networkQueue cancelAllOperations];
        [self.networkQueue setQueueDidFinishSelector:@selector(queueCompleted:)];
        [self.networkQueue setShowAccurateProgress:YES];
        [self.networkQueue setDownloadProgressDelegate:progress];

        [self.networkQueue setDelegate:self];

        if( index < [myUrlArray count] )
        {        
            NSString *url = [myUrlArray objectAtIndex:index];

            NSArray *aPoemArrayUrls = [NSArray arrayWithObjects:url,nil];

            for(NSString* urlString in aPoemArrayUrls)
            {
                NSURL *url = [NSURL URLWithString:urlString];
                ASIHTTPRequest *downloadAFileRequest = [[ASIHTTPRequest requestWithURL:url]retain];
                NSString *Filename = [urlString lastPathComponent];
                NSLog(@"%@ filename",Filename);
                [downloadAFileRequest setUserInfo:[NSDictionary dictionaryWithObject:@"request1" forKey:@"name"]];
                [downloadAFileRequest setDownloadDestinationPath:[[NSHomeDirectory() stringByAppendingPathComponent:@"Documents"] stringByAppendingPathComponent:Filename]];
                [downloadAFileRequest setShouldContinueWhenAppEntersBackground:YES];
                [downloadAFileRequest setDelegate:self];
                [downloadAFileRequest setDidFinishSelector:@selector(requestDone:)];
                [downloadAFileRequest setDidFailSelector:@selector(requestWentWrong:)];
                [downloadAFileRequest setShowAccurateProgress:YES];

                [self.networkQueue addOperation:downloadAFileRequest];
                //----
            }

            [self.networkQueue go];

        }

    }

    -(void)queueCompleted:(ASINetworkQueue*)queue{

        NSLog(@"queueCompleted");

       self.tblViewDownload.userInteractionEnabled = YES;

        UIProgressView *progressv = (UIProgressView*)queue.downloadProgressDelegate;

        if (progressv)
            [progressv removeFromSuperview];

        if ( index < [myUrlArray count] ){

            index++;

            [self downLoadPoems];
        }

    }

    - (void)requestDone:(ASIHTTPRequest *)request
    {
        NSLog(@"request done");
        NSString *response = [request responseString];
    }

    - (void)requestWentWrong:(ASIHTTPRequest *)request
    {
        NSLog(@"request went wrong");

        NSError *error = [request error];
    }

    - (void)viewDidUnload
    {
        [super viewDidUnload];
        // Release any retained subviews of the main view.
    }

    - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
    {
        return (interfaceOrientation == UIInterfaceOrientationPortrait);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T22:07:35.150

几点观察：

1.  您设置`setDownloadProgressDelegate`在 中`ASINetworkQueue`，但如果您想跟踪各个下载的进度，您可能希望改为在 中进行`ASIHTTPRequest`。这样，您理论上可以相应地更新多个下载。

2.  我这么说的原因之一是您当前正在创建`networkQueue`添加单曲`ASIHTTPRequest`并将其启动。从理论上讲，您可以将一大堆排队`ASIHTTPRequest`并踢掉它们，每个更新自己的`UIProgressView`.

3.  最大的问题是你的`cellForRowAtIndexPath`.

    *   首先，您不应该真正为每个使用唯一的单元格标识符。你失去了所有的内存优化；

    *   您应该检查是否`dequeueReusableCellWithIdentifier`返回`nil`（如果您使用带有原型单元的情节提要，这不是问题，但我假设您在这里没有这样做），如果这样做，则创建表格视图和您需要的任何控件；

    *   `dequeueReusableCellWithIdentifier`但是，无论是否返回，您都应该设置标签并更新进度条`nil`；和

    *   就个人而言，使用进度条，如果进度条已经存在，我发现它更容易删除，然后再次添加它，无论是否`dequeueReusableCellWithIdentifier`成功。

4.  您可能想要跟踪“行”对象的数组，例如，这些对象具有正在下载的 URL，但更重要的是，保留的`UIProgressView`对象（因为烦人的是，它`downloadProgressDelegate`是一个`assign`属性，不会被保留因此，您需要跟踪当前正在进行的所有请求的进度条（无论单元格是否可见，是否已出列），而不仅仅是一个 UIProgressView。

5.  顺便说一句，看起来您正在将东西分派到后台队列。你真的不需要这样做，因为`ASINetworkQueue`所有这些东西都为你做。您可能想要这样做可能有技术原因，但我认为没有必要，因为我认为这些东西已经异步工作。如果您真的想在另一个队列中启动它，那很好，但请记住将您的 UI 更新分派回主队列，因为您永远不应该从后台进行 UI 更新。

仅供参考，在下面的代码示例中，我使用了我经常用于表格视图的代码模式，特别是我的表格视图有一个模型，该模型由一个 NSArray`Row`对象组成，它跟踪我需要为表格视图的每个单元格做什么。

```
@interface Row : NSObject

@property (nonatomic, strong) NSString *author;
@property (nonatomic, strong) NSString *title;
@property (nonatomic, strong) UIProgressView *progress;
@property (nonatomic, strong) NSString *urlString;

@end 
```

我将按如下方式使用它：

```
@interface SampleViewController ()

@property (nonatomic, strong) NSArray *rows;
@property (nonatomic, strong) ASINetworkQueue *networkQueue;

@end

@implementation SampleViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.rows = [self loadImageUrls];

    [self downloadStuff];
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    return [self.rows count];
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return 75.0;
}

#define kTitleTag 1
#define kAuthorTag 2
#define kProgressViewTag 3

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *CellIdentifier = @"asi";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    UILabel *lblTitle, *lblAuthor;

    // if you could use storyboards, a lot of this silliness goes away

    if (cell == nil)
    {
        // but in the world of nibs, you have to create the custom controls when you create the cell

        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

        cell.selectionStyle = UITableViewCellSelectionStyleNone;

        lblTitle = [[UILabel alloc]initWithFrame:CGRectMake(65, 10, 220, 25)];
        lblTitle.backgroundColor = [UIColor clearColor];
        lblTitle.font = [UIFont boldSystemFontOfSize:15.0];
        //lblTitle.font = [UIFont fontWithName:@"Palatino-Bold" size:15.0];
        lblTitle.tag  = kTitleTag;
        [cell.contentView addSubview:lblTitle];

        lblAuthor = [[UILabel alloc]initWithFrame:CGRectMake(65, 30, 220, 25)];
        lblAuthor.backgroundColor = [UIColor clearColor];
        lblAuthor.font = [UIFont italicSystemFontOfSize:13.0];
        lblAuthor.textColor = [UIColor grayColor];
        lblAuthor.tag = kAuthorTag;
        [cell.contentView addSubview:lblAuthor];
    }
    else
    {
        // if you're recycling a cell, then link up with it's controls

        cell.textLabel.backgroundColor = [UIColor clearColor];
        cell.detailTextLabel.backgroundColor = [UIColor clearColor];

        lblTitle = (UILabel *)[cell.contentView viewWithTag:kTitleTag];
        lblAuthor = (UILabel *)[cell.contentView viewWithTag:kAuthorTag];

        UIProgressView *oldProgressView = (UIProgressView *)[cell.contentView viewWithTag:kProgressViewTag];
        if (oldProgressView && [oldProgressView isKindOfClass:[UIProgressView class]])
        {
            [oldProgressView removeFromSuperview];
        }
    }

    Row *row = [self.rows objectAtIndex:indexPath.row];

    lblTitle.text = row.title;
    lblAuthor.text = row.author;

    if (row.progress)
    {
        row.progress.frame = CGRectMake(0, 55, 200, 25);
        [cell.contentView addSubview:row.progress];
    }

    return cell;
}

-(void)downloadStuff
{    
    ASINetworkQueue *networkQueue = [[ASINetworkQueue alloc] init];

    [networkQueue setQueueDidFinishSelector:@selector(queueCompleted:)];
    [networkQueue setDelegate:self];

    NSFileManager *fileManager = [NSFileManager defaultManager];
    [fileManager createDirectoryAtPath:[[NSHomeDirectory() stringByAppendingPathComponent:@"Documents"] stringByAppendingPathComponent:@"ASIHTTP"]
           withIntermediateDirectories:NO
                            attributes:nil
                                 error:nil];

    for (NSUInteger i = 0; i < [self.rows count]; i++)
    {
        Row *row = [self.rows objectAtIndex:i];

        row.progress = [[UIProgressView alloc] initWithProgressViewStyle:UIProgressViewStyleBar];
        row.progress.tag = kProgressViewTag;

        NSIndexPath *myIP = [NSIndexPath indexPathForRow:i inSection:0];
        UITableViewCell *cell = [self.tableView cellForRowAtIndexPath:myIP];
        if (cell)
        {
            // if the cell is visible, add the progress view to it

            row.progress.frame = CGRectMake(0, 55, 200, 25);
            [cell.contentView addSubview:row.progress];
        }

        NSString *urlString = row.urlString;

        ASIHTTPRequest *request;
        request = [ASIHTTPRequest requestWithURL:[NSURL URLWithString:urlString]];
        NSString *filename = [urlString lastPathComponent];
        [request setUserInfo:[NSDictionary dictionaryWithObject:@"request1" forKey:@"name"]];
        [request setDownloadDestinationPath:[[[[NSHomeDirectory() stringByAppendingPathComponent:@"Documents"] stringByAppendingPathComponent:@"ASIHTTP"] stringByAppendingPathComponent:filename] stringByAppendingFormat:@"%1d", i]];
        [request setShouldContinueWhenAppEntersBackground:YES];
        [request setDelegate:self];
        [request setDidFinishSelector:@selector(requestDone:)];
        [request setDidFailSelector:@selector(requestWentWrong:)];
        [request setDownloadProgressDelegate:row.progress];
        [request setShowAccurateProgress:YES];

        [networkQueue addOperation:request];
    }

    [networkQueue go];
}

-(void)queueCompleted:(ASINetworkQueue*)queue
{    
    NSLog(@"%s queueCompleted", __FUNCTION__);
}

- (void)requestDone:(ASIHTTPRequest *)request
{
    NSLog(@"%s request done: %@", __FUNCTION__, [request responseString]);

    [request.downloadProgressDelegate removeFromSuperview];

    // find which row it's on and remove it from that one

    for (Row *row in self.rows)
    {
        if (row.progress == request.downloadProgressDelegate)
            row.progress = nil;
    }

    // and let it go (obviously, non-ARC, release)

    request.downloadProgressDelegate = nil;
}

- (void)requestWentWrong:(ASIHTTPRequest *)request
{
    NSLog(@"%s request went wrong err = %@", __FUNCTION__, [request error]);
}

- (NSArray *)loadImageUrls
{
    NSMutableArray *results = [[NSMutableArray alloc] init];

    for (NSInteger i = 0; i < 100; i++)
    {
        Row *row = [[Row alloc] init];
        row.urlString = @"http://host/test/bigfile";
        row.title = [NSString stringWithFormat:@"Title %1d", i];
        row.author = [NSString stringWithFormat:@"Author %1d", i];

        [results addObject:row];
    }

    return results;
} 
```

显然，您必须为自己的目的自定义它（例如，我为自己的目的进行了调整；生命太短了，我无法浪费时间编写非 ARC 代码；等等），但它向您展示了我个人如何解决我的问题视为您提供的代码示例的主要缺陷。我认为这需要相当大的扩展（`ASINetworkQueue`如果我们离开，请优雅地取消，也许只加载`ASIHTTPRequests`可见单元格等），但我会把它留给你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T13:43:44.867

每次 tableView 要求您提供一个单元格时，您都在上面创建一个新单元格 - 您应该回收单元格是不正确的（Apple 文档中的此处和其他地方有大量示例说明如何执行此操作。）

现在，更新单元格中的进度条有一些您没有处理的复杂性。首先，progressBar 的对象会随着表格的滚动而改变——它会从你的下方改变。假设您有一个部分可以使步骤更容易（但这些也适用于多个部分）：

因此，您只能通过执行以下操作来更新它：

*   您的下载想要更新进度。它必须确定具有该进度条的表格行（如果您将进度条添加到单元格，则在该视图上设置标签以便以后更容易找到它）

*   然后上面的代码向 UITableView 询问可见单元格的列表，并确定它需要更新的单元格是否可见 - 如果不可见，则它什么也不做。

*   假设单元格是可见的，它会向单元格询问其进度条（即 [cell.contentView viewWithTag:...]），然后更新当前值（此进度条可能以前由于回收而显示其他文件）。

在您的 cellForRowAtIndexPath: 中，您尝试回收一个单元格，如果失败，您将创建一个新单元格。在该代码之后，您不能对任何视图做出任何假设 - 您需要更新 progressBar 最大值，将当前值设置为下载的当前值，更改任何标签文本等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T13:20:38.360

使用此方法

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:
    (NSIndexPath *)indexPath

{
    NSString *CellIdentifier = [NSString stringWithFormat:@"Cell%d", indexPath.row];

    UITableViewCell *cell = [[[UITableViewCell alloc] initWithFrame:CGRectZero]autorelease];

    UILabel *lblTitle, *lblAuthor;

        cell.selectionStyle = UITableViewCellSelectionStyleNone;

        lblTitle = [[[UILabel alloc]initWithFrame:CGRectMake(65, 10, 220, 25)]autorelease];
        lblTitle.backgroundColor = [UIColor clearColor];
        //lblTitle.font = [UIFont boldSystemFontOfSize:15.0];
        lblTitle.font = [UIFont fontWithName:@"Palatino-Bold" size:15.0];
        lblTitle.text = @"Sample title";
        [cell.contentView addSubview:lblTitle];

        lblAuthor = [[[UILabel alloc]initWithFrame:CGRectMake(65, 30, 220, 25)]autorelease];
        lblAuthor.backgroundColor = [UIColor clearColor];
        lblAuthor.font = [UIFont italicSystemFontOfSize:13.0];
        lblAuthor.textColor = [UIColor grayColor];
        lblAuthor.text = @"sample authior";
        [cell.contentView addSubview:lblAuthor];

    return cell;
} 
```

# javascript - 'this' 在 Node.js HTTP 回调中丢失上下文

> ID：11901869
> 
> 赞同：2
> 
> 时间：2012-08-10T12:40:33.270
> 
> 标签：javascript, node.js, scope, prototype

`self.test()`不会在内部触发`http.createServer()`：

```
App.prototype.createServer = function(){
    var self = this;

    var s = http.createServer(function(req,res){

                self.test(); // THIS DOESN`T WORK.

                req.addListener('end',function(){
                    res.writeHead(200,{'Content-Type' : 'application/x-javascript'});

                    self.test(); // THIS DOESN`T WORK.
                });

            });

                 self.test(); // THIS WORKS.
    return s;
};
App.prototype.test = function() {
    console.log('test')
}; 
```

如果我把它移出 `http.createServer()`它就可以了。为什么是这样？ `this`存储在`self`其中应该使它不会丢失上下文。我在这里想念什么？如有必要，我可以提供额外的代码和更多功能（`self.init`等）。

* * *

# 更新

实例：

```
new App({
    port: 8000
}); 
```

初始化：

```
function App(options){
    if (! (this instanceof arguments.callee)) {
        return new arguments.callee(arguments);
    }
    var self = this;
    self.settings = {
        port : options.port
    }
    self.init();
};
App.prototype.init = function() {
        var self = this;
        self.server = self.createServer();
        self.server.listen(self.settings.port);
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T12:46:08.647

`req``end`只有当它有一个主体时才会发出一个事件。`GET`requests 不会发出它，但`POST`会。

此外，您应该调用[listen](http://nodejs.org/api/http.html#http_server_listen_port_hostname_backlog_callback)将您的服务器绑定到套接字。你是如何向你的服务器发出请求的？

# eclipse - java.lang.NullPointerException 将 windows azure 发布到云

> ID：11901871
> 
> 赞同：1
> 
> 时间：2012-08-10T12:40:38.620
> 
> 标签：eclipse, azure

我在笔记本电脑上使用 eclipse juno-j2ee（32 位）和 apache tomcat server 6.0（32 位）。我编写了简单的jsp，它显示了hello world，并将该项目打包为windows azure。现在，当我在 Windows azure 模拟器中运行它时，我可以在我的 localhost:8080/HelloWorld 上查看它。但是，当我在 Eclipse 中单击“发布到 Windows azure 云”按钮时，它开始构建项目，之后，它显示以 40% 的速度上传项目超过 1/2 小时，然后显示 java.lang.NullPointerException。上传有什么问题？我还尝试了另一种方式，将配置和包文件直接上传到预览站点。即使它在一段时间后失败。如何将我的项目部署到云端？还有其他方法吗？

# c# - 一个坚实和有组织的架构应该是怎样的？

> ID：11901872
> 
> 赞同：1
> 
> 时间：2012-08-10T12:40:41.033
> 
> 标签：c#, asp.net-mvc-3, entity-framework, architecture

在工作中，我们即将重写一个旧应用程序，我被告知要获得一些关于如何做到这一点的想法。

我的想法如下：

由于该应用程序将主要是一个网站，因此我将使用 MVC。用于 DI 和 IoC 的带有 POCO 实体的 EF。Web 应用程序和其他客户端将使用的服务的 WCF。

到目前为止，架构应该如下所示： - Demo.Web - Demo.Entities - Demo.Services

现在我的架构是这样的：

**命名空间 Demo.Entities**

```
// IEntity.cs
public interface IEntity { }

//User.cs
public virtual long UserId { get; private set; }
public virtual string Name { get; private set; }

public User() { }
public User(long userId, string name)
{
    UserId = userId;
    Name = name;
} 
```

**命名空间 Demo.Services**

```
// IService.cs
public interface IService<T> : IDisposable where T : IEntity
{
    List<T> GetList();
}

// UserService.cs
public class UserService : IService<User>
{
    public List<User> GetList()
    {
        return new List<User>(); // Simplicity
    }

    public void Dispose() { }
} 
```

**当我需要使用它时，我会这样做：**

```
using(IService<User> service = new UserService())
{
    var q = service.GetList();
} 
```

至于 MVC，我将使用 Demo.Models 中的模型，如果需要实际模型，我会将它们链接到我的 MVC 应用程序的 Models 文件夹，但现在 MVC 是我最不关心的问题。

到目前为止，我已经检测到一个问题，如果不实例化指定的服务，我将无法查询多个实体。从好的方面来说，我可以完全控制处理我的数据的内容和方式。

**实际问题**

如果有的话，谁能指出我支持这些功能的任何架构设计？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T13:10:06.157

我非常喜欢[这里](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=91)和[这里](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=92)描述的 SOLID 架构原则。在您做出最终决定之前，它们值得一试。DotNetJunkie 还将在不久的将来发布另一篇关于如何将这些模式与 WCF 一起使用的博客文章。他描述的接口和模式已经足够解耦，可以将它们与 EF 或 NHibernate 一起使用。

我在您的帖子中看到的一个问题是 IEntity 接口。我认为你不需要为你的基本实体提供一个接口，通常一个抽象基类就足够了（即使用 Layer Supertype 模式）。我从来没有找到让所有实体都订阅单个接口合同的理由。

在您的示例中，我也没有看到任何依赖注入。任何使用`using(IService<User> ctx = new UserService())`的代码都依赖于接口和实现。您希望 MVC 或其他客户端代码仅对接口具有硬依赖，并通过控制容器的反转解析/注入具体实现。这是[trailmax 发布的洋葱架构中](https://stackoverflow.com/a/11902274/304832)常见的一种模式。

我确实喜欢你有一个项目“三脚架”的想法。尽量不要让您的解决方案中的项目数量超过大约 5 个项目（不包括单元测试项目，这些不包括在内）。

> 到目前为止，我已经检测到一个问题，如果不实例化指定的服务，我将无法查询多个实体。从好的方面来说，我可以完全控制处理我的数据的内容和方式。

同样，这些问题可以通过阅读和采用我上面提到的文章中描述的`ICommandHandler`和`IQueryHandler`/`IQueryProcessor`模式来解决。您根本不必实例化任何服务。您只需将构造函数注入`IQueryProcessor`到`ICommandHandler<TCommand>`您的控制器中，然后让 IoC 容器提供实现。如果您有一个需要查询多个实体的操作，您只需在查询`Handle`方法中访问 EF 或 NHibernate 即可。

这是我使用这些模式的一个项目的示例：

**MyApp.Domain.csproj**

包含所有实体以及 DotNetJunkie 接口和命令 + 查询实现的类库。这*不依赖*于实体框架或任何其他项目。

**MyApp.Impl.csproj**

包含接口实现的类库，以及 EF DbContext 和 IoC 容器。这需要对 Domain 项目以及 EF、IoC 库等的依赖。

**MyApp.Mvc.csproj**

MVC 项目依赖于另外两个。

这是洋葱架构的一个非常基本的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T13:05:37.037

阅读[洋葱架构](http://jeffreypalermo.com/blog/the-onion-architecture-part-1/)。这基本上就是你正在做的，详细说明。

在最后一部分中，有指向示例项目的链接，您可以在其中找到将东西放在哪里的想法。当我面临同样的问题时，这对我帮助很大。

# java - 在 Gradle 中，有没有办法将 JDK 设置为 Eclipse 默认值？

> ID：11901874
> 
> 赞同：9
> 
> 时间：2012-08-10T12:40:44.597
> 
> 标签：java, gradle

我正在将我的 gradle 构建文件集成到支持多个 JDK 的 eclipse 开发环境中。虽然大多数开发人员都安装了多个版本，但正确的行为是使用在 System Preferences->Java->Installed JREs 页面上选中的“默认 JRE”。

有没有办法让gradle设置JAVA_HOME（或“org.gradle.java.home”？？）到这个？如果没有，对于这样一群开发人员来说，最好的方法有什么建议吗？对于一个人来说，这并不是一个真正的问题，它正在尝试找到一种通用的方法，该方法可以扩展到我们这个让我搜索的群体！

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-16T23:01:36.363

我仍然不完全确定您的要求，但这里有一些不同的看法。

1.  如果您想做的是让您的代码（在 Gradle 和 Eclipse 中）编译以使字节码与特定版本的 Java 兼容，请使用类似这样的东西。这不会更改 Gradle 或 Eclipse 在编译期间使用的 Java 版本，只会使最终结果与您指定的版本“字节码兼容”。Luis 提到的设置默认为在更通用的 Java 插件级别设置的值。

    ```
    sourceCompatibility = '1.6' //or '1.5' or '1.7', etc. 
    ```

2.  默认情况下，Gradle Eclipse 插件将在您的`.classpath`文件中生成以下条目。我相信这总是指向您在 Eclipse 中指定的默认值，但我可能错了。

    ```
    <classpathentry kind="con" path="org.eclipse.jdt.launching.JRE_CONTAINER" exported="true"/> 
    ```

    如果您想更改该容器是什么，请在 Eclipse 中选择您要查找的容器，然后在`.classpath`文件中查找正确的容器值。然后你可以在构建文件中指定它：

    ```
    eclipse.classpath.containers 'whatever the container value is' 
    ```

3.  但是，如果您想要更改 Gradle 运行的 JAVA_HOME 以匹配 Eclipse 中选择的默认值，我认为您将遇到困难。我不确定是否有一个容易的地方以编程方式找到该值。不过，您可能可以从相反的方向进行设置。让开发人员设置 JAVA_HOME 以匹配他们的 Eclipse 默认值。然后他们可以为他们的 JRE 引用 Eclipse 配置中的 JAVA_HOME 环境变量。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-14T16:01:45.030

如果你有不同版本的 jdk 很容易

```
apply plugin: 'java'
apply plugin: 'eclipse'

eclipse {
  jdt {
    //if you want to alter the java versions (by default they are configured with gradle java plugin settings):
    sourceCompatibility = 1.6
    targetCompatibility = 1.5 
```

现在，如果您使用不同的 JVM 1.6.XX 并且想要针对特定​​的，我不确定

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-05-15T18:00:35.567

尝试从 Eclipse Marketplace 安装“Gradle IDE Pack”。我在 Eclipse Luna 上，可以在“Preferences > Gradle > Arguments”菜单下看到这个选项：

![Eclipse Gradle 插件参数对话框](../Images/9c08113deabc70fdb2ad5793bd7e29b7.png)

您可以使用“文件”命令验证您选择的 JRE 是否已被使用，如[本答案](https://stackoverflow.com/a/3313839/866021)中所述。

# php - PHPUnit 没有提供关于跳过和不完整测试的足够信息

> ID：11901878
> 
> 赞同：4
> 
> 时间：2012-08-10T12:40:59.637
> 
> 标签：php, unit-testing, phpunit

我正在尝试捕获 PHPUnit 的输出：

```
$pu_result = new \PHPUnit_Framework_TestResult();
$pu_result->addListener(new \PHPUnit_Util_Log_JSON());      

$pu_suite = new \PHPUnit_Framework_TestSuite();

// here I add tests  
// $pu_suite->addTestSuite(...);

ob_start();
$pu_suite->run($pu_result);    
$output = ob_get_clean(); 
```

这给了我一个 json 编码的字符串作为 $output （坏 json 顺便说一句，但我可以修复它）。

问题是不完整和跳过测试的“消息”属性是“跳过测试”或“不完整测试”，并且不包含我在`$this->markTestIncomplete()`or`$this->markTestSkipped()`调用中提供的消息:(

我也能得到吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-03-26T16:43:36.040

尝试使用 -v 选项（--verbose）运行 phpunit

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-12T10:30:14.750

您可以通过升级到最新的 3.6 版本在 JSON 日志中获取这些信息。查看and的[最新`PHPUnit_Util_Log_JSON`来源](https://github.com/sebastianbergmann/phpunit/blob/master/PHPUnit/Util/Log/JSON.php#L123)，我可以看到它们都在日志中添加了异常消息。但是，我无法找到*进行*此更改的时间。如果这些更改不在 3.6.x 中，您可以创建自己的子类并非常轻松地覆盖这些方法。`addIncompleteTest``addSkippedTest`

 ** * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-03T17:13:39.017

`printerClass`注意在 phpunit.xml 或任何其他配置中定义设置。默认打印机类将包括跳过的测试，但其他可能不包括。

`"PHPUnit_TextUI_ResultPrinter"`例如，不打印任何跳过的测试。*

# ajax - java.lang.IllegalStateException：CDATA 标记不能嵌套

> ID：11901882
> 
> 赞同：20
> 
> 时间：2012-08-10T12:41:19.827
> 
> 标签：ajax, jsf, primefaces, cdata, illegalstateexception

我在 JSF 页面中遇到了 ajax 请求问题。当我点击按钮时，我得到了这个异常：

```
SEVERE: Servlet.service() for servlet Faces Servlet threw exception
java.lang.IllegalStateException: CDATA tags may not nest
    at com.sun.faces.renderkit.html_basic.HtmlResponseWriter.startCDATA(HtmlResponseWriter.java:630)
    at javax.faces.context.ResponseWriterWrapper.startCDATA(ResponseWriterWrapper.java:172)
    at javax.faces.context.PartialResponseWriter.startError(PartialResponseWriter.java:342)
    at org.primefaces.context.PrimePartialResponseWriter.startError(PrimePartialResponseWriter.java:210)
    at com.sun.faces.context.AjaxExceptionHandlerImpl.handlePartialResponseError(AjaxExceptionHandlerImpl.java:200)
    at com.sun.faces.context.AjaxExceptionHandlerImpl.handle(AjaxExceptionHandlerImpl.java:123)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:119)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139) 
```

我认为这是对象的一些问题`String`，因为当我对网站上显示的 JPA 实体属性进行硬编码时，一切正常。但是，当从数据库 (PostgreSQL) 中检索实体时，它会引发上述异常。

JSF 代码：

```
<p:column>
    <f:facet name="header">
        Akcja
    </f:facet>
    <h:commandButton actionListener="#{mBDocumentMigration.actionEdit(object)}" value="Edytuj" rendered="#{mBDocumentMigration.editingObject == null}" >
        <f:ajax render="@form" execute="@form" />
    </h:commandButton>
    <h:commandButton action="#{mBDocumentMigration.actionZapisz}" value="Zapisz" rendered="#{mBDocumentMigration.editingObject != null}" >
    <f:ajax render="@form"  execute="@this" />
    </h:commandButton>
</p:column> 
```

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-07-30T12:01:32.103

在呈现由代码中的错误引起的 JSF 响应期间抛出异常。但是，Mojarra 反过来又未能使用内置的 ajax 异常处理程序正确处理此异常，从而导致您现在看到的另一个异常，隐藏了有关原始异常的所有细节。

仔细查看堆栈跟踪。从底部开始跟踪调用堆栈：

```
at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139) 
```

因此，它发生在渲染响应阶段。好的，看下一行（上面的那个）：

```
at com.sun.faces.context.AjaxExceptionHandlerImpl.handle(AjaxExceptionHandlerImpl.java:123) 
```

嘿，它已经通过 Mojarra 的内置 ajax 异常处理程序传递了 `AjaxExceptionHandlerImpl`！这**仅**在 ajax 请求期间发生异常时调用。好的，从下到上进一步阅读下一行：

```
at com.sun.faces.renderkit.html_basic.HtmlResponseWriter.startCDATA(HtmlResponseWriter.java:630)
at javax.faces.context.ResponseWriterWrapper.startCDATA(ResponseWriterWrapper.java:172)
at javax.faces.context.PartialResponseWriter.startError(PartialResponseWriter.java:342)
at org.primefaces.context.PrimePartialResponseWriter.startError(PrimePartialResponseWriter.java:210)
at com.sun.faces.context.AjaxExceptionHandlerImpl.handlePartialResponseError(AjaxExceptionHandlerImpl.java:200) 
```

因此，它试图将错误信息写入 ajax 响应。此信息必须放在 CDATA 块中。但是，启动 CDATA 块失败如下，因为显然已经打开了 CDATA 块：

```
java.lang.IllegalStateException: CDATA tags may not nest 
```

这反过来表明在编写 ajax 响应期间发生了异常，很可能是因为您在 getter 方法中执行业务逻辑，该方法仅在生成 HTML 输出期间调用。所以这个过程很可能如下：

1.  JSF 进入 RENDER_RESPONSE 阶段。
2.  JSF 需要生成 HTML 输出。
3.  对于每个`<f:ajax render="some">`（或`<p:ajax update="some">`），它需要在[CDATA 块](https://stackoverflow.com/q/2784183/)`<update id="some">`内创建一个带有生成的 HTML 输出的 XML 块（以保持 XML 输出在语法上有效）。所以需要启动一个 CDATA 块。
4.  在将 HTML 输出生成到 CDATA 块中时，会评估所有呈现时 EL 表达式，包括`value`所有 UI 组件的属性。
5.  在某个地方，EL 表达式背后的 getter 引发了由您自己的代码中的错误引起的异常。
6.  JSF 立即停止生成 HTML 输出并且没有关闭 CDATA 块。HTTP 响应包含半生不熟的数据。
7.  `AjaxExceptionHandlerImpl`被触发。
8.  `AjaxExceptionHandlerImpl`需要将异常/错误详细信息写入响应。但是，它没有检查响应是否已经写入。它盲目地尝试打开一个 CDATA 块，该块又失败了，因为它已经打开了。它抛出了你看到的异常，隐藏了它试图处理的真正底层异常的所有细节。

如您所见，问题有两个方面：

1.  JSF 渲染器不应该让响应半途而废。
2.  Mojarra`AjaxExceptionHandlerImpl`应该已经检查/验证了响应的状态。

如果您将 Mojarra 的内置 ajax 异常处理程序替换为[立即打印堆栈跟踪的自定义](https://stackoverflow.com/questions/27526753/exception-stack-trace-in-jsf-ajax-requests/27532827#27532827)处理程序，或者由[能够检测和清理半生不熟的 ajax 响应的 OmniFaces 替换](http://showcase.omnifaces.org/exceptionhandlers/FullAjaxExceptionHandler)[，`FullAjaxExceptionHandler`](http://showcase.omnifaces.org/exceptionhandlers/FullAjaxExceptionHandler)那么它将最终揭示并显示由代码中的错误引起的真正底层. 如前所述，这很可能是由于[在 getter 方法中执行业务逻辑造成的，这是一种不好的做法](https://stackoverflow.com/questions/2090033/why-jsf-calls-getters-multiple-times/2090062#2090062)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-23T05:17:01.187

我遇到了和你一样的问题，当我使用支持 bean 中的自动完成组件绑定时，它工作得很好。

```
<p:autoComplete id="autocomplete" binding="#{searchBean.compui}" title="Find" value="#{searchBean.searchfor}" forceSelection="false" queryDelay="30" dropdown="true" maxResults="20" emptyMessage="None" completeMethod="#{searchBean.complete}" style="width: 90%;"/>
<p:commandButton id="cmdsearch" value="#{msg.search}" action="#{searchBean.search}" update="tblprocresults" icon="ui-icon-zoomin"/> 
```

并在后备豆中

```
private AutoComplete compui;
//compui is initialized when bean is constructed
    public AutoComplete getCompui() {
            return compui;
        }

        public void setCompui(AutoComplete compui) {
            this.compui = compui;
        } 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-04-25T11:02:32.313

CDATA 问题不是 PrimeFaces 问题，而是与负责提供部分输出的 JSF 实现有关。用它的 JSF 属性替换；）

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-06-01T12:05:02.880

如果您还在`java.lang.ClassCastException: com.sun.faces.facelets.compiler.UIInstructions cannot be cast to org.primefaces.component.tree.UITreeNode`服务器日志中看到，请添加

```
<context-param>
  <param-name>javax.faces.FACELETS_SKIP_COMMENTS</param-name>
  <param-value>true</param-value>
</context-param> 
```

至`/WEB-INF/web.xml`

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2014-07-02T17:24:04.167

只是为了考虑一些事情，有时它可能是一个非常愚蠢的错误。

例如，如果我忘记在 xhtml 页面正在使用的我的一个 bean 中初始化 ArrayList，有时我会收到同样的错误消息：

我会这样做：

```
List<String> myList; 
```

但是忘记这样做：

```
myList = new ArrayList(); 
```

所以就像另一件要考虑的事情一样，确保你已经处理好所有的家务（确保变量被初始化/填充，等等......）

* * *

## 回答 #6

> 赞同：-4
> 
> 时间：2014-10-22T13:35:47.220

我在 Tomcat 7 中摆脱类似 execption 的经验是：如果您在 jsf 中调用方法，则必须添加 ()，即使它没有参数。

此异常但不会出现，如果您使用的是码头

编辑：即使消除了这个异常，它也给出了另一个异常：

```
java.lang.NoSuchMethodError: javax.el.ELResolver.invoke(Ljavax/el/ELContext;Ljava/lang/Object;Ljava/lang/Object;[Ljava/lang/Class;[Ljava/lang/Object;)Ljava/lang/Object; 
```

经过研究，我发现 Tomcat 7 本身带来了 EL 依赖，因此 pom.xml 中的任何其他依赖都像

```
<dependency>
    <groupId>javax.el</groupId>
    <artifactId>el-api</artifactId>
    <version>2.2</version>
    <scope>provided</scope>
</dependency> 
```

应移除以避免混合。

之后，您必须`tomcat7:run`在 Eclipse 中通过 Run as - 启动 tomcat7，而不是`tomcat:run`默认启动 tomcat 6。

我的环境：

*   日食开普勒
*   JDK 1.7.0_45
*   Maven 3.1.1

# c - select() 如何等待常规文件描述符（非套接字）？

> ID：11901884
> 
> 赞同：10
> 
> 时间：2012-08-10T12:41:27.047
> 
> 标签：c, select, file-io

这是来自“man select”的代码示例加上几行来读取正在写入的实际文件。我怀疑当`./myfile.txt`被写入时，`select`会返回它现在可以从该 fd 中读取。但是，只要 txt 文件存在，select 就会在 while 循环中不断返回。我希望它仅在将新数据写入文件末尾时返回。我认为这就是它应该如何工作的。

```
#include <stdio.h>
#include <fcntl.h>
#include <stdlib.h>
#include <sys/time.h>
#include <sys/types.h>
#include <unistd.h>

int
main(void)
{
    fd_set rfds;
    struct timeval tv;
    int retval;

    int fd_file = open("/home/myfile.txt", O_RDONLY);

   /* Watch stdin (fd 0) to see when it has input. */
    FD_ZERO(&rfds);
    FD_SET(0, &rfds);
    FD_SET(fd_file, &rfds);

   /* Wait up to five seconds. */
    tv.tv_sec = 5;
    tv.tv_usec = 0;

   while (1)
   {
     retval = select(fd_file+1, &rfds, NULL, NULL, &tv);
     /* Don't rely on the value of tv now! */

     if (retval == -1)
        perror("select()");
     else if (retval)
        printf("Data is available now.\n");
        /* FD_ISSET(0, &rfds) will be true. */
     else
        printf("No data within five seconds.\n");
   }

   exit(EXIT_SUCCESS);
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-10T12:57:41.987

磁盘文件始终准备好读取（但如果您已经在文件末尾，则读取可能会返回 0 字节），因此您无法[`select()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/select.html)在磁盘文件上使用来了解何时将新数据添加到文件中。

POSIX 说：

> 与常规文件关联的文件描述符应始终为准备读取、准备写入和错误条件选择 true。

此外，正如[cnicutar](https://stackoverflow.com/users/714501/cnicutar)在现已删除的帖子中指出的那样，通常，您必须在每次迭代时初始化 FD_SET。在您的代码中，您正在监视一个 fd，并且该 fd 始终准备就绪，因此 FD_SET 实际上并没有改变。但是，如果您有 5 个描述符要监视，并且`select`检测到只有一个已准备好，那么在下一次迭代中，将仅监视一个描述符（除非您重置 FD_SET）。这使得使用`select`变得棘手。

# qt - 可以停止并以 qt 形式发出经过时间的计时器

> ID：11901886
> 
> 赞同：2
> 
> 时间：2012-08-10T12:41:35.807
> 
> 标签：qt, timer, clock

我正在寻找一个可以启动、停止并可以返回自开始以来经过的时间的时钟/计时器。是否有一个小部件可以完成所有这些事情？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T12:54:09.380

您可以使用[`QTime`](http://qt-project.org/doc/qt-4.8/qtime.html)or [`QElapsedTimer`](http://qt-project.org/doc/qt-4.8/qelapsedtimer.html)，但它们不是s，因此如果您需要能够通过 Qt 信号启动和停止它们，则`QObject`需要将它们包装在一个类中。`QObject`

```
class Timer : public QObject {
    Q_OBJECT
public:
    explicit Timer(QObject *parent = 0): QObject(parent) {}    
public slots:
    void start() {
        time.start();
    }
    void stop() {
        emit elapsed(time.elapsed());
    }
signals:
    void elapsed(int msec);
private:
    QTime time;    
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T13:19:53.247

请看一下这个例子，以及[QTimer类](http://qt-project.org/doc/qt-4.8/qtimer.html)

```
//This class will inherit from QTimer
class Timer : public QTimer
{
    //We will count all the time, that passed in miliseconds
    long timePassed;

    Q_OBJECT

    public:

    explicit Timer(QObject *parent = 0) : QTimer(parent)
    {
        timePassed = 0;
        connect(this, SIGNAL(timeout()), this, SLOT(tick()));
    }
    private slots:

    //this slot will be connected with the Timers timeout() signal.
    //after you start the timer, the timeout signal will be fired every time,
    //when the amount interval() time passed.
    void tick()
    {
        timePassed+=interval(); //we increase the time passed
        qDebug()<<timePassed; //and debug our collected time
    }
}; 
```

在您的主应用程序中：

```
Timer * timer = new Timer(this);
timer->setInterval(1000);
timer->start(); 
```

这将创建一个 Timer 对象，将其间隔设置为 1 秒，然后启动它。您可以根据需要将任意数量的插槽连接到 timeout() 信号，也可以创建自定义信号。您可以通过以下方式停止计时器`timer->stop();`

我希望它有帮助！

# java - 在流中序列化二叉树并重建树

> ID：11901889
> 
> 赞同：2
> 
> 时间：2012-08-10T12:41:48.420
> 
> 标签：java, data-structures, binary-search-tree

您有一个二叉树（不是 BST），将其序列化为流并重建保持树格式的树。

发送 2 个流 InOrder + PreOrder 或 InOrder + PostOrder 不是一种选择。

任何人都可以使用JAVA提出一些解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T13:02:04.650

如果您的数据结构允许，您可以使用[Java 序列化](http://java.sun.com/developer/technicalArticles/Programming/serialization/)API。如果您的树对象（以及从中引用的所有对象）实现`java.io.Serializable`，您可以使用 API 将整个结构序列化为流，然后在其他位置反序列化它。（链接页面包含一个示例。）序列化库处理序列化对象之间的依赖关系，以便在反序列化时正确恢复它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T13:06:42.257

除了 Petr 的回答，您可能还想看看[这里](http://docs.oracle.com/javase/7/docs/api/java/io/ObjectOutputStream.html)。

确保应该流式传输的对象实现了`java.io.Serializable`接口。

# python - 无法使用 subprocess.Popen 执行 shell 命令

> ID：11901890
> 
> 赞同：1
> 
> 时间：2012-08-10T12:41:48.630
> 
> 标签：python, linux, shell

当我尝试使用 subprocess.Popen 执行命令时。我收到此错误；

```
In [3]: subprocess.Popen(["su - dhclient","eth0"])
---------------------------------------------------------------------------
OSError                                   Traceback (most recent call last)
/home/oae/<ipython-input-3-1cd768a39571> in <module>()
----> 1 subprocess.Popen(["su - dhclient","eth0"])

/usr/lib/python2.7/subprocess.pyc in __init__(self, args, bufsize, executable, stdin, stdout, stderr, preexec_fn, close_fds, shell, cwd, env, universal_newlines, startupinfo, creationflags)
    677                             p2cread, p2cwrite,
    678                             c2pread, c2pwrite,
--> 679                             errread, errwrite)
    680 
    681         if mswindows:

/usr/lib/python2.7/subprocess.pyc in _execute_child(self, args, executable, preexec_fn, close_fds, cwd, env, universal_newlines, startupinfo, creationflags, shell, p2cread, p2cwrite, c2pread, c2pwrite, errread, errwrite)
   1247                     if fd is not None:
   1248                         os.close(fd)
-> 1249                 raise child_exception
   1250 
   1251 

OSError: [Errno 2] No such file or directory 
```

我怎样才能解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T12:44:44.333

您可以使用：

```
subprocess.Popen("su - dhclient eth0", shell=True) 
```

# jquery - 如何使用 jquery 保留动态生成的下拉列表的值

> ID：11901894
> 
> 赞同：0
> 
> 时间：2012-08-10T12:42:08.597
> 
> 标签：jquery, html, codeigniter

我正在使用 codeigniter 框架构建一个 webapp。我的表单中有一系列 4 个下拉字段，每个都依赖于最后一个字段，因此我在用户选择一个选项后使用 JQuery 填充它们。

这在用户提交并且无论出于何种原因提交失败之前都可以正常工作。发生这种情况时，用户必须再次填写表单，因为下拉值仅由用户输入填写。

我可以将用户选择存储在会话中。但是我应该如何使用正确的选项重新构建下拉列表？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T12:45:38.517

最好的方法是将此下拉列表的项目存储在回发页面中`hiddenfield`或`cookies`之前，以及在回发之后再次从`hiddenfield`或`cookies`恢复数据。

当您从隐藏字段或 cookie 恢复时，只需检查它是否包含数据，如果不是在页面加载时填充它。

检查此解决方案：[带有 jQ​​uery 绑定和 JSON 支持的 Javascript Cookie 库](http://code.google.com/p/cookies/)

* * *

您还可以使用：[DOM 存储](https://developer.mozilla.org/en-US/docs/DOM/Storage)

```
// Save data to a the current session's store 
sessionStorage.setItem("username", "John");  
 // Access some stored data 
alert( "username = " + sessionStorage.getItem("username")); 
```

sessionStorage 对象对于在浏览器意外刷新时保留应保存和恢复的临时数据最有用。

# shopify - 私人 shopify 应用程序部署在哪里？

> ID：11901897
> 
> 赞同：1
> 
> 时间：2012-08-10T12:42:12.420
> 
> 标签：shopify

我知道您可以在任何服务器上安装应用程序，例如您自己的服务器或 Heroku 等。我对私有应用程序（只有您的商店可以访问）更感兴趣。它们是否部署在 shopify 本身上？或者它们是否像任何其他应用程序一样部署？*如果*他们自己部署在shopify的服务器上，公共应用程序也可以部署在那里吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T13:02:55.477

私有应用程序的部署方式完全相同，唯一的区别是您拥有商店的预生成权限，因此无需授权访问。

通常，私有应用程序用于一次性脚本，而不是店主会使用的真实应用程序（并非总是如此，但这是我建议使用它们的方式）。如果这是一个需要托管并且用户可以访问的应用程序，我建议创建一个合作伙伴帐户并制作一个“真正的”应用程序。没有缺点，并且大多数工具（宝石）都针对常规应用程序进行了优化。如果需要，将来也可以更轻松地过渡到多个商店的应用程序。

John Duff，API 和集成团队 @ Shopify

# c# - 如何获取已阅读的内容

> ID：11901906
> 
> 赞同：21
> 
> 时间：2012-08-10T12:42:36.033
> 
> 标签：c#, asp.net, asp.net-web-api

我有一个继承自 ApiController 的类。它有一个像这样的 Put 方法：

```
[PUT("user/{UserId}")]
public HttpResponseMessage Put(string userId, PaymentRequest paymentRequest)
{
    // Calling business logic and so forth here
    // Return proper HttpResponseMessage here
} 
```

该方法可以正常工作，如上所述。现在我需要验证方法调用的签名，但是在这里我遇到了问题。签名本质上是方法+url+body的组合。我可以通过调用 Request.Method 获得的方法和我可以通过调用 Request.RequestUri.ToString() 获得的 url，但是我无法像***在***它被自动反序列化为 PaymentRequest 对象之前那样获取正文asp.net MVC4 框架。

**我的第一次尝试：** 正如我现在所理解的那样， Request.Content.ReadAsStringAsync().Result 什么也不返回。这是因为内容只能读取一次。

**我的第二次尝试：** 我尝试将其序列化回 JSON 字符串。

```
var serializer = new JavaScriptSerializer();
var paymentRequestAsJson = serializer.Serialize(paymentRequest); 
```

问题在于格式与签名的正文部分略有不同。它具有相同的数据，但更多的空间。

我无法更改我的 Put 方法的调用者所做的事情，因为这是第三方组件。我应该怎么办？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-08-10T13:00:17.227

您可以从基础请求中读取：

```
using (var stream = new MemoryStream())
{
    var context = (HttpContextBase)Request.Properties["MS_HttpContext"];
    context.Request.InputStream.Seek(0, SeekOrigin.Begin);
    context.Request.InputStream.CopyTo(stream);
    string requestBody = Encoding.UTF8.GetString(stream.ToArray());
} 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-08-10T20:25:58.737

不要在签名中包含 body 参数，这将允许您缓冲内容并根据需要多次读取内容。

```
[PUT("user/{UserId}")]
public HttpResponseMessage Put(string userId)
{
    Request.Content.LoadIntoBufferAsync().Wait();
    var paymentRequest = Request.Content.ReadAsAsync<PaymentRequest>().Result;
    var requestBody = Request.Content.ReadAsStringAsync().Result;
    // Calling business logic and so forth here
    // Return proper HttpResponseMessage here
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-30T05:48:24.997

一个非常延迟的响应，但最近我有同样的挑战要克服。

我已经处理了一些不同的问题，而不必从 httpContext 获取数据（对于大容量事务 Web 应用程序来说可能非常昂贵）。

我创建了一个简单的接口并让每个控制器实现它：

```
public interface IBaseControllerData
{
    object Entity { get; set; }
} 
```

然后，我将控制器的实体属性设置为每个帖子的 Json 有效负载并执行操作。最后，我在 ActionFilterAttribute.OnActionExecuted 重写方法中检索了实体数据，并将其序列化为 Json，然后再注入 MongoDB：

```
object entity = ((IBaseControllerData)actionExecutedContext.ActionContext.ControllerContext.Controller).Entity;
                    requestBody = Newtonsoft.Json.JsonConvert.SerializeObject(entity); 
```

希望有帮助！

干杯

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-02-12T17:21:39.427

我的答案是上述 Darin Dimitrov 的变体......所有 C# 变体（ASP.NET、Core、MVC 等）的变体答案应该是预期的......也许是 Visual Studio 的一年（2017 年、2019 年，等）...如果使用 Visual Basic 而不是 C#...

与 Anders Arpi 的评论类似，我无法使用所提供的 Darin 的答案（尽管显然我的答案是他的直接推导）。在我的情况下 Request.Properties 不是一个选项，但 Request.InputStream 是。我怀疑这在很大程度上取决于第一段中提到的项目类型。我的解决方案在 VS2017 中对我有用。

页面上也有类似的答案：[How to get raw request body in ASP.NET?](https://stackoverflow.com/questions/6362781/how-to-get-raw-request-body-in-asp-net/44576964) 但是，这些对我不起作用。但是，他们确实提供了重要的线索，例如“BeginRequest 事件中没有填充请求对象。您需要在事件生命周期的后期访问此对象'...

如果您在 HTTPRequests 构建/分析方面有经验，请跳过下一段。

尽管回想起来非常明显，但请求正文内容仅出现在某些 HTTPRequest 中。如果您只是在执行 GET（例如，单击导航选项卡将您带到一个新页面），您通常没有请求正文。因此，在测试解决方案时，请确保您正在查看应包含 RequestBody 的 HttpRequest。在我的例子中，任何实际从 UI 接收数据的提交按钮都将是一个包含 RequestBody 的帖子，因此存在（并且长度大于 0）。如果您没有 Fiddler 或 BurpSuite，或者正在使用 Shibboleth（这增加了 Fiddler/BurpSuite 测试的复杂性），您通常可以在 Firefox 开发人员工具中看到 HTTPRequest（通过 F12）......我在哪里调用请求正文将被称为参数和/或请求有效负载。

注意 Application_AuthenticateRequest 在 Global.asax.cs 中。

```
(in addition to other using statements)
using System.IO;
using System.Text;
using System.Web;  

protected void Application_AuthenticateRequest(object sender, EventArgs e){

HttpApplication app = (HttpApplication)sender;
// Do a quick check to make sure that we are not on local. 
// I've had some odd errors on local, though I suspect general implementation will not have this issue.
// So if we're actually on a 'real' (a.k.a. non-local) website, I do the following.

      using (var stream = new MemoryStream())
                {
                    app.Request.InputStream.Seek(0, SeekOrigin.Begin);
                    app.Request.InputStream.CopyTo(stream);
                    string requestBody = Encoding.UTF8.GetString(stream.ToArray());
                    app.Request.InputStream.Seek(0, SeekOrigin.Begin); 
                    if (requestBody.Length > 0) Response.Write("requestBody: " + requestBody + "<br>");
                }

} 
```

请注意，我正在使用“Reinstate Monica Cellio”的建议在复制后重置 InputStream。

# php - php代码在完成之前退出循环

> ID：11901910
> 
> 赞同：0
> 
> 时间：2012-08-10T12:42:48.020
> 
> 标签：php, mysql, curl

我编写了一个 php 脚本来使用**CURL**从另一个站点获取数据。一个上传到服务器。存在与数据库和相关 url 通信的循环。它在我的本地计算机上运行良好。但是......代码本身在过程完成之前就存在了。我放了`set_time_limit(0);`。但没用

多次运行时从这里刹车

```
$curl_connection =  curl_init("$link");

curl_setopt($curl_connection, CURLOPT_CONNECTTIMEOUT, 30);
curl_setopt($curl_connection, CURLOPT_USERAGENT, "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)");
curl_setopt($curl_connection, CURLOPT_RETURNTRANSFER, true);
curl_setopt($curl_connection, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($curl_connection, CURLOPT_FOLLOWLOCATION, 1);

$result = curl_exec($curl_connection);
curl_close($curl_connection);

$html = new simple_html_dom();
$html->load($result);** 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T12:48:02.920

如果您有共享主机，必须共享主机不能与 Curl 一起使用，您需要使用自己的服务器以完美模式工作，也请输入您的代码以了解更多关于您的问题。

# gwt - 在 Chrome 中安装 GWT 插件

> ID：11901915
> 
> 赞同：1
> 
> 时间：2012-08-10T12:43:11.277
> 
> 标签：gwt, google-chrome

它的工作原理是这样的：在`?gwt.codesvr=127.0.0.1:9997`下载并安装了建议 GWT 插件后打开链接后。但我刚刚收到这条消息：`Extensions, apps, and user scripts can only be added from the Chrome Web Store`。我在商店里找不到它。那么，有什么方法可以安装呢？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T13:05:23.540

在浏览器中转到 chrome://chrome/extensions 并拖放您下载的文件（我认为应该命名为 google-dev-pluggin.crx）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T13:10:14.360

我认为安装插件的最简单方法是使用标志加载 google chrome 浏览器`–enable-easy-off-store-extension-install` 使用此标志可以禁用此“功能”。

有关更多信息，请参见[此处](http://techie-buzz.com/browsers/chrome-blocking-extension-apps-scripts-chrome-web-store.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T15:21:21.597

Chrome 21 将安装扩展至 chrome 的政策更改为“仅来自 chrome 网上商店”。

这已经在 GWT 贡献者组中得到解决，并将在一两周内修复。

请参阅贡献者列表中的讨论（带有解决方法）：[https ://groups.google.com/group/google-web-toolkit-contributors/browse_thread/thread/24eaf2956ca4a212#](https://groups.google.com/group/google-web-toolkit-contributors/browse_thread/thread/24eaf2956ca4a212#)

# c# - 父节点和子节点未显示在 asp.menu 中（使用 web.sitemap）

> ID：11901916
> 
> 赞同：0
> 
> 时间：2012-08-10T12:43:12.553
> 
> 标签：c#, asp.net

我正在使用一个使用 web.sitemap 文件的 asp.menu 的项目中工作。我添加了这样的子菜单：

```
<?xml version="1.0" encoding="utf-8" ?>
<siteMap xmlns="http://schemas.microsoft.com/AspNet/SiteMap-File-1.0" >
  <siteMapNode url="formPaginaPrincipal.aspx" title="Página Inicial"  description="Pagina inicial do site">
    <siteMapNode url="listaModalidades.aspx" title="Modalidades"  description="Modalidades de licitações" />
    <siteMapNode url="" title="Relatórios" description="Relatórios do sistema">
      <siteMapNode url="list.aspx" title="testing"></siteMapNode>
    </siteMapNode>

    <siteMapNode url="listaTiposLicitacao.aspx" title="Tipos de Licitação"  description="Tipos de licitações" />
    <siteMapNode url="listaOrgaos.aspx" title="Órgãos"  description="Órgãos do governo de Pernambuco" />
    <siteMapNode url="listaComissoes.aspx" title="Comissões"  description="Comissões de licitações" />
    <siteMapNode url="listaLicitacoes.aspx" title="Licitações"  description="Licitações" />
    <siteMapNode url="ArquivarLicitacoes.aspx" title="Arquivar Licitações"  description="Arquivamento de Licitações" />
    <siteMapNode url="listaEmpresas.aspx" title="Fornecedores"  description="Fornecedores" />
    <siteMapNode url="listaUsuarios.aspx" title="Usuários"  description="Usuários de Órgãos do governo de Pernambuco" />
    <siteMapNode url="formPaginaPrincipal.aspx?acao=sair" title="Sair"  description="Encerrar Sessão" />
  </siteMapNode>
</siteMap> 
```

如果我在 aspx 文件中切换到显示模式，我可以看到父节点“Relatorios”...但是当我运行项目时，它根本不显示。我已经调试了项目，就像这个节点的 itemdatabound 事件（“Relatorios”）根本没有启动。如果我删除它的子节点（“测试”），它将正常工作。为什么会这样？

我的母版页中的 aspmenu 和 asp.sitemapdatasource：

```
<asp:Menu ID="mnuPrincipal" runat="server" DataSourceID="SiteMapDataSource1" 
                    StaticDisplayLevels="2" Width="208px" 
                onmenuitemclick="mnuPrincipal_MenuItemClick" 
                OnMenuItemDataBound="mnuPrincipal_temDataBound" DynamicHorizontalOffset="2" 
                StaticSubMenuIndent="40px" >
                <StaticMenuStyle CssClass="menu" />
                <StaticSelectedStyle CssClass="selecionado" />
                <StaticMenuItemStyle CssClass="sub-menu" />
                <DynamicMenuStyle CssClass="menu" />
                <DynamicSelectedStyle CssClass="selecionado" />
                <DynamicMenuItemStyle CssClass="sub-menu" />
                </asp:Menu>

<asp:SiteMapDataSource ID="SiteMapDataSource1" runat="server" StartFromCurrentNode="false" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T12:49:02.460

您可以在配置中声明您的站点地图

```
siteMap enabled="true">
  <providers>
    <clear/>
    <add siteMapFile="Web.sitemap" name="AspNetXmlSiteMapProvider" type="System.Web.XmlSiteMapProvider" securityTrimmingEnabled="true"/>
  </providers>
</siteMap> 
```

# php - 为什么 preg_match 不返回数据？设计决策？

> ID：11901918
> 
> 赞同：2
> 
> 时间：2012-08-10T12:43:17.967
> 
> 标签：php, preg-match

`preg_match`我想知道php开发人员选择不返回数据 是否有编程原因。

我主要想知道引用不存在的变量而不是返回值是否更快？

或者这只是那些“它只是实现功能的方式”问题之一？

我很感激你的时间，泰。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T12:50:14.400

这样做可以避免在不使用实际捕获的子字符串时进行不必要的字符串缓冲区复制；根据字符串的大小，这可能会严重浪费资源。

当`$matches`参数没有传递时，PHP 可以决定是否为它分配资源。对于返回值不能这样做，因为`preg_match()`通常在需要评估它的条件中使用。

# c# - 无法加载视图状态？

> ID：11901927
> 
> 赞同：0
> 
> 时间：2012-08-10T12:43:56.103
> 
> 标签：c#, asp.net, controls, viewstate

> 无法加载视图状态。正在加载视图状态的控制树必须与在先前请求期间用于保存视图状态的控制树匹配。

页面加载正常，直到我在页面上包含一个 asp 面板。然后我看到上面的错误。

谁能想到可能的原因？asp 面板是空的，我刚刚创建了一个测试：

```
<asp:Panel runat="server" ID="pnlTest"></asp:Panel> 
```

它打破了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T12:44:45.657

您需要关闭面板`</asp:Panel>`

```
<asp:Panel runat="server" ID="pnlTest">
</asp:Panel> 
```

在页面初始化时创建动态控件

更多信息 [http://geekswithblogs.net/FrostRed/archive/2007/02/17/106547.aspx](http://geekswithblogs.net/FrostRed/archive/2007/02/17/106547.aspx)

这里还有更多信息 [http://blog.typps.com/2008/01/failed-to-load-viewstate-typical.html](http://blog.typps.com/2008/01/failed-to-load-viewstate-typical.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T13:11:40.853

您遇到的问题取决于您在过程中途改变事物......

当您从 ASP.NET 请求页面时，它使用`.aspx`和`.ascx`文件中的标记。由此（以及许多其他内容，包括您在代码隐藏中创建的任何动态控件），它创建了 ViewState，该 ViewState 存储在您的页面中名为`__VIEWSTATE`.

当您随后将页面回发到服务器时（通过链接或单击按钮等），服务器将**加载**该 ViewState 信息，并期望`.aspx`和`.ascx`文件中的所有控件处于完全相同的状态。

从您的评论中我可以看出，您正在做的是......

*   从服务器请求页面（正在加载 HTML，包括`__VIEWSTATE`）
*   更改`.aspx`服务器上的页面（在这种情况下添加一个新的`<asp:Panel>`）
*   将页面发布回服务器并收到错误。

在这第三阶段，服务器正在查看中的控件`.aspx`并查看中的信息`__VIEWSTATE`......错误是因为控件**不匹配**！服务器不希望`<asp:Panel>`在页面中看到 an，因为`__VIEWSTATE`没有提及它。

* * *

所以解决您的问题的方法很简单 - 只需在将页面加载到浏览器`.aspx` **之前将控件添加到**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-30T08:37:17.217

为了抑制这个错误（ViewState 将被部分加载）：

```
public partial class MyClass: System.Web.UI.Page
{ 
     bool StateFail;

     protected  override object LoadPageStateFromPersistenceMedium() {
        if (StateFail) return null;
        return base.LoadPageStateFromPersistenceMedium();
       }

    protected override void OnInitComplete(EventArgs e) {
        base.OnInitComplete(e);
        if (!IsPostBack) return;
        try
        {
            typeof(System.Web.UI.Page).GetMethod("LoadAllState", System.Reflection.BindingFlags.Instance | System.Reflection.BindingFlags.NonPublic).Invoke(this, new object[0]);
        } catch { StateFail = true; }
        }
} 
```

}

# c - 处理十进制数的转换

> ID：11901930
> 
> 赞同：3
> 
> 时间：2012-08-10T12:44:10.823
> 
> 标签：c

对于 C 程序员来说，这可能是最简单的事情之一，但我真的无法理解。

```
unsigned char Value[4]; 
unsigned long ulVer = 00010001;
unsigned long uSize = sizeof(ulVer);
memcpy(Value, &ulVer, uSize);
memcpy(&ulVer, Value, uSize); 
printf("%d",ulVer); 
```

为什么 ulVer 是 4097 而不是 10001 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T12:46:46.330

00010001; 是一个八进制常数，因为它以 0 开头。如果这是你想要的十进制，你需要写 10001。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-10T12:46:24.250

因为以 0 开头的整数常量被认为是八进制（以 8 为底）。所以一个数字 10001（八进制）== 十进制的 4097。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T13:21:11.997

在 C 语言中，八进制常量从 0 开始。要使您的代码片段正常工作，请尝试使用 10001

# ios - iOS实现理论

> ID：11901931
> 
> 赞同：2
> 
> 时间：2012-08-10T12:44:15.410
> 
> 标签：ios, database, sqlite, flat-file

我们（工作中的 IT 部门）正在寻找构建一个 iPad 应用程序，该应用程序将采用数字 ID 并在表格中提供简单的查找。它本质上是对单个表的主键搜索，并在轻微处理后显示一个字段。

**警告**：

该表有 450 万行，查找时间最长为 1 秒。它没有互联网连接，因此必须在设备上进行。我们有一些想法，但最有意义的是：

1.  Sqlite：它会经受住这样的滥用吗？它可以处理那么多行吗，它会做得好吗？

2.  平面文件搜索：我们可以自己循环文件，或者将它们按前几位数字拆分，以进行一些更智能的索引。

3.  卸载到设备上的某些 3rd 方数据库应用程序，该应用程序可以通过 API 处理它。

4.  在我们无限的智慧中，我们完全错过了另一种东西。

我必须借此机会感谢苹果让我们自己测试变得如此容易。如果没有 Mac 或 Dev 许可证，我们不想承诺超过 2000 英镑，直到我们知道我们可以把它做好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T12:52:43.013

虽然 Sqlite 应该可以正常工作，但它可能是矫枉过正。您只需要一个简单的二进制搜索即可。如果在一个大文件上速度太慢，请按前两位数将其拆分为 10 或 100 个子文件。

或者，您可以将数据加载到支持二进制搜索的[CFArray](https://developer.apple.com/library/mac/#DOCUMENTATION/CoreFoundation/Reference/CFArrayRef/Reference/reference.html)`CFArrayBSearchValues`中（请参阅 参考资料）。虽然这会对初始加载造成性能损失，但它在后续搜索中的性能可能比对一个或多个文件的自定义二分搜索更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T13:50:57.050

正如我在评论中已经说过的那样 - 这并不难测试，您可以将大型数据库加载到 Core Data 存储中并创建一个测试应用程序以查看返回结果的速度。

我说 Core Data over SQLite - 因为它针对平台进行了优化（即使它使用 SQLite 作为存储介质），并且更容易编写返回值并显示它们的代码。

**编辑添加**

我创建了一个示例项目，该项目加载了一个包含 11 条记录和 400,000 条记录的数据集。这在 iOS 5 上使用了 Core Data。

在我的 iPad2 上运行测试（是 2）

搜索时间在 3-8 毫秒（0.003 - 0.008 秒）之间变化，较小和较大的数据集之间没有明显差异。

这是未经优化的代码，在调试模式下运行，并且不是为任何类型的性能增强而编写的 - 搜索谓词是在每次搜索时创建的，而不是缓存的，例如，没有线程。

400,000 条记录的数据存储大小为 17.2 mb，因此即使是更大的 450 万条记录也可以轻松容纳在 iPad 上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T16:05:29.483

SQLite 速度惊人。包含 450 万条记录的测试表具有以下结构：

```
CREATE TABLE testtable (numericid INTEGER PRIMARY KEY, testtext TEXT); 
```

它填充了 numericid (0, 1, .... ) 的递增值和 testtext 的字符串。

在 MacBook Pro（2009 年）上以原子方式完成所有插入需要 1 小时 42 分钟。生成的 SQLite 文件大小为 94 MB。

在 iOS 应用程序内部，数据库在 viewDidLoad 方法中打开。一个简单的按钮触发数据库查询，如下所示：

```
- (void)btnPressed:(UIButton *)sender{

    NSLog(@"btn pressed, start");

    sqlite3_stmt *statement = nil;

    NSString *querystring;

    querystring= [NSString stringWithFormat:@"SELECT * FROM testtable WHERE numericid = 2571312;"];  

    const char *sql = [querystring UTF8String];

    NSLog(@"sql is: %s", sql);

    if (sqlite3_prepare_v2(dbConnection, sql, -1, &statement, NULL)!=SQLITE_OK){

        NSLog(@"sql problem occured with: %s", sql);
        NSLog(@"%s", sqlite3_errmsg(dbConnection));

    }
    else
    {

        while (sqlite3_step(statement) == SQLITE_ROW) {            

            NSString *numericid = [NSString stringWithUTF8String:(char*)sqlite3_column_text(statement, 1)];
            NSString *testtext = [NSString stringWithUTF8String:(char*)sqlite3_column_text(statement, 0)];
            NSLog(@"%@",[NSString stringWithFormat:@"%@ (%@)", numericid, testtext]);

        } // while        

    }

    sqlite3_finalize(statement);    

    NSLog(@"btn pressed, finished");    

} 
```

导致输出：

```
2012-08-10 17:51:36.734 DBQueryTest[28462:707] Database Successfully Opened
2012-08-10 17:51:39.083 DBQueryTest[28462:707] btn pressed, start
2012-08-10 17:51:39.087 DBQueryTest[28462:707] sql is: SELECT * FROM testtable WHERE numericid = 2571312;
2012-08-10 17:51:39.099 DBQueryTest[28462:707] text2571312 (2571312)
2012-08-10 17:51:39.102 DBQueryTest[28462:707] btn pressed, finished 
```

所以一个查询需要不到**19 毫秒**！这可以针对 numericid 的几个值重现，尽管我没有运行完全随机的统计评估测试。

结论：此测试设置满足您的要求。SQLite 绝对是一种方法。

**更新：**

具有 100000 个键值的快速随机访问测试验证了第一个结果。将 sql 语句字符串创建和耗时的 NSLog 输出排除在时间测量之外，平均数据库查询时间下降了一个数量级：

**平均查询时间**：1.8 ms

**平均偏差**：0.4 ms

**最大查询时间**：25.9 ms

**最小查询时间**：0.6 ms

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T13:23:14.330

在 iOS 上将这些数据加载到内存中是不行的。

您应该使用 SQLLite。这就是它的用途，你不会做更好的处理文件 IO 代码。

# c++ - 所有类型的零值？

> ID：11901934
> 
> 赞同：5
> 
> 时间：2012-08-10T12:44:19.703
> 
> 标签：c++, c++11, initialization, zero

在 C++11 中，有没有办法将算术和类类型的值初始化为零（算术类型在运行时绝对没有开销）？

```
template<typename T> void myFunction(T& x)
{
    x = 0; // How to make this works for T = double but also for T = std::string ?
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-10T12:56:08.587

您可以使用默认构造函数来“清除”一个变量：

```
template<class T>
void clear(T &v)
{
    v = T();
} 
```

这将适用于所有具有默认构造函数*和*赋值运算符的原始类型、指针和类型（默认情况下，所有类都将具有，除非被告知不要这样做，或者它们被设置为受保护/私有）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T18:31:54.810

`x = {};``T t = {};`是/的自然赋值对应物`T t {}`，它本身就是获取初始化变量的自然方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T12:51:04.233

将一个类初始化为零`= 0;`对于某些类可能没有意义，除非它们已经定义了`=`运算符。

如果您只调用指针和简单类型，它可以工作（只会`T`是：`int`、、、、`double`）。`myClass*``myClassB*`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-13T04:00:10.470

您的标准在经典 C++ 中是不可能的。没有一个答案会完全奏效。因为`TYPE t()`和`TYPE t {}`都调用默认构造函数。因此，如果没有默认构造函数，则会出现编译失败。

你将不得不做类似的事情`ZeroMemory`。

但请记住，默认构造函数无论如何都是在运行时运行的。

# flash - 从儿童 SWF 进行交流

> ID：11901935
> 
> 赞同：0
> 
> 时间：2012-08-10T12:44:26.937
> 
> 标签：flash, actionscript, dispatchevent

我正在努力在一个项目中从孩子到父母 SWF 进行通信，其中父母从影片剪辑中调用孩子。

父动画剪辑在动作层中有这个

```
var loader:Loader = new Loader();
var defaultSWF:URLRequest = new URLRequest("child.swf");
loader.load(defaultSWF);

//I'm using an if statement to check if the movieclip is loaded to stage

if (loader.parent != null) {
loader.dispatchEvent(new Event(Event.ADDED_TO_STAGE)); 
trace("loader added to stage");  // trace returns positive
loader.content.addEventListener("directions", childLoader_someSignalHandler);
}

//once a button in the child SWF is clicks the playhead will 
//change position on the parent.    
function childLoader_someSignalHandler(event:Event):void {
    gotoAndStop("directions");
} 
```

子 SWF 将此代码发送给父级：

```
centre_btn.addEventListener(MouseEvent.MOUSE_DOWN, childBtn_mouseDownHandler);
 // thanks to "Florent" for this code.
function childBtn_mouseDownHandler(event:MouseEvent) {
    dispatchEvent(new Event("directions"));
} 
```

我返回的错误是：

> TypeError：错误 #1009：无法访问空对象引用的属性或方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T12:51:39.290

您需要从子 MovieClip 参考备份到父 MC。相信这可以通过以下方式完成：

```
MovieClip(root).dispatchEvent(new Event("directions")); 
```

# c# - EF 4.3 代码优先中的“更新数据库” - 值不能为空

> ID：11901945
> 
> 赞同：0
> 
> 时间：2012-08-10T12:44:53.470
> 
> 标签：c#, asp.net-mvc-3, entity-framework, ef-code-first, entity-framework-migrations

使用 asp.NET MVC3，我正在尝试创建具有以下内容的抽象类/模型：

```
namespace core.Models.Concrete
{
  public class item
  {
    [Key]
    public Guid id { get; set; }
    public Type ConcreteType { get; set; }
    public itemtype Type { get; set; }
    public string barcode { get; set; }
    public int rating { get; set; }
    public string Title { get; set; }
  }
}

public enum itemtype 
{
  Game,
  Book,
  Film
} 
```

由以下人员使用：

```
namespace core.Models.Abstract
{
  public class game : item
  {
    public gamePlatform platform { get; set; }
  }

  public enum gamePlatform
  {
    PC,
    X360,
    PS3,
    Wii
  }
} 
```

当我`update-database`在 Entity Framework 4.3 代码中运行第一次迁移时，我得到：

```
Value cannot be null.
Parameter name: key 
```

难道我做错了什么？这甚至是一种公认​​的做事方式吗？我真的不想使用接口，因为这意味着在使用的每个事物中实现所有字段`item`

**编辑** 我刚刚发现这来自`global.asax.cs`Application_Start中的以下代码：

```
protected void Application_Start()
    {
      AreaRegistration.RegisterAllAreas();

      RegisterGlobalFilters(GlobalFilters.Filters);
      RegisterRoutes(RouteTable.Routes);

      //System.Data.Entity.Database.SetInitializer<DataContext>(new DataContextInitializer());

      using (coreContext TestContext = new coreContext())
      {
        var x =TestContext.Users.Count();  <!-- THIS LINE HERE
        try
        {
          Roles.CreateRole("User");
        }catch
        {
          //Already created
        }
      }

    } 
```

核心背景：

```
public class coreContext : DbContext
    {
 public DbSet<core.Models.Abstract.game> games { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T12:56:33.513

您的错误来自`public Type ConcreteType`，您是否缺少类定义？Type 通常是指[System.Type](http://msdn.microsoft.com/en-us/library/system.type.aspx)是你真正想要放在你的类中的吗？EF 无法将其转换为 SQL 类型。

# php - 复杂的 Mysql 数据库连接

> ID：11901949
> 
> 赞同：1
> 
> 时间：2012-08-10T12:45:17.923
> 
> 标签：php, mysql, join

我正在使用旧数据库创建一个新系统，需要一些帮助（因为缺乏经验） 这可能过于复杂，但这就是数据库的设置方式，我无法更改它。

有3张桌子。会话 1、会话 2 和注册人。

Session 1 和 Session 2 除了内容是一样的。所以它的工作原理是，如果一个人想在特定日期预订会话 1 和会话 2，数据库将在会话 1 和会话 2 的“id”行中插入“5”。'id' 是主索引。

“注册人”中有 2 行包含一个列表（例如 5、6、7），其中包含注册人姓名和在会话 1 和会话 2 中找到的一些 id。因此，如果您想知道该人是否预订会话 1，会话的 id 将在注册人会话 1 列表中。

就像我说的。复杂。

我可以毫无困难地进行单独的查询

```
SELECT * FROM Session_1 WHERE id IN ($registrant_session_1 /* This is a single quote implode for the ouput of registrant_session_1 */ )" 
```

和

```
SELECT * FROM Session_2 WHERE id IN ($registrant_session_2 /* This is a single quote implode for the ouput of registrant_session_2 */) 
```

我需要帮助创建一个将它们连接起来以同时输出的查询。所以理论是我首先进行会话检查，然后根据 id 加入它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T12:49:45.870

也许您可以使用“联合”子句 `FROM Session_1 WHERE Session_1.id IN ($registrant_session_1 /* This is a single quote implode for the ouput of registrant_session_1 */ ) UNION (SELECT * FROM Session_2 WHERE Session_2.id IN ($registrant_session_2 /* This is a single quote implode for the ouput of registrant_session_2 */)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T12:51:14.467

这是我第一次学习 MySQL 时发现的一个特别有用的网站[http://www.tizag.com/mysqlTutorial/mysqljoins.php](http://www.tizag.com/mysqlTutorial/mysqljoins.php)

# c# - WCF 数据服务和映射的 DTO

> ID：11901951
> 
> 赞同：4
> 
> 时间：2012-08-10T12:45:22.460
> 
> 标签：c#, wcf-data-services, dto

我有一个带有域模型的服务，我想向客户公开数据。服务有典型的架构：数据库、ORM(EF)、带有领域模型的业务层。

我想使用 WCF DataServices 向客户端公开数据，但我无法将数据对象从域模型发送到客户端。我将使用 DTO 与客户端交互，并且我有 dto<=> 数据对象映射。

DataServices 有反射提供者，在这种情况下似乎很好（让我们考虑只读场景）。但是反射提供者需要`IQueryable<dto>`暴露属性。这就是问题所在。所以我看到以下解决方法：

1.  加载所有域对象，将它们全部映射到 dtos 并返回结果 dtos。如果存在许多域对象，则方法非常糟糕。
2.  创建“linq2dto”提供程序并动态生成对应的“linq2EF”查询，在查询实现点从数据库获取数据对象并执行映射。听起来不错，但正如我所见，这是一项复杂的任务。

所以，伙计们，我需要帮助。我不想编写（和支持！）一个新的 linq 提供程序。可能有一些我可以使用的“通用 linq2anyware”实现？

另一方面，我真的不能向客户端公开数据对象并使用 DataServices EF 提供程序。有没有一些简单的方法来实现这种映射？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T13:12:10.540

简而言之，手动编写每个 DTO。

可能不是您正在寻找的答案，但这是我的建议。如果不能暴露实际类型，请手动编写轻量级卫星类型，例如

```
class Foo
{
    //large domain type

    FooDTO ToDTO()
    {
        return new FooDTO(...)
    }
}

class FooDTO
{
    //lightweigh
} 
```

我还没有看到任何可以帮助您制作通用转换器的 LINQ 提供程序，但这可能是因为我的经验有限。反对使用泛型转换器的另一个论点是域类型可能需要非常具体的指令，说明轻量级对象中包含什么以及排除什么。

或者，您可以尝试编写一个通用类，该类使用反射来遍历所有公共属性并返回一个序列化对象，但是您如何知道线路另一端的对象类型（如果您不能使用您的域类型）？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T16:29:22.377

不幸的是，如果您真的打算使用 DTO，您将需要承担将查询树转换为 EF 可以使用的工作的工作。这很可能使您进入自定义提供程序领域，这是您必须处理的另一个问题。

对于查询树翻译，您可能会查看类似[re-linq](http://relinq.codeplex.com/)或[IQ toolkit](http://iqtoolkit.codeplex.com/)的内容。

我们可以在关于为什么需要 DTO 的问题的评论中进行简短的对话吗？我认为如果他们也能理解这个细节，这个问题对其他人会更有用。

# java - 将 html5 元素值传递给 servlet

> ID：11901957
> 
> 赞同：-2
> 
> 时间：2012-08-10T12:45:48.127
> 
> 标签：java, html, servlets

如果我设法设计了一个 html5 网页，并且我有一个单选按钮、一个复选框或一个文本框，我可以在单击提交按钮时将这些值传递给 servlet 吗？

我现在知道如何在普通的 html 中完成所有这些操作。我想使用 html5 让它看起来很漂亮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T12:47:35.547

> 如果我设法设计了一个 html5 网页，并且我有一个单选按钮、一个复选框或一个文本框，我可以在单击提交按钮时将这些值传递给 servlet 吗？
> 
> 我现在知道如何在普通的 html 中完成所有这些操作。

HTML 5 仍然是普通的 HTML。一切仍然以同样的方式工作。有些事情有新的选择。有一些新的东西。

所以：是的。

> 我想使用 html5 让它看起来很漂亮。

HTML 5 没有增加任何与语言相关的美感。

# windows-live - 是否可以通过 Live SDK 获得 facebook 好友？

> ID：11901960
> 
> 赞同：1
> 
> 时间：2012-08-10T12:45:52.837
> 
> 标签：windows-live

我可以将我的 Facebook 帐户连接到 Windows Live。之后，我所有的 fb 朋友都被导入 Live，我可以将他们视为我的联系人。是否可以使用 Live SDK 以某种方式获取它们？请求 /me/friends 仅返回“本机”实时联系人。

# java - 标记稍后需要在 Java 中删除的变量的最佳实践是什么？

> ID：11901964
> 
> 赞同：15
> 
> 时间：2012-08-10T12:46:19.763
> 
> 标签：java

我花了两周时间试图计算基于变量的东西。

事实证明，我之前设置了变量是为了暂时解决另一个问题，并且再也没有回去纠正它。

通常，我尝试用 //ToDo 标记代码以提醒我删除临时变量。

在这种情况下，我没有标记它，因为我正在跳过尝试修复多个问题。（我不知道发生了什么，所以我尝试了各种各样的东西！）

您如何标记您希望稍后删除的临时变量？

1.  您是否在班级顶部将它们实例化为私有？
2.  用类似 //Delete Me Later 之类的东西将它们标记为内联

标记以后需要删除的变量的最佳做法是什么？

（当然，没有一个真正有组织的大脑......）

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-08-10T12:52:58.990

使用注释`@Deprecated`

```
@Deprecated
public void Test() {
  //
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-10T12:52:54.640

经过一番谷歌搜索后找到了它，因为我也很好奇。

```
@Deprecated
public void speak() {
   System.out.println("Meow."); 
} 
```

来自维基百科，关于[Java 注释](http://en.wikipedia.org/wiki/Java_annotations)：

> Java 定义了一组内置于语言中的注解。应用于 java 代码的注释：@Override - 检查该函数是否为覆盖。如果在其中一个父类中找不到该函数，则会导致编译警告。@Deprecated - 将函数标记为已过时。如果使用该函数，则会导致编译警告。@SuppressWarnings - 指示编译器抑制注解参数中指定的编译时警告 应用于其他注解的注解：@Retention - 指定标记注解的存储方式——无论是仅在代码中，编译到类中，还是在运行时通过反射可用. @Documented - 标记另一个注释以包含在文档中。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-10T12:55:41.653

最佳实践是使用版本控制。一旦你修复了一个错误，你可以 git/hg/svn diff 来检查你自上次提交以来所做的事情并删除任何临时更改。如果您需要修复其他错误，但在多次提交中保留“临时更改”，您可以进行部分提交（git add --patch 或 hg qrecord），这样您的“临时更改”就不会被提交和遗忘。对于非常大的临时代码（不是最佳实践，但它可能会发生），您可以创建一个本地分支，您可以在正常代码的基础上继续对其进行变基。一旦您确定要删除“临时更改”，您就可以简单地清理所有未提交的更改，然后测试问题。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-10T13:03:28.860

本地分支（git，搁置 IntelliJ 中的更改，在本地签出两个源副本），因此当您从一项任务转移到另一项任务时，而不是仅仅处理部分完成的工作，您创建第二个分支并不要'在完成之前不要提交/推送第一个。

成对提交/推送 - 所以在你与第二个人讨论代码之前不要提交，第二个人会指向临时代码块并询问你。希望能强迫你在提交之前解决该死的问题。

不要使用 TODO 或其他此类评论，因为它们永远不会被执行。

如果它已经是公开的并且正在外部使用，那么 @Deprecate 它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-10T14:37:16.353

首先，我在每个变量名称前加上“TODO_REMOVE_”或类似名称。这样，如果我忘记删除它并且后来有人遇到它，很明显应该删除该变量。此外，如果我执行下面的最后一步，我将始终在签入之前将其删除。

接下来，我向它添加一个 TODO 注释并用 Deprecated 对其进行注释。我知道其他人说过 TODO 永远不会被执行，但是当我提交时，我的 IDE（在本例中为 IntelliJ）警告我有 X 个 TODO 正在提交。如果您在办理登机手续时收到类似的消息，那应该会在您的脑海中留下一个标志。此外，如果您发现自己经常这样做，请制作一个实时模板、片段或您的 IDE 提供的任何其他内容，这样您只需键入类类型和变量名。

```
@Deprecated
Object TODO_REMOVE_variableName;//TODO Remove 
```

最后，在检查更改集之前，我会尝试重新阅读、理解、改进和确认我编写的每一行代码。这很重要！我知道一开始这听起来可能令人生畏，尤其是对于大的更改或当你有迫在眉睫的最后期限时，但与你编写代码所花费的时间、它揭示的问题和未来的时间相比，这只是杯水车薪它节省是非常值得的。真的，我希望每个开发人员都这样做。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-10T17:45:55.187

如果您使用的是 Eclipse，我建议您使用

有一个新的任务标签，比如“删除”，它可以帮助您轻松识别需要删除哪些临时代码。将优先级设置为高。

打开任务视图以检查 REMOVE 任务并采取措施。

请通过以下链接（也提供了 UI 屏幕截图）

[StackOverflow 关于任务标签的问答](https://stackoverflow.com/questions/4388292/how-do-i-enable-todo-fixme-xxx-task-tags-in-eclipse)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-12T14:50:17.583

我没有对每一个想法/建议发表评论，而是想我会回答，然后让你对这个答案投票。

首先，非常感谢您分享您的流程和想法。对此，我真的非常感激。

我认为有许多因素应该由避免犯愚蠢错误或遭受你已经犯过的错误的愿望驱动。我做了一个（许多。）

让我们假设版本控制和团队审查胜过一切；但是超出了版本控制（假设您将 crappola 提交给您的好代码）：

*   @Deprecated 非常好。它似乎在瞪着你。我们都需要耀眼。希望我们能透过树木看到森林。

*   对我来说，差异是繁重的，因为我经常进行彻底的更改，但这是一个在许多情况下都有效的好建议。

一些值得注意的事情：

因为我通常是唯一的开发者，所以我依赖 ToDos。它们易于使用。我对待办事项有一个非正式的评级系统。例如，真正需要清理的东西是这样的：

```
//TODO * Might be a future crash here // where one star is something I really have to clean up before I ship. 
//TODO *** Can some lines be trimmed from this view adapter? 
```

多颗星是任意的，甚至可能是可选的。我不断地骑自行车穿过它们。@ BriGuy37 - 这是一个有趣的想法。@Sriram - 这也很有趣 - 在某些条件下设置标签。

就我而言，我没有删除//TODO，它让我很伤心。

所有这一切中最大的规则可能是：

以一种不会犯这种愚蠢错误的方式统一你的工作。了解您正在做出哪些改变以及何时做出改变。保持冷静。

再次感谢！很高兴从社区中汲取最佳实践并融入您的工作！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-13T20:27:50.120

如果您使用的是 SVN* 并且您所做的更改应该在提交更改之前修复（例如，用于本地调试/测试的临时更改），您可以添加评论`// STOP-COMMIT`并设置预提交挂钩禁止提交任何包含此文本的文件。

这也适用于标记不应提交给 SVN 的配置文件的本地更改。

如果您的 IDE 支持为给定字符串搜索注释的 TODO 列表，您甚至可以创建自定义 TODO 格式来查找该字符串。

* 我猜你可以对许多其他版本控制系统做类似的事情

# iphone - 助理编辑器中我的 UIButton 的属性

> ID：11901966
> 
> 赞同：0
> 
> 时间：2012-08-10T12:46:22.727
> 
> 标签：iphone, objective-c, xcode

这就是我尝试在**Assistant Editor**中为我的 UIButton 添加属性的方式：

我按住 Ctrl 键从按钮拖动到我的视图控制器窗口的**.h中。**出现一个小框，我选择：**连接**：插座，**名称：**喜爱按钮，**类型：** UIButton，**存储：**弱。

然后它在**Assistant Editor的头文件中创建属性，并在****Standard Editor**的.m 中添加一个synthesize 和nils 。

**但是，在Standard Editor**的我的 .h 中看不到任何属性，但在 .m 中添加了 synthesize 和 nil。这是正确的行为吗？

我的 viewcontroller.m 中也有这些行：

```
- (void)viewDidLoad
{
 [super viewDidLoad];

if ([[selectedObject valueForKey:@"Favorite"] isEqual:@"Yes"])  {

    [favoriteButton setImage:[UIImage imageNamed:@"favoritedItem.png"] forState:UIControlStateSelected];
    [favoriteButton setSelected:YES];
    favoriteButtonSelected = 1; 
```

在 Assistan Editor 中建立连接后，我仍然被告知 favouriteButton 是 viewDidLoad 中未声明的标识符，同时也收到了 synthesize 和 nil 的错误。你能告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T12:52:15.957

```
//.h

@interface ...

@property (nonatomic, assign) IBOutlet UIButton* myFavoriteButton; 
```

# vb.net - 调试时关闭 VisualStudio 中的“Step into:..”立即窗口

> ID：11901968
> 
> 赞同：4
> 
> 时间：2012-08-10T12:46:39.023
> 
> 标签：vb.net, visual-studio

从 VS2010 开始，当我使用 F8 单步执行代码时，我在调试器中得到了在 VS2008 中没有的不必要的文本。我只想看到结果，而不是“步入：..”我尝试在调试器设置中设置不同的选项，但似乎没有任何效果。

例如：

```
 For i As Integer = 0 To 2
     Debug.Print(i)
 Next 
```

当前使用 F8 键时的立即窗口：

```
Step into: Stepping over non-user code 'System.Diagnostics.Debug.Print'
0
Step into: Stepping over non-user code 'System.Diagnostics.Debug.Print'
1
Step into: Stepping over non-user code 'System.Diagnostics.Debug.Print'
2 
```

使用 F8 键时，它曾经只显示结果：

```
0
1
2 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-10T12:49:33.680

试试`Options`-> `Debugging`-> `Output Window`-> `General Output Settings`-> `Step Filtering Messages`。默认情况下已打开。

# javascript - 在页面之间移动时创建一个变量并“存储它”，jquery

> ID：11901971
> 
> 赞同：0
> 
> 时间：2012-08-10T12:46:54.733
> 
> 标签：javascript, jquery, variables, var

我对 js/jquery 很陌生，我试图在一个页面上设置一个变量，存储它，移动页面，然后在新页面上使用该变量。

我做了一个这样的标签 `a id="ex1" href="/example.hmtl">ONE<a>`

点击时会带你到页面/example.html并将一个名为'image'的变量设置为1，jquery id使用的是

```
$("#ex1").click(function() {
  var image = 1;
}); 
```

一旦您在页面上的 example.html id 像要加载到的值中的变量“图像”的值`startAtSlide`

```
$('.iosSlider').iosSlider({
    startAtSlide   : //value of var 'image' goes here,
    snapToChildren : true
}); 
```

那有可能吗，如果可以的话，我会以正确的方式去做吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-10T12:50:24.453

我建议你看看[localStorage](https://developer.mozilla.org/en-US/docs/DOM/Storage)或者你尝试使用[cookie](https://developer.mozilla.org/en-US/docs/Code_snippets/Cookies) （如果你想使用cookie，你有一个[jQuery 插件）](https://github.com/carhartl/jquery-cookie/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T12:53:23.390

刷新页面或导航到另一个（相关）页面会杀死当前的 JavaScript 环境并构建另一个环境。

将变量从一个页面传递到另一个页面并不像您想象的那么简单。

@siidheesh 给你的建议是将一些变量的内容放在位置哈希中，即 # 符号后面的那部分 URL。但这当然在结构方面是有限的——你不能只放置标量值，并且在添加多个变量时就美学而言。

当前，您在其中看到的一些类似行为的大多数当前网站都是使用 AJAX 创建的；这意味着他们不会刷新页面或导航到另一个页面（永远）他们总是请求另一个页面的内容（通过 JavaScript），当他们收到它时，他们会将数据加载到感兴趣的区域。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T12:54:34.153

将数据写入 localStorage 使用：

```
localStorage.setItem.image = 1; 
```

从存储使用中读取它

```
localStorage.image 
```

就这样

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T13:00:51.437

许多人建议使用`localStorage`，但我必须警告说，`localStorage`目前还没有每个浏览器都普遍支持。

Cookies 是一个可行的解决方案，但是，就您的目的而言，我认为`location.hash`这将是最好的解决方案。您的链接如下所示：

```
<a href="index.html#1">ONE</a> 
```

并在 javascript 中获取该变量：

```
var slideNumber = location.hash.substr(1); 
```

这里我们使用 substr 来跳过`#`location.hash 中提供的字符串

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-10T12:49:40.847

方法不止两种：

1.  使用 cookie 存储变量，然后在第二页中检索它

2.  使用 url 参数传递该变量`a id="ex1" href="/example.hmtl?startat=1">ONE<a>`。然后使用 javascript 解析该参数（使用 location.href）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-10T12:58:31.420

您可以在 window.location.href 上使用正则表达式来获取 POST 变量的值。

一个功能：

```
function getUrlVars()
{
    var vars = {};
    var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,
    function(m,key,value)
    {
        vars[key] = value;
    });
    return vars;
} 
```

然后你可以得到值`getUrlVars()["lang"];`（应该返回“en”）

只需将它们设置在您的网址中`example.html?lang=en`

# export - 读取 MidexPro 创建的 MXD 文件

> ID：11901972
> 
> 赞同：0
> 
> 时间：2012-08-10T12:47:03.997
> 
> 标签：export

有没有人编写过自己的代码来查看由医疗实践管理软件 MidexPro 创建的 MXD 文件？我想从 Aptxt1.mxd（日记文件）中导出约会。

我知道日记屏幕有一个导出按钮，但最好按计划运行程序，无需人工干预。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T14:09:07.380

Aptxt1.mxd 仅存储约会类型列表，而不是实际约会。要获得任何有用的信息，您还必须转换许多其他文件才能重建整个日记。我开发了实用程序来将所有 MidexPro 数据转换到我们自己的系统 Practice Manager 中，因为我们会定期将用户转换到我们的软件。我们也有基于网络的日记预订系统，如果这是您想要实现的目标。

# r - 在 R 中定义一个参数

> ID：11901973
> 
> 赞同：0
> 
> 时间：2012-08-10T12:47:07.690
> 
> 标签：r, matrix

大家好，我有这个矩阵：

```
m<-matrix(data=c(1,2,3,4,5,6*K,7,8,9,10,11,12),nrow=3,ncol=4) 
```

但我无法定义它，因为

```
K 
```

不是数字参数。

不知道价值多少

```
K 
```

所以我想要那个

```
K 
```

保持该矩阵的参数。

例如，我想用这个参数 K 求解一个线性方程组。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T12:58:07.223

你需要把它变成一个`function`

```
m <- function(K) matrix(data=c(1,2,3,4,5,6*K,7,8,9,10,11,12),nrow=3,ncol=4) 
```

然后，您可以使用 或 求解适当的`optim`方程`optimize`。

# oracle - GRANT 不在 SQL Developer 的 CREATE FUNCTION 脚本中执行

> ID：11901976
> 
> 赞同：0
> 
> 时间：2012-08-10T12:47:23.850
> 
> 标签：oracle, oracle-sqldeveloper

在 SQL Developer 中执行以下脚本 (F5)：

```
CREATE OR REPLACE FUNCTION "FOO"."BAR"
...
END BAR;

GRANT EXECUTE ON "FOO"."BAR" TO PUBLIC; 
```

将创建函数，但将 GRANT 行嵌入到函数中（导致其处于无效状态），而不是实际对函数执行 GRANT。

但是，如果在不同的 SQL Developer 窗口/会话中执行 GRANT，它将按预期工作。

如果在 SQL*Plus 中执行，这将按预期工作：

```
CREATE OR REPLACE FUNCTION "FOO"."BAR"
...
END BAR;
/

GRANT EXECUTE ON "FOO"."BAR" TO PUBLIC;
/ 
```

此语法在 SQL Developer 中不起作用。

有没有办法以可以在 SQL Developer 中正确执行的方式组合这些命令？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T13:01:17.067

尝试在 SQL Developer 中也使用斜杠，就像在 sqlplus 中一样

```
CREATE OR REPLACE FUNCTION "FOO"."BAR"
...
END BAR;
/

GRANT EXECUTE ON "FOO"."BAR" TO PUBLIC;
/ 
```

# socialengine - 社交引擎如何获得大头像？

> ID：11901977
> 
> 赞同：2
> 
> 时间：2012-08-10T12:47:27.337
> 
> 标签：socialengine

为了显示我使用的小头像照片`$this->itemPhoto(_someID_, 'thumb.icon')`，所以`'thumb.icon'`参数使该方法返回小照片。使 SE4 返回大用户照片的论点是什么？缺乏文档使琐碎的事情难以弄清楚。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T08:36:13.837

如果您需要大或小的图像大小，您可以这样做：

对于大图像：

```
thumb.image.large 
```

对于小图像：

```
thumb.image.small 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T11:18:18.460

经过几天的研究，我尝试了试错方法并得到了解决方案：`thumb.profile` 这将呈现用户的个人资料图片。

# login - 在 Symfony2 中登录检查后执行代码

> ID：11901978
> 
> 赞同：1
> 
> 时间：2012-08-10T12:47:32.897
> 
> 标签：login, symfony

Symfony2 提供了一个非常简单的用户登录工具。实际上，该框架会为您完成所有安全控制。如[官方文档](http://symfony.com/doc/current/book/security.html)所示，可以使用控制器（*SecurityController*）来加载登录表单页面。然后，关联一个路由来**登录检查**用户通过登录表单提供的输入。如果登录正确，则将用户重定向到主页（或另一个）；否则，用户必须重新输入用户名和密码。

由于我需要在会话中从数据库中加载一些用户首选项，我想知道一旦登录检查确定用户登录的正确性，是否有办法执行这样的功能。任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T12:51:48.107

您必须自己编写`AuthenticationHandler`将实现以下两个接口：

```
class AuthenticationHandler implements AuthenticationSuccessHandlerInterface 
```

在该处理程序中，您应该定义方法`onAuthenticationSuccess()`

在此方法中，您可以做任何您需要的事情。

不要忘记也设置你的听众`security.yml`

```
firewalls:
    main:
        ....
        your_form_login:
            ...
            success_handler: your.authentication_handler 
```

还要检查这个[有用的文档](http://symfony.com/doc/current/cookbook/security/custom_authentication_provider.html)

# vba - 获取 Excel 工作表中插入的 HTML Checkbox 的值

> ID：11901984
> 
> 赞同：0
> 
> 时间：2012-08-10T12:47:38.340
> 
> 标签：vba, excel

我有一个从 HTML 表中复制的电子表格，用于我们的一个内部应用程序。该表已粘贴到 Excel (2010) 中，并具有 True/False 值的复选框。有超过 1800 个复选框，加载电子表格需要很长时间。

如何快速将这些转换为是/否值？

我试图创建一个新列并插入一个 IF 语句，但结果总是错误的。我想我引用了单元格值而不是复选框值。复选框的名称类似于“HTMLCheckbox1”...“HTMLCheckbox1824”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T16:05:25.910

我想不出一种通过 Excel 公式来做到这一点的方法——你没有明确提到它，但你可以使用 VBA 来获得解决方案。

您应该能够通过作为对象`OLEObjects`成员的集合访问这些复选框`Worksheet`。然后，您可以检查`progID`每个对象的 ，看看它是否是一个 HTML Checkbox ( `Forms.HTML:Checkbox.1`)，如果是这种情况，请记下它的值。

这是我拼凑的一些示例代码，它搜索`Sheet1`HTML 复选框，然后用包含以下三个元素的字符串数组填充集合：

*   HTML名称
*   价值
*   已选中

例如，HTML`<input type="checkbox" name="sports" value="soccer" />`将导致：

*   HTML名称：“运动”
*   价值：“足球”
*   已检查：“真”或“假”取决于是否已检查

然后将此集合写入`Sheet2`. 复选框值被转换为字符串。

```
Sub GetCheckBoxValues()

    Dim colCheckboxValues As Collection

    Set colCheckboxValues = GetCheckBoxValuesFromSheet(Sheet1)

    Dim lCount As Long

    For lCount = 1 To colCheckboxValues.Count

        Sheet2.Cells(lCount, 1).Value = colCheckboxValues.Item(lCount)(0) 'HTMLName
        Sheet2.Cells(lCount, 2).Value = colCheckboxValues.Item(lCount)(1) 'Value
        Sheet2.Cells(lCount, 3).Value = colCheckboxValues.Item(lCount)(2) 'Checked (or unchecked)

    Next lCount

End Sub

Function GetCheckBoxValuesFromSheet(sht As Worksheet) As Collection

    Const HTMLCheckBoxProgID As String = "Forms.HTML:Checkbox.1"

    Dim colCheckBoxes As Collection
    Set colCheckBoxes = New Collection

    Dim oOLEObject As OLEObject

    Dim lCount As Long
    lCount = 0

    For Each oOLEObject In sht.OLEObjects

        If oOLEObject.progID = HTMLCheckBoxProgID Then

            Dim sCheckBoxData(2) As String

            sCheckBoxData(0) = oOLEObject.Object.HTMLName
            sCheckBoxData(1) = oOLEObject.Object.Value
            sCheckBoxData(2) = oOLEObject.Object.Checked

            lCount = lCount + 1

            colCheckBoxes.Add Item:=sCheckBoxData, Key:="CheckBox" & CStr(lCount)

        End If

    Next oOLEObject

    Set GetCheckBoxValuesFromSheet = colCheckBoxes

End Function 
```

# tsql - 在 TSQL 中是否可以将第一行作为列名？

> ID：11901985
> 
> 赞同：0
> 
> 时间：2012-08-10T12:47:47.220
> 
> 标签：tsql

在将值从 Sql Server Management Studio 复制到 Excel 时，这将非常有用。

是否有这样的模板可以将我的查询倒入其中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T13:02:51.357

不，没有任何东西可以使第一行包含列标题，但是正如 Martin Smith 在评论中指出的那样，如果您只想将结果复制到包含列标题的 Excel（或其他任何东西），您可以正确-单击并使用“带有标题的复制”

![在此处输入图像描述](../Images/2ae724bfaa85b3268bb46f85f337bb77.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T12:55:28.210

不，没有选项可以使列名成为结果集的一部分。

这并不奇怪，因为每一列只能包含一种数据类型的值——而且每列都是文本的结果集是很不寻常的。因此，即使它是一种选择，它的效用也有限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T12:49:56.113

Dint很理解你的问题，但是你可以将数据Sql Server Management Studio导出到excel，或者选择所有行右键复制粘贴。

# mysql - 使用 Zend_Db_Select 复制 MySQL LEFT OUTER JOIN

> ID：11901986
> 
> 赞同：1
> 
> 时间：2012-08-10T12:47:49.087
> 
> 标签：mysql, zend-framework, zend-db, zend-db-select

我一遍又一遍地尝试使用 Zend_Db_Select 对象复制我的 MySQL 查询，但我无法在 Zend 中复制结果。

MySQL 查询：

```
SELECT s.id, s.project_id 
FROM staging s 
LEFT OUTER JOIN results r ON s.id = r.id 
WHERE r.id IS NULL 
```

我在 Zend 中拥有的东西：

```
$query = $db->select()
           ->from(array('s' => 'staging'), array('id', 'project_id'))
           ->joinLeft(array('r' => 'results'), 's.id = r.id')
           ->where('r.id IS NULL'); 
```

查询的输出在 Zend 中给了我一个空行，`results`在 MySQL 中直接给了我正确的行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T12:56:24.713

显然我在 中遗漏了一个必需的第三个参数`leftJoin`，在本例中是一个空数组`array()`。

所以，现在我的最终工作代码如下所示：

```
$query = $db->select()
           ->from(array('s' => 'staging'), array('id', 'project_id'))
           ->joinLeft(array('r' => 'results'), 's.id = r.id', array())
           ->where('r.id IS NULL'); 
```

这是[Zend_Db_Select 文档](https://framework.zend.com/manual/1.11/en/zend.db.select.html)。

# c++ - C++\Win32 有关所有驱动器的信息：硬盘驱动器、USB 驱动器、磁盘驱动器、软盘驱动器等

> ID：11901990
> 
> 赞同：1
> 
> 时间：2012-08-10T12:48:05.657
> 
> 标签：c++, winapi, system, drives

我想获取有关系统中所有类型驱动器的信息：硬盘驱动器、USB 驱动器、磁盘驱动器、软盘驱动器。

关于我想知道的每一个：大小、可用空间、文件系统以及它是真实的还是模拟的。

硬盘驱动器：内部或外部。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T12:53:24.920

简答[WMI Windows 管理规范](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394582%28v=vs.85%29.aspx)。搜索它。它会告诉你比你想知道的更多的信息。

或者您可以参考 GetLogicalDrives() ：[列出我的计算机上安装的物理驱动器](https://stackoverflow.com/questions/8823597/listing-physical-drives-installed-on-my-computer)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-27T18:42:29.300

我们正在开发这个 API，最终将允许您与存储设备进行通信。它是开源的，您可以查看当前代码以获取一些信息。查看更多功能： [https ://github.com/virtium/vtStor](https://github.com/virtium/vtStor)

# c++ - GCC 在调试模式下崩溃，在发布模式下运行良好？

> ID：11901992
> 
> 赞同：0
> 
> 时间：2012-08-10T12:48:07.993
> 
> 标签：c++, debugging, gcc, crash

我有这个简单的循环，通过一组基类指针运行：

```
Object * objects[2];

objects[0] = new GreenObject;
objects[1] = new RedObject;
objects[2] = new BlueObject;

for (int i = 0; i < 3; ++i) {
    cout << i << " ";
    objects[i]->info();
} 
```

在调试模式下，程序在循环的第三次迭代中崩溃，在输出 之后立即调用`i`该`info()`方法。在发布模式下不会发生这样的事情，它正在按应有的方式运行。这不是对象的问题，因为即使我使用其他派生类它也会锁定。

Windows 7 64bit 下的 GCC 4.4.0

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-10T12:51:24.693

这（和`for`循环）超出了数组的末尾：

```
objects[2] = new BlueObject; 
```

导致未定义的行为。它在发行版中运行的事实只是（不）幸运。未定义行为的一个子集是它的行为与您预期的一样。

数组索引从`0`到`N - 1`，其中`N`是数组中元素的数量。`objects`在有效索引的情况下是`0`且`1`仅。将声明更改`objects`为：

```
Object * objects[3]; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-10T13:02:43.590

访问`objects[2]`是未定义的行为。

期望编程错误总是导致崩溃或明显的故障是一个常见的错误。

未定义的行为意味着任何事情都可能发生，包括在某些情况下*似乎有效。*

如果您想要可预测、可重复的行为，那么您应该编写正确的代码。

# apache - 选项 FollowSymLinks 或 SymLinksIfOwnerMatch 已关闭

> ID：11901993
> 
> 赞同：32
> 
> 时间：2012-08-10T12:48:10.043
> 
> 标签：apache, .htaccess, rewrite, httpd.conf

我已经阅读了有关此问题的几乎所有可能的内容，但找不到任何可以解决我的问题的内容。这是我得到的错误日志：选项 FollowSymLinks 或 SymLinksIfOwnerMatch 已关闭，这意味着禁止 RewriteRule 指令：/var/www/vhosts/site.com/httpdocs/cgi-bin/cron.pl

访问站点时，我得到 403 Forbidden “您无权访问此文档”。错误。

我已经修改了我的 .htaccess 有这个：

```
Options +FollowSymLinks +SymLinksIfOwnerMatch
AddDefaultCharset utf-8
RewriteEngine on
RewriteCond %{HTTP:Authorization} ^(.*)
RewriteRule ^(.*) - [E=HTTP_CGI_AUTHORIZATION:%1]
.
.
. 
```

我还将它添加到 httpd.conf：

```
AddHandler cgi-script .cgi
AddHandler cgi-script .pl

<Directory />
Options -ExecCGI FollowSymLinks -Includes -IncludesNOEXEC -Indexes -MultiViews -SymLinksIfOwnerMatch
AllowOverride All
</Directory> 
```

真的，接下来我能做什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-06-19T21:24:09.050

注意您的 Web 应用程序所在的目录不包含在另一个已限制的父目录中`FollowSymLinks`。

`FollowSymLinks`解决方案是在顶层目录（父目录）启用或将您的 Web 应用程序移动到`FollowSymLinks`父目录中“否”范围之外的目录。

例如，下一个`apache`配置可能是一个问题，并且肯定会重现该问题：

```
 <VirtualHost *:80>
      ...  
      <Directory "D:/">
        Options Indexes
      </Directory>

      <Directory "D:/mywebfolder/">
        Options Indexes FollowSymLinks
      </Directory>
      ...
   </VirtualHost> 
```

为避免此问题：

```
 <VirtualHost *:80>
      ...  
      <Directory "D:/">
        Options Indexes FollowSymLinks
      </Directory>
      ...
      ...
   </VirtualHost> 
```

或将您`D:/mywebfolder/`移至另一个单位，例如`E:/mywebfolder`

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-17T21:33:41.063

请注意[选项的 apache 文档中的](http://httpd.apache.org/docs/current/mod/core.html#options)这一点：

> 将带有 + 或 - 的选项与没有的混合是无效的语法，并且将在服务器启动期间被带有中止的语法检查拒绝。

您在块中混合了带有 +/- 和不带的选项（即参见 FollowSymLinks）。

我今天在我忘记在选项前面添加“+”的一个网站上出现了同样的错误。我添加了“+”，它现在可以工作了。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-02-07T18:26:26.710

我遇到了这个问题，最后发现因为我将 php 配置为 fast-cgi 而不是作为 apache 模块，所以我必须更新`\conf\extra\httpd-fcgid.conf`然后添加`FollowSymLinks`到这个块

```
<Files ~ "\.php$">
Options ExecCGI FollowSymLinks
AddHandler fcgid-script .php
FcgidWrapper "d:/php/php-cgi.exe" .php
</Files> 
```

希望这可以帮助某人并节省我浪费的时间。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-09-15T07:22:34.633

我最近遇到了类似的错误，我为我修复了它。此问题的一个可能根本原因是错误文本本身中提到的目标文件夹（进行重写）没有设置 FollowSymLinks 选项。从您的错误消息中，我看到这个文件夹是：/var/www/vhosts/site.com/httpdocs/cgi-bin/

在这种情况下，您可以在该特定文件夹的 .htaccess 中使用：

```
Options +FollowSymLinks 
```

上面的这个设置只会在现有选项的顶部添加这个文件夹的 FollowSymLinks（这就是 + 的意思。它只添加这个选项）。

例子：

```
<IfModule mod_rewrite.c>
  RewriteEngine On
  Options +FollowSymLinks
</IfModule> 
```

这就是我遇到错误的情况，这就是我修复它的方法。就我而言，有一个不同的文件夹（不是 cgi-bin）和不同的文件（一个 PHP 文件）。

警告：

*   确保您确实要重写 URL 以指向 cgi-bin。如果您在这里有重要的脚本，它可能会影响安全性，您可能不希望发生这种重写。如果您在 cgi-bin 中进行此设置，人们将能够在 cgi-bin 中查看您的脚本的输出，除非您知道自己在做什么，否则这可能不好。

笔记：

*   请注意，根据本地设置/浏览器设置，更新 .htaccess 可能不会在您输入 URL 时立即在浏览器中提供效果，并且可能会立即显示相同的结果，而不考虑您对 .htaccess 的修改。在这种情况下，您可能必须重新启动浏览器才能查看修改的效果。对于初学者来说，这在尝试修复时可能非常耗时，并且会混淆为什么它不起作用。此外，如果您修改 httpd.conf（不是我的帖子中的情况），您必须重新启动 Web 服务器。

*   在调查修复我的错误时，我在网上注意到这个错误也发生在某些人身上，对于 Plesk 安装，在这种情况下，该特定问题的解决方案是编辑 /etc/apache2/mods-enabled/dir。 conf，并更新 DirectoryIndex，并将 index.php 移动到 index.pl 之前。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-04T11:26:17.090

把它放在你的根目录中：

```
<Directory />
    #AllowOverride none
    Require all denied
    Options FollowSymLinks
    Options SymLinksIfOwnerMatch 
</Directory>

<Directory "root">
    Options FollowSymLinks
    Options SymLinksIfOwnerMatch 
</Directory> 
```

# validation - 验证 Twitter 卡片？

> ID：11901995
> 
> 赞同：0
> 
> 时间：2012-08-10T12:48:22.097
> 
> 标签：validation, twitter, xml-namespaces

一个客户试图在他的网站上使用 w3 验证器。他在本周末使用这篇文章实现了 Twitter Cards：http: [//yoast.com/twitter-cards/](http://yoast.com/twitter-cards/)

但是，这会导致站点验证失败。对于 Facebook，您只需添加 xmlns:fb="http://www.facebook.com/2008/fbml" 以便验证器知道新语法。

有人知道 Twitter 的等价物吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T04:08:29.500

没有 Twitter 等价物。您必须接受这样一个事实，即使用 Twitter 特定的元标记会破坏验证或在以下代码段中带来一线希望：

> ### [Twitter 卡片和开放图表](https://dev.twitter.com/docs/cards#open-graph)
> 
> [...] 如果您已经在使用 OpenGraph 来描述页面上的数据，那么无需复制标签和数据即可轻松生成 Twitter 卡片。当 Twitter 卡处理器在您的页面上查找标签时，它首先检查 Twitter 属性，如果不存在，则回退到支持的 Open Graph 属性。这允许在页面上独立定义两者，并最大限度地减少描述您的内容和体验所需的重复标记量。

他们的例子如下：

```
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@nytimesbits">
<meta name="twitter:creator" content="@nickbilton">
<meta property="og:url" content="http://bits.blogs.nytimes.com/2011/12/08/a-
  twitter-for-my-sister/">
<meta property="og:title" content="A Twitter for My Sister">
<meta property="og:description" content="In the early days, Twitter grew so 
  quickly that it was almost impossible to add new features because engineers 
  spent their time trying to keep the rocket ship from stalling.">
<meta property="og:image" content="http://graphics8.nytimes.com/images/2011/12/
  08/technology/bits-newtwitter/bits-newtwitter-tmagArticle.jpg"> 
```

因此，尽管您仍将使用 Twitter 元标记，但验证报告的损坏会少一些，因为您正在使用一些应该通过的 Open Graph 标记。前提是您确实包含[了负责 OGP 标记的命名空间](https://stackoverflow.com/questions/8235687/open-graph-namespace-declaration-html-with-xmlns-or-head-prefix "挑选鼻子")。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T22:43:36.917

要修复它，请将属性名称更改为属性：

```
 <meta name="twitter:card value=summary"> 
```

变成

```
 <meta property=:twitter:card content=summary"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-25T12:45:18.920

我见过使用 的网站`xmlns:twitter="http://api.twitter.com/"`，但我似乎找不到文档。

# c++ - C++ 应用程序不会终止

> ID：11901996
> 
> 赞同：0
> 
> 时间：2012-08-10T12:48:30.657
> 
> 标签：c++, multithreading, visual-c++, visual-studio-2005

我有一个 C++ 应用程序，当它收到关闭命令时需要关闭它。收到此命令后，它应该终止所有线程，清理所有内容并正常退出。

问题是我的应用程序没有关闭，它只是在收到命令时保持打开状态。

我认为问题在于收到关闭命令时我没有完成所有线程和句柄，但是由于我的应用程序很大，我在定位哪个线程或句柄时遇到了问题。

有没有办法发现哪个是未完成的线程或句柄？

PS：我在 Windows XP SP3 中使用 Visual Studio 2005。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T15:20:02.047

我已经在调试中运行了我的应用程序，并使用线程窗口来查看谁没有被关闭。我已经更新了我的代码，现在一切正常。

谢谢你的所有答案。

# xaml - XAML - 如何动态创建 DoubleAnimationUsingKeyFrames 并使用 VB 播放情节提要？

> ID：11901998
> 
> 赞同：0
> 
> 时间：2012-08-10T12:48:32.217
> 
> 标签：xaml, animation, storyboard, microsoft-metro

我有 3 个多边形，我试图根据动态代码“点亮”（改变不透明度）。例如，我有一长串随机数（021200112）。我正在尝试使用关键帧创建动态故事板。我正在使用单个多边形对其进行测试，但出现了目标错误。感谢您的帮助！！！

多边形在 XAML 中创建（命名为 Poly1、Poly2、Poly3）。

这是我尝试播放故事板时的错误：

```
WinRT information: Cannot resolve TargetProperty 1 on specified object. 
```

这是我在 poly1 上测试动画的代码。

```
Public Sub PlayStoryboard()

    Dim myDoubleAnimationUsingKeyFrames As New DoubleAnimationUsingKeyFrames()
    Dim myLinearDoubleKeyFrame As New LinearDoubleKeyFrame()
    Dim myLinearDoubleKeyFrame2 As New LinearDoubleKeyFrame()

    myLinearDoubleKeyFrame.Value = 0.2
    myLinearDoubleKeyFrame.KeyTime = TimeSpan.FromSeconds(1)

    myLinearDoubleKeyFrame2.Value = 1
    myLinearDoubleKeyFrame2.KeyTime = TimeSpan.FromSeconds(3)
    myDoubleAnimationUsingKeyFrames.KeyFrames.Add(myLinearDoubleKeyFrame)
    myDoubleAnimationUsingKeyFrames.KeyFrames.Add(myLinearDoubleKeyFrame2)

    myDoubleAnimationUsingKeyFrames.Duration = New Duration(TimeSpan.FromMilliseconds(5000))

    Dim myStoryboard = New Storyboard()
    myStoryboard.Children.Add(myDoubleAnimationUsingKeyFrames)

    Storyboard.SetTarget(myDoubleAnimationUsingKeyFrames, Poly1)
    Storyboard.SetTargetName(myDoubleAnimationUsingKeyFrames, Poly1.Name)
    Storyboard.SetTargetProperty(myDoubleAnimationUsingKeyFrames, Opacity)

    myStoryboard.Begin()

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T16:29:58.550

目标属性是要设置动画的属性的**名称**（或者，更具体地说，PropertyPath，但可以从字符串转换）。

尝试以下操作：

```
Storyboard.SetTargetProperty(myDoubleAnimationUsingKeyFrames, "Opacity") 
```