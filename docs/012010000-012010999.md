# StackOverflow 问答 12010000-12010999

# java - JDO Java Data Objects example

> ID：12010009
> 
> 赞同：0
> 
> 时间：2012-08-17T17:00:49.253
> 
> 标签：java, gwt, jakarta-ee, jdo

can someone help me to find a step-by-step example for developing JDO in a gwt project?

I really want to know and learn the jdo and differences between that and jpa

RGDS

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T21:45:18.263

I have used both jdo and jpa. I find it much easier using jpa for my work. If you are using datanucleus then you should look at the documentation on app engine located below.

JDO [https://developers.google.com/appengine/docs/java/datastore/jdo/overview-dn2](https://developers.google.com/appengine/docs/java/datastore/jdo/overview-dn2)

JPA [https://developers.google.com/appengine/docs/java/datastore/jpa/overview-dn2](https://developers.google.com/appengine/docs/java/datastore/jpa/overview-dn2)

These are the newer specs for app engine and if you are not using these then just about any database should be fairly straight forward.

I personally use jpa, request factory, service locators and a Dao pattern for accessing my objects. Here is something I posted earlier that has some code samples that may help. If you are not using app engine then a normal Long key should be easier.

[GAE Datastore with GWT, making more friendly/smaller keys](https://stackoverflow.com/questions/11952874/gae-datastore-with-gwt-making-more-friendly-smaller-keys)

You should also look at using a Servlet Filter for handling your EntityManager so that requestfactory can handle fetching your object graph using the .with("childGetterMethod") clause. This will save you quite a bit of coding to fetch child entities while the servlet filter handles opening and closing your entity manager.

# mysql - mysql查询多对多关系表 - '关系划分'？

> ID：12010014
> 
> 赞同：1
> 
> 时间：2012-08-17T17:01:03.590
> 
> 标签：mysql

给定下表（描述多对多关系）：

```
身份证 | 页面ID | 标签ID
--------------------
1 | 1 | 1
2 | 1 | 2
3 | 2 | 2
4 | 2 | 3

```

我如何选择“具有*所有*TagID列表的所有 PageID”？
换句话说：我想要所有用 TagIDs 1 和 2 标记的页面（所以在这个例子中它只有 PageID 1）

经过一番谷歌搜索后，我发现这里可能相关的术语“关系划分”，但我不太明白。有人对我的问题有简单的查询吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T17:11:16.737

如果您在表中有 tagid 列表，那么它是一个简单的连接和分组：

```
select pageId
from t join
     list l
     on t.tagId = l.tagId cross join
     (select count(*) cnt from list l) as const
group by pageId
having count(*) = max(cnt) 
```

having 子句检查所有标签是否存在。如果可能有重复，那么在这两种情况下，您都希望将“count(*)”替换为“count(distinct tagid)”。

# javascript - 敲除映射 - 使用键唯一标识嵌套对象

> ID：12010015
> 
> 赞同：2
> 
> 时间：2012-08-17T17:01:07.720
> 
> 标签：javascript, knockout.js, knockout-mapping-plugin

[Knockout 映射插件文档](http://knockoutjs.com/documentation/plugins-mapping.html)有一个标题为“使用“键”唯一标识对象”的部分。这描述了如何更新对象的一部分，然后仅更新显示的该部分，而不是完全替换部分修改对象的所有属性的显示。在他们的简单示例中，这一切都非常出色，我在这里对其进行了轻微修改，以使我的问题更清楚。我的修改是：

1.  延迟 2 秒后用更正的名称替换对象。

2.  突出显示显示中不变的部分，这样您就可以看到更新发生时它实际上没有被替换。

**1\. 简单对象**（[jsFiddle](http://jsfiddle.net/nEaSJ/)）

```
<h1 data-bind="text: name"></h1>
<ul data-bind="foreach: children">
    <li><span class="id" data-bind="text: id"></span> <span data-bind="text: name"></span></li>
</ul>

<script>
var data = {
    name: 'Scot',
    children: [
        {id : 1, name : 'Alicw'}
    ]
};
var mapping = {
    children: {
        key: function(data) {
            console.log(data);
            return ko.utils.unwrapObservable(data.id);
        }
    }
};
var viewModel = ko.mapping.fromJS(data, mapping);
ko.applyBindings(viewModel);

var range = document.createRange();
range.selectNode(document.getElementsByClassName("id")[0]);
window.getSelection().addRange(range);

setTimeout(function () {
    var data = {
        name: 'Scott',
        children: [
            {id : 1, name : 'Alice'}
        ]
    };
    ko.mapping.fromJS(data, viewModel);
}, 2000);
</script> 
```

但我不清楚的是如何为更复杂的嵌套数据结构实现相同的行为。在下面的示例中，我采用了上面的代码并将数据包装在一个列表中。我希望它的行为与上述相同，但事实并非如此。由于一个属性的变化，整个显示被重做。您可以看到这一点，因为与上面的示例不同，数据更新后突出显示会丢失。

**2.更复杂的嵌套对象**（[jsFiddle](http://jsfiddle.net/tar4w/)）

```
<!-- ko foreach: parents -->
    <h1 data-bind="text: name"></h1>
    <ul data-bind="foreach: children">
        <li><span class="id" data-bind="text: id"></span> <span data-bind="text: name"></span></li>
    </ul>
<!-- /ko -->

<script>
var data = {
    parents: [
        {
            name: 'Scot',
            children: [
                {id : 1, name : 'Alicw'}
            ]
        }
    ]
};
var mapping = {
    children: {
        key: function(data) {
            console.log(data);
            return ko.utils.unwrapObservable(data.id);
        }
    }
};
var viewModel = ko.mapping.fromJS(data, mapping);
ko.applyBindings(viewModel);

var range = document.createRange();
range.selectNode(document.getElementsByClassName("id")[0]);
window.getSelection().addRange(range);

setTimeout(function () {
    var data = {
        parents: [
            {
                name: 'Scott',
                children: [
                    {id : 1, name : 'Alice'}
                ]
            }
        ]
    };
    ko.mapping.fromJS(data, viewModel);
}, 2000);
</script> 
```

所以基本上我要问的是，考虑到更多嵌套的数据结构，我怎样才能让第二个例子像第一个例子一样工作？您可以假设每个孩子的 id 都是唯一的（因此，如果我在 Scott 之外添加另一个父母，他的孩子将以 id=2 开头，等等）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T22:34:57.740

那里有有趣的观察和很好的文章。如果您在父级和子级上定义一个键，它似乎可以工作。试试这个小提琴：

[http://jsfiddle.net/8QJe7/6/](http://jsfiddle.net/8QJe7/6/)

它为父级和子级定义了可实例化的视图模型函数，父构造函数在其中进行子映射。

# android - 如何在没有 startActivityForResult 的情况下启动默认的 android 库

> ID：12010019
> 
> 赞同：0
> 
> 时间：2012-08-17T17:01:12.467
> 
> 标签：android, gallery, start-activity

如标题所示，但我不需要返回任何东西！只是打开一个画廊..我试过了

```
 Intent intent = new Intent(Intent.ACTION_VIEW, android.provider.MediaStore.Images.Media.INTERNAL_CONTENT_URI);
    intent.setAction(Intent.ACTION_VIEW);
    startActivity(intent); 
```

但我对 HTC 设备库存图库有疑问...我只需要在设备上打开一个图库...库存或替代/下载一个。

使用 startActivityForResult 返回选定的照片，但我不在乎......我需要用户可以长按以选择多张照片，然后单击“共享方式”命令

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T17:22:14.240

为什么不使用 GridView 创建自己的图库并填充图像，您必须为此实现自定义适配器，请查看[Displaying images from SD Card tutorial](http://mobile.dzone.com/news/displaying-images-sd-card)。

# c# - 将一个对象列表转换为另一个列表

> ID：12010024
> 
> 赞同：0
> 
> 时间：2012-08-17T17:01:46.303
> 
> 标签：c#, algorithm, list, sorting, edit-distance

这是一个理论问题，所以我将使用伪代码。

我有一个需要转换为另一个列表的对象列表。

我实现了 Levenshtein 算法，效果很好，但我需要保留对象，而不是创建新对象。我可以暴力破解它，但我宁愿找到一种非 O(n*m) 的方法来做到这一点。

[obj1,obj2,obj3] -> [obj1,obj4,obj5,obj2,obj6,obj3]

obj1,obj2,obj3 必须是同一个对象，其余都是新创建的对象。

有人知道这个的好算法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T17:41:28.727

您可以使用模式[flyweight](http://en.wikipedia.org/wiki/Flyweight_pattern)，为此您需要在缓存中维护创建的对象。Java 中的字符串就是这种模式的一个很好的例子。

# ios - NSPredicate - 如何检查每个父母是否可见 == true

> ID：12010031
> 
> 赞同：1
> 
> 时间：2012-08-17T17:02:13.733
> 
> 标签：ios, core-data, nspredicate

我的核心数据结构包含“文件夹”。每个文件夹都可以有一个父文件夹，该父文件夹可以有一个父文件夹，该父文件夹可以有一个父文件夹，依此类推。文件夹也可以有称为“项目”的实体。文件夹还具有称为“可见”的属性。

我想检索其文件夹（以及每个父文件夹，如果有）具有可见 == true 的所有“项目”。我怎样才能制作这种 NSPredicate？

# javascript - 如何比较单元格值并隐藏html表格中的行

> ID：12010032
> 
> 赞同：0
> 
> 时间：2012-08-17T17:02:15.130
> 
> 标签：javascript, jquery, html

我有下表动态生成。列数是动态的，根据用户选择在 4-12 之间。

```
<table>
<tr>
    <th class="roleComparethead">Function</th>
    <th class="roleComparethead"">Type</th>
    <th class="roleComparethead">1111</th>
    <th class="roleComparethead">222</th>
    <th class="roleComparethead">555</th>
</tr>
<tr class="cRow">
    <td class="roleComparethead"> Profiles Maintenance</td>
    <td class="type"> Internal </td>

    <td class="access"><span class="accessLevel">Update</span></td>
    <td class="access"><span class="accessLevel">Read</span></td>
    <td class="access"><span class="accessLevel">NoAccess</span> </td>
</tr>
    <tr class="cRow">
    <td class="roleComparethead"> Profiles Maintenance</td>
    <td class="type""> Internal </td>

    <td class="access"><span class="accessLevel">Read</span></td>
    <td class="access"><span class="accessLevel">Read</span></td>
    <td class="access"><span class="accessLevel">Read</span> </td>
</tr> 
```

如果该行中所有单元格的值相同，我想隐藏表`class="accessLevel"`中的行，并且仅在值不同时显示。我如何使用 jQuery 或 Javascript 实现这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T17:29:32.460

你可以试试这个解决方案

[http://jsfiddle.net/mjaric/aLWVM/](http://jsfiddle.net/mjaric/aLWVM/)

它可以在更少的行中完成，但我故意将其拆分为更多。检查一下，让我知道行为是否正确。

# c - Unix Sockets 的缓冲特性

> ID：12010033
> 
> 赞同：4
> 
> 时间：2012-08-17T17:02:19.973
> 
> 标签：c, linux, sockets, buffering, unix-socket

有谁知道发送小块数据（几个字节）时 Unix 套接字的缓冲特性？

当我使用 TCP 套接字时，我可以禁用 Nagle 算法以防止数据传输中的延迟。但是 Unix 域套接字没有等效的功能（据我所知）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T17:26:37.707

unix 域套接字上没有可用的 nagle 算法。

Unix 套接字通常被实现为操作系统内核中的内存缓冲区。一旦您在套接字上写入/发送数据，它就会被复制到该缓冲区中，并立即可供对等方使用。

# javascript - 两个文本框，其中一个字符数有限，另一个文本框包含剩余字符

> ID：12010034
> 
> 赞同：2
> 
> 时间：2012-08-17T17:02:23.493
> 
> 标签：javascript, jquery, textbox, contenteditable

我想制作两个文本框，这样如果一个人写了一些文本，前 50 个字符应该在第一个文本框中，接下来输入的应该进入下一个文本框

在 jquery 或 Javascript 中![在此处输入图像描述](../Images/c2cc666ef4ecbe12fd55eea96ffd5ea7.png)

代码看起来像这样

> var content_id = 'editable_div';
> 最大值 = 50；

```
//binding keyup/down events on the contenteditable div
$('#'+content_id).keyup(function(e){ check_charcount(content_id, max, e); });
$('#'+content_id).keydown(function(e){ check_charcount(content_id, max, e); });

function check_charcount(content_id, max, e)
{   
    if(e.which != 50 && $('#'+content_id).text().length > max)
    {
       //the remaining part focusing the mouse on to the next div let the id of the  next editable div be  next

        e.preventDefault();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T17:12:26.327

我认为用户正在打字。 [http://jsfiddle.net/sechou/fwU8D/](http://jsfiddle.net/sechou/fwU8D/)

```
$("textarea:eq(0)").keyup(function(){
    if($(this).val().length>=10){ //for test: 10
          var str  =$(this).val();
          var length = str.length;
          $("textarea:eq(0)").val(str.slice(0,10));
          $("textarea:eq(1)").val($("textarea:eq(1)").val()    
                                  +str.slice(10,length));

    }
});
$("textarea:eq(0)").keydown(function(){
   if($(this).val().length>=10){//for test: 10              
          var str  =$(this).val();
          var length = str.length;
          $("textarea:eq(0)").val(str.slice(0,10));
          $("textarea:eq(1)").val($("textarea:eq(1)").val()    
                                  +str.slice(10,length));

    }
});
$("textarea:eq(0)").change(function(){
   if($(this).val().length>=10){//for test: 10
          var str  =$(this).val();
          var length = str.length;
          $("textarea:eq(0)").val(str.slice(0,10));
          $("textarea:eq(1)").val(str.slice(10,length));
          $(this).attr("readonly","readonly");
    }
}); 
```

HTML

```
<textarea id="first"></textarea>
<textarea id="second"></textarea> 
```

# python - 你需要在 url.py 中使用什么正则表达式模式来匹配 python/django 中对象的字符串“标题”

> ID：12010041
> 
> 赞同：0
> 
> 时间：2012-08-17T17:03:01.327
> 
> 标签：python, django

我很难匹配 url 模式

我有

```
url(r'^(?P<title>)', 'pages.views.PageNameRequest') 
```

和

```
def PageNameRequest(request, title):
    p = get_object_or_404(Page, title=title)
    return render_to_response('page.html', {'page': p}) 
```

但它只是返回

没有页面匹配给定的查询。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T17:06:26.607

你很接近，但你需要用正则表达式来跟进你的标题参数声明来描述它。例如，如果您希望 url 仅包含一个或多个小写字母，请执行以下操作...

```
url(r'^(?P<title>[a-z]+)', 'pages.views.PageNameRequest') 
```

但你可能正在寻找更像...

```
url(r'^(?P<title>[a-zA-Z_ ]+)', 'pages.views.PageNameRequest') 
```

这将允许小写 az、大写 AZ`_`和一个空格出现一次或多次。

# android - Android apk证书的安全性如何

> ID：12010043
> 
> 赞同：0
> 
> 时间：2012-08-17T17:03:04.893
> 
> 标签：android, security, certificate, apk, signature

我的应用程序中有一段代码在运行时检索应用程序证书并将其用作加密某些机密信息的密钥。

某些攻击者是否有可能`byte[]`通过反编译我的代码来获得该证书，或者该证书仅对我的应用程序可见？

这是我获得证书的方式：

```
 PackageManager pm = this.getPackageManager();
    String packageName = this.getPackageName();
    int field = PackageManager.GET_SIGNATURES;
    PackageInfo packageInfo;

    packageInfo = pm.getPackageInfo(packageName, field);

    Signature[] signatures = packageInfo.signatures;

    // and here we have the DER encoded X.509 certificate
    byte[] certificate = signatures[0].toByteArray() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T17:09:05.793

PackageInfo 签名是公钥，

它不是私钥。您手机上安装的任何应用程序都可以访问此密钥。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T17:09:41.267

申请证书是公开的；用于签署应用程序的私钥永远不会离开您的财产（除非您放弃它）。无法从公钥重建私钥。他们能够解密您的机密信息的唯一方法是通过某种蛮力尝试，最终没有任何防御措施。对您来说幸运的是，进行这种蛮力尝试的代价是如此之大，以至于除非他们认为里面有核秘密等，否则没有人会尝试这样做。

# grails - Grails中的Quartz工作

> ID：12010044
> 
> 赞同：3
> 
> 时间：2012-08-17T17:03:25.227
> 
> 标签：grails, quartz-scheduler

考虑以下代码：

```
class MyJob {  
    def execute() {
        println "Hello at->"+new Date()
    }
} 
```

当我运行此代码时，它每分钟都开始运行而不分配任何触发器。我怎么能禁用这个属性？每当我触发时，我都想开始这项工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T14:17:50.373

如果您想禁用默认触发器而不是在启动时分配触发器，那么您只需要在类中设置一个空的 triggers 闭包。

```
class MyJob {
    static triggers = { }

    ...
} 
```

这会将闭包的触发器（无触发器）分配给作业，而不是默认触发器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T17:50:57.857

你想要完成的事情有点模糊。如果您想在“创建”触发器时执行此操作，那么您实际上不需要将其放入 cron 作业中。

但是，如果您想在某个事件之后激活它。然后您仍然会创建一个触发器，但在执行之前进行某种检查。前任。

```
class MyJob {
   static triggers = { .... create the schedule      

   def execute() {
     // instead of create a trigger, you create a temp file that would allow/prevent
     // the execution
     def runIt = new File(runFile.txt)  
     if (runIt.exists()) {
        println "Hello at->"+new Date()
     }
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T19:34:16.830

如果我了解您想要做什么，您将首先安装石英配置：

`grails install-quartz-config`

然后禁用自动启动：

```
quartz {
    autoStartup = false
    jdbcStore = false
} 
```

然后在您的应用程序[中动态安排作业](http://grails-plugins.github.com/grails-quartz/guide/triggers.html)：

```
// creates cron trigger;
MyJob.schedule(String cronExpression, Map params?)
//  creates simple trigger: repeats job repeatCount+1 times with delay of repeatInterval milliseconds;
MyJob.schedule(Long repeatInterval, Integer repeatCount?, Map params?) )

// schedules one job execution to the specific date;
MyJob.schedule(Date scheduleDate, Map params?)

//schedules job's execution with a custom trigger;
MyJob.schedule(Trigger trigger)

// force immediate execution of the job.
MyJob.triggerNow(Map params?) 
```

# c# - C# 中断/停止 ToolClick 事件

> ID：12010045
> 
> 赞同：1
> 
> 时间：2012-08-17T17:03:26.743
> 
> 标签：c#, winforms, toolbar

在 C# 表单上，当用户从工具菜单中选择保存时，我需要运行一系列检查。如果其中一项检查失败，则需要停止保存过程。这是当前代码：

```
private static void baseToolbarsManager_ToolClick(object sender, Infragistics.Win.UltraWinToolbars.ToolClickEventArgs args)
{
     if (args.Tool.Key == "SaveTool")
     {
             if (tbxJob == "")
             {
                  MessageBox.Show("Error: No job was entered");
                  //Stop the save event from happening here
             }
      }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T17:27:14.200

您的 Save 方法是从哪里调用的？为什么不直接将`if (tbxJob == "")`检查添加到 Save 方法？或者也许让它检查一些布尔值是否取消保存操作？

我不相信您可以在发布的方法中添加任何内容来取消操作，您必须在调用 Save 之前进行取消检查，或者将其放在 Save 方法本身中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T19:07:45.470

如果我理解你需要阻止一个事件被调用。因此，解决方案可以继承该控制类并覆盖该`OnToolClick()`方法：

```
private override void OnToolClick(ToolClickEventArgs e){
    if (e.Tool.Key == "SaveTool"){
         if (tbxJob == "")
             MessageBox.Show("Error: No job was entered");
             //Stop the save event from happening here
         else
             base.OnToolClick(e);
    }
} 
```

# java - 如何在摆动小部件上获取字体的底部位置？

> ID：12010050
> 
> 赞同：1
> 
> 时间：2012-08-17T17:03:40.453
> 
> 标签：java, swing, graphics, fonts

我正在开发一个小的拖放式 Java GUI 构建器。

我在面板上拖放 JLabels 和 JButton，它工作正常。

现在我希望小部件根据小部件上字体的底部“正确”对齐。

如果我将它们排列在 yPosition = 0，它看起来像这样：

```
My Label /-----------\
         | My button |
         \-----------/ 
```

但我需要将它们排列在 yPosition = "bottom of their text"，如下所示：

```
 /-----------\
My Label | My button |
         \-----------/ 
```

所以我的问题是：给定一个 JLabel 或一个 JButton，我如何确定该小部件上字体底部的 yPosition 坐标？

我希望这很清楚。任何帮助是极大的赞赏！

谢谢，罗伯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T17:16:40.853

您正在寻找的方法是

```
component.getBaseline(...) 
```

# jquery - jquery show/hide 然后自动滚动到内容

> ID：12010051
> 
> 赞同：1
> 
> 时间：2012-08-17T17:03:48.013
> 
> 标签：jquery, scroll, show-hide

我在 w3schools 找到了这段简单的显示/隐藏 jquery 代码：[http ://www.w3schools.com/jquery/tryit.asp?filename=tryjquery_slide_toggle](http://www.w3schools.com/jquery/tryit.asp?filename=tryjquery_slide_toggle)

我不知道如何编写任何 javascript 或 jquery，但是有没有办法向脚本添加滚动操作，所以当访问者单击按钮以显示内容时，它会将其滑出（它已经这样做了）但是同时滚动到该内容？

我的页面底部有一个按钮，单击时隐藏的内容会出现在其下方。

谢谢！欣赏它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T17:10:57.057

看看[slideToggle](http://api.jquery.com/slideToggle/)和[scrollTop](http://api.jquery.com/scrollTop/)。
您可以将函数作为回调传递，该回调将`scrolltop`在动画之后执行。

```
$('.mySlideDiv').click(function() {
    $(this).slideToggle('fast', function() {
        $(window).scrollTop(position);
    });
}); 
```

# java - Java getGraphics() 返回 null

> ID：12010053
> 
> 赞同：3
> 
> 时间：2012-08-17T17:03:55.553
> 
> 标签：java, swing

我开始学习用 Java 创建游戏，我使用的方法之一包括 BufferedImage。这是我得到的错误：

```
"Exception in thread "main" java.lang.NullPointerException
     at tm.Game.init(Game.java:48)
     at tm.Game.<init>(Game.java:54)" 
```

从这段代码：

```
package tm;

import java.awt.Color;
import java.awt.Graphics;
import java.awt.image.BufferedImage;

import javax.swing.JPanel;

@SuppressWarnings("serial")
public class Game extends JPanel implements Runnable {
    private Settings Settings;

    private Thread t;
    private BufferedImage offscreenImage;
    private Graphics offscr;

    public void run() {
        while(true) {
            repaint();

            try {
                Thread.sleep(1000/30);
            } catch (InterruptedException e) { }
        }
    }

    public void paint(Graphics g) {
        offscr.setColor(Color.blue);
        offscr.fillRect(0, 0, Settings.GAME_WIDTH, Settings.GAME_HEIGHT);

        offscr.setColor(Color.white);
        offscr.drawString("Lolz", 10, 10);

        g.drawImage(offscreenImage, 0, 0, this);
    }

    public void update(Graphics g) {
        paint(g);
    }

    public void init() {
        t = new Thread(this);
        t.start();

        offscreenImage = (BufferedImage) createImage(Settings.GAME_WIDTH, Settings.GAME_HEIGHT);
        offscr = offscreenImage.getGraphics();
    }

    public Game() {
        Settings = new Settings();

        init();
    }

} 
```

设置类：

```
package tm;

public class Settings {

    public final int GAME_WIDTH = 500;
    public final int GAME_HEIGHT = 500;

} 
```

屏幕类：

```
package tm;

import javax.swing.JFrame;

public class Screen extends JFrame {
    private static final long serialVersionUID = 1L;
    private JFrame mainScreen;
    private Game mainGame;
    private Settings Settings;

    public Screen() {
        mainGame = new Game();
        Settings = new Settings();

        mainScreen = new JFrame();
        mainScreen.add(mainGame);
        mainScreen.setSize(Settings.GAME_WIDTH, Settings.GAME_HEIGHT);
        mainScreen.setTitle("Lolz");
        mainScreen.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        mainScreen.setResizable(false);
        mainScreen.setVisible(true);
    }

    public static void main(String[] args) {
        new Screen();
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T17:19:12.497

不是`getGraphics()`返回 null 而是返回前一个函数`createImage()`。从组件文档中`createImage()`：

> 返回可用于双缓冲的离屏可绘制图像。**如果组件不可显示，则返回值可能为 null。**如果 GraphicsEnvironment.isHeadless() 返回 true，这将始终发生。

然后，当调用`getGraphics()`为 null 的 offscreenImage 时，您会得到一个 NullPointerException。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T05:14:01.133

抛出 NullPointer 异常的原因是你在错误的地方初始化了 offScreenImage 和 offScr。

```
offscreenImage = (BufferedImage) createImage(Settings.GAME`WIDTH, Settings.GAME_HEIGHT);
offscr = offscreenImage.getGraphics(); 
```

这段代码应该在函数paint中。要获得结果，应该像这样定义 Game 类。另一个提示最好将变量 inn Settings 类声明为 public static final 以便可以以静态方式访问它们。对您的 Game 类进行少量更改，如下所示。我认为这应该对你有所帮助。

```
package tm;

import javax.swing.JPanel;
import java.awt.Color;
import java.awt.Graphics;
import java.awt.image.BufferedImage;

import tm.Screen.Settings;

public class Game extends JPanel implements Runnable {
    // private Setting Settings;

    private Thread t;
    private BufferedImage offscreenImage;
    private Graphics offscr;

    public void run() {
        while (true) {
            repaint();

            try {
                Thread.sleep(1000 / 30);
            } catch (InterruptedException e) {
            }
        }
    }

    public void paint(Graphics g) {

        if (offscreenImage == null) {

            offscreenImage = (BufferedImage) createImage(Settings.GAME_WIDTH,
                    Settings.GAME_HEIGHT);
        }
        offscr = offscreenImage.getGraphics();
        offscr.setColor(Color.black);
        offscr.fillRect(0, 0, Settings.GAME_WIDTH, Settings.GAME_HEIGHT);
        offscr.setColor(Color.white);
        offscr.drawString("Lolz", 10, 10);

        g.drawImage(offscreenImage, 0, 0, this);
    }

    public void update(Graphics g) {
        paint(g);
    }

    public void init() {
        t = new Thread(this);
        t.start();
    }

    public Game() {
        init();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T21:27:52.597

由于 createImage 仅在组件“可显示”后才起作用，例如它附加到可见的 JFrame，因此您当前的代码将无法工作。

有几种方法可以处理它。

*   将 JFrame 作为参数添加到 ctor 并在调用 create 组件之前将 Game 添加到 JFrame - 只要 JFrame.add 不调用被部分初始化的 Game 实例覆盖的任何方法，这应该可以工作。

    ```
    Game(JFrame jf){
        jf.add(this);
        ...
    }

    JFrame mainFrame = new JFrame();
    mainFrame.setVisible(true);
    Game game = new Game(mainFrame); 
    ```

*   创建一个额外的 init 方法，在将 Game 添加到 JFrame 后调用该方法。这很难看，因为在调用此方法之前，Game 对象并没有真正完全初始化。

    ```
    Game game = new Game();
    JFrame mainFrame = new JFrame();
    mainFrame.add(game);
    mainFrame.setVisible(true);
    game.init(); 
    ```

*   找出组件何时可显示的[一种方法是侦听 HierarchyEvent。](https://stackoverflow.com/questions/878694/when-is-a-swing-component-displayable)您可以修改答案中显示的侦听器以调用 createImage 而不是打印“显示”。（该答案提供的课程也需要`extends HierarchyListener`工作）

# hibernate - org.hibernate.InvalidMappingException：无法从资源 com/lara/Person.hbm.xml 解析映射文档

> ID：12010056
> 
> 赞同：2
> 
> 时间：2012-08-17T17:03:57.907
> 
> 标签：hibernate, configuration

```
Exception in thread "main" org.hibernate.InvalidMappingException: Could not parse mapping document from resource com/lara/Person.hbm.xml
    at org.hibernate.cfg.Configuration.addResource(Configuration.java:616)
    at org.hibernate.cfg.Configuration.parseMappingElement(Configuration.java:1635)
    at org.hibernate.cfg.Configuration.parseSessionFactory(Configuration.java:1603)
    at org.hibernate.cfg.Configuration.doConfigure(Configuration.java:1582)
    at org.hibernate.cfg.Configuration.doConfigure(Configuration.java:1556)
    at org.hibernate.cfg.Configuration.configure(Configuration.java:1476)
    at org.hibernate.cfg.Configuration.configure(Configuration.java:1462)
    at com.lara.Manager.main(Manager.java:15)
Caused by: org.hibernate.InvalidMappingException: Could not parse mapping document from invalid mapping
    at org.hibernate.cfg.Configuration.addInputStream(Configuration.java:549)
    at org.hibernate.cfg.Configuration.addResource(Configuration.java:613)
    ... 7 more
Caused by: org.xml.sax.SAXParseException; lineNumber: 7; columnNumber: 39; Document root element "hibernate-mapping", must match DOCTYPE root "hibernate-configuration".
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(Unknown Source)
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.error(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.dtd.XMLDTDValidator.rootElementSpecified(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.dtd.XMLDTDValidator.handleStartElement(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.dtd.XMLDTDValidator.startElement(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanStartElement(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl$NSContentDriver.scanRootElementHook(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$PrologDriver.next(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(Unknown Source)
    at org.dom4j.io.SAXReader.read(SAXReader.java:465)
    at org.hibernate.cfg.Configuration.addInputStream(Configuration.java:546)
    ... 8 more 
```

# 休眠.cfg.xml

```
 <?xml version='1.0' encoding='utf-8'?>
       <!DOCTYPE hibernate-configuration PUBLIC
        "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
        "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
        <hibernate-configuration>

    <session-factory>

        <!-- Database connection settings -->
        <property name="connection.driver_class">oracle.jdbc.driver.OracleDriver</property>
        <property name="connection.url">jdbc:oracle:thin:@localhost:1521:XE</property>
        <property name="connection.username">system</property>
        <property name="connection.password">system</property>

        <!-- JDBC connection pool (use the built-in) -->
        <property name="connection.pool_size">2</property>

        <!-- SQL dialect -->
        <property name="dialect">org.hibernate.dialect.OracleDialect</property>

        <!-- Enable Hibernate's current session context -->
        <property name="current_session_context_class">org.hibernate.context.ManagedSessionContext</property>

        <!-- Disable the second-level cache  -->
        <property name="cache.provider_class">org.hibernate.cache.NoCacheProvider</property>

        <!-- Echo all executed SQL to stdout -->
        <property name="show_sql">true</property>

        <!-- Drop and re-create the database schema on startup -->
        <property name="hbm2ddl.auto">create</property>

        <mapping resource="com/lara/Person.hbm.xml"/>

    </session-factory>

     </hibernate-configuration>

Person.hbm.xml
==============
        <?xml version='1.0' encoding='utf-8'?>
        <!DOCTYPE hibernate-configuration PUBLIC
        "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
        "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">

        <hibernate-mapping package="com.lara">

    <class name="Person" table="PERSON">
        <id name="id" column="PERSON_ID">
            <generator class="native" />
        </id>
        <property name="age"/>
        <property name="firstname"/>
        <property name="lastname"/>

    </class>

        </hibernate-mapping>

Person.java
=============
        package com.lara;

        public class Person {
    private int id;
    private String firstName;
    private String lastName;
    private int age;

    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }

    public String getFirstName() {
        return firstName;
    }

    public void setFirstName(String firstName) {
        this.firstName = firstName;
    }

    public String getLastName() {
        return lastName;
    }

    public void setLastName(String lastName) {
        this.lastName = lastName;
    }

    public int getAge() {
        return age;
    }

    public void setAge(int age) {
        this.age = age;
    }

      }

Manager.java
=============
        package com.lara;

        import org.hibernate.Session;
        import org.hibernate.SessionFactory;
        import org.hibernate.cfg.Configuration;

        public class Manager {

    public static void main(String[] args) {
        Person p1 = new Person();
        p1.setFirstName("abc");
        p1.setLastName("xyz");
        p1.setAge(22);

        Configuration c1 = new Configuration().configure();

        SessionFactory sf = c1.buildSessionFactory();
        Session s1 = sf.openSession();

        s1.beginTransaction();
        s1.save(p1);
        s1.getTransaction().commit();

        s1.flush();
        s1.close();
        System.out.println("done");
     }
       } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T17:17:31.033

错误消息说（埋在一个大的堆栈跟踪中）：

```
Document root element "hibernate-mapping", must match DOCTYPE root "hibernate-configuration" 
```

这是因为在您的 Person.hbm.xml 文件中，您有

```
<!DOCTYPE hibernate-configuration PUBLIC
"-//Hibernate/Hibernate Configuration DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd"> 
```

你应该有的地方

```
<!DOCTYPE hibernate-mapping PUBLIC
"-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd"> 
```

此 DOCTYPE 必须与根标签匹配。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-19T12:37:02.120

这很简单

1.创建构造函数

```
public Person(){} 
```

这是休眠中的主要内容。它将通过此​​构造函数映射对象（使用 Java 反射概念）

2.了解dtd。有两种类型的 dtd 可用映射 dtd 和配置 dtd

映射-dtd 是

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd"> 
```

配置 dtd 是

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-configuration PUBLIC
        "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
        "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd"> 
```

hibernate.cfg.xml 是配置文件，Person.hbm.xml 是映射文件，所以更改 Person.hbm.xml 中的 dtd

它会运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-10T18:25:37.080

*在某些情况下会出现 InvalidmappingException 请仔细阅读*

1.  我们将使用而不是我们使用的 id 标签，那么这个异常肯定会发生。

2.  在 Pojo 类中，您在数据库中声明数据成员，如“名称”，您声明“名称”，然后在映射文件中，您只写简短的术语，我们可以说，就像您在 id 标签名称属性值中声明的任何内容一样，它对应的没有数据成员在 pojo 类中，只会出现一个错误**InvalidMappingException 。**

3.  **当此列名与相应的数据库字段不完全匹配时，会出现 SQLGrammarException **。****

 *** * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-12T10:53:27.760

我也收到此错误消息。但在我的情况下，班级名称是错误的。根据下面的示例添加正确的包和类名。

```
<class name="com.project.Question" table="question"> 
```**

# c# - ASP.NET 计时器 - 检查 SQL SERVER 中的记录

> ID：12010058
> 
> 赞同：1
> 
> 时间：2012-08-17T17:04:05.640
> 
> 标签：c#, asp.net, timer

我在我的 C# ASP.NET 页面上创建了一个 AJAX 计时器来检查数据库中的记录。当找不到记录时，我希望数据库轮询继续。目前，当没有找到记录时，它正在爆炸。找到记录后它确实工作得很好，然后我只是寻找正确的状态。

我有 2 个问题。

1.) 在没有找到记录的情况下如何继续轮询。2.) 如何让计时器在 5 分钟后停止轮询并显示消息？

这是我的一些代码：

```
protected void Timer1_Tick(object sender, EventArgs e)
    {
        System.Threading.Thread.Sleep(8000);
        string fileName = ViewState["FileName"].ToString();
        DBACCT account = new AccountMDB();
        DataTable dt = account.getSTS(fileName);
        String status = dt.Rows[0]["sts"].ToString();
        Label2.Text = status;
       if (dt.Rows.Count == 0)
        {
        // restart timer?
        }
        if (status == "C")
        {            
            Timer1.Enabled = false;
            Label2.Text = "File processed correctly";
        }
        if (status == "E")
        {
            Timer1.Enabled = false;
            Label2.Text = "File processed with Errors";

        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T18:22:27.177

首先，在检查行数之前，您不应该获得状态（这就是它可能会爆炸的原因）。

其次，你为什么睡在定时器方法里面？为什么不让计时器每 8 秒响一次呢？将“间隔”设置为 8000 应该可以解决问题。

现在，回答你的问题。

1.) AJAX 计时器不是设置为自动重复吗？如果是，如果您进行了前面指定的更改，它应该每 8 秒自动运行一次此代码。如果不是，您将不得不对如何使它们重复进行一些研究。

2.) 最简单的方法是创建另一个在 5 分钟后关闭的计时器，这将禁用两个计时器并打印消息。

# extjs - 如何在 sencha/extjs 中获取子项目

> ID：12010059
> 
> 赞同：0
> 
> 时间：2012-08-17T17:04:19.157
> 
> 标签：extjs, sencha-touch

我对 sencha touch / extJS 完全陌生。我想知道我什么时候从容器派生来构建某种视图，现在我添加`items`. 如何从我的视图中控制这些项目。我真的需要用来`Ext.getCmp`得到那些吗？这有点像一个丑陋的 hack，因为它不仅搜索子组件，而且基本上搜索整个 DOM，对吧？我想知道是否有另一种内置方法可以从我的组件内部获取对子项的引用。

# authentication - 使用 nunit 从 IP 获取身份验证令牌

> ID：12010061
> 
> 赞同：0
> 
> 时间：2012-08-17T17:04:38.407
> 
> 标签：authentication, nunit, wif

我正在努力为我的 WCF 数据服务/ODATA 服务器添加 WIF 支持，我想做的第一件事是创建一个 nUnit 测试，它将某种身份传递给所述服务器。我相信这属于活跃客户的范畴：没有用户界面；我想调用 app.config 已建立的提供商（Google、Yahoo、Windows Live 或*其他*提供商）来获取我的身份令牌。坦率地说，这并不重要，只是它或多或少总是可以访问的，并且没有管理来运行测试。（如果有一些主机应用程序可以包含在我的解决方案中以充当 IP，我会非常满意。）

我所有现有的测试都直接使用 HttpRequest ——我没有使用生成的客户端。在创建 HttpRequest 对象时，我会检查是否已经有一个身份验证令牌可以放入我的标头中。如果没有，我正在尝试这样的事情：

```
using (WSTrustChannelFactory factory = new WSTrustChannelFactory(
   new UserNameWSTrustBinding(SecurityMode.TransportWithMessageCredential),
   new EndpointAddress(new Uri("https://dev.login.live.com/wstlogin.srf"))))
{
   factory.Credentials.UserName.UserName = "MYUSERNAME";
   factory.Credentials.UserName.Password = "MYPASSWORD";
   factory.TrustVersion = TrustVersion.WSTrust13;

   WSTrustChannel channel = null;
   try
   {
     var rst = new RequestSecurityToken
     {
       RequestType = WSTrust13Constants.RequestTypes.Issue,
       AppliesTo = new EndpointAddress("http://localhost:60711/Service"),
       KeyType = WSTrust13Constants.KeyTypes.Bearer,
     };

    channel = (WSTrustChannel)factory.CreateChannel();
    return channel.Issue(rst);
  }
  finally
  {
    if (null != channel)
    {
      channel.Abort();
    }
    factory.Abort();
  }
} 
```

所以开始...我什至不知道我是否针对 IP 的正确 URI，但是当我更改它时，我得到了 404，所以我想我可能在正确的轨道上。目前，channel.Issue 方法返回一个带有 FaultException 类型内部异常的 MessageSecurityException，并注明“无效请求”。FaultException 有一个 Name=Sender 和 Namespace=http://www.w3.org/2003/05/soap-envelope 的 Code，然后它有一个 Name=InvalidRequest 和 Namespace=http://schemas.xmlsoap 的 SubCode。 org/ws/2005/02/信任。我不知道如何处理这些信息。:)

如果我问一个非常基本的问题，我很抱歉。我只关注了几天的身份验证，还不知道我的方法。谢谢你的帮助！

编辑——解决方案

Eugenio 是对的——我正在做一些重量级的事情，它更多的是集成测试的东西。我放弃了 Google/Yahoo/Live 的东西，并找到了[SelfSTS](http://www.wadewegner.com/2010/11/using-the-saml-credentialtype-to-authenticate-to-the-service-bus/)的修改版本，我将它拼凑到我的项目中。我还不完全明白发生了什么，但我取回了一个 SAML 令牌。这是最终代码：

```
var binding = new WS2007HttpBinding();

binding.Security.Mode = SecurityMode.Message;
binding.Security.Message.ClientCredentialType = MessageCredentialType.UserName;
binding.Security.Message.EstablishSecurityContext = false;
binding.Security.Message.NegotiateServiceCredential = true;

using (var trustChannelFactory = new WSTrustChannelFactory(binding, new EndpointAddress(new Uri("http://localhost:8099/STS/Username"), new DnsEndpointIdentity("adventureWorks"), new AddressHeaderCollection())))
{
  trustChannelFactory.Credentials.UserName.UserName = MYUSERNAME;
  trustChannelFactory.Credentials.UserName.Password = MYPASSWORD;
  trustChannelFactory.Credentials.ServiceCertificate.Authentication.CertificateValidationMode = X509CertificateValidationMode.None;
  trustChannelFactory.TrustVersion = TrustVersion.WSTrust13;

  WSTrustChannel channel = null;

  try
  {
    var rst = new RequestSecurityToken(WSTrust13Constants.RequestTypes.Issue)
    {
      AppliesTo = new EndpointAddress("http://localhost:60711/Service"),
      KeyType = WSTrust13Constants.KeyTypes.Bearer
    };

    channel = (WSTrustChannel)trustChannelFactory.CreateChannel();
    GenericXmlSecurityToken token = channel.Issue(rst) as GenericXmlSecurityToken;
    ((IChannel)channel).Close();
    channel = null;

    trustChannelFactory.Close();

    string tokenString = token.TokenXml.OuterXml;
    return tokenString;
  }
  finally
  {
    if (null != channel)
    {
      ((IChannel)channel).Abort();
    }
    trustChannelFactory.Abort();
  }
} 
```

（这段代码也是从我得到修改后的 SelfSTS 的同一个地方提取的——谢谢，Wade Wegner！）

我不确定“adventureWorks”的使用。我使用的 SelfSTS 版本作为配置中的 issuername，但我没有检查是否有任何相关性。

所以......现在破解我的实际服务器，以便它可以弄清楚如何处理 SAML！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T18:01:42.007

并非所有这些 IP 都支持活动呼叫。即使他们这样做，协议也可能不兼容。

例如，我不确定 Google 是否实现了 WS-Trust（WIF 在后台使用的是什么）。LiveID 可能在某处有一个 WS-Trust 端点，但不确定它是否受到官方支持/记录（例如，您收到的错误可能是因为 LiveID 不知道您的 RP：**http://localhost:60711/Service** ; 因此不能为其颁发令牌）。

对于像这样的多个 IP，应用程序通常会嵌入 Web 浏览器并将其用于所有令牌协商（例如使用 WS-Federation）。他们通常依靠专门的 STS 来处理协议转换（例如 Windows Azure 访问控制服务）

无论如何，对于单元测试来说，你正在做的事情听起来有点重量级。这听起来更像是您想要自动化的集成测试。

也许您可以从自己的自定义（假）STS 开始。您可以在其中控制一切并模拟不同的输出（例如不同的声明等）

本章： http: [//msdn.microsoft.com/en-us/library/hh446528](http://msdn.microsoft.com/en-us/library/hh446528)（和示例）可以为您提供更多信息。

# c++ - 从资源文件中使用directshow播放音频

> ID：12010062
> 
> 赞同：0
> 
> 时间：2012-08-17T17:04:45.733
> 
> 标签：c++, audio, resources, directshow

我目前正在使用 Scripthook C++ 为 Grand Theft Auto IV 编写脚本模块。我一直在使用这个模板播放音频文件：[Simple C++ MP3 Player Class](http://cppmp3player.codeplex.com/documentation "简单的 C++ MP3 播放器类")

我的问题首先是尝试使用资源中的文件。我不知道如何加载它们。

每次我尝试使用我的代码从资源中加载声音时，游戏都会崩溃。已经花了几个小时浏览谷歌关于如何从资源中播放 DirectShow 音频而没有任何结果。

内部资源文件：

```
(resource.h)  #define WAV_Sound            106
(resource.rc) WAV_Sound                    RCDATA                  "MySound.wav" 
```

从硬盘加载文件工作正常

```
Load(TEXT("MySound.wav")); 
```

但是当我尝试其中之一时游戏崩溃：

```
// Load from resource #1
    LPCWSTR file = MAKEINTRESOURCE(WAV_Sound);
    Load(file);

// Load from resource #2
    Load((LPCWSTR) WAV_Sound); 
```

希望有人能帮帮我，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T18:05:28.220

微软推荐使用 DirectX Audio 为开发游戏提供多层接口，即 XAudio2、X3DAudio、XACT 等，它们在 2d/3d 游戏环境中处理声音效果非常强大。这是链接[http://msdn.microsoft.com/en-us/library/ee415737%28v=vs.85%29](http://msdn.microsoft.com/en-us/library/ee415737%28v=vs.85%29)

请下载并安装 DirectX 软件开发工具包，并找到“XAudio2BasicSound”示例以从文件或资源或 dll 中打开波形文件并使用 IXAudio2 接口播放，这是一个非常简单的示例，但下一步您可以为您的设备添加音效游戏。

# visual-c++ - 简单的 COM 组件

> ID：12010064
> 
> 赞同：0
> 
> 时间：2012-08-17T17:04:56.400
> 
> 标签：visual-c++, com, atl

抱歉这个愚蠢的问题，但我从未开发过 COM 组件。尽管我需要创建 COM，但我尝试学习 .net 和 COM 之间的交互。问题： 1）为什么我在VS2010中使用ATL向导创建COM项目时解决方案资源管理器中出现“STOP”标志（看图）？

![在此处输入图像描述](../Images/8c45a1c0fcb87c13d12dba7678fef4d8.png)

2）如何为这个项目添加我自己的类？

3）我在哪里可以搜索初学者的简单教程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T17:16:51.917

1.  因为这些是补充的“生成的文件”，所以它们被排除在构建不需要的情况下（当然，除非另一个源文件明确引用它们）。停止标志的意思是“排除”。

2.  在 MSDN 上[添加 ATL 简单对象](http://msdn.microsoft.com/en-us/library/893dcd7k%28v=vs.100%29.aspx)

3.  [ATL 概念和](http://msdn.microsoft.com/en-us/library/3ax346b7%28v=vs.100%29)教程

# javascript - 递增字符串，例如“20px”

> ID：12010066
> 
> 赞同：3
> 
> 时间：2012-08-17T17:04:59.253
> 
> 标签：javascript, jquery, css

我需要一些东西来增加代表长度的字符串值（css边距）

目前的解决方案是：

```
function incPx(a,b){
     return parseInt(a) + parseInt(b) +'px';
}
incPx($(el).css('margin-left'), '10px') 
```

但可能有一个 jQuery 的东西呢？与“px”的其他单位合作

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T17:07:17.553

使用 jQuery 1.6+，您可以将相对数量传递给[`.css()`](http://api.jquery.com/css/)，由`+=`或表示`-=`，类似于`.animate()`：

```
$(el).css('margin-left', '+=10px'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T17:08:28.880

从 jQuery 1.6 开始，`.css()`接受类似于`.animate()`. 相对值是一个以 += 或 -= 开头的字符串，用于增加或减少当前值。例如，如果一个元素的 padding-left 为 10px，则`.css( "padding-left", "+=15" )`总 padding-left 为 25px。

来源：[http ://api.jquery.com/css/](http://api.jquery.com/css/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T17:14:13.207

此处讨论“jQuery方式”的其他答案是完全有效的。但是，我想包括一种使用类似于 OP 使用的方法的方法，它也可以与“vanilla”javascript 一起使用。

请注意，就目前而言，OP 的代码可以正常工作 - 这基本上是相同的事情，但需要更加注意提供默认值

```
function incPx (val, amt) {
    var nv = parseInt(val.replace(/[^0-9]/, ''), 10);
    return (
        (nv ? nv : 0) + (amt || 1)
    )+'px';
};

console.log(incPx('10px')); // 11px
console.log(incPx('let us hasten to the zoo, post haste!')); // 1px
console.log(incPx('10px', 10)); // 20px
console.log(incPx('10px', -2)); // 8px 
```

试试看：http: [//jsfiddle.net/jxU6Q/2/](http://jsfiddle.net/jxU6Q/2/)

**文档**

*   `parseInt`在 MDN - [https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt)
*   `String.replace`在 MDN - [https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-17T17:14:52.520

其他人已经建议了`jQuery.css()`的相对值，但请记住，您可以轻松`parseInt`地将字符串转换`50px`为 a `Number`，如下所示：

```
console.log(parseInt('50px', 10));
// 50 
```

```
function incPx(a, b){
    a = parseInt(a, 10) || 0;
    b = parseInt(b, 10) || 0;
    return (a + b) +'px';
}​ 
```

不过，不要忘记通过`radix`10 分。更多示例：[示例：使用 parseInt (MDN)](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt?redirectlocale=en-US&redirectslug=Core_JavaScript_1.5_Reference/Global_Functions/parseInt#Example%3a_Using_parseInt)

# spring - @RequestMapping 不能正常工作

> ID：12010068
> 
> 赞同：0
> 
> 时间：2012-08-17T17:05:16.207
> 
> 标签：spring

我有一堂课

```
@Controller
@RequestMapping("/auth")
public class LoginController {

 @RequestMapping(value = "/login", method = RequestMethod.GET)
 public String getLoginPage(@RequestParam(value="error", required=false) boolean error, 
   ModelMap model) {

}

} 
```

web.xml

```
<servlet>
<servlet-name>spring</servlet-name>
<servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
<init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
                classpath:META-INF/spring-servlet.xml
        </param-value>
    </init-param>
<load-on-startup>1</load-on-startup>
</servlet> 
```

应用上下文.xml

```
<mvc:annotation-driven/>

<context:component-scan base-package="mysrc.src"/> 
```

春天servlet.xml

```
<context:component-scan base-package="mysrc.src"/>

           <mvc:annotation-driven/> 
```

我收到一个错误，例如“在调度员等等中找不到映射”

但现在我在控制台上看不到异常。

我只看到404

```
http://localhost:9090/app/auth/login 
```

我在调试模式下将断点放在 getLoginPage 方法中，但没有流程。

除了建议之外，我想问我如何确定 abour Spring 已经扫描了我的 @RequestMapping 类？搜索启动控制台可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T18:32:08.793

通常，当您从 Spring 收到没有错误消息的 404 时，这通常意味着您的应用程序部署在与您预期不同的上下文中。例如，您的代码示例表明您正在将您的 webapp 部署到 /，您确定这是部署它的位置吗？你用的是tomcat吗？如果是这样，你的 webapp 应该被命名为 ROOT.war。您能否提供更多详细信息，例如您在哪里/如何部署您的 webapp，也许还有 web.xml？

就您的映射而言，Spring 将在 INFO 日志级别记录它扫描的控制器及其请求路径。如果调度程序 servlet 无法将您的请求与控制器匹配，它将始终给您一条错误消息，因此没有错误消息向我表明您的请求没有通过调度程序 servlet。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T17:25:41.720

您的请求映射看起来正确。

您可以为您的控制器创建一个构造函数，并在那里放置一个日志语句或一个断点，以查看控制器是否由 spring 创建。

请注意，您的组件扫描还将初始化控制器两次（一次用于 appcontext.xml，一次用于 servlet.xml）。您应该添加过滤器以确保仅从 servlet.xml 创建控制器：

appcontext.xml（除控制器之外的所有内容）：

```
<context:component-scan base-package="x.y.z">
  <context:exclude-filter expression="org.springframework.stereotype.Controller" type="annotation" />
</context:component-scan> 
```

servlet.xml（仅限控制器）：

```
<context:component-scan base-package="x.y.z" use-default-filters="false">
  <context:include-filter expression="org.springframework.stereotype.Controller" type="annotation"/>
</context:component-scan> 
```

而且只是为了确定：`base-package`属性`component-scan`必须是一个有效的java包，而不是你的src目录的路径（`mysrc.src`看起来有点像你的src文件夹;-)）

# c# - ASP.Net 图表 X 轴显示误导性日期标签

> ID：12010073
> 
> 赞同：2
> 
> 时间：2012-08-17T17:05:41.547
> 
> 标签：c#, asp.net, charts, asp.net-charts

我有一个直接的柱形图，上面有 4 个系列，Y 轴上的百分比和 X 轴上的 DateTime。除了 X 轴标记和间隔标记不正确（好吧，误导）之外，一切都工作正常。第一个列集群是一月份的数据，但是图表将集群直接定位在二月标签的顶部。间隔线（这是正确的名称吗？）也没有帮助，因为它贯穿一月份的数据集群，使得它看起来像 col 1 和 2 在 1 月和 col 3 和 4 在 2 月。正在使用的数据来自一月到七月，四月不见了（故意的），但是图表使它看起来像是从二月到八月，五月不见了。

![狡猾的图表](../Images/51a52a39d1524631b545c6030f520a09.png)

数据 ![正确的数据](../Images/25ca13950bc9b84c0b85b3cf2bde3b9c.png)

所以我的问题是：如何将列簇集中在它们自己的间隔部分中，并在其正下方的 X 轴上使用正确的月份标签？只要正确的月份显示在正确的数据下方，我什至可以在没有间隔线的情况下生活。

我用样条线、线和没有任何格式尝试过这个图表，它们都有同样的问题。帮助。现在是星期五，我想把这个修好，这样我就可以去酒吧了。

更新：根据要求 - 后面的代码：

```
 // set Y axix range
        Chart1.ChartAreas["ChartArea1"].AxisY.Minimum = 0;
        Chart1.ChartAreas["ChartArea1"].AxisY.Maximum = 100;

        // show y line every x%
        Chart1.ChartAreas[0].AxisY.Interval = 10;

        // Set axis title
        Chart1.ChartAreas["ChartArea1"].AxisX.Title = "Period";
        Chart1.ChartAreas["ChartArea1"].AxisY.Title = "Percentage (%)";

        // set the x axis date format to short month and year
        Chart1.ChartAreas[0].AxisX.IsLabelAutoFit = false;
        Chart1.ChartAreas[0].AxisX.LabelStyle.Format = "MMM \n yyyy";

        // The legend
        Chart1.Legends.Add("Default");
        Chart1.Legends["Default"].Docking = Docking.Bottom;
        Chart1.Legends["Default"].Alignment = StringAlignment.Center;

        // load the template for the basic styles
        Chart1.Serializer.IsResetWhenLoading = false;
        Chart1.LoadTemplate("SkyBlue.xml"); 
```

并标记：

```
<asp:Chart ID="Chart1" runat="server" DataSourceID="SqlDataSource1"
        Width="600px">
        <Series>
            <asp:Series Name="thing1" XValueMember="Period"
                YValueMembers="thing1">
            </asp:Series>
            <asp:Series ChartArea="ChartArea1" Name="Team" XValueMember="Period"
                YValueMembers="thing2">
            </asp:Series>
            <asp:Series ChartArea="ChartArea1" Name="Systems" XValueMember="Period"
                YValueMembers="thing3">
            </asp:Series>
            <asp:Series ChartArea="ChartArea1" Name="Env" XValueMember="Period"
                YValueMembers="thing4">
            </asp:Series>
        </Series>
        <ChartAreas>
            <asp:ChartArea Name="ChartArea1">
            </asp:ChartArea>
        </ChartAreas>
    </asp:Chart>
    <asp:SqlDataSource ID="SqlDataSource1" runat="server"
        ConnectionString="<%$ ConnectionStrings:myConnString %>"
        SelectCommand="mySP"
        SelectCommandType="StoredProcedure">
        <SelectParameters>
            <asp:Parameter DefaultValue="1" Name="ID" Type="Int32" />
        </SelectParameters>
    </asp:SqlDataSource> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T08:27:41.210

> 该图表将集群直接定位在二月标签的顶部。

不完全的！查看数据，然后仔细查看图表。第一行是过时`31 Jan`的，并且条形簇的中心正确地位于左侧（即就在之前）`Feb`。同样，第二个集群 - 来自数据的日期`28 Feb`位于`Mar`轴刻度线的左侧。

> 如何将列簇集中在它们自己的间隔部分中，并在其正下方的 X 轴上使用正确的月份标签

确保您传递给图表的数据是您要绘制的数据。如果您想整月工作，请让您的*数据*只有*确切的*月份 - 如果您有类似的数据

```
Date        Thing1  Thing2
01-01-2012   100     200
01-02-2012   200     200
01-03-2012   300     300 
```

您的图表将完全符合您的要求。

关键是要明白，只是说

```
Chart1.ChartAreas[0].AxisX.LabelStyle.Format = "MMM \n yyyy"; 
```

不会将基础数据更改为远离“完整”日期，它只会更改轴的输出格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-03T22:36:17.303

将 LabelStyle 标签中的 Interval 属性设置为 1，您的标签被跳过的问题将得到解决；它只会放置您指定的标签。

Chart1->ChartAreas->ChartArea1->AxisX->LabelStyle->Interval

[来源/更多细节](http://attemptsatprogramming.blogspot.com/2013/05/aspnet-chart-labels-not-showing-up.html)

# forms - PayPal 表单在 Chrome 中不起作用

> ID：12010075
> 
> 赞同：0
> 
> 时间：2012-08-17T17:05:51.883
> 
> 标签：forms, google-chrome, paypal

我有一个购物车表格。当我使用 FF、IE 或 Safari 提交表单时，一切正常（它被重定向到 PayPal 帐户并显示产品描述、价格和登录付款选项）

但是在 Chrome 中提交时，它会打开 PayPal HOME 页面。

这是表格：

```
<form id="paypalForm" name="paypalForm" action="http://www.paypal.com/cgi-bin/webscr" method="post">
    <input type="text" name="business" value="myaccount@hotmail.com"> 
    <input type="text" name="cmd" value="_cart">
    <input type="text" name="notify_url" value="http://www.mywebsite.com/ipnlib/ipn.php" />
    <input type="text" name="return" value="http://www.mywebsite.com" />
    <input type="text" name="currency_code" value="MXN" />
    <input type="text" name="upload" value="1">

        <input type="text" name="item_number_1" value="02603">
        <input type="text" name="item_name_1" value="02603 HOVER PRO 450">
        <input type="text" name="quantity_1" value="1">
        <input type="text" name="amount_1" value="14239.4">

    <input type="submit" value="submit" />
    </form> 
```

如果我检查发送的标头，似乎很好，这就是 Firebug 和 Chrome 开发工具的标头选项显示的内容：

铬合金

```
business:myaccount@hotmail.com
cmd:_cart
notify_url:http://www.mywebsite.com/ipnlib/ipn.php
return:http://www.mywebsite.com
currency_code:MXN
upload:1
item_number_1:02603
item_name_1:02603 HOVER PRO 450
quantity_1:1
amount_1:14239.4 
```

火狐

```
amount_1    14239.4
business    myaccount@hotmail.com
cmd _cart
currency_code   MXN
item_name_1 02603 HOVER PRO 450
item_number_1   02603
notify_url  http://www.mywebsite.com/ipnlib/ipn.php
quantity_1  1
return  http://www.mywebsite.com
upload  1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T22:31:03.410

找到了！！！

代替

```
<form id="paypalForm" name="paypalForm" action="http://www.paypal.com/cgi-bin/webscr" method="post"> 
```

是：

```
<form id="paypalForm" name="paypalForm" action="https://www.paypal.com/cgi-bin/webscr" method="post"> 
```

奇怪的是它可以在除 Chrome 之外的所有浏览器中运行......

# iphone - CGAffineTransform旋转

> ID：12010082
> 
> 赞同：1
> 
> 时间：2012-08-17T17:06:17.773
> 
> 标签：iphone, ios, core-graphics, cgaffinetransform

我已经使用核心图形绘制了条形图。（图1）

![在此处输入图像描述](../Images/b3c89f1ebd4ad5a42f05c6264209bdbc.png)

我需要另一个条形图，如下所示。我不需要为此编写另一个图表，我需要重用我已经编写的代码。我想有一种方法可以使用旋转来做到这一点。但诀窍是宽度和高度在 2 个图表中交换。有任何想法吗？

![在此处输入图像描述](../Images/a355919f51955c4f083790fa092af259.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T17:32:45.440

如果您的输出是 a`UIImage`并且您使用简单的 显示它`UIImageView`，您可以像这样调整图像视图的变换属性：

```
#define degreesToRadians(x) (M_PI * x / 180.0)
[myImageView setTransform:CGAffineTransformMakeRotation(degreesToRadians(90))]; 
```

这样做可以正确调整`UIImageView`. 例如，如果图像视图在此旋转后开始为 100x200，则其框架将为 200x100，并且其中的图像也将旋转。

然后，您甚至可以调整锚点以使用以下方式旋转：

```
#import <QuartzCore/QuartzCore.h>
[[myImageView layer] setAnchorPoint:CGPointMake(0.5, 0.5)]; 
```

( `CGPoint`0.5, 0.5) 指的是图像视图的中心。

# dbix-class - 我将如何使用 DBIX::Class 编写此查询？

> ID：12010094
> 
> 赞同：0
> 
> 时间：2012-08-17T17:06:49.153
> 
> 标签：dbix-class

我在 Stackoverflow 上看到了其他一些讨论子选择的问题，但它们通常与使用多个表有关。在大多数情况下，正确的连接可以达到相同的目的。

但是我下面的查询是指一个表。我将如何使用 DBIX::Class 编写它？

```
select  ID, username, email, role
from Employees
where (ID in 
    (select max(ID)
        from Employees
        where username = 'jsmith'
    ))
order by ID DESC 
```

谢谢！

-- 编辑 1：SQL 代码修复

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T22:54:18.583

The [Cookbook](https://metacpan.org/module/DBIx%3a%3aClass%3a%3aManual%3a%3aCookbook#Correlated-subqueries) has almost the exact same query as example.

Your SQL query doesn't make sense to me because the subquery returns a single id, so WHERE id = () would make more sense. What are you trying to accomplish with it?

# android - 添加资源包链接以加载新活动

> ID：12010095
> 
> 赞同：0
> 
> 时间：2012-08-17T17:06:50.550
> 
> 标签：android

我有一段文字，结尾有一个网址。我在strings.xml 中有文本和链接。有没有办法让它从strings.xml文件中加载一个新的活动？我假设我将不得不分解段落文本和链接，但我想我会检查一下。

strings.xml：快速棕色狐狸可以在以下位置找到：[http](http://thequickbrownfox.com) ://thequickbrownfox.com \n 更多文字在这里

我需要更改硬编码的网址“http://thequickbrownfox.com”以在我的应用程序中加载屏幕而不是网页上的页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T17:20:45.383

strings.xml 纯粹是一种用于字符串查找的抽象机制，以促进多语言支持等；您不能使用它来加载活动或以编程方式执行任何其他操作。听起来您实际上是在谈论从存储在 strings.xml 中的特定段落中解析 url，然后根据该 url 是什么，您调用相应的活动。

如果是这种情况，那么您可以从段落中解析出 url 并做出相应的响应。

或者

您可以将段落作为一项存储在 strings.xml 中，将您的 url 作为另一项存储，并以编程方式将它们组合到您的代码中。

取决于您在做什么，这两种方法都可以。

# symfony - Symfony 2 与 Doctrine 2 单表继承

> ID：12010098
> 
> 赞同：1
> 
> 时间：2012-08-17T17:07:05.390
> 
> 标签：symfony, doctrine-orm, yaml, single-table-inheritance

在我基于 Symfony 2 + Doctrine 2 的项目中，我使用以下方法实现模型（基于 FOSUserBundle 源代码）：

1.  属于模型的所有类都在我的包的“模型”文件夹中
2.  在“实体”文件夹中，我有从模型扩展类的类
3.  在“Resources/config/doctrine/”中，我有带有 YAML 格式映射的文件

**重要提示：**我希望 STI 从模型而不是实体扩展相应类的持久性（实体）类。

问题：

```
#Resources/config/doctrine/ContentElement.orm.yml
My\CoreBundle\Entity\ContentElement:
    type: entity
    table: content_element 
    inheritanceType: SINGLE_TABLE
    discriminatorColumn:
        name: discr 
        type: string
        length: 255
    discriminatorMap: 
        contentElement: ContentElementList
        htmlContentElement: HtmlContentElement
    id:   
        id:   
            type: integer
            generator: { strategy: AUTO }
    fields:
        anchor_id:
            type: string
        anchor_text:
            type: string

#Resources/config/doctrine/HtmlContentElement.orm.yml
My\CoreBundle\Entity\HtmlContentElement:
    type: entity
    fields:
        html: 
            type: text 
```

当我尝试更新数据库时，我从 YAML 驱动程序中得到了错误，直到我另外指定了“id”（我认为它应该被继承）

在为 id 添加映射后，我有 sql 查询，其中我看到每个实体有 2 个单独的表。

我怀疑这是因为 HtmlContentElement 扩展了 Model\HtmlContentElement 而不是 Entity\ContentElement。

我是对的吗？我的问题是否有已知的解决方案？

# .net - Metro 应用程序 - ListView - 如何替换 ListViewItems 的背景颜色

> ID：12010099
> 
> 赞同：8
> 
> 时间：2012-08-17T17:07:08.613
> 
> 标签：.net, xaml, windows-runtime, windows-store-apps, winrt-xaml

在 Windows 8 的 Metro 风格应用程序中，我将 Listview 绑定到 ObservableCollection，我希望每个 ListViewItem 的背景颜色交替显示（白色、灰色、白色等）

```
 <ListView x:Name="stopsListView" ItemsSource="{Binding}" >
        <ListView.ItemTemplate>
            <DataTemplate>
                <Grid Height="66" >
                    <TextBlock Text="{Binding Title}" />
                </Grid>
            </DataTemplate>
        </ListView.ItemTemplate> 
```

在 WPF 中，这是使用带有触发器的样式完成的 - 请参阅[此页面](http://refat38.wordpress.com/2011/03/23/wpf-listview-alternate-row-color/)。

您如何在 Metro 应用程序中完成此操作？

**更新：**

在下面给出正确答案后，我离开并实际编码了它。这里有一些代码供任何需要它的人使用：

值转换器类的代码：

```
public class AltBackgroundConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, string language)
    {
        if (!(value is int)) return null;
        int index = (int)value;

        if (index % 2 == 0)
            return Colors.White;
        else
            return Colors.LightGray;
    }

    // No need to implement converting back on a one-way binding
    public object ConvertBack(object value, Type targetType, object parameter, string language)
    {
        throw new NotImplementedException();
    }
} 
```

XAML 列表视图的代码：

```
 <ListView x:Name="stopsListView" ItemsSource="{Binding}">

        <ListView.ItemTemplate>
            <DataTemplate>
                <Grid Width="250" Height="66" Margin="5">
                    <Grid.Background>
                        <SolidColorBrush Color="{Binding IndexWithinParentCollection, Mode=OneWay, Converter={StaticResource AltBGConverter}}" />
                    </Grid.Background> 
```

...并且，在向集合中添加项目或修改集合时，请记住在集合中设置它们的索引：

```
myCollection.add(item);
item.IndexWithinParentCollection = myCollection.Count; 
```

当然，如果您的集合经常更改，这种方法的维护成本很高，因为您必须重新索引您的项目，所以我发现在每个项目中存储对父集合的引用更容易，然后计算索引-the-fly 使用 .IndexOf() 避免每次集合更改时都必须不断更新索引值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T17:18:49.453

您可以使用转换器 - 从项目中获取行索引并将其转换为画笔。此外 - 如果 ItemTemplate 没有给您足够的控制权 - 使用 ItemContainerStyle 在 ListViewItem 模板级别修改画笔。

另一种选择可能是指定一个 ItemTemplateSelector，它根据项目为您提供具有不同画笔的不同模板。您仍然需要生成行索引，或者以某种方式启用选择器来确定项目是在偶数还是奇数位置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-30T16:10:45.673

我相信这里的代码示例很有用 [https://msdn.microsoft.com/en-us/library/ms750769(v=vs.85).aspx](https://msdn.microsoft.com/en-us/library/ms750769(v=vs.85).aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T17:21:09.753

从来没有尝试过这样的造型，但如果：

您将背景颜色绑定到某个属性，该属性将根据列表视图中当前项目的索引通过 IValueConverter 设置。

如果我有任何意义。

**编辑：**

有趣的是，当我写答案时，Filip Skakun 提出了完全相同的想法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-08T13:19:10.707

我在网上搜索并找到了一种技术，其中包括将索引属性添加到相关模型中，然后将转换器添加到 DataTemplate。这并不理想，因为它只更改了列表项的内容，因此根据填充和内容对齐，您会看到行背景周围的间隙。我也不喜欢用 UI 代码修改我的数据模型对象的代码味道。

试试这个它会有所帮助， [http://www.bendewey.com/index.php/523/alternating-row-color-in-windows-store-listview](http://www.bendewey.com/index.php/523/alternating-row-color-in-windows-store-listview)

# php - PHP：数组似乎重新初始化

> ID：12010102
> 
> 赞同：2
> 
> 时间：2012-08-17T17:07:25.433
> 
> 标签：php, arrays, oop

我正在尝试制作一个基本的 html 表单，将信息传递给 php 对象，然后将所述对象添加到数组中。它的工作原理是将信息从表单传递到对象，然后将其添加到数组中并显示所述对象。但是，当我尝试向数组添加第二个对象时，它似乎只是用新的单元素数组替换数组，而不是添加到它。这是我的代码......有什么想法吗？

index.php 文件：

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Custom Forms</title>
    </head>
    <body>
        <h2>Add Data</h2>
        <form method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>">
            First Name:<input type="text" size="12" maxlength="12" name="Fname"><br />
            Last Name:<input type="text" size="12" maxlength="36" name="Lname"><br />
            <button type="submit" name="submit" value="client">Submit</button>
        </form>
        <?php
        include_once 'clientInfo.php';
        include_once 'clientList.php';

        if ($_POST) {
            $clientArray[] = new clientInfo($_POST["Fname"], $_POST["Lname"]);
        }

        if (!empty($clientArray)) {
            $clientList = new clientList($clientArray);
        }
        ?>
        <p><a href="clientList.php">go to client list</a></p>
    </body>
</html> 
```

clintInfo.php 文件：

```
<?php
class clientInfo {

    private$Fname;
    private$Lname;

    public function clientInfo($F, $L) {
        $this->Fname = $F;
        $this->Lname = $L;
    }

    public function __toString() {
        return $this->Fname . " " . $this->Lname;
    }
}
?> 
```

clientList.php 文件：

```
<?php
class clientList {
    public function clientList($array) {
        foreach($array as $c) {
            echo $c;
        }
    }
}
?> 
```

**带答案的编辑工作代码**

index.php 文件：

```
<?php
include('clientInfo.php');
session_start();
?>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Custom Forms</title>
    </head>
    <body>
        <h2>Add Data</h2>
        <form method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>">
            First Name:<input type="text" size="12" maxlength="12" name="Fname"><br />
            Last Name:<input type="text" size="12" maxlength="36" name="Lname"><br />
            <button type="submit" name="submit" value="client">Submit</button>
        </form>
        <?php
        if ($_POST) {
            $testClient = new clientInfo($_POST["Fname"], $_POST["Lname"]);

            echo $testClient . " was successfully made. <br/>";

            $_SESSION['clients'][] = $testClient;

            echo end($_SESSION['clients']) . " was added.";
        }
        ?>
        <p><a href="clientList.php">go to client list</a></p>
    </body>
</html> 
```

clientList.php 文件：

```
<?php
include('clientInfo.php');
session_start();
?>
<!DOCTYPE html>
<html>
    <head>
        <title>
            Accessing session variables
        </title>
    </head>
    <body>
        <h1>
            Content Page
        </h1>
        <?php
        for ($i = 0; $i < sizeof($_SESSION['clients']); $i++) {
            echo $_SESSION['clients'][$i] . " was added. <br/>";
        }
        ?>
        <p><a href="index.php">return to add data</a></p>
    </body>
</html> 
```

对象文件 clientInfo.php 保持不变。需要将对象存储在多维 $_SESSION 数组中并使用 for 循环调用，foreach 循环将不起作用，除非其他人知道使 foreach 循环工作的方法，坚持使用 for。附带说明一下，可以跳过 $testClient 变量并同时创建并放置在 $_SESSION 中，但是使用 temp 变量可以更容易地排除故障并查看如何使其工作。只是想我会用乔希提供的答案发布工作代码！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T17:10:00.873

您需要为数组对象添加持久性。

请参阅 PHP 的[$_SESSION](http://php.net/manual/en/features.sessions.php)。

如果您不在请求之间将其存储到内存或磁盘中，则它不可能在连续加载时存在。该链接中有一个很好的教程，可以帮助您启动并运行。

或者，您可以将内容存储在数据库中，以满足更大的需求。

# windows - 如何在不打开新的 cmd 窗口的情况下从命令行启动程序？

> ID：12010103
> 
> 赞同：25
> 
> 时间：2012-08-17T17:07:29.530
> 
> 标签：windows, command-line, cmd

`cmd`我正在尝试使用此命令以编程方式执行外部文件：

```
START "filepath" 
```

`"filepath"`我的文件的路径在哪里。它可以正常打开，但也会打开一个新的命令提示符窗口。

那么，在不打开新窗口的情况下打开外部程序的正确命令是什么？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-06-25T13:11:52.080

在 Windows 7+ 中，第一个引号将是`cmd`打开程序的窗口的标题：

```
start "title" "C:\path\program.exe" 
```

像上面那样格式化你的命令会暂时打开一个`cmd`窗口，它一出现就消失得很快，所以你真的永远看不到它。它还允许您打开多个程序，而无需等待第一个程序先关闭。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-17T17:15:09.337

添加 /B，如启动的命令行帮助中所述：

```
C:\>start /?
Starts a separate window to run a specified program or command.

START ["title"] [/D path] [/I] [/MIN] [/MAX] [/SEPARATE | /SHARED]
  [/LOW | /NORMAL | /HIGH | /REALTIME | /ABOVENORMAL | /BELOWNORMAL]
  [/NODE <NUMA node>] [/AFFINITY <hex affinity mask>] [/WAIT] [/B]
  [command/program] [parameters]

"title"     Title to display in window title bar.
path        Starting directory.
B           Start application without creating a new window. The
            application has ^C handling ignored. Unless the application
            enables ^C processing, ^Break is the only way to interrupt
            the application. 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-12-12T02:15:21.977

只需删除双引号，这适用于 Windows 7：

```
start C:\ProgramFiles\folderName\app.exe 
```

如果你想最大化窗口，试试这个：

```
start /MAX C:\ProgramFiles\folderName\app.exe 
```

您的命令`START "filepath"`将启动命令提示符并将命令提示符标题更改为`filepath`.

尝试`start /?`在 windows 命令提示符下运行，您将获得更多信息。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-04-21T12:50:41.540

我想如果你关闭一个程序

```
taskkill /f /im "winamp.exe" 
//....(winamp.exe is example)... 
```

结束，所以如果你想启动一个你可以使用的程序

```
start "" /normal winamp.exe 
```

(/norma,/max/min 是那个进程值 cpu)

还

开始“文件路径”[![在此处输入图像描述](../Images/fc99c7738f99bd1bb04578faefaf9d4e.png)](https://i.stack.imgur.com/rCgOY.png)

如果您想要命令行而不打开新窗口，您可以这样写

开始 /b "文件路径"[![在此处输入图像描述](../Images/f01c69215100637d441e2aad50b45cfc.png)](https://i.stack.imgur.com/GuTmO.png)

/B 是启动应用程序而不创建新窗口。应用程序忽略了 ^C 处理。除非应用程序启用 ^C 处理，否则 ^Break 是中断应用程序的唯一方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T13:37:35.293

如果您按照您所说的那样通过 CMD 进行操作，那么您可以像这样输入命令：

```
path\to\your.exe 
```

这将在同一窗口中打开它。例如在 C++ 中：

```
system("path\\to\\your.exe"); // Double backslash for escaping 
```

将`your.exe`在当前 CMD 窗口中打开。同样要从新窗口开始，只需：

```
system("start path\\to\\your.exe"); 
```

如果您选择第一个选项，则必须清除屏幕，除非您想要打开命令`your.exe`仍然在屏幕上打开。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-16T17:52:51.807

你可以使用`call`命令...

类型：`call /?`

用法：`call [drive:][path]filename [batch-parameters]`

例如`call "Example File/Input File/My Program.bat"`[这也可以调用具有*.exe*、*.cmd*、*.txt*等的文件。

***注意：此命令并不总是有效！！！***

并非所有计算机都能够运行此命令，但如果它确实有效，那么它非常有用，并且您不必打开一个全新的窗口......

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-05-27T14:28:28.713

我从[qkzhu](https://stackoverflow.com/a/20533779)得到了它，但不是使用 MAX 而是将其更改为 MIN 并且窗口将非常快地关闭。

```
@echo off
cd "C:\Program Files (x86)\MySQL\MySQL Server 5.6\bin"
:: Title not needed:
start /MIN  mysqld.exe
exit 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-09-14T11:36:13.407

使用 explorer.exe 启动文件/可执行文件更容易、更安全，它还可以使用关联程序打开文件并直接运行可执行文件，如果您执行：

```
start "" "%windir%\explorer.exe" "C:\Path\To\some.pdf" 
```

如果`*.PDF`文件不与任何程序相关联。这类似于双击并触发“使用程序打开”对话框。

```
start "" "%windir%\explorer.exe" "%windir%\system32\calc.exe" 
```

会调出计算器。

```
start "" "%windir%\explorer.exe" "C:\pagefile.sys" 
```

会出现类似警告：*您正在尝试打开系统文件 (*.sys)... 选择一个程序...*

## 重要的

explorer.exe 始终需要可执行文件/文件的完整路径，而不是相对路径。如果要使用相对路径，请使用

```
start "" "%windir%\explorer.exe" "relative\file.pdf","C:\dir\" 
```

### 安全相关

如果可能，使用`start "" "some\file.dat"`将**尝试将文件作为二进制文件执行**并启动它。这可能会导致安全相关问题。您可以通过创建`cmd.exe`调用它的副本`dummy.dat`并使用它启动它来测试它`start dummy.dat`

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-09-07T10:24:38.080

20190907

操作系统：赢 10

我正在用 C++ 制作一个 exe，出于某种原因，使用**START**会使我的程序失败。

所以，只需使用引号：

“c:\文件夹\program.exe”

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2018-06-26T15:23:25.840

1-在文件资源管理器中打开包含您的应用程序的文件夹。2-按 SHIFT 并在空白处右键单击。3-单击“在此处打开命令窗口”。4-运行您的应用程序。（您可以键入应用程序名称的前几个字符，然后按向上箭头键或向下箭头键）

# r - 在 R 中使用约束

> ID：12010104
> 
> 赞同：4
> 
> 时间：2012-08-17T17:07:40.287
> 
> 标签：r, constraints

这里很简单，我曾经知道这一点，但多年来它已经丢失了。

在 R 中易于编码的简单方程：

```
f(x,y) = 2x^2 + 4y^2 + 6x - 8y + 15 
```

我有`x > 1`和的限制`y > -1`。

我这辈子都不记得如何在 R 中正确编写约束，而我的书没有用

为任何帮助而欢呼

寻找最小值和最大值

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T17:26:21.750

定义采用单个参数向量的函数：

```
myfun <- function(xy) { 
  x <- xy[1] 
  y <- xy[2] 

  2*x^2 + 4*y^2 + 6*x - 8*y + 15
} 
```

为and提供起始值`optim`并指定下限：`x``y`

```
starting_values <- c(0, 0)
optim(starting_values, myfun, lower=c(1, -1), method='L-BFGS-B') 
```

`optim`输出：

```
$par
[1] 1 1

$value
[1] 19

$counts
function gradient 
       2        2 

$convergence
[1] 0

$message
[1] "CONVERGENCE: NORM OF PROJECTED GRADIENT <= PGTOL" 
```

# jquery - 如何使用 jQuery NuGet 包 1.8.0 附带的 intellisense.js 文件而不是 vsdoc.js？

> ID：12010106
> 
> 赞同：24
> 
> 时间：2012-08-17T17:08:01.603
> 
> 标签：jquery, visual-studio, intellisense, visual-studio-2012

我刚刚发现 jQuery NuGet 包的最新版本（1.8.0）包含我找不到任何文档的新型 vsdoc 文件。intellisense 文件只包含 jQuery 库的基于 xml 注释的文档。我不确定如何使用这个文件。

![智能感知文件](../Images/6a7b40c2a20a363c0b493232d7a08516.png)

您对此有任何想法或文件吗？我在这个项目中使用 VS2012。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-06T11:27:40.033

在 JavaScript 文件中，JavaScript 语言服务为添加到项目中的第三方 JavaScript 库提供 IntelliSense 功能。对于大多数库，语句完成由语言服务自动提供。下图显示了语句完成的示例：

![在此处输入图像描述](../Images/33dfe4e06b12625e1f9ac5607268f687.png)

在 Visual Studio 2012 中，Visual Studio 会自动查找“.intellisense.js”文件并像旧的 vsdoc 文件一样使用它，而无需编写真正的 JavaScript 结构。

![在此处输入图像描述](../Images/d168d91ae6894202125f2cc1a290e888.png)

有关其他信息，请查看以下链接。

[扩展 JavaScript IntelliSense](http://msdn.microsoft.com/en-us/library/vstudio/hh874692.aspx)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-31T18:11:34.040

你不需要做任何事情。您只需要使用从 nuget 安装或更新 jquery 包

```
Install-Package jQuery 
```

或者

```
Update-Package jQuery 
```

然后智能感知和文档随处可见。

您不再需要 vsdoc，因为新文件 jquery-1.8.0.intellisense 更有条理。

Scott Hanselman 在以下 url 上还有一个很棒的视频，它展示了 Visual Studio 2012 中 JavaScript 编辑器的新功能[http://www.asp.net/vnext/overview/videos/visual-studio-2012-javascript-editor](http://www.asp.net/vnext/overview/videos/visual-studio-2012-javascript-editor)

# github - 在一页上列出你所有的 Github 要点？

> ID：12010108
> 
> 赞同：4
> 
> 时间：2012-08-17T17:08:07.383
> 
> 标签：github, gist

我有一些 Github 要点，我正在向潜在雇主展示我的编码风格。我确实相信我所有的 github 要点都是公开的，因为这就是我选择制作它们的方式。但是在访问 gist.github.com/myusername ...我知道我没有公开的要点。但是，我可以独立查看我的每个个人要点，而无需登录那里的公共 url。这意味着它们确实是公共要点。

我怎样才能在一页上列出它们？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T17:29:58.527

正如@aleung 提到的，您应该能够通过以下链接查看所有公共要点：

`https://gist.github.com/{username}`

例如，我所有公开的都可以在这里查看：[https ://gist.github.com/bcantoni](https://gist.github.com/bcantoni)

如果它不能正常工作，你可以联系[Github Support](https://github.com/contact)。我发现他们反应灵敏。

# php - 使用 PHP 将 HTML 表单数据转换为 PDF 文件

> ID：12010110
> 
> 赞同：10
> 
> 时间：2012-08-17T17:08:26.310
> 
> 标签：php, html, forms, pdf, pdftk

我已经寻找和测试了几天了，想知道是否有人可以指出我不同的方向。我有一个很长的工作申请 HTML 表单 (jobapp.html) 和一个匹配的 PDF (jobpdf.pdf)，它们对于 HTML 表单和 PDF 中的所有条目具有相同的字段名称。我需要获取表单中输入的用户数据并将其转换为 PDF。这是我到目前为止收集的内容，但不知道我是否走上了正轨：

pdftk 是唯一可行的第 3 方应用程序吗？

使用 pdftk 我会获取为用户收集的 $_POST 数据并生成 .fdf(user.fdf) 然后将 .fdf 展平在 .pdf(job.pdf) 上。因此，不管每个文档上的字段位于何处，fdf 上的信息都会按字段名称填充 pdf？

我一直在尝试 [http://koivi.com/fill-pdf-form-fields/tutorial.php](http://koivi.com/fill-pdf-form-fields/tutorial.php)

我还查看了“[将 HTML 表单提交到 PDF](https://stackoverflow.com/questions/11164376/submit-html-form-to-pdf) ”

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-17T17:17:50.367

我曾多次使用[fpdf](http://www.fpdf.org/)创建基于 php 的 pdf 文档。以下示例：

```
require('fpdf.php');

$pdf = new FPDF();

$pdf->AddFont('georgia', '', 'georgia.php');
$pdf->AddFont('georgia', 'B', 'georgiab.php');
$pdf->AddFont('georgia', 'I', 'georgiai.php');

# Add UTF-8 support (only add a Unicode font)
$pdf->AddFont('freesans', '', 'freesans.php', true);
$pdf->SetFont('freesans', '', 12);

$pdf->SetTitle('My title');
$pdf->SetAuthor('My author');
$pdf->SetDisplayMode('fullpage', 'single');

$pdf->SetLeftMargin(20);
$pdf->SetRightMargin(20);

$pdf->AddPage();
$pdf->Cell(40,10,'Hello World!');
$pdf->Output(); 
```

您可以通过网站本身的这些[教程](http://www.fpdf.org/en/tutorial/index.php)快速学习。

* * *

**编辑**：保存表单数据的示例：（是的，很容易......）

```
require('fpdf.php');
$pdf = new FPDF();

$pdf->AddPage();
foreach ($_POST as $key =>$data)
{
    $pdf->Write(5, "$key: $data"); //write
    $pdf->Ln(10); // new line
}
$pdf->Output($path_to_file . 'file.txt','F'); // save to file 
```

* * *

看看这些用 fpdf 创建的页面，真的！

![在此处输入图像描述](../Images/7b4b275796474d5bc697872e1da2fabb.png)

![在此处输入图像描述](../Images/d83a86705e33af55bcf125344b090c11.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T17:10:49.663

[http://www.fpdf.org/](http://www.fpdf.org/)

那将是图书馆来做这件事。我在这里使用它来将图像添加到表单并提交以使用这些图像创建 PDF：[http ://productionlocations.com/locations](http://productionlocations.com/locations)

执行此操作的实际代码非常复杂。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T17:22:05.843

我发现[PrinceXML](http://www.princexml.com/)非常易于使用。它获取您的 HTML/XML，应用 CSS，并将其转换为 PDF。PHP 扩展工作得很好。不幸的是，它不是免费的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-06-01T12:33:47.367

您可以考虑的一种方法是使用将任何 HTML 转换为 PDF 的在线 API。您可以向他们发送一个生成的 HTML（更容易生成），其中将包含您的用户提交的数据，并接收回一个高保真 PDF。

市场上有相当多的服务可供选择。我喜欢提到[PDFShift](https://pdfshift.io)，因为它提供了一个[PHP 包，](https://github.com/pdfshift/pdfshift-php)可以为您简化工作。

一旦你安装了它（使用 Composer，或者直接下载它，取决于你的选择），你可以像这样快速转换一个 HTML 文档：

```
require_once('vendor/autoload.php');
use \PDFShift\PDFShift;

PDFShift::setApiKey('{your api key}');
PDFShift::convertTo('https://link/to/your/html', null, 'invoice.pdf'); 
```

就是这样。您可以实现很多功能（访问受保护的文档、添加水印等等）。

希望有帮助！

# android - 使用谷歌地图的安卓应用

> ID：12010111
> 
> 赞同：-1
> 
> 时间：2012-08-17T17:08:27.937
> 
> 标签：android, google-maps

我们可以在谷歌地图中显示一个特定区域的所有这三个标准杂货店、宠物店、移动商店吗

转到此链接[http://maps.google.co.in/](http://maps.google.co.in/)然后输入 California,grocery store 然后擦除杂货店并输入 California,walmart ......我想结合这两个谷歌地图

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T17:49:46.983

首先，看一下开始使用地图活动：

[http://blog.sptechnolab.com/2011/01/01/android/getting-started-with-android-map-view/](http://blog.sptechnolab.com/2011/01/01/android/getting-started-with-android-map-view/)

然后研究如何使用地理编码器进行查询：

[http://developer.android.com/reference/android/location/Geocoder.html](http://developer.android.com/reference/android/location/Geocoder.html)

[http://www.edumobile.org/android/android-development/gecoding-example/](http://www.edumobile.org/android/android-development/gecoding-example/)

然后，您只需将它们组合起来用于您的特定用途。

但是，是的，您正在寻找的是可能的。

# android - Android Phonegap Plugin 在虚拟和真实设备上的结果不同（Looper.prepare() ERROR）

> ID：12010115
> 
> 赞同：1
> 
> 时间：2012-08-17T17:08:34.753
> 
> 标签：android, plugins, cordova

我在 phonegap（html5、JQuery、JS）中开发了一个移动应用程序，我想开发一个插件来打印到 BT 打印机。

我下载了打印机制造商的 SDK，并将适当的 .jar 文件导入到我的项目中。

我创建了以下插件

js

```
var HelloPlugin = {

    callNativeFunction: function (success, fail, resultType) {
        return cordova.exec(success, fail, "com.tricedesigns.HelloPlugin", "nativeAction", [resultType]);
    }
}; 
```

爪哇

```
package com.tricedesigns;

import org.apache.cordova.api.Plugin;
import org.apache.cordova.api.PluginResult;
import org.json.JSONArray;
import com.starmicronics.stario.StarIOPort;
import com.starmicronics.stario.StarIOPortException;
import com.starmicronics.stario.StarPrinterStatus;

import android.app.AlertDialog;
import android.app.AlertDialog.Builder;
import android.content.Context;
import android.util.Log;

public class HelloPlugin extends Plugin {

    public static final String NATIVE_ACTION_STRING="nativeAction";
    public static final String SUCCESS_PARAMETER="success";

    @Override
    public PluginResult execute(String action, JSONArray data, String callbackId) {

         Log.d("HelloPlugin", "Hello, this is a native function called from PhoneGap/Cordova!");

         //only perform the action if it is the one that should be invoked
         if (NATIVE_ACTION_STRING.equals(action)) {
             String resultType = null;
             StarIOPort port = null;
             byte[] texttoprint = new byte[]{0x1b,0x74,0x0D,(byte) 0x91,(byte) 0x92,(byte) 0x93,(byte) 0x94,(byte) 0x95,(byte) 0x96,(byte) 0x97,(byte) 0x98,(byte) 0x99,0x0A,0x0A,0x0A,0x0A,0x0A};
             try 
             {
                port = StarIOPort.getPort("BT:", "mini", 10000, null);
                    try
                    {
                        Thread.sleep(500);
                    }
                    catch(InterruptedException e) {}

                port.writePort(texttoprint, 0, texttoprint.length);
                    try
                    {
                        Thread.sleep(3000);
                    }
                    catch(InterruptedException e) {}

                resultType = "success";
             }
             catch (StarIOPortException e)
             {
                 resultType = "error";
             }

             if (resultType.equals(SUCCESS_PARAMETER)) {
                 return new PluginResult(PluginResult.Status.OK, "Yay, Success!!!");
             }
             else {
                 return new PluginResult(PluginResult.Status.ERROR, "Oops, Error :(");
             }

         }

         return null;
    }

} 
```

html

```
<!DOCTYPE html>
<html>
  <head>
  <title></title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no;" />
    <meta charset="utf-8">

    <!-- If your application is targeting iOS BEFORE 4.0 you MUST put json2.js from http://www.JSON.org/json2.js into your www directory and include it here -->
    <script type="text/javascript" charset="utf-8" src="cordova-1.6.1.js"></script>

    <script type="text/javascript" charset="utf-8" src="HelloPlugin.js"></script>
    <script type="text/javascript">

    function onBodyLoad()
    {       
        document.addEventListener("deviceready", onDeviceReady, false);
    }

    /* When this function is called, Cordova has been initialized and is ready to roll */
    /* If you are supporting your own protocol, the var invokeString will contain any arguments to the app launch.
    see http://iosdevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html
    for more details -jm */
    function onDeviceReady()
    {
        // do your thing!
        navigator.notification.alert("Cordova is working")
    }

    function callNativePlugin( returnSuccess ) {
        HelloPlugin.callNativeFunction( nativePluginResultHandler, nativePluginErrorHandler, returnSuccess );
    }

    function nativePluginResultHandler (result) {
       alert("SUCCESS: \r\n"+result );
    }

    function nativePluginErrorHandler (error) {
       alert("ERROR: \r\n"+error );
    }

    </script>
    </head>
    <body onload="onBodyLoad()">
        <h1>Hey, it's Cordova!</h1>

        <button onclick="callNativePlugin('success');">Click to invoke the Native Plugin with an SUCCESS!</button>
        <button onclick="callNativePlugin('error');">Click to invoke the Native Plugin with an ERROR!</button>
    </body>
</html> 
```

当在虚拟设备上运行时，由于没有连接到打印机而总是出错，但在真实设备上运行时会出现以下错误：

> 错误：无法在未调用 Looper.prepare() 的线程内创建处理程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T13:53:44.143

我遇到了在某些设备上出现的相同问题。一个聪明的男孩托比成功地帮助了我。因此，下一个解决方案是：
- 在调用任何 StarIOPort 的方法之前，您必须检查 looper 是否存在：

```
if (Looper.myLooper() == null) {
    Looper.prepare();
} 
```

在你的情况下，它看起来像这样：

```
 try 
 {
    if (Looper.myLooper() == null) {
        Looper.prepare();
    }
    port = StarIOPort.getPort("BT:", "mini", 10000, null);
        try
        {
            Thread.sleep(500);
        }
        catch(InterruptedException e) {}

    port.writePort(texttoprint, 0, texttoprint.length);
        try
        {
            Thread.sleep(3000);
        }
        catch(InterruptedException e) {}

    resultType = "success";
 }
 catch (StarIOPortException e)
 {
     resultType = "error";
 } 
```

另一个建议：
相反

```
port = StarIOPort.getPort("BT:", "mini", 10000, null); 
```

只用

```
port = StarIOPort.getPort("BT:", "mini", 10000); 
```

在插件中你不会使用 Context

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T11:42:19.713

我只需要将我的执行包含在下面的代码中

```
 this.ctx.runOnUiThread(new Runnable()
        {
            public void run()
            {
            // my code
            }
        }); 
```

# iphone - 类扩展 - 无法识别的设置器

> ID：12010118
> 
> 赞同：1
> 
> 时间：2012-08-17T17:08:50.043
> 
> 标签：iphone, objective-c, ios, xcode, ipad

以下代码崩溃：

```
@interface AppDelegate (PrivateMethods)

@property (nonatomic, strong) NSString * name;

@end

@implementation AppDelegate

- (BOOL) application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

    self.name = @"foobar";
    ... 
```

错误是：

```
'-[AppDelegate setName:]: unrecognized selector sent to instance 0x6d73df0' 
```

当我改变

```
@interface AppDelegate (PrivateMethods) 
```

到

```
@interface AppDelegate () 
```

然后就好了，请问是什么原因呢？

**更新：正如下面回答的那样，因为我必须为此目的使用类扩展，所以现在这个问题变成了：使用类扩展来声明私有方法是否可以接受？**

例如

```
@interface AppDelegate ()

- (void) start;
@property (nonatomic, strong) NSString * name;

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T17:36:42.830

类扩展主要用于增强公共属性变量。假设你已经暴露了 readonly 对象，或者任何变量的 getter 方法，那么你在扩展中创建了与 readwrite 相同的对象。而 Category 仅用于增强类的方法/功能。

检查这个

```
@interface MyClass : NSObject
// property here is used as readonly.
@property (retain, readonly) float value;
@end

// Private extension, typically hidden in the main implementation file.
@interface MyClass ()
@property (retain, readwrite) float value;
@end 
```

或者

```
@interface MyClass : NSObject
// here we have exposed getter method of private instance.
- (float) value;
@end

// Private extension, typically hidden in the main implementation file.
@interface MyClass ()
@property (retain, strong) float value;
@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T17:11:17.320

一个是类别，另一个是类扩展。如果要向现有类添加属性，则需要使用后者。

这是正确的做法：

```
@interface AppDelegate ()

@property (nonatomic, strong) NSString * name;

@end 
```

# html - 下载浏览器时，“浏览器端”“设置为默认浏览器”设置如何工作？

> ID：12010120
> 
> 赞同：1
> 
> 时间：2012-08-17T17:08:58.113
> 
> 标签：html, google-chrome, installation, server-side

安装 Google Chrome 时，网页会询问您是否要将 Google Chrome 设置为默认浏览器：

![在此处输入图像描述](../Images/b811576d6c1e03adc339a2309c928f0b.png)

这是一个提交给服务器的表单，这个复选框的结果如何使它进入客户端的最终安装，如果有的话？

该复选框是否只告诉服务器发送不同的安装程序？或者这可能只是一个复选框没有效果的社会实验，但结果正在被汇总和分析？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T17:16:50.270

特别是对于 Chrome，我只是尝试下载两个安装程序（有和没有“默认”选项），发现它们确实不同。

```
$ cmp ChromeSetup.exe ChromeSetup2.exe
ChromeSetup.exe ChromeSetup2.exe differ: byte 405, line 4 
```

# asp.net - 从数据库加载时，是否有更可靠的方式在网页上显示图像？

> ID：12010121
> 
> 赞同：4
> 
> 时间：2012-08-17T17:09:03.943
> 
> 标签：asp.net

我有一个系统，您可以在其中查看照片作为记录的额外细节。假设这是一张员工猫的照片。
这些照片存储在我们的数据库中。

当前，当有人希望查看小猫时。我们像这样渲染一个`img`标签。

```
<a href="#" onclick="RenderTag('20');return false;">View Kitty</a>
<div id="imageDiv"></div>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">
function RenderTag(id){
    $('#imageDiv').html('<img src="http://localhost/GetKitty.aspx?ID=' + id + '" />');
}
</script> 
```

GetKitty.aspx 像这样工作

```
protected void Page_Load(object sender, EventArgs e)
{
    Response.Clear();
    Response.AddHeader("Content-Disposition","attachment;FileName=kitty.bmp");
    Response.ContentType = "image/bmp";
    Response.Cache.SetLastModified(DateTime.Now);
    Response.Cache.SetCacheability(HttpCacheability.NoCache);
    Bitmap kitty = GetKittyBitmap(Request.QueryString("ID"));
    kitty.Save(Response.OutputStream, kitty.RawFormat);
    Response.Flush();
    Response.Close();
    kitty.Dispose();
} 
```

单击锚链接后，页面是这样的。
![在此处输入图像描述](../Images/7d0355419f1c429df08ef0d49be69285.png)

问题是，有时小猫不会出现在我们的移动设备上，我的用户会感到沮丧，并打电话给办公室的人用他们的手机给小猫拍照并将小猫照片通过电子邮件发送给他们。

对通过电子邮件发送小猫图片的需求如此之大，以至于他们现在要求将发送小猫图片的电子邮件功能内置到系统中。

如果小猫的该死图片一直按预期呈现，则可以避免构建该功能。

是否有更可靠的方法来显示存储在数据库中的图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T18:37:15.220

虽然我认为这种方法没有问题，但您应该将其实现为 HttpHandler(.ashx)

如果 Kitty 不必在整个页面生命周期之后运行一个 aspx 页面，它会更快地离开您的服务器。

由于您是通过网络发送此图片，因此请考虑使用 jpg 或 png 等压缩格式。位图很大。你越快把小猫送出去越好。

对您的应用程序进行负载测试，从多个客户端下载多次并保存文件。IIS 有时会遇到它可以处理的同时请求数的限制。

如果你有一个页面上有几个这样的小猫图像，那就是对 asp.net 的许多请求。在 asp.net 2.0 上，默认的线程数只有 25。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T17:22:20.890

您可以尝试使用 jQuery .load 函数来提供错误处理功能（并可能重新开始获取图像），如[this](https://stackoverflow.com/questions/4285042/can-jquery-ajax-load-image) SO post所示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T15:10:43.473

好的，我发现了一种让小猫始终渲染的可靠方法！

看来，如果我添加`Content-Length`标题，它可以解决问题。

我是这样实现的。

```
using (MemoryStream inputMS = NewMemoryStream(kittyBytes))
using (Bitmap kittyBitmap = new Bitmap(inputMS))
{
    Response.Clear();
    Response.Cache.SetLastModified(DateTime.Now);
    Response.Cache.SetCacheability(HttpCacheability.NoCache);

    //Some logic goes here determining the image type of the kitty
    //We send low rez jpgs at certain times
    string kittyFileSuffix = ".bmp";
    string kittyContentType = "image/bmp";

    Response.AddHeader("Content-Disposition", "attachment;FileName=Kitty" + kittyFileType);
    Response.ContentType = kittyContentType;
    using (Image smallKitty = ResizeKitty(kittyBitmap))
    {
        long quality = 40;
        Imaging.EncoderParameters ep = new Imaging.EncoderParameters(1);
        ep.Param[0] = new Imaging.EncoderParameter(Imaging.Encoder.Quality, quality);
        using (MemoryStream outputMS = new MemoryStream())
        {
            smallKitty.Save(outputMS, GetImageCodecInfo(kittyContentType), ep);
            Response.AddHeader("Content-Length", outputMS.Length);
            outputMS.WriteTo(Response.OutputStream);
            Response.Flush();
            Response.Close():
        }
    }
} 
```

# javascript - 在 javascript 中使用正则表达式查找特定单词

> ID：12010122
> 
> 赞同：0
> 
> 时间：2012-08-17T17:09:04.723
> 
> 标签：javascript, html, regex

我一直在寻找 SO 中的答案，但我没有得到直接的答案，或者它们适用于 JavaScript 以外的语言。我想使用正则表达式在类列表中查找类名。

因此，例如，我有这个 HTML，我想检查它是否在类`hidden`列表中的某处有该类：

```
<div class="target box hidden"></div> 
```

我正在使用这个 JS 代码，但它不起作用：

```
// ON CLICK DO THE BELOW:
var divs = document.getElementsByTagName('div'),
    re = /\bhidden\b/gi, //here's the regEx
    i;

for (i = 0, max = divs.length; i < max; i += 1) {
    if (divs.className === 'targets') {
        var targets = divs[i];

        if (targets.match(re)) {
            targets.replace('hidden', '');
        } else {
            targets.className = 'target box hidden';
        }
    }
} 
```

基本上，我想做一个显示/隐藏功能，即如果`hidden`类存在则隐藏元素，否则显示元素。

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T17:11:08.537

您正在尝试将正则表达式与标签本身进行匹配。相反，您应该这样做：

```
if( targets.className.match(re))
   targets.className = targets.className.replace('hidden',''); 
```

此外，您的`divs.className === "targets"`检查也不起作用，因为`divs`它是一个数组，而不是一个元素。删除该`if`声明。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T17:16:51.733

```
function hasClass(ele,cls) {
    return ele.className.match(new RegExp('(\\s|^)'+cls+'(\\s|$)'));
}

function addClass(ele,cls) {
    if (!this.hasClass(ele,cls)) ele.className += " "+cls;
}

function removeClass(ele,cls) {
    if (hasClass(ele,cls)) {
        var reg = new RegExp('(\\s|^)'+cls+'(\\s|$)');
        ele.className=ele.className.replace(reg,' ');
    }
} 
```

希望代码能有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-17T17:51:19.943

为什么不切换类，这是我在所有插件上使用的片段，就像一个魅力：

```
var s = {
    hasClass: function( elem, classname ) {
      var reg = new RegExp( "(^|\\s+)" + classname + "(\\s+|$)" );
      console.log(elem);
      return elem && reg.test( elem.className );
    },

    addClass: function( elem, classname ) {
      if( elem && !s.hasClass( elem, classname ) ) {
        elem.className += " " + classname;
      }
    },

    removeClass: function( elem, classname ) {
      var reg = new RegExp( "(^|\\s+)" + classname + "(\\s+|$)" );
      elem && ( elem.className = elem.className.replace( reg, " " ) );
    },

    toggleClass: function( elem, classname ) {
      var fn = s.hasClass( elem, classname ) ? "remove" : "add";
      s[ fn + "Class" ]( elem, classname );
    }
} 
```

# python - 如何将任意选项字符串解析为python字典

> ID：12010126
> 
> 赞同：9
> 
> 时间：2012-08-17T17:09:30.490
> 
> 标签：python, string, dictionary

我试图找到最 Pythonic 的方式来获取包含命令行选项的字符串：

```
"-t 500 -x -c 3 -d" 
```

并把它变成字典

```
{"-t":"500", "-x":True, "-c":"3", "-d": True} 
```

**更新**：字符串还应该能够包含 --long 选项，以及中间带有破折号的单词：

```
"-t 500 -x -c 3 -d --long-option 456 -testing weird-behaviour" 
```

在建议我研究 OptionParse 模块之前，请记住我不知道有效选项是什么或类似的东西，我只是试图将字符串放入字典中，以允许根据不同的选项字典对其进行修改。

我正在考虑的方法是使用 split() 将项目放入列表中，然后遍历列表并查找以破折号“-”开头的项目并将它们用作键，然后以某种方式进入下一个项目值的列表。我遇到的问题是没有值的选项。我想过做类似的事情：

```
for i in range(0, len(opt_list)):
        if opt_list[i][0] == "-":
            if len(opt_list) > i+1 and not opt_list[i+1][0] == "-":
                opt_dict[opt_list[i]] = opt_list[i+1] 
            else:
                opt_dict[opt_list[i]] = True 
```

但是当我这样做时，似乎我是在用 C 而不是 Python 编程......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-17T21:58:15.407

要正确处理引号内的空格，您可以使用[`shlex.split()`](http://docs.python.org/library/shlex.html)：

```
import shlex

cmdln_args = ('-t 500 -x -c 3 -d --long-option 456 '
              '-testing "weird -behaviour" -m "--inside"')

args = shlex.split(cmdln_args)
options = {k: True if v.startswith('-') else v
           for k,v in zip(args, args[1:]+["--"]) if k.startswith('-')}

from pprint import pprint
pprint(options) 
```

### 输出

```
{'--inside': True,
 '--long-option': '456',
 '-c': '3',
 '-d': True,
 '-m': True,
 '-t': '500',
 '-testing': 'weird -behaviour',
 '-x': True} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T18:39:15.013

您可以像这样使用正则表达式：

```
import re

args = "-t 500 -x -c 3 -d --long-option 456 -testing weird-behaviour"
matches = re.findall(r'(--?[\w-]+)(.*?)(?= -|$)', args)

result = {}
for match in matches:
    result[match[0]] = True if not match[1] else match[1].strip()

print result 
```

结果等于

```
{
'-d': True, 
'-c': '3', 
'-t': '500', 
'--long-option': '456', 
'-x': True, 
'-testing': 'weird-behaviour'
} 
```

* * *

正则表达式细分：

`(--?[\w-]+)(.*?)(?= -|$)`

*   `(--?[\w-]+)`匹配以“-”或“--”开头的任何字符或单词（单词中允许使用破折号）。
*   `(.*?)`使用问号以[非贪婪或最小方式](http://docs.python.org/library/re.html#regular-expression-syntax)匹配任何字符 0 次或更多次。
*   `(?= -|$)`是一个积极的前瞻。它会检查我们正在寻找的内容是否跟在“-”或字符串的结尾，但它不会将其包含在匹配项中。

请注意此正则表达式中括号的使用。这些用于创建组，因此当我们调用`findall`它时，它会将它们拆分为元组。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T21:27:11.817

人类的参数解析 - [https://github.com/kennethreitz/args](https://github.com/kennethreitz/args)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-17T17:29:47.877

我不能说最多的`Pythonic`方式，但这里有一个 1-liner：

```
opt_list = "-t 500 -x -c 3 -d"

dict((e if len(e) >1 else (e[0],True) for e in (elem.split() 
      for elem in ('-'+d for d in opt_list.split('-') if d)))) 
```

`>>>{'-t': '500', '-x': True, '-c': '3', '-d': True}`

**[编辑：正如马蒂亚斯所指出的，这不适用于其中带有“-”的值]**

...但是，总的来说，当您在选项值中允许使用“-”时，我认为 OP 的答案无法明确解决。

考虑这些简单的选项：

“-a-b”

这是：

*   {'-a': '-b'},
*   {'a-'：真，'-b'：真}

？？？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T17:38:32.623

```
>>> results = "-t 500 -x -c 3 -d".split()
>>> rd = {}
>>> while i < len(results):
...    if results[i].startswith("-"):
...       rd[results[i]]=True
...       try:
...          if not results[i+1].startswith("-"):
...             rd[results[i]] = results[i+1]
...       except IndexError: pass
...    i+=1
...
>>> rd
{'-t': '500', '-x': True, '-c': '3', '-d': True} 
```

但与你所拥有的非常相似..

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-17T17:44:06.297

它最初出现的一个更难的问题，这是我的第一次尝试。它只是遍历参数并检查它们是否以`-`. 如果是这样，而下一个参数没有，则将这两项添加到字典中，否则将当前参数添加到字典中`True`。如果参数列表中的`try`最后一项以 开头，则需要`-`。

```
args = "-t 500 -x -c 3 -d".split()

d = {}

for i, item in enumerate(args):
    if item.startswith('-'):
        try:
            if args[i+1].startswith('-'):
                d[item] = True
            else:
                d[item] = args[i+1]
        except IndexError:
                d[item] = True

print d # prints {'-t': '500', '-x': True, '-c': '3', '-d': True} 
```

**编辑：受**[Gerrat 分裂`-`](https://stackoverflow.com/a/12010396/623518)启发的另一种解决方案如下：

```
args = "-t 500 -x -c 3 -d".split('-')

d = {}

for arg in args:
    if arg:
        try:
            k, v = arg.split()
        except ValueError:
            k, v = arg.strip(), True

        d[k] = v 
```

`-`但是，正如 Matthias 指出的那样，如果选项和值中包含s ，这可能不起作用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-17T18:58:51.420

```
import re

myDictionnary = {}

strPattern1 = "-[0-9a-z ]*"
strPattern2 = "-([0-9a-z]+) *(.*)"
strToParse = "-t 500 -x -c 3 -d"

listKeyValues = re.findall(strPattern1, strToParse)

for kv in listKeyValues:

    match = re.search(strPattern2, kv)

    key = match.group(1)
    value = match.group(2)

    if len(value) > 0:
        myDictionnary[key] = value
    else:
        myDictionnary[key] = True 
```

# image - 表格中的巨大差距 - 2010 年展望

> ID：12010129
> 
> 赞同：2
> 
> 时间：2012-08-17T17:09:43.467
> 
> 标签：image, outlook, html-table, html-email, spacing

我正在为在办公室的 PC 上使用 Outlook 2010 版本 14 的客户处理多封电子邮件。无论电子邮件是如何创建的，表格的右侧都被炸飞了。

例如：
电子邮件 #1：

![http://screencast.com/t/DLGfSTWFWfCB](../Images/b844c18460eb57ecf93f542fae0a0069.png)

电子邮件＃2：

![http://screencast.com/t/ftgLlNW8](../Images/948fc6a09ab8934de5ed6fbd2ef85bcf.png)

这是代码：查看源： http://fortworth.dmplocal.com/main/index.php?action=viewsenthtml&id=95& [ids=e9499cb22fd2fbaee560c877a2716fa0aab6880d](http://fortworth.dmplocal.com/main/index.php?action=viewsenthtml&id=95&ids=e9499cb22fd2fbaee560c877a2716fa0aab6880d)

我做了很多搜索，试图找出我可以做些什么来解决这个问题，以下是一些事情：

*   将所有 CSS 内联
*   确保所有单元格填充、单元格间距和边框都设置为零
*   表格的指定宽度
*   指定图像的高度和宽度
*   确保图像是代码中指定的高度和宽度
*   制作图像 jpg 与 png 的对比
*   删除了所有不必要的空白
*   我的桌子高度不超过 23.7 英寸

我已经阅读了很多论坛，发现很多人也对 Outlook 有问题，但我没有找到一个在表格右侧有大空间的论坛，因此将其推出我的论坛。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T13:58:58.123

对于 HTML 表格，指定`width`和`height`使用 HTML 属性而不是 CSS 样式。Outlook 的现代版本忽略`width`和`height`样式。

正如@MarcB 提到的，Outlook 2007/2010/2013 使用 Word 的渲染引擎来渲染电子邮件。以前的 Outlook 版本使用 IE 的渲染引擎。这种转变导致 HTML 电子邮件的格局发生了重大变化。

以下是 Outlook 2007 及更高版本不支持的部分功能列表：

**CSS 样式**

*   漂浮
*   位置
*   展示
*   宽度
*   高度
*   填充（不适用于 div 和 p 标签）
*   背景图像（仅适用于 body 标签）
*   列表样式图像

**HTML 属性**

*   alt（图片）
*   背景（表，th，td）
*   colspan, rowspan (th, td) （这方面的信息相互矛盾，但它似乎受支持，只要不使用值 0 即可；但是，通常建议嵌套表而不是使用 colspan 和 rowspan）

**各种各样的**

*   动画 GIF
*   HTML 表单

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T13:54:23.477

尝试放置`/>`关闭图像标签。仅此一项就对我有用。这是一个完全由 MS 发明的问题。好像以前还不够糟糕。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T16:46:49.393

@MattCoughlin 的答案就 Outlook 代码而言是正确的。但是，我还要补充一点，Outlook对列数和行数*非常具体。*

因此，请检查列数是否相加。必要时使用空单元格和 colspan。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T10:51:39.843

至于我 Outlook 忽略了 div 的宽度，所以如果你像这样编码：

```
<div style="width:500px">
<table width="100%">
...
</table>
</div> 
```

表格的宽度将扩大到 100%，因此尝试将所有固定宽度的元素嵌套在表格中，并设置为这些父表格的固定宽度（注意表格也需要样式），例如：

```
<table width="500px" style="width:500px">
<div style="width:500px">
...
</div>
</table> 
```

这将为您提供所需的宽度

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-19T02:15:06.667

我只是对您的代码进行了一些编辑，并为您提供了一个小提琴供您测试。

[http://jsfiddle.net/YWnzc/135/](http://jsfiddle.net/YWnzc/135/)

但我无法检查我在 Outlook 2010 中做了什么，但我认为 Outlook 2010 有很多限制

[http://fixoutlook.org/](http://fixoutlook.org/)

让我知道事情的后续。

此外，我还看到您的代码中嵌套了表格。我不认为这是必要的。看到您的邮件设计，这应该非常相似，如果编码正确，您报告的 pronlem 不应该在那里。

# git - 在 git 存储库中提取特定引用

> ID：12010130
> 
> 赞同：0
> 
> 时间：2012-08-17T17:09:44.527
> 
> 标签：git, git-merge, git-pull

我正在研究 Linux TV 内核项目中的一个特定项目，并且需要知道如何为它提取引用。它们存储在存储库的一个名为“实验”的分支中。基本上，到目前为止我所做的是：

```
git clone git://github.com/torvalds/linux.git v4l-dvb 
cd v4l-dvb 
git remote add linuxtv git://linuxtv.org/media_tree.git 
git remote update 
git checkout -b media-master remotes/linuxtv/staging/for_v3.7 
```

最终，我想做的是检查 staging/for_v3.7 分支的提交（因为这是正在积极开发的分支），然后将适用于 drx-j 驱动程序的实验分支的引用合并到其中. 参考资料位于[http://git.linuxtv.org/mchehab/experimental.git/shortlog/refs/heads/drx-j](http://git.linuxtv.org/mchehab/experimental.git/shortlog/refs/heads/drx-j)

所以我的问题是，我将使用什么命令将该引用中的所有更改提取到我的本地存储库中？

谢谢，祝你有美好的一天:) 帕特里克。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T17:21:05.347

如果我理解正确，您可以将 fetch 添加到 .git/config

```
[remote "linuxtv"]
fetch = +refs/heads/*:refs/remotes/origin/staging/for_v3.7 
```

您可以查看 Pro Git 第 9.5 节 Refspec [https://github.com/progit/progit/](https://github.com/progit/progit/)

# c# - Task.Factory.StartNew 部署时不执行任务

> ID：12010131
> 
> 赞同：6
> 
> 时间：2012-08-17T17:09:44.780
> 
> 标签：c#, visual-studio-2010, .net-4.0, task-parallel-library

我有一些代码在我自己的计算机 Windows 7 上安装/运行时按预期工作，但是当我在其他服务器（2003 和 2008）上运行它时却没有。该代码来自我在 Windows 服务中使用的 .NET4 WCF 服务库。在这里，简化了。

```
public void monitorQueueAndDoStuff() {
  MonitorRetryQueue();
  MonitorMainQueue();                
}

private void MonitorMainQueue() {
  Log.Info("MonitorMainQueue called");
  Task.Factory.StartNew(() =>
  {
    Log.Info("new thread monitoring queue");
    // ...NMS stuff

        while (!stopped) {
          ITextMessage mess = null;
            mess = blockingMessageCollection.Take();
            sendToQueue(mess);
        }
      }
    }
  });
}

private void MonitorRetryQueue() {
  Task.Factory.StartNew(() =>
  {
    //...NMS stuff
        consumer.Listener += new MessageListener(OnRetryErrorMessage);
        Log.Info("new thread monitoring second queue");

        //need to be constantly up for the consumer to hang around
        while (!stopped) {
          Thread.Sleep(1000);
        }
      }
    }
      });
} 
```

线程应该进入循环来做一些工作。BlockingCollection 上的主要块。现在，它创建了两个任务，但它只进入第二个，它从不在日志中打印“新线程监控队列”。我不明白为什么不。我尝试了远程调试，但由于它从不输入代码，我看不到任何有价值的东西。

我还没有发现任何会改变已部署服务器上代码行为的东西。这里有人可能有线索吗？Visual Studio 项目中的任何设置？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-17T17:33:54.977

有时这种行为表明过载`ThreadPool`。

鉴于这些是长时间运行/阻塞的任务，它们不应该被安排在 中运行`ThreadPool`，这是`Task.Factory.StartNew`使用默认值发送它们的地方`TaskScheduler`。

IMO，`Task.Factory.StartNew`可能不是最适合这个，你最好启动自己的线程来运行这些循环。

```
ThreadStart action=()=>{
    //do your thing
};
Thread thread=new Thread(action){IsBackground=true};
thread.Start(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T17:22:10.860

日志中是否打印了任何日志消息？你看到`"MonitorMainQueue called"`打印了吗？你怎么知道第二个任务已经启动但不是第一个？创建/写入日志文件可能是权限问题吗？

编辑：此外，为了回应@spender 所说的关于长时间运行的任务，使用该选项启动任务时会出现过载。

`Task.Factory.StartNew(MonitorMainQueue, TaskCreationOptions.LongRunning);`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-29T12:50:44.260

部署到我的生产环境时我遇到了同样的问题。

问题是由于应用程序池使用的身份造成的。

默认情况下，它使用具有受限权限的 applicationPoolIdentity。

我们更改为“网络服务”并且它起作用了。

注意：我并不是说使用 NetWorkService 是最好的解决方案，但这显然是一个安全权利问题。

# c++ - 在其他类c ++之前无法访问类

> ID：12010133
> 
> 赞同：0
> 
> 时间：2012-08-17T17:09:58.247
> 
> 标签：c++, class, function, header

嘿伙计们，我无法按照我需要的方式设置头文件。为了简化我的问题，这里有一个例子：

```
#ifndef MYHEADER_H
#define MYHEADER_H    

class Parent
{
    Child mykid; //a kid of mine
    void dosomething(void);
};

class Child
{
        Parent * mydad; //pointer back to my dad
        void dosomething(void);
};    

#endif // MYHEADER_H 
```

在编译器甚至知道它之前，我基本上需要在另一个类中使用一个类。有没有办法在我定义内部之前告诉编译器我的类？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T17:12:43.647

这：

```
class Parent;
class Child
{
        Parent * mydad; //pointer back to my dad
        void dosomething(void);
};    
class Parent
{
    Child mykid; //a kid of mine
    void dosomething(void);
}; 
```

建议：将它们移动到单独的标题`Parent`中`Child.h`，`#include "Child.h"`在`Parent.h`.

`Parent`需要一个完整的定义`Child`才能工作，`Child`只需要一个声明。

我还建议您停止使用原始指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T17:13:09.867

当然：

```
class Parent;

class Child { Parent * dad; };
class Parent { Child kid; }; 
```

要定义一个类，所有类成员都必须有一个**完整的类型**。`class Parent;`做`Parent`一个*不完整的类型*。但是，对于*任何*类型`T`，无论是完整的还是不完整的，`T *`始终*是*完整的类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T17:13:33.817

```
class Parent;

class Child
{
        Parent * mydad; // it's enough to know class exists
        void dosomething(void);
};  

class Parent
{
    Child mykid; // We must know size of a class
    void dosomething(void);
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T17:24:31.937

`Parent`包含一个`Child`对象，所以它的定义必须在`Child`;的定义之后 这是需要完整定义的类型的用途之一。

`Child`只包含一个指向 a 的指针`Parent`，所以它只需要一个`Parent`类型的声明。

所以你需要：

```
// Declaration
class Parent;

// Definitions
class Child
{
    Parent * mydad; // type can be incomplete
    void dosomething(void);
};
class Parent
{
    Child mykid; // type must be complete
    void dosomething(void);
}; 
```

当一个类型已声明但未定义时，它被称为*不完整*的。您可以对不完整类型执行各种操作，包括声明指针和对其的引用，以及在函数声明中将其用作参数或返回类型。您不能创建该类型的对象（包括声明该类型的非静态类成员），因为这需要定义才能了解各种事实，例如其大小。

# python - 在不执行类的情况下导入 - python

> ID：12010140
> 
> 赞同：5
> 
> 时间：2012-08-17T17:10:53.060
> 
> 标签：python, class, object, python-2.7, call

我的问题是关于我有一个包含类的文件，并且在这个类中有一堆代码将被执行

所以每当我导入该文件时，它都会执行！不创建类的对象！, 这里是例子

文件`X`

```
class d:
    def __init__(self):
        print 'print this will NOT be printed'
    print "this will be printed" 
```

文件`B`

```
import x 
```

输出是`this will be printed`，所以我的问题是**如何跳过执行它直到创建一个新对象？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T17:23:15.650

你不能在 Python 中这样做，在 Python 中，每个类都是第一级对象，Python 类也是一个对象，即使没有该类的实例，类属性也可以存在。如果您只想抑制打印语句的输出，您可以在导入时刻重定向打印语句的输出，或者创建一个类似于第一个[答案](https://stackoverflow.com/questions/1809958/hide-stderr-output-in-unit-tests)`__import__`中提供的上下文并手动使用该语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T00:54:44.887

正如其他人指出的那样，第二个`print`语句正在执行，因为它是构成类声明的一组语句之一——所有这些语句在它们所在的模块时执行是`imported`因为声明是其顶级代码的一部分它被嵌套在函数或方法中。

第一条`print`语句不会执行，因为它是方法定义的一部分，其语句在被调用之前不会执行——与类定义中的语句不同。通常，`__init__()`当使用类的名称创建类的实例时，会间接调用类的方法，该名称`d()`适用于与您的名称`d`类似的名称。

因此，尽管它与正在显示的字符串文本中的内容相矛盾，但要使第二`print`条语句仅在创建类的实例时执行（就像第一个一样），您还需要使其成为同一方法的一部分（或被它调用）。换句话说，这样做之后，当类所在的文件被`import`编辑时，它们都不会执行，但是当类的任何实例被创建时，它们都会执行。这就是我的意思：

文件`x.py`：

```
class d:
    def __init__(self):
        print 'print this will NOT be printed'  # not true
        print "this will be printed when object is created" 
```

文件`b.py`：

```
import x  # no print statements execute
obj = d()  # both print statements will be executed now 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T19:00:31.667

如果您只想在导入期间禁止打印（或任何其他可执行语句），请检查顶级模块执行情况：

```
if __name__ == '__main__':
    print 'this will be printed' 
```

这将在导入期间阻止打印，但在模块交互执行时允许打印。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T17:53:04.540

（从上面的评论中复制，以防对未来的读者有用）

同意@mgilson 和@EmmettJButler - 这段代码可能最好放在`__init__`. 当 Python 导入一个模块时，它会执行模块级代码，包括使用类方法构建类定义等。因此，当您构建`import X`, 和`class d`的定义时（因此您可以从 调用它`B`），它会执行里面的代码类的。通常这意味着您将设置类级变量和准备附加到实例的未绑定方法，但在您的情况下，这意味着您的语句将被打印。

正如其他人所建议的那样，重构代码可能是您最好的选择。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-09T09:17:39.493

你的问题是：我有一个功能

```
def f():
    print(1)
    print(2) 
```

如何让 print(1) 被执行，而不是 print(2)？真的没有简单的方法。你要明白的是，这`def __init__(self)`也是一种说法。您的课程由该语句和打印语句组成。没有简单的方法来执行一个但不是另一个。当然，如果你可以更改类的来源，只需将 print 放在里面`__init__`，在创建实例后会调用它。

# ios - MKMapView 没有正确过渡

> ID：12010150
> 
> 赞同：1
> 
> 时间：2012-08-17T17:11:51.147
> 
> 标签：ios, animation, uiview, mkmapview

我有一个 MKMapView 作为另一个 UIView 的子视图，称为`mainView`. 如果我`mainView`在 y 轴上转换我的：

```
[UIView animateWithDuration:0.3 delay:0.0 options:UIViewAnimationOptionCurveLinear animations:^{
    CGRect frame = self.mainView.frame;
    frame.origin.y += 100.0f;
    self.mainView.frame = frame;
} completion:nil]; 
```

然后它`mainView`和它的所有子视图很好地在屏幕上向下过渡 100 个点，除了 MKMapView，它完全保持在原始位置。

所以我尝试了另一个实验，也移动了`frame.origin.y`MKMapView，然后实际移动了地图视图，但不与其他视图同步（它有一点延迟）。

有人知道为什么会这样吗？我假设是因为 MKMapView 不是直接`UIView`子类。有没有办法解决这种行为？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T15:14:33.270

**固定的。**问题是默认情况下设置`autoresizesSubviews`为父级的属性，并导致. 设置为使其像魅力一样工作:-)`UIView``YES``MKMapView``autoresizesSubviews``NO`

# javascript - Javascript 类型的数组是否初始化为 0？

> ID：12010151
> 
> 赞同：6
> 
> 时间：2012-08-17T17:12:02.017
> 
> 标签：javascript, webgl

我需要一个全为零的类型化数组，特别是 Float32Array。我在想我必须手动清除它，但我注意到当我声明它时，它已经被清零了。这是规范中指定的内容吗？我可以依靠这种行为吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T17:47:37.357

根据[JavaScript 的 Typed Array Specification，内容被初始化为 0](https://www.khronos.org/registry/typedarray/specs/latest/#5)。所以你应该能够依赖这种行为。

请注意，类型化数组[还没有很好的跨浏览器支持](http://caniuse.com/#feat=typedarrays)。Chrome、Safari、Firefox 和 Opera 都支持它，但 Internet Explorer 只在 IE10 中引入了支持。

我还应该提到，与普通数组相比，类型化数组目前[在 Safari 中非常慢。](https://bugs.webkit.org/show_bug.cgi?id=70687)因此，除非您的目标不是 Safari，否则您最好避免使用类型化数组。使用普通数组，所有数组值都初始化为`undefined`.

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-08-17T17:15:06.057

默认情况下`null`，如果您使用大小构造它们，则数组包含。因为`null == 0`您可能认为它充满了`0`，或任何其他虚假值。但是，如果您尝试在数字上调用方法，例如`.toString`. 或者，如果您通过一个需要数字形式的函数运行它，例如`parseInt`.

理想情况下，您应该始终初始化一个数组，以便确切地知道它包含什么，尽管我个人从未听说过 JS 中的类型化数组......

# mercurialeclipse - 当我与 MercurialEclipse 同步时没有任何反应

> ID：12010152
> 
> 赞同：1
> 
> 时间：2012-08-17T17:12:01.710
> 
> 标签：mercurialeclipse

我在 STS 2.9.2 中使用 MercurialEclipse 2.0.0。当我尝试将项目与其中央存储库同步时，它适用于某些项目，但对于其他项目则没有任何反应 - 同步视图不会出现，也不会出现错误消息。我可以执行“与...同步”并每次都选择存储库，但这很麻烦。会导致这种行为的项目之间有什么不同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T23:50:17.170

我认为这发生在多人身上。
决议待定。

目前，显示显式对话框的显式“与...同步”是最安全的选择。

[团队/同步问题](https://bitbucket.org/mercurialeclipse/main/issue/339/team-synchronize-question)
[MercurialEclipse 2.0 中丢失的固定同步](https://bitbucket.org/mercurialeclipse/main/issue/342/pinned-synchronizations-lost-in)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T17:33:52.630

打开*Mercurial 存储库*视图。右键单击从中克隆本地存储库的中央存储库-> 属性。如果登录名/密码字段为空，请填写它们（不过很奇怪，因为在我们的中央存储库中，在您实际推送之前不需要凭据）。重新尝试同步。

# javascript - Javascript——拦截键盘按下

> ID：12010154
> 
> 赞同：7
> 
> 时间：2012-08-17T17:12:02.850
> 
> 标签：javascript, jquery, javascript-events

我有一个始终有焦点的输入框。进入这个输入框的命令总是字母。如果用户按下一个数字，我不希望它被添加到文本框中，而是使用它来运行不同的命令（就像热键一样）。

我看到实现的方法是查看 keyup 事件并删除不需要的字符。相反，有什么方法可以拦截键盘输入并检查插入之前的值是什么？

我考虑过使用 div 创建自定义输入字段并拦截所有键盘命令。有没有办法让一个闪烁的插入符号看起来像一个输入框？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T17:16:38.930

听起来你想要一个`contenteditable`div：

```
<div id="editor" contenteditable="true"></div> 
```

`keydown`如果它们不是字母，您可以监听事件并阻止它们：

```
$("#editor").keydown(function (e) {
    if (e.which > 90 || (e.which > 48 && e.which < 65)) {
        e.preventDefault();
    }
}); 
```

要将数字处理为“热键”，您只需确定哪个键`e.which`是并相应地采取行动。

**示例：http:** [//jsfiddle.net/g3mgR/1](http://jsfiddle.net/g3mgR/1)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T17:22:38.670

像这样的东西会起作用：

```
<input type="text" id="txt" />​ 
```

对于 jQuery：

```
$('#txt').keydown(function (e) {
    var key = e.charCode || e.keyCode || 0;
    if (key > 46 && key < 58) {
        event.preventDefault();
        alert('its a number, do something');
    }
});​ 
```

这是[小提琴](http://jsfiddle.net/gWZf6/3/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T17:15:45.637

使用`keydown`而不是`keyup`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T17:19:27.687

结合使用`keypress`事件`String.fromCharCode`：

```
document.getElementById('yourTextBoxID').onkeypress = function () {
    var characterPressed = String.fromCharCode(event.keyCode);

    if (characterPressed.test(/[a-z]/i)) {
        // user pressed a letter
    } else {
        // user did not press a letter
    }
};​ 
```

[http://jsfiddle.net/TSB9r/3/](http://jsfiddle.net/TSB9r/3/)

# c++ - 擦除 std::forward_list 中的单个元素 -- prev_it=it 还是 ++prev_it？

> ID：12010156
> 
> 赞同：2
> 
> 时间：2012-08-17T17:12:09.503
> 
> 标签：c++

假设我有一个单链表 alike `std::forward_list`。我想找到与谓词匹配的*单个*列表元素，对其执行一些操作，并可选择根据另一个谓词将其删除。

到目前为止，我已经组装了以下内容：

```
for (T::iterator it = l.begin(), prev_it = l.before_begin();
        it != l.end();)
{
    if (predicate)
    {
        // ...

        if (another_predicate)
        {
            l.erase_after(prev_it);
            break;
        }
    }

    prev_it = it;
    ++it;
} 
```

但是，我特别想知道这是否是执行增量部分的最佳方式。或者，我一直在考虑：

```
 ++prev_it;
    ++it; 
```

虽然在纯 C 中前者显然会更好，但在 C++ 中似乎不再那么清楚了。我相信使用更简单的迭代器，前者应该更简单；但是，如果复制迭代器可能涉及内存分配（例如，使用 PImpl 时），则后者实际上可能更好。

你认为哪种方法更好，为什么？请注意，我想避免将其严格限制为通用`std::forward_list`设计，并考虑一种适用于更复杂类型的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T17:58:07.343

当 for 循环不增加它们的计数器时，我真的很困惑，所以我会简单地添加`++prev_it, ++it`到你的 for 循环中。您的迭代器将保持同步（前提是您不与它们混淆），并且名称清楚地说明了它们所指的内容。在担心性能之前，我总是在清晰度方面犯错。

您可能不应该担心将此代码推广到其他容器，因为这`std::forward_list`是一种特殊情况。其他容器不需要像`erase_after`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T17:43:56.437

如果你用两个增量而不是明显的先赋值后增量来编写它，那么所有未来的维护者都会盯着代码看一段时间，想知道它们缺少什么以及为什么以这种方式编写它。

您应该以明显的方式对其进行编码（保存 prev，然后递增），如果您的迭代器复制成本很高，而分析表明这是一个问题，请找到一个更好的迭代器。您通常不应该进行这样的代码更改来解决甚至可能不会明显影响您的性能的问题。

编辑：正如@Kerrek SB 在对该问题的评论中指出的那样，并且您对自己的意思稍微撒谎感到满意，您也可以使用`forward_list::remove_if`（小心）有状态的谓词来实现这一点。

# r - 无法使用 varPower 或其他 varClasses 更新我的 nlme 模型

> ID：12010158
> 
> 赞同：0
> 
> 时间：2012-08-17T17:12:18.200
> 
> 标签：r

我已经使用 nlme 拟合了一个模型，但我认为残差看起来不够好，所以我正在尝试通过

```
fit.nlme6 <- update(fit.nlme5, weights = varPower()) 
```

我明白了`Error: Singularity in backsolve at level 0, block 1`。我尝试了其他我认为没有多大意义的课程，并尝试了各种`forms = ~`and `fixed`。所有这些都带有相同的错误消息，有时带有额外的警告消息。

这是残差。我认为`varPower`应该可以完美地工作，那为什么不呢？

残差：

![](../Images/e2a4a5978658cf4565cb1ecf3c58ee2a.png)

更多信息，`fit.nlme5`是适合具有三个参数的 beta 生长函数的模型，`w.max`（最大生物量）、`t.e`（生长结束时刻）和`t.m`（最大生长时刻）。模型看起来像这样

```
fit.nlme5 <- update(fit.nlme4, fixed = list(t.e ~ trt + ground + trt:ground, w.max + t.m ~ 1),
                start = c(cfsTD[1:4], rep(0,2) ,cfsTD[5:6])) 
```

在两个位置（地面）有三个处理（trt）。在残差固定后，我将运行一些对比来比较不同位置的处理。

这是数据[https://dl.dropbox.com/u/21080842/cobsgddv8.txt](https://dl.dropbox.com/u/21080842/cobsgddv8.txt)

并且代码需要到达最终模型：

```
 #You'll need these functions
## Implementing the beta growth function from (Yin et al 2003)

bgfInit <- function(mCall, LHS, data){

  xy <- sortedXyData(mCall[["time"]], LHS, data)
  if(nrow(xy) < 4){
    stop("Too few distinct input values to fit a bgf")
  }
  w.max <- max(xy[,"y"])
  t.e <- NLSstClosestX(xy, w.max)
  t.m <- NLSstClosestX(xy, w.max/2)
  value <- c(w.max, t.e, t.m)
  names(value) <- mCall[c("w.max","t.e","t.m")]
  value

}

bgf <- function(time, w.max, t.e, t.m){

  .expr1 <- t.e / (t.e - t.m)
  .expr2 <- (time/t.e)^.expr1
  .expr3 <- (1 + (t.e - time)/(t.e - t.m))
  .value <- w.max * .expr3 * .expr2

  ## Derivative with respect to t.e
  .exp1 <- ((time/t.e)^(t.e/(t.e - t.m))) * ((t.e-time)/(t.e-t.m) + 1)
  .exp2 <- (log(time/t.e)*((1/(t.e-t.m) - (t.e/(t.e-t.m)^2) - (1/(t.e - t.m)))))*w.max
  .exp3 <- (time/t.e)^(t.e/(t.e-t.m))
  .exp4 <- w.max * ((1/(t.e-t.m)) - ((t.e - time)/(t.e-t.m)^2))
  .exp5 <- .exp1 * .exp2 + .exp3 * .exp4 

  ## Derivative with respect to t.m
  .ex1 <- t.e * (time/t.e)^((t.e/(t.e - t.m))) * log(time/t.e) * ((t.e - time)/(t.e -      
t.m) + 1) * w.max
  .ex2 <- (t.e - time) * w.max * (time/t.e)^(t.e/(t.e-t.m))
  .ex3 <- (t.e - t.m)^2
  .ex4 <- .ex1 / .ex3 + .ex2 / .ex3

  .actualArgs <- as.list(match.call()[c("w.max", "t.e", "t.m")])

##  Gradient
  if (all(unlist(lapply(.actualArgs, is.name)))) {
    .grad <- array(0, c(length(.value), 3L), list(NULL, c("w.max", 
                                                      "t.e", "t.m")))
    .grad[, "w.max"] <- .expr3 * .expr2
    .grad[, "t.e"] <- .exp5
    .grad[, "t.m"] <- .ex4 
    dimnames(.grad) <- list(NULL, .actualArgs)
    attr(.value, "gradient") <- .grad
  }
    .value
}

SSbgf <- selfStart(bgf, initial = bgfInit, c("w.max", "t.e", "t.m"))

#Now for the data and fitting
grow<-read.table("cobsgddv8.txt", header=T)

library(nlme)

grow10<-subset(grow, grow$year == "2010")
grow10$EU<- with(grow10, factor(ground):factor(plot))
grow10G<-groupedData(mass ~ gdd | EU, data=grow10)

fit.beta.10 <- nlsList(mass ~ SSbgf(gdd, w.max, t.e, t.m), data = grow10G)

fit.nlme.10<-nlme(fit.beta.10, random=pdDiag(w.max ~1))

cfs <- fixef(fit.nlme.10)
fit.nlme2 <- update(fit.nlme.10, fixed = list(t.e ~ trt, w.max + t.m ~ 1),
                    start = c(cfs[2], rep(0,2), cfs[c(1,3)]))

cfsT <- fixef(fit.nlme2)

fit.nlme3 <- update(fit.nlme.10, fixed = list(t.e ~ ground, w.max + t.m ~ 1),
                    start = c(cfs[2], rep(0,1), cfs[c(1,3)]))

cfsG <- fixef(fit.nlme3)

fit.nlme4 <- update(fit.nlme.10, fixed = list(t.e ~ trt + ground, w.max + t.m ~ 1),
                    start = c(cfsT[1:2], cfsG[1:2], cfs[c(1,3)]))

cfsTD <- fixef(fit.nlme4)

fit.nlme5 <- update(fit.nlme4, fixed = list(t.e ~ trt + ground + trt:ground, w.max +     
t.m ~ 1),
                    start = c(cfsTD[1:4], rep(0,2) ,cfsTD[5:6]))

fit.nlme6 <- update(fit.nlme5, weights = varPower()) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T17:50:21.223

正如克里斯所说，这还不够信息。由于这么多点接近于零，你应该给

```
varConstPower(power=0.5,fixed=list(const=10)) 
```

尝试一下，并使用偏移量。

# algorithm - 识别唯一自由多米诺（或多米诺散列）的算法

> ID：12010168
> 
> 赞同：14
> 
> 时间：2012-08-17T17:12:48.457
> 
> 标签：algorithm, hash, coordinates

简而言之：**如何散列一个免费的多骨牌？**

这可以概括为：**如何有效地散列任意二维整数坐标集合，其中一个集合包含唯一的非负整数对，当且仅当没有平移、旋转或翻转可以映射它时，一个集合才被认为是唯一的与另一组相同？**

对于不耐烦的读者，请注意我完全了解蛮力方法。我正在寻找一种更好的方法——或者一个非常有说服力的证据，证明没有其他方法存在。

我正在研究一些不同的算法来生成随机[**polyominos**](http://en.wikipedia.org/wiki/Polyomino)。我想测试它们的输出以确定它们的随机性——即给定订单的某些实例比其他实例更频繁地生成。从视觉上看，很容易识别自由多骨牌的不同方向，例如以下维基百科插图显示了“F”五联骨牌的所有 8 个方向（[来源](http://en.wikipedia.org/wiki/File:F-pentomino_Symmetry.svg)）：

![F pentimino](../Images/0f0e19a4f5d0b1f89ad5462d37549197.png)

如何在这个 polyomino 上加上一个数字 - 也就是说，散列一个免费的 polyomino？我不想依赖于“命名”多米诺骨牌的预填充列表。无论如何，广泛同意的名称只存在于订单 4 和 5。

这不一定等同于枚举给定顺序的所有自由（或单边，或固定）多骨牌。我只想计算给定配置出现的次数。如果一个生成算法从不产生某个 polyomino，那么它就不会被计算在内。

计数的基本逻辑是：

```
testcount = 10000 // Arbitrary
order = 6         // Create hexominos in this test
hashcounts = new hashtable
for i = 1 to testcount
    poly = GenerateRandomPolyomino(order)
    hash = PolyHash(poly)
    if hashcounts.contains(hash) then  
        hashcounts[hash]++
    else
        hashcounts[hash] = 1 
```

我正在寻找的是一种有效的`PolyHash`算法。输入的多米诺骨牌被简单地定义为一组坐标。例如，T tetronimo 的一个方向可以是：

```
[[1,0], [0,1], [1,1], [2,1]]:

 |012
-+---
0| X
1|XXX 
```

您可以假设输入的 polyomino 已经标准化为与 X 和 Y 轴对齐并且只有正坐标。正式地，每组：

*   将至少有 1 个坐标，其中 x 值为 0
*   将至少有 1 个坐标，其中 y 值为 0
*   不会有 x < 0 或 y < 0 的任何坐标

我真的在寻找新的算法来避免一般蛮力方法所需的整数运算数量的增加，如下所述。

**蛮力**

[此处](http://social.msdn.microsoft.com/Forums/zh/csharplanguage/thread/cc6414ba-8bb2-48cf-a252-43c45bda9d7a)和[此处](https://gist.github.com/3014216)建议的蛮力解决方案包括使用每个坐标作为二进制标志将每个集合散列为无符号整数，并采用所有可能旋转（在我的情况下为翻转）的最小散列，其中每个旋转/翻转也必须是翻译为原点。这导致每个输入集总共进行 23 次集合操作以获得“免费”哈希：

*   旋转 (6x)
*   翻转 (1x)
*   翻译 (7x)
*   哈希 (8x)
*   找到最小的计算哈希 (1x)

获得每个哈希的操作顺序是：

1.  哈希
2.  旋转、平移、散列
3.  旋转、平移、散列
4.  旋转、平移、散列
5.  翻转、翻译、散列
6.  旋转、平移、散列
7.  旋转、平移、散列
8.  旋转、平移、散列

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-18T17:15:08.293

好吧，我想出了一个完全不同的方法。（也感谢 corsiKa 提供一些有用的见解！）而不是散列/编码正方形，**编码它们周围的路径**。该路径由在绘制每个单元段之前执行的一系列“转弯”（包括不转弯）组成。我认为从正方形坐标获取路径的算法超出了这个问题的范围。

这做了一件非常重要的事情：它破坏了我们不需要的所有位置和方向信息。获取翻转对象的路径也很容易：只需颠倒元素的顺序即可。存储是紧凑的，因为每个元素只需要 2 位。

它确实引入了一个额外的约束：**polyomino 不能有完全封闭的洞**。（形式上，它必须是[**简单连接**](http://en.wikipedia.org/wiki/Simply_connected)的。）大多数关于多骨牌的讨论都认为存在一个洞，即使它只被两个接触的角密封，因为这可以防止与任何其他非平凡的多骨牌平铺。跟踪边缘不会因接触角而受到阻碍（如在带有孔的单个七[合奏](http://en.wikipedia.org/wiki/Heptomino)中），但它不能像在完整的环形八合奏中那样从一个外环跳到内环：

![在此处输入图像描述](../Images/febf05a7585c065850bbf3bf0bc2aeb7.png)

它还产生了一个额外的挑战：找到编码路径循环的最小排序。这是因为路径的任何旋转（在字符串旋转的意义上）都是有效的编码。为了始终获得*相同*的编码，我们必须找到路径指令的最小（或最大）旋转。谢天谢地，这个问题已经解决了：例如参见[http://en.wikipedia.org/wiki/Lexicographically_minimal_string_rotation](http://en.wikipedia.org/wiki/Lexicographically_minimal_string_rotation)。

**示例**：

如果我们任意为移动操作分配以下值：

*   不转：1
*   右转：2
*   左转：3

这是顺时针追踪的 F pentomino：

![在此处输入图像描述](../Images/bb2298a1be486d72745599b08a7853d9.png)

F pentomino 的任意初始编码是（从右下角开始）：

```
2,2,3,1,2,2,3,2,2,3,2,1 
```

得到的编码的最小旋转是

```
1,2,2,3,1,2,2,3,2,2,3,2 
```

对于 12 个元素，如果每条指令使用两位，则该循环可以打包成 24 位，如果指令被编码为 3 的幂，则可以仅打包 19 位。即使使用 2 位元素编码，也可以轻松地将其放入单个无符号 32 位整数中`0x6B6BAE`：

```
 1- 2- 2- 3- 1- 2- 2- 3- 2- 2- 3- 2
= 01-10-10-11-01-10-10-11-10-10-11-10
= 00000000011010110110101110101110
= 0x006B6BAE 
```

以 3 的最高有效幂为循环开始的 base-3 编码是`0x5795F`：

```
 1*3^11 + 2*3^10 + 2*3^9 + 3*3^8 + 1*3^7 + 2*3^6 
  + 2*3^5  + 3*3^4  + 2*3^3 + 2*3^2 + 3*3^1 + 2*3^0
= 0x0005795F 
```

围绕顺序的多格骨牌的路径中的最大顶点数`n`是`2n + 2`。对于 2 位编码，位数是移动次数的两倍，因此所需的最大位数为`4n + 4`. 对于 base-3 编码，它是：

![Base 3 编码的最大位数](../Images/af3d9d5789d82ad2f7084297a0843836.png)

“绞刑架”是天花板功能。因此，任何高达 9 阶的多米诺骨牌都可以编码为单个 32 位整数。知道这一点后，您可以相应地选择特定于平台的数据结构，以便在给定要散列的多米诺骨牌的最大顺序的情况下进行最快的散列比较。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-17T18:47:45.403

您可以将其减少到 8 个哈希操作，而无需翻转、旋转或重新翻译。

请注意，此算法假设您使用相对于自身的坐标进行操作。也就是说，它不在野外。

与其应用翻转、旋转和平移的操作，不如简单地更改散列的顺序。

例如，让我们以上面的 F pent 为例。在这个简单的例子中，让我们假设散列操作是这样的：

```
int hashPolySingle(Poly p)
    int hash = 0
    for x = 0 to p.width
        fory = 0 to p.height
            hash = hash * 31 + p.contains(x,y) ? 1 : 0
    hashPolySingle = hash

int hashPoly(Poly p)
    int hash = hashPolySingle(p)
    p.rotateClockwise() // assume it translates inside
    hash = hash * 31 + hashPolySingle(p)
    // keep rotating for all 4 oritentations
    p.flip()
    // hash those 4 
```

我不会将该函数应用于多边形的所有 8 个不同方向，而是将 8 个不同的哈希函数应用于 1 个多边形。

```
int hashPolySingle(Poly p, bool flip, int corner)
    int hash = 0
    int xstart, xstop, ystart, ystop
    bool yfirst
    switch(corner)
        case 1: xstart = 0
                xstop = p.width
                ystart = 0
                ystop = p.height
                yfirst = false
                break
        case 2: xstart = p.width
                xstop = 0
                ystart = 0
                ystop = p.height
                yfirst = true
                break
        case 3: xstart = p.width
                xstop = 0
                ystart = p.height
                ystop = 0
                yfirst = false
                break
        case 4: xstart = 0
                xstop = p.width
                ystart = p.height
                ystop = 0
                yfirst = true
                break
        default: error()
    if(flip) swap(xstart, xstop)
    if(flip) swap(ystart, ystop)

    if(yfirst)
        for y = ystart to ystop
            for x = xstart to xstop
                hash = hash * 31 + p.contains(x,y) ? 1 : 0
    else
        for x = xstart to xstop
            for y = ystart to ystop
                hash = hash * 31 + p.contains(x,y) ? 1 : 0
    hashPolySingle = hash 
```

然后以 8 种不同的方式调用它。您还可以将 hashPolySingle 封装在拐角处的 for 循环中，以及是否围绕翻转。都一样。

```
int hashPoly(Poly p)
    // approach from each of the 4 corners
    int hash = hashPolySingle(p, false, 1)
    hash = hash * 31 + hashPolySingle(p, false, 2)
    hash = hash * 31 + hashPolySingle(p, false, 3)
    hash = hash * 31 + hashPolySingle(p, false, 4)
    // flip it
    hash = hash * 31 + hashPolySingle(p, true, 1)
    hash = hash * 31 + hashPolySingle(p, true, 2)
    hash = hash * 31 + hashPolySingle(p, true, 3)
    hash = hash * 31 + hashPolySingle(p, true, 4)
    hashPoly = hash 
```

通过这种方式，您隐式地从每个方向旋转多边形，但实际上并没有执行旋转和平移。它执行 8 次散列，这似乎是完全必要的，以便准确地散列所有 8 个方向，但不会浪费在实际上不进行散列的多边形上的传递。在我看来，这似乎是最优雅的解决方案。

请注意，可能有更好的 hashPolySingle() 算法可供使用。我的使用笛卡尔穷举算法，其数量级为`O(n^2)`. 其最坏的情况是 L 形，与 I 形相比，这将导致只有元素的`N/2 * (N-1)/2`大小为 正方形，或效率为。也可能是架构强加的固有不变性实际上会使其效率低于朴素算法。`N``1:(N-1)/4``1:1`

我的怀疑是，通过将节点集转换为可以遍历的双向图来模拟笛卡尔耗尽可以缓解上述担忧，从而导致节点以与我更天真的哈希算法相同的顺序被命中，忽略空格。这将使算法下降到`O(n)`应该能够及时构建图形`O(n)`。因为我没有做过，所以不能肯定，所以我说这只是一个怀疑，但应该有办法去做。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-01T00:35:54.387

这是我的 DFS（深度优先搜索）解释：

从最上面的单元格开始（最左边的作为决胜局）。将其标记为已访问。每次您访问一个单元时，请检查所有四个方向以查找未访问的邻居。始终按此顺序检查四个方向：上、左、下、右。

## 例子

![在此处输入图像描述](../Images/d88202d93de4ca2417a4586425ddc44f.png)

在此示例中，up 和 left 失败，但 down 成功。到目前为止，我们的输出是 001，我们递归地搜索“向下”单元格。

我们将新的当前单元格标记为已访问（当我们完成搜索此单元格时，我们将完成对原始单元格的搜索）。这里，上=0，左=1。

我们搜索最左边的单元格，没有未访问的邻居（上 = 0，左 = 0，下 = 0，右 = 0）。到目前为止，我们的总产量是 001010000。

![在此处输入图像描述](../Images/6143aa2d4d239564bd92dabb4f485d17.png)

我们继续搜索第二个单元格。下=0，右=1。我们搜索右侧的单元格。

![在此处输入图像描述](../Images/b7513fb145cf23b7be5cbecf22d78e69.png)

上=0，左=0，下=1。搜索向下的单元格：全 0。到目前为止的总输出是 001010000010010000。然后，我们从下行单元返回......

![在此处输入图像描述](../Images/338af0b923b1b5909b7efe2a6794cb65.png)

对=0，返回。返回。（现在，我们在起始单元格。）right=0。完毕！

因此，总输出为 20 (N*4) 位：00101000001001000000。

## 编码改进

但是，我们可以节省一些位。

最后访问的单元格将始终为其四个方向编码 0000。因此，不要对最后访问的单元格进行编码以节省 4 位。

另一个改进：如果您通过向左移动到达一个单元格，请不要检查右侧的单元格。因此，我们每个单元只需要 3 位，除了第一个单元的 4 位和最后一个单元的 0 位。

第一个单元格永远不会有向上或左侧邻居，因此请忽略这些位。所以第一个单元需要 2 位。

因此，通过这些改进，我们仅使用 N*3-4 位（例如 5 个单元 -> 11 位；9 个单元 -> 23 位）。

如果你真的想要，你可以通过注意恰好 N-1 位将是“1”来压缩更多。

## 警告

是的，您需要对 polyomino 的所有 8 个旋转/翻转进行编码，并选择最少的以获得规范编码。

我怀疑这仍然会比大纲方法更快。此外，多米诺骨牌上的洞应该不是问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-17T17:29:53.993

我最近处理了同样的问题。我通过 (1) 为多骨牌生成唯一 ID 相当简单地解决了这个问题，这样每个相同的多骨牌都将具有相同的 UID。例如，找到边界框，对边界框的角进行归一化，收集非空单元格的集合。(2) 通过旋转（和翻转，如果合适的话）polyomino 来生成所有可能的排列，并寻找重复项。

除了简单之外，这种粗略方法的优点在于，如果多边形以其他方式可区分，例如如果其中一些是彩色或编号的，它仍然有效。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-17T20:39:18.893

您可以设置类似[trie](http://en.wikipedia.org/wiki/Trie)的东西来唯一标识（而不仅仅是散列）您的多米诺骨牌。拿你的归一化多米诺骨牌并建立一个二叉搜索树，其中根分支取决于 (0,0) 是否具有集合像素，下一级分支取决于 (0,1) 是否具有集合像素，依此类推。当你查找一个 polyomino 时，只需对其进行归一化，然后遍历树即可。如果你在 trie 中找到它，那么你就完成了。如果不是，则为该 polyomino 分配一个唯一的 id（只需增加一个计数器），生成所有 8 个可能的旋转和翻转，然后将这 8 个添加到 trie。

在尝试未命中时，您必须生成所有旋转和反射。但是在 trie 命中时，它的成本应该更低（k-polyominos 的 O(k^2)）。

为了使查找更加有效，您可以一次使用几个位并使用更宽的树而不是二叉树。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-17T17:28:59.383

一个有效的散列函数，如果你真的害怕散列冲突，就是为坐标创建一个散列函数 x + order * y，然后循环遍历一块的所有坐标，添加 (order ^ i) * hash(coord[ i]) 到片段哈希。这样，您可以保证不会发生任何哈希冲突。

# php - 如何将所有这些 MySQL 查询合二为一？

> ID：12010169
> 
> 赞同：3
> 
> 时间：2012-08-17T17:12:49.230
> 
> 标签：php, mysql, sql

我有很多带有“狗”标签的文章。我现在有一个名为“猫”的新标签。我想将标签“猫”添加到所有已经有标签“狗”的文章中。一些文章有这两个标签。我不想用“猫”重新标记这些。

换句话说，如果一篇文章有​​标签“狗”但还没有标签“猫”，我想给它添加标签“猫”。这是我写的脚本：

```
<?php 

    # Get "cat" tag id
    $sql = "SELECT `id`
            FROM tags
            WHERE name = 'cat'
            LIMIT 1";

    $cat_tag = mysql_fetch_assoc(mysql_query($sql));

    # Get "dog" tag id
    $sql = "SELECT `id`
            FROM tags
            WHERE name = 'dog'
            LIMIT 1";

    $dog_tag = mysql_fetch_assoc(mysql_query($sql));

    ######################################

    # Get all nodes tagged with "dog"   
    $sql = "SELECT `node_id`
            FROM node_tags
            WHERE `tag_id` = '" . $dog['id'] . "'";

    $query = mysql_query($sql);
    while($row = mysql_fetch_assoc($query)) {

        # Check to see if current node has "cat" tag already    
        $sql = "SELECT COUNT(*)
                FROM node_tags
                WHERE `node_id` = '" . $row['node_id'] . "'         
                AND `tag_id` = '" . $cat['id'] . "'";

        $check_already_exists = mysql_fetch_assoc(mysql_query($sql));

        # If node doesn't already have "cat" tag, then add it
        if($check_already_exists == '0') {
            $sql = "INSERT INTO `node_tags`(node_id, tag_id) 
                    VALUES('" . $row['node_id'] . "', '" . $cat['id'] . "')";
            mysql_query($sql);
        }
    }

?> 
```

我希望能够直接从我的 MySQL 管理器工具中运行它。所以它不能有任何 PHP，但应该是一个大型 SQL 查询。这个怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T19:17:28.153

首先更改您的表并将（node_id 和 tag_id）一起设为 UNIQUE，因为这似乎是您需要的。

```
ALTER TABLE `node_tags` ADD UNIQUE (`node_id`,`tag_id`); 
```

这是您的查询：

```
$sql = "INSERT IGNORE INTO `node_tags`  
        SELECT (SELECT `node_id` FROM node_tags WHERE EXISTS (SELECT tags.* FROM tags WHERE node_tags.`tag_id` = tags.`id` AND tags.name = 'dog') LIMIT 1),
               (SELECT `id` FROM tags WHERE name = 'cat' LIMIT 1)"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T17:19:46.223

以下查询获取所有没有猫 ID 的“狗”。然后将它们插入到表中：

```
insert into node_tags(node_id, tag_id)
    SELECT id, $cat['id']
    FROM tags t join
         node_tags nt
         on t.node_id = nt.node_id
    WHERE t.name = 'dog'
    group by id
    having max(case when tag_id = $cat['id'] then 1 else 0 end) = 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T17:22:47.363

您不能在一个查询中执行此操作，因为您需要插入取决于从同一个表中选择数据的数据。假设您在以下位置定义了唯一键，您可以获得的最接近的是这样的`(node_id,tag_id)`：

```
CREATE TEMPORARY TABLE `tmp` (`node_id` TEXT, `tag_id` TEXT); # Choose better column types if possible
INSERT INTO `tmp` SELECT `node_id`, `tag_id` FROM `node_tags`;
SET @id_cat = (SELECT `id` FROM `tags` WHERE `name`='cat'),
    @id_dog = (SELECT `id` FROM `tags` WHERE `name`='dog');
INSERT IGNORE INTO `node_tags` (`node_id`, `tag_id`)
  SELECT `node_id`, @id_cat FROM `tmp` WHERE `tag_id`=@id_dog
  UNION
  SELECT `node_id`, @id_dog FROM `tmp` WHERE `tag_id`=@id_cat;
DROP TABLE `tmp`; 
```

您可以将其粘贴到您的 MySQL 管理器工具中，它应该可以工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T17:23:46.477

您可以根据 select 子句进行插入：

```
INSERT INTO node_tags (node_id, tag_id)
SELECT node_id, (SELECT MAX(id) FROM tags WHERE name = 'cat') 
FROM node_tags 
WHERE tag_id = (SELECT MAX(id) FORM tags WHERE name = 'dog') 
```

在尝试类似的操作之前进行备份；）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T18:22:29.597

试试这个查询。我没有测试过这个。但我认为这会奏效。

```
INSERT into node_tags(node_id, tag_id)
( SELECT node_id, tag_id
 FROM node_tags nt , tags t
 where t.id = nt.tag_id AND t.name = 'dog' 
 AND nt.node_id NOT IN (SELECT t1.id FROM node_tags nt1, tags t1
 where nt1.node_id = nt.node_id  AND t1.id = nt1.tag_id AND t1.name = 'cat')
) 
```

# paypal - PayPal IPN 响应没有收到 payKey 或 trackingId？

> ID：12010181
> 
> 赞同：6
> 
> 时间：2012-08-17T17:13:52.363
> 
> 标签：paypal, paypal-ipn, paypal-adaptive-payments

我试图让整个 PayPal AdaptivePayments#Pay 工作，这部分工作。我传递了一堆东西，得到一个支付密钥，我将它传递到批准网址：

```
{returnUrl: urls[:return],
 cancelUrl: urls[:cancel],
 requestEnvelope: {errorLanguage: "en_GB"},
 currencyCode: "GBP",
 trackingId: self.id,
 receiverList: {
   receiver: [{email: Rails.configuration.site_paypal, amount: self.amount, primary: true},
              {email: self.provider.paypal_email, amount: self.amount, primary: false}]
 },
 actionType: "PAY",
 ipnNotificationUrl: urls[:ipn]} 
```

服务器正确返回所有内容，我重定向到 url，它可以工作，我在我的 Rails.configuration.site_paypal 的 PayPal 沙箱帐户中获得付款，并且在 IPN 历史记录中我看到了该消息，但我无法将其识别为它不包含 paykey 或 trackingId :(

```
transaction_subject=
txn_type=web_accept
payment_date=10:06:09 Aug 17, 2012 PDT
last_name=Baldry
residence_country=GB
item_name=
payment_gross=
mc_currency=GBP
business=<Rails.configuration.site_paypal>
payment_type=instant
protection_eligibility=Ineligible
verify_sign=Asu0z613h-fyw8CNuZEjSsMXS58PAi46SzR3IvXXTX5JUizhF8vV4z25
payer_status=verified
test_ipn=1
tax=0.00
payer_email=<customer@email.com>
txn_id=9M582867K79935008
quantity=0
receiver_email=<Rails.configuration.site_paypal>
first_name=Michael
payer_id=M7U3UVA3E65VY
receiver_id=375R229JBE3TY
item_number=
payment_status=Completed
mc_gross=157.00
custom=
charset=windows-1252
notify_version=3.6
ipn_track_id=c9fcf587d770f 
```

我究竟做错了什么？扯掉我的头发...

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-20T03:10:22.560

有两种类型的 IPN

一个是根据他们的个人资料设置为收款的帐户生成的（看起来这就是你得到的那个）

另一个是为 API 调用者（可能会或可能不会在交易中涉及财务）生成的。API 调用者的 IPN 将包含 PayKey。

如果 API 调用者和接收者之一是相同的，请确保您可以区分您将收到的两个 IPN，或者每个都有单独的 URL。（API 调用者在进行 API 调用时指定，接收者在 PayPal 配置文件中指定）

# iphone - 如何在 iOS5 的一个请求中获取多个 user_timeline？

> ID：12010186
> 
> 赞同：1
> 
> 时间：2012-08-17T17:14:37.710
> 
> 标签：iphone, ios, xcode, ios5, twitter

需要一些帮助的家伙。目前，我可以在没有 Twitter 帐户的情况下成功获得单个用户时间线。但我不知道如何在一个请求中获得多个用户时间线。实际上，我只需要通过一个请求来获得 3 个用户时间线。有什么帮助吗？十分感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T17:20:25.147

最好的方法是创建一个 Twitter 列表，其中包含您想要请求时间表的所有用户：

有关在此处设置列表的更多信息：

[https://support.twitter.com/articles/76460-how-to-use-twitter-lists](https://support.twitter.com/articles/76460-how-to-use-twitter-lists)

以下是获取列表时间线的方法：

[https://dev.twitter.com/docs/api/1/get/lists/statuses](https://dev.twitter.com/docs/api/1/get/lists/statuses)

# html - Bootstrap btn-group 修改“base”按钮

> ID：12010191
> 
> 赞同：0
> 
> 时间：2012-08-17T17:14:53.003
> 
> 标签：html, asp.net-mvc, twitter-bootstrap, buttongroup

早上好，

我正在尝试使用 Bootstrap Button Group 将一系列相关元素组合在一起。这些元素仅对给定的日历年“有效”，因此我试图以易于显示的方式将“过去的元素”组合在一起。到目前为止，我真的很喜欢使用引导按钮组来执行此操作，如此[处](http://jsfiddle.net/qtK95/2/)所述。

但是，我在“类似列表”的视图中显示了其中的多个，并且所有这些按钮确实不容易让人眼前一亮。我想做的不是第一个元素的按钮，而是将其设为链接，如果我的用户希望查看过去的元素，只需在该链接的右侧添加一个小插入符号按钮。

有谁知道一个简单的方法来设计这个？改写 - 我希望最上面的元素只是一个（或类似的东西），并且只有一个包含插入符号的按钮位于它的侧面。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T17:50:03.043

如果你看一下 bootstrap 2.1，这是一个正在进行的工作，他们引入了一个新的按钮 stlye 类`.btn-link`，它可能适用于此

```
.btn-link {
  color: #08C;
  cursor: pointer;
  background-color: transparent;
  background-image: none;
  border-color: transparent;
    -webkit-border-radius: 0;
    -moz-border-radius: 0;
  border-radius: 0;
    -webkit-box-shadow: none;
    -moz-box-shadow: none;
  box-shadow: none;
}
.btn-link:hover {
  color: #005580;
  text-decoration: underline;
  background-color: transparent;
} 
```

他们似乎没有将它包含在按钮组文档中，所以它可能看起来有点滑稽。

[http://jsfiddle.net/qtK95/4/](http://jsfiddle.net/qtK95/4/)

# vim - 如何使用 vimscript 中提供的模式使用“替代”命令？

> ID：12010200
> 
> 赞同：0
> 
> 时间：2012-08-17T17:15:39.930
> 
> 标签：vim

我在我的`.vimrc`. 对于给定的文件，这应该将每行的开头从第 3 行开始更改为行号。

```
function Foo()
   3,$ s/^/      /g
   3
   let i=1 | ,$ g/^/ s//\=i/ | let i+=1
   1
endfunction 
```

但是，我想更改函数，以便它接受一个参数。它将插入该单词，因此该函数将如下所示：

```
function Foo(chr)
   3,$ s/^/      /g
   3
   let i=1 | ,$ g/^/ s//\=i/ | let i+=1
   1
   3,$ s/^/chr        /g
endfunction 
```

编辑：提供一个例子。

我的输入文件看起来像这样：

```
some text1
some text 2
0000
0000
0001
0002 
```

我想让文件如下所示：

```
sm1     1        0000
sm1     2        0000
sm1     3        0001
.
. 
```

所以我希望能够将“sm1”作为函数的参数，这样对于另一个文件，我可能想要“sm2”而不是“sm1”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T20:47:32.323

您可能不需要函数，因为

```
:3,$s/^/chr        / 
```

应该管用。但是，如果你想为此做一个`command`，你可以做一个这样的：

```
command! -nargs=1 Example 3,$s/^/<args>        / 
```

这将允许您在第 3 行及以上行的开头`:Example chr`插入。`chr`

另外，您说您的原始函数插入“行号”，但它会在第 3 行插入 1，依此类推。我确定您知道您可以使用 启用行号`:set nu`，但如果您想在第 3 行及以上的每一行插入行号，您可以执行以下操作：

```
fun! Foo()
   3,$s/^/\=line('.')."      "
endfun 
```

或者如果您想保留以前的功能，这更简洁：

```
fun! Foo()
   3,$s/^/\=(line('.')-2)."      "
endfun 
```

如果您想将所有这些组合成一个命令，您可以执行

```
com! -nargs=1 Example 3,$s/^/\="<args>     ".(line('.')-2)."        " 
```

这会给你一个`:Example <argument>`命令。所以现在你可以做`:Example sm1`你想做的事了。

如果您想保持功能不变，要使其正常工作，您应该`a:chr`像这样使用：

```
function Foo(chr)
   3,$ s/^/      /g
   3
   let i=1 | ,$ g/^/ s//\=i/ | let i+=1
   1
   exe "3,$s/^/".a:chr."        /g"
endfunction 
```

# delphi - 如何不显示系统消息 - Delphi

> ID：12010205
> 
> 赞同：0
> 
> 时间：2012-08-17T17:16:38.870
> 
> 标签：delphi, file, delphi-2010

考虑这部分代码：

```
Try
  arqTXT.LoadFromFile(LogPath);
finally
  ShowMessage(" The log file could not be found. Check if the service is running. ");
end; 
```

在我的消息之后，会出现一条系统消息，其中包含以下消息：无法打开文件“C:\log.txt”。有没有办法不显示此系统消息？

**我正在使用德尔福 2010**

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T17:51:35.720

您想捕获该特定异常（`EInOutError`如果我没记错的话）并让发生的其他异常保持不静音。因此，如果您遇到其他一些异常（例如`EOutOfMemory`），如果不会被“吞下”，那么您的代码看似正常但已损坏。

```
try
  ..
except
  on E: EInOutError do
        begin
          ..
        end;
end; 
```

您可以在一个构造中拥有多个异常处理程序。任何未处理的异常将继续在 try .. except 块之外传播，直到在其他地方被捕获（例如，默认情况下显示错误框的异常处理程序）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T03:27:23.910

有几点需要指出。正如其他答案/评论所解释的那样，您应该将代码包装在`try..except`块中而不是`try..finally`块中。我不明白您的代码示例应该如何工作，因为正如当前编写的那样，您的消息将始终显示，无论是否存在异常。它应该看起来更像...

```
try
  arqTXT.LoadFromFile(LogPath);
except
  on E: EInOutError do begin
    ShowMessage('The log file could not be found. Check if the service is running. Message: '
      + E.Message);
  end
end; 
```

该代码将捕获并处理 I/O 异常。您将使用不同的异常类型而不是`EInOutError`处理不同类型的异常，或者肮脏的方式是使用`on E: Exception`捕获所有类型。假设发生 I/O 异常，您还可以使用[GetLastError](https://stackoverflow.com/questions/669073/what-is-the-correct-usage-of-getlasterror-and-formatmessage-in-delphi)识别特定错误代码并进一步识别/记录此错误代码以准确了解问题所在（文件丢失、只读等）。

[这是一篇很好的文章，解释了如何在 Delphi 中处理异常。](http://delphi.about.com/od/objectpascalide/a/errorexception.htm)

要指出的另一件事是当您看到异常时。当您处于调试模式（从 IDE 运行应用程序）时，默认情况下会显示所有异常，即使是您在应用程序自行运行时看不到的异常。[您可以在 IDE 中禁用它](https://stackoverflow.com/questions/2858319/turn-off-delphi-exceptions-in-run-time-in-delphi)。那篇文章适用于 Delphi 2007，但我很确定它也应该适用于 2010，因为 Delphi XE2 中的选项相同。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-17T17:36:46.263

使用解决它

```
try

exception
on e: exception do
ShowMessage("My Message"); 
```

而不是尝试/最终。

# objective-c - 在 Objective C 中使用原子属性：有副作用吗？

> ID：12010211
> 
> 赞同：24
> 
> 时间：2012-08-17T17:16:52.120
> 
> 标签：objective-c, ios, multithreading, properties, atomic

我知道[原子属性和非原子属性之间的区别是什么](https://stackoverflow.com/questions/588866/atomic-vs-nonatomic-properties)`atomic`？，但我想知道的是：

**问：除了性能问题之外，在任何地方使用原子属性是否有任何副作用？**

似乎答案是否定的，因为如今 iPhone 的性能非常快。那为什么还有那么多人在用`non-atomic`呢？

即使`atomic`不保证线程安全，但总比没有好，对吧？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-08-17T21:09:50.487

> 即使 atomic 也不能保证线程安全，但总比没有好，对吧？

**错了**。在编写了一些非常复杂*的并发程序之后，我建议完全相反*。你应该留`atomic`到真正有意义的时候使用——在你编写并发程序而不使用`atomic`. 如果我正在编写一个多线程程序，我不想掩盖编程错误（例如竞争条件）。**我希望并发问题响亮而明显。**这样，它们更容易识别、复制和纠正。

认为*某些*线程安全总比*没有*好的信念是有缺陷的。该程序要么是线程安全的，要么不是。使用 atomic 可以使您的程序的这些方面更能*抵抗*与并发相关的问题，但这并不能为您带来太多收益。当然，崩溃可能会减少，但程序仍然毫无疑问是不正确的，它仍然会以神秘的方式爆炸。我的建议：如果你不打算花时间学习和写*正确*并发程序，只需让它们保持单线程（如果这听起来有点苛刻：它并不意味着苛刻 - 它会让你免于很多头痛）。多线程和并发是庞大而复杂的主题——学习在许多领域编写真正正确、长寿的程序需要很长时间。

当然，`atomic`在某些情况下可以用来实现线程安全——但是使每个访问原子化并*不能保证*线程安全。同样，`atomic`单独的属性会使一个类*真正*线程安全是非常不寻常的（统计上），特别是当类的复杂性增加时；与具有 5 个 ivars 的类相比，具有一个 ivar 的类更*可能仅使用原子是真正安全的。*`atomic`属性是我很少使用的功能（同样，一些非常大的代码库和并发程序）。如果原子是使类真正线程安全的原因，这实际上是一个极端情况。

性能和执行复杂性是避免它们的主要原因。与非原子访问以及访问变量的频率和简单性相比，原子的使用加起来非常快。也就是说，相对于它们执行的任务，原子访问引入了很多执行复杂性。

自旋锁是实现原子属性的一种方式。那么，您是否想要一个同步原语（例如自旋锁或互斥锁）隐含地围绕*每个*get 和 set，但知道它不能保证线程安全？我当然不会！使实现中的每个属性访问原子化会消耗大量 CPU 时间。仅当您有明确的理由（dasblinkenlicht+1 也提到）时才应使用它。实现细节：一些访问不需要自旋锁来维护`atomic`; 它取决于几件事，例如架构和变量的大小。

所以回答你的问题“任何副作用？” 在 TL;DR 格式中：正如您所指出的，性能是主要原因，而在您的抽象级别（经常被误解），原子*保证*的适用性以及它对您的用处非常狭窄，并且它掩盖了*真正的*错误。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-08-17T17:25:19.143

你不应该为你不使用的东西付费。与 CPU 周期会花费您时间的插入式计算机不同，移动设备上的 CPU 周期会花费您的时间和电池使用量。如果您的应用程序是单线程的，则没有理由使用`atomic`，因为锁定和解锁操作会浪费时间和电池。电池比时间更重要：虽然与添加额外操作相关的延迟对您的最终用户来说可能是不可见的，但所花费的周期会减少移动设备在单次充电后可以工作的时间，这是很多用户认为很重要。

# python - 将 python 程序的屏幕输出打印到文件中，而不将它们写入 python 程序中的文件

> ID：12010212
> 
> 赞同：0
> 
> 时间：2012-08-17T17:16:53.827
> 
> 标签：python, linux

如何将 python 程序的屏幕输出打印到文件中，而不将它们写入 Linux 上 python 程序中的文件？

我用：

我的.py > 我的.log

但运行 my.py 后不存在 my.log，效果很好。

任何帮助将不胜感激 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T17:41:13.263

假设您的程序将其输出发送到控制台，这应该`my.log`在`bash`shell 中捕获标准输入和标准错误流：

```
$ my.py >my.log 2>&1 
```

要保持输出可见，您可以使用[`tee`](http://linux.die.net/man/1/tee)：

```
$ my.py 2>&1 | tee my.log 
```

# java - 使用低度 Java 生成随机图

> ID：12010213
> 
> 赞同：1
> 
> 时间：2012-08-17T17:16:57.990
> 
> 标签：java, graph, random, coordinates, points

我正在尝试生成一个具有随机坐标和非常低度分布的顶点的图。该网络必须看起来类似于道路网络。绘图等是自动完成的，我只需要为坐标创建非常随机的数字并确保它们不重叠。我怎样才能做到这一点？目前我有：

```
public void graphGenerator(int size) {
    Point test = new Point();
    Random random = new Random();

    for (int i = 0; i < size; i++) {
        test.x = random.nextInt(1000);
        test.y = random.nextInt(700);

        String name = Integer.toString(i);
        Vertex v = new Vertex(name, test.x, test.y);
        vertices.add(v);
    }
} 
```

我的图形类有一个顶点和边列表：列出顶点；和私有列表边缘；

我的边缘类存储：顶点源、顶点目标、顶点权重。我的顶点类存储：字符串名称、int x、int y、相邻边列表。

# google-apps-script - getRange(),setFormulas 不想工作

> ID：12010216
> 
> 赞同：0
> 
> 时间：2012-08-17T17:17:07.047
> 
> 标签：google-apps-script

我有以下代码，当我运行它时，我在 sheetFormulas (4) 中获得了正确数量的项目，并且数组值看起来正确形成。

但是，在 sheetFormulas Browser.msgBox 弹出后立即出现错误，表明 getRange().setFormulas 行有问题，但我看不到它是什么。

```
function test(){
    var ss = SpreadsheetApp.getActiveSpreadsheet();
    var testingTarget = ss.getSheetByName("Testing");
    var sheetFormulas = new Array();
    for (l=0;l<10;l++) {
        sheetRowCount = l + 2;
        var monthlyTotalCompanyCosts = '=F' + sheetRowCount + '/$F$29*$I$14';
        var monthlyTotalCompanyCostsPerEa = '=IFERROR(H' + sheetRowCount + '/C' + sheetRowCount + ')';
        var monthlyMargin = '=D' + sheetRowCount + '-F' + sheetRowCount;
        var monthlyMarginPctg = '=IFERROR(J' + sheetRowCount + '/D' + sheetRowCount + ')';
        sheetFormulas.push(monthlyTotalCompanyCosts,monthlyTotalCompanyCostsPerEa,monthlyMargin,monthlyMarginPctg);
    Browser.msgBox("sheetFormulas.length is: " + sheetFormulas.length);
    Browser.msgBox("sheetFormulas is: " + sheetFormulas);
    testingTarget.getRange(sheetRowCount,8,1,4).setFormulas(sheetFormulas);
    sheetFormulas = [];
    }
} 
```

任何帮助表示赞赏，

菲尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T18:28:38.137

首先， sheetFormulas 必须是一个二维数组。所以尝试做

```
/* Notice the [] around sheetFormulas */
testingTarget.getRange(sheetRowCount,8,1,4).setFormulas([sheetFormulas]); 
```

如果您仍然看到其他问题，请将您的代码放在 try{}catch{} 块中，并在 catch 块中打印出异常。

我还建议您在将公式设置到电子表格之前使用 Logger.log() 打印出公式。

# css - CSS：Linux 上损坏的菜单布局

> ID：12010217
> 
> 赞同：1
> 
> 时间：2012-08-17T17:17:11.067
> 
> 标签：css, layout

[我对http://jdem.cz/vzcy9](http://jdem.cz/vzcy9)上的菜单感到好奇。我在 Windows 7、FF 13/14、IE 9、Opera 11 下开发它，它在那里显示良好。但在任何 Linux 浏览器上，菜单都分为两行（见下图）。

我尝试为每个菜单链接设置较小的边距和填充，但没有帮助。

有人知道问题出在哪里吗？

![在此处输入图像描述](../Images/cee83341dcf6b1fa27d463c47ed9c86c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T16:00:31.083

谢谢你的建议。这确实是 Linux 上不存在的字体（Georgia）的问题。它的 Linux 等价物更“宽”，打破了布局。

我补充说：

```
 font-family: "Lucida Serif", Lucida, "DejaVu Serif", "Bitstream Vera Serif", "Liberation Serif", Georgia, Times, "Times New Roman", serif; 
```

这解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T13:02:01.357

发生这种情况是因为不同的字体渲染。即使您使用的字体相同，它的渲染也可能略有不同。出于这个原因，您应该始终允许文本在不破坏布局的情况下稍微扩大或缩小。在您的情况下，可以通过多种方式解决它而不会对布局产生太大影响：

*   通过设置`white-space: nowrap`元素`#access`。
*   `#access a`设置元素的宽度或最大宽度。
*   将元素的水平边距减少`#access a`一两个像素。

# c# - BackgroundWorker 用于实现“键入时搜索”组合框

> ID：12010219
> 
> 赞同：2
> 
> 时间：2012-08-17T17:17:25.203
> 
> 标签：c#, search, frameworks, combobox, entity

我为我的组合框创建了一个代码，它可以在存储过程的帮助下在 Sql Server 上的一个非常大的表中搜索地址（我正在使用实体框架）。我的存储过程返回 10 次点击，我的代码用搜索结果填充组合框。为此，我正在使用 BackgroundWorker。

但是在这里我现在遇到了大问题： - 虽然组合框充满了我的搜索结果，但它总是选择第一个项目。即使我只输入一个字母，整个文本也会被选中；

*   之后搜索地址不再起作用。它只在这 10 个结果中搜索，我不知道如何解决这个问题。这是我的整个代码，这给我带来了问题：

    ```
    public String searchedItem = "";    
    public delegate void DelegateUpdateComboboxSelection(ComboBox myCombo,string value,int count);

    BackgroundWorker m_bgworker = new BackgroundWorker();        
    static AutoResetEvent resetWorker = new AutoResetEvent(false);

    m_bgworker.WorkerSupportsCancellation = true;
    m_bgworker.DoWork += new DoWorkEventHandler(FillComboboxBindingList);
    m_bgworker.RunWorkerCompleted += new RunWorkerCompletedEventHandler(m_bgworker_RunWorkerCompleted);

    BindingList<spIskalnikNaslovi_Result1> m_addresses = new BindingList<SP_Result1>(); 

    void m_bgworker_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        int count = (int)((object[])e.Result)[0];
        string value = (string)((object[])e.Result)[1];
        ComboBox myCombo = (ComboBox)((object[])e.Result)[2];
        DelegateUpdateComboboxSelection ndelegate = new DelegateUpdateComboboxSelection(UpdateComboSelection);
        if (this.InvokeRequired)
        {
            Invoke(ndelegate, new object[] {myCombo, value, count});
            return; 
        }
        else
        {
            UpdateComboSelection(myCombo, value, count);
            return; 
        }               
    }

    private void UpdateComboSelection(ComboBox myCombo, String value, int count)
    {
        myCombo = comboBox9;
        myCombo.DataSource = m_addresses;
        searchedItem = myCombo.Text;  
        if (count > 0)
        {
            myCombo.SelectionStart = value.Length;
            myCombo.SelectionLength = searchedItem.Length - value.Length;
            myCombo.DroppedDown = true;
        }
        else
        {
            myCombo.DroppedDown = false;
            myCombo.SelectionStart = value.Length;
        }
    } 

    public void FillComboboxBindingList(object sender, DoWorkEventArgs e)
    {
        if (m_bgworker.CancellationPending)
        {
            resetWorker.Set();
            e.Cancel = true;
            return;
        }
        else
        {
            string value = (String)((Object[])e.Argument)[0];
            List<SP_Result1> result;
            result = _vsebina.SP_searcher(value).ToList<SP_Result1>();
            m_addresses = new BindingList<SP_Result1>();

            foreach (SP_Result1 rez in result)
            {
                if (m_addresses.Contains(rez))
                {
                    continue;
                }
                else
                {
                    m_addresses.Add(rez);
                }
            }
            foreach (SP_Result1 r in m_addresses.ToArray())
            {
                if (!result.Contains(r))
                {
                    m_addresses.Remove(r);
                }
            }
            e.Result = new object[] { rezultat.Count, vrednost, null };
            return;
        }
    }

    private void comboBox9_KeyUp(object sender, KeyEventArgs e)
    {
        if (e.KeyCode == Keys.Back)
        {
            int searchStart = comboBox9.SelectionStart;
            if (searchStart > 0)
            {
                searchStart--;
                if (searchStart == 0)
                {
                    comboBox9.Text = "";
                }
                else
                {
                    comboBox9.Text = comboBox9.Text.Substring(0, searchStart + 1);
                }
            }
            else 
            {
                searchStart = 0;
            }
            e.Handled = true;
        }
    }

    private void comboBox9_Enter(object sender, EventArgs e)
    {
        comboBox9.SelectionStart = 0;
        comboBox9.SelectionLength = 0;
    }

    private void comboBox9_Click(object sender, EventArgs e)
    {
        comboBox9.Text = "";
    }

    private void comboBox9_KeyPress(object sender, KeyPressEventArgs e)
    {
        Search();
    }

    public void Search()
    {
        if (comboBox9.Text.Length < 4)
        {
            return;
        }
        else
        {
            if (m_bgworker.IsBusy)
            {
               m_bgworker.CancelAsync();

               m_bgworker = new BackgroundWorker();
               m_bgworker.WorkerSupportsCancellation = true;
               m_bgworker.DoWork += new DoWorkEventHandler(FillComboboxBindingList);
               m_bgworker.RunWorkerCompleted += new RunWorkerCompletedEventHandler(m_bgworker_RunWorkerCompleted);
            }
            m_bgworker.RunWorkerAsync(new object[] { comboBox9.Text, comboBox9 });
        }  
    } 
    ```

也许有人可以启发我，我做错了什么。这是我第一次使用 BackgroundWorker。我不知道如何以任何其他方式使用组合框实现“键入时搜索”，因为我的地址数据表非常大（百万条记录）。

在此先感谢您提供任何帮助或代码示例。

弗拉基米尔

编辑 1：好的，这是我的代码，在我使用 BackGroundWorker 之前。它有效，但搜索速度非常慢（最多可能需要 10 秒）：

```
 private void comboBox9_TextChanged(object sender, EventArgs e)
    {
        if (comboBox9.Text.Length < 4)
        {
            return;
        }
        else
        {
            FillCombobox(comboBox9.Text, comboBox9);
        }

    }

    public void FillCombobox(string value, ComboBox myCombo)
    {
        List<spIskalnikNaslovi_Result1> result;
        result = _vsebina.spIskalnikNaslovi1(value).ToList(); 
        if (result.Count() > 0)
        {
            myCombo.DataSource = result;
            myCombo.ValueMember = "HS_MID";
            myCombo.DisplayMember = "NASLOV1";
            var searchedItem = myCombo.Items[0].ToString();
            myCombo.SelectionStart = value.Length;
            myCombo.SelectionLength = searchedItem.Length - value.Length;
            myCombo.DroppedDown = true;
        }
        else
        {
            myCombo.DroppedDown = false;
            myCombo.SelectionStart = value.Length;
        }
        return;
    } 
```

有没有办法在没有后台工作人员的情况下加快速度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T18:18:05.267

制作一个按钮，您将调用 searchbutton 并在此按钮的 click_event 中调用您的 search() 方法，该方法运行填充组合框的 backgroundworker 清除您的组合框的 key_press 事件，它会起作用的错误是您调用每个按键的 key_press 事件发生你的搜索方法所以检索它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T19:26:36.553

您应该将您的项目放在一个列表中，使用该列表来填充您的组合框。

然后将`AutoCompleteMode`属性值设置为 Suggest 或 Append 或 SuggestAppend，并将`AutoCompleteSoucre`属性值设置为 ListItems。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T19:53:22.060

对于“Search as you Type”，实际上是“Filter as you Type”而不是搜索，您需要实现 OnKeyDown 或 KeyPressed 事件。

您要做的是获取搜索字符串，即事件发生时的当前文本，然后使用该字符串过滤主列表。通常人们会使用“开始于”进行过滤，但您也可以简单地使用“包含”。然后，您使用过滤器的结果实时更新框的内容。这是通过更改和刷新数据源来完成的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T10:17:58.860

这是我没有 BackGroundWorker 的最终解决方案。它适用于我的大表，并已升级为使用 SQL Server 上的存储过程（如果您使用实体框架）。我使用 Timer 来确保用户可以找到他正在搜索的值。

在这里你可以看到我在这个网站上找到的原始解决方案（感谢**Max Lambertini**和**algreat** 的想法和工作概念）：

[C# winforms 组合框动态自动完成](https://stackoverflow.com/questions/11780558/c-sharp-winforms-combobox-dynamic-autocomplete)

我的解决方案：

```
 private bool _canUpdate = true;
    private bool _needUpdate = false;
    List<spIskalnikNaslovi_Result1> dataFound;

    private void comboBox12_TextChanged(object sender, EventArgs e)
    {
        if (_needUpdate)
        {
            if (_canUpdate)
            {
                _canUpdate = false;
                refreshData();
            }
            else
            {
                restartTimer();
            }
        }
    }

    private void comboBox12_KeyUp(object sender, KeyEventArgs e)
    {
        if (e.KeyCode == Keys.Back)
        {
            int searchStart = comboBox12.SelectionStart;
            if (searchStart > 0)
            {
                searchStart--;
                if (searchStart == 0)
                {
                    comboBox12.Text = "";
                }
                else
                {
                    comboBox12.Text = comboBox12.Text.Substring(0, searchStart + 1);
                }
            }
            else 
            {
                searchStart = 0;
            }
            e.Handled = true;
        }
    }

    private void comboBox12_TextUpdate(object sender, EventArgs e)
    {
        _needUpdate = true;
    }

    private void timer1_Tick(object sender, EventArgs e)
    {
        _canUpdate = true;
        timer1.Stop();
        refreshData();
    }

    private void refreshData()
    {
        if (comboBox12.Text.Length > 1)
        {
            FillCombobox(comboBox12.Text, comboBox12);
        }
    }

    private void restartTimer()
    {
        timer1.Stop();
        _canUpdate = false;
        timer1.Start();
    }

    private void FillCombobox(string value, ComboBox myCombo)
    {
        dataFound = _vsebina.spIskalnikNaslovi1(value).ToList();
        if (dataFound.Count() > 0)
        {
            myCombo.DataSource = dataFound;
            myCombo.ValueMember = "HS_MID";
            myCombo.DisplayMember = "NASLOV1";
            var searchedItem = myCombo.Items[0].ToString();
            myCombo.SelectionStart = value.Length;
            myCombo.SelectionLength = searchedItem.Length - value.Length;
            myCombo.DroppedDown = true;
            return;
        }
        else
        {
            myCombo.DroppedDown = false;
            myCombo.SelectionStart = value.Length;
            return;
        }            
    } 
```

# jquery - 使用 jquery 隐藏 id 但输入是一个数组

> ID：12010222
> 
> 赞同：0
> 
> 时间：2012-08-17T17:17:37.403
> 
> 标签：jquery

我有一个已经使用了一段时间的 JQuery 代码，但是今天我遇到了一个障碍——这个障碍以数组输入的形式出现。

```
<div id="primary">   //oopse this one contains the survey info
<input type="radio" name="quest[]" value="yes">   //was typing fast didnt realize i typed checkbox meant radio
<input type="radio" name="quest[]" value="no">
</div>
<div id="idnum">   // this one shows only if yes is selected
blah blah blah
</div> 
```

所以输入发送到 query[] 对我来说合乎逻辑的事情是不使用数组 - 但这不是一个选项。

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script>

  $(document).ready(function () {
    $("#quest[] selected").change(function (e) {
      if ($(this).val() == "Yes") {   //if query[] = Yes then run following
        $("#idnum").hide();            //hide div id=idnum
      }
      else {     //if it no longer shows yes then run following
        $("#idnum").show();    //show div id=idnum
          }     
    });
  }); 
```

array[] 在此数组下还有其他值用于其他问题，我如何解决这个问题以专注于数组中的特定输入 - 每个 div 都有不同的 id，如果需要，我确实有能力找到 array[number] .

抱歉修复了一些东西并注释了一点

我不知道是否有可能，但是否有可能找到在特定列表中列出的值为“是”的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T17:21:52.740

我真的不明白你想做什么，但听起来你只需要这样的东西：

```
$("[name^=quest][value=yes]").change(function () {
   $("#idnum").toggle();
}); 
```

..但我有很多问题。为什么要让他们同时检查“是”和“否”？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T17:21:08.067

使用 # 代表 id 的 quest[] 是名称

的CSS选择器将是

```
$('[name="quest[]"]') 
```

那就是说我不确定您要做什么

找到检查的 quest[]/s 将是：-

```
$('[name="quest[]"]').find(':checked') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T17:21:18.427

[**jsFiddle 演示**](http://jsfiddle.net/kpxQt/1/)

```
// to grab them by name starting with "quest[" the rest will be dynamic you said
$('[name^="quest["]').on('change', function () {
    if ($(this).attr('value') === 'yes') {
        $(this).closest('div').hide();
    }
}); 
```

如果我正确理解了这个问题，并且您试图隐藏最近的父母`<div>`并隐藏它，如果他们选择是。

# hibernate - 带有包扫描的hibernate4映射WITOUT spring

> ID：12010225
> 
> 赞同：1
> 
> 时间：2012-08-17T17:17:52.690
> 
> 标签：hibernate

我想为休眠扫描配置一个包并加载实体。

我不想使用 Spring。

hibernate 4中有什么功能可以做到这一点？

谢谢。

# php - 无法找出 MySQL 语句中的语法错误

> ID：12010226
> 
> 赞同：0
> 
> 时间：2012-08-17T17:18:03.090
> 
> 标签：php, mysql

我知道这是一个简短的问题，但我无法弄清楚这一行中的语法错误：

`$insert = mysql_query("UPDATE user SET userName = '$username_change' WHERE userID = '$_SESSION['userid']' ");`

我知道问题出在`$_SESSION`变量上，但如果有的话，我不需要转义或更改以使语句起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T17:19:48.870

尝试：

```
$insert = mysql_query("UPDATE user SET userName = '".$username_change."' WHERE userID = ".$_SESSION['userid']); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T17:21:22.283

尝试将数组变量包含在大括号中：

> 更新用户 SET userName = '$username_change' WHERE userID = '{$_SESSION['userid']}'

还要考虑远离**mysql_***函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T17:21:30.750

尝试这个

```
UPDATE user SET userName = '$username_change' WHERE userID = "'.$_SESSION['userid']."' " 
```

# c - 链接到 Snow Leopard 上的精简存档

> ID：12010228
> 
> 赞同：5
> 
> 时间：2012-08-17T17:18:21.303
> 
> 标签：c, osx-leopard, unix-ar

我正在尝试将结合两个存档库的精简存档链接到 C 程序。

我构建了两个简单的 hello world 函数并使用以下命令构建了一个存档：

```
ar rcs lib1.a lib1.o
ar rcs lib2.a lib2.o 
```

然后使用精简存档合并两个存档：

```
ar rcsT all_lib.a lib1.a lib2.a 
```

然后用 gcc 编译：

```
gcc main.o all_lib.a -o hello 
```

我最终收到一条错误消息：

ld：警告：忽略文件 all_lib.a，文件是为不受支持的文件格式构建的，该文件格式不是被链接的体系结构 (x86_64)

架构 x86_64 的未定义符号：“_func1”，引用自：main.o 中的 _main “_func2”，引用自：main.o 中的 _main ld：未找到架构 x86_64 的符号

如果我尝试将 main.o 与 lib1.a 和 lib2.a 直接链接，一切正常。

我在 Mac OSX 10.6.8 上使用 gcc (MacPorts gcc46 4.6.3_3) 4.6.3 和 GNU ar (GNU Binutils) 2.21。

* * *

生成文件

```
test1: main.o lib1.o lib2.o
    gcc main.o lib1.a lib2.a -o hello

test2: main.o combine
    gcc main.o all_lib.a -o hello

lib1.o: lib1.c
    gcc -c lib1.c
    ar rcs lib1.a lib1.o

lib2.o: lib2.c
    gcc -c lib2.c
    ar rcs lib2.a lib2.o

combine: lib1.o lib2.o
    ar rcsT all_lib.a lib1.a lib2.a

main.o: main.c
    gcc -c main.c

clean:
    rm -rf *.o  *.a hello 
```

主程序

```
#include<stdio.h>
#include "lib1.h"
#include "lib2.h"

main()
{
    printf("Hello World\n");
    func1();
    func2();
} 
```

lib1.h

```
#include<stdio.h>
void func1(); 
```

lib2.h

```
#include<stdio.h>
void func2(); 
```

lib1.c

```
#include "lib1.h"

void func1()
{
    printf("Hello World 1\n");
} 
```

lib2.c

```
#include "lib2.h"

void func2()
{
    printf("Hello World 2\n");
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-17T18:28:44.670

这些来源和 makefile 使用标准 Apple 工具毫无怨言地链接。您使用的工具是否支持“-arch”开关，因此您可以明确指定“-arch x86_64”或“-arch i386”？

您可以使用“file”命令查看目标文件和可执行文件中的架构。对于库文件，您可能必须提取模块并检查它们。

# java - SQLite 错误代码 = 1

> ID：12010235
> 
> 赞同：0
> 
> 时间：2012-08-17T17:18:52.200
> 
> 标签：java, android, database, sqlite

我正在尝试将一些数据插入到我的 SQLite 数据库中。但是我收到一个错误代码 1，说我的列不存在。有人可以帮我吗，下面是我的代码：

```
08-17 13:12:46.473: I/Database(13328): sqlite returned: error code = 1, msg = table login has no column named uid
08-17 13:12:46.503: E/Database(13328): Error inserting uid=502e7b90657ab1.86949026 created_at=2012-08-17 12:12:48 email=epaas name=hwheuu
08-17 13:12:46.503: E/Database(13328): android.database.sqlite.SQLiteException: table login has no column named uid: , while compiling: INSERT INTO login(uid, created_at, email, name) VALUES(?, ?, ?, ?);
08-17 13:12:46.503: E/Database(13328):  at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
08-17 13:12:46.503: E/Database(13328):  at android.database.sqlite.SQLiteCompiledSql.compile(SQLiteCompiledSql.java:92)
08-17 13:12:46.503: E/Database(13328):  at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:65)
08-17 13:12:46.503: E/Database(13328):  at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:83)
08-17 13:12:46.503: E/Database(13328):  at android.database.sqlite.SQLiteStatement.<init>(SQLiteStatement.java:41)
08-17 13:12:46.503: E/Database(13328):  at android.database.sqlite.SQLiteDatabase.compileStatement(SQLiteDatabase.java:1231)
08-17 13:12:46.503: E/Database(13328):  at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1658)
08-17 13:12:46.503: E/Database(13328):  at android.database.sqlite.SQLiteDatabase.insert(SQLiteDatabase.java:1515)
08-17 13:12:46.503: E/Database(13328):  at library.DatabaseHandler.addUser(DatabaseHandler.java:69)
08-17 13:12:46.503: E/Database(13328):  at com.thryfting.www.RegisterActivity$register.doInBackground(RegisterActivity.java:135)
08-17 13:12:46.503: E/Database(13328):  at com.thryfting.www.RegisterActivity$register.doInBackground(RegisterActivity.java:1)
08-17 13:12:46.503: E/Database(13328):  at android.os.AsyncTask$2.call(AsyncTask.java:185)
08-17 13:12:46.503: E/Database(13328):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
08-17 13:12:46.503: E/Database(13328):  at java.util.concurrent.FutureTask.run(FutureTask.java:138)
08-17 13:12:46.503: E/Database(13328):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
08-17 13:12:46.503: E/Database(13328):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
08-17 13:12:46.503: E/Database(13328):  at java.lang.Thread.run(Thread.java:1027) 
```

下面是我的数据库代码：

```
package library;

import java.util.HashMap;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

public class DatabaseHandler extends SQLiteOpenHelper {

    // All Static variables
    // Database Version
    private static final int DATABASE_VERSION = 1;

    // Database Name
    private static final String DATABASE_NAME = "thryfting_api";

    // Login table name
    private static final String TABLE_LOGIN = "login";

    // Login Table Columns names
    private static final String KEY_ID = "id";
    private static final String KEY_NAME = "name";
    private static final String KEY_EMAIL = "email";
    private static final String KEY_UID = "uid";
    private static final String KEY_CREATED_AT = "created_at";

    public DatabaseHandler(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    // Creating Tables
    @Override
    public void onCreate(SQLiteDatabase db) {
        String CREATE_LOGIN_TABLE = "CREATE TABLE " + TABLE_LOGIN + "("
                + KEY_ID + " INTEGER PRIMARY KEY,"
                + KEY_NAME + " TEXT,"
                + KEY_EMAIL + " TEXT UNIQUE,"
                + KEY_UID + " INTEGER,"
                + KEY_CREATED_AT + " TEXT" + ")";
        db.execSQL(CREATE_LOGIN_TABLE);
    }

    // Upgrading database
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // Drop older table if existed
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_LOGIN);

        // Create tables again
        onCreate(db);
    }

    /**
     * Storing user details in database
     * */
    public void addUser(String name, String email, String uid, String created_at) {
        SQLiteDatabase db = this.getWritableDatabase();

        ContentValues values = new ContentValues();
        values.put(KEY_NAME, name); // Name
        values.put(KEY_EMAIL, email); // Email
        values.put(KEY_UID, uid); // Email
        values.put(KEY_CREATED_AT, created_at); // Created At

        // Inserting Row
        db.insert(TABLE_LOGIN, null, values);
        db.close(); // Closing database connection
    }

    /**
     * Getting user data from database
     * */
    public HashMap<String, String> getUserDetails(){
        HashMap<String,String> user = new HashMap<String,String>();
        String selectQuery = "SELECT  * FROM " + TABLE_LOGIN;

        SQLiteDatabase db = this.getReadableDatabase();
        Cursor cursor = db.rawQuery(selectQuery, null);
        // Move to first row
        cursor.moveToFirst();
        if(cursor.getCount() > 0){
            user.put("name", cursor.getString(1));
            user.put("email", cursor.getString(2));
            user.put("uid", cursor.getString(3));
            user.put("created_at", cursor.getString(4));
        }
        cursor.close();
        db.close();
        // return user
        return user;
    }

    /**
     * Getting user login status
     * return true if rows are there in table
     * */
    public int getRowCount() {
        String countQuery = "SELECT  * FROM " + TABLE_LOGIN;
        SQLiteDatabase db = this.getReadableDatabase();
        Cursor cursor = db.rawQuery(countQuery, null);
        int rowCount = cursor.getCount();
        db.close();
        cursor.close();

        // return row count
        return rowCount;
    }

    /**
     * Re crate database
     * Delete all tables and create them again
     * */
    public void resetTables(){
        SQLiteDatabase db = this.getWritableDatabase();
        // Delete All Rows
        db.delete(TABLE_LOGIN, null, null);
        db.close();
    }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T17:28:47.900

错误信息

> 表`login`没有名为的列`uid`

表示您的数据库未处于您期望的状态。`uid`您确实使用名为( )的列创建了该表，`KEY_UID`但您很可能在设备上已创建数据库之后添加了该列。一旦创建，它将一直存在，直到您明确删除该文件或卸载您的应用程序。并且`onCreate`在数据库文件丢失之前不会再次执行。

您需要做的是每次更改表定义时升级数据库版本。这将触发`onUpgrade`代码，然后按照您定义的方式重新创建您的表。

您的修复很可能只是

```
private static final int DATABASE_VERSION = 2; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T17:25:02.623

尝试

```
private static final String KEY_ID = "uid"; 
```

代替

```
private static final String KEY_ID = "id"; 
```

# android - 在android中使用mapview的指纹

> ID：12010238
> 
> 赞同：2
> 
> 时间：2012-08-17T17:19:01.003
> 
> 标签：android, debugging

我是开发新手，尝试使用 mapview 但无法生成我使用的指纹

```
C:\Users\SID>keytool -list -alias androiddebugkey -keystore C:\Users\SID\. 
```

`android\debug.keystore -storepass android -keypass android`

在命令提示符中但给出错误**“keytool”不被识别为内部或外部命令、可运行程序或批处理文件。**我正在使用 WINDOWS 7。请指导我，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T18:15:49.740

将 SDK 目录添加到 PATH 环境变量

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T07:34:28.650

我已经解决了

C:\j2sdk1.4.2_04\bin>keytool -list -alias androiddebugkey -keystore C:\Users\SID \.android\debug.keystore -storepass android -keypass android

只是找到使用相同查询运行它的 keytool 位置

# ios - UITableView 选择 - 检查单元格

> ID：12010243
> 
> 赞同：0
> 
> 时间：2012-08-17T17:19:19.753
> 
> 标签：ios, uitableview

我打算有一个 UITableView 填充来自 NSMutableDictionary 的条目。我想做的是在检查一个单元格时，它会创建一个包含键对象的数组。

表格视图的 cell.textLabel.text 等于字典中每个元素的键，而与键关联的对象是一个整数。

假设我点击其中一个单元格，与之关联的对象是 5722。我想将其添加到数组中，并检查该单元格。此外，再次点击该单元格应删除与其关联的对象并取消选中该单元格。我该怎么做呢？

截至目前，滚动时，我的复选标记无处不在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T17:33:23.840

我认为您最好将数据源作为 NSArray 实例。NSDictionary 实例的 allKeys 方法提供的键列表是无序的，会随时变化。如果使用数组，则可以使用 NSMutableIndexSet 存储选定的单元格，并使用此实例使用 NSArray 方法 objectsAtIndexes 从数组中获取已选定的记录

# javascript - 应用 jQuery-UI 对话框后，第二种形式选择消失

> ID：12010244
> 
> 赞同：0
> 
> 时间：2012-08-17T17:19:20.177
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-dialog

我正在使用 jQuery 1.7.2 和 jQuery UI 1.8.20。我的一个页面，我有一个简单的对话框，其中包含一个表单：

```
 <div id="dialog-addArtToCompetition" title="Add Art to Competition">
    <form id="addToCompetition" name="addToCompetition"
        action="${competition_new_base}" method="post">
        <fieldset>
            <input type="hidden" name="artPieceId" id="artPieceIdHidden" value="${artPiece.id}" />
            <label for="artCategoryId">Category: </label> 
            <select name="artCategoryId" id="artCategoryIdSelect"
                multiple="false" style="width: 200px; height: 50px;">
            </select> <br />
            <label for="competitionPrice">Price: </label>
            <select name="competitionPrice" id="competitionPriceSelect"
                multiple="false" style="width: 200px; height: 50px;">
            </select>
        </fieldset>
    </form>
</div> 
```

然后我使用以下内容注册对话框：

```
 $('#dialog-addArtToCompetition').dialog({
            autoOpen:   false,
            width:      400,
            height:     500,
            modal:      true,
            buttons:    {
                "Add":  function() {
                    $('#addToCompetition').ajaxSubmit({
                        accept:         'application/json',
                        dataType:       'json',
                        //beforeSubmit: showRequest,  // pre-submit callback 
                        success:        function(comp, statusText, xhr, $form) {
                            alert("Art added");
                            $(this).dialog( "close" );
                        },
                        error:          function(xhr, ajaxOptions, thrownError) {
                            alert("Some error occured");
                            $(this).dialog( "close" );
                        },
                        resetForm:      true
                    }); 

                    $(this).dialog( "close" );
                },
                "Cancel":   function() {
                    $(this).dialog( "close" );
                }
            },
            close:      function() {}
        });
    }); 
```

但是，当我打开对话框时，缺少第二个元素。我仔细检查了生成的 HTML 购买查看源代码，原始 HTML 文件确实缺少选择，但是当我使用 Chrome 的开发工具查看它时，元素标签中缺少它。而且，是的，我正在查看正确的 DIV，因为我知道 jQuery 在您创建对话框时会将其移到正文中。

为什么 jQuery 会删除我的表单元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T23:45:44.293

空的选择似乎有些奇怪。一旦我进行了以下更改

```
<div title="Add Art to Competition" id="dialog-addArtToCompetition">
<form method="post" action="/ArtSite/competitions/new" name="addToCompetition" id="addToCompetition">
    <fieldset>
        <input value="" id="artPieceIdHidden" name="artPieceId" type="hidden"/>
        <label for="artCategoryId">Category: </label>
        <select style="width: 200px; height: 50px;" multiple="false" id="artCategoryIdSelect" name="artCategoryId"><!-- empty --></select><br/>
        <label for="competitionPrice">Price: </label>
        <select style="width: 200px; height: 50px;"  multiple="false" id="competitionPriceSelect" name="competitionPrice"><!-- empty --></select>
    </fieldset>
</form> 
```

​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​</p>

这一切似乎都奏效了。

# security - 在 URL 中发布用户数据

> ID：12010246
> 
> 赞同：1
> 
> 时间：2012-08-17T17:19:35.150
> 
> 标签：security, url

这样做是不明智的吗？我正在谈论的事情是将用户名和密码传递给处理文件，如下所示：

```
echo'<script>location.href="process.php?u='.$_POST['username'].'&p='.md5($_POST['password']).'"</script>'; 
```

这是在验证用户名和密码之后。这会以某种方式被恶意拦截吗？或者这是一件足够安全的事情吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T17:23:08.163

这是一件非常糟糕的事情。所有用户数据都应该存储在 中`$_SESSION`，或者，您应该设置一个验证 cookie 并将其用于身份验证。

此外，您永远不应该“保留”用户的密码。您应该对其进行散列并将散列存储在数据库中，然后在登录时根据散列检查发布的密码。

此外，您的哈希应该是一种方式，并且您不应该能够检索或查看用户的原始密码。

最后，MD5惨败。它不再是远程安全的，可以被彩虹表攻击摧毁。您应该研究更强大和更慢（慢是好的）的东西，例如[bcrypt](https://stackoverflow.com/a/6337021/420001)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-17T17:27:30.903

***不要这样做***

好了，既然我们已经弄清楚了，请允许我解释一下……

您实际上所做的是将这些数据以明文形式发送给用户。即使您使用 SSL 加密进行传输，这仍然是一个很大的风险。这不是“在浏览器中渲染”，但这没关系。它仍在发送到浏览器。即使在这种特殊情况下你没有遇到任何问题，养成这个习惯也是一个坏习惯。

你甚至可能会问，“但我使用`md5()`的密码是模糊的，对吧？”

错误的。

文字是模糊的，是的。但是您将文本的模糊版本交付给客户端，然后关闭该文本。这意味着您仍在向所有人显示有效密码。

如果密码是“correcthorsebatterystaple”，那么您不想以纯文本形式显示它，因为这会给某人密码，对吗？（事实上​​，您甚至不想以纯文本形式*存储*它。任何地方。作为站点管理员，您甚至不想*知道*或*无法*找到密码文本。如果可以，其他人可以。）对。

因此，您将密码隐藏为“elughwelfguweliurgnswfglwerlgu”，您的代码会将其解释为密码。所以你可以显示它，对吧？错误的。因为现在，通过从客户端接受“elughwelfguweliurgnswfglwerlgu”作为密码，您已经将“elughwelfguweliurgnswfglwerlgu”变成*了系统接受的纯文本密码*。因此，文本的模糊化无济于事。

简而言之，永远不要以任何形式向任何人提供密码。您的应用程序应该*接收*密码作为输入，但*绝不会以**任何*方式将其作为输出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T17:29:08.350

> 这会以某种方式被恶意拦截吗？

是的。任何人都可以查看您页面的来源并查看用户名和密码的 md5 哈希值。当页面为用户重定向时，它也会显示在浏览器的 URL 中。

它可以通过中间人攻击被拦截吗？不必要。如果您使用 HTTPS，查询字符串将在 SSL 数据包中与请求的其余部分一起加密。如果您不使用 HTTPS，任何人都可以看到查询字符串，您知道，这使得 GET 在查看中间人攻击时与 POST 一样安全。

以下是 HTTPS 环境中 GET 如何降低安全性的一个很好的比较：[HTTPS 查询字符串是否安全？](https://stackoverflow.com/questions/323200/is-a-https-query-string-secure)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-17T17:28:32.477

不不不

当一个人输入密码来设置帐户（或更改密码）时，请使用 POST 和 SSL。

否则，密码是单向街道，在 URL 中没有 MD5 或纯文本。

当用户登录时，给他们一个会话。这可能会过期并因此变得无效。

至于被拦截 - 你可以得到一个数据包嗅探器

# android - 从一个 ActivityA 发送数据并在 ActivityB 中存储为 ArrayList

> ID：12010252
> 
> 赞同：0
> 
> 时间：2012-08-17T17:19:50.220
> 
> 标签：android, arraylist, android-arrayadapter

我有以下问题。我想从我的 ActivityA 中的数据库中读取数据并将一个选定的字符串发送到 ActivityB，它应该显示在 ListView 中。我正在使用意图这样做，它工作正常，但我只能显示一个字符串。我猜想在重新加载ActivityA之后，listView被清除了。

所以我尝试了以下操作：在一个名为 ArrayLst 的单独类中，我定义了这两个全局变量：

```
public static ArrayList<String> arrayList = new ArrayList<String>();
public static MyAdapter arrayAdapter=null; 
```

在 ActivityA 中，我在 onClick 函数中执行此操作：

```
ArrayLst.arrayList.add(0, myEditText.getText().toString());
ArrayLst.arrayAdapter.notifyDataSetChanged();
Intent intent = new Intent(ActivityA.this, ActivityB.class);
startActivity(intent); 
```

在 ActivityB 中，我想显示列表，所以我称之为：

```
lstView.setAdapter(ArrayLst.arrayAdapter); 
```

但是，当我单击 ActivityA 中的按钮时，我的应用程序崩溃了。LogCat 说是因为这条线

```
ArrayLst.arrayAdapter.notifyDataSetChanged(); 
```

如果我删除这一行，它不会崩溃，但我没有得到任何结果。我究竟做错了什么？谢谢你的帮助。

ps：由于我是Android新手，请保持答案简单，以便我理解：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T18:04:18.473

我想它会崩溃，因为您从未初始化 arrayAdapter。

为什么要使用自定义适配器（MyAdapter arrayAdapter）？

在 ActivityB 你应该有一个静态的 ArrayList （你似乎有）

```
public static ArrayList<String> arrayList = new ArrayList<String>(); 
```

然后，您需要在类全局范围内声明的 ActivityB 上的 ArrayAdapter

```
public static ArrayAdapter adapter; 
```

然后在您的 onCreate 中，您将初始化适配器

```
adapter = new ArrayAdapter(this, android.R.simple_list_1, arrayList); 
```

如果 ActivityB 扩展 ListActivity 那么你会打电话

```
setListAdapter(adapter); 
```

如果 ActivityB 扩展了 Activity 那么你会调用

setContentView() 下的以下内容

```
ListView list = (ListView)findViewById(R.id.YOURLISTID);
list.setAdapter(adapter); 
```

每当您向 ArrayList 添加数据时，您都会调用 ActivityB.adapter.notifyDataSetChanged()

在不知道您具体在做什么的情况下，我无法提出更好的想法，因为它可能与您想要完成的目标不一致。

# datetime - 修改批处理脚本以从 %currentdate% 获取小时和分钟

> ID：12010253
> 
> 赞同：1
> 
> 时间：2012-08-17T17:19:51.933
> 
> 标签：datetime, batch-file

我需要修改一个已退出的开发人员编写的 Windows 批处理文件。这是已经存在的部分内容：

```
set date/t=%currentdate%
for /f "tokens=2-4 delims=/ " %%a in ('date/t') do (
set fmonth=%%a) & (set fdate=%%b) & (set fyear=%%c) 
```

我有点，几乎不明白这是如何/为什么工作的，它确实按设计工作。如果今天运行它，fmonth 是 08，fdate 是 17，如果是 2012 年是 fyear。但我还需要小时和秒。我一直在猜测和谷歌搜索太久了，我需要专业的帮助。

任何指针？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T14:44:13.180

rene 答案不适用于所有语言环境。有些使用逗号，有些使用句点作为小数点。另外，该解决方案可以压缩为单个 FOR 语句。以下内容应适用于所有语言环境。小数秒实际上是厘秒 (1/100)，而不是毫秒 (1/1000)。

```
for /f "tokens=1-4 delims=:.," %%A in ("%time%") do (
  set fhour=%%A
  set fmin=%%B
  set fsec=%%C
  set fcsec=%%D
) 
```

如果您想对这些值进行数学计算，那么您还有额外的工作要做。小于 10 的值将以零为前缀，这似乎不是问题。但是 SET 将任何前缀为零的数字视为八进制表示法，并且 08 和 09 不是有效的八进制数字。

有几种方法可以去掉前导零，但最方便的是使用一点数学。只需在值前面加上 100，然后取模 100（除以 100 后的余数）。所有的赋值都可以用一个 SET /A 语句来完成。

```
for /f "tokens=1-4 delims=:.," %%A in ("%time%") do set /a "fhour=100%%A%%100, fmin=100%%B%%100, fsec=100%%C%%100, fcsec=100%%D%%100" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T17:39:54.840

根据 %time% 拆分

```
set time=%time%:
for /f "tokens=1-3,* delims=:" %%k in ("%time%") do (set fhour=%%k) & (set fminute=%%l) & (set fsecfrac=%%m)
for /f "tokens=1-3,* delims=," %%k in ("%fsecfrac%") do (set fsecond=%%k) & (set fmsec=%%l) 
```

# xcode - mkmap 缩放用户位置 - Xcode

> ID：12010258
> 
> 赞同：0
> 
> 时间：2012-08-17T17:20:26.607
> 
> 标签：xcode, map, location, zooming

我有这个代码..

```
-(IBAction)getlocation {
mapview.showsUserLocation = YES;
[mapview setCenterCoordinate:mapview.userLocation.coordinate animated:YES]; 
```

而且我还有一个固定坐标的图钉。我想要的是当按下用户定位按钮时，我希望视图从图钉缩小，然后移动并放大回用户位置。我当前的代码只是前往当前位置。我如何从大头针缩小，然后旅行，最后放大？先感谢您..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T23:49:35.020

尝试这个：

```
[_mapView setCenterCoordinate:pinCoordinate zoomLevel:minZoomValue animated:YES]; 
```

（应该从图钉缩小地图）

然后调用：

```
mapview.showsUserLocation = YES;
[mapview setCenterCoordinate:mapview.userLocation.coordinate animated:YES]; 
```

将地图缩放到用户的坐标。（可选地，您可以设置所需的缩放级别，如上所示）

# perforce - Perforce：当文件被另一个提交的更改移动时如何解决挂起的更改

> ID：12010262
> 
> 赞同：12
> 
> 时间：2012-08-17T17:20:58.560
> 
> 标签：perforce

*背景：有人在一个正在积极开发的大型 Perforce 软件仓库上进行了一些重组工作，并`p4 move`在他们仍在工作的时候进行了文件整理。其他所有人都需要保留他们的未决更改，但将它们移动到新目录结构中的新位置。*

考虑一下我的待定更改列表，其中包含各种文件的添加、编辑、删除*和移动。*

如果另一个用户将`p4 move`所有这些文件中的一个提交到子目录中，而我的更改列表仍处于挂起状态，我该如何解决以便将相同的更改应用于新位置的相同文件？

在其他用户移动文件并且我执行一个`p4 sync`将文件放在我的工作区中的新位置后，`p4 resolve`只是说有`No file(s) to resolve`.

我试图为`p4 move path newdir/path`我的更改中的每个文件做一个，这不太奏效：

*   我添加的文件被移动到新位置添加。好的。
*   我编辑的文件需要使用`-f`标志`p4 move`（没有它你会得到`//depot/newdir/path - is synced; use -f to force move`）。好的。
*   我已删除的文件无法移动 ( `//depot/path - can't move (already opened for delete)`)。坏的
*   我已移动的文件无法再次移动。如果我的待定更改从 移动`//depot/path`到`//depot/newpath`，而另一个更改已经移动`//depot/path`到 ，`//depot/newdir/path`那么我可以`p4 move newpath newdir/newpath`获取更改的“移动/添加”部分，但我不能`p4 move path newdir/path`同时获取更改的“移动/删除”部分（与前一点相同的错误）。坏的。

如果裸 p4 命令不起作用，我将不得不退出 bash-fu 来移动文件并将正确的命令粘合在一起。我需要一个自动化的解决方案，因为大量用户中可能存在大量未决更改，所有这些更改都受到迁移的影响，而这些都需要尽可能轻松地解决。

我还考虑过调整[Working Disconnected From The Perforce Server](http://kb.perforce.com/article/2)方法以将我的更改应用到新位置，但这会丢失“移动”元数据，更重要的是，如果多人必须做同样的事情，这将不起作用如果我在他们之前进入，他们将不得不解决我所做的更改。

如果你想玩一个玩具示例，这里是我重现测试用例的步骤：

```
# Get p4 client and server, install in path (~/bin for me)
cd ~/bin
wget http://www.perforce.com/downloads/perforce/r12.1/bin.linux26x86/p4
chmod +x p4
wget http://www.perforce.com/downloads/perforce/r12.1/bin.linux26x86/p4d
chmod +x p4d

# Start p4 server in a test area (server dumps files in CWD)
mkdir -p ~/p4test/server
cd ~/p4test/server
p4d&
sleep 3
export P4PORT=localhost:1666
unset P4CONFIG # In case you use elsewhere :)

# Create some default client specs and workspaces for them.
mkdir ../workspace1
cd ../workspace1
export P4CLIENT=client1
p4 client -o | p4 client -i
mkdir ../workspace2
cd ../workspace2
export P4CLIENT=client2
p4 client -o | p4 client -i

# Create files and commit initial depot from client1
cd ../workspace1
export P4CLIENT=client1
for i in 1 2 3 4; do echo "This is file $i" > file$i; done
p4 add file*
p4 submit -d 'Initial files'

# Now make some changes to the files. But do not submit - leave pending.
# Add
echo "New file 0" > file0
p4 add file0
# Edit
p4 edit file1
echo "Edited $(date)" >> file1
# Delete
p4 delete file2
# Move
p4 edit file3
p4 move file3 file3.1

# Pending changelist looks like this:
# p4 opened
#//depot/file0#1 - add default change (text)
#//depot/file1#1 - edit default change (text)
#//depot/file2#1 - delete default change (text)
#//depot/file3#1 - move/delete default change (text)
#//depot/file3.1#1 - move/add default change (text)

# Meanwhile, in client2, another user moves everything to a new dir
cd ../workspace2
export P4CLIENT=client2
p4 sync
p4 edit file*
p4 move ... main/...
p4 submit -d 'Move everything to new "main" directory'

# Now what happens in client1?
cd ../workspace1
export P4CLIENT=client1
p4 sync

# //depot/file4#1 - deleted as /home/day/p4test/workspace1/file4
# //depot/file1#1 - is opened for edit - not changed
# //depot/file2#1 - is opened for delete - not changed
# //depot/file3#1 - is opened for move/delete - not changed
# //depot/file3.1#1 - is opened for move/add - not changed
# //depot/main/file1#1 - added as /home/day/p4test/workspace1/main/file1
# //depot/main/file2#1 - added as /home/day/p4test/workspace1/main/file2
# //depot/main/file3#1 - added as /home/day/p4test/workspace1/main/file3
# //depot/main/file4#1 - added as /home/day/p4test/workspace1/main/file4
# day@office:~/p4test/workspace1$ tree
# .
# ├── file0
# ├── file1
# ├── file3.1
# └── main
#     ├── file1
#     ├── file2
#     ├── file3
#     └── file4
#
# 1 directory, 7 files

# Now ... how to resolve? 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-18T07:54:41.023

理论上，您现在应该能够做到这一点：

```
p4 move -f ... main/...             # meld your opened files to their renamed files
p4 move -f main/file3.1 main/file3  # meld your renamed file to their renamed file
p4 revert '*'                       # revert your now-spurious pending deletes
p4 move main/file3 main/file3.1     # move their renamed file to the name you wanted
p4 resolve                          # merge their edits with your edits 
```

但是第三个“p4 move”似乎有一个错误，它正在删除 main/file3.1 (fka main/file3) 上的未决解析。

但是，如果您按以下顺序执行此操作，它似乎确实可以正常工作：

```
p4 move -f ... main/...
p4 move -f main/file3.1 main/file3
p4 revert '*'
p4 resolve
p4 move main/file3 main/file3.1 
```

# java - 默认情况下总是为多模块站点部署分阶段站点？

> ID：12010267
> 
> 赞同：4
> 
> 时间：2012-08-17T17:21:13.647
> 
> 标签：java, maven, maven-site-plugin

我正在努力理解部署具有工作链接的多模块 Maven 站点的复杂性。由于我使用`maven-scm-provider-hg`.

根据文档，我应该跑去`mvn site:site site:stage`获得一个完整的工作站点。但是，当我运行`mvn site:deploy`它时，它会部署父 pom 站点，除了图像和 css 文件夹外，它是空的。

接下来我试试`mvn site:stage-deploy`。这会失败，因为它会添加`staging/`到 url，因为我使用的是 Google 代码，所以会导致错误，因为`http://code.google.com/p/myproject.site/staging`它不是存储库。这也不是一个长期的解决方案，因为我很确定 maven 发布插件运行`site:site`。

使用工作链接部署完整的多模块站点的官方方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T16:31:58.027

为了在一切就绪的情况下运行多模块构建的站点构建，您必须运行站点生命周期阶段站点部署，而不仅仅是站点插件目标。

所以我会跑

```
mvn clean install site-deploy 
```

或用于部署工件和站点

```
mvn clean deploy site-deploy 
```

当然，您必须在分销管理方面进行正确的设置。除此之外，您要确保所有模块都具有与其 artifactId 相同的目录名称，并且您已经设置了 site.xml 以及相应的链接等，如站点插件网站上所述。

根据站点部署协议，您可能还必须添加构建扩展（例如，如果您使用 dav）

这当然需要一些摆弄，但它确实有效。另外我建议使用最新版本的站点插件 (3.1) 和 Maven (3.0.4)。

# jquery - 去除输入中的空格

> ID：12010275
> 
> 赞同：17
> 
> 时间：2012-08-17T17:21:33.013
> 
> 标签：jquery

我有一个不需要任何空格的字段。我需要在输入时删除任何内容。这就是我正在尝试的......到目前为止没有运气

```
$('#noSpacesField').click(function() {
    $(this).val().replace(/ /g,'');
}); 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-08-17T17:23:17.447

使用 jQuery trim 删除前导和尾随空格

```
$.trim(" test case "); // 'test case' 
```

要删除所有空格...

```
" test   ing  ".replace(/\s+/g, ''); // 'testing' 
```

要在输入时删除空格...

```
$(function(){
  $('#noSpacesField').bind('input', function(){
    $(this).val(function(_, v){
      return v.replace(/\s+/g, '');
    });
  });
}); 
```

[**现场示例**](http://jsfiddle.net/2csf7/68/)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-08-17T17:28:27.240

```
$('#noSpacesField').keyup(function() {
  $(this).val($(this).val().replace(/ +?/g, ''));
}); 
```

这将在您键入时删除空格，并且还将删除制表符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-14T18:56:24.283

如果你只想输入数字，试试这个！:D

```
$("#id").keyUp(function(){
   if(isNaN($(this).val())) {
     $(this).val(0);
   }
   $(this).val($(this).val().replace(/ +?/g, ''));
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-22T22:33:56.723

我们可以使用纯 javascript 实现预期的结果。

输入

```
<input type="text" id="whiteSP" onChange={ (e)=>removeSpace(e) } /> 
```

JS函数

```
function removeSpace(e){
    let val = (e.target.value).trim();
    console.log(val);
} 
```

但是在单击表单提交按钮时

```
console.log( ( (" test case ").trim() ).replace(" ", "") ) 
```

# jquery - 使用jquery捕获窗口滚动条的MouseUp事件

> ID：12010278
> 
> 赞同：0
> 
> 时间：2012-08-17T17:21:39.373
> 
> 标签：jquery, scrollbar

我正在尝试找到一种解决方案来捕获整个窗口滚动条上的鼠标向上（滚动结束）事件。但这段代码只能偶尔使用。任何帮助将不胜感激。

```
<script type="text/javascript">
    $(function() {
        var scrollTimer;
        var isMouseDown = false;

        $(window)
            .mousedown(function(event) {
                clearTimeout(scrollTimer);
                isMouseDown = true;
            })
            .mouseup(function(event) {
                isMouseDown = false;
            })
            .scroll(function (event) {
                clearTimeout(scrollTimer);
                scrollTimer = setTimeout(function() {
                    if (! isMouseDown) {
                        console.log('UP');
                    }
                }, 500);
            });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T17:29:58.737

我想这就是你所追求的：

```
$(document).bind("scrollstop", function() {
   alert("Scrolling has stopped");
});

$(document).bind("scrollstart", function() {
  alert("Scrolling started");
}); 
```

这是我使用的 jquery 库的链接：

[http://james.padolsey.com/demos/scrollevents/scroll-startstop.events.jquery.js](http://james.padolsey.com/demos/scrollevents/scroll-startstop.events.jquery.js)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T17:30:36.273

[http://jsfiddle.net/kyyn8/5/](http://jsfiddle.net/kyyn8/5/)

你很接近，你只需要这样做：

```
if (isMouseDown) // instead of !isMouseDown 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T16:10:38.730

由于我测试的浏览器在您离开滚动条时会立即接收 mouseenter 事件，因此我将 mouseenter 在滚动时绑定到 mouseup 事件。像这样的东西：

```
$(window).on('mousedown.ss',function(ev) { 
    $.ssMouseDown=true;
});
$(window).on('mouseup.ss',function(ev) { 
    $.ssMouseDown=false;
});
$(window).on('scroll.ss',function(ev) { 
    if ($.ssMouseDown) {
        $(window).off('mouseenter.ss');
        $(window).one('mouseenter.ss',function(ev) { 
            $.ssMouseDown=false;
        });
    }                   
}); 
```

这不一定完全正确，但确实完成了工作......

# c++ - 在循环中更新 Qt GUI（将位图图像显示为电影）

> ID：12010281
> 
> 赞同：2
> 
> 时间：2012-08-17T17:21:52.920
> 
> 标签：c++, multithreading, qt, user-interface

我从套接字接收截图作为位图，当我只显示其中一个时它可以工作但是当我进入循环时（显示所有接收图像以制作电影）我挂了

```
void ShowImageBuffer(char* buf,int sizeofimagebuffer )
{
    QByteArray byte=QByteArray::fromRawData(buf, sizeofimagebuffer );
    QPixmap  image;
    if(image.loadFromData(byte,"BMP"))
    {
        ui->label->setPixmap(image);
        ui->label->update();
    }
}

  while(1)
 {
        ShowImageBuffer(buf, sizeofimagebuffer)
 } 
```

我必须使用单独的线程？（但我认为我们不会使用任何线程来更改 GUI？）

什么是最好的让它实时？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T18:03:52.147

我想的问题是你没有以这种方式返回事件循环。您使用的[update()](http://doc-snapshot.qt-project.org/4.8/qwidget.html#update)方法不会立即重新绘制 QWidget。它安排一个更新区域的请求，如果有可用的话，它与其他未决请求统一。当执行返回事件循环时处理此请求。它在文档中明确说明。

您可能希望使用 QTimer 并以特定帧速率调用 ShowImageBuffer 方法。当 ShowImageBuffer 完成时，执行返回到事件循环，从而有时间处理 update() 请求。还要考虑 AJG85 建议的改进。

否则，您可以查看立即调用 paintEvent() 方法的[repaint()](http://doc-snapshot.qt-project.org/4.8/qwidget.html#repaint)方法，但我仍然认为您应该设置特定的帧速率以获得良好的结果。我会选择 QTimer 的方式。

# javascript - 如何使用主干呈现集合？

> ID：12010289
> 
> 赞同：0
> 
> 时间：2012-08-17T17:22:25.047
> 
> 标签：javascript, backbone.js

我有这个工作正常的主干，我只想渲染集合已被提取！

代码：

```
var SearchView = Backbone.View.extend({
        events: {
            "keyup": "handleChange"
        },
        initialize: function(){
            this.collection.bind("reset", this.updateView, this);
        },
        render: function(){
          // this is where i need help 
          this.$el.next('#suggestions').append(// iterate over this.collection and apppend here) //

        },
        handleChange: function(){
            var term = this.$el.val();
            this.collection.search(term);
        },

        updateView: function() {

           this.render();
        }

    }); 
```

我只想遍历 this.collection 并显示每个集合内的“文本”属性并将其附加到 ('#suggestions') el。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T17:59:17.827

专注于您的重置，渲染集合问题，这就是我的做法。这种方式假设当您创建视图时， $el 已经存在，并且您正在通过 View 构造函数将其传递，因此它已准备好运行。

```
 var SearchView = Backbone.View.extend({
        template: _.template('<span><%= term %></span>');
        initialize: function(){
            this.collection.bind("reset", this.render, this);
        },
        render: function(){
            this.addAllTerms();
            return this;
        },
        addAllTerms: function() {
            var self = this;
            this.collection.each(function(model) {
                self.addTerm(model);
            });
        },
        addTerm: function(someModel) {
            this.$el.next('#suggestions').append(this.template(someModel.toJSON()));
        }
    }); 
```

在某些方面，它与您的方法有些不同。首先，我们利用 Underscore 的模板功能。这可以是从 span 到 li 到 div 的任何东西。我们使用 <%= %> 表示我们将插入一些值（这将来自我们的 model.term 属性）。

我没有去处理程序然后渲染，而是将集合绑定到渲染。

假设我们总是要刷新整个`render()`事物，从头开始构建。`addAllTerms()`只需在集合中循环。您可以使用`forEach()`或只是使用`each()`相同的东西，只是`forEach()`3 个字符对我的懒惰的流浪汉来说太长了。;-)

最后，该`addTerm()`函数接受一个模型并将其用作将附加到#suggestions 的值。基本上，我们说的是“使用插值附加模板”。我们将上面的模板函数定义为这个 View 对象属性，以清楚地将模板与数据分开。虽然你可以跳过这部分，只是`append('<span>' + someModel.get('term') + '</span>')`或不。_.template() 使用我们的模板，并且还接受具有与我们模板中的对象一致的属性的任何类型的对象。在这种情况下，“术语”。

这只是一种不同的方式来做你正在做的事情。我认为这段代码更易于管理。例如，您可能想在不刷新整个集合的情况下添加一个新术语。该`addTerm()`功能可以独立存在。

编辑：

不是那么重要，但我使用的一些模板对我很有用，而我刚开始的时候并没有看到它。当您将 传递给`model.toJSON()`模板函数时，我们实际上是在传递所有模型属性。所以如果模型是这样的：

```
defaults: {
    term: 'someTerm',
    timestamp: '12345'
} 
```

在我们之前的示例中，还传入了属性 timestamp。它没有被使用，只`<%= term %>`被使用。但是我们也可以通过将其添加到模板中轻松地对其进行插值。我想要得到的是，您不必将自己限制在来自一个模型的数据。一个复杂的模板可能包含来自多个模型的数据。

我不知道这是否是最好的方法，但我所做的是这样的：

```
makeHash: function() {
    var hash = {};
    hash.term = this.model.get('term');
    hash.category = anotherModel.get('category');

    var date = new Date();
    hash.dateAccessed = date.getTime();

    return hash;
} 
```

因此，您可以轻松构建自己的自定义散列以放入模板中，将要插入的所有数据聚合到单个对象中以传递到模板中。

```
// Instead of .toJSON() we just pass in the `makeHash()` function that returns
// a customized data object

this.$el.next('#suggestions').append(this.template(this.makeHash())); 
```

您还可以轻松地传递整个对象。

```
makeHash: function() {
    var hash = {};
    hash.term = this.model.get('term');

    var animal = {
        name: 'aardvark',
        numLegs: 4
    };

    hash.animal = animal;

    return hash;
} 
```

并将其传递到我们的模板中，如下所示：

```
template: _.template('<span><%= term %></span>
    <span><%= animal.name %></span>
    <span><%= animal.numLegs %></span>') 
```

我不确定这是否是最好的方法，但它帮助我准确了解了哪些数据将进入我的模板。也许很明显，但当我刚开始时，它不适合我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T17:47:37.283

我找到了问题的解决方案，我会把它放在这里给可能想知道的人：

```
render: function(){
            this.collection.forEach(function(item){
                alert(item.get("text"));
            });
         } 
```

# ruby-on-rails-3 - Rails 3 - 从资产服务器提供资产失败时是否有任何后备？

> ID：12010290
> 
> 赞同：6
> 
> 时间：2012-08-17T17:22:26.290
> 
> 标签：ruby-on-rails-3, asset-pipeline, cdn, fallback

在我的`production.rb`我设置了这个：

```
# Enable serving of images, stylesheets, and JavaScripts from an asset server
  config.action_controller.asset_host = "http://myassets.com" 
```

图像、js 和样式表从我的 CDN（资产服务器）加载得很好

但是如果有一天这个资产服务器出现故障怎么办？它返回一个404？

因为在我的资产服务器 (CDN) 中我配置了`pull zone`，所以内容仍然可以从`/assets/..`.

是否有任何后备或如何进行后备，以便当我的`assets server`失败或返回错误时，我的应用程序会从应用程序内部加载资产`/assets/`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T10:48:43.427

生产.rb

```
config.action_controller.asset_host = Proc.new { |source, request, asset_path|
  if some_condition
    "http://myassets.com"
  else
    asset_path
  end
} 
```

有关详细信息，请参阅[AssetTagHelper](http://api.rubyonrails.org/classes/ActionView/Helpers/AssetTagHelper.html)

**编辑**

我认为这种预防措施不值得对您的应用程序进行额外的加载/添加请求。如果您正在构建一个带有故障转移服务器的大型应用程序以提供高可用性，那么资产将是您可以通过这种冗余来适应的另一件事。如果你通过 AWS 或 Rackspace 等服务将你的东西托管在云上，我认为你的可用性很好，你不应该担心这个问题。这种方法几乎完全否定了缓存资产的好处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T19:42:12.870

您可以探索以下指令

```
ActionController::Base.asset_host = Proc.new { |source, request|
  if #code to check if CDN is alive
    "CDN Url"
  else
    "/public/assets/"
  end
} 
```

# java - Quartz 2.1.5：尝试使用 JobBuilder 动态创建作业详细信息

> ID：12010291
> 
> 赞同：0
> 
> 时间：2012-08-17T17:22:28.303
> 
> 标签：java, classloader, quartz-scheduler

我已经看过几篇关于这个的帖子，但是不要使用 Quartz 中新的 JobBuilder 方法。

我正在尝试使用存储类名的字符串动态创建 JobDetail 。但是我收到以下编译器错误：

```
 The method newJob(Class<? extends Job>) in the type JobBuilder is not applicable 
 for the arguments (Class<capture#6-of ?>) 
```

这是代码：

```
String s = "ClassName";
Class<?> jobClass = null;
try {
    jobClass = Class.forName (s);
} catch (ClassNotFoundException e) {
    e.printStackTrace();
    throw new MsgException ( "Requested Job Class not found" );
}

JobDetail jobDetail = newJob(jobClass).
        withIdentity(jobKey).
        withDescription(description).
        storeDurably().
        usingJobData(dataMap).
        build(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-11T12:53:44.667

我认为 newJob 构造函数需要编译时引用，而 Class.forName() 等方法是运行时引用。一个中间解决方案是使用类似的东西：

```
private void makeNewJob(Class<? extends Job> jobClass, String identity,
    String environment)
{
    JobDetail job = newJob(jobClass).withIdentity(identity, environment)
        .build();

// additional code
} 
```

并致电：

```
makeNewJob(MyJob.class, "MyJob", "Production"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T17:29:40.607

你看错误信息了吗？`newJob`接受一个 type 的参数`Class<? extends Job>`，但你传递给它一个 type 的参数`Class<?>`。作为快速修复，您可以尝试将其更改为

```
newJob((Class<? extends Job>)jobClass) 
```

从长远来看，您可能需要进行实际检查以确保它是 Job 的子类，否则您会从 Quartz 内部得到神秘的运行时错误，而实际上它不是。

# c# - .NET 4.0 - AccessViolationException 和 WndProc

> ID：12010296
> 
> 赞同：8
> 
> 时间：2012-08-17T17:22:49.723
> 
> 标签：c#, .net, windows, exception, exception-handling

我有这个代码片段：

```
internal class MTool : NativeWindow
{
    private const int WM_LBUTTONDOWN = 0x0201;
    public event TipDeactivateEventHandler Deactivate;

    protected override void WndProc(ref System.Windows.Forms.Message m)
    {           
        if( m.Msg == WM_LBUTTONDOWN )
        {
            if( this.Deactivate != null)
            {
                this.Deactivate();
            }
        }

        base.WndProc(ref m);
    }
} 
```

当我运行我的程序时，我在该行收到一个 AccessViolationException 错误，`base.WndProc(ref m);`我不知道为什么。

显然，这是从 .NET 2.0 移植到 4.0 的，我的理论是现在可能有一种替代方法可以用来代替覆盖 WndProc。是这种情况吗？如果不是，为什么我会收到此异常？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T19:39:17.207

我通过在方法上方添加此属性来修复它：

```
[System.Runtime.ExceptionServices.HandleProcessCorruptedStateExceptions] 
```

然后用 try/catch 包围发生异常的行。我在[这里](http://dotnetslackers.com/articles/net/All-about-Corrupted-State-Exceptions-in-NET4.aspx)找到了这些信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T17:25:03.833

`WndProc`要求完全信任的节目的文档。你试过吗？例如：

```
[System.Security.Permissions.PermissionSet(System.Security.Permissions.SecurityAction.Demand, Name = "FullTrust")]
internal class MTool : NativeWindow
{
    [System.Security.Permissions.PermissionSet(System.Security.Permissions.SecurityAction.Demand, Name = "FullTrust")]
    protected override void WndProc(ref Message m)
    {
//... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T18:04:29.027

我怀疑您的代码中发生了更大的事情。根据您的代码段，我会尝试：

1.  注释掉 WndProc 覆盖，这是否仍然通过在其他地方崩溃来重现？
2.  使 WndProc 仅调用“base.WndProc(ref msg)”。你仍然得到同样的错误吗？调用堆栈是什么？堆栈中是否还有更多代码？
3.  按原样使用代码段，这仅在 WM_LBUTTONDOWN 时发生吗？当这引发该异常时，该 Deactivate 处理程序挂钩的是什么？

如果这些尝试不实用，您可能需要更新代码段以更好地解释您正在尝试做什么。

# c# - 如何启动包含引号的 URL？

> ID：12010301
> 
> 赞同：1
> 
> 时间：2012-08-17T17:23:08.583
> 
> 标签：c#, winforms

我需要从我的应用程序中启动一个包含引号的 URL，如下所示：

```
string TheURL = "http://www.google.com/search?hl=en&q=hello world \"" + "test with quotes\""; 
```

所以这将在谷歌搜索：

你好世界“用引号测试”

我使用 Process.Start 命令在用户的默认 Web 浏览器中打开它：

```
System.Diagnostics.Process.Start(TheURL); 
```

但是，如果将 Firefox 设置为我的默认浏览器，则此命令将无法执行任何操作，如果 Chrome 是我的默认浏览器，它将启动三个单独的选项卡。有谁知道如何将引号传递给 Process.Start 命令？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T17:26:14.720

编辑：评论者的建议已应用！

您使用`Uri.EscapeUriString`：http: [//msdn.microsoft.com/en-us/library/system.uri.escapeuristring.aspx](http://msdn.microsoft.com/en-us/library/system.uri.escapeuristring.aspx)

```
string search = @"Bill & Ted's Excellent Adventure";
string ActualURL = "http://www.google.com/search?hl=en&q=" + Uri.EscapeDataString(search);
System.Diagnostics.Process.Start(ActualURL); 
```

EDIT2：显然我的代码被破坏了。它不允许包含 & 字符的搜索。修复了上面的代码；现在适用于常规代码和带有 & 符号的代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T17:37:29.930

就个人而言，我喜欢使用[URI](http://msdn.microsoft.com/en-us/library/z6c2z492.aspx)。它在编码/解码方面提供了很大的灵活性，几乎不费吹灰之力。

```
 Uri myUri = new Uri("http://google.com/search?hl=en&q=\"hello world\"");
        System.Diagnostics.Process.Start(myUri.AbsoluteUri); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T17:25:58.640

这根本不是一个有效的 URL，您无法打开/启动它。

在组合之前对组件进行 URL 编码，使用`System.Web.HttpUtility.UrlEncode`.

参考：http: [//msdn.microsoft.com/en-us/library/system.web.httputility.urlencode.aspx](http://msdn.microsoft.com/en-us/library/system.web.httputility.urlencode.aspx)

# java - main 无法解析或不是字段，R.layout.main

> ID：12010302
> 
> 赞同：1
> 
> 时间：2012-08-17T17:23:10.177
> 
> 标签：java, android, android-layout

```
 package org.example.sudoku;
    import android.app.Activity;
    import android.os.Bundle;
    import org.example.sudoku.R; 

    public class Sudoku extends Activity {
    /** Called when the activity is first created. */
          @Override
          public void onCreate(Bundle savedInstanceState) {
                 super.onCreate(savedInstanceState);
                 setContentView(R.layout.main);
          }
     } 
```

我导入了 R 但它仍然显示 main 无法解析或不是字段

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T17:27:28.063

首先，删除：

```
import org.example.sudoku.R; 
```

然后，在 Eclipse 中转到 project>clean ，选择您的项目并按 OK。然后等到它完成。清洁操作会重新生成 R。

# asp.net-mvc - MVC3 应用程序的安全性

> ID：12010307
> 
> 赞同：-5
> 
> 时间：2012-08-17T17:23:27.483
> 
> 标签：asp.net-mvc, asp.net-mvc-3, security, xss

我目前正在为前端电子商务网站开发一个 Asp.Net MVC3 项目。我正在对控制器操作的安全性进行一些研究，特别是 XSS 等。有人可以指出一些相关文章和/或博客文章来帮助我保护我的应用程序吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T17:29:39.733

我发现这篇文章很好地介绍了 XSS 在理解 XSS 方面的作用。

[http://msdn.microsoft.com/en-us/magazine/hh708755.aspx](http://msdn.microsoft.com/en-us/magazine/hh708755.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T17:32:16.270

这是来自 ASP.net/MVC的[MVC 安全概述](http://www.asp.net/mvc/overview/security)

这是 Pluralsight 的免费视频，涵盖 MVC3 安全性，包括 XSS、Windows 身份验证、表单身份验证和 ASP.net 成员资格提供程序。[MVC3 安全性](http://www.pluralsight.com/training/players/PSODPlayer?author=scott-allen&name=mvc3-building-security&mode=live&clip=0&course=aspdotnet-mvc3-intro)

以下是有关该主题的一些附加链接：

[Rick Anderson 保护您的 MVC3 应用程序](http://blogs.msdn.com/b/rickandy/archive/2011/05/02/securing-your-asp-net-mvc-3-application.aspx)

[Haack 和 Hanselman 的 MVC 安全性](http://channel9.msdn.com/events/MIX/MIX10/FT05)

# regex - 如何仅在包含或不包含其他模式的行上替换模式？

> ID：12010308
> 
> 赞同：32
> 
> 时间：2012-08-17T17:23:33.217
> 
> 标签：regex, vim, replace

假设我有一个包含单词`red`and的文本`blue`。

如何仅在包含该单词的所有行`blue`中用该单词替换该单词的出现？`green``red`

同样，我如何在所有不包含单词的行中`blue`替换为？`green``red`

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-08-17T17:26:55.113

要将包含“red”的行中的“blue”替换为“green”：

```
:g/red/s/blue/green 
```

要在不包含“red”的行中进行替换：

```
:g!/red/s/blue/green 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-17T17:35:47.457

### 使用模式匹配地址

就像在 sed 中一样，您可以对要操作的地址使用模式。例如，给定以下文件：

```
foo bar
bar
foo bar baz
bar baz
quux bar 
```

您将发出如下命令：

```
:g/^foo/s/bar/foobarbaz/g 
```

### 解释

这将告诉 Vim 仅将模式匹配应用到以 "foo" 开头的每一行，并在每个匹配行中的多个匹配上执行替换。因此，即使“bar”出现在多行，通过此调用，您最终将得到以下输出：

```
foo foobarbaz
bar
foo foobarbaz baz
bar baz
quux bar 
```

请注意，仅匹配行首以“foo”开头的行，因此其他行带有“bar”的行保持不变。

# java - 在 Google Apps 帐户上查找 MX 的可靠性

> ID：12010310
> 
> 赞同：0
> 
> 时间：2012-08-17T17:23:35.650
> 
> 标签：java, email, mx-record

我的网站允许使用 Google 帐户登录，您还可以从 Gmail 或 Google Apps 邀请您的联系人。

我正在尝试确定受邀用户是否拥有谷歌帐户。到目前为止，我检查了域是否为**gmail**，但对于 google 应用程序帐户，我无法执行这种验证，因为域名可以是任何东西。

通过 dig 命令查找 MX（Mail Exchanger）并查看 MX 是否为 google 服务器是否可靠？

我可以像这样在 Java 中执行此验证

```
Record[] records = new Lookup("example.com", Type.MX).run();
    for (int i = 0; i < records.length; i++) {
        MXRecord mx = (MXRecord) records[i];
        System.out.println("Host " + mx.getTarget() + " has preference "
                + mx.getPriority());
        if (mx.getTarget().toString().toLowerCase().endsWith("google.com.")
                || mx.getTarget().toString().toLowerCase().endsWith("googlemail.com.")) {
            System.out.println("is google!!!");
        }
    } 
```

这种方法（查找域的MX）可靠吗？这个MX可以改变吗？

谢谢

**编辑**

到目前为止，我发现谷歌有以下按优先级排序的 MX

*   0 aspmx.l.google.com。
*   10 alt1.aspmx.l.google.com。
*   20 alt2.aspmx.l.google.com。
*   30 alt3.aspmx.l.google.com。
*   40 alt4.aspmx.l.google.com。
*   50 aspmx2.googlemail.com。
*   60 aspmx3.googlemail.com。
*   70 aspmx4.googlemail.com。
*   80 aspmx5.googlemail.com。

因此，从我的角度来看，可以肯定地说，如果 MX 以**google.com 结尾。**或**googlemail.com。**这是一个 Google Apps 帐户。这可靠吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T09:56:52.220

它*可能会*改变，但可能性很小，因为谷歌不会从中获得任何好处。

我不是谷歌员工，所以我不能给出保证的答案，但这是我对这种情况的理解：

1.  Google 不会要求现有客户更改他们的 MX 记录，因为这会给客户带来额外的麻烦，而对 Google 没有任何好处，而且只会降低公司选择它们的可能性。

2.  Google 总是可以开始要求新客户使用指向非 Google 顶级域的 MX 记录，但他们可能不会。谷歌似乎喜欢从 google.com 子域提供尽可能多的服务。（事实上​​，正确屏蔽某些类型的 Google 广告和 API 是一件很痛苦的`www.google.com`事情，因为它们是从用于 Google 搜索之类的同一子域提供的。）

3.  最坏的情况是，你会得到一个假阴性。即使不是“全部”，“一些”仍然比“无”好。

# c# - 数据表会话为空

> ID：12010311
> 
> 赞同：0
> 
> 时间：2012-08-17T17:23:36.860
> 
> 标签：c#, session

我已经通过会话绑定了一个数据表，并且我使用了相同的数据表来填充一个网格视图。在特定时间后，尽管会话超时保持为 60 分钟并且会话模式处于进程中，但我的会话变为空。如何将会话保留特定的时间，更长的持续时间......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T09:52:59.633

我在同一页面中清除下面的数据表，因为该会话用于获取 clear.session 变量在页面整体执行后获取进程

# f# - 创建通用列表 在 F#

> ID：12010316
> 
> 赞同：11
> 
> 时间：2012-08-17T17:23:57.083
> 
> 标签：f#

我正在尝试`List<T>`在 F# 中创建一个标准的 .NET，如下所示：

```
module Csv

open System;

type Sheet () =
  let rows = new List<Object>() 
```

但我收到以下错误：

> *该类型没有可用的构造函数`List<Object>`*
> *`C:\…\Csv.fs`：6*

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-17T17:47:07.653

作为其他人建议的更简单的替代方法，您可以使用名为`ResizeArray<T>`. `System.Collections.Generic.List<T>`这是在 F# 核心库中定义的类型别名：

```
type Sheet () = 
  let rows = new ResizeArray<Object>() 
```

在编译后的代码中，`ResizeArray<T>`将被编译为`System.Collections.Generic. List<T>`，因此如果您使用 C# 中的库，则不会有任何区别。

您不必 open `System.Collections.Generic`，这将隐藏 F#`List<T>`类型的定义（尽管这不是一个大问题），而且我认为`ResizeArray`无论如何这对于数据结构来说是一个更合适的名称。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-17T17:28:07.677

您也需要 open `System.Collections.Generic`——`List<_>`您引用的类型是 F# 的不可变列表类型（来自`Microsoft.FSharp.Collections`默认打开的命名空间），它不公开公共构造函数。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-08-17T17:28:23.450

该类是在[命名空间](http://msdn.microsoft.com/en-US/library/system.collections.generic.aspx "MSDN 参考页")中定义的[`List<T>`，](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx "MSDN 参考页")因此您需要添加：[`System.Collections.Generic`](http://msdn.microsoft.com/en-US/library/system.collections.generic.aspx "MSDN 参考页")

```
open System.Collections.Generic 
```

# javascript - 如何在sencha touch2中横向制作垂直标签栏

> ID：12010320
> 
> 赞同：0
> 
> 时间：2012-08-17T17:24:22.353
> 
> 标签：javascript, sencha-touch, sencha-touch-2

我在底部有一个水平标签栏。我需要将 bootom 水平标签栏更改为横向的垂直标签栏。我已经阅读了很多文章，但它们仅针对底部和顶部标签栏位置进行了解释。**我没有了解横向中的垂直标签栏位置。可以在sencha touch2中实现吗？**. 任何人都可以告诉我如何实现这一目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T15:03:28.220

那么在一个普通的标签面板代码中只需添加

```
tabBar: {
    docked:'left'
}, 
```

但是由于按钮看起来不正确，您将需要对 css 进行一些处理。

# css - 使用 css 选择器选择所有具有某个类但没有样式属性的 div 元素

> ID：12010323
> 
> 赞同：2
> 
> 时间：2012-08-17T17:24:37.767
> 
> 标签：css, css-selectors

我正在用[wombat](https://github.com/felipecsl/wombat/)写一个爬虫。不知何故，我正在使用 CSS 选择器，而不是 XPATH。而且我在这里有非常困难的选择——我无法使用 css 实现。

我有要从页面中获取的 div 元素：

```
<div class="do_cat_ads_box"> ... </div>
<div class="do_cat_ads_box2"> ... </div>
<div class="do_cat_ads_box" style=".."> ...</div>
<div class="do_cat_ads_box2" style=".."> ... </div> 
```

但是具有“样式”属性的元素是我不需要的垃圾（广告）。

所以我的问题是，我可以获取所有具有“do_cat_ads_box”和“do_cat_ads_box2”类的 div 元素，但避免使用具有“style”属性的 div 元素吗？

我最终得到了这样的东西，但它不起作用：

```
application 'css=div.do_cat_ads_box2, div.do_cat_ads_box,  div.do_cat_ads_box:not(@style)', :iterator do
  href 'css=div.do_cat_ads_image  a @href'
  name 'css=div.do_cat_ads_detail a'
end 
```

如果它不是使用 css 选择器的两倍，那么总是有 xpath 方式。但我对 css-selectors 方法非常感兴趣。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T17:31:16.427

获取所有定义了类的元素非常简单：

`div[class]`

现代 CSS3 兼容浏览器 ( [caniuse.com/#feat=css-sel3](http://caniuse.com/#feat=css-sel3) ) 也有一个 :not() 选择器，允许您访问所有具有类但没有样式的 div：

`div[class]:not([style])`

如果您的浏览器或 HTML 解析器仅支持 CSS2，则您必须使用 jQuery（在所有浏览器中都支持 :not()）或使用 div[class] 选择器并手动遍历结果（无论您使用哪种语言） using) 并删除具有样式属性的项目。如果它支持 CSS3，那么第二个选择器将一次性完成您想要的所有操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T17:29:54.063

[CSS 中的属性选择器](http://www.w3.org/TR/selectors/#attribute-selectors)使用`[attr]`符号。该`@attr`符号与属性定位器（以及 XPath）有关。

假设 Wombat 支持属性选择器的 CSS 语法，请尝试将您的类选择器更改`:not(@style)`并`:not([style])`重写为以下内容：

```
application 'css=div.do_cat_ads_box:not([style]), div.do_cat_ads_box2:not([style])', :iterator do
  href 'css=div.do_cat_ads_image  a @href'
  name 'css=div.do_cat_ads_detail a'
end 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-17T17:29:34.833

如果您想支持 IE9 以下的任何内容，则无法使用 CSS。你需要JS。

# android - Android 中的 AlertDialog - 空指针异常

> ID：12010324
> 
> 赞同：4
> 
> 时间：2012-08-17T17:24:49.087
> 
> 标签：android, dialog, nullpointerexception

我在网上看了很多，现在很沮丧，因为我找不到有关以下错误的信息。有人可以帮我弄清楚这是怎么回事吗？

```
08-17 13:15:47.800: W/dalvikvm(10356): threadid=1: thread exiting with uncaught exception (group=0x401f0760)
08-17 13:15:47.800: E/AndroidRuntime(10356): FATAL EXCEPTION: main
08-17 13:15:47.800: E/AndroidRuntime(10356): java.lang.NullPointerException
08-17 13:15:47.800: E/AndroidRuntime(10356):    at android.app.AlertDialog.resolveDialogTheme(AlertDialog.java:120)
08-17 13:15:47.800: E/AndroidRuntime(10356):    at android.app.AlertDialog$Builder.<init>(AlertDialog.java:337)
08-17 13:15:47.800: E/AndroidRuntime(10356):    at com.work.plan.Login$1.onClick(Login.java:64)
08-17 13:15:47.800: E/AndroidRuntime(10356):    at android.view.View.performClick(View.java:3112)
08-17 13:15:47.800: E/AndroidRuntime(10356):    at android.view.View$PerformClick.run(View.java:11956)
08-17 13:15:47.800: E/AndroidRuntime(10356):    at android.os.Handler.handleCallback(Handler.java:587)
08-17 13:15:47.800: E/AndroidRuntime(10356):    at android.os.Handler.dispatchMessage(Handler.java:92)
08-17 13:15:47.800: E/AndroidRuntime(10356):    at android.os.Looper.loop(Looper.java:132)
08-17 13:15:47.800: E/AndroidRuntime(10356):    at android.app.ActivityThread.main(ActivityThread.java:4025)
08-17 13:15:47.800: E/AndroidRuntime(10356):    at java.lang.reflect.Method.invokeNative(Native Method)
08-17 13:15:47.800: E/AndroidRuntime(10356):    at java.lang.reflect.Method.invoke(Method.java:491)
08-17 13:15:47.800: E/AndroidRuntime(10356):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
08-17 13:15:47.800: E/AndroidRuntime(10356):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
08-17 13:15:47.800: E/AndroidRuntime(10356):    at dalvik.system.NativeStart.main(Native Method) 
```

这是导致错误的类：

```
OnClickListener LoginListener = new OnClickListener(){

        public void onClick(View arg0) {
            String checkUserName = userName.getText().toString();

            Cursor mCursor = mDbHelper.fetchUserByName(checkUserName);

            if(mCursor.moveToFirst()){
                String checkDatabaseUser = mCursor.getString(mCursor.getColumnIndexOrThrow(LoginDbAdapter.KEY_NAME));
                Toast.makeText(getBaseContext(), checkDatabaseUser,Toast.LENGTH_LONG).show();
                if(checkDatabaseUser.equals(checkUserName)){
                    Intent i = new Intent();
                    i.setClass(getBaseContext(), WorkoutPlanActivity.class);
                    startActivity(i);
                }
            }else {
        **//Error happening here -->**  AlertDialog.Builder alert = new AlertDialog.Builder(m_ClassContext);
                    alert.setTitle("Error Logging in");
                    alert.setMessage("The user name is not in the system.");
                    alert.setPositiveButton("Ok",new DialogInterface.OnClickListener() {

                        public void onClick(DialogInterface dialog, int which) {
                            // TODO Auto-generated method stub
                            dialog.cancel();
                        }
                    });
                    alert.show();
            }
        }

    }; 
```

我将警报更改为此

```
AlertDialog alert = new AlertDialog.Builder(getBaseContext()).create();
                alert.setTitle("Error Logging in");
                alert.setMessage("The user name is not in the system.");
                alert.setButton("Ok",new DialogInterface.OnClickListener() {

                    public void onClick(DialogInterface dialog, int which) {
                        // TODO Auto-generated method stub
                        dialog.cancel();
                    }
                });
                alert.show(); 
```

现在我收到以下错误：

```
08-17 13:38:38.460: W/dalvikvm(10513): threadid=1: thread exiting with uncaught exception (group=0x401f0760)
08-17 13:38:38.460: E/AndroidRuntime(10513): FATAL EXCEPTION: main
08-17 13:38:38.460: E/AndroidRuntime(10513): android.view.WindowManager$BadTokenException: Unable to add window -- token null is not for an application
08-17 13:38:38.460: E/AndroidRuntime(10513):    at android.view.ViewRoot.setView(ViewRoot.java:450)
08-17 13:38:38.460: E/AndroidRuntime(10513):    at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:181)
08-17 13:38:38.460: E/AndroidRuntime(10513):    at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:95)
08-17 13:38:38.460: E/AndroidRuntime(10513):    at android.app.Dialog.show(Dialog.java:269)
08-17 13:38:38.460: E/AndroidRuntime(10513):    at com.work.plan.Login$1.onClick(Login.java:74)
08-17 13:38:38.460: E/AndroidRuntime(10513):    at android.view.View.performClick(View.java:3112)
08-17 13:38:38.460: E/AndroidRuntime(10513):    at android.view.View$PerformClick.run(View.java:11956)
08-17 13:38:38.460: E/AndroidRuntime(10513):    at android.os.Handler.handleCallback(Handler.java:587)
08-17 13:38:38.460: E/AndroidRuntime(10513):    at android.os.Handler.dispatchMessage(Handler.java:92)
08-17 13:38:38.460: E/AndroidRuntime(10513):    at android.os.Looper.loop(Looper.java:132)
08-17 13:38:38.460: E/AndroidRuntime(10513):    at android.app.ActivityThread.main(ActivityThread.java:4025)
08-17 13:38:38.460: E/AndroidRuntime(10513):    at java.lang.reflect.Method.invokeNative(Native Method)
08-17 13:38:38.460: E/AndroidRuntime(10513):    at java.lang.reflect.Method.invoke(Method.java:491)
08-17 13:38:38.460: E/AndroidRuntime(10513):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
08-17 13:38:38.460: E/AndroidRuntime(10513):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
08-17 13:38:38.460: E/AndroidRuntime(10513):    at dalvik.system.NativeStart.main(Native Method) 
```

这最终成为解决方案，谢谢大家

```
private Context m_ClassContext = this;

AlertDialog alert = new AlertDialog.Builder(m_ClassContext).create();
                alert.setTitle("Error Logging in");
                alert.setMessage("The user name is not in the system.");
                alert.setButton("Ok",new DialogInterface.OnClickListener() {

                    public void onClick(DialogInterface dialog, int which) {
                        // TODO Auto-generated method stub
                        dialog.cancel();
                    }
                });
                alert.show(); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-17T17:47:11.507

而不是使用 m_ClassContext 使用：

```
//Please change NameOfYourActivity to what it should be
AlertDialog.Builder alert = new AlertDialog.Builder(NameOfYourActivity.this); 
```

# php - 在 Apache 上上传错误

> ID：12010333
> 
> 赞同：1
> 
> 时间：2012-08-17T17:25:56.653
> 
> 标签：php, apache, file-upload

我真的不太了解PHP。但无论如何，我无法使用以下 php 上传 .csv 文件。我已经解决了与 upload_max 大小相关的属性的问题。在我的本地运行良好，但在沙箱上运行良好。是文件类型问题吗？

我只能让它打印这样的东西......这根本没有帮助。“--要加载的 CSV 文件：>>> 不是有效的文件：1”

我应该在哪里修复？如何打印完整的 PHP 错误消息，而不仅仅是我不确定它对应的值“1”？即...输出更有用的打印，例如“UPLOAD_ERR_INI_SIZE: 1”？

```
<?php
// using upload at click from http://code.google.com/p/upload-at-click/
// FileData is the name for the input file

$file_result = "";
$file = $_FILES['Filedata'];

$allowedExtensions = array("csv", "txt");
$arrayVar = explode(".", $file["name"]);
$extension = end($arrayVar);

//commented out for “Only variables should be passed by reference” error
//$extension = end(explode(".", $file["name"]));

function isAllowedExtension($fileName) {
    global $allowedExtensions;
    return in_array(end(explode(".", $fileName)), $allowedExtensions);
}

if($file["error"] > 0){
    echo "failure to upload the file >>> ". "Error code: ".$file["error"]."<br>";
}else{
    //echo " >>> CURRENT DIR: ".getcwd() . "\n";
    $workDir = getcwd();

    $dir = substr($workDir, 0, -10);
    $path = $file["name"];
    $newFileLoc = $dir.$path;

    $file_result.=
    "<br>     Upload: " . $file["name"] . "<br>" .
    "     Type: " . $file["type"] . "<br>" .
    "     Size: " . $file["size"] . "<br>" .
    "     file uploaded to: ".$newFileLoc."<br>";

    // txt - text/plain
    // rtf - application/msword
    // dat/obj - application/octet-stream
    // csv - application/vnd.ms-excel
    // maximum 200 MB file - 200,000,000 k

    if (    ($file["type"] == "application/vnd.ms-excel" || $file["type"] == "text/plain")
            && isAllowedExtension($file["name"])
            && ($file["size"] < 200000000)
        )
        {   
            move_uploaded_file($file["tmp_name"], $newFileLoc);
            //echo $file_result.=" >>> File uploaded successfull!!";
            echo "|".$path;//"filePath : " . $newFileLoc;

        }else{
            echo " >>> NOT a file valid: ". isAllowedExtension($file["name"]);
        }       
}
?> 
```

这是其他用户为正确捕获错误而添加的行。请让我知道这是否正确对不起我根本不了解 PHP。无论如何，打印的错误只是“--要加载的 CSV 文件：>>> 不是有效的文件：1”

```
<?php
// using upload at click from http://code.google.com/p/upload-at-click/
// FileData is the name for the input file

ini_set('display_errors', 1); error_reporting(E_ALL);

$file_result = "";
$file = $_FILES['Filedata'];

$allowedExtensions = array("csv", "txt");
$arrayVar = explode(".", $file["name"]);
$extension = end($arrayVar); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T17:30:55.730

有问题的块如下：

```
if( ( $file["type"] == "application/vnd.ms-excel" || $file["type"] == "text/plain" ) && 
    isAllowedExtension($file["name"]) && 
    ( $file["size"] < 200000000 ) )
{   
    move_uploaded_file($file["tmp_name"], $newFileLoc);

    //echo $file_result.=" >>> File uploaded successfull!!";

    echo "|".$path;//"filePath : " . $newFileLoc;
}
else
{
    echo " >>> NOT a file valid: ". isAllowedExtension($file["name"]);
} 
```

请注意，您正在点击 else `echo`，而“1”是因为`isAllowedExtension()`正在返回一个布尔值，这是真的，当您打印它时，它表示为“1”（而不是“0”）。

你在那里的条件之一`if`是失败的。我会把它们分开一点，看看哪个特别好。

**编辑**例如：

```
if( ( $file["type"] == "application/vnd.ms-excel" || $file["type"] == "text/plain" ) )
{
    if( isAllowedExtension($file["name"]) )
    {
        if( $file["size"] < 200000000 )
        {
            move_uploaded_file($file["tmp_name"], $newFileLoc);

            echo "|".$path;//"filePath : " . $newFileLoc;
        }
        else
        {
            echo "Invalid file size: " . $file["size"] . "\n";   
        }
    }
    else
    {
        echo "Invalid extension: " . $file["name"] . "\n";   
    }    
}
else
{
    echo "Invalid type: " . $file["type"] . "\n";
} 
```

或者，你可以`print_r()` `$file`看看它的价值是什么。

# fullcalendar - fullcalendar 在agendaDay 上未显示与agendaWeek 相同的事件

> ID：12010334
> 
> 赞同：2
> 
> 时间：2012-08-17T17:25:56.757
> 
> 标签：fullcalendar

我对 javascript 有非常基本的了解，并且在我的网站上有一个简单的 FullCalendar 设置。我正在为我的主站点使用议程周，但我想为我的移动站点使用议程日，甚至是基本日，但是当我切换到议程日或基本日时，它会在一天结束时切断事件，似乎已经过了下午 5 点。（这里是移动站点与主站点的实现：[http](http://www.absolutemma.com/schedule.php) ://www.absolutemma.com/schedule.php和[http://www.absolutemma.com/mobile/schedule.html](http://www.absolutemma.com/mobile/schedule.html)）和我正在使用的 javascript手机页面：

```
<script type='text/javascript'>
        $(document).ready(function() {

            // page is now ready, initialize the calendar...

            $('#calendar').fullCalendar({
                // put your options and callbacks here
                header: {
                },
                titleFormat: {
                    day: 'M/d/yyyy'   //whatever date format you want here
                },
            defaultView: 'agendaWeek',
            events: 'https://www.google.com/calendar/feeds/absolutemma%40gmail.com/public/basic',
            currentTimezone:'America/Denver',
            height: 750,
            minTime: 10,
            maxTime: 24
            })
        });
    </script> 
```

我是否错过了一个回调来告诉议程日在特定时间后显示事件？不小心在某个地方说了一句话？

# actionscript-3 - 使用 Flixel 和 photonstorm 时出错 - 我使用的是 Flash Professional 而不是 Flash Builder 或类似产品

> ID：12010338
> 
> 赞同：0
> 
> 时间：2012-08-17T17:26:09.563
> 
> 标签：actionscript-3, collision-detection, flixel

我下载了 flixel 和 photonstorm 以使其完美碰撞（FlxCollision）；在我的根文件夹中，我有 flixel org 文件夹，在 org/plugin 中，我按照他们网站上的说明提取了 photostorm；我在这里导入它：

```
import org.flixel.*;
import org.flixel.plugin.photonstorm.*; 
```

问题是，当我调用将检测碰撞的函数（准确地说是 if 语句）时，我收到此错误：

```
if (FlxCollision.pixelPerfectCheck (ball, goalkeeper)){
      ball.y=portero.x-ball.height- ball.width;
     trace ("Tomela");

}

Scene 1, Layer 'action', Frame 1, Line 72   1067: Implicit coercion of a value of type flash.display:MovieClip to an unrelated type org.flixel:FlxSprite. 
```

如果您能指导我一点，我将非常感激，我正在使用 Flash Professional CS5。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T17:32:55.570

FlxCollision.pixelPerfectCheck 将 FlxSprite 对象作为参数。您将 MovieClips 作为您的参数（一个或两个）传递，因此会出现错误。

要么将您的对象更改为 FlxSprites，要么使用适用于 MovieClips 的像素完美碰撞库。

# postgresql-9.1 - 安装plpython时Postgres数据库崩溃

> ID：12010344
> 
> 赞同：5
> 
> 时间：2012-08-17T17:26:33.153
> 
> 标签：postgresql-9.1, plpython

我正在尝试在我的 Postgres 9.1 中安装 plpython，但它使服务器崩溃：

```
postgres@dataserver1:~> /opt/postgres/9.1/bin/psql -d mydb
psql.bin (9.1.4)
Type "help" for help.

mydb=# create language 'plpythonu';
The connection to the server was lost. Attempting reset: Failed. 
```

我安装了 python 2.6.8 并且处理程序在系统中声明是正确的：

```
select tmplname, tmplhandler, tmpllibrary from pg_pltemplate where tmplname like 'plpython%'

"plpythonu"  | "plpython_call_handler"  | "$libdir/plpython2"
"plpython2u" | "plpython2_call_handler" | "$libdir/plpython2" 
```

并且处理程序安装在 $libdir 中：

```
postgres@dataserver1:~> ll /opt/postgres/9.1/lib/postgresql/plpython*
-rwxr-xr-x 1 root root 6686333 Aug 17 14:27 /opt/postgres/9.1/lib/postgresql/plpython2.so 
```

对此的任何线索将不胜感激

**编辑**

我尝试过创建扩展 plpythonu、plpython2u 和 plpython3u，但它们都使服务器崩溃。

在文档中阅读了一些内容，我发现 \dx 命令列出了已安装的扩展：

```
mydb=# \dx
                 List of installed extensions
  Name   | Version |   Schema   |         Description
---------+---------+------------+------------------------------
 plpgsql | 1.0     | pg_catalog | PL/pgSQL procedural language
(1 row) 
```

所以我猜唯一安装的扩展是plpgsql。

```
mydb=# select name, installed_version from pg_available_extensions where name like '%python%';
    name    | installed_version
------------+-------------------
 plpython2u |
 plpython3u |
 plpythonu  |
(3 rows) 
```

和我的扩展目录：

```
postgres@dataserver1:/opt/postgres/9.1/share/postgresql/extension> ll *python*
-rw-r--r-- 1 root root 351 Aug 20 17:32 plpython2u--1.0.sql
-rw-r--r-- 1 root root 196 Aug 20 17:32 plpython2u.control
-rw-r--r-- 1 root root 402 Aug 20 17:32 plpython2u--unpackaged--1.0.sql
-rw-r--r-- 1 root root 351 Jun  1 02:54 plpython3u--1.0.sql
-rw-r--r-- 1 root root 196 Jun  1 02:54 plpython3u.control
-rw-r--r-- 1 root root 402 Jun  1 02:54 plpython3u--unpackaged--1.0.sql
-rw-r--r-- 1 root root 347 Aug 20 17:32 plpythonu--1.0.sql
-rw-r--r-- 1 root root 194 Aug 20 17:32 plpythonu.control
-rw-r--r-- 1 root root 393 Aug 20 17:32 plpythonu--unpackaged--1.0.sql 
```

**编辑**

我在 Linux SuSE 上运行，但明白了你的意思。

在我的 postgres 安装中，pl-lang 库位于 .../postgres/9.1/lib/postgres。里面有 plpython2.so 和 plpython3.so

检查这些文件的动态链接库：

```
alfonso@dataserver1:/opt/postgres/9.1/lib/postgresql> sudo ldd plpython2.so
        linux-vdso.so.1 =>  (0x00007fff5e945000)
        libpthread.so.0 => /lib64/libpthread.so.0 (0x00007f64064df000)
        libdl.so.2 => /lib64/libdl.so.2 (0x00007f64062da000)
        libutil.so.1 => /lib64/libutil.so.1 (0x00007f64060d7000)
        libm.so.6 => /lib64/libm.so.6 (0x00007f6405e5e000)
        libc.so.6 => /lib64/libc.so.6 (0x00007f6405ae9000)
        /lib64/ld-linux-x86-64.so.2 (0x00007f6406b2e000) 
```

没有引用任何 python 库，也没有引用 plpython3.so

但我已经安装了 python 2.6 和 python 3.2。请注意，我希望安装 python 2 的扩展。

是的，CREATE EXTENSION 仍然崩溃：

```
mydb=# create extension plpython2u;
The connection to the server was lost. Attempting reset: Failed.
!> \q 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-17T18:02:39.690

注意：从 PostgreSQL 9.1 开始，大多数过程语言已被制成“扩展”，因此应该使用**CREATE EXTENSION**而不是 CREATE LANGUAGE 安装。直接使用 CREATE LANGUAGE 现在应该仅限于扩展安装脚本。如果您的数据库中有“裸”语言，可能是升级的结果，您可以使用 CREATE EXTENSION langname FROM unpackaged 将其转换为扩展。

在特定数据库中安装 PL/Python：

从 shell 命令行使用**createlang plpythonu dbname**

警告

createlang 已弃用，可能会在未来的 PostgreSQL 版本中删除。建议直接使用 CREATE EXTENSION 命令。

[http://www.postgresql.org/docs/9.1/static/plpython.html](http://www.postgresql.org/docs/9.1/static/plpython.html)

**编辑**

一步步

下载 postgresql-9.1.5-1-windows.exe 并安装。

首先让我们看看已经存在什么。

```
mydb=# SELECT * FROM pg_available_extensions
mydb-# WHERE name LIKE '%python%' ORDER BY name;
    name    | default_version | installed_version |                  comment

------------+-----------------+-------------------+-------------------------------------------
 plpython2u | 1.0             |                   | PL/Python2U untrusted procedural language
 plpython3u | 1.0             |                   | PL/Python3U untrusted procedural language
 plpythonu  | 1.0             |                   | PL/PythonU untrusted procedural language
(3 Zeilen) 
```

**什么都没安装！！**

查看 lib 文件夹，只有一个。

....\PostgreSQL\9.1\lib\plpython3.dll。

所以我必须尝试安装plpython3u。

```
mydb=# CREATE EXTENSION plpython3u;
ERROR:  unknown error »$libdir/plpython3.dll« 
```

**plpython3.dll 一定有问题。**

查看**plpython3.dll**有对**python32.dll**的引用。

```
......

Export Table:
  Name:                          plpython3.dll
  Time Date Stamp:               0x502B366A (15.08.2012 06:40:58)
  Version:                       0.00
  Ordinal Base:                  1
  Number of Functions:           9
  Number of Names:               9

  Ordinal   Entry Point   Name
        1   0x00001005    Pg_magic_func
        2   0x00001019    PyInit_plpy
        3   0x0000101E    _PG_init
        4   0x00001023    pg_finfo_plpython3_call_handler
        5   0x0000100F    pg_finfo_plpython3_inline_handler
        6   0x0000100A    pg_finfo_plpython3_validator
        7   0x00001028    plpython3_call_handler
        8   0x00001014    plpython3_inline_handler
        9   0x0000102D    plpython3_validator

Import Table:
  libintl-8.dll
    Import Adress Table:                0x00016628
    Import Name Table:                  0x0001617C
    Time Date Stamp:                    0x00000000
    Index of first forwarder reference: 0x00000000

    0x000169E4        28   libintl_dngettext
    0x000169D0        27   libintl_dgettext

  **python32.dll**
    Import Adress Table:                0x0001686C
    Import Name Table:                  0x000163C0
    Time Date Stamp:                    0x00000000
    Index of first forwarder reference: 0x00000000
  .... 
```

*   我下载并安装了 python-3.2.3.msi。我发现只有**python3.dll**
*   将 python3.dll 复制到 ....\PostgreSQL\9.1\lib 并将其重命名为 **python32.dll**

**回到我输入的 SQL Shell**

```
mydb=# CREATE EXTENSION plpython3u FROM unpackaged; 
```

我收到了消息

```
CREATE EXTENSION 
```

**寻找结果：**

```
mydb=# SELECT * FROM pg_available_extensions
mydb-# WHERE name LIKE '%python%' ORDER BY name; 
```

**那里是****plpython3u**的installed_version 1.0

 **我也可以在 PgAdmin III 中看到它

希望有帮助！

![PostgreSQL 9.1](../Images/8b7c1d60dcc5b2fea42bbb85683a69e1.png)

**编辑：**

手动试试

第1步

> mydb=# 创建程序语言 plpython2u;

第2步

> mydb=# COMMENT ON PROCEDURAL LANGUAGE plpython2u IS 'PL/Python2U untrusted procedural language';

第 3 步

> mydb=# CREATE EXTENSION plpython2u FROM unpackaged;

使用 Python 2.6.5 测试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-18T15:35:55.577

在 WIN 8.1 64 位上安装了带有 Python 2.7 的 Postgres 9.0。仅供参考：这是我设法解决错误的方法：运行 CREATE LANGUAGE plpythonu 时无法加载库“C:/Program Files/PostgreSQL/9.0/lib/plpython.dll”；在 pgAdmin 中

*   从 EnterpriseDB 安装 Postgresql 9.0 后，路径 C:\Program Files\PostgreSQL\9.0\lib 应包含文件“plppython.dll”
*   用依赖walker之类的程序检查这个文件，发现它缺少一个python26.dll
*   如果您查看 C:\windows\system32 目录，您应该找到一个文件 python27.dll
*   创建 python27.dll -> python26.dll 的副本
*   确保 C:\windows\system32 在 PATH 变量中
*   运行 CREATE LANGUAGE plpythonu; 我是 pgAdmin**

# php - 将不熟悉的数据格式转换为数组/对象/JSON

> ID：12010345
> 
> 赞同：1
> 
> 时间：2012-08-17T17:26:33.193
> 
> 标签：php, solr, solarium

我正在使用一个库（[Solarium](http://www.solarium-project.org/) for Solr），它返回的结果是我不熟悉的格式。下面的代码块显示了库函数返回`print_r($resultset)`的结果的输出。`$resultset`

我希望它采用一种格式（也许是数组？），我进一步按摩数据，并将其转换为最终格式 JSON。我怎样才能做到这一点？`json_encode($resultset)`只是给了我一个空的 JSON 字符串`{}`。

**原始格式的数据**

```
Solarium_Result_Select Object
(
    [_numfound:protected] => 
    [_documents:protected] => 
    [_components:protected] => 
    [_status:protected] => 
    [_queryTime:protected] => 
    [_parsed:protected] => 
    [_response:protected] => Solarium_Client_Response Object
        (
            [_headers:protected] => Array
                (
                    [0] => HTTP/1.1 200 OK
                    [1] => Server: Apache-Coyote/1.1
                    [2] => Content-Type: text/plain;charset=UTF-8
                    [3] => Date: Fri, 17 Aug 2012 17:21:14 GMT
                    [4] => Connection: close
                )

            [_body:protected] => {"responseHeader":{"status":0,"QTime":0,"params":{"fl":"*,score","start":"0","q":"*:*","wt":"json","rows":"2"}},"response":{"numFound":232,"start":0,"maxScore":1.0,"docs":[{"id":"1045","title":"White dress","description":"Ohhh its white omg fav color","score":1.0},{"id":"1046","title":"Darker tones","description":"Man this looks scary, the ring? Ultra fast transfer speeds: Armor A80's outstanding read/write speed is coupled with the latest USB 3.0 interface and is backwards compatible with USB 2.0\. The USB 3.0 interface features a 5 Gbps/sec bandwidth which is 10x the bandwidth of a USB 2.0 interface. It saves users precious time backing up to and from the hard drive when transferring mass data files. Water, pressure, vibration & dust proof.","score":1.0}]}}
            [_statusCode:protected] => 200
            [_statusMessage:protected] => OK
        )

    [_data:protected] => 
    [_query:protected] => Solarium_Query_Select Object
        (
            [_options:protected] => Array
                (
                    [handler] => select
                    [resultclass] => Solarium_Result_Select
                    [documentclass] => Solarium_Document_ReadOnly
                    [query] => *:*
                    [start] => 0
                    [rows] => 2
                    [fields] => *,score
                )

            [_componentTypes:protected] => Array
                (
                    [facetset] => Array
                        (
                            [component] => Solarium_Query_Select_Component_FacetSet
                            [requestbuilder] => Solarium_Client_RequestBuilder_Select_Component_FacetSet
                            [responseparser] => Solarium_Client_ResponseParser_Select_Component_FacetSet
                        )

                    [dismax] => Array
                        (
                            [component] => Solarium_Query_Select_Component_DisMax
                            [requestbuilder] => Solarium_Client_RequestBuilder_Select_Component_DisMax
                            [responseparser] => 
                        )

                    [morelikethis] => Array
                        (
                            [component] => Solarium_Query_Select_Component_MoreLikeThis
                            [requestbuilder] => Solarium_Client_RequestBuilder_Select_Component_MoreLikeThis
                            [responseparser] => Solarium_Client_ResponseParser_Select_Component_MoreLikeThis
                        )

                    [highlighting] => Array
                        (
                            [component] => Solarium_Query_Select_Component_Highlighting
                            [requestbuilder] => Solarium_Client_RequestBuilder_Select_Component_Highlighting
                            [responseparser] => Solarium_Client_ResponseParser_Select_Component_Highlighting
                        )

                    [grouping] => Array
                        (
                            [component] => Solarium_Query_Select_Component_Grouping
                            [requestbuilder] => Solarium_Client_RequestBuilder_Select_Component_Grouping
                            [responseparser] => Solarium_Client_ResponseParser_Select_Component_Grouping
                        )

                    [spellcheck] => Array
                        (
                            [component] => Solarium_Query_Select_Component_Spellcheck
                            [requestbuilder] => Solarium_Client_RequestBuilder_Select_Component_Spellcheck
                            [responseparser] => Solarium_Client_ResponseParser_Select_Component_Spellcheck
                        )

                    [distributedsearch] => Array
                        (
                            [component] => Solarium_Query_Select_Component_DistributedSearch
                            [requestbuilder] => Solarium_Client_RequestBuilder_Select_Component_DistributedSearch
                            [responseparser] => 
                        )

                    [stats] => Array
                        (
                            [component] => Solarium_Query_Select_Component_Stats
                            [requestbuilder] => Solarium_Client_RequestBuilder_Select_Component_Stats
                            [responseparser] => Solarium_Client_ResponseParser_Select_Component_Stats
                        )

                    [debug] => Array
                        (
                            [component] => Solarium_Query_Select_Component_Debug
                            [requestbuilder] => Solarium_Client_RequestBuilder_Select_Component_Debug
                            [responseparser] => Solarium_Client_ResponseParser_Select_Component_Debug
                        )

                )

            [_fields:protected] => Array
                (
                    [*] => 1
                    [score] => 1
                )

            [_sorts:protected] => Array
                (
                )

            [_filterQueries:protected] => Array
                (
                )

            [_components:protected] => Array
                (
                )

            [_helper:protected] => 
            [_params:protected] => Array
                (
                )

        )

    [_client:protected] => Solarium_Client Object
        (
            [_options:protected] => Array
                (
                    [adapter] => Solarium_Client_Adapter_Http
                    [adapteroptions] => Array
                        (
                            [host] => 127.0.0.1
                            [port] => 8080
                            [path] => /solr/
                        )

                )

            [_queryTypes:protected] => Array
                (
                    [select] => Array
                        (
                            [query] => Solarium_Query_Select
                            [requestbuilder] => Solarium_Client_RequestBuilder_Select
                            [responseparser] => Solarium_Client_ResponseParser_Select
                        )

                    [update] => Array
                        (
                            [query] => Solarium_Query_Update
                            [requestbuilder] => Solarium_Client_RequestBuilder_Update
                            [responseparser] => Solarium_Client_ResponseParser_Update
                        )

                    [ping] => Array
                        (
                            [query] => Solarium_Query_Ping
                            [requestbuilder] => Solarium_Client_RequestBuilder_Ping
                            [responseparser] => Solarium_Client_ResponseParser_Ping
                        )

                    [mlt] => Array
                        (
                            [query] => Solarium_Query_MoreLikeThis
                            [requestbuilder] => Solarium_Client_RequestBuilder_MoreLikeThis
                            [responseparser] => Solarium_Client_ResponseParser_MoreLikeThis
                        )

                    [analysis-document] => Array
                        (
                            [query] => Solarium_Query_Analysis_Document
                            [requestbuilder] => Solarium_Client_RequestBuilder_Analysis_Document
                            [responseparser] => Solarium_Client_ResponseParser_Analysis_Document
                        )

                    [analysis-field] => Array
                        (
                            [query] => Solarium_Query_Analysis_Field
                            [requestbuilder] => Solarium_Client_RequestBuilder_Analysis_Field
                            [responseparser] => Solarium_Client_ResponseParser_Analysis_Field
                        )

                    [terms] => Array
                        (
                            [query] => Solarium_Query_Terms
                            [requestbuilder] => Solarium_Client_RequestBuilder_Terms
                            [responseparser] => Solarium_Client_ResponseParser_Terms
                        )

                    [suggester] => Array
                        (
                            [query] => Solarium_Query_Suggester
                            [requestbuilder] => Solarium_Client_RequestBuilder_Suggester
                            [responseparser] => Solarium_Client_ResponseParser_Suggester
                        )

                )

            [_pluginTypes:protected] => Array
                (
                    [loadbalancer] => Solarium_Plugin_Loadbalancer
                    [postbigrequest] => Solarium_Plugin_PostBigRequest
                    [customizerequest] => Solarium_Plugin_CustomizeRequest
                    [parallelexecution] => Solarium_Plugin_ParallelExecution
                    [bufferedadd] => Solarium_Plugin_BufferedAdd
                    [prefetchiterator] => Solarium_Plugin_PrefetchIterator
                )

            [_pluginInstances:protected] => Array
                (
                )

            [_adapter:protected] => Solarium_Client_Adapter_Http Object
                (
                    [_options:protected] => Array
                        (
                            [host] => 127.0.0.1
                            [port] => 8080
                            [path] => /solr
                            [core] => 
                            [timeout] => 5
                        )

                )

            [_requestBuilders:protected] => 
        )

) 
```

**PHP 代码**

```
public function action_search() {

    Solarium_Autoloader::register();
    $client = new Solarium_Client();

    $query = $client
                ->createSelect()
                ->setRows(2);

    $resultset = $client->select($query);

    echo "<pre>";
    print_r($resultset);

    $result = json_encode($resultset);
    echo $result; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T17:58:50.933

基于[Solarium docs](http://wiki.solarium-project.org/index.php/V2%3aResult_of_a_select_query)，我会尝试这样的事情：

```
/*...*/
$resultset = $client->select($query);

$results = array();
foreach($resultset as $document) {
    $item = array();
    foreach($document as $field => $value) {
        $item[$field] = $value;
    }
    $results[] = $item;
}
echo json_encode($results); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-05T06:27:45.743

```
$resultset = $client->select($query);

$result_array = json_decode($resultset->getResponse()->getBody())->response->docs;
$result = json_encode($result_array);
echo $result; 
```

结果将是

```
[{"id":"1045","title":"White dress","description":"Ohhh its white omg fav color","score":1.0},{"id":"1046","title":"Darker tones","description":"Man this looks scary, the ring? Ultra fast transfer speeds: Armor A80's outstanding read/write speed is coupled with the latest USB 3.0 interface and is backwards compatible with USB 2.0\. The USB 3.0 interface features a 5 Gbps/sec bandwidth which is 10x the bandwidth of a USB 2.0 interface. It saves users precious time backing up to and from the hard drive when transferring mass data files. Water, pressure, vibration & dust proof.","score":1.0}] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-21T09:29:02.213

响应对象有很多字段和函数，你通常想要返回响应，

```
echo json_encode($resultset->getData()); 
```

# c# - 正则表达式在 C# 中拆分字符串

> ID：12010347
> 
> 赞同：0
> 
> 时间：2012-08-17T17:26:36.813
> 
> 标签：c#, regex, c#-4.0

我必须在 C# 中将一个字符串拆分为两个字符串。出现在第一个空格之前的任何文本作为一个，而在另一个空格之后出现的任何文本都作为一个。

例如 415 华尔街

415 作为一根弦，Wall St 作为另一根弦。

14-15 百老汇街

14-15 作为一根弦，Broadway St 作为另一根弦。

C#中有正则表达式吗？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T17:28:23.937

String 有一个 Split 方法，你不需要正则表达式。这个问题之前已经问过[我如何使用 C# 只拆分一次字符串](https://stackoverflow.com/questions/1000831/how-can-i-split-the-string-only-once-using-c-sharp)

所以在你的情况下，这看起来像

```
String[] parts = s.Split(new char[] { ' ' }, 2);
String before = parts[0];
String after = parts[1]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T17:30:31.113

```
string s="14-15 Broadway St";

Regex r=new Regex(@"(^.*?)\s+(.*?$)");

Match m=r.Match(s);
Console.WriteLine(m.Groups[1].Value);//14-15
Console.WriteLine(m.Groups[2].Value);//Broadway St 
```

# ios - 使用 oaut 创建一个 ios twitter 客户端

> ID：12010354
> 
> 赞同：-1
> 
> 时间：2012-08-17T17:26:54.433
> 
> 标签：ios, oauth, twitter

我需要使用 oauth 为 ios 创建一个 twitter 客户端。我不能将 iphone sdk 用于 twitter。一些可以帮助我使用 ios 和 oauth 的链接或教程？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T17:29:42.607

你可以试试这个教程： http: [//mobile.tutsplus.com/tutorials/iphone/twitter-api-iphone/](http://mobile.tutsplus.com/tutorials/iphone/twitter-api-iphone/) 这是谷歌的第一个结果，所以在你提问之前请使用谷歌/雅虎/必应。:)

更多： http: [//www.icodeblog.com/2010/09/16/dealing-with-the-twitter-oauth-apocalypse/](http://www.icodeblog.com/2010/09/16/dealing-with-the-twitter-oauth-apocalypse/)

或者在这里你可以找到一个框架：[https ://github.com/bengottlieb/Twitter-OAuth-iPhone](https://github.com/bengottlieb/Twitter-OAuth-iPhone)

# javascript - iOS Safari：touchstart 不会在动态插入的元素上触发

> ID：12010357
> 
> 赞同：2
> 
> 时间：2012-08-17T17:27:11.557
> 
> 标签：javascript, addeventlistener, iphone-web-app, touchstart

我正在为 iOS Safari 开发一个网络应用程序。我有一个搜索输入，下面有一个自动完成/建议列表。使用 javascript，我将建议添加到列表中：

```
document.getElementById('selector_autocomplete').innerHTML
 += '<span ontouchstart="selector_select(' + i + ');">' + name + '</span><br />'; 
```

现在的问题是`ontouchstart`触摸元素时似乎没有被触发。

我已经用`console.log();`等对其进行了测试。但没有任何反应。

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-17T09:51:22.000

该`ontouchstart=""`属性在插入 DOM 时不会向节点添加侦听器。仅在页面第一次加载时。

`addEventListener('touchstart', ...);`插入后在项目上使用是这里的解决方案。

# cocoa - 如何绑定到 NSArrayController 的排列对象

> ID：12010360
> 
> 赞同：3
> 
> 时间：2012-08-17T17:27:26.770
> 
> 标签：cocoa, binding, key-value-observing, nsarraycontroller, kvc

我想以编程方式将自定义类 ( `MyClass`) 数组绑定到数组控制器 ( `NSArrayController`)，并将其内容绑定到另一个数组 ( `modelArray`)。`MyClass`显示数组的内容，如`NSTableView`.

我的问题是：如何以调用可变数组的方法的方式创建此绑定，即方法

```
-(void) insertObject:(id)object inContentAtIndex:(NSUInteger)index
-(void) removeObjectFromContent:(id) object 
```

（1）如果我这样绑定，上面的方法都被调用了但是控制器的内容不再绑定到`modelArray`（明显）

```
[myArrayController bind:@"contentArray" toObject:myClassInstance withKeyPath:@"content" options:nil]; 
```

(2) 如果我以这些方式绑定，则只调用`setContent:`and`content`方法而不调用可变方法。我也尝试删除这些方法（`setContent:`和`content`），但它只会引发异常`setValue:forUndefinedKey:`

```
[myClassInstance bind:@"content" toObject:myArrayController withKeyPath:@"arrangedObjects" options:nil]; 
```

或者

```
[myClassInstance bind:@"content" toObject:myArrayController withKeyPath:@"content" options:nil]; 
```

我不相信每次在绑定到数组控制器时添加一行时都会重新设置整个表的数组，我希望有相同的绑定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-18T12:21:28.297

您遇到的问题与键值编码如何处理数组值有关。KVC 没有具体类型的概念，所以当你通过 KVC 访问一个数组值时，它无法知道返回的数组是可变的。它必须假设最坏的情况（即数组是不可变的）。它通常处理这个问题的方式是使用一个代理对象，它的*作用*类似于 NSMutableArray，但在幕后它需要你假定的不可变数组，制作一个可变副本，改变副本，然后使用 setter 将整个事情推回。（这是您所看到的行为——整个数组被替换而不是被原地变异。）

控制此功能的方法是`- (NSMutableArray *)mutableArrayValueForKey:(NSString *)key`。该方法可能会发生很多事情，我将在下面粘贴此方法的标题注释以提供完整的故事，但长话短说，如果您希望 NSArrayController 改变您的可变数组，最简单的方法是将此覆盖添加到出售`modelArray`属性的类中：

```
- (NSMutableArray *)mutableArrayValueForKey:(NSString *)key
{
    if ([@"modelArray" isEqual: key])
    {
        // We know this is mutable, even if KVC doesn't!
        return self.modelArray;
    }
    return [super mutableArrayValueForKey:key];
} 
```

更长的故事是，KVC 在试图弄清楚如何处理集合突变时会寻找一系列的东西。它们在 中进行了详细解释`NSKeyValueCoding.h`。这些是 的评论`mutableArrayValueForKey:`。

> 给定一个标识*有序*对多关系的键，返回一个可变数组，该数组提供对相关对象的读写访问。添加到可变数组的对象将与接收者相关，而从可变数组中删除的对象将变得无关。
> 
> 此方法的默认实现识别与 -valueForKey:'s 相同的简单访问器方法和数组访问器方法，并遵循相同的直接实例变量访问策略，但始终返回可变集合代理对象，而不是 -valueForKey: 的不可变集合：会回来的。它也是：
> 
> 1.  在接收者的类中搜索名称与模式匹配的方法`-insertObject:in<Key>AtIndex:`和 `-removeObjectFrom<Key>AtIndex:`（对应于 NSMutableArray 类定义的两个最原始的方法），以及（在 Mac OS 10.4 中引入）`-insert<Key>:atIndexes:`以及和 `-remove<Key>AtIndexes:`（对应于`-[NSMutableArray insertObjects:atIndexes:]`和`-[NSMutableArray removeObjectsAtIndexes:]`）。如果找到至少一种插入方法和至少一种删除方法，则发送到集合代理对象的每个 NSMutableArray 消息将导致 `-insertObject:in<Key>AtIndex:`发送到的原始接收者的消息`-removeObjectFrom<Key>AtIndex:`的某种组合。如果接收者的类还实现了一个名称与模式匹配的可选方法，或者（在 Mac OS 10.4 中引入）`-insert<Key>:atIndexes:``-remove<Key>AtIndexes:``-mutableArrayValueForKey:``-replaceObjectIn<Key>AtIndex:withObject:``-replace<Key>AtIndexes:with<Key>:`将在适当时使用该方法以获得最佳性能。
> 2.  否则（未找到数组变异方法集），在接收者的类中搜索名称与模式匹配的访问器方法`-set<Key>:`。如果找到这样的方法，则发送到集合代理对象的每个 NSMutableArray 消息都会导致将 `-set<Key>:`消息发送到`-mutableArrayValueForKey:`.
> 3.  否则（没有找到一组数组变异方法或简单的访问器方法），如果接收者的类的 `+accessInstanceVariablesDirectly`方法返回 YES，则在接收者的类中搜索名称与模式匹配的实例变量，`_<key>`或者`<key>`按该顺序。如果找到这样的实例变量，发送到集合代理对象的每个 NSMutableArray 消息将被转发到实例变量的值，因此它通常必须是 NSMutableArray 的实例或 NSMutableArray 的子类。
> 4.  否则（没有找到一组数组变异方法、简单访问器方法或实例变量），无论如何都会返回一个可变集合代理对象。每个发送到集合代理对象的 NSMutableArray 消息都会导致将`-setValue:forUndefinedKey:` 消息发送到 `-mutableArrayValueForKey:`. 的默认实现`-setValue:forUndefinedKey:`引发 NSUndefinedKeyException，但您可以在应用程序中覆盖它。

# java - && 和 || 的优先级 java中的运算符

> ID：12010362
> 
> 赞同：0
> 
> 时间：2012-08-17T17:27:28.757
> 
> 标签：java, operator-keyword

```
 Postfix operators [] . (parameters) expression++ expression--
Unary prefix operators ++expression --expression +expression -expression ~ !
Unary prefix creation and cast new (type)
Multiplicative * / %
Additive + -
Shift << >> >>>
Relational < <= > >= instanceof
Equality == !=
Bitwise/logical AND &
Bitwise/logical XOR ^
Bitwise/logical OR |
Conditional AND &&    //here
Conditional OR ||     //here   
Conditional ?:
Assignment = += -= *= /= %= <<= >>= >>>= &= ^= |= 
```

这是在 kalid A Mughal & Rasmussen 书中发表的运算符优先级

根据本书`&&`的优先级高于`||`但以下代码

```
 if(true&&false||true)
{
    System.out.println("yes");
} 
```

此代码打印`"yes"`。表示首先执行`"||"`

这本书错了吗？或者我的解释错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T17:30:27.210

我猜你的解释是错误的。由于`&&`具有更高的优先级，因此评估顺序为

```
(true && false) || true 
```

这是

```
false || true -> true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T17:30:28.660

你的解释是关闭的。如果我们遵循这本书，您的 if 语句可以重写并保持相同的含义

```
if( (true && false) || true) 
```

现在很容易看出这确实评估为真，因此打印出“是”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T17:30:30.207

1.  `true && false`=>`false`
2.  `false || true`=>`true`

因此没有问题，因为 and 语句首先执行，然后是 or 语句。代码的预期结果是`yes`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T17:30:38.213

你的解释是错误的

`true && false -> false`

`false || true -> true`

预计打印“​​是”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T17:31:23.540

`if(true && false || true)`==> `if(false || true)`==> `if(true)`。

* * *

**和真值表：**

```
 F & F = F
 T & F = F
 F & T = F
 T & T = T 
```

**或真值表：**

```
 F | F = F
 T | F = T
 F | T = T
 T | T = T 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-17T18:04:14.773

&& 首先被评估......但是“或”的一侧|| 为真，因此整个表达式的计算结果为“真”

```
if(true&&false||true)
{
    System.out.println("yes");
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-17T17:36:32.260

仔细看，因为这些是**短路**AND 和 OR

所以第一部分：

```
 true&&false // evaluates to false 
```

然后你有：

```
 false || true 
```

第一部分是假的，但第二部分可能是真的（事实上它是），因此它移动到检查第二部分，看到它是真的，因此返回真

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-17T17:38:39.073

如果您更改您的表示，您可以更清楚地看到它，例如：

```
if(true || true && false) {
    System.out.println("yes");
} else {
    System.out.println("no");
} 
```

如果`&&`你有优先权，`( true || (true && false) )`这将是真的，所以会打印“是”。

如果`||`优先，您将拥有`( (true || true) && false)`这将是错误的，并会打印出“不”。

如果您运行上面的代码，您将看到结果为“是”，因此`&&`具有优先权。

# linux-kernel - udevd 和 initcall 依赖

> ID：12010366
> 
> 赞同：1
> 
> 时间：2012-08-17T17:27:48.063
> 
> 标签：linux-kernel, linux-device-driver

我使用一些 initcall 级别（比如 late_initcall）加载了一个驱动程序作为引导的一部分。作为模块 init 的一部分，它向 udev 注册以自动创建设备节点（t|g）。问题是模块如何知道 udev 守护进程在引导过程中是否正在运行。否则，用户空间将无法使用设备文件，从而导致驱动程序和设备无用。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T10:10:46.323

首先`udev`是创建设备节点的一种机制。您的代码应该在内核设备模型中创建一个设备，然后*某些东西*将为您的设备创建一个设备节点`/dev`。在可能只是一个简单的 shell 脚本的嵌入式系统上。

就时间而言，如果您的设备是在启动早期创建的，那么一旦 udev 启动并运行，udev 和内核将处理重播创建事件。这是通过 udev 扫描`/sys`和写入每个设备`"add"`的文件来实现的。`uevent`这告诉内核发送创建事件，udev 通过 netlink（或者它可以使用`uevent_helper`）接收。

此外，即使没有 udev，您的设备也会出现在`/sys`您可以查询其主要和次要编号并手动创建设备节点的地方。

# clearcase - 带有 ClearCase 的 Visual Studio 2012？

> ID：12010369
> 
> 赞同：1
> 
> 时间：2012-08-17T17:28:15.710
> 
> 标签：clearcase, visual-studio-2012

有人在 Visual Studio 2012 中集成了 ClearCase 吗？从 IBM Installation Manager 中删除“.NET Integration”，然后重新添加它并没有任何区别。也许手动注册加载项以及 VS 11.0 下的所有注册表项而不是 10.0 可以解决问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T12:21:35.050

请参阅[http://www-01.ibm.com/support/docview.wss?uid=swg24033485](http://www-01.ibm.com/support/docview.wss?uid=swg24033485) 安装 Microsoft Visual Studio 2012 与 Rational ClearCase 的集成

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T15:29:33.910

目前 712x 或 800x 都不支持 VS2012 集成，修改删除/添加或重新安装现在都无法解决问题。

要重新检测 VS 版本，您可以使用 IM 修改删除 VS 集成的功能，然后再次使用它重新添加，无需重新安装整个东西。

更新：

今天这条消息出来了： [http ://www-01.ibm.com/support/docview.wss?uid=swg21615206](http://www-01.ibm.com/support/docview.wss?uid=swg21615206)

您可以按照参考文档中的说明进行 VS2012 集成！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T17:53:42.643

如[http://www-01.ibm.com/support/docview.wss?uid=swg21327132](http://www-01.ibm.com/support/docview.wss?uid=swg21327132)中所述，

> 如果在安装 IBM Rational ClearCase 或带有 Visual Studio .NET 集成的 IBM Rational ClearQuest 之后安装新版本的 Microsoft Visual Studio .NET，则必须重新安装 VisualStudio.NET 集成特性。

所以安装顺序很重要。

但是，这取决于您的 ClearCase 版本：

ClearCase 7.1.x[支持的第 3 方集成](http://www-01.ibm.com/support/docview.wss?uid=swg21302974#3rd)仅提及 Visual Studio 2010 及更低版本（无 VS2012）

“ [Rational ClearCase 8.0.0.x 的系统要求](http://www-01.ibm.com/support/docview.wss?uid=swg27020796)”根本没有提到 VS2012。

所以 VS2012 可能还没有集成支持。

# java - JAXB 仅解组 XML 文件的深层嵌套子集

> ID：12010381
> 
> 赞同：1
> 
> 时间：2012-08-17T17:28:53.963
> 
> 标签：java, jakarta-ee, jaxb, eclipselink, moxy

我的应用程序接收到一个非常长的 XML 文档，我想用它来填充一个 Java 对象。

然而，虽然 XML 中有大量嵌套很深的元素，但我只对其中的一小部分感兴趣。我也只对从 XML 到 Java 感兴趣。我不需要将我的 Java 对象编组回 XML 的能力。

如果可能，我想为此使用 JAXB，因为无论如何我的应用程序的依赖项已经包含 Eclipselink MOXy。但是，我不确定如何仅获取少数深度嵌套的元素值。我查看了`@XmlElementWrapper`注释，并考虑使用它来注释我的 Java 类字段，如下所示：

```
...
@XmlElementWrapper(name="LEVEL_1/SUBLEVEL_1/YET_ANOTHER_SUBLEVEL")
@XmlElement(name="STATUS")
private String statusCode;
... 
```

但是，我不知道该`name`属性是否有效。反正我没有那么远......编译器告诉我`@XmlElementWrapper`只能在成员变量是 Collection 类型时使用。我试图提取的大多数字段都是单个值。

我尝试跳过`@XmlElementWrapper`注释，看看是否`@XmlElement`单独可以理解 XPath 值：

```
...
@XmlElement(name="LEVEL_1/SUBLEVEL_1/YET_ANOTHER_SUBLEVEL/STATUS")
private String statusCode;
... 
```

虽然这不会导致编译错误，但它也不起作用。在运行时，Eclipselink 只是`null`在这个字段中用 a 实例化我的对象。

有什么我遗漏的，或者我正在尝试用 JAXB 做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T19:02:00.997

这可以通过使用`@XmlPath`扩展的 EclipseLink JAXB (MOXy) 来完成。

```
@XmlPath("LEVEL_1/SUBLEVEL_1/YET_ANOTHER_SUBLEVEL/STATUS/text()")
private String statusCode; 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2010/09/xpath-based-mapping-geocode-example.html](http://blog.bdoughan.com/2010/09/xpath-based-mapping-geocode-example.html)

# android - Nexus 7 支持 Android 应用程序清单程序集

> ID：12010383
> 
> 赞同：14
> 
> 时间：2012-08-17T17:29:04.960
> 
> 标签：android, manifest, google-play, nexus-7

我有一个具有下面列出的 AndroidManifest.xml 的 Android 应用程序。上传到 Google Play 后，Nexus 7 被列为不支持的设备，我试图找出原因。当然，Google Play 不会告诉您清单的原因或哪些权限或使用限制它不受支持。关于以下代码的哪一部分导致 Nexus 7 被列为不受支持的任何想法？

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.xxxx.xxxx.applet"
    android:versionCode="x"
    android:versionName="x.x" >

    <uses-sdk
        android:minSdkVersion="12"
        android:targetSdkVersion="14" />

    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.CAMERA" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

    <supports-screens
        android:anyDensity="true"
        android:largeScreens="true"
        android:normalScreens="true"
        android:smallScreens="false"
        android:xlargeScreens="true" >
    </supports-screens>

    <application
        android:name="com.xxxx.xxxx.xxxx.xxxx"
        android:hardwareAccelerated="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:largeHeap="true"
        android:logo="@drawable/ic_launcher"
        android:theme="@android:style/Theme.Holo" >

        <activity
            android:name="MainActivity"
            android:configChanges="keyboardHidden|orientation"
            android:icon="@drawable/ic_launcher"
            android:label="@string/app_name"
            android:launchMode="singleTop" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>

            <meta-data
                android:name="android.hardware.usb.action.USB_DEVICE_ATTACHED"
                android:resource="@xml/device_list" />
        </activity>
</manifest> 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-08-17T17:30:27.227

这个：

```
<uses-permission android:name="android.permission.CAMERA" /> 
```

这让很多人感到惊讶，因为 Nexus 7 确实有一个前置摄像头，但它似乎不计入此特定许可的目的。

# wpf - 扩展器不可拉伸

> ID：12010391
> 
> 赞同：1
> 
> 时间：2012-08-17T17:29:39.793
> 
> 标签：wpf, xaml, expander

我有一个 WPF 应用程序，并且我使用扩展器。当我让扩展器折叠时，它一直占据空间。是否可以在 xaml 中释放空间？

这是一些代码：

```
 <Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"></RowDefinition>
        <RowDefinition Height="3*"></RowDefinition>
        <RowDefinition Height="4*"></RowDefinition>
        <RowDefinition Height="2*"></RowDefinition>
  </Grid.RowDefinitions>
    <wpfx:BusyIndicator Name="BusyBar" IsBusy="{Binding IsBusy}" BusyContent="Uploading enrollment data..." Grid.Row="0" />

    <Expander Grid.Row="1" IsExpanded="True" Header="Enrollment Files Upload">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"></RowDefinition>
                <RowDefinition Height="*"></RowDefinition>
            </Grid.RowDefinitions>
            <StackPanel Orientation="Horizontal" Margin="3, 10" Grid.Row="0">
                <TextBlock Text="Agencies:" VerticalAlignment="Center" />
                <ComboBox x:Name="Agencies" DisplayMemberPath="PrimaryName" SelectedValuePath="AgentId" 
                      SelectedItem="{Binding SelectedAgency}"
                      MinWidth="100" Margin="3,0,10,0" VerticalAlignment="Center" />
                <TextBlock Text="Worksheet:" VerticalAlignment="Center" />
                <TextBox x:Name="WorkSheetName" VerticalAlignment="Center" Margin="3,0,10,0" />
                <Button x:Name="UploadFile"
                MinWidth="70"
                Margin="2"
                HorizontalAlignment="Center"
                VerticalAlignment="Center" 
                attachProperties:ButtonIcon.Icon="Resources/Images/add.png"
                Content="Upload File"  IsEnabled="{Binding EnrollmentFiles.Any}"                           
                Style="{StaticResource ImageButtonStyle}" />

                <Button x:Name="EnrollmentDelete"
                    MinWidth="70"
                    Margin="2"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center" 
                    attachProperties:ButtonIcon.Icon="Resources/Images/Remove.png"
                    Content="Delete Enrollment"  IsEnabled="{Binding EnrollmentFiles.Any}"                           
                    Style="{StaticResource ImageButtonStyle}" />
            </StackPanel>

            <c1:C1FlexGrid x:Name="EnrollmentFiles" Grid.Row="1"
                AutoGenerateColumns="False"
                IsReadOnly="True" Width="Auto"
                ItemsSource="{Binding Path=EnrollmentFiles}"
                SelectionMode="Row" KeepCurrentVisible="True"
                SelectedItem="{Binding Path=SelectedEnrollmentFile, Mode=TwoWay}">
...
            </c1:C1FlexGrid>
        </Grid>   
    </Expander>

    <Expander Grid.Row="2" IsExpanded="True" Header="First Data Entry Records">

        <DataGrid x:Name="FirstEntries"
            AutoGenerateColumns="False"
            BaseControls:DataGridExtension.Columns="{Binding FirstEntryGridColumns}"
            CanUserAddRows="False" IsReadOnly="True"
            SelectedItem="{Binding Path=SelectedFirstEntry}">
...
        </DataGrid>

    </Expander>

    <Expander Grid.Row="3" IsExpanded="True" Header="Enrollment Files Upload">

        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"></RowDefinition>
                <RowDefinition Height="Auto"></RowDefinition>
                <RowDefinition></RowDefinition>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"></ColumnDefinition>
                <ColumnDefinition Width="Auto"></ColumnDefinition>
                <ColumnDefinition Width="Auto"></ColumnDefinition>
            </Grid.ColumnDefinitions>

            <StackPanel Orientation="Horizontal" Grid.Row="0" Grid.ColumnSpan="3" Margin="3,10">
 ...
            </StackPanel>

            <TextBlock x:Name="SelectedFirstEntry_NameOnAccount" Grid.Row="1" Grid.Column="0"  />
            <TextBlock x:Name="SelectedFirstEntry_AccountNo" Grid.Row="1" Grid.Column="1" Margin="3,0" />
            <TextBlock x:Name="SelectedFirstEntry_MeterNo" Grid.Row="1" Grid.Column="2" Margin="3,0"/>

            <DataGrid x:Name="Findings" Grid.Row="2" 
                 AutoGenerateColumns="False"
                 BaseControls:DataGridExtension.Columns="{Binding FindingsGridColumns}"
                 CanUserAddRows="False">
 ...
            </DataGrid>
        </Grid>
    </Expander>
</Grid> 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T18:25:36.850

扩展器确实折叠但您看不到它，因为您的行定义具有恒定的高度，请尝试：

```
<RowDefinition Height="auto"></RowDefinition> 
```

（在顶部网格上）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T20:31:03.187

扩展器控件是一个奇怪的控件。关于使用的空间等，您需要避免一些事情。查看[文档](http://msdn.microsoft.com/en-us/library/ms750485.aspx#SettingSizeDimensionsonanExpanderinaPanel)

具体来说，

> “即使内容折叠，边框也会显示。要设置扩展内容区域的大小，请在 Expander 的内容上设置大小尺寸，或者如果您想要滚动功能，请在包含内容的 ScrollViewer 上设置。”

所以看起来你必须重新考虑你的 UI 并使用滚动查看器的固定内容大小，或者使用带有 3 个选项卡的 TabControl？

# php - MySQL 数据结构与 Checkbox 类型数据的计算数据

> ID：12010394
> 
> 赞同：0
> 
> 时间：2012-08-17T17:29:41.950
> 
> 标签：php, mysql, data-structures, boolean, boolean-operations

假设您在一个公共类别中有多个布尔字段，哪种数据库存储方法在速度和处理方面（对于 MySQL 和 PHP）更有效？

例如，如果选择汽车，您可能有一个类别“选项”，其中包含以下选项：（GPS、拖车包、雷达、动力转向）。所有选项都是布尔字段，必须回答，并且必须是`TRUE`or `FALSE`。

为每个字段设置一个表是否更好：

```
CREATE TABLE IF NOT EXISTS `manycars` (
  `vin` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `hasGps` tinyint(1) NOT NULL COMMENT '1= TRUE, 0=FALSE',
  `hasTow` tinyint(1) NOT NULL COMMENT '1= TRUE, 0=FALSE',
  `hasRadar` tinyint(1) NOT NULL COMMENT '1= TRUE, 0=FALSE',
  `hasPsteer` tinyint(1) NOT NULL COMMENT '1= TRUE, 0=FALSE',
  PRIMARY KEY (`vin`),
) ENGINE=InnoDB  DEFAULT CHARSET=latin1; 
```

或者选择一个名为“options”的字段，带有位样式的数据存储，例如：

```
CREATE TABLE IF NOT EXISTS `singlecars` (
  `vin` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `options` int(3) unsigned NOT NULL COMMENT '1= GPS, 2=Tow, 4=radar, 8=psteer',
  PRIMARY KEY (`vin`),
) ENGINE=InnoDB  DEFAULT CHARSET=latin1; 
```

为了确定每个布尔值的值，我会查询`SELECT options, vin FROM singlecars`并提取：

```
$q=SELECT options, vin FROM singlecars
$r=mysqli_query($dbconnect, $q);
while($record = mysqli_fetch_array($r, MYSQLI_ASSOC)){
  $option=decbin($record['options']; // returns binary
  $gps=substr($option,3,1);
  $tow=substr($option,2,1);
  $radar=substr($option,1,1);
  $psteer=substr($option,0,1);
  echo "GPS=$gps, Tow package=$tow, Radar=$radar, Power Steering=$psteer <br />";
} 
```

我的想法是第一个表“manycars”具有更好的语义，查询速度快，编写查询的 php 代码最少。但是，第二个表“singlecars”使用较少的 SQL 结构，并且在所有选项都是布尔值的情况下，可能每次都需要。

这是一个理论示例，但我对每种方法的优缺点感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T18:08:07.247

我会为每个选项选择带有单独字段的变体。

*   它更快：你不需要`substr`在你的 while 循环中使用（这是一个你可以在处理大量数据时放慢速度的地方）。
*   它很灵活：例如，您需要选择所有带有 *雷达*的汽车。`SELECT ... WHERE hasRadar = 1`. 就是这样。

# backbone.js - 为什么 Backbone 比较器不比较两个对象？

> ID：12010395
> 
> 赞同：1
> 
> 时间：2012-08-17T17:29:45.480
> 
> 标签：backbone.js

在 Ruby 和 Java 中，您将一个对象与另一个对象进行比较，并根据这两个对象的顺序返回一个数字。[Backbone 支持](http://backbonejs.org/#Collection-comparator)仅基于单个对象的排序。

这似乎是反主动的，而且更复杂。为什么 Backbone 这样做？使用这种技术有什么好处吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T17:35:19.323

从[文档](http://backbonejs.org/#Collection-comparator)：

> 比较器函数可以定义为 sortBy（传递一个接受单个参数的函数）或排序（传递一个需要两个参数的比较器函数）。

这意味着您可以`Comparator`以经典方式实现：具有 2 个参数的函数，其行为类似于`sort`数组的原生 javascript 函数。[Backbone 只是添加了另一种对从下划线](http://underscorejs.org/#sortBy)
借来的集合进行排序的方式。

# sql - SQL SERVER - 棘手的选择语句

> ID：12010401
> 
> 赞同：1
> 
> 时间：2012-08-17T17:30:05.093
> 
> 标签：sql, sql-server

试图绞尽脑汁，大量谷歌搜索，但无济于事。我有一个数据集，其中包含我需要查询的以下字段：`DEPT,NUM,TERM,ITLE`. 我有以下可能的行。

```
DEPT--NUM---TERM------TITLE
OSS - 1550 - 200830 - COURSE NAME (CI)
OSS - 1550 - 200930 - COURSE NAME (CI)
OSS - 1550 - 201230 - COURSE NAME
ENG - 1600 - 200930 - OTHER COURSE (CI)
OSS - 1600 - 200830 - ANOTHER COURSE (CI)
USS - 2500 - 201240 - COURSE (CI)
PSY - 1600 - 200830 - COURSE TITLE 
```

我需要做的是用这样的数据查询一个表，然后拉出`DEPT/NUM`（OSS 1550），其中标题与查询匹配，前提是它是最新的标题。

因此，如果我搜索 (CI)，我想要 3 个使用上述设置的结果（ENG 1600、OSS 1600、ISS 2500），因为 201230 是 OSS 1550 的最新条目，我不想要那个，但我确实想要其他。现在，我一生都无法弄清楚如何编写一个可以做到这一点的查询。

任何帮助，将不胜感激。如果我不够清楚，请告诉我。

编辑

我只得到一条记录，这是我根据您所说的 SELECT data.* FROM ( SELECT SCBCRSE_SUBJ_CODE || ' ' || SCBCRSE_CRSE_NUMB AS crs_combo, SCBCRSE_TITLE as title, row_number() over (ORDER BY SCBCRSE_EFF_TERM DESC, SCBCRSE_CRSE_NUMB DESC) 作为 SCBCRSE WHERE (SCBCRSE_TITLE LIKE '%' || :srch || '%') ) 数据 WHERE data.term = 1

我的格式现在正在工作......不知道为什么我有四个空格。

再次编辑我想我没有提供足够的样本数据......见上面的编辑表。我需要标题中具有唯一 DEPT/NUM 和 CI 的三个记录，但不需要具有较旧标题和 CI 的记录。有道理。

抱歉不清楚。

答案...这是赢家。

```
SELECT data.*
FROM (
    SELECT SCBCRSE_SUBJ_CODE || ' ' || SCBCRSE_CRSE_NUMB AS crs_combo,
    SCBCRSE_TITLE as title,
    row_number() over (partition by SCBCRSE_SUBJ_CODE,SCBCRSE_CRSE_NUMB ORDER BY SCBCRSE_EFF_TERM DESC) as seqnum
    FROM SCBCRSE 
) data
WHERE seqnum = 1 AND title LIKE '%' || :srch || '%' 
```

谢谢大家的帮助。我在这上面浪费了几个小时，而你却用小步舞曲回答了它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T17:35:01.390

你可以用排名功能做你想做的事。但是，当我阅读这个问题时，它并不像我最初想象的那么清楚。以下获取与标题匹配的最新课程：

```
select t.*
from (select d.*,
             row_number() over (order by term desc, num desc) as seqnum
      from data d
      where title like '%(CI)%'
     ) t
where seqnum = 1 
```

这假设您使用的是 2005 或更高版本。

如果您试图找出所有匹配的“最后”类，那么您可以尝试：

```
select t.*
from (select d.*,
             row_number() over (partition by num order by term desc) as seqnum
      from data d
     ) t
where seqnum = 1 and title like '%(CI)%' 
```

这将返回最后一个类（基于 num，按术语排序）与“（CI）”匹配的任何情况。这是我对你的问题的另一种解释。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T17:46:50.353

听起来您只想从 中搜索书籍`MAX(TERM)`，在这种情况下，这将起作用

```
IF OBJECT_ID('TEMPDB..#Books') IS NOT NULL
    DROP TABLE #Books
CREATE TABLE #Books
(
    DEPT VARCHAR(5),
    NUM VARCHAR(10),
    TERM VARCHAR(10),
    TITLE VARCHAR(50)
)

INSERT INTO #BOOKS (DEPT, NUM, TERM, TITLE) VALUES('OSS','1550','200830','COURSE NAME (CI)')
INSERT INTO #BOOKS (DEPT, NUM, TERM, TITLE) VALUES('OSS','1550','200930','COURSE NAME (CI)')
INSERT INTO #BOOKS (DEPT, NUM, TERM, TITLE) VALUES('OSS','1550','201230','COURSE NAME')
INSERT INTO #BOOKS (DEPT, NUM, TERM, TITLE) VALUES('ENG','1600','200930','OTHER COURSE (CI)')

SELECT b.*
FROM #Books b
JOIN (
    --Find the latest TERM
    SELECT
        DEPT, NUM, MAX(TERM) as TERM
    FROM #Books
    GROUP BY DEPT, NUM
    ) t
    ON b.DEPT = t.DEPT
    AND b.NUM = t.NUM
    AND b.TERM = t.TERM
WHERE TITLE LIKE ('%(CI)%') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T17:58:32.310

这是一个[SQLFiddle 示例](http://sqlfiddle.com/#!3/5c589/7)：

```
;with a as 
(
  select * from 
  (
    select t.*, 
    row_number() over (partition by DEPT,NUM order by TERM DESC) row from t
  ) b 
  where row=1

)
select * from a where TITLE like '%(CI)%'; 
```

# javascript - 从选择器使用 JavaScript 切换图像

> ID：12010414
> 
> 赞同：0
> 
> 时间：2012-08-17T17:30:45.763
> 
> 标签：javascript, image, wordpress

我有一个脚本，它应该根据 HTML 下拉框中的选择来切换图像。

这是HTML：

```
<form>
<select onChange="changeMap(this.value);">
<option value="clIP">Century Link - IP</option>
<option value="clND">Century Link - National Data</option>
<option value="elDF">Earth Link - Data Fiber</option>
<option value="elDSL">Earth Link - DSL</option>
<option value="l3">Level 3</option>
<option value="ws">Windstream</option>
<option value="xoBB">XO - BB</option>
<option value="xoFVOIP">XO - Flex VOIP</option>
<option value="xoIP">XO - IP</option>
</select>
</form>

<img src="imageurl" id="map" /> 
```

这是相关的JavaScript：

```
var maps=new Array();

maps[0]="imageurl";
maps[1]="imageurl";
maps[2]="imageurl";
maps[3]="imageurl";
maps[4]="imageurl";
maps[5]="imageurl";
maps[6]="imageurl";
maps[7]="imageurl";
maps[8]="imageurl";

function changeMap(inobj) {

switch (inobj) {

case "clIP":
    document.getElementByID("map").src=maps[0];
    break;

case "clND":
    document.getElementByID("map").src=maps[1];
    break;

case "elDF":
    document.getElementByID("map").src=maps[2];
    break;

case "elDSL":
    document.getElementByID("map").src=maps[3];
    break;

case "l3":
    document.getElementByID("map").src=maps[4];
    break;

case "ws":
    document.getElementByID("map").src=maps[5];
    break;

case "xoBB":
    document.getElementByID("map").src=maps[6];
    break;

case "xoFOIP"
    document.getElementByID("map").src=maps[7];
    break;

case "xoIP"
    document.getElementByID("map").src=maps[8];
    break;

default:
    document.write('Please select a map from the menu.');
    break;
} 
```

所以我有一些非常基本的 HTML 和一个下拉菜单，用户可以从中选择一个地图。我使用 JavaScript 根据选择器的值将图像 src 更改为数组的值。对我来说，这段代码看起来不错，但根本不起作用。菜单在选择时没有任何作用。我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T17:54:33.230

我不知道你为什么会遇到这个问题 - 我做了一个简单的测试，并且在我可用的所有浏览器（最新的 Chrome、FF 和 IE）中都能完美运行：

```
<html>
    <head>
        <title>test 12010414</title>
        <script type="text/javascript">
function switchImg(){
    var nextImg = "http://sarahhorth.com/wp-content/themes/thesis_16/custom-sample/rotator/sample-4.jpg",
        testImg = document.getElementById("testimg");
    if(testImg){
        testImg.src = nextImg;
    }
}
        </script>
    </head>
    <body>
        <img id="testimg" src="http://whitenoisecd.org/wp-content/themes/thesis/rotator/sample-1.jpg" onclick="switchImg()"/>
    </body>
</html> 
```

# c++ - Lambda within assert

> ID：12010415
> 
> 赞同：3
> 
> 时间：2012-08-17T17:30:49.157
> 
> 标签：c++, lambda, assert

is it somehow possible to use a lambda within a call to `assert()` ?

When i try the following...

```
assert([&]() -> bool{
        sockaddr_storage addr; int addrlen = sizeof(addr);
        return (getsockname(this->m_Socket, (sockaddr*)&addr, &addrlen) != 0) ? false : true;
    }); 
```

... i get the error

> error C2675: unary '!' : '`anonymous-namespace'::' does not define this operator or a conversion to a type acceptable to the predefined operator

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-17T17:33:03.353

Sure, but assert really only wants a boolean; not a lambda, so you'll have to call it yourself (this assuming that your lambda is one that returns something you want to assert):

```
assert(([&]() -> bool{
        sockaddr_storage addr; int addrlen = sizeof(addr);
        return getsockname(this->m_Socket, (sockaddr*)&addr, &addrlen) == 0;
    })()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T17:35:46.373

You can't assert that the lambda itself is "true", since lambdas have no concept of truthiness.

If you want to invoke the lambda and assert that its return value was true, then you need to invoke it:

```
assert([&]() -> bool{
    sockaddr_storage addr; int addrlen = sizeof(addr);
    return getsockname(this->m_Socket, (sockaddr*)&addr, &addrlen) == 0;
}());
 ^^ 
```

I've also changed the second line of the lambda into something that makes a little more sense than your code.

# jquery - 响应式设计：如何垂直扩展列表项（推特代码）？

> ID：12010420
> 
> 赞同：0
> 
> 时间：2012-08-17T17:31:00.347
> 
> 标签：jquery, css, responsive-design

我创建了一个 twitter 提要放在一个网站上。您可以在此处查看提要：[anibalcascais.com/tweet/twitter.html](http://anibalcascais.com/tweet/twitter.html)

我正在尝试使提要具有响应性。到目前为止，周围的 div 是响应式的。问题是当浏览器窗口调整为 ipad/iphone 大小时，`li`元素不会调整大小并且一些推文被缩短。

如何制作`ul`和`li`扩展以适应一行或两行推文？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T18:43:57.277

您有以下关于身高的信息：

```
.tweet_list {
    height: 28px;
} 
```

而不是明确设置 ul 的高度，所以它只显示第一个 li，我会尝试类似的东西：

```
.tweetlist>li {display: none;}
.tweetlist>li:first-child {
   display: block;
 } 
```

这样，您可以让 ul 自动调整为当前列表中第一个的大小，这将使其适用于 1 行和 2 行大小的 tweet-li

# javascript - 如何使用图像作为单选按钮

> ID：12010425
> 
> 赞同：-2
> 
> 时间：2012-08-17T17:31:19.640
> 
> 标签：javascript, css, html

我正在尝试在表单上创建一个简单的启用/禁用单选按钮分组。我曾计划对启用和禁用 x 使用复选标记的图像。我希望未单击的元素变为灰色，以明确哪个被选中。帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T17:37:15.920

尝试以下

**查询**

```
$(function() {
    $('input:radio').each(function() {
        $(this).hide();
        $('<a class="radio-fx" href="#"><div class="radio"></div></a>').insertAfter(this);
    });
    $('.radio-fx').live('click',function(e) {
        e.preventDefault();
          var $check = $(this).prev('input');
          $('.radio-fx div').attr('class','radio');
          $(this).find('div').attr('class','radio-checked');          
          $check.attr('checked', true);
    });
}); 
```

**CSS**

```
.radio {
    background: url(radiobutton_no.png) no-repeat;
    width: 16px;
    height: 16px;
}
.radio-checked {
    background: url(radiobutton_yes.png) no-repeat;
    width: 16px;
    height: 16px;
} 
```

# api - Twitter 流 api - OAuth 签名混淆

> ID：12010426
> 
> 赞同：0
> 
> 时间：2012-08-17T17:31:23.203
> 
> 标签：api, twitter, streaming

我正在开发一个应用程序，其中一部分是让用户的推文登录到这个应用程序。我在 Twitter 上创建了一个应用程序，并为用户流 API (https://userstream.twitter.com/2/user.json) 生成了一个 OAuth 签名。我运行了生成的 curl 命令并发布了几条推文。我能够实时看到这些。我现在的问题是，如果其他人登录了，他们是否能够运行完全相同的 curl 命令（或完全相同的 GET 请求）并查看他们的推文？如果没有，我将如何为他们生成 OAuth 签名以查看他们的推文？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T17:56:42.497

用户流为经过身份验证的用户返回内容。因此，如果另一个用户执行身份验证，Twitter 将知道他们是谁并返回他们的内容。

# excel - 如何访问 Excel 中筛选范围之外的单元格内容？

> ID：12010432
> 
> 赞同：0
> 
> 时间：2012-08-17T17:31:50.290
> 
> 标签：excel, vba

此代码将通过过滤范围并仅将可见单元格插入到数组中（假设 A 列已根据我的标准进行过滤）。但是，我真正想做的是移动一列并将“B3”的内容插入我的数组而不是“A3”。如何将我的代码修改为此？

```
For Each cell In Range.SpecialCells(xlCellTypeVisible)
    Array1(i) = cell.Value
    i = i + 1
Next c 
```

我在想像 Array1(i) = Cells(cell.Row, cell.Column + 1).Value

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T17:44:14.307

```
For Each cell In Range.SpecialCells(xlCellTypeVisible)
    Array1(i) = cell.Offset(ColumnOffset:=1).Value
    i = i + 1
Next c 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T17:46:31.290

```
For Each cell In Range.SpecialCells(xlCellTypeVisible)
   Array1(i) = cell.Offset(0, 1).Value
   i = i + 1

Next c 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T18:15:18.477

由于 B 列将受到与 A 列相同的过滤器，这里有一个灵活的解决方案，允许您指定要使用的列：

```
Sub FilterColumn(ColumnNumber As Long)
Dim LastRow As Long
Dim rng As Range
Dim rngVisible As Range
Dim cell As Range
Dim Array1() As Variant
Dim i As Long

With ActiveSheet
    Set rng = .Columns(ColumnNumber)
    LastRow = .Cells(.Rows.Count, ColumnNumber).End(xlUp).Row
    On Error Resume Next
    Set rngVisible = .Range(.Cells(2, ColumnNumber), .Cells(LastRow, ColumnNumber)).SpecialCells(xlCellTypeVisible)
    On Error GoTo 0
    If Not rngVisible Is Nothing Then
        ReDim Preserve Array1(1 To rngVisible.Cells.Count)
        i = 1
        For Each cell In rngVisible
            Array1(i) = cell.Value
            i = i + 1
        Next cell
    End If
End With
End Sub 
```

B列这样称呼它：

```
FilterColumn 2 
```

作为旁注，我建议您不要将 Excel 保留字用于变量名。范围是保留字。

# iphone - 如何进行“SEL 乐趣”

> ID：12010433
> 
> 赞同：-2
> 
> 时间：2012-08-17T17:31:57.303
> 
> 标签：iphone, ios

如果 SEL fun 是一个参数

我怎么能玩得这么开心？

例如

```
-(id)init:(SEL)fun
{
  [target fun];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T17:37:44.950

如果`fun`不需要参数，您可以这样做：

```
[target performSelector:fun]; 
```

如果它需要一个对象参数，您可以这样做：

```
[target performSelector:fun withObject:someObject]; 
```

如果它需要两个对象参数，你可以这样做：

```
[target performSelector:fun withObject:someObject withObject:anotherObject]; 
```

如果它需要三个或更多参数，或者如果它需要不是对象的参数，则必须使用，如[this answer](https://stackoverflow.com/a/2573949/77567)`objc_msgSend`所解释的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T17:51:25.420

您可以为此使用三种方法：

1.  使用`performSelector:` 喜欢：`[target performSelector:fun withObject:nil];`
2.  使用`detachNewThreadSelector`like:`[NSThread detachNewThreadSelector:fun toTarget:target withObject:nil];`但它将在另一个线程上工作。
3.  使用`NSInvocation`类似：

`NSInvocation *inv = [[NSInvocation alloc] init];
[inv setSelector:fun];
[inv invokeWithTarget:target];`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T17:46:43.277

```
- (id) init:(NSString*)fun{

[target NSSelectorFromNSString(fun)];

}

- (void) methodCaller{
        [[MyClass alloc] init:NSStringFromSelector(@selector(method1))];
} 
```

# c# - 按需重启 MSSQL 服务

> ID：12010435
> 
> 赞同：-5
> 
> 时间：2012-08-17T17:32:06.480
> 
> 标签：c#, windows

我需要创建一个可以按需重启 MSSQL 服务的小实用程序。

我可以将`net stop`and传递`net start`给命令行，但这不是一个好的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T17:34:38.833

使用`ServiceController`类。

# android - 安卓上的即时通讯？

> ID：12010438
> 
> 赞同：3
> 
> 时间：2012-08-17T17:32:27.680
> 
> 标签：android, chat, messaging

我需要在我的 Android 应用程序中实现即时消息传递功能，但我不知道该怎么做。是否有任何可用于聊天的开源 API，或者 Android 中是否有任何其他即时消息（聊天）功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T17:40:59.557

快速谷歌搜索显示一个谷歌代码应用程序，你可以在[这里](http://code.google.com/p/simple-android-instant-messaging-application/)找到它，项目 simple-android-instant-messaging-application。看起来它为您提供了创建数据库、注册、身份验证、朋友、通知和简单聊天的所有代码。

您可能可以查看此代码，并将其中的一些实现到您当前的应用程序中。

[如果你喜欢，这里](http://code.google.com/p/simple-android-instant-messaging-application/downloads/detail?name=simple_android_im_application_demo.avi&can=2&q=)有这个应用程序的演示。

我希望它有帮助！

# sql - 使用 Spring (Tomcat) 和 Java EE (JBoss) 进行的各种查询

> ID：12010439
> 
> 赞同：0
> 
> 时间：2012-08-17T17:32:28.227
> 
> 标签：sql, performance, spring, hibernate, jakarta-ee

我在 Tomcat 上使用 Spring 创建了一个应用程序，在 JBoss AS 7 上使用 Java EE (EJB + JSF) 创建了第二个应用程序。作为 ORM，我选择 Hibernate，或者我认为是这样。

假设，我有一个包含旅行优惠的页面。我可以单击链接以使用 AJAX 加载行程描述。

在 Spring 版本中，选择描述链接后，只会向数据库发送一个查询。这很好。

但是对于 Java EE 版本，在同样的情况下，发送了 7 个查询！当前站点上显示的每个行程报价的七个查询。所以，如果我能看到 4 个行程报价，那么就有 4*7 个 SQL 查询！这就是性能低的原因。

服务层，即 SQL 查询，在两个版本中都是相同的。在 Spring 版本中，使用 jQuery 发送请求（通过邮寄）。在 Java EE 中，我使用 JSF AJAX 支持。

这种行为的原因是什么？我不确定，也许 Java EE 版本中并没有真正使用 Hibernate？在persistance.xml 我有以下内容`<provider>org.hibernate.ejb.HibernatePersistence</provider>`：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T17:58:37.247

首先，您必须确定多个 SQL 查询是由客户端引发的，还是后端是否存在不同之处。

尝试打开 Firebug 或类似工具并检查您的浏览器是否正在发送一堆单独的 HTTP 请求。

# objective-c - 在 init 方法中使用 setter 进行赋值（objective-c）

> ID：12010443
> 
> 赞同：0
> 
> 时间：2012-08-17T17:32:44.733
> 
> 标签：objective-c, ios5

我知道在类的方法中分配值的正确约定是不使用 setter 版本。

鉴于您有这样的 init 方法：

```
// Class header 
@property (nonatomic, weak) id <DelegateType> delegate;
@property (nonatomic, strong) NSString *stringData;

@synthesize delegate = _delegate;
@synthesize stringData = _stringData;

- (id)initWithParams:(NSString *)aString delegate:(id<DelegateType>)aDelegate
{
    // initialization happens here
} 
```

在 ARC 之前，您将通过以下方式确保正确的保留政策：

```
stringData = [aString retain];
self.delegate = aDelegate; 
```

使用 ARC，如何完成作业并确保不会过早发布 ivars？

因为你不知道在 setter 覆盖的情况下可能在幕后发生什么样的工作，所以我的印象是你不能做：

```
self.stringData = aString 
```

什么是正确的初始化模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T18:13:22.843

由于您使用属性作为

```
// Class header 
@property (nonatomic, weak) id <DelegateType> delegate;
@property (nonatomic, strong) NSString *stringData;

@synthesize delegate = _delegate;
@synthesize stringData = _stringData; 
```

因此，根据 ARC，**弱**对象的工作方式类似于**assign**。但是“强”基本上不像保留那样工作，因为保留只会增加引用计数，而使用ARC，强类型的对象肯定存在，直到该类的实例存在。

所以在init方法中

它应该是

```
- (id)initWithParams:(NSString *)aString delegate:(id<DelegateType>)aDelegate
{
// now _stringData and _delegate are getter instance of property variables. so either you can use self.stringData and self.delegate or _stringData and _delegate.
    _stringData = aString;
    _delegate = aDelegate;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T17:35:36.353

您可以，而且实际上您应该（在大多数情况下）使用访问器来访问您的 ivars，即使在您使用 ARC 的实现中也是如此。它比你想象的更聪明。不会有“过早”发布的 ivars。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T17:37:25.827

只需分配给 ivar。ARC 将根据变量的内存管理策略（或）处理保留`__strong`和`__weak`释放`__unsafe_unretained`。这就是 ARC 的意义所在。因此，您的代码示例将是：

```
- (id)initWithParams:(NSString *)aString delegate:(id<DelegateType>)aDelegate
{
    stringData = aString;
    delegate = aDelegate;
} 
```

不过，顺便说一句，您可能应该复制该字符串而不是保留。因此，您将 setter 声明为`@property (nonatomic, copy) NSString *stringData;`，init 方法的实现将是：

```
- (id)initWithParams:(NSString *)aString delegate:(id<DelegateType>)aDelegate
{
    stringData = [aString copy];
    delegate = aDelegate;
} 
```

# python - 同时使用 input() 和 print() （就像在聊天中一样）

> ID：12010446
> 
> 赞同：2
> 
> 时间：2012-08-17T17:32:44.957
> 
> 标签：python, printing, input, terminal

我正在学习 Python，我决定通过在终端中编写一个带有服务器和客户端的迷你聊天来进行一些练习。但是有一个问题，要进行真正的聊天，客户端必须能够同时输入、发送和接收消息，如下所示：

```
//MESSAGES
>bla bla to send 
```

所以消息在外壳底部滚动，这是我的输入。

我已经在网上搜索了如何制作它，也许是多线程，没有。input() 函数阻塞了这个过程。

如果你能回答我的问题，那就太好了！提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T17:36:44.277

在 Unix 系统上，您可能想查看[curses](http://en.wikipedia.org/wiki/Curses_%28programming_library%29)，这是一个旨在执行此类操作的库。Python在标准库中有[一个模块。](http://docs.python.org/dev/library/curses.html#module-curses)

[文档](http://docs.python.org/dev/howto/curses.html)中有一个很好的关于使用诅咒的教程。这也为 Windows 用户建议[了控制台模块](http://effbot.org/zone/console-index.htm)。

# java - Java BigDecimal Round Down 问题

> ID：12010449
> 
> 赞同：2
> 
> 时间：2012-08-17T17:32:58.860
> 
> 标签：java

我有一些简单的代码来四舍五入，但它产生了一些意想不到的结果。

```
 public static void main(String[] args) throws Exception {
    // TODO Auto-generated method stub

    double a = 46.66;
    System.out.println("Roundup: " + roundUp(a,2) + "\nRound Down: " + roundDown(a,2));

}

public static double roundUp(double a, int scale)
{
    BigDecimal value = new BigDecimal(a);
    value = value.setScale(scale, RoundingMode.UP);
    return value.doubleValue();
}

public static double roundDown(double a, int scale)
{
    BigDecimal value = new BigDecimal(a);
    value = value.setScale(scale, RoundingMode.DOWN);
    return value.doubleValue();
} 
```

当我使用小数点后 3 位时，它按预期工作。如果 a = 44.661，则输出如下所示。

综述：46.67 向下取整：46.66

当 a=44.66 时，向下舍入值减少 1，这是出乎意料的，如下所示。

综述：46.66 向下取整：46.65

如何在仍保留上述结果的同时获得 44.66 向下舍入和 44.67 向上舍入。

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-17T17:37:31.810

那是因为您并没有真正使用 BigDecimals，而是使用双打。当您键入`44.66`时，它会转换为双精度值，从而导致值略小于 44.66。`BigDecimal`无法修复在您输入之前已经发生的舍入错误。

试试这个。

```
public static void main(String[] args) throws Exception {
    BigDecimal a = new BigDecimal("46.66");
    System.out.println("Roundup: " + roundUp(a,2) + "\nRound Down: " + roundDown(a,2));
}

public static BigDecimal roundUp(BigDecimal a, int scale)
{
    return a.setScale(scale, RoundingMode.UP);
}

public static BigDecimal roundDown(BigDecimal a, int scale)
{
    return a.setScale(scale, RoundingMode.DOWN);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T19:54:13.277

您可以做的是使用 BigDecimal.valueOf 向上或向下舍入

```
 BigDecimal value = BigDecimal.valueOf(a); 
```

这可以补偿双精度数的表示误差，但是如果您也有一些算术舍入误差，这可能还不够。

相反，您需要确定最大的舍入误差是多少

```
public static double roundUp2(double d) {
    return Math.ceil(d * 100 - ERR)/100.0;
}

public static double roundHalf2(double d) {
    return Math.ceil(d * 100)/100.0;
}

public static double roundDown2(double d) {
    return Math.floor(d * 100 + ERR)/100.0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T17:45:59.183

我相信您真正需要的是执行以下功能：

```
private static void roundUp(double num, int decimalPlaces){

for (int i =0; i< decimalPlaces; ++i){
     num*=10; 
}

int tmp = (int) (num+0.5);
num = tmp;

for (int i =0; i< decimalPlaces; ++i){
     num = num/10; 
}
} 
```

并且您可以使用替代方法进行四舍五入，只需将“num+0.5”更改为“num - 0.5”。但是，由于机器浮点数错误，这可能会在打印时造成麻烦。但是你也可以为此做点什么。

# php - PHP Imap Auth 通过其他会话

> ID：12010452
> 
> 赞同：1
> 
> 时间：2012-08-17T17:33:03.423
> 
> 标签：php, imap

我有一个已经构建并运行的身份验证层的应用程序。我希望在此应用程序中添加一个小型 imap 客户端，但不确定如何处理 imap 身份验证。我一直构建身份验证系统来对密码进行加盐/哈希处理，然后立即销毁纯文本密码的任何痕迹......所以，我从来没有处理过我需要维护的密码的经验。

我希望用户能够从应用程序内（或在初始登录时）登录 imap，并在他们使用应用程序的其他功能时保持该登录。

任何提示都会很棒......谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-01T00:30:46.227

有关信息，我检查了圆形立方体代码，然后......

Roundcube 只需[加密密码并将其存储](https://github.com/roundcube/roundcubemail/blob/master/program/include/rcmail.php#L580)在会话中：

```
$_SESSION['user_id']      = $user->ID;
$_SESSION['username']     = $user->data['username'];
$_SESSION['storage_host'] = $host;
$_SESSION['storage_port'] = $port;
$_SESSION['storage_ssl']  = $ssl;
$_SESSION['password']     = $this->encrypt($pass);
$_SESSION['login_time']   = time(); 
```

`$this->encrypt($pass)`指的是[`rcube::encrypt`](https://github.com/roundcube/roundcubemail/blob/master/program/lib/Roundcube/rcube.php#L777)使用 MCrypt 应用 3DES 加密

然后[在需要时](https://github.com/roundcube/roundcubemail/blob/62350ba021d479e459cbbf7957841fbb440b9846/program/include/rcmail.php#L1956)[`rcube::decrypt`](https://github.com/roundcube/roundcubemail/blob/master/program/lib/Roundcube/rcube.php#L829)使用对称方法：

```
$host = $_SESSION['storage_host'];
$user = $_SESSION['username'];
$port = $_SESSION['storage_port'];
$ssl  = $_SESSION['storage_ssl'];
$pass = $this->decrypt($_SESSION['password']); 
```

顺便说一句，加密方法似乎使用了一种秘密盐（这里称为“crypto_key”）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T19:25:18.787

不幸的是，IMAP 协议要求您知道密码（共享密钥）才能对其进行身份验证。当您登录到 IMAP 时，您要么直接使用它，要么使用 CRAM-MD5 之类的东西。

但是，根据服务器的不同，您通常可以通过至少每 30 分钟发出一次 NOOP 来无限期地维护 IMAP 连接。但是，任何网络问题都需要您重新登录。

# unix - 查找和 Tar 多个文件，同时保留原始名称

> ID：12010453
> 
> 赞同：1
> 
> 时间：2012-08-17T17:33:03.767
> 
> 标签：unix, ksh

我想找到几个目录，并将每个目录都设为 Tar。我当前的 find 命令将文件名发送到文件以进行记录。

```
find ${SRC_DIR} -name ./* -level 0 -type d -mtime +14 -exec basename {} \; >>${FILE} 
```

这工作正常。现在我想获取我找到的每个文件并将它们全部打包，以便将它们命名为 OriginalFileName.tar。

有没有办法在一个命令中完成所有这些操作，如何让 Tar 文件具有原始文件名？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T21:18:54.990

这对您的问题有帮助吗：

```
for i in $(find ${SRC_DIR} -name ./* -level 0 -type d -mtime +14 -exec basename {} \;); do tar -cvf $i.tar $i; done 
```

# jquery - 按类型选择标签

> ID：12010454
> 
> 赞同：2
> 
> 时间：2012-08-17T17:33:05.577
> 
> 标签：jquery, css, jquery-selectors

在此标记中，我需要将标签文本“电子邮件”替换为“用户名”。我只能通过 jQuery 访问。

```
 <div class="foo" style="border:1px solid #444">
          <span class="field-with-fancyplaceholder">
          <label class="placeholder" for="pseudonym_session_unique_id" style="font-size: 13px;">
          <span>Email</span>
          </label>
          <input id="pseudonym_session_unique_id" class="text" type="text" size="30" name="pseudonym_session[unique_id]">
</span>
          <span class="field-with-fancyplaceholder">
          <label class="placeholder" for="pseudonym_session_password" style="font-size: 13px;">
          <span>Password</span>
          </label>
          <input id="pseudonym_session_password" class="text" type="password" size="30" name="pseudonym_session[password]">
          </span>
        </div> 
```

当我尝试这个

```
$('label:nth-of-type(1)').addClass('bar');  
$('.bar span').text('user name'); 
// because $('label:nth-of-type(1) span') doesn't work 
```

两个标签都被选中，两个跨度都说“用户名”。我怎样才能得到第一个？

[这是小提琴](http://jsfiddle.net/nathanbweb/j6nfv/)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T17:38:05.430

标签没有相同的父元素，并且`:nth-of-type`基于兄弟姐妹（具有相同父元素的元素）。

注意：`:nth-of-type`在原生不支持它的浏览器中没有被 jQuery 实现，这意味着它在 IE6 7 或 8 中不起作用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T17:35:25.277

您可以尝试`:contains`选择器：

```
$('.foo label span:contains("Email")').text('user name'); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-17T17:35:34.720

您可以通过更具体的属性更可靠地选择正确的元素：

```
$("[for=pseudonym_session_unique_id] > span").text("user name"); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-17T17:36:04.330

使用[`:eq`](http://www.w3schools.com/jquery/sel_eq.asp).

```
$('label:eq(0) span').text('user name');​ 
```

[小提琴](http://jsfiddle.net/enLag/)。

# ios - ios模拟器方向第二次错误

> ID：12010456
> 
> 赞同：2
> 
> 时间：2012-08-17T17:33:21.177
> 
> 标签：ios, simulator

我创建了一个只有三个视图的小应用程序。我只选择了 LandscapeRight 方向。在 iOS 模拟器中，只有第一个视图以横向显示。其他视图是纵向的。我可以旋转模拟器，但情节提要布局随之旋转并且显示不正确。info.plist 文件只有 (Landscape Right) 方向项。

亲切的问候泰迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T19:34:38.550

就像 Wilhelmsen 所说的那样，这很烦人，但您必须添加以下代码

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation{

return (toInterfaceOrientation == UIInterfaceOrientationLandscapeRight);

} 
```

但是，我还想补充一点，您必须将其添加到每个单独的视图控制器中，以便它也可以旋转到另一个视图。

例如，假设我有 viewcontroller_1 和 viewcontroller_2，我必须进入控制器的两个 .m 文件并添加以下代码。如果您不这样做，它可能不会针对其中一个视图旋转。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T17:43:53.113

是的，这很烦人，但是将其添加到您的 .m 文件中就可以了

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation{

return (toInterfaceOrientation ==      UIInterfaceOrientationLandscapeRight);

} 
```

# php - 包含文件的 PHP 输出缓冲

> ID：12010459
> 
> 赞同：0
> 
> 时间：2012-08-17T17:33:35.607
> 
> 标签：php, buffer, output-buffering

我有一个文件将根据某些条件包含其他文件，其中一个文件需要使用输出缓冲，以便可以将响应返回给浏览器，然后执行一些缓慢的操作。

如果我运行我想直接使用输出缓冲的文件，它可以正常工作，但如果我将此文件包含在另一个文件中，它就不起作用。

例如：

包含的文件：（不起作用）

```
if($action == 'blah'){
    require_once 'blah.php';       
} 
```

blah.php：（如果直接调用有效）

```
ob_start();
$buffer = ob_get_contents();
ob_clean();

header('Location: http://www.google.com');

ignore_user_abort(true);
ob_end_flush();

flush();

//Do slow stuff 
```

我怎样才能让它工作？

# ios - 如何将文件从文档复制到iOS中的应用程序包中？

> ID：12010465
> 
> 赞同：3
> 
> 时间：2012-08-17T17:34:14.337
> 
> 标签：ios, cocoa-touch

我想将文件从文档复制到 iOS 的资源文件夹中。

不是要记录的资源。

从文档到资源的文件。

所以我写了以下代码。

```
- (NSString *) getDBPath2 
{   
    NSString *dbPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"Htoo.mp3"];

    return dbPath;
}

- (void) copyDatabaseIfNeeded 
{
    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSError *error;
    NSString *dbPath = [self getDBPath];
    BOOL success = [fileManager fileExistsAtPath:dbPath]; 

    if(success) 
    {   
        NSString *defaultDBPath = [[NSBundle mainBundle] resourcePath];
        success = [fileManager copyItemAtPath:defaultDBPath toPath:dbPath error:&error];

        if (!success)
            NSAssert1(0, @"Failed to create writable database file with message '%@'.", [error localizedDescription]);
    }   
}

- (NSString *) getDBPath 
{
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory , NSUserDomainMask, YES);
    NSString *documentsDir = [paths objectAtIndex:0];
    return [documentsDir stringByAppendingPathComponent:@"Htoo.mp3"];
} 
```

当我编写上面的代码时，我收到了错误消息。

```
2012-08-17 23:55:03.482 TestProjects[1645:f803] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Failed to create writable database file with message 'The operation couldn’t be completed. (Cocoa error 516.)'.' 
```

那么如何将文件从文档复制到 iOS 中的 Resource 中呢？

谢谢你的阅读。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T19:08:45.133

您的应用程序（捆绑包）的资源是只读的，您无法在捆绑包发布后对其进行修改。bundle 包是 Xcode 在编译时创建的，你不能在运行时修改它。安装应用程序后，有很多方法可以存储数据：NSDefaults、sqlite、Core Data、文档目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-21T09:09:02.390

如果你想保存 MP3 那么你最好把它保存在缓存中：

```
 NSString *desPath = [NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES) objectAtIndex:0]; 
```

# php - php - 在数组中添加值

> ID：12010466
> 
> 赞同：1
> 
> 时间：2012-08-17T17:34:27.277
> 
> 标签：php, arrays

我正在尝试遍历一个多维数组，并添加一个新的子数组。我的代码没有返回任何错误，但也没有添加新项目。

我有以下代码：

```
foreach ($data['switches'] as $switch) {
    foreach ($switch['atags'] as $attributelist)  {
        $nohardwareAttribFound = false;

        foreach ($attributelist as $attribute) {
            $pos =  strpos(trim($attribute),'$attr_2_');

            if ($pos !==false)   {      

                //echo 'in the loop';
                //found it.  extract and exit loop
                $modelnumber = substr(trim($attribute),8);
                $hardwaremodel = array();
                $hardwaremodel['tag'] = 'hardware_model:'.$modelnumber;
                array_push($switch['atags'],$hardwaremodel);
                print_r($switch);
                //echo '<br>=====<br>';
                $nohardwareAttribFound = true;
            }   

        }//end foreach ($attributelist
    }// end foreach ($switch['atags']

    if ($nohardwareAttribFound==false) {
        $hardwaremodel['tag'] = 'Unknown';
        array_push($switch['atags'],$hardwaremodel);
    }//end if

}// end foreach ($data['switches'] 
```

我希望数据看起来像：

```
[atags] => Array ( 
  [0] => Array ( [tag] => $id_365 ) 
  [1] => Array ( [tag] => $typeid_8 ) 
  [2] => Array ( [tag] => $any_object ) 
  [3] => Array ( [tag] => $casd ) 
  [4] => Array ( [tag] => $unmounted ) 
  [5] => Array ( [tag] => $no_asset_tag ) 
  [6] => Array ( [tag] => $attr_2_1086 ) 
  [7] => Array ( [tag] => $untagged ) 
  [8] => Array ( [tag] => hardware_model:1086 ) ) ) 
```

其中最后一个数组 - element`[8]`代表我添加的一个新子数组。该`print_r()`语句看起来是正确的，但是当我遍历传递给我的视图的结果时，我可以看到实际上并没有添加一个新的标签数组。

我需要某种替换而不是替换`array_push()`吗？

如果在循环遍历数组时修改数组不是一个好主意，我可以简单地检查一个项目是否存在。我将如何检查每个开关的 ['atags'] 数组是否包含一个 [tag]，其值​​看起来像“$attr_2_NNNN”，其中 N 是一个数字？例如，检查上面示例数组中的元素 6。挑战在于它并不总是元素 6，并且您并不总是保证标签将具有 attr_2 值。我知道有一个`in_array()`功能......我会尝试类似的东西：

`if (in_array(array('$attr_2_'), $switches['atags']))`

我对 $nohardwareAttribFound 变量的逻辑有一个错误，我将对其进行修复。
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T17:44:51.420

首先：不建议在迭代时更改数组或集合。

如果您真的想这样做，那么您应该`$switch`按引用而不是按值获取。否则您可以更改`$switch`为您想要的任何内容，它不会反映在`$data['switches']`数组中。

要作为`$switch`参考，只需添加`&`：

```
foreach ($data['switches'] as &$switch) { 
} 
```

查看[`foreach`PHP 手册](http://php.net/manual/en/control-structures.foreach.php)。

**编辑**在研究了您的代码之后，我认为这就是您要寻找的内容：

```
foreach ($data['switches'] as &$switch) { 
    $hardwaremodel = array();
    $hardwaremodel['tag'] = NULL; // initialize to NULL so we can check at the end of the loop if we have found a hardwaremodel or not (so we don't need that bool)

    foreach ($switch['atags'] as $attributelist) { 
        foreach ($attributelist as $attribute) { 
            $pos = strpos(trim($attribute), '$attr_2_'); 
            if ($pos !== false) {
                $modelnumber = substr(trim($attribute), 8);
                $hardwaremodel['tag'] = 'hardware_model:' . $modelnumber;
                break;
            }
        }
        if ($hardwaremodel['tag'] !== NULL)
            break; // exit the loop because we already found a tag
    }

    if ($hardwaremodel['tag'] === NULL)
        $hardwaremodel['tag'] = 'hardware_model:unknown';

    // Note that this is a safe place to modify the $switch array
    // as we are not currently iterating it
    array_push($switch['atags'], $hardwaremodel); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T17:45:06.837

每次进入循环时，您的交互变量（即`$switch`）都是一个副本 - 您没有修改原始数组`$data`。为此，您需要修改完整路径，例如：

`array_push($data['switches']['atags'], $newVal)`

或者您可以在进入循环时通过引用传递，例如：

```
foreach ($data['switches'] as &$switch) 
{
   // ... 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T17:45:32.240

我认为你应该更换

```
foreach ($data['switches'] as $switch) 
```

和

```
foreach ($data['switches'] as &$switch) 
```

使用参考应该可以。

注意：之后使用 unset($switch) 来销毁引用。

# php - 为什么我的数组只返回最后一行

> ID：12010468
> 
> 赞同：2
> 
> 时间：2012-08-17T17:34:28.227
> 
> 标签：php, mysql, arrays

我已经搜索了该站点，但找不到答案或它与我的查询设置方式有何关系。这是我处理我的帖子数据并传递给数据库的文件。我有包裹在桌子周围的表格。表中的单元格由数组填充。当我离开此页面时，我希望将表格单元格中的值写入数据库中的新表格。表中的每一行代表 db 中的单独一行。

这是我所有帖子数据的来源。

```
 <form action="post_movement.php?class_id=<?php echo $class_id; ?>&pagenum=<?php echo $pagenum; ?>" method="post">
     <table border=1 width=800px>
 <tr>
 <th width=300px>Client</th>
 <th width=50px>Order</th>
 <th width=200px>Movements</th>
 <th>Sets/Reps/Seconds</th>  
 <th width=150px>Rest</th>
 <th>X Completed</th>
 </tr>

<?php

// Get workout class and output in table format -------------------------------------------------

if(empty($workout_class) === false)
{   
foreach($workout_class as $wc){
if ($wc['pagenum'] !== $pagenum) continue 1;

    echo '<tr>
        <td><input type="hidden" name="first_name[]" value="'.($wc['first_name']).'">'. ($wc['first_name']).'
        <span><input type="hidden" name="nickname[]" value="'.($wc['nickname']).'">('. ($wc['nickname']).')</span>
        <span><input type="hidden" name="last_name[]" value="'.($wc['last_name']).'">'. ($wc['last_name']).'</span>
        </td>
              <td><input type="hidden" name="order[]" value="'.($wc['order']).'">'. ($wc['order']). '</td>
              <td>
              <select name="movement[]" width=200>
              <option>'. ($wc['mv_00']). '</option>
              <option>'. ($wc['mv_01']). '</option>
              <option>'. ($wc['mv_02']). '</option>
              <option>'. ($wc['mv_03']). '</option>
              <option>'. ($wc['mv_04']). '</option>
        </select></td>
        <td><input type="hidden" name="rep_set_sec[]" value="'.($wc['rep_set_sec']).'">'. ($wc['rep_set_sec']). '</td>
        <td><input type="hidden" name="rest[]" value="'.($wc['rest']).'">'. ($wc['rest']). '</td>
        <td>00</td>
        </tr>';
  } // foreach($data_array
    //print_r($data_array);
} // if(!empty

?>

<! End Table ---------------------------------------------------------------------------------->
</table>
<input type="submit" value="Complete Movement">

</form> 
```

这是我的 php，它处理表单中的发布数据并将其提交给查询。

```
 if (empty($_POST)=== false){
$movement_data = array('user_id', 'class_id', 'class_name', 'first_name', 'last_name', 'nickname', 'order', 'movement', 'rep_set_sec', 'rest', 'date');
foreach($movement_data as $key => $value){
     $movement_data = array(
        'user_id'   => $session_user_id,
        'class_id'  => $_GET['class_id'],
        'class_name'    => $class_name,
        'first_name'    => $_POST['first_name'],
        'last_name'     => $_POST['last_name'],
        'nickname'  => $_POST['nickname'],
        'order'     => $_POST['order'],
        'movement'  => $_POST['movement'],
        'rep_set_sec'   => $_POST['rep_set_sec'],
        'rest'      => $_POST['rest'],
        'date'      => $today
        );
    }

    completed_movement($movement_data);
    //header('Location: new_client.php');
    //exit ();

    } 
```

这是我将 POST 数据插入数据库的查询。

```
 function completed_movement($movement_data){
array_walk($movement_data, 'array_sanitize');

$fields = '`' . implode('`, `', array_keys($movement_data)) . '`';
$data = '\'' . implode('\', \'', $movement_data) . '\'';

$query = mysql_query ("INSERT INTO `completed_movements` ($fields) VALUES ($data)");

} 
```

HTML 表单页面有两行数据，如下所示。

```
 Colby (Big Cheese) Dodson | 1A | Key Movement | Sets/Reps/Seconds | Rest|
    -------------------------------------------------------------------------
    Mike (Big Mac) Mckenzie   | 1A | Key Movement | Sets/Reps/Seconds | Rest| 
```

一个 var_dump ($_POST) 会产生这个。我可以看到那里的价值只是不确定它是否看起来像它应该的那样。

```
 array(7) { 
           ["first_name"]=> array(2) { 
               [0]=> string(5) "Colby" 
               [1]=> string(4) "Mike" } 
           ["nickname"]=> array(2) { 
               [0]=> string(10) "Big Cheese" 
               [1]=> string(7) "Big Mac" } 
           ["last_name"]=> array(2) { 
               [0]=> string(6) "Dodson" 
               [1]=> string(8) "McKenzie" } 
           ["order"]=> array(2) { 
               [0]=> string(2) "1A" 
               [1]=> string(2) "1A" } 
           ["movement"]=> array(2) { 
               [0]=> string(12) "Key Movement" 
               [1]=> string(12) "Key Movement" } 
           ["rep_set_sec"]=> array(2) { 
               [0]=> string(17) "Sets/Reps/Seconds" 
               [1]=> string(17) "Sets/Reps/Seconds" } 
           ["rest"]=> array(2) { 
               [0]=> string(4) "Rest" 
               [1]=> string(4) "Rest" } 
           } 
```

这是它在执行 var_dump 时的样子吗？

我需要数组的每一行看起来像这样。前三个值是 user_id、class_id 和 class_name，它们不是我在上一页中的 html 表单的一部分。这些值是在解析脚本页面上提取的，并与我的每一行结果一起传递。

```
 $row = array(29, 48, Class 1, Colby, Big Cheese, Dodson, 1A, Key Movement, Sets/Reps/Secons, Rest) 
```

我的表单中的每个条目都需要这样的一行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T17:38:15.200

```
while($row = mysql_fetch_assoc($query));
return $movement_data;

print_r($movement_data); 
```

您的`while`循环遍历整个数组 - 没有评估代码。当它完成时，它返回最后一个值，因为这是变量中唯一的项目。你`print_r`永远不会被评估。

编辑添加：

```
foreach($movement_data as $key => $value); 
```

您的 foreach 语句中还有一个尾随分号。那将有相同的结果。

再次编辑：

每个表单值都作为值数组传递；所以你需要做的是逐步遍历数组，并一一处理它们。下面的代码应该可以工作，但我还没有测试过。

它在数组上循环`$_POST["first_name"]`- 对于每个值，它填充一个临时数组，并将其传递给您的函数。其中一些值是硬连线的，有些来自等效的数组索引——第一次运行使用值为 0 的索引元素，依此类推。

```
$i = 0;
while (isset($_POST["first_name"][$i])) {
    $movement_data = array(   
        'user_id'   => $session_user_id,   
        'class_id'  => $_GET['class_id'],   
        'class_name'    => $class_name,   
        'first_name'    => $_POST['first_name'][$i],   
        'last_name'     => $_POST['last_name'][$i],   
        'nickname'  => $_POST['nickname'][$i],   
        'order'     => $_POST['order'][$i],   
        'movement'  => $_POST['movement'][$i],   
        'rep_set_sec'   => $_POST['rep_set_sec'][$i],   
        'rest'      => $_POST['rest'][$i],   
        'date'      => $today   
        );   

    completed_movement($movement_data);

    $i++;
} 
```

# windows - 杀死 IF 进程存在于 Windows

> ID：12010474
> 
> 赞同：2
> 
> 时间：2012-08-17T17:34:47.590
> 
> 标签：windows, if-statement, process, kill

我只想在进程存在的情况下杀死一个进程，我想这样做是因为我有一个工具，只有在没有错误的情况下才会运行，并且我做了一些测试，当我尝试杀死一个不存在的进程时确实出现了错误不存在。这是我用来终止进程的行：

```
taskkill /f /IM notepad.exe 
```

但我想验证它仅在进程存在时执行。

谢谢！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T17:49:37.477

取自[这个](https://superuser.com/questions/232703/taskkill-exe-dont-throw-an-error-if-the-process-is-not-running)问题，您应该尝试以下代码：

```
taskkill /f /im notepad.exe /fi "memusage gt 40" 2>NUL | findstr SUCCESS >NUL && if errorlevel 1 ( echo Notepad was not killed ) else ( echo Notepad was killed ) 
```

如果这没有帮助，你可以看看[这个](https://superuser.com/questions/232703/taskkill-exe-dont-throw-an-error-if-the-process-is-not-running)和[这个](https://stackoverflow.com/questions/854708/taskkill-in-an-if-condition)问题。

我希望它有帮助！

# java - Java SE 应用程序如何在我的 Windows NT 服务器上作为服务运行

> ID：12010476
> 
> 赞同：1
> 
> 时间：2012-08-17T17:34:49.040
> 
> 标签：java, windows-services

我有几个问题

1) 我们的应用程序使用 Jini2.0.02 (http://en.wikipedia.org/wiki/Jini) Jini 是一个分布式网络系统，它可以使其他 java 服务相互通信。

我的问题是这些 java 服务是如何出现在 Windows“服务”列表中的。我们的应用程序是在 java1.4.2_04 中开发的。

2) Java EE 应用程序运行在 Tomcat、JBoss 等应用程序服务器上，我们需要构建一个 EAR 来部署 Web 应用程序。

我的问题是；我需要以什么格式（jar/war/ear）构建 Java SE 应用程序？是否有任何应用服务器可以部署 Java SE 应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T22:40:09.250

1）如果你用谷歌搜索“Java Service Wrapper”，你可能会发现一些有趣的东西。

2）你是什么意思“Java SE应用程序”？它们只是一些jar文件吗？它们可以通过“java -jar app.jar”直接从命令行运行。WAR 和 EAR 是 Java EE 应用程序服务器的 Java EE 应用程序部署包的格式。

# javascript - 从 JSP 读取 javascript 响应

> ID：12010479
> 
> 赞同：1
> 
> 时间：2012-08-17T17:35:03.300
> 
> 标签：javascript, html, ajax, jsp, response

## 我是学习 AJAX 的新手，并且停留在第一个程序中。尝试调试但无法这样做。

下面是我的代码片段

----------input-ajax.html------

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>HTML PAGE</title>
<script type="text/javascript">
    var request=null;
    function createRequest(){
        try{
            request= new XMLHttpRequest();
        )catch(e){
            try{
                request=new ActiveXObject("Msxml2.XMLHTTP");
            }catch(e){
                try{
                    request= new ActiveXObject("Microsoft.XMLHTTP");
                }catch(failed){
                    request=null;
                }
            }
        }
        if(request==null){
            alert("Error Creating Request Object");
        }
    }
    function getName(){
        alert("getname called");
        createRequest();
        var url = "showName-ajax.jsp";
        request.open("POST",url,true);
        alert("before");
        request.onreadystatechange = updatePage;
        alert("after");
        request.send(null);
    }
    function updatePage(){
        //var newName= request.getResponseHeader("r1");
        var newName= request.responseText;
        var name1 = document.getElementById("name");
        replaceText(name1,newName);
    }
    function replaceText(el, text) {
          if (el != null) {
            clearText(el);
            var newNode = document.createTextNode(text);
            el.appendChild(newNode);
          }
    }

    function clearText(el) {
        if (el != null) {
            if (el.childNodes) {
              for (var i = 0; i < el.childNodes.length; i++) {
                var childNode = el.childNodes[i];
                el.removeChild(childNode);
              }
            }
        }
    }
</script>
</head>
<body>
<h1>WELCOME <span id="name"> GUEST</span></h1>
<form method="POST">
<input type="text" name="t1">
<input type="button" value="Show Name" onclick="getName();"/>
</form>
</body>
</html> 
```

----------showName-ajax.jsp------------

```
<%
    String s1=request.getParameter("t1");
    response.setContentType("text/plain");  
    response.setCharacterEncoding("UTF-8"); 
    response.getWriter().write(s1);       // Write response body.
 %> 
```

* * *

但是当我运行程序（单击按钮）时，什么也没有发生。甚至没有出现调用 getName 函数的警告消息。请帮忙！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T18:06:12.660

```
change )catch(e){  to }catch(e){ 
```

但是为什么每次单击按钮时都创建请求对象？您只需要在页面加载事件中调用一次“createRequest()”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T17:43:39.610

错字：

```
)catch(e){ 
```

应该

```
}catch(e){ 
```

这将在浏览器的控制台中显示为错误。如果事情没有按应有的方式工作，请务必先检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T17:43:55.020

你有一个 ) 而不是一个 } 这里：

```
try{
    request= new XMLHttpRequest();
)catch(e){ 
```

所以你的函数永远不会被定义。

# ruby-on-rails - 如何在 Rails 3 中呈现备用显示视图？

> ID：12010482
> 
> 赞同：1
> 
> 时间：2012-08-17T17:35:24.060
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在我的 Rails 3 应用程序中，我的“显示”视图呈现提交的表单。我想创建一个“信息”视图，显示来自同一个提交表单的不同数据。它基本上是一个替代的显示视图。

我将它放入我的控制器中，但它不起作用：

```
 def show
    @form = Form.find(params[:id])
  end

  def info
    @form = Form.find(params[:id])
    render :layout => 'info'
  end 
```

它所做的只是显示“显示”视图。我该如何纠正？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T17:43:19.677

问题一定出在其他地方，因为这两个动作看起来不错。在此示例中，您的`show`操作应该使用您的`show`视图，并且您的`info`操作应该使用您的`info`视图（尽管布局也称为“信息” - 您可能需要考虑重命名它，这样您就不会混淆布局和视图） .

您确定您的路线设置正确吗？`Form`您是否为您的模型设置了“信息”路线？IE

路线.rb：

```
resources :forms do
    get :info
end 
```

您是否正在导航到正确的 URL？（在这种情况下，*http://yourhost/forms/123/info*）？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-17T17:45:02.037

你可以打电话

```
 def info
    @form = Form.find(params[:id])
     render :action => 'show'
 end 
```

它将使用 info 方法中定义的 @form 实例变量，确保您有正确的路由设置

# c# - Silverlight 中的矩形颜色数据绑定

> ID：12010489
> 
> 赞同：0
> 
> 时间：2012-08-17T17:35:50.047
> 
> 标签：c#, silverlight, windows-phone-7

我希望列表选择器处于全屏模式。但这不是我的问题。我想要具有数据绑定的列表选择器，与 Windows Phone 设置页面中的“主题颜色”选择列表选择器完全相同。listpicker 应该有一个带有颜色填充的正方形和颜色名称。我知道如何使用绑定来获得颜色名称列表，但是`<Rectangle>`里面的标签`<DataTemplate>`不起作用。

这是 Listpicker 的 XAML

```
 <toolkit:ListPicker x:Name="lpkColor" Grid.Column="1" ExpansionMode="FullScreenOnly"  Margin="8,12,-8,20" FullModeHeader="Select Color" Header="Color">
            <toolkit:ListPicker.FullModeItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal">
                        <Rectangle Height="50" Width="50" VerticalAlignment="Center" Fill="{Binding color}" Margin="5,30,20,20"></Rectangle>
                        <TextBlock Text="{Binding ColorName}" VerticalAlignment="Center" FontSize="40"></TextBlock>
                    </StackPanel>
                </DataTemplate>
            </toolkit:ListPicker.FullModeItemTemplate>
        </toolkit:ListPicker> 
```

后面的代码如下所示：

```
 public class PickerObject
    {

        public string ColorName { get; set; }
        public Color color{get;set;}
        public PickerObject(string cn, Color c)
        {
            ColorName = cn;
            color = c;
        }

    } 
```

在我的 MainPage 类中

`List<PickerObject> MyColors = new List<PickerObject>();`

在我的构造函数中，我有：

```
 MyColors = new List<PickerObject>();
        MyColors.Add(new PickerObject("white",Colors.White));
        MyColors.Add(new PickerObject("black", Colors.Black));
        MyColors.Add(new PickerObject("blue", Colors.Blue));
        MyColors.Add(new PickerObject("yellow", Colors.Yellow));
        MyColors.Add(new PickerObject("red", Colors.Red));
        lpkColor.ItemsSource = MyColors ; 
```

但是 Listpicker 中没有显示 Rectangle，也没有显示颜色。我想知道我做错了什么，以及如何正确地做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T17:42:47.120

你的意思是这行不通？

```
<ListPicker.FullModeItemTemplate>
    <DataTemplate>
        <StackPanel Orientation="Horizontal">
            <Rectangle Margin="0,0,24,0
                       Width="50"
                       Height="50"
                       Fill="Red"/>
            <TextBlock Text="Red"/>
        </StackPanel>
    </DataTemplate>
</ListPicker.FullModeItemTemplate> 
```

或者你有另一个标记？

**更新**：现在是一个解决方案

一个不是简单地将矩形的`Fill`属性绑定到`Color`类型。
因为`Fill`属性是[这里](http://msdn.microsoft.com/en-us/library/system.windows.shapes.shape.fill%28v=vs.95%29.aspx)`Brush`所说的类型。

您可以扩展您的标记：

```
<Rectangle Width="50"
           Height="50">
    <Rectangle.Fill>
        <SolidColorBrush Color="{Binding color}"/>
    </Rectangle.Fill>
</Rectangle> 
```

或者您可以实现您的颜色到画笔转换器。像这样：

在您的代码隐藏中包括以下内容：

```
using System.Windows.Data;
using System.Globalization;

public class ColorToBrushConverter : IValueConverter
{
    public object Convert(object value, Type targetType,
                          object parameter, CultureInfo culture)
    {
        if (value is Color)
            return new SolidColorBrush((Color)value);
        return value;
    }

    public object ConvertBack(object value, Type targetType,
                              object parameter, CultureInfo culture)
    {
        return null;
    }
} 
```

然后在您的`XAML`包含此代码隐藏的名称空间。就像是：

```
xmlns:local="clr-namespace:YourNamespaceForConverterClass" 
```

还参考您的**Converter**类和命名`x:Key`属性在标记中包含本地资源字典：

```
<phone:PhoneApplicationPage.Resources>
    <local:ColorToBrushConverter x:Key="convertColorToBrush"/>
</phone:PhoneApplicationPage.Resources> 
```

最后，您可以使用转换器在您的`Rectangle`地址中使用它的`x:Key`名称：

```
<Rectangle Width="50"
           Height="50"
           Fill="{Binding color,
                  Converter={StaticResource convertColorToBrush}}"/> 
```

如果您计划经常使用转换，将**Converter**类放在应用程序资源字典（**App.xaml**文件）中可以节省您的时间，避免重复扩展标记。

但如果你直接使用`Brush`而不是`Color`我认为的更好。

# javascript - javascript - 所有浏览器自动关闭选项卡

> ID：12010490
> 
> 赞同：0
> 
> 时间：2012-08-17T17:35:57.257
> 
> 标签：javascript

弹出“谢谢”消失后，我想关闭浏览器选项卡。

```
<script language='javascript'>
alert('Thank you.'); 
window.close();
</script> 
```

但它没有用。为什么？？？

请帮忙。

**注：支持所有网络浏览器。**

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T17:38:30.767

`window.close()`仅适用于由 JavaScript 从同一来源打开的窗口。否则，它将阻止它，或者弹出一个确认框，询问用户是否允许关闭窗口。

代码本身没有任何问题 -`alert`正在阻塞，因此在继续执行脚本之前将等待`OK`按下按钮，但您需要确保以有效方式打开窗口。

# git - 如何从在同一台服务器上运行的共享 git 存储库获取文件内容

> ID：12010493
> 
> 赞同：0
> 
> 时间：2012-08-17T17:36:02.420
> 
> 标签：git

我有一个共享存储库（repository.git，没有项目文件，它们在实习 git 结构中）。

我们正在做管理 git 存储库的系统，这些存储库位于同一台服务器上。一个问题是，我需要从 master 分支打印出最新版本的文件。但我不知道怎么做，我试过`git show --pretty=format:"%b" filename`了，但它只是给了我两个最新版本的差异。但这没用。

我也尝试过`git cat-files`，但它需要文件的 sha1 哈希，文件路径对我不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T17:52:07.137

我认为这应该有效：`git show master:filename`

# wordpress - get_posts 不返回所有帖子

> ID：12010497
> 
> 赞同：29
> 
> 时间：2012-08-17T17:36:31.873
> 
> 标签：wordpress

我必须手动挂载博客文章，但我不确定这是否是正确的工作方式，它只有 9 页，每个页面有 4 个帖子，但博客有 83 个帖子！

```
<?php
    $paged = get_query_var('paged');
    $args = array(
        'numberposts'       => 4,
        'offset'            => $paged*4,
        'orderby'           => 'post_date',
        'order'             => 'DESC',
        'post_type'         => 'post',
        'post_status'       => 'publish',
        'suppress_filters'  => true
    );
    $posts_array = get_posts( $args );
?> 
```

不管怎么说，还是要谢谢你。

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-10-31T20:56:34.223

问题是您的“numberposts”设置为 4 将其设置为 -1 以获取所有帖子：

```
 'numberposts'       => -1, 
```

如果您未在此处设置 numberposts，WordPress 将从您的仪表板设置中提取帖子数量（在设置 -> 阅读下）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-18T05:07:59.660

以下注释来自此[法典部分](http://codex.wordpress.org/Template_Tags/get_posts)。

> 注意：使用偏移量时，上述查询只能用于其中包含多个帖子的类别，否则将没有输出。

因此，为了显示所有帖子，每个类别中应该至少有 2 个帖子。

您可以尝试[**循环**](http://codex.wordpress.org/The_Loop)来获取所有帖子。还要检查[循环运行](http://codex.wordpress.org/The_Loop_in_Action)。

# objective-c - 访问 cell.textLabel.text 中的文本

> ID：12010498
> 
> 赞同：2
> 
> 时间：2012-08-17T17:36:36.753
> 
> 标签：objective-c, ios, xcode, uitableview

这似乎是一件简单的事情，但我被困住了。

在我的情节提要中，我有一个带有标签的单元格（使用静态单元格）。在 didSelectRowAtIndexPath 中，我试图访问单元格的 textLabel 的文本。这是我的代码，带有 NSLogging：

```
UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
if (cell.textLabel.text) {
      NSLog(@"cell.textLabel.text = %@",cell.textLabel.text);
  } else {
      NSLog(@"!cell.textLabel.text");
  }
NSLog(@"just for fun: cell.textLabel.text = %@", cell.textLabel.text); 
```

if 语句总是返回 "!cell.textLabel.text" 并且最后一个 NSLog 总是 (null) 尽管故事板的单元格中有文本。

cell.textLabel 不正确吗？我应该查看 UITableViewCell 的另一个子视图吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T18:58:57.743

故事板中表格单元格的默认单元格样式为“自定义”类型。这为您提供了一个空白单元格，您可以在其中添加其他类型的控件。

如果您将标签拖到单元格上并更改其文本，那么您很可能使用 UITableViewCell 的自定义样式。

属性 textLabel 仅适用于除自定义之外的类型的单元格，例如基本或详细。

因此，您应该首先检查这些样式是否满足您的要求并改用它们。

如果您确实需要自定义类型的单元格，则需要创建 UITableViewCell 的子类并创建插座来访问您的标签。

# javascript - Node.js -“未捕获的错误：找不到模块“redis””

> ID：12010500
> 
> 赞同：2
> 
> 时间：2012-08-17T17:36:43.673
> 
> 标签：javascript, node.js, redis, brunch

我正在尝试在 Node.js 中[构建一个简单的“Twitter”风格的短信应用程序](https://github.com/humphreybc/humphreybc.com)，它使用 Redis 作为数据库（尽管我听说 MongoDB 可能更容易）......

我找到了一些指向[https://github.com/mranney/node_redis方向的链接，因此我使用](https://github.com/mranney/node_redis)**Brunch**设置了一个新的 Node.js 项目，并按照说明在我的项目目录中运行以下内容：

```
npm install redis hiredis 
```

然后，我将 auth.js 示例中的以下内容添加到 vendor/script.js

```
var redis  = require("redis"),
client = redis.createClient(); 
```

但是，当我运行 brunch w -s 时，我在控制台中收到以下错误：

```
Uncaught Error: Cannot find module "redis" 
```

我假设这与未包含在我的项目中的模块有关，但我不确定从哪里开始。我添加了

```
"redis": "latest" 
```

到我的 package.json 文件，但这似乎没有做任何事情。

我还尝试通过运行全局安装 redis 模块

```
sudo npm install -g redis 
```

但仍然没有运气。

我还应该补充一点，我在 OS X 上安装了 redis-server，我可以在终端中运行它：

```
$ redis-server
[2221] 17 Aug 10:48:42 # Warning: no config file specified, using the default config. In     order to specify a config file use 'redis-server /path/to/redis.conf'
[2221] 17 Aug 10:48:42 * Server started, Redis version 2.4.13
[2221] 17 Aug 10:48:42 * The server is now ready to accept connections on port 6379
[2221] 17 Aug 10:48:42 - 0 clients connected (0 slaves), 922304 bytes in use
[2221] 17 Aug 10:48:47 - 0 clients connected (0 slaves), 922304 bytes in use 
```

我的应用程序目录是标准的早午餐安装 -

```
app
config.coffee
generators
node_modules
package.json
public
README.md
test
vendor 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T05:33:06.437

Brunch 是 html5 应用程序组装器，而不是 node.js，你不能在那里需要节点模块。

# sas - 加入巨大的桌子

> ID：12010505
> 
> 赞同：0
> 
> 时间：2012-08-17T17:36:53.143
> 
> 标签：sas

我必须在 SAS 中执行以下逻辑：

```
If 
    the product field in Client_lookup table is ‘DC’  
    and if the client_nbr field in Client_lookup table matches with the client_nbr column in  Gforce_Auth table, 
then 
    the first six digits of merchant_number field in Gforce_Auth tables will be compared with the first six digit of current_account_number in the  Gforce_Auth tables.

If it becomes equal, then the In store column = ‘Y’ otherwise it is set to ‘N’. The in store column will be set to null if the client _nbr field is not same in both the tables. 
```

请让我知道如何加入这两个表并在加入时检查上述条件。

我尝试了合并语句，但没有奏效。提前致谢。

问候， 苏迪尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T20:35:05.330

我相信以下内容应该对您有用。有更有效的方法可以做到这一点，但我认为这个例子应该更容易理解。

```
proc sort data=Client_lookup;
   by client_nbr;
proc sort data=Gforce_Auth;
   by client_nbr;
run;

data New_File;
   merge client_lookup(in=in_client_lookup where=(product = 'DC'))
         Gforce_Auth  (in=in_gforce_auth);
   by client_nbr;
   format in_store $1.;
   format merchant_nbr6 cur_acct_nbr6 $6.;
   if in_client_lookup and in_gforce_auth then do;
      merchant_nbr6 = substr(left(merchant_number),1,6);
      cur_acct_nbr6 = substr(left(current_account_nbr),1,6);
      if (merchant_nbr6 eq cur_acct_nbr) then in_store = 'Y';
      else in_store = 'N';
   end;
   else do;
      in_store = ' ';
   end;
   drop merchant_nbr6 cur_acct_nbr6;
run 
```

# jquery - 如果应用了内联样式，如何从外部 css 文件中获取 css 属性？

> ID：12010506
> 
> 赞同：0
> 
> 时间：2012-08-17T17:36:54.500
> 
> 标签：jquery, css

如果内联样式应用于同一元素，如何使用 js/jquery 从外部源获取 css 属性？例子：

```
<div id="my" style='left:100px'>some content</div>
<style>
    #my{left:250px;}
</style> 
```

我想返回 250px，如果可以不删除内联样式的话？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T17:40:35.810

您可以在页面加载后更改标记吗？如果是这样，我会使用 jQuery 将样式属性更改为空值。然后我会通过 jQuery 得到左值。

```
var my = $('#my');
my.attr('style','');
var position = my.position();
alert(position.left); 
```

或者如果您不想缓存 var：

```
$('#my').attr('style','');
alert($('#my').position().left); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T17:54:48.003

我认为最好的选择是暂时删除内联样式，将其读出并放回原处。

当样式被移除时，您不会看到元素的任何图形更改。它只是太快了。

[http://jsfiddle.net/fp7UB/](http://jsfiddle.net/fp7UB/)

```
function readstyle() {
    var el = document.getElementById('my');
    var attr = el.getAttribute('style');
    el.setAttribute('style', '');
    var val = el.offsetLeft;
    el.setAttribute('style', attr);
    return val;
}​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T18:04:58.967

一种方法是`.css`通过 AJAX 下载文件（您可以使用易于使用的**jQuery** `$.get()`），然后使用[JSCSPP](http://glazman.org/JSCSSP/)或等效的东西（[另一个用 jQuery 编写的解析器](http://bililite.com/blog/2009/01/16/jquery-css-parser/)）对其进行解析。虽然这可能被认为是一种矫枉过正，但它为您提供了一个优势，即您可以在一个抓取过程之后访问所有规则。

# php - 未捕获的异常“PDOException”和消息“找不到驱动程序”使用 Sqlite：配置错误？

> ID：12010507
> 
> 赞同：0
> 
> 时间：2012-08-17T17:37:07.823
> 
> 标签：php, sqlite, pdo, driver

我在 Windows XP 上的 Apache 2.2 上运行 PHP 5.4.5。两次:-) 我认为两台机器的设置相同，但是一台机器工作正常，而另一台机器产生错误。（它们都是开发机器——一台用于开发，另一台是隔离测试员）

我已经启用了扩展 php_pdo.dll、php_pdo_sqlite.dll 和 php_sqlite.dll（尽管其中只有 php_pdo_sqlite.dll 在 ext 目录中，而 pdo_sqlite.dll 实际上被称为 php_sqlite3.dll - 但我知道那是一切都应该如此。）。

如果有帮助，这将在施工时失败。我用我自己的类包装 PDO：有问题的代码如下所示：

班级

```
ADO extends PDO {

    function __construct ($cnString = 'sqlite:..') {
        parent::__construct ($cnString);
        $this->setAttribute (PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    }
... 
```

但这并不能解释发生了什么，因为正如我所说，这在游戏机上运行良好。

我想我只是失明了，看不到明显的东西 :-) 有什么想法吗，伙计们？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T12:17:44.023

找到了！我是对的 - 很明显，我要失明了:-)

在 Apache 的 httpd.conf 中，在标记为 #BEGIN PHP INSTALLER EDITS... 的部分中，PHPIniDir 已被注释掉。不知道为什么，与我无关。一定是一个不确定的安装。但是，我对它进行了注释，现在一切都应该是这样。

想知道为什么 PHP 没有抱怨没有 ini 文件吗？（错误日志中没有任何内容）。一个值得关注的未来，我想。

感谢您提出的主要问题:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-25T13:07:15.047

切换到新的 PHP 版本后，我收到了相同的错误消息。解决方案很简单，但也许在这里发布它仍然可以帮助那些通过谷歌最终来到这里的人......

我仍然必须在我的 php.ini 文件中取消 pdo_mysql / pdo_mysqlite 扩展名（取决于您使用的是 mysql 还是 myslq lite 版本）所以取消这些行（去掉;）

```
;extension=php_pdo_mysql.dll
;extension=php_pdo_sqlite.dll 
```

# c# - 在控制器中获取强类型模型的“密钥”

> ID：12010511
> 
> 赞同：6
> 
> 时间：2012-08-17T17:37:20.567
> 
> 标签：c#, asp.net-mvc

所以我试图在控制器中获取模型对象的密钥，以便我可以添加一个`AddModelError`。

在我看来，我使用

```
@Html.ValidationMessageFor(model => model.Email) 
```

获取`Key`名称以添加到控制器中的等效代码是什么，以便它附加到此 ValidationMessage。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-17T18:32:34.627

您可以使用与 HtmlHelpers 相同的扩展，并且适用于嵌套属性：

```
public static class ModelStateExtensions
{
  public static void AddModelError<TModel>(this ModelStateDictionary dictionary, Expression<Func<TModel, object>> expression, string errorMessage)
  {
    dictionary.AddModelError(ExpressionHelper.GetExpressionText(expression), errorMessage);
  }
} 
```

所以你可以像这样使用它：

```
ModelState.AddModelError<TModel>(i => i.Person.Name, "test"); 
```

相当于

```
ModelState.AddModelError("Person.Name", "test"); 
```

它将生成与 Html 相同的 Id。在 MVC 源代码中，他们做了一些额外的清理工作，但使用正常的名称应该不成问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T17:42:22.533

```
ModelState.AddModelError("Email", "the email is invalid"); 
```

但通常这不是您应该在控制器中手动执行的操作，但您应该使用验证器。例如，您可以使用一些验证数据注释属性来装饰此 Email 属性，或者如果您像我一样使用[FluentValidation.NET](https://github.com/JeremySkinner/FluentValidation) => 这样您不应该问自己有关键的问题，而是专注于实际的验证逻辑。

# android - 画廊中带有按钮的文本视图

> ID：12010518
> 
> 赞同：-3
> 
> 时间：2012-08-17T17:37:46.457
> 
> 标签：android, android-layout, android-intent

我是 android 的新手。我不明白如何添加带有随所选图像更改的按钮的 textview。任何人都可以通过正确的代码帮助我。我该怎么做？非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T19:17:06.423

离开您的响应，设置一个集合或一个数组列表来保存您的对象，然后根据您单击的内容引用它们。

如果图像是活动中的唯一对象，那么您将如何使用单个图像执行此操作。

XML:

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    >

    <ImageView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/image"
        android:src="@drawable/YOUR_IMAGE_RESOURCE"
        />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Text for the picture"
        android:visibility="invisible"
        android:id="@+id/text"
        />

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Hello"
        android:id="@+id/button"
        android:visibility="invisible"
        />
</LinearLayout> 
```

爪哇

```
ImageView photoImage = (ImageView)findViewById(R.id.image);
TextView text = (TextView)findViewById(R.id.text);
Button button = (Button)findViewById(R.id.button);

photoImage.setOnClickListener(new OnClickListener{
    void onClick(View v){
        text.setVisibility(View.VISIBLE);
        button.setVisibility(View.VISIBLE);
    }
});

// Set the OnClickListener for "button" here, to start a new intent or whatever 
```

如果您使用多个按钮，请设置一个数组列表或集合，如我上面所述。

**[编辑]**

您将某些内容放入数组列表的代码如下所示...

```
List<TextView> tvs = new ArrayList<TextView>();
// Setup the views
for (int i = 0; i < numberOfTextViews; i++){
    TextView thisTextView = new TextView(context);
    // Setup whatever layout info you want here
    tvs.add(thisTextView);
}
// Use a view inflater here to add each of the textviews however you want (table layout, linearlayout, etc.) 
```

然后，您可以在此基础上做任何您想做的事情......只需使用`tvs.get(NUMBER)`来获取您正在寻找的任何东西。你可以用你的按钮或其他任何东西做同样的事情，并使用相同的 NUMBER 来同时引用你的字符串、文本视图和按钮。例如，单击 1 号按钮...您可以使用`tvs.get(1)`, `buttons.get(1)`,`stringResources.get(1)`

这更有意义吗？

# google-maps-api-3 - 谷歌地图 API 结果

> ID：12010519
> 
> 赞同：0
> 
> 时间：2012-08-17T17:37:50.987
> 
> 标签：google-maps-api-3

我在 maps.google.com 上搜索“ankara polis karakolları”，从链接中可以看出，谷歌返回了 10 多个结果：

[http://tinyurl.com/cssna5v](http://tinyurl.com/cssna5v)

当我使用此链接[http://maps.googleapis.com/maps/api/geocode/json?address=ankara+polis+karakollar%C4%B1&sensor=true](http://maps.googleapis.com/maps/api/geocode/json?address=ankara+polis+karakollar%C4%B1&sensor=true)获得相同的结果时，我只能获得 10 个结果，即与谷歌地图页面上显示的结果数量相同

有没有办法使用 Google Maps API 获取所有搜索结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T17:48:44.313

maps.google.com 上的结果与地理编码器返回的结果不同，它们还包括其他搜索结果（“Places”，请参阅[Google Places API](https://developers.google.com/places/documentation/)等）。

另外（对于它的价值）请参阅[常见问题解答中的此条目](https://developers.google.com/maps/faq#geocoder_differences)

# db2 - Websphere Commerce (WCS7) 礼品卡查询

> ID：12010520
> 
> 赞同：0
> 
> 时间：2012-08-17T17:37:56.367
> 
> 标签：db2, websphere, websphere-7, websphere-commerce, wcs

将礼品卡添加到购物车后（随机 WCS 示例：[https](https://store.sony.com/webapp/wcs/stores/servlet/SYGiftCardView?storeId=10151&categoryId=8198552921644551354&catalogId=10551&langId=-1) ://store.sony.com/webapp/wcs/stores/servlet/SYGiftCardView?storeId=10151&categoryId=8198552921644551354&catalogId=10551&langId=-1 ），什么 DB2 表“收件人”、“发件人”和“消息”的字段是否存储在其中？

可以运行什么查询来获取礼品卡的数据库信息。（例如个性化消息）具有该特定订单 ID？

您如何识别给定订单的特定礼品卡（添加到购物车的礼品卡）？礼品卡会有自己的唯一 ID，例如订单 ID/您在哪里可以找到礼品卡的唯一 ID？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:44:18.523

好像是定制的东西。我检查了信息中心和源代码，但没有相关信息。

在您在 Sony 网站上的示例中，礼品卡只是一种特殊产品。当您在产品上单击“添加到购物车”时，您会获得一个 OrderId 和一个 OrderItemId。

我猜他们将信息“From”和“To”放在一个自定义表中，其中 orderitemId 作为关系键，或者 orderitem 表的自定义字段（例如 field2 是一个 varchar）。

* * *

编辑

最后，表格 ORDERITEMGIFT 似乎符合您的意愿。您可以查看[信息中心说明](http://publib.boulder.ibm.com/infocenter/wchelp/v7r0m0/index.jsp?topic=/com.ibm.commerce.database.doc/database/orderitemgift.htm&resultof=%22ORDERITEMGIFT%22%20%22orderitemgift%22)

我不确定应该这样使用该表，但 GIFTMESSAGE 字段的描述看起来很有趣。

> 从礼物赠送者到礼物登记者的伴随礼物（订单项目）的消息。

* * *

希望我的回答有帮助。

问候， Dekx

# c++ - 追踪 COM 接口/SysAlloc 泄漏

> ID：12010523
> 
> 赞同：1
> 
> 时间：2012-08-17T17:38:12.377
> 
> 标签：c++, com, msxml

我继承了一些糟糕的 MSXML 解析代码（遗憾的是我没有时间重写）。这段代码充满了 COM 接口/BSTR 泄漏，原作者要么误用了手动 COM 引用计数（这似乎总是以泪水告终），要么他们使用了 COM 智能指针但错误地使用了它们，从而发生了泄漏。

我现在已经修复了代码中的许多泄漏，但我仍然发现当我调用 CoUninitialize() 时 msxml3.dll 没有被卸载（如果所有接口都已经消失，它应该是这样）并且正在使用更多内存比我预期的这段代码运行后。

我现在已经达到了我可以手动发现的极限，我正在寻找一种可以识别这些泄漏的调试解决方案。我过去使用 umdh 发现常规泄漏效果很好，但这似乎对 COM 泄漏没有太大帮助。任何人都可以推荐一个好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:43:01.413

试试 BoundsChecker（Micro Focus 产品）。如果您激活“COM 对象跟踪”功能，它将显示 COM 接口泄漏。它适用于 X86 和 X64 应用程序。就是说，您的里程可能会有所不同：我现在正在清理该代码（这就是我通过 Google 提出您的问题的原因），我们的下一个版本应该会更好。这个特殊的代码已经很多年没有被触及了。

关于 SysAlloc 泄漏，这是一个困难的领域，因为 IMalloc 类如何缓存已释放的内存，而不是真正释放它。如果时间和中断允许，我仍在该领域工作。

披露（如果还不是很明显）：我为 Micro Focus 工作，特别是 BoundsChecker。

# php - SQLSTATE[HY000] [2002] 错误

> ID：12010524
> 
> 赞同：0
> 
> 时间：2012-08-17T17:38:14.310
> 
> 标签：php, mysql, csv

我目前正在尝试将 CSV 文件中的数据插入到我的 mysql 数据库中。表单和所有功能都可以正常工作，因为我已经测试以确保它正在读取文件等。当我准备将 PDO 插入 mysql 时，我在 Chrome 中没有错误。现在，当我让它`execute()`在 Chrome（任何浏览器）中出现服务器错误时，我查看了我的错误日志文件，该文件显示在函数所说的位置：

```
SQLSTATE[HY000] [2002] 
   No connection could be made because the target machine actively refused it. 
```

我将把我的代码粘贴到我制作的函数上。
代码：

```
function returnBack(){

    header("Location:csvuploader/csvuploaderform.php?seterror=1");
    exit;

}

if (isset($_POST['submit'])){

    /*******************************CHECK TO MAKE SURE FORM IS PROPERLY FILLED AND GET NAME OF COLUMNS IN CSV FILE *********************************************************/
    if (empty($_FILES['file'] ) )
    {
        returnBack();

    } 
    if (empty($_POST['firstname'])){
        echo "firstname is empty";

        returnBack();
    }
    if (empty($_POST['lastname'])){
        echo "lastname is empty";

        returnBack();
    }if (empty($_POST['email'])){
        echo "email is empty";

        returnBack();
    }
    if (empty($_POST['phone'])){

        returnBack();
    }

    $file = $_FILES['file']['tmp_name'];    

    $handle = fopen($file , "r");

    $fileop = fgetcsv($handle,1000,",");

    $fileop=array_map("strtoupper",array_map("trim",$fileop));

    $firstname_index = array_search(strtoupper($_POST["firstname"]),$fileop);
    if ($firstname_index===false){
        returnBack();
    }
    $lastname_index = array_search(strtoupper($_POST['lastname']),$fileop);
    if ($lastname_index===false){

        returnBack();
    }
    $email_index = array_search(strtoupper($_POST['email']),$fileop);
    if ($email_index===false){

        returnBack();
    }
    $phone_index = array_search(strtoupper($_POST['phone']),$fileop);
    if ($phone_index===false){

        returnBack();
    }
    /***********************ASSIGN COLUMN VALUES TO ACCORDING VARIABLES AND INSERT THEM INTO CSV TABLE IN DB *************************************/
    try {  
  # MySQL with PDO_MYSQL  
  $DBH = new PDO("mysql:host=$hostname;dbname=$database", $username, $password);  
  $DBH->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );

    }  
    catch(PDOException $e) { 
        echo "I'm sorry, I'm afraid I can't do that.";  
        file_put_contents('PDOErrors.txt', $e->getMessage(), FILE_APPEND);   
    }
    /*$fileop = fgetcsv($handle,1000,",")*/
    while (($fileop=fgetcsv($handle)) !== false)
    {

        $fileop=array_map("trim",$fileop);

        $firstname = $fileop[$firstname_index];

        $lastname = $fileop[$lastname_index];

        $email = $fileop[$email_index];

        $phone = $fileop[$phone_index];

        $insertdata = $DBH->prepare("INSERT INTO csvdata (firstname, lastname, email, phone) VALUES ('$firstname','$lastname','$email','$phone')");
        //var_dump($insertdata);

        $insertdata->execute();

    }

}

$DBH = null; 
```

已更新------------------------- 这里有一些信息

PHP 信息 -`PHP Version 5.3.10, System Windows NT W03 6.0 build 6002 (Windows Server 2008 Standard Edition Service Pack 2) i586`

更新 - - - - - - - - - - - - - - - - - -

我能够连接到 MySQL 服务器并浏览它 - 从我制作的其他功能中插入数据，它们都可以完美运行。只是这个会给我一个错误。

更新 - - - - - - - - - - - - - - - - - - - - - - - - - ----------------------

想通了，感谢您的所有帮助。我实际上需要填写所有数据列才能使其工作。例如我有（名字，姓氏，电子邮件，电话）我需要填写用户名，密码，状态部分。感谢您的所有帮助！希望这会帮助任何陷入同一个洞的人！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T17:54:48.390

不一定是您的问题的一部分，但您错误地使用了准备好的 statmemnts。使用准备好的语句的部分目的是让数据库负责数据库特定的转义。为此，您使用占位符编写查询，然后将其替换为传递给语句的值。所以在这种情况下：

```
$insertdata = $DBH->prepare("INSERT INTO csvdata (firstname, lastname, email, phone) VALUES (?,?,?,?)"); 
$insertdata->execute(array($firstname,$lastname,$email,$phone)); 
```

或者使用更强大的命名占位符：

```
$insertdata = $DBH->prepare("INSERT INTO csvdata (firstname, lastname, email, phone) VALUES (:firstname, :lastname, :email, :phone)"); 
$insertdata->execute(array(
  ':firstname' => $firstname,
  ':lastname' => $lastname,
  ':email' => $email,
  ':phone' => $phone
)); 
```

现在，只要您的错误 ID 愿意打赌您使用`localhost`的主机名可能会导致 Windows 出现问题 - 请尝试`127.0.0.1`改用。例如：

```
$DBH = new PDO("mysql:host=127.0.0.1;dbname=the_db_name", $username, $password); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T23:58:41.717

想通了，感谢您的所有帮助。我实际上需要填写所有数据列才能使其工作。例如我有（名字，姓氏，电子邮件，电话）我需要填写用户名，密码，状态部分。感谢您的所有帮助！希望这会帮助任何陷入同一个洞的人！

```
while (($fileop=fgetcsv($handle)) !== false)
{

    $fileop=array_map("trim",$fileop);

    $firstname = $fileop[$firstname_index];

    $lastname = $fileop[$lastname_index];

    $email = $fileop[$email_index];

    $phone = $fileop[$phone_index];

    $csvusername = $firstname . $lastname;

    $csvpasswordname = $lastname . $firstname;

    $status = "Open";

    $sth = $DBH->prepare("INSERT INTO csvdata (firstname, lastname, email, phone, username, password, status, memberview) VALUES (?,?,?,?,?,?,?,?)"); 
    $sth->execute(array($firstname, $lastname, $email, $phone, $csvusername, $csvpasswordname, $status, $memberview));

} 
```

# wordpress - 在 Wordpress 中为 tinyMCE 创建的所有链接添加类

> ID：12010529
> 
> 赞同：1
> 
> 时间：2012-08-17T17:38:25.967
> 
> 标签：wordpress, tinymce, hyperlink

我正在尝试为单击 tinyMCE 中的“链接”按钮时创建的所有链接自动添加一个类。我在 tinyMCE 文档中找到了这个片段：

`// Adds a class to all paragraphs in the active editor tinyMCE.activeEditor.dom.addClass(tinyMCE.activeEditor.dom.select('p'), 'myclass'); I think this will be what I need if I change it to apply to anchors.`

**问题1**：认为这会奏效吗？知道更好的方法吗？

**问题 2**：如何以及在何处将此代码段添加到我的主题中？我正在使用的主题在函数目录中有一个 tinyMCE 文件夹。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T18:28:31.173

So I ended up doing a jQuery fix rather than going through tinyMCE. Code as follows:

```
jQuery(document).ready(function(){
    $("#content a").addClass("link_color");
}); 
```

# jsp - servlet 可以转发到提交请求的同一个 JSP 吗？

> ID：12010537
> 
> 赞同：0
> 
> 时间：2012-08-17T17:39:05.743
> 
> 标签：jsp, servlets

这是关于最佳实践的一般问题。我有一个带有搜索表单的 JSP。表单提交给 servlet，后者查询数据库并返回搜索结果。我想在表单下方显示结果，并让表单仍然填充原始搜索词。我知道我可以通过 Ajax 调用来做到这一点，但我想知道 servlet 将结果转发到发出请求的同一个 JSP 是否是个好主意，这样 JSP 可以显示表单，然后显示结果低于它。有更好的设计吗？感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T17:44:14.840

这种设计没有任何问题。您只需要记住 JSP 用于两种情况：第一次运行时，您不应该显示任何额外内容，以及在搜索结果中，应该呈现额外列表时。

如果您想要更简洁的方法，请将您的通用布局和表单提取到一个单独的 JSP 文件中，该文件永远不会被直接访问。然后有两个 JSP ，[包括](http://java.sun.com/products/jsp/tags/11/syntaxref1112.html)提取的一个。首先只做这个，第二个 - 也呈现下面的搜索结果包括 JSP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T17:44:56.580

在什么方面更好的设计？

没有什么不允许转发到发出请求的同一个 JSP。

这意味着将有 JSP 逻辑来显示结果与否，仅此而已——最坏的情况是单个条件。

您没有*必要*展示相同的 JSP，并且可能有令人信服的理由*不*展示，但它们更多的是 UX/组织问题而不是技术问题。

# html5-canvas - 动画中的画布渐变

> ID：12010541
> 
> 赞同：0
> 
> 时间：2012-08-17T17:39:19.147
> 
> 标签：html5-canvas

我在渲染径向渐变时遇到问题；事实上，只有渐变颜色列表中的最后一种颜色被渲染。前三个圆圈是动画的。渲染动画的渐变和更新循环之间是否存在冲突？谢谢这是我的代码：

```
 <!doctype html>

    <html lang="en">
    <head>
    <meta charset="UTF-8">
    <title>Disc and Animated-Circle</title>
    <style>
      #canvasOne {
         position: absolute;
            border: dotted 2px black;
            left: 50%;
            margin-left: -450px;
            top: 50%;
            margin-top: -250px;
      }
    </style>
    <script type="text/javascript">
      window.addEventListener("load", eventWindowLoaded, false);
      function eventWindowLoaded() {
         canvasApp();
          }
      function canvasApp() {
      var theCanvas = document.getElementById("canvasOne");
      var context = theCanvas.getContext("2d");
              drawScreen();
      function drawScreen() {
         //translation to centre canvas
         context.setTransform(1, 0, 0, 1, 0, 0);
         var x = canvasOne.width/2;
         var y = canvasOne.height/2;
         var circleWidth = 100;
         var circleHeight = 100;
         context.translate(x+.5*circleWidth, y+.5*circleHeight);
                 context.save();
             //speed
         r += speed;
         //canvas
         context.fillStyle = "blue";
         context.fillRect(-(canvasOne.width/2+circleWidth/2), -(canvasOne.height/2+circleHeight/2), canvasOne.width, canvasOne.height);
         //circle 1
         context.strokeStyle = "#66f";
         context.lineWidth = 4;
         context.beginPath();
         context.arc(-circleWidth/2, -circleHeight/2, r,(Math.PI/180)*0,(Math.PI/180)*360, false);
         context.closePath();
         //call circle 1
         context.stroke();
         context.restore();
         //circle 2
         context.strokeStyle = "#69f";
         context.lineWidth = 4;
         context.beginPath();
         context.arc(-circleWidth/2, -circleHeight/2, r+4,(Math.PI/180)*0,(Math.PI/180)*360, false);
         context.closePath();
         //call circle 2
         context.stroke();
         context.restore(); 
         //circle 3
         context.strokeStyle = "#6cf";
         context.lineWidth = 4;
         context.beginPath();
         context.arc(-circleWidth/2, -circleHeight/2, r+8,(Math.PI/180)*0,(Math.PI/180)*360, false);
         context.closePath();
         //call circle 3
         context.stroke();
         context.restore();
         //disc gradient
         var grad = context.createRadialGradient(100, 100, 0, 100, 100, 100);
         grad.addColorStop(0, 'white');
         grad.addColorStop(.5, 'grey');
         grad.addColorStop(1, 'black');
         context.fillStyle = grad;
                 //disc
         context.beginPath();
         context.arc(-circleWidth/2, -circleHeight/2, 100, (Math.PI/180)*0,(Math.PI/180)*360, false);
         context.closePath();
         //call disc
         context.fill();
      } //end drawScreen
    var speed = 20;
    var r = 100;
    setInterval(drawScreen, 200);
    } //end canvasApp
    </script>
    </head>
    <body>
       <canvas id="canvasOne" width="900" height="500">
       Canvas is not supported.
   </canvas>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T07:35:51.887

您的渐变中心位于 (100,100) 处，这不是圆的中心。

换行

```
var grad = context.createRadialGradient(100, 100, 0, 100, 100, 100); 
```

至

```
var grad = context.createRadialGradient(-circleWidth/2, -circleHeight/2, 0, -circleWidth/2, -circleHeight/2, 100); 
```

# c# - 如何获取特定 ListView 列的所有行中的值？

> ID：12010543
> 
> 赞同：1
> 
> 时间：2012-08-17T17:39:34.497
> 
> 标签：c#, .net, winforms

我有一个`ListView`三列，我在`ListView`. 我想获取每条记录的^(第二)列值的值。如何实施？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T17:47:38.677

```
var vals = listView1.Items.Cast<ListViewItem>().Select(lvi => lvi.SubItems[1].Text); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T17:51:16.863

```
// Convert items to an IEnumerable for LINQ usage
ListViewItem[] items = new ListViewItem[4];
listView.Items.CopyTo(items, 0);

// Use LINQ to get values
IEnumerable<string> secondColumnValues = items.Select(_ => _.SubItems[1].Text); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T17:44:17.527

遍历所有行并尝试这个。

Subitems[columnnumber] 将是必填字段的列号

lv.Items[i].SubItems[1].Text

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T08:29:40.753

```
foreach(ListViewItem itm in listView1.Items){ itm.Text/*first column of the particular item*/   itm.SubItem[1].Text/*second column of the particular item*/} 
```

因为 foreach 循环可以比 for 循环访问得更快

# php - PHP / Wordpress - 根据纬度和经度查找最近的位置

> ID：12010544
> 
> 赞同：2
> 
> 时间：2012-08-17T17:39:48.617
> 
> 标签：php, mysql, wordpress, geolocation

我现在可以使用我网站上的移动浏览器获取访问者的纬度和经度。我的网站上有一个包含 1000 多个位置的数据库，作为自定义 wordpress 内容类型的帖子。每个位置都有与之关联的纬度和经度。

我希望网站像这样工作：
当用户到达时，它要求他们分享他们的位置（完成）
然后将他们的纬度和经度存储在 PHP 变量中（EASY，NEXT）
现在获取他们的纬度和经度，并查询数据库，并列出最近的帖子，如下所示：
-----帖子标题 1（1.3 英里外）
-----帖子标题 2（1.7 英里外）
等。

如何在我的 wordpress 安装中使用 PHP 来执行此操作？

抱歉这么快就编辑了。我从谷歌找到了一个页面，看看它是否能满足我的需要。[https://developers.google.com/maps/articles/phpsqlsearch_v3?hl=hu-HU](https://developers.google.com/maps/articles/phpsqlsearch_v3?hl=hu-HU)

这里的主要问题，我的纬度和经度在数据库中是这样存储的：
表：wp_postmeta
Column1：meta_key（这包含许多不同的值，但我关心的是包含'location_latitude'或'location_longitude'的那些）
Column2：46.346940（包含 lat 或 long 数字，具体取决于 Column1 中的内容）

那么如何将此查询转换为与我的数据库一起使用？
`SELECT post_id, ( 3959 * acos( cos( radians(37) ) * cos( radians( LATITUDE ) ) * cos( radians( LONGITUDE ) - radians(-122) ) + sin( radians(37) ) * sin( radians( LATITUDE ) ) ) ) AS distance FROM wp_postmeta HAVING distance < 25 ORDER BY distance LIMIT 0 , 20;`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T17:45:05.833

试试[这个](http://sgowtham.net/blog/2009/08/04/php-calculating-distance-between-two-locations-given-their-gps-coordinates/)帖子。基本上你需要计算两个经纬对之间的距离。这将是一些球形数学，可能使用Haversine距离公式。

此外，如果您害怕数学，MySQL 确实支持[空间查询。](http://www.scribd.com/doc/2569355/Geo-Distance-Search-with-MySQL)

# android - 为预构建的 apk 编写 JUnit 功能测试

> ID：12010545
> 
> 赞同：0
> 
> 时间：2012-08-17T17:39:53.600
> 
> 标签：android, dependencies, apk

仍然相对绿色，我试图弄清楚是否可以针对预构建的应用程序无源代码编写 JUnit 功能测试。我找到了一种重新签署应用程序的方法，但我想知道如何将它作为我的测试的依赖项包含在 Eclipse 项目中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T18:51:05.790

是的，这确实可以使用 Java 反射。

除此之外，可能有必要退出您要测试的应用程序。从您的设备下载它（例如，使用 AppMonster 应用程序），使用 resign.jar (http://www.troido.de/re-sign.jar) 将其退出，然后使用 adb 再次安装。

之后，一切都应该正常工作。

```
@SuppressWarnings("rawtypes")
public class YourTestSuite extends ActivityInstrumentationTestCase2 {

    /** Package ID of the app under test. */
    private static final String TARGET_PACKAGE_ID = "com.something";

    /** ID of the app under test's main activity. */
    private static final String LAUNCHER_ACTIVITY_FULL_CLASSNAME = "com.something.HomeActivity";

    /** Launcher activity class. */
    private static Class<?> launcherActivityClass;

    /** Static code to find the activity class. */
    static {
        try {
            launcherActivityClass = Class
                .forName(LAUNCHER_ACTIVITY_FULL_CLASSNAME);
        }

        catch (ClassNotFoundException e) {
            throw new RuntimeException(e);
        }
    }

    /**
     * Constructor
     * 
     * @throws ClassNotFoundException
     */
    @SuppressWarnings("unchecked")
    public YourTestSuite() throws ClassNotFoundException {
        super(TARGET_PACKAGE_ID, launcherActivityClass);
    }

    /* Your test code comes here. */
} 
```

# javascript - JQuery / JavaScript MAC 地址验证

> ID：12010552
> 
> 赞同：8
> 
> 时间：2012-08-17T17:40:13.193
> 
> 标签：javascript, jquery

> **可能重复：**
> [什么是 MAC 地址的正则表达式？](https://stackoverflow.com/questions/4260467/what-is-a-regular-expression-for-a-mac-address)

我想验证一个字符串以确保它是一个有效的 MAC 地址。

Jquery 或 Javascript 中的任何想法？

我有以下内容：

```
var mystring= '004F78935612'  - This type of MAC Address
var rege = /([0-9a-fA-F][0-9a-fA-F]){5}([0-9a-fA-F][0-9a-fA-F])/;
alert(rege.test(mystring)); 
```

但它并不是那么准确。

IE。我的纸巾盒是有效的 MAC 地址？！？

谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-17T17:53:49.277

从[这个问题](https://stackoverflow.com/questions/4260467/what-is-a-regular-expression-for-a-mac-address)中获取正则表达式，您可以像这样实现它：

```
var mystring= 'Hello';

var regex = /^([0-9A-F]{2}[:-]){5}([0-9A-F]{2})$/;

alert(regex.test(mystring)); 
```

[http://jsfiddle.net/s2WDq/](http://jsfiddle.net/s2WDq/)

此正则表达式搜索字符串的开头`^`，然后是两个十六进制数字`[0-9A-F]{2}`，然后是冒号或破折号`[:-]`，五次以上`(...){5}`，然后是最后一组两个十六进制数字`[0-9A-F]{2}`，最后是字符串的结尾`$`。

编辑：针对您的评论，Pinch，该格式不被视为有效的 MAC 地址。但是，如果您想支持它，只需`?`在正确的位置添加一个：

```
/^([0-9A-F]{2}[:-]?){5}([0-9A-F]{2})$/
// question mark  ^ allows the colon or dash to be optional 
```

# android - JsonArray 解析

> ID：12010553
> 
> 赞同：1
> 
> 时间：2012-08-17T17:40:26.110
> 
> 标签：android, json, getjson

我正在解析一个 json 文件，但收到以下消息：**org.json.JSONException: End of input at character 0 of character 0 of** the file of the file is：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T17:45:01.537

您确定文件末尾没有空行吗？像这样：

```
[
{
code: "UNLC",
cours_jour: "40 020",
variation: "0.00"
},
{
code: "UNXC",
cours_jour: "7 450",
variation: "0.00"
}
]
<-- Empty line here! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T17:49:45.660

您的 JSON 对象字段需要用引号封装

IE

```
{
"code": "BOAC",
"cours_jour": "29 000",
"variation": "-1.69"
} 
```

JSON 文件是如何生成的？

- 编辑

您可以使用以下代码将页面下载为字符串，然后将其转换为 JSONArray，然后拉取每个 JSONObject。您不能在主线程上运行任何 Web 请求，因此要么扩展新的异步任务或线程，要么可以运行以执行以下操作

```
DefaultHttpClient httpclient = new DefaultHttpClient();
        HttpPost httpost = new HttpPost("http://www.impaxis-securities.com/securities/cours-actions/cours.json");
        httpost.setHeader("Accept", "application/json");
        httpost.setHeader("Content-type", "application/json");
        ResponseHandler<String> responseHandler = new BasicResponseHandler();
        String response;
        try {
                response = httpclient.execute(httpost, responseHandler);
                JSONArray arr = new JSONArray(response);
                int arrLength = arr.length();
                    if(arrLength > 0)
                    {
                        for(int i = 0; i < arrLength; i++)
                        {
                            JSONObject item = arr.getJSONObject(i);
                            String code = item.getString("code");
                            String cours_jour = item.getString("cours_jour");
                            String variation = item.getString("variation");
                            //Either insert to a DB or add to an array list and return it
                        }
                    }
                } 
        catch (ClientProtocolException e) {
            //Issue with web server 
            } 
        catch (IOException e) {
            //Issue with request
            } 
        catch (JSONException e) {
            //ISSUE Parsing JSON from site
        } 
```

- -编辑

我测试了代码，看起来 JSON 插件/REST 服务存在错误

[http://drupal.org/node/1433436](http://drupal.org/node/1433436)

# python - 删除 csv 文件中的现场引号

> ID：12010557
> 
> 赞同：0
> 
> 时间：2012-08-17T17:40:41.427
> 
> 标签：python, parsing, csv, awk, quotes

假设我们有一个逗号分隔的文件 (csv)，如下所示：

```
"name of movie","starring","director","release year"
"dark knight rises","christian bale, anna hathaway","christopher nolan","2012"
"the dark knight","christian bale, heath ledger","christopher nolan","2008"
"The "day" when earth stood still","Michael Rennie,the 'strong' man","robert wise","1951"
"the 'gladiator'","russel "the awesome" crowe","ridley scott","2000" 
```

从上面可以看出，在第 4 行和第 5 行中，引号中有引号。输出应如下所示：

```
"name of movie","starring","director","release year"
"dark knight rises","christian bale, anna hathaway","christopher nolan","2012"
"the dark knight","christian bale, heath ledger","christopher nolan","2008"
"The day when earth stood still","Michael Rennie,the strong man","robert wise","1951"
"the gladiator","russel the awesome crowe","ridley scott","2000" 
```

如何摆脱出现在 csv 文件中这样的引号内的此类引号（单引号和双引号）。请注意，单个字段中的逗号是可以的，因为解析器会识别它在引号内并将其作为一个字段。这只是安排 csv 文件的预处理步骤，以便可以将其输入多个解析器以转换为我们想要的任何格式。Bash、awk、python 都可以。请不要 perl，我厌倦了那种语言：D 在此先感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T17:58:23.070

怎么样

```
import csv

def remove_quotes(s):
    return ''.join(c for c in s if c not in ('"', "'"))

with open("fixquote.csv","rb") as infile, open("fixed.csv","wb") as outfile:
    reader = csv.reader(infile)
    writer = csv.writer(outfile, quoting=csv.QUOTE_ALL)
    for line in reader:
        writer.writerow([remove_quotes(elem) for elem in line]) 
```

产生

```
~/coding$ cat fixed.csv 
"name of movie","starring","director","release year"
"dark knight rises","christian bale, anna hathaway","christopher nolan","2012"
"the dark knight","christian bale, heath ledger","christopher nolan","2008"
"The day when earth stood still","Michael Rennie,the strong man","robert wise","1951"
"the gladiator","russel the awesome crowe","ridley scott","2000" 
```

顺便说一句，您可能想检查其中一些名称的拼写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T18:08:14.830

使用 awk 您可以执行以下操作：

```
awk -v Q='"' '{ gsub("[\"']","") ; gsub(",",Q "," Q) ; print Q $0 Q }' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T17:52:35.960

将值拆分为数组。遍历数组，删除除第一个和最后一个字符之外的所有引号。希望能帮助到你。

# iphone - UINavigationController 中的后退按钮

> ID：12010559
> 
> 赞同：0
> 
> 时间：2012-08-17T17:40:52.453
> 
> 标签：iphone, objective-c, ios, xcode4, uinavigationcontroller

所以，我很清楚，当在嵌入的类中按下后退按钮时`UINavigationControllers`，会调用前一个视图的`viewDidAppear()`方法。但是，我需要`viewDidLoad()`调用该方法，就像推`segue`入场景一样。有没有可能的方法来做到这一点？也许通过修改按下后退按钮时调用的方法？按下后退按钮时调用的方法是什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T18:00:58.437

首先 viewWillAppear 然后 viewDidAppear 在推回时被调用。对于视图的延迟加载，最好**在 viewWillAppear 中添加/操作 UI 子视图**，并在 viewDidDisappear 中将它们**设置为 nil 以**进行内存管理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T21:23:09.513

`viewDidLoad`仅在视图加载时调用。正在加载/卸载的视图和它们出现/消失的区别：视图可以在不卸载的情况下消失。通常 iOS 不会卸载视图，即使它被另一个视图隐藏/替换，除非发生内存不足的情况。

永远不要`viewDidLoad`自己打电话等（子类覆盖中的调用除外`super`）。

# java - 如何将泛型 bean 的属性绑定到动态创建的 Swing 组件

> ID：12010562
> 
> 赞同：1
> 
> 时间：2012-08-17T17:41:05.623
> 
> 标签：java, swing, generics, dynamic, binding

我正在用 Java 制作一个属性编辑器小部件。这个小部件将接收一个 java bean，对其进行复制，然后动态地创建一个带有 swing 组件的 JPanel 来表示该 bean 中的字段。我想将摇摆组件绑定到副本，以便在调用 getFinishedBean() 方法时，返回副本，并将其字段设置为摇摆组件中设置的值。我试图通过遍历每个字段、确定其类型、为其创建适当的 JComponent、将该组件绑定到 bean 副本，然后将该组件添加到面板来实现此目的。我的问题是 bean 的属性似乎没有被绑定。

这是绑定代码：

```
if((component instanceof JCheckBox))
            {
                JCheckBox checkBox = (JCheckBox) component;

                BeanProperty<JCheckBox, Boolean> jCheckBoxBeanProperty = BeanProperty.create("selected");
                BeanProperty<T, Boolean> beanProperty = BeanProperty.create(field.getName());
                AutoBinding<JCheckBox, Boolean, T, Boolean> autoBinding = Bindings.createAutoBinding(
                        UpdateStrategy.READ,
                        checkBox, jCheckBoxBeanProperty, finishedBean, beanProperty);
                autoBinding.bind();

                builder.append(field.getName() + ":", checkBox);
            } 
```

此代码段没有编译错误或警告，但finishedBean 的属性没有改变。我非常接近，我只需要将 JComponents 中的值获取到完成的 bean 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T12:48:38.413

正如 kleopatra 所说，绑定是经过调整的，因此应该正确绑定。

~~该属性`selected`不能直接绑定在 a `JCheckBox`（或任何其他从`JToggleButton`诸如扩展的组件`JRadioButton`）上，因为该属性不会在状态更改时传播。绑定安装了 a`PropertyChangeListener`但组件需要 a`ItemListener`来监听更改。~~

你有两个选择：

*   扩展`JCheckBox`创建时的添加，当发生事件时`ItemListener`触发属性更改；或者`selected``ItemEvent`
*   使用 bean 属性`action.selected`，因为与按钮本身不同，`Action`包含的实际上传播了属性更改，因此可以绑定。

~~我推荐第二种选择，因为它更干净。~~

# android - 将 AdMob 收入转移到广告系列

> ID：12010563
> 
> 赞同：1
> 
> 时间：2012-08-17T17:41:07.233
> 
> 标签：android, admob

我在 google play 上发布了一个应用程序并将 AdMob 集成到其中。我从 admob 赚了一点钱，现在我想用它来宣传我的应用程序。

但是，我不知道如何将资金从收入转移到广告基金。

我在谷歌上搜索过，人们接缝能够做到这一点，但我不知道怎么做。

任何帮助表示赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-17T19:53:33.393

这是可能的，但现在不是了。使用信用卡添加资金。

# javascript - 经典asp中的日期验证

> ID：12010567
> 
> 赞同：2
> 
> 时间：2012-08-17T17:41:20.737
> 
> 标签：javascript, asp-classic, vbscript

经典asp中的日期验证

我是经典 asp 的新手，在验证日期时遇到问题

```
dim Day,Month,Year,FullDate
Day = "01"
Month = "20"
Year = "2012"
FullDate = Month + "/" + Day + "/" + Year

document.write FullDate
document.write IsDate(FullDate)
document.write IsDate(CDate(FullDate))
document.write IsDate(20/01/2012) 
```

输出 ：

```
20/01/2012
true true false 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T17:46:10.450

如果您问为什么`document.write IsDate(20/01/2012)`不写`true`原因是因为您要求计算机进行除法，那么将其评估为日期。

`20/01 = 20 => 20/2012 ~= 0.01`

`IsDate(0.01) => false`

如果你真的想测试你所拥有的，试试这个（小调整）

```
Your: document.write IsDate(20/01/2012)
Mine: document.write IsDate("20/01/2012") 
```

* * *

另外，只是为了澄清[http://en.wikipedia.org/wiki/Date_format_by_country](http://en.wikipedia.org/wiki/Date_format_by_country)

一些国家使用

```
dd/mm/yyyy 
```

有些地方使用

```
mm/dd/yyyy 
```

这就是为什么国际标准组织建议你做一些最不具体的事情：

```
yyyy-mm-dd hh:mm:ss.ffffffffffff 
```

请注意，年 -> 月（哪个月比哪个年更具体）-> 天（事件发生在哪一天有帮助）-> 小时（不要迟到！）-> 分钟（按铃保存？） -> 秒（现在你知道它什么时候发生了）-> 几分之一秒（奥运游泳！！）

年份相当不具体。一年中发生了很多事情。所以那些应该总是首先解析。ISO方式是传递Date信息的首选方式，当年份不是第一个时，系统会尝试智能猜测。由于世界上有些地方有，有些地方有，`dmy`而且`mdy`你的起始两个数字中只有一个超过 12，它假设你的意思是`dmy`而不是`mdy`。这里没有WTF。

* * *

作为记录，这里列出了主要将月份放在首位作为`mdy`格式传统问题的国家列表（不包括不是传统而是科学的 ISO 格式）

*   伯利兹
*   密克罗尼西亚联邦
*   帕劳
*   美国

* * *

最后，如果您想编写一个函数来尝试为您重新解析日期：

考虑到人们倾向于用空格、句点、连字符或斜杠来分隔日期，他们可能将其写为“20120817”，或者也可能包括时间。中间可能有一个T，最后可能有一个Z。

样本输入：（以及它们代表的日期）

```
2011-08-17 (august 17th)
2011-08-01 (august 1st or jan 8th?)
08-01-2011 (august 1st or jan 8th?)
08-17-2011 (august 17th)
17-08-2011 (august 17th)
2011-17-08 (I've never seen this ever)

2011/08/17 (august 17th)
2011.08.01 (august 1st or jan 8th?)
08\01\2011 (august 1st or jan 8th?)
08-17-2011 (august 17th)
17 08 2011 (august 17th) 
```

正如您所看到的，这里必须进行大量的解析，这是假设它们有一个 10 位的字符串并且这 10 位是一个日期。以下是其他一些日期格式：

```
08-01-12   (was that January 8th, 2012 or January 12th, 2008 or August 1st, 2012 ...)
15-03-13   (ok, so we have found the month is March, but the other two?)
1-1-1
8-8-8      (these two are easy, but which rule do they match?) 
```

然后你必须解析

```
20120817
20121708
20120801
01082012
08172012 
```

如您所见，解析函数*似乎*很容易，但需要考虑很多，这只是日期。想让我们接下来谈谈时间吗？

```
201208171311   -> 2012-08-17 13:11    (1:11 PM)
20120817T1311  -> 2012-08-17 13:11    (1:11 PM)
20120817T0111P -> 2012-08-17 01:11 PM 
```

# algorithm - 对称 DDA 是什么意思？

> ID：12010568
> 
> 赞同：5
> 
> 时间：2012-08-17T17:41:24.240
> 
> 标签：algorithm, graphics, line-drawing, dda

我已阅读有关[DDA](http://en.wikipedia.org/wiki/Digital_differential_analyzer_%28graphics_algorithm%29)的信息。但我刚刚遇到了*对称 DDA*一词。它是什么 ？它与*DDA*有何不同？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T19:00:17.447

DDA（数字差分分析仪）算法用于线性（即直线）找出任何给定两点之间的插值点。现在，由于这是在数字计算机上完成的 - 速度是一个重要因素。

直线方程由 m=Δx/Δy eq(i) 给出，其中 Δx = x(2)-x(1) & Δy = y(2)-y(1)，
现在使用这个方程我们可以计算位于线上的连续点。但这是光栅图形的离散世界——所以我们需要积分坐标。

在简单的 DDA 中，eq(i) 被转换为 m=eΔx/eΔy，其中**e**，称为增量因子，是一个正实数。因为在分子和分母中放入相同的数字不会改变任何东西 - 但如果选择合适 - 它可以帮助我们生成离散点，从而减少必须四舍五入结果点的过载。

基本上我们需要做的是：将坐标增加一个固定的小量，从起点开始，每次我们有一个新点向终点前进。

在简单的 DDA 中 - *e*被选为 1/max(|Δx|,|Δy|) 使得其中一个坐标是整数，而只有另一个坐标必须是四舍五入的。即 P(i+1) = P(i)+(1,Round(e*Δy)) 这里一个坐标递增 1，另一个坐标递增 e*Δy

> 在对称 DDA 中 - *e*的选择使得*虽然*结果点的两个坐标都必须四舍五入，但它可以非常有效地完成，因此很快。

具体来说， *e*被选为 1/2^n，其中 2^(n-1) <= max(|Δx|,|Δy|) < 2^n。换句话说，线的长度被认为是 2^n 对齐的。两个坐标的增量为 e*Δx 和 e*Δy。With suitably chosen initial fraction part of the beginning coordinates: this causes the points to be generated as mixed fractions whose fractional parts are in a **cyclic series** , ie they repeat over a small length. 因此，可以根据两个固定长度的查找表轻松对结果坐标进行四舍五入，每个坐标一个。

有关示例，请参阅[http://w3.msi.vxu.se/~gsu/DAB726-Ht06/Symm-DDA.pdf 。](http://w3.msi.vxu.se/~gsu/DAB726-Ht06/Symm-DDA.pdf)
注意结果坐标的小数部分的循环重复。

# apache - 我可以使用 mod_rewrite 重定向到不同的 URL 吗？

> ID：12010570
> 
> 赞同：0
> 
> 时间：2012-08-17T17:41:30.107
> 
> 标签：apache, mod-rewrite

当我输入**http://www.example.com/index.php**到吹风机时
，我可以使用 rewriteRule 重定向到**http://www.example.com/web/index.php**

好的，现在如果我输入**http:// www.example.com/test.php**
但实际上 web/ 文件夹中不存在“test.php”文件
，该文件存在于 /admin 文件夹中
，所以我可以重定向到**http://www.example.com/管理员/test.php**？

使用**http://www.example.com/xxx.php**重定向到不同的 URL？
以下是我的 .htaccess 但它无法工作......

> 重写引擎开启
> 
> 重写规则 ^(.*)$ web/$1 [NC]
> 
> 重写规则 ^(.*)$ admin/$1 [NC]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T18:10:29.953

尝试使用这个：

```
RewriteEngine On

# checks if requested file exists in /web/
RewriteCond %{DOCUMENT_ROOT}/web%{REQUEST_URI} -f
RewriteRule ^(.*)$ /web/$1 [L]

# checks if requested file exists in /admin/
RewriteCond %{DOCUMENT_ROOT}/admin%{REQUEST_URI} -f
RewriteRule ^(.*)$ /admin/$1 [L] 
```

# html - 匹配特定 html 元素的适当正则表达式字符串是什么？

> ID：12010571
> 
> 赞同：1
> 
> 时间：2012-08-17T17:41:41.290
> 
> 标签：html, regex, visual-studio-2010, replace

我有大量的文本替换要做，我想尝试一次完成所有这些而不是手动完成。我正在尝试替换`<a class='stuff morestuff' href='#'>Some Text</a>`为`Some Text`; 基本上剥离了周围的锚标签。

我一直在使用正则表达式在 Visual Studio 中进行搜索/替换，但并没有真正做到。我最近的尝试：

找什么： `\<a class='stuff morestuff' href='#'\>(.+)\<\/a\>`

用。。。来代替： `$1`

**如果我想做的甚至是可行的，我该如何纠正我的正则表达式来完成这个？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T17:50:05.537

如果 class 和 href 始终相同，则此正则表达式将匹配您的锚点：

```
Find: \<a[^\>]class='stuff morestuff' href='\#'[^\>]*\>(.*)\</a\>
Replace: $1 
```

此正则表达式将用内部文本替换所有锚点：

```
Find: \<a[^\>]*\>(.*)\</a\>
Replace: $1 
```

我从您的帖子中假设您计划在 Visual Studio 的查找/替换中而不是在代码中使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T17:45:56.803

寻找：`\\<a class='.*?' href='#'>(.*?)\\</a\\>`

代替：`$1`

# android - 安卓应用兼容性

> ID：12010574
> 
> 赞同：0
> 
> 时间：2012-08-17T17:42:07.507
> 
> 标签：android, android-fragments, compatibility

我创建了一个目标 api 为 4.0.3 (15) 的应用程序，但是当我在我的 4.0 设备上运行该应用程序时，我在清单中设置了 min api 为 2.3.3 (10)我的 2.3 设备它不加载只是在启动时强制关闭...

我知道 android 在构建之间存在碎片问题，我想知道是否有一种简单的方法可以使应用程序在两个系统上都运行，或者我是否还必须编写 2.3 版本。我是新手编码员，所以请对我温柔。

```
08-17 18:57:15.722: D/AndroidRuntime(4535): Shutting down VM
08-17 18:57:15.722: W/dalvikvm(4535): threadid=1: thread exiting with uncaught exception (group=0x4001d5a0)
08-17 18:57:15.722: E/AndroidRuntime(4535): FATAL EXCEPTION: main
08-17 18:57:15.722: E/AndroidRuntime(4535): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.reading.festival/com.reading.festival.ReadingFestival2012Activity}: java.lang.ClassNotFoundException: com.reading.festival.ReadingFestival2012Activity in loader dalvik.system.PathClassLoader[/data/app/com.reading.festival-1.apk]
08-17 18:57:15.722: E/AndroidRuntime(4535):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1785)
08-17 18:57:15.722: E/AndroidRuntime(4535):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1893)
08-17 18:57:15.722: E/AndroidRuntime(4535):     at android.app.ActivityThread.access$1500(ActivityThread.java:135)
08-17 18:57:15.722: E/AndroidRuntime(4535):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1054)
08-17 18:57:15.722: E/AndroidRuntime(4535):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-17 18:57:15.722: E/AndroidRuntime(4535):     at android.os.Looper.loop(Looper.java:150)
08-17 18:57:15.722: E/AndroidRuntime(4535):     at android.app.ActivityThread.main(ActivityThread.java:4385)
08-17 18:57:15.722: E/AndroidRuntime(4535):     at java.lang.reflect.Method.invokeNative(Native Method)
08-17 18:57:15.722: E/AndroidRuntime(4535):     at java.lang.reflect.Method.invoke(Method.java:507)
08-17 18:57:15.722: E/AndroidRuntime(4535):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849)
08-17 18:57:15.722: E/AndroidRuntime(4535):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607)
08-17 18:57:15.722: E/AndroidRuntime(4535):     at dalvik.system.NativeStart.main(Native Method)
08-17 18:57:15.722: E/AndroidRuntime(4535): Caused by: java.lang.ClassNotFoundException: com.reading.festival.ReadingFestival2012Activity in loader dalvik.system.PathClassLoader[/data/app/com.reading.festival-1.apk]
08-17 18:57:15.722: E/AndroidRuntime(4535):     at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
08-17 18:57:15.722: E/AndroidRuntime(4535):     at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
08-17 18:57:15.722: E/AndroidRuntime(4535):     at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
08-17 18:57:15.722: E/AndroidRuntime(4535):     at android.app.Instrumentation.newActivity(Instrumentation.java:1040)
08-17 18:57:15.722: E/AndroidRuntime(4535):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1777)
08-17 18:57:15.722: E/AndroidRuntime(4535):     ... 11 more 
```

主要活动

```
package com.reading.festival;
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.Window;
import android.view.WindowManager;
import android.widget.Button;

public class ReadingFestivalGuide2012Activity extends Activity  {

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    //makes full screen and takes away title bar
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
    //

    setContentView(R.layout.main);

    Button sitemap = (Button) findViewById(R.id.sitemap);
    sitemap.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            Intent myIntent = new Intent(view.getContext(), sitemap.class);
            startActivityForResult(myIntent, 0);
        }
    });

    Button lineup = (Button) findViewById(R.id.lineup);
    lineup.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            Intent myIntent = new Intent(view.getContext(), lineup.class);
            startActivityForResult(myIntent, 0);
                }
            });
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T17:51:19.610

您需要检查 logcat 以了解确切的错误。您的错误可能是您正在使用对 2.3 设备上不可用的“更新”代码的调用。Logcat 是必须的（跟踪异常并找出应用程序的问题），但可以通过将目标 SDK 更改为 10 并检查编译错误来轻松检查我提到的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T19:08:37.793

好的，在阅读完我的代码后，我设法弄清楚我正在使用我现在发现的 xml 调用的东西在 14 以下的 api 中不受支持，删除了它，它现在可以工作了

# iphone - 使用#pragma 消息时如何禁用警告？

> ID：12010578
> 
> 赞同：2
> 
> 时间：2012-08-17T17:42:22.297
> 
> 标签：iphone, ios, cocoa-touch

我已经看到了一些关于此的项目，但需要使用#pragma 消息并且不要让它成为 iPhone / Xcode / 编译器上的警告。

```
#pragma message("some message text") 
```

导致警告。

`#ifndef`是的，我可以用for包围它

```
__APPLE__ 
```

但这很愚蠢....

禁用此警告的任何其他方法（有效）。

* * *

## 回答 #1

> 赞同：-4
> 
> 时间：2013-02-20T19:49:42.380

的重点`#pragma message`是生成用户定义的编译器警告。如果您不想看到警告，请将代码注释掉。

# php - 以 HH:MM:SS 格式获取时间间隔

> ID：12010583
> 
> 赞同：0
> 
> 时间：2012-08-17T17:42:52.277
> 
> 标签：php, date, datetime

我到处寻找一个简单的答案，但我一直无法找到一个有效或满足我要求的解决方案。

我正在遍历数据，看起来类似于：

```
Array
(
    [0] => 4c36fd909b37208b
    [1] => event:
    [2] => start_scan
    [3] => 2012-08-17 12:01:15
)
Array
(
    [0] => 4c36fd909b37208b
    [1] => sysaction:
    [2] => lower_device
    [3] => 2012-08-17 12:01:19
)
Array
(
    [0] => 4c36fd909b37208b
    [1] => event:
    [2] => how_to_use_displayed
    [3] => 2012-08-17 12:01:46
)
Array
(
    [0] => 4c36fd909b37208b
    [1] => event:
    [2] => scan_displayed
    [3] => 2012-08-17 12:01:59
)
Array
(
    [0] => 4c36fd909b37208b
    [1] => sysaction:
    [2] => layer_1_display_on_recognition
    [3] => 2012-08-17 12:02:23
) 
```

我想计算两个日期之间的时间，结果需要采用 HH:MM:SS 格式。在上面的示例数据中，我需要 2012-08-17 12:01:15 和 2012-08-17 12:02:23 之间的差异，应该是 00:01:08。

我曾尝试使用此处的代码：[http](http://www.if-not-true-then-false.com/2010/php-calculate-real-differences-between-two-dates-or-timestamps/) ://www.if-not-true-then-false.com/2010/php-calculate-real-differences-between-two-dates-or-timestamps/但它00:00:20 不断返回

我也试过这个（第一个数组中的日期保存为 $xpTime，最后一个数组中的日期设置为 $xpEndTimeTmp）：

```
$start = new DateTime($xpTime);
$end = new DateTime($xpEndTimeTmp);
$diff = $start->diff($end);
$xpDuration = date('H:i:s', strtotime($diff->h.':'.$diff->i.':'.$diff->s)); 
```

但这似乎也有效（它返回相同的小时、分钟和不同的秒）。

我希望有人可以帮助我，告诉我我做错了什么，或者有可以让我走上正轨的示例代码！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T17:49:52.940

```
$t1 = '2012-08-17 12:01:15';
$t2 = '2012-08-17 12:02:23';

echo gmdate("H:i:s", strtotime($t2) - strtotime($t1)); 
```

### 结果

```
00:01:08
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T17:53:12.573

此版本也适用于时差超过 24 小时：

```
$start = strtotime('2012-08-17 12:01:15');
$end = strtotime('2012-08-17 12:02:23');
$delta = $end - $start;

$hours = floor($delta / 3600);
$remainder = $delta - $hours * 3600;
$formattedDelta = sprintf('%02d', $hours) . gmdate(':i:s', $remainder);
echo $formattedDelta; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T18:10:45.637

如果您只想知道如何计算时差，则无需在您的问题中提供所有代码。
一个简单的：“我需要 2012-08-17 12:01:15 和 2012-08-18 12:02:23 之间的区别，应该是 24:01:08”会更清楚。在这种情况下，Janis Elsts 的回答打败了我 :)

但是，如果您出于某种原因将示例代码放在那里，因为您还想知道如何获取第一次和最后一次，您应该查看[多维数组](http://webcheatsheet.com/php/multidimensional_arrays.php)（结合工作时差例程）。

因此，假设您已将所有单个数组填充到一个名为 的包装数组中`$log`，那么您将执行以下操作：

```
$timeDiff = strtotime(end($log)[3]) - strtotime(reset($log)[3]);

$hours = floor($timeDiff / 3600);
$remainder = $timeDiff - $hours * 3600;
$formattedTime = sprintf('%02d', $hours) . gmdate(':i:s', $remainder);
echo $formattedTime; 
```

# java - 如何获得真正的JPanel Size？

> ID：12010587
> 
> 赞同：10
> 
> 时间：2012-08-17T17:43:13.263
> 
> 标签：java, swing, size, jpanel

我应该如何在 JFrame 中获得真正的 JPanel 大小？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-17T18:09:22.010

尺寸会`0,0`一直到显示为止，因为组件和布局没有事先计算。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-17T17:56:40.493

`thePanel.getSize();`

这将返回维度。

我有时会添加一个 ComponentListener 以在调整面板大小时显示尺寸。

编辑：如果你想要 JFrame 的内容窗格的大小，那么

```
theFrame.getContentPane().getSize(); 
```

# ruby-on-rails - 从 Rails 应用程序发送电子邮件——在 Heroku 上的开发中，而不是在生产中

> ID：12010588
> 
> 赞同：1
> 
> 时间：2012-08-17T17:43:18.103
> 
> 标签：ruby-on-rails, heroku, devise, actionmailer, activeadmin

我正在尝试使用 gem Active Admin 向我注册的用户发送电子邮件，以便他们可以创建密码。

这需要在 config/environments/development.rb 中插入以下代码的过程

```
 #Added per active admin install instructions
 config.action_mailer.default_url_options = { :host => 'localhost:3000' }

 #These settings are for the sending out email for active admin and consequently the devise mailer
 ActionMailer::Base.delivery_method = :smtp
 ActionMailer::Base.perform_deliveries = true
 ActionMailer::Base.raise_delivery_errors = true
 ActionMailer::Base.smtp_settings = 
 {

   :address            => 'smtp.gmail.com',
   :port               => 587,
   :domain             => 'gmail.com', #you can also use google.com
   :authentication     => :plain,
   :user_name          => 'XXX@gmail.com',
   :password           => 'XXXX'
 } 
```

这没有问题

用于部署到 Heroku 上的生产站点。我将以下代码插入到 config/environments/production.rb

```
 #Added per active admin install instructions
 config.action_mailer.default_url_options = { :host => 'http://XXXX.herokuapp.com/' }

 #These settings are for the sending out email for active admin and consequently the devise mailer
 ActionMailer::Base.delivery_method = :smtp
 ActionMailer::Base.perform_deliveries = true
 ActionMailer::Base.raise_delivery_errors = true
 ActionMailer::Base.smtp_settings = 
 {

   :address            => 'smtp.gmail.com',
   :port               => 587,
   :domain             => 'gmail.com', #you can also use google.com
   :authentication     => :plain,
   :user_name          => 'XXX@gmail.com',
   :password           => 'XXX'
 } 
```

但是现在电子邮件没有发送。相反，我在浏览器中看到“我们很抱歉出现错误”消息，并且日志显示以下几行

```
2012-08-17T17:39:34+00:00 app[web.1]:     cache: [GET /admin/admin_users/new] miss

2012-08-17T17:39:34+00:00 app[web.1]: Started POST "/admin/admin_users" for   96.49.201.234 at 2012-08-17 17:39:34 +0000
2012-08-17T17:39:35+00:00 app[web.1]: Net::SMTPAuthenticationError (535-5.7.1 Please log   in with your web browser and then try again. Learn more at

2012-08-17T17:39:35+00:00 app[web.1]: ):
2012-08-17T17:39:35+00:00 app[web.1]:   app/models/admin_user.rb:35:in `block in <class:AdminUser>'

2012-08-17T17:39:35+00:00 app[web.1]: cache: [POST /admin/admin_users] invalidate, pass 
```

我应该从这里去哪里？有人可以帮我一把吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T04:18:46.173

以下是来自 Gmail 的有用帮助：http: [//support.google.com/mail/bin/answer.py](http://support.google.com/mail/bin/answer.py?hl=en&answer=14257&p=client_login) ?hl=en&answer=14257&p=client_login 。

问题是 Gmail 阻止了可能是机器人的可疑登录尝试。我们需要授予应用程序权限，以便它可以使用 Google 帐户发送电子邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T14:26:02.873

试试下面的代码：

```
 ActionMailer::Base.smtp_settings = 
 {

   :address              => 'smtp.gmail.com',
   :port                 => 587,
   :domain               => 'gmail.com', #you can also use google.com
   :authentication       => 'plain',
   :user_name            => 'XXX@gmail.com',
   :password             => 'XXX',
   :enable_starttls_auto => true
 } 
```

所做的更改：
1.`:authentication => :action`到`:authentication => 'plain'`
2\. 已添加`:enable_starttls_auto => true`，如上面 janders223 所述。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T20:10:27.840

Gmail 需要 SSL 连接到他们的邮件服务器。尝试将此添加到您的 SMTP 设置中：

```
:enable_starttls_auto => true 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-29T12:58:52.510

[http://www.google.com/accounts/DisplayUnlockCaptcha](http://www.google.com/accounts/DisplayUnlockCaptcha)单击此并授予访问权限。下次它会工作

# iphone - 内存泄漏：在线分配的对象的潜在泄漏

> ID：12010591
> 
> 赞同：0
> 
> 时间：2012-08-17T17:43:30.713
> 
> 标签：iphone, objective-c

这是我的第一篇文章，所以我希望格式没问题。

我得到这个泄漏“在线对象的潜在泄漏”，我无法弄清楚。也许我看得太难了，因此我看不到问题所在。有人可以帮我吗？

问题是：appDelegate.imageText

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    PListFirstAppDelegate *appDelegate = (PListFirstAppDelegate *)[[UIApplication sharedApplication]delegate];

    appDelegate.imageText= [[NSString alloc]initWithFormat:@"%@",[[array objectAtIndex:indexPath.row]objectForKey:@"image"]];

    //NSLog(@"%@", appDelegate.imageText);

    NavigationalDescription *detailViewController = [[NavigationalDescription alloc] initWithNibName:@"NavigationalDescription" bundle:nil];

     // Pass the selected object to the new view controller.

     [self.navigationController pushViewController:detailViewController animated:YES];
     [detailViewController release];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T17:51:05.737

每次使用任何 init 方法实例化一个对象时，都必须在某处释放它，或者调用 autorelease。

返回某些内容的类方法应始终自动释放。

所以而不是使用`[[NSString alloc] initWithFormat...]`

`[NSString stringWithFormat:@"%@", myString]`改为做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T17:52:28.797

将代码替换为

```
 appDelegate.imageText= [[NSString alloc]initWithFormat:@"%@",[[array objectAtIndex:indexPath.row]objectForKey:@"image"]]; 
```

和

```
appDelegate.imageText= [NSString stringWithFormat:@"%@",[[array objectAtIndex:indexPath.row] objectForKey:@"image"]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T17:47:05.917

您应该在该行的末尾添加一个自动释放调用。iPad不会让我复制粘贴代码:(所以现在没有例子。

```
appDelegate.imageText= [[[NSString alloc]initWithFormat:@"%@",[[array objectAtIndex:indexPath.row]objectForKey:@"image"] ] autorelease]; 
```

您是说将对内存管理的控制权委托给 imagetext 实例。他们应该根据需要保留字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T17:48:26.420

```
appDelegate.imageText= [[NSString alloc]initWithFormat:@"%@",[[array objectAtIndex:indexPath.row]objectForKey:@"image"]]; 
```

您正在将分配的字符串分配给图像文本属性。属性分配应该是自动释放的字符串。imageText 应该是一个保留属性，因此保留分配给它的字符串的值。如果是保留，则您是双重保留，因此会泄漏对象。

# java - 使用数组设置一周的第一天

> ID：12010593
> 
> 赞同：0
> 
> 时间：2012-08-17T17:43:34.877
> 
> 标签：java, android, date, calendar

我有一个字符串数组，其中包含工作日的名称：

```
private final String[] weekdays = new String[]{"Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"}; 
```

默认情况下，我已将星期一设置为一周的第一天。

现在，我为用户提供了选择是否要将星期日或星期一设置为一周的第一天的选项：

```
if (firstDay == 0) {
    holder.txtWeekdays.setText(weekdays[position]);
 } 
```

使用相同的字符串数组如何将星期日设置为一周的第一天？

```
else {
     holder.txtWeekdays.setText(weekdays[position]-1);  //this returns an error 
} 
```

**更新代码：**

```
public class CalendarWeekAdapter extends BaseAdapter{

private final String[] weekdays = new String[]{"Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"};
Context mContext;

   private LayoutInflater mInflater;
   public CalendarWeekAdapter(Context c)
   {
          mContext=c;
          mInflater = LayoutInflater.from(c);
   }
   public int getCount()
   {
          return weekdays.length;
   }
   public Object getItem(int position)
   {
          return position;
   }
   public long getItemId(int position)
   {
          return position;
   }
   public View getView(int position, View convertView, ViewGroup parent)
   {
          ViewHolder holder=null;
          if(convertView==null)
          {
                 convertView = mInflater.inflate(R.layout.calendar_week_gridcell, parent,false);
                 holder = new ViewHolder();
                 holder.txtWeekdays=(TextView)convertView.findViewById(R.id.weekdays);
                 if(position==0)
                 {                             
                       convertView.setTag(holder);
                 }
          }
          else
          {
                 holder = (ViewHolder) convertView.getTag();
          }

          if (firstDay == 0) {
              holder.txtWeekdays.setText(weekdays[position]);
          }
          else {
              holder.txtWeekdays.setText(weekdays[position]); 
          }

          return convertView;
   }

}
static class ViewHolder
{        
      TextView txtWeekdays;                 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T18:08:20.227

虽然它不能直接回答您的问题，但最好将其实现为枚举，如下所示：

```
/*
 * Easily Localize these by setting the short and long day
 * names using standard Java localization techniques
 * 
 * */
enum DayOfWeek {
    MONDAY("Mon", "Monday"), 
    TUESDAY("Tue", "Tuesday"),
    WEDNESAY("Wed", "Wednesday"),
    THURSDAY("Thurs", "Thursday"),
    FRIDAY("Fri", "Friday"),
    SATURDAY("Sat", "Saturday"),
    SUNDAY("Sun", "Sunday");

    DayOfWeek(final String shortDayName, final String longDayName) {
         this.shortName = shortDayName;
         this.longName = longDayName;
    }

    public String shortName() {
        return shortName;
    }

    public String longName() {
        return longName;
    }

    private final String shortName;
    private final String longName;
} 
```

然后这些值更容易被操纵甚至本地化。您可以编写一个方法，该方法采用 DayOfWeek 并在经过一天后返回第二天和前一天等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T17:48:31.623

您正在尝试从字符串中减去 1。那是行不通的。

您需要做的是创建一个返回星期几的方法。像这样的东西：

```
public String getDayOfWeek(int day, int firstDay) {
   String[] weekdays;
   if (firstDay == 0)
      weekdays = new String[]{"Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"};
   else
      weekdays = new String[]{"Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"};
   return weekdays[day];
} 
```

现在，您可以按位置（使用`weekdays[position - 1]`）执行此操作，但以上内容将帮助您避免代码中的错误（例如索引 -1），并让您更清楚地了解返回的内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T17:50:02.893

在这种情况下我会做的是

```
private final String[] weekdays = new String[]{"Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"}; 
```

和

```
if (user selected monday) {
    days_start_index = 1;
    days_end_index = 7;
} else {
    days_start_index = 0;
    days_end_index = 6;
} 
```

您可以通过以下方式使用它...

```
for (int i=days_start_index; i<=days_end_index;i++)
    // Do whatever you want 
```

**编辑** 要访问`n`一天，您应该使用...

```
weekdays[n-1+days_start_index] 
```

**或者**

否则可以通过这种方式进行调整：

```
if(position==0){
    position = 7;
}
holder.txtWeekdays.setText(weekdays[position-1]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T17:50:34.363

你可以这样做：

```
holder.txtWeekdays.setText(weekdays[position == 0? weekdays.length - 1 : position - 1]); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T17:50:50.833

我不太确定你的位置变量来自哪里，但在你的思路中，以下方法会起作用：

```
holder.txtWeekdays.setText(weekdays[position-1]) 
```

我建议使用枚举来代替一周中的日子。这将更具可读性。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-17T17:56:18.607

首先，我建议在工作日使用枚举，因为它是有限且预定义的，而且您不会有 ArrayIndexOutOfBoundsException。其次，我会创建周抽象，因为它取决于上下文（例如，通常工作周只有 5 天，但在以色列它从星期日开始），所以这个抽象将有开始日和工作日的集合。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-17T17:48:15.767

它应该是 [position -1] 而不是**weekdays[position]-1**。并检查位置 ==0 （索引错误）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-17T17:48:26.943

也许我错了，但你想要这样的东西吗？

```
else {
     holder.txtWeekdays.setText(weekdays[weekdays.length - 1]); 
} 
```

如果你想要 las 索引：

```
else {
     holder.txtWeekdays.setText(weekdays[position - 1]); 
} 
```

# c - 复杂的scanf转换字符

> ID：12010598
> 
> 赞同：1
> 
> 时间：2012-08-17T17:43:46.540
> 
> 标签：c, scanf

我在 C 书中找到了这样一个 scanf 的例子（这次不是 K&R）：

`scanf(" %[-' A-Za-z]s",&variable);`

任何人都可以向我提供它接受什么的信息吗？我没有找到任何关于使用“a”或“z”作为转换字符的信息

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T17:47:54.090

从标准（C11，§7.19.6.2/12）：

> `]`匹配一组预期字符中的非空字符序列

这意味着您的格式需要一系列字符`-`, 空格, `A`, ..., `Z`, `a`, ..., `z`。

`[`转换说明符有两个特殊字符的规定：反转`%[^...` *匹配*集，两个字符*之间*`-`的连字符 ( )表示范围，如您的and中使用的那样。*`A-Z``a-z`*

# javascript - 使用jQuery选择类的父元素

> ID：12010600
> 
> 赞同：0
> 
> 时间：2012-08-17T17:43:53.793
> 
> 标签：javascript, jquery

JS：

```
$(function(){
    $(".remove").click(function(){
        $("<need the right selector>").hide();
    });
}); 
```

HTML：

```
<div class="tag-collection">
    <div class="key">PULMONARY_EMBOLISM <span class="remove">✘&lt;/span></div>
</div> 
```

我会用上面的 jQuery 代码来删除整个 div `tag-collection`。但是，我将`tag-collection`在页面上有很多 div，并且我想确保当有人单击删除按钮时，它只会删除`tag-collection`包含删除按钮的 div。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T17:46:22.507

如果你有很多，这将绑定更少的听众，所以它更“高效”/更轻量：

```
$(function(){
    $(document).on('click', 'span.remove', function() {
        $(this).closest('.tag-collection').hide();
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T17:45:12.693

```
$(".remove").click(function(){
    $(this)  // points to clicked element
        .closest('.tag-collection') // jump to parent tag-collection
        .hide(); // hide that
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T17:45:28.163

```
$(function(){
    $(".remove").click(function(){
        $(this).parents('.tag-collection').hide();
    });
}); 
```

强调第 3 行。

**编辑：**正如 Kevin B 在下面所说，替换`parents()`为`closest()`可能更好，因为那只会选择*一个*祖先。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-17T17:45:38.860

您可以使用该`closest`方法，试试这个：

```
$(function(){
    $(".remove").click(function(){
        $(this).closest('.tag-collection').remove();
    });
}); 
```

# mysql - MySQL 语法：一个查询中的 WHERE 和 LIKE 子句

> ID：12010606
> 
> 赞同：0
> 
> 时间：2012-08-17T17:44:13.707
> 
> 标签：mysql

```
SELECT bahisisim,ID FROM bahis WHERE bahisisim LIKE '%$isim%' and onay!=='0' 
```

这不起作用，我该如何修改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T18:34:31.127

由于 !== 只是一个错误，所以请将您的查询更改为：

```
SELECT bahisisim,ID FROM bahis WHERE bahisisim LIKE '%$isim%' and onay!='0'; 
```

或者

```
SELECT bahisisim,ID FROM bahis WHERE bahisisim LIKE '%$isim%' and onay <>'0'; 
```

有关更多信息，您可以访问[http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T17:53:15.540

我不知道在 MySQL 中使用 !== 运算符，尝试这样做：

```
SELECT bahisisim,ID FROM bahis WHERE bahisisim LIKE '%$isim%' and onay <> '0' 
```

如果您遇到错误，请向我们显示错误，以便我们找到解决方案。;)

# php - fetch_array() 不保留查询中的 ORDER BY

> ID：12010612
> 
> 赞同：7
> 
> 时间：2012-08-17T17:44:27.070
> 
> 标签：php, mysql, mysqli

这是我的代码：

```
<?php
header("Expires: Mon, 26 Jul 1990 05:00:00 GMT");
header("Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT");
header("Cache-Control: no-store, no-cache, must-revalidate");
header("Cache-Control: post-check=0, pre-check=0", false);
header("Pragma: no-cache");

//TESTING CONNECT
include 'connect.php';
$mysqli = connectDB();
getWells(2, $mysqli);

function getWells($company,$mysqli){
//include 'connect.php';
define("MAX_TOP", 96);//96 INCHES == 8 FEET
define("BARRELS_PER_INCH", 1.67);

//$company = $_GET['company'];
//$mysqli = connectDB();

$count = 0;
$sql = "SELECT wells.id, name, top, bottom, last_pulled, bbl_per_hour
        FROM wells, history
        WHERE company_id ='$company'
        AND wells.id = well_id
        AND last_record = 1;";

if($result = $mysqli->query($sql)) {
    while($row = $result->fetch_array()){
        $well_name = $row['name'];
        $well_id = $row['id'];
        $last_bottom = $row['bottom'];
        $last_pulled = $row['last_pulled'];
        $bbl = $row['bbl_per_hour'];

        $projected_fill = MAX_TOP - $last_bottom;
        $projected_barrels = $projected_fill * BARRELS_PER_INCH;
        $time_to_fill = $projected_barrels/$bbl; 
        $exploded_time = explode('.', $time_to_fill);
        $hours = $exploded_time[0];                     
        $frac_hours = '.'.$exploded_time[1];
        $minutes = floor($frac_hours*60);
        $projected = strtotime($last_pulled." +".$hours." hours"." +".$minutes." minutes");            
        $projected_datetime = date("Y-m-d  H:i:s",$projected);    

        $insert = "INSERT INTO temp_wells (well_id,well_name,last_pull,hrs_to_fill)
                   VALUES ('$well_id','$well_name','$last_pulled','$projected_datetime');";
        if(!$result2 = $mysqli->query($insert)){
            return "There was a problem inserting data into databse. Contact Larsoon Computer Services. - GetWells.php, Line 57 ".$mysqli->error;
        }
        else{
            $get_temp = "SELECT * FROM temp_wells
                         ORDER BY hrs_to_fill ASC;";
            if(!$result3 = $mysqli->query($get_temp)){
                return "There was a problem retrieving data. Contact Larson Computer Services. - GetWells.php, Line 63 ".$mysqli->error;
            }
            else{
                //echo var_dump($result3);
                while ($row1 = $result3->fetch_array()) {
                    $o_well_id = $row1['well_id'];
                    $o_well_name = $row1['well_name'];
                    $o_pull_date = $row1['hrs_to_fill'];

                    //TESTING DATA OUTPUT
                    echo $o_well_id;
                    echo '<br>';
                    echo $o_well_name;
                    echo '<br>';
                    echo $o_pull_date;
                    echo '<br>';
                    echo '<br>';

                    //CREATE THE COUNTDOWN   
                    $date = date('U',  strtotime($o_pull_date));
                    $difference = $date - date('U');
                    $diff_days = floor($difference/(24*60*60));
                    $diff_hours = floor($difference % (24 * 60 * 60) / 3600);
                    $diff_min = floor(($difference % (24 * 60 * 60) % 3600)/60);
                    $diff_secs = floor((($difference % (24 * 60 * 60) % 3600)%60)/1);

                    if($diff_days <= 0){
                        $countdown =  "$diff_hours hrs $diff_min min";
                    }
                    else{
                        $countdown =  "$diff_days days $diff_hours hrs $diff_min min";
                    }
                    if($count == 0) {
                        $data_str = $o_well_id.'|'.$o_well_name.'|'.$countdown;
                        $count++;
                    }
                    else {
                        $data_str = $data_str.'|'.$o_well_id.'|'.$o_well_name.'|'.$countdown;
                    }
                }
            }
        }
        $truncate = "TRUNCATE TABLE temp_wells;";
        if(!$result4 = $mysqli->query($truncate)){
            return "There was a problem truncating table. Contact Larson Computer Services. ".$mysqli->error;
        }
    }
}//END OF IF
if($data_str == null && $data_str == ""){
    $data_str = 0;
}
return $data_str;
}

?> 
```

产生：

```
1
ATESTWELL
2012-08-17 14:55:37 

3
HAMLET 1-11H
2012-08-17 17:40:00

4
HAMLET 2-11H
2012-08-17 18:47:14

8
DANIEL 1-33H
2012-08-17 13:15:39

6
DANIEL 21-33H
2012-08-19 13:47:16

9
FAVER 1-29H
2012-08-17 14:31:00 
```

该表如下所示：

```
well_id     int(11)

well_name   varchar(50)

last_pull   datetime

hrs_to_fill datetime 
```

这不是按应有的日期时间字段排序的。在 PHPMyadmin 上运行查询工作正常，但这段代码不是......有什么想法吗？

谢谢，

路易斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T06:33:08.260

您的数据实际上是有序的；如果您仔细观察，您会发现每口井都根据日期/时间进行排序。原因是您有两个循环，内部循环运行 3 次，每个井运行一次。

您可能必须在外循环之后移动内循环，以便在第一个循环中填充`temp_wells`表并在第二个循环中查询它。

# google-app-engine - GAE 使用 JAX-RS 显示 index.html

> ID：12010627
> 
> 赞同：0
> 
> 时间：2012-08-17T17:45:13.413
> 
> 标签：google-app-engine, jersey, jax-rs

我很确定这个问题很简单。我用谷歌应用引擎构建了一个应用程序。我将 JPA 和 JAX-RS 与泽西岛一起使用。我的 web.xml 看起来像这样：

```
<?xml version="1.0" encoding="utf-8" standalone="no"?><web-app xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="2.5" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
    <servlet>
        <servlet-name>Jersey Web Application</servlet-name>
        <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
        <init-param>
            <param-name>com.sun.jersey.config.property.packages</param-name>
            <param-value>com.rest</param-value>
        </init-param>
         <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Jersey Web Application</servlet-name>
        <url-pattern>/resources/*</url-pattern>
    </servlet-mapping>
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
    <welcome-file-list>
        <welcome-file>index.html</welcome-file>
    </welcome-file-list>
 <servlet>
  <servlet-name>SystemServiceServlet</servlet-name>
  <servlet-class>com.google.api.server.spi.SystemServiceServlet</servlet-class>
  <init-param>
   <param-name>services</param-name>
   <param-value/>
  </init-param>
 </servlet>
 <servlet-mapping>
  <servlet-name>SystemServiceServlet</servlet-name>
  <url-pattern>/_ah/spi/*</url-pattern>
 </servlet-mapping>
 <welcome-file-list>
        <welcome-file>index.html</welcome-file>
 </welcome-file-list>
</web-app> 
```

我的 index.html 在 war/WEB-INF/index.html 中。我需要做什么才能显示它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T18:54:37.850

index.html 应该像 war/index.html 一样直接进入 war。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T19:00:48.493

将您的文件保存在 war 文件夹中，不要保存在 WEB-INF 中。

一旦你把它拿出来，你只需要给 localhost:8888/ 它就会显示欢迎文件，即 index.html

您可以将其他 Jsp 保留在 WEB-INF 中，对于直接 URL 访问，它将是不可见的。

# c++ - 头文件中的类声明和静态变量

> ID：12010630
> 
> 赞同：0
> 
> 时间：2012-08-17T17:45:17.597
> 
> 标签：c++, class, initialization, header-files, static-members

菜鸟问题，但想了解以下内容：

想象一下我有一个**多文件项目**。我在**头文件中指定了一个****类**，以便在项目中的所有文件之间共享，我写了这个：在下一行中：**`static int test = 0;``static const int MAX = 4;`**

 **由于一个定义规则，第一个将是尝试编译的错误。但第二个将编译没有错误。为什么？

据我了解，两者都具有相同的属性：整个执行存储持续时间、类范围和无链接。

有什么帮助吗？

编辑：在标头中测试外部常量声明：`extern const int MAX = 4;`强制外部链接产生预期的错误。所以我不明白为什么使用变量它会给我错误，而使用常量却没有。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T17:56:57.797

尝试

```
static const int test = 0; 
```

我有时会注意到头文件中静态 const 变量的立即初始化导致编译器错误。您始终可以在标题中使用声明

```
class MyClass
{
    // ...
    static const int test;
    // ...
} 
```

并在对应的.cpp文件中初始化

```
const int MyClass::test = 0; 
```

这应该适用于任何其他类型`int`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T17:49:14.620

C++ 中的整数常量实际上并不占用对象中的任何空间，并且通常不像变量那样起作用。把它们想象成在这个特定的上下文中被命名的数字。**

# windows - 用于查看特定端口的命令行

> ID：12010631
> 
> 赞同：319
> 
> 时间：2012-08-17T17:45:23.667
> 
> 标签：windows, networking, port, command-prompt

有没有办法从 Windows 命令行检查特定端口的状态？我知道我可以使用 netstat 检查所有端口，但 netstat 很慢，而且查看特定端口可能不是。

* * *

## 回答 #1

> 赞同：377
> 
> 时间：2014-06-18T03:54:22.290

这是端口查找的**简单解决方案...**

在命令中：

```
netstat -na | find "8080" 
```

在 bash 中：

```
netstat -na | grep "8080" 
```

在 PowerShell 中：

```
netstat -na | Select-String "8080" 
```

* * *

## 回答 #2

> 赞同：111
> 
> 时间：2012-08-17T18:03:12.350

您可以将`netstat`组合与`-np`标志和管道一起使用`find`或`findstr`命令。

基本用法是这样的：

```
netstat -np <protocol> | find "port #" 
```

例如，要检查 TCP 上的端口 80，您可以这样做：`netstat -np TCP | find "80"` 最终给出以下类型的输出：

```
TCP    192.168.0.105:50466    64.34.119.101:80       ESTABLISHED
TCP    192.168.0.105:50496    64.34.119.101:80       ESTABLISHED 
```

如您所见，这仅显示了 TCP 协议端口 80 上的连接。

* * *

## 回答 #3

> 赞同：80
> 
> 时间：2014-09-25T04:26:54.233

我用：

```
netstat –aon | find "<port number>" 
```

这里 o 代表进程 ID。现在您可以对进程 ID 进行任何操作。要终止进程，例如，使用：

```
taskkill /F /pid <process ID> 
```

* * *

## 回答 #4

> 赞同：74
> 
> 时间：2013-11-09T05:36:27.657

当我遇到 WAMP apache 问题时，我使用此代码查找正在使用端口 80 的程序。

```
netstat -o -n -a | findstr 0.0:80 
```

![在此处输入图像描述](../Images/0cc5ff7bf35993fb8c8c340eb537e8ba.png)

`3068`是PID，所以我可以从任务管理器中找到它并停止该进程。

* * *

## 回答 #5

> 赞同：21
> 
> 时间：2014-06-23T08:47:43.520

如其他地方所述：使用带有适当开关的 netstat，然后使用 find[str] 过滤结果

最基本的：

```
netstat -an | find ":N" 
```

或者

```
netstat -a -n | find ":N" 
```

要查找外国港口，您可以使用：

```
netstat -an | findstr ":N[^:]*$" 
```

要查找本地端口，您可以使用：

```
netstat -an | findstr ":N.*:[^:]*$" 
```

其中**N**是您感兴趣的端口号。

`-n`确保所有端口都是数字的，即不返回为翻译成服务名称。

`-a`将确保您搜索所有连接（TCP、UDP、监听...）

在`find`字符串中，您必须包含冒号作为端口限定符，否则该数字可能与本地或外国地址匹配。

您可以根据需要使用其他 netstat 开关进一步缩小搜索范围...

进一步阅读 (^0^)

```
netstat /?

find /?

findstr /? 
```

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2014-11-05T11:41:01.783

```
netstat -a -n | find /c "10.240.199.9:8080" 
```

它将为您提供特定 IP 和端口上活动的套接字数量（服务器端口号）

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2015-04-27T17:38:39.647

对于 Windows 8 用户：打开命令提示符，键入**netstat -an | 找到“你的端口号”**，输入。

如果回复类似于**LISTENING**，则该端口正在使用中，否则它是免费的。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2017-10-23T08:30:13.187

为了改进[@EndUzr 的回复](https://stackoverflow.com/a/24361784/3472014)：

要查找外部端口（IPv4 或 IPv6），您可以使用：

```
netstat -an | findstr /r /c:":N [^:]*$" 
```

要查找本地端口（IPv4 或 IPv6），您可以使用：

```
netstat -an | findstr /r /c:":N *[^ ]*:[^ ]* " 
```

其中 N 是您感兴趣的端口号。“/r”开关告诉它将其作为正则表达式处理。"/c" 开关允许 findstr 在搜索字符串中包含空格，而不是将空格视为搜索字符串分隔符。这个增加的空间可以防止更长的端口被滥用 - 例如，“：80”与“：8080”以及其他端口转换问题。

列出与本地 RDP 服务器的远程连接，例如：

```
netstat -an | findstr /r /c:":3389 *[^ ]*:[^ ]*" 
```

或者查看谁在访问您的 DNS：

```
netstat -an | findstr /r /c:":53 *[^ ]*:[^ ]*" 
```

如果您想排除本地端口，您可以使用一系列带有“/v”的异常并使用反斜杠转义字符：

```
netstat -an | findstr /v "0.0.0.0 127.0.0.1 \[::\] \[::1\] \*\:\*" | findstr /r /c:":80 *[^ ]*:[^ ]*" 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2019-08-21T14:56:48.440

这将帮助你

```
netstat -atn | grep <port no>          # For tcp
netstat -aun | grep <port no>           # For udp
netstat -atun | grep <port no>          # For both 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2021-01-18T14:14:54.177

它将为您提供特定 IP 上的所有活动套接字：

```
netstat -an | find "172.20.1.166" 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2018-04-12T04:39:23.160

对于 80 端口，命令为：netstat -an | find "80" 对于端口 n，命令是：netstat -an | 找到“n”

这里，netstat 是你机器的指令

-a ：显示所有连接和监听端口 -n ：以数字格式显示所有地址和指令（这是必需的，因为 -a 的输出可以包含机器名称）

然后，查找命令以“模式匹配”前一个命令的输出。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-12-23T20:32:49.637

在 RHEL 7 中，我使用此命令过滤处于 LISTEN 状态的多个端口：

```
sudo netstat -tulpn | grep LISTEN | egrep '(8080 |8082 |8083 | etc )' 
```

* * *

## 回答 #13

> 赞同：-3
> 
> 时间：2014-04-13T23:06:01.050

此命令将显示所有端口及其目标地址：

```
netstat -f 
```

* * *

## 回答 #14

> 赞同：-4
> 
> 时间：2015-08-05T13:40:57.063

使用 lsof 命令“lsof -i tcp:port #”，这里是一个例子。

```
$ lsof -i tcp:1555 
COMMAND   PID USER   FD   TYPE   DEVICE SIZE/OFF NODE NAME
java    27330 john  121u  IPv4 36028819      0t0  TCP 10.10.10.1:58615->10.10.10.10:livelan (ESTABLISHED)
java    27330 john  201u  IPv4 36018833      0t0  TCP 10.10.10.1:58586->10.10.10.10:livelan (ESTABLISHED)
java    27330 john  264u  IPv4 36020018      0t0  TCP 10.10.10.1:58598->10.10.10.10:livelan (ESTABLISHED)
java    27330 john  312u  IPv4 36058194      0t0  TCP 10.10.10.1:58826->10.10.10.10:livelan (ESTABLISHED) 
```

# c# - SlowCheetah - 让它工作

> ID：12010636
> 
> 赞同：1
> 
> 时间：2012-08-17T17:45:52.437
> 
> 标签：c#, asp.net, web-config, slowcheetah

我尝试使用 SlowCheetah 扩展，但我似乎无法让它工作。我想我可能在某个地方错过了一步。

我下载了扩展并安装了它。我创建了我的 web.config 文件并进行了“添加转换”

为了测试它，我已经在我的项目中使用了 ELmah，所以我尝试给它不同的电子邮件地址来发送每个配置的错误日志，并且在 web.config 中没有。

网络配置

```
<elmah>
    <security allowRemoteAccess="0"/>
    <errorLog type="Elmah.XmlFileErrorLog, Elmah" logPath="C:\myLogPath"/>
    <errorFilter>
      <test>
        <or>
          <equal binding="HttpStatusCode" value="404" type="Int32"/>
          <is-type binding="BaseException" type="System.FieldAccessException" />
        </or>
      </test>
    </errorFilter>
</elmah> 
```

web.debug.config

```
<elmah>
    <errorMail from="error-debug@domain.tld" to="me@domain.tld" priority="High" xdt:Transform="Insert"/>
</elmah> 
```

因此，当我查看“预览转换”时，结果似乎是我想要的。然后我启动我的应用程序（使用 F5 或 ctrl+F5）并故意在我的网站上抛出异常以触发 Elmah 错误报告，但我从未收到任何电子邮件。如果我在 web.config 中添加 errorMail 行，我会收到一封电子邮件，所以问题不是来自 Elmah。

正如我所说，我觉得我可能错过了设置扩展的一个简单步骤。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T02:52:37.853

据我所知，slow-Cheetah 支持`app.config`文件的配置转换，但目前不支持`web.configs`调试。它应该将转换`web.config`后的文件放在项目的`bin`文件夹中，但您的项目仍然从根文件夹中的配置文件中读取。请查看[http://sedodream.com/CommentView,guid,68b7e248-b9f5-4d07-bdfe-eb037bcf2cbb.aspx](http://sedodream.com/CommentView,guid,68b7e248-b9f5-4d07-bdfe-eb037bcf2cbb.aspx)的解决方法。这对我有用，而不是使用 Slow-Cheetah。

[您还可以在https://github.com/sayedihashimi/slow-cheetah/issues/39](https://github.com/sayedihashimi/slow-cheetah/issues/39)上调试时请求对 Slow-Cheetah 的 Web 配置转换支持。 他们正在考虑在 F5 上添加 Web 支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T19:35:09.647

您遇到的问题实际上与 SlowCheetah 无关，而是您如何从 Visual Studio 启动 Web 应用程序。

SlowCheetah 确实会将必要的 MSBuild 目标添加到您的项目中，以便在构建时进行转换，但仅适用于项目输出中包含的内容（即 \bin 文件夹）。

当您构建一个 Web 应用程序时，您的 web.config 将保持不变，并且只有程序集被复制到您的 \bin 文件夹中。Visual Studio 启动 WebDev 服务器并将其指向 Web 应用程序的根目录。由于您的 web.config 没有被修改，它将始终包含原始内容。

# sql-server - Rails 3.2.8 - 一个 Rails 应用程序中的多个数据库访问

> ID：12010641
> 
> 赞同：2
> 
> 时间：2012-08-17T17:46:10.777
> 
> 标签：sql-server, database, ruby-on-rails-3, activerecord

我正在构建一个具有自己的名为“products_db”的数据库的 web 应用程序。但是我的应用程序将不得不调用位于数据库“reviews_db”中的评论，这是另一个系统正在使用的遗留数据库，我无法做任何事情，因为客户希望这样。

因此，幸运的是，两个数据库都位于同一个 SQL Server (MSSQL) 中。我已经让 te 'activerecord-sqlserver-adapter' 工作了，但我需要想办法从我的 webapp 访问 'reviews_db'。

reviews_db 不遵循任何 Rails 约定，因为它是一个遗留系统。

所以，我的班级产品：

```
class Product < ActiveRecord::Base
  attr_accessible :name, :description, :price

  has_many :reviews

end 
```

我的班级评论：

```
class Review < ActiveRecord::Base

 # THIS CLASS DOESN'T FOLLOW RAILS CONVENTION
 # HOW DO I SET AND MANAGE LEGACY PRIMARY KEY?
 # HOW DO I CONNECT THIS MODEL TO THE OTHER DATABASE?
 # HOW DO I CONNECT THIS MODEL TO THE RIGHT TABLE NAME?

 attr_accessible :rv_tbl_title, :rv_tbl_id, :rv_tbl_text, :rv_tbl_author, :rv_tbl_ref_prod

 has_one :Product, foreign_key: :rv_tbl_author

end 
```

有宝石吗？在复习课问题中使用什么解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T21:30:58.690

我不确定这第一部分是否必要，但是在您的 database.yml 文件中，通过在末尾添加类似这样的内容来建立新连接：

```
review:
  adapter: sqlserver
  database: reviews_db
  .... put your other configuration info here 
```

然后在您的评论模型 review.rb 中：

```
class Review < ActiveRecord::Base
  establish_connection :review
  self.table_name = "review_table"
  self.primary_key = "review_id"
end 
```

将表名更改为正确的表，并将主键更改为正确的列名。

然后创建一个新表/模型，其唯一目的是获得对评论的本地引用。所以你可以称之为 ReviewReference

```
class ReviewReference < ActiveRecord::Base
  belongs_to :review
  has_one :product
end 
```

并将您的产品模型更改为

```
class Product < ActiveRecord::Base
  has_many :reviews, class_name: "ReviewReference"
end 
```

这应该会让你朝着你的目标走得很远。你可能不得不做很多事情

`@reviews = Review.where("some_column = ?", some_value)`

或者

`@reviews = Review.find_by_sql("Some SQL Here")`如果您正在执行更复杂的查询。

抱歉，我的回答不够具体，我只做过一次。支持 Chad Fowler 的 Rails 食谱书的概念。

# java - dlmread 返回大文本文件的单列

> ID：12010644
> 
> 赞同：4
> 
> 时间：2012-08-17T17:46:12.427
> 
> 标签：java, file, matlab

我正在尝试使用 读取一个大文件`dlmread`，但它只是将整个文件视为一个长列。该文件是用 Java 编写的，代码如下：

```
public void writeToFile(double[] arr) throws IOException{

FileWriter write = new FileWriter(path, append);
PrintWriter print_line = new PrintWriter(write);

for(int i=0; i<arr.length; i++){
  print_line.printf("%f\t", arr[i]);   
}
print_line.printf("\n");

print_line.close();

} 
```

我的 MATLAB 脚本在文件中读取如下`[DATA] = dlmread('probability_cyclelength.dat');`：

```
>>size(DATA)

ans =
         2000000        1 
```

总共有 2000000 条数据，每行最多 60,000 条（但每行中的数量不一样 - 没关系）

当我尝试使用较小的数据集（100000 个数据）时，它工作得非常好。我不知道问题出在 Java 还是 MATLAB，所以我真的需要一些帮助，谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T18:35:15.887

默认情况下`dlmread`尝试从文件中推断分隔符，默认情况下它使用空格作为分隔符。

我能够复制您描述的问题的唯一方法是指定`' '`为分隔符。你确定你不这样做吗？

尝试进行此更改，看看它是否可以解决您的问题。

```
data = dlmread(inFile, '\t'); 
```

如果那不能解决您的问题，那么我怀疑问题是由于文本文件中的行具有不同数量的列而引起的。例如，如果您`dlmread`用来打开包含以下内容的文本文件：

```
1 2 3 4
5 
```

`dlmread`返回一个这样的矩阵：

```
1 2 3 4
5 0 0 0 
```

这种表示是浪费的，因为它使用 64 字节（每个双精度字节 * 8 双精度字节）来存储 40 字节的信息。

可能是由于这些空位置，您的文件的矩阵表示太大了，因此`dlmread`返回您的向量来节省内存。

你可以解决这个问题。如果您一次只需要几行，则可以通过指定 a`range`来从文件中加载行集合`dlmread`。*请注意*，要使其正常工作，您必须知道文件中的最大列数，因为`dlmread`不会让您读取的列数超过该列数。

```
r = [0 4]; %load the first 5 rows
maxC = 10; % load up to 10 columns
data = dlmread(inFile, '\t', [r(1), 0, r(2), maxX]); 
```

然后，您可以循环加载感兴趣的行的文件，但由于我之前提到的内存限制，您可能无法将它们全部加载到矩阵中。

如果您需要内存中的整个数据集，那么您应该考虑单独加载每一行并将它们保存到一个单元格数组中。加载所有内容需要更多工作，但您可以使用以下方式执行此操作：

```
% open the file
fid = fopen(fileName); 
% load each line as a single string
tmp = textscan(fid, '%s', 'delimiter', '\n'); 
% textscan wraps its results in a cell, remove that wrapping
rawText = tmp{1}; 
nLines = numel(rawText);

%create a cell array to store the processed string
data = cell(nLines, 1);
for i = 1:nLines
  %scan a line of text returning a vector of doubles
  tmp = textscan(rawText{i}, '%f');
  data{i} = tmp{1}; 
end 
```

# file - 你如何自定义网址？

> ID：12010646
> 
> 赞同：0
> 
> 时间：2012-08-17T17:46:13.817
> 
> 标签：file, url, location, customization

www.example.ca/article/563/

我在动态站点中看到了上述链接。我在网站上工作，没有名为“文章”的文件夹，显然“563”也是动态生成的。我发现我必须编辑位于根文件夹中的 article.php 页面才能进行我想要的更改，但我的问题是，如何使 url 看起来与服务器上的实际文件位置不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T17:48:39.160

这通常称为“ [URL 重写](http://en.wikipedia.org/wiki/Rewrite_engine)”。它可以通过适当的网络服务器配置来完成，例如 Apache 的[mod_rewrite](http://httpd.apache.org/docs/2.2/rewrite/)提供了一种基于正则表达式规则动态修改传入 URL 请求的方法。

# ruby-on-rails - 方法带回空数组

> ID：12010647
> 
> 赞同：0
> 
> 时间：2012-08-17T17:46:15.323
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有这个类和里面的这些方法。

```
class Purchase < ActiveRecord::Base
  belongs_to :user
  belongs_to :price
  belongs_to :unit_price

  scope :today, lambda { joins(:unit_price, :price).
                       where(:prices => { :date => Date.today }, 
                       :unit_prices =>  { :date => Date.today } ) }

  # not working                                 
  def total
    self.price.sum(:amount) + self.unit_price.sum(:amount)
  end
end 
```

当我尝试像这样使用我的范围链时：

```
<%= current_user.purchases.today.map(&:total) %> 
```

它给了我一个空的 Array 结果`[]`。我真的很想这样做。

```
<%= number_to_currency(current_user.purchases.today.map(&:total)) %> 
```

但这对于发生此错误也不起作用。

```
undefined method `to_f' for []:Array 
```

为什么它会空着回来？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T18:01:59.793

您的`today`范围必须将结果集减少到零结果。也就是说，如果`current_user`有的话`purchases`。你确定 a`Price`真的`date`是 a`Date`吗？您确定该`:prices`关联存在`Purchase`（尽管我猜如果没有，它可能会在那里抛出 NoMethodError ）？

至于您的`undefined method to_f for []:Array`，即使您没有使用空数组，您仍然会尝试将数组转换为浮点数。您将需要获得`sum`的价格数组，并将其传递给`number_to_currency`：

```
number_to_currency(current_user.purchases.today.map(&:total).sum) 
```

# r - 使用高级点图可视化排序的李克特量表

> ID：12010653
> 
> 赞同：1
> 
> 时间：2012-08-17T17:46:37.037
> 
> 标签：r, graph, plot

我希望制作一个**图表，显示对许多协议声明的响应**。该图表应允许对不同组的受访者和陈述项目进行比较。

我基本上借鉴了 Kastellec & Leoni 提供的 R 代码（图 5；[http](http://tables2graphs.com/doku.php?id=03_descriptive_statistics#figure_5) ://tables2graphs.com/doku.php?id=03_descriptive_statistics#figure_5 ）。

与它们相比，我希望 x 轴的范围为 -5 到 5，表格的格式应为 2x2。

此代码应生成类似于我使用的**示例数据：**

```
mydata<-expand.grid(
col1=c('item1', 'item2', 'item3', 'item4'),
col2=c('0', '1', '3', '4'),
col3=c('T1', 'T2', 'C1', 'C2'))
mydata$col4=sapply(rnorm(64,0,1), function(x) {round(x,2)}) 
```

注： - col1：陈述项（K&L数据集中的“变量”） - col2：答案类别（K&L中的“句号”） - col3：受访者组（K&L中的“立法机关”） - col4：比例（“比例” " 在 K&L)

这是**代码**：

```
library(lattice)
    library(car)

    ltheme <- canonical.theme(color = FALSE) 
    ltheme$strip.background$col <- "lightgrey"  
    lattice.options(default.theme = ltheme)     

    mydata$col2<-factor(mydata$col2,
    levels=c(0,1,3,4),
    labels=c("strongly disagree", "disagree", "agree", "strongly agree"), ordered=TRUE)

    mydata$col3<-factor(mydata$col3,
    levels=c("T1", "C1", "T2", "C2"), ordered=TRUE)
    levels(mydata$col3)<-c("treatment group 1", "control group 1", "treatment group 2",  "control group 2")

    mydata$col1<-factor(mydata$col1,
    levels=c("item1", "item2", "item3", "item4"),
    labels=c("item 4", "item 3", "item 2", "item 1"), ordered=TRUE)

    prop.vec<-c(-5, -4, -3, -2, -1, 0, 1, 2, 3, 4, 5)

    plot<-dotplot(mydata$col1~mydata$col4|mydata$col3, xlab="levels of agreement",
    data=mydata,
    groups=mydata$col2,
    layout=c(2,2),
    scales=list(cex=0.65,
    x=list(at=prop.vec),
    alternating=3),
    par.strip.text=list(lines=2.5,cex=0.65),
    panel=function(...){
       panel.abline(v=prop.vec, col="lightgrey")
       panel.abline(h=1:11, col="lightgrey", lty=2)
       panel.xyplot(...)},
    as.table=TRUE,
    par.settings=simpleTheme(pch=c(19,1,2,17), cex=0.7), 
    auto.key=list(space="bottom", column=4, cex=0.65)
    )

    trellis.device(file="figure.pdf", device="pdf", color=FALSE, width=6, height=8)

    print(plot, newpage=FALSE)              

    dev.off() 
```

![在此处输入图像描述](../Images/a401653c0ad60929b8b03ef72d99de87.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T09:26:33.960

问题已解决 - 我更正了代码，以便它生成一个漂亮的图，显示对声明协议的响应，如上所示。如果您愿意，请随时进一步改进它。非常感谢您的帮助！

# asp.net-mvc-3 - MVC 3 在哪里加密用户的密码？

> ID：12010665
> 
> 赞同：3
> 
> 时间：2012-08-17T17:47:35.497
> 
> 标签：asp.net-mvc-3, entity-framework, encryption

我有自己的密码加密 dll，用于在用户登录时检查用户密码，这在我的用户实体中被引用。

现在我已经创建了用户注册的功能，除了密码尚未加密外，它工作正常。

我的问题很简单，我应该把新用户密码的加密放在哪里？我不确定，因为我知道用户的密码不应该以纯文本形式传输，因此我不知道调用加密函数的最佳位置：

*   用户实体（其中加密 dll 已用于验证）。
*   保存用户方法所在的用户存储库。
*   控制用户创建视图的用户控制器。
*   其他我没有考虑过的地方！

非常感谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T17:53:40.780

首先，对于客户端-服务器通信，我建议您使用 SSL 来处理不以纯文本格式传输的敏感信息（如密码）。

之后，通常的做法是不在任何地方保存密码（即使使用加密，但要保存它们的哈希值。

您可以将哈希函数放入密码属性的 set 方法中。这是一个例子：

```
public class Member
{
    private string _username;

    public string Username
    {
        get { return _username; }
        set { _username = value.ToLowerInvariant(); }
    }

    public string Passhash {get;set;}

    public void SetPassword(string password)
    {
        Passhash = Crypto.Hash(password);
    }

    public bool CheckPassword(string password)
    {
        return string.Equals(Passhash, Crypto.Hash(password));
    }
}

public static class Crypto
{
    public static string Hash(string value)
    {
        return Convert.ToBase64String(
            System.Security.Cryptography.SHA256.Create()
            .ComputeHash(Encoding.UTF8.GetBytes(value)));
    }
} 
```

编辑：

正如 Craig Stuntz 所指出的，这个例子中的 Hash 代码非常简单。请参阅以下帖子以获取更安全的密码哈希方法：[使用 MD5 或 sha-256 C# 哈希密码](https://stackoverflow.com/questions/4329909/hashing-passwords-with-md5-or-sha-256-c-sharp)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-17T17:53:28.543

在将负责做两件事的服务层方法中：

1.  调用您的加密层来**散列**密码（不加密）
2.  调用您的用户存储库以使用散列密码将用户实体持久保存到数据库中

控制器动作当然会与服务层对话。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-17T19:31:12.173

不要自己做密码散列，甚至不要考虑加密密码。

确保安全的努力是巨大的。使用基于公开可用规范和算法的现有方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-02T05:51:40.513

```
//ENCODE

public string base64Encode(string sData)
{
try
{
byte[] encData_byte = new byte[sData.Length];

encData_byte = System.Text.Encoding.UTF8.GetBytes(sData);

string encodedData = Convert.ToBase64String(encData_byte);

return encodedData;

}
catch(Exception ex)
{
throw new Exception("Error in base64Encode" + ex.Message);
}
}

//DECODE

public string base64Decode(string sData)
    {
        try
        {
            System.Text.UTF8Encoding encoder = new System.Text.UTF8Encoding();

            System.Text.Decoder utf8Decode = encoder.GetDecoder();

            byte[] todecode_byte = Convert.FromBase64String(sData);

            int charCount = utf8Decode.GetCharCount(todecode_byte, 0, todecode_byte.Length);

            char[] decoded_char = new char[charCount];

            utf8Decode.GetChars(todecode_byte, 0, todecode_byte.Length, decoded_char, 0);

            string result = new String(decoded_char);

            return result;
        }
        catch (Exception ex)
        {
            throw new Exception("Error in base64Decode" + ex.Message);
        }
    }

How to call 

string encode= base64Encode(val);

string decode= base64Decode(val);

This is very helpful to decode and encode your string(password) 
```

# javascript - 在 WebView 中捕获某些 Javascript 函数调用

> ID：12010669
> 
> 赞同：4
> 
> 时间：2012-08-17T17:47:42.010
> 
> 标签：javascript, android, webview

我正在编写一个基本的网络浏览器，它只能访问某个网站（由另一家公司开发和维护）来完成我的工作，但是为了计算登录和在网站上花费的时间（两个非常重要的事情我的公司）您需要使用网站上的某个按钮注销。我查看了页面源代码，该按钮所做的只是调用一个 javascript 函数（命名为 doLogoff() 或类似名称），它在普通浏览器上只会关闭您登录后创建的窗口。在我的应用程序中，一切都已完成在一个窗口中，没有选项卡（不需要它们），我不完全确定关闭窗口的调用对我的应用程序有什么作用，但 WebView 上的站点只是停留在该页面上，只会返回如果单击链接，则转到登录页面。

有没有办法检测在 WebView 中调用某个 JavaScript 函数的时间？如果我可以绑定该功能并确保实际执行注销，那么我可以自己让 webview 转到登录页面。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T18:18:56.140

您可以使用`JavascriptInterface`. 以下示例来自[文档](http://developer.android.com/guide/webapps/webview.html)。它反过来工作。您可以在 javascript 中创建一个函数，该函数将在您的活动中触发 java 代码。

你在你的java代码中声明你的接口。

```
public class JavaScriptInterface {
    Context mContext;

    /** Instantiate the interface and set the context */
    JavaScriptInterface(Context c) {
        mContext = c;
    }

    /** Show a toast from the web page */
    @JavascriptInterface
    public void showToast(String toast) {
        Toast.makeText(mContext, toast, Toast.LENGTH_SHORT).show();
    }
} 
```

您将界面添加到您的 WebView

```
WebView webView = (WebView) findViewById(R.id.webview);
webView.addJavascriptInterface(new JavaScriptInterface(this), "Android"); 
```

在您的网页中，您可以从脚本中调用 java 方法

```
<script type="text/javascript">
    function showAndroidToast(toast) {
    Android.showToast(toast);
    }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-20T21:24:25.433

首先，创建由 NathanZ 规定的 JavascriptInterface。

然后覆盖您要挂钩的函数，如下所示：

```
webview.loadUrl("javascript:" +
"var functionNameOriginal = functionName;" +
"functionName = function(args) {" +
    "Android.showToast();" +
    "functionNameOriginal(args);" +
"}"); 
```

# objective-c - 比较并转到另一个视图控制器

> ID：12010672
> 
> 赞同：1
> 
> 时间：2012-08-17T17:47:46.277
> 
> 标签：objective-c, arrays, uiviewcontroller

我有这个代码：

```
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component
{
    NSDictionary *data = [list1 objectAtIndex:row];
    NSNumber *strt = [data objectForKey:@"ab1"];
    NSNumber *strt2 = [data objectForKey:@"ab1"];
    forlb1 = [NSString stringWithFormat:@"%d", strt.intValue];
    forlb2 = [NSString stringWithFormat:@"%d", strt2.intValue];

    NSDictionary *xt = [list1 objectAtIndex:row];
    NSString *name = [xt objectForKey:@"name"];

    NSDictionary *xx = [list1 objectAtIndex:row];
    NSString *name2 = [xx objectForKey:@"name"];

    switch (component)
    {   
        case 0:
            show1 = name;
            label1.text = forlb1;
            break;

        case 1:
            show2 = name2;
            label2.text = forlb2;
            break;
    }
}

- (IBAction)goView:(id)sender 
{    
    if (label1.text < labe2.tex)
    {
        ViewController1 *first = [[ViewController1 alloc]init];
        first.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
        [self presentModalViewController:first animated:YES];
    }
    else
    {
        ViewController3 *third = [[ViewController3 alloc]init];
        third.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
        [self presentModalViewController:third animated:YES];
    }
} 
```

我的问题是：如果我的 label1.text < label2.text 我无法获得 ViewController3

当我从 Picker 视图的组件 1 中选择时，我的一个标签显示名称，另一个标签显示一个数字，同样的事情发生在 Picker 视图的组件 2 上，现在没问题，但是当我应该触摸按钮时，我需要去viewcontroller 1或viewcontroller 2，取决于：label1.text < label2.text

请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T17:50:54.390

您不应该`label.text`使用 less then`<`运算符进行比较。根据标签的内容，您应该将文本转换为数字并进行检查，或者按字母顺序比较字符串。

这是如何以数字方式比较字符串，假设文本表示一个整数：

```
if ([label1.text intValue] < [labe2.text intValue]) {
    ....
} 
```

这是按字母顺序比较字符串的方法：

```
if ([label1.text compare:labe2.text] ==  NSOrderedAscending) {
    ....
} 
```

# javascript - jQuery.children 也选择父级

> ID：12010677
> 
> 赞同：0
> 
> 时间：2012-08-17T17:48:10.777
> 
> 标签：javascript, jquery

我有以下 HTML；

```
<div id="pic_options_container">
  <div id="pic_options_header">header text</div>
  <div id="pic_options_org"></div>
  <div id="pic_options_preview"><img id="imgPreview" src="" /></div></div>
  <div style="clear:both;"></div>
</div> 
```

我想要实现的是；单击 pic_options_container 时，该 div 的子项应隐藏。但是， pic_options_container 本身也会被隐藏。

```
$('#pic_options_container').click(function () {
    $(this).children().hide();
}); 
```

任何人都知道解决方案或告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T17:51:11.107

你确定它被隐藏了？我敢打赌，它只是被“清空”了，然后折叠到 0 宽度和高度。

看到这个：http: [//jsfiddle.net/SmSGS/](http://jsfiddle.net/SmSGS/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T17:49:35.783

你可以试试：

```
$('#pic_options_container').click(function () {
    $(this).hide(); // to hide container it self, not chldren
}); 
```

**[演示](http://jsfiddle.net/57Dd9/2/)**

但是要隐藏孩子和两个容器：

```
$('#pic_options_container').click(function () {
    $(this).children().hide().end().hide(); // to hide container it self
}); 
```

**[演示](http://jsfiddle.net/57Dd9/1/)**

### 关于无效标记

```
<div id="pic_options_preview"><img id="imgPreview" src="" /></div></div> 
```

最后一个额外的关闭`</div>`，纠正那个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T18:00:17.390

如果您的 'pic_options_container' 容器没有子容器或被隐藏，您必须提供**高度**和**宽度才能看到它。**

# r - 在R中将时间转换为POSIXct

> ID：12010678
> 
> 赞同：1
> 
> 时间：2012-08-17T17:48:11.320
> 
> 标签：r

我有一个可以具有如下值的数据框：

```
p<-c("2012-08-14 9:00", "2012-08-14 7:00:00") 
```

我正在尝试转换为日期时间：

```
p<-as.POSIXct(p)

this converted everyting to to 2012-08-14 09:00:00 
```

由于某种原因，它不再工作了。如果你注意到了，我的数据有时有几秒钟，有时没有。你如何强制这是日期时间格式？

我收到这样的错误：

```
Error in as.POSIXlt.character(p) : 
  character string is not in a standard unambiguous format 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T18:25:25.153

您的矢量格式不一致，因此将其转换为`POSIXlt`第一个，因为`as.POSIXlt.character`检查多种格式。

```
p <- c("2012-08-14 9:00", "2012-08-14 7:00:00")
plt <- as.POSIXlt(p)
pct <- as.POSIXct(plt) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T20:03:31.430

the package lubridate may help
here an example - perhaps not the most elegant one - but it hs

```
p<-c("2012-08-14 9:00", "2012-08-14 7:00:00")

require(lubridate) # 

NewDate <- c()
for (i in 1 : 2)
        {
          if (nchar(unlist(strsplit(p[i], ' '))[2]) == 4) {NewDate <- c(NewDate,       as.character(ymd_hm(p[i])))}
          if (nchar(unlist(strsplit(p[i], ' '))[2]) == 7) {NewDate <- c(NewDate, as.character(ymd_hms(p[i])))}
        }
NewDate 
```

# actionscript-3 - AS3 多态性：从该类中更改类

> ID：12010685
> 
> 赞同：1
> 
> 时间：2012-08-17T17:48:39.103
> 
> 标签：actionscript-3, polymorphism

这是我的问题的一个非常简化的版本，但应该足以让我解决我的问题。

假设我有 DressingRoom、Person、Hat、Badge 和 Foreman 等课程，并且该应用程序允许您在一个人在更衣室时给他们不同类型的帽子，如果是工头，他也可以获得徽章. 我希望用户成为工头，如果你给他一顶白帽子，如果不是，让他成为一个普通人。

是否可以在 Person 中将某个类设置为其自身的子类，而不必在更衣室类中进行（这很容易做到）。

```
public class DressingRoom{
  public var length:int;
  public var occupant:Person;
}

public class Person{
  public var name:String;
  public var hat:Hat;

  public function hatChanged():void{
    if (hat.color==0xFFFFFF){
      this =  new Foreman(name,hat);
    }
  }
}

public class Hat{
  public var size:int;
  public var color:uint;
}

public class Foreman() extends Person{
  public var badge:Badge;

  public function hatChanged():void{
    if (hat.color!=0xFFFFFF){
      this =  new Person(name,hat);
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T20:06:13.140

Strange question :) You can use composition instead of inheritance. It could looks like this:

```
public interface IHat{
  function get status():HatStatus
}

public class ForemanHat implements IHat{
  private const status:ForemanStatus = new ForemanStatus();
  public function get status():HatStatus {return status;}
}

public class Person{
  private var status:HatStatus;

  public function setHat(hat:IHat):void{
    status = hat.status;
  }

  public function get status():HatStatus{ return status}
} 
```

You can add more hats simply.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T19:22:23.827

似乎是装饰器设计模式的一个很好的候选者。在[as3dp.com上有很多内容](http://www.as3dp.com/?s=decorator)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T18:20:25.640

您的问题的直接答案是否定的。尽管您将 occupant:Person 放在包装类中，但您在更衣室概念方面处于正确轨道，并在需要时检查它是否为 Foreman 类型。

# bash - 案例陈述失败？

> ID：12010686
> 
> 赞同：77
> 
> 时间：2012-08-17T17:48:40.913
> 
> 标签：bash

在流行的命令式语言中，一旦匹配了 case 语句，switch 语句通常会“下降”到下一个级别。

例子：

```
int a = 2;
switch(a)
{
   case 1:
      print "quick ";
   case 2: 
      print "brown ";
   case 3: 
      print "fox ";
      break;
   case 4:
      print "jumped ";
} 
```

将打印“棕狐”。

但是 bash 中的相同代码

```
A=2
case $A in
2)
  echo "QUICK"
  ;&
2)
  echo "BROWN"
  ;&
3)
  echo "FOX"
  ;&
4)
  echo "JUMPED"
  ;&
esac 
```

只打印“棕色”

如何使 bash 中的 case 语句“落入”第一个示例中的其余条件？

（编辑：Bash 版本 3.2.25， ;& 语句（[来自 wiki](http://en.wikipedia.org/wiki/Switch_statement)）导致语法错误）

跑步：

测试.sh：

```
#!/bin/bash
A=2
case $A in
1)
  echo "QUICK"
  ;&
2)
  echo "BROWN"
  ;&
3)
  echo "FOX"
  ;&
esac 
```

给出：

> ./test.sh：第 6 行：意外标记附近的语法错误 ；&'`;' ./test.sh:
> line 6:`

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-08-17T18:07:03.987

`;&`and运算符是在 bash 4.0 中引入的`;;&`，所以如果你想坚持使用五年前的 bash 版本，你要么必须重复代码，要么使用`if`s。

```
if (( a == 1)); then echo quick; fi
if (( a > 0 && a <= 2)); then echo brown; fi 
if (( a > 0 && a <= 3)); then echo fox; fi
if (( a == 4)); then echo jumped; fi 
```

或找到其他方法来实现实际目标。

（附带说明，[不要使用所有大写的变量名](https://stackoverflow.com/q/673055/1524545)。您可能会覆盖特殊的 shell 变量或环境变量。）

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2015-08-21T12:04:40.230

试试这个：

```
case $VAR in
normal)
    echo "This doesn't do fallthrough"
    ;;
fallthrough)
    echo -n "This does "
    ;&
somethingelse)
    echo "fall-through"
    ;;
esac 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2019-04-30T19:34:00.993

Using`;&`不是很便携，因为它需要`bash`（不是`ash`,`dash`或任何其他最小的`sh`）并且它至少需要`bash`4.0 或更高版本（并非在所有系统上都可用，例如 macOS 10.14.6 仍然只提供 bash 3.2.57）。

我认为比很多`if`'s 更容易阅读的解决方法是循环并修改 case var：

```
#!/bin/sh

A=2
A_BAK=$A
while [ -n "$A" ]; do
    case $A in
        1)
            echo "QUICK"
            A=2
            ;;

        2)
            echo "BROWN"
            A=3
            ;;

        3)
            echo "FOX"
            A=4
            ;;

        4)
            echo "JUMPED"
            A=""
            ;;
    esac
done
A=$A_BAK 
```

这是一个概念证明：[https ://www.onlinegdb.com/0ngLPXXn8](https://www.onlinegdb.com/0ngLPXXn8)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2022-01-13T08:58:56.947

带有 fallthrough 的 bash 开关，用函数和标志实现

```
#! /bin/sh

switch_fallthrough() {
  [ $# = 0 ] && { echo no value >&2; return; }
  local f= # fall through
  [ "$1" = 1 ] && { echo quick; f=1; }
  [ $f ] || [ "$1" = 2 ] && { echo brown; f=1; }
  [ $f ] || [ "$1" = 3 ] && { echo fox; return; }
  [ $f ] || [ "$1" = 4 ] && echo jumped
  return 1 # error = no case did match
}

switch_fallthrough "2"
# brown
# fox 
```

# c# - 如何找到目录的路径

> ID：12010694
> 
> 赞同：0
> 
> 时间：2012-08-17T17:49:01.023
> 
> 标签：c#, io

有些人和我在我们的 C 驱动器中存储了相同的文件夹，但每个文件夹位于不同的位置。我正在尝试编写可以在每台机器上访问此文件夹的代码。我试过`"~/xx/xx"`了，但它不起作用。我该怎么做？

**更新：** 这就是我现在拥有的：

```
foreach (var dir in Directory.EnumerateDirectories(@"C:\", "*dataDir*", SearchOption.AllDirectories))
{
     Debug.WriteLine(dir);
} 
```

例外：`System.UnauthorizedAccessException: Access to the path 'C:\$INPLACE.~TR\' is denied.`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T17:52:14.793

[Directory.EnumerateDirectories](http://msdn.microsoft.com/en-us/library/dd383462.aspx)应该可以工作。`.Single()`如果您只期待一场比赛，您可以这样做。

```
foreach(var dir in Directory.EnumerateDirectories(@"C:\", "*STUFF*", SearchOption.AllDirectories))
{
    Console.WriteLine(dir);
} 
```

```
产量：
C:\东西
C:\其他\东西

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T17:58:24.143

[您可以在Directory.GetDirectories Method (String, String)](http://msdn.microsoft.com/en-us/library/6ff71z1w.aspx)中尝试此示例

```
using System;
using System.IO;

public class Test 
{
   public static void Main() 
   {
       try 
       {
           // Only get subdirectories that begin with the letter "p." 
           string[] dirs = Directory.GetDirectories(@"c:\", "p*");
           Console.WriteLine("The number of directories starting with p is {0}.", dirs.Length);
           foreach (string dir in dirs) 
           {
               Console.WriteLine(dir);
           }
       } 
       catch (Exception e) 
       {
           Console.WriteLine("The process failed: {0}", e.ToString());
       }
   } 
```

}

# windows - 如何在 Windows 7 及更高版本中查找和安装 CIM Studio？

> ID：12010697
> 
> 赞同：6
> 
> 时间：2012-08-17T17:49:16.903
> 
> 标签：windows, wmi

我很想找到一个CIM Studio的下载。

如果一个人用 Google 搜索得够多，就会发现 CIM Studio 现在是 WMI 管理工具的一部分，并且发现一个与以下内容相同或相似的链接：

[http://www.microsoft.com/downloads/details.aspx?displaylang=en&FamilyID=6430F853-1120-48DB-8CC5-F2ABDC3ED314](http://www.microsoft.com/downloads/details.aspx?displaylang=en&FamilyID=6430F853-1120-48DB-8CC5-F2ABDC3ED314)

~~如果有人点击该链接，则会将其重定向到一个礼貌的道歉页面，解释所请求的页面现已消失，并使用适当的关键字提供 Bing 搜索。Bing 提供的 VERY FIRST 链接与失败的 Microsoft 链接相同。~~

编辑：上面的链接现在再次正常工作，但在 Windows 7+ 上成功运行 CIM Studio 并不简单。

有人知道如何正确安装 CIM Studio 吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-08-22T20:40:38.697

由于我花了一些时间来了解让 WMI CIM Studio 在 Windows 7 或 Windows 8 和 IE11（IE9 或更高版本）下运行的这些细微差别，我想我会在这里分享...

1.  安装 CIM Studio（[WMI 管理工具](http://www.microsoft.com/en-us/download/details.aspx?id=24045)，如@knb 的回答所示）

2.  添加`<meta http-equiv="X-UA-Compatible" content="IE=8" />`到`<HEAD>`C:\Program Files (x86)\WMI Tools\studio.htm 文件中 SCRIPT LANGUAGE="VBS" 前面的部分。此覆盖是必要的，因为 CIM Studio 使用 VBScript 代码，而 IE11+ 已放弃对它的支持。

3.  创建“C:\Program Files (x86)\Internet Explorer\iexplore.exe”“C:\Program Files (x86)\WMI Tools\studio.htm”的快捷方式

4.  配置快捷方式以管理员身份运行（属性 -> 高级...）

另一种选择是改用[Microsoft WMI Code Creator](http://www.microsoft.com/en-us/download/details.aspx?id=8572)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T22:21:51.270

Microsoft 链接似乎已损坏，但您可以使用 CNET Download.com 站点[`WMI Administrative Tools`](http://download.cnet.com/WMI-Administrative-Tools/3000-2383_4-75452613.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T18:47:34.273

现在，可以再次直接从 Microsoft 检索 WMITools.exe 文件，网址为

[http://www.microsoft.com/en-us/download/details.aspx?id=24045](http://www.microsoft.com/en-us/download/details.aspx?id=24045)

可以通过简单的谷歌搜索“cim studio”轻松找到它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-24T09:52:04.867

看起来微软的所有下载资源都将消失。

CIM Studio 的一个很好的开源替代品是 WMI Explorer，您可以从这里下载：[https ://github.com/vinaypamnani/wmie2/releases](https://github.com/vinaypamnani/wmie2/releases)

# ruby - 如何加载用户的 .bashrc 的 RVM 部分以在 Apache 下运行 Ruby CGI 脚本？

> ID：12010699
> 
> 赞同：2
> 
> 时间：2012-08-17T17:49:23.247
> 
> 标签：ruby, apache, cgi, rvm

我在 Ubuntu 12.04 上配置了一个新服务器，并开始使用 RVM。

我按照[Ryan Bigg 的指南](http://ryanbigg.com/2010/12/ubuntu-ruby-rvm-rails-and-you/)在我的用户下安装了 RVM（作为我自己，而不是使用 sudo 的 root） ，以前没有安装过系统范围的 Ruby。所以，我在 /usr/bin 下没有任何 Ruby。然后我的第一个任务是替换我所有 CGI 脚本的 shebang 行，从

```
!#/usr/bin/ruby 
```

至

```
!#/usr/bin/env ruby 
```

但是我的脚本没有在 Apache 下运行。在终端中，我可以运行它们（`./index.cgi`例如，通过键入），但不能通过浏览器运行。相关注意事项：在两者中，用户是相同的，即 Apache 用户与登录终端的用户相同。通过 php 测试，我检查了 RVM 环境（最后几行`.bashrc`）没有在 Apache 下加载。

我看到了[这个使用 RVM 运行 CGI 脚本的](http://www.lamolabs.org/blog/5397/how-to-use-rvm-installs-of-ruby-in-shell-cgi-scripts/)提示，它建议将特定版本的 Ruby 的完整路径放在 shebang 行中。如果您有在不同版本的 Ruby 上运行的脚本，这将很有用。但是那个解决方案对我不起作用，因为我的脚本必须在不同的机器上运行，不同的用户和不同的路径。

对我有用的解决方案是将所需 Ruby 版本的符号链接放在 /usr/bin 下：

```
sudo ln -s /home/apache_user/.rvm/rubies/ruby-1.8.7-p370/bin/ruby /usr/bin/ruby 
```

但我想知道是否有更好的解决方案，因为我想这`rvm --default use`比`sudo ln -s`.

我在想：

*   在启动时加载 RVM 环境（但我不知道如何实现）；
*   为每个 Web 请求加载 RVM 环境（这会降低性能，我不知道如何配置 Apache 来做到这一点）；
*   也许 RVM 环境已加载，我所要做的就是猜测要通过`PassEnv`指令传递的相关变量的名称。但我对此表示怀疑。（为什么 Apache 会运行`.bashrc`而不是另一个 shell，比如`csh`or `ksh`？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T23:23:57.250

您可以采购 ruby​​ 环境，我不确定是否足以`$HOME`为 apache 采购它或者您是否需要修改`/etc/init.d/apache2`，但行是：

```
source /path/to/rvm/environments/<name> 
```

您可以在哪里`<name>`使用完整的 ruby​​ 名称或别名

您可以使用以下命令创建别名：

```
rvm alias create veve 1.9.3-p125@my-project 
```

安装在其中的 RVM`/home/app/.rvm`将允许您使用：

```
source /home/app/.rvm/environments/veve 
```

在`.bashrc`或`/etc/init.d/apache2`（就在顶部附近，在 shebang 下方）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-23T22:34:21.720

你总是可以的

```
sudo ln -s /usr/local/rvm/rubies/default/bin/ruby /usr/bin/ruby 
```

这会将 rvm 管理的 Ruby 的默认版本链接到`/usr/bin/ruby`，您将永远不必做任何事情。设置它并忘记它。

# c++ - 程序退出状态和 $?

> ID：12010700
> 
> 赞同：3
> 
> 时间：2012-08-17T17:49:26.927
> 
> 标签：c++, exit-code

我读过的 C++ Primer 书说

> 从 main 返回的值以系统相关的方式访问。在 UNIX 和 Windows 系统上，在远处执行程序时，您必须发出适当的回显命令。在 UNIX 上，我们通过 echo $?

所以，如果程序是

```
int main ()
{
    return -88;
} 
```

为什么不`echo $?`退货呢？（168印在上面`echo`）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T17:52:09.133

确实如此。不过，它会将值转换为无符号的 8 位值，即 256 - 88 = 168。这是依赖于系统的习惯的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T17:55:13.457

从返回值与使用该值`main`调用相同`std::exit`。这就是标准的后期草案所说的`std::exit`（18.5，`status`是您调用它的值）：

> 最后，控制权返回到主机环境。如果`status`为零或，则返回*成功终止*`EXIT_SUCCESS`状态的实现定义形式 。如果是，则返回状态*未成功终止*的实现定义形式。否则返回的状态是实现定义的。*`status``EXIT_FAILURE`*

 **通常，该值要么按原样解释，要么转换为更小的（可能是无符号的）类型，但这实际上取决于您的环境和实现。**

# javascript - 将数字转换为字母

> ID：12010705
> 
> 赞同：0
> 
> 时间：2012-08-17T17:49:49.353
> 
> 标签：javascript

我正在尝试在其基本阶段制作一个 javascript 项目，其中脚本应提示用户，询问一个数字作为输入，将数字转换为字母并将其显示给用户。然而，它不能正常工作的脚本。

```
<html>
<head>
<script type="text/javascript">
function num()
{
    var arr1=new Array();
    var arr2=new Array();
    var i;
    var start=0;
    var end=start + 1;
    arr1[0]=prompt('Enter Number');
    for (i=0;i<2;i++)
    {
        arr2[i]=arr1[0].slice(start, end);
        arr2[i]=parseInt(arr2[i]);
        start++;
        end=start + 1;
        switch(arr2[i])
        {
            case 1:
                document.body.innerHTML = document.body.innerHTML + 'one';
                break;
            case 2:
                document.body.innerHTML = document.body.innerHTML + 'two';
                break;
            case 3:
                document.body.innerHTML = document.body.innerHTML + 'three';
                break;
            case 4:
                document.body.innerHTML = document.body.innerHTML + 'four';
                break;
            case 5:
                document.body.innerHTML = document.body.innerHTML + 'five';
                break;
            case 6:
                document.body.innerHTML = document.body.innerHTML + 'six';
                break;
            case 7:
                document.body.innerHTML = document.body.innerHTML + 'seven';
                break;
            case 8:
                document.body.innerHTML = document.body.innerHTML + 'eight';
                break;
            case 9:
                document.body.innerHTML = document.body.innerHTML + 'nine';
                break;
        }
    }
}
onload=num();
</script>
</head>
<body>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T18:08:51.740

特别是，我真的不喜欢`switch`结构。我更喜欢 JavaScript 文字对象表示法。

在下面检查：

**html**

`<input type="button" id="getMyNumber" value="Get my Number"/>`

**JavaScript + jQuery**

```
$(function() {
  $('#getMyNumber').on('click', function() {
      var numbers = {
          "1": "One",
          "2": "Two",
          "3": "Three",        
          "4": "Four",
          "5": "Five",
          "6": "Six",
          "7": "Seven",
          "8": "Eight",
          "9": "Nine",
          "10": "Ten",
          "default": "No number typed!"
      };
      var input = prompt("Type a number: ");                     
      alert(numbers[input] || numbers["default"]);
   });
}); 
```

如果您愿意，可以[使用 jsFiddle](http://jsfiddle.net/gsMBW/)。无需转换或技巧，只需简单的 JavaScript。

**一些参考资料：**

[Mozilla - 使用对象](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Working_with_Objects#Creating_new_objects)

[反对 Switch 的案例](http://javascriptweblog.wordpress.com/2010/03/08/caseagainstswitch/)

- 编辑 -

这是仅使用 JavaScript 的解决方案，以避免批评（jQuery 加载、重载等）：

**html**

`<input type="button" id="getMyNumber" value="Get my Number" onclick="getNumberRepresentation()" />`

**仅限 JavaScript**

```
function getNumberRepresentation() {
  var numbers = {
      "1": "One",
      "2": "Two",
      "3": "Three",        
      "4": "Four",
      "5": "Five",
      "6": "Six",
      "7": "Seven",
      "8": "Eight",
      "9": "Nine",
      "10": "Ten",
      "default": "No number typed!"
  };
  var input = prompt("Type a number: ");                     
  alert(numbers[input]);
} 
```

另一个[jsFiddle](http://jsfiddle.net/gsMBW/2/)版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T17:57:30.387

看看我为你做的[这个小提琴。](http://jsfiddle.net/WECT8/)

**编辑：**来源：

html:

```
<p onclick="javascript:ask();">Click</p>​ 
```

Javascript：

```
function ask(){

    var inputAsString;
    var userInput = prompt("Pick a number");

    switch( parseInt(userInput) ){

        case 1:
            inputAsString = "One";
        break;
        case 2:
            inputAsString = "Two";
        break;
        default:
            inputAsString = "I don't know...";           
    }

    alert( "\"" + userInput + "\" as a string is: " + inputAsString );
}​ 
```

# php - cakephp default.ctp 是哪个控制器？

> ID：12010715
> 
> 赞同：1
> 
> 时间：2012-08-17T17:50:17.123
> 
> 标签：php, cakephp

我有一个用 cakephp 2 开发的网站，我希望它进入我的 default.ctp 有一个菜单，其中包含从数据库中获取的一些元素。如何更改必须使用的控制器的元素？我必须把我的查询放在哪里？因为如果我进入一个模型很容易但是进入default.ctp？我怎样才能做到这一点？这是我的 default.ctp：

```
<body>
        <div class="content">
            <div id="navigation">
                <ul>

                    <?php
                        if (!empty($authUser)) {
                        ?>
                        <li><?php echo $this->Html->link('I want to change this',   array('controller' => 'ingredients',    'action' => 'index')); ?></li>
                        <li><?php echo $this->Html->link('I want to change this',       array('controller' => 'brands',         'action' => 'index')); ?></li>
                        <li><?php echo $this->Html->link('I want to change this',   array('controller' => 'manufacturers',  'action' => 'index')); ?></li>
                    <?php
                            // $is_logged from UsersController->beforeFilter
                            echo $this->element ('header_menu_logged');
                        } else {
                            ?>
                            <li><?php echo $this->Html->link('Competizioni',        array('controller' => 'brands',         'action' => 'index')); ?></li>
                            <li><?php echo $this->Html->link('Cerca',   array('controller' => 'manufacturers',  'action' => 'index')); ?></li>
                            <?php
                            // $current_model
                            echo $this->element ('header_menu', array('selected' => 'Pippo'));
                        }
                    ?>
                </ul>
            </div>
            <div class="page">
                <?php
                // messaggi di stato per le azioni

                if (empty($flash_element)) {
                    $flash_element = $this->Session->read('flash_element');
                    if (empty($flash_element)) {
                        $flash_element = 'default';
                    }
                }

                // echo '>'.$flash_element.'<';

                $auth_msg = $this->Session->flash('auth', array ('element' => 'flash_'.$flash_element));
                $flash_msg = $this->Session->flash('flash', array ('element' => 'flash_'.$flash_element));

                if (!empty($auth_msg)) {
                    echo $auth_msg;
                }

                if (!empty($flash_msg)) {
                    echo $flash_msg;
                }
                ?>

                <section><!--class="contents"-->
                <?php echo $content_for_layout; ?>
                </section>
            </div>
        </div>
    </body> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T18:05:05.390

好吧，我建议`$this->set('anyString', $varStringOfTheLink);`在你的`beforeRender()`或`beforeFilter()`appController.php 中做。

从那里进行查询，然后使用该`set()`函数为您的视图设置一个变量。

然后在 default.ctp 你将能够使用`$anyString`.

所以做一个快速总结。在您的 appController 中，在过滤器或渲染之前进行查询，然后设置它以便您的视图可以使用它。该`set()`函数的第一个参数是您要在视图中使用的 var 的名称。之前放一个`$`。第二个参数是您想要的变量的值。

```
//appController.php
function beforeFilter(){
    $myQueryVar = $this->Model->find('whateverIWant');
    $this->set('myLinkOne', $myQueryVar);
}

//layouts/default.ctp
echo $this->Html->link($myLinkOne,   array('controller' => 'ingredients',    'action' => 'index')); 
```

# xcode - 从命令行配置 Xcode 源代码树？

> ID：12010718
> 
> 赞同：2
> 
> 时间：2012-08-17T17:50:20.853
> 
> 标签：xcode

我们有一个使用 Xcode“源代码树”的项目。

对我们来说，允许人们移动这些以使用不同的分支/等很重要。

但是，对于“库存”设置，我们可以很容易地从脚本中确定路径应该是什么。

我想构建一个脚本来检查和设置新计算机，因为我厌倦了手动设置机器的繁琐过程。

有谁知道我如何在 Xcode 中从脚本创建“源代码树”（最好使用简单的 bash 脚本，但如果必须，我会使用 AppleScript）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T19:57:44.733

有问题的 plist 是 com.apple.dt.Xcode

所以你可以说：

```
defaults read com.apple.dt.Xcode 
```

它会解析并打印 Xcode 的首选项。

有问题的关键是`IDEApplicationwideBuildSettings`。

如果您定义了一些，您可能会看到如下内容：

```
IDEApplicationwideBuildSettings =     {
    "MON_SOURCE_ROOT" = "/Volumes/Dir/Dir/Dir/";
    "MON_THIRD_PARTY_SOURCE_ROOT" = "/Volumes/Dir/Dir/ThirdParty/";
}; 
```

现在，您可以使用命令行`write`选项`defaults`来设置或删除值。

```
defaults write com.apple.dt.Xcode IDEApplicationwideBuildSettings THE_ARRAY_OF_KEY_VALUE_PAIRS 
```

`THE_ARRAY_OF_KEY_VALUE_PAIRS`设置它的值在哪里。

您可能还需要更新`IDESourceTreeDisplayNames`以创建别名：

```
IDESourceTreeDisplayNames =     {
    "MON_SOURCE_ROOT" = "MON_SOURCE_ROOT";
    "MON_THIRD_PARTY_SOURCE_ROOT" = "MON_THIRD_PARTY_SOURCE_ROOT";
}; 
```

处理副本，直到找出确切的命令。

# python - 按特定顺序操作列表和数组

> ID：12010721
> 
> 赞同：1
> 
> 时间：2012-08-17T17:50:43.510
> 
> 标签：python, arrays, numpy

我有一个表格列表：

```
['a b 1 2', 'c d 3 4'] 
```

我最终试图得到一个 4 个垂直的 numpy 数组。例如，`['a','c']`和`[1,2]`

我对使用各种拆分函数、数组拆分等感到有些困惑。

超级菜鸟问题，这更像是一种尽可能有效地做到这一点的练习。

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T18:48:35.523

numpy 中没有将 python 字符串列表中的字符串直接拆分为单独数组的功能。如果这些字符串来自读取具有一致列数据类型的文本文件，请考虑使用`numpy.genfromtxt`：

[http://docs.scipy.org/doc/numpy/reference/generated/numpy.genfromtxt.html](http://docs.scipy.org/doc/numpy/reference/generated/numpy.genfromtxt.html)

**编辑**或者您可以强制您将数组转换为可以在他的回复`np.genfromtxt`中读取为**jterrace**注释的格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T19:14:38.310

您可以将其作为记录数组读取：

```
>>> A = ['a b 1 2', 'c d 3 4']
>>> from StringIO import StringIO
>>> import numpy
>>> s = StringIO('\n'.join(A))
>>> data = numpy.genfromtxt(s, dtype=[('letter1', 'S1'), ('letter2', 'S1'), ('num1', 'f8'), ('num2', 'f8')]) 
```

然后访问列：

```
>>> data['letter1']
array(['a', 'c'], 
      dtype='|S1')
>>> data['num1']
array([ 1.,  3.]) 
```

请注意，这仅限于固定大小的字符串。不确定这是否是您的数据的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T18:04:05.393

```
 A = ['a b 1 2', 'c d 3 4']
  filter(lambda x:x[0].strip() or x[1].strip(),zip (*A))
  #[('a', 'c'), ('b', 'd'), ('1', '3'), ('2', '4')] 
```

虽然不是 numpy 数组

[编辑] 假设我理解了我不确定我所做的目标......

# macos - Moodle 和 SCORM .zip 包

> ID：12010728
> 
> 赞同：1
> 
> 时间：2012-08-17T17:51:02.207
> 
> 标签：macos, moodle, scorm

我有一个在 Moodle 中工作的 scorm 包。但是，如果将其解压缩到文件夹然后重新压缩并尝试使用它，我会在 Moodle 中得到以下信息：“不正确的文件包 - 缺少 imsmanifest.xml 或 AICC 结构”

注意，我这样做是因为我试图调试它并深入到这个简单的测试：

1.  从工作 scorm .zip 包“TestCourse.zip”开始
2.  在 mac os x 上，我双击将其解压缩到当前文件夹。
3.  我 cmd 单击它并选择解压缩，生成“TestCourse2.zip”
4.  我尝试在 Moodle 上使用“TestCourse2.zip”作为 scorm 包并得到上面的错误。

我尝试使用不同的程序重新压缩文件夹并得到相同的结果。我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T03:24:55.620

这是因为您重新压缩了文件夹本身。你不应该这样做。您应该进入文件夹根目录，然后重新压缩所有内容以生成新的有效包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T14:23:12.080

imsmanifest.xml 必须在 zip 文件的根目录中，而不是在任何文件夹中（并且不要以任何其他方式更改结构，因为 imsmanifest 与其他文件有依赖关系）。

# django - django 信号，正确的方式

> ID：12010729
> 
> 赞同：2
> 
> 时间：2012-08-17T17:51:05.000
> 
> 标签：django

好的，我有一个一般性的问题.. 我想让我的 models.py 非常干净......除了声明模型之外没有其他东西。

可以说我有这个作为models.py

```
class UserProfile(models.Model:
    user = models.OneToOneField(User, related_name='profile')
    #other stuff 
```

这是我的signals.py

```
def create_user_profile(sender, instance, created, **kwargs):
    if created:
        profile, created = UserProfile.objects.get_or_create(user=instance)

post_save.connect(create_user_profile, sender=User) 
```

我该如何告诉我的应用程序这是我的信号文件？..我必须在我的models.py中声明它们吗？

//鼠

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T17:58:23.410

好吧 - 我看到了我喜欢的一种方法。在同一个应用程序中创建receives.py 或signals.py，并放置您的信号接收方法，然后将它们全部导入并连接到models.py 中的信号。

甚至（如果你喜欢使用装饰器来定义连接的信号，我总是使用它） - 在 models.py 的末尾导入整个 receivers.py：`from app.receivers import *`

在这个解决方案中我唯一不喜欢的是它有时会以你必须关心的循环依赖结束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T17:59:35.040

您必须导入`signals.py`某处以便它被执行并且 django 注册信号和处理程序。

最好将`models.py`其包含在内，以便足够早地包含它，以便在生成任何信号之前注册信号处理程序。

# dojo - 是否可以像在数据网格中一样过滤 dgrid 中的数据？如果是这样，怎么做？

> ID：12010731
> 
> 赞同：8
> 
> 时间：2012-08-17T17:51:07.417
> 
> 标签：dojo, dgrid

我对 dojo 比较陌生，并且已经了解了 datagrid 如何提供动态过滤功能，该功能可以根据您在过滤器文本输入中键入的内容来减少可见行。我还没有找到任何关于如何使用 dgrid 进行操作的示例。如果可以做到，请提供一个示例或将我指向提供教程或示例的资源。谢谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-30T13:46:35.440

对的，这是可能的。使用`dgrid/OnDemandGrid`和定义`query`函数，该函数将返回`true`或`false`基于您为`dojo/store`电网供电的每一行的逻辑。

我准备了一个在 jsFiddle**上玩的例子：http:** [//jsfiddle.net/phusick/7gnFd/](http://jsfiddle.net/phusick/7gnFd/)，所以我不必解释太多：

![在此处输入图像描述](../Images/9b90ad970d4c16cd8baf4e374dbd4d46.png)

查询功能：

```
var filterQuery = function(item, index, items) {
    var filterString = filter ? filter.get("value") + "" : "";

    // early exists
    if (filterString.length < 2) return true;
    if (!item.Name) return false;

    // compare
    var name = (item.Name + "").toLowerCase();
    if (~name.indexOf(filterString.toLowerCase())) { return true;}

    return false;
}; 
```

网格：

```
var grid = new Grid({
    store: store,
    query: filterQuery, // <== the query function for filtering
    columns: {
        Name: "Name",
        Year: "Year",
        Artist: "Artist",
        Album: "Album",
        Genre: "Genre"
    }
}, "grid"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-23T17:00:00.153

我知道这不是所提问题的答案，并且提供的答案非常精巧，我们经常使用它。

但是，如果您使用的是 TreeGrid（带有“dgrid/tree”插件的列），此功能似乎根本无法正常工作。我编写了一些代码来模拟与树网格接受的答案相同的行为。它基本上只是遍历商店中的项目并隐藏任何与您提出的条件不匹配的行元素。以为我会分享它以防它对任何人有帮助。它相当难看，我相信它可以改进，但它有效。

它基本上使用与 phusick 的答案相同的概念。您需要查看 TextBox 上的值，但不是刷新网格，而是调用一个函数：

```
textBox.watch("value", lang.hitch(this, function() {
                        if (timeoutId) {
                            clearTimeout(timeoutId);
                            timeoutId = null;
                        };

                        timeoutId = setTimeout(lang.hitch(this, function() {
                            this.filterGridByName(textBox.get('value'), myGrid);
                        }, 300));
                    })); 
```

这是功能：

```
filterGridByName: function(name, grid){
                try {
                        for (var j in grid.store.data){
                            var dataItem = grid.store.data[j];
                            var childrenLength = dataItem.children.length;
                            var childrenHiddenCount = 0;
                            var parentRow = grid.row(dataItem.id); 
                            for (var k in dataItem.children){

                                var row = grid.row(dataItem.children[k].id);
                                var found = false;
                                if (dataItem.children[k].name.toLowerCase().indexOf(name.toLowerCase()) != -1){
                                    found = true;
                                }
                                if (found){
                                    if (row.element){
                                        domStyle.set(row.element, "display", "block");
                                    }
                                    if (parentRow.element){
                                        domStyle.set(parentRow.element, "display", "block");
                                    }
                                } else {
                                    childrenHiddenCount++;
                                    // programmatically uncheck any hidden item so hidden items
                                    for (var m in grid.dirty){
                                        if (m === dataItem.children[k].id && grid.dirty[m].selected){
                                            grid.dirty[m].selected = false;
                                        }
                                    }
                                    if (row.element){
                                        domStyle.set(row.element, "display", "none");
                                    }
                                }
                            }
                            // if all of the children were hidden, hide the parent too

                            if (childrenLength === childrenHiddenCount){
                                domStyle.set(parentRow.element, "display", "none");
                            }
                        }
                } catch (err){
                    console.info("error: ", err);
                }
            } 
```

# ios - 回收时不会重新布局自定义 iOS UITableViewCells

> ID：12010734
> 
> 赞同：1
> 
> 时间：2012-08-17T17:51:14.040
> 
> 标签：ios, uitableview, layoutsubviews

我有一个 UITableView，它显示来自各种社交网络的更新帖子。我有自定义 UITableViewCell 子类，里面有一个自定义 UIView，它负责绘制所有标签和图像，类似于 Apple 在这里描述的方式：http: [//developer.apple.com/library/ios/#documentation/UserExperience/概念/TableView_iPhone/TableViewCells/TableViewCells.html#//apple_ref/doc/uid/TP40007451-CH7-SW18](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/TableView_iPhone/TableViewCells/TableViewCells.html#//apple_ref/doc/uid/TP40007451-CH7-SW18)

在这个视图的 -layoutSubviews 调用中，我找到了各种标签所需的大小，并相应地设置了它们的框架。然而，在滚动一点之后，很明显，当一个单元格被回收时，-layoutSubviews 没有被调用，导致一些单元格的标签框没有设置足够大来显示它们的内容。当将我的数据对象通过单元格传递到自定义视图时，我调用 [self setNeedsDisplay]，我相信这会导致单元格调用 -layoutSubviews。

我如何才能最好地确保标签的大小适合发送给他们的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T17:54:57.050

如果要强制布局，请将`setNeedsLayout`（不是`setNeedsDisplay`）发送到视图。听起来您需要在退回牢房之前发送`[cell setNeedsLayout]`您的信息。`tableView:cellForRowAtIndexPath:`

# objective-c - 使用 IB rootViewController 在 AppDelegate 中初始化 UINavigationController

> ID：12010737
> 
> 赞同：0
> 
> 时间：2012-08-17T17:51:21.240
> 
> 标签：objective-c, cocoa-touch, uinavigationcontroller

我正在我的 AppDelegate 中工作，以使应用程序的视图每次来自后台时都返回到第一个视图。

首先，我在 IB 中设置了一个导航控制器作为我的初始视图控制器。尽管如此，如果我把

```
if (!self.window.rootViewController.navigationController)
NSLog(@"null rootview navcontroller"); 
```

在 appDidFinishLaunching 中，NSLog 发生表明我的窗口的导航控制器为空。所以，我想我会尝试自己实例化它：

```
self.navigationController = [[UINavigationController alloc] initWithRootViewController:self.window.rootViewController]; 
```

但是当我尝试我得到错误时：

```
Pushing a navigation controller is not supported 
```

我必须承认我真的不明白。我不应该推什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T18:19:02.240

如果导航控制器是初始视图控制器，那么`self.window.rootViewController`应​​该是导航控制器本身。

的类型`rootViewController`是 UIViewController，因此您需要根据需要进行转换。

# css - CSS：根据屏幕大小对齐元素

> ID：12010739
> 
> 赞同：0
> 
> 时间：2012-08-17T17:51:23.440
> 
> 标签：css, jsp, alignment

所以我正在编写一个程序，它需要根据观众的屏幕尺寸调整元素的大小。该程序在 jsp/sql/xhtml/css 中，我有几个问题。

有没有办法通过将屏幕宽度保存到 jsp 变量来选择 css 文件？

有没有办法将一个 div 对齐到另一个 div 下方并将上面的 div 用作它的一种容器？这个问题有点复杂

目标：在其下方有一个带有文本标签的图像。问题： div 是父 div 的一部分，并且 div 提供的图像将根据屏幕尺寸发生变化。

这就是我正在做的事情。

```
<div id="container">
<div id="inner">
    <div class="1">--stuff</div>
    <div class="2"><img src="server:8080/project?minutes=720&width=<%= out.print(width) %> </div> <-- want to align under this
    <div class="3">--stuff</div>
</div>
<div id="label"> <--Want this div aligned underneath "2"
    <div class="1">2.0</div> <-- Want the text at 25% of the image (right)
    <div class="2">4.0</div> <-- Want the text at 50% of the image (right)
    <div class="3">6.0</div> <-- Want the text at 75% of the image (right)
    <div class="4">8.0</div> <-- Want the text at 100% of the image (right)
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T19:55:04.073

您想要做的 - 响应式设计 - 非常酷，但也变得相当复杂。[这需要一些学习，但 CodeSchool 有一个名为Journey Into Mobile](http://www.codeschool.com/courses/journey-into-mobile)的高质量课程，它涵盖了自适应屏幕尺寸，应该能让你走上正确的道路。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T11:28:18.680

您需要深入研究响应式设计、媒体查询和流体布局。
如上所述，Codeschool 确实有涵盖这些领域的精彩课程。

# java - 在休眠中使用条件子句打印数据时遇到问题

> ID：12010743
> 
> 赞同：0
> 
> 时间：2012-08-17T17:51:32.933
> 
> 标签：java, hibernate

我有以下代码并且正在插入，但是 query() 中的查询没有打印它假设的 println。

```
package com;

import java.io.File;
import java.util.Iterator;
import java.util.List;
import java.util.Scanner;

import org.hibernate.Criteria;
import org.hibernate.Query;
import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.hibernate.Transaction;
import org.hibernate.cfg.Configuration;
import org.hibernate.criterion.Restrictions;

import roseindia.tutorial.hibernate.Insurance;

import com.Employee;

public class EmployeeEx 
{

public static void main(String[] args) 
{
    Session session = null;

    try
    {       
        Transaction transaction = null; 

        SessionFactory sessionFactory = new Configuration().configure().buildSessionFactory();
        session =sessionFactory.openSession();

        File f=new File("c:/Class/Employee1.txt") ;
        Scanner scan=new Scanner(f);

        transaction = session.beginTransaction();
        while(scan.hasNext())
        {               
            Employee em = new Employee();
            String line=scan.nextLine();            
            String empArray[]=line.split(" ");

            em.setId(Integer.parseInt(empArray[0]));
            em.setName(empArray[1]);
            em.setSalary(Double.parseDouble(empArray[2]));
            em.setManager(empArray[3]);
            session.save(em);
            transaction.commit();
        }   
  query();//calling the query method

}
catch(Exception e)
{
    System.out.println(e.getMessage());
}

finally
{
    session.flush();
    session.close();
}
}

public static void query()
{
    Session session = null;
    SessionFactory sessionFactory = new Configuration().configure().buildSessionFactory();
    session =sessionFactory.openSession();

    Criteria criteria = session.createCriteria(Employee.class);
    criteria.add(Restrictions.like("manager", "Anurag"));
    criteria.add(Restrictions.gt("salary", 1000));

    List emp = criteria.list();
    for(Iterator it = emp.iterator();it.hasNext();)
    {
        Employee em = (Employee) it.next();
        System.out.println("Id: " +em.getId());;
        System.out.println("Name: " +em.getName());
        System.out.println("Salary: " +em.getSalary());
        System.out.println("Manager: " +em.getManager());

    }
    session.close();
}

} 
```

这是控制台上显示的内容：（插入工作正常）

```
Hibernate: insert into EMPLOYEE1 (NAME, SALARY, MANAGER, ID) values (?, ?, ?, ?)
Hibernate: insert into EMPLOYEE1 (NAME, SALARY, MANAGER, ID) values (?, ?, ?, ?)
Hibernate: insert into EMPLOYEE1 (NAME, SALARY, MANAGER, ID) values (?, ?, ?, ?)
Hibernate: insert into EMPLOYEE1 (NAME, SALARY, MANAGER, ID) values (?, ?, ?, ?)
Hibernate: insert into EMPLOYEE1 (NAME, SALARY, MANAGER, ID) values (?, ?, ?, ?)
Hibernate: insert into EMPLOYEE1 (NAME, SALARY, MANAGER, ID) values (?, ?, ?, ?)
Hibernate: insert into EMPLOYEE1 (NAME, SALARY, MANAGER, ID) values (?, ?, ?, ?)
Hibernate: insert into EMPLOYEE1 (NAME, SALARY, MANAGER, ID) values (?, ?, ?, ?)
Hibernate: insert into EMPLOYEE1 (NAME, SALARY, MANAGER, ID) values (?, ?, ?, ?)
Hibernate: insert into EMPLOYEE1 (NAME, SALARY, MANAGER, ID) values (?, ?, ?, ?)
Hibernate: insert into EMPLOYEE1 (NAME, SALARY, MANAGER, ID) values (?, ?, ?, ?)
Hibernate: insert into EMPLOYEE1 (NAME, SALARY, MANAGER, ID) values (?, ?, ?, ?)
Hibernate: select this_.ID as ID0_, this_.NAME as NAME7_0_, this_.SALARY as SALARY7_0_,    this_.MANAGER as MANAGER7_0_ from EMPLOYEE1 this_ where this_.MANAGER like ? and this_.SALARY>? java.lang.Integer 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T18:27:58.180

该`query()`方法没有被执行，因为您没有调用它。

`main()`无论如何，除非您成功，否则您无法调用它`static`：

```
public static void query() 
```

当你运行一个类时，只有`main()`方法会被执行，所以在你添加`static`到方法签名之后`query()`，将这一行添加到你的`main()`方法中：

```
query(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T00:49:23.190

如果您正在调用该`query()`方法并且它仍然没有打印任何内容，那么这意味着您的`emp`列表是空的。如果您有任何符合查询限制的记录，请检查您的数据库。如果这样做，请检查 list 的内容`emp`。

# cocoa - 按键时发出不需要的蜂鸣声

> ID：12010745
> 
> 赞同：6
> 
> 时间：2012-08-17T17:51:55.430
> 
> 标签：cocoa, nsview, nsresponder

我有一个接受键输入的自定义视图，它在`NSScrollView`. 我已将其设置`acceptsFirstResponder`为 yes 并且它成功接受了 keyDown。但是每次我敲击一个键，我都会听到一声哔哔声。我确定还需要其他东西，但不记得是什么了。请帮忙。

> ```
> -(void)keyUp:(NSEvent *)theEvent{
> 
> NSLog(@"is first responder %i", self.window.firstResponder == self);
> 
> switch (theEvent.keyCode) {
>     case KeyCodeEnumBackspace:
>     case KeyCodeEnumDelete:
>     {
>         if (self.scheduleControl.selectedEvent) {
>             [self.scheduleControl deleteEvent:self.scheduleControl.selectedEvent];
>         }
>     }
>         break;
> 
>     default:
>         break;
> }
>    } 
> ```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-18T19:02:42.920

知道了。哔声发生在`keyDown`，而不是`KeyUp`。为了消除哔哔声，我需要处理它，一个空的实现就足够了。关键是**不要**把它传给super

```
- (void)keyDown:(NSEvent *)theEvent {

}

- (void)keyUp:(NSEvent *)theEvent {
    switch (theEvent.keyCode) {
        case KeyCodeEnumBackspace:
        case KeyCodeEnumDelete:
            if (self.scheduleControl.selectedEvent) {
                [self.scheduleControl deleteEvent:self.scheduleControl.selectedEvent];
            }
            break;
        default:
            break;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-09-16T08:28:21.833

这是我的解决方案，就像我的情况一样：

STEP 1\. 子类 NSViewController 和覆盖`-performKeyEquivalent(with:)`方法：

```
 extension MyViewController {

        override func performKeyEquivalent(with event: NSEvent) -> Bool {
            switch event.modifierFlags.intersection(NSEvent.ModifierFlags.deviceIndependentFlagsMask) {
            case [.command] where event.characters == "\r":
                // do something, and....
                // return a flag that we have handled this key-stroke combination
                return true
            default:
                // otherwise unhandled (by return `false`)
                return false
            }
        }
    } 
```

步骤 2\. 设置您的控制器以观察本地事件：

```
 class MyViewController: NSViewController {

        // ...
        // properties and methods...
        // ...

        override func viewDidLoad() {
            super.viewDidLoad()

            _ = NSEvent.addLocalMonitorForEvents(matching: .keyDown) { (event) -> NSEvent? in

                // process the event and get the handled/unhandled flag;
                let isHandled = self.performKeyEquivalent(with: event)

                // stop dispatching this event if handled, or...
                // dispatch it forward to next receiver if unhandled
                return isHandled ? nil : event
            }
        }

        // ...   
    } 
```

我发现错误哔声是由您在块中分派事件后的后续调用之一触发的。因此，要使哔声静音，只需通过 return nil 停止调度它。

参考文档：

> 使用 +addLocal 安装一个事件监视器，该监视器在事件被 -[NSApplication sendEvent:] 分派之前接收事件。在这种情况下，您的块应该返回一个有效的 NSEvent（可能与传入的 NSEvent 相同，或者可能是新创建的 NSEvent）以导致事件被调度，或者它可能返回 nil 以停止事件的调度. 请注意，对于嵌套事件跟踪循环（例如控件跟踪、菜单跟踪或窗口拖动）消耗的事件，不会调用您的处理程序；只有通过 -[NSApplication sendEvent:] 分派的事件才会传递给您的处理程序。

# jquery - jquery函数调用WCF REST服务

> ID：12010748
> 
> 赞同：1
> 
> 时间：2012-08-17T17:52:08.507
> 
> 标签：jquery, jsonp

调用以下 WCF REST 服务的正确函数是什么

```
http://xx.x.x.xxx/GAdmin/WGService/Service1.svc/RetrieveData?term=apple 
```

添加了以下参数

```
term=apple
username:joe password:pote 
```

并且是 json 它应该具有 jsonp 的回调函数

```
 $.getJSON('http://xx.x.x.xxx/GAdmin/WGService/Service1.svc/RetrieveData?term=apple
  callback=?'{
 content: { username: "joe", password: "pote" },
 function (data)
 {
    alert('Received ' + data + ' results');
 }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T17:58:29.923

无法找出问题，但如果可能，请通过这篇文章

[使用 jQuery 调用 WCF 服务的步骤](http://pranayamr.blogspot.ca/2010/12/steps-to-call-wcf-service-using-jquery.html)

[使用 WCF 创建 REST 服务并使用 jQuery 使用](http://pranayamr.blogspot.ca/2011/03/rest.html)

[使用 Jquery/Javascript 调用跨域 WCF 服务](http://pranayamr.blogspot.ca/2011/06/calling-cross-domain-wcf-service-using.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T18:12:11.393

我不确切知道您当前是如何配置 WCF 服务的，但是以下代码块将调用该服务并将结果传递给回调。

```
$.ajax({
    cache: false,
    type: "GET",
    async: false,
    url: "http://xx.x.x.xxx/GAdmin/WGService/Service1.svc/RetrieveData?term=apple",
    contentType: "application/json",
    success: function (response) {
        /* SUCCESS FUNCTION */
    },
    error: function (error) {
        /* ERROR FUNCTION */
    }
}); 
```

# python - CAS_SERVER_URL 的 URL 是什么？

> ID：12010751
> 
> 赞同：0
> 
> 时间：2012-08-17T17:52:22.323
> 
> 标签：python, django, cas

我如何知道我的**CAS**（中央身份验证服务）源的 url 是什么？
我将 django-cas 安装到`/home/myuser/webapps/djangoapp/lib/python2.7/django_cas`
我遵循[本指南](https://bitbucket.org/cpcc/django-cas/overview)的文件夹中，但我不知道`CAS_SERVER_URL`. 我怎么知道？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T11:42:25.513

Django_CAS 只是一个针对[CAS 服务器](http://www.jasig.org/cas)进行身份验证的客户端。CAS_SERVER_URL 位于您运行 CAS 服务器实例的位置。

附带说明一下，如果您不是 CAS 服务器的管理员，则 CAS 管理员必须将应用程序添加到 CAS 中的已批准服务列表中。

# java - 肥皂请求是否保持开放直到返回？

> ID：12010755
> 
> 赞同：0
> 
> 时间：2012-08-17T17:52:29.530
> 
> 标签：java, web-services, jakarta-ee

如果从客户端（android、桌面应用程序等）发出一个肥皂网络服务请求：只要网络服务没有发送响应，连接是否还活着并打开？

或者网络服务是否为对客户端的响应创建了一个“新连接”？

哪一个适用于 Web 服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T17:55:57.193

是的。响应将通过同一连接返回。Web 服务调用是在`HTTP`使用持久`TCP`连接的基础上完成的。`HTTP1.1`要求底层连接在请求之间持续存在。下一个请求也将重用底层连接，但这不是必需或保证的

# c# - 将锯齿状 char[][] 转换为 char[,]？

> ID：12010756
> 
> 赞同：0
> 
> 时间：2012-08-17T17:52:30.210
> 
> 标签：c#, arrays

我昨天开始的“地狱般的”项目之一是[Befunge](https://en.wikipedia.org/wiki/Befunge)口译员。除了边缘情况外，我大部分时间都在工作。

我变得懒惰，决定用这个阅读一个 befunge 程序：

```
char[][] program = File.ReadAllLines(args[0]).Select(x => x.ToCharArray()).ToArray(); 
```

我知道我以后会为自己创造更多的工作，但我想进入其他部分并留在那里。`program`现在是以后了，我需要解决不是矩形的事实。假设我有这个 befunge 程序：

```
v   v   <
    @
>       ^ 
```

第 1 行和第 3 行有 9 个字符长，但第 2 行只有 5 个字符。在我设置 befunge 解释器的方式中，我会`IndexOutOfBoundsException`在程序终止之前得到一个，因为在解释`^`为方向改变之后我会尝试访问`program[1][8]`并且`program[1]`只有 5 长。与其试图捕捉异常并围绕它跳舞，不如创建一个`char[,]`使用`program`空格并用空格填充额外字符的方法？

我知道我可以确定最长行的长度，行数，用这些创建 char[,] 并将它们复制过来，但我希望有一些更简单和更优雅的东西。如果新方法更好，我完全可以放弃上述行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T18:30:30.457

与其重新创建整个锯齿状数组（假设它可能相当大），不如为它创建一个包装器。该包装器将能够进行边界检查并返回一些默认值，如果它超出边界而不是错误。

```
public class Matrix<T>
{
  public T[][] UnderlyingCollection {get;set;} //should probably be readonly and set in the constructor

  public T DefaultValue {get;set;}

  public T this[int i, int j]
  {
    get
    {
      if(UnderlyingCollection.Length > i && UnderlyingCollection[i].Length > j)
        return UnderlyingCollection[i][j];
      else
        return DefaultValue;
    }
    set
    { /*TODO implement*/ }

  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T20:44:25.447

Building on @AndreCalil's previous answer, this might be more performant, especially for large arrays of primitive types. Arrays of primitive types can be treated as a flat buffer of bytes, which can be useful in this sort of work (if you've got experience with assembler or C):

```
static void Main( string[] args )
{
    string[][] jagged = new string[][] { new string[] { "alpha" ,                                              } ,
                                            new string[] { "bravo" , "charlie" ,                                  } ,
                                            new string[] { "delta" , "echo"    , "foxtrot" ,                      } ,
                                            new string[] { "golf"  , "hotel"   , "india"   , "juliet" ,           } ,
                                            new string[] { "kilo"  , "lima"    , "mike"    , "nancy"  , "oscar" , } ,
                                        } ;
    string[,]  rectangular = RectArrayFromJagged<string>( jagged ) ;

    return;
}

public static T[,] RectArrayFromJagged<T>( T[][] a )
{
    int  rows  = a.Length;
    int  cols  = a.Max( x => x.Length );
    T[,] value = new T[ rows , cols ] ;

    value.Initialize() ;

    if ( typeof(T).IsPrimitive )
    {
        int elementSizeInOctets = Buffer.ByteLength(value) / value.Length ;
        for ( int i = 0 ; i < rows ; ++i )
        {
            int rowOffsetInOctets = i * cols    * elementSizeInOctets ;
            int rowLengthInOctets = a[i].Length * elementSizeInOctets ;
            Buffer.BlockCopy( a[i] , 0 , value , rowOffsetInOctets , rowLengthInOctets ) ;
        }
    }
    else
    {
        for ( int i = 0 ; i < rows ; ++i )
        {
            int rowLength = a[i].Length ;
            for ( int j = 0 ; j < rowLength ; ++j )
            {
                value[i,j] = a[i][j] ;
            }
        }
    }
    return value ;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T19:24:33.983

Man, I'm not sure if this is what you're looking for, but check this out:

```
public static class CharArrayExtension
{
    public static char[,] FormatMatrix(this char[][] matrix)
    {
        int TotalColumns = matrix.Length;
        int TotalLines = 0;

        //Get the longest line of the current matrix
        for (int column = 0; column < TotalColumns; column++)
        {
            int line = matrix[column].Length;

            if (line > TotalLines)
                TotalLines = line;
        }

        //Instantiate the resulting matrix
        char[,] Return = new char[TotalColumns, TotalLines];

        Return.Initialize();

        //Retrieve values from the current matrix
        for (int CurrentColumn = 0; CurrentColumn < TotalColumns; CurrentColumn++)
        {
            int MaxLines = matrix[CurrentColumn].Length;

            for (int CurrentLine = 0; CurrentLine < MaxLines; CurrentLine++)
            {
                Return[CurrentColumn, CurrentLine] = matrix[CurrentColumn][CurrentLine];
            }
        }

        return Return;
    }
} 
```

Usage:

```
 char[] Length5 = new char[]{ 'a', 'b', 'c', 'd', 'e'};
        char[] Length10 = new char[10];

        char[][] Matrix = new char[2][];
        Matrix[0] = Length5;
        Matrix[1] = Length10;

        char[,] FormattedMatrix = Matrix.FormatMatrix(); 
```

Any feedback will be appreciated.

* * *

**UPDATE**

Nicholas pointed out the performance issue. I was curious about it, so I made the following micro-weak-benchmarking:

```
 char[] Length5 = new char[]{ 'a', 'b', 'c', 'd', 'e'};
        char[] Length10 = new char[10];

        char[][] Matrix = new char[2][];
        Matrix[0] = Length5;
        Matrix[1] = Length10;

        Stopwatch stopWatch = new Stopwatch();

        stopWatch.Start();

        for (int i = 0; i < 5000; i++)
        {
            char[,] FormattedMatrix = Matrix.FormatMatrix();
        }

        stopWatch.Stop();

        Console.WriteLine(string.Format("Andre Calil: {0} ms", stopWatch.ElapsedMilliseconds));

        stopWatch.Reset();

        stopWatch.Start();

        for (int i = 0; i < 5000; i++)
        {
            char[,] FormattedMatrix = RectArrayFromJagged<char>(Matrix);
        }

        stopWatch.Stop();

        Console.WriteLine(string.Format("Nicholas Carey: {0} ms", stopWatch.ElapsedMilliseconds));

        Console.ReadLine(); 
```

I've run it multiple times, and the average results was:

```
Andre Calil: 3 ms
Nicholas Carey: 5 ms 
```

**I know** that this is not a proper benchmarking, but looke like my solution isn't so bad in terms of performance after all.

# linux-kernel - ioctl 有效负载类型/大小违规

> ID：12010758
> 
> 赞同：3
> 
> 时间：2012-08-17T17:52:34.023
> 
> 标签：linux-kernel, linux-device-driver

驱动程序可以采取哪些防御措施来防止用户空间应用程序发出 ioctl 调用，该指针的指针的类型/大小与驱动程序期望/指定为其接口的一部分不同。

例如，IOCTL x 需要一个 (struct foo *) 但调用者使用 (unsigned long) ((struct bar *)&bar) 发出它。copy_from_user 会炸毁/损害系统稳定性吗？

也许一种方法是期望调用者拥有 CAP_SYS_ADMIN 并具有隐式信任，但是还有另一种/更好的方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T18:02:03.667

`copy_to/from_user`使用 void 指针，这意味着它们不知道您传递的任何数据类型。并以您的示例为例，即使他们知道数据类型，您仍然不能信任您的用户：他可以简单地转换为您想要的类型：

```
struct bar *x;
copy_to_kernel_aware_of_foo((struct foo*)x); 
```

期望调用者拥有任何类型的 root 权限或能力也不能解决您的问题 - root 也可能犯错误或作恶。

可以帮助一点的事情：

*   仅用于`copy_to/from_user`复制无类型字节缓冲区。不要依赖内核空间和用户空间具有相同的复杂数据结构概念。
*   如果您只担心数据类型错误，您可能会考虑标记您的数据结构，以便它在“真实”数据之间包含一些神奇的值。但是，这不会帮助您对抗故意伪造数据的调用者。
*   就攻击面而言，攻击者可能不会通过传递错误的数据类型来攻击您，而是提供错误的值。**除了正确验证从用户空间传递给您的所有数据**之外，没有什么可以帮助您。不检查就不要相信任何东西！

# mysql - 按数值和字典值对字段进行排序

> ID：12010760
> 
> 赞同：1
> 
> 时间：2012-08-17T17:52:39.083
> 
> 标签：mysql, sorting

我有一张订单表。对于每个订单，我们允许用户输入他们的（非唯一的）订单号。这可以让我们为所欲为。

我将这些订单显示在 HTML 表格中，并能够按各种字段（例如订单号）对订单进行排序。

我们的一位客户注意到分类存在问题。由于订单号存储为`VARCHAR`，因此它们按字典顺序排序。问题是，并非所有订单号都是数字，有些是单词，有些是字母数字。

所以，例如，我可以有这样的订单号：

```
42
Order8
MyOrder
9
Order63 
```

使用 排序时`ORDER BY orderNumber`，我得到：

```
42
9
MyOrder
Order63
Order8 
```

演示：[http ://sqlfiddle.com/#!2/7973e/1](http://sqlfiddle.com/#!2/7973e/1)

这不是我想要的。我希望它们像这样排序：

```
9
42
MyOrder
Order8
Order63 
```

我希望它们对字符串按字典顺序排列，但对数字按数字排列。我想到了一些可行的方法：

```
ORDER BY IFNULL(NULLIF(CAST(orderNumber AS SIGNED), 0), orderNumber) 
```

演示：[http ://sqlfiddle.com/#!2/7973e/2](http://sqlfiddle.com/#!2/7973e/2)

但是，唉，我仍然得到相同的结果（因为然后将数字重新转换回字符串）。如何以我想要的方式对这些值进行排序？如果只有某种方法可以将字符串“转换”为某种数值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T18:30:03.633

当您看到数值时，您可以尝试用零填充订单号。看这个，例如：

[http://sqlfiddle.com/#!2/7973e/21](http://sqlfiddle.com/#!2/7973e/21)

```
SELECT  
  CASE 
    WHEN CAST(orderNumber AS SIGNED) != 0 THEN LPAD(orderNumber, 10, '0')
    ELSE orderNumber 
  END as padded, 
  orders.*
FROM orders
ORDER BY
  padded 
```

结果是 ：

```
|     PADDED | ORDERID | ORDERNUMBER |
--------------------------------------
| 0000000009 |       4 |           9 |
| 0000000042 |       1 |          42 |
|    MyOrder |       3 |     MyOrder |
|    Order63 |       5 |     Order63 |
|     Order8 |       2 |      Order8 | 
```

完全披露：我是 SQL Fiddle 的作者。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T18:30:49.663

您可以通过以下方式接近您想要的：

```
ORDER BY CASE WHEN CONVERT(OrderNumber, SIGNED INTEGER)= 0 
         THEN 1e50
         ELSE CONVERT(OrderNumber, SIGNED INTEGER)
         END ASC, OrderNumber ASC 
```

但是，如果您需要按最后一位数字（例如 Order63、Order8）对混合的（文本/数字）订单号进行排序，则需要做更多的工作。

# css - CSS 定位 - 最佳定位方式

> ID：12010761
> 
> 赞同：-2
> 
> 时间：2012-08-17T17:52:43.130
> 
> 标签：css

什么是最好的定位方式？浮动，相对，绝对？

可以说我想定位这样的东西：

![在此处输入图像描述](../Images/1b30a8e6fb8e3f7a83ae532b9d744d1c.png)

我如何定位这样的东西，最好的方法是什么？浮动，相对，绝对？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T18:00:32.437

如果你想要一个`fluid layout`，使用`floats`.

定位元素`relative/absolute`使它们按要求显示，`inline`因此 a`height/width`是必需的，然后它们变为`non-fluid`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T18:02:08.973

您必须创建一个充当容器的 div

然后再创建三个 div，一个用于右侧，两个用于左侧。

我创建了一个 jSfiddle 文件供您参考。我创建的东西很快

[http://jsfiddle.net/wSp7F/](http://jsfiddle.net/wSp7F/)

*这完全取决于您要使用哪种类型的布局。响应式、流动式或固定式。*

**HTML**

```
<div id="container">
<div id="rightside">
    <p>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.</p>
</div>
<div class="leftside">
    <p>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.</p>
</div>

<div class="leftside">
    <p>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.</p>
</div>

</div>​ 
```

**CSS**

```
#container {width:500px;position:relative;overflow:Hidden;outline:1px solid red}

.leftside {float:left;width:225px;margin:0 0 5px 0}
#rightside {float:right;width:200px}

.leftside,#rightside {outline:1px solid black;padding:5px}
​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T18:04:36.997

没有一个最好的方法，但我会这样做。

[http://jsfiddle.net/Wuj35/](http://jsfiddle.net/Wuj35/)

## HTML

```
<div id="wrapper">
    <div id="div3">div 3</div> 
    <div id="div1">div 1</div>
    <div id="div2">div 2</div>
</div> 
```

## CSS

```
#wrapper{
    width:450px;
}

#div1,
#div2,
#div3{
    float:left;
    margin:1em;
    padding:1em;
    border:5px solid #000;
    border-radius:8px;
}

#div1, 
#div2{
    width:150px;
    height:75px;
}

#div2{
    clear:left;
}

#div3{
    float:right;
    width:150px;
    height:225px;
} 
```

# vba - VBA - 找不到文件时的msgbox

> ID：12010762
> 
> 赞同：1
> 
> 时间：2012-08-17T17:52:45.553
> 
> 标签：vba, excel

当找不到文件 TestData.xlsx 时，我希望 msgbox 显示“找不到文件”。谢谢

```
Sub check()
    Dim i As Long

    '~~> From Row 5 to row 10
    '~~> Chnage as applicable
    For i = 5 To 10
        Sheets("Sheet1").Range("F" & i).Formula = _
        "=VLookup((CONCATENATE(C1,"" "",C" & i & _
        ")),'C:\Documents[TestData.xlsx]Sheet1'!$A$2:$G$28,7, FALSE)"

        Sheets("Sheet1").Range("F" & i).Value = Sheets("Sheet1").Range("F" & i).Value
    Next i
End Sub 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-17T18:07:08.827

在 for 循环之前检查文件：

```
If Dir$("C:\Documents\TestData.xlsx") = "" Then
    MsgBox "File not found"
    Exit Sub
End If 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T18:02:42.903

这将起作用。

```
Sub test()

    sPath = "C:\Documents\TestData.xlsx"

     'Test if directory or file exists
    If File_Exists(sPath) Then
        MsgBox sPath & " exists!"
    Else
        MsgBox sPath & " does not exist."
    End If

End Sub

Private Function File_Exists(ByVal sPathName As String,
    Optional Directory As Boolean) As Boolean

    'Returns True if the passed sPathName exist
    'Otherwise returns False
    On Error Resume Next
    If sPathName <> "" Then
        If IsMissing(Directory) Or Directory = False Then
            File_Exists = (Dir$(sPathName) <> "")
        Else
            File_Exists = (Dir$(sPathName, vbDirectory) <> "")
        End If
    End If
End Function 
```

这是来自“vba 测试是否存在文件”的第二个谷歌结果[http://vbadud.blogspot.com/2007/04/vba-function-to-check-file-existence.html](http://vbadud.blogspot.com/2007/04/vba-function-to-check-file-existence.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-17T18:16:17.187

添加对“Microsoft Scripting Runtime”的引用

![菜单路径](../Images/8af86663cabea19e33473b332013b571.png) ![参考窗口](../Images/bd614844c38a810bf0d3323f59be40c7.png)

接着：

```
Dim fso As New FileSystemObject

If Not fso.FileExists("C:\Documents\TestData.xlsx") Then MsgBox "File Not Found." 
```

# objective-c - 跨多个类文件使用代码

> ID：12010766
> 
> 赞同：0
> 
> 时间：2012-08-17T17:53:06.757
> 
> 标签：objective-c, ios

假设我有这个代码：

```
if ([resultButton.titleLabel.text isEqualToString:@"Tax"]) {

        TAXViewController *controller = [[TAXViewController alloc]initWithNibName:@"TAXViewController" bundle:nil];
        controller.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
        [self presentViewController:controller animated:YES completion:nil];
        [controller release];

    }else if ([resultButton.titleLabel.text isEqualToString:@""]){

        RENTViewController *controller = [[RENTViewController alloc]initWithNibName:@"RENTViewController" bundle:nil];
        controller.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
        [self presentViewController:controller animated:YES completion:nil];
        [controller release];

    }else if //repeats a lot...... 
```

我想在多个 .h 文件中使用相同的代码。有没有一种方法可以编写代码（仅在一个地方）并从其他 .h 文件访问它而无需到处重复？

所以最后我猜，我可以将一个字符串传递给其他 .h/.m 文件，它会打开带有匹配字符串的视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T17:59:48.840

将它放在一个类中，并将您想要访问的所有其他文件放在它的子类中。

```
@interface SomeController : BaseViewController 
```

你也可以简化你的代码

```
UIViewController *controller;
if ([resultButton.titleLabel.text isEqualToString:@"Tax"])
        controller = [[TAXViewController alloc]initWithNibName:@"TAXViewController" bundle:nil];
else if ([resultButton.titleLabel.text isEqualToString:@""])    
        controller = [[RENTViewController alloc]initWithNibName:@"RENTViewController" bundle:nil];
else if
....
//after all if-else statements
controller.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
[self presentViewController:controller animated:YES completion:nil];
[controller release]; 
```

# php - PHP eclipse 没有看到 javascript 的自动完成功能

> ID：12010770
> 
> 赞同：0
> 
> 时间：2012-08-17T17:53:21.757
> 
> 标签：php, javascript, eclipse

我最近从 dreamweaver 进入了 eclipse 环境，这样我就可以通过调试等更好地控制我的 php。我决定使用 Pulse 来管理我的扩展，并从一个新的 Eclipse 经典版本开始，并根据我的需要定制它（我觉得aptana 太臃肿了）。我看到的唯一问题是我创建了一个新的 PHP 项目并启用了 javascript，一切正常，但我看到 PHP 自动完成功能可以帮助实现功能，但它不适用于 javascript 语法或 html 自动完成功能。我也很好奇 jQuery 将如何在这个环境中工作。

此外，使用 eclipse 进行 Web 开发的任何其他建议也很棒。这是我安装的扩展程序的收听：

*   用于日食 pdt 的 Drupal
*   PHP开发工具
*   Javascript 开发工具
*   Eclipse Web 开发人员工具

# xml - 如何使用 linq 保存 **EXCEL** XML 文件？

> ID：12010771
> 
> 赞同：2
> 
> 时间：2012-08-17T17:53:26.343
> 
> 标签：xml, vb.net, linq, excel

我正在使用以下简介使用 XElement 加载和保存 Excel XML 文件：

```
 Dim root As XElement = XElement.Load(inFile)
    'code to change elements goes here 
    root.Save(outFile) 
```

问题是保存例程正在添加名称空间标记以及谁知道什么，因此 Excel 和 Windows 不再将其识别为 Excel XML 文件。在我的示例中，我什至没有操作元素。我只是加载和保存文件。我基本上想使用 linq 在 XML 中查找某些元素，更改它们然后保存整个文件。我做这太难了吗？

文件 XML

```
<?xml version="1.0"?>
<?mso-application progid="Excel.Sheet"?>
<Workbook xmlns="urn:schemas-microsoft-com:office:spreadsheet"
 xmlns:o="urn:schemas-microsoft-com:office:office"
 xmlns:x="urn:schemas-microsoft-com:office:excel"
 xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet"
 xmlns:html="http://www.w3.org/TR/REC-html40">
  <Worksheet ss:Name="Datagrid">
    <Table ss:ExpandedColumnCount="13" ss:ExpandedRowCount="11" x:FullColumns="1"
     x:FullRows="1" ss:DefaultRowHeight="15">
      <Row ss:Index="3" ss:AutoFitHeight="0">
        <Cell ecProperty="email_address">
          <Data ss:Type="String">email address</Data>
        </Cell>
      </Row>
      <Row ss:Index="4" ss:AutoFitHeight="0">
        <Cell ecProperty="synthesis_mode">
          <Data ss:Type="String">Ideal Mode</Data>
        </Cell>
      </Row>
    </Table>
  </Worksheet>
</Workbook> 
```

outFile 结果

```
<?xml version="1.0" encoding="utf-8"?>
<ss:Workbook xmlns="urn:schemas-microsoft-com:office:spreadsheet" xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet" xmlns:html="http://www.w3.org/TR/REC-html40">
  <ss:Worksheet ss:Name="Datagrid">
    <ss:Table ss:ExpandedColumnCount="13" ss:ExpandedRowCount="11" x:FullColumns="1" x:FullRows="1" ss:DefaultRowHeight="15">
      <ss:Row ss:Index="3" ss:AutoFitHeight="0">
        <ss:Cell ecProperty="email_address">
          <ss:Data ss:Type="String">email address</ss:Data>
        </ss:Cell>
      </ss:Row>
      <ss:Row ss:Index="4" ss:AutoFitHeight="0">
        <ss:Cell ecProperty="synthesis_mode">
          <ss:Data ss:Type="String">Ideal Mode</ss:Data>
        </ss:Cell>
      </ss:Row>
    </ss:Table>
  </ss:Worksheet>
</ss:Workbook> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T18:05:50.377

使用[`XDocument`](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.aspx)而不是`XElement`保留完整的文档。

```
Dim root As XDocument = XDocument.Load(inFile)
'code to change elements goes here 
root.Save(outFile) 
```

# php - '调用未定义的函数' - 试图从包含的文件中调用函数

> ID：12010773
> 
> 赞同：1
> 
> 时间：2012-08-17T17:53:32.947
> 
> 标签：php, wordpress, function, include, undefined

所以我有两个文件，“header.php”和“pluginfile.php”

我要调用的函数位于“pluginfile.php”中，并且是：

```
public function getNonSubscriptionAmount() {
    $total = 0;
    foreach($this->_items as $item) {
      if(!$item->isSubscription()) {
        $total += $item->getProductPrice() * $item->getQuantity();
      }
      else {
        // item is subscription
        $basePrice = $item->getBaseProductPrice();
        Cart66Common::log('[' . basename(__FILE__) . ' - line ' . __LINE__ . "] Item is a subscription with base price $basePrice");
        $total += $basePrice;
      }
    }
    return $total;
  } 
```

所以在'header.php'中我有：

```
<?php
include_once($_SERVER['DOCUMENT_ROOT']."/wp-content/plugins/plugin-name/folder/PluginFile.php");
print getNonSubscriptionAmount();
?> 
```

加载任何页面时都会出现以下错误：

> 致命错误：在第 72 行的 /home/username/domain.com/wp-content/themes/theme/header.php 中调用未定义函数 getnonsubscriptionamount()

我现在已经花了几个小时试图独自解决这个问题，但一无所获！非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T18:04:36.663

@Wiseguy 看起来他在评论中提出了正确的想法。

您正在声明一个方法而不是一个函数。该函数是您的 plugin.php 文件的全部还是更多？如果是一切，请删除 public 修饰符并声明

```
function getNonSubscriptionAmount() {
  // code here
} 
```

但从代码的外观来看，它是一个更大类的一部分。如果是这样，那么@Wiseguy 注释是正确的，您需要在 plugin.php 中实例化该类的新对象，然后实例化所需的方法。

```
$obj = new PluginClass();
$obj->getNonSubscriptionAmount(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T18:10:24.623

你说：

> 我要调用的函数位于“plugin.php”中，并且是：

在您的文件中，您包括：

> 所以在'header.php'中我有： include_once($_SERVER['DOCUMENT_ROOT']."/wp-content/plugins/plugin-name/folder/PluginFile.php"); 打印 getNonSubscriptionAmount();

您不包括函数存在的“plugin.php”。

Header.php 应该包含“plugin.php”，而不是“PluginFile.php”。

# ruby-on-rails - 在 Rails 中搜索

> ID：12010780
> 
> 赞同：18
> 
> 时间：2012-08-17T17:53:57.860
> 
> 标签：ruby-on-rails, search

我有一个“帖子”表，其属性包括`title`和`body`。

post_controller.rb：

```
class PostsController < ApplicationController
  def index
    @posts = Post.search(params[:search], params[:id])
  end
end 
```

index.html.erb：

```
 <%= form_tag posts_path, :method => 'get'  do %>
   <%= text_field_tag :search, params[:search]%>
   <%= submit_tag "Search", :name => nil  %>
 <% end %>

<hr />
<table>
  <tr>
    <th>Title</th>
    <th>Text</th>
  </tr>
 <tr>
  <td><hr></td>
  <td><hr></td>
</tr>
  <% @posts.each do |post| %>

    <tr>
      <td><%= post.title %></td>
      <td><%= post.text %></td>
      <td><%= link_to 'Show', :action => :show, :id => post.id %></td>
      <td><%= link_to 'Edit', :action => :edit, :id => post.id %></td>
      <td><%= link_to 'Destroy', { :action => :destroy, :id => post.id }, :method => :delete, :confirm => 'Are you sure?' %></td>
    </tr>
    <tr>
      <td><hr></td>
      <td><hr></td>
    </tr>
  <% end %>
</table> 
```

和 post.rb

```
def self.search(search, id)
 if search
   where(['name LIKE ?', "%#{search}%"])
 else
  scoped
 end
end 
```

当我提交搜索参数时，我收到一条错误消息：

```
ActiveRecord::StatementInvalid in Posts#index 
SQLite3::SQLException: no such column: name: SELECT "posts".* FROM "posts"  WHERE (name LIKE '%lorem%') 

Extracted source (around line #23):

23:   <% @posts.each do |post| %> 
```

APD：我想按“标题”进行搜索。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-08-17T18:28:57.767

虽然这不是您问题的直接答案，但这里有一些资源可以帮助您学习搜索并在 Rails 应用程序中实现它。

[一个简单的搜索表单](http://railscasts.com/episodes/37-simple-search-form/)

[高级搜索表单](http://railscasts.com/episodes/111-advanced-search-form/)

[使用 AJAX 搜索](http://railscasts.com/episodes/240-search-sort-paginate-with-ajax)

[太阳黑子宝石的强大搜索功能](http://railscasts.com/episodes/278-search-with-sunspot)

[最受欢迎的 Ruby 搜索工具列表](https://www.ruby-toolbox.com/search?utf8=%E2%9C%93&q=search)

- - - - - - - -更新 - - - - - - - -

Elasticsearch 之所以越来越受欢迎，是因为它具有一些现代的功能，例如即时索引。它有一颗名为轮胎的红宝石。绝对值得一看。

[弹性搜索](http://www.elasticsearch.org/)

[胎](https://github.com/karmi/tire)

---------------更新 2----------------

Tire 已退役，已被[Elasticsearch-ruby取代](https://github.com/elasticsearch/elasticsearch-ruby)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-10-08T13:07:57.817

对于来到这里并在 Rails 4 中寻找解决方案的人，请尝试以下示例：

职位控制器：

```
class PostsController < ApplicationController
  def index
    if params[:search]
      @posts = Post.search(params[:search]).order("created_at DESC")
    else
      @posts = Post.all.order('created_at DESC')
    end
  end
end 
```

岗位型号：

```
def self.search(search)
  # Title is for the above case, the OP incorrectly had 'name'
  where("title LIKE ?", "%#{search}%")
end 
```

除了搜索表单之外，index.html.erb 保持不变：

```
<%= form_tag(posts_path, :method => "get", id: "search-form") do %>
  <%= text_field_tag :search, params[:search], placeholder: "Search Posts" %>
  <%= submit_tag "Search" %>
<% end %> 
```

请注意，您使用的路径、控制器和列可能不同。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-01-18T06:10:32.987

使用 gem **searchkick进行 Elasticsearch**

**注意**：searchkick 也是由轮胎贡献的）让你工作起来更舒服。

更多参考：

[搜索踢](https://github.com/ankane/searchkick)

# iphone - RestKit - RkObjectManager 回调方法未触发

> ID：12010781
> 
> 赞同：0
> 
> 时间：2012-08-17T17:54:05.600
> 
> 标签：iphone, objective-c, ios, restkit

我是 iOS 开发的新手。我想使用 RestKit 访问 Web 服务并将数据映射到我的自定义对象。

我确定正在达到搜索方法。但是，没有触发任何回调方法（didLoadObjects 或 didFailWithError）。我的代码如下。谢谢你的帮助！

**编辑：**我尝试用一​​个简单的 RKClient 请求做同样的事情，这些回调方法也没有被触发。我还实现了“观察请求进度”方法，这些方法也没有被触发。我没有正确分配代表吗？

**编辑 2：**看起来请求可能被卡在队列中。如果我强制它异步发送，则会触发“requestWillPrepareForSend”和“requestDidStartLoad”方法。不会触发其他方法。

```
- (void)search{

NSString *baseURL = @"sws.acpl.lib.in.us:8080/symws/rest/";
NSURL *url=[NSURL URLWithString:baseURL];

RKObjectManager *manager=[RKObjectManager objectManagerWithBaseURL:url];

RKObjectMapping *availabilityMapping = [RKObjectMapping mappingForClass:[TitleAvailabilityInfo class]];

[availabilityMapping mapAttributes:@"totalAvailableCopies", @"holdable", nil];

RKObjectMapping *titleMapping = [RKObjectMapping mappingForClass:[SearchResultsTitle class]];
[titleMapping mapAttributes:@"titleID",@"title",@"author",@"materialType",@"yearOfPublication",@"ISBN",@"callNumber", nil];
[titleMapping mapKeyPath:@"TitleAvailabilityInfo" toRelationship:@"titleAvailabilityInfo" withMapping:availabilityMapping];

RKObjectMapping *searchResponseMapping = [RKObjectMapping mappingForClass:[SearchCatalogResponse class]];
[searchResponseMapping mapAttributes:@"queryID",@"totalHits",@"firstHitDisplayed",@"lastHitDisplayed", nil];
[searchResponseMapping mapKeyPath:@"HitlistTitleInfo" toRelationship:@"results" withMapping:titleMapping];

[manager.mappingProvider setMapping:searchResponseMapping    forKeyPath:@"SearchCatalogResponse"];

[manager loadObjectsAtResourcePath:@"standard/searchCatalog" delegate:self];

}

- (void)objectLoader:(RKObjectLoader*)objectLoader didLoadObjects:(NSArray*)objects {

NSLog(@"loaded");
}

- (void)objectLoader:(RKObjectLoader*)objectLoader didFailWithError:(NSError*)error {
NSLog(@"failed");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T13:18:15.243

问题出在 URL 上。我在开头省略了“http://”。谢谢你的帮助。

# php - 每次更新数据库时如何刷新 div？

> ID：12010783
> 
> 赞同：2
> 
> 时间：2012-08-17T17:54:04.790
> 
> 标签：php, javascript, mysql, ajax

我正在尝试在我的网站上创建一个聊天室，我正在使用 php 和 mysql 来存储消息和所有信息。每次有人更新数据库时，我如何自动刷新页面？例子：

如果我在我的网站上，消息会显示在我的屏幕上，但我只能在刷新页面后才能看到最近的消息。有没有办法让它实时？

我也不太了解 javascript/ajax/jquery 或其中的任何一个。任何帮助表示赞赏！

我的网站上的流量会很低。一次大概有 10 到 15 个人，如果这样的话。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T17:57:23.200

最好的办法是每隔几秒左右发出一次 AJAX 请求，看看是否有新消息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T17:58:08.777

您可能不想每次都重新加载页面。我的建议，有很多方法可以做到这一点，就是每隔一段时间进行一次 ajax 调用，然后从数据库中检查/提取新信息。

我会研究 AJAX 并做一个教程。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T17:58:49.120

这将通过 ajax 通过调用函数并更新 div 来完成。我不建议人们在每次发送消息时都刷新页面，这样会变得丑陋。另一种选择是使用 HTML5 网络工作者

[http://msdn.microsoft.com/en-us/hh549259.aspx](http://msdn.microsoft.com/en-us/hh549259.aspx)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-17T18:00:44.557

您将需要学习 AJAX 以使其正常工作，而 jQuery 可能是最简单的方法。如果我们可以假设您要更新的 DIV 具有 ID `PonyRides`，您会想要这样做：

`$("#PonyRides").ajax({url: "/chat.php?getupdates=true"});`

这将获取chat.php 的内容并将其粘贴到`#PonyRides`DIV 中。这假设chat.php 将获取数据库的内容并将它们格式化为HTML。

剩下的挑战是在你的数据库更新时让它更新，但最简单的方法是重新加载整个聊天，无论是否进行了更新。

这会影响性能，但如果你的聊天次数少于一百次，你可能会没事的。如果你有更多，你最好感觉不活动并减少检查时间，或者只发送更新而不是整个聊天。但是，这些是更复杂的主题，一旦您掌握了这些基本概念，您就可以根据需要构建它们。

为此，只需将`ajax()`调用包装在一个间隔中，如下所示：

```
setInterval(function(){ //the following code runs repeatedly
    $("#PonyRides").ajax({url: "/chat.php?getupdates=true"});  //update our chat div
},5000); //repeat every five seconds 
```

另一种糟糕的方法是在 iFrame 中加载聊天，设置为使用[元刷新](http://en.wikipedia.org/wiki/Meta_refresh)技术定期重新加载。这将是可怕的，并且只能在您出于某种原因尝试支持令人难以置信的旧浏览器时才推荐。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-17T18:01:34.077

```
You can use AJAX request to update the values   

 <script type='text/javascript'>

    // function for making an object for making AJAX request

    function getXMLHTTPRequest() {
    try {
    req = new XMLHttpRequest();
    } catch(err1) {
    try {
    req = new ActiveXObject("Msxml2.XMLHTTP");
    } catch (err2) {
    try {
    req = new ActiveXObject("Microsoft.XMLHTTP");
    } catch (err3) {
    req = false;
    }
    }
    }
    return req;
    }

    var http899 = getXMLHTTPRequest();
    function searchFabIndia() {

    var myurl = "http://my2nddomain.com/yebhi.php";
    myRand = parseInt(Math.random()*999999999999999);
    var modurl = myurl+"?rand="+myRand;
    http899.open("GET", modurl, true);
    http899.onreadystatechange = useHttpResponse899;
    http899.send(null);
    }

    function useHttpResponse899() {
    if (http899.readyState == 4) {
    if(http899.status == 200) {
     // do all processings with the obtained values / response here

   // after doing the stuff, call fn again after 30 s say

   setTimeout("searchFabIndia()", 30000);
    }
    }
    }

    </script>
<body onload='searchFabIndia();'> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-17T18:00:05.520

我建议向服务器上的文件发出 AJAX 请求，该文件将更新数据库。如果对数据库的更新成功，则返回已更新的消息。回到客户端，您等待响应，如果收到响应，则将消息附加到内容的末尾。这样，您每次都加载所有消息（这会很昂贵），您只加载**新消息**。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-08-17T18:01:19.160

php 必须有类似于 SignalR(.net) 的东西。它允许您在事件发生时添加代码，我认为这就是您要寻找的。

# c# - C# 使用 RegEx 分解日期时间

> ID：12010784
> 
> 赞同：2
> 
> 时间：2012-08-17T17:54:07.500
> 
> 标签：c#, regex, datetime

我有一个存储为 DateTime 的值。

为了使输出在导出中看起来更具可读性，我只想从表达式返回 MM/DD。

我当前的解决方案包括将 DateTime 作为字符串传递给一个函数，该函数有效地将其分成小块，然后重新组合在一起。虽然这可行，但我知道必须有一个更有效/优雅的解决方案。

我当前的代码如下所示：

```
extractDate(DateTimeVar.ToString()); 
```

以及定义：

```
 private string extractDate(string datetime)
    {
        string[] newString = datetime.Split(' ');
        string newStringArray = newString[0];
        string[] breakUp = newStringArray.Split('/');
        string finalOutput = breakUp[0] + "/" + breakUp[1];
        return finalOutput;
    } 
```

如您所见，相当混乱。我想出的另一个解决方案涉及删除前五个字符，因为 DateTime 的前 5 个字符将始终包含“MM/dd”：

```
 private string extractDate(string datetime)
    {
        return datetime.Substring(0, 5);
    } 
```

我认为后一种解决方案是一个更好的解决方案。然而，有没有更好的呢？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T17:56:53.817

您可以使用：

```
DateTimeVar.ToString("MM/dd"); 
```

不需要自定义方法，因为[`DateTime.ToString(string)`](http://msdn.microsoft.com/en-us/library/zdtaw1bw.aspx)已经允许[DateTime 值的自定义格式字符串](http://msdn.microsoft.com/en-us/library/8kb3ddd4%28v=vs.71%29.aspx)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-17T17:56:08.327

为什么不直接使用[ToString(formatThatYouWant)](http://msdn.microsoft.com/en-us/library/zdtaw1bw.aspx)覆盖？

代码将是：

```
.ToString("MM/dd"); 
```

记住，MSDN 是你的朋友 :)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T17:56:43.897

使用`DateTimeVar.ToString("MM/dd")`方法。

有关您可以传递给 ToString 方法的完整选项列表，请查看[MSDN 上的自定义日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-17T17:56:57.757

怎么样 `datetime.ToString("MM/dd")`？或 datetime.Month 和 datetime.Day

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-17T17:57:41.447

您不需要正则表达式，您可以使用`DateTime.ToString(string)`方法 ro 提取您想要的内容。

[http://msdn.microsoft.com/en-us/library/zdtaw1bw](http://msdn.microsoft.com/en-us/library/zdtaw1bw)

```
datetimevar.ToString("MM/dd"); 
```

然后你不需要关心语言环境，因为没有参数的 ToString() 的输出取决于你的文化，即值不同......

# android - 有没有办法对齐写入文本文件的文本？

> ID：12010785
> 
> 赞同：0
> 
> 时间：2012-08-17T17:54:11.867
> 
> 标签：android, eclipse, excel

对于我的应用程序，我从数据库中提取单词并将它们写入文本文件。然后将该文件作为考勤卡通过电子邮件发送给其他人。问题是大小不一，很多日期和文字可能有点大。此外，如果他们在 Excel 或 Works 电子表格中打开文档，他们必须手动扩展较大文本的单元格。那么有没有办法更好地对齐文本或自动扩展单元格？任何帮助将不胜感激，感谢您的宝贵时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T18:00:37.220

可能过于简单，但一个相当便携的选项是将您的文本文件制作为 HTML 并使用[表格](http://www.w3schools.com/html/html_tables.asp)

# json - 如何发送带有 jeditable 的 JSON

> ID：12010786
> 
> 赞同：2
> 
> 时间：2012-08-17T17:54:11.467
> 
> 标签：json, jeditable

根据我对 jeditable 的了解，所需参数是发布新编辑数据的 url。我想做的是使用 http PUT 发送一个 JSON 对象。那可能吗？谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T18:12:12.703

来自 Jeditable API：

（字符串）方法：提交编辑内容时使用的方法。默认为 POST。您很可能想要使用 POST 或 PUT。PUT 方法与 Rails 兼容。 [http://www.appelsiini.net/projects/jeditable](http://www.appelsiini.net/projects/jeditable)

你应该能够做到：

```
$('.editable').editable('http://www.example.com/save.php', { 
     method : 'PUT',
     data : function() {
       var jsonString;
       //create json object
       return jsonString;
     }
 }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T18:16:00.993

是的，您可以发送数据，但我建议您通过 POST 发送数据。在数据字段中发送数据：-

`type:"POST"`

```
data: " {'x':'value','y':'value','z':'value'}" 
```

和其他字段，如 url 等。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-12T18:51:15.420

您应该覆盖传递给扩展 $.ajax (jQuery) 的 ajaxoptions 属性：

```
oTable.$('td').editable( url, {
    "callback": function( sValue, y ) {
         your code
    },
    "submitdata": function ( value, settings ) {
         your code
    },
    "ajaxoptions": {"method": "PUT"}
} ); 
```

似乎 jEditable 本机方法设置通过“Rails 方式”支持 PUT 方法。所以它实际上不是一个 PUT 请求，而是一个带有“_method”变量和“put”作为值的 POST 请求。某些 REST 服务不适用于这种方法。

# iphone - UIAlertView 中的图像：视网膜和非视网膜 iPhone 中的 CGRectMake

> ID：12010787
> 
> 赞同：0
> 
> 时间：2012-08-17T17:54:14.557
> 
> 标签：iphone, uialertview, cgrectmake

我正在开发一个应用程序，我在 UIAlertView 中显示一些图标以解释它们的使用。我这样做是使用：

```
UIAlertView *helpAlert = [[UIAlertView alloc] initWithTitle:@"The button:\n\n  is used to do... \n\n  " message:@"" delegate:self cancelButtonTitle:@"OK" otherButtonTitles: nil];

    UIImageView *imageView1 = [[UIImageView alloc] initWithFrame:CGRectMake(20, 55, 40, 40)]; 
    NSString *path1 = [[NSString alloc] initWithString:[[[NSBundle mainBundle] resourcePath]   stringByAppendingPathComponent:@"bottle_w_40.png"]];
    UIImage *bkgImg1 = [[UIImage alloc] initWithContentsOfFile:path1];
    [imageView1 setImage:bkgImg1];
    [bkgImg1 release];
    [path1 release];

    [helpAlert addSubview:imageView1];
    [imageView1 release];
    [helpAlert show];
    [helpAlert release]; 
```

它在模拟器和我的 iphone 3gs（没有视网膜显示）中运行良好。我的伙计是关于视网膜行为的。图片位置会不一样吗？我是否需要为 CGRectMake 使用一些 scaleFactor 或 UIAlertview 中的位置是绝对的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T17:56:59.143

在应用程序资源中，提供一个名为“bottle_w_40@2x”的图像，这将是视网膜显示时最需要担心的事情。矩形不需要调整大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T17:57:31.370

据我所知，该代码将在视网膜显示器上运行。

您可以在模拟器中对此进行测试。转到模拟器的硬件 > 设备菜单并选择“iPhone (Retina)”或“iPad (Retina)”。

# dns - 将请求的 url 从旧 站点重定向到新站点（不同的域名）

> ID：12010788
> 
> 赞同：1
> 
> 时间：2012-08-17T17:54:18.793
> 
> 标签：dns, hosting

我有一个位于 Windows 服务器上的 Wordpress 网站。表演很糟糕。域以“.net”结尾。我还拥有“.com”版本的域名。我已经购买了一个 Linux 主机包并在上面设置了“.com”域。我已将所有“.net”文件传输到“.com”主机。我在“.net”上设置了 150 个电子邮件地址，我想保留在那里（现在）。我想拥有它，以便任何指向特定页面（即[http://www.mysite.net/p=123](http://www.mysite.net/p=123)）的链接都转到新站点上的同一页面（http://www.mysite.com /p=123)。我假设我会从“.net”域空间中删除所有文件，然后有一个 404 文件来捕获请求的 url 并重定向到“.com”等效项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T18:42:40.937

这看起来应该可以解决您的问题。

[http://kb.mediatemple.net/questions/242/How+do+I+redirect+my+site+using+a+.htaccess+file%3F](http://kb.mediatemple.net/questions/242/How+do+I+redirect+my+site+using+a+.htaccess+file%3F)

根目录中的 .htaccess ，内容为：

```
Redirect 301 / http://mysite.com/ 
```

这应该只是盲目地将所有请求从 .net 版本重定向到 .com，假设它们具有相同的路径

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T23:24:33.353

我的主机允许自定义 404 页面，所以我所做的是从旧服务器中删除所有内容，然后让我的 404 说：

```
<?php
$qs = $_SERVER['QUERY_STRING'];
$_SERVER['REQUEST_URI'] = substr($qs, strpos($qs, ':80')+3);
$_SERVER['PATH_INFO'] = $_SERVER['REQUEST_URI'];
include('index.php');
header( 'Location: http://www.mysite.com' . $_SERVER['REQUEST_URI'] ) ;
?> 
```

这行得通！

# cmake - CMake：如何添加添加子目录作为最后一步

> ID：12010794
> 
> 赞同：0
> 
> 时间：2012-08-17T17:54:49.537
> 
> 标签：cmake

我有这个文件结构：

根 | +--API | | | +-CMakeFiles.txt | +--gtest | +-CMakeFiles.txt

在根目录下，我有一个 CMakeFiles.txt，其中包含： add_subdirectory(gtest) add_subdirectory(API)

API 依赖于 gtest 生成的文件。我怎样才能得到它，以便 API 在执行 API 的 CMakeList 之前等到 gtest 完全构建完成？我可以添加某种延迟吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T18:52:33.410

在 API CMakeLists.txt 中尝试 find_library(SOME_VAR gtest)。API 将在构建 gtest 之后构建。

# python - Jython 在 for 循环中休眠，线程问题？

> ID：12010800
> 
> 赞同：1
> 
> 时间：2012-08-17T17:55:13.177
> 
> 标签：python, multithreading, jython, sleep

我正在玩 Jython 和 Swing，这很有趣。

我遇到了我之前提到的东西，但没有有用的回应。

```
for i in xrange(20):
    self.y += 1
    sleep(0.05)
    self.canvas.repaint()
    print self.y 
```

这会按预期打印 1-20 并延迟 0.05 秒，但在循环达到 20 之前不会重新绘制画布。

我已经看到 Jython 提到的线程，如果它与此有关，我会徘徊，但不能完全理解，因为我确实希望它以同步而不是异步的方式执行。

任何人都可以启发我吗？

非常感谢（不断使用堆栈溢出，很少需要问）

# javascript - Google Visualization 在遍历数组以显示多个时仅显示一个图形

> ID：12010804
> 
> 赞同：0
> 
> 时间：2012-08-17T17:55:39.073
> 
> 标签：javascript, visualization

当您知道提前创建了多少个图表时，我已经看到很多关于在单个页面中创建多个图表的讨论。我正在创建一个页面，我需要在其中绘制多个项目，并且事先不知道会有多少项目。最后一张图总是显示出来，前面的没有。调试时，我可以看到调用draw函数时所有图形都显示出来了，但是当调用下一个draw函数时它就消失了。这可能是一些愚蠢的事情，但我已经搜索了几个小时并且无法弄清楚。更改为测试环境（1.1 版）会使它们全部出现，但不会显示悬停文本。有什么建议么？代码是整个事物的一部分，因此我尝试使用硬编码数据创建一个精简版本：

```
<!DOCTYPE html> 
<html> 
<head> 
    <title>Summary</title> 
  <link href="assets/css/bootstrap.css" rel="stylesheet">
  <link href="assets/css/bootstrap-responsive.css" rel="stylesheet">
</head> 
<body> 
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">

        google.load('visualization', '1', {'packages':['corechart']});
        google.setOnLoadCallback(summary_go);

        function summary_go() {

            /* skipping a bunch of code that does some queries and pulls the data into arrays for the graphs */
            var graph_data = new Array(
                {title: "Potassium SerPl-sCnc",
                    head: ["Date","mmol/L"],
                    data: [[new Date("2004", "09", "23"),3.6],
                        [new Date("2005", "08", "31"),3.5],
                        [new Date("2007", "09", "01"),3.4],
                        [new Date("2008", "01", "11"),4.1],
                        [new Date("2009", "09", "30"),3.5]]},

                {title: "Albumin/Creat Ur-mRto",
                    head: ["Date","ug/mg{creat}"],
                    data: [[new Date("2004", "09", "23"),5],
                        [new Date("2009", "09", "30"),8]]});

            var labdiv = document.getElementById("lab-list");
            for (var i = 0; i < graph_data.length; i++) {
                labdiv.innerHTML += "<li>" + graph_data[i]['title'] + "<div id=\"" + graph_data[i]['title'] + "\"></div></li>";

                var dataTable = new google.visualization.DataTable();
                dataTable.addColumn('date', 'Date');
                dataTable.addColumn('number', 'Value');
          dataTable.addRows(graph_data[i]['data']);

                var chart = new google.visualization.LineChart(document.getElementById(graph_data[i]['title']));
                var options = {
                    vAxis: {title: graph_data[i]['head'][1]},
               legend: {position: 'none'},
          };

                chart.draw(dataTable, options);
            }
        }
    </script> 

    <div class="container-fluid">
        <div class="row-fluid">
            <div class="span12" id="lab-list">
                <h3>Patient Data</h3>
            </div>
        </div>
    </div><!--/.fluid-container-->

</body> 
</html> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T19:53:01.210

好吧，看起来这是一件愚蠢的事情。div 标签可能没有及时设置为draw call，所以当我把它分成不同的外观时——首先设置div，然后调用draw call，它没有任何问题。

# jsp - Spring-MVC 3.1：防止 JSP 被缓存在浏览器中

> ID：12010808
> 
> 赞同：2
> 
> 时间：2012-08-17T17:55:50.810
> 
> 标签：jsp, caching, spring-mvc, browser-cache

我正在为我的 web 应用程序使用 Spring 3.1。我试图阻止一个 JSP 缓存在用户的浏览器中，以防止他们通过后退按钮访问它。

在打印出 HTML 页面的 Servlet 中使用这些设置时，我很幸运：

```
response.setHeader("Cache-control", "no-cache, no-store");
response.setHeader("Pragma", "no-cache");                
response.setHeader("Expires", "-1"); 
```

我无法让这些调用在控制器函数中工作（通常从重定向调用）：

```
 @RequestMapping(value = "/error")
    public String error(HttpSession session,HttpServletResponse response, ModelMap model){
        logger.debug("started");

        response.setHeader("Cache-control", "no-cache, no-store");
        response.setHeader("Pragma", "no-cache");                
        response.setHeader("Expires", "-1"); 

        String status_message = (String)session.getAttribute("status_message");
        status_message = (status_message == null) ? "" : status_message.trim();
        session.removeAttribute("status_message");
        model.put("status_message",status_message);

        return "error";
    } 
```

我还尝试像这样将调用放在我的 JSP 中（在头文件的包含上方和下方）：

```
<%@ include file="header.jsp" %>
<%
   response.setHeader("Cache-control", "no-cache, no-store");
   response.setHeader("Pragma", "no-cache");                
   response.setHeader("Expires", "-1"); 
 %>
     <!-- content -->

<%@ include file="footer.jsp" %> 
```

我还尝试将调用放在包含在每个 JSP 中的头文件中，尽管我只希望不存储一个 JSP....只是为了看看我是否可以让它工作。它不起作用：

```
<%@ page language = "java" session = "true" import = "java.util.*, java.text.*" %>
<%@ taglib prefix = "c" uri = "http://java.sun.com/jsp/jstl/core"%>
<%@ taglib prefix = "f" uri="http://www.springframework.org/tags/form"%>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >

<head>
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="0">

<title>Acme Customer Service</title>
    <link rel = "StyleSheet"  href = "../nsd/css/nsd.css"   type = "text/css"/>
</head> 
```

我还尝试在 0 和 -1 之间切换“过期”设置。没有骰子。

关于如何将单个 JSP 缓存在用户浏览器中的任何想法？

非常感谢提前

史蒂夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T18:04:28.043

使 url 每次都唯一：向 url 添加一个 get 参数以包含纪元秒数或其他一些唯一字符串。

所以你最终会得到类似的东西：[http ://www.google.com?param1=val1&secs=2342314234](http://www.google.com?param1=val1&secs=2342314234)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T19:54:11.280

您需要扩展[org.springframework.web.servlet.handler.HandlerInterceptorAdapter](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/servlet/handler/HandlerInterceptorAdapter.html)并且如果请求的 uri 与控制器的 uri 匹配，则在 postHandle 方法中添加标头。您还可以在控制器的 HttpServletRequest 中设置一个属性，然后在拦截器中检查它。您还可以使用[spring-mvc-util](https://github.com/rgladwell/spring-mvc-util)为给定的 uri 创建拦截器。

# c++ - 如何打印“%”符号？

> ID：12010813
> 
> 赞同：0
> 
> 时间：2012-08-17T17:56:03.773
> 
> 标签：c++, c, mfc, dialog, printf

> **可能重复：**
> [如何在 C 的 printf 中转义 %（百分比）符号](https://stackoverflow.com/questions/1860159/how-to-escape-the-sign-in-cs-printf)

我想像这样打印*%*符号：“8%2F16”

我怎样才能打印这个字符串？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T17:56:49.613

如果您尝试使用 进行打印`printf`，则需要使用`%%`: 转义`%`另一个`%`：

```
printf("8%%2F16"); 
```

`%`是格式字符串中具有特殊含义的转义字符`printf`，因此如果您尝试打印它，则需要对其进行转义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T18:06:50.763

除了使用`%%`，您还可以使用`%c`：

```
printf("8%c2F16\n", '%'); 
```

`%c`如果您不记得如何在字符串中正确转义字符，则该技巧是一个很好的后备方案。（虽然，在我的脑海中，唯一棘手的是`"`和`%`。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T17:58:12.787

使用合适的转义序列，如下所示：`printf("%%");`

（或者当然就像`puts("%");`，但我想你在谈论格式化输出。）

# c - C - 文件 i/o 的一些可笑错误

> ID：12010814
> 
> 赞同：1
> 
> 时间：2012-08-17T17:56:04.927
> 
> 标签：c, linux, archlinux

我有一个行为类似于 cp 的简单程序，它将内容从一个文件复制到另一个文件，包括漏洞。语义简单，实现简单，主要部分如下。问题是，如果我编译并运行（GCC 4.7.1 Arch Linux）而没有下面标记的行，它会用随机的字节序列填充第二个文件几秒钟，最后出现分段错误。但是，如果我插入标记的行（它只是将当前写入的字节数输出到 tty - 一切正常）。如果我使用 eg`printf("Hello World!\n")`代替它，它仍然坏了。

这里发生了什么？某些与程序语义没有任何关系的库函数如何导致此错误？

```
#include "tlpi_hdr.h" //declares errExit and usageErr
#include <malloc.h>
#include <sys/types.h>
#include <unistd.h>
#include <fcntl.h>

#define BUF_SIZE 1024

int main(int argc, char **argv)
{
    if ( argc != 3 )
        usageErr("cp_self source dest");
    int fd_source, fd_dest, bytes;
    char *buf, *cur;
    buf = malloc(BUF_SIZE);
    FILE *str;

    if ( ( fd_source = open(argv[1], O_RDONLY) ) == -1 )
        errExit("open(%s)", argv[1]);
    if ( ( fd_dest = open(argv[2], O_WRONLY | O_TRUNC | O_CREAT, S_IRWXU | S_IRWXG | S_IRWXO) ) == -1 )
        errExit("open(%s)", argv[2]);
    if ( ( str = fdopen(fd_dest, "w") ) == NULL )
        errExit("fdopen(%d, 'w')", fd_dest);
    while ( ( bytes = read(fd_source, buf, BUF_SIZE) ) != 0 )
    {
        int dbg_cntr = 0;
        cur = buf;
        while ( cur != buf + bytes )
        {
            //printf("%d\n", dbg_cntr++); this line
            if ( *cur == '\0' )
            {
                if ( fflush(str) != 0 )
                    errExit("fflush(%d)", str);
                if ( lseek(fd_dest, 1, SEEK_CUR) == (off_t) -1 )
                    errExit("lseek(%d, 1, SEEK_CUR)", fd_dest);
            }
            else
            {
                if ( fprintf(str, "%c", *cur) != 1 )
                    errExit("fprintf(%d, %c)", str, *cur);
            }
            ++cur;
        }
    }
} 
```

添加了整个代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T18:17:18.280

`read()`将返回`-1`错误：在这种情况下，`buf + bytes`将小于`cur`并且您将有一个无限循环，直到`cur`指向您不允许读取的某些内存，从而导致分段违规。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T18:05:41.057

`dbg_cntr++`增加一个变量。我不确定它的范围，但它可能会影响程序的其他部分。尝试保留此语句而不使用`printf`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T18:28:34.313

当您调用 read 时，`buf`尚未初始化以特别指向任何内容，因此这将产生未定义的行为。

# c# - 带有 PHP 后端的许可系统？

> ID：12010816
> 
> 赞同：1
> 
> 时间：2012-08-17T17:56:12.150
> 
> 标签：c#, licensing

我即将发布我的应用程序，现在正试图弄清楚如何解决许可问题。

基本上，我希望能够为客户提供每月支付费用或一次性费用的选项。

我真的不在乎花费大量时间来保护它，因此它不能被破解，如果有人想破解应用程序，他们无论如何都会......所以这更适合诚实的人。

我正在考虑在 PHP 中使用一个后端，将不同的许可证类型存储在 MySQL 数据库中。理论上这对我来说很有意义，但我不知道如何在实际的 c# 代码中执行它..

有谁知道我如何实施一个基本的许可系统，这样我就不用花几天时间在上面了？:)

非常感谢任何帮助和提示！

编辑 - 澄清：

我有 ac# 应用程序，但它检查存储客户的 php 后端脚本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T18:21:36.960

在我的脑海中，一个基本的实现如下：

（伪代码）

带有 2 个表的 MySQL 数据库：

```
TABLE user
    id int primary key auto increment
    username varchar not null
    password varchar not null

TABLE subscription
   id int primary key auto increment
   type int not null
   expires date not null 
```

PHP 回调 url：[https](https://www.example.com/authenticate.php) ://www.example.com/authenticate.php 返回：JSON 或 XML 采用：发布数据：用户名：用户密码：pass

PHP 代码检查传入的用户名和密码是否正确，如果正确，则检查它们是否具有有效的订阅。返回 JSON 或 XML 作为响应：

{status:true} 或 {status:false}

您可能希望扩展响应以包括订阅类型和到期日期，以便应用程序可以在订阅离线且无法与您的服务器通信时缓存订阅。

您的 c# 应用程序需要使用类似于以下的代码（如果您更喜欢，请适应 xml）

```
string URL = 'https://www.example.com/authenticate.php";
string myParameters = "username=user&password=pass";
using (var webClient = new System.Net.WebClient()) {
        webClient.Headers[HttpRequestHeader.ContentType] = "application/x-www-form-urlencoded";
        string HtmlResult = wc.UploadString(URI, myParameters);
        // Now parse with JSON.Net
} 
```

显然，上面的代码不是一个功能齐全的代码，对于任何语法错误，我深表歉意。您将在初始化步骤中使用该代码，如果应用程序没有有效订阅（或使用您希望的任何行为），则关闭应用程序并显示错误。

# backbone.js - require.js 在部署时将所有模板压缩为一个模板

> ID：12010817
> 
> 赞同：3
> 
> 时间：2012-08-17T17:56:15.860
> 
> 标签：backbone.js

我已经根据这个示例设置了我的应用程序 [http://backbonetutorials.com/organizing-backbone-using-modules/](http://backbonetutorials.com/organizing-backbone-using-modules/) 我现在有 50 多个 html 文件。首次加载时加载所有文件需要 5 秒以上。我知道使用 node.js 和 require.js 我可以压缩或缩小 .js 文件和 .css 文件，但想知道是否有任何方法可以将所有 html 模板压缩到一个文件中以加快速度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T19:34:43.300

我即将在我的项目中面临这个问题，这就是我打算做的事情：

1.  编写模板加载器函数，以便将如何检索模板的详细信息封装在其中。之后，当模板处理逻辑发生变化时，我只需要更改代码中的一处。
2.  在构建时，将我的 Handlebars.js 模板编译成 JS 代码。[此处](http://handlebarsjs.com/precompilation.html)描述了该过程。
3.  使用`R.js`from `require.js`package 从所有编译的模板构建单个 JS 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T21:47:59.807

如果您正在使用该文章中描述的模板（使用 require !text、_.template 等），那么它们也会被压缩到 JavaScript 文件中。试一试。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-17T18:03:45.710

将 50 个 html 文件同时加载到浏览器中是没有意义的，正确的 require.js 和 node.js 应该加载一次到浏览器中。然后你的 index.html 将在 50 个中选择 html 文件作为其内容进一步附加。

# python - 如何在循环列表中循环，同时查看当前元素的前后？

> ID：12010820
> 
> 赞同：5
> 
> 时间：2012-08-17T17:56:33.067
> 
> 标签：python

使用以下示例列表：`L = ['a','b','c','d']`

我想实现以下输出：

```
>>> a d b
>>> b a c
>>> c b d
>>> d c a 
```

伪代码将是：

```
for e in L:
    print(e, letter_before_e, letter_after_e 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T17:59:06.953

您可以循环`L`并取索引`i`减和加 1 模`len(L)`来获取上一个和下一个元素。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-17T18:02:35.087

你几乎在那里

```
for i, e in enumerate(L):
    print(e, L[i-1], L[(i+1) % len(L)]) 
```

编辑添加模组

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T18:00:54.567

在这种情况下可能会有点矫枉过正，但这是循环双向链表的一般用例[http://ada.rg16.asn-wien.ac.at/~python/how2think/english/chap17.htm](http://ada.rg16.asn-wien.ac.at/~python/how2think/english/chap17.htm)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T18:34:01.363

从概念上讲，跟踪您已经看到的项目通常比向前看更简单。该类`deque`非常适合跟踪`n`以前的项目，因为它允许您设置最大长度；添加新项目会自动将旧项目推开。

```
from collections import deque

l = ['a','b','c','d']
d = deque(l[-2:], maxlen=3)

for e in l:
    d.append(e)
    print d[1], d[0], d[2] 
```

此解决方案的唯一区别是`d c a`它将先出现而不是最后出现。如果这很重要，您可以像已经看过一次迭代一样开始：

```
from collections import deque

l = ['a','b','c','d']
d = deque(l[-1:] + l[:1], maxlen=3)

for e in l[1:] + l[:1]:
    d.append(e)
    print d[1], d[0], d[2] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T18:28:48.823

在我的代码中，我将在由最后一个元素添加并由第一个元素添加的列表上使用 3 个元素的[移动窗口：](https://stackoverflow.com/q/7636004/862380)

```
from itertools import tee, izip, chain

def window(iterable,n):
    '''Moving window
    window([1,2,3,4,5],3) -> (1,2,3), (2,3,4), (3,4,5)
    '''
    els = tee(iterable,n)
    for i,el in enumerate(els):
        for _ in range(i):
            next(el, None)
    return izip(*els)

def chunked(L):
    it = chain(L[-1:], L, L[:1]) # (1,2,3,4,5) -> (5,1,2,3,4,5,1)
    for a1,a2,a3 in window(it,3): # (3,1,2,3,1) -> (3,1,2), (1,2,3), (2,3,1)
        yield (a2,a1,a3)

## Usage example ##
L = ['a','b','c','d']

for t in chunked(L):
    print(' '.join(t)) 
```

# c - 结构自引用

> ID：12010821
> 
> 赞同：0
> 
> 时间：2012-08-17T17:56:34.373
> 
> 标签：c, pointers, struct, dynamic-memory-allocation

我到处都有语法错误，对 ADT 和内存处理的语法理解不好。`next`我需要一个在and中引用自身（其他部分）的结构`prev`。我做对了吗？我收到错误...

```
struct _header * header;

typedef struct _header {
    int signiture;
    int size;
    header_t* next;
    header_t* prev;
} header; 
```

我还想用标头初始化内存中的前 32 个字节（这也不太顺利..）：

```
//this is to reference the memory block later
static int *free_list_ptr;

void function(u_int32_t size){
    memory = (byte*) malloc(size);
    header firstHead = malloc(sizeof(_header));
   free_list_ptr = firstHead = memory;
   firstHead->prev = free_list_ptr;
   firstHead->next = free_list_ptr;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T18:05:04.013

你不能`typedef`在创建它时引用它，所以你应该这样做：

```
typedef struct a_header {
    int signiture;
    int size;
    struct a_header* next;
    struct a_header* prev;
} header;

header* the_header; 
```

避免使用下划线开头的名称——它们是为系统事物保留的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T18:13:26.837

这是您当前的问题。

```
memory = (byte*) malloc(size); 
header firstHead = malloc(sizeof(header)); 
    free_list_ptr = firstHead = memory; 
```

您将其位置分配`size`并存储为`byte*`into `memory`。

然后你（正确地）分配一个`header`结构，并将该空间的分配存储到`firstHead`.

`firstHead`然后通过设置为 的大小错误的分配空间来丢弃它（泄漏内存）`memory`，然后设置`free_list_ptr`为相同大小的分配空间。

由于您当前的指针没有足够的内存，因此当您尝试使用`next`and的偏移量时会遇到麻烦`prev`。

我怀疑你需要这个：

```
memory = null; 
header firstHead = malloc(sizeof(header)); 
memory = free_list_ptr = firstHead; 
```

这将设置指针`memory`和`free_list_ptr`指向 指向的分配空间`firstHead`。

我不知道您为什么使用两个不同的指针来跟踪`memory`和`free_list_ptr`. 我的直觉是，其中 1 个可能足以满足您的目的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T18:07:06.427

请试试这个：

```
typedef struct _header *lpheader;

typedef struct _header {
    int signiture;
    int size;
    lpheader next;
    lpheader prev;
} header, *lpheader; 
```

另外，为什么这个结构需要 32 字节的空间？您应该使用`sizeof(_header)`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T18:25:04.507

你想的太复杂了，你`typedef`太晚了，你在`struct`.

```
typedef struct header header; // <- forward declare "struct header" and identifier "header"

struct header {
    int signiture;
    int size;
    header* next;
    header* prev;
}; 
```

对于续集，我真的不明白你想做什么。可以肯定的是，您在那里使用了未声明的奇怪名称，并且您将`malloc`.

# jquery - 使用 jQuery 完全隐藏与 jCarousel 关联的元素时出错

> ID：12010823
> 
> 赞同：0
> 
> 时间：2012-08-17T17:56:39.120
> 
> 标签：jquery, jcarousel

我很难弄清楚如何使用 jQuery 完全删除或隐藏一个元素，比如一个与 jCarousel 挂钩的 div。例如

```
<div id='featured_border' class='jcarousel-container'>  
<div id='featured_wrapper' class='jcarousel-clip'>  
<ul id='featured_images' class='jcarousel-list'> 
```

我使用 jcarousel 对这些元素应用了效果。但是我需要“完全”隐藏这些元素以响应事件，比如点击。
为了响应该事件，元素确实隐藏了，但大约 3 秒后，我在警报框中收到此错误：
*jCarlousel：没有为项目设置宽度/高度。这将导致无限循环。中止..*

我尝试使用 remove() 来删除元素，而不是简单地隐藏它，尽管这不是我想做的，但它也没有帮助。

这是某种错误还是我错过了什么？

# c++ - LVN_ITEMCHANGING - 区分用户输入

> ID：12010825
> 
> 赞同：1
> 
> 时间：2012-08-17T17:56:41.293
> 
> 标签：c++, windows, winapi

我正在处理该`LVN_ITEMCHANGING`消息，但每次更改检查状态时都会发出信号。

我需要一种方法来区分用户更改检查状态和我打电话`ListView_SetCheckState`

有什么简单的方法可以做到这一点？可能是我不知道的不同消息？或者有人有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T18:42:36.527

ListView_SetCheckState**发送**LVM_SETITEMSTATE 消息。LVN_ITEMCHANGING 消息也**被发送**到控件的父窗口。这意味着，该函数是同步的，并且 LVN_ITEMCHANGING 处理程序在 ListView_SetCheckState 调用返回之前执行。这允许使用简单的布尔标志，例如：

```
bChangedByProgram = TRUE;
ListView_SetCheckState(...);
bChangedByProgram = FALSE; 
```

在 LVN_ITEMCHANGING 处理程序中：

```
if ( ! bChangedByProgram )
{
    // item state is changed by user
} 
```

# c++ - C2653：“GUI”：不是类或命名空间

> ID：12010826
> 
> 赞同：0
> 
> 时间：2012-08-17T17:56:41.793
> 
> 标签：c++, visual-studio-2010, class, namespaces

严重让我神经紧张。这段代码之前工作得很好，我重新启动了 IDE (Visual Studio 2010)，现在突然代码让我发疯了。错误日志很大，我不知道是什么原因造成的，因为代码似乎非常正确。

```
1>ClCompile:
1>  uicont.cpp
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\include\mage\gui\uicontext.h(21): error C2653: 'GUI' : is not a class or namespace name
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\include\mage\gui\uicontext.h(21): error C2143: syntax error : missing ';' before '*'
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\include\mage\gui\uicontext.h(21): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\include\mage\gui\uicontext.h(21): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int 
```

还有更多，但我认为这是导致错误的原因。这是问题最多的文件的源代码。

**法师/GUI/UIContext.h**

```
#include <OGRE/OgreString.h>
#include <OGRE/OgreOverlay.h>
#include <OGRE/OgreOverlayManager.h>

#include <vector>

#include <Mage/GUI/Frame.h>

#ifndef __H_MAGE_UICONTEXT
#define __H_MAGE_UICONTEXT

namespace Mage {
    class UIContext {
    public:
        UIContext();
        ~UIContext();

        GUI::Frame* createFrame(Ogre::String, Ogre::Vector2, double, double);
        void        attachFrame(Ogre::OverlayContainer*);

    private:
        Ogre::Overlay*           m_Overlay;
        std::vector<GUI::Frame*> m_Frames;
    };
}

#endif // __H_MAGE_UICONTEXT 
```

**法师/GUI/Frame.h**

```
#include <OGRE/OgreVector2.h>
#include <OGRE/OgreOverlayContainer.h>
#include <OGRE/OgreOverlayManager.h>
#include <OGRE/OgreString.h>

#include <Mage/GUI/UIContext.h>

#ifndef __H_MAGE_GUI_FRAME
#define __H_MAGE_GUI_FRAME

namespace Mage {
    namespace GUI {
        class Frame {
        public:
            Frame(Mage::UIContext*, Ogre::String, Ogre::Vector2, double, double);

        private:
            Ogre::OverlayContainer* m_Panel;
        };
    }
}

#endif // __H_MAGE_GUI_FRAME 
```

我还包括了整个错误日志，但这似乎是所有事情都失败了，因为这部分失败了。我什至没有碰过那个代码，它总是编译得很好。是否需要解决问题，我也会包括在内；这些都是巨大的文件。

```
1>------ Build started: Project: Mage3D, Configuration: Debug Win32 ------
1>Build started 17/08/2012 19:43:22.
1>InitializeBuildStatus:
1>  Touching "Debug\Mage3D.unsuccessfulbuild".
1>ClCompile:
1>  uicont.cpp
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\include\mage\gui\uicontext.h(21): error C2653: 'GUI' : is not a class or namespace name
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\include\mage\gui\uicontext.h(21): error C2143: syntax error : missing ';' before '*'
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\include\mage\gui\uicontext.h(21): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\include\mage\gui\uicontext.h(21): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\include\mage\gui\uicontext.h(21): warning C4183: 'createFrame': missing return type; assumed to be a member function returning 'int'
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\include\mage\gui\uicontext.h(26): error C2653: 'GUI' : is not a class or namespace name
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\include\mage\gui\uicontext.h(26): error C2065: 'Frame' : undeclared identifier
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\include\mage\gui\uicontext.h(26): error C2059: syntax error : '>'
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\include\mage\gui\uicontext.h(27): error C2143: syntax error : missing ';' before '}'
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\include\mage\gui\uicontext.h(28): error C2143: syntax error : missing ';' before '}'
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\include\mage\gui\frame.h(14): error C2143: syntax error : missing ';' before '{'
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\include\mage\gui\frame.h(15): error C2143: syntax error : missing ';' before '{'
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\include\mage\gui\frame.h(16): error C2143: syntax error : missing ';' before '{'
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\include\mage\gui\frame.h(18): error C2143: syntax error : missing ',' before ')'
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\include\mage\gui\frame.h(23): error C2143: syntax error : missing ';' before '}'
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\include\mage\gui\frame.h(24): error C2143: syntax error : missing ';' before '}'
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\include\mage\gui\frame.h(25): error C2143: syntax error : missing ';' before '}'
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\include\mage\gui\uicontroller.h(16): error C2143: syntax error : missing ';' before '{'
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\include\mage\gui\uicontroller.h(18): error C2143: syntax error : missing ';' before '}'
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\include\mage\gui\uicontroller.h(19): error C2039: 'UIController' : is not a member of 'Mage'
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\include\mage\gui\uicontroller.h(19): error C2065: 'UIController' : undeclared identifier
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\include\mage\gui\uicontroller.h(19): error C2990: 'Ogre::Singleton' : non-class template has already been declared as a class template
1>          c:\users\jesse\documents\visual studio 2010\projects\mage3d\ogre3d\include\ogre\ogresingleton.h(65) : see declaration of 'Ogre::Singleton'
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\include\mage\gui\uicontroller.h(22): error C2143: syntax error : missing ';' before '{'
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\include\mage\gui\uicontroller.h(23): error C3413: 'Mage::UIContext::UIController' : invalid explicit instantiation
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\include\mage\gui\uicontroller.h(37): error C2143: syntax error : missing ';' before '{'
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\include\mage\gui\uicontroller.h(38): error C2143: syntax error : missing ';' before '}'
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\gui\uicont.cpp(4): error C2039: 'UIController' : is not a member of 'Mage'
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\gui\uicont.cpp(4): error C2039: 'UIController' : is not a member of 'Mage'
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\gui\uicont.cpp(4): error C2065: 'UIController' : undeclared identifier
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\gui\uicont.cpp(4): error C2955: 'Ogre::Singleton' : use of class template requires template argument list
1>          c:\users\jesse\documents\visual studio 2010\projects\mage3d\ogre3d\include\ogre\ogresingleton.h(65) : see declaration of 'Ogre::Singleton'
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\gui\uicont.cpp(6): error C2143: syntax error : missing ';' before '{'
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\gui\uicont.cpp(7): error C2653: 'UIController' : is not a class or namespace name
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\gui\uicont.cpp(7): error C2143: syntax error : missing ';' before '{'
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\gui\uicont.cpp(10): error C2143: syntax error : missing ';' before '}'
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\gui\uicont.cpp(12): error C2653: 'UIController' : is not a class or namespace name
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\gui\uicont.cpp(12): error C2143: syntax error : missing ';' before '{'
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\gui\uicont.cpp(13): error C2143: syntax error : missing ',' before ')'
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\gui\uicont.cpp(15): error C2143: syntax error : missing ';' before '}'
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\gui\uicont.cpp(17): error C2653: 'UIController' : is not a class or namespace name
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\gui\uicont.cpp(17): error C2143: syntax error : missing ';' before '{'
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\gui\uicont.cpp(19): error C2143: syntax error : missing ';' before '}'
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\gui\uicont.cpp(21): error C2653: 'UIController' : is not a class or namespace name
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\gui\uicont.cpp(21): error C2143: syntax error : missing ';' before '{'
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\gui\uicont.cpp(24): error C2143: syntax error : missing ';' before '}'
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\gui\uicont.cpp(26): error C2653: 'UIController' : is not a class or namespace name
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\gui\uicont.cpp(26): error C2143: syntax error : missing ';' before '{'
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\gui\uicont.cpp(37): error C2143: syntax error : missing ';' before '}'
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\gui\uicont.cpp(39): error C2653: 'UIController' : is not a class or namespace name
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\gui\uicont.cpp(39): error C2143: syntax error : missing ';' before '{'
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\gui\uicont.cpp(55): error C2143: syntax error : missing ',' before ')'
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\gui\uicont.cpp(67): error C2143: syntax error : missing ',' before ')'
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\gui\uicont.cpp(73): error C2143: syntax error : missing ';' before '}'
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\gui\uicont.cpp(74): error C2143: syntax error : missing ';' before '}'
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\gui\uicont.cpp(75): error C2143: syntax error : missing ';' before '}'
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\gui\uicont.cpp(75): fatal error C1004: unexpected end-of-file found
1>  luagui.cpp
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\include\mage\gui\frame.h(18): error C2039: 'UIContext' : is not a member of 'Mage'
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\include\mage\gui\frame.h(18): error C2039: 'UIContext' : is not a member of 'Mage'
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\include\mage\gui\frame.h(18): error C2061: syntax error : identifier 'UIContext'
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\gui\luagui.cpp(76): warning C4244: 'argument' : conversion from 'lua_Number' to 'const Ogre::Real', possible loss of data
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\gui\luagui.cpp(76): warning C4244: 'argument' : conversion from 'lua_Number' to 'const Ogre::Real', possible loss of data
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\gui\luagui.cpp(77): error C2661: 'Mage::GUI::Frame::Frame' : no overloaded function takes 4 arguments
1>  frame.cpp
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\include\mage\gui\frame.h(18): error C2039: 'UIContext' : is not a member of 'Mage'
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\include\mage\gui\frame.h(18): error C2039: 'UIContext' : is not a member of 'Mage'
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\include\mage\gui\frame.h(18): error C2061: syntax error : identifier 'UIContext'
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\gui\frame.cpp(4): error C2511: 'Mage::GUI::Frame::Frame(Mage::UIContext *,Ogre::String,Ogre::Vector2,double,double)' : overloaded member function not found in 'Mage::GUI::Frame'
1>          c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\include\mage\gui\frame.h(16) : see declaration of 'Mage::GUI::Frame'
1>  context.cpp
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\include\mage\gui\uicontext.h(21): error C2653: 'GUI' : is not a class or namespace name
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\include\mage\gui\uicontext.h(21): error C2143: syntax error : missing ';' before '*'
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\include\mage\gui\uicontext.h(21): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\include\mage\gui\uicontext.h(21): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\include\mage\gui\uicontext.h(21): warning C4183: 'createFrame': missing return type; assumed to be a member function returning 'int'
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\include\mage\gui\uicontext.h(26): error C2653: 'GUI' : is not a class or namespace name
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\include\mage\gui\uicontext.h(26): error C2065: 'Frame' : undeclared identifier
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\include\mage\gui\uicontext.h(26): error C2059: syntax error : '>'
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\include\mage\gui\uicontext.h(27): error C2143: syntax error : missing ';' before '}'
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\include\mage\gui\uicontext.h(28): error C2143: syntax error : missing ';' before '}'
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\include\mage\gui\frame.h(14): error C2143: syntax error : missing ';' before '{'
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\include\mage\gui\frame.h(15): error C2143: syntax error : missing ';' before '{'
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\include\mage\gui\frame.h(16): error C2143: syntax error : missing ';' before '{'
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\include\mage\gui\frame.h(18): error C2143: syntax error : missing ',' before ')'
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\include\mage\gui\frame.h(23): error C2143: syntax error : missing ';' before '}'
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\include\mage\gui\frame.h(24): error C2143: syntax error : missing ';' before '}'
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\mage3d\include\mage\gui\frame.h(25): error C2143: syntax error : missing ';' before '}'
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\ogre3d\include\ogre\ogrepixelformat.h(34): error C2143: syntax error : missing ';' before '{'
1>c:\users\jesse\documents\visual studio 2010\projects\mage3d\ogre3d\include\ogre\ogrepixelformat.h(43): error C2143: syntax error : missing ';' before '{'
... snip, just more of these errors ...
1>
1>Build FAILED.
1>
1>Time Elapsed 00:00:11.44
========== Build: 0 succeeded, 1 failed, 3 up-to-date, 0 skipped ========== 
```

嗯，我不知道了。**希望StackOverflow**的你们能像往常一样帮助我。你们看到了我发誓的一切，这就是我如此爱你的原因。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T18:06:20.733

在 Mage/GUI/UIContext.h 中包含“Mage/GUI/Frame.h”，然后在 Mage/GUI/Frame.h 中包含“Mage/GUI/UIContext.h”。

这就是您收到这些错误的原因。您至少应该更改其中一个包含，它应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T18:12:14.310

回答我自己的问题：UIContext 的一个方法正在寻找不存在的 Mage::GUI::Frame 类。Frame 类的构造函数正在寻找也不存在的 UIContext。在包含标题之前添加类的原型解决了这个问题。

# sql - 返回所有匹配的记录和至少一个不匹配的所有记录

> ID：12010830
> 
> 赞同：1
> 
> 时间：2012-08-17T17:56:46.813
> 
> 标签：sql, tsql, inner-join, self-join

给定一张考试结果表，其中 1 == PASS 和 0 == FAIL

```
 ID    Name    Test   Result
--------------------
1     John    MATH   1
2     John    ENGL   1
3     Mary    MATH   1
4     Mary    PSYC   0 
```

**编辑**：假设名称是唯一的。

我需要为那些1) 通过所有测试
2) 至少通过一项测试的人获取所有记录

因此，第一个查询应该返回 John 和他的所有记录，第二个查询应该返回 Mary 和她的所有记录（包括通过 PASS 的记录）。

我正在尝试对其`LEFT OUTER JOIN`自身进行比较并比较计数，但似乎没有得到有效的查询。

```
 SELECT * FROM Results R1
LEFT OUTER JOIN Results R2 on R1.ID=R2.ID and R2.Result=1
WHERE ??? count of rows from R1 is compared to count of non-null rows from R2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T18:05:32.653

这是该[`EXISTS`](http://msdn.microsoft.com/en-us/library/ms188336.aspx)子句的“典型”练习：

至少有一个失败的结果：

```
select * from Results r
where exists (select * from Results rr where rr.Name=r.Name AND Result=0) 
```

全部通过：

```
select * from Results r
where not exists (select * from Results rr where rr.Name=r.Name AND Result=0) 
```

查看这些查询如何在您的数据集[上工作`sqlfiddle.com`](http://sqlfiddle.com/#!3/2a4c4/4)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T18:05:01.420

全部通过

```
SELECT Name FROM Results R1
GROUP BY NAME
HAVING SUM(RESULT) = COUNT(RESULT) 
```

有些失败了

```
SELECT Name FROM Results R1
GROUP BY NAME
HAVING SUM(RESULT) < COUNT(RESULT) 
```

希望能帮助到你

***编辑***

全部通过

```
SELECT Name FROM Results R1
GROUP BY NAME
HAVING SUM(1-RESULT) = 0 
```

有些失败了

```
SELECT Name FROM Results R1
GROUP BY NAME
HAVING SUM(1-RESULT) > 0 
```

（这可能运行得更快）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T18:04:29.487

单程

```
 Select Name, 
     Case failCount When 0 then 'X' Else '' End PassedAll,
     Case failCount When 0 then '' Else 'X' End FailedOneOrMore
  From (Select name, 
        Sum(Case Result when 0 Then 1 Else 0 End) failCount
        From Results R
        Group By Name) Z 
```

要获取所有记录，只需加入此

```
 Select zz.Name, zz.PassedAll, zz.FailedOneOrMore,
      r.Test, r.Result 
   From (Select Name, 
             Case failCount When 0 then 'X' Else '' End PassedAll,
             Case failCount When 0 then '' Else 'X' End FailedOneOrMore
        From (Select name, 
              Sum(Case Result when 0 Then 1 Else 0 End) failCount
              From Results R
              Group By Name) Z) ZZ
       Left Join Results r On r.Name = zz.Name 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T18:38:26.857

此查询使用子查询返回已通过至少一项测试的人员的所有记录（通过和失败）：

`select * from Results where Name in (select Name from Results where Result = '1' group by Name);`

结果不包括那些未能通过任何测试的人。

# jquery - 如何通过ajax成功django创建和访问在服务器中创建的json对象

> ID：12010833
> 
> 赞同：0
> 
> 时间：2012-08-17T17:56:50.477
> 
> 标签：jquery, ajax, django, django-views

这个想法是：我想从 ajax 调用 json 对象并返回它的值。

在我看来，我有这样的事情：

> ```
>  if user is not None:
>             login(request, user)
>             link1 = "http://www.google.com"
>             link2 = "http://www.yahoo.com"
>             json = simplejson.dumps({"link1":link1, "link2":link2})   # I think problem is here
> return HttpResponse(json, mimetype="text/json") 
> ```

和我的jQuery：

```
function register_user() {
    $("#register-user").click(function() {
        $.ajax({
            url: "/registration/register_user/",
            type: "POST",
            dataType: "text",
            data: {
                username : $("#id_username").val(),
                email : $("#id_email").val(),
                password : $("#id_password").val(),
                password2 : $("#id_password2").val(),
            },
            success: function(data) {
                if (data) {
                    alert(data.link1);  # this returns "undefined"
                }
                else {
                    alert("Error");
                }

            }
        });
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T18:05:41.533

在你的成功函数中，尝试做`parsed_data = $.parseJSON(data)`，然后你可以使用`parsed_data.link1`。

# iis-7 - IIS 7.0 中委派的 Kerberos 身份验证

> ID：12010842
> 
> 赞同：0
> 
> 时间：2012-08-17T17:57:11.337
> 
> 标签：iis-7, kerberos

我正在尝试创建一个 .net 网页，该网页使用 UserPrinciple.Current 来获取当前登录用户的详细信息，并允许他们更改其 Active Directory 密码。

经过一番头疼之后，我让它工作了（耶！）。我唯一的问题是我希望它在我们的 Intranet 站点 (http://intranet) 上工作，但它似乎只有在我指定完全限定的域名 (http://intranet.mydomain.co.uk) 时才能工作。

查看此页面（[如何为委派方案配置 ASP.NET 应用程序](http://support.microsoft.com/kb/810572)）“摘要”部分底部的故障排除部分似乎包含两条相互冲突的建议：

> 3.要使 Kerberos 正常工作，您必须使用完全限定域名 (FQDN) 进行所有通信。
> 
> 5.如果 Web 服务器使用完全限定域名，则必须将该站点添加到 Internet Explorer 中的 Intranet 站点列表中。

请注意，第 5 项以**IF**开头- 表明它不必**这样**做。但是第 3 项指出 FQDN 是必要的。

所以问题很简单：我可以通过 IIS 7 设置委托而不使用 FQDN 主机名吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T09:22:23.627

你需要**两者，**否则它不会有充分的理由工作，IE 将回退到 NTLM。顺便说一句，编写一个用户可以更改其 AD 密码的 web 应用程序真的毫无意义。这应该通过 Windows 更改密码对话框而不是某些第三方工具来完成。

# c++ - GLEW 无法初始化

> ID：12010843
> 
> 赞同：1
> 
> 时间：2012-08-17T17:57:16.437
> 
> 标签：c++, opengl, gcc, glew

我的机器有 OpenGL 2.0，由于某些奇怪的原因，头文件`gl.h`不包含着色器函数。所以，有人建议我使用 GLEW。我正确安装了 GLEW，并链接`glew32s`到我的编译器，我还在我的`main.cpp`. 然而，当我简单地调用时，我得到了编译器（不是运行时）错误：

```
 GLenum err = glewInit(); 
```

> *对` imp* _glewInit@0'的未定义引用

这到底是什么意思？它对着色器功能说了类似的话。

我正在使用 GCC 编译器，并且在 windows x86 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T18:14:39.070

您正在尝试使用 GLEW 的静态版本。

确保你`#define GLEW_STATIC`在`#include`ing之前`glew.h`。

# indexing - RavenDB 中无法解决的事件场景？

> ID：12010845
> 
> 赞同：2
> 
> 时间：2012-08-17T17:57:21.307
> 
> 标签：indexing, lucene.net, ravendb

**编辑**. 这是对该问题的简化描述：我有活动

```
class Event { Id = 0, Dates = new DateTime[] {} } 
```

例如，我需要查询某个日期范围内的所有事件（8 月 1 日至 10 月 20 日）。结果应列出此范围内**按日期排序的**唯一事件。像这样：

```
Event one   2012-08-04,2012-09-06,2012-09-10
Event two   2012-10-02
etc. 
```

我需要能够分页此结果。而已。

* * *

我在使用 ravendb 的活动中遇到以下问题。我有一个包含日期数组的文档（代表一个事件），例如 2012-08-20、2012-08-21、2012-09-14、2013-01-05 等。

```
class Event { Dates = []; } 
```

我有几个必须满足的标准：

1.  我需要能够在某个日期范围内查询这些文档。例如，查找所有日期介于 8 月 1 日和 9 月 22 日之间或 10 月 1 日和 10 月 3 日之间的所有事件。

2.  我必须能够按日期对查询进行排序

3.  我必须能够对结果进行分页。

看起来很容易对吧？好吧，我有两种方法，但它们都失败了。

创建具有多个 from 的索引。像这样：

```
from event in docs.Events
from date in event.Dates
select new { Dates = date} 
```

这有效并且易于查询。但是，由于skippedresults（索引将包含每个事件的重复项），它不能被分页。并且排序与分页结合也会失败。

…………………………………………………………………………

创建一个简单的索引

```
from event in docs.Events
select new { Dates = event.Dates } 
```

这也有效，查询简单，也可以分页。但是无法排序。我需要按查询范围内的第一个可用日期对文档进行排序。

如果我不能解决这个问题，这对我们来说可能是一个交易破坏者......而且我真的不想开始使用新应用程序，除了我真的很喜欢 RavenDB..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T11:17:36.267

我对此的最终解决方案是创建两个索引。无论如何，我们的应用程序中都需要这两个索引，所以它没有任何开销。

以下索引用于查询和分页。Take() 和 Skip() 适用于此：

```
from event in docs.Events
from date in event.Dates
select new { Date = date} 
```

但是，上面的索引没有返回正确的总点击数，这是创建寻呼机所需的。所以我们创建另一个索引：

```
from event in docs.Events
select new { Date = event.Dates } 
```

现在我们可以使用 Statistics() 和 Take(0) 在上述索引上运行完全相同的查询（注意两个索引上的 Date 字段具有相同的名称），以仅获取命中数。

这样做的缺点显然是您需要运行两个查询，但我还没有找到解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T20:23:41.473

我有一个类似的要求（重复事件），增加了日期的数量是高度可变的（可能从 1 到数百）并且可能与场地相关联。

在陷入类似僵局后，我最终将事件日期存储在 EventOccurrence 中：

```
public class EventOccurrence {   
   public string EventId {get; set;}   
   public DateTime Start {get; set;}   
   public string VenueId {get; set;} 
} 
```

它易于查询和排序，并且使用 Session.Include 在出现时我们仍然保留查询性能。

这似乎是对关系模型的回归，但考虑到我们的限制，这是正确的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T15:11:27.003

您是说“简单索引”方法除了排序之外有效吗？

```
from event in docs.Events
select new
{
  Dates = event.Dates,
  FirstDate = event.Dates.First()
} 
```

然后您可以按 FirstDate 排序。您无法对已分析或标记化的字段进行排序。

# node.js - 用于动态将视频转换为音频和流式传输的语言/框架

> ID：12010883
> 
> 赞同：0
> 
> 时间：2012-08-17T18:00:14.027
> 
> 标签：node.js, audio, video, azure

现状：windows azure ubuntu web server 的root访问 需要能够通过url查询web服务到一个视频文件，然后web服务需要下载这个视频，管道到ffmpeg转换，需要管道返回作为来自 Web 服务的响应 目前我有一个 node.js 服务，可以很好地供个人使用。然而，这最终将需要扩展得更大，以便在一次有大量客户端请求的情况下进行即时转换，并且我注意到 node.js 在这方面存在一些问题：例如，当它遇到错误，整个服务关闭然后重新启动，这意味着如果连接了一千个客户端，它们都会丢失它们的流

我想知道是否有更好的方法可能？再一次，它所要做的就是下载一个视频并将下载内容输入 ffmpeg 的标准输入，然后 ffmpeg 的标准输出作为服务的响应返回。python可能会为此更好地工作吗？它能否完成任务，很好地扩展，并且当只有一个请求遇到错误时也没有断开所有会话的问题？

非常感谢，马特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T18:45:08.733

我个人认为 Node.js 是处理这类事情的最佳工具。我想说您只需要专注于在正确的位置捕获异常，这样特定流的错误就不会影响正在运行的应用程序的其余部分。

如果您在 Python 中重写并且未能在其中捕获异常，则会发生同样的事情......您的应用程序将退出并出现未处理的异常。

# google-maps - 基于日期减法在地图上符号化融合表

> ID：12010889
> 
> 赞同：1
> 
> 时间：2012-08-17T18:00:41.790
> 
> 标签：google-maps, google-fusion-tables

我需要在谷歌地图上符号化一个融合表（点）——简单的东西。这里的技巧是我需要根据现在（今天）和 Fusion Table 列中的日期之间的差异来符号化这些点。

我的理解是 API 不能做日期减法（API 中没有“现在”）。解决此问题的方法是在 Excel 中进行减法，结果在新列中，重新上传到 Fusion Tables，然后根据新结果值进行符号化。但这仅在*今天*是准确的——Fusion Tables 只能保存静态信息——所以它不是一个很好的解决方案。

我在这里遗漏了什么，或者任何人有任何其他想法如何解决这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T18:48:08.077

根据您需要的样式有多复杂，您可以使用[动态缩放](https://developers.google.com/maps/documentation/javascript/layers#fusion_table_styles)来动态地进行，该选项只能应用 5 种不同的样式，但可以基于今天的日期，因为这可以通过 javascript 在浏览器中使用。

如果您需要超过 5 种样式，但没有很多点，您还可以查询表中的数据并添加原生 Google Maps API v3 标记，这会失去 FusionTableLayers 基于图块的渲染优势，但会允许更多样式。

# javascript - 消除命名空间中的局部变量

> ID：12010891
> 
> 赞同：0
> 
> 时间：2012-08-17T18:00:51.613
> 
> 标签：javascript

我想摆脱某个命名空间中的局部变量。

这是我的库的最顶层，我在其中设置了一些本地对象来保存其他对象 - 模型、视图、控制器。

但是，有人告诉我有一种方法可以在没有本地人的情况下将库组织到命名空间。

在这篇[文章](https://stackoverflow.com/questions/10130209/javascript-organization-module-pattern-w-modules)中，用户 Raynos 说这可能是组织图书馆的最佳方式。命名空间的本地变量为零。

我怎样才能把当地人一起排除在我的图书馆里？

```
(function (window, document) {
    "use strict";
    var Mo = {},
        Vi = {},
        Co = {},
        Su = {}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T18:31:23.973

我能满足您的要求的最接近的方法是“隐藏”参数中的变量：

```
(function(window, document, Mo, Vi, Co, Su) {
    "use strict";
    // The rest of your code here, using the arguments instead of variables...
})(window, document, {}, {}, {}, {}); 
```

然而有两件事：

*   这些参数与您试图摆脱的变量具有完全相同的范围（即它们是匿名函数的本地变量）。

*   这将 、 和 的声明`Mo`（`Vi`在`Co`函数`Su`的参数列表中，在文件的顶部）和它们的初始化（在传递给函数的参数中，在文件的底部）分开。这会降低代码的可读性和可维护性，这可能不是您的目标。

# android - Android 2.3.3 (API10) 上的下拉控件

> ID：12010894
> 
> 赞同：1
> 
> 时间：2012-08-17T18:01:05.603
> 
> 标签：android

我正在开发一个应用程序，其中主显示屏需要尽可能整洁，但可以快速轻松地访问菜单控件。
我想实现的类似于主下拉控件（用于数据、WiFi、BT 开/关等），但我不确定最好的方法是什么。
我对 Android 很陌生，对 Java 也很陌生（不是一般的编程，虽然我的主要重点是 C 中的嵌入式开发），所以除了完整的答案之外，任何基本的建议都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T18:26:29.900

它被称为滑动抽屉。在线查看示例并按照文档进行操作，您会没事的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T20:07:34.360

[在此处查看我的示例](https://mobibear.wordpress.com/2010/07/12/android-slidingdrawer-with-custom-view/)。它使用带有自定义视图的滑动抽屉。

# java - 使用语句和结果集管理多个查询可选查询

> ID：12010897
> 
> 赞同：0
> 
> 时间：2012-08-17T18:01:14.433
> 
> 标签：java, try-catch, resultset

目前我们有一个 java 应用程序，它有许多不同的查询，并不是所有的查询都在一个特定的时间运行。因此，对于每个查询，我们计划有一个新的语句和结果集并立即关闭它们？下面给出了我们现在如何运行查询的代码片段。我们尝试使用 try 和 catch 覆盖每个查询，但是如果查询失败，则回滚在全局级别上不起作用。如何最好地将它们放在适当的位置以确保也没有内存泄漏？

```
try{ //main try outside

//lots of inner queries run based on some logics of if else etc

//sample query of opening and closing both statement and resultsets.

Statement stmt1 = null;
stmt1 = dbconn.createStatement();
String selectQuery1  = "Select query";
ResultSet rs1 = stmt1 .executeQuery(selectQuery1);
while(rs1.next()) {
//process here

}
try{
  if (rs1 != null ){
     rs1.close();
  }
  if (stmt1!= null ){
    stmt1.close()
  }
}
catch(SQLException ex){
ex.printStackTrace(System.out);
}

dbconn.commit();
}
catch (SQLException ex) { 
 try {    
   dbconn.rollback();  
 } 
 catch (Exception rollback){    
  rollback.printStackTrace(System.out);
 }
}
catch (Exception e){
 try{    
    dbconn.rollback();  
 } 
 catch (Exception rollback) {    
   rollback.printStackTrace(System.out);
 }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T18:20:01.537

要使回滚工作，您必须首先检查是否`autoCommit`设置为`false`最初。只有在所有操作都已成功执行时，您才想提交。

这样做的一种方法可能是使用这样的结构：

```
Connection connection = getDBConnection(); //Depends on how you get your connection
boolean autoCommit = connection.getAutoCommit();
try{
    //Set autoCommit to false. You will manage commiting your transaction
    connection.setAutoCommit(false); 
    //Perform your sql operation

    if(doCommit){ //all your ops have successfully executed, you can use a flag for this
        connection.commit();
    }
}catch(Exception exe){
    //Rollback
}finally{
    connection.setAutoCommit(autoCommit); //Set autoCommit to its initial value
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T18:23:23.107

```
Please try keeping dbconn.setAutoCommit(false) as first statement in your first try block so that it will not insert/update/delete query unless you say dbconn.commit()

try{
       conn.setAutoCommit(false);
      Statement stmt1 = null;
      stmt1 = dbconn.createStatement();
      String selectQuery1  = "Select query";
      ResultSet rs1 = stmt1 .executeQuery(selectQuery1);
      while(rs1.next()) {
        //process here

      } 
      conn.commit();

      rs.close();
      stmt.close();
      conn.close();
   }catch(SQLException se){
      //Handle errors for JDBC
      se.printStackTrace();
      try{
         if(conn!=null)
            conn.rollback();
      }catch(SQLException se2){
         se2.printStackTrace();
      }//end try

   }catch(Exception e){
      e.printStackTrace();
   }finally{
      //finally block used to close resources
      try{
         if(rs!=null)
            rs.close();
      }catch(SQLException se2){
      }// nothing we can do
      try{
         if(stmt!=null)
            stmt.close();
      }catch(SQLException se2){
      }// nothing we can do
      try{
         if(conn!=null)
            conn.close();
      }catch(SQLException se){
         se.printStackTrace();
      }//end finally try
   }//end try
}// 
```

# javascript - HTML5 Canvas 仅调整 html 的大小

> ID：12010900
> 
> 赞同：1
> 
> 时间：2012-08-17T18:01:32.343
> 
> 标签：javascript, html

我目前正在处理一个涉及画布元素的项目，并且在调整画布大小时遇到​​了问题。我试图通过将宽度和高度除以 2 在画布的中心绘制图像，但是每当我调整画布的大小时，它只会更改 HTML，所以当我去重绘图像时，它仍然绘制一半旧画布的宽度和高度。我不确定这是 DOM 问题还是什么，但如果有任何帮助，我将不胜感激。我在 Safari、FF 和 Chrome 中测试过

编辑：代码

```
<body>
<div id="holder">
<div id="dropdown">
  <div id="ddcontents" style="display: none;">
    <button onclick="fade()">Options</button>
    <button onclick="getSize()">Canvas Size</button>
    <button onclick="redraw()" disabled="true">Redraw</button>
  </div>
</div>
<canvas id="c" height="480" width="640">Your browser does not support HTML5.</canvas>
<div id="options" style="display: none">
 <div id="optcontent" style="display: none">
    <center><h1>Options</h1></center>       
    <div id="sound">
        <div>Volume:
            <form oninput="volumenumber.value = parseInt(volume.value)">
                <input type="range" name="volume" min="0" max="100" value="80" disabled="true">
                <input type="hidden" name="hello" value="%">
                <output name="volumenumber" for="volume">80</output>
            </form>
            Resolution:
            <select id="resolution">
                <option value="480p">480x640</option>
                <option value="720p">720x1280</option>
            </select>
        </div>
    </div>
    <div id="closeoptions">
        <button onclick="apply()">Apply</button>
        </div>
    </div>
</div>

</div>

<script src="options.js"></script>
</body>
</html> 
```

对于 JS：

```
var c = document.getElementById('c');
var ctx=c.getContext("2d");
var img=new Image();
var w = this.c.clientWidth; // stores the width for later use
var h = this.c.clientHeight;
this.c.width = w;
this.c.height = h;
var cwidth = c.width;
var cheight = c.height;

img.onload = function(){
ctx.drawImage(img,w/2 - 14,h/2 - 19);
};
img.src="image_preview.png";

function apply()
{
var reso = document.getElementById("resolution");
var resol = reso.options[reso.selectedIndex].value;
//alert(resol)
if (resol == "720p")
 {
    //alert("You changed to 720p");
    h = 720;
    w = 1280;
    cheight = 720;
    cwidth = 1280;
 }
else if (resol == "480p")
 {
    //alert("You changed to 480p");
    h = 480;
    w = 640;
    cheight = 480;
    cheight = 640;
 }
getSize();
redraw();
}

function redraw()
{
ctx.drawImage(img,w/2 - 14,h/2 - 19);
img.src="image_preview.png";
}

function getSize()
{
alert(h + "x" + w);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T18:11:18.330

使用画布时，您必须确保其内部结构具有与呈现 html 区域相同的大小。

你可以这样做：

```
this.canvas.width = this.canvas.clientWidth;
this.canvas.height = this.canvas.clientHeight; 
```

通常我也会为我的渲染计算存储这些尺寸：

```
var w = this.canvas.clientWidth; // stores the width for later use
var h = this.canvas.clientHeight;
this.canvas.width = w;
this.canvas.height = h; 
```

编辑：要更改元素大小，请在先例代码之前执行此类操作：

```
$('#mycanvas').width(newWidthInPx); 
```

# oracle11g - Oracle 无法从 LONG 数据类型转换为 CLOB 数据类型（数据类型不一致错误）

> ID：12010902
> 
> 赞同：3
> 
> 时间：2012-08-17T18:01:38.733
> 
> 标签：oracle11g, long-integer, clob

Oracle 11g 在尝试将 long 数据类型转换为 clob 时出现以下错误。我尝试：`select to_lob(long_col_name) from table1.` 我得到：

```
[Error] Execution (1: 39): ORA-00932: inconsistent datatypes: expected - got LONG 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T18:22:08.300

在同事的帮助下在这里找到了答案：http: [//docs.oracle.com/cd/B19306_01/server.102/b14200/functions185.htm](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions185.htm) 但不知道为什么会有这个限制

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-16T09:22:30.267

您只能将此函数应用于 LONG 或 LONG RAW 列，并且只能应用于 INSERT 语句中子查询的选择列表中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-26T14:04:33.647

我建议这样的解决方法，希望这对某人有所帮助。

```
 SELECT substr(Y.longtoclob,
          43 + length('ALIASLONG'),
          DBMS_LOB.GETLENGTH(Y.longtoclob) -
          2 * (32 + length('ALIASLONG'))) longtoclob
  from dual,
   (select (dbms_xmlgen.getxml('SELECT t.column_long ALIASLONG 
  FROM TABLE_LONG_CLOB t WHERE t.id = 2')) longtoclob
      from dual) Y where DBMS_LOB.GETLENGTH(Y.longtoclob) > 0 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T20:30:18.003

您不能直接将 LONG 提取到 LOB。您可能想先将其转换为 VARCHAR2

# html - CSS - 带边框的 UL 内联 LI 改变块 (v) 内联？

> ID：12010903
> 
> 赞同：0
> 
> 时间：2012-08-17T18:01:40.970
> 
> 标签：html, css, html-lists

我很困惑...所以我在容器内有一个 UL，似乎当我在 UL 上方更改 DIV 时，它会影响 UL 之后的流量...发生了什么？

DIV 是块元素，对吧？和 UL 一样，对吧？

所以在这个例子中，如果你删除“标题”DIV，它会改变 H1 元素在 UL 之后的显示方式......谁能帮助告诉我为什么？

我在IE8...

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Layout and CSS testing</title>
<style type="text/css">
    body {
        margin: 0px;
        padding: 0px;
        background-color: blue;
    }
    .container {
        margin-left: auto;
        margin-right: auto;
        width: 600px;
        background-color: green;
    }
    .navMenu {
        list-style-type: none;
        margin: 0px;
        padding: 0px;
        background-color: red;
    }
    .navMenu li {
        display:inline;
        float: left;
    }
</style>
</head>
<body>
<div class="container">
    <div class="header">
        <img src="images/picture.gif" width="600" height="100" id="headerpic" border="0" />
    </div>
    <ul class="navMenu">
        <li><a href="#">Home</a></li>
        <li><a href="#">Next</a></li>
        <li><a href="#">Last</a></li>
    </ul>
    <h1>First Header</h1>
    <h2>Second header</h2>
    <p>This is a paragraph</p>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T18:17:57.403

`<h1>`受到 navMenu 浮动的影响，请尝试在`<div class="clearBoth"></div>`关闭`</ul>`等之间添加一个`<h1>`：

html

```
</ul>
<div class="clearBoth"></div>
<h1>First Header</h1> 
```

css

```
.clearBoth{
   clear:both;
} 
```

# linux - 定义多个 struct machine_desc 结构

> ID：12010905
> 
> 赞同：0
> 
> 时间：2012-08-16T13:00:12.617
> 
> 标签：linux, kernel, embedded

我想用一个嵌入式 Linux 内核支持两个类似的硬件平台。内核是否支持多种`struct machine_desc`结构？这种结构的实例通常使用板的 C 定义文件中的`MACHINE_START`和`MACHINE_END`宏来定义。

有一种机制可以将`MACH_TYPE`引导加载程序传递给内核，因此内核可以支持多台机器似乎是有道理的。有什么特别需要做的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T14:58:31.817

我花了一些时间查看内核代码（版本 2.6.33），ARM 架构支持同一内核中的多台机器。但是我不确定其他架构是否可以。这是它的工作原理

1.  对于内核要支持的每一种板卡类型，都`CONFIG_MACH_TYPE_*`需要在配置文件中设置相应的值。构建后，内核将根据源代码中包含的[mach-types版本生成所有机器宏。](http://www.arm.linux.org.uk/developer/machines/download.php)机器定义的源代码也将被编译到内核中。
2.  `r1`启动时，引导加载程序需要在启动内核之前将相应的机器类型编号（即 mach-types 的最后一列中的编号）放入寄存器中。
3.  在初始化期间，内核将机器类型号从寄存器`r1`传递到`__lookup_machine_type`以查找机器定义并初始化板。

# liferay - 获取速度列表中的项目数

> ID：12010912
> 
> 赞同：4
> 
> 时间：2012-08-17T18:02:03.880
> 
> 标签：liferay, velocity, vtl

我正在为 Liferay 站点创建一组自定义模板和结构。

一种结构提供了一个可重复的部分，然后它的匹配模板对其进行迭代。

但是，出于样式原因，我需要知道实际存在多少可重复部分的实例，并且在循环*之前我需要知道。*

所以，模板代码是这样的：

```
#foreach($thisChunk in $chunk.getSiblings())
    [emit some HTML]
#end 
```

我想在 foreach*之前*做一些条件逻辑，并根据 $chunk 的数量在包含元素上发出不同的 CSS 类名。

任何想法如何访问兄弟姐妹的数量而不先遍历它们？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-17T18:44:33.367

简单的：`$chunk.getSiblings().size()`

如何发现？它是一个普通的旧 Java 对象（在我的快速测试中是 java.util.ArrayList）。当您只是暂时调试您的模板`$chunk.getSiblings().getClass().getName()`然后继续使用该类的接口时，您可以发现这一点。

# html - sIFR3 r437 字体生成器/r437 更好吗？

> ID：12010920
> 
> 赞同：1
> 
> 时间：2012-08-17T18:02:49.190
> 
> 标签：html, css, sifr, sifr3

因此，由于我在 sIFR3 r436 中遇到了 sIFR3-mousescroll 问题的重大问题，因此我想了解该问题是否已在最新更新中得到解决。但问题是新版本告诉我我使用的 *.swf 只与 r436 兼容。我使用 sifrgenerator.com 来创建我的字体。是否有更新的转换器或其他方式来转换我的 .ttfs？

哦，如果有人能告诉我新的 sIFR 更新是否解决了滚动问题，那就太好了！

谢谢！

# vba - Excel 宏仅从今天创建的文件中读取输入

> ID：12010921
> 
> 赞同：1
> 
> 时间：2012-08-17T18:02:55.477
> 
> 标签：vba, excel

我有一个以 txt 格式导出每日报告的应用程序。我有一个宏，可以从这些报告中提取某些数据行并将它们放入输出 xls 文件中。我的宏的输入目录目前是一个单独的文件夹，我手动将今天的报告移动到该文件夹​​中。

我希望我的宏能够从默认报告文件夹中读取，并且只能读取使用今天日期创建的文件。

报告文件的命名约定如下： 1101_16_16_AppServiceUser_YYYYMMDDhhmmssXXX.txt 不确定文件名的最后 3 位数字代表什么，但它们始终是数字。

帮助？

哇，真快！谢谢...第一次使用stackoverflow。我想我应该包括提取数据并将其转储到 excel 的代码......这里是：

```
Sub PullLinesFromEPremisReport()
Dim FileName, PathN, InputLn As String
Dim SearchFor1, SearchFor2, OutpFile As String
Dim StringLen1, StringLen2 As Integer
Dim colFiles As New Collection
Dim bridgekey As String

PathO = "C:\Documents and Settings\GROMERO\Desktop\CM reconciliation\output\"
PathN = "C:\Documents and Settings\GROMERO\Desktop\CM reconciliation\input\"

FileName = Dir(PathN)

While FileName <> ""
    colFiles.Add (FileName)
    FileName = Dir

Wend

SearchFor1 = "BRIDGE KEY"

StringLen1 = Len(SearchFor1)

OutpFile = "RESULTS.xls"
Open PathO & OutpFile For Output As #2

For Each Item In colFiles
    Open PathN & Item For Input As #1
        Do Until EOF(1) = True
               Line Input #1, InputLn
               If (Left(LTrim$(InputLn), StringLen1) = SearchFor1) Then
                    bridgekey = InputLn
           End If

    Loop

Close #1
Next Item

Close #2
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T18:15:10.920

有两种方法可以做到这一点。假设您使用的是`File`通过`FileSystemObject`.

在字符串中`Instr`进行`file.Name`查找。`Format(Date, "YYYYMMDD")`

或者使用更简单的方法循环遍历文件并在循环中执行以下操作：

```
If File.DateCreate >= Date Then
    'Do something
end if 
```

`File`用于循环文件的实际变量在哪里。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T18:30:06.480

丹尼尔的回答是正确的，但使用 FileSystemObject 需要几个步骤：

确保您参考了“Microsoft Scripting Runtime”： ![在此处输入图像描述](../Images/50d3c856546865d38b358486ad0460a5.png) ![在此处输入图像描述](../Images/5368af007c5501186ae09cc7bdbe3a71.png)

然后，遍历目录中的文件：

```
Sub WorkOnTodaysReports()

'the vars you'll need
Dim fso As New FileSystemObject
Dim fldr As Folder
Dim fls As Files
Dim fl As File

Set fldr = fso.GetFolder("C:\Reports")
Set fls = fldr.Files

For Each fl In fls

    'InStr returns the position of the substring, or 0 if not found
    '    EDIT: you can explicitly use the reliable parts of your file name
    '    to avoid false positives
    If InStr(1, fl.Name, "AppServiceUser_" & Format(Now, "YYYYMMDD")) > 0 Then

        'Do your processing

    End If

Next fl

End Sub 
```

编辑：所以我*认为*，从您发布的代码中，您可以根据需要发送`PathN`到主 Reports 文件夹，然后像这样修改您的`While`语句：

```
While FileName <> ""

    If InStr(1, FileName, "AppServiceUser_" & Format(Now, "YYYYMMDD")) > 0 Then

        colFiles.Add (FileName)

    End If

    FileName = Dir

Wend 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T18:59:22.500

```
If fileName like "*AppServiceUser_" & Format(Now, "YYYYMMDD") & _
                                              "#########.txt" Then
    'good to go
End If 
```

# windows-8 - WinJS 中的 WebAuthenticationBroker 不接受长度超过 2k 的令牌

> ID：12010924
> 
> 赞同：0
> 
> 时间：2012-08-17T18:03:01.843
> 
> 标签：windows-8, windows-runtime, winjs

我们正在尝试在使用 ACS 作为提供程序的 WinJS 应用程序中使用 WebAuthenticationBroker。

问题是我们的 SWT 令牌有点大，它似乎比 2K 长，因此超过了 URI 的最大长度。谁能告诉我有没有办法将大令牌返回给 WebAuthenticationBroker ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T19:48:43.833

由于 URI 的最大长度为 2048 个字符，因此您需要找到一种方法将 URL 减少到令牌可以容纳 2048 个字符的程度。

# javascript - Javascript将屏幕宽度的最后倍数增加600

> ID：12010929
> 
> 赞同：0
> 
> 时间：2012-08-17T18:03:14.637
> 
> 标签：javascript, math

我有一个客户坚持使用两个图像作为他们的背景图像，其中第一个图块是屏幕的宽度，然后第二个图块在最右边淡出。客户坚持使用最右侧的淡出来完成，所以它看起来并不奇怪。

他的平铺背景图片是 600px 宽，这是斑马纹！所以必须排队。

所以为了让最后一个图像与模式对齐，我必须以某种方式使用 JS 告诉它将最后一个 Div 放置在距屏幕右侧最远的 600px 倍数处。我从右边得到了 div 的定位，我在 JS 中无法得到的是计算左边的哪个像素是 600 的最远倍数。

我在这里绞尽脑汁，无法弄清楚，如何从一个大数字中计算出 600 的最后一个倍数是多少。

有任何想法吗？

因此，如果屏幕从左侧到滚动条的宽度为 1235，则 600 的最远倍数是 600 :)

但是如果屏幕是 2564 宽，那么 600 的最远倍数将是 1800。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T18:07:19.167

首先除以您想要的倍数，然后`floor`或`ceil`根据您的需要，然后再次乘以该数字。这将为您提供给定数字的下方（分别上方）最接近的倍数。

然而，我个人做了一些与此没有太大不同的事情。我有一个视差滚动背景效果，在屏幕的两侧我有一个从透明到纯色的渐变，以便在背景到达屏幕边缘之前淡出背景。只需在屏幕一侧添加带有渐变的背景图像即可完成，无需计算。

# iphone - 写入文件而不覆盖 ObjC

> ID：12010930
> 
> 赞同：3
> 
> 时间：2012-08-17T18:03:24.193
> 
> 标签：iphone, objective-c, ios

我想将文本写入文件，但在搜索解决方案时，我到处都发现“read-append-write”，但该文件对于 iOS 设备的内存来说太大了，它会冻结并重新启动。有没有其他解决方案可以做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-17T18:13:34.773

您可以使用`NSFileHandle`该类，以便不必将整个文件读入内存（顺便说一句，这对任何文件都是不好的做法！）：

```
NSFileHandle *fh = [NSFileHandle fileHandleForWritingAtPath:@"/path/to/file.ext"];
[fh seekToEndOfFile];

NSData *data = // obtain an NSData somehow
[fh writeData:data];
[fh closeFile]; 
```

# android - Android：以编程方式在 3G 和 GPRS 之间切换？

> ID：12010956
> 
> 赞同：0
> 
> 时间：2012-08-17T18:05:23.803
> 
> 标签：android, 3g, gprs, network-security, android-permissions

有没有办法从 3G 数据切换到 GPRS 并返回 prorammaticaly。假设没有涉及 wifi ..

或者有没有办法找出天气电话使用 3g 或 GPRS？

3G 启用和禁用是否可用手机设置中的无线和网络通信...有没有办法以编程方式穿越那里将 3G 切换到 GPRS？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T18:24:42.073

不是没有根电话，对不起。

# java - 什么 Eclipse IDE 支持 JSF 2.0？

> ID：12010960
> 
> 赞同：0
> 
> 时间：2012-08-17T18:05:35.750
> 
> 标签：java, jsf, jsf-2

我下载了 Eclipse Galileo 和 Juno Eclipse（Java EE 开发人员的 Eclipse IDE），但我无法运行我的 JSF2 项目。我已经尝试将 Project Facets/JavaServer Faces 更改为 2.0，但不允许更改。什么 Eclipse IDE 支持 JSF 2.0？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T18:11:20.730

我正在使用 Eclipse 靛蓝。它对我来说工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T18:06:36.583

对于 JSF 2.0，将您的 Eclipse 升级到 Helios (v3.6) 版本，它完全支持 Java EE 6 支持，包括 JSF 2.0。

请参阅：[Eclipse IDE 是否支持 JSF 2.0？](https://stackoverflow.com/questions/2769880/does-the-eclipse-ide-support-jsf-2-0)

你可以相对快速地谷歌这个答案。

# html - 每页多个 HTML 表单。Tabbing 从一个表格跳到另一个表格。为什么？

> ID：12010963
> 
> 赞同：0
> 
> 时间：2012-08-17T18:05:44.407
> 
> 标签：html, forms

我在一个页面上有多个 html 表单，并注意到如果用户在表单元素之间切换，他们最终也会在我不想发生的表单之间切换。

我已阅读有关此处未使用的表单的答案： [一个 HTML 页面上的多个表单：如何将制表符限制为单个表单？](https://stackoverflow.com/questions/5484496/multiple-forms-on-one-html-page-how-to-restrict-tabbing-to-a-single-form)

我想知道现在是否有更好的方法可以将表单元素在浏览器中有意地组合在一起，以便制表符仅在同一表单内的元素之间循环。有人会认为使用表单标签就足够了，但显然这超出了我们都知道和喜爱的浏览器供应商的考虑范围。

编辑：这是针对 webapp 而不是桌面网站。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-24T00:20:30.007

您可能已经找到了解决方案，但希望它能对其他人有所帮助。

我有类似的问题，并创建了限制 TAB 影响的字段的微型 jQueryUI 插件。你简单地使用它：

```
$(".someGroup").tabGuard(); 
```

这将使选项卡遍历`.someGroup`包装器内的字段。这样，您可以对页面上的各种表单进行分组，如果有意义，焦点将继续迭代 TAB 或 Shift+TAB。在这里找到它：

[http://tomaszegiert.seowebsolutions.com.au/tabguard/index.htm](http://tomaszegiert.seowebsolutions.com.au/tabguard/index.htm)

我希望有人会发现它有用。

# javascript - 使用 JCarousel 改变高度

> ID：12010965
> 
> 赞同：0
> 
> 时间：2012-08-17T18:05:54.163
> 
> 标签：javascript, jquery, jcarousel

我修改了灵活的示例。我改变了高度，但是图像被切断了。我不确定为什么会这样。谁能帮我这个？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us">
<head>
<title>jCarousel Examples</title>
<link href="../style.css" rel="stylesheet" type="text/css" />
<!--
  jQuery library
-->
<script type="text/javascript" src="../lib/jquery-1.4.2.min.js"></script>
<!--
  jCarousel library
-->
<script type="text/javascript" src="../lib/jquery.jcarousel.min.js"></script>
<!--
  jCarousel skin stylesheet
-->
<link rel="stylesheet" type="text/css" href="../skins/tango/skin.css" />

<style type="text/css">

/**
 * Overwrite for having a carousel with dynamic width.
 */
.jcarousel-skin-tango .jcarousel-container-horizontal {
    width: 85%;
}

.jcarousel-skin-tango .jcarousel-clip-horizontal {
    width: 100%;
    height:300px;

}

</style>

<script type="text/javascript">

jQuery(document).ready(function() {
    jQuery('#mycarousel').jcarousel({
        visible: 4
    });
});

</script>

</head>
<body>
<div id="wrap">
  <h1>jCarousel</h1>
  <h2>Riding carousels with jQuery</h2>

  <h3>Flexible carousel</h3>
  <p>
    This example shows a carousel with flexible item width. In this case, always
      4 items are visible (resize the browser window to see what happens).
  </p>

  <ul id="mycarousel" class="jcarousel-skin-tango">
    <li><img src="http://static.flickr.com/66/199481236_dc98b5abb3_s.jpg" width="175" height="375" alt="" /></li>
    <li><img src="http://static.flickr.com/75/199481072_b4a0d09597_s.jpg" width="175" height="375" alt="" /></li>
    <li><img src="http://static.flickr.com/57/199481087_33ae73a8de_s.jpg" width="175" height="375" alt="" /></li>
    <li><img src="http://static.flickr.com/77/199481108_4359e6b971_s.jpg" width="175" height="375" alt="" /></li>
    <li><img src="http://static.flickr.com/58/199481143_3c148d9dd3_s.jpg" width="175" height="375" /></li>
    <li><img src="http://static.flickr.com/72/199481203_ad4cdcf109_s.jpg" width="175" height="375" /></li>
    <li><img src="http://static.flickr.com/58/199481218_264ce20da0_s.jpg" width="175" height="375" alt="" /></li>
    <li><img src="http://static.flickr.com/69/199481255_fdfe885f87_s.jpg" width="175" height="375" alt="" /></li>
    <li><img src="http://static.flickr.com/60/199480111_87d4cb3e38_s.jpg" width="175" height="375" alt="" /></li>
    <li><img src="http://static.flickr.com/70/229228324_08223b70fa_s.jpg" width="175" height="375" alt="" /></li>
  </ul>

</div>
</body>
</html> 
```

这是发生的事情：

![在此处输入图像描述](../Images/651a1ba05624466c4a4a462e3b9d84ab.png)

如您所见，图像被截断。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T18:12:09.157

将您的 LI 设置为您想要的高度和宽度。jcoursel 需要这个，否则它不会正确循环。

```
#mycarousel li { height: 375px; width: 175px;} 
```

# jquery - 使用 jquery 重新加载 div

> ID：12010969
> 
> 赞同：0
> 
> 时间：2012-08-17T18:06:25.677
> 
> 标签：jquery

我有一个问题：在我的 div 内的 PHP 页面中，列出了合作伙伴详细信息列表，当我通过 jquery 添加另一个合作伙伴时，我需要将该合作伙伴也显示到上述列表中，如果添加成功，我们需要重新加载。 .

```
<?php for($i=0;$i<$partnerCount;$i++){ ?>
<tr>
    <td><input type='checkbox' id='<?php echo $partnerData[$i]['PARTY_RELATIONSHIP_ID'];?>' name='party_relation[]'></td>
    <td><?php echo $partnerData[$i]['partnerCode'];?></td>
    <td><?php echo $partnerData[$i]['partnerName'];?></td>
    <td><?php echo $partnerData[$i]['PARTY_ROLE_NAME'];?></td>
    <td><?php echo $partnerData[$i]['phone'];?></td>
    <td><?php echo $partnerData[$i]['address1'];?></td>
    <td><?php echo $partnerData[$i]['address2'];?></td>
    <td><?php echo $partnerData[$i]['city'];?></td>
    <td><?php echo $partnerData[$i]['state'];?></td>
    <td><?php echo $partnerData[$i]['zip'];?></td>
</tr>
<?php } ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T18:11:40.910

如果没有客户方面的东西，就不可能告诉你如何做到这一点，但我想你可以做类似的事情：

```
PHP:
<div id="partners">
    <?php include("TheFileYouShowAbove.php") ?>
</div>

JS:

//Callback from the ajax request where you add a new user
function(data){
    if(data == "success") //This has to be put out by your PHP script
        $("#partners").load("TheFileYouShowAbove.php");
} 
```

# java - 春季方面警告中的 AOP

> ID：12010970
> 
> 赞同：2
> 
> 时间：2012-08-17T18:06:28.293
> 
> 标签：java, xml, spring, aop

我开始使用 spring 框架 3.1.2 学习 AOP。但我有麻烦。在`Beans.xml`上下文文件中我写道：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:aop="http://www.springframework.org/schema/aop"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd 
    http://www.springframework.org/schema/aop 
    http://www.springframework.org/schema/aop/spring-aop-3.0.xsd ">

    <bean id = "audience" class="com.MySpring.Audience"></bean>

    <aop:config>
        <aop:aspect ref="audience">
            <aop:pointcut id="performance" expression="execution(* com.MySpring.Performer.perform(..))"/>

            <aop:before pointcut-ref="performance" method="seatDown"/>
            <aop:before pointcut-ref="performance" method="turnOffPhone"/>
            <aop:after-returning pointcut-ref="performance" method="applauz"/>
            <aop:after-throwing pointcut-ref="performance" method="demandRefund"/>

        </aop:aspect>
    </aop:config>

</beans> 
```

和Java类

```
public class AOPTest {

    /**
     * @param args
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub
        ApplicationContext context = new ClassPathXmlApplicationContext(
                "Beans.xml");

    }

}

// ///
class Audience {

    public void seatDown() {
        out.println("Seat down");
    }

    public void turnOffPhone() {
        out.println("Turn Off Phone");

    }

    public void applauz() {

        out.println("Aplauz");
    }

    public void demandRefund() {
        out.println("We have money back");
    }

}
////
interface Performer{
    void perform();
} 
```

但在错误控制台中我看到：

`Description Resource Path Location Type Error occured processing XML 'class path resource [org/aopalliance/aop/Advice.class] cannot be opened because it does not exist'. See Error Log for more details Beans.xml /AnnotationsWiring/src line 11 Spring Beans Problem` 第二个错误：

`Description Resource Path Location Type Error occured processing XML 'org/springframework/aop/aspectj/AspectJMethodBeforeAdvice'. See Error Log for more details Beans.xml /AOP/src line 12 Spring Beans Problem`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T08:10:54.163

我猜你正在使用 spring in action 中的示例来学习 spring。实际上，您缺少一个`com.springsource.org.apoalliance.jar`文件，该文件未包含在其中`org.springframework.aop.jar`（尽管我不知道为什么）。

请在以下网址下载：http: [//sourceforge.net/projects/aopalliance/files/aopalliance/](http://sourceforge.net/projects/aopalliance/files/aopalliance/)

你有，`Caused by: java.lang.ClassNotFoundException: org.aopalliance.aop.Advice`因为你没有将 jar 包含到你的类路径中。

# ruby - 在 Ruby 的 .each 循环中读取文件时移动到文件的最后一行

> ID：12010986
> 
> 赞同：3
> 
> 时间：2012-08-17T18:07:40.903
> 
> 标签：ruby, file

我正在读取一个可以包含任意行数的文件。

我只需要保存前 1000 个左右，作为变量“ `recordsToParse`”传入。

如果我达到我的 1000 行限制或任何设置，我需要将预告片信息保存在文件中以进行验证`total_records`等`total_amount`。

所以，我需要一种方法来将我的“指针”从我在文件中的位置移动到最后一行，然后再运行一次。

```
file = File.open(file_name)

parsed_file_rows = Array.new
successful_records, failed_records = 0, 0
file_contract = file_contract['File_Contract']
output_file_name = file_name.gsub(/.TXT|.txt|.dat|.DAT/,'')

file.each do |line|
  line.chomp!
  line_contract = determine_row_type(file_contract, line)

  if line_contract
    parsed_row = parse_row_by_contract(line_contract, line)
    parsed_file_rows << parsed_row
    successful_records += 1
  else
    failed_records += 1
  end

  if (not recordsToParse.nil?)
    if successful_records > recordsToParse
      # move "pointer" to last line and go through loop once more
      #break;
    end
  end

end
store_parsed_file('Parsed_File',"#{output_file_name}_parsed", parsed_file_rows)
[successful_records, failed_records] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T18:40:57.133

使用`IO.seek`with`IO::SEEK_END`将指针移动到文件末尾，然后向上移动到最后一个 CR，然后你就有了最后一行。

仅当文件非常大时才值得这样做，否则只需跟随`file.each do |line|`到最后一行，或者您可以像这样阅读最后一行`IO.readlines("file.txt")[-1]`。

最简单的解决方案是使用像 elif 这样的 gem

```
require "elif"

lastline = Elif.open("bigfile.txt") { |f| f.gets } 
```

毫无疑问，它会使用 seek 快速读取您的最后一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T21:19:15.730

这是我利用操作系统`head`和`tail`命令的时候之一，使用类似的东西：

```
head = `head -#{ records_to_parse } #{ file_to_read }`.split("\n")
tail = `tail -1 #{ file_to_read }

head.pop if (head[-1] == tail.chomp) 
```

然后用类似的东西写出来：

```
File.open(new_file_to_write, 'w') do |fo|
  fo.puts head, tail
end 
```

# java - ExecutorService 和 CountDownLatch 的线程安全

> ID：12010991
> 
> 赞同：0
> 
> 时间：2012-08-17T18:08:23.677
> 
> 标签：java, multithreading

我有循环，我在哪里下载图像，我需要加载例如 10 个图像并将它们合并到一个图像中。在我的兴趣中，将加载哪些图像。我就是这样做的。我有`executor`限制线程数，并且我有`CountDownLatch`障碍等待所有图像被加载。

```
CountDownLatch barrier = new CountDownLatch(images.size());
private static ExecutorService executorService = Executors.newFixedThreadPool(MAX_THREAD_POOL);

for (Image image : images) {
    executorService.execute(new ImageRunnable(image, barrier));
}
    barrier.await(); 
```

在`ImageRunnable`我下载这样的图像。来自谷歌静态地图。

```
String url ="my url"
try {
    URL target = new URL(url);
    ImageIO.read(target);
    barrier.countDown();
    //exaggerated logic
} catch (IOException e) {
    System.out.println("Can not load image, " + e);
} 
```

其他人对我说，当所有线程`executor`都忙并且我的算法永远不会结束时，我会遇到这种情况，因为他会等到所有线程都得到`barrier.await()`点（死锁）。如何对我说它会在`ImageIO.read(target)`调用时发生并且连接将建立但 HTTP 会话永远不会关闭（来自服务器的响应不回来）。这会发生吗？我认为在这种情况下我会遇到一些异常并且坏线程会被中断。正是在我开始循环时发生了这种情况，但在第三张图像上，我通过防火墙关闭了互联网连接。在输出时，我得到损坏的图像，例如网络已关闭并且图像未加载到结束。我错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T18:19:28.693

担心的是您可能会抛出异常并且永远不会倒计时您的闩锁。

我会考虑这样做：

```
String url ="my url"
try {
    URL target = new URL(url);
    ImageIO.read(target);
} catch (IOException e) {
    System.out.println("Can not load image, " + e);
    throw e;
} finally {
    barrier.countDown();
} 
```

抛出异常让世界知道你遇到了问题并且可能无法完成（你知道你无法从中恢复），但至少让障碍降低。我宁愿处理异常而不是死锁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T18:45:23.113

只是为了充实我的评论：

```
CompletionService<Image> service = new ExecutorCompletionService<Image>(
  Executors.newFixedThreadPool(nThreads));
for (Image image : images) {
  service.submit(new ImageRunnable(image), image);
}
try {
  for (int i = 0; i < images.size(); i++) {
    service.take();
  }
} catch (InterruptedException e) {
  // someone wants this thread to cancel peacefully; either exit the thread
  // or at a bare minimum do this to pass the interruption up
  Thread.currentThread().interrupt();
} 
```

那里。就是这样。

如果您担心在 HTTP 连接上强制执行超时，我快速而肮脏的研究建议类似于...

```
URL target = // whatever;
URLConnection connection = target.openConnection();
connection.setReadTimeout(timeoutInMilliseconds);
InputStream stream;
try {
  stream = connection.getInputStream();
  return ImageIO.read(stream);
} finally {
  if (stream != null) { stream.close(); } 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T18:22:54.243

除了按照*@corsiKa*`barrier.countDown()`的建议移动到`finally`块之外，请确保您的代码完成。在阅读和上设置一些超时：*`URL``await()`*

 *```
barrier.await(1, TimeUnit.MINUTES); 
```*

# jquery - 彩盒和谷歌分析

> ID：12010992
> 
> 赞同：2
> 
> 时间：2012-08-17T18:08:26.220
> 
> 标签：jquery, google-analytics, colorbox

我们有一个 wordpress 网站，我们希望在有人浏览上述文章的 wordpress 画廊时进行跟踪。现在我们正在使用

```
<script>
  $("a[rel='gallery1']").colorbox({onComplete:function()
  {_gaq.push(['_trackPageview', $(this).attr('href')]);}}); 
</script> 
```

它工作正常，但似乎只适用于最初的开放。任何想法如何跟踪“下一个”和“上一个”点击？我们已经联系了 Colorbox 的开发者，但也想在这里发布。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T02:56:49.823

这应该适用于“下一个”和“上一个”命中。我不确定在手动跟踪浏览量时使用相对 URL 的情况如何。我认为这不是问题，但使用`this.href`而不是可能会更好`$(this).attr('href')`，因为这会给出绝对 URL 而不是 href 属性的确切值。例如：

```
<a href='../../pic1.jpg'>1</a>
<script>
    // for http://example.com/dir1/dir2/page.html
    $('a').attr('href'); // returns '../../pic1.jpg'
    $('a')[0].href; // returns 'http://example.com/pic1.jpg'
</script> 
```

# php - 文件上传错误“应用程序/八位字节流”

> ID：12010993
> 
> 赞同：1
> 
> 时间：2012-08-17T18:08:33.640
> 
> 标签：php, file-upload, upload

我真的不太了解PHP。但无论如何，我无法使用以下 php 上传 .csv 文件。我已经解决了与 upload_max 大小相关的属性的问题。在我的本地运行良好，但在沙箱上运行良好。错误是“应用程序/八位字节流”。我该怎么办？

数据非常简单，以.csv格式存储

```
27589   16990   161.7000095 0.838494
27589   17067   161.7000095 0.838494
27820   17144   315.7000095 0.859458
27820   17221   315.7000095 0.859458
27820   17606   315.7000095 0.866033
27820   17683   315.7000095 0.866033 
```

错误输出：“--要加载的 CSV 文件：无效类型：应用程序/八位字节流”

```
<?php
ini_set('display_errors', 1); error_reporting(E_ALL);

// using upload at click from http://code.google.com/p/upload-at-click/
// FileData is the name for the input file

$file_result = "";
$file = $_FILES['Filedata'];

$allowedExtensions = array("csv", "txt");
$arrayVar = explode(".", $file["name"]);
$extension = end($arrayVar);

//commented out for strict standard error
//$extension = end(explode(".", $file["name"]));

function isAllowedExtension($fileName) {
    global $allowedExtensions;
    return in_array(end(explode(".", $fileName)), $allowedExtensions);
}

if($file["error"] > 0){
    echo "failure to upload the file >>> ". "Error code: ".$file["error"]."<br>";
}else{
    //echo " >>> CURRENT DIR: ".getcwd() . "\n";
    $workDir = getcwd();

    $dir = substr($workDir, 0, -10);
    $path = $file["name"];
    $newFileLoc = $dir.$path;

    $file_result.=
    "<br>     Upload: " . $file["name"] . "<br>" .
    "     Type: " . $file["type"] . "<br>" .
    "     Size: " . $file["size"] . "<br>" .
    "     file uploaded to: ".$newFileLoc."<br>";

    // txt - text/plain
    // rtf - application/msword
    // dat/obj - application/octet-stream
    // csv - application/vnd.ms-excel
    // maximum 200 MB file - 200,000,000 k

    if ($file["type"] == "application/vnd.ms-excel" || $file["type"] == "text/plain"){
        if( isAllowedExtension($file["name"]) )
        {
            if( $file["size"] < 200000000 )
            {
                move_uploaded_file($file["tmp_name"], $newFileLoc);
                echo "|".$path;//"filePath : " . $newFileLoc;
            }
            else
            {
                echo "Invalid file size: " . $file["size"] . "\n";   
            }
        }
        else 
        {   
            echo "Invalid extension: " . $file["name"]."\n";
        }
    }
    else
    {
        echo "Invalid type: " . $file["type"] . "\n";
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T18:17:22.560

尝试这样的最后一段代码，因为 $file['type'] 是由客户端设置的，而不是服务器。这种方式应该没问题。确保将文件上传到公众无法访问的位置。

```
<?php // txt - text/plain
// rtf - application/msword
// dat/obj - application/octet-stream
// csv - application/vnd.ms-excel
// maximum 200 MB file - 200,000,000 k

//if ($file["type"] == "application/vnd.ms-excel" || $file["type"] == "text/plain"){
    if( isAllowedExtension($file["name"]) )
    {
        if( $file["size"] < 200000000 )
        {
            //try to read the first line with a csv reader

             $handle = fopen( $file["tmp_name"], "r");
            if( $data = fgetcsv($handle)) !== false) {
             if( count( $data ) > 1 ){ //Set 1 to the number of fields - 1

               move_uploaded_file($file["tmp_name"], $newFileLoc);
               echo "|".$path;//"filePath : " . $newFileLoc;
             }
              else{
               echo "Error: Cannot load file, not a CSV file";   
             }

            }else{
             echo "Error: File not uploaded\n";  //should never happen  
            }
        }
        else
        {
            echo "Invalid file size: " . $file["size"] . "\n";   
        }
    }
    else 
    {   
        echo "Invalid extension: " . $file["name"]."\n";
    }
}
//else
//{
//    echo "Invalid type: " . $file["type"] . "\n";
//}
} 
```

# asp.net - jqGrid 无法在列名中呈现西班牙字符，但可以在其他控件中呈现

> ID：12010997
> 
> 赞同：0
> 
> 时间：2012-08-17T18:09:06.743
> 
> 标签：asp.net, asp.net-mvc, jqgrid

我正在使用 ASP.NET MVC 3。我对网格有以下配置：

```
grid.jqGrid({
        data: pages,
        datatype: 'json',
        emptyrecords: 'No hay proyectos cargados',
        colNames: ["Código", "Descripción", "Rev", "Cliente", "Tipo"],
        colModel: [
                 { name: 'Codigo', index: 'Codigo', width: 100 },
                 { name: 'Descripcion', index: 'Descripcion asc, Descripcion', width: 200 },
                 { name: 'Rev', index: 'Rev', width: 100, align: "right" },
                 { name: 'Cliente', index: 'Cliente', width: 200, align: "right" },
                 { name: 'Tipo', index: 'Tipo', width: 200, align: "right" }
               ],
        rowNum: 10,
        pager: '#dPager',
        sortname: 'Codigo',
        viewrecords: true,
        sortorder: "desc",
        beforeRequest: function() {
            if (pages.length === 0) {
                grid[0].p.page = 0;
            }
        },
        height: 'auto',
    }); 
```

列名“Código”和“Descriptción”显示一个奇怪的符号（一个黑色菱形，里面有一个白色问号）而不是“ó”字符。

供你参考：

*   视图中还有其他“ó”字符被渲染，这让我相信它与页面的编码无关（仅供参考，DOCTYPE 标记是出现在 _Layout.cshtml 中的标准）。
*   jqGrid 本身确实会在其他控件中呈现特殊的“ó”字符，*只要它们出现在 grid.locale-es.js 中*。因此，例如，“Page X of Y”的文字是“Página X de Y”，如果我将其更改为“óóóóóóóó X de Y”，它会正确呈现它。
*   例如，如果我将 emptyrecords 条目更改为“óóóóóó”，则会发生同样的问题。

任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T18:25:06.093

这可能是因为您将此脚本放置在一个 javascript 文件中，该文件没有与您的站点匹配的正确编码。

因此，例如，如果您的网站是 UTF-8，请确保您已使用 UTF-8 和 BOM 保存了 .js 文件。

*   在 Visual Studio 中打开 .js 文件并选择`File->Save As`
*   `Save`单击按钮旁边的向下箭头
*   选择`Save with Encoding ...`
*   从下拉列表中选择`Unicode (UTF-8 with signature) - Codepage 65001`：

![在此处输入图像描述](../Images/3ff2a60d2cd15c3e45c7ea9a6207de45.png)

# c# - FreeTextBox javascript 错误正在阻止我的 DropDownList 上的 PostBack

> ID：12010998
> 
> 赞同：0
> 
> 时间：2012-08-17T18:09:08.137
> 
> 标签：c#, javascript, asp.net, postback, freetextbox

我有一页上有 3 个[FreeTextBox](http://www.freetextbox.com/)控件。它们设置正确，我一直在正常使用它们，直到我需要添加一个将 PostBack 到服务器的 DropDownList 控件，但我惊讶地发现该`OnSelectedIndexChanged`事件永远不会触发。如果我要使用按钮或其他一些服务器端控件进行发布，那么会触发该事件。经过大量调试后，我发现每次在 DropDownList 控件上选择不同的内容时都会引发以下 Javascript 错误：

```
TypeError: FTB_API.MainContent_MainContent_FreeTextBox1 is undefined 
```

错误似乎很简单。Firebug 告诉我这个错误来自以下函数：

```
function WebForm_OnSubmit()
{
    FTB_API['MainContent_MainContent_FreeTextBox1'].StoreHtml();FTB_API['MainContent_MainContent_FreeTextBox2'].StoreHtml();FTB_API['MainContent_MainContent_FreeTextBox3'].StoreHtml();
    return true;
} 
```

我已经尝试了几件事但没有成功。当我从我的页面中删除 FreeTextBox 控件时，我有成功的 PostBacks。任何帮助，将不胜感激。谢谢。

**编辑 1**：这是我的一些标记

3 FreeTextBox 设置如下：

```
<FTB:FreeTextBox ID="FreeTextBox3" JavaScriptLocation="ExternalFile" ButtonImagesLocation="ExternalFile" ToolbarImagesLocation="ExternalFile" runat="server" EnableHtmlMode="true" /> 
```

我的下拉列表：

```
<asp:DropDownList ID="DropDownList1" runat="server" AppendDataBoundItems="true" AutoPostBack="true" OnSelectedIndexChanged="DropDownList1_SelectedIndexChanged">
</asp:DropDownList> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T18:23:11.880

在标记页面中设置下拉列表的属性 AutoPostBack = true。当您更改下拉元素并触发 OnSelectedIndexChanged 时，这将使帖子返回。

**例子 ：**

```
<asp:DropDownList id="drpList" runat="server" AutoPostBack="true" OnSelectedIndexChanged="event name" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T18:54:48.587

我在这个线程中找到了问题的答案：[Firefox 上的隐藏 FreeTextBox 错误](https://stackoverflow.com/questions/253490/hidden-freetextbox-bug-on-firefox)似乎由于某种原因，当控件不可见或被隐藏（我有选项卡）时，它的行为方式是这样的。答案有点像黑客，但它确实有效。感谢您的回答。

# doctrine-orm - Doctrine2 基实体类关联映射

> ID：12010999
> 
> 赞同：0
> 
> 时间：2012-08-17T18:09:13.737
> 
> 标签：doctrine-orm, model-associations, symfony-2.1

我有一个 Base 实体，它是子实体，例如：新闻、折扣、画廊等。

我想要实现的是，Base 类具有到 Image 实体的关联映射，因此它的所有子类都会自动加入 Image 类。

你能给我一些建议如何实现这一目标吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T17:20:21.500

每当您使用 Doctrine 进行继承时，您都需要遵循以下准则：

[http://doctrine-orm.readthedocs.org/en/2.0.x/reference/inheritance-mapping.html](http://doctrine-orm.readthedocs.org/en/2.0.x/reference/inheritance-mapping.html)