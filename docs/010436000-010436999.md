# StackOverflow 问答 10436000-10436999

# x86 - 为什么在没有它的处理器上报告支持超线程？

> ID：10436013
> 
> 赞同：9
> 
> 时间：2012-05-03T16:59:38.893
> 
> 标签：x86, intel, hyperthreading, cpuid

我正在尝试收集系统信息，并在 Intel Xeon E5420 上注意到以下内容：

执行后`CPUID(EAX=1)`，EDX[28] 被设置，表明支持超线程，尽管处理器在英特尔网站上被列为不支持超线程 ( [ark.intel.com](http://ark.intel.com/products/33927/Intel-Xeon-Processor-E5420-%2812M-Cache-2_50-GHz-1333-MHz-FSB%29) )

有人对此有解释吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-07-11T14:46:57.337

英特尔谈话中有一个半官方的解释[https://software.intel.com/en-us/articles/hyper-threading-technology-and-multi-core-processor-detection](https://software.intel.com/en-us/articles/hyper-threading-technology-and-multi-core-processor-detection)

基本上，在 Intel 在 Pentium 4 的最终版本中引入 SMT/超线程之后，他们创建了 Pentium D，它是多核被认为是超线程模型的演变，因为一个核心与另一个核心相比 SMT 单元具有更多的独立性。彼此，因此多核在相同线程数下的性能优于 SMT。因此，出于这个原因，他们使用相同的位来表示 SMT/超线程或多核，即多核被视为超线程的改进形式。您询问的 Intel Xeon E5420 是多核处理器，所以这就是设置该位的原因。

当然，一旦你可以在同一个包中同时拥有超线程和多核，有时需要将它们区分开来，例如因为你宁愿在一个未加载的核上而不是在另一个超线程半上安排一个新线程已经加载的核心。因此，为了描述组合的 SMT 和多核拓扑，最终引入了新的 cpuid 位（或者更确切地说是叶子）。这些用于查询处理器拓扑的最新 cpuid 功能是 EAX=0xB 叶。

顺便说一句，对于 2010 年及之后制造的处理器，您不应该使用旧英特尔演讲中给出的拓扑枚举算法，因为它会给出不正确/夸大的核心计数。[请改用https://software.intel.com/en-us/articles/intel-64-architecture-processor-topology-enumeration/](https://software.intel.com/en-us/articles/intel-64-architecture-processor-topology-enumeration/)中提供的更新方法。唉，这个较新的页面更加枯燥，例如不回答您提出的问题，而旧的谈话确实......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T05:26:10.863

这是根据英特尔开发人员手册对该位的定义：

> Max APIC IDs 保留字段有效。HTT 的值为 0 表示包中只有一个逻辑处理器，并且软件应假定仅保留一个 APIC ID。HTT 的值为 1 表示 CPUID.1.EBX[23:16]（此包中逻辑处理器的最大可寻址 ID 数）中的值对包有效。

在手册第 3A 卷的第 8 章中，它描述了如何正确检测硬件多线程。

这是一个链接：

[http://download.intel.com/products/processor/manual/325462.pdf](http://download.intel.com/products/processor/manual/325462.pdf)

# c# - 是否可以在服务器端获取 Facebook API 访问令牌？

> ID：10436015
> 
> 赞同：0
> 
> 时间：2012-05-03T16:59:46.010
> 
> 标签：c#, facebook, authentication, facebook-c#-sdk

我正在尝试使用 Facebook C# SDK [https://github.com/facebook-csharp-sdk将 Facebook 新闻提要集成到网站中](https://github.com/facebook-csharp-sdk)

```
var client = new FacebookClient("token");
dynamic me = client.Get("username/feed"); 
```

我无法找到在运行时生成访问令牌的任何示例。所有示例似乎都针对需要用户授权应用程序的客户端应用程序。

根据我目前所见，曾经有一种方法可以生成永久访问令牌（使用`offline_access`权限），但截至 2012 年 5 月 2 日，该方法已被弃用。

目前，我不确定这是否是受支持的方案。

是否有可能在没有用户参与的情况下完全使用服务器端代码获取 Facebook 新闻提要？

**编辑：**看起来可能有办法：[https](https://developers.facebook.com/roadmap/offline-access-removal/#extend_token) ://developers.facebook.com/roadmap/offline-access-removal/#extend_token 稍后再试并报告。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T19:58:57.283

不，你不能用用户名/密码做任何事情。用户必须将这些输入到 facebook 的登录 ui 并单击按钮以同意让您的代码执行它要求执行的任何操作。

# php - 上一个/下一个按钮？

> ID：10436017
> 
> 赞同：1
> 
> 时间：2012-05-03T16:59:54.077
> 
> 标签：php, mysql

我想为我拥有的论坛输入上一个和下一个按钮，因为在论坛变长后，它超过了背景图像并且看起来不太好！有谁知道一种简单的方法或者我可以查看上一个和下一个按钮的东西？我想要它，所以每页仅限于每页 5 个帖子或其他内容。

这是代码，如果它有帮助的话。如果这是一个愚蠢的问题，我很抱歉。

```
<?php 
$dbc=mysql_connect('host','user','password','database') or die(mysql_error());
mysql_select_db('database',$dbc) or die(mysql_error());
?>

View Posts <br>
<form method="get" action="view_forum.php">
  <label>Select Weather to Filter </label><br />
  <select name="weather">
    <option value="all">all</option>
    <option value="cloudy">Cloudy</option>
    <option value="sunny">Sunny</option>
    <option value="windy">Windy</option>
    <option value="snowy">Snowy</option>
    <option value="mixy">Wintery Mix</option>
    <option value="rainy">Rainy</option>
  </select>
  <input type="submit" value="view" />
</form>

<div id="view">
 <center><img src="images/forum.png" width="589" height="97"></center>
</div>  
  <div id="white">
    <div id="blue">
      <div id="grey">
       <div id="container">
<?php
$weather = mysql_real_escape_string( $_GET["weather"] ); // keep your input clean

if ( $weather == "all" ) {
  $sql = "SELECT * FROM stories ORDER BY id DESC";
} else {
  $sql = "SELECT * FROM stories WHERE weather = '$weather' ORDER BY id DESC";
}

$result = mysql_query( $sql ) or die( mysql_error() );

while ( $row = mysql_fetch_assoc( $result ) ) {

    echo "<div class=\"names\"> {$row['name']}<br /></div>";
    echo "<div class=\"weathers\">{$row['weather']}<br /></div>";
   echo "<div class=\"stories\">{$row['story']}<br /></div>";

        echo "<img src=\"images/line.png\" width='800' height='3'>";

         echo "<br />"; 
}

?>
</div>
</div>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T17:25:31.943

这很简单。您在请求中保留一个页面变量。如下所示

```
if (!isset($_GET['page'])) {
   $page = 1;
} else {
   $page = (int)$_GET['page'];
} 
```

在你的 SQL 语句中，你会放这样的东西，它使用 page 变量来调整查询限制：

```
$query = 'SELECT * FROM someTable WHERE 1 LIMIT ' . (($page - 1) * $recordsPerPage) . ' ' . $recordsPerPage; 
```

反正就是这样。现在对于您的上一个和下一个链接，您可以放置​​这样的内容，以便您可以增加/减少页面变量：

```
<? if ($page > 1) : ?>
   <a href="self.php?page=<?= $page - 1 ?>">Prev</a>
<? endif ?>
<? if ($page != $maxPages) : ?>
   <a href="self.php?page=<?= $page + 1 ?>">Next</a>
<? endif ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T17:19:00.830

你需要分页，在 MySQL 中你可以使用 TOP：

```
-- Fist 10 results:
SELECT * FROM stories ORDER BY id DESC TOP 10 

-- 10 results from the number 11 (0 is the first)
SELECT * FROM stories ORDER BY id DESC TOP 10,10

-- 10 results from the number 50
SELECT * FROM stories ORDER BY id DESC TOP 50,10 
```

要知道总结果，您可以使用 SQL_CALC_FOUND_ROWS：

```
SELECT SQL_CALC_FOUND_ROWS as total, stories.* FROM stories ORDER BY id DESC TOP 10 
```

从 PHP，您可以计算分页：

```
$page = isset($_GET['page']) ? (int) $_GET['page'] : 1;

if ($page < 1) $page = 1;

$sql = "SELECT SQL_CALC_FOUND_ROWS as total, stories.* FROM stories ORDER BY id DESC TOP " . ($page-1) .  ",10"; 
```

# mongodb - 将 Mongo 数据库移动到不同的驱动器：无法获取 lockfilepath 的锁

> ID：10436018
> 
> 赞同：1
> 
> 时间：2012-05-03T16:59:54.633
> 
> 标签：mongodb, unix, database

我正在将我的 mongo 数据移动到另一个驱动器。我要移动的所有数据都存储在 /data/db 中，我将其移动到 NAS（网络附加存储）。

第一步：

```
mongodump -d mydb -c mycollection -o nas/mongo-temp 
```

这在 mongo-temp/ 中创建了一个文件树，如下所示：

```
dump
`-- mydb
    `-- mycollection.bson

1 directory, 1 file 
```

然后我停止了 mongod 服务并创建了一个新的 /data/db 目录：

```
/etc/init.d/mongod stop
mkdir mongo-temp/data/db 
```

...并更改 /etc/mongodb.conf 中的 dbpath 行

```
dbpath=.../mongo-temp/data/db 
```

我使用`/etc/init.d/mongod start`.

当我尝试连接时：

```
mongo
MongoDB shell version: 1.6.4
Thu May  3 09:53:23 *** warning: spider monkey build without utf8 support.  consider rebuilding with utf8 support
connecting to: test
Thu May  3 09:53:24 Error: couldn't connect to server 127.0.0.1 (anon):1154
exception: connect failed 
```

我尝试使用该命令启动 mongod，`mongod --dbpath .../mongo-temp/data/db`但我收到一条错误消息：

```
Thu May  3 09:57:26 exception in initAndListen std::exception: Unable to acquire lock for lockfilepath: /home/dlpstats/nas-mnt/mongo-temp/data/db/mongod.lock 
```

删除锁定文件没有帮助。如果我在没有 --dbpath 的情况下运行 mongod 命令，则服务器可以正常启动，并且我可以对旧数据库进行查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T19:26:05.837

首先，您提到您使用 mongodump 填充新驱动器 - 这只是一种备份方法还是您打算将其用作新的数据库文件？这不是它的工作方式 - mongodump 输出与数据库文件不同 - 实际上它需要使用 mongoresore 重新导入。如果您直接复制数据文件，那么传输将是无缝的。

然后，除了 Wes 在他的回答中建议的权限之外，还有几件事需要检查：

1.  您已成功且完全关闭旧服务器 - 可能是错误报告的错误并且您得到它是因为它试图获取已经打开的端口
2.  根据 mongo shell 输出，您使用的是 1.6.4 版本，我猜您是从 Ubuntu 存储库安装的 11.04 或类似版本，这不是一个好的选择——此时 1.6 已经很旧了。使用 10gen 存储库 ( [http://www.mongodb.org/display/DOCS/Ubuntu+and+Debian+packages](http://www.mongodb.org/display/DOCS/Ubuntu+and+Debian+packages) ) 或下载二进制文件并获取更新的版本

最后但同样重要的是，当您手动启动 mongod 时，请确保所有参数都相同，例如端口。当您通过 mongo shell 连接时，请指定您启动 mongod 的端口 - 在遇到此类问题时不要依赖默认值，要明确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-10T13:32:59.620

我遇到了这个问题并发出以下命令解决了我的问题：

```
rm /var/lib/mongodb/mongod.lock 
```

然后重新启动`mongod`.

**但**我不确定这是否是一个好的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T17:27:01.423

检查 mongo-temp 的目录和父目录的权限。大概它以 mongodb 用户身份运行？

您需要在目录（和父目录）上执行权限才能在那里创建文件。对目录的执行权限允许您列出那里的文件，这是能够打开文件进行写入所必需的。

# css - CSS :checked - 改变背景

> ID：10436020
> 
> 赞同：3
> 
> 时间：2012-05-03T17:00:02.123
> 
> 标签：css, css-selectors

使用 CSS，是否可以根据是否检查 an来更改`background-color`整体的？`<tr>``<input type="checkbox">`

## 例子

```
<table>
 <!-- This is the row I want to change the background of... -->
 <tr>
  <td>
   <!-- ...when this is checked -->
   <input type="checkbox" name="cb1" id="cb1" />
  </td>
  <td>Something 1</td>
 </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T17:03:07.767

目前没有，没有。此功能已被指定（[请参阅`:has()`](http://dev.w3.org/csswg/selectors4/#relational)），但实际上在相当长的一段时间内它不会供公众使用。

```
 /* Only matches TRs that contain checked INPUTs */
 tr:has(input:checked) {
  background:red;
 } 
```

***注意：****提供的示例根据当前的编辑草案是有效的，但语法可能会发生变化，或者功能可能会在浏览器供应商开始实施之前完全删除。*

# java - 找不到类，即使它应该在类路径上

> ID：10436035
> 
> 赞同：3
> 
> 时间：2012-05-03T17:01:02.643
> 
> 标签：java, spring, tomcat, maven, noclassdeffounderror

当我关闭在 Tomcat 上运行的战争时出现此错误：

```
[2012-05-03 11:55:36,082] ERROR - org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroyBean(501) | Destroy method on bean with name 'threadPoolTaskExecutor' threw an exception
java.lang.NoClassDefFoundError: org/springframework/orm/jpa/EntityManagerFactoryUtils
    at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.postProcessBeforeDestruction(PersistenceAnnotationBeanPostProcessor.java:357)
    at org.springframework.beans.factory.support.DisposableBeanAdapter.destroy(DisposableBeanAdapter.java:193)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroyBean(DefaultSingletonBeanRegistry.java:498)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingleton(DefaultSingletonBeanRegistry.java:474)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingletons(DefaultSingletonBeanRegistry.java:442)
    at org.springframework.context.support.AbstractApplicationContext.destroyBeans(AbstractApplicationContext.java:1066)
    at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1040)
    at org.springframework.context.support.AbstractApplicationContext$1.run(AbstractApplicationContext.java:958)
Caused by: java.lang.ClassNotFoundException: org.springframework.orm.jpa.EntityManagerFactoryUtils
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1678)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1523)
    ... 8 more 
```

在我的 pom.xml 中，我有 spring-orm 3.1.1.RELEASE 作为依赖项。更奇怪的是，我可以进入作为 spring-orm 3.1.1.RELEASE 类的 PersistenceAnnotationBeanPostProcessor 类，但它找不到在同一个 jar 中的 EntityManagerFactoryUtils 类。我猜它一定与它是抽象的或静态的有关，但我不确定进一步研究这个问题的方向。看起来它真的应该可用。

有人对为什么会发生这种情况有想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T08:44:11.760

Indeed, it might me an exclusion issue (try to call mvn dependency:tree to sort this out).

Do you have the jar in your war ? Do you have another Spring jar in Tomcat libs ? This could be a classloader issue.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-30T08:25:11.710

我通过删除我的一个 Maven 模块中的冗余依赖项解决了同样的问题。我通过其他一些模块直接依赖和间接依赖，这导致了这种行为。

# matlab - 从集合中生成均匀随机数

> ID：10436040
> 
> 赞同：1
> 
> 时间：2012-05-03T17:01:11.660
> 
> 标签：matlab, random

我想知道是否有一个函数可以从 Matlab 中的一组数字中生成随机数？例如说我有集合 [-1 1]。如何从该集合中生成数字？我曾尝试使用 randi([-1,1]) 但这显然会生成数字 -1,0 和 1，我想统一生成没有 0 的数字，只包括 -1 和 1。我提前道歉如果这似乎是一个微不足道的问题，但我似乎找不到答案。

感谢您的任何帮助，您可以提供。

编辑：我为上述问题找到了一个简单的解决方案：(randi([0 1])*2) - 1。这只解决了这个问题，而不是从指定集合中生成数字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T17:09:55.997

那么，有没有一个函数可以从集合 1:2，或者一般来说，从集合 1:n 中均匀地生成整数，其中 n 是你的集合中的元素数？（是的）

如果上面的答案是肯定的，那么这些数字可以用作生成集的索引吗？（是的）

```
A = [-1 1];
n = numel(A);
A(ceil(rand*n)) 
```

它会随机且均匀地采样吗？（是的）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T17:03:45.680

生成 1 到 N 范围内的均匀随机整数（其中 N 是集合的大小）。然后用它来索引到集合中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T17:12:15.417

```
>> S = sign(rand(1,10) - .5); S(S ~= 0)

ans =

     1    -1     1     1    -1     1    -1    -1     1    -1 
```

这显然是专门针对您的特定示例的，但可以应用相同的一般概念。

编辑：这是一个更一般的例子：

```
>> Set = [1 10 100]

Set =

     1    10   100

>> Set(randi([1 3], 10, 1))

ans =

   100   100   100   100   100    10    10     1   100     1 
```

# c# - 使用 ConfigurationPropertyAttribute 避免重复属性名称 3 次

> ID：10436041
> 
> 赞同：2
> 
> 时间：2012-05-03T17:01:17.573
> 
> 标签：c#, .net, configuration, code-cleanup, system.configuration

在代码中重复`ConfigurationPropertyAttribute`三个名称真的很困扰我。
很容易错过拼写错误或复制/粘贴属性而忘记更新名称的一个实例。

声明一个常数只能解决其中一个问题。有没有更好的办法？

我尝试了反射，但枚举属性似乎更麻烦，更丑陋。

```
[ConfigurationProperty("port", DefaultValue = (int)0, IsRequired = false)]
[IntegerValidator(MinValue = 0, MaxValue = 8080, ExcludeRange = false)]
public int Port
{
    get
    {
        return (int)this["port"];
    }
    set
    {
        this["port"] = value;
    }
} 
```

我知道 DRY 只是一个原则，在现实世界中，原则必须让位于实用主义。但我敢肯定有人有更清洁的方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T18:27:49.173

如果需要，您可以对配置元素使用非声明性方法。可以在整个 Internet 上找到示例 - 特别是在[Unraveling the Mysteries of .NET 2.0 Configuration](http://www.codeproject.com/Articles/16466/Unraveling-the-Mysteries-of-NET-2-0-Configuration)中，示例同时显示了这两种方法。

```
class MyConfigurationElement : ConfigurationElement
{
    private static ConfigurationPropertyCollection _properties = new ConfigurationPropertyCollection();
    private static ConfigurationProperty _portProperty = new COnfigurationProperty("port", ..... ); // Will leave as example for you to add validator etc.

    static MyConfigurationElement()
    {
         _properties.Add(_portProperty);
    }

    protected override ConfigurationPropertyCollection Properties
    {
        get { return _properties; }
    }

    public int Port  
    {
        get
        {
            return (int)this[_portProperty];
        }
        set
        {
           this[_portProperty] = value;
        }
    }    
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T18:14:09.777

为什么使用常数不能解决所有三个问题？

例子：

```
class MyConfigurationElement : ConfigurationElement
{

    // Use public, private or internal, as you see fit.
    private const string PortName = "port";

    // Add something like this, if you also want to access the string value
    // and don't want to recompile dependend assemblies when changing the
    // string 'port' to something else.
    // public static readonly PortNameProperty = PortName;

    [ConfigurationProperty(PortName, DefaultValue = (int)0, IsRequired = false)]
    [IntegerValidator(MinValue = 0, MaxValue = 8080, ExcludeRange = false)] 
    public int Port  
    {
        get
        {
            return (int)this[PortName];
        }
        set
        {
           this[PortName] = value;
        }
    }    
} 
```

*旁注*：如果您还可以考虑使用[配置部分设计器](http://csd.codeplex.com/)。坦率地说，我几年前才测试过它，从那以后就再也没有使用过，但也许它也解决了你对 DRY 的担忧。

# google-maps - Google Maps v3 地图图块未在 Chrome 和 IE 中正确显示

> ID：10436045
> 
> 赞同：0
> 
> 时间：2012-05-03T17:01:28.657
> 
> 标签：google-maps

ff 可以很好地显示地图，但在 Chrome 和 IE 中，地图的所有图块都相互叠加。

编辑：通过再次重新输入初始化函数来解决它，即使我找不到任何内容，也可能是拼写错误。再次感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-05T08:38:41.523

```
google.maps.event.addListenerOnce(map, 'tilesloaded', function() {
                google.maps.event.addListenerOnce(map, 'tilesloaded', function() {
                    google.maps.event.trigger(map, 'resize');

                });
}); 
```

# sql - 将结果集插入表时重复

> ID：10436053
> 
> 赞同：0
> 
> 时间：2012-05-03T17:02:21.277
> 
> 标签：sql, sql-server, sql-server-2005

在我的应用程序中，我有一个名为“每日异常报告”的报告，用于显示 ISA 的异常情况。在此表中，我看到重复的条目（报告中完全相同的两个行）。

技术细节。

异常报告将与具有重复条目的`table`调用中可用的数据一起显示。用来排入的`ExceptionFirstReported`就是在。`Insert Statement``insert``ExceptionFirstReported``stored procedure` `usp_Refresh_Daily_Exception_Report`

```
INSERT INTO ExceptionFirstReported(
       InvestorReference, ExceptionReason, First_Reported_Date, RelativeRef)
  SELECT InvestorReference, ExceptionReason, Dateupdated, RelatedInvRef FROM (
      SELECT * FROM DailyExceptionReport As DER
               WHERE NOT EXISTS
                 (SELECT ExcepRptd.InvestorReference
                  FROM ExceptionFirstReported AS ExcepRptd
                  WHERE DER.InvestorReference = ExcepRptd.InvestorReference
                  AND DER.ExceptionReason = ExcepRptd.ExceptionReason
                  AND DER.RelatedInvRef = ExcepRptd.RelativeRef))
  AS CI
  JOIN currentISAs AN CI.InvestorReference = Status_Inv_Ref 
```

我们认为此语句在两个不同的实例中不能有重复的条目，因为不会有具有相同`InvestorReference`的行`ExceptionReason`和 `RelatedInvRef.

但是，我们有重复的输入。这是`insert`用于将行插入到`table`. 并且这些表格`DailyExceptionReport`之前`currentISAs`没有包含重复项。

上述插入查询已在存储过程“usp_refresh_dailyreport”中调用，并且 SP 在一个周期中仅执行一次。

@returnvalue = 执行 usp_refresh_dailyreport

如果@返回值 = 1

然后

InvestorReference ExceptionReason First_reported_dt
Recent_reported_dt relativeref report_gen_date

442643169642 零余额 2012-04-11 09:54:00
2012-05-04 23:58:00 NULL

442643169642 > 一个 ISA 2012-04-21 06:30:00 2012-04-23 23:58:00 452750423823 NULL

442643169642 > 一个 ISA 2012-04-21 06:30:00
2012-04-23 23:58:00 452750423823 NULL

上面的'ExceptionFirstReported'表数据中的家伙最后两行是相同的，并且包含相同的relativeref（非空）。抱歉，“relativeref”不是空字段，但我可能会像第一行一样保留空白数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T17:42:12.960

您是否在多个线程中同时运行此插入？两个线程都可以运行存在检查，什么也找不到，然后插入相同的数据。

我建议您添加唯一索引以确保 100% 确保您没有插入重复记录。最好有一个（可操作的）异常而不是损坏的数据。

您可以通过使我们的语句在事务隔离级别可序列化下运行来解决此问题。

# matlab - 均匀密度组织拟合

> ID：10436055
> 
> 赞同：2
> 
> 时间：2012-05-03T17:02:37.550
> 
> 标签：matlab, histogram

如何使用 histfit() 在直方图上绘制均匀密度？有一个命令可以为正态分布和其他一些命令执行此操作，所以我必须操纵其中一个以使其均匀吗？

例子：

```
s4 = randn(50,1);
counts = [];
[counts(1,:) freq] = histc(s4, [-inf,-3]);
for n = 2:7
    [counts(n,:) freq] = histc(s4, [-5+n,-4+n]);
end
[counts(8,:) freq] = histc(s4, [3,inf]);
counts(1:8)
histfit(s4). 
```

如何实现统一直方图的 histfit？

```
s = rand(50,1);
[count freq]= hist(s,5);
histfit(s);
count 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T18:50:06.520

如果您想要的只是直方图顶部的一条水平线，看起来像您给出的示例，请尝试：

```
s4 = randn(50,1);
[N,X] = hist(s4,sqrt(numel(s4)));
bar(X,N);
hold on
plot([min(s4) max(s4)],[mean(N),mean(N)],'r','LineWidth',2); 
```

这给了我一个直方图，在 bin 值的平均值处有一条水平线。

# objective-c - TCP 服务器在端口 211 上接收命令

> ID：10436056
> 
> 赞同：0
> 
> 时间：2012-05-03T17:02:39.943
> 
> 标签：objective-c, delphi, tcp

我正在使用一些DataSnap 服务器组件创建一个Delphi 服务器并监听端口211。我想从iPad 上的Objective-C 传递命令（例如“exec sp_something 或其他”），并返回一个JSON 结果字符串。有人可以让我开始这个吗？自 1995 年以来我一直在做 Delphi，但我是 Obj-C 的新手。问题就在于此。创建数据服务器很简单，编写 Obj-C 让我感到困惑，既要发送命令又要接收 JSON 结果。解析 JSON 没什么大不了的。我只需要先得到它！TIA。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T20:06:28.273

你不能在 211 端口上监听；低于 1024 的端口保留给 root 拥有的进程。

你真的很想从某种Objective-C指南的介绍开始。[鉴于您的历史，您可能只需阅读Apple 的优秀指南](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Introduction/introObjectiveC.html)就可以摆脱教程，而无需费心。

从那里，您需要了解如何编写 iOS 应用程序。同样，[Apple 指南是一个良好的开端](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/Introduction/Introduction.html)，但您可能会考虑许多 3rd 方教程或指南中的任何一个。

将此学习练习视为回答“我需要编写哪些代码行？”的问题。是失败的必经之路。您确实需要了解 iOS 应用程序的架构以及您的 Objective-C 代码如何适应其中。

# java - 库函数：将集合设为列表

> ID：10436061
> 
> 赞同：2
> 
> 时间：2012-05-03T17:02:54.407
> 
> 标签：java, list, set

关于 Java 语法的快速问题。我想在库的静态方法中获取一个 Set 并返回一个 List。以下给出了编译器错误，我不知道为什么：

```
public static List<T> asList(Set<T> keySet)
{
    // TODO Auto-generated method stub
    return null;
} 
```

消息是“T 无法解析为类型”。但这不是 Java 中泛型类型的语法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T17:04:05.750

对于泛型方法，您还需要将类型放在`<T>`返回参数之前，例如

```
public static <T> List<T> asList(Set<T> keySet)
{
    // TODO Auto-generated method stub
    return null;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T17:05:51.400

您必须指定 T 不是具体类型，而是泛型类型：

```
public static <T> List<T> asList(Set<T> keySet) 
```

请注意，每个 List 实现中都有一个构造函数，该构造函数将集合作为参数并执行此静态方法的操作。我不确定它是否特别有用：

```
List<Foo> list = new ArrayList<Foo>(setOfFoos); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T17:06:42.617

添加`<T>`。您必须指定 T。

```
private static <T> List<T> asList(Set<T> keySet) {
    return result;
} 
```

# android - 使用 XmlPullParser 从元素获取 xml 字符串数据

> ID：10436062
> 
> 赞同：2
> 
> 时间：2012-05-03T17:02:55.330
> 
> 标签：android, android-xml, xmlpullparser

例如我有 xml 文件：

```
 <names>
        <item value="Hello" />
        <item value="All" />
        <item value="This" />
        <item value="Data" />
 </names> 
```

所以我需要从给定的属性（名称）中获取所有原始数据：

```
 <item value="Hello" />
    <item value="All" />
    <item value="This" />
    <item value="Data" /> 
```

以字符串格式，所以数据应该是：

```
String data = "
<item value="Hello" />
<item value="All" />
<item value="This" />
<item value="Data" />
"; 
```

我有一个和平的代码：

```
 int state = 0;
    do {
        try {
            state = parser.next();
        } catch (XmlPullParserException e1) {
            e1.printStackTrace();
        } catch (IOException e1) {
            e1.printStackTrace();
        }       
        if (state == XmlPullParser.START_TAG) {
            if (parser.getName().equals("names")) {

// here I need to get the data
// String data = ...

               break;
            }
        }
    } while(state != XmlPullParser.END_DOCUMENT); 
```

那么，如何从 xml 元素中获取字符串格式的数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T19:49:41.850

我使用[DOM2XmlPullBuilder](http://www.extreme.indiana.edu/xmlpull-website/v1/addons/java/dom2_builder/src/org/xmlpull/v1/dom2_builder/DOM2XmlPullBuilder.java)将 XmlPullParser 转换为 DOM，然后将 DOM 转换为字符串。代码看起来像这样。

```
DOM2XmlPullBuilder dom2XmlPullBuilder = new DOM2XmlPullBuilder();
Element element = dom2XmlPullBuilder.parseSubTree(xmlPullParser);
convertNodeToString(element); // implement using a Transformer 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T10:22:11.950

我相信而不是你拥有的地方

```
if (parser.getName().equals("names")) {... 
```

它应该是这样的：

```
ArrayList<String> data=new ArrayList<String>();
....
....
if (parser.getName().equals("item")) {
   data.add(xpp.getAttributeValue(0));
} 
```

我是一个初学者，所以我最近只是在搜索这些信息，幸运的是我从 commonsguy 找到了一个有用的样本（它复制并运行良好，没有任何改变） - [https://github.com/commonsguy/cw-android/tree/master /资源/XML](https://github.com/commonsguy/cw-android/tree/master/Resources/XML)

# android - Android Emulator 构建错误的可能原因/修复

> ID：10436065
> 
> 赞同：0
> 
> 时间：2012-05-03T17:03:07.537
> 
> 标签：android, android-emulator, titanium, appcelerator

**采取的步骤：**不确定问题的根源是什么，但对错误的快速描述是：

*   我安装了所有必需的软件、SDK、配置，
*   然后使用选项卡式窗口模板创建两个新项目，每个项目都支持部署到 Android。
*   然后我通过 Titanium Studio 的 Run 选项运行一个项目，让 Android Emulator 加载，并确认它的应用程序已安装并正常工作。
*   然后我关闭了模拟器，然后以与上一个相同的方式运行另一个项目，尽管当应用程序显示在屏幕上时，它具有第一个应用程序的名称，而不是应用程序运行的名称。

**FIXES-TRIED：**我尝试在第二次运行之前为所有项目执行“项目>>清理”，但仍然得到相同的“错误”。

**设置：**据我所知，我的所有配置都是正确的，并且很明显构建“有效”，尽管我的安装构建链很可能有问题，直到我通过 Android 在 Titanium Studio 中运行应用程序模拟器。

**错误：**我查看了 FastDev、AppInstall、Android-Emulator 等的控制台输出，并没有看到跳出的错误消息；这意味着我没有看到任何错误消息，除了第一个脚本运行后的 build.py 错误说它在尝试杀死它时没有找到在端口上运行的脚本；鉴于请求是杀死自己，但没有找到，我只是假设这是一种令人困惑的说法，即脚本做了它应该做的事情。

**当前版本：**在 Windows-XP-SP3 上使用 TiStudio 2.0.1 版本、JavaSDK 1.6、r18-Android 和 Android-2.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T19:26:09.087

最近的模拟器具有持久状态，因此您的第二次启动可能会恢复您之前运行的系统。

除非工作流程中出现问题，否则您不必定期使用此方法，但删除 AVD 并创建一个新的应该可以让您一清二楚。

我相信模拟器还有一个启动标志，它告诉它不要使用以前运行的检查点，而是从头开始 - 您可以尝试更改配置以使用该标志。

删除或放弃检查点的一个缺点是模拟器需要更长的时间才能启动。

但是，实际上，您应该能够重新安装或启动给定的应用程序，或者安装完全不同的应用程序，所有这些都在模拟器的同一运行中进行。您不需要新的模拟器，就像您需要购买新设备（或对其执行出厂重置）一样。因此，设置中有些地方不对劲，长期生产力的最佳解决方案是识别并修复它。当然，短期而言，如果这有助于您在今天的最后期限之前完成，您可能需要擦干净。

# inline - 在 SiteEdit 2009 中加载页面时“无法从组件 xml 架构中获取类型信息”

> ID：10436067
> 
> 赞同：3
> 
> 时间：2012-05-03T17:03:12.220
> 
> 标签：inline, tridion

我使用此处给出的答案在 SitEdit 2009 SP2 上启用了内联编辑

[使用 XSLT TBB 时，如何在 SiteEdit 中启用内联字段编辑？](https://stackoverflow.com/questions/9667640/how-do-i-enable-inline-field-editing-in-siteedit-working-when-using-an-xslt-tbb)

但是在 SiteEdit 中加载结果页面时，我不断收到此错误：

> Sys.FormatException：无法从组件 xml 架构中获取类型信息。字段：cf_tcm：20-33457-64_content_header XPath：[1]

我的 XSLT TBB 片段：

```
<xsl:if test="//*[local-name()='content_header'] != ''">
    <h1>
        <div>
            <tcdl:ComponentField name="content_header" index="0">
                <xsl:value-of select="//*[local-name()='content_header']">
            </tcdl:ComponentField>
        </div>
    </h1>
</xsl:if> 
```

发布文件中的输出：

```
<h1>
  <div>
    <span>
      <!-- Start SiteEdit Component Field: {"ID" : "cf_tcm:20-33457-64_content_header", "XPath" : "[1]", "IsMultiValued" : false} -->
      <tcdl:ComponentField name="content_header" index="0" SiteEditProcessed="true">
        Test
      </tcdl:ComponentField>
    </span>
  </div>
</h1> 
```

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T17:31:47.670

该错误消息意味着您的`<!-- Start SiteEdit Component Field: { ...} -->`命令中的 XPath 未指向当前组件中的字段。鉴于您的 XPath 显示为`[1]`，这听起来非常准确。

您需要找出导致输出空 XPath 的原因。在您的 XSLT 中，您使用`<tcdl:ComponentField>`包装器标记该字段。此包装器稍后由“启用内联编辑”TBB 处理以生成相应的`<!-- Start SiteEdit Component Field ... -->`命令。由于 SiteEdit 前端需要字段的 XPath 并且`tcdl:ComponentField`仅包含字段名称，因此 TBB 将需要根据字段名称查找 XPath。

SiteEdit 2009 中的“启用内联编辑”TBB 在处理时`tcdl:ComponentField`通过查看当前已解决的项目 ( `engine.PublishingContext.ResolvedItem.Item.Id`) 来查找当前组件。然后它查找该组件中的字段以确定它的 XPath。

如果您在模板生成器中查看包，**包列表底部的组件是**什么？该组件是否包含`content_header`字段？

# .net - MySQL .NET 连接器和空值

> ID：10436068
> 
> 赞同：1
> 
> 时间：2012-05-03T17:03:16.427
> 
> 标签：.net, mysql, stored-procedures

我正在尝试从 .NET 调用 MySQL 存储过程，该过程在其中一个参数中接受 NULL 值。我从下面构建我的参数列表，当我通过查看 Visual Studio 中的值设置 DBNull.Value 时不断收到错误显示 {}。我不确定为什么会出错，但没有给出任何详细信息说明原因。

```
 protected IEnumerable<MySqlParameter> BuildParameterList(IEnumerable<KeyValuePair<string, object>> parameters)
        {
            return parameters.Select(parameter => new MySqlParameter(parameter.Key, parameter.Value ?? DBNull.Value)
                                                      {
                                                          IsNullable = parameter.Value == null
                                                      });
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T18:01:05.340

通过这样做修复它。看起来 MySQL 不喜欢 AnsiString，它是 null 的默认数据类型。

```
protected IEnumerable<MySqlParameter> BuildParameterList(IEnumerable<KeyValuePair<string, object>> parameters)
        {
            foreach (var parameter in parameters)
            {
                var mysqlParameter = new MySqlParameter(parameter.Key, parameter.Value ?? DBNull.Value)
                                 {
                                     IsNullable = parameter.Value == null
                                 };

                if(parameter.Value == null && mysqlParameter.DbType == DbType.AnsiString)
                {
                    mysqlParameter.DbType = DbType.String;
                }

                yield return mysqlParameter;
            }
        } 
```

# css - 让图像在包装器内的 div 内重叠图像

> ID：10436069
> 
> 赞同：1
> 
> 时间：2012-05-03T17:03:26.877
> 
> 标签：css, image, html

我有一个包装我试图将图像放入其中并有一个徽标在它的顶部中下部我无法对其进行编码...我可以在顶部或底部或在包装下方的菜单部分中获取图像但我似乎无法解决

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T17:09:10.447

HTML：

```
<div id="wrapper">
 <img class="bg" src="img path" />
 <img class="logo" src="logo path" />
</div> 
```

CSS：

# 包装{

位置：相对；}

```
#wrapper .bg {
 position: absolute;
 top: 0;
 left: 0;
 z-index: 5;
}

#wrapper .logo {
 position: absolute;
 top: 10px;
 left: 10px;
 z-index: 10;
} 
```

演示：http: [//jsfiddle.net/pt4rV/](http://jsfiddle.net/pt4rV/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T17:08:02.333

你使用定位来做到这一点。

**工作示例** [http://jsfiddle.net/UKxK6/](http://jsfiddle.net/UKxK6/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T13:58:59.283

您也可以在 CSS 中使用 float 和 clear 属性，这可能会对您有所帮助。并且还使用 MAX-WIDTH 和 MAX-height 属性，以便您能够获得正确的输出。

![在此处输入图像描述](../Images/75da0fabff53c46585430f7daf2aceb4.png)![在此处输入图像描述](../Images/2374d17d880c0e69612a64a7707586d3.png)

使用 max-height 和 max-width 属性，您可以设置最大高度和宽度，并根据您设置图像的需要使用 float:left 或 right 和 clear 属性。

# java - 从集合中删除对象时，休眠更新一对多集合

> ID：10436074
> 
> 赞同：1
> 
> 时间：2012-05-03T17:03:40.503
> 
> 标签：java, hibernate, jpa

我在 jpa 和 hibernate 中遇到了一个令人讨厌的错误。我有一个带有以下注释的计费类：

```
@OneToMany(cascade=CascadeType.ALL, fetch=FetchType.EAGER)
@JoinColumn(name="ch1_id", referencedColumnName="id")
private List<BillingItem>billingItems = new ArrayList<BillingItem>(); 
```

现在我需要从集合中过滤已删除的项目，但只能使用 jpa。不允许使用特定于休眠的注释。所以我写了一个post load函数：

```
@PostLoad
public void postLoad() {
    ArrayList<BillingItem>tempItems = new ArrayList<BillingItem>();

    Iterator<BillingItem> i = this.billingItems.iterator();
    BillingItem item;
    while(i.hasNext()) {
        item = i.next();            
        if( item.getStatus().equals("D")) {
            tempItems.add(item);                
        }                       
    }

    this.billingItems.removeAll(tempItems);
} 
```

但是，当有要过滤的已删除项目时，我看到

休眠：更新 billing_on_item 设置 ch1_id=null where ch1_id=? 和身份证=？

这会产生异常，因为 ch1_id 是外键并且不能为空。然而，休眠将参数绑定到正确的值。为什么首先会发生此更新？如何纠正错误？

提前致谢，

兰迪

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T17:12:01.830

通过从集合中删除项目，您告诉 Hibernate 这两个实体之间的关联不再存在，因此很明显，Hibernate 删除了在数据库中实现该关联的内容：它将外键设置为 null。

您可能想要的只是实体中的一个吸气剂，它只返回未删除的项目：

```
public List<BillingItem> getNonDeletedItems() {
    List<BillingItem> result = new ArrayList<BillingItem>();
    for (BillingItem item : this.billingItems) {
        if (!"D".equals(item.getStatus()) {
            result.add(item);
        }
    }
    return result;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T17:13:04.997

该`@OneToMany(cascade=CascadeType.ALL, fetch=FetchType.EAGER)`行表示它将级联所有更新。查看[CascadeType](http://docs.oracle.com/javaee/5/api/javax/persistence/CascadeType.html)。

# asp.net - 使用 ASP.NET 在视图和控制器中使用 RadioButton

> ID：10436076
> 
> 赞同：1
> 
> 时间：2012-05-03T17:03:48.813
> 
> 标签：asp.net, asp.net-mvc-3, radio-button

我有模特

```
public class QuestionViewModel
    {
        public string Text { get; set; }
        public int Id { get; set; }
        public bool IsMultiSelected { get; set; }
        public IEnumerable<RadioButtonViewModel> AnswerViewModels { get; set; }
    }
public class RadioButtonViewModel
{
public string Value { get; set; }
public string Name { get; set; }
} 
```

和测试控制器

```
 [HttpGet]
        public ActionResult ProcessAnswers()
        {
            var question1 = new List<RadioButtonViewModel>
            {
                new RadioButtonViewModel
                {
                    Value = "1",
                    Name = "Radio 1 option 1"
                },
                new RadioButtonViewModel
                {
                    Value = "2",
                    Name = "Radio 1 option 2"
                },
                new RadioButtonViewModel
                {
                    Value = "3",
                    Name = "Radio 1 option 3"
                }
            };
            var question2 = new List<RadioButtonViewModel>
            {
                new RadioButtonViewModel
                {
                    Value = "1",
                    Name = "Radio 2 option 1"
                },
                new RadioButtonViewModel
                {
                    Value = "2",
                    Name = "Radio 2 option 2"
                },
                new RadioButtonViewModel
                {
                    Value = "3",
                    Name = "Radio 2 option 3"
                }
            };
            var qs = new List<QuestionViewModel>
                         {
                             new QuestionViewModel
                                 {
                                     Id = 1,
                                     Text = "Please select correct variant in question 1",
                                     AnswerViewModels = question1
                                 },
                             new QuestionViewModel
                                 {
                                     Id = 2,
                                     Text = "Please select correct variant in question 2",
                                     AnswerViewModels = question2
                                 }
                         };

            return View("TestRadioView", qs);
        }

        [HttpPost]
        public ActionResult ProcessAnswers(List<QuestionViewModel> answers)
        {
            return RedirectToAction("Index");
        } 
```

我的观点

```
@using System.Web.Mvc.Html
@using ExpertApplication.ViewModels
@model List<QuestionViewModel>
@{
    ViewBag.Title = "Test Radio Button View";

}
<!DOCTYPE html>
<html>
<head>
    <title>@ViewBag.Title</title>
</head>
<body>
    <div>
        @if(Model != null)
        {
            <br />
            using(@Html.BeginForm("ProcessAnswers", "Home", FormMethod.Post))
            {

                foreach(var question in Model)
                {
            <h2>@question.Text</h2>
            <br />
                    foreach(var radioButtonViewModel in question.AnswerViewModels)
                    {
            @Html.RadioButton(question.Id.ToString(), radioButtonViewModel.Value)
            @Html.Label(question.Id.ToString(), radioButtonViewModel.Name)
            <br />
                    }
                }
            <input type="submit" value="Send" />
            }

        }
    </div>
</body>
</html> 
```

**更新**

我改变了我的观点和模型，但我没有正确的答案

```
 public IList<RadioButtonViewModel> AnswerViewModels { get; set; }

@using System.Web.Mvc.Html
@using ExpertApplication.ViewModels
@model List<QuestionViewModel>
@{
    ViewBag.Title = "Test Radio Button View";

}
<!DOCTYPE html>
<html>
<head>
    <title>@ViewBag.Title</title>
</head>
<body>
    <div>
        @if(Model != null)
        {
            if(ViewData["Message"] != null)
            {
            <h1>@ViewData["Message"]</h1>
            }
            else
            {
            <h1>Please answer the questions</h1>
            }
            <br />
            using(@Html.BeginForm("ProcessAnswers", "Home", FormMethod.Post))
            {
                for(int i = 0; i < Model.Count(); i++)
                {
                    var question = Model[i];
            <h2>@question.Text</h2>
            <br />
                    for(int j = 0; j < question.AnswerViewModels.Count(); j++)
                    {
                        var radioButtonViewModel = question.AnswerViewModels[j];
            @Html.RadioButton(string.Format("QuestionViewModel[{0}].AnswerViewModels.Id", question.Id), radioButtonViewModel.Value)
            @Html.Label(string.Format("{0}", question.Id), radioButtonViewModel.Name)
            <br />
                    }
                }
            <input type="submit" value="Send" />
            }
        }
    </div>
</body>
</html> 
```

在行动 ProcessAnswers 变量列表答案为空。我的麻烦在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T17:17:10.907

模型绑定器无法创建 IEnumerable 类型，因此您必须将其更改为 List 或 Collection

# java - Android Threading - 从另一个线程运行一个线程并等待处理程序消息

> ID：10436079
> 
> 赞同：1
> 
> 时间：2012-05-03T17:03:54.117
> 
> 标签：java, android, multithreading

我的应用程序使用 Executor 创建线程来执行任务。

我有一个线程，它在需要时加载位图并将其返回到主线程。

如果在本地找不到位图，则使用另一个线程来下载文件。

所有线程都创建一个 Looper 以确保可以从该线程创建处理程序（以防它需要通过向处理程序发送消息来与另一个线程通信）

```
public class LooperThread extends Thread
{ 
    @Override
    public void run()
    {
        Looper.prepare();
        super.run();
        Looper.loop();
    }
} 
```

主线程要求 Thread-1 获取位图。如果位图存在，则成功返回给主线程。如果位图不存在，Thread-1 要求 Thread-2 下载它。在 Thread-1 上创建了一个 Handler，因此 Thread-2 可以使用它来告诉 Thread-1 何时下载完成。

问题是 Thread-1 完成执行并在下载完成之前退出，因此当 Thread-2 通过处理程序发送消息时，没有任何东西可以处理该消息。

```
final RequestHandler handler = new RequestHandler()
{
    @Override
    protected void onComplete(Object response)
    {
       //This never happens as Thead-1 is already finished when download is complete
        DownloadCompleteData data = (DownloadCompleteData)response;

        onDownloadComplete(data.success, data.downloadId, data.filePath);
    }
};

myExecutor.execute(new Runnable()
{
    public void run()
    {
        //blocking download call
        DownloadCompleteData data = download(downloadRequest);

        //Thread-2 now sends message back to Thread-1 
        handler.sendMessage(handler.obtainMessage(COMPLETE, data));
    }
}); 
```

我认为我需要在 Thread-1 中运行一个无限循环，以便它可以保持活动状态并继续处理消息，直到它被中断，但我不确定如何正确执行此操作。

有人知道正确的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T23:42:18.750

我不确定你是否想这样做，但你可以在 thread-1 中尝试类似的代码

```
if(bitmapIsntFound)
{
    Thread-2.start();
    try
    { 
        Thread-1.wait();
    }

    catch(InterruptedException e) 
    {
    System.out.println("Thread-1
    }

} 
```

这将启动您的第二个线程来下载位图，然后告诉第一个线程等待，而第二个线程继续运行。第二个完成下载后，您将需要调用 Thread-1.notify() 来重新启动 Thread-1。

因为您在中途暂停了 Thread-1，所以它不会超过 try{ } catch(){ } 语句，所以当 Thread-1 恢复时，可以保证下载完成，您可以将其调用到线程中。

# javascript - Ipad 上的视频重叠

> ID：10436083
> 
> 赞同：1
> 
> 时间：2012-05-03T17:04:08.373
> 
> 标签：javascript, css, ipad

我在名为“#supersize-background”的背景中添加了固定位置的视频。并且标题在视频中是绝对的。

播放视频时，我无法单击标题导航。您可以查看此链接[http://redzone.wordpressprojects.com/](http://redzone.wordpressprojects.com/)

# sql - 如何在单个语句中使用子查询更新多个列？

> ID：10436084
> 
> 赞同：5
> 
> 时间：2012-05-03T17:04:15.570
> 
> 标签：sql, sybase

我正在尝试从源表更新临时表：

```
 UPDATE #DETAIL
        SET EXCD_ID, CDOR_OR_AMT, CDOR_OR_VALUE
        (SELECT 
            CDID_ADDL_DATA_1, CDID_ADDL_DATA, CDID_VALUE_STRING
        FROM
            CMC_CDID_DATA CDID
        WHERE
            CDID.CLCL_ID = DTL.CLCL_ID AND
            CDID.CDML_SEQ_NO = DTL.CDML_SEQ_NO AND
            CDID_TYPE = 'NDC'
    )
    FROM #DETAIL DTL
    WHERE DTL.CDOR_OR_ID = 'XS' 
```

不幸的是它抱怨

```
Incorrect syntax near ',' (on the '(SELECT' line)
Incorrect syntax near 'FROM' (the second one) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T18:10:05.363

经过多次试验和错误，我在工作中获得了一些帮助，我们想出了这个：

```
 UPDATE #DETAIL
        SET DTL.EXCD_ID = CDID.CDID_ADDL_DATA_1,
            DTL.CDOR_OR_AMT = CONVERT(MONEY,CDID.CDID_ADDL_DATA),
            DTL.CDOR_OR_VALUE = CDID.CDID_VALUE_STRING
    FROM #DETAIL DTL
    INNER JOIN 
            CMC_CDID_DATA  CDID ON
            CDID.CLCL_ID = DTL.CLCL_ID AND
            CDID.CDML_SEQ_NO = DTL.CDML_SEQ_NO 
    WHERE DTL.CDOR_OR_ID = 'XS'
          AND CDID.CDID_TYPE = 'NDC' 
```

sybase 好像接受哪个。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T09:08:39.203

您必须像这样进行更新：

```
UPDATE #DETAIL
SET DTL.EXCD_ID = CDID.CDID_ADDL_DATA_1,
    DTL.CDOR_OR_AMT = CDID.CDID_ADDL_DATA
    DTL.CDOR_OR_VALUE = CDID.CDID_VALUE_STRING
FROM #DETAIL DTL
INNER JOIN (SELECT 
            CDID_ADDL_DATA_1, CDID_ADDL_DATA, CDID_VALUE_STRING
        FROM
            CMC_CDID_DATA ) CDID ON CDID.CLCL_ID = DTL.CLCL_ID AND
            CDID.CDML_SEQ_NO = DTL.CDML_SEQ_NO AND
            CDID_TYPE = 'NDC'
WHERE DTL.CDOR_OR_ID = 'XS' 
```

* * *

查看[这篇文章](http://infocenter.sybase.com/help/topic/com.sybase.help.ase_15.0.sqlug/html/sqlug/sqlug267.htm)了解更多信息！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-10T01:27:54.570

我刚刚尝试过，它有效（在 Oracle 上）

```
update dstTable T
    set (T.field1, T.field2, T.field3) = 
           (select S.value1, S.value2, S.value3
            from srcTable S
             where S.key = T.Key); 
```

不幸的是，这是 Oracle 特定的语法。

警告：请注意，上面的更新没有 where 子句。它更新整个表。如果子查询不返回任何行，则目标字段设置为 NULL。此外，如果子查询返回多于一行，也是错误的。

# android - 使用带有活动的布局

> ID：10436087
> 
> 赞同：1
> 
> 时间：2012-05-03T17:04:25.917
> 
> 标签：android, android-layout

所以我刚开始玩android，我想看看我能做些什么。我正在关注第一个 android 教程： http: [//developer.android.com/training/basics/firstapp/index.html](http://developer.android.com/training/basics/firstapp/index.html)，最后，您以编程方式定义了一个 TextView。我想将其更改为在新布局中定义，所以我写了这个（它被命名为 display_message.xml）：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView android:id="@+id/text_view"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

在 DisplayMessage 类中，我将其更改为：

```
public class DisplayMessage extends Activity {

        @Override
        public void onCreate(Bundle savedInstanceState)
        {
            super.onCreate(savedInstanceState);
        setContentView(R.layout.display_message);

        // Get message from intent
        Intent intent = getIntent();
        String message = intent.getStringExtra(FirstActivity.EXTRA_MESSAGE);

        // Get the text view
        TextView textView = (TextView) findViewById(R.id.text_view);
        textView.setText(message);
    }

} 
```

但是，Eclipse 说它不知道是什么`R.layout.display_message`，也不知道是什么`R.id.text_view`。还有其他地方我需要定义它们吗？我哪里搞砸了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T17:14:52.957

这似乎是正确的，但请确保导入的 R 类是正确的。有时 Eclipse 会导入 android.R 但您需要导入的 R 文件是 your.package.name.R

# ruby-on-rails - 如何使连接模型从连接模型中继承值？

> ID：10436089
> 
> 赞同：1
> 
> 时间：2012-05-03T17:04:32.620
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我的 Track 模型中有一个跟踪号字段，并希望在创建和更新时将其复制到 ReleasesTrack 连接模型的位置字段。我在 ReleasesTrack 模型中尝试了以下操作，但没有任何反应。

```
class ReleasesTrack < ActiveRecord::Base
  before_save :number_tracks
  before_update :number_tracks

  def number_tracks
    self.position = self.track.position
  end
end 
```

有任何想法吗？

我正在使用acts_as_list 来设置位置，但是由于轨道是nested_attributes 并且sql 语句没有按特定顺序执行，所以会出现一些奇怪的顺序，所以我需要自己设置位置。

# r - 特定值的固定颜色

> ID：10436091
> 
> 赞同：5
> 
> 时间：2012-05-03T17:04:42.240
> 
> 标签：r, colors

我正在尝试制作温度图，一切正常，但我不知道如何拥有固定的调色板。

其实我有这个：

```
rgb.palette <- colorRampPalette(c("blue","green","yellow","orange","red"), 
                                space = "Lab")

image.plot(akima.smooth, 
           col = rgb.palette(NBR.COLORS), 
           main=main_title, 
           horizontal=TRUE,
           axes=TRUE) 
```

该解决方案有效，但绘制的颜色始终是从蓝色到红色。

例如，如果地图上的最低温度为 -10°C，则颜色将为蓝色，但在另一张地图中，如果最低温度为 +25°C，则颜色也将为蓝色。

如何定义固定颜色面板，例如：

```
-30°C => blue
-20°C => light blue
-10°C => dark green
  0°C => green
 10°C => yellow 
```

如果在地图 1 中最低温度为 -20，我想要“浅蓝色”，在地图 2 中，如果最低温度为 10°CI，我想要“黄色”颜色。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T20:29:02.533

如果是`fields:::image.plot()`这样，请查看 function 的参数`?image`。特别`breaks`是需要参数来设置用于将输入数据分解为用于绘图的类的切割点的边界值。

您看到的问题是，如果您没有设置，`breaks`那么调色板将应用于输入数据的*范围*。如果您设置`breaks`，那么调色板将映射到您想要的整个范围以及分配给组的数据，因此颜色由断点定义。

我没有包括一个例子，以防万一`fields:::image.plot()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T06:48:53.937

我使用了这个解决方案：

```
col = colorRampPalette(c("darkmagenta","blue","green","yellow","orange","red"),
                       space="Lab")(NBR.COLORS) 
breaks = c(seq(-35, 10, length.out=NBR.COLORS/2), 10, 
           seq(10, 35, length.out=NBR.COLORS/2))
image.plot(akima.smooth, col=col, breaks=breaks, main=main_title,
           horizontal=TRUE,axes=TRUE); 
```

# ruby-on-rails - 预期图像（#70365286921100），得到数组（#70365535770260）错误

> ID：10436094
> 
> 赞同：2
> 
> 时间：2012-05-03T17:04:59.257
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2

我正在尝试创建一个简单的 rails 3.2 应用程序。

为简单起见，该应用程序有两个模型：产品和图像

产品应该有很多图片，所以这是我的模型：

```
class Product < ActiveRecord::Base
  has_many :images, :class_name => 'Image'
end

class Image < ActiveRecord::Base
  belongs_to :product
  has_attached_file :image, :styles => { :normal => "300x300", :small => "70x70" }
end 
```

我正在使用 active_admin，这是我创建产品的表单：

```
 <%= semantic_form_for [:admin, @product], :html => {:multipart => true} do |f| %>

    <%= f.inputs :title, :description, :price %>

    <%= f.semantic_fields_for :images do |f2| %>
        <%= f2.file_field :image %>
    <% end %>

    <%= f.buttons :commit %>
  <% end %> 
```

当我提交表单时，我收到以下异常：

```
Image(#70365286921100) expected, got Array(#70365535770260)

{"utf8"=>"✓",
 "authenticity_token"=>"waFPhUIJPD90r5SRVmvvYBEcpZHgFJbM325wZDknWf8=",
 "product"=>{"title"=>"rfrfrf",
 "description"=>"rfrfr",
 "price"=>"200.99",
 "images"=>{"image"=>#<ActionDispatch::Http::UploadedFile:0x007ffe63d19e58 @original_filename="IMG_0097.JPG",
 @content_type="image/jpeg",
 @headers="Content-Disposition: form-data; name=\"product[images][image]\"; filename=\"IMG_0097.JPG\"\r\nContent-Type: image/jpeg\r\n",
 @tempfile=#<File:/var/folders/_j/s1n6_4551cxc765p1zm8w54r0000gq/T/RackMultipart20120503-2609-bwvbis>>}},
 "commit"=>"Create Product"} 
```

为什么会这样？谁能帮帮我？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-17T17:34:04.777

我相信您需要`accepts_nested_attributes_for :images`在您的产品模型中。产品模型应如下所示：

```
class Product < ActiveRecord::Base
  has_many :images, :class_name => 'Image'
  accepts_nested_attributes_for :images
end 
```

如果您查看您的 params 哈希，您会看到：

```
"images"=>{"image"=> ... 
```

所做的是`accepts_nested_attributes_for`更改参数的结构以适应关联指定的一对多关系`has_many :images`。

假设您在表单中有多个图像，您的 params 哈希将包含：

```
"images_attributes"=>{"0"=>{"image"=> ...  }, "1"=>{"image" => ... }, ...} 
```

另外，如果是新的，请确保`@product.images.build`在到达视图之前致电某个地方。`@product`

# android - Android Store JSON 和导入数据

> ID：10436095
> 
> 赞同：0
> 
> 时间：2012-05-03T17:04:59.807
> 
> 标签：android, database, sqlite

我想将大块数据作为 JSON 存储在 assets 文件夹中，然后在启动/首次运行时将其导入数据库。

这是最佳做法吗？我还有什么方法可以做到这一点？你能分享一些关于Android数据库的文章吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T17:26:59.903

> 这是最佳做法吗？

您可能只是将数据库打包在资产中，并为自己节省进行导入的事务时间。请参阅[`SQLiteAssetHelper`](https://github.com/jgilfelt/android-sqlite-asset-helper)有关此内容的实现。

# c# - 使用 AutoMapper 处理 Null 对象

> ID：10436103
> 
> 赞同：1
> 
> 时间：2012-05-03T17:05:20.033
> 
> 标签：c#, linq, entity-framework, entity-framework-4, automapper

我正在使用 Automapper 进行以下操作，但由于客户端的联系人表中没有记录，我得到的*对象引用未设置为对象的实例。*错误。

存在联系人集合，但 Contacts.ContactEmails 集合为空。

处理这个问题的最佳方法是什么？

```
Mapper.CreateMap<Client, ClientGrid>()
..ForMember(to => to.OfficeEmail, opt => opt.MapFrom(from => from.Contacts == null ? "" : from.Contacts.SingleOrDefault().ContactEmails.FirstOrDefault().Email)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T17:45:48.193

您能否修改 Contact 类以具有一个 get 属性，该属性将返回第一个 ContactEmail（如果可用），否则返回 null？然后，您可以改为映射到该属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-29T17:39:25.043

我曾经`.ConvertUsing<MyTypeConverter>()`解决过这个问题：

```
Mapper.CreateMap<Client, ClientGrid>()
    .ConvertUsing<ClientToClientGridConverter>();

class ClientToClientGridConverter
    : AutoMapper.ITypeConverter<Client, ClientGrid>
{
    public ClientGrid Convert(AutoMapper.ResolutionContext context)
    {
        if (context == null || context.IsSourceValueNull) 
        { 
            return null;
        }

        var client = context.SourceValue as Client;

        var clientGrid = new ClientGrid();

        // conversion rules and logic here

        return clientGrid 
    }
} 
```

# zend-framework - 在 zend 中未检测到模型类

> ID：10436105
> 
> 赞同：0
> 
> 时间：2012-05-03T17:05:30.700
> 
> 标签：zend-framework

我正在使用 Netbeans IDE 6.9.1 制作简单的快速入门项目我已经在模型文件夹中创建了 GuestBookMapper 类，该类映射到模型/dbTable/ 文件夹中的 DBTable 类，其中存在 Guest 类，它是表来宾的 DbTable 类。但它显示以下错误。致命错误：在第 13 行的 C:\xampp\htdocs\quickstart\application\controllers\IndexController.php 中找不到类 'Application_Model_GuestbookMapper'

这是我的application.ini

```
[production]
phpSettings.display_startup_errors = 0
phpSettings.display_errors = 0
includePaths.library = APPLICATION_PATH "/../library"
bootstrap.path = APPLICATION_PATH "/Bootstrap.php"
bootstrap.class = "Bootstrap"
appnamespace = "Application"
resources.frontController.controllerDirectory = APPLICATION_PATH "/controllers"
resources.frontController.params.displayExceptions = 0
resources.db.adapter = 'PDO_MYSQL'
resources.db.params.host = "localhost"
resources.db.params.username = "root"
resources.db.params.password = ""
resources.db.params.dbname = "guestbook.db"
resources.layout.layoutPath = APPLICATION_PATH "/layouts/scripts/"
[staging : production]

[testing : production]
phpSettings.display_startup_errors = 1
phpSettings.display_errors = 1

[development : production]
phpSettings.display_startup_errors = 1
phpSettings.display_errors = 1
resources.frontController.params.displayExceptions = 1 
```

这是我的 GuestbookMapper 课程

```
<?php  
class Application_Model_GuestbookMapper
{
    protected $_dbTable;
    public function setDbTable($dbTable)
    {
        if (is_string($dbTable)) {
            $dbTable = new $dbTable();
        }
        if (!$dbTable instanceof Zend_Db_Table_Abstract) {
            throw new Exception('Invalid table data gateway provided');
        }
        $this->_dbTable = $dbTable;
        return $this;
    }

    public function getDbTable()
    {
        if (null === $this->_dbTable) {
            $this->setDbTable('Application_Model_DbTable_Guests');
        }
        return $this->_dbTable;
    }

    public function save(Application_Model_Guestbook $guestbook)
    {
        $data = array(
            'email'   => $guestbook->getEmail(),
            'comment' => $guestbook->getComment(),
            'created' => date('Y-m-d H:i:s'),
        );

        if (null === ($id = $guestbook->getId())) {
            unset($data['id']);
            $this->getDbTable()->insert($data);
        } else {
            $this->getDbTable()->update($data, array('id = ?' => $id));
        }
    }

    public function find($id, Application_Model_Guestbook $guestbook)
    {
        $result = $this->getDbTable()->find($id);
        if (0 == count($result)) {
            return;
        }
        $row = $result->current();
        $guestbook->setId($row->id)
                  ->setEmail($row->email)
                  ->setComment($row->comment)
                  ->setCreated($row->created);
    }

    public function fetchAll()
    {
        $resultSet = $this->getDbTable()->fetchAll();
        $entries   = array();
        foreach ($resultSet as $row) {
            $entry = new Application_Model_Guestbook();
            $entry->setId($row->id)
                  ->setEmail($row->email)
                  ->setComment($row->comment)
                  ->setCreated($row->created);
            $entries[] = $entry;
        }
        return $entries;
    }
} 
```

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-19T00:04:40.340

尝试添加这个：

```
$moduleLoader = new Zend_Application_Module_Autoloader(array(
        'namespace' => 'Application',
        'basePath' => APPLICATION_PATH 
        )); 
```

在 GuestController.php 文件的 init() 方法中。

# xml - 使用 XML 而不是 NVARCHAR(max) 是否可以提高性能？

> ID：10436106
> 
> 赞同：2
> 
> 时间：2012-05-03T17:05:41.287
> 
> 标签：xml, sql-server-2005, blob

我将在数据库中存储一些文本。文本恰好是 xml。

我只存储和读取文本的“blob”（我没有使用任何 xml 查询或索引工具）。

将列声明为`xml`：

```
CREATE TABLE docs (pk INT PRIMARY KEY, xCol XML not null) 
```

而不是`nvarchar(max)`：

```
CREATE TABLE docs (pk INT PRIMARY KEY, xCol NVARCHAR(max) not null) 
```

我想如果我给 SQL Server 一个提示，那么`text`它[可以应用压缩以获得更有效的存储](http://www.w3.org/XML/EXI/)。`xml`

**注意：**第三个选项是我在客户端压缩文本并将数据存储在`varbinary(max)`blob 列中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T17:14:18.387

将其存储为 XML 很可能会导致比 nvarchar 更小的存储大小（我发现这是真的，至少由于删除了不相关的空格和其他此类格式）。但是，SQL Server 会在每次插入和更新之前检查 XML 的格式是否正确，因此您可能会在这些时候遭受性能损失。我认为这种检查与任何数据类型检查一样也是一个优势。

# c# - 来自 ByteArray 的位操作

> ID：10436110
> 
> 赞同：0
> 
> 时间：2012-05-03T17:06:06.957
> 
> 标签：c#, bytearray, bit-manipulation

我想知道如何操作 ByteArray 中的位。我需要的是根据我拥有的“表格”移动位。

桌子：

> ```
> Bit 0 -> Bit 26
> Bit 1 -> Bit 31
> Bit 2 -> Bit 17
> ...
> Bit 31 -> Bit 5 
> ```

我使用这种方法将 ByteArray 转换为 BitArray

```
public static BitArray ByteArraytoBitArray(byte[] bytes)
{
    BitArray bits = new BitArray(bytes);
    return bits;
} 
```

但是我被困在那里，我不知道如何根据表格移动位，然后返回到 ByteArray。

**编辑：**

代码片段：

```
public static byte[] StringToByteArray(String hex)
{
    int NumberChars = hex.Length;
    byte[] bytes = new byte[NumberChars / 2];
    for (int i = 0; i < NumberChars; i += 2)
        bytes[i / 2] = Convert.ToByte(hex.Substring(i, 2), 16);
    return bytes;
}
private void button3_Click(object sender, EventArgs e)
{
    string featherearring = "00804804A02A1CA20100000000000000D2F8B6FABBB700000000000000000000";
    var strarray = StringToByteArray(featherearring);

    byte[] strarray_comp = Enc.Encrypt(strarray);

    string conv = BitConverter.ToString(strarray_comp);
    MessageBox.Show(conv.Replace("-", ""));
}

public static byte[] BitArrayToByteArray(BitArray bits)
{
    byte[] bytes = new byte[bits.Length / 8];
    bits.CopyTo(bytes, 0);
    return bytes;
}
public static byte[] Encrypt(byte[] input)
{
    BitArray source = new BitArray(input);
    BitArray target = new BitArray(source.Length);

    target[26] = source[0];
    target[31] = source[1];
    target[17] = source[2];
    target[10] = source[3];
    target[30] = source[4];
    target[16] = source[5];
    target[24] = source[6];
    target[2] = source[7];
    target[29] = source[8];
    target[8] = source[9];
    target[20] = source[10];
    target[15] = source[11];
    target[28] = source[12];
    target[11] = source[13];
    target[13] = source[14];
    target[4] = source[15];
    target[19] = source[16];
    target[23] = source[17];
    target[0] = source[18];
    target[12] = source[19];
    target[14] = source[20];
    target[27] = source[21];
    target[6] = source[22];
    target[18] = source[23];
    target[21] = source[24];
    target[3] = source[25];
    target[9] = source[26];
    target[7] = source[27];
    target[22] = source[28];
    target[1] = source[29];
    target[25] = source[30];
    target[5] = source[31];

    return BitArrayToByteArray(target);
} 
```

我输入字节数组是“00804804A02A1CA20100000000000000D2F8B6FABBB700000000000000000000”我与zimdanen的代码输出为“5012000000000000000000000000000000000000000000000000000000000000”，它应该是“501200002FD901000000000400000000BFE8C4DB140D11F40000000000000000”正如你所看到的，它获得的第2右字节，但其余部分均为空。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T17:12:57.070

它需要到位吗？您可以创建一个新的 BitArray 并复制这些位：

```
BitArray source = new BitArray(bytes);

// Create target array.
BitArray target = new BitArray(source.Length);

// Map bits.
// ...
target[26] = source[0];
// ... 
```

或者，根据您要如何维护映射“表”，您可以这样做：

```
// Setup mapping - <source, target>.
Dictionary<int, int> mapping = new Dictionary<int, int>();
// ...
mapping.Add(0, 26);
// ...

BitArray source = new BitArray(bytes);

// Create target array.
BitArray target = new BitArray(source.Length);

// Map bits.
foreach (int sourceIndex in mapping.Keys)
{
    int targetIndex = mapping[sourceIndex];
    target[targetIndex] = source[sourceIndex];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T05:08:25.420

您的第一个问题是您有一个 32 字节的数组，要转换为`BitArray`. 您会发现该`source.Count`属性的值是 256\. `target.Count`，而另一方面，只有 32。因此您的`Encrypt`方法只更改了位数组的前 32 位，这对应于四个字节 - 八个十六进制字符。数组的其余部分将为空值。

您可以通过在执行复制之前更改`BitArrayToByteArray`方法以使用 0xFF 填充目标来验证这一点：

```
public static byte[] BitArrayToByteArray(BitArray bits)
{
    byte[] bytes = new byte[bits.Length / 8];
    // Fill the array with 0xFF to illustrate.
    for (int i = 0; i < bytes.Length; ++i)
    {
        bytes[i] = 0xFF;
    }
    bits.CopyTo(bytes, 0);
    return bytes;
} 
```

我想你会发现结果是“50120000FFFFFF....”

很难确切地说出您要做什么。如果您想打乱字符串中的字节，则无需使用`BitArray`. 如果你真的想加扰这些位，那么你需要加扰所有的位。如果没有有关您要做什么的更多信息，我没有任何建议。除了也许您应该使用许多现有加密算法中的一种，而不是尝试使用自己的加密算法。

# java - 如果应用于两个线程之间共享的 bean，@Autowired 将不起作用

> ID：10436111
> 
> 赞同：2
> 
> 时间：2012-05-03T17:06:08.550
> 
> 标签：java, multithreading, synchronization, spring-3, autowired

我在一个非常基本的场景中遇到了一些麻烦：我有一个 java web 应用程序（spring 3），我想将一些对象存储到堆栈中。然后我想用调度程序管理堆栈中的对象，所以我实现了一个石英作业。干净利落。我将堆栈注入到第一个服务类和带有@Autowired 注释的作业类中。对于服务类，该表已成功注入，但对于作业类，该表为空。这是代码：

要分享的课程

```
package it.unifi.det.telemat.vr.data;
@Component
public class IndexedNodesStack extends HashMap<IndexedObject, Boolean>{

    /**
     * 
     */
    private static final long serialVersionUID = 1L;

    @Override
    public synchronized int size() {
        // TODO Auto-generated method stub
        return super.size();
    }

    //all the HashMap methods are implemented in a synchronized wrapper method

} 
```

第一堂课（@Autowired 成功）

```
package it.unifi.det.telemat.vr.service;
@Service
public class InnerNodeManager extends ConcreteNodeManager{

    @Autowired
    private IndexedNodesStack indexedNodesStack; //<--- it is actually autowired!

    private void manageIndexedNodes(Boolean isPut, String lri, String features)
    {
        IndexedObject indexedObject = new IndexedObject();
        indexedObject.setId(lri);
        if(features != null && isPut)
            indexedObject.generateFeatures(features);

        indexedNodesStack.put(indexedObject, isPut);
    }

} 
```

作业类（@Autowired 失败）

```
package it.unifi.det.telemat.vr.service.scheduler;
@Component
public class QuartzJSearchJob extends QuartzJobBean{

    @Autowired
    private IndexedNodesStack indexedNodesStack; //<--- this variable is null :-(

    @Override
    protected void executeInternal(JobExecutionContext context) throws JobExecutionException
    {
        //do work       
    }
} 
```

**编辑：**这是 servlet.xml

```
<context:component-scan base-package="it.unifi.det.telemat.vr" />

<bean name="searchJob"
class="org.springframework.scheduling.quartz.JobDetailBean">
    <property name="jobClass" value="it.unifi.det.telemat.vr.service.scheduler.QuartzJSearchJob" />
</bean>

<bean id="searchJobTrigger"
class="org.springframework.scheduling.quartz.CronTriggerBean">
    <property name="jobDetail" ref="searchJob" />
    <property name="cronExpression" value="0/50 * * * * ?" />
</bean>

<bean class="org.springframework.scheduling.quartz.SchedulerFactoryBean">
    <property name="triggers">
    <list>
        <ref bean="searchJobTrigger" />
        </list>
    </property>
</bean> 
```

也许我对线程之间的资源共享缺乏一些了解，因为这是我在这个领域的第一次尝试。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T17:12:09.527

仅当 bean 是从 Spring bean 工厂创建时，自动装配才有效。您是否在不使用 bean 工厂的情况下创建对象，即使用`new QuartzJSearchJob()`语法创建它？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T09:40:25.540

好的，我终于明白了。它不起作用，因为spring没有实例化quartzJSearchJob，quartz可以。要在作业中注入的 bean 必须通过`SchedulerFacoryBean`. 这是使事情正常进行的配置。

```
<bean class="org.springframework.scheduling.quartz.SchedulerFactoryBean">
    <property name="triggers">
        <list>
            <ref bean="searchJobTrigger" />
        </list>
    </property>
    <property name="schedulerContextAsMap">
    <map>
       <entry key="indexedNodesStack" value-ref="indexedNodesStack" />
    </map>
    </property>
</bean> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T17:11:13.830

`QuartzJSearchJob`不被识别为 bean，因为它没有类级别的注释。尝试`@Component`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-09T15:43:24.810

您忘记了“jobDetails”属性：

```
<property name="jobDetails">
    <list>
        <ref bean="searchJob" />
    </list>
</property> 
```

您还需要使用`org.springframework.scheduling.quartz.JobDetailFactoryBean`而不是`org.springframework.scheduling.quartz.JobDetailBean`.

像这样插入它：

```
<bean name="searchJob" class="org.springframework.scheduling.quartz.JobDetailFactoryBean">
    <property name="jobClass" value="it.unifi.det.telemat.vr.service.scheduler.QuartzJSearchJob" />
</bean>

<bean id="searchJobTrigger" class="org.springframework.scheduling.quartz.CronTriggerBean">
    <property name="jobDetail" ref="searchJob" />
    <property name="cronExpression" value="0/50 * * * * ?" />
</bean>

<bean class="org.springframework.scheduling.quartz.SchedulerFactoryBean">
    <property name="triggers">
        <list>
            <ref bean="searchJobTrigger" />
        </list>
    </property>
    <property name="jobDetails">
        <list>
            <ref bean="searchJob" />
        </list>
    </property>
</bean> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-24T15:28:00.620

我有同样的问题，我通过添加`SpringBeanAutowiringSupport.processInjectionBasedOnCurrentContext(this);`作为我的`Job.execute(JobExecutionContext context)`方法的第一行来解决这个问题。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2014-12-18T09:37:47.113

我认为你必须在 , 中分配一个值`scheduleFactoryBean`，`setSchedulerContextAsMap()`你把你的对象放在这个地图中，然后它就会起作用。

```
@Bean(name = "scheduler")
  public SchedulerFactoryBean schedulerFactory()
  {
    SchedulerFactoryBean schedulerFactory = new SchedulerFactoryBean();
    schedulerFactory.setDataSource(dataSource);
    schedulerFactory.setAutoStartup(true);
    schedulerFactory.setGlobalJobListeners(globalJobListeners);
    schedulerFactory.setSchedulerContextAsMap(contextMap());
    schedulerFactory.setQuartzProperties(schedulerProperties());
    return schedulerFactory;
  } 
```

# c# - 如何为文本冒险游戏实现调度表？

> ID：10436113
> 
> 赞同：4
> 
> 时间：2012-05-03T17:06:17.297
> 
> 标签：c#, adventure, dispatch-table

我正在[C# 中进行文本冒险](http://code.google.com/p/escape-text-rpg/source/browse/Escape/)，有人建议我使用[调度表](http://en.wikipedia.org/wiki/Dispatch_table)而不是 switch 语句。

这是switch语句代码：

```
 #region Public Methods
        public static void Do(string aString)
        {
                if(aString == "")
                        return;

                string verb = "";
                string noun = "";

                if (aString.IndexOf(" ") > 0)
                {
                        string[] temp = aString.Split(new char[] {' '}, 2);
                        verb = temp[0].ToLower();
                        noun = temp[1].ToLower();
                }
                else
                {
                        verb = aString.ToLower();
                }

                switch(Program.GameState)
                {
                        case Program.GameStates.Playing:
                                if (IsValidInput(Commands, verb, true))
                                {
                                        switch(verb) //this is the switch statement
                                        {
                                                case "help":
                                                case "?":
                                                        WriteCommands();
                                                        break;
                                                case "exit":
                                                case "quit":
                                                        Program.GameState = Program.GameStates.Quit;
                                                        break;
                                                case "move":
                                                case "go":
                                                        MoveTo(noun);
                                                        break;
                                                case "examine":
                                                        Examine(noun);
                                                        break;
                                                case "take":
                                                case "pickup":
                                                        Pickup(noun);
                                                        break;
                                                case "drop":
                                                case "place":
                                                        Place(noun);
                                                        break;
                                                case "use":
                                                        Use(noun);
                                                        break;
                                                case "items":
                                                case "inventory":
                                                case "inv":
                                                        DisplayInventory();
                                                        break;
                                                case "attack":
                                                        //attack command
                                                        break;
                                        }
                                }
                                break;

                        case Program.GameStates.Battle:
                                if(IsValidInput(BattleCommands, verb, true))
                                {
                                        switch(verb) //this is the other switch statement
                                        {
                                                case "attack":
                                                        //attack command
                                                        break;
                                                case "flee":
                                                case "escape":
                                                        //flee command
                                                        break;
                                                case "use":
                                                        //use command
                                                        break;
                                                case "items":
                                                case "inventory":
                                                case "inv":
                                                        //items command
                                                        break;
                                        }
                                }
                                break;
                }
        }
        #endregion 
```

如何重构它以使用调度表？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-03T17:20:33.390

最简单的方法是使用代表字典。

例如：

```
Dictionary<string, Action> dispatch = new Dictionary<string, Action>();

dispatch["help"] = new Action(() => Console.WriteLine("Hello"));
dispatch["dosomething"] = new Action(() =>
{
    // Do something else
    Console.WriteLine("Do Something");
});

// Call the 'help' command
dispatch["help"](); 
```

对于多个不同的参数，使用基本委托并使用动态调用可能是最简单的。

```
Dictionary<string, Delegate> dispatch = new Dictionary<string, Delegate>();

dispatch["help"] = new Action(() => Console.WriteLine("Hello"));
dispatch["dosomething"] = new Action<string>(s => Console.WriteLine(s));

dispatch["help"].DynamicInvoke();
dispatch["dosomething"].DynamicInvoke("World"); 
```

如果使用 .NET 4，您还可以使用动态类型在运行时解析，以稍微减少动态调用的混乱。

```
Dictionary<string, dynamic> dispatch = new Dictionary<string, dynamic>();

dispatch["help"] = new Action(() => Console.WriteLine("Hello"));
dispatch["dosomething"] = new Action<string>(s => Console.WriteLine(s));

dispatch["help"]();
dispatch["dosomething"]("World"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T17:08:06.673

也许他指的是“双重调度”，或者[访客模式](http://www.oodesign.com/visitor-pattern.html)。

您可以拆分代码以改进更“调度程序”的样式，如下所示：

```
public interface IGameState{
  void Help();
  void Question();
  void Attack();
}

public interface ICommand{
  bool IsValidFor(PlayingState state);
  bool IsValidFor(BattleState state);
  void Execute(IGameState state);
}

public class PlayingState : IGameState {
   public void Help(){ // Do Nothing }
   public void Question() { WriteCommands(); }

   private void WriteCommands(){ }
}

public class Battle : IGameState{
   public void Help(){ // Do Nothing }
   public void Question() { WriteCommands(); }
   public void Attack() { Roll(7); }

   private void Roll(int numDice){ }
}

public class CommandBuilder{
  public ICommand Parse(string verb){
    switch(verb){
       case "help":
         return new HelpCommand();
       case "?":
         return new QuestionCommand();
       case "attack":
         return new AttackCommand();
       default:
         return new UnknownCommand();
    }
  }
}

public class QuestionCommand(){
  bool IsValidFor(PlayingState  state){
     return true;
  }

  bool IsValidFor(BattleState state){
     return false;
  }

  void Execute(IGameState state){
     state.Question();
  }
}

public static void Do(string aString){
  var command = CommandBuilder.Parse(aString);
  if(command.IsValidFor(Program.GameStates))
     command.Execute(Program.Gamestates);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T17:25:22.537

To take back @Jon Ericson's introduction :

A dispatch table is a data structure that associates an index (or key, read @pst's comment below) value to an action. It's a rather elegant replacement for a switch-type statement.

Concerning the implementation part, have a look on [this question](https://stackoverflow.com/questions/715457/how-do-you-implement-a-dispatch-table-in-your-language-of-choice) and particularly to [this answer](https://stackoverflow.com/a/1056178/829728), which IMHO seems pretty correct but stays easy to understand.

# google-chrome - 为什么 Chrome 都比 Safari 快，尽管它们都使用 Webkit？

> ID：10436115
> 
> 赞同：2
> 
> 时间：2012-05-03T17:06:31.053
> 
> 标签：google-chrome, safari, webkit, browser

我觉得 Mac OS X 10.7.3 上的 Safari 5.1.5 和 Google Chrome 18.0 之间的区别非常明显。在重新加载页面或 XHR 请求时，差异最为明显。Chrome 是否以某种与 Safari 不同的方式缓存了所有这些请求，还是让谷歌“破解”了 Webkit 以提高速度？

谢谢！=)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T17:21:16.323

这确实很有趣，因为 Webkit-Engine 是由 Apple（！）而不是 Google 构建的。回答您的问题：Safari 5.1.5 使用 Webkit 534.55.3，Chrome 18 使用 535.19。一个微小的差异，但仍然是 Chrome 的一个优点。

我认为“速度”的增加仅仅是浏览器呈现页面的方式：Safari 似乎从头开始重建所有内容，而 Chrome（类似于 Opera）即使页面没有完全加载，也会构建页面。Chrome 已经做了很多这些“感觉更快”的改进（比如先加载浏览器 GUI，然后加载库。firefox 则相反。感觉更长）。

更新：来自 Webkit 团队的 Paul Irish 关于这个主题的一篇有趣的文章。[“为什么各地的 Webkit 不一样”](http://paulirish.com/2013/webkit-for-developers/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T17:14:50.960

这很有趣，因为 Chrome 在 PC 上并没有什么特别之处。事实上，在我的 Windows 7 PC 上，Safari 是我在 Maxthon-3（像 IE 一样操作，但更好）和 Opera（一键窗口循环和页面调整大小胜过一切）之后的第三个浏览器。

我遇到了 Chrome 的问题，例如：第一次提交通用 url 时出现 404 错误：使用多个标签启动时内存“吞噬”。

# android - 失败保存状态 - 目标不在片段管理器中 (setTargetFragment)

> ID：10436120
> 
> 赞同：38
> 
> 时间：2012-05-03T17:06:45.427
> 
> 标签：android, android-fragments

我有一次猴子崩溃

```
java.lang.IllegalStateException: Failure saving state: FragmentB has target not in fragment manager: FragmentA
at android.support.v4.app.FragmentManagerImpl.saveAllState(FragmentManager.java:1561)
at android.support.v4.app.FragmentActivity.onSaveInstanceState(FragmentActivity.java:475)
at com.acme.ParentActivity.onSaveInstanceState(Unknown Source) 
```

基本上 FragmentA 加载 FragmentB 并被`setTargetFragment`调用以设置 FragmentB 的目标片段。

FragmentB 然后简单地调用`getTargetFragment`它的`onCreate`方法并在需要时挂在目标上。

现在，我在`onSaveInstanceState`目标片段的任何调用中都没有做任何事情，比如将其设置为 null、进行任何`saveFragmentInstanceState`等`putFragment`调用。问题是我应该用它做些什么吗？

提前致谢，

彼得。

** 编辑 1 ** 我正在使用旧版本的支持库，感觉这可能会在最新版本中得到修复，如果是这种情况，将进一步测试并提供进一步的更新。但是，仍然有兴趣知道我是否应该对我目前没有做的目标片段做任何事情。

** 编辑 1 ** 已在支持库的版本 8 中修复（其他未尝试）。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2016-06-13T16:00:24.017

实际上，您应该做两件事来解决此问题：

**1.确保在从 FragmentA 启动 FragmentB 时使用 getChildFragmentManager() 而不是 getFragmentManager()**

调用 getChildFragmentManager() 将返回宿主 Fragment 的 FragmentManager，而 getFragmentManager() 将返回宿主 Activity 的 FragmentManager。使用 getChildFragmentManager() 很重要，因为您将一个 Fragment 嵌套在另一个 Fragment 中，因此父 Fragment 应该负责处理与嵌套 Fragment 的任何事务。如果您使用 getFragmentManager()，您将遇到您现在遇到的问题。

**2\. 不要使用 setTargetFragment() 和 getTargetFragment()，使用 getChildFragmentManager() 时它们将不起作用**

相反，使用 getParentFragment()。我相信现在Android中存在某种错误，即使您正确调用

`fragmentB.setTargetFragment(fragmentA, 0);`

然后显示 FragmentB，在配置更改后，从 FragmentB 调用 getTargetFragment() 将返回*自身*而不是 FragmentA。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-05-01T13:27:25.267

这是一个解决方法：

把它放在导致问题的片段中：

```
@Override
public void onSaveInstanceState(final Bundle outState) {
    setTargetFragment(null, -1);
            ... 
```

并记住在需要时将其设置为真正的目标片段。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-11-16T09:34:59.780

当显示来自另一个片段的 DialogFrament 并在 DialogFragment 上使用 setTargetFragment 时，我遇到了这个问题。显示 DialogFragment 时使用 getChildFragmentManager() 解决了该问题。

1.  ActivityA 添加了 FragmentA
2.  FragmentA 使用 ActivityA 的 FragmentManager 添加了 DialogFragmentB。
3.  调用 dialogFragmentB.setTargetFragment(fragmentA)
4.  删除了 FragmentA 并添加了 FragmentA 的新实例
5.  与 ActivityA 关联的 FragmentManager 仍然包含 DialogFragmentB，它以 FragmentA 的第一个实例作为目标片段。

这导致调用“失败保存状态 - 目标不在片段管理器中”异常。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-01-30T00:16:29.663

我们最近遇到了这个问题。我们已经实现了一个扩展 android.support.v4.app 的自定义适配器。**片段状态页面适配器**。使用 android.support.v4.app。**FragmentManager**，我们在pager中设置了几个fragment，以及pager之外的其他几个fragment。片段在单个活动中进行管理。在某些情况下，我们将非分页片段的目标（使用**setTargetFragment ）设置为可能包含或不包含在分页适配器中的片段。**因为**FragmentStatePagerAdapter**只维护了一定数量的 Fragment，那些被设置为目标的**FragmentStatePagerAdapter**被认为不再需要，被摧毁……如果具有这些目标的碎片仍然存在，则可能会出现不一致的状态。这导致每当应用程序失去焦点时（屏幕关闭或应用程序进入后台时）抛出异常，即调用**onSaveInstanceState**时。

为了防止这种异常，在**onSaveInstanceState**中，我们检查了片段管理器中当前有哪些片段。如果有任何不一致（即缺少“目标”片段），我们删除了具有该目标集的片段。在我们的例子中，我们只有三个片段来设置目标，所以我们确切地知道要寻找什么。

我不相信有任何其他方法可以处理这种情况，但如果有人有任何有用的反馈，将不胜感激。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-07-24T03:12:47.463

我刚刚遇到了这个问题，这就是我认为正在发生的事情以及我如何解决它：

例如，当设备旋转时，您的 FragmentA 实例正在被销毁，并且正在创建另一个实例。发生这种情况时，您的 FragmentB 会继续持有对不再存在的 FragmentA 的引用。

在这种情况下，您必须将 FragmentB 的目标重置为新的 FragmentA 实例。

我在 FragmentA 中使用以下代码做到了这一点：

```
@Override
    public void onAttach(Context context) {

        super.onAttach(context);

        FragmentB fragment = (FragmentB) getFragmentManager().findFragmentByTag(FragmentBtag);

        if (fragment != null) {
            fragment.setTargetFragment(this, 0);
        }

    } 
```

这样，每当 FragmentA 附加到上下文时，即：发生设备旋转，如果 FragmentB 是在第一手创建的（如果是，它将在 FragmentManager 上），则重置 FragmentB 的目标。

我希望它有所帮助。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-07-09T21:18:09.083

**确保您已将两个片段都添加到后台堆栈！**

在“目标”片段之上为结果添加新的“调用”片段时，我刚刚遇到了这个问题。最初，我遇到了同样的错误，只要我在使用它们时将两个片段都添加到后台堆栈，该错误就停止了。

该问题发生在屏幕旋转上，因此很容易重现。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-09-17T10:33:23.243

Pre-HoneyComb 和 post-Honeycomb 库之间的 onSaveInstance() 生命周期顺序几乎没有变化。请参考这篇文章了解更多信息：

[http://www.androiddesignpatterns.com/2013/08/fragment-transaction-commit-state-loss.html](http://www.androiddesignpatterns.com/2013/08/fragment-transaction-commit-state-loss.html)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-03-06T08:44:50.447

就我而言，问题是关于调用`setTargetFragment`错误的片段。

曾是： `FragmentA.setTargetFragment(FragmentB);`

应该： `FragmentB.setTargetFragment(FragmentA);`

# c# - SQL Dataadapter 拒绝从 Dataset 更新 DB

> ID：10436121
> 
> 赞同：0
> 
> 时间：2012-05-03T17:06:50.777
> 
> 标签：c#, mysql, ado.net, sql-update, dataset

所以我创建了这个数据集 ds 并通过 addrow("THIS","BLOWS",0) 其他地方向唯一的表添加一行。

datagridview 向我展示了添加一行确实有效，但它拒绝更新实际的 mySQL 数据库。就像 updatesdb() 方法甚至不存在一样。我的错误在哪里？

```
class Mitarbeiterdb{
    static MySqlConnection con = new MySqlConnection("***");
    MySqlDataAdapter da = new MySqlDataAdapter("SELECT * FROM mitarbeiter.mitarbeiter;", con);

    DataSet ds = new DataSet();

    public void setDataSet(){
        da.TableMappings.Add("table0", "Mitarbeiter");
        da.Fill(ds);  
    }

    public void addrow(string a,string b,int i){
        con.Open();
        DataRow tmprow;
        tmprow = ds.Tables[i].NewRow();
        tmprow[1] = a;
        tmprow[2] = b;
        tmprow.EndEdit();
        ds.Tables[i].Rows.Add(tmprow);
        updatedb();
        con.Close();
    }

    public void updatedb() {
         MySqlCommandBuilder cmb = new MySqlCommandBuilder(da);
         da.Update(ds);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T17:13:21.797

ADO 不够聪明，无法自行更新，您需要设置自己的更新语句并用要更新的值填充它。

da.UpdateCommand = ....

这是一个简单用法的链接...

[http://www.java2s.com/Code/CSharp/Database-ADO.net/UpdatetableusingSqlDataAdapter.htm](http://www.java2s.com/Code/CSharp/Database-ADO.net/UpdatetableusingSqlDataAdapter.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T17:19:20.460

在您的 updatedb() 方法中，您缺少 .AcceptChanges();

```
public void updatedb() {
     MySqlCommandBuilder cmb = new MySqlCommandBuilder(da);
     da.Update(ds);
     da.AcceptChanges();
} 
```

欲了解更多信息，请阅读[这里](http://msdn.microsoft.com/en-us/library/xzb1zw3x.aspx)

# php - 为什么我的会话变量不能跨站点工作？

> ID：10436122
> 
> 赞同：0
> 
> 时间：2012-05-03T17:06:55.650
> 
> 标签：php, html, session, header

为什么我的会话变量不能跨站点工作？

我显然是在我的代码中设置它们，否则以管理员身份登录不会重定向到管理页面。

如果有人对问题是什么有建议，为什么 $_SESSION 变量没有保存等，我将不胜感激。

使用 IIS 7 和 FastCGI，php.ini 是默认值。

**代码示例：**

```
<?php session_start();
/* Include database config file. */
include("db_config.php");
/* If POST request do code. */
if ($_SERVER['REQUEST_METHOD']=='POST') 
{
/* Set variables for form fields. */
$username=$_POST["username"];
$password=$_POST["password"];
/* Queries on login. */
$query_params=array($username,$password);
$query="SELECT * FROM users WHERE username=? AND password=?";
$qresults=sqlsrv_query($dbconnect,$query,$query_params);
$permission_q="SELECT permission FROM users WHERE username=? AND password=?";
$permission_qr=sqlsrv_query($dbconnect,$permission_q,$query_params);
$firstname_q="SELECT firstname FROM users WHERE username=? AND password=?";
$firstname_qr=sqlsrv_query($dbconnect,$firstname_q,$query_params);
$lastname_q="SELECT lastname FROM users WHERE username=? AND password=?";
$lastname_qr=sqlsrv_query($dbconnect,$lastname_q,$query_params);
/* If any queries fail then kill script. */
if(sqlsrv_fetch($firstname_qr)===false)
{
die("Firstname couldn't be verified, terminated connection.");
}
$firstname=sqlsrv_get_field($firstname_qr,0);
if(sqlsrv_fetch($lastname_qr)===false)
{
die("Lastname couldn't be verified, terminated connection.");
}
$lastname=sqlsrv_get_field($lastname_qr,0);
if(sqlsrv_fetch($permission_qr)===false)
{
die("Permissions could not be verified, terminating connection.");
}
$permissions=sqlsrv_get_field($permission_qr,0);
/* If the username and password query results exist then do code. */
if(isset($qresults))
{
/* Number of rows is fetch array of username and pass results. */
$num_rows=sqlsrv_fetch_array($qresults,SQLSRV_FETCH_NUMERIC);
/* If rows is not null or is set then do code. */
if($num_rows!=null)
{
$_SESSION['username']=$username;
$_SESSION['firstname']=$firstname;
$_SESSION['lastname']=$lastname;
$_SESSION['permissions']=$permissions;
/* If permissions is equivelant to admin send to admin page. */
if($_SESSION['permissions']==="admin")
{

session_write_close();
echo '<meta http-equiv="refresh" content="0; url=./content/admin_dash.php">';
die();
//endif
}
else
{

session_write_close();
echo '<meta http-equiv="refresh" content="0; url=./content/user_dash.php">';
die();
//endelse
}
//endif
}
else
{
//elseif num_rows not true
echo "Invalid Login.<br/>Your credentials did not match or there was an error.<br/>";
$_SESSION['username'] = '';
if(sqlsrv_errors(SQLSRV_ERR_ALL)==null)
{
echo "No errors detected.";
//endif
}
else
{
echo "Errors detected:<br/>";
print_r( sqlsrv_errors(SQLSRV_ERR_ALL));
//endelse
}
//endelse
}
//endif
}
else
{
die("Error with query. Contact your system admin.");
//endelse
}
//endif
}
else
{
die("Request was not POST. Please use login page.");
//endelse
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T17:09:06.047

因为这不是会话（通常）的工作方式。会话 cookie 只存储一个会话 ID。*会话中*的实际信息仅存储在服务器上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T17:10:01.037

cookie 只是使 PHP 能够查找存储在您的 Web 服务器上的会话变量（作为文件或在数据库中）。它增加了额外的安全性，因为人们无法嗅探数据值，也不需要 cookie 变得很长。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T17:10:53.900

如前所述，会话 cookie 仅存储会话 ID。

如果您想保存到具有自定义内容的 cookie，请参阅这篇文章。[http://davidwalsh.name/php-cookies](http://davidwalsh.name/php-cookies)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T17:58:24.420

我发现了这个问题，C:\Windows\Temp 文件夹权限没有设置为接受 IIS_IUSRS 用户，因此阻止 IIS 在 Temp 文件夹中保存任何内容，包括会话。

# python - Python 的 KeyError 的惯用 Clojure 版本

> ID：10436130
> 
> 赞同：3
> 
> 时间：2012-05-03T17:07:35.910
> 
> 标签：python, clojure, idioms

这个python应该怎么表达

```
gl_enums = ... # map from name to values for opengl enums
# use with gl_enums["enum name"] 
```

在clojure中？这行得通，但是对吗？

```
(def gl-enums ...) ; map from name to values for opengl enums
(defn gl-enum [k] (or (gl-enums k) (throw (SomeException.))))
; use with (gl-enum :enum-name) 
```

编辑：为澄清起见，这个问题是关于异常抛出部分，而不是映射定义部分

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T18:20:27.937

你原来的例子是好的。您也可能会遇到两种方法：

```
;; not very idiomatic
(defn example
  [m]
  (if (contains? m :name)
    (:name m)
    (throw (IllegalArgumentException. (format "key %s is missing" :name)))))

;; idiomatic
(defn example
  [m]
  (if-let [v (:name m)]
    v
    (throw (IllegalArgumentException. (format "key %s is missing" :name))))) 
```

[更多关于 clojure.core/if-let](http://clojuredocs.org/clojure_core/clojure.core/if-let "更多关于 if-let") [更多关于 clojure.core/contains?](http://clojuredocs.org/clojure_core/clojure.core/contains_q "有关 clojure.core/contains 的更多信息？")

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-03T17:28:49.443

只需使用常规哈希图：

```
(def gl-enums {:name1 "value1", :name2 "value2",
               :name3 "value3", ...}) 
```

如果您不想提供关键字（如`:keyword`）但更喜欢字符串，则需要使用`(get gl-enums str)`in`gl-enum`

# javascript - javascript / math - 项目围绕圆圈的不当旋转

> ID：10436132
> 
> 赞同：0
> 
> 时间：2012-05-03T17:07:43.333
> 
> 标签：javascript, math, geometry, three.js

我正在尝试将一系列平面排列成一个圆圈，“面向”中心，但是在经过 180 度后我得到了一些奇怪的结果。我的对象围绕圆圈正确分布，但旋转已关闭。我附上了截图，我的代码如下：我的方程式有什么问题？

```
var circleRadius = 12;
var diameter = circleRadius*2;
var centerX = -5;
var centerZ = -2.5;

var mpi = Math.PI/180;
var startRadians = startAngle + mpi;
var totalSpheres = 8;
var incrementAngle = 360/totalSpheres;
var incrementRadians = incrementAngle * mpi;

for ( var i = 0; i < totalSpheres; i ++ ) {

    var xp = centerX + Math.sin(startRadians) * circleRadius;
    var zp = centerZ + Math.cos(startRadians) * circleRadius;

    var camObj = new THREE.Mesh( new THREE.PlaneGeometry( 1*camSize, .75*camSize ), material );

    camObj.position.x = xp;
    camObj.position.z = zp;
    camObj.rotation.y = i*incrementAngle; //MH - do this without degrees
    console.log(camObj.rotation.y);
    startRadians += incrementRadians;

    scene.add( camObj );

} 
```

![对象对齐](../Images/98af55ab3985ef02a5d77d527243641e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T17:32:08.580

我可能是错的。从未使用过该库，但在 github 中查看它似乎旋转应该是弧度而不是度数。

```
var circleRadius = 12;
var diameter = circleRadius*2;
var centerX = -5;
var centerZ = -2.5;

var mpi = Math.PI/180;
var startRadians = startAngle + mpi;
var totalSpheres = 8;
var incrementAngle = 360/totalSpheres;
var incrementRadians = incrementAngle * mpi;

for ( var i = 0; i < totalSpheres; i ++ ) {

    var xp = centerX + Math.sin(startRadians) * circleRadius;
    var zp = centerZ + Math.cos(startRadians) * circleRadius;

    var camObj = new THREE.Mesh( new THREE.PlaneGeometry( 1*camSize, .75*camSize ), material );

    camObj.position.x = xp;
    camObj.position.z = zp;
    camObj.rotation.y = i*incrementAngle * (Math.PI/180.0); //MH - do this without degrees
    console.log(camObj.rotation.y);
    startRadians += incrementRadians;

    scene.add( camObj );

} 
```

# c# - 清除pictureBox/imout上的前一点F(s)

> ID：10436136
> 
> 赞同：0
> 
> 时间：2012-05-03T17:08:07.253
> 
> 标签：c#, image, drawing, picturebox

我的图片框中有不同的线条（黄色和蓝色），例如用以下方式绘制：

```
imout.Draw(new LineSegment2DF(new PointF(lastEndX, lastEndY), 
                              new PointF(lastEndX + avgX, lastEndY + avgY)), 
           new Bgr(Color.Yellow), 2); 
```

imout 变量已在前面的代码中的某处定义，例如：

```
imout = new Image<Bgr, byte>(new Size(maxX + 90, maxY + 90));  
pictureBox2.Image = imout.Bitmap; 
```

现在，当用户从 listBox3 中选择一个点时，将在这些线上绘制一个圆圈以向用户显示他指向的位置，如以下代码所示：

```
 private void listBox3_SelectedIndexChanged(object sender, EventArgs e)  
    {  
        var selection = listBox3.SelectedItem;    
        PointF selcF = (PointF)selection;    
        PointF RR = optFlowPonitsRawcoords.Find(p => p == selcF);    
        RR.Y = imout.Height - RR.Y;  
        imout.Draw(new CircleF(RR, 5), new Bgr(Color.Pink), 1);  
        pictureBox2.Image = imout.Bitmap;  
    } 
```

但是当用户从 listBox 中选择另一个点时，我希望在它们被清除之前绘制上一个点，并且只在图像上显示新的选定点。

这怎么可能？

# java - 很奇怪的OutOfMemoryError

> ID：10436140
> 
> 赞同：12
> 
> 时间：2012-05-03T17:08:25.177
> 
> 标签：java, out-of-memory, finalizer

一如既往，一个冗长的问题描述。

我们目前正在对我们的产品进行压力测试——我们现在面临一个奇怪的问题。一到两个小时后，堆空间开始增长，应用程序稍后会死掉。

分析应用程序显示大量的 Finalizer 对象，填充堆。好吧，我们认为“可能是奇怪的终结器线程减慢”问题，并审查了减少需要终结的对象数量（在这种情况下为 JNA 原生句柄）。无论如何都是个好主意，减少了数千个新对象......

接下来的测试显示了相同的模式，仅在一小时后并且没有那么陡峭。这次 Finalizer 源自在测试平台中大量使用的 FileInput- 和 FileOutput 流。所有资源都已关闭，但终结器不再清理。

我不知道为什么在 1 或 2 小时后（无例外），FinalizerThread 似乎突然停止工作。如果我们在某些线程中手动强制 System.runFinalization()，则分析器显示终结器已被清理。立即恢复测试会为终结器分配新的堆。

FinalizerThread 仍然存在，询问 jConsole 他在等待。

编辑

首先，用 HeapAnalyzer 检查堆没有发现任何新的/奇怪的东西。HeapAnalyzer 有一些不错的功能，但一开始我遇到了困难。我正在使用 jProfiler，它带有很好的堆检查工具，并且会一直使用它。

也许我错过了 HeapAnalyzer 中的一些杀手级功能？

其次，今天我们使用调试连接而不是分析器来设置测试 - 系统现在稳定了近 5 个小时。这似乎是太多终结器（在第一次审查中已减少）、分析器和 VM GC 策略的非常奇怪的组合。由于目前一切正常，没有真正的见解......

感谢您到目前为止的输入 - 也许您会继续关注并感兴趣（现在您可能有更多理由相信我们不会谈论简单的编程错误）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T10:57:09.903

我想用当前状态的摘要来结束这个问题。

最后一次测试现在已经超过 60 小时，没有任何问题。这导致我们得出以下总结/结论：

*   我们有一个使用大量对象的高吞吐量服务器，这些对象最终实现了“最终确定”。这些对象主要是 JNA 内存句柄和文件流。构建终结器的速度比 GC 和终结器线程能够清理的速度快，这个过程在大约 3 小时后失败。这是一个众所周知的现象（-> google）。
*   我们做了一些优化，使服务器摆脱了几乎所有的 JNA 终结器。此版本已通过附加的 jProfiler 进行了测试。
*   服务器比我们最初的尝试晚了几个小时……
*   分析器显示了大量的终结器，这一次主要是由文件流引起的。即使在暂停服务器一段时间后，该队列也没有被清理。
*   只有在手动触发“System.runFinalization()”后，队列才被清空。恢复服务器开始重新填充...
*   这仍然是莫名其妙的。我们现在猜测这是一些分析器与 GC/finalization 的交互。
*   为了调试可能导致非活动终结器线程的原因，我们分离了分析器并这次附加了调试器。
*   系统运行时没有明显的缺陷...... FinalizerThread 和 GC 都“绿色”。
*   我们恢复了测试（现在是第一次在没有附加 jConsole 的任何代理的情况下再次进行测试）并且它现在已经正常运行了 60 多个小时。所以显然最初的 JNA 重构解决了这个问题，只有分析会话增加了一些不确定性（来自 Heisenberg 的问候）。

管理终结器的其他策略例如在[http://cleversoft.wordpress.com/2011/05/14/out-of-memory-exception-from-finalizer-object-overflow/](http://cleversoft.wordpress.com/2011/05/14/out-of-memory-exception-from-finalizer-object-overflow/)中讨论（除了不太聪明的“不要使用终结器"..)。

感谢您的输入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T17:23:36.007

很难对您的困境给出具体的答案，但需要进行堆转储并通过 IBM 的 HeapAnalyzer 运行它。在以下位置搜索“堆分析器：[http](http://www.ibm.com/developerworks) ://www.ibm.com/developerworks （直接链接不断变化）。如果您没有覆盖 finalize，那么终结器线程“突然停止工作”似乎极不可能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T17:25:21.050

终结器有可能被阻止，但我不知道它怎么会简单地死掉。

如果您有很多 FileInputStream 和 FileOutputStream finalize() 方法，这表明您没有正确关闭文件。确保这些流始终在 finally 块中关闭或使用 Java 7 的 ARM。（自动资源管理）

> jConsole 他正在等待。

要等待它必须等待一个对象。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T18:24:21.770

FileInputStream 和 FileOutputStream 在它们的 finalize() 方法中有相同的注释：

```
. . .
/*
 * Finalizer should not release the FileDescriptor if another
 * stream is still using it. If the user directly invokes
 * close() then the FileDescriptor is also released.
 */
     runningFinalize.set(Boolean.TRUE); 
. . . 
```

这意味着您的终结器可能正在等待流被释放。这意味着，正如上面提到的 Joop Eggen，您的应用程序在关闭其中一个流时可能会做坏事。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T17:32:28.613

我的猜测：它是您自己的流（包装器）类中的覆盖关闭。由于流类通常是包装器并委托给其他人，我可以想象这样的嵌套`new A(new B(new C()))`可能会导致关闭时出现一些错误的逻辑。您应该寻找两次关闭，委托关闭。也许还有一些被遗忘的关闭（关闭错误的对象？）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-03T17:35:56.130

随着堆的缓慢增长，当 Java 垃圾收集器尝试在内存不足的情况下进行迟到的垃圾收集时，它可能会耗尽内存。[尝试使用-XX:+UseConcMarkSweepGC](http://docs.oracle.com/javase/6/docs/technotes/guides/vm/cms-6.html)打开并发标记和清除垃圾收集，看看您的问题是否消失。

# c# - 如何在 iOS 上打开本机 facebook 应用程序之外的链接？

> ID：10436141
> 
> 赞同：2
> 
> 时间：2012-05-03T17:08:28.140
> 
> 标签：c#, asp.net, facebook, facebook-c#-sdk

有人在我们的粉丝专页上分享链接后，用户点击它，该链接将在 iOS 上的 Native Facebook 应用程序中打开。

不幸的是，这弄乱了我网站的行为。

单击 Facebook 应用程序内的链接后，Facebook 应用程序将打开 URL site.com。Site.com 检测到移动用户并重定向到 m.site.com。m.site.com 是一个无法正常工作的网站。特别是 Facebook 连接和一些不正确对齐的页面元素。

我可以做些什么来在 iOS 的 Facebook 应用程序之外打开 m.site.com 吗？

目前，我有一个 Response.Redirect(http://m.site.com)。

也试过 window.top.location.href = "http://m.site.com"; 但它没有用。它保留在 Facebook iOS 应用程序中。

我在我的普通网站和移动网站上都使用 iPhone 4s、ASP.NET（不是 MVC）和 Facebook C# SDK。

我认为需要做的是修改我的 site.com 代码以告诉 iOS Facebook 应用程序在 safari 上打开移动网站 (m.site.com)。

# java - 选择条形图类别标签

> ID：10436142
> 
> 赞同：1
> 
> 时间：2012-05-03T17:08:32.990
> 
> 标签：java, jfreechart

我在带有多个类别标签的 Swing GUI 中使用 JFreeChart 条形图。对于每个标签，都有几个子类别标签。有很多酒吧。因此，每一个都非常小，几乎看不见。我希望能够放大特定类别。

是否可以使类别标签可点击？例如，通过给它添加一个监听器？然后我会单击一个类别标签并将显示的图表设置为仅显示该类别。

如果不是，那么使条更明显的另一种解决方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T15:31:20.263

我使用的鼠标监听器的伪代码：

```
chartPanel.addChartMouseListener(new ChartMouseListener() {

  @Override
  public void chartMouseClicked(ChartMouseEvent e) {
    if (e.getEntity().getClass() != CategoryLabelEntity.class) {
      return;
    }

    CategoryLabelEntity entity = (CategoryLabelEntity) e.getEntity();
    String category = (String) entity.getKey();

    //Using another dataSet, create a zoomedInChart 
    //composed only of values from that dataset
    chartPanel.setChart(zoomedInChart);
  }

  @Override
  public void chartMouseMoved(ChartMouseEvent e) {
    // do nothing
  }

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T23:21:11.233

最简单的方法是在您的`ChartFactory.createBarChart()`. 或者，使用[此处](https://stackoverflow.com/a/8219445/230513)`ChartMouseListener`所示的 a来执行一些其他操作。

编辑您的问题以包含[sscce](http://sscce.org/)可能有助于建议使用哪种方法。

# c# - Linq Query returning IQueryable > not IQueryable

> ID：10436143
> 
> 赞同：2
> 
> 时间：2012-05-03T17:08:33.107
> 
> 标签：c#, linq, linq-to-entities

I'm in the process of refactoring my EF Repository classes to make them testable, following the advice from this excellent blog post:

[https://blog.iannelson.uk/testing-linq-queries/](https://blog.iannelson.uk/testing-linq-queries/)

All is good and I am able also able to chain the IQueryable extension methods like in the blog post making things much more conscience and easier to read.

I have come across a hurdle relating to an associated `List<>`.

The domain entity is a User, and a user has a collection of Friends of type `List<User>` - standard social networking paradigm.

I want to search a subset of a users friends, say all the friends whose username begins with 'a'. So I do this:

```
 public static IQueryable<IEnumerable<User>> SelectFriendsUsernameStartsWith(this IQueryable<User> userQueryable, string searchQuery)
     {
        return userQueryable.Select(x => x.Friends.Where(y => y.Username.StartsWith(searchQuery)));
     } 
```

The problem is that this breaks my chaining. The return type is no longer `IQueryable<User>` its `IQueryable<IEnumerable<User>>` so the extension methods I wrote for `IQueryable<User>` can't be chained onto the end.

The type difference here doesn't make any sense to me since in my unit tests I have code that looks like this:

```
 IEnumerable<User> users = new HashSet<User>()
                                    {
                                        new User() {Username = "Aaron"},
                                        new User() {Username = "alex"},
                                        new User() {Username = "Ally"},
                                        new User() {Username = "anthony"},
                                        new User() {Username = "bob"},
                                        new User() {Username = "Bill"}
                                    };

        IQueryable<User> userQueryable = users.AsQueryable(); 
```

i.e. Calling `AsQueryable()` on an `IEnumerable<User>` returns an `IQueryable<User>` not (as in the example above) an `IQueryable<IEnumerable<User>>`

Can anyone shed any light on this?

What's the really difference between the two types and how do I force my example above to return me an `IQueryable<User>` not `IQueryable<IEnumerable<User>>` ?

Thanks!

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-03T17:11:24.240

Change `userQueryable.Select(...` to `userQueryable.SelectMany(...`

Currently your query does something like this:

"For each user, get me a list of all of their friends that start with something"

so you have a list of lists, so to speak. `SelectMany` is a way of saying, "turn each thing in this list into a sequence of things, and then concat those sequences together. The result is one big long list of things, rather than a list of lists of things.

(When I say "list" in this reply I really mean sequence, i.e. IEnumerable/IQueryable.)

# linux - 给定月份/年份的最后一个星期六

> ID：10436146
> 
> 赞同：2
> 
> 时间：2012-05-03T17:08:39.373
> 
> 标签：linux, unix, cal

在 Unix 中，我想查找给定月份和年份的最后一个星期六的日期（月份中的某天）。我知道`cal`会给我一个给定月份/年份的日历。什么是获得最后一个星期六的好方法？

更新：我想要一个可以应用于一周中任何一天的解决方案。例如，我也可以使用相同的方法来查找上周日或周三的日期。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T17:14:35.080

为此使用 awk。考虑一下：

```
cal 5 2013 | awk 'NF>6{a=$7} END{print a}' 
```

### 输出：

```
25 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T17:23:04.740

如果您不想只是管道/解析`cal`输出，则可以使用[算法来确定 date 的 weekday](http://5dspace-time.org/Calendar/Algorithm.html)，然后获取 12 月 31st 的工作日并向后移动使其成为星期六所需的天数。

但是解析 cal 可能更简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-12T18:38:44.117

对于这个问题，我有另一个答案，这是一个有点冗长的 Bash 脚本，效率不高，但易于理解。基本思想是循环给定月份和年份的第 22 天到第 31 天，并检查这些天中每一天的星期几`date +'%u'`。返回所需工作日的最后一天（例如星期六）存储在变量 中`RESULT_DAY`，该变量将包含循环后的结果。

```
#!/bin/bash

DAY_OF_WEEK=6 # 1=Monday, ..., 7=Sunday
THE_YEAR=2016
THE_MONTH=10

RESULT_DAY=0

YEAR_MONTH_STR=${THE_YEAR}"-"${THE_MONTH}  # Example value: "2016-10"

for DAYNO in 22 23 24 25 26 27 28 29 30 31
do
  DATE_TO_CHECK=${YEAR_MONTH_STR}"-"${DAYNO}
  DATE_RESULT=$(date --date=$DATE_TO_CHECK '+%u')
  if [ $? -eq 0 ]
  then
    if [ $DATE_RESULT -eq $DAY_OF_WEEK ]
    then
      RESULT_DAY=$DAYNO
    fi
  fi

done

RESULT_DATE_COMPLETE=${YEAR_MONTH_STR}"-"${RESULT_DAY}

echo -e "\nResult date (YYYY-MM-DD): "$(date --date=$RESULT_DATE_COMPLETE +'%Y-%m-%d (%A)') 
```

我们通过检查值*"0"*`date`来检查 的结果代码，因此我们可以忽略非法日期（例如 2 月 31 日，它不存在）。`$?`

 *一个月的第 22 天是我们必须考虑的最早日期，因为在最短的一个月中（非闰年的二月），这是最后一次出现的最早日期，例如星期六。*

# android - Phonegap 无法启动 GeoLocation 服务

> ID：10436149
> 
> 赞同：1
> 
> 时间：2012-05-03T17:08:57.637
> 
> 标签：android, cordova, w3c-geolocation

我正在使用 PhoneGap 1.5.0 开发 Android 应用程序。目前，我在启动 GeoLocation 服务时遇到了问题。这是奇怪的事情。我有 3 台 Android 设备 HTC Vivid、Galaxy S 和 Galaxy Tab（Android 版本：2.3.6、2.3.4、2.2）。

当我打电话

```
navigator.geolocation.getCurrentPosition(function(position){....}); 
```

它给了我“无法启动地理定位服务”的错误。这只发生在我的 HTC 手机上，我的其他设备工作正常并且能够获得当前位置。

请问有人可以帮忙吗？

提前致谢。

# c++ - 从 C++ 读取巨大的 txt 文件？

> ID：10436152
> 
> 赞同：-1
> 
> 时间：2012-05-03T17:09:09.783
> 
> 标签：c++, visual-studio, file, fstream

我正在尝试通过 C++ 阅读一个巨大的 txt。它有70mb。我的目标是逐行子串并生成另一个较小的 txt，其中仅包含我需要的信息。

我得到了下面的代码来读取文件。它适用于较小的文件，但不适用于 70mb 的怪物。

```
#include "stdafx.h"
#include <iostream>
#include <fstream>
#include <string>

using namespace std;

int main()
{
  ifstream myReadFile;
  myReadFile.open("C:/Users/Lucas/Documents/apps/COTAHIST_A2010.txt");
  char output[100];
  if (myReadFile.is_open()) {
    while (myReadFile.eof()!=1) {
         myReadFile >> output;
         cout<<output;
         cout<<"\n";
     }

    }
  system("PAUSE");
  return 0;
} 
```

这是我得到的错误：SeparadorDeAcoes.exe 中 0x50c819bc (msvcp100d.dll) 处的未处理异常：0xC0000005：访问冲突读取位置 0x3a70fcbc。

如果有人可以用 C 甚至 C# 指出解决方案，那也是可以接受的！

谢谢 =)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T17:12:58.850

您的`char output[100]`缓冲区无法获取其中一行的内容。

理想情况下，您应该使用字符串目标，而不是`char[]`缓冲区。

**编辑**正如已经指出的那样，这是不好的做法，并导致阅读最后一行两次或最后一行空无一物。更正确的循环写法是：

```
string output;
while (getline(myReadFile, output)) {
  cout<<output<<"\n";
} 
```

**编辑 - 在这里留下坏的，邪恶的代码：

快速重写您的内部 while 循环可能是：

```
string output;
while (myReadFile.good()) {
  getline(myReadFile, output);
  cout<<output<<"\n";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T17:12:31.023

我认为您的问题是您的其中一行超过 100 个字符。需要增加字符数组的大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T17:18:51.300

您没有使用`std::string`，但包含头文件。决定。使用其中一个`std::string`或字符数组。

此外，使用`std::istream::read`数组的大小并将其提供给函数。您需要重复多次，因为 100 个字符远小于 70mb。

尝试使用动态内存分配更大的数组：

```
const unsigned int array_size = 1024 * 1024 * 1024;

int main(void)
{
  char * output;
//...
  output = new char [array_size];
// read into output
// ...
// clean up
  delete [] output;
  return EXIT_SUCCESS;
} 
```

如果您使用`std::string`，请使用带有大小参数的构造函数，以便您可以指定字符串的初始大小。

# facebook - Javascript sdk 在 facebook 墙上自动发布

> ID：10436157
> 
> 赞同：0
> 
> 时间：2012-05-03T17:09:17.637
> 
> 标签：facebook

```
<script>
  function postToWall() {
    var params = {};
    params['message'] = 'hello visit lol';
    params['name'] = 'cazzo frega';
    params['link'] = 'http://apps.facebook.com/xxxxxxxxxxxxxxxx/';
    params['picture'] = 'http://2.gravatar.com/avatar/7da5bead8xxxxxxxxxxxxxx75bac';
    params['description'] = 'test di frase';

    FB.api('/me/feed', 'post', params, function(response) {
      if (!response || response.error) {
        alert('lol');
      } else {
        alert('ok');
      }
    });
  }
</script>

<div id="fb-root"></div>
<script src="http://connect.facebook.net/en_US/all.js"></script>
<script>
  FB.init({ 
    appId:xxxxxxxxxxxxxxx, cookie:true, 
    status:true, xfbml:true
  });
</script>
<a href="javascript:postToWall()">click</a> 
```

在 facebook 的墙上发布一条消息，但不会显示框对话框。但是，如果我想自动获得它，无需点击？我试过 whit body onload="javascript:fucntion(); 但得到一个错误......你知道吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T14:20:45.487

如果他已授权您的 Facebook 开发者应用在他的墙上发布，您可以发布到任何用户的墙上。

用户在登录您的应用程序时可以授予访问权限（范围：Publish_stream）。您必须在此处指定权限。示例代码如下。

```
<div id="fb-root"></div>

<script type="text/javascript>
var appid = $('#FB_appId').val();
var appsecret = $('#FB_secretkey').val();
        window.fbAsyncInit = function () {
            FB.init({
                appId: appid, // App ID
                status: true, // check login status
                cookie: true, // enable cookies to allow the server to access the session
                xfbml: true  // parse XFBML
            });

        };

        // Load the SDK Asynchronously
        (function (d) {
            var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
            if (d.getElementById(id)) { return; }
            js = d.createElement('script'); js.id = id; js.async = true;
            js.src = "//connect.facebook.net/en_US/all.js";
            ref.parentNode.insertBefore(js, ref);
        } (document));

                    FB.login(function (response) {
                        if (response.authResponse) {
                            alert(response.authResponse.userID);

                        } else {

                            console.log('User cancelled authorization');
                        }
                    }, { scope: 'publish_stream' });

</script> 
```

在这里您可以获取登录用户的 userId。

然后您必须通过传递 applicationId 和 applicationsecretkey 来获取 AppLication 访问令牌，如下所示：

```
string accesstoken = new System.Net.WebClient().DownloadString("https://graph.facebook.com/oauth/access_token?client_id= fbappId &client_secret= fbsecretkey &grant_type=client_credentials"); 
```

现在你有四个参数

*   用户身份
*   访问令牌
*   应用 ID
*   应用秘密

使用这些参数，您可以按如下方式发布到他的墙上：

```
 $.ajax({
                type: 'POST',
                url: 'https://graph.facebook.com/' + fb_userid + '/feed?method=post',
                data: {
                    access_token: fb_accesstoken,
                    message: 'Hello world! My first post'
                },
                success: function (data) {

                   alert(data.Id);
                },
                error: function (data) {

                    alert('Failed to post  to facebook');
                },
                dataType: "jsonp"
            }); 
```

成功函数返回 Facebook 帖子 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T18:42:04.653

我猜想通过 javascript 使用 FB.ui() 事件时仍然会有弹出对话框。您可以尝试通过 PHP 的图形 API 发布内容。首先获得 stream_publish 权限并使用它来执行 AJAX 调用。

你可以看看这个例子：[http ://www.facebook.com/pages/Helper-Component-Community/222933037808340?sk=app_412923142052609](http://www.facebook.com/pages/Helper-Component-Community/222933037808340?sk=app_412923142052609)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T17:48:43.830

你需要确保你请求“stream_publish”权限，如果你有它，你可以使用上面的代码自动发布。未经许可，它会弹出蓝色对话框。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T07:57:17.080

你需要把

```
<div id="fb-root"></div>
<script src="http://connect.facebook.net/en_US/all.js"></script> 
```

在上面 ：）.....................

# extjs4 - 服务器未收到 POST 值 - 播放框架和 extjs

> ID：10436160
> 
> 赞同：1
> 
> 时间：2012-05-03T17:09:21.530
> 
> 标签：extjs4, playframework-2.0

我正在使用 playframework 2 和 extjs4 构建网络服务。直到今天，我已经设法克服了任何障碍。但这是我一个人无法应对的事情。我跟着[教程](http://www.playframework.org/documentation/2.0/JavaForms)，但它没有帮助我。嗯，起初确实如此。我知道它有效，我能够向数据库（mongodb）添加一些值。我怀疑它是否重要，但是：

*   一切正常，我在数据库中添加了一些测试数据
*   我用Java写了一些其他方法
*   我`db.Category.remove()`在我的 mongo 收藏中使用过
*   服务器现在无法从表单接收任何值

我有`Ext.FormPanel`2 个字段：

```
items: [
    { 
        id: 'categoryName',
        fieldLabel: 'Category name', 
        name: 'categoryName', 
        allowBlank: false 
    },{
        xtype: 'textarea',
        id: 'categoryDescription',
        fieldLabel: 'Description',
        name: 'categoryDescription',
        allowBlank: true
    }
] 
```

对应`Model`的类如下所示：

```
@MongoCollection(name = "Category")
public class CategoryModel{
    private String categoryName;
    private String categoryDescription;

    @JsonProperty("categoryName")
    public String getName() {
        return categoryName;
    }

    @JsonProperty("categoryName")
    public void setName(String name) {
        this.categoryName = name;
    }

    @JsonProperty("categoryDescription")
    public String getDescription() {
        return categoryDescription;
    }

    @JsonProperty("categoryDescription")
    public void setDescription(String description) {
        this.categoryDescription = description;
    }

    public String toString(){
        ObjectMapper mapper = new ObjectMapper();
        String json = null;
        try {
            json = mapper.writeValueAsString(this);
        } catch (JsonGenerationException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (JsonMappingException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return json;
    }
} 
```

最后，这是我想要接收值的地方：

```
Form<CategoryModel> categoryForm = form(CategoryModel.class);
System.out.println(categoryForm); 
```

Play 控制台的输出：

`Form(of=class kunto.models.CategoryModel, data={}, value=None, errors={})`

Firebug 显示 POST 值正在正确发送：

```
categoryDescription test
categoryName    test 
```

我`POST`在服务器端为这个特定请求定义了 conf/routes 中的请求类型。

我有两个问题：

*   该怎么做才能解决它？
*   更重要的是，为什么会这样？

**编辑** 正如@adis 建议的那样：

```
Form<CategoryModel> categoryForm = form(CategoryModel.class).bindFromRequest();
System.out.println(categoryForm);
System.out.println(categoryForm.data()); 
```

输出：

```
Form(of=class kunto.models.CategoryModel, data={categoryName=test, categoryDescription=test}, value=Some({"categoryName":null,"categoryDescription":null}), errors={})
{categoryName=test, categoryDescription=test} 
```

我也查了

```
CategoryModel categoryModel = form(CategoryModel.class).bindFromRequest().get();
System.out.println(categoryModel); 
```

它输出：`{"categoryName":null,"categoryDescription":null}`

任何人都可以解释这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T19:44:57.623

如评论所述，您必须通过以下方式将请求绑定到模型：

```
 Form<CategoryModel> categoryForm = form(CategoryModel.class).bindFromRequest(); 
```

如果您已定义它们，这将允许您检查模型中的属性，例如：@Contraints.Required。

绑定后，您将获得表单对象和`get`模型实例：

```
CategoryModel newCatModel = categoryForm.get(); 
```

这应该为您提供一个模型实例，其中填充了来自您的 post reqeust 的数据。通常这种方法看起来像：

```
Form<Task> taskForm = form(Task.class).bindFromRequest();

if (taskForm.hasErrors()) {  // check for constraints
    Logger.info("Error:" + taskForm);
    return badRequest(views.html.task.create.render(taskForm));
}
// here get the model instance
Task newTask = taskForm.get(); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T10:36:15.300

只是一个猜测，但你不应该注释属性而不是吸气剂吗？

```
@JsonProperty("description")
public void setDescription(String description) {
    this.categoryDescription = description;
} 
```

应该

```
@JsonProperty("description")
private String description; 
```

您在上面的代码中也存在差异.. 描述的 getter 绑定到“categoryDe​​scription”，而 setter 绑定到“description”

# sql - Oracle SQL PLS-00103 创建包体时出错

> ID：10436163
> 
> 赞同：0
> 
> 时间：2012-05-03T17:09:52.783
> 
> 标签：sql, oracle, package, pls-00103

**我收到以下错误：**

> 由于以下原因，创建包操作不成功：第 41 行的错误：PLS-00103：在预期以下情况之一时遇到符号“文件结束”：end not pragma final instantiable order overriding static member constructor map

**代码如下：**

```
CREATE OR REPLACE PACKAGE BODY update_quantity 
IS

PROCEDURE set_new_quantity(product_idProduct IN NUMBER, order_idOrder IN NUMBER, newquantity IN    NUMBER)
IS
BEGIN
 UPDATE Order_item o
 SET o.quantity = newquantity
 WHERE o.product_idProduct = product_idProduct     
        AND o.order_idOrder = order_idOrder; 

--EXCEPTION
      --WHEN NO_DATA_FOUND THEN
 --RAISE_APPLICATION_ERROR (-20100, 'No such quantity or order');

END set_new_quantity;

FUNCTION FUNCTION existing_quantity_f(product_idProduct IN NUMBER, order_idOrder IN NUMBER)  RETURN NUMBER

IS

existing_newquantity NUMBER(4);

BEGIN
SELECT o.quantity INTO existing_newquantity 
FROM ORDER_item o
WHERE
        o.product_idProduct = product_idProduct     
        AND o.order_idOrder = order_idOrder; 

RETURN (existing_newquantity);

--EXCEPTION
     -- WHEN NO_DATA_FOUND THEN
--RAISE_APPLICATION_ERROR (-20100, 'No such employee or project');

END existing_quantity_f; 
```

我已经注释掉了异常，因为最初认为这可能是一个问题，但错误仍然存​​在。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T17:12:44.377

您需要在包体的末尾添加以下语句

```
END update_quantity; 
```

# actionscript-3 - AIR 安装：它可以覆盖以前的安装吗？

> ID：10436164
> 
> 赞同：0
> 
> 时间：2012-05-03T17:09:55.483
> 
> 标签：actionscript-3, apache-flex, air

我有一个 AIR EXE，我将它打包在一个安装文件中。安装时失败，因为该应用程序的先前安装已经存在。它不能像其他所有软件一样工作并覆盖它吗？

感谢您的任何提示！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T17:23:06.063

如果还没有这样做，您可能会尝试将版本号更改为后一个版本。这样，它将把它视为对软件的更新，而不是对软件的过度写入。只是猜测，没有看到任何代码。

# sql - 嵌套查询中的存在子句如何与 null 一起使用？

> ID：10436166
> 
> 赞同：0
> 
> 时间：2012-05-03T17:09:57.603
> 
> 标签：sql

根据 sql server，Null 不等同于 sql 中的任何东西，但以下查询返回已下订单的所有产品。

```
Select * from products 
where exists (select null from orderdetails 
where orderdetails.product_id = products.product_id 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T17:12:48.227

[Exists](http://msdn.microsoft.com/en-us/library/ms188336.aspx)测试是否存在行。它不检查值。您可以使用`where exists (select * ...)`或`where exists(select 1 ...)`。这不会有什么不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T17:18:20.340

`Exists`测试以查看包含的语句是否返回任何行。

我们将一步一步地遵循这一点。

* * *

```
select null from orderdetails 
where orderdetails.product_id = products.product_id 
```

使用给定的 product_id返回包含`null`orderdetails 表中每个订单的行。

* * *

```
exists (select null from orderdetails 
where orderdetails.product_id = products.product_id) 
```

如果子查询返回任何行，则返回 true（如果表中有带有该 product_id 的订单，我们将有包含 的行`null`）

* * *

```
Select * from products 
where exists (select null from orderdetails 
where orderdetails.product_id = products.product_id) 
```

返回 orderdetail 表中存在任何订单的每个产品。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T17:14:50.757

该`exists`子句检查是否存在：子查询是否返回*任何*数据。它不担心数据本身。

`exists`如果子查询返回*任何内容*，则为真。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T17:15:40.507

> Exists 如果子查询包含任何行，则返回 TRUE。

你正在做的是选择空；这将返回一行空值，因此条件为真

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T17:12:31.650

尝试，而不是`select null`，选择 id，主键。

# python - Numpy 高级切片

> ID：10436168
> 
> 赞同：1
> 
> 时间：2012-05-03T17:10:04.500
> 
> 标签：python, numpy, slice

除了第二列和最后一列之间的列之外，我正在尝试对下面的数组进行切片以获取第 2 行和第 3 行以及第一列，但是我尝试过的每个切片似乎都不起作用。例如，下面的第一个打印语句由于括号中的 : 给出了语法错误。我也尝试简单地连接数组，但我认为这不是解决这个问题的最有效方法。

```
import numpy as np
y = np.arange(35).reshape(5, 7)

# My ultimate goal is to do a slice similar to this expression, but this of course gives
# an error. 
print y[[1, 2], [0, 2:-1]]

# This works, but I feel it is inefficient, although I could be wrong.
print np.hstack((y[[1, 2], 0][:, np.newaxis], y[[1, 2], 2:-1])) 
```

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T17:38:06.320

我不知道这是否是您要求的，但请尝试

```
In [11]: y[2:4,[1,3,4,5,6]]
Out[11]: 
array([[15, 17, 18, 19, 20],
       [22, 24, 25, 26, 27]])

In [12]: 
```

Numpy 可以像标准 Python 列表一样被切片，但尺寸增加了一些技巧，但我仍然发现这个解决方案与嵌套或循环重塑相比非常优雅，但有时​​这并不总是最终的解决方案。

编辑：

它看起来不太好，但比重塑或巨大的矩阵变化要好

`y[1:3, [0, 2:-1]]`这与无需重塑数组或遍历多余元素的说法相同，您可以通过制作`[0] +`该维度中剩余列的列表来指定您关心的索引。

```
In [33]: y[1:3, [0] + list(xrange(2,y.shape[1]))]
Out[33]: 
array([[ 7,  9, 10, 11, 12, 13],
       [14, 16, 17, 18, 19, 20]]) 
```

# php - 没有组的权限和用户

> ID：10436171
> 
> 赞同：1
> 
> 时间：2012-05-03T17:10:11.380
> 
> 标签：php, apache, apache2

我创建了一个没有组的用户来在 Windows 系统上启动 apache 服务，令我惊讶的是，即使在目录或任何目录中没有为此用户设置安全设置，它也可以启动 httpd.exe，这是最好的练习为该用户分配一个组，如果是，那么是哪个？（使用本地，无网络，尽可能低的权限才能运行服务）

那么如何为没有组的用户设置默认值？以及使用能够运行服务的最低权限为 apache 运行用户服务帐户的最佳组是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T17:18:43.053

您应该将 Apache 作为服务运行。我建议阅读本指南。[http://httpd.apache.org/docs/2.0/platform/windows.html](http://httpd.apache.org/docs/2.0/platform/windows.html)

# macos - 确定滚动条是覆盖还是遗留

> ID：10436172
> 
> 赞同：2
> 
> 时间：2012-05-03T17:10:14.260
> 
> 标签：macos, cocoa

我有一个滚动视图，它有一个自定义视图作为文档视图。customview 的大小在我的代码中计算为

customview的高度=scrollview的高度-scroller的高度

我的应用程序是用 10.5 编译的，并且在 10.5/10.6 上运行良好，如果使用外接鼠标，它在 10.7 上也运行良好。

但是如果我在 10.7 上运行并且我在 lion 上使用内置的多点触控板，滚动条就是一个覆盖层。所以高度应该是自定义视图的高度=滚动视图的高度

现在我应该怎么做才能解决这个问题..

-谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T03:02:01.087

向 NSScroller 询问[相关控件大小和滚动条样式的滚动条的高度，](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSScroller_Class/Reference/Reference.html#//apple_ref/occ/clm/NSScroller/scrollerWidthForControlSize%3ascrollerStyle%3a)后者应该[从滚动视图](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSScrollView_Class/Reference/Reference.html#//apple_ref/occ/instm/NSScrollView/scrollerStyle)中获得。

请注意，正确的滚动条样式可以随时更改，例如插入或拔出鼠标或轨迹球时。您可能需要观察[相关通知](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSScroller_Class/Reference/Reference.html#//apple_ref/c/data/NSPreferredScrollerStyleDidChangeNotification)，并在收到通知时重新计算。

# python - 网络速度限制

> ID：10436182
> 
> 赞同：0
> 
> 时间：2012-05-03T17:10:46.807
> 
> 标签：python, webkit, protocols, pygtk, throttling

我正在尝试使用 Python+pygtk+webkit 构建浏览器。现在，我想限制连接速度（即）加载网页或下载速度的时间..主要是 http ..

那么，有没有我可以使用的任何协议或 webkit 方法。下面是我的浏览器代码。提前谢谢！！

```
import webkit
import gobject

class Browser:
    default_site = "http://stackoverflow.com/"

    def delete_event(self, widget, event, data=None):
        return False

    def destroy(self, widget, data=None):
        gtk.main_quit()

    def __init__(self):
        gobject.threads_init()
        self.window = gtk.Window(gtk.WINDOW_TOPLEVEL)
        self.window.set_resizable(True)
        self.window.connect("delete_event", self.delete_event)
        self.window.connect("destroy", self.destroy)

        #webkit.WebView allows us to embed a webkit browser
        #it takes care of going backwards/fowards/reloading
        #it even handles flash
        self.web_view = webkit.WebView()
        self.web_view.open(self.default_site)

        toolbar = gtk.Toolbar()

        #create the back button and connect the action to
        #allow us to go backwards using webkit
        self.back_button = gtk.ToolButton(gtk.STOCK_GO_BACK)
        self.back_button.connect("clicked", self.go_back)

        #same idea for forward button
        self.forward_button = gtk.ToolButton(gtk.STOCK_GO_FORWARD)
        self.forward_button.connect("clicked", self.go_forward)

        #again for refresh
        refresh_button = gtk.ToolButton(gtk.STOCK_REFRESH)
        refresh_button.connect("clicked", self.refresh)

        #add the buttons to the toolbar
        toolbar.add(self.back_button)
        toolbar.add(self.forward_button)
        toolbar.add(refresh_button)

        #entry bar for typing in and display URLs, when they type in a site
        #and hit enter the on_active function is called
        self.url_bar = gtk.Entry()
        self.url_bar.connect("activate", self.on_active)

        #anytime a site is loaded the update_buttons will be called
        self.web_view.connect("load_committed", self.update_buttons)

        scroll_window = gtk.ScrolledWindow(None, None)
        scroll_window.add(self.web_view)

        vbox = gtk.VBox(False, 0)
        vbox.pack_start(toolbar, False, True, 0)
        vbox.pack_start(self.url_bar, False, True, 0)
        vbox.add(scroll_window)

        self.window.add(vbox)
        self.window.show_all()

    def on_active(self, widge, data=None):
        '''When the user enters an address in the bar, we check to make
           sure they added the http://, if not we add it for them.  Once
           the url is correct, we just ask webkit to open that site.'''
        url = self.url_bar.get_text()
        try:
            url.index("://")
        except:
            url = "http://"+url
        self.url_bar.set_text(url)
        self.web_view.open(url)

    def go_back(self, widget, data=None):
        '''Webkit will remember the links and this will allow us to go
           backwards.'''
        self.web_view.go_back()

    def go_forward(self, widget, data=None):
        '''Webkit will remember the links and this will allow us to go
           forwards.'''
        self.web_view.go_forward()

    def refresh(self, widget, data=None):
        '''Simple makes webkit reload the current back.'''
        self.web_view.reload()

    def update_buttons(self, widget, data=None):
        '''Gets the current url entry and puts that into the url bar.
           It then checks to see if we can go back, if we can it makes the
           back button clickable.  Then it does the same for the foward
           button.'''
        #self.url_bar.set_text( widget.get_main_frame().get_uri() )
        url = str(widget.get_main_frame().get_uri())
        print url
        if (url == "http://www.facebook.com/"):
            self.__go("age_error.html")
        else:    
            self.url_bar.set_text( widget.get_main_frame().get_uri() )
            print  widget.get_main_frame().get_uri() 
            self.back_button.set_sensitive(self.web_view.can_go_back())
            self.forward_button.set_sensitive(self.web_view.can_go_forward())

    def main(self):
        gtk.main()

if __name__ == "__main__":
    browser = Browser()

    browser.main() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T17:16:44.987

如果有办法使用您自己的发送/接收代码，您可以将其实现为 read()+sleep()。例如，假设您希望它使用“50% 带宽”，您将对 read() 计时，然后休眠同样长的时间。

# html - 具有相对 URL 的代理

> ID：10436183
> 
> 赞同：0
> 
> 时间：2012-05-03T17:10:50.193
> 
> 标签：html, proxy, web, response

我正在尝试创建一个从另一个网站检索内容的代理网页。

加载 html 内容，但找不到使用相对 url 的 javascript/css/images，因为它们指向本地服务器。

在不解析内容和重写 url 的情况下（特别是因为一些 url 是通过 javascript 生成的），有没有办法通过 response.headers 指定基本 url（如在 html 头中）来欺骗浏览器，以便页面还能继续运作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T17:27:17.207

尝试 Content-Base 响应标头，例如

```
Content-base: http://google.com/ 
```

# ios - 使用 KVO 与 NSNotificationCenter 观察对可变数组的更改

> ID：10436185
> 
> 赞同：19
> 
> 时间：2012-05-03T17:10:56.293
> 
> 标签：ios, model-view-controller, delegates, key-value-observing, nsnotificationcenter

在我的模型中，我有一组称为事件的对象。我希望每当将新对象添加到事件时通知我的控制器。

我认为这样做的一个好方法是使用 KVO 模式在事件发生变化时得到通知（从添加的新对象）

```
// AppDelegate
// events is a NSMutableArray @property/@synthesize etc...

[appDelagate addObserver:self
               forKeyPath:@"events"
                  options:NSKeyValueObservingOptionNew
                  context:NULL]; 
```

但是没有调用*observeValueForKeyPath*方法，我发现数组不符合 KVO :-(

一种选择是通过为 keyPath调用*willChangeValueForKey*来手动触发该方法

```
// ViewController
[self willChangeValueForKey:@"events"];
[self.events addObject:event];
[self didChangeValueForKey:@"events"]; 
```

但这感觉很重，因为我可能还应该跟踪事件数组的前后状态，以便可以从*observeValueForKeyPath*方法访问它。

一种方法是使用标准数组（而不是可变数组）并在每次我想添加一个新对象时创建/设置一个新的事件实例，或者我可以创建一个单独的属性来跟踪有多少项目在可变数组（我希望你能观察到 @"events.count" ）。

另一种选择是使用 NSNotificationCenter。我还阅读了一些建议使用块的答案（但我不知道从哪里开始）。

最后，我可以在我的委托中保留我的控制器实例并发送相关消息吗？

```
// Delegate
[myController eventsDidChange]; 
```

保留委托对控制器的引用是否很奇怪？

我正在努力了解如何选择最佳使用方法，因此非常感谢任何有关性能、未来代码灵活性和最佳实践的建议！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-03T17:39:00.250

您不应该为可变集合创建直接的公共属性，以避免它们在您不知情的情况下发生变异。`NSArray`本身不是可观察的键值对，但您的一对多*属性* `@"events"`是。以下是如何观察它：

首先，为不可变集合声明一个公共属性：

```
@interface Model
@property (nonatomic, copy) NSArray *events;
@end 
```

然后在你的实现中用一个可变的 ivar 支持它：

```
@interface Model ()
{
    NSMutableArray *_events;
}
@end 
```

并覆盖 getter 和 setter：

```
@implementation Model

@synthesize events = _events;

- (NSArray *)events
{
    return [_events copy];
}

- (void)setEvents:(NSArray *)events
{
    if ([_events isEqualToArray:events] == NO)
    {
        _events = [events mutableCopy];
    }
}

@end 
```

如果其他对象需要给你的模型添加事件，他们可以通过调用`-[Model mutableArrayValueForKey:@"events"]`.

```
NSMutableArray *events = [modelInstance mutableArrayValueForKey:@"events"];
[events addObject:newEvent]; 
```

这将通过每次使用新集合设置属性来触发 KVO 通知。为了获得更好的性能和更精细的控制，请实现其余的[数组访问器](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueCoding/Articles/AccessorConventions.html#//apple_ref/doc/uid/20002174-178830-BAJEDEFB)。

另请参阅：[观察 NSMutableArray 以进行插入/删除](https://stackoverflow.com/questions/302365/observing-an-nsmutablearray-for-insertion-removal)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-20T23:34:02.570

根据[访问器方法的文档](https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/KeyValueCoding/Articles/AccessorConventions.html#//apple_ref/doc/uid/20002174-SW5)，您应该实现：

```
- (void)addEventsObject:(Event*)e
{
    [_events addObject:e];
}

- (void)removeEventsObject:(Event*)e
{
    [_events removeObject:e];
} 
```

然后 KVO 将在调用这些通知时触发通知。

# silverlight - Silverlight：将事件附加到 ItemsControl 中的项目

> ID：10436186
> 
> 赞同：1
> 
> 时间：2012-05-03T17:10:57.813
> 
> 标签：silverlight, events, templates, itemscontrol

我正在尝试将事件链接到驻留在项目控件中的单选按钮。

我的模板如下：

```
<ItemsControl x:Name="RadioButtonsItemsControl" Height="auto" Width="auto" ItemsSource="{TemplateBinding MapLayers}" >

                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>

                                <StackPanel Orientation="{TemplateBinding RadioButtonOrientation}" Margin="5"/>
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>

                        <ItemsControl.ItemTemplate>
                            <DataTemplate>

                                <RadioButton Content="{Binding ID}" IsChecked="{Binding Visible, Mode=TwoWay}"
                                    IsEnabled = "{Binding IsInScaleRange}"
                                    ToolTipService.ToolTip=""
                                    GroupName="BaseLayer"
                                    Foreground="{TemplateBinding ForeGroundBrush}" FontSize="11">

                                </RadioButton>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl> 
```

在自定义控件的 .cs 文件中，我有一个用于 itemscontrol 的模板部分，并附加了事件

```
public override void OnApplyTemplate()
    {
        base.OnApplyTemplate();

        radioButtonsItemsControl = GetTemplateChild("RadioButtonsItemsControl") as ItemsControl;
        if (radioButtonsItemsControl != null) radioButtonsItemsControl.MouseLeftButtonDown += radioButtonsItemsControlMouseLeftButtonDown;
    } 
```

radioButtonsItemsControl 不等于 null （并且在此阶段尚未填充单选按钮），但 radioButtonsItemsControlMouseLeftButtonDown 事件仍应在稍后我单击项目控件时注册。

```
 void radioButtonsItemsControlMouseLeftButtonDown(object sender, MouseButtonEventArgs e)
    {
        RadioButton radioButton = e.OriginalSource as RadioButton;
        if (radioButton != null) radioButton.Checked += OnChecked;
    } 
```

当我单击我的项目控件时，这永远不会触发：radioButtonsItemsControlMouseLeftButtonDown。

不确定我是否以正确的方式进行此操作，因此我对将事件附加到 ItemsControls 内的项目的替代方法持开放态度。

谢谢，迈克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T01:06:35.700

一般来说，为了附加事件，我会做一个部分类扩展，并给它一个可以绑定的命令哈希表。在您的情况下，最简单的方法是定义和绑定列表后设置的事件。例如，集合上的属性 Visible 将检查是否定义了某个事件，如果是，则调用它。例如

创建一个事件来查看（OnRadioButtonChanged）；加载列表后附加到事件。（一旦列表被清除以重新加载，就分离事件）。一旦事件存在，当可见性被切换时，它将调用发泄。代码示例如下：

```
public string Visibility
    {
        get
        {
            return __fVisibility;
        }
        set
        {
            __fVisibility = value;
            this.NotifyPropertyChanged("Visibility");
            if (!object.ReferenceEquals(OnVisibilityChanged, null))
                OnVisibilityChanged(null);
        }
    } 
```

这对我来说是更清洁和更简单的解决方案。:)

# .net - 使用 .NET 4.5 编写的软件需要什么版本的 .NET 运行时？

> ID：10436187
> 
> 赞同：3
> 
> 时间：2012-05-03T17:11:00.323
> 
> 标签：.net, windows, .net-4.5

这是一个简单的问题。我一直在用 .NET 4.5（现在是 Beta）编写软件。运行该软件需要什么版本的 .NET 运行时？是4.5吗？年纪大点？

此外，.NET 更新是 Windows 更新的一部分吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-03T17:14:32.850

为了运行 4.5 编译的程序集，您**必须**安装 4.5 框架。4.5 安装是一个就地升级，主要与 4.0 向前兼容，但绝对不向后兼容。

一个可以让你绊倒的地方是类型转发器。4.5 框架包含大量新型转发器（超过 1,100 个）。类型转发器是程序集声明类型从程序集 A 移动到程序集 B 的一种方式。CLR 将以静默方式将对给定类型的任何引用从 A 重定向到 B。

但是，针对 4.5 编译的程序集会发出对该类型的引用，就好像它存在于程序集 B 中一样。如果您随后针对 4.0 安装运行该程序集，它将期望该类型在程序集 B 中，但不会。结果将是类型加载异常。

具体示例：

```
static void Main(string[] args)
{
    var attrib = new ExtensionAttribute();
    Console.WriteLine(attrib);
} 
```

在 4.5 机器上编译该代码，然后尝试在 4.0 机器上运行它。结果将是类型加载异常。`ExtensionAttribute`类型从 4.0 中的 System.Core 移动到 4.5 中的mscorlib

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T19:21:08.647

也许更重要的问题是“.NET 4.5 需要什么操作系统？”

首先是安装页面

[http://msdn.microsoft.com/en-us/library/5a4x27ek](http://msdn.microsoft.com/en-us/library/5a4x27ek)

最大的问题是您无法在 Windows XP 上运行 4.5 - 它太旧了（> 10 年）
所以如果这将成为您的环境中的一个问题，请不要假设您可以！

[4.5 要求](http://msdn.microsoft.com/en-us/library/8z6watww)满足以下条件之一：

*   Windows 8（32 位和 64 位版本）
*   Windows 7（32 位和 64 位版本）
*   Windows Vista SP2（32 位和 64 位版本）

*   Windows Server 2012（64 位版本）
*   Windows Server 2008 R2（64 位版本）
*   Windows Server 2008 SP2（32 位和 64 位版本）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T17:13:07.907

.Net 4.0 运行时。4.5 是更多 .Net 库的优点。CLR 版本没有变化。

如果你用 C# 编码，编译器会发生变化，但它会编译 CLR 4.0 IL。

[http://www.infoq.com/news/2012/04/net-4-5-multitargeting](http://www.infoq.com/news/2012/04/net-4-5-multitargeting)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T17:16:36.133

这取决于您是否正在编写 Metro 风格的应用程序。对于 Metro 风格的应用程序 (Windows 8)，您实际上是在使用 .NET 4.5 框架的一个子集以及一个特殊的 Metro-only 运行时。对于所有其他应用程序，.NET 4.5 使用带有附加库的 .NET 4.0 运行时（类似于能够在 .NET 2.0 运行时上运行的 .NET 3.0 和 .NET 3.5）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-03T17:16:59.373

CLR 版本为 1.0、1.1、2.0 和 4.0。.NET Framework 的其他版本只是提供了其他类型。.NET 3 和 3.5 在 CLR 2.0 上运行。.NET 4.5 在 CLR 4 上运行。

注意：您仍然需要 .NET 4.5 才能运行 4.5 应用程序。

# jquery - JQuery 按表 ID 排序表

> ID：10436189
> 
> 赞同：0
> 
> 时间：2012-05-03T17:11:14.687
> 
> 标签：jquery, html, jquery-plugins

我希望有人可以帮助我更改此 JQuery 代码，以便它通过调用“表 id”而不是“表”来对元素进行排序。问题是我的页面包含多个表，我希望表排序基于一个由 ID 标识的特定表来运行。此功能使用 Jquery 排序元素插件。有任何想法吗？

[https://raw.github.com/padolsey/jQuery-Plugins/master/sortElements/jquery.sortElements.js](https://raw.github.com/padolsey/jQuery-Plugins/master/sortElements/jquery.sortElements.js)

```
$(window).load(function(){
    var table = $('table');

    $('#facility_header, #city_header')
        .wrapInner('<span title="sort this column"/>')
        .each(function(){

            var th = $(this),
                thIndex = th.index(),
                inverse = false;

            th.click(function(){

                table.find('td').filter(function(){

                    return $(this).index() === thIndex;

                }).sortElements(function(a, b){

                    return $.text([a]) > $.text([b]) ?
                        inverse ? -1 : 1
                        : inverse ? 1 : -1;

                }, function(){

                    // parentNode is the element we want to move
                    return this.parentNode; 

                });

                inverse = !inverse;

            });

        });

});//]]> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T17:17:49.950

只是改变这部分

```
var table = $('#tableid'); 
```

这里有更多关于 jquery 选择器[http://api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)

# java - 创建一个旅行商程序，排列是一种好技术吗？

> ID：10436191
> 
> 赞同：2
> 
> 时间：2012-05-03T17:11:23.783
> 
> 标签：java

我正在努力了解大学的 TSP 计划，我不得不承认我发现它非常困难。

基本上我有一个 Lat 值数组和一个 Lng 值数组，使用haversine，我已经将距离转移到一个矩阵中。
现在从这里去哪里？
我必须找到最短的距离，走遍所有 80 个城镇。我试图想出最好的方法来做到这一点。我应该做一个最近邻算法吗？我应该只存储排列并计算距离。或者，还有更好的方法？我不得不承认，我觉得这对于一个一年级的学生来说有点困难！无论如何，这是我的代码，太糟糕了，小程序等都给了我们。

```
public class Brain {

    //These are the names of the 80 towns and their north and west GPS co-ordinates

    static double north[] = {53.855,52.794,54.350,53.433,52.992,54.117,53.328,54.800,54.863,55.071,54.502,54.343,51.746,54.660,51.680,54.597,53.091,53.175,55.136,52.831,53.976,53.944,53.861,53.991,51.622,52.354,51.897,54.996,54.322,53.714,53.348,54.009,54.500,52.085,53.345,52.846,52.502,54.345,53.272,52.677,53.728,53.106,52.648,52.059,51.708,53.783,54.851,54.957,55.053,52.665,52.447,53.727,53.197,51.904,54.750,52.131,53.382,52.266,54.248,53.116,53.522,52.863,52.396,54.210,52.451,54.590,53.633,52.714,54.267,53.245,54.830,52.679,52.474,52.268,53.515,53.267,52.257,53.800,52.334,51.952};
    static double west[] = {-6.538,-6.165,-6.655,-7.950,-6.987,-9.167,-8.219,-7.790,-6.284,-6.508,-8.190,-6.260,-8.735,-5.670,-9.453,-5.930,-7.913,-6.525,-7.456,-6.932,-6.719,-8.095,-9.299,-7.360,-8.886,-7.712,-8.470,-7.307,-5.703,-6.350,-6.260,-6.405,-6.770,-7.640,-7.051,-8.981,-6.566,-7.640,-9.049,-6.292,-6.878,-6.065,-7.256,-9.507,-8.531,-8.917,-5.811,-7.720,-6.946,-8.624,-9.486,-7.800,-8.567,-8.957,-6.610,-8.642,-6.591,-8.270,-6.971,-7.324,-7.338,-8.200,-6.945,-5.882,-9.055,-7.290,-8.183,-8.869,-8.483,-9.306,-7.470,-7.814,-8.162,-9.696,-8.851,-7.500,-7.129,-9.533,-6.458,-7.846};
    String names[] = {"Ardee","Arklow","Armagh","Athlone","Athy","Ballina","Ballinasloe","Ballybofe","Ballymena","Ballymoney","Ballyshannon","Banbridge","Bandon","Bangor","Bantry","Belfast","Birr","Blessington","Buncrana","Carlow","Carrickmacross","Carrick-On-Shannon","Castlebar","Cavan","Clonakilty","Clonmel","Cork","Derry","Downpatrick","Drogheda","Dublin","Dundalk","Dungannon","Dungarvan","Edenderry","Ennis","Enniscorthy","Enniskillen","Galway","Gorey","Kells","Kilcoole","Kilkenny","Killarney","Kinsale","Knock","Larne","Letterkenny","Limavady","Limerick","Listowel","Longford","Loughrea","Macroom","Magherafelt","Mallow","Maynooth","Mitchelstown","Monaghan","Mountmellick","Mullingar","Nenagh","New-Ross","Newcastle","Newcastle-West","Omagh","Roscommon","Shannon","Sligo","Spiddal","Strabane","Thurles","Tipperary","Tralee","Tuam","Tullamore","Waterford","Westport","Wexford","Youghal"};
    static double[][] matrix = new double[80][80];
    boolean visit[]=new boolean[80];
    boolean valid = true;

    public static void fillmatrix (){
        double tote = 0;
        for(int i=1;i<80;i++){
            for(int j=1;j<80;j++){
                matrix[i][j]=getDistance(north[i],west[j],north[j],west[j]);
            }
        }
    }

    public String compute () {          
        String solution ="";
        for (int i=0;i<80;i++){
            solution+=(char)(i+40);
        }
        solution+="Anything you add on after the 80 characters will be " + 
            "printed in the textbox (e.g. you can compute the distance)";
        return solution;    
    }

    public static double getDistance(double lat1, double lon1, double lat2, double lon2){
        double R = 6371;
        double dLat = Math.toRadians((lat2-lat1));
        double dLon = Math.toRadians((lon2-lon1)); 
        double a = Math.sin(dLat/2) * Math.sin(dLat/2) + 
            Math.cos(Math.toRadians(lat1)) * Math.cos(Math.toRadians(lat2)) *
            Math.sin(dLon/2) * Math.sin(dLon/2); 
        double c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)); 
        double d = R * c;         
        return d;
    }    
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T17:14:05.450

除了最小的实例之外，检查所有排列将非常昂贵。

幸运的是，有一大堆著名的 TSP 启发式算法。[任你选](https://www.google.com/search?q=tsp+heuristics)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T17:41:04.053

解决最近邻启发式的最佳方法是将算法分解为子问题。

1.  随机选择一个城市。
2.  找到最近的未访问城市并前往那里。
3.  是否还有未访问的城市？如果是，请重复步骤 2。
4.  返回第一个城市。

接下来，解决每个子问题。

1.  在名称数组中选择一个随机值
2.  通过遍历北和西数组并计算距离来检查所有城市到随机城市的距离。以数组形式存储访问过的城市。
3.  重复 2
4.  返回第一个城市

然后，考虑伪代码并尝试编写 Java 代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T14:14:54.973

**关于源代码**

首先，我可能会建议您将城市坐标的定义更改为 City 类，并且由于您的城市是预定义的，您可能希望将其“导出”到外部文件中并在文件开始时加载它。例如，

```
public class City{
    public double North;
    public double West;
    public String Name;
    public double getDistanceToCity(City target){
        double R = 6371;
        double dLat = Math.toRadians((target.North-this.North));
        double dLon = Math.toRadians((target.West-this.West)); 
        double a = Math.sin(dLat/2) * Math.sin(dLat/2) + 
            Math.cos(Math.toRadians(this.North)) * Math.cos(Math.toRadians(this.West)) *
            Math.sin(dLon/2) * Math.sin(dLon/2); 
        double d = R * 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));         
        return d;}} 
```

然后，例如，在将文件读入“ArrayList Cities”后，您将通过以下方式对矩阵进行 bild：

```
double[][] distances = new double[Cities.size()][Cities.size()];
int i=0;
int j=0;
for(City start:Cities){
    for(City end:Cities){
        distances[i][j]=start.getDistanceToCity(end);
        j++;}
    i++;} 
```

并得到相同的矩阵。在这种情况下，您可以更改输入数据的大小，例如用 10 个城市测试您的算法的正确性，毕竟在 80 个城市上运行良好。此外，在这种情况下，您将自己看到这个问题的难度 - 简单在 40 和 41 城市运行它...

**接下来，关于算法...**

这是 NP 难题，因此您的排列将工作很长时间。我会推荐 Held–Karp 算法，该算法速度更快，但实现起来非常困难，并且需要大量内存。（例如，建议的方法 if (n*n*2^n)，对于 n=80 是 10^27，排列是 n！，对于 n=80 是 10^121 - 我的意思是解决任务所需的操作） .

无论如何，目前最好的精确解决方案是线性规划（不记得确切的方法，但是......）。可能你会发现一些考虑使用图形方法的算法。

# ruby-on-rails - nil：NilClass Actioncontroller的未定义方法“议程”？

> ID：10436194
> 
> 赞同：0
> 
> 时间：2012-05-03T17:11:29.560
> 
> 标签：ruby-on-rails, ruby, devise

本质上，我有一个使用 Devise 的应用程序，我有一个用户模型和一个议程模型。议程“belongs_to”用户和用户“has_many”议程，这些是我的数据库关系。我可以启动 IRB 并正确获取数据库数据 user = User.first user.agendas，我将获得属于该用户的所有帖子的列表我的问题在登录时出现，用户被重定向到 home#index 但我在 Home#index undefined method `agendas' for nil:NilClass 中得到 NoMethodError 我确定我错过了什么。我需要一个 index 方法吗我的议程控制器也是？..app/views/home/index.html.erb

```
<h3>Home</h3>
<div class="row">
    <div class="span8">
        <% if @user.agendas.any? %>
        <h3>Agendas</h3>
        <ol class="agendas">
            <%= render @agendas %>
        </ol>
        <% end %>
    </div>
</div> 
```

我的 home_controller.rb

```
class HomeController < ApplicationController
  before_filter :authenticate_user!

  def index
    @agendas = current_user.agendas.paginate(page: params[:page])
  end 
```

我的议程控制器只有一个用于未来代码的创建和销毁存根。它的模型/agenda.rb

```
class Agenda < ActiveRecord::Base
  attr_accessible :title
  belongs_to :user

  validates :title, presence: true, length: { maximum: 140 }
  validates :user_id, presence: true

  default_scope order: 'agendas.created_at DESC'
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T17:35:12.567

您的错误来自于此：

```
<% if @user.agendas.any? %> 
```

错误说`@user`是`nil`。你的控制器说：

```
def index
  @agendas = ...
end 
```

我没有看到`@user`在那里被分配了一个值。我认为您的`authenticate_user!`过滤器也没有设置`@user`。所以你可以这样做：

```
def index
  @user    = current_user
  @agendas = @user.agendas.paginate(page: params[:page])
end 
```

进而：

```
<% if @user.agendas.any? %>
  <h3>Agendas</h3>
  <ol class="agendas">
    <%= render @agendas %>
  </ol>
<% end %> 
```

您也可以`current_user`直接在您的 ERB 中访问：

```
<% if current_user.agendas.any? %>
  <h3>Agendas</h3>
  <ol class="agendas">
    <%= render @agendas %>
  </ol>
<% end %> 
```

但是请记住，您已经遇到了计算的麻烦，`@agendas`那么为什么不直接看一下并让您的控制器不理会呢？

```
<% if @agendas.present? %>
  <h3>Agendas</h3>
  <ol class="agendas">
    <%= render @agendas %>
  </ol>
<% end %> 
```

# html - 如何制作 SSL URL 前缀

> ID：10436196
> 
> 赞同：2
> 
> 时间：2012-05-03T17:11:30.040
> 
> 标签：html, ssl, web

我试过用Goggling这个，但我真的想不出一个技术字符串来搜索。我想让我的网站拥有与 SSL 网站一起出现的绿色框。例如，在美国银行的网站上（在 Chrome 中）：

![Chrome 快照](../Images/89524ebb8ebfa33c167b48f604aa6f34.png)

我不知道这是否是 HTML 技巧，服务器操作等。真的不知道也不知道搜索“那个绿框的东西”的好方法。有谁知道网站如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T17:14:32.047

据此[**，**](http://support.google.com/chrome/bin/answer.py?hl=en&answer=95617) “如果站点使用扩展验证 SSL (EV-SSL) 证书，该组织的名称也会出现在绿色文本图标旁边。确保浏览器设置为检查服务器证书吊销以识别具有 EV 的站点-SSL 证书。”

和：

如果您仍然看不到组织的名称，可能是由于以下情况之一：

*   该网站可能不使用 EV-SSL 证书。EV 证书为网站的身份提供了额外的保证，但并非所有使用 SSL 的网站都使用 EV-SSL 证书。
*   该网站可能包含安全错误，例如混合内容或过期证书。
*   证书吊销信息可能暂时无法从服务器获得。

[**您可以在此处**](https://www.symantec.com/theme.jsp?themeid=how-ssl-works&tabID=2&inid=vrsn_symc_ssl_FAQ)和[此处](http://en.wikipedia.org/wiki/Extended_Validation_Certificate)阅读有关扩展验证 SSL 证书的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T17:14:54.183

您“简单地”使用[SSL](http://en.wikipedia.org/wiki/Secure_Socket_Layer)提供页面，并确保页面上来自其他域（图像、CSS、JavaScript 等）的所有静态资源也通过 HTTPS 提供。否则，您网站的访问者会看到关于“页面上不安全的资源”的[可怕安全警告（尤其是 IE 中的可怕/侵入性）。](http://support.google.com/chrome/bin/answer.py?hl=en&answer=95617)

您需要一个[EV-SSL 证书](http://en.wikipedia.org/wiki/Extended_Validation_Certificate)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T17:19:06.227

这称为[扩展验证证书](http://en.wikipedia.org/wiki/Extended_Validation_Certificate)。它们的成本比标准 SSL 证书高出不少。

# couchdb - couchdb - 检索 id 不包含在数组属性中的文档

> ID：10436197
> 
> 赞同：2
> 
> 时间：2012-05-03T17:11:38.217
> 
> 标签：couchdb, mapreduce

我在 couchdb 数据库中有以下文档结构：

```
{
  'type': 'Message',
  'subject': 'Cheap V1@gr@',
  'body': 'not spam',
  'metadata': {
    'participation': {
      'read': [1,2,3]
    }
  }
} 
```

该`read`数组是已阅读消息的用户 ID 列表。我可以轻松地创建一个视图，以允许我按用户已阅读的消息过滤消息列表，如下所示：

### 地图功能

```
function(doc) {
  doc['metadata']['participation']['read'].forEach(function(user_id) {
    emit(user_id, doc._id);
  });
} 
```

然后执行查询`user_id = 1`：

```
curl -X GET \
  http://localhost:5984/couchrest/_design/Message/_view/included_in_read?key=1 
```

我的问题是：我将如何编写视图/查询来返回数组中**不**包含用户 ID 的文档`read`，即“未读”消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T09:45:49.390

您需要使用一种称为[泰式按摩](http://mail-archives.apache.org/mod_mbox/couchdb-user/201112.mbox/%3CCAN-3CB+++X3q=yt1YfJYRJW8f-zSFyJvbyGKQ1zx8h-QrE=9Mw@mail.gmail.com%3E)的技术。

上面的链接是我在一封电子邮件中对它的描述，我在 Stack Overflow 上对类似问题的回答中描述了它：[Find CouchDB docs missing an absolute field](https://stackoverflow.com/questions/6183352/find-couchdb-docs-missing-an-arbitrary-field/6210422#6210422)

我认为您需要做的变化是为键发出一个 2 数组，`[user_id, doc_id]`. 当您查询 user 的“命中”时`1234`，使用`?startkey=[1234,null]&endkey=[1234,{}]`仅显示该用户的命中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T04:02:16.940

您可以使用以下地图功能，

```
 function(doc) {
   if(!doc.metadata.participation.read)
     emit(doc.user_id, doc);
  } 
```

然后执行 user_id = 1 的查询：

```
curl -X GET \
http://localhost:5984/couchrest/_design/Message/_view/included_in_read?key=1 
```

# c++ - 构建前缀运算符

> ID：10436198
> 
> 赞同：2
> 
> 时间：2012-05-03T17:11:51.957
> 
> 标签：c++, operator-overloading

假设我有这个类：

```
class Int{
    private:
        int x;
    public:
        Int(int i) : x(i) {}
}; 
```

我可以建立一个`prefix +`运算符来编写这样的表达式`x = + a b`吗？

我试图`operator+`在类内部重载，但编译器抱怨 `operator+`必须是一元或二进制而不是三元。

有没有办法做这样的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T17:13:51.003

不，您不能更改表达式的基本语法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T17:19:28.373

您无法更改编译器解释“+”字符的方式 - 它具有特殊的语法意义。但是，如果您愿意放弃 + 符号，则可以创建一个名为`plus`并重载 operator() 的类来获取其以下参数。

`plus`本质上，您正在使用该类作为 + 运算符的代理来创建 dsl 。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-03T17:19:45.700

一般来说，不可能摆弄 C++ 的基本语法，因为它是硬连线到语法中的。但也许

```
template<typename A, typename B>
auto plus(const A& a, const B& b) -> decltype(a + b) { return a + b; }
a = plus(a, b); 
```

是合适的替代品吗？为所有算术运算符构建它是微不足道的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-03T19:18:41.910

纯娱乐：

```
#include <iostream>

struct Expr {
  int value;
  enum oper { plus = '+', minus = '-', times = '*', div = '/', nop = 0 } op;
  Expr(int value, oper op) : value(value), op(op) { }
  Expr(int value) : value(value), op(nop) {}
  Expr operator+() { return Expr(value, plus); }
  Expr operator-() { return Expr(value, minus); }
  Expr operator*() { return Expr(value, times); }
  Expr operator,(const Expr& rhs) {
    Expr result(value, op);
    switch(op) {
      case '+': result.value += rhs.value; break;
      case '-': result.value -= rhs.value; break;
      case '*': result.value *= rhs.value; break;
      case '/': result.value /= rhs.value; break;
    }
    return result;
  }
};

int main () {
  Expr x(0), a(1), b(2);
  x = ( + a , b );
  std::cout << x.value << "\n";
} 
```

# php - 学说 2 加入协会未找到

> ID：10436199
> 
> 赞同：0
> 
> 时间：2012-05-03T17:11:55.267
> 
> 标签：php, orm, doctrine, dql

我已经关注了这个网站上的一些问题，但仍然无法弄清楚我的设置有什么问题。我被难住了一段时间。抱歉，如果这是一个基本错误，我对 Doctrine 还是很陌生。谢谢你。

我得到的错误是：

```
Error: Class models\\Classes_users has no association named users_username... 
```

查询是：

```
SELECT u FROM models\Classes_users c JOIN c.users_username u WHERE c.class_id = 1 
```

实体：

```
/**
 * models\Classes_users
 *
 * @Table(name="classes_users")
 * @Entity
 */
class Classes_users
{
    ...

    /**
     * @var string $users_username
     *
     * @Id
     * @ManyToOne(targetEntity="Users", inversedBy="users_username")
     * @JoinColumn(name="users_username", referencedColumnName="users_username")
     * @Column(name="users_username", type="integer", precision=0, scale=0, nullable=false, unique=false)
     */
    private $users_username;

    ...
}

/**
 * models\Users
 *
 * @Table(name="users")
 * @Entity
 */
class Users
{
    ....

    /**
     * @var string $users_username
     * @Id
     * @OneToMany(targetEntity="Classes_users", mappedBy="users_username")
     * @Column(name="users_username", type="string")
     */
    private $users_username;

    ....
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T04:55:09.707

我不确切知道你想要完成什么，但我认为你的实体设计有点“奇怪”，我在这里发布一些代码供你参考：

```
/**
 * models\Classes_users
 *
 * @Table(name="classes_users")
 * @Entity
 */
class Classes_users
{
    ...
    /**
     * @Id
     */
    private $class_id;   // use other varible as Id

    /**
     * @ManyToOne(targetEntity="Users", inversedBy="user_usernames")
     * @JoinColumn(name="user_id", referencedColumnName="id")
     **Delect this line  =>** * @Column(name="users_username", type="integer", precision=0, scale=0, nullable=false, unique=false)  
     */
    private $user;   // change name to user, this varible is a virtual variable, only make sense in php objects, there would not be a real column in database, but a user_id column produced by Doctrine instead

    ...
}

/**
 * models\Users
 *
 * @Table(name="users")
 * @Entity
 */
class Users
{
    ....
    /**
     * @Id
     *
     */
    $private id;   // use other variable as Id

    /**
     * @var string $users_username
     * @Id
     * @OneToMany(targetEntity="Classes_users", mappedBy="user")
     **Delect this line  =>** * @Column(name="users_username", type="string")
     */
    private $user_usernames;    // suggest change name to reflect the one to many associations, this variable should be an arraycollection, and there would not be a real column in database

    public function __construct()
    {
        $this->user_usernames = new ArrayCollection();
    }

    ....
} 
```

现在您可以将查询更改为：

SELECT u FROM models\Users u JOIN u.user_usernames c WHERE c.class_id = 1

我不知道你是否使用 Symfony，但我建议你阅读[这个链接](http://symfony.com/doc/current/book/doctrine.html#entity-relationships-associations)

# php - 将表格添加到 wordpress 安装

> ID：10436201
> 
> 赞同：0
> 
> 时间：2012-05-03T17:12:04.880
> 
> 标签：php, wordpress

这个问题一直困扰着我一整天，希望你能帮助我。我目前正在为 Wordpress 开发一个插件，以支持 tourdates 作为帖子类型（它用于乐队网站）。对于巡回演出，我需要知道场地，所以我创建了分类场地。现在我想将元数据添加到分类中，所以我尝试将一个表添加到我的 Wordpress 数据库中。这是我到目前为止所得到的：

```
global $scooby_db_version;
$scooby_db_version = '0.1';

new Venue();

class Venue {
    function __construct(){
        add_action('plugins_loaded', array(&$this, 'install'));
    }

    function install(){
        global $scooby_db_version;
        global $wpdb;
        if(get_site_option('scooby_db_version') != $scooby_db_version){
            $table_name = $wpdb->prefix."term_meta";
            $sql = "
                ------- Taxonomy Meta -------

                CREATE TABLE $table_name (
                meta_id bigint(20) unsigned NOT NULL AUTO_INCREMENT,
                term_id bigint(20) unsigned NOT NULL DEFAULT '0',
                meta_key varchar(255) DEFAULT NULL,
                meta_value longtext,
                PRIMARY KEY  (meta_id),
                INDEX term_id (term_id),
                INDEX meta_key (meta_key)
                );";
            require_once(ABSPATH . 'wp-admin/includes/upgrade.php');
            dbDelta($sql);

            add_option('scooby_db_version', $scooby_db_version);
        }
    }
} 
```

这根本没有任何作用。显然它确实工作过一次，因为选项表中有一个条目，但它不会更新。似乎该函数根本没有被调用，但是当它被调用时（因此是 db-entry）它没有创建表。

我对此感到非常沮丧，因为我无法继续以这种方式处理我的插件。你们能弄清楚可能是什么问题吗？为什么它不调用我的函数或更新我的数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T07:37:02.370

dbDelta 既方便又讨厌。

[http://codex.wordpress.org/Creating_Tables_with_Plugins#Creating_or_Updating_the_Table](http://codex.wordpress.org/Creating_Tables_with_Plugins#Creating_or_Updating_the_Table)

*   您必须在 SQL 语句中将每个字段放在自己的行中。
*   您必须在单词和主键定义**之间有两个空格。**`PRIMARY KEY`
*   您必须使用关键字`KEY`而不是其同义词`INDEX`，并且必须至少包含一个`KEY`。

# jquery - 淘汰赛树拖放

> ID：10436206
> 
> 赞同：1
> 
> 时间：2012-05-03T17:12:24.690
> 
> 标签：jquery, jquery-ui, drag-and-drop, tree, knockout.js

我有一棵树，其节点需要拖放到 div 上。我已经使用淘汰赛来创建树。这棵树是延迟加载的并且工作正常。

树有一个功能，用户可以将节点拖放到旁边的面板上。

我能够实现单次拖放，但不能进行多次拖放。这是我为单次拖放创建的小提琴[http://jsfiddle.net/anirbankundu/TKVdJ/6](http://jsfiddle.net/anirbankundu/TKVdJ/6)

我无法在面板旁边进行多次拖放基本上用户可以检查他们想要在面板上拖放的节点。然后一口气将节点放在所需的面板上。

有人可以让我知道如何实现这一目标吗？

谢谢

# c# - 查找表未出现在 EDMX 文件中

> ID：10436216
> 
> 赞同：1
> 
> 时间：2012-05-03T17:12:55.547
> 
> 标签：c#, entity-framework-4

我在我正在开发的实用程序上使用 EF，遇到了一个相当令人沮丧的问题。我有三个表：Template、Target 和 TemplateTarget，但是当我将这三个表添加到 EDMX 时，我最终只得到了两个表，因为 TemplateTarget 是一个包含 Template 和 Target 之间关系的查找表。显然 EF 足够聪明，可以解决这个问题，但如果我想打破（删除）一段关系，就会出现问题。

当我发出删除命令时，在我给定的场景中，我需要从查找表中删除，而不是从物理表本身中删除。“正确”的答案是重新设计数据模型，但这不是目前可以做的事情。无论如何强制 EF 将这个查找表分开，以便我可以直接针对它发出删除，或者我是否将被限制为直接向基础表发出 DELETE 语句？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T08:24:24.437

如果您只想从查找表中删除，则意味着您要删除以这种方式完成的关系：

```
template.Targets.Remove(target); 
```

您的模板必须附加到上下文中，并且目标必须是相关实体。它只会从数据库中删除关系，而不是那些实体。

# xml - Windows Phone xna 游戏，如何保存从 Web 服务检索到的 XML

> ID：10436226
> 
> 赞同：0
> 
> 时间：2012-05-03T17:13:13.437
> 
> 标签：xml, web-services, windows-phone-7, xna, isolatedstorage

总而言之，我正在开发一款 Windows 手机游戏，该游戏在游戏加载之前从远程 Web 服务中获取一些 XML 数据。这会不时更新游戏使用的一些数据。那部分工作得很好。一旦它从 Web 服务中获取数据，我将使用：

```
 void Response_Completed(IAsyncResult result)
    {
        HttpWebRequest request = (HttpWebRequest)result.AsyncState;
        HttpWebResponse response = (HttpWebResponse)request.EndGetResponse(result);
        using (StreamReader streamReader = new StreamReader(response.GetResponseStream()))
        {
            string xml = streamReader.ReadToEnd();
            using (XmlReader reader = XmlReader.Create(new StringReader(xml)))
            {
                reader.MoveToContent();
                reader.GetAttribute(0);
                reader.MoveToContent();
                webMessage = reader.ReadInnerXml(); 
```

所以现在我在 webMessage 字符串变量中有一个 XML 字符串。然后我将它写入到 IsolatedStorage 中的一个文件中。再次工作得很好。我的问题是当我去读取数据时：

```
using (IsolatedStorageFile myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication())
{
using (IsolatedStorageFileStream stream = myIsolatedStorage.OpenFile("Test.xml", FileMode.Open)) 
{
XmlSerializer serializer = new XmlSerializer(typeof(List<Item>));
List<Item> data = (List<Item>)serializer.Deserialize(stream);

foreach (Item item in data)
{

    System.Diagnostics.Debug.WriteLine(item.Item);
}

} 
} 
```

所以问题是当文件被写入隔离存储时，它会转义所有 XML 标记，所以当我去读取文件时，它读取的是 %lt; 而不是 "<" 等，这会导致反序列化并报告无效字符。我真的在努力避免循环通过我从 Web 服务中获取的 XML，这似乎很浪费，我知道它是来自我自己的服务器的有效 XML。有谁知道一种方法可以将我从 Web 服务中获取的 XML 一次性写入到 IsolatedStorage 中的文件中？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T19:12:44.550

我最终通过循环通过 Web 服务返回的 XML 元素填充了一个自定义的可序列化自定义对象。这根本不是太多的代码：

```
 HttpWebRequest request = (HttpWebRequest)result.AsyncState;
        HttpWebResponse response = (HttpWebResponse)request.EndGetResponse(result);
        using (StreamReader streamReader = new StreamReader(response.GetResponseStream()))
        {
            string xml = streamReader.ReadToEnd();
            using (XmlReader reader = XmlReader.Create(new StringReader(xml)))
            {

                reader.MoveToContent();
                while (reader.Read())
                {

                    if (reader.NodeType == XmlNodeType.Element)
                    {
                        string objectItem = reader.ReadElementContentAsString();
                        webData.Add(new CustomObject() { Item = objectItem });

                    }
                }
       } 
```

# debugging - cuda 无限内核

> ID：10436228
> 
> 赞同：3
> 
> 时间：2012-05-03T17:13:30.463
> 
> 标签：debugging, cuda, infinite

我正在开发一个需要无限期运行 CUDA 内核的应用程序。我有一个 CPU 线程将 stg 写入列表，而 gpu 读取该列表并重置（至少在开始时）。当我在内核中写

```
while(true)
{
//kernel code
} 
```

系统挂断。我知道 GPU 仍在处理，但当然没有任何反应。而且我不确定列表中的重置是否会发生。

不得不提的是，用于计算的GPU不用于显示，所以没有看门狗问题。

操作系统是 Ubuntu 11.10 和 cuda 工具包 4.1。我可以使用任何帮助/示例/链接来成功编写无限内核。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T01:51:28.083

CUDA 编程语言和 CUDA 架构目前不支持无限内核。我建议你考虑一下罗杰的建议。

如果你想追求这个，我建议你在你的内核中添加以下调试代码：

1.  每 N 个时钟在固定内存中增加一个变量（可能希望每个 SM 有不同的位置），并且，
2.  定期读取一个可以被 CPU 更新的内存位置，告诉内核退出。

这是一个软件看门狗。

您可以使用 clock() 或 clock64() 来控制执行 (1) 和 (2) 的频率。

您可以使用 cuda-gdb 来调试您的问题。

该语言不支持无限循环。编译器可能正在剥离代码。您可能需要查看 PTX 和 SASS。如果编译器生成错误代码，您可以通过让编译器认为存在有效的退出条件来伪造它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-12T11:46:09.933

正如@Greg Smith 已经指出的那样，CUDA 编译器不会为无限循环生成正确的程序集。当然，在某些情况下它是一个完美的解决方案，例如运行一个后台服务内核，它接收来自主机的更新，推送到主机映射的内存。

一种解决方法，从 CUDA 9.2 开始有效：

```
volatile int infinity = 1;
while (infinity)
{
  ...
} 
```

在发散分支内进行无限循环显然不是一个好主意。除此之外，`while (1)`构造 IMO 的不当处理绝对是一个错误。

# php - 这是一个有效的重定向语句吗？

> ID：10436230
> 
> 赞同：0
> 
> 时间：2012-05-03T17:13:47.743
> 
> 标签：php, javascript, redirect

我正在尝试使用带有“？”的 php 重定向到页面 操作员在下一页中获取 id，这是正确的说法吗？我被重定向到该页面，但 url 仅显示：[http://localhost/mysql/welcome.php](http://localhost/mysql/welcome.php)。

我哪里错了？

这是声明：

```
echo '<script type="text/javascript">
    <!--
     window.location = "../mysql/welcome.php?id='.$id.'";
      -->
     </script>'; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T17:16:43.280

是的，它是有效的，但不需要 HTML 注释：

```
echo '<script type="text/javascript">    
     window.location = "../mysql/welcome.php?id='.$id.'";    
     </script>'; 
```

但我会做这个服务器端：

```
header("Location: ../mysql/welcome.php?id=$id"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T17:18:09.250

如果您在 PHP 上下文中，为什么不使用它：

```
header("Location: /mysql/welcome.php?id=$id"); 
```

如果您坚持将其`echo`与 javascript 一起使用，则正确的方法是：

```
echo '<script type="text/javascript">    
        window.location = "../mysql/welcome.php?id='.$id.'";    
      </script>'; 
```

# javascript - Twitter Bootstrap 的工具提示

> ID：10436231
> 
> 赞同：71
> 
> 时间：2012-05-03T17:13:50.683
> 
> 标签：javascript, twitter-bootstrap

我正在使用 Twitter Bootstrap——而且我不是前端开发人员！然而，它让这个过程几乎——我敢说——很有趣！

我对工具提示有点困惑。它们[包含在文档中，](http://getbootstrap.com/javascript/#tooltips)但 Twitter 假设有一些知识。例如，他们说使用以下 JavaScript 代码触发工具提示。

```
$('#example').tooltip(options) 
```

在查看了它们的源代码后，我意识到带有工具提示的字段需要在一个类中并运行以下代码。

```
$('.tooltipclass').tooltip(options) 
```

但现在我的问题是，为什么 Twitter Bootstrap 不提供这样的类`tooltip`？只是为了允许更大的配置？将带有工具提示的单个元素添加到更好`tooltipclass`，还是应该将周围区域添加到`tooltipclass`？如果我使用类标识符 ( `.class`) 而不是名称标识符 ( `#name`)，这有关系吗？

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2012-05-03T19:00:01.087

我认为您的问题归结为在设置工具提示时使用什么合适的选择器，而答案几乎就是您想要的任何东西。如果您想使用一个类来触发您的工具提示，您可以这样做，例如：

```
<a href="#" class="link" data-original-title="first tooltip">Hover me for a tooltip</a> 
```

然后，您可以触发所有带有`.link`作为工具提示附加的类的链接，如下所示：

```
$('.link').tooltip() 
```

现在，要回答您关于为什么引导开发人员不使用类来触发工具提示的问题，因为它并不是完全需要的，您几乎可以使用任何您想要定位工具提示的选择器，例如（我个人最喜欢的）`rel`属性。使用此属性，您可以定位`rel`属性设置为的所有链接或元素`tooltip`，如下所示：

```
$('[rel=tooltip]').tooltip() 
```

你的链接看起来像这样：

```
<a href="#" rel="tooltip" data-original-title="first tooltip">Hover me for a tooltip</a> 
```

当然，您也可以使用容器类或 id 将工具提示定位在特定容器内，您希望使用特定选项将其挑出或与其余内容分开，您可以像这样使用它：

```
$('#example').tooltip({
    selector: "a[rel=tooltip]"
}) 
```

此选择器将使用`rel`属性“在”您的`#example`div 内的所有工具提示作为目标，这样您就可以单独向该部分添加特殊样式或选项。简而言之，您几乎可以使用任何有效的选择器来定位您的工具提示，并且无需使用额外的类来污染您​​的标记来定位它们。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-12-27T07:57:53.633

最简单的使用方法是

把它放在标题中：

```
<script>
    $(function ($) {
        $("a").tooltip()
    });
</script> 
```

进而

```
<a href="#" rel="tooltip" data-placement="bottom" title="My Tooltip Text">
    My link text
</a> 
```

因此，如果您在页面中的任何位置使用该 js 代码标记`rel="tooltip"`了引导工具提示。

祝你好运。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-08-06T18:54:50.443

将此添加到您的标题中

```
<script>
    //tooltip
    $(function() {
        var tooltips = $( "[title]" ).tooltip();
        $(document)(function() {
            tooltips.tooltip( "open" );
        });
    });
</script> 
```

然后只需将属性添加`title="your tooltip"`到任何元素

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-29T10:22:47.783

我包含了 JS 和 CSS 文件，想知道为什么它不工作，是什么使它工作是当我添加以下内容时`<head>`：

```
<script>
jQuery(function ($) {
    $("a").tooltip()
});
</script> 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-07-18T22:02:23.573

只需标记所有数据切换...

```
jQuery(function () {
    jQuery('[data-toggle=tooltip]').tooltip();
}); 
```

[http://jsfiddle.net/Amged/xUQ6D/19/](http://jsfiddle.net/Amged/xUQ6D/19/)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-05-03T17:23:01.080

那是因为这些东西（我的意思是工具提示等）是 jQuery 插件。是的，他们假设了一些关于 jQuery 的基本知识。我建议您至少查找有关 jQuery 的基本教程。

您总是必须定义哪些元素应该有工具提示。而且我不明白为什么 Bootstrap 应该提供该类，您定义这些类或您自己。也许您希望引导程序自动发挥作用？然而，这种魔法也会导致很多问题（不需要的副作用）。

只需编写即可轻松实现这种魔力`$(".myclass").tooltip()`，这行代码完全符合您的要求。您唯一需要做的就是将 myclass 类附加到那些需要应用工具提示的元素。（只需确保在加载 DOM 后运行该行代码。见下文。）

```
$(document).ready(function() {
    $(".myclass").tooltip();
}); 
```

编辑：显然你不能使用类*工具提示*（可能是因为它在内部使用的某个地方！）。

> 我只是想知道为什么 bootstrap 不运行您使用我可以包含的某些类指定的代码。

你想要的东西产生的代码几乎和你现在必须做的一样。但是他们没有这样做的最大原因是因为它会引起很多麻烦。有人想将其分配给具有 ID 的元素；其他人希望将其分配给具有指定类名的元素；并且其他人希望将其分配给通过某些选择过程实现的指定元素。这 3 个选项会导致额外的复杂性，而 jQuery 已经提供了它。我还没有看到很多插件做你想做的事（只是因为它是不必要的；它真的不会为你节省代码）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-03-23T14:44:46.853

简单的使用这个：

```
<a href="#" id="mytooltip" class="btn btn-praimary" data-toggle="tooltip" title="my tooltip">
   tooltip
</a> 
```

使用 jQuery：

```
$(document).ready(function(){
    $('#mytooltip').tooltip();
}); 
```

您可以在工具提示的左侧您可以简单地添加`this->data-placement="left"`

```
<a href="#" id="mytooltip" class="btn btn-praimary" data-toggle="tooltip" title="my tooltip" data-placement="left">tooltip</a> 
```

# perl - Perl SimpleXML：如何访问没有键的值

> ID：10436233
> 
> 赞同：0
> 
> 时间：2012-05-03T17:13:59.410
> 
> 标签：perl, hash, simplexml

我有一个 XML 文件，当我`print Dumper`在 now 上做 a 时`$data->{Foo}`，我得到以下输出。

```
$VAR1 = [
          {
            'Bar' => { 
                       ...etc...
                     }
          },
          {
            'Bar' => {
                       ...etc2...
                     }
          }
         ]; 
```

如何打印第二个栏下的内容？我试过：

```
$data->{Foo}{1}->{Bar} 
```

但这是不正确的语法。

谢谢，

担

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T17:39:01.687

如果你遗漏了第一个'->'，你会遇到麻烦。

如果你说`$foo->[0]`Perl 认为这`foo`是一个引用数组的标量，然后返回该引用数组的第一个元素。

如果你说`$foo[0]`Perl 认为这`foo`是一个数组，并返回它的第一个元素。

你还需要小心`[]`vs. `{}`。 `[]`用于数组查找，`{}`用于哈希查找。Perl 可以让一个数组相信它是一个散列，如果它真的想要的话，有时会产生令人惊讶的结果。

因此，鉴于所有这些，您需要这样说：

`$data->{Foo}[1]{Bar};`

或更迂腐：

`$data->{Foo}->[1]->{Bar};`

鉴于以下评论，出于我认为非常明显的原因，首选第一种形式。`perldoc perlref`有关详细信息，请参阅中的“使用参考” 。

# xslt - 嵌套的 for-each 循环，使用内部循环中的变量访问外部元素

> ID：10436237
> 
> 赞同：14
> 
> 时间：2012-05-03T17:14:08.240
> 
> 标签：xslt, variables, xpath, foreach

我正在尝试编写一个 XSL，它将从源 XML 输出某个字段子集。该子集将在转换时通过使用包含字段名称和其他特定信息（例如填充长度）的外部 XML 配置文档来确定。

所以，这是两个`for-each`循环：

*   外层遍历记录以逐条记录访问其字段。
*   内层遍历配置 XML 文档以从当前记录中获取配置的字段。

我[在 XSLT 中看到如何从嵌套循环中访问外部循环中的元素？](https://stackoverflow.com/q/453258/851811)外部循环中的当前元素可以存储在`xsl:variable`. 但是我必须在内部循环中定义一个新变量来获取字段名称。这产生了一个问题：是否可以访问有两个变量的路径？

例如，源 XML 文档如下所示：

```
<data>
    <dataset>
        <record>
            <field1>value1</field1>
            ...
            <fieldN>valueN</fieldN>
        </record>
    </dataset>
    <dataset>
        <record>
            <field1>value1</field1>
            ...
            <fieldN>valueN</fieldN>
        </record>
    </dataset>
</data> 
```

我想要一个看起来像这样的外部 XML 文件：

```
<configuration>
    <outputField order="1">
        <fieldName>field1</fieldName>
        <fieldPadding>25</fieldPadding>
    </outputField>
    ...
    <outputField order="N">
        <fieldName>fieldN</fieldName>
        <fieldPadding>10</fieldPadding>
    </outputField>
</configuration> 
```

到目前为止我得到的 XSL：

```
<xsl:variable name="config" select="document('./configuration.xml')"/>
<xsl:for-each select="data/dataset/record">
    <!-- Store the current record in a variable -->
    <xsl:variable name="rec" select="."/>
    <xsl:for-each select="$config/configuration/outputField">
        <xsl:variable name="field" select="fieldName"/>
        <xsl:variable name="padding" select="fieldPadding"/>

        <!-- Here's trouble -->
        <xsl:variable name="value" select="$rec/$field"/>

        <xsl:call-template name="append-pad">
            <xsl:with-param name="padChar" select="$padChar"/>
            <xsl:with-param name="padVar" select="$value"/>
            <xsl:with-param name="length" select="$padding"/>
        </xsl:call-template>

    </xsl:for-each>
    <xsl:value-of select="$newline"/>
</xsl:for-each> 
```

我对 XSL 很陌生，所以这很可能是一个荒谬的问题，而且这种方法也可能是完全错误的（即重复内循环的任务可以在开始时完成一次）。对于如何从外部循环元素中选择字段值的任何提示，我将不胜感激，当然，我也愿意接受更好的方法来处理此任务。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-03T17:36:37.083

您的样式表看起来几乎没问题。只是表达式`$rec/$field`没有意义，因为您不能以这种方式组合两个节点集/序列。相反，您应该使用该`name()`函数比较元素的名称。如果我正确理解了你的问题，这样的事情应该可以工作：

```
<xsl:variable name="config" select="document('./configuration.xml')"/>
<xsl:for-each select="data/dataset/record">
    <xsl:variable name="rec" select="."/>
    <xsl:for-each select="$config/configuration/outputField">
        <xsl:variable name="field" select="fieldName"/>
        ...
        <xsl:variable name="value" select="$rec/*[name(.)=$field]"/>
        ...    
    </xsl:for-each>
    <xsl:value-of select="$newline"/>
</xsl:for-each> 
```

此示例中不需要变量*字段。*您还可以使用函数`current()`访问内部循环的当前上下文节点：

```
<xsl:variable name="value" select="$rec/*[name(.)=current()/fieldName]"/> 
```

# mysql - MySQL数据库的最大大小是多少？

> ID：10436246
> 
> 赞同：21
> 
> 时间：2012-05-03T17:14:38.887
> 
> 标签：mysql

我查看了整个 MySQL 网站，但没有找到明确的答案。

1.  数据库的大小是由操作系统决定的还是有 4GB 的限制？
2.  我在哪里可以找到针对其他数据库（sqlServer、oracle 等）的性能统计信息

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-03T17:17:42.723

根据[MySQL 手册](http://dev.mysql.com/doc/refman/5.6/en/table-size-limit.html)：

> E.10.3。表大小限制
> 
> MySQL 数据库的有效最大表大小通常由操作系统对文件大小的限制决定，而不是由 MySQL 内部限制决定。下表列出了一些操作系统文件大小限制的示例。这只是一个粗略的指南，并不打算确定。有关最新信息，请务必查看特定于您的操作系统的文档。

```
Operating System                     File-size Limit
Win32 w/ FAT/FAT32                   2GB/4GB
Win32 w/ NTFS                        2TB (possibly larger)
Linux 2.2-Intel 32-bit               2GB (LFS: 4GB)
Linux 2.4+  (using ext3 file system) 4TB
Solaris 9/10                         16TB
MacOS X w/ HFS+                      2TB 
```

> Windows 用户请注意，FAT 和 VFAT (FAT32) 不适合与 MySQL 一起使用。请改用 NTFS。
> 
> 在 Linux 2.2 上，您可以通过使用 ext2 文件系统的大文件支持 (LFS) 补丁来获得大于 2GB 的 MyISAM 表。当前大多数 Linux 发行版都基于内核 2.4 或更高版本，并包含所有必需的 LFS 补丁。在 Linux 2.4 上，还存在用于 ReiserFS 的补丁程序以获得对大文件（高达 2TB）的支持。使用 JFS 和 XFS，PB 和更大的文件在 Linux 上是可能的。

至于你问题的另一部分，有几点想法：

1.  这是一个广泛、复杂、多因素的问题。考虑将问题的范围缩小到 MySQL 和其他 RDBMS（例如 SQL Server），甚至可能是一项特定功能。
2.  谷歌是你的朋友。
3.  供应商倾向于发布他们自己的有偏见的比较。对供应商编号持保留态度。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T17:25:07.820

1-关于数据库大小，限制取决于操作系统文件大小。请参阅这篇[文章](http://nickduncan.co.za/maximum-mysql-database-size/)
2- MySQL 数据库的有效最大表大小通常由操作系统对文件大小的限制决定，而不是由 MySQL 内部限制决定。（[来源](http://dev.mysql.com/doc/refman/5.0/en/table-size-limit.html)）
3-您可以在谷歌上搜索 MySQL vs SQL Server Vs Oracle，也可以查看此[链接](http://www.cforcoding.com/2009/07/oracle-vs-mysql-vs-sql-server.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-01-19T16:13:58.987

使用今天的硬件和操作系统，再加上 MySQL 首选的 Engine InnoDB，*表*大小限制为 64TB。使用`PARTITIONing`, 可以扩展到超过 100 PB。

*数据库*是*表*的集合。因此，要从字面上回答标题问题，我们需要超出最大表格大小。由于数据库中可能有数千个表，我们现在进入了艾字节的平流层。

另请参阅[*MySQL 中的硬限制*](http://mysql.rjweb.org/doc.php/limits)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-07T20:04:02.663

对于具有 6 字节指针大小的 myd 文件，默认 mysql 为 256 TB。我知道这是荒谬的答案，但这就是您想知道的。在现实生活中，一切都取决于查询、索引、列数、行数等。我猜。

# android - 列表视图帮助

> ID：10436248
> 
> 赞同：2
> 
> 时间：2012-05-03T17:14:41.673
> 
> 标签：android, android-listview

我正在学校做一个项目，我需要帮助`ListViews`才能正确实施。我必须在项目上执行设置和帮助部分，到目前为止，我可以显示我的列表中的内容，并`Toast`在我单击它时显示所选项目的消息。我的问题是，如何创建和显示该特定项目内的内容？例如，我有一个选项`"Edit Password"`，当我单击它时，它应该显示我的`"Edit Password"`屏幕。这适用于我的两个部分。

这就是我到目前为止所拥有的。它基本上是 android`ListView`教程，但我在那里添加了我的选项。我的问题是，当我单击列表中的一个选项时，如何显示其具体细节？就像我之前说的，如果我点击`"Edit Password"`，我希望它进入一个`"Edit Password"`屏幕。或者在帮助上，如果我点击让我们说“学分”，我希望它引导我到学分页面。

```
public class Settings extends ListActivity {
        /** Called when the activity is first created. */
        @Override
        protected void onCreate(Bundle savedInstanceState) {
          super.onCreate(savedInstanceState);

          setListAdapter(new ArrayAdapter<String>(this, R.layout.settings, SETTINGS));

          ListView lv = getListView();
          lv.setTextFilterEnabled(true);
          lv.setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> parent, View view, int position,
                    long id) 
            {   
                // When clicked, show a toast with the TextView text
                Toast.makeText(getApplicationContext(), ((TextView) view).getText(),
                      Toast.LENGTH_SHORT).show();
            }
          });
        }

    static final String[] SETTINGS = new String[] 
            {"Set Refresh Rate", "Edit Password", "Delete Account"}; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T04:23:09.300

当您扩展`ListActivity`您已经`OnItemClickListener`实现时，您应该覆盖方法`onListItemClick`。在这种方法中，您应该使用 an`Intent`进入一个新的`Activity`地方，您将在其中显示您想要的东西：

```
@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    Intent i = new Intent(this, SecondActivityName.class);
    i.putExtra("pos", position); //pass the position of the clicked row so we know what to show.
    startActivity(i); // let's go to the other activity
} 
```

`SeconActivityName`是一个`Activity`你应该创建的，你会在哪里显示你想要的另一个屏幕（记住将活动添加到清单文件中！）：

```
 public class SecondActivityName extends Activity {

    @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
                Intent i = getIntent(); 
                int rowPosition = i.getIntExtra("pos", -1); //we now have the row's position that was clicked in the other activity.
                // based on that you show the screen you want for example after a switch
                switch (rowPosition) {
                     case -1:
                        //this is the default value, something has gone terrible wrong
                        //finish the activity and hide:
                        finish();
                        break;
                     case 0:
                        //row 0 was clicked so show the "Set Refresh Rate" screen
                        setContentView(R.layout.refresh_rate__screen);
                        break;
                //do the same for the other rows;
//... 
```

如果各种设置的屏幕没有那么不同，这将起作用。如果是，您可能必须为每个活动实施不同的活动，并`onListItemClick`根据位置参数启动适当的活动。

# objective-c - 更新时保留购买的内容

> ID：10436256
> 
> 赞同：-2
> 
> 时间：2012-05-03T17:15:00.643
> 
> 标签：objective-c, ios, xcode, ios4, in-app-purchase

我有某个艺术家的音乐应用程序，它包含不同的专辑，用户可以单独购买每张专辑，当购买某些专辑时，其按钮从购买变为播放，并且该专辑的歌曲将在应用程序中列出，但是当我做了一个更新的版本，我发现当用户更新他的应用程序时，它会像默认一样重置，播放按钮将被购买按钮取代，用户必须重新下载他已经购买的专辑版本，我怎样才能保持所有版本中的所有内容，

这就是按钮如何在表格视图中将其图像从“购买”更改为“播放”3

```
 NSArray *myPathList = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
NSString *myPath = [myPathList objectAtIndex:0];
NSString* storagePath = [myPath stringByAppendingPathComponent:@"purchasedAlbums.plist"];
NSArray* valueList = [[NSArray alloc] initWithContentsOfFile:storagePath];

UIImage *change1 = [UIImage imageNamed:@"playalbum-06.png"];
UIImage *change2 = [UIImage imageNamed:@"playalbum-07.png"];
UIImage *change3 = [UIImage imageNamed:@"playalbum-08.png"];
UIImage *change4 = [UIImage imageNamed:@"playalbum-09.png"];
UIImage *change5 = [UIImage imageNamed:@"playalbum-11.png"];
UIImage *change6 = [UIImage imageNamed:@"playalbum-12.png"];
UIImage *change7 = [UIImage imageNamed:@"playalbum-10.png"];
UIImage *change8 = [UIImage imageNamed:@"playalbum-13.png"];
UIImage *change9 = [UIImage imageNamed:@"ipadplay-16.png"];
UIImage *change10 = [UIImage imageNamed:@"ipadplay-17.png"];
UIImage *change11 = [UIImage imageNamed:@"ipadplay-18.png"];
UIImage *change12 = [UIImage imageNamed:@"ipadplay-19.png"];
UIImage *change13 = [UIImage imageNamed:@"ipadplay-20.png"];
UIImage *change14 = [UIImage imageNamed:@"ipadplay-21.png"];

int i;
for (i = 0; i < [AlbumsImages count]; i++) {

if ([[valueList objectAtIndex:i+1] intValue]) {
    if (i == 0) {
        [AlbumsImages replaceObjectAtIndex:0 withObject:change1];
    }
    if (i == 1) {
        [AlbumsImages replaceObjectAtIndex:1 withObject:change2];
    }
    if (i == 2) {
        [AlbumsImages replaceObjectAtIndex:2 withObject:change3];
    }
    if (i == 3) {
        [AlbumsImages replaceObjectAtIndex:3 withObject:change4];
    }
    if (i == 4) {
        [AlbumsImages replaceObjectAtIndex:4 withObject:change5];
    }
    if (i == 5) {
        [AlbumsImages replaceObjectAtIndex:5 withObject:change6];
    }
    if (i == 6) {
        [AlbumsImages replaceObjectAtIndex:6 withObject:change7];
    }
    if (i == 7) {
        [AlbumsImages replaceObjectAtIndex:7 withObject:change8];
    }
    if (i == 8) {
        [AlbumsImages replaceObjectAtIndex:8 withObject:change9];
    }
    if (i == 9) {
        [AlbumsImages replaceObjectAtIndex:9 withObject:change10];
    }
    if (i == 10) {
        [AlbumsImages replaceObjectAtIndex:10 withObject:change11];
    }
    if (i == 11) {
        [AlbumsImages replaceObjectAtIndex:11 withObject:change12];
    }
    if (i == 12) {
        [AlbumsImages replaceObjectAtIndex:12 withObject:change13];
    }
    if (i == 13) {
        [AlbumsImages replaceObjectAtIndex:13 withObject:change14];
    } 
```

这就是下载时保存专辑的地方

```
request = [ASIHTTPRequest requestWithURL:[NSURL URLWithString:URL]];
                [request setDownloadDestinationPath:[[NSHomeDirectory() stringByAppendingPathComponent:@"Library/Caches"] 
                                                     stringByAppendingPathComponent:[NSString stringWithFormat:@"%@.mp3",[self FileNameGetter:Albumid FileID:CurrentSongID ]]]]; 
```

这就是应用程序加载时发生的情况

```
NSArray *myPathList = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
NSString *myPath = [myPathList objectAtIndex:0];
NSString* storagePath = [myPath stringByAppendingPathComponent:@"purchasedAlbums.plist"];
NSArray* valueList = [[NSArray alloc] initWithContentsOfFile:storagePath];
if ([valueList count]==0) {
    valueList = [NSArray arrayWithObjects: @"0" ,@"0" ,@"0" , @"0" ,@"0" ,@"0" , @"0" ,@"0" ,@"0" , @"0" ,@"0" ,@"0" , @"0" ,@"0" ,@"0" , nil];
    [valueList writeToFile:storagePath atomically:true];
} 
valueList=nil;
myPathList=nil;
myPath =nil;
storagePath =nil;
[valueList release];
[myPathList release];
[myPath release];
[storagePath release]; 
```

我真的很感激任何帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T19:09:15.957

首先，如果您只想通过更新保留内容，请将其保存在 DocumentsDirectory 而不是缓存中。

而对于持有购买进度，您可以使用`restoreTransactions`.

# wpf - WPF 编码 UI 测试：加密从数据源读取的密码

> ID：10436258
> 
> 赞同：4
> 
> 时间：2012-05-03T17:15:16.547
> 
> 标签：wpf, coded-ui-tests, password-encryption

我使用 Coded UI Test Builder 创建了一个录制的操作，将用户凭据输入到登录窗口中。此初始记录将加密密码硬编码到测试方法使用的 Params 对象的公共字段中，如下所示：

```
[GeneratedCode("Coded UITest Builder", "10.0.40219.1")]
    public class StartOccUIParams
    {

        #region Fields
        /// <summary>
        /// Type 'username' in 'usernameBox' text box
        /// </summary>
        public string UIUsernameBoxEditText = "username";

        /// <summary>
        /// Type '{Tab}' in 'usernameBox' text box
        /// </summary>
        public string UIUsernameBoxEditSendKeys = "{Tab}";

        /// <summary>
        /// Type '********' in 'passwordBox' text box
        /// </summary>
        public string UIPasswordBoxEditSendKeys = "9927b9lJLxdZrqR1G+zHC2MA==";
        #endregion
    } 
```

这很好用，但我需要从 CSV 数据源中检索用户名和密码来测试失败条件。问题是，如何将从 CSV 检索到的密码转换为可与密码框一起使用的加密形式？我查看了 SecureString，但它没有公开获取加密字符串的 API，我怀疑它的格式是否正确。

```
 var loginParams = UIMap.StartOccUiParams;
            loginParams.UIUsernameBoxEditText = TestContext.DataRow["User"].ToString();           
            var password= TestContext.DataRow["Password"].ToString();  

           // how do I encrypt password to use below ?    
            loginParams.UIPasswordBoxEditSendKeys = "encrypted password"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-07T19:24:22.873

使用[Playback.EncryptText](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.uitesting.playback.encrypttext.aspx)

> 加密给定文本以作为密码属性传递给播放。

# objective-c - ios导航错误使用按钮

> ID：10436260
> 
> 赞同：1
> 
> 时间：2012-05-03T17:15:17.333
> 
> 标签：objective-c, ios

我正在尝试从登录屏幕转到注册。但是出现错误...

> 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“应用程序试图在目标上呈现一个 nil 模态视图控制器。”

登录.H

```
#import "SignupController.h"

@interface LoginController : UIViewController {

IBOutlet SignupController *signupController; 
```

登录.M

```
(IBAction)signup:(UIButton*) sender
{
    NSLog(@"lla"); 
        [self presentModalViewController:signupController animated:YES];

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T17:18:42.677

您需要先分配并启动您的注册控制器。

```
self.signupController = [[SignupController alloc]initWithNibName:xibname];
[self presentModalViewController:signupController animated:YES]; 
```

其中 is 将是您的nibfile`xibname`的名称，如果您的接口文件被调用，则类似于 @"signupController"`signupController.xib`

塞巴斯蒂安

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T17:19:11.843

如果您不使用 nib 文件：

```
signupController = [[SignupController  alloc] init];
[self presentModalViewController:signupController animated:YES]; 
```

如果您使用 nib 文件：

```
signupController = [[SignupController  alloc] initWithNibName:@"nib file name with out ext" bundle:nil];
[self presentModalViewController:signupController animated:YES]; 
```

# html - 在 Chrome/Firefox 中删除文本输入中的顶部和底部填充

> ID：10436265
> 
> 赞同：7
> 
> 时间：2012-05-03T17:15:31.477
> 
> 标签：html, css, forms, firefox, google-chrome

我正在尝试使输入看起来像纯文本。目的是绘制一个跨度，当用户单击该跨度时，它会隐藏并显示一个看起来像纯文本但用户可以编辑的输入。

在 Chrome 和 Firefox 中，我无法摆脱顶部和底部填充，即使我将填充和边距 CSS 属性设置为 0。

我的 CSS 看起来像这样：

```
input.myInput {
    font-family: "segoe ui";
    font-size: 20px;
    padding: 0px;
    margin: 0px;
    outline: none;
    border: 0px;
    vertical-align: baseline;
} 
```

看到字体大小设置为 20px。Chrome 和 Firefox 添加了 4px padding-top 和 padding-bottom，所以输入是 28px 高，而不是预期的 20px。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-03T17:18:11.060

您还需要将`line-height`输入元素的 重置为 20px。默认情况下，某些浏览器将 4px（2 顶部 + 2 底部）添加到输入元素的行高。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T17:19:02.207

它可能是你的字体。尝试直接设置输入的 CSS 高度或尝试调整行高。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T17:35:48.907

正如 Diodeus 建议的那样，只需为您的输入添加高度。

```
input.myInput {
    font-family: "segoe ui";
    font-size: 20px;
    height: 20px;
    padding: 0px;
    margin: 0px;
    outline: none;
    border: 0px;
    vertical-align: baseline;
} 
```

行高不起作用

# mysql - SQL查询总和乘以它应该是的2倍

> ID：10436268
> 
> 赞同：0
> 
> 时间：2012-05-03T17:15:35.890
> 
> 标签：mysql, sql, sum

当我运行此查询时，投票数`sum`是应有的 2 倍（总和 = 6 而不是 3）。有人可以解决这个问题吗？

```
SELECT sum(votes.vote) AS sum
    , my_votes.vote IS NOT NULL AS did_i_vote
    , votes.parent_id, subject
    , review_date
    , item_id
    , review_summary
    , review, full_name
    , reputation
    , profile_picture
    , accounts.acct_id
FROM votes
RIGHT JOIN items_purchased 
    on votes.parent_id=items_purchased.purchase_id 
JOIN accounts 
    ON items_purchased.purchaser_account_id=accounts.acct_id  
JOIN items 
    on items_purchased.item_id=items.folder_id
LEFT JOIN votes AS my_votes 
    ON my_votes.parent_id=items_purchased.purchase_id 
    AND my_votes.acct_id='3' 
    AND my_votes.column_name='purchase_id' 
WHERE purchase_id='2' 
    AND deleted_p!=1 and pub_priv_p!=1                                       
GROUP BY items_purchased.purchase_id 
```

我很确定它与 JOIN 有关，因为如果我摆脱`JOIN items on items_purchased.item_id=items.folder_id`了 sum=3。但是，我需要在那里以某种方式加入。

想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T17:19:24.303

没有模式我们无法判断，但这是一个猜测：

检查所有连接条件 - 您可能缺少导致该组结果“重复”的条件。

例如，如果我有一张桌子

```
`Foo` with columns `A` `B` and `C` - A and B are the PK;
`Bar` with columns `A` `B` and `Z` - A and B are the PK;
`Biz` with columns `Z` `GOAL` 
```

而且我想计算每个 GOALS 的数量，如果我只使用而不是`A`加入 Foo 到 Bar ，我可能会得到一个错误的计数。`A``B`

看到这一点的最简单方法是执行 SELECT * 并删除组

# php - 带有 Drupal 内容类型的数据库的自动完成字段

> ID：10436270
> 
> 赞同：3
> 
> 时间：2012-05-03T17:15:42.017
> 
> 标签：php, sql, database, drupal, drupal-7

我开始使用模块 Field Group 和 Field Collection 创建一个新的内容类型，并且成功了！

但是，我想在我的表单中添加自动完成字段，但我不知道如何做到这一点。也许使用 hook_form_alter 但是我无法在我的字段集合中添加我的自定义字段。

你知道怎么做吗？

非常感谢

PS：我使用 D7

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T14:49:08.407

要将 auto_complete 添加到 from 字段，您需要执行以下操作：

第一个：使用 hook_for_alter() 将 auto_complete 路径添加到文本字段

```
function YOUR_MODULE_form_alter(&$form, &$form_state, $form_id)
{
    if($form_id == "YOUR-CONTENT-TYPE_node_form")
    {
        $form['field_YOUR-FIELD']['und'][0]['value']['#autocomplete_path'] = 'my-module/autocomplete/path';
    }
} 
```

第二：使用 hook_menu() 定义您作为#autocomplete_path 属性传递给字段的菜单回调

```
function YOUR_MODULE_menu()
{
    $items = array();
    $items['my-module/autocomplete/path'] = array(
    'page callback'     => 'your_module_autocomplete_callback',
    'access callback'   => TRUE,
    'weight'            => 1,
    'type'              => MENU_CALLBACK,
    );
    return $items;
} 
```

第三个也是最后一个：添加菜单回调函数，将项目返回到文本字段

```
function your_module_autocomplete_callback($string)
{
    $items = array();
    $query = db_select('node', 'n');
    $value = $query->fields('n', array('title'));
    $value = $query->condition(db_and()->condition('n.type', 'YOUR_CONTENT_TYPE')->condition('title', '%' . db_like($string) . '%', 'LIKE'))->orderRandom()->execute();

    $i = 0;
    foreach ($value as $val)
    {
        $items[$val->name] = check_plain($val->name);
    }
    print drupal_json_output($items);
    exit();
} 
```

希望这会有所帮助……穆罕默德。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T11:29:51.240

适合多个字段的更新代码。

```
function YOUR_MODULE_form_alter(&$form, &$form_state, $form_id)
{
    if($form_id == "YOUR-CONTENT-TYPE_node_form")
    {
        foreach($form['field_match']['und'][0]['field_adversaires']['und'] as $k =>$v)
        {
            if(is_numeric($k))
            {
                $form['field_match']['und'][0]['field_adversaires']['und'][$k]['value']['#autocomplete_path'] = 'basketfacile_type/autocomplete';
            }
        }
    }
} 
```

希望它对你有用……穆罕默德。

# c# - C#：反射实例化的对象抛出转换错误？

> ID：10436274
> 
> 赞同：2
> 
> 时间：2012-05-03T17:16:21.703
> 
> 标签：c#, unit-testing, exception, reflection, casting

我正在开发一个 C# 应用程序，该应用程序应该检查其他 C# 可执行文件并通过单元测试断言它们公开的接口的某些属性。（就上下文而言，这是一个 CS 课程的评分应用程序；任务是从文本文件中解析数字范围并根据固定接口返回它们。）

到目前为止，我已经设法：

*   将可执行文件作为变量加载`assembly`，使用`Assembly.LoadFrom(string)`
*   获取相关接口的类型，使用`assembly.GetType(string)`
*   找到接口的实现类型，再次使用`assembly.getType(string)`
*   将实现类型实例化为`dynamic`对象，使用`type.GetConstructor(Type[])`and`constructor.Invoke(Object[])`

此时，我有一个`dynamic`对象`loader`，我知道它实现了我正在测试的接口。我想调用其中一个接口方法`obj`，所以我运行：

```
dynamic rangeSet = loader.GetRangeSetFromFile (inputFile); // inputFile is a string 
```

这将引发`InvalidCastException`以下跟踪：

```
System.InvalidCastException : Cannot cast from source type to destination type.
at SwapAssignment3.Implementations.RangeLoaderAdapter.GetRangeSetFromFile (string) <IL 0x0001e, 0x00066>
at (wrapper dynamic-method) object.CallSite.Target (System.Runtime.CompilerServices.Closure,System.Runtime.CompilerServices.CallSite,object,string) <IL 0x00036, 0x0007b>
at System.Dynamic.UpdateDelegates.UpdateAndExecute2<object, string, object> (System.Runtime.CompilerServices.CallSite,object,string) <0x003cf>
at AssignmentTests.R3Test.TestLoadingViaInterface () [0x00054] in /Users/tim/Dropbox/Courses/CSSE375-TA/AssignmentTests/AssignmentTests/R3Test.cs:82
at (wrapper managed-to-native) System.Reflection.MonoMethod.InternalInvoke (System.Reflection.MonoMethod,object,object[],System.Exception&) <0x00003>
at System.Reflection.MonoMethod.Invoke (object,System.Reflection.BindingFlags,System.Reflection.Binder,object[],System.Globalization.CultureInfo) <IL 0x000db, 0x00147> 
```

为什么会抛出这个错误？运行有问题的可执行文件本身就可以正常工作；此错误仅在我的测试应用程序的上下文中引发。该`GetRangeSetFromFile`方法的主体如下：

```
public IRangeSet GetRangeSetFromFile(string filePath)
{
    var newRange = new RangeStorage();
    _fileProcessor.ProcessFile(filePath);
    newRange.StoreElements((List<IRange>) _fileProcessor.GetStorage());
    return newRange;
} 
```

我有充分的理由相信（从程序输出中，除其他外）演员错误是从第三行引发的，与`List<IRange>`演员; 但是，由于跟踪提供了 IL 位置，因此我不能 100% 确定这一点，而且我不知道为什么该演员一开始会失败，因为如果程序自行运行（在我的测试员）。

我的主要问题是：**为什么会引发这个演员错误，我该如何避免它？**

*编辑：*根据要求，测试代码如下：

```
Type interfaceType = assembly.GetType("IRangeLoader");
List<Type> implementingTypes = new List<Type> (assembly.GetTypes ())
                                        .FindAll ((Type t) => t.IsClass)
                                        .FindAll ((Type t) => (new List<Type> (t.GetInterfaces ())).Contains (interfaceType));
Type implementingType = implementingTypes[0];
ConstructorInfo ctor = implementationType.GetConstructor (new Type[] {});
dynamic loader = ctor.Invoke (new Object[] {});
dynamic rangeSet = loader.GetRangeSetFromFile ("sample range.txt"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T20:16:04.637

我认为这是一个好主意，但看起来你在这里过于偏袒学生。

您可以提供一个程序集（例如`CSxxxx.Interfaces.dll`），要求您的学生参考和实施。从那里加载实现非常简单。

您还可以提供一套测试，如果它们全部通过，它们可能会产生一个 C 左右的结果。然后你的套件将测试一切。如果您有点狡猾并且可以指望您的一些学生扩展给定的测试，那么您可以针对所有其他实现运行 StudentX 的测试，并为破坏其他实现给予奖励积分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T18:27:54.947

好的，以下代码似乎可以在另一个程序集中调用该方法：

```
Assembly testAssembly = Assembly.LoadFile(<path>);

var interfaceType = testAssembly.GetTypes().Where(x => x.Name == "ISampleInterface").FirstOrDefault();

if(interfaceType != null)
{
    var implementingType = testAssembly.GetTypes().Where(typ => type.GetInterfaces().Any(iface => iface == interfaceType)).FirstOrDefault();

    if(implementingType != null)
    {
        dynamic obj = Activator.CreateInstance(implementingType);

        dynamic result = obj.SampleInterfaceMethod();

        Console.WriteLine(result);
    }
} 
```

尝试使用其中的一些。我能够调用该对象，然后从该方法中获取结果。

# android - 为什么 GroupView 的移动效果不好？

> ID：10436279
> 
> 赞同：1
> 
> 时间：2012-05-03T17:16:49.140
> 
> 标签：android, android-layout, animation, event-handling, drawing

我做了两个嵌套`RelativeLayout`的 s，用一些 s 填充一个，`TextView`并对手指拖动客体做出反应。

但效果很差：

1）移动组留下垃圾痕迹，好像背景没有重绘

2）`leftMargin`==800的列不绘制

XML 布局代码：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:id="@+id/stator"
>

<RelativeLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginLeft="0dp"
    android:layout_marginTop="0dp"
    android:id="@+id/mover"
    android:background="@android:color/darker_gray"
    >

</RelativeLayout>

</RelativeLayout> 
```

的java代码：

```
 public class SymbolPadActivity extends Activity {

private RelativeLayout mover;
private RelativeLayout stator;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);

    mover = (RelativeLayout) findViewById(R.id.mover);

    RelativeLayout.LayoutParams labelParams;
    TextView textView;
    for(int leftMargin = 0; leftMargin<1500; leftMargin += 200) {
        for(int topMargin=0; topMargin<800; topMargin += 80) {

            // I can't omit these 3 lines 
            labelParams = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
            labelParams.addRule(RelativeLayout.ALIGN_PARENT_LEFT, RelativeLayout.TRUE);
            labelParams.addRule(RelativeLayout.ALIGN_PARENT_TOP, RelativeLayout.TRUE);

            labelParams.leftMargin = leftMargin;
            labelParams.topMargin = topMargin;

            textView = new TextView(this);
            textView.setText("(" + leftMargin + "," + topMargin + ")");
            mover.addView(textView, labelParams);

        }
    }

    stator = (RelativeLayout) findViewById(R.id.stator);

    stator.setOnTouchListener(new View.OnTouchListener() {

        private int startleft, starttop;
        private float startx, starty;
        private boolean started;

        @Override
        public boolean onTouch(View v, MotionEvent event) {

            if( event.getActionMasked() == MotionEvent.ACTION_DOWN ) {
                started = true;
                startx = event.getX();
                starty = event.getY();
                startleft = mover.getLeft();
                starttop = mover.getTop();
                return true;
            }

            else if( event.getActionMasked() == MotionEvent.ACTION_UP ) {
                started = false;
                startx = starty = 0;
                return true;
            }

            else if( event.getActionMasked() == MotionEvent.ACTION_MOVE ) {
                mover.setLeft(  startleft + (int)(event.getX() - startx) );
                mover.setTop(  starttop + (int)(event.getY() - starty) );
                return true;
            }

            else {
                return false;
            }

        }
    });
}
} 
```

如何正确实现我的目标（简而言之）？

# file - 替换所有目录和子目录中某种类型的所有文件？

> ID：10436282
> 
> 赞同：-1
> 
> 时间：2012-05-03T17:17:06.637
> 
> 标签：file, bash, replace, find

我玩过 find 命令和我能想到的任何其他命令，但没有任何效果。

我希望我的 bash 脚本能够在给定目录及其所有子目录中找到所有文件类型，并用另一个文件替换该文件。

例如：假设 /home/test1/randomfolder/index.html

/home/test1/randomfolder/stuff.html

/home/不同/stuff/index.html

/home/不同/stuff/another.html

当程序被指定为 /home/ 作为要在其中搜索的目录时，需要找到这些 .html 文件中的每一个，然后通过将另一个文件回显到其中来替换它们。

这在bash中可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T17:31:43.480

这应该或多或少让你朝着正确的方向前进：

```
for file in `find . -type f -name \*.html`; do echo "new content" > $file; done 
```

# java - Java SOAP 请求作为 Web 服务？

> ID：10436283
> 
> 赞同：2
> 
> 时间：2012-05-03T17:17:06.850
> 
> 标签：java, web-services, soap, saaj

因此，为了给您一些背景知识，我正在尝试创建一个将通过 SOAP 与第三方交互的客户端。最初我开始使用 javax.xml.soap SAAJ 推出它，但后来意识到在创建 SOAPConnection 时没有超时选项。

我认为 AXIS 确实有超时，但已被警告尝试避免，这不是很好的性能。我的上级似乎将此作为最后的恢复。

有些人建议 javax.xml.ws Web 服务路由很有效，因为您可以将超时设置放入上下文属性中，前提是它是一个 Web 服务。

所以情况就是这样，我向其发送请求的第三方实际上并没有 WSDL 文件或 URL，最初的想法是构建 SOAP 请求并发送它，如果 SAAJ 有超时设置会很好用.

所以我在思考并原谅我的无知，我是否可以像 Web 服务一样建模和实现通信，而不是构建请求的 SAAJ javax.xml.soap 方法？如果是这样，任何人都可以真正指出我吗？我发现的大多数文档似乎都依赖于从 WSDL 生成存根和类。

这完全是为了设置与此第三方 SOAP API 的连接的超时设置。

另请注意，我看到有些人建议尝试将其视为可以设置超时的 HttpConnection，但我发现它的缺点是它不再返回 SOAPMessage 类型的对象。

所以基本上我试图改变这一点：

```
 SOAPMessage soapMessage       = messageFactory.createMessage();
    SOAPConnection soapConnection = soapConnectionFactory.createConnection();

    SOAPPart soapPart         = soapMessage.getSOAPPart();
    SOAPEnvelope soapEnvelope = soapPart.getEnvelope();
    SOAPHeader soapHeader     = soapEnvelope.getHeader();
    SOAPBody soapBody         = soapEnvelope.getBody();
    ....
    soapConnection.call(soapMessage, url); 
```

进入更像网络服务的东西，所以我可以这样做：

```
requestContext.put(BindingProviderProperties.REQUEST_TIMEOUT, 2000); 
requestContext.put(BindingProviderProperties.CONNECT_TIMEOUT, 2000);

myService.callMyRemoteMethodWith(myParameter1, myparameter2); 
```

我真的缺乏关于 javax.ws 框架的知识，所以请轻描淡写:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T19:30:19.563

没有 WSDL 就无法创建客户端 jar 文件（存根）。简单地说，我想您应该知道，WSDL 是围绕任何 Web 服务实现的核心。

在远程服务发布之前，不建议为远程服务创建 WSDL，因为从长远来看它可能不可行。明天如果这个第三方请求的参数发生变化，你愿意为WSDL的相应变化花费精力和时间吗？这将导致大量的维护。

我认为您的基本需求是应该返回一个 SOAPMessage 类型的对象，我想您应该寻找实现超时的方法，以保持您当前的方法完好无损。

# jquery - 为 Jquery 过滤器插件构建哈希标记支持

> ID：10436285
> 
> 赞同：0
> 
> 时间：2012-05-03T17:17:12.410
> 
> 标签：jquery, url, hashtag

我想要一个超级基本的过滤系统用于我的投资组合页面，所以当用户点击“品牌”时，只需使用品牌名称显示（其余部分隐藏），当用户点击打印设计时，只需打印显示上等

我使用过同位素和流沙，但这次我想要一种非常基本的方法来做到这一点而没有任何影响。所以我选择使用[这个脚本](http://net.tutsplus.com/tutorials/javascript-ajax/creating-a-filterable-portfolio-with-jquery/)。jquery 相当简单 - 它查找与过滤器链接和显示/隐藏具有相同类的投资组合项目。这是jQuery：

```
$('ul#filter a').click(function() {
    $(this).css('outline','none');
    $('ul#filter .current').removeClass('current');
    $(this).parent().addClass('current');

    var filterVal = $(this).text().toLowerCase().replace(' ','-');

    if(filterVal == 'all') {
        $('ul#portfolio li.hidden').show().removeClass('hidden');
    } else {

        $('ul#portfolio li').each(function() {
        if(!$(this).hasClass(filterVal)) {
            $(this).hide().addClass('hidden');
        } else {
            $(this).show().removeClass('hidden');
        }
    });
    }

    return false;
}); 
```

在我的标题/导航中，我有包含所有这些可过滤链接的导航。因此，在导航中的“工作”下方，我拥有所有可过滤的对象。当用户点击“品牌”时，他​​们会被带到工作页面，显示所有的投资组合项目（不仅仅是品牌项目）。那是因为这个 jquery 脚本不支持哈希标签。也就是说，过滤后的投资组合的每个状态都没有与之关联的 URL。我正在寻找添加此功能，但不确定从哪里开始。

我注意到有一个[hashchange 插件](http://benalman.com/projects/jquery-hashchange-plugin/)似乎正是我需要的解决方案。有人可以帮助我如何添加对主题标签的支持或将它们与这个 hashchange 插件一起使用吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T19:37:24.433

不确定这是否是处理此问题的最佳方法，但我想出的解决方案是将主题标签分配给导航中的每个锚链接。我应用了以下 jquery 来使其工作：

```
var thispage = window.location.hash;

if(thispage == ''){
    $('ul#filter li:nth-child(1)').addClass('current');
}
if(thispage == '#brand-id'){
    $('ul#filter li:nth-child(2)').addClass('current');
}
if(thispage == '#print'){
    $('ul#filter li:nth-child(3)').addClass('current');
}
if(thispage == '#book-and-editorial'){
    $('ul#filter li:nth-child(4)').addClass('current');
}
if(thispage == '#web'){
    $('ul#filter li:nth-child(5)').addClass('current');
}
if(thispage == '#packaging'){
    $('ul#filter li:nth-child(6)').addClass('current');
}
if(thispage == '#exhibit'){
    $('ul#filter li:nth-child(7)').addClass('current');
}

var currentpage = thispage.replace('#','');

$('ul#portfolio li').each(function() {
    if(!$(this).hasClass(currentpage)) {
        $(this).hide().addClass('hidden');
    } else {
        $(this).show().removeClass('hidden');
    }
}); 
```

它看起来很臃肿，但是有没有更好的方法来解决这个问题，也许将它构建到原始脚本中？

# c++ - 如何在 C++ 中实现无参数仿函数及其返回值的可区分联合？

> ID：10436287
> 
> 赞同：3
> 
> 时间：2012-05-03T17:17:38.653
> 
> 标签：c++, unions, discriminated-union

我知道我可以使用`boost::variant`并避免不得不问这个问题。但是使用`boost::variant`涉及到很多丑陋的代码。尤其是游客很乱。所以，事不宜迟……

我编写了以下模板类来实现对柯里化函数的惰性求值。（有关整个片段，请参阅[我之前的问题。）](https://stackoverflow.com/questions/10432001/deep-function-currying-in-c-using-template-metaprogramming)

```
template <typename> class curry;

template <typename _Res>
class curry< _Res() >
{
  public:
    typedef std::function< _Res() > _Fun;
    typedef _Res _Ret;

  private:
    _Fun _fun;

  public:
    explicit curry (_Fun fun)
    : _fun(fun) { }

    operator _Ret ()
    { return _fun(); }
}; 
```

所以我想更新它以包括记忆。从概念上讲，它非常简单。首先，我必须更换：

```
private:
  _Fun _fun;

public:
  explicit curry (_Fun fun)
  : _fun(fun) { } 
```

和：

```
private:
  bool _evaluated; // Already evaluated?
  union
  {
      _Fun _fun;   // No
      _Res _res;   // Yes
  };

public:
  explicit curry (_Fun fun)
  : _evaluated(false), _fun(fun) { }

  explicit curry (_Res res)
  : _evaluated(true), _res(res) { } 
```

但是还剩下两件事。首先，我必须更新`operator _Ret`，如果它执行惰性求值，那么结果实际上会被记忆。其次，我必须添加一个析构函数，以便根据 的值`_evaluated`，要么 要么`_fun`被`_res`销毁。这是我不太确定如何做事的地方。

`_fun`首先，这是替换为的正确方法`_res`吗？如果没有，我该怎么做？

```
operator _Ret ()
{
  if (!_evaluated) {
    _Fun fun = _fun;

    // Critical two lines.
    _fun.~_Fun();
    _res._Res(fun());

    _evaluated = true;
  }
  return _res;
} 
```

其次，这是选择性破坏的正确方法`_fun`还是`_res`？如果没有，我该怎么做？

```
~curry ()
{
   if (_evaluated)
     _res.~_Res();
   else
     _fun.~_Fun();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T01:01:36.533

正如其他评论者所说，您不能使用联合，但您可以使用[Placement new](http://www.parashift.com/c++-faq-lite/dtors.html#faq-11.10)。

这是一个使用placement new的有区别的联合的例子：

*请注意，您的平台上可能存在针对 A 和 B 类型的对齐限制，并且此代码不会执行这些限制。*

```
#include <iostream>
#include <cstring>

using namespace std;

struct foo {
  foo(char val) : c(val) {
    cout<<"Constructed foo with c: "<<c<<endl;
  }

  ~foo() {
    cout<<"Destructed foo with c: "<<c<<endl;
  }
  char c;
};

struct bar {
  bar(int val) : i(val) {
    cout<<"Constructed bar with i: "<<i<<endl;
  }

  ~bar() {
    cout<<"Destructed bar with i: "<<i<<endl;
  }

  int i;
};

template < size_t val1, size_t val2 >
struct static_sizet_max
{
   static const size_t value
     = ( val1 > val2) ? val1 : val2 ;
};

template <typename A, typename B>
struct unionType {
  unionType(const A &a) : isA(true)
  {
    new(bytes) A(a);
  }

  unionType(const B &b) : isA(false)
  {
    new(bytes) B(b);
  }

  ~unionType()
  {
    if(isA)
      reinterpret_cast<A*>(bytes)->~A();
    else
      reinterpret_cast<B*>(bytes)->~B();
  }

  bool isA;
  char bytes[static_sizet_max<sizeof(A), sizeof(B)>::value];
};

int main(int argc, char** argv)
{
  typedef unionType<foo, bar> FooOrBar;

  foo f('a');
  bar b(-1);
  FooOrBar uf(f);
  FooOrBar ub(b);

  cout<<"Size of foo: "<<sizeof(foo)<<endl;
  cout<<"Size of bar: "<<sizeof(bar)<<endl;
  cout<<"Size of bool: "<<sizeof(bool)<<endl;
  cout<<"Size of union: "<<sizeof(FooOrBar)<<endl;
} 
```

# ruby-on-rails - 尝试插入 postgresql：出现错误

> ID：10436293
> 
> 赞同：0
> 
> 时间：2012-05-03T17:18:01.680
> 
> 标签：ruby-on-rails, postgresql, encoding, utf-8, data-migration

在调用

```
http://localhost:3000/tempbizs 
```

我有 tempbiz_controller 的索引方法将数据从旧数据库（sqlite3）迁移到我的 rails 应用程序中的另一个 postgresql。

它插入了几条记录。但是我看到它引发了以下错误，该错误显示在我的浏览器上：

```
ActiveRecord::StatementInvalid in TempbizsController#index

PG::Error: ERROR:  invalid byte sequence for encoding "UTF8": 0xca5a
: INSERT INTO "tempbizs" ("BusinessName", "BusinessSubType", "BusinessTradeName", 
"BusinessType", "City", "Country", "House", "Latitude", "LocalArea", "Longitude",     
"ZIP", "State", "Street", "Unit", "UnitType", "created_at", "updated_at") 
VALUES     ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17) 
RETURNING "id" 
```

我要插入的数据是：RonZalkoTotal Body Fitness & Yoga

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T17:27:56.417

您的文本编码与 UTF-8 不同，并且您正尝试将其插入 UTF-8 数据库。SQLite 对文本编码没有做任何特殊的事情，因此数据在 SQLite 中很好，但对 PostgreSQL 无效。您需要找到不是真正 UTF-8 的记录并手动转换它们以迁移数据。

根本问题是您的应用程序没有正确处理编码。用户能够以与 UTF-8 不同的编码方式提交数据，并且一直到您的数据库。您需要检查并确保您的页面以 UTF-8 呈现，并且浏览器正在使用该编码进行表单提交。您可能还需要检查您的型号。查看访问此表的所有位置。我怀疑你会在 SO 上找到一个神奇的解决方案，而不是去挖掘你的代码并仔细检查所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T17:33:24.603

您已经告诉 PostgreSQL，您的 varchar 列之一是用 UTF-8 编码的。但是，您尝试放入其中的数据 (0xCA5A) 不是有效的 UTF-8。

因此，您需要弄清楚该值实际使用的编码，然后在插入之前进行转换（或者，告诉 PostgreSQL 使用该编码）。

如果 0xCA5A 不应该是文本，那么您需要在 PostgreSQL 中使用二进制而不是文本类型。

您在 SQLite 中没有遇到这种情况，因为 SQLite 在执行数据有效性方面做得并不多。

0xCA5A 也可能只是损坏，因为它在任何常见的编码中看起来都不正确：

*   ISO-8859-1、-15 和 cp1252：ÊZ
*   UTF16（大端）：쩚</li>
*   UTF16（小端）：嫊</li>
*   shiftjis：ﾊZ

如果只是损坏，则需要过滤掉无效记录。

# oauth-2.0 - WSO2 身份服务器 OAuth 2 支持

> ID：10436296
> 
> 赞同：0
> 
> 时间：2012-05-03T17:18:14.870
> 
> 标签：oauth-2.0, wso2, wso2is

我们正在测试 WSO2 的身份服务器。功能列表显示它支持 OAuth 2，但我似乎无法在管理员中找到任何配置选项来确定 oAuth2 的使用。当我注册我的应用程序时，注册信息似乎表明它的 oAuth 1。任何人都可以确认版本 3.2.3 是否支持 oauth 2？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T06:17:27.443

否。当前版本不支持 OAuth 2。它将在下一个版本中推出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-19T06:19:14.667

我认为支持此 Oauth 2.0 的 WSO2 身份服务器版本 4.0.0。转到 IS 主页 -> 服务提供商 -> 入站身份验证配置 -> OAuth/OpenID 连接配置，然后单击配置。 [![在此处输入图像描述](../Images/0962da762324ab7e2cc5d757b6399b47.png)](https://i.stack.imgur.com/623vb.jpg)

请参阅此链接[oauth 2.0 和 WSO2 身份服务器](https://docs.wso2.com/display/IS510/OpenID+Connect+with+the+WSO2+Identity+Server+and+WSO2+OAuth2+Playground)以获取最新版本。

# .net - WCF 连接被错误中止/现有连接被远程主机强行关闭

> ID：10436297
> 
> 赞同：2
> 
> 时间：2012-05-03T17:18:17.323
> 
> 标签：.net, wcf, timeout, connection

我有一个使用 WCF 服务的 Windows 应用程序。它有一些 WCF 服务调用，并且`ClientBase.Close()`总是在之后调用方法。当我关闭应用程序时，我在 VS2010 中没有收到任何错误。我已经在调试器中打开了所有异常，并将我的编译器附加到我能做的所有事情上。我正在关闭所有连接，并且在我关闭我的应用程序时没有异步运行 WCF 服务调用。

但是我确实在 WCF 服务上遇到了异常！

> 套接字连接被中止。这可能是由于处理您的消息时出错或远程主机超出接收超时，或者是潜在的网络资源问题造成的。本地套接字超时是（这里有一些大数字）。

错误代码是`10054`

内部的例外是：

> 现有连接被远程主机强行关闭。

但是这怎么会发生在我的代码上呢？

我该怎么做才能找到这种错误行为的原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T17:51:58.477

在服务器上打开 WCF 跟踪，使用 WCF 跟踪查看器查看结果，确保应用程序池具有服务目录的权限...

```
<system.diagnostics>
<sources>
  <source name="System.ServiceModel" 
          switchValue="Verbose" 
          propagateActivity="true">
    <listeners>
      <add name="traceListener" 
           type="System.Diagnostics.XmlWriterTraceListener" 
           initializeData="Events.evt"  />
    </listeners>
  </source>
</sources>
<trace autoflush="true"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T17:42:21.077

增加`ChannelInitializationTimeout`

> 在初始读取期间等待连接发送前导的最长时间。此数据在身份验证发生之前被接收。

默认值为 5 秒。这是“远程主机强制关闭现有连接”的原因。例外。

# javascript - 使 Modernizr.load() 将脚本添加到页面末尾

> ID：10436310
> 
> 赞同：2
> 
> 时间：2012-05-03T17:19:07.787
> 
> 标签：javascript, modernizr, yepnope, polyfills

我正在使用 Modernizr 来检查功能，即 csscolumns，并在此功能不可用时运行`Modernizr.load()`以使用[css3-multi-column.js polyfill 。](http://www.csscripting.com/css-multi-column/)这一切都很好，除了 Modernizr/yepnope 将脚本插入到 Modernizr 脚本元素之前以及我的样式表之前。因为`css3-multi-column.js`必须包含在所有样式表之后，如果 Modernizr 将脚本添加到页面末尾，我会更喜欢。那可能吗？

这是我的代码：

```
Modernizr.load({
    test: Modernizr.csscolumns,
    nope: 'http://host.org/js/libs/css3-multi-column.js';
}); 
```

如果可能的话，这就是我想用 Modernizr 完成的：

```
if (!Modernizr.csscolumns) {
    var script = document.createElement( 'script' );
    script.type = "text/javascript";
    script.src = 'http://host.org/js/libs/css3-multi-column.js';
    $('body').append(script);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T03:40:31.867

我只是偶然发现了同样的问题，并查看了*Modernizr* ( [yepnope.js](https://github.com/SlexAxton/yepnope.js/blob/master/yepnope.js) ) 代码，这绝对不可能在页面末尾添加脚本。

所以，不幸的是，你的解决方案是好的。

另一种可能的解决方案是将*Modernizr*放在页面底部（但 IE8 会中断，请参阅[此处](http://modernizr.com/docs/#installing)的底部注释）？

此外，就我而言，我所有的样式表都在*Modernizr*`css3-multi-column.js`插入的脚本之前，但它也不起作用。但是使用您的方法可以解决问题。使用您的方法，它在附加到. 所以问题不在于插入脚本的地方，而是其他地方？ *`HEAD`*

# asp.net - ASP.NET MVC 4 WebAPI (beta) - 如何更改最大响应缓冲区大小

> ID：10436316
> 
> 赞同：6
> 
> 时间：2012-05-03T17:19:29.127
> 
> 标签：asp.net, asp.net-web-api

在 ASP.NET MVC 4.0 WebAPI（测试版）中，我返回了一个序列化为大于 65kb 的 JSON 的对象。正如您从下面的堆栈跟踪中看到的那样，框架正在抛出异常，因为这超出了一些内部限制。

```
System.Net.Http.HttpRequestException: Cannot write more bytes to the buffer than the configured maximum buffer size: 65536.
   at System.Net.Http.HttpContent.LimitMemoryStream.CheckSize(Int32 countToAdd)
   at System.Net.Http.HttpContent.LimitMemoryStream.Write(Byte[] buffer, Int32 offset, Int32 count)
   at System.IO.StreamWriter.Flush(Boolean flushStream, Boolean flushEncoder)
   at System.IO.StreamWriter.Write(Char value)
   at Newtonsoft.Json.JsonWriter.AutoComplete(JsonToken tokenBeingWritten) in d:\Development\Releases\Json\Working\Src\Newtonsoft.Json\JsonWriter.cs:line 634
   at Newtonsoft.Json.JsonTextWriter.WritePropertyName(String name) in d:\Development\Releases\Json\Working\Src\Newtonsoft.Json\JsonTextWriter.cs:line 204
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.WriteMemberInfoProperty(JsonWriter writer, Object memberValue, JsonProperty property, JsonContract contract) in d:\Development\Releases\Json\Working\Src\Newtonsoft.Json\Serialization\JsonSerializerInternalWriter.cs:line 209
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContract collectionValueContract) in d:\Development\Releases\Json\Working\Src\Newtonsoft.Json\Serialization\JsonSerializerInternalWriter.cs:line 336
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.WriteMemberInfoProperty(JsonWriter writer, Object memberValue, JsonProperty property, JsonContract contract) in d:\Development\Releases\Json\Working\Src\Newtonsoft.Json\Serialization\JsonSerializerInternalWriter.cs:line 209
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContract collectionValueContract) in d:\Development\Releases\Json\Working\Src\Newtonsoft.Json\Serialization\JsonSerializerInternalWriter.cs:line 336
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeList(JsonWriter writer, IWrappedCollection values, JsonArrayContract contract, JsonProperty member, JsonContract collectionValueContract) in d:\Development\Releases\Json\Working\Src\Newtonsoft.Json\Serialization\JsonSerializerInternalWriter.cs:line 445
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.WriteMemberInfoProperty(JsonWriter writer, Object memberValue, JsonProperty property, JsonContract contract) in d:\Development\Releases\Json\Working\Src\Newtonsoft.Json\Serialization\JsonSerializerInternalWriter.cs:line 209
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContract collectionValueContract) in d:\Development\Releases\Json\Working\Src\Newtonsoft.Json\Serialization\JsonSerializerInternalWriter.cs:line 336
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.WriteMemberInfoProperty(JsonWriter writer, Object memberValue, JsonProperty property, JsonContract contract) in d:\Development\Releases\Json\Working\Src\Newtonsoft.Json\Serialization\JsonSerializerInternalWriter.cs:line 209
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContract collectionValueContract) in d:\Development\Releases\Json\Working\Src\Newtonsoft.Json\Serialization\JsonSerializerInternalWriter.cs:line 336
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeList(JsonWriter writer, IWrappedCollection values, JsonArrayContract contract, JsonProperty member, JsonContract collectionValueContract) in d:\Development\Releases\Json\Working\Src\Newtonsoft.Json\Serialization\JsonSerializerInternalWriter.cs:line 445
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.Serialize(JsonWriter jsonWriter, Object value) in d:\Development\Releases\Json\Working\Src\Newtonsoft.Json\Serialization\JsonSerializerInternalWriter.cs:line 59
   at xxx.Api.JsonNetFormatter.<>c__DisplayClass5.<OnWriteToStreamAsync>b__4() in c:\xxx\xxx\xxx.Api\JsonNetFormatter.cs:line 79
   at System.Threading.Tasks.Task.Execute() 
```

我找不到任何方法来更改此默认值。任何人都可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T19:07:21.317

根据夜间源代码构建发布的 System.Net.Http.dll，最大缓冲区大小的值在 HttpContent 中定义为：

```
internal const long MaxBufferSize = 0x7fffffffL; // 2147483647 
```

因此，如果您切换到新版本（而不是 beta 安装程序），问题应该会消失。

不管这个问题如何，我都建议切换，因为有**很多重大更改**，而且你现在正在构建的任何东西都*保证不能*与最终版本一起使用。

# sas - 不匹配的引号 SAS

> ID：10436320
> 
> 赞同：4
> 
> 时间：2012-05-03T17:19:41.557
> 
> 标签：sas

```
%macro name_modal();
/*Create macro variables which contain the modalities of variables*/
%do i=1 %to &num_Var;
    data _null_;
        set  &lib..Table_variable_modal_&i.;
        call symputx('num_Mod'||compress(put(&i,4.)),_N_,"G");
        call symputx('table'||compress(put(&i,4.))||'modal'||compress(put(_N_,4.)),compress(&&name_Var&i.),"G");
    run;

%end;

/*Display modalities by variable*/
%do i=1 %to &num_Var;
    %put &&name_Var&i. has &&num_Mod&i. modalities ;
    %do j=1 %to &&num_Mod&i.;
        %put %nrstr(&&tableb&i.modal&j.);
    %end;
%end;
%mend name_modal;
%name_modal(); 
```

我希望代码是自记录的。我将在这里解释问题。一切正常，直到我传递到用于按变量显示模态的程序的第二个。

例如，当宏变量中存储的模式名称为
$100% BLO、
100% COLOR、
AVON & RAGOBERT、
BALLANTINE'S、
L'OREAL、
AT&T、
UVA
等时，
我无法正确使用 %put。我尝试使用 %bquote 和 %nrstr，但问题仍然存在。到目前为止，我能看到的唯一解决方案是修改模式的名称，但由于名称来自客户，我无法对数据进行修改。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T20:20:40.373

尝试了几次后，我发现`%superq`可以解决这个问题。在宏中处理特殊字符很麻烦。本页[提供](http://www.okstate.edu/sas/v8/sashtml/macro/z1061345.htm)了一些关于宏引用的有用提示。

我将您的代码简化为以下

更新：使其成为双循环案例。

```
data test;
 input name ~ &  $15.;
 datalines;
 100% BLO
 100% COLOR
 AVON & RAGOBERT
 BALLANTINE'S
 L'OREAL
 AT&T
 U-V-A
 ;
run;

%macro name_modal();
/*Create macro variables which contain the modalities of variables*/
%do i=1 %to 4;
    data _null_;
     set  test;
     call symputx('num_Mod1',_N_,"G");
     call symputx('tableb'||compress(put(&i,4.))||'modal'||compress(put(_N_,4.)),name,"G");
    run;
%end;

   %do i=1 %to 4;
    %do j=1 %to 7;
        %put %superq(tableb&i.modal&j);
    %end;
   %end;
%mend name_modal;
%name_modal(); 
```

结果将正确显示。

请注意，它`%superq(tableb&i.modal&j)`不像接受没有额外＆符号的宏变量名称`%superq(&&tableb&i.modal&j)`。`superq`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T18:43:45.490

很难回答所有示例数据的问题，因为我无法重新创建您的代码（缺少全局宏）。

**[更新]**让宏解析包含需要屏蔽的字符更加困难。贴一些可以执行的代码，可以提供更多帮助。

[这](http://support.sas.com/documentation/cdl/en/mcrolref/61885/HTML/default/viewer.htm#a001061290.htm)是宏引用的一个很好的链接。

[这](http://www2.sas.com/proceedings/forum2007/152-2007.pdf)有一个非常好的图表，详细说明了在不同情况下使用哪些宏屏蔽功能。

即使字符串中包含 % 或 & ， %Str 也可以工作，只要它们后跟空格即可。%NRSTR 如果可以解释为宏变量或宏调用。您可以在单引号 (') 或单双引号 (") 前面加上百分号 (%)，或者使用 BQUOTE 或 NRBQUOTE（如果您的字符串包含 & 或 %）。

这是一个开始**[更新]**：

```
%Macro Test(var=);
 %Put &var;
%Mend test;

%Test(Var=%str($100% BLO)) ;

%Test(Var=%str(100% COLOR)) ;
%Test(Var=%nrstr(100 %COLOR)) ;

%Test(Var=%str(AVON & RAGOBERT)) ;
%Test(Var=%nrstr(AVON &RAGOBERT)) ;

%Test(Var=%str(BALLANTINE%'S)) ;
%Test(Var=%bquote(BALLANTINE'S)) ;

%Test(Var=%str(L%'OREAL)) ;
%Test(Var=%bquote(L'OREAL)) ;

%Test(Var=%nrstr(AT&T)) ;
%Test(Var=%str(U-V-A)) ; 
```

# php - 按字母排序文本文件条目

> ID：10436323
> 
> 赞同：0
> 
> 时间：2012-05-03T17:19:53.957
> 
> 标签：php

我是 PHP 新手，所以如果我的问题不清楚，我很抱歉。

我的目标是从一个简单的 HTML 表单中获取信息，该表单要求用户填写三个文本框，选择他们是用户 1 还是用户 2，然后上传文件。然后，我必须将信息存储在文本文件中，并在浏览器中直接在 HTML 表单下方显示该信息。信息必须按在第一个文本框中输入的任何内容的第一个字母按字母顺序排列。每个条目必须在自己的行上。

例如：

假设第 1 个人进入：Sally Mae Johnson 用户 1 Flowers.jpg 第 2 个人稍后出现并输入：George Michael Johnson 用户 2 books.jpg

现在它按输入的顺序显示如下： Sally Mae Johnson User 1 Flowers.jpg George Michael Johnson User 2 books.jpg

我需要它按名字的第一个字母按字母顺序显示，如下所示： George Michael Johnson user 2 books.jpg Sally Mae Johnson User 1 Flowers.jpg

这是我的代码：

```
$fone = @$_POST["one"];
$ftwo = @$_POST["two"];
$fthree = @$_POST["three"];
$fselect = @$_POST["select"];

if ($_FILES)
{
    $name = $_FILES['upload']['name'];
    (move_uploaded_file($_FILES['upload']['tmp_name'], "uploads/$name"));
}

//write to the file

$values = "$fone\t";
$values .= "$ftwo\t";
$values .= "$fthree\t";
$values .= "$fselect\t"; 
$values .= "<img src='uploads/$name' /><br />";

//open and write to the file

$fp = @fopen("store.txt", "a") or die("Couldn't open the file!");
$numBytes = @fwrite($fp, $values) or die ("Couldn't write values to file!");

@fclose($fp);

?>
<form action="test_it.php" enctype="multipart/form-data" method="post">
Box 1: <input type="text" name="one" size="15" /> 
Box 2: <input type="text" name="two" size="15" />
Box 3: <input type="text" name="three" size="15" />
Select One: <select name="select"><option value="empty">Please Select</option><option value="user1">User 1</option>
<option value="user2">User 2</option>
<p>Upload a File:</p>
<p><input type="file" name="upload" />
<input type="hidden" name="MAX_FILE_SIZE" value="30000" />
<input type="submit" name="submit" value="submit" />
<input type="hidden" name="submitted" value="submitted" />
</p>
</form>
<?php

print "<P>Here are the users:<br />";
$file = "store.txt";

if (file_exists($file))
{
    $file1 = fopen("store.txt" , "r");
        while (!feof($file1))
        {
            $display = fgets($file1, filesize("store.txt"));
            echo $display . "
            ";
            }
            fclose($file1);
            }
            else
            {
                echo "<P>Error occured! Please try again!</p>";
            } 
```

任何帮助是极大的赞赏！提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T18:08:07.440

```
$fone = @$_POST["one"];
$ftwo = @$_POST["two"];
$fthree = @$_POST["three"];
$fselect = @$_POST["select"];

if ($_FILES)
{
    $name = $_FILES['upload']['name'];
    (move_uploaded_file($_FILES['upload']['tmp_name'], "uploads/$name"));
}

// sort the entries 
$entries = array($fone, $ftwo, $fthree, $fselect);
sort($entries);

$values = implode("\t", $entries)."\t";
$values .= "<img src='uploads/$name' /><br />";

//open and write to the file

$fp = @fopen("store.txt", "a") or die("Couldn't open the file!");
$numBytes = @fwrite($fp, $values) or die ("Couldn't write values to file!");

@fclose($fp); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T17:37:04.360

尝试先创建一个数组。

```
$valuesArray = array();
$valuesArray[] = $fone;
    ... etc. 
```

然后，

```
$valuesArray = sort($valuesArray); 
```

最后，准备正文：

```
$values = $valuesArray[0] . "\t";
    ... etc. 
```

并写入文件。

```
$numBytes = @fwrite($fp, $values) or die ("Couldn't write values to file!"); 
```

# php - 如何通过用户名和密码访问安全区域

> ID：10436325
> 
> 赞同：0
> 
> 时间：2012-05-03T17:20:02.753
> 
> 标签：php, http

我想访问此页面，该页面在输入正确的用户名和密码后返回一个 xml 文件 [http://webservices.ns.nl/ns-api-avt?station=ut](http://webservices.ns.nl/ns-api-avt?station=ut) 我想将此 xml 传递给 flash 但我没有知道如何传递用户名和密码我期待这样的用户名：password@webservices.ns.nl/ns-api-avt?station=ut 或在此处使用 php，如果它有助于[http： //www.ns.nl/api/api](http://www.ns.nl/api/api)

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T08:44:55.687

php.net 上带有 curl 的 PHP 示例：[http](http://www.php.net/manual/en/function.curl-setopt.php#98164) ://www.php.net/manual/en/function.curl-setopt.php#98164 有趣的部分是：

```
curl_setopt($curl, CURLOPT_USERPWD, "username:password"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T08:56:56.290

您可以在 php 中以多种方式执行此操作。

如果您碰巧将代码托管在 linux 环境中或具有本机 curl 支持，您可以

```
$call = "curl --basic --user {$username}:{$password} \"{$url}\"";
exec($call, $resp);
print_r($resp); 
```

或者您可以使用`class.http.php`HTTP[库中的模块](https://web.archive.org/web/20120702153036/http://www.phpfour.com:80/lib/http/)

```
$http = new Http();
$http->useCurl(false);
$http->setMethod($method);
$http->setAuth($user, $pass);
$http->execute($url);
$resp = $http->error ? $http->error : $http->result; 
```

# php - 如何根据php中的条件复选框回显隐藏的表单字段？

> ID：10436328
> 
> 赞同：2
> 
> 时间：2012-05-03T17:20:17.777
> 
> 标签：php, forms, field, hidden, checkbox

我希望表单根据选中的复选框来回显隐藏的表单字段，注意我需要在按下提交按钮之前回显隐藏的表单字段，因为它将发送到贝宝。这是我到目前为止所拥有的 -

```
<?php       
echo ('<form action="https://www.paypal.com/cgi-bin/webscr" method="post">');
echo ('<input type="hidden" name="cmd" value="_cart">');
echo ('<input type="hidden" name="upload" value="1">');
echo ('<input type="hidden" name="business" value="youremail@mail.com">');
echo ('<input type="hidden" name="currency_code" value="US">'); 
echo ('<input type="checkbox" name="camp1" value="a">');
echo ('<input type="checkbox" name="camp2" value="b">');    

if (isset($_POST['camp1'])) {

echo ("<input type='hidden' name='item_name_1' value='beach ball'>");
("<input type='hidden' name='amount_1' value=50'>");
}
if (isset($_POST['camp2'])) {

echo ("<input type='hidden' name='item_name_2' value='towel'>");
("<input type='hidden' name='amount_2' value='20'>");
}
echo ("<input type='submit' value='PayPal'>");
("</form>");
?> 
```

我也试过更换

```
if (isset($_POST['camp1'])) { 
```

有类似的东西

```
if(IsChecked('camp1','a')) { 
```

没有运气。

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T17:23:42.397

如果您没有提交表单，则不会执行`POST`or`GET`方法，并且您在 if 语句中调用来自 POST 的变量`$_POST['camp1']`，您将永远不会获得该值。解决此问题的替代方法是使用 JS 或 jQuery，例如：

**您修改后的 PHP：**

```
<html>
<head>
<title>Paying process</title>
</head>
<script scr="jquery-1.7.2.js" type="text/javascript" />
<script scr="functions.js" type="text/javascript" />
<body>
<?php       
echo ('<form id="payForm" action="https://www.paypal.com/cgi-bin/webscr" method="post">');
echo ('<input type="hidden" name="cmd" value="_cart">');
echo ('<input type="hidden" name="upload" value="1">');
echo ('<input type="hidden" name="business" value="youremail@mail.com">');
echo ('<input type="hidden" name="currency_code" value="US">'); 
echo ('<input type="checkbox" name="camp1" value="a">');
echo ('<input type="checkbox" name="camp2" value="b">');    
echo ('<div id="productInfo" style="display:none;"></div>');
echo ("<input type='submit' value='PayPal'>");
echo ("</form>");
?>
</body>
</html> 
```

**函数.js 文件：**

```
$(document).ready(function(){

    $("#payForm").submit(function(e){
       if($('#productInfo').html() == ''){
           //if there is no product in the hidden div, prevent the submit and show msg.
           alert('Please select at least one product');
           e.preventDefault();
       }
    });

    // event when user clicks a checkbox
    $("input[type='checkbox']").on('click', function(){
       var checked = $(this).attr('checked');
       if(checked){
          var value = $(this).val();
          $.post('product.php', { value:value }, function(data){
              // data = 0 - means that there was an error or no product
              if(data != 0){
                 // At this point you will have your "a" or "b" products in hidden
                 // Also submit button will appear
                 // This means that everything was Ok and the user selected a product
                 $('#productInfo').append(data);
              } else {
                 // data = 0
                 alert('Please try again.');
              }
          });
       }
    });

}); 
```

**product.php 文件**（在 jQuery 帖子中使用）：

```
 <?php
    if ($_POST && isset($_POST['value'])) {

        // db connection
        $link = mysql_connect('localhost', 'mysql_user', 'mysql_password');
        if (!$link) {
           // error happened
           print(0);
        }
        mysql_select_db('mydb');

        // sanitize the value
        $value = mysql_real_escape_string($_POST['value']);

        // start the query - I am assuming one :-)
        $sql = "SELECT * FROM products WHERE Id = '$value'";
        $result = mysql_query($sql, $link);

        // check if the product exists
        if(mysql_num_rows($result) > 0){                                                 
          while($row = mysql_fetch_array($result)){
            if($value == 'a'){
               echo ("<input type='hidden' name='item_name_1' value='".$row['product_name']."' />");
               echo ("<input type='hidden' name='amount_1' value='".$row['product_price']."'>");    
            } else {
               echo ("<input type='hidden' name='item_name_2' value='".$row['product_name']."' />");
               echo ("<input type='hidden' name='amount_2' value='".$row['product_price']."'>");    
            }                               
          }
        } else {
          // no product found
          print(0);                                       
        }
  ?> 
```

现在，只有当用户至少选择一种产品时，您才能提交隐藏值、项目 1 或 2 或两者。

希望这可以帮助 ：-）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T17:27:13.893

听起来您正试图让 PHP 执行客户端行为，这是不可能的。当用户第一次请求页面时，PHP 会呈现页面一次，之后不会执行任何操作，直到他们提交表单或加载另一个页面（或者直到发生其他一些通信，如果您使用的是 ajax 或 jquery）。如果您希望页面内容响应单击复选框而更改，则需要合并一些 javascript。

# javascript - 调用另一个函数时函数不停止

> ID：10436330
> 
> 赞同：0
> 
> 时间：2012-05-03T17:20:21.983
> 
> 标签：javascript, jquery, html, animation

我在一件简单的事情上遇到了麻烦。

我有一个 div，当点击时，一个胺化开始（一个无限循环的图像变化，模拟动画 gif）。

但是，当我点击另一个 div 时，第一个 div 需要停止，然后只开始另一个动画，这会继续到每个动画（总共 8 个）。

这是一个图像循环的代码：

```
var t1;
var t2;
var anim1 = new Array ('img/testes2/anim1_1.png','img/testes2/anim1_2.png');
var anim2 = new Array ('img/testes2/anim2_1.png','img/testes2/anim2_2.png');

var index = 1;

var verifica1 = 0;
var verifica2 = 0;

function rotateImage1(){
$('#imagemPrinc').fadeOut(0, function(){
    $(this).attr('src', anim1[index]);
    $(this).fadeIn(0, function(){
        if (index == anim1.length-1){
            index = 0;
        }
        else{
            index++;
        }
    });
});
return false;
}

function stopTimer1(){
if(verifica1 = 1){
    clearInterval(t2);
}
}

function muda1(){
if (verifica1 = 1){
    //stopTimer2();
    //$('#bgImagem').css({'background-image':'url(img/testes2/anim1_1.png)'});
    t1 = setInterval(rotateImage1,500);
}
} 
```

第二个动画的功能相同。verifica var 和 stopTimer 函数，我试图停下来，而其他播放，但似乎没有工作。这就是为什么它对代码进行了注释。

查看运行的代码会更容易，所以就这样[---这里---](http://efdutra.com/abril/vocesa/mai2012/) 可点击的 div 是那两个红色方块。

有人可以帮助我吗！？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T17:22:57.797

clearTimeout 将 setInterval 函数（此处为 t1）返回的计时器 ID 作为参数。

而不是使用持续时间为 0 的淡出和淡入，您应该简单地使用隐藏和显示。

顺便说一句，您可以简化此块：

```
 if (index == anim1.length-1){
        index = 0;
    }
    else{
        index++;
    } 
```

在

```
 index = [(index+1)%anim1.length]; 
```

这是非常错误的：

```
if(verifica1 = 1){ 
```

这不是一个测试：它总是改变 verifica1 并且总是正确的。你可能想要==。

您的代码中是否存在您（自愿）设置 verifica1 的地方？

# html - 使用 powershell 单击网页上的链接，然后传递凭据

> ID：10436332
> 
> 赞同：4
> 
> 时间：2012-05-03T17:20:30.467
> 
> 标签：html, powershell, automated-tests

我正在尝试测试我们构建的具有临时 ssl 证书的网页，问题是当我转到该页面时，我收到 IE 安全警告，表明 ssl 证书无效，有两个链接一个用于关闭页面，并且另一个进入页面。我可以使用powershell打开IE并单击ssl警告页面上的链接，但现在我需要填充用户名和密码输入框，然后单击登录按钮。

```
$url = "res://ieframe.dll/invalidcert.htm?SSLError=50331648#https://10.2.2.1:8050/showme.do"
$ie = New-Object -comobject InternetExplorer.Application 
$ie.visible = $true 
$ie.silent = $true 
$ie.Navigate( $url )
while( $ie.busy){Start-Sleep 1} 
$secLink = $ie.Document.getElementsByTagName('A') | Where-Object {$_.innerText -   eq 'Continue to this website (not recommended).'} 
$secLink.click() 
$ie.Document.getElementsByType("input") | where { $.Name -eq "j_username" }.value = "user"
$ie.Document.getElementsByName("input") | where { $.Name -eq "j_password" }.value = "password"
$loginBtn = $ie.Document.getElementsById('input') | Where-Object {$_.Type -eq 'button' -and $_.Value -eq 'LoginButton'} 
$loginBtn.click() 
```

所以现在页面打开了，但是输入字段没有被填充或按钮被点击，我需要某种循环或 while 语句吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T07:41:46.713

当您单击链接时，您需要等到页面完成加载。

```
$url = "res://ieframe.dll/invalidcert.htm?SSLError=50331648#https://10.2.2.1:8050/showme.do"
$ie = New-Object -comobject InternetExplorer.Application 
$ie.visible = $true 
$ie.silent = $true 
$ie.Navigate( $url )
while( $ie.busy){Start-Sleep 1} 
$secLink = $ie.Document.getElementsByTagName('A') | Where-Object {$_.innerText -   eq 'Continue to this website (not recommended).'} 
$secLink.click() 
while( $ie.busy){Start-Sleep 1}
$ie.Document.getElementsByType("input") | where { $.Name -eq "j_username" }.value = "user"
$ie.Document.getElementsByName("input") | where { $.Name -eq "j_password" }.value = "password"
$loginBtn = $ie.Document.getElementsById('input') | Where-Object {$_.Type -eq 'button' -and $_.Value -eq 'LoginButton'} 
$loginBtn.click() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T14:46:45.990

```
Write-Output "- Kill all IE windows"
get-process iexplore | stop-process -Force
Start-Sleep -s 1 
```

为给定 url 打开 IE 并从加密文件中检索密码的函数

```
function OpenIE([string]$url, [string]$p)
{ 
```

使用给定的 url 打开 Internet Explorer

```
$wshell = New-Object -com WScript.Shell
$wshell.Run("iexplore.exe $url")
Start-Sleep 1 
```

将用户凭据发送到 IE

```
$wshell.sendkeys("+{TAB}")
$wshell.sendkeys("username")
$wshell.sendkeys("{TAB}")
$wshell.sendkeys($p)
$wshell.sendkeys("{ENTER}")
}

$credentialsfile = "C:\temp\credfile.txt" 
```

检查凭证文件是否存在

```
if (Test-Path $credentialsfile)
{ 
```

从加密文件中检索凭据

```
$encp = get-content $credentialsfile | convertto-securestring 
$ptr = [System.Runtime.InteropServices.Marshal]::SecureStringToCoTaskMemUnicode($encp) 
$p = [System.Runtime.InteropServices.Marshal]::PtrToStringUni($ptr) 
remove-variable encp,ptr 
}else{ 
```

请求凭据并保存到加密文件

```
$creds = Get-Credential –credential DOMAIN\user
$encp = $creds.password 
$encp |ConvertFrom-SecureString |Set-Content $credentialsfile
}

Write-Output "- open IE"
OpenIE "http://www.yoururlhere.com" $p 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T17:54:45.430

您可能会发现在 codeplex 上使用（免费）PowerShell 的 Windows 自动化模块之类的东西要容易得多：

> WASP 是用于 Windows 自动化任务的 PowerShell 管理单元，例如选择窗口和控件以及发送鼠标和键盘事件。我们有自动化 cmdlet，例如 Select-Window、Select-Control、Send-Keys、Send-Click、Get-WindowPosition、Set-WindowPosition、Set-WindowActive、Remove-Window ... 等。
> 
> 我们的目标是使您能够从 PowerShell 内部完成大多数 Windows GUI 自动化脚本，而无需求助于专门的（且昂贵的）脚本工具。

[http://wasp.codeplex.com/](http://wasp.codeplex.com/)

# c# - 我想注销时登录状态不起作用..它仍然注销

> ID：10436336
> 
> 赞同：0
> 
> 时间：2012-05-03T17:20:59.713
> 
> 标签：c#, asp.net-mvc

> **可能重复：**
> [登录状态不工作，而我想注销仍然注销](https://stackoverflow.com/questions/10417080/loginstatus-not-working-while-i-want-to-logout-in-remains-logout)

```
I am studding a tutorial on asp.net mvc which name is MvcMusicStore. I am creating MvcBookStore For login and logout i use the facility of ASP.net configuration. I am successful in login but unsuccessful in logout using loginstatus from toolbox. 
```

在这里，我给出了一些与登录和注销相关的代码：

在我的控制器文件夹中，我创建了 StoreManagerController.cs，我在命名空间 MvcBookStore.Controllers 内使用 [Authorize(Roles = "Administrator")]。格式如下：

```
namespace MvcBookStore.Controllers
{
[Authorize(Roles = "Administrator")]
public class StoreManagerController : Controller
  {
       // code goes here...
  }  
} 
```

现在在模型文件夹中，我创建了 AccountModel.cs 文件，下面我给出了必要的代码：

```
namespace MvcBookStore.Models
{
    #region Services
public interface IFormsAuthenticationService
{
    void SignIn(string userName, bool createPersistentCookie);
    void SignOut();
}

public class FormsAuthenticationService : IFormsAuthenticationService
{
    public void SignIn(string userName, bool createPersistentCookie)
    {
        ValidationUtil.ValidateRequiredStringValue(userName, "userName");

        FormsAuthentication.SetAuthCookie(userName, createPersistentCookie);
    }

    public void SignOut()
    {
        FormsAuthentication.SignOut();
    }
} 
```

上面的代码是在创建 asp.net mvc 网站时自动添加的。我没有改变任何东西。我想在 Visual Studio 2010 上使用 LoginStatus 工具。因为它会自动找到注销 url。这就是为什么我将它添加到我的 View/StoreManager/Index.aspx 中的一个位置。代码如下：

```
 <%@ Page Title="" Language="C#"  AutoEventWireup ="true" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage<IEnumerable<MvcBookStore.Models.Album>>" %>
<script runat="server">
protected void LoginStatus1_LoggingOut(object sender, LoginCancelEventArgs e)
    {
       FormsAuthentication.SignOut();
       Response.Redirect("/View/Home/Index.aspx");    
    }
</script>
<asp:Content ID="Content1" ContentPlaceHolderID="TitleContent" runat="server">
    Index
</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">

    <form id="form1" runat="server">

    <h2>Index&nbsp;
        <asp:LoginStatus ID="LoginStatus1" runat="server" 
            onloggingout="LoginStatus1_LoggingOut" 
            LogoutAction="Redirect" />
    </h2>

    <table>
        <tr>
            <th></th>
            <th>Title</th>
            <th>Artist</th>
            <th>Genre</th>
        </tr>

    <% foreach (var item in Model) { %>
        <tr>
            <td>
                <%: Html.ActionLink("Edit", "Edit", new { id=item.AlbumId }) %> |
                <%: Html.ActionLink("Delete", "Delete", new { id=item.AlbumId })%>
            </td>
            <td><%: Html.Truncate(item.Title, 25) %></td>
            <td><%: Html.Truncate(item.Artist.Name, 25) %></td>
            <td><%: item.Genre.Name %></td>
        </tr>

    <% } %>

    </table>

    <p>
        <%: Html.ActionLink("Create New", "Create") %>

    </p>
    <p>
          <a href="/Control/ordercontrol.aspx" > control order</a>

    </p>

    </form>

</asp:Content> 
```

一切都很好，但是当我单击注销链接时，它什么也不做，只是刷新自己。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T17:22:47.047

您正在尝试将 ASP.Net WebForms 服务器控件与 MVC 混合。
不要那样做；它行不通。

相反，使用 MVC 操作和逻辑。

# django - 配置不当：django-multilingual-ng

> ID：10436337
> 
> 赞同：1
> 
> 时间：2012-05-03T17:21:00.927
> 
> 标签：django, plugins, settings, multilingual

我想在 django 1.4 和 postgresql 8.4 上使用 django-multilingual-ng，在 debian 挤压上但是当激活这个插件时：

```
File "/usr/local/lib/python2.6/dist-packages/django_multilingual_ng-0.1.45-py2.6.egg
/multilingual/settings.py", line 29, 
in <module> "Only found: %s" % (mcp, found) 
django.core.exceptions.ImproperlyConfigured: django-multilingual-ng 
requires the 'multilingual.context_processors.multilingual' context processor. 
Only found:  django.contrib.auth.context_processors.auth,
django.core.context_processors.debug,django.core.context_proc
essors.i18n,
django.core.context_processors.media,django.core.context_processors.static,
django.core.context_processors.tz,django.contrib.messages.context_processors.messages 
```

我不明白，我已经安装了 django-multilingual-ng，配置了 settings.py，但是他提出了这个异常。

你有想法吗 ？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T03:13:45.910

添加`multilingual.context_processors.multilingual`到 settings.TEMPLATE_CONTEXT_PROCESSORS

# 3d - 如何从 .mb 文件创建 3D 网格？

> ID：10436338
> 
> 赞同：-1
> 
> 时间：2012-05-03T17:21:04.193
> 
> 标签：3d, maya

我从 Internet 下载了一个 3D 模型，我想从中创建一个 3D 网格用于学校项目。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T09:04:25.540

.mb 或 Maya 二进制文件是 Autodesk 专有的。有一个名为[cgkit](http://cgkit.sourceforge.net/)的 python 库，它实现了简单的 Maya 二进制结构阅读器，不幸的是它不了解数据本身的任何特殊之处，因为它可能会被 Autodesk 任意更改。但可以节省您自己分块文件的工作。

然而，Cgkit 确实对 Maya ASCII 文件以及其他一些文件有更高的理解。因此，到目前为止，最简单的方法是将 .mb 文件发送给使用 Maya 的人，然后让他们将其转换为 Maya ASCII (.ma)。如果文件不包含对任何外部插件的引用，这基本上是一个读入写出操作。但是，如果 .mb 文件包含需要某些特定插件的数据，则完全有可能（但不太可能）只有原始作者才能使用检索数据。

# python - 在sqlalchemy中强制使用多对多关系进行内部连接

> ID：10436340
> 
> 赞同：2
> 
> 时间：2012-05-03T17:21:12.393
> 
> 标签：python, mysql, sqlalchemy

我正在使用 declarative_base() 并试图弄清楚在使用多对多关系时如何强制执行惰性内部连接。

我在 MySQL 和 InnoDB 中有定义了外键约束的表。

```
users: userid, name
permissions: permissionid, name
users_permissions: userid, permissionid
```

我`metadata.reflect()`用来加载我的数据库。

```
 class User_Perm(Base):
    __table__ = Base.metadata.tables['users_permissions']

class User(Base):
    __table__ = Base.metadata.tables['users']

    permissions = orm.relationship('Permission',
            secondary=User_Perm.__table__,
            order_by='Perm.name',
            innerjoin=True,
            lazy=True,
            )

class Permission(Base):
    __table__ = Base.metadata.tables['permissions'] 
```

每当我选择

```
u = Session().query(User).filter(User.name == 'myuser').first()
u.permissions
```

MySQL服务器收到的查询是：

```
SELECT permissions.permissionid AS permissions_permissionid,
     permissions.name AS permissions_name
FROM permissions, users_permissions 
WHERE ? = users_permissions.userid
    AND permissions.permissionid = users_permissions.permissionid
ORDER BY permissions.name
```

正如我们所见，这`FROM permissions, users_permissions`不是内部连接。我可以在不需要使用的情况下强制执行此`lazy=False`操作吗，因为如果这样做，级联效果将是加载太多信息，因为`permissions`这些信息也与另一个表有关系（示例中未提及）并且`users`也与其他表相关（同样，不是例子中提到）。我想为我所有的班级使用相同的模板来建立关系。

编辑：*上下文*我正在尝试复制所有 SQL 查询以匹配当前系统中的查询。我正在尝试从迁移`oursql`到`sqlalchemy orm`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T19:31:56.913

MySQL*正在进行*内部连接；也就是说，您显示的查询是内连接的一种实现。

从[文档](http://docs.sqlalchemy.org/en/latest/orm/relationships.html)：

> innerjoin=False – 当为 True 时，加入的渴望加载将使用内部联接而不是外部联接来联接相关表。此选项的目的严格来说是性能之一，因为内连接通常比外连接执行得更好。当关系使用不可为空的本地外键通过多对一引用对象时，或者当引用是一对一的或保证具有一个或至少一个的集合时，可以将此标志设置为 True一个条目。

关键点是[内部联接与外部联接](https://stackoverflow.com/questions/38549/sql-difference-between-inner-and-outer-join)。语法无关紧要。

请注意，您的查询可以使用`inner join`具有完全相同含义的句法形式转换为查询：

```
SELECT permissions.permissionid AS permissions_permissionid,
     permissions.name AS permissions_name
FROM permissions
INNER JOIN users_permissions 
    ON permissions.permissionid = users_permissions.permissionid
WHERE ? = users_permissions.userid
ORDER BY permissions.name 
```

MySQL 通常会为这两种形式生成相同的执行计划。

# .htaccess - .htaccess RewriteRule 以获得漂亮的链接

> ID：10436344
> 
> 赞同：1
> 
> 时间：2012-05-03T17:21:43.120
> 
> 标签：.htaccess, mod-rewrite

我有如下网址：

```
1) http://www.example.com/?page=2
2) http://www.example.com/my-photos-folder?page=3 
```

这里的页码将按顺序增加（page=1，page=2，page=3 .....）。

“my-photos-folder”可以是“my-images-folder”或“Nice-photos”等。

我想得到什么：

```
1) http://www.example.com/page/2
2) http://www.example.com/my-photos-folder/page/3 
```

我的 .htaccess 有以下规则：

```
<IfModule mod_rewrite.c>
Options +FollowSymLinks
RewriteEngine On
RewriteBase /
RewriteRule ^page\/(.*)$ index.php?page=$1 [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?kohana_uri=$1 [QSA,PT,L]
RewriteRule ^$ index.php?kohana_uri=$1 [QSA,PT,L]
RewriteRule ^index.php/(.*) $1 [QSA,R,L]
</IfModule> 
```

任何专家都可以建议我需要添加哪些规则才能实现我想要的结果。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T17:34:13.153

在该行之后添加这些`RewriteEngine On`行：

```
RewriteRule ^page\/(.*)$ index.php?page=$1 [L]
RewriteRule ^(.*)\/page\/(.*)$ $1?page=$2 [L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T04:47:26.680

@develroot

```
RewriteRule ^page\/(.*)$ index.php?page=$1 [L]  //This is working fine for homepage
RewriteRule ^(.*)\/page\/(.*)$ $1?page=$2 [L]   //this rule still not working on directory level. 
```

第二个还是有问题。请考虑已经存在的规则。[我已经更新了问题-添加了您的第一条规则，它可以正常工作。]

# php - 记住表单字段值

> ID：10436349
> 
> 赞同：1
> 
> 时间：2012-05-03T17:22:14.520
> 
> 标签：php, html, forms, cookies

谁能帮我编辑此页面以记住表单值？我想我需要使用cookies？我已经在很多地方搜索过这个问题，但是因为我已经有了改变页面某些方面的脚本，所以我很难解决这个问题。

```
<html>
<head>
<title>Laterooms App</title>
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width; initial-scale = 1.0; maximum-scale=1.0; user-scalable=no" />
<style type="text/css">
*{margin:2;padding:0}
html, body {width:320;overflow:hidden}
</style>
</head>
<body>
<SCRIPT LANGUAGE="JavaScript">
<!-- Begin
function submitForm(s) {
s.value = " Loading... ";
return true;
}
// End -->
</script>
<script type="text/javascript">
function changeImg(img, newimg) {
img.src = newimg;
}
</script>

<center>
<form name=myform onSubmit="return submitForm(this.submitbutton)">
<img src="laterooms.jpg"><br><br>
<input type=text value="Destination" name=title onclick="this.value = '';">
<br>Date:<br>
<select name="month">
    <option value="1">January
    <option value="2">February
    <option value="3">March
    <option value="4">April
    <option value="5">May
    <option value="6">June
    <option value="7">July
    <option value="8">August
    <option value="9">September
    <option value="10">October
    <option value="11">November
    <option value="12">December
</select>
<select name="day">
    <option value="1">1
    <option value="2">2
    <option value="3">3
    <option value="4">4
    <option value="5">5
    <option value="6">6
    <option value="7">7
    <option value="8">8
    <option value="9">9
    <option value="10">10
    <option value="11">11
    <option value="12">12
    <option value="13">13
    <option value="14">14
    <option value="15">15
    <option value="16">16
    <option value="17">17
    <option value="18">18
    <option value="19">19
    <option value="20">20
    <option value="21">21
    <option value="22">22
    <option value="23">23
    <option value="24">24
    <option value="25">25
    <option value="26">26
    <option value="27">27
    <option value="28">28
    <option value="29">29
    <option value="30">30
    <option value="31">31
</select>
<select name="year">
    <option value="2012">2012
    <option value="2013">2013
    <option value="2014">2014
</select>
<br><br>
No. of Nights:
<select name="nights">
    <option value="1">1
    <option value="2">2
    <option value="3">3
    <option value="4">4
    <option value="5">5
    <option value="6">6
    <option value="7">7
    <option value="8">8
    <option value="9">9
    <option value="10">10
    <option value="11">11
    <option value="12">12
    <option value="13">13
    <option value="14">14
    <option value="15">15
    <option value="16">16
    <option value="17">17
    <option value="18">18
</select>
<input type=submit name=submitbutton value="Submit"><br>
Please be patient<br>while your results load.
<hr color="#401485">
<?php

$url = "http://xmlfeed.laterooms.com/index.aspx?aid=1000&rtype=4&kword=".$_GET['title']."&sdate=".$_GET['year']."-".$_GET['month']."-".$_GET['day']."&nights=".$_GET['nights']."&orderby=hoteldistance&sortorder=asc";

$xml = simplexml_load_file($url);

foreach($xml->hotel as $hotel)
{

echo "<p>";
echo "<img src=".$hotel->images." height=100 width=100><br/>";
echo "<strong>Hotel Name:</strong><br> ".$hotel->hotel_name."<br/>";
echo "<strong>Prices From:</strong> &pound;".$hotel->prices_from."<br/>";
echo "<a href=".$hotel->hotel_link."><img src=http://affiliates.laterooms.com/AffiliateImages/en/buttons/more_details1.gif onclick=this.src='loading.gif'></a><br/>";
echo "<strong>Miles from ".$_GET['title']."</strong> ".$hotel->hotel_distance."<br/>";
echo "</p><hr color=#401485>";

}
?>

</form> 
</center>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T09:17:12.400

当您在 PHP 中提交表单时，$_POST 超级变量将填充您表单的字段。

正如 Farhan 上面所说，您可以将`<?php echo $_POST['fieldname']; ?>`其放入您的 value 属性中。但是，这对您的下拉框没有帮助。我建议如下：

```
<input type="text" name="txtName" value="<?php echo (isset($_POST['txtName']) ? $_POST['txtName'] : ''); ?>"/> 
```

以上将完成您的输入字段，如果表单尚未提交，“echo (isset(...”位将阻止 PHP 标记错误。下一个块将覆盖您的下拉框。

```
<select name="ddlCountry"> 
  <option value="England" <?php echo (isset($_POST['ddlCountry']) && $_POST['ddlCountry'] == 'England' ? ' selected="selected" ' : '');?> >England</option>
  <option value="France" <?php echo (isset($_POST['ddlCountry']) && $_POST['ddlCountry'] == 'France' ? ' selected="selected" ' : '');?> >France</option>
</select> 
```

如果在发布表格时已回答相关选项，则上述块将在您的选项上放置一个选定的标记。我通常会在 PHP 中构建我的下拉菜单，在循环中回显每个选项，以减少所需的代码量，但您的方式也可以。

如果您需要帮助理解回声？'a' : 'b'; 方法看看[http://php.net/manual/en/function.echo.php](http://php.net/manual/en/function.echo.php)在第一个代码块的中途有一些例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T14:32:50.227

您可以通过将 post 值添加到 HTML 值来分配值，如下所示：

```
<input type=text value="Destination" name=title onclick="this.value = '';" value="<?php echo $_POST['title'] ?>"> 
```

您可以使用相应的输入名称为表单上的每个输入设置 value=""。当页面发布时，$_POST 数组包含您刚刚提交的值，因此您可以将其分配给正确的输入标签值。

希望能帮助您更好地理解表单内存在 PHP 中的工作原理。

# java - 写一个递归方法来比较两个字符串？

> ID：10436350
> 
> 赞同：-1
> 
> 时间：2012-05-03T17:22:25.833
> 
> 标签：java, sorting, recursion

> **可能的重复：**
> [使用递归比较字符串以确定哪个在字母顺序上排在第一位 Java](https://stackoverflow.com/questions/1726821/using-recursion-to-compare-strings-to-determine-which-comes-first-alphabetically)

我被困在这个递归问题上，按字母顺序对任何两个字符串进行排序。这是方法签名：

```
int compareTo(String s1, String s2) 
```

它产生：

`returnval <0`方法`s1 < s2`

`returnval ==0`方法 `s1 == s2`

`returnval >0`方法 `s1 > s2`

这是我的代码：

```
package bonushw;

public class Recursion {

  public void main (String[] args){
      Recursion recurse = new Recursion();
      System.out.println("value is: " + recurse.compareTo("bill","bill"));
    }  

  public int compareTo (String s1, String s2) {

    if(s1.length() == 0){
      return 0;
    }
    else if (s1.charAt(0) < s2.charAt(0)){
      return -1;
    }
    else if (s1.charAt(0) > s2.charAt(0)) {
      return 1;
    }
    else {
      return compareTo(s1.substring(1), s2.substring(1));
    }
  } 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T17:30:17.867

```
if(s1.length() == 0){
      return 0;
    } 
```

这是不完整的，如果两者都为空怎么办，如果s2为空怎么办？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-03T17:53:01.093

尝试这个：

```
class Compare
{
    public static int compareTo(String s1, String s2)
    {
        int len = s1.length() < s2.length() ? s1.length() : s2.length();

        if (len == 0 && s1.length() > 0)
            return -1;
        else if (len == 0 && s2.length() > 0)
            return 1;

        for (int i = 0; i < len; ++i)
        {
            int v1 = s1.charAt(i);
            int v2 = s2.charAt(i);

            if (v1 == v2)
                return compareTo(s1.substring(1, s1.length()),
                                 s2.substring(1, s2.length()));
            else
                return v1 - v2;
        }

        return 0;
    }

    public static void main(String[] args)
    {
        System.out.println(compareTo("", ""));        //  0
        System.out.println(compareTo("a", "a"));      //  0
        System.out.println(compareTo("ab", "a"));     // -1
        System.out.println(compareTo("a", "ab"));     //  1
        System.out.println(compareTo("abc", "abc"));  //  0
    }
} 
```

# ms-access - 从访问表中获取随机数据

> ID：10436351
> 
> 赞同：-1
> 
> 时间：2012-05-03T17:22:27.760
> 
> 标签：ms-access

我有一个字段名称为“ID”的表正在访问。我想从此表中获取 3 个随机数据。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T17:25:19.320

[一分钟谷歌搜索](http://www.carlj.ca/2007/12/16/selecting-random-records-with-sql/)

```
SELECT TOP 3 ID
FROM Table
ORDER BY Rnd(Field1) 
```

# javascript - 我可以在不通过下拉菜单的情况下获得 jQuery 自动完成以匹配输入吗？

> ID：10436359
> 
> 赞同：1
> 
> 时间：2012-05-03T17:22:58.140
> 
> 标签：javascript, jquery

当我模糊出文本框或按 Enter 键时，我想让我的自动完成功能返回一个“隐藏”属性。数据格式为`{value: "Pal", pts: "30"}`。我想获得`pts`. 这是一个例子：

[http://jsfiddle.net/ctuAg/4/](http://jsfiddle.net/ctuAg/4/)

键入一两个字母并从下拉列表中选择一个名称会按预期更新“点”文本框（名称长度的 10 倍）。现在，我想知道是否有一种方法可以在完全输入名称然后按下 Enter 或模糊（选项卡或鼠标单击）时触发此点更新。也就是说，让自动完成搜索匹配文本框值和更新点。

就我所见，仅单击下拉列表中的名称会导致点被更新。

我做了一些搜索，发现最接近的函数/触发器是`search`. 我尝试将它放在模糊中，但 .pts 返回未定义。这可能是答案，在我的情况下我应该如何使用它？

```
 $("#autocomp").autocomplete({
      search: function(event, ui) {
        alert(ui.item.pts);
      }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T18:26:32.327

作为示例的基本扩展，您可以简单地检查按下时的值是否`#autocomp`在数组中：`enter`

```
$("#autocomp").keypress(function(event) {
  var keycode = (event.keyCode ? event.keyCode : event.which);
  if(keycode == '13') {
    $("#status").append("Enter pressed\n");

      /* NEW CODE HERE */
      // loop through the array and check the value against available names
      for ( var i = 0, l = names.length; i < l; i++) {
          // if the name matches, update #points
          if ($(this).val() === names[i].value) {
            $("#points").val(names[i].pts);
          }                      
      }              
      /* END NEW CODE */    

    $("#points").focus();
  }
}); 
```

尽管它可能不是最有效的方法，但它可以完成工作。在这里小提琴：http: [//jsfiddle.net/ctuAg/6/](http://jsfiddle.net/ctuAg/6/)

# websocket - 如何将 SockJS 与另一个 Web 框架集成

> ID：10436371
> 
> 赞同：7
> 
> 时间：2012-05-03T17:24:00.140
> 
> 标签：websocket, web2py, web-frameworks, server-push, reverse-ajax

作为 Socket.io 的替代品，还有 SockJS（[https://github.com/sockjs/sockjs-client](https://github.com/sockjs/sockjs-client)），它似乎比 Socket.io 维护得更好，更稳定。

这个问题是关于将 SockJS 与 Web 框架一起使用的架构的概念理解，例如，用于构建聊天应用程序

我目前的理解是，您需要 SockJS 客户端和 SocketJS 服务器（在我的情况下，我打算使用 SockJS-Tornado（[https://github.com/MrJoes/sockjs-tornado](https://github.com/MrJoes/sockjs-tornado)））才能制作 websockets-风格的沟通。

但是 SockJS（SockJS-client + SockJS-Tornado）如何与一个完成其余工作（例如，为页面提供服务，向/从 db 写入/读取等）的 web 框架结合在一起。例如，SockJS-Tornado 组件如何与框架的 Web 服务器通信？特别是，高度赞赏使用 web2py（python 网络框架）执行此操作的任何方向。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T10:50:04.533

你是对的，对于 SockJS，你需要一个支持 sockjs 的服务器和一个浏览器内的 JavaScript 客户端库。

一般有两种集成模式，假设你要使用 sockjs-tornado：

1.  您的所有网站都可能从 Tornado 获得服务。这样，将 sockjs-tornado 挂接到某个路径，例如“http://mysite.com/sockjs”。在这种情况下，您的网站和 sockjs 都将由 mysite.com 域提供。
2.  您可以将您的网站保留在它编写的任何语言/框架中，并将 sockjs-server 添加为另一个组件，在不同的域下，例如。'http://sockjs.mysite.com/sockjs'。

此外，您可以使用任何变体 - 例如：在内部拥有两台服务器，但通过使用智能负载均衡器（如 haproxy）将它们公开为一个域。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T00:09:57.470

如果您使用 web2py 作为框架，您可以在 gluon/contrib 中查看 comet_messaging.py。它提供了一个函数（comet_send），用于将消息从 web2py 应用程序发送到您的 websocket 客户端。它基于 tornado（不支持 SockJS），但 DistributeHandler 可以子类化 SockJS 连接以提供后备传输支持。在这种方法中，您的客户端通过典型的 GET 或 POST HTTP 请求发送消息，这些请求由 web2py 控制器（或其他框架）处理，并从调用 comet_messaging.comet_send() 的 web2py 控制器接收消息，后者向 tornado 实例发送 post 请求，然后爆炸它的听众名单。

comet_messaging 中修改后的行如下所示（Notice open 变为 on_open）：

```
class DistributeHandler(sockjs.tornado.SockJSConnection):
    def on_open(self, r):
    group,token,name = [None, None, None]
    self.group = group or 'default'
    self.token = token or 'none'
    self.name = name or 'anonymous' 
```

和

```
urls=[
    (r'/', PostHandler),
    (r'/token', TokenHandler),
    (r'/realtime', DistributeHandler)] 
```

请注意，我必须删除 DistributeHandler URLSpec 中的正则表达式组，因为 sockJS-tornado 被它阻塞了。仍在试图弄清楚如何从路径获取参数到 on_open 处理程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T08:53:16.503

这提供了有关如何将 SockJS 集成到 Django 中的完整答案：[https ://stackoverflow.com/a/10950702/675065](https://stackoverflow.com/a/10950702/675065)

基本上你需要：

*   Tornado + SockJS-Tornado
*   Redis + Brukva

我在自己的项目中使用了这个配置，效果很好。

或者：你试试高速公路的方式：[http](http://autobahn.ws/) ://autobahn.ws/ （我还没试过）

# sql - sqlite数据库设计

> ID：10436373
> 
> 赞同：1
> 
> 时间：2012-05-03T17:24:06.860
> 
> 标签：sql, sqlite

我有 3 张桌子

```
Table 1: PlantName (primary key)

Table 2: (primary key(Id + PlantName)), foreign key(PlantName) references Table1(PlantName)

Table 3: (primary key(Id + PlantName)), foreign key(id) references Table2(id)

When I insert data into these tables

Table1: Ark1
Ark2
Ark3

Table 2:
1,Ark1
2,Ark1
3, Ark1
1, Ark2
2, Ark2
1, B1
2, B2

Table 3:
1,Ark1
2,Ark2 
```

在表 3 中插入​​时，外键存在问题。

请建议

谢谢

太阳

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T17:28:43.813

表1中不存在B1和B2，导致外键违规。

# javascript - 将数据从 ASp.NET MVC 控制器传递到 JavaScript 函数

> ID：10436376
> 
> 赞同：4
> 
> 时间：2012-05-03T17:24:35.017
> 
> 标签：javascript, jquery, asp.net-mvc

我有一个从 WCF 服务获取坐标列表的 ASP.NET MVC3 应用程序。该服务返回一个带有一些属性（Xcoor 和 Ycoor）的列表。

```
 public List<Location> GetCoordinate()
        {
            sensor = new Location();

            List<Location> coordinateList = sensor.GetSensorInformation();

            return coordinateList;

        } 
```

在我的网页中，我有一个 JavaScript 函数，它接受 2 个参数并在页面上显示坐标（在地图上）

```
function GetLocation(y, x){
//my code here
} 
```

我想从我的控制器中获取坐标列表并将它们传递给该 JS 函数进行处理。

解决此问题的最佳方法是什么？

我尝试使用以下内容，但我不知道如何解析结果

```
 $.ajax({
            url: '@Url.Action("GetCoordinate")',
            type: 'GET',
             dataType: 'xml',
            success: function(result) {

            },
            error: function (xhr, ajaxOptions, thrownError){
                    alert(xhr.status);
                    alert(thrownError);}
        }); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-03T17:37:29.580

将您的控制器更改为以下内容：

```
public ActionResult GetCoordinate()
{
    sensor = new Location();

    List<Location> coordinateList = sensor.GetSensorInformation();

    return Json(coordinateList, JsonRequestBehavior.AllowGet);

 } 
```

现在您的控制器操作正在返回 jQuery 可以处理的 JSON。

更改您的 jQuery 方法来执行此操作：

```
$.ajax({
    url: '@Url.Action("GetCoordinate")',
    type: 'GET',
    dataType: 'json',
    success: function(data) {
        // process the data coming back
        $.each(data, function(index, item) {
            alert(item);
        });
    },
    error: function (xhr, ajaxOptions, thrownError) {
        alert(xhr.status);
        alert(thrownError);
    }
}); 
```

现在您的 AJAX 方法知道它正在处理 JSON 数据。您可以使用 jQuery each 方法对数据做一些事情（在这种情况下我只是在做一个警报）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T17:37:05.833

好吧，这里有很多东西。

在控制器上定义一个函数定义一个方法

公共 JsonResult GetCodinates() { }

在方法中使用您的 WCF 服务器并将结果转换为 JsonResult。

在你的 javascript

$.ajax({ url: '/controller/GetCoordinates', type: GET, dataType: 'json', success: function(data) { $.each(data, function (key, value) { //随便叫你什么正在这里将坐标放在地图上 } });

# database - 数据库设计：创建关联的关联

> ID：10436380
> 
> 赞同：1
> 
> 时间：2012-05-03T17:25:05.193
> 
> 标签：database, database-design, associations, model-associations

我有一个数据库设计问题，我不确定我应该使用哪种替代方案。

我有一个系统可以显示政治家在每个问题上的投票。用户可以登录并在每个问题上“支持”该政治家。我不确定这些协会应该如何运作。这是两个替代方案的图片：

[http://i1068.photobucket.com/albums/u447/dmoss18/ScreenShot2012-05-03at111656AM.png](http://i1068.photobucket.com/albums/u447/dmoss18/ScreenShot2012-05-03at111656AM.png)

选项 1：政治家在许多问题上拥有许多选票。用户支持每个政治家的投票。

选项 2：用户在某个问题上支持政治家（具有三个外键的关联表）。

选项2根本不可行吗？将三个表关联到一个实体中是不好的做法吗？哪个选项被认为是最佳实践？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T10:40:17.387

我更喜欢选项（1），因为它表明用户支持特定投票。在选项（2）中，用户似乎有可能（没有额外的限制）在某个政客根本没有投票过的情况下支持某个政客！（当然，如果这是一种可取的可能性，那么您必须选择选项（2））。

# php - 使用 preg_replace 修改 $pattern 以获得所需的结果

> ID：10436382
> 
> 赞同：1
> 
> 时间：2012-05-03T17:25:12.683
> 
> 标签：php, preg-replace

我有以下代码，我需要对其进行调整，以获得所需的**echo**。

```
<?php

$price = "A1,500.99B";

$pattern = '/([\d,]+\.)(\d+)(.*)$/';   // This is something that I need to change, in order to get the desired result

$formatted_1 = preg_replace($pattern, '$1', $price);
$formatted_2 = preg_replace($pattern, '$2', $price);
$formatted_3 = preg_replace($pattern, '$3', $price);
$formatted_4 = preg_replace($pattern, '$4', $price);

echo $formatted_1;   // Should give A
echo $formatted_2;   // Should give 1,500
echo $formatted_3;   // Should give 99
echo $formatted_4;   // Should give B

?> 
```

我知道我应该在**$pattern**内添加另一个**( )**，并调整上面的**$pattern**，但我不知道该怎么做。

 ****谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T17:41:52.980

如果您只想匹配，有什么特别的理由使用 preg_replace 吗？

此模式将匹配您的价格：

```
/([a-zA-Z])([\d,]+)\.(\d+)([a-zA-Z])/ 
```

如果你再写这个 PHP：

```
$price = "A1,500.99B";
//Match any letter followed by at least one decimal digit or comma 
//followed by a dot followed by a number of digits followed by a letter
$pattern = '/([a-zA-Z])([\d,]+)\.(\d+)([a-zA-Z])/';
preg_match($pattern,$price,$match);

$formatted_1 = $match[1];
//etc... 
```

您将有四场比赛。显然，您需要添加自己的异常处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T17:41:35.840

这是你要找的吗？

```
$pattern = '/([0-9a-zA-Z,]+\.)(\d+)(.*)$/'; 
```****

# javascript - 我应该如何获得相同颜色的相邻块？

> ID：10436389
> 
> 赞同：3
> 
> 时间：2012-05-03T17:25:38.823
> 
> 标签：javascript, jquery, algorithm

我正在尝试制作一个简单的颜色匹配游戏，我想找到一种方法来选择相同颜色的块组。

这是我正在研究的[小提琴，如果你运行它，你会发现当我尝试将鼠标悬停在游戏区域边缘的元素上时会出现问题，告诉我它正在尝试使用未定义的变量](http://jsfiddle.net/loupax/yHKkg/)

如果你在下面检查，`parse_quad_tree()`你会在函数中看到我处理未定义变量的情况，但由于它刹车，这意味着我在某个地方错了......

感谢您的时间

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T17:32:28.033

您的二维数组实际上是嵌套数组。您只需要检查可能超出范围的数组级别：

```
var n = !!grid[x][y-1]?grid[x][y-1]:false;
var s = !!grid[x][y+1]?grid[x][y+1]:false;
var e = !!grid[x-1]?grid[x-1][y]:false;   // Instead of !!grid[x-1][y]
var w = !!grid[x+1]?grid[x+1][y]:false;   // Instead of !!grid[x+1][y] 
```

换句话说，当您这样做时`array[x][y]`，javascript 首先检索`array[x]`，然后`[y]`在检索到的数组中查找索引。在您的情况下，第一次查找是未定义的（`grid[x-1]`），因此它无法查找`grid[x-1][y]`。当第一步未定义时，您正在检查最后一步的未定义。

演示：http: [//jsfiddle.net/jtbowden/qWktv/](http://jsfiddle.net/jtbowden/qWktv/)

此外，如果您`$(c).addClass('active')`在开头`parse_quad_tree`，您将能够突出显示单个块，并且您不必为每个邻居调用 `.addClass('active') 因为它会在递归开始时发生。

演示：http: [//jsfiddle.net/jtbowden/qWktv/1/](http://jsfiddle.net/jtbowden/qWktv/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T17:33:03.730

在调用子数组之前，您没有检查您的第一个数组 var 是否存在，更改，

```
var e = grid[x-1]&&!!grid[x-1][y]?grid[x-1][y]:false;
var w = grid[x+1]&&!!grid[x+1][y]?grid[x+1][y]:false; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T17:38:33.633

你需要检查你的界限

```
var n = !! (y > 0 && grid[x][y - 1]) ? grid[x][y - 1] : false;
var s = !! (y < grid[x].length-1 && grid[x][y + 1]) ? grid[x][y + 1] : false;
var e = !! (x > 0 && grid[x - 1][y]) ? grid[x - 1][y] : false;
var w = !! (x < grid.length-1 && grid[x + 1][y]) ? grid[x + 1][y] : false; 
```

演示在[http://jsfiddle.net/gaby/yHKkg/64/](http://jsfiddle.net/gaby/yHKkg/64/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T17:30:31.517

而不是使用`var colors = ['red', 'green', 'blue'];`你的颜色使用三个不同的 css 类和一个颜色集。这样，当您需要选择所有这些时，它就像`$(".blue")`.

# python - remote_api 是为远程数据存储执行一次性脚本的唯一方法吗？

> ID：10436390
> 
> 赞同：0
> 
> 时间：2012-05-03T17:25:49.243
> 
> 标签：python, google-app-engine

我需要运行 Python 脚本以在远程数据存储中重新保存一些实体，以便它们丢失属性。启用[remote_api](https://developers.google.com/appengine/articles/remote_api)是唯一的方法，还是我可以在远程管理控制台中启用某些功能以允许我从 Web 界面运行 Python 脚本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T18:12:57.380

对于我的所有应用程序，我默认启用开发者控制台：

```
- url: /devcon/.*
  script: $PYTHON_LIB/google/appengine/ext/admin
  login: admin 
```

对于 Python 2.7，它是：

```
- url: /devcon/.*
  script: google.appengine.ext.admin.application
  login: admin 
```

这包括交互式控制台，我发现它非常适合破解需要在实际环境中执行某些操作的一次性脚本。

# c++ - Visual Studio 报告的堆错误，但仅在调试模式下

> ID：10436391
> 
> 赞同：2
> 
> 时间：2012-05-03T17:25:51.417
> 
> 标签：c++, visual-studio, visual-studio-2010

我正在开发一个使用多个库（SDL、Boost、Chipmunk、Lua、Glew）的大型程序

每当我将此代码添加到构造函数中的某个类时。

```
std::ifstream is;
is.open ("Sprites/spriteList.json");// Causes Error
boost::property_tree::ptree pt;
boost::property_tree::json_parser::read_json(is,pt);// Causes Error 
```

Visual Studio 创建一个指向此代码的错误堆错误。

```
extern "C" _CRTIMP int __cdecl _CrtIsValidHeapPointer(
        const void * pUserData
        )
{
        if (!pUserData)
            return FALSE;

        if (!_CrtIsValidPointer(pHdr(pUserData), sizeof(_CrtMemBlockHeader), FALSE))
            return FALSE;

        return HeapValidate( _crtheap, 0, pHdr(pUserData) );
} 
```

但仅在调试模式下，发布时它不会出错并且运行良好。即使我将代码放在一个块中，也会出现此错误，因此它永远不会运行。

```
if (false) {
    std::ifstream is;
    is.open ("Sprites/spriteList.json");
    boost::property_tree::ptree pt;
    boost::property_tree::json_parser::read_json(is,pt);
} 
```

谁能慢慢解释发生了什么，或者指向一个链接来修复它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T18:55:13.833

我最近做了一个 winupdate(20120508) 并且 Visual Studio 2010 之后调试似乎真的很慢，在 compile-to-runDebug 滞后后延迟了 1 分钟，然后当调试程序退出时，又延迟了 1 分钟才能再次控制 Visual Studio . 我确实清理了所有东西，但没有快乐。

解决方案：我手动删除了我的项目/解决方案中的大 *.sdf 和 *.suo 文件并重新构建。问题神奇地消失了。

不知道为什么，但有些东西不同步、损坏或与更新不兼容，需要手动清除。

# windows - CrystalReports 数据表错误 VB.NET

> ID：10436394
> 
> 赞同：-1
> 
> 时间：2012-05-03T17:26:07.850
> 
> 标签：windows, vb.net, crystal-reports, datatable, dataset

我正在尝试将所有数据从数据库传递到报告：但出现错误（报告没有表格）

```
Dim sqlConn As String = "SELECT (SUM(item_selldetail * item_quantity )/ 100 * 12) AS isv_report," & _
                    " (SUM( item_selldetail * item_quantity ) - (SUM(item_selldetail * item_quantity )/ 100 * 12)) " & _
                    " AS capital_report,SUM( item_selldetail * item_quantity ) AS total_report  FROM qa_items;"
                Dim objDataAdapter As New MySqlDataAdapter(sqlConn, objConn)

                ' DataSet
                Dim ds As New DataSet

                ' llenar el DataSet
                objDataAdapter.Fill(ds)

                Dim mireporte As New ReportDocument()

                mireporte.Load("C:\Users\Jonathan\Desktop\Proyectos\Quickadmon\Quickadmon\Reportes\report_capital_rpt.rpt")

                mireporte.SetDataSource(ds)

                Me.capitalreport_viewer_capital_report.ReportSource = mireporte 
```

有人知道我能做什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T17:59:58.740

这是我过去所做的。

1.) 在 Crystal 中创建一个 ADO.NET (XML) 连接。为此，您需要提供 XML 文件的路径，XML 文件将包含 DataTable（或 DataReader 的）架构。它看起来像这样（*x0020*表示字段中的一个空格，如果有的话，请参阅[http://www.blakepell.com/Blog/?p=14](http://www.blakepell.com/Blog/?p=14)了解更多详细信息）：

```
 <?xml version="1.0" encoding="utf-8" ?>
  <people>
      <first_x0020_name>
      <last_x0020_name>
      <phone>
  </people> 
```

2.）像你一样设置你的数据源，在我的包装器代码中我有这样的东西，我从包装器的属性中设置它：

```
 If _dataReader IsNot Nothing Then
        report.SetDataSource(_dataReader)
    End If

    If _dataTable IsNot Nothing Then
        report.SetDataSource(_dataTable)
    End If 
```

3.) 将它放在您的查看器控件中（或导出它，这通常是我所做的，因为我正在从中生成 PDF 输出）。

```
 report.Export() 
```

如果这对您不起作用，请发布您在执行此操作时收到的特定堆栈跟踪和异常，以便我们更好地对其进行故障排除。;)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T18:49:51.813

示例代码在这里，尝试这样做

```
 sql = "SELECT Product_id,Product_name,Product_price FROM Product"
    Dim dscmd As New SqlDataAdapter(sql, cnn)
    Dim ds As New DataSet1
    dscmd.Fill(ds, "Product")
    cnn.Close()

    Dim objRpt As New CrystalReport1
    objRpt.SetDataSource(ds.Tables(1))
    CrystalReportViewer1.ReportSource = objRpt
    CrystalReportViewer1.Refresh() 
```

如果您需要完整的源代码：

[http://vb.net-informations.com/crystal-report/crystal_report_from_sql_query_string.htm](http://vb.net-informations.com/crystal-report/crystal_report_from_sql_query_string.htm)

梅尔卡

# php - PHP - strpos 没有检查第一个单词

> ID：10436395
> 
> 赞同：6
> 
> 时间：2012-05-03T17:26:10.683
> 
> 标签：php

我正在尝试在 PHP 中进行一些验证，其中之一是检查输入的字符串中是否有特定的单词。问题是，当我把指定的单词放在第一位时，我的代码似乎不起作用。

这是代码：

```
$word = "aa bb cc dd";
if(strpos($word, 'aa') == false)
{
    echo "wrong input";
} 
```

但如果我将 更改`$word`为`bb aa cc dd`or `bb cc dd aa`，它会起作用。我想知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-03T17:29:42.963

`strpos`如果您的字符串不存在，将返回 false。否则，它会返回字符串的位置。

在这种情况下，'aa' 位于字符串的开头，这意味着它位于位置 0；和 0 评估为假。

您需要对结果进行布尔比较：

```
if(strpos($word, 'aa') === false) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-03T17:28:53.867

那是因为`strpos`返回单词的位置，在这种情况下 0。0 是假的。`==`不检查相同的匹配项，`===`确实。所以使用三等号。

它甚至在[docs](http://us.php.net/manual/en/function.strpos.php)中。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-03T17:29:44.730

`strpos`返回 0，因为 'aa' 是第 0 个字符。由于`0 == false`但不`===`为假（它不是布尔值），您需要使用`===`而不是`==`.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-03T17:29:10.420

您应该使用严格的比较运算符，这将匹配相同的类型，因此 using`===`将检查它是否为布尔值：

```
if(strpos($word, 'aa') === false)
{
    echo "wrong input";
} 
```

Using`==`是一个松散的比较，任何东西都可以说是真的（除了`true`, `1`, `string`），例如

```
"false" == false    // true
"false" === false   // false 
```

之所以为假，是因为它将字符串与返回假的布尔值进行比较。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-05-03T17:29:36.243

因为 的位置为`aa`0，*等于*`false`。

你必须使用： `if(strpos($word, 'aa') === false)`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-10-23T08:14:10.853

在搜索字符串前加一个空格，找到多于 0 的位置

```
if(strpos(" ".$word, 'aa') > 0)
{
    echo "Found it!";
} 
```

# javascript - 嵌入式播放器在远程浏览器中不起作用

> ID：10436396
> 
> 赞同：0
> 
> 时间：2012-05-03T17:26:14.063
> 
> 标签：javascript, jsp, video-streaming, wmv, embedded-video

我在我的网络项目（jsp）中使用嵌入式 wmv 播放器来播放位于服务器上的 *.avi 文件。当我单击 jsp 中的链接时，它们工作正常，正在播放视频。

但是当我尝试在另一台机器上打开页面时，嵌入式播放器不起作用，而是从服务器下载文件。

这是我使用的代码

```
<script type="text/javascript">
function play(media){
document.getElementById('mediaplayer').innerHTML=
'<object classid="clsid:22d6f312-b0f6-11d0-94ab-0080c74c7e95"'
'type="application/x-oleobject" width="320" height="285">'
'<param name="showControls" value="false">'
'<param name="fileName" value="'media '">'
'<embed type="application/x-mplayer2" width="320" height="285"'
'showcontrols="false" src="'media '"><\/embed><\/object>'
}
</script>
<div id="mediaplayer"></div>
<ul id="menu">
<li><a onclick="play(this.href);return false" href="http://www.myurlname/afghan.avi">Source 1</a></li>
</ul> 
```

在网上找到了上面的脚本，但找不到解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T18:21:20.460

您的函数附加播放器标记的方式似乎不正确。您应该连接所有这些字符串。您确实有一条错误消息，打开浏览器的控制台，您将看到：

> 未捕获的 SyntaxError：意外的令牌 <

我用你的代码在[这个](http://jsfiddle.net/PLWb4/)小提琴上看到了这个

这是我在旧项目中使用的示例方法：

```
 // this requires jquery
    var MediaLink_Click = function (e) {

        var mp = document.getElementById('mediaPlayer');
        if ((null !== mp) && (undefined !== mp)) {
            if ((null != mp.contentDocument) && (undefined !== mp.contentDocument)) {
                $("object").each(function () {
                    this.contentDocument.controls.stop();
                });
            }
            $(mp).remove();
        }

        var oeTags = '<object id="mediaPlayer" classid="CLSID:6BF52A52-394A-11d3-B153-00C04F79FAA6" width="640px" height="480px"'
                    + 'codebase="http://activex.microsoft.com/activex/controls/mplayer/en/nsmp2inf.cab#Version=5,1,52,701"'
                    + 'standby="Loading Microsoft Windows Media Player components..."'
                    + 'type="application/x-oleobject">'
                    + '   <param name="autoStart" value="true"/>'
                    + '   <param name="url"       value="' + e.data.media_path + '" />'
                    + '   <param name="wmode"     value="transparent" />'
                    + '   <param name="uiMode"    value="full" />'
                    + '   <param name="loop"      value="false" />'
                    + '   <embed id       ="EmbedmediaPlayer"'
                    + '       type        ="application/x-mplayer2"'
                    + '       src         ="' + e.data.media_path + '"'
                    + '       width       ="640"'
                    + '       height      ="480">'
                    + '   </embed>'
                    + '</object>';
        $("#mediaplayer").html(oeTags); 
    }; 
```

请注意，我在每行之前用加号 (+) 连接字符串。你可以像这样使用它：

```
$("a").bind("click", { media_path: "path to your file goes here" }, MediaLink_Click); 
```

试试这个，让我知道你是否能跑。

[这个小提琴](http://jsfiddle.net/PLWb4/1/)显示它“有点”工作（.avi 文件不存在，所以它不会播放，但它会加载播放器和所有内容）

# c++ - Visual Studio 2010 自动切换到 C++/CLI 编译器

> ID：10436400
> 
> 赞同：1
> 
> 时间：2012-05-03T17:26:41.257
> 
> 标签：c++, visual-studio-2010, compiler-construction, c++-cli

在过去的几个月里，我一直在从事 C++/CLI 项目。

现在我回到 C++，但似乎 VS 2010 已设置为使用 C++/CLI 编译器，即使是标准 C++ 项目。

我刚刚创建了一个新的 C++ 空项目，但是当我编译代码时，它似乎使用了 C++/CLI 编译器。智能感知也被禁用。

如何将默认 C++ 编译器恢复到我的项目？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T17:33:20.967

从菜单栏中选择`Project`-> 。`Properties`在`Project properties`窗口中的`Configuration Properties`->下`General`，确保将`Common Language Runtime Support`其设置为`No Common Language Runtime Support`.

![在此处输入图像描述](../Images/164c5877056ba64404ad5ec6e032a47f.png)

# php - 实现 File_gets_contents() 和 image

> ID：10436402
> 
> 赞同：-1
> 
> 时间：2012-05-03T17:26:46.820
> 
> 标签：php, web

我想写一个php程序，它也会获取图像，问题是当我做file_get_contents时，我只得到不包括图像的html。我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T17:29:48.733

file_get_contents 读取文件的内容，而不是链接文件的内容。您的脚本应提供在检测正在读取的文件中的链接时检索链接文件的功能

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T17:34:38.720

如果您在 posix 环境中工作，您可能需要考虑通过 shell_exec 递归调用 wget 并让 wget 为您完成繁重的工作。superuser.com 上有[一篇](https://superuser.com/questions/264446/using-wget-to-recursively-crawl-a-site-and-download-images)关于它的文章。

# python - 在不以 Python 方式更改任何内容的情况下检查方法的潜在副作用

> ID：10436409
> 
> 赞同：1
> 
> 时间：2012-05-03T17:27:03.960
> 
> 标签：python, oop

现在，我有以下类方法：

```
def check_capacity(self, at_index)
def update_capacity(self, at_index) 
```

前者返回一个布尔值，而后者改变一个实例变量。问题是这两种方法都做非常相似的事情。我觉得我违反了 DRY？

我想要一种方法：

```
def update_capacity(self, at_index) 
```

我可以用作：

```
if update_capacity(at_index): 
```

如果副作用是可取的，这将产生预期的副作用，否则返回 False。

我的尝试是复制实例变量，检查副本是否需要更改，然后将实例变量设置为副本，如果正确并返回 True，否则不设置并返回 False。但是，这不适用于可变数据结构（如列表）！

我应该只使用“深拷贝”吗？还是有更好的方法来做到这一点？我想尽可能像 Pythonic。

**编辑**

迭代实例变量并检查进行更改是否会`check_capacity`违反条件。

迭代实例变量并进行更改，`update_capacity`知道条件不会被违反。

两者都有非常相似的代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T18:38:15.813

我有一种预感，这两个函数一起设法跨越了你的问题，而没有完全击中它。如果我有这个权利，你想`update_capacity`要么改变一些东西，要么`False`在不需要改变的时候返回。

在我看来，您将能够通过添加检查机制来实现此功能`check_capacity`into `update_capacity`，在执行主体之前执行条件检查`update_capacity`：

```
def update_capacity(self, at_index):
    if <condition from check_capacity>:
        <body of update_capacity>
    else:
        return False 
```

当然，`None`如果条件为真，此代码将返回，因此如果您想保持函数签名整洁，您可以返回`True`或其他内容，具体取决于适合其余代码的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T22:24:00.777

如果`check_capacity`应用于多个地方，则使其成为装饰器，以确保在不满足约束/检查时抛出异常。

像

```
@check_capacity
def update_capacity(...)
    # Does the job and does not return anything 
```

如果`check_capacity`没有在其他任何地方使用，只需将逻辑放入 `update_capacity`.

编辑：还有这个

> 如果更新容量（at_index）：

充其量是模棱两可的。该功能是否会查看我是否可以更新？它会真正更新/改变一些东西吗？

很明显，这两个功能必须分开。

# delphi - 如何获取应用程序中的所有类

> ID：10436415
> 
> 赞同：0
> 
> 时间：2012-05-03T17:27:32.953
> 
> 标签：delphi, class, rtti, delphi-6

我正在编写一个本地化应用程序，其中我通过 EnumResourceNames API 调用从应用程序资源中读取 DFM 信息。

但是，该函数返回我与 DFM 关联的表单的名称。我尝试从 FindClass 中获取类，但由于整个操作被编码在一个包中，FindClass 失败了。RegisterClass 例程从 exe 的初始化部分调用。

在 exe 项目中编写的代码中调用 FindClass 时工作正常。因此，我开发了自己的注册框架，在其中添加了所有表单类，但这真的很痛苦，因为我需要添加表单单元，然后将表单类传递给 RegisterClass 例程。

我希望是否有人可以提供一个简单的解决方案来获取可执行文件中的所有类，通过搜索类名可以从中创建对象的实例。

顺便说一句，我正在使用 Delphi 6 Update 2。

谢谢拉胡尔 W

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T23:26:01.850

如果应用程序正在调用`RegisterClass()`并且包正在调用`FindClass()`（反之亦然），那么只有**在****启用运行时包**的情况下编译包和应用程序以便它们共享一个 RTL 实例（这意味着您必须部署RTL 和 VCL 包以及您的应用程序和包）。否则，您的应用程序和包将拥有自己的 RTL 本地副本。为了在这种情况下共享类，一个项目必须导出其他项目可以在需要时调用的额外函数，以便在另一个项目的本地类列表中注册其本地类。

至于动态检测可用的类，这在 D6 中是不可能的。RTTI 系统直到 D2010 才获得足够详细的信息来执行这种枚举。

# php - foreach 到变量

> ID：10436418
> 
> 赞同：0
> 
> 时间：2012-05-03T17:27:41.347
> 
> 标签：php

我必须做 foreach 数组：

```
 Array
(
    [0] => Array
        (
            [name] => news_number
            [value] => 10
        )

) 
```

并获取变量 $value 的“值”。我该怎么办？

我有 ：

```
foreach($this->_config as $key){

foreach($key as $value['news_number'] => $key){

echo $key;

}

} 
```

但不好我有“news_number10”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T17:29:45.073

试试这个：

```
foreach( $this->_config as $key => $data )
{
    echo $data['name']." is ".$data['value']."\n";
} 
```

如果您要在配置数据中查找特定变量，您可以简单地执行以下操作：

```
foreach( $this->_config as $key => $data )
{
    if ( $data['name'] == 'news_number' )
    {
        $myNewsNumber = $data['value'];
        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T17:30:50.130

或者试试：

```
foreach( $this->_config as $data )
{
    extract($data);
    printf("%s is %s\n", $name, $value);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T17:32:13.247

你不能给数组分配一个数字吗？

```
foreach($this->_config as $key){

foreach($key as $value[0] => $key){

echo $key;

}

} 
```

您是否打算只有一个值？然后只需将数组编号更改为您要在 foreach 中使用的数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T17:32:14.480

尝试

```
$this->_config  = Array (
        0 => Array (
                'name' => "news_number",
                'value' => 10 
        ) 
);

foreach ( $this->_config as $value ) {
    echo $value ['name'], " ", $value ['value'];
} 
```

输出

```
 news_number 10 
```

# asp.net - 具有匿名身份验证的 ASP.NET 站点

> ID：10436421
> 
> 赞同：0
> 
> 时间：2012-05-03T17:27:48.017
> 
> 标签：asp.net, authentication, authorization

我有一个带有 asmx web 服务和测试 aspx 页面的 asp.net 3.5 网站（该页面使用 javascript 测试 web 服务）。我需要使用匿名身份验证来运行该站点，因此我在 IIS 中设置了该站点。现在，如果我尝试在浏览器中打开测试页面，我会收到 401.3-Unauthorized 错误。

任何想法我应该怎么做才能解决它？我是否必须将物理文件的读取权限授予匿名登录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T18:11:57.473

另外，您使用的是什么版本的 IIS？此外，如果您使用 IIS 管理器并检查匿名身份验证，则需要为其提供有效的用户名和密码，您这样做了吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T17:35:19.690

403 可能意味着几件事。这可能意味着您没有正确配置身份验证，或者可能意味着 ASP.NET 工作进程没有访问页面的权限（例如，安全设置为只允许您访问它们）。还有其他情况，但这是最常见的两种。

# actionscript-3 - 如何在舞台上静态创建 Video 对象？

> ID：10436424
> 
> 赞同：0
> 
> 时间：2012-05-03T17:28:04.013
> 
> 标签：actionscript-3, flash, actionscript, flash-cs4

不用说我是 Flash 的初学者。我想将视频对象添加到我的舞台。我怎么做？在我的组件窗口中，我看到的关闭组件是 FLVPlayback。我想展示我的网络摄像头。好吧，我的舞台有一个 FLVPlayback 实例，我将其命名为视频。

然后我尝试使用以下方式显示网络摄像头：

```
cam = Camera.getCamera();
            if(cam != null)
            {
                cam.setQuality(144000, 85);
                cam.setMode(320, 240, 15);
                cam.setKeyFrameInterval(60);

                video.attachCamera(cam);

            } 
```

单击按钮，但出现此错误：

```
1061: Call to a possibly undefined method attachCamera through a reference with static type fl.video:FLVPlayback. 
```

注意：网络上的所有示例都是动态创建视频的。它以这种方式工作，但我只想在舞台上创建我的视频对象并正确定位它。我不想在运行时使用 new 创建它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T19:29:42.243

根据您的错误消息，“video”是[FLVPlayback](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/fl/video/FLVPlayback.html)的一个实例，根据文档，它包装了一个[VideoPlayer](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/fl/video/VideoPlayer.html)对象。看起来 FLVPlayback 提供了大多数与 VideoPlayer 相同的方法，这就是为什么您会混淆这两个方法，但 FLVPlayback 不提供的一种方法*是*attachCamera()。

试试这个：

```
video.getVideoPlayer(video.activeVideoPlayerIndex).attachCamera(cam); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T17:46:48.593

从舞台上移除 FLVPlayback 对象并完全摆脱它，这样它就不会再阻止名称视频了。

然后像这样更改您的代码：

```
import flash.media.video; //here you get the right video class from flash library

var video = new Video(); // this will work after the import is done
cam = Camera.getCamera();

if(cam != null)
{
   cam.setQuality(144000, 85);
   cam.setMode(320, 240, 15);
   cam.setKeyFrameInterval(60);

   video.attachCamera(cam); 

    addChild(video) // brings video object to stage so its visible
} 
```

您使用了错误的组件，但您想先创建一个 Video 实例，然后将 cam 附加到它上面……您所做的大部分都是正确的

# php - 登录phpMyAdmin时是否可以指定主机？

> ID：10436427
> 
> 赞同：6
> 
> 时间：2012-05-03T17:28:19.427
> 
> 标签：php, mysql, phpmyadmin

我想知道是否可以在 phpMyAdmin 的登录屏幕上指定主机。

每当我需要连接到不同的服务器时，我都必须在`config.inc.php`.

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-03T17:44:26.257

看看这个：

```
http://www.onlinehowto.net/config-multiple-servers-in-phpmyadmin/1405

/* Single server config section */
$i++;
/* Authentication type */
$cfg['Servers'][$i]['auth_type'] = 'cookie';
/* Server parameters */
$cfg['Servers'][$i]['host'] = 'dbsub';
$cfg['Servers'][$i]['connect_type'] = 'tcp';
$cfg['Servers'][$i]['compress'] = false;
/* Select mysqli if your server has it */
$cfg['Servers'][$i]['extension'] = 'mysql'; 
```

> 以上六行代码配置 PhpMyAdmin 连接到一台服务器。注意在第一行 $i++ 上增加的 i > 变量。要定义另一个服务器，您只需复制粘贴上面的块并更改主机名。在每个数据库服务器配置之前有 $i++ 语句非常重要。服务器也可以来自不同的数据库类型。例如 MySQL 和 PostgreSQL。这就是为什么 PhpMyAdmin 如此受欢迎和喜爱的原因。
> 
> 这是我们管理的 phpmyadmin 实例之一中的工作设置

```
/*
* Servers configuration
*/
$i = 0;

/*
* First server
*/
$i++;
/* Authentication type */
$cfg['Servers'][$i]['auth_type'] = 'cookie';
/* Server parameters */
$cfg['Servers'][$i]['host'] = 'db';
$cfg['Servers'][$i]['connect_type'] = 'tcp';
$cfg['Servers'][$i]['compress'] = false;
/* Select mysqli if your server has it */
$cfg['Servers'][$i]['extension'] = 'mysql';
/*
* Second server
*/
$i++;
/* Authentication type */
$cfg['Servers'][$i]['auth_type'] = 'cookie';
/* Server parameters */
$cfg['Servers'][$i]['host'] = 'dbsub';
$cfg['Servers'][$i]['connect_type'] = 'tcp';
$cfg['Servers'][$i]['compress'] = false;
/* Select mysqli if your server has it */
$cfg['Servers'][$i]['extension'] = 'mysql';
/*
* Third server
*/
$i++;
/* Authentication type */
$cfg['Servers'][$i]['auth_type'] = 'cookie';
/* Server parameters */
$cfg['Servers'][$i]['host'] = 'stats1';
$cfg['Servers'][$i]['connect_type'] = 'tcp';
$cfg['Servers'][$i]['compress'] = false;
/* Select mysqli if your server has it */
$cfg['Servers'][$i]['extension'] = 'mysql';

$cfg['DisplayServersList']    = TRUE;

/*
* End of servers configuration 
```

> 使服务器列表显示在登录屏幕的漂亮下拉列表中的最后更改是 $cfg[''DisplayServersList''] = TRUE; 陈述。这样，每当您进入 phpmyadmin 的登录页面时，您都必须选择要使用的服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-06T00:11:57.270

在 PHPMyAdmin 的根目录下，您有一个名为**config.sample.inc.php**的文件。

将其重命名为**config.inc.php**并进行编辑！

搜索**First server**并在**$cfg['Servers'][$i]['host']**上设置正确的值。

```
/*
 * First server
 */
$i++;
/* Authentication type */
$cfg['Servers'][$i]['auth_type'] = 'cookie';
/* Server parameters */
$cfg['Servers'][$i]['host'] = '192.168.0.1';
$cfg['Servers'][$i]['connect_type'] = 'tcp';
$cfg['Servers'][$i]['compress'] = false;
$cfg['Servers'][$i]['AllowNoPassword'] = false; 
```

# iphone - CGRect 与多个 CGRect 的冲突

> ID：10436429
> 
> 赞同：0
> 
> 时间：2012-05-03T17:28:24.610
> 
> 标签：iphone, objective-c, ios, xcode, cgrect

我是 iPhone 编程的新手，目前正在开发分球游戏。在这个游戏中，当我的子弹击中任何球时，我希望它产生两个新球。我的子弹和球都是uiimageview。

这是我的代码：

```
if ((CGRectIntersectsRect(bullet.frame,Ball.frame)) && !(ball)){
    ball=TRUE;
    x=Ball.frame.origin.x;
    y=Ball.frame.origin.y;
    [self performSelector:@selector(createball)];
} 
```

这是我的创建球功能..

```
-(void)createball{
    if (ball) {
        imageMove1 = [[UIImageView alloc] initWithFrame:CGRectMake(x,y,50 ,50)];  
        UIImage *imag = [UIImage imageNamed:@"ball1.png"];
        [imageMove1 setImage:imag];
        [self.view addSubview:imageMove1];
        [ballArray addObject:imageMove1];

        imageMove2 = [[UIImageView alloc] initWithFrame:CGRectMake(x,y,50 ,50)]; 
        UIImage *imag1 = [UIImage imageNamed:@"ball1.png"];
        [imageMove2 setImage:imag1];
        [self.view addSubview:imageMove2];
        [ballArray addObject:imageMove2];
        ball=FALSE;
        [self performSelector:@selector(moveball)];
    }
} 
```

现在在创建这两个 uiimgeview 之后，当子弹击中这两个 uiimageview 之一时，我希望它创建另外两个 uiimageview。但是我面临的问题是我们如何获得这些新的 uiimageview 的框架......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T18:04:06.023

移动子弹迭代槽数组后，您在其中存储了对球图像的引用：

```
for (UIImageView *ball in ballArray){
     //check for collision
    if (CGRectIntersectsRect(bullet.frame,ball.frame)){
        //hit
    }
} 
```

检查球之间的碰撞：

```
for (UIImageView *ballOne in ballArray){
    for (UIImageView *ballTwo in ballArray){
        //check for collision
        if (CGRectIntersectsRect(ballOne.frame,ballTwo.frame) && ballOne != ballTwo){
            //hit
        }
    }
} 
```

# c++ - 绕道并使用 _thiscall 作为钩子（GCC 调用约定）

> ID：10436431
> 
> 赞同：1
> 
> 时间：2012-05-03T17:28:43.070
> 
> 标签：c++, gcc, this, detours, mprotect

我最近一直在研究迂回函数（仅在 Linux 中），到目前为止我已经取得了巨大的成功。[在我发现这个](http://www.criticalsecurity.net/index.php/topic/32106-function-hooking-via-detourtrampoline/)之前，我一直在开发自己的绕道课程。我对代码进行了一些现代化改造，并将其转换为 C++（当然是一类）。该代码就像任何其他迂回实现一样，它将原始函数地址替换为我自己指定的“挂钩”函数的 JMP。它还为原始功能创建了一个“蹦床”。

一切都完美无缺，但我想做一个简单的调整。我用纯 C++ 编程，我不使用全局函数，所有内容都包含在类中（就像 Java/C# 一样）。问题是这种迂回方法打破了我的模式。“钩子”函数*必须*是静态/非类函数。

我想做的是实现对 _thiscall 钩子的支持（这对于 GCC [_thiscall](http://en.wikipedia.org/wiki/X86_calling_conventions#thiscall)约定应该很简单）。我没有成功修改此代码以使用 _thiscall 挂钩。我想要的最终结果就是这样简单；`PatchAddress(void * target, void * hook, void * class);`. 我没有要求任何人为我做这件事，但我想知道如何解决/解决我的问题？

据我所知，我只需要增加“补丁”的大小（即现在是 5 个字节，我应该需要额外的 5 个字节吗？），然后在我使用 JMP 调用（到我的钩子函数）之前，我将我的“this”指针推送到堆栈（应该就像我将它作为成员函数调用一样）。为了显示：

```
push 'my class pointer'
jmp <my hook function> 
```

而不是直接/仅进行“jmp”调用。这是正确的方法还是需要考虑下面的其他内容（注意：我不关心对 VC++ _thiscall 的支持）？

注意：这是我对上述代码的实现：[header](http://pastebin.com/pRMpxex5) : [source](http://pastebin.com/zqP8Qm8d)，使用[libudis86](http://udis86.sourceforge.net/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T21:22:36.253

我尝试了几种不同的方法，其中包括 JIT 编译（使用[libjit](http://download.savannah.gnu.org/releases/dotgnu-pnet/libjit-releases/)），它被证明是成功的，但该方法没有提供足够的性能使其可用。相反，我转向[libffi](http://sourceware.org/libffi/)，它用于在运行时动态调用函数。libffi库有一个闭[包](http://sourceware.org/libffi/)API ( `ffi_prep_closure_loc`)，它使我能够将我的“this”指针提供给生成的每个闭包。所以我使用了一个静态回调函数并将`void`指针转换为我的对象类型，然后我可以调用任何我想要的非静态函数！

# compiler-construction - 仅将相关环境子集传递给 eval 的 Scheme 解释器

> ID：10436439
> 
> 赞同：2
> 
> 时间：2012-05-03T17:29:01.250
> 
> 标签：compiler-construction, functional-programming, lisp, scheme, interpreter

*有没有一种有效的方法来构建一个仅将环境的相关*子集传递给递归调用的 Scheme 解释器`eval`？

例如，考虑以下表达式：

```
(let ([x 1]
      [y 2])
  (+ x 3)) 
```

当我们评估`(eval '(+ x 3) env)`时，环境包含绑定`{ x : 1, y : 2 }`。如何编写一个高效的解释器，使得环境只包含`{ x : 1 }`?

当然，通常我们无法事先知道一个值是否会被使用。我正在寻找的是一种粗略的句法方法——可能基于编译器优化技术？——这比在每次递归调用时遍历大部分环境`eval`以过滤掉不相关的值更有效。

（背景：我对编写一个记忆方案解释器的[追求。）](https://stackoverflow.com/questions/10308058/efficient-incremental-hash-computation-during-program-interpretation)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T22:24:31.530

当然：对于每个子表达式，计算该子表达式的[自由变量](http://en.wikipedia.org/wiki/Free_variables_and_bound_variables)并以某种方式将其附加到 AST。然后在每次递归调用 时`eval`，将环境限制为您将要评估的表达式的自由变量。

编译器通常在`lambda`边界处这样做以避免创建保留对不必要值的引用的闭包，因为保留这些引用可能会阻止对象被 GC'd。也就是说，对于下面的程序

```
(let ([x 1]
      [y 2])
  (lambda (z)  ;; free vars = {x}
    (+ x z)) 
```

表达式的闭包`lambda`将包含`x`但 not的值`y`。但总的来说，这样做意味着您不能使用非常简单的“帧列表”环境表示；您可能必须将其展平（或至少复制和修剪）。

一些实现也会在局部变量不再使用时（尤其是在非尾调用之前）将局部变量（不被闭包保存的变量，您希望在寄存器或堆栈中看到的那种）清零。那是，

```
(let ([x some-big-object])
  (f (g x) long-running-expression-not-involving-x)) 
```

可能会被翻译成低级的等价物

```
(let ([x some-big-object])
  (let ([tmp1 (g x)])
    (set! x #f)
    (let ([tmp2 long-running-expression-not-involving-x])
      (f tmp1 tmp2)))) 
```

原因是一样的：尽早删除引用意味着可以更快地释放对象。（这也意味着它们不会被捕获的延续所束缚，类似于关闭案例。）谷歌“空间安全”以获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T18:03:11.540

[死代码消除](http://en.wikipedia.org/wiki/Dead_code_elimination)的常见编译器优化在这里可以解决问题。不使用 Y，因此可以简单地删除 Y 绑定。

为了回答如何编写高效解释器的一般问题，我建议创建一个 AST，然后使用各种优化技术（例如部分解释）多次传递它，以尽可能地预先计算和简化。

# python - 将库添加到 Google App Engine 项目

> ID：10436440
> 
> 赞同：0
> 
> 时间：2012-05-03T17:29:04.137
> 
> 标签：python, google-app-engine

我一直在尝试将[Markdown2](https://github.com/trentm/python-markdown2)库添加到我的 GAE 应用程序中，但它不断抛出 ImportError。这就是我所拥有的：

```
sys.path.append(os.path.join(os.path.dirname(__file__), "lib\markdown2") 
```

如果我现在这样做

```
html = markdown2.markdown("*boo*") #throws an error: markdown2 not defined 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T01:05:35.097

您需要将`lib`目录添加到您的路径，而不是`markdown`目录 - markdown 是一个包，由它所在的目录定义。

这应该有效：

```
sys.path.append(os.path.join(os.path.dirname(__file__), 'lib')) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T18:20:47.980

我将 markdown2 与一个简单的导入一起使用：

```
import lib.markdown 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T19:40:54.137

我不认为这是标准库之一。您需要在您的应用程序文件夹中包含它的副本 - 否则在您部署时它将不可用。

之后您不需要修改路径，只需使用相对于应用程序根文件夹的正确路径导入它即可。

例如：

如果您的应用位于 /home/myapp

您可能想将您的 markdown2 复制到 /home/myapp/lib/markdown2

在这种情况下，您将使用“import lib.markdown2”。

# php - 将 PHP 数据导入 Google 电子表格（自动刷新）

> ID：10436445
> 
> 赞同：0
> 
> 时间：2012-05-03T17:29:33.367
> 
> 标签：php, google-apps-script, google-sheets, google-drive-api

我使用一个外部网络服务，它允许我通过 php 下载我的数据（链接是 .php，下载文件是 .csv）

我需要将此数据添加到 Google 电子表格中。然后自动刷新（如果可能，每隔一小时）将 PHP 源中的新数据添加到 Google 电子表格。

我无法将 .php 修改为外部 Web 服务。

所以我需要编写一个谷歌文档（现在是谷歌驱动器）脚本，每小时从 PHP 源获取这些数据。

非常感谢如果你能帮助我

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-03T23:44:47.810

好吧，看来[Google Apps Script](https://developers.google.com/apps-script/)可能非常适合您。你知道吗？我认为值得看一看[教程](https://developers.google.com/apps-script/articles)和[指南](https://developers.google.com/apps-script/guide)。

如果这不是您要寻找的答案，请澄清。

# css - 溢出-x：隐藏也隐藏垂直内容

> ID：10436452
> 
> 赞同：37
> 
> 时间：2012-05-03T17:29:49.257
> 
> 标签：css, html, overflow

我有一个 400 像素宽的 DIV，包含两个并排的 DIV，每个 DIV 的宽度为 400 像素，高度为 600 像素。两个 DIV 的宽度是固定的，但高度可以变化。我想隐藏第二个 DIV 并完全显示第一个，在 DIV 内不滚动。

我想，我的解决方案是隐藏溢出-x。这似乎也隐藏了 y 溢出。

这是我的代码：

```
#schools-sub-nav {
}
#schools-container {
  width: 400px; /* Set the width of the visible portion of content here */
  background-color: fuchsia;
  position: relative;
  overflow-x: hidden;
}
#schools-list {
  width: 400px; /* Set the width of the visible portion of content here */
  height: 600px; /* Delete the height, let the content define the height */
  background-color: purple;
  position: absolute;
  top: 0;
  left: 0;
}
#boards-list {
  width: 400px; /* Set the width of the visible portion of content here */
  height: 600px; /* Delete the height, let the content define the height */
  background-color: green;
  position: absolute;
  top: 0;
  left: 400px;
}
```

```
<div id="schools-sub-nav"> <a href="#schools-list">Schools List</a> // <a href="#boards-list">Boards List</a> </div>
<div id="schools-container">
    <div id="schools-list"> One </div>
    <div id="boards-list"> Two </div>
</div>
```

我希望`#schools-list`是可见的，但由于某种原因隐藏了它`overflow-x: hidden`。`#schools-container`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T17:41:38.950

您制作两个 div（具有绝对位置）的方式使溢出规则无效！

您需要更改位置类型（正常/非绝对），我建议使用浮动，最后，您要应用溢出的容器 div 需要有一种适合它的方法，例如在末尾放置一个 div `clear: both`（在使用浮点数的情况下）。

编辑：我刚刚尝试过，您可以按照上面的建议隐藏第二个 div，并在内部添加另一个宽度非常大的周围 div ，并将主容器 div 更改为`overflow-x`。`overflow`

像这样：

```
<div id="schools-container">
  <div id="schools-container-inside">
     <div id="schools-list"> One </div>
     <div id="boards-list"> Two </div>
  </div>
</div> 
```

然后是 CSS（我注释掉了原来未使用的 CSS 并在最后添加了新的 div 类）：

```
#schools-container {
    width: 400px; /* Set the width of the visible portion of content here */
    background-color: fuchsia;
    position: relative;
    /*overflow-x: hidden;*/
    overflow: hidden;
}
#schools-list {
    width: 400px; /* Set the width of the visible portion of content here */
    height: 600px; /* Delete the height, let the content define the height */
    background-color: purple;
    /*
    position: absolute;
    top: 0;
    left: 0;
    */
    float: left;
}
#boards-list {
    width: 400px; /* Set the width of the visible portion of content here */
    height: 600px; /* Delete the height, let the content define the height */
    background-color: green;
    /*
    position: absolute;
    top: 0;
    left: 400px;
    */
    float: left;
}
#schools-container-inside {
    width: 10000px;
    overflow: hidden;
} 
```

JsFiddle在这里：http: [//jsfiddle.net/MbMAc/](http://jsfiddle.net/MbMAc/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-03T17:49:38.960

我想你需要这个

```
#schools-container {
    width: 400px; /* Set the width of the visible portion of content here */
    background-color: fuchsia;
    position: relative;
    overflow-x: hidden;
    overflow-y:auto;
    height:600px;
} 
```

您还需要定义主 div 的高度。

# eclipse-plugin - eclipse scala插件，缺少scala项目类型

> ID：10436453
> 
> 赞同：0
> 
> 时间：2012-05-03T17:29:52.777
> 
> 标签：eclipse-plugin

在 helios 上安装 scala eclipse 插件后，缺少 scala 项目类型，首选项中没有 scala 选项，也没有其他指示安装成功。然后，当我在安装新软件窗口中检查“已安装的内容”时，我可以看到插件在那里......

我可以在办公室的多台机器上复制相同的问题，但是我可以在家中自己的机器上安装，而不会出现问题....

有人对如何解决这个问题有任何想法/提示吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T22:05:15.953

看起来并非所有内容都已正确安装。

在弄清楚发生了什么之前，请尝试回答以下问题：

1.  在首选项中，查找 JDT Weaving。是否启用？
2.  您的错误日志中有任何错误吗？
3.  您正在运行什么版本的 Eclipse？
4.  对于您的办公机器，Eclipse 是安装在只读目录还是 C:\Program Files 中？

# python - 用 Python 替换字符串的子字符串

> ID：10436454
> 
> 赞同：23
> 
> 时间：2012-05-03T17:30:00.330
> 
> 标签：python, string, substring, string-interpolation

我想就用其他文本替换字符串的子字符串的最佳方法获得一些意见。这是一个例子：

我有一个字符串 a，它可能类似于“你好，我的名字是 $name”。我还有另一个字符串 b，我想将它插入到字符串 a 中以代替其子字符串“$name”。

我认为如果以某种方式指示可替换变量，那将是最简单的。我使用了美元符号，但它可以是花括号之间的字符串或任何你认为最合适的字符串。

**解决方案：** 这是我决定这样做的方式：

```
from string import Template

message = 'You replied to $percentageReplied of your message. ' + 
    'You earned $moneyMade.'

template = Template(message)

print template.safe_substitute(
    percentageReplied = '15%',
    moneyMade = '$20') 
```

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-05-03T17:56:37.777

以下是最常见的方法：

```
>>> import string
>>> t = string.Template("Hello my name is $name")
>>> print t.substitute(name='Guido')
Hello my name is Guido

>>> t = "Hello my name is %(name)s"
>>> print t % dict(name='Tim')
Hello my name is Tim

>>> t = "Hello my name is {name}"
>>> print t.format(name='Barry')
Hello my name is Barry 
```

使用[string.Template](http://docs.python.org/library/string.html#template-strings)的方法很容易学习，bash 用户应该很熟悉。它适合暴露给最终用户。这种风格在 Python 2.4 中可用。

来自其他编程语言的许多人都会熟悉百分比[样式。](http://docs.python.org/library/stdtypes.html#string-formatting-operations)有些人发现这种风格很容易出错`%(name)s`，因为 % 运算符与乘法具有相同的优先级，并且应用参数的行为取决于它们的数据类型（元组和字典变得特殊）处理）。Python 从一开始就支持这种风格。

大[括号样式](http://docs.python.org/library/string.html#format-string-syntax)仅在 Python 2.6 或更高版本中受支持。它是最灵活的风格（提供丰富的控制字符集并允许对象实现自定义格式化程序）。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-03T17:45:33.300

有很多方法可以做到这一点，更常用的是通过字符串已经提供的设施。这意味着使用`%`运营商，或者更好的是，更新和推荐的`str.format()`.

例子：

```
a = "Hello my name is {name}"
result = a.format(name=b) 
```

或者更简单地说

```
result = "Hello my name is {name}".format(name=b) 
```

您还可以使用位置参数：

```
result = "Hello my name is {}, says {}".format(name, speaker) 
```

或使用显式索引：

```
result = "Hello my name is {0}, says {1}".format(name, speaker) 
```

它允许您更改字符串中字段的顺序，而无需更改调用`format()`：

```
result = "{1} says: 'Hello my name is {0}'".format(name, speaker) 
```

格式真的很强大。您可以使用它来决定字段的宽度、如何写入数字以及其他格式的排序，具体取决于您在括号内写入的内容。

如果替换更复杂，您还可以使用该`str.replace()`函数或正则表达式（来自模块）。`re`

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-05-03T17:37:07.833

签出 python 中的 replace() 函数。这是一个链接：

[http://www.tutorialspoint.com/python/string_replace.htm](http://www.tutorialspoint.com/python/string_replace.htm)

这在尝试替换您指定的某些文本时应该很有用。例如，在链接中，他们向您展示了以下内容：

```
str = "this is string example....wow!!! this is really string"
print str.replace("is", "was") 
```

对于每个单词`"is"`，它都会用单词替换它`"was"`。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-05-03T17:31:43.400

实际上这已经在模块中实现了[`string.Template`](http://docs.python.org/library/string.html?highlight=string.template#string.Template)。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-05-03T17:35:34.930

您可以执行以下操作：

```
"My name is {name}".format(name="Name") 
```

它在 python 中被原生支持，你可以在这里看到：

[http://www.python.org/dev/peps/pep-3101/](http://www.python.org/dev/peps/pep-3101/)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-05-03T17:59:11.083

您也可以使用带有 % 的格式，但 .format() 被认为更现代。

```
>>> "Your name is %(name)s. age: %(age)i" % {'name' : 'tom', 'age': 3}
'Your name is tom' 
```

但它也支持一些类型检查，如通常的 % 格式所示：

```
>>> '%(x)i' % {'x': 'string'}

Traceback (most recent call last):
  File "<pyshell#40>", line 1, in <module>
    '%(x)i' % {'x': 'string'}
TypeError: %d format: a number is required, not str 
```

# python - 允许 使用 Google App Engine 和 Jinja2 进行标记

> ID：10436458
> 
> 赞同：10
> 
> 时间：2012-05-03T17:30:33.463
> 
> 标签：python, escaping, whitespace, jinja2, webapp2

在我的网络应用程序中，用户可以发表博客文章。当我显示博客文章时，没有显示换行符，因为我没有用`<br>`标签替换新行。问题是我在 Jinja 中打开了自动转义，所以`<br>`标签被转义了。我不想暂时禁用自动转义，我想专门允许`<br>`标签。我该怎么做？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-16T03:43:28.343

我有另一个我认为是最好的答案。最初我只是`post.content`按原样显示我的变量，并且没有保留换行符。这里的解决方案都不起作用（很好），我的预解决方案只是一个快速修复并且存在重大问题。这是真正的解决方案：

```
{% for line in post.content.splitlines() %}
    {{line}}<br>
{% endfor %} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T12:22:49.490

您可以使用`|safe`过滤器，或使用[自动转义](http://flask.pocoo.org/docs/templating/#controlling-autoescaping)块：

```
{% autoescape false %}
{{ content goes here }}
{% autoescape %} 
```

您还可以将[环境](http://jinja.pocoo.org/docs/api/#jinja2.Environment)中的自动转义设置为`False`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-08T02:28:00.080

在您的模型对象中，添加如下函数：

```
class Post(db.Model):
    # ...

    def html_content(self):
        # Escape, then convert newlines to br tags, then wrap with Markup object
        # so that the <br> tags don't get escaped.
        def escape(s):
            # unicode() forces the conversion to happen immediately,
            # instead of at substitution time (else <br> would get escaped too)
            return unicode(jinja2.escape(s))
        return jinja2.Markup(escape(self.content).replace('\n', '<br>')) 
```

然后在您的模板中，只需调用它：

```
<p>{{ post.html_content() }}</p> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-06T02:56:48.207

这是我自己写的一个过滤器：

```
import jinja2

@jinja2.evalcontextfilter
def nl2br(eval_ctx, value):
    result = jinja2.escape(value).unescape().replace('\n', '<br>')
    if eval_ctx.autoescape:
        result = jinja2.Markup(result)
    return result 
```

`jinja2.Environment()`并通过调用将过滤器添加到：

```
jinja_env.filters['nl2br'] = nl2br 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-06T02:17:03.837

您可以创建一个 jinja2 过滤器：

```
import re
from jinja2 import evalcontextfilter, Markup, escape

_paragraph_re = re.compile(r'(?:\r\n|\r|\n){2,}')

@evalcontextfilter
def nl2br(eval_ctx, value):
    result = u'\n\n'.join(u'<p>%s</p>' % p.replace('\n', '<br>\n')
                          for p in _paragraph_re.split(escape(value)))
    if eval_ctx.autoescape:
        result = Markup(result)
    return result 
```

您需要先将过滤器添加到您的 jinja2 环境中，然后才能使用它：

```
JINJA2_ENV.filters['nl2br'] = jinja2_filters.nl2br 
```

在您的模板中，您可以使用该过滤器：

```
{{post.content|nl2br}} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-10-24T03:15:42.667

请注意，我默认情况下启用了自动转义，因此我不在此功能中检查它，但这就是我正在使用的

```
def nl2br(value): 
  split = value.split('\n')
  return jinja2.Markup('<br>').join(split) 
```

那么当然，

```
jinja_env.filters['nl2br'] = nl2br 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-05-04T01:01:48.317

最简单的方法是自己转义该字段，然后添加换行符。当你在 jinja 中传递它时，将其标记为安全，这样它就不会自动转义。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-05-03T17:51:53.220

`<pre></pre>`解决方案是在我拥有内容的区域周围放置标签。

# java - 为什么不在 java 中提供开箱即用的单例实例？

> ID：10436459
> 
> 赞同：0
> 
> 时间：2012-05-03T17:30:36.260
> 
> 标签：java, singleton

您可以通过实现单例模式来制作单例类。现在单例类是基本要求。

为什么 JVM 在运行时不自己处理 Singleton 对象的创建？

通过拥有像“Singleton”这样的标记接口并在运行时由JVM创建一次对象实例。无论如何，如果 Class 没有扩展任何其他类，Java 编译器会添加“扩展对象”。类似的方法可以应用于 Singleton 情况。这将节省大量时间和开发工作以及围绕单例模式的各种实现的讨论。

1) 同步的 getInstance()

2) getInstance() 中的同步块，而不是使整个方法同步

3) 以 singleInstance 作为 volatile 成员的选项 2

如果您需要在多个类中实现单例模式，这也将节省大量时间和重复工作（不考虑 SingletonPatternFactory 类，它将返回已传递的任何类的单例实例）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T17:41:50.870

让我们看一下创建单例所需的所有步骤：

1.  私有构造函数
2.  静态最终字段
3.  （可选）如果你希望类是可序列化的，简单的实现`readResolve`和`writeObject`

我遇到的大多数单例都不关心序列化，因此不需要第三步。这给你留下了两个非常非常简单的步骤。

```
public class Whatever extends WhateverElse {
    public static final Whatever INSTANCE = new Whatever();

    private Whatever() {}
} 
```

它甚至是延迟加载的，因为在您访问该类之前不会运行构造函数，这只会获取它的单例实例。就时间和开发工作而言，我不知道您对“很多”的定义是什么，但我不认为这是繁重的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T17:45:52.257

实现基本设计模式不是核心语言的责任，除非有令人信服的理由。设计模式来来去去——例如，单例模式被广泛认为是一种非常糟糕的模式，永远不应该使用。即使您决定无论如何都要使用它，您是否想要一个渴望的单身人士？懒惰的单身人士？如果实例化由于某种原因失败会发生什么？有很多看似微不足道的问题需要解决，但是将这个特性添加到语言中并不是一个微不足道的改变。

通过自己实现它，您可以获得所需的功能和行为。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T17:33:09.660

您可以使用枚举而不是单例模式 - 这不是很复杂：

```
public enum Singleton {
    INSTANCE;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T17:45:20.253

有两种基本类型的单例，一种是延迟初始化，另一种是急切初始化。

除了关于 Singleton 风格的全部争论之外，许多 Java 开发人员认为 Singleton 是不好的或反模式。这可能是目前维护 Java 规范的人之间存在分歧的一个领域。

最后，几乎所有模式都可以这样说。恕我直言，不需要一种语言来采用或认可任何特定的模式集。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T17:50:45.953

您不会想要一个 Singleton 接口，因为该接口没有自己的行为。你会想要一个抽象类......有点。实际上，您会想要比抽象的父级更强大的东西。您需要有一个私有构造函数（或调用私有构造函数并返回单个实例的私有实例化方法），该构造函数必须在父级中定义的 getInstance() 方法中调用（违反范围）。

您所建议的是可以在传统班级系统之外起作用的东西。也许它可以作为一种新的对象类型来完成（类似于枚举不是类），但绝对不能作为标准接口或类。

# sql - 将 MySQL 查询转换为 Oracle9i、SQL Server 和 DB2

> ID：10436461
> 
> 赞同：-2
> 
> 时间：2012-05-03T17:30:48.443
> 
> 标签：sql

这是**[我的表](http://www.dbasupport.com/forums/attachment.php?attachmentid=586&d=1336060648)的 MySQL 查询：**

```
SELECT vc.vehicle_class_name
, GROUP_CONCAT(CASE WHEN v.status = 2 THEN v.vehicle_id END) completed
, GROUP_CONCAT(CASE WHEN v.status <> 2 THEN v.vehicle_id END) incomplete
FROM vehicle_class vc
JOIN vehicle v
ON v.vehicle_class_id = vc.vehicle_class_id
GROUP 
BY vc.vehicle_class_id; 
```

我需要帮助转换 Oracle9i、DB2 和 SQL Server。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T16:13:36.300

这是一个Oracle9i 解决方案。这项工作是使用 SYS_CONNECT_BY_PATH 函数完成的，该函数需要查询中的 CONNECT BY 子句。为了通过“准备”某些 VEHICLE 表来连接行......它填充了 curr 和 prev 行号。

```
SELECT
  vc.vehicle_class_name,
  RTRIM(REPLACE(MAX(SYS_CONNECT_BY_PATH(v.completed,'|')) KEEP (DENSE_RANK LAST ORDER BY v.curr),'|',''),',') completed,
  RTRIM(REPLACE(MAX(SYS_CONNECT_BY_PATH(v.incomplete,'|')) KEEP (DENSE_RANK LAST ORDER BY v.curr),'|',''),',') incomplete
FROM
(SELECT
   vehicle_class_id,
   CASE WHEN status=2 THEN vehicle_id||',' END completed,
   CASE WHEN status<>2 THEN vehicle_id||',' END incomplete,
   ROW_NUMBER() OVER (PARTITION BY vehicle_class_id ORDER BY vehicle_id) curr,
   ROW_NUMBER() OVER (PARTITION BY vehicle_class_id ORDER BY vehicle_id)-1 prev
 FROM
   vehicle) v JOIN vehicle_class vc
ON v.vehicle_class_id=vc.vehicle_class_id
GROUP BY
  vc.vehicle_class_name
CONNECT BY
  v.prev=PRIOR v.curr AND v.vehicle_class_id=PRIOR v.vehicle_class_id
START WITH
  v.curr=1; 
```

# android - 图像放置在 Android 中的图像上

> ID：10436465
> 
> 赞同：0
> 
> 时间：2012-05-03T17:31:07.213
> 
> 标签：android, image, android-layout, imageview

我试图将图像放在 android 中另一个现有图像的顶部。这是游戏计划。首先，用户将选择一个按钮，然后该按钮将告诉程序将精灵/图像填充到主图像上的固定位置。图像设置好后，用户可以在当前图像之上点击另一个图像的按钮（目标是两个图像，可以选择更改它们的大小、x 和 y 位置。我只使用 android 2.1 平台！用于选择的按钮和描述活动的文本位于线性布局中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T18:07:48.550

你应该使用 a`RelativeLayout`然后你可以使用 params 来设置位置、边距等。像这样：

```
//this is your fist item
r1.setImageResource(R.drawable.myimage);

//this is the second item
r2.setImageResource(R.drawable.myimage2);

RelativeLayout.LayoutParams imageParams=
new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
imageParams.setMargins(1, 1, 1, 1);
imageParams.addRule(RelativeLayout.BELOW,r1.getId());
addView(r2,imageParams); 
```

# php - 如果但没有图像

> ID：10436468
> 
> 赞同：2
> 
> 时间：2012-05-03T17:31:18.127
> 
> 标签：php, image

当尝试显示地址不存在的图像时，您将看到默认浏览器“无图像”徽章。

如何将其更改为默认的“no-image.png”占位符？

```
echo "<img src='http://www.google.com/trolol.png'>"; //for example 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-03T17:34:24.820

您可以使用该`onerror`属性，例如：

```
<img src="" onerror="this.src = 'no-image.png';" alt="" /> 
```

## 演示：http: [//jsfiddle.net/kNgYK/](http://jsfiddle.net/kNgYK/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-03T17:35:21.040

```
<img src='http://www.google.com/trolol.png' onerror="this.src='http://jsfiddle.net/img/logo.png'">​ 
```

示例[http://jsfiddle.net/UPdZh/1/](http://jsfiddle.net/UPdZh/1/)

> 如果在加载外部文件（例如文档或图像）时发生错误，则会触发 onerror 事件。

**句法**

```
<element onerror="SomeJavaScriptCode"> 
```

[http://wap.w3schools.com/jsref/event_onerror.asp](http://wap.w3schools.com/jsref/event_onerror.asp)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T17:36:07.317

```
<?php
$filename = 'http://www.google.com/trolol.png';

if (file_exists($filename)) {
    echo "<img src='".$filename."'>";
} else {
    echo "<img src='no-image.png'>";
}
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T17:36:17.813

试试这个

```
<?php
$filename = 'http://www.google.com/trolol.png';

if (file_exists($filename)) {
    echo "The file $filename exists";
} else {
    echo "The file $filename does not exist";
}
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T17:39:38.343

正如您要求的 PHP 解决方案：

```
if (file_exists($filename)) {
  echo "i_exist.jpg";
} else {
  echo "fallback.jpg";
} 
```

重要提示：仅适用于本地文件，不适用于远程文件！感谢 Szymon 的评论！

# f# - 将函数列表简化为布尔值

> ID：10436470
> 
> 赞同：2
> 
> 时间：2012-05-03T17:31:26.517
> 
> 标签：f#, mapreduce, reduce

我正在寻找一种方法来将此列表简化为布尔值。这是原文：

```
let ones = [1;1;1;1]
let twos = [2;2;2;2]
let bad = [1;2;3]

let isAllOnes = List.forall (fun op -> op = 1)
let isAllTwos = List.forall (fun op -> op = 2)  

let isOneOrTwo ops = isAllOnes ops || isAllTwos ops

isOneOrTwo ones |> should be True
isOneOrTwo twos |> should be True
isOneOrTwo bad |> should be False 
```

我正在尝试使用一种减少来重构它。像这样的东西：

```
let isOneOrTwo ops = [isAllOnes; isAllTwos] |> List.tryFind (fun acc -> acc ops) 

(isOneOrTwo ones).IsSome |> should be True
(isOneOrTwo twos).IsSome |> should be True
(isOneOrTwo bad).IsSome |> should be False 
```

我不喜欢 isOneOrTwo 如何简化为选项。我真的很想将列表简化为布尔值，以便我的断言看起来像这样：

```
isOneOrTwo ones |> should be True
isOneOrTwo twos |> should be True
isOneOrTwo bad |> should be False 
```

有谁知道如何做到这一点？List.reduce 不起作用，因为类型不同。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T17:39:33.743

将 List.tryFind 替换为 List.exists

```
let ones = [1;1;1;1]
let twos = [2;2;2;2]
let bad = [1;2;3]

let allOnes = List.forall ((=) 1)
let allTwos = List.forall ((=) 2)

let isOneOrTwo l = [allOnes; allTwos] |> List.exists (fun f -> f l)

printfn "%A " (isOneOrTwo ones) // true
printfn "%A " (isOneOrTwo twos) // true
printfn "%A " (isOneOrTwo bad)  // false 
```

# c# - 有什么方法可以知道 IsolatedStorageSettings.ApplicationSettings 中的变量何时更改？

> ID：10436471
> 
> 赞同：0
> 
> 时间：2012-05-03T17:31:27.020
> 
> 标签：c#, windows-phone-7, isolatedstorage

我正在尝试为我的 windows phone 7 应用程序创建一个设置页面，我使用这篇文章作为基础[http://msdn.microsoft.com/en-us/library/ff769510(v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/ff769510(v=vs.92).aspx)所以我的应用程序类是：

```
 public class AppSettings
{

    // Our isolated storage settings
    IsolatedStorageSettings isolatedStore;

    // The isolated storage key names of our settings
    const string CheckBoxSettingKeyName = "CheckBoxSetting";
    const string ListBoxSettingKeyName = "ListBoxSetting";
    const string RadioButton1SettingKeyName = "RadioButton1Setting";
    const string RadioButton2SettingKeyName = "RadioButton2Setting";
    const string RadioButton3SettingKeyName = "RadioButton3Setting";
    const string UsernameSettingKeyName = "UsernameSetting";
    const string PasswordSettingKeyName = "PasswordSetting";

    // The default value of our settings
    const bool CheckBoxSettingDefault = true;
    const int ListBoxSettingDefault = 0;
    const bool RadioButton1SettingDefault = true;
    const bool RadioButton2SettingDefault = false;
    const bool RadioButton3SettingDefault = false;
    const string UsernameSettingDefault = "";
    const string PasswordSettingDefault = "";

    /// <summary>
    /// Constructor that gets the application settings.
    /// </summary>
    public AppSettings()
    {
        try
        {
            // Get the settings for this application.
            isolatedStore = IsolatedStorageSettings.ApplicationSettings;

        }
        catch (Exception e)
        {
            Debug.WriteLine("Exception while using IsolatedStorageSettings: " + e.ToString());
        }
    }

    /// <summary>
    /// Update a setting value for our application. If the setting does not
    /// exist, then add the setting.
    /// </summary>
    /// <param name="Key"></param>
    /// <param name="value"></param>
    /// <returns></returns>
    public bool AddOrUpdateValue(string Key, Object value)
    {
        bool valueChanged = false;

        // If the key exists
        if (isolatedStore.Contains(Key))
        {
            // If the value has changed
            if (isolatedStore[Key] != value)
            {
                // Store the new value
                isolatedStore[Key] = value;
                valueChanged = true;
            }
        }
        // Otherwise create the key.
        else
        {
            isolatedStore.Add(Key, value);
            valueChanged = true;
        }

        return valueChanged;
    }

    /// <summary>
    /// Get the current value of the setting, or if it is not found, set the 
    /// setting to the default setting.
    /// </summary>
    /// <typeparam name="valueType"></typeparam>
    /// <param name="Key"></param>
    /// <param name="defaultValue"></param>
    /// <returns></returns>
    public valueType GetValueOrDefault<valueType>(string Key, valueType defaultValue)
    {
        valueType value;

        // If the key exists, retrieve the value.
        if (isolatedStore.Contains(Key))
        {
            value = (valueType)isolatedStore[Key];
        }
        // Otherwise, use the default value.
        else
        {
            value = defaultValue;
        }

        return value;
    }

    /// <summary>
    /// Save the settings.
    /// </summary>
    public void Save()
    {
        isolatedStore.Save();
    }

    /// <summary>
    /// Property to get and set a CheckBox Setting Key.
    /// </summary>
    public bool CheckBoxSetting
    {
        get
        {
            return GetValueOrDefault<bool>(CheckBoxSettingKeyName, CheckBoxSettingDefault);
        }
        set
        {
            AddOrUpdateValue(CheckBoxSettingKeyName, value);
            Save();
        }
    }

    /// <summary>
    /// Property to get and set a ListBox Setting Key.
    /// </summary>
    public int ListBoxSetting
    {
        get
        {
            return GetValueOrDefault<int>(ListBoxSettingKeyName, ListBoxSettingDefault);
        }
        set
        {
            AddOrUpdateValue(ListBoxSettingKeyName, value);
            Save();
        }
    }

    /// <summary>
    /// Property to get and set a RadioButton Setting Key.
    /// </summary>
    public bool RadioButton1Setting
    {
        get
        {
            return GetValueOrDefault<bool>(RadioButton1SettingKeyName, RadioButton1SettingDefault);
        }
        set
        {
            AddOrUpdateValue(RadioButton1SettingKeyName, value);
            Save();
        }
    }

    /// <summary>
    /// Property to get and set a RadioButton Setting Key.
    /// </summary>
    public bool RadioButton2Setting
    {
        get
        {
            return GetValueOrDefault<bool>(RadioButton2SettingKeyName, RadioButton2SettingDefault);
        }
        set
        {
            AddOrUpdateValue(RadioButton2SettingKeyName, value);
            Save();
        }
    }

    /// <summary>
    /// Property to get and set a RadioButton Setting Key.
    /// </summary>
    public bool RadioButton3Setting
    {
        get
        {
            return GetValueOrDefault<bool>(RadioButton3SettingKeyName, RadioButton3SettingDefault);
        }
        set
        {
            AddOrUpdateValue(RadioButton3SettingKeyName, value);
            Save();
        }
    }

    /// <summary>
    /// Property to get and set a Username Setting Key.
    /// </summary>
    public string UsernameSetting
    {
        get
        {
            return GetValueOrDefault<string>(UsernameSettingKeyName, UsernameSettingDefault);
        }
        set
        {
            AddOrUpdateValue(UsernameSettingKeyName, value);
            Save();
        }
    }

    /// <summary>
    /// Property to get and set a Password Setting Key.
    /// </summary>
    public string PasswordSetting
    {
        get
        {
            return GetValueOrDefault<string>(PasswordSettingKeyName, PasswordSettingDefault);
        }
        set
        {
            AddOrUpdateValue(PasswordSettingKeyName, value);
            Save();
        }
    }

} 
```

一切正常，我可以从 xaml 设置页面更新设置值，我可以使用访问主应用程序中的设置值

```
 IsolatedStorageSettings Settings; 
 Settings = IsolatedStorageSettings.ApplicationSettings;
 string checkboxvalue = (string)Settings["CheckBoxSetting"]; 
```

现在我想要的是能够知道应用程序设置中的值何时更改/更新，以便我可以在设置更新时执行操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:02:37.840

类似于其他答案，但更具体。如果您已经使用要使用的属性，请实现**INotifyPropertyChanged**接口，编写您自己的**RaisePropertyChanged/NotifyPropertyChanged**并在目标类中订阅**PropertyChanged**事件。

**IsolatedStorageSettings.ApplicationSettings**是一个字典。默认情况下是不可观察的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-04T08:22:43.127

有很多方法*可以*做到这一点，但最简单的入门方法是在需要了解设置时查询设置。

另一个*简单*的替代方法是让您的`AppSettings`对象在某些内容发生更改时引发事件并让相关的其他类订阅它们。

# internationalization - play framework 2.0 - 国际化 - 如何翻译消息

> ID：10436475
> 
> 赞同：6
> 
> 时间：2012-05-03T17:32:02.403
> 
> 标签：internationalization, playframework-2.0

第一个问题：如何在控制器中检索文本的翻译？

第二个问题：如何检索模板中文本的翻译？

api 说有一个翻译消息的 .get 方法：

[http://www.playframework.org/documentation/api/2.0/java/play/i18n/Messages.html](http://www.playframework.org/documentation/api/2.0/java/play/i18n/Messages.html)

但是我的应用程序无法识别此方法。在 Eclipse 中打开 Message.class 显示其中有一个 .apply 方法，用 Scala 和 Java 编写！？

```
object Messages {

  /**
   * Translates a message.
   *
   * Uses `java.text.MessageFormat` internally to format the message.
   *
   * @param key the message key
   * @param args the message arguments
   * @return the formatted message or a default rendering if the key wasn‚Äôt defined
   */
  def apply(key: String, args: Any*)(implicit lang: Lang): String = {
    Play.maybeApplication.flatMap { app =>
      app.plugin[MessagesPlugin].map(_.api.translate(key, args)).getOrElse(throw new Exception("this plugin was not registered or disabled"))
    }.getOrElse(noMatch(key, args))
  } 
```

现在eclipse告诉我可以像这样调用这个方法：

```
> String play.api.i18n.Messages.apply(String arg0, Seq<Object> arg1,
> Lang arg2) 
```

但是我应该输入什么作为“Seq”参数？

- 解决方案 -

问题是我导入了 play.api.i18n.Messages 而不是 play.i18n.Messages ...

定义了两个消息文件（messages.de-DE 和 messages.en-UK）并使用以下代码一切正常：

控制器：

```
 import play.i18n.Messages;
    import play.api.i18n.Lang;

    Lang en = new Lang("en","GB");
    play.i18n.Lang en_lang = new play.i18n.Lang(en);

    Lang de = new Lang("de", "DE");
    play.i18n.Lang de_lang = new play.i18n.Lang(de);

    Logger.info(Messages.get("home.title"));
    Logger.info(Messages.get(en_lang, "home.title"));
    Logger.info(Messages.get(de_lang, "home.title")); 
```

应用程序.conf

```
 application.langs="en-GB,de-DE" 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-03T20:11:41.730

在控制器内部获取翻译：

```
// in messages file
msg.key=Hello Translation

// in you controller
Messages.get("msg.key"); 
```

你甚至可以传递参数：

```
// in messages file
msg.key=Hello {0}, here is your translation

//in controller
Messages.get("msg.key", User.firstName); 
```

从视图中您可以使用：`Messages("msg.key")`

你甚至可以应用 HTML 格式（当然只适用于视图）：

```
// in messages file
msg.key=Hello <strong>{0}</strong>, here is your translation

// in controller
Messages.get("msg.key", User.firstName);

//in view
@Html(objectInView) 
```

**请注意以下几点：** 目前无法明确定义语言，请参阅错误报告：[https ://play.lighthouseapp.com/projects/82401/tickets/174-20-i18n-add-ability-to-define-隐式语言for-java-api](https://play.lighthouseapp.com/projects/82401/tickets/174-20-i18n-add-ability-to-define-implicit-lang-for-java-api)

之前有人问过类似的问题： [从 Scala 模板访问翻译的 i18n 消息（播放！国际化）](https://stackoverflow.com/questions/10063349/access-translated-i18n-messages-from-scala-templates-play-internationalization)

[i18n 错误：控制器和模板使用不同的隐式语言](https://stackoverflow.com/questions/9733082/i18n-error-controller-and-templates-uses-different-implicit-langs)

# sql - 在多个字段上连接 3 个表 - SQL Server

> ID：10436476
> 
> 赞同：0
> 
> 时间：2012-05-03T17:32:04.023
> 
> 标签：sql, sql-server, sql-server-2005

我正在使用 SQL Server 2005。我正在尝试收集 3 个不同表的信息。

表 1 是**[User_Table]**，如下所示：

```
Lead  ID
1     5
1     8
1     12
2     13
2     14
2     15
2     18
2     24 
```

表 2 是**[交互]**，如下所示：

```
Int_Date    ID  Interaction
2012-03-01  5   Hang Up
2012-03-01  13  Reset
2012-03-01  8   Basic
2012-03-01  13  Basic
2012-03-02  14  Reset
2012-03-02  12  Advanced
2012-03-02  12  Hang Up
2012-03-02  24  Reset
2012-03-02  5   Basic 
```

表 3 是**[重复]**，如下所示：

```
Repeat_d    ID  R_Interaction
2012-03-01  13  Reset
2012-03-01  8   Basic
2012-03-02  14  Reset
2012-03-02  12  Advanced
2012-03-02  24  Reset 
```

我需要做的是将来自 [Interactions] 的总调用数作为每个交互类型和日期的总和，并按 Lead 和 Int_Date = Repeat_d 对它们进行分组

我希望结果如何：

```
DATE       Lead  Total_Interactions  Total_Repeats  Interaction
2012-03-01    1                   1              0  Hang Up
2012-03-01    1                   2              1  Basic
2012-03-01    2                   1              1  Reset
2012-03-01    2                   1              0  Basic
2012-03-02    1                   1              1  Advanced
2012-03-02    1                   1              0  Hang Up
2012-03-02    1                   1              0  Basic
2012-03-02    2                   2              1  Reset 
```

到目前为止，我的查询看起来像：

```
DECLARE @StartDate smalldatetime, @EndDate smalldatetime, @TL_ID as smallint
SET @StartDate = '20120301'
SET @EndDate = '20120331'
SET @TL_ID = '2'
SELECT
DATEADD(dd, DATEDIFF(dd, 0, [Int_Date]),0) as [Int_Date]
,[Interaction]
,COUNT([Interaction]) as [Total_Repeats]
FROM [Interactions] (NOLOCK)
LEFT JOIN [user_table] (NOLOCK) ON [id] = [id]
WHERE [Int_Date] BETWEEN @StartDate AND @EndDate
AND [Lead] = @TL_ID
GROUP BY DATEADD(dd, DATEDIFF(dd, 0, [Int_Date]),0), [Interaction]
ORDER BY [Int_Date], [Total_Repeats] DESC 
```

任何帮助将非常感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T20:51:29.360

尝试以下查询：

```
DECLARE
    @StartDate SMALLDATETIME,
    @EndDate SMALLDATETIME,
    @TL_ID SMALLINT

SELECT
    @StartDate = '2012-03-01',
    @EndDate = '2012-03-31',
    @TL_ID = '2'

SELECT
    DATEADD(DD, DATEDIFF(DD, 0, [Int_Date]), 0) AS [Int_Date],
    u.[Lead],
    i.[ID],
    COUNT(1) + COUNT(r.[ID]) AS [Total_Interactions],
    COUNT(r.[ID]) AS [Total_Repeats],
    i.[Interaction]
FROM
    [Interactions] AS i WITH (NOLOCK)
JOIN
    [User_Table] AS u WITH (NOLOCK)
ON
    u.[ID] = i.[ID]
LEFT OUTER JOIN
    [Repeats] AS r WITH (NOLOCK)
ON
    r.[ID] = i.[ID]
AND r.[Repeat_d] = i.[Int_Date]
AND r.[R_Interaction] = i.[Interaction]
WHERE
    i.[Int_Date] BETWEEN @StartDate AND @EndDate
AND u.[Lead] = @TL_ID
GROUP BY
    DATEADD(DD, DATEDIFF(DD, 0, [Int_Date]), 0),
    u.[Lead],
    i.[ID],
    i.[Interaction]
ORDER BY
    [Int_Date],
    u.[Lead],
    i.[ID],
    [Total_Repeats] DESC 
```

在此处查看实际操作：[https ://data.stackexchange.com/stackoverflow/query/68935/joining-3-tables-on-multiple-fields-sql-server](https://data.stackexchange.com/stackoverflow/query/68935/joining-3-tables-on-multiple-fields-sql-server)

# c#-4.0 - C# 处理派生类型、重构

> ID：10436478
> 
> 赞同：0
> 
> 时间：2012-05-03T17:32:05.227
> 
> 标签：c#-4.0, refactoring

我正在使用具有以下类的第三方 .NET 库。

形状（抽象基类）

（以下所有类都源自他）

长方形

圆圈

三角形

所有这些类都有一个名为 Area 的属性

我正在浏览一组形状，并设置区域

PS：面积不是Shape的属性，而是每个类的属性。

所以我的代码如下所示：

```
if (shapeVar is Reactangle)
{
   (shapeVar as Rectangle).area = value;
}

if (shapeVar is Circle)
{
   (shapeVar as Circle).area = value;
}

if (shapeVar is Triangle)
{
   (shapeVar as Triangle).area = value;
} 
```

有一个更好的方法吗？我觉得这很愚蠢，但我没有找到其他方法来做到这一点

我正在使用 .NET 4

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T17:36:19.827

您可以使用反射来访问每个形状的 area 属性，尽管性能开销很小：

```
shapeVar.GetType().GetProperty("area").SetValue(shapeVar, value, null); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T08:47:36.077

您可以包装 Rectangle、Circle 和 Triangle 类（来自第三方程序集）并在您自己的代码中创建 3 个新类。

然后你可以有一个接口，例如：

```
 public interface IShape
        {
            double Area{get;set;}
        } 
```

使包装的类实现这个通用接口。

之后，您可以在代码中以通用方式使用所有这三个类，而无需知道它们的实际具体类是什么。（通过引用接口类型而不是 Shape 基本类型）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T18:01:16.543

为什么不让 Area 成为从派生类型返回而不是设置的方法？

```
public abstract class Shape
{
    abstract public double Area();
}

public class Square : Shape
{
    double sideLength;
    public double Area
    {
        return sideLength * sideLength;
    }
}

public class Circle : Shape
{
    double radius;
    public double Area
    {
        return Pi * r * r;
    }
} 
```

如果您想坚持设置区域，您可以将您的区域移动到基类中：

```
public abstract class Shape
{
    public double Area;
}

public class Square : Shape
{
    ...
} 
```

并且您根据可以执行的派生类型查看设置区域的形状：

```
foreach (Shape shape in shapes)
    switch(typeof(shape))
    {
        case typeof(Square))
        {
            shape.Area = value; //I imagine this is derived type specific
            ...
        }
    } 
```

# java - java.lang.NoClassDefFoundError: org/apache/axis2/client/Stub

> ID：10436479
> 
> 赞同：3
> 
> 时间：2012-05-03T17:32:07.520
> 
> 标签：java, axis2

我已经使用 Axis2 向我的项目中添加了一个 Web 服务，但现在我无法运行我的应用程序。

这是我正在使用的类路径：

```
<property name="classpath" location="bin:EventReservationCore/bin:EventReservationCore/db:EventReservationCore/lib/*:EventReservationCore/lib/util_iso2.jar:EventReservationCore/lib/sqlitejdbc-v056.jar:AuthorizationRMI/lib/AuthorizationService.jar:EventReservationCore/lib/activemq-all-5.4.3.jar:/home/ander/axis2-1.6.1/webapp/axis2.war"/> 
```

这是在我添加 Axis2 Web 服务之前一直运行的目标。

```
<target name="run.besocial">
            <java classname="eventReservationServer.ReservationEventServer" classpath="${classpath}" fork="true">
                <jvmarg value="-Djava.rmi.server.codebase=file:EventReservationCore/bin/ file:EventReservationCore/lib/util_iso2.jar"/>
                <jvmarg value="-Djava.security.policy=EventReservationCore/java.policy" />
            </java>
    </target> 
```

结果我得到这个错误：

```
 [java] Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/axis2/client/Stub
 [java]     at java.lang.ClassLoader.defineClass1(Native Method)
 [java]     at java.lang.ClassLoader.defineClassCond(ClassLoader.java:632)
 [java]     at java.lang.ClassLoader.defineClass(ClassLoader.java:616)
 [java]     at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
 [java]     at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
 [java]     at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
 [java]     at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
 [java]     at java.security.AccessController.doPrivileged(Native Method)
 [java]     at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
 [java]     at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
 [java]     at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
 [java]     at java.lang.ClassLoader.loadClass(ClassLoader.java:248)
 [java]     at eventReservationServer.eventServerGateway.WSEventServerGateway.getEvents(WSEventServerGateway.java:19)
 [java]     at eventReservationServer.ReservationEventServer.<init>(ReservationEventServer.java:101)
 [java]     at eventReservationServer.ReservationEventServer.main(ReservationEventServer.java:130)
 [java] Caused by: java.lang.ClassNotFoundException: org.apache.axis2.client.Stub
 [java]     at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
 [java]     at java.security.AccessController.doPrivileged(Native Method)
 [java]     at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
 [java]     at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
 [java]     at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
 [java]     at java.lang.ClassLoader.loadClass(ClassLoader.java:248)
 [java]     ... 15 more 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T19:36:07.633

如果您使用的是 tomcat，请将位于 axis2/lib 文件夹下的所有 jar 文件复制到 tomcat/lib 文件夹，并将它们添加到类路径中，如 D:\axis2-1.6.2\lib*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T19:41:48.380

线程“主”java.lang.NoClassDefFoundError 中的异常：org/apache/axis2/client/Stub

可以通过将axis2-kernel-1.6.2 添加到类路径来消除上述错误，但是在使用wsdl2java.bat 生成存根后，您可能会开始遇到其他错误。

因此，您最好在编译客户端时将所有axis2-jar 添加到类路径中。

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-08T05:33:16.177

如果您在 JBoss 类加载器中遇到同样的问题，请按照[此处](https://access.redhat.com/documentation/en-US/JBoss_Enterprise_Application_Platform/6/html/Development_Guide/Generate_MANIFESTMF_entries_using_Maven.html)和[此处](https://stackoverflow.com/a/18695910/1572286)的提示进行操作。

最重要的部分是在 JBoss 模块配置中定义一个新模块，并在您的 MANIFEST.MF 文件中找到该模块。

Maven 将帮助您完成后面的部分。以下是将轴模块添加到清单文件的示例配置。

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-ejb-plugin</artifactId>
            <configuration>
                <archive>
                    <manifestEntries> <!--Manually added JBoss Modules (that are not found by JBoss class loader) must be loaded here-->
                        <Dependencies>axis.axis</Dependencies>
                    </manifestEntries>
                </archive>
            </configuration>
        </plugin> 
```

根据您的打包类型，您将使用其他 maven 插件，例如 maven-jar-plugin 或 maven-war-plugin。

依赖包名称必须与您在 JBoss 模块中指定的模块名称匹配。上述轴模块在 JBoss 模型中定义，如上面的链接中所述。

```
 <module xmlns="urn:jboss:module:1.1" name="axis.axis">
    <properties>
        <property name="jboss.api" value="private"/>
    </properties> 
 <!--  ...   -->
 </module> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-12T23:34:22.720

没有一个答案对我有帮助。这就是我所做的。

我使用 Eclipse 生成 Runnable Jar（右键单击->导出-> Runnable Jar），并将所有库添加为包。它给了我一个可以从命令行运行的 JAR。

然后我在 Eclipse 中的 Jar 和我的构建创建的 Jar 之间进行了比较。我能够找到我的构建没有放入 Jar 中的缺失依赖项。

# c++ - C++ 奇怪的函数指针行为

> ID：10436484
> 
> 赞同：0
> 
> 时间：2012-05-03T17:32:19.333
> 
> 标签：c++, opengl, pointers, sdl

这是一个简单的 opengl/sdl 程序。通常有一个巨大的双端队列，程序在其中保存显示数据，例如一个三角形将像这样插入/读入/从双端队列中读取（GL_Begin .... Vertice 1 .... Vertice 2 ... Vertice 3 .. .GL_End)

项目结构

```
enum Shapes{
    LINE,
    POLYGON,
    TRIANGLE
};

struct Item{
    int id;
    int type;
    Shapes shape;
    double x;
    double y;
    double z;
}; 
```

...

```
void GEngine::CC2D(int id,double x,double y){ // Change Coordinates ... Move the Item

    for(int i=0;i<Items.size();i++){
        Item* item = &Items[i];                  // Pointer to the item INSIDE the deque because we need to edit it, we can not create a new instance of Item

        if(item->id == id && item->type == 2){
            item->x += x;
            item->y += y;
        }
    }

    DrawScene();
}

void GEngine::PollEvents( void (*Event)() ){
    int mbpressed = 0; // Mouse button pressed flag
    int mouse_xpre = 0;
    int mouse_ypre = 0;
    int move_id = 0; // TESTING
    while(1){
        while( SDL_PollEvent( &event ) ){

            switch( event.type ){
                case SDL_MOUSEMOTION:{
                    if(mbpressed == 1){
                        mouse_x = event.motion.x; // X2
                        mouse_y = event.motion.y; // Y2
                    //  (*Event)();

                    //  CC2D(  (   X2  -   X1     ),(   Y2  -   Y1     )
                        CC2D(move_id,(mouse_x-mouse_xpre),(mouse_y-mouse_ypre));      // The difference between the current and the previous mouse position is equal to the DX and DY which will be used to move the vertices.
                        mouse_xpre = mouse_x;     // X1
                        mouse_ypre = mouse_y;     // Y1

                        SDL_Delay(20);

                    }
                    break; 
```

现在的问题。如果我使用 CC2D(move_id,(mouse_x-mouse_xpre),(mouse_y-mouse_ypre)); 它工作正常，但如果我将 CC2D 函数添加到事件一中，算法会失败，而不是项目随鼠标移动，而是从屏幕上移开。

换句话说。

```
case SDL_MOUSEMOTION:{
                        if(mbpressed == 1){
                            mouse_x = event.motion.x; // X2
                            mouse_y = event.motion.y; // Y2
                        //  (*Event)();

                        //  CC2D(  (   X2  -   X1     ),(   Y2  -   Y1     )
                        CC2D(move_id,(mouse_x-mouse_xpre),(mouse_y-mouse_ypre));      // The difference between the current and the previous mouse position is equal to the DX and DY which will be used to move the vertices.
                        mouse_xpre = mouse_x;     // X1
                        mouse_ypre = mouse_y;     // Y1

                        SDL_Delay(20);

                    }
                    break;
} 
```

^ 工作得很好。

但

```
GEngine gEngine;

void Event(){
            gEngine.CC2D(0,(gEngine.mouse_x-gEngine.mouse_xpre),(gEngine.mouse_y-gEngine.mouse_ypre));
    }

int main(int argc, char *argv[]){

... code ...

gEngine.PollEvents(&Event);

return 0; // NEVER REACHED
} 
```

和

```
case SDL_MOUSEMOTION:{
                    if(mbpressed == 1){
                        mouse_x = event.motion.x; // X2
                        mouse_y = event.motion.y; // Y2
                        (*Event)();

                        mouse_xpre = mouse_x;     // X1
                        mouse_ypre = mouse_y;     // Y1

                        SDL_Delay(20);

                    }
                    break;
} 
```

才不是 ...

为了进一步简化事情：

```
Case SDL_MOUSEMOTION: ...... code ..... CC2D( params) ........ 
```

工作正常，但

```
Event(){ CC2D( params ) } // Main.cpp
Case SDL_MOUSEMOTION: ...... code ..... (*Event)() ........ // GEngine.cpp 
```

无法按预期工作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T17:40:49.687

您在里面声明局部变量`PollEvents`：

```
int mouse_xpre = 0;
int mouse_ypre = 0; 
```

请注意，它们被命名为`mouse_xpre`and `mouse_ypre`。然后在你正在做的回调中

```
gEngine.CC2D(0,(gEngine.mouse_x-gEngine.mouse_xpre),(gEngine.mouse_y-gEngine.mouse_ypre));
//                                      ^^^^^^^^^^                           ^^^^^^^^^^ 
```

它访问成员变量。您需要删除局部变量的声明，以便它们不会隐藏成员变量，并且您将在两个地方都使用成员变量。

# c# - 导出到 Excel .xlsx 文件

> ID：10436485
> 
> 赞同：2
> 
> 时间：2012-05-03T17:32:19.657
> 
> 标签：c#, asp.net-mvc, excel

如何使用 chrome 通过 mvc 将 .xlsx 文件导出到 excel 中。它适用于 .xls 但不适用于 .xlsx

```
 Response.ClearContent();
        Response.AddHeader("content-disposition", "attachment; filename= Estimate1.xlsx");
        Response.ContentType = "application/excel";
        StringWriter sw = new StringWriter();
        HtmlTextWriter htw = new HtmlTextWriter(sw);

        Response.Write(sw.ToString());
        Response.End(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T17:37:06.380

检查 IIS 中的 MIME 类型 - 网络服务器不知道 Office 2007（及更高版本）文件扩展名并拒绝提供它们。

有关此主题，请参阅TechNet 上的[在服务器上注册 2007 Office system 文件格式 MIME 类型。](http://technet.microsoft.com/en-us/library/ee309278%28v=office.12%29.aspx)

即使您没有使用“真正的”IIS，您也应该尝试将 xslx MIME 类型添加到您的 web.config：

```
<configuration>
    <system.webServer>
        <staticContent>
            <mimeMap fileExtension=".xslx" mimeType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet" />
        </staticContent>
    </system.webServer>
</configuration> 
```

# git - 在 Git 存储库中查找包含特定字符串模式的最后一次提交

> ID：10436489
> 
> 赞同：5
> 
> 时间：2012-05-03T17:32:33.993
> 
> 标签：git, awk, grep

我想及时回到包含诸如“ThisClass（object）：”之类的代码的最后一次提交。该代码随后在稍后的提交中从项目中删除。

我考虑过使用 git bisect + grep/awk-ing。我还听说 git grep 可能允许您执行此类操作，尽管我无法在手册页中找出正确的命令。

有什么想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-03T17:45:09.417

使用 -S（搜索）参数来`git log`：

```
git log -S 'ThisClass(object):' 
```

# c# - WCF 关系

> ID：10436491
> 
> 赞同：4
> 
> 时间：2012-05-03T17:32:50.127
> 
> 标签：c#, wcf, entity-framework-4

我无法处理一项简单的（如我所想的）任务。我有 2 个 POCO 课程，我想通过 WCF 服务发送：

Estate 类 withc 派生自 Advert 类，而 Locations whitch 与广告相关（广告属于某些位置的多对多关系）

这是我的数据合同：

```
[DataContract]
[KnownType(typeof(Location))]
[KnownType(typeof(Estate))]
public abstract class Advert
{
    [DataMember]
    public int ID { get; set; }
    [DataMember]
    public decimal? Price { get; set; }
    [DataMember]
    public byte FromAgent { get; set; }
    [DataMember]
    public DateTime Date { get; set; }

    [DataMember]
    public virtual ICollection<Url> Urls { get; set; }
    [DataMember]
    public virtual ICollection<Location> Locations { get; set; }
    [DataMember]
    public virtual ICollection<PhoneNumber> PhoneNumbers { get; set; } 
}

[KnownType(typeof(Location))]
[DataContract]
public class Estate : Advert
{
    [DataMember]
    public byte OfferType { get; set; }

    [DataMember]
    public byte EstateType { get; set; }

    [DataMember]
    public byte MarketType { get; set; }

    [DataMember]
    public int? Area { get; set; }

    [DataMember]
    public byte? Rooms { get; set; }
}

[DataContract]
public class Location
{
    [DataMember]
    public int ID { get; set; }
    [DataMember]
    public byte Type { get; set; }
    [DataMember]
    public string Name { get; set; }
    [DataMember]
    public string NamePrefix { get; set; }
    [DataMember]
    public string Feature { get; set; }
    [DataMember]
    public int NumberOfEstates { get; set; }

    [DataMember]
    public virtual ICollection<Location> ParentLocations { get; set; }
    [DataMember]
    public virtual ICollection<Advert> Adverts { get; set; }
} 
```

我的服务界面：

```
 [OperationContract]
    [ServiceKnownType(typeof(Location))]
    IEnumerable<Estate> GetEstates(EstateFilter filter); 
```

它的实现：

```
 public IEnumerable<Estate> GetEstates(EstateFilter filter)
    {
        return EstateProcesses.GetEstates(filter);
    } 
```

在业务层：

```
 public static List<Estate> GetEstates(EstateFilter filter)
    {
        List<Estate> estates;

        if (filter==null) filter = new EstateFilter();

        using (var ctx = new Database.Context())
        {
            estates = (from e in ctx.Adverts.OfType<Estate>()
                       where
                              (filter.ID == null || e.ID == filter.ID)
                              && (filter.DateFrom == null || e.Date >= filter.DateFrom)
                              && (filter.DateTo == null || e.Date <= filter.DateTo)
                              && (filter.PriceFrom == null || e.Price >= filter.PriceFrom)
                              && (filter.PriceTo == null || e.Price <= filter.PriceTo)
                              && (filter.FromAgent == null || e.FromAgent == filter.FromAgent)
                              && (filter.LocationID == null || e.Locations.Any(l => l.ID == filter.LocationID))
                              && (filter.PhoneNumber == null || e.PhoneNumbers.Any(p => p.Number == filter.PhoneNumber))
                              && (filter.Url == null || e.Urls.Any(u => u.Address == filter.Url))
                          select e).ToList();
            foreach (var estate in estates)
            {
                ctx.LoadProperty(estate, e => e.Locations);
            }
        }

        return estates;
    } 
```

我获得的例外是波兰语：

```
Połączenie gniazda zostało przerwane. Mogło to być spowodowane błędnym przetwarzaniem komunikatu, przekroczeniem limitu czasu odbioru przez zdalny host lub problemem z zasobami sieciowymi podległej sieci. Limit czasu lokalnego gniazda wynosi „00:00:59.9929996”. 
```

用英语它会像：

```
The socket connection was aborted. This could be caused by an error processing your message or a receive timeout being exceeded by the remote host, or an underlying network resource issue. Local socket timeout was „00:00:59.9929996”. 
```

服务器堆栈跟踪如下：

```
Server stack trace: 
   w System.ServiceModel.Channels.SocketConnection.ReadCore(Byte[] buffer, Int32 offset, Int32 size, TimeSpan timeout, Boolean closing)
   w System.ServiceModel.Channels.SocketConnection.Read(Byte[] buffer, Int32 offset, Int32 size, TimeSpan timeout)
   w System.ServiceModel.Channels.DelegatingConnection.Read(Byte[] buffer, Int32 offset, Int32 size, TimeSpan timeout)
   w System.ServiceModel.Channels.SessionConnectionReader.Receive(TimeSpan timeout)
   w System.ServiceModel.Channels.SynchronizedMessageSource.Receive(TimeSpan timeout)
   w System.ServiceModel.Channels.FramingDuplexSessionChannel.Receive(TimeSpan timeout)
   w System.ServiceModel.Channels.FramingDuplexSessionChannel.TryReceive(TimeSpan timeout, Message& message)
   w System.ServiceModel.Dispatcher.DuplexChannelBinder.Request(Message message, TimeSpan timeout)
   w System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)
   w System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)
   w System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)

Exception rethrown at [0]: 
   w System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
   w System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)
   w IService.GetEstates(EstateFilter filter)
   w ServiceClient.GetEstates(EstateFilter filter) 
```

我也将这些类用作 EF 中的 POCO 类。

这就是问题所在：如果我在没有加载位置的情况下发送房地产，它就可以正常工作。但是如果我想发送带有位置的房地产 WCFHostClient 会引发错误。

还有一个问题：如何通过 WCF IEnumerable of Estate 发送每个 Estate 包含 ICollection 的位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-28T19:32:41.620

对象树包含很多循环依赖的机会。尝试将此添加到位置

```
[DataContract(IsReference=true]
public class Location 
```

您可能还必须将其添加到 Advert 类中（广告 -> 位置 -> 广告）。您可能需要考虑对象树以最小化有效负载。

# java - 文件 I/O 错误

> ID：10436494
> 
> 赞同：1
> 
> 时间：2012-05-03T17:33:06.900
> 
> 标签：java, file-io

我刚开始使用 Murach 的 Se 6 中的示例进行文件 I/O 和im。这是我的代码。我是不是错过了什么。我知道后面的代码还有更多，但因为这是一个例子，这应该可以正常工作吗？

```
//Import import java.io.*; for use with the File I/O Methods.
import java.io.*;
public class MainApp 
{

    public static void main(String[] args) 
    {
    //Create a file object.
    File productFile = new File("product.txt");
    //Open a buffered output stream to allow write to file operations.
    PrintWriter out = new PrintWriter(
                      new BufferedWriter(
                      new FileWriter(productFile)));      

    out.println("java\tMurach's Beginning Java 2\t$49.99");
    out.close();

    BufferedReader in = new BufferedReader(
                        new FileReader(productFile));

    String line = in.readLine();
    System.out.println(line);

    out.close();

    }

} 
```

//回答

通过在我初始化主代码的末尾添加一个 throws 异常。甚至 txt 文件 products.txt 也像预期的那样在类文件夹中。//导入导入java.io.*; 用于文件 I/O 方法。

```
import java.io.*;
public class MainApp 
{

    public static void main(String[] args) throws Exception 
    {
    //Create a file object.
    File productFile = new File("product.txt");
    //Open a buffered output stream to allow write to file operations.
    PrintWriter out = new PrintWriter(
                      new BufferedWriter(
                      new FileWriter(productFile)));      

    out.println("java\tMurach's Beginning Java 2\t$49.99");
    out.close();

    BufferedReader in = new BufferedReader(
                        new FileReader(productFile));

    String line = in.readLine();
    System.out.println(line);

    out.close();

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T17:53:26.997

问题是对 java.io 包的一些调用会引发异常。

简单修复：将以下内容添加到您的方法签名中

```
 public static void main(String[] args) throws IOException 
```

几乎同样容易修复：添加 try/catch/finally 块。

```
public static void main(String[] args) 
{
    //Create a file object.
    File productFile = new File("product.txt");

    //Open a buffered output stream to allow write to file operations.
    PrintWriter out = null;
    try {   
        out = new PrintWriter(
                new BufferedWriter(
                        new FileWriter(productFile)));      

        out.println("java\tMurach's Beginning Java 2\t$49.99");
    }
    catch(IOException ex) {
        // todo exception handling

        System.out.println("ERROR! " + ex);

    }
    finally {
        out.close();

    }

    BufferedReader in = null;
    try {
        in = new BufferedReader(
                new FileReader(productFile));

        String line = in.readLine();
        System.out.println(line);
    }
    catch (IOException ex) {
        // todo more exception handling
        System.out.println("ERROR! " + ex);
    }
    finally {
        in.close();
    }

} 
```

编辑：你知道你要打`out.close()`两次电话吗？第二个应该是调用`in.close()`

# asp.net-mvc - EF SaveChanges 错误

> ID：10436500
> 
> 赞同：2
> 
> 时间：2012-05-03T17:33:42.373
> 
> 标签：asp.net-mvc, entity-framework

UPDATE 语句与 FOREIGN KEY 约束“FK_tblStmtTask_StmtBatchID”冲突。冲突发生在数据库“CRM”、表“dbo.tblStmtBatch”、列“ID”中。

该语句已终止

我在保存对“tblStmtTask”的修改时遇到此错误。我知道我有一个指向“tblStmtBatch”的外键，但我不知道为什么更改任务中不相关的列会对批次。

我如何破译这个错误的根本原因是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T19:02:07.340

在更新语句上放置一个断点。FK 属性将为空。为了找到设置为空的步骤，最好的办法是在实体的创建点下断点并单步执行，以便查明 FK 设置为空的位置。

如果 FK 属性在创建时为空，则映射存在问题。如果实体是使用 DefaultModelBinder 创建的，请确保您在表单中也提供了 FK 属性，例如使用`@Html.HiddenFor`HTML 帮助程序。

# ruby - 当引发异常并且程序停止执行时，哪个系统信号会发送到 ruby 程序？

> ID：10436501
> 
> 赞同：3
> 
> 时间：2012-05-03T17:33:44.930
> 
> 标签：ruby

每当我的程序停止执行（被 cmd-c 关闭或遇到异常时），我都想采取一些措施来正确关闭。

当我执行 cmd-c 时，我收到信号 TERM。当程序遇到引发的异常时发送什么信号？如何用 Signal.trap(...) 捕获它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T17:48:50.450

您可以将代码包装在一个`begin-ensure-end`块中。它将捕获异常和 CTRL-C。（您可以在 之前添加一个救援子句`ensure`）。

```
begin
  sleep 10 #try CTRL-C here
  raise "kaboom" #RuntimeError
ensure
  puts "This must be printed no matter what."
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T17:52:53.703

异常不是信号。Ruby 解释器处理用户代码中的所有异常；没有什么可以捕获的。

如果要处理异常，则需要在一个`rescue`块中进行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T17:51:41.237

异常的要点不是通过捕获信号，`Signal.trap`而是将可能引发异常的代码包装在`begin-rescue-end`块中。不过，您有更多选择：

```
begin
  # here goes the code that may raise an exception
rescue ThisError
  # this code is executed when 'ThisError' was raised
rescue ThatError, AnotherError
  # this code is executed when 'ThatError' or 'AnotherError' was raised
rescue
  # this code is executed when any other StandardError was raised
else
  # this code is executed when NO exception was raised
ensure
  # this code is always executed
end 
```

这里有一些更实际的例子来说明如何使用它：

```
def compute_something(x,y)
  raise ArgumentError, 'x must not be lower than 0' if x < 0
  x/y + y
end

begin
  compute_something(-10,5)
rescue ArgumentError
  puts "some argument is erroneous!"
end

puts "---"

x=100
y=0

begin
  compute_something(x,y)
rescue ZeroDivisionError
  puts "division by zero! trying to fix that..."
  y=1
  retry
else
  puts "everything fine!"
end

puts "---"

begin
  compute_something(1)
rescue => e
  puts "the following error occured:"
  puts e
end

puts "---"

begin
  exit
ensure
  puts "i am always called!"
end 
```

这输出：

```
some argument is erroneous!
---
division by zero! trying to fix that...
everything fine!
---
the following error occured:
wrong number of arguments (1 for 2)
---
i am always called! 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T17:59:19.507

您无法将异常作为信号捕获，但您可以在使用`'EXIT'`信号引发异常时执行某些操作：

```
Signal.trap('EXIT') do
  puts "Terminating..."
  shutdown()
end 
```

但是，我只是说您**可以**这样做；你真的应该使用`begin`and `rescue`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-04T00:41:44.117

作为上述解决方案的替代方案，您可以查看[at_exit](http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-at_exit)方法。

# wpf - 在分组的 vb.net 数据网格中使用复选框

> ID：10436502
> 
> 赞同：1
> 
> 时间：2012-05-03T17:33:46.193
> 
> 标签：wpf, vb.net, checkbox, wpfdatagrid, groupstyle

我有三种单独的复选框问题，都与它们在同一个数据网格中的使用有关。

1.  我已将数据表 , 加载`dtAll`到数据网格中`dgdList`, 并将每一列绑定到导入的数据。数据网格还有一个带有复选框的初始列。如何确定已检查了哪些数据行。预期的功能是让用户标记两个重复项并合并在一起。每当检查复选框列时，我都需要能够从数据表或datagrid收集行数据

2.  当我将我的数据网格分组到下面的表格中时，它以某种方式关闭了我检查多个复选框的能力。每次我选择一个新行时，它都会清除所有以前的复选框。我希望能够选中多行中的复选框。（此外，我必须单击两次，一次选择行，一次将复选框的值编辑为 true - 如果我可以单击一下，那就太好了）。

    ```
    Dim myView As System.ComponentModel.ICollectionView
    myView = CollectionViewSource.GetDefaultView(dtAll)
    myView.GroupDescriptions.Add(New PropertyGroupDescription("GROUP ID"))
    dgdList.ItemsSource = dtAll.DefaultView 
    ```

3.  我在组标题中添加了一个复选框。单击时，我希望它填写该组内所有行中的每个复选框。有什么办法我也可以做到这一点吗？如果有帮助，下面是我用来拆分记录组的 Xaml 代码

    ```
     <DataGrid.GroupStyle>
        <GroupStyle>
            <GroupStyle.HeaderTemplate>
                <DataTemplate>
                    <StackPanel>
                        <TextBlock Text="{Binding Path=Name}" />
                    </StackPanel>
                </DataTemplate>
            </GroupStyle.HeaderTemplate>
            <GroupStyle.ContainerStyle>
                <Style TargetType="{x:Type GroupItem}" x:Name="Style1">
                    <Setter Property="Template" x:Name="Setter1">
                        <Setter.Value>
                            <ControlTemplate TargetType="{x:Type GroupItem}" x:Name="ControlTemplate1">
                                <Expander IsExpanded="True" Name="Expander1">
                                    <Expander.Header>
                                        <StackPanel Orientation="Horizontal">
                                            <CheckBox Name="CheckBox9" />
                                            <TextBlock Text=" Exact Name Match Group #"/>
                                            <TextBlock Text="{Binding Path=Name}" />           
                                        </StackPanel>
                                    </Expander.Header>
                                    <ItemsPresenter />
                                </Expander>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
            </GroupStyle.ContainerStyle>
        </GroupStyle>
    </DataGrid.GroupStyle> 
    ```

# javascript - onclick 第二次点击

> ID：10436506
> 
> 赞同：0
> 
> 时间：2012-05-03T17:34:02.210
> 
> 标签：javascript, onclick

不确定这是否可以保持代码简单，但我试图让它有一个图像，当你点击它时，它会转到一个新图像。然后当您单击该图像时，它会返回到原始图像。我的代码是：

```
function save_data()
{
if ( document.images.save.src == "saved.png") document.images.save.src="save.png";
if (document.images.save.src == "save.png") document.images.save.src="saved.png";
}

<img id="save"  onclick="save_data()" src="save.png"> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T17:42:45.487

它可以简化。

使用

```
<img id="save"  onclick="save_data(this)" src="save.png">` 
```

你可以做

```
function save_data(img)
{
  img.src = /saved/i.test(img.src) ? 'save.png' : 'saved.png';
} 
```

如果这不起作用，则可能与`saved.png`不在 html 所在路径中的事实有关。因此请尝试使用完整的 URL：

```
function save_data(img)
{
  var imgpath = 'http://yoursite.com/imgpath/';
  img.src = imgpath + (/saved/i.test(img.src) ? 'save.png' : 'saved.png');
} 
```

注意：最好[不显眼](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)地分配点击处理程序（另请参阅这个[SO question](https://stackoverflow.com/questions/5871640/why-is-using-onclick-in-html-a-bad-practice)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T17:42:39.107

`if ( document.images.save.src == "saved.png")`- 这不起作用，因为`.src`返回图像的完整路径，而不仅仅是文件名。例如，`http://site.com/path/images/saved.png`。

尝试匹配子字符串。

```
function save_data()
{
if ( document.images.save.src.indexOf("saved.png") != -1) document.images.save.src="save.png";
if (document.images.save.src.indexOf("save.png") != -1) document.images.save.src="saved.png";
} 
```

# c# - 检查类型而不是 null 是一个合理的选择吗？

> ID：10436508
> 
> 赞同：5
> 
> 时间：2012-05-03T17:34:10.127
> 
> 标签：c#, .net, null

我的一位（高级）同事在他的代码中做了一些非常奇怪的事情。

他不是检查变量是否为空，而是检查类型。而且因为

> null 是 FooType

实际上返回false，这有效。

```
public class Foo
{
    private string _bar = null;

    public string Bar
    {
        get
        {
            // strange way to check for null
            return (_bar is string) ? _bar : "";
        }
        set { _bar = value; }
    }
} 
```

我认为这是糟糕的编码，Resharper 似乎同意我的看法。有什么理由这样写支票吗？

这是检查变量的有效方法吗？或者这可以被认为是糟糕的风格，甚至在某些特殊情况下可能是有害的？

我不想面对他，除非我确定这实际上没有意义。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-03T17:36:35.157

这不是一个好方法。更好的方法是：

```
return _bar ?? string.Empty; 
```

当您阅读您同事的代码时，您是否清楚他正在寻找空值？不，那不是一个好的选择。可能“is”运算符首先要做的就是检查 null 然后返回 false。因此，自己做会变得更干净。或者只使用空合并运算符

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T17:36:41.710

我认为这段代码完全令人困惑，永远不会使用它。 `_bar`被声明为 a`string`所以这种类型检查只是在乞求人们不要理解代码。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-03T17:36:48.067

是的，这有点奇怪。为什么不直接写：

```
return _bar ?? "" ; 
```

当我需要做这样的事情时，我有一个小班来处理这些细节：

```
public class DefaultableValue<T>
{
    private T m_Value = default(T);
    public T Value
    {
        get
        {
            if (IsInvalidPredicate(m_Value))
            {
                m_Value = IfDefaultValueFunc();
            }
            return m_Value;
        }
    }
    private Predicate<T> IsInvalidPredicate { get; set; }
    private Func<T> IfDefaultValueFunc { get; set; }
    public static implicit operator T(DefaultableValue<T> property)
    {
        return property.Value;
    }
    public DefaultableValue(Predicate<T> isInvalidPredicate,Func<T> ifDefaultFunc)
        : this(default(T), isInvalidPredicate, ifDefaultFunc)
    {
    }
    public DefaultableValue(T initValue, Predicate<T> isInvalidPredicate, Func<T> ifDefaultFunc)
    {
        this.m_Value = initValue;
        this.IsInvalidPredicate = isInvalidPredicate;
        this.IfDefaultValueFunc = ifDefaultFunc;
    }
} 
```

然后我的课看起来像

```
class Test
{
    DefaultableValue<string> AString { get; set; }

    public Test(string initialValue)
    {
        this.AString = new DefaultableValue<string>(initialValue, 
            (value) => string.IsNullOrWhiteSpace(value),
            () => string.Empty);
    }
}

....
var test = new Test(null);
var someString = test.AString; // = "" not null 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T17:44:17.257

如果上述公共财产被声明为 return`object`而不是`string`，则上述内容可能是有意义的。但是，因为它返回字符串，所以这种类型的检查没有意义。如果你想返回一个空字符串，你可以这样做：

```
public class Foo 
{ 
    private string _bar = null; 

    public string Bar 
    { 
        get 
        {  
            return (String.IsNullOrWhitespace(_bar)) ? "": _bar; 
        } 
        set { _bar = value; } 
    } 
} 
```

# objective-c - UINavigationController 作为 ModalView

> ID：10436515
> 
> 赞同：1
> 
> 时间：2012-05-03T17:34:32.167
> 
> 标签：objective-c, xcode, uinavigationcontroller, modalviewcontroller

我的应用程序类 UINavigationController（带有 NIB）中有我想将其作为 ModalView 打开。

我这样做：（ColorInfo 就是这个 UINavigationController 类）

```
ColorInfo *InfoScreen = [[ColorInfo alloc] initWithNibName:@"ColorInfo" bundle:[NSBundle mainBundle]];
[InfoScreen setModalTransitionStyle:UIModalTransitionStyleCrossDissolve];
[self presentModalViewController:InfoScreen animated:YES]; 
```

它向我显示了一个空的 UINavigtionController 元素。请告诉我如何在 ModalView 中打开 ColorInfo（作为 UINavigationController），我将能够在其中导航？我以为我可以使用所有 pushViewController 方法完成 ColorInfo，然后在 ModalView 中的另一个屏幕上打开它。

告诉我如何达到这个效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T18:11:56.350

根据您所说，您在 ColorInfo 中继承了 UINavigationController，这不是您想要的。您希望 ColorInfo 像这样成为 UINavigationController 的根视图

```
 ColorInfo *InfoScreen = [[ColorInfo alloc] initWithNibName:@"ColorInfo" bundle:[NSBundle mainBundle]];
UINavigationController *nav = [[UINavigationController alloc]   initWithRootViewController:InfoScreen];
[self presentModalViewController:nav animated:YES]; 

```

我建议您阅读导航控制器文档以获得更清晰的信息。

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T18:17:09.780

将此与 InfoScreen 控制器一起使用，并且不要继承 UINavigationController ...

```
UINavigationController* navController = [[UINavigationController alloc] initWithRootViewController:InfoScreen];
[navController setModalTransitionStyle:UIModalTransitionStyleCrossDissolve];
[self presentModalViewController:InfoScreen animated:YES]; 
```

# python - 创建每个实例的属性描述符？

> ID：10436516
> 
> 赞同：9
> 
> 时间：2012-05-03T17:34:32.490
> 
> 标签：python, metaprogramming, propertydescriptor

通常 Python 描述符被定义为类属性。但就我而言，我希望每个对象实例都有不同的集合描述符，这些描述符取决于输入。例如：

```
class MyClass(object):
  def __init__(self, **kwargs):
    for attr, val in kwargs.items():
      self.__dict__[attr] = MyDescriptor(val) 
```

每个对象都有不同的属性集，这些属性在实例化时决定。由于这些是一次性对象，因此首先对它们进行子类化并不方便。

```
tv = MyClass(type="tv", size="30")
smartphone = MyClass(type="phone", os="android")

tv.size   # do something smart with the descriptor 
```

将描述符分配给对象似乎不起作用。如果我尝试访问该属性，我会得到类似

```
<property at 0x4067cf0> 
```

你知道为什么这不起作用吗？有什么解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T17:43:14.587

这不起作用，因为您必须将描述符分配给对象的类。

```
class Descriptor:

    def __get__(...):
        # this is called when the value is got

    def __set__(...
    def __del__(... 
```

如果你写

```
obj.attr
=> type(obj).__getattribute__(obj, 'attr') is called
=> obj.__dict__['attr'] is returned if there else:
=> type(obj).__dict__['attr'] is looked up
if this contains a descriptor object then this is used. 
```

所以它不起作用，因为类型字典是查找描述符而不是对象字典。

有可能的解决方法：

1.  将描述符放入类并使其使用例如 obj.xxxattr 来存储值。如果只有一个描述符行为，则此方法有效。

2.  覆盖**setattr**和**getattr**和**delattr**以响应描述符。

3.  将一个描述符放入响应存储在对象字典中的描述符的类中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T18:02:59.637

您以错误的方式使用描述符。

描述符在实例级别上没有意义。毕竟`__get__`/`__set__` 方法使您可以访问`instance`该类。

在不知道你到底想做什么的情况下，我建议你将每个实例的逻辑放在`__set__`方法中，通过检查谁是“调用者/实例”并采取相应的行动。

否则，请告诉我们您要达到的目标，以便我们提出替代解决方案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-04T11:11:30.170

`exec`我通过构建一个类来动态创建实例。这可能适合您的用例。

```
def make_myclass(**kwargs):

    class MyDescriptor(object):
        def __init__(self, val):
            self.val = val

        def __get__(self, obj, cls):
            return self.val

        def __set__(self, obj, val):
            self.val = val

    cls = 'class MyClass(object):\n{}'.format('\n'.join('    {0} = MyDescriptor({0})'.format(k) for k in kwargs))

    #check if names in kwargs collide with local names
    for key in kwargs:
        if key in locals():
            raise Exception('name "{}" collides with local name'.format(key))

    kwargs.update(locals())
    exec(cls, kwargs, locals())
    return MyClass() 
```

测试;

```
In [577]: tv = make_myclass(type="tv", size="30")

In [578]: tv.type
Out[578]: 'tv'

In [579]: tv.size
Out[579]: '30'

In [580]: tv.__dict__
Out[580]: {} 
```

但是实例属于不同的类。

```
In [581]: phone = make_myclass(type='phone')

In [582]: phone.type
Out[582]: 'phone'

In [583]: tv.type
Out[583]: 'tv'

In [584]: isinstance(tv,type(phone))
Out[584]: False

In [585]: isinstance(phone,type(tv))
Out[585]: False

In [586]: type(tv)
Out[586]: MyClass

In [587]: type(phone)
Out[587]: MyClass

In [588]: type(phone) is type(tv)
Out[588]: False 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-28T16:50:37.847

这看起来像是[命名元组的用例](http://docs.python.org/2/library/collections.html#collections.namedtuple)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-02-26T17:17:19.713

它不起作用的原因是 Python 仅在查找类的属性时检查描述符，而不是实例；有问题的方法是：

*   [`__getattribute__`](https://docs.python.org/3/reference/datamodel.html#object.__getattribute__)
*   [`__setattr__`](https://docs.python.org/3/reference/datamodel.html#object.__setattr__)
*   [`__delattr__`](https://docs.python.org/3/reference/datamodel.html#object.__delattr__)

可以在类上覆盖这些方法，以便在实例和类上实现[描述符协议：](https://docs.python.org/2/howto/descriptor.html#descriptor-protocol)

```
# do not use in production, example code only, needs more checks
class ClassAllowingInstanceDescriptors(object):
    def __delattr__(self, name):
        res = self.__dict__.get(name)
        for method in ('__get__', '__set__', '__delete__'):
            if hasattr(res, method):
                # we have a descriptor, use it
                res = res.__delete__(name)
                break
        else:
            res = object.__delattr__(self, name)
        return res
    def __getattribute__(self, *args):
        res = object.__getattribute__(self, *args)
        for method in ('__get__', '__set__', '__delete__'):
            if hasattr(res, method):
                # we have a descriptor, call it
                res = res.__get__(self, self.__class__)
        return res
    def __setattr__(self, name, val):
        # check if object already exists
        res = self.__dict__.get(name)
        for method in ('__get__', '__set__', '__delete__'):
            if hasattr(res, method):
                # we have a descriptor, use it
                res = res.__set__(self, val)
                break
        else:
            res = object.__setattr__(self, name, val)
        return res
    @property
    def world(self):
        return 'hello!' 
```

当上面的类被如下使用时：

```
huh = ClassAllowingInstanceDescriptors()
print(huh.world)
huh.uni = 'BIG'
print(huh.uni)
huh.huh = property(lambda *a: 'really?')
print(huh.huh)
print('*' * 50)
try:
    del huh.world
except Exception, e:
    print(e)
print(huh.world)
print('*' * 50)
try:
    del huh.huh
except Exception, e:
    print(e)
print(huh.huh) 
```

结果是：

> 你好！
> 
> 大的
> 
> 真的吗？
> 
> * * *
> 
> 不能删除属性
> 
> 你好！
> 
> * * *
> 
> 不能删除属性
> 
> 真的吗？

# java - 可执行 JAR 忽略它自己的 Class-Path 属性

> ID：10436517
> 
> 赞同：13
> 
> 时间：2012-05-03T17:34:37.007
> 
> 标签：java, jar, classpath

我使用了在[Maven 中找到的说明 - 如何将任意类路径条目添加到 jar](https://stackoverflow.com/a/5893391/14731)以将任意条目添加到`Class-Path`属性。这是我的`MANIFEST.MF`文件：

```
Manifest-Version: 1.0
Class-Path: jace-runtime.jar
Main-Class: org.jace.examples.Test 
```

我定义 org.jace.examples.Test 如下：

```
public class Test
{
    public static void main(String[] args)
    {
        System.out.println("classpath: " + System.getProperty("java.class.path"));
        System.out.println("PeerExample: " + Class.forName("org.jace.util.ShutdownHook"));
    }
} 
```

其中在`org.jace.util.ShutdownHook`中定义`jace-runtime.jar`。当我调用时，`java -jar peer_example1.jar`我得到以下输出：

`classpath: peer_example1.jar` 线程“主”java.lang.ClassNotFoundException 中的异常：org.jace.util.ShutdownHook

换句话说，Java 正在将可执行 JAR 文件添加到类路径中，但忽略`Class-Path`. 如果我调用`java -cp jace-runtime.jar;peer_example1.jar org.jace.examples.Test`我得到预期的输出：

`classpath: jace-runtime.jar;peer_example1.jar`

有任何想法吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-03T18:19:52.257

回答我自己的问题：

1.  添加任意条目`Class-Path`本身就可以了。当您使用以下方法启用 JAR 索引时会出现问题：

    ```
    <configuration>
      <archive>
        <index>true</index>
      </archive>
    </configuration> 
    ```

    Maven 会从`META-INF/INDEX.LIST`.

2.  当您在运行时使用 JAR 时，Java 将查看 INDEX.LIST 以查找类，而不是 MANIFEST.MF。

3.  因为您的条目从 INDEX.LIST 中丢失，所以无论清单上说什么，类加载器都不会找到它们。

一个简单的解决方法是禁用 JAR 索引。我不确定如何在`Class-Path`启用索引的情况下注入任意值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-05T23:05:29.700

对于那些可能不知道的人，可执行存档机制采用清单类路径并使用它来加载存档**外部**的类。

**因此，如果您期望一个带有 WEB-INF/classes 清单类路径的 WAR 以在存档内**的 WEB-INF/classes 条目中查找类，那么您将感到失望。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-05-03T17:59:48.890

根据 jar 选项的 tooldocs 页面 -[链接到文档](http://docs.oracle.com/javase/6/docs/technotes/tools/windows/java.html "链接到文档")

> 使用此选项时，JAR 文件是所有用户类的来源，其他用户类路径设置将被忽略。

# javascript - 对象的对象？或者嵌套对象？在javascript中

> ID：10436519
> 
> 赞同：0
> 
> 时间：2012-05-03T17:34:38.767
> 
> 标签：javascript, nested

我希望能够通过调用类似的东西来填充数组。

```
necessaryLevel('a','b').necessaryLevel2('name',[X,Y,Z]) 
```

以下作为一种可能性，

```
necessaryLevel('a','b').necessaryLevel2('name',[X,Y,Z]).option(5) 
```

我还需要 .option() 只能从 requiredLevel2 访问，也就是说，在代码的上下文中它应该是不可能编写的，

```
necessaryLevel('a','b').option(5) 
```

我对javascript相当陌生，并且刚刚开始学习对象和继承。这里也嵌套了正确的术语吗？

任何指针（没有双关语）？

例子：

```
tag('a','nameVal').value('function_name',[funarg1,funarg2]) 
```

输出：

```
['a','nameVal','function_name',[funarg1,funarg2]] 
```

如果添加 .option 我可能会得到类似的东西

```
tag('a','nameVal').value('function_name',[funarg1,funarg2]).option(2) 
```

输出：

```
['a','nameVal','function_name1',[funarg11,funarg21],'function_name2',[funarg12,funarg22]] 
```

编辑：

玩了一下我有这个（未完成）：

```
function foo(x){
     return {
          bar:function(y){return [x,y] };
      }
 }

 > foo(9.9).bar('la')
 [ 9.9, 'la' ] 
```

我遇到的问题是添加了一个选项函数，以便我可以重复进入 bar() 的内容，例如：

```
 > foo(9.9).bar('la').option(4)
 [ 9.9, 'la', 'la', 'la', 'la' ] 
```

并且仍然可以灵活地输入 foo(9.9).bar('la')

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T19:57:04.627

这里有一些东西可以帮助你开始：

# 例子

```
var tag = ( function ( hier ) {

  var array = [];

  var calls = [];

  var repeater = function () {

    return function ( times ) {

      while ( calls.length < times ) {

        hier[1].apply( this, calls.slice( -1 )[0] );

      }
      // for

      return array;

    };

  };

  var adder = function ( child_name, child, repeat ) {

    return function () {

      var args = Array.prototype.slice.call( arguments, 0 );

      var orig_args = [].concat( args );

      if ( repeat ) {

        args[0] += calls.length + 1;

        calls.push( orig_args );

      }

      array = array.concat( args );

      var return_val = [].concat( array );

      if ( child_name !== undefined ) {

        return_val[ child_name ] = child;

      }

      return return_val;

    };

  };

  var last_child, args;

  hier.reverse().forEach( function ( child, index, hier ) {

    var method = index ? adder : repeater;

    args = last_child || [];

    if ( index === 1 ) {

      args.push( true );

    }

    hier[ index ] = method.apply( this, args );

    last_child = [ child, hier[ index ] ];

  } );

  return hier.pop();

} )( [ 'tag', 'value', 'option' ] ); 
```

在这个版本中，数组本身被返回，但如果你不想覆盖原生属性或方法`Array`，你必须小心命名你的属性（例如`value`，`option`）。

# JS对象模型

> 这里也嵌套了正确的术语吗？

有点儿。在 JS 中，函数是第一类对象，这意味着您可以将它们传递给函数、返回它们、将它们分配给对象的属性等。您要求有一个函数`tag`返回具有`value`属性的对象，这是一个函数，它返回一个具有`option`属性的对象，该属性是一个函数。

如果您只有嵌套对象，则层次结构将如下所示。用于实例化新的通用对象的`{...}`对象字面量语法，用于代替 JavaScript 中的哈希/映射/字典，并且是无序的。

```
var tag = {

  value : {

    option : {}

  }

}; 
```

因此，例如，您可以访问`option`：

```
tag.value.option 
```

您要求一个函数层次结构，每个函数都返回一个具有函数作为属性的对象。因此，在这种情况下，要到达`option`，您必须这样做：

```
tag().value().option 
```

在这种情况下，`option`是一个函数，而不是一个通用对象。

# JS函数表达式

> 当你`var a = (function(heir){...})(['a','b','c'])`用 parathesis 做的时候它叫什么？

它的一个名称是“立即调用函数表达式 (IIFE)”（见下文）。

下面是一个函数表达式。它创建一个函数对象，您可以将其传递给函数、保存在变量或对象属性中等。

```
function ( hier ) {...} 
```

您还可以就地执行函数表达式而不将其分配给任何内容：

```
( function ( hier ) {...} )( ['a','b','c'] ) 
```

执行函数表达式。如果需要，您当然可以分配返回值：

```
var whatever = ( function ( hier ) {...} )( ['a','b','c'] ); 
```

函数表达式周围的括号有几个原因。

1.  JavaScript 中的函数语句和函数表达式之间的区别可能很微妙。要像这样就地调用函数，它必须是一个表达式，而括号是确保它是的一种方式。以下是其他人的例子：

    使用运算符为其添加前缀：

    ```
    +function ( hier ) {...}( ['a','b','c'] ) 
    ```

    将其放在作业的右侧：

    ```
    var whatever = function ( hier ) {...}( ['a','b','c'] ); 
    ```

2.  即使确定它将被评估为表达式，就像在上一个示例中一样，有些人认为无论如何使用括号是一个很好的约定，以使函数的返回值而不是函数本身更加明显，是表达式的值（在这种情况下是分配给变量的值）。

关于这个主题有一篇很好的文章： Ben Alman 的[Immediately-Invoked Function Expression (IIFE)](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)，他建议用这个名称来调用这个构造 (IIFE)。

# html - 如何在a中叠加文本 在图像上

> ID：10436520
> 
> 赞同：0
> 
> 时间：2012-05-03T17:34:38.910
> 
> 标签：html, css, z-index, overlap

我有一个带有`<p>`标签内文本的 div 和一个 PNG 图像。我希望图像位于 div 的左侧，文本重叠。我曾尝试使用 z-index，但收效甚微。

HTML 代码：

```
<div class="caption">
    <img src="images/stain.png" id="stain">
    <p>The BA New Media course which I am studying is run by the Institute of Comminications Studies (ICS) at The University of Leeds. The Institute of Communications Studies is an internationally renowned centre for teaching and research in communications, media and culture. Their research is multidisciplinary and has particular strengths in the areas of cultural industries, international communication and political communication. <a href="http://ics.leeds.ac.uk/about/" target="_blank"><strong class="more">Read More...</strong></a>
</div> 
```

CSS 代码：

```
.caption {
    width:80%;
    display:block;
    margin:auto;
    margin-top:5%;
    z-index:5;
}

#stain {
    z-index:1;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T17:59:01.783

如果我了解您的要求，您可以将您的图像设置为`<div>`背景图像.. 在 css 中，如下所示：

```
.caption {
    background-image: url(images/stain.png);
    background-repeat:no-repeat;
    width:80%;
    display:block;
    margin:auto;
    margin-top:5%;
} 
```

并`<img>`从`<div>`

就像我评论中的例子一样。

[编辑]
或者，如果您需要更多控制，请使用`position: relative`css 等：

CSS：

```
 .caption {
        width:80%;
        display:block;
        margin:auto;
        margin-top:5%;
    }

    img.floaty {
      display:inline;
         float: left;
    }

    .blurb {
       position: relative;
        top:20px;
        left: -50px;
    } 
```

html:

```
<div class="caption">
    <img class="floaty" src="images/stain.png" id="stain" />
    <p class="blurb">The BA New Media course which I am studying is run by the Institute of Comminications Studies (ICS) at The University of Leeds. The Institute of Communications Studies is an internationally renowned centre for teaching and research in communications, media and culture. Their research is multidisciplinary and has particular strengths in the areas of cultural industries, international communication and political communication. <a href="http://ics.leeds.ac.uk/about/" target="_blank"><strong class="more">Read More...</strong></a></p>
</div> 
```

[例如](http://jsfiddle.net/b3ybQ/1/).

# iphone - 在 iPhone 中发送电子邮件的错误

> ID：10436521
> 
> 赞同：0
> 
> 时间：2012-05-03T17:34:47.003
> 
> 标签：iphone, objective-c, ios, ipad

我正在尝试创建发送电子邮件的应用程序我使用了 SKPSMTPMessage、NSStream+SKPSMTPExtensions、NSData+Base64Additions、HSK_CFUtilities、Base64Transcoder 等类，但它给了我以下错误

```
Undefined symbols for architecture i386:
"_OBJC_CLASS_$_SKPSMTPMessage", referenced from:
  objc-class-ref in MFViewController.o
"_kSKPSMTPPartContentTransferEncodingKey", referenced from:
  -[MFViewController sendMail:] in MFViewController.o
"_kSKPSMTPPartContentTypeKey", referenced from:
  -[MFViewController sendMail:] in MFViewController.o
"_kSKPSMTPPartMessageKey", referenced from:
  -[MFViewController sendMail:] in MFViewController.o
"_CFHostCreateWithName", referenced from:
  +[NSStream(SKPSMTPExtensions) getStreamsToHostNamed:port:inputStream:outputStream:] in    NSStream+SKPSMTPExtensions.o
  +[NSStream(SKPSMTPExtensions) getStreamsToHostNamed:port:inputStream:outputStream:] in  SKPSMTPMessage.o
"_CFStreamCreatePairWithSocketToCFHost", referenced from:
  +[NSStream(SKPSMTPExtensions) getStreamsToHostNamed:port:inputStream:outputStream:] in NSStream+SKPSMTPExtensions.o
  +[NSStream(SKPSMTPExtensions) getStreamsToHostNamed:port:inputStream:outputStream:] in SKPSMTPMessage.o
 ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

请记住，我正在使用 Xcode 4.3 ，我该怎么做才能解决这个问题？

添加 CFNetwork 框架和 SystemConfiguration 框架后，错误数从 6 个减少到 4 个，现在是

```
Undefined symbols for architecture i386:
"_OBJC_CLASS_$_SKPSMTPMessage", referenced from:
  objc-class-ref in MFViewController.o
"_kSKPSMTPPartContentTransferEncodingKey", referenced from:
  -[MFViewController sendMail:] in MFViewController.o
"_kSKPSMTPPartContentTypeKey", referenced from:
  -[MFViewController sendMail:] in MFViewController.o
"_kSKPSMTPPartMessageKey", referenced from:
  -[MFViewController sendMail:] in MFViewController.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T18:22:02.967

此错误消息意味着这些类在您尚未链接到项目的框架中搜索某些对象。[在这里](http://www.iphonedevsdk.com/forum/iphone-sdk-development-advanced-discussion/14038-does-anyone-skpsmtpmessage-project.html)你可以找到你需要的框架：CFNetwork 框架。

我希望它有帮助！

**编辑**

其他 4 个错误可能是由 SKPSMT 类的错误导入引起的。如果这些类作为库下载，您还需要将您的应用程序与该库链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T09:14:55.373

尝试添加以下链接器标志：

```
OTHER_LDFLAGS = -lz -lxml2 -ltidy -ObjC 
```

# iphone - 是否可以追溯获取某人安装或首次启动我的应用程序的日期？

> ID：10436522
> 
> 赞同：2
> 
> 时间：2012-05-03T17:34:54.667
> 
> 标签：iphone, ios, xcode

我有一个想要实现的功能，它需要我获取应用程序首次打开或安装的日期。对于未来的安装，我可以通过确保在 NSUserDefaults 中保存第一个启动日期来做到这一点，但是对于那些已经安装了我的应用程序的人，有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T18:19:18.323

您也许可以使用 NSFileManager 并读取 Documents 目录的 creationDate 属性：

```
NSString *libraryDirectory = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject];
NSDictionary *fileAttributeForDirectory = [[NSFileManager defaultManager] attributesOfItemAtPath: libraryDirectory error: nil];
NSLog(@"creation date = %@", [fileAttributeForDirectory objectForKey: NSFileCreationDate]); 
```

# javascript - 从 JavaScript 中的字符串中删除长破折号？

> ID：10436523
> 
> 赞同：17
> 
> 时间：2012-05-03T17:34:56.827
> 
> 标签：javascript, regex, character-encoding

我在我的网络应用程序中遇到了一个错误，我不确定如何修复。

文本框将长破折号作为其内容的一部分发送给我（你知道，MS Word 有时会自动插入特殊的长破折号）。但是，我找不到替换它的方法；因为如果我尝试复制该字符并将其放入 JavaScript str.replace 语句中，它不会正确呈现并且会破坏脚本。

我怎样才能解决这个问题？

杀死它的特定角色是-。

此外，如果它有帮助，我会将值作为 GET 参数传递，然后将其编码为 XML 并将其发送到服务器。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-05-03T17:38:19.760

此代码可能会有所帮助：

```
text = text.replace(/\u2013|\u2014/g, "-"); 
```

它将**所有** `&ndash;`(–) 和`&mdash;`(-) 符号替换为简单的破折号 (-)。

**演示：http:** [//jsfiddle.net/F953H/](http://jsfiddle.net/F953H/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T17:38:52.900

该角色称为[Em Dash](http://en.wikipedia.org/wiki/Dash#Em_dash)。您可以像这样替换它：

```
str.replace('\u2014', '');​​​​​​​​​​ 
```

这是一个示例小提琴：http: [//jsfiddle.net/x67Ph/](http://jsfiddle.net/x67Ph/)

这`\u2014`称为[unicode 转义序列](https://developer.mozilla.org/en/Core_JavaScript_1.5_Guide/Core_Language_Features#Unicode_escape_sequences)。这些允许通过其代码指定一个 unicode 字符。2014 年恰好是 Em Dash。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T17:40:16.710

您需要担心三个 unicode 长破折号：[http ://en.wikipedia.org/wiki/Dash](http://en.wikipedia.org/wiki/Dash)

您可以使用 unicode 转义直接替换 unicode 字符：

```
'—my string'.replace( /[\u2012\u2013\u2014\u2015]/g, '' ) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-03T17:52:35.603

可能会有更多这样的字符，您可能希望稍后在 html 中重用它们。一种更通用的处理方法可能是将所有“扩展字符”替换为它们的 html 编码等效项。你可以这样做：

```
[yourstring].replace(/[\u0080-\uC350]/g, 
                      function(a) {
                        return '&#'+a.charCodeAt(0)+';';
                      }
); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-12-15T10:19:35.287

借助 ECMAScript 2018 标准，JavaScript`RegExp`现在支持 Unicode 属性（或类别）类。其中之一`\p{Dash}`，匹配任何 Unicode 字符点，即破折号：

```
/\p{Dash}/gu 
```

在 ES5 中，等价的表达式是：

```
/[-\u058A\u05BE\u1400\u1806\u2010-\u2015\u2053\u207B\u208B\u2212\u2E17\u2E1A\u2E3A\u2E3B\u2E40\u2E5D\u301C\u3030\u30A0\uFE31\uFE32\uFE58\uFE63\uFF0D]|\uD803\uDEAD/g 
```

请参阅[Unicode 实用程序参考](https://util.unicode.org/UnicodeJsps/list-unicodeset.jsp?a=%5Cp%7BDash%7D&abb=on&esc=on&g=&i=)。

以下是一些 JavaScript 示例：

```
const text = "Dashes: \uFF0D\uFE63\u058A\u1400\u1806\u2010-\u2013\uFE32\u2014\uFE58\uFE31\u2015\u2E3A\u2E3B\u2053\u2E17\u2E40\u2E5D\u301C\u30A0\u2E1A\u05BE\u2212\u207B\u208B\u3030";
const es5_dash_regex = /[-\u058A\u05BE\u1400\u1806\u2010-\u2015\u2053\u207B\u208B\u2212\u2E17\u2E1A\u2E3A\u2E3B\u2E40\u2E5D\u301C\u3030\u30A0\uFE31\uFE32\uFE58\uFE63\uFF0D]|\uD803\uDEAD/g;
console.log(text.replace(es5_dash_regex, '-')); // Normalize each dash to ASCII hyphen
// => Dashes: ----------------------------
```

要匹配一个或多个破折号并替换为单个字符（或一次性删除）：

```
/\p{Dash}+/gu
/(?:[-\u058A\u05BE\u1400\u1806\u2010-\u2015\u2053\u207B\u208B\u2212\u2E17\u2E1A\u2E3A\u2E3B\u2E40\u2E5D\u301C\u3030\u30A0\uFE31\uFE32\uFE58\uFE63\uFF0D]|\uD803\uDEAD)+/g 
```

# xsd - JAXB 将元素标记为已弃用

> ID：10436525
> 
> 赞同：4
> 
> 时间：2012-05-03T17:35:01.787
> 
> 标签：xsd, jaxb

在 JaxB 中，我们需要从一种模式形式转移到另一种模式形式，我们希望能够通过 xsd:documentation 元素或其他内容中的一些简单注释来弃用 xsd 中的内容。有没有办法让 JAXB 用 @Deprecated 标记这些生成的类和方法，以便开发人员可以轻松地看到哪些冷仍然需要更改？

谢谢，院长

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T18:53:40.207

我会推荐注释插件：[注释插件](https://github.com/highsource/jaxb2-annotate-plugin)（编辑：原始[链接](https://web.archive.org/web/20120120064728/http://confluence.highsource.org/display/J2B/Annotate+Plugin)不再有效）。

您将看到几个示例，包括弃用、警告抑制等。

通常建议使用 appinfo 下的特殊标记而不是文档来执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T18:13:57.220

我终于让我的所有工作都很好......谢谢！！！！完整的代码在这里

[JAXB 外部自定义绑定 XJC 问题 - 解析结果为空节点](https://stackoverflow.com/questions/4785454/jaxb-external-custom-binding-xjc-issue-parsing-results-in-empty-node/10565944#10565944)

# javascript - jquery.clone() 元素的属性

> ID：10436530
> 
> 赞同：0
> 
> 时间：2012-05-03T17:35:22.747
> 
> 标签：javascript, jquery, vml

我创建 vml 元素 v:shape，添加样式和属性，然后附加它。

```
var shape = document.createElement("v:shape");
//some attrs
shape.setAttribute("coordorigin", "0 0");
shape.setAttribute("coordsize", w + " " + h);
shape.setAttribute("stroked", "false");
//...
//some styles
shape.style.position = "absolute";
shape.style.top = 0 + "px";
shape.style.left = 0 + "px";
shape.style.width = w + "px";
shape.style.height = h + "px";
//...
$(element).append(shape); 
```

我想将相同的形状附加到另一个地方

```
var shape2 = $(shape).clone(true); 
```

但它只克隆样式

```
alert(shape2.css("position")); // absolute
alert(shape2.attr("coordsize")); // undefined 
```

我该怎么办？请帮助我）
**[编辑]** 感谢您的回答）这对我来说很奇怪......我注意到当我将它附加到元素时它可以工作如果`var element = document.createElement("p");`但我得到我的元素`$(selector).each(function(index, element) {`即使我将它附加到正文它也没有工作（

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T17:43:38.103

如果我在缺失值中做假，它对我有用：http: [//jsfiddle.net/JAAulde/hKCHX/1/](http://jsfiddle.net/JAAulde/hKCHX/1/)（在 Safari、Chrome 和 Firefox 中尝试过）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T17:58:17.293

从文档中？

> .clone( [withDataAndEvents] )
> 
> withDataAndEvents - 一个布尔值，指示是否应将事件处理程序与元素一起复制。
> 
> .clone( [withDataAndEvents] [, deepWithDataAndEvents] )
> 
> withDataAndEvents - 一个布尔值，指示是否应将事件处理程序和数据与元素一起复制。
> 
> 默认值为假。
> 
> deepWithDataAndEvents - 一个布尔值，指示是否应复制克隆元素的所有子元素的事件处理程序和数据。默认情况下，它的值与第一个参数的值匹配（默认为 false）。

使用`clone(true)`也会复制事件处理程序和数据。

这是您的确切代码（稍作更改）的小提琴，效果很好[FIDDLE](http://jsfiddle.net/GgVPU/1/)

你确定你已经正确定义了`w`,`h`和`element`变量，因为`w`它`undefined`会导致你得到的错误？

# ios - 使用页脚在表格视图中无限滚动

> ID：10436531
> 
> 赞同：2
> 
> 时间：2012-05-03T17:35:24.700
> 
> 标签：ios, scroll, tableview, footer, viewwillappear

我正在尝试在 tableview 中支持无限滚动。我知道 tableview 可以无限滚动，但我的情况不同。

最初，当用户向下滚动到接近第 30 个元素时，我将在我的 tableview 中加载 30 个项目，我将发出一个 http 请求以获取接下来的 30 个项目，所以它不像我一次加载 60 个项目。

我这样做的方法是，当我的表最初装满 30 项时，一旦看到脚注视图，我将请求接下来的 30 项。

我的问题是如何检测页脚视图被看到？是否有类似“将出现”的内容仅用于页脚视图？

让我知道是否有其他更好的方法来完成我上面的场景

谢谢！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T17:43:23.577

A`UITableView`是 的子类`UIScrollView`，并且`UITableViewDelegate`符合`UIScrollViewDelegate`。

所以你可以将自己设置为 tableViewDelegate 并实现`scrollViewDidScroll:`。然后，您可以检查`scrollView.contentOffset`自己，或致电`[myTableView visibleCells]`. 我相信还有其他各种方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T17:46:31.023

您尝试实现的行为称为下拉刷新。

它已经有几种实现，例如：

1.  [https://github.com/leah/PullToRefresh](https://github.com/leah/PullToRefresh)

2.  [https://github.com/enormego/EGOTableViewPullRefresh](https://github.com/enormego/EGOTableViewPullRefresh)

试一试，或阅读代码以了解详细信息。如果你很好奇，这个技巧的实现方法是实现滚动视图的委托方法并检查`scrollView.contentOffset.y`.

# cocos2d-iphone - cocos2d 如何防止多点触控传播到前一层？

> ID：10436533
> 
> 赞同：0
> 
> 时间：2012-05-03T17:35:37.303
> 
> 标签：cocos2d-iphone, multi-touch, cclayer

我正在通过一个包含每个可触摸精灵的类来手动处理触摸。此外，每个菜单都是 a `CCLayer`，当我从一个菜单切换到另一个菜单时，我使用`CCTransition###`并获取新场景。

所以，这些层“仍然存在”，当我触摸一个菜单时，前一层也会收到它......就像我在一个新的游戏中开始游戏时`CCLayer`，然后菜单仍然受到多点触摸的影响......

如果我使用单点触控，我可以吞下触控，但游戏必须有多点触控......

我能做些什么？谢谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T18:22:03.663

您需要在任何需要它的层中使用触摸事件。在一个层消耗它之后，触摸将不再传播到“先前”层。

[http://www.cocos2d-iphone.org/api-ref/0.9.0-beta/_c_c_touch_delegate_protocol_8h_source.html](http://www.cocos2d-iphone.org/api-ref/0.9.0-beta/_c_c_touch_delegate_protocol_8h_source.html)

要使用触摸事件，请在`ccTouchBegan`委托方法中返回 YES。

编辑：更改方法名称以匹配`CCStandardTouchDelegate`

```
- (BOOL)ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event;
   if (condition)
      return YES;
   else 
      return NO;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T04:33:31.447

您可以像这样将顶层的优先级设置为 0，将其下层的优先级设置为 1。

[[CCTouchDispatcher sharedDispatcher] addTargetedDelegate:self priority:0swallowsTouches:YES];

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T18:13:57.860

您可以尝试使用该属性

`self.isTouchEnabled = NO;`

在层内，您不想接收触摸。

如果您使用`CCButton`对象，则需要禁用它们。

我希望它有帮助...

问候安塞尔姆

# .net - 在 WPF Web 应用程序中托管 MDI .NET Winform

> ID：10436537
> 
> 赞同：1
> 
> 时间：2012-05-03T17:35:53.357
> 
> 标签：.net, wpf, mdi

我有一个遗留的 .NET/C# MDI 应用程序，它需要托管在 WPF 应用程序中。我尝试将 MDI 父窗体添加到**System.Windows.Forms.Integration.WindowsFormsHost**的子窗体中，但抛出异常并显示错误消息：

> $exception
> {"子控件不能是顶级窗体。"}
> System.Exception {System.ArgumentException}

并且 MDI 父级的 TopLevel 属性必须设置为 true。

WPF 互操作是否支持 MDI WinForm？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T20:07:51.177

不知道您是否仍在寻找解决方案，但我遇到了同样的问题并按照此示例解决了

[http://shevaspace.blogspot.nl/2007/02/how-to-host-top-level-hwnds-in-wpf.html](http://shevaspace.blogspot.nl/2007/02/how-to-host-top-level-hwnds-in-wpf.html)

基本上你已经编写了自己的 HwnDHost 控件（WindowsFormHost 也使用它）

希望它可以帮助有同样问题的人

# php - 上传照片到谷歌云服务器

> ID：10436545
> 
> 赞同：0
> 
> 时间：2012-05-03T17:36:27.707
> 
> 标签：php, mysql, cloud

我想将照片上传到谷歌云服务器而不是我的服务器以避免服务器负载。我还想稍后在我的服务器中获取图像。我将在 php 和 mysql 中执行此操作。有可能这样做吗？如果是这样，那么我将如何进行？请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T05:19:55.543

您可以通过其[RESTful API](https://developers.google.com/storage/docs/developer-guide)与 Google Cloud Storage 进行交互，或使用[tws_service_google_storage 之](https://github.com/dragonmantank/tws_service_google_storage)类的 php 库。

# php - Eclipse 搜索结果 - 文件名未显示

> ID：10436550
> 
> 赞同：5
> 
> 时间：2012-05-03T17:36:40.827
> 
> 标签：php, eclipse, search

我已经对此进行了搜索/谷歌搜索/搜索，我似乎是地球上唯一遇到此问题的开发人员，我已经使用它多年了，但它影响了我的工作效率。

如果我在 eclipse 上进行文件搜索，在 Centos 上使用 3.7.2，（但这发生在我的所有安装，所有操作系统上）具有相对较大的结果集（50 多个文件），树显示正常，但文件名没有显示. （PHP 和其他观点）。

通常我会看到三角形箭头、符号（文件/目录）和行号箭头加上文件名。

当结果集很大时，我会得到除文件名之外的所有内容...如果我单击箭头，它们会打开正确的文件/行，并且在右键单击时元素（文件、目录等）的属性显示正常。

单击安装详细信息中的查看错误日志没有响应，但 IDE 工作正常。

任何寻找调试/修复的线索将不胜感激。

这是屏幕截图... ![空结果](../Images/22b1f44fae006ae61deaae0cddc317a9.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T20:55:36.943

我有完全相同的问题。我解决这个问题的唯一方法是让 eclipse 以列表视角列出而不是树结构。搜索面板中有一个选项可让您指定。

更新：找到了解决方案。我猜有些构建文件的内容令人不舒服，所以 eclipse 在搜索这些文件时并不高兴。更改您的搜索工作集以排除这些文件，那么您应该一切顺利。您可以使用我上面描述的“列表视图透视图”来查找导致问题的文件。

# iphone - 在 UITableViewCell 的范围内显示标签

> ID：10436559
> 
> 赞同：3
> 
> 时间：2012-05-03T17:37:10.360
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我想使用 UItableView 来显示一天日历。每行对应一个小时。我需要显示我的表格视图的 2 个单元格之间的小时。

像这样 ：

[![一个](../Images/d9264ac22fdb086e8b79121b3edbc599.png)](https://i.stack.imgur.com/O7Bva.png)
[（来源：[free.fr](http://axen.free.fr/appli/a.png)）]

这是我的 UITableViewCell ：

[![一个](../Images/ca882fc5dd6797c8ff31343f61aaef97.png)](https://i.stack.imgur.com/yUcFf.png)
[（来源：[free.fr](http://axen.free.fr/appli/c.png)）]

在第一个屏幕截图中，它运行良好，但如果我向下滚动然后向上滚动，我的时间标签会像这样剪切：

[![一个](../Images/8a5643c5a58b1b7eadf7f34e5f60723b.png)](https://i.stack.imgur.com/ShKvK.png)
[（来源：[free.fr](http://axen.free.fr/appli/b.png)）]

你有什么提示可以使用 tableView 解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T17:43:27.570

您现在布置单元格的方式很脆弱，因为在屏幕上绘制单元格的顺序非常重要。尝试向上移动内容，使您的按钮与单元格顶部齐平，并且时间标签完全适合单元格。向您的表格添加一个细标题视图，以使顶部单元格看起来正常。将单元格的内容完全保持在其范围内应该有助于您保持合理的滚动速度。

**编辑：**您还可以在单​​元格顶部放置第二个剪辑标签，并使其内容与前一行中的标签相同。您需要特别注意将该标签隐藏在顶行中，否则这应该使您的表格不受其单元格呈现顺序的变化的影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T17:43:08.267

使单元格的背景颜色清晰。当您向上滚动时，单元格的 z 顺序会颠倒，较低的单元格会与较高的单元格重叠，从而导致此剪切。

# java - Mybatis的分布式缓存

> ID：10436560
> 
> 赞同：2
> 
> 时间：2012-05-03T17:37:11.170
> 
> 标签：java, mybatis, distributed-caching, terracotta, hazelcast

有人有过 Mybatis 分布式缓存的生产经验吗？我看到了一些关于 ehcache/Terracotta 的建议，但是之前使用 Terracotta 的经验会让我想远离它（配置和继续运行很复杂）。Hazelcast 似乎是一个有趣的可能性——有人尝试将它用作 Mybatis 的分布式缓存吗？

我们的应用程序有一个相对较大的数据库 (1TB)，因此我们想要一个可扩展的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T11:45:55.193

在 MyBatis，我们已经发布了一个[MyBatis/Hazelcast 桥接模块](http://www.mybatis.org/caches/hazelcast/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T15:34:38.653

我一直在使用 Ehcache 和 Mybatis+Spring 进行生产，它非常有效。它的配置非常简单。（几乎 10 行 xml 文件）

在个人层面上，我的建议是使用 Ehcache。

**PS：**我确实将 hazelcast 用于差异化目的，这需要分布式缓存，而且它也很棒，但对于 MyBatis 来说，这就像用枪射击昆虫一样！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-19T03:20:52.730

我正在使用 Redis 进行集群缓存。我总共有 5 个节点在上面运行，缓存永远不是瓶颈。

官方插件[https://github.com/mybatis/redis-cache](https://github.com/mybatis/redis-cache)运行良好但效率不高，我通过集群支持和更高效的超时控制对其进行了一些改进[https://github.com/MiltonLai/redis-cache](https://github.com/MiltonLai/redis-cache)

# javascript - yepnope.js 在已加载脚本之上注入脚本

> ID：10436564
> 
> 赞同：1
> 
> 时间：2012-05-03T17:37:26.817
> 
> 标签：javascript, modernizr, yepnope

我将 yepnope 与modernizr 和drupal 7 一起使用。我已经有脚本（jquery、drupal.js 等）在没有yepnope 的情况下加载。当我使用 yepnope 和 modernizr 有条件地注入脚本时，它会在包括 jquery 在内的所有其他脚本之上注入。有没有办法在所有其他脚本之后注入脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T17:56:35.340

文件说

> yepnope.js 总是按照它们列出的顺序执行它们

所以你可以通过 yepnope 加载所有脚本，

```
yepnope([{
   load : ['jquery', 'drupal']
}]);
 yepnope([{
   //Conditional scripts.
}]); 
```

# c - 如何单独安装较新版本的 gcc

> ID：10436569
> 
> 赞同：1
> 
> 时间：2012-05-03T17:37:33.400
> 
> 标签：c, linux, gcc

我正在使用安装了 gcc 4.1.2 的 CentOS 5.6。我想*另外*安装 gcc 4.4.6。所以，基本上我想把它作为第二个 gcc 安装，而不是升级前一个（也就是说，我想保留它）。最简单的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T17:41:47.537

只需将 gcc 和各种库安装在单独的目录中即可。创建一个脚本来更新各种环境变量（您需要获取此变量）以设置 shell 以根据需要使用适当的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T10:49:41.817

`yum install gcc44`为我做的！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T19:45:19.090

您通常需要 gcc 包本身，最好是 glibc 的专用版本，然后是 binutils（可能还有更多），您需要将它们全部安装到一个公共前缀。

您可能还想研究诸如 buildroot 之类的项目（对于预制解决方案），或“Linux From Scratch”，它解释了构建您的正常工具链的过程）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-07T17:05:30.483

按照这些步骤，我已经对它们进行了测试并为我正常工作（[安装 gcc 的替代版本](https://www.hongliangjie.com/2012/07/20/how-to-install-gcc-higher-version-in-alternative-directory/)）

# delphi - Delphi：如何从“.res文件”读取图像，而不是嵌入资源

> ID：10436571
> 
> 赞同：3
> 
> 时间：2012-05-03T17:37:48.753
> 
> 标签：delphi

有谁知道如何使用 Delphi 程序从磁盘上的.res**文件****读取****图像？**

 ****请注意**，我问的是从磁盘上的 .res 文件读取图像，而不是关于将资源嵌入到 Delphi 应用程序并读取链接到可执行文件的资源文件。

我是说 ：

1.  磁盘上 .res 文件的文件名和路径，打开 .res 文件并将其解码到足以...
2.  找到图像。
3.  加载图像

**不是**这样的：

```
{$R resfile.res}    

blablabla.LoadFromResourceName(HInstance, 'IMAGE_NAME'); 
```

感谢您的高级帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T17:41:39.347

开源[XN 资源编辑器](http://www.wilsonc.demon.co.uk/d10resourceeditor.htm)（用 Delphi 编写）包含执行此操作所需的代码（以及从可执行文件、DLL、OCX 模块等读取/编辑资源）。你将能够从中提取你需要的东西！**

# php - AS3 和 PHP... 在本地保存屏幕截图并避免系统对话框？

> ID：10436572
> 
> 赞同：0
> 
> 时间：2012-05-03T17:37:51.480
> 
> 标签：php, actionscript-3, air, dialog, save

绘制显示对象的位图后，我需要在本地保存位图以及文本输入，并避免 Flash 播放器在保存时会显示的系统对话框。这可以用PHP实现吗？我读过 Air 非常有效地处理了这项任务，但我对这两个平台都缺乏经验。任何帮助将不胜感激！谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T18:08:43.247

不，你不能。允许 web 应用程序在未经许可的情况下将数据保存在本地系统上是一个巨大的安全风险（我可以编写一个看起来合法的 web 应用程序来在您的系统上保存间谍软件）。由于这个原因，Flash 不允许它。

但是，基于桌面 (AIR) 的应用程序可以`FileStream`在该`FileMode.WRITE`模式下打开 a 并向其写入数据，而无需用户的任何提示。

**编辑** 由于您正在寻找基于桌面的应用程序，因此这里有一些提示：

```
var randomname:String=Math.floor(Math.random() * 1024).toString(16) + ".png"
var f:File=File.desktopDirectory.resolvePath("photos/" + randomname);
var s:FileStream=new FileStream();
s.open(f, FileMode.WRITE);
s.writeBytes(bytesArray); //bytesArray contains the binary data to write to the file
s.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T17:43:53.887

为此请参阅[FileReference.save() 。](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/FileReference.html#save%28%29)
是的，它需要用户交互（否则将是一场噩梦）。

如果您不愿意使用 AIR 和[FileStream](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/filesystem/FileStream.html#methodSummary)类，这是您唯一的选择。
AIR 文件 api 没有这个限制，但需要您运行桌面应用程序。

好吧，您始终可以使用本地[SharedObject](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/SharedObject.html)来存储一些数据，但在这种情况下您将获得 AMF 编码。这将适用于 AIR 和 Web 应用程序。

# tomcat - JVM HeapDump：内存在“java.util.concurrent.ConcurrentHashMap$Segment”的一个实例中累积

> ID：10436573
> 
> 赞同：1
> 
> 时间：2012-05-03T17:37:57.217
> 
> 标签：tomcat, jvm, heap-memory, concurrenthashmap, ajp

我在使用 JVM 堆时遇到了问题。

我们使用 Apache HTTP Server 和 Apache Tomcat Application Server 运营一个网站。

所有对 Apache HTTP 服务器的 *.jsp 请求都将被重定向到 Tomcat 服务器（协议：ajp）。

该网站有超过 10'000 个 jsp 文件。

我们还有一个谷歌搜索工具，它每晚都会抓取网站。

当它爬行时，jvm 堆空间上升到 8 GB 的最大限制。

使用 javamelody，我可以看到堆空间增加类似于加载的类。

为了分析，我做了一个堆转储。

以下是来自 eclipse MAT 的报告：

* * *

“org.apache.catalina.loader.StandardClassLoader @ 0x7092c5148”加载的“org.apache.jasper.servlet.JspServlet”的一个实例占用了1'189'603'328（96.75%）字节。

内存在“”加载的“java.util.concurrent.ConcurrentHashMap$Segment[]”的一个实例中累积。

关键词

java.util.concurrent.ConcurrentHashMap$Segment[]

org.apache.catalina.loader.StandardClassLoader @ 0x7092c5148

org.apache.jasper.servlet.JspServlet

* * *

GSA 请求是否存在问题？

为什么JVM不能卸载生成的类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T18:55:23.840

看起来加载所有 JSP 会导致问题。

默认情况下，Tomcat 将所有已加载的 JSP 保存在内存中，直到 Web 应用程序停止。

在 Tomcat 7 中，您可以设置 JSP Servlet 的 maxLoadedJsps 参数来限制内存中保存的 JSP 的数量。

# asp.net - ASP.NET 初学者。列表布局

> ID：10436574
> 
> 赞同：0
> 
> 时间：2012-05-03T17:37:57.317
> 
> 标签：asp.net

我是 ASP.NET 的新手，正在尝试使用数据库中的内容创建一个列表。我一直在用 GridView 苦苦挣扎，但它似乎让我很头疼......

如果我想用数据库中的数据创建一个列表，并使用链接等进行一些格式化和技巧，我应该怎么做？

例如 eBay 上的命中列表，其中包含来自多个列的数据、图像、包含 id:s 的链接等。 [http://www.ebay.com/sch/i.html?_from=R40&_trksid=p5197.m570.l1313&_nkw =asp.net&_sacat=查看所有类别](http://www.ebay.com/sch/i.html?_from=R40&_trksid=p5197.m570.l1313&_nkw=asp.net&_sacat=See-All-Categories)

我应该使用哪个控件来创建列表，以及如何在每一行上创建 Html？

感谢我能得到的所有帮助！

谢谢//L

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T17:53:54.357

正如我在评论中提到的，使用 a`Repeater`将为您提供所有灵活性，同时为您省去从代码隐藏创建 html 的麻烦。

```
<asp:Repeater ID="MyRepeater" runat="server">
    <HeaderTemplate>
        <div class="ListDiv">
            <h2>My headline</h2>
    </HeaderTemplate>

    <ItemTemplate>
        <div class="ItemDiv">
            <a href='<%# DataBinder.Eval(Container.DataItem, "ProductLink") %>'>
                <%# DataBinder.Eval(Container.DataItem, "ProductName")%>
            </a>
        </div>
    </ItemTemplate>

    <FooterTemplate>
        </div>
    </FooterTemplate>
</asp:Repeater> 
```

诚然，MVC 是现代且最先进的，但可能会给您带来陡峭的学习曲线。

人们可能会争辩说，当您不熟悉 WebForms 和 MVC 时，您应该开始学习 MVC 而不是 WebForms。

如果您需要交付某些东西，恕我直言 WebForms 会更快地为您提供结果（通常是 ASP.NET 新手）。

# button - LWUIT - 如何让 9 部分图像拉伸而不重复（资源编辑器 1.5）

> ID：10436579
> 
> 赞同：0
> 
> 时间：2012-05-03T17:38:27.097
> 
> 标签：button, lwuit, lwuit-resource-editor

有没有办法通过代码或 Lwuit 资源编辑器来拉伸 9 部分图像以防止重复？理想情况下，我不想拉伸单个像素，但如果没有选择，那也不是什么大不了的事。

**目前：**我使用 Lwiit 资源编辑器制作了一些边框生成的 9 部分按钮。制作完成后，`Button`我注意到应该拉伸的区域反而被重复，使我的渐变看起来很糟糕。

**目标：** 我希望制作我所有的 9 部分图像（边框`Buttons`等）来拉伸中心部分，作为下面的参考。

```
* = Fixed size  
- = Stretched  
| = Image separation 
```

当前的：

```
* | * | *  
* | * | *  
* | * | * 
```

想：

```
* | - | *  
- | - | -  
* | - | * 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T17:05:58.933

LWUIT 对缩放边界进行了初步工作，但我从未完成它，因为 J2ME 设备不支持动态缩放。[Codename One](http://www.codenameone.com/)支持这种类型的图像边框，但由于复杂性和性能原因，它不会在 GUI 构建器中公开。

对于大多数设计，当它们被创建为多图像组件时，您可以使用传统的 9 片边框达到非常相似的效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T07:23:23.723

你必须看看[这个 youtube 视频](http://www.youtube.com/watch?v=LFClNS5vWQs&list=UUb-4T86pwSFyN66s7QJI90A&index=60&feature=plcp)。

它对我建立自己的边界帮助很大`Containers`。您可以从[LWUIT 存储库](https://svn.java.net/svn/lwuit-incubator~svn/trunk/vprise)下载它。在这里你可以找到这个项目，以及它的 .res，这将帮助你为你的 .res 建立边界`Components`。

# php - PHP：无法使用php从文本文件中逐行检索文本

> ID：10436580
> 
> 赞同：0
> 
> 时间：2012-05-03T17:38:31.840
> 
> 标签：php

我的服务器中有一个动态更改的文本文件，我想在我的 php 页面中打印文本文件的特定行，我也想修剪当前行。例如，假设 data.txt

```
score=36
name=Football Cup
Player=albert 
```

我想在我的第
36页
足球杯
阿尔伯特 这样打印

那么如何从动态变化的文本文件中打印特定的单词或句子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T17:43:12.643

在这种情况下，您需要的只是：

```
foreach(file("data.txt") as $line) {
    list($k,$v) = explode("=",$line,2);
    echo $v."<br />";
} 
```

如果您运行的是 PHP 5.4，则可以使用较短的：

```
foreach(file("data.txt") as $line) echo explode("=",$line,2)[1]."<br />"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T17:42:57.897

如果总是`name=WORD`这样，那么您可以这样做：

```
$file = file('data.txt')

// iterate through every line:
foreach($file as $line) {
  // split at the '=' char
  $parts = explode('=', $line, 2); // limit to max 2 splits

  // and the get the second part of it
  echo $parts[1];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T17:44:42.273

如果数据将始终采用该格式或类似格式，您可以使用 PHP 的内置[配置文件解析器](http://us.php.net/manual/en/function.parse-ini-file.php)加载数据，然后通过数组索引引用其值。

```
$data = parse_ini_file( "data.txt" );
echo $data["name"]."\n"; 
```

无需字符串操作或 for 循环。

# php - PHP preg_replace：用替换 URL 替换 Youtube 链接

> ID：10436583
> 
> 赞同：0
> 
> 时间：2012-05-03T17:38:41.450
> 
> 标签：php, regex, preg-replace

在我的网站中，我有三个正则表达式（一个被禁用，你会明白为什么......）来替换用户发布的内容：

1° 将电子邮件替换为链接的电子邮件：

```
$string = preg_replace("/([\w-?&;#~=\.\/]+\@(\[?)[a-zA-Z0-9\-\.]+\.([a-zA-Z]{2,3}|[0-9]{1,3})(\]?))/i","<a href=\"mailto:$1\">$1</a>",$string); 
```

2° 用嵌入视频替换 Youtube 链接：

```
$pattern = '/http:\/\/www\.youtube\.com\/watch\?(.*?)v=([a-zA-Z0-9_\-]+)(\S*)/i';
$replace = '<iframe title="YouTube" class="youtube" type="text/html" width="320" height="240" src="http://www.youtube.com/embed/$2" frameborder="0" allowFullScreen></iframe>';
$string = preg_replace($pattern, $replace, $string); 
```

3° 用链接的链接替换链接（这些链接被禁用！）：

```
 /*** make sure there is an http:// on all URLs ***/
$string = preg_replace("/([^\w\/])(www\.[a-z0-9\-]+\.[a-z0-9\-]+)/i", "$1http://$2",$string);
/*** make all URLs links ***/
$string = preg_replace("/([\w]+:\/\/[\w-?&;#~=\.\/\@]+[\w\/])/i","<a target=\"_blank\" href=\"$1\">$1</a>",$string); 
```

我的问题是，显然，第三个替换 youtube 链接在它们被以前的正则表达式替换后（切换序列，中断 youtube 视频）

如何启用第三个正则表达式来替换忽略 youtube 模式的 URL？谢谢 ;-）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T18:04:34.150

试试这个：

```
// youtube
$string = preg_replace("/\s*[a-zA-Z\/\/:\.]*youtube.com\/watch\?v=([a-zA-Z0-9\-_]+)([a-zA-Z0-9\/\*\-\_\?\&\;\%\=\.]*)/i"," <object width=\"100%\" height=\"344\"><param name=\"movie\" value=\"http://www.youtube.com/v/$1&hl=en&fs=1\"></param><param name=\"allowFullScreen\" value=\"true\"></param><embed src=\"http://www.youtube.com/v/$1&hl=en&fs=1\" type=\"application/x-shockwave-flash\" allowfullscreen=\"true\" width=\"100%\" height=\"450\"></embed></object>  ",$string);

// email
$string = preg_replace("/([\w-?&;#~=\.\/]+\@(\[?)[a-zA-Z0-9\-\.]+\.([a-zA-Z]{2,3}|[0-9]{1,3})(\]?))/i","<a href=\"mailto:$1\">$1</a>", $string);

// links
$string = preg_replace("#(^|[\n\s>])([\w]+?://[^\s\"\n\r\t<]*)#is", "\\1<a href=\"\\2\">\\2</a>", $string); 
```

# cakephp - cakephp上供应商和应用程序/供应商之间的区别

> ID：10436584
> 
> 赞同：4
> 
> 时间：2012-05-03T17:38:48.763
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.1

Cakephp2 上的这两个目录有什么区别？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-03T18:21:30.443

根目录是全局供应商文件夹 - 如果多个应用程序共享同一个根目录（蛋糕 + 插件 + 供应商）：

```
/lib/Cake
/plugins
/vendors
/app1
/app2
/app3 
```

APP 一个是特定于应用程序的一个并且优先 - 有意义不是吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-11T22:28:11.927

很简单。“app”文件夹中的“vendors”文件夹用于存放特定于应用程序的第三方库，而另一个“vendors”文件夹用于存放要在多个应用程序中使用的库。

# gdata - 从 Python 中的 Google 电子表格 API 列出工作表和关联的工作表 ID

> ID：10436586
> 
> 赞同：1
> 
> 时间：2012-05-03T17:38:54.610
> 
> 标签：gdata, python-2.x

有一个电子表格，其中工作表的顺序可以任意更改，但标题不能更改。我想列出电子表格中所有工作表的标题并找到相关的 worksheet_id。

```
# Google Docs Login information
gd_client = gdata.spreadsheet.service.SpreadsheetsService()
gd_client.email = 'username'
gd_client.password = 'password'
gd_client.source = 'SO demo'
gd_client.ProgrammaticLogin()
# Obtain list feed of specific worksheet. 
feed = gd_client.GetListFeed(spreadsheet_id, worksheet_id) 
```

如果我不知道工作表的顺序，但我知道工作表的标题，如何获得正确的 worksheet_id？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T17:45:56.337

快速回答我从[这个网站](http://www.coderaptors.com/?Script_google_spreadsheets)修改的问题。

```
def PrintFeed(feed):
  for i, entry in enumerate(feed.entry):
    print '%s %s' % (entry.id.text.split('/')[-1], entry.title.text)

def worksheet_dict(feed):
  d = defaultdict(str)
  for i, entry in enumerate(feed.entry):
    d[entry.title.text] = entry.id.text.split('/')[-1] 
  return d

s = gd_client.GetWorksheetsFeed(key=spreadsheet_id)
PrintFeed(s)
wkst_dict = worksheet_dict(feed)
print wkst_dict 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T09:10:08.120

更清洁的方式：

```
import urlparse
import os

def worksheet_ids(feed):
  def _id(entry):
    split = urlparse.urlsplit(entry.id.text)
    return os.path.basename(split.path)
  return dict([
    (entry.title.text, _id(entry))
    for entry in feed.entry
    ]) 
```

# java - FileWriter 和 BufferedWriter 导入在 JDK 7 中是“冲突的”

> ID：10436590
> 
> 赞同：1
> 
> 时间：2012-05-03T17:39:15.133
> 
> 标签：java, file, io

我正在使用 JDK 7，并尝试使用以下代码执行简单的写入文件操作：

```
import java.io.BufferedWriter;
import java.io.FileWriter; // JAVA says this is conflicting...why?

FileWriter fw = new FileWriter("hello.txt");
BufferedWriter bw = new BufferedWriter(fw); // JAVA says this is an error and asks me to convert FileWriter to type Writer. 
```

我正在使用 JDK 7，这就是我一直使用 Java 写入文件的方式，但这是 JDK 7 中的第一个，它不起作用。

有人可以解释为什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T17:46:11.583

我能想到的唯一原因是您在与该类相同的包中具有一个名为 FileWriter 的类，您从中复制了代码片段。在这种情况下，您不能从不同的包中导入 FileWriter 类，而必须在代码本身中使用限定名称 (java.io.FileWriter)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T17:40:37.870

您可以将 fw 实例设为 a`Writer`吗？例如

```
Writer fw = new FileWriter("hello.txt");
BufferedWriter bw = new BufferedWriter(fw); 
```

使用接口/抽象而不是具体实现是一种很好的做法。

FileWriter 继承自 OutputStreamWriter，OutputStreamWriter 继承自 Writer。

更重要的是，`BufferedWriter`构造函数需要一个`Writer`实例。

# vba - 创建从 Excel 流程图到 MS Word 标题的超链接

> ID：10436591
> 
> 赞同：2
> 
> 时间：2012-05-03T17:39:19.697
> 
> 标签：vba, excel, hyperlink, ms-word

我正在 MS Excel 2007 中构建流程图。它用于工作流程。我希望能够参考一个 word 文档，其中包含有关流程图中每个步骤的详细说明。

在流程图的每个部分，我想创建一个超链接/按钮，用户可以单击它并打开到 word 文档的特定部分（标题）。我试图创建一个形状（矩形）并设置一个指向文档的超链接。这很好用，但它只是在开始时打开文档。我希望矩形按钮在特定标题处打开。我不确定您是否可以通过这种方式进行超链接。如果没有，我想我需要创建一个按钮控件。我不确定按钮控件是否也可以做到这一点。

任何人都可以建议

1）一种超链接到标题的方法，如果不是，

2）也许是关于如何使用按钮控件来做到这一点的建议。

谢谢，迈克

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T17:47:40.143

可能有一种方法可以引用您在 word 文档中创建的 BOOKMARKS，然后在 Excels 超链接路径中指定 word 文档的文件名以及文件中的 BOOKMARK。据此： http: [//office.microsoft.com/en-us/excel-help/hyperlink-function-HP010062412.aspx](http://office.microsoft.com/en-us/excel-help/hyperlink-function-HP010062412.aspx)

这是可能的。现在是使用Excel超链接添加界面找到方法的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T17:54:44.400

**编辑：被 VISQL 击败 :)**

是的，可以做你想做的事。按着这些次序。

打开您的word文档并在相关位置插入书签。比如说，我们在标题 2 处插入一个名为“Mike”的书签。

![在此处输入图像描述](../Images/56550f6710e2f72b92582f0d5e6f412f.png)

将此代码粘贴到 Excel 的模块中。

```
Sub Sample()
    Dim oWordApp As Object, oWordDoc As Object, bMark As Object
    Dim FlName As String

    FlName = "C:\Sample.Docx"

    '~~> Establish an Word application object
    On Error Resume Next
    Set oWordApp = GetObject(, "Word.Application")

    If Err.Number <> 0 Then
        Set oWordApp = CreateObject("Word.Application")
    End If
    Err.Clear
    On Error GoTo 0

    oWordApp.Visible = True

    Set oWordDoc = oWordApp.Documents.Open(FlName)

    Set bMark = oWordDoc.Bookmarks("Mike")

    bMark.Select
End Sub 
```

右键单击该按钮并将其分配给上述宏。

![在此处输入图像描述](../Images/6c211dbba56d075e90a4fb564cc668c2.png)

你完成了。下次用户单击该按钮时，代码将打开 word 文档并转到相关书签。对其他按钮重复相同的步骤。

高温高压

# php - Pchart：X轴，刻度太多

> ID：10436596
> 
> 赞同：0
> 
> 时间：2012-05-03T17:39:39.793
> 
> 标签：php, pchart

我有一个相当大的数据集，大约 1000 个值。（温度图）

[![温度图](../Images/f53f40e4be465cbf7c646b43977e1fff.png)](https://i.stack.imgur.com/9yQ0O.png)
正如你所看到的，我在几个小时之间有太多的滴答声，我只想要每小时一个滴答声。
现在它是一个非常思考的黑线，我该如何解决这个问题？

x 轴数组是这样的：
[2] = 1
[3] = NULL
[4] = NULL
[5] = 2
[6] = NULL
等

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T13:41:08.660

在比例设置中，您必须设置 LabelSkip。

```
$labelskip = 1000/24; // values = 1000, hours = 24
$scaleSettings = array("LabelSkip"=>$labelskip);    
$myPicture->drawScale($scaleSettings); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T18:00:15.550

错误是`$MyData->setSerieTicks("Time",1000);`从您的聊天中有 2 行生成的，`$MyData->setSerieTicks("Time",1);`您会看到差异

# c# - Designer.cs 文件与从 VS 2005 转换的预先存在的 .cs 文件冲突

> ID：10436597
> 
> 赞同：1
> 
> 时间：2012-05-03T17:39:42.463
> 
> 标签：c#, visual-studio, visual-studio-2010

我正在重新创建最初在 Visual Studio 2005 中创建的一堆网页。我已经解决了许多在重新使用为旧页面设计的控件时遇到的问题，但我仍然遇到了一个主要问题：

ControlName.ascx.designer.cs 文件正在为已在 ControlName.ascx.cs 中定义的分类字段创建重复定义。即使从项目中排除 75% 的旧控制文件，designer.cs 文件和我从旧站点引入的控制文件之间也存在近 100 个冲突。与文件的设计器版本不同，原始文件实际上包含大量代码。我可以从设计器字段中删除该字段，但这只会在下次重新生成之前有效。

有没有办法为预先存在的控件禁用这些文件的生成，或者是否有其他解决方案来解决所有这些冲突？我对 Visual Studio 还是很陌生。

错误示例如下： 错误 25 类型“MyCompany.Web.UI.Controls.dyn_content”已包含“rptList”的定义 D:\projects\Portals\Portals\Portals\controls\dyn_content.ascx.designer.cs 22 62 个传送门

# ios - 使用 iOS SDK 将链接发布到 Facebook Wall

> ID：10436601
> 
> 赞同：0
> 
> 时间：2012-05-03T17:40:09.170
> 
> 标签：ios, facebook

我目前在尝试从我的 iOS 应用程序中向 Facebook 墙贴添加操作链接时遇到问题。

该链接包含一个请求静态谷歌地图的地址。例如，它看起来像：

```
http://maps.google.com/maps/api/staticmap?&size=512x512&maptype=roadmap&markers=color:white%7Clabel:S%7C51.107402,6.722538&markers=color:red%7Clabel:D%7C51.110191,6.748481&markers=color:red%7Clabel:A%7C51.110171,6.748577&markers=color:red%7Clabel:C%7C51.106513,6.734447&markers=color:red%7Clabel:H%7C51.109167,6.739898&markers=color:white%7Clabel:E%7C51.114542,6.754146&sensor=false 
```

当我点击我的 Facebook 墙上的链接时，它只是：

```
http://maps.google.com/maps/api/staticmap?&size=512x512&maptype=roadmap&markers=color%3Awhite%7Clabel%3AE%7C51.114542%2C6.754146&sensor=false 
```

问题似乎是 Facebook 以某种方式过滤掉了除最后一个之外的所有 &markers。任何人都知道如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T13:52:07.423

您是否尝试过使用 url = (NSString*)CFURLCreateStringByAddingPercentEscapes(NULL, (CFStringRef) **URLHERE** , NULL, (CFStringRef) @"!*'();:@&=+$,/?%#[]", kCFStringEncodingUTF8);

# c# - 为什么此代码段将答案显示为 6？

> ID：10436604
> 
> 赞同：2
> 
> 时间：2012-05-03T17:40:36.373
> 
> 标签：c#, c#-4.0

我的一个同学问了这个问题，我想确定我告诉他的答案是正确的。基本上下面的代码（确实显示“6”作为答案）在到达 MessageBox.Show((i--).ToString()); 时让他感到困惑。

我的解释是递减操作 (i--) 实际上并没有发生，因为它被传递给 MessageBox 对象的 .Show 方法。所以它显示 6 因为它实际上并没有将该值减少 1。

这是正确的解释吗？我从来没有尝试过在同时显示值的同时抛出 inc/dec 操作，所以我不确定我的推理是否正确。谢谢！

```
 int i = 6;            // I starts as 6...
        if (i >=4 )           // Then the check to see if i >= 4 is TRUE...
        {
            if( i == 5)       // The check to see if i == 5 is FALSE...
            {
                MessageBox.Show(i.ToString()); 
            }
            else
            {
                MessageBox.Show((i--).ToString());  // ****
            }
        }
        else 
        { 
            MessageBox.Show((i++).ToString());
        } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-03T17:43:32.613

`i--`返回 i 的值并返回递减前的值。

您应该按照词法顺序（按照创建者的意图）从逻辑上阅读它：

```
puts the value
and then decrements 
```

如果之前是 6，即使在 i 的值是 5 之后，它也会返回 6（打印出来）。

请注意，`--i`递减并返回递减的值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-03T17:44:12.937

`i--`返回减量前的值。如果你想要递减*后的值，你想要*`--i`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T17:44:26.977

`i--`表示使用后减少 i。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T18:24:13.630

这个（变量--）是一个*后缀*减量操作。

[来自 msdn](http://msdn.microsoft.com/en-us/library/wc3z3k8c.aspx)：

> 操作的结果是操作数“之前”被递减的值。

因此 ToString() 应用于“ *i* ”的当前值(6)，然后它的值递减。

另请参阅 C# 规范。在 msdn：[后缀递增和递减运算符](http://Postfix%20increment%20and%20decrement%20operators)

# c# - sql查询从连接表返回行数

> ID：10436605
> 
> 赞同：0
> 
> 时间：2012-05-03T17:40:37.250
> 
> 标签：c#, sql, sql-server

所以我有这个：

```
 const string sqlString =
        "SELECT * FROM Causes c INNER JOIN CauseMembers m ON " +
        "(c.Id = m.CauseId) AND (UserName = @UserName) " +
        "ORDER BY c.DateTime DESC;"; 
```

工作正常，但是我想返回一个生成的列，其中包含从表 Causemembers 查询返回的行数。这样我就可以得到加入这个“原因”的实际成员（来自原因）。

你的投入？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T18:14:46.457

如果您使用的是 SQL Server 2005 或更高版本，则可以使用窗口函数：

```
SELECT <ALL COLUMNS YOU'RE INTERESTED IN>, COUNT(m.CauseId) OVER (PARTITION BY c.ID)
FROM Causes c JOIN CauseMembers m ON (c.Id = m.CauseId) AND (UserName = @UserName)
ORDER BY c.DateTime DESC 
```

这将为您计算每个原因 ID 返回的行数。如果要确保返回每个原因，无论是否有任何成员属于它，然后将 更改`JOIN`为 a `LEFT OUTER JOIN`。如果没有 CauseMembers，则`NULL`不会计算来自外部联接的，因此您将得到零。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T17:46:09.480

由于您已经返回所有列 (*) 并且您已标记 C#，因此看起来您正在将结果加载到 DTO（或 ADO.NET 对象）中。

为什么不只计算结果对象中的行数/项目数？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T17:52:24.003

这会给你计数，但不是其他字段。另一种方法是使用嵌入式选择语句

```
const string sqlString =
"SELECT c.ID, COUNT(m.causeID) FROM Causes c RIGHT OUTER JOIN CauseMembers m ON " +
"(c.Id = m.CauseId) AND (UserName = @UserName) " +
"GROUP by c.ID ;"; 
```

# sql - 水晶报表 SQL

> ID：10436607
> 
> 赞同：1
> 
> 时间：2012-05-03T17:40:38.707
> 
> 标签：sql, crystal-reports

```
IF ({PICT_Picture.Job_Print} = True AND {PROD_Process.Process_Name} in ["LARGE MOULDING","SMALL MOULDING"]) then "YES" else "NO" 
```

所以基本上这就是我想要的，如果勾选了一个框`(PICT_Picture.Job_Print)`并且如果在下拉框中选择了大模或小模`(PROD_Process.Process_Name)`，则在报告中的产品旁边显示“是”，否则显示“否”。

目前，所有列中都只显示“是”，无论现场是否有小型或大型模具或勾选的框。

一些产品在不同的工艺路线下有图像。

[http://i.stack.imgur.com/dtuhu.jpg](http://i.stack.imgur.com/dtuhu.jpg)
[http://i.stack.imgur.com/r5cYg.jpg](http://i.stack.imgur.com/r5cYg.jpg)
[http://i.stack.imgur.com/fPpOx.jpg](http://i.stack.imgur.com/fPpOx.jpg)

下图显示了有问题的字段。

[http://i.stack.imgur.com/84vyK.jpg](http://i.stack.imgur.com/84vyK.jpg)
[http://i.stack.imgur.com/WffWW.jpg](http://i.stack.imgur.com/WffWW.jpg)

谢谢，

丹尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T08:04:40.123

在：![在此处输入图像描述](../Images/3624fdca23522b92f1ac14de42f245ca.png)

尝试将`Exceptions For Nulls`下拉列表更改为`Defaults For Nulls`.

另外 - 如果你去`Database`，`Show SQL Query`然后复制/粘贴并在管理工作室/查询分析器中执行并向我们展示结果......

# wolfram-mathematica - Mathematica：在 3D 图形上打印文本

> ID：10436614
> 
> 赞同：2
> 
> 时间：2012-05-03T17:41:24.883
> 
> 标签：wolfram-mathematica, textures, graphics3d

我想在圆柱体上打印文字。结果应该看起来像一罐可口可乐。

我尝试了类似于mathematica文档中的示例： [http](http://reference.wolfram.com/mathematica/ref/Texture.html) ://reference.wolfram.com/mathematica/ref/Texture.html > Scope > Texture Specification > Text Example

```
text = Style["Coca Cola", 128];
Graphics3D[{
   Texture[text],
   Red, Cylinder[{{0, 0, 0}, {0, 0, h}}, radius[h], VertexTextureCoordinates -> {...}],

}] 
```

但是 Cylinder 无法识别 VertexTextureCoordinates 选项。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T18:16:32.777

你没有做错任何事，它只是不适用于内置原语 afaik。但是您当然可以编写自己的`Cylinder`函数，该函数是从多边形构建的，您可以在其中应用您喜欢的任何纹理：

```
text = Style["Cook a Cola", 128, White, Background -> Red];
Graphics3D[
 {Texture[text],
  Red, EdgeForm[],
  With[{dphi = Pi/35},
   Table[
    Polygon[{{Cos[phi], Sin[phi], 0}, {Cos[phi + dphi], 
       Sin[phi + dphi], 0}, {Cos[phi + dphi], Sin[phi + dphi], 
       1}, {Cos[phi], Sin[phi], 1}}, 
     VertexTextureCoordinates -> {{phi/Pi, 0}, {(phi + dphi)/Pi, 
        0}, {(phi + dphi)/Pi, 1}
       , {phi/Pi, 1}}],
    {phi, 0, 2 Pi - dphi, dphi}
    ]
   ]
  }
 ] 
```

![在此处输入图像描述](../Images/23731659c8a37f720311af035c323cbb.png)

# c# - 从 C++、C# 和 ruby 调用 ac dll

> ID：10436621
> 
> 赞同：9
> 
> 时间：2012-05-03T17:41:43.627
> 
> 标签：c#, c++, ruby

您好我有一个需要调用的函数的 DLL。签名是：

```
const char* callMethod(const char* key, const char* inParams); 
```

如果我使用 ruby​​ 一切正常：

```
attach_function :callMethod, [:string, :string], :string 
```

如果我使用 C++ 或 C#，我会得到**堆栈溢出**！？

C＃：

```
[DllImport("DeviceHub.dll", CallingConvention = CallingConvention.Cdecl)]
private unsafe static extern IntPtr callMethod(
    [MarshalAs(UnmanagedType.LPArray)] byte[]  key,
    [MarshalAs(UnmanagedType.LPArray)] byte[] inParams
);

System.Text.UTF8Encoding encoding = new UTF8Encoding();
IntPtr p = callMethod(encoding.GetBytes(key), encoding.GetBytes(args)); // <- stack overflow here 
```

C++：

```
extern "C"
{
typedef  DllImport const char*  (  *pICFUNC) (const char*, const char*); 
}
HINSTANCE hGetProcIDDLL = LoadLibrary(TEXT("C:\\JOAO\\Temp\\testedll\\Debug\\DeviceHub.dll"));  
FARPROC lpfnGetProcessID = GetProcAddress(HMODULE (hGetProcIDDLL),"callMethod");*      pICFUNC callMethod;
callMethod = (pICFUNC) lpfnGetProcessID;
const char * ptr = callMethod("c", "{}"); 
```

我已经尝试了很多函数调用的变体：WINAPI、PASCAL、stdcall、fastcall，......没有任何效果。

DLL 不是我制作的，我无法控制它。

任何人都可以帮我提出任何建议！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T07:49:42.803

这只是一个想法，但 AFAIK 这可能是空终止字符串的问题，`const char* myvar`是空终止的，但字节数组不是。您需要做的就是将调用更改`...(String a, String b)`为`LPStr`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T23:55:04.000

确保标题中的声明包含在 extern "C" 块中：

```
extern "C" {

const char* callMethod(const char* key, const char* inParams);

} 
```

见[http://www.parashift.com/c++-faq-lite/mixing-c-and-cpp.html#faq-32.3](http://www.parashift.com/c++-faq-lite/mixing-c-and-cpp.html#faq-32.3)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T08:10:55.427

我看不出你为什么不应该改变你的电话

> [DllImport("DeviceHub.dll", CallingConvention = CallingConvention.Cdecl)]
> private unsafe static extern string callMethod(
> string key,
> string inParams
> );

您需要向函数发送指针，而不是实际值/字节。在为本地函数调用生成类型转换时，
我总是使用这个[映射。](http://msdn.microsoft.com/en-us/library/ms235282.aspx)
同样适用于 c++ 代码，您需要使用内容创建变量并调用该函数。

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2012-05-03T23:30:04.740

Stack Overflow Exception 是微软语言中的一个错误，用于防止无限递归，并防止不兼容的程序相互交互。如果您的 dll 方法使用递归，请尝试使用迭代重写它。否则，就照欧维说的做，用字符串试试。如果它仍然不起作用，请谷歌寻找兼容的类型。在不知道实际方法的情况下，我只能这么说。

# php - 复杂的 ExpressionEngine 模板：可能渲染 <=1 秒？

> ID：10436626
> 
> 赞同：1
> 
> 时间：2012-05-03T17:42:01.557
> 
> 标签：php, mysql, lamp, expressionengine

据我所知，我已经优化了一个复杂的 ExpressionEngine 模板，无论我需要进行应用程序级别的调整还是服务器级别的调整，我仍然希望将渲染时间控制在 1 秒以下。

*有问题的页面是 195 个项目的网格，每个项目都有几个实际显示和可过滤*的一对多关系（客户、供应商、办公室等）。这些关系由 Playa 维护。

**未缓存：16.0904 秒，50.11MB，5264 次查询**

**应用级缓存后：2.0793 秒，28.37MB，476 次查询**

下降主要是由于 EE 的模板缓存、标签缓存和根据这篇[EE Wiki 优化文章](http://expressionengine.com/wiki/Optimize_EE)的通道“禁用”参数。

这一切都发生在具有 512MB 内存的 MediaTemple DV4 (LAMP) 服务器上，我想它会以这种速度被破坏。生产网站流量约为每天 4K 的综合浏览量。

到目前为止，我唯一的想法是仅加载特色项目并异步保存（较大的，最初隐藏的）内容块。我不喜欢这个想法的唯一原因是对 SEO 的潜在影响。每个项目都有一个详细信息页面，所以这可能不是问题，但似乎这些都是索引的有用信息。

是否有任何安全的方法，无需破解 ExpressionEngine 的核心，将我的最小页面渲染时间降低到不到一秒？我只是让自己失败了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T20:40:17.037

这就是异步加载擅长的……如果您担心 SEO 的影响，请添加一些分页链接，然后在初始化 AJAX 内容时使用 javascript 隐藏这些链接。恕我直言，超过 5k 的未缓存查询是完全不可接受的。每天有 4k 的浏览量，有些人会被缓存破坏的页面浏览量击中，而且它不会很漂亮！

不管 ...

我的猜测是缓存后剩下的大部分查询都来自 Playa。它提出*了很多*查询。将**缓存**和**刷新**参数直接添加到 Playa 标签对将进一步帮助您。

如果您愿意购买附加组件来提供帮助，我强烈推荐[CE Cache](http://devot-ee.com/add-ons/ce-cache)。它将取代您所有的本地缓存，只需为您收集全部内容并将其缓存为文件，在数据库中，或通过一系列其他流行的服务器级缓存机制。

祝你好运。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T01:24:40.787

AJAX 按需加载和积极缓存的好建议。

如果可能，请在此处或 EE 论坛中发布您的模板代码，也许可以简化。

还有一些想法：

*   删除任何高级条件（改用 Mark Croxton 的 If/Else 和 Switchee）
*   使用查询模块或 Solpace 的超级搜索而不是频道条目，然后通过 Playa 模块标签调用 Playa
*   删除任何嵌入；改用 Snippets 或什么都不用
*   remove sections of the template and see if any are particularly query-intensive

Good luck!

# ruby-on-rails - mongoid - 使用包含在 1..N 引用关系中选择子对象

> ID：10436627
> 
> 赞同：5
> 
> 时间：2012-05-03T17:42:08.597
> 
> 标签：ruby-on-rails, ruby, mongoid

我有这样的场景：

```
blog.posts 
```

其中每个帖子属于另一个对象，例如标签（在 belongs_to，has_many 关系中），所以我可以这样做：

```
tag.posts 
```

为了防止 N+1 的问题，我希望能够做到 blog.posts，而且还要抓取与每个帖子关联的每个标签，这样就生成了两个查询，一个针对帖子，一个针对所有标签（基于每个属于该帖子的 tag_id）。

我在 mongoid 文档中注意到我可以做到：

```
Post.includes(:tag).where(:blog_id: blog.id) 
```

这将使我获得属于博客的所有帖子，并获得与帖子关联的每个标签并放入身份映射（前提是已启用）。

问题是，我想做：

```
blog.posts 
```

并以某种方式重新定义查询以执行我上面想要的操作。有没有办法做到这一点？

目前我正在通过定义一个扩展来缓解这个问题：

```
has_many :posts do
  def with_tags 
    includes(:tag)
  end
end 
```

所以我做

```
blog.posts.with_tags 
```

但我更喜欢

```
blog.posts 
```

默认情况下执行上述操作。

干杯。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T16:42:18.967

您可以使用范围来实现这一点，特别是默认范围。所以在你的 Post 模型中，你可以这样定义你的模型：

```
class Post
   belongs_to :tag
   default_scope includes(:tag)
end 
```

这样，每当您执行查询以获取帖子时，例如 Blog.posts，mongoid 也会生成一个查询以获取与每个帖子关联的所有标签。

# django - 上传图像时出现异常 UnicodeEncodeError

> ID：10436629
> 
> 赞同：1
> 
> 时间：2012-05-03T17:42:13.710
> 
> 标签：django, postgresql

在 Django 应用程序中，用户正在使用表单上传图像。我不确定为什么。我可以上传名称中带有重音字符的文件。例外如下

```
File "pathto/python2.7/django/core/handlers/base.py", line 111, in get_response 
```

```
   响应 = 回调（请求，*callback_args，**callback_kwargs）

 _wrapped_view 中的文件“/pathto/python2.7/django/contrib/auth/decorators.py”，第 23 行
   返回 view_func（请求，*args，**kwargs）

 文件“/pathto/views.py”，第 75 行，在 upload_image 中
   obj = form.save(request.user)

 文件“/form.py”，第 88 行，保存中
   obj.save()

 文件“/pahtto/python2.7/django/db/models/base.py”，第 460 行，保存
   self.save_base（使用=使用，force_insert=force_insert，force_update=force_update）

 文件“/pathto/python2.7/django/db/models/base.py”，第 543 行，在 save_base
   对于 f in meta.local_fields 如果不是 isinstance(f, AutoField)]

 文件“/pathto/lib/python2.7/django/db/models/fields/files.py”，第 255 行，在 pre_save
   file.save（文件名，文件，保存=假）

 文件“/pathto/extrantool.py”，第 96 行，保存
   super(ImageWithThumbsFieldFile, self).save(名称, 内容, 保存)

 文件“/pathto/python2.7/django/db/models/fields/files.py”，第 92 行，保存
   self.name = self.storage.save（名称，内容）

 文件“/pathto/python2.7/django/core/files/storage.py”，第 48 行，保存
   name = self.get_available_name(name)

 文件“/pathto/python2.7/django/core/files/storage.py”，第 74 行，在 get_available_name
   而self.exists（名称）：

 文件“/pathto/python2.7/django/core/files/storage.py”，第 218 行，存在
   返回 os.path.exists(self.path(name))

 文件“/usr/local/lib/python2.7/genericpath.py”，第 18 行，存在
   os.stat（路径）

UnicodeEncodeError：“ascii”编解码器无法在位置 66 编码字符 u'\xe9'：序数不在范围内（128）
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T07:00:15.287

猜测一下，Brandon 是对的，文件名中有一个非 ascii 字符。谷歌搜索你的错误信息

```
UnicodeEncodeError: 'ascii' codec can't encode character u'\xe9' in position 66 
```

给我以下作为前两个链接：

1.  [Python Unicode 错误博客条目](http://www.saltycrane.com/blog/2008/11/python-unicodeencodeerror-ascii-codec-cant-encode-character/)
2.  [Python 官方 Unicode 文档](http://docs.python.org/howto/unicode.html)

在搜索中添加“django”实际上给了我们一个 StackOverflow 答案！

[UnicodeEncodeError：“ascii”编解码器无法编码字符](https://stackoverflow.com/questions/3715865/unicodeencodeerror-ascii-codec-cant-encode-character)

所以 - 检查你的 django 语言设置是我的建议。

# c# - 如何获取datagridview当前行列值？

> ID：10436631
> 
> 赞同：3
> 
> 时间：2012-05-03T17:42:27.910
> 
> 标签：c#, sql, winforms, datagridview

我有一个 winform，它有一个 gridview，它通过存储过程填充，存储过程是

```
 ALTER PROCEDURE [dbo].[spGetAllCustumer]

    AS
    SET NOCOUNT ON 
SET XACT_ABORT ON  
    BEGIN TRAN
  BEGIN
SELECT     Customer.CustID, Customer.CustName, Customer.CompanyName, Customer.CompanyRealtion, Contract.ContractID, Contract.ContractDate, 
                  '$'+ CONVERT(varchar,Contract.totalPayment,1), '$'+ CONVERT(varchar,Contract.monthlyInstallment,1), '$'+ CONVERT(varchar,Contract.totalCommission,1), Contract.ContractDuration, Contract.PaymentMode, Contract.Description, 
                  Customer.Disable
FROM         Customer INNER JOIN
                  Contract ON Customer.CustID = Contract.CustID
WHERE     (Customer.Disable = 'false')

 END
commit 
```

我正在用这段代码动态填充gridview

```
 con.ConnectionString = "Data Source=MRDEVELOPER;Initial Catalog=Crystal_Accounts;Integrated Security=True";
            SqlCommand com = new SqlCommand();
            com.Connection = con;
            com.CommandText = "spGetAllCustumer";
            com.CommandType = CommandType.StoredProcedure;
            com.Parameters.Clear();
            con.Open();
            SqlDataReader dr = com.ExecuteReader();
            DataTable dt = new DataTable();
            dt.Load(dr);
            dataGridView1.DataSource = dt; 
```

我想选择 selectedRow 的 custID、contractID、totalpayment 我不知道该怎么做，第二个问题是关于我在存储过程中使用的货币符号是正确的方法还是最好的方法是什么?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T18:35:32.983

正如 volody 指出的那样，您可以使用 SelectedRows 属性来获取所需的一切。但是，您可能不知道相关列的索引（尽管它们通常以与查询相同的顺序生成，因此请确保正确地为列设置别名），您可以通过字符串访问来使用列文本本身细胞：

```
foreach(DataGridViewRow row in DataGridView1.SelectedRows)
{
    // Do something with row.Cells["CustID"].Value;
    // Do something with row.Cells["ContractID"].Value;
    // Do something with row.Cells["TotalPayment"].Value;
} 
```

我建议您做的另一件事是将格式留给 DataGridView 而不是 SQL 查询。将数据访问/业务逻辑层与表示/UI 层分离时，这通常是最佳实践。这样做的方法是`DataFormatString`在 DataTable 的 DataColumn 上为有问题的列指定 a。在这种特殊情况下，您可以这样做：

```
...
DataTable dt = new DataTable();
dt.Load(dr);
dt.Columns["TotalPayment"].DataFormatString = "C";
dt.Columns["MonthlyInstallment"].DataFormatString = "C";
dt.Columns["TotalCommission"].DataFormatString = "C";
dataGridView1.DataSource = dt; 
```

在代码中做所有事情的缺点是您没有得到任何设计时支持，这意味着您必须在运行时测试所有内容（这可能很耗时）。这是使用 ORM 的原因之一（例如 VS 数据集设计器、LINQ2SQL 设计器、EntityFramework 等），以便您在设计时支持数据库查询/对象。它使在设计时将这些数据类直接绑定到 UI 控件变得更加容易，并在运行代码之前确定有关表示层的所有内容（例如将隐藏哪些列、任何额外的计算列、特殊列格式、条件行/列/单元格绘画等）。

只是我的 0.02 美元。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T18:11:25.010

使用[SelectedRows](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.selectedrows.aspx)集合

```
int columnOfcustID = 0; // change this to correct custID column index
int columnOfcontractID = 1; // change this to correct contractID column index
int columnOftotalpayment = 2; // change this to correct totalpayment column index
foreach(DataGridViewRow row in DataGridView1.SelectedRows)
{
    Console.WriteLine(row.Cells[columnOfcustID].Value);
    Console.WriteLine(row.Cells[columnOfcontractID].Value);
    Console.WriteLine(row.Cells[columnOftotalpayment].Value);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T18:20:52.287

要获取值，您将覆盖 select 事件。

```
void GridView1_SelectedIndexChanging(Object sender, GridViewSelectEventArgs e)
{

   GridViewRow row = GridView1.Rows[e.NewSelectedIndex];

   //get value from cells
   String var = row.Cells[1].Text; 

   //do something with the value or pass the values to a function here
   DoSomething(var);
} 
```

您还可以在代码中创建列...

使用 TemplateField，您可以使用以下语法将您的美元金额计算为标签或其他控件

```
<asp:TemplateField HeaderText="Total Payment">
<itemTemplate>
    <asp:label id="lblTotalPayment" Text='<%# Eval("TotalPayment","{0:C}") %>' runat="server" />
</itemTemplate>
</asp:TemplateField> 
```

但是，要走这条路，您必须设置所有字段，而不仅仅是一个。

# xmpp - XMPP 应用程序需要过滤掉其他客户端，例如 Pidgin

> ID：10436635
> 
> 赞同：1
> 
> 时间：2012-05-03T17:42:46.080
> 
> 标签：xmpp

我们开发了一个应用程序，该应用程序应该只允许使用该应用程序的对等方之间进行交互。我们想区分通过我们的应用程序登录的用户和在常见的聊天客户端（例如 Pidgin）上登录的用户。

有一个观察：如果我们通过我们的应用程序和 Pidgin 登录相同的用户名，应用程序会不时丢失节，因为它们只传递给 Pidgin，反之亦然。

我已经开始考虑通过检查应用程序特定的后缀，例如 MyName@OurServer/OurApp（OurApp 就是那个后缀）来为我们的应用程序的用户跟踪一些特定的 jid。但是如果在我们的应用程序和 Pidgin 上都登录了相同的用户名，我们如何让服务器只向我们的客户端发送节？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T22:27:02.893

资源标识符（您称之为“后缀”）不是检测应用程序的可靠方法。服务器能够将其更改为任何感觉。此外，尽管在实践中不太可能，但用户可能会在其客户端中输入此资源字符串，从而造成麻烦。

识别客户端类型的正确方法是通过它的存在。标准方法是使用[XEP-0115: Entity Capabilities](http://xmpp.org/extensions/xep-0115.html)和[XEP-0030: Service Discovery](http://xmpp.org/extensions/xep-0030.html#info-nodes)。您的客户端将在其服务发现结果中包含特定的识别功能。

一旦确定了客户的完整 JID，请始终使用它与它进行通信。将`<iq>`节用于请求/响应，或`<message>`使用带有自定义有效负载的节（否`<body>`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T18:24:17.457

确保您发送到完整的 JID，而不仅仅是基本 JID。

```
Full JID: MyName@OurServer/OurApp
Base JID: MyName@OurServer 
```

第二个版本可能有几个不同的结果，具体取决于服务器及其配置。使用完整的 JID 将只发送到该客户端连接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T21:05:22.883

“后缀”在 XMPP 中称为资源。您可以将 XMPP 数据包发送到裸 JID (user@domian.com) 或完整 JID (user@domain.com/resource)。您可以轻松地使用该资源来识别您的客户端，还可以使用服务发现检查客户端软件，请参见[示例 8](http://xmpp.org/extensions/xep-0030.html#info-basic)。

# c++ - 使用 g++ -std=c++0x 的代码运行速度较慢

> ID：10436640
> 
> 赞同：-1
> 
> 时间：2012-05-03T17:43:15.997
> 
> 标签：c++, performance, c++11, g++

我试图测试`std::swap`and的性能差异，`vector::swap`我在编译时使用和不使用该`-std=c++0x`选项。我注意到大约 200 毫秒的差异，当我不包含此选项时，程序运行得更快。

```
#include <iostream>
#include <string>
#include <vector>

int main()
{
    commentator.setReportStream (cout);

    size_t nbElts = 2048;
    vector<int> v, w;

    v.resize (nbElts);
    w.reserve (nbElts);

    for (int i = 0; i < nbElts; ++i) {
        w.push_back (i);
    }

    commentator.start ("std::swap", __FUNCTION__);
    for (int i = 0; i < 10000000; ++i) {
        std::swap (v, w);
    }
    commentator.stop (MSG_DONE);

    commentator.start ("vector::swap", __FUNCTION__);
    for (int i = 0; i < 10000000; ++i) {
        v.swap (w);
    }
    commentator.stop (MSG_DONE);
    return 0;
} 
```

评论者对象显示运行时间。为什么运行时间不同？ ***gcc 版本 4.6.3 20120306 (Red Hat 4.6.3-2) (GCC)***

**没有 -std=c++0x 的运行时间**

```
std::swap...done (0.319952 s)
Completed activity: std::swap (r: 0.3214s, u: 0.32s, s: 0s) done

vector::swap...done (0.26396 s)
Completed activity: vector::swap (r: 0.2652s, u: 0.264s, s: 0s) done 
```

**使用 -std=c++0x**

```
std::swap...done (0.548917 s)
Completed activity: std::swap (r: 0.5507s, u: 0.5489s, s: 0s) done

vector::swap...done (0.508922 s)
Completed activity: vector::swap (r: 0.5105s, u: 0.5089s, s: 0s) done 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-03T17:51:55.497

好吧，我们不知道您使用的是哪个版本的 G++，我们也不知道您在编译时指定了哪些标志。

但是，如果您的代码需要半秒钟来进行几百万次指针交换（在 C++0x 中交换向量），那么我认为可以肯定地说您在没有启用优化的情况下进行编译。如果你在没有优化的情况下对代码进行基准测试，你会得到无用的数据，而且你在浪费时间。如果您关心代码的速度，请告诉您的编译器生成快速代码，*然后*测量差异。

# html - 如何在内部 DIV 中设置相同的高度？

> ID：10436649
> 
> 赞同：0
> 
> 时间：2012-05-03T17:43:44.010
> 
> 标签：html, css

> **可能重复：**
> [最大化浮动 div？](https://stackoverflow.com/questions/2996977/maximize-a-floating-div)

我有这个 HTML 代码：

```
 <div id="container">

        <div id="sidebar">

            left
            <br /><br /><br /><br /><br /><br />
        </div>

        <div id="content">
            right
            <br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
            bla bla
        </div>

        <div class="clear"></div>

    </div> 
```

这是CSS代码：

```
#container {
    width: 760px;

    margin-left: auto;
    margin-right: auto;
    margin-top: 10px;   

    overflow: hidden;
    background: #ffffff;
    border: 1px solid #cdcdcd;      
}

#sidebar {
    float:left;
    width:25%;
    background:#555;
}

#content {
    float:left;
    width:75%;
    background:#eee;
}

.clear {
  clear: both;
} 
```

不幸的是，侧边栏的高度与硬币的高度不同，我该如何扩展它的高度？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T18:25:47.993

可能不是您正在寻找的东西，但试试这个：

```
<style>
#container {
    width: 760px;

    margin-left: auto;
    margin-right: auto;
    margin-top: 10px;   

    overflow: hidden;
    background: #ffffff;
    border: 1px solid #cdcdcd;      
    position: relative; //Makes the children in the container positionable
}

#sidebar {
  bottom: 0px; //position side bar.
  left: 0px; //position side bar.
  top: 0px; //position side bar.
  width:25%;
  background:#555;
  position: absolute
}

#content {
  margin-left: 25%;
  width:75%;
  background:#eee;
}

.clear {
  clear: both;
}
</style>
  <div id="container">

        <div id="sidebar">

            left
            <br /><br /><br /><br /><br /><br />
        </div>

        <div id="content">
            right
            <br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
            bla bla
        </div>

        <div class="clear"></div>

    </div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T17:57:09.427

您可以将容器元素的背景颜色设置为与侧边栏相同的背景颜色。这样，至少*看起来*侧边栏会延伸到底部。

如果您需要侧边栏*真正*向下延伸，我认为最简单的方法是使用表格。可能有一种方法可以使用 CSS 来做到这一点，但我已经搜索了很多，但没有找到方法。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-03T17:57:35.697

#content 中的内容比侧边栏中的内容更多`<br/>`。所以整个#container 的高度是内部最大的div 元素的高度，即#content，这就是为什么#sidebar 看起来更小。`<br/>`要么在#sidebar中放置相同数量的，要么`<br/>`从两个div中删除's并将它们设置为它们的高度，例如

```
#sidebar{

height:100;

}

#content{

height:100;

} 
```

# javascript - 使用常规 javascript 从 iframe 向父页面调用 jquery 函数

> ID：10436651
> 
> 赞同：0
> 
> 时间：2012-05-03T17:43:59.650
> 
> 标签：javascript, jquery, html

我用常规的 javascript 创建了一个 iframe。在那个 iframe 中是 Jquery 函数和 JQuery。正如人们所期望的那样，该代码在 iframe 中工作。我想让父页面执行该功能，而不是在 iframe 中。iFrame 和所有内容都是从同一个域加载的，尽管创建 iframe 的代码可以在任何站点上运行。例如，如果 siteB、siteA 运行代码，siteA & B 可以创建 iframe 到 siteZ 的网站内容。

这是到目前为止我想在父页面中运行的 iframe 的代码：

```
<script>
$(document).ready(function(){                       
    $().intad({
        title: "blahblah",
        url: "http://www.blah.com",
        timeout: 30,
        deplay: 2,
        wait: 3,
        closeable: true
    });
});
</script> 
```

我从 iframe 试过这个：

```
<script>
$(document).ready(function(){                       
    function intad(){
        title: "blahblah",
        url: "http://www.blah.com",
        timeout: 30,
        deplay: 2,
        wait: 3,
        closeable: true
    });
});
</script> 
```

这来自加载到父页面的代码：

```
<script>
parent.document.getElementById("RandomIdHere").contentWindow.intads();
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T17:56:01.333

在 iFrame 中，您需要将要调用的函数放在`window`对象上，以便全局访问。

一旦它在那里，从您的主要顶级 html 页面，您可以执行`iFrameDomElement.contentWindow.yourFunctionToCall()`.

编辑：

因此，为了进一步分解它，您的代码会出现许多问题。首先，什么是`intad`？它是 jquery 原型上的方法吗？如果没有，你做错了什么。这基本上是您需要做的。

在您的主页中，从现在开始我将调用 parent.html。

你需要这样的东西：

```
// this is a shorthand document ready function
$(function() {

    // we will call this from the iframe
    window.functionInParent = function() {
        // do your work here
    };

    var iframe = document.createElement('iframe');
    iframe.src = 'link/to/iframe/source';

    // if you want to talk to the iframe from this parent page,
    // use this to access the iframe's window object.
    // just make sure that the function you try to call is on the
    // window object of the iframe, just like we did with the function above.
    var iframeWindow = iframe.contentWindow;
}); 
```

在你的 iframe 中，你需要这样的东西：

```
$(function() {
    // your iframe's dom is ready - do stuff here

    // once you are ready, call the parent function
    top.functionInParent();
}); 
```

我希望这有帮助。如果您需要进一步的帮助，请将您的工作（或几乎工作）代码放入[jsfiddle](http://jsfiddle.net/)，以便我可以更好地查看它。

# java - Liferay：消息的到期日期（消息板）

> ID：10436653
> 
> 赞同：2
> 
> 时间：2012-05-03T17:44:04.473
> 
> 标签：java, liferay

我只是遗漏了一些明显的东西，还是没有合理或半可行的方法来为 Liferay 留言板中的消息添加过期日期？

第一个问题是如何在消息编辑器中输入过期日期。最明显的解决方案可能是 expando 属性，但似乎没有日期的 expando 数据类型（只有日期和时间），我找不到在 expando 属性中设置计算默认值的方法（例如今天 + 6 个月）。即使没有默认值，日期+时间属性默认为 1970 年 1 月 1 日，格林威治标准时间 0:00，并且使用日期选择器输入真正的到期日期是相当乏味的。输入过期日期后，没有明显的方法来验证它（例如，将其限制为今天和今天 + 6 个月之间的日期），当日期显示在消息视图中时，当前区域设置不用于格式化日期和时间。

即使我以某种方式设法将到期日期压缩到扩展属性中，也没有明显的方法来评估到期日期。

消息仍然保留，但不计算在内并显示在 MB portlet 中是可以接受的。MBThreadServiceUtil 中用于访问消息的方法没有提供任何额外的过滤条件，因此我要么必须加载所有消息并在 Java 代码中执行计数/过滤操作（这不是一个非常聪明的解决方案），要么我必须重写整个服务堆栈“自下而上”并添加 get 或 search 方法，这些方法能够将过滤转发到数据库。

首选的解决方案是有一个计划任务，它会定期完全删除过期的消息。由于 MB portlet 支持范围（消息与 portlet 的范围相关）并且计划任务不在 portlet 上下文中运行，因此我必须以某种方式访问​​范围 ID。如果我了解有关此主题的文档和可用讨论，则默认范围应该是页面所属的社区。另一方面，我们的“留言板页面”是在组织级别添加的，消息的范围 ID 与组织 ID 不匹配，也不匹配组织中社区的任何 ID。任何人都知道如何在这种情况下确定范围 ID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T01:02:51.863

我会用计划任务来制作 - liferay 用于 Quartz； [http://liferaysnippets.com/how-to-create-cron-job-in-liferay/](http://liferaysnippets.com/how-to-create-cron-job-in-liferay/)

您可以使用 DynamicQueries 保存的过期消息：

```
 Calendar c = Calendar.getInstance();
    c.add(Calendar.MONTH, -6);
    Date halfYearAgo = c.getTime();
    ClassLoader portalClassLoader = PortalClassLoaderUtil.getClassLoader();
    DynamicQuery query = DynamicQueryFactoryUtil.forClass(MBThread.class, portalClassLoader)
            .add(PropertyFactoryUtil.forName("lastPostDate").le(halfYearAgo)).addOrder(OrderFactoryUtil.asc("lastPostDate"));

    try {
        List dynamicQuery = MBThreadLocalServiceUtil.dynamicQuery(query);
        for (Object object : dynamicQuery) {
            MBThread thread = (MBThread) object;
            MBThreadLocalServiceUtil.deleteMBThread(thread);
        }
    } catch (SystemException e) {
        e.printStackTrace();
    } 
```

# guice - 使用 Roboguice 2 而不从 RoboActivity 继承

> ID：10436654
> 
> 赞同：0
> 
> 时间：2012-05-03T17:44:05.283
> 
> 标签：guice, roboguice

我正在使用处理菜单的 BaseActivity，并且每个具有菜单的活动都从 BaseActivity 扩展。

现在我想使用 roboguice，但我确实已经有了继承。

**如何在不继承 RoboActivity 的情况下使用 guice？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T11:18:18.313

是的，只需创建自己的超类并像这样复制到其中：
[https ://github.com/rtyley/roboguice-sherlock/blob/master/src/main/java/com/github/rtyley/android/sherlock/roboguice /activity/RoboSherlockActivity.java](https://github.com/rtyley/roboguice-sherlock/blob/master/src/main/java/com/github/rtyley/android/sherlock/roboguice/activity/RoboSherlockActivity.java)

仅更改`SherlockActivity`为`BaseActivity`。

# java - Glassfish 3.1.1 类加载器顺序与 jar 文件

> ID：10436656
> 
> 赞同：1
> 
> 时间：2012-05-03T17:44:08.207
> 
> 标签：java, glassfish, classloader

假设我有 2 个同名的 jar 文件，我将一个放入 glassfish/lib 文件夹，另一个放入 glassfish/domains/domain/lib（或 glassfish/domains/domain/applibs）。

这两个 jar 文件具有相同的类名，比如 A，和方法名，比如 method1，但 method1 的实现不同。

当我启动 Glassfish 服务器并在我的应用程序中调用 A.method1() 时，会执行哪个方法？

我做了一个测试，似乎 glassfish/lib 中的方法被执行了。有没有办法让其他方法执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T18:37:41.430

我曾经在tomcat上做了一些相同的事情，其中​​我将一个实现放在Tomcat\lib目录中，另一个放在application\lib目录中。

如果 application\lib 包含一些实现，则其优先于 server\lib 目录，而在没有 application\lib 的情况下，server\lib 用于运行应用程序。

因此，在您的情况下，即域，如果两个实现都存在，似乎 domain\lib A.method1() 将运行。

# html - 如何使用 URL 嵌入视频

> ID：10436658
> 
> 赞同：4
> 
> 时间：2012-05-03T17:44:14.393
> 
> 标签：html, video, video-embedding

快速提问：

有没有一种通用的方法可以让我使用 URL 嵌入视频，而不是使用“嵌入代码”，例如`<iframe src="http://player.vimeo.com/video/41406753?byline=0&amp;portrait=0" width="500" height="281" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>`或`<iframe width="560" height="315" src="http://www.youtube.com/embed/JEPYYo0-gfc" frameborder="0" allowfullscreen></iframe>`)。

我需要以单独的方式管理每个案例吗？（提取 id 并构建适当的 iframe 标记）。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-27T20:08:25.450

我建议使用 oEmbed。根据他们的官方网站，“oEmbed 是一种允许在第三方网站上嵌入 URL 表示的格式。简单的 API 允许网站在用户发布指向该资源的链接时显示嵌入的内容（例如照片或视频） ，而不必直接解析资源。” [http://oembed.com/](http://oembed.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-08T12:13:16.830

这段代码会帮助你..

```
<iframe  width="425" height="344" 
src="https://www.microsoft.com/es-es/videoplayer/embed/RWfmWf?pid=ocpVideo0-innerdiv-oneplayer&postJsllMsg=true&maskLevel=20&market=es-es" 
frameborder="0" allowfullscreen></iframe> 
```

您可能会注意到 src 的行……那是您必须编写自己的 URL 的地方。

# c# - 从数据库中检索多个图像到动态加载的图像控件

> ID：10436663
> 
> 赞同：1
> 
> 时间：2012-05-03T17:44:36.783
> 
> 标签：c#, asp.net, image, ado.net

在我的项目中，我有一个动态加载图像控件来显示该`names & photos`网站的成员。

为了检索图像，我使用了图像`handler`，但问题是在搜索框代码中我使用了类似搜索，以便可以动态显示相似的名称加载图像控件将显示所有名称，但图像对于所有图像都是相同的控件，如果我们明确告诉名称它将显示正确的图像，我该如何克服这个问题？

处理程序的代码如下：

```
SqlConnection connection = new SqlConnection(conn);
string s2 = HttpContext.Current.Request.QueryString["firstname"];
string sql = "SELECT UploadPhoto FROM profiledata  where firstname='" + s2 + "'"; 
```

在cs文件中，代码是这样的（动态加载图片控制页面）：

```
string s2 = TextBox1.Text.ToString();
i2.ImageUrl = "~/ShowImage2.ashx?firstname=" + s2; 
```

# php - 如何让 PHP strip_tags 删除 HTML 和 Script 标签而不是 XML？

> ID：10436666
> 
> 赞同：0
> 
> 时间：2012-05-03T17:44:58.247
> 
> 标签：php, html, xml, strip-tags

我正在使用 php strip_tags() 函数从我的文本区域输入中删除 html 标签，并删除 < script > 标签以帮助防范脚本攻击。

无论如何，用户经常需要输入事先不知道的 XML 标签。但是，我的 strip_tags 函数也删除了这些良性 xml 标记，这是不可接受的。

另外，我有时会放 filename.< date>.png （必须在此处添加一个空格，因为 StackOverflow 也将其删除了哈哈）来指示文件名或路径的可变部分。在这种情况下，我最终得到的是运行 strip_tags 后的 filename..png 。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T17:50:48.837

不可能`strip_tags`不删除未知标签。您可能希望查看[DOMDocument](http://php.net/manual/en/class.domdocument.php)以寻找可行的替代方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T18:00:40.360

`strip_tags()`被定义为删除所有 HTML/XML 标记（第二个参数中指定的单个标记除外）。这两种类型的标签之间没有区别，也没有区别并`<date>`用作占位符——这三种标签看起来都像`strip_tags()`，因此将它们删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-20T19:38:29.617

```
$s = preg_replace("/<\?xml(.*?)\?>/i", "<xmlDeclaration$1>", $s);
$s = strip_tags($s, '<xmlDeclaration><' . implode('><', $allowedTags) . '>');
$s = preg_replace("/<xmlDeclaration(.*?)>/i", "<?xml$1?>", $s); 
```

# opencv - FFTW 与 OpenCV cvDFT

> ID：10436673
> 
> 赞同：8
> 
> 时间：2012-05-03T17:45:24.113
> 
> 标签：opencv, runtime, fftw, dft

使用 FFTW (http://www.fftw.org/) 而不是 OpenCV 的 cvDFT (http://goo.gl/YCHj0) 时，我可以期待加速吗？

我的程序的运行时间很大程度上取决于逆向和正向 DFT 的应用，我正在考虑使用 FFTW 而不是 OpenCV cvDFT。

IIRC FFTW 进行某种“运行时编译”，而 cvDFT 是一个简单的 FFT 实现，所以我想它可以加快我的处理速度。

所以在我自己尝试之前，我想在这里问一下，以防有人偶然发现同样的问题并在之前解决了它。

提前致谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-03T18:20:20.243

我都使用过（OpenCV 和 FFTW），您可以期望 FFTW 比 OpenCV 中更简单的实现更快（当然，这在很大程度上取决于您的处理器和图像大小）。但是，如果您打算在商业上使用您的软件，FFTW 有一个相当昂贵的许可证（7500.00 美元）。在商业案例中，我会推荐[英特尔的 IPP](https://software.intel.com/en-us/intel-ipp)而不是 FFTW，因为性能与价格相似的许可证（199.00 美元）相似，而且您在 IPP 中获得的功能比使用 FFTW（即，只有一个 FFT 库）要多得多。

[以下](http://www.fftw.org/speed/)是 FFTW 和各种竞争对手库之间的几个基准测试。结果有点旧，但用于比较。我不确定为什么不包括 IPP 2D 转换（也许当这些基准测试完成时它们还不存在）。

如果你走 IPP 路线，你可以构建带有 IPP 支持的 OpenCV，它将`cvDFT`用 IPP 等效替换本机实现。这将为您带来很好的性能提升（尤其是在英特尔芯片上），并且您不必更改代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-15T21:43:27.120

几个 FFT 选项之间的更新和相当完善的比较，有非常快速和免费的选项：

[https://github.com/project-gemmi/benchmarking-fft](https://github.com/project-gemmi/benchmarking-fft)

# php - 更改密码表格，如果没有结果

> ID：10436675
> 
> 赞同：0
> 
> 时间：2012-05-03T17:45:34.413
> 
> 标签：php, mysql

出于某种原因，我无法解决这个问题。

```
$result = mysql_query("SELECT `strPassword` FROM cf_user WHERE `strUserId`='$username'");

    if(!$result){
        echo "The username entered does not exist!";
    }
    else {

        if($newpassword == $confirmnewpassword){
        $sql = mysql_query("UPDATE cf_user SET `strPassword` = '$newpassword' WHERE `strUserId` = '$username'");        
        }

        if(!$sql){
        echo "Congratulations, password successfully changed!";
        }
        else{
        echo "New password and confirm password must be the same!";
        }
    } 
```

每次我得到“输入的用户名不存在”，即使我指定了用户名。我确定 !$results 表示不等于？我也试过一个 if (mysql_num_rows($result)==0), mysql_num_rows 不存在。

我在没有变量的情况下手动测试了 sql 命令，我得到了结果。我已经回应了表单结果，它们符合预期。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T17:48:40.673

您需要执行以下操作：

```
$result = mysql_query("SELECT user_id FROM cf_user WHERE `strUserId`='$username' AND strPassword='".md5($password)."' LIMIT 0,1");

if(mysql_num_rows($result)==0){
    echo "The username entered does not exist!";
}
.... 
```

`$result`不是实际结果，它是结果集的资源链接。

来自 PHP 手册：

> 对于 SELECT、SHOW、DESCRIBE、EXPLAIN 和其他返回结果集的语句，mysql_query() 成功时返回资源，错误时返回 FALSE。
> 
> 对于其他类型的 SQL 语句，INSERT、UPDATE、DELETE、DROP 等，mysql_query() 在成功时返回 TRUE，在错误时返回 FALSE。
> 
> 返回的结果资源应该传递给 mysql_fetch_array() 和其他处理结果表的函数，以访问返回的数据。
> 
> 使用 mysql_num_rows() 找出 SELECT 语句返回了多少行，或使用 mysql_affected_rows() 找出有多少行受到 DELETE、INSERT、REPLACE 或 UPDATE 语句的影响。
> 
> 如果用户无权访问查询引用的表，mysql_query() 也会失败并返回 FALSE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T00:28:20.500

根据您服务器的 php 版本，查询中的变量可能无法正确插入。

你有：

```
 $result = mysql_query("SELECT `strPassword` FROM cf_user WHERE `strUserId`='$username'"); 
```

尝试使用 php 连接运算符（句号），可能会有所帮助（不要居高临下，试试这个，这可能是问题所在。

```
 $result = mysql_query("SELECT `strPassword` FROM cf_user WHERE `strUserId`='".$username."' "); 
```

当然，这是对您所说的如果删除变量就可以工作的部分的回应。因此，我假设您对变量区域的查询存在错误。

我使用 premiumsoft NaviCat 来测试我的查询以确保它们工作，更容易排除故障。您可以通过将查询保存在变量中并回显它来查看您的查询是否正确编写，这样您将看到它是否正确输入。

IE。

```
$query = "SELECT `strPassword` FROM cf_user WHERE `strUserId`='".$username."' ";

// echoes to browser to see final sql statement.  Don't use in production environment, and make SURE to delete then going live!!!  It will expose you database names and field names to whoever runs the function...
echo $query;

$result = mysql_query($query); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-03T17:51:07.453

首先要做的事情是：该片段的编码不是很好。

首先，`mysql_query`当使用 for 时，`SELECT`仅针对错误返回 false。如果结果为空，则执行成功。

与 an 一起使用时，`UPDATE`它返回`true`成功，返回 false `error`。代码似乎出错了。因为当它返回 false 时，表示您已成功更改密码，但事实并非如此。

需要做的是：

```
$result = mysql_query("SELECT `strPassword` FROM cf_user WHERE `strUserId`='$username'");

if ($result !== FALSE) { //not an error
    if (mysql_num_rows($result) > 0) { //some rows have been returned
        if ($newPassword == $confirmPassword) {
            $query = mysql_query("UPDATE STATEMENT HERE");
            if ($query === TRUE) {
                die('Password changed');
            } else {
                die(mysql_error());
            }
        } else {
            die('Passwords don't match);
        }
    } else { //no rows returned
        die('Username not found');
    }
} else { //error
    die(mysql_error());
} 
```

*请注意，上面的代码只是一个示例，我不建议在 PROD 环境中使用它。没有输入转义。*

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-05-03T17:48:22.563

尝试 var_dump($result) 查看实际结果是否是密码

# distributed-transactions - VoltDB 是否完全支持多分区（或全局）事务的 ACID？

> ID：10436680
> 
> 赞同：1
> 
> 时间：2012-05-03T17:46:07.663
> 
> 标签：distributed-transactions, acid, voltdb

我目前在数据库方面的经验主要是 MS SQL、MySQL 和 oracle。当我偶然发现 VoltDB 时，我一直在寻找一些更具可扩展性的替代方案（许多 NoSQL 解决方案）。

它看起来很有趣，因为它维护了 SQL、事务和 ACID 的使用。他们网站上的常见问题解答似乎表明即使是多分区（可能跨多个服务器）事务也完全符合 ACID。但是它没有明确说明，我找不到任何其他来源证实这一事实，所以我想知道是否有人可以确认/否认它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T20:19:18.957

是的，VoltDB 支持具有完整 ACID 语义的跨分区事务。典型的工作负载通常是大部分单分区事务与一小部分跨分区事务的混合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T18:53:53.437

这是二手的，所以我可能误解了一些东西，但我和某人交谈过，他说 VoltDB 的工作原理是对数据进行分区，并阻止任何将更新分区的事务的开始，直到没有其他事务正在运行，这将访问该分区。一旦更新事务开始，在完成之前，其他事务都不能触及该分区。

这适用于某些工作负载，但不适用于其他工作负载。

# yii - 如何生成 Yii 报告

> ID：10436686
> 
> 赞同：1
> 
> 时间：2012-05-03T17:46:31.837
> 
> 标签：yii, yii-events

我是 Yii 的新手，我正在尝试使用一些用户输入生成一些报告（填写表格，然后单击“生成”）。我想查询我的数据库以查找日期范围内的一些交易，但我真的不知道该怎么做。

有人有我可以看的例子吗？

提前致谢。我非常感谢您的帮助。问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T05:46:46.573

通常报告仅由现有创建的交易记录。不需要为报告创建任何输入字段。**正如“jarchuleta”**的答案，您可以使用 crud 创建表单，对于日期范围报告，您可以[检查这个](https://stackoverflow.com/questions/9578629/yii-model-search-with-daterange-for-time-stamp)，问题可能无关紧要但我发布的代码是用于日期范围报告

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T18:24:30.453

在 Yii 中，您可以创建表格并使用 Gii crud 生成器来创建表单和视图。这种观点可以被视为一份报告。

你到底想要什么样的报告？

# php - 从计算机上传特定文件

> ID：10436690
> 
> 赞同：0
> 
> 时间：2012-05-03T17:46:52.460
> 
> 标签：php, jquery, html, file-upload

是否可以将特定文件从用户 PC 上传到服务器，但不使用文件表单元素？

我的客户需要这个 - 他不想从他的电脑中选择这些文件。

是否有可能像我们对其他元素一样定义文件表单元素的值？

提前谢谢你，希望这个问题不是基本问题。

**更多信息：**我们知道我们可以使用“文件”Web 表单元素在服务器上上传文件。通过使用此元素，我们从计算机中选择文件并将其上传到服务器上。好的，但是可以“跳过”文件选择，并上传特定文件（文件）而不用文件表单元素选择它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T17:57:31.830

我认为您最好的选择是使用[签名的 java 小程序](http://java.sun.com/developer/onlineTraining/Programming/JDCBook/signed.html)。首次启动小程序时，将提示最终用户授予某些权限（本地文件访问、网络访问），但可以通过让用户选中“信任发布者”复选框来抑制后续启动时的权限请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T18:01:56.103

在元素中使用`name`属性`input`，并告诉客户使用支持该属性的合适版本的 Opera。像 Opera 7 这样的东西。可能很难找到。

我知道这个答案可能听起来很讽刺，但这希望能说明这种情况：文件输入最初旨在允许指定默认文件名，这在某些浏览器中仅实现了一段时间，现在的借口是“安全”，即浏览器供应商不想实施适当的安全预防措施，他们将这个问题描述为好像这个*想法*本身是“不安全的”。</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T17:50:20.283

并非没有外部插件的帮助。浏览器已锁定文件元素，因为允许任何网站自动从您的计算机上传文件会带来安全风险。

编辑：既然我看到你想要完成什么，为什么要通过浏览器？为什么不在不通过网络的服务器中设置他的计算机之间的某种同步？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T17:50:43.503

应该选择文件以便加密，加密由它的数据组成，所以出于安全原因浏览器不允许默认值没有文件注入，所以答案是否定的，你仍然需要使用`<input type="file">`没有默认值，[阅读此内容](http://www.velocityreviews.com/forums/t159949-value-attribute-in-element-input-type-file.html)以获取更多信息。

# c# - EF + async = 创建模型时不能使用上下文？

> ID：10436691
> 
> 赞同：3
> 
> 时间：2012-05-03T17:46:59.827
> 
> 标签：c#, wpf, entity-framework

设置非常标准。使用 SQL Server 连接字符串创建了一个视图和存储库。将视图模型传递给存储库，并在视图模型的构造函数上调用存储库中的集合。一切正常，直到我尝试使用 async/await 组合异步执行此操作，但现在在调用存储库的集合时出现错误“在创建模型时无法使用上下文”。

旧工作代码：

```
void FillPeopleList()
{
  PeopleList = _repository.GetPeople();
} 
```

新破代码：

```
async void FillPeopleList()
{
  await Task.Run(()=>
  {
    PeopleList = _repository.GetPeople(); // Error
  });
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-03T17:51:38.503

EF 不是线程安全的。

您不能在多个线程上使用相同的上下文。

# servlets - 使用 midlet 连接到 servlet 的问题

> ID：10436694
> 
> 赞同：3
> 
> 时间：2012-05-03T17:47:15.283
> 
> 标签：servlets, java-me, lwuit, midp

我正在尝试使用我的 j2me 应用程序连接到 Servlet，但它没有发生。

情况1：

1）在本地机器上部署servlet。

2)用j2me app连接本地机器上的servlet，等待servlet返回aa值

3)J2ME 从servlet 获取值并显示在屏幕上。

工作顺利！

案例二：

1) 在远程机器上部署 servlet。

2)用j2me app连接到远程机器上的servlet，等待servlet返回aa值

3)J2me 得到一个错误，说空响应。为什么？

这是我的代码：

案例一：MIDlet 部署在本地机器上

```
HttpConnection c = (HttpConnection) Connector.open("http://localhost:8999/PercentileCalculator/PercentileCalculator");
                c.setRequestProperty("User-Agent","Profile/MIDP-2.0, Configuration/CLDC-1.1");
                c.setRequestProperty("Content-Language","en-US");
                c.setRequestMethod(HttpConnection.POST); 
                DataOutputStream os = (DataOutputStream)c.openDataOutputStream();

                os.writeUTF("100");
                os.writeUTF("Test 1");
                os.writeByte(12);
                os.flush();
                os.close();

                // Get the response from the servlet page.
                DataInputStream is =(DataInputStream)c.openDataInputStream(); 
```

案例 2：MIDlet 部署在远程机器上

```
HttpConnection c = (HttpConnection) Connector.open("Url goes here");

                    c.setRequestProperty("User-Agent","Profile/MIDP-2.0, Configuration/CLDC-1.1");
                    c.setRequestProperty("Content-Language","en-US");
                    c.setRequestMethod(HttpConnection.POST); 
                    DataOutputStream os = (DataOutputStream)c.openDataOutputStream();

                    os.writeUTF("100");
                    os.writeUTF("Test1");
                    os.writeByte(12);
                    os.flush();  -->Exception thrown here.
                    os.close();

                    // Get the response from the servlet page.
                    DataInputStream is =(DataInputStream)c.openDataInputStream(); 
```

可能是什么问题？

### 更新 1：5 月 5 日星期日 12.01AM

我可以使用我的 midlet 调用我的远程 servlet。我编写了一个 sql 来连接到 mysql 数据库，并为 midlet 对远程 servlet 的每次调用添加一个新行。是的，这行得通。

现在的问题是......为什么远程 servlet 无法将值返回到我的 midlet。为什么我总是得到一个空的响应？

### 更新 2：5 月 8 日星期二上午 9.46

在案例 2 中，我将 URL 替换为以下内容：

1.  www.google.com --> 得到了来自 google 的响应 ..some xml 字符串
2.  www.facebook.com --> 得到响应..这实际上是一个空指针异常
3.  m.facebook.com--> 得到来自 facebook 的响应...一些 xml 字符串
4.  www.yahoo.com ---> 没有回应

现在我觉得我的servlet 需要打印一个xml 字符串而不是一个普通的http 页面。请倒入...

### 更新 3 8.41am 5 月 14 日星期一

我尝试使用我的 j2me 代码访问朋友网站。也就是说，我只是将案例 2 中的 URL 替换为[http://www.friend](http://www.friend) 'sURL.in --> working(got a response)

然后，我尝试了[http://www.mywebsiteURL.in](http://www.mywebsiteURL.in) --> 空响应

所以，我觉得我的服务器/虚拟主机有问题……不知道。

### 更新 4 2012 年 5 月 22 日星期二

根据 telmo 的建议，我查看了我的服务器日志，它们如下：

### 1）日志字段

#Fields: date time s-sitename s-computername s-ip cs-method cs-uri-stem c-uri-query s-port cs-username c-ip cs-version cs(User-Agent) cs(Cookie) cs (Referer) cs-host sc-status sc-substatus sc-win32-status sc-bytes cs-bytes time-taken

### 2）使用我的桌面来自浏览器的请求（已显示 2 个请求）

```
2012-05-21 04:39:06 W3SVC6826 BJJI-GLOBEDNS 67.227.164.68 GET /Servlet/PercentileCalculator - 80 - 116.203.33.229 HTTP/1.1 Mozilla/5.0+(Windows+NT+6.1;+WOW64)+AppleWebKit/536.5+(KHTML,+like+Gecko)+Chrome/19.0.1084.46+Safari/536.5 - - n10k.in 200 0 0 485 395 421

2012-05-21 04:39:08 W3SVC6826 BJJI-GLOBEDNS 67.227.164.68 GET /favicon.ico - 80 - 116.203.33.229 HTTP/1.1 Mozilla/5.0+(Windows+NT+6.1;+WOW64)+AppleWebKit/536.5+(KHTML,+like+Gecko)+Chrome/19.0.1084.46+Safari/536.5 - - n10k.in 200 0 0 17863 318 2203 
```

### 3）来自我的 midlet（我的 PC 上的模拟器）的请求（显示了 2 个请求）

```
2012-05-21 04:43:17 W3SVC6826 BJJI-GLOBEDNS 67.227.164.68 POST /Servlet/PercentileCalculator - 80 - 116.203.33.229 HTTP/1.1 Profile/MIDP-1.0,+Configuration/CLDC-1.0 - - n10k.in 200 0 0 0 196 468

2012-05-21 04:43:25 W3SVC6826 BJJI-GLOBEDNS 67.227.164.68 POST /Servlet/PercentileCalculator - 80 - 116.203.33.229 HTTP/1.1 Profile/MIDP-1.0,+Configuration/CLDC-1.0 - - n10k.in 200 0 0 0 196 453 
```

### 日志分析

因此，我尝试分析日志，但未能成功解释它们。我可以在浏览器请求和 midlet 请求之间做出的唯一区别是：

*浏览器请求返回响应*-> 200 0 0 17863 318 2203

*Midlet 请求返回响应*-> 200 0 0 0 196 453

在 midlet 请求的情况下，第 4 个数字（SC Bytes -> Bytes Sent）是 0。这就是我能做的全部。有人可以帮忙吗？

**更新 5 2012 年 6 月 1 日星期五晚上 11 点 33 分**

1）我在我的服务器上创建了一个 HTML 文件，然后尝试使用 midlet 访问它，我可以访问它。

2）接下来，我创建了一个 PHP 页面，然后尝试使用 midlet 访问它，我可以访问它。

3）然后我尝试访问一个 JSP 页面并得到一个空响应。

4) 我尝试访问部署在我的服务器上的所有 servlet，但总是得到一个空响应。

5) 我试图访问互联网上的一些 servlet，但找不到任何。

***推理***

我的 servlet 输出 HTML 页面的方式有些可疑。我已经在这里发布了那段代码。请协助。

```
protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        try{

            response.setContentType("text/html");
        reply = response.getWriter(); 

            reply.println("<html><head><meta http-equiv=\"Content-Type\" content=\"text/html\"><title>Nikhil D</title></head><body>hmmm</body></html>");           
           reply.close();
           reply.flush();

        }
        catch(Exception e)
        {

        } 
```

我不太能弄清楚这里出了什么问题。它可能是我的服务器呈现我的 servlet/JSP 页面的方式。不知道！

**更新 6：2012 年 6 月 13 日**

不能在这上面浪费更多时间。解决方法发布在下面的答案中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T12:13:30.927

所以在所有这些研究之后，这就是我所做的：

1) 将参数从 MIDlet 传递到我服务器上的 PHP 页面。

2) 将参数从 PHP 页面转发到我的 SERVLET

3) PHP页面收集SERVLET的结果

4) MIDlet 从 PHP 页面读取结果。

大当！作品！

# python - 用于从 XML 文件中删除所有注释的 Python 脚本

> ID：10436695
> 
> 赞同：7
> 
> 时间：2012-05-03T17:47:20.800
> 
> 标签：python, xml, dom, xpath

我正在尝试构建一个 python 脚本，它将接收 XML 文档并从中删除所有注释块。

我尝试了一些类似的东西：

```
tree = ElementTree()
tree.parse(file)
commentElements = tree.findall('//comment()')

for element in commentElements:
    element.parentNode.remove(element) 
```

这样做会从 python 产生一个奇怪的错误：“KeyError: '()'

我知道有一些方法可以使用其他方法（如 sed ）轻松编辑文件，但我必须在 python 脚本中进行。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-03T18:51:33.210

`comment()`是 ElementTree 不支持的 XPath 节点测试。

您可以`comment()`与**[lxml](http://lxml.de/index.html)**一起使用。这个库与 ElementTree 非常相似，并且完全支持 XPath 1.0。

以下是使用 lxml 删除注释的方法：

```
from lxml import etree

XML = """<root>
  <!-- COMMENT 1 -->
  <x>TEXT 1</x>
  <y>TEXT 2 <!-- COMMENT 2 --></y>
</root>"""

tree = etree.fromstring(XML)

comments = tree.xpath('//comment()')

for c in comments:
    p = c.getparent()
    p.remove(c)

print etree.tostring(tree) 
```

输出：

```
<root>
  <x>TEXT 1</x>
  <y>TEXT 2 </y>
</root> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-08-29T17:13:52.717

使用 lxml.etree 中的 strip_tags()

```
from lxml import etree
XML = """<root>
  <!-- COMMENT 1 -->
  <x>TEXT 1</x>
  <y>TEXT 2 <!-- COMMENT 2 --></y>
  </root>"""

tree = etree.fromstring(XML)
print etree.tostring(tree)
etree.strip_tags(tree,etree.Comment)
print etree.tostring(tree) 
```

输出：

```
<root>
<!-- COMMENT 1 -->
<x>TEXT 1</x>
<y>TEXT 2 <!-- COMMENT 2 --></y>
</root>
<root>

<x>TEXT 1</x>
<y>TEXT 2 </y>
</root> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-11-12T21:51:44.760

一样

[https://stackoverflow.com/a/3317008/1458574](https://stackoverflow.com/a/3317008/1458574)

```
from lxml import etree
import sys

XML = open(sys.argv[1]).read()
parser =  etree.XMLParser(remove_comments=True)
tree= etree.fromstring(XML, parser = parser)
print etree.tostring(tree) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-06T12:05:00.160

这是我使用 minidom 实现的解决方案：

```
 def removeCommentNodes(self):
        for tag in self.dom.getElementsByTagName("*"):
            for n in tag.childNodes:
                if n.nodeType is dom.Node.COMMENT_NODE:
                    n.parentNode.removeChild(n) 
```

在实践中，我首先检索 xml 中的所有标签，然后为每个标签查找注释节点，如果找到，我将其删除。（self.dom 是对解析后的 xml 的引用）

# html - float 与绝对和相对 div 定位有何关系？

> ID：10436698
> 
> 赞同：2
> 
> 时间：2012-05-03T17:47:31.487
> 
> 标签：html, css-float, css-position

我之前问过一个关于[绝对和相对 div 定位](https://stackoverflow.com/questions/8599929/how-does-relative-and-absolute-positioning-work-with-embedded-divs)的问题，但我想尝试理解（肯定）`float`在这种情况下的作用。

我的主要问题是：如何`float`关联`absolute`和`relative` `div`定位？

以下陈述是否正确（是/否）：

1.  `float right`(or `left`) 将尝试`div`从`right`(or `left`) 开始一个接一个地堆叠。如果没有足够的空间（`width`问题），`div`s 将显示在下一个“行”（从上到下）。
2.  `float`永远不会影响`absolute div`，`absolute`覆盖`float`
3.  `relative div`相对于第一个封闭物定位`relative div`（`absolute div`s 被忽略）
4.  `float right`（或`left`） a`div`将首先计算 a 的自然位置`relative div`，然后添加任何左上角偏移来计算最终位置。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T19:16:35.743

向左或向右浮动将彼此相邻，除非宽度为 100%，否则它们将位于彼此下方：

![在此处输入图像描述](../Images/5f076a50da0731a25624c8a125cffeb2.png)

希望这是有道理的，并且是您正在寻找的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T17:53:33.890

[http://www.barelyfitz.com/screencast/html-training/css/positioning/](http://www.barelyfitz.com/screencast/html-training/css/positioning/) 7,8 和 9

> 使用 CSS 浮动，一个元素可以向左或向右推，允许其他元素环绕它。

您提供的陈述“似乎”正确

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T18:04:00.483

绝对定位的划分仅与位置不是静态的第一个祖先元素相关，这就是它如何通过其顶部、右侧、底部、左侧属性确定其最终位置的方式。绝对定位的元素不能浮动，因为它已从文档流中删除。

我对你的第 3 点感到困惑，这没有多大意义。相对分割将呈现分割，因为它通常会出现在文档中。然后可以使用其 top、left、bottom、right 属性来移动它，同时**仍然保持**它没有被移动到任何地方时*会*使用的相同位置。相对定位的元素可以像任何普通元素一样浮动，并且在您移动它时不会影响其他浮动元素的最终位置。

# ruby-on-rails - 在 mixin/module 中覆盖模型的属性访问器

> ID：10436700
> 
> 赞同：5
> 
> 时间：2012-05-03T17:47:41.703
> 
> 标签：ruby-on-rails, ruby

我有一个包含模块的模型。我想在模块中覆盖模型的访问器方法。

例如：

```
class Blah < ActiveRecord::Base
  include GnarlyFeatures
  # database field: name
end

module GnarlyFeatures
  def name=(value)
    write_attribute :name, "Your New Name"
  end
end 
```

这显然是行不通的。有什么想法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-03T18:00:36.700

您的代码看起来正确。我们使用这种精确的模式没有任何麻烦。

如果我没记错的话，Rails 使用 #method_missing 作为属性设置器，所以你的模块将优先，阻止 ActiveRecord 的设置器。

如果您使用 ActiveSupport::Concern（请参阅[此博客文章](http://www.fakingfantastic.com/2010/09/20/concerning-yourself-with-active-support-concern/)，那么您的实例方法需要进入一个特殊模块：

```
class Blah < ActiveRecord::Base
  include GnarlyFeatures
  # database field: name
end

module GnarlyFeatures
  extend ActiveSupport::Concern

  included do
    def name=(value)
      write_attribute :name, value
    end
  end
end 
```

# actionscript-3 - AS3 是否可以复制 Shape 对象？

> ID：10436701
> 
> 赞同：3
> 
> 时间：2012-05-03T17:47:43.633
> 
> 标签：actionscript-3, flash

我正在尝试使形状可用于复制。这是对我所做的事情，我正在尝试做的事情以及我被困在哪里的解释：

*   在 Flash IDE（画笔）中手动绘制形状。
*   创建了一个包含该形状的新影片剪辑；作为一个类导出。
*   实例化类 (var mc:MovieClip = new shapeMovieClip())。
*   *在mc*中添加我想要的形状的引用(var myShape:Shape = mc.getChildAt(0) as Shape;
*   **这很完美，我现在有了自己的形状，但是如何在不实例化父 MovieClip 类的情况下复制它——这可能吗？**

我尝试创建一个新形状并使用 copyFrom() 图形方法无济于事，我相信这个方法只是在引用图形上进行绘制调用时复制它们，而我只是有一个已经存在的形状的引用画。

现在我将影片剪辑扩展为精灵，实例化，从父级拉出形状并保存其引用，然后将精灵归零。有谁知道以这种方式复制形状的更好、更轻量级的策略？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T08:59:52.580

基本上取决于您是否需要缩放形状。如果您不这样做，并且您可以使用形状的固定大小的位图表示来解决它，那么您将获得更好的性能将您的形状绘制到 BitmapData （称为[rasterisation](http://en.wikipedia.org/wiki/Rasterisation)）和实例化 Bitmap 对象（正如其他评论者指出的那样出去）。代码会是这样的：

```
var base:Sprite = new shapeMovieClip();
var bmd:BitmapData = new BitmapData(base.width, base.height, true, 0);
bmd.draw(base);
var clip1:Bitmap = new Bitmap(bmd);
var clip2:Bitmap = new Bitmap(bmd); 
```

如果您确实需要缩放剪辑，您将使用位图获得像素化。当缩小 Bitmap.smoothing 可以在一定程度上有所帮助（旋转时也是如此），但如果你需要放大，你可能不得不使用某种[mip-mapping](http://en.wikipedia.org/wiki/Mipmap)。这基本上是创建几个不同比例级别的形状位图，然后根据当前比例交换它们。对此进行编码具有一定的复杂性（使用辅助父级来调整比例会有所帮助），但它肯定会比使用许多形状符号（有或没有精灵父级）表现得更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-10T18:08:34.267

这个很老了，但是在谷歌上还是很高的，所以我只是想分享一个真实的形状复制方法：

```
var shapeonstage:Shape = shapeMadeInIDE;
var g:Vector.<IGraphicsData> = shapeonstage.graphics.readGraphicsData();

var shapecopy:Shape = new Shape();
shapecopy.graphics.drawGraphicsData(g) 
```

和繁荣。有用。不得不分享这个，因为它会在很久以前和很多方面帮助我。

**更新：**

有一些说明，我想补充一下为什么要使用此方法，用于复制和存储对 swf 中形状的引用。

如果您定位舞台上或影片剪辑中的 Shape 对象，Flash 渲染引擎会做一些奇怪的事情。它将回收 Shape 对象以渲染新图形，从而使您的 Shape 参考点指向完全不同的渲染。

例如：

*   使用影片剪辑创建 fla。
*   在影片剪辑内部制作 10 帧。
*   在每一帧上，绘制不同的形状
*   在您的代码中，获取对形状的引用（第 1 帧上的形状）
*   绘制并验证您的形状（绘制位图，然后将 bmp 放在舞台上）
*   现在让 flash 引擎播放 5 帧
*   再次绘制并验证您的形状

第二次绘制形状而不重新分配形状参考时，有时会产生完全不同的形状。

只要知道，如果你不知道你在找什么，这个小怪癖会让你把头发拉出来:)

# sql - 创建一个只有表 A 属性子集的表 B

> ID：10436711
> 
> 赞同：1
> 
> 时间：2012-05-03T17:48:33.067
> 
> 标签：sql, sqlite, postgresql

数据库软件：SQLITE

考虑这种情况：表 X 具有属性：A、B、C、D、1、2、3、4 表 Y 需要具有：A、B、C、D

数据库大小接近 30GB。存储 A、B、C、D 的记录似乎是多余的。

我想知道是否有任何方法可以创建一个“虚拟”表，这样如果程序调用表 Y，它仍然会从 X 读取数据，但只能读取 A、B、C、D 属性。

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T17:51:14.777

```
CREATE VIEW B AS (SELECT a,b,c FROM X) 
```

对于 SQLite，请参阅[此链接](http://sqlite.org/lang_createview.html)。
对于 Postgres，请参见[此处](http://www.postgresql.org/docs/current/interactive/sql-createview.html)。

# apache - 需要从 URL htaccess 中删除某些 URL 路径

> ID：10436717
> 
> 赞同：0
> 
> 时间：2012-05-03T17:48:59.467
> 
> 标签：apache, .htaccess, url, mod-rewrite

好的，我是 ht 访问的新手，我一直在网上搜索这个问题的答案。我目前正在使用 Interspire 购物车并在 URL 中添加某些路径，例如：在 URL 的真正 SEO 部分开始之前的类别、产品、页面和品牌。糟透了。我正在寻找一种方法来摆脱这个在 htaccess 中的 mod_rewite。以下是一些更直观的示例：

当前：case.com/**类别**/Amazon-Kindle-Cases/

希望它是这样的：cases.com/Amazon-Kindle-Cases/

当前：**cases.com/products/Piel-Frama-559-iMagnum-Black-Leather-Case-for-Amazon-Kindle-Fire.html**

希望它是这样的：cases.com/Piel-Frama-559-iMagnum-Black-Leather-Case-for-Amazon-Kindle-Fire.html

当前：**case.com/brands/PDair.html**

希望它是：cases.com/PDair.html

当前：**cases.com/pages/News.html**

希望它是：cases.com/News.html

我需要为每一个重写还是可以一次完成。 **谢谢**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T17:53:48.790

```
RewriteCond $1 ^(products|brands|pages|categories)
RewriteRule ^(products|brands|pages)(.*)$ $2 [L] 
```

那行得通吗？

进一步来说：

```
RewriteEngine on
RewriteCond $1 ^(products|brands|pages|categories)
RewriteRule ^(products|brands|pages)(.*)$ http://cases.com$2 [L] 
```

# salesforce - salesforce.com - 报表访问中基于角色的层次结构

> ID：10436719
> 
> 赞同：0
> 
> 时间：2012-05-03T17:49:22.810
> 
> 标签：salesforce

我想创建一个场景，人们可以根据他们在层次结构中的角色和级别访问报告。例如，向销售总监报告的销售代表不应该访问销售总监拥有的报告，但是销售主管可以访问销售代表可以访问的所有报告，此外还可以访问与销售代表无关的少数其他报告。你能帮我解决一下吗？在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T12:54:45.733

报告安全性在报告文件夹级别设置。为主管创建一个文件夹，将他的报告放在该文件夹中，并将文件夹可访问性设置为他的角色（或公共组）。对于销售人员，创建一个不同的文件夹并将其安全设置为主管角色 + 下属（或两者的公共组）。

# wcf - 使用 WCF 工具添加操作行为

> ID：10436724
> 
> 赞同：4
> 
> 时间：2012-05-03T17:49:38.257
> 
> 标签：wcf, castle-windsor, wcffacility

我第一次使用 WCF 工具在控制台应用程序（便于调试）和 IIS（用于生产）中托管几个服务。这些服务使用**net.msmq**端点。

这就是我在控制台应用程序中托管服务的方式（简化）：

```
using (var host = new DefaultServiceHostFactory() 
                    .CreateServiceHost(typeof(MyService).AssemblyQualifiedName, 
                                       new Uri[0])) 
    host.Open(); 
```

这是它的注册方式：

```
container.Register(Component.For<UserRequestService>()
                            .LifestylePerWcfOperation()) 
```

我想做的是将以下行为添加到所有操作中：

```
[OperationBehavior(TransactionScopeRequired = true,
                   TransactionAutoComplete = true)] 
```

这是我尝试过的：

```
container.Register(Component.For<IOperationBehavior>() 
                            .UsingFactoryMethod(
                                x => new OperationBehaviorAttribute 
                                { 
                                    TransactionScopeRequired = true, 
                                    TransactionAutoComplete = true 
                                })); 
```

但这会导致异常：

```
System.ArgumentException: The value could not be added to the collection, as the collection already contains an item of the same type: 'System.ServiceModel.OperationBehaviorAttribute'. This collection only supports one instance of each type.
Parameter name: item
   at System.Collections.Generic.KeyedByTypeCollection`1.InsertItem(Int32 index, TItem item)
   at Castle.Facilities.WcfIntegration.Internal.WcfUtils.AddBehaviors[T](IKernel kernel, WcfExtensionScope scope, KeyedByTypeCollection`1 behaviors, IWcfBurden burden, Predicate`1 predicate)
   at Castle.Facilities.WcfIntegration.WcfEndpointExtensions.Install(ServiceEndpoint endpoint, Boolean withContract, IKernel kernel, IWcfBurden burden)
   at Castle.Facilities.WcfIntegration.ServiceHostExtensions.Castle.Facilities.WcfIntegration.IWcfExtensionVisitor.VisitEndpointExtension(IWcfEndpointExtension extension)
   at Castle.Facilities.WcfIntegration.ServiceHostExtensions.Install(ICollection`1 extensions, IWcfBurden burden)
   at Castle.Facilities.WcfIntegration.AbstractServiceHostBuilder.ConfigureServiceHost(ServiceHost serviceHost, IWcfServiceModel serviceModel, ComponentModel model)
   at Castle.Facilities.WcfIntegration.AbstractServiceHostBuilder`1.Build(ComponentModel model, Uri[] baseAddresses)
   at Castle.Facilities.WcfIntegration.WindsorServiceHostFactory`1.CreateServiceHost(String constructorString, Uri[] baseAddresses)
   at Program.Main() 
```

有任何想法吗？

# z3 - Quantifier Elimination - More questions

> ID：10436726
> 
> 赞同：5
> 
> 时间：2012-05-03T17:49:46.930
> 
> 标签：z3

Many thanks Josh and Leonardo for answering the previous question.

I have few more questions.

<1> Consider another example.

```
(exists k) i * k > = 4 and k > 1. 
```

This has a simple solution i > 0\. (both for Int and Real case)

However, when I tried following,

```
(declare-const i Int)
(assert (exists ((k Int)) (and (>= (* i k)  4) (> k 1))))
(apply (using-params qe :qe-nonlinear true)) 
```

Z3 Could not eliminate quantifier here.

However, it could eliminate for a Real case. (when i and k are both reals) Is Quantifier Elimination more difficult for integers?

<2> I am using Z3 C API in my system. I am adding some non-linear constraints on Integers with quantifiers in my system. Z3 currently checks for satisfiability and gives me a correct model when the system is satisfiable.

I know that after quantifier elimination, these constraints get reduced to linear constraints.

I thought that z3 does quantifier elimination automatically before checking satisfiability. But since, it couldn't do that in case 1 above, I now think, that it usually finds a model without Quantifier Elimination. Am I correct?

Currently z3 can solve the constraints in my system. But it may fail on complex systems. In such case, is it a good idea to do quantifier elimination by some other method without z3 and add constraints to z3 later?

<3> I can think of adding Real non-linear constraints instead of Integer non-linear constraints in my system. In that case, how can I enforce z3 to do Quantifier Elimination using C-API ?

<4> Finally, is this a good idea to enforce z3 to do Quantifier Elimination? Or it usually finds a model more intelligently without doing Quantifier Elimination?

Thanks.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T19:10:54.213

<1> The theory of nonlinear integer arithmetic does not admit quantifier elimination (qe). Moreover, the decision problem for nonlinear integer arithmetic is undecidable.

Recall that, Z3 has limited support for quantifier elimination of nonlinear real arithmetic formulas. The current procedure is based on virtual term substitution. Future versions, may have full support for nonlinear real arithmetic.

<2> Quantifier elimination is *not* enabled by default. The user must request it. Z3 may find models for satisfiable formulas even when quantifier elimination is not enabled. It uses a technique called model-based quantifier instantiation (MBQI). The [Z3 online tutorial](http://rise4fun.com/Z3/tutorial/guide) has several examples describing capabilities and limitations of this technique.

<3> You have to enable it when you create the Z3_context object. Any option that is set in the command line, can be provided during Z3_context object creation. Here is an example, that enables model construction and quantifier elimination:

```
Z3_config cfg = Z3_mk_config();
Z3_context ctx;
Z3_set_param_value(cfg, "MODEL", "true");
Z3_set_param_value(cfg, "ELIM_QUANTIFIERS", "true");
Z3_set_param_value(cfg, "ELIM_NLARITH_QUANTIFIERS", "true");
ctx = mk_context_custom(cfg, throw_z3_error);
Z3_del_config(cfg); 
```

After that, `ctx` is pointing to a Z3 context object that supports model construction and quantifier elimination.

<4> The MBQI module is not complete even for the linear arithmetic fragment. The Z3 online tutorial describes the fragments it is complete. MBQI module is a good option for problems that contain uninterpreted functions. If your problems only use arithmetic, then quantifier elimination is usually better and more efficient. That being said, several problems can be quickly solved using MBQI.

# iphone - 从 nib 文件加载视图

> ID：10436730
> 
> 赞同：1
> 
> 时间：2012-05-03T17:50:01.987
> 
> 标签：iphone, objective-c, ios

所以我有一个观点，我把它放在另一个 .xib 文件中。它也有自己的 .h/.m 文件。

我试图在我的 mainViewController 中分配它的一个实例，我不断得到：

```
Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[<XXX 0x1c556390> setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key XXX 
```

我正在使用以下代码

```
NSArray* nibViews = [[NSBundle mainBundle] loadNibNamed:@"SubviewClass"
                                                  owner:self
                                                options:nil];
self.subview = (SubviewClass *)[nibViews objectAtIndex:0];
self.subview.frame = CGRectMake(82, 182, 155, 96);
[self.view addSubview:self.subview]; 
```

但是它一直在第一行崩溃。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T17:53:12.543

您的`SubviewClass`笔尖有一个连接到不存在的插座的对象。检查笔尖中每个对象的连接，并检查所有者是否正确以及是否有您要连接的插座。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T17:56:06.810

在您的笔尖中，您有一个视图或控件，该视图或控件映射到笔尖所有者上不存在的属性，在您的代码中是任何对象调用

```
 NSArray* nibViews = [[NSBundle mainBundle] loadNibNamed:@"SubviewClass"
                                                  owner:self
                                                options:nil]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T17:53:11.737

我怀疑你的 nib 文件有问题。检查来自控制器对象的所有连接...

# java - Hibernate 模板翻译

> ID：10436736
> 
> 赞同：0
> 
> 时间：2012-05-03T17:50:34.610
> 
> 标签：java, spring, hibernate, validation

我需要一个自定义约束来验证一个值是唯一的。我已经在互联网上搜索了很长时间，以找到一个很好的例子。我发现的一个是使用不再推荐的休眠模板，所以我想知道是否有人具有“翻译”此代码的专业知识，以便它不使用模板。我试过自己做，但我不明白 getter 和 setter 的用途。这是我从[这个有用的指南中获得的代码。](http://omgo.wordpress.com/2009/10/25/creating-a-jsr-303-style-unique-value-annotation-and-using-it-in-spring-3-mvc/)

```
package com.omgo.security.domain.validator;

import java.io.Serializable;
import java.util.List;
import javax.validation.ConstraintValidator;
import javax.validation.ConstraintValidatorContext;
import org.hibernate.SessionFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.orm.hibernate3.HibernateTemplate;

public class UniqueIDValidator implements ConstraintValidator<Unique, Serializable> {

HibernateTemplate hibernateTemplate;

private Class<?> entityClass;
private String uniqueField;

public void initialize(Unique unique) {
    entityClass = unique.entity();
    uniqueField = unique.property();
}

public boolean isValid(Serializable property, ConstraintValidatorContext cvContext) {

    String query = String.format("from %s where %s = ? ", entityClass.getName(), uniqueField);
    List<?> list = hibernateTemplate.find(query, property);

    return list != null && list.size() > 0;
}

public SessionFactory getSessionFactory() {
    return hibernateTemplate != null ? hibernateTemplate.getSessionFactory() : null;
}

@Autowired
public void setSessionFactory(SessionFactory sessionFactory) {
    this.hibernateTemplate = new HibernateTemplate(sessionFactory);
}
} 
```

感谢您的帮助。

/D

**更新** 更改代码后，我收到此错误：

```
org.hibernate.HibernateException: No Hibernate Session bound to thread, and configuration does not allow creation of non-transactional one here 
```

所以我在想，也许我没有正确注入 SessionFactory？

UniqueIdValidator.java：

```
package testapp.mis.validator;
import java.io.Serializable;
import javax.validation.ConstraintValidator;
import javax.validation.ConstraintValidatorContext;

import org.hibernate.Criteria;
import org.hibernate.SessionFactory;
import org.hibernate.criterion.Restrictions;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.transaction.annotation.Transactional; // Added in update 2

public class UniqueIdValidator implements ConstraintValidator<Unique, Serializable> {

@Autowired(required=true)
private SessionFactory sessionFactory;

private Class<?> entityClass;
private String uniqueField;

public void initialize(Unique unique) {
    entityClass = unique.entity();
    uniqueField = unique.property();
}

    @Transactional //Added in update 2 and validation works after that
public boolean isValid(Serializable property, ConstraintValidatorContext cvContext) {
    Criteria crit = sessionFactory.getCurrentSession().createCriteria(entityClass);
    crit.add(Restrictions.eq(uniqueField, property));
    return crit.list().isEmpty();
} 
```

**更新 2** 我通过在代码中添加 @Transactional 使其工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T17:55:28.470

它使用普通的 HQL，您可以通过使用 Criteria API 来实现更简单的操作，例如：

```
public boolean isValid(Serializable property, ConstraintValidatorContext cvContext) {
    Criteria crit = sessionFactory.getCurrentSession().createCriteria(entityClass);
    crit.add(Restrictions.eq(uniqueField, property));
    return crit.list().isEmpty();
} 
```

那应该检查唯一性。

无需注入休眠模板，只需注入您也应该在 spring 上下文中配置的 SessionFactory。

希望你觉得它有用！

# ruby - Ruby 没有拾取 .gemrc

> ID：10436744
> 
> 赞同：0
> 
> 时间：2012-05-03T17:51:10.167
> 
> 标签：ruby, rvm

我在系统 ruby​​ 上运行 gem 时遇到问题——我已经完成了安装，并且 gem 在 rvm 运行 1.9.2 时运行，但不在 rvm 系统上运行，尽管它也是 1.9.2。操作系统是 OSX 10.6.8。

一个重要差异似乎是 GEM_HOME，如 rvm info 中所示。这是为 rvm 1.9.2 设置的 ~/.gemrc 中的值，但不是为 rvm 系统设置的。

所以猜测，系统红宝石没有读取 .gemrc 文件。

有没有办法验证这一点？我该如何纠正？

系统 ruby​​ 是从源代码安装的。

有问题的宝石是指南针，版本 0.12.1。0.11.5 的安装也失败了。此外，gem -v 是 1.5.3。那是回滚，我使用的是 1.8.24，但也失败了，我回滚到之前的版本，看看是否有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T19:49:55.790

Ruby 系统不知道您在 RVM 管理的 Ruby 中安装的任何 gem，也不关心`.gemrc`文件。

系统 Ruby 是独立存在的，对于大多数用途而言，它应该保留为 Apple 安装的样子，除非你真的知道它为什么存在以及它会影响什么。Apple 有自己安装 Ruby 的原因，并且至少有一个 Apple 默认安装在 Mac OS 机器上的应用程序需要它。我们可以免费使用它，但删除它会破坏该应用程序，更新它可能会导致可能不会立即出现的问题，所以我认为最好忽略它。

如果我*需要*一个用于 Mac 的系统范围的 Ruby，我会将它从源代码安装到`/usr/local/bin`，这是替换的合适位置。对于我自己的开发，我使用 RVM 或 rbenv，并让它们安装在我的主目录中，这是它们的默认设置。这样我就可以随心所欲地乱搞，甚至把它们吹走，而不会影响系统。

顺便说一句，Ruby 的版本并不重要，重要的是安装它的版本和安装位置。

# automation - 当 UI 脚本需要支持不同语言的相同应用程序时，所有事情都需要考虑

> ID：10436746
> 
> 赞同：1
> 
> 时间：2012-05-03T17:51:19.660
> 
> 标签：automation, ui-automation, coded-ui-tests

我们使用 Microsoft UIA 开发了一些 UI 自动化脚本，用于自动化在 wpf 中开发的应用程序。目前我们的开发团队正在努力支持法语并在应用程序中进行必要的修改。在脚本中，我们通过名称或 ID 属性使用了所有控件，并希望它不会在不同的语言环境中失败。

仍然希望启动此线程以了解在将支持一种语言环境的自动化脚本移动到另一种语言环境时需要考虑的所有事情。

提前谢谢了！

# c# - WP7：用户控件的绑定问题

> ID：10436747
> 
> 赞同：0
> 
> 时间：2012-05-03T17:51:21.203
> 
> 标签：c#, windows-phone-7, user-controls

在开发应用程序时，我发现我经常重新创建“平铺”控件。因此，我目前正在尝试将其移动到用户控件中以供重用。但是，它目前不接受任何以前有效的绑定。例如：

```
<Canvas Height="73" Width="73" VerticalAlignment="Top" Margin="10,10,8,0">
    <Rectangle Height="73" Width="73" VerticalAlignment="Top" Fill="{Binding Path=Active, Converter={StaticResource IconBackground}}" />
    <Image Height="61" Width="61" VerticalAlignment="Center" HorizontalAlignment="Center" Margin="6"  Source="{Binding Tone.Image}" />
</Canvas> 
```

与绑定工作正常，

```
<views:Tile Height="73" Width="73" Background="{Binding Path=Active, Converter={StaticResource IconBackground}, Mode=OneWay}" Icon="{Binding Path=Tone.Image, Mode=OneTime}" /> 
```

产生错误“参数不正确”。

这是我的 Tile UserControl 的代码：

**Tile.xaml**

```
<UserControl x:Class="RSS_Alarm.Views.Tile"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    FontFamily="{StaticResource PhoneFontFamilyNormal}"
    FontSize="{StaticResource PhoneFontSizeNormal}"
    Foreground="{StaticResource PhoneForegroundBrush}"
    d:DesignHeight="100" d:DesignWidth="100">

    <Grid x:Name="LayoutRoot">
        <Canvas Height="100" Width="100" Margin="0,0,0,0">
            <Rectangle Name="rectBackground" Height="100" Width="100" />
            <Image Name="imgIcon" Height="80" Width="80" VerticalAlignment="Center" HorizontalAlignment="Center" Canvas.Left="10" Canvas.Top="10" />
        </Canvas>
    </Grid>
</UserControl> 
```

**Tile.xaml.cs**

```
namespace RSS_Alarm.Views
{
    public partial class Tile : UserControl
    {
        public Tile()
        {
            InitializeComponent();
        }

        public String Icon
        {
            get
            {
                return imgIcon.Source.ToString();
            }

            set
            {
                BitmapImage alarmIcon = new BitmapImage();
                alarmIcon.UriSource = new Uri(value, UriKind.Relative);
                imgIcon.Source = alarmIcon;
            }

        }

        new public Brush Background
        {
            get
            {
                return rectBackground.Fill;
            }

            set
            {
                rectBackground.Fill = value;
            }
        }

        new public double Height
        {
            get
            {
                return rectBackground.Height;
            }

            set
            {
                rectBackground.Height = value;
                imgIcon.Height = value * 0.8;
            }
        }

        new public double Width
        {
            get
            {
                return rectBackground.Width;
            }

            set
            {
                rectBackground.Width = value;
                imgIcon.Width = value * 0.8;
            }
        }
    }
} 
```

如果您需要更多来源，请告诉我，我会发布。使用固定值时我没有任何问题（`Height`并且`Width`很好，如果我设置`Background`为 Red 那么也可以正常工作），但是更改为 Binding 值会引发异常。

* * *

**编辑 1**

这是一些更新的代码：

**Tile.xaml.cs**

```
#region Background
        public static readonly DependencyProperty RectBackgroundProperty =
           DependencyProperty.Register(
               "RectBackground",
               typeof(SolidColorBrush),
               typeof(Tile),
               new PropertyMetadata(new SolidColorBrush(Colors.Green), new PropertyChangedCallback(OnBackgroundChanged))
           );

        public static void OnBackgroundChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
        {
            Debug.WriteLine("Filling background");
            ((Tile)d).rectBackground.Fill = (Brush)e.NewValue;
        }

        new public SolidColorBrush Background
        {
            get { return (SolidColorBrush)GetValue(RectBackgroundProperty); }
            set { 
                Debug.WriteLine("Setting colour"); 
                SetValue(RectBackgroundProperty, value); 
            }
        }
#endregion 
```

**MainMenuControl.xaml.cs**

```
// Class to determine the background colour of the icon (active/inactive)
public class IconBackground : System.Windows.Data.IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        bool b = (bool)value;

        Debug.WriteLine("Converting colour. Value is " + b.ToString());

        if (b)
        {
            return (Brush)App.Current.Resources["PhoneAccentBrush"];
        }
        else
        {
            return new SolidColorBrush(Colors.DarkGray);
        }
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        SolidColorBrush brush = (SolidColorBrush)value;

        if (brush.Color.Equals(Colors.DarkGray))
        {
            return false;
        }
        else
        {
            return true;
        }
    }

} 
```

我也在并排比较这两种方法。左边的图块是定义的 Canvas，绑定完全工作，而右边的图块是 Tile UserControl，它只适用于定义的颜色（在这种情况下为蓝色）

![截屏](../Images/07b221a45a9f8a9bd0bb35525622d022.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T18:01:29.757

为了能够在 XAML 中进行绑定，仅仅创建一个属性是不够的。您必须创建一个[DependencyProperty](https://stackoverflow.com/questions/159088/dependencyproperty-and-databinding)。

`Background`您的绑定有效的原因是它`UserControl`本身具有此属性。如果您在`Background`属性设置器中设置断点，您将看到它永远不会被调用。

这是`DependencyProperty`您`Background`（未测试）的示例

```
#region Background
        public const string BackgroundPropertyName = "Background";
        public new Brush Background
        {
            get { return (Background)GetValue (BackgroundProperty); }
            set { SetValue (Background, value); }
        }
        public static new readonly DependencyProperty BackgroundProperty = DependencyProperty.Register (
            BackgroundPropertyName,
            typeof (Brush),
            typeof (Tile),
            new PropertyMetadata (BackgroundChanged));

        static void BackgroundChanged (DependencyObject d, DependencyPropertyChangedEventArgs e)
        {                
            ((Tile) d).rectBackground = (Brush)e.NewValue;    
        }
    #endregion 
```

# android - 如何用水平滑动的 sqlite 数据填充列表视图

> ID：10436748
> 
> 赞同：0
> 
> 时间：2012-05-03T17:51:21.317
> 
> 标签：android, sqlite, android-viewpager

我的目标是水平滑动列表，这些列表由公共类 ClientsManagerOpenHandler 扩展 SQLiteOpenHelper 填充。我尝试通过使用 viewpager 和 ListFragments 来实现这个目标。如果您有其他解决方案，请告诉我。

现在的问题：如果我尝试从以下 PageListFragment.java 调用，来自 ClientsManagerOpenHandler 的数据程序崩溃：

```
 dbCursorTerminAnsicht = openHandler.queryTabelle("terminansicht"); 
```

也许我不能在 ListFragment 中调用扩展的 SQLiteOpenHelper？但是我如何将 sqlite 中的数据获取到我的列表中，以及当我水平滑动以更改数据时......

请帮忙。我已经尝试过任何事情，但我现在真的需要帮助。

```
public class PageListFragment extends ListFragment implements OnClickListener,
    LoaderCallbacks<Cursor> {

private Calendar cal = Calendar.getInstance();
private ClientsManagerOpenHandler openHandler;
public static final String PREFS_NAME ="MyPrefsFile";
SharedPreferences prefs;`

private Cursor dbCursorTerminAnsicht;
private Integer intVerdienst = 0;
private String queryVerdienst;
private SimpleCursorAdapter mCursorAdapter;
private ListView listViewTermine;
private final int listNr;
private final String[] fruit = { "Bananen", "Apfle", "Erdbeere",
        "Kirschen", "Mangos" };
private Uri[] mMediaSource = {null, MediaStore.Audio.Artists.EXTERNAL_CONTENT_URI, MediaStore.Audio.Albums.EXTERNAL_CONTENT_URI};

public PageListFragment(int nr) {
    this.listNr = nr;
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

//!!!!! after the next line the program crashes. Even I have set breakpoints at ClientsManagerOpenHandler 
//I cannot see anything in the debugger (Debugger: Source not found...) 

    dbCursorTerminAnsicht = openHandler.queryTabelle("terminansicht"); 

    if (listNr == 0) {
        ArrayAdapter<String> openHandler = new ArrayAdapter<String>(
                getActivity(), android.R.layout.simple_list_item_1, fruit);
        setListAdapter(openHandler);
    } else if (listNr == 1) {
        mCursorAdapter = new SimpleCursorAdapter(getActivity(),
                android.R.layout.simple_list_item_1, null,
                new String[] { MediaStore.Audio.Artists.ARTIST },
                new int[] { android.R.id.text1 }, 0);
        setListAdapter(mCursorAdapter);
        getLoaderManager().initLoader(0, null, this);
    } else if (listNr == 2) {

        openHandler = new ClientsManagerOpenHandler(getActivity());
         String query = "projekte, klienten, termine WHERE termine.KLIENTID = klienten._id AND termine.PROJEKTID = projekte._id ORDER BY BEGINN ASC;";

        MyDataAdapter myClientsadapter = new MyDataAdapter (
                getActivity(),
                  R.layout.terminzeile,
                 // android.R.layout.two_line_list_item,
                  dbCursorTerminAnsicht,
                 new String[] { openHandler.BEGINN , openHandler.ENDE, openHandler.NACHNAME, openHandler.VORNAME, openHandler.PROJEKT, openHandler.BEZAHLT},
                 // fields,
                //  new int[] {R.id.editTextNachname, R.id.editTextVorname }
                  new int[] {R.id.textViewBeginn, R.id.textViewEnde, R.id.textViewNachname, R.id.textViewVorname, R.id.textViewProjekt,R.id.checkBoxBezahlt }
                  );

        myClientsadapter.setViewBinder(new MyDataAdapter.ViewBinder() {
            public boolean setViewValue(View view, Cursor cursor, int columnIndex) {

                if(columnIndex == 13) {
                        String strBeginn = cursor.getString(columnIndex);
                        CheckBox cb = (CheckBox) view;
                        int intbezahlt = cursor.getInt(13);
                        int index = cursor.getColumnIndex("SATZ");
                        Integer intSatz = cursor.getInt(index);
                        if (index>0) {
                            if (intbezahlt>0){
                                intVerdienst = intVerdienst + intSatz;
                            }
                        }
                        cb.setChecked(intbezahlt > 0);
                        return true;
                }

                String str = cursor.getString(columnIndex);
                return false;
            }
        });

        //TerminlisteRefresh("");

        setListAdapter(myClientsadapter);
        getLoaderManager().initLoader(0, null, this);
    }
}

public Loader<Cursor> onCreateLoader(int arg0, Bundle arg1) {
    Loader<Cursor> loader = new CursorLoader(getActivity(), mMediaSource[listNr],
            null, null, null, null);
    return loader;
}

public void onLoadFinished(Loader<Cursor> arg0, Cursor cursor) {
    mCursorAdapter.swapCursor(cursor);

}

public void onLoaderReset(Loader<Cursor> arg0) {
    mCursorAdapter.swapCursor(null);

}

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T18:51:44.223

您似乎在定义之前尝试访问`openHandler`它：

```
dbCursorTerminAnsicht = openHandler.queryTabelle("terminansicht");
...
openHandler = new ClientsManagerOpenHandler(getActivity()); 
```

这可能会更好：

```
openHandler = new ClientsManagerOpenHandler(getActivity());
dbCursorTerminAnsicht = openHandler.queryTabelle("terminansicht"); 
```

# cocoa-touch - 使用 EKEventEditViewController 时崩溃

> ID：10436750
> 
> 赞同：0
> 
> 时间：2012-05-03T17:51:32.107
> 
> 标签：cocoa-touch, ios4, ios5

我有一个奇怪的崩溃，我不知道如何调试......这是代码：

```
-(void) addEventButtonPressed:(UIButton*)button{
DLog(@"Add new event");
// If event is nil, a new event is created and added to the specified event store. New events are 
// added to the default calendar. An exception is raised if set to an event that is not in the 
// specified event store.
// When add button is pushed, create an EKEventEditViewController to display the event.
EKEventEditViewController *addController = [[EKEventEditViewController alloc] initWithNibName:nil bundle:nil];

// set the addController's event store to the current event store.
addController.eventStore = self.eventStore;
addController.editViewDelegate = self;

// present EventsAddViewController as a modal view controller
[self presentModalViewController:addController animated:YES]; 
```

}

我的应用程序在这一行经过很长时间后崩溃：[self presentModalViewController:addController animated:YES];

我正在使用 ARC。有什么线索吗？谢谢！

我的控制台说只是`EXC_BAD_ACCESS(code=2, address=0xbf7ffff4)`

[编辑] 它似乎`eventStore`需要在传递给它之前进行初始化，`addController`否则你会崩溃。就我而言，它是零。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T01:43:33.443

确保您从主线程呈现 EKEventEditViewController；如果您从辅助线程呈现它，它将崩溃（并非总是，但通常）。

# jquery - 在折叠的 div 上拖放可拖动

> ID：10436751
> 
> 赞同：0
> 
> 时间：2012-05-03T17:51:35.653
> 
> 标签：jquery, jquery-ui, draggable, droppable

我的目标是能够获取一个可拖动的项目并将其放在折叠的 div 上。当项目被删除时，它将被附加到折叠 div 内的 div 中。

简而言之，放在“outter_collapsed”上会将项目放置在“inner”中

```
<div id = "outter_collapsed">
<div id = "inner">
<!-- DROPPED ITEM PLACED HERE -->
</div>
</div> 
```

欢迎任何关于如何处理此问题的想法或可能的智慧之言。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T03:43:48.500

可能是这样的：

```
$( "#another-div" ).draggable();
        $( "#outter_collapsed" ).droppable({
            drop: function( event, ui ) {
                $(this).children().append(ui.draggable);

            }
        }); 
```

在这里查看一个示例 - [http://jsfiddle.net/Bfa9v/19/](http://jsfiddle.net/Bfa9v/19/)

# android - 如何解决“节类型冲突”编译错误以及将节属性与 gcc 一起使用的最佳实践

> ID：10436759
> 
> 赞同：4
> 
> 时间：2012-05-03T17:52:04.680
> 
> 标签：android, gcc, android-ndk, embedded

我正在使用 Android NDKr8 和扩展 gcc 来编译一些跨多个平台共享的库代码，包括一些嵌入式平台。此代码使用段将一堆元素放入连续的内存空间。编译正在生成“错误：variable_name 导致节类型冲突”。

我们使用宏来声明段属性：

```
# define DB_SEGMENT __attribute__ ((__section__ ("DBSegment"))) 
```

上面的 variable_name 声明如下：

```
dbStruct const variable_name[] DB_SEGMENT = {
    {conststringvalue0, sizeof(conststringvalue0)},
    …more like this
}; 
```

dbStruct 是

```
typedef struct dbStruct
{
    const char * const  address;
    const UINT16        stringSize;
} dbStruct; 
```

conststringvalue0 声明如下：

```
const char conststringvalue0[] DB_SEGMENT = "some string value"; 
```

相同的代码在 Xcode 中使用其默认编译器进行编译，只需对 DB_SEGMENT 宏的声明进行少量修改。这是比我习惯的更深的 C，所以任何帮助都将不胜感激。谷歌对该错误有一些参考，但对它的修复尚不清楚。是否有更好的策略来设置特定的连续内存部分？

作为对评论的回应，这是与 XCode 上正确编译版本的唯一区别：

```
#define DB_SEGMENT __attribute__ ((section ("DBSegment,DBSection"))) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-27T10:40:02.917

我遇到了同样的问题。而我的情况是我把代码和变量放在同一个部分。在我将变量放在不同的部分后，问题就解决了。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-29T13:42:58.290

"#define DB_SEGMENT**属性**(( **section** ("DBSegment")))"

我在 # 和 define 之间看到一个空格，这是不正确的。

删除该空间并尝试编译。

# java - DecimalFormat - 没有小数分隔符

> ID：10436760
> 
> 赞同：1
> 
> 时间：2012-05-03T17:52:06.560
> 
> 标签：java, double, decimalformat

我使用[DecimalFormat](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/DecimalFormat.html)类将数字格式化为字符串，反之亦然。

在我的数据库中，Java 双精度以特定方式表示：例如 128.88 存储“00012888”。为此，我使用“00000.00”模式并删除“。” 格式化后的小数分隔符，这不是一个聪明的解决方案。

有没有办法告诉 DecimalFormat 不要使用任何小数分隔符？我可以让它理解代表十进制数的字符串中的整数部分和小数部分在哪里吗？

我宁愿不必在转换之前进行乘法、除法、截断或舍入。这有什么神奇的模式吗？或者 DecimalFormat 类没有那么灵活？

我准确地说我不能使用 String.format() 方法，因为我在 Java 1.4 平台上工作。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T17:59:36.393

`DecimalFormat`还不足以做到这一点。

你可以使用这样的方法：

```
double getD(String fixedWidthNumber) {
    return Double.valueOf(fixedWidthNumber.substring(0,6)+"."+fixedWidthNumber.substring(6,8));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-18T10:42:22.860

```
BigDecimal value = new BigDecimal("234.33");
DecimalFormat decFrm = new DecimalFormat("000.00");
char decSep = decFrm.getDecimalFormatSymbols().getDecimalSeparator();
String resultStr = decFrm.format(value).replace(Character.toString(decSep), ""); 
```

结果：3423433

# javascript - 如何使用javascript设置默认复选框状态？

> ID：10436764
> 
> 赞同：6
> 
> 时间：2012-05-03T17:52:38.307
> 
> 标签：javascript, jquery

我习惯在 jQuery 中这样做

```
$('#RememberMe').attr('checked', true); 
```

但我不记得如何在 Javascript 中做到这一点我认为

```
document.getElementById("RememberMe").value = "True"; 
```

会起作用，但不会，它会更改值但不会在 html 上创建视觉检查。

我正在尝试将复选框默认设置为打开。这是html

```
<input id="RememberMe" name="RememberMe" type="checkbox" value="false" /> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-03T17:53:52.497

要更改复选框**状态**，请尝试以下操作：

```
document.getElementById("RememberMe").checked = true; 
```

如果您需要将复选框的**值**`input`更改为元素，请使用：

```
document.getElementById("RememberMe").value = "New Value"; 
```

但是，您可以在 HTML 标记中设置默认值和状态：

```
<input id="RememberMe" name="RememberMe" type="checkbox" value="The Value" checked="checked" /> 
```

# c# - 使用 LINQ 从分隔字符串列表构建字典

> ID：10436767
> 
> 赞同：2
> 
> 时间：2012-05-03T17:52:45.087
> 
> 标签：c#, linq, dictionary

我有一个看起来像这样的字符串列表：

```
abc|key1|486997
def|key1|488979
ghi|key2|998788 
gkl|key2|998778
olz|key1|045669 
```

如何使用 LINQ 和 ToDictionary 生成一个`Dictionary<string, List<string>>`看起来像

```
key1 : { abc|key1|486997, def|key1|488979, olz|key1|045669 }
key2 : { ghi|key2|998788, gkl|key2|998778 } 
```

基本上，我希望能够提取第二个元素作为键，使用 ToDictionary() 在一轮中创建字典。

我目前正在这样做..

```
 var d = new Dictionary<string, List<string>>();

            foreach(var l in values)
            {
                var b = l.Split('|');
                var k = b.ElementAtOrDefault(1);

                if (!d.ContainsKey(k))
                    d.Add(k, new List<string>());

                d[k].Add(l);
            } 
```

我已经看到有关从单个分隔值字符串构建字典的问题，但我想知道是否有一种优雅的方法可以从分隔字符串列表开始。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T18:03:23.310

```
var list = new []
{
"abc|key1|486997",
"def|key1|488979",
"ghi|key2|998788",
"gkl|key2|998778",
"olz|key1|045669"
};

var dict = list.GroupBy(x => x.Split('|')[1])
               .ToDictionary(x => x.Key, x => x.ToList()); 
```

您还可以一次将其转换为查找（与 a 非常相似`Dictionary<K,IEnumerable<V>>`）：

```
var lookup = list.ToLookup(x => x.Split('|')[1]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T17:56:54.653

如果保证您的数据是这样一致的，您可以执行以下操作：

```
var data = new[]
                {
                    "abc|key1|486997",
                    "def|key1|488979",
                    "ghi|key2|998788",
                    "gkl|key2|998778",
                    "olz|key1|045669"
                };
var items = data
            .GroupBy(k => k.Split('|')[1])
            .ToDictionary(k => k.Key, v => v.ToList()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T18:02:01.437

```
var data = new[]
                {
                    "abc|key1|486997",
                    "def|key1|488979",
                    "ghi|key2|998788",
                    "gkl|key2|998778",
                    "olz|key1|045669"
                };
var dictionary = data.Select(row => row.Split('|'))
  .GroupBy(row =>  row[1])
  .ToDictionary(group => group.Key, group => group); 
```

# zend-framework - Zend Framework 1 - 如何在 routeShutdown 的插件中检测路由错误

> ID：10436771
> 
> 赞同：2
> 
> 时间：2012-05-03T17:53:05.527
> 
> 标签：zend-framework, plugins

Zend 框架 1.11.11

我正在编写一个 Zend 框架控制器插件，它在`routeShutdown`钩子中做一些事情。

如果出现路由错误，我希望能够避免运行我的进程。

即，如果我们只是得到一个 404 错误，我不想运行这些进程。

```
class MyPlugin extends Zend_Controller_Plugin_Abstract
    {

    public function routeShutdown( Zend_Controller_Request_Abstract $zfRequestObj )
        {

        if ( $this->isRoutingError() )
            {
            //there was a routing error do not do any intensive page start up stuff
            return;
            }

        return $this->doRouteShutdownProcesses( $zfRequestObj );                
        }

    protected function isRoutingError()
            {
            //?? So how do we get this?
            }
    ...

    } 
```

**那么，我们如何判断此时是否存在路由错误呢？**

我尝试过的事情。

*   检查 requestObj 中的模块、控制器、动作名称

    *   不起作用，因为尚未设置为错误操作
*   检查响应对象中的异常

    *   不起作用，因为`$this->getResponse()->isException()`似乎返回 FALSE，即使出现路由错误也是如此。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T18:56:20.787

我自己已经解决了。

我是愚蠢的。在 routeShutdown 我们不知道它是否会是一个 404 页面类型错误，直到我们尝试调度它。

所以我们能做的就是

*   测试响应中的一般异常
*   询问调度员该路线是否可能是可调度的。

所以插件无法真正确定是否存在“路由错误” - 所以它必须询问“isRouteShutdownToBeSkipped()”：

```
<?php

class MyPlugin extends Zend_Controller_Plugin_Abstract
    {

    public function routeShutdown( Zend_Controller_Request_Abstract $zfRequestObj )
        {

        if ( $this->isRouteShutdownToBeSkipped( $zfRequestObj ) )
            {
            //do not do any intensive page start up stuff
            return;
            }

        return $this->doRouteShutdownProcesses( $zfRequestObj );                
        }

    //... 
```

然后 isRouteShutdownToBeSkipped() 方法测试

*   一般例外，或
*   不可调度的控制器
*   不存在的操作方法。（我避免在我的项目中使用魔法，所以我知道如果方法没有声明，那么它就不会起作用。）

所以：

```
<?php

class MyPlugin extends Zend_Controller_Plugin_Abstract
    {

    //...

    protected function isRouteShutdownToBeSkipped( Zend_Controller_Request_Abstract $zfRequestObj )
        {   

        if ( $this->getResponse()->isException() )
            {
            //Skip cos there was an exception already.
            return TRUE;
            }

        if (!( $this->isDispatchable( $zfRequestObj ) )) 
            {
            //Skip cos route is not dispatchable (i.e no valid controller found).
            return TRUE;
            }

        if (!( $this->actionMethodExists( $zfRequestObj ) ))
            {
            //There is no action method on the controller class that 
            //resembles the requested action.
            return TRUE;
            }

        //else else give it a go
        return FALSE;
        }
    //... 
```

我的`isDispatchable()`方法只是委托给调度程序：

```
<?php

class MyPlugin extends Zend_Controller_Plugin_Abstract
    {

    //...

    protected function isDispatchable( Zend_Controller_Request_Abstract $zfRequestObj )
        {
        return Zend_Controller_Front::getInstance()
            ->getDispatcher()
            ->isDispatchable( $zfRequestObj );      
        }
    ... 
```

我的`actionMethodExists()`方法有点复杂。调度程序的接口有点误导（`getControllerClass()`实际上并没有返回类名），所以我们必须跳过一些箍来获取实际的控制器类名，然后及时加载类以调用 PHP 的内置`method_exists()`函数：

```
<?php    
class MyPlugin extends Zend_Controller_Plugin_Abstract
    {    
    //...

    /**
    * @desc 
    * @returns boolean - TRUE if action method exists
    */
    protected function actionMethodExists( Zend_Controller_Request_Abstract $zfRequestObj )
        {

        //getControllerClass() does not return the module prefix
        $controllerClassSuffix = Zend_Controller_Front::getInstance()
            ->getDispatcher()
            ->getControllerClass( $zfRequestObj );

        $controllerClassName = Zend_Controller_Front::getInstance()
            ->getDispatcher()
            ->formatClassName( $zfRequestObj->getModuleName() , $controllerClassSuffix );

        //load the class before we call method_exists()
        Zend_Controller_Front::getInstance()
            ->getDispatcher()
            ->loadClass( $controllerClassSuffix );

        $actionMethod = Zend_Controller_Front::getInstance()
            ->getDispatcher()
            ->getActionMethod( $zfRequestObj );

        return ( method_exists( $controllerClassName, $actionMethod ) );
        }

    //...

    } 
```

# android - 如何从 Android EditText 中获取数值

> ID：10436776
> 
> 赞同：0
> 
> 时间：2012-05-03T17:53:32.020
> 
> 标签：android, textview, android-edittext

我想构建一个简单的 android 应用程序来计算三角形的面积。我有两个 textView 小部件、一个 editText 和一个按钮。当按下按钮时，它会将半径值传递给计算它的函数。我添加了一个变量并将其初始化为 5.0 只是为了测试目的，但是我想将放在 editText 字段中的值称为半径。

这是我的代码。包 com.circle;

```
import android.app.Activity;
import android.os.Bundle;
import android.widget.*;
import android.view.*;
public class MainActivity extends Activity 
{
private Button button1;
public EditText editText1;
public TextView textView1, textView2;
double radius = 5.0, area, perimeter;
public double calculateRadius(double radi)
{ 
    area = Math.PI * (radius * radius);
    return area;
}
public double calculatePerimeter(double rad)
{
    perimeter = 2.0 * Math.PI * radius;
    return perimeter;
}   
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);       
    this.button1 = (Button) findViewById(R.id.button1);
    this.editText1 = (EditText) findViewById(R.id.editText1);
    this.textView1 = (TextView) findViewById(R.id.textView1);
    this.textView1 = (TextView) findViewById(R.id.textView2);
    this.button1.setOnClickListener(new View.OnClickListener() 
    {
        public void onClick(View target) 
        {       
            calculateRadius(radius);   //what's wrong?
            calculatePerimeter(radius);  //what's wrong??
            textView1.setText("" + area);  //what's wrong
            textView2.setText("" + perimeter);  //what's wrong?
        }
    });

}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-28T12:07:48.313

你的问题是投射半径。请执行下列操作：

1.  在 XML 文件中更改编辑文本 -input type=number 即，它只需要数字..
2.  在单击时，将半径投射到 Double.parseDouble（输入值）的两倍。
3.  在 XML 文件中将 txt 初始值设置为 0，以避免类型转换问题，因为它无法对空值进行类型转换。

就这样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T18:25:22.577

```
 private double getRadius(){

        double radiusValue = 0;
        try{
            radiusValue= Double.parseDouble(editText1.getText().toString());
            catch (NumberFormatException e){
                // this is not a number. tell the user something here or do something
                Log.e("yourAppTag", Log.getStackTraceString(e));
            }
            return radiusValue;
        } 
```

您需要在您输入半径的任何地方调用它。

此外，您的 calculatePerimiter 和 calcualteArea 方法也没有使用传入的参数。所以摆脱类变量半径，并使用我在这里的方法将半径传递到你的两个计算中。

# facebook-like - 像带有 IP 地址的按钮 data-href

> ID：10436779
> 
> 赞同：0
> 
> 时间：2012-05-03T17:53:39.840
> 
> 标签：facebook-like, ip, domain-name

我们正在努力让 Like 按钮正常工作，我们认为这是因为在 data-href 属性上使用了 IP 地址而不是域名。是真的吗？？

```
<div class="fb-like" data-href="http://74.125.234.146" data-send="true" data-width="450" data-show-faces="false">
</div> 
```

一旦使用域名设置 data-href 属性，它就可以很好地工作。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-28T13:38:40.063

我知道这是一个老问题，但我也遇到了这个问题，解决方案是 facebook 不能与 IP 地址一起使用，只能与带有 DNS 的网页或有效的 data-href（如[http:/ /example.com](http://example.com)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T22:12:56.857

我会说，鉴于我所做的研究，它没有理由不工作。

![developer.facebook.com/docs/reference/plugins/like/ 的截图](../Images/2e616a51a7e63cb4a51d78defdd3dace.png)

来源：[https ://developers.facebook.com/docs/reference/plugins/like/](https://developers.facebook.com/docs/reference/plugins/like/)

但是，鉴于它在您的测试中对您不起作用，我会说没有官方限制（我可以找到），但不推荐（为了推荐）。

# actionscript - Actionscript、对象和事件监听器

> ID：10436784
> 
> 赞同：0
> 
> 时间：2012-05-03T17:53:56.147
> 
> 标签：actionscript, event-handling

说我有一个对象

```
var my_obj = new Object();
my_obj['key'] = value; 
```

有没有办法向值添加事件侦听器，例如

```
my_obj['key'].addEventListener(Blah Blah); 
```

我在时间轴上有一个长长的（ish）按钮列表（布局因部分而异，所以在时间轴上做更有意义，而不是尝试通过动作脚本构建布局）。

```
button1 = plays "frame label 1"
button2 = plays "frame label 2" 
```

等等....所以我只是想将所有内容存储在一个数组中

```
obj["button1"] = "framelabel1"
arr.push(obj); 
```

然后我可以只为所有按钮设置一个事件处理程序，并使用 target 来获取框架标签值......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T18:04:07.467

如果该值是[IEventDispatcher](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/IEventDispatcher.html)或扩展[EventDispatcher](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/EventDispatcher.html)，则可以向其添加侦听器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T18:19:04.287

这个问题对我来说相当模糊。我的猜测是每次设置值时都需要触发一些东西。如果是这种情况，那么您必须创建一个自定义类，并在那里声明一个 getter-setter 属性。

例如：

```
package
{
    import flash.display.Sprite;

    public class TestAccessor extends Sprite
    {
        private var someVarValue:uint = 0;

        public function TestAccessor()
        {
            super();
        }

        public function get someVar():uint
        {
            return someVarValue;
        }

        public function set someVar(value:uint):*
        {
            someVarValue = value;
            // this is the place where someVar is set.
            // do whatever else you like here,
            // you may choose to dispatch an event from here if you need.
        }

    }
} 
```

早在 AS1-AS2 时代，我们就拥有`watch()`并`addProperty()`为此目的，但这些时代早已一去不复返了。为了好。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T21:36:09.547

是的，您可以按照您提到的确切方式完全按照您的要求进行操作，这是一个示例：

```
var value:Sprite = new Sprite();

var my_obj = new Object();
my_obj['key'] = value; 
```

所以调用：

```
my_obj['key'].addEventListener(Event.ENTER_FRAME, _onEnterFrameHandler); 
```

与调用完全相同：

```
value.addEventListener(Event.ENTER_FRAME, _onEnterFrameHandler); 
```

# java - 安卓和PC蓝牙应用程序之间的连接

> ID：10436785
> 
> 赞同：4
> 
> 时间：2012-05-03T17:54:01.333
> 
> 标签：java, android, bluetooth

我正在开发一个蓝牙应用程序，该应用程序涉及我的 android 蓝牙应用程序与计算机上运行的服务器的连接。服务器也是使用 blue-cove api 制作的蓝牙应用程序。

我现在面临的问题是我无法在我的移动应用程序和该计算机服务器应用程序之间建立连接。

这是我的android应用程序代码：

```
 try {
            // Connect the device through the socket. This will block
            // until it succeeds or throws an exception
            mySocket = myDevice.createRfcommSocketToServiceRecord(MY_UUID);
            mySocket.connect();
            toast = Toast.makeText(context, "Connection established",   thisClass.duration);
            toast.show();
          } catch (IOException connectException) {
            // Unable to connect; close the socket and get out
            try {
                mySocket.close();
                toast = Toast.makeText(context, "Connection not established", thisClass.duration);
                toast.show();
            } catch (IOException closeException) { }
            return;
        } 
```

问题出在哪里，或者我可能遗漏了什么。而且我对 socket.connect() 方法的理解也很模糊。请在这方面帮助我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T12:51:03.277

我刚刚完成了一个类似应用程序的工作，并且在连接时遇到了问题。查看更多代码会有所帮助，但上面的摘录看起来像我所遵循的示例。我将首先检查您尝试连接的 PC 上是否存在 MY_UUID。

[我已经在我的博客http://digitalhacksblog.blogspot.com/2012/05/android-example-bluetooth-simple-spp.html](http://digitalhacksblog.blogspot.com/2012/05/android-example-bluetooth-simple-spp.html)上发布了我的示例，包括客户端和服务器。

希望这可以帮助。

# android - Why is my screen2 recieving null.null from screen1 when I use i.putExtra?

> ID：10436786
> 
> 赞同：0
> 
> 时间：2012-05-03T17:54:05.077
> 
> 标签：android, class, android-intent

I'm writing a recipe book, and I've encountered a problem, my screen2 recieves null.null when I send information from screen1 ...

This is my code for recipe_button_list:

```
public class Recipe_Button_List extends Activity {

    TextView inputMethod;

    TextView inputIngredients;

    @Override
    public void onCreate( Bundle savedInstanceState ) {

        super.onCreate( savedInstanceState );
        setContentView( R.layout.recipe_button_list );

        inputMethod = (TextView) findViewById( R.id.textView2 );
        inputIngredients = (TextView) findViewById( R.id.textView1 );
        //remember when adding more intents to make sure that they are classed as TextView not EditText

        ActionBar actionBar = getActionBar();
        actionBar.setDisplayHomeAsUpEnabled( true );

        Button mainNext = (Button) findViewById( R.id.Recipe1 );
        mainNext.setOnClickListener( new OnClickListener() {

            public void onClick( View v ) {

                final TextView mTextView = (TextView) findViewById( R.id.textView1 );
                mTextView.setText( R.string.Test2 );
                final TextView mTextView2 = (TextView) findViewById( R.id.textView2 );
                mTextView2.setText( R.string.Test );
                Intent i = new Intent( getBaseContext(), recipedisplayscreen.class );
                //Sending data to the next screen
                i.putExtra( "textView1", inputIngredients.getText().toString() );
                i.putExtra( "textView2", inputMethod.getText().toString() );

                Log.e( "n", inputMethod.getText() + "." + inputIngredients.getText() );
                startActivity( i );
            }
        } );

        Button mainNext2 = (Button) findViewById( R.id.Recipe2 );
        mainNext2.setOnClickListener( new OnClickListener() {

            public void onClick( View v ) {

                final TextView mTextView = (TextView) findViewById( R.id.textView1 );
                mTextView.setText( R.string.Test );
                Intent i = new Intent( getBaseContext(), recipedisplayscreen.class );
                //Sending data to the next screen
                i.putExtra( "textView1", inputIngredients.getText().toString() );
                i.putExtra( "textView2", inputMethod.getText().toString() );

                Log.e( "n", inputMethod.getText() + "." + inputIngredients.getText() );
                startActivity( i );
            }
        } );
    }

    @Override
    public boolean onCreateOptionsMenu( Menu menu ) {

        MenuInflater inflater = getMenuInflater();
        inflater.inflate( R.menu.recipe_menu1, menu );
        return true;

    }
} 
```

**This is my recipe_display_screen:**

```
public class recipedisplayscreen extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.recipedisplayscreen);

        TextView MethodDisplay = (TextView) findViewById(R.id.textView3);
        TextView IngredientsDisplay = (TextView) findViewById(R.id.textView5);

        Intent i = getIntent();
        String Ingredients = i.getStringExtra("TextView1");
        String Method = i.getStringExtra("TextView2");
        Log.e("recipedisplayscreen", Ingredients + "." + Method);

        MethodDisplay.setText(Method);
        IngredientsDisplay.setText(Ingredients);

        ActionBar actionBar = getActionBar();
        setTitle(R.string.title);
        actionBar.setDisplayHomeAsUpEnabled(true);}

        @Override
        public boolean onOptionsItemSelected(MenuItem item) {
            switch (item.getItemId()) {
                case android.R.id.home:
                    // App icon in action bar clicked; go home
                    Intent intent = new Intent(this, MainScreen.class);
                    intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                    startActivity(intent);
                    return true;
                default:
                    return super.onOptionsItemSelected(item);
            }
        }

     @Override
        public boolean onCreateOptionsMenu(Menu menu) {
            MenuInflater inflater = getMenuInflater();
            inflater.inflate(R.menu.recipe_menu1, menu);
            return true;

    }

} 
```

Any ideas, solutions ??? Thanks in advance :)

**P.S.** This is my logcat:

```
05-03 18:55:34.734: E/n(21132): if this is displaying then Intent activity is working correctly.bla bla bla working correctly
05-03 18:55:34.883: D/dalvikvm(21132): GC_FOR_ALLOC freed 101K, 2% free 12815K/12999K, paused 23ms
05-03 18:55:34.883: I/dalvikvm-heap(21132): Grow heap (frag case) to 13.885MB for 1401676-byte allocation
05-03 18:55:34.922: D/dalvikvm(21132): GC_CONCURRENT freed 7K, 2% free 14177K/14407K, paused 4ms+2ms
05-03 18:55:34.945: E/recipedisplayscreen(21132): null.null 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T17:56:04.007

```
 Intent i = getIntent();
    String Ingredients = i.getStringExtra("textview1"); <--- see diff TextView1
    String Method = i.getStringExtra("textview2"); <--- see diff TextView2
    Log.e("recipedisplayscreen", Ingredients + "." + Method); 
```

when you are passing value you are useig **T** and **V** small

and **t** and **v** are in capital where you are getting values

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T17:59:10.637

Case sensativity is critical for this type of data passing

```
String Method = i.getStringExtra("TextView2"); 
```

where "T" starts the string extra name vs:

```
i.putExtra("textView2", inputMethod.getText().toString()); 
```

Where "t' starts the string extra name.

Switch the strings to match and you'll be fine.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T18:07:56.187

just minor mistake. here

Change:

```
String Ingredients = i.getStringExtra("TextView1");
String Method = i.getStringExtra("TextView2"); 
```

With:

```
String Ingredients = i.getStringExtra("textView1");
String Method = i.getStringExtra("textView2"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T18:40:20.113

The keys you are using in your current code are lowercase (e.g. `textView1`) when you put, but upper case when you get (e.g. `TextView1`). That means you are not finding the extra when you read. Make sure to use the same key. You could just change the case to match, but I find an easy way to avoid this problem entirely is to use a common static variable:

```
public static final String EXTRA_INGREDIENTS = "com.your.namespace.Ingredients"; 
```

Then you can use it:

```
Intent i = new Intent(getBaseContext(), recipedisplayscreen.class);
//Sending data to the next screen
i.putExtra(EXTRA_INGREDIENTS, inputIngredients.getText().toString()); 
```

and:

```
i.putExtra(EXTRA_INGREDIENTS, inputMethod.getText().toString()); 
```

You might have to figure out a specific class to put it in, etc. but it's a good strategy. The Android platform itself uses this too. (See [`Intent`](http://developer.android.com/reference/android/content/Intent.html), e.g. [`EXTRA_ALARM_COUNT`](http://developer.android.com/reference/android/content/Intent.html#EXTRA_ALARM_COUNT)).

# c - C中指向结构指针的无效指针

> ID：10436788
> 
> 赞同：7
> 
> 时间：2012-05-03T17:54:09.933
> 
> 标签：c, pointers, struct

我正在学习 C，主要是通过 K&R，但现在我找到了面向对象的 C pdf 教程并且很着迷。我正在经历它，但我的 C 技能/知识可能无法胜任这项任务。这是教程：[http ://www.planetpdf.com/codecuts/pdfs/ooc.pdf](http://www.planetpdf.com/codecuts/pdfs/ooc.pdf)

我的问题来自于查看 pdf 前几章中的许多不同功能。下面是其中之一。（pdf第14页）

```
void delete(void * self){
     const struct Class ** cp = self;

     if (self&&*cp&&(*cp)->dtor)
                self = (*cp)->dtor(self);
     free(self);

 } 
```

dtor 是一个析构函数指针。但是对于我的问题，这方面的知识并不是真正必要的。

*   我的第一个问题是，为什么 **cp 是常数？是否有必要或只是彻底，以便代码编写者不会意外地做任何破坏性的事情？
*   其次，为什么 cp 是指向指针的指针（双星号？）。struct 类在 pdf 的第 12 页上定义。我不明白为什么它不能是单个指针，因为我们似乎将 self 指针转换为 Class 指针。
*   第三，如何将 void 指针更改为类指针（或指向类指针的指针）？我想这个问题最能说明我对C的理解不足。我脑海中想象的是一个空指针占用了一定的内存，但它必须小于类指针，因为一个类有很多“东西”在里面。我知道 void 指针可以“转换”为另一种类型的指针，但我不明白如何，因为可能没有足够的内存来执行此操作。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T18:33:49.880

有趣的.pdf。

> 我的第一个问题是，为什么 **cp 是常数？是否有必要或只是彻底，以便代码编写者不会意外地做任何破坏性的事情？

这是必要的，因此作者不会意外地做任何事情，是的，并且向代码的*读者*传达有关指针的性质及其用途的一些信息。

> 其次，为什么 cp 是指向指针的指针（双星号？）。struct 类在 pdf 的第 12 页上定义。我不明白为什么它不能是单个指针，因为我们似乎将 self 指针转换为 Class 指针。

看一下创建`new()`指针的（第 13 页）的定义（与传递到`p`的相同的指针）：`self``delete()`

```
void * new (const void * _class, ...)
{
    const struct Class * class = _class;
    void * p = calloc(1, class —&gt; size);
    * (const struct Class **) p = class; 
```

因此，“p”被分配了空间，然后被取消引用并分配了一个指针值（类中的地址；这就像取消引用并分配给一个 int 指针，但我们分配的是一个地址而不是一个 int）。 **这意味着 p 中的第一件事是指向其类定义的指针。** 但是，为 p 分配的空间不仅限于此（它还将保存对象的实例数据）。现在`delete()`再考虑：

```
 const struct Class ** cp = self;
 if (self&&*cp&&(*cp)->dtor) 
```

当 cp 被取消引用时，因为它是一个指向指针的指针，所以它现在是一个指针。指针包含什么？一个地址。什么地址？ 指向位于 p 所指向的块开头的**类定义的指针。**

这有点聪明，因为 p 并不是真正的指向指针的指针——它分配了更大的内存块，其中包含特定的对象数据。但是，该块的开头是一个地址（类定义的地址），因此如果将 p 取消引用为指针（通过强制转换或 cp），您就可以访问该定义。因此，类定义只存在于一个地方，但该类的每个实例都包含对该定义的引用。有道理？如果 p 被键入为这样的结构会更清楚：

```
struct object {
  struct class *class;
    [...]
}; 
```

然后你可以使用类似的东西`p->class->dtor()`而不是`delete()`. 然而，这会弄乱大局并使大局复杂化。

> 第三，如何将 void 指针更改为类指针（或指向类指针的指针）？我想这个问题最能说明我对C的理解不足。我脑海中想象的是一个空指针占用了一定的内存，但它必须小于类指针，因为一个类有很多“东西”在里面。

指针就像一个 int ——它有一个小的、设置的大小来保存一个值。该值是内存地址。当您取消引用指针（通过`*`或`->`）时，您正在访问的是该地址处的内存。但是由于内存地址都是相同的长度（例如，在 64 位系统上为 8 个字节），因此无论类型如何，指针本身的大小都是相同的。这就是对象指针“p”的神奇之处。重新迭代：内存块中的第一件事是`p`指向一个地址，它允许它作为指向指针的指针，当它被取消引用时，你会得到包含类定义的内存块，即与 中的实例数据分开`p`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T18:22:44.640

1.  在这种情况下，这只是一种预防措施。该函数不应该修改类（实际上，什么都不应该修改），因此强制转换以`const struct Class *`确保类更难以无意中更改。

2.  我对这里使用的面向对象的 C 库不是很熟悉，但我怀疑这是一个讨厌的把戏。in 的第一个指针`self`可能是对类的引用，因此取消引用`self`将给出指向该类的指针。实际上，`self`总是可以被视为一个`struct Class **`.

    图表可能会有所帮助：

    ```
     +--------+
    self -> | *class | -> [Class]
            |  ....  |
            |  ....  |
            +--------+ 
    ```

3.  请记住，所有指针都只是地址。* 指针的类型与指针的大小无关；它们都是 32 位或 64 位宽，具体取决于您的系统，因此您可以随时从一种类型转换为另一种类型。如果您尝试在没有强制转换的情况下在指针类型之间进行转换，编译器会警告您，但`void *`指针始终可以在没有强制转换的情况下转换为任何类型，因为它们在整个 C 中用于指示“通用”指针。

*：有一些奇怪的平台不是这样的，不同类型的指针实际上有时是不同的大小。但是，如果您使用其中之一，您就会知道。很可能，你不是。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T18:19:36.463

1.  `const`如果代码试图更改指向的对象中的任何内容，则用于导致编译错误。当程序员只打算读取对象而不打算更改它时，这是一项安全功能。

2.  `**`之所以使用，是因为那必须是传递给函数的内容。将它重新声明为不是的东西将是一个严重的编程错误。

3.  指针只是一个地址。在几乎所有现代 CPU 上，所有地址的大小都相同（32 位或 64 位）。将指针从一种类型更改为另一种类型实际上并不会更改值。它表示将该地址的内容视为不同的数据布局。

# .net - 在 vb.net wpf 应用程序中运行子程序时刷新/更新文本字段和进度条

> ID：10436790
> 
> 赞同：0
> 
> 时间：2012-05-03T17:54:31.177
> 
> 标签：.net, wpf, vb.net, progress-bar, page-refresh

我有几个报告都合并到同一个数据表中。用户可以单击多个运行，然后单击“查找记录”按钮同时运行它们。由于它们每个都需要很长时间，我想在状态栏上更新用户，因为每个存储过程都被成功调用。但是，当我调用该过程时，我只会在最后列出所有内容的更新。

我想做什么：

```
'Initialize Progress Components
repCompleted = 0
ProgressBar1.Minimum = 0
ProgressBar1.Maximum = repSel
ProgressBar1.Value = repCompleted
TextBlock2.Text = repCompleted & " of " & repSel & " reports finished" 
```

然后随着每个报告成功运行，更新`repCompleted`值并刷新

```
repCompleted += 1
TextBlock2.Text = repCompleted & " of " & repSel & " reports finished"
ProgressBar1.Value = repCompleted 
```

问题是这些刷新在我退出子程序之前不会发生。我希望它在每个完成时向前计数，即`1 of 4 completed`,`2 of 4 completed`等。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T18:33:40.483

如果您的进程在前台（而不是后台）运行，它会阻塞 UI。你必须在后台运行它，这样你的 UI 才能自由地做其他事情（比如更新你的进度条）。看看 BackgroundWorker 类，它可以让你做到这一点。

# mysql - MySQL 错误：10061

> ID：10436792
> 
> 赞同：1
> 
> 时间：2012-05-03T17:54:36.607
> 
> 标签：mysql

显然，我无法使用 mysql.exe 连接到 SQL 服务器

我以 root 用户身份登录并输入以下内容

```
mysql -u root -p
mysql> CONNECT TO 127.0.0.1:3306; 
```

我收到以下错误。

```
ERROR 2005 (HY000): Unknown MySQL server host '127.0.01:3306' (2)

Unknown MySQL server host '127.0.0.1:3306' (2) 
```

但是，它使用具有相同参数的 MySQL Workbench 连接得很好。

```
Host:127.0.0.1
Port:3306
User: root
pass:[empty] 
```

我安装了easyphp MySQL 模块。这可能是原因吗？

**编辑：** TYPO 127.0.0.1 抱歉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T18:13:05.270

根据[文档](http://dev.mysql.com/doc/en/mysql-commands.html)，该`connect`命令的语法是：

> ```
> 连接 [db_name host_name]]，\r [db_name host_name]]
> ```
> 
> 重新连接到服务器。可以给出可选的数据库名称和主机名参数来指定默认数据库或服务器正在运行的主机。如果省略，则使用当前值。

因此，您的命令`CONNECT TO 127.0.0.1:3306`正在尝试连接到`TO`名为`127.0.0.1:3306`. 毫无疑问，您收到的错误消息会抱怨主机不存在。

但是，更常见的是在调用时指定主机名和数据库`mysql`（如果愿意，也可以指定端口 - 请参阅[此页面](http://dev.mysql.com/doc/en/mysql-command-options.html)以获取命令行选项的完整列表）：

```
mysql -u 用户名 -p -h <主机名> -P <端口> db_name

```

另请注意，如果未指定主机名和端口，则[它们默认为 localhost 和 3309](http://dev.mysql.com/doc/en/connecting.html) - 因此，在您的情况下，您可以省略上述所有内容并使用：

```
mysql -u 用户名 -p db_name

```

要执行您当前正在执行的操作（不在命令行上指定数据库名称），您必须在连接后[`USE`](http://dev.mysql.com/doc/en/use.html)在提示符处调用命令`mysql>`以选择数据库：

```
mysql -u 用户名 -p
mysql> 使用 db_name;

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T17:56:12.103

127.0.01 明显拼写错误。127.0.0.1 是正确的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T17:56:45.490

127.0.01:3306 不是 127.0.0.1:3306

你忘了点。

# joomla - 如何制作 Joomla 1.5 的工作副本

> ID：10436798
> 
> 赞同：0
> 
> 时间：2012-05-03T17:54:51.647
> 
> 标签：joomla

我正在运行 Joomla 1.5

我通过“cp”从命令行复制了整个 Joomla 目录我在 phpMyAdmin 中复制了整个 MySQL 数据库表单

当我运行复制的站点时，我没有得到我选择的模板，我得到了开箱即用的默认模板。所以我进入模板管理器并将我的模板设为默认模板。

接下来的菜单很古怪。

因此，在我继续手动设置所有内容之前，如果我在这里遗漏了什么，为什么当我制作所有内容的精确副本时，新的 Joomla 站点看起来与当前站点不完全相同？

谢谢你帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T01:13:30.830

它应该工作。我假设您关注[了复制 Joomla 网站](http://docs.joomla.org/Copying_a_Joomla_website)？确保你完全遵循这一点。

但我强烈建议改用[Akeeba 备份](http://extensions.joomla.org/extensions/access-a-security/site-security/backup/1606)。我将它用于我的所有网站，并且它可以正常工作。这是一个免费的扩展，可以为您完成这一切。可能需要一些初始设置，但之后你就设置好了。

# c++ - 如何将 print 运算符用于类的 const 实例？

> ID：10436799
> 
> 赞同：2
> 
> 时间：2012-05-03T17:54:56.770
> 
> 标签：c++, class, operator-overloading, constants, ostream

我使用 4 个类实现了边（如在图中）：Node、Node_Linkedlist、Edge、Edge_Linkedlist。Node 有一个私有 int 成员，Edge 有 2 个对 Node 的引用成员：

```
private:
    Node& in;
    Node& out; 
```

Edge 有 2 个工作构造函数，因此 Edge 同时支持`Node`和`const Node`.

```
Edge(Node& tmpin, Node& tmpout) : in(tmpin),out(tmpout) {};
Edge(const Node& tmpin, const Node& tmpout) : in(Node(tmpin)),out(Node((tmpout))) {}; 
```

`<<`运营商：

```
ostream& operator<<(ostream& out, const Edge& node)
{
    out<<node.in<<endl;
    return out;
} 
```

这适用于`Node`但不适用于`const Node`. 在`const Node`中，作为进入操作符范围的调试器，它转储 Node 的 int 值。为什么运营商不工作`const Node`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T17:58:15.410

您的代码无效-您将非常量引用绑定到构造函数中的临时对象-`Node(tmpin)`并且`Node(tmpout)`是临时对象-并且遇到未定义的行为。要支持`const`，您要么需要创建成员`const`、指针，要么将它们设为对象而不是引用。

就个人而言，我会让它们成为智能指针：

```
private:
  std::shared_ptr<Node> in;
  std::shared_ptr<Node> out; 
```

# javascript - 将鼠标悬停在嵌套gridview中的图像上时如何获取jquery弹出窗口

> ID：10436801
> 
> 赞同：2
> 
> 时间：2012-05-03T17:55:02.627
> 
> 标签：javascript, jquery, asp.net, html, c#-4.0

弹出窗口正在从数据库中获取信息，并将其动态添加到面板中，一旦您将鼠标悬停在嵌套网格视图中的图像上，它将在该面板中显示。弹出窗口的位置也应该在图像的左侧。当您将鼠标悬停在图像上时，它会随着我的鼠标移出而迅速消失。如果有人可以提供帮助，则需要帮助，因为我一直在尝试通过使用 jquery 来实现这一点，我也是新手。

```
 $('img.imagepopupcontext').mouseover(function () {
            var cvalue = $(this).parent().parent().attr('id'); //tr.innerGridRow parent
            count++;
            $('#ctl00_ContentPlaceHolder1_txtkey').val(cvalue);
            $('#ctl00_ContentPlaceHolder1_btnpopupclick').click();

            var pos = $(this).offset();

            $('#ctl00_ContentPlaceHolder1_panelshow').css({
                position: "absolute",
                top: (pos.top - 100) + "px",
                left: (pos.left - 310) + "px"
            });
            $('#ctl00_ContentPlaceHolder1_panelshow').css('display', 'block');
            //alert('image test over' + pos.left + "," + pos.top);

        });

        $('img.imagepopupcontext').mouseout(function () {
            //alert(count);
            count = 0;
            //$('#ctl00_ContentPlaceHolder1_btnpopupclick').html('');
            $('#ctl00_ContentPlaceHolder1_panelshow').hide();
            //alert('image test mouse out');

        }); 
```

[点击这里查看 JSFIDDLE](http://jsfiddle.net/wayne9999/LEPdT/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T18:27:51.407

我认为下面的代码将使您开始您的旅程。我还更新了您的 JSFiddle。不过，我不知道它是否会保存在您的帐户中。

jQuery 中的悬停功能结合了“mouseover”和“mouseout”，因此使用起来更容易一些。

CSS

```
 #info
    {
        background: #CCC;
        width: 300px;
        padding-bottom: .5em;
        padding-right: 15px;
        overflow: hidden;
        position: absolute;
    } 
```

* * *

HTML

```
 <table border="1" bgcolor="skyblue">
        <tr>
            <td>
                in progress
            </td>
            <td>
                Sale
            </td>
        </tr>
        <tr>
            <td>
                in progress
            </td>
            <td>
                <table border="1" bgcolor="orange">
                    <tr>
                        <td>
                            inner table
                        </td>
                        <td>
                            inner table2
                        </td>
                        <td>
                            <img id="imgpopup" src="http://cdn1.iconfinder.com/data/icons/SOPHISTIQUENIGHT/mail_icons/png/16/pop_documents.png" />
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
    <div id="divshowpopup">
        <p id="dbInfo">
            Show information from database
        </p> 
```

jQuery

```
 $(function () {

        // Set the offsets for the mouse over upfront 
        // so they are easier to change.
        var offsetY = -20; 
        var offsetX = 40;

        $('#imgpopup').hover(function (e) {
            // Begin mouseover function

            // Grab the p tag with the id of 'dbInfo' in order
            // to retrieve information from it later
            var $dbInfo = $('#dbInfo');

            // Create a variable that will hold the HTML
            // for the pop up. However, this is not the best
            // way dynamically create the popup. You should
            // look into jQuery templating.
            var html = '<div id="info">';
            html += '<h4>Info here</h4>';
            html += '<p>' + $dbInfo.text() + '</p>';
            html += '</div>';

            // Append the variable to the body and the select
            // itself and its children and hide them, so you
            // can then add a fadeIn effect.
            $('body')
                .append(html)
                    .children('#info')
                    .hide()
                    .fadeIn(400);

            // This is where the popup offesets away from your cursor
            // The variables set up top will decide how far away the
            // pop up strays away from your cursor.
            $('#info')
                .css('top', e.pageY + offsetY)
                .css('left', e.pageX + offsetX);

        }, function () {
            // Begin mouseout function

            // Remove on mouse out
            $('#info').remove();
        });

        // Whenever the mouse moves the popup will follow using
        // the offsets set up top.
        $('#imgpopup').mousemove(function (e) {
            $('#info')
                .css('top', e.pageY + offsetY)
                .css('left', e.pageX + offsetX);
        });

    }); 
```

# ruby-on-rails-3 - 从 Rails 3 中的邮件程序访问帮助程序的问题

> ID：10436803
> 
> 赞同：1
> 
> 时间：2012-05-03T17:55:08.313
> 
> 标签：ruby-on-rails-3, actionmailer, helpers

我正在使用 Rails 3.0.3。我尝试使用此站点上多个问题中的所有方法，即这个问题，但我似乎仍然无法从我的邮件程序中访问我的帮助方法。我尝试使用“助手：应用程序”，如下所示：

```
class MyMailer < ActionMailer::Base
  default :from => "lalala@lalala.com>"

  helper :application
end 
```

我还尝试了“helper ApplicationHelper”以及“add_template_helper(ApplicationHelper)”。对视图工作得很好的辅助方法没有任何问题。有什么我想念的吗？也许在邮件设置文件中的一行或什么？提前非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T01:05:39.943

而不是`helper :application`，使用`extend ApplicationHelper`. `include ApplicationHelper`至少在 Rails 3.2 中不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T17:56:33.217

```
class MyMailer < ActionMailer::Base
    include ApplicationHelper

.
.

end 
```

# android - 在 ListView 中使用 BaseAdapter 时如何单独单击每个项目？

> ID：10436805
> 
> 赞同：3
> 
> 时间：2012-05-03T17:55:19.070
> 
> 标签：android, android-listview, baseadapter

在每行中单击`ListView`包含`ToggleButton`、`Button`和的自定义项时遇到问题。问题：当我单独单击每个视图时，如何为每个视图调用不同的操作？我的代码：`TextView``Spinner`

```
public class CustomListAdapter extends BaseAdapter {

             Context _context;
             private ArrayList<String> _list;  

             public CustomListAdapter(Context context, 
                                         ArrayList<String> listItems) {
              _context= context;
              _list = listItems; 
             }

             public int getCount(){
              return _list.size();
             }

             public long getItemId(int position){
              return position;
             }

             public Object getItem(int position){
              return _list.get(position);
             } 

             public View getView(int position,View convertView,ViewGroup parent)
             {
               ViewContainer container = new ViewContainer();       

               if(convertView == null)
               {  
                   LayoutInflater inflater = LayoutInflater.from(_context);
                   convertView = inflater.inflate(R.layout.elements,parent, false);
                   convertView.setTag(container); 
                   convertView.setClickable(true);

                   container.listIcon = (ToggleButton)convertView.findViewById(R.id.togle_item);
                   container.listText = (TextView)convertView.findViewById(R.id.text_listitem);
                   container.spinner=(Spinner)convertView.findViewById(R.id.spinner1);
                   container.but=(Button)convertView.findViewById(R.id.button1);
                  convertView.setOnClickListener(new OnClickListener() {

                       public void onItemClick(AdapterView<?> arg0, View arg1, int position, long arg3) 
                       {

                         **How can I do that when I click each view individually, different action is called for each view???**
                       }

                    public void onClick(View v) {

                    }

                    }
                  );
               }
                 container = (ViewContainer) convertView.getTag();
                 ToggleButton myListIcon = container.listIcon;
                 myListIcon.setChecked(true);
                 Button MyButton=container.but;
                 TextView myListText = container.listText;
                 myListText.setText(_list.get(position));
                 Spinner MySpinner=container.spinner;
                 MySpinner.setAdapter(adapter);
                 container = null;
                 return convertView;
              }
              private class ViewContainer
              {
                  private ToggleButton listIcon; 
                  private TextView listText;
                  private Spinner spinner;
                  private Button but;
              }

        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T18:33:58.857

我假设，您在 Listview 上有按钮、文本视图和 ..。并且您需要为列表视图上的按钮编写操作。

这是编码格式：

```
 .....
    public View getView(int position, View convertView, ViewGroup parent) {
        View view;

        if (convertView == null) {
            LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            view = inflater.inflate(R.layout.calllog_row, null);
            button1 = (Button) view.findViewById(R.id.button1);
            button1.setOnClickListener(this);
        }
        else {
            view = convertView;
        }

        Button1 = (Button) view.findViewById(R.id.Button1);
        Button1.setTag(position);   // this is important

        return view;
    }
    public void onClick(View v) {
        Integer position = (Integer) v.getTag();
        switch (v.getId()) {
        case R.id.button1:
            Log.e("click position ", "" + position);
            break;

    }

 ...... 
```

如果我的假设是正确的，我的编码将对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T18:20:28.047

而不是为您需要执行不同操作的行中`OnClickListener`的`convertView`每个添加侦听器：`View`

```
//...
container.listIcon.setOnClickListener(new OnClickListener() {

   public void onClick(View v) {
      //action for the toggle Button
   }
});
container.but.setOnClickListener(new OnClickListener() {

   public void onClick(View v) {
      //action for the simple Button
   }
});
container.spinner.setOnItemSelectedListener(new OnItemSelectedListener() {
     public void onItemSelected(AdapterView<?> parent,
        View view, int pos, long id) {
       //something was selected on the spinner
    }

    public void onNothingSelected(AdapterView parent) {
      // for interface
    }
});
//... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T18:20:43.493

您需要修改您的 getView ，就像我在下面显示的代码一样。

```
@Override
        public View getView(int position, View convertView, ViewGroup arg2) {
            ViewContainer container;

            if(convertView == null)
               {  
                   LayoutInflater inflater = LayoutInflater.from(_context);
                   convertView = inflater.inflate(R.layout.elements,parent, false);
                   container = new ViewContainer(); 
                   //convertView.setClickable(true);
                   container.listIcon = (ToggleButton)convertView.findViewById(R.id.togle_item);
                   container.listText = (TextView)convertView.findViewById(R.id.text_listitem);
                   container.spinner=(Spinner)convertView.findViewById(R.id.spinner1);
                   container.but=(Button)convertView.findViewById(R.id.button1);
                   convertView.setTag(container); 
               }else{
                   container=convertView.getTag();
               }
            //Now for set Click event for your Induavidual item in list you can do like below
            //use postion to set id of each item
            container.but.setId(position);
            container.but.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                              //This will give you position of item 
                             int id=v.getId();

                }
            });

        //same you can do for spinner and textview and ToggleButton ,use appropriate method that you want to use 

            return convertView;
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-17T01:30:33.060

```
vh.orderButton.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {

            // ---Starting new intent
            Intent in = new Intent(activity.getApplicationContext(), ActivityOrder.class).setFlags(Intent.FLAG_ACTIVITY_NEW_TASK); ;
            // ---sending product no to next activity
            in.putExtra("product_category", productNo);
            in.putExtra("business_id", businessId); 
            // ---starting new activity and expecting some response back
            activity.getApplicationContext().startActivity(in);

            Toast.makeText(activity, productNo + " " + businessId, Toast.LENGTH_SHORT).show();
        }
    }); 
```

# ruby - Rails 3.0.12 性能测试问题

> ID：10436808
> 
> 赞同：2
> 
> 时间：2012-05-03T17:55:28.397
> 
> 标签：ruby, ruby-on-rails-3, testing, performance-testing

我正在尝试运行基准测试和性能测试，但没有显示指标...

红宝石-v：

`ruby 1.9.2p320 (2012-04-20 revision 35421) [x86_64-linux]`

rvm列表：

`=> ruby-1.9.2-p320-perf [ x86_64 ]`

运行结果`rake test:profile`：

```
BrowsingTest#test_homepage (130 ms warmup)
        process_time: 18446744073.71 sec
              memory: unsupported
             objects: unsupported
BrowsingTest#test_intel_companies_newstats (34 ms warmup)
        process_time: 26 ms
              memory: unsupported
             objects: unsupported 
```

并运行`rake test:benchmark`

```
BrowsingTest#test_homepage (103 ms warmup)
           wall_time: 23 ms
              memory: 0.00 KB
             objects: 0
             gc_runs: 0
             gc_time: 0.00 ms
BrowsingTest#test_intel_companies_newstats (31 ms warmup)
           wall_time: 9 ms
              memory: 0.00 KB
             objects: 0
             gc_runs: 0
             gc_time: 0.00 ms 
```

我的宝石文件

```
group :test do
    gem 'capybara'

    # for performance tests
    gem 'ruby-prof', :git => 'git://github.com/wycats/ruby-prof.git'
    gem 'test-unit'
end 
```

当我尝试运行时：

`rvm install 1.9.2 --patch gcdata --name perf`

我有：

```
Installing Ruby from source to: /home/victor/.rvm/rubies/ruby-1.9.2-p320-perf, this may take a while depending on your cpu(s)...

ruby-1.9.2-p320-perf - #fetching 
ruby-1.9.2-p320-perf - #extracting ruby-1.9.2-p320 to /home/victor/.rvm/src/ruby-1.9.2-p320-perf
ruby-1.9.2-p320-perf - #extracted to /home/victor/.rvm/src/ruby-1.9.2-p320-perf
Patch 'gcdata' not found. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T16:12:33.433

确实，您需要修补的 gc。但此补丁不适用于所有红宝石。对于 ruby​​ 1.9.2，您必须使用补丁 290。所以以下应该可以正常工作

```
rvm install 1.9.2-p290 --patch gcdata 
```

# java - 在 Hadoop 中拆分 Reducer 输出

> ID：10436811
> 
> 赞同：2
> 
> 时间：2012-05-03T17:55:39.140
> 
> 标签：java, hadoop

我的 Reduce 操作生成的输出文件很大（Gzipping 后为 1 GB）。我希望它将中断输出生成为 200 MB 的较小文件。是否有一个属性/Java 类可以按大小或没有拆分减少输出。行数？我不能增加 reducer 的数量，因为这会对 hadoop 作业的性能产生负面影响。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T06:21:18.177

我很好奇为什么你不能只使用更多的减速器，但我会相信你的话。

您可以做的一种选择是使用 MultipleOutputs 并从一个 reducer 写入多个文件。例如，假设每个 reducer 的输出文件为 1GB，而您想要 256MB 的文件。这意味着您需要为每个 reducer 写入 4 个文件，而不是一个文件。

在您的工作驱动程序中，执行以下操作：

```
JobConf conf = ...;

// You should probably pass this in as parameter rather than hardcoding 4.
conf.setInt("outputs.per.reducer", 4);

// This sets up the infrastructure to write multiple files per reducer.
MultipleOutputs.addMultiNamedOutput(conf, "multi", YourOutputFormat.class, YourKey.class, YourValue.class); 
```

在你的减速器中，这样做：

```
@Override
public void configure(JobConf conf) {
  numFiles = conf.getInt("outputs.per.reducer", 1);
  multipleOutputs = new MultipleOutputs(conf);

  // other init stuff
  ...
}

@Override
public void reduce(YourKey key
                   Iterator<YourValue> valuesIter,
                   OutputCollector<OutKey, OutVal> ignoreThis,
                   Reporter reporter) {
    // Do your business logic just as you're doing currently.
    OutKey outputKey = ...;
    OutVal outputVal = ...;

    // Now this is where it gets interesting. Hash the value to find
    // which output file the data should be written to. Don't use the
    // key since all the data will be written to one file if the number
    // of reducers is a multiple of numFiles.
    int fileIndex = (outputVal.hashCode() & Integer.MAX_VALUE) % numFiles;

    // Now use multiple outputs to actually write the data.
    // This will create output files named: multi_0-r-00000, multi_1-r-00000,
    // multi_2-r-00000, multi_3-r-00000 for reducer 0\. For reducer 1, the files
    // will be multi_0-r-00001, multi_1-r-00001, multi_2-r-00001, multi_3-r-00001.
    multipleOutputs.getCollector("multi", Integer.toString(fileIndex), reporter)
      .collect(outputKey, outputValue);
}

@Overrider
public void close() {
   // You must do this!!!!
   multipleOutputs.close();
} 
```

这个伪代码是在考虑旧的 mapreduce api 的情况下编写的。但是，使用 mapreduce api 存在等效的 api，因此无论哪种方式，您都应该做好准备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T21:20:14.730

没有财产可以做到这一点。您需要编写自己的输出格式和记录器。

# c# - 检查值是否已经存在

> ID：10436813
> 
> 赞同：26
> 
> 时间：2012-05-03T17:55:46.497
> 
> 标签：c#, dictionary, contains

我有一本字典，里面有我的书：

```
Dictionary<string, book> books 
```

书籍定义：

```
class book
{
    string author { get; set; }

    string title { get; set; }
} 
```

我在字典里加了一些书。

如何检查字典中是否有一本书与用户提供的标题相匹配？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-05-03T17:57:00.280

```
books.ContainsKey("book name"); 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-05-03T18:00:22.827

如果您不使用书名作为键，那么您将不得不枚举值并查看是否有任何书包含该书名。

```
foreach(KeyValuePair<string, book> b in books) // or foreach(book b in books.Values)
{
    if(b.Value.title.Equals("some title", StringComparison.CurrentCultureIgnoreCase))
        return true
} 
```

或者您可以使用 LINQ：

```
books.Any(tr => tr.Value.title.Equals("some title", StringComparison.CurrentCultureIgnoreCase)) 
```

另一方面，如果您使用书名作为键，那么您可以简单地执行以下操作：

```
books.ContainsKey("some title"); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-03T18:06:44.653

如果您被允许使用 LINQ，请尝试使用以下代码：

```
bool exists = books.Any(b => (b.Value != null && b.Value.title == "current title")); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-03T18:01:02.877

在您的字典中，键是否包含标题？如果是，`ContainsKey`请用作其他答案。如果键完全是其他东西，并且您想检查值的（Book 对象的）`title`属性，则必须像这样手动进行：

```
foreach(KeyValuePair<string,book> kvp in books) {
    if (kvp.Value.title == "some title")
        return kvp.Key;
}

return String.Empty; //not found 
```

# jquery - 将 html 对象转换为字符串并使用 jQuery 输出字符串

> ID：10436814
> 
> 赞同：0
> 
> 时间：2012-05-03T17:55:49.453
> 
> 标签：jquery, html, image, html-parsing

我最终试图找到页面上的所有图像标签并打印出没有 alt 标签的标签。

现在我有这个：

```
var str = '<img id="img1" /><img id="img2" /><img id="img3" /><img id="img4" alt="ASDF" title="" /><img id="img5" alt="" /><img id="img6" title="" />';
var imagesWithoutAlt = $( str ).filter( 'img:not([alt])' );
var newString = new String( $( imagesWithoutAlt ).clone().html());
$(document.body).append($('<textarea rows="6" cols="40"/>').text( newString ); 
```

但这无法输出任何东西。帮助？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T18:12:21.897

工作演示：http: [//jsfiddle.net/pkdtg/](http://jsfiddle.net/pkdtg/)

```
var str = '<img id="img1" /><img id="img2" /><img id="img3" /><img id="img4" alt="ASDF" title="" /><img id="img5" alt="" /><img id="img6" title="" />';
var imagesWithoutAlt = $(str).filter('img:not([alt])');
var newString = $(imagesWithoutAlt).clone().wrapAll("<div />").parent().html();
$(document.body).append($('<textarea rows="6" cols="40"/>').text(newString));​ 
```

我添加了`.wrapAll("<div />").parent()`

# twitter-bootstrap - 如何在游戏框架 2.x 中使用 Twitter Bootstrap 2

> ID：10436815
> 
> 赞同：28
> 
> 时间：2012-05-03T17:56:00.410
> 
> 标签：twitter-bootstrap, playframework, playframework-2.0, twitter-bootstrap-2

我知道当前的播放！发行版有一个 Bootstrap 1.4 的助手。如果我想使用当前版本的 Bootstrap，我应该怎么做？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-05-03T19:01:46.020

我正在使用带有 Play 2.0 的 2.0.1 twitter 引导程序。您可以在此处下载特定版本：[https](https://github.com/twitter/bootstrap/tags) ://github.com/twitter/bootstrap/tags 。下载 twitter 引导程序后，您有两个选择：

*   您可以选择只使用`bootstrap.min.css`(and `bootstrap-responsive.css`) and `bootstrap.min.js`，所有这些文件都可以放在公共文件夹中。

*   或者您可以将较少的文件用于 css。如果您想使用较少的文件，请制作以下包（在您的应用程序文件夹的根目录中）：

    assets.stylesheets.bootstrap

在您构建 scala 时，您定义应该编译这些 .less 文件：

```
// Only compile the bootstrap bootstrap.less file and any other *.less file in the stylesheets directory 
def customLessEntryPoints(base: File): PathFinder = ( 
    (base / "app" / "assets" / "stylesheets" / "bootstrap" * "bootstrap.less") +++
    (base / "app" / "assets" / "stylesheets" / "bootstrap" * "responsive.less") +++ 
    (base / "app" / "assets" / "stylesheets" * "*.less")
)

val main = PlayProject(appName, appVersion, appDependencies, mainLang = JAVA).settings(
  // Add your own project settings here
    lessEntryPoints <<= baseDirectory(customLessEntryPoints)
) 
```

然后你可以将它包含在你的模板中：

```
<link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/bootstrap/bootstrap.min.css")" />
<link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/bootstrap/responsive.min.css")" /> 
```

**编辑：2012-09-17：** 如果您打算从源代码构建 Play，请按照本教程 Play wiki 页面：[https ://github.com/playframework/Play20/wiki/Tips](https://github.com/playframework/Play20/wiki/Tips)

**编辑：2012-09-21：** 使用引导程序时，您始终必须选择是更改文件夹`images`还是添加到引导程序使用的两个静态图像的路由：

**编辑：2013-03-11：** 正如外部参照指出的那样，我犯了一个错误：`img`必须是`images`：

```
GET     /assets/img/glyphicons-halflings-white.png      controllers.Assets.at(path="/public", file="/images/glyphicons-halflings-white.png")
GET     /assets/img/glyphicons-halflings.png            controllers.Assets.at(path="/public", file="/images/glyphicons-halflings.png") 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-06-13T09:30:23.287

一种快速且可维护的方法是使用[WebJars （](http://www.webjars.org/) [Typesafe Dev Advocate: James Ward](http://www.jamesward.com/)的客户端依赖管理器），在 Build.scala 中添加几行，您可以轻松添加 Bootstrap（例如版本 2.3、3.0 等） -还有更多 - 到您的项目。

1）这是在您的**Build.scala**[中添加 Bootstrap 2.3 到 Play 2.1 的文档示例](http://www.webjars.org/documentation)：

 **```
import sbt._
import Keys._
import play.Project

object ApplicationBuild extends Build {
  val appName         = "foo"
  val appVersion      = "1.0-SNAPSHOT"

  val appDependencies = Seq(
    "org.webjars" %% "webjars-play" % "2.1.0-2",
    "org.webjars" % "bootstrap" % "2.3.2"
  )

  val main = Project(appName, appVersion, appDependencies).settings()
} 
```

**2）然后在您的路线**文件中添加一个条目：

```
GET     /webjars/*file                    controllers.WebJarAssets.at(file) 
```

3）将相关链接添加到您的**模板**：

```
<link href='@routes.WebJarAssets.at(WebJarAssets.locate("css/bootstrap.min.css"))' rel='stylesheet' >
<script src='@routes.WebJarAssets.at(WebJarAssets.locate("jquery.min.js"))' type='text/javascript' ></script> 
```

***请注意**，WebJars 实际上会尝试为您查找资源，您不需要完全限定资产位置。*

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-16T00:40:19.610

我会投入，将 Glyphicons 与 Bootstrap 2.2.2 和 Play 2.0.4 一起使用，我不能完全使用上面发布的 adis 路线。我将两个 glyphicons 文件移动到“images”文件夹（播放默认值，而不是 Bootstrap 默认值的“img”）并添加到我的路线中：

```
# Map Bootstrap images
GET     /assets/img/glyphicons-halflings.png            controllers.Assets.at(path="/public", file="/images/glyphicons-halflings.png")
GET     /assets/img/glyphicons-halflings-white.png      controllers.Assets.at(path="/public", file="/images/glyphicons-halflings-white.png") 
```

这让我可以像普通的引导安装一样访问字形图标，不会弄乱“少”文件等

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-03T20:07:17.720

或者您可以按照这个简单的教程进行操作：https: [//plus.google.com/u/0/108788785914419775677/posts/QgyUF9cXPkv](https://plus.google.com/u/0/108788785914419775677/posts/QgyUF9cXPkv)

我将它与 Twitter Bootstrap 2.0.1 和 Play 2.0 一起使用

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-23T11:18:26.107

我使用 bootstrap 2.0 和 play 2.0 。一切正常，除了 helper.twitterbootstrap。

我认为它是 twitterbootstrap 1.x 的 maje 类，而不是 2.0 。有什么解决办法吗？

编辑：这是工作

1.  我在 app/view 中创建包助手/twitterBootstrap2
2.  然后我在 helper/twitterBootstrap2 中复制 path_to_play/play2.0.1/framework/src/play/src/main/scala/views/helper
3.  我按照我的意愿修改它。
4.  我在我想使用它的视图中导入 @import helper.FieldConstructor 和 @import helper.twitterBootstrap2._ 和 @impliciteField = @(FieldContructor(twitterBootstrap2FieldContructor.f)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-03T18:01:54.137

您只需更新 twitter 引导程序并更新您自己的代码（您编写的引导程序特定代码）。有关更新到最新版本的更多信息，请查看以下链接：http: [//twitter.github.com/bootstrap/upgrading.html](http://twitter.github.com/bootstrap/upgrading.html)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-08-09T13:50:01.340

**脚本方法**（从[这里](http://www.playframework.com/documentation/2.1.1/Tips)）

1-将引导程序的较少文件复制到`app/assets/stylesheets/bootstrap`

2-`app/assets/stylesheets/bootstrap`通过将其复制并粘贴到外壳/终端中来运行此脚本（脚本将重命名部分文件并编辑导入的路径）：

```
for a in *.less; do mv $a _$a; done 
sed -i 's|@import "|@import "bootstrap/_|' _bootstrap.less 
mv _bootstrap.less ../bootstrap.less
sed -i 's|@import "|@import "bootstrap/_|' _responsive.less 
mv _responsive.less ../responsive.less 
```

**注意**：上面的脚本**在 Mac 上不起作用**！**在 Mac 上使用这个**：

```
for a in *.less; do mv $a _$a; done 
sed -i "" 's|@import "|@import "bootstrap/_|' _bootstrap.less
mv _bootstrap.less ../bootstrap.less
sed -i "" 's|@import "|@import "bootstrap/_|' _responsive.less 
mv _responsive.less ../responsive.less 
```

3-包括编译的CSS

```
<link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/bootstrap.min.css")" />
<link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/responsive.min.css")" /> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-03T19:00:45.533

我不得不做几件事，包括使用最新版本的 Play 2.0，因为发布的版本在编译 bootstrap 使用的较少文件时存在一些问题。按照此处的说明[https://github.com/playframework/Play20/wiki/BuildingFromSource](https://github.com/playframework/Play20/wiki/BuildingFromSource)从源代码构建。然后我将所有引导程序更少的文件放在应用程序的“app/assets/stylesheets/”目录中。Play 应该只编译“bootstrap.less”，因此您需要将以下内容添加到“project/Build.scala”：

```
val main = PlayProject(appName, appVersion, appDependencies, mainLang = JAVA).settings(
  lessEntryPoints <<= baseDirectory(_/"app"/"assets"/"stylesheets" ** "bootstrap.less")
) 
```

如果您使用任何引导 javascript 插件，您需要将它们添加到“public/javascripts”并将它们包含在您的 HTML 中。**

# javascript - 使用 JavaScript检测区域内部

> ID：10436819
> 
> 赞同：0
> 
> 时间：2012-05-03T17:56:05.077
> 
> 标签：javascript, area, timeline

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T20:01:45.093

也许您应该观察滑块元素的滚动事件。您必须在每个滚动过程之后测量哪个元素在可见滑块区域内（我想其他元素被`overflow: scroll`CSS 隐藏了，对吧？）...

您应该使用一个小的延迟，以便该功能仅在滚动真正停止而不是持续时触发

因为最好用实际工作的代码来证明这一点……看看我的[jsfiddle](http://jsfiddle.net/MAkGJ/2/)。它至少可以在 Chrome 中运行，但我想它也可以在其他浏览器中运行......当您滚动浏览年份列表并停止 50 毫秒时，此列表项在滑块的可见区域中可见，使用into`div`登录`console.log`JS 控制台...希望对您有所帮助 =)

编辑：有一个小的 CSS 错误...已修复并更新了 URL

# android - 我如何从数据库中获取以验证在 Android 中的登录

> ID：10436826
> 
> 赞同：0
> 
> 时间：2012-05-03T17:56:24.767
> 
> 标签：android

```
alert.setPositiveButton("Login",
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog,
                                int whichButton) {

                            List<String[]> data = userData.selectAll();
                            String iUsername = inputUsername.getText()
                                    .toString();
                            String iPassword = inputPassword.getText()
                                    .toString();
                            if (data != null) {

                                for (String[] username : data) {

                                    if (iUsername
                                            .equals(username[1])
                                            && iPassword
                                                    .equals(username[2])) {

                                        Toast.makeText(
                                                getApplicationContext(),
                                                "Welcome " + username[1],
                                                Toast.LENGTH_SHORT).show();
                                        System.out.println("----------------->"+username[2]);
                                        Intent i = new Intent(
                                                MainActivity.this,
                                                SelectMenuZone.class);
                                        i.putExtra("Username", username[1]);
                                        i.putExtra("userID", username[4]);
                                        startActivity(i);
                                        finish();
                                    } else {

                                        // TODO: handle exception
                                        Toast.makeText(
                                                getApplicationContext(),
                                                "Username or Password Incorrect",
                                                Toast.LENGTH_SHORT).show();
                                    }

                                }
                            }

                        }
                    }); 
```

我的项目必须登录才能识别用户，数据库中有很多用户我将验证数据库中唯一的一个用户

此代码将检查数据库中的所有数据以验证用户名和密码，我如何仅验证一个在edittext中正确的数据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T18:02:13.013

为什么所有这些工作？为用户输入的登录信息编写一个查询，如果返回的光标不为空，你就可以了。

# c# - 非JavaScript版本的asp.net页面的下拉菜单回发？

> ID：10436833
> 
> 赞同：0
> 
> 时间：2012-05-03T17:56:43.307
> 
> 标签：c#, asp.net

我目前有两个下拉菜单，当用户从另一个下拉菜单中选择一个值时，其中一个会被过滤。但我还需要支持非 JavaScript 版本，我想知道如何通过 onselectedindexchanged 实现回发？例如，我知道我不能使用 AutoPostBack 属性，那么如何实现呢？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T18:47:49.453

您不能使用 javascript 的回发功能（这`SelectedIndexChanged`是其中之一）`ASP.Net`并且禁用了 javascript。ASP.Net 和 WebForms 与 javascript 紧密耦合，以执行其大部分发布功能，包括一些基本的事情，如维护`ViewState`.

如果禁用 javascript 是一项要求，您可能需要考虑使用[MVC](http://msdn.microsoft.com/en-us/library/gg416514%28v=vs.98%29.aspx)方法，但即便如此，Web 用户体验仍然非常有限。

# django - 什么是好的（几乎完美的）django 设置和 apache conf 配置？

> ID：10436836
> 
> 赞同：1
> 
> 时间：2012-05-03T17:56:47.183
> 
> 标签：django, apache, .htaccess, settings

我知道这是一个新手问题，通过阅读大量关于 django 和 apache 的文档，我可能会找到我的完美配置。

但我仍然有点困惑，因为如果你用谷歌搜索，你会发现很多关于开发的信息，而关于运行系统的信息却很少。

所以我想在这里收集一些额外的信息。

我决定最好有一个本地服务器进行开发，然后使用：

```
python ./manage.py runserver 
```

[它适用于小型项目和应用程序，但一旦你开始接近真实，它就会变得复杂]

我所知道的是： - 静态文件将由 apache 提供。

我猜是：我猜 django 会将这些文件寻址到 apache 将被 django “忽略”（？）。这些是设置：MEDIA_ROOT，MEDIA_URL 我不确定：STATIC_ROOT，STATIC_URL [好的，假设我没有弄乱 url.py..]

现在标题问题：什么是好的 apache（和 unix 权限）配置？如何区分 MEDIA 和 STATIC？

也许我确实错过了什么。

**PS：** 目前我在apache中有这些别名：

```
Alias /admin-media /usr/lib/python2.7/site-packages/django/contrib/admin/media
Alias /things_media /home/udev/prj/DjangoSite/www/things_media 
```

# c++ - Cython 和 c++ 类构造函数

> ID：10436837
> 
> 赞同：7
> 
> 时间：2012-05-03T17:56:51.877
> 
> 标签：c++, python, cython, word-wrap

有人可以建议一种使用 Cython 操作 c++ 对象的方法，当一个类的 c++ 实例预计将提供另一个包装类的构造函数时，如下所述？

请查看 PySession 类的 pyx 文件上的注释，该类将 python PyConfigParams 对象作为参数，然后需要从中提取值以构造 c++ ConfigParams 对象。然后使用 ConfigParams 对象来提供 Session 的构造函数。

最好有一个过程，它允许我将 PyConfigParams 对象包装的 ConfigParams c++ 对象直接“注入”到 Session 的构造函数中，而不必先拆除它，然后再构建一个新的 c++ 对象来提供构造函数。这当然有效。然而，实现这个解决方案是一种繁琐、残酷的方式，更不用说不可靠了。

我知道 PyCapsule，但是它可能需要触摸 c++ 标头，这是我无法做到的。

与此相关，但另一个问题是：如果我需要一个包装类（我们在这里说 PySession）通过返回一个 ConfigParams 实例来模拟 C++ api 的行为怎么办？我是否需要反向操作并拆除 c++ 对象来构建 Python PyConfigParams，然后将其返回给 Python 世界中的 Python 用户？非常欢迎任何建议！谢谢！

假设我有两个名为 ConfigParams 和 Session 的 C++ 类。ConfigParams 的一个实例用于提供 Session 类的构造函数：

# C++ 类

## ConfigParams 类

```
// ConfigParams.h
#include <iostream> 
using namespace std; 
class ConfigParams 
{ 
  int parameter1; 
 public: 
  ConfigParams(int par1) { this->parameter1 = par1;} 
  int getPar1() { return this->parameter1; } 
}; 
```

## 会话类

```
// Session.h 
#include <iostream> 
using namespace std; 
#include "configparams.h" 
class Session 
{ 
  int sessionX; 
 public: 
  Session(ConfigParams parameters) { this->sessionX = parameters.getPar1(); } 
  void doSomething(); 
}; 

void Session::doSomething() 
{ 
  cout << "Session parameters set as: " << endl; 
  cout << "X = " << this->sessionX << endl; 
} 
```

# 上述类的 Cython pyx 和 pxd 文件：

## PyConfigParams

```
# configparams.pxd 
cdef extern from "configparams.h": 
    cppclass ConfigParams: 
        ConfigParams(int par1) 
        int getPar1() 

# configparams.pyx 
cdef class PyConfigParams: 
    cdef ConfigParams* thisptr 
    def __cinit__(self, i): 
        self.thisptr = new ConfigParams(<int> i) 
    def getPar1(self): 
        return self.thisptr.getPar1() 
```

## PySession 类

```
# session.pxd 
from configparams cimport * 
cdef extern from "session.h": 
    cdef cppclass Session: 
        Session(ConfigParams parameters) 
        void doSomething() 

# session.pyx
cdef class PySession: 
    cdef Session* thisptr 
    def __cinit__(self, pars): 
        # Note that here I have to extract the values 
        # from the pars (python PyConfigParams object) 
        # in order to build a c++ ConfigParams object 
        # which feeds the c ++ constructor of Session. 
        cdef ConfigParams* cpppargsptr = new ConfigParams(<int> pars.getPar1()) 
        self.thisptr = new Session(cpppargsptr[0]) 
    def doSomething(self): 
        self.thisptr.doSomething() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T18:15:58.753

解决方案：

在 configparams.pxd 模块中前向声明 PyConfigParams（因此可以从 session.pyx 模块调用）

```
# configparams.pxd                                                                                                                                                                                                                                            
cdef extern from "configparams.h":
    cppclass ConfigParams:
        ConfigParams(int par1)
        int getPar1()

cdef class PyConfigParams:
    cdef ConfigParams* thisptr 
```

在 session.pyx 模块中导入 PyConfigParams，并为构造函数转换参数，这将授予对指向 c++ 对象的 PyConfigParams 指针的访问权限，该指针需要被取消引用。

```
# session.pyx                                                                                                                                                                                                                                                 
from configparams cimport PyConfigParams
from cython.operator cimport dereference as deref

cdef class PySession:
    cdef Session* thisptr
    def __cinit__(self, PyConfigParams pars):
        self.thisptr = new Session(deref(pars.thisptr))
    def doSomething(self):
        self.thisptr.doSomething() 
```

# c# - 为什么 FindWindowEx 在我的窗口中找不到标签？

> ID：10436840
> 
> 赞同：2
> 
> 时间：2012-05-03T17:57:03.837
> 
> 标签：c#, .net, winapi, windows-7, windows-xp

我正在尝试调试一个用 C# 编写的小测试驱动程序应用程序。它打开了我们拥有的测试应用程序的几个实例。测试应用程序连接到服务器，并在成功连接后在标签中显示“REMOTE_CONNECTED”。因此，测试驱动程序在尝试将数据提供给测试应用程序之前正在寻找它。

代码如下所示：

```
 Console.Out.WriteLine("MAIN HANDLE IN GETCONN: " + Hwnd);
  //Attempt to find if we have have connected to the remote server
  IntPtr connHwnd = FindWindowEx(Hwnd, IntPtr.Zero, null, "REMOTE_CONNECTED"); 
```

connHwnd 总是返回 IntPtr.Zero 并且打印到控制台的 Hwnd 是我期望的测试应用程序的句柄。测试驱动程序在循环中坐了一会儿，反复调用上面的代码，直到找到那个标签。我可以在屏幕上看到标签显示“REMOTE_CONNECTED”但该功能没有找到它。

此外，其他人已经让它在 XP 上工作（而我在 Windows 7 上）。

最后，如果我在 Visual Studio 中运行它并设置一些断点，那么它似乎可以工作。所以这似乎不是一个逻辑缺陷，而是某种时间或争用问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T21:52:44.397

我的问题结果与这个问题相似：

[为什么无法获取已启动进程的主窗口句柄？](https://stackoverflow.com/questions/4727023/why-cant-get-the-main-window-handle-for-a-started-process)

我的 MainWindowHandle 没有设置为我期望的窗口（我使用 Spy++ 弄清楚了，感谢 Rob P.！）。因此，我使用 EnumWindows 编写了一些代码来查找我正在寻找的窗口（请参阅链接文章中 Joshua 的回答），然后使用该窗口句柄传递给 FindWindowEx，一切都按预期工作。

# javascript - 使用带有分离节点的 KnockoutJS

> ID：10436842
> 
> 赞同：4
> 
> 时间：2012-05-03T17:57:08.447
> 
> 标签：javascript, knockout.js

我要做的是使用jQuery的分离方法分离一些节点，更新我的ViewModel，附加我的节点，并更新值。

这可能吗？

这是我正在拍摄的一个[完整的小提琴。](http://jsfiddle.net/LS72r/)基本上，我希望能够从左到右，单击分离、更新和附加，并在文本框中有新的值。

* * *

**更新**

根据 RP 的回答，假设这适合您的用例，最好的选择是将它们附加到 dom *hidden*，更新您的视图模型，然后显示您的节点。像这样的东西对我有用：

```
$("#updateAndAttach").click(function () {
    var junk = $("<div />").css("display", "none");
    junk.append(nodes);
    $("#home").append(junk);

    vm.a("AAA");
    vm.b("BBB");

    $(nodes).unwrap();
}); 
```

**结束更新**

* * *

这是完整的代码：

**JavaScript**

```
$(function () {

    function ViewModel() {
        this.a = ko.observable("a");
        this.b = ko.observable("b");
    }

    var vm = new ViewModel();

    ko.applyBindings(vm, document.getElementById("home"));

    var nodes = null;

    $("#detach").click(function () {
        nodes = $("#home").children().detach();
    });

    $("#attach").click(function () {
        $("#home").append(nodes);
    });

    $("#update").click(function () {
        vm.a("AAA");
        vm.b("BBB");
    });
})(); 
```

**HTML**：

```
<div id="home">
    <input type="text" data-bind="value: a" />
    <input type="text" data-bind="value: b" />
</div>

<button id="detach">Detach</button>
<button id="update">Update</button>
<button id="attach">Attach</button> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T18:16:59.187

对单个绑定的评估`data-bind`被包装在一个计算的 observable 中，当它被重新评估并认识到它不是当前文档的一部分时，它将自行处理。

因此，没有一个简单的解决方法可以让您做您正在尝试的事情。您当然可以在进行更新时隐藏元素，然后取消隐藏它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T18:19:14.387

这里发生的情况是，当您调用 detach 方法时，ko 失去了与分离节点的绑定。使其工作的最简单方法是每次分离和附加节点时重新应用绑定。

看到这个jsfiddle：http: [//jsfiddle.net/EZFDt/](http://jsfiddle.net/EZFDt/)

编辑：使用该解决方法，请记住可能会对性能产生影响。也许您可以重新考虑解决问题的方式——您可以将节点移动到不同的隐藏位置而不是分离它们吗？你能简单地隐藏它们吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-28T10:44:17.427

你问这个问题已经有一段时间了，但我发现使用**detach**，然后立即**附加**到 DOM 中的某个有效位置，使所有绑定都能正常工作。然后，您可以在应用程序更改状态时**分离、附加**到任何您需要的地方。

我将它用于附加了多个事件的部分，例如 JQUI 元素、表单等，这样我就可以保留一份副本，然后附加到我去的*页面上。*例如。一个*注册*表单，它也用作*编辑个人资料*。

在您的情况下，最初将其附加到 'visibility:hidden;' 在某个明显用于分离元素的节点上的节点可能是合理的。

唐 祝你有美好的一天

# html - 垂直选取框删除空间

> ID：10436844
> 
> 赞同：3
> 
> 时间：2012-05-03T17:57:10.070
> 
> 标签：html, marquee, clonenode

我想在我的页面中包含一些垂直选取框文本，`<div>`以便自动滚动内容。

我发现以下代码很有用；

```
<marquee behavior="scroll" direction="up" height="250" scrollamount="2" scrolldelay="10" onmouseover="this.stop()" onmouseout="this.start()">
content goes here<br>
content goes here<br>
content goes here<br>
content goes here
</marquee> 
```

但它在内容之后添加了一个空格。内容仅在整个文本向上滚动后才会出现（类似于重新启动）。我怎样才能避免（或删除）这个空白？

我在 Stack Overflow 中找到了它[**，**](https://stackoverflow.com/questions/1948707/automatically-vertically-scroll-div-contents-looping)并且有一些注意事项`cloneNode()`。我不知道如何实现。

*注意：高度属性不相关。它具有相同的父级高度`<div>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T18:04:17.397

1.  该`<marquee>`元素是不兼容的 HTML，不应使用...但这是一个完全不同的论点。
2.  就其本质而言，元素将在再次循环之前一直滚动浏览内容。
3.  您可以使用一些基于 javascript 的解决方案，它们会做同样的事情，但会持续循环[。](https://stackoverflow.com/questions/337330/javascript-marquee-to-replace-marquee-tags)

# iphone - iOS 系统时间更新导致 NSTimer/NSDate 异常

> ID：10436850
> 
> 赞同：4
> 
> 时间：2012-05-03T17:57:35.933
> 
> 标签：iphone, ios, ipad, nsdate, nstimer

我正在开发一个具有事件计时器的应用程序，该计时器可以对可以持续很长时间的事件（呃！）进行计时。

我已经在相当长的时间内使用计时器完成了其他应用程序，并且以前从未遇到过这个问题。

基本上，发生的事情是，当应用程序启动时，我`NSDate`用`[NSDate date]`. 然后，我有一个定期触发的计划对象，并通过将当前值与原始值进行`NSTimer`比较来检查已经过去了多少时间。`[NSDate date]`

据我所知，这是做这类事情的正确方法，但如果我在上一段中有错误的假设，请纠正我。

无论如何，在过去几周在我的新 iPad 上进行测试时，我已经多次（并且随机地）发现我的系统时间似乎在跳跃。有一次，时间似乎跳了 64 秒！这意味着我的计时器标签显示“00:03”，然后立即显示“01:08”（正确添加一秒，然后错误添加 64）！！！在其他时候，它会导致负面的事件持续时间。

这是间歇性发生的，所以我基本上是在问这是否可能是：

1.  iOS 5.1 的一个错误
2.  与特定于新 iPad 的硬件有关（在 iPad 1st Gen、2nd Gen、多个 iPhone/iPod Touch 版本等上从未出现过这个问题......）
3.  错误代码（我承认这是可能的，但 NSDate 值不会变成 NSDate 值以外的值，我已经检查了项目中`singleton`设置此值的每个地方。

有没有人有过类似的经历？任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T19:21:42.593

这不是 iOS 设备或操作系统版本错误。

正如您所发现的，NSDate API 不能保证是一致的，甚至是单调的。它会漂移（取决于温度等），然后从蜂窝或 NTP 源得到纠正，之后日期和时间值可以跳跃。

对于单调的本地计时器，您可以尝试 mach_time.h 中的功能。为了获得更好的绝对时间参考，您的应用可以尝试轮询网络时间源。或者，您可以将自己的时间函数与两者的某种组合联系起来。

# python - 硒和新标签

> ID：10436852
> 
> 赞同：2
> 
> 时间：2012-05-03T17:57:40.570
> 
> 标签：python, selenium, webdriver

我如何在 selenium webdriver ( firefox ) 的新选项卡上打开链接？

```
<a href='/test' id='test'>Link</a>

driver.find_element_by_id('test').click() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T18:06:09.370

看起来您目前最好的选择是将锚标记注入页面。您需要使其适应 python，但它应该相对简单：[https ://stackoverflow.com/a/9122450/39843](https://stackoverflow.com/a/9122450/39843)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-04-19T09:35:17.157

```
package com.crm.qa.BaseTest;

import java.awt.AWTException;
import java.awt.Robot;
import java.awt.event.KeyEvent;
import java.util.ArrayList;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.chrome.ChromeDriver;

public class NewTabChrome {

    public static void main(String[] args) throws AWTException {

        System.setProperty("webdriver.chrome.driver", 
                "C:/Users/sunil/Downloads/chromedriver_win32 (2)/chromedriver.exe");

        WebDriver driver = new ChromeDriver();//open browser
        driver.manage().window().maximize();//browser maximize
        driver.get("http://www.google.com");//open google 

        //open new tab 
        for(int i = 0; i<=1;i++){
        Robot rob = new Robot();
        rob.keyPress(KeyEvent.VK_CONTROL);
        rob.keyPress(KeyEvent.VK_T);
        rob.keyRelease(KeyEvent.VK_CONTROL);
        rob.keyRelease(KeyEvent.VK_T);
        ArrayList<String> tabs1 = new ArrayList<String> (driver.getWindowHandles());
        //Switch to new tab
        driver.switchTo().window((String) tabs1.get(i));
    }
        //open facebook
        driver.get("http://facebook.com");
        driver.quit();
    }
} 
```

# java - 如何传播已检查异常的 try catch 块？

> ID：10436854
> 
> 赞同：-1
> 
> 时间：2012-05-03T17:57:52.577
> 
> 标签：java, exception

我对 Java Exceptions 有基本的怀疑

即，所有已检查的异常都从`Exception`类扩展，未经检查的异常从`RuntimeException`. 但运行时异常也从`Exception`.

但是为什么要传播`try`...`catch`带有已检查`Exceptions`但不在未检查异常中的块？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T19:19:24.350

我想你是在问，“我怎么能抓住`Exception`但不能`RuntimeException`？

您可能不应该尝试这样做。您应该尽可能捕获特定类型的异常。如果您需要处理所有错误，那么您应该捕获`Exception`并捕获所有错误。*

您很少愿意这样做，`catch (NullPointerException)`因为如果您知道可以拥有 a`null`那么您应该检查它。如果您的代码导致`NullPointerException`或者`ArrayOutOfBoundsException`您应该修复代码，以便它不再抛出这些。

此代码应向您展示如何执行您所要求的操作：

```
public static void throwSomething(Exception throwMe)
{
    try {
        throw throwMe;
    }
    catch(Exception ex) {

        // Check if the object is a RuntimeException
        if(ex instanceof RuntimeException) {
            // Throw the same object again.
            // Cast to RuntimeException so the compiler will not
            // require "throws Exception" on this method.
            throw (RuntimeException) ex;
        }

        System.out.println("Caught an instance of a " +
                ex.getClass().toString());
    }
} 
```

*实际上，`catch(Throwable)`将捕获包括`Error`s 在内的所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T18:49:50.850

通常，您应该`catch`为要处理的每种特定类型的异常添加不同的块。如果您正在尝试处理（通过重新抛出）已检查的异常，那么您应该知道要重新抛出哪种类型的异常——只需添加一个`catch`块来重新抛出每种异常类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T19:48:59.510

最简单的方法是这样的：

```
try { 
    //do stuff
} catch(RuntimeException e) {
    throw e;
} catch(SpecificCheckedException e) {
    //handle
} catch(Exception e) {
    //handle
} 
```

# ruby-on-rails - 如何使用一个表单创建三个记录？以及如何为他们显示验证错误？

> ID：10436858
> 
> 赞同：2
> 
> 时间：2012-05-03T17:58:02.363
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, forms

如果我有 3 个表单和一个提交按钮，我的问题基本上是怎么办。

我想创建一个向每个收件人发送电子邮件的表单，然后在 free_registration_coupons 表中创建新记录。

我需要验证此表单的电子邮件。

![在此处输入图像描述](../Images/d11e054a2db3aa6a53c057010bd00f19.png)

模型**FreeRegistrationCoupon** : recipient_email, token, sender_id

现在我有这个：

```
class FreeRegistrationCouponsController < ApplicationController
  def send_invitations
    emails = [params[:recipient_email_1], params[:recipient_email_2], params[:recipient_email_3]]
    emails.reject!{ |e| e.eql?("") }

    if emails.present?
      emails.each do |e|
        FreeRegistrationCoupon.create(:recipient_email => e, :sender_id => current_user.id)
        #MAILER
      end
      redirect_to root_path, :notice => "You just send #{emails.size} invitations!"
    else
      redirect_to(:back)
    end
  end
end

class FreeRegistrationCoupon < ActiveRecord::Base
  before_save :generate_token

  attr_accessor :recipient_email, :sender_id
  validates :recipient_email, :presence => true, :email => true

  def generate_token
    self.token = SecureRandom.hex
  end
end 
```

这是其他控制器**CarsController#confirm**中的表单：

```
<%= form_tag :controller => 'free_registration_coupons', :action => "send_invitations" do %>
  <!-- errors -->
  <%= label_tag :recipient_email_1 %>
  <%= text_field_tag :recipient_email_1 %>
  <%= label_tag :recipient_email_2 %>
  <%= text_field_tag :recipient_email_2 %>
  <%= label_tag :recipient_email_3 %>
  <%= text_field_tag :recipient_email_3 %>
  <%= submit_tag %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T15:28:09.747

我认为您应该使用以下方法定义您的表单：

```
<%= form_tag :controller => 'free_registration_coupons', :action => "send_invitations" do %>
  <%= @error_message %>
  <%= label_tag "recipient_email[1]" %>
  <%= text_field_tag "recipient_email[1]" %>
  <%= label_tag "recipient_email[2]" %>
  <%= text_field_tag "recipient_email[2]" %>
  <%= label_tag "recipient_email[3]" %>
  <%= text_field_tag "recipient_email[3]" %>
  <%= submit_tag %>
<% end %> 
```

这样可以更轻松地处理控制器上的所有电子邮件地址，并且您可以跟踪这些错误以在之后显示它们：

```
class FreeRegistrationCouponsController < ApplicationController
  def send_invitations
    emails = params[:recipient_email]
    emails.reject!{ |param, value| value.eql?("") }
    errors = []
    if emails.any?
      emails.each do |param, value|
        validation_result = FreeRegistrationCoupon.save(:recipient_email => value, :sender_id => current_user.id)
        #MAILER
      end
      redirect_to root_path, :notice => "You just send #{emails.size} invitations!"
    else
      @error_message = "You have to include, at least, one e-mail address!"
      render :name_of_the_action_that_called_send_invitations      
    end
  end
end 
```

我没有测试这段代码。希望能帮助到你！

# java - 保留 Double 值的格式 - Java

> ID：10436859
> 
> 赞同：2
> 
> 时间：2012-05-03T17:58:08.770
> 
> 标签：java, formatting, double

我正在使用 Poi 在 Java 中创建 Excel 工作簿。我的原始数据以字符串形式出现。我需要格式化数据以在写入数字的单元格中输入两位小数。我使用*Double.parseDouble()*将字符串转换为数字，然后使用*DecimalFormat*将数字格式化为字符串。再次调用*Double.parseDouble()*将值返回为数字（它所在的单元格是格式化的数字，所以我不能使用字符串值），我应该很好。问题是，对**Double.parseDouble()**的第二次调用会截断小数点右侧的任何尾随零。任何人都知道我如何强制这个值读取为 1.50 而不是 1.5？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T18:38:58.293

*`I always want two decimals.`*

解决方案：*始终应用特定的十进制格式模式。*

**示例代码片段**：

```
//java.text.DecimalFormat df = new java.text.DecimalFormat( "###0.00" );  
java.text.DecimalFormat df = new java.text.DecimalFormat();  
df.applyPattern( "###0.00" ); // always two decimals  

double dbl = 1.50d ;  

// prints: dbl =  1.5
System.out.println( "dbl = " + dbl );  

// prints: df.format( 1.5 ) = 1.50
System.out.println ( "df.format( " + dbl + " ) = " + df.format( dbl ) ); 
```

**更新**：
好的，从您的帖子中，我了解到您试图填充数字格式的单元格只是为了打印或显示两位小数。您知道默认情况下所有数字字段都被解释为省略尾随零。为了达到您的要求，您可能需要在上下文对象上使用[`CellFormat`](http://poi.apache.org/apidocs/org/apache/poi/ss/format/CellFormat.html)和/或，但是当说 时，它又是一个。 [`DataFormatter`](http://poi.apache.org/apidocs/org/apache/poi/ss/usermodel/DataFormatter.html)[`Cell`](http://poi.apache.org/apidocs/org/apache/poi/ss/usermodel/Cell.html)`Format``String`

我没有尝试以下代码，但可能会对您有所帮助。

```
DataFormatter dataFormatter = new DataFormatter();
dataFormatter.setDefaultNumberFormat( instanceOfDesiredDecimalFormat );  
// or  
// dataFormatter.setExcelStyleRoundingMode( instanceOfDesiredDecimalFormat );  

// apply this format on the cell you want
dataFormatter.formatCellValue( instanceOfNumericCellInContext ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T18:06:46.817

在您描述的大部分代码中，您实际上什么也没做。您不妨只返回 Double.parseDouble(inputString)。双打以二进制格式存储，前导/尾随零没有意义。也许[BigDecimal](http://docs.oracle.com/javase/1.5.0/docs/api/java/math/BigDecimal.html)类适合您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T18:47:59.263

看来我们陷入了僵局。正如马里奥指出的那样，双精度是作为二进制管理的，没有办法将二进制格式化*为双*精度，除了将其转换为具有 DecimalFormat 的字符串，它不再是双精度。我向我的老板解释了这一点，他同意采用原始双倍的解决方案，所以我要关闭这个问题。感谢大家的帮助和支持。

问候，迈克

# regex - 正则表达式：获取 html 属性

> ID：10436863
> 
> 赞同：0
> 
> 时间：2012-05-03T17:58:26.400
> 
> 标签：regex

我尝试获取所有 html 属性，但只获取一个封装其他属性，
我的模式是：

```
(\S+)=((".*")|('.*')|(\S*(?=(\s+)))) 
```

内容是：

> ```
> <a href="html.aspx" target="_blank" /> 
> ```

只有一个匹配返回：

*   href="html.aspx" 目标="_blank"

但我希望它是：

*   href="html.aspx"
*   目标="_空白"

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T18:03:17.897

这是因为您正在使用贪婪匹配（默认）`.*"`，它将一直持续到找到*最后一个* `"`. 试试这个正则表达式：

```
(\S+)=((".*?")|('.*?')|(\S*(?=(\s+)))) 
```

告诉正`.*?"`则表达式搜索到第*一个* `"`，而不是最后一个。

# android - Android 包裹，存储在内存中还是磁盘上？如何存储在磁盘上

> ID：10436864
> 
> 赞同：3
> 
> 时间：2012-05-03T17:58:33.933
> 
> 标签：android, serializable, parcelable, parcel

我看到 parcel 和 serializable 可以互换使用，或者至少在同一上下文中不直观。你能为我澄清一些事情吗？

1.  是包裹的持久存储（在磁盘上）或仅存储在内存中

2.  我需要可序列化来将包裹数据存储到磁盘吗

谢谢你的洞察力，不，android开发手册对我来说并不明显

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T18:07:32.237

我的回答：

1.  Parcels 用于扁平化对象，因此它们可以存储在 JVM 运行内存之外的其他位置。

2.  您不需要将可序列化与包裹混合以将数据存储到磁盘。一个或另一个就足以将对象存储到磁盘。

* * *

Serializable 和 Parcelable 都是扁平化 Java 对象的方法。

这些扁平化的对象可以通过各种传输格式在进程之间传递——包括磁盘文件。

Serializable 来自核心 Java，易于使用。

Parcelable 来自 Android，稍微复杂一些。

这个答案包括更多细节：

[https://stackoverflow.com/a/5551155/523135](https://stackoverflow.com/a/5551155/523135)

这篇博文有示例代码 Parcelable：

[http://blog.cluepusher.dk/2009/10/28/writing-parcelable-classes-for-android/](http://blog.cluepusher.dk/2009/10/28/writing-parcelable-classes-for-android/)

这篇博文有示例可序列化代码：

[http://www.javapractices.com/topic/TopicAction.do?Id=45](http://www.javapractices.com/topic/TopicAction.do?Id=45)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-10T07:27:58.137

阅读包裹文档。包裹不应放置在持久存储中。

摘抄：

“...Parcel 不是通用的序列化机制。此类（以及用于将任意对象放入 Parcel 的相应 Parcelable API）被设计为高性能 IPC 传输...”

“......将任何 Parcel 数据放入持久存储中是不合适的：Parcel 中任何数据的底层实现的更改都可能导致旧数据不可读。”

[http://developer.android.com/reference/android/os/Parcel.html](http://developer.android.com/reference/android/os/Parcel.html)

# java - 将现有 java 项目转换为 osgi 包的最佳方法

> ID：10436865
> 
> 赞同：9
> 
> 时间：2012-05-03T17:58:49.740
> 
> 标签：java, eclipse, maven, osgi

我们有很多组件，我们只想从其中模块化几个开始。想知道从所有这些组件中创建捆绑包的最佳方式是什么（在我的构建环境中）？

我的环境：Java 6、Maven 2.2.1、Hudson

技术：Spring 3.0.5、WebSphere 7、Hibernate 3.2.x 和大多数 apache commons。

要求

1.  仅对少数组件进行模块化。其余组件可以导出所有包。
2.  当导入 Eclipse 时，我应该能够在构建路径中看到导入包的包作为依赖项（mvn eclipse:eclipse 似乎没有这样做）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-03T19:25:12.183

从仅更改 MANIFEST.MF 条目开始，以便您的所有工件都成为捆绑包 - 它们显然不会神奇地工作，但这是一个很好的非破坏性第一步。

使用 maven-bundle-plugin 时，请确保您进行了设置`extensions`，如果打包类型为（见末尾）`supportedProjectTypes`，则可能会遇到 CI 构建、Maven 存储库和 m2e 失败的问题。`bundle`

尽早测试您最危险/核心的外部依赖项——例如，如果您使用 JPA 进行持久性，则确保提供程序在带有域包和 JDBC 驱动程序的 OSGi 环境中工作。

如果您从 Java EE/spring 迁移，请查看 Karaf 或 Virgo。但是，如果您的组件用于嵌入式系统或没有外部依赖项，Felix 或 Equinox 可能就足够了（如果是这种情况，请查看[pax-url](http://team.ops4j.org/wiki/display/paxurl/Pax+URL)项目）。

可能值得编辑您的问题以更具体地了解领域/技术？

* * *

eclipse:eclipse 仅在项目首次配置时生成，m2e 的生命周期问题可能会有点痛苦，但它比使用旧的 eclipse 插件要好得多。

* * *

下面将向您现有的工件添加清单条目，而不以任何其他方式更改它们。它告诉标准 maven jar 和 war 插件使用由 maven-bundle-plugin 生成的 MANIFEST.MF。

把它放在父 POM 中：

```
<pluginManagement>
<plugin>
    <groupId>org.apache.felix</groupId>
    <artifactId>maven-bundle-plugin</artifactId>
    <version>2.3.7</version>
    <extensions>true</extensions>
    <configuration>
        <archive>
            <addMavenDescriptor>true</addMavenDescriptor>
        </archive>
        <supportedProjectTypes>
            <supportedProjectType>jar</supportedProjectType>
            <supportedProjectType>war</supportedProjectType>
        </supportedProjectTypes>
        <instructions>
            <Built-By>${project.organization.name}</Built-By>
            <Bundle-Vendor>${project.organization.name}</Bundle-Vendor>
            <Bundle-ContactAddress>${project.organization.url}</Bundle-ContactAddress>
            <Bundle-Description>${project.description}</Bundle-Description>
            <Bundle-DocURL>${bundle.doc.url}</Bundle-DocURL>
            <Bundle-Category>${bundle.category}</Bundle-Category>
            <Bundle-SymbolicName>${project.artifactId}</Bundle-SymbolicName>
            <Bundle-Version>${project.version}</Bundle-Version>

            <Import-Package>*</Import-Package>
            <Export-Package>*</Export-Package>
        </instructions>
    </configuration>
    <executions>
        <execution>
            <id>bundle</id>
            <goals>
                <goal>manifest</goal>
            </goals>
            <phase>prepare-package</phase>
            <inherited>true</inherited>
        </execution>
    </executions>
</plugin>

<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-jar-plugin</artifactId>
    <version>2.3.1</version>
    <configuration>
        <archive>
            <manifestFile>${project.build.outputDirectory}/META-INF/MANIFEST.MF</manifestFile>
        </archive>
    </configuration>
</plugin>

<plugin>
    <artifactId>maven-war-plugin</artifactId>
    <version>2.1.1</version>
    <executions>
        <execution>
            <id>create-war</id>
            <phase>package</phase>
            <goals>
                <goal>war</goal>
            </goals>
            <inherited>true</inherited>
        </execution>
    </executions>
    <configuration>
        <archive>
            <manifestFile>${project.build.outputDirectory}/META-INF/MANIFEST.MF</manifestFile>
        </archive>
    </configuration>
</plugin>
</pluginManagement> 
```

然后在子 POM 中，您可以简单地执行以下操作：

```
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.felix</groupId>
            <artifactId>maven-bundle-plugin</artifactId>
        </plugin>
        <!-- Below is mutually exclusive: Either jar or war plugin -->
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-jar-plugin</artifactId>
        </plugin>
    </plugins>
</build> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T12:14:32.823

看看 bndtools，它对创建打包包的项目有很好的支持。它提供了很多关于 JAR 的结构以及它们如何依赖于其他事物的见解。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-03T18:29:14.040

使用[Maven 捆绑插件](http://felix.apache.org/site/apache-felix-maven-bundle-plugin-bnd.html)。它将根据扫描您的代码和 pom.xml 中定义的依赖项向您的清单添加所需的导入和导出语句。这将需要最少的努力来转换。

我还建议您使用[M2Eclipse](http://www.sonatype.org/m2eclipse)而不是 mvn eclipse:eclipse。它将使您的 Maven 配置和工作区保持同步。

# python - PQt4 QDatetime：为什么在使用具有两个不同秒值的 addSecs() 时会得到相同的答案？

> ID：10436868
> 
> 赞同：0
> 
> 时间：2012-05-03T17:59:02.067
> 
> 标签：python, pyqt4, qdatetime

我正在使用 Python 2.6.6 和 PyQt4。我有一个开始 QDateTime 对象，我迭代地添加 60 秒来创建给定时间跨度内每分钟的列表。我发现在某些情况下，将两个不同的*秒*值添加到 QDateTime 对象会产生相同的时间。

这是问题的一个例子：

```
from PyQt4 import QtCore

start = QtCore.QDateTime.fromString("2010-11-01 00:00", "yyyy-MM-dd hh:mm")

print start.addSecs(522540).toString("yyyy-MM-dd hh:mm")
print start.addSecs(526140).toString("yyyy-MM-dd hh:mm") 
```

结果输出：

```
2010-11-07 01:09
2010-11-07 01:09 
```

我一直在敲击键盘试图弄清楚这一点。我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T18:54:27.593

这可能取决于您的语言环境设置：

似乎[美国和其他国家的夏令时](http://www.timeanddate.com/time/dst/2010.html)结束于`2010-11-07`......

所以我敢打赌这是一个结果。

如果您在使用日期进行计算时得到任何奇怪的值，请始终检查是否没有 DST 更改或闰年，并考虑不同的语言环境。可悲的是，时间并不总是像看起来那样线性。

# jquery - 使用 JQuery 通过按钮选择 DIV

> ID：10436869
> 
> 赞同：-1
> 
> 时间：2012-05-03T17:59:10.490
> 
> 标签：jquery, jquery-selectors

我有两个 DIV 标签，即响应 1 和响应 2。我想用按钮选择这些 div。当我单击respond1Button 时，它应该显示respond-1 div，同样在单击repond2Button 时，将显示respond-2 div。

默认页面应该显示respond-1 div。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T18:08:17.613

对于像下面这样的 HTML，

```
<div id="container">
    <div id="respond-1" class="responses">Respond 1</div>
    <div id="respond-2" class="responses" style="display: none" >Respond 2</div>
</div>
<button id="respond1Button">Respond 1</button>
<button id="respond2Button">Respond 2</button> 
```

下面是根据相应按钮单击显示/隐藏的脚本，

```
$(function() {
    var $respond1 = $('#respond-1');
    var $respond2 = $('#respond-2');
    var $responses = $('.responses');

    $('#respond1Button').click(function() {
        $responses.hide();
        $respond1.show();
    });

    $('#respond2Button').click(function() {
        $responses.hide();
        $respond2.show();
    });
}); 
```

[**演示**](http://jsfiddle.net/42qFr/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T18:09:42.863

请注意，您不能有多个具有相同 ID 属性的元素，并且 DIV 标记没有名为 NAME 的属性。

在这种情况下，我认为最好的选择是为 BUTTON 和 DIV 定义一个类“respond-1”。然后，根据单击的按钮的类别，我们显示相应的 DIV。（对不起任何英语错误，它不是我的母语）:)

```
$(document).ready(function(){

    $('button.respond-1, button.respond-2').click(function(){

        $('div.respond-1, div.respond-2').hide();
        $('div.' + $(this).attr('class')).show();

    });

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T18:02:59.777

你在寻找这样的东西吗？

```
<div id="respond-1">First Response<div>
<div id="respond-2" style="display:none;">Second Response<div>

<button type="button" onclick="$('#respond-1').show();$('#respond-2').hide():">repond1Button</button>

<button type="button" onclick="$('#respond-2').show();$('#respond-1').hide():">repond2Button</button> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T18:03:29.807

您可以使用该`.click`事件来绑定单击处理程序。使用 选择具有 ID 的元素`$('#id')`，因此将这两者结合起来，您可以轻松创建一个使 div 可见的按钮。

```
<div id="respond-1"></div>
<button id="respond1Button">Show Respond 1</button>

// on DOM ready...
$(function() {
    // Select the divs
    var resp1 = $('#respond-1');

    // Hide them to start
    resp1.hide();

    // Bind click handlers
    $('#respond1Button').click(function() {
        resp1.show();
    });
}); 
```

# php - 更改缩略图动态显示计数器

> ID：10436872
> 
> 赞同：0
> 
> 时间：2012-05-03T17:59:16.220
> 
> 标签：php, mysql

在示例 #1 中，我可以通过更改列名来混合从 mysql 数据库调用的值。你会注意到我对 src= 使用 ListingRid，而 alt= 使用 MLNumber。

```
<div id="loadarea" style="width: 400px; height: 300px;"><img width="400" height="300" src="http://www.mydomain/feeds/fmfl/rets_images/<?php echo(rawurlencode($row['ListingRid'])); ?>_1.jpg" alt="<?php echo(rawurlencode($row['MLNumber'])); ?>" align="left"  border="0"></div> 
```

在页面的更下方，我有第二个示例，我有一个 PHP 代码块，我需要用 $ListingRid 更改 $MLNumber 的使用，但是当我做同样的事情并更改列名时，它不带有通过价值，我最终只得到 .jpg 而不是 $ListingRid。我做错了什么，你能给我看一个样本，以便我了解问题所在吗？

```
<?php

   $image = "<br>";
   $img_cnt = 1;
   $image .= "<a href=/images/$MLNumber.jpg rel=\"enlargeimage\" rev=\"targetdiv:loadarea,trigger:click\"><img src=/images/$MLNumber.jpg alt='' width='100' height='75' border='0' /></a>&nbsp;";

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T18:05:55.673

你在哪里声明`$MLNumber`？在第一个代码示例中，您引用了结果集`$row['MLNumber']`

您是否在`$MLNumber = $row['MLNumber'];`某处有一行，只是没有将其粘贴到此代码示例中，还是您的代码中缺少它？

# image - 机器学习图像时减少特征数量的方法

> ID：10436874
> 
> 赞同：1
> 
> 时间：2012-05-03T17:59:19.857
> 
> 标签：image, matlab, image-processing, machine-learning

我正在对 25 x 125 图像集执行机器学习。获得 rgb 组件后，每个示例变成 9375 个功能（我有大约 675 个）。我正在尝试`fminunc`并且`fminsearch`我认为我的方法有问题，因为它是“冻结”的，但是当我将特征数量减少 10 倍时，它需要一段时间但有效。如何在保持图片中相关信息的同时最大限度地减少特征数量？我尝试了 k-means，但我看不出它有什么帮助，因为我仍然有相同数量的功能，只是有很多冗余。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T18:05:37.560

您正在寻找特征缩减或选择方法。例如看这个库： [http](http://homepage.tudelft.nl/19j49/Matlab_Toolbox_for_Dimensionality_Reduction.html) ://homepage.tudelft.nl/19j49/Matlab_Toolbox_for_Dimensionality_Reduction.html 或者看这个问题 [Feature Selection in MATLAB](https://stackoverflow.com/questions/4419070/feature-selection-in-matlab) 如果你谷歌`feature selection/reduction matlab`会发现很多相关的文章/工具。或者你可以google一些常用的方法，比如PCA（主成分分析）。

# c++ - 使用 C++ 的回显命令

> ID：10436875
> 
> 赞同：2
> 
> 时间：2012-05-03T17:59:22.097
> 
> 标签：c++, echo

我想在 c++ 文件中发出 echo 命令。

我需要做的就是

回声“xml::/var/some.xml”>>/var/config

在 C++ 文件中，我尝试过，

系统（“回声”+“xml::/var/some.xml”+“>>/var/config”）；

但是它将 const char[6] 和 const char[46] 类型的无效操作数抛出给二元运算符 +。

需要帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T18:03:10.993

我想这是一个你可以摆脱“可以有codez？”的地方：

```
#include <iostream> 
#include <iterator>
#include <algorithm>

int main(int argc, char **argv) { 

   std::copy(argv+1, argv+argc, std::ostream_iterator<char *>(std::cout, ""));
   return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T18:01:44.130

`fopen`您可以使用 stdio 方法/ `fputs`/etc自己输出数据。

[http://linux.die.net/man/3/fputs](http://linux.die.net/man/3/fputs)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-03T18:04:54.037

尝试

```
#include <string>
system(std::string("echo" + "xml::/var/some.xml" +">> /var/config").cstr()) 
```

您正在传递不支持 + 运算符的原始字符串——因此请尝试使用 std::string 。

# ruby-on-rails - 使用 rails-api 的基本身份验证

> ID：10436878
> 
> 赞同：23
> 
> 时间：2012-05-03T17:59:46.413
> 
> 标签：ruby-on-rails, ruby-on-rails-3, basic-authentication

我确定我在这里做错了，但这就是我的应用程序控制器的样子：

```
class ApplicationController < ActionController::API                                                                                                                                                                                                        
  include ActionController::HttpAuthentication::Basic                                                                                                                                                                                                      
  include ActionController::MimeResponds                                                                                                                                                                                                                   

  http_basic_authenticate_with :name => "joeyjojo", :password => "shabadoo"
end 
```

我不知道为什么我的 http_basic_authenticate_with 会抛出这个错误：

```
undefined method `http_basic_authenticate_with' for ApplicationController:Class 
```

我确定这很简单，但我看不到。MimeResponds 在其他控制器中运行良好。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-03T18:19:58.370

您必须改为包含`ActionController::HttpAuthentication::Basic::ControllerMethods`，才能使用可用的方法。[这是模块`ActionController::Base`](https://github.com/rails/rails/blob/5e300f1121dd24204cf0586521f34632485fce15/actionpack/lib/action_controller/base.rb#L232)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-05-09T15:45:32.983

如果您有 Rails API，请将其添加到您的控制器：

> 包括 ActionController::HttpAuthentication::Basic::ControllerMethods

```
class YourController < ApplicationController

  include ActionController::HttpAuthentication::Basic::ControllerMethods
  http_basic_authenticate_with name: "username", password: "passwd123" 
```

我正在使用 Rails 4.2.4 和我的 ApplicationController：

```
class ApplicationController < ActionController::API 
```

# java - 使用 com.sun.image.codec.jpeg.JPEGImageEncoder 与 javax.imageio.ImageIO 流式传输 jpeg

> ID：10436880
> 
> 赞同：0
> 
> 时间：2012-05-03T17:59:53.553
> 
> 标签：java, image, servlets, streaming, jpeg

我有一个 jpeg 的 BufferedImage 对象，需要作为 servlet 响应进行流式传输。

现有代码使用 JPEGImageEncoder 流式传输 jpeg，如下所示：

```
JPEGImageEncoder encoder = JPEGCodec.createJPEGEncoder(resp.getOutputStream());
            resp.reset();
            resp.setContentType("image/jpg");
            resp.setHeader("Content-disposition", "inline;filename=xyz.jpg");
            JPEGEncodeParam param = encoder.getDefaultJPEGEncodeParam(image);
            param.setQuality(jpegQuality, false);
            encoder.setJPEGEncodeParam(param);
            encoder.encode(image); 
```

我注意到这导致流式 jpeg 的文件大小增加了三倍，无法弄清楚为什么。所以我尝试使用 ImageIO 来流式传输 jpeg

```
ImageIO.write(image, "jpg", out); 
```

这工作得很好，我无法确定为什么我的前任选择了 JPEGImageEncoder，并且想知道如果我改用 ImageIO 会出现什么问题，我已经比较了两个 jpeg 并且无法真正发现差异。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T03:56:45.013

需要明确的是，您已经在磁盘或数据库中的某处有一个具体的 JPEG 图像，您只需要将其原封不动地发送给客户端？那么确实绝对没有理由使用`JPEGImageEncoder`(and `ImageIO`)。

只需将其未经修改地流式传输到响应正文即可。

例如

```
File file = new File("/path/to/image.jpg");
response.setContentType("image/jpeg");
response.setHeader("Content-Length", String.valueOf(file.length()));

InputStream input = new FileInputStream(file);
OutputStream output = response.getOutputStream();
byte[] buffer = new byte[8192];

try {
    for (int length = 0; (length = input.read(buffer)) > 0;) {
        output.write(buffer, 0, length);
    }
}
finally {
    try { input.close(); } catch (IOException ignore) {}
    try { output.close(); } catch (IOException ignore) {}
} 
```

您会看到不必要地使用`JPEGImageEncoder`(and `ImageIO`) 流式传输图像文件的错误，这些错误通常返回到对位和字节的性质一无所知的初学者的代码中。这些工具仅在您想要在 JPEG 和不同的图像格式之间进行转换，或者想要对其进行操作（裁剪、倾斜、旋转、调整大小等）时才有用。

# c# - 属性不可序列化错误

> ID：10436881
> 
> 赞同：0
> 
> 时间：2012-05-03T17:59:56.040
> 
> 标签：c#, winforms

我有一个用户控件。

```
public partial class UserControl1 : UserControl
{
    public UserControl1()
    {
        InitializeComponent();
    }

    public List<Person> People
    {
        get
        {
            return new List<Person>();
        }
        set
        {
            throw new NotImplementedException();
        }
    }
} 
```

如果我将此控件拖到窗体上，则会出现序列化错误。错误会根据我是第一次拖动控件、删除控件还是其他方式而变化。不变的是，如果我让 Person 可序列化，那么错误就会消失。为什么将元素拖放到表单上时会出现错误？什么是典型的修复？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T18:04:37.537

Visual Studio 实际上会进行一些[设计器序列化](http://msdn.microsoft.com/en-us/library/ms171834.aspx)以显示 UserControl。由于 Person 对象不可序列化，因此您会收到错误消息。您可以使其可序列化或标记属性，以便设计时序列化将忽略它（见下文）。

您可以将属性标记为`[DesignerSerializationVisibility(DesignerSerializationVisibility.Hidden)]`在尝试在设计器中设置控件时不会调用该属性。

> Hidden 指定序列化程序不应序列化属性的值。此静态字段是只读的。

# asp.net-mvc - EF 数据库优先生成的表单不会验证

> ID：10436887
> 
> 赞同：2
> 
> 时间：2012-05-03T18:00:23.647
> 
> 标签：asp.net-mvc, entity-framework

我刚刚使用数据库优先的 EF 模型/实体创建了一个新控制器及其 CRUD 表单等。

它在保存时抛出了许多验证错误，但由于表单有验证器，我不明白为什么会这样。

由于我无法理解的原因，我根本没有得到任何验证。它直接进入 saveChanges() 调用，该调用立即失败。

这是编辑表格：

```
 @model StatementsApplication.DAL.StatementTask

@{
    ViewBag.Title = "Edit";
}

<h2>Edit</h2>

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")"></script>

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)

    <fieldset>
        <legend>StatementTask</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.sInitials)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.sInitials)
            @Html.ValidationMessageFor(model => model.sInitials)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.dtCompleted)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.dtCompleted)
            @Html.ValidationMessageFor(model => model.dtCompleted)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.sGroupLabel)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.sGroupLabel)
            @Html.ValidationMessageFor(model => model.sGroupLabel)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.nGroupSequence)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.nGroupSequence)
            @Html.ValidationMessageFor(model => model.nGroupSequence)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.sTaskType)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.sTaskType)
            @Html.ValidationMessageFor(model => model.sTaskType)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.sTaskLabel)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.sTaskLabel)
            @Html.ValidationMessageFor(model => model.sTaskLabel)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.nTaskSequence)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.nTaskSequence)
            @Html.ValidationMessageFor(model => model.nTaskSequence)
        </div>

        @Html.HiddenFor(model => model.ID)

        <p>
            <input type="submit" value="Save" />
        </p>
    </fieldset>
}

<div>
    @Html.ActionLink("Back to List", "Index")
</div> 
```

这是生成的模型：

```
namespace StatementsApplication.DAL
{
    using System;
    using System.Collections.Generic;

    public partial class StatementTask
    {
        public int StmtBatchID { get; set; }
        public string sInitials { get; set; }
        public Nullable<System.DateTime> dtCompleted { get; set; }
        public string sGroupLabel { get; set; }
        public double nGroupSequence { get; set; }
        public string sTaskType { get; set; }
        public string sTaskLabel { get; set; }
        public double nTaskSequence { get; set; }
        public int ID { get; set; }

        public virtual StatementBatch tblStmtBatch { get; set; }
    }
} 
```

这是控制器位...

```
//
// GET: /StatementTask/Edit/5

public ActionResult Edit(int id = 0)
{
    StatementTask statementtask = db.StatementTasks.Find(id);
    if (statementtask == null)
    {
        return HttpNotFound();
    }
    ViewBag.StmtBatchID = new SelectList(db.StatementBatches, "ID", "sStatus", statementtask.StmtBatchID);
    return View(statementtask);
}

//
// POST: /StatementTask/Edit/5

[HttpPost]
public ActionResult Edit(StatementTask statementtask)
{
    if (ModelState.IsValid)
    {
        try
        {
            db.Entry(statementtask).State = EntityState.Modified;
            db.SaveChanges();
        }
        catch (Exception ex) {
            throw ex;
        }
        return RedirectToAction("Index");
    }
    ViewBag.StmtBatchID = new SelectList(db.StatementBatches, "ID", "sStatus", statementtask.StmtBatchID);
    return View(statementtask);
} 
```

对于我来说，为什么 sInitials 会抛出“必需的”验证错误，以及为什么 sGroupLabel 会抛出长度验证错误，这让我有些困惑。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T18:05:28.227

a) 您的模型没有数据验证注释。因此，MVC 不进行任何验证，因为您没有告诉它要验证什么。

b）您没有提及您提交的内容。您只是提交一个空表格吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T20:14:46.073

看来数据注释将解决此问题

```
 [Required(AllowEmptyStrings = true)]
   [DisplayFormat(ConvertEmptyStringToNull = false)]
   public object Note { get; set; } 
```

通过[http://fendy-huang.blogspot.com/2011/04/how-to-pass-empty-string-in-entity.html](http://fendy-huang.blogspot.com/2011/04/how-to-pass-empty-string-in-entity.html)

# javascript - APC_UPLOAD_PROGRESS XMLHTTPREQUEST

> ID：10436889
> 
> 赞同：0
> 
> 时间：2012-05-03T18:00:26.760
> 
> 标签：javascript, xmlhttprequest

我正在尝试创建一个进度条，`xmlhttprequest`并且我认为这是不使用表单的好方法，因为我需要`xmlhttp.responseText`.

为什么这不起作用？

```
formdata = new FormData();
formdata.append("picture",  document.getElementById('picture').files[0]);
formdata.append("APC_UPLOAD_PROGRESS",  "2");
xmlhttp.open( "POST", 'upload.php', true );
xmlhttp.send(formdata); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T07:59:41.317

你忘记了引号：

代替

```
xmlhttp.open( "POST", upload.php, true ); 
```

和

```
xmlhttp.open("POST", 'upload.php', true); 
```

# android - 向用户提供条款和条件对话框的推荐方式？

> ID：10436890
> 
> 赞同：0
> 
> 时间：2012-05-03T18:00:27.013
> 
> 标签：android, android-alertdialog

我想知道显示 T&C 对话框的推荐方式是什么？一个简单的警报对话框？此外，如何防止此对话框在每次启动时显示？我需要使用 SharedPreferences 来存储布尔值（接受\不接受）还是有更简单的方法？我试图了解社区推荐的方法来解决android中一些更常见的情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T01:38:25.153

我正在我的应用程序中执行此操作，但更复杂。我有一个 Java 网络服务来获取数据库中语言环境的最新条款。在 android 应用程序中，我正在为带有 terms_id、terms_description 和语言环境的术语创建一个 sqlite 表。terms_id 以 desc 的顺序定义我的最后一个术语。我使用 Locale.getDefault().toString() 在 android 上获取默认语言环境。如果查询不返回术语，那么我调用的 web 服务没有传递 terms_id 和 android 语言环境。如果查询返回一个术语，我将得到最后一个并调用 Web 服务，传递查询返回的 terms_id、术语的语言环境和 android 语言环境（如果它在数据库中不同）。Web 服务验证来自 android 的 terms_id 是否是数据库中的最后一个。如果没有，那么它会得到最后一个 android 语言环境，或者，如果没有关于 android 语言环境的条款，然后它获取默认语言环境（en_US）的最后一个。如果 android 上的 terms_id 与数据库相同，则 Web 服务验证返回此版本的数据库中是否存在 android 的语言环境，否则返回语言环境默认的版本。如果在 android mobile 上的正确版本或默认版本中已经存在术语，则 Web 服务会返回一个代码，指示该版本是可以的。之后，如果需要，我将条款保存在条款表中。

我现在正在寻找显示条款的最佳方式。我想我会创建一个半透明的 Activity 来创建一个带有面板的窗口来显示条款和两个按钮“接受”和“拒绝”。如果用户接受条款，我将调用另一个 Web 服务在服务器上标记用户已接受此版本的条款。将来，我可以更新网络数据库中的条款创建一个新版本，当用户登录移动应用程序时，我将调用网络服务登录并验证用户是否接受了最新版本的条款，如果没有，则返回新版本，然后，我将显示一条消息供用户阅读并接受新版本的条款。

此致。

# ruby-on-rails - 在表单中添加 4 个饮品到一个站点

> ID：10436894
> 
> 赞同：2
> 
> 时间：2012-05-03T18:00:51.640
> 
> 标签：ruby-on-rails, ruby, forms, models, formtastic

我有两个模型：Station & Drinks

车站 has_many :drinks and Drinks belongs_to :stations

我正在尝试制作我的表格，以便当您创建一个站点时，您可以选择 4 种也属于该站点的饮料。

原始形式：

```
<%= semantic_form_for [:admin, @station] do |f| %>
<fieldset class="inputs">
    <ol>
        <%=f.input :name %>
        <%=f.input :number, :as => :number %>
    </ol>
</fieldset>
<%= f.buttons :commit %> 
```

我一直在尝试弄清楚如何在此表单中创建 4 个（选择）输入字段，以便您可以为当前站选择饮料 #1、#2、#3、#4。有任何想法吗？

我目前正在尝试`accepts_nested_attributes_for :drinks, :allow_destroy => true.`

**饮料**belongs_to :station

```
id | name | station_id | 
```

**车站**has_many :drinks

```
id | name | 
```

.

**更新** 如下 tihm 所述，您可以添加 4 种饮料并使用以下命令编辑它们的值：

```
<% f.fields_for :drinks do |drink_form| %>
            <%# Put your inputs here...could be a select box %>
            <%= drink_form.select :name, [['Drink #1', 'drink_1'],['Drink #2', drink_2] %>  

            <%# Or a plain input %>
            <%= drink_form.input :description %>  

            <%# ... Any other drink attributes ... %>
        <% end %> 
```

但是，我要做的是生成四个选择框，每个列表`Drink.all`都可以将一个饮料对象换成另一个饮料对象。因此，当您将第一个选择框的值从可乐更改为百事可乐时，它会从可乐中删除 station_id，并将 station_id 添加到百事可乐。

我不需要能够编辑饮料属性。我只需要更改与该站点关联的饮料。这可能以相同的形式出现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T18:09:43.053

你会想从观看开始：

*   [http://railscasts.com/episodes/196-nested-model-form-part-1](http://railscasts.com/episodes/196-nested-model-form-part-1)
*   [http://railscasts.com/episodes/197-nested-model-form-part-2](http://railscasts.com/episodes/197-nested-model-form-part-2)

如果你知道你总是有 4 个或更少，那么它会更容易一些，你可以跳过 Railscasts 中的 js。

在您的控制器中，确保构建您需要的空饮料对象：

```
....
@station = Station.new
4.times do
  @station.drinks.build
end
... 
```

这样，视图中的#fields_for 就有了要迭代的对象。在你看来，类似的东西：

```
<%= semantic_form_for [:admin, @station] do |f| %>
<fieldset class="inputs">
    <ol>
        <%=f.input :name %>
        <%=f.input :number, :as => :number %>
        <% f.fields_for :drinks do |drink_form| %>
            <%# Put your inputs here...could be a select box %>
            <%= drink_form.select :name, [['Drink #1', 'drink_1'],['Drink #2', drink_2] %>  

            <%# Or a plain input %>
            <%= drink_form.input :description %>  

            <%# ... Any other drink attributes ... %>
        <% end %>
    </ol>
</fieldset>
<%= f.buttons :commit %> 
```

#select 在很大程度上取决于您选择的内容以及该数据的结构。它来自模型、简单列表等吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T17:47:35.260

不幸的是，我找不到“最佳实践”的 rails 方式......所以我最终做了一堆 AJAX / 自定义 ruby​​ 代码来实现它。在这里（也许它会帮助别人）：

```
<% @drinks = Drink.all %>
    <fieldset class="inputs">
        <ol>
        <% @station.drinks.each_with_index do |d,i| %>
            <li>
                <label class="label" for="station_name">Item</label>
                <%=select("drink", "id", @drinks.collect { |d| [d.name,d.id] }, {:include_blank => true, :selected => d.id}, {:class => "station-items"})%>
            </li>
        <% end %>
        <% m = 4-@station.drinks.count %>
        <% m.times do %>
            <li>
                <label class=" label" for="station_name">Item</label>
                <%=select("drink", "id", @drinks.collect { |d| [d.name,d.id] }, {:include_blank => true}, {:class => "station-items"})%>
            </li>
        <% end %>
        </ol>
    </fieldset>
    <%= f.buttons :commit %>
<% end %>

<script>    
$(".station-items").on("change",function(){
  var node = $(this)
  , prev = node.attr('data-rel')
  , next = parseInt(node.val())
  , station_id = $("#station_id").val()

  if(next) {
    $.ajax({
      url: "/drinks/"+next+".json",
      type: "PUT",
      data: { id:next, "drink[station_id]":station_id }
    });
  }

  if(prev) {
    $.ajax({
      url: "/drinks/"+prev+".json",
      type: "PUT",
      data: { id:prev, "drink[station_id]":"" }
    });
  }

  $(this).attr('data-rel',next);
});

$('.station-items option:selected').each(function(){
  return $(this).parent().attr('data-rel',$(this).val())
});
</script> 
```

# objective-c - 加载html文件时iOS + jqueryMobile无法捕获webview事件

> ID：10436899
> 
> 赞同：2
> 
> 时间：2012-05-03T18:01:23.763
> 
> 标签：objective-c, ios, xcode, jquery-mobile

我正在将 jqueryMobile html 文件加载到 webview 中，并且 webViewDidFinishLoad 事件被正确触发。但是，当您选择加载另一个 html 文件内容的加载 jqMb 文件的导航按钮时，不会触发事件！如何捕捉它？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T14:22:26.327

使用伪造的 javascript 调用解决，`widow.location = "localFuction"`.

然后，`- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest`被触发，如果`([[[request URL] absoluteString] hasPrefix:@"localFunction"]) { Return NO`；

希望这可以帮助

# c# - C# 反射：如何使用“对象”作为“类型参数”

> ID：10436905
> 
> 赞同：1
> 
> 时间：2012-05-03T18:01:56.187
> 
> 标签：c#, generics, reflection, constructor, type-parameter

我有这个域：

```
public class GenClass<T> { }

public class Type1 { }

public class Type2 { }

public class GenType1 : GenClass<Type1> { }

public class GenType2 : GenClass<Type1> { }

public class GenType3 : GenClass<Type2> { }

public class GenType4 : GenClass<string> { } 

public class GenType5 : GenClass<int> { } 
```

这个逻辑：

```
public class SomeClass {
    public void Add<T>(GenClass<T> t) { }
} 
```

这个消费者：

```
public class Consumer {
    public void Method() {
        var some = new SomeClass();
        some.Add(new GenType1());
        some.Add(new GenType2());
        some.Add(new GenType3());
        some.Add(new GenType4());
        some.Add(new GenType5());
    }
} 
```

但是我没有`GenType(n)`单独添加每个，而是创建了一个这样的方法：

```
public void AddFromAssembly<TAssembly>(SomeClass some, Type baseType) {
    var list = typeof(TAssembly).Assembly.GetTypes()
        .Where(t => baseType.IsAssignableFrom(t)
            && !baseType.Equals(t))
        .ToList();
    list.ForEach(type => {
        var ctor = type.GetConstructor(BindingFlags.Instance | BindingFlags.Public, null,
                                       Type.EmptyTypes, null);
        var obj = ctor.Invoke(new object[] { });
        some.Add(obj); //????
    });
} 
```

并想这样称呼它：

```
public class Consumer {
    public void Method() {
        var some = new SomeClass();
        AddFromAssembly<GenType1>(some, typeof(GenClass<>));
    }
} 
```

但是`some.Add`方法是一个泛型方法，`ctor.Invoke`方法返回一个`object`. 你有解决这个问题的想法吗？提前致谢。

**更新**问题不完整，我解决了。感谢您的审查。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-03T18:12:13.073

要么这样做：

```
Add<object>(obj); //this will work with T typed as object 
```

或者：

```
typeof(Some).GetMethod("Add").MakeGenericMethod(new [] { typeof(obj.GetType()).Invoke(some, new [] { obj }); 
```

反射版本将在运行时为 T 使用确切的 obj 类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T18:05:15.950

泛型的类型参数需要编译时间，并且无法在运行时确定（除非您想在运行时陷入创建类定义的麻烦）。

您可能需要做的是创建为“对象”键入的方法的第二个版本，并改用它。

# c - 将浮点变量显示为十六进制整数会破坏相邻整数

> ID：10436906
> 
> 赞同：0
> 
> 时间：2012-05-03T18:01:58.420
> 
> 标签：c, floating-point, hex, printf, format-specifiers

我有这个简单的程序

```
#include <stdio.h>
int main(void)
{
 unsigned int a = 0x120;
 float b = 1.2;
 printf("%X %X\n", b, a);
 return 0;
} 
```

我希望输出是

```
some-value 120  (some-value will depend on the bit pattern of `float b` ) 
```

但我看到

```
40000000 3FF33333 
```

为什么被`a`搞砸的价值？`%X`将它的参数视为`signed int`，因此它应该从堆栈中检索 4 个字节并打印 calue，`b`然后获取接下来的 4 个字节打印其`a`值为`0x120`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-03T18:05:23.120

首先，将参数传递给`printf`不匹配格式说明符是未定义的行为。

其次，传递给 时`float`会提升为，所以它是八个字节而不是四个。哪些字节被解释为格式所期望的两个值取决于推送参数的顺序。`double``printf``unsigned``printf`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T18:11:30.367

如果您想查看存储的浮点数的位，请使用联合：

```
 float b = 1.2;
 union {
      float  f;
      int    i;
 } u;
 u.f = b;

 printf ("%x\n", u.i); 
```

结果（32 位 x86）：

```
3f99999a 
```

# javascript - 为什么我的输入元素在回发后不保留焦点/模糊事件？

> ID：10436909
> 
> 赞同：0
> 
> 时间：2012-05-03T18:02:04.410
> 
> 标签：javascript, jquery, asp.net, event-handling, updatepanel

我正在使用 jQuery 通过设置一些输入文本框控件的焦点/模糊事件

```
$(function() {
  ..
}); 
```

但是每当回发发生时，我的控件就不再执行这些事件。我尝试从文档就绪事件中删除它们并将代码放在文档底部，希望它每次都能加载它，但这不起作用。如何让这些控件在回发后保留焦点/模糊事件？

认为这无关紧要，但这些回发发生在`ajax:UpdatePanel`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T18:33:47.897

您将事件一次附加到元素，它们稍后会被删除，这意味着事件也会被删除。您可以一次又一次地附加事件，但您可以简单地将事件附加到更高级别的父节点而不必担心：

```
$(function () {
    $(document).on('focusin', 'input.userTxtA_center', function () {
            this.value = '';
            this.className = 'userTxtB_center';

    });
}); 
```

我正在使用该`focusin`事件而不是`focus`因为`focus`不会冒泡。

隔离演示：http: [//jsfiddle.net/TUqsE/](http://jsfiddle.net/TUqsE/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T18:05:37.000

使用绑定您的方法`.live()`

```
$('selector').live('EVENT', function() { }); 
```

EVENT 在哪里`blur`/ `focus`/etc... 那么在 DOM 中创建控件的时间无关紧要，jQuery 会自动重新连接处理程序。

[http://api.jquery.com/live/](http://api.jquery.com/live/)

**或**在回发完成后重新连接事件

请参阅 - [ASP.NET - UpdatePanel 和 JavaScript](https://stackoverflow.com/questions/418072/asp-net-updatepanel-and-javascript) - 了解如何操作。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-03T18:30:40.263

是的，这是因为更新面板，使用这个页面加载事件而不是 $(document).ready 或 $(function() {});

示例：

```
<script type="text/javascript" language="javascript">
    function pageLoad() {
       $('#MyId').bind("mouseover", function(e) {
           // Do something exciting
       });
    }
    </script> 
```

# c - char* ptr 到结构

> ID：10436910
> 
> 赞同：2
> 
> 时间：2012-05-03T18:02:07.720
> 
> 标签：c

我遇到了一些我不太理解的 C 代码。以下编译并运行得很好。1) 为什么我可以将 char* 转换为 struct* 和 2) 使用这个成语而不是 void* 有什么好处吗？

```
struct foo
{
    int a;
    int b;
    char *nextPtr;
};

. . .

// This seems wrong
char *charPtr = NULL;

// Why not
//void *structPtr = NULL;

struct foo *fooPtr;
fooPtr = (struct foo*)charPtr; 
```

// 编辑删除字符串部分，因为这不是问题的重点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T19:40:38.297

1）如前所述，您可以转换为 C 中的任何指针类型。（C++ 可能有更复杂的规则，我不知道其中的细节）......

`char*`2) vs的好处`void*`是您可以在 a 上执行指针运算，`char*`但不能在 a 上执行`void*`。

根据您发布的代码，执行指针算术的智慧可能是有问题的，但对于具有可变长度“数据”的结构，它通常很方便。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T18:04:15.540

1.  您可以在指针类型之间进行转换，因为这是语言为您提供的灵活性。但是，您应该谨慎并知道您在做什么或可能出现问题。

2.  不，使用属性指针类型有一个优势，因此不需要转换。如果这不可能，那么是否使用 void* 并不重要，尽管对于阅读您的代码的开发人员来说可能会更清楚一些。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T18:07:31.080

我认为您只是遇到了 C 的经典“双刃剑”之一。

实际上，指针就是一个指针——只是一个保存地址的变量。从理论上讲，您可以尝试强制该指针指向任何东西；一个结构，一个整数，一个（填空）。当您尝试将指向某事物的指针转换为指向其他事物的指针时，C 不会抱怨；它表明你知道你在做什么。如果你不这样做，天堂会帮助你:)

实际上，是的，一个 void * 可能是一种更恰当的方式来声明一个可以指向任何东西旁边的指针，但我不确定它在操作上有多大的不同。不会发誓，因为可能会有编译器优化，如果指针是强类型的，可能会发生这种情况......

# each - 尝试在列表项中初始化多个“选择”输入

> ID：10436916
> 
> 赞同：0
> 
> 时间：2012-05-03T18:02:29.830
> 
> 标签：each, children, initializing

我在 StackOverFlow 的第一篇文章 ^_^ （所以是的，我是菜鸟，要温柔）

我已经搜索并实际上在网络上找到了我的问题的几个解决方案，但由于某种原因，它们都不适合我。

所以在这里：我有一个列表项，其中有多个“选择”输入，例如：

```
<li id="langlevels">
   <select id="encombobox"></select>
   <select id="frcombobox"></select>
   <select id="hecombobox"></select>
   <select id="rucombobox"></select>
   <select id="arcombobox"></select>
   <select id="otcombobox"></select>
</li> 
```

现在我要做的是：使用 jQuery，将所有“选择”输入初始化为我在数组中的值：

var lang_levels = new Array("Native Level", "Good Level", "Amateur Level");

我*试图*（无济于事）这样做的方式是：

```
 //Initializing language levels combobox values
    $("#langlevels > select").each(function () {
        for(var i=0; i<lang_levels.length;++i)
        {
            addOption($(this), lang_levels[i], lang_levels[i]);
        }
        */

    }); 
```

注意： addOption() 是一种我知道有效的方法，因为我使用它来初始化其他非嵌套的“选择”输入。

非常感谢您的帮助！

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T13:09:12.593

好的，我知道了！

唯一的问题是：

addOption( **$(this)** , lang_levels[i], lang_levels[i]);

应该是这样的：

addOption(**这个**, lang_levels[i], lang_levels[i]);

# c++ - C ++句柄作为HWND？

> ID：10436918
> 
> 赞同：1
> 
> 时间：2012-05-03T18:02:43.933
> 
> 标签：c++, api, postmessage, findwindow

我想知道您是否可以将句柄转换为窗口“HWND”。我需要使用“FindWindow”方法调用“PostMessage”函数。

我目前必须采购

```
HANDLE mainProcess;
BOOL APIENTRY ATTACH_PROCESS(int ProcessID)
{

    mainProcess = OpenProcess(PROCESS_ALL_ACCESS, true, ProcessID);

    return TRUE;
}
BOOL APIENTRY SEND_INPUT(/*NOT USED FOR THIS SAMPLE*/ const char* String, bool Keydown)
{

    int ToDo = WM_KEYUP;
    if (Keydown)
        ToDo = WM_KEYDOWN;
    return PostMessage((HWND)mainProcess, ToDo, VK_TAB, NULL); 
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T18:13:56.553

不可以。一个进程可以创建多个窗口。由于不存在一对一的映射，所以这样的函数没有意义。

另一方面，当然可以有一个函数返回由进程创建的窗口列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T18:44:17.777

使用 mainProcess 句柄调用 GetProcessId() 以获取 ProcessID。

调用 EnumWindows()

对于每个窗口，调用 GetWindowThreadProcessId() 以获取与该窗口关联的进程的 ProcessId。

比较 ProcessID，如果它们匹配 - 你已经找到了你想要的 HWND。

这是一项有点昂贵的任务，因此最好预先找到您想要的 hwnd 并存储它。

# css - Fieldset 不展开父 div 浮动

> ID：10436919
> 
> 赞同：0
> 
> 时间：2012-05-03T18:02:52.300
> 
> 标签：css, css-float, collapse, fieldset

我有两个向左浮动且宽度为 50% 的 DIV，在这些 div 中我有一个带有另一个 div 的字段集（数据网格）。数据网格展开时会出现此问题。父 DIV 不随字段集一起扩展。

这是一个例子：http: [//jsfiddle.net/BzUKz/1/](http://jsfiddle.net/BzUKz/1/)

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T18:41:38.540

请参阅[http://jsfiddle.net/BzUKz/12/](http://jsfiddle.net/BzUKz/12/) 只需`display: table;`从`container`.

如果你想保留`display: table;`那么你需要定义宽度，像这样。

```
.container {
    display:table;
    margin: auto;
    width:80%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T18:16:26.377

如果您需要打破长词并在下一行继续，您可以使用`word-wrap`设置为`break-word`这样的属性：http: [//jsfiddle.net/skip405/BzUKz/10/](http://jsfiddle.net/skip405/BzUKz/10/)

Ps 不要同时写`display: inline-block`和`float`。浮点数自动成为块级。如果你删除你的`display: inline-block`- 什么都不会改变:)

# windows-phone-7 - WP7 - 文字转语音 API

> ID：10436923
> 
> 赞同：0
> 
> 时间：2012-05-03T18:03:02.960
> 
> 标签：windows-phone-7, text-to-speech

我发现不可能创建任何形式的文本到语音程序。我已经在互联网上搜索过，只能找到两个例子，这两个都不起作用。我已经获得并使用了我的 Bing 应用程序 ID，因此它不是导致问题的缺少 ID。

有谁知道哪里有一个工作示例或可以提供一些示例（功能！）代码。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T07:01:01.643

如果您想在 Windows Phone 平台上使用 Text To Speech。有两种你可以选择：</p>

【1】必应搜索文字转语音服务：http://www.codeproject.com/Articles/259727/Text-to-speech-in-windows-phone7

【2】关于TTX Nuance Dragon SDK 已支持Windows Phone 平台： [http ://www.nuance.com/for-developers/dragon/index.htm](http://www.nuance.com/for-developers/dragon/index.htm)

# oauth-2.0 - OAuth 2.0 重定向 URL 是否支持查询字符串参数？

> ID：10436924
> 
> 赞同：4
> 
> 时间：2012-05-03T18:03:03.427
> 
> 标签：oauth-2.0

我想确保我正确理解了（草案）规范，其中指出：

> 重定向端点 URI 必须是[RFC3986] 第 4.3 节定义的绝对 URI 。端点 URI 可以包含一个
> “application/x-www-form-urlencoded”格式的
> （[W3C.REC-html401-19991224]）查询组件（[RFC3986] 第 3.4 节），在添加额外的查询参数时必须保留它。
> 端点 URI 不得包含片段组件。

我问的原因是谷歌或 Facebook 似乎都没有保留任何查询字符串。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-14T02:29:11.397

重新阅读规范，规范的引用部分似乎不适用于 OAuth 服务器对 URI 的处理，而是 OAuth 客户端对给出的原始端点 URI 的处理。

换句话说，如果我说我在重定向到我的服务器以进行 OAuth 授权时必须使用的 OAuth 端点是：

```
http://example.com/oauth.php?endpoint=token 
```

然后，当客户端将 URI 添加`?response_type=code&client_id=...&state=...&redirect_uri=...`到 URI 时，不允许丢弃原始端点 uri 中的“?endpoint=token”，并且必须使用 URI：

```
http://example.com/oauth.php?endpoint=token&response_type=code&client_id=...&state=...&redirect_uri=... 
```

因此，至少就规范的那一部分而言，没有任何内容表明 Facebook、Google 等……除了“状态”之外，还必须保留任何未知的查询参数。

从技术上讲，您也许可以使用该`&state=`参数以 JSON 格式传递自定义数据。虽然这可能会也可能不会。IIRC 我注意到当您使用特殊字符时，Meetup 的 OAuth 2 实现似乎会破坏状态。我认为有些东西是违反规范的。

# java - 加载图像时出现内存不足错误

> ID：10436927
> 
> 赞同：2
> 
> 时间：2012-05-03T18:03:20.157
> 
> 标签：java, android, out-of-memory

我想在android上加载图像

```
background = BitmapFactory.decodeResource(getResources(),R.drawable.hangmanbegin);    
background =  Bitmap.createScaledBitmap(background,screenx,screeny,false); 
```

图像是 800*1280 像素，所以如果我是正确的，它应该使用大约 3MB 的内存空间吗？但是我的堆在那个阶段从 15MB 增长到 29MB，所以没有窗口或上下文泄漏？

这是如何解释的？你能做些什么呢？

提前谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T18:10:32.290

> 位图占用大量内存，尤其是对于照片等丰富的图像。例如，Galaxy Nexus 上的相机可拍摄高达 2592x1936 像素（5 兆像素）的照片。如果使用的位图配置是 ARGB_8888（Android 2.3 以后的默认配置），则将此图像加载到内存中大约需要 19MB 内存（2592*1936*4 字节），会立即耗尽某些设备上的每个应用程序的限制。

来自[http://developer.android.com/training/displaying-bitmaps/index.html](http://developer.android.com/training/displaying-bitmaps/index.html)

信用和下面的方法来修复[https://stackoverflow.com/a/10127787/643500](https://stackoverflow.com/a/10127787/643500)

# c# - 无法使动态生成的磁贴正常工作（Windows Phone）

> ID：10436939
> 
> 赞同：0
> 
> 时间：2012-05-03T18:04:09.553
> 
> 标签：c#, .net, windows-phone-7

我有在 Application_Deacitvated/Closing() 中执行的方法。

```
public bool createBackTile()
    {
        if(AlarmClock.IsExists())
        {

            ImageBrush background = new ImageBrush()
            {
                ImageSource = new BitmapImage(new Uri("/BackBackgroundTheme.png", UriKind.Relative)),
                AlignmentX = AlignmentX.Center,
                AlignmentY = AlignmentY.Center
            };

            // Preparing tile image.
            TextBox tileImageData = new TextBox()
            {
                Text = AlarmClock.Read().ToShortTimeString(),
                FontSize = 45,
                FontWeight = FontWeights.Bold,
                Foreground = new SolidColorBrush(Colors.White),
                //Background = background,
                Height = 173,
                Width = 173,
                HorizontalContentAlignment = HorizontalAlignment.Center,
                VerticalContentAlignment = VerticalAlignment.Center,
                Padding = new Thickness(-12),
                Margin = new Thickness(0),
                Clip = new RectangleGeometry { Rect = new Rect(0, 0, 173, 173) }
            };

            Canvas canvas = new Canvas()
            {
                Width = 173,
                Height = 173,
                Background = background,
                Margin = new Thickness(0)
            };

            canvas.Children.Add(tileImageData);

            // Saving tile image.
            WriteableBitmap tileImage = new WriteableBitmap(173, 173);
            tileImage.Render(canvas, null);
            tileImage.Render(tileImageData, null);
            tileImage.Invalidate();
            using(var stream = IsolatedStorageFile.GetUserStoreForApplication().CreateFile("/Shared/ShellContent/BackBackground.jpg"))
            {
                tileImage.SaveJpeg(stream, 173, 173, 0, 100);
            }

            // Sets data for tile.
            StandardTileData tileData = new StandardTileData()
            {
                BackgroundImage = new Uri("BackgroundAlarmSet.png", UriKind.Relative),
                BackBackgroundImage = new Uri(@"isostore:/Shared/ShellContent/BackBackground.jpg"),
                BackContent = "",
                BackTitle = "",
            };

            // Sets tile.
            ShellTile.ActiveTiles.FirstOrDefault().Update(tileData);

            return true;
        }

        return false;
    } 
```

因此，如您所见，我想生成带有图像背景“BackgroundTheme.png”的文本在其中心的图块。我试图保存在IsolatedStorage 中的那个图块并将其分配给BackBackgroundImage。

但它不起作用。瓷砖正在翻转，但背景是完全黑色的。我已经加载了这个经过处理的背景，看起来这确实只是一个黑匣子。那么，如何让它工作呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T19:02:46.280

尝试：`BackgroundImage = new Uri(@"isostore:/Shared/ShellContent/BackBackground.jpg", UriKind.Absolute)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T11:07:39.627

我终于找到了问题所在。

看来，平铺图像的生成在 Application_Closing/Deactivating() 中没有正确完成。因此，我将图像生成移至其他地方，现在，当应用程序关闭/停用时，我只是将先前生成的图像设置为图块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-04T10:33:17.760

试试这个：

```
canvas.Children.Add(tileImageData);
canvas.UpdateLayout();
        // Saving tile image.
        WriteableBitmap tileImage = new WriteableBitmap(173, 173); 
```

# windows - 如何在不轮询的情况下检测 MS Windows IP 地址更改

> ID：10436944
> 
> 赞同：7
> 
> 时间：2012-05-03T18:04:24.390
> 
> 标签：windows, networking

我正在寻找一种无需轮询的方式来在 Windows 机器 IP 地址更改时获得通知。我需要对此更改做出反应并在我的应用程序中执行一些操作。

有人做过类似的事情吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T16:15:48.177

您可以使用[`NotifyAddrChange()`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366329%28v=vs.85%29.aspx)来处理 IPv4 地址更改。链接页面有一个简洁的演示。[`NotifyIpInterfaceChange()`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa814450%28v=vs.85%29.aspx)处理 IPv4 和 IPv6（分别或同时处理 - 请参阅文档），但需要 Vista 或更高版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T18:20:22.520

如果您使用的是 .NET，则可以实现[NetworkChange::NetworkAddressChanged Event](http://msdn.microsoft.com/en-us/library/system.net.networkinformation.networkchange.networkaddresschanged.aspx)。我相信这正是您想要的。

# artificial-intelligence - 量化行动

> ID：10436948
> 
> 赞同：0
> 
> 时间：2012-05-03T18:04:45.553
> 
> 标签：artificial-intelligence, logic

寻找向我展示如何在情景演算中量化过度行动（也许是流利的？）的例子（Reiter 2001）。

我理解动作、流利和情境之间的区别，但为什么它们需要用二阶逻辑来表示？为什么不使用第一顺序？你能解释一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T07:37:25.767

除了少数用于编码动态世界的公式外，所有公式都需要二阶逻辑 (SOL)。尤其，

*   初始状态的[属性]
*   行动先决条件
*   动作效果
*   后继状态公理（用于规避“框架问题”）

**都可以用一阶逻辑（FOL）表示**。
对于某些域，将 SOL 用于上述项目可能更*方便*- 更简洁 - 但 AFAIK，对于有限域，始终可以在上述项目*的上下文中将*此类 SOL 转换为 FOL，因此 SOL没有*必要*（再次，对于上述项目）。

通常情况下对 SOL 的需求仅来自一些“**基础公理**”，例如对 Situations 执行归纳的公理。

此外，根据特定应用，可能不需要基于 SOL 的基础公理，因此整个世界都可以用 FOL 来专门描述。
我不是该领域的专家，但我认为在许多情况下，为了 [逻辑] 过滤、规划、时间投影，我们可以消除对归纳的需要，因此只依赖 FOL。

# compiler-construction - 有任何工具或库来操作 CUDA PTX 代码吗？

> ID：10436950
> 
> 赞同：0
> 
> 时间：2012-05-03T18:04:54.977
> 
> 标签：compiler-construction, cuda, gpu

我想知道是否有一些东西可以操纵 PTX，就像 LLVM 及其库来操纵 LLVM IR 一样容易。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T18:26:25.720

您的意思是影响编译器生成 PTX 的方式还是调整生成的 PTX 的库？无论哪种情况，我认为没有任何此类工具可用。

`asm`您可以使用关键字将内联 PTX 插入内核。

# wcf - WCF Rest 服务错误处理和 WebChannelFactory

> ID：10436951
> 
> 赞同：5
> 
> 时间：2012-05-03T18:04:59.493
> 
> 标签：wcf, rest, webchannelfactory

据我了解，以下内容应该正确地从 WCF Rest 服务中引发自定义错误：

```
[DataContract(Namespace = "")]
public class ErrorHandler
{
    [DataMember]
    public int errorCode { get; set; }

    [DataMember]
    public string errorMessage { get; set; }
} // End of ErrorHandler

public class Implementation : ISomeInterface
{
    public string SomeMethod()
    {
        throw new WebFaultException<ErrorHandler>(new ErrorHandler()
        {
            errorCode = 5,
            errorMessage = "Something failed"
        }, System.Net.HttpStatusCode.BadRequest);
    }
} 
```

在提琴手这似乎工作，我得到以下原始数据：

```
HTTP/1.1 400 Bad Request
Cache-Control: private
Content-Length: 145
Content-Type: application/xml; charset=utf-8
Server: Microsoft-IIS/7.5
X-AspNet-Version: 4.0.30319
Set-Cookie: ASP.NET_SessionId=gwsy212sbjfxdfzslgyrmli1; path=/; HttpOnly
X-Powered-By: ASP.NET
Date: Thu, 03 May 2012 17:49:14 GMT

<ErrorHandler xmlns:i="http://www.w3.org/2001/XMLSchema-instance"><errorCode>5</errorCode><errorMessage>Something failed</errorMessage></ErrorHandler> 
```

但现在在我的客户端我有以下代码：

```
WebChannelFactory<ISomeInterface> client = new WebChannelFactory<ISomeInterface>(new Uri(targetHost));

ISomeInterface someInterface = client.CreateChannel();
try
{
  var result = someInterface.SomeMethod();
}
catch(Exception ex)
{
   // Try to examine the ErrorHandler to get additional details.
} 
```

现在，当代码运行时，它会遇到问题并`System.ServiceModel.ProtocolException`显示消息“远程服务器返回了意外响应：(400) 错误请求。”。看来我目前还没有办法看到 ErrorHandler 的详细信息。有没有人遇到过这个？有没有办法在这一点上获取 ErrorHander 详细信息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T18:35:57.093

`WebChannelFactory`或者`ChannelFactory`只会向您透露通用的`CommunicationException`。您将需要使用`IClientMessageInspector`行为或依赖`WebRequest`来返回实际错误。

有关`IClientMessageInspector`方法 - 请参阅[此博客条目](http://kenneththorman.blogspot.com/2011/02/wcf-rest-exception-handling.html)中的评论。

对于该`WebRequest`方法，您可以通过以下方式来捕捉`WebException`.

```
try { }
catch (Exception ex)
{
    if (ex.GetType().IsAssignableFrom(typeof(WebException)))
    {
        WebException webEx = ex as WebException;
        if (webEx.Status == WebExceptionStatus.ProtocolError)
        {
            using (StreamReader exResponseReader = new StreamReader(webEx.Response.GetResponseStream()))
            {
                string exceptionMessage = exResponseReader.ReadToEnd();
                Trace.TraceInformation("Internal Error: {0}", exceptionMessage);
            }
        }
    }
} 
```

# mysql - 在 SQL 中命名主键“id”与“something_id”

> ID：10436953
> 
> 赞同：8
> 
> 时间：2012-05-03T18:05:12.827
> 
> 标签：mysql, sql, naming-conventions, primary-key

我想知道在具有许多表的数据库中命名主键/唯一键的最佳做法是什么。您应该总是只调用每个表的主键`id`，还是可以在每个表中没有`id`字段而只命名每个表`something1_id`，`something2_id`等等？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-03T18:07:21.633

**无论你做什么，选择一个或另一个并坚持这个标准。** 每个都有优点和缺点。

我更喜欢`SomethingID`，但其他人更喜欢只是`ID`. 在我使用的系统中，有超过一千个表，并且使 PK 和 FK 具有完全相同的名称使事情变得更容易。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-03T18:07:44.503

这是个人喜好。归根结底，这完全没有区别。我个人更喜欢使用，`Id`因为我发现引用字段（比如说`Customer`表格和`Id`字段）`Customer.CustomerId`很麻烦，`Customer.Id`似乎更有意义。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-03T18:10:04.570

这*是*一个偏好问题；但是，在表之间进行连接时，使用 (something)ID 的好处是列名变得不那么模棱两可了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T18:09:09.243

`id`只是一个方便的约定 - 只要您将其声明为关键字段，您就可以调用任何字段。

在读取和编写代码时，为 id 添加相关上下文的前缀可能会很有帮助，尤其是在连接来自多个表和外键的数据时可以提高可读性。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-05-03T18:07:55.640

我建议您对长名称使用缩写，`user_id`对常规表使用 (something)Id (like )。所以供表`customer_company_relation_metadata`使用`ccm_id`。但它也很好`id`用

# android - Android 小部件 PendingIntent 失败

> ID：10436954
> 
> 赞同：1
> 
> 时间：2012-05-03T18:05:12.997
> 
> 标签：android

这里讨论了一些类似的问题，但我的情况在某些时候确实有效。我正在开发一个小部件，单击该小部件时应启动属于同一包的活动。同样的活动也可以通过可能发布的通知来启动。小部件更新和通知发布由包中的服务完成。这是调用来发出 PendingIntent 的方法：

```
// Get pending intent for widget or notification
private PendingIntent getPendingIntent(int widgetId, int extraData) {
    Intent clickIntent = new Intent(mCtx, OtdShowEvents.class);
    clickIntent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, widgetId);
    clickIntent.putExtra("OTDExtra", extraData);
    clickIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    PendingIntent pendIntent = PendingIntent.getActivity(mCtx, 0, clickIntent, 
            0);
    return pendIntent;
} 
```

如果我在干净（重新启动）的设备上创建小部件的实例，小部件和通知都会按预期启动目标活动。但是，如果我删除小部件并创建另一个实例，则不再启动 Intent。同样，如果我完全卸载小部件，然后重新安装它并创建一个实例，则不会触发任何 Intent。但是，如果我关闭电源并重新打开（将小部件留在原处），它会在启动时再次工作。

我一路上看到的一个错误来自 PackageManager 说“找不到名称”，但指出包名称“com.ghcssoftware.OTD.full”，这是我的包的正确名称！

有任何想法吗？顺便说一句，我已经尝试了一些 PendingIntent 标志，例如 FLAG_CANCEL_CURRENT 和 FLAG_UPDATE_CURRENT，而不会影响这种行为。

FWIW，我发现本文中提供的代码片段正是我需要弄清楚如何让这一切正常工作，特别是对于我的小部件的多个实例等：[PendingIntent in Widget + TaskKiller](https://stackoverflow.com/questions/2706303/pendingintent-in-widget-taskkiller)

# asp.net - 在 Base Page 的 OnError 事件中使用 JavaScript 显示异常消息

> ID：10436958
> 
> 赞同：0
> 
> 时间：2012-05-03T18:05:17.490
> 
> 标签：asp.net

我想使用 Javascript 在应用程序中显示所有未处理的异常。为此，我在页面的自定义基类中定义了 onError 事件。这是我的基本页面的代码：

```
namespace Loan
{

  public class BasePage : System.Web.UI.Page
  {
        public BasePage()
        {

        }

    protected override void OnError(EventArgs e)
    {
        //Report Error
        Exception ex = Server.GetLastError();

        if (ex is HttpUnhandledException && ex.InnerException != null)
        {
            ex = ex.InnerException;
        }

        var _message = "Error : "+ ex.Message.ToString();

        DisplayAlert(_message);

        Server.ClearError();
        return;
    }

    protected virtual void DisplayAlert(string message)
    {
        ClientScript.RegisterStartupScript(
                        this.GetType(),
                        Guid.NewGuid().ToString(),
                        string.Format("alert('{0}');", message.Replace("'", @"\'")),
                        true
                    );
    }
  }
} 
```

对于未处理的异常，永远不会显示警报。但是，如果我从任何页面调用 DisplayAlert

```
base.DisplayAlert(ex.Message); 
```

将显示 javascript 警报。如何从基本页面获取未处理的异常显示的 javascript 警报。或者是否有任何其他方式向用户显示这些异常消息。我不想将它们重定向到通用错误页面，因为它来回发送它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T19:06:42.720

这是意料之中的。如果异常未处理，则**BasePage**上的 OnError 事件将执行，您的子页面将不会继续执行，因为 BasePage 是纯代码，因此无需渲染任何内容。如果您想吐出警报，您需要直接写入响应，但在发生未处理的异常后您仍然应该看到一个空白页。

```
 protected virtual void DisplayAlert(string message)
 {
        Response.Write(string.Format("<script>alert('{0}');</script>", message.Replace("'", @"\'")));
 } 
```

当然，当你`DisplayAlert`直接调用时，它是有效的，因为你只是调用一个方法，Page 执行正常继续。

坦率地说，我不喜欢你的方法。您应该记录异常并重定向到另一个页面，这是典型`Oooooooooopsss, me screwed up`的事情。

# c++ - 在抛出期间构造对象时抛出异常？

> ID：10436959
> 
> 赞同：3
> 
> 时间：2012-05-03T18:05:18.293
> 
> 标签：c++, exception

我有一个异常类：

```
class MyException : public std::exception
{
public:
    MyException( char* message )
        : message_( message )
    {
        if( !message_ ) throw std::invalid_argument("message param must not be null");
    }
}; 
```

在我的投掷地点：

```
try {
    throw MyException( NULL );
}
catch( std::exception const& e ) {
    std::cout << e.what();
} 
```

（代码未编译，如有错误请见谅）

我想知道当我在构造时由于另一个抛出而从构造函数中抛出会发生什么。我认为这是合法的，并且 catch 最终会捕获 a `std::invalid_argument`，并且之前抛出的异常 ( `MyException`) 将被忽略或取消。

这种设计的目标是在我的异常类中强制执行不变量。`message_`永远不应该为 NULL，我不想在我的`what()`重载中使用 if 条件来检查它是否为 null，所以我在构造函数中检查它们，如果它们无效则抛出。

这是正确的，还是行为不同？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T18:07:35.980

您打算抛出的对象（在这种情况下`MyException`）必须在它可以被抛出*之前成功构造。*所以你还没有扔掉它，因为它还没有被构建。

所以这将起作用，从`MyException`的构造函数中抛出异常。您不会触发“在处理异常原因时抛出异常`std::terminate`”问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T18:24:37.563

## 15.1 抛出异常 n3376

### 第 7 段

> 如果异常处理机制在完成对要抛出的表达式的求值之后但在捕获异常之前调用通过异常退出的函数，则调用 std::terminate (15.5.1)。

这意味着在构造函数（在这种情况下被抛出的对象）完成之前，不会发生任何特殊情况。但是在构造函数完成后，任何其他未处理的异常都会导致`terminate()`被调用。

该标准继续提供一个示例：

```
struct C
{
       C() { }
       C(const C&) { throw 0; }
};

int main()
{
  try
  {
    throw C();   // calls std::terminate()
  }
  catch(C) { }
} 
```

这里调用了 terminate ，因为首先创建了对象。但是随后调用复制构造将异常复制到保存位置（15.1.4）。在此函数调用（复制构造）期间，会生成未捕获的异常并因此调用终止。

因此，您的代码应该按预期工作。

*   要么： A`MyException`生成一个好的消息并抛出
*   或者：`std::invalid_argument`生成并抛出A

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T18:44:51.637

如果要检查应始终为真的不变量，则应使用断言。异常适用于预期会发生的异常情况，例如极端情况或错误的用户输入。

如果您使用异常报告代码中的错误，您可能会不小心用 catch(...) 隐藏它们。如果您正在编写库代码，这一点尤其重要，因为您永远不知道其他人是否会捕获并忽略异常，即使这意味着系统已达到无效状态。

断言的另一个优点是您可以根据需要完全禁用它们，这样它们就不会再招致任何性能损失。这使您可以对调试版本中的这些检查非常偏执，并且仍然拥有闪电般的快速发布版本。

# linux - Ubuntu 中的编译错误：/usr/bin/ld: 找不到 -llog

> ID：10436961
> 
> 赞同：0
> 
> 时间：2012-05-03T18:05:25.007
> 
> 标签：linux, ubuntu, compilation, makefile

在编译过程方面，我是新手，在 Linux 中也是如此，但我确实知道一些事情。我有一些源代码，我想编译。

我已经执行了`apt-get install build-essential`，但它并没有真正帮助我。

当我执行时，`make`我收到此错误：

```
/usr/bin/ld: cannot find -llog
collect2: ld returned 1 exit status 
```

有些文件确实编译成功，但对于一些我得到这个错误。随着我研究得更多，似乎是由于缺少图书馆。

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T18:13:25.817

您可能需要安装这些软件包：

```
 sudo apt-get install liblog4cplus-dev liblog4cpp5-dev 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T18:14:13.443

因为您专门写了“我进行 apt-get install ...”，所以我想我需要澄清一下。但也许我误解了你。

通常当你进行 make install 时，你需要在源目录中 make install 一些文件

```
#download the source of whatever you're installing
wget <someSource>

#go to it
cd /mySourceFolder/

# make, make install
make [-someFlags]
make install 
```

或者，如果您使用`apt-get install`，它就是这样。

```
apt-get install <nameOfInstallee> 
```

# c++ - 访问类的成员。此类的对象从未实例化。所有成员都是静态类型

> ID：10436969
> 
> 赞同：3
> 
> 时间：2012-05-03T18:06:06.747
> 
> 标签：c++, static

我有一个工作代码库，其中有一个名为 Tabs 的类。这个类的所有方法和变量都被定义为静态的。我知道类的静态成员由该类对象的所有实例共享。此类用于将某种类型的数据存储为集合。许多不同的文件使用成员函数 Tabs::find() 和 Tabs::Insert() 却从未实例化类 Tabs 的对象。我试图了解它是如何工作的以及这种编程技术被称为什么。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T18:10:53.107

`static`数据成员在`main`进入之前被初始化，这就是访问它们的原因。它们驻留在静态内存中，而不是动态或自动的。

只有静态成员的类类似于具有全局变量和函数，但组合在一起。它本身不是一种编程技术。这只是全局变量。

```
//globals.h
class Globals
{
   static int x;
public:
   static int getX() {return x;}
};

//globals.cpp
#include "Globals.h"
int Globals::x = 1;

//main.cpp
#include "Globals.h"
//x is initialized before call to main
int main()
{
    int x = Globals::getX();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T18:23:36.243

我称之为“过时的”。它本质上是使用 a `class`（或`struct`，视情况而定）来模拟 a `namespace`。

```
class whatever { 
    static int a, b, c;
    static double x, y, z;
};

int whatever::a, whatever::b, whatever::c;
double whatever::x, whatever::y, whatever::z; 
```

与以下内容几乎相同：

```
namespace whatever {
    int a, b, c;
    double x, y, z;
} 
```

您可能只是在处理`namespace`添加到该语言之前的代码。如果它不是那么旧，那么作者可能是，或者可能有一些意图保持对某些不支持`namespace`（正确）的编译器的可移植性。

In any case, what you have are global variables with qualified names. Even though they're inside a `class`/`struct`, the `static` means they have static lifetime, so being a struct affects only the name, not things like initialization or destruction.

# python - 如何在 Python 中创建一个以逗号结尾的列表？

> ID：10436976
> 
> 赞同：0
> 
> 时间：2012-05-03T18:06:33.213
> 
> 标签：python, list, mechanize

当使用 mechanize 更改表单中项目的状态时，我需要在 Python 中创建一个列表，如下所示：

```
['2009', '2008', '2007', '2006', '2005', '2004',] 
```

该列表必须以尾随逗号结尾，否则它将不起作用。例如，以下代码有效：

```
br = mechanize.Browser()
br.select_form(nr=0)
br['ctl03'] = ['2009', '2008', '2007',] 
```

但是，以下代码不起作用：

```
br = mechanize.Browser()
br.select_form(nr=0)
br['ctl03'] = ['2009', '2008', '2007'] 
```

* * *

这是我不使用尾随逗号时收到的错误消息：

```
Traceback (most recent call last):
  File "C:/Users/Renato/PycharmProjects/Agrolink/faostat.py", line 43, in <module>
    br['ctl03$DesktopThreePanes1$ThreePanes$ctl01$TMyears'] = ['2009', '2008', '2007']
  File "C:\Python26\lib\site-packages\mechanize\_form.py", line 2782, in __setitem__
    control.value = value
  File "C:\Python26\lib\site-packages\mechanize\_form.py", line 1977, in __setattr__
    self._set_value(value)
  File "C:\Python26\lib\site-packages\mechanize\_form.py", line 1985, in _set_value
    raise TypeError("ListControl, must set a sequence")
TypeError: ListControl, must set a sequence
Process finished with exit code 1 
```

* * *

好吧，在整个下午处理了这个问题之后，我了解到这是我可以让它做我需要的事情而没有尾随逗号：

```
 mylist = ['2009', '2008', '2007']
 br.set_value(mylist, name="ctl03") 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-03T18:07:37.133

这没有多大意义 - 逗号是在将列表表示为字符串时放入的格式化内容，逗号对列表本身没有任何价值。

您想将列表的输出更改为字符串，还是在此处执行其他操作？如果您想要一个额外的“空”项目，那么您可以附加`None`到列表中，例如，模拟它。

要使用这样的额外逗号格式化字符串，您需要执行以下操作：

```
"["+", ".join(mylist)+",]" 
```

更新您的编辑：

您列出的两行在 Python 中的含义完全相同 - 不可能有一条有效而另一条无效。结尾的逗号是语法糖，它让你懒得写出列表文字。

```
>>> ['2009', '2008', '2007',] == ['2009', '2008', '2007']
True 
```

再次编辑：

尾随逗号实际上不可能影响您的代码。如果我们反汇编 python 产生的字节码：

```
import dis

def test1():
    ['2009', '2008', '2007',]

def test2():
    ['2009', '2008', '2007']

dis.dis(test1)
dis.dis(test2) 
```

这给了我们：

```
 4           0 LOAD_CONST               1 ('2009') 
              3 LOAD_CONST               2 ('2008') 
              6 LOAD_CONST               3 ('2007') 
              9 BUILD_LIST               3 
             12 POP_TOP              
             13 LOAD_CONST               0 (None) 
             16 RETURN_VALUE         
  7           0 LOAD_CONST               1 ('2009') 
              3 LOAD_CONST               2 ('2008') 
              6 LOAD_CONST               3 ('2007') 
              9 BUILD_LIST               3 
             12 POP_TOP              
             13 LOAD_CONST               0 (None) 
             16 RETURN_VALUE 
```

我们可以看到字节码是完全一样的。额外的逗号不会作为信息与列表一起存储。鉴于此，我们可以说这不是影响您的代码的原因，所以您能否将您的示例简化为我们可以测试的东西，并带有可重现的错误，我们可以看到问题实际上是什么。

我无法重现这种行为：

测试.html：

```
<form name="test">
<input type="checkbox" name="vehicle" value="Bike" /> I have a bike<br />
<input type="checkbox" name="vehicle" value="Car" /> I have a car
</form> 
```

进而：

```
>>> br.open("file:///path/to/test.html")
<response_seek_wrapper at 0x1d74cf8 whose wrapped object = <closeable_response at 0x1f9be60 whose fp = <open file '/path/to/test.html', mode 'rb' at 0x221b9c0>>>
>>> br.select_form(name="test")
>>> br["vehicle"] = ["Bike", "Car",]
>>> br["vehicle"] = ["Bike", "Car"] 
```

两种变体都可以毫无怨言地工作。

# c# - WinForms 应用程序由于 SystemEvents.OnUserPreferenceChanged 事件而挂起

> ID：10436981
> 
> 赞同：3
> 
> 时间：2012-05-03T18:06:58.887
> 
> 标签：c#, .net, winforms

我一直在处理我的客户端安装中挂起的一个奇怪的应用程序。在尝试了几件事后，我得出的结论是，没有转储它就行不通。所以我在挂起时从我的一位客户那里得到了转储。我必须注意，它只发生在我的安装中，而不是我的开发计算机中。

在我的转储中，我看到 SystemEvents.OnUserPreferenceChanged 事件导致我的 UI 线程阻塞等待线程，该线程不再发送消息。

在这里和谷歌搜索后，我发现有些人也遇到了这个问题。我在代码中上下移动，看看我们是否有机会在非 UI 线程上创建了控件或表单，但没有运气。

这是我的 !clrstack

```
 0012ee5c 7c90e514 [HelperMethodFrame_1OBJ: 0012ee5c] 
System.Threading.WaitHandle.WaitOneNative(Microsoft.Win32.SafeHandles.SafeWaitHandle, UInt32, Boolean, Boolean)
0012ef08 792b68af System.Threading.WaitHandle.WaitOne(Int64, Boolean)
0012ef24 792b6865 System.Threading.WaitHandle.WaitOne(Int32, Boolean)
0012ef38 7b6f1a4f System.Windows.Forms.Control.WaitForWaitHandle(System.Threading.WaitHandle)
0012ef4c 7ba2d68b System.Windows.Forms.Control.MarshaledInvoke(System.Windows.Forms.Control, System.Delegate, System.Object[], Boolean)
0012efec 7b6f33ac System.Windows.Forms.Control.Invoke(System.Delegate, System.Object[])
0012f020 7b920bd7 System.Windows.Forms.WindowsFormsSynchronizationContext.Send(System.Threading.SendOrPostCallback, System.Object)
0012f038 7a92ed62 Microsoft.Win32.SystemEvents+SystemEventInvokeInfo.Invoke(Boolean, System.Object[])
0012f06c 7a92dc8f Microsoft.Win32.SystemEvents.RaiseEvent(Boolean, System.Object, System.Object[])
0012f0b8 7a92e227 Microsoft.Win32.SystemEvents.OnUserPreferenceChanged(Int32, IntPtr, IntPtr)
0012f0d8 7aaa06ec Microsoft.Win32.SystemEvents.WindowProc(IntPtr, Int32, IntPtr, IntPtr)
0012f0dc 003c222c [InlinedCallFrame: 0012f0dc] 
0012f2a0 7b1d8d2e System.Windows.Forms.Application+ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop(Int32, Int32, Int32)
0012f33c 7b1d8997 System.Windows.Forms.Application+ThreadContext.RunMessageLoopInner(Int32, System.Windows.Forms.ApplicationContext)
0012f390 7b1d87e1 System.Windows.Forms.Application+ThreadContext.RunMessageLoop(Int32, System.Windows.Forms.ApplicationContext)
0012f3c0 7b195931 System.Windows.Forms.Application.Run(System.Windows.Forms.Form)
0012f3d4 034608b6 InsFocusBI.Presentation.MdiMain.NewMdiMainHandler(System.Object, NewSingleInstanceEventArgs)
0012f3ec 034607ac InsFocusBI.Utilities.SingleInstanceHandler.Start(System.String[], System.String)
0012f42c 0346021a InsFocusBI.Presentation.MdiMain.Run(System.String[])
0012f440 0346019b InsFocusBI.Presentation.MdiMain.Main(System.String[])
0012f688 79e71b4c [GCFrame: 0012f688] 
```

我认为也许使用转储我可以弄清楚在另一个线程上创建的控件是什么，它会给我一个线索。

我试过 !dso 来获取所有的堆栈对象：

```
OS Thread Id: 0x4f0 (0)
ESP/REG  Object   Name
0012ed90 0132e8cc System.Windows.Forms.WindowsFormsSynchronizationContext
0012ee1c 06bfe2a0 System.Threading.ManualResetEvent
0012ee30 06bfe2a0 System.Threading.ManualResetEvent
0012ee9c 06bfe2a0 System.Threading.ManualResetEvent
0012eea4 0132381c System.Collections.Hashtable
0012eeb0 06bfe2a0 System.Threading.ManualResetEvent
0012eee0 06bfe2b8 Microsoft.Win32.SafeHandles.SafeWaitHandle
0012ef28 06bfe2a0 System.Threading.ManualResetEvent
0012ef78 06b4d080 System.Windows.Forms.PropertyStore
0012ef80 06b4d018 System.Windows.Forms.Application+MarshalingControl
0012ef88 06b4d018 System.Windows.Forms.Application+MarshalingControl
0012ef8c 06bfe1b0 System.Windows.Forms.Control+ThreadMethodEntry
0012ef90 06b4d018 System.Windows.Forms.Application+MarshalingControl
0012ef94 06b4d018 System.Windows.Forms.Application+MarshalingControl
0012ef9c 06b4d018 System.Windows.Forms.Application+MarshalingControl
0012efa4 06b4d018 System.Windows.Forms.Application+MarshalingControl
0012efd4 06b4d018 System.Windows.Forms.Application+MarshalingControl
0012efe4 06bfe124 System.Object[]    (System.Object[])
0012efe8 06bfe104 System.Threading.SendOrPostCallback
0012efec 06bfe138 System.Windows.Forms.Control+MultithreadSafeCallScope
0012f004 064a8228 System.Threading.Thread
0012f00c 06b4d018 System.Windows.Forms.Application+MarshalingControl
0012f01c 06bfe124 System.Object[]    (System.Object[])
0012f028 06b4cf64 System.Windows.Forms.WindowsFormsSynchronizationContext
0012f034 06bfddc4 System.Object[]    (System.Object[])
0012f038 06b6096c Microsoft.Win32.SystemEvents+SystemEventInvokeInfo
0012f068 06bfddc4 System.Object[]    (System.Object[])
0012f074 0132a174 System.Object
0012f078 06bfdde8 System.Object[]    (Microsoft.Win32.SystemEvents+SystemEventInvokeInfo[])
0012f07c 0132a298 System.Object
0012f0a4 0132a3c4 Microsoft.Win32.SystemEvents
0012f0a8 0132a298 System.Object
0012f0b4 06bfddc4 System.Object[]    (System.Object[])
0012f0c0 0132a3c4 Microsoft.Win32.SystemEvents
0012f270 017dbd10 InsFocusBI.Presentation.Controls.CustomListView
0012f288 0132e8f0 System.Windows.Forms.Application+ThreadContext
0012f2cc 017860c0 System.Windows.Forms.NativeMethods+MSG[]
0012f2d0 0132e8f0 System.Windows.Forms.Application+ThreadContext
0012f2d8 01372050 System.Windows.Forms.Application+ComponentManager
0012f350 0132e8f0 System.Windows.Forms.Application+ThreadContext
0012f38c 01785a74 System.Windows.Forms.ApplicationContext
0012f428 012fd464 System.String    el02
0012f6f4 012f913c System.Object[]    (System.String[]) 
```

我唯一看到的是 InsFocusBI.Presentation.Controls.CustomListView 但我没有看到它是在另一个线程上创建的。

有什么建议吗？有人可以给出另一个想法或尝试吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2018-10-09T12:53:00.053

由于 SystemEvents.OnUserPreferenceChanged 导致的冻结问题是相当常见的错误，[这里](https://blogs.msdn.microsoft.com/dsui_team/2012/10/31/debugging-windows-forms-application-hangs-during-systemevents-userpreferencechanged/)是微软的解释和建议如何修复它。

这是您可以随时调用的函数（在冻结之前甚至之后），以找出订阅 SystemEvents 的哪些特定控件是在错误的线程上创建的，因此可能会冻结您的应用程序：

```
 private static void CheckSystemEventsHandlersForFreeze()
    {
        var handlers = typeof(SystemEvents).GetField("_handlers", BindingFlags.NonPublic | BindingFlags.Static).GetValue(null);
        var handlersValues = handlers.GetType().GetProperty("Values").GetValue(handlers);
        foreach (var invokeInfos in (handlersValues as IEnumerable).OfType<object>().ToArray())
        foreach (var invokeInfo in (invokeInfos as IEnumerable).OfType<object>().ToArray())
        {
            var syncContext = invokeInfo.GetType().GetField("_syncContext", BindingFlags.NonPublic | BindingFlags.Instance).GetValue(invokeInfo);
            if (syncContext == null) throw new Exception("syncContext missing");
            if (!(syncContext is WindowsFormsSynchronizationContext)) continue;
            var threadRef = (WeakReference) syncContext.GetType().GetField("destinationThreadRef", BindingFlags.NonPublic | BindingFlags.Instance).GetValue(syncContext);
            if (!threadRef.IsAlive) continue;
            var thread = (Thread)threadRef.Target;
            if (thread.ManagedThreadId == 1) continue;  // Change here if you have more valid UI threads to ignore
            var dlg = (Delegate) invokeInfo.GetType().GetField("_delegate", BindingFlags.NonPublic | BindingFlags.Instance).GetValue(invokeInfo);
            MessageBox.Show($"SystemEvents handler '{dlg.Method.DeclaringType}.{dlg.Method.Name}' could freeze app due to wrong thread: "
                            + $"{thread.ManagedThreadId},{thread.IsThreadPoolThread},{thread.IsAlive},{thread.Name}");
        }
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-24T15:37:11.917

好吧，您在非 UI 线程上遇到了控制“创建”的经典问题。

*   可能是您正在创建控件。
*   访问某些属性会在您不知情的情况下创建一个控件（很少见）。
*   在创建之前访问 Handle 属性（可能是间接的）。
*   被 InvokeRequired (ref 1), (ref 2) 愚弄。

关于这个主题的精彩阅读：（参考 1）（参考 2）和（参考 3）。

我不知道如何在转储中找到控件（我自己试过），但您可以尝试在代码中设置断点，如（参考 4）和（参考 5）中所述。

干杯。

**参考：**

1.  [神秘的挂起或 InvokeRequired 的大骗局](http://www.ikriv.com/en/prog/info/dotnet/MysteriousHang.html)

2.  [Control.Trifecta：InvokeRequired、IsHandleCreated 和 IsDisposed](http://www.aaronlerch.com/blog/2006/12/15/controltrifecta-invokerequired-ishandlecreated-and-isdisposed/)

3.  [.NET 2.0 WinForms 多线程和漫长的几天](http://www.aaronlerch.com/blog/2007/05/19/net-20-winforms-multithreading-and-a-few-long-days/)

4.  [调试界面](http://www.aaronlerch.com/blog/2008/12/15/debugging-ui/)

5.  [泄漏线程句柄的情况](http://msmvps.com/blogs/senthil/archive/2008/05/29/the-case-of-the-leaking-thread-handles.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-07-29T18:47:34.890

遵循 Vlad 代码，我找到了一种方法来取消订阅从主 UI 线程订阅的所有对象的系统事件。

这段代码对我有用，它解决了多年来处理系统事件的痛苦：

```
public static void UnsubscribeSystemEvents()
{
    try
    {
        var handlers = typeof(SystemEvents).GetField("_handlers", BindingFlags.NonPublic | BindingFlags.Static).GetValue(null);
        var handlersValues = handlers.GetType().GetProperty("Values").GetValue(handlers);
        foreach (var invokeInfos in (handlersValues as IEnumerable).OfType<object>().ToArray())
            foreach (var invokeInfo in (invokeInfos as IEnumerable).OfType<object>().ToArray())
            {
                var syncContext = invokeInfo.GetType().GetField("_syncContext", BindingFlags.NonPublic | BindingFlags.Instance).GetValue(invokeInfo);
                if (syncContext == null) 
                    throw new Exception("syncContext missing");
                if (!(syncContext is WindowsFormsSynchronizationContext))
                    continue;
                var threadRef = (WeakReference)syncContext.GetType().GetField("destinationThreadRef", BindingFlags.NonPublic | BindingFlags.Instance).GetValue(syncContext);
                if (!threadRef.IsAlive)
                    continue;
                var thread = (System.Threading.Thread)threadRef.Target;
                if (thread.ManagedThreadId == 1)
                        continue;  // Change here if you have more valid UI threads to ignore
                var dlg = (Delegate)invokeInfo.GetType().GetField("_delegate", BindingFlags.NonPublic | BindingFlags.Instance).GetValue(invokeInfo);
                var handler = (UserPreferenceChangedEventHandler)Delegate.CreateDelegate(typeof(UserPreferenceChangedEventHandler), dlg.Target, dlg.Method.Name);
                SystemEvents.UserPreferenceChanged -= handler;
            }
    }
    catch ()
    {                
        //trace here your errors
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T10:38:45.287

如果您还不知道如何检查这一点。查看此页面[Kim Greenlee 博客](http://krgreenlee.blogspot.com/2007/09/onuserpreferencechanged-hang.html)并尝试使用 spy++ 解决方案。也许它可以帮助你，我们有同样的问题，无法模拟挂起的应用程序的问题，但仍在研究它！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-19T16:26:12.213

我不得不在一个大型应用程序中死掉这个错误。错误的代码可能很难找到，因为错误的原因和影响可能相隔几分钟甚至几小时。

我稍微更改了 Vlad Rudenko 的答案，因此它提供了堆栈跟踪。这对我来说帮助很大。希望它可以帮助某人

[由 WindowsFormsSynchronizationContext 和 System.Events.UserPreferenceChanged 引起的 UI 冻结](https://stackoverflow.com/questions/70413177/ui-freeze-caused-by-windowsformssynchronizationcontext-and-system-events-userpre)

# java - 阅读内部静态类及其变量的最佳实践

> ID：10436982
> 
> 赞同：0
> 
> 时间：2012-05-03T18:06:58.903
> 
> 标签：java, web-services, jakarta-ee, struts, webservice-client

下面的代码是一个 Web 服务响应格式。这个类有两个引用变量到两个内部静态类。请让我知道如何以有效的方式阅读。

```
public class DataResponse {
      protected DataResponse.Head head ;
      protected DataResponse.Result result ;

      public static class Result {
         protected List<DataResponse.Result.Record> record;

          public static class Record {
             protected String businesstypec;
             protected String part
             // several other variables

                 public static class PARTR {
                       protected String prefix;
                       protected String suffix;
                 }
          }

         public static class Head {

          // some more variables
         }

      // please assume getter and setters for head,result,record,prefix and suffix variables
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T18:13:31.630

你得到你想要阅读的 of 并调用`instance`inside来得到那个，然后在那个内部类中调用（再次，）。看起来很有效率。`Record``public` `variable``class``instance``variable``public``variables`

```
 String firstPrefix = result.record.get(0).partrVariableThatsNotInYourExample.prefix; 
```

# python - 验证我对这个 python 代码片段的解释是否正确

> ID：10436983
> 
> 赞同：5
> 
> 时间：2012-05-03T18:07:06.297
> 
> 标签：python, code-snippets

我正在分析一组 python 脚本并遇到了这个片段。我不确定我的解释是否正确，因为我没有遇到任何类似的 C 或 Java 代码，而且我不了解 Python。

```
for i in xrange(self.num_sections):
        offset, a1,a2,a3,a4 = struct.unpack('>LBBBB', self.data_file[78+i*8:78+i*8+8])
        flags, val = a1, a2<<16|a3<<8|a4
        self.sections.append( (offset, flags, val) ) 
```

我的解释是这样的：

```
for each item in num_sections
  convert the data_file range into a big-endian unsigned long, and 4 unsigned char
  insert unpacked values into offset, a1, a2, a3 and a4 variables

  set flags to = a1
  set val to a2 shifted left 16 bits then OR'd with a3 shifted right 8 bits 
  then OR'd with a4 
```

本质上，我认为原始解包操作提取 8 个字节，将其中的 4 个转储为无符号长整数，然后将其余部分按顺序添加到 a* 变量中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T05:52:12.323

是的，你的解释是正确的。

# c# - 在 Flash 和 Win 表单应用程序之间发送文件的最佳方式

> ID：10436985
> 
> 赞同：0
> 
> 时间：2012-05-03T18:07:19.750
> 
> 标签：c#, actionscript-3, flash, embedded-flashplayer

我知道快速的通信方式是 ExternalInterface 类，但这以 XML 形式发送参数，可能会浪费内存并导致性能下降。

如何向嵌入在 C# WinForm 中的 Action-Script-3 应用程序发送/接收文件/数据？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-05-03T18:44:22.343

您可以结合使用 URLRequst 和 URLVariables 在闪存和任何服务器端文件之间交换数据。

```
var request:URLRequest = new URLRequest("<path to asp page>");

var variables:URLVariables = new URLVariables();

variables.content = content_var ;

request.data = variables;

request.method = URLRequestMethod.POST;

var urlLoader:URLLoader = new URLLoader();

urlLoader.addEventListener(Event.COMPLETE, onDataLoad)

urlLoader.load(request);

function onDataLoad(evt:Event) 
{
    trace ( evt.target.data)

    } 
```

# iphone - 将 NSData 发送到另一个进程而不仅仅是指针

> ID：10436998
> 
> 赞同：0
> 
> 时间：2012-05-03T18:07:53.473
> 
> 标签：iphone, objective-c, serialization, nsdata

> **可能重复：**
> [通过 Game Center 发送 NSString](https://stackoverflow.com/questions/9621898/send-nsstring-via-game-center)

我已经为此工作了两天，但没有得到任何结果，我希望有人能对这个问题有所了解。

1）我有一个 NSMUtableArray 2）数组中的每个元素都通过 [encoder encodeObject: myArray] 序列化；并将结果返回并分配给名为“cards”的结构“MessageMove”（NSData * 类型）MessageMove 消息；

……

```
typedef struct
{
    Message message;
    NSData  *cards;
} MessageMove; 
```

3）现在卡片已经转换为类型 NSData 我现在想对结构本身做同样的事情，我打电话

NSData *data = [NSData dataWithBytes:&message length:sizeof(message)];

4）最后我将数据发送给其他玩家如下

```
BOOL success = [[GCHelper sharedInstance].match sendDataToAllPlayers:data withDataMode:GKMatchSendDataReliable error:&error]; 
```

问题在于接收端根本没有得到任何卡片数据（MessageMove->cards）。这可能是因为 NSData * 没有被远程发送，而只是指向它的指针。

有谁知道我如何发送实际数据？我整天都在为这个问题挠头，不知道如何克服它

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T18:16:29.897

`MessageMove`创建一个符合`NSCoding`协议的 Objective-C 类。然后将其序列化为一个`NSData`对象，并在另一端反序列化它。有关详细信息，请参阅[我之前的回答](https://stackoverflow.com/questions/9621898/send-nsstring-via-game-center/9622017#9622017)。