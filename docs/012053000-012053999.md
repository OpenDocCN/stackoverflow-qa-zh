# StackOverflow 问答 12053000-12053999

# join - 如何在 Qlikview 中执行此操作？

> ID：12053000
> 
> 赞同：1
> 
> 时间：2012-08-21T10:30:46.587
> 
> 标签：join, qlikview

我有一个“All_Data”表，其中包含一个“HR Manager”列，它包含“Employee Name”。我需要获取不满足以下连接的行**（**即连接表中缺少的行）。

```
HR_Manager:
Load [HR Manager] as [HR Full Name]
Resident All_Data;

inner Join(HR_Manager)
Load [Full Name] as [HR Full Name]
Resident All_Data; 
```

有谁知道我如何在 Qlikview 中做到这一点？

谢谢，莉娜

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T13:08:56.827

你比我早了 1 分钟 Francesco，但你确实忘记了最后的分号；）

```
HR_Manager:
Load [HR Manager] as [HR Full Name]
Resident All_Data;

inner Join(HR_Manager)
Load [Full Name] as [HR Full Name]
Resident All_Data;

AllTheOthers:

Load [Full Name] as [Employee Name]
resident All_Data
where not exists ([Full Name]); 
```

如果这不是您正在寻找的东西，那么以下可能会起作用

```
HR_Manager:
Load [HR Manager] as [HR Managers that are not employees]
Resident All_Data
Where not exists ([HR Manager],[Full Name]); 
```

这将创建一个包含 HR Manager 字段中存在但未出现在 Full Name 字段中的所有人员的表。

希望这可以帮助，

詹姆士。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T13:01:30.480

```
HR_Manager:
Load [HR Manager] as [HR Full Name]
Resident All_Data;

inner Join(HR_Manager)
Load [Full Name] as [HR Full Name]
Resident All_Data;

AllTheOthers:

Load [Full Name] as [Employee Name]
resident All_Data
where not exists ([Full Name]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T11:23:58.283

我认为 [Full Name] 是您在文本中提到的“员工姓名”字段。

这是你想要表达的吗？：

```
New_Table:
Load [HR Manager] as [HR Full Name]
Resident All_Data
Where [HR Manager] <> [Full Name]; 
```

干杯，西蒙

# jsf - Richfaces：将 rich:comboBox 限制为值列表的值

> ID：12053001
> 
> 赞同：5
> 
> 时间：2012-08-21T10:30:48.670
> 
> 标签：jsf, richfaces

我的页面中有以下简单的组合框。

```
<rich:comboBox value="#{groupConfig.group}"
               styleClass="userCombo"
               filterNewValues="false"
               directInputSuggestions="true">
  <f:selectItems value="#{
    workflowConfigCtrl.groupsFor(groupConfig,appNode.approvalTier)
  }" />
</rich:comboBox> 
```

它工作得非常好，但遗憾的是它允许输入不属于建议列表的值（这是有道理的，因为我启用了直接文本输入。

我希望启用直接文本输入，以便用户可以使用建议列表进行快速过滤（从可以包含数百个组的巨大组列表中）。

同时我不希望用户输入不在列表中的值。当前方法检查用户何时保存整个表单。有什么办法可以提前限制吗？

我尝试使用 javascript onblur= 处理程序来做到这一点，但我找不到在 dom 中保存 selectItem 列表的位置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T18:25:19.977

您可以使用 javascript 访问组合框列表

```
#{rich:component('myComboBoxId')}.comboList.itemsText 
```

和/或

```
#{rich:component('myComboBoxId')}.comboList.itemsValue 
```

然后用于`jQuery.inArray()`验证该项目是否在列表中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T17:54:08.907

您应该能够通过指定其 ID 来访问 DOM 中的此组合框，如下例所示。

```
<rich:comboBox value="#{groupConfig.group}"
               id="UniqueID"
               styleClass="userCombo"
               filterNewValues="false"
               directInputSuggestions="true">
  <f:selectItems value="#{
    workflowConfigCtrl.groupsFor(groupConfig,appNode.approvalTier)
  }" />
</rich:comboBox> 
```

然后您可以使用`document.getElementById("UniqueID")`它在 DOM 中访问它。

# python - Pandas Pytables 警告和性能缓慢

> ID：12053003
> 
> 赞同：4
> 
> 时间：2012-08-21T10:30:56.633
> 
> 标签：python, performance, pandas, hdf5, pytables

我一直在为一些大型金融数据集测试 pandas 和 pytables，并遇到了一个真正的绊脚石：

当存储在 pytables 文件中时，pandas 似乎将多维数据存储在非常长的行中，而不是列中。

尝试这个：

```
from pandas import *
df = DataFrame({'col1':randn(100000000),'col2':randn(100000000)})
store = HDFStore('test.h5')
store['data'] = df    #should be a warning here about exceeding the maximum recommended rowsize
store.handle 
```

输出：

```
File(filename=test7.h5, title='', mode='a', rootUEP='/', filters=Filters(complevel=0, shuffle=False, fletcher32=False))
/ (RootGroup) ''
/data (Group) ''
/data/axis0 (Array(2,)) ''
  atom := StringAtom(itemsize=4, shape=(), dflt='')
  maindim := 0
  flavor := 'numpy'
  byteorder := 'irrelevant'
  chunkshape := None
/data/axis1 (Array(100000000,)) ''
  atom := Int64Atom(shape=(), dflt=0)
  maindim := 0
  flavor := 'numpy'
  byteorder := 'little'
  chunkshape := None
/data/block0_items (Array(2,)) ''
  atom := StringAtom(itemsize=4, shape=(), dflt='')
  maindim := 0
  flavor := 'numpy'
  byteorder := 'irrelevant'
  chunkshape := None
/data/block0_values (Array(2, 100000000)) ''
  atom := Float64Atom(shape=(), dflt=0.0)
  maindim := 0
  flavor := 'numpy'
  byteorder := 'little'
  chunkshape := None 
```

我不完全确定，但我认为结合错误消息，Array(2,100000000) 表示具有 2 行和 100,000,000 列的二维数组。这也是它在 HDFView 中的显示方式。

我一直在经历极其糟糕的表现（在某些情况下， data['ticks'].head() 需要 10 秒），这是什么原因？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T22:38:41.550

我已经在 GitHub 上交叉链接了这个问题：

[http://github.com/pydata/pandas/issues/1824](http://github.com/pydata/pandas/issues/1824)

我个人并没有意识到这个问题，坦率地说，对于 PyTables 或 HDF5（无论谁是罪魁祸首）来说，这有点令人失望。

# xcode - facebook iOS - 分享 - 在墙上发帖时不显示应用程序图标

> ID：12053015
> 
> 赞同：0
> 
> 时间：2012-08-21T10:31:43.077
> 
> 标签：xcode, facebook, icons, share, photo

我按照 developer.facebook.com 上的登录和分享教程进行操作，在墙上发帖时，应用程序图标不会出现在帖子上。它只显示标签和用户输入文本。如何使该应用程序图标显示？它必须上传还是我配置的东西？在发布任何答案或建议之前，我已经将照片上传到 developers.facebook 仪表板。提前谢谢你.. [http://developers.facebook.com/docs/howtos/publish-to-feed-ios-sdk/](http://developers.facebook.com/docs/howtos/publish-to-feed-ios-sdk/)：

```
self.postParams =
    [[NSMutableDictionary alloc] initWithObjectsAndKeys:
     @"https://developers.facebook.com/ios", @"link",
     @"https://developers.facebook.com/attachment/iossdk_logo.png", @"picture",
     @"Facebook SDK for iOS", @"name",
     @"Build great social apps and get more installs.", @"caption",
     @"The Facebook SDK for iOS makes it easier and faster to develop Facebook integrated iOS apps.", @"description",
     nil]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T11:53:32.647

对于任何有同样问题的人..只需将图标上传到照片共享网站（如照片桶）并将该链接分配给代码..

# android - 如何在 android 的 ListView 项目中添加切换按钮？

> ID：12053020
> 
> 赞同：0
> 
> 时间：2012-08-21T10:31:49.177
> 
> 标签：android, listview, listactivity, togglebutton

我正在使用 Android 应用程序，使用 ListActivity 创建 ListView 然后我尝试在 ListItems 中添加 ToggleButton，但我不知道，请帮助我

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T10:36:13.467

以下是您可以创建自定义 ListView 的步骤：

1.  为您想要的 ListView 项目创建行布局
2.  通过创建一个单独的类来创建自定义适配器，并**扩展**`BaseAdapter`
3.  覆盖`getView()`方法，膨胀上述项目行布局并显示数据

更多信息：[android custom listview](https://www.google.co.in/search?q=android+custom+listview)如果你想了解：[AdapterViews and Adapters](http://commonsware.com/Android/excerpt.pdf)

# jquery - MVC DateTime 验证 - 英国日期格式

> ID：12053022
> 
> 赞同：39
> 
> 时间：2012-08-21T10:31:58.647
> 
> 标签：jquery, asp.net-mvc-3, validation

我有一个简单的视图，其中包含两个日期字段，并为不显眼的 JavaScript 验证添加了 ValidationMessageFor 控件。

我的问题是我一直被告知我的日期无效，但格式正确（dd/MM/yyyy）

我已添加`<globalization culture="en-GB" uiCulture="en-GB"/>`到我的 web.config 中，并且还包含`[DisplayFormat(DataFormatString = "{0:dd/MM/yyyy}", ApplyFormatInEditMode = true)]`在每个 DateTime 属性中，但它仍然不接受英国格式的日期。

我在这里有什么明显的遗漏吗？

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2012-12-29T12:06:38.393

实际上你只需要为日期重载不显眼的 JavaScript 验证方法

```
jQuery(function ($) {
    $.validator.addMethod('date',
    function (value, element) {
        if (this.optional(element)) {
            return true;
        }

        var ok = true;
        try {
            $.datepicker.parseDate('dd/mm/yy', value);
        }
        catch (err) {
            ok = false;
        }
        return ok;
    });
}); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-07-31T01:59:03.840

Bohdan 的例子很有效！我已经 +1 你的回答伙伴。

为了完整起见，我写了一篇关于如何集成所有部分（模型、视图、自定义 EditorTemplate、jQuery 包括并添加 Bohdan 的解决方案）的博客文章。

你可以在这里阅读：http: [//www.kestrelblackmore.com/blog/jquery-datepicker-mvc4](http://www.kestrelblackmore.com/blog/jquery-datepicker-mvc4)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-02-18T16:43:27.930

我知道它很旧，但使用它我在输入中添加了一个具有当前日期格式的属性（我使用 CultureInfo.CurrentCulture.DateTimeFormat.ShortDatePattern.ToLower() 从 ASP MVC 代码中获取）。

然后我重写了验证 javascript 以使用属性中找到的格式。

```
 var format = "mm/dd/yyyy";
        if (element.attributes["data-format"]) {
            format = element.attributes["data-format"].value;
        } 
```

我还为 jquery ui datepicker 阅读了相同的属性。它可能没有那么有用，但它至少可以使格式与文化保持一致。虽然它可以帮助某人

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-02-26T23:01:36.647

与其他答案相比，我采取了不同的方法来解决这个问题。使用 jQuery 添加一个新的日期函数，该函数将强制日期使用应用程序中设置的当前本地文化。

```
$.validator.addMethod('date', function (value, element) {
                var d = new Date();
                return this.optional(element) || !/Invalid|NaN/.test(new Date(d.toLocaleDateString(value)));
            }); 
```

也就是说，如果它在 jQuery 验证上失败。我将此答案归功于 Elton Stoneman 的帖子，可以在[此处阅读](http://geekswithblogs.net/EltonStoneman/archive/2009/10/29/jquery-date-validation-in-chrome.aspx)

希望这对其他人有帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-06-06T09:32:16.383

尝试在 jquery.validate.js 中直接更改。使用 $.datpicker

```
date: function (value, element) {
    var s = value;

    var ind2 = 3;
    var ind3 = 6;
    var ind4 = 4;

    if (s.substr(6, 1) != "2") {
        ind2 = ind2 + 1;
        ind3 = ind3 + 1;
        ind4 = ind4 + 1;
    }

    var ndan = s.substr(0, 2);
    var nmje = s.substr(ind2, 2);
    var ngod = s.substr(ind3, ind4);

    var ns = ngod + "," + nmje + "," + ndan;

    return this.optional(element) || !/Invalid|NaN/.test(new Date(ns)); 
```

# c++ - 在与实例化对象的文件不同的文件中调用函数

> ID：12053023
> 
> 赞同：0
> 
> 时间：2012-08-21T10:32:00.253
> 
> 标签：c++

我有三个文件。

**file 1** 这个有类定义，类中的所有方法也都在这里定义

**文件2** 上面类的对象在这里实例化

**文件 3** 在这里，我想使用文件 2 中创建的对象调用其中一种方法

我正在尝试做上述事情是因为我希望代码是模块化的。有一个更好的方法吗？您可以发布您可能拥有的任何其他解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T10:35:27.230

将您的定义放入头文件（通常为 .h）：

```
//header File1.h
class File1
{
    void Foo();
}; 
```

包含定义并在另一个文件中实现它（通常是 .cpp）

```
//File1.cpp
#include "File1.h"

File1::Foo()
{

} 
```

然后在标题中包含您要使用的定义

```
//File2.cpp

#include "File1.h"

File1 file1;
file1.Foo(); 
```

请记住，两个翻译单元必须链接在一起。

# android - 让自定义适配器从 addHeaderView() 跳过标题

> ID：12053026
> 
> 赞同：0
> 
> 时间：2012-08-21T10:32:21.923
> 
> 标签：android, android-cursoradapter, android-listfragment

我有一个 ListFragment，它使用 cursorLoader 和自定义适配器来填充列表中的视图。该列表包含特定乐队的专辑，理想情况下，列表顶部（标题）将显示乐队名称和“所有歌曲”或类似内容。

问题是，当我使用 addHeaderView() 将标题添加到列表时，适配器将标题视为列表中的另一个项目，并尝试使用理想情况下仅填充标题下方行的信息来填充它。

我尝试在适配器的 bindView 中使用以下内容：

```
if (cursor.getPosition() == 0)) {
return; }
else {bind the rest of the views} 
```

但它似乎表现得很奇怪 - 有时不绑定前两行中的任何一个..

下面是一些代码片段：

在 listFragment 内：

```
 albumsAdapter = new AlbumAdapter(getActivity(), null, 0);

    setListAdapter(null);

    if (showHeader) {
        ViewGroup parent = (ViewGroup) getActivity().findViewById(
                R.id.relativeLayoutTest);
        View view = (View) getActivity().getLayoutInflater().inflate(
                R.layout.albumitem, parent, true);
        TextView textView = (TextView) getActivity().findViewById(
                R.id.artistTitle);
        textView.setText("Artist");

        getListView().addHeaderView(view);

    }

    setListAdapter(albumsAdapter); 
```

和自定义适配器：

```
package another.music.player;

/*  imports etc
*/

class AlbumAdapter extends CursorAdapter {

public AlbumAdapter(Context context, Cursor c, int flags) {
    super(context, c, flags);
}

private static Uri currentSongUri;

@Override
public void bindView(View view, Context context, Cursor cursor) {

    ImageView albumArt = (ImageView) view.getTag(R.id.albumArt);
    TextView text1 = (TextView) view.getTag(R.id.artistTitle);
    TextView text2 = (TextView) view.getTag(R.id.albumTitle);

    albumArt.setImageBitmap(null);

    text1.setText(cursor.getString(cursor
            .getColumnIndex(AudioColumns.ARTIST)));
    text2.setText(cursor.getString(cursor
            .getColumnIndex(AudioColumns.ALBUM)));

    String currentAlbumId = cursor.getString(cursor
            .getColumnIndex(BaseColumns._ID));

    Integer currentAlbumIdLong = Integer.parseInt(currentAlbumId);
    Uri artworkUri = Uri.parse("content://media/external/audio/albumart");
    currentSongUri = ContentUris.withAppendedId(artworkUri,
            currentAlbumIdLong);

    ImageLoader imageLoader = new ImageLoader();
    imageLoader.load(currentSongUri, albumArt, context);

}

@Override
public View newView(Context context, Cursor cursor, ViewGroup parent) {

    LayoutInflater inflater = LayoutInflater.from(context);
    View view = inflater.inflate(R.layout.albumitem, null);
    view.setTag(R.id.albumArt, view.findViewById(R.id.albumArt));
    view.setTag(R.id.artistTitle, view.findViewById(R.id.artistTitle));
    view.setTag(R.id.albumTitle, view.findViewById(R.id.albumTitle));

    return view;
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:17:35.750

如我所见，您的 headerView 使用与适配器相同的布局文件。更改它的名称和里面的视图 ID。这将解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T15:05:50.933

添加条件`getView`并返回位置 0 的视图

```
 if (position == 0) {
                // Add the header for creating a new contact
                return getLayoutInflater().inflate(R.layout.header, parent, false);
            } 
```

# javascript - 在 Javascript 函数中声明通用 ID

> ID：12053027
> 
> 赞同：0
> 
> 时间：2012-08-21T10:32:25.017
> 
> 标签：javascript, function

我有以下功能用于更改给定 DIV 上的 CSS 显示

```
function(){

    if(document.getElementById('kitstory').style.display === "none")
        {
            document.getElementById('kitstory').style.display = "block";
        } else{
            document.getElementById('kitstory').style.display = "none";
        }
    } 
```

我在链接中使用 onclick 在需要时调用该函数。

这在我的 ID 为“kitstory”的 DIV 上运行良好，但是有没有办法可以将此功能用于多个 DIV（我将在 1 页上使用不同的 DIV 有几篇文章我希望该功能生效）？我试过将 id 留空，但它没有运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T10:34:47.010

但是当然！例如：

```
function toggleSingle(elementId) {
  var el = document.getElementById(elementId);
  if (el.style.display === 'none') {
    el.style.display = 'block';
  }
  else {
    el.style.display = 'none';
  }
} 
```

这个函数可以被另一个函数使用，它与集合一起工作：

```
function toggleMultiple(elementIds) {
  if (! (elementIds && elementIds[0]) ) {
    // elementIds is not an array, should exit (and warn the developer as well perhaps)
    return;
  }
  for (var i = 0, l = elementIds.length; i < l; ++i) {
    toggleSingle(elementIds[i]);
  }
} 
```

为什么我把它写成两个函数而不是一个？好的，在这种情况下，这可能是一种矫枉过正，但总的来说，我经常将“单个”项目处理分离到一个单独的函数中：它使我的代码更具可读性，并且我的测试更简单。尽管如此，我们仍然可以用这样的方式编写一个无所不能的函数：

```
function toggleSmart() {
  for (var i = 0, l = arguments.length; i < l; ++i) {
    var el = document.getElementById(arguments[i]);
    if (el.style.display === 'none') {
      el.style.display = 'block';
    }
    else {
      el.style.display = 'none';
    }
    // and another way to do it: more concise, but less readable for some:
    // var display = el.style.display;
    // display = display === 'none' 
    //        ? 'block' 
    //        : 'none';
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T10:35:01.660

有多种方法可以实现这一目标。我能想到的最简单的方法是使用`getElementsByTagName`或`getElementsByClassName`遍历列表，或者使用像[jQuery这样的框架](http://api.jquery.com/category/selectors/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T10:35:16.147

您可以使用以下方法之一：

```
document.getElementsByClassName('some-class');

document.getElementsByTagName('div'); 
```

例如：

```
var elements = document.getElementsByClassName('kitstory');
for(var i = 0, l = elements.length; i < l; i++) {
    elements[i].style.display = (elements[i].style.display == 'none') ? 'block' : 'none';
} 
```

如果类名或标签名不能立即帮助您定位所需的元素，您也可以更改`document`为其他内容：

```
var elements = document.getElementById('my-container').getElementsByTagName('div'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T10:35:18.160

试试这个：

```
function yourAction() {
    if(this.style.display === "none") {
        ...
    }
}

var i, len;
for(i = 0, len = document.getElementsByTagName("div"); i < len; i++) {
    document.getElementsByTagName("div")[i].onclick = yourAction;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T10:36:21.077

试试这个

```
function change(id){

if(document.getElementById(id).style.display === "none")
    {
        document.getElementById(id).style.display = "block";
    } else{
        document.getElementById(id).style.display = "none";
    }
} 
```

然后用 change(divID) 调用函数；

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-21T10:36:21.250

创建一个命名函数并将 id 作为参数发送给函数：

```
function Toggle(id){
  var element = document.getElementById(id);
  if (element.style.display === "none") {
    element.style.display = "block";
  } else{
    element.style.display = "none";
  }
} 
```

用法：

```
Toggle('kitstory'); 
```

# android - Facebook 在 android 中多次返回运行应用程序的数据

> ID：12053030
> 
> 赞同：0
> 
> 时间：2012-08-21T10:32:44.077
> 
> 标签：android, facebook

我正在尝试检索我的 Facebook 页面信息。但是当我第一次安装并运行该应用程序时，它给了我。

```
{"error":{"message":"An active access token must be used to query information about the current user.","type":"OAuthException","code":2500}} 
```

下次我运行应用程序时，它会返回正确的结果。为什么会这样。我希望它在安装后第一次运行应用程序时返回数据。

这是我的 Facebook sdk 代码：

```
private String access_Token="";
private final String APP_ID="MY_APP_ID";
private final String[] PERMS = new String[] { "publish_stream","manage_pages" };
private Bundle params=new Bundle();
private SharedPreferences sharedPrefs;
private AsyncFacebookRunner mAsyncRunner;
private Facebook mfacebook;
private TextView view;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    view=(TextView)findViewById(R.id.Mozi);

    this.SetConnection();                               //Initialize Fb
    this.getAccessToken();                              //GetAccessToken
    this.CheckSessionExpiry();                          //Create Session with permissions if expired
    this.RetrieveUserPages();
//  this.EnableFBLogout();
}

public void onResume() {
    super.onResume();
    mfacebook.extendAccessTokenIfNeeded(this, null);
}

private void EnableFBLogout()
{
    mAsyncRunner.logout(getApplicationContext(), new RequestListener() {
          @Override
          public void onComplete(String response, Object state) {

                 String method = "DELETE";
                 Bundle params = new Bundle();
                 /*
                  * this will revoke 'publish_stream' permission
                  * Note: If you don't specify a permission then this will de-authorize the application completely.
                  */
                 params.putString("permission", "publish_stream");
                 mAsyncRunner.request("/me/permissions", params, method,new RequestListener() {

                    @Override
                    public void onMalformedURLException(MalformedURLException e, Object state) {
                        // TODO Auto-generated method stub
                        Log.e("PerMalform",e.getMessage());
                    }

                    @Override
                    public void onIOException(IOException e, Object state) {
                        // TODO Auto-generated method stub
                        Log.e("PerMalform",e.getMessage());

                    }

                    @Override
                    public void onFileNotFoundException(FileNotFoundException e, Object state) {
                        // TODO Auto-generated method stub
                        Log.e("PerMalform",e.getMessage());

                    }

                    @Override
                    public void onFacebookError(FacebookError e, Object state) {
                        // TODO Auto-generated method stub
                        Log.e("PerMalform",e.getMessage());

                    }

                    @Override
                    public void onComplete(String response, Object state) {
                        // TODO Auto-generated method stub
                        Log.e("PerMalform",response);

                    }
                }, null);

          }

          @Override
          public void onIOException(IOException e, Object state) {}

          @Override
          public void onFileNotFoundException(FileNotFoundException e,
                Object state) {}

          @Override
          public void onMalformedURLException(MalformedURLException e,
                Object state) {}

          @Override
          public void onFacebookError(FacebookError e, Object state) {}
        });
}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    this.mfacebook.authorizeCallback(requestCode, resultCode, data);
}

private void getAccessToken()
{
    sharedPrefs= getPreferences(MODE_PRIVATE);
    String access_token = sharedPrefs.getString("access_token", null);
    long expires = sharedPrefs.getLong("access_expires", 0);
    if(access_token != null) {
        mfacebook.setAccessToken(access_token);
    }
    if(expires != 0) {
        mfacebook.setAccessExpires(expires);
    }
}

private void CheckSessionExpiry()
{
      if(!mfacebook.isSessionValid()) {

          mfacebook.authorize(this, this.PERMS , new DialogListener() {
              @Override
              public void onComplete(Bundle values) {
                  SharedPreferences.Editor editor = sharedPrefs.edit();
                  editor.putString("access_token", mfacebook.getAccessToken());
                  editor.putLong("access_expires", mfacebook.getAccessExpires());
                  editor.commit();
              }

              @Override
              public void onFacebookError(FacebookError error) {
                  Log.e("mozi1",error.toString());
              }

              @Override
              public void onError(DialogError e) {
                  Log.e("mozi2",e.toString());

              }

              @Override
              public void onCancel() { 

                  Log.e("sad","ww");
              }
          });
      }
  }

private void SetConnection()

{
    this.mfacebook=new Facebook(this.APP_ID);
    this.mAsyncRunner=new AsyncFacebookRunner(mfacebook);
}

private void  RetrieveUserPages()
{
    this.params.putString(Facebook.TOKEN, mfacebook.getAccessToken());
    this.mAsyncRunner.request("me/accounts", this.params, "GET", new RequestListener() {

        @Override
        public void onMalformedURLException(MalformedURLException e, Object state) {
            // TODO Auto-generated method stub
            Log.e("Malformed",e.getMessage());

        }

        @Override
        public void onIOException(IOException e, Object state) {
            // TODO Auto-generated method stub
            Log.e("IO",e.getMessage());

        }

        @Override
        public void onFileNotFoundException(FileNotFoundException e, Object state) {
            // TODO Auto-generated method stub
            Log.e("FNF",e.getMessage());

        }

        @Override
        public void onFacebookError(FacebookError e, Object state) {
            // TODO Auto-generated method stub
            Log.e("FBERR",e.getMessage());

        }

        @Override
        public void onComplete(String response, Object state) {
            // TODO Auto-generated method stub
            Log.i("responsefromFB",response);       //here the response is an error for the first time and data the second time.
        //  view.setText(response);                             
        }
    }, null);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T18:47:30.233

`mfacebook.authorize()`是异步的，这意味着`authorize()`方法运​​行之后的代码即使`authorize()`没有完成。因为你`this.RetrieveUserPages()`马上打电话`mfacebook.authorize()`，你在打电话

```
 this.params.putString(Facebook.TOKEN, mfacebook.getAccessToken()); 
```

*before* `mfacebook.authorize()`已经完成，所以`mfacebook.getAcessToken()`返回null。

您的问题的答案是**只**调用方法以确保在尝试检索之前设置您的访问令牌`this.RetrieveUserPages()`。`onComplete``mfacebook.authorize()`

让我知道这是否有帮助！

# ruby-on-rails - Devise 2.1 默认不加盐吗？

> ID：12053033
> 
> 赞同：2
> 
> 时间：2012-08-21T10:32:54.203
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, devise, mongoid

设计将可[加密模块移动到不同的 gem](https://github.com/plataformatec/devise-encryptable)。但是，他们声明 Bcrypt 默认情况下已经使用了盐。我有点困惑。不添加`:encryptable`到我的模型中，它们是咸的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T10:39:29.083

:encryptable 用于默认以外的加密方法。默认加密方法 bcrypt 是加盐的。这是一个 Devise 可以使用的接口，因此您还可以定义其他加密方法。

请参阅[bcrypt 如何具有内置盐？](https://stackoverflow.com/questions/6832445/how-can-bcrypt-have-built-in-salts)有关盐的详细信息及其储存方式。

# django - 使用 django 上传多个图像，同时为每个图像保留唯一的文件名和日期时间

> ID：12053036
> 
> 赞同：1
> 
> 时间：2012-08-21T10:33:02.737
> 
> 标签：django, datetime

所以我做了一个画廊网页，支持一次上传多张图片。问题是我已经做到了，因此任何上传的图像都会获得像 [username]_[unix timestamp].jpg 这样的文件名

查看所有上传的图像时，图像按日期排序。最初，当上传大量图像时，这是一个问题，因为它们都有非常相似的日期时间戳。下降到同一秒。我使用 get_next_by_date() 和 get_previous_by_date() 来浏览图像，当许多图像存储到同一秒时，这并不能很好地工作。

另一个问题是，由于图像处理通常以每秒三张图像的速度完成，因此三张和三张图像获得相同的 unix 时间戳。这导致在第二个中第一个处理的相同图像在站点上显示三次，而不是在同一秒后处理的其他图像。（当操作系统发现文件名已被使用时，它给文件一个不同的名称，但数据库仍将原始时间戳存储到文件名中）。

到目前为止，我已经通过在处理每个图像后弹出 time.sleep(1) 来“解决”问题，以保证为每个图像启动一个新的秒，但这只是让我感觉很糟糕。然后保证要上传 60 张图像需要 60 秒，而它不应该超过 10-20 秒。

谁能想到解决这个问题？如何确保按日期排序的图像在查看图像时可以获得正确的顺序，并且所有图像的 unix 时间戳都是唯一的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T12:08:07.647

最安全的方法是在您的文件名中添加一个哈希。这也可以防止攻击者猜测您的文件名，这通常是一件好事。

```
def upload_to_name(instance, filename):
    name = hashlib.sha1(str(instance.id) + str(random.random())).hexdigest()
    return 'path_to_the_folder/%s.%s' % (path, name, filename.split('.')[-1]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T10:54:14.703

将毫秒添加到时间戳。如果它没有帮助 - 将图像哈希添加到文件名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T11:06:15.853

您也可以使用毫秒从时间戳创建文件名。

使用`strftime`毫秒为文件名创建字符串：

```
>>>import datetime from datetime
>>>date1=datetime.utcnow()
>>>date1.strftime("%Y_%m_%d_%H_%M_%S_%f")
'2012_08_21_05_55_25_302249' 
```

# maven - maven 2 问题

> ID：12053037
> 
> 赞同：1
> 
> 时间：2012-08-21T10:33:03.593
> 
> 标签：maven

当我尝试运行 mvn clean install -P embedded 时出现以下错误，我以前从未使用过 Maven，实际上几乎不明白它试图告诉我什么。有人可以帮我解决吗？

```
 [FATAL ERROR] org.apache.maven.plugin.clean.CleanMojo#execute() caused a linkage error (java.lang.NoClassDefFoundError) and may be out-of-date. Check the realms:
[FATAL ERROR] Plugin realm = app0.child-container[org.apache.maven.plugins:maven-clean-plugin:2.2]
urls[0] = file:/Users/andrejcek/.m2/repository/org/apache/maven/plugins/maven-clean-plugin/2.2/maven-clean-plugin-2.2.jar
urls[1] = file:/Users/andrejcek/.m2/repository/org/codehaus/plexus/plexus-utils/1.1/plexus-utils-1.1.jar
urls[2] = file:/Users/andrejcek/.m2/repository/org/apache/maven/shared/file-management/1.2/file-management-1.2.jar
urls[3] = file:/Users/andrejcek/.m2/repository/org/apache/maven/shared/maven-shared-io/1.1/maven-shared-io-1.1.jar
[FATAL ERROR] Container realm = plexus.core
urls[0] = file:/usr/share/maven/lib/maven-2.2.0-uber.jar
[INFO] ------------------------------------------------------------------------
[ERROR] FATAL ERROR
[INFO] ------------------------------------------------------------------------
[INFO] org/apache/maven/shared/io/logging/MessageSink
org.apache.maven.shared.io.logging.MessageSink
[INFO] ------------------------------------------------------------------------
[INFO] Trace
java.lang.NoClassDefFoundError: org/apache/maven/shared/io/logging/MessageSink
    at org.apache.maven.plugin.clean.CleanMojo.execute(CleanMojo.java:171)
    at org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPluginManager.java:483)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:678)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalWithLifecycle(DefaultLifecycleExecutor.java:540)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(DefaultLifecycleExecutor.java:519)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHandleFailures(DefaultLifecycleExecutor.java:371)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegments(DefaultLifecycleExecutor.java:332)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecycleExecutor.java:181)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:356)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:137)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:362)
    at org.apache.maven.cli.compat.CompatibleMain.main(CompatibleMain.java:41)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)
    at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)
    at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)
    at org.codehaus.classworlds.Launcher.main(Launcher.java:375)
Caused by: java.lang.ClassNotFoundException: org.apache.maven.shared.io.logging.MessageSink
    at java.net.URLClassLoader$1.run(URLClassLoader.java:200)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:188)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:315)
    at org.codehaus.classworlds.RealmClassLoader.loadClassDirect(RealmClassLoader.java:195)
    at org.codehaus.classworlds.DefaultClassRealm.loadClass(DefaultClassRealm.java:255)
    at org.codehaus.classworlds.DefaultClassRealm.loadClass(DefaultClassRealm.java:274)
    at org.codehaus.classworlds.RealmClassLoader.loadClass(RealmClassLoader.java:214)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:250)
    at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:398)
    ... 20 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-04T09:31:33.600

我遇到了同样的问题，但后来我找到了非常简单的解决方案。

[step1 - 从http://maven.apache.org/download.cgi](http://maven.apache.org/download.cgi)下载所需的 maven 文件夹（我已经下载了 Maven 2.2.1 (Binary tar.gz)）

第 2 步 - 提取 tar 并将文件夹放到您想要的位置（即 /usr/lib/）

step3 - 更新你使用它的maven路径（在我的例子中是.bashrc）

基本上问题是您的 Maven 已损坏，您需要按照上述步骤来解决它。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T10:54:30.747

检查您是否正确设置了 M2_HOME 变量，如[安装说明](http://maven.apache.org/download.html)中所述。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T10:45:53.757

您的 Maven 安装已损坏。卸载它，重新下载 maven，确认 md5 校验和匹配，安装它并重试。

（[类似的问题线程](http://maven.40175.n5.nabble.com/Maven-Install-on-Mac-OS-X-td82913.html)）

编辑：另一种选择是您从损坏的回购中下载了一些东西。如果重新安装 maven 不能解决问题，请检查您是否使用了有问题的存储库（最好在此处报告您配置的 pom 依赖项）。也有过[这样的案例](http://markmail.org/thread/mkuojf4axc75y2dq#query%3a+page:1+mid%3ang6essmfnspfvadp+state%3aresults)。

# blackberry - Blackberry 中的“尝试访问安全 API”错误 - Phonegap

> ID：12053039
> 
> 赞同：2
> 
> 时间：2012-08-21T10:33:10.487
> 
> 标签：blackberry, cordova

当我尝试在 Blackberry 设备中安装我的 phonegap 应用程序时，它显示了一个错误，例如“尝试访问安全 API”。

但相同的应用程序在“黑莓模拟器”中正常运行。

如何解决此错误？

请帮忙...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T10:59:03.273

在将应用程序安装到实际设备上之前，您忘记对应用程序进行签名。未签名的应用程序可以在模拟器上运行，但您需要对其进行签名才能在实际设备上运行。

在此处获取您的签名密钥：[https ://www.blackberry.com/SignedKeys/codesigning.html](https://www.blackberry.com/SignedKeys/codesigning.html)

**编辑**：更新了签名密钥链接，因为 RIM (BlackBerry) 已经更新了他们的网站并且旧链接指向 404 错误页面。

# .net - .NET CTP5 代码优先 EF。LazyLoading 设置为 False 仍然不会导致一对一的显式加载

> ID：12053041
> 
> 赞同：0
> 
> 时间：2012-08-21T10:33:17.697
> 
> 标签：.net, asp.net-mvc-3, code-first, one-to-one, entity-framework-5

我有以下（vb.net）模型类：

```
Public Class Contact
    Implements IModelEntity

    Public Property ID() As Integer

    Public Property Name() As String
    Public Overridable Property ContactDetails() As ContactDetails

    Public Sub New()
        ID = 0
        Name = ""
        ContactDetails = New ContactDetails
    End Sub
End Class

Public Class Person
    Inherits Contact
    Implements IModelEntity

    Public Property Surname() As String
    Public Property DOB() As DateTime

    Public Sub New()
        Surname = ""
        DOB = DateTime.Today
    End Sub
End Class

Public Class ContactDetails
    Implements IModelEntity

    Public Property ID() As Integer

    Public Property WebAddresses() As List(Of WebAddress)
    Public Property PhoneNumbers() As List(Of PhoneNumber)
    Public Property EmailAddresses() As List(Of String)
    Public Property SocialMediaAliases() As List(Of SocialMediaAlias)
    Public Property PostalAddresses() As List(Of PostalAddress)

    Public Sub New()
        ID = 0
        WebAddresses = New List(Of WebAddress)
        PhoneNumbers = New List(Of PhoneNumber)
        EmailAddresses = New List(Of String)
        SocialMediaAliases = New List(Of SocialMediaAlias)
        PostalAddresses = New List(Of PostalAddress)
    End Sub
End Class

Public Class eCRMContext
    Inherits DbContext

    Public Sub New()
        Me.Configuration.LazyLoadingEnabled = False
    End Sub

    Protected Overrides Sub OnModelCreating(modelBuilder As System.Data.Entity.DbModelBuilder)
        MyBase.OnModelCreating(modelBuilder)

        modelBuilder.Entity(Of Contact).HasRequired(Function(x) x.ContactDetails).WithOptional().WillCascadeOnDelete()
    End Sub

    Public Property ContactDetailsSet As DbSet(Of ContactDetails)
    Public Property Persons As DbSet(Of Person)
End Class 
```

在人员控制器中，我有以下内容：

```
 ' GET: /Person/Edit/5

    Function Edit(id As Integer) As ViewResult
        Dim person As Person = db.Persons.Find(id)

        Return View(person)
    End Function 
```

但是，即使将 LazyLoading 设置为 False，person.ContactDetails 也不会加载！我已经检查了数据库，并且已经正确生成了关系，并且代码首先生成的键具有正确的值。这是怎么回事？

**更新**

我也尝试过明确地做：

```
db.Persons.Where(Function(x) x.ID=id).Include("ContactDetails").SingleOrDefault() 
```

并且

```
db.Persons.Where(Function(x) x.ID=id).Include(Function(y) y.ContactDetails).SingleOrDefault() 
```

但它仍然没有工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T10:47:05.237

将延迟加载设置为 false 不会打开自动预加载 - 它只是关闭延迟加载。如果要加载关系，则必须`Include`在查询中使用方法（并且必须使用`SingleOrDefault`代替`Find`）。

# ios - 为 UIControlStateHighlighted 设置 UIImage

> ID：12053042
> 
> 赞同：1
> 
> 时间：2012-08-21T10:33:31.253
> 
> 标签：ios, uibutton

![图片](../Images/68e8ec8bc246ea976079b1586f05bc55.png)

board[i] 是我以编程方式创建的 UIButton 数组，我无法为 UIControlStateHighlighted 更改它们的图像：

```
 [board[i] setImage:[UIImage imageNamed:@"block"] forState:UIControlStateNormal];
    [board[i] setImage:[UIImage imageNamed:@"blockPressed"] forState:UIControlStateHighlighted]; 
```

当我在模拟器中用鼠标按下按钮时，图像不会改变。我认为这是一个非常菜鸟的问题，但我不知道代码不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T10:40:04.767

以编程方式添加按钮时，请执行以下操作：

1.  添加每个相同的目标。

2.  提供从 0 到计数的标记所有按钮。

3.  将 UserInteraction 设置为 true

4.  setBackgroundImage:[UIImage imageNamed:@"blockPressed.png"] forState:UIControlStateHighlighted 如果你想突出显示按钮

现在按下按钮，对所有按钮调用相同的方法：例如

```
-(void)ButtonTouched:(id)sender
{
   UIButton *btntouched = sender;
   NSLog(@"%@", btntouched);
   [btntouched setBackgroundImage:[UIImage imageNamed:@"blockPressed.png"]  forState:UIControlStateHighlighted];// it can be forState:UIControlStateNormal also
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T10:38:24.827

我认为您没有触发突出显示的状态。这可能是因为它们未设置为启用交互。或者您设置按钮的方式还缺少其他内容。

您可以尝试的另一件事是在每个按钮被触摸时添加一个选择器，然后通过为选择器功能引用发送者来更改图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-28T20:50:44.797

假设您已确保您的图像不返回`nil`，则此代码应该可以工作：

```
[myUIButton setImage:[UIImage imageNamed:@"myHighlightedButtonImage.png"] forState:UIControlStateHighlighted]; 
```

如果您在`viewDidLoad()`.

# jsf-2 - JSF 2 和 JSF 中的日期选择器示例

> ID：12053060
> 
> 赞同：0
> 
> 时间：2012-08-21T10:34:30.690
> 
> 标签：jsf-2

我已经阅读了很多很好的教程，但我仍然无法使用日期选择器创建有效的 JSF 2 页面。我尝试按照这篇文章[http://www.mkyong.com/jsf2/jsf-2-templating-with-facelets-example/](http://www.mkyong.com/jsf2/jsf-2-templating-with-facelets-example/)创建模板， 一切顺利。但是，当我尝试添加 RichFaces 日期选择器或任何其他日期选择器时，它什么也没显示。

我认为这与我的配置（Tomcat 6（和/或 7）和 Eclipse）有关，但我不确定了。

问题是我已经启动并运行了所有东西，JSF、Hibernate、Spring ......但是当谈到日期选择器时，无论我尝试什么，它都无法识别它。

请任何人都可以发布一个带有日期选择器的示例吗？

最佳，约克西莫维奇

# android - 从包/应用程序访问供应商内部的 jar 文件

> ID：12053068
> 
> 赞同：0
> 
> 时间：2012-08-21T10:35:09.877
> 
> 标签：android, android-layout, android-ndk, dalvik

我有 2 个 jar 文件驻留在里面`Linux/android/vendor/myjar/libs/frameworks`。我需要从我的应用程序里面访问这个 jar`Linux/android/packages/apps`

我应该如何在我的应用程序的 Android.mk 中指定 `LOCAL_STATIC_JAVA_LIBRARIES`and`LOCAL_PREBUILT_STATIC_JAVA_LIBRARIES`以便我可以从我的应用程序访问这些 jar。

`(1) core.jar and (2) porting.jar`是 jar 文件的名称`Linux/android/vendor/myjar/libs/frameworks`。如果有人可以帮助我定义`LOCAL_STATIC_JAVA_LIBRARIES`and `LOCAL_PREBUILT_STATIC_JAVA_LIBRARIES`，不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T11:12:22.697

您能简要介绍一下吗，vendor/myjar 中的文件夹是从中生成的一个`.jar`或多个文件。您可以在制作文件中使用。`.java``.jar``LOCAL_STATIC_JAVA_LIBRARIES = myjars`

myjars 是`.java`类的文件夹名称，如果您直接使用文件，则可以通过在我们的应用程序中`.jar`使用来包含在您的项目中`LOCAL_PREBUILT_STATIC_JAVA_LIBRARIES``Android.mk`

# javascript - 在 Handlbar 模板上添加事件侦听器的最简单方法是什么

> ID：12053074
> 
> 赞同：1
> 
> 时间：2012-08-21T10:35:32.300
> 
> 标签：javascript, dom-events, handlebars.js

使用 Handlebars.js 给出以下代码：

```
var templateString = "<div>{{{nameContainer}}}</div>";
var handlebarTemplate = handlebars.compile(templateString);
var context = {
   nameContainer: '<div id="myID">my name is John Doe</div>'
}

var html = handlebarTemplate(context);
var body = document.getElementsByTagName('body') [0];
body.innerHTML = html; 
```

在使用 Handlebars.js 时添加事件侦听器的最简单方法是什么，`#myID`而不需要使用类似`document.getElementById('myID').addEventListener(...)`after`html`添加到 DOM 的东西？

# java - 如何将 printStackTrace() 中的异常写入 Java 中的文本文件？

> ID：12053075
> 
> 赞同：31
> 
> 时间：2012-08-21T10:35:33.283
> 
> 标签：java, exception

我需要在 Java 的文本文件中捕获异常。例如：

```
try {
  File f = new File("");
}
catch(FileNotFoundException f) {
  f.printStackTrace();  // instead of printing into console it should write into a text file    
  writePrintStackTrace(f.getMessage()); // this is my own method where I store f.getMessage() into a text file.
} 
```

使用`getMessage()`有效，但它只显示错误消息。我想要`printStackTrace()`包括行号中的所有信息。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-08-21T10:37:32.997

它接受 a`PrintStream`作为参数；请参阅[文档](http://docs.oracle.com/javase/7/docs/api/java/lang/Throwable.html#printStackTrace%28%29)。

```
File file = new File("test.log");
PrintStream ps = new PrintStream(file);
try {
    // something
} catch (Exception ex) {
    ex.printStackTrace(ps);
}
ps.close(); 
```

另请参见[printStackTrace() 和 toString() 之间的区别](https://stackoverflow.com/questions/10120709/difference-between-printstacktrace-and-tostring)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-21T10:40:23.187

尝试扩展这个简单的例子：

```
catch (Exception e) {

    PrintWriter pw = new PrintWriter(new File("file.txt"));
    e.printStackTrace(pw);
    pw.close();
} 
```

如您所见，`printStackTrace()`有重载。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-21T10:47:58.553

`System`使用类设置错误/输出流。

```
PrintStream newErr;
PrintStream newOut;
// assign FileOutputStream to these two objects. And then it will be written on your files.
System.setErr(newErr);
System.setOut(newOut); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-21T10:39:42.747

`Throwable`接口中有一个 API，`getStackTrace()`内部用于在控制台中打印`printStackTrace()`

[http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Throwable.html#getStackTrace](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Throwable.html#getStackTrace) ()

`StackTraceElement`试试这个 API 来按顺序获取和打印这些元素。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-09T14:43:40.440

希望以下示例对您有所帮助-

```
package com.kodehelp.javaio;

import java.io.File;
import java.io.FileNotFoundException;
import java.io.PrintStream;

public class PrintStackTraceToFile {
   public static void main(String[] args) {
      PrintStream ps= null;
      try {
          ps = new PrintStream(new File("/sample.log"));
          throw new FileNotFoundException("Sample Exception");
      } catch (FileNotFoundException e) {
        e.printStackTrace(ps);
      }
    }
} 
```

有关更多详细信息，请参阅[此处的此链接](https://kodehelp.com/write-exceptions-printstacktrace-file-in-java/)

# clojure - 如何从 clojure 中很好地调用其他 JVM 语言？

> ID：12053079
> 
> 赞同：7
> 
> 时间：2012-08-21T10:35:44.577
> 
> 标签：clojure

有时您想粘合用不同 JVM 语言编写的解决方案。为此，您需要调用该语言或以某种方式使用 java bitcodes。在 Clojure 中，最纯粹、最安全、最好的方法是什么？

例如，从 Clojure 调用 Scala 的最佳方法是什么？

（我知道其他方法很简单。您可以按 Gen-class 生成 .class ，就像它在[Can you mix the JVM languages? 中所写的那样？即：Groovy 和 Clojure](https://stackoverflow.com/questions/591459/can-you-mix-the-jvm-languages-ie-groovy-clojure)，但这只是允许您使用其他语言的 clojure。）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-21T11:24:58.803

由于 Clojure 在 JVM 上运行，因此您可以访问 Clojure 之外的类路径中的任何已知类。这是一个 Scala 示例。为了使类路径设置和依赖管理更容易，使用 Leiningen 生成一个项目。

```
lein new clojure-scala 
```

在项目文件夹中，修改 project.clj 并添加 Scala 语言库的依赖项，并将 scala-src 文件夹添加到类路径：

```
(defproject clj-scala "0.1.0-SNAPSHOT"
  :description "FIXME: write description"
  :url "http://example.com/FIXME"
  :license {:name "Eclipse Public License"
            :url "http://www.eclipse.org/legal/epl-v10.html"}
  :dependencies [[org.clojure/clojure "1.3.0"]
                 [org.scala-lang/scala-library "2.7.1"]]
  :compile-path "scala-src" ) 
```

创建目录 scala-src，并在该文件夹中创建以下 Scala 类：

```
class HelloWorld {
  def sayHelloToClojure(msg: String) =
    "Here's the echo message from Scala: " concat msg
} 
```

使用 scalac 编译类。现在运行*lein deps*下载依赖项。通过运行*lein repl*启动 Clojure REPL 。您可以导入 Scala 类，对其进行实例化并调用 sayHelloToClojure 方法。

```
user=> (import HelloWorld)
HelloWorld
user=> (.sayHelloToClojure (HelloWorld.) "Hi there")
"Here's the echo message from Scala: Hi there" 
```

这与您使用 Scala 类和 Java 代码的方式兼容。这可能会变得棘手，引自[常见问题 - Java 互操作性](http://www.scala-lang.org/faq/4)：

> 使用 Java 中的 Scala 类可能会很棘手，尤其是当您的 Scala 类使用泛型、多态方法或抽象类型等高级特性时。由于 Java 没有这样的语言特性，因此您必须对 Scala 类的编码方案有所了解。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-21T11:25:43.717

从 Clojure 调用其他 JVM 语言非常容易——您需要做的就是使用[Java 互操作](http://clojure.org/java_interop)语法。

例子：

```
;; import Java classes
(ns my-ns
  (:import [some.package ClassOne ClassTwo ClassThree]))

;; call a regular method on an object
(.method someObject arg1 arg2)

;; call a constructor
(ObjectToConstuct. arg1 arg2)

;; call a static method
(Math/floor 2.3)

;; Use a static field
(+ 2 Math/PI) 
```

基本上，使用这些技术，您可以调用任何其他创建 JVM 类的语言（包括 Java、Scala 和可能大多数其他 JVM 语言）

# android - “无法配置解析器”android

> ID：12053080
> 
> 赞同：2
> 
> 时间：2012-08-21T10:35:56.210
> 
> 标签：android, button, textcolor

我有一个看起来像这样的常规按钮：

```
<Button
    android:id="@+id/button1"
    style="@style/ButtonInfo"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginLeft="10dip"
    android:layout_marginRight="10dip"
    android:text="Button" /> 
```

ButtonInfo 如下所示：

```
 <style name="ButtonInfo" parent="@android:style/Widget.Button">
    <item name="android:background">@drawable/button_info</item>
    <item name="android:textColor">@color/button_info_text</item>
    <item name="android:textSize">16dip</item>
</style> 
```

color/button_info_text.xml 看起来像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

<item android:state_pressed="true"><shape>
        <solid android:color="@color/black" />
    </shape></item>
<item><shape>
        <solid android:color="@color/white" />
    </shape></item>
</selector> 
```

我一直在错误日志中得到这个：

```
eclipse.buildId=M20120208-0800
java.version=1.7.0_05
java.vendor=Oracle Corporation
BootLoader constants: OS=win32, ARCH=x86, WS=win32, NL=es_ES
Command-line arguments:  -os win32 -ws win32 -arch x86 -clean

Error
Tue Aug 21 12:17:57 CEST 2012
layout_guiacolor_info.xml: Failed to configure parser for C:\Documents and Settings\sanriv\Escritorio\GuiaColor\android\GuiaColor\res\drawable\button_info_text.xml

org.xmlpull.v1.XmlPullParserException: Binary XML file line #4: <item> tag requires a 'android:color' attribute.
    at android.content.res.ColorStateList.inflate(ColorStateList.java:226)
    at android.content.res.ColorStateList.createFromXmlInner(ColorStateList.java:150)
    at android.content.res.ColorStateList.createFromXml(ColorStateList.java:129)
    at com.android.layoutlib.bridge.android.BridgeTypedArray.getColorStateList(BridgeTypedArray.java:338)
    at android.widget.TextView.<init>(TextView.java:628)
    at android.widget.Button.<init>(Button.java:108)
    at android.widget.Button.<init>(Button.java:104)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at android.view.LayoutInflater.createView(LayoutInflater.java:500)
    at com.android.layoutlib.bridge.android.BridgeInflater.onCreateView(BridgeInflater.java:84)
    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:563)
    at com.android.layoutlib.bridge.android.BridgeInflater.createViewFromTag(BridgeInflater.java:129)
    at android.view.LayoutInflater.rInflate(LayoutInflater.java:618)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:407)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:296)
    at com.android.layoutlib.bridge.impl.RenderSessionImpl.inflate(RenderSessionImpl.java:279)
    at com.android.layoutlib.bridge.Bridge.createSession(Bridge.java:318)
    at com.android.ide.common.rendering.LayoutLibrary.createSession(LayoutLibrary.java:325)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.RenderService.createRenderSession(RenderService.java:372)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.renderWithBridge(GraphicalEditorPart.java:1640)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.recomputeLayout(GraphicalEditorPart.java:1391)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart$ConfigListener.onConfigurationChange(GraphicalEditorPart.java:706)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.onTargetChange(GraphicalEditorPart.java:1293)
    at com.android.ide.eclipse.adt.internal.editors.layout.LayoutEditorDelegate.onDescriptorsChanged(LayoutEditorDelegate.java:912)
    at com.android.ide.eclipse.adt.internal.editors.layout.LayoutEditorDelegate.delegateInitUiRootNode(LayoutEditorDelegate.java:831)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart$TargetListener.updateEditor(GraphicalEditorPart.java:1052)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart$TargetListener.onTargetLoaded(GraphicalEditorPart.java:1016)
    at com.android.ide.eclipse.adt.AdtPlugin$10.run(AdtPlugin.java:1704)
    at org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)
    at org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:135)
    at org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:4140)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3757)
    at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2701)
    at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2665)
    at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2499)
    at org.eclipse.ui.internal.Workbench$7.run(Workbench.java:679)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:668)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:123)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:577)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1410) 
```

当我尝试运行它时，我得到了这个异常：

```
08-21 12:12:18.370: E/AndroidRuntime(14337): FATAL EXCEPTION: main
08-21 12:12:18.370: E/AndroidRuntime(14337): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.cidaut.guiacolor/com.cidaut.guiacolor.controller.InfoActivity}: android.view.InflateException: Binary XML file line #37: Error inflating class <unknown>
08-21 12:12:18.370: E/AndroidRuntime(14337):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2079)
08-21 12:12:18.370: E/AndroidRuntime(14337):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2104)
08-21 12:12:18.370: E/AndroidRuntime(14337):    at android.app.ActivityThread.access$600(ActivityThread.java:132)
08-21 12:12:18.370: E/AndroidRuntime(14337):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1157)
08-21 12:12:18.370: E/AndroidRuntime(14337):    at android.os.Handler.dispatchMessage(Handler.java:99)
08-21 12:12:18.370: E/AndroidRuntime(14337):    at android.os.Looper.loop(Looper.java:137)
08-21 12:12:18.370: E/AndroidRuntime(14337):    at android.app.ActivityThread.main(ActivityThread.java:4575)
08-21 12:12:18.370: E/AndroidRuntime(14337):    at java.lang.reflect.Method.invokeNative(Native Method)
08-21 12:12:18.370: E/AndroidRuntime(14337):    at java.lang.reflect.Method.invoke(Method.java:511)
08-21 12:12:18.370: E/AndroidRuntime(14337):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:789)
08-21 12:12:18.370: E/AndroidRuntime(14337):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:556)
08-21 12:12:18.370: E/AndroidRuntime(14337):    at dalvik.system.NativeStart.main(Native Method)
08-21 12:12:18.370: E/AndroidRuntime(14337): Caused by: android.view.InflateException: Binary XML file line #37: Error inflating class <unknown>
08-21 12:12:18.370: E/AndroidRuntime(14337):    at android.view.LayoutInflater.createView(LayoutInflater.java:606)
08-21 12:12:18.370: E/AndroidRuntime(14337):    at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
08-21 12:12:18.370: E/AndroidRuntime(14337):    at android.view.LayoutInflater.onCreateView(LayoutInflater.java:653)
08-21 12:12:18.370: E/AndroidRuntime(14337):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:678)
08-21 12:12:18.370: E/AndroidRuntime(14337):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
08-21 12:12:18.370: E/AndroidRuntime(14337):    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
08-21 12:12:18.370: E/AndroidRuntime(14337):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
08-21 12:12:18.370: E/AndroidRuntime(14337):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
08-21 12:12:18.370: E/AndroidRuntime(14337):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:251)
08-21 12:12:18.370: E/AndroidRuntime(14337):    at android.app.Activity.setContentView(Activity.java:1835)
08-21 12:12:18.370: E/AndroidRuntime(14337):    at com.cidaut.guiacolor.controller.InfoActivity.onCreate(InfoActivity.java:13)
08-21 12:12:18.370: E/AndroidRuntime(14337):    at android.app.Activity.performCreate(Activity.java:4465)
08-21 12:12:18.370: E/AndroidRuntime(14337):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
08-21 12:12:18.370: E/AndroidRuntime(14337):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2033)
08-21 12:12:18.370: E/AndroidRuntime(14337):    ... 11 more
08-21 12:12:18.370: E/AndroidRuntime(14337): Caused by: java.lang.reflect.InvocationTargetException
08-21 12:12:18.370: E/AndroidRuntime(14337):    at java.lang.reflect.Constructor.constructNative(Native Method)
08-21 12:12:18.370: E/AndroidRuntime(14337):    at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
08-21 12:12:18.370: E/AndroidRuntime(14337):    at android.view.LayoutInflater.createView(LayoutInflater.java:586)
08-21 12:12:18.370: E/AndroidRuntime(14337):    ... 24 more
08-21 12:12:18.370: E/AndroidRuntime(14337): Caused by: android.content.res.Resources$NotFoundException: File res/drawable/button_info_text.xml from color state list resource ID #0x7f020006
08-21 12:12:18.370: E/AndroidRuntime(14337):    at android.content.res.Resources.loadColorStateList(Resources.java:2113)
08-21 12:12:18.370: E/AndroidRuntime(14337):    at android.content.res.TypedArray.getColorStateList(TypedArray.java:342)
08-21 12:12:18.370: E/AndroidRuntime(14337):    at android.widget.TextView.<init>(TextView.java:774)
08-21 12:12:18.370: E/AndroidRuntime(14337):    at android.widget.Button.<init>(Button.java:108)
08-21 12:12:18.370: E/AndroidRuntime(14337):    at android.widget.Button.<init>(Button.java:104)
08-21 12:12:18.370: E/AndroidRuntime(14337):    ... 27 more
08-21 12:12:18.370: E/AndroidRuntime(14337): Caused by: org.xmlpull.v1.XmlPullParserException: Binary XML file line #4: <item> tag requires a 'android:color' attribute.
08-21 12:12:18.370: E/AndroidRuntime(14337):    at android.content.res.ColorStateList.inflate(ColorStateList.java:226)
08-21 12:12:18.370: E/AndroidRuntime(14337):    at android.content.res.ColorStateList.createFromXmlInner(ColorStateList.java:150)
08-21 12:12:18.370: E/AndroidRuntime(14337):    at android.content.res.ColorStateList.createFromXml(ColorStateList.java:129)
08-21 12:12:18.370: E/AndroidRuntime(14337):    at android.content.res.Resources.loadColorStateList(Resources.java:2110)
08-21 12:12:18.370: E/AndroidRuntime(14337):    ... 31 more 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T10:46:10.817

读取错误跟踪中的第一行：

```
org.xmlpull.v1.XmlPullParserException: Binary XML file line #4: <item> tag requires a 'android:color' attribute. 
```

显然你的标签需要`android:color` **属性**

或者可能： [错误：<item> 标签需要一个“drawable”属性或定义可绘制对象的子标签](https://stackoverflow.com/questions/8114322/error-item-tag-requires-a-drawable-attribute-or-child-tag-defining-a-drawa)

# c++ - jsoncpp：从代码中填充数组的成员

> ID：12053082
> 
> 赞同：0
> 
> 时间：2012-08-21T10:36:00.990
> 
> 标签：c++, json, jsoncpp

[我在jsoncpp](http://jsoncpp.sourceforge.net/)查找了代码示例。对于成员数组，即下面 json 数据中的“插件”

```
{
    // Default encoding for text
    "encoding" : "UTF-8",

    // Plug-ins loaded at start-up
    "plug-ins" : [
        "python",
        "c++",
        "ruby"
        ],

    // Tab indent size
    "indent" : { "length" : 3, "use_space": true }
} 
```

他们没有演示从程序内部填充它的代码片段方式。有谁知道怎么做？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T10:45:23.380

所有这些节点都是 type [`Json::Value`](http://jsoncpp.sourceforge.net/class_json_1_1_value.html#7e49ac977e4bcf59745a09d426669f75)。您需要调用[`Value & Json::Value::append (const Value & value)`](http://jsoncpp.sourceforge.net/class_json_1_1_value.html#7e49ac977e4bcf59745a09d426669f75)To append 一个 item 到另一个。

在构造一个值对象时，您传递的 Value 类型是一个枚举[`Json::ValueType`](http://jsoncpp.sourceforge.net/namespace_json.html#7d654b75c16a57007925868e38212b4e)，并且`arrayValue`在该枚举中。

# ruby-on-rails - 编辑：如何从循环中退出并进行任务召回？

> ID：12053088
> 
> 赞同：0
> 
> 时间：2012-08-21T10:36:14.530
> 
> 标签：ruby-on-rails, rake, rake-task

我正在使用任务对 PayPal 进行 Mass Pay API 调用。

**编辑：**如果有超过 250 个接收者，我需要退出循环并在完成后再次调用它。

这是我的任务：

```
 task :pay => :environment do
    clnt = HTTPClient.new
    i = 0;
    data = {    "METHOD" => "MassPay",
    ...}
    @users = User.all
    @users.each do |user|
       if i == 249 
            // call task again
       end
        data["L_EMAIL#{i}"] = "#{user.email}"
        data["L_AMT#{i}"] = "1.21"
        ...
        i+=1

        end 
```

我怎么能做到？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T08:26:41.483

一个更实用的方法是将everyting包装在一个`in_groups_of`调用中。从你的代码猜测，你会得到类似的东西：

```
task :pay => :environment do
  @users = User.all

  @users.in_groups_of(250, false).each do |group|
    clnt = HTTPClient.new
    data = {    "METHOD" => "MassPay",
      ...}

    group.each do |user|
      data["L_EMAIL#{i}"] = "#{user.email}"
      data["L_AMT#{i}"] = "1.21"
      ...
    end
  end
end 
```

文档在[这里](http://apidock.com/rails/Array/in_groups_of)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T10:43:46.020

尝试这个：

```
Rake::Task['pay'].reenable 
```

# android - Android IntelliJ IDEA 项目和 TeamCity（检查）

> ID：12053093
> 
> 赞同：1
> 
> 时间：2012-08-21T10:36:29.757
> 
> 标签：android, intellij-idea, teamcity, teamcity-7.0, inspection

我在 IntelliJ IDEA (11.1.3) 中为我的 Android 项目配置检查。我想在每次提交时在我的 CI TeamCity 服务器（7.0.1（build 21326））上运行此检查检查，但它们不起作用。每次我收到一个错误：“未收集检查”并且构建失败。在构建日志中，我有：

```
...in directory: /opt/TeamCity/buildAgent1/work/9bbb251d174995
[01:00:27]: Starting up IntelliJ IDEA 11.0.2 ...done.
[01:00:57]: Opening project...done.
[01:00:57]: Failed to load profile from '/opt/TeamCity/buildAgent1/work/9bbb251d174995/.idea/inspectionProfiles/Project_Default.xml'
[01:00:58]: Initializing project...
[01:00:58]: Process exited with code 1
[01:00:58]: Inspection output
[01:00:58]:  [Inspection output] Starting up IntelliJ IDEA 11.0.2 ...done.
[01:00:58]:  [Inspection output] Opening project...done.
[01:00:58]:  [Inspection output] Failed to load profile from '/opt/TeamCity/buildAgent1/work/9bbb251d174995/.idea/inspectionProfiles/Project_Default.xml'
[01:00:58]:  [Inspection output] Initializing project...
[01:00:58]: extractDescriptions: /opt/TeamCity/buildAgent1/temp/buildTmp/inspection963669486392887894result/.descriptions.xml not found
[01:00:58]: Publishing artifacts
[01:00:58]:  [Publishing artifacts] Paths to publish: [/opt/TeamCity/buildAgent1/temp/agentTmp/build_stages.txt=>.teamcity/perfmon/]
[01:00:58]:  [Publishing artifacts] Sending files
[01:00:58]: Publishing artifacts
[01:00:58]:  [Publishing artifacts] Paths to publish: [/opt/TeamCity/buildAgent1/system/perfmon/temp/perfmon.csv => .teamcity/perfmon/]
[01:00:58]:  [Publishing artifacts] Sending files
[01:00:58]: Publishing internal artifacts
[01:00:58]:  [Publishing internal artifacts] Sending build.finish.properties.gz file
[01:00:58]: Total: 0 (+0 -0) Errors: 0 (+0 -0)
[01:00:58]: Build finished 
```

我想问题是捆绑在 IntelliJ IDEA 的 TeamCity 实例中没有任何插件，包括 Android 插件。因此它无法识别我的 Android 项目。

任何人都有其他想法可能有什么问题？或者在这种情况下该怎么办？

**PS**我在 TeamCity 中的构建步骤如下所示： ![在此处输入图像描述](../Images/b7a106b4a6a397da6ec4f6aed189b799.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T15:26:00.310

目前，TeamCity 仅支持 IntelliJ IDEA 支持的集中与 Java 相关的检查。请为相应的 TeamCity[功能请求](http://youtrack.jetbrains.com/issue/TW-23339)投票。

# javascript - 为什么我不能将浏览器的焦点放在我需要的 svg/div 元素上？

> ID：12053095
> 
> 赞同：0
> 
> 时间：2012-08-21T10:36:35.497
> 
> 标签：javascript, jquery, dom, svg, positioning

好的，这让我很烦，我有一个网页上有一大堆 svg（svg JQuery 插件），我需要浏览器专注于某些（水平），所以我做了一个简单的功能达到我的目的：

```
function adjustWindowPos(svg){
    var left = svg.scrollLeft();
    $(document).scrollLeft(left);
} 
```

*svg*对象只是我们通过的一个对象（我们在执行此操作之前绘制和拉屎，所以它被渲染）：

```
$("#someDivID").svg('get'); 
```

我昨晚测试了这个，一切正常，今天早上我开始工作，它在萤火虫中抛出一个错误说：

> 类型错误：svg.scrollLeft 不是函数

我意识到它找不到该函数，因为该对象是一个 SVG 包装器，而不是一个 JQuery 对象……但它**昨天工作**了。这就是我没有得到的（很多东西，今天没有咖啡）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T10:16:23.320

您需要创建将包含 svg DOM 元素的 jQuery 对象，即您正在寻找的 jQuery 包装器。您可以使用`$`jQuery 函数以多种方式执行此操作：

*   将 jQuery 选择器字符串传递给它：`$('jquery selector')`;
*   将 DOM 对象传递给它；
*   从已经存在的 jQuery 对象中获取它，如果你有的话；

让我假设你有一个 id 选择器：

```
var svg = '#id_of_the_svg_element' 

function adjustWindowPos(svg){
    var $svg = $(svg);             // now this is the jQuery object
    var left = $svg.offset().left; // this is its horizontal position relative to the document
    $(document).scrollLeft(left);
} 
```

# c# - 传递带有哈希值的 URL 以进行重定向

> ID：12053096
> 
> 赞同：3
> 
> 时间：2012-08-21T10:36:41.093
> 
> 标签：c#, asp.net-mvc-3

> **可能重复：**
> [如何从服务器端获取 Url Hash (#)](https://stackoverflow.com/questions/317760/how-to-get-url-hash-from-server-side)

我在从变量中获取**哈希值时遇到了一些麻烦。**

我正在使用默认操作`AccountController`

```
[HttpPost]
public ActionResult LogOn(LogOnModel model, string returnUrl) { ... } 
```

但如果我通过这个链接：

```
http://localhost:1357/none/Account/LogOn?returnUrl=a/b/c#day-22 
```

我永远无法抓住`#day-22`价值

下面是登录后的断点：

![在此处输入图像描述](../Images/cfd1343778b8152e2f46608adeb19132.png)

我从来没有得到`HttpContext.Request.Url`对象的哈希值。

> **我该怎么做才能将用户转发到****带有哈希**部分的正确 URL ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T10:43:15.380

您需要对其进行 urlencode。

尝试：`http://localhost:1357/none/Account/LogOn?returnUrl=a/b/c%23day-22`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T10:41:30.193

这是不可能的，因为 URL 片段（后面的位`#`）没有从浏览器发送到服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T10:43:13.120

在形成/解析该部分时使用`HttpUtility.UrlEncode`和。`HttpUtility.UrlDecode`

# javascript - addEventListener 提交和 jQuery 提交

> ID：12053099
> 
> 赞同：0
> 
> 时间：2012-08-21T10:36:49.393
> 
> 标签：javascript, jquery, addeventlistener, jquery-events

我有形式：

```
<form id="form1" class="f_class">
<input type="button" class="jq-button" value="jq-button"/>
</form> 
```

和js代码：

```
var f=document.getElementById("form1");
f.addEventListener("submit", function(){alert("addEventListener_submit");},false);
$(".jq-button").click(function(){$("#form1").submit();}); 
```

（[杰宾](http://jsbin.com/upihuj/3/edit)）

当我单击 jq 按钮时，警报不显示。为什么？

**更新**

我有外部 js 代码，它使用`addEventListener`，我无法更改它。但在我的代码中，我想使用 jQuery 提交。我可以把它们结合起来吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T10:40:47.563

只需将其更正为：

`<input type="submit" class="jq-button" value="jq-button"/>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T10:41:31.053

$().submit() 触发 jquery 提交事件而不是 eventlisterner。我会用 jQuery 编写所有事件的绑定，例如：

```
var f = $("#form1");
f.on("submit", function() { // on requires jquery 1.7+
    alert("submit");
});
$(".jq-button").on("click", (function(e) {
    $(this).closest("form").trigger("submit");
    e.preventDefault();
}); 
```

## 编辑：

您**可以**执行以下操作：

```
var f=document.getElementById("form1");

f.addEventListener("submit", function(){
    alert("addEventListener_submit");
},false);

$(".jq-button").click(function(){
    var c = $(this),
        cc = c.clone().attr("type","submit");
    c.replaceWith(cc);
    cc.click();
}); 
```

如果您不能更改 HTML 标记。

# python - 测试一个字符串，如果它是 Unicode，哪个 UTF 标准是并以字节为单位获取它的长度？

> ID：12053107
> 
> 赞同：24
> 
> 时间：2012-08-21T10:37:10.943
> 
> 标签：python, string, unicode, utf-8, python-2.5

我需要测试一个字符串是否是 Unicode，然后它是否是 UTF-8。之后，获取字符串的长度（以字节为单位），包括[BOM](http://en.wikipedia.org/wiki/Byte_order_mark)（如果它曾经使用过）。如何在 Python 中做到这一点？

同样出于教学目的，UTF-8 字符串的字节列表表示形式是什么样的？我很好奇 UTF-8 字符串是如何在 Python 中表示的。

后期编辑： pprint 做得很好。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-21T10:44:57.963

```
try:
    string.decode('utf-8')
    print "string is UTF-8, length %d bytes" % len(string)
except UnicodeError:
    print "string is not UTF-8" 
```

在 Python 2 中，`str`是字节`unicode`序列，也是字符序列。您用于`str.decode`将字节序列解码为`unicode`，并将`unicode.encode`字符序列编码为`str`。例如，`u"é"`是包含单个字符 U+00E9 的 unicode 字符串，也可以写成`u"\xe9"`; 编码成 UTF-8 给出字节序列`"\xc3\xa9"`。

在 Python 3 中，这发生了变化；`bytes`是一个字节序列，`str`是一个字符序列。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-21T11:10:37.240

检查 Unicode

```
>>>a = u'F'
>>>isinstance(a, unicode)
True 
```

检查它是 UTF-8 还是 ASCII

```
>>>import chardet
>>>encoding = chardet.detect('AA')
>>>encoding['encoding']
'ascii' 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-21T10:44:32.150

我肯定会推荐 Joel Spolsky 的[The Absolute Minimum Every Software Developer Absolutely, Positively Must Know about Unicode and Character Sets (No Excuses!)](http://www.joelonsoftware.com/articles/Unicode.html)，如果你还没有读过的话。

对于 Python 的 Unicode 和编码/解码机制，从[这里](http://docs.python.org/howto/unicode.html)开始。要获取以 utf-8 编码的 Unicode 字符串的字节长度，您可以执行以下操作：

```
print len(my_unicode_string.encode('utf-8')) 
```

您的问题被标记为 python-2.5，但请注意这在 Python 3+ 中有所改变。

# android - AbsoluteLayout - 我有其他选择吗？

> ID：12053108
> 
> 赞同：0
> 
> 时间：2012-08-21T10:37:16.793
> 
> 标签：android, android-layout

在我正在开发的应用程序中，我需要像在圆的边缘一样布局 2 到 5 个按钮。该应用程序以 5 个按钮开始，但按钮逐渐消失（基于用户输入），直到有 2 个按钮。

我想我会使用一个`AbsoluteLayout`控件，并在代码中设置每个按钮的位置（考虑到屏幕大小）。但是，它或多或少*地*表明不应使用 AbsoluteLayout。由于我将此应用程序定位到 Android 2.2 及更高版本，因此我无法使用 ICS 引入的更高级的布局。

我知道我可以使用 RelativeLayout 并使用边距，但这似乎不太直观，并且与使用 AbsoluteLayout 一样容易出错。

我有任何合理的选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T10:59:08.757

我想，你没有很多选择。除了您提到的相对布局，您当然可以使用 FrameLayout 并设置左右边距以正确定位按钮。

# c# - 部分布局中的 MVC3 模型

> ID：12053110
> 
> 赞同：1
> 
> 时间：2012-08-21T10:37:28.660
> 
> 标签：c#, asp.net-mvc-3, model, partial-views

截至目前，我正在尝试在我的项目中使用 MVC3 模型验证，但是如果用户未登录，我希望有一个简单的登录部分始终显示在布局中。我有大部分代码，但是我唯一坚持的是如何将模型发布回表单以获取我生成并需要返回的任何验证消息。

通常这样的事情会起作用：

```
public ActionResult Login()
{
    return View();
}

[HttpPost]

public ActionResult Login(LoginModel)
{
    if(ModelState.IsValid())
    {
        //Run Further checks & functions
        //Upon successful login, retuns to somewhere (Just site index in this example)
        return RedirectToAction("Index", "Site");
    }

    return View(model);
} 
```

现在显然这不起作用，因为我不能`return View(model);`在部分上工作，除非我只想显示登录表单，但是我希望它发回我一直在编辑的页面。例如：我导航到某个页面，与我们联系，并想现在登录。我在始终可用的表格上输入我的详细信息，然后输入我的详细信息。发生错误（密码不正确、登录不正确、帐户不存在等），我应该回到联系页面，表单仍填写我输入的详细信息（显然密码除外）和验证摘要工作之类的……

此外，布局已呈现的页面上的任何表单仍需要正常工作（使用模型等）

我愿意接受有关如何通过其他提交/返回方式使其工作的建议，但是让 MVC 模型验证工作是理想的。

如果有人需要我详细说明所说的任何内容，请随时发表评论。我会积极回应一段时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T14:18:03.177

您应该为登录创建一个部分视图，而不是使用“@Html.BeginForm”，而是使用@Html.AjaxBegin，它通过 Ajax 调用提交您的页面并将其**RenderHtmlString**的登录视图。例如

```
public ActionResult Login(LoginModel)
{
    if(ModelState.IsValid())
    {
        //Run Further checks & functions
        //Upon successful login, retuns to somewhere (Just site index in this example)
        return RedirectToAction("Index", "Site");
    }

    return RenderPartialViewToString("Login",model);
}

protected string RenderPartialViewToString(string viewName, object model)
    {
        if (string.IsNullOrEmpty(viewName))
            viewName = ControllerContext.RouteData.GetRequiredString("action");

        ViewData.Model = model;

        using (StringWriter sw = new StringWriter())
        {
            ViewEngineResult viewResult = ViewEngines.Engines.FindPartialView(ControllerContext, viewName);
            ViewContext viewContext = new ViewContext(ControllerContext, viewResult.View, ViewData, TempData, sw);
            viewResult.View.Render(viewContext, sw);
            return sw.GetStringBuilder().ToString();
        }
    } 
```

添加“RenderPartialViewToString”方法后，该方法将返回您的局部视图的“ **RenderHtmlString** ”。您必须将 viewName 和 Model 作为参数传递给此方法。在您的部分视图中。

```
<div id="targetId">
</div>

@using(Ajax.BeginForm("Login",new AjaxOptions{ HttpMethod="POST", UpdateTargetId="targetId"}))
{
  <input type="submit" value="save" />
} 
```

注意：您必须通过 UpdateTargetId 那里您的结果将追加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T11:02:01.720

看到这个问题：[如何将值传递给 MVC3 母版页（_layout）？](https://stackoverflow.com/questions/11739905/how-do-i-pass-value-to-mvc3-master-page-layout/11740128#11740128) 有完整的指南如何将模型传递给布局

# objective-c - 使用 MKMapViewDelegate

> ID：12053111
> 
> 赞同：0
> 
> 时间：2012-08-21T10:37:31.610
> 
> 标签：objective-c, mkmapview, mkannotationview

我不明白为什么它不起作用。

我有一张带标记的地图，我想更改图标

地图.h：

```
#define METERS_PER_MILE 1609.344

@interface Map : UIViewController<CLLocationManagerDelegate,MKMapViewDelegate>{

IBOutlet MKMapView *map;
CLLocationManager *locationManager;
}

@property(nonatomic,retain) IBOutlet MKMapView *map;
@property(nonatomic,retain)IBOutlet UIWindow *window;
@property (nonatomic, readwrite) CLLocationCoordinate2D location;

- (void)setMarkers:(MKMapView *)mv;
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation;

@end 
```

在 map.m 中：

```
@implementation Map

@synthesize map, window, location;

- (void)setMarkers:(MKMapView *)mv 
{
 //no necesary here

}

- (void)viewWillAppear:(BOOL)animated {
// 1
location.latitude = 38.989567;
location.longitude= -1.856283;
// 2
MKCoordinateRegion viewRegion = MKCoordinateRegionMakeWithDistance(location, 0.8*METERS_PER_MILE, 0.8*METERS_PER_MILE);
// 3
MKCoordinateRegion adjustedRegion = [map regionThatFits:viewRegion];
// 4
[map setRegion:adjustedRegion animated:YES];

//[self setMarkers: map];

CLLocationCoordinate2D pointCoord = location;
NSString *theTitle = @"title";
NSString *theSubtitle = @"subtitle";

MapPoint *mp = [[MapPoint alloc] initWithCoordinate:pointCoord title:theTitle subTitle:theSubtitle];
[map addAnnotation:mp];

}

 - (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation {

   NSLog(@"here!!");
static NSString *identifier = @"MyLocation";
if ([annotation isKindOfClass:[MapPoint class]]) {

    MKPinAnnotationView *annotationView = (MKPinAnnotationView *) [map dequeueReusableAnnotationViewWithIdentifier:identifier];
    if (annotationView == nil) {
        annotationView = [[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:identifier];
    } else {
        annotationView.annotation = annotation;
    }

    annotationView.enabled = YES;
    annotationView.canShowCallout = YES;
    annotationView.image=[UIImage imageNamed:@"Icon.png"];//here we use a nice image instead of the default pins

    return annotationView;
}

return nil;
}

@end 
```

viewForAnnotation 永远不会被执行（我用 NSLog 来检查这个）

我应该怎么办？

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T12:49:27.753

看起来你的代码没有问题。正如 phix23 所说，您可能会错过将 MKMapView 与委托链接：

![示例 01](../Images/ae295c94d36fb2f5a7bd252b829065d5.png)

![示例 02](../Images/16e91a43ad30bb1d1b8ce12d7a605df6.png)

# oracle - 如何从 Oracle 中的 SDO_GEOM.SDO_MBR 返回 x1、y1、x2、y2？

> ID：12053118
> 
> 赞同：0
> 
> 时间：2012-08-21T10:38:01.187
> 
> 标签：oracle, mbr, oracle-spatial

我需要以记录中四个字段的形式返回几何列的 MBR。我需要 x1，y1，x2，y2。如何做到这一点？这是我当前的语句，为清楚起见删除了选择行。我想返回 A.CELL_GEOM 字段的 MBR 的 x1, y1, x2, y2。

```
select SDO_GEOM.SDO_MBR(A.CELL_GEOM) AS CELL_GEOM_VERTS
from (SELECT CLUSTER_ID, 
      NUM_POINTS,
      FEATURE_PK, 
      SDO_CS.transform (CLUSTER_CENTROID, 4326) cluster_centroid,  
      SDO_CS.TRANSFORM(NVL(CLUSTER_EXTENT, MDSYS.SDO_GEOMETRY(2001,4326 ,MDSYS.SDO_POINT_TYPE(-999,-999,NULL),NULL,NULL)),4326) CLUSTER_EXTENT, 
      SDO_CS.transform (CELL_CENTROID, 4326) cell_centroid,
      SDO_CS.TRANSFORM(NVL(CELL_GEOM, MDSYS.SDO_GEOMETRY(2001,4326 ,MDSYS.SDO_POINT_TYPE(-999,-999,NULL),NULL,NULL)),4326) CELL_GEOM, 
      CELL_GEOM CG FROM V_CLUSTER_1000M) a 
LEFT JOIN RWOL_TMA_ROADWORKS 
ON a.FEATURE_PK = RWOL_TMA_ROADWORKS.TPHS_PHASE_ID   
where  sdo_filter(A.CG, SDO_CS.transform(mdsys.sdo_geometry(2003, 4326, NULL, mdsys.sdo_elem_info_array(1,1003,3),mdsys.sdo_ordinate_array(-25.43623984375,44.257784519021, 21.62918984375, 60.752403080295)),81989)) = 'TRUE' 
```

编辑：值得注意的是，这必须在单个语句中完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:51:20.440

您可以通过将 sdo_ordinates 选择为嵌套表来手动执行此操作，或者使用 sdo_util.getvertices.. 但这并没有真正让您受益。

```
with mbr as 
(select rownum coord_seq, column_value coord from table (select sdo_aggr_mbr(shape).sdo_ordinates 
  from <table_name>)) 
 select (select coord x1 from mbr where coord_seq = 1) x1
      , (select coord y1 from mbr where coord_seq = 2) y1
      , (select coord x2 from mbr where coord_seq = 3) x2
      , (select coord y2 from mbr where coord_seq = 4) y2
   from dual; 
```

显然，您需要对其进行调整以合并您的 SQL。

这不是很漂亮 - 我敢肯定有更好的方法来做到这一点。当然在 PL/SQL 或创建数据库视图/MV 以获得最佳性能。

# javascript - 处理来自 python 的 HttpResponse

> ID：12053119
> 
> 赞同：0
> 
> 时间：2012-08-21T10:38:06.117
> 
> 标签：javascript, python, ajax, django

我一直在尝试从我的 python 脚本（view.py）中检索一个数组到我的 HTML 页面，它看起来像这样 -

```
def archive(request):
    posts = BlogPost.objects.all()
    myVal = ["Dog Toys", "Dog Bedding", "Dog Feeding", "Health & Hygiene"]
    t = loader.get_template("archive.html")
    c = Context({'myposts' : simplejson.dumps(myVal)})
    return HttpResponse(c) 
```

我在 test.html 上的 JavaScript 看起来像这样 -

```
<script>
    var results = '{{myposts}}';
    console.log(results);
</script> 
```

我在这里遇到的问题是我的数组直接打印在 HTML 页面上，这意味着我的页面源只有这个 -

```
1 : {'myposts': '["Dog Toys", "Dog Bedding", "Dog Feeding", "Health & Hygiene"]'} 
```

我确信有办法克服这个问题，只是不知道该怎么做，我是第一次使用 Python/Django 和 JavaScript。

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T11:01:39.553

做就是了

```
from django.utils.safestring import mark_safe
c = Context({'myposts' : mark_safe(myVal)) 
```

然后你需要省略引号来获得一个数组：

```
var results = {{myposts}}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T11:05:36.150

代替

```
var results = '{{myposts}}'; 
```

和

```
var results = '{% for post in myposts %} {{ post }}, {% endfor %}'; 
```

您在 html 中生成 javascript。您可以直接将列表传输到模板：

```
c = Context({'myposts' : myVal}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T11:12:08.970

接下来我可以添加到 Hellpain 的答案中：

```
var result = "{{myposts|join:'/'}}".split('/'); 
```

因此，首先将 python 列表加入字符串，然后由 javascript 拆分为数组

# c# - WPFToolkit CheckComboBox 宽度问题

> ID：12053121
> 
> 赞同：2
> 
> 时间：2012-08-21T10:38:21.637
> 
> 标签：c#, wpf, xaml, wpftoolkit

我在应用程序中使用 CheckComboBox （来自[Extended WPF Toolkit](http://wpftoolkit.codeplex.com/)），我想让“文本框”显示所选项目的宽度更宽一些，（事实上，我希望它填充所有 CheckComboBox）但我对如何应用样式一无所知。

![CheckComboBox 有问题](../Images/74b8d3def63c2e7c59ba766c8648fd19.png)

有什么帮助吗？

谢谢！

* * *

当前代码

```
 <UserControl
 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
 xmlns:xctk="http://schemas.xceed.com/wpf/xaml/toolkit">
 <!-- ... -->
 <Label Content="Locale: "/>
 <xctk:CheckComboBox Name="LocaleSelector" ItemsSource="{Binding Locales}" ValueMemberPath="Id" SelectedValue="{Binding SelectedLocales}" Margin="5 2 0 2" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T12:54:31.980

我终于把它放到了 UserControl.Resources 中，并将样式应用到 CheckComboBox

```
<Style x:Key="MyCustomStyle" TargetType="{x:Type xctk:CheckComboBox}">
    <Style.Resources>
        <Style TargetType="{x:Type TextBox}">
            <Setter Property="HorizontalAlignment" Value="Stretch" />
        </Style>
    </Style.Resources>
</Style>
<!-- ... -->
<xctk:CheckComboBox Name="LocaleSelector" ItemsSource="{Binding Locales}" ValueMemberPath="Id" SelectedValue="{Binding SelectedLocales}" Style="{StaticResource MyCustomStyle" Margin="5 2 0 2" /> 
```

# windbg - 如何连接windbg和virtualbox

> ID：12053123
> 
> 赞同：3
> 
> 时间：2012-08-21T10:38:36.293
> 
> 标签：windbg, virtualbox

> 如何将主机上的 windows 调试器和其他开发工具连接到 oracle virtualbox 上的 windows xp

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T12:55:41.997

可以在两台机器上安装WinDbg，然后远程调试，

[http://msdn.microsoft.com/en-us/library/windows/hardware/hh451173(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/hh451173(v=vs.85).aspx)

# php - 获取 MP3 持续时间的 PHP 函数

> ID：12053125
> 
> 赞同：36
> 
> 时间：2012-08-21T10:38:48.773
> 
> 标签：php, mp3

是否有任何 PHP 函数可以为我提供 MP3 持续时间。我查看了 ID 3 功能，但我没有看到任何东西，除此之外，id3 是某种标签，在所有 MP3 中都不会存在，因此使用它没有任何意义。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-08-21T10:44:10.913

这应该对你有用，注意 getduration 函数：[http ://www.zedwood.com/article/127/php-calculate-duration-of-mp3](http://www.zedwood.com/article/127/php-calculate-duration-of-mp3)

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-08-21T10:42:55.177

安装getid3，但如果你只需要duration，你可以删除除这些模块之外的所有模块：

*   模块.audio.mp3.php
*   module.tag.id3v1.php
*   module.tag.apetag.php
*   module.tag.id3v2.php

使用如下代码访问持续时间：

```
$getID3 = new getID3;
$ThisFileInfo = $getID3->analyze($pathName);
$len= @$ThisFileInfo['playtime_string']; // playtime in minutes:seconds, formatted string 
```

在[Sourceforge获取](http://getid3.sourceforge.net/)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2017-05-13T05:57:58.950

我已经过了这么多时间，但没有 getID3 ( [http://getid3.sourceforge.net/](http://getid3.sourceforge.net/) ) 来获取音频文件的持续时间是不可能的。

1）首先使用以下链接下载getID3库：

```
 https://github.com/JamesHeinrich/getID3/archive/master.zip 
```

2）试试下面的代码：

```
 <?php
       include("getid3/getid3.php");
       $filename = 'bcd4ecc6bf521da9b9a2d8b9616d1505.wav';
       $getID3 = new getID3;
       $file = $getID3->analyze($filename);
       $playtime_seconds = $file['playtime_seconds'];
       echo gmdate("H:i:s", $playtime_seconds);
    ?> 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-03-06T02:06:04.653

您可以使用 ffmpeg 获取 mp3 或许多其他音频/视频文件的持续时间。

1.  在您的服务器中安装 ffmpeg。
2.  确保 php shell_exec 在您的 php.ini 中不受限制。

    ```
     // Discriminate only the audio/video files you want
        if(preg_match('/[^?#]+\.(?:wma|mp3|wav|mp4)/', strtolower($file))){
            $filepath = /* your file path */;
            // execute ffmpeg form linux shell and grab duration from output
            $result = shell_exec("ffmpeg -i ".$filepath.' 2>&1 | grep -o \'Duration: [0-9:.]*\'');
            $duration = str_replace('Duration: ', '', $result); // 00:05:03.25

            //get the duration in seconds
            $timeArr = preg_split('/:/', str_replace('s', '', $duration[0]));
            $t = $this->_times[$file] = (($timeArr[3])? $timeArr[3]*1 + $timeArr[2] * 60 + $timeArr[1] * 60 * 60 : $timeArr[2] + $timeArr[1] * 60)*1000;

        } 
    ```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-04-21T06:14:59.873

```
<?php
class MP3File
{
protected $filename;
public function __construct($filename)
{
    $this->filename = $filename;
}

public static function formatTime($duration) //as hh:mm:ss
{
    //return sprintf("%d:%02d", $duration/60, $duration%60);
    $hours = floor($duration / 3600);
    $minutes = floor( ($duration - ($hours * 3600)) / 60);
    $seconds = $duration - ($hours * 3600) - ($minutes * 60);
    return sprintf("%02d:%02d:%02d", $hours, $minutes, $seconds);
}

//Read first mp3 frame only...  use for CBR constant bit rate MP3s
public function getDurationEstimate()
{
    return $this->getDuration($use_cbr_estimate=true);
}

//Read entire file, frame by frame... ie: Variable Bit Rate (VBR)
public function getDuration($use_cbr_estimate=false)
{
    $fd = fopen($this->filename, "rb");

    $duration=0;
    $block = fread($fd, 100);
    $offset = $this->skipID3v2Tag($block);
    fseek($fd, $offset, SEEK_SET);
    while (!feof($fd))
    {
        $block = fread($fd, 10);
        if (strlen($block)<10) { break; }
        //looking for 1111 1111 111 (frame synchronization bits)
        else if ($block[0]=="\xff" && (ord($block[1])&0xe0) )
        {
            $info = self::parseFrameHeader(substr($block, 0, 4));
            if (empty($info['Framesize'])) { return $duration; } //some corrupt mp3 files
            fseek($fd, $info['Framesize']-10, SEEK_CUR);
            $duration += ( $info['Samples'] / $info['Sampling Rate'] );
        }
        else if (substr($block, 0, 3)=='TAG')
        {
            fseek($fd, 128-10, SEEK_CUR);//skip over id3v1 tag size
        }
        else
        {
            fseek($fd, -9, SEEK_CUR);
        }
        if ($use_cbr_estimate && !empty($info))
        { 
            return $this->estimateDuration($info['Bitrate'],$offset); 
        }
    }
    return round($duration);
}

private function estimateDuration($bitrate,$offset)
{
    $kbps = ($bitrate*1000)/8;
    $datasize = filesize($this->filename) - $offset;
    return round($datasize / $kbps);
}

private function skipID3v2Tag(&$block)
{
    if (substr($block, 0,3)=="ID3")
    {
        $id3v2_major_version = ord($block[3]);
        $id3v2_minor_version = ord($block[4]);
        $id3v2_flags = ord($block[5]);
        $flag_unsynchronisation  = $id3v2_flags & 0x80 ? 1 : 0;
        $flag_extended_header    = $id3v2_flags & 0x40 ? 1 : 0;
        $flag_experimental_ind   = $id3v2_flags & 0x20 ? 1 : 0;
        $flag_footer_present     = $id3v2_flags & 0x10 ? 1 : 0;
        $z0 = ord($block[6]);
        $z1 = ord($block[7]);
        $z2 = ord($block[8]);
        $z3 = ord($block[9]);
        if ( (($z0&0x80)==0) && (($z1&0x80)==0) && (($z2&0x80)==0) && (($z3&0x80)==0) )
        {
            $header_size = 10;
            $tag_size = (($z0&0x7f) * 2097152) + (($z1&0x7f) * 16384) + (($z2&0x7f) * 128) + ($z3&0x7f);
            $footer_size = $flag_footer_present ? 10 : 0;
            return $header_size + $tag_size + $footer_size;//bytes to skip
        }
    }
    return 0;
}

public static function parseFrameHeader($fourbytes)
{
    static $versions = array(
        0x0=>'2.5',0x1=>'x',0x2=>'2',0x3=>'1', // x=>'reserved'
    );
    static $layers = array(
        0x0=>'x',0x1=>'3',0x2=>'2',0x3=>'1', // x=>'reserved'
    );
    static $bitrates = array(
        'V1L1'=>array(0,32,64,96,128,160,192,224,256,288,320,352,384,416,448),
        'V1L2'=>array(0,32,48,56, 64, 80, 96,112,128,160,192,224,256,320,384),
        'V1L3'=>array(0,32,40,48, 56, 64, 80, 96,112,128,160,192,224,256,320),
        'V2L1'=>array(0,32,48,56, 64, 80, 96,112,128,144,160,176,192,224,256),
        'V2L2'=>array(0, 8,16,24, 32, 40, 48, 56, 64, 80, 96,112,128,144,160),
        'V2L3'=>array(0, 8,16,24, 32, 40, 48, 56, 64, 80, 96,112,128,144,160),
    );
    static $sample_rates = array(
        '1'   => array(44100,48000,32000),
        '2'   => array(22050,24000,16000),
        '2.5' => array(11025,12000, 8000),
    );
    static $samples = array(
        1 => array( 1 => 384, 2 =>1152, 3 =>1152, ), //MPEGv1,     Layers 1,2,3
        2 => array( 1 => 384, 2 =>1152, 3 => 576, ), //MPEGv2/2.5, Layers 1,2,3
    );
    //$b0=ord($fourbytes[0]);//will always be 0xff
    $b1=ord($fourbytes[1]);
    $b2=ord($fourbytes[2]);
    $b3=ord($fourbytes[3]);

    $version_bits = ($b1 & 0x18) >> 3;
    $version = $versions[$version_bits];
    $simple_version =  ($version=='2.5' ? 2 : $version);

    $layer_bits = ($b1 & 0x06) >> 1;
    $layer = $layers[$layer_bits];

    $protection_bit = ($b1 & 0x01);
    $bitrate_key = sprintf('V%dL%d', $simple_version , $layer);
    $bitrate_idx = ($b2 & 0xf0) >> 4;
    $bitrate = isset($bitrates[$bitrate_key][$bitrate_idx]) ? $bitrates[$bitrate_key][$bitrate_idx] : 0;

    $sample_rate_idx = ($b2 & 0x0c) >> 2;//0xc => b1100
    $sample_rate = isset($sample_rates[$version][$sample_rate_idx]) ? $sample_rates[$version][$sample_rate_idx] : 0;
    $padding_bit = ($b2 & 0x02) >> 1;
    $private_bit = ($b2 & 0x01);
    $channel_mode_bits = ($b3 & 0xc0) >> 6;
    $mode_extension_bits = ($b3 & 0x30) >> 4;
    $copyright_bit = ($b3 & 0x08) >> 3;
    $original_bit = ($b3 & 0x04) >> 2;
    $emphasis = ($b3 & 0x03);

    $info = array();
    $info['Version'] = $version;//MPEGVersion
    $info['Layer'] = $layer;
    //$info['Protection Bit'] = $protection_bit; //0=> protected by 2 byte CRC, 1=>not protected
    $info['Bitrate'] = $bitrate;
    $info['Sampling Rate'] = $sample_rate;
    $info['Framesize'] = self::framesize($layer, $bitrate, $sample_rate, $padding_bit);
    $info['Samples'] = $samples[$simple_version][$layer];
    return $info;
}

private static function framesize($layer, $bitrate,$sample_rate,$padding_bit)
{
    if ($layer==1)
        return intval(((12 * $bitrate*1000 /$sample_rate) + $padding_bit) * 4);
    else //layer 2, 3
        return intval(((144 * $bitrate*1000)/$sample_rate) + $padding_bit);
}
}
?>
<?php
$mp3file = new MP3File("Chal_Halke.mp3");//http://www.npr.org/rss/podcast.php?id=510282
$duration1 = $mp3file->getDurationEstimate();//(faster) for CBR only
$duration2 = $mp3file->getDuration();//(slower) for VBR (or CBR)
echo "duration: $duration1 seconds"."\n";

?> 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-08-21T10:44:45.377

没有本机 php 函数可以执行此操作。

根据您的服务器环境，您可以使用[MP3Info](http://www.ibiblio.org/mp3info/)等工具。

```
$length = shell_exec('mp3info -p "%S" sample.mp3');   // total time in seconds 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-21T10:47:24.970

MP3 长度不会存储在任何地方（以“普通”MP3 格式），因为 MP3 被设计为“拆分”为帧，并且这些帧将保持可播放。

[http://mpgedit.org/mpgedit/mpeg_format/mpeghdr.htm](http://mpgedit.org/mpgedit/mpeg_format/mpeghdr.htm)

如果您没有可依赖的 ID 标签，您需要做的（有执行此操作的工具和 PHP 类）是读取整个 MP3 文件并对每个帧的持续时间求和。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-08-27T13:31:42.207

```
$getID3 = new getID3;
$ThisFileInfo = $getID3->analyze($pathName);

// playtime in minutes:seconds, formatted string
$len = @$ThisFileInfo['playtime_string']; 

//don't get playtime_string, but get playtime_seconds
$len = @$ThisFileInfo['playtime_seconds']*1000; //*1000 as calculate millisecond 
```

我希望这可以帮助你。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-09-26T19:31:06.597

最后，我用自己的计算开发了一个解决方案。此解决方案最适合**mp3**和**WAV**文件格式。然而，预计会有微小的精度变化。解决方案是在**PHP**中。[我从WAV](https://en.wikipedia.org/wiki/WAV)中得到一点线索

```
function calculateFileSize($file){

    $ratio = 16000; //bytespersec

    if (!$file) {

        exit("Verify file name and it's path");

    }

    $file_size = filesize($file);

    if (!$file_size)
        exit("Verify file, something wrong with your file");

    $duration = ($file_size / $ratio);
    $minutes = floor($duration / 60);
    $seconds = $duration - ($minutes * 60);
    $seconds = round($seconds);
    echo "$minutes:$seconds minutes";

}

$file = 'apple-classic.mp3'; //Enter File Name mp3/wav
calculateFileSize($file); 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-09-12T18:25:21.127

如果您安装了 FFMpeg，使用 FFProbe 获取持续时间非常简单

```
$filepath = 'example.mp3';
$ffprobe = \FFMpeg\FFProbe::create();
$duration = $ffprobe->format($filepath)->get('duration');

echo gmdate('H:i:s', $duration); 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-09-26T19:59:48.863

如前所述，我为**mp3**和**WAV**文件提供了一个解决方案，现在这个解决方案专门针对唯一一个比早期解决方案更**精确**但**评估时间更长的****WAV文件。**

 ****```
function calculateWavDuration( $file ) {

    $fp = fopen($file, 'r');

    if (fread($fp, 4) == "RIFF") {

        fseek($fp, 20);
        $raw_header = fread($fp, 16);
        $header = unpack('vtype/vchannels/Vsamplerate/Vbytespersec/valignment/vbits', $raw_header);
        $pos = ftell($fp);

        while (fread($fp, 4) != "data" && !feof($fp)) {

            $pos++;
            fseek($fp, $pos);

        }

        $raw_header = fread($fp, 4);
        $data = unpack('Vdatasize', $raw_header);
        $sec = $data[datasize] / $header[bytespersec];
        $minutes = intval(($sec / 60) % 60);
        $seconds = intval($sec % 60);

        return str_pad($minutes, 2, "0", STR_PAD_LEFT) . ":" . str_pad($seconds, 2, "0", STR_PAD_LEFT);

    }

}

$file = '1.wav'; //Enter File wav
calculateWavDuration($file); 
```****

# php - jquery表单提交依旧刷新

> ID：12053128
> 
> 赞同：0
> 
> 时间：2012-08-21T10:38:57.073
> 
> 标签：php, javascript, jquery, html, ajax

我正在尝试将 ajax 表单提交添加到我正在使用 jquery 开发的 PHP Web 应用程序中。表单正在提交并写入数据库，但它仍然会通过刷新完成所有操作。

这是我的代码：

```
$("form#form_customer").submit(function() {
            var customer123first_name = $('input[name=customer123first_name.]');
            var customer123last_name = $('input[name=customer123last_name.]');
            var customer123date_of_birth = $('input[name=customer123date_of_birth.]');
            var customer123email_address = $('input[name=customer123email_address.]');
            var customer123telephone_number = $('input[name=customer123telephone_number.]');
            var customer123picture = $('input[name=customer123picture.]');
            var customer123id_picture = $('input[name=customer123id_picture.]');
            var customer123id_expiration = $('input[name=customer123id_expiration.]');
            var data = 'customer123first_name=' + customer123first_name.val() + '&customer123last_name=' + customer123last_name.val() + '&customer123date_of_birth=' + customer123date_of_birth.val() + '&customer123email_address=' + customer123email_address.val() + '&customer123telephone_number=' + customer123telephone_number.val() + '&customer123picture=' + customer123picture.val() + '&customer123id_picture=' + customer123id_picture.val() + '&customer123id_expiration=' + customer123id_expiration.val();
            $.ajax({
                url: "inc/createObject.php",
                type: "POST",
                data: data,
                cache: false,
                success: function(data){
                    $('form_success').fadeIn();
                }
            });
            return false;
        }); 
```

我在网上阅读的有关此特定问题的所有内容都发现该`return false;`呼叫位于错误的位置或根本不存在。我已经检查过我的位置是否正确，但我找不到它令人耳目一新的原因。

我知道 jquery 正在工作，因为我使用它来执行运行良好的弹出窗口。

如果您想在上下文中查看代码，请访问 www.sfyfe.com/studioadmin

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T10:51:31.227

问题是由行中选择器末尾的点引起的`$('input[name=customer123...`。点没有做任何事情，它使选择器无效。删除这些点应该可以解决问题。希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T10:44:47.797

也许

```
$("form#form_customer").submit(function(e) {
  e.preventDefault();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T10:54:13.253

您应该以 JSON 格式发送数据，使用：“数据：数据”无效，尝试：

```
 $.ajax({
        url: "inc/createObject.php",
        type: "POST",
        data:{dataField : data }, 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T11:19:32.430

你的代码应该是这样的。

```
$("form#form_customer").submit(function() {
            var customer123first_name = $('input[name=customer123first_name]');
            var customer123last_name = $('input[name=customer123last_name]');
            var customer123date_of_birth = $('input[name=customer123date_of_birth]');
            var customer123email_address = $('input[name=customer123email_address]');
            var customer123telephone_number = $('input[name=customer123telephone_number]');
            var customer123picture = $('input[name=customer123picture]');
            var customer123id_picture = $('input[name=customer123id_picture]');
            var customer123id_expiration = $('input[name=customer123id_expiration]');
            var data = 'customer123first_name=' + customer123first_name.val() + '&customer123last_name=' + customer123last_name.val() + '&customer123date_of_birth=' + customer123date_of_birth.val() + '&customer123email_address=' + customer123email_address.val() + '&customer123telephone_number=' + customer123telephone_number.val() + '&customer123picture=' + customer123picture.val() + '&customer123id_picture=' + customer123id_picture.val() + '&customer123id_expiration=' + customer123id_expiration.val();
            $.ajax({
                url: "inc/createObject.php",
                type: "POST",
                data: data,
                cache: false,
                success: function(data){
                    $('form_success').fadeIn();
                }
            });
            return false;
        }); 
```

# objective-c - 试图在 xcode 中跟踪错误

> ID：12053131
> 
> 赞同：3
> 
> 时间：2012-08-21T10:39:06.043
> 
> 标签：objective-c

当我启动我的应用程序时，我收到下面详细说明的错误。如果我继续应用程序，一切似乎都工作正常。在调用 applicationWillFinishLaunching 和 applicationDidFinishLaunching 之间会引发错误。

我怀疑在加载 xib 时会产生错误，但是我看不出 xib 及其连接方式没有任何问题。谁能给我一些关于如何追溯以找到错误来源的提示？

谢谢，

```
2012-08-21 11:31:55.293 ConjugationViewer[32508:707] *** Assertion failure in -[NSTextFieldCell _objectValue:forString:errorDescription:], /SourceCache/AppKit/AppKit-1138.47/AppKit.subproj/NSCell.m:1564
2012-08-21 11:31:55.303 ConjugationViewer[32508:707] Ignoring exception raised in __-[NSPersistentUIManager restoreAllPersistentStateWithTalagentWindows:registeringAsReadyWhenDone:completionHandler:]_block_invoke_3: Invalid parameter not satisfying: aString != nil 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-07-29T10:33:09.670

我有同样的问题。

就我而言，我已经设置

`[NSTextField setStringValue:nil]`因为失误。

您可以使用**崩溃堆栈日志**跟踪代码中的问题。

日志将函数调用显示为堆栈从底部开始。您可以搜索函数的最后一次调用，之后调用可可函数。您可以说同一功能存在问题。

# sencha-touch - Android后退按钮单击显示空白页

> ID：12053135
> 
> 赞同：0
> 
> 时间：2012-08-21T10:39:13.563
> 
> 标签：sencha-touch, extjs, sencha-touch-2, sencha-architect

我是新来的煎茶。几乎花了 2 天时间来了解 sencha 路由/历史支持以实现 android 后退按钮。但尽管导航正常，但总是出现空白屏幕。请帮助我找出我做错了什么或我的应用程序架构有什么问题。

应用程序.js

```
Ext.application({
    name: "WorkFlow",

    models: [],
    stores: [],
    controllers: ["WFController"],
    views: ["LoginForm","WorkList"],

    launch: function () {

         var loginForm = {
             xtype: "loginform"
         }; 

         var workList = {
                 xtype: "worklist"
         };

        Ext.Viewport.add([loginForm,workList]);

    // set up a listener to handle the back button for Android 
        if (Ext.os.is('Android')) {

          document.addEventListener("backbutton", Ext.bind(onBackKeyDown, this), false);  

          function onBackKeyDown(e) {

              e.preventDefault();

              // you are at the home screen
              if (Ext.Viewport.getActiveItem().xtype == loginForm.xtype ) {

              navigator.app.exitApp();
              }else {

                      this.getApplication().getHistory().add(Ext.create('Ext.app.Action', {
                      url: 'loginForm'
                  }));
              }
          }
       }

    }
}); 
```

登录表单.js

```
var formPanel = null;

Ext.define("WorkFlow.view.LoginForm", {
    extend: "Ext.form.Panel",
    alias: "widget.loginform",

    initialize: function () {

     this.callParent(arguments);

     formPanel = Ext.create('Ext.form.Panel', {
            fullscreen: true,

              items: [{
                        xtype: 'titlebar',
                        title: 'Login',
                        docked: 'top'
                    },
                    {
                    xtype: 'fieldset',
                    items: [
                    {
                        xtype: 'textfield',
                        name : 'username',
                        label: 'Username',
                    },
                    {
                        xtype: 'passwordfield',
                        name : 'password',
                        label: 'Password',
                    },
                    {
                        xtype: 'textfield',
                        name : 'deviceId',
                        label: 'Device Id',
                    }
                ]
            }]
        });

       formPanel.add({
            xtype: 'toolbar',
            docked: 'bottom',
            layout: { pack: 'center' },
            items: [
                {
                    xtype: 'button',
                    text: 'Login',
                    handler: this.onLoginTap,
                    scope: this
                },
                {
                    xtype: 'button',
                    text: 'Cancel',
                    handler: function() {
                        formPanel.reset();
                    }
                }
            ]
        });

    },

    onLoginTap: function() {
        this.fireEvent("loginCommand", this);
    },

}); 
```

工作清单.js

```
Ext.define("WorkFlow.view.WorkList", {
    extend: "Ext.form.Panel",
    alias: "widget.worklist",
   config:{
   html: 'This is worklist...',

   } 
}); 
```

WFController.js

```
Ext.define("WorkFlow.controller.WFController", {
    extend: "Ext.app.Controller",

     config: {
          refs: {

            loginForm: "loginform",
            workList: "worklist",
        },
        control: {
            loginForm: {
                loginCommand: "onLoginCommand",
            }
        },
        routes: {
            'loginForm': 'activateLoginFormPage'
        }
    },
    activateLoginFormPage: function(){
            Ext.Viewport.animateActiveItem(this.getLoginForm(), this.slideRightTransition);    
    },

     slideLeftTransition: { type: 'slide', direction: 'left' },
    slideRightTransition: { type: 'slide', direction: 'right' },

   onLoginCommand: function () {

      var values = formPanel.getValues();
     window.plugins.AuthPlugin.authenticate(values.username,values.passwordvalues.deviceId,values,
      function loginCallBack(result){

           if(result=="PASSWORD_MATCH"){

            loginForm.onLoginSuccess();
           }
        });
    },

     onLoginSuccess: function(){

    this.getApplication().getHistory().add(Ext.create('Ext.app.Action', {
    url: 'loginFormroute/workList'
    }));

       Ext.Viewport.animateActiveItem(this.getWorkList(), this.slideRightTransition);     
    },

    launch: function () {
    },
    init: function () {
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T22:31:15.313

不完全确定您要完成什么，但如果它只是常规导航（按返回以返回上一个选项卡等），那么您不需要将任何东西绑定到 android 后退按钮。您应该使用路线并为用户采取的每一步创建一个历史记录项。

示例：我有一个带有两个选项卡的应用程序，其中一个选项卡中有一个位置列表，第二个选项卡中有一个标有相同位置的地图。按下列表项或地图中的位置会生成相同的详细信息屏幕。所以这就是我要让它工作的原因：

路线：

```
 routes: {
        'tab/:tabId': 'gotoTab',
        'details/:stnId': 'viewDetails'
    }, 
```

重要部分：确保为每个步骤*创建*历史项目，我在这个应用程序中基本上有两个，一个用于更改选项卡，一个用于打开详细信息页面。所以，标签：

```
//If I change to the 'map' tab, it will navigate the browser to myapp.com/#tab/map
// and therefore creating a history item.
onTabpanelActiveItemChange: function(container, value, oldValue, options) {
    this.getApplication().getHistory().add(new Ext.app.Action({
        url: 'tab/' + value.id
    }), true);
}, 
```

与我的详细信息页面类似，只是它是从两个单独的处理程序（一个用于列表，一个用于地图）调用的函数：

```
showDetails: function(record, staticUrl, doUpdate) {
/*some logic stripped out*/
  this.getApplication().getHistory().add(new Ext.app.Action({
      url: 'details/' + record.data.id
  }), true);
} 
```

在此之后，您或多或少地准备好了，如果您可以保证用户始终从主页开始。如果您启用深度链接等，则需要恢复这些链接的状态。例如，#/tab/map/ 链接应该在地图选项卡处于活动状态的情况下打开应用程序。

如果我们以我的详细信息页面为例，我们有几件事要做。首先重新创建历史记录（在我的应用程序默认情况下，在详细信息页面上按返回到选项卡列表），然后确保商店已加载等等。

最后一个例子，我的 viewDetails 路线：

```
 var store = Ext.StoreManager.get("dcStations");
//recreate history
this.getApplication().getHistory().add(new Ext.app.Action({
    url: 'tab/list'
}), true);
this.getApplication().getHistory().add(new Ext.app.Action({
    url: 'details/' + stnId
}), true);
//make sure the store is loaded, then show the details page with passed id
store.on("load", function() {
    this.showDetails(Ext.StoreManager.get("dcStations").getById(stnId));
}, this); 
```

希望这能促进您开始使用路线和历史管理

# sql-server-2008 - Sql Server：十进制存储问题

> ID：12053143
> 
> 赞同：0
> 
> 时间：2012-08-21T10:39:31.067
> 
> 标签：sql-server-2008, decimal

即使实际值为 34.25，十进制（18,2）是否会比十进制（6,2）使用更多的存储空间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T10:47:15.660

所需的存储空间由您在表中定义的精度和规模定义。

请参阅有关[类型](http://msdn.microsoft.com/en-us/library/ms187746.aspx)[的 MSDN 文档`decimal`](http://msdn.microsoft.com/en-us/library/ms187746.aspx)。

在`decimal(18, 2)`您的情况下，您将使用**9 个字节**- 无论该列中存储什么值。

使用`decimal(6, 2)`，您将使用**5 个字节**。

企业（或开发人员）SKU 中的 SQL Server 2008 及更高版本也有一个`vardecimal`标志，可以优化十进制值的存储。[在 SQL Server 存储引擎团队博客上阅读有关它的更多信息](http://blogs.msdn.com/b/sqlserverstorageengine/archive/2006/11/13/enabling-vardecimal-storage-format.aspx)

# c# - Web 和控制台应用程序的一种逻辑实现？

> ID：12053146
> 
> 赞同：0
> 
> 时间：2012-08-21T10:39:46.677
> 
> 标签：c#, asp.net-mvc, console

我是 C# 控制台应用程序的新手。

我有一个问题：我想使用实体框架创建一个 MVC 项目，我已经制定了一些逻辑来将数据导入另一个表。

现在根据客户要求，我需要为相同的逻辑创建一个控制台应用程序。

现在我的问题是：如何在控制台应用程序中使用我的 mvc 应用程序逻辑？

因此，如果我需要对我的代码进行任何更改，我只需要在 Web 应用程序中进行更改，而不是在控制台应用程序中进行更改。

请提出一种提高我的逻辑效率的好方法

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T10:53:58.700

你最终会得到 3 个项目；

*   网络应用程序
*   控制台应用程序
*   共享库

* * *

你会做的是，

1.  重构共享逻辑，使其存在于单独的方法中，并且不依赖于特定于 Web 应用程序的任何共享状态。
2.  测试 Web 应用程序仍然有效。
3.  取出共享逻辑并将其放入共享库中。
4.  从您的 Web 应用程序添加对共享库的引用。
5.  更改 Web 应用程序以从 Web 应用程序调用共享库中的函数。
6.  测试以确保它仍然有效。
7.  创建您的控制台应用程序。
8.  从控制台应用程序添加对共享库的引用。
9.  根据需要从控制台应用程序调用共享库中的函数。
10.  测试以确保它有效
11.  耶，你完成了！\o/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T11:16:44.573

要详细说明 George 的回答，您需要在您的应用程序中实现 SOC（关注点分离）。MVC 是一个可以帮助您做到这一点的框架，还有 MVP 在您的情况下甚至可能是一个更好的解决方案。

# math - 动态变量名 smarty

> ID：12053148
> 
> 赞同：0
> 
> 时间：2012-08-21T10:40:00.140
> 
> 标签：math, variables, dynamic, smarty

我想将数字相加，这些数字来自 smarty 的数组。以下代码显示了购物车中每种不同产品的总价格。

```
{foreach name=aussen item=data from=$cart_data}
{$data.products_final_price.plain}
{/foreach} 
```

有没有办法把所有的单数加起来？

我想给每个 {$data.products_final_price.plain} 变量一个不同的名称，这取决于 foreach 经历的循环数量。例如： number1 number2 number3 然后用 smarty math equation 将它们相加。

我想出了如何使用计数器，但不知道如何在每次循环时给我的变量一个不同的名称。

这听起来令人困惑...

非常感谢您提前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T11:35:42.460

Smarty3：

```
{$foo = 0}
{foreach name=aussen item=data from=$cart_data}
  {$foo = $foo + $data.products_final_price.plain}
{/foreach} 
```

聪明2：

```
{assign var="foo" value=0}
{foreach name=aussen item=data from=$cart_data}
  {assign var"foo"  value=$foo+$data.products_final_price.plain}
{/foreach} 
```

如果你被 Smarty2 卡住了，考虑使用[{math}](http://www.smarty.net/docs/en/language.function.math.tpl)来处理更复杂的方程

# ruby-on-rails - 在 Rails 中导出为 CSV

> ID：12053149
> 
> 赞同：5
> 
> 时间：2012-08-21T10:40:00.477
> 
> 标签：ruby-on-rails, csv, export

我需要将所有内容从一个表导出到 CSV 文件中，我之前使用过更快的 CSV gem，但它停止使用新版本的 rails。有没有人可以使用另一种方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T17:11:53.790

Ryan Bates 有一个关于这个主题的方便的 railscast：[http ://railscasts.com/episodes/362-exporting-csv-and-excel](http://railscasts.com/episodes/362-exporting-csv-and-excel)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-19T01:31:33.140

将活动记录数据库转换为 csv 只是从控制台（w/oa 控制器或视图）直接转换为文件将是这样的

```
tags = [Model.column_names]
rows = tags + Model.all.map(&:attributes).map(&:to_a).map { |m| m.inject([]) { |data, pair| data << pair.last } }
File.open("ss.csv", "w") {|f| f.write(rows.inject([]) { |csv, row|  csv << CSV.generate_line(row) }.join(""))} 
```

# c# - VB.NET 或 C#，silverlight 数据网格绑定

> ID：12053156
> 
> 赞同：1
> 
> 时间：2012-08-21T10:40:46.670
> 
> 标签：c#, vb.net, silverlight, ado.net, entity-framework-4.1

我正在寻找一种在连接上执行 sql 的方法（任何返回数据的 sql 命令），然后将结果绑定到 silverlight datagrid，是否有这样做，

我不想使用强类型对象！

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T11:53:39.483

利用

```
dataGrid1.ItemsSource = new ItemsCollection(); 
```

在哪里`ItemsSource`继承`Collection<item>`

看看这个：[在 Silverlight 中绑定数据网格的不同方法](http://beyondrelational.com/modules/2/blogs/433/posts/12021/different-ways-to-bind-data-grid-in-silverlight.aspx)，

# django - 更新 auth_user 后调用函数

> ID：12053158
> 
> 赞同：0
> 
> 时间：2012-08-21T10:40:52.937
> 
> 标签：django, authentication, legacy

我有一个关于在 auth_user 表中更新后如何更新旧表的问题。

我想在“管理员”更改其中一个用户的数据之后对其他表进行一些更改。

修改 auth_user 的表时有没有办法调用函数？

任何帮助，将不胜感激。

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T10:47:20.713

Yoy 可以使用 post_save 信号。这正是您正在寻找的。了解更多关于[https://docs.djangoproject.com/en/1.4/topics/signals/](https://docs.djangoproject.com/en/1.4/topics/signals/)

# ios - 想要将好友列表从 twitter 显示到 iPhone 应用程序中

> ID：12053159
> 
> 赞同：2
> 
> 时间：2012-08-21T10:41:03.040
> 
> 标签：ios, objective-c, iphone, xcode, cocoa-touch

我正在使用适用于 iOS 5 的 Twitter 和 Accounts Framework。问题是我无法使用[http://api.twitter.com/1/friends/ids.json?screen_name=%@](http://api.twitter.com/1/friends/ids.json?screen_name=%@) “这个 api获取朋友列表.但是从twitter api explorer，我得到了朋友列表。（twitter explorer api = [https://dev.twitter.com/console](https://dev.twitter.com/console)）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T13:24:49.420

我正在使用适用于 iOS 的 Twitter 原生框架。

要从 Twitter 获取好友列表，您可以这样做（四个步骤）。

1.  将 Twitter 和 Accounts Framework 添加到项目中。
2.  获取当前 Twitter 帐户实例。
3.  然后您将通过 API Request 从 Twitter 获取好友 ID 列表。
4.  最后，您可以通过 ID 获取好友名称或其他数据并放入 Array

所以...您的 .h 文件应如下所示

```
#import <UIKit/UIKit.h>
#import <Twitter/Twitter.h>
#import <Accounts/Accounts.h>

@interface LoginView : UIViewController{    

    ACAccount *myAccount;  
    NSMutableString *paramString;  
    NSMutableArray *resultFollowersNameList;
}

@property(nonatomic,retain) ACAccount *myAccount;
@property(nonatomic, retain) NSMutableString *paramString;
@property(nonatomic, retain) NSMutableArray *resultFollowersNameList; 
```

你的 .m 文件应该是这样的..

```
Get The Twitter Account Instance
/******To check whether More then Twitter Accounts setup on device or not *****/

-(void)getTwitterAccounts {

    ACAccountStore *accountStore = [[ACAccountStore alloc] init];    
    ACAccountType *accountType = [accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter];   
    [accountStore requestAccessToAccountsWithType:accountType
                            withCompletionHandler:^(BOOL granted, NSError *error) {

    if (granted && !error) {
        accountsList = [accountStore accountsWithAccountType:accountType]; 

        int NoOfAccounts = [accountsList count]; 

        if (NoOfAccounts > 1) {      

            NSLog(@"device has more then one twitter accounts %i",NoOfAccounts);

        } 
        else 
        {
            myAccount = [accountsList objectAtIndex:0];             
            NSLog(@"device has single twitter account : 0");           

        }
    } 
    else 
    {
        // show alert with information that the user has not granted your app access, etc.
    }                                

  }];
}

/************* getting followers/friends ID list code start here *******/
// so far we have instnce of current account, that is myAccount //

-(void) getTwitterFriendsIDListForThisAccount{

    /*** url for all friends *****/
    // NSURL *url = [NSURL URLWithString:@"http://api.twitter.com/1/friends/ids.json"]; 

    /*** url for Followers only ****/
    NSURL *url = [NSURL URLWithString:@"http://api.twitter.com/1/followers/ids.json"]; 

    NSDictionary *p = [NSDictionary dictionaryWithObjectsAndKeys:myAccount.username, @"screen_name", nil];

    TWRequest *twitterRequest = [[TWRequest alloc] initWithURL:url parameters:p requestMethod:TWRequestMethodGET];
    [twitterRequest setAccount:myAccount];
    [twitterRequest performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResposnse, NSError *error)
     {
         if (error) {

         }
         NSError *jsonError = nil;
         // Convert the response into a dictionary
         NSDictionary *twitterFriends = [NSJSONSerialization JSONObjectWithData:responseData options:NSJSONWritingPrettyPrinted error:&jsonError];         

         NSArray *IDlist = [twitterFriends objectForKey:@"ids"];

         NSLog(@"response value is: %@", IDlist);        

         int count = IDlist.count;         
         for (int i=0; i<count; i++ ) {    

             [paramString appendFormat:@"%@",[IDlist objectAtIndex:i]];             

             if (i <count-1) {
                 NSString *delimeter = @",";
                 [paramString appendString:delimeter];
             }

         }

         NSLog(@"The mutable string is %@", paramString);
         [self getFollowerNameFromID:paramString];
     }
     ];

}

-(void) getFollowerNameFromID:(NSString *)ID{

    NSURL *url = [NSURL URLWithString:@"http://api.twitter.com/1/users/lookup.json"];
    NSDictionary *p = [NSDictionary dictionaryWithObjectsAndKeys:ID, @"user_id",nil];
    NSLog(@"make a request for ID %@",p);

    TWRequest *twitterRequest = [[TWRequest alloc] initWithURL:url
                                                    parameters:p
                                                 requestMethod:TWRequestMethodGET];    
   [twitterRequest setAccount:myAccount];

    [twitterRequest performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {
        if (error) {

        }
        NSError *jsonError = nil;       

        NSDictionary *friendsdata = [NSJSONSerialization JSONObjectWithData:responseData options:NSJSONWritingPrettyPrinted error:&jsonError];
     //  NSLog(@"friendsdata value is %@", friendsdata);

     //  resultFollowersNameList = [[NSArray alloc]init];
       resultFollowersNameList = [friendsdata valueForKey:@"name"];
        NSLog(@"resultNameList value is %@", resultFollowersNameList);

    }];        

} 
```

如果您对此有任何疑问，请告诉我！！很高兴能帮助你！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-02-23T05:40:11.063

在 Swift 4.2、Xcode 10.1 和 iOS 12.1 中

如果您想从 twitter 获取**好友/列表**数据，您需要使用**两个 API**。

**1) oauth2/令牌** **API**

**2) 好友/列表 API**

在**oauth2/token** api 中，您可以获得访问令牌，因为您需要好友列表的访问令牌。你需要**用户 id, screen name**。

但是在这里你**必须记住**一个重要的点。

1) 首先使用**oauth2/token** api 获取访问令牌。

2) 获取访问令牌后，使用**twitter login** api 获取**用户 ID 和屏幕名称。**

3) 现在使用**friends/list** api。

首先，如果您使用**twitter 登录，然后使用 oauth2/token api 访问令牌**，您可能会遇到**Bad Authentication data**错误。因此，请按顺序执行上述 3 个步骤。

**1）获取访问令牌代码（oauth2/token api）：**

```
func getAccessToken() {

    //RFC encoding of ConsumerKey and ConsumerSecretKey
    let encodedConsumerKeyString:String = "sx5r...S9QRw".addingPercentEncoding(withAllowedCharacters: CharacterSet.urlHostAllowed)!
    let encodedConsumerSecretKeyString:String = "KpaSpSt.....tZVGhY".addingPercentEncoding(withAllowedCharacters: CharacterSet.urlHostAllowed)!
    print(encodedConsumerKeyString)
    print(encodedConsumerSecretKeyString)
    //Combine both encodedConsumerKeyString & encodedConsumerSecretKeyString with " : "
    let combinedString = encodedConsumerKeyString+":"+encodedConsumerSecretKeyString
    print(combinedString)
    //Base64 encoding
    let data = combinedString.data(using: .utf8)
    let encodingString = "Basic "+(data?.base64EncodedString())!
    print(encodingString)
    //Create URL request
    var request = URLRequest(url: URL(string: "https://api.twitter.com/oauth2/token")!)
    request.httpMethod = "POST"
    request.setValue(encodingString, forHTTPHeaderField: "Authorization")
    request.setValue("application/x-www-form-urlencoded;charset=UTF-8", forHTTPHeaderField: "Content-Type")
    let bodyData = "grant_type=client_credentials".data(using: .utf8)!
    request.setValue("\(bodyData.count)", forHTTPHeaderField: "Content-Length")
    request.httpBody = bodyData

    let task = URLSession.shared.dataTask(with: request) { data, response, error in guard let data = data, error == nil else { // check for fundamental networking error
        print("error=\(String(describing: error))")
        return
        }

        let responseString = String(data: data, encoding: .utf8)
        let dictionary = data
        print("dictionary = \(dictionary)")
        print("responseString = \(String(describing: responseString!))")

        if let httpStatus = response as? HTTPURLResponse, httpStatus.statusCode != 200 { // check for http errors
            print("statusCode should be 200, but is \(httpStatus.statusCode)")
            print("response = \(String(describing: response))")
        }

        do {
            let response = try JSONSerialization.jsonObject(with: data, options: []) as! Dictionary<String, Any>
            print("Access Token response : \(response)")
            print(response["access_token"]!)
            self.accessToken = response["access_token"] as! String

            self.getStatusesUserTimeline(accessToken:self.accessToken)

        } catch let error as NSError {
            print(error)
        }
    }

    task.resume()
} 
```

**输出 ：**

```
{"token_type":"bearer","access_token":"AAAAAAAAAAAAAAAAAAA............xqT3t8T"} 
```

**2) 使用推特码登录**

```
@IBAction func onClickTwitterSignin(_ sender: UIButton) {

    //Login and get session
    TWTRTwitter.sharedInstance().logIn { (session, error) in

        if (session != nil) {
            //Read data
            let name = session?.userName ?? ""
            print(name)
            print(session?.userID  ?? "")
            print(session?.authToken  ?? "")
            print(session?.authTokenSecret  ?? "")

             // self.loadFollowers(userid: session?.userID ?? "")

            //Get user email id
            let client = TWTRAPIClient.withCurrentUser()
            client.requestEmail { email, error in
                if (email != nil) {
                    let recivedEmailID = email ?? ""
                    print(recivedEmailID)
                } else {
                    print("error--: \(String(describing: error?.localizedDescription))");
                }
            }
            //Get user profile image url's and screen name
            let twitterClient = TWTRAPIClient(userID: session?.userID)
            twitterClient.loadUser(withID: session?.userID ?? "") { (user, error) in
                print(user?.profileImageURL ?? "")
                print(user?.profileImageLargeURL ?? "")
                print(user?.screenName ?? "")
            }

            let storyboard = self.storyboard?.instantiateViewController(withIdentifier: "SVC") as! SecondViewController
            self.navigationController?.pushViewController(storyboard, animated: true)
        } else {
            print("error: \(String(describing: error?.localizedDescription))");
        }
    }

} 
```

**输出：**

在这里，您将获得用户名、用户 ID、authtoken、authTokenSecret、屏幕名称和电子邮件等。

**3) 现在从 friends/list api 获取好友列表**。在这里您可以获取好友/列表、用户/查找、关注者/ID、关注者/列表 api 的数据等...

```
func getStatusesUserTimeline(accessToken:String) {

    let userId = "109....456"
    let twitterClient = TWTRAPIClient(userID: userId)
    twitterClient.loadUser(withID: userId) { (user, error) in
        if user != nil {
            //Get users timeline tweets
            var request = URLRequest(url: URL(string: "https://api.twitter.com/1.1/friends/list.json?screen_name=KS....80&count=10")!) //users/lookup, followers/ids, followers/list 
            request.httpMethod = "GET"
            request.setValue("Bearer "+accessToken, forHTTPHeaderField: "Authorization")

            let task = URLSession.shared.dataTask(with: request) { data, response, error in guard let data = data, error == nil else { // check for fundamental networking error
                print("error=\(String(describing: error))")
                return
                }

      //                    let responseString = String(data: data, encoding: .utf8)
      //                    let dictionary = data
      //                    print("dictionary = \(dictionary)")
      //                    print("responseString = \(String(describing: responseString!))")

                if let httpStatus = response as? HTTPURLResponse, httpStatus.statusCode != 200 { // check for http errors
                    print("statusCode should be 200, but is \(httpStatus.statusCode)")
                    print("response = \(String(describing: response))")
                }

                do {
                    let response = try JSONSerialization.jsonObject(with: data, options: [])
                    print(response)

                } catch let error as NSError {
                    print(error)
                }
            }

            task.resume()

        }
    }

} 
```

此代码在任何地方均不可用。我为这段代码做了很多尝试，为此我花了很多时间。谢谢你。

# ios - @autoreleasepool 块中的内存泄漏

> ID：12053160
> 
> 赞同：0
> 
> 时间：2012-08-21T10:41:09.570
> 
> 标签：ios, ios5, memory-leaks, autorelease

我使用 Xcode 4.4 并使用 ARC 为 iOS 5.1 开发应用程序。我有一个线程（除了主线程），它定期调用下面的方法。

```
- (void)updateLabels:(NSTimeInterval)timeSinceLastUpdate
{
        int lastTime = self.time;
        self.scoreScale -= ((self.scoreScale-1)/5);
        self.time -= timeSinceLastUpdate;
        if (self.time <= 0) {
            self.time = 0.0;
        }
        if (lastTime != (int) self.time) {
            self.timeChanged = YES;
        }
    @autoreleasepool {
        NSString *timeString = [NSString stringWithFormat:@"%.2d:%.2d",(int)(self.time/60),((int)self.time%60)]; //leak!!!
        if (self.scoreScale <=1) self.scoreScale = 1;

        GLKBaseEffect *scoreValueEffect = [self.sprites objectForKey:@"score_value"];
        if (self.scoreChanged) {
            scoreValueEffect = [[ILUtils sharedInstance] makeEffectWithString:[NSString stringWithFormat:@"%@",self.score] alignment:UITextAlignmentLeft fontName:@"WetLetters EFN" fontSize:20 withViewSize:self.view.bounds.size withRect:CGRectMake(935, 50, 100, 30)];
        }
        scoreValueEffect.transform.modelviewMatrix = [[ILUtils sharedInstance] setupSpriteModelviewMatrixWithViewRect:CGRectMake(955, 46-(30*self.scoreScale-30)/2, 100*self.scoreScale, 30*self.scoreScale)];
        [self.sprites setObject:scoreValueEffect forKey:@"score_value"];

        if (self.timeChanged) {
            GLKBaseEffect *timeValueEffect = [[ILUtils sharedInstance] makeEffectWithString:timeString alignment:UITextAlignmentLeft fontName:@"WetLetters EFN" fontSize:24 withViewSize:self.view.bounds.size withRect:CGRectMake(955, 75, 100, 30)];
            [self.sprites setObject:timeValueEffect forKey:@"time_value"];
        }
    }
} 
```

当我使用 Instruments 时，我可以看到内存使用量随时间增加。当我注释掉创建字符串的行时，内存使用是稳定的。我还尝试使用 alloc 和 init 方法创建字符串，但没有帮助。我在[https://stackoverflow.com/questions/ask?title=@autoreleasepool%20not%20working](https://stackoverflow.com/questions/ask?title=@autoreleasepool%20not%20working)中找到了类似的线程，但启用/禁用 NSZombieEnabled 选项没有区别。

我无法弄清楚为什么所有这些字符串都没有被释放，尽管我使用了 @autorelease 块，如[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmAutoreleasePools.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmAutoreleasePools.html) .

我错过了什么？谢谢。

//EDIT 调用的东西`makeEffectWithString`：

```
- (GLKBaseEffect*)makeEffectWithString:(NSString*)string alignment:(UITextAlignment)alignment fontName:(NSString*)name fontSize:(CGFloat)size withViewSize:(CGSize)viewSize withRect:(CGRect)rect
{
    GLKBaseEffect *effect = [[GLKBaseEffect alloc] init];
    effect.texture2d0.enabled = YES;
    effect.texture2d0.name = [self textureWithString:string dimensions:rect.size alignment:alignment fontName:name fontSize:size].name;
    effect.transform.projectionMatrix = [self setupOrthoProjectionMatrixWithViewSize:viewSize];
    effect.transform.modelviewMatrix = [[ILUtils sharedInstance] setupSpriteModelviewMatrixWithViewRect:rect];
    effect.useConstantColor = YES;
    effect.constantColor = GLKVector4Make(0.7f,0.7f,0.7f,0.7f);

    return effect;
}

- (GLKTextureInfo*)textureWithString:(NSString*)string dimensions:(CGSize)dimensions alignment:(UITextAlignment)alignment fontName:(NSString*)name fontSize:(CGFloat)size
{
    UIFont *font = [UIFont fontWithName:name size:size];

    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceGray();
    CGContextRef context = CGBitmapContextCreate(nil, dimensions.width, dimensions.height, 8, dimensions.width, colorSpace, kCGImageAlphaOnly);
    CGColorSpaceRelease(colorSpace);
    CGContextSetGrayFillColor(context, 1.0, 1.0);

    UIGraphicsPushContext(context);
    [string drawInRect:CGRectMake(0, 0, dimensions.width, dimensions.height) withFont:font lineBreakMode:UILineBreakModeWordWrap alignment:alignment];
    UIGraphicsPopContext();

    NSMutableDictionary *options = [NSMutableDictionary dictionaryWithObject:[NSNumber numberWithBool:YES] forKey:GLKTextureLoaderOriginBottomLeft];
    GLKTextureInfo *texture = [GLKTextureLoader textureWithCGImage:CGBitmapContextCreateImage(context) options:options error:nil];

    CGContextRelease(context);

    return texture;

} 
```

//编辑

```
- (void)drawSpriteUsingEffect:(GLKBaseEffect*)effect
{

    glBindBuffer(GL_ARRAY_BUFFER, _vertexBuffer);
    glEnableVertexAttribArray(GLKVertexAttribPosition);
    glVertexAttribPointer(GLKVertexAttribPosition, 3, GL_FLOAT, GL_FALSE, 20, BUFFER_OFFSET(0));
    glEnableVertexAttribArray(GLKVertexAttribTexCoord0);
    glVertexAttribPointer(GLKVertexAttribTexCoord0, 2, GL_FLOAT, GL_FALSE, 20, BUFFER_OFFSET(12));

    [effect prepareToDraw];
    glDrawArrays(GL_TRIANGLES, 0, 6);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T23:53:07.130

您可以使用分配工具来“标记堆”。[这](http://www.friday.com/bbum/2010/10/17/when-is-a-leak-not-a-leak-using-heapshot-analysis-to-find-undesirable-memory-growth/)似乎有一些关于如何调试此类内存问题的说明。

# c# - 将类型转换为通用约束 T

> ID：12053161
> 
> 赞同：1
> 
> 时间：2012-08-21T10:41:15.457
> 
> 标签：c#, generics, types, casting, factory-pattern

我正在尝试建立一个提供单一工厂方法的工厂。在这个方法中我想验证传入的 Type 是否是工厂的 T。

我所写的根本行不通。我相信我理解它失败的原因，但我不确定如何正确地形成我的铸件。

下面是我的代码。关于如何形成这种条件/铸造的任何想法？

```
 public T GetFeature(Type i_FeatureType, User i_UserContext)
    {
        T typeToGet = null;

        if (i_FeatureType is T) // <--condition fails here
        {
            if (m_FeaturesCollection.TryGetValue(i_FeatureType, out typeToGet))
            {
                typeToGet.LoggenInUser = i_UserContext;
            }
            else
            {
                addTypeToCollection(i_FeatureType as T, i_UserContext);
                m_FeaturesCollection.TryGetValue(typeof(T), out typeToGet);
                typeToGet.LoggenInUser = i_UserContext;
            }
        }

        return typeToGet;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T10:45:29.370

利用：

```
 if (typeof(T).IsAssignableFrom(i_FeatureType)) 
```

代替：

```
if (i_FeatureType is T) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T10:49:03.193

您正在将您的对象与“类型”对象进行比较。

所以，而不是

如果（i_FeatureType 为 T）

尝试

if (i_FeatureType == typeof(T))

# qt - 如何在 Qt 中使用 QCA 库

> ID：12053163
> 
> 赞同：1
> 
> 时间：2012-08-21T10:41:17.087
> 
> 标签：qt, encryption, aes

我使用 QCA (qca-2.0.1-mingw) 库进行加密。我搜索了一些代码并写入应用程序。但它不支持 AES 加密标准。

例如

```
QCA::supportedFeatures();
QCA::isSupported("aes128-cbc-pkcs7"); 
```

显示 o/p

（“随机”、“md5”、“sha1”、“keystorelist”）假

为什么不支持 AES？

* * *

**谢谢 .. Frank 和 elmigranto**
现在，我已经下载了 qca-ossl-2.0.0-beta3 表单[链接](http://delta.affinix.com/qca/)并安装了 OpenSSl（Win32OpenSSL-1_0_0j.exe）。然后我按照[这个链接构建它](http://psi-im.org/wiki/Linux_Build_Instructions#Building_on_Windows_using_MinGW)

> configwin rd
> 配置发布和调试，动态
> 写 conf_win.pri
> qmake
> C:\qca-ossl-2.0.0-beta3>qmake
> 'qmake' 不被识别为内部或外部命令、
> 可运行程序或批处理文件。

此外，当我构建 qca-ossl.pro 文件时，它显示 o/p 为：
c:\qca-ossl-2.0.0-beta3\qca-ossl.pro:17: 警告：无法找到包含 winlocal.prf 的文件

接下来做什么？请帮帮我。

# windows - 如何使用 go 在 Windows 控制台中正确输出字符串？

> ID：12053168
> 
> 赞同：12
> 
> 时间：2012-08-21T10:41:42.353
> 
> 标签：windows, go, utf-8, character-encoding

我有一个`exe`打印[utf-8](http://research.swtch.com/utf8)编码字符串的 in go，其中包含特殊字符。
由于该 exe 是从控制台窗口使用的，因此它的输出被破坏，因为 Windows 使用`ibm850`编码（aka [`code page 850`](http://en.wikipedia.org/wiki/Code_page_850)）。

您将如何确保`exe`为控制台窗口打印正确编码的字符串，例如打印：

```
éèïöîôùòèìë 
```

而不是（没有任何翻译到正确的[字符集](http://jan.newmarch.name/go/charsets/chapter-charsets.html)）

```
├®├¿├»├Â├«├┤├╣├▓├¿├¼├½ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T16:48:23.520

```
// Alert: This is Windows-specific, uses undocumented methods, does not
// handle stdout redirection, does not check for errors, etc.
// Use at your own risk.
// Tested with Go 1.0.2-windows-amd64.

package main

import "unicode/utf16"
import "syscall"
import "unsafe"

var modkernel32 = syscall.NewLazyDLL("kernel32.dll")
var procWriteConsoleW = modkernel32.NewProc("WriteConsoleW")

func consolePrintString(strUtf8 string) {
    var strUtf16 []uint16
    var charsWritten *uint32

    strUtf16 = utf16.Encode([]rune(strUtf8))
    if len(strUtf16) < 1 {
        return
    }

    syscall.Syscall6(procWriteConsoleW.Addr(), 5,
        uintptr(syscall.Stdout),
        uintptr(unsafe.Pointer(&strUtf16[0])),
        uintptr(len(strUtf16)),
        uintptr(unsafe.Pointer(charsWritten)),
        uintptr(0),
        0)
}

func main() {
    consolePrintString("Hello ☺\n")
    consolePrintString("éèïöîôùòèìë\n")
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T10:41:42.353

在线书籍“[使用 Go 进行网络编程](http://jan.newmarch.name/go/)”（[CC BY-NC-SA 3.0](http://creativecommons.org/licenses/by-nc-sa/3.0/)）有一章是关于字符集（[管理字符集和编码](http://jan.newmarch.name/go/charsets/chapter-charsets.html)）的，其中[Jan Newmarch](http://jan.newmarch.name/)详细介绍了[一个字符集到另一个字符集的转换](http://jan.newmarch.name/go/charsets/chapter-charsets.html#heading_toc_j_17)。但这似乎很麻烦。

这是一个解决方案（我可能错过了一个更简单的解决方案），使用**库[go-charset](http://code.google.com/p/go-charset/)**（来自[Roger Peppe](http://code.google.com/u/rogpeppe@gmail.com/)）。
我将一个`utf-8`字符串转换为一个`ibm850`编码的字符串，允许我在 DOS 窗口中打印：

```
éèïöîôùòèìë 
```

翻译功能详解如下：

```
package main

import (
    "bytes"
    "code.google.com/p/go-charset/charset"
    _ "code.google.com/p/go-charset/data"
    "fmt"
    "io"
    "log"
    "strings"
)

func translate(tr charset.Translator, in string) (string, error) {
    var buf bytes.Buffer
    r := charset.NewTranslatingReader(strings.NewReader(in), tr)
    _, err := io.Copy(&buf, r)
    if err != nil {
        return "", err
    }
    return string(buf.Bytes()), nil
}

func Utf2dos(in string) string {
    dosCharset := "ibm850"
    cs := charset.Info(dosCharset)
    if cs == nil {
        log.Fatal("no info found for %q", dosCharset)
    }
    fromtr, err := charset.TranslatorTo(dosCharset)
    if err != nil {
        log.Fatal("error making translator from %q: %v", dosCharset, err)
    }
    out, err := translate(fromtr, in)
    if err != nil {
        log.Fatal("error translating from %q: %v", dosCharset, err)
    }
    return out
}

func main() {
    test := "éèïöîôùòèìë"
    fmt.Println("utf-8:\n", test)
    fmt.Println("ibm850:\n", Utf2dos(test))
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-07-08T20:29:14.343

自 2016 年以来，您现在（2017 年）可以考虑[`golang.org/x/text`](https://godoc.org/golang.org/x/text)，它带有一个[编码charmap](https://godoc.org/golang.org/x/text/encoding/charmap)，包括 ISO-8859 系列以及 Windows 1252 字符集。

见“ [Go Quick-Converting Character Encodings In Golang](http://technosophos.com/2016/03/09/go-quickly-converting-character-encodings.html) ”

```
r := charmap.ISO8859_1.NewDecoder().Reader(f)
io.Copy(out, r) 
```

`my_isotext.txt`这是打开 ISO-8859-1 源文本 ( )、创建目标文件 ( `my_utf.txt`) 并将第一个文件复制到第二个文件的示例的摘录。
但是为了从 ISO-8859-1 解码到 UTF-8，我们用解码器包装了原始文件读取器 ( `f`)。

我刚刚测试过（用于说明的伪代码）：

```
package main

import (
    "fmt"

    "golang.org/x/text/encoding"
    "golang.org/x/text/encoding/charmap"
)

func main() {
    t := "string composed of character in cp 850"
    d := charmap.CodePage850.NewDecoder()
    st, err := d.String(t)
    if err != nil {
        panic(err)
    }
    fmt.Println(st)
} 
```

结果是在 Windows CMD 中可读的字符串。[在这个2018 年 11 月的 reddit 线程](https://www.reddit.com/r/golang/comments/9zsipj/help_osexec_output_on_nonenglish_windows_cmd/)
中查看更多信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T00:30:10.327

这是 Go 仍然无法开箱即用的事情 - 请参阅[http://code.google.com/p/go/issues/detail?id=3376#c6](http://code.google.com/p/go/issues/detail?id=3376#c6)。

亚历克斯

# network-programming - 如何使用 openssl 提取整个证书链

> ID：12053169
> 
> 赞同：1
> 
> 时间：2012-08-21T10:41:43.830
> 
> 标签：network-programming, openssl

我正在尝试提取网站 SSL 证书链。我使用 Openssl 如下：

```
openssl s_client -connect hostname:443 -showcerts 
```

但这只是给了我第一个证书。而我需要全链证书。请问我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T12:49:11.013

这通常意味着服务器没有发送整个链。所以 openssl 不能给你。

最好的解决方案通常是从该输出中获取您可以获取的内容 - 然后通过 google 或 CA 的网站搜索 Serial、DN 和类似内容并从那里获取。并以此构建您自己的客户端链。

不幸的是，网站配置错误是很常见的。

对不起 ：）

德。

# php - 使用 jquery 显示 mysql 查询结果

> ID：12053176
> 
> 赞同：-3
> 
> 时间：2012-08-21T10:42:11.587
> 
> 标签：php, javascript, mysql, forms

我正在尝试在带有复选框的表单上显示来自 mysql 的数据。问题是如何编写显示它的 js 脚本。代码是：

```
<form id="myForm" action="pdoakcja.php" method="post"> 
<!--Instruktor: <input type="text" name="name" /> -->
Permissions:<input type="checkbox" name="M1" value="M1" />M1
<input type="checkbox" name="M2" value="M2" />M2
<input type="submit" value="Szukaj" /> 
</form>

<div id='name-data'>Instruktorzy o podanych uprawnieniach:</div>
<script src="http://code.jquery.com/jquery-1.8.0.min.js"></script>

<script> 
............??????
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T11:44:44.200

这是一个伪示例，展示了如何使用 jQuery 进行操作，当您单击复选框时，它也会更新，因此您可以完全删除提交；你说你已经有一个数据库在做这项工作，所以我不会包括它。只需复制和粘贴。

```
<?php 
//Some pseudo data kinda as your receive it from a query
$datafromSql = array(
array('id'=>1,'permission'=>'M1','theData'=>'User has M1 permission'),
array('id'=>2,'permission'=>'M2','theData'=>'User has M2 permission'),
array('id'=>3,'permission'=>'M1','theData'=>'User has M1 permission'),
array('id'=>4,'permission'=>'M1','theData'=>'User has M1 permission'),
);

//Access the data
if($_SERVER['REQUEST_METHOD']=='POST'){
    $is_ajax = false;
    if(isset($_SERVER['HTTP_X_REQUESTED_WITH']) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) === 'xmlhttprequest'){
        $is_ajax = true;
    }
    //pseudo code, really you would put your query here
    // SELECT theData FROM your_table WHERE permission=POST_VALUE ... ...

    //And then format your output
    $result=array();

    foreach($datafromSql as $row){
        if($is_ajax == true){
            foreach($_POST as $key=>$value){
                if($_POST[$key] == 'true' && $row['permission']==$key){
                    $result[]=$row['theData'].'<br />';
                }
            }
        }else{
            foreach($_POST as $key=>$value){
                if($_POST[$key] == $row['permission']){
                    $result[]=$row['theData'].'<br />';
                }
            }
        }
    }
    $result = implode('<hr />',$result);

    //AJAX Response, echo and then die.
    if($is_ajax === true){
        header('Content-Type: text/html');
        //example output sent back to the jQuery callback
        echo $result;
        //echo '<pre>'.print_r($_POST,true).'</pre>';
        die;
    }

}
?>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.2.min.js" charset="utf-8"></script>
<script type="text/javascript">
function update(){
    $.post('./<?php echo basename(__FILE__)?>',
    {
        M1:  $("#M1").is(':checked'),
        M2:  $("#M2").is(':checked')
    },
    function(data) {
        $('#result').replaceWith('<div id="result"><h1>The Result:</h1>'+ data +'</div>');
    });
}
</script>

</head>

<body>

<form method="POST" action="<?php echo basename(__FILE__)?>">
Permissions: 
<input type="checkbox" id="M1" name="M1" value="M1" onChange="update()"/>M1
<input type="checkbox" id="M2" name="M2" value="M2" onChange="update()"/>M2
<input type="submit" value="Szukaj" /> 
</form>

<p id='result'><?php echo isset($result)?$result:null;?></p>

</body>

</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T11:30:56.480

您可以通过使用 jquery 表单插件来解决您的问题，这将帮助您提交表单而无需重新加载页面并在同一页面中向您显示目标页面的返回。只需按照说明进行操作：

先下载这个jquery表单[插件](http://malsup.github.com/jquery.form.js)并保存。

然后

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
<!-- This jquery.form.js is for Submitting form data using jquery and Ajax  -->
<script type="text/javascript" src="js/jquery.form.js"></script> 
 <script type="text/javascript"> 

   $(document).ready(function() { 
    var options = { 

        success:       showResponse             

        };              
 // bind form using 'ajaxForm'              
   $('#myForm').ajaxForm(options); 
 });                    

// post-submit callback                      
 function showResponse(responseText, statusText, xhr, $form)  {                         
 if(responseText==1){

    $("#error").html('No Result Found');            

 } else{
    $("#result").html(responseText);                        

    }                   

}                                

</script>           
<form id="myForm" enctype="multipart/form-data" action="pdoakcja.php" 
 method="post"  name="myForm">

  <!--Instruktor: <input type="text" name="name" /> -->
   Permissions:<input type="checkbox" name="M1" value="M1" />M1
   <input type="checkbox" name="M2" value="M2" />M2
   <input type="submit" value="Szukaj" /> 

</form>

 <span id="error"></span>
 <span id="result"></span> 
```

您的 pdoakcja.php 文件：（我从您的另一篇文章中获得以下代码[，](https://stackoverflow.com/q/12038586/1209690)但尚未检查）

```
 <?php
 $query = mysql_query("SELECT * FROM permissions WHERE m LIKE '".$_POST['M1']."' OR m  LIKE '".$_POST['M2']."' OR mn LIKE '".$_POST['MN1']."' ");  
   if($query) {
    while($permissions = mysql_fetch_assoc($query)){
    $query2 = mysql_query("SELECT name_surname FROM instruktorzy WHERE  instruktor_id='".$permissions['instruktor_id']."'");  
     while($Mdwa = mysql_fetch_assoc($query2)){
        echo "<p style=\"font-size: 14px; font-family: Helvetica; background-color:  #FFFFFF\"> ".$Mdwa['name_surname']."<br />" ; "</p>" ;
     }
   }
 } else {echo "1";}
  ?> 
```

我希望这对你有用。有关详细信息，您可以研究 jquery 表单插件的网站。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-21T10:50:42.880

您应该使用[PHP MySQL 函数](http://php.net/manual/de/ref.mysql.php)从数据库中检索您想要的数据，然后通过 PHP 而不是 javascript 显示它们。

特别是看看这个：[mysql_fetch_assoc](http://www.php.net/manual/de/function.mysql-fetch-assoc.php) - 有一个完整的工作示例。

# java - Java 对象分配和锁定

> ID：12053178
> 
> 赞同：2
> 
> 时间：2012-08-21T10:42:18.680
> 
> 标签：java, synchronization, locking

考虑以下代码片段：

```
 Object bar1  = new ... ; 
 Object bar2 = new ... ; 

 Object foo = (either bar1 or bar2) ; 
```

现在， foo 在程序的不同时间可以是 bar1 或 bar2。我只是想检查 synchronized(foo) 是否会锁定相应的 bar1 或 bar2。鉴于没有在 Java 中复制对象，这似乎是最有可能的情况。这个对吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T10:44:22.863

```
Object bar1 = new Object();
Object foo = bar1;
synchronized(foo) {
    ...
} 
```

将锁定`foo`== `bar1`。

然而，这是一个奇怪且容易出错的结构。例如：

*   线程 1 到达您的方法和 foo == bar1
*   线程 1 到达同步块并锁定 bar1
*   线程 2 到达您的方法和 foo == bar2
*   线程 2 到达同步块并锁定 bar2

现在您有 2 个线程同时运行同步块。我真的找不到你想要那个的理由。如果你这样做了，那么块可能不应该被同步，你应该使用不同的锁定策略。

另请参阅[此相关帖子](https://stackoverflow.com/questions/6910807/synchronization-of-non-final-field)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T10:47:05.590

是的，它将锁定`foo`指向的任何对象。但是，我强烈建议你做`foo`final 以避免这样的事情：

```
Object foo = bar1;
synchronized(foo) {
   foo = bar2;
} 
```

因为它会导致几个线程看到不同的锁。另请参阅这个问题：[锁定可变对象 - 为什么它被认为是一种不好的做法？](https://stackoverflow.com/questions/9622315/locking-on-a-mutable-object-why-is-it-considered-a-bad-practice/9622347#9622347)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T10:45:44.813

是的。您不是在参考上同步，而是在*底层对象*上同步。

每个对象都有一个关联的监视器，当您使用`synchronized`. 从[这里](http://www.artima.com/insidejvm/ed2/threadsynch2.html)：

> 在 Java 虚拟机中，每个对象和类在逻辑上都与一个监视器相关联。对于对象，关联的监视器保护对象的实例变量。对于类，监视器保护类的类变量

# java - JVM如何理解JDK和Eclipse编译的字节码，而两者不同？

> ID：12053183
> 
> 赞同：0
> 
> 时间：2012-08-21T10:42:38.793
> 
> 标签：java

Eclipse和JDK编译的字节码是不同的。那么JVM是如何理解这两个字节码的呢？例子：

```
package com.hcl.raj.utilities;

public class StringTest {

  /**
   * @param args
   */
  public static void main(String[] args) {
    // TODO Auto-generated method stub
    String name = "Rajkumar";
    byte[] byteCodes = new byte[] {15,22,35,48};
    String str1 = new String(byteCodes);
    System.out.println(str1);
  }
} 
```

以上源码通过JDK和Eclipse编译出来的代码是不同的。

**由于编码和格式问题，最初尝试发布已删除的已编译代码**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T10:49:36.003

首先，是字节码不同，还是仅在类文件的其他部分有所不同？一个类文件可以包含很多可选信息（用于调试）。

但即使字节码本身不同，它们的行为也像同义词。即使在像 Java 字节码这样严格定义的语言中，您也可以用不同的方式表达相同的行为。

例如，`switch/case`语句可以编译成两种不同的操作码之一：[`tableswitch`或`lookupswitch`](https://stackoverflow.com/questions/10287700/difference-between-jvma-lookupswitch-and-tableswitch). 它们本质上都做同样的事情，因此在某些情况下，编译器或多或少可以自由地在它们之间进行选择。

重要的是，尽管这些差异都在标准字节码的限制范围内，但无论平台或任何其他外部环境如何，没有兼容 Java 的编译器会生成类似兼容的 VM 无法解释的字节码（假设它们支持相同版本的爪哇）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T11:02:02.483

JLS 中有一个[很大的章节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-13.html)专门用于指定 Java 类文件格式，这确实是首先拥有该格式的全部意义所在。`javac`编译器对其恰好生成的文件的格式没有特殊权限。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T10:58:17.357

Eclipse 在内部使用一个 SDK（它可以与您用来直接生成字节码的相同，也可以是另一个）。此外，不同的 SDK 可以生成不同的 Bytecode（例如，如果 JDK 来自不同的公司或不同的版本），但如果它们在生成字节码时满足字节码规范，它们将被同样遵循该规范的 JVM 很好地解释.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T10:48:13.323

Java 字节码是可移植的，这是 Java 的关键特性之一。[你可以在这里](https://stackoverflow.com/tags/java/info)阅读一些信息。如果您想了解这种可移植性究竟是如何工作的，您可以浏览规范。

# c - OSX Leopard 上的 NetBeans 7.1 中的 GDB 不会在库项目的断点处停止

> ID：12053185
> 
> 赞同：1
> 
> 时间：2012-08-21T10:42:49.393
> 
> 标签：c, gdb, breakpoints, osx-leopard, netbeans-7.1

这是我几周前加入 StackOverflow 以来的第一个问题，我希望有人能对这个让我发疯的问题有所了解！我已经在网上搜索过，但我找不到这个问题的成功解决方案。

我在使用 GNU GDB 在 Mac OSX 10.5.8 (Leopard) 上调试 Netbeans 7.1 时遇到了一些麻烦。我的问题是我不能轻易地从测试应用程序调试我自己的静态或动态库，因为调试器不会在该库的源代码中设置的断点处停止。但是我注意到我可以“进入”库函数，一旦我进入它们，这些函数中的断点就会触发！

我的测试平台包含 2 个简单的项目：“mylib”（一个 C 静态库）和“mylib-test”（一个 C 应用程序）。'mylib' 只包含定义函数的头文件和 ac 文件：

```
int sum(int a, int b) {
    return a+b;
} 
```

另一方面，mylib-test 源代码只是使用该函数：

```
int main(int argc, char** argv) {
    printf("Result=%d\n", sum(111, 222));
    return (EXIT_SUCCESS);
} 
```

两个项目都编译并成功执行。为方便起见，下面我记下编译/链接两个项目的输出：

**编译 mylib 的输出**：

```
gcc    -c -g -MMD -MP -MF build/Debug/GNU-MacOSX/m.o.d -o build/Debug/GNU-MacOSX/m.o m.c
mkdir -p dist/Debug/GNU-MacOSX
rm -f dist/Debug/GNU-MacOSX/libmylib.a
ar -rv dist/Debug/GNU-MacOSX/libmylib.a build/Debug/GNU-MacOSX/m.o 
ar: creating archive dist/Debug/GNU-MacOSX/libmylib.a
a - build/Debug/GNU-MacOSX/m.o
ranlib dist/Debug/GNU-MacOSX/libmylib.a 
```

**编译 mylib-test 的输出**：

```
gcc    -c -g -I../mylib -MMD -MP -MF build/Debug/GNU-MacOSX/main.o.d -o build/Debug/GNU-MacOSX/main.o main.c
mkdir -p dist/Debug/GNU-MacOSX
gcc     -o dist/Debug/GNU-MacOSX/mylib-test build/Debug/GNU-MacOSX/main.o ../mylib/dist/Debug/GNU-MacOSX/libmylib.a 
```

通过检查调试器控制台，我注意到当我在调试器上加载应用程序时，放置在库源代码中的断点被标记为“PENDING”（参见以**12^done**开头的行，字段**addr**）：

```
11-break-insert -f "/Users/claudi/dev/mylib-test/main.c:16"
12-break-insert -f "/Users/claudi/dev/mylib/m.c:5"
7^done,line="7",file="main.c",fullname="/Users/claudi/dev/mylib-test/main.c",time={wallclock="0.00065",user="0.00032",system="0.00029",start="1345544547.505531",end="1345544547.506184"}
(gdb) 
13-break-insert -t main
&"cd /Users/claudi/dev/mylib-test\n"
8^done
(gdb)
9^done,time={wallclock="0.00002",user="0.00002",system="0.00000",start="1345544547.530991",end="1345544547.531013"}
(gdb) 
&"set environment DYLD_LIBRARY_PATH=../mylib/dist/Debug/GNU-MacOSX\n"
10^done
(gdb) 
11^done,bkpt={number="1",type="breakpoint",disp="keep",enabled="y",addr="0x00001fb3",func="main",file="main.c",line="16",shlib="/Users/claudi/dev/mylib-test/dist/Debug/GNU-MacOSX/mylib-test",times="0"},time={wallclock="0.00058",user="0.00030",system="0.00029",start="1345544547.532421",end="1345544547.533003"}
(gdb) 
12^done,bkpt={number="2",type="breakpoint",disp="keep",enabled="y",addr="<PENDING>",pending="/Users/claudi/dev/mylib/m.c:5",times="0"},time={wallclock="0.00040",user="0.00018",system="0.00022",start="1345544547.533140",end="1345544547.533542"}
(gdb) 
13^done,bkpt={number="3",type="breakpoint",disp="del",enabled="y",addr="0x00001fb3",func="main",file="main.c",line="16",shlib="/Users/claudi/dev/mylib-test/dist/Debug/GNU-MacOSX/mylib-test",times="0"},time={wallclock="0.00017",user="0.00016",system="0.00001",start="1345544547.552190",end="1345544547.552362"} 
```

似乎 GDB 没有加载库的符号，但它实际上是静态链接的（我的意思是，没有要加载的动态库）！！但是，如果我`sum`从函数中进入函数`main()`，然后放置断点，则成功解决：

```
21-break-insert -f "/Users/claudi/dev/mylib/m.c:5"
21^done,bkpt={number="4",type="breakpoint",disp="keep",enabled="y",addr="0x00001fea",func="sum",file="m.c",line="5",shlib="/Users/claudi/dev/mylib-test/dist/Debug/GNU-MacOSX/mylib-test",times="0"},time={wallclock="0.00099",user="0.00039",system="0.00060",start="1345544947.877096",end="1345544947.878088"} 
```

我希望我已经提供了足够的信息......有人知道发生了什么吗？先感谢您！

更多信息：

**GCC 版本**：686-apple-darwin9-gcc-4.2.1 (GCC) 4.2.1 (Apple Inc. build 5577)

**GDB 版本**：GNU gdb 6.3.50-20050815（苹果版 gdb-967）

**Netbeans 版本**：7.1（内部版本 201112071828）

/////////////**编辑**////////////////////////////// ///////////////

到目前为止，我认为问题出在 GDB 上，但今天我注意到它不是真的：我已经能够从命令行直接使用 GDB 调试应用程序，即我可以为我的`sum`函数和调试器设置断点成功停在他们身上，而无需进入该功能。所以，我确定我在 NetBeans 如何启动/初始化 GDB 方面遇到了一些问题。我还注意到 NetBeans 试图从 GDB 获取功能但没有成功。从调试器控制台：

```
~"GNU gdb 6.3.50-20050815 (Apple version gdb-967) (Tue Jul 14 02:11:58 UTC 2009)\n"
~"Copyright 2004 Free Software Foundation, Inc.\n"
~"GDB is free software, covered by the GNU General Public License, and you are\nwelcome
to change it and/or distribute copies of it under certain conditions.\nType \"show 
copying\" to see the conditions.\nThere is absolutely no warranty for GDB.  Type \"show 
warranty\" for details.\n"
~"This GDB was configured as \"i386-apple-darwin\"."
~"\n"
(gdb) 
2-list-features
3-gdb-set print repeat 0
4-gdb-set backtrace limit 1024
5-gdb-set print elements 0
6-file-exec-and-symbols  "/Users/claudi/dev/mylib-test/dist/Debug/GNU-MacOSX/mylib-test"
2^error,msg="Undefined MI command: list-features" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T21:58:52.577

我对这个问题没有答案，但我有一些线索可以帮助找到解决方案。

我相信这不是 NetBeans 的错。这与gdb有关。可能它必须使用一些特殊的配置标志进行编译。

我在 Windows 7 上使用 gdb 7.4（之前使用 MinGW 下载）与 NetBeans 7.0-7.2 和 Eclipse Juno，一切都按预期工作 - 在我的库（静态或动态）中输入断点时 gdb 停止。

最近我想迁移到使用 Python 支持编译的 gdb，以便[在 Eclipse 中漂亮地打印复杂的 STL 结构](http://wiki.eclipse.org/CDT/User/NewIn80#Support_for_full_pretty-printing_of_complex_structures)。因此，我下载了最新的 gdb 7.5 源代码，并使用“--with-python”标志对其进行了编译：

```
./configure --with-python
make && make install 
```

漂亮的漂亮作品。甚至不是在 Eclipse 上，而是在 NetBeans 上（您只需要在项目的调试设置中指向 .gdbinit 文件）。问题是我自己编译的 gdb 版本无法在我的库中的断点处停止（在 NetBeans 7.2 和 Eclipse Juno 上）。

我的结论是 gdb 应该用一些标志来编译以获得这种能力。或者也许用一些标志来运行它就足够了。对于这个问题，我也将不胜感激。

我附上了一些可能有用的信息：

[在 gdb 7.4 上具有正确堆栈跟踪的屏幕截图](http://www.bankfotek.pl/view/1310127)

[gdb 7.5 上的堆栈跟踪不正确的屏幕截图](http://www.bankfotek.pl/view/1310128)

正确的 gdb：

```
C:\MinGW\bin>gdb  --version
GNU gdb (GDB) 7.4
Copyright (C) 2012 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "i686-pc-mingw32".
For bug reporting instructions, please see:
<http://www.gnu.org/software/gdb/bugs/>.

C:\MinGW\bin>gdbserver --version
GNU gdbserver (GDB) 7.4
Copyright (C) 2012 Free Software Foundation, Inc.
gdbserver is free software, covered by the GNU General Public License.
This gdbserver was configured as "i686-pc-mingw32" 
```

不正确的 gdb：

```
C:\MinGW\bin>gdb --version
GNU gdb (GDB) 7.5
Copyright (C) 2012 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "i686-pc-mingw32".
For bug reporting instructions, please see:
<http://www.gnu.org/software/gdb/bugs/>.

C:\MinGW\bin>gdbserver --version
GNU gdbserver (GDB) 7.5
Copyright (C) 2012 Free Software Foundation, Inc.
gdbserver is free software, covered by the GNU General Public License.
This gdbserver was configured as "i686-pc-mingw32" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T09:07:40.983

如果没有 libexpat 导致您描述的 gdb 问题，我已经检查过我的工作。似乎是这样:) 尝试先编译和安装 expat，然后从源代码编译 gdb。一定要有：

```
checking for libexpat... yes
checking how to link with libexpat... <some_path>/libexpat.a 
```

在您的日志中（在“make”命令之后的某个位置。而不是在“./configure”之后）。

为了编译 gdb，我在 Windows 7 和 gdb-7.5 源中使用了 MinGW 的 gcc 4.6.2。我还添加了两个额外的配置标志，但可以肯定它们不是必需的：

```
./configure --with-python --without-auto-load-safe-path 
```

# python - 动态获取列名的Python访问单元格

> ID：12053190
> 
> 赞同：1
> 
> 时间：2012-08-21T10:43:08.970
> 
> 标签：python, cursor, pyodbc

我正在使用 pyodbc 连接到数据库，并且需要从某些表中提取信息。

我正在根据某些列名的值为表中的每一行创建一个唯一的 ID。我正在从配置文件中获取用于 id 的每个列名。

我可以使用硬编码的列名来做到这一点：

```
connection = pyodbc.connect("connection string")
cursor = connection.cursor() 
cursor.execute("select * from " + t)  //t is the table name
rows = cursor.fetchall()
for row in rows: 
    id = `row.GroupID` + `row.Leg` 
```

但是如何用我的配置文件中的名称替换列名？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T11:34:54.640

您可以使用`getattr`：

```
colname = "GroupID"
getattr(row, colname) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T11:37:11.020

假设您已经从配置文件中读取了列名并存储在列表中（名为“列”），您可以按照以下方式执行操作：

```
for row in rows:
    id = ''.join([getattr(row, col) for col in columns]) 
```

这会从行对象中获取属性并将它们放在一个列表中，然后使用 join 将它们连接在一起，就像在您的示例中一样。

# php - 使用 lastInsertId() 值填充另一个表中的列

> ID：12053193
> 
> 赞同：0
> 
> 时间：2012-08-21T10:43:15.687
> 
> 标签：php, sql

我有一个名为 player 的表，在将数据插入其中后，它成功工作，我有以下代码来捕获自动递增主键的值。

```
$one = $pdo->lastInsertId(); 
```

然后我想要做的是获取存储在这个变量中的值并将其作为值插入另一个表中。我尝试了几种方法，但无济于事。请看下面：

**尝试一**

```
try
{
    $sql = "INSERT INTO links SET
            link = :link,
            playerid = '$one'";
    $s = $pdo->prepare($sql);
    $s->bindValue(':link', $_POST['link']);
    $s->bindValue(':playerid', $_POST[':playerid']);
    $s->execute();
}
catch (PDOException $e)
{
    $error = 'Error adding link for player.' . $e->getMessage();
    include 'error.html.php';
    exit();
} 
```

**尝试两次**

```
try
{
    $sql = 'INSERT INTO links SET
            link = :link,
            playerid = :playerid';
    $s = $pdo->prepare($sql);
    $s->bindValue(':link', $_POST['link']);
    $s->bindValue(':playerid', $_POST['$one']);
    $s->execute();
}
catch (PDOException $e)
{
    $error = 'Error adding link for player.' . $e->getMessage();
    include 'error.html.php';
    exit();
} 
```

该代码实际上并没有引发任何错误，但是当我查看数据库时，该值没有被传入。

谁能解释一下出了什么问题？

感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T10:47:38.913

只需使用`$one`

```
$sql = 'INSERT INTO links SET
        link = :link,
        playerid = :playerid';
$s = $pdo->prepare($sql);
$s->bindValue(':link', $_POST['link']);
$s->bindValue(':playerid', $one); 
```

# java - 输出文本未在 bean 中显示值 - JSF 页面

> ID：12053194
> 
> 赞同：-1
> 
> 时间：2012-08-21T10:43:21.147
> 
> 标签：java, jsf, javabeans

我的 jsf 页面上有调用池事件的**轮询**事件。有一个名为**i**的变量，带有 getter 和 setter，我想在页面上显示 i 的值。每次 bean 被 poll 事件调用时**， i 的值都会改变**。所以我尝试在我的 jsf 页面上使用下面的代码，但它没有显示任何值。知道我做错了什么吗？

```
af:outputText value="#{UserChoiceInput.i}" id="ot1"

Bean()
{ 
```

私有字符串 i ;//已编辑

```
public void callPollTimer(PollEvent pollEvent)

{

//code for changing value of i

}
  public void seti(String i) {

    this.counti = i;

  }

  public String geti() {

    return i;

  }

} 
```

面孔配置

```
<managed-bean id="__2"> 
  <managed-bean-name>UserChoiceInput</managed-bean-name> 
  <managed-bean-class>oracle.insurance.viking.questionnaire.view.backing.UserChoic‌eInput</managed-bean-class> 
  <managed-bean-scope>request</managed-bean-scope> 
</managed-bean> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T11:06:16.247

方法必须命名为`setI(String i)`-`getI()`使用大写的 I - 才能被识别为 getter/setter。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T10:51:08.877

```
public class UserChoiceInput {
    private String i;

    public void callPollTimer(PollEvent pollEvent) {
        //code for changing value of i
    }

    public void setI(String i) {
        this.counti = i;
    }

    public String getI() {
        return i;
    }
} 
```

试试这个。您必须在 UserChoiceInput Bean 类中声明变量

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T08:31:16.953

在以编程方式将值分配给组件后，我忘记部分刷新组件（OutputText 组件），这就是它没有呈现的原因。

# java - 在 Xampp/phpmyadmin 中创建外键的问题

> ID：12053202
> 
> 赞同：0
> 
> 时间：2012-08-21T10:44:14.490
> 
> 标签：java, mysql, phpmyadmin

这是我的一段代码..

```
ALTER TABLE ADDRESS
ADD CONSTRAINT ADDRESS_PK PRIMARY KEY(ID),
ADD CONSTRAINT ADDRESS_FK FOREIGN KEY (ID) REFERENCES  CUSTOMER (ID) 
```

我在 SQL YoG 中创建了约束，但在 xampp 中它显示了一些问题。任何建议

![在此处输入图像描述](../Images/a08597eb3904098f7fda866d8cca6e0e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T10:48:00.183

## 外键清单：

*   两个表都必须是 InnoDB；最近（MySQL 5.5.5）开始默认交付 InnoDB；
*   两列必须使用相同的数据类型定义
    *   包括长度；
    *   包括`UNSIGNED`限定词；
*   引用的键必须是`UNIQUE`;
*   引用的密钥不能是`NULL`-able；

# asp.net-mvc-3 - MVC3 @Html.RadioButtonfor 将数据从视图传递到控制器

> ID：12053203
> 
> 赞同：2
> 
> 时间：2012-08-21T10:44:20.657
> 
> 标签：asp.net-mvc-3, razor, radiobuttonfor

基本上，我正在尝试使用 MVC 创建一个带有四个答案（单选按钮）的问题的**反馈表。**

**在视图**中：我可以通过每个答案的单选按钮来查看问题和答案。

**在控制器中**：我在这里很困惑。

我想将选定的问题和答案从 View 发送到控制器。

**我的看法**：

```
@model  IEnumerable SQLOperation.Models.QuestionClass.Tabelfields

@{int i = 0;}

     @foreach (var item in Model)
     {
     using (Html.BeginForm("Question", "home", new {email=item.Email}))
     {   

         @Html.DisplayFor(modelItem => item.QuestionName,item)

         <br /><br />   
         if (item.Option1 != "")
         {
                    @Html.RadioButtonFor(modelItem =>item.SelectedOption, item.Option1, item)                
                    @Html.DisplayFor(modelItem => item.Option1)
                    <br /><br />                
         }

         if (item.Option2 != "")
         {
                    @Html.RadioButtonFor(modelItem => item.SelectedOption, item.Option2)              
                    @Html.DisplayFor(modelItem => item.Option2)
                    <br /><br />
         }

         if (item.Option3 != "")
         {           
                    @Html.RadioButtonFor(modelItem =>item.SelectedOption, item.Option3)              
                    @Html.DisplayFor(modelItem => item.Option3)
                    <br /><br />
         }

         if (item.Option4 != "")
         {
                    @Html.RadioButtonFor(modelItem =>item.SelectedOption, item.Option4)             
                    @Html.DisplayFor(modelItem => item.Option4) 
                    <br /><br />     
         }
         i = (Int16)i + 1;

         if (Model.Count() == i)
         {
                <input name="btnsumbit" type="submit" value="Submit Feedback" 
                style="font-family:Segoe UI Light;font-size:medium;"/>
         }
     }
 } 
```

**我的控制器**：

```
 [HttpGet]
    public ActionResult Question(string email)
    {
        var tf = new QuestionClass.Tabelfields();

        IList<QuestionClass.Tabelfields> viewmodel = new List<QuestionClass.Tabelfields>();
        var q = QuestionClass.getallQuestion(email).ToList();

        foreach (SQLOperation.Models.Question item in q)
        {
            QuestionClass.Tabelfields viewItem = new QuestionClass.Tabelfields();

            viewItem.Email = item.Email;
            viewItem.QuestionID = item.QuestionID;
            viewItem.QuestionName = item.QuestionName;
            viewItem.Option1 = item.Option1;
            viewItem.Option2 = item.Option2;
            viewItem.Option3 = item.Option3;
            viewItem.Option4 = item.Option4;                
            viewmodel.Add(viewItem);
        }
         return View(viewmodel);
    }

    [HttpPost, ActionName("Question")]
    public void Question(string Email,QuestionClass.Tabelfields tf)
    {

    } 
```

**我的模型**：

```
public class QuestionClass

{

  public static FeedbackDatabaseDataContext context = new FeedbackDatabaseDataContext();
    public class Tabelfields : Question
    {
        //public decimal QuestionID { get; set; }
        //public string Email { get; set; }
        //public string QuestionName { get; set; }
        //public string Option1 { get; set; }
        //public string Option2 { get; set; }
        //public string Option3 { get; set; }
        //public string Option4 { get; set; }
        public int SelectedOption { get; set; }
    }

    public static List<Question> getallQuestion(string email)
    {
        var list = (from q in context.Questions where q.Email == @email select q);

        return list.ToList();
    } 
```

}

我没有收到问题，它是在控制器中使用适当的电子邮件选择的选项。

如何在控制器中获取它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T12:00:06.373

首先，在您的视图中包含一个断点并检查值是否被传递。

接下来，将您的方法签名从

```
 public void Question(string Email,QuestionClass.Tabelfields tf) 
```

至

```
 public void Question(string email, QuestionClass.Tabelfields tf) 
```

另外，我看到您使用了一些奇怪的语法（考虑到 m 也是 MVC 的新手），您可以简单地使用它

```
@Html.DisplayFor(modelItem => item.QuestionName) 
```

而不是这个

```
@Html.DisplayFor(modelItem => item.QuestionName,item) 
```

而且，我看过你[的个人资料](https://stackoverflow.com/users/1261518/ajay)，我知道你是 StackOverflow 的新手，所以欢迎来到 StackOverflow！您可能还想阅读[此](https://meta.stackexchange.com/a/59758/182450)和[此](https://meta.stackexchange.com/q/16721/182450)。干杯！

**更新 ：**

您正在使用它来显示单选按钮...

```
@Html.RadioButtonFor(modelItem =>item.SelectedOption, item.Option1, item) 
```

item.Option1 是什么，我可以看到您已将 Opion1、2、3、4 注释掉。或者你还在使用它们吗？

一个非常简单的实现方法是这样的

```
@Html.RadioButtonFor(modelItem =>item.SelectedOption, "Option1")
@Html.RadioButtonFor(modelItem =>item.SelectedOption, "Option2")
@Html.RadioButtonFor(modelItem =>item.SelectedOption, "Option3") 
```

或者你也可以使用，

```
@Html.RadioButtonFor(modelItem =>item.SelectedOption, item.Option1)
@Html.RadioButtonFor(modelItem =>item.SelectedOption, item.Option2)
@Html.RadioButtonFor(modelItem =>item.SelectedOption, item.Option3) 
```

提供的值存在于 item.Option1/2/3/4 中并且它们都是不同的。

# javascript - 单击父复选框时获取子复选框的详细信息

> ID：12053210
> 
> 赞同：0
> 
> 时间：2012-08-21T10:44:42.570
> 
> 标签：javascript, jquery

我有一组带有全选和取消全选选项的复选框...是否可以在单击全选选项时获取与每个主复选框相关联的子复选框的详细信息（id、类、名称）。

[http://jsfiddle.net/nBh4L/2/](http://jsfiddle.net/nBh4L/2/)

```
$(function(){
$('.selectAll').on('click', function(evt){
var group = $(this).attr('data-group'),
    isChecked = !!($(this).prop('checked'));
$('input[value="' + group + '"]').prop('checked', isChecked);    
})

$('.entity').on('click', function(evt){
var group = $(this).attr('value'),
    siblings = $('input[value="' + group + '"]'),
    isChecked = true;
siblings.each(function(idx, el){
  if(!$(el).prop('checked')) {
    isChecked = false;
    return;
  }
})

$('.selectAll[data-group="' + group + '"]').prop('checked', isChecked);

})
})​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T11:11:40.967

试试这个查看演示：[http ://codebins.com/bin/4ldqp87](http://codebins.com/bin/4ldqp87)

```
$('.selectAll').on('click', function(evt){
    var group = $(this).attr('data-group'),
        isChecked = !!($(this).prop('checked'));
    $('input[value="' + group + '"]').prop('checked', isChecked);
    siblings = $('input[value="' + group + '"]');
      siblings.each(function(){
          alert($(this).attr('name'));
      })     
  }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T11:15:39.737

我会使用以下内容：

```
$(document).ready(function() {
    "use strict";
    $("input.select").on("click", function() {
        var $entities = $(this).siblings().find("input.entity");
        $entities.prop("checked", $(this).is(":checked"));

        //      This would also work if you want an array with ids.
        //      console.log($entities.map(function() {
        //          return $(this).attr("id");
        //      }));

        $entities.each(function() {
            console.log($(this).attr("id"));
        });
    });

    $("input.entity").on("click", function() {
        var $entityGroup = $(this).siblings().andSelf();
        $(this).parent().siblings("input.select").prop("checked", $entityGroup.length === $entityGroup.filter(":checked").length);
    });
}); 
```

这只是几个小时前我对您的另一个问题的回答的一个小补充。

```
 $entities.each(function() {
            console.log($(this).attr("id"));
        }); 
```

上面将不同实体的 id 记录到控制台。希望您了解如何使用和获取此示例中的属性。

这也是一个选项，如果你想把它全部放在一个数组中：

```
 console.log($entities.map(function() {
            return $(this).attr("id");
        })); 
```

# [jsFiddle 示例](http://jsfiddle.net/sQVe/EBxSu/9/)

# interbase - Server_Priority_Class 的 Interbase IBConfig 设置

> ID：12053216
> 
> 赞同：0
> 
> 时间：2012-08-21T10:44:52.177
> 
> 标签：interbase

在第 61 页的操作指南中：

SERVER_PRIORITY_CLASS 。Windows 服务器平台上 InterBase 服务的优先级。值 1 是低优先级，2 是高优先级。仅与 Windows 服务器平台相关。默认为 1

在与 Interbase 一起分发的 IBConfig 文件中：

```
#SERVER_PRIORITY_CLASS    1
## Platforms: Windows
## Priority of the InterBase service on Windows
## The value 1 is low priority, 2 is high priority.
## Relevant only on Windows NT/2000/XP. 
```

只需要说明何时将 Server_Priority_Class 从默认值 (1) 更改为 2 是合适的。

IBConfig 文件中的注释表明该设置仅适用于 Windows NT/2000/XP，而 OpGuide 表示它仅与 Windows 服务器平台相关。我们的服务器都不使用 Windows NT/2000/WinXP（都是 Window Server 2003、2008 等）

谢谢，汤姆格林威

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T11:45:36.383

它确实对任何 Windows 版本都有影响。评论中的语言源于 Windows 95 仍支持 IB 的日子。

但是，您通常不应更改此设置。让操作系统设置线程优先级。

# python - 在使用参考字典动态创建字典时，为什么要修改参考字典？（Python）

> ID：12053218
> 
> 赞同：1
> 
> 时间：2012-08-21T10:44:53.877
> 
> 标签：python, dictionary

我正在编写一个 Python 代码，它动态创建字典，将其初始化为参考字典，并修改字典中的特定值。但是，我发现不仅我得到了意想不到的结果，而且参考字典也被修改了。我的代码：

```
tdict={'a':'1','b':'2','c':'3'}
newdict={}
for i in range(5):
  newdict['name'+str(i)]=tdict
  newdict['name'+str(i)]['a']='value'+str(i)
  print 'tdict:  ',tdict
print 'newdict:  ',newdict 
```

结果：

```
tdict:   {'a': 'value0', 'c': '3', 'b': '2'}
tdict:   {'a': 'value1', 'c': '3', 'b': '2'}
tdict:   {'a': 'value2', 'c': '3', 'b': '2'}
tdict:   {'a': 'value3', 'c': '3', 'b': '2'}
tdict:   {'a': 'value4', 'c': '3', 'b': '2'}
newdict:   {'name4': {'a': 'value4', 'c': '3', 'b': '2'}, 'name2': {'a': 'value4', 'c': '3', 'b': '2'}, 'name3': {'a': 'value4', 'c': '3', 'b': '2'}, 'name0': {'a': 'value4', 'c': '3', 'b': '2'}, 'name1': {'a': 'value4', 'c': '3', 'b': '2'}} 
```

而我希望我的“newdict”是这样的：

```
newdict:   {'name4': {'a': 'value4', 'c': '3', 'b': '2'}, 'name2': {'a': 'value2', 'c': '3', 'b': '2'}, 'name3': {'a': 'value3', 'c': '3', 'b': '2'}, 'name0': {'a': 'value0', 'c': '3', 'b': '2'}, 'name1': {'a': 'value1', 'c': '3', 'b': '2'}} 
```

谁能帮我弄清楚为什么会这样？另外，当我没有为它分配任何值时，为什么参考字典“tdict”会发生变化？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T10:49:04.363

您正在字典`tdict`的每个值中存储对的引用：`newdict`

```
newdict['name'+str(i)]=tdict 
```

`'a'`然后，您`tdict`正在修改密钥

```
# newdict['name'+str(i)] is a reference to tdict
newdict['name'+str(i)]['a']='value'+str(i)
# this is equivalent to doing
tdict['a']='value'+str(i) 
```

您可能想要的是将副本存储`tdict`在 newdict 字典中：

```
newdict['name'+str(i)]=dict(tdict) 
```

通过使用现有字典作为构造函数参数来创建新字典会创建一个浅拷贝，您可以在其中为现有键分配新值。您不能（或您不想要的）是修改此字典中的可变值。例子：

```
>>> a={'a': 1, 'b': 2, 'c': [1,2,3]}
>>> b=dict(a)
>>> b['a']=9
>>> a
{'a': 1, 'c': [1, 2, 3], 'b': 2}
>>> b
{'a': 9, 'c': [1, 2, 3], 'b': 2}
>>> b['c'].append(99)
>>> a
{'a': 1, 'c': [1, 2, 3, 99], 'b': 2}
>>> b
{'a': 9, 'c': [1, 2, 3, 99], 'b': 2} 
```

如果要修改字典中的可变值，则需要创建深层副本：

```
>>> import copy
>>> a={'a': 1, 'b': 2, 'c': [1,2,3]}
>>> b=copy.deepcopy(a)
>>> b['a']=9
>>> b['c'].append(99)
>>> a
{'a': 1, 'c': [1, 2, 3], 'b': 2}
>>> b
{'a': 9, 'c': [1, 2, 3, 99], 'b': 2} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T10:52:06.780

只是因为您引用的是 tdict 而不是副本。为了复制，您可以使用

```
newdict['name'+str(i)] = tdict.copy() 
```

或者

```
newdict['name'+str(i)] = dict(tdict) 
```

希望能帮助到你

# iphone - 是否可以使方法按顺序运行？

> ID：12053228
> 
> 赞同：0
> 
> 时间：2012-08-21T10:45:39.557
> 
> 标签：iphone, objective-c, ios, methods, uilabel

我只在程序中包含了与此标签相关的代码。

在我的 viewDidLoad 方法中，我有

```
[startLabel setHidden:NO];
startLabel.text = @"Touch to Begin"; 
```

然后在 touchesBegan 方法中

```
startLabel.text = @"Loading . .";
[self fillArrays]; 
```

然后在填充数组方法中填充数组，然后隐藏标签 -

```
 self.myArray = [NSArray arrayWithObjects:
             [UIImage imageNamed:@"Frame 1.png"], . .etc etc etc . . . nil]];

 [startLabel setHidden:YES]; 
```

但是，在加载 Array 之前不会更新文本。导致“正在加载...”文本从未出现。因为它似乎是在填充数组后实现的。

同时 setHidden bool 设置为 YES，因此永远不会看到标签。

我希望 startLabel 在方法开始填充数组之前更新，因为这需要一些时间。即顺序操作的方法。

这可能吗？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T11:27:47.123

你不需要多线程，那太复杂了。问题是，在您的代码返回之前，UIKit 不会更新用户界面，因此您要安排用户界面更新，加载数组，然后将控制权返回给 UIKit，然后由 UIKit 执行用户界面更新。您需要做的是安排用户界面更新，将控制权返回给 UIKit，然后在运行循环的下一次迭代中加载数组。为此，您可以使用`performSelector:withObject:afterDelay:`零延迟，它在下一次运行循环迭代中执行方法调用。这应该可以解决问题：

```
startLabel.text = @"Loading . .";
[self performSelector:@selector(fillArrays) withObject:nil afterDelay:0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T10:49:49.483

您需要将数组加载到与 GUI 更新不同的线程上。

见这篇文章：[http ://evilrockhopper.com/2010/01/iphone-development-keeping-the-ui-responsive-and-a-background-thread-pattern/](http://evilrockhopper.com/2010/01/iphone-development-keeping-the-ui-responsive-and-a-background-thread-pattern/)

您想要的功能是**performSelectorInBackground**

这样，您的 UI 更新和后台工作可以同时完成。

您可以运行另一个函数，它也以类似的方式更新主线程上的标签：

`performSelectorOnMainThread`

这样你就可以在后台加载数组，然后在主线程上更新你的 UI（这很好，因为我认为 UIKit 不是线程安全的。

# jquery - 提交表单后，Jquery函数第二次不起作用

> ID：12053229
> 
> 赞同：2
> 
> 时间：2012-08-21T10:45:43.153
> 
> 标签：jquery, ajax, comments

我正在通过使用 php 和 while 循环动态创建的 jqery 函数提交表单。表单第一次正确提交，我生成 html 并使用 .html(response) 显示它。我复制了代码，以便该功能可以再次工作，但事实并非如此。当我第二次提交表单（没有刷新页面）时，表单将我发送到 action 属性。

这是jquery的限制吗？

我的代码：

```
<script type="text/javascript">
$(document).ready(function() {

$("#submit<? echo"$counter$counter";?>").click(function() {

var action = $("#commentform<? echo "$counter$counter";?>").attr('action');
var form_data = {
comment: $("#comment<? echo "$counter$counter";?>").val(),
type: $("#commenttype<? echo "$counter$counter";?>").val(),
typeid: $("#commenttypeid<? echo "$counter$counter";?>").val(),
counter: $("#commentcounter<? echo "$counter$counter";?>").val(),
is_ajax: 1
};

$.ajax({
type: "POST",
url: action,
data: form_data,
success: function(response)
{
$("#commentarea<? echo"$counter$counter";?>").html(response);
}
});
return false;
});
});
</script> 
```

我的表单与我正在运行的脚本位于同一页面上：

```
<div class="postcommentscomment" style="size:10px; font-family:Verdana, Geneva, sans-serif;">
<form action="php/comment.php" id="commentform<? echo "$counter$counter";?>" method="post" name="comment" target="_self">
<textarea id="comment<? echo "$counter$counter";?>" style="width:162px; height:24px; color:#827e78; font-size:10px;">comment here</textarea>
<div style="float:right; position:relative; margin-top:5px;">
<input id="commenttype<? echo "$counter$counter";?>" type="hidden" value="<? echo $type;?>" />
<input id="commenttypeid<? echo "$counter$counter";?>" type="hidden" value="<? echo $id;?>" />
<input id="commentcounter<? echo "$counter$counter";?>" type="hidden" value="<? echo "$counter$counter";?>" />
<input id="submit<? echo"$counter$counter";?>" type="button" value="comment"/>
</div>
</form>
</div> 
```

我通过 action 属性在 html(response) 页面上的表单

```
<div class="postcommentscomment" style="size:10px; font-family:Verdana, Geneva, sans-serif;">
<form action="php/comment.php" id="commentform<? echo "$counter";?>" method="post" name="comment" target="_self">
<textarea id="comment<? echo "$counter";?>" style="width:162px; height:24px; color:#827e78; font-size:10px;">comment here</textarea>
<div style="float:right; position:relative; margin-top:5px;">
<input id="commenttype<? echo "$counter";?>" type="hidden" value="<? echo $type;?>" />
<input id="commenttypeid<? echo "$counter";?>" type="hidden" value="<? echo $id;?>" />
<input id="commentcounter<? echo "$counter";?>" type="hidden" value="<? echo "$counter";?>" />
<input id="submit<? echo"$counter";?>" type="button" value="comment"/>
</div>
</form>
</div> 
```

注意： counter php 变量的设置使得 html(response) 页面上的 $counter 产生与原始页面上的 $counter$counter 等效的结果。

所以，我提交了一条评论，评论被插入到数据库中，然后运行一个查询，一个表单被复制并通过 html(response) 显示在原始页面上。然后，当我尝试提交新评论时，我会被重定向到操作页面。我通过将“提交”更改为“按钮”来阻止它，但这并没有给我想要的结果——即能够再次提交表单。

不确定这是 jquery 限制还是我的代码有问题。

此外，评论位于可能有不同帖子的页面上。所以有多种评论形式。如果有更好的方法来对特定帖子的评论执行 ajax 刷新，我愿意更改代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T10:57:32.270

您的代码在文档就绪时执行，如果您再次插入该代码，文档就绪将不会再次触发。

您可以将函数附加到表单的提交处理程序...

```
$('.postcommentscomment form').submit(function() {

    var form_data = $(this).serialize();

    //your ajax call

}); 
```

您应该能够在每次插入表单时执行这段代码，与通过 id 获取所有输入值相比，序列化函数是一个更简单的选项，并且可以将您从所有那些愚蠢的内联 php 计数器回显中拯救出来。

# c# - 如何使用 LINQ 获取关联表

> ID：12053230
> 
> 赞同：0
> 
> 时间：2012-08-21T10:45:43.350
> 
> 标签：c#, .net, linq-to-sql

假设我必须表格：“客户”（父）和“地址”（子）。它们是关联的，因此它们之间存在 1:1 的关系。

```
 Table<Customer> table = db.GetTable<Customer>();

   var query = from c in table
               select p; 
```

是否有可能使用选定的客户表查询与“客户”关联的表，或者我是否必须在单独的查询中获取所有地址表？

此外，如果我在客户表上使用 DELETE 命令，这是否也会删除所有关联的表？

提前致谢，

保护

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T10:50:20.700

如果它们与外键相关，那么它应该非常简单。地址应该只是客户的财产。

```
var query = from c in table
            select c.Address; 
```

`join`或者，如果外键不存在，您可以使用 a 来执行此操作。

```
var query = from c in table
            join address in [AddressTable] on c.AddressId equals address.Id
            select address; 
```

`DELETE`您所指的类型称为级联删除。你需要在你的外键上启用它（你需要一个 FK 才能工作）。看到[这个线程](https://stackoverflow.com/questions/6260688/sql-server-cascade-delete)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T10:50:47.483

您不必单独获取地址，`lazy load`如果您在 dbml 中设置了关联（即链接表的箭头），您应该能够只获取地址。

Intellisense 应该显示属性；

```
 var query = from c in table
               select p.Address; 
```

对于删除在表本身的外键上设置一个`on delete cascade`，这将在您每次删除客户记录时删除关联的地址。

# objective-c - 我正在尝试创建一个类似于平铺 ScrollView 的 2D 平铺地图引擎

> ID：12053232
> 
> 赞同：0
> 
> 时间：2012-08-21T10:45:49.150
> 
> 标签：objective-c, ios, cocos2d-iphone, game-engine, kobold2d

我已经有一个函数可以返回给定位置的图块。我正在努力做到这一点，以便当我滚动时它会即时加载新的图块。我无法弄清楚如何解决这个问题。我确信以前一定有人这样做过，我不想在这方面重新发明轮子。

谁能指出我的教程或一些示例代码？

如果没有，也许可以帮助我弄清楚如何做到这一点？

我使用的是 Kobold2D，地图不会是静态的，它会动态生成，Minecraft 风格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T23:49:00.860

CATiledLayer 非常适合这个。但是，我不知道这是否能很好地与 Cocos2d 配合使用。

# delphi - 将新表单添加到模板库（对象存储库）Delphi Xe2

> ID：12053235
> 
> 赞同：2
> 
> 时间：2012-08-21T10:45:57.060
> 
> 标签：delphi, delphi-xe2

德尔福 Xe2 更新 4 高频 1

1.  我创建了新表格
2.  我修改并保存
3.  在表单上单击鼠标右键并选择“添加到存储库”，其中：“Delphi 文件”
4.  我关闭所有
5.  文件、新建、Vcl 表单应用程序 - Delphi
6.  文件，新建，其他，Delphi 文件：**这里我没有看到在表单之前添加**:(
7.  文件，新建，自定义，Delphi 文件 - 我看到了
8.  工具、模板库、默认 (RAD)、属性、Delphi 文件 - 在这里我看到了

[![在此处输入图像描述](../Images/a6dfd4ed517cb05b33f4035cba389d31.png)](https://i.stack.imgur.com/hp8KI.png)

我试图更改文件 C:\Users\ [mylogin]\Application Data\Embarcadero\BDS\9.0\RADStudioRepository.xml （和 C:\Program Files (x86) \Embarcadero\RAD Studio\9.0\ObjRepos\en ）但结果不存在。在我的“手册”中，事实证明添加了这里描述的项目：http: [//docwiki.embarcadero.com/RADStudio/en/Creating_Template_Libraries](http://docwiki.embarcadero.com/RADStudio/en/Creating_Template_Libraries)（或者这个：http: [//blogs.embarcadero.com/pawelglowacki /2011/11/28/39454](http://blogs.embarcadero.com/pawelglowacki/2011/11/28/39454) )

```
<TemplateLibrary Version="0.1" id="GuTemplateId">
   <Name>Gu Template Library</Name>
   <Description>Gu</Description>
   <Items>
          <Item id="GuProject1" Creator="DelphiProjectRepositoryCreator">
            <Name>GuProject</Name>
            <Description>Standart Gu project</Description>
            <Author>Gu</Author>
            <Icon>Project\GuProject1_Icon.ico</Icon>
        <Projectfile>GuProject1.dproj</Projectfile>
            <DefaultProjectName>GuProject1</DefaultProjectName>
            <FilePath>Project</FilePath>
          </Item>
   </Items>
</TemplateLibrary> 
```

*注意：用钥匙</ >和一个未创建但需要的文件 .bdsproj 花了很长时间，这两个问题都已解决*

![在此处输入图像描述](../Images/965d17dd9c6cac8cf6477957114e5b10.png)

以及如何插入 _ 仅 _ 表格，最好在“我的”文件夹中（或至少在 Delpfi 文件或其他文件中）

++ Still：建立了一些外部组件：TMS、LMD、DEVExp、Jedy。在照片上可以看到，其中一些有文件夹，或者例如在 Delphi 文件 - JCL 异常对话框中。但是在 xml-files（上图）中我找不到他们的参考资料。它是如何制作的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T11:59:44.863

恕我直言，这看起来像一个错误。这是一个解决方法：

将表单添加到存储库后，执行以下操作： File\New\Customize... 找到您的项目，将其拖放到 Menu Items 中，单击 OK。这将使该项目在“新项目”(File\New\Other...) 对话框中可见。

但是，它也会将新项目添加到顶级菜单 File\New，这可能不是您想要的。您可以再次转到 File\New\Customize... 并将其拖出 Menu Items，单击 OK。新项目将从顶级菜单中消失，但它会在“新项目”对话框中保持可见。

我已经用 Delphi XE2 试过了。

编辑：回答你的问题，*“它是如何制造的？”* （不使用存储库），可能使用[OpenTools API](http://docwiki.embarcadero.com/RADStudio/en/Overview_of_the_Tools_API)。[这](http://edn.embarcadero.com/article/28050)是一篇非常古老的文章，展示了如何[`IOTAModuleCreator`](http://docwiki.embarcadero.com/RADStudio/en/Creating_Forms_and_Projects)在设计包中创建和注册您的实现。

# php - PHP 内爆的 Python 等价物？

> ID：12053236
> 
> 赞同：121
> 
> 时间：2012-08-21T10:46:08.417
> 
> 标签：php, python, implode

在 Python 中是否有 PHP 内爆的等价物？我已经读入并拆分了一组分隔的单词，现在我想以随机顺序对它们进行排序，并将单词打印出来，中间有空格。

> implode — 用字符串连接数组元素

[http://php.net/manual/en/function.implode.php](http://php.net/manual/en/function.implode.php)

* * *

## 回答 #1

> 赞同：208
> 
> 时间：2012-08-21T10:48:17.390

使用字符串[连接方法](https://docs.python.org/3/library/stdtypes.html#str.join)。

```
print(' '.join(['word1', 'word2', 'word3'])) 
```

您可以加入任何可迭代对象（不仅是`list`此处使用的），当然您也可以使用任何字符串（不仅是`' '`）作为分隔符。

如果您想要像您在问题中所说的随机顺序，请使用[shuffle](http://docs.python.org/library/random.html#random.shuffle)。

* * *

在评论中有一个问题，如果你这样做，为什么 Python 会抛出错误`"glue".join(["startString", 123, "endString"])`。`join`对可迭代的字符串进行操作。Python 中没有隐式类型转换。

但当然有解决办法。只需自己进行转换。

`"glue".join(map(str, ["startString",123,"endString"]))`

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-21T10:54:53.177

好的，我刚刚找到了一个可以做我想做的功能；

我读了一个文件，其中的单词格式如下： `Jack/Jill/my/kill/name/bucket`

然后我使用该方法将其拆分`split()`，一旦将单词放入列表中，我就使用此方法将单词连接起来：

```
concatenatedString = ' - '.join(myWordList)
# ie: delimeter.join(list) 
```

# java - 与 NLP 的句子比较

> ID：12053241
> 
> 赞同：4
> 
> 时间：2012-08-21T10:46:23.463
> 
> 标签：java, nlp

我使用 lingpipe 进行句子检测，但我不知道是否有更好的工具。据我了解，没有办法比较两个句子，看看它们是否意思相同。

有没有其他好的资源可以让我有一个预先构建的方法来比较两个句子并查看它们是否相似？

我的要求如下：

```
String sent1 = "Mary and Meera are my classmates.";

String sent2 = "Meera and Mary are my classmates.";

String sent3 = "I am in Meera and Mary's class.";

// several sentences will be formed and basically what I need to do is
// this

boolean bothAreEqual = compareOf(sent1, sent2);

sop(bothAreEqual); // should print true

boolean bothAreEqual = compareOf(sent2, sent3);

sop(bothAreEqual);// should print true 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T11:17:05.993

如何测试两个句子的*含义*是否相同：这将是一个过于开放的问题。

但是，有一些方法可以比较两个句子，看看它们是否*相似*。有许多可能的*相似性*定义，可以使用预先构建的方法进行测试。

参见例如[http://en.wikipedia.org/wiki/Levenshtein_distance](http://en.wikipedia.org/wiki/Levenshtein_distance)

```
Distance between 
'Mary and Meera are my classmates.' 
and 'Meera and Mary are my classmates.': 
6
Distance between 
'Mary and Meera are my classmates.' 
and 'Alice and Bobe are not my classmates.': 
14
Distance between 
'Mary and Meera are my classmates.' 
and 'Some totally different sentence.': 
29 
```

代码：

```
public class LevenshteinDistance {

    private static int minimum(int a, int b, int c) {
        return Math.min(Math.min(a, b), c);
    }

    public static int computeDistance(CharSequence str1,
            CharSequence str2) {

        int[][] distance = new int[str1.length() + 1][str2.length() + 1];

        for (int i = 0; i <= str1.length(); i++){
            distance[i][0] = i;
        }
        for (int j = 0; j <= str2.length(); j++){
            distance[0][j] = j;
        }
        for (int i = 1; i <= str1.length(); i++){
            for (int j = 1; j <= str2.length(); j++){
                distance[i][j] = minimum(
                    distance[i - 1][j] + 1,
                    distance[i][j - 1] + 1,
                    distance[i - 1][j - 1]
                        + ((str1.charAt(i - 1) == str2.charAt(j - 1)) ? 0 : 1));
            }
        }
        int result = distance[str1.length()][str2.length()];
        //log.debug("distance:"+result);
        return result;
    }

    public static void main(String[] args) {
        String sent1="Mary and Meera are my classmates.";
        String sent2="Meera and Mary are my classmates.";       
        String sent3="Alice and Bobe are not my classmates.";
        String sent4="Some totally different sentence.";

    System.out.println("Distance between \n'"+sent1+"' \nand '"+sent2+"': \n"+computeDistance(sent1, sent2));
    System.out.println("Distance between \n'"+sent1+"' \nand '"+sent3+"': \n"+computeDistance(sent1, sent3));
    System.out.println("Distance between \n'"+sent1+"' \nand '"+sent4+"': \n"+computeDistance(sent1, sent4));

        }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T13:16:41.257

这是我想出的。这只是一个替代品，直到我得到真正的东西，但它可能对那里的人有一些帮助..

```
package com.examples;

import java.io.File;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.util.ArrayList;
import java.util.List;

import com.aliasi.sentences.MedlineSentenceModel;
import com.aliasi.sentences.SentenceModel;
import com.aliasi.tokenizer.IndoEuropeanTokenizerFactory;
import com.aliasi.tokenizer.Tokenizer;
import com.aliasi.tokenizer.TokenizerFactory;
import com.aliasi.util.Files;
import com.sun.accessibility.internal.resources.accessibility;

public class SentenceWordAnalysisAndLevenshteinDistance {
private static int minimum(int a, int b, int c) {
    return Math.min(Math.min(a, b), c);
}

public static int computeDistance(CharSequence str1, CharSequence str2) {
    int[][] distance = new int[str1.length() + 1][str2.length() + 1];
    for (int i = 0; i <= str1.length(); i++) {
        distance[i][0] = i;
    }
    for (int j = 0; j <= str2.length(); j++) {
        distance[0][j] = j;
    }
    for (int i = 1; i <= str1.length(); i++) {
        for (int j = 1; j <= str2.length(); j++) {
            distance[i][j] = minimum(
                    distance[i - 1][j] + 1,
                    distance[i][j - 1] + 1,
                    distance[i - 1][j - 1]
                            + ((str1.charAt(i -     1) == str2.charAt(j - 1)) ? 0
                                    : 1));
        }
    }
    int result = distance[str1.length()][str2.length()];

    return result;
}

static final TokenizerFactory TOKENIZER_FACTORY = IndoEuropeanTokenizerFactory.INSTANCE;
static final SentenceModel SENTENCE_MODEL = new MedlineSentenceModel();

public static void main(String[] args) {
    try {
        ArrayList<String> sentences = null;
        sentences = new ArrayList<String>();
        // Reading from text file
        // sentences = readSentencesInFile("D:\\sam.txt");

        // Giving sentences
        // ArrayList<String> sentences = new ArrayList<String>();
        sentences.add("Mary and Meera are my classmates.");
        sentences.add("Mary and Meera are my classmates.");
        sentences.add("Meera and Mary are my classmates.");
        sentences.add("Alice and Bobe are not my classmates.");
        sentences.add("Some totally different sentence.");
        // Self-implemented
        wordAnalyser(sentences);
        // Internet referred
        // levenshteinDistance(sentences);
    } catch (Exception e) {
        // TODO: handle exception
        e.printStackTrace();
    }
}

private static ArrayList<String> readSentencesInFile(String path) {
    ArrayList<String> sentencesList = new ArrayList<String>();

    try {
        System.out.println("Reading file from : " + path);
        File file = new File(path);
        String text = Files.readFromFile(file, "ISO-8859-1");
        System.out.println("INPUT TEXT: ");
        System.out.println(text);

        List<String> tokenList = new ArrayList<String>();
        List<String> whiteList = new ArrayList<String>();
        Tokenizer tokenizer = TOKENIZER_FACTORY.tokenizer(
                text.toCharArray(), 0, text.length());
        tokenizer.tokenize(tokenList, whiteList);

        System.out.println(tokenList.size() + " TOKENS");
        System.out.println(whiteList.size() + " WHITESPACES");

        String[] tokens = new String[tokenList.size()];
        String[] whites = new String[whiteList.size()];
        tokenList.toArray(tokens);
        whiteList.toArray(whites);
        int[] sentenceBoundaries = SENTENCE_MODEL.boundaryIndices(tokens,
                whites);

        System.out.println(sentenceBoundaries.length
                + " SENTENCE END TOKEN OFFSETS");

        if (sentenceBoundaries.length < 1) {
            System.out.println("No sentence boundaries found.");
            return new ArrayList<String>();
        }
        int sentStartTok = 0;
        int sentEndTok = 0;
        for (int i = 0; i < sentenceBoundaries.length; ++i) {
            sentEndTok = sentenceBoundaries[i];
            System.out.println("SENTENCE " + (i + 1) + ": ");
            StringBuffer sentenceString = new StringBuffer();
            for (int j = sentStartTok; j <= sentEndTok; j++) {
                sentenceString.append(tokens[j] + whites[j + 1]);
            }
            System.out.println(sentenceString.toString());
            sentencesList.add(sentenceString.toString());
            sentStartTok = sentEndTok + 1;
        }
    } catch (IOException e) {
        // TODO: handle exception
        e.printStackTrace();
    }

    return sentencesList;
}

private static void levenshteinDistance(ArrayList<String> sentences) {
    System.out.println("\nLevenshteinDistance");
    for (int i = 0; i < sentences.size(); i++) {
        System.out.println("Distance between \n'" + sentences.get(0)
                + "' \nand '" + sentences.get(i) + "': \n"
                + computeDistance(sentences.get(0), 
sentences.get(i)));
    }
}

private static void wordAnalyser(ArrayList<String> sentences) {

    System.out.println("No.of Sentences : " + sentences.size());
    List<String> stopWordsList = getStopWords();
    List<String> tokenList = new ArrayList<String>();
    ArrayList<List<String>> filteredSentences = new ArrayList<List<String>>();

    for (int i = 0; i < sentences.size(); i++) {
        tokenList = new ArrayList<String>();
        List<String> whiteList = new ArrayList<String>();
        Tokenizer tokenizer = TOKENIZER_FACTORY.tokenizer(sentences.get(i)
                .toCharArray(), 0, sentences.get(i).length());
        tokenizer.tokenize(tokenList, whiteList);

        System.out.print("Sentence " + (i + 1) + ": " + tokenList.size()
                + " TOKENS, ");
        System.out.println(whiteList.size() + " WHITESPACES");

        filteredSentences.add(filterStopWords(tokenList, stopWordsList));
    }

    for (int i = 0; i < sentences.size(); i++) {
        System.out.println("\n" + (i + 1) + ". Comparing\n      '"
                + sentences.get(0) + "' \nwith\n     '" +         
sentences.get(i)
                + "' : \n");
        System.out.println(filteredSentences.get(0) + "\n and \n"
                + filteredSentences.get(i));
        System.out.println("Percentage of similarity: "
                + calculateSimilarity(filteredSentences.get(0),
                        filteredSentences.get(i)) 
+ "%");
    }
}

private static double calculateSimilarity(List<String> list1,
        List<String> list2) {
    int length1 = list1.size();
    int length2 = list2.size();

    int count1 = 0;
    int count2 = 0;
    double result1 = 0.0;
    double result2 = 0.0;
    int least, highest;
    if (length2 > length1) {
        least = length1;
        highest = length2;
    } else {
        least = length2;
        highest = length1;
    }
    // computing result1
    for (String string1 : list1) {
        if (list2.contains(string1))
            count1++;
    }
    result1 = (count1 * 100) / length1;
    // computing result2
    for (String string2 : list2) {
        if (list1.contains(string2))
            count2++;
    }
    result2 = (count2 * 100) / length2;

    double avg = (result1 + result2) / 2;

    return avg;
}

private static List<String> getStopWords() {
    String stopWordsString = ".,a,able,about,across,after,all,almost,also,am,among,an,and,any,are,as,at,be,because,been,but,by,can,cannot,could,dear,did,do,does,either,else,ever,every,for,from,get,got,had,has,have,he,her,hers,him,his,how,however,i,if,in,into,is,it,its,just,least,let,like,likely,may,me,might,most,must,my,neither,no,nor,not,of,off,often,on,only,or,other,our,own,rather,said,say,says,she,should,since,so,some,than,that,the,their,them,then,there,these,they,this,tis,to,too,twas,us,wants,was,we,were,what,when,where,which,while,who,whom,why,will,with,would,yet,you,your";
    List<String> stopWordsList = new ArrayList<String>();
    List<String> stopWordTokenList = new ArrayList<String>();
    List<String> whiteList = new ArrayList<String>();
    Tokenizer tokenizer = TOKENIZER_FACTORY.tokenizer(
            stopWordsString.toCharArray(), 0, stopWordsString.length());
    tokenizer.tokenize(stopWordTokenList, whiteList);
    for (int i = 0; i < stopWordTokenList.size(); i++) {
        // System.out.println((i + 1) + ":" + tokenList.get(i));
        if (!stopWordTokenList.get(i).equals(",")) {
            stopWordsList.add(stopWordTokenList.get(i));
        }
    }
    System.out.println("No.of stop words: " + stopWordsList.size());
    return stopWordsList;
}

private static List<String> filterStopWords(List<String> tokenList,
        List<String> stopWordsList) {

    List<String> filteredSentenceWords = new ArrayList<String>();
    for (String sentenceToken : tokenList) {
        if (!stopWordsList.contains(sentenceToken)) {
            filteredSentenceWords.add(sentenceToken);
        }
    }
    return filteredSentenceWords;
}
} 
```

# c# - 仅向我的特定用户分发 MonoTouch 应用程序的用户可能超过 10000

> ID：12053246
> 
> 赞同：-2
> 
> 时间：2012-08-21T10:46:40.013
> 
> 标签：c#, ios, ipad, xamarin.ios

我的**MonoTouch****应用程序**现在已经开发出来了 使用我的应用程序的应用程序用户超过 10,000 万。那么我用哪种方式将我的应用程序分发给我的用户

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T11:01:06.107

如果您购买[iOS 开发者企业计划](https://developer.apple.com/programs/ios/enterprise/)（299 美元/年）许可证，您将可以仅向您的用户发布内部 iOS 应用程序。

我相信该程序中没有设备限制。

请阅读[此](https://stackoverflow.com/a/5996747/548395)回复中的一些说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T11:09:34.790

B2B 分发意味着您为一家**位于美国**并**参与 Apple 批量购买计划的公司开发应用程序。**这适合您的 10000 多个用户吗？

如果您想为特定的用户组分发您的应用程序，您应该为您的应用程序创建一个免费的登录过程并将其上传到 AppStore 以供公众使用。在这种情况下，您可以给您的用户一个注册码（可以在特定网页上下载，或者您可以发送电子邮件等...）。之后，您应该在应用商店中分发您的特定应用。

或者您可以使用您的企业开发者帐户创建内部分发，但它绑定了一个注册了 1000 名员工的公司。之后，您可以分发 iOS 应用程序供内部使用，而无需 Apple 审查和 AppStore。**

# android - 如何将图库中的图像添加到列表视图

> ID：12053247
> 
> 赞同：2
> 
> 时间：2012-08-21T10:46:39.233
> 
> 标签：android, android-listview, android-imageview, android-gallery

我想从图库中添加一张图片，当我按下创建播放器时，我希望将该图片添加到列表视图中的播放器名称旁边。

现在，我的代码从可绘制对象中获取图片，并且这些图片是在类型化数组中访问的。

如何更改我的代码以实现它以从图库中获取图片并将其显示在列表视图中？

任何帮助将不胜感激！谢谢

我的自定义适配器代码是：

```
 public class PlayerImageAdapter extends ArrayAdapter<Player> {

        private LayoutInflater mInflater;

            private ArrayList<Player> players;
            private TypedArray mIcons;

            private int mViewResourceId;

            public PlayerImageAdapter(Context ctx, int viewResourceId,
                    ArrayList<Player> players, TypedArray icons) {
                super(ctx, viewResourceId, players);

                mInflater = (LayoutInflater)ctx.getSystemService(
                        Context.LAYOUT_INFLATER_SERVICE);

                this.players = players;
                mIcons = icons;

                mViewResourceId = viewResourceId;
            }

            @Override
            public View getView(int position, View convertView, ViewGroup parent) {
                convertView = mInflater.inflate(mViewResourceId, null);

                ImageView iv = (ImageView)convertView.findViewById(R.id.playerPic);
                iv.setImageDrawable(mIcons.getDrawable(position));

                TextView tv = (TextView)convertView.findViewById(R.id.playerName);
                tv.setText(this.players.get(position).toString());

                return convertView;
            }
        }

        //and my code that calls it:

    TypedArray icons = res.obtainTypedArray(R.array.player_pics);

                adapter = new PlayerImageAdapter(ctx, R.layout.player_customlist,
                        dataStore.getPlayers(), icons);

        My code that access the gallery is:

         protected void onActivityResult(int requestCode, int resultCode, Intent data) {
                super.onActivityResult(requestCode, resultCode, data);

                if (requestCode == RESULT_LOAD_IMAGE && resultCode == RESULT_OK && null != data) {
                    Uri selectedImage = data.getData();
                    String[] filePathColumn = { MediaStore.Images.Media.DATA };

                    Cursor cursor = getContentResolver().query(selectedImage,
                            filePathColumn, null, null, null);
                    cursor.moveToFirst();

                    int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
                    String picturePath = cursor.getString(columnIndex);
                    cursor.close();

                    ImageView imageView = (ImageView) findViewById(R.id.imagePlayer);
                    imageView.setImageBitmap(BitmapFactory.decodeFile(picturePath));

                }

            } 
```

# c# - 如何连接缓存的实体

> ID：12053250
> 
> 赞同：0
> 
> 时间：2012-08-21T10:46:49.620
> 
> 标签：c#, entity-framework

我正在使用实体框架，但我缓存了一些应用程序范围的实体，所以现在它们是列表而不是实体。

我缓存的两个对象是产品和商店——一个产品有一个商店。在表中，它们由 StoreId 链接，但由于我使用的是 EF，因此 Product 还可以包含 Store 实体。

我不会仅仅因为它们也被独立使用而将它们缓存在一起。我想做的是在某个时候加入它们，所以我可能会选择 Product 对象，然后想通过加入 Stores 对象来填充 Stores。

是使用 linq 加入 2 个列表的最有效方法 - 如果是，那么最有效的语法是什么，或者是否有更好的方法将列表转换回实体。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T11:02:41.560

> 有没有更好的方法将列表转换回实体

这有点误导，因为这不是你想要做的。您拉下作为实体的产品/商店列表 - 无需转换它们（即使您将它们存储在列表中）。

如果我理解正确，您想要做的基本上是将每个映射`Product`到缓存实体中的适当位置（通过访问实体上的属性`Store`来保存返回数据库）。我很确定您需要做的就是将其映射出来，例如：`Store``Product`

```
foreach (var product in cachedProducts)
{
    product.Store = cachedStores.SingleOrDefault(s => s.Id == product.StoreId);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T10:56:35.567

您的实体通过底层数据库上下文连接，因此从该上下文中删除它们可以防止您稍后将它们重新加入，甚至在不附加上下文的情况下保存它们。

最有效的设计是使用 EF 的 IQueryable 语法在需要时检索它们，并让数据库上下文执行所需/可能的任何缓存。

# scala - Scala 2.9 不会在 Ubuntu 12.04 上运行 HelloWorld

> ID：12053255
> 
> 赞同：2
> 
> 时间：2012-08-21T10:47:08.450
> 
> 标签：scala, exception, runtime, ubuntu-12.04, scala-2.9

这个应该很简单，但我自己想不通。

我在 Ubuntu 12.04 系统上安装了 Scala 2.9.1。

该文件是`helloworld.scala`：

```
object HelloWorld{
        def main(args:Array[String]){
                println("Hello, World!")
        }
} 
```

scalac helloworld 完全没有问题。然后scala HelloWorld给出

```
Exception in thread "main" java.lang.RuntimeException: Cannot figure out how to run target: HelloWorld
    at scala.sys.package$.error(package.scala:27)
    at scala.tools.nsc.GenericRunnerCommand.scala$tools$nsc$GenericRunnerCommand$$guessHowToRun(GenericRunnerCommand.scala:38)
    at scala.tools.nsc.GenericRunnerCommand$$anonfun$2.apply(GenericRunnerCommand.scala:48)
    at scala.tools.nsc.GenericRunnerCommand$$anonfun$2.apply(GenericRunnerCommand.scala:48)
    at scala.Option.getOrElse(Option.scala:108)
    at scala.tools.nsc.GenericRunnerCommand.<init>(GenericRunnerCommand.scala:48)
    at scala.tools.nsc.GenericRunnerCommand.<init>(GenericRunnerCommand.scala:17)
    at scala.tools.nsc.MainGenericRunner.process(MainGenericRunner.scala:33)
    at scala.tools.nsc.MainGenericRunner$.main(MainGenericRunner.scala:89)
    at scala.tools.nsc.MainGenericRunner.main(MainGenericRunner.scala) 
```

我在论坛上多次看到这个问题，但发帖者通常只是混合类名和文件名，所以他们会尝试 scala helloworld，这不是我正在做的（对吗？）但我得到了同样的错误.

## 编辑

`scala -classpath ./ HelloWorld`工作正常。所以这是一个类路径问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T10:56:57.763

我试过了，结果完全一样。然后我清除了我的类路径：

```
$ CLASSPATH= 
```

一切正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T11:59:18.090

我也在使用 Ubuntu 并使用您的示例进行测试，我可以确认：

```
scala HelloWorld.scala 
```

将作为 Scala 脚本成功运行该文件。和：

```
scalac HelloWorld.scala 
```

将创建类文件。

但是，运行：

```
scala HelloWorld.class 
```

会给出你得到的错误。

但是，如果您正在运行

```
scala HelloWorld 
```

在包含类文件的目录中，程序应该可以正常执行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T21:02:37.227

不是你问的，但由于你有很多依赖项，最好使用 sbt 并让它*担心*类路径。

# objective-c - 带有静态数据的 iOS 单例

> ID：12053270
> 
> 赞同：1
> 
> 时间：2012-08-21T10:48:07.900
> 
> 标签：objective-c, ios, static, singleton

我正在使用游戏中心，并希望有一个单例类来访问我设置的 GK 功能，但我随后介绍了几个需要委托的方法。显然，委托不能真正与单例一起正常工作，但我希望/需要在此类中加载的数据加载一次并一直存在。

有没有一种很好的方法可以让我一直将数据保存在那里，但是在需要时实例化该类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T11:44:29.093

Yoy 说“单例类”，我假设你的意思是这个类只有类方法。没关系，你仍然可以使用它，因为类对象仍然是对象。也就是说，您可能需要维护状态。每个委托调用都将包含一些允许对象识别发送者的参数。

我自己可能会做的是在“初始化”方法中创建一个 NSMutableDictionary，然后让对象在发送委托方法之前注册自己，当它们注册时创建另一个 mutableDictionary，并将其保存在第一个以发送对象作为键的情况下（或其他一些唯一标识符）。

每个委托调用都必须包含发送者，这样您就可以检索与该对象关联的字典。

# c - c语言中的##是什么？

> ID：12053275
> 
> 赞同：9
> 
> 时间：2012-08-21T10:48:14.967
> 
> 标签：c, gcc, syntax, c-preprocessor

我看过这个片段：

```
#define kthread_create(threadfn, data, namefmt, arg...) \
    kthread_create_on_node(threadfn, data, -1, namefmt, ##arg) 
```

1.  代表什么`##`？
2.  `##`当它出现在宏之外是什么意思？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-21T13:02:13.230

与其他答案相反，这实际上是 GCC 扩展。直接粘贴变量 args 时，如果没有传递额外的 args，则会出现问题。因此，GCC`##`在与`__VA_ARGS__`或 varargs 变量（用 声明`argname...`）一起使用时会生成。如果它包含一个值，则粘贴，如果不包含，则删除前面的逗号。

此扩展的文档在[这里](http://gcc.gnu.org/onlinedocs/cpp/Variadic-Macros.html)：

> 其次，“##”标记粘贴运算符放在逗号和变量参数之间时具有特殊含义。如果你写
> 
> ```
> #define eprintf(format, ...) fprintf (stderr, format, ##__VA_ARGS__) 
> ```
> 
> 并且在使用 eprintf 宏时省略了变量参数，那么 '##' 之前的逗号将被删除。如果您传递一个空参数，则不会发生这种情况，如果 '##' 前面的标记不是逗号，也不会发生这种情况。
> 
> ```
> eprintf ("success!\n")
>       ==> fprintf(stderr, "success!\n"); 
> ```
> 
> 上面的解释对于唯一的宏参数是可变参数参数的情况是模棱两可的，因为试图区分根本没有参数是空参数还是缺少参数是没有意义的。在这种情况下，C99 标准清楚地表明逗号必须保留，但是现有的 GCC 扩展用于吞下逗号。因此，CPP 在符合特定 C 标准时保留逗号，否则将其删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T10:50:19.283

这“粘贴”了传入`arg`宏扩展的任何内容。例子：

```
kthread_create(threadfn, data, namefmt, foo, bar, doo); 
```

扩展为：

```
kthread_create_on_node(threadfn, data, -1, namefmt, foo, bar, doo); 
```

# c# - Sitecore 为标题添加额外的标题

> ID：12053282
> 
> 赞同：3
> 
> 时间：2012-08-21T10:48:56.970
> 
> 标签：c#, asp.net, sitecore

我是一个在基于 sitecore 的网站上工作的 asp.net 开发人员，我们的 sitecore 专家目前正在度假，而 sitecore 似乎正在做一些我不明白的事情。

我需要将元标记动态添加到页眉，所以我将 runat="server 添加到 head 标记，如下所示

```
<head runat="server"> 
```

这有效并允许我做我需要做的事情，但是有一个奇怪的副作用，它`<title></title>`在标题中添加了一个空标签，我无法弄清楚这是如何以及为什么会发生的。我们目前有一个站点范围的静态标题，所以我们最终有 2 个标题标签，这很烦人。但是我们打算很快开始动态设置页面标题所以猜我想知道两件事？

为什么/如何发生这种情况？

是否可以轻松地根据站点核心字段的值动态设置页面标题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T11:02:12.853

据我所知，这是一个已知的 asp.net 问题（功能？）。您可以将隐藏的标题标签 runat server 添加到头部，以避免创建额外的空标题标签，例如：

```
<title visible="false" runat="server"><%-- I'm necessary here, do not remove me --%></title> 
```

# oracle - 如何使用 UTL_FILE 从 CLOB 类型字段将十六进制 FF 符号写入文件？

> ID：12053285
> 
> 赞同：0
> 
> 时间：2012-08-21T10:49:03.013
> 
> 标签：oracle, plsql, hex, clob, utl-file

有人知道如何在字段类型为 «clob» 的表中插入一个数据，在使用 utl_file 后将在结果文件中查看，如十六进制编辑器中的 FF FF FF FF？我做了下一个（以及许多其他尝试）：

```
INSERT INTO DATA.FILE_TAB
(A1 --CLOB type field
)
select 
LPAD(chr(to_number('FF', 'XX')), 22, chr(to_number('FF', 'XX'))) A1
from DUAL; 
```

插入后，我使用 utl_file (put_line) 在目录中创建一个 .dat 文件。当我打开它时，我看到了任何东西，但不需要字符。=（在十六进制编辑器中，我需要通过[链接](https://dl.dropbox.com/u/25164865/FF.png)查看符号 FF FF FF FF FF FF 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T11:12:09.313

您可以为此目的使用[UTL_RAW包](http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/u_raw.htm#BABJHEGF)

```
insert into data.file_tab(a1)
values (lpad(utl_raw.cast_to_varchar2('FF'), 22, utl_raw.cast_to_varchar2('FF'))); 
```

# java - 将硬编码文件解密为 byte[]

> ID：12053299
> 
> 赞同：1
> 
> 时间：2012-08-21T10:50:15.893
> 
> 标签：java, android, encryption

嗯，这实际上是一个两部分...

首先我需要

1.  读取文件的内容
2.  将它们加密成一个`byte[]`
3.  将文件写入`byte[]`文件或其他...

然后#2 或#3 的结果将进入另一个项目。我正在尝试保护我们的 PEM/DER 密钥。

对于解密，我需要

1.  读取加密文件的内容作为`byte[]`
2.  将它们解密为`byte[]`
3.  将解密的数据写入文件或使用它而不是文件

现在，我有一些基本的加密代码

```
 KeyGenerator keyGenerator = KeyGenerator.getInstance("AES");
    keyGenerator.init(128); // 192 and 256 bits may not be available

    SecretKey secretKey = keyGenerator.generateKey();

    Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");

    // By initializing the cipher in CBC mode, an "initialization vector" has been randomly
    // generated. This initialization vector will be necessary to decrypt the encrypted data.
    // It is safe to store the initialization vector in plain text for later use. You can obtain
    // it's bytes by calling iv.getIV().
    cipher.init(Cipher.ENCRYPT_MODE, secretKey);
    IvParameterSpec iv = cipher.getParameters().getParameterSpec(IvParameterSpec.class);
        //      IvParameterSpec iv = new IvParameterSpec(IV); //used for the hardcoded one

        byte[] encryptedData = cipher.doFinal(data); 
```

并解密一个

```
 cipher.init(Cipher.DECRYPT_MODE, secretKey, iv);
    byte[] decryptedData = cipher.doFinal(encryptedData);
    System.out.println("decrypted: " + new String(decryptedData)); 
```

问题是：

给定一个用例场景，其中一个人很少加密某些东西并且会分发要在运行时解密的加密密钥，除了密文之外，我还需要保存什么？

我知道我需要保存 IV，但是当我解密时不太好 - 这让我相信我也需要保存 secretKey。

谁能给我任何提示、指示或一般安全提示，以获得更好的解决方案？如果我需要保存密钥、IV 和加密数据，我应该将它们存储在哪里？也许硬编码密钥并将IV与加密数据一起存储？也许对 IV 和密钥都进行硬编码，并将加密数据存储在文件中？

这与理论上的安全无关，将其视为您可能对试图窃取您的钥匙的人造成的最大麻烦和不便。我们都知道我无法完美地隐藏它们。

我非常需要这个人从[解密加密文件并在 Java 中执行开始的内容](https://stackoverflow.com/questions/8432531/decrypting-an-encrypted-file-and-executing-in-java)

但是，如果有更好的方法将安全数据输入 PemKeyReader，我会全力以赴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T11:03:00.053

共享密钥和加密某些东西是完全不同的两件事。[如何共享密钥](http://docs.oracle.com/javase/6/docs/technotes/guides/security/certpath/CertPathProgGuide.html#CoreClasses)

话虽如此，`AES`128 位的加密算法比 128 位的加密算法要强，`3DES`所以您可以做的是保持`PKI`基础设施到位以进行交换`AES keys`，然后使用它们进行加密和解密。

为什么不`RSA`呢？`RSA`需要至少 512 位才能将其视为最强，如果增加更多位，则会增加加密和解密所需的时间。

所以 AES 快速且安全。

使用[SecretKeySpec](http://docs.oracle.com/javase/1.4.2/docs/api/javax/crypto/spec/SecretKeySpec.html)从 byte[] 创建密钥

```
public static void main(String[] args) throws Exception
{
    // Initialise secret key with predefined byte array [] like below. I
    // have used simple string to array method to generate 16 byte array.
    // AES Key must be minimum 16 bytes.
    // Now you can put this byte array some where is .SO file.
    // Generate new Key using this byte []
    // Then you can generate a key using device specific information at
    // first boot up.
    // Use second key to encrypt data and first key to encrypt the second
    // key
    // I Hope it clears all the doubts
    SecretKey key = new SecretKeySpec("ABCDEFGHIJKLMNOP".getBytes(), "AES");
    System.out.println(Arrays.toString(key.getEncoded()));
    // Initialise Cipher with AES Algorithm
    Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
    // Set The Encrypt Mode
    cipher.init(Cipher.ENCRYPT_MODE, key);
    // Encrypt some bytes
    byte[] encrypted = cipher.doFinal("ABCDEFGH".getBytes());
    // Print it to vefiry
    System.out.println(Arrays.toString(encrypted));

    // Get The IV
    byte[] iv = cipher.getIV();
    System.out.println(iv.length);
    // Now why storing you can create structure like [16 IV][Encrypted Data]
    // And while decrypting you can read first [16] bytes IV and then
    // decrypt remaining bytes

    //byte[] iv = new byte[16];
    // System.arraycopy(encrypted, 0, iv, 0, 16)
    //Copy remaining bytes to decrypt

    // set cipher to decrypt mode

    cipher.init(Cipher.DECRYPT_MODE, key,new IvParameterSpec(iv));

    // decrypt it
    byte[] decrypted = cipher.doFinal(encrypted);
    System.out.println(new String(decrypted));

} 
```

现在编写一个算法，它将从一些随机数据（如设备名称、用户名、随机种子等）生成 byte[]。

`C`您可以通过将算法写入并创建`.SO`文件并开始`byte []`使用来为算法源代码添加更多保护`Native calls`。

做这一切有什么好处？

1.  事件如果您的 so 被黑客入侵，它将需要实时环境来运行创建密钥。
2.  即使有人确实破解了它，损坏也将是有限的，即 1 台设备
3.  黑客将不得不对每台设备重复相同的操作，这是极不可能做到的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T11:22:26.727

您的问题的 I/O 方面最好通过阅读 Oracle Java 教程的[“字节流”](http://docs.oracle.com/javase/tutorial/essential/io/bytestreams.html)和[“缓冲流”](http://docs.oracle.com/javase/tutorial/essential/io/buffers.html)部分来解决。您可以通过将字节写入 a 来累积内存中的字节`ByteArrayOutputStream`，然后使用该`toByteArray()`方法将字节获取为`byte[]`.

# python - Python 和 EJABBER/XMPP

> ID：12053300
> 
> 赞同：0
> 
> 时间：2012-08-21T10:50:18.160
> 
> 标签：python, xmpp

我必须编写一个程序`python`，可以`shutdown/hibernate/restart`通过服务器运行 Windows/Linux 基础操作系统`EJABBER/XMPP`，现在我想知道 EJABBER 是什么，我应该如何启动这个项目？有人对此有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T10:59:54.560

您可以编写一个连接到 Jabber 服务器并等待发送给它的命令的 Jabber 机器人，例如，通过使用[Twisted](http://twistedmatrix.com/trac/)网络库以及用于 Jabber 支持的库，例如[Wokkel](http://wokkel.ik.nu/)。

一些用 python 编写 jabber 机器人的项目也已经存在。例如，您可以将项目基于[python-jabberbot](http://thp.io/2007/python-jabberbot/)

# python - 使用 Python 的 Selenium WebDriver 中的 Selenium IDE 的 setTimeout 和 setSpeed 的等价物是什么？

> ID：12053311
> 
> 赞同：0
> 
> 时间：2012-08-21T10:50:36.890
> 
> 标签：python, selenium-webdriver

与 setTimeout 和 setSpeed 等效的 Python Selenium WebDriver 是什么？我有以下 Selenium IDE 代码，它在导出到 Python/unittest/Webdriver 代码时返回错误：

```
<tr>
       <td>setTimeout</td>
       <td>60000</td>
       <td></td>
</tr>
<tr>
       <td>setSpeed</td>
       <td>0</td>
       <td></td>
</tr> 
```

导出的 Python/unittest/WebDriver 代码如下：

```
 def test_sam(self):
        driver = self.driver
        # ERROR: Caught exception [ERROR: Unsupported command [setTimeout]]
        # ERROR: Caught exception [ERROR: Unsupported command [setSpeed]]
        ..... 
```

相同的 IDE 代码适用于 RC，但不适用于 WebDriver。请帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T11:08:59.680

隐式等待让你写草率的代码；使用 WebDriverWait 并真正了解您的应用程序的同步需求。

至于您可以使用哪些超时，Se 是开源的，因此查看代码会发现

```
Adam-Gouchers-MacBook:remote adam$ grep def webdriver.py | grep time_to_wait
    def implicitly_wait(self, time_to_wait):
    def set_script_timeout(self, time_to_wait):
    def set_page_load_timeout(self, time_to_wait): 
```

如果您需要进一步了解它们，每种方法甚至都有解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T11:00:33.017

如果我正确理解您的问题，那么我认为 setSpeed 的等价物是

```
driver = Driver()
driver.implicitly_wait(10) # The time that webdriver will wait for actions to happen before failing 
```

相当于设定速度的东西我还没有遇到过。您可以尝试删除它并查看是否遇到任何故障。根据我的经验，您需要的只是隐式等待。

有关完整文档，请参阅此页面：http: [//seleniumhq.org/docs/04_webdriver_advanced.html](http://seleniumhq.org/docs/04_webdriver_advanced.html)

# join - 多个索引之间的Lucene Join Query

> ID：12053312
> 
> 赞同：1
> 
> 时间：2012-08-21T10:50:38.723
> 
> 标签：join, lucene, indexing

我有两个 lucene 索引。假设第一个索引内容字段中的文档如下：

```
 name:....., filename: ......, fullpath: ........, etc. 
```

和第二个索引内容字段，如：

```
 name: ....., deviceip: ......, etc. 
```

现在我需要做的是：使用一些查询搜索第一个索引，然后根据公共字段（例如，在这种情况下为“名称”）将结果与第二个索引中的文档连接起来。连接的结果应该使得结果也包含来自第二个索引的字段。

结果：

```
name: ....., filename: ...., fullpath: ......., deviceip: ....., etc. 
```

是否可以使用 Lucene 实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-04-12T20:02:26.820

使用 BlockJoinQuery 可能会解决您的问题。你可以参考这篇博[文 http://blog.mikemccandless.com/2012/01/searching-relational-content-with.html](http://blog.mikemccandless.com/2012/01/searching-relational-content-with.html)

您最终将创建一个包含 count(TableA) + count(TableB) 文档（而不是 Count(TableA) x Count(TableB) ）的索引，并使用 BlockJoinQuery 进行搜索。

# unix - vim 语法高亮

> ID：12053315
> 
> 赞同：1
> 
> 时间：2012-08-21T10:50:54.597
> 
> 标签：unix, vim, vi

特别是如何更改 vim 中 C/C++/PHP 的语法突出显示？我也可以更改背景颜色，使其与外壳的颜色不同吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T11:24:02.527

在开始安装各种插件之前，请查看 Vim 附带的预装配色方案。就我而言，我有很多：

```
# rpm -ql vim vim-common | grep color
/usr/share/vim/vim72/colors
/usr/share/vim/vim72/colors/README.txt
/usr/share/vim/vim72/colors/blue.vim
/usr/share/vim/vim72/colors/darkblue.vim
/usr/share/vim/vim72/colors/default.vim
/usr/share/vim/vim72/colors/delek.vim
/usr/share/vim/vim72/colors/desert.vim
/usr/share/vim/vim72/colors/elflord.vim
/usr/share/vim/vim72/colors/evening.vim
/usr/share/vim/vim72/colors/koehler.vim
/usr/share/vim/vim72/colors/morning.vim
/usr/share/vim/vim72/colors/murphy.vim
/usr/share/vim/vim72/colors/pablo.vim
/usr/share/vim/vim72/colors/peachpuff.vim
/usr/share/vim/vim72/colors/ron.vim
/usr/share/vim/vim72/colors/shine.vim
/usr/share/vim/vim72/colors/slate.vim
/usr/share/vim/vim72/colors/torte.vim
/usr/share/vim/vim72/colors/zellner.vim
/usr/share/vim/vim72/ftplugin/dircolors.vim
/usr/share/vim/vim72/syntax/colortest.vim
/usr/share/vim/vim72/syntax/dircolors.vim
/usr/share/vim/vim72/syntax/syncolor.vim
/usr/share/vim/vimfiles/after/colors
/usr/share/vim/vimfiles/colors 
```

要更改它，只需使用以下命令：

```
colorscheme darkblue 
```

您也可以下载配色方案并将它们放入您的 VIMRC 子目录“colors”并以相同的方式加载它们。例如，我喜欢这个： http: [//ethanschoonover.com/solarized](http://ethanschoonover.com/solarized)

当然，您可以**修改这些**配色方案。只需将“default.vim”（或您喜欢的）复制到您的 VIMRC/colors 并编辑它以更改您想要的颜色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T10:57:17.517

你必须给它一个语法文件来加载和使用它：

[http://www.vim.org/scripts/script.php?script_id=1571](http://www.vim.org/scripts/script.php?script_id=1571)

启用它（如果你不知道）它`:set syntax`

有关在此处更改 vim 的背景检查的信息：

[设置 VIM 背景颜色](https://stackoverflow.com/questions/1117526/vim-background)

# maven - 排除测试的 Maven 依赖项

> ID：12053316
> 
> 赞同：51
> 
> 时间：2012-08-21T10:51:01.540
> 
> 标签：maven, maven-3

我有一个编译和运行时所需的依赖项，但我想在运行测试时排除它。这可能吗？也许，通过设置个人资料？但是如何仅在`test`生命周期阶段停用它？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-08-22T07:16:04.833

[借助 maven surefire 插件](http://maven.apache.org/plugins/maven-surefire-plugin/examples/configuring-classpath.html)，您可以在测试阶段（重新）配置类路径。您可以添加类路径元素或排除依赖项。

```
<project>
  [...]
  <build>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-surefire-plugin</artifactId>
        <version>2.12.2</version>
        <configuration>
          <additionalClasspathElements>
            <additionalClasspathElement>path/to/additional/resources</additionalClasspathElement>
            <additionalClasspathElement>path/to/additional/jar</additionalClasspathElement>
          </additionalClasspathElements>
          <classpathDependencyExcludes>
            <classpathDependencyExclude>org.apache.commons:commons-email</classpathDependencyExclude>
          </classpathDependencyExcludes>
        </configuration>
      </plugin>
    </plugins>
  </build>
  [...]
</project> 
```

[正如](https://stackoverflow.com/questions/12053316/exclude-maven-dependency-for-tests/12068045#comment16347219_12068045)@jFrenetic 所指出的，您可以对[maven-failsafe-plugin](http://maven.apache.org/surefire/maven-failsafe-plugin/examples/configuring-classpath.html)做同样的事情。

# c++ - 如何在c++中从字符串“TimeInterval 20”中收集数字“20”？

> ID：12053317
> 
> 赞同：-1
> 
> 时间：2012-08-21T10:51:07.343
> 
> 标签：c++, windows

我想知道如何从字符串“TimeInterval 20”中获取字符串 20。

我知道使用下面的代码我可以获得存储在 cGetMinuteInterval 的字符串“TimeInterval”。

```
UINT iCount = strcspn("TimeInterval 20"," ");
strncpy_s(cGetMinuteInterval,MAXCHARSIZE,"TimeInterval 20",iCount); 
```

但是如果我想要字符串“TimeInterval 20”中的字符串 20 并存储在 cGetMinuteInterval 怎么办。

谢谢和问候， Abhineet

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T10:57:04.677

当您使用 C++ 时，请考虑使用`std::string`类和`substr`函数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T11:23:51.683

下一个片段会将 20 放入 cGetMinuteInterval，这在 C++ 中似乎是最简单的。接下来您需要进行一些输入检查，以验证您的输入（格式、值...）是否符合预期。

```
std::istringstream iss("TimeInterval 20");
std::string varName;
std::string cGetMinuteInterval;
iss >> varName >> cGetMinuteInterval;
std::cout << cGetMinuteInterval << "\n"; 
```

如果您希望 cGetMinuteInterval 为整数，只需更改声明即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T11:22:20.363

简单地使用这个。

```
string str = "TimeInterval 20" ;
int position = str.find("20") ;
cout << str.substr(position) ; 
```

我想这就是你想说的？

# html - 使用 css 和 html 自定义下拉选择

> ID：12053320
> 
> 赞同：1
> 
> 时间：2012-08-21T10:51:23.770
> 
> 标签：html, css

我正在尝试仅使用 html 和 css 创建自定义下拉菜单。我想知道是否可以使用焦点而不是悬停？现在处于悬停状态并且可以工作，但我想扩展该选择 onclick。

这里我有一个小提琴的例子：http: **[//jsfiddle.net/RwtHn/1084/](http://jsfiddle.net/RwtHn/1084/)**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T10:59:07.517

不要在 上使用悬停，在 上`li`使用悬停`a`：

```
a:hover + ul, a:focus + ul, a:active + ul {} 
```

[**演示**](http://dabblet.com/gist/1728264)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T10:58:54.490

编辑：这是一个演示：http: [//jsfiddle.net/RwtHn/1087/](http://jsfiddle.net/RwtHn/1087/)
哇。我很惊讶这甚至可以仅使用 HTML/CSS。

# google-apps-script - How do I create a Range class programatically in my google spreadsheet script?

> ID：12053325
> 
> 赞同：0
> 
> 时间：2012-08-21T10:51:39.780
> 
> 标签：google-apps-script, google-sheets

So I have this google script that I want to use to create charts in my spreadsheet. I'm basically programatically creating content (with the use of spreadsheet data) that I then want to plot. The way I used to do it is by filling one of the sheets with all the data and then using that data to plot, but I was hoping to skip that step and feed the javascript arrays directly into my addRange method.

So I've got a script that creates a new chart:

```
 // insert the scenario chart
  var scenarioChartBuilder = sheet.newChart();
  scenarioChartBuilder.setPosition(5, 6, 5, 5)
    .setChartType(Charts.ChartType.AREA)
    .addRange(rangeObject);
  sheet.insertChart(scenarioChartBuilder.build()); 
```

The problem is; how do I make "rangeObject", given that I only have javascript arrays, and don't want to use actual spreadsheet data? Or is there another way of plotting data that isn't actually in a spreadsheet?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T17:12:02.037

Range data is actually just a multidimensional array. So a rangeObject could just be defined like;

> var rangeobject = [[data, data, data],[data, data, data]];

The first array represents the row and the second array the column data. programmatically you could get the data like;

> var dataFirstRowSecondColumn = rangedata[0][1]; //0 indexed array!

So, to add a range is just to pass a multidimensional array (with content data). But beware ;-) When adding to a chart i would think that you would have to mind that each column would only contain on kind of data to be valid.

In code you could directly use my first example.

# javascript - gmap3 API - geoLatlng 没有给出确切的位置

> ID：12053326
> 
> 赞同：1
> 
> 时间：2012-08-21T10:51:43.693
> 
> 标签：javascript, google-maps, geolocation, jquery-gmap3

我正在使用 gmap3 的地理定位服务来获取用户的位置并为他们提供前往预定义目的地的路线。

目的地是（坐标注释后）：

```
var dest = "Unit 20, Tallaght Business Centre, Whitestown Road, Tallaght Business Park, Ireland";//53.282882, -6.383155 
```

使用以下方法查找用户的位置（我正在我的办公室为此进行所有开发，与地址完全相同`dest`）：

```
//get user's location
        function getLocation(){
            $('#map').gmap3(
            { action : 'geoLatLng',
              callback : function(latLng){
                if (latLng){
                  plotRoute(latLng, dest);
                  alert(latLng); //this alerts (53.34410399999999, -6.267493000000059), should be my exact location which is the same as 'dest'
                  return;
                } else {
                  alert("Unable to determine your location. Enable geolocation services and try again, or consult the map for our location.");
                  $('#directions-panel').text("We were unable to give you directions. Please enable geolocation services on your device to see directions from your location to our office.");
                  plotMarker(dest);
                }
              }
            });
          } 
```

所以理论上警报的内容`alert(Latlng);`应该与 完全相同`dest`，不是吗？

这纯粹是因为 gmap3 在精确定位用户位置方面的局限性，还是我做错了什么？使用 Google Maps JavaScript API v3 会更好吗？

完整的脚本可以在这里看到：http: [//pastebin.com/Vz1syjvE](http://pastebin.com/Vz1syjvE)

所有帮助表示赞赏。

# mysql - 重命名 SQL SELECT 语句中的列

> ID：12053327
> 
> 赞同：27
> 
> 时间：2012-08-21T10:51:48.387
> 
> 标签：mysql, sql

我想重命名`SELECT`表达式结果中的列。当然，以下不起作用：

```
SELECT * AS foobar_* FROM `foobar` 
```

由于我是 SQL 的新手，我想我只是缺少一个可以导致答案的概念、工具或关键字。正确方向的提示将不胜感激。谢谢！

**更新**

我正在寻找一种通用的方法来做到这一点，而 MySQL 特定的技术绝对没问题。

简而言之，我正在编写一个工具，将 MySQL 查询的结果“导出”到 Google 电子表格（通过 Google 数据 API）。有些查询是连接，所以为了使列唯一，我想在所有列名前加上它们各自的表名。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-08-21T10:53:54.927

您可以一一为列名起别名，如下所示

```
SELECT col1 as `MyNameForCol1`, col2 as `MyNameForCol2` 
FROM `foobar` 
```

**编辑**您可以`INFORMATION_SCHEMA.COLUMNS`像这样直接访问以修改新别名。但是，如何将其放入查询中超出了我的 MySql 技能:(

```
select CONCAT('Foobar_', COLUMN_NAME)
from INFORMATION_SCHEMA.COLUMNS 
where TABLE_NAME = 'Foobar' 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-21T10:53:40.450

你必须重命名每一列

```
SELECT col1 as MyCol1,
       col2 as MyCol2,
 .......
 FROM `foobar` 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-06-07T19:48:25.257

```
select column1 as xyz,
      column2 as pqr,
.....

from TableName; 
```

# iphone - NSURLConnection 委托方法没有被调用

> ID：12053330
> 
> 赞同：0
> 
> 时间：2012-08-21T10:51:54.410
> 
> 标签：iphone, objective-c, ios, macos, asynchronous

我遇到了这个问题，我在这里浏览了很多关于堆栈溢出和其他地方的帖子，但找不到解决方案。我也在主线程上运行它。代码如下。

```
@interface JsonViewController : UIViewController <UIActionSheetDelegate,UIWebViewDelegate,NSURLConnectionDelegate>
{
  ....
}
@implementation JsonViewController
- (void)viewDidLoad
{
    [super viewDidLoad];
    NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"http://google.com"] cachePolicy:NSURLRequestReloadIgnoringLocalAndRemoteCacheData timeoutInterval:60];
    rssFeedDetailViewConnection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
    NSLog(@"PRINTING RSS FEED %@", rssFeedDetailViewConnection);
[rssFeedDetailViewConnection scheduleInRunLoop:[NSRunLoop mainRunLoop] 
                                       forMode:NSDefaultRunLoopMode];
    [rssFeedDetailViewConnection start];
}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {
NSLog(@"Hello");
responseData = [[NSMutableData alloc] init];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
     NSLog(@"Hello");
    [responseData appendData:data];
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {
     NSLog(@"Hello");
    [responseData release];
    [connection release];
// Show error message
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
 NSLog(@"Hello");
    // Use responseData
    [responseData release];
    [connection release];
 } 
```

任何帮助将不胜感激。我已经坚持了两天了..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T11:17:37.563

您不需要这些语句：

```
[rssFeedDetailViewConnection scheduleInRunLoop:[NSRunLoop mainRunLoop]  forMode:NSDefaultRunLoopMode];
[rssFeedDetailViewConnection start]; 
```

因为你正在使用`initWithRequest:delegate:`. 此调用已经开始加载数据。

如果删除这些特定语句会发生什么？

有关[NSURLConnection](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsurlconnection_Class/Reference/Reference.html)的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T15:46:49.773

有一个名为finished的布尔值，并将此代码添加到您编写NSURLConnection代码的地方。

```
 while(!finished) {
    [[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode beforeDate:[NSDate distantFuture]];
} 
```

在你的 connectionDidFinishLoading 中添加这个

```
 finished = TRUE; 
```

那行得通。它不是我理解的最佳解决方案，但它有效。

# android - WebView 中的网页不可用错误

> ID：12053334
> 
> 赞同：0
> 
> 时间：2012-08-21T10:52:12.087
> 
> 标签：android, android-intent, android-webview, android-tabhost

我正在使用以下教程创建应用程序

[http://www.coderzheaven.com/2011/05/09/android-tabbars-example/](http://www.coderzheaven.com/2011/05/09/android-tabbars-example/)

对于每个选项卡，我都添加了一个带有 webview 的布局。我想检查每个选项卡更改的网络可用性，如果网络连接不可用，我已将页面重定向到 errorActivity。

```
import android.app.TabActivity;
import android.content.*;
import android.content.res.Resources;
import android.os.Bundle;
import android.widget.TabHost;
import android.widget.TabHost.OnTabChangeListener;
import android.widget.TabHost.TabSpec;

public class MyView extends TabActivity implements OnTabChangeListener
{   
    TabHost tabHost;
    String value;
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Resources res = getResources(); 
        tabHost = (TabHost)findViewById(android.R.id.tabhost);

        TabSpec FirstTabSpec = tabHost.newTabSpec("tab1");
        TabSpec SecondTabSpec = tabHost.newTabSpec("tab2");
        TabSpec ThirdTabSpec = tabHost.newTabSpec("tab3");
        TabSpec FourthTabSpec = tabHost.newTabSpec("tab4");

        FirstTabSpec.setIndicator("Tab1",res.getDrawable(R.drawable.tab1)).setContent(new Intent(this,FirstView.class));
        secondTabSpec.setIndicator("Tab2 ",res.getDrawable(R.drawable.tab2)).setContent(new Intent(this,SecondView.class));
        ThirdTabSpec.setIndicator("Tab3",res.getDrawable(R.drawable.tab3)).setContent(new Intent(this,ThirdView.class));
        FourthTabSpec.setIndicator("Tab4",res.getDrawable(R.drawable.tab4)).setContent(new Intent(this,FourthView.class));

        tabHost.addTab(FirstTabSpec);
        tabHost.addTab(SecondTabSpec);
        tabHost.addTab(ThirdTabSpec);
        tabHost.addTab(FourthTabSpec);
        tabHost.setOnTabChangedListener(this);
    }

    public void onTabChanged(String tabId) 
    {   
        if(!IsNetworkAvaialble())
        {

                webview.stopLoading();
                Intent myIntent = new Intent((Activity)MyView.this, NetErrorPage.class);   
            myIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            ((Activity)MyView.this).startActivity(myIntent);
            finish();
        }

    }

} 
```

但是单击选项卡，页面会在显示**“网页不可用”**的 2 或 3 秒之前重定向到错误页面。如何阻止这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T09:42:45.947

**我已经解决了这个问题，如下所示。**

> 在 OnTabchanged 事件中，我将一个静态布尔值设置为 true。在每个活动类中，我都包含了 loadurl 方法。现在，如果网络连接失败并且静态布尔值不等于 true，我已经更改了此设置，然后我已停止加载并显示警报。否则加载 url。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T21:28:03.543

为访问网络添加此权限：

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

# php - 使用 mysql 结果为导航创建下一个和上一个按钮

> ID：12053338
> 
> 赞同：0
> 
> 时间：2012-08-21T10:52:25.313
> 
> 标签：php, mysql

我从这个线程中获取了工作代码： [为导航创建下一个和上一个按钮](https://stackoverflow.com/questions/7394058/creating-next-and-previous-buttons-for-navigation)

它对我有用，但现在我想问如果链接到达第一个或最后一个 ID，有什么方法可以禁用链接？

这是我的简短代码：

```
function getNavID($id) {

$result4= mysql_query("SELECT 
( SELECT id FROM products_list WHERE id > '$id' LIMIT 1 )
AS nextValue,
( SELECT id FROM products_list WHERE id < '$id' ORDER BY id DESC LIMIT 1 )
AS prevValue
FROM products_list");
if ($resultID = mysql_fetch_array($result4)) {
    return $resultID;
}
else {
    return NULL;
}
}

$LinkID = getNavID($id);

<p><a href="update.php?id=<?php echo urlencode($LinkID['prevValue']); ?>">Previous</a></p>
<p><a href="update.php?id=<?php echo urlencode($LinkID['nextValue']); ?>">Next</a></p> 
```

假设我现在所在的页面在逻辑上是 ID=1，没有小于 1 的 ID。如果 ID 达到最小和最大 ID，我有什么办法可以禁用链接？

提前谢谢各位。

问候，杰夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T10:56:53.890

对于 ID=1，`$LinkID['prevValue']`应返回 NULL，您可以[轻松](https://stackoverflow.com/questions/1576243/php-check-for-null)检查。包括一个检查，以便您仅在有上一个/下一个值时打印链接，例如：

```
<p>
<?php
    if (!is_null($LinkID['prevValue'])) {
>?
    <a href="update.php?id=<?php echo urlencode($LinkID['prevValue']); ?>">Previous</a>
<?php
    } else {
        echo "No previous entries.";
    }
?>
</p> 
```

类似地用于下一个条目。

顺便说一句，为了完整起见，我会像这样重写 SQL 语句：

```
SELECT 
    ( SELECT id FROM products_list
        WHERE id > '$id' LIMIT 1 ) AS nextValue,
    ( SELECT id FROM products_list
        WHERE id < '$id' ORDER BY id DESC LIMIT 1 ) AS prevValue
    FROM products_list
    LIMIT 1 
```

即最后一个额外的 LIMIT 1。您可能不会注意到结果有什么不同，但是通过您的语句，数据库会为表 products_list 中的每个条目提供一行（您只使用第一个，并且它们都是相等的）。

# c# - 地图驱动器的 Web 服务替代方案

> ID：12053339
> 
> 赞同：0
> 
> 时间：2012-08-21T10:52:26.280
> 
> 标签：c#, web-services

项目的一个要求是让我的 winforms 系统能够看到中央文件存储库（扫描文档的中央文件夹）。用户需要能够读取、删除和保存文件。

为此，服务器有一个共享文件夹，每个客户端都有一个指向该文件夹的映射驱动器。根据经验，我发现地图驱动器确实很痛苦。有时你会遇到安全问题，有时地图驱动器会变得不稳定。

我宁愿避免这种设计，而是有一个发布文件列表的网络服务，另一个返回文件的服务，删除文件等。

但感觉这必须在很多次之前完成。而不是我自己的，有没有人实施或看到类似的东西？

服务器是带有 IIS 的窗口，我在 ms 堆栈上，所以有适合它的东西是有意义的。

# java-me - 使用 Farpointe 数据读取器读取/写入 Kovio NFC 标签

> ID：12053341
> 
> 赞同：1
> 
> 时间：2012-08-21T10:52:41.013
> 
> 标签：java-me, nfc, ndef

我们买了一个`KOVIO 2K NFC`标签，连同我们得到`Farpointe Data reader`的。我们可以使用 Nexus 读写这些标签。但是，我们正在通过服务器代码构建一个`API`我们想要的地方，`to write`而不`tags`需要任何手机 API。是否有任何支持写入 NFC 标签的 Java API？

是否有任何软件/SDK 可以使用 Farpointe Data Reader 读取数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T22:41:09.753

Kovio 2K NFC 标签可以配置为[NFC Forum Type 2 标签](http://www.nfc-forum.org/specs/spec_list/)。有一个支持 NFC 论坛标签的 Java ME API：[JSR 257](http://www.jcp.org/en/jsr/detail?id=257)。（不过，我想知道这个 API 的相关性如何，另请参阅这个问题的答案：[Java NFC (JSR 257)](https://stackoverflow.com/questions/7886868/java-nfc-jsr-257)。）不幸的是，我不熟悉 Farpointe 数据读取器。

# objective-c - 将 UIImage 与 UIImage 的部分文件名进行比较

> ID：12053348
> 
> 赞同：0
> 
> 时间：2012-08-21T10:53:47.840
> 
> 标签：objective-c, uiimage, comparison, logic, string-comparison

这可能吗？例如我有：

```
pin.image == [UIImage imageNamed: @"Bpin_map"] 
```

但我需要检查`Apin_map`等等。有没有办法与`pin.image`以`UIImage`结尾的名称进行比较`_map`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T11:04:20.280

我假设您已经了解比较字符串（文件名）的来龙去脉，这里真正的问题是 UIImage 没有属性来包含从中加载数据的文件名......所以：

使用 objc_setAssociatedObject() 来存储名称，如下所示：

```
objc_setAssociatedObject(pin.image,"imageName",@"Bpin_map",OBJC_ASSOCIATION_RETAIN_NONATOMIC); 
```

然后您可以使用再次检索名称

```
NSString* filename = (NSString*)objc_getAssociatedObject(pin.image,"imageName");

if([filename hasSuffix:@"_map"])
{
 // success!
} 
```

# jquery - Jquery - 遍历多个列表

> ID：12053358
> 
> 赞同：0
> 
> 时间：2012-08-21T10:54:23.553
> 
> 标签：jquery

我正在尝试遍历页面上的多个列表，并根据每个列表的项目数，我想获取每个 li 的高度并设置最大高度（对于 5 个项目）并设置滚动条。

我有以下脚本遍历找到的每个列表并正确返回长度，但我无法获得每个 li 的高度。谢谢你的帮助。

查询::

```
 $(".list-item").each(function () {

            var sum = 0;

            var getLength = $(this).children().children().children('ol li').length;
            console.log(getLength);
            //Get length of list items and add scroll bar if more than 5
            if (getLength > 5) {
                $(this).addClass('maxLength');

                $('.maxLength ol li:lt(5)').each(function () {
                    sum += $(this).height();
                    console.log(sum);
                });

                $('.maxLength ol').css({ maxHeight: sum + 'px', overflow: 'auto' });
            }
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T11:02:24.687

您可以将列表包装在 div 中并添加以下 css
*样式，而不是计算子项和设置高度：*

```
div{
 max-height:125px(your choice);//The height that 5 li elemtns occupies
 overflow:auto;
 display:inline-block;
}
div li{
 line-height:25px(your choice);
} 
```

*html:*

```
<div>
  <ul> 
    <li>1</li>
    <li>2</li>
    <li>3</li>
    <li>4</li>
    <li>5</li>
  </ul>
<div> 
```

我希望这能解决你的问题......

# c# - 单元测试 Web 服务方法

> ID：12053361
> 
> 赞同：1
> 
> 时间：2012-08-21T10:54:36.377
> 
> 标签：c#, unit-testing, tdd, mstest

我目前正在编写一个应用程序，它是最终用户和 Web 服务之间的一种代理。

用户请求服务，应用程序调用设置适当参数的 Web 服务方法，并返回结果。

为了确保没有出错，我决定为该项目创建单元测试（是的！我知道在编写代码*之后*这样做有点晚了。下次我会先编写单元测试）。

在这些单元测试中，我必须向 Web 服务发出真正的请求，以确保不会引发权限异常、服务相关异常等。因此，提取接口并模拟服务进行测试是没有帮助的。编写实际调用真正的 Web 服务的单元测试是否可以接受？

如果我的网络服务只允许例如每分钟一个请求，是否有可能在两个测试之间有延迟？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T11:01:28.517

您所说的是**集成测试**。

为您的 Web 服务编写这样的测试不是问题。它们以与单元测试相同的风格编写，但测试实时系统和/或它的部分。您甚至可以在测试上下文中启动您的 Web 服务。

这取决于您和您的测试环境来限制呼叫延迟的情况或模拟任何其他情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T10:57:06.923

我的理解是单元测试应该立即产生结果。您所追求的是集成测试，而不是单元测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T11:03:02.407

当然，这是可以接受的，尽管它们会比单元测试更多“集成测试”，因为您正在测试集成的整个系统。

您可以做些什么来延迟测试，就是简单地将 a`Thread.sleep(1000)`放在测试的开头。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T11:09:46.757

那么测试 Web 服务层背后的代码呢？我过去所做的只是将 Web 服务用作所有真实代码所在的业务逻辑库的包装器。然后你可以在这个库上进行集成测试，而不用担心你的 Web 服务请求限制。

# pointers - 结构中的指针

> ID：12053364
> 
> 赞同：0
> 
> 时间：2012-08-21T10:55:00.010
> 
> 标签：pointers, memory-management, linked-list, hashtable, structure

我正在尝试使用我在链表结构中声明的文件指针，但我一直将它作为 NULL 值。

我有以下结构：

```
struct _hash_table
{
    char found;
    struct _hash_chain *hash_chain;
}

struct _hash_chain
{
    uint64_t value;
    FILE *fout;
    struct _hash_chain *next;
} 
```

和

```
struct _hash_table hash_table[TABLE_SIZE]; 
```

我不断得到 hash_table[i]->hash_chain->fout = NULL ，它的指针地址为零。

我需要为指针动态分配内存吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T11:35:13.610

`struct _hash_table hash_table[TABLE_SIZE];`- 这不会分配内存，`struct _hash_chain`因为`hash_chain`是指针变量`_hash_table`。

```
...
struct _hash_table hash_table[TABLE_SIZE];
for (i = 0; i < TABLE_SIZE; i++);
{
    hash_table[i].hash_chain = (struct _hash_chain *)malloc(sizeof(struct _hash_chain));
    memset(hash_table[i].hash_chain, 0, sizeof(struct _hash_chain));
}

//Then do file open for TABLE_SIZE times
//hash_table[0].hash_chain->fout = fopen("file.txt", "w");
... 
```

没有`h_table[i].hash_chain`动态内存分配的访问将导致崩溃（未定义的行为）。我希望你会照顾`next`指针。

# javascript - 如何使文本、数字和日期 html 输入字段以一致的方式支持 Ctrl+Z（撤消）？

> ID：12053370
> 
> 赞同：1
> 
> 时间：2012-08-21T10:55:37.703
> 
> 标签：javascript, html

文本输入字段似乎完全支持 Ctrl+Z（撤消）。

如果值已输入到相关字段中，则数字和日期输入字段仅支持它。但是，如果它是通过关联的辅助控件（即数字字段的范围控件和日期字段的日历控件）选择的，则 Ctrl+Z 不起作用。

无论用户如何输入值，任何人都可以建议如何使数字和日期字段支持 Ctrl+Z 吗？

谢谢。

附言

我目前正在使用 jquery 和 chrome。

**编辑1**

我正在使用`<input type='number' ...`并且`<input type='date' ...`完全有可能我应该使用其他东西（什么？）

**编辑2**

我只是在谈论交互式操作，而不是基于脚本的更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T12:09:30.317

撤消是 HTML5 应用程序中的一个弱点。没有简单的解决方案，因为撤消最终取决于应用程序（就像在桌面应用程序中一样）。

有关一些解决方案，请参阅此问题：[在 Web 应用程序中实现撤消](https://stackoverflow.com/questions/6386743/implementing-undo-in-a-web-app)

# php - 整数是否需要转义

> ID：12053375
> 
> 赞同：6
> 
> 时间：2012-08-21T10:56:25.143
> 
> 标签：php, mysql, codeigniter

用 转换后在查询中转义整数有什么意义`intval()`吗？

我正在使用这样的整数：

```
$sql .= " LIMIT " . $this->db->escape(intval($offset))  . ", 10"; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T10:57:55.880

不，[intval](http://php.net/intval)将始终返回一个整数（`0`失败时）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T10:58:16.187

不，因为由于 intval 的结果，除了数字之外，您什么也收不到。

# java - 如何使用 JAXB 读取 XML 文件？

> ID：12053379
> 
> 赞同：7
> 
> 时间：2012-08-21T10:56:47.780
> 
> 标签：java, xml, jaxb

我使用 JAXB 从 XML 模式生成 Java 类。现在我想用这些类读取 XML 文件，但不能。我试试这个

```
 JAXBContext jaxbContext = JAXBContext.newInstance(STDMP.class);
    Unmarshaller jaxbUnmarshaller = jaxbContext.createUnmarshaller();
    STDMP ts = (STDMP)jaxbUnmarshaller.unmarshal(xml_gkuzu);
    System.out.println(ts.getEDocument().getSender().getName()); 
```

并得到这个异常

```
Exception in thread "main" java.lang.NullPointerException
at java.util.EnumMap.<init>(EnumMap.java:113)
at com.sun.xml.bind.v2.model.impl.RuntimeEnumLeafInfoImpl.<init>(RuntimeEnumLeafInfoImpl.java:87)
at com.sun.xml.bind.v2.model.impl.RuntimeModelBuilder.createEnumLeafInfo(RuntimeModelBuilder.java:109)
at com.sun.xml.bind.v2.model.impl.RuntimeModelBuilder.createEnumLeafInfo(RuntimeModelBuilder.java:85)
at com.sun.xml.bind.v2.model.impl.ModelBuilder.getClassInfo(ModelBuilder.java:229)
at com.sun.xml.bind.v2.model.impl.RuntimeModelBuilder.getClassInfo(RuntimeModelBuilder.java:104)
at com.sun.xml.bind.v2.model.impl.RuntimeModelBuilder.getClassInfo(RuntimeModelBuilder.java:85)
at com.sun.xml.bind.v2.model.impl.ModelBuilder.getClassInfo(ModelBuilder.java:214)
at com.sun.xml.bind.v2.model.impl.RuntimeModelBuilder.getClassInfo(RuntimeModelBuilder.java:99)
at com.sun.xml.bind.v2.model.impl.RuntimeModelBuilder.getClassInfo(RuntimeModelBuilder.java:85)
at com.sun.xml.bind.v2.model.impl.ModelBuilder.getTypeInfo(ModelBuilder.java:320)
at com.sun.xml.bind.v2.model.impl.SingleTypePropertyInfoImpl.getTarget(SingleTypePropertyInfoImpl.java:94)
at com.sun.xml.bind.v2.model.impl.RuntimeAttributePropertyInfoImpl.getTarget(RuntimeAttributePropertyInfoImpl.java:66)
at com.sun.xml.bind.v2.model.impl.RuntimeAttributePropertyInfoImpl.getTarget(RuntimeAttributePropertyInfoImpl.java:54)
at com.sun.xml.bind.v2.model.impl.SingleTypePropertyInfoImpl.ref(SingleTypePropertyInfoImpl.java:88)
at com.sun.xml.bind.v2.model.impl.RuntimeAttributePropertyInfoImpl.ref(RuntimeAttributePropertyInfoImpl.java:70)
at com.sun.xml.bind.v2.model.impl.RuntimeAttributePropertyInfoImpl.ref(RuntimeAttributePropertyInfoImpl.java:54)
at com.sun.xml.bind.v2.model.impl.ModelBuilder.getClassInfo(ModelBuilder.java:260)
at com.sun.xml.bind.v2.model.impl.RuntimeModelBuilder.getClassInfo(RuntimeModelBuilder.java:104)
at com.sun.xml.bind.v2.model.impl.RuntimeModelBuilder.getClassInfo(RuntimeModelBuilder.java:85)
at com.sun.xml.bind.v2.model.impl.ModelBuilder.getClassInfo(ModelBuilder.java:214)
at com.sun.xml.bind.v2.model.impl.RuntimeModelBuilder.getClassInfo(RuntimeModelBuilder.java:99)
at com.sun.xml.bind.v2.model.impl.RuntimeModelBuilder.getClassInfo(RuntimeModelBuilder.java:85)
at com.sun.xml.bind.v2.model.impl.ModelBuilder.getTypeInfo(ModelBuilder.java:320)
at com.sun.xml.bind.v2.model.impl.TypeRefImpl.calcRef(TypeRefImpl.java:96)
at com.sun.xml.bind.v2.model.impl.TypeRefImpl.getTarget(TypeRefImpl.java:73)
at com.sun.xml.bind.v2.model.impl.RuntimeTypeRefImpl.getTarget(RuntimeTypeRefImpl.java:62)
at com.sun.xml.bind.v2.model.impl.RuntimeTypeRefImpl.getTarget(RuntimeTypeRefImpl.java:55)
at com.sun.xml.bind.v2.model.impl.ElementPropertyInfoImpl$1.get(ElementPropertyInfoImpl.java:78)
at com.sun.xml.bind.v2.model.impl.ElementPropertyInfoImpl$1.get(ElementPropertyInfoImpl.java:76)
at java.util.AbstractList$Itr.next(AbstractList.java:345)
at com.sun.xml.bind.v2.model.impl.ModelBuilder.getClassInfo(ModelBuilder.java:260)
at com.sun.xml.bind.v2.model.impl.RuntimeModelBuilder.getClassInfo(RuntimeModelBuilder.java:104)
at com.sun.xml.bind.v2.model.impl.RuntimeModelBuilder.getClassInfo(RuntimeModelBuilder.java:85)
at com.sun.xml.bind.v2.model.impl.ModelBuilder.getClassInfo(ModelBuilder.java:214)
at com.sun.xml.bind.v2.model.impl.RuntimeModelBuilder.getClassInfo(RuntimeModelBuilder.java:99)
at com.sun.xml.bind.v2.model.impl.RuntimeModelBuilder.getClassInfo(RuntimeModelBuilder.java:85)
at com.sun.xml.bind.v2.model.impl.ModelBuilder.getTypeInfo(ModelBuilder.java:320)
at com.sun.xml.bind.v2.model.impl.TypeRefImpl.calcRef(TypeRefImpl.java:96)
at com.sun.xml.bind.v2.model.impl.TypeRefImpl.getTarget(TypeRefImpl.java:73)
at com.sun.xml.bind.v2.model.impl.RuntimeTypeRefImpl.getTarget(RuntimeTypeRefImpl.java:62)
at com.sun.xml.bind.v2.model.impl.RuntimeTypeRefImpl.getTarget(RuntimeTypeRefImpl.java:55)
at com.sun.xml.bind.v2.model.impl.ElementPropertyInfoImpl$1.get(ElementPropertyInfoImpl.java:78)
at com.sun.xml.bind.v2.model.impl.ElementPropertyInfoImpl$1.get(ElementPropertyInfoImpl.java:76)
at java.util.AbstractList$Itr.next(AbstractList.java:345)
at com.sun.xml.bind.v2.model.impl.ModelBuilder.getClassInfo(ModelBuilder.java:260)
at com.sun.xml.bind.v2.model.impl.RuntimeModelBuilder.getClassInfo(RuntimeModelBuilder.java:104)
at com.sun.xml.bind.v2.model.impl.RuntimeModelBuilder.getClassInfo(RuntimeModelBuilder.java:85)
at com.sun.xml.bind.v2.model.impl.ModelBuilder.getClassInfo(ModelBuilder.java:214)
at com.sun.xml.bind.v2.model.impl.RuntimeModelBuilder.getClassInfo(RuntimeModelBuilder.java:99)
at com.sun.xml.bind.v2.model.impl.RuntimeModelBuilder.getClassInfo(RuntimeModelBuilder.java:85)
at com.sun.xml.bind.v2.model.impl.ModelBuilder.getTypeInfo(ModelBuilder.java:320)
at com.sun.xml.bind.v2.model.impl.TypeRefImpl.calcRef(TypeRefImpl.java:96)
at com.sun.xml.bind.v2.model.impl.TypeRefImpl.getTarget(TypeRefImpl.java:73)
at com.sun.xml.bind.v2.model.impl.RuntimeTypeRefImpl.getTarget(RuntimeTypeRefImpl.java:62)
at com.sun.xml.bind.v2.model.impl.RuntimeTypeRefImpl.getTarget(RuntimeTypeRefImpl.java:55)
at com.sun.xml.bind.v2.model.impl.ElementPropertyInfoImpl$1.get(ElementPropertyInfoImpl.java:78)
at com.sun.xml.bind.v2.model.impl.ElementPropertyInfoImpl$1.get(ElementPropertyInfoImpl.java:76)
at java.util.AbstractList$Itr.next(AbstractList.java:345)
at com.sun.xml.bind.v2.model.impl.ModelBuilder.getClassInfo(ModelBuilder.java:260)
at com.sun.xml.bind.v2.model.impl.RuntimeModelBuilder.getClassInfo(RuntimeModelBuilder.java:104)
at com.sun.xml.bind.v2.model.impl.RuntimeModelBuilder.getClassInfo(RuntimeModelBuilder.java:85)
at com.sun.xml.bind.v2.model.impl.ModelBuilder.getClassInfo(ModelBuilder.java:214)
at com.sun.xml.bind.v2.model.impl.RuntimeModelBuilder.getClassInfo(RuntimeModelBuilder.java:99)
at com.sun.xml.bind.v2.model.impl.RuntimeModelBuilder.getClassInfo(RuntimeModelBuilder.java:85)
at com.sun.xml.bind.v2.model.impl.ModelBuilder.getTypeInfo(ModelBuilder.java:320)
at com.sun.xml.bind.v2.model.impl.TypeRefImpl.calcRef(TypeRefImpl.java:96)
at com.sun.xml.bind.v2.model.impl.TypeRefImpl.getTarget(TypeRefImpl.java:73)
at com.sun.xml.bind.v2.model.impl.RuntimeTypeRefImpl.getTarget(RuntimeTypeRefImpl.java:62)
at com.sun.xml.bind.v2.model.impl.RuntimeTypeRefImpl.getTarget(RuntimeTypeRefImpl.java:55)
at com.sun.xml.bind.v2.model.impl.ElementPropertyInfoImpl$1.get(ElementPropertyInfoImpl.java:78)
at com.sun.xml.bind.v2.model.impl.ElementPropertyInfoImpl$1.get(ElementPropertyInfoImpl.java:76)
at java.util.AbstractList$Itr.next(AbstractList.java:345)
at com.sun.xml.bind.v2.model.impl.ModelBuilder.getClassInfo(ModelBuilder.java:260)
at com.sun.xml.bind.v2.model.impl.RuntimeModelBuilder.getClassInfo(RuntimeModelBuilder.java:104)
at com.sun.xml.bind.v2.model.impl.RuntimeModelBuilder.getClassInfo(RuntimeModelBuilder.java:85)
at com.sun.xml.bind.v2.model.impl.ModelBuilder.getClassInfo(ModelBuilder.java:214)
at com.sun.xml.bind.v2.model.impl.RuntimeModelBuilder.getClassInfo(RuntimeModelBuilder.java:99)
at com.sun.xml.bind.v2.model.impl.RuntimeModelBuilder.getClassInfo(RuntimeModelBuilder.java:85)
at com.sun.xml.bind.v2.model.impl.ModelBuilder.getTypeInfo(ModelBuilder.java:320)
at com.sun.xml.bind.v2.model.impl.TypeRefImpl.calcRef(TypeRefImpl.java:96)
at com.sun.xml.bind.v2.model.impl.TypeRefImpl.getTarget(TypeRefImpl.java:73)
at com.sun.xml.bind.v2.model.impl.RuntimeTypeRefImpl.getTarget(RuntimeTypeRefImpl.java:62)
at com.sun.xml.bind.v2.model.impl.RuntimeTypeRefImpl.getTarget(RuntimeTypeRefImpl.java:55)
at com.sun.xml.bind.v2.model.impl.ElementPropertyInfoImpl$1.get(ElementPropertyInfoImpl.java:78)
at com.sun.xml.bind.v2.model.impl.ElementPropertyInfoImpl$1.get(ElementPropertyInfoImpl.java:76)
at java.util.AbstractList$Itr.next(AbstractList.java:345)
at com.sun.xml.bind.v2.model.impl.ModelBuilder.getClassInfo(ModelBuilder.java:260)
at com.sun.xml.bind.v2.model.impl.RuntimeModelBuilder.getClassInfo(RuntimeModelBuilder.java:104)
at com.sun.xml.bind.v2.model.impl.RuntimeModelBuilder.getClassInfo(RuntimeModelBuilder.java:85)
at com.sun.xml.bind.v2.model.impl.ModelBuilder.getClassInfo(ModelBuilder.java:214)
at com.sun.xml.bind.v2.model.impl.RuntimeModelBuilder.getClassInfo(RuntimeModelBuilder.java:99)
at com.sun.xml.bind.v2.model.impl.RuntimeModelBuilder.getClassInfo(RuntimeModelBuilder.java:85)
at com.sun.xml.bind.v2.model.impl.ModelBuilder.getTypeInfo(ModelBuilder.java:320)
at com.sun.xml.bind.v2.model.impl.TypeRefImpl.calcRef(TypeRefImpl.java:96)
at com.sun.xml.bind.v2.model.impl.TypeRefImpl.getTarget(TypeRefImpl.java:73)
at com.sun.xml.bind.v2.model.impl.RuntimeTypeRefImpl.getTarget(RuntimeTypeRefImpl.java:62)
at com.sun.xml.bind.v2.model.impl.RuntimeTypeRefImpl.getTarget(RuntimeTypeRefImpl.java:55)
at com.sun.xml.bind.v2.model.impl.ElementPropertyInfoImpl$1.get(ElementPropertyInfoImpl.java:78)
at com.sun.xml.bind.v2.model.impl.ElementPropertyInfoImpl$1.get(ElementPropertyInfoImpl.java:76)
at java.util.AbstractList$Itr.next(AbstractList.java:345)
at com.sun.xml.bind.v2.model.impl.ModelBuilder.getClassInfo(ModelBuilder.java:260)
at com.sun.xml.bind.v2.model.impl.RuntimeModelBuilder.getClassInfo(RuntimeModelBuilder.java:104)
at com.sun.xml.bind.v2.model.impl.RuntimeModelBuilder.getClassInfo(RuntimeModelBuilder.java:85)
at com.sun.xml.bind.v2.model.impl.ModelBuilder.getClassInfo(ModelBuilder.java:214)
at com.sun.xml.bind.v2.model.impl.RuntimeModelBuilder.getClassInfo(RuntimeModelBuilder.java:99)
at com.sun.xml.bind.v2.model.impl.RuntimeModelBuilder.getClassInfo(RuntimeModelBuilder.java:85)
at com.sun.xml.bind.v2.model.impl.ModelBuilder.getTypeInfo(ModelBuilder.java:320)
at com.sun.xml.bind.v2.model.impl.TypeRefImpl.calcRef(TypeRefImpl.java:96)
at com.sun.xml.bind.v2.model.impl.TypeRefImpl.getTarget(TypeRefImpl.java:73)
at com.sun.xml.bind.v2.model.impl.RuntimeTypeRefImpl.getTarget(RuntimeTypeRefImpl.java:62)
at com.sun.xml.bind.v2.model.impl.RuntimeTypeRefImpl.getTarget(RuntimeTypeRefImpl.java:55)
at com.sun.xml.bind.v2.model.impl.ElementPropertyInfoImpl$1.get(ElementPropertyInfoImpl.java:78)
at com.sun.xml.bind.v2.model.impl.ElementPropertyInfoImpl$1.get(ElementPropertyInfoImpl.java:76)
at java.util.AbstractList$Itr.next(AbstractList.java:345)
at com.sun.xml.bind.v2.model.impl.ModelBuilder.getClassInfo(ModelBuilder.java:260)
at com.sun.xml.bind.v2.model.impl.RuntimeModelBuilder.getClassInfo(RuntimeModelBuilder.java:104)
at com.sun.xml.bind.v2.model.impl.RuntimeModelBuilder.getClassInfo(RuntimeModelBuilder.java:85)
at com.sun.xml.bind.v2.model.impl.ModelBuilder.getClassInfo(ModelBuilder.java:214)
at com.sun.xml.bind.v2.model.impl.RuntimeModelBuilder.getClassInfo(RuntimeModelBuilder.java:99)
at com.sun.xml.bind.v2.model.impl.RuntimeModelBuilder.getClassInfo(RuntimeModelBuilder.java:85)
at com.sun.xml.bind.v2.model.impl.ModelBuilder.getTypeInfo(ModelBuilder.java:320)
at com.sun.xml.bind.v2.model.impl.TypeRefImpl.calcRef(TypeRefImpl.java:96)
at com.sun.xml.bind.v2.model.impl.TypeRefImpl.getTarget(TypeRefImpl.java:73)
at com.sun.xml.bind.v2.model.impl.RuntimeTypeRefImpl.getTarget(RuntimeTypeRefImpl.java:62)
at com.sun.xml.bind.v2.model.impl.RuntimeTypeRefImpl.getTarget(RuntimeTypeRefImpl.java:55)
at com.sun.xml.bind.v2.model.impl.ElementPropertyInfoImpl$1.get(ElementPropertyInfoImpl.java:78)
at com.sun.xml.bind.v2.model.impl.ElementPropertyInfoImpl$1.get(ElementPropertyInfoImpl.java:76)
at java.util.AbstractList$Itr.next(AbstractList.java:345)
at com.sun.xml.bind.v2.model.impl.ModelBuilder.getClassInfo(ModelBuilder.java:260)
at com.sun.xml.bind.v2.model.impl.RuntimeModelBuilder.getClassInfo(RuntimeModelBuilder.java:104)
at com.sun.xml.bind.v2.model.impl.RuntimeModelBuilder.getClassInfo(RuntimeModelBuilder.java:85)
at com.sun.xml.bind.v2.model.impl.ModelBuilder.getClassInfo(ModelBuilder.java:214)
at com.sun.xml.bind.v2.model.impl.RuntimeModelBuilder.getClassInfo(RuntimeModelBuilder.java:99)
at com.sun.xml.bind.v2.model.impl.RuntimeModelBuilder.getClassInfo(RuntimeModelBuilder.java:85)
at com.sun.xml.bind.v2.model.impl.ModelBuilder.getTypeInfo(ModelBuilder.java:320)
at com.sun.xml.bind.v2.model.impl.ModelBuilder.getTypeInfo(ModelBuilder.java:335)
at com.sun.xml.bind.v2.runtime.JAXBContextImpl.getTypeInfoSet(JAXBContextImpl.java:465)
at com.sun.xml.bind.v2.runtime.JAXBContextImpl.<init>(JAXBContextImpl.java:303)
at com.sun.xml.bind.v2.runtime.JAXBContextImpl.<init>(JAXBContextImpl.java:142)
at com.sun.xml.bind.v2.runtime.JAXBContextImpl$JAXBContextBuilder.build(JAXBContextImpl.java:1174)
at com.sun.xml.bind.v2.ContextFactory.createContext(ContextFactory.java:162)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:202)
at javax.xml.bind.ContextFinder.find(ContextFinder.java:363)
at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:574)
at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:522)
at net.sf.hibernate.examples.quickstart.hib_main.main(hib_main.java:83) 
```

我不明白出了什么问题。

我尝试使用 Dangling Piyush 生成的代码和类来获取 CoordSystem Name。

代码

```
 File xml_gkuzu = new File("D:/liferay-develop/workspace/cat_test/XML/GKUZU_53ce0a8e-13e1-4e4e-99d9-2f45ae786d33!chz.xml");
    JAXBContext jaxbContext = JAXBContext.newInstance(CoordSystem.class);
SchemaFactory factory = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);
Schema schema = factory.newSchema(new StreamSource(new File("D:/liferay-develop/workspace/cat_test/v2/STD_MP.xsd")));
Unmarshaller jaxbUnmarshaller = jaxbContext.createUnmarshaller();
jaxbUnmarshaller.setSchema(schema);
CoordSystem cs = (CoordSystem)jaxbUnmarshaller.unmarshal(xml_gkuzu);
System.out.println(cs.getName()); 
```

但是遇到一个例外`CoordSystem cs = (CoordSystem)jaxbUnmarshaller.unmarshal(xml_gkuzu);`

```
Exception in thread "main" javax.xml.bind.UnmarshalException: unexpected element (uri:"", local:"STD_MP"). Expected elements are <{}Coord_System> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T11:39:01.423

如果您从 XML 模式生成您的 JAXB 模型，那么您应该`JAXBContext`在包名称而不是类上生成。

你应该做：

```
JAXBContext.newInstance("com.example.foo"); 
```

并不是：

```
JAXBContext.newInstance(com.example.foo.Bar.class); 
```

**例子**

*   [http://blog.bdoughan.com/2010/09/processing-atom-feeds-with-jaxb.html](http://blog.bdoughan.com/2010/09/processing-atom-feeds-with-jaxb.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T11:07:49.950

我想建议做

```
 jaxbUnmarshaller.setSchema(schemaLocation); 
```

通过这样做，您可以检查您的 xml 是否针对 xsd 进行验证，您还可以通过读取 SAXException 或 JAXBException 的堆栈跟踪来找出 xml 中的问题所在。

更新：

这是生成的java类的链接

[生成的 Java 类](http://depositfiles.com/files/i507r5nfp)

以下是针对 xsd 进行验证的 xml 解组代码。

```
import java.io.File;
import javax.xml.XMLConstants;
import javax.xml.bind.JAXBContext;
import javax.xml.bind.JAXBException;
import javax.xml.bind.Unmarshaller;
import javax.xml.transform.stream.StreamSource;
import javax.xml.validation.Schema;
import javax.xml.validation.SchemaFactory;

import org.xml.sax.SAXException;

import com.piyush.STDMP;

public class Test {

    /**
     * @param args
     * @throws JAXBException 
     * @throws SAXException 
     */
    public static void main(String[] args) throws JAXBException, SAXException {
        JAXBContext jaxbContext = JAXBContext.newInstance(STDMP.class);
        SchemaFactory factory = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);
        Schema schema = factory.newSchema(new StreamSource(new File("C:/Users/CDAC/workspace/Testing/src/STD_MP.xsd")));
        Unmarshaller jaxbUnmarshaller = jaxbContext.createUnmarshaller();
        jaxbUnmarshaller.setSchema(schema);
        STDMP ts = (STDMP)jaxbUnmarshaller.unmarshal(new File("E:/Testing.xml"));

        System.out.println(ts.getCoordSystems());
        System.out.println(ts.getEDocument());

    }

     } 
```

请根据您的机器更改 xsd 和 xml 位置。

# java - 如何使用 JSTL 存储字符

> ID：12053385
> 
> 赞同：3
> 
> 时间：2012-08-21T10:57:05.223
> 
> 标签：java, jstl

我想使用 JSTL 将字符值存储在变量中

我这样做的代码是：

```
<c:set var="letter" value='${param.colorLetter.toLowerCase().charAt(0)}' ></c:set> 
```

接下来我需要尝试检查字符是否为'v'：

```
 <c:choose>
            <c:when test="${letter}=='v'">
                <lable>Color Name: </lable>Violet<br/>
            </c:when>
        </c:choose> 
```

目前我觉得它没有将其存储为字符变量，因此测试失败。（没有错误/异常）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T11:15:26.430

```
<c:set var="letter" value="${param.colorLetter.toLowerCase().charAt(0).toString()}" />

<c:choose>
    <c:when test="${letter eq 'v'}">
        <lable>Color Name: </lable>Violet<br/>
    </c:when>
</c:choose> 
```

你必须在你的to cast from to之后将整个测试放在`${}`and之间。`toString()``charAt(0)``Character``String`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T11:58:39.733

以防万一这对其他人有用，我可以通过使用“sp00m”建议来解决这个问题。

```
<c:set var="letter" value='${param.colorLetter.toLowerCase().charAt(0).toString()}' ></c:set> 
```

表达式语言将其存储为字符，然后评估它必须涉及比较 ascii 值。上述方法将字符转换为字符串，然后将其存储在“字母”变量中。那么这只是一个简单的字符串比较的问题：

```
<c:when test='${letter=="v"}'> 
```

# database - 我应该散列用户 facebook / twitter / 其他 id 吗？

> ID：12053387
> 
> 赞同：1
> 
> 时间：2012-08-21T10:57:13.690
> 
> 标签：database, facebook, twitter, login, hash

如果我正在运行一个使用社交登录的网站，那么在我的数据库中存储时对 facebook / twitter / google / linkedin 用户 ID 进行散列是必要的还是好的？

编辑：是的，我确实无法在存储时使用它，但请记住，当用户登录时，我将拥有实际的 ID，一旦我确认哈希匹配，就会存储在临时会话中。想知道存储时是否需要对其进行哈希处理，因为在许多情况下，如果数据库遭到破坏，它将泄露有关用户的信息...

# javascript - Mootools：拒绝设置不安全的标头“连接”

> ID：12053389
> 
> 赞同：1
> 
> 时间：2012-08-21T10:57:17.453
> 
> 标签：javascript, mootools

我正在尝试使用 Mootools 发送一个简单的 ajax 发布请求，但我只收到标题中的错误消息，而且它似乎没有正确发送数据（请求被取消）。

这是html：

```
<form id="form_5" name="form_5" action="someajaxfile.php" onsubmit="jsfunction(this,5);return false;" method="post">....</form> 
```

这是提交时调用的javascript函数：

```
function jsfunction(form,eventId) {
        var container = $('form_contents' + eventId);

        form.send({
            update: container,
            evalScripts: true,
            onComplete: function() {
                container.removeClass('ajax-loading');
            }
        });

    } 
```

我试图向`headers: {'X-Request': 'JSON'},`发送函数添加类似的东西，但似乎没有任何东西可以改变错误。一件奇怪的事情是，在网络选项卡下的 chrome 中，我可以看到两个请求：

```
someajax.php
/somefolder
POST
302
Found
text/html
mootools.js:247
Script
354B
0B
2ms
2ms
2ms0

someajax.php
/somefolder
GET
(canceled)
Pending
http://localhost:8888/somefolder/someajax.php
Redirect
13B
0B
0ms
0.0 days 
```

问题是：为什么我不能发送数据，会发生什么，为什么以及我的问题有什么好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T12:13:42.747

> 问题是：为什么我不能发送数据，会发生什么，为什么以及我的问题有什么好的解决方案？

您的问题是 Chrome+Local 和*--allow-file-access-from-files*限制的组合。

尝试：

*   使用命令 --allow-file-access-from-files 在“安全”环境中在 chrome (dev) 中运行这些文件
*   在另一个浏览器中运行您的文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T12:27:52.533

嗯在尝试了一些事情之后，我认为直接从**表单元素**发出“AJAX”请求是不可能的（但如果我错了，我想看看它是如何工作的例子 n_n）

通常我使用 Request 的一个实例（或者它的任何扩展：Request.JSON、Request.JSONP、Form.Request）。

我会这样做：

```
function myfunction(form){
    new Request({
      url:form.action,
      data:form,
      onSuccess:function(result){
          console.log(result);
      }
    }).send();
    return false;
}; 
```

这里有一个工作示例：http: [//jsfiddle.net/pCUKe/](http://jsfiddle.net/pCUKe/)

# php - 在未作为用户身份验证的情况下提取 Google Analytics（分析）数据

> ID：12053392
> 
> 赞同：2
> 
> 时间：2012-08-21T10:57:26.550
> 
> 标签：php, google-analytics, google-api

我想从谷歌分析中提取过去一个月每天的访问数据，并将其显示在我正在构建的 CMS 的仪表板上。

问题是您似乎必须使用 Oauth2。我不想以用户身份进行身份验证，因为我希望所有登录用户都可以使用信息。完成我所追求的最佳方法是什么？

我只需要读取权限，只需要简单的统计信息。

我可能还运行了此 CMS 的多个版本，是否需要在 Google API 控制台中注册每个版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T11:47:02.443

> 问题是您似乎必须使用 Oauth2。我不想以用户身份进行身份验证，因为我希望所有登录用户都可以使用信息。完成我所追求的最佳方法是什么？

OAuth2 方法是强制性的。如果您不使用身份验证，则无法获取数据，因为分析数据是私有的。

您可以编写一个 PHP 脚本，使用[Google PHP API 客户端](http://code.google.com/p/google-api-php-client/)从 Google Analytics 获取数据。PHP 脚本将为您进行身份验证，它将获取您需要的所有分析数据（我建议您查看[Core Reporting APIs](https://developers.google.com/analytics/devguides/reporting/core/v3/)）。然后，结果可以显示给登录用户或公众。数据共享在您的控制之下。

> 我可能还运行了此 CMS 的多个版本，是否需要在 Google API 控制台中注册每个版本？

不

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T10:17:31.420

尝试在 google 或此站点中搜索 google api 服务帐户。它现在也可用于分析服务。请记住使用最新版本的 api 客户端库。

# objective-c - 导航栏标题中的字体截断

> ID：12053393
> 
> 赞同：1
> 
> 时间：2012-08-21T10:57:30.693
> 
> 标签：objective-c, ios, ios5

我正在开发一个使用自定义字体的应用程序，但我遇到了一些不寻常的剪辑。我认为问题出在字体本身，但我无法解决这个问题，所以我需要想出一个解决方案来在应用程序中解决它。

我正在使用导航栏标题的字体，这是发生了什么：

![导航栏坏了](../Images/92e7d4615511e754202b102dec07e0e7.png)

您可以看到字体距离基线太高，这就是发生剪裁的原因。

我设法找到了一个几乎合适的解决方案，用 UILabel 替换标准的导航栏标题，将其插入到导航栏的`titleView`.

```
 UILabel *navTitle = [[UILabel alloc] init];
    navTitle.frame = CGRectMake(0,0,190,40);
    navTitle.text = @"My Title Text";
    navTitle.font = [UIFont fontWithName:AGENDA_TYPE_FONT size:17];
    navTitle.backgroundColor = [UIColor clearColor];
    navTitle.textColor = [UIColor colorWithHue:0.356 saturation:0.457 brightness:0.288 alpha:1.00];
    navTitle.shadowColor = [UIColor colorWithRed:1 green:1 blue:1 alpha:0.50];
    navTitle.shadowOffset = CGSizeMake(0, 1);
    navTitle.textAlignment = UITextAlignmentCenter;

    // Set label as titleView
    self.navigationItem.titleView = navTitle;

    // Shift the title down a bit...
    [self.navigationController.navigationBar setTitleVerticalPositionAdjustment:9 forBarMetrics:UIBarMetricsDefault]; 
```

之所以可行，是因为我将标签设置为应有的高度的两倍，从而使文本完全进入视野。

![部分解决方案](../Images/b40adc34657e15738706a7f0546e23d3.png)

不过，问题在于它现在位置太低了（在导航栏之外。如下所示......

![越界](../Images/9dc286bcc994026df619b41ad0fbf184.png)

我想不出解决这个问题的方法，甚至想不出另一种解决方法。我尝试过覆盖框架原点高度，但这无济于事。

任何人都可以提供任何帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T12:45:25.940

创建一个与标签宽度相同但不高于 UINavigationBar（46 像素？）的容器 UIView - 可以说它的高度为 36 点。将此容器视图上的“clipsToBounds”设置为“是”。现在将您的标签添加到此容器视图，并使容器视图成为 titleView。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T11:03:41.647

你是故事板吗？您也许可以调整导航标题的基线对齐方式。

除此之外，您是否尝试安装字体并通过情节提要选择它？

如果这不起作用，我认为您的字体可能有问题 - 您可以尝试使用 div 设置一个快速 html 页面，看看它是否有字体问题。

此外，您可能可以在这里使用一些东西：[如何以编程方式将 UIButton 调整为文本大小并保持漂亮的填充？](https://stackoverflow.com/questions/7259773/how-to-programmatically-resize-an-uibutton-to-the-text-size-and-keep-a-nice-padd)

# java - 在 Web 应用程序中放置属性文件

> ID：12053395
> 
> 赞同：1
> 
> 时间：2012-08-21T10:57:49.337
> 
> 标签：java, jboss, struts2, configuration-files

在使用 struts 2 并在 Jboss 服务器中运行的 java Web 应用程序中，我被要求将属性文件放在 EAR 之外和配置文件中。

这是什么意思 ？如果它在 EAR 之外，服务器将如何识别配置文件？配置文件应该位于服务器的某个地方吗？

我想使用配置文件，就好像它在 Web 应用程序类路径中一样。

# ruby-on-rails-2 - 复杂的查找条件包括“包含”

> ID：12053398
> 
> 赞同：0
> 
> 时间：2012-08-21T10:58:15.327
> 
> 标签：ruby-on-rails-2

我正在使用 Rails 2.3.8 Ruby 1.8.7 和 PostgreSQL 进行开发。我想按关系搜索记录。

**用户公会大师**

```
class UserGuildMaster < ActiveRecord::Base
    has_one :leader, :foreign_key => 'guild_id', :class_name => 'UserGuildLog', :conditions => {:leader_flag => 1, :status => 1}
    has_many :user_guild_logs, :foreign_key => 'guild_id', :class_name => 'UserGuildLog'
end 
```

**用户公会日志**

```
class UserGuildLog < ActiveRecord::Base
    belongs_to :guild, :class_name => "UserGuildMaster"
    belongs_to :user_master
    belongs_to :user_character, :class_name => "UserCharacter"
end 
```

**用户角色**

```
class UserCharacter < ActiveRecord::Base
end 
```

我想搜索**UserGuildMaster**哪个**leader.user_character.logined_at 在 5 天之前**并且**少于 10 个 user_guild_logs**。

我的查找条件如下，但它引发错误**'PGError：错误：模式“领导者”'不存在。**

```
 @user_guild_masters = UserGuildMaster.find(:all, :include => [{:leader => :user_character}, :user_guild_logs], 
    :conditions => ['leader.user_character.logined_at < ? AND user_guild_logs.size < ?', 5.days.ago, 10]
  ) 
```

此 Rails 项目现已投入使用，无法添加或更改列。我不知道找到这些相关记录。有任何想法吗？

# python - 相当于 wxPython 的 PyQt4 processEvents

> ID：12053402
> 
> 赞同：0
> 
> 时间：2012-08-21T10:58:24.997
> 
> 标签：python, wxpython, pyqt, opencascade

我正在研究 PythonOCC，它是一个用于快速制作复杂 CAD 应用程序原型的出色框架（它太棒了！）。PythonOCC 带有一个查看器，可以在 wxPython 和 PyQt4 中工作（实际上也带有 x11 和一个 webgl 查看器......）。

[在PythonOCC 附带](https://github.com/tpaviot/pythonocc/blob/master/src/addons/Display/qtDisplay.py)的 PyQt4 版本的查看器中非常有用的一点是，虽然调试是在调用 pdb.set_trace() 时，由于***QtGui.QApplication.processEvents()***的优点，事件仍会被处理。当您处理几何图形并且仍然能够在查看器中导航时，这会带来一个不同的世界。我想知道的是如何在 wxPython 中模仿这种行为？这对我来说将是一个不同的世界。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:02:05.397

根据 wxWidgets 的 wiki，您可以使用 App 对象的 Yield 命令刷新事件队列：[http](http://wiki.wxwidgets.org/Custom_Events) ://wiki.wxwidgets.org/Custom_Events 。您可能可以使用更新或刷新来做到这一点，但我不太确定。这里还有一些事件文档：

*   [http://wiki.wxpython.org/EventPropagation](http://wiki.wxpython.org/EventPropagation)

您可能还想交叉发布到 wxPython 邮件列表。wxPython 的创建者在那里闲逛，我相信他肯定会知道。

# wix - 复制文件太晚了

> ID：12053404
> 
> 赞同：3
> 
> 时间：2012-08-21T10:58:29.337
> 
> 标签：wix, installation, windows-installer

单击我的 MSI 后，我需要立即复制文件。我现在正在使用 CopyFiles 功能，但它做得不够快。我需要自己的自定义操作还是有办法在显示任何 UI 之前移动它？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T23:33:28.827

使用 reg 文件和 ini 文件完成的任何操作通常都可以嵌入并在 MSI 中完成。这是非常优越的，因为如果 MSI 的安装被中止，MSI 文件将具有内置的回滚支持。

Installshield 提供了它自己的 setup.exe 启动器文件，它实际上根本不是 MSI 文件，正是这个文件将这些临时文件放置在系统上。这是 MSI 时代之前的遗留功能，它基本上允许糟糕的 MSI 设计高于其他任何东西。

正如 Chris 指出的那样，MSI 文件在其安装序列启动之前不应执行文件操作和系统更改（MSI 内 InstallExecuteSequence 中的 InstallInitialize 和 InstallFinalize 之间的操作）。

我建议将 ini 文件信息放在 IniFile 表中，将注册表信息放在 Registry 表中。您是否在安装过程中运行 EXE 文件？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T11:47:21.400

我认为需求的定义和设计都很差。这是你应该做的一个例子：

我有一个客户直接（零售）和间接（通过增值经销商）销售产品。他的应用程序是可扩展的，因为他或他的 VAR 或他们的最终用户客户要求能够扩展/修改/覆盖具有以下属性的 MSI：

1) 升级代码

2) 产品名称

3) 许可协议

4) 图标

5) 配置文件

6) 数字证书

我的客户用 C# 编写了一个向导 UI，指导用户完成所有这些操作，我编写了一个使用 WiX DTF 库 (Microsoft.Deployment.WindowsInstaller) 与 MSI 交互的库。结果是一个实用程序，它完全封装了将 MSI 转换为变体的过程。

这也是赛门铁克防病毒软件的工作方式。

通过一些开发时间，您可以引导您的用户使用更新的 ProductName 和 Registry 表条目构建 MSI。生成的 MSI 不需要任何自定义操作，并且仍将遵循所有适用的 Windows Installer 最佳实践。

# php - 提交没有变量的表单的最佳方法是什么

> ID：12053405
> 
> 赞同：-1
> 
> 时间：2012-08-21T10:58:34.407
> 
> 标签：php, jquery, json

大家好，我尝试使用 jquery ( json ) 和 php 创建一个小型应用程序，此时我想通过替换来编写最好的代码

```
$(document).ready(function () {
    $('form').submit(function () {
        var action = $(this).attr('action');
        var name = $('.name').val();
        var email = $('.email').val();
        var city = $('.city').val();
        $.post(action, {
            name: name,
            email: email,
            city: city
        }, function (data) {
            alert(data.error);
        }, 'json');
        return false;
    });
}); 
```

那么我如何通过我谈论的另一种方法（姓名，电子邮件，城市）发送所有这些变量

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T14:45:04.983

看来我明白为什么你不能得到发布的变量。因为，您没有为输入字段**指定属性“名称” 。**使用**name**属性而不是**class**将变量名称传递给您的 php 脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T11:29:52.743

正如@D.Muller 所说，你可以使用这样的东西：

```
var serializedData = $('form').serialize();

$.post(
    'getSerializedData.php',
    {data:serializedData},
    function(data){
    }
) 
```

然后在你的php脚本中你应该像这样使用反序列化：

```
<?php

$serializedData = $_POST['data'];
$unserializedData = array();

parse_str($unserializedData,$serializedData);

print_r($unserializedData);

?> 
```

* * *

但是，我不确定这是否是您正在寻找的。无论如何，
希望我能有所帮助！
nLamprok

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T11:01:34.350

我想你需要这样的东西

```
$(function(){
   $('form').submit(function(e){
       e.preventDefault();
       $.post(
           $(this).attr('action'),
           $(this).serialize(),
           function(data){
               alert(data.error); 
           },
           'json'
       );
   }); 
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T11:02:02.377

您可以使用 $.serialize 序列化表单。

```
$.post('url', $(this).serialize(), ... ); 
```

（注意：`this`仅适用于您的示例的表单范围）

# java - 在 jar 中运行类时从 jar 中获取所有 .class

> ID：12053406
> 
> 赞同：2
> 
> 时间：2012-08-21T10:58:34.390
> 
> 标签：java, class, jar, annotations

所以，问题听起来像这样：

我需要在我的项目中获取所有具有特定注释的类。我已经设法在没有任何外部库的情况下做到了这一点（我确实在 src 文件夹中获取了所有 .class 文件，并检查该类是否有注释）。当我在本地运行它时它工作正常（作为java应用程序运行）。当我将项目导出为 .jar 并尝试运行同一个类时，它当然不起作用，因为我的解析器找不到任何类。基本上，现在我试图在运行同一个 jar 时获取 jar 文件中的所有 .class 文件。有没有什么方法可以在不添加其他库（如反射）的情况下做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T13:04:23.560

如果您真的觉得需要重新发明轮子，那么 3rd 方库仍然可以帮助您，因为它们中的大多数都是开源的。特别是[这](http://www.docjar.com/html/api/org/springframework/context/annotation/ClassPathScanningCandidateComponentProvider.java.html)是 Spring 的类路径扫描器的实现，它利用[这个](http://grepcode.com/file/repo1.maven.org/maven2/org.springframework/spring-core/2.5.4/org/springframework/core/io/support/PathMatchingResourcePatternResolver.java#PathMatchingResourcePatternResolver.findAllClassPathResources%28java.lang.String%29)类来实际查找资源。

如果您真的想在实现中没有任何差异，那么您可以按照 martijno 的建议采取一种方法，首先提取 jar。但是，如果 jar 不在您的类路径中，那么您将需要[URLClassLoader](https://stackoverflow.com/questions/4991527/modify-classpath-at-runtime-controlling-class-loading-order)之类的东西来从 jar 加载类。

另一种方法是更改​​您当前的实现以扫描类路径。这涉及使用[ClassLoader.getResources](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/ClassLoader.html)方法来查找给定包中的所有类和子包。然后，无论您使用的是文件还是 jar，您所要做的就是获取一个包含您想要的类的类加载器（例如 URLClassLoader）（或者如果它们在类路径上，则使用系统类加载器）。

# ruby-on-rails - attr_accessible 仅在 Rails 3.2 及更高版本中创建

> ID：12053409
> 
> 赞同：0
> 
> 时间：2012-08-21T10:58:43.610
> 
> 标签：ruby-on-rails, ruby-on-rails-3

有没有办法在 Rails 模型中说该属性仅在创建新记录时才可访问，但在更新时不可访问？

就像是：

```
class DesiredModel < ActiveRecord::Base
   attr_accessible :type, :only => [:create]   # this is just example
   attr_accessible :type if :new_record?       # this is just example
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T11:15:04.247

`attr_accessible`不能以这种方式参数化。但是，您可以添加类似条件的角色`:as => :create`。这样，您可以通过向其中添加角色来批量允许在此字段上进行批量分配。

```
attr_accessible :type, :as => :create

...

model.assign_attributes(params[:model], :create) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T11:15:18.630

您可以使用 attr_readonly。它允许您设置属性值，但在更新记录时会忽略该属性。如果你在更新后对模型调用 reload，你会看到属性还是一样的。

# java - Java套接字读取输入流而不阻塞

> ID：12053423
> 
> 赞同：1
> 
> 时间：2012-08-21T11:00:14.507
> 
> 标签：java, android, sockets, inputstream

我在实现 Android 和 IOS 之间的套接字连接时遇到了一点问题。当我使用我的应用程序连接两个运行 Android 的设备时，一切正常。但是当我必须从 Iphone 应用程序接收一些数据时，我的 readStream 函数被阻塞，我可以在另一部分关闭套接字后接收所有数据，这样我就无法返回任何响应。这是我用来收听的内容：

```
try {
    serverSocket = new ServerSocket(5000);
    Log.d("","CREATE SERVER SOCKET");
} catch (IOException e) {
     e.printStackTrace();
}

while(state){
    try {
        if(serverSocket!=null){
            client = serverSocket.accept();
            client.setKeepAlive(true);
            client.setSoTimeout(10000);

            // LOGS
            Log.w("READ","is connected : "+client.isConnected());
            Log.w("READ","port : "+client.getPort());
            Log.w("READ","ipadress : "+client.getInetAddress().toString());

            InputStream is = client.getInputStream();

            Log.w("READ","is Size : "+is.available());

            byte[] bytes = DNSUtils.readBytes(is);
            Log.v("","-------------------------");
            for(int i=0;i<bytes.length;i++){
                Log.w("READ","bytes["+i+"] : "+bytes[i]);
            }
            Log.v("","-------------------------");

            try {
                Log.w("READ","packetType : "+bytes[4]);

                if(bytes!=null)
                    DNSUtils.getPacketType(bytes[4], bytes, client);

            } catch(Exception e){
                e.printStackTrace();
            }
        }
    } catch (IOException e) {
        e.printStackTrace();
        Log.v("","IOException");
        ResponseERR pack = new ResponseERR();
        ResponseERR.errorMsg = "Socket TimeOut exception!";
        byte[] packet = pack.createNewPacket();

        try {
            if(client!=null){
                OutputStream out = client.getOutputStream();
                out.write(packet);
                out.flush();
                client.shutdownOutput();
                client.close();
                Log.e("READDATAFROMSOCKET","ResponseERR Send.");
            }
        } catch (Exception e1) {
            e1.printStackTrace();
        }
    }
} 
```

这是我用来转换为的`InputStream`函数`Byte Array`：

```
public static byte[] readBytes(InputStream inputStream) throws IOException {
    // this dynamically extends to take the bytes you read
    ByteArrayOutputStream byteBuffer = new ByteArrayOutputStream();

    // this is storage overwritten on each iteration with bytes
    int bufferSize = 1024;
    byte[] buffer = new byte[bufferSize];

    // we need to know how may bytes were read to write them to the byteBuffer
    int len = 0;
    while ((len = inputStream.read(buffer)) != -1) {
        byteBuffer.write(buffer, 0, len);
    }

    // and then we can return your byte array.
    return byteBuffer.toByteArray();
} 
```

Iphone / Android 应用程序的工作方式如下：

*   首先它创建 Socket 并将数据发送到其他设备并关闭 OutputStream。
*   第二部分是解析字节数组，然后使用相同的套接字返回响应。

任何想法如何更改我的功能，以便我可以在不阻塞的情况下读取输入流？

## 编辑：

> 所以问题出在IOS端，似乎Apple API需要关闭创建的套接字的两个流：读/写所以可以发送字节数组，这看起来很愚蠢，因为这样iphone应用程序无法接收并解析我的回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-19T22:27:05.603

与您编辑中的评论相反，这是您的错，而不是 Apple 的。你需要重新设计你的 API。您的`readBytes()`方法读取流直到结束，这仅在对等方关闭连接时发生。如果您只想读取*一些*字节，`read(byte[])`已经这样做了，并告诉您有多少，而不需要流结束。我只想把这个方法扔掉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T11:04:45.407

凭借 RIM OS 的编程经验，我认为所有这些 IO 操作都应该在不同的线程中执行。将要求主 UI 线程使用 invokeLater() 类型的方法调用另一个应用程序线程，您可以在其中检查异步操作是否完成并采取适当的措施。这样，您读取输入流的代码必须在单独的线程中运行。

# python - 如何以特定方式组合两个不同列表的两个元素

> ID：12053424
> 
> 赞同：0
> 
> 时间：2012-08-21T11:00:16.657
> 
> 标签：python

假设我有一个清单

```
list1 = [[(0, 1), (1, 1)], [(2, 3), (1, 2)], [(4, 5), (1, 3)]]
list2 = [[(1, 2)], [(3, 4)], [(5, 6)]] 
```

现在我需要以某种方式组合每个列表的特定元素，使得在 list1 中有 (0, 1) 作为第一个子列表的第一个元素，而 list2 有 (1, 2) 作为第一个元素，所以我们将它们组合到获取一个元素 (0, 2)

同样，list1 的第二个子列表的第一个元素是 (2, 3)，而 list2 的第二个元素是 (3, 4) 所以我们将它们组合起来得到 (2, 4)

结果输出列表将是：

```
result = [[(0, 2)], [(2, 4)], [(4, 6)]] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T11:04:43.913

使用`zip`：

```
[(l1[0][0], l2[0][1]) for l1, l2 in zip(list1, list2)] 
```

# install4j - install4j：编译失败。原因：java.io.IOException: Negative seek offset

> ID：12053428
> 
> 赞同：1
> 
> 时间：2012-08-21T11:00:32.160
> 
> 标签：install4j

我有一个 install4j 项目，它在 Windows 上编译和构建非常好。但是，当我在 linux 上尝试此操作时，我收到标题中所述的错误。我已经打开了详细模式，但我没有收到比这更有帮助的东西。由于代码被混淆了，我什至无法猜测可能出了什么问题。

是否可以添加其他类型的日志记录以获取有关编译过程中可能出现的问题的更多信息？

```
 [exec]   Compiling launchers:
 [exec] com.A.B.E: java.io.IOException: Negative seek offset
 [exec]     at com.A.B.D.R(ejt:2613)
 [exec]     at com.install4j.B.E.F.C(ejt:1892)
 [exec]     at com.install4j.B.E.B.b(ejt:3208)
 [exec]     at com.install4j.B.F.i(ejt:1193)
 [exec]     at com.install4j.B.F.J(ejt:2499)
 [exec]     at com.install4j.B.A.m(ejt:3411)
 [exec]     at com.install4j.B.B.?(ejt:311)
 [exec]     at com.install4j.B.B.?(ejt:1515)
 [exec]     at com.install4j.B.B.H(ejt:2287)
 [exec]     at com.install4j.Install4JApplication.?(ejt:436)
 [exec]     at com.A.M.?(ejt:2208)
 [exec]     at com.install4j.Install4JApplication.main(ejt:1879)
 [exec]     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
 [exec]     at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
 [exec]     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
 [exec]     at java.lang.reflect.Method.invoke(Method.java:601)
 [exec]     at com.exe4j.runtime.LauncherEngine.launch(Unknown Source)
 [exec]     at com.install4j.runtime.launcher.Launcher.main(Unknown Source)
 [exec] Caused by: java.io.IOException: Negative seek offset
 [exec]     at java.io.RandomAccessFile.seek(Native Method)
 [exec]     at com.A.B.A.H.A(ejt:1114)
 [exec]     at com.A.B.A.H.S(ejt:179)
 [exec]     at com.A.B.A.H.K(ejt:2639)
 [exec]     at com.A.B.A.H.<init>(ejt:2868)
 [exec]     at com.A.B.D.e(ejt:3063)
 [exec]     at com.A.B.D.R(ejt:3485)
 [exec]     ... 17 more
 [exec] install4j: compilation failed. Reason: java.io.IOException: Negative seek offset 
```

# ruby - 厨师的红宝石脚本

> ID：12053431
> 
> 赞同：0
> 
> 时间：2012-08-21T11:00:46.497
> 
> 标签：ruby, chef-infra

嘿，伙计们，我对为厨师独奏编写红宝石食谱感到非常困惑。

```
package "python-setuptools"

execute "install_pip" do
    command "easy_install pip"
    user "root"
end

# install requirements

execute "install_requirements" do
    cwd "/home/vagrant/"
    user "root"
    command "pip install -r /home/vagrant/cheftutorial/src/requirements.txt"
end 
```

当我将此代码放入 default.rb 时，它运行时没有错误（我使用 chef-solo 命令运行它），但是当我使用`ruby default.rb`为什么运行它时它给出错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T11:09:34.930

您在配方中使用的所有命令（此处称为资源）都由 Chef 本身提供。它们不是 Ruby 语言的一部分。因此，您的食谱只能在 Chef 环境中运行。

虽然您可能可以为手动准备一个类似于 Chef 为食谱提供的环境，但您应该查看[Shef](http://wiki.opscode.com/display/chef/Shef)，它提供了一个手动开发和测试食谱的环境。

# php - 递归搜索并在数组中删除？

> ID：12053433
> 
> 赞同：4
> 
> 时间：2012-08-21T11:00:54.687
> 
> 标签：php, arrays, search, recursion, unset

我正在使用一个多维数组，我希望能够删除与 id 匹配的数组（和所有子数组）。

我试过的功能是：

```
function removeKey($key, $array, $childKey = 'children'){
    if(isset($array[$key])){
        unset($array[$key]);
        return $array;
    }

    foreach($array as &$item)
        if(isset($item[$childKey]))
            $item = removeKey($key, $item[$childKey], $childKey);

    return $array;
} 
```

我的示例数组是：

```
Array
(
    [5] => Array
        (
            [id] => 5
            [parent_id] => 
            [menu_title] => Drinks
            [page_title] => Drinks
            [status] => 1
            [products] => 0
        )

    [1] => Array
        (
            [id] => 1
            [parent_id] => 
            [menu_title] => Electronics
            [page_title] => Electronics
            [status] => 1
            [products] => 0
            [children] => Array
                (
                    [2] => Array
                        (
                            [id] => 2
                            [parent_id] => 1
                            [menu_title] => Computers
                            [page_title] => Computers
                            [status] => 1
                            [products] => 0
                            [children] => Array
                                (
                                    [4] => Array
                                        (
                                            [id] => 4
                                            [parent_id] => 2
                                            [menu_title] => Apple
                                            [page_title] => Apple - Imacs and Macbooks
                                            [status] => 1
                                            [products] => 0
                                        )

                                )

                        )

                    [3] => Array
                        (
                            [id] => 3
                            [parent_id] => 1
                            [menu_title] => Mobile Phones
                            [page_title] => Mobile Phones
                            [status] => 1
                            [products] => 0
                        )

                )

        )

) 
```

我正在寻找的结果（用 调用函数`(2, $array, 'children')`）是：

```
Array
(
    [5] => Array
        (
            [id] => 5
            [parent_id] => 
            [menu_title] => Drinks
            [page_title] => Drinks
            [status] => 1
            [products] => 0
        )

    [1] => Array
        (
            [id] => 1
            [parent_id] => 
            [menu_title] => Electronics
            [page_title] => Electronics
            [status] => 1
            [products] => 0
            [children] => Array
                (

                    [3] => Array
                        (
                            [id] => 3
                            [parent_id] => 1
                            [menu_title] => Mobile Phones
                            [page_title] => Mobile Phones
                            [status] => 1
                            [products] => 0
                        )

                )

        )

) 
```

但我得到的结果是

```
Array
(
    [5] => Array
        (
            [id] => 5
            [parent_id] => 
            [menu_title] => Drinks
            [page_title] => Drinks
            [status] => 1
            [products] => 0
        )

    [1] => Array
        (
            [3] => Array
                (
                    [id] => 3
                    [parent_id] => 1
                    [menu_title] => Mobile Phones
                    [page_title] => Mobile Phones
                    [status] => 1
                    [products] => 0
                )

        )

) 
```

我不知道这里发生了什么！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T11:06:39.457

您可以通过仅使用参考来简化事情。

```
function removeKey($key, &$array, $childKey = 'children'){
    if(isset($array[$key])){
        unset($array[$key]);
        return;
    }

    foreach($array as &$item)
        if(isset($item[$childKey]))
            removeKey($key, $item[$childKey], $childKey);
} 
```

例子：

```
$arr = array(...);
removeKey('key', $arr, $chilKey);
// Just continue using $arr 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-19T21:07:06.180

多维数组呢？我为此解决方案研究了几个小时，但没有找到最佳解决方案。所以，我自己写的

```
function allow_keys($arr, $keys)
    {
        $saved = [];

        foreach ($keys as $key => $value) {
            if (is_int($key) || is_int($value)) {
                $keysKey = $value;
            } else {
                $keysKey = $key;
            }
            if (isset($arr[$keysKey])) {

                $saved[$keysKey] = $arr[$keysKey];
                if (is_array($value)) {

                    $saved[$keysKey] = allow_keys($saved[$keysKey], $keys[$keysKey]);
                }
            }
        }
        return $saved;
    } 
```

用途：例子

```
$array = [
        'key1' => 'kw',
        'loaa'=> ['looo'],
        'k'    => [
            'prope' => [
                'prop'  => ['proo', 'prot', 'loolooo', 'de'],
                'prop2' => ['hun' => 'lu'],
            ],
            'prop1' => [

            ],
        ],
    ]; 
```

调用：示例

```
allow_keys($array, ['key1', 'k' => ['prope' => ['prop' => [0, 1], 'prop2']]]) 
```

输出：

```
Array ( [key1] => kw [k] => Array ( [prope] => Array ( [prop] => Array ( [0] => proo [1] => prot ) [prop2] => Array ( [hun] => lu ) ) ) ) 
```

所以你从多维数组中只得到需要的键。它不仅限于“多维”，您可以通过传递一个数组来使用它

```
['key1', 'loaa'] 
```

你得到的输出：

```
Array ( [key1] => kw [loaa] => Array ( [0] => looo ) ) 
```

希望有人帮助这个，因为我搜索了很多，但一无所获。干杯！

# sql - 您可以在 SQL 更新语句中对列名和值进行分组吗？

> ID：12053437
> 
> 赞同：0
> 
> 时间：2012-08-21T11:01:14.467
> 
> 标签：sql, oracle

非常简单的问题，是否可以编写这样的 Oracle 更新语句，将列名和值组合在一起？

```
UPDATE table_name SET (column1, column2, column3) = (value1, value2, value3) 
```

我问的原因是因为我正在编写一个脚本来迁移大量数据，对于插入语句，我有一个包含所有列名的字符串和一个包含所有值的字符串。我需要为相同的数据编写一个更新语句，并且想知道是否有另一种选择，而不是必须以不同的格式再次将其全部写出来！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T11:08:21.590

不是直接像你写的那样，但你可以这样做：

```
UPDATE table_name 
   SET (column1, column2, column3) = (select 1 as value1, 'foo' as value2, 'bar' as value3 from dual); 
```

因此，仅在对“值”使用子选择时才支持多列更新。

您可能还想查看 MERGE 语句：

```
merge into table_name 
using
( 
   select 1 as id, 
          'foo' as value1,
          'bar' as value2
   from dual
) t on (t.id = table_name.id)
when matched then update
  set value1 = t.value1,
      value2 = t.value2
when not matched then 
   insert (id, value1, value2)
   values (t.id, t.value1, t.value2); 
```

If that row exists it will be updated, if not it will be inserted.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T11:03:27.163

一种方法是删除此字符串，然后再次插入

# android - android 模拟器上的 adb pull/push 非常慢

> ID：12053439
> 
> 赞同：2
> 
> 时间：2012-08-21T11:01:25.513
> 
> 标签：android, performance, emulation, adb

`Emulator`有没有人尝试向/从 android目标推/拉大文件（超过 20MB） ？当我进行`adb`推/拉操作时，速度非常慢。

平均速度为 75 KB/s。哦，我的，那是我 15 年前高中网络的速度。但是`Emulator`目标就在我的硬盘上，那为什么`adb`push/pull那么慢呢？

谢谢！

亚瑟

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T12:36:36.357

使用 4.0.3 仿真器映像，我获得了约 17MB 文件的传输速度，比您引用的速度快 20-40 倍。因此，问题更多在于您的开发环境，而不是 Android 模拟器固有的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T09:14:24.720

我知道了。如果我使用 adb push/pull，它实际上是使用 TCP/IP 连接我的 PC 和 android 虚拟机。现在我找到了一个可以将sdcard.img挂载到虚拟硬盘的软件（我使用的是Windoze），那么一切都很好。sdcard.img 上的文件操作速度与真实硬盘驱动器上的一样快。该软件名为 ImDisk。

亚瑟

# javascript - 如何使用jquery获取结束时间

> ID：12053441
> 
> 赞同：0
> 
> 时间：2012-08-21T11:01:27.027
> 
> 标签：javascript, jquery

[**演示**](http://jsbin.com/akuber/1/edit)在 jsbin 演示中，我正在获取开始时间，但我不知道如何获取结束时间。我应该如何进一步获得结束时间。 **我不想更改 html。** 我必须使用当前的 html 来获取结束时间。我从最近三天开始尝试。

```
$("#btnAllot").click(function ()
            { var calculateStartMins = $('td.csstd:first');var calculateStartHrs = calculateStartMins.parent().prevAll().andSelf().find('td:first-child').filter(function(){return $.trim($(this).text()) !== '';}).last();
                    var fromTime = calculateStartHrs.text().trim() + calculateStartMins.text().trim();
                    var fromTimeAMPM = fromTime.substring(5, 7);
                    var fromTimeHour = fromTime.trim().substring(0, 2);
                    var fromTimeMinute = fromTime.substring(7, 10);
                    var hidFromTime = fromTimeHour.trim() +":"+ fromTimeMinute.trim();alert("Start Time is "+hidFromTime.trim()); 
             var endTime = $('td.csstd:last').parent().next().andSelf().find('td:first-child').
                filter(function ()
                {return $.trim($(this).text()) !== '';
               }).last();alert("End Time is "+endTime);
            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T15:56:58.637

你想得太复杂了，我猜......看看这是否适合你：

```
$("#btnAllot").click(function(){
    var begin = $("td.csstd:first"), end = $("td.csstd:last"),
        beginHour, endHour, endMinute, currentHour, beginTime, endTime;
    $("tr.csstablelisttd").each(function(){
        var minuteTd = $(this).find("td").eq(1),
            t = $(this).find("td:first").text().trim();
        (t.length) && (currentHour = t);
        (minuteTd.filter(begin).length > 0) && (beginHour = currentHour);
        (minuteTd.filter(end).length > 0)   && (endHour   = currentHour);
    });

    endHour = endHour.replace(/00/, "").split(":");
    endHour[0] = Number(endHour[0]);
    endMinute = (Number(end.text().trim())+15) % 60;
    if (endMinute == 0) {
        endHour[0] = (endHour[0] + 1) % 12;
        if (endHour[0] == 0) {
            endHour[0] = 12;
            endHour[1] = endHour[1] == "AM" ? "PM" : "AM";
        }
    }
    (endHour[0] < 10) && (endHour[0] = "0"+endHour[0]);
    (endMinute < 10) && (endMinute = "0"+endMinute);

    beginTime = beginHour.replace(/00/, begin.text().trim()); 
    endTime   = endHour[0] + ":" + endMinute + endHour[1];

    alert("Start time is "+beginTime);
    alert("End time is "+endTime);
}); 
```

[**演示**（JSFiddle）](http://jsfiddle.net/Aletheios/SeXhH/1/)

[JSBin](http://jsbin.com/eheroy/1/edit)

# java - 为什么 JAR 找不到资源？

> ID：12053445
> 
> 赞同：1
> 
> 时间：2012-08-21T11:01:52.713
> 
> 标签：java, eclipse, jar

我有两个班级（`Play`和`editor`）。`editor`使用`Play`. `Play`使用一些外部文件。我将它们导入 Eclipse 以便直接处理它们（如您在第一个屏幕截图中所见）。 ![在此处输入图像描述](../Images/5ab364f7edfa0db40b9fd07159adbca4.png) 我希望 JAR 能够包含这些文件并能够使用（导入）它们。那可能吗？将项目导出到 JAR 时应该选择哪些选项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T11:05:55.443

如果您想使用`.wav`jar 中的文件，而不是`String path = System.getProperty("user.dir");`从那里加载 wav 文件，请尝试执行以下操作：

```
InputStream stream = Play.class.getResourceAsStream("/result.wav"); 
```

从**[这里开始](http://docs.oracle.com/javase/1.5.0/docs/api/javax/sound/sampled/AudioSystem.html)**，似乎`AudioSystem`确实有一个重载`getAudioInputStream`，它接受一个`InputStream`而不是一个`File`对象（如您的代码中所示）。所以你可以有类似的东西：

```
public class Play{
    public AudioInputStream find(String s) throws UnsupportedAudioFileException, IOException{
        // Probably some try catch over the next statement to log the error if `result.wav` is not found.
        InputStream stream = Play.class.getResourceAsStream("/result.wav");
        return AudioSystem.getAudioInputStream(stream); 
    }
} 
```

为了使上述工作正常，您`*.wav`必须将所有文件复制到源文件夹中，以便它们出现在类路径中。为此，您可以将 *.wav 移入`sint/src`开始（`wav`如果需要，稍后移入适当的文件夹）。这会将它们放在类路径的根目录中，`/`并允许像这样引用它们 :`/result.wav`等`/x_SECOND.wav`。

## 工作代码

这是一些可以`AudioInputStream`从**[这里](https://github.com/ajorpheus/stack-overflow/blob/master/src/A.java)**测试的工作代码：

```
public class A {    
    @Test
    public void testAudioInputStream() throws UnsupportedAudioFileException, IOException {
        InputStream stream = A.class.getResourceAsStream("/result.wav");
        System.out.println(stream != null);
        AudioInputStream audioInputStream = AudioSystem.getAudioInputStream(stream);
        System.out.println(audioInputStream != null);
    }    
} 
```

上面的代码对我来说很好，我`true`在控制台中有两个。

### 带有测试项目的 GIT Hub 存储库

您应该能够在**[此](https://github.com/ajorpheus/stack-overflow/zipball/master)**zip 中导入项目并查看代码是否正常工作。

## 你需要一个“胖罐子”吗？

有点跑题了，但是如果您需要构建一个 `fat jar`包含项目运行所需的所有 jar 并且是单个可执行文件的文件，那么请尝试使用[http://fjep.sourceforge.net/](http://fjep.sourceforge.net/)插件来构建一个胖 jar。

您可以使用`File -> Export -> Other -> One Jar Exporter`. 这样构建的 jar 是一个可执行的 jar，不需要其他任何东西来运行。

# ios - UIBarButtonItem 用于 UITabBarController 中的 4 个选项卡

> ID：12053446
> 
> 赞同：0
> 
> 时间：2012-08-21T11:01:58.047
> 
> 标签：ios, uinavigationbar

我有一个包含 4 个选项卡的 UITabBarController。在每个选项卡上，导航栏中应该有一个图标，允许用户打开我的设置视图。我通过为这 4 个选项卡创建一个父类来解决这个问题，并在 viewDidLoad 方法中添加了一个图标，该方法调用了一个执行推送的方法。到目前为止，此解决方案按预期工作。

但 ：-）！现在我想让这个设置视图只打开一次。我目前拥有的解决方案允许用户同时在所有 4 个选项卡上打开设置视图。我不希望这样 - 有没有办法让设置只打开一次？

这是我的代码（放在父文件中）

```
-(void)viewDidLoad
{
    UIBarButtonItem *leftButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemCompose target:self action:@selector(showSettings)];
}

- (void)showSettings
{
    [self.navigationController pushViewController:[[SettingsViewController alloc] initWithNibName:@"SettingsViewController" bundle:nil] animated:YES];
} 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T11:40:47.213

假设您的所有选项卡都是`UINavigationController`s，则在`-showSettings`其他选项卡中遍历并弹出导航视图控制器（如果它是`SettingsViewController`.

```
- (void)showSettings
{
    for (UINavigationController *navController in self.tabBarController.viewControllers)
        if ([navController.viewControllers.lastObject isKindOfClass:[SettingsViewController class]])
             [navController popViewControllerAnimated:NO];
    [self.navigationController pushViewController:[[SettingsViewController alloc] initWithNibName:@"SettingsViewController" bundle:nil] animated:YES];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T11:36:44.623

如果我理解正确，每个选项卡都有 4 个 UINavigationController，并且他们推送的每个 rootView 在导航栏中都有这个图标，对吧？如果是这样，一旦用户导航到他的设置视图，那么您需要向每个 UINavigationController 发送一条消息，告诉它从其 UINavigationBar 中删除 Settings UIBarButtonItem。

现在 UINavigationController 并不“拥有”视图控制器使用的所有 UINavigationItem，因此它必须向它当前拥有的所有视图控制器发送消息并告诉他们应该删除按钮。

您可以在展示设置视图时执行此操作，这样当用户返回主视图时，按钮就会消失，并且它也会从所有其他视图控制器中消失。

# java - aspectj：为什么不能应用建议？

> ID：12053453
> 
> 赞同：2
> 
> 时间：2012-08-21T11:02:12.563
> 
> 标签：java, aspectj

我创建了非常基本的 aspectJ 项目。我不知道为什么不能应用建议。

注解

```
import java.lang.annotation.*;

@Retention(RetentionPolicy.RUNTIME)  
@Target(ElementType.METHOD)  
@Documented  
public @interface Conditional {  
    String value();  
} 
```

和方面J类：

```
@Aspect
public class AspectE {

    @Around("call(@Conditional * *.*(..)) && @annotation(conditional)" )
    public Object condition(ProceedingJoinPoint joinPoint, Conditional conditional) throws Throwable {

        System.out.println("entry point says hello!");
        return joinPoint.proceed();
    }
} 
```

主要的：

```
public class Main {

    @Conditional("")
    public static void main(String[] args) {
        System.out.println("main good morning");
    }
} 
```

你能告诉我我应该改变什么来接收这两条消息吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T12:03:01.893

我认为这是因为`call(@Conditional * *.*(..))`它基本上编织了调用者，在这种特定情况下的调用者是命令行，所以没有编织发生。

您可能应该将其更改为执行，这应该可以。

`@Around("execution(@Conditional * *.*(..)) && @annotation(conditional)" )`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T11:39:32.797

您应该使用[AspectJ weaver](http://en.wikipedia.org/wiki/Aspect_weaver)将您的方面应用`AspectE`到 Java 类`Main`。如果您使用的是 Maven，我建议您使用[aspectj-maven-plugin](http://mojo.codehaus.org/aspectj-maven-plugin/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T12:17:55.723

1.  您的建议必须`proceed(conditional)`，或者，如果您不需要将对象绑定到变​​量，请删除绑定。

2.  您的切入点匹配问题是应用程序内部没有调用`main`的地方（Java 命令行执行此操作），只有执行方法的地方，因此您想将切入点的那部分更改为`execution(@Conditional * *.*(..))`.

3.  为简化起见，您可以删除切入点的任一部分，因为这两个切入点都将匹配，而无需通过`&&`.

因此，AspectJ 语法中最简单的切面版本是：

```
public aspect AspectE {
    Object around() : @annotation(Conditional) {
        System.out.println("entry point says hello!");
        return proceed();
    }
} 
```

# actionscript-3 - 如何从多个图像上传器中删除图像及其详细信息？以及如何减少上传的项目数量？

> ID：12053457
> 
> 赞同：0
> 
> 时间：2012-08-21T11:02:29.780
> 
> 标签：actionscript-3, apache-flex

我尝试构建一个多图像上传器。其中图像上传工作正常，进度条工作正常..但关闭按钮不起作用。如果我单击关闭按钮，图像和详细信息将从文件中删除..但它也上传并显示在进度栏中..我该如何维护这个问题？任何人都可以帮助我吗？请...我的演示是[http://demo.enfintech.net/MultipleFileUpload/](http://demo.enfintech.net/MultipleFileUpload/) 我的代码如下

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600" creationComplete="init()" xmlns:aaronhardy="aaronhardy.*">
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>
    <fx:Style>
        @namespace s "library://ns.adobe.com/flex/spark";
        @namespace mx "library://ns.adobe.com/flex/mx";

        global
        {
            font-weight: bold;
        }
    </fx:Style>
    <fx:Script>
        <![CDATA[
            import aaronhardy.ProgressBar;

            import flash.sampler.NewObjectSample;
            import flash.utils.flash_proxy;
            import flash.utils.setTimeout;

            import mx.charts.renderers.AreaRenderer;
            import mx.collections.ArrayCollection;
            import mx.controls.Alert;
            import mx.events.Request;
            import mx.geom.RoundedRectangle;
            import mx.utils.OnDemandEventDispatcher;
                private var refAddFiles:FileReferenceList=new FileReferenceList;
                private var fileReference:FileReference=new FileReference;
                private var serverSideUrl:String="http://demo.enfintech.net/MultipleFileUpload/fileUploader/uploadFile.php";
                //                      private var serverSideUrl:String="http://192.168.1.60/fileUploader/uploadFile.php";
                private var list:Array=new Array();
                public var urlReq:URLRequest;
                private var initial:int=0;
                private var totalSize:Number=0;
                private var isSelected:Boolean=false;
                private var images:Object;
                private var fileSizeArray:Array=new Array();
                private var temp:Number=0;
                public var fileListLength:int;
                public var loaded:int;
                public var totalUploaded:int;
                [Bindable]  private var files:ArrayCollection = new ArrayCollection();
            private function init():void
            {
                Security.loadPolicyFile("http://demo.enfintech.net/crossdomain.xml");
                progressBar2.visible=false;
                refAddFiles.addEventListener(Event.SELECT,fileRefSelect);
                urlReq = new URLRequest(serverSideUrl);
            }

            private function fileRefSelect(event:Event):void
            {
                progressBar2.visible=false;
                upload1();
                isSelected=true;
            }
            private function uploadFiles():void
            {
                if(files.length==0)

                {
                    Alert.show("Please Select file(s)");
                }
                else
                {
                    gotoMultipleUpload();
                }
            }

            public function gotoMultipleUpload():void
            {
//              var fileReference:FileReference;
                fileReference = FileReference(list[initial]);
                fileReference.addEventListener(Event.COMPLETE, uploadCompleteHandler);
                fileReference.addEventListener(ProgressEvent.PROGRESS,progressBarEvent);
                fileReference.addEventListener(IOErrorEvent.IO_ERROR,uploadFails);
                fileReference.upload(urlReq);
            }

            private function uploadFails(event:IOErrorEvent):void
            {
                Alert.show("Error");
            }
            private function uploadCompleteHandler(event:Event):void
            {
                totalUploaded=totalUploaded+list[initial].size;
                if(initial<fileListLength-1)
                {
                    initial++;
                    gotoMultipleUpload();

                }
                else
                {
                    progressBar2.label="Upload Completed ("+(initial+1)+"/"+fileListLength+")";
                    Alert.show("File Uploaded Completed");
                    upload0.enabled=false;
                    cancel.enabled=false;
                    select.enabled=true;
                }
            }

            private function progressBarEvent(event:ProgressEvent):void
            {

                files[initial].currentValue=event.bytesLoaded;
                progressBar2.visible=true;
                var numPerc:Number=Math.round(((event.bytesLoaded+totalUploaded)/totalSize)*100);
                progressBar2.setProgress(event.bytesLoaded+totalUploaded,totalSize);
                progressBar2.label="Uploading "+numPerc+"% ("+(initial+1)+"/"+fileListLength+")";
            }

            public function upload1():void
            {
                try
                {
                initial=0;
                loaded=0;
                totalUploaded=0;
                list=new Array();
                list=refAddFiles.fileList;
                fileListLength=list.length;
                fileSizeArray.push(list[0].size);
                for(var i:int=0;i<fileListLength;i++)
                {
                    totalSize+=list[i].size;
                    list[i].addEventListener(Event.COMPLETE, fileRefCompleted);
                    list[i].load();
                }
                }
                catch(e:Error)
                {
                    Alert.show(e.message);
                }
            }   

            public function fileRefCompleted(event:Event):void
            {
                loaded=loaded+1;
                if(loaded==fileListLength)
                addFilesToDatagrid();
            }
            public function addFilesToDatagrid():void
            {
                var temp:Number;
                for(var i:int=0;i<list.length;i++)
                {
                    images=new Object();
                    images["fileName"]=list[i].name;
                    images["size"]=list[i].size;
                    images["preview"]=list[i].data as ByteArray;
                    images["currentValue"]=0;

                    if(list[i].size/1024>=1)
                    {
                        temp=list[i].size/1024;
                        if(temp/1024>=1)
                        {
                            temp=temp/1024;
                            images["sizeconverted"]=String(temp.toFixed(1))+"Mb";
                        }
                        else
                        {
                            images["sizeconverted"]=String(temp.toFixed(1))+"Kb";
                        }
                    }
                    files.addItem(images);

                }
                select.enabled=false;
            }
            public function removeItem():void
            {
                var item:int=dgMain.selectedIndex;
                files.removeItemAt(item);

            }
            private function cancelClick():void
            {
                fileReference.cancel();
                progressBar2.label="FileUpload Cancelled";
                upload0.enabled=true;
            }

            private function browsebtn():void
            {
                files.removeAll();
                files.refresh();
                var arr:Array = [];
                arr.push(new FileFilter("Images", ".gif;*.jpeg;*.jpg;*.png"));
                refAddFiles.browse(arr);
                upload0.enabled=true;
                cancel.enabled=true;
                totalUploaded=0;
                totalSize=0;

            }

            private function titleWindowClose():void
            {
                var item:int=dgMain.selectedIndex;
                files.removeAll();
                progressBar2.visible=false;
                select.enabled=true;
                upload0.enabled=true;
            }

        ]]>
    </fx:Script>
    <s:TitleWindow x="204" y="10" width="520" height="325" id="titleWindow"
                   skinClass="TitleSkin" title="File Uploader" close="titleWindowClose()">
        <mx:DataGrid id="dgMain" x="0" y="0" width="518" height="237" allowMultipleSelection="true"
                     dataProvider="{files}" fontFamily="Arial" fontSize="12" headerHeight="0"
                     horizontalScrollPolicy="off" variableRowHeight="true">
            <mx:columns>
                <mx:DataGridColumn dataField="preview" headerText="Preview" width="40" paddingLeft="5" itemRenderer="ImageDatagrdItmRndr"/>
                <mx:DataGridColumn dataField="fileName" headerText="Name" width="380" itemRenderer="itmRndrPrgrsBar"/>
                <mx:DataGridColumn dataField="sizeconverted" headerText="Size" width="60"/>
                <mx:DataGridColumn id="close" headerText="Size" width="40" itemRenderer="buttonClose"/>
            </mx:columns>
        </mx:DataGrid>
        <mx:ProgressBar id="progressBar2" x="-1" y="237" width="518" barColor="haloblue"            
                        labelPlacement="center" mode="manual" themeColor="#eaeaea"
                        trackColors="[white,halosilver]"/>
        <s:Button id="select" bottom="5" width="87" height="30" label="Select files"
                  click="browsebtn()" fontFamily="Arial" fontSize="12" horizontalCenter="-91" skinClass="Skin.setButtonSkin"
                  />
        <s:Button id="upload0" bottom="5" width="79" height="30" label="Upload" click="uploadFiles()"
                  fontFamily="Arial" fontSize="12" horizontalCenter="0" skinClass="Skin.setButtonSkin"/>
        <s:Button id="cancel" bottom="5" width="79" height="30" label="Cancel" fontFamily="Arial" click="cancelClick()"
                  fontSize="12" horizontalCenter="91" skinClass="Skin.setButtonSkin"/>

    </s:TitleWindow>
    <s:Label id="tet" color="red" x="468" y="394" width="130"/>
    <s:Label id="tet2" x="236" y="394" width="93" color="red"/>
</s:Application> 
```

关闭按钮的项目渲染是

```
<?xml version="1.0" encoding="utf-8"?>
<s:MXDataGridItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009" 
                          xmlns:s="library://ns.adobe.com/flex/spark" 
                          xmlns:mx="library://ns.adobe.com/flex/mx" 
                          focusEnabled="true">
    <fx:Script>
        <![CDATA[
            import mx.core.FlexGlobals;
        ]]>
    </fx:Script>

    <mx:Image horizontalCenter="0"  source="dialog-close.png"
             verticalCenter="0"  click="FlexGlobals.topLevelApplication.removeItem();"/>
</s:MXDataGridItemRenderer> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T13:39:27.903

试试下面的代码：-我已经删除了一些皮肤和渲染器，因为它显示错误，请在下面找到修改后的代码，我更改了一些逻辑以使其有点工作：-

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600" creationComplete="init()" xmlns:aaronhardy="aaronhardy.*">
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>
    <fx:Style>
        @namespace s "library://ns.adobe.com/flex/spark";
        @namespace mx "library://ns.adobe.com/flex/mx";

        global
        {
            font-weight: bold;
        }
    </fx:Style>
    <fx:Script>
        <![CDATA[

            import flash.sampler.NewObjectSample;
            import flash.utils.flash_proxy;
            import flash.utils.setTimeout;

            import mx.charts.renderers.AreaRenderer;
            import mx.collections.ArrayCollection;
            import mx.controls.Alert;
            import mx.events.Request;
            import mx.geom.RoundedRectangle;
            import mx.utils.OnDemandEventDispatcher;
            private var refAddFiles:FileReferenceList=new FileReferenceList;
            private var fileReference:FileReference=new FileReference;
            private var serverSideUrl:String="http://demo.enfintech.net/MultipleFileUpload/fileUploader/uploadFile.php";
            //                      private var serverSideUrl:String="http://192.168.1.60/fileUploader/uploadFile.php";
            [Bindable]
            private var list:Array=new Array();
            public var urlReq:URLRequest;
            private var initial:int=0;

            [Bindable]
            private var totalSize:Number=0;
            private var isSelected:Boolean=false;
            private var images:Object;
            private var fileSizeArray:Array=new Array();
            private var temp:Number=0;

            [Bindable]
            public var fileListLength:int;
            public var loaded:int;
            public var totalUploaded:int;
            [Bindable]  private var files:ArrayCollection = new ArrayCollection();
            private function init():void
            {
                Security.loadPolicyFile("http://demo.enfintech.net/crossdomain.xml");
                progressBar2.visible=false;
                refAddFiles.addEventListener(Event.SELECT,fileRefSelect);
                urlReq = new URLRequest(serverSideUrl);
            }

            private function fileRefSelect(event:Event):void
            {
                progressBar2.visible=false;
                upload1();
                isSelected=true;
            }
            private function uploadFiles():void
            {
                if(files.length==0)

                {
                    Alert.show("Please Select file(s)");
                }
                else
                {
                    gotoMultipleUpload();
                }
            }

            public function gotoMultipleUpload():void
            {
                //              var fileReference:FileReference;
                fileReference = FileReference(list[initial]);
                fileReference.addEventListener(Event.COMPLETE, uploadCompleteHandler);
                fileReference.addEventListener(ProgressEvent.PROGRESS,progressBarEvent);
                fileReference.addEventListener(IOErrorEvent.IO_ERROR,uploadFails);
                fileReference.upload(urlReq);
            }

            private function uploadFails(event:IOErrorEvent):void
            {
                Alert.show("Error");
            }
            private function uploadCompleteHandler(event:Event):void
            {
                totalUploaded=totalUploaded+list[initial].size;

                files.refresh();

                if(initial<fileListLength-1)
                {
                    initial++;
                    gotoMultipleUpload();

                }
                else
                {
                    progressBar2.label="Upload Completed ("+(initial+1)+"/"+fileListLength+")";
                    Alert.show("File Uploaded Completed");
                    upload0.enabled=false;
                    cancel.enabled=false;
                    select.enabled=true;
                }
            }

            private function progressBarEvent(event:ProgressEvent):void
            {

                files[initial].currentValue=event.bytesLoaded;
                progressBar2.visible=true;
                var numPerc:Number=Math.round(((event.bytesLoaded+totalUploaded)/totalSize)*100);
                progressBar2.setProgress(event.bytesLoaded+totalUploaded,totalSize);
                progressBar2.label="Uploading "+numPerc+"% ("+(initial+1)+"/"+fileListLength+")";
            }

            public function upload1():void
            {
                try
                {
                    initial=0;
                    loaded=0;
                    totalUploaded=0;
                    list=new Array();
                    list=refAddFiles.fileList;
                    fileListLength=list.length;
                    fileSizeArray.push(list[0].size);
                    for(var i:int=0;i<fileListLength;i++)
                    {
                        totalSize+=list[i].size;
                        list[i].addEventListener(Event.COMPLETE, fileRefCompleted);
                        list[i].load();
                    }
                }
                catch(e:Error)
                {
                    Alert.show(e.message);
                }
            }   

            public function fileRefCompleted(event:Event):void
            {
                loaded=loaded+1;
                if(loaded==fileListLength)
                    addFilesToDatagrid();
            }
            public function addFilesToDatagrid():void
            {
                var temp:Number;
                for(var i:int=0;i<list.length;i++)
                {
                    images=new Object();
                    images["fileName"]=list[i].name;
                    images["size"]=list[i].size;
                    images["preview"]=list[i].data as ByteArray;
                    images["currentValue"]=0;

                    if(list[i].size/1024>=1)
                    {
                        temp=list[i].size/1024;
                        if(temp/1024>=1)
                        {
                            temp=temp/1024;
                            images["sizeconverted"]=String(temp.toFixed(1))+"Mb";
                        }
                        else
                        {
                            images["sizeconverted"]=String(temp.toFixed(1))+"Kb";
                        }
                    }
                    files.addItem(images);

                }
                select.enabled=false;
            }
            public function removeItem(event:MouseEvent):void
            {
                var item:int=dgMain.selectedIndex;
                files.getItemAt(item)
                totalSize -= files.getItemAt(item).size;
                files.removeItemAt(item);
                fileListLength = list.length = files.length;

            }
            private function cancelClick():void
            {
                fileReference.cancel();
                progressBar2.label="FileUpload Cancelled";
                upload0.enabled=true;
            }

            private function browsebtn():void
            {
                files.removeAll();
                files.refresh();
                var arr:Array = [];
                arr.push(new FileFilter("Images", ".gif;*.jpeg;*.jpg;*.png"));
                refAddFiles.browse(arr);
                upload0.enabled=true;
                cancel.enabled=true;
                totalUploaded=0;
                totalSize=0;

            }

            private function titleWindowClose():void
            {
                var item:int=dgMain.selectedIndex;
                files.removeAll();
                progressBar2.visible=false;
                select.enabled=true;
                upload0.enabled=true;
            }

        ]]>
    </fx:Script>
    <s:TitleWindow x="204" y="10" width="520" height="325" id="titleWindow"
                   title="File Uploader" close="titleWindowClose()">
        <mx:DataGrid id="dgMain" x="0" y="0" width="518" height="237" allowMultipleSelection="true"
                     dataProvider="{files}" fontFamily="Arial" fontSize="12" headerHeight="0"
                     horizontalScrollPolicy="off" variableRowHeight="true">
            <mx:columns>
                <mx:DataGridColumn dataField="preview" headerText="Preview" width="40" paddingLeft="5"/>
                <mx:DataGridColumn dataField="fileName" headerText="Name" width="380"/>
                <mx:DataGridColumn dataField="sizeconverted" headerText="Size" width="60"/>
                <mx:DataGridColumn id="close" headerText="Size" width="40" itemRenderer="buttonClose"/>
            </mx:columns>
        </mx:DataGrid>
        <mx:ProgressBar id="progressBar2" x="-1" y="237" width="518"             
                        labelPlacement="center" mode="manual" 
                        />
        <s:Button id="select" bottom="5" width="87" height="30" label="Select files"
                  click="browsebtn()" fontFamily="Arial" fontSize="12" horizontalCenter="-91"
                  />
        <s:Button id="upload0" bottom="5" width="79" height="30" label="Upload" click="uploadFiles()"
                  fontFamily="Arial" fontSize="12" horizontalCenter="0" />
        <s:Button id="cancel" bottom="5" width="79" height="30" label="Cancel" fontFamily="Arial" click="cancelClick()"
                  fontSize="12" horizontalCenter="91" />

    </s:TitleWindow>
    <s:Label id="tet" color="red" x="468" y="394" width="130"/>
    <s:Label id="tet2" x="236" y="394" width="93" color="red"/>
</s:Application> 
```

**按钮关闭.mxml**：-

```
<?xml version="1.0" encoding="utf-8"?>
<s:MXDataGridItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009" 
                          xmlns:s="library://ns.adobe.com/flex/spark" 
                          xmlns:mx="library://ns.adobe.com/flex/mx" 
                          focusEnabled="true">
    <fx:Script>
        <![CDATA[
            import mx.core.FlexGlobals;

            override public function set data(value:Object):void
            {
                super.data = value;
                if(value.currentValue >0)
                    closeImage.visible = false;
            }

        ]]>
    </fx:Script>

    <mx:Image id="closeImage" horizontalCenter="0"  source="dialog-close.png"
              verticalCenter="0"  click="FlexGlobals.topLevelApplication.removeItem(event);"/>
</s:MXDataGridItemRenderer> 
```

希望这可以帮助你...

# nhibernate - 使用 Fluent NHibernate 覆盖属性映射

> ID：12053459
> 
> 赞同：1
> 
> 时间：2012-08-21T11:02:37.077
> 
> 标签：nhibernate, fluent-nhibernate, sql-server-ce-4

我有一个流利的 NHibernate 映射，它映射一个类的属性以使用 NHibernate XDocType

```
 Map(x => x.Content)
            .Not.Nullable()
            .CustomType(typeof (XDocType)); 
```

我使用它作为 Sql 2008 db 中的表列是 XML 类型。

目前我正在尝试使用不支持 XML Column 类型的 Sql CE 编写一些单元/集成测试。

当我启动我的会话工厂时，是否有一种简单的方法说我想覆盖内容列映射以使用支持的类型。

下面是我当前如何启动会话工厂的示例

```
var sessionFactory = Fluently.Configure()                                 
                                .Database(MsSqlCeConfiguration.Standard.ShowSql().ConnectionString(connectionString))
                                .Mappings(m => m.FluentMappings.AddFromAssemblyOf<MyAssembly>())
                                .ExposeConfiguration((c) =>
                                                         {
                                                             sessionConfig = c;
                                                             new SchemaExport(c).Create(false, true);
                                                         })                                    
                                .BuildSessionFactory(); 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T23:33:39.870

您应该扩展`MsSqlCeDialect`or`MsSqlCe40Dialect`并添加：

```
RegisterColumnType(DbType.Xml, "NTEXT"); 
```

这将对/属性使用`NTEXT`SQL 类型。`XDocType``XmlDocType`

# jquery - 验证具有相同类名的两个输入

> ID：12053460
> 
> 赞同：0
> 
> 时间：2012-08-21T11:02:40.293
> 
> 标签：jquery

我需要验证两个文本字段的空值，在我的页面中尝试了这段 Jquery，

```
 $('#div1').hide();

    $('#btn1').click(function(){

    $('.class1').each (function() {

        if($(this).val() == "") {

        $('#div1').show();
        }else {
        $('#div1').hide();
        }
    }); 
```

它仅验证第一个文本字段。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T11:19:36.517

实际上，只要选择中的任何元素具有`val()`of ，您的代码就应该显示 #div1 `""`。我不确定这是否是您想要的，也许您想`<div>`为每个输入元素显示不同的内容？

每个函数的回调将获取两个参数，[-](http://api.jquery.com/each/)`index`数组中元素的索引，以及`element`，数组中的元素。您可以使用它来区分您正在验证的元素：

```
$('.class1').each (function(index, element) {
    if($(this).val() == "") {
        $('#div' + index).show();
    }else {
        $('#div' + index).hide();
    }
}); 
```

有关演示，请参阅[我的 jsfiddle](http://jsfiddle.net/sseemayer/3TNr9/)。

**不过，这确实是不干净的编程。**您可能想尝试使用出色的[JQuery 验证插件](http://docs.jquery.com/Plugins/Validation)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T12:00:23.813

我认为您应该遵循以下方法

```
$('#div1').hide();
    $('#btn1').click(function() {
        $('.class1').each(function() {
            $('#div1').hide();
            if ($(this).val() == "") {
                $('#div1').show();
                return false;
            }
        });
    }); 
```

根据您的代码验证，我猜只对最后一个输入进行了验证。

[**工作演示**](http://jsfiddle.net/sZT4f/1/)

# c# - C# 与 mdb dataTabel.LoadDataRow 太慢

> ID：12053464
> 
> 赞同：0
> 
> 时间：2012-08-21T11:02:49.197
> 
> 标签：c#, performance, ms-access, datarow

问题出在 Visual Studio 2005 中的 C# 和 Microsoft Access 2003 mdb 文件中。当我有很多记录（大约 500k）时，闲置的代码非常慢

```
foreach (DataRow parentrow in ds.Tables[0].Rows)
{
childrows = parentrow.GetChildRows(r);
if (childrows == null || childrows.Length == 0)
{
      table.LoadDataRow(parentrow.ItemArray, true);
}
} 
```

任何加速代码的解决方案？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-11T16:41:12.157

尝试这个：

```
table = ds.Tables[0]; 
```

埃德加

# algorithm - 如何查找 32 位缓冲区中是否有 n 个连续的设置位？

> ID：12053467
> 
> 赞同：7
> 
> 时间：2012-08-21T11:02:50.047
> 
> 标签：algorithm, bit-manipulation

也许您可以帮助我解决以下问题，以帮助我加快我正在考虑的内存管理器的速度（我不确定是否存在解决方案——我没有找到）。

我有一个 32 位的寄存器，我需要找出其中是否有 n 个连续的设置位，如果有，它们的偏移量是多少。例如，如果寄存器保存以下值 111100000000000000000001111111000 并且 n 等于 4 - 接受以下任何答案（偏移量从 0 开始）：

> 3、4、5、6、28

我拥有的原子操作都是常规的按位操作（&、|、~、...），并且还找到了最低有效位偏移量（上面寄存器中的 3）。该算法（假设存在一个）——应该不超过 5 个原子操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T11:22:36.110

如果有一种算法可以做到这一点，那么最坏情况的复杂度至少是`O(m-n)`，其中`m`a 是寄存器中的位数，`n`是您要查找的连续设置位数。这很容易看出，因为如果设置了所有位，您的算法将必须准确输出`m-n`项目，因此它的复杂性不能再低了。

**编辑**

这里有一个类似问题的优雅解决方案[循环遍历整数 ruby​​ 中的位](https://stackoverflow.com/questions/10911780/looping-through-bits-in-an-integer-ruby/10922528#10922528)，找到 longes`1`序列的长度。

如果您`n`事先知道要查找的运行长度，则此算法只需要`n`步骤。然后可以在大约 5 个以上的步骤中从算法的最后一步中的尾随零的数量中恢复偏移量。这不是非常有效，但可能比循环解决方案更好，尤其是对于小型`n`.

**编辑 2**

如果`n`事先知道，我们可以为它计算出一系列必要的转变。例如，如果我们正在寻找 7 位运行，那么我们必须这样做

```
x &= x >> 1
x &= x >> 3
x &= x >> 1
x &= x >> 1 
```

关键是，如果是偶数，我们向右移动`n/2`位，如果是奇数，则移动`n`1 ，然后相应地更新（或者），正如@harold 所建议的那样。即时估计这些值会很昂贵，但如果我们预先计算它们，那么它将非常有效。`n``n``n = n - 1 or n = n / 2`

**编辑 3**

更好的是，对于任何，无论我们采取哪种转变，只要它在 和 之间，都需要精确`n`的步骤。请参阅下面的评论。`ceil(log(2,n))``floor(n/2)``2^floor(log(2,n-1))`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T11:49:27.860

对于每个可能的字节值 (0-255)，计算开头的位数、结尾的位数和字节内最长的连续位数以及此序列的偏移量。例如，对于`0x11011101`，开头有 2 位，结尾有 1 位，其中包含 3 个连续位的序列。

将此值存储在 4 个数组中，例如`start`, `end`, `longest`, `longest_offset`。

然后，将 32 位数字视为 4 字节数组，并按如下方式遍历这些字节：

```
int search_bit_sequence(uint32 num, int desired) {
  unsigned char *bytes = (unsigned char *)&num;
  int i, acu;
  for (acu = i = 0; i < 4; i++) {
    int byte = bytes[i];
    acu += start[byte];
    if (acu >= desired)
      return (i * 8 - (acu - start[byte]));

    if (longest[byte] >= desired)
      return ( i * 8 + longest_offset[byte]);

    if (longest[byte] < 8)
      acu = end[byte];
  }
  return -1; /* not found */
} 
```

**更新**：注意你的 CPU 的字节序可能需要改变循环方向。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T12:25:29.523

Qnan 发布的链接显示了针对一般情况的优雅解决方案。

对于特定的 m 值，可以进一步优化。

例如，对于 m == 4，您可以这样做：

```
x &= (x >> 1);
x &= (x >> 2);
// at this point, the first bit set in x indicates a 4 bit set sequence. 
```

对于 m == 6 ：

```
x &= (x >> 1);
x &= (x >> 1);
x &= (x >> 3); 
```

最后，这只是减少到因式分解 m。

**更新**

另请注意，对于较高的值，实际上只检查每个可能位置的位序列可能更便宜。

例如，对于 m = 23，模式只能从 0 到 9 的位置开始。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-19T01:04:45.860

我检查了[这个问题和答案](https://stackoverflow.com/questions/3304705/finding-consecutive-bit-string-of-1-or-0)，并提出了以下想法。

```
int i = n-1;
uint32_t y = x;
while(y && i--) {
    y = y & (y << 1);
}; 
```

`y`如果有`n`连续的设置位，则上述操作后为非零。接下来要做的是找到在那里设置的最不重要的值。以下代码将删除除最低有效位之外的所有设置位。

```
z = y - (y & (y-1)); 
```

现在我们只设置了一个位，我们需要找到位的位置。我们可以在 32 种情况下使用 switch 语句。

```
static inline int get_set_position(const uint32_t z) {
    switch(z) {
        case 0x1:
            return 0;
        case 0x2:
            return 1;
        ....
        .... // upto (1<<31) total 32 times.
    }
    return -1;
} 
```

最后要得到我们需要 reduce 的结果`n-1`。所以整个过程如下。

```
static inline int get_set_n_position(const uint32_t x, const uint8_t n) {
    if(!n) return -1;
    int i = n-1;
    uint32_t y = x;
    while(y && i--) {
        y = y & (y << 1);
    };
    if(!y) return -1;
    uint32_t z = y - (y & (y-1));
    if(!z) return -1;
    int pos = get_set_position(z);
    if(pos < 0) return -1;
    assert(pos >= (n-1));
    return pos - (n-1);
} 
```

现在有对大端的关注。我想我只需要为大端更改 get_set_position() 即可使其工作（假设连续设置位定义基于端序进行更改）。

让我分享一个使用gcc提供的builtin_ctzl的测试代码。

```
OPP_INLINE int get_set_n_position(BITSTRING_TYPE x, const uint8_t n) {
    if(!n || n > BIT_PER_STRING) return -1;
    int i = n-1;
    while(x && i--) {
        x = x & (x << 1);
    };
    if(!x) return -1;
    int pos = __builtin_ctzl(x);
    return pos - (n-1);
} 
```

该代码在 O(1) 时间内工作，因为 32 是恒定的（正如@Qnan 注意到的那样）。如果寄存器的大小不同，它再次在 O(n) 中工作。

注意：感谢评论和单元测试，我修复了错误。

# php - 单击按钮并更改位置后刷新页面

> ID：12053471
> 
> 赞同：0
> 
> 时间：2012-08-21T11:03:15.943
> 
> 标签：php, javascript, html

我有一个按钮，它通过使用 javascript 将页面的位置更改为我的 php 脚本来生成一个 word 文档，该脚本在同一页面上输出文件，因为使用以下命令更改了位置：

```
header('Content-type: application/vnd.openxmlformats-officedocument.wordprocessingml.document');
header('Content-Disposition: attachment; filename="' .$templateName . '.docx"');
readfile( $tempFileName); 
```

无论如何，当我单击按钮时，php 脚本会更改包含按钮的页面所包含的一行数据。点击按钮后，只生成word文档，*不*刷新页面，用户会认为按钮只有生成word文档的效果，不改变记录，刷新页面后注意按钮所做的不同。

我的按钮的 HTML 是这样的：

```
<input type="button" value="Generate Final Demand" onClick="self.location='DOCXGenerateDocument.php?templ=finaldemand&invoiceid=<?=$_GET['id']?>'"> 
```

对文档返回后如何完成刷新页面的任务有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T12:24:20.150

一种解决方案是使用`setTimeout()`并猜测页面何时应该返回，然后`document.location.reload(true)`在超时触发时执行。

它不漂亮，但它应该可以完成工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T13:15:41.300

而不是做`self.location`，使用`window.location`

例如 `onClick="window.location='DOCXGenerateDocument.php?templ=finaldemand&invoiceid=<?=$_GET['id']?>'"`

让我知道这个是否奏效。
如需更多参考，您可以查看 MDN 上的此[链接](https://developer.mozilla.org/en-US/docs/DOM/window.location)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T15:44:13.363

一种相对简单的方法是利用 PHP 中的会话锁定。让我们假设您的 DOCX 生成脚本使用会话并且在脚本结束之前不会释放它。现在，如果浏览器尝试加载另一个也使用 session 的 PHP 脚本，第二个脚本将停止，直到第一个脚本完成。使用“location.reload()”使第二个脚本成为动态加载的 Javascript，然后你就拥有了你需要的东西。

开始下载的功能：

```
function getDoc() {
    self.location='DOCXGenerateDocument.php?templ=finaldemand&invoiceid=<?=$_GET['id']?>';
    setTimeout("var s = document.createElement('SCRIPT'); s.src = 'read.js.php'; document.body.appendChild(s);", 100);
} 
```

重新加载脚本：

```
<?php session_start(); ?>
location.reload(); 
```

# ssl - 创建证书链

> ID：12053473
> 
> 赞同：1
> 
> 时间：2012-08-21T11:03:24.443
> 
> 标签：ssl

我已经设法从这一行创建了一个证书`cmd`

```
openssl req -config openssl.conf -new -x509 -days 1001 -key keys/ca.key -out certs/ca.cer 
```

这将创建一个根证书，名为`ca.cer`. 对于我的移动应用程序，我想从这个根证书创建一个新证书，并从这个“子”证书生成一个密钥库。我怎样才能`openssl`在windows下这样做？我读过这个[帖子](https://superuser.com/questions/126121/how-to-create-my-own-certificate-chain)，但我不太了解它。

提前致谢。

# java - java字符串连接

> ID：12053474
> 
> 赞同：4
> 
> 时间：2012-08-21T11:03:25.157
> 
> 标签：java, string

我有一个字符串列表，现在我想用逗号（，）分隔将列表变成一个字符串，这是唯一的方法，或者有一些简单而好的方法

```
StringBuilder s = null;
List<String> listObjs (5 strings in it)
for(String listObj : listObjs)
s.append(listObj);
s.append(","); 
```

编辑：SO Rocks 的人......在几秒钟内得到大量答案......哇！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-21T11:08:45.650

你可以做

```
StringBuilder sb = new StringBuilder();
String sep = "";
for (String s : listObjs) {
    sb.append(sep).append(s);
    sep = ", ";
}
System.out.println(sb); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-21T11:11:05.700

您可能想使用[Apache Commons StringUtils.join 方法](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/StringUtils.html#join%28java.lang.Object%5b%5d,%20char%29)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T11:05:38.070

使用`StringBuilder`.

```
StringBuilder sb = new StringBuilder();
for (String obj : listObjs) {
    sb.append(String.format("%s,", obj));
    //or without format
    //sb.append(obj).append(",");
}
sb.deleteCharAt(sb.length()-1); // The last ","
System.out.println(sb.toString()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T11:10:26.897

确实使用[`StringBuilder`](http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html)：

```
StringBuilder sb = new StringBuilder();
for (String string : listObjs) {
    sb.append(string);
    sb.append(", ");
}
// Remove the dangling ", "
int length = sb.length();
sb.delete(length - 2, length);

String combined = sb.toString(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T11:11:41.410

`concat()`不会修改您的 s 参考（`null`顺便说一句，因此您应该期待一个`NullPointerException`for `s.concat()`）。您应该使用 "" 初始化 s，然后使用`s = s.concat(other)`or附加到它`s += other`。或者更好的是，使用对这种用例更有效的 StringBuilder：

```
StringBuilder sb = new StringBuilder();
for (String obj : objList) {
    if (sb.length() == 0) {
        sb.append(',');
    }
    sb.append(obj);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-21T11:12:29.017

使用`concat`不是一个好主意，因为它会在每个循环中创建一个新字符串。您可以使用 StringBuilder 代替，从内存角度来看它更有效。

```
public static String getCsvFrom(java.util.Collection<?> objects) {
    if (objects == null || objects.isEmpty()) {
        return "";
    }
    StringBuilder s = new StringBuilder();
    boolean firstLoop = true;
    for (Object o : objects) {
        if (!firstLoop) {
            s.append(",");
        } else {
            firstLoop = false;
        }
        s.append(o);
    }
    return s.toString();
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-21T11:14:39.880

我想知道你为什么没有尝试过这个：

```
String str = "";
str += listObjs.get(0);
for (int i = 1; i < listObjs.size() - 1; i++ ) {
    str += "," + listObjs.get(i);
}
str += listObjs.get(listObjs.size() - 1); 
```

# android - 如何在 TextView 中对齐文本，如 Kindle（Android）

> ID：12053476
> 
> 赞同：0
> 
> 时间：2012-08-21T11:03:31.027
> 
> 标签：android, textview, kindle, justify

我正在寻找一种方法来证明文本的合理性，就像 Kindle 应用程序在 Android 上所做的那样。我读过 Android 不支持完整的理由，但如果是这样，Kindle 是如何实现它的？先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T12:24:57.267

> 我读过 Android 不支持完整的理由

如果您仔细阅读，您会注意到关于充分证明的讨论往往集中在`TextView`.

> Kindle 是如何实现的？

不是由`TextView`. 他们要么正在使用，要么正在使用`WebView`自己的内容渲染引擎。AFAIK，`WebView`支持[CSS`text-align`和`text-justify`](http://www.w3schools.com/cssref/css3_pr_text-justify.asp).

# ruby - 按属性重新排序，重新索引对象数组

> ID：12053480
> 
> 赞同：0
> 
> 时间：2012-08-21T11:03:48.480
> 
> 标签：ruby, arrays, standard-library

例如，我有一组`arr`地图

```
arr == [  { pos => [0,0], color => :red, ... },
          { pos => [0,1], color => :green, ...},
          { pos => [1,0], color => :fuchsia, ...},
          { pos => [1,1], color => :red, ...},
          ...
       ] 
```

在哪里

```
arr.map { |item| item.pos } 
```

形成整数范围 [0..n] x [0..m] 的笛卡尔积

我很乐意通过它们的第一个坐标访问元素！所以使用类似的东西

```
`newArr` == [
              [{ second_coord => 0, color => :red...}, { second_coord => 1, color => :green,...}, .. ],
              [{ second_coord => 0, color => :fuchsia,...}, { second_coord => 1, color => :red, ...},..],
              ...
            ] 
```

因为如果我可以像这样访问它，我相信我可以非常优雅且可读地编辑我的代码。如果转换简短易读，或者至少简短。有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T11:33:59.090

这应该可以解决问题：

```
new_array = arr.inject([]) |res, e| do 
               res[e.pos[0]] ||= []  # this row maybe not required
               res[e.pos[0]] << {second_coord => e.pos[1], color => e.color } 
            end 
```

您可能希望根据 对内部数组进行排序，`second_coord`但这很简单。

# javascript - 如何使用 jquery 创建 XML？

> ID：12053481
> 
> 赞同：0
> 
> 时间：2012-08-21T11:03:47.510
> 
> 标签：javascript, jquery, html, xml

我想从文本区域复制数据，并想`XML`在`Jquery`. 要从文本区域复制它，我在以下代码中编写了以下代码`Jquery`：

```
<script type="text/javascript">
     function paste_data() {
         var text = $('#all').val();
         alert(text);

     }
</script> 
```

// all 是文本区域的id。

当我打印数据时，它以以下格式显示：

```
406450 8 first
43333  89 second
987 90 third-fourth 
```

现在我想使用以下格式`XML`使用上述数据创建一个。`javascript or Jquery`这样我就可以进一步使用它。

```
<row dc = "406450" al="8" msg="first" />
<row dc = "43333" al="89" msg="second" />
<row dc = "987" al="90" msg="third-forth" /> ....and so on 
```

我不知道这是否可能，但是拆分功能呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T11:22:58.870

您可以像这样拆分它以获得二维数组

```
text = text.split('\n'); // split with newline to get the three lines separate
text = text.map(function(line) {
  return line.split(' ');
}); 
```

现在文本应如下所示：

```
[
  [406450,8,'first'],
  [43333,89,'second'],
  [987,90,'third-fourth']
] 
```

现在您将其解析为字符串，然后连接字符串以形成文档

```
var xml = text.map(function(arr) {
  return "<row dc='"+arr[0]+"' al='"+arr[1]+"' msg='"+arr[2]+"' />"   
});
xml = xml.join(''); // results in a well-formed xml-string, hopefully 
```

然后只需使用 jQuery 的[`parseXML`-function](http://api.jquery.com/jQuery.parseXML/)将其形成为 xml-document

```
var xmlDoc = $.parseXML(xml); 
```

等等，现在您已经创建了一个 xml 文档！现在，如果您想使用 jquery 操作该文档，只需将其包装起来：

```
var $xmlDoc = $(xmlDoc); 
```

# iphone - 一键发送电子邮件（不显示 MFMailComposerView）

> ID：12053482
> 
> 赞同：0
> 
> 时间：2012-08-21T11:03:50.210
> 
> 标签：iphone, ios, ipad, mfmailcomposeviewcontroller, mfmailcomposer

这可能是一个重复的问题，但在搜索后我找不到可以帮助我的答案。

所以，我想一键从设备上的同步帐户向一个地址发送一封电子邮件。

将其用作紧急按钮的想法 - 当用户单击紧急按钮时，它会自动将用户之前提供的一些信息发送到服务器。

我怎样才能实现它？苹果允许这样做吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T11:48:04.640

这绝对是可能的。使用[邮件核心](https://github.com/mronge/MailCore)。它是对 LibetPan C 邮件库的 Objective C 包装。[这](http://alwawee.com/wordpress/2012/06/25/how-to-build-mailcore-framework-on-ios/)是在我的博客上发送电子邮件的说明和示例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T11:09:46.163

不，我不认为苹果会允许这样的事情。发送邮件必须通过用户操作启动，这是 Apple 推荐的。我认为您可以使用记录在案的 API 通过应用程序发送的唯一方法是通过用户操作。如果您尝试在没有用户操作的情况下发送应用程序，您可能会面临被拒绝的风险。

可以这样想，当用户使用用户帐户单击应用程序上的按钮时，应用程序会将一些机密信息发送到服务器。这不是苹果想要的，冒着在用户不知情的情况下暴露用户个人信息的风险。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T11:25:09.167

我们无法在后台以编程方式发送电子邮件。使用 Apple 框架无法在没有用户干预的情况下以编程方式发送电子邮件。用户需要点击苹果邮件撰写器页面中的发送按钮来发送电子邮件。

# sas - SAS通过变量传递列名

> ID：12053483
> 
> 赞同：0
> 
> 时间：2012-08-21T11:03:50.930
> 
> 标签：sas, sas-macro, pass-through

我需要通过变量传递列名。

```
%let dsn=a1234;
data temp;
   set &a1234;
   if age>=20;
run; 
```

其中“a1234”是我要使用的列名（存在于文件中）；而不是字符串 a1234。

我想这样做的原因是在脚本顶部定义了所有参数，这使得代码更干净（在这种情况下）。

提前感谢您的任何反馈。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T13:43:29.890

尽管您的问题说`a1234`是一列，但此答案将其视为数据集名称，如您的代码示例中使用的那样。

你很亲近；您创建了一个名为 a1234 的宏变量`DSN`，**但**您试图引用一个名为`A1234`. 换句话说，试试这个：

```
%let DSN=a1234;
data temp;
   set &DSN;
   if age>=20;
run; 
```

为强调而大写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T12:55:22.777

您是在问这样做吗？

```
%let dsn=a1234;
%Let column=Age;
data temp;
 set &a1234;
 if &column>=20;
run; 
```

# iphone - Cocos2D 的可用文件后缀究竟是什么，用于多分辨率支持？

> ID：12053485
> 
> 赞同：1
> 
> 时间：2012-08-21T11:03:55.287
> 
> 标签：iphone, ios, ipad, cocos2d-iphone, screen-resolution

我已经搜索了一段时间，但是很难找到可用于多分辨率支持的可用后缀的定义列表，如果有的话？也就是说，根据您使用的设备在一个维度上加载图像。尤其是界面。

我知道 ipad 视网膜显示支持存在“-hd”后缀，但除此之外，如果有任何用于常规 iPad 分辨率的后缀以及在 iPhone 上加载游戏时的 iPhone 后缀，那也会很好。

我试过使用“-ipad”和“-iphone”之类的后缀，但它们似乎无法识别。

任何人都有关于如何实现这一点的提示，如果有的话？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T12:19:27.853

您需要使用 cocos2d v1.1 或 v2.0。然后你可以在 cocos2d 支持的资源上使用这些扩展（图像、tilemaps、位图字体、粒子效果）：

*   -高清（iPhone/iPod 视网膜）
*   -ipad (iPad 1 & 2)
*   -ipadhd（iPad 视网膜）

CCFileUtils类具有允许您使用不同后缀并启用/禁用自动回退到下一个较低分辨率资产的方法[。](http://www.learn-cocos2d.com/api-ref/latest_2.x/cocos2d-iphone/html/interface_c_c_file_utils.html)

早期的 cocos2d 版本只支持 -hd，大多数版本不支持 -ipad 后缀，因为它长期以来只在单独的 github 分支中可用。-ipadhd 后缀是相当新的，在 cocos2d v1.1 和 v2.0 中引入。

目前 Mac Retina 显示器没有特殊的后缀。

# java - 在 Eclipse 中调试非常慢

> ID：12053487
> 
> 赞同：3
> 
> 时间：2012-08-21T11:04:04.337
> 
> 标签：java, eclipse, debugging

我尝试在 Eclipse 下调试 Jonas webapp。不幸的是，当我连接到远程应用程序时，一切工作都非常缓慢（在杀死所有 Java 应用程序并重新启动 PC 之后）。我也使用 JRebel。这种行为的原因可能是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T13:55:50.407

您也可以尝试使用 Java 监控和管理控制台。这可能有助于显示“缓慢”在哪里。密切关注垃圾收集器以及 JVM 花费多少时间进行垃圾收集。

[http://docs.oracle.com/javase/6/docs/technotes/guides/management/jconsole.html](http://docs.oracle.com/javase/6/docs/technotes/guides/management/jconsole.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T11:40:20.010

我更改了`-XX:MaxPermSize`,`-Xms`和`-Xmx`参数的值，`eclipse.ini`它有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-06T14:20:49.963

最近，我在 Eclipse 和 Visual Studio 代码中都进行了极其缓慢的性能调试。

就我而言，问题在于***JPA***实体中的***lombok***配置。

 **我将***@Data******注释***更改为**@Getters***和***@Setters***。*

 *****看起来**lombok的****hashCode** () 和**equals** () 实现与 JPA 冲突。*******

# actionscript - 错误 #2044：未处理的 ioError:。文本=错误 #2032：流错误。URL：file:///C|/xampp/htdocs/flash/apm01.php at as3_fla::MainTimeline/checkComplete()

> ID：12053488
> 
> 赞同：0
> 
> 时间：2012-08-21T11:04:07.377
> 
> 标签：actionscript

我的 AS3 中有一个经常调用 PHP 文件的函数。它失败并抛出我在标题中使用的错误。我总是收到此错误消息。但是当我在浏览器中运行它时，它工作正常。我不知道似乎是什么问题。这是我的代码：

```
 $function checkComplete(evt:MouseEvent):void {

    // Create A new URLVariables instance to store the variable
    var myVariables:URLVariables = new URLVariables();

    // Create a variable (e.g. username) to send
    myVariables.username = candidate_txt.text;

// Create a new URLRequest instance sending data to "ascom01.php"
var myRequest:URLRequest = new URLRequest("apm01.php");

// Send data using the POST method
myRequest.method = URLRequestMethod.POST;

// The data property of the request is set to the
// URLVariables instance (myVariables) to send to the PHP file.
// Note: myVariables stored the variable (e.g. candidate)
myRequest.data = myVariables;

// Create a new instance of the URLLoader class to work with.
// URLLoader.load( ) method should be used when we need the 
// sent variables returned back to Flash ActionScript.
var myLoader:URLLoader = new URLLoader;

//specify dataFormat property of the URLLoader to be "VARIABLES"
//This ensure that the variables loaded into Flash with the same variable names
myLoader.dataFormat = URLLoaderDataFormat.VARIABLES;

//Load the PHP file by using URLRequest
myLoader.load(myRequest);

//Listen when the loading of data COMPLETE
//Call the loadComplete function when the loading COMPLETE
myLoader.addEventListener(Event.COMPLETE, loadComplete);

}

// Hook up the button with the function checkComplete
enter_btn.addEventListener(MouseEvent.CLICK, checkComplete);

// This is the function that display the data returned back from PHP file
function loadComplete(evt:Event):void {

//Display the value with variable name "totalItem"
total_txt.text = evt.target.data.totalItem

//Get the value (string) with variable name "phpConfirm"
var myResult:String = evt.target.data.phpConfirm;

//Split the string into an Array
var myArray:Array = myResult.split("|");
//output_txt.text = "The number of items are: " + myArray.length;

var finalString = "";
var i:int;
for (i = 0; i < myArray.length; i++) {

finalString = finalString + myArray[i] + "<br>";
    }

    output_txt.htmlText = finalString;

    }` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T11:13:45.713

出现此异常是因为您必须将 php 文件部署到 php-server。Flash 无法运行 php 代码。您试图从磁盘 C 启动它。

所以

```
var myRequest:URLRequest = new URLRequest("apm01.php"); 
```

应该是这样的

```
var myRequest:URLRequest = new URLRequest("http://myhost:80/example/apm01.php"); 
```

否则，您可以将 Flash 文件上传到服务器上的同一文件夹，然后从那里启动它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T16:22:21.067

我的解决方案可能对这个板上的其他人来说是显而易见的......但我对此一无所知：

我从我的 Flash 文件链接到的 PHP 文件是我在我的服务器上创建的一个新文件。它具有标准的 666 权限。一旦我将权限设置为 644，一切都很顺利。

# objective-c - 如何在 NSMutableArray 中存储和检索数组

> ID：12053489
> 
> 赞同：1
> 
> 时间：2012-08-21T11:04:11.127
> 
> 标签：objective-c, ios, nsmutablearray

你好朋友我想将 NSMutableAray 存储在 NSMutableAray 中并想检索它。我可以存储它但无法访问它。我的代码如下：

```
NSMutableArray *muteArray;
NSMutableArray *muteArray_Master;
NSMutableArray *mutArrar_Level1;            

NSArray *Children = [dictionary objectForKey:@"Children"];

if (Children.count > 0) {
    muteArray = [NSMutableArray arrayWithArray:Children];
}

muteArray_Master= [[NSMutableArray alloc] init];
mutArrar_Level1= [[NSMutableArray alloc] init];

[muteArray_Master addObject:muteArray]; // muteArray_Master array added one object successfully 

i = [muteArray_Master count]; // Here I have i=1

mutArrar_Level1 = [NSMutableArray arrayWithArray:[muteArray_Master objectAtIndex:i-1]]; // But here mutArrar_Level1 not producing correct data.still it is with 0 objects 
```

所以我的要求是存储多个 NSMutableArray`NSMutableArray`并在另一个中访问。

谢谢迪帕克 R

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T11:18:39.910

首先，我很害怕告诉你，你需要处理你的变量名。请参阅[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CodingGuidelines/CodingGuidelines.html#//apple_ref/doc/uid/10000146-SW1](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CodingGuidelines/CodingGuidelines.html#//apple_ref/doc/uid/10000146-SW1)

无论如何，这是将多个数组添加到数组中的方法：

```
NSMutableArray *parentArray = [[NSMutableArray alloc] init];

for (int i = 0; i < 10; i++) {
    NSArray *childArray = [NSArray arrayWithObjects:
        [NSString stringWithFormat:@"a-%i", i], 
        [NSString stringWithFormat:@"b-%i", i], 
        [NSString stringWithFormat:@"c-%i", i],
        nil];

    [parentArray addObject:childArray];
} 
```

这就是您再次访问所有这些的方式：

```
for (int i = 0; i < 10; i++) {
    NSArray *childArray = [parentArray objectAtIndex:i];
    NSLog(@"Child Array %i", i);

    for (NSString *item in childArray) {
        NSLog(@"  Item: %@", item);
    }
} 
```

真的很容易:)

# android - 带有 Content-Length 的 Android Http 服务器 HEAD 方法

> ID：12053492
> 
> 赞同：1
> 
> 时间：2012-08-21T11:04:21.403
> 
> 标签：android, http

我正在尝试创建这样的响应

-------------请求----------- HEAD /external/images/media/21.jpg HTTP/1.0

getcontentFeatures.dlna.org: 1

主机：192.168.1.130:57645

------------我想要的答案------- HTTP/1.1 200 OK

日期：格林威治标准时间 2012 年 8 月 21 日星期二 10:24:59

缓存控制：无缓存

transferMode.dlna.org：流媒体

contentFeatures.dlna.org：DLNA.ORG_PN=JPEG_LRG；DLNA.ORG_OP=01；DLNA.ORG_CI=0

内容类型：图片/jpeg

最后修改时间：2012 年 2 月 25 日星期六 15:11:58 GMT

内容长度：60909

## 接受范围：字节

但是当我尝试输入“Content-Length：60909”时遇到问题，如果我不输入“Content-Length 标头已经存在”，则会引发此异常，如果我不输入标头 Content-Length 始终为 0，那么这不是我想要的。

## 这是我的代码：

```
public void handle(HttpRequest request,
                   HttpResponse response,
                   HttpContext context) throws HttpException, IOException {

String method = request.getRequestLine().getMethod().toUpperCase(Locale.ENGLISH);
if(method.equals("HEAD"))
{
String objectId = getUrlBuilder().getObjectId(request.getRequestLine().getUri());
        DIDLObject obj = findObjectWithId(objectId);
        if (obj == null) {

            response.setStatusCode(HttpStatus.SC_NOT_FOUND);
            return;
        }
MimeType mimeType = getMimeType(obj);
        long sizeInBytes = getSizeInBytes(obj);

        response.setHeader("Cache-control", "no-cache");
        response.setHeader("transferMode.dlna.org", "Streaming");
        String aMimeType = mimeType.toString();
        String dlnaspec="";

        if (aMimeType.equals("image/jpeg"))
            dlnaspec = "DLNA.ORG_PN=JPEG_LRG";
        else if (aMimeType.equals("audio/mpeg"))
            dlnaspec = "DLNA.ORG_PN=MP3";
        else if (aMimeType.equals("audio/L16") || aMimeType.equals("audio/wav"))
            dlnaspec = "DLNA.ORG_PN=LPCM";

        response.setHeader("contentFeatures.dlna.org", dlnaspec+";DLNA.ORG_OP=01;DLNA.ORG_CI=0");

        response.setHeader("Content-Type", mimeType.toString());
        response.setHeader("Accept-Ranges", "bytes");
        response.setHeader("Content-Length", String.valueOf(sizeInBytes));
        response.setStatusCode(HttpStatus.SC_OK); 

 }

 } 
```

* * *

有任何想法吗？我也尝试过以这种方式放置实体

```
ByteArrayInputStream stream=new ByteArrayInputStream(new byte[(int) sizeInBytes]);
InputStreamEntity entity = new InputStreamEntity(stream, sizeInBytes); 
response.setEntity(entity); 
```

但问题是 HEAD 方法没有主体，所以这种方法无效

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T19:23:01.257

我找到了一种解决方案，实现我自己的 ResponseContent 并支持用户内容长度，这就是代码

```
public class MyCustomResponseContent implements HttpResponseInterceptor 
{

private final boolean overwrite;

/**
* Default constructor. The <code>Content-Length</code> or <code>Transfer-  Encoding</code>
* will cause the interceptor to throw {@link ProtocolException} if already present in the
* response message.
*/

public MyCustomResponseContent() 
{
    this(false);
}

/**
* Constructor that can be used to fine-tune behavior of this interceptor.
*
* @param overwrite If set to <code>true</code> the <code>Content-Length</code> and
* <code>Transfer-Encoding</code> headers will be created or updated if already present.
* If set to <code>false</code> the <code>Content-Length</code> and
* <code>Transfer-Encoding</code> headers will cause the interceptor to throw
* {@link ProtocolException} if already present in the response message.
*
* @since 4.2
*/

public MyCustomResponseContent(boolean overwrite) 
{
    super();
    this.overwrite = overwrite;
}

/**
* Processes the response (possibly updating or inserting) Content-Length and Transfer-Encoding headers.
* @param response The HttpResponse to modify.
* @param context Unused.
* @throws ProtocolException If either the Content-Length or Transfer-Encoding headers are found.
* @throws IllegalArgumentException If the response is null.
*/

public void process(final HttpResponse response, final HttpContext context) throws HttpException, IOException 
{
    if (response == null) 
    {
        throw new IllegalArgumentException("HTTP response may not be null");
    }
    if (this.overwrite) 
    {
        response.removeHeaders(HTTP.TRANSFER_ENCODING);
        response.removeHeaders(HTTP.CONTENT_LEN);
    }
    else 
    {
        if (response.containsHeader(HTTP.TRANSFER_ENCODING)) 
        {
            throw new ProtocolException("Transfer-encoding header already present");
        }
        /*
        if (response.containsHeader(HTTP.CONTENT_LEN)) 
        {
            throw new ProtocolException("Content-Length header already present");
        }
        */
    }
    ProtocolVersion ver = response.getStatusLine().getProtocolVersion();
    HttpEntity entity = response.getEntity();
    if (entity != null) 
    {
        long len = entity.getContentLength();
        if (entity.isChunked() && !ver.lessEquals(HttpVersion.HTTP_1_0)) 
        {
            response.addHeader(HTTP.TRANSFER_ENCODING, HTTP.CHUNK_CODING);
        }
        else if (len >= 0) 
        {
            response.addHeader(HTTP.CONTENT_LEN, Long.toString(entity.getContentLength()));
        }
        //  Specify a content type if known
        if (entity.getContentType() != null && !response.containsHeader(HTTP.CONTENT_TYPE )) 
        {
            response.addHeader(entity.getContentType());
        }
        //  Specify a content encoding if known
        if (entity.getContentEncoding() != null && !response.containsHeader(HTTP.CONTENT_ENCODING)) 
        {
            response.addHeader(entity.getContentEncoding());
        }
    }
    else if (!response.containsHeader(HTTP.CONTENT_LEN))            
    {
        int status = response.getStatusLine().getStatusCode();
        if (status != HttpStatus.SC_NO_CONTENT && status != HttpStatus.SC_NOT_MODIFIED && status != HttpStatus.SC_RESET_CONTENT) 
        {
            response.addHeader(HTTP.CONTENT_LEN, "0");
        }
    }       
} 
```

}

# r - r中的排列图

> ID：12053493
> 
> 赞同：2
> 
> 时间：2012-08-21T11:04:23.133
> 
> 标签：r, permutation, diagram, figure

我有一个 data.frame 显示站点 x 处的变量的所有可能组合与站点 y 处的变量之​​间的关系强度。

```
set.seed(1410)
df<-data.frame(
"site.x"=c(rep("a",4),rep("b",4),rep("c",4),rep("d",4)),
"site.y"=c(rep(c("e","f","g","h"),4)),
"bond.strength"=sample(1:100,16, replace=TRUE))

   site.x site.y bond.strength
    a      e            27
    a      f            54
    a      g            94
    a      h            15
    b      e            58
    b      f            50
    b      g            67
    b      h            51
    c      e            58
    c      f             5
    c      g            48
    c      h            32
    d      e             5
    d      f            13
    d      g            84
    d      h            39 
```

我需要一个图表，可以在一个图中总结 df 中的信息。我在想也许像这样的排列图......

![在此处输入图像描述](../Images/7c91561476638a143ed1257e27ecca60.png)

有什么建议我会怎么做这样的事情吗？非常感谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T11:42:59.167

这使用您的数据给出了类似的结果：

```
library(igraph)
df<-graph.data.frame(df)
V(df)$names <- c("a","b","c","d","e","f","g","h")
layOUT<-data.frame(x=c(rep(1,4),rep(2,4)),y=c(4:1,4:1))
E(df)[ bond.strength < 101 ]$color <- "red"
E(df)[ bond.strength < 67 ]$color <- "yellow"
E(df)[ bond.strength < 34 ]$color <- "green"
V(df)$color <- "white"
l<-as.matrix(layOUT)
plot(df,layout=l,vertex.size=10,vertex.label=V(df)$names,
edge.arrow.size=0.01,vertex.label.color = "black") 
```

![在此处输入图像描述](../Images/5dc63a3334fd4d1952d043eaf3e119f9.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T12:41:17.640

这是一种使用基本 R 的方法，并且应该适用于具有相同结构的任何数据帧。请注意，我将原始样本中的因子更改为字符串。

```
set.seed(1410)
df<-data.frame(
  "site.x"=c(rep("a",4),rep("b",4),rep("c",4),rep("d",4)),
  "site.y"=c(rep(c("e","f","g","h"),4)),
  "bond.strength"=sample(1:100,16, replace=TRUE), stringsAsFactors=FALSE)

Placement <- data.frame(site=c(unique(df$site.x),unique(df$site.y)), x = NA, y = NA, stringsAsFactors=FALSE)

Placement$x <- ifelse(Placement$site %in% unique(df$site.x), 0, 1)

Placement$y[Placement$x==0] <- seq(1,0,length=sum(Placement$x==0))
Placement$y[Placement$x==1] <- seq(1,0,length=sum(Placement$x==1))

cols <- rep("red",nrow(df))
cols[df$bond.strength < 33] <- "green"
cols[df$bond.strength >= 33 & df$bond.strength < 66] <- "yellow"

# Empty plot:
par(mar=c(0,0,0,0))
plot(1,type="n",xlim=c(-0.2,1.6),ylim=c(0,1),bty="n",axes=FALSE,xlab="",ylab="")
abline(v=c(0,1))
text(Placement$x + ifelse(Placement$x==0,-0.1,0.1),Placement$y,Placement$site)

for (i in 1:nrow(df))
{
  lines(c(0,1),Placement$y[c(match(df$site.x[i],Placement$site),match(df$site.y[i],Placement$site))],col=cols[i],lwd=2)
}

legend("right",col=c("green","yellow","red"),lty=1,lwd=2,legend=c("0-33","33-66","66-100"),title="bondstrength",cex=1.5,bty="n") 
```

![在此处输入图像描述](../Images/b1d16d862175efbfcc774aae7f42eac6.png)

# java - 如何最有效地在 LinkedList 中找到最大和最小元素？

> ID：12053500
> 
> 赞同：1
> 
> 时间：2012-08-21T11:04:59.890
> 
> 标签：java, data-structures

例如，我在 Java 中有一个链表，`LinkedList<T> list = new LinkedList<T>();`我需要最有效地找到其中的最大/最小元素，我该怎么做？

如何使用`Collections.max()`函数从我的链表中查找最大元素？这个函数的时间复杂度是多少？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T11:06:40.660

时间复杂度是`O(n)`如果您希望它更低，例如`O(1)`您需要使用不同的数据结构，例如 TreeSet。

> 我如何将 Collections.max() 用于 LinkedList

```
List<Integer> list = ...
Integer max = Collections.max(list); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T11:09:47.957

```
ArrayList<Integer> numbers = new ArrayList<Integer>();
/* fill with values */
Integer max = Collections.max(numbers); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T11:15:30.747

**Java 文档**

> 此方法迭代整个集合，因此它需要与集合大小成正比的时间。（在））

**用法**

```
public class Test
{
  public static void main(String args[])
  {
    // create an LinkedList object
    LinkedList<Integer> list = new LinkedList<Integer>();

    // Add elements to LinkedList
    list.add(1);
    list.add(2);
    list.add(3);
    list.add(4);
    list.add(5);

    //Use Max Method
    System.out.println(Collections.max(list));
}
} 
```

* * *

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-22T18:28:22.363

您还可以使用`stream.max()`获取 LinkedList 的最大值

```
LinkedList<Integer> linkedList = new LinkedList<>();

linkedList.add(1); linkedList.add(2);
linkedList.add(3); linkedList.add(4);

linkedList.stream().max(Integer::compareTo).ifPresent(System.out::println);

Output: 4 
```

# .htaccess - 如何为具有“？”的 URL 设置 301 重定向 像 URL 中的字符？

> ID：12053501
> 
> 赞同：1
> 
> 时间：2012-08-21T11:05:00.430
> 
> 标签：.htaccess, redirect, http-status-code-301, http-redirect

我想重定向所有具有`id`after的 URL `'emailthisone?'`。

例如L：

`http://news4u.com/emailmeone?id=1234'`. 访问此 url 时，必须将其重定向到`http;//news4u.com/new/emailmeone?id=1234`.

我试图设置`RedirectMatch 301 /emailmeone?(.*) http://news4u.com/new/emailmeone$1`但即使“？”也会起作用 在“emailmeone”之后。

如何实现它。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T11:30:05.280

如果您使用`Redirect`or `RedirectMatch`，尽管查询字符串会自动附加，但不会检查查询字符串是否实际上是`id=something`：

```
RedirectMatch 301 ^/emailmeone$ /new/emailmeone 
```

`?id=1234`会自动附加到目标的末尾。`id`如果你使用 mod_rewrite ，你可以检查一下：

```
RewriteEngine On
RewriteCond %{QUERY_STRING} ^id=[0-9]
RewriteRule ^emailmeone$ /new/emailmeone [L,QSA] 
```

# qt - QFileSystemModel 和 QSortFilterProxyModel 不能很好地协同工作？

> ID：12053502
> 
> 赞同：2
> 
> 时间：2012-08-21T11:05:09.437
> 
> 标签：qt

我发现 QSortFilterProxyModel 在与 QFileSystemModel 一起使用时无法正确过滤。有时它在视图中什么都没有。谁能指出我错在哪里？

```
#include "MainWindow.h"
#include "ui_MainWindow.h"
#include <QFileSystemModel>
#include <QSortFilterProxyModel>

MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);
    QFileSystemModel *fsm = new QFileSystemModel(this);
    fsm->setRootPath(".");

    QSortFilterProxyModel *sfpm = new QSortFilterProxyModel();
    sfpm->setDynamicSortFilter(true);
    sfpm->setSourceModel(fsm);

    ui->tableView->setModel(sfpm);
    ui->tableView->setRootIndex(sfpm->mapFromSource(fsm->index(".")));

    sfpm->setFilterRegExp(QRegExp(".*cpp"));
    sfpm->setFilterKeyColumn(0);
}

MainWindow::~MainWindow()
{
    delete ui;
} 
```

在上面的代码中，如果我使用 QRegExp(".*")，它会显示当前路径中的所有文件。您可以创建一个简单的项目来测试它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T02:16:39.390

我想我已经找到了正确的解决方案。我需要继承 QSortFilterProxyModel 来做一些关于“source_parent”的事情：

```
class MySortFilterProxyModel : public QSortFilterProxyModel
{
protected:
    virtual bool MySortFilterProxyModel::filterAcceptsRow(
            int source_row, const QModelIndex &source_parent) const{
        QFileSystemModel *sm = qobject_cast<QFileSystemModel*>(sourceModel());
        if (source_parent == sm->index(sm->rootPath())) {    
            return QSortFilterProxyModel::filterAcceptsRow(source_row, source_parent);
        } 
        return true;            
    }
}; 
```

# jquery - jQuery 将内容从一个 div 移动到同级

> ID：12053503
> 
> 赞同：1
> 
> 时间：2012-08-21T11:05:29.750
> 
> 标签：jquery, slider, append

我有一个从屏幕流出的 div 网格，我有 prev 和 next 按钮来控制这些内容。

基本上，在每个 div 内部我都有一些内容，当用户单击 prev 时，我希望所有内容从它所在的 div 移动到下一个 div，我尝试了一些代码，但我不确定是否我在正确的轨道上...

```
<div class="box"><img src="../images/two.jpg" alt="" /></div>
<div class="box"><p>Lorum ipsum</p></div>
<div class="box"><img src="../images/three.jpg" alt="" /></div>

$('.prev').click(function(){                
   $('.box').each(function(){
      var $destination = $(this).prev('.box');
      $(this).html().appendTo($destination);
   });
}); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T11:10:30.610

使用时`appendTo()`，**将**div 的内容添加到目标 div。如果您希望目标 div 中的数据将被当前 div 中的数据替换，则 apppendTo() 不是您需要的 - 但是 `$(destination).text($(this).html())`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T12:11:14.013

我不太确定您的预期结果到底是什么。但是，我理解这一点的方式是每个 div 中都有内容，如果单击上一个，每个 div 的内容将移动到它之前的 div 中，如果单击下一个，每个 div 的内容将移动到它旁边的一个。

我使用了这样的 HTML（为了清楚起见，我添加了更多的 div）：

```
<div class="box"></div>
<div class="box"></div>
<div class="box"><img src="http://www.fileden.com/files/2012/6/19/3318010/Eraser.png" alt="" /></div>
<div class="box"><p>Lorum ipsum</p></div>
<div class="box"><img src="http://www.fileden.com/files/2012/6/19/3318010/Script.png" alt="" /></div>
<div class="box"></div>
<div class="box"></div> 
```

以及像这样的下一个/上一个动作：

```
var $steps = $('.box');

$('.prev').click(function() {
    for (i = 0; i < $steps.length; i++) {
        if (i > 0) {
            var $lastStep = $($steps[i - 1]);
            var $currentStep = $($steps[i]);

            $lastStep.html($currentStep.html());
            $currentStep.html('');
        };
    };
});

$('.next').click(function() {
    for (i = $steps.length-1; i > -1; i--) {
        if (i + 1 < $steps.length) {
            var $currentStep = $($steps[i]);
            var $nextStep = $($steps[i + 1]);

            $nextStep.html($currentStep.html());
            $currentStep.html('');
        }
    };
}); 
```

您所看到的现在所有内容都一起移动到上一组或下一组 div。

如果那不是您要找的东西，请告诉我。此外，您将需要一些指示何时停止上一个或下一个，否则您将丢失所有内容。

### [**演示**](http://jsfiddle.net/eJM3c/1/)- 将所有内容移动到上一个和下一个元素

# ruby-on-rails - AngularJS - 如何从 Rails 后端获取 PDF（或其他二进制文件）？

> ID：12053504
> 
> 赞同：3
> 
> 时间：2012-08-21T11:05:33.870
> 
> 标签：ruby-on-rails, angularjs

我正在编写一个玩具应用程序来熟悉 AngularJS。这个应用程序有一个 Rails 后端。

我不知道如何制作客户端 angularjs 应用程序，处理后端在点击特定 URL 时发送的 PDF (http://localhost:3000/contacts.pdf)

当直接在浏览器中输入上述 URL 时，服务器会回复一个 PDF，浏览器会询问如何处理它（下载或打开）。

当通过 angularjs 应用程序完成同样的事情时，我可以看到文件在响应中返回。这就是我坚持的地方。

如何在客户端应用程序中复制相同的行为？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T11:44:59.577

一种方法是在 HTML 中使用锚标记并将链接作为控制器变量，即。`<a href="{{link}}">Download</a>`并在控制器中放入 $scope.link = "http://localhost..."; （如果需要多个链接，则为数组）。

如果这不是您想要的，请添加进一步说明。

# javascript - 带有 Javascript 的下载窗口

> ID：12053507
> 
> 赞同：0
> 
> 时间：2012-08-21T11:05:36.073
> 
> 标签：javascript, html, dom-events, html-select

如何获取以下代码的下载框。即，当用户单击下载超链接时，无论浏览器类型如何，都应出现下载窗口。我尝试了以下方法：

```
<a href="javascript:void(0);" onclick="download_tagged_file('{{cnt.id}}');">Download</a>< 
```

```
function download_tagged_file(cntid)
{
  var snddata = {};
  snddata["cntid"] = cntid;
  $.post("/tagging/download_tagged_file/", snddata, 
     function callbackHandler(data, textstatus) 
     {
        if (data.status == 1)
        {
            var url = data.filename;
            url = "http://127.0.0.1:8000" + url
           //var htm = '<iframe style="display: none;" id="if1" src="'+url+'"></iframe>';
           //alert(url);
           window.open(url, 'download_window', 'directories=0,status=0,scrollbars=0,resizeable=0,width=1,height=1,top=0,left=0');
           window.focus();
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T11:21:03.520

~~我真的不明白你想要做什么，有什么问题：~~

 ~~```
<a href="http://127.0.0.1:8000/{{cnt.id}}">Download</a> 
```~~ 

~~**更新：**~~

 ~~您需要控制服务器端的内容处置。上面的 html 是你需要的，但是你的服务器在提供文件时需要发送这个头：

```
Content-Disposition: attachment; filename=<file name.ext> 
```~~

# android - Android 游戏 - 不同手机上的 Sprite 速度似乎不同

> ID：12053509
> 
> 赞同：1
> 
> 时间：2012-08-21T11:05:42.563
> 
> 标签：android, performance, sprite

我正在surfaceView 中开发一个android 游戏。当我在不同设备上测试游戏时，playerSprite 在某些设备上的运行速度似乎比其他设备快。以编程方式设置播放器速度时如何适应不同的设备？

如果（MainActivity.slowSpeed == true）{

```
 speedX = (float) (canvasWidth/266);

             speedY = (float)(canvasHeight/150);

         }

         if(MainActivity.fastSpeed == true){

             speedX = (float) (canvasWidth/192);

             speedY =(float) (canvasHeight/108);

         } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T11:20:19.237

我只会测量`onDraw`通话之间的时间，如果太短则等待。

```
while( t1 - t0 < MINIMUM_FRAME_TIME ){
    // you could put a short wait(#) here if you wanted.
    t1 = System.currentTimeMillis();
}
t0 = t1; 
```

t0、t1 和 MINIMUM_FRAME_TIME 是长值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T11:49:25.917

当帧率不稳定时（例如每秒 30 或 60 帧），您应该根据您实现的实际帧率计算出的系数来补偿游戏中的每个移动元素。

```
 achievedFramerate = 34.0f;    //The framerate you dynamically measure
 baseFramerate = 30.0f;        //The framerate at which your game is meant to be played
 framerateAdjustFactor = baseFramerate / achievedFramerate; 
```

你在游戏中的某个地方使用它：

```
 playerX += speedX * framerateAdjustFactor; 
```

因此，无论哪里有东西在移动，你都可以通过这个因素来补偿移动。这样一来，在每秒 60 帧的机器上，每帧的移动速度都会减慢两倍，从而导致游戏以完全相同的速度移动。

确保您的帧率计算在每一帧都完成，并且必须以足够的精度完成。

# c++ - 在选项卡 C++ 中创建窗口

> ID：12053511
> 
> 赞同：0
> 
> 时间：2012-08-21T11:05:48.953
> 
> 标签：c++, tabs, window

我用 createwindow 创建选项卡。我有 2 个选项卡项，我想在 2 个选项卡项中创建一些静态窗口。我使用 createwindow 和 parent 是选项卡的句柄。但是子窗口存在于 tab1 和 tab2 中。我希望 2 个标签项具有不同的内容。那我该怎么做。

是否有另一种方法来创建属于特定 tab1 或 tab 2 的静态控件...不是来自创建窗口的选项卡的 hwnd。我不知道该怎么做所以这是我的解决方案

我使用win api

谢谢

这是我的一些代码

```
TabCtrl_InsertItem(hwndTab,0,&tcitem);
TabCtrl_InsertItem(hwndTab,1,&tcitem);    
hwndTab_1_1_1 = CreateWindow(L"BUTTON",L"sample",WS_CHILD|WS_VISIBLE,0,29,100,50,hwndTab,(HMENU)4,hInstance,NULL);
        hwndTab_1_2_1 = CreateWindow(L"BUTTON",L"sample2",WS_CHILD|BS_AUTOCHECKBOX,20,80,100,50,hwndTab,(HMENU)4,hInstance,NULL); 
```

我正在使用这个：

```
case WM_NOTIFY:
    if (((LPNMHDR)lParam)->code == TCN_SELCHANGE) {
        switch(TabCtrl_GetCurSel(hwndTab)) {
            case 0:
                ShowWindow(hwndTab_1_1_1,SW_SHOW);

                ShowWindow(hwndTab_1_2_1,SW_HIDE);
                break;

            case 1: //
                ShowWindow(hwndTab_1_1_1,SW_HIDE);

                ShowWindow(hwndTab_1_2_1,SW_SHOW);
                break;
            default: return DefWindowProc(hwnd, Message, wParam, lParam);
       }

   }
   else {
       return DefWindowProc(hwnd, Message, wParam, lParam);
   }
   break; 
```

我需要与这些代码相同的代码。如果我们有很多子窗口，我不想使用太多显示和隐藏太多时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T01:23:42.690

你可以这样尝试：

假设您有 3 个标签页。

T *pTabPage[3]; 指向您的 3 个标签页；

诠释 nCurrentPage; 保存您当前的标签页。

当你想改变标签页时，

1.隐藏保存在nCurrentPage中的“当前页面”： ShowWindow(pTabPage[nCurrentPage], SW_HIDE);

2.获取真正的当前页面：nCurrentPage = GetCurSelect();

3.显示真正的当前页面：ShowWindow(pTabPage[nCurrentPage], SW_SHOW);

代码不对，只是为了说明方法

希望能帮到你！

# c# - 如何解决“错误代码为 0x80070001”？

> ID：12053512
> 
> 赞同：4
> 
> 时间：2012-08-21T11:05:50.810
> 
> 标签：c#, asp.net, asp.net-mvc, iis, web

以下堆栈跟踪出现以下错误。我该如何解决这个问题？

> 错误代码是 0x80070001

### 堆栈跟踪

```
[Type] Error | [Source] AccountsServices:An error occurred while communicating with the remote host. The error code is 0x80070001\. | [Category] None | [Event] 0 | [User] | [Computer] VM2014.conduit.local | [Description] Message was not found: 0
_Duration=207593.75
Message:An error occurred while communicating with the remote host. The error code is 0x80070001.
StackTrace: at System.Web.Hosting.IIS7WorkerRequest.RaiseCommunicationError(Int32 result, Boolean throwOnDisconnect)
at System.Web.Hosting.IIS7WorkerRequest.ReadEntityCoreSync(Byte[] buffer, Int32 offset, Int32 size)
at System.Web.HttpRequest.GetEntireRawContent()
at System.Web.HttpRequest.FillInFormCollection()
at System.Web.HttpRequest.get_Form()
at System.Web.HttpRequest.FillInParamsCollection()
at System.Web.HttpRequest.GetParams()
at BrandToolbar.Web.Profile.ConduitProfileModule.UpdateVar() in d:\conduit\RnD\Server\Infrastructure\Providers\Web\Profile\Dev\ConduitProfileModule.cs:line 119
at System.Web.HttpApplication.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T11:11:56.747

这不是您的应用程序代码的问题，但可能是您的环境配置。你在使用虚拟机吗？

您可能会也可能不会发现此论坛帖子有帮助：[http ://social.technet.microsoft.com/Forums/en-US/winserverhyperv/thread/698e2b2b-af59-4848-b041-4fbb11c5bb6b](http://social.technet.microsoft.com/Forums/en-US/winserverhyperv/thread/698e2b2b-af59-4848-b041-4fbb11c5bb6b)

# marklogic - MarkLogic 中的 cts:search() 返回一个空序列

> ID：12053516
> 
> 赞同：0
> 
> 时间：2012-08-21T11:05:59.047
> 
> 标签：marklogic

我正在使用 MarkLogic 来查询相对较大的 xml 数据集。现在我正在使用两组这样的查询：

> 1.  xdmp:estimate(cts:search(fn:doc(), cts:and-query(($query, $text-query, $sent-query))))
>     
>     
> 2.  xdmp:estimate(cts:search(fn:doc(), cts:and-not-query(cts:and-query(($query, $text-query)), $sent-query)))

其中， **$text-query := cts:word-query("coke")**

**$sent-query := cts:and-query((cts:element-range-query(xs:QName("score_id"),">=",$lowValue), cts:element-range-query(xs:QName ("score_id"),"<",$hiValue)))**

**$query := cts:word-query("健怡可乐")**

**$lowValue := 13264683002210000000;**

**$hiValue := 13264683002211000000;**

对于这两个集合（查询号 1 和 2），我得到了一些**计数**，但是当我删除`xdmp:estimate`部分时，`cts:search()`查询**1.**正在返回 xmls，其中查询号。2，我得到一个空序列。

我的问题是，如果`cts:search`没有返回任何 xml，那么如何`xdmp:estimate`计算**查询号的节点。2** ??

是`cts:and-not-query`不是不舒服`cts:element-range-query`，虽然？？？

注意我得到了一些计数，`xdmp:estimate`没有任何错误。范围索引是在字段“ **score_id** ”上创建的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T16:37:51.407

尝试将`unfiltered`选项添加到`cts:search`调用中。

[http://docs.marklogic.com/5.0doc/docapp.xqy#display.xqy?fname=http://pubs/5.0doc/apidoc/SearchBuiltins.xml&category=SearchBuiltins&function=cts:search](http://docs.marklogic.com/5.0doc/docapp.xqy#display.xqy?fname=http://pubs/5.0doc/apidoc/SearchBuiltins.xml&category=SearchBuiltins&function=cts:search)

有可能`cts:search`返回空，因为片段与索引匹配但被过滤为误报。未经过滤的结果应该可以帮助您确定这是否正确，或者可能是错误的证据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T05:00:13.407

特别是，“估计”将仅使用索引。如果您没有“快速短语”索引，则无法直接从索引中判断“健怡可乐”是否在文档中——它将改为使用查询的“索引解析”阶段中的索引来查找所有带有“饮食”和“可乐”的文件。稍后对于真正的查询，它将“过滤”这些候选文档，以查看这两个词是否实际上彼此相邻。

请参阅 MarkLogic 搜索开发人员指南，特别注意“索引解析”和“过滤”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T17:44:45.990

问题可能来自于`xdmp:estimate`它显示了可能有命中的片段数量（也有误报），而不仅仅是实际有。

尝试使用`fn:count`代替，`xdmp:estimate`因为它每次都会产生正确的结果，唯一的问题是它比`xdmp:estimate`

有关详细信息： [MarkLogic Server：搜索开发人员指南第 11 章](http://developer.marklogic.com/pubs/5.0/books/search-dev-guide.pdf)

# postgresql - Postgresql：使用主键备份和恢复一些表

> ID：12053517
> 
> 赞同：7
> 
> 时间：2012-08-21T11:06:00.337
> 
> 标签：postgresql

我有一个包含 70 个表的生产 Postgresql 数据库。其中有些很大，有些很小。我在本地机器上有本地 Postgresql 数据库。我想让我的一些本地数据库表的内容与生产表的内容相同。如果我只是在生产数据库上使用 pgAdmin 备份一些表，然后尝试在我的本地机器上恢复，我会遇到约束错误。因为例如表 A 有表 B 的外键等等。

如何从生产数据库中复制一些表并在我的本地机器上正常恢复，该机器已经有方案和表并且没有约束错误？

Ps 我不能只转储所有生产数据库，因为有些表**非常大**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T11:57:11.963

转储完整的生产数据库，但在大表的情况下没有数据：

```
$ pg_dump -t <VERY_BIG_TABLE_NAME> -s 
```

如果您还想要数据，请避免使用该`-s`选项。由于您必须重复这 70 次，因此更快的解决方案是将表划分为模式：

```
$ pg_dump -n <SCHEMA_NAME_WITH_VERY_BIG_TABLES> -s
$ pg_dump -n <SCHEMA_NAME_WITH_SMALL_TABLES> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T11:48:22.163

我不确定我是否理解，但如果您遇到约束检查错误，您可以禁用外键约束，恢复表并再次启用它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T13:05:22.327

1.  在本地数据库中重新创建表结构，但为有问题的`DEFERRABLE INITIALLY DEFERRED`外键添加选项`CONSTRAINT`
2.  使用 pg_dump 将您选择的表**数据**从生产数据库转储到文件并在开头写入：`BEGIN;`. 在文件末尾追加： `UPDATE TABLE problem_no_1 SET fkey_column = NULL;`对于导致问题的每个 FK 列，当然`COMMIT;`在最后
3.  在本地数据库上执行此文件

# javascript - 如何使用淡出进行迭代？

> ID：12053521
> 
> 赞同：-2
> 
> 时间：2012-08-21T11:06:15.320
> 
> 标签：javascript, jquery

我想改进这段代码，使每个图像独立出现并淡出。

这一个面临一个问题，它正在快速迭代，所以只出现最后一个图像并进行淡出。

```
jQuery.each(
slidesArray, function (index, value) {

   var linkHref = value[1];
   var imageSource = value[0];;

   $("#slider").html("<a href='" + linkHref + "'><img src='" +
                     imageSource + "'></a>").fadeOut(5000);

}); 
```

你能帮助我吗 ？请注意，图像应分别进行动画处理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T11:19:29.440

这是一个小 jQuery 插件，它会有所帮助：

```
jQuery.slowEach = function( array, interval, callback ) {
    if( ! array.length ) return;
    var i = 0;
    next();
    function next() {
        if( callback.call( array[i], i, array[i] ) !== false )
            if( ++i < array.length )
                setTimeout( next, interval );
    }
};
jQuery.fn.slowEach = function( interval, callback ) {
    jQuery.slowEach( this, interval, callback );
}; 
```

包括上面的插件。它添加了一个`slowEach`方法和函数：`$(...).slowEach(interval,callback)`和`$.slowEach(interval,delay,callback)`. 它迭代一个对象或 jQuery 选择，`delay`每次迭代后等待几毫秒。
从上面编辑您的代码以使用`slowEach`：

```
jQuery.slowEach(
slidesArray, 5000, function (index, value) {
  var linkHref = value[1];
  var imageSource = value[0];
   $("#slider").html("<a href='" + linkHref + "'><img src='" + imageSource + "'></a>").fadeOut(5000);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T11:27:07.560

我没有测试过这个，但理论上应该可以

```
function fader(i){
    $("#slider").css('display', '');
    if (i == slidesArray.length){
        return;
    }
    var linkHref = slidesArray[i][1];
    var imageSource = slidesArray[i][0];
    i++;
    $("#slider").html("<a href='" + linkHref + "'><img src='" +
                      imageSource + "'></a>").fadeOut(5000, fader(i));
}
fader(0); 
```

**编辑：**我已经测试过了，似乎工作正常。这是一个[类似的使用演示](http://jsfiddle.net/BDetK/1/)

请注意，无需使用`setTimeout`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-21T11:19:08.613

每次调用 $("#slider").html() 时，都会替换 #slider 的内容。

您要做的不是延迟实际循环，而是要延迟图像的放置[和褪色]。您可以使用 setTimeout 这样做：

jQuery.each (slidesArray,function(index,value) {

```
 var linkHref = value[1];
        var imageSource = value[0];;

        setTimeout(function() {
             $("#slider").html
             (
                "<a href='" + linkHref + "'><img src='"+ imageSource + "'></a>"
             ).fadeOut(5000);
        }, 2000 * index);
    }
); 
```

# html5boilerplate - h5bp 移动构建脚本不会跨 js/lib 文件复制到发布文件夹

> ID：12053522
> 
> 赞同：0
> 
> 时间：2012-08-21T11:06:16.507
> 
> 标签：html5boilerplate

我不确定这是否是 h5bp mobile 或我的 ant 版本或什么的问题 - 但每当我在项目上运行构建脚本时，甚至在新下载的 h5bp mobile 版本上运行 js/lib 文件，例如 jquery 和modernizr 不会复制到发布文件夹。它们确实出现在中间文件夹中，因此构建脚本至少知道它们。由于某种原因，它在非移动版本上运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T16:27:13.733

删除包含的`build`目录并将其替换为来自[github](https://github.com/h5bp/ant-build-script)的最新目录。

不过，您需要更新 中的一些属性`project.properties`（`JS`libs 目录、主 css 文件、..）。

# firefox - Firefox 扩展从扩展文件夹中消失

> ID：12053528
> 
> 赞同：2
> 
> 时间：2012-08-21T11:06:43.313
> 
> 标签：firefox, firefox-addon

我正在尝试开发一个 Firefox 扩展。我创建了一个新的配置文件，并将我的扩展文件夹复制到该`extensions`文件夹​​中，而 Firefox 没有运行。当我运行 Firefox 时，我看到我的扩展文件夹是如何从文件夹中消失的`extensions`，并且 Firefox 在没有扩展的情况下打开。我还尝试创建一个链接，一个与扩展名完全相同的文本文件`em:id`，其中包含文件夹的路径。但是，每次都会发生同样的事情 - 启动 Firefox 时文件会消失。我正在开发 Firefox 14、Mac OS X 10.8 Mountain Lion。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-24T13:45:04.013

您需要先将扩展安装到 Firefox 中。为此，制作源代码的 xpi 文件，将其安装到 firefox 并重新启动它。安装扩展后，您可以开始编辑扩展文件夹内的源文件。在制作 xpi 之前，请确保您`install.rdf`必须`<em:unpack>true</em:unpack>`强制 firefox 解压您的 xpi。**不建议拆包，可能会导致性能问题。**

我首选的方法是使用[Firefox 扩展代理文件](https://developer.mozilla.org/en-US/docs/Setting_up_extension_development_environment#Firefox_extension_proxy_file)，您可以将源代码保存在任何地方，并且仍然可以享受同样的好处。

# php - 模拟 phpMyAdmin 导出功能

> ID：12053529
> 
> 赞同：1
> 
> 时间：2012-08-21T11:06:53.743
> 
> 标签：php, mysql, database, phpmyadmin, export

当您从 phpMyAdmin 导出数据库时，它会返回一个 SQL 文件，其中包含创建表查询以及当前存储的所有表数据和信息。

我想创建一个按钮，将其下载到用户的文件中。

这可能吗，如果可以的话怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T11:09:41.310

您使用 mime 类型的标头，它会建议用户下载文件并输出“动态创建”的 sql 插入代码，该代码将创建整个表。

```
header("Content-type: application/octet-stream");
header("Content-type: application/force-download"); 
```

您应该能够使用[PDO 的 get column meta](http://php.net/manual/en/pdostatement.getcolumnmeta.php)来获取初始生成表 SQL 的列类型。

输出如下所示：

```
<?php
$select = $DB->query('SELECT COUNT(*) FROM fruit');
$meta = $select->getColumnMeta(0);
var_dump($meta);
?>

array(6) {
  ["native_type"]=>
  string(7) "integer"
  ["flags"]=>
  array(0) {
  }
  ["name"]=>
  string(8) "COUNT(*)"
  ["len"]=>
  int(-1)
  ["precision"]=>
  int(0)
  ["pdo_type"]=>
  int(2)
} 
```

然后查询数据库并使用返回的数据为从初始查询返回的每一行生成插入语句。

# c# - 将 .NET 位图对象传递给 COM（DirectShow 过滤器）

> ID：12053534
> 
> 赞同：1
> 
> 时间：2012-08-21T11:07:24.277
> 
> 标签：c#, .net, com, directshow, iunknown

我正在尝试创建一个源过滤器，该过滤器根据一系列图片制作实时视频流。为此，我创建了一个 IUnknown 接口：

```
[ComImport, InterfaceType(ComInterfaceType.InterfaceIsIUnknown), Guid("F18FC642-5BA2-460D-8D12-23B7ECFA8A3D")]
public interface IVirtualCameraFilter_Crop
{
    void SetCurrentImage(Bitmap img);
    ...
}; 
```

在我的程序中，我明白了：

```
pUnk = Marshal.GetIUnknownForObject(sourceFilter);
Marshal.AddRef(pUnk);
filterInterface = Marshal.GetObjectForIUnknown(pUnk) as IVirtualCameraFilter_Crop; 
```

当我传递简单类型时，一切正常。但是当我尝试传递一个 C# Bitmap 对象时，我得到一个错误`unable to cast Com object to <my object type>`。或应用程序因错误 APPCRUSH 而关闭。

```
filterInterface.SetCurrentImage(frame); 
```

我知道这不是正确的方法，但我不知道其他可能的参数传递方式。我试图将 IntPtr 传递给 BitmapData，然后我得到了相同的应用程序迷恋。那么如何将位图传递给 DirectShow 过滤器呢？

结果：完整的代码图片请参考创建界面：

```
[ComImport, InterfaceType (ComInterfaceType.InterfaceIsIUnknown), Guid ("F18FC642-5BA2-460D-8D12-23B7ECFA8A3D")]
public interface IVirtualCameraFilter_Crop
{
    unsafe void SetPointerToByteArr (byte * array, int length);
}; 
```

执行：

```
unsafe public void SetPointerToByteArr (byte * array, int length)
{
    this.array = new byte [length];
    Marshal.Copy (new IntPtr (array), this.array, 0, length);
} 
```

在应用中：

```
byte [] text = ... get data;
unsafe
{
    fixed (byte * ptr = & text [0])
     {
          filterInterface.SetPointerToByteArr (ptr, text.Length); 
     }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:34:31.213

System.Drawing.Bitmap 是.net 类型，不是COM 类型，COM 中没有对应的，所以不能作为COM 接口的参数。

要么使用 COM 接口[IStream](http://msdn.microsoft.com/en-us/library/windows/desktop/aa380034(v=vs.85).aspx)，这在 C# 中不容易使用，因为 .net MemoryStream 没有实现它，或者使用 COM 接口[IPicture](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680761(v=vs.85).aspx)，或者[只是一个字节数组](https://stackoverflow.com/questions/4389598/intptr-to-byte-array-and-back)。

另请注意，您的 DirectShow 过滤器通常会在不是 UI 线程的线程中调用，因此您应该注意在过滤器中放置适当的锁定机制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T08:47:40.420

您不能将 Bitmap 对象直接从 .NET 传递到本机代码。您可以传递 BitmapData IntPtr 但您应该将该数据复制到过滤器 bcs 内的缓冲区中，该指针在您解锁后将无效。传递一个字节数组应该可以正常工作，您可以这样做：

```
 // interface method declaration
 interface IVirtualCameraFilter_Crop
 {
    [PreserveSig]
    int SetImageData([In,MarshalAs(UnmanagedType.LPArray, SizeParamIndex = 1)] byte[] _array,[In] int size);
 }

 // Code implementation
 IVirtualCameraFilter_Crop _filter // your filter interface
 BitmapData _data = // your BitmapLock
 int _size = // your image size while you locking it Width * Height * BPP / 8
 byte[] _array = new byte[_size];
 Marshal.Copy(_data.Scan0,_array,0,_size);
 _filter.SetImageData(_array,_size);
 // Passing IntPtr way will be similar just the changes will be in method declaration in interface 
 [PreserveSig]
 int SetImageData([In] IntPtr _array,[In] int size);
 // This way you can just pass the _data.Scan0 value
 // The C++ interface declaration and handler will be same for both ways

 // C++ interface declaration
 DECLARE_INTERFACE(IVirtualCameraFilter_Crop,IUnknown)
 {
     [PreserveSig]
     STDMETHOD(SetImageData)(LPBYTE _array,long size)PURE;
 }
 //C++ implementation
 STDMETHODIMP CFilter::SetImageData(LPBYTE _array,long size)
 {
    CheckPointer(_array,E_POINTER);
    CopyMemory(_internalArray,_array,size);
    return NOERROR;
 } 
```

过滤器崩溃时的另一件事：
1 - 您没有从给定缓冲区复制数据
2 - 您将数据应用到现有缓冲区而不锁定执行线程
3 - 在 C++ 方法
4 中复制时您没有正确计算数据大小 - 您的结果缓冲区未分配。

实际上我认为你应该尝试在 C# 中完全制作你的过滤器

这是带有示例的 BaseClasses.NET：Pure
[NET DirectShow Filters in Csharp](http://www.codeproject.com/Articles/421167/Pure-NET-DirectShow-Filters-in-Csharp)
这是虚拟相机实现：
[DirectShow Virtual Video Capture Source Filter in C#](http://www.codeproject.com/Articles/437617/DirectShow-Virtual-Video-Capture-Source-Filter-in)

问候，马克西姆。

# node.js - Node.Js 异常处理

> ID：12053537
> 
> 赞同：0
> 
> 时间：2012-08-21T11:07:29.333
> 
> 标签：node.js

在下面的代码中，我能够捕获异常并打印它，但由于某种原因，我的程序在那里中断，它让我重新启动应用程序。我不能在不重新启动的情况下优雅地处理它吗？

```
var checkRecordId = function (recordId)
{

        if (recordId < 0)
            throw new Error ("Record Id can not be 0 or less");

}

var getReport = function (dateRange , recordId)
{

        try
        {
            checkRecordId (recordId);
        }
        catch (err)
        {
            console.log (err);
        }   
} 
```

# forms - Cakephp 2 表单中的安全性

> ID：12053538
> 
> 赞同：4
> 
> 时间：2012-08-21T11:07:36.817
> 
> 标签：forms, security, cakephp

我对 cakephp2 表单的安全性有疑问。假设我们启用了安全组件，并且已经构建了用户身份验证、权限和产品管理系统。

我们需要创建一个 Offer Request 功能，它允许用户请求特定产品的报价。

用户登录并单击“询问”并转到 /offer_requests/add/product_id

* * *

**场景一：**

在 /Views/OfferRequests/add.ctp 中：

```
<?php 
echo $this->Form->create('OfferRequest');
echo $this->Form->input('user_id', 
                         array('value' => $this->Session->read('Auth.User.id'),
                               'type' => 'hidden' ));
echo $this->Form->input('product_id');
echo $this->Form->input('quantity');
echo $this->Form->end(__('Submit'));
?> 
```

**场景二：**

在 /Views/OfferRequests/add.ctp 中：

```
<?php 
echo $this->Form->create('OfferRequest');
echo $this->Form->input('product_id');
echo $this->Form->input('quantity');
echo $this->Form->end(__('Submit'));
?> 
```

在 OfferRequestsController 中添加（）：

```
<?php
$this->request->data['OfferRequest']['user_id'] = $this->Session->read('Auth.User.id');
?> 
```

我的问题是哪种情况更安全，例如防止以其他用户的身份发出虚假请求。对于场景 1，安全组件是否允许通过 Firebug 或其他软件来操作输入值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T14:18:02.453

是的，安全组件添加了自动防止表单篡改：

从[文档](http://book.cakephp.org/2.0/en/core-libraries/components/security-component.html)：

> 通过使用安全组件，您可以自动获得 CSRF 和表单篡改保护。隐藏的令牌字段将自动插入表单并由安全组件检查。除其他事项外，在一段时间不活动后将不接受表单提交，该时间由 csrfExpires 时间控制。

如另一个答案中所述，您可以`fieldsList`在保存数据时使用该选项。但是，使用安全组件，您可以将其添加`user_id`为隐藏字段（场景 1），而不必担心其值被篡改。这将避免在控制器中设置它的必要性（场景 2）。

# sql-server - SQL 服务器约束 - 唯一键或索引？

> ID：12053539
> 
> 赞同：1
> 
> 时间：2012-08-21T11:07:38.270
> 
> 标签：sql-server

我有一张包含所有产品的表格。有 3 种不同类型的产品，所以这些都有自己的表格，比如说`ProductType1, ProductType2, ProductType3`。

`Products`和`ProductType(n)`on之间存在 1-1 关系，但为了进一步约束子表，在每个其他表中使用 a in和 a`ProductId`的附加关系。`ProductId, ProductTypeId``Products``ProductId, ComputedProductTypeId`

这确保了只能将产品添加到单个匹配`ProductType`表中。

问题是这样的。由于 2 表之间已经存在关系`ProductId`，而不是使用 FK 的索引，我可以使用唯一键来约束关系，还是会导致性能问题？

**产品**

```
PK ProductId
FK ProductId, ProductTypeId
 ^
*Add an index for this or unique key constraint?* 
```

**产品类型(n)**

```
PK ProductId
FK ProductID, ComputedProductTypeId (fixed int) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T11:33:24.577

创建索引将是更好的方法。
如果要从主表中删除条目，SQL Server 会查找 FK 关系（如果存在）。因此，在您的复合键（包括 FK）上创建索引将加快该过程。

# networking - em1: 看门狗超时 -- 重置 -- freebsd 8.3 / network down

> ID：12053551
> 
> 赞同：0
> 
> 时间：2012-08-21T11:09:11.503
> 
> 标签：networking, timeout, freebsd, watchdog

我有一个重大问题，我找不到，也找不到头或尾。我已经用谷歌搜索了这个错误，但我没有找到任何相关的解决方案。

问题：

我有大约 8 台服务器，全部运行 freebsd 8.3 p3 / p4。这个文件服务器正在推动大约 300-400 mb/s。

这是第二次发生。网卡似乎死了。我有2个网卡，我可以通过专用网络访问服务器，一切正常，只是公共网络完全关闭。我试过重启网络接口：/etc/rc.d/netif restart && service routing restart | ifconfig em1 down && ifconfig em1 up，但没有成功。

如果我重新启动服务器，我只能恢复连接。

下面是 dmesg.boot 的输出，显示了网卡驱动程序信息。

```
em0: <Intel(R) PRO/1000 Network Connection 7.3.2> port 0xf020-0xf03f mem 0xf7b00000-0xf7b1ffff,0xf7b25000-0xf7b25fff irq 20 at device 25.0 on pci0
em0: Using an MSI interrupt
em0: [FILTER]
em0: Ethernet address: 00:25:90:7a:8e:9f
ehci0: <EHCI (generic) USB 2.0 controller> mem 0xf7b24000-0xf7b243ff irq 16 at device 26.0 on pci0
em1: <Intel(R) PRO/1000 Network Connection 7.3.2> port 0xd000-0xd01f mem 0xf7900000-0xf791ffff,0xf7920000-0xf7923fff irq 16 at device 0.0 on pci3
em1: Using MSIX interrupts with 3 vectors
em1: [ITHREAD]
em1: [ITHREAD]
em1: [ITHREAD]
em1: Ethernet address: 00:25:90:7a:8e:9e

----------------------------

pciconf -lv
em1@pci0:3:0:0: class=0x020000 card=0x000015d9 chip=0x10d38086 rev=0x00 hdr=0x00
    vendor     = 'Intel Corporation'
    device     = 'Intel 82574L Gigabit Ethernet Controller (82574L)'
    class      = network
    subclass   = ethernet
em0@pci0:0:25:0:        class=0x020000 card=0x150215d9 chip=0x15028086 rev=0x05 hdr=0x00
    vendor     = 'Intel Corporation'
    class      = network
    subclass   = ethernet 
```

* * *

我真的很想得到一些帮助来调试和修复这个问题，因为它通常发生在我睡觉的时候，在随机的日子里，它让我发疯。我爱我的睡眠。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T22:17:01.497

这是一个超微服务器，对吧？

猫/var/run/dmesg.boot | grep MSI em0：使用 MSI 中断 em1：使用带有 3 个向量的 MSIX 中断

你的答案可能在这里： http: [//forums.freebsd.org/showthread.php?t=27736](http://forums.freebsd.org/showthread.php?t=27736)

# python - NLTK Brill-Tagger 在 2.5 小时后退出，退出代码为 137。出了什么问题？

> ID：12053555
> 
> 赞同：1
> 
> 时间：2012-08-21T11:09:20.177
> 
> 标签：python, zsh, nltk

我想用 NLTK 的 Brill-Tagger 标记一些文本。但是，脚本会像这样退出：

```
$ ./brill.py
Training Brill tagger on 43005 sentences...
Finding initial useful rules...
zsh: killed     ./brill.py                                  137 
```

谷歌搜索退出代码 137 只显示 bash 有一个退出代码 137 这意味着

```
Exit code 137: The job was killed because it exceeded the time limit. 
```

当我通过调用 limit 检查限制时，我得到以下输出，我猜退出代码不等效：

```
$ limit
cputime         unlimited
filesize        unlimited
datasize        unlimited
stacksize       8MB
coredumpsize    0kB
memoryuse       unlimited
maxproc         30973
descriptors     1024
memorylocked    64kB
addressspace    unlimited
maxfilelocks    unlimited
sigpending      30973
msgqueue        819200
nice            0
rt_priority     0
rt_time         unlimited 
```

另一件事是脚本只运行了两个半小时：

```
$ date && while [1];do if [[ -z `ps -C brill.py | grep brill.py` ]]; then; date;break;fi;done
Mo 20\. Aug 19:54:52 CEST 2012
Mo 20\. Aug 22:30:40 CEST 2012 
```

所以我的问题是：

*   zsh 退出代码记录在哪里？
*   137 是什么意思？
*   我怎样才能让这个过程保持活力？

*编辑*：附加信息

*   **操作系统**：带有 Gnome 的 Debian：`Linux debian 3.2.0-3-amd64 #1 SMP Thu Jun 28 09:07:26 UTC 2012 x86_64 GNU/Linux`
*   **Zsh**：`zsh 4.3.17 (x86_64-unknown-linux-gnu)`
*   **NLTK**：`2.0.1`
*   **蟒蛇**：`Python 2.7.3rc2`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T12:40:11.180

状态 137 表示他已被信号 9（137 = 128 + 9）杀死，这是一个不可阻挡的杀死信号。它不一定是您找到的原因（时间限制）。

如果您的脚本频繁启动某个进程，可能会在 2.5 小时后达到 maxproc 限制？也许它需要太多的内存和oomkiller 启动？`free -m`定期检查输出。

`ulimit -c unlimited`在启动程序之前尝试使用。

# android - 如何将 Robolectric 测试与 Android 测试框架混合使用？

> ID：12053557
> 
> 赞同：0
> 
> 时间：2012-08-21T11:09:32.127
> 
> 标签：android, android-testing, robolectric

我对 Android 测试还很陌生，这真的让我很难过，我发现使用 Android 的仪器测试框架更容易测试一些东西，而使用 Robolectric 的阴影对象更容易测试一些东西。

有没有办法拥有一个混合了 Robolectric 和 Android 测试的测试项目，或者唯一的方法是拥有两个独立的测试项目？

# asp.net - web.config 中的 ASPNET 凭据：如何将用户名和密码与 UI 映射

> ID：12053566
> 
> 赞同：0
> 
> 时间：2012-08-21T11:09:49.830
> 
> 标签：asp.net

没有引用来自参考文档 [http://msdn.microsoft.com/en-us/library/da0adyye.aspx的 UI 元素](http://msdn.microsoft.com/en-us/library/da0adyye.aspx)

甚至在这里查看一些示例[http://vishalnayan.wordpress.com/2011/03/22/creating-credential-store-for-form-authentication-in-asp-net-3-5/](http://vishalnayan.wordpress.com/2011/03/22/creating-credential-store-for-form-authentication-in-asp-net-3-5/)

我不明白 webconfig 凭据中的用户名和密码如何与 UI 元素映射。在示例中，文本框具有 id UsernameText 而不是 Username 那么 asp.net 如何在两者之间进行映射？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T11:22:01.767

它不会自动映射到 UI 元素。在用户输入他的用户名和密码后，它会在代码隐藏中被检查，如下所示：

```
if (FormsAuthentication.Authenticate(UsernameText.Text, PasswordText.Text)) 
```

# .net - 控制如何将 P/Invoked 程序集加载到不同的应用程序域中

> ID：12053567
> 
> 赞同：1
> 
> 时间：2012-08-21T11:09:54.057
> 
> 标签：.net, assemblies, appdomain

我有一个应用程序需要在 dll 中调用一些非托管代码。我需要从多个应用程序域进行这些调用，并且特别希望程序集多次加载到内存中（每个应用程序域一次）。

我尝试过执行以下操作：

```
 Dim AppDomainSetup As New AppDomainSetup
    With AppDomainSetup
        .PrivateBinPath = "<Blah>"
        .LoaderOptimization = LoaderOptimization.MultiDomainHost
    End With

    Dim AppDomain As AppDomain = AppDomain.CreateDomain(String.Format("AppDomain-{0}", AppDomainCounter), Nothing, AppDomainSetup)
    AppDomainCounter += 1

    Dim Manager = CType(
        AppDomain.
        CreateInstanceAndUnwrap(
            System.Reflection.Assembly.
            GetExecutingAssembly.FullName,
        "<My Manager Class>"), AppDomainManager)
    Return Manager 
```

`AppDomainManager`继承自`MarshalByRefobject`并有一个方法（最终）调用

```
<DllImport("<Path>",
    EntryPoint:="<MethodName>",
    CallingConvention:=CallingConvention.Cdecl)>
Private Shared Function <MethodName>(
                                    <InAttribute(),
                                    MarshalAsAttribute(UnmanagedType.LPStr)>
                                    ByVal sig1 As String,
                                    <InAttribute(),
                                    MarshalAsAttribute(UnmanagedType.LPStr)>
                                    ByVal sig2 As String) As Integer 
```

但是，在进行一些测试之后，似乎正在加载程序集的单个（实例？）并在应用程序域之间共享。我希望该`AppDomain.LoaderOptimization`设置会强制每个域有一个唯一的副本。

有什么办法可以强制 CLR 多次加载程序集？

# bash - 别名：如何将“别名”发送到后台？

> ID：12053568
> 
> 赞同：0
> 
> 时间：2012-08-21T11:09:59.517
> 
> 标签：bash, alias

我想将带有输入参数的别名发送到后面

别名：

```
alias aaa="/script.sh" 
```

用法：

```
aaa input1 input2 inpu3 
```

现在我可以通过添加“&> /dev/null &”将aaa发送到后台，但是由于输入，将其添加到别名不起作用

```
aaa input1 input2 inpu3 &> /dev/null & 
```

到目前为止我所尝试的：

```
alias aaa="/script.sh &> /dev/null &" 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-21T11:13:31.670

你不能用别名来做到这一点。制作一个函数。

```
function aaa() {
   script.sh $@ &

}

aaa input1 input2 inpu3 > /dev/null 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T11:13:12.480

你总是可以运行它...点击 ctrl-z 然后输入 bg。这将在后台运行它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T11:13:30.033

用下面的代码编写另一个脚本文件并为其创建别名。

脚本2.sh：

```
./script.sh "$@" > /dev/null & 
```

制作别名：

```
alias aaa="./script2.sh" 
```

# apex-code - 在 VF 页面中显示 javaScript 值

> ID：12053569
> 
> 赞同：1
> 
> 时间：2012-08-21T11:10:02.200
> 
> 标签：apex-code, visualforce

我想在它自己的 VF 页面中显示来自 javaScript 的值。请告诉我这是怎么可能的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T05:42:36.260

[这是关于VisualForce Component Ids & Javascript](http://th3silverlining.com/2009/06/17/visualforce-component-ids-javascript/)主题的一篇很好的相关文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T12:37:42.613

尝试这个：

视觉力量页面：

```
<apex:outputText id="myPlaceholder" value=""/> 
```

JavaScript：

```
<script>
    var myString = 'Hello';
    jQuery('[id$=myPlaceholder]').text(myString)    
</script> 
```

# spring - Spring 3 不会用属性值填充 @Value 注释字段

> ID：12053570
> 
> 赞同：2
> 
> 时间：2012-08-21T11:10:05.103
> 
> 标签：spring, properties, code-injection

我想使用 Spring 3.1.1 用属性值填充一些字段，但这些字段始终保持为空。

添加到 applicationContext.xml

```
 http://www.springframework.org/schema/util 
  http://www.springframework.org/schema/util/spring-util-3.0.xsd">

  <util:properties id="props" location="classpath:application.properties" /> 
```

应用程序属性：

```
myProp=value 
```

java类：

```
 @Value("#{props[myProp]}")
  private String myField; 
```

但是在创建 bean 时，myField 没有填充属性文件中的“值”，而是保持为空。

也尝试过（没有成功）：

```
 @Value("#{props.myProp}")
  private String myField; 
```

和

```
 @Value("#{myProp}")
  private String myField; 
```

找到了 application.properties 文件，因为我在移动它后得到了“找不到文件”。

这里是堆栈跟踪：http: [//pastebin.com/5A8i5gF8](http://pastebin.com/5A8i5gF8)

我必须改变什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T13:08:07.760

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
    xmlns:jaxws="http://cxf.apache.org/jaxws" xmlns:cxf="http://cxf.apache.org/core"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:util="http://www.springframework.org/schema/util"
    xsi:schemaLocation="
      http://www.springframework.org/schema/beans
      http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
      http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
      http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
      http://cxf.apache.org/core
      http://cxf.apache.org/schemas/core.xsd
      http://cxf.apache.org/jaxws
      http://cxf.apache.org/schemas/jaxws.xsd
      http://www.springframework.org/schema/util 
      http://www.springframework.org/schema/util/spring-util-3.0.xsd">

    <import resource="classpath:META-INF/cxf/cxf.xml" />
    <import resource="classpath:META-INF/cxf/cxf-extension-soap.xml" />
    <import resource="classpath:META-INF/cxf/cxf-servlet.xml" />

    <context:annotation-config />   
    <context:component-scan base-package="my.base.package" /> 
    <util:properties id="props" location="classpath:application.properties" />

    ... <some beans (transactions, persistence, ws-endpoints) not used by the test class > ....

        <cxf:bus>
        <cxf:features>
            <cxf:logging />
        </cxf:features>
    </cxf:bus>

</beans> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T13:43:47.340

很抱歉发布新答案，但评论中的代码格式不正确。

```
@Repository
@Qualifier(value = "myStrategy")
public class MyClass implements MyInterface {

    @Value("${prop1}")
    private String prop1;

    MyClass(){
        <prop1 is passed to a method to set a config.>
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T12:09:46.960

您可能缺少`<context:component-scan/>`或`<context:annotation-config/>`在您的应用程序上下文中 - 它注册了一个`AutowiredAnnotationBeanPostProcessor`实际处理 @Value 标记的 bean。如果它不存在，只需添加两者之一，它应该可以工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T11:14:40.560

您是否已将具有 myField 类变量的类声明或配置到 applicationContext.xml 中？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T11:17:38.800

尝试使用 char $ 而不是 # 示例：

```
 @Value("${myProp}")
  private String myField; 
```

# java - java中动态连接任意access数据库

> ID：12053571
> 
> 赞同：1
> 
> 时间：2012-08-21T11:10:10.593
> 
> 标签：java, ms-access, jdbc

我希望用户能够浏览`.mdb`文件（访问包含单个表的数据库文件），然后读取表的名称、表的字段及其值，并将它们显示在 Java 的网格中。

我怎样才能做到这一点？它应该适用于`.mdb`用户作为输入提供的任何文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T11:14:38.953

这是一个广泛的问题，但关键的技术是：

*   JDBC - 用于数据库访问
*   JDBC->ODBC Bridge - 允许连接到 Jet 数据库（访问）

然后看看 Hibernate 的 ORM 映射。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T13:19:45.853

商业 HXTT Access 在[http://www.hxtt.com/access.html](http://www.hxtt.com/access.html)，支持 MS Access 95~2010。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T11:13:43.900

看看[Jackcess](http://jackcess.sourceforge.net/)。我从未亲自使用过它，但它看起来很有希望。

# delphi - 如何处理纠结的使用依赖关系以便开始单元测试？

> ID：12053573
> 
> 赞同：6
> 
> 时间：2012-08-21T11:10:27.037
> 
> 标签：delphi, unit-testing, delphi-7, dunit

我有一个凌乱的 Delphi 7 遗留系统需要维护和开发。我已经在阅读“有效地使用遗留代码”，我非常喜欢这本书。

为了开始遵循书中的建议，我创建了一个测试项目并尝试编写一个测试。为此，我需要在测试项目中添加一些单元，但问题在于：被测系统具有可怕的使用依赖项。一个单元使用其他单元，该单元使用其他单元，依此类推。似乎大多数单元直接或间接使用一个特定单元，而该单元在其使用子句中又具有 170 个依赖项。也有间接的循环依赖。

目前我正在尝试将所有遗留系统的单元添加到测试项目中，但我遇到了各种各样的问题，比如“单元 xxx 是用不同版本的 xxx 编译的”等等。

所以我想知道我是否做错了什么。我以前使用过单元测试，但在我自己的项目中，它更小，结构和模块化更好。在这种情况下我有什么选择？我错过了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T12:17:37.180

您的代码中将始终存在依赖项。好吧，只要你有代码重用，你就会有依赖。由于您正在测试遗留系统，因此不可能进行大规模重组。

所以你只需要接受依赖。最方便实用的方法是拥有一个单一的单元测试项目。该项目包含您所有的单元测试。使用运行程序的功能在任何时候只运行特定的测试。

这会导致您的项目在其 .dpr 文件中具有与主项目相同的单元列表。这就是您目前尝试的方法，这是正确的方法。

您的问题听起来像是在主项目和单元测试项目之间共享 DCU 目录（单元输出目录）。对于这两个项目，您有不同的编译器选项。这是您报告的错误最可能的解释。

有几个明显的解决方案：

1.  对齐两个项目的编译器选项。然后他们可以共享 DCU。
2.  为两个项目提供单独的 DCU 目录。

选项 2 更加稳健，是最佳实践。但是，您应该尝试了解编译器选项不同的原因。很有可能您需要更改新单元测试项目中的编译器选项，以便被测单元按需要编译和运行。在现代 Delphi 中，我会使用选项集来确保编译器选项的一致性。

现在，您可能面临其他技术问题，我对错误的解释可能不太正确，因为我不得不猜测一下。但最重要的是，在您的 .dpr 文件中拥有相同的单位列表是可行的方法。

# ruby-on-rails-3 - rails test 让 Mysql2 抱怨默认值

> ID：12053578
> 
> 赞同：3
> 
> 时间：2012-08-21T11:10:36.107
> 
> 标签：ruby-on-rails-3, unit-testing

我对尝试对我拥有的模型（用户）进行单元测试时出现的错误感到非常困惑。我在 test/fixtures/users.yml 中有一个模型的夹具

```
new_user_in_unavailable_country:
  first_name: John
  last_name: Lennon
  email: john.lennon@pop.co.uk
  password: YokoOn0
  country: UNITED KINGDOM 
```

现在在 test/unit/user_test.rb 我有

```
require 'test_helper'

class UserTest < ActiveSupport::TestCase
  test "status_auto_fill_for_unavailable_country" do
     users(:new_user_in_unavailable_country).valid?
     assert users(:new_user_in_unavailable_country).status == "SUBSCRIBED"
  end
end 
```

到目前为止，一切都很好。现在，这是在 rake:test:units 上生成的：

```
 Error:
test_status_auto_fill_for_available_country(UserTest):
ActiveRecord::StatementInvalid: Mysql2::Error: Field 'name' doesn't have a default value: INSERT INTO `countries` (`id`) VALUES (980190962) 
```

好的，如果在表格国家的某个地方有一个隐藏的插入（我从来没有要求过！），我应该能够在 Rails 控制台中运行相同的代码时看到它。所以我尝试了：

```
> usr = User.new(:first_name => "John", :last_name => "Lennon", :email => "john.lennon@pop.co.uk", :password => "YokoOn0", :country => "UNITED KINGDOM")
#<User id: nil, first_name: "John", last_name: "Lennon", email: "john.lennon@pop.co.uk", hashed_password: nil, password_salt: nil, created_at: nil, updated_at: nil, organization_id: nil, country: "UNITED KINGDOM", status: nil>

>> usr.valid?
   (1.0ms)  SELECT COUNT(*) FROM `countries` WHERE `countries`.`available` = 1 AND `countries`.`name` = 'UNITED KINGDOM'
   (1.0ms)  SELECT COUNT(*) FROM `countries` WHERE `countries`.`available` = 1 AND `countries`.`name` = 'UNITED KINGDOM'
   (0.0ms)  SELECT COUNT(*) FROM `countries` WHERE `countries`.`available` = 1 AND `countries`.`name` = 'UNITED KINGDOM'
   (1.0ms)  SELECT COUNT(*) FROM `countries` WHERE `countries`.`available` = 1 AND `countries`.`name` = 'UNITED KINGDOM'
   (0.0ms)  SELECT COUNT(*) FROM `countries` WHERE `countries`.`available` = 1 AND `countries`.`name` = 'UNITED KINGDOM'
   (0.0ms)  SELECT COUNT(*) FROM `countries` WHERE `countries`.`available` = 1 AND `countries`.`name` = 'UNITED KINGDOM'
   (0.0ms)  SELECT COUNT(*) FROM `countries` WHERE `countries`.`available` = 1 AND `countries`.`name` = 'UNITED KINGDOM'
   (0.0ms)  SELECT COUNT(*) FROM `countries` WHERE `countries`.`available` = 1 AND `countries`.`name` = 'UNITED KINGDOM'
   (0.0ms)  SELECT COUNT(*) FROM `countries` WHERE `countries`.`available` = 1 AND `countries`.`name` = 'UNITED KINGDOM'
  User Exists (1.0ms)  SELECT 1 FROM `users` WHERE `users`.`email` = BINARY 'john.lennon@pop.co.uk' LIMIT 1
true

>> usr.status
"SUBSCRIBED" 
```

好的，没有插入国家表。

知道我失踪并产生此错误的幕后发生了什么吗？

```
Create Country migration:
class CreateCountries < ActiveRecord::Migration
  def change
     create_table :countries do |t|
      t.string      :name , :null => false
      t.string      :iso_2_letters_code , :null => false
      t.string      :iso_3_letters_code , :null => false
      t.integer     :phone_code
    end

    add_index :countries , :iso_2_letters_code , :unique => true
    add_index :countries , :iso_3_letters_code , :unique => true
  end
end 
```

# css - 范围 sass 变量

> ID：12053582
> 
> 赞同：1
> 
> 时间：2012-08-21T11:10:59.377
> 
> 标签：css, sass, scope

有没有办法为 sass 变量添加范围？

我希望能够将一个类附加到我的`body`元素。该类将引用其余样式表可以访问的一组颜色。

我努力了：

```
@mixin theme_one{
    $color: #000;
}
.theme_one{
  @include theme_one;
} 
```

和

```
.theme_one{

  $color: #000;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T11:43:16.463

我自己也遇到过同样的问题。我想为我网站的不同部分设置不同的颜色主题。

使用 mixin 似乎是最好的方法。它非常干燥，易于使用。诀窍不是在主样式块中设置颜色，而是仅使用 mixin。

我将主题颜色设置为顶部的变量，以便可以很好地编辑它们，并且我将它们设置为列表，以便可以传递多个值而无需定义大量变量。

所以：

```
// Variable Definitions

$defaultColor: black white grey;
$color2:       blue green brown;
$color3:       red white blue;

@mixin colorSet($color: $defaultColor) {
  $link:       nth($color, 1);
  $border:     nth($color, 2);
  $background: nth($color, 3);

  border-color: $border;
  background-color: $background;

  .column {
    border-color: lighten($border, 10%);
  }

  a {
    color: $link;
    &:hover {
      color: darken($link, 15%);
    }
  }

}

// Default colours
body {
  @include colorSet();
}

// Scoped colours
.my-theme-3 {
  @include colorSet($color3);
}

.my-theme-2 {
  @include colorSet($color2);
} 
```

会产生这样的东西：

```
body {
  border-color: white;
  background-color: grey; }
  body .column {
    border-color: white; }
  body a {
    color: black; }
    body a:hover {
      color: black; }

.my-theme-3 {
  border-color: white;
  background-color: blue; }
  .my-theme-3 .column {
    border-color: white; }
  .my-theme-3 a {
    color: red; }
    .my-theme-3 a:hover {
      color: #b30000; }

.my-theme-2 {
  border-color: green;
  background-color: brown; }
  .my-theme-2 .column {
    border-color: #00b300; }
  .my-theme-2 a {
    color: blue; }
    .my-theme-2 a:hover {
      color: #0000b3; } 
```

编辑：更新为使用默认的 mixin 值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T11:26:07.697

在你的情况下不需要使用mixin，如果你有很多样式，那么使用mixin，即。如果你有

```
@mixin theme_one{
    $color: #000;
    height: 50px;
} 
```

然后使用 Mixin

否则对于单个属性，仅使用变量

```
$color: #fff;

.some_class01{

  color: $color;
  background: $color;
}

.some_class22{
  border-color: $color;
} 
```

IMP：变量应该在你的代码顶部分配，这意味着不要在你分配它的地方之后/之下使用它:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T17:01:02.147

不确定这是否是您正在寻找的。看起来你可能已经尝试过类似的东西，这应该可以工作。（这可能只是使用 !default 的问题）

你的身体标签上面有一个类..

```
<body class="theme_one">

</body> 
```

样式表中定义的 Sass 变量..

```
//THEME ONE VARIABLES
.theme_one{
    $borderColor:#333 !default;
    $fontColor:#999 !default;
}

//THEME TWO VARIABLES
.theme_two{
    $borderColor:#CCC !default;
    $fontColor:#000 !default;
} 
```

预先存在的 CSS 将根据 body 标签上使用的类被覆盖。

```
h1.someheader {
    color:$fontColor;
    border-bottom:1px solid;
    border-color:$borderColor;
} 
```

否则你可能会尝试这样的事情。看起来你可能已经尝试过类似的东西，但是你的 mixin 似乎有一个错误......请参阅下面的注释。

```
//mixin used to set variables for properties
@mixin themeOne($fontColor,$borderColor) {
    color:$fontColor;
    border-color:$borderColor;
}

@include themeOne(#000,#CCC); 
```

预先存在的 CSS

```
h1.someheader {
    color:$fontColor
    border-color:$borderColor;
    border-bottom:1px solid;
} 
```

另请注意，在您使用的 mixin 示例中`$color:#000;`......这不会被正确解释，因为它应该是 color:#000; 除非您执行类似的操作，否则您不能将变量用作选择器`#{$color}:#000;`

我还没有完全测试这个，所以有些事情可能需要调整。如果这不能解决您的问题，我希望它至少能给您一些想法。

# javascript - 在 IE8 中使用 JQuery 读取和更改表单的操作

> ID：12053583
> 
> 赞同：0
> 
> 时间：2012-08-21T11:10:59.990
> 
> 标签：javascript, jquery, html, internet-explorer, javascript-events

我有一个JQuery代码如下，

```
function changeSomething(event) {
    var url = $(event.target).closest("form").attr("action");
} 
```

我的问题是`$(event.target).closest("form").attr("action")`没有读取 IE (IE8) 上的 action 属性，尽管它在其他浏览器上完美运行（即：Chrome 和 FF）。而且我没有任何名为“action”或“submit”的标签。所以这个问题不能由此产生。有人能帮我一下吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T11:17:35.527

尝试将此检查添加到您的代码中：

```
 var url;
 if (typeof event.target != 'undefined'){
  url = $(event.target).closest("form").attr("action");
 }
 else{
  url = $(event.srcElement).closest("form").attr("action");
 } 
```

我不确定`event.target`IE8是否支持

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T11:26:08.247

试试这个代码。它可能会有所帮助...

```
ver elem = (typeof event.target == 'undefined')?e.currentTarget? event.target;
var url = $(elem).closest("form").attr("action"); 
```

# android - Android 虚拟设备位置错误

> ID：12053594
> 
> 赞同：0
> 
> 时间：2012-08-21T11:11:54.233
> 
> 标签：android, virtual-device-manager

我在从 Eclipse 启动 AVD 时遇到问题。当我启动刚刚创建的 AVD 时，它给了我以下错误：

![在此处输入图像描述](../Images/ab1d4a965ff7f2f103c0788bcbdc6b20.png)

我认为这是因为路径中的用户名......

我试图将其复制`.android`到`C:\`(= `C:\.android`) 但经理只是在旧路径中搜索...

我试图设置一个这样的环境变量：

名称：`ANDROID_SDK_HOME` 值：`C:\Users\André Peixoto\.android\.android`

但这并没有解决问题...

接下来我应该尝试什么？

**更新**

我重新安装了android sdk，现在它没有显示奇怪的字符：

![在此处输入图像描述](../Images/1925526233f2eb1a2fb190cfea4e2271.png)

但是`AVD_2_3_3.ini`文件的路径仍然错误。我认为应该是：`C:\Users\André Peixoto\.android\avd\AVD_2_3_3.ini`而不是`C:\Users\André Peixoto\.android\.android\.android/avd/AVD_2_3_3.ini`

我应该如何改变它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T22:35:07.773

`comment 26`我使用从[这里](http://code.google.com/p/android/issues/detail?id=19084)提出的解决方案解决了这个问题：

> 无论您的配置如何。如果消息是这样的“[2011-11-21 22:31:24 - Emulator] PANIC：无法打开 AVD 配置文件：C:\Users\РЇСЂРѕСЃР»Р°РІ.android\avd\my_defult_android_2_3_3_avd.avd/配置.ini"
> 
> （“C:\Users\РЇСЂРѕСЃР»Р°РІ.android\avd\my_defult_android_2_3_3_avd.avd” - 这是您的 AVD 设备配置。）
> 
> 比 ：
> 
> 1.  将直接的“my_defult_android_2_3_3_avd.avd”复制到路径不包含“РЇСЂРѕСЃР»Р°РІ”符号的某个地方（我的结果是这样的路径“d:\android\my_avd_devices\avd\my_defult_android_2_3_3_avd.avd”）。
>     
>     
> 2.  文件“my_defult_android_2_3_3_avd.ini”将包含在目录“C:\Users\РЇСЂРѕСЃР»Р°РІ.android\avd\”中。打开这个文件。
>     
>     
> 3.  将“path=C:\Users\РЇСЂРѕСЃР»Р°РІ.android\avd\my_defult_android_2_3_3_avd.avd”更改为“path=d:\android\my_avd_devices\avd\my_defult_android_2_3_3_avd.avd”
>     
>     
> 4.  保存并关闭。再次启动您的应用程序）））。

但我第一次尝试这个解决方案并没有奏效。所以我卸载了android SDK和eclipse并重新安装了一遍。我还删除了我之前设置的 android_sdk 的环境变量，并设置了一个名为`ANDROID_HOME`value的新变量`C:\android-sdk`。现在我可以运行 AVD。

我认为这不是一个理想的解决方案，因为每次创建 AVD 时，我都需要执行此过程。但现在它解决了我的问题。

希望此解决方案对其他人有所帮助。

**更新 - 新解决方案**

我在以前的解决方案中遇到了一些问题，所以我使用了不同的方法：

我在我的 Windows 中创建了一个新帐户（管理员），用户名没有重音。我把我的 Eclipse 文件夹放在里面`C:\`，以便从新帐户访问。现在，当我想使用 Android 时，我更改为这个新帐户。

# emacs - 在 Emacs24 中加载通过 'package.el' 安装的包

> ID：12053598
> 
> 赞同：10
> 
> 时间：2012-08-21T11:11:57.870
> 
> 标签：emacs, elisp, dot-emacs, emacs24

> **可能重复：**
> [Emacs 24 包系统初始化问题](https://stackoverflow.com/questions/11127109/emacs-24-package-system-initialization-problems)

我正在使用 Emacs 24。我添加了 ELPA 和 Marmalade 存储库。使用“包”我安装了“自动完成”。我在我的 init.el 中添加了以下几行：

```
(require 'auto-complete-config)
(ac-config-default) 
```

当我启动 Emacs 时，我得到了错误

> 文件错误：无法打开加载文件，自动完成配置

但后来我用

> Mx 加载文件

并加载相同的 ~/.emacs.d/init.el 文件，然后在提示符下正常工作

> 正在加载 /home/user/.emacs.d/init.el (source)...完成

通常的加载与“Mx load-file”命令有何不同？在 init.el 文件的开头，我执行以下操作，这是否会以某种方式影响包的加载。

> (add-to-list 'load-path "~/.emacs.d")
> (load "custom_code")

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-21T13:03:43.237

**正如下面的评论中提到的：菲尔斯对[重复问题](https://stackoverflow.com/questions/11127109)的回答可能比这个更有帮助**

这几乎可以肯定意味着您的`init.el`文件在为`package.el`. 后面的代码将带有自动完成库的目录添加到您的加载路径中。

我仍在使用 ELPA，而不是 package.el。使用 elpa，有一个看起来像这样的片段安装在`.emacs`.

```
;;; This was installed by package-install.el.
;;; This provides support for the package system and
;;; interfacing with ELPA, the package archive.
;;; Move this code earlier if you want to reference
;;; packages in your .emacs.
(when
    (load
     (expand-file-name "~/.emacs.d/elpa/package.el"))
  (package-initialize)) 
```

正如评论所暗示的，您可能希望将等效的`package.el`初始化代码放在加载的内容之前`init.el`。

最后：我注意到您提到添加`.emacs.d`到您的`load-path`. Emacs 加载路径不是递归的，因此可能无法满足您的需求（假设您的库位于子目录中）。几年前，我写了这个片段来加载我编写的各种 elisp 代码库。你可能会发现它很有用。（显然，它只适用于带有 shell 和 find 命令的 unixy 系统。它相当慢，但这似乎是`shell-command-to-string`，即使运行“echo hello”等也需要几毫秒）

```
(defun find-elisp-dirs (dir)
  "Find all directories below DIR containing elisp sources, ignoring those"
  (split-string
   (shell-command-to-string
    (format "find %s -iname '*.el' -printf '%%h\\n' | sort -u"
            (expand-file-name dir t))))) 
```

# python - 如何通过 modbus/TCP 异步读取数据并将其发送到 Web

> ID：12053599
> 
> 赞同：0
> 
> 时间：2012-08-21T11:12:00.453
> 
> 标签：python, web-services, twisted, autobahn

我需要从通过以太网（modbus/TCP）连接的设备接收数据并将其发送到网页（可能使用网络套接字）。

我找不到好的例子。现在我可以使用驱动程序连接并打印值，`ModbusClientProtocol.read_input_registers()`但我必须创建自己的工厂和协议类。我正在使用高速公路，扭曲，pymodbus。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T10:09:56.393

我对 modbus 或 pymodbus 不熟悉，所以我猜测并留下很多空白供您填写。

这是我最近为接收 snmptraps 并将信息重新分发到连接的 websocket 的东西而被破解的。

希望这足以让您继续前进：

```
#!/usr/bin/python
from twisted.internet import protocol, reactor, utils, defer
from twisted.web.server import Site
from twisted.web.static import File

from autobahn.websocket import WebSocketServerFactory, WebSocketServerProtocol
from autobahn.util import newid
from autobahn.resource import WebSocketResource

class ModbusThing(object):
  def __init__(self,clientAddress):
    self.clientAddress = clientAddress
    self.client = None
  def start(self):
    pass
    ## Create client connection to modbus server
    ## Start Looping Call of pollForData with suitable interval
  def pollForData(self):
    pass
    ## Call read methods on ModbusClient object, add call backs to process the results
    ## Add errorBacks to notify of errors
  def resultCallback(self,result):
    pass
    ## Process the data from a read request
    ## Assumes that your websocket clients expect json like {"event":"update","data":[0,1,2]}
    message = dict(event="update",data=processedResults)
    self.broadcast(json.dumps(message))
  def broadcast(self,msg):
    """Override me"""
    pass

class TrackingWebSocketProtocol(WebSocketServerProtocol):
  def onOpen(self):
    self.session_id = newid()
    self.factory._addSession(self,self.session_id)
    print "Socket Open %s" % (self.peerstr,)

  def onMessage(self,payload,isBinary):
    print "Message received from %s\n\t: %r" % (self.peerstr,payload)

  def onClose(self,wasClean,code,reason):
    self.factory._removeSession(self)
    print "Socket Closed %s" % (self.peerstr,)

class TrackingWebSocketFactory(WebSocketServerFactory):
  def __init__(self,*args,**kwargs):
    WebSocketServerFactory.__init__(self,*args,**kwargs)
    self.proto2session = {}
    self.session2proto = {}
  def _addSession(self,proto,session_id):
    if not self.proto2session.has_key(proto):
       self.proto2session[proto] = session_id
    else:
       raise Exception("logic error - dublicate _addSession for protoToSessions")
    if not self.session2proto.has_key(session_id):
       self.session2proto[session_id] = proto
    else:
       raise Exception("logic error - dublicate _addSession for sessionsToProto")
  def _removeSession(self,proto):
    if proto in self.proto2session:
      session_id = self.proto2session[proto]
      del self.proto2session[proto]
      if session_id in self.session2proto:
        del self.session2proto[session_id]
  def sendToAll(self,message,binary=False):
    prepped = self.prepareMessage(message,binary)
    for proto in self.proto2session.keys():
      proto.sendPreparedMessage(prepped)

def run():
  ## WebSocket Factory
  wsfactory = TrackingWebSocketFactory('ws://yourhostname:80')
  wsfactory.protocol = TrackingWebSocketProtocol
  wsresource = WebSocketResource(wsfactory)
  ## Modbus handler
  modbus_thing = ModbusThing((addressofserver,portofserver))
  modbus_thing.broadcast = wsfactory.sendToAll
  modbus_thing.start()
  ## WebServer Site
  # "static" subdirectory, containing http served resources, e.g. index.html, javascript and css
  root = File("static")
  # Your websocket service as 'ws://yourhostname/ws'
  root.putChild("ws", wsresource)
  site = Site(root)
  reactor.listenTCP(80,site)

def main():
  reactor.callWhenRunning(run)
  reactor.run()

if __name__=='__main__':
  main() 
```

在浏览器方面。一个与 websocket 交互的小模块很方便：

```
var FancyWebSocket = function(url){
  var conn = null;
  var fws = this;
  if ("WebSocket" in window) {
    conn = new WebSocket(url);
  } else if ("MozWebSocket" in window) {
    conn = new MozWebSocket(url);
  } else {
    console.log("Error Websockets not supported in browser");
    return;
  }
  var callbacks = {};
  var debug = true;
  this.bind = function(event_name, callback){
    callbacks[event_name] = callbacks[event_name] || [];
    callbacks[event_name].push(callback);
    return this;// chainable
  };
  this.send = function(event_name, event_data){
    var payload = JSON.stringify({event:event_name, data: event_data});
    conn.send( payload ); // <= send JSON data to socket server
    return this;
  };
  this.close = function(){ conn.close(); return this;}
  // dispatch to the right handlers
  conn.onmessage = function(evt){
    if (debug) console.log("Websocket(" + conn.URL + ") Message: " + evt.data)
    var json = JSON.parse(evt.data)
    dispatch(json.event, json.data)
  };
  conn.onclose = function(){
    if (debug) console.log("Websocket(" + conn.URL + ") Closed");
    dispatch('close',fws);
  }
  conn.onopen = function(){
    if (debug) console.log("Websocket(" + conn.URL + ") Open");
    dispatch('open',fws);
  }
  conn.onerror = function(e){
    if (debug) console.log("Websocket(" + conn.URL + ") Error: " + error);
    dispatch('error',fws,e);
  }
  this.setdebug = function(v) { debug=v; return this; }
  var dispatch = function(event_name, message){
    var chain = callbacks[event_name];
    if(typeof chain == 'undefined') return; // no callbacks for this event
    for(var i = 0; i < chain.length; i++){
      chain[i]( message )
    }
  }
}; 
```

然后在您的浏览器控制台中：

```
conn = new FancyWebSocket("ws://yourhostname/ws"); 
```

# symfony - 使用路由链接表单标签

> ID：12053604
> 
> 赞同：8
> 
> 时间：2012-08-21T11:12:24.697
> 
> 标签：symfony

在我的注册表单中，我有一个“我接受条款”复选框，并希望将“条款”一词链接到我的条款页面。

有没有办法使用路由添加到表单标签的链接？（最好不要在表格中注入容器）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-01-05T16:45:45.520

由于上述解决方案对我不起作用，我使用此处建议的解决方案解决了它：[https ://gist.github.com/marijn/4137467](https://gist.github.com/marijn/4137467)

好的，所以我是这样做的：

```
 {% set terms_link %}<a title="{% trans %}Read the General Terms and Conditions{% endtrans %}" href="{{ path('get_general_terms_and_conditions') }}">{% trans %}General Terms and Conditions{% endtrans %}</a>{% endset %}
{% set general_terms_and_conditions %}{{ 'I have read and accept the %general_terms_and_conditions%.'|trans({ '%general_terms_and_conditions%': terms_link })|raw }}{% endset %}
<div>
{{ form_errors(form.acceptGeneralTermsAndConditions) }}

{{ form_widget(form.acceptGeneralTermsAndConditions) }}
<label for="{{ form.acceptGeneralTermsAndConditions.vars.id }}">{{ general_terms_and_conditions|raw }}</label>
</div> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-21T12:38:14.063

最好的方法是覆盖用于呈现该特定标签的树枝块。

首先，检查文档的[表单片段命名](https://symfony.com/doc/current/form/form_themes.html#form-template-blocks)部分。然后使用适当的名称在表单模板中创建一个新块。不要忘记告诉 twig 使用它：

```
{% form_theme form _self %} 
```

下一步检查[默认`form_label`块](https://github.com/symfony/twig-bridge/blob/1ab11c239ac1894837a277e1bd0cdde8fa245da5/Resources/views/Form/form_div_layout.html.twig#L260)。

您可能只需要其中的一部分，如下所示（我将在此处保留默认块名称）：

```
{% block form_label %}
{% spaceless %}
    <label{% for attrname, attrvalue in label_attr %} {{ attrname }}="{{ attrvalue }}"{% endfor %}>
        <a href="{{ path("route_for_terms") }}">{{ label|trans({}, translation_domain) }}</a>
    </label>
{% endspaceless %}
{% endblock %} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-09-27T11:00:19.427

作为一种选择，您可以这样做：

```
->add('approve', CheckboxType::class, [
    'label' => 'Text part without link',
    'help' => 'And <a href="/x.pdf">download it</a>',
    'help_html' => true,
]) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-07-27T11:49:42.577

[Symfony 5.1 中有新的表单改进。](https://symfony.com/blog/new-in-symfony-5-1-form-improvements)

[表单标签中允许 HTML 内容！](https://symfony.com/blog/new-in-symfony-5-1-form-improvements#allow-html-contents-in-form-labels)

出于安全原因，HTML 内容默认在表单标签中进行转义。新的 label_html 布尔选项允许表单字段在其标签中包含 HTML 内容，这对于在按钮、链接和复选框/单选按钮标签中的某些格式等中显示图标很有用。

```
 // src/Form/Type/TaskType.php
namespace App\Form\Type;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\Extension\Core\Type\SubmitType;
use Symfony\Component\Form\FormBuilderInterface;

class TaskType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder
            // ...
            ->add('save', SubmitType::class, [
                'label' => ' Save',
                'label_html' => true,
            ])
        ;
    }
}
```

在您的情况下，您可以直接从模板设置表单标签并在那里传递路线。

```
{{ form_widget(form.acceptTermsAndConditions, {
    label: '<a href="' ~ path("route") ~ '">' ~ "I accept ..."|trans ~ '</a>',
    label_html: true
    })
}} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-09T14:14:11.483

我的解决方案是另一个：

形式：

```
$builder
->add(
    'agree_to_rules',
    'checkbox',
    [
        'required' => true,
        'label' => 'i_agree_to'
    ]
); 
```

和html：

```
<span style="display:inline-block">
    {{ form_widget(form.agree_to_rules) }}
</span>
<span style="display:inline-block">
        <a href="#">rules</a>
</span> 
```

看起来一样:)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-11-18T01:08:46.097

一个非常简单的方法是

```
{{ form_widget(form.terms, { 'label': 'I accept the <a href="'~path('route_to_terms')~'">terms and conditions</a>' }) }} 
```

如果您想使用翻译，也可以这样做

在您的翻译文件中，例如 messages.en.yml 添加

```
terms:
    url: 'I accept the <a href="%url%">terms and conditions</a>' 
```

在你看来添加

```
{{ form_widget(form.terms, { 'label': 'terms.url'|trans({'%url%': path('route_to_terms')}) }) }} 
```

# android - SimpleAdapter 检索字符串

> ID：12053606
> 
> 赞同：0
> 
> 时间：2012-08-21T11:12:30.127
> 
> 标签：android, simpleadapter

我有一个 SimpleAdapter，只有 2 个 Textviews 填充一个列表。我想检索这些 textview 字符串之一 onListItemClicked()。我可以得到一个

```
Object o = adapter.getItem(position); 
```

但我想要字符串？有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T11:19:46.860

`onListItemClicked`回调的第二个参数是`View`表示该行的 a。您可以使用该行搜索所需的`TextView`并从中获取`String`：

```
TextView txt = (TextView) view.findViewById(R.id.the_desired_textview_id);
String str = txt.getText().toString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T11:33:20.053

如果您从主要活动中分配值，请将值存储在地图敌人前

```
map.put("VALUE", country_name); 
```

并从适配器类中检索字符串值，在适配器中使用它

```
System.out.println("NAME" + item.get("VALUE")); 
```

# ruby-on-rails - 路线 - 链接到 url_path

> ID：12053607
> 
> 赞同：1
> 
> 时间：2012-08-21T11:12:44.010
> 
> 标签：ruby-on-rails, ruby-on-rails-3, gmaps4rails

使用 google-maps-for-rails 效果很好！

我可以在标记信息窗口中使用（路由）url_path。

我现在使用此代码

```
def gmaps4rails_infowindow
    "<a href='http://domainname/en/guide/umbrie/steden/#{slug}'>#{name} - #{city_h1} </a> <br><br>#{city_description}  <br> <br> <img src='/assets/#{slug}.jpg'>  " 
end 
```

但我想在同一张地图中显示另一个模型，所以不同的 url。我在方法中尝试了我的 url_path，但没有成功。我怎样才能做到这一点？

根据您的回复，我尝试了这个

控制器：

```
@json = City.all.to_gmaps4rails do |city, marker|
              marker.infowindow render_to_string(:partial => "/cities/show", :locals => { :object => city })
              marker.title   "#{city.city_h1}"
              marker.sidebar "#{city.name} - #{city.city_h1} " 
              marker.json({ :id => city.id, :name => city.name})
        end 
```

部分的：

```
%h1
  = city.name 
```

我收到此错误消息：

```
City Load (2.2ms)  SELECT `cities`.* FROM `cities` 
  Rendered cities/_show.html.haml (28143.9ms)
Completed 500 Internal Server Error in 28230ms

ActionView::Template::Error (undefined local variable or method `city' for #<#<Class:0x007fcab6bf0f08>:0x007fcab6be1080>):
    1: %h1
    2:   = city.name 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T13:54:45.447

坦率地说，您最好使用部分并在控制器中声明 infowindows，如此[处](https://github.com/apneadiving/Google-Maps-for-Rails/wiki/Controller)所述。

但是，如果您真的想`url_helpers`在模型中使用，请将其添加到您的模型中：

```
delegate :url_helpers, to: 'Rails.application.routes' 
```

并以任何方法以这种方式使用它：

```
url_helpers.root_path
url_helpers.whatever_path 
```

# android - 调整软键盘的屏幕

> ID：12053608
> 
> 赞同：2
> 
> 时间：2012-08-21T11:12:51.157
> 
> 标签：android, android-layout, android-softkeyboard

我正在开发一个 Android 应用程序。以下是我的屏幕截图，没有软键盘和软键盘。![没有软键盘](../Images/2909d9e272429a653110e9e74f51494a.png)

![带软键盘 b](../Images/5dbd70e6d318549f451353f9b12d3691.png)

当显示软键盘时，整个屏幕都会压缩。我只想压缩列表视图 [中间部分]。顶部和底部布局的大小必须相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T11:25:27.317

打开您的 android manifest.xml 文件，然后在 Activity Tag 中进行编辑，如下所示，

```
android:windowSoftInputMode="adjustPan" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T06:06:47.537

现在我的问题解决了。我为顶部和底部创建单独的布局并包含在主布局中。所以每当软键盘弹出中间视图时，只调整大小，顶部和底部视图大小将保持不变。在清单中我使用

```
android:windowSoftInputMode="adjustResize" 
```

感谢朋友们的所有建议。

# plot - 需要用于大型数据集的快速数据集 2D 查看器/绘图仪

> ID：12053611
> 
> 赞同：2
> 
> 时间：2012-08-21T11:13:05.070
> 
> 标签：plot, dataset, large-data

我正在为我生成的一些数据搜索数据查看器/绘图仪。

## 事实

首先是关于我生成的数据的一些事实：

*   有几个数据集，每个数据集大约有 300 万个数据点。
*   当前每个数据集都以 ascii 格式存储。
*   每条线代表一个点，由多列组成。
*   前两列确定点的位置（即 x 和 y 值），而第一列是时间戳，第二列是 0 和 1 之间的标准化浮点数。
*   其他列包含可用于对绘图着色或过滤数据的附加数据。
*   一个示例数据点：

    > 2012-08-08T01:02:03.040 0.0165719281 foobar 成功 XX:1

## 当前方法

目前，我正在为每个数据集生成具有不同选择标准的多个 png 文件（使用 gnuplot），如下所示：

*   以灰色显示所有点。
*   以灰色显示所有点，但以红色显示 SUCCESS。
*   以灰色显示所有点，但以红色显示 SUCCESS，以绿色显示 XX:-1；如果 SUCCESS 和 XX:-1 都匹配，则使用蓝色作为着色。

## 缺点

使用当前的方法，我想解决一些缺点：

*   我不能轻易地打开/关闭一些过滤器或颜色，因为我每次都必须生成一个新的 png 文件。
*   我需要在我的图像文件中使用有限的分辨率，因为分辨率越高，查看器越慢。所以我只能放大到有限的细节。
*   我没有每个点的 png 查看器中可用的原始数据。理想情况下，我希望在选择一个点时可以看到数据。

## 已经测试过了

我已经测试了其他一些方法：

*   Gnuplot 本身有一个查看器，但它不能有效地处理这么多点 - 它太慢并且消耗太多内存。
*   我快速浏览了 KST，但我找不到显示 2D 数据的方法，我认为它不会满足我的愿望。

## 愿望

我想要一个可以对原始数据进行操作的查看器，如果缩小可以快速显示点，也可以快速放大，并且应该解决上述缺点。

## 问题

最后，有没有人知道这样的观众或有其他建议？
如果没有观众，也欢迎一些关于自己编程的建议。

* * *

在此先感谢
斯特凡

# css - 使类中的 ID 命令“合法”以允许 WS3

> ID：12053619
> 
> 赞同：-1
> 
> 时间：2012-08-21T11:13:32.827
> 
> 标签：css, class, html

在[下一页上有两个矩形](http://www.class-a-studio.co.il/mix_mastering06.php)，其中写有文字。（出于说明目的，我将 CSS 命令放在每个矩形之前...）

第一个矩形——ID——命令第二个矩形——跨度类——命令

我有两个问题：

1 - 由 span 类命令设计的不匹配（字母中缺少间隙 - 填充：5px）

2 - span 类的代码中的某些内容对 WC3 无效（LI 问题）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T11:31:48.213

你的第二个盒子的 HTML 真的很乱。第一个是一个`ol`元素，但第二个只是一个`span`. 你不能把`li`不是列表（`ul`或`ol`）的东西放在里面。您还可以在关闭嵌套列表项之前关闭 span，并且该`p`元素最后关闭，即使它是`li`.

```
<span class ="commandmentsID1"> 
<li><p> 
    <!-- content here -->
</span></li></p> 
```

应该：

```
<ol class ="commandmentsID1">   
<li><p> 
    <!-- same content here -->
</p></li></ol> 
```

* * *

由于两个矩形的 CSS 完全相同，因此最好只给每个`class="commandment"`具有所有这些 CSS 规则的 a 。

```
.commandment {list-style:none; margin:0; padding:0;}
.commandment li {background:#292929; color:#d0d0d1; font:bold 5px Arial, Helvetica, sans-serif; letter-spacing:0px; margin:10px; padding:10px; text-align:center;}
.commandment li blockquote {margin:0px; padding:0px;}
.commandment p {background:#333333; color:#ffffff; text-align:right; font:13px Arial, Helvetica, sans-serif; letter-spacing:0px; margin:0px; padding:5px; text-decoration:none;}

<ol class="commandment">
    <!-- content -->
</ol> 
```

# mysql - 排序一个mysql表，删除它并创建一个新的排序

> ID：12053625
> 
> 赞同：1
> 
> 时间：2012-08-21T11:13:48.843
> 
> 标签：mysql, sorting, sql-order-by

我有一个具有以下结构的表：

国家、城市、人口

该表按城市字母顺序排序，我想按人口降序排序并创建一个以这种方式排序的新表。

在这种情况下要使用什么查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T11:24:46.963

您可以使用单个查询获得所需的结果：

`Create table new_table select * from table order by population desc;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T11:17:28.817

我不明白为什么你需要这样做：

```
select country, city, population from table order by population desc; 
```

回答你的问题：

```
create table new_table like table;
insert into new_table select * from table order by population desc; 
```

# c++ - 全局静态常量字符串不会被初始化

> ID：12053626
> 
> 赞同：3
> 
> 时间：2012-08-21T11:13:49.187
> 
> 标签：c++

在 Ubuntu 上运行 c++。

在 configuration.h 文件中我有这个（全局）：

```
static const string APP_CONFIG_FILE_NAME = "cfg"; 
```

在我的 configuration.cpp （顺便说一下，这是单例的，所以加载配置由 Configuration 的构造函数调用）我这样做：

```
void Configuration::loadConfiguration() {
    cout<< "config file name "  << APP_CONFIG_FILE_NAME.data();
        load();
} 
```

加载配置将从另一个全局调用：（这是失败的关键点）

```
Timer t(Configuration::Instance()->timeout); 
```

我看到成本字符串未初始化（空）。如果我用 char* 替换字符串，它会按我预期的顺序初始化。

但是在另一个程序上，相同的类用于配置工作，所以我不知道问题所在。

还有另一个问题，但不一样，因为[它](https://stackoverflow.com/questions/1467919/static-const-string-wont-get-initialized)不是全球性的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-21T11:18:19.483

当然，它会被初始化。但是，它可能会按照您不希望/期望它初始化的顺序进行初始化。

具体来说，它可能在您使用它时尚未构建，因为您在构建另一个全局时使用它。

不幸的是，您没有一个很好的方法来*可移植*地指定全局数据的初始化顺序。标准未定义多个文件之间的初始化顺序，尽管它可能由您的*toolchain*指定。因此，更改编译顺序或使用另一个工具链构建可能会导致不同的初始化顺序。搜索“静态初始化订单惨败”了解更多详情。

避免此问题的一种方法是在函数中声明静态数据：

```
const std::string& AppConfigFileName() {
  static const std::string name("cfg");
  return name;
} 
```

虽然......我不明白为什么这必须是静态的（上面的函数允许您按值返回 - 不需要静态）。另外，我不明白为什么这不能是普通的 C 字符串，因为您只是在配置加载器中将其视为 C 字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T11:33:57.993

关键问题是何时`Configuration::loadConfiguration`被调用。**翻译单元之间**的初始化顺序是未定义的，因此如果`Configuration::loadConfiguration`从另一个翻译单元中的静态对象的构造函数中调用，则该变量可能尚未构造。在这种特殊情况下，最简单的解决方案就是将类型更改为`char const[]`; 这允许静态初始化，这发生在任何动态初始化之前。（任何涉及非平凡构造函数的初始化都是动态的。）更一般地说，您可以对字符串使用单例模式。

其他几点也值得一提：

*   您已经`static`在头文件中声明了一个对象的实例。这意味着每个包含头文件的翻译单元都会有一个单独的对象实例。这可能不是一个好主意。

*   你输出`APP_CONFIG_FILE_NAME.data()`. 这只是`std::string`对象中的数据——**不**保证会被`'\0'` 终止。当您需要一个`'\0'`终止的字符串时，您必须使用 `std::string::c_str()`. （但在这种情况下，您可以只输出 `std::string`. 不需要对其进行任何函数调用。）

# entity-framework - 如何停止添加 dbo 的 Entity Framework 5 迁移。进入关键名称？

> ID：12053627
> 
> 赞同：30
> 
> 时间：2012-08-21T11:13:54.277
> 
> 标签：entity-framework, entity-framework-5

我使用 Entity Framework 4.3 Code First 和手动迁移和 SQL Express 2008 开始了一个项目，最近更新到 EF5（在 VS 2010 中），并注意到现在当我更改外键约束之类的东西时，迁移代码会添加“dbo”。到表名的开头，因此它构造的外键名对于现有约束是不正确的（现在通常看起来很奇怪）。

EF 4.3 中的原始迁移脚本（注意**ForeignKey("Products", t => t.Product_Id)**）：

```
 CreateTable(
        "Products",
        c => new
            {
                Id = c.Int(nullable: false, identity: true),
                ProductName = c.String(),
            })
        .PrimaryKey(t => t.Id);

    CreateTable(
        "KitComponents",
        c => new
            {
                Id = c.Int(nullable: false, identity: true),
                Component_Id = c.Int(),
                Product_Id = c.Int(),
            })
        .PrimaryKey(t => t.Id)
        .ForeignKey("Products", t => t.Component_Id)
        .ForeignKey("Products", t => t.Product_Id)
        .Index(t => t.Component_Id)
        .Index(t => t.Product_Id); 
```

生成的外键名称：FK_KitComponents_Products_Product_Id FK_KitComponents_Products_Component_Id

如果我然后升级到 EF5 并更改外键迁移代码看起来像（注意**"dbo.KitComponents" 和 "dbo.Products"**而不是**"KitComponents" 和 "Products"**）：

```
DropForeignKey("dbo.KitComponents", "Product_Id", "dbo.Products");
DropIndex("dbo.KitComponents", new[] { "Product_Id" }); 
```

并且更新数据库失败并显示消息：' **FK_dbo.KitComponents_dbo.Products_Product_Id** '不是约束。无法删除约束。请参阅以前的错误。

所以似乎从 EF5 开始，约束命名已从 FK_KitComponents_Products_Product_Id 更改为 FK_dbo.KitComponents_dbo.Products_Product_Id （带有 dbo. 前缀）

如何让 EF5 像在 EF 4.3 中一样运行，这样我就不必更改它吐出的每一段新迁移代码？

我还没有找到任何关于为什么会发生变化以及如何处理它的发行说明:(

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-21T18:34:28.620

您可以通过对类进行子[`CSharpMigrationCodeGenerator`](http://msdn.microsoft.com/en-us/library/system.data.entity.migrations.design.csharpmigrationcodegenerator)类化来自定义生成的代码：

```
class MyCodeGenerator : CSharpMigrationCodeGenerator
{
    protected override void Generate(
        DropIndexOperation dropIndexOperation, IndentedTextWriter writer)
    {
        dropIndexOperation.Table = StripDbo(dropIndexOperation.Table);

        base.Generate(dropIndexOperation, writer);
    }

    // TODO: Override other Generate overloads that involve table names

    private string StripDbo(string table)
    {
        if (table.StartsWith("dbo."))
        {
            return table.Substring(4);
        }

        return table;
    }
} 
```

然后在您的迁移配置类中设置它：

```
class Configuration : DbMigrationsConfiguration<MyContext>
{
    public Configuration()
    {
        CodeGenerator = new MyCodeGenerator();
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-05-14T13:53:06.323

对于自动迁移，请使用以下代码：

```
public class MyOwnMySqlMigrationSqlGenerator : MySqlMigrationSqlGenerator
{
    protected override MigrationStatement Generate(AddForeignKeyOperation addForeignKeyOperation)
    {
        addForeignKeyOperation.PrincipalTable = addForeignKeyOperation.PrincipalTable.Replace("dbo.", "");
        addForeignKeyOperation.DependentTable = addForeignKeyOperation.DependentTable.Replace("dbo.", "");
        MigrationStatement ms = base.Generate(addForeignKeyOperation);
        return ms;
    }
} 
```

并将其设置为配置：

```
SetSqlGenerator("MySql.Data.MySqlClient", new MyOwnMySqlMigrationSqlGenerator()); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-14T22:16:02.483

这是一个很好的答案，但是，如果您只是在寻找“快速修复”方法，那么[当键位于基类中时，EF Migrations DropForeignKey 也会失败](https://stackoverflow.com/questions/11528476/ef-migrations-dropforeignkey-fails-when-key-is-in-a-base-class)

> 使用包含参数 principalName 和 name 的 DropForeignKey 重载——在这种情况下，这意味着约束名称！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-24T19:50:49.157

改进了 bricelam 的答案，我在 EF6 上尝试了这个。进行了一些更改以将架构保留为表名的一部分，并且仅将其从 FK 或 PK 名称中删除

```
internal class MyCodeGenerator : CSharpMigrationCodeGenerator
{
    protected override void Generate(AddForeignKeyOperation addForeignKeyOperation, IndentedTextWriter writer)
    {
        addForeignKeyOperation.Name = this.StripDbo(addForeignKeyOperation.Name, addForeignKeyOperation.DependentTable);
        addForeignKeyOperation.Name = this.StripDbo(addForeignKeyOperation.Name, addForeignKeyOperation.PrincipalTable);
        base.Generate(addForeignKeyOperation, writer);
    }

    protected override void Generate(AddPrimaryKeyOperation addPrimaryKeyOperation, IndentedTextWriter writer)
    {
        addPrimaryKeyOperation.Name = StripDbo(addPrimaryKeyOperation.Name, addPrimaryKeyOperation.Table);
        base.Generate(addPrimaryKeyOperation, writer);
    }

    protected override void Generate(DropForeignKeyOperation dropForeignKeyOperation, IndentedTextWriter writer)
    {
        dropForeignKeyOperation.Name = this.StripDbo(dropForeignKeyOperation.Name, dropForeignKeyOperation.DependentTable);
        dropForeignKeyOperation.Name = this.StripDbo(dropForeignKeyOperation.Name, dropForeignKeyOperation.PrincipalTable);
        base.Generate(dropForeignKeyOperation, writer);
    }

    protected override void Generate(DropPrimaryKeyOperation dropPrimaryKeyOperation, IndentedTextWriter writer)
    {
        dropPrimaryKeyOperation.Name = StripDbo(dropPrimaryKeyOperation.Name, dropPrimaryKeyOperation.Table);
        base.Generate(dropPrimaryKeyOperation, writer);
    }

    private string StripDbo(string objectName, string tableName)
    {
        if (tableName.StartsWith("dbo."))
        {
            return objectName.Replace(tableName, tableName.Substring(4));
        }

        return objectName;
    }
} 
```

# python - Python 中的上一个工作日

> ID：12053633
> 
> 赞同：21
> 
> 时间：2012-08-21T11:14:07.727
> 
> 标签：python, date, weekday

在 Python 中，给定一个日期，我如何找到前一个工作日？（平日是周一到周五。我不在乎假期）

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-08-21T11:20:03.513

只需从给定日期中减去一天，然后检查日期是否为工作日。如果没有，减去另一个，直到你有一个工作日：

```
from datetime import date, timedelta
def prev_weekday(adate):
    adate -= timedelta(days=1)
    while adate.weekday() > 4: # Mon-Fri are 0-4
        adate -= timedelta(days=1)
    return adate 
```

演示：

```
>>> prev_weekday(date.today())
datetime.date(2012, 8, 20)
>>> prev_weekday(date(2012, 8, 20))
datetime.date(2012, 8, 17) 
```

或者，使用偏移表；无需将其设为映射，元组就可以了：

```
_offsets = (3, 1, 1, 1, 1, 1, 2)
def prev_weekday(adate):
    return adate - timedelta(days=_offsets[adate.weekday()]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T11:16:46.240

请参阅[datetime](http://docs.python.org/library/datetime.html)模块，尤其是`date()`and`weekday()`函数。例如：

```
import datetime

temp = datetime.date(2012,8,21) # Today's date: 2012/08/21
print temp.weekday() 
```

这将输出`1`. `0`代表星期一、`1`星期二等，直到`6`星期日。从这里很容易找到前一个工作日。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T11:21:18.373

在 datetime 模块中，您可以执行以下操作：`a = date.today() - timedelta(days=1)` 然后`a.weekday()`. 其中星期一是 0，星期日是 6。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2022-01-13T17:32:28.550

这是一个老问题，但无论如何，这是一种更简单的方法，不需要循环

```
from datetime import datetime, timedelta
today = datetime.today() # Today date
weekday = 6
days = today.isoweekday() - weekday
if days<0:
    days += 7
previous_date = today - timedelta(days=days)
print(previous_date) 
```

# ruby-on-rails - Macbook Pro Rails 安装错误

> ID：12053640
> 
> 赞同：0
> 
> 时间：2012-08-21T11:14:43.387
> 
> 标签：ruby-on-rails, macos, installation

我最近买了一个 macbook pro 并下载了 Mac OS 山狮。有人告诉我 ruby​​ 已经预先安装，要下载 rails，我会输入：

`$ sudo gem install rails`

但是，当我这样做时，我收到此错误：

```
Building native extensions.  This could take a while...
ERROR:  Error installing rails:
ERROR: Failed to build gem native extension.

/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby extconf.rb
mkmf.rb can't find header files for ruby at /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/ruby.h

Gem files will remain installed in /Library/Ruby/Gems/1.8/gems/json-1.7.5 for inspection.
Results logged to /Library/Ruby/Gems/1.8/gems/json-1.7.5/ext/json/ext/generator/gem_make.out 
```

我在 stackoverflow 上寻找答案并尝试下载 Xcode 4.4.1 版，但`$ sudo gem install rails`仍然无法正常工作。另外，当我尝试不带 sudo 的命令时，它会告诉我：

```
ERROR:  While executing gem ... (Gem::FilePermissionError)
You don't have write permissions into the /Library/Ruby/Gems/1.8 directory. 
```

有解决这个问题的方法吗？其他人提到了一个叫做 rvm 的东西，但我真的不知道那是什么或如何使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T11:32:14.547

在与上述相同的系统上遇到类似的问题。Xcode 不包含预安装的命令行工具。要安装这些，请转到首选项 -> 下载部分并选择组件，然后下载命令行工具。这可能会或可能不会解决上述问题。

RVM 允许您在 Ruby 版本之间切换。您可能不想在 Mountain Lion 上使用默认的 Ruby 开发 RoR 应用程序，而不是替换系统安装的 ruby​​，RVM 允许您使用其他（即更高版本）Ruby 版本，而不会影响 OS X 附带的基本安装的 Ruby。

在 OS X 下设置 Ruby On Rails 时，我以前曾将此作为指南：

[http://pragmaticstudio.com/blog/2010/9/23/install-rails-ruby-mac](http://pragmaticstudio.com/blog/2010/9/23/install-rails-ruby-mac)

# iphone - 异步 NSURLConnection 请求多次响应

> ID：12053642
> 
> 赞同：0
> 
> 时间：2012-08-21T11:14:48.863
> 
> 标签：iphone, objective-c, xcode, ipad, ios5

我面临着奇怪的问题。我正在发送 Asynchronus NSUrlrequest 调用，但作为回报，我得到了 json 的某些部分的多次响应

有人可以帮我解决我做错了什么。

代码

```
NSString *_query = @"http://abc.com/index.php";

    NSData *myRequestData = [NSData dataWithBytes:[_requestString UTF8String] 
                                       length:[_requestString length]];

    __block NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:_query]]; 

    [request setHTTPMethod: @"POST" ];
    [request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"content-type"];
    [request setHTTPBody: myRequestData ];

    [[NSURLConnection alloc] initWithRequest:request delegate:self];

    NSRunLoop *runLoop = [NSRunLoop currentRunLoop];

    [runLoop addTimer:timeOutTimer forMode:NSDefaultRunLoopMode]; 
```

* * *

回复

```
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data 
{
    // check is response is a valid JSON?
    NSError *error;

    id jsonObj = [NSJSONSerialization JSONObjectWithData: data options:kNilOptions error:&error];
    BOOL isValid = [NSJSONSerialization isValidJSONObject:jsonObj];

    NSString *content = [[NSString alloc] initWithData:data 
                                              encoding:NSUTF8StringEncoding];

    NSLog(@"Content: %@",content);

    if (isValid)
    {
        NSDictionary *data = [content JSONValue];
    }

    [content release];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T11:32:25.957

当客户端接收到数据时，将调用此回调：

```
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data 
```

didReceiveData 在接收数据时为您提供数据，并且可以使用数据块多次调用。

从[NSURLConnection 文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html)：

> 接收到数据时，委托会定期发送 connection:didReceiveData: 消息。委托实现负责存储新接收到的数据。

从那些文档中：

```
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    // Append the new data to receivedData.
    // receivedData is an instance variable declared elsewhere.
    [receivedData appendData:data];
} 
```

完成后，将调用 connectionDidFinishLoading 并且您的附加数据已准备好供您使用。

> 最后，如果连接成功下载请求，代理会收到 connectionDidFinishLoading: 消息。委托将不会再收到有关连接的消息，并且可以释放 NSURLConnection 对象。

# version-control - Gradle：Ant-wards 兼容？

> ID：12053646
> 
> 赞同：3
> 
> 时间：2012-08-21T11:15:07.270
> 
> 标签：version-control, ant, code-coverage, gradle, ivy

我已经关注 Gradle 有一段时间了，并且 99% 确信我想将我的构建从 Ant 切换到它。但是，在我这次投资之前，我需要 100% 确定 Gradle 可以完成我的 Ant/Ivy 构建的所有工作（我不能失去任何功能）：

*   通过 Cobertura/JaCoCo 运行代码覆盖任务
*   运行一些 Python 脚本
*   结帐/提交到 SVN 存储库
*   运行 AnalytiX CodePro Ant 任务
*   运行纯 Ant 命令
*   定义我自己的任务

我对 Python 任务以及定义我自己的任务有 99% 的把握，但至于其余的，我在那些网站上找不到任何文档表明他们已经定义了 Gradle 任务。如果我能做所有这些事情，我就会被买卖，否则我会推迟到 Gradle 再成熟一点。提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T12:58:24.477

您可以在 Gradle 构建中使用标准和自定义 Ant 任务，就像您在 Ant 本身中习惯的方式一样。此外，您可以导入现有的 Ant 脚本。[导入的 Ant 脚本](http://gradle.org/docs/0.7/userguide/ant.html#N10DA9)的目标被视为一等公民，因此您可以像使用任何其他 Gradle 任务一样使用它们。如您所见，您不必立即将现有代码完全迁移到 Gradle。

就这么简单：

```
ant.importBuild 'build.xml' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T11:43:56.890

Gradle 可以调用内置以及自定义[的 ant-tasks](http://gradle.org/docs/current/userguide/ant.html)，只要没有其他解决方案可用，您就可以依靠旧代码来完成您需要做的所有事情。

# bean-validation - HibernateValidator 在首次评估时初始化约束，而不是在系统加载时

> ID：12053655
> 
> 赞同：0
> 
> 时间：2012-08-21T11:15:58.473
> 
> 标签：bean-validation

我们正在使用 HibernateValidator，并且有以下问题：

我们创建自己的验证器对象，它实现了 ConstraintValidator。验证器第一次验证任何特定的约束时，它会调用该约束的初始化代码。这会导致性能问题。有什么方法可以告诉 HibernateValidator 在加载时运行约束的初始化，而不是第一次实际验证约束？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T14:25:16.100

没有这样的方法。该规范基本上只是说：

> 约束验证实现实例的生命周期是未定义的。允许兼容的实现缓存从 ConstraintValidatorFactory 检索到的 ConstraintValidator 实例。在使用约束实现之前，Bean 验证提供程序会调用 initialize 方法。

仅保证在*isValid*调用之前调用*initialize*。没有办法预先初始化。*初始化*只调用一次的原因是，因为 Validator 缓存了*ConstraintValidator*实例，但这不是我所依赖的。

 ***如果您真的想确保在启动时调用*初始化*，您可以在此阶段进行一些预热验证。

OOI，您在*初始化*它成为性能问题时做了什么？***

# javascript - 为什么 jQuery 不能处理附加内容？

> ID：12053656
> 
> 赞同：3
> 
> 时间：2012-08-21T11:16:04.027
> 
> 标签：javascript, ajax, jquery, ruby-on-rails-3.2

我有一个 jQuery 函数，它在元素循环中的每个元素上显示隐藏的内容。这完美地工作，但问题是当我将新元素附加到循环时它停止工作。它实际上适用于某些元素，但不适用于其他元素（奇怪的行为）。

```
<script type="text/javascript">
 jQuery(document).ready(function($) {

 $(".see_all").click(function(){

 if ($(this).next().css('display') == 'none'){
 $(this).next().show();

}
else

if($(this).next().is(':visible')){
   $(this).next().hide();
 }

});
})
</script> 
```

我的 jQuery 代码有问题吗？如何使它适用于新附加的元素和以前显示的元素。

**HTML 代码**

```
 <div class="center_container">
   <%for users in @user%>
  <div class="see_all">

  <span style="color:#808080;cursor:pointer">See All Reviews(<%=@beep_count=       (@beep.opposes.count +  @beep.neutrals.count + @beep.supports.count)%>)</span>

 </div>

     <div style="display:none;" class="hidden">

      No reviews available 

     </div>
 <%end%>

 </div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T11:22:35.033

*这仅在您使用 jQ 1.7+ 时才有效*。如果你不是，看看 jQuery 的 [委托方法](http://api.jquery.com/delegate/)，它将在 jQuery < 1.7 中实现相同的功能。不过，没有理由不使用最新版本:)

这是因为在您绑定点击处理程序时：

```
 $(".see_all").click() 
```

它仅绑定*到*与选择器匹配的当前元素`.see_all`。

你可以做些什么来解决这个问题是使用 jQuery 的`on()`委托：

```
$("body").on("click", ".see_all", function() {
  //do stuff
}); 
```

此处理程序绑定到`body`，然后当它检测到单击时，它将查看单击的元素是否与选择器匹配`.see_all`。如果是这样，它将执行该功能。因为它绑定到`body`，所以如果新`.see_all`元素也插入到 DOM 中，这将起作用。

如果所有`.see_all`内容都包含在 one`div`中，请使用 that 来委托而不是`body`- 仅将其用作示例。委托给包含所有`.see_all`元素的第一件事。

作为旁注，您应该使用新的 API`.on()`和`.off()`事件绑定，因为 1.7 它们已成为首选方法。[.on() 的文档](http://api.jquery.com/on/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T11:21:26.627

首先，这可以使用切换进行优化。然后，您将需要一个 on() 事件处理程序，因为 click 只绑定到文档准备好的现有元素。添加新元素时，您需要一种动态重新绑定单击事件的方法。

```
<script type="text/javascript">
 jQuery(document).ready(function($) {

 $("body").on('click', '.see_all', function(){
  $(this).next().toggle();
});
})
</script> 
```

# visual-studio-2010 - Xamarin 和 Mono 与 ADT 的比较

> ID：12053658
> 
> 赞同：1
> 
> 时间：2012-08-21T11:16:11.063
> 
> 标签：visual-studio-2010, mono, xamarin.android, adt, xamarin

我是一名开发人员，在 C# 和 Java 方面拥有多年经验。我为我的 Nexus One Android 2.23 手机开发了一些 ADT 项目。

我正在考虑进一步的移动开发，我听说过[Mono for Android/iOS](http://xamarin.com/monoforandroid)和[Xamarin](http://xamarin.com/)。起初我以为 Mono 会重新编码为 Java，但现在我明白它可以编译为本机 C 代码并在 mono 库上运行。

所以我想知道这会给应用程序增加多少膨胀，因为我相信下载的大小与下载数量直接相关（我自己有时不下载某些东西，因为它> 1MB）

如果这里有人使用 Mono，我很想听听您的经验。

[我了解Mono](http://visualstudiomagazine.com/articles/2012/05/01/plug-in-to-mono.aspx)有一个Visual Studio 2010 插件。你推荐它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T14:22:42.770

> 所以我想知道这会给应用程序增加多少膨胀，因为我相信下载的大小与下载次数直接相关（我自己有时不会下载某些东西，因为它> 1MB ....）

Monodroid 应用程序通常在 5 MB 左右（如果[Linked](http://docs.xamarin.com/android/advanced_topics/linking "链接")），因为运行时嵌入在应用程序中。

> 如果这里有人使用 Mono，我很想听听您的经验。

总而言之，我对 Monodroid 很满意。Android 上的 Java 教程很容易翻译，如果太大，您可以创建[Bindings](http://docs.xamarin.com/android/tutorials/Binding_a_Java_Library_%28.jar%29 "绑定")。我只在 Mono 上做过一个项目，所以我的经验有限，但到目前为止，我没有预料到任何事情会让我后悔我的选择。另一方面，如果您熟悉 Java（并且喜欢使用 Java 编码），那么除了跨平台应用程序（参见[Monocross](http://monocross.net/)）之外，没有理由切换它们。

VisualStudio 插件是在 VisualStudio 中开发所必需的。新版本带有一个布局设计器，如 Android Eclipse 插件。我建议您从 Xamarin 下载试用版并试用（试用版没有过期日期，它只允许您部署到模拟器）

# android - Xml 解析器 - 我怎样才能获得这样的链接？

> ID：12053666
> 
> 赞同：-1
> 
> 时间：2012-08-21T11:16:54.193
> 
> 标签：android, xml-parsing

我正在使用 XML 解析器来解析 XML 响应。我需要获取我正在解析的 XML 页面中的所有链接，这些链接以这种形式显示：

```
<src url="link"> Link Name </src> 
```

我怎样才能得到“链接”？我只知道如何使用“链接名称”

```
if(name.equals("url"))
    text = parser.getNextText(); 
```

谢谢你的帮忙！

这是我的代码：

```
try 
    {       
        XmlPullParserFactory factory = XmlPullParserFactory.newInstance();  
        XmlPullParser parser = factory.newPullParser();  
        parser.setInput( new StringReader( response ) );
        int k=0;
        int event;
          while (true) {  

              event = parser.next();  

              if (event == XmlPullParser.START_TAG)
                  {  
                   String name = parser.getName();  

                      String text = null;  
                      while (true) {                             

                          if (name.equals("t")) 
                              {                                   

                                  text = parser.nextText();
                                  title.setText(text);

                              }
                                  else 
                                    if(name.equals("jt"))
                                    {
                                    text = parser.nextText();    
                                    if(!text.equals(""))
                                    adapter.add(text);
                                    }   
                                     else 
                                        if(name.equals("src"))
                                        {
                                        text = parser.(); 
                                        System.out.println(text);
                                        if(!text.equals(""))                                            
                                        link.add(text);
                                        }

                          event = parser.next();
                          if (event == XmlPullParser.START_TAG) {  
                              name = parser.getName(); 
                              if (name.equals("shrs"))  
                                  break;

                          } 
                          else break;
                          }

                      }  

               else if (event == XmlPullParser.END_TAG && parser.getName().equals("shrs"))  
                 break; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T11:34:14.920

我想你搜索这样的东西？

```
 int countAtr= text.getAttributeCount();
    if(countAtr > 0) {
        attrs = new HashMap<String,String>(acount);
        for(int i=0;x<countAtr;x++) {
            attrs.put(parser.getAttributeName(x), parser.getAttributeValue(x));
        }
    } 
```

# ios - Storyboard、NavigationController、横向和滚动视图坐标

> ID：12053670
> 
> 赞同：0
> 
> 时间：2012-08-21T11:17:07.367
> 
> 标签：ios, orientation, uistoryboard

我面临一个由我不明白的方向魔法引起的问题。首先，我使用的是加载 ViewController 的 NavigationController。在这个 ViewController 中是一个 ScrollView。当我询问 ScrollView 的位置时，我得到了错误的数据。例如： ScrollView 的 x 坐标在界面生成器中是 90。如果我以编程方式获取 ScrollView 的框架，它会返回 280。应用程序中的所有内容都设置为横向。在 Info.plist 中，在摘要中，在 ViewControllers 的实现中，在界面构建器中。

我做了一些截图。也许他们是在帮助找出错误。

![摘要中的设置](../Images/aa3186bbf98d3fcb9396232721e955b1.png)

![ScrollView 的界面构建器中的框架](../Images/4891fa532ba11f37357f73e1f18bebda.png)

![实现中的框架，其中 bar 与界面构建器不同](../Images/ca8ce3d286a936087d62e7001f1f1362.png)

![包含 ScrollView 的 ViewController 的设置](../Images/5c65039d8f2cd54af1690121c473d69c.png)

每个 ViewController 都有这个：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return UIInterfaceOrientationIsLandscape(interfaceOrientation);
} 
```

如果我从 Storyboard 中删除 NavigationController 并将模拟指标留给推断，那么第一个 ViewController 会在 Storyboard 中切换为纵向。

当我从 NavigationController 记录视图的大小时，它是纵向的吗

```
NSLog(@"frame %@", NSStringFromCGRect(self.view.frame)); 
```

输出为 768x1024

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T12:04:21.930

我认为当您从框架计算 x 时，通常必须考虑方向，这就是它们具有变换的原因？[iPhone SDK：方向（横向和纵向视图）](https://stackoverflow.com/questions/431165/iphone-sdk-orientation-landscape-and-portrait-views)

简单地在框架中查询 X 值不会总是给你准确的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T12:40:14.077

问题是使用的方法，即`viewDidLoad:`方法。那时还没有绘制子视图，也没有初始化任何帧，所以问题是一致的。

而不是使用`viewDidLoad:`使用`viewWillAppear:animated:`or`viewDidAppear:animated:`会为你解决问题。

快乐编码:)

# c - 是指针常量还是变量常量？

> ID：12053676
> 
> 赞同：-2
> 
> 时间：2012-08-21T11:17:32.063
> 
> 标签：c

> **可能重复： const int*、const int * const、int const ***[常量指针](https://stackoverflow.com/questions/6407041/constant-pointer)
> [有什么区别](https://stackoverflow.com/questions/1143262/what-is-the-difference-between-const-int-const-int-const-int-const)

这两种说法有区别吗？

```
void * const sam; 
```

和

```
void const *sam; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T11:20:15.340

```
void * const sam; 
```

指针是只读的。限定符在`*`.

```
void const *sam; 
```

*指针*是只读的。限定符在`*`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T11:20:54.020

```
const int * Constant 
```

声明 Constant 是一个指向常量整数的变量指针，并且

```
int const * Constant 
```

是一种替代语法，它做同样的事情，而

```
int * const Constant 
```

声明 Constant3 是指向变量整数的常量指针，并且

来源：

[http://duramecho.com/ComputerInformation/WhyHowCppConst.html](http://duramecho.com/ComputerInformation/WhyHowCppConst.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T11:21:34.433

是的。

改成`void`之后`int`

```
int * const sam;
sam = NULL; /* invalid */
*sam = 42; /* valid */ 
```

或者

```
int const *sam;
sam = NULL; /* valid */
*sam = 42; /* invalid */ 
```

# android - 识别从哪里发送 Intent

> ID：12053678
> 
> 赞同：1
> 
> 时间：2012-08-21T11:17:35.223
> 
> 标签：android, android-intent

我使用条形码扫描仪扫描一些代码。为此，我在条形码扫描仪中调用扫描操作意图。

问题是我想在我的主要活动中为不同的目的（不同的代码类型扫描）从 2 种不同的方法发送它。由于我只有一个答案，`onActivityResult()`如何区分 Intent 呼叫的开始位置？

我可以使用一些标志或标签或任何东西吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T11:32:15.670

您可以`requestCode`在开始活动时提供。然后，这将在覆盖时返回`onActivityResult`。通过这种方式，您可以区分请求。

```
private static final int METHOD_1_ID = 1;
private static final int METHOD_2_ID = 2;

private void sendIntentFromMethod2(){
    startActivityForResult(yourIntent, METHOD_2_ID);
}

private void sendIntentFromMethod1(){
    startActivityForResult(yourIntent, METHOD_1_ID);
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data){
   if (requestCode == METHOD_1_ID){
        // ...
   }else if(requestCode == METHOD_2_ID){
        // ... 
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T11:24:31.770

最简单的方法之一是在意图中传递例如 int extra，从活动 A 传递 1，从活动 B 传递 2。然后使用 get extra 并读取数字，现在您知道该意图源自哪个活动。当然还有更复杂的方法，但这是最简单的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T11:26:30.380

发送 Intent 时使用此

```
Intent.putExtra("caller", caller_id) 
```

接收意图使用时

```
Bundle extras = getIntent().getExtras();
int id = extras.getInt("caller"); 
```

在调用 setResult 之前

```
intent.puInt("phrase", id); 
```

在 onActivityResult 使用

```
Bundle  extras =  intent.getExtras();
int id = extras.getId( "selection" ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T11:39:40.600

如果你像这样开始一个 sacn 条形码的活动

```
 startActivityForResult(intent,0); 
```

**然后从两种不同的方法，像这样改变你的电话**

//从第一个方法

```
 startActivityForResult(intent,1); 
```

//从第二种方法

```
 startActivityForResult(intent,2); 
```

然后

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
   if(requestCode==1)
{
//This is result for 1st method
}
   else if(requestCode==2)
{
//This is result for 2st method
} 
```

}

***编辑：啊，giZm0 的答案更简单！***

# wcf - 如何强制 Unity App Block 在 WCF 中加载新的对象实例？

> ID：12053681
> 
> 赞同：2
> 
> 时间：2012-08-21T11:17:38.797
> 
> 标签：wcf, entity-framework, c#-4.0, dependency-injection, unity-container

我正在使用 Unity Application Block 加载我的依赖项，我遇到的一个问题是，当我的所有依赖项都加载时，它的行为异常。

我有一个使用构造函数注入采用业务接口的服务，并且该业务接口采用存储库接口作为构造函数注入。我遇到的问题是，当我从数据库加载用户详细信息时，字段值总是相同的（即使我在数据库中手动更改了它们）。因此我认为这是因为每次打开服务时它都使用相同的实例 EntityFramework 上下文实例。

我可以让实体框架加载正确详细信息的唯一方法是回收 IIS。

有没有一种方法可以强制 Unity 为其依赖项创建新的对象实例，并在 WCF 请求完成时强制它们被释放？我曾尝试使用瞬态生命周期管理器，但这并不能解决问题。

**代码：**

```
public class UserService : IUserService
{
    private IUserAdmin _UserBusiness { get; set; }

    public UserService()
    {

    }

    [InjectionConstructor]
    public UserService(IUserAdmin userBusiness)
        : this()
    {
        this._UserBusiness = userBusiness;
    }
}

public class UserAdmin : BusinessBase, IUserAdmin
{
    private IRepository<DBUserAccount> _UserRepository { get; set; }

    [InjectionConstructor]
    public UserAdmin(IRepository<DBUserAccount> userRepository)
    {
        this._UserRepository = userRepository;
    }
}

public class GenericRepository<T> : IDisposable, IRepository<T> where T : class, new()
{
    private Entities _Context;

    private ObjectSet<T> _ObjectSet;

    public GenericRepository()
    {
        this._Context = new Entities();
        this._ObjectSet = this._Context.CreateObjectSet<T>();
    }
} 
```

统一配置：

```
<register type="Services.Contracts.IUserService, Server.Services, Version=1.0.0.0, Culture=neutral, PublicKeyToken= 683f160d975782be"
            mapTo="Services.Implementations.UserService, Server.Services, Version=1.0.0.0, Culture=neutral, PublicKeyToken= 683f160d975782be">
    <lifetime type="transient"/>
  </register>
<register type="Server.Business.Users.IUserAdmin, Server.Business, Version=1.0.0.0, Culture=neutral, PublicKeyToken= 683f160d975782be"
            mapTo="Server.Business.Users.UserAdmin, Server.Business, Version=1.0.0.0, Culture=neutral, PublicKeyToken= 683f160d975782be">
    <lifetime type="transient"/>
  </register>
<register type="Server.DataLogic.IRepository`1[[Server.DataModels.DBUserAccount, Server.DataModels, Version=1.0.0.0, Culture=neutral, PublicKeyToken= 683f160d975782be]], Server.DataLogic, Version=1.0.0.0, Culture=neutral, PublicKeyToken= 683f160d975782be"
            mapTo="Server.DataLogic.GenericRepository`1[[Server.DataModels.DBUserAccount, Server.DataModels, Version=1.0.0.0, Culture=neutral, PublicKeyToken= 683f160d975782be]], Server.DataLogic, Version=1.0.0.0, Culture=neutral, PublicKeyToken= 683f160d975782be">
    <lifetime type="transient"/>
  </register> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T14:09:29.383

您似乎还没有在应用程序中实现*工作单元模式。*Unity 配置看起来正确，但似乎您的更改没有被提交。查看[EntityFramework 团队的这篇博文](http://blogs.msdn.com/b/adonet/archive/2009/06/16/using-repository-and-unit-of-work-patterns-with-entity-framework-4-0.aspx)，了解如何实现它。[您还应该确保您的实现在提交此 SO 问题和答案](https://stackoverflow.com/questions/4366191/entity-framework-and-wcf-returning-entities-attached-to-context)中讨论的工作单元时正确处理 EntityFramework 上下文

# jquery - 每 N 秒将一个类名移动到下一个同级

> ID：12053683
> 
> 赞同：6
> 
> 时间：2012-08-21T11:17:53.167
> 
> 标签：jquery

我有一个清单如下：

```
<ul>
  <li class="highlighted">Item 1</li>
  <li>Item 2</li>
  <li>Item 3</li>
</ul> 
```

每隔 N 秒，我想将“突出显示”类移动到下一个元素。当没有更多兄弟姐妹时，请返回并从头开始。

有人可以帮助 jQuery 来完成这个吗？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T11:27:22.477

这样的事情应该这样做：

HTML：

```
<ul id="myList">
  <li class="highlighted">Item 1</li>
  <li>Item 2</li>
  <li>Item 3</li>
</ul> 
```

javascript:

```
$(function() {
    var lis = $("#myList > li"),
        currentHighlight = 0;
        N = 5;//interval in seconds
    setInterval(function() {
        currentHighlight = (currentHighlight + 1) % lis.length;
        lis.removeClass('highlighted').eq(currentHighlight).addClass('highlighted');
    }, N * 1000);
}); 
```

**[演示](http://jsfiddle.net/QtscF/)**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-21T11:28:11.027

好的，所以基本上你会做这样的事情

```
 function highlight_next_li() {
        var current = jQuery('.highlighted'); // get the current highlighted
        var next = current.next();

        // if no next then we're at the end
        if( !next.length )
            next = current.parent().find('li:first'); // get the first li element in the parent

        next.addClass('highlighted');
        current.removeClass('highlighted');
    } 
```

然后你会想要使用 setinterval .. setinterval 每 X 毫秒重复一个 set 函数..

```
 var myinterval = setInterval( highlight_next_li, 3000 ); // repeat that javascrispt every 3 seconds 
```

那么当你想停止重复时

```
 clearInterval( myinterval ); 
```

这是一支笔，您可以看到它的实际效果：[http ://codepen.io/sagetarian/pen/dpKku](http://codepen.io/sagetarian/pen/dpKku)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T11:37:54.263

可以看出，有很多不同的方法可以做到这一点......可以跟踪变量等中的当前项目

无论如何，我将展示另一个，我认为这种方式很简洁，它可以处理列表的动态变化。

依赖于给 ul 一个 id 或类，以某种方式来识别它，以便它可以被定位，当然，如果你正在动态更改列表，则需要确保在更改后仍然有一个突出显示。

```
<!doctype html>
<html>
<head>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
    <script type="text/javascript">
        setInterval(nextSibling, 10000);

        function nextSibling()
        {
            var family = $('#family').children();
            var i = $(family).filter('.highlighted').index();
            $(family[i]).removeClass('highlighted');
            $(family[(i+1)%family.length]).addClass('highlighted');
        }
</script>
<style>
    .highlighted { background: #dddddd; }
</style>

</head>
<body>
    <ul id="family">
      <li class="highlighted">Item 1</li>
      <li>Item 2</li>
      <li>Item 3</li>
    </ul>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T11:30:20.603

```
var n = 1;
setInterval(function() {
  var $li = $("li.highlighted"),
      $siblings = $li.siblings().andSelf(),
      next = ($li.index() + 1) % $siblings.length;
  $li.removeClass("highlighted");
  $siblings.eq(next).addClass("highlighted");
}, n * 1000);​ // Run every n seconds 
```

[小提琴](http://jsfiddle.net/RM2qc/1/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T11:33:27.093

我试图实现你正在寻找的东西。[http://jsfiddle.net/wudhd/](http://jsfiddle.net/wudhd/)
你可以看看jquery 的[setTimeout](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)和[nth-child](http://api.jquery.com/nth-child-selector/)来完成同样的事情。

# iphone - 从 url 获取图像不清晰

> ID：12053684
> 
> 赞同：0
> 
> 时间：2012-08-21T11:17:56.350
> 
> 标签：iphone, objective-c

```
I am working on one application where i have to load images from server. 
```

我正在尝试从应用商店的链接加载应用程序屏幕截图。我得到了图像，但不是那么清晰。我在背景中获取图像，一切正常。但生成的图像看起来有点模糊。我正在视网膜显示器中测试此图像。任何人都知道为什么会这样。任何解决方案都会有所帮助。

谢谢，

这是我的图像加载代码：

```
// This will create the imageview with required frame & use the url to load the image
-(void)loadAppsScreenShots:(int)i Frame:(CGRect)frame withImageUrl:(NSString *)urlStr
{
    UIImageView *appImageView = [[UIImageView alloc] init];
    frame.origin.x = 0;
    appImageView.frame = frame;
    appImageView.tag = i;
    sharedImageCache = [ImageCache sharedImageCacheInstance];
    UIImage *image1 = [sharedImageCache getCachedImage:[NSString stringWithFormat:@"%@",urlStr]];
    if (image1==nil) 
    {       
        // Show indicator till image loads     
        UIActivityIndicatorView *indiView = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhite];
        indiView.center = CGPointMake(appImageView.frame.size.width/2, appImageView.frame.size.height/2);
        [appImageView addSubview:indiView];
        [indiView startAnimating];
        indiView.hidden = FALSE;

        // Show label indicating image loading process 
        UILabel *loadingLbl = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 200, 25)];
        loadingLbl.text = @"";//@"Please wait...";
        loadingLbl.center = CGPointMake(appImageView.frame.size.width/2 + 5, appImageView.frame.size.height/2 + 23);
        loadingLbl.font = [UIFont fontWithName:@"Helvetica-Bold" size:15.0f];
        loadingLbl.textAlignment = UITextAlignmentCenter;
        loadingLbl.backgroundColor = [UIColor clearColor];
        loadingLbl.textColor = [UIColor whiteColor];
        [appImageView addSubview:loadingLbl];
        [appImageView sendSubviewToBack:loadingLbl];

        loadingLbl.hidden = FALSE;
        // Dictionalry to get all objects & pass it to method where we load the data
        NSMutableDictionary *dict = [[NSMutableDictionary alloc] init];

        [dict setObject:appImageView forKey:@"imageView"];
        if (urlStr != nil) {
            [dict setObject:urlStr forKey:@"url"];
        }
        [dict setObject:indiView forKey:@"indi"];
        [dict setObject:loadingLbl forKey:@"loadingLbl"];
        [self performSelectorInBackground:@selector(loadImageFromURLAndSaveInDocDir:) withObject:dict];
    }
    else 
    {
        appImageView.image = image1;
    }
    [[appView viewWithTag:i] addSubview:appImageView];
    [appView bringSubviewToFront:appImageView];
    appImageView.contentMode = UIViewContentModeScaleAspectFit;

    appImageView=nil;
}

-(void)loadImageFromURLAndSaveInDocDir:(NSMutableDictionary *)dict
{
    @autoreleasepool 
    {
        UIImageView *cellImageViewObj = [dict objectForKey:@"imageView"];
        NSString *url;
        UIActivityIndicatorView *indiview = [dict objectForKey:@"indi"];
        UILabel *Lbl = [dict objectForKey:@"loadingLbl"];        

        if ([dict objectForKey:@"url"]) 
        {
            url = [dict objectForKey:@"url"];

            // fetch the data
            NSURL *imgURL = [NSURL URLWithString:url];
            NSData *imgData = [NSData dataWithContentsOfURL:imgURL];
            NSString *filename = [Utils getFileNameFromURL:url];
            // Cache the image
            [sharedImageCache cacheImage:[NSString stringWithFormat:@"%@",filename] :imgData];
            UIImage *image1 = [[UIImage alloc] initWithData:imgData];
            cellImageViewObj.image = image1;
            image1=nil;
        }
        else {
            url = @"";
        }
        // set the content mode & hide the indicator & label
        cellImageViewObj.contentMode = UIViewContentModeScaleAspectFit;
        [indiview stopAnimating];
        indiview.hidden = TRUE;
        Lbl.hidden = TRUE;
        dict = nil;
    }
} 
```

我在做什么错。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T11:27:40.983

问题是您以自然大小显示图像。在 Retina 设备上，您需要的图像宽度和高度是它们进入的视图的两倍。

假设图像是 200x200，您将在 100x100 视图中显示它。正确的方法是：

*   获取数据的 CGImageRef

*   使用下面的方法和 2 的比例创建一个 UIImage（对于视网膜）

    *   (UIImage *)imageWithCGImage:(CGImageRef)imageRef scale:(CGFloat)scale 方向:(UIImageOrientation)orientation

结果是一个大小为 100x100 但比例为 2 的图像。

* * *

也就是说，由于您指定了“UIViewContentModeScaleAspectFit”，因此您可以只获取 200x200 的图像并将其发送到 UIImageView，但在这种情况下，您必须强制 imageView 的 frame.size 为 100x100。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T11:37:07.527

如果图像大小与 imageview 不同，那么您可以根据您的视图按比例缩放服务器图像。

```
- (UIImage *)imageByScalingProportionallyToSize:(CGSize)targetSize;

- (UIImage *)imageByScalingProportionallyToSize:(CGSize)targetSize {

    UIImage *sourceImage = self;
    UIImage *newImage = nil;

    CGSize imageSize = sourceImage.size;
    CGFloat width = imageSize.width;
    CGFloat height = imageSize.height;

    CGFloat targetWidth = targetSize.width;
    CGFloat targetHeight = targetSize.height;

    CGFloat scaleFactor = 0.0;
    CGFloat scaledWidth = targetWidth;
    CGFloat scaledHeight = targetHeight;

    CGPoint thumbnailPoint = CGPointMake(0.0,0.0);

    if (CGSizeEqualToSize(imageSize, targetSize) == NO) {

        CGFloat widthFactor = targetWidth / width;
        CGFloat heightFactor = targetHeight / height;

        if (widthFactor &lt; heightFactor) 
            scaleFactor = widthFactor;
        else
            scaleFactor = heightFactor;

        scaledWidth  = width * scaleFactor;
        scaledHeight = height * scaleFactor;

        // center the image

        if (widthFactor &lt; heightFactor) {
            thumbnailPoint.y = (targetHeight - scaledHeight) * 0.5; 
        } else if (widthFactor &gt; heightFactor) {
            thumbnailPoint.x = (targetWidth - scaledWidth) * 0.5;
        }
    }

    // this is actually the interesting part:

    UIGraphicsBeginImageContext(targetSize);

    CGRect thumbnailRect = CGRectZero;
    thumbnailRect.origin = thumbnailPoint;
    thumbnailRect.size.width  = scaledWidth;
    thumbnailRect.size.height = scaledHeight;

    [sourceImage drawInRect:thumbnailRect];

    newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    if(newImage == nil) NSLog(@"could not scale image");

    return newImage ;
} 
```

# c# - 将 WPF 中的选项卡内容分配给页面

> ID：12053685
> 
> 赞同：1
> 
> 时间：2012-08-21T11:17:57.563
> 
> 标签：c#, wpf, tabcontrol, tabitem, contentcontrol

我正在尝试向我的应用程序添加动态选项卡。现在，如果我单击一个按钮，它将打开一个新页面。我想要的是在新选项卡中打开此页面。但是当我将标签内容设置为页面时，代码会抱怨。我想做这样的事情

```
private void bttnGoToClientsOnClick(object sender, RoutedEventArgs e)
{
    var content = new TextBlock();
    TabItem tab = new TabItem();
    tab.Header = "Search Page";
    SearchPage sp = new SearchPage();
    tab.Content = sp;
    tabControl.Items.Add(tab);
    this.NavigationService.Navigate(sp);
} 
```

有什么方法可以将我的页面转换为用户控件或将其转换为用户控件

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T11:56:12.290

您始终可以直接在 XAML 定义中创建自己的用户控件（即使它们是部分页面或窗口）。

在此示例中，我假设您的 SearchClass 是在 [YourProject].Model 命名空间中定义的（其中 [YourProject] 是您的项目的名称）

```
<UserControl x:Class="WpfApplication1.UserControl1"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:search="clr-namespace:[YourProject].Model">
    <search:SearchClass>
        <!--<Grid>
            ...ANYTHING YOU WANT HERE ! ...
        </Grid>-->
    </search:SearchClass>
</UserControl> 
```

现在您可以创建 UserControl 的实例，甚至在 XAML 或代码隐藏中（请记住仅正确声明命名空间！）：

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:ctrls="clr-namespace:WpfApplication1"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <Grid>
        <UserControl1 />
    </Grid>
</Window> 
```

...这是我的代码隐藏...

```
UserControl1 myControl = new UserControl1(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T11:28:42.580

> 但是当我将标签内容设置为页面时，代码会抱怨。

如果你在这里更具体一点也不会受到伤害:)

什么是`SearchPage`类？它似乎不是 WPF 框架的一部分。我在 [http://www.intersoftpt.com/](http://www.intersoftpt.com/)网站上搜索了它。是这样吗？

`TabItem.Content`需要是`ContentControl`类型，`SearchPage`显然不是。我确定您需要将此`SearchPage`对象嵌入到某些控件演示器（例如面板）中，然后才能将其分配给`TabItem.Content`.

* * *

**更新：**

试试这个，然后：

```
TabItem tab = new TabItem();
tab.Header = "Search Page";
SearchPage sp = new SearchPage();
this.NavigationService.Navigate(sp);
// ---------------------------------------------------- 
var frame = new Frame(); // !
frame.Navigate(sp);  // !
tab.Content = frame; // !
// ---------------------------------------------------- 
tabControl.Items.Add(tab); 
```

虽然我相信这应该可行，但我还没有测试过。如果它不起作用，请告诉我。

# javascript - Backbone，Coffeescript - 在 AJAX 中将函数作为回调传递

> ID：12053687
> 
> 赞同：2
> 
> 时间：2012-08-21T11:18:15.333
> 
> 标签：javascript, backbone.js, coffeescript

在我的 Backbone View 中，我有两种方法，一种是简单的 AJAX 调用，另一种是我要运行的回调函数。我想用回调函数作为参数调用 AJAX 方法。

```
call_ajax_function: =>
  @get_stuff(@my_callback)

get_stuff: (callback_function) =>
  $.ajax
    url:'get_something'
    success: =>
      callback_function

my_callback: =>
  console.log "hello" 
```

但我不认为“my_callback”被调用。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T11:24:25.313

你需要调用你的函数，尝试改变

```
get_stuff: (callback_function) =>
  $.ajax
    url:'get_something'
    success: =>
      callback_function 
```

至

```
get_stuff: (callback_function) ->
  $.ajax
    url:'get_something'
    success: (data) => #success takes arguments, pass them thru
      callback_function(data) 
```

我**认为**你不需要`get_stuff`像你正在做的那样传递论点。所以我认为这应该有效

```
get_stuff: ->
  $.ajax
    url:'get_something'
    success: (data) => 
      @callback_function(data) 
```

另外，它应该具有回调的上下文将是实例的优点，即在回调执行`@`中将是正确的实例。

如果要动态指定回调方法，并且要指定该方法执行的范围，则需要`call`像这样使用

```
get_stuff: (onSuccess)->
      $.ajax
        url:'get_something'
        success: (data) => 
          onSuccess.call @, data 
```

请注意，在类上定义方法时，我不打算给`=>`你买任何东西。用于`->`那些方法。`=>`当您想在匿名函数中查看上下文时使用。

# ruby - 在 Rails 引擎中使用能力类

> ID：12053688
> 
> 赞同：2
> 
> 时间：2012-08-21T11:18:18.020
> 
> 标签：ruby, ruby-on-rails-3.2, cancan

我在名为 Support 的 lib 文件夹中有一个引擎。在那个文件夹中，我有一个`Ticket`控制器。

我在主应用程序中创建了一个能力类，我正在尝试为管理员角色管理所有模型。当我调用`Tickets`控制器时，它会引发错误：

`NameError in Support::TicketsController#index uninitialized constant Ticket`

**app/model/ability.rb**文件是：

```
class Ability 
  include CanCan::Ability

  def initialize(user)
    user ||= User.new
    if user.role? == :admin
      can :manage , :all
    end
  end
end 
```

**lib/support/tickets_controller.rb**文件是：

```
module Support
  class TicketsController < Support::ApplicationController
    load_and_authorize_resource
    respond_to :html, :xml, :json

    def index
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T08:33:52.170

如果模型类的命名空间与控制器不同，则需要指定该`:class`选项。

```
module Support
  class TicketsController < ApplicationController
    load_and_authorize_resource :class => Support::Ticket
  end
end 
```

# makefile - 如何将 Clang 诊断保存到文件中？

> ID：12053698
> 
> 赞同：4
> 
> 时间：2012-08-21T11:19:06.423
> 
> 标签：makefile, clang

我正在编写一个 Web 服务器，主要用于练习，并决定开始学习 make 和 makefile。我的目标是自动构建到我的 vps，使用 Clang/LLVM 构建软件，并将诊断结果保存到文本文件中，以便将脚本提交到我的电子邮件地址。我似乎无法实现的是将诊断结果保存到我的文件中。

虽然我的 Clang 构建成功，并生成了诊断，并且我的 makefile 似乎工作，但我未能从 makefile 内部和命令行重定向诊断。

我的makefile（工作正常，但稍作修改以适应保存结果的需要）：

```
# Makefile to build Ironman HTTP Server
# We will use the clang frontend from the llvm compiler infrastructure
# for building

# --- targets
Ironman : 
        clang -o Ironman src/Ironman.c > report

# --- remove binary and executable files
clean:
        rm -f Ironman
        rm -f report 
```

我怀疑（我在这里可能大错特错）发生这种情况是因为 clang 并没有真正**返回**诊断信息，它只是打印它们。我不知道是不是这种情况，Clang 用户指南并没有提出类似的建议。

**[编辑]：**我玩了一下 Clang，发现在成功编译时它返回 0。我测试它的方法是：

```
$ clang <source_file.c>
$ echo $?
0 
```

这表明我的理论可能是正确的，这使事情变得复杂：-\

有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T11:28:40.787

像任何其他程序一样，Clang 将诊断信息输出到 stderr。您可以像这样将 stderr 重定向到 stdout：

```
Ironman : 
    clang -o Ironman src/Ironman.c > report 2>&1 
```

# .net - 带有 ADF 的 wia 扫描仪不公开属性 3078 (SheetFeederRegistration)

> ID：12053700
> 
> 赞同：0
> 
> 时间：2012-08-21T11:19:09.473
> 
> 标签：.net, scanning, wia

我有一台带 ADF 的兄弟扫描仪。ADF 在 win 传真和扫描中效果很好，但是当我通过 WIA 访问它时，我尝试将进纸器设置为 1。问题是在遍历属性 id 时，它永远不会达到 3078。

这是它确实公开的 id 列表

```
4098,4099,4101,4102,4103,4104,4105,4106,4107,4108,4109,
4110,4111,4112,4113,4114,4116,4118,4120,4123,6146,6147,
6148,6149,6150,6151,6152,6153,6154,6155,6156,6157,6159,6161 
```

这是我的代码

```
Dim cl = New CommonDialog
    Dim scanner = cl.ShowSelectDevice(WiaDeviceType.ScannerDeviceType, False, False).Items(1)
    Dim ids = (From x As WIA.Property In scanner.Properties Select x.PropertyID).ToList
    ids.Sort()
    MessageBox.Show(ids.Joined)
    For Each prp As WIA.Property In scanner.Properties
        Dim iprp = CType(prp, IProperty)
        Select Case prp.PropertyID
            Case 3078
                MessageBox.Show("going to set " & prp.PropertyID)
                iprp.let_Value(1)
        End Select
    Next 
```

有任何想法吗？

我没有锁定WIA，如果有更好的图书馆，我会感兴趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T15:20:27.317

答案是这个优秀的图书馆：[http ://code.google.com/p/twaindotnet/](http://code.google.com/p/twaindotnet/)

奇迹般有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-22T12:45:49.827

问题在这里：

```
Dim scanner = cl.ShowSelectDevice(WiaDeviceType.ScannerDeviceType, False, False).Items(1); 
```

您要访问的属性在这里：

```
cl.ShowSelectDevice(WiaDeviceType.ScannerDeviceType, False, False); 
```

# javascript - NodeJS 是否重用已加载的模块并共享它的值？

> ID：12053702
> 
> 赞同：7
> 
> 时间：2012-08-21T11:19:11.213
> 
> 标签：javascript, node.js

我开始在 NodeJS 中构建我的项目并且想知道

*   NodeJS 是否会为需要相同模块的模块重用已加载的模块？
*   模块是否在需要它们的模块之间保持相同的“状态”？
*   如果其中一个或两个都发生，会有什么问题？是否正面临类似于*循环`setTimeout`*和*异步*代码的问题？

* * *

目前我已经测试了 4 个文件

*   `common.js`

    ```
    var i = 0;

    function add(v){i += v;}
    function view(){console.log(i);}

    module.exports = {
        add : add,
        view : view
    } 
    ```

*   `a.js`和`b.js`

    ```
    exports.common = require('./common.js'); 
    ```

*   `server.js`

    ```
    var a = require('./a.js'),
        b = require('./b.js');

    function start(){
        http.createServer(function (req, res) {

            a.common.add(2);
            a.common.view();

            b.common.add(4);
            b.common.view();

            a.common.view();

            res.writeHead(200, {'Content-Type': 'text/plain'});
            res.end('Hello World\n');
        }).listen(config.port, config.address || '127.0.0.1');
        console.log('Server running');
    } 
    ```

结果给了我一个暗示性的结果：

```
2  - view() via a.js on favicon request
6  - view() via b.js on favicon request
6  - view() via a.js on favicon request
8  - view() via a.js
12 - view() via b.js
12 - view() via a.js 
```

即使两个单独的模块需要它，它似乎也确实共享模块，甚至跨模块和跨请求保持状态

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T11:33:21.023

Node.js 出于明显的性能原因缓存模块。

来自[Node.js 网站的](http://nodejs.org/api/modules.html#modules_caching)声明：

> 模块在第一次加载后被缓存。这意味着（除其他外）每次调用都`require('foo')`将返回完全相同的对象，如果它会解析为同一个文件。
> 
> 多次调用`require('foo')`可能不会导致模块代码被多次执行。这是一个重要的特点。有了它，可以返回“部分完成”的对象，从而允许加载传递依赖项，即使它们会导致循环。如果你想让一个模块多次执行代码，那么导出一个函数，然后调用那个函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T11:33:10.037

是的，所有模块在第一次加载后都会被缓存。[您可以在官方 node.js 文档](http://nodejs.org/api/modules.html#modules_caching)中阅读有关模块缓存的更多信息。

# javascript - 使用 AddThis 配置向两个 Google Analytics 配置文件报告 - data_ga_property

> ID：12053708
> 
> 赞同：1
> 
> 时间：2012-08-21T11:19:48.967
> 
> 标签：javascript, google-analytics, social-networking, addthis, web-analytics

我正在使用 AddThis 小部件包括在我的网站上显示社交按钮。我希望能够使用 Google Analytics 跟踪点击，并且[文档](http://support.addthis.com/customer/portal/articles/381260-google-analytics-integration#.UDNtaqPTCik)似乎支持这一点。但是，我想对*两个*不同的配置文件进行活动。

`addthis_config`似乎只取一个值，这`data_ga_property`意味着我无法向我的本地和全球 GA 配置文件报告。

有没有办法向两个配置文件报告？

```
<script type="text/javascript">
     var addthis_config = {
                           data_ga_property: 'UA-18721873-1',           
                           data_ga_social: true
                          };
</script>   
<script type="text/javascript" src="http://s7.addthis.com/js/25/addthis_widget.js#username=xa-hsakjdhsakjdhkjsdhakjdshkjdh"></script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T20:12:05.227

默认情况下，一个帐户下的所有配置文件都将接收未通过 GA 中的过滤器管理选项卡过滤的帐户的所有数据。

你不需要做任何事情来让你想要的事情发生，除非你已经做了一些事情来故意阻止它。

# c# - 如何暴露 IObservable 不使用主题的属性 支持场

> ID：12053709
> 
> 赞同：27
> 
> 时间：2012-08-21T11:19:53.647
> 
> 标签：c#, system.reactive

在[这个回答](https://stackoverflow.com/a/12034362/1367)关于`Subject<T>`Enigmativity 的问题中提到：

> 顺便说一句，您应该尽量避免使用主题。一般规则是，如果您使用主题，那么您做错了什么。

我经常使用主题作为`IObservable`属性的支持字段，这在 Rx 之前可能是 .NET 事件。例如，而不是类似的东西

```
public class Thing
{
    public event EventHandler SomethingHappened;

    private void DoSomething()
    {
        Blah();
        SomethingHappened(this, EventArgs.Empty);
    }
} 
```

我可能会

```
public class Thing
{
    private readonly Subject<Unit> somethingHappened = new Subject<Unit>();
    public IObservable<Unit> SomethingHappened
    {
        get { return somethingHappened; }
    }

    private void DoSomething()
    {
        Blah();
        somethingHappened.OnNext(Unit.Default);
    }
} 
```

那么，如果我想避免使用`Subject`做这种事情的正确方法是什么？或者我应该坚持在我的界面中使用 .NET 事件，即使它们会被 Rx 代码消耗（很可能`FromEventPattern`）？

此外，关于为什么这样使用是一个坏主意的更多细节`Subject`会有所帮助。

**更新**：为了使这个问题更具体一点，我正在谈论使用`Subject<T>`作为从非 Rx 代码（也许您正在使用其他一些遗留代码）进入 Rx 世界的一种方式。所以，像：

```
class MyVolumeCallback : LegacyApiForSomeHardware
{
    private readonly Subject<int> volumeChanged = new Subject<int>();

    public IObservable<int> VolumeChanged
    {
        get
        {
            return volumeChanged.AsObservable();
        }
    }

    protected override void UserChangedVolume(int newVolume)
    {
        volumeChanged.OnNext(newVolume);
    }
} 
```

LegacyApiForSomeHardware 类型不是使用事件，而是让您覆盖虚拟方法，作为获取“刚刚发生”通知的一种方式。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-21T18:52:34.790

一方面，有人可以将 SomethingHappened 投射回 ISubject 并从外部向其中输入内容。至少，应用`AsObservable`它以隐藏底层对象的主体性。

此外，回调的主题广播严格来说不只是一个 .NET 事件。例如，如果一个观察者抛出，则不会调用链中的下一个观察者。

```
 static void D()
    {
        Action<int> a = null;

        a += x =>
        {
            Console.WriteLine("1> " + x);
        };

        a += x =>
        {
            Console.WriteLine("2> " + x);

            if (x == 42)
                throw new Exception();
        };

        a += x =>
        {
            Console.WriteLine("3> " + x);
        };

        a(41);
        try
        {
            a(42);  // 2> throwing will prevent 3> from observing 42
        }
        catch { }
        a(43);
    }

    static void S()
    {
        Subject<int> s = new Subject<int>();

        s.Subscribe(x =>
        {
            Console.WriteLine("1> " + x);
        });

        s.Subscribe(x =>
        {
            Console.WriteLine("2> " + x);

            if (x == 42)
                throw new Exception();
        });

        s.Subscribe(x =>
        {
            Console.WriteLine("3> " + x);
        });

        s.OnNext(41);
        try
        {
            s.OnNext(42);  // 2> throwing will prevent 3> from observing 42
        }
        catch { }
        s.OnNext(43);
    } 
```

一般来说，一旦观察者抛出，调用者就死了，除非你保护每个 On* 调用（但不要随意吞下异常，如上所示）。这对于多播代表也是一样的；例外会向你袭来。

大多数时候，您可以在没有主题的情况下实现您想要做的事情，例如通过使用 Observable.Create 来构造一个新序列。这样的序列没有由多个订阅产生的“观察者列表”；每个观察者都有自己的“会话”（cold observable 模型），因此观察者的例外无非是在有限区域内发出自杀命令，而不是在广场中间炸毁自己。

本质上，主题最好用在反应式查询图的边缘（对于需要由提供数据的另一方寻址的入口流，尽管您可以为此使用常规 .NET 事件并使用 FromEvent* 将它们桥接到 Rx方法）以及用于在反应式查询图中共享订阅（使用发布、重播等，它们是变相的多播调用，使用主题）。使用主题的危险之一 - 由于它们的观察者列表和潜在的消息记录而非常有状态 - 是在尝试使用主题编写查询运算符时使用它们。99.999% 的情况下，这样的故事都有一个悲伤的结局。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-27T16:11:07.760

在[Rx 论坛上的回答中](http://social.msdn.microsoft.com/Forums/en-US/rx/thread/654e0f0d-f660-479c-9200-742b1f7db21e)，Dave Sexton（[Rxx](http://rxx.codeplex.com/)的）在回答某事时说：

> 主题是 Rx 的有状态组件。当您需要创建类似事件的可观察对象作为字段或局部变量时，它们很有用。

这个问题到底是怎么回事，他还写了一篇关于[使用主题还是不使用主题的深入跟进博客文章？](http://davesexton.com/blog/post/To-Use-Subject-Or-Not-To-Use-Subject.aspx)最后是：

> **我什么时候应该使用主题？**
> 
> 当以下所有条件都为真时：
> 
> *   您没有可观察的或任何可以转换为可观察的东西。
> *   你需要一个 hot observable。
> *   你的 observable 的范围是一种类型。
> *   您不需要定义类似的事件，并且不存在类似的事件。
> 
> **在这种情况下我为什么要使用主题？**
> 
> 因为你别无选择！

因此，回答“为什么像这样使用 Subject 是一个坏主意的详细信息”的内在问题 - 这不是一个坏主意，这是少数几个使用 Subject 的地方之一是正确的做事方式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T14:52:08.570

虽然我不能直接说 Enigmativity，但我想这是因为它非常低级，你不需要直接使用它；[`Subject<T>`该类](http://msdn.microsoft.com/en-us/library/hh229173%28v=vs.103%29.aspx)提供的所有内容都可以通过使用[System.Reactive.Linq](http://msdn.microsoft.com/en-us/library/hh211929%28v=vs.103%29)命名空间中的类来实现。

以`Subject<T>`文档中的示例为例：

```
Subject<string> mySubject = new Subject<string>();

//*** Create news feed #1 and subscribe mySubject to it ***//
NewsHeadlineFeed NewsFeed1 = new NewsHeadlineFeed("Headline News Feed #1");
NewsFeed1.HeadlineFeed.Subscribe(mySubject);

//*** Create news feed #2 and subscribe mySubject to it ***//
NewsHeadlineFeed NewsFeed2 = new NewsHeadlineFeed("Headline News Feed #2");
NewsFeed2.HeadlineFeed.Subscribe(mySubject); 
```

这可以通过[类](http://msdn.microsoft.com/en-us/library/hh244252%28v=vs.103%29)上的[`Merge`扩展方法](http://msdn.microsoft.com/en-us/library/hh229330%28v=vs.103%29)轻松实现：[`Observable`](http://msdn.microsoft.com/en-us/library/hh244252%28v=vs.103%29)

```
IObservable<string> feeds = 
    new NewsHeadlineFeed("Headline News Feed #1").HeadlineFeed.Merge(
    new NewsHeadlineFeed("Headline News Feed #2").HeadlineFeed); 
```

然后您可以正常订阅。使用`Subject<T>`只是使代码更复杂。如果您要使用，`Subject<T>`那么您应该对扩展方法失败的可观察对象进行一些非常低级的处理。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-22T08:10:57.200

对于具有简单一次性事件的类，一种`ToObservable`方法是提供一种基于事件创建有意义的冷可观察对象的方法。这比使用 Observable 工厂方法更具可读性，并且允许不使用 Rx 的开发人员使用 API。

```
 public IObservable<T> ToObservable()
    {
        return Observable.Create<T>(observer =>
        {
            Action notifier = () =>
            {
                switch (Status)
                {
                    case FutureStatus.Completed:
                        observer.OnNext(Value);
                        observer.OnCompleted();
                        break;

                    case FutureStatus.Cancelled:
                        observer.OnCompleted();
                        break;

                    case FutureStatus.Faulted:
                        observer.OnError(Exception);
                        break;                        
                }
            };

            Resolve += notifier;

            return () => Resolve -= notifier;

        });
    } 
```

# html - 尝试使用许多粘性页脚教程，无法修复页脚

> ID：12053719
> 
> 赞同：0
> 
> 时间：2012-08-21T11:20:34.793
> 
> 标签：html, css, footer, sticky-footer

我一直无法让页脚留在我一直使用的模板上的浏览器底部。如果有很多内容可以“下推”页脚，它在 Firefox 上看起来还不错，但我可以在 chrome 中看到它位于页面底部上方的“半空中”，看起来很糟糕。

它一定有问题，但即使在我查看了许多粘性页脚教程之后，似乎也没有一个可以解决问题，它只是“破坏”了页脚，通常使它脱节。我仍然是 html/php 的初学者，所以非常感谢任何帮助，我迫切希望解决这个问题。

我在 jsfiddle 上粘贴了 style.css 和示例页面：http: [//jsfiddle.net/3KZh3/4/](http://jsfiddle.net/3KZh3/4/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T11:05:45.570

```
 Try this one dont forget to add  `position:relative` to it's parent div or element 
   #parent-div{
          position:relative;
    }

    #footer {
        position:absolute;
        bottom:0px;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T11:45:41.933

修复页脚上方分区的最小高度。我认为它会起作用。

否则将页脚的位置属性设置为绝对和底部为0。试试这个希望它会工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T10:59:24.403

尝试这个：

```
#footer {
    position:absolute;
    bottom:0px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T12:37:17.003

我认为您需要`position:fixed` 尝试通过在正文中添加大量虚拟数据来进行实验，以便滚动页面。

```
<!DOCTYPE HTML>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title>Some Page</title>
    <style type="text/css">
        #footer{
            position:fixed;
            bottom:0px;
            background-color: black;
            color:white;
        }
    </style>
</head>
<body>
    <h1>Some Page</h1>
    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
    tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
    quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
    consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
    cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
    proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
    <div id="footer">
        &copy; company name
    </div>
</body>
</html> 
```

我希望这有帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T11:56:05.797

```
position:absolute;
bottom:0; 
```

会让你的页脚停留在底部。但是您必须相应地对其余内容进行一些更改。

看看这个例子：[**这里**](http://jsfiddle.net/3KZh3/5/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-22T03:51:12.490

[http://jsfiddle.net/sheriffderek/varaH/1/](http://jsfiddle.net/sheriffderek/varaH/1/)

我也在努力追根究底。这是我的基本示例。它在响应式网站中变得更加复杂......但我记住这一点是有可能的......希望这会有所帮助？

# android - 在 Eclipse 中无法检测到 Sony Xperia

> ID：12053720
> 
> 赞同：26
> 
> 时间：2012-08-21T11:20:36.063
> 
> 标签：android, eclipse, sony-xperia

我在测试设备上的应用程序方面是全新的，尤其是索尼 Xperia。我正在使用 Android 模拟器测试应用程序，但我现在有一个 Sony Xperia。首先，我通过 USB 将设备连接到笔记本电脑。但是笔记本电脑无法检测到我的手机。Eclipse 检测手机是否需要驱动程序？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-08-21T11:34:15.200

为您的手机下载正确的驱动程序，确保您的手机已启用 USB 调试，然后连接它以继续安装。

从以下网址下载驱动程序：http: [//developer.sonymobile.com/downloads/drivers/](http://developer.sonymobile.com/downloads/drivers/)

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-03-21T09:38:00.240

即使这个问题是很久以前发布的，我也没有从以前的回复中找到 100% 正确的答案。大多数回复都很有用，但这是在 Sony Xperia 设备上调试应用程序的最后一步。
即使我安装了 PC Companion，我的 Sony Xperia T 在 Eclipse 中仍然不可见，在手机中，我设置了开发人员选项调试模式！

**Xperia**有一个很奇怪的选项：
*Settings > Xperia > USB Connectivity > USB connection mode*
并选择**Mass storage mode (MSC)**。
请注意，必须拔下 USB 电缆才能更改此选项。默认情况下，选择媒体传输模式 (MTP)。如果选择了 MTP，即使通知栏中显示小错误也无法调试！

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-05-20T10:27:09.403

这些是我解决问题的步骤：

在索尼 XPERIA Z 上

*   启用 USB 调试 ( [http://developer.android.com/tools/device.html#setting-up](http://developer.android.com/tools/device.html#setting-up) )
*   设置 > 开发人员 > USB 调试 = 已启用
*   设置 > Xperia > USB 连接 > USB 连接模式 = MSC
*   设置 > Xperia > USB 连接 > 安装软件 = 禁用 (!!!)

在 Windows7 上

*   已为另一台设备安装了 Google USB 驱动程序
*   从以下网址下载 XPERIA 驱动程序：http: [//developer.sonymobile.com/downloads/drivers/](http://developer.sonymobile.com/downloads/drivers/)
*   通过 USB 连接 XPERIA
*   设备管理器 > 未知设备 > 从下载的文件安装驱动程序

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-21T11:31:13.500

不要忘记在手机设置中启用 USB 调试。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T11:23:22.620

是的，日食需要驱动程序。您需要为手机安装驱动程序，然后重新启动eclipse。然后你需要通过eclipse中的设备管理器添加xperia。

你在运行windows吗？？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-22T13:57:58.827

1.  开始日食
2.  打开 android SDK 管理器，它将加载存储库。
3.  选择索尼的包并下载。
4.  重新启动 Eclipse，你就可以开始了。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-02T20:49:19.650

尝试在此处安装 PC Companion：http: [//www.sonymobile.com/gb/tools/pc-companion/](http://www.sonymobile.com/gb/tools/pc-companion/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-27T11:18:15.563

我在将 Sony Xperia Tipo 连接到 Eclipse 以进行 android 调试时遇到问题。我完成了已经推荐的所有步骤（安装索尼驱动程序、打开 USB 调试等），但是当我将 Tipo 连接到我的 PC 并打开 USB 调试时，仍然出现“找不到驱动程序”错误。

我从索尼平板电脑的驱动程序安装说明开始解决了这个问题，[http: //www.kb.sony.com/selfservice/microsites/search.do?cmd=displayKC&externalId=C1024692&fes=true](http://www.kb.sony.com/selfservice/microsites/search.do?cmd=displayKC&externalId=C1024692&fes=true)

然后，我查看了 Windows 事件查看器以查找先前驱动程序安装失败的详细信息，这为我提供了正确的 Tipo 设备 ID 字符串。我将其添加到 android_winsub.inf 的 [Google.NTx86] 部分的末尾，遵循与索尼平板电脑相同的模式。它现在包含以下内容：

```
[Google.NTx86] 
;SONY Sony Tipo
%CompositeAdbInterface% = USB_Install, USB\VID_0FCE&PID_5170&MI_01 
```

最后，我将 Tipo 重新连接到我的 PC，在驱动程序安装期间选择手动驱动程序搜索选项，将其指向 Google USB 驱动程序目录，它成功安装了 Google 驱动程序。现在 Eclipse 正在连接到 Tipo，我可以测试和调试我的应用程序。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-02-08T11:41:24.383

解决方案 ！：我在仅使用 Eclipse 检测 SONY XPERIA Z 平板电脑时遇到了这个问题，并且在书中做了所有事情来连接它但没有成功：

检查 PC 上的 Sony USB 驱动程序是否已更新，在开发人员选项中启用 USB 调试，尝试媒体传输协议 (MTP)，尝试大容量存储配置 (MSC)，

Eclipse 命令运行仍然响应“未找到兼容设备”消息

直到我在 SDK 管理器中下载了 Google USB 驱动程序并且最后检测到了该设备。更奇怪的是，Google 驱动程序被引入为专用于 Nexus 平板电脑！所以，如果这可以帮助....

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-03-20T16:35:53.153

我最近刚刚解决了这个问题。以下是您应该尝试的步骤，如下所示：

*   启用 USB 调试
*   更改为大容量存储设备
*   重置 DDMS - adb
*   安装驱动

然后在eclipse中它应该显示为Android设备:)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-09-02T12:24:06.277

用于 Window 7 的索尼移动 USB 驱动程序的解决方案 在谷歌搜索和花费更多时间之后，我们发现解决方案索尼 Tipo 和索尼 M 移动正在通过 eclipse 检测。步骤是 1.安装最新的索尼伴侣 2- 转到设置>>xperia>> 连接>>USB 连接模式>>MTP 3- 重新启动 Eclipse 并运行您的项目 Android 设备选择器显示您的设备

不要忘记检查usb调试

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-10-09T09:56:59.167

这个答案对于找不到您的设备更为普遍。但是，如果您有死的 ADB 进程正在运行，您可能必须杀死它们（并启动一个新进程）才能选择您的设备。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-02-16T03:03:27.790

对我来说，当结合 Damir 和 Michell Bak 的答案时，它会起作用。

首先需要将设备从**MTP**模式更改为[Damir](https://stackoverflow.com/questions/12053720/cannot-detect-sony-xperia-in-eclipse/15543848#15543848)提到的**MSC**模式，然后像[Michell Bak](https://stackoverflow.com/a/12053939/4570366)提到的那样**将驱动程序下载并安装**到您的 PC 。

 **大多数新索尼设备默认将 USB 连接模式设置为 MTP，并且设置位置与其他安卓设备不同。另外，驱动不能自动安装，需要从官网下载。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-02-28T10:33:02.697

使用 Sony Xperia 进行调试的步骤： **设置 > Xperia > USB 连接 > USB 连接模式** ，然后选择***大容量存储模式 (MSC)***。必须拔下 USB 电缆才能更改此选项。默认情况下，选择媒体传输模式 (MTP)。取消勾选“安装软件”

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-03-04T17:47:52.393

我的 Xperia Z3+ (android 5.02) 与 Android studio 1.3 有同样的问题。我安装了新的驱动程序和 XPeria Companion，但没有帮助。但是，在我通过 USB 启用热点后，它开始工作。如果只是最后一个，不知道是否需要所有这些。无论如何我做了 1\. 设置->更多...-> Internetsharing热点-> USB-sharing to on。2.在弹出的接受USB调试。**

# c# - GDI+ 和系统显卡

> ID：12053721
> 
> 赞同：4
> 
> 时间：2012-08-21T11:20:49.327
> 
> 标签：c#

根据我的研究，我已经看到`GDI+`（如果我错了，请纠正我）用于`Graphics`绘制各种对象，但据我所知，我不确定它是否使用系统显卡？如果没有，请引导我找到一种方法，我可以告诉它利用显卡的许多功能，如着色器等，或者至少如何编写我自己的 DirectX、OpenGL 引擎？

提前致谢。

PS 我希望完成的主要事情是逐个像素地绘制各种对象的表示。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T11:41:05.373

不，我很抱歉。GDI+ 不是硬件加速的，因此不使用显卡（尽管 GDI 在[windows 7](http://en.wikipedia.org/wiki/Graphics_Device_Interface#Windows_7)中是硬件加速的）。我建议你使用[OpenTK](http://www.opentk.com/)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-21T11:54:46.990

GDI+ 和 DirectX 是两个替代库，用于在 Windows 操作系统之上的显示器上呈现图形。由于它们只是操作系统的接口，因此它们都不能在硬件级别直接与您的显卡“对话”。所有用于直接或间接绘制图形（例如 WinForms 图形）的 GDI+ 功能只是对 gdi32.dll 系统库中的 API 的调用。同样，DirectX 函数也有自己的 API 库可供调用。

人们通常认为 DirectX 在渲染 3D 图形方面具有更好的性能，但这绝不意味着 GDI+ 缺少任何功能或者它不使用您的显卡——它们都通过 Windows 间接实现。作为比较，.NET 中的所有 WinForms 图形均基于 GDI+ 库，而 WPF 图形基于 DirectX。

# javascript - 使用 Date.getTime() 计算日期时出错

> ID：12053724
> 
> 赞同：0
> 
> 时间：2012-08-21T11:20:54.243
> 
> 标签：javascript

我有这个代码：

```
f_sal = new Date( f_sal.getFullYear(), f_sal.getMonth(), f_sal.getDate() ); 
f_reg = new Date( f_reg.getFullYear(), f_reg.getMonth(), f_reg.getDate() ); 

var unDia = 1000 * 60 * 60 * 24;
difDias = Math.round((f_reg.getTime() - f_sal.getTime()) / unDia ); 
```

如果 f_sal 值为 6/9/2012，f_reg 值为 7/9/2012，则 difDias 值为 1 天（正确）。但如果 f_reg 值为 6/10/2012，difDias 值为 31 天……正确的结果是 30 天。

我的错在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T11:27:42.067

我认为使用`Math.floor()`而不是`Math.round()`. 所以你应该这样做：

```
difDias = Math.floor((f_reg.getTime() - f_sal.getTime()) / unDia ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T14:18:03.690

好的，问题是定义月份，因为它们是从零开始的，所以现在我执行 f_sal.getMonth() - 1，问题就解决了。

# ruby-on-rails - ROR 关联的语法

> ID：12053725
> 
> 赞同：0
> 
> 时间：2012-08-21T11:20:55.243
> 
> 标签：ruby-on-rails, ruby-on-rails-3

提前为另一个新手问题道歉，但 ROR 语法只是没有点击我，我无法理解快捷方式和约定（尽管已经阅读了几本书！） -

我有效地从一本书中复制了这一点，但我试图弄清楚什么是构建、创建等？

```
@cart = current_cart
product = Catalog::Product.find(params[:product_id])
Rails.logger.debug { "Value in cart id " + @cart.id.to_s }

@checkout_line_item = @cart.line_items.build(product: product)

respond_to do |format|
  if @checkout_line_item.save... 
```

日志的输出是这样的：

```
Processing by Checkout::LineItemsController#create as HTML
Parameters: {"utf8"=>"✓",  "authenticity_token"=>"9NH+xgDPTf/iN7RCdPd8H9rAIqWsSVB/f/rIT++Kk7M=", "product_id"=>"7"}
Created a line item
(0.1ms)  BEGIN
SQL (2.0ms)  INSERT INTO `checkout_carts` (`created_at`, `discounts`, `grand_total`,   `loyalty_points`, `order_date`, `subtotal`, `timestamps`, `total_tax`, `updated_at`) VALUES    ('2012-08-21 11:06:15', NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2012-08-21 11:06:15')
(0.2ms)  COMMIT
Catalog::Product Load (0.2ms)  SELECT `products`.* FROM `products` WHERE `products`.`id` =   7 LIMIT 1
Value in cart id 8
Completed 500 Internal Server Error in 5ms

NoMethodError (undefined method `save' for nil:NilClass):
app/controllers/checkout/line_items_controller.rb:55:in `block in create'
app/controllers/checkout/line_items_controller.rb:54:in `create' 
```

我猜问题出在构建结帐行项目的构建语法上，或者我可能错误地设置了 has_many 关联。这足以让有人帮我解决问题吗？或者我应该发布模型声明？

更新模型：

```
class Checkout::LineItem < ActiveRecord::Base
  attr_accessible :customer_update_date, :inventory_status, :line_item_color, :line_item_description, :line_item_size, :line_item_tagline, :line_item_total, :quantity, :sku_id, :style_id, :tax, :tax_code, :timestamps, :unit_price, :product
  belongs_to :cart
  belongs_to :product, :class_name => 'Catalog::Product'
end

class Checkout::Cart < ActiveRecord::Base
  attr_accessible :discounts, :grand_total, :loyalty_points, :order_date, :subtotal, :timestamps, :total_tax

  has_many :line_items, dependent: :destroy
end

module Catalog
  class Product < ActiveRecord::Base
    attr_accessible :assoc_product,:product_id, :merch_associations, :aux_description, :buyable, :long_description, :name, :on_special, :part_number, :release_date, :short_description, :withdraw_date, :occasion
   <<clipped for brevity>>

has_many :line_items, :class_name => 'Checkout::LineItem'
...
  end 
```

无法回答我自己的问题，但我想我得到了答案：

看起来我需要将购物车添加到构建调用中......

这似乎奏效了（我认为，还有另一个阻塞问题，但我可以对那个问题进行排序）：

```
@cart = current_cart
product = Catalog::Product.find(params[:product_id])
Rails.logger.debug { "Value in cart id " + @cart.id.to_s }

@checkout_line_item = @cart.line_items.build(product: product, cart: @cart) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-03T18:27:17.853

`Build`本质上为空白对象创建和保留空间。这允许您创建关联对象而不保存它。我经历过的唯一用例是一个嵌套表单，其中我有多个事件日期，所以我使用 5.times.build 创建 5 个空日期关联。

# javascript - Javascript 可能会阻止加载 css 背景图像

> ID：12053728
> 
> 赞同：1
> 
> 时间：2012-08-21T11:21:14.260
> 
> 标签：javascript, jquery, html, css

我们在查找未加载背景图像的来源时遇到了一些问题。据我们所知，在实现 eu cookie javascript 函数之前加载它们没有问题。

jsFiddle：（只是 JS）[http://jsfiddle.net/dx4MC/](http://jsfiddle.net/dx4MC/)

由于某种原因，有时我们无法复制（似乎是随机的）页面上的所有背景图像将无法加载。有没有人遇到过这个？

一个可能的想法是 js 不允许 CSS 完全加载，但是没有其他样式受到影响，只有背景图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T18:11:55.033

尝试使用

```
!important 
```

在您的 CSS 中覆盖 javascript 内联样式

# java - 使用集合排序的问题

> ID：12053731
> 
> 赞同：-3
> 
> 时间：2012-08-21T11:21:19.113
> 
> 标签：java, sorting, collections, compare

我正在尝试对列表中的数据进行排序，该列表的字段 id 有：

```
field id :field_38637
field id :field_38469
field id :field_38468
field id :field_38638
field id :field_38637
field id :field_38469
field id :field_38468
field id :field_38468
field id :field_38469
field id :field_38468
field id :field_38637 
```

列表数据的大小为 11，对于上面的列表数据，我正在做一个排序如下：

```
 Collections.sort(copedppList, new Comparator() {

        @Override
        public int compare(Object o1, Object o2) {
            Field oo1 = (Field ) o1;
            Field oo2 = (Field ) o2;
        if(oo1.getFieldId()!=oo2.getFieldId()){}    
                    return 1;
                      else 
                         return 0;

    });

   for (int i = 0; i < copedppList.size(); i++) {

            Field pp = (Field) copedppList
                    .get(i);
            System.out.println(pp.getFieldID());
        } 
```

排序后我得到的列表有

```
field_38468
field_38468
field_38468
field_38468
field_38468
field_38469
field_38469
field_38469
field_38637
field_38637
field_38637 
```

编辑：相似的字段ID在排序后被分组在一起，但它应该按照以38637,38469,38468开头的传入列表进行分组，这里有什么问题？我想保持传入列表的顺序。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T11:23:35.230

您没有在比较器中排序，只检查相等性。这可能会更好：

```
public int compare(Object o1, Object o2) {
    Field oo1 = (Field ) o1;
    Field oo2 = (Field ) o2;

    return oo1.getFieldID().compareTo(oo2.getFieldID());
} 
```

（假设 getFieldID 是一个非空字符串）

ps：您似乎没有使用泛型，它可以让您从代码中删除所有这些强制转换。

**编辑**

您实际上想要对项目进行分组，而不是对它们进行排序。最简单的方法是使用 2 个列表（未测试）：

```
public static void main(String[] args) throws InterruptedException {
    List<Field> originalList = new ArrayList<Field>();
    originalList.add(new Field("field_38637"));
    originalList.add(new Field("field_38469"));
    originalList.add(new Field("field_38468"));
    originalList.add(new Field("field_38638"));
    originalList.add(new Field("field_38637"));
    originalList.add(new Field("field_38469"));
    originalList.add(new Field("field_38468"));
    originalList.add(new Field("field_38468"));
    originalList.add(new Field("field_38469"));
    originalList.add(new Field("field_38468"));
    originalList.add(new Field("field_38637"));

    System.out.println(originalList);
    List<Field> groupedList = new ArrayList<Field>(originalList.size());
    while (!originalList.isEmpty()) {
        String id = originalList.get(0).getFieldID();
        for (Iterator<Field> it = originalList.iterator(); it.hasNext();) {
            Field f = it.next();
            if (f.getFieldID().equals(id)) {
                it.remove();
                groupedList.add(f);
            }
        }
    }

    System.out.println(groupedList);
}

public static class Field {

    private final String fieldID;

    public Field(String fieldID) {
        this.fieldID = fieldID;
    }

    public String getFieldID() {
        return fieldID;
    }

    @Override
    public String toString() {
        return "Field{" + "fieldID=" + fieldID + '}';
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T11:24:28.463

阅读`compare()`. 您应该根据元素之间的关系返回 -1、0 或 1`a`和`b`. 您只返回 0 或 1，因此排序不起作用。

尝试阅读[http://www.javapractices.com/topic/TopicAction.do?Id=10](http://www.javapractices.com/topic/TopicAction.do?Id=10)和[http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html](http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html)

尝试

```
public int compare(Object o1, Object o2) 
{
  Field oo1 = (Field ) o1;
  Field oo2 = (Field ) o2;
  return oo1.getFieldID().compareTo(oo2.getFieldID());
} 
```

# x11 - 在 ubuntu 中安装 htk "make all" 消息 " /usr/bin/ld: cannot find -lX11 "

> ID：12053732
> 
> 赞同：2
> 
> 时间：2012-08-21T11:21:19.823
> 
> 标签：x11, ubuntu-12.04, htk

我正在尝试使用 htk（HMM 工具包）进行语音识别。

我遵循“自述文件”中的说明指南。

首先，我输入了“./configure”，它起作用了。

以下是我输入“./configure”时的终端输出。

```
checking whether make sets $(MAKE)... yes
checking for gawk... no
checking for mawk... mawk
checking for gcc... gcc
checking for C compiler default output file name... a.out
checking whether the C compiler works... yes
checking whether we are cross compiling... no
checking for suffix of executables... 
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether gcc accepts -g... yes
checking for gcc option to accept ISO C89... none needed
checking for a BSD-compatible install... /usr/bin/install -c
checking whether ln -s works... yes
checking for ranlib... ranlib
checking for main in -lX11... yes
checking for main in -lm... yes
checking how to run the C preprocessor... gcc -E
checking for X... libraries , headers 
checking for grep that handles long lines and -e... /bin/grep
checking for egrep... /bin/grep -E
checking for ANSI C header files... yes
checking for sys/types.h... yes
checking for sys/stat.h... yes
checking for stdlib.h... yes
checking for string.h... yes
checking for memory.h... yes
checking for strings.h... yes
checking for inttypes.h... yes
checking for stdint.h... yes
checking for unistd.h... yes
checking errno.h usability... yes
checking errno.h presence... yes
checking for errno.h... yes
checking fcntl.h usability... yes
checking fcntl.h presence... yes
checking for fcntl.h... yes
checking float.h usability... yes
checking float.h presence... yes
checking for float.h... yes
checking limits.h usability... yes
checking limits.h presence... yes
checking for limits.h... yes
checking malloc.h usability... yes
checking malloc.h presence... yes
checking for malloc.h... yes
checking for memory.h... (cached) yes
checking for stdlib.h... (cached) yes
checking for string.h... (cached) yes
checking sys/ioctl.h usability... yes
checking sys/ioctl.h presence... yes
checking for sys/ioctl.h... yes
checking sys/socket.h usability... yes
checking sys/socket.h presence... yes
checking for sys/socket.h... yes
checking sys/time.h usability... yes
checking sys/time.h presence... yes
checking for sys/time.h... yes
checking for unistd.h... (cached) yes
checking for an ANSI C-conforming const... yes
checking for size_t... yes
checking whether time.h and sys/time.h may both be included... yes
checking whether struct tm is in sys/time.h or time.h... time.h
checking whether gcc needs -traditional... no
checking for working memcmp... yes
checking for stdlib.h... (cached) yes
checking for GNU libc compatible malloc... yes
checking for working strtod... yes
checking return type of signal handlers... void
checking for vprintf... yes
checking for _doprnt... no
checking for floor... yes
checking for gettimeofday... yes
checking for memmove... yes
checking for memset... yes
checking for modf... yes
checking for pow... yes
checking for socket... yes
checking for sqrt... yes
checking for strchr... yes
checking for strcspn... yes
checking for strrchr... yes
checking for strspn... yes
checking for strstr... yes
checking for strtol... yes
checking build system type... x86_64-unknown-linux-gnu
checking host system type... x86_64-unknown-linux-gnu
configure: creating ./config.status
config.status: creating HTKLib/Makefile
config.status: WARNING:  HTKLib/Makefile.in seems to ignore the --datarootdir setting
config.status: creating HTKTools/Makefile
config.status: WARNING:  HTKTools/Makefile.in seems to ignore the --datarootdir setting
config.status: creating HLMLib/Makefile
config.status: WARNING:  HLMLib/Makefile.in seems to ignore the --datarootdir setting
config.status: creating HLMTools/Makefile
config.status: WARNING:  HLMTools/Makefile.in seems to ignore the --datarootdir setting
config.status: creating HTKLVRec/Makefile
config.status: WARNING:  HTKLVRec/Makefile.in seems to ignore the --datarootdir setting
config.status: creating Makefile
config.status: WARNING:  Makefile.in seems to ignore the --datarootdir setting
**************************************************

HTK is now ready to be built.

Type "make all" to build the HTK libraries
and tools.

Then "make install" to install them.

The tools will be installed in /usr/local/bin

Build notes: Language Modelling tools will be
built. HDecode will not be built. You can build
it manually later by running 'make hdecode
install-hdecode'

************************************************** 
```

我输入了'make all'。我可以在终端输出中找到以下错误消息：/usr/bin/ld: cannot find -lX11\. 以下是终端输出的完整版本。

```
(cd HTKLib && make HTKLib.a) \
      || case "" in *k*) fail=yes;; *) exit 1;; esac;
make[1]: Entering directory `/home/geon-min/Downloads/htk/HTKLib'
gcc  -m32 -ansi -D_SVID_SOURCE -DOSS_AUDIO -D'ARCH="x86_64"' -Wall -Wno-switch -g -O2 -I. -DPHNALG   -c -o HGraf.o HGraf.c
HGraf.c: In function ‘DecodeKeyPress’:
HGraf.c:179:8: warning: variable ‘n’ set but not used [-Wunused-but-set-variable]
HGraf.c: In function ‘HGetEvent’:
HGraf.c:221:18: warning: variable ‘dummy’ set but not used [-Wunused-but-set-variable]
gcc  -m32 -ansi -D_SVID_SOURCE -DOSS_AUDIO -D'ARCH="x86_64"' -Wall -Wno-switch -g -O2 -I. -DPHNALG   -c -o esig_asc.o esig_asc.c
esig_asc.c: In function ‘ReadAsciiEscape’:
esig_asc.c:2025:16: warning: ignoring return value of ‘fscanf’, declared with attribute warn_unused_result [-Wunused-result]
gcc  -m32 -ansi -D_SVID_SOURCE -DOSS_AUDIO -D'ARCH="x86_64"' -Wall -Wno-switch -g -O2 -I. -DPHNALG   -c -o esig_edr.o esig_edr.c
esig_edr.c: In function ‘ReadEdrRecord’:
esig_edr.c:338:25: warning: ‘flags’ may be used uninitialized in this function [-Wuninitialized]
gcc  -m32 -ansi -D_SVID_SOURCE -DOSS_AUDIO -D'ARCH="x86_64"' -Wall -Wno-switch -g -O2 -I. -DPHNALG   -c -o esignal.o esignal.c
esignal.c: In function ‘GetLine’:
esignal.c:1760:9: warning: ignoring return value of ‘fgets’, declared with attribute warn_unused_result [-Wunused-result]
esignal.c: In function ‘GetLong’:
esignal.c:1808:9: warning: ignoring return value of ‘fgets’, declared with attribute warn_unused_result [-Wunused-result]
gcc  -m32 -ansi -D_SVID_SOURCE -DOSS_AUDIO -D'ARCH="x86_64"' -Wall -Wno-switch -g -O2 -I. -DPHNALG   -c -o esig_nat.o esig_nat.c
gcc  -m32 -ansi -D_SVID_SOURCE -DOSS_AUDIO -D'ARCH="x86_64"' -Wall -Wno-switch -g -O2 -I. -DPHNALG   -c -o HAdapt.o HAdapt.c
HAdapt.c: In function ‘SetSemiTiedAvCov’:
HAdapt.c:1381:15: warning: variable ‘si’ set but not used [-Wunused-but-set-variable]
HAdapt.c: In function ‘ParseNode’:
HAdapt.c:1550:12: warning: variable ‘size’ set but not used [-Wunused-but-set-variable]
gcc  -m32 -ansi -D_SVID_SOURCE -DOSS_AUDIO -D'ARCH="x86_64"' -Wall -Wno-switch -g -O2 -I. -DPHNALG   -c -o HArc.o HArc.c
gcc  -m32 -ansi -D_SVID_SOURCE -DOSS_AUDIO -D'ARCH="x86_64"' -Wall -Wno-switch -g -O2 -I. -DPHNALG   -c -o HAudio.o HAudio.c
HAudio.c: In function ‘StartAudioInput’:
HAudio.c:2174:11: warning: ignoring return value of ‘read’, declared with attribute warn_unused_result [-Wunused-result]
gcc  -m32 -ansi -D_SVID_SOURCE -DOSS_AUDIO -D'ARCH="x86_64"' -Wall -Wno-switch -g -O2 -I. -DPHNALG   -c -o HDict.o HDict.c
gcc  -m32 -ansi -D_SVID_SOURCE -DOSS_AUDIO -D'ARCH="x86_64"' -Wall -Wno-switch -g -O2 -I. -DPHNALG   -c -o HExactMPE.o HExactMPE.c
HExactMPE.c: In function ‘DoCorrectness’:
HExactMPE.c:288:58: warning: value computed is not used [-Wunused-value]
HExactMPE.c:332:12: warning: variable ‘cb’ set but not used [-Wunused-but-set-variable]
gcc  -m32 -ansi -D_SVID_SOURCE -DOSS_AUDIO -D'ARCH="x86_64"' -Wall -Wno-switch -g -O2 -I. -DPHNALG   -c -o HFB.o HFB.c
HFB.c: In function ‘Setotprob’:
HFB.c:999:15: warning: variable ‘p’ set but not used [-Wunused-but-set-variable]
HFB.c: In function ‘SetBeta’:
HFB.c:1161:12: warning: variable ‘hset’ set but not used [-Wunused-but-set-variable]
gcc  -m32 -ansi -D_SVID_SOURCE -DOSS_AUDIO -D'ARCH="x86_64"' -Wall -Wno-switch -g -O2 -I. -DPHNALG   -c -o HFBLat.o HFBLat.c
HFBLat.c: In function ‘StepAlpha’:
HFBLat.c:737:20: warning: variable ‘transP’ set but not used [-Wunused-but-set-variable]
HFBLat.c: In function ‘DoAllMixUpdates’:
HFBLat.c:1070:33: warning: variable ‘al_otvs’ set but not used [-Wunused-but-set-variable]
HFBLat.c: In function ‘UpMixParms’:
HFBLat.c:1198:25: warning: variable ‘vSize’ set but not used [-Wunused-but-set-variable]
HFBLat.c: In function ‘StepForward’:
HFBLat.c:1389:25: warning: variable ‘bqt1’ set but not used [-Wunused-but-set-variable]
HFBLat.c: In function ‘DoAllMixUpdates’:
HFBLat.c:1175:30: warning: ‘mammi’ may be used uninitialized in this function [-Wuninitialized]
gcc  -m32 -ansi -D_SVID_SOURCE -DOSS_AUDIO -D'ARCH="x86_64"' -Wall -Wno-switch -g -O2 -I. -DPHNALG   -c -o HLabel.o HLabel.c
gcc  -m32 -ansi -D_SVID_SOURCE -DOSS_AUDIO -D'ARCH="x86_64"' -Wall -Wno-switch -g -O2 -I. -DPHNALG   -c -o HLat.o HLat.c
HLat.c: In function ‘LatSetScores’:
HLat.c:690:14: warning: variable ‘best’ set but not used [-Wunused-but-set-variable]
gcc  -m32 -ansi -D_SVID_SOURCE -DOSS_AUDIO -D'ARCH="x86_64"' -Wall -Wno-switch -g -O2 -I. -DPHNALG   -c -o HLM.o HLM.c
HLM.c: In function ‘WriteNGrams’:
HLM.c:235:16: warning: variable ‘N’ set but not used [-Wunused-but-set-variable]
HLM.c: In function ‘ReadNGrams’:
HLM.c:379:18: warning: variable ‘size’ set but not used [-Wunused-but-set-variable]
gcc  -m32 -ansi -D_SVID_SOURCE -DOSS_AUDIO -D'ARCH="x86_64"' -Wall -Wno-switch -g -O2 -I. -DPHNALG   -c -o HMap.o HMap.c
HMap.c: In function ‘TotMixInSet’:
HMap.c:384:10: warning: variable ‘hmm’ set but not used [-Wunused-but-set-variable]
gcc  -m32 -ansi -D_SVID_SOURCE -DOSS_AUDIO -D'ARCH="x86_64"' -Wall -Wno-switch -g -O2 -I. -DPHNALG   -c -o HMath.o HMath.c
gcc  -m32 -ansi -D_SVID_SOURCE -DOSS_AUDIO -D'ARCH="x86_64"' -Wall -Wno-switch -g -O2 -I. -DPHNALG   -c -o HMem.o HMem.c
gcc  -m32 -ansi -D_SVID_SOURCE -DOSS_AUDIO -D'ARCH="x86_64"' -Wall -Wno-switch -g -O2 -I. -DPHNALG   -c -o HModel.o HModel.c
HModel.c: In function ‘CompressItemList’:
HModel.c:1149:11: warning: variable ‘p’ set but not used [-Wunused-but-set-variable]
HModel.c: In function ‘CreateHMM’:
HModel.c:4225:12: warning: variable ‘newMacro’ set but not used [-Wunused-but-set-variable]
gcc  -m32 -ansi -D_SVID_SOURCE -DOSS_AUDIO -D'ARCH="x86_64"' -Wall -Wno-switch -g -O2 -I. -DPHNALG   -c -o HNet.o HNet.c
HNet.c: In function ‘CreateXEModels’:
HNet.c:3144:36: warning: variable ‘searchNode’ set but not used [-Wunused-but-set-variable]
gcc  -m32 -ansi -D_SVID_SOURCE -DOSS_AUDIO -D'ARCH="x86_64"' -Wall -Wno-switch -g -O2 -I. -DPHNALG   -c -o HParm.o HParm.c
HParm.c: In function ‘SetWaveSpDetParms’:
HParm.c:2584:18: warning: variable ‘nBl’ set but not used [-Wunused-but-set-variable]
HParm.c:2582:11: warning: variable ‘v’ set but not used [-Wunused-but-set-variable]
HParm.c: In function ‘CompressPBlock’:
HParm.c:4945:16: warning: variable ‘count’ set but not used [-Wunused-but-set-variable]
HParm.c: In function ‘OpenAsChannel’:
HParm.c:4351:25: warning: ‘initRows’ may be used uninitialized in this function [-Wuninitialized]
gcc  -m32 -ansi -D_SVID_SOURCE -DOSS_AUDIO -D'ARCH="x86_64"' -Wall -Wno-switch -g -O2 -I. -DPHNALG   -c -o HRec.o HRec.c
HRec.c: In function ‘LatFromPaths’:
HRec.c:1650:33: warning: ‘labid’ may be used uninitialized in this function [-Wuninitialized]
gcc  -m32 -ansi -D_SVID_SOURCE -DOSS_AUDIO -D'ARCH="x86_64"' -Wall -Wno-switch -g -O2 -I. -DPHNALG   -c -o HShell.o HShell.c
HShell.c: In function ‘KeyPressed’:
HShell.c:1489:14: warning: ignoring return value of ‘read’, declared with attribute warn_unused_result [-Wunused-result]
HShell.c: In function ‘NextArg’:
HShell.c:725:13: warning: ignoring return value of ‘strtod’, declared with attribute warn_unused_result [-Wunused-result]
gcc  -m32 -ansi -D_SVID_SOURCE -DOSS_AUDIO -D'ARCH="x86_64"' -Wall -Wno-switch -g -O2 -I. -DPHNALG   -c -o HSigP.o HSigP.c
gcc  -m32 -ansi -D_SVID_SOURCE -DOSS_AUDIO -D'ARCH="x86_64"' -Wall -Wno-switch -g -O2 -I. -DPHNALG   -c -o HTrain.o HTrain.c
HTrain.c: In function ‘RestoreAccsParallel’:
HTrain.c:1716:12: warning: variable ‘size’ set but not used [-Wunused-but-set-variable]
HTrain.c: In function ‘InitClustering’:
HTrain.c:755:22: warning: ‘cov.var’ may be used uninitialized in this function [-Wuninitialized]
gcc  -m32 -ansi -D_SVID_SOURCE -DOSS_AUDIO -D'ARCH="x86_64"' -Wall -Wno-switch -g -O2 -I. -DPHNALG   -c -o HUtil.o HUtil.c
gcc  -m32 -ansi -D_SVID_SOURCE -DOSS_AUDIO -D'ARCH="x86_64"' -Wall -Wno-switch -g -O2 -I. -DPHNALG   -c -o HVQ.o HVQ.c
HVQ.c: In function ‘LoadVQTab’:
HVQ.c:199:9: warning: ‘cov.var’ may be used uninitialized in this function [-Wuninitialized]
HVQ.c:169:15: note: ‘cov.var’ was declared here
gcc  -m32 -ansi -D_SVID_SOURCE -DOSS_AUDIO -D'ARCH="x86_64"' -Wall -Wno-switch -g -O2 -I. -DPHNALG   -c -o HWave.o HWave.c
HWave.c: In function ‘GetAIFFHeaderInfo’:
HWave.c:997:22: warning: variable ‘commchunk1’ set but not used [-Wunused-but-set-variable]
HWave.c: In function ‘GetWAVHeaderInfo’:
HWave.c:1062:9: warning: ignoring return value of ‘fread’, declared with attribute warn_unused_result [-Wunused-result]
HWave.c:1068:9: warning: ignoring return value of ‘fread’, declared with attribute warn_unused_result [-Wunused-result]
HWave.c:1069:9: warning: ignoring return value of ‘fread’, declared with attribute warn_unused_result [-Wunused-result]
HWave.c:1081:12: warning: ignoring return value of ‘fread’, declared with attribute warn_unused_result [-Wunused-result]
HWave.c:1082:12: warning: ignoring return value of ‘fread’, declared with attribute warn_unused_result [-Wunused-result]
HWave.c:1087:15: warning: ignoring return value of ‘fread’, declared with attribute warn_unused_result [-Wunused-result]
HWave.c:1097:15: warning: ignoring return value of ‘fread’, declared with attribute warn_unused_result [-Wunused-result]
HWave.c:1105:15: warning: ignoring return value of ‘fread’, declared with attribute warn_unused_result [-Wunused-result]
HWave.c:1108:15: warning: ignoring return value of ‘fread’, declared with attribute warn_unused_result [-Wunused-result]
HWave.c:1109:15: warning: ignoring return value of ‘fread’, declared with attribute warn_unused_result [-Wunused-result]
HWave.c:1110:15: warning: ignoring return value of ‘fread’, declared with attribute warn_unused_result [-Wunused-result]
HWave.c:1125:33: warning: ignoring return value of ‘fread’, declared with attribute warn_unused_result [-Wunused-result]
HWave.c: In function ‘PutESIGHeaderInfo’:
HWave.c:1379:21: warning: ‘inList’ may be used uninitialized in this function [-Wuninitialized]
HWave.c: In function ‘OpenWaveInput’:
HWave.c:1042:18: warning: ‘commchunk2.nSamples’ may be used uninitialized in this function [-Wuninitialized]
HWave.c:998:22: note: ‘commchunk2.nSamples’ was declared here
gcc  -m32 -ansi -D_SVID_SOURCE -DOSS_AUDIO -D'ARCH="x86_64"' -Wall -Wno-switch -g -O2 -I. -DPHNALG   -c -o strarr.o strarr.c
if [ -f HTKLib.a ] ; then  /bin/rm HTKLib.a ; fi
ar rv HTKLib.a HGraf.o esig_asc.o esig_edr.o esignal.o esig_nat.o HAdapt.o HArc.o HAudio.o HDict.o HExactMPE.o HFB.o HFBLat.o HLabel.o HLat.o HLM.o HMap.o HMath.o HMem.o HModel.o HNet.o HParm.o HRec.o HShell.o HSigP.o HTrain.o HUtil.o HVQ.o HWave.o strarr.o
ar: creating HTKLib.a
a - HGraf.o
a - esig_asc.o
a - esig_edr.o
a - esignal.o
a - esig_nat.o
a - HAdapt.o
a - HArc.o
a - HAudio.o
a - HDict.o
a - HExactMPE.o
a - HFB.o
a - HFBLat.o
a - HLabel.o
a - HLat.o
a - HLM.o
a - HMap.o
a - HMath.o
a - HMem.o
a - HModel.o
a - HNet.o
a - HParm.o
a - HRec.o
a - HShell.o
a - HSigP.o
a - HTrain.o
a - HUtil.o
a - HVQ.o
a - HWave.o
a - strarr.o
ranlib HTKLib.a
make[1]: Leaving directory `/home/geon-min/Downloads/htk/HTKLib'
(cd HTKTools && make all) \
      || case "" in *k*) fail=yes;; *) exit 1;; esac;
make[1]: Entering directory `/home/geon-min/Downloads/htk/HTKTools'
if [ ! -d /usr/local/bin -a X_ = X_yes ] ; then mkdir -p /usr/local/bin ; fi
if [ xHSLab = xHSLab ] ; then \
        gcc -o HSLab -m32 -ansi -D_SVID_SOURCE -DOSS_AUDIO -D'ARCH="x86_64"' -Wall -Wno-switch -g -O2 -I../HTKLib -DPHNALG HSLab.c ../HTKLib/HTKLib.a -L/usr/X11R6/lib  -lm -lX11 ; \
        else \
        gcc -o HSLab -m32 -ansi -D_SVID_SOURCE -DOSS_AUDIO -D'ARCH="x86_64"' -Wall -Wno-switch -g -O2 -I../HTKLib -DPHNALG HSLab.c ../HTKLib/HTKLib.a -L/usr/X11R6/lib  -lm ; fi
HSLab.c: In function ‘FileExists’:
HSLab.c:1209:12: warning: variable ‘isEXF’ set but not used [-Wunused-but-set-variable]
HSLab.c: In function ‘DoSpecial’:
HSLab.c:1596:13: warning: ignoring return value of ‘system’, declared with attribute warn_unused_result [-Wunused-result]
/usr/bin/ld: cannot find -lX11
collect2: ld returned 1 exit status
make[1]: *** [HSLab] Error 1
make[1]: Leaving directory `/home/geon-min/Downloads/htk/HTKTools'
make: *** [htktools] Error 1 
```

我已经安装了“libx11-dev”。但是'make all'仍然不起作用。有没有人给我一些意见？我真的很感谢你的帮助。

谢谢 ！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-31T06:00:13.870

安装 sudo apt-get install libx11-dev:i386。这是为你工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T05:54:58.220

这绝对是 32/64 位问题。

你用 flag 编译，`-m32`你的系统是 64 位的。要么编译 64 位代码，要么安装 32 位库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-22T08:26:52.903

```
$linux32 bash
$make all
$make install 
```

当我尝试在 Mac 上的 VirtualBox 内的 64 位 Ubuntu12.04.2 LTS 上编译 HTK 时，它对我有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-02T18:02:42.667

正如@nm 所提到的，在 Makefiles 中替换`-m32`为`-m64`可能允许您编译整个内容；但是，这可能会导致一些细微的错误，例如[2009 年的错误报告](http://htk.eng.cam.ac.uk/bugs/buglist.shtml)中描述的错误：

> 在 64 位 Linux 系统上运行时，我发现了 HDecode 中的随机行为。我已经隔离了一个测试用例，如果运行多次，它会给出两种不同的结果。在 32 位系统上运行时，相同的测试用例不会产生不同的结果。在我的 64 位系统上，我尝试运行在同一 64 位机器上编译的 HDecode，以及在 32 位机器上编译的代码。为了在 64 位平台上编译，我安装了以下库：libc6-dev-i386、libx11-dev、gcc-multilib。在 64 位系统上，代码是使用 m32 选项编译的。使用 m64 选项编译会导致指针截断，从而导致运行时错误。测试用例可以在：链接下载，“test.sh”包含 HDecode 命令。

# java - 小程序，JNLP。强制更新 jar 文件

> ID：12053733
> 
> 赞同：1
> 
> 时间：2012-08-21T11:21:23.867
> 
> 标签：java, caching, applet, jnlp

`jar`当客户端打开小程序应用程序时，如何强制更新我的文件？Jar 文件始终缓存在客户端计算机中。而且我总是需要使用 Java 控制面板清除缓存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T22:46:48.930

> 我总是需要使用 Java 控制面板清除缓存。

这可能是因为 JWS 客户端没有将 Jars 识别为新的。造成这种混乱的原因之一在于开发人员机器和服务器之间的时区差异。在这种情况下，Jars 通常会在接下来的 24 小时内更新。

出于测试目的，请在浏览器之外进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T23:23:39.150

如果您的问题是在重新部署新版本后存在旧版本的文件，请考虑在您的 jar 文件名中包含时间戳或内部版本号。

这将要求您为每次部署更新 JNLP 文件，但您的缓存问题应该会消失。它为我们做了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T01:39:51.827

在每次构建/部署时对您的小程序标签中的 jar 进行版本控制。这将强制重新加载。

`ARCHIVE="foo-1.0.16.jar" > ARCHIVE="foo-1.0.17.jar"`

# zend-framework - Zend 框架控制器问题

> ID：12053736
> 
> 赞同：0
> 
> 时间：2012-08-21T11:21:35.410
> 
> 标签：zend-framework, zend-route, zend-controller

这一定是迄今为止我遇到的最令人沮丧和令人难以置信的问题。

我有一个小型演示项目，它有大约 5 个控制器。当我使用 URL 'localhost/demo/public/' 访问项目时，它会打开 indexcontrollers indexaction 相关视图，这是正确的。此页面有 3 个链接到其他 3 个控制器。

现在，当我按下指向 studentController（这是 3 个控制器之一）的链接时，我收到以下错误：

```
 Message: Invalid controller specified (demo)
    Stack trace:

    #0 C:\xampp\library\Zend Framework\library\Zend\Controller\Front.php(954): Zend_Controller_Dispatcher_Standard->dispatch(Object(Zend_Controller_Request_Http), Object(Zend_Controller_Response_Http))
    #1 C:\xampp\library\Zend Framework\library\Zend\Application\Bootstrap\Bootstrap.php(97): Zend_Controller_Front->dispatch()
    #2 C:\xampp\library\Zend Framework\library\Zend\Application.php(366): Zend_Application_Bootstrap_Bootstrap->run()
    #3 C:\xampp\htdocs\Demo\public\index.php(26): Zend_Application->run()
    #4 {main}  

    Request Parameters:

    array (
      'controller' => 'demo',
      'action' => 'public',
      'module' => 'default',
    ) 
```

它似乎完全误读了我的 URL，所以我自然而然地检查了我的 apache 的重写模块，但是在 Xampp 中默认情况下这是打开的。不过，这是我的 apache 的 httpd.conf 文件：

```
 #
    # This is the main Apache HTTP server configuration file.  It contains the
    # configuration directives that give the server its instructions.
    # See <URL:http://httpd.apache.org/docs/2.2> for detailed information.
    # In particular, see 
    # <URL:http://httpd.apache.org/docs/2.2/mod/directives.html>
    # for a discussion of each configuration directive.
    #
    # Do NOT simply read the instructions in here without understanding
    # what they do.  They're here only as hints or reminders.  If you are unsure
    # consult the online docs. You have been warned.  
    #
    # Configuration and logfile names: If the filenames you specify for many
    # of the server's control files begin with "/" (or "drive:/" for Win32), the
    # server will use that explicit path.  If the filenames do *not* begin
    # with "/", the value of ServerRoot is prepended -- so "logs/foo.log"
    # with ServerRoot set to "C:/xampp/apache" will be interpreted by the
    # server as "C:/xampp/apache/logs/foo.log".
    #
    # NOTE: Where filenames are specified, you must use forward slashes
    # instead of backslashes (e.g., "c:/apache" instead of "c:\apache").
    # If a drive letter is omitted, the drive on which httpd.exe is located
    # will be used by default.  It is recommended that you always supply
    # an explicit drive letter in absolute paths to avoid confusion.

    #
    # ServerRoot: The top of the directory tree under which the server's
    # configuration, error, and log files are kept.
    #
    # Do not add a slash at the end of the directory path.  If you point
    # ServerRoot at a non-local disk, be sure to point the LockFile directive
    # at a local disk.  If you wish to share the same ServerRoot for multiple
    # httpd daemons, you will need to change at least LockFile and PidFile.
    #
    ServerRoot "C:/xampp/apache"

    #
    # Listen: Allows you to bind Apache to specific IP addresses and/or
    # ports, instead of the default. See also the <VirtualHost>
    # directive.
    #
    # Change this to Listen on specific IP addresses as shown below to 
    # prevent Apache from glomming onto all bound IP addresses.
    #
    #Listen 0.0.0.0:80
    #Listen [::]:80
    Listen 80

    # Default charset UTF8
    # AddDefaultCharset utf-8

    #
    # Dynamic Shared Object (DSO) Support
    #
    # To be able to use the functionality of a module which was built as a DSO you
    # have to place corresponding `LoadModule' lines at this location so the
    # directives contained in it are actually available _before_ they are used.
    # Statically compiled modules (those listed by `httpd -l') do not need
    # to be loaded here.
    #
    # Example:
    # LoadModule foo_module modules/mod_foo.so
    #

    LoadModule access_compat_module modules/mod_access_compat.so
    LoadModule actions_module modules/mod_actions.so
    LoadModule alias_module modules/mod_alias.so
    LoadModule allowmethods_module modules/mod_allowmethods.so
    LoadModule asis_module modules/mod_asis.so
    LoadModule auth_basic_module modules/mod_auth_basic.so
    #LoadModule auth_digest_module modules/mod_auth_digest.so
    #LoadModule authn_anon_module modules/mod_authn_anon.so
    LoadModule authn_core_module modules/mod_authn_core.so
    #LoadModule authn_dbd_module modules/mod_authn_dbd.so
    #LoadModule authn_dbm_module modules/mod_authn_dbm.so
    LoadModule authn_file_module modules/mod_authn_file.so
    #LoadModule authn_socache_module modules/mod_authn_socache.so
    #LoadModule authnz_ldap_module modules/mod_authnz_ldap.so
    LoadModule authz_core_module modules/mod_authz_core.so
    #LoadModule authz_dbd_module modules/mod_authz_dbd.so
    #LoadModule authz_dbm_module modules/mod_authz_dbm.so
    LoadModule authz_groupfile_module modules/mod_authz_groupfile.so
    LoadModule authz_host_module modules/mod_authz_host.so
    #LoadModule authz_owner_module modules/mod_authz_owner.so
    LoadModule authz_user_module modules/mod_authz_user.so
    LoadModule autoindex_module modules/mod_autoindex.so
    #LoadModule bucketeer_module modules/mod_bucketeer.so
    #LoadModule cache_module modules/mod_cache.so
    #LoadModule case_filter_module modules/mod_case_filter.so
    #LoadModule case_filter_in_module modules/mod_case_filter_in.so
    #LoadModule cern_meta_module modules/mod_cern_meta.so
    LoadModule cgi_module modules/mod_cgi.so
    #LoadModule charset_lite_module modules/mod_charset_lite.so
    #LoadModule dav_module modules/mod_dav.so
    #LoadModule dav_fs_module modules/mod_dav_fs.so
    LoadModule dav_lock_module modules/mod_dav_lock.so
    #LoadModule dbd_module modules/mod_dbd.so
    #LoadModule deflate_module modules/mod_deflate.so
    LoadModule dir_module modules/mod_dir.so
    #LoadModule disk_cache_module modules/mod_disk_cache.so
    #LoadModule dumpio_module modules/mod_dumpio.so
    #LoadModule echo_module modules/mod_echo.so
    LoadModule env_module modules/mod_env.so
    #LoadModule example_module modules/mod_example.so
    #LoadModule expires_module modules/mod_expires.so
    #LoadModule ext_filter_module modules/mod_ext_filter.so
    #LoadModule fcgid_module modules/mod_fcgid.so # did not work at runtime
    #LoadModule file_cache_module modules/mod_file_cache.so
    #LoadModule filter_module modules/mod_filter.so
    LoadModule headers_module modules/mod_headers.so
    #LoadModule ident_module modules/mod_ident.so
    #LoadModule imagemap_module modules/mod_imagemap.so
    LoadModule include_module modules/mod_include.so
    LoadModule info_module modules/mod_info.so
    LoadModule isapi_module modules/mod_isapi.so
    #LoadModule ldap_module modules/mod_ldap.so
    #LoadModule logio_module modules/mod_logio.so
    LoadModule log_config_module modules/mod_log_config.so
    #LoadModule log_forensic_module modules/mod_log_forensic.so
    #LoadModule mem_cache_module modules/mod_mem_cache.so
    LoadModule mime_module modules/mod_mime.so
    #LoadModule mime_magic_module modules/mod_mime_magic.so
    LoadModule negotiation_module modules/mod_negotiation.so
    LoadModule proxy_module modules/mod_proxy.so
    LoadModule proxy_ajp_module modules/mod_proxy_ajp.so
    #LoadModule proxy_balancer_module modules/mod_proxy_balancer.so
    #LoadModule proxy_connect_module modules/mod_proxy_connect.so
    #LoadModule proxy_ftp_module modules/mod_proxy_ftp.so
    #LoadModule proxy_http_module modules/mod_proxy_http.so
    LoadModule rewrite_module modules/mod_rewrite.so
    LoadModule setenvif_module modules/mod_setenvif.so
    #LoadModule speling_module modules/mod_speling.so
    LoadModule ssl_module modules/mod_ssl.so
    LoadModule status_module modules/mod_status.so
    #LoadModule substitute_module modules/mod_substitute.so
    #LoadModule unique_id_module modules/mod_unique_id.so
    #LoadModule userdir_module modules/mod_userdir.so
    #LoadModule usertrack_module modules/mod_usertrack.so
    #LoadModule version_module modules/mod_version.so
    #LoadModule vhost_alias_module modules/mod_vhost_alias.so

    <IfModule !mpm_netware_module>
    <IfModule !mpm_winnt_module>
    #
    # If you wish httpd to run as a different user or group, you must run
    # httpd as root initially and it will switch.  
    #
    # User/Group: The name (or #number) of the user/group to run httpd as.
    # It is usually good practice to create a dedicated user and group for
    # running httpd, as with most system services.
    #
    User daemon
    Group daemon

    </IfModule>
    </IfModule>

    # 'Main' server configuration
    #
    # The directives in this section set up the values used by the 'main'
    # server, which responds to any requests that aren't handled by a
    # <VirtualHost> definition.  These values also provide defaults for
    # any <VirtualHost> containers you may define later in the file.
    #
    # All of these directives may appear inside <VirtualHost> containers,
    # in which case these default settings will be overridden for the
    # virtual host being defined.
    #

    #
    # ServerAdmin: Your address, where problems with the server should be
    # e-mailed.  This address appears on some server-generated pages, such
    # as error documents.  e.g. admin@your-domain.com
    #
    ServerAdmin postmaster@localhost

    #
    # ServerName gives the name and port that the server uses to identify itself.
    # This can often be determined automatically, but we recommend you specify
    # it explicitly to prevent problems during startup.
    #
    # If your host doesn't have a registered DNS name, enter its IP address here.
    #
    ServerName localhost:80

    #
    # DocumentRoot: The directory out of which you will serve your
    # documents. By default, all requests are taken from this directory, but
    # symbolic links and aliases may be used to point to other locations.
    #
    DocumentRoot "C:/xampp/htdocs"

    #
    # Each directory to which Apache has access can be configured with respect
    # to which services and features are allowed and/or disabled in that
    # directory (and its subdirectories). 
    #
    # First, we configure the "default" to be a very restrictive set of 
    # features.  
    #
    <Directory />
        Options FollowSymLinks
        AllowOverride None
        Order deny,allow
        Deny from all
    </Directory>

    # XAMPP: We disable operating system specific optimizations for a listening 
    # socket by the http protocol here. IE 64 bit make problems without this.  
    AcceptFilter http none

    #
    # Note that from this point forward you must specifically allow
    # particular features to be enabled - so if something's not working as
    # you might expect, make sure that you have specifically enabled it
    # below.
    #

    #
    # This should be changed to whatever you set DocumentRoot to.
    #
    <Directory "C:/xampp/htdocs">
        #
        # Possible values for the Options directive are "None", "All",
        # or any combination of:
        #   Indexes Includes FollowSymLinks SymLinksifOwnerMatch ExecCGI MultiViews
        #
        # Note that "MultiViews" must be named *explicitly* --- "Options All"
        # doesn't give it to you.
        #
        # The Options directive is both complicated and important.  Please see
        # http://httpd.apache.org/docs/2.2/mod/core.html#options
        # for more information.
        #
        Options Indexes FollowSymLinks Includes ExecCGI

        #
        # AllowOverride controls what directives may be placed in .htaccess files.
        # It can be "All", "None", or any combination of the keywords:
        #   Options FileInfo AuthConfig Limit
        #
        AllowOverride All

        #
        # Controls who can get stuff from this server.
        #
        Order allow,deny
        Allow from all

    </Directory>

    #
    # DirectoryIndex: sets the file that Apache will serve if a directory
    # is requested.
    #
    <IfModule dir_module>
        DirectoryIndex index.php index.pl index.cgi index.asp index.shtml index.html index.htm \
                       default.php default.pl default.cgi default.asp default.shtml default.html default.htm \
                       home.php home.pl home.cgi home.asp home.shtml home.html home.htm
    </IfModule>

    #
    # The following lines prevent .htaccess and .htpasswd files from being 
    # viewed by Web clients. 
    #
    <Files ".ht*">
        Require all denied
    </Files>

    #
    # ErrorLog: The location of the error log file.
    # If you do not specify an ErrorLog directive within a <VirtualHost>
    # container, error messages relating to that virtual host will be
    # logged here.  If you *do* define an error logfile for a <VirtualHost>
    # container, that host's errors will be logged there and not here.
    #
    ErrorLog "logs/error.log"

    #ScriptLog "logs/cgi.log"

    #
    # LogLevel: Control the number of messages logged to the error_log.
    # Possible values include: debug, info, notice, warn, error, crit,
    # alert, emerg.
    #
    LogLevel warn

    <IfModule log_config_module>
        #
        # The following directives define some format nicknames for use with
        # a CustomLog directive (see below).
        #
        LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\"" combined
        LogFormat "%h %l %u %t \"%r\" %>s %b" common

        <IfModule logio_module>
          # You need to enable mod_logio.c to use %I and %O
          LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\" %I %O" combinedio
        </IfModule>

        #
        # The location and format of the access logfile (Common Logfile Format).
        # If you do not define any access logfiles within a <VirtualHost>
        # container, they will be logged here.  Contrariwise, if you *do*
        # define per-<VirtualHost> access logfiles, transactions will be
        # logged therein and *not* in this file.
        #
        #CustomLog "logs/access.log" common

        #
        # If you prefer a logfile with access, agent, and referer information
        # (Combined Logfile Format) you can use the following directive.
        #
        CustomLog "logs/access.log" combined
    </IfModule>

    <IfModule alias_module>
        #
        # Redirect: Allows you to tell clients about documents that used to 
        # exist in your server's namespace, but do not anymore. The client 
        # will make a new request for the document at its new location.
        # Example:
        # Redirect permanent /foo http://localhost/bar

        #
        # Alias: Maps web paths into filesystem paths and is used to
        # access content that does not live under the DocumentRoot.
        # Example:
        # Alias /webpath /full/filesystem/path
        #
        # If you include a trailing / on /webpath then the server will
        # require it to be present in the URL.  You will also likely
        # need to provide a <Directory> section to allow access to
        # the filesystem path.

        #
        # ScriptAlias: This controls which directories contain server scripts. 
        # ScriptAliases are essentially the same as Aliases, except that
        # documents in the target directory are treated as applications and
        # run by the server when requested rather than as documents sent to the
        # client.  The same rules about trailing "/" apply to ScriptAlias
        # directives as to Alias.
        #
        ScriptAlias /cgi-bin/ "C:/xampp/cgi-bin/"

    </IfModule>

    <IfModule cgid_module>
        #
        # ScriptSock: On threaded servers, designate the path to the UNIX
        # socket used to communicate with the CGI daemon of mod_cgid.
        #
        #Scriptsock "logs/cgi.sock"
    </IfModule>

    #
    # "C:/xampp/cgi-bin" should be changed to whatever your ScriptAliased
    # CGI directory exists, if you have that configured.
    #
    <Directory "C:/xampp/cgi-bin">
        AllowOverride None
        Options None
        Order allow,deny
        Allow from all
    </Directory>

    <IfModule mime_module>
        #
        # TypesConfig points to the file containing the list of mappings from
        # filename extension to MIME-type.
        #
        TypesConfig "conf/mime.types"

        #
        # AddType allows you to add to or override the MIME configuration
        # file specified in TypesConfig for specific file types.
        #
        #AddType application/x-gzip .tgz
        #
        # AddEncoding allows you to have certain browsers uncompress
        # information on the fly. Note: Not all browsers support this.
        #
        #AddEncoding x-compress .Z
        #AddEncoding x-gzip .gz .tgz
        #
        # If the AddEncoding directives above are commented-out, then you
        # probably should define those extensions to indicate media types:
        #
        AddType application/x-compress .Z
        AddType application/x-gzip .gz .tgz

        #
        # AddHandler allows you to map certain file extensions to "handlers":
        # actions unrelated to filetype. These can be either built into the server
        # or added with the Action directive (see below)
        #
        # To use CGI scripts outside of ScriptAliased directories:
        # (You will also need to add "ExecCGI" to the "Options" directive.)
        #
        AddHandler cgi-script .cgi .pl .asp

        # For type maps (negotiated resources):
        #AddHandler type-map var

        #
        # Filters allow you to process content before it is sent to the client.
        #
        # To parse .shtml files for server-side includes (SSI):
        # (You will also need to add "Includes" to the "Options" directive.)
        #
        AddType text/html .shtml
        AddOutputFilter INCLUDES .shtml
    </IfModule>

    <IfModule mime_magic_module>
        #
        # The mod_mime_magic module allows the server to use various hints from the
        # contents of the file itself to determine its type.  The MIMEMagicFile
        # directive tells the module where the hint definitions are located.
        #
        MIMEMagicFile "conf/magic"
    </IfModule>

    #
    # Customizable error responses come in three flavors:
    # 1) plain text 2) local redirects 3) external redirects
    #
    # Some examples:
    #ErrorDocument 500 "The server made a boo boo."
    #ErrorDocument 404 /missing.html
    #ErrorDocument 404 "/cgi-bin/missing_handler.pl"
    #ErrorDocument 402 http://localhost/subscription_info.html
    #

    #
    # EnableMMAP and EnableSendfile: On systems that support it, 
    # memory-mapping or the sendfile syscall is used to deliver
    # files.  This usually improves server performance, but must
    # be turned off when serving from networked-mounted 
    # filesystems or if support for these functions is otherwise
    # broken on your system.
    #
    #EnableMMAP off
    #EnableSendfile off

    # Supplemental configuration
    #
    # The configuration files in the conf/extra/ directory can be 
    # included to add extra features or to modify the default configuration of 
    # the server, or you may simply copy their contents here and change as 
    # necessary.

    # XAMPP specific settings
    Include "conf/extra/httpd-xampp.conf"

    # Server-pool management (MPM specific)
    Include "conf/extra/httpd-mpm.conf"

    # Multi-language error messages
    Include "conf/extra/httpd-multilang-errordoc.conf"

    # Fancy directory listings
    Include "conf/extra/httpd-autoindex.conf"

    # Language settings
    Include "conf/extra/httpd-languages.conf"

    # User home directories
    Include "conf/extra/httpd-userdir.conf"

    # Real-time info on requests and configuration
    Include "conf/extra/httpd-info.conf"

    # Virtual hosts
    Include "conf/extra/httpd-vhosts.conf"

    # Distributed authoring and versioning (WebDAV)
    # Attention! WEB_DAV is a security risk without a new userspecific configuration for a secure authentifcation 
    # Include "conf/extra/httpd-dav.conf"

    # Implements a proxy/gateway for Apache.
    Include "conf/extra/httpd-proxy.conf"

    # Various default settings
    Include "conf/extra/httpd-default.conf"

    # Secure (SSL/TLS) connections
    Include "conf/extra/httpd-ssl.conf"
    #
    # Note: The following must must be present to support
    #       starting without SSL on platforms with no /dev/random equivalent
    #       but a statically compiled-in mod_ssl.
    #
    <IfModule ssl_module>
        SSLRandomSeed startup builtin
        SSLRandomSeed connect builtin
    </IfModule>

    # Configure mod_proxy_html to understand HTML4/XHTML1
    #<IfModule proxy_html_module>
    #Include etc/extra/proxy-html.conf
    #</IfModule>

    # AJP13 Proxy
    <IfModule mod_proxy.c>
    <IfModule mod_proxy_ajp.c>
    Include "conf/extra/httpd-ajp.conf"
    </IfModule>
    </IfModule> 
```

我唯一能想到的另一件事是 config.ini 文件或我的引导程序..但是我也找不到那些有什么问题...

配置文件：

```
[production]
phpSettings.display_startup_errors = 0
phpSettings.display_errors = 0
includePaths.library = APPLICATION_PATH "/../library"
bootstrap.path = APPLICATION_PATH "/Bootstrap.php"
bootstrap.class = "Bootstrap"
appnamespace = "Application"
resources.frontController.controllerDirectory = APPLICATION_PATH "/controllers"
resources.frontController.params.displayExceptions = 0

resources.db.adapter = "PDO_MYSQL"
resources.db.params.host = "localhost"
resources.db.params.username = "root"
resources.db.params.password = ""
resources.db.params.dbname = "mydb"

resources.layout.layoutPath = APPLICATION_PATH "/layouts/scripts/"

[staging : production]

[testing : production]
phpSettings.display_startup_errors = 1
phpSettings.display_errors = 1

[development : production]
phpSettings.display_startup_errors = 1
phpSettings.display_errors = 1
resources.frontController.params.displayExceptions = 1 
```

引导程序：

```
<?php

    class Bootstrap extends Zend_Application_Bootstrap_Bootstrap
    {
        protected function _initViewHelpers() {
            $view = new Zend_View();
            $view->addHelperPath( APPLICATION_PATH . '/views/helpers/', 'Application_View_Helper');
            $viewRenderer = Zend_Controller_Action_HelperBroker::getStaticHelper('ViewRenderer');
            $viewRenderer->setView($view);
            Zend_Controller_Action_HelperBroker::addHelper($viewRenderer);
        }
    } 
```

最后一件事可能是 htaccess 文件，但除了应用程序环境之外，它与我使用 Zend 工具生成项目时没有变化......

```
SetEnv APPLICATION_ENV development

RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

如果有人能够破解并解决这个问题，我会按照你的形象建造一座雕像！（比喻）

**更新：**

根据要求，这是我创建的链接到学生控制器的链接：

```
<p><a href="<?php echo $this->url(array("controller"=>"student","action"=>"index"));?>">Studenten</a></p> 
```

注意：此链接位于 IndexController 的 IndexAction 视图中。

**更新 2：**

为了阐明我的项目结构，我为我的控制器、它们的操作和相应的视图设置了正确的目录。例如，views/scripts/student/ 有 index.phtml、add.phtml、edit.phtml 和 delete.phtml。其他控制器也是如此

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T04:51:08.207

您可以`<a href>`像这样使用标签

```
<a href="<?php echo $this->baseUrl();?>/Admin/index">Student</a>
<a href="<?php echo $this->baseUrl();?>/SecondControllername/index">Second</a>
<a href="<?php echo $this->baseUrl();?>/ThirdControllername/index">Third</a> 
```

试试这个，我希望它有效。

如果您有任何问题，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T11:35:21.163

尝试 'localhost/demo/public/index.php/student' 作为链接，并确保你在 studentController 中有一个 indexAction。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T13:23:15.663

恕我直言，您必须在下创建一个目录“student”`views/scripts/`并将student.phtml从一个目录移动`views/scripts/index`到另一个`views/scripts/student`目录

在这种情况下，您现有的链接应该可以工作。

# java - 有什么方法可以通过任务管理器找到在 Java 中运行的线程数？

> ID：12053738
> 
> 赞同：7
> 
> 时间：2012-08-21T11:21:40.987
> 
> 标签：java, multithreading

在 Java 中，假设如果我使用如下循环启动 1000 个线程，有什么方法可以监控实际运行的线程数以及线程使用任务管理器消耗的 CPU 资源？

```
for(int j=0; j<=1000; j++)
{
    MyThread mt = new MyThread ();
    mt.start ();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T11:24:42.440

您可以使用`VisualVM`or`JConsole`或任何其他监控工具

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T11:28:44.810

如果您指的是 Windows 任务管理器，那么可以，您可以自定义进程选项卡中显示的列：

```
Menu View > Select Columns > Threads 
```

**编辑**

一个快速测试表明，创建一个额外的线程确实会将该计数器增加一 - 当该线程终止时，计数器会递减。

但它从不止一个线程开始，因为它可能也包括各种 JVM 线程（它从 19 个线程开始）。请注意，jconsole 在单线程程序中也显示了 10 个线程。

如果您使用可视化 VM，您可以看到守护线程和非守护线程之间的分离（所有 JVM 线程都是守护线程）。

测试代码：

```
public static void main(String[] args) throws InterruptedException {
    Thread.sleep(3000);
    Runnable r = new Runnable() {

        @Override
        public void run() {
            try {
                Thread.sleep(10000);
            } catch (InterruptedException ex) {}
        }
    };

    for (int i = 0; i < 5; i++) {
        new Thread(r).start();
        Thread.sleep(1000);
    }
    Thread.sleep(10000);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T11:25:45.247

在代码中，您可以使用[Thread.activeCount()](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html#activeCount%28%29)方法

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-21T11:25:54.653

我认为[Visual VM](http://visualvm.java.net/)是一个更好的工具。如果您下载并安装所有插件，您将获得线程和更多信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T13:24:51.233

您可以为此 perpers (MXBean) 使用托管 bean。例如 ThreadMXBean。

要获取 MXBean，只需调用

```
ManagementFactory.getThreadMXBean() 
```

getThreadCount() 和 getCurrentThreadCpuTime() 方法将帮助您。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-06-16T07:23:12.113

如果您只想检查 Windows 10 中的线程数

```
Task manager -> Details -> (right click) Select columns -> (check) Threads 
```

[![在此处输入图像描述](../Images/cddb9cbb065e4b46bea17de6311c6167.png)](https://i.stack.imgur.com/GQxNL.png)

# jquery - 如何根据上一页填写的表单自动填写和发布下一个表单

> ID：12053739
> 
> 赞同：0
> 
> 时间：2012-08-21T11:21:42.413
> 
> 标签：jquery, forms, wordpress

我有一个仅包含电子邮件字段的 wordpress 表单，当有人填写该字段并提交表单时，他将被重定向到其他页面并带有感谢信息。

该thankyou页面再次有一个带有电子邮件字段的表格，我需要做的是使用先前表格中填写的电子邮件自动填写第二个表格。

请让我知道如何使用 jquery 来做这件事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T12:14:03.190

`GET`您可以从表单处理脚本（用户被重定向的地方）将电子邮件地址（通过变量）发送到“谢谢”页面。然后可以做类似的事情

```
$('#ID_OF_NEW_E-MAIL_FIELD').text("<?php echo $email_address_from_prev_page; ?>"); 
```

在`$(document).ready()`函数中。

# asp.net - 我正在使用以下代码从 htmlsource 获取所有图像链接

> ID：12053740
> 
> 赞同：1
> 
> 时间：2012-08-21T11:21:48.553
> 
> 标签：asp.net

我正在使用以下代码从 htmlsource 获取所有图像链接，但没有返回链接。我应该在源代码中提供什么。

```
public List<Uri> FetchLinksFromSource(string htmlSource)
    {
        List<Uri> links = new List<Uri>();
        string regexImgSrc = @"<img[^>]*?src\s*=\s*[""']?([^'"" >]+?)[ '""][^>]*?>";
        MatchCollection matchesImgSrc = Regex.Matches(source, regexImgSrc, RegexOptions.IgnoreCase | RegexOptions.Singleline);
        foreach (Match m in matchesImgSrc)
        {
            string href = m.Groups[1].Value;
            links.Add(new Uri(href));
        }
        return links;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T11:49:17.463

使用正则表达式 -

`string regexImgSrc = @"<img.+?src=[\"'](.+?)[\"'].+?>";`

# asp.net-mvc-3 - 运行 IIS 5.1 的 MVC 3 不适用于 Windows 身份验证

> ID：12053741
> 
> 赞同：2
> 
> 时间：2012-08-21T11:21:52.497
> 
> 标签：asp.net-mvc-3, visual-studio-2010, sql-server-2008, windows-xp

我正在使用 IIS 5.1 和 Framework 4.0 在 Visual Studio 2010 上运行 MVC 3。

使用内置于 Web 服务器的 Visual Studio 可以正常工作，但是一旦我开始使用 IIS 5.1，它就无法正常工作。

我还使用添加了应用程序扩展映射 (.*)，`aspnet_isapi.dll`但添加后，Visual Studio 2010 甚至不允许我调试应用程序并引发错误，提示找不到资源。

我已经拔了8个小时的头发了。如果这不起作用，我将不得不恢复为 ASP.NET Web 表单。

任何人都可以请帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T07:07:46.093

我发现 MVC 不喜欢应用程序名称中的点。所以如果是这样`test.mvc`，它会抛出一个错误。删除点后，一切正常。

# android - 应用程序在模拟器中运行良好，但显示 networkonmainthread 异常

> ID：12053742
> 
> 赞同：1
> 
> 时间：2012-08-21T11:21:54.073
> 
> 标签：android, xml-parsing

我创建了一个应用程序，它使用 xml pull parser 从 url 检索数据。它在模拟器上运行良好，但是当我在选项卡中测试它时，它显示 networkonmainthread 异常。我的代码是：

```
package com.example.androidsample4;
import java.io.IOException;
import java.io.InputStream;
import java.net.URI;
import java.net.URL;

import org.xmlpull.v1.XmlPullParser;
import org.xmlpull.v1.XmlPullParserException;
import org.xmlpull.v1.XmlPullParserFactory;
import android.net.Uri;
import android.os.AsyncTask;
import android.os.Bundle;
import android.app.Activity;
import android.content.Context;
import android.content.res.Resources;
import android.content.res.XmlResourceParser;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ArrayAdapter;
import android.widget.AutoCompleteTextView;
import android.widget.Button;
import android.widget.TextView;
import android.widget.Toast;

public class UNIXclass extends Activity 
{
    String unixcommands[];

    AutoCompleteTextView actv1;

    protected URL params;
    static final String URL="http://cympac.com/apps/xmlfile.xml";
    static final String KEY_COMMAND = "command"; // parent node
    static final String KEY_WORD = "word";
    static final String KEY_EXPLANATION = "explanation";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        TextView tv1=(TextView)findViewById(R.id.textView1);
        AutoCompleteTextView actv=(AutoCompleteTextView)findViewById(R.id.autoCompleteTextView1);
        Button b1=(Button)findViewById(R.id.button1);
        unixcommands=getResources().getStringArray(R.array.Commands);
        ArrayAdapter<String> adapter =new ArrayAdapter<String>(getBaseContext(), android.R.layout.simple_list_item_1,unixcommands);
        actv1 = (AutoCompleteTextView)findViewById(R.id.autoCompleteTextView1);
        actv1.setThreshold(1);
        actv1.setAdapter(adapter);
        b1.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) 
            {
                Mytask task=new Mytask();
                task.doInBackground(params);

            }
        });
    }
    private class Mytask extends AsyncTask<java.net.URL, Void, Void>
    {

        @Override
        protected Void doInBackground(java.net.URL... params) 
        {
            TextView myXmlContent = (TextView)findViewById(R.id.textView2);
            String stringXmlContent = null;
            try {
                stringXmlContent = getEventsFromAnXML();   //   54 line
            } catch (XmlPullParserException e) {
                // TODO Auto-generated catch block
                Toast.makeText(getBaseContext(), "error:"+e.getMessage(), Toast.LENGTH_SHORT).show();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                Toast.makeText(getBaseContext(), "error:"+e.getMessage(), Toast.LENGTH_SHORT).show();
            }
            myXmlContent.setText(stringXmlContent);
            return null;

        }

    }
    public String getEventsFromAnXML() throws XmlPullParserException,IOException
    {
        StringBuffer stringBuffer=new StringBuffer();

        java.net.URL url=new java.net.URL("http://cympac.com/apps/xmlfile.xml");
        XmlPullParserFactory factory=XmlPullParserFactory.newInstance();
        factory.setNamespaceAware(true);
        XmlPullParser xpp=factory.newPullParser();
        //xpp.setInput(getInputStream(url),"UTF-8");         //84 line
        xpp.setInput(url.openConnection().getInputStream(), "UTF-8");
        int eventType = xpp.getEventType();
        String word = null;

        String tag;
        while ((eventType = xpp.next()) != XmlPullParser.END_DOCUMENT)
        {
            if(XmlPullParser.START_TAG==eventType)
            {
                tag=xpp.getName();
                //stringBuffer.append("\n"+tag);
                if (tag.equals("word"))
                {
                    eventType = xpp.next();
                    word = xpp.getText();
                }
                else if (tag.equals("explanation"))
                {
                    eventType = xpp.next();
                   //if ("cancel".equals(word))
                    if(actv1.getText().toString().equals(word))

                    {
                        stringBuffer.append("\n" + xpp.getText());
                    }
                }

            }

        }
        return stringBuffer.toString();

    }

} 
```

我读到，当我们必须使用网络时，我们应该使用 Asynctask。所以我使用了它，但它仍然显示相同的错误。请帮我解决这个问题。logcat o/p

```
08-21 16:36:41.087 E/AndroidRuntime( 4076): FATAL EXCEPTION: main
08-21 16:36:41.087 E/AndroidRuntime( 4076): android.os.NetworkOnMainThreadException
08-21 16:36:41.087 E/AndroidRuntime( 4076): at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1077)
08-21 16:36:41.087 E/AndroidRuntime( 4076): at java.net.InetAddress.lookupHostByName(InetAddress.java:477)
08-21 16:36:41.087 E/AndroidRuntime( 4076): at java.net.InetAddress.getAllByNameImpl(InetAddress.java:277)
08-21 16:36:41.087 E/AndroidRuntime( 4076): at java.net.InetAddress.getAllByName(InetAddress.java:249)
08-21 16:36:41.087 E/AndroidRuntime( 4076): at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection.<init>(HttpConnection.java:69)
08-21 16:36:41.087 E/AndroidRuntime( 4076): at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection.<init>(HttpConnection.java:48)
08-21 16:36:41.087 E/AndroidRuntime( 4076): at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection$Address.connect(HttpConnection.java:304)
08-21 16:36:41.087 E/AndroidRuntime( 4076): at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnectionPool.get(HttpConnectionPool.java:89)
08-21 16:36:41.087 E/AndroidRuntime( 4076): at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.getHttpConnection(HttpURLConnectionImpl.java:292)
08-21 16:36:41.087 E/AndroidRuntime( 4076): at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.makeConnection(HttpURLConnectionImpl.java:274)
08-21 16:36:41.087 E/AndroidRuntime( 4076): at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.retrieveResponse(HttpURLConnectionImpl.java:1038)
08-21 16:36:41.087 E/AndroidRuntime( 4076): at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:523)
08-21 16:36:41.087 E/AndroidRuntime( 4076): at com.example.androidsample4.SANclass.getEventsFromAnXML(SANclass.java:115)
08-21 16:36:41.087 E/AndroidRuntime( 4076): at com.example.androidsample4.SANclass$Mytask.doInBackground(SANclass.java:92)
08-21 16:36:41.087 E/AndroidRuntime( 4076): at com.example.androidsample4.SANclass$1.onClick(SANclass.java:58)
08-21 16:36:41.087 E/AndroidRuntime( 4076): at android.view.View.performClick(View.java:3131)
08-21 16:36:41.087 E/AndroidRuntime( 4076): at android.view.View$PerformClick.run(View.java:12035)
08-21 16:36:41.087 E/AndroidRuntime( 4076): at android.os.Handler.handleCallback(Handler.java:587)
08-21 16:36:41.087 E/AndroidRuntime( 4076): at android.os.Handler.dispatchMessage(Handler.java:92)
08-21 16:36:41.087 E/AndroidRuntime( 4076): at android.os.Looper.loop(Looper.java:132)
08-21 16:36:41.087 E/AndroidRuntime( 4076): at android.app.ActivityThread.main(ActivityThread.java:4123)
08-21 16:36:41.087 E/AndroidRuntime( 4076): at java.lang.reflect.Method.invokeNative(Native Method)
08-21 16:36:41.087 E/AndroidRuntime( 4076): at java.lang.reflect.Method.invoke(Method.java:491)
08-21 16:36:41.087 E/AndroidRuntime( 4076): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:844)
08-21 16:36:41.087 E/AndroidRuntime( 4076): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:602)
08-21 16:36:41.087 E/AndroidRuntime( 4076): at dalvik.system.NativeStart.main(Native Method)
08-21 16:36:41.092 V/AudioPolicyManager( 2713): releaseOutput() 1
08-21 16:36:41.092 W/ActivityManager( 2891):   Force finishing activity com.example.androidsample4/.SANclass 
```

如果我包含“new Mytask.execute()”方法，我将被迫关闭。这可能是什么原因？请指导我...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T13:50:50.530

不要在后台线程中更新 UI。应该在`onPostExecute()`

```
Toast.makeText(getBaseContext(), "error:"+e.getMessage(), Toast.LENGTH_SHORT).show();
myXmlContent.setText(stringXmlContent); 
```

在 onPostExecute() 中执行此步骤

[阅读我以前的帖子](https://stackoverflow.com/a/12008663/792232)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T11:26:14.410

`task.doInBackground(params)`只需在同一个线程中调用此方法。要不在 UI 线程中运行`AsyncTask`，您必须调用`execute()`方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T11:30:26.933

你应该如下调用后台线程。

```
b1.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) 
            {

                new Mytask().execute(params);

            }
        }); 
```

# git - 手动克隆 Git 存储库

> ID：12053750
> 
> 赞同：1
> 
> 时间：2012-08-21T11:22:58.000
> 
> 标签：git

我有两个用于启动的硬盘驱动器。我现在在它们之间来回切换，因为我正在其中一个上使用 Archlinux。

这些驱动器上的主分区使用 rsync 进行“克隆”。除其他外，驱动器上有几个 Git 存储库。这样做有什么缺点吗？我是否会在推送和拉取时损坏我的存储库，因为我只是将存储库从一个磁盘复制到另一个磁盘，而不是使用 Git 从我的 Git 服务器克隆它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T11:26:25.733

我认为它应该可以正常工作。但你总是可以`git clone file://yourRepo` 阅读：[Git 本地协议](http://git-scm.com/book/ch4-1.html#Local-Protocol)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T11:32:19.617

这很好，不会破坏任何东西。

由于 git 将所有内容保存在现场，直到发出推送和拉取，并且所有内容都保存在 .git 文件夹中，因此复制的存储库将与克隆的存储库相同，理论上，如果您愿意，您实际上可以将该文件夹复制到多台计算机到。这是 git 作为 DCVS 的众多功能之一

# objective-c - iPhone - 程序接收信号：0 - 在设备上但不在模拟器上（内存管理问题）

> ID：12053764
> 
> 赞同：1
> 
> 时间：2012-08-21T11:24:21.447
> 
> 标签：objective-c, ios, out-of-memory, bulkinsert

我在遍历 SQLite 数据库中执行批量插入的循环时遇到了一个严格的基于内存的问题。

我很确定这是关于内存的，我无法指出导致问题的变量。我已尽我所能释放所有分配的内容。

到目前为止，通过仪器分析没有内存泄漏。代码片段如下：

```
int m=0;

while ([arrData count]!=0) {

if (newQuery) {

    exeQuery = query;
    newQuery = false;

}
else 
{
    exeQuery=[exeQuery stringByAppendingFormat:@" UNION"];
}

NSMutableDictionary *data = [[NSMutableDictionary alloc] initWithDictionary:[arrData objectAtIndex:0]];

[data removeObjectForKey:@"statement"];
[data removeObjectForKey:@"datetime_stamp"];

NSString *strVal=@"";
NSString *_value=@"";

int i=0;
    for(;i<[keys  count]-1;i++)
    {
        if(_value==nil || _value==NULL){
            _value=@"";
        }

        _value=[NSString stringWithFormat:@"%@",[data objectForKey:[keys objectAtIndex:i]]];
        _value=[_value stringByReplacingOccurrencesOfString:@"'" withString:@"''"];

        strVal=[strVal stringByAppendingFormat:@"'%@',",_value];

    }

if(_value==nil || _value==NULL){
    _value=@"";
}

_value=[NSString stringWithFormat:@"%@",[data objectForKey:[keys objectAtIndex:i]]];
_value=[_value stringByReplacingOccurrencesOfString:@"'" withString:@"''"];

strVal=[strVal stringByAppendingFormat:@"'%@'",_value];

exeQuery=[exeQuery stringByAppendingFormat:@" SELECT %@",strVal];

if (m!=0 && m%499==0) {

    [DataSource executeQuery:exeQuery];

    //db.execute(exeQuery);
    newQuery = true;
}

[data release];

[arrData removeObjectAtIndex:0];

m++;
}

for (;m<locations_length; m++) {

if (newQuery) {

    exeQuery = query;
    newQuery = false;

}
else 
{
    exeQuery=[exeQuery stringByAppendingFormat:@" UNION"];
}

NSMutableDictionary *data = [[NSMutableDictionary alloc] initWithDictionary:[arrData objectAtIndex:m]];

[data removeObjectForKey:@"statement"];
[data removeObjectForKey:@"datetime_stamp"];

NSString *strVal=@"";
NSString *_value=@"";

int i=0;
    for(;i<[keys  count]-1;i++)
    {
        if(_value==nil || _value==NULL){
            _value=@"";
        }

        _value=[NSString stringWithFormat:@"%@",[data objectForKey:[keys objectAtIndex:i]]];
        _value=[_value stringByReplacingOccurrencesOfString:@"'" withString:@"''"];

        strVal=[strVal stringByAppendingFormat:@"'%@',",_value];

    }

if(_value==nil || _value==NULL){
    _value=@"";
}

_value=[NSString stringWithFormat:@"%@",[data objectForKey:[keys objectAtIndex:i]]];
_value=[_value stringByReplacingOccurrencesOfString:@"'" withString:@"''"];

strVal=[strVal stringByAppendingFormat:@"'%@'",_value];

exeQuery=[exeQuery stringByAppendingFormat:@" SELECT %@",strVal];

if (m!=0 && m%499==0) {

    [DataSource executeQuery:exeQuery];

    //db.execute(exeQuery);
    newQuery = true;
}

[data release];
} 
```

任何帮助是极大的赞赏。请携手..！

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T12:27:28.097

在不知道您在 [keys count] 中经历了多少次迭代的情况下，您正在执行大量 NSString 操作。每个“stringBy...”消息都会分配一个新的自动释放的 NSString 实例，直到你退出循环才会被释放。您可能需要考虑改用 NSMutableString 并使用

```
replaceOccurrencesOfString:withString:options:range: 
```

减少您正在创建的自动释放对象的数量（从而减少应用程序的内存占用）。请参阅[NSMutableString 文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsmutablestring_Class/Reference/Reference.html)。否则，我建议使用 Xcode 中的分配工具或类似工具来尝试仔细检查您的内存占用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T09:18:14.683

很明显，我们正在使用一个每个实例都会发生突变的字符串，因此 nsmutablestring 是优化的解决方案。在分析函数时：

```
[NSMutableString replaceOccurrencesOfString:@"'" withString:@"''"]
[NSMutableString  appendString:] 
```

在仪器中，与您使用过的仪器进行比较时，它们会留下更少的内存足迹。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T11:44:13.443

对于使用 Sqlite 或 Core Data 在数据库中批量插入记录，总是更喜欢在 @autoreleasepool{} 中使用循环，因为这样，所有处于自动释放模式的对象，在立即使用后将变为 nil。

```
int m=0;

while ([arrData count]!=0) {

@autoreleasepool{

if (newQuery) {

    exeQuery = query;
    newQuery = false;

}
else 
{
    exeQuery=[exeQuery stringByAppendingFormat:@" UNION"];
}

NSMutableDictionary *data = [[NSMutableDictionary alloc] initWithDictionary:[arrData objectAtIndex:0]];

[data removeObjectForKey:@"statement"];
[data removeObjectForKey:@"datetime_stamp"];

NSString *strVal=@"";
NSString *_value=@"";

int i=0;
    for(;i<[keys  count]-1;i++)
    {
        if(_value==nil || _value==NULL){
            _value=@"";
        }

        _value=[NSString stringWithFormat:@"%@",[data objectForKey:[keys objectAtIndex:i]]];
        _value=[_value stringByReplacingOccurrencesOfString:@"'" withString:@"''"];

        strVal=[strVal stringByAppendingFormat:@"'%@',",_value];

    }

if(_value==nil || _value==NULL){
    _value=@"";
}

_value=[NSString stringWithFormat:@"%@",[data objectForKey:[keys objectAtIndex:i]]];
_value=[_value stringByReplacingOccurrencesOfString:@"'" withString:@"''"];

strVal=[strVal stringByAppendingFormat:@"'%@'",_value];

exeQuery=[exeQuery stringByAppendingFormat:@" SELECT %@",strVal];

if (m!=0 && m%499==0) {

    [DataSource executeQuery:exeQuery];

    //db.execute(exeQuery);
    newQuery = true;
}

[data release];

[arrData removeObjectAtIndex:0];

m++;
}

for (;m<locations_length; m++) {

if (newQuery) {

    exeQuery = query;
    newQuery = false;

}
else 
{
    exeQuery=[exeQuery stringByAppendingFormat:@" UNION"];
}

NSMutableDictionary *data = [[NSMutableDictionary alloc] initWithDictionary:[arrData objectAtIndex:m]];

[data removeObjectForKey:@"statement"];
[data removeObjectForKey:@"datetime_stamp"];

NSString *strVal=@"";
NSString *_value=@"";

int i=0;
    for(;i<[keys  count]-1;i++)
    {
        if(_value==nil || _value==NULL){
            _value=@"";
        }

        _value=[NSString stringWithFormat:@"%@",[data objectForKey:[keys objectAtIndex:i]]];
        _value=[_value stringByReplacingOccurrencesOfString:@"'" withString:@"''"];

        strVal=[strVal stringByAppendingFormat:@"'%@',",_value];

    }

if(_value==nil || _value==NULL){
    _value=@"";
}

_value=[NSString stringWithFormat:@"%@",[data objectForKey:[keys objectAtIndex:i]]];
_value=[_value stringByReplacingOccurrencesOfString:@"'" withString:@"''"];

strVal=[strVal stringByAppendingFormat:@"'%@'",_value];

exeQuery=[exeQuery stringByAppendingFormat:@" SELECT %@",strVal];

if (m!=0 && m%499==0) {

    [DataSource executeQuery:exeQuery];

    //db.execute(exeQuery);
    newQuery = true;
}

[data release]; 

}

} 
```

# iphone - 实现 TabBar 应用程序

> ID：12053771
> 
> 赞同：0
> 
> 时间：2012-08-21T11:24:42.027
> 
> 标签：iphone, ios, xcode, uitabbarcontroller

我制作了一个应用程序，其中前 4 个屏幕没有标签栏，但之后每个屏幕都有标签栏。所以我在每个 nib 文件中添加了标签栏。

我如何实现标签栏使其正常工作。

帮我！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T11:35:39.790

在您的 didFinishLaunching 中创建 tabBarController，但仅在您显示没有 TabBar 的前 4 个屏幕后才显示它。这是默认的 didFinishLaunching，当您选择标准 TabBar 应用程序模板时由 Xcode 生成：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:

(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    UIViewController *viewController1 = [[FirstViewController alloc] initWithNibName:@"FirstViewController" bundle:nil];
    UIViewController *viewController2 = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];
    self.tabBarController = [[UITabBarController alloc] init];
    self.tabBarController.viewControllers = @[viewController1, viewController2];
    self.window.rootViewController = self.tabBarController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

在这里你应该替换这一行：

```
self.window.rootViewController = self.tabBarController; 
```

用你的线来展示你的控制器。像这样的东西：

```
LoginViewController *loginViewController = [[LoginViewController alloc] initWithNibName:@"LoginViewController" bundle:nil];
            loginViewController.delegate = self;
self.window.rootViewController = loginViewController; 
```

然后，当您删除最后一个屏幕并想要显示标签栏时，请写下：

```
AppDelegate *appDelegate = (AppDelegate *)[[UIApplication   sharedApplication] delegate];
appDelegate.window.rootViewController = self.tabBarController; 
```

主要思想是您只需**更改应用程序窗口的 rootViewController**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T11:32:46.090

没有看到代码很难看出哪里出错了，所以我建议你给[开发中心](http://developer.apple.com/library/ios/#DOCUMENTATION/WindowsViews/Conceptual/ViewControllerCatalog/Chapters/TabBarControllers.html)一个机会:)

# visual-studio - 执行的 Visual Studio 自定义构建规则的日志在哪里？

> ID：12053773
> 
> 赞同：0
> 
> 时间：2012-08-21T11:24:47.757
> 
> 标签：visual-studio, visual-studio-2008

Visual Studio 是否会生成已执行的自定义构建步骤的日志？如果是，该日志在哪里？

是否有任何其他方法可以显示所有已执行的自定义构建规则（其中所有宏都已展开）以进行调试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T22:31:11.163

由构建工具提供诊断日志记录，但您可以通过查看 VS 构建日志来了解 Visual Studio 正在传递给构建工具的内容。只需 [Ctrl] - 单击构建输出末尾的构建日志链接即可在 IDE 中查看它。

# c# - 使用数据注释验证 viewmodel 的单个属性

> ID：12053775
> 
> 赞同：0
> 
> 时间：2012-08-21T11:24:48.387
> 
> 标签：c#, asp.net-mvc-3, data-annotations, asp.net-mvc-viewmodel

我正在尝试使用视图模型和数据注释构建多个文件上传。以下是视图模型：

```
 public class UploadNewsModel
{
[File(AllowedFileExtensions = new string[] { ".jpg", ".gif", ".tiff", ".png", ".pdf" }, MaxContentLength = 1024 * 1024 * 8, ErrorMessage = "Invalid File")]
        public HttpPostedFileBase GenearlNews { get; set; }

        [File(AllowedFileExtensions = new string[] { ".jpg", ".gif", ".tiff", ".png", ".pdf" }, MaxContentLength = 1024 * 1024 * 8, ErrorMessage = "Invalid File")]
      public HttpPostedFileBase SportNews { get; set; }

        [File(AllowedFileExtensions = new string[] { ".jpg", ".gif", ".tiff", ".png", ".pdf" }, MaxContentLength = 1024 * 1024 * 8, ErrorMessage = "Invalid File")]
      public HttpPostedFileBase BusiNews { get; set; }

        [File(AllowedFileExtensions = new string[] { ".jpg", ".gif", ".tiff", ".png", ".pdf" }, MaxContentLength = 1024 * 1024 * 8, ErrorMessage = "Invalid File")]
      public HttpPostedFileBase InterNews { get; set; }

        [File(AllowedFileExtensions = new string[] { ".jpg", ".gif", ".tiff", ".png", ".pdf" }, MaxContentLength = 1024 * 1024 * 8, ErrorMessage = "Invalid File")]
      public HttpPostedFileBase EntertaintNews { get; set; }
        } 
```

**问题：** 在这里，我想检查单个属性的模型状态以显示单个验证错误中的错误。我不知道要检查个人，而对于我们使用**ModelState.IsValid**的所有视图模型，我有以下操作：

```
 [HttpPost]
  public ActionResult Index(UploadNewsModel newsmodel)
{

    HttpPostedFileBase general = newsmodel.GenearlNews;
    HttpPostedFileBase sport = newsmodel.SportNews;
    HttpPostedFileBase business = newsmodel.BusiNews;
    HttpPostedFileBase international = newsmodel.InterNews;
    HttpPostedFileBase entertainment = newsmodel.EntertaintNews;

    if (general.ContentLength > 0 && general != null && ...check generalnews validation using data annotation == valid.. )
    {
        var fileName = Path.GetFileName(general.FileName);
        var path = Path.Combine(Server.MapPath("~/App_Data/uploads/News/General News/"), fileName);
        general.SaveAs(path);
    }
    else
    {
        .... add error of data annotation plus  below
        ModelState.AddModelError("", "The user name or password provided is incorrect.");
    }

     ......... same for remaining upload file
    return View(newsmodel);
} 
```

**看法：**

```
 @model IVRControlPanel.Models.UploadNewsModel

  @using (Html.BeginForm("index", "NewsUpload", FormMethod.Post, new { name = "form1", @id = "form1", enctype = "multipart/form-data" }))
        {

       @Html.ValidationSummary(true)
  @Html.TextBoxFor(model => model.GenearlNews, new {  type = "file" })
               @Html.ValidationMessageFor(model => model.GenearlNews)
          ........... same for remaining file upload
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T11:48:54.427

您的/`UploadNewsModel`没有任何属性，那么您究竟从哪里得到这些属性？`Username``Password`

如果您只想允许授权访问您的控制器操作，那么您应该使用[AuthorizeAttribute](http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute%28v=vs.108%29.aspx)。

```
[HttpPost]  
[Authorize]
public ActionResult Index(UploadNewsModel newsmodel)
{
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T11:47:09.797

如果要返回错误消息，则需要检查 Isvalid：

```
 [HttpPost]
  public ActionResult Index(UploadNewsModel newsmodel)
{
    // If not Valid
    if (!ModelState.IsValid)
    {
       return this.View(newsmodel);
    }
    HttpPostedFileBase general = newsmodel.GenearlNews;
    HttpPostedFileBase sport = newsmodel.SportNews;
    HttpPostedFileBase business = newsmodel.BusiNews;
    HttpPostedFileBase international = newsmodel.InterNews;
    HttpPostedFileBase entertainment = newsmodel.EntertaintNews;

    if (general.ContentLength > 0 && general != null && ...check generalnews validation using data annotation == valid.. )
    {
        var fileName = Path.GetFileName(general.FileName);
        var path = Path.Combine(Server.MapPath("~/App_Data/uploads/News/General News/"), fileName);
        general.SaveAs(path);
    }
    else
    {
        .... add error of data annotation plus  below
        ModelState.AddModelError("", "The user name or password provided is incorrect.");
    }

     ......... same for remaining upload file
    return View(newsmodel);
} 
```

这样它应该只显示发布文件的错误；如果要填写所有 5 个字段，则需要添加 [必填]：

```
[Required]
     [File(AllowedFileExtensions = new string[] { ".jpg", ".gif", ".tiff", ".png", ".pdf" }, MaxContentLength = 1024 * 1024 * 8, ErrorMessage = "Invalid File")]
          public HttpPostedFileBase SportNews { get; set; } 
```

** 您将无法单独检查每个属性以进行验证，但使用 isValid 您将通知用户文件不正确。

# entity-framework - 代码优先循环引用外键配置

> ID：12053776
> 
> 赞同：2
> 
> 时间：2012-08-21T11:24:54.810
> 
> 标签：entity-framework, ef-code-first

当所有代码均未注释时，以下代码会产生外键错误。

```
public class Parent
{
    public int Id { get; set; }
    public string Name { get; set; }
    public int FavoriteChildId { get; set; }
    public Child FavoriteChild { get; set; }
    //public int WorstChildId { get; set; }
    public Child WorstChild { get; set; }
    public ICollection<Child> Children { get; set; }
}

public class Child
{
    public int Id { get; set; }
    public string Name { get; set; }
    //public int ParentId { get; set; }
    public Parent Parent { get; set; }
}

public class CFContext : DbContext
{
    public DbSet<Parent> Parents { get; set; }
    public DbSet<Child> Children { get; set; }
} 
```

如果未指定外键名称但无法编辑模型，则它可以工作。有谁知道如何指定外键名称？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T13:03:41.930

遵循命名约定将在上面创建正确的 FK - 您的代码：

```
public int WorstChildId { get; set; }
public Child WorstChild { get; set; } 
```

是否为 WorstChild 创建 WorstChildId 的 FK。但是，当我尝试上面的代码时，我收到了多个删除路径错误（Parent -> WorstChild -> ChildTable，Parent -> FavoriteChild -> ChildTable）

您可以将其中一个或两个映射设置为在删除时不级联，这将解决您的问题：

```
public class CFContext : DbContext
{
    public DbSet<Parent> Parents { get; set; }
    public DbSet<Child> Children { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<Child>()
            .HasRequired(c => c.Parent)
            .WithRequiredPrincipal(p => p.WorstChild)
            .WillCascadeOnDelete(false);

        modelBuilder.Entity<Child>()
         .HasRequired(c => c.Parent)
         .WithRequiredPrincipal(p => p.FavoriteChild)
         .WillCascadeOnDelete(false);
    }
} 
```

# search - 在 Cassandra 中搜索数据

> ID：12053785
> 
> 赞同：0
> 
> 时间：2012-08-21T11:25:36.353
> 
> 标签：search, cassandra

我知道使用 Cassandra，可以使用二级索引进行搜索，但问题是我正在尝试从超级列中搜索信息。所以我想在一个超级列中搜索一个值，但返回该行中的所有内容（不仅仅是那个超级列）。这可能吗？

我的理解是 Facebook 和 Twitter 使用 Cassandra，所以如果他们有搜索工具，这似乎毫无意义，但使用 Cassandra 内置的东西是不可能的。

如果我不理解在 Cassandra 中正确使用超级列，请纠正我。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T13:16:03.393

您无法搜索超级列值，因为 SC 不支持二级索引。出于各种原因，您应该避免使用超级列，但主要是因为它们已被有效弃用。大多数超级柱用例都是通过使用复合材料来支持的——最终将取代 SC。同时，如果您必须在 SC 中搜索值，则必须手动（即在代码中）或使用 Hadoop 或 Solr 等外部工具进行搜索。

# objective-c - 使用 XML 阅读器进行 XML 到字典解析

> ID：12053792
> 
> 赞同：-2
> 
> 时间：2012-08-21T11:26:03.393
> 
> 标签：objective-c, ios

我想将数据转换为字典，任何建议..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T11:38:59.363

如果您是新手并且不知道如何将 xml 解析为字典...请尝试以下方法...

在 .h 文件中添加此方法

```
#import <Foundation/Foundation.h>

@interface XMLReader : NSObject
{
    NSMutableArray *dictionaryStack;
    NSMutableString *textInProgress;
    NSError **errorPointer;
}

+ (NSDictionary *)dictionaryForXMLData:(NSData *)data error:(NSError **)errorPointer;
+ (NSDictionary *)dictionaryForXMLString:(NSString *)string error:(NSError **)errorPointer;

@end 
```

并在您的 .m 文件中使用这些方法解析您的 URL。

```
NSString *const kXMLReaderTextNodeKey = @"text";

@interface XMLReader (Internal)

- (id)initWithError:(NSError **)error;
- (NSDictionary *)objectWithData:(NSData *)data;

@end

@implementation XMLReader

#pragma mark -
#pragma mark Public methods

+ (NSDictionary *)dictionaryForXMLData:(NSData *)data error:(NSError **)error
{
    XMLReader *reader = [[XMLReader alloc] initWithError:error];
    NSDictionary *rootDictionary = [reader objectWithData:data];
    [reader release];
    return rootDictionary;
}

+ (NSDictionary *)dictionaryForXMLString:(NSString *)string error:(NSError **)error
{
    NSData *data = [string dataUsingEncoding:NSUTF8StringEncoding];
    return [XMLReader dictionaryForXMLData:data error:error];
}

#pragma mark -
#pragma mark Parsing

- (id)initWithError:(NSError **)error
{
    if (self = [super init])
    {
        errorPointer = error;
    }
    return self;
}

- (void)dealloc
{
    [dictionaryStack release];
    [textInProgress release];
    [super dealloc];
}

- (NSDictionary *)objectWithData:(NSData *)data
{
    // Clear out any old data
    [dictionaryStack release];
    [textInProgress release];

    dictionaryStack = [[NSMutableArray alloc] init];
    textInProgress = [[NSMutableString alloc] init];

    // Initialize the stack with a fresh dictionary
    [dictionaryStack addObject:[NSMutableDictionary dictionary]];

    // Parse the XML
    NSXMLParser *parser = [[NSXMLParser alloc] initWithData:data];
    parser.delegate = self;
    BOOL success = [parser parse];

    // Return the stack's root dictionary on success
    if (success)
    {
        NSDictionary *resultDict = [dictionaryStack objectAtIndex:0];
        return resultDict;
    }

    return nil;
}

#pragma mark -
#pragma mark NSXMLParserDelegate methods

- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{
    // Get the dictionary for the current level in the stack
    NSMutableDictionary *parentDict = [dictionaryStack lastObject];

    // Create the child dictionary for the new element, and initilaize it with the attributes
    NSMutableDictionary *childDict = [NSMutableDictionary dictionary];
    [childDict addEntriesFromDictionary:attributeDict];

    // If there's already an item for this key, it means we need to create an array
    id existingValue = [parentDict objectForKey:elementName];
    if (existingValue)
    {
        NSMutableArray *array = nil;
        if ([existingValue isKindOfClass:[NSMutableArray class]])
        {
            // The array exists, so use it
            array = (NSMutableArray *) existingValue;
        }
        else
        {
            // Create an array if it doesn't exist
            array = [NSMutableArray array];
            [array addObject:existingValue];

            // Replace the child dictionary with an array of children dictionaries
            [parentDict setObject:array forKey:elementName];
        }

        // Add the new child dictionary to the array
        [array addObject:childDict];
    }
    else
    {
        // No existing value, so update the dictionary
        [parentDict setObject:childDict forKey:elementName];
    }

    // Update the stack
    [dictionaryStack addObject:childDict];
}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{
    // Update the parent dict with text info
    NSMutableDictionary *dictInProgress = [dictionaryStack lastObject];

    // Set the text property
    if ([textInProgress length] > 0)
    {
        [dictInProgress setObject:textInProgress forKey:kXMLReaderTextNodeKey];

        // Reset the text
        [textInProgress release];
        textInProgress = [[NSMutableString alloc] init];
    }

    // Pop the current dict
    [dictionaryStack removeLastObject];
}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
    // Build the text value
    [textInProgress appendString:string];
}

- (void)parser:(NSXMLParser *)parser parseErrorOccurred:(NSError *)parseError
{
    // Set the error pointer to the parser's error object
    *errorPointer = parseError;
}

@end 
```

我认为这对您解析 xml 数据会有所帮助。

# javascript - 期待一个间谍，但得到了功能

> ID：12053799
> 
> 赞同：35
> 
> 时间：2012-08-21T11:26:16.763
> 
> 标签：javascript, backbone.js, jasmine, marionette

我正在尝试为此模块 (2) 实施测试 (1)。
我的目的是检查在触发特定事件时是否获取了集合。
正如您从我在 (2) 中的评论中看到的那样，我收到消息 `Error: Expected a spy, but got Function.`
The module works but the test failed。有任何想法吗？

* * *

(1)

```
// jasmine test module

describe('When onGivePoints is fired', function () {
    beforeEach(function () {
        spyOn(this.view.collection, 'restartPolling').andCallThrough();
        app.vent.trigger('onGivePoints');
    });
    it('the board collection should be fetched', function () {
        expect(this.view.collection.restartPolling).toHaveBeenCalled();
       // Error: Expected a spy, but got Function.
    });
}); 
```

* * *

(2)

```
// model view module
return Marionette.CompositeView.extend({
    initialize: function () {
        this.collection = new UserBoardCollection();
        this.collection.startPolling();
        app.vent.on('onGivePoints', this.collection.restartPolling);
    },
    // other code
}); 
```

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-08-21T15:18:01.693

你需要进入实际的方法，在这种情况下是在原型上。

```
describe('When onGivePoints is fired', function () {
    beforeEach(function () {
        spyOn(UsersBoardCollection.prototype, 'restartPolling').andCallThrough();
        app.vent.trigger('onGivePoints');
    });
    it('the board collection should be fetched', function () {
        expect(UsersBoardCollection.prototype.restartPolling).toHaveBeenCalled();
    });
}); 
```

监视原型是一个不错的技巧，当您无法访问要监视的实际实例时可以使用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-12-17T05:07:48.920

我也遇到了同样的问题，但我通过在函数调用中传递一个参数来解决它。然后你必须在`it`

```
var data = {name:"test"}
spyOn(UsersBoardCollection.prototype, "restartPolling").and.callThrough();
UsersBoardCollection.prototype.restartPolling(data);
expect(UsersBoardCollection.prototype.restartPolling).toHaveBeenCalled(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-18T23:19:44.490

我有这个错误是因为我加载了两个版本的 sinon，或者我没有正确初始化 sinon-jasmine。当我在我的规范设置中显式加载 sinon 和 sinon jasmine 时，它​​开始正常运行。

# ssl - SSL 证书站点问题 - 谷歌分析？

> ID：12053800
> 
> 赞同：0
> 
> 时间：2012-08-21T11:26:18.490
> 
> 标签：ssl, google-analytics, ssl-certificate, insecure-connection

我有一个安装了 SSL 证书的网站。如果我通过 https://www.[MY-SITE].com 导航到该站点，那么它会在 Chrome 中闪烁一秒钟，并带有绿色的 https:// 指示。然后它变灰并显示该站点正在加载不安全内容的消息。

网站上的一些链接仍然是旧的 http:// 版本，但它实际上并没有从它所链接的文件中加载任何内容。我想到的一件事是我无权将 Google Analytics 代码更改为 https://，因此它仍然位于 Google 管理设置中的 http:// 上。这会是问题吗？

谢谢，

杰克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T11:37:03.457

我认为可能会出现错误。我只是从网上搜索了一些关于您的查询的帖子。请阅读此链接：

[http://blogoscoped.com/archive/2007-12-13-n83.html](http://blogoscoped.com/archive/2007-12-13-n83.html)

[http://code.google.com/p/r-google-analytics/issues/detail?id=1](http://code.google.com/p/r-google-analytics/issues/detail?id=1)

我希望它对你有帮助。

# c++ - 更改图像位图或在图像上绘制位图会导致图像消失

> ID：12053804
> 
> 赞同：1
> 
> 时间：2012-08-21T11:26:35.063
> 
> 标签：c++, image, bitmap, c++builder

我正在使用两个位图在它们上绘制图形。绘制后，我需要在两个图像中显示位图图片。将位图分配给 Image 或将位图绘制到 Image 有时会导致 Image 消失（您可以看到表单背景）。我试过这个：

```
 Image->Picture->Bitmap->Assign(bitmap1);
   Image2->Picture->Bitmap->Assign(bitmap2);

   Image->Picture->Graphic = bitmap1;....

   Image->Canvas->Draw(0,0,bitmap1);....

   Image->Picture->Bitmap->Canvas->Draw(0,0,bitmap1); 
```

如果我在 Image 和 Image2 重绘之间没有 Sleep(100)，则 Image2 大部分时间都不可见。添加 Image2->Refresh 也有帮助，但有时两个图像仍会出现此问题。

如果我将创建的位图或图像保存到 .jpeg 文件，则所有 .jpeg 图像都是正确的，并且没有一个是空的。Image->height, Image->picture->bitmap->height and width 也总是正确的。

谁能告诉我，我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T10:23:17.707

过了一会儿，我意识到，我保存的位图和图像并不完全正确。如果我看不到图片，它没有完全绘制。没有错误，它是随机发生的，但我发现，一旦程序开始忽略我的绘图命令，它直到函数结束才绘制任何东西，该函数执行绘图。所以 - 为了检查，如果我仍然可以绘制，在将位图分配给 Image 之前，我这样做了：

```
 Image3->Canvas->Pixels[y][0] = clRed;
            TColor test =  Image3->Canvas->Pixels[y][0];

            Image3->Canvas->TextOut(y, 0, Device1->name);

            TColor test2 = Image3->Canvas->Pixels[y][0];

            if(test == test2)
            {
                    imageUpdated = false;
                    delete Image3;
                    return;
            }

            Image->Picture->Graphic = Image3;
            imageUpdated = true; 
```

这意味着 - 我将一个像素更改为红色，然后打印在文本上，这应该使更改后的像素变为白色。基于此，我检查了颜色是否改变（能够改变像素颜色和打印​​文本）。

我真的不知道为什么它有时会开始忽略绘图命令，但我希望，如果有人遇到和我一样的问题，这个答案可能会对他/她有所帮助。

# jquery - 为移动设备提供特定的 javascript

> ID：12053806
> 
> 赞同：0
> 
> 时间：2012-08-21T11:26:45.517
> 
> 标签：jquery, mouseover

我正在介绍一个包含鼠标悬停元素的菜单，因此不适合触摸屏。有没有办法指示移动设备以与 CSS 媒体查询类似的方式加载不同的 javascript？

为了记录，菜单有点像以下：

[http://www.webchief.co.uk/blog/simple-jquery-dropdown-menu/finishedMenu.html](http://www.webchief.co.uk/blog/simple-jquery-dropdown-menu/finishedMenu.html)

不，实施这种特定行为不是我的选择..

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T11:31:52.910

尝试使用媒体查询来设置特定元素的外观（即显示：无/块），然后运行条件...

例如

```
if($('#myElement').is(':visible')){
    // run code
} 
```

# facebook - 在 Facebook 应用 iFrame 中登录

> ID：12053809
> 
> 赞同：0
> 
> 时间：2012-08-21T11:26:56.947
> 
> 标签：facebook

我在登录 Facebook 应用程序时遇到了一些问题。

我可以将用户 ok 重定向到 Auth Dialog Permissions 框并对其进行授权，然后转到[https://apps.facebook.com/my_app/start.php](https://apps.facebook.com/my_app/start.php)，现在在 start.php 我有一个标准表单，可以将数据发布到自己将用户登录到我们自己的身份验证系统（通过 API），现在我收到“拒绝显示文档，因为 X-Frame-Options 禁止显示。”。这是因为我无法将 iFrame 中的数据发布到我们的 API 吗？

这里通常的工作流程是什么？

一旦用户登录到我们自己的系统，我是否需要打开一个新窗口并将用户重定向回应用程序？

任何建议表示赞赏！

顺便说一句，我正在使用来自 FB 的 PHP SDK...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T11:35:14.340

> 现在我收到“拒绝显示文档，因为 X-Frame-Options 禁止显示。”。这是因为我无法将 iFrame 中的数据发布到我们的 API 吗？

不，这是因为您的服务器通过 HTTP 标头告诉客户端浏览器该资源不允许显示在外部域的 (i) 帧中。

因此，如果您想在 Facebook 的 iframe 中使用您的页面，请停止您的服务器发送此标头。

[http://www.google.com/search?q=X-Frame-Options](http://www.google.com/search?q=X-Frame-Options)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T11:50:21.323

解决了！

如果有人感兴趣，这是有效的表单标记：

```
<form target="iframe_canvas_fb_https" action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post"> 
```

target 是您的应用所在的 iframe 的名称。

# node.js - Mongoose 和模型连接

> ID：12053811
> 
> 赞同：4
> 
> 时间：2012-08-21T11:27:06.950
> 
> 标签：node.js, mongoose

我试图弄清楚猫鼬如何使用它的连接。目前我有：

```
// Datastore.js
var mongoose = require('mongoose'),
    conn = mongoose.createConnection();

...

conn.open(host, database, port, options, callback); // Opens connection

// Model.js
var mongoose = require('mongoose');
var Schema = new mongoose.Schema({...})
module.exports = exports = mongoose.model('MyModel', Schema);

// Controller.js
var mongoose = require('mongoose');
var MyModel = mongoose.model('MyModel'); // Retrieves the model ok

MyModel.find({}, function(err, docs){
   if(err){} //
   console.log(docs); // Does not work
}); 
```

但是，这不起作用......它只有在我以某种方式传递连接时才起作用，如下所示：

```
// Datastore.js
var mongoose = require('mongoose'),
    conn = mongoose.createConnection();

...

conn.open(host, database, port, options, callback); //

mongoose.set('db', conn);

// Controller.js
var mongoose = require('mongoose'),
    db = mongoose.get('db');

var MyModel = db.model('MyModel'); // Retrieve the model using the connection instance

MyModel.find({}, function(err, docs){
   if(err){} //
   console.log(docs); // Works
}); 
```

我认为我以错误的方式处理这个问题......第一种方法是否可行，而我做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-21T13:33:15.320

最简单的方法是打开所有 mongoose 调用共享的默认连接池：

```
// Datastore.js
var mongoose = require('mongoose'),
    db = mongoose.connect('localhost', 'dbname'); 
```

然后在所有其他文件中使用`mongoose.model(...)`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T11:51:01.540

看看它说的[文档：](http://mongoosejs.com/)

```
var mongoose = require('mongoose');
var db = mongoose.createConnection('localhost', 'test'); 
```

也许您需要将您的连接详细信息放入创建连接

```
var mongoose = require('mongoose'),
conn = mongoose.createConnection('localhost', 'test'); 
```

# html - 鼠标移到下拉列表上时下拉菜单消失

> ID：12053813
> 
> 赞同：1
> 
> 时间：2012-08-21T11:27:20.040
> 
> 标签：html, css, blogger, blogspot

我有一个托管在 blogger.google.com 上的博客。

最近我遇到了一个名为“类别”的下拉菜单的问题。当我将光标移到子元素（子菜单项）上时，它们就会自动消失。我已经尝试过类似问题的其他答案，但在我的情况下它们并没有太大帮助。

当我将鼠标移到它们上方时，我只想让下拉元素保留在它们的位置，以便我可以选择它们。

任何人都可以检查问题吗？

我的网站链接是[http://www.techtreck.in](http://www.techtreck.in)

尝试转到“**类别**”选项卡，您会看到我在说什么。

许多thanx提前..

..希望尽快得到答复！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T11:31:21.697

如果您移动鼠标的速度足够快，它就可以工作：P

但看起来这是由于类别和实际下拉菜单之间的差距，当您向下移动鼠标时，它会进入间隙，因此它不再触发 onmouseover 事件，隐藏下拉菜单。

您应该将下拉菜单的位置向上移动，使其与类别按钮完全对齐。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T11:41:34.057

你的主菜单和子菜单之间有一个隐藏的差距。用firebug检查你的css，我在你的代码中发现了这个：

```
#top li ul {
    background: none repeat scroll 0 0 #111111;
    margin-top: 20px;
    padding: 5px 0 3px;
    width: 187px;
} 
```

现在`margin-top: 20px;`离主菜单太远了。所以改成：

```
#top li ul {
        background: none repeat scroll 0 0 #111111;
        margin-top: 14px;
        padding: 5px 0 3px;
        width: 187px;
    } 
```

它会正常工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T12:45:43.070

主菜单和子菜单之间的差距确实是导致问题的原因。@kakarott 解决方案也是我会做的，它是迄今为止最简单的解决方案。但是，如果设计上存在差距，您仍然可以通过使用 css 来获得所需的结果。这样的事情应该可以解决问题：

*   去掉sub ul的背景色使其透明
*   将 sub ul 的边距更改为填充
*   将 sub li 的边距也更改为填充
*   在 sub li 上设置 sub ul 上的背景颜色
*   将 sub ul 上的 padding 添加到 sub li 的相应 padding

（我没有对此进行测试，但如果我没有忘记任何事情，它应该可以解决我认为的问题）

这样做是使嵌套的 ul 透明并与父 li 重叠。这样，当您将鼠标移动到子菜单上时，悬停状态仍然会被触发。视觉上应该没有变化。

# google-app-engine - scribe-java 在 appengine 沙箱中可以正常工作吗

> ID：12053815
> 
> 赞同：1
> 
> 时间：2012-08-21T11:27:21.520
> 
> 标签：google-app-engine, scribe

我正在 AppEngine 中开发一个应用程序并试验 OAuth，我遇到了 scribe-java [1]，这似乎很容易而且很好，我打算使用它。

它会在 appengine 中播放吗（即使用给定的 JRE 白名单）？有人成功使用它吗？我没有在 [2] 中看到它，并且在谷歌上搜索也没有给我直接的答案。

感谢您的回复。

[1] [https://github.com/fernandezpablo85/scribe-java](https://github.com/fernandezpablo85/scribe-java)
[2] [http://code.google.com/p/googleappengine/wiki/WillItPlayInJava](http://code.google.com/p/googleappengine/wiki/WillItPlayInJava)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T19:58:09.897

我已经多次成功地将 scribe 与 Google AppEngine 一起使用。

Scribe 使用`java.net.HttpURLConnection`Google AppEngine 支持的，所以没有问题。

感谢您注意到 GAE 页面上未列出的内容，将尝试查看是否可以让 Google 人员将其包含在内：）

# java - GlassFish OSE 3.1.2.2（内部版本 5）上的多部分/表单数据 Web 服务中的异常

> ID：12053816
> 
> 赞同：4
> 
> 时间：2012-08-21T11:27:21.443
> 
> 标签：java, glassfish, glassfish-3

从 GlassFish OSE 3.1（内部版本 43）更新到 GlassFish OSE 3.1.2.2（内部版本 5）后，multipart/form-data Web 服务不再工作。有一个`NullPointerException`原因`com.sun.jersey.moxy.MoxyMessageBodyWorker.typeIsKnown`（有关详细信息，请参见下面的堆栈跟踪）。我已经看到[3.1.2](http://java.net/jira/browse/GLASSFISH-18444)中的 multipart/form-data 请求存在问题，但这应该在 3.1.2.2 中得到修复。

Web 服务的方法签名定义如下：

```
@POST
@Path("/uploadphoto")
@Consumes("multipart/form-data")
@Produces("application/json")
public Response uploadPhoto(@FormDataParam("photo") InputStream assetIs,
        @FormDataParam("photo") FormDataContentDisposition assetDisposition,
        @FormDataParam("width") Integer width,
        @FormDataParam("height") Integer height) 
```

如果调用 Web 服务，则会引发以下异常。如果省略了两个附加参数宽度和高度，则不会发生异常。

```
com.sun.jersey.api.container.ContainerException: Exception obtaining parameters
at com.sun.jersey.server.impl.inject.InjectableValuesProvider.getInjectableValues(InjectableValuesProvider.java:54)
at com.sun.jersey.multipart.impl.FormDataMultiPartDispatchProvider$FormDataInjectableValuesProvider.getInjectableValues(FormDataMultiPartDispatchProvider.java:125)
at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$EntityParamInInvoker.getParams(AbstractResourceMethodDispatchProvider.java:153)
at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$ResponseOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:203)
at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)
at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:288)
at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)
at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)
at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1469)
at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1400)
at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1349)
at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1339)
at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:416)
at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:537)
at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:708)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.NullPointerException
at com.sun.jersey.moxy.MoxyMessageBodyWorker.typeIsKnown(MoxyMessageBodyWorker.java:110)
at com.sun.jersey.moxy.MoxyMessageBodyWorker.isReadable(MoxyMessageBodyWorker.java:133)
at com.sun.jersey.core.spi.factory.MessageBodyFactory._getMessageBodyReader(MessageBodyFactory.java:345)
at com.sun.jersey.core.spi.factory.MessageBodyFactory._getMessageBodyReader(MessageBodyFactory.java:315)
at com.sun.jersey.core.spi.factory.MessageBodyFactory.getMessageBodyReader(MessageBodyFactory.java:298)
at com.sun.jersey.multipart.impl.FormDataMultiPartDispatchProvider$FormDataMultiPartParamInjectable.getValue(FormDataMultiPartDispatchProvider.java:297)
at com.sun.jersey.server.impl.inject.InjectableValuesProvider.getInjectableValues(InjectableValuesProvider.java:46) 
```

这是一个错误还是你有任何提示如何解决这个问题？

感谢您的见解，雷内

# android - Android 自定义 AlertDialog

> ID：12053826
> 
> 赞同：1
> 
> 时间：2012-08-21T11:28:15.227
> 
> 标签：android, android-alertdialog

我正在创建一个自定义`AlertDialog`，但我遇到了一个错误。

在`strings.xml`我定义了一个字符串，如：

```
<string name="infoDetail">Test: <a href="http://www.google.com">Google</a></string> 
```

我创建了一个这样的自定义布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TextView
        android:id="@+id/infoVersionTitle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_centerInParent="true"
        android:gravity="right|center"
        android:text="@string/infoVersion"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/infoVersionTitleValue"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:layout_toRightOf="@+id/infoVersionTitle"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/infoDetailText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/infoVersionTitle"
        android:autoLink="web"
        android:linksClickable="true"
        android:padding="4dp"
        android:text="@string/infoDetail" />

</RelativeLayout> 
```

`AlertDialog`这是使用我的自定义布局创建的代码：

```
case R.id.info:
    AlertDialog.Builder about = new AlertDialog.Builder(this);

    about.setTitle(getString(R.string.app_name));
    about.setIcon(R.drawable.info);
    about.setView(getLayoutInflater().inflate(R.layout.info, null));

    TextView infoDetail = (TextView) findViewById(R.id.infoDetailText);
    infoDetail.setMovementMethod(LinkMovementMethod.getInstance());

    about.setPositiveButton("OK", new DialogInterface.OnClickListener() {
        @Override
        public void onClick(DialogInterface dialog, int which) {
            dialog.dismiss();                       
        }
    });
    about.show();               
    break; 
```

Whit this I'm getting a `java.lang.NullPointerException`on `infoDetail.setMovementMethod(LinkMovementMethod.getInstance());`。

如果我删除此行，我的自定义布局将按预期显示，但 url 不可点击。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T11:49:58.533

在对话框中使用小部件时，应使用对话框名称来引用它，例如

```
TextView nameTextView = (TextView) your_dialog_name.findViewById(R.id.textviewid); 
```

或者他们会显示空指针异常，所以

参考TextView

```
 TextView infoDetail = (TextView) about.findViewById(R.id.infoDetailText); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-17T20:19:34.863

代替

```
about.setView(getLayoutInflater().inflate(R.layout.info, null));

TextView infoDetail = (TextView) findViewById(R.id.infoDetailText); 
```

和

```
View v = getLayoutInflater().inflate(R.layout.info, null);
about.setView(v);
TextView infoDetail = (TextView)v.findViewById(R.id.infoDetailText); 
```

因为您需要调用`findViewById()`对话框的视图层次结构，而不是您的活动。活动层次结构中不存在具有指定 id 的视图，并返回 null。尝试`setMovementMethod`在 null 上调用方法 () 会导致 NPE。

（是的，我知道，老问题，但[由于社区未回答而随机碰撞，](https://meta.stackexchange.com/questions/19738/who-is-the-community-user)很容易回答。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-15T13:03:41.613

你有没有尝试过

```
TextView textview = (TextView) getView().findViewById(R.id.textview); 
```

也？

# java - Java stacktrace中的神秘方法

> ID：12053830
> 
> 赞同：2
> 
> 时间：2012-08-21T11:28:28.533
> 
> 标签：java, debugging, stack-trace

我对分析 java 堆栈跟踪有些疑问。我正在分析一个 java 应用程序，在日志中我看到了一个堆栈跟踪。下面给出——

```
com.naseve.vdi.common.winauth.WinAuthException: Unable to set password expiry: Failed to retrieve account days to expiry: IADsUser::get_PasswordExpirationDate FAILED - ErrorCode = -2147463156
at com.naseve.vdi.broker.filters.GssapiAuthFilter.a(SourceFile:295)
at com.naseve.vdi.broker.filters.GssapiAuthFilter.a(SourceFile:241)
at net.propero.portal.filters.ProperoAuthFilter.doFilter(SourceFile:343)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:215) 
```

我关心的是顶部的部分。我可以完全访问源代码，并且我 100% 确定 GssapiAuthFilter 没有任何名为 a() 的方法。那么为什么堆栈跟踪会这样打印。此外，当我使用 Eclipse 进行远程调试时，我在 Eclipse 调试视图中看到了类似的堆栈跟踪。任何人都可以对神秘的 .a( 似乎不知从何而来的方法有所了解。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T11:31:09.337

`a()`是混淆代码的常用方法。如果您已获得源代码，它可能不会被混淆，但您正在运行的代码是。

最好问问支持图书馆的人

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T11:30:29.740

被混淆的类通常具有以这种方式命名的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T11:47:17.310

您有权访问相关源代码是不正确的。混淆部分来自 GSS-API 实现，我看到的所有实现都同样被混淆了。您的代码通过您在 Java 安全配置中声明的类间接进入实现（我认为它都是从 LoginModule 配置分支出来的）。

# javascript - 编写符合 ECMAScript5 的代码

> ID：12053831
> 
> 赞同：2
> 
> 时间：2012-08-21T11:28:37.680
> 
> 标签：javascript, jquery, jscript, ecmascript-5

我想在 JavaScript/JScript/ECMAScript 中构建一个库......无论你想怎么称呼它，它都将针对现代标准（HTML5、CSS3、ESv5），考虑到任何支持该标准的浏览器！现在我知道已经有很多有用的库了，例如 jQuery 和 MooTools。当然它们很棒，而且我已经在必要时使用了它们，但我不应该仅仅因为它很受欢迎就被迫和其他开发者一样赶上潮流！

所以为了下面的问题，让我们不要关心第三方库，比如 jQuery 和 MooTools。让我们深入了解 JavaScript/JScript/ECMAScript。

首先，我在此之前问了一个问题（[JavaScript、JScript 和 ECMAScript 之间有什么区别？](https://stackoverflow.com/questions/12051002/whats-the-difference-between-javascript-jscript-ecmascript)），因为我不知道有什么区别。

谢天谢地，我得出以下结论：

ECMAScript 是语言规范。JavaScript 和 JScript 是 ECMAScript 的方言。

JavaScript 是 Mozilla 的 ECMAScript 实现。

JScript 是 Microsoft 的 ECMAScript 实现。

好的，这是一个很好的简单答案，不是吗？但这里有一些问题源于此：

1.  非 Mozilla 浏览器是否支持“JavaScript”，支持到什么程度？
2.  非微软浏览器是否支持“JScript”，支持到什么程度？

基于这两个问题，我做了一点挖掘，在 IE9、FF14 和 GC19 上做了一个简单的测试。

这是测试代码：

```
<!DOCTYPE html>
<html>
    <head>
        <title>HTML 5 Template</title>
        <script language="JavaScript1.3">
            jsver = "1.3";
        </script>
        <script language="JavaScript1.4">
            jsver = "1.4";
        </script>
        <script language="JavaScript1.5">
            jsver = "1.5";
        </script>
        <script language="JavaScript1.6">
            jsver = "1.6";
        </script>
        <script language="JavaScript1.7">
            jsver = "1.7";
        </script>
        <script language="JavaScript1.8">
            jsver = "1.8";
        </script>
        <script type="text/javascript">
            document.write("<B>Your browser supports JavaScript version " + jsver + ".</B>")
        </script>
    </head>
    <body>
    </body>
</html> 
```

结果是：IE9 = JSv1.3，FF14 = JSv1.8，GC19 = JSv1.7

好的，然后我运行了这个测试，测试 ECMAScript 版本 5 支持： http: [//kangax.github.com/es5-compat-table/#showold](http://kangax.github.com/es5-compat-table/#showold)

再次使用相同的浏览器（IE9、FF14、GC19），ESv5 似乎得到了很好的支持！

现在是棘手的一点！我来自微软背景，使用 C#、ASP.NET 等语言编写软件，所以很自然地，我选择的 IDE 是 Visual Studio（目前是 2010 年）。当我查看 JavaScript 智能感知时，我看到了诸如 ActiveXObject、Array、Object 等的东西。

1.  我应该相信 VS2010 的智能感知吗？
2.  我在哪里可以找到 ESv5 支持的对象和功能的参考？
3.  如何检测浏览器是否支持特定对象或功能？
4.  有没有比 VS2010 更好的东西可以帮助我编写兼容的 ESv5 代码？
5.  覆盖现有对象（如 Object、Number、Boolean 等）的实现是否安全，还是应该扩展现有实现？

最后，关于我自己与 jQuery。假设我懒得自己编写核心合规性和功能，我可以写我的库来坐在 jQuery 之上……或者这只是一个逃避？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T12:13:59.987

1) 不。当然，它不会仅限于有效的 ECMAScript。

2) [http://kangax.github.com/es5-compat-table/](http://kangax.github.com/es5-compat-table/)总是有用的。

3）您可以检查它是否已定义。例如

```
typeof(Array.isArray) === 'function'; // true in newer browsers, false in IE8 
```

4）你最好的选择是阅读规范！在您的代码中使用`"use strict";`也将捕获某些类别的错误，这是一种很好的做法。有关严格模式的更多说明，请访问[http://ejohn.org/blog/ecmascript-5-strict-mode-json-and-more/](http://ejohn.org/blog/ecmascript-5-strict-mode-json-and-more/)

5）当然我不会替换原来的对象。如果您要扩展属性，我首先会仔细检查是否存在兼容的实现。例如 PrototypeJS 添加（在浏览器实现它之前）一个`document.getElementsByClassName`. 当浏览器开始原生实现它时，他们发现使用 Prototype 的网站仍在使用基于 JS 的慢版本。修复只是将 Prototype 的定义包装在`if (document.getElementsByClassName == undefined) { }`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T12:38:57.557

2）我发现您提供的概述非常好。你还想要什么？

3) 一个可以消除浏览器之间差异的好库是[ES5-shim](https://github.com/kriskowal/es5-shim)。它自动检测功能并为缺乏支持的浏览器提供填充程序。

4) Always use `"use strict";` and a have good editor of your choice which has some kind of code-highlighting and perhaps code-completion. I use the browser consoles or firefox scratchpad (silly name for a good tool) for quick hacking sessions and put it all together in notepad++ (= the IDE of your choice).

5) Augmenting the native javascript objects has been debated a lot and has pros and cons. Prototype and MooTools go this way. jQuery takes the other way and provides a separate object for that. I personally prefer to leave the native (and especially host) objects alone and have your own namespace with the functions you need.

# javascript - 按名称调用 Javascript 函数

> ID：12053838
> 
> 赞同：2
> 
> 时间：2012-08-21T11:28:56.123
> 
> 标签：javascript, jquery, function

如果我在页面上有这样的元素......

```
<span data-function="DoSomething">Click</span> 
```

...我把它放在我的页眉中...

```
$(document).ready(function() 
{ 
   $('[data-function]').each(function()
   {
       var fName = $(this).attr('data-function');
       $(this).click(fName);
   });
}); 
```

...代替注释的内容会产生执行名为“DoSomething”的函数的预期效果。

注意：我没有上面的代码不起作用，我的问题是如何使它起作用（将'DoSomething'翻译成DoSomething（）;）

有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T11:31:53.180

这些功能应该可用。尝试将它们放入对象中，如下所示：

```
$(document).ready(function() 
{ 
   var fns = {
      DoSomething: function() {/* ... */},
      DoAnotherthing: function() {/* ... */}
   };
   $('[data-function]').each(function()
   {
       var fName = $(this).attr('data-function');
       $(this).click(fns[fName]);
   });
}); 
```

这是[一个 jsfiddle](http://jsfiddle.net/KooiInc/HfNke/)，演示了一种将所有内容保持在一个命名空间本地并根据`data`元素的属性分配处理程序的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T11:36:01.833

尝试使用窗口对象调用函数 -

```
$(document).ready(function()  {
        $('[data-function]').each(function() {
            var fName = $(this).attr('data-function');

            if (typeof (window[fName]) === "function") {
                $(this).click(window[fName]); 
            }
        });  
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T11:31:34.343

你可以使用类似的东西

```
$(this).click(window[fName]); 
```

如果函数未在全局范围内定义，则where`window`将被适当的表达式替换。`DoSomething`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T13:04:14.703

也许有点干净的方式：

[http://jsfiddle.net/whsPG/](http://jsfiddle.net/whsPG/)

```
var myfuncs = {
  alert : function() {
        alert("An Alert");
    },
    changeName: function(obj) {
        $(obj).text('Other Text');
    }    
};

$('[data-function]').on('click', function()
{
  value =  $(this).data('function');

   if (myfuncs.hasOwnProperty(value)) {
     myfuncs[value](this);
   } 
```

}); ​</p>

# javascript - 动态 Javascript/JSON 显示（游戏）服务器状态

> ID：12053845
> 
> 赞同：0
> 
> 时间：2012-08-21T11:29:15.623
> 
> 标签：javascript, json, status

我拥有多个游戏服务器以及一个显示服务器状态的网站。

问题是网站（服务器状态页面）很慢，因为每次加载页面时它都需要从远程 IP ping/获取数据。

我已经看到其他地方这样做了，例如[这里](http://minecraftpvp.com/hunger-games)他们使用动态 JSON（[这里](http://minecraftpvp.com/api/ping.json)）来获取服务器状态。

上面显示的似乎立即加载，我想知道这究竟是如何实现的？

基本上，我想获取服务器状态，而不会在每次加载它时造成严重滞后（最好与上面的类似，因为它运行良好）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T12:03:30.630

我一直在寻找和计时您发布的示例（我承认有偏见）。
我认为（并在测试之前考虑过）：他们在服务器上运行了一些代码，每 2 秒生成一次此数据。这只是意味着每次调用 json-script 时，站点都会简单地返回已经存在的数据（如 ping）。

他们甚至可能记录所有这些数据，因此 json ping 调用只返回最后一个条目。这应该给出一个几乎即时的答案和可预测的加载时间，这就是我会做的事情。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T12:09:14.903

制作两个文件：

1：用于 ping 输出数据的 PHP 脚本“ping.php”，如下所示：

```
$ip = $_REQUEST['ip'];
$cache_file = "ping_{$ip}.json";

if(@filemtime($cache_file) >= (time() - 30)) {
   echo file_get_contents($cache_file);
   return ;
}

// cache is too old. now ping your server 

$json = json_encode(Array(
   'ip' => $ip,
   'players' => $players_count
));

// save new cache
file_put_contents($cache_file, $json);

// output JSON
echo $result; 
```

2：HTML + jQuery

```
<table id="servers">
<tr>
<td class="ip">1.2.3.4:1234</td>
<td class="players"></td>
</tr>
<tr>
<td class="ip">1.2.3.4:1234</td>
<td class="players"></td>
</tr>
<tr>
<td class="ip">1.2.3.4:1234</td>
<td class="players"></td>
</tr>
</table>

<script type="text/javascript">
$('#servers tr').each(function(){
  var ip = $(this).find('td.ip').text();
  var $players = $(this).find('td.players');
  $players.html('loading');

  // use ping.php to get count of players etc
  $.get('ping.php?ip='+ip, function(data){
    $players.html(data.players);
  }});
</script> 
```

只需对每个服务器使用 AJAX 请求。`ping.php`将返回服务器状态。

# xcode4 - 一个带有普通 uibuttons 的手指手势识别器

> ID：12053846
> 
> 赞同：0
> 
> 时间：2012-08-21T11:29:16.107
> 
> 标签：xcode4, uibutton, uigesturerecognizer

我正在使用这个单指手势识别器的部分代码：

```
http://blog.mellenthin.de/archives/2012/02/13/an-one-finger-rotation-gesture-recognizer/ 
```

我在模式下添加了三个带触摸的取消按钮。当我在 xcode 中实现它并在模拟器上运行我的应用程序时，这些按钮只有在我滑动它们时才能正常工作。他们不承认一键点击。我应该怎么办？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T11:42:27.223

您需要实现一种委托方法，如下所示

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer {        
    return YES;
} 
```

如需更多解释，请使用[此](https://github.com/AalokParikh/pinch-and-uiguesture)示例。

快乐编码:)

# python - 将 Excel 值从代码页 1251 转换为 unicode

> ID：12053849
> 
> 赞同：0
> 
> 时间：2012-08-21T11:29:36.880
> 
> 标签：python, excel, unicode

我正在通过 python 访问 Excel 来调整单元格的某些编码。到目前为止我的代码：

```
from xlrd import *
from xlwt import *

wb = open_workbook('a.xls')

s = wb.sheets()[0]

for row in range(s.nrows):
e = s.cell(row,9).value
r = s.cell(row,11).value
print e,' ',r.decode('cp1251') 
```

运行此代码时，我收到此错误：

```
Traceback (most recent call last):
  File "C:\Users\pem\workspace\a\src\a.py", line 17, in <module>
    print e,' ',r.decode('cp1251')
  File "C:\Python27\lib\encodings\cp1251.py", line 15, in decode
    return codecs.charmap_decode(input,errors,decoding_table)
  File "C:\Python27\lib\encodings\cp1251.py", line 12, in encode
    return codecs.charmap_encode(input,errors,encoding_table)
UnicodeEncodeError: 'charmap' codec can't encode character u'\xf6' in position 23: character maps to <undefined> 
```

我知道**e**是英文文本，**r**是 1251 编码的俄文翻译。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T11:36:07.433

我假设您使用的是 Python 2。*（Unicode 处理在 Python 3 中有所不同。）*

用于`r.decode('cp1252')`将`r`您的编码解码为 un​​icode。这会给你一个类型的对象`unicode`。

请注意，如果您尝试打印它，它将首先被隐式编码，即转换回`str`默认编码`ansi`。如果您的控制台支持 unicode，您可以通过以下方式打印它：

```
print xyz.encode('utf-8') 
```

* * *

请注意，Python 的`str`字符串由 8 位字节（字符）组成，而`unicode`表示一个实际字符串，其中一个字符可以是任何 unicode 字符。*（在 Python 3 中，`str`被替换并重`bytes`命名`unicode`为`str`以使这一点更加明显。）*

`.decode()`on a`str`允许您使用您指定的编码从某些字节（您从某处读取）中获取“有意义的”unicode 字符串，而`.decode()`在`unicode`对象上则相反：允许您使用编码获取字符串的字节表示你的选择。

# oracle - Oracle 条件连接

> ID：12053852
> 
> 赞同：2
> 
> 时间：2012-08-21T11:29:47.450
> 
> 标签：oracle, select, join, plsql

TL;DR：如果参数这么说，我想消除整个连接+子选择。

假设我在这样的存储过程中有一个查询：

```
open cur_result for
select t1.* from table1 t1
join (select key, value, row_number() over (partition by key order by whatever) rn from table2) t2
on t1.key = t2.key and t2.rn = 1
where [...lots of things...]
and t2.value = 'something' 
```

你看，我不只是将 table1 连接到 table2，我只需要根据某些条件连接 table2 的第一条记录，因此子查询中的 row_number 计算和 rn=1 附加连接条件。无论如何，关键是这是一个昂贵的子查询，我想根据这个子查询进行过滤。

我的目标是这个子查询应该是有条件的，基于一个额外的参数。如果我想重复所有内容，如下所示：

```
if should_filter_table2 = 1 then
  [the above query is copied here completely]
else
  open cur_result for
  select t1.* from table1 t1
  -- no table2 join
  where [...lots of things...]
  -- no table2 condition
end if; 
```

问题是可能有许多这样的参数和几乎相同的 SQL 的许多分支，它们看起来很难看并且难以维护。我也可以这样做：

```
open cur_result for
select t1.* from table1 t1
join (select key, value, row_number() over (partition by key order by whatever) rn from table2) t2
on t1.key = t2.key and t2.rn = 1
where [...lots of things...]
and (should_filter_table2 = 0 or t2.value = 'something') 
```

这很容易维护，但是如果参数说子查询无关紧要，它仍然是无条件执行的。根据我的经验，Oracle 无法对此进行优化，这对性能造成了巨大影响。

所以问题是：你能在 1 个查询中做到这一点并且性能良好吗？像这样的东西：

```
open cur_result for
select t1.* from table1 t1
join {case when should_filter_table2 = 1 then (select key, value, row_number() over (partition by key order by whatever) rn from table2) else [empty table] end} t2
on t1.key = t2.key and t2.rn = 1
where [...lots of things...]
and (should_filter_table2 = 0 or t2.value = 'something') 
```

因此，如果 should_filter_table2 为 0，则不应该计算子查询并且根本不应该应用过滤器。

应避免使用动态 SQL。我怀疑如何在动态 SQL 中做到这一点，但它提出了同样的可维护性问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T11:47:31.647

我不是 100% 确定优化器是否做了我认为应该做的事情，但我可能会从以下内容开始。不幸的是，我手头没有测试数据来模拟长时间运行的查询。

```
select t1.* from table1 t1
  where 
    (should_filter_table2 = 0 or (
        (t1.key, 'something', 1) in (
             select key, value, row_number() over 
                               (partition by key order by whatever) rn 
               from table2) 
        )
    )
  and [...lots of things...] 
```

# algorithm - 具有优先作业的负载平衡算法

> ID：12053857
> 
> 赞同：0
> 
> 时间：2012-08-21T11:29:59.023
> 
> 标签：algorithm, load-balancing

1.  假设我可以购买 X 代币的容量。当我购买代币时，我一次购买它们三个月。
2.  一项工作可以要求一个或多个令牌（通常最多 16 个）。
3.  一项工作可能需要很长时间才能完成（几天），也可能需要很短的时间（几分钟）。
4.  在开始使用之前，我必须购买一定数量 (X) 的代币。
5.  有些工作比其他工作更重要，即应该优先考虑一些工作以快速完成。
6.  我想随时使用尽可能少的令牌。这样我就可以购买更少的代币并省钱。
7.  可以暂停和恢复作业。暂停作业时，令牌可用于其他作业。
8.  用户创建工作，并选择优先级。该算法将选择何时运行哪些作业。
9.  *可能有更多的快速完成工作比长时间完成工作。
10.  *需要很长时间才能完成的工作可能会被给予较低的优先级。

（*这些规则可能有例外）

我需要制作一个调度系统，使 X 尽可能小。

* * *

一个（非常小的）例子：

作业 A 花费 4 个代币并且具有低优先级，并且需要 5 天完成。作业 B 花费 2 个代币并具有高优先级，需要 1 天才能完成。作业 C 花费 2 个代币并具有高优先级，需要 2 天才能完成。

作业 A 在作业 B 之前启动，作业 B 在作业 C 之前启动。

解决方案：暂停作业 A，让 B 和 C 运行。B 将首先完成，C 第二。然后恢复 A 并让它完成。

使用的令牌总数：4。

与我们一次运行所有作业（这将花费 8 个令牌）相比，这将花费 50%。

* * *

我应该如何制作这个调度程序/优先级？

# android - 在android中更改图标

> ID：12053861
> 
> 赞同：0
> 
> 时间：2012-08-21T11:30:12.117
> 
> 标签：android

我想知道如何以特定方式更改 imageview 中的图像。我想当我启动应用程序时我有一个默认图标，当我点击它们时我会更改其他图标。但是，当我再次单击时，我的图标又回到了默认状态，然后……这就是我此刻得到的：

```
 final ImageView check_box = (ImageView) rowView.findViewById(R.id.email_list_item_checkbox_icon);

    check_box.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {

            check_box.setImageResource(R.drawable.checkbox_android);
        }
    }); 
```

我该如何做下一步并循环这个解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T11:36:30.680

您可以使用一些标志，它们对默认图标变为真，对选中图标变为假。使用标志，您可以实现您的部分目标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T11:36:34.230

很简单，根据你的要求。只需取一个**布尔标志**变量。

```
@Override
public void onClick(View arg0) {
    if ( !flag) {
        check_box.setImageResource(R.drawable.checkbox_android);
        flag = true;
    }
    else {
        check_box.setImageResource(R.drawable.other_image);
        flag = false;
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T11:43:06.550

```
ImageView check_box = (ImageView) rowView.findViewById(R.id.email_list_item_checkbox_icon);

check_box.setTag(R.id.email_list_item_checkbox_icon);

check_box.setOnClickListener(new OnClickListener() {
    public void onClick(View view) {

        Integer integer = (Integer) view.getTag();
        switch(integer) {
        case R.id.email_list_item_checkbox_icon:
            check_box.setDrawableResource(R.drawable.checkbox_android);
            check_box.setTag(R.drawable.checkbox_android);
            break;
        case R.drawable.checkbox_android:
            check_box.setDrawableResource(R.id.email_list_item_checkbox_icon);
            check_box.setTag(R.id.email_list_item_checkbox_icon);
            break;
        }
    }

}); 
```

# primefaces - 使用 JSF2 的 Primefaces 评级组件

> ID：12053866
> 
> 赞同：1
> 
> 时间：2012-08-21T11:30:40.747
> 
> 标签：primefaces

我正在尝试将 primefaces 3.3 与 JSF 2 一起使用。当我尝试访问页面时，组件没有显示。

页面上有一些 JS 错误。

未捕获的ReferenceError：**$ 未定义**：

未捕获的ReferenceError：**未定义 PrimeFaces**

```
<p:rating starts="10"/> 
```

任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T11:41:09.767

将 h:head 添加到您的页面。看;

[http://www.primefaces.org/gettingStarted.html](http://www.primefaces.org/gettingStarted.html)

# mysql - 我们可以通过下订单来使用左连接而不是右连接吗？

> ID：12053867
> 
> 赞同：10
> 
> 时间：2012-08-21T11:30:50.577
> 
> 标签：mysql, database

我们都非常熟悉左连接和右连接。有人可以举一个例子，仅通过左连接而不是右连接可以找到所需的结果（因为我们可以更改表格的位置）？其实我是在一次采访中被问到这个问题的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-05-07T18:28:07.803

我们可以。

> 右外连接和左外连接在功能上是等效的。两者都没有提供其他任何功能，因此只要切换表顺序，右外连接和左外连接就可以相互替换。

您可以在 Wikipedia 上的[*Join*](http://en.wikipedia.org/wiki/Join_%28SQL%29#Right_outer_join)[文章的](http://en.wikipedia.org/wiki/Join_%28SQL%29#Right_outer_join)[*Right outer join*部分](http://en.wikipedia.org/wiki/Join_%28SQL%29#Right_outer_join)*找到完整的解释。*

 *[此外， CodingHorror 博客](http://blog.codinghorror.com/a-visual-explanation-of-sql-joins/)上有一个关于连接的有用描述，您可以在其中直观地看到差异。*

# javascript - 无法访问数组 javascript

> ID：12053875
> 
> 赞同：-4
> 
> 时间：2012-08-21T11:31:13.037
> 
> 标签：javascript, google-maps

有谁知道为什么我无法访问最后一个函数内部`location`调用的数组中的数组元素？`array``codeAddress()`

这是唯一一个我无法访问的元素，也是唯一一个不是在第一个函数上创建的元素。它给了我所有位置的未定义。

您的帮助将不胜感激..！数组在每个函数上传递。

[http://jsfiddle.net/ang3lo0o/teQEK/4/](http://jsfiddle.net/ang3lo0o/teQEK/4/) 代码在这个链接中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T11:38:14.963

```
$.getJSON("http://api.twitter.com/1/users/lookup.json?user_id=" + ids + "&callback=?", function (data) {
    $.each(data, function (i, item) {
         array[i].location = item.location;
    });
 });
 console.log(array); 
```

两个简单的解释：

*   不是每个`item`人都有`location`财产——你可以检查一下
*   `array`您在执行异步回调之前记录/映射/任何内容！将其移动到回调函数中。

# javascript - 文件对象和java脚本

> ID：12053876
> 
> 赞同：0
> 
> 时间：2012-08-21T11:31:16.083
> 
> 标签：javascript, html

我正在尝试在我的项目中进行文件上传，但我面临着这个困难。当我运行它时，当我提交给 Server.jsp 时，我收到“**访问被拒绝”脚本错误。**

**测试.html**

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
    <HTML>
    <HEAD>
    <TITLE> New Document </TITLE>
    <META NAME="Generator" CONTENT="EditPlus">
    <META NAME="Author" CONTENT="">
    <META NAME="Keywords" CONTENT="">
    <META NAME="Description" CONTENT="">
    </HEAD>

    <BODY>

    <iframe src = "fileselect.html" name = "attachfrm" width = 0 height=0></iframe>
    <a id = "att" href = "javascript:document.attachfrm.clickattach('compose');" >AttachFile</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    </BODY>
    </HTML> 
```

**文件选择.html**

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
    <HTML>
    <HEAD>
    <TITLE> New Document </TITLE>
    <META NAME="Generator" CONTENT="EditPlus">
    <META NAME="Author" CONTENT="">
    <META NAME="Keywords" CONTENT="">
    <META NAME="Description" CONTENT="">
    <title>Attach File</title>
    </HEAD>
    <script>
    function atach(){

    document.tattach.submit();
    }
    function clickattach(id){
    document.tattach.F1.click();
    }

    </script>
    <BODY>

    <FORM  ENCTYPE="multipart/form-data" ACTION=
    "Server.jsp" METHOD=POST name="tattach">
    <br><br><br>
    <center><table border="2" >
    <tr><td><b>Choose the file To Upload:</b>
    </td>
    <td>
    <INPUT NAME="F1" id = "F1" TYPE="file" onChange="atach();"></td></tr>
    <tr><td colspan="2">
    <p align="right">
    <INPUT TYPE="submit" VALUE="Attach"  >
    <INPUT TYPE="submit" VALUE="Cancel" onClick="window.close();">
    </p>
    </td></tr>

    <table>
    </center>      

    </FORM>

    </BODY>
    </HTML> 
```

**服务器.jsp**

```
<%
System.out.println("------------got it-------------");
%> 
```

**注意（我得到这个工作gud的另一种方式）：但是当我在Test.html中像这样更改文件点击时，这工作正常**

```
<a id = "att" href = "javascript:document.attachfrm.tattach.F1.click();" >AttachFile</a> 
```

但我需要执行我的第一种方法，因为我需要将参数从 Test.html 发送到 FileSelect.html 以获得某些功能。

如果我的第一种方法有误，请纠正我

# ruby - Ruby 中的类变量继承

> ID：12053880
> 
> 赞同：2
> 
> 时间：2012-08-21T11:31:30.647
> 
> 标签：ruby, oop, inheritance

我知道这个问题已经被提出过很多次了。但我找不到关于所有这些变量的完整指南。我发现了几篇比较类变量与类实例变量的文章，但是实例变量呢？**那么，实例变量**、**类变量**和**类实例变量**

之间有什么区别？哪些变量是可继承的，哪些不是？

 ******* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T11:41:10.477

实例*变量*是属于*一个*特定对象（又名实例）的变量。在这种情况下，继承是无关紧要的，因为对象不能从任何东西继承，只有类可以。

*类实例变量*不存在。类和任何其他对象一样是对象，因此它们可以像任何其他对象一样具有实例变量。当一个类有一个实例变量时，这有时被称为类实例变量，但它只是一个实例变量。所以，再一次，它不能被继承。

*类变量*是奇怪的野兽。它们之间共享

*   班级本身
*   类的所有实例
*   该类的所有子类
*   类的所有子类的所有实例
*   类的所有子类的所有子类
*   类的所有子类的所有子类的所有实例
*   ……等等……</li>

考虑到它们的共享范围有多广，它们实际上更像是全局变量。

您可以将其称为共享*继承*，但我认为这不是一个有用的术语。没有多态调度，没有消息发送，没有覆盖。

在 Ruby 中，术语*继承实际上只对**方法*有意义，对变量没有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T11:37:50.080

实例变量是其数据随对象的每个实例而变化的变量。

类变量是在类的所有实例之间共享的变量。实际上，每个实例都指向相同的值，并且在所有类实例中都可以看到变化。******

# javascript - 使用 JSON 实现 AJAX

> ID：12053882
> 
> 赞同：0
> 
> 时间：2012-08-21T11:31:34.313
> 
> 标签：javascript, ajax, json

我一直在尝试理解以下程序。在服务器端，以下 PHP 代码编写了 JSON 编码：

```
<?php
require_once "json/JSON.php";
$json = new Services_JSON();

//convert php object to json 
$value = array('first' => 'Steven', 'last' => 'Spielberg', 'address' => '1234 Unlisted Drive');

$output = $json->encode($value);
print($output);
?> 
```

在客户端使用 JavaScript 来实现 AJAX：

```
<html> 
<head>

<script src="ajax.js"></script>

<script>

/**Ajax Request (Submits the form below through AJAX
 *               and then calls the ajax_response function)
 */
function ajax_request() {
  var submitTo = 'ajax_request.php';
  //location.href = submitTo; //uncomment if you need for debugging

  http('POST', submitTo, ajax_response, document.form1);
}

/**Ajax Response (Called when ajax data has been retrieved)
 *
 * @param   object  data   Javascript (JSON) data object received
 *                         through ajax call
 */
function ajax_response(data) {
  for(var key in data) {
    document.form1[key].value = data[key];
  }
}

</script>

</head>
<body>

<input type="button" onclick="ajax_request()" value="Do AJAX"><br><br>

<form name="form1">
  First <input type="text" name="first"><br>
  Last  <input type="text" name="last"><br>
  Address <input type="text" name="address"><br>

</form>

</body>
</html> 
```

现在我的问题是，为什么在客户端没有用于从 JSON 字符串中检索 JavaScript 变量的 JSON.parse() 函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T13:11:01.620

也许你可以在这里找到你搜索的内容 [http://www.json.org/js.html](http://www.json.org/js.html)

# python - 我想测量代码中的动作之间经过的时间

> ID：12053883
> 
> 赞同：2
> 
> 时间：2012-08-21T11:31:43.703
> 
> 标签：python, urllib2

我想以毫秒为单位测量时间，这条线花了：

```
before=datetime.datetime.now()  
response = urllib2.urlopen("https://www.google.com")
after=datetime.datetime.now() 
```

它应该是服务器的一种解决方法，它不会回复，所以我必须从服务器响应中测量它。如果我扣除两次，我可以得到字符串返回字符串**0:00:00.034225**并且我能够将毫秒作为子字符串，但我想以更简洁的方式获得毫秒（以毫秒为单位的整体差异，包括从秒转换的时间，如果服务器响应延迟很大）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T11:39:28.163

`after - before`是一个`datetime.timedelta`对象，它的`total_seconds`方法会给你你正在寻找的东西。[您可以在 Python 文档](http://docs.python.org/library/datetime.html#datetime.timedelta)中找到更多信息。

您只需乘以 1000 即可获得毫秒数。不用担心，虽然该方法被调用`total_seconds`，但它包含毫秒作为小数位。样本输出：

```
>>> d = t1 - t0
>>> d.total_seconds()
2.429001 
```

但是，这不会给您超时，只会测量持续时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T11:37:00.007

`urlopen`允许您传递超时参数，并在经过这么长时间后自动中止。[从文档：](http://docs.python.org/library/urllib2#urllib2.urlopen)

> ```
>  urllib2.urlopen(url[, data][, timeout]) 
> ```
> 
> 可选`timeout`参数指定连接尝试等阻塞操作的超时时间（如果未指定，将使用全局默认超时设置）。这实际上只适用于 HTTP、HTTPS 和 FTP 连接。

* * *

Python 实际上有一种为小段代码计时的机制`timeit.Timer`——但那是用于性能分析和测试，而不是用于实现您自己的超时。

# android - 如何从android中的cpu使用情况中获取电池使用情况

> ID：12053885
> 
> 赞同：0
> 
> 时间：2012-08-21T11:31:50.037
> 
> 标签：android, cpu-usage, battery

> **可能重复：**
> [是否有任何公式可以根据进程的 cpu 使用情况来查找电池使用情况？](https://stackoverflow.com/questions/12003895/is-there-any-equation-to-find-battery-usage-based-on-cpu-usage-by-the-process)

我从以下链接[Get Memory Usage in Android 获得](https://stackoverflow.com/questions/3118234/how-to-get-memory-usage-and-cpu-usage-in-android)了 cpu 使用情况。任何人都可以知道使用这个数量的 cpu 消耗了多少电池（以焦耳或瓦特为单位）。有没有什么公式可以计算。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T12:19:46.177

> 任何人都可以知道使用这个数量的 cpu 消耗了多少电池（以焦耳或瓦特为单位）

充其量，这将因实际 CPU 而异。根据 CPU 的不同，它也可能因 CPU（或可能是内核）所处的模式而异（例如，英特尔 SpeedStep 风格的技术）。

# jquery - 如何模拟锚标记悬停并单击 div

> ID：12053891
> 
> 赞同：0
> 
> 时间：2012-08-21T11:32:05.817
> 
> 标签：jquery

您如何使用 jquery 在 div 上的另一个网页上启动悬停指针和单击功能？

所以，我的 div 类是`.ei-title`：

```
$('.ei-title').click(function() {
   /* load the page 'http://google.com' in the same window */
}); 
```

此外，当您将鼠标悬停在 div 元素上时，它应该显示一个指针

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T11:35:41.097

```
$('.ei-title').css('cursor', 'pointer').click(function(event) {
    event.preventDefault();
    event.stopImmediatePropagation();

    window.location = 'http://www.google.com';   
}); 
```

尽管确实应该将 css 移出到样式表中，而不是通过 javascript 应用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T11:35:50.960

我认为您希望 the`div`表现得像`<a href>`. 如果是这样，方法如下： 光标的 CSS：

```
div.ei-title {
  cursor: pointer;
} 
```

JavaScript：

```
$('.ei-title').click(function(){
  location = 'http://www.google.com'
}) 
```

# opencv - 在 OpenCV 中将角速度转换为四元数

> ID：12053895
> 
> 赞同：7
> 
> 时间：2012-08-21T11:32:14.453
> 
> 标签：opencv, quaternions

我需要以四元数表示的角速度，以便在 OpenCV 中使用以下表达式更新每帧的四元数：

```
q(k)=q(k-1)*qwt; 
```

我的角速度是

```
Mat w;  //1x3 
```

我想获得角度的四元数形式

```
Mat qwt;   //1x4 
```

我找不到这方面的信息，有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T11:40:03.923

如果我理解正确，您想从这个[Axis Angle 形式传递到 quaternion](http://www.euclideanspace.com/maths/geometry/rotations/conversions/angleToQuaternion/index.htm)。

如链接所示，首先您需要计算角速度的模块（乘以帧之间的 delta(t)），然后应用公式。

一个示例函数是

```
// w is equal to angular_velocity*time_between_frames
void quatFromAngularVelocity(Mat& qwt, const Mat& w)
{
    const float x = w.at<float>(0);
    const float y = w.at<float>(1);
    const float z = w.at<float>(2);
    const float angle = sqrt(x*x + y*y + z*z);  // module of angular velocity

    if (angle > 0.0) // the formulas from the link
    {
        qwt.at<float>(0) = x*sin(angle/2.0f)/angle;
        qwt.at<float>(1) = y*sin(angle/2.0f)/angle;
        qwt.at<float>(2) = z*sin(angle/2.0f)/angle;
        qwt.at<float>(3) = cos(angle/2.0f);
    } else    // to avoid illegal expressions
    {
        qwt.at<float>(0) = qwt.at<float>(0)=qwt.at<float>(0)=0.0f;
        qwt.at<float>(3) = 1.0f;
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-21T19:38:55.547

几乎所有关于四元数、3D 空间等的转换都聚集在这个[网站上](http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/index.htm)。

您还将找到四元数的时间导数。

我发现它对解释四元数的物理意义很有用，它可以看作是一个轴角，其中

```
a = angle of rotation
x,y,z = axis of rotation. 
```

然后转换使用：

```
q = cos(a/2) + i ( x * sin(a/2)) + j (y * sin(a/2)) + k ( z * sin(a/2)) 
```

[这里](http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/geometric/axisAngle/index.htm)解释得很透彻。

希望这有助于使其更清晰。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-01T01:11:02.977

一个小技巧可以摆脱那些 cos 和 sin 函数。四元数 q(t) 的时间导数为：

dq(t)/dt = 0.5 * x(t) * q(t)

其中，如果角速度为 {w0, w1, w2}，则 x(t) 是 {0, w0, w1, w2} 的四元数。请参阅 David H Eberly 的书第 10.5 节以获得证明

# php - at-sign in php 的有效用例

> ID：12053897
> 
> 赞同：1
> 
> 时间：2012-08-21T11:32:17.903
> 
> 标签：php

at 符号用于隐藏错误消息。据我所知，绝对没有使用它的用例或借口。

1.  您可以通过更改 php ini 设置来隐藏生产中的错误，同时仍将错误输出到日志文件
2.  @-sign 使其他程序员很难确定问题出在哪里
3.  错误消息是您开发时的朋友。快速发现错误并修复它们

我的一个朋友刚刚花了几个小时试图找出为什么该软件可以在一个系统上运行而不能在另一个系统上运行。如果库开发人员不使用@-sign，这将花费大约 10 秒。

当我说@-sign 绝对没有价值时，我是否心胸狭窄，是否有有效案例？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T11:35:55.217

@ 符号有一些价值，但它通常是一种代码味道。

考虑以下情况：您正在开发一个需要与多个项目兼容的库，并且您不想全局更改错误处理程序。不幸的是，许多 PHP 函数（包括与套接字和流相关的函数）在失败时抛出 PHP 错误而不是异常。*当且仅当*手动检查错误并在发生异常时抛出异常时，“@”符号对于隐藏错误很有用。

它对文件系统操作也很有用。
主要是你是对的......这通常是可怕的做法（：

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T11:36:17.200

在极少数情况下，使用错误抑制确实有意义。

其中之一是原子文件系统操作。例如，而不是写作

```
if (file_exists($fileName)) {
    unlink($fileName);
} 
```

你只是做

```
@unlink($fileName); 
```

这可以确保您的代码不受竞争条件的影响。

通常在*PHP 为函数选择不合适的错误模型*`@`的情况下很有用。上述函数就是一个这样的例子。类似地，还有一些 PHP 会抛出错误的函数，即使它不应该抛出错误（而是使用返回值或可捕获的异常）。*`unlink`*

 ** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T11:36:03.690

在大多数情况下，您确实不应该使用它。在某些情况下，它是有道理的：

*   `unlink()`
*   `while (@ob_end_flush());`

可能还有其他一些极端情况，但除此之外，你真的永远不应该抑制错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T11:36:16.780

与所有可用的工具一样（无论是在编程中还是在编程之外），一切都有一个合法的用例。

对于错误抑制运算符，想到的第一个示例类似于

```
if (!@unlink($file)) {
    // I am already handling the error. I don't care what caused it.
    // Even NOT handling this case at all could be a legitimate reaction
    // depending on circumstances.
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T11:39:45.047

我见过的最常见的地方是在使用 db 时抑制 mysql 错误。然后用户检查响应并打印适当的错误消息。

例子

```
<?php
$link = @mysql_connect('localhost', 'mysql_user', 'mysql_password');
if (!$link) {
    die('Could not connect: ' . mysql_error());
}
echo 'Connected successfully';
mysql_close($link);
?> 
```

我还看到它在使用 ftps 和 sftps 时使用。

但我同意你的观点，我发现它的用途有限。如果最终遇到需要在自己生成的代码中使用@-sign 的情况，我认为是时候重新考虑解决方案了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-21T11:36:34.733

*   使用时`DOMDocument`，无效的 HTML 会抛出警告，大多数情况下我们并不关心。
*   使用 PEAR 时`Mail`，您会收到有关不应静态调用的函数的警告，这是因为`Mail`支持 PHP 4。这些可以安全地忽略。
*   使用 时`unlink()`，您可以抑制错误以防止出现竞争条件。*

# proxy - 代理通行证排除

> ID：12053901
> 
> 赞同：1
> 
> 时间：2012-08-21T11:32:34.093
> 
> 标签：proxy

```
 <VirtualHost 172.16.0.21:80>
ServerName test.com
     DocumentRoot /usr/local/liferay/tomcat7/webapps
ErrorLog logs/error_log
CustomLog logs/default-access_log common
    ProxyRequests Off
    ProxyPass /owa !
    ProxyPass / ajp://127.0.0.1:8009/
SSLCertificateFile /etc/pki/tls/certs/star_weconnor.com.crt
SSLCertificateKeyFile /etc/pki/tls/private/weconnor.com.key 
```

SSLCACertificateFile /etc/pki/CA/certs/EntrustSecureServerCA.crt

现在我想在 /var/www/html/owa 中添加一个开放的 webanalytics。所以它将是：[http](http://test.com/owa) ://test.com/owa但是当我访问这个站点时，它看起来像是被转发到 Tomcat http 404 not found) .how to make this work

# service - 在 liferay 主题（速度模板）中使用自定义服务或 liferay 服务？

> ID：12053910
> 
> 赞同：3
> 
> 时间：2012-08-21T11:32:47.790
> 
> 标签：service, liferay, liferay-velocity, liferay-theme

如何在速度文件（如等）的 liferay 主题中使用自定义服务`init_custom.vm`方法`portal_normal.vm`。

我看到 liferay 在文件中提供了许多辅助实用程序类的变量，例如`$portalUtil`for [`PortalUtil`](https://github.com/liferay/liferay-portal/blob/master/portal-service/src/com/liferay/portal/util/PortalUtil.java)、`$getterUtil`for[`GetterUtil`](https://github.com/liferay/liferay-portal/blob/master/portal-service/src/com/liferay/portal/kernel/util/GetterUtil.java)等[`init.vm`](https://github.com/liferay/liferay-portal/blob/master/portal-web/docroot/html/themes/_unstyled/templates/init.vm)。

那么是否有可能获得我的自定义服务的实例，例如`com.my.custom.service.MyCustomLocalServiceImpl`liferay 的实例或服务`UserLocalServiceImpl`？

这是一些伪代码，以了解我需要什么：

```
// this code calls method from MyCustomLocalServiceImpl class to fetch items
#set ($listOfItems = $myCustomLocalServiceUtil.getAllItems())

// this code calls method from UserLocalServiceImpl class to fetch users
#set ($listOfUsers = $userLocalServiceUtil.getUsers(0, 99)) 
```

环境：Liferay 6.1 CE GA1

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T11:32:47.790

有可能的。

1.  以下代码显示了如何获取服务：

    ```
    // Fetching instance of my custom services
    #set ($myCustomLocalService = $serviceLocator.findService('myCustomServices-portlet', 'com.my.custom.service.MyCustomLocalService'))

    // Fetching instance of UserLocalServiceImpl
    #set ($userLocalService = $serviceLocator.findService('com.liferay.portal.service.UserLocalService')) 
    ```

2.  然后只需调用服务方法：

    ```
    #set ($listOfItems = $myCustomLocalService.getAllItems())

    #set ($listOfUsers = $userLocalService.getUsers(0, 99)) 
    ```

[对于 Liferay 6.1 CE GA1：我找到了这个类[`VelocityVariablesImpl`](https://github.com/liferay/liferay-portal/blob/6.1.x/portal-impl/src/com/liferay/portal/velocity/VelocityVariablesImpl.java#L104)（参见方法，如[`insertHelperUtilities`](https://github.com/liferay/liferay-portal/blob/6.1.x/portal-impl/src/com/liferay/portal/velocity/VelocityVariablesImpl.java#L106), [`insertVariables`](https://github.com/liferay/liferay-portal/blob/6.1.x/portal-impl/src/com/liferay/portal/velocity/VelocityVariablesImpl.java#L586)），它实际上使所有变量和辅助工具都可用于速度模板。]

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-18T19:23:38.050

您可以使用以下钩子插件使用自定义变量和服务扩展主题中使用的速度上下文。假设您需要使用自定义本地服务。

1.  使用以下 liferay-hook.xml 定义创建一个钩子插件

    ```
    <hook>
        <portal-properties>portal.properties</portal-properties>
    </hook> 
    ```

2.  在（当你使用 maven 时）或在（当你使用插件 sdk 时）创建**portal.properties ，在那里放置以下配置**`main/resources``docroot/WEB-INF/src`

    ```
    servlet.service.events.pre=com.my.custom.action.MyCustomPreAction 
    ```

3.  在您的钩子中创建`com.my.custom.action.MyCustomPreAction`将扩展的类`com.liferay.portal.kernel.events.Action`

4.  实现`run`方法

    ```
    @Override
    public void run(final HttpServletRequest request, final HttpServletResponse response)
        throws ActionException {

        Map<String, Object> vmVariables = (Map<String, Object>) request.getAttribute(WebKeys.VM_VARIABLES);
        if (vmVariables == null) {
          vmVariables = new HashMap<String, Object>(1);
        }
        vmVariables.put("myCustomServiceUtil", com.my.custom.service.MyCustomLocalServiceUtil.class);
        request.setAttribute(WebKeys.VM_VARIABLES, map);
    } 
    ```

5.  部署钩子后，您可以在主题的速度模板中使用自定义服务

    ```
    // this code calls method from MyCustomLocalServiceImpl class to fetch items
    #set ($listOfItems = $myCustomServiceUtil.getAllItems()) 
    ```

# c# - 部署使用 MySQL 数据库的 Excel 工作簿的最佳方法？

> ID：12053912
> 
> 赞同：0
> 
> 时间：2012-08-21T11:32:48.430
> 
> 标签：c#, mysql, excel, c#-4.0

我正在使用 VS2010 在 C#(.NET 4.0 frmw) 中创建 Excel 2010 工作簿项目。这个 Excel 工作簿是我的工作界面。它包含一些按钮，我通过这些按钮调用一些用户控件和表单，或者它们执行一些其他功能任务，...。此外，本工作簿使用 MySQL 数据库中的数据。当前与该数据库的通信良好，而数据库位于本地主机上。

我的问题是，我需要你的意见，什么是（或将是）部署此应用程序的最佳方式，以便它在用户机器上运行并在服务器机器上使用数据库？

谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T11:42:12.533

希望所有用户机器都在同一个网络上。

您可以将 to 更改`ConnectionString`为指向您当前的数据库并进行部署。

MYSQL 的连接字符串链接[http://www.connectionstrings.com/mysql](http://www.connectionstrings.com/mysql)

这将是`Server=myServerAddress;Database=myDataBase;Uid=myUsername;Pwd=myPassword;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T12:31:05.250

使用 Windows 安装程序部署。这是一个例子：

[http://clear-lines.com/blog/post/create-excel-2007-vsto-add-in-msi-installation.aspx](http://clear-lines.com/blog/post/create-excel-2007-vsto-add-in-msi-installation.aspx)

通常为我工作，我自己几乎没有修改。

# joomla - 德行 v1.19 中有关愿望清单组件的问题

> ID：12053915
> 
> 赞同：-1
> 
> 时间：2012-08-21T11:32:54.677
> 
> 标签：joomla, virtuemart, favorite

我是 joomla 的新手。我正在尝试在 joomla 1.5 中实现美德玛特。我安装了 meadowmart v1.1.19 。现在我想在 mercurymart 中添加“添加到收藏夹”和“愿望清单”。我可以免费获得这些组件吗？如果是这样怎么能做到这一点？请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T11:47:11.820

Joomla 的所有扩展都可以在[Joomla 扩展目录中找到](http://extensions.joomla.org/)

JED 上有 VirtueMart 的 557 个特定扩展，所以我相信会弹出一些东西。

这是一个商业扩展，但有两个目的：

[http://extensions.virtuemart.net/component/sobi2/?sobi2Task=sobi2Details&sobi2Id=128&Itemid=2](http://extensions.virtuemart.net/component/sobi2/?sobi2Task=sobi2Details&sobi2Id=128&Itemid=2)

# android - 如何将新数据附加到片段内的列表视图中？

> ID：12053916
> 
> 赞同：0
> 
> 时间：2012-08-21T11:32:59.460
> 
> 标签：android

所以我有两个片段。一个发布数据，一个显示活动中的数据。

所以，一旦帖子完成，我不想重新加载整个 Fragment，调用服务器，获取所有数据并显示它。我只想将新数据附加到片段中。我该如何管理？

示例：Twitter 直接消息。当我发送直接消息时，我不必加载整个消息列表，而只需在列表视图中附加我发送的新消息。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T11:34:49.270

在您传递给适配器的数据结构中添加新数据并调用`notifyDataSetChanged()`列表视图。它将刷新以显示新数据。

# apache - Apache / Google 撤消 301 重定向

> ID：12053924
> 
> 赞同：0
> 
> 时间：2012-08-21T11:33:34.487
> 
> 标签：apache, seo

几天前我做了一些愚蠢的事情:)

这是对我托管客户网站的服务器的黑客攻击。长话短说，一些文件被删除了，我不得不重建它。

与此同时，我复制了我在 stackoverflow.com 上找到的代码片段，以将来到该域的每个人重定向到另一个客户域（与另一个类似的网站）。

我没有注意到我复制的代码是301永久重定向......

所以我猜，重定向缓存在用户浏览器中，无法清除。但是谷歌呢？我猜谷歌会发现这个错误并对域进行某种惩罚......或者只是从搜索结果中删除内容......

有没有办法解决这个问题，让谷歌受到的影响尽可能小？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T11:50:52.633

不幸的是，Google 会将您的旧页面排名转换为临时重定向，因为它们是 301 的。你不能去告诉他们如何索引互联网，但你可以创建类似的 301 重定向，从临时站点到新的永久站点，这应该可以保留你的大部分 Google 汁液。

# jquery - jQuery hide() 不隐藏父级

> ID：12053933
> 
> 赞同：1
> 
> 时间：2012-08-21T11:34:00.290
> 
> 标签：jquery, forms, html, hide

JQuery 仍然让我发疯...问题是：我有一个页面，访问者可以通过单击 div 内的链接 (id="contact") 留下他们的电子邮件地址。

```
<div id="contact"><a href="">vuoi lasciare un recapito?</a></div> 
```

单击后，“联系人” div 会加载一个 php 表单。用户输入他的电子邮件地址，然后检查地址，然后将其插入数据库，等等......通常的业务。

```
$(document).ready(function() {
$('#contact a').click(function()
    {
    $('#contact').load('mailform.php');
    return false;
    });
$('#contact').submit(function(){
    var email = $('input[name=email]', '#submitmail').val();
    var submit = $('input[name=submit]', '#submitmail').val();
    $('#contact').load('mailform.php',{'email': email,'submit': submit});
    return false;
    });
//the close button - start
$(".cls").click(function(){
    alert($(this).parent().html());
    $(this).parent().hide();
    });
//the close button - end
}); 
```

当我想添加“关闭”按钮或链接时，痛苦就来了，因此用户可以在填写表单之后甚至之前隐藏表单。

```
<div id="submitmail">
    <form action="#" method="post">
        <fieldset>
        <p><label for="email"><?php echo $_SESSION['nome']; ?></label><input type="text" name="email" /></p>
        <p class="submit"><input type="submit" name="submit" value="inserisci" /></p>
        </fieldset>
        </form>
</div>
<span class="cls">Chiudi</span> 
```

链接（和“关闭按钮”脚本）根本不起作用。没有警报，没有开关，没有 div 消失......什么都没有。已经尝试过`$('span.cls').click(function()`并且`$('#cls').click(function()`（在使用“div”和带有 ID 的类切换“span”之后）没有任何线索。只是一个点击链接，什么都不做。Firebug 和 IE 开发工具栏甚至没有进入该功能。欢迎替代解决方案...

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T11:35:19.083

尝试这个：

```
$("#contact").on("click", ".cls", function(){
    alert($(this).parent().html());
    $(this).parent().hide();
}); 
```

由于该`.cls`元素在绑定时不存在 - 所以您需要将处理程序委托给合适的父元素。阅读本文的“直接和委托事件”部分：

[http://api.jquery.com/on/](http://api.jquery.com/on/)

摘自以上链接：

> 如果将新 HTML 注入页面，请在将新 HTML 放入页面后选择元素并附加事件处理程序。或者，使用委托事件来附加事件处理程序......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T11:39:30.010

您没有在此处复制以下 html 的父级：

```
<span class="cls">Chiudi</span> 
```

尝试这个：

```
$(".cls").click(function(){
    // alert($(this).parent().html());
    $('#submitmail').hide();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T11:38:58.350

我的猜测是关闭按钮不是 documentReady 上 DOM 的一部分。

# regex - vim 中的“普通”正则表达式

> ID：12053941
> 
> 赞同：2
> 
> 时间：2012-08-21T11:34:42.830
> 
> 标签：regex, vim

如何在 vim 的搜索中使用“常规”正则表达式`/`？我的意思是类似的东西`[0-9]+\d+\S*`，而不是 vim 语法？我发现 vim 的语法很烦人，并且必须经常检查如何在其中表达一些东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T11:38:14.390

你遇到的问题最有可能是因为魔法。查看`:help /magic`ViM 内部。您可以做的是添加`\v`为模式的第一个成员。例子：

```
/\v[0-9]+\d+\S* 
```

手册中的解释：

```
Use of "\v" means that in the pattern after it all ASCII characters except
'0'-'9', 'a'-'z', 'A'-'Z' and '_' have a special meaning.  "very magic" 
```

您还可以设置`magic`选项（请参阅 参考资料`:help magic`）。

# java - 读取 14 位和 16 位图像

> ID：12053942
> 
> 赞同：0
> 
> 时间：2012-08-21T11:34:43.597
> 
> 标签：java, apache, bufferedimage

我尝试**通过 1 或 3 个通道**（灰度或 RGB）读取（在 a 中`BufferedImage`） 14 或 16 位图像。我准确地说，该图像的每个颜色分量都存储在 14 位或 16 位上。

 **我的代码（使用 Apache Sanselan / Imaging）读取图像，但每个颜色分量都被截断为 8 位。

```
File f = new File("/tmp/a.tiff");
Map<String, ManagedImageBufferedImageFactory> params = 
    new HashMap<String, ManagedImageBufferedImageFactory>();
params.put(ImagingConstants.BUFFERED_IMAGE_FACTORY, 
    new ManagedImageBufferedImageFactory());
BufferedImage image = Imaging.getBufferedImage(file, params); 
```

你能给我一个代码片段吗？我被困了 6 个小时，谷歌不想帮助我：-p

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T21:12:21.483

好的 ！我自己结束我的问题:-P

我终于找到了一罐 Java Advanced Imaging。JAI 解决了我的问题。

以下代码能够加载任意数量的组件的 TIFF 或 BMP 图像，每个组件具有任意深度。

```
 RenderedOp op = JAI.create("fileload", filename);
        // gets the number of channels (R / RGB / RGBA)
        channels =  op.getColorModel().getNumColorComponents();
        // gets the depth of each component (16 16 16)
        depth = new int[channels];
        for(int i=0; i<op.getColorModel().getNumColorComponents(); i++)
        {
            depth[i] = op.getColorModel().getComponentSize(i);
        }
        // gets the BufferedImage
        image = op.getAsBufferedImage(); 
```

谢谢 ！！**

# web-services - Spring 2.5.5 的 Web 服务

> ID：12053943
> 
> 赞同：0
> 
> 时间：2012-08-21T11:34:44.390
> 
> 标签：web-services

我有使用 spring 2.5.5 MVC、JBoss 服务器设计的 Web 应用程序。我想使用 WebService for EAI 公开我的 Spring 服务（如添加/更新用户、评论、文档等）。要求就像任何第三方应用程序在身份验证/授权后应该能够在我的 Web 应用程序中执行操作一样。我有 SOAP (Axis2) 和 REST (Jersey) 的新手知识，但是我不确定哪个最适合我的应用程序。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T14:44:01.547

我们实际上使用的是 Spring 3.0。但前者使用 Axis2 和 Spring 2.5.x。您可以在[http://incubator.apache.org/openmeetings](http://incubator.apache.org/openmeetings)上查看我们的堆栈。我们简单地将常规 Axis2 配置集成到 web.xml 中，并构建一个 Facade 以将 spring bean 加载到 Axis 启用 Web 服务中，并以这种方式将调用转发到启用 Spring 的上下文。相当于[https://svn.apache.org/repos/asf/incubator/openmeetings/trunk/singlewebapp/src/org/openmeetings/axis/services/FileWebServiceFacade.java](https://svn.apache.org/repos/asf/incubator/openmeetings/trunk/singlewebapp/src/org/openmeetings/axis/services/FileWebServiceFacade.java)

这不是完美的解决方案，Axis2 文档还包含在启用 Web 服务的类中加载 Spring 上下文的其他方法，但是永远不可能使该工作稳定，因此我们决定采用这种解决方法。

# java - 番石榴的 ImmutableXXX 真的是不可变的吗？

> ID：12053945
> 
> 赞同：8
> 
> 时间：2012-08-21T11:34:47.933
> 
> 标签：java, collections, guava, immutability

我使用番石榴已经有一段时间了，并且非常信任它，直到昨天我偶然发现了一个例子，这让我开始思考。长话短说，这里是：

```
 public static void testGuavaImmutability(){
     StringBuilder stringBuilder = new StringBuilder("partOne");
     ImmutableList<StringBuilder> myList = ImmutableList.of(stringBuilder);
     System.out.println(myList.get(0));
     stringBuilder.append("appended");
     System.out.println(myList.get(0));
 } 
```

运行后，您可以看到*ImmutableList*中条目的值已更改。如果这里涉及两个线程，一个可能碰巧看不到另一个的更新。

另外，让我非常不耐烦的事情是 Effective Java 中的 Item15，第五点是这样说的：

**在构造函数中制作防御副本**——这看起来很合逻辑。

查看 ImmutableList 的源代码，我看到：

```
 SingletonImmutableList(E element) {
     this.element = checkNotNull(element);
 } 
```

因此，实际上没有复制，尽管我不知道在这种情况下如何实现通用深度复制（可能是序列化？）。

那么..为什么它们被称为不可变呢？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-21T14:08:22.387

你在这里得到的是*不可变*和*深度不可变之间的区别。*

不可变对象永远不会改变，但它所指的任何东西都可能改变。深度不变性要强得多：基础对象和您可以从中导航到*的*任何对象都不会改变。

每个都适合自己的情况。当您创建自己的具有 type 字段的类`Date`时，该日期*归*您的对象所有；它确实是其中的一部分。因此，您应该制作它的防御性副本（在进出*的*路上！）以提供深度不变性。

但是一个集合并不真正“拥有”它的元素。它们的状态不被视为集合状态的一部分；它是一种不同类型的类——一个*容器*。（此外，正如您所提到的，它对正在使用的元素类型没有深入的了解，因此它也不知道如何复制元素。）

另一个答案指出 Guava 集合应该使用术语*unmodifiable*。*但是在集合的上下文中，术语不可修改*和*不可变*之间有一个非常明确的区别，它与浅不可变与深不可变无关。“不可修改”表示*您*无法通过您拥有的参考来更改此实例；“不可变”是指此实例不能更改，无论是您还是任何其他参与者。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-21T11:37:49.070

列表本身是不可变的，因为您无法添加/删除元素。关于不变性，这些元素是独立的。更准确地说，我们有来自[历史 Java 1.4.2 文档的](http://docs.oracle.com/javase/1.4.2/docs/guide/collections/overview.html)定义：

> *   不支持任何修改操作（如添加、删除和清除）的集合称为不可修改的。非不可修改的集合称为可修改的。
> *   额外保证 Collection 对象中的任何更改都不可见的集合称为不可变集合。不可变的集合称为可变集合。

请注意，为了使这些定义有意义，我们必须假设抽象意义上的集合和表示该集合的对象*之间**存在*隐含的区别。这很重要，因为根据该术语的任何标准定义**，表示不可变集合的对象本身并不是不可变的。**例如，它的`equals`关系没有时间一致性，这是对不可变对象的重要要求。

至于防御性复制，请注意这通常是一个定义不明确的问题，Java 中永远不会有一个通用的不可变集合能够防御性地复制其元素。另外请注意，这样的集合将**不如真正存在的不可变集合有用**：当您将对象放入集合中时，在 99.99% 的情况下，您希望**该对象**存在，而不是其他一些甚至不*等于*它。

*对象不变性*（与*集合不变性*相反）有一个非常标准的定义，它假设从不可变对象可到达的整个对象图的传递不变性。然而，从字面上看，这样的定义在现实世界中几乎永远不会得到满足。有两个案例：

*   **在反思面前，**没有什么是一成不变的。**甚至`final`字段也是可写的。**
***   甚至`String`，那个不变性的堡垒，[已经被证明](https://stackoverflow.com/questions/11146255/how-to-create-mutable-java-lang-string)在 Java 沙箱之外是可变的（没有`SecurityManager`- 它涵盖了 99% 的真实世界 Java 程序）。**

 *** * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-21T11:40:55.977

你混合了列表的不变性和它包含的对象的不变性。在不可变集合中，您不能添加/删除对象，但如果它包含的对象是可变的，您可以在`get()`ing 之后修改它们。**

# windows - 在 Windows 上下载和执行文件的最短命令？

> ID：12053950
> 
> 赞同：1
> 
> 时间：2012-08-21T11:34:59.740
> 
> 标签：windows, automation

我正在寻找可以下载文件 (http) 并在 Windows 上执行它的最短命令。

我们假设执行命令的用户是本地管理员，并且您不能使用 Windows 默认情况下不可用的任何工具。

它必须与:`Windows 7`和`Windows 2008`. 如果有人提供了一个同样适用于 Windows XP 和 Windows 2003 的解决方案，那就再好不过了。

推理：用于在不同的 Windows 机器上部署东西。使用 WMI 或其他方法不是一个选项，因为默认情况下未启用这些方法，还因为机器可以在我们的域外，这使得问题更加复杂，尤其是。

注意：如果这不能在命令行中完成，则可以使用脚本。假设要下载的文件位于“http://example.com/setup.exe”，并且您希望在下载后使用“-y”参数运行它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T11:51:14.043

你指定了http，所以`ftp`在命令行中使用命令不行吗？也许`cscript`+`VB`然后？

下载文件： [https ://serverfault.com/questions/29707/download-file-from-vbscript](https://serverfault.com/questions/29707/download-file-from-vbscript)

运行文件：

```
Set objShell = WScript.CreateObject("WScript.Shell")
objShell.Run (strHDLocation & "-y") 
```

# mysql - 用户库存数据库设计？

> ID：12053954
> 
> 赞同：0
> 
> 时间：2012-08-21T11:35:16.373
> 
> 标签：mysql

我正在使用 MySQL 用 PHP 制作游戏，我想知道存储用户购买的物品的最佳方式是什么，以便与他们的帐户相关联。

我计划有一个包含项目信息的数据库，我能想到的唯一方法是：

1.  在排序的序列化数组中有一个用户项目表
2.  拥有大量具有一定数量库存空间的列
3.  带有 user_id 和 item_id 的表格，并在每次购买商品时添加一行，选择与用户相关的 user_id 以显示他们的商品

哪个最好？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T11:40:42.367

我认为您一开始就知道用户可以购买哪些商品，因此我认为您应该有三张桌子

*   **USERS**表，您在其中存储用户数据（`PRIMARY KEY`是**user_id**）
*   **ITEMS**表，您在其中存储项目及其成本和数据（`PRIMARY KEY`是**item_id**）
*   **USERITEMS**表，其中存储用户购买的每件商品。它应该有两列：**user_id**和**item_id**，并且每次用户购买商品时添加一行。

这种设计让您可以轻松管理购买的商品并向每个用户展示其库存。
更多：避免在数据库中浪费空间复制无用的信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T11:48:52.010

根据您的问题，3 号是合适的。我更喜欢@Marco 的建议。

# android - 从 SQLite 设置联系人列表

> ID：12053957
> 
> 赞同：0
> 
> 时间：2012-08-21T11:35:18.507
> 
> 标签：android, sqlite, listview, adapter

我有自己的适配器，`ListView`可以在我的`SQLite`. 我有`ListActivity`那个调用 my `ArrayAdapter`，但它没有调用 the`getView`并且我不知道为什么，然后`setListAdapter`我认为是空的。

[我从：这里](http://www.vogella.com/articles/AndroidListView/article.html)得到样本，这是我的代码：

```
public class ListarContactos3 extends ListActivity {
private SQLiteDatabase database;
private ListAdapter dataSource;
private static final String fields[] = {"Nombre_Amigo","Picture","_id"};
Bitmap photo;
Cursor cur;
Context context;
private LayoutInflater mInflater;
View view;
ViewGroup parent;

public void onCreate(Bundle icicle){
    super.onCreate(icicle);
    DatabaseHandler helper = new DatabaseHandler(this);
    database = helper.getWritableDatabase();

    cur = helper.getAllContactList();
    Log.d("ListarContactos3","Cursor :"+cur);

    setListAdapter(new MyPerformanceArrayAdapter(this, cur));
    Log.d("ListarContactos3","setListAdapter");
}
 } 
```

这是我的适配器：

```
public class MyPerformanceArrayAdapter extends ArrayAdapter<String> {
 private final Activity context;
 private Cursor cursor;

static class ViewHolder {
 public TextView text;
 public ImageView image;
}

public MyPerformanceArrayAdapter(Activity context,Cursor cursor){
 super(context, R.layout.row_def);
 this.context = context;
 this.cursor = cursor;
 Log.d("MyPerformanceArrayAdapter","Constructor");
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
  Log.d("MyPerformanceArrayAdapter","View");
 View rowView = convertView;
 if (rowView == null) {
   LayoutInflater inflater = context.getLayoutInflater();
   rowView = inflater.inflate(R.layout.row_def, null);
   ViewHolder viewHolder = new ViewHolder();
   viewHolder.text = (TextView) rowView.findViewById(R.id.Nombre_Amigo);
   viewHolder.image = (ImageView) rowView
      .findViewById(R.id.profile_picture);
   rowView.setTag(viewHolder);
 }

 ViewHolder holder = (ViewHolder) rowView.getTag();
 for (cursor.moveToFirst(); !cursor.isAfterLast(); cursor.moveToNext()){

    byte[] bb2= cursor.getBlob(4);
    Bitmap bitmap = BitmapFactory.decodeByteArray(bb2, 0, bb2.length); 
    Log.d("MyPerformanceArrayAdapter","Bitmap: "+bitmap);

    holder.image.setImageBitmap(bitmap);
    holder.text.setText(cursor.getString(2));
    rowView.setTag(holder);
}

return rowView;
}

} 
```

这是我的数据库方法：

```
 public Cursor getAllContactList(){

    String selectQuery = "SELECT  * FROM " + TABLE_AMIGOS;
    SQLiteDatabase db = this.getWritableDatabase();
    Cursor cursor = db.rawQuery(selectQuery, null);

            for (cursor.moveToFirst(); !cursor.isAfterLast(); cursor.moveToNext()){
            Contact contact = new Contact();

            byte[] blob = cursor.getBlob(cursor.getColumnIndex(KEY_PIC_SQ));
            Log.d("DatabaseHandler","blob: "+blob);
            Bitmap bmp = BitmapFactory.decodeByteArray(blob, 0, blob.length);
            Log.d("DatabaseHandler","blob: "+bmp);
            contact.setPicSquare(bmp);
            contact.setID(cursor.getString(0));
            contact.setName(cursor.getString(2));
            Log.d("DatabaseHandler","setname: "+cursor.getString(2));
         }

        db.close();           
    return cursor;
} 
```

有人能帮助我吗？我不知道如何显示我的联系人列表，这很重要。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T12:04:19.470

您的适配器的 getView 似乎是错误的。看起来每次调用它时它都会遍历整个游标。

Your adapter should extend SimpleCursorAdapter instead of ArrayAdapter, it is used when populating ListViews from a database. See [this post](http://thinkandroid.wordpress.com/2010/01/11/custom-cursoradapters/) for an example.

That blog has a series on implementing CursorAdapters. You can find the list [here](http://thinkandroid.wordpress.com/category/android-tutorials/cursoradapter-tutorials/).

# msbuild - Microsoft.Build 未正确重建

> ID：12053964
> 
> 赞同：2
> 
> 时间：2012-08-21T11:35:44.923
> 
> 标签：msbuild, msbuild-4.0

我们正在修改一个在 Visual Studio 解决方案中重建所有内容的应用程序。我们使用的是 BuildEngine，但由于它已被弃用，我们将转向 Microsoft.Build。

代码是这样的：

```
var projectCollection = new Microsoft.Build.Evaluation.ProjectCollection();
var globalProperty = new Dictionary<String, String>();
var buildRequest = new Microsoft.Build.Execution.BuildRequestData(Directory.GetFiles(@"Build\", "*.sln").First(), globalProperty, null, new String[] { "Clean", "Build" }, null);

Microsoft.Build.Execution.BuildManager.DefaultBuildManager.Build(new Microsoft.Build.Execution.BuildParameters(projectCollection), buildRequest);

// 2nd time's a charm?
// Microsoft.Build.Execution.BuildManager.DefaultBuildManager.Build(new Microsoft.Build.Execution.BuildParameters(projectCollection), buildRequest); 
```

但这些项目并没有被重建。但是，如果 Build 方法运行两次（如上面注释的代码），则项目将正确重建。

# objective-c - 使用执行选择器时的内存泄漏

> ID：12053969
> 
> 赞同：0
> 
> 时间：2012-08-21T11:35:56.497
> 
> 标签：objective-c, memory, memory-leaks, performselector

```
-(void)walkDOM:(SEL)visitor node:(QuadNode*)node {
    [self performSelector:visitor withObject:node]; /* ------>100% leaks shown here */
    NSArray* children = node.children;
    if (children) {
        for (QuadNode* child in children) {
            [self walkDOM:visitor node:child];
        }
    }
} 
```

我不知道上面有什么问题，它崩溃了。任何帮助建议！！！！！！

**编辑：**

```
-(void)registerFramesetterVisitor:(TDOMNode*)node {
     [strMaker reset]; 
     [node registerFramesetter:self]; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T10:06:17.373

这只是编译器警告的问题，您可以使用以下方法抑制它们：

```
#pragma clang diagnostic push
#pragma clang diagnostic ignored "-Warc-performSelector-leaks"
    [self performSelector:visitor withObject:node];
#pragma clang diagnostic pop 
```

[资源](http://blog.mugunthkumar.com/articles/migrating-your-code-to-objective-c-arc/#performSelector_may_cause_a_leak_because_its_selector_is_unknown)

# c# - 使用 sn.exe 生成用于 RSA 加密的公钥/私钥对

> ID：12053973
> 
> 赞同：1
> 
> 时间：2012-08-21T11:36:09.540
> 
> 标签：c#, visual-studio-2010, encryption, rsa

任何人都认为使用 sn.exe 生成公钥/私钥对有什么问题，我以后可以用它来使用私钥加密数据，然后给人们公钥，以便他们可以解密我的密文？我知道 sn.exe 用于强命名程序集，但由于它生成一个密钥对，我可以简单地使用这个方案吗？

我知道 RSA 是用来用公钥加密的，所以我问这个问题。但是我有一个我认为是相反的有效用例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T13:13:02.377

这真的是两个问题：

*   你应该使用 sn.exe 来生成你的密钥对吗？
*   您应该使用私钥来加密数据吗？

第一个问题的答案是：不，不是。SN.exe 的密钥对生成实际上只对非常小的开发环境有用，并且需要您处理所有安全性。有更好的方法来生成包含密码保护 (PFX) 等内容的证书容器。例如，看一下 MakeCert 工具 - 它可用于生成自签名 X.509 证书，可用于您可能想要执行的几乎所有加密操作。

不幸的是，第二个问题的答案也是：不，不是。从加密的角度来看，用私钥加密东西没有多大意义。毕竟，公钥就是这样：public。如果任何人都可以解密它（没有操作系统提供对公钥的任何保护，因此获取副本很简单），那么加密它就没有多大意义了。如果目的是确保人们可以证明它来自您，那么数字签名是一种更好的方法，在这种情况下，您所描述的正是您想要做的：用私钥签名，使用免费提供的公钥验证签名。

现在，如果您的意图是将加密数据分发给多个收件人，请考虑使用 PKCS #7/CMS 信封。由于您在谈论使用 sn.exe，这告诉我您正在使用 .NET，所以您很幸运！EnvelopedCms 类应该提供您所需要的。您所需要的只是收件人的 X.509 证书中的公钥（makecert 来救援！）。[MSDN在这里](http://msdn.microsoft.com/en-us/library/bb924547%28VS.90%29.aspx)有一个演练。

# asp.net - 将多列中的数据添加到 SQL Server 中的一列

> ID：12053976
> 
> 赞同：0
> 
> 时间：2012-08-21T11:36:16.477
> 
> 标签：asp.net, sql-server, linq, sql-server-2008, linq-to-sql

如何将多列的数据添加到 SQL Server 中的单个列中？

我有类似的列`Loc_BldgStreet, Loc_Area, Loc_City, Loc_State, Loc_Country`，我想将它们全部添加到一个列中（在视图中），以便在 gridview（asp.net）中显示它们，就像在单个列中作为完整地址一样，以避免非常宽的网格。

怎么做？我正在使用 linq 从 location_view 绑定网格。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T11:39:51.953

+ 号是​​用于连接 SQL 中的字符串的符号。

```
col1 + col2 as Colname 
```

如果其中一列恰好是数字（即 int），则使用 convert 或 cast

```
col1 + convert(varchar(10), col2) as Colname 
```

如果其中一列允许 null，则需要使用 IsNull，否则，整个字符串将返回 null：

```
col1 + isnull(col2, '') as Colname 
```

创建视图：

```
CREATE VIEW dbo.MyView
AS

SELECT col1, col2, col3 + col4 + col5 as NewColName
FROM dbo.MyTable
GO 
```

您还可以创建一个计算列并将您的连接放置在那里。计算列还可以将函数用于运行总计等，并且不需要额外的视图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T11:41:16.810

[在 SQL 2012 中，您可以使用CONCAT](http://msdn.microsoft.com/en-us/library/hh231515.aspx)构建单个列。

否则，如其他答案所示，使用“+”操作数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T11:39:43.080

试试这个：

```
select isnull(Loc_BldgStreet,'') +
       isnull(Loc_Area,'') +
       isnull(Loc_City,'') +
       isnull(Loc_State,'') + 
       isnull(Loc_Country,'')
from <your table> 
```

# ms-access - 访问表单上的组合框以显示表/查询中的文本值并将关联的 ID 值保存在我的表单上的表中已经基于

> ID：12053978
> 
> 赞同：0
> 
> 时间：2012-08-21T11:36:26.670
> 
> 标签：ms-access, vba, ms-access-2007

我的项目是一个基于事务表的表单，这个表单有四个组合框。基本上它们都是存储 ID 值，问题是如何让 access 在表单上显示 ID 的关联值，而 ID# 存储在表中。

示例：表单上的一个组合名称是 well_ID，它将通过选择状态 [SELECT Wells.Well_ID, Wells.Wellname FROM Wells] 从表 (Wells) 中填充我需要组合来显示井名称并将 well_ID 存储在桌子。

你能帮忙吗？

问候穆罕默德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T11:46:06.283

最简单的方法是使用向导并让它引导您完成。基于表格或查询创建表单，确保单击向导按钮，添加组合并按照向导提供的步骤进行操作。

你最终会在这些线上得到一些东西：

```
 Row Source Type : Table/Query
 Row Source      : SELECT Wells.Well_ID, Wells.Wellname FROM Wells 
 Bound Column    : 1
 Column Count    : 2
 Column Widths   : 0cm;2cm; 
```

如果您选择将值存储在字段（列）中，您将需要：

```
 Control Source  : SomeID 
```

它指的是绑定到表单的表或查询中的字段或列，并从绑定列中获取其内容，绑定列可以是任何有效的列号，从一 (1) 开始。换句话说，该表中应该存储 Well_ID 的任何字段。

行源可以是更复杂的 SQL 字符串、查询或表。它可以引用任何打开的窗体上的其他控件。这些属性可以通过代码设置。

# cakephp - Cakephp 表单助手 PostLink 编辑

> ID：12053984
> 
> 赞同：4
> 
> 时间：2012-08-21T11:36:46.510
> 
> 标签：cakephp

我正在使用 cakephp 2。

是否可以使用表单助手 postLink 函数来更新记录？基本上我想要一个“批准”按钮，将记录的“批准”字段更改为 1。

我能找到的一切都只与执行删除功能有关吗？文档也没有详细说明。

任何帮助都会很棒，在此先感谢

我的代码：

```
<?php echo $this->Form->postLink(__('Approve'), array(
                                     'controller' => 'expenseclaims',
                                     'action' => 'edit', $expenseClaim['ExpenseClaim']['id'],
                                     'approved' => '1',                                                     
                                     'approved_by' => $adminUser,
                                 ), array(
                                     'class' => 'btn btn-danger'
                                 ), __('Are you sure you want to Approve # %s?',$expenseClaim['ExpenseClaim']['id']
                                )); ?> 
```

新代码：查看帖子链接：

```
<?php echo $this->Form->postLink(__('Approve'), array('action' => 'approve', $expenseClaim['ExpenseClaim']['id'], 'admin' => true), array('class' => 'btn btn-danger'), __('Are you sure you want to Approve # %s?',$expenseClaim['ExpenseClaim']['id']));
                                ?> 
```

控制器代码：

```
public function admin_approve($id = null) {

    debug($this->request);

    $this->ExpenseClaim->id = $id;
    if (!$this->request->is('post') && !$this->request->is('put')) {
        throw new MethodNotAllowedException();
    }

    if (!$this->ExpenseClaim->exists()) {
        throw new NotFoundException(__('Invalid expense claim'));
    }

    if ($this->request->is('post') || $this->request->is('put')) {

        $this->request->data['ExpenseClaim']['approved'] = '1';
        $this->request->data['ExpenseClaim']['approved_by'] = $this->Auth->user('id');

        if ($this->ExpenseClaim->save($this->request->data)) {
            $this->Session->setFlash('The expense claim has been Approved', 'flash_success');
            $this->redirect(array('action' => 'index', 'admin' => true));
        } else {
            $this->Session->setFlash('The expense claim could not be approved. Please, try again.', 'flash_failure');
        }
    } 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T11:51:39.437

是的，这当然是可能的。

只是发布到类似的东西

```
/expenseclaims/approve/id 
```

触发`approve`动作，例如：

```
public function approve($id = null) { 
    if (!$this->request->is('post') && !$this->request->is('put')) {
        throw new MethodNotAllowedException();
    }
    //validate/save
} 
```

当然，你也可以让它更通用

# c# - 使用版本号标记文件

> ID：12053995
> 
> 赞同：0
> 
> 时间：2012-08-21T11:37:29.180
> 
> 标签：c#, file-io

我开发了一个互操作 Excel 应用程序，它基于复制的模板生成各种报告。必须优化应用程序以避免无用的例程，例如更新已经是最新的报告。

有两个因素导致需要非常具体的解决方案。

1.  可以在非自动部分手动修改文件（不能使用文件 HASH 或修改日期）
2.  我无法在 Excel 表中阅读版本号，因为目标是通过跳过文件来缩短处理时间。

我的想法是使用文件属性（Windows 的右键单击属性）来添加 SQL 行版本或数据哈希。

但是，到目前为止，我还没有找到一种干净的方法来实现这一点。

**所以问题是**：是否有 .NET 功能或高度支持/推荐/维护的库来管理 Windows 的文件属性？如果没有，你们会建议什么替代方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T15:28:02.713

如果文件只存储在 NTFS 卷上，那么您可以使用[Alternate Data Stream](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364404%28v=vs.85%29.aspx)。

Codeproject 上有一个库[，](http://www.codeproject.com/Articles/2670/Accessing-alternative-data-streams-of-files-on-an)可让您从 .Net 项目中使用它们

您唯一需要注意的是 ADS 在被复制到非 NTFS 卷时无法幸存，并且非 ADS 感知复制应用程序可能无法复制它们

# iphone - iphone 应用程序中的 OAuth 集成

> ID：12053996
> 
> 赞同：3
> 
> 时间：2012-08-21T11:37:31.507
> 
> 标签：iphone, ios, xcode, facebook, oauth-2.0

我有一个关于 iPhone 应用程序中的 OAuth 集成的问题。

谁能帮助我如何在 iPhone 中将[OAuth 2.0](http://oauth.net)与[facebook集成？](https://developers.facebook.com)

我已经推荐了很多关于 OAuth 的网站，但我还没有得到满意的答案。我提到了[这个](https://stackoverflow.com/questions/6027304/social-networking-integration-with-oauth-in-iphone)[stackoverflow](http://stackoverflow.com)的问题。[ShareKit](http://getsharekit.com/)有一个不错的选择。但我的客户只想要 OAuth 2.0。

我从谷歌代码下载了[框架](http://oauth.googlecode.com/svn/code/obj-c/OAuthConsumer/)。我将它集成到我的应用程序中。但是如何使用呢？没有指导，我无法以适当的方式实施它。

**自过去3 天**以来，我一直卡在我的应用程序和 0Auth 2.0 之间。请任何人都可以给我想法或演示项目或任何其他教程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T12:19:21.263

与其为 Facebook 实现 OAuth，不如使用 Facebook iOS SDK，这使得处理 Facebook Auth 和请求变得更加容易。您可以在这里阅读并下载它... [http://developers.facebook.com/ios/](http://developers.facebook.com/ios/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T13:00:59.560

您在帖子中提到的框架不是针对 OAuth 2，而是针对 OAuth 1.0a。

您可以尝试我们为与 SoundCloud API 对话而开发的[OAuth2Client 。](https://github.com/nxtbgthng/OAuth2Client)它是根据规范草案 10 构建的。我不确定 Facebook 使用的是哪一个。不幸的是，该规范尚未最终确定，多年来不同的服务采用了不同的规范草案。

如果您能够与您的客户争论，我会尝试说服他让您使用[官方的 iOS SDK](https://github.com/facebook/facebook-ios-sdk)。这为您提供了许多好处，例如自动令牌刷新、通过官方应用程序单点登录等等。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T12:21:38.070

我刚刚做了一个研究

这篇[文章](http://davidquail.com/2009/12/07/oauth-authorization-callback-on-the-iphone-with-webview/)真的会帮助你

也请看下面的帖子

[iphone-facebook-oauth2-graph-api](http://www.capturetheconversation.com/best-practices/iphone-facebook-oauth2-graph-api)

[OAuth 和 Facebook iPhone SDK](http://alohacocoa.com/)

# python - 我应该在哪里定义我在 __init__ 中使用的函数

> ID：12053998
> 
> 赞同：7
> 
> 时间：2012-08-21T11:37:48.120
> 
> 标签：python, function

我正在编写一个在其`__init__`函数中使用某些函数的类，但我不确定在哪里定义这些函数的最佳实践。我通常喜欢先定义`__init__`，但如果我需要在其中使用函数/方法，`__init__`则需要先定义它。我不想在类外将它定义为它在类外无用，但在`__init__`. 什么是正常的约定？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-21T11:41:33.237

只需像其他方法一样将方法添加到您的类中

```
class Test(object):
    def __init__(self):
        self.hi()

    def hi(self):
        print "Hi!" 
```

完全没有问题。

虽然[Python 样式指南](http://www.python.org/dev/peps/pep-0008/)IIRC 中没有提到它，但约定 let`__init__`是类中的第一个方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T11:49:20.840

正常的约定确实是放在`__init__`其他方法之前。这样做的原因是函数在被调用之前不会被评估。来自[Python 文档](http://docs.python.org/reference/compound_stmts.html#function-definitions)：

> 函数定义是一个可执行语句。它的执行将当前本地命名空间中的函数名称绑定到函数对象（函数的可执行代码的包装器）。此函数对象包含对当前全局命名空间的引用，作为调用函数时要使用的全局命名空间。
> 
> 函数定义不执行函数体；this 仅在调用函数时执行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T11:41:46.810

最好将`__init__`函数定义为第一个函数，您可以`__init__`在其中调用定义的函数。

```
class A:
    def __init__(self):
        print self.x()

    def x(self):
        return 10 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T11:56:41.273

为什么在 init 之后定义方法会很“混乱”？这样想：

当你定义

```
class MyClass(object):

    def __init__(self):
        self.something = whatever
        self.do_something_else()

    def do_something_else(self):
        ... 
```

`__init__`是你的`MyClass`类的一个方法，就像`do_something`是；它只是*当*您创建`MyClass`. 所以，把`__init__`它放在第一位不仅是习惯性的，也是合乎逻辑的。

您的`do_something_else`方法不必先定义，因为您在`__init__`. 从 的角度来看`MyClass`，它是另一种方法。当您创建`myclass=MyClass()`实例时，`do_something_else`已经定义...