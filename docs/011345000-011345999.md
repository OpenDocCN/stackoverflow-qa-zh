# StackOverflow 问答 11345000-11345999

# c# - Silverlight：在运行时在控件上应用边框

> ID：11345006
> 
> 赞同：0
> 
> 时间：2012-07-05T13:08:52.683
> 
> 标签：c#, .net, wpf, silverlight

我在页面左侧有一个 StackPanel，我在运行时添加组合框，在选择任何组合框的项目时，我在右侧显示相关信息。我想要类似的东西，如果任何组合框激活，则应在该组合框上应用边框，我不能使用 onfocus，因为一旦我单击右侧的相关信息，边框就会消失。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T13:27:33.733

这是一种解决方案的伪代码：

```
void AnyComboBoxSelectionChanged(ComboBox selectedBox)
    foreach combobox in stackPanel
        combobox.border = none
    selectedBox.border = highlightedBorder 
```

也就是说，`SelectionChanged`根据需要使用组合框的事件来设置边框。

# java - 将 Groovy 代码引入 Eclipse 中的 src 文件夹

> ID：11345007
> 
> 赞同：0
> 
> 时间：2012-07-05T13:08:55.017
> 
> 标签：java, eclipse, groovy

项目结构中的 Groovy 代码是**src/groovycode/src/packagename**，其余的 java 类在 src/packagename 中。我的其他团队成员使用 IntelliJ，它将 groovy 类无缝编译为具有所需包名称的 java 类，并忽略 groovycode/src 文件夹。
我根本无法在 Eclipse 中做同样的事情并编译​​ groovy 类。所以我最终从其他人那里复制了 groovy 类并复制到我的 WEB-INF/classes 文件夹中。
有没有办法在 Eclipse 中实现这一点？
在这两者之间，我正在使用 Eclipse Helios 并安装了 Groovy Eclipse 插件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:55:43.730

听起来您还没有设置`src/groovycode/src`为源文件夹。您需要右键单击源文件夹并选择构建路径 -> 用作源文件夹。完成此操作后，您应该打开项目的 Java 构建设置页面并为该源文件夹设置输出文件夹。

我还建议您升级到 Eclipse Indigo 或 Juno 并开始使用 Groovy-Eclipse 2.7.0。

# yii - 在 Yii 的视图中，我应该更喜欢使用 widget 还是 renderPartial？

> ID：11345025
> 
> 赞同：8
> 
> 时间：2012-07-05T13:09:48.140
> 
> 标签：yii

当我应该在我的视图文件中使用自定义小部件或 renderPartial 时，我感到困惑。有时我使用小部件，有时我使用 renderPartial。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-05T13:40:53.943

**小部件**

当您的应用程序逻辑在单独的**CLASS 文件**中定义并且逻辑以某种方式分离和独立时，您可以使用**小部件。**

 **当功能在其他地方重复使用时，会选择小部件，在很多页面上。

**渲染部分**

您将**renderPartial**用于要嵌入到更大文件中的**VIEW 文件**，或者当您想在不使用应用程序布局的情况下打印某些内容时。

当它需要访问的所有变量都已在当前操作中准备好时，选择 renderPartial。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T14:11:10.133

**小** 部件 当您的网站有一些常见的部分（如页眉和页脚）或有时需要在网站的每个页面上使用的某种过滤器时，您可以使用小部件。

**renderPartial** 以 yii 粗略的搜索表单为例，它是使用 renderPartial 调用的，因为该搜索表单是根据页面的要求而变化的。

对不起英语。**

# java - 如何开始手动编写 Java

> ID：11345030
> 
> 赞同：1
> 
> 时间：2012-07-05T13:10:23.730
> 
> 标签：java

我刚刚开始`Java`并且一直在使用 Netbeans。我已经尝试过 Eclipse，但它一直在我身上崩溃，我放弃了。从那以后我制作了一个小应用程序，但我发现我在开发环境中感到非常受限，并且我看到很多我真的不理解的生成代码，而且似乎与我可能找到的任何代码几乎没有相似之处在研究问题时。

考虑到这一点，并且看到了很多建议，我宁愿开始手工编码，这样我就可以准确地理解什么是去哪里，以及为什么。

我的问题：

我已经看过并阅读了很多教程，但其中大多数都假定了一定程度的能力。我在 Netbeans 中构建了一个小型桌面编辑器，但我从未`Java`手动编写过代码。考虑到这一点，您能否为我推荐一个好的“入门”教程？

我还想要一些关于编码环境的建议。我将创建桌面应用程序并且已经通过编码熟悉 Geany `Python`，但我看到的关于 Geany 和`Java`.

我会很感激有关此的任何建议，因为似乎有很多可用的编辑器，但请注意我在我的开发机器上使用 Ubuntu。开源不是必需的，但免费是必需的。

顺便说一句，如果这似乎是普遍共识，我再次尝试 Eclipse 没有任何问题，我目前只是有点厌倦它，因为我从来没有成功地测试过任何没有灾难性崩溃的东西。

非常感谢您提供的任何建议。

MVK

**一点更新**

非常感谢那些花时间给出答案的人。我目前正在使用由 user1432824 建议的 Sublime 编辑器，并在 Eclipse 上进行了另一次尝试。不幸的是，Eclipse 在保存文件时有崩溃的习惯，这很不方便。我打算追查这个，看看是否有一个可以解决的原因，但它仍然感觉有点沉重和整合，如果可能的话，我真的想远离它。

感谢教程链接，我已经在旅行中看到了大部分链接，但我很高兴能得到更多。

**最后**

非常感谢您的意见，我认为我已经得出了一个舒适的结果，但有一些松散的结局，稍后我会检查。以下是我迄今为止的发现：

Sublime Editor：这是一个棘手的问题。Sublime 编辑器实际上是一个优秀的小应用程序（尽管它看起来是开箱即用的！）我毫不怀疑我会在某个时候使用它，但现在它对我来说缺乏一些东西，虽然我很难确切地解释什么。不过感谢您的建议，找到新编辑总是好的。

Eclipse：所以我再次尝试了 Eclipse，就像我第一次使用它一样，我对它的整体外观和感觉印象深刻，然而，就像上次它在最不合时宜的情况下崩溃一样时刻，尽管进行了很多搜索，但我还没有发现导致 Eclipse 无法运行的原因或解决方法。此外，虽然我喜欢 Eclipse 的感觉，但对于我想做的事情来说，它仍然有点偏重。

BlueJ：我承认我没有尝试过这个程序，虽然谢谢你的建议。在我看来，这只是另一个 IDE，我真的想暂时远离整个 IDE，至少在我对`Java`实际工作原理有更多了解之前。

非常感谢您的建议，但我认为现在我会选择 Geany 有几个原因：作为一个非常轻量级的编辑器，它可以`Java`从菜单或键盘编译和运行，这只是节省了一些时间，而且我已经沉迷于一旦您了解了添加到其中的任何命令的基本语法，Snippets 功能就会派上用场。

现在唯一的其他选择是介于`ANT`和之间`Maven`，我认为在两者之间做出决定的唯一方法是同时使用两者，看看哪一个对我来说“感觉”更好。

非常感谢所有回答的人，我的最后一个问题一定是：既然你们都帮助我做出了最终决定，我该如何接受这个问题？*在这*方面的任何建议也会有所帮助！

问候，

MVK

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T13:12:24.870

In my opinion, if you are new to Java, don't start with GUI. Start with simple text application. The best resource for beginners in my opinion is the official Java tutorial.

[http://docs.oracle.com/javase/tutorial/](http://docs.oracle.com/javase/tutorial/)

Good luck!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T13:13:49.077

Have you looked at [BlueJ](http://www.bluej.org/) ? From the website:

> BlueJ is an integrated Java environment specifically designed for introductory teaching.
> 
> BlueJ was developed at a University specifically for the purpose of teaching object orientation with Java.
> 
> BlueJ is free!

I would *strongly* recommend using some form of IDE. It'll provide interactive debugging, hints, completion, code colourisation and useful error highlighting.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T22:18:33.347

我建议您熟悉构建工具，例如 Ant 或 Maven。一旦你有一个项目，其中包含超过 1 个类，使用各种库，最好有一些帮助管理依赖项，运行测试，构建 jars 等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T13:13:10.790

have you tried the Java online trainings?

[http://java.sun.com/developer/onlineTraining/awt/contents.html](http://java.sun.com/developer/onlineTraining/awt/contents.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-05T13:14:34.930

As for editors, I started out with a simple plain text editor like those that come on Mac and Windows. I also use Eclipse for Java Developers, and Sublime Text. Sublime has a free, unlimited trial, but will bug you every few saves to buy the premium version.

# excel - 是否可以在 Excel 中进行 Levenshtein 距离而不必求助于宏？

> ID：11345031
> 
> 赞同：8
> 
> 时间：2012-07-05T13:10:24.110
> 
> 标签：excel, excel-formula, levenshtein-distance, fuzzy-logic

让我解释。

我要为一家公司做一些模糊匹配，所以 ATM 我用了一个 levenshtein 距离计算器，然后计算两个词的相似度百分比。如果术语的相似度超过 80%，则 Fuzzymatch 返回“TRUE”。

我的问题是我在实习，马上就要离开了。将继续这样做的人不知道如何将 excel 与宏一起使用，并希望我尽我所能实现我所做的。

所以我的问题是：无论函数效率如何，是否有任何方法可以在 Excel 中创建一个标准函数来计算我之前所做的，而不使用宏？

谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2016-02-25T18:21:40.377

如果你来谷歌搜索类似 `levenshtein distance google sheets`

我把它和[milot-midia](https://gist.github.com/milot-mirdita)对这个要点的代码注释放在一起（[https://gist.github.com/andrei-m/982927](https://gist.github.com/andrei-m/982927) - MIT 许可下的代码）

*   从标题菜单中的表格，`Tools`->`Script Editor`
*   为项目命名
    *   函数的名称（不是项目）将让您使用 func
*   粘贴以下代码

```
function Levenshtein(a, b) {
  if(a.length == 0) return b.length; 
  if(b.length == 0) return a.length;

  // swap to save some memory O(min(a,b)) instead of O(a)
  if(a.length > b.length) {
    var tmp = a;
    a = b;
    b = tmp;
  }

  var row = [];
  // init the row
  for(var i = 0; i <= a.length; i++){
    row[i] = i;
  }

  // fill in the rest
  for(var i = 1; i <= b.length; i++){
    var prev = i;
    for(var j = 1; j <= a.length; j++){
      var val;
      if(b.charAt(i-1) == a.charAt(j-1)){
        val = row[j-1]; // match
      } else {
        val = Math.min(row[j-1] + 1, // substitution
                       prev + 1,     // insertion
                       row[j] + 1);  // deletion
      }
      row[j - 1] = prev;
      prev = val;
    }
    row[a.length] = prev;
  }

  return row[a.length];
}
```

您应该能够从电子表格中运行它

`=Levenshtein(cell_1,cell_2)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-22T00:11:09.213

虽然对于任何大小合理的字符串都无法在单个公式中完成，但您*可以*单独使用公式来使用工作表计算字符串之间的 Levenshtein 距离。

这是一个可以处理最多 15 个字符的字符串的示例，它可以轻松扩展为更多：

[https://docs.google.com/spreadsheet/ccc?key=0AkZy12yffb5YdFNybkNJaE5hTG9VYkNpdW5ZOWowSFE&usp=sharing](https://docs.google.com/spreadsheet/ccc?key=0AkZy12yffb5YdFNybkNJaE5hTG9VYkNpdW5ZOWowSFE&usp=sharing)

这对于除了临时比较之外的任何东西都不实用，但它确实很好地展示了算法的工作原理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T13:29:08.857

查看先前计算 Levenshtein 距离的答案，我认为不可能将其创建为公式。

看看[这里的代码](https://stackoverflow.com/questions/4243036/levenshtein-distance-in-excel)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-17T12:04:48.843

实际上，我想我刚刚找到了解决方法。我将它添加到代码的错误部分...

添加这一行

```
 } else if(b.charAt(i-1)==a.charAt(j) && b.charAt(i)==a.charAt(j-1)){
    val = row[j-1]-0.33;  //transposition 
```

所以它现在显示

```
 if(b.charAt(i-1) == a.charAt(j-1)){
    val = row[j-1]; // match
  } else if(b.charAt(i-1)==a.charAt(j) && b.charAt(i)==a.charAt(j-1)){
    val = row[j-1]-0.33;  //transposition
  } else {
    val = Math.min(row[j-1] + 1, // substitution
                   prev + 1,     // insertion
                   row[j] + 1);  // deletion 
  } 
```

似乎可以解决问题。现在“biulding”的准确率为 92%，“bilding”的准确率为 88%。（而原始公式“建筑”只有 75%……尽管更接近正确的建筑拼写）

# c# - 注入 64 位 dll 进行处理的 C# 代码

> ID：11345032
> 
> 赞同：1
> 
> 时间：2012-07-05T13:10:29.030
> 
> 标签：c#, dll, x86-64, inject

我有一个将 32 位库（C++）注入到外部 32 位进程的代码：

```
[DllImport("kernel32")]
        public static extern IntPtr CreateRemoteThread(
          IntPtr hProcess,
          IntPtr lpThreadAttributes,
          uint dwStackSize,
          UIntPtr lpStartAddress, // raw Pointer into remote process  
          IntPtr lpParameter,
          uint dwCreationFlags,
          out IntPtr lpThreadId
        );

        ...

        public static bool InjectDLL(Process p, string dll)
        {
            IntPtr bytesout;
            Int32 LenWrite = dll.Length + 1;
            IntPtr AllocMem = (IntPtr)VirtualAllocEx(p.Handle, (IntPtr)null, (uint)LenWrite, 0x1000, 0x40);
            WriteProcessMemory(p.Handle, AllocMem, dll, (UIntPtr)LenWrite, out bytesout);
            UIntPtr Injector = (UIntPtr)GetProcAddress(GetModuleHandle("kernel32.dll"), "LoadLibraryA");
            IntPtr hThread = (IntPtr)CreateRemoteThread(p.Handle, (IntPtr)null, 0, Injector, AllocMem, 0, out bytesout);
            return true;
        } 
```

但是如何修复该代码以将 64 位库注入 64 位进程？上面的代码不适用于 64 位进程和 dll。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-06-01T18:52:05.023

您的***注入器***、目标进程和 DLL 都必须是 x64。

原因是因为这条线：

```
GetProcAddress(GetModuleHandle("kernel32.dll"), "LoadLibraryA"); 
```

这将返回 x86 LoadLibrary() 的地址而不是 x64 地址。

# java - Java中有多少字节的字节码有特定的方法？

> ID：11345034
> 
> 赞同：3
> 
> 时间：2012-07-05T13:10:34.217
> 
> 标签：java, jvm, bytecode

我最近在[Jon Masamitsu 的博客](https://blogs.oracle.com/jonthecollector/entry/did_you_know)上读到，巨大的方法（8000 字节的字节码）不是用 HotSpot 进行 JIT 编译的。

所以我的问题是：我如何（作为程序员）找出特定方法有多少字节的字节码？

JIT 编译器当然似乎知道。`.class`我可以从文件中提取这条信息吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-05T13:12:34.630

您可以使用`javap -c mypackage.MyClass`转储类的字节码（并查看每个方法的大小）

一般来说，在达到此限制之前，您应该知道方法太大而无法阅读和理解。恕我直言，它更多的是生成代码的问题。顺便说一句，方法中有 65536 个字节的硬限制。

# sql - 如何在 SQL Server 中以年月日格式显示确切年龄

> ID：11345041
> 
> 赞同：2
> 
> 时间：2012-07-05T13:10:57.450
> 
> 标签：sql, sql-server-2008, sql-server-2005

我被我的查询困住了。我有一张桌子叫`Patient`. 在此表中，有一列有耐心`DOB`。实际上我想显示患者的**确切**年龄。

例如：

```
PatName   DOB (MM/dd/yyyy)   Age
a         06/02/1947         65 Years 1 Month/s 3 Days 
b         07/10/1947         64 Years 11 Month/s 25 Days 
c         -----------        ----------------------- 
```

我想显示上述格式的年龄。

我已经用谷歌搜索过了，但没有人帮忙。

如果您对此有任何疑问，请发布。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T10:30:49.553

嗨检查下面的查询。

```
--DROP TABLE patient
CREATE TABLE patient(PatName varchar(100),DOB date,  Age varchar(100))
INSERT INTO patient
VALUES('a','06/02/1947',NULL),('b','07/10/1947',NULL),('c','12/21/1982',NULL)

;WITH CTE(PatName,DOB,years,months,days) AS 
(SELECT PatName,DOB,DATEDIFF(yy,DOB,getdate()),DATEDIFF(mm,DOB,getdate()),DATEDIFF(dd,DOB,getdate()) FROM patient)

--SELECT * FROM CTE

SELECT PatName,DOB,
      CAST(months/12 as varchar(5))+' Years'+CAST((months % 12) as varchar(5))+' month/s '+CAST(CASE WHEN DATEADD(MM,(months % 12),DATEADD(YY,(months/12),DOB)) <= GETDATE() then DATEDIFF(dd,DATEADD(MM,(months % 12),DATEADD(YY,(months/12),DOB)),GETDATE()) ELSE DAY(getdate()) END as varchar(5))+' days' as Age

FROM CTE 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T13:20:47.597

如果您点击[此链接](http://www.sqlteam.com/forums/topic.asp?TOPIC_ID=62729)，您会发现一个功能正是这样做的：

```
create function dbo.F_AGE_YYYY_MM_DD
    (
    @START_DATE     datetime,
    @END_DATE       datetime
    )
returns  varchar(10) 
as
/*
Function: F_AGE_YYYY_MM_DD

This function calculates age in years, months and days
from @START_DATE through @END_DATE and
returns the age in format YYYY MM DD.

Years is the number of full years between @START_DATE and @END_DATE.

Months is the number of full months since the last full year anniversary.

Days is the number of days since the last full month anniversary.

*/
begin

declare @AGE varchar(10)

declare @AGE_IN_YEARS       int
declare @AGE_IN_MONTHS  int
declare @AGE_IN_DAYS        int

-- Return null if @START_DATE > @END_DATE
if @START_DATE > @END_DATE begin return @AGE end

select
    @AGE_IN_YEARS = AGE_IN_YEARS,
    @AGE_IN_MONTHS = AGE_IN_MONTHS,
    @AGE_IN_DAYS =
        datediff(dd,
        dateadd(mm,AGE_IN_MONTHS,
        dateadd(yy,AGE_IN_YEARS,START_DATE))
        ,END_DATE)
from
(
select
    AGE_IN_MONTHS =
    case
    when AnniversaryThisMonth <= END_DATE
    then datediff(mm,dateadd(yy,AGE_IN_YEARS,START_DATE),END_DATE)
    else datediff(mm,dateadd(yy,AGE_IN_YEARS,START_DATE),END_DATE)-1
    end,
    *
from
(
select
    AGE_IN_YEARS =
    case
    when AnniversaryThisYear <= END_DATE
    then datediff(yy,START_DATE,END_DATE)
    else datediff(yy,START_DATE,END_DATE)-1
    end,
    *
from
(
select
    AnniversaryThisYear =
    dateadd(yy,datediff(yy,START_DATE,END_DATE),START_DATE),
    AnniversaryThisMonth =
    dateadd(mm,datediff(mm,START_DATE,END_DATE),START_DATE),
    *
from
(
select  START_DATE  = dateadd(dd,datediff(dd,0,@START_DATE),0),
    END_DATE    = dateadd(dd,datediff(dd,0,@END_DATE),0)
) aaaa
) aaa
) aa
) a

select @AGE =
    right('0000'+convert(varchar(4),@AGE_IN_YEARS),4) + ' ' +
    right('00'+convert(varchar(4),@AGE_IN_MONTHS),2) + ' ' +
    right('00'+convert(varchar(4),@AGE_IN_DAYS),2)

return @AGE

end
go

select [Age] = dbo.F_AGE_YYYY_MM_DD('2004-04-07','2006-02-03')

select [Age] = dbo.F_AGE_YYYY_MM_DD('2006-02-03','2006-02-03')

select [Age] = dbo.F_AGE_YYYY_MM_DD('2006-02-05','2006-02-03')

select [Age] = dbo.F_AGE_YYYY_MM_DD('1950-09-13', getdate()) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T13:22:49.430

```
DECLARE @date datetime, @tmpdate datetime, @years int, @months int, @days int
SELECT @date = '06/02/1947'

SELECT @tmpdate = @date

SELECT @years = DATEDIFF(yy, @tmpdate, GETDATE()) - CASE WHEN (MONTH(@date) > MONTH(GETDATE())) OR (MONTH(@date) = MONTH(GETDATE()) AND DAY(@date) > DAY(GETDATE())) THEN 1 ELSE 0 END
SELECT @tmpdate = DATEADD(yy, @years, @tmpdate)
SELECT @months = DATEDIFF(m, @tmpdate, GETDATE()) - CASE WHEN DAY(@date) > DAY(GETDATE()) THEN 1 ELSE 0 END
SELECT @tmpdate = DATEADD(m, @months, @tmpdate)
SELECT @days = DATEDIFF(d, @tmpdate, GETDATE())

print cast(@years as varchar(4)) + ' years, '+ cast (@months as varchar(2))+' months, '+ cast(@days as varchar(2)) + ' days' 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-28T11:26:38.077

这是解决方案

```
DATEDIFF(year, DOB, getdate()) - (CASE WHEN (DATEADD(year, DATEDIFF(year, DOB, getdate()), DOB)) > getdate() THEN 1 ELSE 0 END) 作为年份，
MONTH(getdate() - (DATEADD(year, DATEDIFF(year, DOB, getdate()), DOB))) - 1 作为月/秒，
DAY(getdate() - (DATEADD(year, DATEDIFF(year, DOB, getdate()), DOB))) - 1 作为天

```

# java - StreamingPathFilter 修剪空间

> ID：11345051
> 
> 赞同：0
> 
> 时间：2012-07-05T13:11:55.020
> 
> 标签：java, xml-parsing, xom

我使用[XOM](http://www.xom.nu/)库来解析和处理 .docx 文档。MS Word 将文本内容存储在段落标签 (<w:p>) 内的运行 (<w:r>) 中，并且经常将文本分成多个运行。有时，它们之间的每个单词和每个空格都是单独运行的。当我加载仅包含空格的运行时，解析器会删除该空格并将其作为空标记处理，因此，输出包含不带空格的文本。我如何强制解析器保留所有空格？我宁愿保留这个解析器，但如果没有解决方案，你能推荐一个替代方案吗？

这就是我调用解析器的方式：

```
StreamingPathFilter filter = new StreamingPathFilter("/w:document/w:body/*:*", prefixes);
Builder builder = new Builder(filter.createNodeFactory(null, contentTransform));
builder.build(documentFile);
...

StreamingTransform contentTransform = new StreamingTransform() {

   @Override
   public Nodes transform(nu.xom.Element node){
      <...process XML and output text...>
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T12:11:32.643

同时，感谢XOM 邮件列表中*Elliotte Rusty Harold的提示，我找到了这个问题的解决方案。*

首先，`StreamingPathFilter`实际上不是`nu.xom`包的一部分，它属于`nux.xom`.

其次，问题是由`StreamingPathFilter`. 当我更改代码以使用默认`Builder`构造函数时，缺少的空格出现在输出中。

仅用于文档，新代码如下所示：

```
Builder builder = new Builder();
nu.xom.Document doc = builder.build(documentFile);
context = XPathContext.makeNamespaceContext(doc.getRootElement());
Nodes nodes = doc.getRootElement().query("w:body/*", context);
for (int i = 0; i < nodes.size(); i++) {
    transform((nu.xom.Element) nodes.get(i));
}
...

private void transform(nu.xom.Element node){
    //process nodes
    ...
} 
```

# email - 从正文生成电子邮件主题是否安全？

> ID：11345052
> 
> 赞同：0
> 
> 时间：2012-07-05T13:11:56.463
> 
> 标签：email

我正在编写一个应用程序，它允许用户向一堆收件人发送纯文本电子邮件。我想尝试从邮件正文中生成这封电子邮件的主题，以避免需要主题字段

这样做是否足够安全？这些电子邮件是否可能违反垃圾邮件过滤器？

我已经在扫描整个电子邮件以查找垃圾邮件，因此主题中不会有任何内容

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T13:39:08.683

您可以下载广泛使用的垃圾邮件过滤器[Spamassassin](http://spamassassin.apache.org/)并在 *.cf 文件中搜索“SUBJ”，这将为您提供许多基于主题触发的垃圾邮件规则（如空主题、全部大写、坏词、非 ascii 字符的错误编码ETC）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T13:14:49.393

我建议如果邮件来自受信任的来源，那么就没有问题。另一方面，因为邮箱知道主题是自动生成的，所以对他们来说并不重要。第三件事是您需要检查电子邮件过滤器遵循的准则。查看一些开源邮件过滤器。

# javascript - document.getElementById('id') 问题

> ID：11345059
> 
> 赞同：0
> 
> 时间：2012-07-05T13:12:11.273
> 
> 标签：javascript, jquery, getelementbyid

伙计们，

我在我的页面（[http://playdota.thilisar.cz](http://playdota.thilisar.cz)）上有一个 JavaScript 文件（下面的代码），它必须具有修改图标边缘的效果（实际上，它必须加载新图片）并加载信息（到目前为止只有纯文本）在 mouseover 事件中进入 ID 为“info”的 div；在 mouseout 事件上，它必须将原始图片加载到相同的位置。但它只写入信息并用“[object Object]”文本替换图标。

我希望，你明白这一点，因为我的英语不是很好。

感谢您的回答。

```
function showInfo(id){                     //Using jQuery 1.7.2
  document.getElementById('ses').innerHTML=$(function(){
    $.ajax({
        url: "sentinel_str/"+id+"-info.html"
    }).done(function(data){
        $("#info").html(data)
    })
    $("#ses").find("li").mouseover(function(){
        $id=$(this).find("img").attr("id")
        $(self.document[$id].src='look/icons/'+$id+'_hover.jpg')
    })
    $("#ses").find("li").mouseout(function(){
        $id=$(this).find("img").attr("id")
        $(self.document[$id].src='look/icons/'+$id+'.jpg')
    })
})}; 
```

# 关闭感谢奶酪沃洛克的回答

## 谢谢大家，谁试图帮助我。

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:20:11.083

您正在将元素的 innerHTML 设置为 jquery 对象的返回值。实际上，您是说将此函数的“toString”值作为 HTML 的内容。

你的意思是有吗？除非我读错了。document.getElementById('ses').innerHTML=$(function(){

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T13:27:56.207

下面编写的代码将解决您的问题，甚至很短。检查一次。

```
var id;
$('#ses').find('li').each(function(){
   $(this).mouseover(function(){
    var image=$(this).find('img');
      id=$(this).find('img').attr('id');
     $('#id').hide();
$(this).append('<div>'+id+'</div>');
});
$(this).mouseout(function(){
$(this).html('');
$('#id').show();
});

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T13:16:48.980

“mouseover”和“mouseout”处理程序对我来说看起来很困惑。根本不需要打电话`getElementById()`；你正在使用 jQuery，你可以找到`<img>`它的标签。一旦你找到了它们，你就找到了它们；无需再次找到它们。

```
$("#ses").find("li").mouseover(function(){
    $(this).find('img').prop('src', function() {
      return 'look/icons/' + this.id + '_hover.jpg';
    });
})
$("#ses").find("li").mouseout(function(){
    $(this).find('img').prop('src', function() {
      return 'look/icons/' + this.id + '.jpg';
    });
}) 
```

传递一个函数作为 的第二个参数`.prop`让您可以直接使用 DOM 元素状态计算属性的值。

此外，您可能想使用“mouseenter”和“mouseleave”，它们由 jQuery 清理，比“mouseover”和“mouseout”更可靠。

*编辑*——哇，我只是“缩小”并注意到所有这些代码都被设置为一个`innerHTML`值，这没有任何意义。看起来像是猖獗的复制/粘贴之类的情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T13:23:54.057

你得到`[object Object]`是因为你将一个 HTML 元素的内容设置为一个`jQuery`对象。如果你想调用一段 jQuery 代码，你不需要将它包装在`$()`. 您可以直接调用代码。所以摆脱这一行：

```
document.getElementById('ses').innerHTML=$(function(){ 
```

这行：

```
}) 
```

当您调用`showInfo(id)`.

# java - 为什么必须在构造函数完成之前初始化最终变量？

> ID：11345061
> 
> 赞同：45
> 
> 时间：2012-07-05T13:12:13.777
> 
> 标签：java

为什么必须在构造函数完成之前初始化最终变量？

```
public class Ex
{
  final int q;
} 
```

当我编译这段代码时，我得到这样的错误

*错误：变量 q 可能尚未初始化*

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-05T13:26:34.977

**官方**的原因是它是由[Java Language Specification 8.3.1.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.3.1.2)定义的：

> **必须在声明它的类**的每个构造函数的末尾明确分配一个空白的最终实例变量；**否则会发生编译时错误。**

 **空白 final 是一个 final 变量，其声明缺少初始化程序（即您所描述的）。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-07-05T13:14:21.510

Because `final` prevents you from modifying variables, but it has to be initialized at some point, and the constructors is the right place to do so.

In your case, it would be called a [**blank final**](https://en.wikipedia.org/wiki/Final_%28Java%29#Blank_final) because it is not initialized when declared.

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-07-05T13:16:25.580

变量的值`final`只能设置一次。构造函数是类代码中唯一可以保证这一点成立的地方；构造函数只为一个对象调用一次，但其他方法可以调用任意次数。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-07-05T13:20:21.810

必须`final`在声明或构造函数中初始化变量。

如果在构造函数返回时它还没有被初始化，它可能永远不会被初始化，并且可能仍然是一个未初始化的变量。编译器无法证明它将被初始化，因此会引发错误。

这个[维基百科摘录](http://en.wikipedia.org/wiki/Final_%28Java%29#Final_variables)很好地解释了它：

> 最终变量只能通过初始化程序或赋值语句初始化一次。它不需要在声明时初始化：这称为“空白最终”变量。必须在声明它的类的每个构造函数的末尾明确分配一个类的空白最终实例变量；同样，必须在声明它的类的静态初始化程序中明确地分配一个空白的 final 静态变量：否则，两种情况都会发生编译时错误。（注意：如果变量是引用，这意味着该变量不能重新绑定到引用另一个对象。但它引用的对象仍然是可变的，如果它最初是可变的。）

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-07-05T13:18:34.040

`final`应用于字段的关键字具有以下两种效果之一：

*   在原语上，它防止原语的值被改变（一个 int 不能改变值）
*   在一个对象上，它防止“变量的值”，即对对象的引用，被改变。也就是说，如果你有 a `final HashMap<String,String> a`，你将只能设置一次，你将不能再做`this.a=new HashMap<String,String>();`一次，*但*没有什么能阻止你做`this.a.put("a","b")`,s 因为那不会修改引用，只是对象的内容。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-05T13:14:00.343

The `final` modifier prevents your from changeing the variables value, hence you have to initialize it where you declare it.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-05T13:14:51.263

`Final`修饰符不允许**更改您的变量值**。所以你需要在某个地方给它赋值，而构造函数是你在这种情况下必须这样做的地方。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-05T13:15:46.527

语言规范包含关于最终变量和字段属性的特定保证，其中之一是正确构造的对象（即构造函数成功完成的对象）必须初始化其所有最终实例字段并且对所有线程可见。因此，编译器分析代码路径并要求您初始化这些字段。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-06-17T13:17:28.557

如果一个实例变量用 final 关键字声明，则意味着它以后不能被修改，这使它成为一个常量。这就是为什么我们必须使用 final 关键字初始化变量。初始化必须显式完成，因为 JVM 不为最终实例变量提供默认值。最终实例变量必须在声明时初始化，例如：

```
class Test{
   final int num = 10;
   } 
```

或者它必须在实例块中声明，例如：

```
class Test{
 final int x;
  {
   x=10;
  }
} 
```

或者必须在构造函数 COMPLETION 之前声明它，例如：

```
class Test{
 final int x;
  Test(){ 
   x=10;
  }
} 
```

请记住，我们可以在构造函数块中对其进行初始化，因为初始化必须在构造函数完成之前完成。**

# jquery - 每次点击链接时如何重新加载数据？

> ID：11345062
> 
> 赞同：0
> 
> 时间：2012-07-05T13:12:17.677
> 
> 标签：jquery, function, dom-events, reload

```
var switchit="show";
$('.swap_ref').click(function(){
    if(switchit=="show"){
        get_main_times();
        $('.x1').hide();
        $('.swap_ref').text("Show Main Times");
        $('.x2').show();
        switchit="hide";
    }
    else{
        $('.x2').hide();
        $('.swap_ref').text("Show Sundry Times");
        $('.x1').show();
        switchit="show";
    }
})

function get_main_times(){
        //$('.x2').html("");
        var data="agent_id="+agent_id+"&key=1";//get main_dates
        $.ajax({
            type:"POST",
            url:"admin_includes/get_sundry_details.php",
            data:data,
            success:function(html){

                var element;
                var split_times=html.split("^");
                var split_times_count=split_times.length-1;
                for(var a=0;a<split_times_count;a++)
                {
                    element=split_times[a].split("|");
                    day=element[0];
                    hour=element[1];

                    $('.day_holder1a').each(function(){
                    var get_day=$(this).data('day');
                    var get_time=$(this).data('time_slot');
                    if(get_day==day&&get_time==hour)
                    {
                        $(this).css('background-color', 'red').text("");
                        //$(this).data('state', '0');
                    }

                    });
                }

            }//last function
        })//end ajax

    } 
```

上面的代码从一个可编辑表切换到另一个。我遇到的问题是，每次用户从一个表切换到另一个表时，我都需要强制 ajax 函数运行。

在两个表之间切换没有问题 - 只是似乎需要对表 2 (.x2) 进行某种重置，因为它只是维护第一次加载时的原始数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T13:27:06.053

我似乎找到了问题 - 非常基本

返回假；

在函数结束时会导致我想要的效果。

# postgresql - PostgreSQL concat an int value with a numeric field

> ID：11345065
> 
> 赞同：2
> 
> 时间：2012-07-05T13:12:22.850
> 
> 标签：postgresql, concatenation

I would like to do something like :

```
update cli_pe set nm_cli_espace_client = 9 || nm_cli_espace_client
 where nm_cli_pe = 7006488 
```

`nm_cli_espace_client` is `numeric(0,8).`

How to make it easy?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T13:27:44.303

```
UPDATE cli_pe
   SET nm_cli_espace_client = '9' || CAST(nm_cli_espace_client AS text)
 WHERE nm_cli_pe = 7006488; 
```

如果您需要一个结果数字，则`CAST`返回结果：

```
... SET nm_cli_espace_client =
      CAST('9' || CAST(nm_cli_espace_client AS text) AS integer) 
```

您的问题与此相同：[concat two int values in postgresql](https://stackoverflow.com/questions/11197000/concat-two-int-values-in-postgresql)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T15:22:56.193

正如@vyegorov 所展示的那样，可以通过文本连接来将数字前缀到数字上，但它也很容易作为数学运算来完成。

**编辑**：在 PostgreSQL 中很容易，但*实际上*并不快。尽管这种方法在使用 C 和 Java 等语言对整数类型进行编程时*要快得多，但在使用 int 时在**PostgreSQL*下的 SQL 中似乎要慢得多，而对于`NUMERIC`. 可能是整数的函数调用开销，以及使用数字时数字数学的一般缓慢。无论如何，您最好按照@vyegorov 的回答将字符串连接为字符串。

我将保留其余的答案以供大笑；这是一个很好的例子，说明了为什么您应该测试解决问题的多种方法。

一种数学方法是：

```
nm_cli_espace_client = 9*pow(10,1+floor(log(nm_cli_pe))) +  nm_cli_espace_client; 
```

可能有比这更聪明的方法。它所做的基本上是产生 10 的幂，比被添加的数字多一位，并将输入乘以它。

```
regress=# SELECT (pow(10,1+floor(log( 7006488 ))) * 9) + 7006488;
         ?column?          
---------------------------
 97006488.0000000000000000
(1 row) 
```

我希望有更聪明的方法来数学上指出我；我确定有一个。

无论如何，事实证明你不想在 PostgreSQL 中这样做。使用整数类型会慢一些：

```
regress=# explain analyze select ('9'||x::text)::int from testtab;
                                                    QUERY PLAN                                                     
-------------------------------------------------------------------------------------------------------------------
 Seq Scan on testtab  (cost=0.00..26925.00 rows=1000000 width=4) (actual time=0.026..293.120 rows=1000000 loops=1)
 Total runtime: 319.920 ms
(2 rows) 
```

对比

```
regress=# explain analyze select 9*pow(10,1+floor(log(x)))+x from testtab;
                                                    QUERY PLAN                                                     
-------------------------------------------------------------------------------------------------------------------
 Seq Scan on testtab  (cost=0.00..34425.00 rows=1000000 width=4) (actual time=0.053..443.134 rows=1000000 loops=1)
 Total runtime: 470.587 ms
(2 rows) 
```

对于`NUMERIC`类型，文本方法没有太大变化：

```
regress=# explain analyze select ('9'||x::text)::int from testtab;
                                                    QUERY PLAN                                                     
-------------------------------------------------------------------------------------------------------------------
 Seq Scan on testtab  (cost=0.00..17467.69 rows=579675 width=32) (actual time=0.039..368.980 rows=1000000 loops=1)
 Total runtime: 396.376 ms
(2 rows) 
```

但是即使我在取对数后将其转换`NUMERIC`为，基于数学的方法也非常慢。`int`显然，取 a 的对数`NUMERIC`很慢——这并不奇怪，但我没想到它会*这么*慢：

```
regress=# explain analyze select 9*pow(10,1+floor(log(x)::int))+x from testtab;

                                                     QUERY PLAN                                                      
---------------------------------------------------------------------------------------------------------------------
 Seq Scan on testtab  (cost=0.00..18916.88 rows=579675 width=32) (actual time=0.253..86740.383 rows=1000000 loops=1)
 Total runtime: 86778.511 ms
(2 rows) 
```

简短版本：通过文本连接来完成。在 (PostgreSQL) SQL 中，基于数学的方法对于 来说要慢 200 倍以上`NUMERIC`，而对于整数则要慢 50%。但是，对于整数数学便宜而字符串操作/内存分配昂贵的语言来说，这是一个方便的技巧。

# php - Populating select and input box based on a table using PHP and MYSQL

> ID：11345067
> 
> 赞同：0
> 
> 时间：2012-07-05T13:12:27.987
> 
> 标签：php, mysql

I have a table cene_pretplatne_stanarske which has two columns 'lice' and 'cene'. The first column 'lice' should populate a select, dropdown menu, and the other column, 'cene', should populate a input box, based on the selection of the dropdown menu. I tried this:

```
<?php

mysql_connect('localhost', 'xxxxx', 'xxxxxxx');
mysql_select_db('xxxxxxx');
mysql_set_charset('utf8');
$sql = "SELECT * FROM cene_pretplatne_stanarske";
$result = mysql_query($sql);
$row = mysql_fetch_assoc($result);
$cena = $row ["cena"];
$sql = "SELECT lice FROM cene_pretplatne_stanarske WHERE lice LIKE 'C0%'";
$result = mysql_query($sql);

echo "<select name='lice' onchange='document.getElementById(\'form1\').submit();'>";
while ($row = mysql_fetch_array($result)) 
{
echo "<option value='" . $row['lice'] . "'>" . $row['lice'] . "</option>";
}
echo "</select>";
echo "<input type='text' value='$cena' />";
?> 
```

but it returns empty select box, and the input box with the value of the first row of 'cene' column. Please help.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T13:54:27.733

检查返回了多少（如果有）结果：

```
$i=0;

while ($row = mysql_fetch_assoc($result)) {
    echo "<option value='" . $row['lice'] . "'>" . $row['lice'] . "</option>";
    $i++;
} 
```

`echo $i`结束后`</select>`

# android - Downloading pdf file in SD card using Phone Gap in android

> ID：11345073
> 
> 赞同：1
> 
> 时间：2012-07-05T13:12:56.180
> 
> 标签：android, cordova

I want to download pdf file in my android phone using phone gap.can any one help me to download it? i have used [https://github.com/phonegap/phonegap-plugins/tree/master/Android/Downloader](https://github.com/phonegap/phonegap-plugins/tree/master/Android/Downloader) plugin but it is not working.If anybody have any other downloading method then please let me know.. Thanks in advance..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T18:00:08.413

您可以使用 phonegap 文件 api 从服务器下载您想要的文件。检查文档以获取更多详细信息 - [FileTransfer API](http://docs.phonegap.com/en/1.7.0/cordova_file_file.md.html#FileTransfer)

这是一个示例代码，用于下载 pdf 文件并将其保存在您的 sdcard 中。

```
window.appRootDirName = "download_test";
document.addEventListener("deviceready", onDeviceReady, false);

function onDeviceReady() {
    console.log("device is ready");
    window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, gotFS, fail);
}

function fail() {
    console.log("failed to get filesystem");
}

function gotFS(fileSystem) {
    console.log("filesystem got");
    window.fileSystem = fileSystem;
    fileSystem.root.getDirectory(window.appRootDirName, {
        create : true,
        exclusive : false
    }, dirReady, fail);
}

function dirReady(entry) {
    window.appRootDir = entry;
    console.log("application dir is ready");
}

downloadFile = function(){
    var fileTransfer = new FileTransfer();

    var url = "http://www.irs.gov/pub/irs-pdf/fw4.pdf";
    var filePath = window.appRootDir.fullPath + "/test.pdf";

    fileTransfer.download(
        url,
        filePath,
        function(entry) {
            alert("download complete: " + entry.fullPath);
        },
        function(error) {
            alert("download error" + error.source);
        }
    );
} 
```

完整源代码 - [https://gist.github.com/3055240](https://gist.github.com/3055240)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-23T02:27:37.483

**** 您必须添加插件文件 API，phonegap 中的文件传输 (3.0+)**

```
function downloadPDF(url, fileName, folder) {
    var fileTransfer = new FileTransfer();
    var uri = encodeURI(url);
    var fileURL = folder + fileName;

    fileTransfer.download(
        uri,
        fileURL,
        function(entry) {
            alert("complete");
            console.log("download complete: " + entry.toURL());
        },
        function(error) {
            alert("upload error code" + error.code);
            console.log("download error source " + error.source);
            console.log("download error target " + error.target);
            console.log("upload error code" + error.code);
        },
        false,
        {
            headers: {
                "Authorization": "Basic dGVzdHVzZXJuYW1lOnRlc3RwYXNzd29yZA=="
            }
        }
    );
} 
```

在链接

```
<a href="#" 
    onclick="
    downloadPDF(
        'http://cran.r-project.org/doc/manuals/R-intro.pdf',
        'R-intro.pdf',
        '/sdcard/nuuoeiz/'
    );">
    Download PDF</a> 
```

# google-visualization - Google image pie chart labels not working

> ID：11345082
> 
> 赞同：0
> 
> 时间：2012-07-05T13:13:24.183
> 
> 标签：google-visualization

I am using the old static Google Chart API to generate a pie chart. The URL I am using is

```
https://chart.googleapis.com/chart?cht=p&chs=150x150&chd=t:1,2,3&chl=a|b|c 
```

This URL contains the required parameter – chl – for labels, specified in the documentation (https://developers.google.com/chart/image/docs/gallery/pie_charts#pie_chart_label)

However, the image comes back with only lines pointing to the slices, not labels. Any help would be appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T15:40:39.870

问题已解决：`chs`参数中的宽度太小，标签无法显示。

# c++ - Encrypt QDataStream with AES

> ID：11345088
> 
> 赞同：0
> 
> 时间：2012-07-05T13:13:33.800
> 
> 标签：c++, qt, crypto++

im writing a Qt application on linux (Qt 4.8.1) which writes data byte by byte to a QDataStream object. The data stream goes into a file. Now i need to encrypt this data with AES-256. I choose crypto++ lib for this purpose but im struggling with the implementation.

Does anybody know if it is possible at all to encrypt a QDataStream with the given filter classes of crypto++ lib?

greetz maggie

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T18:30:27.497

重新实现 QIODevice 或更好的 QFile 可能会很有趣......特别是我会重新实现：

```
virtual qint64 readData(char* data, qint64 maxSize) = 0;
virtual qint64 readLineData(char* data, qint64 maxSize);
virtual qint64 writeData(const char* data, qint64 maxSize) = 0; 
```

这样，您应该能够透明地使用 QDataStream。

# c++ - 指向模板类中成员函数的指针

> ID：11345092
> 
> 赞同：2
> 
> 时间：2012-07-05T13:13:54.893
> 
> 标签：c++, templates, function-pointers

我想消除使用指向成员函数的指针的决策所消耗的过程。我需要为用户提供选项来打开或关闭在有限的连续域上定义的功能的域检查。

不使用模板时可以有指向成员函数的指针。但在这里我必须概括我的实现。

具体来说，我的班级中有三个成员函数：

1.`value`是一个成员函数，返回值由`function`指向的成员计算得出。`function`是一个指向`checkedValue`或的函数指针`uncheckedValue`。2.`checkedValue`是一个成员函数，如果输入在指定范围内，则计算并返回结果。否则抛出 std::domain 错误。3.`uncheckedValue`计算并返回结果，与域无关。

```
template <typename T>
class IO
{
private:
    typedef T (IO<T>::*functionPtr)(const std::string& name, const T& input) const;
    functionPtr function;
    bool domainValidation;
    void setDomainValidation(const bool& value);
    //...
public:
    // ...
    T value(const std::string& name, const T& input) const;
    T uncheckedValue(const std::string& name, const T& input) const;
    T checkedValue(const size_t& index, const T &input) const;
};

// Implementation:

template <typename T>
void IO<T>::setDomainValidation(const bool &value)
{
    domainValidation = value;
    if(domainValidation)
    {
        // function points to checkedValue()
        function =  & IO<T>::checkedValue; // Here I got undefinded reference error
    }
    else
    {
        // function points to uncheckedValue()
    }
}

template <typename T>
T IO<T>::value(const string &name, const T &input) const
{
    return (this->*function)(name,input);
}

template <typename T>
T IO<T>::uncheckedValue(const string &name, const T &input) const
{
    // simply calculate and return the result
}

template <typename T>
T IO<T>::checkedValue(const string &name, const T &input) const
{
    // if input is in domain, calculate and return the result
    // else throw a std::domain error
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T13:39:50.210

这对我来说看起来像是一个错字：函数指针的函数签名是

```
...(const std::string &, const T &) ... 
```

checkedValue 的签名是

```
...(const size_t &, const & T) ... 
```

如果更改签名以匹配函数指针，则代码示例将为我编译。关于性能：您确定（如已分析或查看程序集）值方法中的简单 if 子句比通过函数指针的（可能）间接更差吗？显然，无法内联对 checked 或 uncheckedValue 的调用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T13:19:22.620

你的函数有签名

```
T checkedValue(const size_t& index, const T &input) const; 
```

但不是

```
T IO<T>::checkedValue(const string &name, const T &input) const; 
```

注意第一个参数的类型之间的区别。

# asp.net - How to create ASP.Net Control In .aspx file dynamicly?

> ID：11345093
> 
> 赞同：0
> 
> 时间：2012-07-05T13:13:58.197
> 
> 标签：asp.net

I have to create a series of controls(Hyperlink and Label) in .aspx file.The most important thing is that I have to control the ID of the generated control.

I write some code in my .aspx file like this:

```
<%for (int i =1; i <= 5; i++){%>
      <asp:HyperLink ID="<%#GetContorlName("HyperLink",i,1)%>" CssClass="c083e01" runat="server">HyperLink</asp:HyperLink>
 <%} %> 
```

GetContorlName() is a function defined in codebehind file which return a string represent ID.

However,This doesn't work,It cannot compile.

Who can help me to fulfill this task?Please Remember I have to dynamically create controls in .aspx file,not in .cs file.

Any help will be appreciated!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T13:51:13.020

使用数据绑定，并将控件嵌套在转发器中。请记住，Enumerable.Range() 可以是有效的数据源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T13:49:07.577

使用客户端 ID。

[http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientid.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientid.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T13:57:07.287

为您的超链接尝试此方法

```
TextBox txt = new TextBox();
txt.ID = "strtxtbox";
txt.CssClass = "CSS1";
StringBuilder sb = new StringBuilder();
StringWriter writer = new StringWriter(sb);
HtmlTextWriter htmlWriter = new HtmlTextWriter(writer);
txt.RenderControl(htmlWriter); 
```

//lbl是一个aspx标签

```
lbl.text += @"<td style='width: 5%;'>" + sb.ToString() + "</td>"; 
```

# node.js - 在 NodeJS 中管道流输出到 Socket.IO

> ID：11345096
> 
> 赞同：2
> 
> 时间：2012-07-05T13:14:05.900
> 
> 标签：node.js, curl, stream, socket.io, wget

我打开 curl 在后台下载一些 ISO 并通知客户端进度。由于 curl、wget 和许多其他清除输出。我希望在浏览器上看到 curl 的输出。我不能准确地管道它，因为浏览器不会理解，它基本上是通过 ncurses 或我不知道的东西来改变输出数据。我该如何解决这个问题？

```
var spawn = require('child_process').spawn,
    curl    = spawn('curl', ['-oubuntu.iso','http://releases.ubuntu.com/10.04/ubuntu-10.04.4-desktop-i386.iso']);

curl.stderr.pipe(process.stdout); // Works perfectly:

  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  1  694M    1 13.5M    0     0  2193k      0  0:05:24  0:00:06  0:05:18 2439k 
```

但`process.on("data")`不一致，随机数换行等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:48:17.850

好吧， process.stderr.on('data') 实际上正在产生正确的数据，所以说它不一致是错误的。

似乎 curl 只是使用进程的 stderr 流更新进度状态的更改部分，这就是为什么每次触发事件时都会获得不同的数据。

我找不到解决方法（检查[http://curl.haxx.se/docs/manpage.html](http://curl.haxx.se/docs/manpage.html)），你显然不能告诉 curl 以“原始”方式报告进度。

提示：使用 curl 标志时`-#`，每次触发 'data' 事件时，您都会获得百分比进度。

# jquery - Colorbox: Width and height from URI

> ID：11345098
> 
> 赞同：0
> 
> 时间：2012-07-05T13:14:08.077
> 
> 标签：jquery, colorbox

I have another colorbox specific question (http://wakawaka.reh-kendermann.df-kunde.de/media/media)

When I load the media page via ajax i have to reinitialise colorbox. this is working (it´s the vimeo-vid):

```
$("#content-page a.colorbox-load").colorbox({iframe:true, innerWidth:580, innerHeight:326}); 
```

The link looks like:

```
<a href="http://player.vimeo.com/video/26436619?height=326&width=580&iframe=true&show_title=0&show_byline=0&show_portrait=0&autoplay=1" class="colorbox-load"><img width="250" src="http://109.239.49.88:12001/files/uploads/project_data_files_2/waka_video.jpg"></a> 
```

but when I only use

```
$("#content-page a.colorbox-load").colorbox({iframe:true}); 
```

it´s not working. shouldn´t colorbox use width and height from the link?

Greetings Lars

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T14:22:25.487

不，它不应该从 URL 中获取这些值。也许你想到的是使用 URL 参数的 Thickbox。

# android - 如何检查自定义 listView 中的 ImageView 或 Gallery 是否单击？

> ID：11345108
> 
> 赞同：0
> 
> 时间：2012-07-05T13:14:42.257
> 
> 标签：android, android-listview, onclicklistener

我有两个习惯`ListViews`。其中一个由每个项目中的`ImageView`和组成。`TextViews`另一个由 a`Gallery`和 a组成`TextView`。当我单击时，`ImageView`我希望该图片的更大版本出现在屏幕上。对于画廊，当我单击其中的一个项目时，`Gallery`屏幕`Gallery`上会出现一个带有更大版本的图片。

我可以`ListView`用`onItemClickedListener`. 但是，我无法理解`TextView`或`ImageView`单击。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T13:37:36.470

在`public View getView(int position, View convertView, ViewGroup parent) {`您的 CoustomAdapter 中

```
TextView tv=convertView.findViewById(R.id.yourTexView);
        tv.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO What ever you want

            }
        }); 
```

# java - 带逗号的 Java 正则表达式

> ID：11345110
> 
> 赞同：-2
> 
> 时间：2012-07-05T13:14:47.180
> 
> 标签：java, regex

我正在尝试为此模式编写正则表达式：

```
 String word="113(112,9)"; 
```

它应该只包含数字。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:20:15.947

以下应该可以工作，没有组

`^[0-9]+\([0-9]+,[0-9]+\)$`

并与团体

`^([0-9]+)\(([0-9]+),([0-9]+)\)$`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T13:23:45.057

如果您的模式中的位数是固定的，您可以这样做：

```
Pattern p = Pattern.compile("\\d{3}\\(\\d{3},\\d\\)");
System.out.println(p.matcher("113(112,9)").matches()); 
```

如果位数可以变化，请为`{...}`元素添加限制。例如，如果数字的初始运行必须是三到七位数，请使用`\\d{3,7}`

# android - 如何在取消拍照时进入上一个屏幕？

> ID：11345116
> 
> 赞同：0
> 
> 时间：2012-07-05T13:15:02.603
> 
> 标签：android, android-camera

我正在使用意图调用相机和 onresult 来获取捕获的图像，但如果没有拍摄图像（按取消），我想回到我调用相机的屏幕

我现在正在使用这个....但是有没有更好的方法来做到这一点：

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {

        if (!(data == null || resultCode == 0)) {

            if (requestCode == CAMERA_REQUEST) {

                photo = (Bitmap) data.getExtras().get("data");
                imageView.setImageBitmap(photo);
            }
        } else {

            Intent intent = new Intent(ImageUploaderActivity.this,
                    ImageUploaderActivity.class);
            startActivity(intent);
            finish();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:45:07.643

我在我的应用程序中做类似的事情，这是我的代码：

```
 if (resultCode == RESULT_OK) {
        if (data != null) {
            //When all was ok
        }
    } else if (resultCode == RESULT_CANCELED) {
        //When it was canceled, when I press a back button while in camera app.
    } else {
        //Some other result
    } 
```

# javascript - jQuery 包含多个字符串优化

> ID：11345118
> 
> 赞同：0
> 
> 时间：2012-07-05T13:15:15.337
> 
> 标签：javascript, jquery, optimization, contains

我正在为数百个类似页面编写 Greasemonkey 脚本。

并且想要在 $("#cont > h2")

所以我尝试了：

```
var 1stgroup = new Array(40)
1stgroup [0] = $("#cont > h2:contains('AA')")
1stgroup [1] = $("#cont > h2:contains('AB')")
1stgroup [2] = $("#cont > h2:contains('AC')")
...
1stgroup [39] = $("#cont > h2:contains('BN')")

for (i =0; i < 40 ; i++) {
    if (1stgroup.text())       {
    //do something here
    };
}; 
```

而不是第2~7组。

它有效，但看起来多余......

我该如何优化它？

对不起我的英语不好，感谢每一个回复。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T13:22:16.270

*   DOM 遍历是 JavaScript 中最慢的部分，因此尽可能少地遍历 DOM 是有意义的。
*   `:contains()`是一个 Sizzle 扩展，不是 CSS3 的一部分，因此没有被浏览器优化。它会很慢。

考虑到这一点，我会做这样的事情；

```
var matches = ['AA', 'AB', 'AC'];

$('#cont > h2').filter(function () {
    var text = $(this).text();

    for (var i=0;i<matches.length;i++) {
        if (text.indexOf(matches[i]) !== -1) {
            return true;
        }
    }

    return false;
}).each(function () {
    // do something with each of these
}); 
```

您可以这样做的另一件事是对`matches`数组进行排序，然后使用比线性搜索更智能的搜索算法（例如[二进制搜索](http://en.wikipedia.org/wiki/Binary_search_algorithm)）来检测文本是否匹配。

# javascript - Google Maps V3：比较多个点的距离

> ID：11345119
> 
> 赞同：0
> 
> 时间：2012-07-05T13:15:16.980
> 
> 标签：javascript, google-maps, google-maps-api-3

我想创建一个自动计算多个不同点之间距离的谷歌地图。

例如：我有地图和 3 个点 A-shop1、B-shop2 和 C-customer。我想在一张地图上显示点 C --> A 之间的距离，以及与点 C --> B 之间的第二距离（不是台阶，两条不同的道路）。我想显示哪个商店更近。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T13:47:26.130

使用谷歌的距离矩阵 api。[https://developers.google.com/maps/documentation/distancematrix/](https://developers.google.com/maps/documentation/distancematrix/)

# java - OpenLDAP 和 UnboundID：事务的使用

> ID：11345123
> 
> 赞同：1
> 
> 时间：2012-07-05T13:15:24.270
> 
> 标签：java, transactions, ldap, openldap, unboundid-ldap-sdk

我使用 OpenLDAP 作为 LDAP 服务器和 UnboundID 通过 Java 代码与之交互。我需要处理实体 A 的某个实例 X 的删除，实体 B 的几个其他实例 Y1、.. Yn 在其上逻辑链接。这意味着我首先需要删除 B (Y1, ... Yn) 的所有实例，然后我还想删除 X。我希望能够使用事务来执行此操作，以便中止事务如果在删除 Y1,..Yn 之一时出现问题，并且有可能回滚。我尝试按照以下示例进行操作：

[https://www.unboundid.com/products/ldap-sdk/docs/javadoc/com/unboundid/ldap/sdk/extensions/StartTransactionExtendedRequest.html](https://www.unboundid.com/products/ldap-sdk/docs/javadoc/com/unboundid/ldap/sdk/extensions/StartTransactionExtendedRequest.html)

不过，我得到的是一个 LDAPException，表示不支持扩展操作。我该如何处理交易？我认为 OpenLDAP 确实支持事务...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T02:53:27.743

我并没有真正了解 OpenLDAP 的最新信息，但我听到的最后一个消息是 OpenLDAP 尚未添加对 RFC 5805 中描述的 LDAP 事务的支持。但是，您应该能够通过查看 OpenLDAP 来检查这一点根 DSE。在 UnboundID LDAP SDK for Java 中，您可以使用如下代码执行此操作：

```
 RootDSE rootDSE = ldapConnection.getRootDSE();
 boolean supportsTransactions = rootDSE.supportsExtendedOperation(
      StartTransactionExtendedRequest.START_TRANSACTION_REQUEST_OID); 
```

如果 OpenLDAP 服务器还不支持事务，那么您可能无法做任何事情来使其真正原子化并且在遇到问题时能够回滚。如果 OpenLDAP 支持实验性 LDAP 无操作控制（我认为确实如此），那么您可以使用 com.unboundid.ldap.sdk.experimental.DraftZeilengaLDAPNoOp12RequestControl 类将其包含在删除请求中，以查看服务器是否会接受删除所有条目，然后只有在看起来它们都将成功时才继续删除。否则，您可以在应用程序中保留日志，以便在发生故障时报告哪些内容已删除，哪些内容未删除。

尼尔

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T07:02:14.810

你根本不应该做这种事情。如果您告诉 OpenLDAP 'refint' 参照完整性模块维护这些属性的参照完整性，它可以为您执行二次删除，因此您所要做的就是主要删除。

# php - DOMDocument 如何

> ID：11345130
> 
> 赞同：0
> 
> 时间：2012-07-05T13:15:47.193
> 
> 标签：php, zend-framework, special-characters, domdocument

简单的问题，如何用 DOMDocument 做到这一点？

```
<backend>
    <type value="File" />
    <cache_dir>
        <zf:const zf:name="APPLICATION_PATH"/>.cache</cache_dir>
</backend> 
```

没有以下结果：

```
<backend>
    <type value="File"/>
    <cache_dir>&lt;zf:const zf:name="APPLICATION_PATH"/&gt;.cache</cache_dir>
</backend> 
```

这是我所做的：

```
$backendNode = $paramsNode->appendChild($cnfXml->createElement('backend'));
$backendNode->appendChild($cnfXml->createElement('type'))->setAttribute('value', 'File');
$pathnode = $backendNode->appendChild($cnfXml->createElement('cache_dir'));
$pathnode->appendChild($cnfXml->createElement('zf:const'))->setAttribute('zf:name', 'APPLICATION_PATH');
$pathnode->nodeValue .= '.cache'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T13:32:17.613

这对我有用，假设您的命名空间`zf`用于 Zend 框架（并且 URI 是正确的）。在为特定命名空间操作节点时，您必须使用正确的命名空间函数。

```
$backendNode = $paramsNode->appendChild($cnfXml->createElement('backend'));
$backendNode->appendChild($cnfXml->createElement('type'))->setAttribute('value', 'File');
$pathnode = $backendNode->appendChild($cnfXml->createElement('cache_dir'));
$pathnode->appendChild($cnfXml->createElementNS('http://framework.zend.com/xml/zend-config-xml/1.0/', 'zf:const'))->setAttributeNS('http://framework.zend.com/xml/zend-config-xml/1.0/', 'zf:name', 'APPLICATION_PATH');
$pathnode->appendChild( $cnfXml->createTextNode( '.cache')); 
```

这[产生了](http://viper-7.com/ZAny3p)：

```
<backend>
    <type value="File"/>
    <cache_dir><zf:const zf:name="APPLICATION_PATH"/>.cache</cache_dir>
</backend> 
```

# ksh - “测试 -a 文件”和“测试文件 -ef 文件”之间的区别

> ID：11345132
> 
> 赞同：6
> 
> 时间：2012-07-05T13:16:03.877
> 
> 标签：ksh, qnx

QNX (Neutrino 6.5.0) 使用 ksh 的开源实现作为其外壳。许多提供的脚本，包括系统启动脚本，都使用了诸如

```
if ! test /dev/slog -ef /dev/slog; then
    # do something
fi 
```

检查文件系统中是否存在资源管理器。我已经搜索过，只能找到非常枯燥的解释来`-ef`检查这两个参数是否实际上是同一个文件。由于指定的文件名是相同的，它似乎只是减少检查文件是否存在。

我已经检查了`test -a`and的行为`test -e`（两者似乎都根据我读过的各种文档检查任何类型文件的文件存在）并且它们似乎也可以工作。

`-ef`和`-a`/之间执行的检查有什么区别`-e`吗？是否正在使用`-ef`某种尝试来防止文件存在的竞争条件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T03:39:40.043

查看`strace`Ubuntu Linux 上的副本`ksh`没有发现实质性差异。一打`stat`对二打。

```
$ strace test /tmp/tmp.geLaoPkXXC -ef /tmp/tmp.geLaoPkXXC 
```

显示了这一点：

```
mmap(NULL, 7220736, PROT_READ, MAP_PRIVATE, 3, 0) = 0x7f11dc80b000
close(3)                                = 0
stat("/tmp/tmp.geLaoPkXXC", {st_mode=S_IFREG|0600, st_size=0, ...}) = 0
stat("/tmp/tmp.geLaoPkXXC", {st_mode=S_IFREG|0600, st_size=0, ...}) = 0
close(1)                                = 0
close(2)                                = 0 
```

...然而

```
$  strace test -a /tmp/tmp.geLaoPkXXC 
```

显示了这一点：

```
fstat(3, {st_mode=S_IFREG|0644, st_size=7220736, ...}) = 0
mmap(NULL, 7220736, PROT_READ, MAP_PRIVATE, 3, 0) = 0x7f6b49e2b000
close(3)                                = 0
stat("/tmp/tmp.geLaoPkXXC", {st_mode=S_IFREG|0600, st_size=0, ...}) = 0
close(1)                                = 0
close(2)                                = 0 
```

一`stat`对二。

```
$ ksh --version
  version         sh (AT&T Research) 93u 2011-02-08 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T15:28:52.590

我们不知道代码如何在没有代码的情况下准确使用stat，我们需要通过代码找到差异。

```
/* code for -ef */
return (stat (argv[op - 1], &stat_buf) == 0
                  && stat (argv[op + 1], &stat_spare) == 0
                  && stat_buf.st_dev == stat_spare.st_dev
                  && stat_buf.st_ino == stat_spare.st_ino);

/* code for -e/-a */
    case 'a':                   /* file exists in the file system? */
    case 'e':
      return stat (argv[pos - 1], &stat_buf) == 0; 
```

因此，如果名称相同并且两个具有相同名称的 stat() 将返回相同的值，则 `test -a/-e file`与`test file -ef file`. 我们知道第一个条件为真，从@tinman 的评论中我们知道第二个条件也为真

# c - IrDA 发现的默认设置（波特、位、停止、奇偶校验、流控制等）

> ID：11345135
> 
> 赞同：1
> 
> 时间：2012-07-05T13:16:12.167
> 
> 标签：c, macos, serial-port, infrared

我正在尝试编写一个使用 IrDA 与 Uwatec 潜水电脑通信的工具……在 Mac 上。我正在使用的 USB IrDA 设备提供了一个可用于发送和接收数据的串行设备 (`/dev/cu.IrDA-IrCOMM0`和)。`/dev/tty.IrDA-IrCOMM0`不幸的是，Mac 不提供 IrDA 套接字层。

我已经确认使用设备驱动程序附带的命令行工具，它可以侦听和接收来自其他设备的 IrDA 通信。但是，虽然命令行工具告诉我它正在以 9600 波特率进行通信，但其余设置（位、停止位、奇偶校验、流控制等）并未返回给我。

我尝试编写自己的程序来收听数据，但它无法接收任何数据，我认为原因是这些设置不正确。所以，假设我只是想收听正在发送的 9600 波特 IrDA 发现数据包，我需要使用哪些其他设置？

如果有帮助，这是我目前用来设置通信参数的代码片段——它不起作用：

```
#define DEVICE "/dev/cu.IrDA-IrCOMM0"

int main(void) {
    FILE *device;
    struct termios ttystate;

    device = fopen(DEVICE, "rw");

    //get the terminal state
    tcgetattr(fileno(device), &ttystate);
    //turn off canonical mode and echo
    ttystate.c_lflag &= ~(ICANON | ECHO);
    //minimum of number input read.
    ttystate.c_cc[VMIN] = 1;

    cfsetspeed(&ttystate, B9600); // Set 9600 baud····
    ttystate.c_cflag |= (CS8 | // Use 8 bit words
                         PARENB   | // parity enable
                         PARODD   | // odd parity
                         CCTS_OFLOW | // CTS flow control of output
                         CRTS_IFLOW);// RTS flow control of input

    //set the terminal attributes.
    tcsetattr(fileno(device), TCSANOW, &ttystate);
    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T12:55:18.927

下面是我在 Linux 上用于 EXAR XR17C15 的 IrDA 初始化代码。此外，您必须将波特率设置为在此示例中未设置。我希望这有帮助。

```
//
// Set up IrDA hardware interface through UART

bool CeIrDA::SetupIrDA()
{
    struct termios termios;
    tcgetattr(hComPort, &termios);
    cfmakeraw(&termios);

    termios.c_iflag = IGNPAR;
    termios.c_oflag = 0;
    termios.c_cc[VTIME] = 1;    // timeout in 0.1s between 2 characters
    termios.c_cc[VMIN] = 1;     // min # of characters

    tcsetattr(hComPort, TCSANOW, &termios);

    xrioctl_rw_reg input;
    struct timespec delay = {0, 500};
    struct timespec delayrem;
    //EFR: Allowing Enhanced Functions and RTS/DTR flow control
    input.reg=0x09;
    input.regvalue=0x50;
    ioctl(hComPort,WRITE,&input);

    nanosleep(&delay, &delayrem);

    //MCR: Flow control RTS enabled
    input.reg=0x04;
    input.regvalue=0x40;
    ioctl(hComPort,WRITE,&input);

    nanosleep(&delay, &delayrem);

    //MCR: RTS pin high
    input.reg=0x04;
    input.regvalue=0x00;
    ioctl(hComPort,WRITE,&input);

    nanosleep(&delay, &delayrem);

    //MCR: RTS pin low
    input.reg=0x04;
    input.regvalue=0x02;
    ioctl(hComPort,WRITE,&input);

    nanosleep(&delay, &delayrem);

    //MCR: Infrared Mode
    input.reg=0x04;
    input.regvalue=0x42;
    ioctl(hComPort,WRITE,&input);

    nanosleep(&delay, &delayrem);

    //EFR: Allowing Enhanced Functions and RTS/DTR flow control
    input.reg=0x09;
    input.regvalue=0x40;
    ioctl(hComPort,WRITE,&input);

    nanosleep(&delay, &delayrem);

    //LCR: Allowing changes of DLL and DLM
    input.reg=0x03;
    input.regvalue=0x80;
    ioctl(hComPort,WRITE,&input);

    nanosleep(&delay, &delayrem);

    //DLL: Speed configuration
    input.reg=0x00;
    input.regvalue=0x02;
    ioctl(hComPort,WRITE,&input);

    nanosleep(&delay, &delayrem);

    //DLM: Speed configuration
    input.reg=0x01;
    input.regvalue=0x00;
    ioctl(hComPort,WRITE,&input);

    nanosleep(&delay, &delayrem);

    //LCR: configuration for parity, word length....
    input.reg=0x03;
    input.regvalue=0x03;
    ioctl(hComPort,WRITE,&input);

    nanosleep(&delay, &delayrem);
    return true;
} 
```

# android - 我可以使用 zxing 意图修改相机预览屏幕吗？

> ID：11345136
> 
> 赞同：1
> 
> 时间：2012-07-05T13:16:12.570
> 
> 标签：android, android-activity, zxing

我有一个顶部有 3 个选项卡的 Android 应用程序。

第一个选项卡是“扫描”，它应该显示相机，以便您可以扫描条形码。

我目前正在使用 zxing 库的意图。问题是相机预览占据了整个屏幕。

我想将标签保留在顶部，即使在相机预览屏幕上也是如此。

是否可以使用此设置来做到这一点？还是我必须包含 zxing 的源代码并在那里修改东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:19:52.513

是否可以使用此设置来做到这一点？`NO`还是我必须包含 zxing 的源代码并在那里修改东西？`YES`但不建议这样做。

是否可以使用此设置来做到这一点？

因为您无法使用它来控制 Zxing 库。通过 Intent 它将启动您无法控制的新应用程序“Zxing”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T13:26:47.127

这***可以***通过使用[ActivityGroup](http://developer.android.com/reference/android/app/ActivityGroup.html)来实现。它将允许您在应用程序中托管其他 Intent。

此处的这篇[文章](http://united-coders.com/nico-heid/use-android-activitygroup-within-tabhost-to-show-different-activity)似乎表明它是可能的，并链接到使用这种方法的[项目。](https://github.com/gpodder/GpodRoid)

未来证明的代码：

```
TabHost tabHost = getTabHost();

tabHost.addTab(tabHost.newTabSpec("tab1").setIndicator("Player").setContent(
        new Intent(this, PlayerActivity.class)));
tabHost.addTab(tabHost.newTabSpec("tab2").setIndicator("Archive").setContent(
        new Intent(this, ArchiveGroup.class)));
tabHost.addTab(tabHost.newTabSpec("tab3").setIndicator("Updates").setContent(
        new Intent(this, DownloadList.class))); 
```

...

```
View view = getLocalActivityManager().startActivity("ArchiveActivity",
    new Intent(this, ArchiveActivity.class)
            .addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP)).getDecorView();
setContentView(view); 
```

...

```
String album = (String) getListView().getItemAtPosition(position);
Intent intent = new Intent(getApplicationContext(), ArchiveAlbums.class);
intent.putExtra("album", album);
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

View view = ArchiveGroup.group.getLocalActivityManager()
                .startActivity("ShowPodcasts", intent).getDecorView();
ArchiveGroup.group.setContentView(view); 
```

# java - 如何从多个队列中随机获取消息

> ID：11345139
> 
> 赞同：0
> 
> 时间：2012-07-05T13:16:30.143
> 
> 标签：java

我有多个队列（使用activemq创建）。我想从队列中随机获取消息是否可能？如果可以的话请告诉我...

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T13:19:43.830

如果您想监听多个队列，您可以在同一个会话中监听多个队列，您将一次从多个队列中获得一个事件的回调。

# ruby-on-rails-3 - Rails 3.2 资产管道 + 供应商/资产/javascript 中的 html5shiv.JS

> ID：11345142
> 
> 赞同：6
> 
> 时间：2012-07-05T13:16:42.660
> 
> 标签：ruby-on-rails-3, html, asset-pipeline, html5shiv

在阅读了这篇关于不要像（几乎）每个人一样直接从源代码使用 HTML5Shiv[的帖子](http://zoompf.com/2012/05/html5shiv-and-serving-content-from-code-repositories)（推荐阅读）之后，我正在尝试使用 Rails 3.2 Asset Pipeline 在我的应用程序中包含 html5shiv.js。

我下载了 javascript 的缩小版和非缩小版。约定告诉您将第三方文件添加到供应商/资产文件夹中。我现在有两个问题：

1) 我应该将哪个版本（缩小或未缩小）添加到供应商/资产/javascrip 文件夹中？

2）既然是条件引用`<!--[if lt IE 9]>`，我应该如何调用脚本？

我不想将它添加到 application.js 清单中，因为我想将它保存为单独的文件并且我想使用条件。我有点迷路了！

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-05T13:58:32.493

如果您愿意，可以使用未缩小版的 JS，Rails 会通过管道在生产模式下对其进行压缩。

要将 shiv 保留为单独的文件，您可以通过在目录中创建`html5.js`（或其他）来为其提供自己的清单`/vendor/assets/javascripts/`。在该文件中需要 html5shiv（我假设清单和脚本在同一个目录中）。

```
//= require html5shiv 
```

或者

```
//= require html5shiv.min 
```

然后在条件块的布局中包含清单。在 HAML 中类似于：

```
== "<!--[if lt IE 9]>"
= javascript_include_tag 'html5'
== "<![endif]-->" 
```

请记住在测试之前重新启动您的应用服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T06:28:53.683

或者你可以直接使用

```
/[if lt IE 9]
  %script{ src: "http://html5shim.googlecode.com/svn/trunk/html5.js", type: "text/javascript" } 
```

# android - 提高图像/位图显示 Android 的速度

> ID：11345143
> 
> 赞同：0
> 
> 时间：2012-07-05T13:16:44.353
> 
> 标签：android, image, bitmap, garbage-collection, bytearray

我编写了一个程序，它以字节 [] 的形式从套接字读取图像，然后尝试在屏幕上显示它们。我关注了一些我发现的链接，说最好的方法是使用 SurfaceView。我正在尝试分配一个字节数组，该数组将占我需要的最大图像，然后不断为我收到的新图像使用相同的内存空间。这样内存就没有机会收集垃圾了。

我想我已经将问题缩小到“BitmapFactory.decodeByteArray(f, 0, fileSize);”的函数调用。我认为这个调用每次都会创建一个新的位图，一旦方法返回，它就会被 GC 处理。我尝试使用 inMutable 和 inBitmap 字段，但没有运气，因为图像的大小每次都在变化。不过，我可能做错了什么。如果有人有任何使用它的经验并且对他们有用，请告诉我。每次 byte[] 大小甚至仅更改 10 个元素。

我正在尝试尽可能快地显示我正在阅读的图像，并希望重用相同的内存空间/位图，这样我就不必继续承担 30 毫秒的垃圾收集成本。有谁知道我如何避免垃圾收集，或者至少将其最小化？图像为 640x480 和 1280x720。下面是读取图像并将其与 LogCat 输出一起显示的代码片段。任何帮助，将不胜感激。谢谢。

```
static byte[] f = new byte[250000]; // allocate enough memory space for biggest image
private TutorialThread _thread;

class Panel extends SurfaceView implements SurfaceHolder.Callback {

    /* On start up connect socket */
    public Panel(Context context) {
        super(context);
        getHolder().addCallback(this);
        _thread = new TutorialThread(getHolder(), this);
        if (connectSockets) {
            s2 = connect(ip, s2, port);
        }
    }
    /*
     * OnDraw - Take the byte[] and use Bitmap.decodeByteArray to decode
     * Image and then draw it on canvas
     * 
     * (Slow, Causing 30ms delay due to Garbage Collection)
     */
    @Override
    public void onDraw(Canvas canvas) {
        Bitmap i = BitmapFactory.decodeByteArray(f, 0, fileSize);
        canvas.drawBitmap(i, 10, 10, null);
    }

    public void surfaceChanged(SurfaceHolder holder, int format, int width,
            int height) {
        // TODO Auto-generated method stub

    }

    public void surfaceCreated(SurfaceHolder holder) {
        // TODO Auto-generated method stub
        _thread.setRunning(true);
        _thread.start();
    }

    public void surfaceDestroyed(SurfaceHolder holder) {
        // TODO Auto-generated method stub
        // simply copied from sample application LunarLander:
        // we have to tell thread to shut down & wait for it to finish, or
        // else
        // it might touch the Surface after we return and explode
        boolean retry = true;
        _thread.setRunning(false);
        while (retry) {
            try {
                _thread.join();
                retry = false;
            } catch (InterruptedException e) {
                // we will try it again and again...
            }
        }
    }
}

class TutorialThread extends Thread {
    private SurfaceHolder _surfaceHolder;
    private Panel _panel;
    private boolean _run = false;

    public TutorialThread(SurfaceHolder surfaceHolder, Panel panel) {
        _surfaceHolder = surfaceHolder;
        _panel = panel;
    }

    public void setRunning(boolean run) {
        _run = run;
    }

    @Override
    public void run() {
        Canvas c = null;
        byte[] header = new byte[16];
        while (_run) {
            Log.d("Brian", "Running");
            if (s2 != null) { // if socket isCreated
                int bytesRead = 0;
                int totalBytesRead = 0;
                fileSize = 0;

                /*
                 * read the header that contains the filesize, height, and
                 * width
                 * 
                 * don't break until we read all header values
                 */
                while (totalBytesRead != (header.length)) {
                    try {
                        bytesRead = s2.getInputStream().read(header,
                                totalBytesRead,
                                (header.length - totalBytesRead));
                    } catch (IOException ex) {
                    }
                    if (bytesRead == -1) {
                    } else {
                        totalBytesRead += bytesRead;
                    }
                }

                // convert the filesize from bytes to int
                fileSize = (fileSize << 8) + (header[0] & 0xff);
                fileSize = (fileSize << 8) + (header[1] & 0xff);
                fileSize = (fileSize << 8) + (header[2] & 0xff);
                fileSize = (fileSize << 8) + (header[3] & 0xff);

                bytesRead = 0;

                // read the entire file. don't break until we read
                // everything
                do {
                    bytesRead = readChunk(s2, bytesRead, fileSize, f);
                } while (bytesRead != fileSize);
            } else {
                Log.d("Brian", "Socket Null");
            }
            c = null;
            try {
                c = _surfaceHolder.lockCanvas(null);
                synchronized (_surfaceHolder) {
                    _panel.onDraw(c);
                }
            } finally {
                // do this in a finally so that if an exception is thrown
                // during the above, we don't leave the Surface in an
                // inconsistent state
                if (c != null) {
                    _surfaceHolder.unlockCanvasAndPost(c);
                }
            }
        }
    }

07-05 09:13:21.980: D/dalvikvm(25075): GC_FOR_ALLOC freed 0K, 6% free 7040K/7431K, paused 18ms
07-05 09:13:22.010: D/dalvikvm(25075): GC_CONCURRENT freed <1K, 6% free 7040K/7431K, paused 4ms+2ms
07-05 09:13:22.040: D/dalvikvm(25075): GC_EXPLICIT freed 600K, 14% free 6440K/7431K, paused 1ms+2ms
07-05 09:13:22.060: D/dalvikvm(25075): GC_FOR_ALLOC freed <1K, 14% free 6440K/7431K, paused 19ms
07-05 09:13:22.060: I/dalvikvm-heap(25075): Grow heap (frag case) to 6.994MB for 614416-byte allocation
07-05 09:13:22.080: D/dalvikvm(25075): GC_FOR_ALLOC freed 0K, 6% free 7040K/7431K, paused 21ms
07-05 09:13:22.120: D/dalvikvm(25075): GC_CONCURRENT freed <1K, 6% free 7040K/7431K, paused 3ms+2ms
07-05 09:13:22.150: D/dalvikvm(25075): GC_EXPLICIT freed 600K, 14% free 6440K/7431K, paused 2ms+2ms
07-05 09:13:22.170: D/dalvikvm(25075): GC_FOR_ALLOC freed <1K, 14% free 6440K/7431K, paused 19ms
07-05 09:13:22.170: I/dalvikvm-heap(25075): Grow heap (frag case) to 6.994MB for 614416-byte allocation
07-05 09:13:22.190: D/dalvikvm(25075): GC_FOR_ALLOC freed 0K, 6% free 7040K/7431K, paused 19ms
07-05 09:13:22.220: D/dalvikvm(25075): GC_CONCURRENT freed <1K, 6% free 7040K/7431K, paused 2ms+2ms
07-05 09:13:22.250: D/dalvikvm(25075): GC_EXPLICIT freed 600K, 14% free 6440K/7431K, paused 2ms+1ms
07-05 09:13:22.270: D/dalvikvm(25075): GC_FOR_ALLOC freed <1K, 14% free 6440K/7431K, paused 18ms
07-05 09:13:22.270: I/dalvikvm-heap(25075): Grow heap (frag case) to 6.994MB for 614416-byte allocation 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T17:16:56.380

我刚刚遇到了同样的问题，您已经提到了解决方案：

```
opts.inBitmap 
```

如您所说，新的位图必须与前一个具有相同的大小。此外，您必须设置

```
opts.inSampleSize = 1; 
```

例子：

```
BitmapFactory.Options opts = new BitmapFactory.Options();
opts.inSampleSize = 1;

while (...) {
    // first call will create a new bitmap
    Bitmap bitmap = BitmapFactory.decodeByteArray(data, 0, data.length, opts);
    // subsequent calls will re-use the first bitmap
    opt.inBitmap = bitmap;
    // check (dump bitmaps memory address, should always output the same string)
    Log.d("bitmapID", bitmap.toString());
} 
```

就我而言，这完全消除了位图所需的 GC。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T13:24:17.337

> 我认为这个调用每次都会创建一个新的位图，一旦方法返回，它就会被 GC 处理。

这正是正在发生的事情。每次调用它都会从您的缓冲区创建一个新的位图。旧的被扔掉，不管它是否是同一个位图。永远不要在视图的“onDraw”方法中创建对象，尤其是位图。此方法可能在视图存在时被调用数百次，并且创建对象的成本很高。

最好的选择是等到缓冲区被新的位图填充，然后调用`BitmapFactory.decodeByteArray(f, 0, fileSize);` 保持对位图的引用在类的范围内。`recycle()`还记得在创建新位图之前调用旧位图。

# java - 如何读取大小>40MB 的 XLSX 文件

> ID：11345146
> 
> 赞同：11
> 
> 时间：2012-07-05T13:16:55.390
> 
> 标签：java, out-of-memory, xlsx

我正在使用`XSSF`来`apache-POI`读取 XLSX 文件。我遇到了一个错误`java.lang.OutOfMemoryError: Java heap space`。后来，增加了`-Xmx1024m`用于java类的堆大小仍然重复相同的错误。

代码：

```
String filename = "D:\\filename.xlsx";
FileInputStream fis = null;
try {
   fis = new FileInputStream(filename);
   XSSFWorkbook workbook = new XSSFWorkbook(fis); 
```

在上面的代码段中，执行停止`XSSFWorkbook`并抛出指定的错误。有人可以建议更好的方法来读取大型 XLSX 文件。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-05T13:56:23.213

POI 允许您以流式方式读取 excel 文件。API 几乎是 SAX 的包装器。确保使用接受字符串的构造函数以正确的方式打开 OPC 包。否则你可能会立即耗尽内存。

```
OPCPackage pkg = OPCPackage.open(file.getPath());
XSSFReader reader = new XSSFReader(pkg); 
```

现在，阅读器将允许您获取`InputStreams`不同的部分。如果您想自己进行 XML 解析（使用 SAX 或 StAX），您可以使用这些。但这需要非常熟悉格式。

一个更简单的选择是使用[XSSFSheetXMLHandler](http://poi.apache.org/apidocs/org/apache/poi/xssf/eventusermodel/XSSFSheetXMLHandler.html)。这是读取第一张纸的示例：

```
StylesTable styles = reader.getStylesTable();
ReadOnlySharedStringsTable sharedStrings = new ReadOnlySharedStringsTable(pkg);
ContentHandler handler = new XSSFSheetXMLHandler(styles, sharedStrings, mySheetContentsHandler, true);

XMLReader parser = XMLReaderFactory.createXMLReader();
parser.setContentHandler(handler);
parser.parse(new InputSource(reader.getSheetsData().next())); 
```

其中 mySheetsContentHandler 应该是您自己的[XSSFSheetXMLHandler.SheetContentsHandler](http://poi.apache.org/apidocs/org/apache/poi/xssf/eventusermodel/XSSFSheetXMLHandler.SheetContentsHandler.html)实现。这个类将被提供行和单元格。

但是请注意，如果您的共享字符串表很大（如果您的大表中没有任何重复的字符串，则会发生这种情况），这可能会适度消耗内存。如果内存仍然是个问题，我建议使用原始 XML 流（也由 XSSFReader 提供）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-24T10:36:13.207

为了补充@waxwing 的答案，如果输入 XLS(X) 文件受密码保护，您将需要通过使用解密装饰器包装原始文件来获取纯输入流。但首先，您需要将文件作为`POIFSFileSystem`.

简而言之：

```
String pass = "secret";
File file = new File("data/1.xlsx");

try (POIFSFileSystem fs = new POIFSFileSystem(file);
   // wrap in org.apache.poi.poifs.filesystem.DocumentFactoryHelper.getDecryptedStream
   InputStream in = DocumentFactoryHelper.getDecryptedStream(fs, pass);
   OPCPackage pkg = OPCPackage.open(in)) 
{
    XSSFReader reader = new XSSFReader(pkg);

    StylesTable styles = reader.getStylesTable();
    ReadOnlySharedStringsTable sharedStrings = new ReadOnlySharedStringsTable(pkg);
    SheetContentsHandler f = new SheetContentsHandler() {
       // ... your implementation of SheetContentsHandler interface ...
    };
    ContentHandler handler = new XSSFSheetXMLHandler(styles, sharedStrings, f, true);
    XMLReader parser = XMLReaderFactory.createXMLReader();
    parser.setContentHandler(handler);
    parser.parse(new InputSource(reader.getSheetsData().next()));
} 
```

# regex - TCL、正则表达式函数和参数替换

> ID：11345147
> 
> 赞同：0
> 
> 时间：2012-07-05T13:16:57.683
> 
> 标签：regex, tcl, substitution

我有以下代码，我试图通过*regexp*函数将单行上的数据匹配到不同的变量中。*regexp*函数中的数据数量（在输入行上）和变量名称可能会有所不同，这就是我使用 $varLine （之前在我的真实代码中处理过）的原因。

```
set in_stim "13 1 1 0 1 0 0 0 2 03"
set regex {^(\d+)\s([01])\s([01])\s([01])\s([01])\s([01])\s([01])\s([01])\s(\d+)\s(\d+)}
set varLine "sig1 sig2 sig3 sig4 sig5 sig6 sig7 sig8 sig8"
regexp $regex $in_stim whole sig0 $varLine
puts "sig0: $sig0"
puts $sig1 
```

当我执行它时，我收到以下错误（正确显示 $sig0）：

```
 sig0: 13

    can't read "sig1": no such variable
    while executing
"puts $sig1" 
```

如果我手动将 $varLine 替换为正则表达式行，错误就会消失：

```
set in_stim "13 1 1 0 1 0 0 0 2 03"
set regex {^(\d+)\s([01])\s([01])\s([01])\s([01])\s([01])\s([01])\s([01])\s(\d+)\s(\d+)}
regexp $regex $in_stim whole sig0 sig1 sig2 sig3 sig4 sig5 sig6 sig7 sig8 sig8
puts $sig0
puts $sig1 
```

我得到以下正确的输出：

```
13
1 
```

有人在我的代码中看到错误或可以提供帮助吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T13:40:24.437

当你这样做

```
set varLine "sig1 sig2 sig3 sig4 sig5 sig6 sig7 sig8 sig8"
regexp $regex $in_stim whole sig0 $varLine 
```

Tcl 解析器`regexp`正好传递命令五个参数，第五个参数是变量“varLine”的内容，然后`regexp`命令将其视为一个单词。一个单词显然表示一个变量（在您的情况下，名称有点复杂，因为它发生了）。

为了做你需要的事情，你必须求助于动态脚本，这可以通过两种方式完成：

1.  “经典”方法使用[`eval`](http://www.tcl.tk/man/tcl8.5/TclCmd/eval.htm)：

    ```
    eval [concat [list regexp $regex $in_stim whole sig0] $varLine] 
    ```

2.  从 Tcl 8.5 开始使用[`{*}`](http://www.tcl.tk/man/tcl8.5/TclCmd/Tcl.htm#M7)语法糖：

    ```
    regexp $regex $in_stim whole sig0 {*}$varLine 
    ```

经典方法首先通过连接两个列表来构造单词列表：命令的“静态”部分，然后是要传递给它的变量列表。然后将构造的列表`eval`用作命令。您可以在这[本经典书籍](http://beedub.com/book/3rd/Eval.pdf)中阅读更多相关信息。

在新式方法中，`{*}`thingy 用于将 $varLine 的内容扩展为“就地”列表——请参阅[此处](http://www.tcl.tk/man/tcl8.5/TclCmd/Tcl.htm#M7)的第 5 条规则。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T13:40:49.757

问题是该`regexp`命令不采用将子匹配存储为一个参数的变量列表，而是采用尽可能多的参数。

解决此问题的最简单方法是扩展变量列表：

```
regexp $regex $in_stim whole sig0 {*}$varLine 
```

# mysql - 无法使用 AJAX 淡出 div 元素

> ID：11345151
> 
> 赞同：0
> 
> 时间：2012-07-05T13:17:11.797
> 
> 标签：mysql, ajax, row

我不明白为什么我不能淡出 div 元素。我正在尝试删除 mysql 条目，当我重新加载页面条目消失时，删除功能工作正常，但我需要该条目在没有页面刷新的情况下消失。尝试创建新的空 div 并在删除条目后将其淡出，工作正常。

```
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
$(document).ready(function() {
    $("a[id^='delete']").click(function() {
        var numrow = $(this).attr("id");
        numrow = numrow.substr(6);
        var eil = 'id=' + numrow;
            $.ajax({
                type: 'POST',
                url: 'trinti.php',
                data: eil,
                success: function() {
                    numrowas = "#d"+numrow;
                    $(numrowas).fadeOut();
                }
            });
    });
});
</script>
<?php
require_once('db.php');
if (isset($_GET['list'])) {
$query = "SELECT * FROM zinutes";
mysql_query("SET NAMES 'UTF8'");
$uzklausa=mysql_query($query);
$i = 1;
while($lauk = mysql_fetch_array($uzklausa)){
$r = $lauk['id'];
echo '<div id="d$r">'.$i++.'. Name: '.$lauk['name'].' Message: '.$lauk['message'].' <a href="#" id="delete'.$r.'">Delete</a></div>';
}
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T13:19:27.737

尝试从 complete: block 进行淡入淡出。

```
 $.ajax({
                    type: 'POST',
                    url: 'trinti.php',
                    data: eil,
                    success: function() {

                    }
                    complete: function() {
                       numrowas = "#d"+numrow;
                       $(numrowas).fadeOut();
                    }
                }); 
```

# java - 不同项目之间的自动装配

> ID：11345154
> 
> 赞同：0
> 
> 时间：2012-07-05T13:17:27.777
> 
> 标签：java, spring

我有两个项目，即 A 和 B。项目 A 有一个 C 类，它有几个自动装配的全局变量。项目 B 有一个 D 类，它必须将 C 类的一个实例用于多种用途。

我想在项目 A 中定义的类 D 中自动装配 C 的实例，但请记住 D 属于 B。

无论如何我可以做到这一点吗？例如一种说法：“项目 B，当试图找出如何自动装配类时，请考虑项目 A 中定义的定义和组件”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T16:00:31.197

如果您正在从其他 Spring 项目安装 Spring JAR，并且您正在使用注释扫描，那么对于您的搜索路径，您可以使用：

```
classpath*:com/my/base/package 
```

类路径中的“*”表示搜索整个类路径，而不仅仅是您用完的 JAR 中的类。

# python - 使用python访问文件夹中的文件

> ID：11345160
> 
> 赞同：0
> 
> 时间：2012-07-05T13:17:55.353
> 
> 标签：python, directory

我有一个运行程序的 python 脚本，它生成几个 .exe 文件并将它们放在一个文件夹中。我想访问这些 exe 文件做进一步的测试，问题是这个文件夹名称不是静态的（它是动态的？），名称取决于操作系统、编译器、二进制类型（64/32 位），所以我可以不要对目录进行硬编码。

那么访问这样的文件夹最好的方法是什么？，我尝试查找此内容，但我不知道如何处理此问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:22:49.303

只需将文件夹名称作为参数传递给您的 python 脚本：

```
python myscript.py FolderName 
```

在`myscript.py`：

```
import sys
print sys.argv[1] 
```

`sys.argv`为您提供所有参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T13:21:13.900

```
import platform 
```

使用[平台](http://docs.python.org/library/platform.html)模块生成文件路径。

```
import os.path 
```

使用[os.path](http://docs.python.org/library/os.path.html)模块以一种很好的方式使用路径。

# java - Camel中的动态到（URI）

> ID：11345162
> 
> 赞同：2
> 
> 时间：2012-07-05T13:18:01.973
> 
> 标签：java, integration, apache-camel

我想配置一个`to(uri)`可以在运行时指定的骆驼路线。

我尝试了以下方法：

```
public class Foo extends RouteBuilder {
    @Override
    public void configure() {
        // the URI can point to different hosts
        from("direct:start").to(${someUri}");
    }
} 
```

进而

```
ProducerTemplate pt = camelContext.createProducerTemplate();
pt.requestBodyAndHeader("direct:start", "someUri", "http://example.com"); 
```

但是，上述方法不起作用（Camel 抱怨没有默认端点）。

解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-11-17T15:18:36.090

尽管已经回答了这个问题，但我想分享这个其他选项来实现您正在寻找的东西，以防其他人仍然想知道如何做到这一点：

自 Camel 2.16 以来有一种新方法称为“toD”，基本上意味着“动态到”。[这里是官方参考文档](http://camel.apache.org/message-endpoint.html)。

```
from("direct:start")
  .toD("${someUri}"); 
```

在这种情况下， toD 方法使用[简单语言](http://camel.apache.org/simple.html)解析参数，这意味着您可以使用该语言支持的任何属性。

您还可以查看关于同一主题的[其他 StackOverflow 答案。](https://stackoverflow.com/a/36588635/6581856)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T15:28:10.053

请参阅这些链接以供参考：

[http://camel.apache.org/how-do-i-use-dynamic-uri-in-to.html](http://camel.apache.org/how-do-i-use-dynamic-uri-in-to.html)

[http://camel.apache.org/recipient-list.html](http://camel.apache.org/recipient-list.html)

例如，请参阅此单元测试

[https://svn.apache.org/repos/asf/camel/trunk/camel-core/src/test/java/org/apache/camel/processor/RecipientListTest.java](https://svn.apache.org/repos/asf/camel/trunk/camel-core/src/test/java/org/apache/camel/processor/RecipientListTest.java)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-15T20:30:05.887

我只是使用了前面没有“$”的花括号。这是我所做的：

```
{headers.reQueueName} instead of ${headers.reQueueName} for the uri and it worked : 
  <to id="requeue" uri="jmsamq:queue:{headers.reQueueName}"/> here is my implementation    :    

<route id="_throttleRoute">
            <from id="throttleRouteStarter" uri="direct:throttleRouteService"/>
            <log id="_Step_5" message="Camel throttle Route Started"/>
            <log id="_Step_5_1" message="Camel throttle Route is ${headers.next}"/>
            <to id="restThrottleCall" uri="restlet:http://host:port/path"/>
            <process id="throttleRouteProcess" ref="throttleServiceProcessor"/>
            <choice id="_choice2">`enter code here`
                <when id="_when3">
                    <simple>${headers.next} == 'requeue'</simple>   
                    <to id="requeue" uri="jmsamq:queue:{headers.reQueueName}"/>
                    <log id="_Step_wait1" message="ReQueue sending to ${headers.reQueueName}"/>
                </when>
                <when id="_when4">
                    <simple>${headers.next} == 'process'</simple>
                    <log id="_logNext" message="Invoking Next Work Unit ${headers.next}"/>
                    <process id="jBPMRouteProcess" ref="jBPMRouteProcessor"/>
                </when>
                <otherwise id="_otherwise2">
                    <log id="_log5" loggingLevel="WARN" message="Next for orderId: ${headers.orderid} not found"/>
                </otherwise>
            </choice>
        </route> 
```

# javascript - Emberjs 将参数从模板传递给函数

> ID：11345164
> 
> 赞同：2
> 
> 时间：2012-07-05T13:18:02.613
> 
> 标签：javascript, ember.js

我有一个简单的 foreach 循环：

```
{{#each App.userC.companies}}
    <button class="btn btn-inverse btn-huge" {{action setcompany target="App.userC"}}>{{this.name}}</button>
{{/each}} 
```

"companies" 元素有两个元素：name 和 id

当我点击按钮时，我想知道点击了哪个“this.id”？如何做到这一点？我试过：

```
setcompany: function(e){
    console.log($(e.target).data(...)); //output: <script id='metamorph-4-start' type='text/x-placeholder'></script>4ff2f79461d69a9811000001<script id='metamorph-4-end' type='text/x-placeholder'></script>
} 
```

但它毫无用处，我敢打赌这不是 Ember 的做法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T13:26:56.113

jQuery click 事件在触发时由 Handlebars 提供一个上下文。默认情况下，它是当前视图上下文，但您可以传入任何您喜欢的内容。

```
{{#each App.userC.companies}}
  <button class="btn btn-inverse btn-huge" {{action setCompany target="App.userC" context="this"}}>{{this.name}}</button>
{{/each}}

setCompany: function(event){
  var company = event.context
} 
```

[您可以在此处](http://docs.emberjs.com/#doc=Handlebars.helpers&method=.action&src=false)查看 API ，特别是“指定上下文”部分。

# google-maps - 如何找到通往众多标记之一的最佳路线？

> ID：11345165
> 
> 赞同：0
> 
> 时间：2012-07-05T13:18:05.273
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers, shortest-path

在地图上，我必须标记数组。一个是静态的，让我们调用`station`。其他的也是静态的，但它们是暂时的，我们称它们为`fire`。当`fire`被点击时，最短路径必须被构造到其中之一`stations`。我使用 TravelMode.DRIVING。我知道我可以计算路线距离，但为了计算我必须先构建路线。是否有任何图书馆可以找到一个固定标记和许多其他标记之一之间的最佳路线？或者你能帮我讲逻辑吗？我可以自己写代码。

这是我实现了到两个标记之一的最佳路线，并且可以使用循环计算许多标记。但是有没有其他方法可以做到这一点？

```
 directionsService1.route(request1, function (response1, status1) {
        if (status1 == google.maps.DirectionsStatus.OK) {
            var myRoute1 = response1.routes[0].legs[0];
            distance1 = myRoute1.distance.value;
            directionsService2.route(request2, function (response2, status2) {
                if (status2 == google.maps.DirectionsStatus.OK) {
                    var myRoute2 = response2.routes[0].legs[0];
                    distance2 = myRoute2.distance.value;
                    if (distance1 > distance2) {
                        directionsDisplay2.setMap(map);
                        directionsDisplay2.setDirections(response2);
                        directionsDisplay1.setMap(null);
                    } else {
                        directionsDisplay1.setMap(map);
                        directionsDisplay1.setDirections(response1);
                        directionsDisplay2.setMap(null);
                    }
                }
            });
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T13:31:11.603

[`DirectionsService`](https://developers.google.com/maps/documentation/javascript/reference#DirectionsService)有一种方法`route`来计算两点之间的一条或多条路线。

`fire`您可以为每一对调用此方法`station`并检查返回的路由以确定最短的路由。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T14:40:47.970

指示服务费率有限，并受配额限制。如果您有很多点，您将无法为所有点循环调用它。

一个建议是计算到所有点的直线距离，然后计算到这些结果中最接近的 8 个点的行驶距离（假设开始时有超过 8 个点）。我建议 8，因为这将是您可以在路线请求中放置的最大航点数，我认为如果您将 optimize_waypoints 设置为 true 并将所有这 8 个作为航点添加到往返行程中（起点和终点相同），您将获得第一个或最后一个航路点与起点之间的最短行驶距离。

另一个是使用谷歌的[距离矩阵 api](https://developers.google.com/maps/documentation/distancematrix/)

# python - 如何从 scikit-learn KMeans 中获取聚类中心的文本？

> ID：11345166
> 
> 赞同：6
> 
> 时间：2012-07-05T13:18:16.213
> 
> 标签：python, machine-learning, k-means, scikit-learn

我有一个我用来适应的字符串列表`sklearn.cluster.KMeans`：

```
X = TfidfVectorizer().fit_transform(docs)
km = KMeans().fit(X) 
```

现在我想以原始字符串表示形式获得集群中心。我知道`km.cluster_centers_`但无法弄清楚如何获得`docs`.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-05T13:27:39.780

*k*均值中没有集群中心的“原始表示” ；它们实际上不是输入集中的点（矢量化文档），而是多个点的手段。由于词袋表示破坏了术语的顺序，因此无法将此类方法转换回文档。

一种可能的近似是取一个质心向量，然后用`TfidfVectorizer.inverse_transform`它来找出哪些项在其中具有非零 tf-idf 值。

[*您可以使用k* -medoids](https://en.wikipedia.org/wiki/K-medoids)算法实现您想要的，该算法确实将实际输入点分配为质心，但这并未在 scikit-learn 中实现。

# c# - 从 asp.net 中的字节生成 pdf

> ID：11345167
> 
> 赞同：-7
> 
> 时间：2012-07-05T13:18:18.150
> 
> 标签：c#, asp.net, pdf

我有一个字节数组中的数据。现在我需要在单击按钮时从浏览器中的字节数组生成 PDF。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-05T13:30:45.160

如果该字节数组*是*文档，`pdf`那么您可以将字节写入响应缓冲区。

```
Response.ClearHeaders();
Response.Clear();
Response.AddHeader("Content-Type","application/pdf");
Resopnse.AddHeader("Content-Length",byteArray.Length.ToString());
Response.AddHeader("Content-Disposition","inline; filename=sample.pdf");
Response.BinaryWrite(byteArray);
Response.Flush();
Response.End(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T13:30:49.013

如果字节数组是 PDF 文件的二进制表示，您应该能够设置正确的响应内容类型，并使用对象`BinaryWrite`内的`Response`函数。

# java - 在不打开任何浏览器的情况下使用 Java 中的 selenium 驱动程序进行测试

> ID：11345173
> 
> 赞同：7
> 
> 时间：2012-07-05T13:18:46.040
> 
> 标签：java, selenium, selenium-chromedriver

我需要在 Java 中使用 selenium chrome 驱动程序进行测试。但不应打开 chrome 窗口。假设这是一个产品，不应打开任何窗口。

我也看过这个； [是否可以在 Selenium RC 中隐藏浏览器？](https://stackoverflow.com/questions/1418082/selenium-can-i-hide-the-browser) 但对我来说没有解决方案。测试应该是独立于操作系统的，我已经尝试过 HtmlUnitDriver 进行测试而不打开任何窗口，但它有一些问题。当有通过 id 查找组件时，它可能无法通过 id 查找组件。一些服务器可能会根据浏览器发送组件 id，我不知道应该使用什么 id 来测试。

因此，我正在尝试使用 chrome 驱动程序。

**有没有办法在不打开 chrome 窗口的情况下使用 chromedriver，或者在 Java 中不使用 Selenium 打开任何窗口的情况下进行测试？**

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-01-28T21:00:58.393

使用[PhantomJS](http://phantomjs.org/)但如果需要在 chromedriver 中运行它们并且你有资源，这个博客有一个很好的方法来[运行无头硒和 chrome](http://www.chrisle.me/2013/08/running-headless-selenium-with-chrome/)。要求您下载以下...

*   虚拟盒子
*   流浪汉
*   节点JS

如果您计划在未来实施[Jenkins](http://jenkins-ci.org/)或任何其他 CI，我强烈建议您使用 PhantomJS。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-02-28T20:07:45.027

在 selenium web 驱动程序中有无头模式。所以在无头模式下，您可以在不打开网络浏览器的情况下进行自动化。你也可以在无 gui 系统中部署你的应用程序

```
 ChromeOptions options = new ChromeOptions();
    // setting headless mode to true.. so there isn't any ui
    options.setHeadless(true);

    // Create a new instance of the Chrome driver
    WebDriver driver = new ChromeDriver(options); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-28T17:05:52.820

[GhostDriver 和 PhantomJS](http://assertselenium.com/2013/03/25/getting-started-with-ghostdriver-phantomjs/)应该让你做你想做的事。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-15T08:32:25.600

我喜欢这篇[文章](http://itkosmopolit.wordpress.com/2013/11/23/quick-start-of-running-selenium-webdriver-against-phantomjs-in-java-on-windows/)。

基本上你需要在 pom 中添加 PhantomJS 依赖（我喜欢使用 maven 进行依赖管理）：

```
<dependency>
    <groupId>com.github.detro.ghostdriver</groupId>
    <artifactId>phantomjsdriver</artifactId>
    <version>1.1.0</version>
</dependency> 
```

并运行代码

```
 System.setProperty( "phantomjs.binary.path", "c:\\path\\to\\phantomjs-1.9.8-windows\\phantomjs.exe" );
    WebDriver driver = new PhantomJSDriver();
    driver.get("http://www.google.com");
    driver.quit(); 
```

它适用于我的版本：

*   幻影JS 1.9.8
*   PhantomJS 驱动程序 1.1.0
*   硒 2.44.0

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-11T10:37:37.837

使用 Java，您可以使用 JSOUP 库，然后使用 selenium 来检查文档。

```
Document doc = Jsoup.connect("PUT THE LINK")
                  .userAgent("Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/85.0.4183.102 Safari/537.36")
                  .get(); 
```

然后，使用硒，您可以制作类似：`doc.getElementByClassName`等的东西。

# email - CakeEmail 在添加功能中不起作用

> ID：11345177
> 
> 赞同：0
> 
> 时间：2012-07-05T13:18:49.767
> 
> 标签：email, cakephp-2.0, cakephp-2.1

我正在尝试 CakeEmail，但我遇到了问题。我将代码添加到我的添加函数中，类似于博客教程的添加函数，但是当我添加一个项目时，它显示未定义变量。如果我删除电子邮件代码，它会起作用，如果我将其保留并刷新页面，项目会显示但没有电子邮件。

这是该函数的代码：

```
public function add()
    {
        $this->set('isAddValid', false);
        $this->set('addValidationErrors', false);

        if ($this->request->is('post'))
        {
            // If the save is successful, close the dialog and display the success message
            // Else, set the error flags.
            if ($this->LocalClock->save($this->request->data))
            {
                $this->set('localClocks', $this->request->data);
                $this->LocalClock->save($localClocks);
                $this->set('isAddValid', true);
                $this->set('addValidationErrors', false);

                $email = new CakeEmail('smtp');
                $email->from(array('me@example.com' => 'Local Clocks'));
                $email->to('you@example.com');
                $email->subject('New Local Clock Added');
                $email->send('A new local clock has been added.');
                CakeEmail::deliver('you@example.com', 'New local Clock', 'New Local Clock Added',
                    array('from' => 'localhost@localhost'));
            }
        } 
```

这是配置文件夹中的 email.php 文件（我只是从他们那里的默认文件中复制粘贴它）：

```
class EmailConfig {
    public $default = array(
        'transport' => 'Mail',
        'from' => 'you@localhost',
        //'charset' => 'utf-8',
        //'headerCharset' => 'utf-8',
    );

    public $smtp = array(
        'transport' => 'Smtp',
        'from' => array('site@localhost' => 'My Site'),
        'host' => 'localhost',
        'port' => 25,
        'timeout' => 30,
        'username' => 'user',
        'password' => 'secret',
        'client' => null,
        'log' => false,
        //'charset' => 'utf-8',
        //'headerCharset' => 'utf-8',
    );

    public $fast = array(
        'from' => 'you@localhost',
        'sender' => null,
        'to' => null,
        'cc' => null,
        'bcc' => null,
        'replyTo' => null,
        'readReceipt' => null,
        'returnPath' => null,
        'messageId' => true,
        'subject' => null,
        'message' => null,
        'headers' => null,
        'viewRender' => null,
        'template' => false,
        'layout' => false,
        'viewVars' => null,
        'attachments' => null,
        'emailFormat' => null,
        'transport' => 'Smtp',
        'host' => 'localhost',
        'port' => 25,
        'timeout' => 30,
        'username' => 'user',
        'password' => 'secret',
        'client' => null,
        'log' => true,
        //'charset' => 'utf-8',
        //'headerCharset' => 'utf-8',
    );
} 
```

任何帮助，将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T13:35:36.170

你的问题正是错误所说的 - “未定义的变量：localClocks”。

```
$this->set('localClocks', $this->request->data);
$this->LocalClock->save($localClocks); 
```

这不会设置变量 $localClocks - 它会将数据传递给变量，该变量可以从视图访问（但在控制器中不可访问）。

改成这个，你应该没问题（或者至少可以解决这个问题）：

```
$this->LocalClock->save($this->request->data); 
```

或者，如果你真的想把它分成两行：

```
$localClocks = $this->request->data;
$this->LocalClock->save($localClocks); 
```

如果您愿意，您仍然可以“设置”变量以在 View 中使用，但同样 -**使用 $this->set 不会使变量可以从 Controller 访问**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T18:11:36.803

我发现答案需要我在 email.php 文件中添加另一个设置。

我创建了一个 gmail 帐户，以便可以使用电子邮件功能。

代码非常简单：

```
public $gmail = array(
        'host' => 'ssl://smtp.gmail.com',
        'port' => 465,
        'username' => 'account@gmail.com',
        'password' => 'password',
        'transport' => 'Smtp',
        'timeout' => 1
    ); 
```

在 add() 函数中：

```
$email = new CakeEmail('gmail'); 
```

# php - 为什么没有僵尸进程

> ID：11345182
> 
> 赞同：0
> 
> 时间：2012-07-05T13:19:19.227
> 
> 标签：php, unix, zombie-process

由于我在下面的代码中没有等待children进程，但是运行后没有僵尸进程，这是为什么呢？
在我的理解中，僵尸进程是在这种情况下产生的：父进程退出而没有为其子进程调用'wait'或'waitpid'，所以系统进程**init**会拾取这些子进程，称为僵尸进程，不是吗？

```
<?php
define("PC", 10); // Process Count

if (!function_exists('posix_mkfifo')) {
    die("posix_mkfifo not existing\n");
}
if (!function_exists('pcntl_fork')) {
    die("pcntl_fork not existing");
}

// create pipe
$sPipePath = "my_pipe.".posix_getpid();
if (!posix_mkfifo($sPipePath, 0666)) {
    die("create pipe {$sPipePath} error");
}

$arrPID = array();
for ($i = 0; $i < PC; ++$i ) {
    $nPID = pcntl_fork(); // create a child process
    if ($nPID == 0) {
        // children
        $oW = fopen($sPipePath, 'w');
        fwrite($oW, $i."\n");
        fclose($oW);
        exit(0); // child end
    }elseif($nPID > 0) {
        // parent
        //array_push($arrPID, $nPID);
        //while($pid = pcntl_wait($nStatus, WNOHANG OR WUNTRACED) > 0) {
            //echo "$pid exit\n";
        //}
    }

}
// wait for all child process
//foreach($arrPID as $nPID){
    //echo "$nPID\n";
    //pcntl_waitpid($nPID, $nStatus); // cause process undead
    //pcntl_wait($nStatus);
//}

// parent
$oR = fopen($sPipePath, 'r');
$sData = '';
while(!feof($oR)) {
    $sData .= fread($oR, 1024);
}
fclose($oR);
unlink($sPipePath); // remove pipe

//check result
$arr2 = explode("\n", $sData);
$map = array();
foreach($arr2 as $i) {
    if (is_numeric(trim($i))) {
        $map[trim($i)] = '';
    }
}
echo count($map) == PC ? 'ok' : "error count " . count($map);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T04:18:10.727

它们只是僵尸进程，直到它们的父进程收割它们或死亡。一旦他们重新成为父母，`init`他们就会被收割，因此不再存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-16T17:25:57.977

你错误地理解了僵尸进程。

工艺流程

1.每当任何子进程终止时，它都会向父进程发送一些信号，然后父进程向操作系统发送请求以删除该子进程的进程表。

2.假设您的子进程在您的父进程处于睡眠状态的同时终止。所以现在父进程没有收到任何信号。

3.现在虽然子进程终止，但它仍然存在并占用进程ID以及进程表中的空间。现在你可以说你的子进程变成了僵尸。

实际场景：每个新进程都分配了一个唯一的进程ID。如果存在许多僵尸进程，它将不允许您创建新进程，因为进程 ID 是有限的

# oracle10g - 如何恢复 sysaux 表空间？

> ID：11345191
> 
> 赞同：3
> 
> 时间：2012-07-05T13:19:30.813
> 
> 标签：oracle10g, recover, tablespace

我正在使用 Oracle 10g，并且刚刚发现 SYSAUX 表空间具有 RECOVER 状态。当我检查数据文件时，我可以看到它自 2012 年 5 月以来没有更新。我知道数据库中的核心功能仍然可以，但发现了一些我认为与此问题有关的干扰。在网上看我发现你可以恢复这个表空间：例如使用 RMAN：

```
connect target /
RUN {
sql "alter tablespace sysaux offline";
RESTORE TABLESPACE sysaux;;
RECOVER TABLESPACE sysaux;
SQL "alter tablespace sysaux online";
} 
```

但是由于我们每天都在进行 RMAN 备份，因此自 5 月以来就存在此错误，备份中是否有可以恢复表空间的内容？

另一个网站建议：

```
SQL> set autorecovery on
SQL> recover datafile 3; 
```

但是这个命令如何恢复表空间呢？

我会很感激一些建议，并为我对这个表空间的糟糕了解而道歉。

问候

托马斯

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-21T09:58:21.560

该命令的作用是，RMAN 正在备份整个数据库，以防某些表空间损坏或数据文件损坏，使用 RMAN 可以恢复表空间或数据文件。

Rman 不会自动恢复或恢复，您必须定义要恢复或恢复的内容。

# iphone - 如何取消选择未选择的按钮

> ID：11345192
> 
> 赞同：0
> 
> 时间：2012-07-05T13:19:33.260
> 
> 标签：iphone

我正在开发一个应用程序。在那我将单选按钮（uiimageview）放在表格视图上并应用手势效果。我能够更改选定的按钮图像。但是我怎样才能更改取消选择按钮的图像。我在手势选择器中的代码方法看起来像

```
-(void)cellchange:(UITapGestureRecognizer *)recognizer
{
UIImage *cellselect=[UIImage imageNamed:@"radio_on_1.png"];
UIImage *cellunselet=[UIImage imageNamed:@"radio_off_1.png"];
 UIImageView *img=(UIImageView *)recognizer.view;
for(int k=0;k<[ages count];k++)
{

    if(img.tag==k)
    {
        UIImage *selectimg=img.image;
        if([selectimg isEqual:cellselect])
        {
            img.image=[UIImage imageNamed:@"radio_off_1.png"];

        }
        if([selectimg isEqual:cellunselet])
        {
            img.image=[UIImage imageNamed:@"radio_on_1.png"];
        }

    }
     }
    } 
```

所以请告诉我如何更改未选择的按钮图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T15:15:39.803

我相信更好的方法是使用“按钮”而不是“图像”。点击时检查它是处于选中模式还是未选中模式，然后相应地为按钮设置图像！

# java - Gradle 没有找到 tools.jar

> ID：11345193
> 
> 赞同：188
> 
> 时间：2012-07-05T13:19:35.087
> 
> 标签：java, gradle, groovy, build

我正在使用带有 gradle 的 javadoc doclet，所以我需要使用包 tools.jar，它位于 jdk 的 lib 文件夹中（在我的情况下为 1.6.0_26）。

关键是 gradle 不会自动使用它，所以我将该工具包添加到我的 libs 文件夹中，然后将其添加到 dependencies.gradle 。

现在我想直接把它从我的 JDK home 带到我的 dependencies.gradle 中。有没有办法做到这一点？我在 dependencies.gradle 中尝试了下一个：

```
compile files("${System.properties['java.home']}/lib/tools.jar") 
```

但是编译的时候没有找到。

* * *

## 回答 #1

> 赞同：161
> 
> 时间：2016-02-25T09:25:47.597

当我尝试通过 CLI 运行命令时遇到了这个问题。

系统查看 JRE 文件夹（即 `D:\Program Files\Java\jre8\bin`. 如果我们在那里看，没有`Tools.jar`，因此错误。

`JDK`在我的情况下，您需要找到它的位置： `D:\Program Files\Java\jdk1.8.0_11`，如果您查看`lib`目录，您将看到`Tools.jar`.

我做了什么我创建了一个新的环境变量`JAVA_HOME`： [![在此处输入图像描述](../Images/4a18d09b336f334d5eceed661614891b.png)](https://i.stack.imgur.com/rxvGT.jpg)

然后您需要编辑您的 PATH 变量以包含 JAVA_HOME，即 `%JAVA_HOME%/bin;` [![在此处输入图像描述](../Images/c9e3c038f6376719bec3be3a5c7d381f.png)](https://i.stack.imgur.com/rzg4E.jpg)

重新打开命令提示符并运行。

* * *

## 回答 #2

> 赞同：80
> 
> 时间：2012-07-05T13:47:52.260

找到了。**系统属性“java.home”不是 JAVA_HOME 环境变量。**JAVA_HOME 指向 JDK，而 java.home 指向 JRE。有关更多信息，请参阅[该页面](http://javahowto.blogspot.de/2006/05/javahome-vs-javahome.html)。

Soo ... 我的问题是我的起点是 jre 文件夹（C:\jdk1.6.0_26\jre），而不是我想的 jdk 文件夹（C:\jdk1.6.0_26）（tools.jar 在 C :\jdk1.6.0_26\lib 文件夹）。dependencies.gradle 中的编译行应该是：

```
compile files("${System.properties['java.home']}/../lib/tools.jar") 
```

* * *

## 回答 #3

> 赞同：75
> 
> 时间：2016-08-19T13:21:28.763

我使用 Eclipse 尝试执行 Gradle 任务时遇到了同样的错误。每次我运行命令（即战争）时，该过程都会引发异常，例如：

> 找不到 tools.jar。请检查 C:\Program Files\Java\Jre8" 是否是有效的 JDK 安装。

我尝试了这篇文章中列出的解决方案，但没有一个解决了这个问题。这是我的解决方案：

1.  转到“Gradle 任务”视图
2.  右键单击要执行的任务
3.  选择打开 Gradle 运行配置
4.  在“Java Home”选项卡中，选择您的本地 JDK 存储库，然后单击“确定”

再次奔跑，享受！

* * *

## 回答 #4

> 赞同：58
> 
> 时间：2016-06-29T12:30:33.283

我刚刚添加了一个`gradle.properties`包含以下内容的文件：

```
org.gradle.java.home=C:\\Program Files\\Java\\jdk1.8.0_45 
```

* * *

## 回答 #5

> 赞同：42
> 
> 时间：2017-07-27T15:47:25.877

**我有一个使用Ubuntu**的类似案例。这台机器只安装了**JRE**。所以，我只是执行了下面的命令来安装**JDK**。

`sudo apt install openjdk-8-jdk`

* * *

## 回答 #6

> 赞同：25
> 
> 时间：2016-03-11T11:44:32.673

我也在为这个解决方案而苦苦挣扎。[如此处所述，使用 Gradle 找到了](http://mohammed-technical.blogspot.com/2016/03/getting-jdk-information-in-gradle-to.html?soo)一种更好的方法。我们可以从 Gradle 本身获取 JVM/JDK 信息。

```
dependencies {
   runtime files(org.gradle.internal.jvm.Jvm.current().toolsJar)
} 
```

很简单。

* * *

## 回答 #7

> 赞同：25
> 
> 时间：2021-05-20T10:42:38.360

**在 macOS 大苏尔**

出现此问题的原因`JAVA_HOME`是 macOS Big Sur 中未正确设置环境变量。

`JAVA_HOME`第 1 步 -通过在终端中打印其值来确认您有问题。您很可能会得到一个空字符串。

```
echo $JAVA_HOME 
```

第 2 步 - 在您的机器上找到正确的路径

```
/usr/libexec/java_home -V 
```

复制与“Java SE 8”关联的路径，通常看起来像`/Library/Java/JavaVirtualMachines/jdk1.8.0_202.jdk/Contents/Home`

第 3 步 -`.zshenv`使用编辑`nano`

```
nano ~/.zshenv 
```

第 4 步 - 将第 2 步中的路径添加到文件中，如下所示

```
export JAVA_HOME=YOUR_JAVA_PATH 
```

例子：

```
export JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_202.jdk/Contents/Home 
```

第 5 步 - 获取更新的`.zshenv`文件以激活环境变量

```
source ~/.zshenv 
```

第 6 步 - 打印以确认路径

```
echo $JAVA_HOME 
```

* * *

## 回答 #8

> 赞同：21
> 
> 时间：2018-03-19T21:19:41.423

在 CentOS7 中，开发包会安装 tools.jar。该文件在 java-1.8.0-openjdk 中不存在

`sudo yum install java-1.8.0-openjdk-devel`

* * *

## 回答 #9

> 赞同：19
> 
> 时间：2016-08-08T09:25:33.363

将此添加到`gradle.properties`：

> org.gradle.java.home=C:\Program Files\Java\jdk1.8.0_91

* * *

## 回答 #10

> 赞同：12
> 
> 时间：2020-12-08T06:17:25.727

我在 Mac 上的解决方案：

将此行添加到`gradle.properties`：

```
org.gradle.java.home=/Library/Java/JavaVirtualMachines/jdk1.8.0_271.jdk/Contents/Home 
```

不是这个：

```
org.gradle.java.home=/Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home 
```

您可以打开最后一个主目录，会发现没有`lib/tools.jar`文件存在，所以将路径更改为`JavaVirtualMachines/jdk1.8.0_271.jdk`，它对我有用。

顺便说一句，在终端中，我回显了`$JAVA_HOME`它，它得到了第一条路径，而不是第二条，我认为这就是我的 Gradle 无法正常工作的原因。

* * *

## 回答 #11

> 赞同：11
> 
> 时间：2015-03-02T08:31:58.350

可能为时已晚两年，但我最近遇到了同样的问题，这是我在找到[这篇文章后](https://stackoverflow.com/questions/25626757/correct-way-of-referencing-tools-jar-in-a-cross-platform-way/25628156#25628156)最终得到的解决方案：

```
import javax.tools.ToolProvider

dependencies {
  compile (
    files(((URLClassLoader) ToolProvider.getSystemToolClassLoader()).getURLs()),
    ...
  }
} 
```

如果 java.home 指向一个不在 JDK 目录下的目录，甚至在 Mac OS 上你有 classes.jar 而不是 tools.jar，它应该可以工作。

* * *

## 回答 #12

> 赞同：11
> 
> 时间：2018-08-16T14:46:55.083

在 Centos 7 中，我发现**只有 JDK 有`tools.jar`，而 JRE 没有**。我已经安装了 Java 8 JRE( `yum install java-1.8.0-openjdk`)，但没有安装 JDK( `yum install java-1.8.0-openjdk-devel`)。

安装后者解决了这个问题。另外，记得设置`JAVA_HOME`.

* * *

## 回答 #13

> 赞同：10
> 
> 时间：2018-02-13T17:56:25.990

在 Windows 10 上，我遇到了同样的问题，这就是我解决问题的方法；

1.  使用权`Advance System Settings>Environment Variables>System Variables`
2.  选择**PATH**覆盖默认 `C:\ProgramData\Oracle\Java\javapath`
3.  使用您自己的 jdk 安装，即**JAVA_HOME** =`C:\Program Files\Java\jdk1.8.0_162`

* * *

## 回答 #14

> 赞同：9
> 
> 时间：2018-05-22T10:04:21.620

在我的系统（Win 10、JRE 1.8.0、Android Studio 3.1.2、Gradle 4.1）上`tools.jar`，JRE 目录（`C:\Program Files\Java\jre1.8.0_171`）中没有。

但是，我发现它`C:\Program Files\Android\Android Studio\jre\lib`并尝试设置**`JAVA_HOME=C:\Program Files\Android\Android Studio\jre`**

这对我行得通）！

* * *

## 回答 #15

> 赞同：5
> 
> 时间：2020-11-02T11:36:25.337

为我解决了以下问题：

1.  在 C:\Program Files\Android\Android Studio\jre\lib 中找到 tools.jar
2.  复制粘贴到 C:\Program Files (x86)\Java\jre1.8.0_271\lib
3.  再次运行代码，它工作。

* * *

## 回答 #16

> 赞同：4
> 
> 时间：2018-06-21T12:21:01.993

如果您使用终端构建并且遇到此错误，您可以在`gradle.properties`文件中指向与 android studio 捆绑的 jdk：

```
org.gradle.java.home=/usr/local/android-studio/jre 
```

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2017-11-13T11:35:35.563

**Linux**

`/etc/environment`在任何文本编辑器（如*nano*或*gedit* ）中打开并添加以下行：

```
JAVA_HOME="/usr/lib/jvm/open-jdk" 
```

**视窗**

1.  启动系统控制面板小程序（开始 - 设置 - 控制面板 - 系统）。
2.  选择高级选项卡。
3.  单击环境变量按钮。
4.  在系统变量下，单击添加按钮，然后经过以下几行：

    在变量名中：`JAVA_HOME`

    在变量值中： `C:\Program Files\Java\jdk1.x.x_xxx`

    在哪里`x.x_xxx`jdk 版本你可以从这里得到你的 jdk 版本`C:\Program Files\Java`

5.  在系统变量下，选择路径，然后单击编辑，然后单击新建按钮，然后通过以下行：

    `%JAVA_HOME%/bin;`

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2018-01-07T02:26:34.130

这对我有用：

我收到消息

> 任务 ':app:compileDebugJavaWithJavac' 执行失败。
> 
> > 找不到 tools.jar。请检查 C:\Program Files\Java\jre1.8.0_121 是否包含有效的 JDK 安装。

*   在 Android Studio 中，检查您的 SDK 位置。
*   文件、项目结构、SDK 位置、JDK 位置。
*   示例：C:\android-studio\android-studio\jre
*   将 C:\android-studio\android-studio\jre\lib 文件夹中的 tools.jar 文件复制到 C:\Program Files\Java\jre1.8.0_121\lib 文件夹中。
*   重试。

* * *

## 回答 #19

> 赞同：3
> 
> 时间：2019-03-13T17:17:22.907

我以这种方式解决了问题：

*   [在http://www.java2s.com/Code/Jar/t/Downloadtools180jar.htm](http://www.java2s.com/Code/Jar/t/Downloadtools180jar.htm)下载文件 tools-1.8.0.jar
*   解压文件并重命名为 tools.jar
*   复制到 C:\Program Files\Java\jre1.8.0_191\lib 文件夹
*   重试

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2016-09-10T04:48:54.567

像其他答案一样，我在**gradle.properties**文件中设置**了 org.gradle.java.home**属性。但是带有 \ 分隔符的路径不起作用（在 Windows 10 上构建）：

 **> 通过“org.gradle.java.home”提供的 Java 主目录无效。无效目录：C:Program FilesJavajdk1.8.0_65

所以而不是

> org.gradle.java.home=C:\Program Files\Java\jdk1.8.0_65

我不得不使用

> org.gradle.java.home=C:/Program Files/Java/jdk1.8.0_65

然后构建成功

问题是项目是用 JRE 而不是 JDK 构建的，因为我是从 eclipse 构建它的，所以这也有效：

*   在 Window>Preferences>Gradle>Arguments 中指定 Workspace JRE 并指定您的 JDK。
*   在 Window>Preferences>Java>InstalledJREs 中指定您的 JDK 作为默认值

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2017-04-25T14:19:51.510

在我的情况下（Windows 10）在 Java 更新后我丢失了我的环境变量，所以我修复了再次添加变量，基于以下步骤[https://confluence.atlassian.com/doc/setting-the-java_home-variable-in -windows-8895.html](https://confluence.atlassian.com/doc/setting-the-java_home-variable-in-windows-8895.html)

* * *

## 回答 #22

> 赞同：2
> 
> 时间：2020-10-17T09:50:26.113

将以下代码行放入 gradle.properties 文件中：

```
org.gradle.java.home=C:\\Program Files\\Java\\jdk1.8.0_45 
```

[示例图片](https://i.stack.imgur.com/7LmtZ.png)

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2012-07-05T13:34:12.090

你确定 tools.jar 在编译类路径上吗？也许路径不正确。

```
task debug << {
    configurations.compile.each { println it }
} 
```

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2017-12-18T03:35:17.207

在“Open Gradle Run Configuration”中通过JAVA_HOME选项卡添加JDK路径即可解决问题。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2019-02-22T18:17:42.727

我已经尝试了大多数顶级选项，但似乎我的环境设置有问题，所以他们没有帮助。为我解决问题的是**重新安装** `jdk1.8.0_201`，`jre1.8.0_201`这为我解决了错误。希望对某人有所帮助。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2021-01-17T13:28:31.647

对我来说，尝试使用音频播放器颤振库后发生此错误。为了解决我得到了文件夹的tools.jar：

> C:\Program Files\Android\Android Studio\jre\lib

并粘贴在

> C:\Program Files\Java\jre1.8.0_181\lib。

在此之后，构建工作正常。

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2021-04-16T10:23:09.487

**找不到 tools.jar**

苹果系统

```
echo export "JAVA_HOME=\$(/usr/libexec/java_home)" >> ~/.bash_profile 
```

并重启壳牌

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2021-06-19T12:56:26.977

**我的 Android Studio 版本：4.2.1**

“ **tools.jar”**由 android studio 编译所需的 Oracle JDK 提供 - 在我的 PC 中将 android studio 更新到最新版本后，我遇到了这个问题。

**要解决此问题，请执行以下步骤：**

1.  在 Android Studio 文件 -> 项目结构 -> SDKs（在平台设置下）

    A) 如果假设中间窗格中不存在 JDK/JDK 主路径，则通过在中间窗格中按“+”符号添加 JDK 路径（中间窗格还包含已下载的 Android SDK）

    B）Java sdk 通常存在/安装在路径 64 位 =>“C:\Program Files\Java\jdk1.X.Y_ABC”（在我的 PC 中为 1.8.0_202）或 32 位 =>“C: \Program Files (x86)\Java\jdk1.X.Y_ABC"

2.  如果您的 PC 中没有安装 JDK，请从 Oracle Java 网站 [https://www.oracle.com/java/technologies/javase/javase-jdk8-downloads.html下载并安装](https://www.oracle.com/java/technologies/javase/javase-jdk8-downloads.html)

3.  在系统环境变量中设置 JDK 和 JRE 路径（从步骤 2 中提到的网页下载）

    A）按windows键类型“编辑系统环境变量”并打开应用程序

    B) 转到高级 -> 环境变量在系统变量下添加 JAVA_HOME 和 JRE_HOME 如下

[设置 Windows 系统环境变量](https://i.stack.imgur.com/cUUlc.png)

4.  在用户变量下的Path环境变量中添加jdk lib路径（只有在前面的步骤没有解决错误时才需要此步骤） C:\Program Files\Java\jdk1.X.Y_ABC\lib

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2021-08-15T13:25:51.353

对于 Windows，将 JDK 主路径添加到 Gradle 属性文件为 org.gradle.java.home。如果您没有 gradle.properties 文件，则创建一个新文件并添加

例如：org.gradle.java.home=C:\Program Files\Java\jdk1.8.0_241**

# mysql - 用于从子 ID 获取完整父历史记录的 MYSQL 查询

> ID：11345196
> 
> 赞同：1
> 
> 时间：2012-07-05T13:19:43.703
> 
> 标签：mysql, parent-child

> **可能重复：**
> [Mysql 递归？](https://stackoverflow.com/questions/4345909/mysql-recursion)

我正在尝试在单个查询中从子 ID 获取完整的父信息。可能吗？

例子 ：

```
 id  |  ts_name  |  parent_id
    1  |  admin  |  0
    2  |  user  |  0
    3  |  card  |  0
    4  |  pin  |  0
    5  |  venkat  |  0
    7  |  admin_sub  |  1
    18  |  admin_sub2  |  7
    19  |  admin_sub2.1  |  18
    23  |  admin_sub1  |  7
    27  |  admin_sub3  |  7
    30  |  ghgfh  |  26
    37  |  vbnvbn  |  7
    38  |  add_sub_1  |  1
    41  |  admin_sub2.2.1  |  19
    42  |  admin_sub2.1.1.1  |  20
    43  |  admin_sub2.1.1.1  |  19 
```

所以我想要得到的是

当我给孩子 id = 19 它应该返回：18,7,1

怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:42:14.203

您需要在 sql server (http://en.wikipedia.org/wiki/PL/SQL) 上用 plsql 语言创建一个函数，我不太了解语法，但总体算法如下所示：

```
function getParents(id):
    returns varchar(1000);
    IS result varchar(1000);
    begin
        while (id ! = 0)
            id = getParent(id);
            result = id + ', ';

        removeLastComma(result);
        return result;
    end

function getParent(parent):
    returns varchar(20);
    IS result varchar(20)
    begin
        select id into result from example_table where parent_id = parent
        return result
    end

removeLastComma(string):
     // cut last two characters of the string
     // return processed string 
```

pl/sql 教程： http: [//plsql-tutorial.com/plsql-functions.htm](http://plsql-tutorial.com/plsql-functions.htm)

可能它不能用作复制粘贴解决方案，但我希望它会成为一个有用的入门者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T13:30:29.230

不幸的是，如果不更改表结构或执行大量查询，则无法在 MySQL 中完成此操作。

见[https://stackoverflow.com/a/4345944/574303](https://stackoverflow.com/a/4345944/574303)

# ruby-on-rails - Ruby Rails Gem 检测其他语言

> ID：11345198
> 
> 赞同：2
> 
> 时间：2012-07-05T13:19:45.937
> 
> 标签：ruby-on-rails

是否有宝石可以检测语言是否为非英语？

我需要传入一个字符串，如果它不是英文的，则返回一个适当的值。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T23:05:43.703

谷歌翻译 API 有一个 gem，它可以处理语言检测等。这是一项付费服务​​：[https ://developers.google.com/translate/v2/libraries](https://developers.google.com/translate/v2/libraries)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-18T06:50:07.433

[WhatLanguage gem](https://github.com/peterc/whatlanguage)是您最好的选择。但它并不完美。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-22T09:49:37.693

我正在使用我非常喜欢的[CLD](https://github.com/jtoy/cld)，简洁易用，试一试。

# javascript - 用 addEventListener 替换 onclick

> ID：11345199
> 
> 赞同：-1
> 
> 时间：2012-07-05T13:19:52.050
> 
> 标签：javascript

在 for 循环中，我找到了这个遗留代码，我想使用`addEventListener("click"...)`而不是当前的`onclick`. 如何转换这段代码？我无法理解如何将函数作为`addEventListener`方法的第二个参数传递。

```
el.onclick = (function() {
                  var value="num"+i;
                  //
                  return function() {test(value);}
})(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T13:22:38.020

`=`您将所有内容都放在第二个参数的位置（显然，`;`末尾除外）的右侧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T13:24:45.663

```
el.addEventListener("click", function(i) {
    var value="num"+i;          
    return function() {
        test(value);
    };
}(i), false); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T13:24:55.350

```
el.addEventListener( 'click', function() {
    var value = "num" + i;
    test( value );
}, false );

// If you want named functions
el.addEventListener( 'click', someName, false );
function someName() {
    var value = "num" + i;
    test( value );
} 
```

遗留代码将执行`value`位置的闭包放入其中`test(value)`，但那里的代码也是如此。

此外，您的旧代码将`onclick`处理程序包装在一个自执行函数中，因此*实际*的事件处理程序就是返回的内容。因此，为什么，我刚刚写的代码是一样的。

# jquery - jQuery：暂停或延迟函数

> ID：11345203
> 
> 赞同：0
> 
> 时间：2012-07-05T13:20:09.477
> 
> 标签：jquery, ajax

所以情况如下：

我有一个从服务器提取数据的递归异步 AJAX 调用。此递归调用仅在用户登录时发生一次。我有另一个页面需要 AJAX 调用才能导航（基本上是延迟加载的树）。当第一个 AJAX 调用发生时，这些其他调用需要一段时间才能完成，而且由于第一个调用可能会发出多达 2,000 个请求，因此这种延迟有时会相当长。

基本上我想要实现的是在进行另一个调用时“暂停”递归调用。伪代码：

```
function recursiveAjax(){    
    $.ajax( {
        async : true,
        url : 'someurl',
        dataType : 'json',
        beforeSend : function(xhr) {
            // do stuff
        },
        error : function(xhr, ajaxOptions, thrownError) {
            // handle errors
        },
        success : function(data) {
            //conditions
            recursiveAjax();
        }
    });
}

function navigationAjax(){    
    $.ajax( {
        async : true,
        url : 'someurl',
        dataType : 'json',
        beforeSend : function(xhr) {
            // pause recursiveAjax();
        },
        error : function(xhr, ajaxOptions, thrownError) {
            // handle errors
        },
        success : function(data) {
            //conditions
            // resume recursiveAjax();
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T13:26:39.500

最简单的方法：

```
window.recurse = true;
function recursiveAjax(){    
    $.ajax( {
        async : true,
        url : 'someurl',
        dataType : 'json',
        beforeSend : function(xhr) {
            // do stuff
        },
        error : function(xhr, ajaxOptions, thrownError) {
            // handle errors
        },
        success : function(data) {
            //conditions
            if(window.recurse){
               recursiveAjax();
            }
        }
    });
}

function navigationAjax(){    
    window.recurse=false;
    $.ajax( {
        async : true,
        url : 'someurl',
        dataType : 'json',
        beforeSend : function(xhr) {
            // pause recursiveAjax();
        },
        error : function(xhr, ajaxOptions, thrownError) {
            // handle errors
        },
        success : function(data) {
            //conditions
            window.recurse=true;
            recursiveAjax();
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T13:29:49.937

JavaScript 是一种异步语言，因此您可以像在其他注释中一样使用回调（见上文）。但是想想你的问题，大多数时候最好在 web 中异步工作。你真的想要这个吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T13:42:16.213

由于您可能不希望同时执行两个请求，因此让递归方法执行其中一个。当您需要导航调用时设置一个标志，并让递归方法执行该请求下一次迭代：

```
var navigationCall = false;

function recursiveAjax(){
  if (navigationCall) {
    navigationCall = false;
    $.ajax( {
      async : true,
      url : 'someurl',
      dataType : 'json',
      error : function(xhr, ajaxOptions, thrownError) {
        // handle errors
      },
      success : function(data) {
        //conditions
        recursiveAjax();
      }
    });
  } else {
    $.ajax( {
      async : true,
      url : 'someurl',
      dataType : 'json',
      beforeSend : function(xhr) {
        // do stuff
      },
      error : function(xhr, ajaxOptions, thrownError) {
        // handle errors
      },
      success : function(data) {
        //conditions
        recursiveAjax();
      }
    });
  }
}

function navigationAjax(){
  navigationCall = true;
} 
```

注意：您可能希望添加一个`window.TimeOut`调用来执行递归，以限制对服务器的请求流。调用服务器的频率超过人眼可以看到的变化是没有意义的。

# asp.net - 使用 Javascript 设置 ModalPopupExtender "Y" 属性

> ID：11345209
> 
> 赞同：2
> 
> 时间：2012-07-05T13:20:24.620
> 
> 标签：asp.net, modalpopupextender, scriptmanager

我有一个 ModalPopupExtender。

我可以使用类似的 javascript 访问 Modalpopupextender

```
$find('expPopup_invite') 
```

ModalPopupExtnder 有一个属性称为**Y**

我想使用 javascript 设置这个属性。

例子：

要使用 javascript 显示 ModalPopupExtender，我可以：

```
$find('expPopup_invite').show(); 
```

但我想设置这个 Y 属性。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T13:36:16.420

根据 ASP.NET Ajax 命名标准，

> 属性访问器应始终分别以“get_”和“set_”为前缀

[命名标准](http://www.asp.net/ajaxlibrary/act_contribute_codingStandards_Naming.ashx)

因此，在这种特殊情况下，您可以使用：

```
$find('expPopup_invite').set_Y(123); 
```

# r - 为 Mechanical Turk 清理文本？

> ID：11345212
> 
> 赞同：3
> 
> 时间：2012-07-05T13:20:26.070
> 
> 标签：r, mechanicalturk

是否有预先存在的功能来为 Mechanical Turk 清理 data.frame 的字符列？这是它挂断的线路示例：

```
x <- "Duke\U3e32393cs B or C, no concomittant malignancy, ulcerative colitis, Crohn\U3e32393cs disease, renal, heart or liver failure" 
```

我认为这些是 unicode 字符，但 MT 不允许我在其中继续使用它们。我显然可以很容易地对这些进行正则表达式，但我使用了相当多的 MT，并希望有一个更通用的解决方案来删除所有非 ascii 字符。

**编辑**

我可以按如下方式删除编码：

```
> iconv(x,from="UTF-8",to="latin1",sub=".")
[1] "Duke......s B or C, no concomittant malignancy, ulcerative colitis, Crohn......s disease, renal, heart or liver failure" 
```

*但这仍然让我缺乏对任何*元素使用非 utf8 编码的向量的更通用的解决方案。

```
> dput(vec)
c("Colorectal cancer patients Duke\U3e32393cs B or C, no concomittant malignancy, ulcerative colitis, Crohn\U3e32393cs disease, renal, heart or liver failure", 
"Patients with Parkinson\U3e32393cs Disease not already on levodopa", 
"hi") 
```

请注意，常规文本正在编码“未知”，它没有转换为“latin1”，因此使用 iconv 的简单解决方案失败。我在下面尝试了一种更细微的解决方案，但我对此并不满意。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T14:46:25.857

尝试回答我自己的问题，希望有人有更好的方法，因为我不相信这会处理所有时髦的文本：

```
sanitize.text <- function(x) {
  stopifnot(is.character(x))
  sanitize.each.element <- function(elem) {
    ifelse(
      Encoding(elem)=="unknown",
      elem,
      iconv(elem,from=as.character(Encoding(elem)),to="latin1",sub="")
    )
  }
  x <- sapply(x, sanitize.each.element)
  names(x) <- NULL
  x
}

> sanitize.text(vec)
[1] "Colorectal cancer patients Dukes B or C, no concomittant malignancy, ulcerative colitis, Crohns disease, renal, heart or liver failure"
[2] "Patients with Parkinsons Disease not already on levodopa"                                                                              
[3] "hi" 
```

* * *

以及处理 MT 的其他导入怪癖的功能：

```
library(taRifx)
write.sanitized.csv <- function( x, file="", ... ) {
  sanitize.text <- function(x) {
    stopifnot(is.character(x))
    sanitize.each.element <- function(elem) {
      ifelse(
        Encoding(elem)=="unknown",
        elem,
        iconv(elem,from=as.character(Encoding(elem)),to="latin1",sub="")
      )
    }
    x <- sapply(x, sanitize.each.element)
    names(x) <- NULL
    x
  }
  x <- japply( df=x, sel=sapply(x,is.character), FUN=sanitize.text)
  colnames(x) <- gsub("[^a-zA-Z0-9_]", "_", colnames(x) )
  write.csv( x, file, row.names=FALSE, ... )
} 
```

**编辑**

由于缺少放置此代码的更好位置，您可以找出字符向量的哪个元素导致了即使上面的函数也无法解决的问题，例如：

```
#' Function to locate a non-ASCII character
#' @param txt A character vector
#' @return A logical of length length(txt) 
locateBadString <- function(txt) {
  vapply(txt, function(x) {
    class( try( substr( x, 1, nchar(x) ) ) )!="try-error"
  }, TRUE )
} 
```

**编辑2**

我*认为*这应该有效：

```
iconv(x, to = "latin1", sub="") 
```

感谢@Masoud 在这个答案中：[https ://stackoverflow.com/a/20250920/636656](https://stackoverflow.com/a/20250920/636656)

# java - 如何单击特定行表中的按钮

> ID：11345220
> 
> 赞同：2
> 
> 时间：2012-07-05T13:21:20.397
> 
> 标签：java, selenium, button

自从我昨天安装以来，我是 Selenium IDE 的新手。无论如何，我似乎无法弄清楚或找到我的问题的解决方案；

我在网页上有一张桌子：

```
|name|description|something|delete button | 
```

所以我在表中有几行，如果单击按钮删除它会记住它的位置 `xpath=(//a[contains(text(),'Delete')])[3]` ，但我不希望它记住删除第三行但我希望它引用它的名称，例如如果 |name| 是“测试人员”单击同一行中的删除按钮。

我希望你能理解我的问题并能帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T14:33:18.907

这可以通过[XPath](http://www.w3.org/TR/xpath/)轻松实现。网上有很多教程，试试看。该规范也是一个令人惊讶的好读物！

无论如何，如果您的表格行看起来像这样（根据您提供的数据，我无法做出更好的猜测）：

```
<tr>
    <td class='name'>tester</td>
    <td class='description'>Some description</td>
    <td class='something'>Some text</td>
    <td class='actions'><a onclick="doSomething()">Delete</a></td>
</tr> 
```

您将根据名称选择按钮，如下所示：

```
//tr/td[@class='name' and text()='tester']/following-sibling::td/a[text()='Delete'] 
```

选择：

1.  任何`<tr>`
2.  然后是它的`<td>`孩子：
    *   “类”属性等于“名称”
    *   内部文本等于“tester”
3.  任何以下兄弟姐妹`td`
4.  然后是它的`<a>`孩子：
    *   内部文本等于“删除”

# wpf - 绑定到实体框架

> ID：11345224
> 
> 赞同：0
> 
> 时间：2012-07-05T13:21:33.050
> 
> 标签：wpf, entity-framework, binding

在[msdn 文档](http://msdn.microsoft.com/en-us/library/cc716735.aspx)中，建议不要将控件直接绑定到对象查询：

> *我们建议您不要将控件直接绑定到 ObjectQuery。相反，将控件绑定到 Execute 方法的结果。*

我还在这里阅读了一些关于 SO 的答案，这些答案推荐它并且不绑定到模型本身的实例。尽管如此，我还是找不到为什么不推荐它，因为到目前为止我所做的所有测试似乎都运行良好。

谁能阐明为什么我不应该将这些对象用于绑定的原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:31:37.170

如果您点击[该信息下方的链接](http://msdn.microsoft.com/en-us/library/bb738469.aspx)，他们会给出解释：

> 我们建议您不要将控件直接绑定到 ObjectQuery。相反，将控件绑定到 Execute 方法的结果。***以这种方式绑定可以防止在绑定期间多次执行查询。***

您不希望在绑定期间执行查询。我不希望绑定更新在我不知情的情况下触发数据库查询。此外，我发现绑定到实体会直接导致其他问题。通过保留对象，您还需要保留 ObjectContext。通常，您应该使 ObjectContext 尽可能短，最好在 using 块中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T13:31:29.687

对于“我为什么不应该将控件绑定到 ObjectQuery”的问题：

[从这里](http://msdn.microsoft.com/en-us/library/bb738469.aspx)引用：

> 为确保数据源是最新的，您可能需要使用 Execute 方法再次执行查询。这会将控件绑定到一个新的 ObjectResult。

如果您不调用`Execute`，那么与执行后查询实际返回的内容相比，您的 UI 中显示的内容可能不是最新的。当然，当数据库发生更改时，绑定不会自动更新。

第二点：

> 我们建议您不要将控件直接绑定到 ObjectQuery。相反，将控件绑定到 Execute 方法的结果。以这种方式绑定可以防止在绑定期间多次执行查询。

# iphone - Cordova 1.7 访问摄像头

> ID：11345228
> 
> 赞同：0
> 
> 时间：2012-07-05T13:21:51.670
> 
> 标签：iphone, cordova

嗨，我以前制作过 iPhone 应用程序，但我是混合应用程序的新手，只是想知道如何通过 cordova 访问相机功能？我已经尝试了一些教程，但是当我按下 xcode 中的按钮时似乎没有任何反应，它说收到内存警告。谁能帮忙？

这是我到目前为止所尝试的

```
<!DOCTYPE html>
<html>
    <head>
        <title>Capture Photo</title>

        <script type="text/javascript" charset="utf-8" src="cordova-1.7.0.js"></script>
        <script type="text/javascript" charset="utf-8">

            var pictureSource,
                destinationType

            document.addEventListener("deviceready",loaded,false);

            function loaded() {
                pictureSource=navigator.camera.PictureSourceType;
                destinationType=navigator.camera.DestinationType;
            }

            function getPhoto(imageData) {
                var smallImage = document.getElementById('smallImage');

                smallImage.style.display = 'block';

                smallImage.src = "data:image/jpeg;base64," + imageData;
            }

            function capturePhoto() {
                navigator.camera.getPicture(getPhoto, onFail, { quality: 50 });
            }

            function onFail(message) {
                alert('Failed because: ' + message);
            }

            </script>
    </head>
    <body>
        <button onclick="capturePhoto();">Capture Photo</button> <br>
        <img style="display:none;width:60px;height:60px;" id="smallImage" src="" />
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T17:21:55.213

您默认使用太多内存的数据 url 返回。切换到文件 uri。

```
function getPhoto(imageData) {
    var smallImage = document.getElementById('smallImage');

    smallImage.style.display = 'block';

    smallImage.src = imageData;
}

function capturePhoto() {
    navigator.camera.getPicture(getPhoto, onFail, { quality: 50,
        destinationType: destinationType.FILE_URI });
} 
```

# iphone - 转换为 iPhone 的 sRGB？

> ID：11345230
> 
> 赞同：2
> 
> 时间：2012-07-05T13:21:53.560
> 
> 标签：iphone, macos, ipad, photoshop, srgb

如果我要为 iPhone 或 iPad 保存图像，是否应该在 Adob​​e Photoshop/Illustrator 中选择“转换为 sRGB”？

[为什么你应该使用 sRGB](http://www.petapixel.com/2009/09/17/why-you-should-probably-use-srgb/)说你应该在网络上使用 sRGB。但是，对于 iPhone 应用程序呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T15:09:47.133

您应该在 iOS 上使用 sRGB 进行颜色管理（颜色管理在不同的设备和环境中保留“作者的意图”）。

iOS 使用 sRGB 作为默认色彩空间，因此您应该导出与 sRGB 色彩空间匹配的内容。

WWDC 2012 上有一个关于这个主题的精彩视频：“Session 523 - Best Practices for Color Management”。登录 developer.apple.com 观看视频。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-18T20:30:52.147

[iPhone 7](http://www.apple.com/iphone-7/specs/)使用基于[DCI-P3](https://en.wikipedia.org/wiki/DCI-P3)的广色域显示屏。它能够显示在 sRGB 颜色空间中无法指定的颜色。如果您的图像特别鲜艳，您*可能*会从使用此颜色空间中受益，但您*必须*在图像中嵌入颜色配置文件以确保 iOS 能够正确使用颜色。嵌入式配置文件还应确保图像在旧 iPhone 上正确显示。

# yui - YUI3中的时间延迟

> ID：11345234
> 
> 赞同：1
> 
> 时间：2012-07-05T13:22:17.710
> 
> 标签：yui, timedelay

我知道这样的事情可能最适合 YUI 论坛，但我需要尽快得到答案，我可能要等 YUI 论坛一段时间。

问题是，我想在页面加载后大约 14 秒内转换某些内容，我知道如何运行代码 onload 以及如何转换元素，但我真的无法弄清楚（或似乎找到任何信息）如何或（即使有可能）延迟运行该功能。

是否可以？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-05T13:33:12.903

仅使用 javascript`setTimeout`并假设 YUI 3.

[yui-lang-later 有一个`later`包装方法`setTimeout`](http://yuilibrary.com/yui/docs/api/classes/YUI.html#method_later)

```
var handle = Y.later( 1000 * 14, window, function(){
    // do something 
}, [], false);

// got bored 
handle.cancel(); // will prevent the function being called. 
```

# haskell - 模式中的哈克尔盈余绑定

> ID：11345235
> 
> 赞同：-1
> 
> 时间：2012-07-05T13:22:19.240
> 
> 标签：haskell, pattern-matching

我从口译员中得到以下片段：

```
type Ident = String
type Value = Int
type State = Ident -> Value

iniState :: State

iniState = \ident -> error "internal error initial state"

updateS :: State -> (Ident, Value) -> State

updateS s (ident, val) ident' | ident' == ident = val
                              | otherwise = s ident' 
```

updateS 模式中的 ident' 来自哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T13:33:26.347

第三个参数来自`Ident`type 中函数的参数`State`。

Using`type`定义了另一种类型的同义词（实际上是同义词）。换句话说，以下类型签名都是相同的：

```
State -> (Ident, Value) -> State 
(Ident -> Value) -> (Ident, Value) -> (Ident -> Value)
(Ident -> Value) -> (Ident, Value) -> Ident -> Value 
```

（您也可以`Ident`用`String`和`Value`替换`Int`以进行完全扩展。）

最后一个清楚地表明`updateS`可以接受 3 个参数：一个函数`Ident -> Value`、一对`(Ident, Value)`和一个`Ident`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T13:33:39.080

`updateS`是一个接受三个参数的函数。如果`State`在类型签名中替换为它的定义，你会得到

```
updateS :: (Ident -> Value) -> (Ident, Value) -> Ident -> Value 
```

`ident'`函数的第三个参数也是如此，它的类型为`Ident`。

纵观全局，`updateS`将 a`State`和 a `(Ident, Value)`pair 变成新的`State`. 我们可以推断返回的是什么样的`State`。如果我们评估`updateS s (ident, val)`，我们会得到在大多数情况下的`State`行为`s`，除了如果使用等于 的参数调用`ident`它，它会返回`val`。

# python - BooleanField 在 Django 1.4 中不起作用（始终选中）

> ID：11345236
> 
> 赞同：0
> 
> 时间：2012-07-05T13:22:24.743
> 
> 标签：python, django

我在我的模型中使用 BooleanField，如下所示：

活动 = 模型.BooleanField()

在 django admin 中编辑期间，总是检查属性“活动”，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T13:30:13.340

利用

```
active = models.BooleanField(default=False) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T13:31:52.010

默认情况下，它显示为活动，即选中/真。

如果您还想要 NULL 值，请尝试使用`NullBooleanField`

# java - 云铸造 JPA-2.0

> ID：11345239
> 
> 赞同：0
> 
> 时间：2012-07-05T13:22:43.997
> 
> 标签：java, jpa-2.0, cloud-foundry

CloudFoundry 是否支持 JPA 2.0（Spring 或 Hibernate 除外）作为访问任何提供的数据库的方法？如果是这样，是否有任何示例说明如何配置它以使用数据库产品？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T17:45:59.587

使用 JPA 2.0 没有区别。当应用程序被识别为 Spring 应用程序时，将发生自动重新配置。JPA 2.0 是一个数据源，所以没有什么能阻止功能的改变。不幸的是，我认为没有 JPA 2.0 的示例

# jquery - Jquery Image/Video Carousel，以可变宽度项目为中心？

> ID：11345245
> 
> 赞同：1
> 
> 时间：2012-07-05T13:23:02.777
> 
> 标签：jquery, jquery-plugins

所以我一直在努力寻找一个基于jquery的滑块/轮播。我需要它能够处理可变数量的项目、可变宽度的项目（图像或视频）。它还需要在居中的当前项目旁边显示上一个和下一个项目，有点像这样] [] [如果你明白我哈哈。所以当前项目会以下一个和前一个左右的一半为中心。？？

发现很难找到这样的东西。

任何建议都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T13:54:33.170

如果你用这个插件玩一点，你可以做你想做的事，我 100% 肯定。 [旋转木马](http://sorgalla.com/jcarousel/)

# wcf - wcf 服务未在 fiddler 2 中捕获？

> ID：11345247
> 
> 赞同：1
> 
> 时间：2012-07-05T13:23:17.257
> 
> 标签：wcf, fiddler, wcftestclient

仍在尝试在提琴手 2 中记录请求：（

我在 vs.net 2010 中创建了一个简单的 WcfService1，当我在 wcftestclient.exe 中调用它时，它不会出现在 Fiddler 中。有人知道吗？

网络配置

```
<?xml version="1.0"?>
<configuration>

  <system.net>
    <defaultProxy>
      <proxy bypassonlocal="False" usesystemdefault="True" proxyaddress="http://127.0.0.1:8888" />
    </defaultProxy>
  </system.net>

  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <bindings />
    <client />
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
 <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>

</configuration> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T13:26:59.997

您是否使用主机名来寻址端点`localhost`？`localhost`使用您的机器名称或网络 IP 地址，因为流量`127.0.0.1`不会被捕获。

# java - 类路径的扩展点

> ID：11345249
> 
> 赞同：1
> 
> 时间：2012-07-05T13:23:19.037
> 
> 标签：java

我想在 Eclipse 中创建一个扩展点，有人可以在其中定义一个`classpath`. 我希望扩展点有两个字段，一个用于 Id，一个用于路径名。但在那之后我该怎么办？

我必须使用这个“类路径容器初始化器”吗？我很困惑，你能给我一些建议吗？

# css - Retina images-picturefill.js 和媒体查询

> ID：11345250
> 
> 赞同：1
> 
> 时间：2012-07-05T13:23:23.433
> 
> 标签：css, media-queries, retina-display

当通过创建两倍大的第二个图像来适应视网膜显示器时，我看到 picturefill.js 建议防止下载较大的图像，除非需要它们。

但这不是'min-device-pixel-ratio'媒体查询已经完成的吗？或者即使不满足特定查询，您的 CSS 中的图像是否总是被下载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T16:17:20.607

不，图像只有在符合正确的 CSS 标准时才会被下载。因此，您可以安全地通过 picturefill.js 使用媒体查询。看看这篇文章，它基于媒体查询对图像请求进行了测试：http: [//timkadlec.com/2012/04/media-query-asset-downloading-results/](http://timkadlec.com/2012/04/media-query-asset-downloading-results/)。同样，您也可以使用 Chrome 开发工具网络选项卡查看加载时请求的图像 - 您会发现只有媒体查询中满足的图像才会被下载。

# winapi - 在 Windows 7 任务栏中显示完整的应用程序？

> ID：11345253
> 
> 赞同：4
> 
> 时间：2012-07-05T13:23:36.120
> 
> 标签：winapi, windows-7, taskbar, windows-shell

在 Windows 7 上，是否可以创建要在任务栏中显示的应用程序？我想到的是一个小部件，如媒体播放器或天气小部件等。

类似于下面的样机：

![在此处输入图像描述](../Images/76676d260c0465ce92e4ceb2ab2f036e.png)

任何的想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T13:44:35.730

是的，这是可能的。您正在寻找的是工具栏或有时称为“桌带”：

[http://msdn.microsoft.com/en-us/library/windows/desktop/cc144099.aspx#desk_bands](http://msdn.microsoft.com/en-us/library/windows/desktop/cc144099.aspx#desk_bands)

# android - Andropid SDK 20 - 不能打开多个 avd

> ID：11345254
> 
> 赞同：0
> 
> 时间：2012-07-05T13:23:36.943
> 
> 标签：android, avd

我刚刚更新到 Android SDK Tools 20 和 SDK Platform-Tools 12。

现在我发现，出于某种原因，我不能同时打开多个 AVD。

其他人发现这个问题吗？

# jquery-plugins - 从日期框中选择日期后获取日期

> ID：11345255
> 
> 赞同：0
> 
> 时间：2012-07-05T13:23:37.440
> 
> 标签：jquery-plugins, jquery-mobile, datebox

在 set 方法通过后，我想知道选择的日期是什么，以便我可以在调用控制器时使用它

> $('#datetime').bind('datebox', function (e,passed) { if (passed.method === 'set') {
> $.load("controller action with the date set"); } } );

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T13:27:37.750

没关系，我刚刚找到它：

```
$('#datetime').bind('datebox', function (e, passed) { if ( passed.method === 'set' ) {alert("The date is now: "+passed.value); } }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T13:28:40.653

我不确定我是否遵循，但您想要刚刚设置的日期，对吗？

从[文档](http://dev.jtsage.com/jQM-DateBox2/demos/api/events.html)：

触发设置指定日期：

*   {'方法'} === 设置
*   {'value'} === 放入输入的值
*   {'date'} === 正在使用的日期对象

因此，按照您的示例，passed.value 是* formatted* 日期，passed.date 是基础日期对象。

# php - 从数据库中为用户调用信息

> ID：11345257
> 
> 赞同：0
> 
> 时间：2012-07-05T13:23:39.267
> 
> 标签：php, mysql

我试图只调用登录的用户信息。到目前为止没有任何事情发生，我不确定我做错了什么。

```
<?php
session_start();
// Connects to your Database 
 mysql_connect("localhost", "megan", "megan") or die(mysql_error()); 
 mysql_select_db("megan") or die(mysql_error()); 

$id = $_SESSION['id_user']; //Get user's ID 
Print $id; //Test
$result = mysql_query("SELECT * FROM user WHERE id_user='" . $id . "'") 
or die(mysql_error());
$row = mysql_fetch_assoc($result); 

echo "Your user name is: <br>"; 
echo $row['username']; 
```

?>

更新了带有建议的代码，但仍然无法正常工作

如果我输入 Select * from user 整个数据库就会出现，而不是登录的用户

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:26:30.487

试试这条线。我相信您的查询字符串不正确，并且您没有使用用户 ID 的值进行查询，而是使用字符串“$id”。

```
$result = mysql_query("SELECT * FROM user WHERE id_user='{$id}'"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T13:47:01.200

不鼓励使用此扩展程序。相反，应该使用 MySQLi 或 PDO_MySQL 扩展。

```
$sql = "SELECT `username` FROM user WHERE id_user = '$id' ";

$result = mysql_query($sql);

list($username) = mysql_fetch_row($result);

var_dump( $username ); // for test 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T13:38:10.740

我会这样做：

```
$result = mysql_query("SELECT * FROM user WHERE id_user=" . $id); 
```

如果 $id 不是数字而是字符串...

```
$result = mysql_query("SELECT * FROM user WHERE id_user='" . $id . "'"); 
```

当然，你也可以在行尾做一个 or die(mysql_error()) 。

# iphone - 如何确定 UINavigationController 中工具栏的高度？

> ID：11345260
> 
> 赞同：11
> 
> 时间：2012-07-05T13:23:42.237
> 
> 标签：iphone, objective-c, ios, uiview, uikit

我有一个带有 UINavigationController 提供的工具栏的视图。

当我处理 UIKeyboardWillShowNotification 时，我将整个屏幕向上滚动键盘的高度。问题是当键盘显示时，底部工具栏没有，所以我只需要向上滚动屏幕（keyboard.height - toolbar.height）。

但是如何获得工具栏的高度呢？

谢谢

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-05T13:27:31.217

您只需要检查工具栏框架。

```
self.navigationController.toolbar.frame.size.height 
```

当然，它只有在你有导航控制器的情况下才有效......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-14T08:17:41.187

我搜索了类似的解决方案，但在 iPhone X、XS 和未来型号等设备上遇到了问题。例如，在 iPhone XS 上高度为 49，但这不是正确的高度。经过一番研究，我找到了另一种检测工具栏高度的解决方案：

目标-C：

```
CGFloat screenHeight = [UIScreen mainScreen].bounds.size.height
CGFloat toolbarTop = self.navigationController.toolbar.frame.origin.y
CGFloat originalHeight = screenHeight - toolbarTop 
```

斯威夫特 5：

```
let screenHeight = UIScreen.main.bounds.size.height
let toolbarTop = self.navigationController.toolbar.frame.origin.y
let originalHeight = screenHeight - toolbarTop 
```

这将显示另一个数字。例如在 XS 上是 83

# javascript - 带有百分比的Ajax加载进度条

> ID：11345263
> 
> 赞同：2
> 
> 时间：2012-07-05T13:23:47.977
> 
> 标签：javascript, jquery, ajax

我正在使用图像上传器。问题是图像上传器只向我显示了一个 ajax 进度条图像，但没有任何百分比。

如何在下面的代码中实现百分比（与进度条相关）？

jQuery.itemForm.submitFormIfNotImageLoading = function(loadingTime) {

```
 if (jQuery.uploaderPreviewer.loadingImages()) {
      if(loadingTime > $.itemForm.loadingTimeout) {
        var settings = {
            title: $.itemForm.messages.timeoutTitle,
            message: $.itemForm.messages.timeoutMessage,
            buttons: { 'OK': function() { $(this).dialog("close"); } }
        };
        $.globalFunctions.openDialog(settings);
      }
      else {
        loadingTime += $.itemForm.checkingIntervalTime;
        var progressBarValue = $("#progressbar").progressbar('value')
                             + $.itemForm.progressBarInterval;
        $("#progressbar").progressbar('value', progressBarValue);
        var recursiveCall = "$.itemForm.submitFormIfNotImageLoading(" + loadingTime + ")";
        setTimeout(recursiveCall, $.itemForm.checkingIntervalTime);
      }
    }
    else {
      submitForm();
    }
};

function showImageLoadingMessage() {

    var options = {
        title: $.itemForm.messages.savingTitle,
        message: $.itemForm.messages.savingMessage
    };

    $.globalFunctions.openDialog(options);

    $("#progressbar").progressbar({
        value: 0
    });

    var progressBarInterval = $.itemForm.checkingIntervalTime * 100 / $.itemForm.loadingTimeout;
    if (progressBarInterval != Number.NaN) {
        $.itemForm.progressBarInterval = Math.floor(progressBarInterval);
    }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T14:23:10.220

实际上，由于通信是客户端-服务器而没有持久连接**，因此您无法在****非 HTML5 浏览器中****使用**ajax显示百分比。

 **您应该考虑（如果您想保持兼容性）使用一些应该可以很好地满足您的需要的 Flash 上传器（[这](http://www.flajaxian.com/)是我发现的第一个）

您也可以使用[COMET](https://stackoverflow.com/questions/136012/comet-and-jquery)之类的持久连接方法或类似方法，但无论如何它与旧版浏览器几乎不兼容。

如果你是一个对“开源”友好的人，我认为最好使用 HTML5 进度条，而对于浏览器不兼容的人来说，使用没有进度的替代方案会更好（如果它像 jQuery 插件，无论如何你都会拥有大多数用户使用 HTML5 浏览器）**

# c# - 即使有更新，实体 GetChangeSet() 也会返回空

> ID：11345267
> 
> 赞同：0
> 
> 时间：2012-07-05T13:23:59.147
> 
> 标签：c#, linq-to-sql

在 linq-to-sql 中，当我尝试从 Entity.GetChangeSet() 方法获取更改时，即使有更新，它也会返回 [Inserts: 0, Deletes:0, Updates:0]。

我在 commitChanges() 调用之前按照建议使用它。问题是这样发生的：

```
var item = Entity.GetItemById(itemId).FirstOrDefault();
item.Property1 = "Something";

var changes = Entity.GetChangeSet().ToList();
Entity.SubmitChanges();

//changes is: [Inserts: 0, Deletes:0, Updates:0] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T11:28:41.743

经过几天糟糕的日子后，我发现在删除并重新创建实体之后，清理解决方案对我有帮助，并且该方法就像一个魅力。

我猜有一个更新错误阻止了它。

# javascript - 使用 Javascript/jQuery 循环构建嵌套对象

> ID：11345272
> 
> 赞同：0
> 
> 时间：2012-07-05T13:24:31.933
> 
> 标签：javascript, arrays, object, loops

我正在尝试使用 JavaScript 在 for 循环中创建以下嵌套对象，然后将其推送到现有数组：

```
 _spec = {
                _key: {
                    type: _clHndl.getFieldType(_f),
                    editable: true,
                    validation: {
                        required: _clHndl.isRequired(_f),
                        min: 10
                    }
                }
            };

            _arr.push(_spec); 
```

_key 字段是动态的（每次迭代都会更改），我希望嵌套项 _key 的标识符是 _key 在迭代中包含的实际值。现在，当我使用 JSON.stringify() 检查它时，它只会使每个 '_key' 。

任何帮助，将不胜感激。谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:40:58.220

您的键并不是真正嵌套*的（它位于外部对象的顶层）*，尽管如果它确实不会有什么不同。

要创建动态键，请使用*成员运算符*的方括号版本。

```
spec = {}; 

spec[my_dynamic_key] = {
    type: _clHndl.getFieldType(_f),
    editable: true,
    validation: {
        required: _clHndl.isRequired(_f),
        min: 10
    }
} 
```

# python - 文件读取和RE解析

> ID：11345273
> 
> 赞同：1
> 
> 时间：2012-07-05T13:24:37.893
> 
> 标签：python, regex, file

我有一个奇怪的行为，我不明白：

如果我打开我的文件，我会找到我的字节，但一次只能找到一次：

```
f = open('d:\BB.ki', "rb")
f10 = re.findall( b'\x03\x00\x00\x10''(.*?)''\xF7\x00\xF0', f.read() )
print f10
['1BBBAAAABBBBAAAABBBBAAAABBBBAAAA\x00']

f = open('d:\BB.ki', "rb")
f11 = re.findall( b'\x03\x00\x00\x11''(.*?)''\xF7\x00\xF0', f.read() )
print f11
['2AAABBBBAAAABBBBAAAA\x00'] 
```

如果我尝试打开文件并获取几个字节，我只会得到第一个（f11 为空）

```
f = open('d:\BB.ki', "rb")
f10 = re.findall( b'\x03\x00\x00\x10''(.*?)''\xF7\x00\xF0', f.read() )
f11 = re.findall( b'\x03\x00\x00\x11''(.*?)''\xF7\x00\xF0', f.read() )
print f10,f11
['1BBBAAAABBBBAAAABBBBAAAABBBBAAAA\x00'] **[]** 
```

我可以使用循环或类似的东西吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:30:03.870

调用后`f.read()`没有更多字节可供读取，因此第二次调用`f.read()`将返回一个空字符串。存储 f.read() 的结果而不是读取两次：

```
s = f.read()
f10 = re.findall( b'\x03\x00\x00\x10''(.*?)''\xF7\x00\xF0', s)
f11 = re.findall( b'\x03\x00\x00\x11''(.*?)''\xF7\x00\xF0', s) 
```

您可能还想只扫描一次数据，找到两个表达式：

```
matches = re.findall( b'\x03\x00\x00[\x10\x11]''(.*?)''\xF7\x00\xF0', s) 
```

如果您的文件包含字节`'\x03\x00\x00\x10\x03\x00\x00\x11_\xF7\x00\xF0'`，您建议的方法将找到两个重叠的匹配项（`\x03\x00\x00\x11_`和`_`），而单次扫描方法仅找到一个匹配项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T13:27:53.570

`f.read()`消耗整个文件。只有 f10 会看到。

试试这个也许。

```
 for line in open('d:\BB.ki', "rb").readlines():
    f10 = re.findall( b'\x03\x00\x00\x10''(.*?)''\xF7\x00\xF0', line )
    f11 = re.findall( b'\x03\x00\x00\x11''(.*?)''\xF7\x00\xF0', line ) 
```

# ruby-on-rails - 将参数传递给 rjs 文件

> ID：11345275
> 
> 赞同：0
> 
> 时间：2012-07-05T13:24:42.347
> 
> 标签：ruby-on-rails

如果有人可以帮助我解决以下问题，我将不胜感激。

我有以下表格：

**新书形式**

```
<% remote_form_for @book, :url => { :controller => "books", :action => "create_sub_book"} do |f| %>
    <%= f.text_field :book_name %>
    <%= f.text_field :book_publication %>

    <%= params[:id] %> <!-- I need to pass this value to create_sub_book action, which will then pass it to create_sub_book.js.rjs -->

    <p><%= f.submit 'Create'%></p>

<% end %> 
```

**控制器动作**

```
def create_sub_book

@book = book.new(params[:book])

respond_to do |format|
  if @book.save
    format.js
  else
    flash[:notice] = "Book failed to save."
  end
end
end 
```

**create_sub_book.js.rjs **

```
`page.alert(params[:id]) ## On this page I need to access the params[:id] on the 'new_book' form. This line does not work`. 
```

关于如何将“new_book”表单上的 params[:id] 传递给“create_sub_book.js.rjs”的任何建议？

感谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:29:07.237

您可以为此使用[hidden_​​field](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-hidden_field)标记。

```
<%= f.hidden_field :id, params[:id] %> 
```

这将被插入到您的参数哈希中，然后您可以将其传递。

# python - 如何在用户输入另一个单词之前刷新数据库数据

> ID：11345285
> 
> 赞同：0
> 
> 时间：2012-07-05T13:25:28.087
> 
> 标签：python, django, linux, ubuntu-10.04

我使用 django cms 创建了一个名为“search”的应用程序，它基本上从用户那里获取一个单词，在 10 个 xml 文档中搜索它并返回每个 xml 文件中该单词出现的频率。这些数据存储在我使用 sqlite3 数据库创建的表中。

现在我的问题是，每当用户输入单词时，表中的先前数据都应该在不使用删除查询但通过代码片段的情况下被删除。因为这可以通过在 python 交互式 shell 上键入删除查询来轻松完成。

但是我希望一旦用户被引导到显示计数的结果页面，如果他再次输入另一个单词，则应该删除以前的数据。嘿，这是我的 views.py 代码：

```
# Create your views here.
#!/usr/bin/python 

from django.template import loader, RequestContext, Context
from django.http import HttpResponse
from search.models import Keywords
from django.shortcuts import render_to_response as rr

def front_page(request):

    if request.method == 'POST' :
        from skey import find_root_tags, count, sorting_list
        str1 = request.POST['word'] 
        str1 = str1.encode('utf-8')
        list = []
        path = '/home/pooja/Desktop/'
        fo = open("/home/pooja/Desktop/xml.txt","r")

        for i in range(count.__len__()):
            file = fo.readline()
            file = file.rstrip('\n')            
            find_root_tags(path+file,str1,i)    

            list.append((file,count[i]))

        sorting_list(list)

        for name, count1 in list:
            s = Keywords(file_name=name,frequency_count=count1)# saving my data in table here .
            s.save()

        fo.close()
        list1 = Keywords.objects.all()
        t = loader.get_template('search/results.html')
        c = Context({'list1':list1,})

        return HttpResponse(t.render(c))

    else :  
        str1 = ''
        template = loader.get_template('search/front_page.html')
        c = RequestContext(request)
        response = template.render(c)
        return HttpResponse(response) 
```

我的models.py文件：

```
from django.db import models

class Keywords(models.Model):
    file_name = models.CharField(primary_key=True, max_length=100)
    frequency_count = models.IntegerField()

    def __unicode__(self):
        return self.file_name 
```

请帮助，我是 django 的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T13:47:14.210

看来您必须看看[Django Signals](https://docs.djangoproject.com/en/dev/topics/signals/)。您可以使用信号 django.db.models.signals.pre_save 在保存新数据之前删除数据。可能[这个文档](http://www.chrisdpratt.com/2008/02/16/signals-in-django-stuff-thats-not-documented-well/) 对理解它很有用。

更新：

**第一种方式：**不确定*关键字*是您保存结果的表。如果是保存结果的表，那么按照 Filip Dupanović 的建议，请在将搜索结果保存在数据库表中的代码之前运行`Keywords.objects.all().delete()`views.py中的代码**。**

**第二种方式**：正如我之前告诉过你的，我们也可以通过使用信号来做到这一点。例如，假设我在 models.py 中的模型是这样的：

```
class Name(models.Model):
    name = models.CharField(max_length=200) 
```

现在，在表中保存任何新名称之前，如果我想删除所有以前的条目，那么我可以这样做：

```
from django.db import models
from django.db.models import signals
from django.db.models.signals import pre_save

class Name(models.Model):
    name = models.CharField(max_length=200)

def delete_previous_records(**kwargs):
    try:
        Name.objects.all().delete()
    except:
        return False

pre_save.connect(delete_previous_records) 
```

将此代码添加到您将数据保存在 views.py 中的 for 循环上方：

```
try:
    Keywords.objects.all().delete() #Deleting all previous records 
except: 
    return False
#your for loop starts here
for name, count1 in list:
    s = Keywords(file_name=name,frequency_count=count1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T14:22:33.843

`Match.objects.delete()`只需在开始编译新结果之前执行类似擦除视图中所有先前结果的操作。

# arm - ARM11对缓存有什么改进

> ID：11345290
> 
> 赞同：1
> 
> 时间：2012-07-05T13:25:43.140
> 
> 标签：arm, cpu-cache

据说在ARM11中，**Cache是​​物理寻址的，解决了很多缓存别名问题，减少了上下文切换开销**

如何理解**物理地址**？它如何帮助解决缓存别名问题并减少上下文切换开销？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-05T15:19:28.337

有三种常见的缓存类型。

*   VIVT = 虚拟索引虚拟标记
*   VIPT = 虚拟索引物理标记
*   PIPT = 物理索引物理标记

还有

*   PIVT = 物理索引虚拟标记

PIPT 通常用于 2 级和更深的缓存，因为此时无论如何都必须知道物理地址，但 armv7 还引入了 PIPT L1 DCache。PIVT 不是很实用，因此没有在现实世界中使用。

不同之处在于高速缓存线如何连接到底层内存。

虚拟索引意味着纯高速缓存行查找是使用虚拟地址完成的，因此可以在任何虚拟到物理地址转换之前完成。然后，标记将决定缓存行是否真的映射到您的底层内存或包含恰好映射到同一缓存行的其他内存位置的数据。

如果标记是使用虚拟地址完成的，那么碰巧使用相同虚拟地址的两个进程可能会相互绊倒，因为一个进程可能会访问另一个进程放入缓存的数据。因此，对于 VIVT 缓存的 CPU，内核必须在上下文切换上刷新整个缓存。因此新进程不会意外访问不正确的数据，这通常意味着上下文切换在 VIVT 缓存的 CPU 上是一项非常昂贵的操作。在 ARMv5 及更高版本上，支持所谓的快速上下文切换扩展，它使用标签修改虚拟地址。但这涉及很多限制。

相比之下，VIPT 仍将使用虚拟地址来查找缓存行，但随后将根据物理地址检查标签，因此 MMU 查找可以与缓存行查找并行完成。

别名是 VIVT 缓存的另一个大问题。因为两个虚拟地址可能指向同一个物理内存位置（当您在用户和内核空间之间共享内存时可能会发生这种情况）。因此，您的缓存中可能有两个具有不同数据的位置，这可能很难正确管理（以正确的顺序显式刷新和使缓存无效）。

# java - 在 Guice 中向所有提供者请求绑定接口

> ID：11345291
> 
> 赞同：1
> 
> 时间：2012-07-05T13:25:45.317
> 
> 标签：java, dependency-injection, guice

我正在尝试测试我的模块是否正确实例化了多次绑定的接口的所有提供程序。为了在我的模块中绑定，我在 Google Guice v3 中使用了 Multibinder。

我找不到返回特定接口/类的所有（多个）提供程序的方法。使用 getProvider() 只会返回一个 Provider。

有没有人对这个问题有一个优雅的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T18:10:18.497

一种选择是迭代来自 Injector 的所有绑定并检查那些与您预期的接口匹配的绑定。

```
@Inject void checkBindings(Injector injector){
  for(Binding<?> rawbinding : injector.getBindings().values()){
    if (rawbinding instanceof BindingImpl){
      BindingImpl<?> binding = (BindingImpl<?>)rawbinding;
      if (binding.getKey().getTypeLiteral().getRawType() == MyInterface.class){
        ... 
```

# ios - 连接：canAuthenticateAgainstProtectionSpace：不为“不支持”的身份验证方法调用

> ID：11345295
> 
> 赞同：0
> 
> 时间：2012-07-05T13:25:52.853
> 
> 标签：ios, authentication, nsurlconnection, nsurlconnectiondelegate

在我的`NSURLConnectionDelegate`实例中，当连接接收`401 Unauthorized`到对 HTTP 请求的响应时，该请求包含与记录的支持的身份验证方法之一相对应的身份验证质询标头（例如`WWW-Authenticate: Basic`for `NSURLAuthenticationMethodHTTPBasic`），那么我的`connection:canAuthenticateAgainstProtectionSpace:`方法将按我的预期调用。

但是，我还需要能够针对未列为支持开箱即用的身份验证方法进行身份验证，例如，我可能会得到挑战标头`WWW-Authenticate: XAuth7`，并且当发生这种情况时，`connection:canAuthenticateAgainstProtectionSpace:`不会调用该方法。

我猜这是因为它不知道身份验证方法是什么，但我希望能够通过添加支持来处理它，甚至只是获取原始质询标头并在连接委托中处理它。

这是 Cocoa (iOS) 库的一个基本限制，因为它们不能扩展到其他身份验证方法，还是有某种方式可以插入对其他身份验证方法的支持？

* * *

请注意，我正在使用已弃用的连接委托方法，因为我需要支持 iOS 4.3，它们仍然是最新的解决方案，但同样的问题也适用于更现代的解决方案，`connection:willSendRequestForAuthenticationChallenge:`因为它也不需要“不支持” ' 认证方法。

# javascript - JavaScript 中的分区

> ID：11345296
> 
> 赞同：19
> 
> 时间：2012-07-05T13:25:56.990
> 
> 标签：javascript, list

请考虑一个数组，例如：

```
arrayAll = [1,2,3,4,5,6,7,8,9] 
```

是否有一个包可以进行分区以获得：

```
arrayALLPartionned = [[1,2,3],[4,5,6],[7,8,9]] 
```

我可以看到如何使用 for 循环执行此操作，但如果存在“预制”功能，我将不胜感激。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-05T13:45:44.997

我认为您将不得不使用 for 循环，不知道任何内置函数...

试试这个功能：

```
function splitarray(input, spacing)
{
    var output = [];

    for (var i = 0; i < input.length; i += spacing)
    {
        output[output.length] = input.slice(i, i + spacing);
    }

    return output;
} 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-10-07T07:08:33.807

这是一个递归解决方案：

```
function partition(array, n) {
  return array.length ? [array.splice(0, n)].concat(partition(array, n)) : [];
} 
```

这利用了`Array#splice`破坏性地删除指定项目并将它们作为函数值返回的事实。**请注意，这将破坏输入数组，使其为空**。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-07-05T13:40:39.100

如果使用[Underscore.js](http://underscorejs.org/)，您可以使用[`groupBy()`](http://underscorejs.org/#groupBy)and来实现它[`values()`](http://underscorejs.org/#values)

```
function partition(items, size) {
    var result = _.groupBy(items, function(item, i) {
        return Math.floor(i/size);
    });
    return _.values(result);
} 
```

[（这在 CoffeeScript](http://jsfiddle.net/MW3BS/3/)中不那么难看。）

jsfiddle：http: [//jsfiddle.net/MW3BS/](http://jsfiddle.net/MW3BS/)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-11-18T14:30:28.260

我已将此解决方案添加到[@dystroy 的 jspref](http://jsperf.com/partition/3)中，它的运行速度*似乎*是其他解决方案的两倍。**编辑：在 Safari 和 Chrome 但不是 Firefox**

这是添加到此处的答案组合的功能样式解决方案。

它是一个调用的高阶函数`toPartitions`，它为下划线的 reduce 方法或本机数组 reduce 方法返回一个回调。

示例用法：

```
[1,2,3,4,5,6,7,8,9].reduce( toPartitions( 3 ), [] ); 
```

功能：

```
function toPartitions ( size ) {
    var partition = [];
    return function ( acc, v ) {
        partition.push( v );
        if ( partition.length === size ) {
            acc.push( partition );
            partition = [];
        }
        return acc;
    };
} 
```

与 Clojure 的[分区](https://clojuredocs.org/clojure.core/partition)一样，当元素不足时，它不会包含尾部分区。

在您的示例中，您可以执行以下操作：

```
arrayALLPartionned = arrayAll.reduce( toPartitions( 3 ), [] ) ); 
```

如果您不想将其与 一起使用`reduce`，而只是有一个采用数组和分区大小的函数，您可以这样做：

```
function partition ( arr, size ) {
    return arr.reduce( toPartitions( size ), [] );
} 
```

因此解决方案就是：

```
arrayALLPartionned = partition( arrayAll, 3 ); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-07-05T13:50:56.660

另一种解决方案，没有外部库：

```
function partition(items, size) {
    var p = [];
    for (var i=Math.floor(items.length/size); i-->0; ) {
        p[i]=items.slice(i*size, (i+1)*size);
    }
    return p;
} 
```

演示：http: [//jsfiddle.net/dystroy/xtHXZ/](http://jsfiddle.net/dystroy/xtHXZ/)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-05T13:39:50.940

您可以编写自己的原型方法来执行此操作

```
Array.prototype.partition = function(length) {
  var result = [];
  for(var i = 0; i < this.length; i++) {
    if(i % length === 0) result.push([]);
    result[result.length - 1].push(this[i]);
  }
  return result;
}; 
```

如果您不想添加到原生原型，您可以编写一个简单的函数：

```
var partition = function(arr, length) {
  var result = [];
  for(var i = 0; i < arr.length; i++) {
    if(i % length === 0) result.push([]);
    result[result.length - 1].push(arr[i]);
  }
  return result;
}; 
```

您可以[在这个 jsFiddle 演示中看到它的实际效果](http://jsfiddle.net/FPwpS/)。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-05T13:33:12.430

Prototype 有一个 array.partition 函数和一个 eachSlice() 函数。听起来 eachSlice() 就是你要找的东西。如果您使用的是 jquery，那么有一个插件可以使用原型函数。这是它的链接... [http://www.learningjquery.com/2009/02/implementing-prototypes-array-methods-in-jquery](http://www.learningjquery.com/2009/02/implementing-prototypes-array-methods-in-jquery)

# windows-phone-7 - 将项目添加到 StackPanel 时 UI 更新延迟

> ID：11345298
> 
> 赞同：0
> 
> 时间：2012-07-05T13:26:06.113
> 
> 标签：windows-phone-7, user-interface

这是我的问题的代码：

```
private void button1_Click(object sender, RoutedEventArgs e)
{
    Rectangle1.Fill = color;
    for (int i = 0; i < 1000; i++)
    {
        StackPanel1.Children.Add(new TextBlock() { Text = "TestBlock" });
    }
} 
```

当然，将 TextBlocks 添加到 StackPanel 需要一些时间。但由于某种原因，矩形的布局与 StackPanel 同时更新。我尝试通过强制矩形更新来解决这个问题

```
Rectangle1.UpdateLayout(); 
```

在将 TextBlocks 添加到 StackPanel 之前。但这也不起作用。那么如何在矩形开始向 StackPanel 添加项目之前更改它的颜色呢？

我没有头绪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:35:52.647

`UpdateLayout`如果布局没有改变，则无效，这是您的情况。

您需要调用的是`InvalidateVisual`. 然而，这不是一个很好的做法。我宁愿更改 Fill in`MouseLeftButtonDown`事件。

XAML：

```
 <Button MouseLeftButtonDown="PreviewChangeRectangle" ...> 
```

C＃ ：

```
private void PreviewChangeRectangle(object sender, RoutedEventArgs e)
{
 Rectangle1.Fill = color;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T13:40:11.990

要添加到@MBen 的评论，我的理解是只有在所有处理完成后才会呈现虚拟树

您可以生成一个线程或使用线程池，然后调用 dispater 说填充矩形，然后在 for 循环中使用调度程序添加文本框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-10T07:48:00.347

在您屈服于消息泵之前，WPF 不会绘制任何内容。最简单的方法是使用 async/await。

```
private async void button1_Click(object sender, RoutedEventArgs e)
{
    Rectangle1.Fill = color;
    await Task.Yield();
    for (int i = 0; i < 1000; i++)
    {
        StackPanel1.Children.Add(new TextBlock() { Text = "TestBlock" });
    }
} 
```

# php - 可配置产品，选择框“值”字段。Magento

> ID：11345300
> 
> 赞同：3
> 
> 时间：2012-07-05T13:26:15.620
> 
> 标签：php, jquery, magento, product, configurable

从可配置产品中获取一些数据时出现问题，基本上“标准”下拉选择菜单似乎在我的产品页面上正常选择了一些数据。

我正在用覆盖做一些繁琐的事情，我将使用 jQuery .val() 函数来“控制”这些选择选项。

.val() 函数需要使用标签“值”字段。

现在我不知道在获取可配置的产品信息时如何提取这个值......

我正在提取有关可配置产品的信息，如下所示：

```
 $attrs  = $_product->getTypeInstance(true)->getConfigurableAttributesAsArray($_product);
    foreach($attrs as $attr) {
        $options = $attr['values'];
        foreach($options as $option) {
            echo "<p class='swatchie' id='".$attr['attribute_id']."' title='".$attr[]."'>{$option['store_label']}</p><br />";
        }
    } 
```

如您所见，标题中的 attr 是空白的，因为这是我需要提取选项值的地方。为选项框提供的 html magento 如下所示：

```
 <option value="">Choose an Option...</option><option value="41" price="0">King</option><option value="42" price="540">Super King +£540.00</option></select> 
```

我想我已经找到了我需要的价值所在的“位置”，

app/code/core/mage/catalog/model/resource/product/type/configurable/attribute/collection.php

第 258 行，

```
 $values[$item->getId() . ':' . $option['value']] = array(
                                'product_super_attribute_id' => $item->getId(),
                                'value_index'                => $option['value'], 
```

价值指数是我认为我想要的，但不知道如何掌握它

关于如何彻底解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T05:29:27.117

使用firebug查看名为'spConfig'的变量的结构，可以找到可配置产品的数据。

请注意，jQuery().val() 不会触发默认 Magento 使用原型定义的选择动作。因此，您可以另外通过原型触发更改操作。

# css - 当我将 CSS 移动到子文件夹并更改 url 路径时，CSS 背景图像会中断

> ID：11345301
> 
> 赞同：1
> 
> 时间：2012-07-05T13:26:19.910
> 
> 标签：css

所以我有两个css。

1.  样式.css
2.  注册.css

我创建了一个名为 css 的文件夹并将 signup.css 放在 css 文件夹中。

signup.css 是 style.css 的副本，只是放在 CSS 文件夹中。

这是包含图像的css代码：

```
#body{
width:683px; margin:0 auto; padding:0 0 60px 0;
background:url(images/header_bg.gif) no-repeat right top #F7F7F7; color:#171717;} 
```

当我重新加载网页时，图像坏了，所以我将代码更改为：

```
#body{
width:683px; margin:0 auto; padding:0 0 60px 0;
background:url(../images/header_bg.gif) no-repeat right top #F7F7F7; color:#171717;} 
```

但是图像仍然无法加载。如何调整 css 以使图像加载与放置在 css 文件夹下的 style.css 一起？

回答一个问题：

```
头
    meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
    标题>
    链接 href="css/signup.css" rel="stylesheet" type="text/css" />
    /头>
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T13:42:41.050

在您的 HTML 中设置`basehref`标签`head`：

```
<base href="http://example.org/image_base_path/" /> 
```

所有没有协议的请求都会在前面加上这个 URL。

`background:url(images/header_bg.gif)`将被加载为`http://example.org/image_base_path/images/header_bg.gif`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T13:36:51.180

尝试使用

```
background:url(/images/header_bg.gif) 
```

假设相对于您的域的图像文件夹的路径是 /images

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T13:39:43.753

我不确定我是否完全遵循您的更改，但是我假设您从以下内容开始：

（HTML）：

```
<head>
...
<link rel="stylesheet" type="text/css" href="style.css" media="screen" />
...
</head> 
```

带有文件和目录：

```
index.html
style.css
images/
images/header_bg.gif 
```

它工作正常。然后，如果您添加了以下目录和文件：

```
css/
css/signup.css 
```

并将 HTML 更改`head`为：

```
<link rel="stylesheet" type="text/css" href="css/signup.css" media="screen" /> 
```

而`css/signup.css`你改变了

```
background: url(images/header_bg.gif) no-repeat right top #F7F7F7; color:#171717;} 
```

到：

```
background: url(../images/header_bg.gif) no-repeat right top #F7F7F7; color:#171717;} 
```

并且所有文件都是世界可读的（或网络服务器用户可读的），那么你的东西应该可以正常工作。确保您的 css 目录是全球可执行的，并且 css 文件是全球可读的。您可以通过直接在浏览器中打开来验证您的 css 文件是否可读，即：

```
http://www.mysite.com/css/signup.css 
```

如果您收到 404 错误，则 Web 服务器无法读取 css 文件。

如果您愿意，也可以在 css 文件中使用绝对路径来指向图像，例如：

```
background: url(/images/header_bg.gif) no-repeat right top #F7F7F7; color:#171717;} 
```

（假设该`images`文件夹位于您网站的根文件夹中）。

# asp.net-mvc-3 - MVC3 - 用于下拉列表的列表信息在发布后为空

> ID：11345303
> 
> 赞同：2
> 
> 时间：2012-07-05T13:26:28.173
> 
> 标签：asp.net-mvc-3, http-post, html.dropdownlistfor

我希望在视图中显示一个 DropDownList，然后在我的模型（ExampleAddSetupDto）中包含一个发送到视图的条目列表以填充下拉列表。这很好，但如果我有一个验证错误并在传入模型中重新显示视图，我的列表现在为空。

下面给出了我的操作（注意：如果 ModelState.IsValid 失败，则会出现问题）。此外，Action 方法的第二个参数可能看起来很奇怪，因为我正在使用 Autofac 将正确的服务注入到方法中）。

```
 [HttpPost]
    [ValidateAntiForgeryToken]
    public ActionResult Add(ExampleAddSetupDto add, IServiceAddCommit<IExampleAddSetupDto, IExampleAddCommitDto> service)
    {

        if (ModelState.IsValid)
        {
            var response = service.Create(add);
            if (response.IsValid)
            {
                TempData["message"] = "You successfully added a new Example Entry";
                return View("AddSuccess", response);
            }

            //else errors, so copy the errors over to the ModelState
            response.CopyErrorsToModelState(ModelState, add);
        }

        // Some validation error, so redisplay same view
        return View(add);

    } 
```

我的模型如下所示：

```
public class ExampleAddSetupDto : IExampleAddSetupDto
{

    [StringLength(50, MinimumLength = 2)]
    public string Name { get; set; }

    public int Option1Id { get; set; }

    public int Option2Id { get; set; }

    //-----------------------------
    //now the properties for the drop down lists 

    public IList<Option1> PosibleEntriesForOption1 { get; set; }
    public IList<Option2> PosibleEntriesForOption2 { get; set; }

} 
```

我的观点是：

```
@model ServiceLayer.Example.DTOs.ExampleAddSetupDto

@{
    ViewBag.Title = "Add";
}

<h2>Add</h2>

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@using (Html.BeginForm())
{  
@Html.AntiForgeryToken()
@Html.ValidationSummary(true)
<fieldset>
    <legend>Add an Example item</legend>

    <div class="editor-label">
        @Html.LabelFor(model => model.Name)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Name)
        @Html.ValidationMessageFor(model => model.Name)
    </div>
    <div class="editor-field">
        @Html.Label("Option1")
        @Html.DropDownListFor(model => model.Option1Id, new SelectList(Model.PosibleEntriesForOption1, "Option1Id", "OptionText"))
        @Html.ValidationMessageFor(model => model.Option1Id)
    </div>
    <div class="editor-field">
        @Html.Label("Option2")
        @Html.DropDownListFor(model => model.Option2Id, new SelectList(Model.PosibleEntriesForOption2, "Option2Id", "OptionText"))
        @Html.ValidationMessageFor(model => model.Option2Id)
    </div>
    <p>
        <input type="submit" value="Create" />
    </p>
</fieldset> 
```

}

我了解我需要将 Model.PosibleEntriesForOption 与表单一起返回。我尝试在视图中使用 Html.HiddenFor 助手返回列表，即

```
@Html.HiddenFor(model => model.PosibleEntriesForOption1) 
```

但这会引发错误'值'System.Collections.Generic.List`1 [DataClasses.ExampleClasses.Option1]'无效。'。

显然我在这里遗漏了一些东西，我希望能得到一些关于如何返回列表的建议，以便重新显示模型不会导致错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:40:35.067

如果您被迫在两个请求之间保留整个列表，无论出于何种原因，我认为最好的方法是使用：

```
TempData["EnterUniqueKeyHere"] = PossibleEntriesForOption1; 
```

存储它，然后：

```
PossibleEntriesForOption1 = TempData["EnterUniqueKeyHere"] as IList<Option1>; 
```

检索它。

请注意，存储在 TempData 中的任何内容都将在单个请求后自动删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T13:38:36.580

如果验证失败，您需要使用值列表加载下拉列表。否则，它将失败。

我相信，当您最初加载视图时，它会执行 HttpGet 方法。在 HttpGet 方法中，您必须绑定 Dropdownlist

当你提交页面时，它会执行 httpPost 方法，如果一切正常，它就会提交。如果验证失败，它将执行 HTTPPost 方法，但找不到任何下拉绑定。

所以试试这个：在你的情况下

```
 if (ModelState.IsValid)
            {
                var response = service.Create(add);
                if (response.IsValid)
                {
                    TempData["message"] = "You successfully added a new Example Entry";
                    return View("AddSuccess", response);
                }

                //else errors, so copy the errors over to the ModelState
                response.CopyErrorsToModelState(ModelState, add);
            }
    else //if validation fails, you need to reload the dropdown and display your view.
      {
          // populate your dropdown again
              // You can add errors list into ModelState.
              ViewData.ModelState.AddModelError("What is the error", "Error Message, "What needs to be done by user, to get it work");
             return view(add)
      } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T15:10:20.787

在添加的获取操作中，您将为这 2 个属性创建具有适当值的模型 - PosibleEntriesForOption1 和 PosibleEntriesForOption2 由于这些设置正确且在视图上可用，因此下拉菜单在获取时正确呈现。

现在在 POST 上，当验证失败时，您必须再次设置这些属性。

```
 if (ModelState.IsValid)
    {
        // Do something
    }

    // before you redisplay the same view
    // set the properties PosibleEntriesForOption1 & PosibleEntriesForOption2

    // Some validation error, so redisplay same view
    return View(add); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T18:14:42.383

Dan Nixon 的 TempData 技术工作一次，但如果验证再次失败，则 TempData 条目为空。我想我也必须重新加载我的列表。

# mysql - 如何在 Grails 中连接到 mysql 数据库？

> ID：11345305
> 
> 赞同：1
> 
> 时间：2012-07-05T13:26:30.873
> 
> 标签：mysql, grails, amazon-ec2

我有一个连接到本地计算机的 Amazon ec2 mysql 数据库。我在其中创建了一个名为`locker`.

我取消了`BuildConfig.groovy`添加 mysql 连接器的行的注释。

这是我的`DataSource.groovy`文件：

```
dataSource {
    pooled = true
    driverClassName = "com.mysql.jdbc.Driver"
    dialect = "org.hibernate.dialect.MySQL5InnoDBDialect"
}
hibernate {
    cache.use_second_level_cache = true
    cache.use_query_cache = false
    cache.region.factory_class = 'net.sf.ehcache.hibernate.EhCacheRegionFactory'
}
// environment specific settings
environments {
    development {
        dataSource {
            dbCreate = "create" // one of 'create', 'create-drop', 'update', 'validate', ''
            url = "jdbc:mysql://localhost/locker?useUnicode=yes&characterEncoding=UTF-8"
            username = "anto"
            password = "****"
        }
        hibernate {
            show_sql = true
        }
    }
    test {
        dataSource {
            dbCreate = "update"
            url = "jdbc:h2:mem:testDb;MVCC=TRUE;LOCK_TIMEOUT=10000"
        }
    }
    production {
        dataSource {
            dbCreate = "update"
            url = "jdbc:h2:prodDb;MVCC=TRUE;LOCK_TIMEOUT=10000"
            pooled = true
            properties {
               maxActive = -1
               minEvictableIdleTimeMillis=1800000
               timeBetweenEvictionRunsMillis=1800000
               numTestsPerEvictionRun=3
               testOnBorrow=true
               testWhileIdle=true
               testOnReturn=true
               validationQuery="SELECT 1"
            }
        }
    }
} 
```

但是当我尝试运行我的 grails 应用程序时，我得到了一个像这样的大错误：

```
 Error 2012-07-05 18:54:53,533 [pool-5-thread-1] ERROR context.GrailsContextLoader  - Error executing bootstraps: Error creating bean with name 'transactionManagerPostProcessor': Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionManager': Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory': Cannot resolve reference to bean 'lobHandlerDetector' while setting bean property 'lobHandler'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'lobHandlerDetector': Invocation of init method failed; nested exception is org.springframework.jdbc.support.MetaDataAccessException: Error while extracting DatabaseMetaData; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Access denied for user 'anto'@'localhost' (using password: YES))
Message: Error creating bean with name 'transactionManagerPostProcessor': Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionManager': Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory': Cannot resolve reference to bean 'lobHandlerDetector' while setting bean property 'lobHandler'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'lobHandlerDetector': Invocation of init method failed; nested exception is org.springframework.jdbc.support.MetaDataAccessException: Error while extracting DatabaseMetaData; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Access denied for user 'anto'@'localhost' (using password: YES))
    Line | Method
->>  334 | innerRun  in java.util.concurrent.FutureTask$Sync
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|    166 | run       in java.util.concurrent.FutureTask
|   1110 | runWorker in java.util.concurrent.ThreadPoolExecutor
|    603 | run       in java.util.concurrent.ThreadPoolExecutor$Worker
^    722 | run . . . in java.lang.Thread

Caused by BeanCreationException: Error creating bean with name 'transactionManager': Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory': Cannot resolve reference to bean 'lobHandlerDetector' while setting bean property 'lobHandler'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'lobHandlerDetector': Invocation of init method failed; nested exception is org.springframework.jdbc.support.MetaDataAccessException: Error while extracting DatabaseMetaData; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Access denied for user 'anto'@'localhost' (using password: YES))
->>  334 | innerRun  in java.util.concurrent.FutureTask$Sync
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|    166 | run       in java.util.concurrent.FutureTask
|   1110 | runWorker in java.util.concurrent.ThreadPoolExecutor
|    603 | run       in java.util.concurrent.ThreadPoolExecutor$Worker
^    722 | run . . . in java.lang.Thread

Caused by BeanCreationException: Error creating bean with name 'sessionFactory': Cannot resolve reference to bean 'lobHandlerDetector' while setting bean property 'lobHandler'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'lobHandlerDetector': Invocation of init method failed; nested exception is org.springframework.jdbc.support.MetaDataAccessException: Error while extracting DatabaseMetaData; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Access denied for user 'anto'@'localhost' (using password: YES))
->>  334 | innerRun  in java.util.concurrent.FutureTask$Sync
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|    166 | run       in java.util.concurrent.FutureTask
|   1110 | runWorker in java.util.concurrent.ThreadPoolExecutor
|    603 | run       in java.util.concurrent.ThreadPoolExecutor$Worker
^    722 | run . . . in java.lang.Thread

Caused by BeanCreationException: Error creating bean with name 'lobHandlerDetector': Invocation of init method failed; nested exception is org.springframework.jdbc.support.MetaDataAccessException: Error while extracting DatabaseMetaData; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Access denied for user 'anto'@'localhost' (using password: YES))
->>  334 | innerRun  in java.util.concurrent.FutureTask$Sync
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|    166 | run       in java.util.concurrent.FutureTask
|   1110 | runWorker in java.util.concurrent.ThreadPoolExecutor
|    603 | run       in java.util.concurrent.ThreadPoolExecutor$Worker
^    722 | run . . . in java.lang.Thread

Caused by MetaDataAccessException: Error while extracting DatabaseMetaData; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Access denied for user 'anto'@'localhost' (using password: YES))
->>  334 | innerRun  in java.util.concurrent.FutureTask$Sync
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|    166 | run       in java.util.concurrent.FutureTask
|   1110 | runWorker in java.util.concurrent.ThreadPoolExecutor
|    603 | run       in java.util.concurrent.ThreadPoolExecutor$Worker
^    722 | run . . . in java.lang.Thread

Caused by SQLNestedException: Cannot create PoolableConnectionFactory (Access denied for user 'anto'@'localhost' (using password: YES))
->> 1549 | createPoolableConnectionFactory in org.apache.commons.dbcp.BasicDataSource
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|   1388 | createDataSource in     ''
|   1044 | getConnection in     ''
|    334 | innerRun  in java.util.concurrent.FutureTask$Sync
|    166 | run . . . in java.util.concurrent.FutureTask
|   1110 | runWorker in java.util.concurrent.ThreadPoolExecutor
|    603 | run . . . in java.util.concurrent.ThreadPoolExecutor$Worker
^    722 | run       in java.lang.Thread

Caused by SQLException: Access denied for user 'anto'@'localhost' (using password: YES)
->> 1073 | createSQLException in com.mysql.jdbc.SQLError
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|   3597 | checkErrorPacket in com.mysql.jdbc.MysqlIO
|   3529 | checkErrorPacket in     ''
|    935 | checkErrorPacket in     ''
|   4101 | secureAuth411 in     ''
|   1300 | doHandshake in     ''
|   2337 | coreConnect in com.mysql.jdbc.ConnectionImpl
|   2370 | connectOneTryOnly in     ''
|   2154 | createNewIO in     ''
|    792 | <init>    in     ''
|     47 | <init> .  in com.mysql.jdbc.JDBC4Connection
|    411 | handleNewInstance in com.mysql.jdbc.Util
|    381 | getInstance in com.mysql.jdbc.ConnectionImpl
|    305 | connect   in com.mysql.jdbc.NonRegisteringDriver
|     38 | createConnection in org.apache.commons.dbcp.DriverConnectionFactory
|    582 | makeObject in org.apache.commons.dbcp.PoolableConnectionFactory
|   1556 | validateConnectionFactory in org.apache.commons.dbcp.BasicDataSource
|   1545 | createPoolableConnectionFactory in     ''
|   1388 | createDataSource in     ''
|   1044 | getConnection in     ''
|    334 | innerRun  in java.util.concurrent.FutureTask$Sync
|    166 | run       in java.util.concurrent.FutureTask
|   1110 | runWorker in java.util.concurrent.ThreadPoolExecutor
|    603 | run       in java.util.concurrent.ThreadPoolExecutor$Worker
^    722 | run . . . in java.lang.Thread
| Error 2012-07-05 18:54:53,630 [pool-5-thread-1] ERROR [localhost].[/locker]  - Exception sending context initialized event to listener instance of class org.codehaus.groovy.grails.web.context.GrailsContextLoaderListener
Message: Error creating bean with name 'transactionManagerPostProcessor': Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionManager': Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory': Cannot resolve reference to bean 'lobHandlerDetector' while setting bean property 'lobHandler'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'lobHandlerDetector': Invocation of init method failed; nested exception is org.springframework.jdbc.support.MetaDataAccessException: Error while extracting DatabaseMetaData; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Access denied for user 'anto'@'localhost' (using password: YES))
    Line | Method
->>  334 | innerRun  in java.util.concurrent.FutureTask$Sync
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|    166 | run       in java.util.concurrent.FutureTask
|   1110 | runWorker in java.util.concurrent.ThreadPoolExecutor
|    603 | run       in java.util.concurrent.ThreadPoolExecutor$Worker
^    722 | run . . . in java.lang.Thread

Caused by BeanCreationException: Error creating bean with name 'transactionManager': Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory': Cannot resolve reference to bean 'lobHandlerDetector' while setting bean property 'lobHandler'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'lobHandlerDetector': Invocation of init method failed; nested exception is org.springframework.jdbc.support.MetaDataAccessException: Error while extracting DatabaseMetaData; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Access denied for user 'anto'@'localhost' (using password: YES))
->>  334 | innerRun  in java.util.concurrent.FutureTask$Sync
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|    166 | run       in java.util.concurrent.FutureTask
|   1110 | runWorker in java.util.concurrent.ThreadPoolExecutor
|    603 | run       in java.util.concurrent.ThreadPoolExecutor$Worker
^    722 | run . . . in java.lang.Thread

Caused by BeanCreationException: Error creating bean with name 'sessionFactory': Cannot resolve reference to bean 'lobHandlerDetector' while setting bean property 'lobHandler'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'lobHandlerDetector': Invocation of init method failed; nested exception is org.springframework.jdbc.support.MetaDataAccessException: Error while extracting DatabaseMetaData; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Access denied for user 'anto'@'localhost' (using password: YES))
->>  334 | innerRun  in java.util.concurrent.FutureTask$Sync
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|    166 | run       in java.util.concurrent.FutureTask
|   1110 | runWorker in java.util.concurrent.ThreadPoolExecutor
|    603 | run       in java.util.concurrent.ThreadPoolExecutor$Worker
^    722 | run . . . in java.lang.Thread

Caused by BeanCreationException: Error creating bean with name 'lobHandlerDetector': Invocation of init method failed; nested exception is org.springframework.jdbc.support.MetaDataAccessException: Error while extracting DatabaseMetaData; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Access denied for user 'anto'@'localhost' (using password: YES))
->>  334 | innerRun  in java.util.concurrent.FutureTask$Sync
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|    166 | run       in java.util.concurrent.FutureTask
|   1110 | runWorker in java.util.concurrent.ThreadPoolExecutor
|    603 | run       in java.util.concurrent.ThreadPoolExecutor$Worker
^    722 | run . . . in java.lang.Thread

Caused by MetaDataAccessException: Error while extracting DatabaseMetaData; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Access denied for user 'anto'@'localhost' (using password: YES))
->>  334 | innerRun  in java.util.concurrent.FutureTask$Sync
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|    166 | run       in java.util.concurrent.FutureTask
|   1110 | runWorker in java.util.concurrent.ThreadPoolExecutor
|    603 | run       in java.util.concurrent.ThreadPoolExecutor$Worker
^    722 | run . . . in java.lang.Thread

Caused by SQLNestedException: Cannot create PoolableConnectionFactory (Access denied for user 'anto'@'localhost' (using password: YES))
->> 1549 | createPoolableConnectionFactory in org.apache.commons.dbcp.BasicDataSource
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|   1388 | createDataSource in     ''
|   1044 | getConnection in     ''
|    334 | innerRun  in java.util.concurrent.FutureTask$Sync
|    166 | run . . . in java.util.concurrent.FutureTask
|   1110 | runWorker in java.util.concurrent.ThreadPoolExecutor
|    603 | run . . . in java.util.concurrent.ThreadPoolExecutor$Worker
^    722 | run       in java.lang.Thread

Caused by SQLException: Access denied for user 'anto'@'localhost' (using password: YES)
->> 1073 | createSQLException in com.mysql.jdbc.SQLError
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|   3597 | checkErrorPacket in com.mysql.jdbc.MysqlIO
|   3529 | checkErrorPacket in     ''
|    935 | checkErrorPacket in     ''
|   4101 | secureAuth411 in     ''
|   1300 | doHandshake in     ''
|   2337 | coreConnect in com.mysql.jdbc.ConnectionImpl
|   2370 | connectOneTryOnly in     ''
|   2154 | createNewIO in     ''
|    792 | <init>    in     ''
|     47 | <init> .  in com.mysql.jdbc.JDBC4Connection
|    411 | handleNewInstance in com.mysql.jdbc.Util
|    381 | getInstance in com.mysql.jdbc.ConnectionImpl
|    305 | connect   in com.mysql.jdbc.NonRegisteringDriver
|     38 | createConnection in org.apache.commons.dbcp.DriverConnectionFactory
|    582 | makeObject in org.apache.commons.dbcp.PoolableConnectionFactory
|   1556 | validateConnectionFactory in org.apache.commons.dbcp.BasicDataSource
|   1545 | createPoolableConnectionFactory in     ''
|   1388 | createDataSource in     ''
|   1044 | getConnection in     ''
|    334 | innerRun  in java.util.concurrent.FutureTask$Sync
|    166 | run       in java.util.concurrent.FutureTask
|   1110 | runWorker in java.util.concurrent.ThreadPoolExecutor
|    603 | run       in java.util.concurrent.ThreadPoolExecutor$Worker
^    722 | run . . . in java.lang.Thread
| Error 2012-07-05 18:54:53,655 [pool-5-thread-1] ERROR core.StandardContext  - Error listenerStart
| Error 2012-07-05 18:54:53,671 [pool-5-thread-1] ERROR core.StandardContext  - Context [/locker] startup failed due to previous errors 
```

我对grails很陌生。什么地方出了错？谁能帮我？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:36:26.020

您使用的用户名和密码似乎无效：

```
Access denied for user 'anto'@'localhost' (using password: YES) 
```

这不是 Grails 问题，而是一般权限问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T13:57:41.877

看看[这个](https://stackoverflow.com/questions/8348272/connecting-to-remote-mysql-server-using-jdbc-issue)问题。它讨论了配置 MySQL 以允许远程连接和 JDBC。您可能需要配置 MySQL 以允许远程连接，因为 JDBC 驱动器使用 TCP/IP 套接字连接到数据库，而不管数据库服务器在哪里运行以及 JDBC 客户端在哪里运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-07T11:32:49.680

好吧，这个问题可能有两个（或更多）原因。一是权限原因，您应该将其提供给您的特定用户。

另外，我注意到在您的 DataSource.groovy 中，url 设置为： `url = "jdbc:mysql://localhost/locker?useUnicode=yes&characterEncoding=UTF-8"`

请注意，您可能会忘记在 url 中添加您的 mysql 端口，这会导致同样的问题。我做的方式是这样的： `url = "jdbc:mysql://localhost/locker:**1234**?useUnicode=yes&characterEncoding=UTF-8"`

# java - 将数据从android发送到php服务器

> ID：11345306
> 
> 赞同：0
> 
> 时间：2012-07-05T13:26:31.837
> 
> 标签：java, php

我有我的 sql 数据库服务器，其中包含一个名为 entry 的表我想更新该表我正在从 wifi 或移动网络发送数据我正在设计该代码

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    name=(EditText)findViewById(R.id.et_nm);
    dob=(EditText)findViewById(R.id.et_dob);
    phone=(EditText)findViewById(R.id.et_phone);
    email=(EditText)findViewById(R.id.et_email);
    gender=(RadioGroup)findViewById(R.id.radioGroup1);
    submit=(Button)findViewById(R.id.btn_submit);
    display=(Button)findViewById(R.id.btn_display);
    temp=(EditText)findViewById(R.id.et_temp);
    id_name=(EditText)findViewById(R.id.et_id_name);
   db = openOrCreateDatabase( "hospital.db", SQLiteDatabase.CREATE_IF_NECESSARY, null); //localdb
    try {
        final String CREATE_TABLE_CONTAIN = "CREATE TABLE IF NOT EXISTS detail ("
                + "id INTEGER primary key AUTOINCREMENT,"
                + "name TEXT,"
                + "dob DATE,"
                + "phone TEXT,"
                + "email TEXT,"
                + "gender TEXT,"
                + "temperature INTEGER);";
        db.execSQL(CREATE_TABLE_CONTAIN);

        ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo wifiNetwork = cm.getNetworkInfo(ConnectivityManager.TYPE_WIFI);
        NetworkInfo mobileNetwork = cm.getNetworkInfo(ConnectivityManager.TYPE_MOBILE);

        if(wifiNetwork != null && wifiNetwork.isConnected() || mobileNetwork != null && mobileNetwork.isConnected()){
            Toast.makeText(SubmissionActivity.this,"Connection Successful",Toast.LENGTH_LONG).show();
            try{
                    Cursor cur = db.rawQuery("SELECT name,dob,phone,email,gender,temperature FROM detail", null);
                    if(cur.getCount() > 0){
                        cur.moveToFirst();
                        postParameters1.add(new BasicNameValuePair("name1",cur.getString(cur.getColumnIndex("name"))));
                        postParameters1.add(new BasicNameValuePair("dob1", cur.getString(cur.getColumnIndex("dob"))));
                        postParameters1.add(new BasicNameValuePair("phone1", cur.getString(cur.getColumnIndex("phone"))));
                        postParameters1.add(new BasicNameValuePair("email1", cur.getString(cur.getColumnIndex("email"))));
                        postParameters1.add(new BasicNameValuePair("gender1", cur.getString(cur.getColumnIndex("gender"))));
                        postParameters1.add(new BasicNameValuePair("temp1", cur.getString(cur.getColumnIndex("temperature"))));
                        resp =httpClient.executeHttpPost("http://117.211.123.25/vb/submit.php", postParameters1);

                        if (resp.contains("table created on server")){
                            Toast.makeText(SubmissionActivity.this, "Data are uploading on server... Please Wait!!", Toast.LENGTH_LONG).show();
                            while(cur.isLast()!=true){
                            cur.moveToNext();
                            postParameters1.add(new BasicNameValuePair("name1",cur.getString(cur.getColumnIndex("name"))));
                            postParameters1.add(new BasicNameValuePair("dob1", cur.getString(cur.getColumnIndex("dob"))));
                            postParameters1.add(new BasicNameValuePair("phone1", cur.getString(cur.getColumnIndex("phone"))));
                            postParameters1.add(new BasicNameValuePair("email1", cur.getString(cur.getColumnIndex("email"))));
                            postParameters1.add(new BasicNameValuePair("gender1", cur.getString(cur.getColumnIndex("gender"))));
                            postParameters1.add(new BasicNameValuePair("temp1", cur.getString(cur.getColumnIndex("temperature"))));
                            resp =httpClient.executeHttpPost("http://117.211.123.25/vb/display.php", postParameters1);
                            Toast.makeText(SubmissionActivity.this, "Data are uploading on server... Please Wait!!", Toast.LENGTH_LONG).show();                             
                            }
                            db.delete("detail", null, null);
                        }
                    }
                }   
                catch (Exception e) {
                    Toast.makeText(SubmissionActivity.this, "ERROR "+e.toString(), Toast.LENGTH_LONG).show();
                }
        }   
    }
    catch (Exception e) {
        Toast.makeText(SubmissionActivity.this, "ERROR "+e.toString(), Toast.LENGTH_LONG).show();
    }
    submit.setOnClickListener(new View.OnClickListener() {
                       public void onClick(View v) {
                              // TODO Auto-generated method stub
                                    ArrayList<NameValuePair> postParameters = new ArrayList<NameValuePair>();
                                    postParameters.add(new BasicNameValuePair("name1", name.getText().toString()));
                                    postParameters.add(new BasicNameValuePair("dob1", dob.getText().toString()));
                                    postParameters.add(new BasicNameValuePair("phone1", phone.getText().toString()));
                                    postParameters.add(new BasicNameValuePair("email1", email.getText().toString()));
                                    postParameters.add(new BasicNameValuePair("temp1", temp.getText().toString()));
                                    String response = null;

                                    //tmp=Integer.parseInt(temp.getText().toString());

                                    int selectedId = gender.getCheckedRadioButtonId();

                                    radioSexButton = (RadioButton) findViewById(selectedId); 

                                        switch (selectedId){    
                                        case R.id.radio0:
                                            postParameters.add(new BasicNameValuePair("gender1", radioSexButton.getText().toString()));
                                            break;
                                        case R.id.radio1:
                                            postParameters.add(new BasicNameValuePair("gender1", radioSexButton.getText().toString()));
                                            break;
                                        }
                                        boolean status=hasConnection();
                                        if(status==true){
                                            try{
                                                    localDbStorage();

                                                    response =httpClient.executeHttpPost("http://117.211.123.25/vb/submit.php", postParameters);
                                                    if (response.contains("table created on server")){
                                                    //Toast.makeText(SubmissionActivity.this,response, Toast.LENGTH_LONG).show();
                                                    Toast.makeText(SubmissionActivity.this, "1 record added on server", Toast.LENGTH_LONG).show();
                                                    if(tmp > 100)
                                                        Toast.makeText(SubmissionActivity.this, "Temperature is high", Toast.LENGTH_LONG).show();
                                                    }   
                                                    else
                                                    {
                                                        Toast.makeText(SubmissionActivity.this,"Server not available",Toast.LENGTH_LONG).show();
                                                        localDbStorage();

                                                    }
                                            }catch(Exception e){
                                                Toast.makeText(SubmissionActivity.this,"error "+e.toString(),Toast.LENGTH_LONG).show();
                                            }
                                        }
                                        else{
                                            Toast.makeText(SubmissionActivity.this,"Connection Fail",Toast.LENGTH_LONG).show();
                                            localDbStorage();
                                        }//localdb

                                        }
                       public boolean hasConnection() {
                           ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);

                           NetworkInfo wifiNetwork = cm.getNetworkInfo(ConnectivityManager.TYPE_WIFI);
                           if (wifiNetwork != null && wifiNetwork.isConnected()) {
                            return true;
                           }

                           NetworkInfo mobileNetwork = cm.getNetworkInfo(ConnectivityManager.TYPE_MOBILE);
                           if (mobileNetwork != null && mobileNetwork.isConnected()) {
                            return true;
                           }
                           NetworkInfo activeNetwork = cm.getActiveNetworkInfo();
                           if (activeNetwork != null && activeNetwork.isConnected()) {
                             return true;
                           }
                           Toast.makeText(SubmissionActivity.this,"No network",Toast.LENGTH_LONG).show();
                           return false;
                         }
                       public void localDbStorage(){                          
                           try{             //localdb
                            int selectedId = gender.getCheckedRadioButtonId();
                            radioSexButton = (RadioButton) findViewById(selectedId);
                            name2=name.getText().toString();
                            dob2=dob.getText().toString();
                            phone2=phone.getText().toString();
                            email2=email.getText().toString();
                            temp2=temp.getText().toString();

                            switch (selectedId){    
                            case R.id.radio0:
                                gender2=radioSexButton.getText().toString();
                                break;
                            case R.id.radio1:
                                gender2=radioSexButton.getText().toString();
                                break;
                            }                                               
                            db.execSQL("INSERT or replace INTO detail (name, dob, phone, email, gender,temperature) VALUES('"+ name2 + "','" + dob2 + "','" + phone2 + "','" + email2 + "','" + gender2 + "'," + temp2 + ");" );
                            Toast.makeText(SubmissionActivity.this, "1 record added on localdb", Toast.LENGTH_LONG).show();
                            if(tmp > 100)
                                Toast.makeText(SubmissionActivity.this, "Temperature is high", Toast.LENGTH_LONG).show();
                        }
                        catch (Exception e) {
                            Toast.makeText(SubmissionActivity.this, "ERROR "+e.toString(), Toast.LENGTH_LONG).show();  
                        }

                       }
       });

        display.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            // TODO Auto-generated method stub
            ArrayList<NameValuePair> postParameters = new ArrayList<NameValuePair>();
            postParameters.add(new BasicNameValuePair("id_name1", id_name.getText().toString()));
            String response = null;
            try {
                response =httpClient.executeHttpPost("http://117.211.123.25/vb/display.php", postParameters);
                Toast.makeText(SubmissionActivity.this, "Detail is "+response, Toast.LENGTH_LONG).show();
            } catch (Exception e) {
                Toast.makeText(SubmissionActivity.this, "ERROR "+e.toString(), Toast.LENGTH_LONG).show();
            }

        }
    });
} 
```

}

但是那个时候我想在一张表中发送多个 layout.xml 文件的数据，请帮助我将我的代码连接到服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T13:37:07.937

就个人而言，我认为您应该创建一个 Web 服务来完成实际的数据库工作。这种类型的逻辑不应该进入实际的客户端应用程序。然后，您将以您的 Web 服务将处理和存储的格式（例如 JSON 或 XML）向 Web 服务提交数据。

在客户端设备中使用如此多的特定于域的逻辑，您将不断推出更新以修复错误和功能。

在为外部连接提供如此多的数据库控制权时，还存在一些安全问题。

# hibernate - 双向 OneToOne 映射：从实体到子类以及从超类到实体？

> ID：11345311
> 
> 赞同：0
> 
> 时间：2012-07-05T13:26:52.027
> 
> 标签：hibernate, inheritance, jpa, one-to-one

我正在尝试在休眠中建立一个棘手的双向 OneToOne 映射。我有以下课程：

```
@Entity
@Inheritance(strategy = InheritanceType.JOINED)
public class Parent {
     @OneToOne
     private AnotherEntity anotherEntity;
}
@Entity
public class Child1 extends Parent{}

@Entity
public class Child2 extends Parent{}

@Entity
public class AnotherEntity {

    @OneToOne(mappedBy = "anotherEntity")
    private Child1 child1;
    @OneToOne(mappedBy = "anotherEntity")
    private Child2 child2;
} 
```

这里的问题是当我启动应用程序时：我收到以下消息：

```
org.hibernate.MappingException: property [anotherEntity] not found on entity [Child1]
    at org.hibernate.mapping.PersistentClass.getRecursiveProperty(PersistentClass.java:429)
    at org.hibernate.mapping.PersistentClass.getReferencedProperty(PersistentClass.java:369)
    at org.hibernate.cfg.Configuration.originalSecondPassCompile(Configuration.java:1614)
    at org.hibernate.cfg.Configuration.secondPassCompile(Configuration.java:1362)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1727)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1778)
    at org.springframework.orm.hibernate4.LocalSessionFactoryBuilder.buildSessionFactory(LocalSessionFactoryBuilder.java:189)
    at org.springframework.orm.hibernate4.LocalSessionFactoryBean.buildSessionFactory(LocalSessionFactoryBean.java:350)
    at org.springframework.orm.hibernate4.LocalSessionFactoryBean.afterPropertiesSet(LocalSessionFactoryBean.java:335)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1514)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:567)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
    at org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:631)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:588)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:645)
    at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:508)
    at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:449)
    at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:133)
    at javax.servlet.GenericServlet.init(GenericServlet.java:160)
    at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1266)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1185)
    at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1080)
    at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:5015)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5302)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:895)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:871)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:615)
    at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:962)
    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:536)
    at org.apache.catalina.startup.HostConfig.check(HostConfig.java:1471)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:301)
    at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:836)
    at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:761)
    at org.apache.catalina.manager.ManagerServlet.check(ManagerServlet.java:1436)
    at org.apache.catalina.manager.ManagerServlet.deploy(ManagerServlet.java:673)
    at org.apache.catalina.manager.ManagerServlet.doPut(ManagerServlet.java:431)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:644)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.filters.SetCharacterEncodingFilter.doFilter(SetCharacterEncodingFilter.java:108)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:581)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662) 
```

一种明显的解决方案是将`anotherEntity`字段移动到`Child1`and `Child2`，但这意味着失去从`Parent`to的链接`AnotherEntity`。

欢迎任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T03:09:27.840

简短的回答是你不能（使用休眠）。

首先，通过给出的示例，您要完成的工作并不完全清楚。您已指定要`AnotherEntity`具有两个类型的属性`Child1`。我猜你实际上想要一个，`Child1`并且`Child2`. 此外，您`mappedBy = "anotherEntity"`在两个属性上都使用相同的属性，您真的是说要在 Parent 上对另一个实体进行两个引用吗？无论哪种情况，这都有助于说明这种情况的问题：

您已指定`InheritanceType.JOINED`，这意味着`Parent`->的外键位于该类映射到`AnotherEntity`的任何表上。`Parent`在这种情况下，Hibernate 无法区分您的两个子类型，它必须完全依赖于您的 Java 类中指定的类型——这肯定会导致问题。

显然，其他 JPA 提供者可能支持这种行为（但您可以看到为什么 Hibernate 选择不这样做，以及为什么需要小心处理它）。作为参考，请参阅[这个](https://stackoverflow.com/questions/38057/why-onetomany-does-not-work-with-inheritance-in-hibernate)类似的 SO 问题和 Hibernate 论坛/JIRA 上的各种讨论：

*   [[ANN-558] @OneToMany(mappedBy="") 无法识别父类中的属性](https://hibernate.onjira.com/browse/ANN-558)
*   [[HHH-4233] 无法使用与父属性相关的 mappedby 绑定子项（多态性）](https://hibernate.onjira.com/browse/HHH-4233)
*   [Hibernate 抱怨缺少属性？](https://forum.hibernate.org/viewtopic.php?p=2380570)

# php - 计算平面文件中的唯一值并将它们更新为数组

> ID：11345321
> 
> 赞同：1
> 
> 时间：2012-07-05T13:27:24.373
> 
> 标签：php, arrays, algorithm, flat-file

在管道分隔的平面文件中计算唯一名称和最后一次出现（来自数据）的最明智的方法是什么，其中数据的形成方式如下：

```
Artist|YYYY-MM-DD|Location|\n 
```

因此，例如，当数据为（最后带有换行符）时：

```
The Band|2011-04-01|Club Bulc|
Le Artist|1999-12-24|Reindeer Row|
Soundmakers|2012-03-22|Pub Pizza|
The Band|2010-12-01|Someplace|
Soundmakers|2009-07-07|Faraway|
Soundmakers|2010-08-18|ShowEr| 
```

所需的格式是：

```
Artist|Times listed|Latest year 
```

您将如何遍历平面文件以将以下数据放入第二个平面文件中：

```
Le Artist|1|1999|
Soundmakers|3|2012|
The Band|2|2011| 
```

起初我以为这将是一项相当简单的任务，但结果却更具挑战性！

我有一个实现一半的实现（有些项目写了两次，有时年份在错误的行！），所以我想看看是否有一些更好的方法来完成这个。

我已经为此尝试了 OOP 和程序方法，到目前为止，我已经通过程序获得了更好的结果。但对我来说，方法真的无关紧要，因为这是我个人的学习（和使用）。

更新：该文件大约为 1 MB，在任何可预见的将来都将远远小于 10 MB。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:33:42.957

首先，创建一个以艺术家姓名为键的数组，以年份列表为值：

```
$grouped = array();

while (!feof($fd) && $line = fgets($fd)) {
    list($artist, $date) = explode('|', $line);
    list($year) = explode('-', $date);

    $grouped[$artist][] = $year;
} 
```

然后输出结果：

```
foreach ($grouped as $artist => $years) {
    printf("%s|%s|%s|\n", $artist, count($years), max($years));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T13:37:19.950

看起来确实很简单。您将希望将结果存储为这样的数组：

```
$bands = array(
    'Le Artist' => array('count' => 1, 'year' => 1999),
    ...
); 
```

您可以使用[`fgetcsv`](http://php.net/fgetcsv)读取行并同时将它们分开：

```
$line = fgetcsv($fh, 0, '|'); 
```

然后，您可以检查您是否已经拥有该艺术家并增加计数：

```
$artist = $line[0];
if (!isset($bands[$artist])) {
    $bands[$artist] = array('count' => 0, 'year' => null);
}
$bands[$artist]['count']++; 
```

对于年份，只需爆炸`$line[1]`提取年份，检查它是否大于，如果是则`$bands[$artist]['year']`替换它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T18:37:11.030

这是我最终使用的版本，它按我希望的那样工作：

```
<?php
$file = 'seen.txt';
$shows = array();
$sourceData = file($file);
foreach($sourceData as $row) {
    list($date, $artist, $venue, $city, $country) = explode('|', $row);
    $year = date('Y', strtotime($date));
    if(!isset($shows[$artist])) {
        $shows[$artist] = array('count' => 1, 'year' => $year);
    } else {
        $shows[$artist]['count']++;
        if($shows[$artist]['year'] < $year) {
            $shows[$artist]['year'] = $year;
        }
    }
}
echo '<h1>Bands and Shows</h1>';
ksort($shows);
foreach($shows as $band => $data) {
    echo 'I have seen <b>',$band,'</b> perform ',$data['count'],' times, most recently in ',$data['year'],'<br/>';
}
?> 
```

# android - 如何访问已在运行的应用程序？

> ID：11345328
> 
> 赞同：0
> 
> 时间：2012-07-05T13:27:46.303
> 
> 标签：android, android-activity

*   我通常使用“应用程序”菜单中的启动图标运行我的应用程序“A”。
*   我按下主页按钮，所以我的应用程序“A”仍在我的手机上运行。
*   现在我浏览手机中的文件，并使用共享操作与我的应用程序“A”共享此文件。
*   该文件正在完美共享，但不是使用我已经打开的应用程序实例，而是打开我的应用程序“A”的一个新实例。

如果我退出这个新实例，第一个实例仍在运行，这是一个关于我的应用程序安全目标的问题。

我尝试使用 FLAG_ACTIVITY_CLEAR_TOP 在第一个实例中使用活动，但它不起作用，因为它不是由操作系统启动的同一个应用程序。

有没有办法做到这一点 ？如果是的话，你能给我一些提示或一些线索吗？

* * *

我的清单：

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="8" />

<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@android:style/Theme.NoTitleBar" >
    <activity android:name=".SplashScreenActivity" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".ExplorerActivity"
        android:configChanges="orientation|keyboardHidden"
        android:theme="@android:style/Theme.Light.NoTitleBar" >
    </activity>
    <activity
        android:name=".ChooseDialogActivity"
        android:theme="@android:style/Theme.Translucent.NoTitleBar" >
        <intent-filter>
            <action android:name="android.intent.action.SEND" />

            <category android:name="android.intent.category.DEFAULT" />

            <data android:mimeType="*/*" />
        </intent-filter>
        <intent-filter>
            <action android:name="android.intent.action.SEND_MULTIPLE" />

            <category android:name="android.intent.category.DEFAULT" />

            <data android:mimeType="*/*" />
        </intent-filter>
    </activity>
</application> 
```

这是我的清单。常规流程：SplashScreenActivity -> ExplorerActivity

分享过程：ChooseDialogActivity -> ExplorerActivity

我想要的是，如果此活动已经存在，则第二个`ExplorerActivity`必须与第一个相同。`ExplorerActivity`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:36:38.167

请不要使用 launchMode="singleInstance"。这不是你想要的。singleInstance 仅适用于主屏幕和类似应用程序。

尝试`Intent.FLAG_ACTIVITY_NEW_TASK`在共享时使用。这会将您的应用程序与文件浏览应用程序分开，并可能获得您想要的行为。您可能还需要添加`FLAG_ACTIVIY_CLEAR_TOP`，具体取决于您对应用程序的编程方式。

**编辑**

当您从 ChooserActivity 启动 ExplorerActivity 时，请执行以下操作（或类似操作）：

```
Intent intent = new Intent(this, ChooserActivity.class);
intent.addFlags(Intent.ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(intent); 
```

如果已经有一个包含ChooserActivity 的任务正在运行，这应该将该任务带到前台，而不是创建一个新的ChooserActivity 实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T13:32:05.533

使用启动模式，这将使一个实例远离您的主要活动，因此对家庭活动进行此更改。

```
<activity ..
...
..
android:launchMode="singleInstance" /> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-05T13:33:28.170

尝试`android:launchMode="singleInstance"`

# iphone - 错误 Apple iPhone SDK 未安装

> ID：11345330
> 
> 赞同：1
> 
> 时间：2012-07-05T13:27:47.253
> 
> 标签：iphone, xcode, macos, xamarin.ios

我已安装 MacOSX 10.7.4、XCODE 4.3.3、Monotouch 5.2.12（评估）我尝试构建示例“HelloWorld_IPhone”，但收到错误消息：“未安装 Apple iPhone SDK”。我该如何解决这个错误？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:30:45.287

正如它所说，您必须下载并安装 Apple Iphone SDK

[http://www.tuaw.com/2009/01/25/iphone-dev-101-downloading-and-install-the-iphone-sdk/](http://www.tuaw.com/2009/01/25/iphone-dev-101-downloading-and-install-the-iphone-sdk/)

# actionscript-3 - 将时间轴动画置于顶部

> ID：11345336
> 
> 赞同：0
> 
> 时间：2012-07-05T13:28:06.913
> 
> 标签：actionscript-3, flash

我有一部电影在构造函数的舞台上添加了一个 MovieClip，我在时间轴上也有一个动画，可以在某些事件上播放。一切正常，除了电影我需要时间轴上的电影作为顶层，它目前在底部。

```
public Class BallCollision extends MovieClip{
    public function BallCollision(){
       mcBall = new MovieClip();
       stage.addChild(mcBall);
        //Adds stuff to the movie clip
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:32:35.597

您可以执行以下操作之一：

1.  在时间轴上创建一个名为“容器”的容器，然后添加`mcBall`到该容器中。此容器将位于现有动画下方的图层上。

2.  将所有现有动画放入一个 MovieClip 并给它一个实例名称，例如`animation`. 每当您在舞台上添加一些东西时，也可以使用`stage.addChild(animation)`将其带回顶部。

显然选项 1 更可取，但为了免费知识，我提供了选项 2。

# java - png 图像文件到视频（无损）

> ID：11345343
> 
> 赞同：0
> 
> 时间：2012-07-05T13:28:32.727
> 
> 标签：java, video, video-encoding, steganography, lossless

对于我的视频隐写术项目（在 java 中），我需要将顺序 PNG 编码为电影文件。我尝试**了 xuggler**但我正在压缩。（由于**下次我从视频中提取帧时隐藏在 png 图像的 lsb 中的数据会丢失**）

因为我需要稍后检索隐藏的数据，所以我需要找到一个过程以无损的方式将 png 图像编码为视频（首选格式：avi）。新视频的**大小对我来说不是问题**。

希望有人可以指导我或推荐一个有用的不同的java库来做到这一点。

如果需要，我可以发布我的 java 代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-13T20:29:44.120

您可以将一系列 PNG 混合到 MP4 文件中，而无需转码（保留确切的原始图像）。要在纯 Java 中执行此操作，请使用 JCodec ( [http://jcodec.org](http://jcodec.org) )：

```
public class SequenceMuxer {
    private SeekableByteChannel ch;
    private CompressedTrack outTrack;
    private int frameNo;
    private MP4Muxer muxer;
    private Size size;

    public SequenceMuxer(File out) throws IOException {
        this.ch = NIOUtils.writableFileChannel(out);

        // Muxer that will store the encoded frames
        muxer = new MP4Muxer(ch, Brand.MP4);

        // Add video track to muxer
        outTrack = muxer.addTrackForCompressed(TrackType.VIDEO, 25);
    }

    public void encodeImage(File png) throws IOException {
        if (size == null) {
            BufferedImage read = ImageIO.read(png);
            size = new Size(read.getWidth(), read.getHeight());
        }
        // Add packet to video track
        outTrack.addFrame(new MP4Packet(NIOUtils.fetchFrom(png), frameNo, 25, 1, frameNo, true, null, frameNo, 0));

        frameNo++;
    }

    public void finish() throws IOException {
        // Push saved SPS/PPS to a special storage in MP4
        outTrack.addSampleEntry(MP4Muxer.videoSampleEntry("png ", size, "JCodec"));

        // Write MP4 header and finalize recording
        muxer.writeHeader();
        NIOUtils.closeQuietly(ch);
    }
} 
```

要像这样使用它：

```
public static void main(String[] args) throws IOException {
    SequenceMuxer encoder = new SequenceMuxer(new File("video_png.mp4"));
    for (int i = 1; i < 100; i++) {
        encoder.encodeImage(new File(String.format("img%08d.png", i)));
    }
    encoder.finish();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T23:21:56.577

如果您从 www.processing.org 下载处理框架，您可以编写一个非常简单的 java 程序来读取您的图像并将它们写入一个 mov 文件，如果您使用 ANIMATION 编解码器并指定无损，它将完全无损。

# android - 如何使用 Facebook Android SDK 将大型视频上传到 Facebook 墙？

> ID：11345344
> 
> 赞同：-1
> 
> 时间：2012-07-05T13:28:33.480
> 
> 标签：android, facebook, facebook-graph-api, facebook-android-sdk

此答案无法按预期工作，因为示例代码必须将整个视频文件读入 RAM。在我只有 512MB RAM 的 Android 2.3 平板电脑上，它会触发 Out of Memory 错误。

[是否可以使用 Facebook SDK 将视频从 SD 卡上传到 Facebook？](https://stackoverflow.com/questions/6908413/is-uploading-videos-from-an-sd-card-to-facebook-possible-with-the-facebook-sdk)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T10:59:30.170

这对于当前的 Android facebook SDK 来说是不可能的！[https://github.com/facebook/facebook-android-sdk/](https://github.com/facebook/facebook-android-sdk/)根据这个网页[https://developers.facebook.com/blog/post/493/](https://developers.facebook.com/blog/post/493/)，URL 必须是 graph-video.facebook.com ，而不是graph.facebook.com。我搜索了所有 Android facebook SDK java 源代码，它根本没有连接到 graph-video.facebook.com。

android-facebook-sdk 很烂。

# java - 如何通过提供 PrivateKey 来获得 RSA PublicKey？

> ID：11345346
> 
> 赞同：11
> 
> 时间：2012-07-05T13:28:38.377
> 
> 标签：java, security, cryptography, rsa

我正在寻找一个可以获取 RSA PrivateKey 并返回正确的 RSA PublicKey 的 Java 函数？

或者，是否有一个函数可以告诉我们 RSA PrivateKey/PublicKey 是否有效？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-05T16:16:21.323

如果您将私钥作为[RSAPrivateCrtKey](http://docs.oracle.com/javase/6/docs/api/java/security/interfaces/RSAPrivateCrtKey.html)对象，则可以获得公共指数和模数。

然后你可以像这样创建公钥：

```
RSAPublicKeySpec publicKeySpec = new java.security.spec.RSAPublicKeySpec(modulus, exponent);   
try {   
     KeyFactory keyFactory = KeyFactory.getInstance("RSA");   

     PublicKey publicKey = keyFactory.generatePublic(publicKeySpec);   
} catch (Exception e) {   
     e.printStackTrace();   
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-05T16:34:18.003

我想不出你需要这个的任何充分理由。但这里是：

```
static boolean isValidRSAPair(KeyPair pair)
{
  Key key = pair.getPrivate();
  if (key instanceof RSAPrivateCrtKey) {
    RSAPrivateCrtKey pvt = (RSAPrivateCrtKey) key;
    BigInteger e = pvt.getPublicExponent();
    RSAPublicKey pub = (RSAPublicKey) pair.getPublic();
    return e.equals(pub.getPublicExponent()) && 
      pvt.getModulus().equals(pub.getModulus());
  }
  else {
    throw new IllegalArgumentException("Not a CRT RSA key.");
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-25T15:46:17.197

正如其他人所指出的，如果您有`RSA CRT KEY`，那么您可以从中提取公钥。然而，实际上**不可能**从纯私钥中检索公钥。

原因很简单：生成 RSA 密钥时，私钥和公钥实际上没有区别。一个被选择为私有的，剩下的一个是公共的。

因此，如果您可以从纯私钥计算公钥，则可以通过定义从公钥计算私钥......

如果两者都有，您实际上可以轻松测试它们是否匹配：

```
RSAPublicKey rsaPublicKey = (RSAPublicKey) publicKey;
RSAPrivateKey rsaPrivateKey = (RSAPrivateKey) privateKey;
return rsaPublicKey.getModulus().equals( rsaPrivateKey.getModulus() )
  && BigInteger.valueOf( 2 ).modPow(
  rsaPublicKey.getPublicExponent().multiply( rsaPrivateKey.getPrivateExponent() )
    .subtract( BigInteger.ONE ), 
  rsaPublicKey.getModulus() ).equals( BigInteger.ONE ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-07T13:03:05.673

如果你有一个类型的对象，`RSAPrivateKey`那么你需要做两件事：

1.  获取模数。简单的：`privateKey.getModulus()`
2.  计算公共指数。这有点棘手，但并非不可能。请参阅[公共指数的定义](http://en.wikipedia.org/wiki/RSA_%28algorithm%29)。通常，公共指数是`65537`。

获得模数和公共指数后，您可以按照 PeteyB 的回答。

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2012-07-05T13:33:04.587

AFAIK 给定一个密钥，您无法派生 RSA 密钥对的另一个密钥。这相当于破坏了 RSA。

要测试一对，只需使用一个密钥加密某些内容并使用另一个密钥对其进行解密，看看您是否能得到原始结果。

# magento - 如何将产品缩略图添加到 Magento 的订单评论页面？

> ID：11345349
> 
> 赞同：2
> 
> 时间：2012-07-05T13:28:48.923
> 
> 标签：magento, php

我正在尝试在订单视图页面中显示产品的图像缩略图。为此，我正在使用这条线

```
<img src="<?php echo Mage::helper('catalog/image')
->init($_item,'small_image')
->resize(50); ?>" width="50" height="50" alt="" /> 
```

在这个文件中

```
template/sales/order/items/renderer/default.phtml 
```

我得到的是magento的空白图像，这个--> ![在此处输入图像描述](../Images/66de16f773ee238b9522d30ce7dea428.png)

在萤火虫上，我得到如下图片网址

```
src="http://my_Website.com/media/catalog/product/cache/1/small_image/50x/9df78eab33525d08d6e5fb8d27136e95/images/catalog/product/placeholder/small_image.jpg"> 
```

这就是空白图像的来源。

谁能解释这里发生了什么以及可能的解决方案是什么。

非常感谢您提前。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T06:42:44.077

试试下面给出的代码：

首先加载产品

```
$_product = Mage::getModel('catalog/product')->load($_item->getProductId()); 
```

然后使用下面给出的代码显示您想要的缩略图

```
<img src="<?php echo Mage::helper('catalog/image')->init($_product, 'thumbnail')->resize(75, 75); ?>" alt="<?php echo $this->htmlEscape($_item->getName()); ?>" border="0" width="75" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-07T09:05:27.767

此代码运行良好尝试：

```
if($_item->getProductType() == 'configurable') {
    $_product = $_item->getProduct();
}else{
    $_product = Mage::getModel('catalog/product')->load($_item->getId());
}

?>
<img src="<?php echo Mage::helper('catalog/image')->init($_product, 'small_image')->resize(135); ?>" width="135" height="135" alt="" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T13:35:54.110

确保您已选中产品媒体选项卡上的相应单选按钮。需要设置三列（基本图像、小图像、缩略图）以将该图像用作缩略图。

# c# - 检查，当本地应用程序发送请求时，用户是否在 mvc 应用程序中进行了身份验证

> ID：11345350
> 
> 赞同：0
> 
> 时间：2012-07-05T13:29:03.710
> 
> 标签：c#, asp.net-mvc, authentication, request

我有带有授权系统的 asp .net mvc 应用程序。控制台（或 winforms，没关系）应用程序使用 WebRequest 将一些数据发布到服务器。一切正常，但知道我需要检查，是否经过用户授权，然后退回。所以，我在检查

```
User.Identity.IsAuthenticated 
```

它返回false。但是在浏览器中我已经过身份验证，并且这种方法在 mvc-aplication 中明显有效，但是当控制台应用程序发送请求时，它不起作用。如何解决？

我用[它](https://stackoverflow.com/questions/9142804/post-multiple-files-and-form-values-using-net-console-application)来加载我的文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T09:31:37.553

当您创建 Web 请求（我假设您的意思是`HttpWebRequest`）时，请确保将其配置为发送 Windows 凭据。

对于`HttpWebRequest`，您将设置[`UseDefaultCredentials`](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.usedefaultcredentials.aspx)为`true`：

> [`HttpWebRequest`](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx)当此对象发出的请求（如果服务器请求）应使用当前登录用户的凭据进行身份验证时，将此属性设置为 true 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T09:08:55.963

本质上，您的控制台应用程序还需要将请求中的“表单身份验证 cookie 或票证”发送到您的 Web 服务器。这篇文章可能会有所帮助[http://www.codeproject.com/Articles/187198/Various-Clients-and-Forms-Authentication](http://www.codeproject.com/Articles/187198/Various-Clients-and-Forms-Authentication)。

# iphone - 如何增加 iPhone 中的 UITextView 高度和 X 轴值？

> ID：11345354
> 
> 赞同：0
> 
> 时间：2012-07-05T13:29:17.657
> 
> 标签：iphone, ios, uiview, uitextview

我正在使用 UITextView 在 iPhone 应用程序中工作。我正在尝试根据其内容长度增加 UITextView 的高度。它工作正常。但是，当 uitextview 的高度增加时，UITextView 应该改变向上的高度而不是增加向下的高度。

这是我在项目中尝试的代码，

```
 baseView = [[UIView alloc] initWithFrame:CGRectMake(0, 50, 320, 50)];
    baseView.backgroundColor = [UIColor lightGrayColor];
    [self.view addSubview:baseView];

    TextView = [[UITextView alloc] initWithFrame:CGRectMake(20, 10, 280, 40)];
    TextView.backgroundColor = [UIColor whiteColor];
    TextView.layer.borderWidth = 2;
    TextView.delegate = self;
    TextView.font = [UIFont fontWithName:@"Helvetica" size:16];
    [baseView addSubview: TextView];

    -(void)textViewDidChange:(UITextView *)textView
   {
       CGRect frame = messageTextView.frame;
       frame.size.height = messageTextView.contentSize.height;
       TextView.frame = CGRectMake(20, 10, 280, frame.size.height);
       baseView.frame = CGRectMake(0, 50, 320, frame.size.height+20);
   } 
```

当 UITextView 高度发生变化时，效果 textview 高度将在顶部增加。谁能帮我解决这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T13:43:34.800

在更改框架的方法中，还可以`frame.origin.y`编辑`textView`

```
-(void)textViewDidChange:(UITextView *)textView
{
   CGRect frame = messageTextView.frame;
   frame.size.height = messageTextView.contentSize.height;
   TextView.frame = CGRectMake(20, 0, 280, frame.size.height); //previous y was 10
   baseView.frame = CGRectMake(0, 50, 320, frame.size.height+20);
} 
```

尽管如此，我相信您知道当您将其添加到视图时，您只有 10 个像素`textView`可以上升。`BaseView`

# python - Google App Engine，使用 python 获取命名空间

> ID：11345355
> 
> 赞同：0
> 
> 时间：2012-07-05T13:29:18.497
> 
> 标签：python, google-app-engine, namespaces

我目前正在使用带有 Python 的 Google App Engine。我在命名空间中设置了一些数据，现在我试图从命名空间中获取这些数据。但我无法让它工作。

当我这样做时，一切正常：

```
namespace_manager.set_namespace('test') 
```

但是当我这样做时，它就不起作用了：

```
bla = namespace_manager.get_namespace()
namespace_manager.set_namespace(bla) 
```

我的 URL 确实指向了一个命名空间：[http ://test.my-app.appspot.com](http://test.my-app.appspot.com)

但由于某种原因，它没有选择命名空间。有人知道可能出了什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T00:12:56.957

那是一个子域，而不是命名空间。如果您希望每个子域对应一个命名空间，则需要自己配置，方法是根据域名为每个请求设置命名空间。

你的第二个片段永远不会做任何事情 - 它总是将命名空间设置为它已经是什么。

# apache - 审查委员会差异未上传

> ID：11345357
> 
> 赞同：2
> 
> 时间：2012-07-05T13:29:22.420
> 
> 标签：apache, unix, svn, review-board

我目前正在尝试使用审查委员会进行差异，但不断收到一条模棱两可的错误消息：

```
Error uploading diff
Your review request still exists, but the diff is not attached. 
```

调试消息也没有给出太多，没有任何错误......

```
>>> RBTools 0.4.1
>>> Home = /home/tom
>>> HTTP GETting api/
>>> HTTP GETting http://127.0.0.1/api/info/
>>> Using the new web API
Index: /trunk/0.1/scripts/configure-apache.sh
===================================================================
--- /trunk/0.1/scripts/configure-apache.sh  (revision 143)
+++ /trunk/0.1/scripts/configure-apache.sh  (working copy)
@@ -1,5 +1,5 @@
#! /bin/bash
-
+echo hello
cd ..
#SRCHEAD="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
SRCHEAD=$SRC_HEAD 
```

这是我的“.reviewboardrc”文件包含的内容：

```
REVIEWBOARD_URL = "http://127.0.0.1/" 
```

存储库路径是：“https://XXX/svn/infinity/trunk/0.1”

有谁知道我可以从哪里开始解决我看到的这个问题？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T23:16:58.963

您面临的问题可能是**diff 文件中的相对路径与**在 Reviewboard 中配置的存储库路径不相关。

Reviewboard，为了在存储库中找到差异中提到的文件，将像这样连接 URL：

*   在 Reviewboard
    +中配置的 repo 的 URL
*   **可选**- 显示在 [Reviewboard Upload diff 对话框](http://www.reviewboard.org/docs/manual/1.6/users/review-requests/uploading-diffs/)中的 Base 目录- 可以是绝对的/完整的，也可以是相对的（！）
    +
*   修改文件的相对路径，因为它出现在 diff 文件中。

**所有这些都必须相互关联。**

因此，在您的情况下，如果您的存储库配置的 URL 是：
`https://XXX/svn/infinity/trunk/0.1`
并且您在 diff 文件中的相对路径是：
`/trunk/0.1/scripts/configure-apache.sh`
...这将不起作用，因为在 repo 中生成的文件的绝对路径将不正确：
`https://XXX/svn/infinity/trunk/0.1/trunk/0.1/scripts/configure-apache.sh`

**可能的解决方案是：**
您的 SVN URL 应该在 Reviewboard 中像这样配置：
`https://XXX/svn/infinity`
**或者**
diff 应该在文件夹层次结构的较低级别创建 - 在这种情况下，它应该在`../0.1/`级别完成，以便 diff 文件中的路径导致`/scripts/configure-apache.sh`

！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T16:08:30.273

一种解决方法是执行手动 svn diff 并保存到文件中，然后将工作副本与 web ui 中的主干进行比较

# python - Fabric 本地 zsh 别名

> ID：11345359
> 
> 赞同：1
> 
> 时间：2012-07-05T13:29:32.043
> 
> 标签：python, emacs, zsh, fabric

要提交所有跟踪的更改，在我的 fabfile 中我有：

```
local("git commit -a") 
```

在我的 .zshenv 中，我有：

```
alias emacs="emacs -nw"
export EDITOR=emacs 
```

但是，当我调用 fabfile 函数时，它仍然会生成 Emacs 的 GUI 版本（这似乎不适用于终端）。我缺少什么让 Fabric 和 Git 使用我的 Emacs 别名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:37:41.450

链中有太多元素：织物、外壳等。在这些情况下，别名可能无效。你为什么不简单地发出这个命令

```
git config core.editor "emacs -nw" 
```

# matlab - 在matlab中求解两个耦合二阶微分方程的错误

> ID：11345360
> 
> 赞同：2
> 
> 时间：2012-07-05T13:29:36.930
> 
> 标签：matlab, physics, differential-equations

我正在尝试在 matlab 上求解以下微分方程。（它们是从 yang-mills-higgs 拉格朗日方程中获得的 hoofy polyakov 单极子 ansatz 的方程）。这是我的函数文件。我有两个变量 h 和 k 以及它们对变量 t 的导数。我的 x(1)=h，x(2)=k，x(3)=dh\dt，x(4)=dk\dt。所有函数的初始值为 0。

```
 function xprime = monopole( t,x )
    %UNTITLED Summary of this function goes here
    %   Detailed explanation goes here

    xprime(1)=x(3);
    xprime(2)=x(4);
    xprime(4)=(1/(t.^2)).*((x(2).^2)-1).*x(2) + 4.*(x(1).^2).*x(2);
    xprime(3)=(2/(t.^2)).*(x(2).^2).*x(1)-(1-(x(1)).^2).*x(1)-(2/t).*x(3);
    xprime=xprime(:);

end 
```

现在，当我运行以下代码 >

```
> t0=0;
    >> tf=10;
    >> x0=[0 0 0 0];
    >> [t,s]=ode45(@monopole,[t0,tf],x0);
    >> plot(t,s(:,1)); 
```

我什么也得不到。图形窗口出现，但它不包含任何内容。这个方程应该有解。虚线是应该得到的曲线，从 1 开始是 k，从 0 开始是 h。

![在此处输入图像描述](../Images/5f8914be474bd9b0ecc26fc2e3a01169.png)

我的错误是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T19:11:53.187

发生这种情况时，您应该做的第一件事是查看 t 和 s 向量中的值。在这种情况下 s(1,1) 包含 0，并且 s(:,2:end) 都是 NaN。因此，情节上没有任何内容。

至于为什么会发生这种情况，一些想法

1.  你确定你的定义`monopole`是正确的吗？
2.  为什么要显示 k(0) = 1 的图，但将初始条件 k=0 传递给它？
3.  为什么你使用 h^prime(0) = 0 初始条件，但在图中看起来 h^prime(0) 具有非零斜率？
4.  带有 1./t^2 的术语看起来很可疑；想一想，在第一步你将 0 除以 0，因此是 NaN。也许 ode 求解器在这方面遇到了困难，而另一个求解器会更好地工作（注意：我对 ODE 求解器的经验很少，所以请多加注意）。

最后，为了确保您真正了解如何使用 ODE 求解器，为什么不从一个非常简单的 ODE 开始，您知道确切的答案（即谐波振荡器）。

# email - 现在我已将 DKIM 添加到 DNS，是否需要签署所有电子邮件？

> ID：11345362
> 
> 赞同：0
> 
> 时间：2012-07-05T13:29:39.643
> 
> 标签：email, dns, dkim

我已将 DKIM 添加到我的域 DNS 之一。

现在是否所有外发电子邮件都需要签名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:43:52.693

如果您已向 DNS 添加了一条显示“全部”或“可丢弃”的 DKIM [ADSP](http://en.wikipedia.org/wiki/Author_Domain_Signing_Practices)记录，那么您需要确保所有外发邮件都已签名。

如果您没有 ADSP 记录，或者您的 ADSP 记录显示“未知”，则没有必要……但签名的电子邮件可能比未签名的电子邮件更适合垃圾邮件检查软件。

# c# - 从控制台应用程序打印调试信息的 Console.Writeline() 替代方案？

> ID：11345366
> 
> 赞同：1
> 
> 时间：2012-07-05T13:29:52.167
> 
> 标签：c#, .net, debugging, testing, console-application

我有一个 C# 控制台应用程序。它正在从多个数据源收集信息并将它们集中在另一个数据源中。有时，它会遇到一些错误——连接字符串停止工作；架构更改等

目前，我只是简单地使用打印出调试信息`Console.WriteLine();`——这显然是一个糟糕的主意……尤其是因为该应用程序是每晚运行的计划任务，所以无论如何我都看不到这个调试信息！

当程序失败时，我应该怎么做才能进行简单的调试？在这种情况下，我的最佳做法是什么？

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T13:31:35.587

您可以使用日志库。 [log4net](http://logging.apache.org/log4net/)似乎是最受欢迎的选择。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T13:31:43.363

使用`Debug.WriteLine()`. 它将打印到分配的侦听器（默认只有您的 Visual Studio 输出窗口，但您可以将其连接到控制台）。如果这是为了解决生产问题，我强烈建议在您的应用程序中实现日志记录。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-05T13:31:51.607

查看[System.Diagnostics](http://msdn.microsoft.com/en-us/library/system.diagnostics.aspx)。 对于初学者来说， [Debug 类](http://msdn.microsoft.com/en-us/library/system.diagnostics.debug)是比 , 更好的选择。`Console`

`log4net`（由@Tim S. 链接）是用于一般诊断输出的有用框架，具有不同的严重程度。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-05T13:31:58.717

您应该阅读不同的[日志记录/错误策略](https://stackoverflow.com/questions/566358/error-handling-logging-strategy)。

我建议您从使用[log4net](http://logging.apache.org/log4net/)之类的库开始，您可以在其中定义您想要的日志格式。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-05T13:33:22.303

我建议使用`EventLog`该类写入应用程序事件日志（或您自己的自定义日志）。您也可以写入自己选择的自定义日志文件。然而，事件日志的优点是可以轻松地从任何机器远程查看。此外，如果此应用程序真正无人看管，您可以让它在失败时向系统管理员发送电子邮件通知。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-05T13:34:16.567

您需要一个日志框架，例如[log4net](http://logging.apache.org/log4net/)或[Enterprise Library Logging Block](http://entlib.codeplex.com/)。这些框架将允许您记录到数据库、日志文件或事件日志以供以后查看和检索。

# javascript - JavaScript 的严格模式是如何实现的

> ID：11345367
> 
> 赞同：0
> 
> 时间：2012-07-05T13:29:59.780
> 
> 标签：javascript, recursion, strict

***更新：***

也许函数被调用的方式是罪魁祸首，所以这里是它：

> 2 个 JS 文件
>   Main.js：自调用（非严格）函数，为“(on)load”事件添加事件侦听器。
> 回调调用加载器函数，该函数解析 location.pathname，并调用 init 函数，并分离/删除“(on)load”侦听器并返回 null（显式）。
> 
>   PageSpecific.js：包含 _init 函数，在正文中添加了几个事件侦听器。
> 这些侦听器之一的回调（也从闭包返回）调用使用 argument.callee 作为递归引用的严格函数。
> 返回事件处理程序的闭包可能 - 取决于浏览器 - 或者可能不绑定和取消绑定其他事件，但我认为这无关紧要，因为这是模仿 IE <9 中的 onchange 事件

我希望这是相当清楚的，所以它：
anon。F => eventlistener
             => 处理程序（命名但在匿名 F 中声明） => pageloader =>
                  init =>
                  *闭包返回的 eventListener 绑定函数*
                      =>**调用严格函数**

顺便说一句：这是我实际使用的被调用[函数](https://stackoverflow.com/questions/11331203/javascript-how-to-simulate-change-event-in-internet-explorer-delegation)[的精简版本。`_init`](https://stackoverflow.com/questions/11331203/javascript-how-to-simulate-change-event-in-internet-explorer-delegation)更具体地说：将事件侦听器和 - 处理程序绑定在一起的闭包。这是我的另一个冗长的问题，似乎没有人知道答案......*提示*;-)

* * *

我正在调试一些相当大（和复杂）的 JavaScript。在这样做时，我注意到我有一个函数，使用严格模式可以正常工作，但如果我没记错的话，应该抛出错误。由于脚本相当庞大和复杂（事件委托、堆叠闭包等），这里有一个简单的例子：

```
function withCalleeRecursion(foo)
{
    'use strict';//strict throws typeError on arguments.callee
    foo = foo.replace(/(a|b)+/gi, function (p1,p2)
    {
        if (p1.match(/(a|b){2,}/i))
        {
            return p1.replace(/(a|b)/gi,arguments.callee);//no errors
        }
        return (p2.match(/a/i) ? 'X':'Y');
    });
    return foo;
}

(function()
{//not strict
    alert(withCalleeRecursion('Abba makes me barf'));
})(); 
```

在我的实际脚本中，这工作得很好。但是，当我将其粘贴到 Firebug 和 chrome 控制台中时，会引发错误。[我在这里](http://ie.microsoft.com/testdrive/HTML5/TryStrict/Default.html)试过这段代码，所以 IE 也应该抛出错误，但是当我在 IE 的调试器中运行代码时，它工作得很好。据我所知，更改文档类型（尝试过 html5 和 html4）没有任何区别。

我认为（大多数）浏览器对`'use strict';`指令的要求并不像它的名字所暗示的那样严格吗？当解析脚本时检测到可能的错误时，浏览器似乎选择忽略它。这是真的？

* * *

同时，出于谨慎起见，我对功能做了些微改动。由于我在这里看到很多人想知道如何以`callee`严格模式获取参考，因此我也将其粘贴在这里：

```
function withCalleeRecursion(foo)
{
    'use strict';
    foo = foo.replace(/(a|b)+/gi, function abR(p1,p2)
    {
        if (p1.match(/(a|b){2,}/i))
        {
            return p1.replace(/(a|b)/gi,abR);
        }
        return (p2.match(/a/i) ? 'X':'Y');
    });
    return foo;
} 
```

命名回调，仅此而已。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T13:48:05.573

这可能是因为浏览器控制台使用`eval()`，这会改变一些事情。尽管将`"use strict";`传递给的代码字符串放在开头`eval()`可以按预期工作，但控制台实现可能会将代码添加到您在控制台中键入的字符串的前面，这意味着它`"use strict";`不再是执行的第一条语句，因此会被忽略。

在以下文章中有对此的参考和建议的解决方法：

[http://javascriptweblog.wordpress.com/2011/05/03/javascript-strict-mode/](http://javascriptweblog.wordpress.com/2011/05/03/javascript-strict-mode/)

建议的解决方法是将控制台中的代码包装在一个立即执行的函数中：

```
(function() {
    "use strict";
    nonExistentVariable = 1; // Error is now thrown
})(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T13:36:11.663

也许[这篇](http://ejohn.org/blog/ecmascript-5-strict-mode-json-and-more/)文章可以帮助您了解更多。无论如何，解决方案是您提到的那个，错误是因为访问 arguments.caller 和 arguments.callee 在严格模式下抛出异常。因此，您要引用的任何匿名函数都需要命名。

# google-tv - 拦截搜索按钮按下

> ID：11345369
> 
> 赞同：1
> 
> 时间：2012-07-05T13:30:05.083
> 
> 标签：google-tv

在我的应用程序中，我想在按下搜索按钮时进行拦截，并在我们的应用程序中显示一个提供搜索功能的片段。

我试图覆盖 Activity.onKeyDown、Activity.dispatchKeyEvent、Activity.onKeyUp Activity.onSearchRequested，并在活动中的所有视图上设置适当的侦听器。

但是，当按下搜索按钮时，这些方法都不会被调用，并且会显示标准的 GoogleTV 搜索框。

拦截搜索按钮的正确方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T08:29:47.937

不幸的是，对于 Google TV，您无法截获 Search Key。用户测试说这是一个问题，所以搜索总是全局的。您的布局上应该有一个搜索图标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T22:18:17.350

根据您的建议，不禁想知道您的用户是否使用在其布局中其他位置具有搜索图标的应用程序进行了测试。:-/ 这不是一个愉快的用户体验，相信我。默认的 Google TV 音乐播放器中的当前搜索方案也不是。

测试了多少用户，重新测试的前景如何？

# debugging - 如何在 ARM 处理器上设置软件断点？

> ID：11345371
> 
> 赞同：21
> 
> 时间：2012-07-05T13:30:10.997
> 
> 标签：debugging, assembly, gdb, arm

如何执行相当于 x86 软件中断的操作：

```
asm( "int $3" ) 
```

在 ARM 处理器（特别是 Cortex A8）上生成会中断 gdb 下执行的事件？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2014-03-13T23:23:34.900

使用 arm-none-eabi-gdb.exe 交叉编译器，这对我很有用（感谢 Igor 的回答）：

```
__asm__("BKPT"); 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-07-05T13:55:40.107

ARM 没有定义特定的断点指令。在不同的操作系统中可能会有所不同。在 ARM Linux 上，它通常是`FE DE FF E7`ARM 模式下的 UND 操作码（例如 ）和 Thumb 中的 BKPT ( `BE BE`)。

使用 GCC 编译器，您通常可以使用`__builtin_trap()`内部函数来生成特定于平台的断点。另一种选择是`raise(SIGTRAP)`。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-07-07T10:28:17.920

我有一个简单的库（[scottt/debugbreak](https://github.com/scottt/debugbreak)）就是为了这个：

```
#include <debugbreak.h>
...
debug_break(); 
```

只需将单个标头复制`debugbreak.h`到您的代码中，它就会正确处理 ARM、AArch64、i386、x86-64 甚至 MSVC。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-07-29T08:27:26.373

`__asm__ __volatile__ ("bkpt #0");`

请参阅[BKPT](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0552a/BABHCHGB.html)人条目。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-09-23T08:36:13.757

对于 ARM 上的 Windows `__debugbreak()`，使用未定义操作码的内在函数仍然有效。

```
nt!DbgBreakPointWithStatus:
defe     __debugbreak 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-08-23T12:52:22.323

在我的 armv7hl（带有 linux 4.1.15 的 i.MX6q）系统上，要在另一个进程中设置断点，我使用：

ptrace（PTRACE_POKETEXT，pid，地址，0xe7f001f0）

我在 strace'ing gdb 之后选择该值 :)

这很完美：我可以检查跟踪的进程，恢复原始指令，并使用 PTRACE_CONT 重新启动进程。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-03-04T20:24:27.233

尽管最初的问题是关于 ARMv7-A 的 Cortex-A7，但在 ARMv8 GDB 上使用

> *刹车 #0*

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-03-30T09:40:52.917

我们可以使用断点 inst：

*   对于 A32：使用 [BRK #imm](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0802a/BRK.html)指令

*   对于手臂和拇指：使用[BKPT #imme](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0489c/Cihbiggi.html)指令。

或者我们可以使用[UND](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0489e/CIHJIJCA.html)伪指令生成未定义的指令，如果处理器尝试执行它会导致异常。

# c - 防止访问给定工作目录之外的文件

> ID：11345374
> 
> 赞同：2
> 
> 时间：2012-07-05T13:30:15.953
> 
> 标签：c

我试图阻止对给定工作目录之外的文件的访问。
我的第一次尝试是使用`chdir`and `chroot`，但`chroot`只能由 root 用户使用。

还有其他可能吗？我听说过另一个人，但我不记得了。

也许是一个简单的函数来检查路径是否在工作目录或第二个参数之外。

关于程序的一些细节：

*   应在 Linux 上运行
*   没有任何交互元素的简单 shell 程序
*   接受一个目录参数，即工作目录

感谢您的任何建议。

编辑：
经过一些研究，我发现了不同的方法，但我不能使用它们中的任何一个。

*   枢轴根
*   set_fs_root（Linux内核）

有没有可能使用它？

也许有可能打开给定目录中包含的文件。所以我用参数文件路径和“根”路径来调用函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T14:01:43.453

您可能想查看受限外壳；我认为大多数常见的 shell 都有限制模式的选项，即禁用`cd`、阻止对某些环境变量的更改以及其他一些事情。因为`pdksh`，它会`/bin/ksh -r`。但是，对于其他 shell，该选项会有所不同，因此请阅读相应的`man`ual 页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T13:43:34.093

我假设您使用的是 Linux/MacOSX 平台。有几种方法。一种是为您的程序创建一个特殊用户，该用户拥有该目录，但对系统中的任何其他内容没有写入权限*。另一种选择是使用像 SELinux 这样的程序，只允许对程序进行某些操作，但这似乎有点矫枉过正。

*：您必须*始终*授予用户读取权限。如果没有读取权限，您的程序将如何运行`glibc`？

# python - 我的程序如何返回到循环的第一个命令？

> ID：11345377
> 
> 赞同：0
> 
> 时间：2012-07-05T13:30:34.400
> 
> 标签：python, loops

如果没有工作要做，我的循环如何分支回寻找输入？

我正在制作一个基本上要求 3 或 4`raw_input`行的脚本，然后根据这些进行一些工作，然后无限循环。但是，这些`raw_input`行是选择（我正在寻找它们来键入几个语句之一）。我认为简单地做这样的事情可能更容易和更清洁，而不是一堆布尔值和 while 循环来确保它是一个可接受的语句：

```
if theInput != 'Acceptable Statement' and theInput != 'Another acceptable statement':
    restartLoop()
if theSecondInput != 'Acceptable Statement' and theInput != 'Another acceptable statement':
    restartLoop() 
```

依此类推，对于我需要的每一个输入。它将中止当前循环并重新启动另一个循环，就好像它已经完成了一样。由于在收集和批准所有数据之前实际上没有任何事情发生，因此这*不会*导致任何问题。我意识到这是另一种选择：

```
if theInput == 'Acceptable Statement' or theInput == 'Another acceptable statement':
    if theSecondInput == 'Acceptable Statement' or theInput == 'Another acceptable statement':
        doThings()
    else:
        doNothing()
else:
    doNothing() 
```

但是，我希望它在用户输入错误后结束循环，而不是问他们 5 个问题并最终告诉他们他们弄错了 #2。

编辑：为了更清楚一点，我仍然想无限循环（除了离开外壳会离开循环），我只想重新启动循环而不完成。IE，在制作许多产品时，您会陷入几个步骤的循环中。但是，如果你错误地执行了一个步骤，你就会扔掉有缺陷的产品并重新开始，而没有完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:33:51.230

嵌套`if`s 可以正常工作，你也可以让它们更整洁：

```
if theInput == 'Acceptable Statement' or theInput == 'Another acceptable statement':
    if theSecondInput == 'Acceptable Statement' or theInput == 'Another acceptable statement':
        doThings()
        break 
```

但`continue`会做你需要的。我只是觉得上面的好看:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T13:37:05.233

您可以使用[`continue`](http://docs.python.org/reference/simple_stmts.html#continue)and[`break`](http://docs.python.org/reference/simple_stmts.html#break)来控制循环的流程。

```
while True:
   //getInput
   if theInput != AcceptableInput:
      print "Input 1 is wrong."
      continue

   //getInput
   if theInput != AcceptableInput:
      print "Input 2 is wrong."
      continue

   //getInput
   if theInput != AcceptableInput:
      print "Input 3 is wrong."
      continue

   //getInput
   if theInput != AcceptableInput:
      print "Input 4 is wrong."
      continue

   //getInput
   if theInput != AcceptableInput:
      print "Input 5 is wrong."
      continue

   break 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T13:38:00.030

以下内容肯定足以满足您的需求（请注意，除了`next`字符串之外，所有对象都是由组成的）。

```
print "Instructions"
while True:
    userresponse = get_some_input()
    if isAcceptable(userresponse):
       store(userresponse)
       print "Good job"
       print next(prompts)
    else:
       print "Awful job" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T13:54:49.727

在循环中使用`continue`可以完成我想要的。它完美地工作！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-05T14:16:55.463

您需要第二个循环并打破内部循环。像这样的东西：

```
while True:
  while True:
    # do some fancy stuff
    if (fancy stuff is uncool):
      break
  print "restart" 
```

**编辑**：为您澄清这一点：您`restartLoop()`将是`break`. 并替换 if 语句的条件；）

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-05T13:43:27.070

如果您有某种终止声明（“quit”或“q”），我会建议类似于以下内容：

```
while( input != "q" || "quit")
     if statement == "acceptable statement"
          doStuff()
     if statement != "acceptable statement"
          //output error
          input = "q" //this will terminate the loop 
```

你甚至可以有一个私有的工作方法来检查输入和可接受的语句。然后你可以让你的“ifs”来处理输入。似乎您可能希望在问题的哪个阶段存储您期望的答案。例如...

**1 级** 问题：敲敲 预期反应：“谁在那儿？”、“我讨厌笑话。”、“什么？”

**2级** 问题：嘘！预期响应：“嘘谁？”、“停止”

**3级** 问题：噢，别哭！预期回复：“哈哈”、“不好笑”

# c# - 在 C# 中将对象转换为 JSON 字符串

> ID：11345382
> 
> 赞同：50
> 
> 时间：2012-07-05T13:30:47.770
> 
> 标签：c#, json

> **可能重复：**
> [在 .NET 4 中将 C# 对象转换为 JSON 字符串](https://stackoverflow.com/questions/6201529/turn-c-sharp-object-into-a-json-string-in-net-4)

在 Java 中，我有一个将 java 对象转换为 JSON 字符串的代码。如何在 C# 中做类似的事情？我应该使用哪个 JSON 库？

谢谢。

JAVA代码

```
import net.sf.json.JSONArray;
import net.sf.json.JSONObject;

public class ReturnData {
    int total;

    List<ExceptionReport> exceptionReportList;  

    public String getJSon(){
        JSONObject json = new JSONObject(); 

        json.put("totalCount", total);

        JSONArray jsonArray = new JSONArray();
        for(ExceptionReport report : exceptionReportList){
            JSONObject jsonTmp = new JSONObject();
            jsonTmp.put("reportId", report.getReportId());      
            jsonTmp.put("message", report.getMessage());            
            jsonArray.add(jsonTmp);         
        }

        json.put("reports", jsonArray);
        return json.toString();
    }
    ...
} 
```

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2012-07-05T13:35:37.733

我使用过[Newtonsoft JSON.NET](http://json.codeplex.com/)（[文档](http://james.newtonking.com/projects/json/help/)），它允许您创建类/对象、填充字段并序列化为 JSON。

```
public class ReturnData 
{
    public int totalCount { get; set; }
    public List<ExceptionReport> reports { get; set; }  
}

public class ExceptionReport
{
    public int reportId { get; set; }
    public string message { get; set; }  
}

string json = JsonConvert.SerializeObject(myReturnData); 
```

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2012-07-05T13:33:18.190

使用 .net 内置类[JavaScriptSerializer](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)

```
 JavaScriptSerializer js = new JavaScriptSerializer();
  string json = js.Serialize(obj); 
```

# c++ - ICU：创建不区分大小写的排序规则

> ID：11345384
> 
> 赞同：0
> 
> 时间：2012-07-05T13:31:02.263
> 
> 标签：c++, sqlite, icu

我正在创建 SQLite3 的自定义构建，并且我想实现不区分大小写的文本列。

是否可以创建不区分大小写的排序规则？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T20:06:03.970

你可能想 用或重量来调用[ucol_setStrength 。](http://icu-project.org/apiref/icu4c/ucol_8h.html#adcbb3eee538142a06a89e066400dd9b7)试试[这个演示](http://demo.icu-project.org/icu-bin/locexp?_=lt&d_=en&x=col&str=x "Collation demo")`UCOL_PRIMARY``UCOL_SECONDARY`

# java - jsp 查看日志文件（如“web tail -f”）

> ID：11345387
> 
> 赞同：7
> 
> 时间：2012-07-05T13:31:21.197
> 
> 标签：java, ajax, jsp, log4j

您将如何实现一个包含文本区域的 jsp 站点，该文本区域显示（tomcat）服务器上的日志文件并自动刷新。

我认为刷新很容易使用 setTimeout 轮询服务器并发送 ajax 请求。但问题是如何监视服务器上的文件（它是一个 Log4J 日志文件——也许我可以使用自己的附加程序？）以进行更改并在 ajax 请求到达时仅发送更改的行？

我不知道如何检测日志中更改的行...

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-05T13:39:29.870

[ajax](/questions/tagged/ajax "显示标记为“ajax”的问题")并每隔几秒轮询一次服务器是个好主意，但是使用[comet](/questions/tagged/comet "显示标记为“彗星”的问题") / [server-push](/questions/tagged/server-push "显示标记为“服务器推送”的问题") / [websocket](/questions/tagged/websocket "显示标记为“websocket”的问题")会更有效，而且您不会遇到任何延迟。

关于服务器端，您有几个选择：

*   每次用户请求新数据时打开文件，转到末尾并发送最后几行。您需要以某种方式指出上次发送的行数据，以避免多次发送相同的行或丢失其中一些行。使用 AJAX 调用的时间戳参数来表示：*在...之后给我所有日志行*

    这个方案非常无效，会产生大量的I/O流量

*   为每个客户端保持打开的流到日志文件，当客户端要求换行时，尽可能多地阅读（当然不要阻塞）。

    好多了，但不能很好地扩展（*打开的文件太多*，我来了）

*   编写自定义[log4j](/questions/tagged/log4j "显示标记为“log4j”的问题") appender 并将最近的日志保存在内存中。当客户询问时，只需转储此缓冲区的内容（适用于时间戳的相同限制）

    非常健壮，但要注意内存使用！

*   最后考虑使用现成的[工具，如 psi-probe](https://code.google.com/p/psi-probe/)提供开箱即用的此功能：

    [psi-probe http://psi-probe.googlecode.com/svn/wiki/Features/log-tail.png](http://psi-probe.googlecode.com/svn/wiki/Features/log-tail.png)

# 也可以看看：

*   [可以将任意文件的内容流式传输到浏览器的 Java Web 应用程序（live tail）](https://stackoverflow.com/questions/5803776)
*   [浏览器中的tail -f](https://stackoverflow.com/questions/2836838)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-03T21:39:33.587

没有尾巴/ajax，但有这个

[jsp文件浏览器](http://www.vonloesch.de/filebrowser.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T13:39:44.283

有一个标签库：[http ://www.servletsuite.com/servlets/tailtag.htm](http://www.servletsuite.com/servlets/tailtag.htm)

将jar放在WEB-INF/lib中，tld放在WEB-INF/tags中，就可以使用了：

```
<%@ taglib uri="taglib.tld" prefix="t" %> 

<!-- read last 50 rows and print them --> 
<t:tail file="c:/webserver/log.txt" count="50" id="S"> 
  <br><%=S%> 
</t:tail> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T13:46:42.343

线程中提到了我不知道的非常好的解决方案，这是我在[google-stail中找到的另一个解决方案](http://code.google.com/p/stail/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-20T15:39:55.447

Jakarta Common IO library 提供的 Tailer 可能会有所帮助。Tailer 可以充当生产者，GUI 轮询可以充当消费者。

[http://alvinalexander.com/java/jwarehouse/commons-io-2.0/src/test/java/org/apache/commons/io/input/TailerTest.java.shtml](http://alvinalexander.com/java/jwarehouse/commons-io-2.0/src/test/java/org/apache/commons/io/input/TailerTest.java.shtml)

# windows - 获取异常 org.apache.hadoop.ipc.Server: IPC Server handler 0 on 9100: 从 0.20.2 版本的 hadoop 开始

> ID：11345392
> 
> 赞同：2
> 
> 时间：2012-07-05T13:31:38.797
> 
> 标签：windows, hadoop, cygwin

设置 HDFS 环境时出现异常（在 windows7 上使用 cygwin）。我能够访问 1\. NameNode - {http://localhost:50070/} 和 2.JobTracker - {http://localhost:50030/} 但我遇到了异常：

调用 localhost/127.0.0.1:9000 连接异常失败：java.net.ConnectException 并且还得到

2012-07-05 18:43:34,726 INFO org.apache.hadoop.ipc.Server：9100 上的 IPC 服务器处理程序 1，从 127.0 调用 addBlock(/home/hadoop/tmp/mapred/system/jobtracker.info, DFSClient_1001718281) .0.1:51303：错误：java.io.IOException：文件/home/hadoop/tmp/mapred/system/jobtracker.info只能复制到0个节点，而不是1个java.io.IOException：文件/home/hadoop /tmp/mapred/system/jobtracker.info 只能复制到 0 个节点，而不是 1)

请帮我解决问题。

hdfs-site.xml

```
<configuration>
  <property>                           
    <name>dfs.replication</name>
    <value>1</value>
  </property>

</configuration> 
```

mapredsite.xml

```
<configuration>
  <property>
    <name>mapred.job.tracker</name>
                 <value>localhost:9001</value>
             </property>
        </configuration> 
```

核心站点.xml

```
<configuration>
<property> 
<name>hadoop.tmp.dir</name> 
<!--<value>/home/hadoop/tmp</value> -->
<value>/cygwin/home/syadav</value>
</property>
 <property>
 <name>fs.default.name</name>
 <value>hdfs://localhost:9000</value>
 </property>
 <property> 
 <name>mapred.map.tasks</name>
<value>1</value>
<description>define ma p red.map tasks to be number of slave hosts</description>
</property>
<property>
<name>mapred.reduce.tasks</name>
<value>1</value>
<description>define ma p red.red uce tasks to be number of slave hosts</description>
</property>
<property>
<name>dfs.replication</name>
<value>1</value>
</property>

</configuration> 
```

让我知道您正在寻找的其他详细信息。我已经告诉了我在日志中遇到的错误。

# javascript - 当本机键盘在移动设备上可见时禁用滚动

> ID：11345400
> 
> 赞同：0
> 
> 时间：2012-07-05T13:32:02.973
> 
> 标签：javascript, iphone, html, css, keyboard

当用户单击输入字段或选择框并且本机 iphone 键盘变得可见时，我的布局会中断。我认为如果您可以在本机键盘可见时禁用滚动，这可能是一个好主意。javascript可以实现吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T05:13:56.223

您可以通过注册接收通知来实现`UIKeyboardDidShowNotification`这`UIKeyboardDidHideNotification`一点`viewDidLoad`

```
[[NSNotificationCenter defaultCenter] addObserver: self 
                                         selector: @selector(keyboardWasShown)
                                             name: UIKeyboardDidShowNotification
                                           object: nil];

[[NSNotificationCenter defaultCenter] addObserver: self
                                         selector: @selector(keyboardWasHidden)
                                             name: UIKeyboardDidHideNotification 
                                           object: nil]; 
```

并实现如下选择器

当键盘即将显示时，您将在此接到电话

```
- (void) keyboardWasShown
{
   // Code to disable the scrolling of your scrollview
} 
```

当键盘即将隐藏时，您会在这里接到电话

```
- (void) keyboardWasHidden
{
    // Code to enable the scrolling of your scrollview
} 
```

很高兴我能看到这对您有所帮助。愉快的一天。

# java - 每个套接字的ChannelFactory？

> ID：11345401
> 
> 赞同：0
> 
> 时间：2012-07-05T13:32:04.523
> 
> 标签：java, netty

从多个套接字侦听传入的 UDP 数据报时`ChannelFactory`，`ConnectionlessBootstrap`应该使用多少个？只有一个？每个插座一个？

我确切地说管道的解码处理程序每​​个套接字都不同。我希望从一个端口接收 SIP 消息，而我希望从另一个端口接收 DNS 消息。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:50:30.290

每个端口一个 NioDatagramChannelFactory 你也想监听

# datetime - 来自日期时间的python日期

> ID：11345402
> 
> 赞同：0
> 
> 时间：2012-07-05T13:32:04.647
> 
> 标签：datetime, date, python-2.7, jinja2

如何从日期时间值中获取日期部分以显示在 html 模板中。

[此链接显示了我想要的 lambda，但我不知道如何使用 lambda 将值分配给变量](https://developers.google.com/appengine/docs/python/tools/uploadingdata)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T01:09:06.963

```
d= datetime.datetime.now()
print d.strftime("%A %B %d, %Y") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T06:53:28.533

由于 appengine 使用日期时间对象，您可以使用从中提取日期对象`datetime.date()`

[http://docs.python.org/library/datetime.html#datetime.datetime.date](http://docs.python.org/library/datetime.html#datetime.datetime.date)

然后你可以使用`date.__str__()`or`date.strftime()`来构造你需要的字符串。

[http://docs.python.org/library/datetime.html#datetime.date.strftime](http://docs.python.org/library/datetime.html#datetime.date.strftime)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T14:08:31.630

这实际上是 jinja2 文档中的一个示例；您可以创建自定义格式化程序，然后将日期时间传递给您的模板并使用格式化程序仅显示日期：[http](http://jinja.pocoo.org/docs/api/#custom-filters) ://jinja.pocoo.org/docs/api/#custom-filters – Wooble 22 小时前

我正在添加 Wooble 的评论作为答案。

# javascript - 如何使用空白选项和未过滤状态创建动态选择字段

> ID：11345404
> 
> 赞同：1
> 
> 时间：2012-07-05T13:32:07.373
> 
> 标签：javascript, ruby-on-rails

我需要在 Rails 3.2 中创建一个动态选择字段，其中第二个字段（州）中可用的选项取决于第一个（国家）的值。我参考了这个 Railscast 的修订版，并且正在使用以下代码：

```
jQuery ->
  $('#person_state_id').parent().hide()
  states = $('#person_state_id').html()
  $('#person_country_id').change ->
    country = $('#person_country_id :selected').text()
    escaped_country = country.replace(/([ #;&,.+*~\':"!^$[\]()=>|\/@])/g, '\\$1')
    options = $(states).filter("optgroup[label='#{escaped_country}']").html()
    if options
      $('#person_state_id').html(options)
      $('#person_state_id').parent().show()
    else
      $('#person_state_id').empty()
      $('#person_state_id').parent().hide() 
```

我需要对这段代码进行两处更改，我认为对于那些拥有比我更强的 javascript 技能的人来说，这应该是非常简单的。

1.  在过滤列表中，我需要包含一个空白选项。当前选择国家会导致选择文件列表中的第一个州。我需要离开提示“请选择”。我怎样才能做到这一点？

**编辑**

SMathew 的建议在这里有所帮助。我正在使用`$('#person_state_id').html(options).prepend('<option></option>')`which 与 html 标记上的提示属性一起获得所需的结果。

1.  如果没有选择国家（即`else`声明）`person_state_id`，则应包含所有州的完整、未经过滤的列表。我试过了：

    `else $('#person_state_id').html(states)`

但这并不像预期的那样表现。我有这些问题。

1.  如果我选择一个具有相关州记录的国家/地区，则 #person_state_id 选项会被正确过滤（并且使用 smathews 建议，会包含一个提示）。

2.  如果我选择一个没有关联州记录的国家/地区，#person_state_id 包含所有州，标记中的一个空白选项，但默认选择第一个州选项。（它应该是空的，默认选择一个空白选项并显示一个提示）。

3.  如果我清除#person_country_id 中的选择，#person_state_id 包含所有状态的未过滤列表（正确）和标记中的空选项（正确），但默认选择第一个状态记录（应该是提示）。

我该如何解决这些问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T23:05:15.763

尝试

```
...

if (options) {
  $('#person_state_id').html(options).prepend('<option>Please select</option>').parent().show()
} else {
   $('#person_state_id').html(states).prepend('<option>Please select a state</option>').parent().show()
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T06:06:39.610

为了解决我的第二个问题，我添加了以下咖啡脚本

```
jQuery ->
  resetCountry = ->
    $('#person_state_id').select2 "val", "0" 
  $('#person_country_id').bind("change", resetCountry); 
```

再加上 smathew 的回答，这似乎奏效了

（我使用 select2 来格式化我的选择字段。如果不使用 select2，您将需要不同的方法来设置值）

# magento - Magento-无法检索产品模型中添加的集合的自定义属性

> ID：11345406
> 
> 赞同：1
> 
> 时间：2012-07-05T13:32:15.643
> 
> 标签：magento, collections

我无法理解 Magento 中集合的完整行为。接下来，我将描述问题：

对于项目的要求，我需要添加一个自定义属性以在 GoogleShopping 的提要中排除多个产品。然后我用php脚本安装添加这个属性

```
<?php
  $installer = $this;
  $installer->startSetup();
  $installer->addAttribute('catalog_product', 'in_googleshopping_feed', array(
    'group'                    => 'General',
    'type'                     => 'int',
    'input'                    => 'select',
    'label'                    => 'In GoogleShoppint feed',
    'global'                   => Mage_Catalog_Model_Resource_Eav_Attribute::SCOPE_GLOBAL,
    'visible'                  => 1,
    'required'                 => 0,
    'default'          => 1,
    'visible_on_front'         => 0,
    'is_html_allowed_on_front' => 0,
    'sort_order'               => 32,
    'is_configurable'          => 0,
    'source'                   => 'eav/entity_attribute_source_boolean',
    'searchable'               => 0,
    'filterable'               => 0,
    'comparable'               => 0,
    'unique'                   => false,
    'user_defined'             => false,
    'is_user_defined'          => false,
    'used_in_product_listing'  => true
  )
  );

  $installer->endSetup(); 
```

接下来在观察者中，我尝试使用以下方法检索此值：

```
$products = Mage::getModel('catalog/product')->getCollection()
        ->addAttributeToSelect('*')
            //->addAttributeToSelect('in_googleshopping_feed');
        ->addAttributeToFilter('in_googleshopping_feed',0); 
```

这是我的疑问，为什么集合没有这个属性？

但是，我可以在下一个片段中检索 Product_Model 的值：

```
$products = Mage::getModel('catalog/product')->getCollection()
            ->addAttributeToSelect('*');
$prodIds=$products->getAllIds();
foreach($prodIds as $productId):
   $product = Mage::getModel('catalog/product')->setStoreId('1');
   $product->load($productId);
   var_dump($product->getData('in_googleshopping_feed'));
endforeach; 
```

然后，我最大的疑问是：为什么我不能按我的新属性过滤集合？我认为使用 addAttributeToSelect('*') 方法可以将所有字段添加到集合中。

有人可以帮助我吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T13:41:28.453

一目了然的是第二个参数`addAttributeToFilter`必须是数组。像这样：

```
addAttributeToFilter('in_googleshopping_feed', array('eq', 0)); 
```

# c - 计算 C 数组的行列式

> ID：11345407
> 
> 赞同：4
> 
> 时间：2012-07-05T13:32:17.050
> 
> 标签：c, math, matrix, linear-algebra

我编写了一个程序，它生成了一些`N x N`我想计算它们的行列式的矩阵。与此相关，我有两个问题

*   哪个图书馆最适合这样做？我想要最快的库，因为我有数百万个这样的矩阵。

*   将结果转换为整数时，我应该注意哪些细节？我将生成的所有矩阵都具有整数行列式，并且我想确保没有舍入错误会扭曲行列式的正确值。

编辑。如果可能，请提供一个计算推荐库的行列式的示例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T13:36:39.383

至于矩阵库，看起来这个问题在这里得到了回答：

[对基于 c 的小型向量和矩阵库的建议](https://stackoverflow.com/questions/198991/recommendations-for-a-small-c-based-vector-and-matrix-library)

至于转换为整数：如果行列式*不是*整数，那么您不应该将其*转换*为整数，您应该使用`round`, `floor`, 或`ceil`以可接受的方式将其转换。这些可能会给你整数值，但你仍然需要转换它们；但是，您现在可以这样做，而不必担心丢失任何信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T13:37:30.727

您可以使用 blas 和 lapack 的矩阵创造奇迹。它们实际上是用 fortran 编写的，从“c”中使用它们是一种调整。但总而言之，他们可以以惊人的速度处理数字。

[http://www.netlib.org/lapack/lug/node11.html](http://www.netlib.org/lapack/lug/node11.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-05T13:45:21.353

您有[GSL](http://www.gnu.org/software/gsl/)，但选择实际上取决于您的矩阵。矩阵是密集的还是稀疏的？N是大还是小？对于较小的 N，您可能会发现自己使用 Cramer 规则或高斯消元编码行列式更快，因为大多数高性能库都专注于大矩阵，并且它们的优化可能会在简单问题上引入开销。

# function - 为什么这个 volatile LastRow 函数不会自动重新计算？

> ID：11345411
> 
> 赞同：1
> 
> 时间：2012-07-05T13:32:22.570
> 
> 标签：function, excel, vba

我决定在 excel 中确定 LastRow 的函数从长远来看可能会为我节省一些时间：

```
Function LastRow() As Long
Application.Volatile

With ActiveSheet.UsedRange
        LastRow = .Rows(.Rows.Count).Row
    End With

End Function 
```

在大多数情况下，这很好，但我注意到，如果实际的最后一个单元格仅被格式化，它不会重新计算输入值时的方式。它会在重新计算时正确，但我认为让这个 volatile 会自动做到这一点。

我误解了什么？

**请注意** ，任何人都在做类似的事情，请注意，当您激活另一张工作表时，将其设为 volatile 并使用 ActiveSheet 会使其不可靠，因为该函数会返回该工作表中的 LastRow 并重新计算。可能不是最好的主意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T13:42:46.933

Volatile 仅在计算单元格时触发：[MSDN](http://msdn.microsoft.com/en-us/library/aa213653%28v=office.11%29.aspx)

有一种作弊方法——这是基于这样一个事实，即要更改单元格，您必须先选择它：

```
Private Sub Worksheet_SelectionChange(ByVal Target As Excel.Range)
    Application.Calculate
End Sub 
```

请注意，这可能会破坏一些基本功能。在[Microsoft KB](http://support.microsoft.com/kb/213193)文章中，他们评论说他们的示例将破坏复制/粘贴的能力

# jquery - 滚动时固定的元素

> ID：11345413
> 
> 赞同：0
> 
> 时间：2012-07-05T13:32:24.367
> 
> 标签：jquery, html, css

我目前正试图让 subnav 在滚动到某个位置时粘住。但是当它到达那个位置时，它下面的所有东西都会向上移动。不能完全弄清楚它是什么。可能很简单，我只是没看到。谢谢您的帮助

CSS

```
#subnav ul{
list-style: none;
}
#subnav a:visited{
color: #000;
text-decoration: none;
}
#subnav a{
color: #000;
text-decoration: none;
}
#subnav.fixed{
position:fixed;
top:0;
}
.main {
-webkit-border-top-right-radius:10px;
-webkit-border-top-left-radius:10px;
-moz-border-radius-topleft:10px;
-moz-border-radius-topright:10px;
border-top-left-radius:10px;
border-top-right-radius:10px;
min-height: 500px;
height: auto;
width: 700px;
-moz-box-shadow:    -1px 1px 1px 1px #ccc;
-webkit-box-shadow: -1px 1px 1px 1px #ccc;
box-shadow:         -1px 1px 1px 1px #ccc;
float: none;
font-family: "Lucida Sans Unicode", "Lucida Grande", sans-serif;
z-index:1000;
    position: relative;
font-size: 12px;
background-color: #FFF;
background-position: left top;
padding-top: 15px;
padding-right: 15px;
padding-bottom: 15px;
padding-left: 15px;
margin-bottom: -200px;
} 
```

HTML

```
<div id="subnav">
        <ul>
            content
        </ul>
    </div>

    <div class="main">
        <div class="imageholder">
            content
        </div>

        <div class="text">
            content
        </div>
    </div>

$(document).ready(function () {  
var top = $('#subnav').offset().top -    parseFloat($('#subnav').css('marginTop').replace(/auto/, 0));
$(window).scroll(function (event) {
// what the y position of the scroll is
var y = $(this).scrollTop();

// whether that's below the form
if (y >= top) {
  // if so, ad the fixed class
  $('#subnav').addClass('fixed');
} else {
  // otherwise remove it
  $('#subnav').removeClass('fixed');
}
});
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T13:49:22.137

其余部分向上移动，因为您将#subnav 从内联流中取出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-17T09:04:48.617

我知道这个问题是 1.5 年前提出的，但无论如何我都会回答，以防它将来可以帮助某人......

我最近在网站上工作时遇到了同样的问题。就像 Daniel 说的那样，它正在跳跃，因为您正在`#subnav`从流程中移除，这就是将位置设置为“固定”的作用。它本质上与您完全移除元素所做的相同`#subnav`：跳起来填补空白。

为了解决这个问题，当滚动到它变得固定的那个点时，我创建了一个具有所有相同尺寸、填充、边距等的新 div，以便在`#subnav`固定时基本上“填充”。您可以通过多种方式执行此操作：创建一个具有不同 ID 的重复隐藏 div，在添加/删除“固定”类时显示/隐藏，或者使用 JS 动态创建一个。无论您的选择是什么，这都可以防止跳跃问题。

例子：

```
$(window).scroll(function (event) {
    var y = $(this).scrollTop();

    if (y >= top) {
      $('#subnav').addClass('fixed')
        .after("<div id='filler'></div>");    // Add the new "filler" div

      // Make the height, width, padding-top, padding-bottom, margin-top, and
      // margin-bottom the same as the #subnav
      $('#filler')
          .css("height", $('#subnav').css("height"))
          .css("width", $('#subnav').css("width"));    // etc

    } else {
      $('#subnav').removeClass('fixed');

      // Remove the filler
      $('#filler').remove();    // Or you can hide and show it again as needed
    }
}); 
```

希望这可以帮助。干杯!

# sql - 不同服务器上的 Linq 或 SQL 连接表

> ID：11345414
> 
> 赞同：0
> 
> 时间：2012-07-05T13:32:32.057
> 
> 标签：sql, linq, linqpad

我刚开始在一家新公司工作，我经常需要查询 8 台不同的服务器（所有 Microsoft SQL 2005 服务器）。目前，我每天早上都单独连接到每台服务器，以读取 [application].[tmpLogs] 表中的最新条目。我必须为每台服务器使用不同的用户名和密码。我想编写一个可以在 LinqPad 中运行的 Linq 或 SQL 查询，以获取每个服务器上 tmpLogs 表中输入的最后一行。有谁知道我如何连接到所有服务器并在一个查询中查询表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T04:53:36.203

每台服务器上的`tmpLogs`表是否具有相同的列？如果是这样，您可以利用 LINQPad 允许您使用不同的连接字符串创建新的类型化 DataContexts 这一事实。

只需连接到您的一个数据库，然后执行以下操作：

```
// Dump the log for the current database:
TmpLogs.OrderByDescending (l => l.Date).First().Dump();

// Dump the logs for other databases:
string[] otherConnectionStrings = 
{
   "server=...database=....etc",
   "server=...database=....etc",
   ...
}

foreach (string cxString in otherConnectionStrings)
{
   var dc = new TypedDataContext (cxString);
   dc.TmpLogs.OrderByDescending (l => l.Date).First().Dump();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T13:39:43.157

您可以选择一台 SQL Server 作为您的“主”服务器。然后将其他服务器设置为 LINKED 服务器（请参阅[http://msdn.microsoft.com/en-us/library/ms188279.aspx](http://msdn.microsoft.com/en-us/library/ms188279.aspx)）。您可以配置 LINQ to SQL 对象以通过“主”服务器连接到 LINKED 服务器。

您也可以将其从 LINQ 中取出并设置计划任务以定期将数据推送到“仓库”表中。通过存储过程与 LINKED 服务器通信比通过 LINQ 更容易。据我所知，LINQ 不包含数据库目录的概念，只有表。目录在 DataContext 对象中抽象出来，如果您使用的是 Linqpad，则该对象不存在。

# mysql - 如何将一行中的所有列复制到除一行之外的新行中？

> ID：11345415
> 
> 赞同：0
> 
> 时间：2012-07-05T13:32:33.503
> 
> 标签：mysql, sql, stored-procedures

我有这个存储过程，它已经工作了一段时间

```
CREATE PROCEDURE `ProjectFromTemplate`(
IN TemplateID INT,
IN NewProjectID INT
)
BEGIN
INSERT INTO Project_Stage
(
  ProjectID,
  StageID,
  StageIndex,
  Time
)
(
SELECT 
  NewProjectID,
  StageID,
  StageIndex,
  Time
  FROM Project_Stage
  WHERE ProjectID = TemplateID
);
END 
```

但是我决定在表中添加另一列，但我没有相应地更新程序。我希望该过程能够处理我添加的任何新行。我需要类似这样的伪 SQL

```
CREATE PROCEDURE `ProjectFromTemplate`(
IN TemplateID INT,
IN NewProjectID INT
)
BEGIN
INSERT INTO Project_Stage
(
  ProjectID,
  *
)
(
SELECT 
  NewProjectID,
  *
  FROM Project_Stage
  WHERE ProjectID = TemplateID
);
END 
```

有没有办法在 MySQL 中表达“所有后续行”之类的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T13:39:57.407

省略列子句`INSERT`以最小化代码更改，但您必须拼出其余列，`Project_Stage`除非它不包含`ProjectID`列。如果没有，那你很好。

请注意：您可能仍需要在更改表后重新编译（我不确定 MySQL 如何处理架构更改和编译过程）。

```
CREATE PROCEDURE `ProjectFromTemplate`(
    IN TemplateID INT,
    IN NewProjectID INT
)
BEGIN
    INSERT INTO Project_Stage    
    SELECT 
        NewProjectID,
        ...
        the rest of the Project_Stage columns you want go here
        ...
        FROM Project_Stage
        WHERE ProjectID = TemplateID
    );
END 
```

# html - CSS 图像未显示 Wordpress

> ID：11345420
> 
> 赞同：2
> 
> 时间：2012-07-05T13:32:56.787
> 
> 标签：html, css, wordpress, templates

我一直在尝试向 Wordpress 模板添加图像，当我添加标签时，它会自动添加 display: none; 当它出现在网站上时。所以我决定将它添加为带有 div 的 css 图像。

我已将此添加到 CSS 中：

```
.myad a{
    background-image: url(http://www.henstagweekends.co.uk/images/advert.png);
    background-repeat: no-repeat;
    display: block;
    height: 248px;
    width: 189px;
    z-index: 100000;
} 
```

我已将其添加到标签之前的 footer.php 中：

```
<div class="myad">
<a href="/jobs-with-epic-events"></a>
</div> 
```

我添加了一个临时的背景颜色来显示它的位置。查看页面的最底部。 [http://www.henstagweekends.co.uk/](http://www.henstagweekends.co.uk/)

知道是什么原因造成的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T13:40:26.263

`url('URL')`指图像所在的路径。尝试将图像下载到您的文件夹并引用它：`background-image: url('<path>/advert.png')`

# objective-c - 快速判断 NSArray 包含哪些对象的方法

> ID：11345421
> 
> 赞同：1
> 
> 时间：2012-07-05T13:32:57.140
> 
> 标签：objective-c, ios, xcode

我目前正在使用其他人的代码，所以我有一个问题是有没有一种方法可以快速判断我在 NSArray 中有哪些对象。

在代码中我有例如：

```
Someclassobj.arr 
```

而且我知道 Someclassobj 中有一个数组作为属性，当然我可以看到它的定义，但仍然不知道里面有什么对象。可能是 NSString、NSDictionary、ObjectDefinedByUSer... 如何快速判断？

有没有检查类的方法？如果我执行：

```
id someUnknownObj = [Someclassobj.arr objectAtIndex:0]; 
```

如何检查？（我知道 isKindOfClass isMemberOfClass 方法，但它对我不起作用）。

当然**不一定**非要code方法，可以是option+click之类的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T13:34:11.107

会做的伎俩：

```
NSLog(@"%@",yourArray); 
```

如果你想避免这种事情：

1）一旦`NSArray`有对象就放置一个断点。

2) 转到 Xcode 上的控制台并执行以下操作：

```
po yourArray 
```

一篇关于在 Xcode 中使用控制台的精彩[文章](http://cocoawithlove.com/2008/10/debugging-tips-for-objective-c.html)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-05T13:55:04.157

你可以像这样做stk：

```
NSArray *arr; // Array with random stuff
for (id elt in arr) {
   if ([elf iskindOfClass:[NSString class]])
       NSLog(@"Object = NSString);"
} 
```

# codeigniter - CodeIgniter 上传文件错误：你没有选择要上传的文件

> ID：11345423
> 
> 赞同：1
> 
> 时间：2012-07-05T13:33:03.493
> 
> 标签：codeigniter, upload, codeigniter-2, filesize

这个问题之前已经被问过，但不是这个确切的问题。我有一个很好的上传系统（我正在上传 CSV 并解析它们）。但是，如果文件大小超过 5Mb，则会出现错误：您没有选择要上传的文件

如果它在下面，则文件上传和解析就好了。

我首先将我的 php.ini 设置设置为 128M，现在设置为 99999999999999999999 我还将我的 CI 配置 maz_size 设置为 9999999999（我使用的是更实际的数字，但我想确定）我已经重新启动了 apache ini 发生了变化，但问题仍然存在。

我已经看到错误：当存在文件大小问题时，会显示您没有选择要上传的文件，但我不知道在哪里可以检查。

最后，如果我回显 phpinfo()，我可以确认最大上传是 999999999999999

拔我的头发...

还能是什么？

/// 更新：代码添加我有两种解析 csv 的方法，可以是逐行解析，也可以将整个文件直接转储到数据库中，稍后再整理。这两项工作，并由配置设置选择。这就是这行： $this->config->item('import_type') 的用途。欢迎任何想法！

```
 public function upload()
{
    $config['upload_path'] = './uploads/';
    $config['allowed_types'] = 'txt|csv|xls|xlsx';
    $config['max_size'] = '999999999999999999999';

    $this->load->library('upload', $config);

    if ( ! $this->upload->do_upload())
    {
        $error = array('error' => $this->upload->display_errors());
        $this->load->view('feed_form', $error);
    }
    else
    {
        $data = array('upload_data' => $this->upload->data());

        if ($this->config->item('import_type') == 'db') {
            $result = $this->model_feed->capture_file($this->input->post('feed_name'), $data['upload_data']['full_path']);
        } else {
            $result = $this->capture_feeds($this->input->post('feed_name'), $data['upload_data']['full_path']);
        }

        if ($result) {
            $this->load->view('feed_upload_success', $data);
        } else {
            $this->load->view('feed_form', array('error' => 'The file you supplied does not match the data structure we were expecting.' ));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T14:03:13.320

您也必须在 php.ini 上增加 post_max_size

[http://www.php.net/manual/en/ini.core.php#ini.post-max-size](http://www.php.net/manual/en/ini.core.php#ini.post-max-size)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-24T05:33:12.640

我遇到了同样的问题，我所做的是在`$this->upload->do_upload()`函数上我已经从表单输入类型文件名中传递了输入文件的名称。假设我将名称命名为 avatar，所以我将函数用作`$this->upload->do_upload('avatar')`

# java - 如何跟踪不是从代理bean而是从bean调用的成员函数？

> ID：11345425
> 
> 赞同：0
> 
> 时间：2012-07-05T13:33:07.517
> 
> 标签：java, spring, aop, spring-aop

我有一个在我的 Web 应用程序中使用 Spring AOP 框架的类，就像下面显示的代码一样。我想知道如果我实现以下代码，为什么 Spring AOP 能够跟踪 add() 但不能跟踪 multiple()。

```
public interface calculator {
   public void add();
   public void multiple();
}

public class calculatorImpl implements calculator {

   public void add() {

      multiple();
   }

   public void multiple() {}
} 
```

我做了一个实验，发现下面的代码工作正常。这意味着 Spring AOP 能够同时跟踪 add 和 multiple 函数。

```
ICalculator calcProxy = (ICalculator) context.getBean("calculatorProxy");
calcProxy.add();
calcProxy.multiple(); 
```

我认为这一定是`multiple()`代理 bean 注入的原因，而`multiple()`in`calculatorImpl`类不是，因此 Spring AOP 无法跟踪它。如果我错了，请纠正我。

我的下一个问题。是否有解决这个问题的方法，`add()`真正需要`multiple()`通过 Spring AOP 执行和获取跟踪？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T14:56:04.077

Spring AOP 并没有改变实际的方法，而是在 Object 周围添加了一个代理。一旦你进入内部对象（在`add()`方法内部），就没有代理了，你就在它下面。

我在过去的答案中更详细地解释了这种机制：

[https://stackoverflow.com/a/4171649/342852](https://stackoverflow.com/a/4171649/342852)

有三种方法可以处理这种情况：

1.  使用[AspectJ](http://www.eclipse.org/aspectj/)，而不是 Spring AOP。AspectJ 将行为编译到您的代码中，而 Spring AOP 使用围绕您的代码的代理。
2.  从 Bean 内部访问代理。这真的很难看，但可以做到。
    示例代码（在这里你让类意识到它正在被代理，这与 AOP 所代表的一切相反）：

    ```
    public void add() {
       ((Calculator)AopContext.currentProxy()).multiple();
    } 
    ```

    稍微不那么可怕（在这里你让班级意识到它是由 Spring 管理的）：

    ```
    @Autowired
    private ApplicationContext context;
    public void add() {
       context.getBean(Calculator.class).multiple();
    } 
    ```

3.  改变你的设计。示例：移动这两种方法以分离 bean 并将每个方法注入另一个 bean。

# jquery - Jquery：替换h2上的重音字符

> ID：11345431
> 
> 赞同：0
> 
> 时间：2012-07-05T13:33:24.647
> 
> 标签：jquery, replace, special-characters

我尝试替换我定义的特殊字符，这些字符包含在我的所有 < h2 >

我已经编写了这段代码，但它仍然无法正常工作。

```
 var charMap = {
    à:'a',è:'e',é:'e',ä:'a',ë:'e',
    ö:'o',â:'a',À:'A',É:'E',È:'E',
};
$('h2').each(function() {
        var str = $(this).text() ;

        var str_array = str.split('');

        for( var i = 0, len = str_array.length; i < len; i++ ) {
            str_array[ i ] = charMap[ str_array[ i ] ] || str_array[ i ];
        };
    }); 
```

感谢您帮助像我这样的新手 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T13:37:09.260

您还必须实际*设置*新值：

```
...
for( var i = 0, len = str_array.length; i < len; i++ ) {
    str_array[ i ] = charMap[ str_array[ i ] ] || str_array[ i ];
};
$(this).text(str_array.join('')); 
```

其中内置函数`Array.join`实际上是`String.split`.

# jsf - JSF prerenderview 侦听器未在页面转发时执行？

> ID：11345441
> 
> 赞同：0
> 
> 时间：2012-07-05T13:33:42.647
> 
> 标签：jsf, event-handling

我要描述的可能是熟悉 JSF 阶段循环的人的预期行为，但对我来说并不明显，所以我要求确认。在 JSF 页面中，我为 prerenderview 事件放置了一个侦听器。该页面是由 jsf-forward 处理的。不执行侦听器。如果我通过其 url 直接访问该页面（执行 GET），则执行侦听器。我的代码有问题还是这是正确的行为？我在互联网上搜索了很多，但没有找到任何有用的东西。

更新正如我在评论中所说，我得出了错误的结论。我描述的不是一般行为，而是由于错误或更复杂的场景而导致的特殊情况。

更新 2 经过进一步调查，我得出了这个结论：问题似乎与将 preRenderView 侦听器放在使用模板的页面中的错误方法有关。不幸的是，它在某些情况下有效，而在其他情况下无效。

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org  /TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:p="http://primefaces.prime.com.tr/ui">
 <f:metadata>
    <f:event listener="#{permessitemporaneiController.preCreate}" type="preRenderView" />
</f:metadata>
<ui:composition template="/template.xhtml">
... 
```

我应该在模板内创建一个插入区域，并将标签放在前面代码中的 a 中。

奇怪的是，使用 GET 请求正确调用了“错误”代码的侦听器，但不适用于 jsf-forward。为什么 ？？

谢谢菲利波

# c# - Regex.Replace 不替换

> ID：11345444
> 
> 赞同：0
> 
> 时间：2012-07-05T13:33:44.253
> 
> 标签：c#, regex

我正在使用 regex.replace 用 Environment.Newline 替换“#”字符。但是它没有返回预期的结果。它只是返回相同的输入字符串。这是我的代码。

```
Regex.Replace(inputString, @"#", Environment.NewLine); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T13:35:29.557

`Regex.Replace`不会更改您传入的参数。它将结果作为新字符串返回。

试试这个：

```
inputString = Regex.Replace(inputString, @"#", Environment.NewLine); 
```

当然，对于这样一个简单的替换，Regex 有点矫枉过正。`String.Replace`在这种情况下就足够了（注意：`String.Replace`也不会修改参数，而是返回一个新字符串）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T13:36:50.170

你不需要 a 来做`RegEx`你正在做的事情，更简单：

```
inputString = inputString.Replace("#", Environment.NewLine); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T13:37:10.030

正如 ABT 博士所说，您需要将`Replace`方法返回到变量中。所以，你可以这样做：

`inputString = Regex.Replace(inputString, @"#",Environment.NewLine);`

这将`inputString`使用所需的替换更新变量。

# c# - 对错误处理流程使用异常？

> ID：11345454
> 
> 赞同：3
> 
> 时间：2012-07-05T13:34:16.580
> 
> 标签：c#, exception, exception-handling

我有以下模式：

```
private void MyFunction()
{
    doStuff();

    if (problem())
    {
        cleanup();
        return;
    }

    doMoreStuff();

    if (otherProblem())
    {
        cleanup();
        return;
    }

    doYetMoreStuff();
} 
```

错误清除代码重复。消除这种情况的明显方法是：

```
private void MyFunction()
{
    try {
        doStuff();

        if (problem()) throw new MyException();

        doMoreStuff();

        if (otherProblem()) throw new MyException();

        doYetMoreStuff();
    }
    catch (MyException)
    {
        cleanup();
        return;
    }
} 
```

但是，错误情况并不是真正的例外 - 这是一个 ASP.Net 页面，查询字符串中的错误数据或没有数据将触发错误情况。异常似乎是对错误处理进行重复数据删除并将其与主代码分开的最明显方法，但据我了解，公认的最佳实践是不要对这样的控制流使用异常。

这样做的习惯方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T13:38:24.123

在非异常情况下使用异常并不是一个好主意，尤其是当异常被抛出并在同一个方法中捕获时。更好的方法是使用一个布尔变量来指示需要清理，并在`finally`块内执行清理。

```
var needsCleanup = true;
try {
    doStuff();

    if (problem()) return;

    doMoreStuff();

    if (otherProblem()) return;

    doYetMoreStuff();

    needsCleanup = false;
} finally {
    if (needsCleanup) {
        cleanup;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T13:40:15.483

您可以使用 try .. finally 和提前返回。

```
private void MyFunction()
{
  try
  {
    doStuff();

    if (problem())
    {
        return;
    }

    doMoreStuff();

    if (otherProblem())
    {
        return;
    }

    doYetMoreStuff();
  }
  finally
  {
    cleanup();
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T13:40:44.110

该`finally`块将在执行离开该`try`块时执行，即使它离开该`try`块的原因是因为您调用了`return`. 所以，你可以这样做：

```
private void MyFunction()
{
    try
    {
        doStuff();
        if (problem()) return;

        doMoreStuff();
        if (otherProblem()) return;

        doYetMoreStuff();
    }
    finally
    {
        cleanup();
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T13:37:05.003

If`cleanup()`实际上只是一个方法调用而不是*重复*。

在这种情况下，我不会使用异常。您可以轻松地在谷歌上搜索详细描述为什么在正常流程中使用异常是一个坏主意的文章：主要是影响性能并且会搞砸性能计数器（“抛出的异常数”将毫无意义）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-05T13:39:56.387

*当意外*发生时应该抛出异常。

考虑你想在你的数据库中添加一个用户，但如果用户名已经存在，你只需要一个错误说明。现在，错误不一定是异常！

`bool AddUser(string username)`

现在流程看起来像这样：

```
if(AddUser(username)) {}
else
{
    // Notify the user that it didn't work
} 
```

如果这里抛出异常，*应该*是软件无法连接数据库，而不是用户名已经存在。

像这样为流控制抛出和捕获异常会导致比需要更多的开销，因此您应该使用`if`/`else`来控制它。

# git - 在 gitweb 中看起来很奇怪的提交

> ID：11345456
> 
> 赞同：0
> 
> 时间：2012-07-05T13:34:20.433
> 
> 标签：git, diff, gitweb

在我们本地的 git web 看到了这种东西

> 文件名 diff1 | 差异2 | 斑点 | 历史

同一个提交中的一个文件怎么会有两个差异

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T13:42:11.967

这是一个合并提交，您可以选择与每个父提交进行比较。

例如这个[合并提交](http://git.kernel.org/?p=git/git.git;a=commit;h=d844808bb2d3c8df0eba23ec1950bc9cf2727452)，它有 2 个父级，所以 gitweb 可以为`builtin/fmt-merge-msg.c`.

# ios - 内存警告后将 viewDidUnload 发送到已释放的实例

> ID：11345458
> 
> 赞同：1
> 
> 时间：2012-07-05T13:34:20.990
> 
> 标签：ios, uitableview, memory-management

我遇到了一个非常有趣的情况，不知道如何解决。我将首先概述我的程序的体系结构。我有一个 UITableViewController 派生类，它也实现了我的委托协议。此表格视图中的单元格是自定义单元格，每个单元格都有一个强（分配）类型属性给委托（表格视图控制器）。委托处理一些 UI 操作。

为了重现崩溃，我加载了表格视图，然后离开它。通常在这里，表格视图将被释放，但在我的情况下，单元格仍然持有对它的强引用，因此它保留在内存中。问题是，当内存警告在此之后到达设备时，我会崩溃。我推断会发生以下情况：

*   表视图控制器收到内存警告
*   它会释放所有（可重复使用的）细胞
*   在单元格的 dealloc 中，我 nil 委托属性，因此它们向表视图控制器发送释放。
*   当最后一个单元格的属性为零时，表格视图的引用计数达到零，因此它将自行释放
*   释放单元格后，表视图的 didReceiveMemoryWarning 的默认实现继续，但已经在一个已释放的僵尸对象上
*   有时稍后它会在僵尸上调用 viewDidUnload 并使应用程序崩溃。

我该如何解决这种情况？

PS：显然我不使用ARC

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T13:40:23.377

当你设置一个委托时，你应该分配它，而不是保留它（因此单元的释放不应该向表视图控制器发送释放消息）。

> 委托对象不（也不应该）保留它们的委托。但是，委托对象（通常是应用程序）的客户负责确保他们的委托人在附近以接收委托消息。为此，他们可能必须在内存管理代码中保留委托。这种预防措施同样适用于数据源、通知观察者和行动消息的目标。请注意，在垃圾收集环境中，对委托的引用是强的，因为保留周期问题不适用。

来自[Objective-C 编程中的概念](https://developer.apple.com/library/ios/#documentation/General/Conceptual/CocoaEncyclopedia/DelegatesandDataSources/DelegatesandDataSources.html)

# objective-c - UIButton在添加到子视图时没有收到触摸，但在添加到主视图时会收到

> ID：11345464
> 
> 赞同：0
> 
> 时间：2012-07-05T13:34:40.840
> 
> 标签：objective-c, ios, uiview, uiviewcontroller, uibutton

基本上我有一个主屏幕，屏幕底部有一个背景图像和三个菜单选项。当我将这 4 个组件添加到 RootViewController 的视图中时，一切正常。但是如果我做类似的事情

```
_mainContainer = [[UIView alloc] init];
self.view = _mainContainer;
_firstScreen = [[UIView alloc] initWithFrame:self.view.frame];

"some code here setting up the subviews"

[buttonLeft addTarget:self action:@selector(startGame) forControlEvents:UIControlEventTouchUpInside];

[_firstScreen addSubview:mainMenuBackground];
[_firstScreen addSubview:buttonLeft];

[_firstScreen addSubview:buttonMid];
[_firstScreen addSubview:buttonRight];
[_mainContainer addSubview:_firstScreen]; 
```

本质上，如果我将所有内容直接添加到 _mainContainer，则按钮可以工作，如果我将其添加到 _firstScreen，然后添加 _firstScreen，它们将不起作用。

在 _firstScreen 上启用了用户交互。我稍后在我的应用程序中做了类似的事情，它工作正常。另外，不确定这是否与它有关，但是尽管我的屏幕以横向显示，并且 plist 中的所有选项都设置为仅横向，但当我运行转换时，例如 FlipFromBottom（或其他任何名称），我的应用程序认为“底部”是屏幕处于纵向状态，直到我移动到应用程序中的另一组子视图。（所以基本上标题屏幕表现得很糟糕）。

我到处寻找解决方案，希望我不会错过一些基本的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T13:41:21.120

嘿，什么是mainMenuBackground？，如果是图像，则无需将其设置为子视图，正确的方法是将其设置为背景图像。我希望这能解决你的问题

# c# - C# 将字符串发送到打印机不使用 Courier

> ID：11345467
> 
> 赞同：0
> 
> 时间：2012-07-05T13:34:51.343
> 
> 标签：c#, .net, visual-studio-2008, printing

我的 IDE 是使用 C# 的 .Net 2008。我需要以非按比例间隔的字体将字符串发送到打印机。例如，假设字符串 =“Hello World”，打印机是“Printer1”

我遵循了这个 stackoverflow 帖子的建议：将 [字符串直接发送到打印机](https://stackoverflow.com/questions/7434938/sending-string-directly-to-printer)

当我将字体设置为“Times New Roman”或“Comic Sans MS”时，它可以工作。但是当我使用 Courier 时，我会得到一个不成比例的字体。

我正在使用确切的编码作为我引用的帖子。为什么 Courier 不给我我需要的非比例间隔字体？有没有办法来解决这个问题？

提前谢谢你，哈维·努斯鲍姆

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T13:36:24.643

Courier 是等宽字体。它的所有字符都具有相同的宽度。

# c# - 关于销售应用程序的 MVC3 架构

> ID：11345471
> 
> 赞同：0
> 
> 时间：2012-07-05T13:35:24.570
> 
> 标签：c#, asp.net-mvc-3, architecture

我目前的任务是在 MVC3 上开发销售/CRM 应用程序。由于许多操作都围绕给定的订单（可以保存并稍后使用），我想知道一些问题。

1.  我想要用于客户报价和内部订单视图的标签。我该如何处理这种行为，以便当客户打开给定订单时，他/她可以保持在同一订单内？
2.  订单包含生成各种其他 Excel 文档（如供应商发票和运输订单）的信息，我需要实施一种“填写”这些表格的方法。表格是 Excel 格式，有没有办法从 C# 应用程序“填充”一个 excel，然后生成文件？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T13:40:01.100

第一个问题我不清楚，所以我只回答第二个

要从您的模型生成 excel，您可以使用[openXml SDK](http://msdn.microsoft.com/en-us/library/bb448854.aspx)。使用此 dll，您可以从头开始生成 word 或 excel，而无需在服务器上安装 office（使用互操作，您必须这样做）

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T13:50:42.333

第一个问题听起来像是持久性的问题。您可以使用会话跨页面保存数据。例如，如果您有某种类，您可以在客户执行需要它的操作时`Order`创建一个新类：`Order`

```
\\ first use:
var order = new Order();
order.Details = "Blah blah blah";
Session["Order"] = order; 
```

稍后，您可以使用相同的机制获得它：

```
\\ You should check if this exists first
var order = (Order) Session["Order"];
order.SomethingUseful(); 
```

就个人而言，我在 周围写了一些包装器`Session`以使其具有强类型，因此我可以正确地对其进行单元测试。类似于以下内容：

```
interface ISessionWrapper
{
    Order Order { get; set; }
} 
```

然后我可以将其实现为：

```
 public Order Order { get; set; }
    {
        get { return (Session["Order"] ?? Session["Order"] = new Order()); }
        set { Session["Order"] = value; }
    } 
```

在一些具体的课程中。模拟和单元测试也变得很容易。

# php - 更改事件不起作用 jquery 自动完成

> ID：11345475
> 
> 赞同：0
> 
> 时间：2012-07-05T13:35:30.323
> 
> 标签：php, javascript, jquery

这是我为获取用户名、位置和他们的图片而编写的函数。现在的问题是，如果我使用 mustMatch 选项，除了一个错误之外，一切都正常。如果假设我输入 S，它会带来“Sebastian”“einstain”。如果我选择 sebastian，一切都像魅力一样，但如果我选择 einstain，它会抹去一切。

我尝试使用 change: event 但无论如何它都不会触发不知道为什么

```
$(document).ready(function(){

  var wp_v = '3';

  $("#searchbox").autocomplete("search.php?wp="+wp_v, {

    matchContains: true,
    //mustMatch: true,
    width: 258,
    scroll: true,
    scrollHeight: 350,
    dataType: 'json',
    change: function (event, ui) {
      alert('change');
      if (!ui.item) {
        $(this).val('');
      }
    },
    parse: function(data) {
      var array = new Array();
      for (var i = 0; i < data.length; i++) {
        array[array.length] = {
          data: data[i],
          value: data[i].name,
          result: data[i].name
        };
      }
      return array;
    },
    formatItem: function(row) {                     
      var output =  "<img class=img src='avatars/" + row.img + "'/> ";             
      output += "<span class=name>"+row.name+"</span><br/>";
      output += "<span class=small>"+row.country+"</span><br/>";
      return output;
    }

  }).result(function(event,item) {

    if (item == undefined) {
      $('#receiver').val('');
    } else {
      $('#receiver').val(item.uid);
    }

  });

}); 
```

这是来源

```
[
  {"uid":"2","name":"Sebastian Aparicio","img":"1339875067-Koala.jpeg","country":"Leder"},
  {"uid":"12","name":"Mester Jakob","img":"default.jpeg","country":"Salg"},
  {"uid":"19","name":"Mester Jakob","img":"1339875047-Penguins.jpeg","country":"Leder"}
] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T18:39:13.377

实际上自动完成插件版本是不同的。这就是为什么它不起作用。

# jquery - CakePHP Ajax 调用以获取下拉列表

> ID：11345483
> 
> 赞同：0
> 
> 时间：2012-07-05T13:36:01.230
> 
> 标签：jquery, cakephp, getjson, cakephp-2.1, cakephp-2.2

我正在尝试根据先前选择的下拉菜单更改下拉菜单。我可以用 jQuery 编写函数。

由于我无法在基于服务器的各种安装中使用 URL 路径，因为我必须将 URL 硬核到脚本中。

```
<script type="text/javascript">
function getCategory(){
    var industryId = $("#CompanyCompanyIndustryId").val();
    $.getJSON('http://localhost/gitgrow/users/fetch/'+industryId, function(data) {
        var options = '';
        $.each(data, function(key, value) { 
          options += '<option value="' + key + '">' + value + '</option>';
        });
        $("#CompanyCompanyCategoryId").html(options);
    })
}
</script> 
```

如何使用 CakePHP 和 JS 组件实现相同的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:42:40.333

您可以在页面中编写您的 javascript，并使用它`$this->Html->url`来构建您的 URL 值。只需将其写入`$this->Html->scriptBlock();`并添加`'inline'=>false`以使其写入头部而不是文档的该点：

```
$this->Html->scriptBlock("
    function getCategory(){
        var industryId = $(\"#CompanyCompanyIndustryId\").val();
        $.getJSON('" . $this->Html->url(array('controller'=>'users', 'action'=>'fetch', $industryId)) . ", function(data) {
            var options = '';
            $.each(data, function(key, value) { 
              options += '<option value=\"' + key + '\">' + value + '</option>';
            });
            $(\"#CompanyCompanyCategoryId\").html(options);
        })
    }
", array('inline'=>false)); 
```

`<head>`现在您有了在（或您希望的任何其他地方）中生成的 javascript ，并且正在使用 CakePHP 构建 URL。

# symfony - symfony 中的安全性。寻找捆绑包/教程

> ID：11345486
> 
> 赞同：-2
> 
> 时间：2012-07-05T13:36:11.130
> 
> 标签：symfony

我正在用 symfony 2 编写一个应用程序。

我的网站上有 3 个区域：

1.  /admin - 仅用于管理，我为 Admin 制作了单独的捆绑包
2.  / - 对于所有用户，他们可以看到大部分网站并执行大部分操作
3.  /user - 访问用户配置文件和用户数据 + '/'。

为此目的有什么好的捆绑包吗？可能也是很好的教程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:53:03.777

将[sonataAdminBundle](https://github.com/sonata-project/SonataAdminBundle)与[fosUserBundle](https://github.com/FriendsOfSymfony/FOSUserBundle)结合起来最适合管理。他们也有很好的文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T23:11:04.850

您还可以查找以下链接：

*   [http://symfony.com/doc/current/book/security.html](http://symfony.com/doc/current/book/security.html)
*   [http://symfony.com/doc/current/bundles/SensioFrameworkExtraBundle/index.html](http://symfony.com/doc/current/bundles/SensioFrameworkExtraBundle/index.html)

我更喜欢使用注解来保护控制器。对于这种情况，有[`JMSSecurityExtraBundle`](http://jmsyst.com/bundles/JMSSecurityExtraBundle/1.0).

基本步骤：

1.  为不同的地方创建具有不同选项的防火墙。
2.  如果 url 是自定义的（例如通过注释），则安全手动操作

此外，您不需要创建独立的管理包。如果您想将管理员操作与非管理员分开，您可以简单地创建几个具有不同 URL 前缀的控制器：

*   `AdminController (@Route("/admin"))`,
*   `UserController (@Route("/user"))`,
*   `DefaultController (@Route("/"))`.

# c++ - 检查 Gdiplus::Bitmap::FromFile 是否返回了有效的位图

> ID：11345491
> 
> 赞同：7
> 
> 时间：2012-07-05T13:36:20.740
> 
> 标签：c++, gdi+

我假设如果文件不是有效图像，Gdiplus::Bitmap::FromFile 返回 NULL，但即使我将它传递给 doc 文件，它也会返回非 NULL。Bitmap 或类似的东西似乎没有 IsValid 方法。

那么我怎么知道 Gdiplus::Bitmap::FromFile 是否真的加载了一个有效的图像呢？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-19T13:48:39.207

事实证明这`Bitmap::GetLastStatus()`就是我正在寻找的，`Gdiplus::Ok`如果加载操作成功则返回，如果失败则返回错误代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-01-17T16:56:47.903

以下代码显示了 Gdiplus 从文件中加载位图的用法。第一部分是一个通用示例代码，展示了如何启用 Gdiplus 并检查位图是否在内存中可用。如果未启用 Gdiplus 会 `Gdiplus::Status __retVal = bitmap->GetLastStatus();` 导致“内存不足”错误，如果找不到文件或其他问题错误的错误代码不同，请参阅`enum Status`Gdiplus中可能的错误代码。`using namespace Gdiplus`不需要 'Gdiplus::' 前缀，但示例代码使用前缀以便更好地理解。该行`#pragma comment(lib, "Gdiplus.lib")`可能仅在 VisualStudio 中有效，在使用其他编译器的情况下，可能必须将 Gdiplus.lib 显式添加到链接器选项中

```
 //------------------------------------------------------------
//Before using anything from Gdiplus initialization is needed:
//------------------------------------------------------------

#include <GdiPlus.h>
using namespace Gdiplus;
#pragma comment(lib, "Gdiplus.lib")

GdiplusStartupInput gdiplusStartupInput;
ULONG_PTR           gdiplusToken;

GdiplusStartup(&gdiplusToken, &gdiplusStartupInput, NULL);

Gdiplus::Bitmap* image = Gdiplus::Bitmap::FromFile(filename);

if (image == NULL)
return FALSE;
if (Gdiplus::Ok != image->GetLastStatus())
return FALSE;

//bitmap successfully loaded...
//place specific code here to process the bitmap/bitmap data

GdiplusShutdown(gdiplusToken); 
```

第二部分是 pret-a-porter 代码，展示了使用 Gdiplus 将位图文件读入内存的具体实现。位图字节缓冲区的 r、g、b、a 值被读入 byte 类型的向量，以便稍后它们可以用于例如 OpenGL GL_RGBA 纹理。可以读取 BMP、GIF、JPEG、PNG 和更多图像类型的位图

```
 //--------------------------------------------------------------------------------
//The following example code loads me a .jpeg file into a byte buffer with r,g,b,a 
//--------------------------------------------------------------------------------
#pragma comment(lib, "Gdiplus.lib")

#include <Unknwn.h>    
#include <windows.h>
#include <windowsx.h>
#include <objidl.h>
#include <Gdiplus.h> 
#include <Gdiplusheaders.h> 
#include <Gdipluscolor.h>
#include <Gdiplusflat.h>
#include <wchar.h>
#include <vector>

bool Texture::readFromFile(const wchar_t* filename)
{
    Gdiplus::GdiplusStartupInput gdiplusStartupInput;
    ULONG_PTR           gdiplusToken;

    GdiplusStartup(&gdiplusToken, &gdiplusStartupInput, NULL);

    bool bRetVal = false;
    // Create a Bitmap object from a JPEG file.
    Gdiplus::Bitmap* bitmap = 0;

    int wt, ht;
    Gdiplus::BitmapData bitmapData;

    bitmap = Gdiplus::Bitmap::FromFile(filename);
    Gdiplus::Status __retVal = bitmap->GetLastStatus();
    if (__retVal == Gdiplus::Status::Ok)
    {
        wt = bitmap->GetWidth();//get width of image
        ht = bitmap->GetHeight();//get height of image
        Gdiplus::Rect rect(0, 0, wt, ht);//create a rect object

        std::vector<GLubyte> dstBuffer = std::vector<GLubyte>(wt * ht * 4);
        //Glubyte is OpenGL unsigned byte, 4 bytes per pixel for RGBA 8-bit per channel
        //so dstBuffer is a continuous byte buffer, destination for the bytes read from the bitmap
        //this is needed for eventually reordering the bytes as e.g. OpenGL textures have a 
        //specific format which may not match the layout of the source bitmap

        bitmap->LockBits(&rect, Gdiplus::ImageLockModeRead, PixelFormat32bppRGB, &bitmapData);
        //lock bitmap in memory: so it can be (1) read or written to,and (2) CONVERT to a target format, here PixelFormat32bppRGB
        //use target format to be sure how many bytes you have (to read) per pixel, original bitmap may be only RGB
        //where you have only 3 bytes per pixel or some other format
        //LockBits fills the given 'bitmapData' structure...
        const uint8_t* srcDataBase = (uint8_t*)bitmapData.Scan0;
        //...from which you get a 'source' pointer to the bitmap bytes, here it is a byte pointer

        //now loop through the pixel data (outer loop is image height, inner loop is width)
        //if the byte layout of the bitmap's byte buffer is already in the correct order
        //it may seem redundant to loop through it, but still you may have the stride problem
        //if your picture width is not divisible by 4 (or divisble by 8 on a 64bit architecture)
        //but WINDOWS aligns it on a DWORD (32bit) or QWORD (64bit)
        int i = 0;//destination buffer is contiguous, so index i is increased per byte (pixel = 4 byte)
        for (int y = 0; y < ht; y++)
        {
            for (int x = 0; x < wt; x++)
            {
                //x << 2 is the same as x*4 but should be much faster, the x index 
                //has to be multiplied by 4 as format is PixelFormat32bppRGB so
                //we have 4 byte values per pixel: r,g,b,a (or a different order)
                dstBuffer[i++] = *(srcDataBase + 2 + (x << 2));
                dstBuffer[i++] = *(srcDataBase + 1 + (x << 2));
                dstBuffer[i++] = *(srcDataBase + 0 + (x << 2));
                dstBuffer[i++] = *(srcDataBase + 3 + (x << 2));
                //the above 4 lines transfer ONE pixel (=4 byte values) from source to destination
                //(dst = dstBuffer, src = srcDataBase)
                //note that the order of the input bytes is not the same as the order of
                //the output bytes written, this is necessary if e.g. the
                //source bitmap has a,r,g,b format and destination bitmap format has order b,g,r,a etc.
                //code could be optimized: a bitmap with a width divisible by four
                //should be read from source or at least written to destination buffer in an int IO per pixel
            }
            srcDataBase += bitmapData.Stride;
            //a bitmap's horizontal pixel data (=bytes) for one row are contiguous however bitmaps internally
            //and for efficency reasons may be aligned on 4-even memory adresses (or other even multiples) 
            //but if your bitmap width is indivisible by 4,  the bitmap's pointer 
            //may be non-continuous between horizontal pixel rows: 
            //no simple 4 byte increase between the last pixel of row and the first pixel of row+1, 
            //instead stride has to be added to the source pointer to point correctly to
            //the first pixel of the next row
            //this is what bitmapData.Stride accounts for
            //if you read an int (int = 4 bytes = a word) and it is not word aligned (=adress is divisible by 4)
            //you probably need 2 read operations to access the memory for the complete int and all successive ints of an int buffer
            //if it IS word aligned only one read OP (per buffer element) is needed (on a 64bit architecture a QWORD IO is most efficient)
        }
        bitmap->UnlockBits(&bitmapData);
        //dont forget to unlock the bitmap in memory so storage can be optimized by OS
        //does not destroy it, can be locked again

        //
        //...OpenGL code using dstBuffer is omitted here...
        //
        bRetVal = true;
    }
    Gdiplus::GdiplusShutdown(gdiplusToken);
    return bRetVal;
} 
```

# google-play - 向亚马逊和谷歌提交应用程序后的安卓权限

> ID：11345498
> 
> 赞同：2
> 
> 时间：2012-07-05T13:36:47.577
> 
> 标签：google-play, trigger.io, amazon-appstore, android-permissions

我最近向亚马逊和谷歌提交了我的应用程序。我现在不会链接到或提及该应用程序，因为我不希望您认为我在宣传它。相反，我有与权限相关的**config.json问题。**这是我的**config.json**的精简版-

```
"modules": {
    "contact": false,
    "event": true,
    "file": false,
    "geolocation": false,
    "is": true,
    "message": false,
    "notification": false,
    "prefs": false,
    "sms": false,
    "tabs": true,
    "tools": true,
    "topbar": true,
    "tabbar": true,
    "media": true
 } 
```

提交我打包的 .apk 文件后……谷歌和亚马逊都列出了应用程序的权限。他们中的大多数是有道理的。但是，下面列出的那些似乎**没有**意义，因为我在 json.config 中禁用了文件、联系人和地理位置。

**谷歌**权限表明：

您的位置 - 精细 (GPS) 位置。

您的个人信息 - 阅读联系数据。

存储 - 允许应用写入 USB 存储。允许应用写入 SD 卡。

**亚马逊**权限表明：

android.permission.WRITE_EXTERNAL_STORAGE；

android.permission.ACCESS_FINE_LOCATION;

android.permission.READ_CONTACTS；

“写入外部存储”权限不是一个阻碍，我可以忍受它。但是，我不希望我的潜在用户认为该应用程序想要访问他们的地理位置并阅读他们的联系人......尤其是当谷歌显示 -

> “恶意应用程序可能会使用它来确定您的位置，并可能消耗额外的电池电量。”
> 
> “允许该应用程序读取存储在您手机上的所有联系人（地址）数据。恶意应用程序可能会使用它来将您的数据发送给其他人。”

知道我在 config.json 中做错了什么吗？也许我应该离开地理位置和联系方式？仍然......然后将这些设置为 false 可能无法正常工作。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T21:18:19.863

我通过从 config.json 中排除那些冗余模块而不是将它们设置为 false 来解决此问题。

试试这个：（刚刚删除值联系人，文件和地理位置）

```
"modules": {
    "event": true,
    "is": true,
    "message": false,
    "notification": false,
    "prefs": false,
    "sms": false,
    "tabs": true,
    "tools": true,
    "topbar": true,
    "tabbar": true,
    "media": true
 } 
```

# javascript - 向对象添加新功能

> ID：11345505
> 
> 赞同：2
> 
> 时间：2012-07-05T13:37:05.943
> 
> 标签：javascript

如果我有 ：

```
 function myFunc(a)
  {
    if(! (this instanceof myFunc) ) return new myFunc(a);
    this.myVar = "FOOBAR";
  } 
```

如何使它工作？：

```
 myFunc(function() { alert(this.myVar )}); // output must be "FOOBAR"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T13:38:43.643

`a`用调用`this`。

```
 function myFunc(a)
  {
    if(! (this instanceof myFunc) ) return new myFunc(a);
    this.var = "FOOBAR";

    a.call(this); // <-- Added this line
  }

  myFunc(function() { alert(this.var)}); // output must be "FOOBAR"; 
```

演示：http: [//jsbin.com/uferif/](http://jsbin.com/uferif/)

# android - 如何在 Galaxy Nexus 等设备上隐藏软触摸按钮

> ID：11345518
> 
> 赞同：8
> 
> 时间：2012-07-05T13:37:37.903
> 
> 标签：android, uibutton, touch

我刚刚在 Galaxy Nexus 上尝试过 VLC 应用程序。唯一的问题是，galaxy nexus 上的触摸按钮（返回、主页和菜单）没有像在 Youtube 应用上那样隐藏。

如何控制触摸按钮的行为？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-05T13:46:48.270

你是对的，VLC 播放器在没有 root 权限的情况下执行此操作（在我的手机上是这样；））。我在stackoverflow上找到了这个：

[隐藏 ICS 回家任务切换器按钮](https://stackoverflow.com/questions/8469112/hide-ics-back-home-task-switcher-buttons)

# objective-c - 缩放 UIImage 以适应 UIButton 的问题

> ID：11345520
> 
> 赞同：1
> 
> 时间：2012-07-05T13:37:42.417
> 
> 标签：objective-c, ios, xcode, uiimage, cgimage

我有一组按钮和不同大小的图像。我想缩放每个图像，以便它以正确的纵横比适合按钮。缩放图像后，我将按钮的图像属性设置为缩放版本。

```
 UIImage *scaledImage = [image scaledForButton:pickerButton];
    [pickerButton setImage:scaledImage forState:UIControlStateNormal]; 
```

我的 scaledForButton 方法是在 UIImage 的类扩展中定义的。它看起来像这样：

```
- (UIImage *)scaledForButton:(UIButton *)button 
{
    // Check which dimension (width or height) to pay respect to and
    // calculate the scale factor
    CGFloat imageRatio = self.size.width / self.size.height; 
    CGFloat buttonRatio = button.frame.size.width / button.frame.size.height;
    CGFloat scaleFactor = (imageRatio > buttonRatio ? self.size.width/button.frame.size.width : self.size.height/button.frame.size.height);

    // Create image using scale factor
    UIImage *scaledimage = [UIImage imageWithCGImage:[self CGImage]
                                               scale:scaleFactor
                                         orientation:UIImageOrientationUp];
    return scaledimage;    
} 
```

当我在 iPad2 上运行它时，它工作正常并且图像缩放正确。但是，如果我在视网膜显示器（模拟器和设备上）上运行它，图像无法正确缩放并被挤压到按钮中。

任何想法为什么这只会发生在视网膜上？这几天我一直在挠头，但无法弄清楚。他们都运行相同的 iOS，我检查了比例和比例输出，无论设备如何，它们总是相同的。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T11:21:07.240

在这里找到答案：[UIButton 不听内容模式设置？](https://stackoverflow.com/questions/2950613/uibutton-doesnt-listen-to-content-mode-setting)

如果您正在设置 .contentMode，似乎您必须设置 UIButton 的 imageView 属性，而不仅仅是 UIButton，然后它才能正常工作。

iPad 3 上的问题正如 Herman 所建议的那样 - CGImage 仍然比 UIButton 大很多，所以即使它被缩小了，它仍然必须调整大小以适应按钮。

# c# - c# Request.Form 到字符串并返回到 Request.Form

> ID：11345522
> 
> 赞同：0
> 
> 时间：2012-07-05T13:37:54.453
> 
> 标签：c#, request.form

我正面临这个问题。我将请求表单作为字符串传递给 Web 服务，然后在其中尝试获取该字符串中的数据。我想我可以通过搜索每个子字符串来解决它，但我想知道是否有一种方法可以像 Request.Form 那样创建一个集合。

谢谢！！

你是对的，davenewza，对不起

字符串基本上看起来像这样

```
title_1=Mr&initials_1=James&surname_1=Smith&title_2=Mr&initials_2=Harry&surname_2=Smith&Address=TestAddress&City=Surrey& 
```

虽然完全贴出来会太长，但就是这样，只是传递ToString一个RequestForm的结果，而我想得到的是initials_1，surname_1，initials_2，Address的实际值.....所以最简单的方法是如果我可以将它转换回字典，不是吗？但不知道是否可以

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T13:54:21.593

像这样的事情应该这样做

```
string request = ...
Dictionary<string,string> param = new Dictionary<string,string>();
request.Split('&')
       .Select(o => o.Split('='))
       .ToList()
       .ForEach(p => param.Add(p[0],p[1])
); 
```

但是你必须确保只有参数只出现一次。否则，你可以做 p => param[p[0]] = p[1]，然后你会替换以前的版本......如果你想保留它们，你需要一个 Dictionary>

# screen-scraping - 屏幕抓取交互式 Web 应用程序

> ID：11345531
> 
> 赞同：0
> 
> 时间：2012-07-05T13:38:25.877
> 
> 标签：screen-scraping, web-crawler

*我需要从交互式*Web 应用程序中筛选某些信息；更重要的是，一旦该 Web 应用程序的用户提交（大概是发布）该表单，我必须从表单中筛选该信息。

我对此有什么选择或选择？

解决方案必须是微创的，即我不能依赖 Fiddler；它还需要占用空间小（即我不能安装太多的第 3 方应用程序或工具来完成此任务）。

将被屏幕抓取的数据将与在桌面系统的后台运行的 C# 应用程序绑定在一起。这是一个基于 Windows 的桌面系统。

只要满足上述约束条件，我对基于非 C# 的解决方案（例如 Ruby、Python 等）完全开放。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T23:23:17.513

对于 c# 有 htmlagilitypack，但如果是我，我会使用 ruby​​ mechanize 或 watir/selenium

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T07:31:34.907

我不确定我是否正确理解了您的要求，但既然您了解 Ruby，我相信使用 Mechanize 就足够了。它是一个非常强大的网络自动化库，也易于设置。

您可以查看这篇文章，了解如何在 Windows 上进行设置：

[http://webmites.org/ruby-mechanize-web-scraping-made-easy/](http://webmites.org/ruby-mechanize-web-scraping-made-easy/)

您可以在此处参考 Mechanize 文档：

[http://mechanize.rubyforge.org/GUIDE_rdoc.html](http://mechanize.rubyforge.org/GUIDE_rdoc.html)

# html - Alt 标记字体大小

> ID：11345532
> 
> 赞同：3
> 
> 时间：2012-07-05T13:38:26.857
> 
> 标签：html, email, font-size, alt

嘿，我目前正在建立一个电子邮件，我有我的标志

```
<img src="head/email-concept1_04.gif" width="172" height="61" border="0" alt="Test" title="Test" style="display:block; color:#ffffff !important;" /> 
```

我试图让`alt`标签的字体更大，但它似乎不起作用。

```
<img src="head/email-concept1_04.gif" width="172" height="61" border="0" alt="Test" title="Test" style="display:block; color:#ffffff !important; font-weight:bold !important; font-size:36px !important;" /> 
```

我已经看到它应用于我收到的电子邮件，例如来自 Pizza Express，只是无法弄清楚他们是如何做到的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-20T09:31:39.280

您可以简单地将图像标签放入容器中并为该特定容器实现字体样式。例子：

```
<!DOCTYPE HTML>
<html>
    <head>
        <style type="text/css">
            #font {
                width:400px;
                height:400px;
                margin:0 auto;
                font-size:16px;
                font-weight:bold;
                color:#ff0000;
                text-align:center;

            }
        </style>
    </head>
    <body>
        <div id="font">
            <img src="" alt="Customized Font" />
        </div>
    </body>
</html> 
```

# scala - 使用 Scala IDE 中的 SBT

> ID：11345534
> 
> 赞同：37
> 
> 时间：2012-07-05T13:38:34.147
> 
> 标签：scala, sbt, scala-ide

从 SBT 到 Scala-IDE 的路径在很多地方都有很好的描述：

1.  从 SBT 项目开始
2.  添加 SBT 插件定义： addSbtPlugin("com.typesafe.sbteclipse" % "sbteclipse-plugin" % "2.1.0-RC1")
3.  在 SBT 中运行“eclipse”命令
4.  使用已安装的 Scala-IDE 插件打开 Eclipse
5.  导入项目

这反过来又是什么？如果我在 Scala-IDE 中启动一个新项目，我可以添加一个 build.sbt 文件并以某种方式告诉 Eclipse 在运行应用程序时使用它吗？

抱歉，如果这对某些人来说似乎很明显，但我最近从 ItelliJ Idea 转移到 Scala-IDE，我不确定设置 Scala-IDE 以使用 SBT 和我的 sbt 配置文件。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-05T13:56:18.197

不，你不能这样做。方法如你所描述。然后，每当您对 build.sbt 进行更改（例如，新的 jar 依赖项）时，`eclipse`从 sbt 重新运行命令并在 Eclipse 中刷新项目，以便重新加载新生成的文件。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-07-20T16:44:12.377

作为一个经验丰富的 Eclipse 用户，我想知道同样的事情。惊讶于似乎没有人朝那个方向发展，我决定推出自己的项目。

[https://github.com/scalastuff/esbt](https://github.com/scalastuff/esbt)

安装插件，创建或修改 build.sbt 并获取依赖项，更新项目文件。

它对我有用，我每天都在使用它。但它并不完美或完成，我目前并没有为此付出很多努力。但请随时做出贡献！

# c# - 调试编码的 WorkflowServiceHost

> ID：11345536
> 
> 赞同：2
> 
> 时间：2012-07-05T13:38:39.750
> 
> 标签：c#, wcf, .net-4.0, workflow-foundation-4, workflow-services

是否可以调试编码的 Windows Workflow .Net 4.0.1 自托管 WorkflowServiceHost？我有

```
<system.web>
  <compilation debug="true" />
</system.web> 
```

在 app.config 文件中设置。但是，每当我设置断点时，调试器都会在构建 WorkflowServiceHost 对象时停止，而不是在单个工作流实例到达断点时停止。

通过“编码”，我的意思是工作流是在 C# 中指定的，而不是在可视化设计器中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T21:41:36.620

对于托管在不同容器中的各种流程图和顺序工作流，我处于类似的位置。我发现在测试工作流时，使用 Microsoft.Activities.UnitTesting 框架让我的生活变得更加轻松。该库以 nuGet 包的形式提供。[在这里](http://wf.codeplex.com/wikipage?title=Microsoft.Activities.UnitTesting%20Overview)完成详细信息

它使在“测试主机”中运行工作流变得非常容易，这些特殊类提供了运行工作流的能力，就像它们通常在工作流调用程序、工作流服务主机等中运行一样，但提供了大量功能，允许您调试、跟踪您的工作流程。

入门很简单，已经提供了大量示例（包括用于测试工作流服务托管工作流的示例）。

我强烈推荐使用这个库，它几乎没有学习曲线，而且它使测试工作流变得非常容易。

希望这可以帮助。

不过需要注意的是，如果您打算使用 .NET framework 4 Platform Update 1，请确保您已安装它。[此处](http://www.microsoft.com/en-us/download/details.aspx?id=11705)提供有关此更新的更多详细信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T12:05:24.750

您的工作流 dll 是否位于不同的项目中？

[MSDN](http://msdn.microsoft.com/en-us/library/bb483186.aspx)说

> 如果工作流宿主应用程序和工作流 DLL 位于不同的 Visual Studio 项目中，例如，当您使用工作流活动库时，必须将工作流 DLL 项目设置为 Visual Studio 解决方案启动项目，才能使用 F5 调试工作流。您还必须在工作流 DLL 项目的启动外部程序属性中设置宿主应用程序的路径。
> 
> 要在解决方案资源管理器中设置启动项目，请右键单击项目名称并选择设置为启动项目。要在“启动外部程序”属性中设置主机路径，请在“解决方案资源管理器”中双击工作流项目的“属性”节点，然后选择“调试”选项卡。在“启动操作”下，选择“启动外部程序”并输入托管您要调试的工作流的 .exe 文件的路径。
> 
> 如果宿主应用程序设置为启动项目，则只调用Visual Studio调试器进行调试；未调用适用于 Windows Workflow Foundation 的 Visual Studio 2010 调试器。如果使用 Visual Studio 调试器，则只命中 C# 或 Visual Basic 代码断点；在工作流设计器中设置的断点不会被命中。例如，如果使用适用于 Windows Workflow Foundation 的 Visual Studio 2010 调试器，则在设计器中设置的 ParallelActivity 活动上设置断点，但在使用 Visual Studio 调试器时不会。

看看对你有没有帮助。

# r - Windows下Rcpp生成的DLL调试（逐行）

> ID：11345537
> 
> 赞同：20
> 
> 时间：2012-07-05T13:38:40.163
> 
> 标签：r, debugging, dll, gdb, rcpp

最近我一直在尝试使用 Rcpp（内联）来生成 DLL，这些 DLL 在提供的 R 输入上执行各种任务。**给定一组特定的 R 输入，我希望能够逐行调试这些 DLL 中的代码。**（我在 Windows 下工作。）

为了说明，让我们考虑一个任何人都应该能够运行的特定示例......

下面的代码是一个非常简单的 cxx 函数，它只是将输入向量加倍。但是请注意，还有一个额外的变量`myvar`可以更改几次值但不影响输出 - 已添加此变量，以便我们能够看到调试过程何时正确运行。

```
library(inline)
library(Rcpp)

f0 <- cxxfunction(signature(a="numeric"), plugin="Rcpp", body='
    Rcpp::NumericVector xa(a);
    int myvar = 19;
    int na = xa.size();
    myvar = 27;
    Rcpp::NumericVector out1(na);
    for(int i=0; i < na; i++) {
        out1[i] = 2*xa[i];
        myvar++;
    }
    myvar = 101;
    return(Rcpp::List::create( _["out1"] = out1));
') 
```

在我们运行上面之后，输入命令

```
getLoadedDLLs() 
```

在 R 会话中显示 DLL 列表。列出的最后一个应该是上述过程创建的 DLL - 它有一个随机的临时名称，在我的例子中是

```
file7e61645c 
```

“文件名”列显示 cxxfunction 已将此 DLL 放在 location`tempdir()`中，对我来说目前是

```
C:/Users/TimP/AppData/Local/Temp/RtmpXuxtpa/file7e61645c.dll 
```

现在，调用 DLL 的明显方法是 via `f0`，如下

```
> f0(c(-7,0.7,77))

$out1
[1] -14.0   1.4 154.0 
```

但我们当然也可以使用以下`.Call`命令直接按名称调用 DLL：

```
> .Call("file7e61645c",c(-7,0.7,77))

$out1
[1] -14.0   1.4 154.0 
```

所以我已经达到了直接使用 R 输入（这里是 vector `c(-7,0.7,77)`）调用独立 DLL 并让它正确地将答案返回给 R的地步。

**不过，我真正需要的是一个用于逐行调试的工具（我猜是使用 gdb），它可以让我观察`myvar`设置为 19、27、28、29、30 和最后 101 的值代码进展。**上面的示例是故意设置的，因此调用 DLL 不会告诉我们有关 myvar 的任何信息。

澄清一下，这里的“获胜条件”是能够观察 myvar 的变化（看到值 myvar=19 将是第一步！）而不向代码主体添加任何其他内容。这显然可能需要更改代码的编译方式（是否有调试模式设置可以打开？），或者调用 R 的方式 - 但我不知道从哪里开始。如上所述，所有这些都是基于 Windows 的。

最后说明：在我的实验中，我实际上对 cxxfunction 的副本进行了一些小修改，以便输出 DLL - 以及其中的代码 - 接收用户定义的名称并位于用户定义的目录中，而不是临时名称和位置。但这并不影响问题的本质。我提到这一点只是为了强调如果有人轻推我，更改编译设置应该相当容易:)

为了完整起见，在上面的原始 cxxfunction 调用中设置 verbose=TRUE 显示编译参数为以下形式：

```
C:/R/R-2.13.2/bin/i386/R CMD SHLIB file7e61645c.cpp 2> file7e61645c.cpp.err.txt 
g++ -I"C:/R/R-213~1.2/include"    -I"C:/R/R-2.13.2/library/Rcpp/include"      -O2 -Wall  -c file7e61645c.cpp -o file7e61645c.o
g++ -shared -s -static-libgcc -o file7e61645c.dll tmp.def file7e61645c.o C:/R/R-2.13.2/library/Rcpp/lib/i386/libRcpp.a -LC:/R/R-213~1.2/bin/i386 -lR 
```

我的改编版本有一个与上面相同的编译参数，除了字符串“file7e61645c”被用户选择的名称（例如“testdll”）替换并且相关文件复制到更永久的位置。

在此先感谢您的帮助:)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-06T13:26:05.440

一些[Rcpp](http://dirk.eddelbuettel.com/code/rcpp.html)用户[对内联](http://cran.r-project.org/package=inline)包及其`cxxfunction()`. 是的，它确实非常有用，而且它肯定进一步推动了[Rcpp](http://dirk.eddelbuettel.com/code/rcpp.html)的采用，因为它使快速实验变得如此容易。是的，它允许我们在源代码中使用 700 多个单元测试。是的，我一直使用它来在这里演示示例，在[rcpp-devel 列表中](http://news.gmane.org/gmane.comp.lang.r.rcpp)，甚至在[演示文稿](http://dirk.eddelbuettel.com/bio/presentations.html)中。

但这是否意味着我们应该在每项任务中使用它？这是否意味着它没有“成本”，例如临时目录中的随机文件名等pp？Romain 和我在我们的文档中提出了不同的观点。

*最后，就目前而言，动态加载的 R 模块*的调试很困难。在（强制性）[Writing R Extensions](http://cran.r-project.org/doc/manuals/R-exts.html)中有一个完整的部分关于它，Doug Bates 曾经或两次发布了一篇关于如何通过[ESS](http://ess.r-project.org)和 Emacs 做到这一点的教程（尽管我总是忘记他在哪里发布它；曾经是[rcpp上的 IIRC -开发列表](http://news.gmane.org/gmane.comp.lang.r.rcpp)）。

**编辑 2012 年 7 月 7 日：**

这是您的一步一步：

*   （前言：我已经使用 gcc 和 g++ 很多年了，即使我添加了 -g，我也不总是将 -O2 变成 -O0。我真的不确定你是否需要它，但正如你所要求的那样...... .)

*   将环境变量 CXXFLAGS 设置为“-g -O0 -Wall”。有很多方法可以做到这一点，有些是平台相关的（例如 Windows 控制面板），因此不太通用和有趣。我`~/.R/Makevars`在 Windows 和 Unix 上使用。您可以使用它，或者您可以覆盖 R 的系统范围 $RHOME/etc/Makeconf 或者您可以使用 Makeconf.site 或 ... 查看完整文档 --- 但正如我所说，`~/.R/Makevars`这是我的首选方式，因为它不是干扰 R 之外的编译。

*   现在每个编译 R 通过 R CMD SHLIB, R CMD COMPILE, R CMD INSTALL, ... 将使用。因此，*您使用内联或本地包不再重要*。继续内联...

*   对于其余部分，我们主要遵循“编写 R 扩展”的“第 4.4.1 节在动态加载的代码中查找入口点”：

*   使用 R -d gdb 启动另一个 R 会话。

*   编译你的代码。为了

> ```
> fun <- cxxfunction(signature(), plugin="Rcpp", verbose=TRUE, body='
>    int theAnswer = 42;
>    return wrap(theAnswer);
> ') 
> ```

我明白了

```
[...]
Compilation argument:
 /usr/lib/R/bin/R CMD SHLIB file11673f928501.cpp 2> file11673f928501.cpp.err.txt 
 ccache g++-4.6 -I/usr/share/R/include -DNDEBUG   -I"/usr/local/lib/R/site- library/Rcpp/include"   -fpic  -g -O0 -Wall -c file11673f928501.cpp -o file11673f928501.o
g++-4.6 -shared -o file11673f928501.so file11673f928501.o -L/usr/local/lib/R/site-library/Rcpp/lib -lRcpp -Wl,-rpath,/usr/local/lib/R/site-library/Rcpp/lib -L/usr/lib/R/lib -lR 
```

*   调用 eg`tempdir()`来查看临时目录，cd 到上面使用的这个临时目录和上面`dyn.load()`构建的文件：

> ```
>  dyn.load("file11673f928501.so") 
> ```

*   现在通过发送中断信号来挂起 R（在 Emacs 中，从下拉菜单中选择一个简单的选项）。

*   在 gdb 中，设置一个断点。上面的单个作业对我来说变成了第 32 行，所以

> ```
> break file11673f928501.cpp 32
> cont 
> ```

*   回到 R，调用函数：

    > 乐趣（）

*   Presto，在我们想要的断点处的调试器中：

> ```
> R> fun()
> 
> Breakpoint 1, file11673f928501 () at file11673f928501.cpp:32
> 32      int theAnswer = 42;
> (gdb) 
> ```

*   现在“只是”由你来发挥 gdb 的魔力

现在，正如我在第一次尝试中所说的那样，通过一个`Rcpp.package.skeleton()`可以为您编写的简单程序包（在我看来），这一切都会变得更容易，因为您不必处理随机目录和文件名。但各有各的...

# firefox-addon - 从inner-window-destroyed获取outerWindowID

> ID：11345543
> 
> 赞同：1
> 
> 时间：2012-07-05T13:39:16.143
> 
> 标签：firefox-addon, firefox-addon-sdk

我正在构建的 Firefox 扩展的一部分将“内窗”的 ID 销毁，如下所示 -

```
observer.add('inner-window-destroyed', function (subject, data) {
    var innerWindowID = subject.QueryInterface(Ci.nsISupportsPRUint64).data;
    console.log('destroyed: '+innerWindowID);
}) 
```

这工作正常，但我想知道该观察者是否也可以获取该内部窗口的外部窗口的 ID。

我可以在我的代码中从另一个通道观察者那里获得一个外窗 ID，但是当内部窗口被破坏时，我不确定如何从上面的观察者那里获得它。

希望这是有道理的...

我已经参考了这些页面上的详细信息，但无法弄清楚 -

[https://developer.mozilla.org/en/Observer_Notifications#Windows](https://developer.mozilla.org/en/Observer_Notifications#Windows)

[https://developer.mozilla.org/en/Code_snippets/Windows#Uniquely_identifying_DOM_windows](https://developer.mozilla.org/en/Code_snippets/Windows#Uniquely_identifying_DOM_windows)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T14:07:28.893

观察者只接收窗口 ID，此时不再可能访问窗口本身。但是，此消息之前总是有一个`dom-window-destroyed`获取活动窗口实例的通知（`outer-window-destroyed`通知也是如此）。因此，您*也可以*注册您的观察者以获取`dom-window-destroyed`通知，并按照以下方式进行操作：

```
var innerWindows = {};

...

observer.add("dom-window-destroyed", function(subject, data)
{
  var util = subject.QueryInterface(Components.interfaces.nsIInterfaceRequestor)
                    .getInterface(Components.interfaces.nsIDOMWindowUtils);
  try
  {
    var innerWindow = util.currentInnerWindowID;
    var outerWindow = util.outerWindowID;
    innerWindows[innerWindow] = outerWindow;
  } catch (e) {}  // Ignore NS_ERROR_NOT_AVAILABLE
});
observer.add("inner-window-destroyed", function(subject, data)
{
  var innerWindow = subject.QueryInterface(Ci.nsISupportsPRUint64).data;
  if (innerWindow in innerWindows)
  {
    var outerWindow = innerWindows[innerWindow];
    delete innerWindows[innerWindow];
    console.log("destroyed: " + innerWindow + " (" + outerWindow + ")");
  }
}); 
```

我没有尝试过，但这看起来会起作用。

# java - 创建空对象

> ID：11345544
> 
> 赞同：2
> 
> 时间：2012-07-05T13:39:20.763
> 
> 标签：java, optimization

在 java 中，经常有对象仅用于包装函数并且没有自己的任何状态。例子：

```
class Foo {
   void foo () {
      System.out.println("foo");
   }

   static public void main(String[] arg) {
      Foo foo = new Foo();
      foo.foo();
   }
} 
```

我想知道表达式`new Foo()`是否针对 C++ 中的函数指针赋值进行了优化。这似乎是一件显而易见的事情，但当我想到它时，编译器将不得不检查`foo`不用于同步的东西（可能还有其他东西？）。标准对此有任何说明吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:45:09.240

标准（即 VM 规范和 JLS）对此没有任何说明，完全取决于 VM 实现来处理优化。

所有标准指定的是一组需要观察的不变量。如果 VM 保证您所做的事情**看起来像**创建一个对象，然后调用一个方法，然后处理它，它就可以做它想做的事情。

尽管优化的确切方式可能会有所不同，但这种低级别的东西很少会成为瓶颈。但是由于优化是在运行时完成的，你可以合理地确定它们只有在你的代码被大量调用时才会被执行；不经常使用的代码被解释而不是编译成机器代码。（但即使这可能会从 VM 更改为 VM，并且可能取决于特定的命令行选项。）在您的情况下，可能会发生的是，在大量运行后，VM 完全内联该方法，摆脱了对象创建和方法调用。

您绝对可以“优化”您的代码的一件事是声明`Foo`（和`foo()`）final。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T13:43:27.907

据说，创建一个对象只需要大约 10 条指令。所以这是一个非常非常便宜的手术。

从[这里](http://www.ibm.com/developerworks/java/library/j-jtp01274/index.html)

> Sun 估计大约十个机器指令的分配成本。

所以创建一个新对象几乎没有开销。如果您将所有内容都设为静态并仅将其放在一个类中，那么这可能很快就会变得混乱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T13:43:33.293

如果您没有任何状态，那么您可以制作这些方法`static`。我不认为 java 编译器会像你想的那样优化它，即使这会改变语义。如果一个对象是通过创建的，`new`那么把它变成别的东西会改变语义。

我认为根本没有使用函数指针赋值的概念。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T13:43:55.693

想象一个场景，当您有大量静态辅助方法时。如果你在你想使用它们的类中实现它们，你的类会越来越大。

但是，如果您将它们写在单独的单例或静态类中，那么您只需要保存一个引用，并通过它调用方法，因此您可以在使用多个实例时节省内存。

我可能错了，但这是我首先想到的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-05T13:44:16.220

new Foo() 将创建一个新对象

在 Java 中，只有对象、数组和原语，仅此而已

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-05T13:45:09.610

不知道标准是怎么说的。但我认为您提到的任何优化都没有完成。为什么我认为我很确定？因为它会破坏 java.lang.Class 功能。来自 API 文档：

*Class 类的实例表示正在运行的 Java 应用程序中的类和接口。*

# html - 页面中的浮动链接

> ID：11345546
> 
> 赞同：1
> 
> 时间：2012-07-05T13:39:31.230
> 
> 标签：html, internet-explorer-8, css-float

我想制作浮动链接，无论用户向上/向下滚动页面，它都会显示在网页中。

```
<div id="valids" style="position: fixed; bottom: 5px; left: 5px;">
<a href="http://validator.w3.org/check?uri=referer" class="valid">
<img alt="Valid XHTML 1.0" src="http://www.w3.org/Icons/valid-xhtml10-blue" style="border: 0pt none ; width: 88px; height: 31px;"/></a>
<a href="http://jigsaw.w3.org/css-validator/validator?uri=http://www.reapercharlie.com" class="valid">
<img alt="Valid CSS 2.1" src="http://jigsaw.w3.org/css-validator/images/vcss-blue" style="border: 0pt none ; width: 88px; height: 31px;"/></a>
</div> 
```

这在 Firefox、Chrome、IE 9 及更高版本中完美显示。但我需要让它至少与 IE 8 和 IE 7 一起工作。

在 IE 8 和 IE 7 中，内容随页面内容上升。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T13:44:43.607

这篇文章[如何让“位置：固定”css 在 IE 7+ 中使用 TRANSITIONAL doctype 工作？](https://stackoverflow.com/questions/1628265/how-to-get-positionfixed-css-to-work-in-ie-7-with-transitional-doctype)建议你需要添加一个doctype来让IE7/8触发标准模式，你试过吗？

如果你不想搞乱 doctypes，你总是可以尝试使用 jQuery 而不是[http://jsfiddle.net/wRSZ2/](http://jsfiddle.net/wRSZ2/)。

```
$(window).scroll(function() {
    var scrollTop = $(window).scrollTop();
    $("#mybox").css("top", scrollTop + "px");
});​ 
```

上面的代码，您可以简单地连接到窗口滚动事件并手动滚动框与窗口一起。对我来说看起来不错，但我还没有在 IE 7/8 上测试过！

希望能帮助到你！

# spring - Spring Integration - 最大吞吐量消费者

> ID：11345557
> 
> 赞同：0
> 
> 时间：2012-07-05T13:39:57.877
> 
> 标签：spring, message-queue, messaging, spring-integration, event-driven-design

Spring Integration 元素的配置（如果有）将支持以下模型：

*   一个消息队列，代表传入的工作
*   从该队列读取的多个消费者（一条消息只需要发送给一个消费者）
*   每个消费者只有在无事可做时才进行轮询；如果它当前正在处理消息，则不要轮询。如果它没有工作，则每隔 X 秒轮询一次以查看是否有新工作到达。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T14:06:37.967

假设您的意思是使用 JMS，

```
<jms:message-driven-channel-adapter/> 
```

查看concurrent-consumers、max-concurrent-consumers、idle-consumer-limit、idle-task-execution-limit等属性。

消费者管理全部由底层核心 Spring DefaultMessageListenerContainer 完成。

# java - 单个 EditText 字段上的 Android 多个 EditorActionListener

> ID：11345561
> 
> 赞同：0
> 
> 时间：2012-07-05T13:40:12.910
> 
> 标签：java, android

我为单个 EditText 字段定义了多个动作侦听器，一个在 Activity 中：

```
editText.setOnEditorActionListener(this); 
```

另一个在视图定义中：

```
editText.setOnEditorActionListener(new EditText.OnEditorActionListener() {...}); 
```

有没有办法让两个听众都跑？现在只有 Activity 中的一个运行。我无法更改（简化/重构）代码以使所有这些都在一个地方（因为它非常复杂）。提前谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T13:49:43.637

当你设置一个新的 OnEditorActionListener 时，添加对前一个 OnEditorActionListener 的引用

在新的 OnEditorActionListener 调用前一个。

# c# - 没有结果，因为 System.dll 中发生了 SocketException

> ID：11345564
> 
> 赞同：0
> 
> 时间：2012-07-05T13:40:20.850
> 
> 标签：c#, networking, ip

我正在编写一个应用程序来检索给定网络上所有计算机的名称和 IP 地址。这是为了在远程连接到计算机时使用技术支持。我仍在开发并且仅在我自己的网络上进行测试，但是当我运行它时，我没有得到任何结果，这会显示在输出中。

```
A first chance exception of type 'System.Net.Sockets.SocketException' occurred in System.dll 
```

我的代码如下：

```
public List<NetworkComputer> getComputers( string domain )
        {
            List<NetworkComputer> computers = new List<NetworkComputer>();

            DirectoryEntry entry = new DirectoryEntry( domain );
            DirectorySearcher searcher = new DirectorySearcher( entry );
            searcher.Filter = ("(objectClass=computer)");
            searcher.SizeLimit = int.MaxValue;
            searcher.PageSize = int.MaxValue;

            foreach( SearchResult result in searcher.FindAll() )
            {
                if( result.GetDirectoryEntry().Name.StartsWith( "CN=" ) )
                {
                    IPAddress ipAddress = null;

                    ipAddress = Dns.GetHostAddresses( result.GetDirectoryEntry().Name.Remove( 0, "CN=".Length ) )[0];

                    computers.Add( new NetworkComputer( result.GetDirectoryEntry().Name.Remove( 0, "CN=".Length ), ipAddress ) );
                }
            }

            return computers;
        }
    }
} 
```

如果我在不尝试获取 IP 地址的情况下运行它，我会得到一个没有问题的所有计算机的列表。这是导致我出现问题的IP地址。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-01T05:15:53.367

如果您将连接字符串设置为 localhost，只需更改为“127.0.0.1”，错误就会被删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T14:17:59.570

在这里查看这篇文章

[SocketException：地址与请求的协议不兼容](https://stackoverflow.com/questions/2370388/socketexception-address-incompatible-with-requested-protocol)

这解释了问题的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-22T09:39:59.020

在我的例子中，这个 exe 的另一个实例已经准备好运行了。当我从任务管理器中关闭它时，它就解决了。

# javascript - 单击以使用 jquery 更改背景图像

> ID：11345571
> 
> 赞同：-1
> 
> 时间：2012-07-05T13:40:41.287
> 
> 标签：javascript, jquery, slider

我是否可以编辑以下 jQuery 代码，以便用户可以选择背景图像，而不是重复循环的图像？

我不太清楚如何将按钮选择器附加到每个图像。这是我追求[Sprout 主题](http://demo.wpbandit.com/sprout/demo/page-layouts/default/)的效果。

谢谢。

```
jQuery(function () {

    var imgArr = new Array( // relative paths of images
    'images/k2-in-skies.jpg', 'images/k2.jpg', 'images/kunhar-river.jpg', 'images/mitre-peak-baltoro.jpg', 'images/musa-ka-musalla.jpg', 'images/nanga-parbat.jpg', 'images/naran-valley.jpg');

    var preloadArr = new Array();
    var i;

    /* preload images */
    for (i = 0; i < imgArr.length; i++) {
        preloadArr[i] = new Image();
        preloadArr[i].src = imgArr[i];
    }

    var currImg = 1;
    var intID = setInterval(changeImg, 6000);

    /* image rotator */

    function changeImg() {
        $('#bg-imagesq').animate({
            opacity: 0
        }, 1000, function () {
            $(this).css('background', 'url(' + preloadArr[currImg++ % preloadArr.length].src + ') top center no-repeat');
        }).animate({
            opacity: 1
        }, 1000);
    }

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T13:49:06.330

当前，您使用一个名为`#bg-imagesq`. 您需要做的是更改以提取所有带有 img 标签的元素`$('img')`。如果您不想将代码应用于当前页面中的所有图像，则为特定图像添加一个虚拟 css 类并将其更改为`$('.bg-imagesCssClass')`（例如）。

# iphone - 如何自动化 Xcode 4 进行查找和替换（同时使用文本和正则表达式样式）？

> ID：11345573
> 
> 赞同：0
> 
> 时间：2012-07-05T13:40:48.657
> 
> 标签：iphone, xcode, xcode4, applescript

我正在尝试使用 AppleScript 自动手动查找和替换，但没有运气。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T05:01:12.427

没有直接的方法可以做到这一点。Xcode 4 中的脚本没有我们许多人希望的那么健壮。您可以使用 GUI 脚本来完成。这是一个示例脚本，用于设置查找和替换文本，然后单击“全部替换”按钮。显然，您会想要修改它以供自己使用，但它说明了原则。

```
tell application "Xcode"
    activate
end tell

tell application "System Events"
    tell process "Xcode"
        keystroke "f" using {command down, option down}
        set value of text field 1 of group 1 of splitter group 1 of group 2 of splitter group 1 of group 1 of front window to "<string>"
        set value of text field 2 of group 1 of splitter group 1 of group 2 of splitter group 1 of group 1 of front window to "<string2>"
        click button "Replace All" of group 1 of splitter group 1 of group 2 of splitter group 1 of group 1 of front window

    end tell
end tell 
```

# c# - 为什么我可以更改私有静态只读字段但不能更改公共字段？

> ID：11345583
> 
> 赞同：4
> 
> 时间：2012-07-05T13:41:06.793
> 
> 标签：c#, .net, constructor, readonly, static-constructor

有这样的代码：

```
 public static readonly bool MaximumRecipientsReached;
    private static readonly IList<EmailAddress> Contacts;

    static AdditionalRecipient()
    {
        Contacts = AnotherClass.Contacts; //works
    }

    public AdditionalRecipient()
    {
        MaximumRecipientsReached = true; //works not
    } 
```

为什么我可以更改私有静态只读字段但不能更改公共字段？

PS：当然我正在使用属性。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-05T13:42:31.627

在您的第一个示例中，您正在静态构造函数中更改它，这是允许的，如果您在任何其他静态方法/属性中更改它，这将是编译器错误。

在第二个示例中，您试图更改`static readonly`非静态构造函数中的成员，这是不允许的。

您只能更改构造函数`static readonly`中的成员`static`。这样想，`static`构造函数运行一次，然后为每个实例调用实例构造函数。`readonly`如果每个实例都可以更改它，则该属性不会很好。

当然，您可以`static` `readonly`在构造函数中更改非实例成员：

```
public static readonly bool MaximumRecipientsReached = false;
public readonly bool MyInstanceReadonly = false;

static AdditionalRecipient()
{
    // static readonly can only be altered in static constructor
    MaximumRecipientsReached = true; 
}

public AdditionalRecipient()
{
    // instance readonly can be altered in instance constructor
    MyInstanceReadonly = true;  
} 
```

另外，我对您的“PS：我当然正在使用属性”感到困惑。不能声明属性`readonly`，如果您希望这些是属性并且是`readonly`-ish，您需要制作它们`private set`- 当然，除非您使用的是支持字段。我提出这个的主要原因是因为使用带有私有集的属性将允许您执行代码尝试执行的操作，因为类本身可以更改任何方法或构造函数中的属性（静态或实例），但代码课外不能。

```
// public getters, private setters...
public static bool MaximumRecipientsReached { get; private set; }
public static IList<EmailAddress> Contacts { get; private set; } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T13:43:07.220

它与公共与私有无关，而是静态与非静态构造函数。

如果您尝试在非静态构造函数中设置静态只读项（如第二种情况），编译器会抱怨：

> 不能分配静态只读字段（静态构造函数或变量初始化程序除外）

这是因为静态成员在第一次访问该类型时被初始化，这可能在任何常规构造函数被调用之前。从实例构造函数中修改静态只读成员是没有意义的，因此编译器会防范它。

只需将相关成员设为非静态或将初始化放入静态构造函数即可。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T13:43:16.993

MaximumRecipientsReached 是只读静态的，您正试图从非静态构造函数中设置它。您只能在静态构造函数中设置它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T13:45:39.737

这是因为静态构造函数只能与其他静态成员一起使用，而非静态构造函数需要实例化对象。因此，如果您实例化该类但该类具有静态构造函数，则该构造函数将永远不会被调用。

# android - 寻找 PN544 NFC 芯片的用户手册或 eeprom 指令集

> ID：11345586
> 
> 赞同：3
> 
> 时间：2012-07-05T13:41:28.243
> 
> 标签：android, nfc, rfid, eeprom

我想在我的 Galaxy Nexus 手机上使用[mfoc 库](http://code.google.com/p/nfc-tools/)，但 NFC Android API 中缺少一些方法。所以我想实现这些方法并构建我自己的 ROM。

使用 NFC pn512 芯片，可以使用 ManualRCVReg 寄存器的 ParityDisable 位关闭自动奇偶校验生成。[用户手册](http://www.nxp.com/documents/data_sheet/PN512.pdf)给出了所有的PN12 寄存器地址。

使用 pn533，还可以通过 eeprom 配置芯片，[用户手册](http://www.nxp.com/documents/user_manual/157830_PN533_um080103.pdf)中描述了一些地址/数据。

在android源码libnfc-xp的代码中看到pn544芯片在device/samsung/tuna/nfc/nfc_hw.c中也配置了一些eeprom设置，但是找不到所有的PN544寄存器地址和一些nfc_hw.c 中的注释不清楚或缺失）。

那么，您认为可以通过其 eeprom 设置来配置 PN544 芯片的奇偶校验处理吗？你知道我需要写的地址/数据吗？

最好有一份可能的 eeprom 设置列表或 PN544 芯片的用户手册。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T16:37:11.393

have a look to [http://www.nfc.cc/technology/nxp-nfc-chips/](http://www.nfc.cc/technology/nxp-nfc-chips/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T19:43:11.667

我认为 PN544 用户手册仅在 NDA 下可用。除此之外，不可能使用 PN544 执行您想要执行的那种分析。主机接口只处理完整的字节，这对于该目的来说不够详细。

# javascript - jQuery Cookie 插件许可证

> ID：11345591
> 
> 赞同：-4
> 
> 时间：2012-07-05T13:41:39.973
> 
> 标签：javascript, jquery, jquery-plugins, cookies

我目前正在开发一个包含 jquery.cookie.js 插件的项目。问题是法律团队有一个问题，因为他们声称它是在 GPLv3 许可下，但我认为它在 GPLv2 下是可以接受的。

我的问题究竟是 jQuery cookie 插件 ((c)2006) 在哪个许可证下运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T13:43:39.023

[在https://github.com/carhartl/jquery-cookie/blob/master/jquery.cookie.js](https://github.com/carhartl/jquery-cookie/blob/master/jquery.cookie.js)找到的 jQuery.cookie 插件在MIT 和 GPL2 许可下发布（您可以选择）。

# c# - TDD - 为迭代/使用集合的方法编写测试

> ID：11345592
> 
> 赞同：14
> 
> 时间：2012-07-05T13:41:41.020
> 
> 标签：c#, collections, tdd

作为 TDD 的新手，我正在努力编写处理集合的单元测试。例如，目前我正在尝试提出一些测试方案来基本上测试以下方法

```
int Find(List<T> list, Predicate<T> predicate); 
```

`list`该方法应返回列表中与谓词匹配的第一项的索引`predicate`。到目前为止，我能够提出的唯一测试用例是

*   `list`不包含任何物品时- 返回`-1`
*   当`list`包含 1 个匹配项时`predicate`- 返回`0`
*   当`list`包含 1 个不匹配的项目时`predicate`- 返回`-1`
*   当`list`包含两个都匹配的项目时`predicate`- 返回`0`
*   当`list`包含 2 个项目时，第一个匹配`predicate`- 返回`0`
*   ETC...

正如您所看到的，这些测试用例数量众多，并且不能令人满意地测试我真正想要的实际行为。我心中的数学家想要做某种 TDD-by-induction

*   `list`不包含任何物品时- 返回`-1`
*   当`list`包含 N 项时，调用`predicate`第一项，然后递归调用`Find`剩余的 N-1 项

然而，这引入了不必要的递归。对于上述方法，我应该在 TDD 中编写什么样的测试用例？

* * *

顺便说一句，我真正尝试测试的方法只是`Find`，仅针对特定的集合和谓词（我可以独立编写测试用例）。当然，我应该有一种方法可以避免编写上述任何测试用例，而是简单地测试该方法是否使用正确的参数调用了其他一些`Find`实现（例如）？[`FindIndex`](http://msdn.microsoft.com/en-us/library/x1xzf2ca.aspx)

请注意，无论如何，我仍然想知道*如何*进行单元测试`Find`（或其他类似的方法），即使事实证明在这种情况下我不需要。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-05T14:05:46.313

如果 find() 正在工作，那么它应该返回与谓词匹配的第一个元素的索引，对吗？

因此，您需要对空列表情况进行测试，对不匹配元素情况进行测试，对匹配元素情况进行测试。我会觉得这就足够了。在 TDDing find() 的过程中，我可能会编写一个特殊的第一个元素通过案例，我可以很容易地伪造它。我可能会写：

```
emptyListReturnsMinusOne()
singlePassingElementReturnsZero()
noPassingElementsReturnsMinusOne()
PassingElementMidlistReturnsItsIndex() 
```

并期望该序列将推动我的正确实施。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T05:53:03.273

> 当恐惧被无聊取代时停止测试——肯特贝克

在这种情况下，给定通过测试的概率是多少

*   “当列表包含 2 个都匹配谓词的项目时 - 返回 0”

下面的测试会失败吗？

*   “当列表包含 5 个都匹配谓词的项目时 - 返回 0”

我会写前者，因为我担心这种行为不适用于多个元素。但是，一旦 2 工作，为 5 编写另一个只是乏味（​​除非在生产代码中硬编码假设 2.. 它应该被重构掉。即使不是，我也只需将现有测试修改为有 5 而不是 2 并使其适用于一般情况）。

因此，为明显不同的事物编写测试。在这种情况下，列出（零、一、多个）元素和（包含/不包含）操作数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T14:08:29.610

根据您对`Find`方法的要求，这是我要测试的内容：

1.  `list`is `null`- 抛出`ArgumentNullException`或返回`-1`
2.  `list`不包含任何物品 - 退货`-1`
3.  `predicate`is `null`- 抛出`ArgumentNullException`或返回`-1`
4.  `list``predicate`包含一项与- 返回不匹配的项目`-1`
5.  `list`包含一项与`predicate`- 返回匹配的项目`0`
6.  `list`包含多个项目，但没有项目匹配`predicate`- 返回`-1`
7.  `list`包含匹配的多个项目`predicate`- 返回第一个匹配项的索引

基本上，您将首先测试结束情况 - 空参数、空列表。之后，进行一项测试。最后，测试多个项目的匹配和不匹配。

对于`null`参数，您可以`-1`根据自己的喜好抛出异常或返回。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T14:14:00.273

不要更改**列表**，更改**谓词**。

考虑如何调用该方法。当有人调用该`Find`方法时，他们已经有了一个列表并且需要考虑谓词。所以想出一些很好的例子来证明 的行为`Find`：

**示例：**对所有测试用例 使用相同的列表`3, 4`可以很容易理解：

1.  谓词`< 5`匹配两个数字（返回`1`）
2.  谓词`== 3`匹配`3`（返回`0`）
3.  谓词`== 0`不匹配（返回`-1`）

这实际上是您指定行为所需的全部内容，并且通过更改谓词而不是列表，您可以提供如何使用该`Find`方法的良好示例。包含零个、一个或两个元素的列表并没有真正改变方法的行为，`Find`也没有真正改变方法的使用方式。用你的测试用例遵循 DRY，专注于指定行为而不是证明代码是正确的，否则你最终将把所有的时间都花在编写测试上。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-06T06:13:40.300

试着回答你的问题：我对 Rhino 模拟没有任何经验，但我相信它应该有类似于 FakeItEasy(?) 的东西：

```
var finder = A.Fake<IMyFindInterface>();

// ... insert code to call IMyFindInterface.Find(whatever) here

A.CallTo(() => finder.find(A<List>.That.Matches(
                  x => x.someProperty == someValue))).MustHaveHappened(); 
```

通过将 Find() 的实现放在接口后面，然后将使用该接口的方法传递一个假的，您可以检查该方法是否使用某些参数调用。（如果预期的调用未完成， *MustHaveHappended()将导致测试失败）。*

由于您知道*IMyFindInterface*的实际实现只是将调用传递给您已经信任的实现，因此这应该是一个足够好的测试来验证您正在测试的代码是否以正确的方式调用 Find 实现。

当您只想确保您的代码（您正在测试的单元）通过抽象出该组件本身以正确的方式调用您已经信任的某个组件时，可以使用相同的过程 - 这正是我们在单元测试时想要的。

# hudson - 将 Hudson 插件集成到 Redmine

> ID：11345595
> 
> 赞同：0
> 
> 时间：2012-07-05T13:41:59.873
> 
> 标签：hudson, redmine, redmine-plugins

我想将 Hudson 插件添加到 Redmine，但我有一些错误。

```
Mysql::Error: Table 'redmine_default.hudson_settings' doesn't exist: SELECT * FROM `hudson_settings` WHERE (project_id = 3)  LIMIT 1

RAILS_ROOT: /usr/share/redmine
Application Trace | Framework Trace | Full Trace

/usr/lib/ruby/vendor_ruby/active_record/connection_adapters/abstract_adapter.rb:227:in `log'
/usr/lib/ruby/vendor_ruby/active_record/connection_adapters/mysql_adapter.rb:324:in `execute'
/usr/lib/ruby/vendor_ruby/active_record/connection_adapters/mysql_adapter.rb:639:in `select'
/usr/lib/ruby/vendor_ruby/active_record/connection_adapters/abstract/database_statements.rb:7:in `select_all_without_query_cache'
/usr/lib/ruby/vendor_ruby/active_record/connection_adapters/abstract/query_cache.rb:60:in `select_all'
/usr/lib/ruby/vendor_ruby/active_record/connection_adapters/abstract/query_cache.rb:81:in `cache_sql'
/usr/lib/ruby/vendor_ruby/active_record/connection_adapters/abstract/query_cache.rb:60:in `select_all'
/usr/lib/ruby/vendor_ruby/active_record/base.rb:665:in `find_by_sql'
/usr/lib/ruby/vendor_ruby/active_record/base.rb:1582:in `find_every'
/usr/lib/ruby/vendor_ruby/active_record/base.rb:1539:in `find_initial'
/usr/lib/ruby/vendor_ruby/active_record/base.rb:617:in `find'
/usr/share/redmine/vendor/plugins/redmine_hudson/app/models/hudson_settings.rb:27:in `load'
/usr/share/redmine/vendor/plugins/redmine_hudson/app/controllers/hudson_controller.rb:110:in `find_settings'
/usr/lib/ruby/vendor_ruby/active_support/callbacks.rb:178:in `send'
/usr/lib/ruby/vendor_ruby/active_support/callbacks.rb:178:in `evaluate_method'
/usr/lib/ruby/vendor_ruby/active_support/callbacks.rb:166:in `call'
/usr/lib/ruby/vendor_ruby/action_controller/filters.rb:225:in `call'
/usr/lib/ruby/vendor_ruby/action_controller/filters.rb:629:in `run_before_filters'
/usr/lib/ruby/vendor_ruby/action_controller/filters.rb:615:in `call_filters'
/usr/lib/ruby/vendor_ruby/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/usr/lib/ruby/vendor_ruby/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/usr/lib/ruby/vendor_ruby/active_support/core_ext/benchmark.rb:17:in `ms'
/usr/lib/ruby/1.8/benchmark.rb:308:in `realtime'.... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T07:08:58.587

对于那些寻找答案的人，运行这个：

```
$ rake db:migrate_plugins RAILS_ENV="production" 
```

或者

```
$ bundle exec rake db:migrate_plugins RAILS_ENV="production" 
```

# objective-c - 在 IOS 5.0 中创建可扩展的表视图

> ID：11345601
> 
> 赞同：3
> 
> 时间：2012-07-05T13:42:36.340
> 
> 标签：objective-c, uitableview, expand

如何在 IOS 5.0 中创建可扩展的 tableview。如果有人知道帮助我。在此先感谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T13:49:08.840

这向您展示了如何展开/折叠表视图部分[http://www.cocoanetics.com/2011/03/expandingcollapsing-tableview-sections/](http://www.cocoanetics.com/2011/03/expandingcollapsing-tableview-sections/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-11T20:04:09.570

JKExpandTableView 是一个实现可扩展表格视图（UITableView 的子类）的开源库。请务必检查提供的示例项目。：http: [//jackkwok.github.io/JKExpandTableView/](http://jackkwok.github.io/JKExpandTableView/)

![截屏](../Images/7be98ec31f746d96c574fbd379564460.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-23T02:42:48.057

查看[SubTable](https://github.com/ajkoshy7/SubTable)，它为您处理扩展/折叠，并且很容易插入并开始自定义

# java - 从文件中检测特定的字符串值，Java

> ID：11345602
> 
> 赞同：2
> 
> 时间：2012-07-05T13:42:36.803
> 
> 标签：java

我正在尝试检测外部 txt 文件中的特定字符串值。在这种情况下，我试图检测 %%。

```
public void read(){
    while(x.hasNext()){
        String a = x.next();
        System.out.println(a);
        if(a == "%%"){
            System.out.println("Found the end");
        }
        else{
            System.out.println("No end");
        }

    }
} 
```

它正在正确读取 x，因为它打印出文件中的单词，但它在每个单词之后都说“No end”，甚至是“%%”。我确定我在某个地方犯了一些愚蠢的错误，我只是找不到它。x 看起来像这样：苹果橙 %% 葡萄。对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T13:47:02.487

尝试

```
 if(a.trim().equals("%%"))
    {
        System.out.println("Found the end");
    } 
```

这应该消除字符串末尾的任何多余空格，并确保进行良好的比较！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T13:44:18.737

您必须`String::equals()`用于比较，但不能使用 operator `==`。在您的情况下，`==`运算符会比较 String 的地址位置和字符串文字`%%`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T13:46:12.913

您应该使用`equals`method 而不是`==`which check for reference 使用逻辑平等。

```
if(a.equals("%%")){
        System.out.println("Found the end");
    }
    else{
        System.out.println("No end");
    } 
```

# wpf - 在运行时 WPF 将子控件替换为其他控件

> ID：11345609
> 
> 赞同：0
> 
> 时间：2012-07-05T13:42:57.767
> 
> 标签：wpf, silverlight

我有一个堆栈面板，我在运行时添加控件。

如何用相同位置的另一个控件替换特定控件？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T15:51:10.097

`StackPanel`有一个`Children`属性，它是一个[`UIElementCollection`](http://msdn.microsoft.com/en-us/library/system.windows.controls.uielementcollection.aspx)对象。如果您在运行时添加内容，我假设您已经`Add`在该集合上调用该方法。您可以调用`RemoveAt`该集合以删除特定的集合，然后`Insert`将新对象放入同一索引中。

# ruby-on-rails - RefineryCMS - 使用页面部分复制页面

> ID：11345613
> 
> 赞同：0
> 
> 时间：2012-07-05T13:43:06.350
> 
> 标签：ruby-on-rails, refinerycms

我在管理员中创建了一个页面说“游览”，其中包含几个页面部分。我想制作更多类似于创建的页面的页面，例如“tour1”、“tour2”等。有没有办法复制它而不是手动添加页面及其页面部分？

希望我的问题很清楚。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T07:05:00.137

Refinery 目前不存在复制页面功能。但是添加起来并不难，我已经为我制作的自定义引擎做了类似的事情，其中​​“事件”有页面部分，我让管理员复制它们。在您的情况下，只需覆盖 Pages 控制器并为复制添加路由/操作。然后，您可以创建一个新页面并通过从所需页面的部分复制属性来添加页面部分。那有意义吗？

# android - 如何在 sencha touch 中创建图像按钮？

> ID：11345620
> 
> 赞同：0
> 
> 时间：2012-07-05T13:43:27.510
> 
> 标签：android, button, sencha-touch, sencha-touch-2

我想在 Sencha touch 2 应用程序中创建图像按钮。为此，我为按钮定义了一个 cls 属性并添加到 app.css 文件中。但是按钮的背景没有显示..

这是我的 index.html 类

```
 <!DOCTYPE html>
<!-- Auto Generated with Sencha Architect -->
<!-- Modifications to this file will be overwritten. -->
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Teritree</title>
    <script type="text/javascript" id="phonegap" src="cordova-1.8.1.js"></script>
    <script src="sencha-touch-all.js" type="text/javascript"></script> 
    <link rel="stylesheet" type="text/css" href="app.css"/>
    <script type="text/javascript" src="app/app.js"></script>
     <script>
        Ext.Loader.setConfig({ disableCaching: false });
        Ext.Ajax.setDisableCaching(false);    
    </script>
    <script type="text/javascript">
        if (!Ext.browser.is.WebKit) {
            alert("The current browser is unsupported.\n\nSupported browsers:\n" +
                "Google Chrome\n" +
                "Apple Safari\n" +
                "Mobile Safari (iOS)\n" +
                "Android Browser\n" +
                "BlackBerry Browser"
            );
        }
    </script>
</head>
<body></body>
</html> 
```

这是我的按钮代码：

```
xtype: 'button',
                            docked: 'left',
                            cls: 'wishlogbtn',
                            height: 200,
                            margin: 50,
                            width: 150 
```

我在 app.css 文件中添加了这一行：

```
 .wishlogbtn
{
    background-image: url('../wishlog.png');
} 
```

我不知道我是否在做 coreect，因为我是这个平台的新手。请帮忙..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T14:07:12.713

我不确定，但你可以试试这个：

```
.wishlogbtn
{
    background-image: url('../wishlog.png') !important;
} 
```

或者

```
.wishlogbtn
    {
-webkit-mask-image: url('../wishlog.png');
background: white;/*or smthing*/
} 
```

如果所有其他都失败了，你可以只使用 html 属性

```
xtype:'button',
html:'<img src="..."/>' 
```

<sencha_dir>\resources\themes\images\default\pictos\ 中还有很多可用的图标，您可以将它们包含在您的 .scss (SASS) 文件中

```
@include pictos-iconmask('user');/*replace "user" with any name of .png file in that folder"*/ 
```

然后你可以像在 sencha 中那样使用它：

```
xtype: 'button',
iconMask: true,
iconCls: 'user' /* use the same name as in .scss*/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T14:17:18.947

我能够解决它。问题在于图像的路径。

# javascript - 访问动态对象：javascript/jquery

> ID：11345624
> 
> 赞同：0
> 
> 时间：2012-07-05T13:43:33.003
> 
> 标签：javascript, jquery, object, loops

我编写了一些代码，在循环中调用了一个函数，该函数将该循环迭代中的当前对象传递给该函数。

问题是我不知道如何使用该对象，因为它是动态的，我只能访问 obj 参数。

**Javascript**

```
objectifyTableRow(val, i); // Populate object with properties and values 
```

**Val 是传递给函数 objectifyTableRow 的对象**

```
function objectifyTableRow(objRow, count) { // Create objects for calculations

    var ii = 0;
    $('#ctl00_PageContent_freight_rate_column_chaair_r' + count + " " + 'td').each(function(i, val) { // begin each
        /* Concatenate column name with subcolumn name. example objFobCost.China/Sea Origin,Air */
        if (i < 3) { // columns 0,1,2 in table row
            if (ii < arraySubColumn.length) { // Air, Sea/air, sea subcolumns
                var PropertyName = arrayColumns[0] + arraySubColumn[ii];

                objRow[PropertyName] = parseFloat($(val).html()); // Set key name with var PropertyName 

                ii += 1;
            }

            if (ii == 3) { // Reset counter
                ii = 0;
            }
        } // end of outer if

        else if (i > 2 & i < 6) {
            if (ii < arraySubColumn.length) { // Air, Sea/air, sea subcolumns
                var PropertyName = arrayColumns[1] + arraySubColumn[ii];

                objRow[PropertyName] = parseFloat($(val).html());

                ii += 1;
            }

            if (ii == 3) { // Reset counter
                ii = 0;
            }
        } // end of outer if

        else if (i > 5 & i < 9) {
            if (ii < arraySubColumn.length) { // Air, Sea/air, sea subcolumns
                var PropertyName = arrayColumns[2] + arraySubColumn[ii];

                objRow[PropertyName] = parseFloat($(val).html());

                ii += 1;
            }

            if (ii == 3) { // Reset counter
                ii = 0;
            }
        } // end of outer if

        else if (i > 8 & i < 12) {
            if (ii < arraySubColumn.length) { // Air, Sea/air, sea subcolumns
                var PropertyName = arrayColumns[3] + arraySubColumn[ii];

                ii += 1;
            }

            if (ii == 3) { // Reset counter
                ii = 0;
            }
        } // end of outer if

        else {
            if (ii < arraySubColumn.length) { // Air, Sea/air, sea subcolumns
                var PropertyName = arrayColumns[4] + arraySubColumn[ii];

                           ii += 1;
            }

            if (ii == 3) { // Reset counter
                ii = 0;
            }
        } // end of else
    });                  // end of each loop TD
    beginCalc(objRow);
}; 
```

**每个对象都传递给 beginCalc，因此可以根据 ID、Key 和 value 进行计算**

```
function beginCalc(obj) {
    // Every obj used is passed to here
    $.each(obj, function(key, element) {
    alert('ID: ' + obj[this.id] + '\n' + 'key: ' + key + '\n' + 'value: ' + element); // Check correct obj id, key and value
}); 
```

我这样做的原因是因为对象存储来自 asp.net 网格的值，我认为为每个网格行创建对象然后通过选择 obj.key: value * obj 在代码中进行计算会更干净。核心价值。而不是使用 getDocumentByElementId。

任何想法如何通过 beginCalc 函数中的 ID 以编程方式访问这些对象？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T14:08:01.853

您想要的是 DOM 节点和值之间的连接。试试这种方法（伪代码）：

```
var nodes = $(...select all the nodes...);
nodes.each( function( index, node ) {
    var obj = { node: node };
    beginCalc(obj);
} ); 
```

在`beginCalc()`中，您现在可以使用 访问 DOM 节点`obj.node`。您可以使用相同的方法将更多数据放入对象中，以将所有内容保存在一个地方（您需要更新的 DOM 节点 + 您需要更新它的所有数据）。

# java - 在提供 PDF 文件的 servlet 中设置浏览器标题

> ID：11345629
> 
> 赞同：4
> 
> 时间：2012-07-05T13:43:38.490
> 
> 标签：java, servlets, download, title

> **可能重复：**
> [如何更改 servlet 将 PDF 流式传输到的浏览器页面的标题？](https://stackoverflow.com/questions/1058959/how-to-change-the-title-of-a-browser-page-which-a-servlet-streamed-a-pdf-to)

我想在浏览器中显示 PDF 文件，所以我将 PDF 发送到响应输出流。我设置了标题：

```
response.setHeader("Content-Disposition", "inline; filename=\"" + getFileName() + "\""); 
```

但我对浏览器标题有疑问。FireFox 显示 servlet 标题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T12:50:51.950

出现在浏览器地址栏中的请求 URL 必须包含 PDF 文件名才能使其以您想要的方式工作。如果您将 PDF servlet 映射到类似 as 的前缀 URL 模式`/pdf/*`而不是类似 as 的静态路径`/pdf`，这会更容易，这样它也可以在 上调用`/pdf/blahblah`，`/pdf/foo.ext`依此类推。

例如

```
<a href="pdf/filename.pdf"> 
```

结合

```
@WebServlet("/pdf/*")
public class PdfServlet extends HttpServlet {

    @Override
    public void doGet(...) {
        String filename = request.getPathInfo().substring(1); // filename.pdf
        // ...
    }

} 
```

另一个优点是IE 浏览器中的*另存为文件名也将被修复。*该浏览器即从请求 URL 的最后一个路径而不是从内容处置标头中提取它。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-09-11T12:23:42.633

如果您需要为生成的`HTML`页面设置标题：-

尝试这个 ：

```
out.println("  <HEAD><TITLE>Your Title for browser</TITLE></HEAD>"); 
```

在`servlet`. 然后`servlet`将生成动态页面，上面的代码将标题添加到页面。

# c++ - 功能范围是什么意思？

> ID：11345631
> 
> 赞同：7
> 
> 时间：2012-07-05T13:43:43.740
> 
> 标签：c++, scope

功能范围是什么意思？

我了解变量的范围。当我们谈论函数的范围时，它是指结构（类）中的函数还是我们在`main()`C/C++ 程序中调用的普通函数的范围？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-05T13:52:10.073

宽泛地说，*作用域*是可以在其中声明名称的区域。在范围内声明的名称可以在该范围内访问，在某些情况下，也可以从外部访问。

（准确地说，这实际上是一个*声明区域*，名称的*范围*是程序中名称有效的部分。它从声明的地方开始，包括该区域的其余部分，有时还包括一些其他地区。）

范围由命名空间、类和复合语句（即，由 包围的代码语句块`{}`）引入。最后一个包括函数体。

大多数对象和函数都有名称，每个名称都在一个范围内。

所以“函数的范围”可能意味着两件事：要么是由函数体定义的范围，其中声明了它的局部变量；或声明函数名的范围（类或命名空间）。

更新：你说你的意思是函数名的范围。这总是在声明之后立即开始；它在哪里结束取决于该声明的位置。

*   如果它在命名空间内声明，它会持续到该命名空间关闭。如果稍后在同一个翻译单元中重新打开命名空间，那么它会回到那里的范围。
*   如果它在类定义中声明为成员函数，则作用域将持续到类定义结束。它也在任何派生类的定义范围内，也在该类或派生类的成员定义内。
*   如果它在类定义中声明为友元，或者在函数定义中，则名称实际上是在周围的命名空间中声明的，并且范围与这种情况相同。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-05T13:50:48.120

函数可以具有全局、命名空间、类（在这种情况下通常称为成员）或本地（在另一个函数内）范围。它们也可以`static`给它们内部链接或在匿名命名空间内，使它们在翻译单元之外无法访问（同时仍然具有外部链接，因此它们可以用作模板参数）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-05T13:54:05.840

是的，函数也有作用域，尽管它们的作用域通常大于大多数变量的作用域。

在 C [编辑：这是我写这篇文章时的标签之一] 中，函数具有全局范围或文件范围。全局范围适用于在整个程序中可见的普通函数。文件范围适用于您标记为“静态”的函数，因此它仅在同一个翻译单元中可见。

C++ 使用的名称略有不同，但具有相同的基本概念。`struct`它以实际命名为“命名空间”和s/ `class`es的事物的形式添加命名空间。除了一个例外，命名空间中的函数仅在该命名空间内可见。例外情况是，如果您在/中定义`friend`函数：`class``struct`

```
class X {
    friend void whatever(X const &) { do_something(); }
}; 
```

在这种情况下，即使函数是在 内部定义的`X`，它的名称也会被注入到周围的命名空间中，因此它在 X 之外是可见的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-05T13:50:10.010

我认为这里的意思是*标签*（*标签*是您在`goto`语句中使用的）可见的范围。

也许[这篇](http://msdn.microsoft.com/en-us/library/b7kfh662%28v=vs.80%29.aspx)文章也可以帮助你理解范围。您也可以在 stackoverflow 上查看[这个](https://stackoverflow.com/questions/7933814/difference-between-local-scope-and-function-scope)问题。

# c# - 如何使用无锁代码同步来自不同线程的添加？

> ID：11345634
> 
> 赞同：0
> 
> 时间：2012-07-05T13:43:53.203
> 
> 标签：c#

我写了简单的`NasdaqIndex`计算示例。为简单起见，我将其声明为`int`，这只是`10`股票价格的总和。

```
class NasdaqIndex {

private int[] stockValue = new int[10]; // for simplicity let's assume they are already initialized

// just sum from 1 to 10 of stockValue
private int nasdaqIndexValue; // for simplicity let's assume that already initialized

public void StockValueUpdated(int stockValueIndex, int newValue) {
    int diff = newValue - stockValue[stockValueIndex];
    stockValue[stockValueIndex] = newValue;
    nasdaqIndexValue += diff;               // THIS NEED TO BE SYNCHRONIZED!
}

} 
```

但在现实生活中，StockValueUpdated 可能（并且将会）从不同的线程对不同的 stockValueIndex 并行调用（对于相同的 stockValueIndex，它不会被称为并行）。

所以我只需要同步一行代码`nasdaqIndexValue += diff;`

例如，如果一个线程执行`nasdaqIndexValue += 10;`而另一个线程执行，`nasdaqIndexValue += 3;`我需要确保完全准确地`13`添加。在这种情况下我是否需要同步？如果是这样，如何使用`lock-free`代码做到这一点？

**UPD** oooops 我刚刚意识到，如果我使用双打，每次使用这样的代码都会向 nasdaqIndex 引入小的“delta”。所以我要么使用小数，要么有时必须“完全重新计算” nasdaqIndex，否则一段时间后它不会等于股票的总和。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:53:10.873

使用`Interlocked`type 使该操作成为原子操作：

```
Interlocked.Add(ref nasdaqIndexValue, diff); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T13:56:36.707

使用[`volatile`](http://msdn.microsoft.com/en-us/library/x13ttww7%28v=vs.71%29.aspx)关键字。

> volatile修饰符通常用于被多个线程访问而不使用lock语句序列化访问的字段。

```
private volatile int nasdaqIndexValue; // for simplicity let's assume that already initialized 
```

# c# - 在 Crystal Reports 中进行简单和双面打印

> ID：11345640
> 
> 赞同：0
> 
> 时间：2012-07-05T13:44:17.627
> 
> 标签：c#, crystal-reports

我有一个使用 Crystal Reports for VS2010 的 C# 2010 应用程序。

我的客户有一个非常尴尬的要求。他想为客​​户打印发票。他希望整张发票仅打印在一页的一侧，但他希望付款信息出现在最后一页的背面。

所以基本上，他希望整个报告单面打印，除了最后一页，他想要双面打印（双面）。

**有没有办法使用 CR 和 C# 来做到这一点？**我知道他可以翻页并手动打印付款选项，但这并没有真正的帮助。我需要能够在同一份报告中做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T14:38:01.460

> 您可能可以通过一些黑客来完成此操作。我会尝试从创建一个虚拟部分开始，并使该部分在新页面上开始，或者如果它不在最后一条记录上，则在之后设置新页面。付款信息可以放在报告摘要中，您也可以从新页面开始。所以它会是页面，空白页面，页面，空白页面，页面，摘要。

虚拟部分的“之前的新页面”和“之后的新页面”设置为`Not OnLastRecord`。报告摘要部分应将“之前的新页面”设置为`True`。

# reporting-services - SSRS 2008 - 导出到 XML 时如何隐藏组元素

> ID：11345644
> 
> 赞同：0
> 
> 时间：2012-07-05T13:44:27.527
> 
> 标签：reporting-services, ssrs-2008

我正在创建一个用于导出到 XML 的报告。我已经能够很好地调整元素和属性，除了我似乎无法摆脱的行组。每当导出 XML 时，行组在 XML 中呈现为“Details_Collection”，而我想要的元素在下面：

```
<Root>
 <One>
   <Details_Collection>
    <Item />
    <Item />
   </Details_Collection>
 </One>
</Root> 
```

我根本不希望 Details_Collection 元素出现，但我似乎无法让它消失。如果我将“DataElementOutput”设置为“NoOutput”，则不会出现任何子元素，所以这不起作用。

我正在尝试的是可能的，还是我需要使用 XSLT？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T10:12:51.160

唉，AFAIK*这是不可能的*，行组将始终使用自己的元素呈现。您可以为具有该属性的元素提供自己的名称`DataElementName`，但正如您在问题设置中已经提到的那样`DataElementOutput`，`NoOutput`将隐藏整个元素（包括子节点）。

使用[XSLT](http://technet.microsoft.com/en-us/library/dd283112%28v=sql.105%29.aspx#XSLTTransformation)可能是解决此问题的最简单方法，但如果您需要更多控制权，自定义呈现扩展是一个重量级的替代方案。

# ios5 - iOS如何检测电源线是否插入

> ID：11345645
> 
> 赞同：5
> 
> 时间：2012-07-05T13:44:28.740
> 
> 标签：ios5, notifications, push-notification, nsnotificationcenter

我正在制作一个 GPS 应用程序，精度会根据电源是否可用（即车载充电器）而变化

有没有办法在后台运行一些东西来不断检查设备是否正在通电？

我知道如何检查电源是否连接。但问题是如果用户在家并连接。他拔掉设备，出去跑步。然后决定出去玩。我的应用程序在启动时检查电池状态。我怎样才能一次又一次地检查它。我不想耗尽他的电池，因为他正在使用我的应用程序！

我们计划仅支持 iOS 5 及更高版本（无需向后兼容 iOS 4 和 3）

谢谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-05T13:50:01.853

看看`UIDevice`类参考。

有一个名为的属性`batteryState`返回一个`UIDeviceBatteryState`. 因此，查看设备是否正在充电或已插入并充满电。

```
UIDeviceBatteryState currentState = [[UIDevice currentDevice] batteryState];
if (currentState == UIDeviceBatteryStateCharging || currentState == UIDeviceBatteryStateFull) {
    // The battery is either charging, or connected to a charger and is fully charged
} 
```

**编辑添加**

如果您想持续监控状态，请查看`batteryMonitoringEnabled`属性，然后处理`UIDeviceBatteryStateDidChangeNotification`以更新您想要的任何内容。

iOS 是事件驱动的。在 while 循环中检查某事的状态是您很少需要做的事情。

# python - 如何使用 wxreactor 和 twisted Perspective Broker [PB] 编写聊天客户端

> ID：11345647
> 
> 赞同：0
> 
> 时间：2012-07-05T13:44:34.427
> 
> 标签：python, wxpython, twisted, perspective, broker

我正在学习 wxPython 和 twisted 的 Perspective Broker。我被指派一起使用它们来生成聊天客户端（我已经编写了服务器和基于控制台的客户端。）

这就是让我难过的地方：PB 有它自己的带有回调等的“流程”，这与 wxpython 的事件驱动流程并不直观地相吻合。我应该使用什么样的程序结构来让两者合作？

我已经尝试使用程序的twisted pb客户端部分以本地方法从服务器获取和存储信息，然后wxpython gui可以调用以响应某些事件，并在开始时使用来设置在线用户列表和团体。我想我遇到了序列问题——在 wx 代码调用它们之前没有存储必要的变量，因为它们是同时启动的。也许为框架创建插入时间延迟等会有所帮助，但这感觉就像一个笨拙的解决方案，如果有解决方案的话。

另一种方法是将服务器引用直接传递给 wxPython 框架（和子面板/笔记本）。在这里我遇到了问题，因为回调需要一个不同的类，而 wx 需要同一个类中的信息......也许有一种方法可以强制它们进入同一个模型，但同样，感觉很笨拙（加上我还没有设法使它工作。

有解决这个问题的资源吗？标准方法？

如果这些可能说明我的方法存在问题......

这是我的服务器代码： http: [//pastebin.com/84fmhsRV](http://pastebin.com/84fmhsRV) GUI 客户端代码： http: [//pastebin.com/UimXe4RY](http://pastebin.com/UimXe4RY)

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-23T06:50:27.090

我在这里聚会真的很晚了，但我可以为未来的读者提供一些有用的建议。

这很难的原因是你试图让两个事件循环一起工作。你有 Twisted reactor 和 wxWidgets 循环。有两种方法可以使循环网格化

1.  在 Twisted 中使用一个特殊的反应器，该反应器旨在将 Twisted 和 wx 事件组合成一个循环。Twisted 的设计考虑到了这一点，因此为此目的酿造定制反应器并不难。
2.  在单独的线程中运行 Twisted reactor 和 wx 事件循环。在这种情况下，您依赖操作系统将执行时间委派给每个事件循环。

实际上，我今天刚刚完成了使用 Twisted 和 PyQt 的这两种策略。Qt 和 wxWidgets 并没有*那么*不同，所以我认为您可以轻松地调整我的解决方案。请注意，我在这里没有使用 Perspective Broker。一旦你理解了我是如何让它工作的，添加 Perspective Broker 层将非常容易。

首先，我使用依赖 pyqt4reactor 的方法 #1 描述我的解决方案。这是完整的工作代码（您需要 pyqt4reactor，它可以在 interwebz 上的各种非官方位置找到）

**使用特殊反应器聊天客户端**

```
import sys

import PyQt4.QtGui as QtGui
import PyQt4.QtCore as QtCore
import PyQt4.uic as uic

import twisted.internet.defer as defer
import twisted.internet.protocol as protocol
import qt4reactor

import constants as C

class MainWindow(QtGui.QMainWindow):
    def __init__(self):
        QtGui.QMainWindow.__init__(self)
        self.ui = uic.loadUi('ui.ui')

        self.ui.sendButton.clicked.connect(self.sendMessage)
        self.ui.inputBox.returnPressed.connect(self.sendMessage)
        self.ui.connectButton.clicked.connect(self.getNetworkConnection)

        self.ui.show()

    def getNetworkConnection(self):
        #This line should probably not be inside getNetworkConnection
        factory = protocol.ClientCreator(reactor, ChatProtocol)
        d = factory.connectTCP(C.HOST, C.PORT)
        def onConnected(p):
            self.cxn = p
            p.emitter.signal.connect(self.onNewData)
            self.ui.connectButton.setEnabled(False)
        d.addCallback(onConnected)

    def onNewData(self, data):
        self.ui.outputBox.append(data)

    def sendMessage(self):
        message = str(self.ui.inputBox.text())
        self.ui.inputBox.clear()
        self.cxn.send(message)

class Emitter(QtCore.QObject):

    signal = QtCore.pyqtSignal(str)

    def __init__(self):
        QtCore.QObject.__init__(self)

class ChatProtocol(protocol.Protocol):

    def __init__(self):
        self.emitter = Emitter()

    def dataReceived(self, data):
        self.emitter.signal.emit(data)

    def send(self, data):
        self.transport.write(data)

class ChatFactory(protocol.ClientFactory):
    protocol = ChatProtocol

if __name__ == '__main__':
    app = QtGui.QApplication(sys.argv)
    qt4reactor.install()
    from twisted.internet import reactor
    mainWindow = MainWindow()
    reactor.run() 
```

让我们检查一下`ChatProtocol`它的辅助类`Emitter`：

```
class ChatProtocol(protocol.Protocol):

    def __init__(self):
        self.emitter = Emitter()

    def dataReceived(self, data):
        self.emitter.signal.emit(data)

    def send(self, data):
        self.transport.write(data)

class Emitter(QtCore.QObject):

    signal = QtCore.pyqtSignal(str) 
```

协议本身非常简单。当您调用`.send`它时，它会通过其传输写入数据。

数据接收稍微复杂一些。为了让 Twisted 代码通知 Qt 事件循环传入聊天，我们赋予协议一个 Emitter，它是一个可以发出单个信号的 QObject。在主 Qt 窗口中，我们连接了这个信号，以便它将数据发布到聊天窗口。当我们建立连接时，就会发生这种连接。让我们检查一下：

```
class MainWindow(QtGui.QMainWindow):

    <snip>

    def getNetworkConnection(self):
        #This line should probably not be inside getNetworkConnection
        factory = protocol.ClientCreator(reactor, ChatProtocol)
        d = factory.connectTCP(C.HOST, C.PORT)
        def onConnected(p):
            self.cxn = p
            p.emitter.signal.connect(self.onNewData)
            self.ui.connectButton.setEnabled(False)
        d.addCallback(onConnected) 
```

我们告诉我们的客户工厂建立一个 TCP 连接。这给出了一个 deferred ，它将以生成的协议作为其参数调用。我们的回调函数`onConnected`负责将该协议的发射器信号连接到`onNewData`. 这意味着每当协议的发射器发射时，无论何时`dataReceived`调用，数据都会传播到 Qt 信号/插槽系统并显示在 outputBox 中。其余的功能应该或多或少有意义。

还在我这儿？如果你是，我现在将展示如何使用线程来执行此操作。这是完整的工作代码

**带线程的聊天客户端**

```
import sys

import PyQt4.QtGui as QtGui
import PyQt4.QtCore as QtCore
import PyQt4.uic as uic

import twisted.internet.reactor as reactor
import twisted.internet.defer as defer
import twisted.internet.protocol as protocol

import constants as C

class MainWindow(QtGui.QMainWindow):
    def __init__(self):
        QtGui.QMainWindow.__init__(self)
        self.ui = uic.loadUi('ui.ui')

        self.ui.sendButton.clicked.connect(self.sendMessage)
        self.ui.inputBox.returnPressed.connect(self.sendMessage)
        self.ui.connectButton.clicked.connect(self.getNetworkConnection)

        self.ui.show()

        self.networkThread = NetworkThread()
        self.networkThread.start()
        self.connect(self.networkThread,
                     self.networkThread.sigConnected,
                     self.onConnected)

    def getNetworkConnection(self):
        #This line should probably not be inside getNetworkConnection
        factory = protocol.ClientCreator(reactor, ChatProtocol)
        self.networkThread.callFromMain(factory.connectTCP,
                                        self.networkThread.sigConnected,
                                        C.HOST, C.PORT)

    def onConnected(self, p):
        self.cxn = p
        p.emitter.signal.connect(self.onNewData)
        self.ui.connectButton.setEnabled(False)

    def onNewData(self, data):
        self.ui.outputBox.append(data)

    def sendMessage(self):
        message = str(self.ui.inputBox.text())
        self.networkThread.callFromMain(self.cxn.send, None, message)
        self.ui.inputBox.clear()

class NetworkThread(QtCore.QThread):
    """Run the twisted reactor in its own thread"""
    def __init__(self):
        QtCore.QThread.__init__(self)
        self.sigConnected = QtCore.SIGNAL("sigConnected")

    def run(self):
        reactor.run(installSignalHandlers=0)

    def callFromMain(self, func, successSignal, *args):
        """Call an async I/O function with a Qt signal as it's callback"""

        def succeed(result):
            self.emit(successSignal, result)

        def wrapped():
            d = defer.maybeDeferred(func, *args)
            if successSignal is not None:
                d.addCallback(succeed)

        reactor.callFromThread(wrapped)

class Emitter(QtCore.QObject):
    #Not sure why I specified a name here...
    signal = QtCore.pyqtSignal(str, name='newData')

class ChatProtocol(protocol.Protocol):
    def __init__(self):
        self.emitter = Emitter()

    def dataReceived(self, data):
        self.emitter.signal.emit(data)

    def send(self, data):
        self.transport.write(data)

class ChatFactory(protocol.ClientFactory):
    protocol = ChatProtocol

if __name__ == '__main__':
    app = QtGui.QApplication(sys.argv)
    ex = MainWindow()
    sys.exit(app.exec_()) 
```

除了在 QThread 中运行的反应器之外，这里有趣的区别在于我们在代码的 Twisted 部分中连接回调的方式。特别是我们使用辅助函数`callFromMain`

```
 def callFromMain(self, func, successSignal, *args):
        """Call an async I/O function with a Qt signal as it's callback"""

        def succeed(result):
            self.emit(successSignal, result)

        def wrapped():
            d = defer.maybeDeferred(func, *args)
            if successSignal is not None:
                d.addCallback(succeed)

        reactor.callFromThread(wrapped) 
```

我们提供了一个我们希望在 Twisted 线程中调用的函数，一个我们希望在函数结果可用时发出的 Qt 信号，以及我们函数的额外参数。反应器调用我们的函数并将一个回调附加到生成的 deferred 中，它将发出我们提供的信号。

我希望这对某人有帮助:)

如果有人看到简化，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T14:28:20.020

你可能想看看 Twisted 和 wxPython 上的这两个页面：

*   [http://wiki.wxpython.org/wxPythonAndTwisted](http://wiki.wxpython.org/wxPythonAndTwisted)
*   [http://twistedmatrix.com/documents/current/core/howto/choosing-reactor.html](http://twistedmatrix.com/documents/current/core/howto/choosing-reactor.html)

我还找到了有关该主题的[食谱。](http://code.activestate.com/recipes/181780-using-wxpython-with-twisted-python/)wiki 链接已经完成了一个简单的聊天程序。

# ruby-on-rails - 你如何通过heroku控制台访问“app”（参考会话）？

> ID：11345650
> 
> 赞同：2
> 
> 时间：2012-07-05T13:44:40.380
> 
> 标签：ruby-on-rails, ruby, heroku

在 localhost 上工作时，您可以访问**应用程序**( *ActionDispatch::Integration::Session* ) 来测试您的应用程序？（例如测试控制器）

使用 heroku 控制台时，我看不到**app** var，有人知道吗？

Heroku 上的 Bamboo stack，Rails 版本 3.0.3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T15:15:44.933

在 Heroku 控制台中，运行 rails 控制台时没有 app 对象。这些命令通过 Heroku 的“路由网格”，所以我相信这就是你没有完全访问权限的原因。

相反，您可以访问您的模型和应用程序逻辑。

# c# - 从asp.NET中的gridview中删除一行

> ID：11345651
> 
> 赞同：0
> 
> 时间：2012-07-05T13:44:42.407
> 
> 标签：c#, asp.net, visual-studio-2008, gridview

我想从 gridview 中删除一行。这是我的代码

```
 //page load event  
      if(page.isPostback==false)  
      {  
        dataset ds=null;  
        ds=(dataset)Session["ds1"];  
        //session will contain dataset ds1 with data selected by user  
        if(ds!=null)  
        {  
          gvdetails.datasource=ds.Tables["Bus_Table"];  
          gvdetails.DataBind();  
       }  
     }

      protected void gvdetails_RowDeleting(object sender, GridViewDeleteEventArgs e)
{
    DataSet ds = (DataSet)Session["ds1"];
    ds.Tables["Bus_Table"].Rows[e.RowIndex].Delete();
    ds.Tables["Bus_Table"].AcceptChanges();
    Session["ds1"] = ds;
    gvDetails.DataSource = ds.Tables["Bus_Table"];
    gvDetails.DataBind(); 
} 
```

代码工作正常，但是当我尝试单击删除链接时。我在这一行“ds.Tables["Bus_Table"].Rows[e.RowIndex].Delete();”中收到运行时错误

```
 error :Object reference not set to an instance of an object.NULLREFERENCEEXCEPTION was unhandled by the usercode.Use the "new " keyword to create an object instance 
```

我无法弄清楚问题所在。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T14:04:03.943

任何一个 ：

*   `Session["ds1"]`不存在（因为您的 DataSet 不在 Session 中），
*   会话没有那个表，或者
*   你引用了一个错误的 RowIndex。

因为代码全部链接在一起，所以您有两个选项可以找出哪个：

1.  连接调试器并检查`ds`,`ds.Tables["Bus_Table"]`和`ds.Tables["Bus_Table"].Rows[e.RowIndex]`, **OR的值**
2.  在您的代码中添加空检查并进行部署。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T14:18:05.633

您似乎绑定到`employee`表：

```
gvdetails.datasource=ds.Tables["employee"]; 
```

并从`Bus_Table`表中删除：

```
ds.Tables["Bus_Table"].Rows[e.RowIndex].Delete(); 
```

那是行不通的，是吗？

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-05T14:10:18.433

// 这是一个例子，认为它可能会有所帮助

```
protected void GridView1_RowDeleting(object sender, GridViewDeleteEventArgs e)
    {
            string EmployeeID = GridView1.DataKeys[e.RowIndex].Value.ToString();
            string Query = “delete Employee where Employee.EmployeeID = “ + EmployeeID;
            BindGridData(Query);
     }

private void BindGridData(string Query)
{
  string connectionstring  =        ConfigurationManager.ConnectionStrings["SampleConnectionString"].ConnectionString;

  using (SqlConnection conn = new SqlConnection(connectionstring))
  {
    conn.Open();
    using (SqlCommand comm = new SqlCommand(Query, conn))
    {
        SqlDataAdapter da = new SqlDataAdapter(comm);
        DataSet ds = new DataSet();
        da.Fill(ds);
        GridView1.DataSource = ds;
        GridView1.DataBind();
    }
  } 
```

}

希望我现在清楚...

# java - 处理外部文件的 getResourceAsStream

> ID：11345657
> 
> 赞同：2
> 
> 时间：2012-07-05T13:45:08.267
> 
> 标签：java, directory, inputstream

我在使用 getResourceAsStream 方法时遇到问题 - 由于目录错误，它返回 null。问题是我不知道如何定义目录。

我的项目结构是这样的

```
Project
  #src
    #com.package
      #ExampleClass.java
  #dll
    #MyFile.dll 
```

当我有

```
InputStream in = this.getClass().getResourceAsStream("../dll/" + "MyFile.dll"); 
```

它返回空值。有谁知道如何处理这个问题以及应该如何定义路径？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T13:47:53.420

如果在包中，`this`则需要上两层才能到达 CLASSPATH 的根目录：`ExampleClass``com.package`

```
this.getClass().getResourceAsStream("../../dll/" + "MyFile.dll"); 
```

假设`/dll`目录直接放在 CLASSPATH 的根目录中。或者干脆使用绝对路径：

```
this.getClass().getResourceAsStream("/dll/" + "MyFile.dll"); 
```

如果`/dll/MyFile.dll`不在您的 CLASSPATH 上（只需打开您的 JAR 文件并检查它是否存在），您应该使用文件系统机制来打开它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T13:50:22.543

它取决于 MyFile.dll 在类路径中的位置，而不是 MyFile.dll 在您的项目中的位置。请看一下在[哪里放置文件以从类中读取](https://stackoverflow.com/questions/11273064/where-to-put-a-file-to-read-from-a-class-under-a-package-in-java/11273135#11273135)

# php - 为什么需要 CIUnit 才能将 PHPUnit 与 CodeIgniter 一起使用？

> ID：11345667
> 
> 赞同：5
> 
> 时间：2012-07-05T13:45:52.213
> 
> 标签：php, unit-testing, codeigniter, phpunit, codeigniter-2

我们决定在下一个项目中使用 PHPUnit（与 Jenkins 一起）。我们正在考虑不同的 PHP 框架，其中之一是 CodeIgniter。我看到[很多](https://stackoverflow.com/questions/3497896/please-help-me-setting-up-codeigniter-and-phpunit) [人](https://stackoverflow.com/questions/10630214/using-yaml-files-as-data-provider-in-phpunit-ciunit) 使用[My CIUNIT](https://bitbucket.org/kenjis/my-ciunit)[来](https://stackoverflow.com/questions/10314014/phpunit-codeigniter-multiple-objects-with-same-name)[“桥接”](http://www.foostack.com/foostack/) PHPUnit 和 Codeigniter 。在线文档中几乎没有解释。

### 为什么需要它？

其他框架似乎不需要像这样的[“酷桥”](http://www.foostack.com/foostack/)。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-05T13:57:28.873

原因：

1.  Codeigniter 的组件是紧密耦合的。在使用任何其他部件之前，您需要运行一些大的基本部件（加载器、路由器、CFG 对象）。
2.  Codeigniter 不是为从 CLI 运行而设计的。它的 index.php 前端控制器中有大量的引导代码，并且它假设一个 Web 服务器环境。

您并不*绝对需要*CIUNIT 来对 CI 进行单元测试。但是你必须*做点什么*。在我的例子中，我为 index.php 编写了一个替代的前端控制器，它只加载了获取 CI 超级对象所需的最小值。我`require_once`将它放在我的测试文件的顶部和方法`$this->CI =& get_instance()`中。`SetUp()`但是，如果我是一个绝对纯粹的单元测试人员，我应该在每次测试后销毁并重新创建 CI 对象，以防某些状态被困在其中。我不确定 CIUNIT 是否会为您执行此操作。

# android - android中的滚动视图未生成

> ID：11345668
> 
> 赞同：3
> 
> 时间：2012-07-05T13:45:52.950
> 
> 标签：android, scrollbar

我开发了一个具有不同小部件的用户表单。我设置了滚动选项，但无法生成滚动条，因此无法滚动到最后一个选项。以下是代码。谁能指导我解决这个问题

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
   android:orientation="vertical" 
    android:scrollbars="vertical" 
    android:scrollbarAlwaysDrawVerticalTrack="true"
    android:scrollbarStyle="outsideInset" android:isScrollContainer="true"
    android:overScrollMode="always"
    >

  ..............

  </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:48:36.540

您必须将 LinearLayout 包装在 ScrollView 中。并删除 LinearLayout 中的滚动参数，它们没有效果。

注意：一个 ScrollView 只能有一个嵌套的孩子！所以它应该是你的主要布局。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T13:59:49.220

您必须将线性布局包装在滚动视图中。这是一个例子：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/scroller"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:fillViewport="true" >

    <LinearLayout
       android:layout_width="fill_parent"
       android:layout_height="wrap_content"
       android:orientation="vertical">

    // YOUR CONTENT GOES HERE

     </LinearLayout>       
</ScrollView> 
```

# android - Horizo ntalScrollView 与 imageviews 作为一个孩子，而在屏幕中滚动图像的中心应该播放动画？

> ID：11345673
> 
> 赞同：0
> 
> 时间：2012-07-05T13:46:15.617
> 
> 标签：android, hsv

我是新的android平台应用程序开发。我的问题是在不使用图库视图的情况下将图像居中锁定，并且我们播放动画的图像。滚动动画图像时应使用屏幕中心进行调整。目前我正在使用带有线性布局的 Horizo​​ntalScrollView 作为 HSV 的子元素。具有多个图像的线性布局。请给我建议如何实现它。在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T14:05:59.980

继承 Horizo​​ntalScrollView 并覆盖/添加方法

**已编辑**

我的完整来源

```
public class HorizontalScrollSpinner extends HorizontalScrollView {

    private ListAdapter mAdapter;

    private int mCenterViewPosition = -1;

    private OnSelectedItemChanged onSelectedItemChanged = new OnSelectedItemChanged() {
        @Override
        public void onSelectedChanged(View view, int newPosition) {

        }
    };

    public HorizontalScrollSpinner(Context context, AttributeSet attrs) {
        super(context, attrs);

        this.setHorizontalFadingEdgeEnabled(true);
        this.setHorizontalScrollBarEnabled(false);
        this.setFadingEdgeLength(5);
    }

    @Override
    protected void onLayout(boolean changed, int l, int t, int r, int b) {
        super.onLayout(changed, l, t, r, b);

        if(getChildCount() == 0)
            return;

        initCenterView();
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        super.onMeasure(widthMeasureSpec, heightMeasureSpec);

        if(getChildCount() == 0)
            return;

        ViewGroup parent = (ViewGroup) getChildAt(0);

        if(parent.getChildCount() == 0)
            return;

        View FirstChild = parent.getChildAt(0);

        int LeftPadding = (getWidth() / 2) - (FirstChild.getMeasuredWidth() / 2);

        View LastChild = parent.getChildAt(getChildCount() - 1);

        int RightPadding = (getWidth() / 2) - (LastChild.getMeasuredWidth() / 2);

        if(parent.getPaddingLeft() != LeftPadding && parent.getPaddingRight() != RightPadding)
        {
            parent.setPadding(LeftPadding, parent.getPaddingTop(), RightPadding, parent.getPaddingBottom());
            requestLayout();
        }
    }

    private int getInternalCenterView()
    {
        if(getChildCount() == 0)
            return -1;

        int CenterView= 0;
        int CenterX = getScrollX() + (getWidth() / 2); 

        ViewGroup parent = (ViewGroup) getChildAt(0);

        if(parent.getChildCount() == 0)
            return -1;

        View child = parent.getChildAt(0);

        while(child != null && child.getRight() <= CenterX && CenterView < parent.getChildCount())
        {
            CenterView++;
            child = parent.getChildAt(CenterView);
        }

        if(CenterView >= parent.getChildCount())
            CenterView = parent.getChildCount() - 1;

        return CenterView;
    }

    private int getCenterPositionFromView()
    {
        int CenterView = getInternalCenterView();

        if(mCenterViewPosition != CenterView)
        {
            onSelectedItemChanged.onSelectedChanged(this, CenterView);
        }

        mCenterViewPosition = CenterView;

        return mCenterViewPosition;
    }

    public int getCenterViewPosition()
    {
        return mCenterViewPosition;
    }

    public ListAdapter getAdapter() {
        return mAdapter;
    }

    public void setAdapter(ListAdapter mAdapter) {

        this.mAdapter = mAdapter;
        fillViewWithAdapter();      
    }

    private void fillViewWithAdapter()
    {
        if(getChildCount() == 0 || mAdapter == null)
            return;

        ViewGroup parent = (ViewGroup) getChildAt(0);

        parent.removeAllViews();

        for (int i = 0; i < mAdapter.getCount(); i++) {
            parent.addView(mAdapter.getView(i, null, parent));          
        }
    }

    @Override
    protected void onScrollChanged(int l, int t, int oldl, int oldt) {
        super.onScrollChanged(l, t, oldl, oldt);

        getCenterPositionFromView();

        initCenterView();
    }

    private void initCenterView()
    {
        if(getChildCount() == 0)
            return;

        ViewGroup parent = (ViewGroup) getChildAt(0);

        if(parent.getChildCount() == 0)
            return;

        int CenterView = getCenterViewPosition();

        if(CenterView == -1)
        {
            mCenterViewPosition = 0;
            CenterView = 0;
        }

        if(CenterView != -1 && CenterView != getInternalCenterView() && parent.getChildAt(0).getLeft() >= 0)
        {
            scrollToSelectedIndex();
        }

        if(CenterView < 0 || CenterView > parent.getChildCount())
            return;

        for (int i = 0; i <= parent.getChildCount(); i++) {

            if(!(parent.getChildAt(i) instanceof TextView))
                continue;

            if(i == CenterView)
            {
                // Start Animation
            }
            else
            {
                // Remove Animation for other Views
            }
        }

    }

    public int getSelectedIndex()
    {
        return getCenterViewPosition();
    }

    public void setSelectedIndex(int index)
    {
        if(getChildCount() == 0)
            return;

        ViewGroup parent = (ViewGroup) getChildAt(0);

        if(index < 0 || index > parent.getChildCount())
        {
            throw new ArrayIndexOutOfBoundsException(index);
        }

        mCenterViewPosition = index;

        onSelectedItemChanged.onSelectedChanged(this, mCenterViewPosition);

        requestLayout();
    }

    protected void scrollToSelectedIndex()
    {
        ViewGroup parent = (ViewGroup) getChildAt(0);

        View child = parent.getChildAt(mCenterViewPosition);

        int ChildCenterX = child.getLeft() + (child.getMeasuredWidth() / 2);

        int ScreenCenterX = getWidth() / 2;

        int ChildScrollToX = ChildCenterX - ScreenCenterX;

        scrollTo(ChildScrollToX, 0);
    }

    public interface OnSelectedItemChanged
    {
        public void onSelectedChanged(View view, int newPosition);
    }

    public OnSelectedItemChanged getOnSelectedItemChanged() {
        return onSelectedItemChanged;
    }

    public void setOnSelectedItemChanged(OnSelectedItemChanged onSelectedItemChanged) {
        this.onSelectedItemChanged = onSelectedItemChanged;
    }

} 
```

这将向位于中心的视图显示动画

onMeasure 将 Padding 添加到 LinearLayout 以便 LinearLayout 中的 First Child 和 Last Child 将始终位于中心。

# unit-testing - 单元测试 EPiServer 扩展

> ID：11345674
> 
> 赞同：0
> 
> 时间：2012-07-05T13:46:15.580
> 
> 标签：unit-testing, c#-4.0, episerver-6-r2

在 EPiServer 中，有人会如何测试这样的扩展：

```
 public static class LinkItemExtensions
    {
        public static T GetTypedPage(this LinkItem link) where T : TypedPageData
        {
            return (T) DataFactory.Instance.GetPage(PageReference.ParseUrl(link.Href));
        }
    } 
```

我想要做的是用下面的代码以某种方式测试上面的类：

```
 [TestFixture]
public class LinkItemExtensionsTests
    {
        [Test]
        public void GetTypedPage_GivenALinkItem_ReturnsTypedPageData()
        {
            var link = new LinkItem();
            var typedPage = link.GetTypedPage();
            Assert.IsAssignableFrom(typeof(StartPageData), typedPage);
        }
    } 
```

调用 DataFactory.Instance 时会出现问题。

> `System.TypeInitializationException : The type initializer for 'EPiServer.DataFactory' threw an exception. ----> System.NullReferenceException : Object reference not set to an instance of an object.`

因此，我尝试将 DataFactory 的抽象传递给扩展方法，如下所示：

```
 namespace WebTests
{
    [TestFixture]
    public class PageDataExtensionsTests
    {
        [Test]
        public void GetTypedPage_GivenALinkItem_ReturnsTypedPageData()
        {
            var link = new LinkItem();

```
 var startPage = A.Fake<StartPageData>();

        var pageDataFactory = A.Fake<IDataFactoryFacade>();

        A.CallTo(() => pageDataFactory.GetPage(null))
            .WithAnyArguments()
            .Returns(startPage);

        var typedPage = link.GetTypedPage<StartPageData>(pageDataFactory);

        Assert.IsAssignableFrom(typeof(StartPageData), typedPage);

    }

} 
```

} 
```

我得到

```
System.InvalidCastException : Unable to cast object of type 'Castle.Proxies.PageDataProxy' to type 'LocalEPiSandbox.Templates.PageTypes.StartPageData'. 
```

你如何处理这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T06:39:23.250

您应该依赖于它的实现的抽象（您应该在 DataFactory 上方覆盖一些外观）。请查看[EPiAbstractions 对人们的更多可测试性！](http://joelabrahamsson.com/entry/more-testability-to-the-people-with-epiabstractions).

# iphone - 在 uidatepicker 中将最大日期设置为当前日期

> ID：11345676
> 
> 赞同：0
> 
> 时间：2012-07-05T13:46:18.793
> 
> 标签：iphone, ios, ios5, ios4

> **可能重复：**
> [UIDatePicker，根据今天的日期设置最大和最小日期](https://stackoverflow.com/questions/3064864/uidatepicker-setting-maximum-and-minimum-dates-based-on-todays-date)

我已经尝试分配但无法为 uidatepicker 提供任何范围，特别是当前日期的最大范围。无论我做什么，选择器总是显示所有的值。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T13:55:43.070

这是将日期选择器设置为 30 年前和 30 年后的可能答案。

你可以改变它的值..

```
NSCalendar *calendar = [[[NSCalendar alloc] 
initWithCalendarIdentifier:NSGregorianCalendar] autorelease];
NSDate *currentDate = [NSDate date];
NSDateComponents *comps = [[[NSDateComponents alloc] init] autorelease];
[comps setYear:30];
NSDate *maxDate = [calendar dateByAddingComponents:comps toDate:currentDate options:0];
[comps setYear:-30];
NSDate *minDate = [calendar dateByAddingComponents:comps toDate:currentDate options:0];

[datePicker setMaximumDate:maxDate];
[datePicker setMinimumDate:minDate]; 
```

希望这可以帮助..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T13:56:22.100

嗯，你真的应该阅读文档。UIDatePicker 有两个属性：maximumDate 和 minimumDate ...它们都是 NSDate 对象。享受 ！

# activemq - Apache ActiveMQ Apollo：虚拟主机停止

> ID：11345677
> 
> 赞同：1
> 
> 时间：2012-07-05T13:46:21.340
> 
> 标签：activemq, message-queue, php-5.3, stomp, apollo

我在 Windows Server 2008 R2 上运行[Apollo 1.3时遇到问题。](http://activemq.apache.org/apollo)我正在从 Web 应用程序（使用 stomp-php 的 PHP）发送 STOMP 消息，然后使用作为 Windows 服务运行的应用程序对其进行处理。这在一段时间内可以正常工作，但出乎意料的是，在向 Apollo 推送消息时出现以下错误：“虚拟主机已停止”。

Apollo 仍在运行，我什至可以从 Web 界面访问虚拟主机。让它再次运行的唯一方法（到目前为止我发现）是停止服务删除代理数据文件夹中的所有内容并再次启动服务。简单地重新启动服务是行不通的。

这是来自 apollo.log 的片段：

```
| WARN  | DB operation failed. (entering recovery mode): java.io.FileNotFoundException: C:\apache-apollo-1.3\mybroker\data\dirty.index\MANIFEST-000004 (Das System kann die angegebene Datei nicht finden) | org.apache.activemq.apollo.broker.store.leveldb.LevelDBClient | leveldb store io write
...
| WARN  | Could not recover snapshot of the index: java.io.IOException: Der Prozess kann nicht auf die Datei zugreifen, da ein anderer Prozess einen Teil der Datei gesperrt hat | org.apache.activemq.apollo.broker.store.leveldb.LevelDBClient | leveldb store io write 
```

这些是我能找到的唯一例外。

我认为这是一个配置错误而不是代码问题，但这里是相关的代码片段：

```
$stomp = new \FuseSource\Stomp\Stomp('tcp://127.0.0.1:61613');
$stomp->connect('admin', 'password');

$message = array():

$stomp->send('/queue/messages', json_encode($message)); 
```

我猜这是在虚拟主机处于非活动状态（即没有收到消息，没有连接）一段时间后触发的。因此，我正在考虑不时重新启动 apollo-broker 以防止触发它，但我不确定这是否真的是触发虚拟主机停止的原因。

谁能告诉我为什么虚拟主机突然停止以及我需要进行哪些配置更改以防止这种情况发生？我已经[在文档中进行了搜索](http://activemq.apache.org/apollo/documentation/user-manual.html#Virtual_Hosts)，但没有找到有关虚拟主机生命周期或类似内容的任何信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T16:33:00.760

鼓励 Apollo 1.3 的用户重新配置服务器以使用 BDB，因为这样更稳定。Apollo 甚至会在启动时记录一条消息，让您知道这一点：

```
Using the pure java LevelDB implementation which is still experimental. If 
the JNI version is not available for your platform, please switch to the BDB 
store instead. 
```

现在，就在最近发布了 Apollo 1.5，支持 Windows 上的 JNI 版本的 leveldb。因此，如果您想升级到 1.5，那也应该可以解决问题。

# sql-server - 在 SQL Server 2012 中使用新的分页 synax 的性能问题（仅偏移 n 行 FETCH NEXT m 行）

> ID：11345685
> 
> 赞同：0
> 
> 时间：2012-07-05T13:46:48.183
> 
> 标签：sql-server, performance, sql-execution-plan

我在 SQL Server 2012 中找到了一篇[关于](http://www.kodyaz.com/sql-server-2012/sql-paging-in-sql-server-2012-sql-order-by-offset-fetch-next-rows.aspx)新的分页 stynax 的帖子。喜欢

```
SELECT p.ProductName
FROM Products p
ORDER BY p.ProductID

OFFSET 10 ROWS
FETCH NEXT 10 ROWS ONLY 
```

那很棒。但是当我查看执行计划时，成本是 100%。这是否意味着 SELECT 语句将获取所有行然后执行 paing？这会导致性能问题？

我是 SQL Server 新手，谁能告诉我这个？谢谢。

![执行计划截图](../Images/57a84967071033f395cf372c79ebcb7f.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T14:37:39.187

无成本意味着与所有语句相比，特定语句的成本是多少。由于您只有一条语句，因此它占用了整个执行时间的 100%。如果您有两个语句，那么它将分摊成本。

另外为了避免混淆，我建议您以这种方式编写查询，这清楚地表明 OFFSET 实际上是 SELECT 查询的一部分：

```
SELECT p.ProductName
FROM Products p
ORDER BY p.ProductID
   OFFSET 10 ROWS
   FETCH NEXT 10 ROWS ONLY 
```

有帮助吗？

# sql - 使用 sql 查询计算类别中的新闻

> ID：11345686
> 
> 赞同：0
> 
> 时间：2012-07-05T13:46:50.763
> 
> 标签：sql

我有一个 news 和 news_categories 表。新闻表中的 news_category_id 列。

现在我想在页面中显示一个新闻类别列表。于是我写了一个sql来查询：

```
select count(n.id) as news_count, c.`id`, c.name from news n
    inner join news_categories c 
    on c.id = n.`news_category_id`
    group by n.news_category_id 
```

这似乎有效。但它不显示该类别中没有新闻的类别记录。查询结果只显示分类记录，只有相关分类的新闻。

如何使用单个 sql 查询显示所有类别记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:48:35.807

使用 a`left outer join`而不是`inner join`.

看到[这个关于连接的精彩解释](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

# symfony - 这个 DQL 查询是否正确？

> ID：11345689
> 
> 赞同：0
> 
> 时间：2012-07-05T13:47:00.160
> 
> 标签：symfony, doctrine-orm

我正在使用 Symfony2。

我有一个实体 Employee 和一个由 OneToMany 关联相关的实体 Message。

所以一个员工可以有一些消息，我想要一个给定员工最近发送的消息。

这个查询正确吗？

```
<?php
  public function getLast($id_employee)
  {
   $query = $this->_em->createQuery(
                 'SELECT MAX(m.sentAt) FROM MyBundle:Message m JOIN m.employee e 
                   WHERE e.id = ' . $id_employee);
    return $query->getSingleResult();
   } 
```

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:56:24.360

您无需执行 a `JOIN`，因为外部密钥已经在您的`message`表上，而且我们可以认为**一条消息**只属于**一个用户**，而一个用户可以拥有多条与他相关的消息。

所以你的查询将是

```
'SELECT MAX(m.sentAt), m.text 
 FROM MyBundle:Message m 
 WHERE m.employee_id = :id_employee' 
```

你必须以这种方式修改你的代码

```
$query = $this->_em->createQuery(
              'SELECT MAX(m.sentAt),m.text 
               FROM MyBundle:Message m 
               WHERE m.employee_id = :id_employee')
               ->setParameter('id_employee',$employee_id)
               return $query->getSingleResult(); 
```

但是，如果您必须加入，请记住这些重要的事情

1.  如果您的实体与关联相关并且您的唯一`ON`条件是关于键，则无需使用`WHERE`子句指定它
2.  Doctrine 为您提供了一种“更快”的方法来执行此类查询，而无需直接使用`DQL`（或仅使用一点）并使用类似`->leftJoin(..)`,`->where(..)`等等

# c - 使用指针下标整数变量

> ID：11345691
> 
> 赞同：3
> 
> 时间：2012-07-05T13:47:02.243
> 
> 标签：c, arrays, subscription

> **可能重复：**
> [在 C 数组中，为什么这是真的？a[5] == 5[a]](https://stackoverflow.com/questions/381542/in-c-arrays-why-is-this-true-a5-5a)
> [多维数组中的 C 奇怪数组语法](https://stackoverflow.com/questions/8109261/c-weird-array-syntax-in-multi-dimensional-arrays)

今天我偶然发现了这个[博客](http://www.ibm.com/developerworks/aix/library/au-hook_duttaC.html)。最吸引我的是这个：

```
int i;
i["]<i;++i){--i;}"]; 
```

好吧，我真的不知道数组下标中奇怪的“字符串常量”的目的是什么，但我很困惑如何为整数变量下标。所以我带来了这段代码：

```
#include <stdio.h>

int main(void) {
    int x = 10;

    printf("%d", x["\0"]); /* What is x["\0"]?! */

    return 0;

} 
```

**它使用带有-Wall -ansi -pedantic**的 MinGW 编译没有错误。然后此代码输出：105。

任何人都可以解释这个吗？

编辑：我发现下标内必须有一个指针，否则我会得到编译时错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T13:50:56.513

这是数组索引如何工作的结果：

给定一个数组：

```
int array[5]; 
```

然后

```
array[3] 
```

实际上只是另一种语法

```
*(array + 3) 
```

因此，这与

```
*(3 + array) 
```

这意味着你也可以做

```
3[array] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-05T13:53:31.243

C11 标准是这样说的：

> **6.5.2.1、数组下标**
> 
> [...]
> 
> 后缀表达式后跟方括号`[]`中的表达式是数组对象元素的下标指定。下标运算符的定义`[]` 与`E1[E2]`相同`(*((E1)+(E2)))`。由于适用于二进制 + 运算符的转换规则，if`E1`是一个数组对象（相当于，指向数组对象的初始元素的指针）并且`E2`是一个整数，`E1[E2]`指定`E2-th` 元素 of `E1`（从零开始计数）。

笔记：

> `E1[E2]`等同于`(*((E1)+(E2)))`

所以

```
 E1[E2] = E2[E1] 
```

. 此外，

> **6.4.5 字符串文字**
> 
> [...]
> 
> 然后使用多字节字符序列来初始化一个静态存储持续时间和长度刚好足以包含该序列**的数组。**对于字符串文字，数组元素具有类型`char`

因此执行以下操作是有效的：

```
"foobar"[x];
x["foobar"]; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-05T13:49:07.693

这是一个众所周知的把戏。由于指针运算的工作方式，以下是同义词：

*   `v[5]`
*   `5[v]`
*   `*(v + 5)`

`v`碰巧是字符串文字时也是如此。

# unicode - 在 C# 的控制台窗口中输出 Unicode 字符

> ID：11345700
> 
> 赞同：3
> 
> 时间：2012-07-05T13:47:29.497
> 
> 标签：unicode, console

我的应用程序生成波斯文本并在控制台窗口中显示为未知代码！如何在控制台的应用程序输出中包含 Unicode 文本？我曾经在下面的代码，但它不能正常工作！

```
Console.InputEncoding = Encoding.UTF8; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T14:05:59.127

如果您希望*输出*正确显示，您应该设置*输出编码：*

 *```
public class Test {
    static void Main() {
        System.Console.OutputEncoding = System.Text.Encoding.UTF8;
        System.Console.WriteLine("پارسی");
    }
} 
```

对我有用（是的，即使 Windows 控制台使用 UTF-16，你也必须设置 UTF-8；我不知道为什么）。

```
C:\>test.exe
پارسی 
```

请注意，`?????`在这种情况下，控制台可能会显示您需要将控制台字体设置为 TrueType 字体（例如 Consolas 或 Lucida Console），否则控制台会尝试将所有内容转换为 OEM 字符集，并且无法转换的字符会变成问号。之后控制台仍然没有显示波斯语，因为没有复杂的脚本渲染支持，但您可以复制/粘贴它就好了。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-05T13:56:23.943

据我所知，Windows 在内部使用 UCS-2。您是否尝试过将文本转换为这种编码？*

# java - Java Stack Dump - 等待锁定

> ID：11345701
> 
> 赞同：0
> 
> 时间：2012-07-05T13:47:33.803
> 
> 标签：java, blocked-threads

我们在 JSP Web 应用程序上使用 java 1.4，有时我们的 Web 应用程序会完全停止。当用户尝试访问主页时，他们得到的页面找不到。

发生这种情况时，我们运行堆栈转储并使用 samurai 我可以看到多个阻塞线程具有相同的消息

```
at java.util.Collections$SynchronizedMap.get(Collections.java:1942)      
- waiting to lock <0x23e40898> (a 
java.util.Collections$SynchronizedMap)      at 
org.hibernate.tuple.EntityModeToTuplizerMapping.getTuplizerOrNull(EntityModeToTuplizerMapping.java:53)      at 
org.hibernate.tuple.EntityModeToTuplizerMapping.getTuplizer(EntityModeToTuplizerMapping.java:66)      at 
org.hibernate.type.ComponentType.getPropertyValues(ComponentType.java:353)      at 
org.hibernate.type.ComponentType.toLoggableString(ComponentType.java:379)      at 
org.hibernate.pretty.MessageHelper.infoString(MessageHelper.java:89)      at 
org.hibernate.loader.Loader.loadFromResultSet(Loader.java:1355)      at 
org.hibernate.loader.Loader.instanceNotYetLoaded(Loader.java:1308)      at org.hibernate.loader.Loader.getRow(Loader.java:1206) 
     at org.hibernate.loader.Loader.getRowFromResultSet(Loader.java:580)      at 
org.hibernate.loader.Loader.doQuery(Loader.java:701)      at 
org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:236)      at 
org.hibernate.loader.Loader.doList(Loader.java:2220)      at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2104) 
     at org.hibernate.loader.Loader.list(Loader.java:2099)      at 
org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:378)      at 
org.hibernate.hql.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:338)      at 
org.hibernate.engine.query.HQLQueryPlan.performList(HQLQueryPlan.java:172)      at 
org.hibernate.impl.SessionImpl.list(SessionImpl.java:1121)      at org.hibernate.impl.QueryImpl.list(QueryImpl.java:79)      at 
org.springframework.orm.hibernate3.HibernateTemplate$29.doInHibernate(HibernateTemplate.java:849)      at
org.springframework.orm.hibernate3.HibernateTemplate.execute(HibernateTemplate.java:372)      at 
org.springframework.orm.hibernate3.HibernateTemplate.find(HibernateTemplate.java:840)      at
org.springframework.orm.hibernate3.HibernateTemplate.find(HibernateTemplate.java:836) 
```

我怎样才能确定是什么阻碍了这个线程。有什么工具可以用来识别吗？

谢谢

* * *

嗨，Mprivat，非常感谢。我也会把它带给我们的建筑师，看看我们是否可以完成这个升级。由于这只是每隔一段时间才会发生一次，因此需要一些时间才能确定这是否是原因。我会在几个月后反馈，因为只有时间才能告诉我们。多谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T13:58:24.413

根据其他研究，在我之前的答案之前：

Sounds like you are using a Hibernate version older than 3.2.6 (where they addressed this defect). Defect ID: HHH-2645

[http://lists.jboss.org/pipermail/hibernate-issues/2008-February/009043.html](http://lists.jboss.org/pipermail/hibernate-issues/2008-February/009043.html)

* * *

Normally, you should be able to match the "waiting to lock <0x23e40898>" messages with a "setting lock <0x23e40898>" message (spelling may wary). Do a complete stack dump (you can use jstack by the way, it's standard with the JDK), and search for your lock ID. You'll see a bunch of waits, but also the thread that sets it.

# rally - 我如何为 FormattedID 列添加指向用户故事的链接？

> ID：11345702
> 
> 赞同：0
> 
> 时间：2012-07-05T13:47:37.953
> 
> 标签：rally

我已经使用自由数据扩展了 App2.0 示例网格以包含格式化的 ID，但它仅显示为 TEXT 而不是链接。我使用 FormattedID 获取格式化 ID：record.get('FormattedID')

要获取 url，我尝试 record.get('FormattedID')._ref 但它不起作用。

任何人都可以提供帮助吗？我确实想使用自由数据，因为我有一个自定义列，但也希望格式化的 ID 和父字段成为链接。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T15:34:48.107

将以下列配置添加到网格的配置中：

```
{
    header: 'Formatted ID',
    renderer: function(value, metaData, record) {
        var linkBuilder = Ext.create('Rally.util.DetailLinkBuilder').inFrame(true);
        return linkBuilder.build(record.get('FormattedID'), record.get('_ref'), false);
    }
} 
```

请注意，DetailLinkBuilder 类在 SDK 文档中被标记为私有，因为它的接口尚未最终确定。它的接口很可能会在 SDK 的未来版本中发生变化，当您升级到较新版本的 SDK 时，您将需要更新您的代码。

# knockout.js - 未捕获的类型错误：对象 [object Object] 没有方法“dataBind”

> ID：11345705
> 
> 赞同：-2
> 
> 时间：2012-07-05T13:47:41.417
> 
> 标签：knockout.js

未捕获的 TypeError: Object [object Object] has no method 'dataBind' 获取此错误需要将数据绑定与表示 (HTML) 分离

```
<script type="text/javascript" src="/Scripts/knockout-2.1.0.js"></script>
<script type="text/javascript" src="/Scripts/jquery-1.7.2.js"></script>

Choose a ticket class:
    <select id='tickets'></select>
<p id='ticketOutput'></p>
<script id="ticketTemplate" type="text/x-jquery-tmpl">
    {{if chosenTicket}}
        You have chosen <b>${ chosenTicket().name }</b>
    ($${ chosenTicket().price })
        <button data-bind="click: resetTicket">Clear</button>
    {{/if}}
</script>
<script type="text/javascript">
    var viewModel = {
        tickets: [
            { name: "Economy", price: 199.95 },
            { name: "Business", price: 449.22 },
            { name: "First Class", price: 1199.99 }
        ],
        chosenTicket: ko.observable(),
        resetTicket: function () { this.chosenTicket(null) }
    };
    $('#tickets').dataBind({
Uncaught TypeError: Object [object Object] has no method 'dataBind'
        options: 'tickets',
        optionsCaption: "'Choose...'",
        optionsText: "'name'",
        value: 'chosenTicket'
    });
    $('#ticketOutput').dataBind({ template: "'ticketTemplate'" });
    ko.applyBindings(viewModel);
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T19:09:24.933

dataBind 函数是不显眼的 Knockout 库的一部分，默认情况下它不随 jQuery 提供。

您需要添加对页面的引用才能使用它。这就是您收到“没有方法数据绑定”错误的原因。

[不显眼的淘汰赛] [http://userinexperience.com/?p=689](http://userinexperience.com/?p=689)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T18:32:29.487

除非您使用的是示例中未显示的 jQuery 插件，否则没有 jQuery dataBind 函数

而是将数据绑定应用于 html 元素本身。改变

```
<p id='ticketOutput'></p> 
```

到

```
<p id='ticketOutput' data-bind=" template: 'ticketTemplate' "></p> 
```

并在应用绑定之前删除该 $.dataBind 调用

对“#tickets”数据绑定也做同样的事情

编辑：实际上这个问题有很多问题，所以我做了一个 jsfiddle 展示了正确的方法：

[http://jsfiddle.net/daedalus28/TAVgp/](http://jsfiddle.net/daedalus28/TAVgp/)

# java - 在 Java 中是否可以定义一个泛型方法以将超类型类作为参数？

> ID：11345711
> 
> 赞同：1
> 
> 时间：2012-07-05T13:48:00.563
> 
> 标签：java, generics

我想实现这样的目标：定义一个抽象方法

```
public abstract void registerError(*any subclass of an ErrorVO or ErrorVO e); 
```

在实际实现方法的子类中：

```
public void registerError(ASubclassOfErrorVO e); 
```

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T13:49:18.367

您可以在类的声明中使用泛型，如下所示：

```
static abstract class Parent<T extends ErrorVO> {
    public abstract void registerError(T e);
}

static class Child extends Parent<ASubclassOfErrorVO> {
    @Override
    public void registerError(ASubclassOfErrorVO e) {
    }
} 
```

在`<T extends errorVO>`a 中定义`T`为扩展的类`errorVO`。这不适用于方法声明的原因是，子类中可能有许多可能覆盖父方法的方法，只有通过`T`在类级别声明类型，编译器才能知道哪个方法被覆盖。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T13:56:23.690

```
public abstract class A <T extends ErrorVO> {
    public abstract void register(T e);
}

public class B extends A<SubclassOfErrorVO> {
    @Override
    public void register(SubclassOfErrorVOe e) {
    }
} 
```

# python - Scrapy没有进入解析方法

> ID：11345717
> 
> 赞同：0
> 
> 时间：2012-07-05T13:48:19.177
> 
> 标签：python, python-2.7, web-scraping, scrapy

我在使用 Scrapy 时遇到问题，由于某种原因它没有进入我的解析方法，我不知道为什么会这样。我尝试了不同的选择但没有成功。

这就是我的代码现在的样子。具体来说，有两条打印语句，而 parse() 方法中的一条没有被调用。

```
from scrapy.spider import BaseSpider
from scrapy.selector import HtmlXPathSelector
from scrapy import log
from scrapy.contrib.spiders import CrawlSpider, Rule
from scrapy.contrib.linkextractors.sgml import SgmlLinkExtractor

from comments.items import CustomerReview
import re

class AppidSpider(BaseSpider):

  name = "appid"
    allowed_domains = ["itunes.apple.com"]
    start_urls = [
        "http://itunes.apple.com/us/genre/ios/id36?mt=8"
    ]

    rules = [Rule(SgmlLinkExtractor(), follow=True, callback='parse')]
    print "---> THIS IS TEST 1"

    def parse(self, response):
        print " ----> THIS IS TEST 2"
        # ... More code afterwards 
```

这就是输出。如您所见， TEST 2 从未打印过。

```
$ scrapy crawl appid
2012-07-05 13:41:02+0000 [scrapy] INFO: Scrapy 0.14.4 started (bot: comments)
2012-07-05 13:41:02+0000 [scrapy] DEBUG: Enabled extensions: LogStats, TelnetConsole, CloseSpider, WebService, CoreStats, MemoryUsage, SpiderState
---> THIS IS TEST 1
2012-07-05 13:41:02+0000 [scrapy] DEBUG: Enabled downloader middlewares: HttpAuthMiddleware, DownloadTimeoutMiddleware, UserAgentMiddleware, RetryMiddleware, DefaultHeadersMiddleware, RedirectMiddleware, CookiesMiddleware, HttpCompressionMiddleware, ChunkedTransferMiddleware, DownloaderStats
2012-07-05 13:41:02+0000 [scrapy] DEBUG: Enabled spider middlewares: HttpErrorMiddleware, OffsiteMiddleware, RefererMiddleware, UrlLengthMiddleware, DepthMiddleware
2012-07-05 13:41:02+0000 [scrapy] DEBUG: Enabled item pipelines: FilterWordsPipeline
2012-07-05 13:41:02+0000 [appid] INFO: Spider opened
2012-07-05 13:41:02+0000 [appid] INFO: Crawled 0 pages (at 0 pages/min), scraped 0 items (at 0 items/min)
2012-07-05 13:41:02+0000 [scrapy] DEBUG: Telnet console listening on 0.0.0.0:6023
2012-07-05 13:41:02+0000 [scrapy] DEBUG: Web service listening on 0.0.0.0:6080
2012-07-05 13:41:02+0000 [appid] DEBUG: Crawled (200) <GET http://itunes.apple.com/us/genre/ios/id36?mt=8> (referer: None)
2012-07-05 13:41:02+0000 [appid] INFO: Closing spider (finished)
2012-07-05 13:41:02+0000 [appid] INFO: Dumping spider stats:
        {'downloader/request_bytes': 222,
         'downloader/request_count': 1,
         'downloader/request_method_count/GET': 1,
         'downloader/response_bytes': 9927,
         'downloader/response_count': 1,
         'downloader/response_status_count/200': 1,
         'finish_reason': 'finished',
         'finish_time': datetime.datetime(2012, 7, 5, 13, 41, 2, 694678),
         'scheduler/memory_enqueued': 1,
         'start_time': datetime.datetime(2012, 7, 5, 13, 41, 2, 604025)}
2012-07-05 13:41:02+0000 [appid] INFO: Spider closed (finished)
2012-07-05 13:41:02+0000 [scrapy] INFO: Dumping global stats:
        {'memusage/max': 95318016, 'memusage/startup': 95318016} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T14:02:57.610

正如 Creshal 在回调中所说，您需要使用调用某些方法而不是解析您的其他一些自定义方法。

但在这种情况下，这不应该是问题，因为您实际上没有任何规则要遵循，所以这并不重要。

我试过你的代码，它对我来说很好，它会打印出两条消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T13:57:34.037

为什么将 parse 作为字符串传递？试试`callback=self.parse`吧。

# java - Hibernate 标准 API 查询继承问题

> ID：11345720
> 
> 赞同：2
> 
> 时间：2012-07-05T13:48:36.423
> 
> 标签：java, hibernate

假设类'X'映射到表'X'，类'A'映射到表'A'，类'B'映射到表'B'。

表 X 结构：（X_ID，一些其他列） 表 A 结构：（A_Id，X_Id，一些其他列）表 B 结构：（A_Id，一些其他列）...表 B 也有 A_Id

**“B”类扩展了“A”类。**我们有它们的映射文件：

**“A”类父映射文件：**

```
@Entity
@Table(name = 'A')
@Inheritance(stratergy=InheritanceType.Joined)
public abstract class A {
@Id @Clumns(name = "A_Id)
@GeneratedValue
protected Long aId;
-- some more A specific fields
} 
```

**“B”类映射文件：**

```
@Entity
@Table(name= 'B')
Public class B extends A{
---- B specific fields
} 
```

现在，我有一个如下的 SQL 查询，我需要使用休眠条件 API 编写它。

```
select * from X
INNER JOIN A 
ON X.id = A.id
INNER JOIN B
ON A.id = B.id
where B.name = 'XYZ'
   and B.Sex = 'M' 
```

我想出了：

```
Criteria c = session.createCriteria(x.class, "x");
                    .createAlias("x.a", "a")
                    .createAlias("a.b", "b")          
                    .add(Restrictions.eq("b.sex", "M"))
                    .add(Restrictions.eq("b.name", "XYZ")); 
```

但是，如果我们检查映射文件，A 中没有 B 的直接引用。因此 hibernate 抛出“B 与 A 无关”实体。

有什么方法可以在查询条件中映射这种继承

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T14:01:24.567

B is-a A. 所以你不需要在 A 和 B 之间进行任何连接。Hibernate 会为你做这件事：

```
Criteria c = session.createCriteria(x.class, "x");
                    .createAlias("x.a", "b")
                    .add(Restrictions.eq("b.sex", "M"))
                    .add(Restrictions.eq("b.name", "XYZ")); 
```

# google-app-engine - 由 guestbook.py 处理的 index.py 表单页面并带有响应？

> ID：11345723
> 
> 赞同：-2
> 
> 时间：2012-07-05T13:48:47.357
> 
> 标签：google-app-engine

我需要 index.py 上的表单，以及由 guestbook.py 处理的 Datastore 查询响应（此处为“comment”），因此表单响应在表单提交后显示给访问者，因此有 2 页。在与我的应用程序集成之前，我正在编辑 Google 的留言簿以尽可能简单地执行此操作。数据存储正在运行，但响应未显示回访问者，POST 302。

```
application: guestbook
version: 1
runtime: python27
api_version: 1
threadsafe: yes

handlers:
- url: /
  script: index.app
- url: .* 
  script: guestbook.app

libraries:
- name: webapp2
  version: "2.5.1" 
```

索引.py

```
#!/usr/bin/env python
import cgi
import webapp2

class MainPage(webapp2.RequestHandler):
    def get(self):
        self.response.out.write("""<html>
<body>
          <form action="/sign" method="post">
            <div><textarea name="content" rows="3" cols="60"></textarea></div>
            <div><input type="submit" value="Sign Guestbook"></div>
          </form>
         </body>
         </html>""")

app = webapp2.WSGIApplication([
  ('/', MainPage),
], debug=True) 
```

留言簿.py

```
#!/usr/bin/env python
#
import cgi
import datetime
import webapp2

from google.appengine.ext import db
from google.appengine.api import users

class Greeting(db.Model):
  content = db.StringProperty(multiline=True)
  date = db.DateTimeProperty(auto_now_add=True)

class MainPage(webapp2.RequestHandler):
  def get(self):
    content = self.request.get("content")
    self.response.out.write('<html><body>')
    greetings = db.GqlQuery("SELECT * "
                            "FROM Greeting "
                            "ORDER BY date DESC LIMIT 1")

    for greeting in greetings:
        self.response.out.write('<blockquote>%s</blockquote>' %
                              cgi.escape(greeting.content))

        self.response.out.write('</body></html>')

class Guestbook(webapp2.RequestHandler):
  def post(self):
    content = self.request.get("content")
    greeting = Greeting(content = content)
    greeting.put()
    self.redirect('/')

app = webapp2.WSGIApplication([
  ('/', MainPage),
  ('/sign', Guestbook)
], debug=True) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T15:31:05.707

这`action`是一个 URL，而不是一个模块。您定义的唯一 URL 是`/`，它路由到`home.app`. 大概您的表单由该模块提供。

**编辑**您完全误解了 URL 在 GAE 中的工作方式，实际上在大多数 Web 框架中也是如此。GAE 的 URL也不`index.html`是`home.py`：它们分别是一个 HTML 模板和一个 Python 文件，GAE 可以使用它来构建对 Web 请求的响应。您`app.yaml`将 URL 映射到 Python 函数。在您的情况下，它将 URL 映射`/`到 Python 函数`home.app`，该函数位于`home.py`.

您绝不会`home.py`在 URL 中使用。如上所述，`action`必须是您在其中定义的 URL 之一，`app.yaml`或者，如果您正在使用支持 Python 模块内部路由的 webapp 等框架，则必须是其中定义的子 URL 之一。

当然，你也有映射`/`到静态`index.html`文件的问题，这似乎是完全错误的。我非常怀疑您是否可以将相同的 URL 映射到 GAE 中的两个处理程序，尽管我从未尝试过，但无论如何，该文件可能是一个模板，而不是您想要按原样提供的文件。删除该映射。

# c# - 从 C++ 调用 C++ DLL 有效，但不能从 C#

> ID：11345724
> 
> 赞同：8
> 
> 时间：2012-07-05T13:48:48.567
> 
> 标签：c#, c++, dll, loadlibrary

我有一个名为 tccdvc.dll 的 DLL，它是此处提供的 SDK 的一部分：

[http://www.commell.com.tw/Download/Driver/Industrial%20Peripheral/Driver/MPX-885/MPX-885%20SDK%20(1.2)/SetupCOMMELL%20MPX-885_20100627.rar](http://www.commell.com.tw/Download/Driver/Industrial%20Peripheral/Driver/MPX-885/MPX-885%20SDK%20(1.2)/SetupCOMMELL%20MPX-885_20100627.rar)

DLL 是用 C++ 编写的，检查 DLL 显示它与链接器版本 6.0 链接，所以我假设它是用 VC++ 6.0 编写的。DLL 不附带源代码，只有一个 .lib 文件和一个 .h 文件。所有导出的函数都被声明为 extern "C"（所以没有 C++ 名称修改）和 APIENTRY（所以 __stdcall）。

我在 Windows XP SP3（32 位）上的 Visual Studio 2010 中编写了一个 C++（不是 .NET）程序来访问这个 tccdvc.dll。这在使用提供的 .lib 文件和使用 LoadLibrary/GetProcAddress 时都可以正常工作。我还编写了一个使用 tccdvc.dll 的 C++ DLL（我们称它为 mywrapper.dll），同样，在两个版本中，一个使用 .lib 文件，另一个使用 LoadLibrary/GetProcAddress。同样，这工作正常。此 mywrapper.dll 使用 __cdecl 调用约定。它包含一个名为 InitMyWrapperDLL() 的函数，用于加载 tccdvc.dll。使用 LoadLibrary/GetProcAddress 的 mywrapper.dll 版本具有如下代码：

```
typedef int (APIENTRY *TCCPROCTYPE01)();

HMODULE TCCmodule;
TCCPROCTYPE01 Proc_TCC_DVCOpen;

extern "C" __declspec(dllexport) void InitMyWrapperDLL ()
{ TCCmodule = LoadLibrary("tccdvc.dll");
  Proc_TCC_DVCOpen = (TCCPROCTYPE01)GetProcAddress(TCCmodule, "TCC_DVCOpen");
  ...
} 
```

同样，使用 C++ 前端，这工作正常。但是，当从 C#（在同一台机器上）调用它时，LoadLibrary("tccdvc.dll") 调用返回 NULL。在 C# 中，我正在使用：

```
[DllImport("mywrapper.dll", CallingConvention=CallingConvention.Cdecl, CharSet=CharSet.Ansi, ExactSpelling=true, EntryPoint="InitMyWrapperDLL")]
private static extern void InitMyWrapperDLL ();

...

InitMyWrapperDLL(); 
```

当使用提供的 tccdvc.lib 文件编译 mywrapper.dll 时，它也会失败，错误代码为 0x8007045a（也称为 1114），这意味着 DLL 初始化失败，并且它将 mywrapper.dll 作为 DLL 的名称。事实证明，失败是因为 tccdvc.dll，它是通过 mywrapper.dll 加载的。

在 C# 中使用以下内容也会失败：

```
[DllImport("tcc.dll", CallingConvention=CallingConvention.StdCall, CharSet=CharSet.Ansi, ExactSpelling=true, EntryPoint="TCC_DVCOpen")]
private static extern Int32 TCC_DVCOpen ();

...

TCC_DVCOpen(); 
```

我也在声明中使用了“不安全”，但这没有任何区别。可以预见，因为 LoadLibrary() 失败，所以它甚至没有到达 TCC_DVCOpen()。

为了查明问题，我再次使用了 mywrapper.dll 的 LoadLibrary/GetProcAddress 版本，并将以下代码放入我的 C# 程序中：

```
[DllImport("kernel32.dll")]
private static extern IntPtr LoadLibrary (string lpLibFileName);

[DllImport("kernel32.dll")]
private static extern Int32 GetLastError ();

...

IntPtr hdll1 = LoadLibrary("mywrapper.dll");
IntPtr hdll2 = LoadLibrary("tccdvc.dll");
Int32 errcode = GetLastError(); 
```

此后，hdll1 有一个有效值，但 hdll2 为 0。使用 .NET 3.5 Framework 时，GetLastError() 再次返回 0x8007045a，但使用 .NET 4.0 时，GetLastError() 返回 0 (ERROR_SUCCESS)。

我使用 Sysinternals 的 Process Monitor 来获取更多信息，我可以看到 tccdvc.dll 正在被成功读取和映射。Process Monitor 显示的任何内容都没有给我任何提示，说明为什么它在使用 C# 时会失败，但在使用 C++ 时却没有。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T21:27:57.837

我有几个建议给你：

*   您可以创建一个 C++/CLI 类库项目，然后在您的 C# 项目中引用它。
*   就我而言，我发现 UnmanagedFunctionPointerAttribute 对调用至关重要，
*   有一种情况是，无论我做什么，对 .DLL 的调用从未从 C# 工作，只有 .LIB 对我有用（这意味着实现我的第一个建议）。故障排除让我发现“DLL 空间”不适合该特定库。

（关于最后一句话：我绝不是 C++ 专家，实际上这是我迄今为止所做的唯一项目。这当然值得更多细节，但我不知道也没有知识找到问题的根源，但它得到了修复，因为*我只是需要它*。感谢您指出任何错误/更好的解释。）

以下是适用于我的问题的一些解决方案：

[如何使用 C# 中的 C 回调？](https://stackoverflow.com/questions/10166970/how-to-use-a-c-callback-from-c) 有指向 .DLL 的链接，如果您想查看我的所有代码，请询问。

此外，在这个领域对我有帮助的一些工具：

*   用于查看 DLL 导出的[PE Explorer](http://www.heaventools.com/overview.htm)
*   [PInvoke 互操作助手](http://clrinterop.codeplex.com/releases/view/14120)有助于创建 PInvoke 声明

愿原力与你同在 ：-）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T22:52:05.350

因此，您的 C 代码在从 C++ 应用程序调用时可以工作，但相同的代码在从 .NET 二进制文件中调用时会失败，在`LoadLibrary`...

这只是一种预感，所以我不确定是否描述了您的情况，但`LoadLibrary`有一些复杂的标准来解析相对 DLL 名称的路径，这些标准可能会根据某些参数而有所不同。我不知道所有这些都在我的脑海中。可能是 .NET 二进制文件的 EXE 清单中的某些内容阻止它根据这些规则找到 DLL。您可以尝试调整`PATH`环境变量或使用绝对路径加载 DLL。（您可以使用`GetModuleFileName`etc. 来查找您自己的代码的绝对路径...）

# eclipse - Eclipse 中的 Perl：ant 构建

> ID：11345725
> 
> 赞同：1
> 
> 时间：2012-07-05T13:48:50.750
> 
> 标签：eclipse, perl, ant, build

当我在 Eclipse 中打开一个 Perl 代码并尝试运行时，它想提示我运行哪个 Build，例如作为 Ant Build 运行。

那么我应该怎么做才能使代码运行呢？我曾经直接在 Eclipse 中运行这些 Perl 代码，而不会产生这些额外的提示。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:53:25.633

尝试`EPIC`在 Eclispe 中安装插件，然后您就可以运行 Perl 代码了。

请参阅[如何在 Eclipse 中运行 Perl 脚本？](http://www.epic-ide.org/faq.php#runscript)了解更多详情。

# sql-server-2008 - 将新值输入特定列时的操作

> ID：11345727
> 
> 赞同：0
> 
> 时间：2012-07-05T13:48:52.043
> 
> 标签：sql-server-2008

我有一个数据库表，其中包含通过从日志文件导入插入的新记录。我想写一个在输入特定新字段时发送警报的作业。到目前为止，我一直在检查该字段中唯一条目的数量，当它增加设定值时，我会收到警报。问题是每次我需要返回并更新查询中的计数。所以只是想知道是否有另一种方法可以做到这一点。

```
Declare @count as int 
select @count = count(clientkey) from QueryData group by clientkey
If @@ROWCOUNT > 18

EXEC msdb.dbo.sp_send_dbmail @profile_name='DB Admin',
    @recipients = 'joe@mail.com',
    @copy_recipients = 'pete@mail.com',
    @subject = 'GPDB Warning',
    @body = 'A new clientkey is being used in the QueryData table' 
```

感谢任何回应

编辑：

桌子

```
CREATE TABLE [dbo].[QueryData](
[ImportDate] [datetime] NULL,
[clientKey] [nvarchar](100) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
[QueryTerms] [nvarchar](max) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
[UpdatedDate] [datetime] NULL,
[LastSearchDate] [datetime] NULL,
[QueryActivity]  AS (datediff(day,[UpdatedDate],[LastSearchDate])) PERSISTED,
[ImportMethod] [varchar](50) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
[PowerField] [nvarchar](5) COLLATE SQL_Latin1_General_CP1_CI_AS NULL
 ) ON [PRIMARY] 
```

因此，当导入发生时，importdate 会更新，并且 updatedDate 字段也会更新。clientKey 字段是我关心的一个字段，一个 clientkey 可以有多行，但我需要知道何时插入尚未插入的新密钥。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T14:02:24.707

您可以使用而不是触发器来执行此操作。唯一的并发症是您必须重复`INSERT`...

```
CREATE TRIGGER dbo.QueryData_NewClientKey
ON dbo.QueryData
INSTEAD OF INSERT
AS
BEGIN
  IF EXISTS (SELECT 1 FROM inserted AS i
    LEFT OUTER JOIN dbo.QueryData AS q
    ON i.clientkey = q.clientkey
    WHERE q.clientkey IS NULL
  )
  BEGIN
    -- send your e-mail here
  END

  INSERT dbo.QueryData(column1, columns2, etc.)
    SELECT column1, column2, etc. FROM inserted;
END
GO 
```

使用后触发器，您需要能够区分刚刚插入到表中的行和之前存在的行，因此逻辑稍微复杂一些。假设您在表上有一个主键，您可以说：

```
CREATE TRIGGER dbo.QueryData_NewClientKey
ON dbo.QueryData
FOR INSERT
AS
BEGIN
  IF EXISTS (SELECT 1 FROM dbo.QueryData AS new_data
    INNER JOIN inserted AS i
    ON new_data.key = i.key
    LEFT OUTER JOIN dbo.QueryData AS old_data
    ON i.clientkey = old_data.clientkey
    AND i.key <> old_data.key
    WHERE old_data.key IS NULL
  )
  BEGIN
    -- send your e-mail
  END
END
GO 
```

# arrays - YII 如何将 CHtml::link 转换为 bootstrap.widgets.BootButton？

> ID：11345735
> 
> 赞同：2
> 
> 时间：2012-07-05T13:49:10.843
> 
> 标签：arrays, twitter-bootstrap, yii

我遇到了一个小任务，我正在尝试将我在 YII 中编写的链接转换为 yii.bootstrap 按钮，但收效甚微。我在引导页面上的文档中寻找解决方案，但没有结果，所以我希望这里有人能指出我正确的方向。

所以链接的代码如下：

```
<?php echo CHtml::link(
        'delete', 
        '#', 
        array(
            'submit'=>'', 
            'params'=>array(
                'Price[command]'=>'delete', 
                'Price[id]'=>$id, 
                'noValidate'=>true)
            ));?> 
```

yiibotstrap 按钮的代码如下：

```
 <?php $this->widget('bootstrap.widgets.BootButton', array(
            'buttonType'=>'submit', 
            'type'=>'primary', 
            'icon'=>'ok white',
            'label'=>'Submit',
            // '', 'large', 'small' or 'mini'
)); ?> 
```

顺便说一下，在 YII 中进行 iam 编程（php 框架）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T14:40:05.070

试试这个。

```
<?php $this->widget('bootstrap.widgets.BootButton', array(
            'buttonType'=>'submitLink', 
            'type'=>'primary', 
            'icon'=>'ok white',
            'label'=>'Submit',
            'htmlOptions'=>array(
              'submit'=>'', 
              'params'=>array(
                'Price[command]'=>'delete', 
                'Price[id]'=>$id, 
                'noValidate'=>true)
            ),
)); ?> 
```

# java - 如何调试使用maven构建的android应用程序

> ID：11345740
> 
> 赞同：10
> 
> 时间：2012-07-05T13:49:26.493
> 
> 标签：java, android, maven, android-intent, maven-2

我目前正在尝试从 Eclipse 调试我的设备上的 android 应用程序。

设备已添加，我可以在控制台和 Eclipse 中看到它。控制台（Windows）：

```
adb devices
List of devices attached
0019cca27f2e6e  device 
```

和日食：

![在此处输入图像描述](../Images/26fc147ccc080418532760525b602649.png)

我可以在设备/模拟器上运行该应用程序而不会出现任何问题。我只是这样做`clean install`，`android:deploy`然后`android:run`像魅力一样工作。但我还不知道如何调试它。

但是当我实际在设备（三星 Galaxy SII）上运行应用程序时，我只能看到这两个进程正在执行`com.viber.voip`，`com.viber.voip:keepAliveReceiver`即使我运行它也看不到我的应用程序。但是在模拟器/模拟器上，我可以看到我的应用程序正在运行。

我已经通过这种材料：

[使用 android maven 插件调试应用程序启动](https://stackoverflow.com/questions/8679078/debugging-an-app-startup-with-android-maven-plugin)

[如何使用 Maven 在命令行中启动应用程序](https://stackoverflow.com/questions/6360103/how-to-start-application-in-command-line-with-maven)

[http://code.google.com/p/maven-android-plugin/wiki/Debug](http://code.google.com/p/maven-android-plugin/wiki/Debug)

无法破解密码。甚至尝试`maven-exec-plugin`通过调用下面的脚本来开始调试，这是 pom 中的插件：

```
<plugin>
            <artifactId>exec-maven-plugin</artifactId>
        <groupId>org.codehaus.mojo</groupId>
        <configuration>
            <executable>${basedir}/scripts/debug_app.cmd</executable>
        </configuration>
</plugin> 
```

的内容`debug_app.cmd`：

```
adb shell am start -D android.intent.action.MAIN -n my.package.name/.HelloAndroidActivity 
```

当我执行这个插件时，我得到以下错误：

```
Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] pkg=android.intent.action.MAIN }
Error: Activity not started, unable to resolve Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 pkg=android.intent.action.MAIN } 
```

`manifest.xml`如果需要的话，这是我的：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" >
</uses-permission>
<uses-permission android:name="android.permission.READ_PHONE_STATE" >
</uses-permission>
<uses-permission android:name="android.permission.SET_DEBUG_APP" >
</uses-permission>

<!-- <uses-permission android:name="android.permission.INTERNET" /> -->

<application
    android:icon="@drawable/icon"
    android:label="@string/app_name" >
    <activity android:name=".HelloAndroidActivity" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name=".DisplayMessageActivity" >
    </activity>
</application> 
```

有没有人设法使用 maven 来调试设备来构建应用程序？

**问题更新：**

添加`android:debuggable="true"`我的应用程序后出现在设备选项卡上，但我遇到了不同的问题（当我点击下面的*绿色调试图标*时）。

请看下面：

![在此处输入图像描述](../Images/586bf92249951b772f6743938f0e49db.png)

我找到了这个解决方法**（除了正确答案之外的解决方案）**：

[http://code.google.com/p/android/issues/detail?id=9932](http://code.google.com/p/android/issues/detail?id=9932)

我已经接受了下面的答案。也可能有用：

[https://groups.google.com/forum/?fromgroups#!topic/android-developers/DftP5gYcwYI](https://groups.google.com/forum/?fromgroups#!topic/android-developers/DftP5gYcwYI)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T13:58:27.663

添加

```
android:debuggable="true" 
```

在您的设备上显示并打开“USB 调试”。

[http://developer.android.com/tools/device.html#setting-up](http://developer.android.com/tools/device.html#setting-up)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T13:58:38.357

我的做法是，

1.  在 AndroidManifest.xml 文件中启用调试标志。
2.  在设备上部署应用程序。您现在应该在 Eclipse 调试管理器上看到您的应用程序的进程 ID。
3.  现在，在 Eclipse 运行/配置菜单中配置远程 java 应用程序的运行/调试配置。
4.  输入配置的所有详细信息。端口号将是您图像附件的第 3 列。
5.  在 Eclipse 中启动设备上的应用程序后“运行远程​​ java 应用程序配置”。
6.  您的应用程序现在应该遇到断点（如果有）。

# c# - In .NET, does the string returned by BigInteger.ToString() reflect the full precision of BigInteger?

> ID：11345745
> 
> 赞同：8
> 
> 时间：2012-07-05T13:49:48.953
> 
> 标签：c#, .net, biginteger

Until today I (implicitly) assumed that when I output a `BigInteger` via the parameterless (overridden) instance method `BigInteger.ToString()` then the return string would contain the complete and exact decimal representation of my "big" integer.

But on [the MSDN doc page](http://msdn.microsoft.com/en-us/library/dd268260.aspx) I read:

> "In most cases, the **ToString** method supports 50 decimal digits of precision. That is, if the **BigInteger** value has more than 50 digits, only the 50 most significant digits are preserved in the output string; all other digits are replaced with zeros. However, **BigInteger** supports the **"R"** standard format specifier, which is intended to round-trip numeric values. The string returned by the **ToString(String)** method with the **"R"** format string preserves the whole **BigInteger** value and can then be parsed with the **Parse** or **TryParse** method to restore its original value without any loss of data"._

However, I have not been able to find an example where `myBigInt.ToString()` differs from `myBigInt.ToString("R")`. The Remarks example from the above page does not, as claimed, provide an example, in my version of the framework (.NET 4.0 SP1). (Also `"G"` and `"R"` seem to be equivalent for `BigInteger`.)

**Is it safe to assume that the paramterless `ToString()` gives the full decimal expansion of the integer?** Did they change framework behavior, or has the above mentioned example code always been wrong?

**Note:** SO shows me [this "similar question" 2984184](https://stackoverflow.com/questions/2984184/) after I wrote this one, but I'm still submitting my question because the answer of 2984184 does not really claryfy how the zero-parameter `ToString()` works.

**EDIT BY MYSELF:**

It was a bit incosequent of me to link the `ToString(String)` overload on MSDN when my question is (primarily) about the `ToString()` overload. So see also [MSDN on `BigInteger.ToString()`](http://msdn.microsoft.com/en-us/library/dd268341) which mentions the 50 digits limit as well but does not provide an example with more than 50 digits.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T14:10:47.560

Decompiling the .NET 4.0 framework gives this chain of calls:

```
BigInteger.ToString
BigNumber.FormatBigInteger( ... format:= null ...)
BigNumber.ParseFormatSpecifier(format ...) 
```

within which we have

```
 if (string.IsNullOrEmpty(format))
    return 'R'; 
```

so it can be seen that **in this implementation**, `ToString()` is equivalent to `ToString("R")`. But, [as pointed out by @PaulPhillips](https://stackoverflow.com/a/11345910), given that the docs (slightly confusedly) explicitly disclaim the reliability of this, I would say the safest (and in any case the most self-documenting) thing to do is **use "R" when you need full fidelity**.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T13:58:57.470

I do not think it is a safe assumption.

Since they have explicitly documented it as *not* doing that, it seems like a bad idea to rely on this behavior. If it actually *is* the same, then its undocumented and could theoretically change at any time (though this seems unlikely).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T14:19:31.547

Looking at the source code the `ToString()` method simply calls:

`BigNumber.FormatBigInteger(this, (string)null, NumberFormatInfo.CurrentInfo);`

From there, the internal `BigNumber.FormatBigInteger(BigInteger value, string format, NumberFormatInfo info)` method has the following logic:

```
int digits = 0;
char format1 = BigNumber.ParseFormatSpecifier(format, out digits); 
```

So, now we look at the `BigNumber.ParseFormatSpecifier(string format, out int digits)` method and discover that because it passed in a null string it simply returns the character **'R'** with the number of digits (`digits`) equal to -1\. Whereas, if you actually passed in a string format you can specify the number of digits as well, for example... 'R25' and it will parse out 25 as the number of digits.

This is what I understood by looking at the source code.

# sql-server - 使用 JDBC 连接到 SQL Server LocalDB

> ID：11345746
> 
> 赞同：23
> 
> 时间：2012-07-05T13:49:50.297
> 
> 标签：sql-server, jdbc, localdb

是否可以使用 JDBC 连接到 SQL Server LocalDB？ [看来](https://blogs.msdn.microsoft.com/sqlexpress/2011/07/12/introducing-localdb-an-improved-sql-express/#comment-692)（截至 2011 年 12 月）这是不可能的。

您知道解决方法或状态更改吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2014-06-25T14:53:38.243

是的，有可能。

使用 jTDS 的 LocalDB 实例的连接字符串如下所示：

```
jdbc:jtds:sqlserver://./DatabaseName;instance=LOCALDB#88893A09;namedPipe=true 
```

这适用于 jTDS 1.3.2。你可以在这里下载一个版本：

[https://github.com/milesibastos/jTDS/releases/download/v1.3.2/jtds-1.3.2-dist.zip](https://github.com/milesibastos/jTDS/releases/download/v1.3.2/jtds-1.3.2-dist.zip)

要查找所需 LocalDB 的命名管道，请运行

```
SqlLocalDb info NameOfTheLocalDBInstance 
```

这会给你类似的东西`np:\\.\pipe\LOCALDB#88893A09\tsql\query`

最好使用特定的用户名/密码进行连接，因此还要在该 LocalDB 实例中为您的数据库创建一个登录名和用户（如果您还没有）：

```
sqlcmd -S np:\\.\pipe\LOCALDB#88893A09\tsql\query

CREATE LOGIN dbuser WITH PASSWORD = 'dbpassword'
GO
CREATE USER dbuser
GO
ALTER AUTHORIZATION ON DATABASE::DatabaseName TO dbuser
GO 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-03-02T15:23:41.533

**是否可以使用 JDBC 连接到 SQL Server LocalDB？**

不使用 Microsoft 的 JDBC 驱动程序。

jTDS JDBC[驱动](http://jtds.sourceforge.net)程序支持命名管道。

执行 SqlLocalDB.exe info MyInstance 将为您（连同其他信息）获取实例管道名称，例如“np:\.\pipe\LOCALDB#F365A78E\tsql\query”。

**您知道解决方法或状态更改吗？**

可能的解决方法是使用替代 JDBC 驱动程序或切换到[SQL Server 2012 Express](http://www.microsoft.com/en-us/download/details.aspx?id=29062)而不是 LocalDB。

**细节：**

Microsoft JDBC 驱动程序与 LocalDB 不兼容。

“不幸的是，Microsoft JDBC 驱动程序不支持连接到 LocalDB。发生这种情况是因为 LocalDB 仅支持命名管道连接，而我们当前的 JDBC 实现不支持命名管道。开发人员可能的解决方法是下载并安装 SQL Express，它并启用其 TCP/IP 支持。”

[路易斯·费尔南多·桑托斯 (MSFT) 2012 年 7 月 6 日](http://social.msdn.microsoft.com/Forums/en-US/sqldataaccess/thread/259f11e2-e740-40f8-9b6c-64d015ab4b74/)

“不幸的是，JDBC 驱动程序目前不支持 LocalDB，并且没有简单的解决方法。团队意识到这个缺失的功能，但提交连接项总是有助于 DCR 跟踪和优先级排序。”

[Krzysztof Kozielczyk - MSFT 2011 年 12 月 22 日](http://blogs.msdn.com/b/sqlexpress/archive/2011/07/12/introducing-localdb-a-better-sql-express.aspx#10250447)

“您现在使用 SQL Server Express 进行本地开发吗？您是在 Windows 还是其他平台上工作？很高兴听到更多关于您希望如何在 Java 应用程序中使用 LocalDB 的信息。”

[Shamitha Reddy，Microsoft JDBC Driver for SQL Server 项目经理，Microsoft JDBC Driver 产品团队 2012 年 4 月 13 日](http://blogs.msdn.com/b/sqlexpress/archive/2011/07/12/introducing-localdb-a-better-sql-express.aspx#10293706)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-02T12:26:43.167

我今天做了研究，使用 jTDS 和命名管道设置连接。

今天的状态是：**不可能！** 由于管道名称的限制，无法使用 jTDS 构建到 localDB 的连接字符串。在此处查看未解决的问题：http: [//sourceforge.net/p/jtds/bugs/716/](http://sourceforge.net/p/jtds/bugs/716/)

如前所述，localDB 不支持其他连接，但命名管道，所以到目前为止它看起来像是*不可能完成的任务*......

rgds

**编辑：** 正如评论中提到的，上面链接的问题中有补丁，您可以使用它来解决问题。对不起，我不能自己检查。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-08T16:44:06.977

要了解 LocalDb 和实例：

1.  在对象资源管理器中右键单击 LocalDb
2.  选择属性
3.  点击查看连接属性
4.  您将获得有关本地和网络服务器详细信息的所有信息

# java - 什么时候适合使用空白最终变量？

> ID：11345747
> 
> 赞同：13
> 
> 时间：2012-07-05T13:49:50.883
> 
> 标签：java, final

我正在查看有关最终变量的另一个[问题](https://stackoverflow.com/questions/11345061/why-must-a-final-variable-be-initialized-before-constructor-completes)，并注意到您可以声明最终变量而不初始化它们（一个[空白的最终](https://en.wikipedia.org/wiki/Final_%28Java%29#Blank_final)变量）。是否有理由这样做是可取的，什么时候有利？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-07-05T13:55:33.897

这对于创建不可变对象很有用：

```
public class Bla {
    private final Color color;

    public Bla(Color c) {this.color = c};

} 
```

Bla 是不可变的（一旦创建，它就不能改变，因为颜色是最终的）。但是您仍然可以通过用各种颜色构建它们来创建各种 Blas。

例如，另请参阅[此问题](https://stackoverflow.com/questions/7598245/immutable-in-java)。

**编辑**

也许值得补充一点，“空白决赛”在 Java 中具有非常特殊的含义，这似乎在评论中造成了一些混乱 - 参见[Java 语言规范 4.12.4](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.12.4)：

> 空白 final 是一个 final 变量，其声明缺少初始化程序。

然后，您必须在构造函数中分配该空白最终变量。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-05T13:56:44.370

类的最终属性必须在创建对象之前分配一个值。因此，您可以为它们赋值的最后一点是构造函数。

这通常用于[不可变对象](http://docs.oracle.com/javase/tutorial/essential/concurrency/immutable.html)。

```
 public class Foo {

  private final Bar bar;

  public Foo(Bar bar) {
    this.bar = bar;
  }

  public Bar getBar() {
   return new Bar(bar);
 } 
} 
```

[维基对此有何评论](http://en.wikipedia.org/wiki/Final_%28Java%29#Blank_final)

[防御性抄袭。](http://www.javapractices.com/topic/TopicAction.do?Id=15)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-05T13:55:44.283

当您在检测对象之前不知道值是什么时，您可以这样做，它只需要在其构造函数中分配一个值。

这就是制作[不可变对象](http://docs.oracle.com/javase/tutorial/essential/concurrency/immutable.html)的方式，它在构建器模式中使用。

```
class Builder{
    final BuilderContext context;

    private Builder(BuilderContext context){
        this.context=context;
    }       

    public static Builder New(){
        return new Builder(new BuilderContext());
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-05T13:59:10.273

空白最终变量必须在构造函数中“某处”分配。一个相当构造的例子：

```
public class Test {
    final int sign;
    public Test(String upDown) {
        if (upDown.equals("up")) {
            sign = +1;
        } else {
            sign = -1;
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-05T14:07:45.347

一种情况可能是当您有一个要声明为 final 的字段，但其赋值可能会引发异常，并且您希望能够在发生这种情况时采取措施：

```
class A {
  final URLConnection conn;
  A(String url) {
    try {
      this.conn = new URL(url).openConnection();
    } catch (IOException | MalformedURLException e) {
      // Maybe this isn't fatal, so just handle the Exception
      // here and move on happily
    }
  }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-05-19T18:12:06.480

在方法中使用一个空白的 final 变量来显示所有使用该变量的代码路径只分配该变量一次（或抛出异常）。Java 编译器将保证在使用之前分配一个空白的最终变量。

某些方法中的示例代码：

```
 final Foo foo;
  if (condition1()) {
    foo = makeFoo(1);
  } else if (condition2()) {
    throw new BarException();
  } else {
    foo = makeFoo(-1);
  }
  ...
  blahBlahBlah(foo); 
```

使用空白的最终变量会告诉代码的下一位读者，编译器保证有人在调用 blahBlahBlah(foo) 之前分配了 foo。

该问题询问“空白最终*变量*”。讨论“空白最终*字段*”是一个不同的讨论，并且本身就很有趣。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-05T13:56:31.923

> 注意到您可以`final`在不初始化变量的情况下声明变量

您必须稍后初始化它（例如在构造函数中），这样它就不会保持为空。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-05T13:57:21.027

来自[维基百科](http://en.wikipedia.org/wiki/Final_%28Java%29#Final_variables)

在 Java 1.1 中引入的空白 final 是一个 final 变量，它的声明缺少初始化器。空白期末只能分配一次，并且在分配发生时必须取消分配。为了做到这一点，Java 编译器会运行一个流分析，以确保每次赋值给一个空白的 final 变量时，该变量在赋值之前肯定是未赋值的；否则会发生编译时错误。

通常，Java 编译器将确保在为其分配值之前不使用空白 final，并且一旦分配了一个值，现在的 final 变量就不能重新分配另一个值。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-03-26T21:21:57.010

我发现它们对于派生状态的方法非常有用。它提供了一个干净的执行路径，并确保状态变量被分配一次且仅一次。例如：

```
public boolean isEdible() {
    final boolean edible;

    if (vegetable) {
        edible = true;
    } else if (animal) {
        if (vegetarian) {
            edible = false;
        } else {
            edible = true;
        } 
    }
    System.out.println("Is edible: " + edible);
    return edible;
} 
```

# c# - 如何用多个表填充数据集？

> ID：11345761
> 
> 赞同：21
> 
> 时间：2012-07-05T13:50:36.197
> 
> 标签：c#, sql, ado.net, dataset, datareader

我正在尝试填充包含 2 个具有一对多关系的表的 DataSet。我正在使用 DataReader 来实现这一点：

```
 public DataSet SelectOne(int id)
    {
        DataSet result = new DataSet();
        using (DbCommand command = Connection.CreateCommand())
        {
            command.CommandText = "select * from table1";

            var param = ParametersBuilder.CreateByKey(command, "ID", id, null);
            command.Parameters.Add(param);

            Connection.Open();
            using (DbDataReader reader = command.ExecuteReader())
            {
                result.MainTable.Load(reader);
            }
            Connection.Close();
        }
        return result;
    } 
```

但是我只有一张桌子坐满了。我如何实现我的目标 - 填写两个表格？

如果可能的话，我想使用 DataReader 而不是 DataAdapter。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-19T19:17:16.780

可以通过向数据库发送多个请求来填充具有多个表的 DataSet，或者以更快的方式：可以在单个请求中将多个 SELECT 语句发送到数据库服务器。这里的问题是从查询生成的表具有自动名称 Table 和 Table1。但是，生成的表名可以映射到应在 DataSet 中使用的名称。

```
SqlDataAdapter adapter = new SqlDataAdapter(
      "SELECT * FROM Customers; SELECT * FROM Orders", connection);
adapter.TableMappings.Add("Table", "Customer");
adapter.TableMappings.Add("Table1", "Order");

adapter.Fill(ds); 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-07-05T13:54:24.707

如果您使用多个 select 语句发出单个命令，则可以使用 NextResult 方法移动到数据读取器中的下一个结果集：http: [//msdn.microsoft.com/en-us/library/system.data.idatareader.nextresult。 aspx](http://msdn.microsoft.com/en-us/library/system.data.idatareader.nextresult.aspx)

我展示了它的外观：

```
public DataSet SelectOne(int id)
{
    DataSet result = new DataSet();
    using (DbCommand command = Connection.CreateCommand())
    {
        command.CommandText = @"
select * from table1
select * from table2
        ";

        var param = ParametersBuilder.CreateByKey(command, "ID", id, null);
        command.Parameters.Add(param);

        Connection.Open();
        using (DbDataReader reader = command.ExecuteReader())
        {
            result.MainTable.Load(reader);
            reader.NextResult();
            result.SecondTable.Load(reader);
            // ...
        }
        Connection.Close();
    }
    return result;
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-12-19T15:34:50.147

这是一个古老的话题，但对某些人来说可能有用：

```
 DataSet someDataSet = new DataSet();
        SqlDataAdapter adapt = new SqlDataAdapter();

        using(SqlConnection connection = new SqlConnection(ConnString))
        {
            connection.Open();
            SqlCommand comm1 = new SqlCommand("SELECT * FROM whateverTable", connection);
            SqlCommand comm2g = new SqlCommand("SELECT * FROM whateverTable WHERE condition = @0", connection);
            commProcessing.Parameters.AddWithValue("@0", "value");
            someDataSet.Tables.Add("Table1");
            someDataSet.Tables.Add("Table2");

            adapt.SelectCommand = comm1;
            adapt.Fill(someDataSet.Tables["Table1"]);
            adapt.SelectCommand = comm2;
            adapt.Fill(someDataSet.Tables["Table2"]);
        } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-05T13:56:58.797

[这是您问题的非常好的答案](http://msdn.microsoft.com/en-us/library/867whzw2.aspx)

请参阅上面 MSDN 页面上提到的示例：-

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-09-13T10:27:30.343

的方法在 上`Load`执行`DataTable`，因此在使用时不应显式调用，否则将省略序列中的奇数表。`NextResult``DataReader``NextResult``Load`

这是使用`DataReader`.

```
// your command initialization code here
// ...
DataSet ds = new DataSet();
DataTable t;
using (DbDataReader reader = command.ExecuteReader())
{
  while (!reader.IsClosed)
  {
    t = new DataTable();
    t.Load(rs);
    ds.Tables.Add(t);
  }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-09-08T08:09:23.807

```
protected void Page_Load(object sender, EventArgs e)
{
    SqlConnection con = new SqlConnection("data source=.;uid=sa;pwd=123;database=shop");
    //SqlCommand cmd = new SqlCommand("select * from tblemployees", con);
    //SqlCommand cmd1 = new SqlCommand("select * from tblproducts", con);
    //SqlDataAdapter da = new SqlDataAdapter();

    //DataSet ds = new DataSet();
    //ds.Tables.Add("emp");
    //ds.Tables.Add("products");
    //da.SelectCommand = cmd;
    //da.Fill(ds.Tables["emp"]);
    //da.SelectCommand = cmd1;

    //da.Fill(ds.Tables["products"]);
    SqlDataAdapter da = new SqlDataAdapter("select * from tblemployees", con);
    DataSet ds = new DataSet();
    da.Fill(ds, "em");
    da = new SqlDataAdapter("select * from tblproducts", con);
    da.Fill(ds, "prod");

    GridView1.DataSource = ds.Tables["em"];
    GridView1.DataBind();
    GridView2.DataSource = ds.Tables["prod"];
    GridView2.DataBind();
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-04-02T13:41:40.970

```
 string connetionString = null;
        SqlConnection connection ;
        SqlCommand command ;
        SqlDataAdapter adapter = new SqlDataAdapter();
        DataSet ds = new DataSet();
        int i = 0;
        string firstSql = null;
        string secondSql = null;

        connetionString = "Data Source=ServerName;Initial Catalog=DatabaseName;User ID=UserName;Password=Password";
        firstSql = "Your First SQL Statement Here";
        secondSql = "Your Second SQL Statement Here";
        connection = new SqlConnection(connetionString);

        try
        {
            connection.Open();

            command = new SqlCommand(firstSql, connection);
            adapter.SelectCommand = command;
            adapter.Fill(ds, "First Table");

            adapter.SelectCommand.CommandText = secondSql;
            adapter.Fill(ds, "Second Table");

            adapter.Dispose();
            command.Dispose();
            connection.Close();

            //retrieve first table data 
            for (i = 0; i <= ds.Tables[0].Rows.Count - 1; i++)
            {
                MessageBox.Show(ds.Tables[0].Rows[i].ItemArray[0] + " -- " + ds.Tables[0].Rows[i].ItemArray[1]);
            }
            //retrieve second table data 
            for (i = 0; i <= ds.Tables[1].Rows.Count - 1; i++)
            {
                MessageBox.Show(ds.Tables[1].Rows[i].ItemArray[0] + " -- " + ds.Tables[1].Rows[i].ItemArray[1]);

            }
        }
        catch (Exception ex)
        {
            MessageBox.Show("Can not open connection ! ");
        } 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-08-08T10:07:21.193

```
public DataSet GetDataSet()
    {
        try
        {
            DataSet dsReturn = new DataSet();
            using (SqlConnection myConnection = new SqlConnection(Core.con))
            {
                string query = "select * from table1;  select* from table2";
                SqlCommand cmd = new SqlCommand(query, myConnection);
                myConnection.Open();
                SqlDataReader reader = cmd.ExecuteReader();
                dsReturn.Load(reader, LoadOption.PreserveChanges, new string[] { "tableOne", "tableTwo" });
                return dsReturn;
            }
        }
        catch (Exception)
        {
            throw;
        }
    } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-12-28T09:55:59.100

```
DataSet ds = new DataSet();
using (var reader = cmd.ExecuteReader())
{
    while (!reader.IsClosed)
         {
              ds.Tables.Add().Load(reader);
         }
}
return ds; 
```

# python - Numpy：将函数数组应用于相同长度的二维值数组，就像按元素相乘一样？（使用 python 函数作为运算符？）

> ID：11345765
> 
> 赞同：8
> 
> 时间：2012-07-05T13:50:51.870
> 
> 标签：python, numpy

我有`numpy.array`s 其中列包含不同的数据类型，并且列也应该具有应用于它们的不同功能。我也有数组中的函数。

比方说：

```
a = array([[ 1, 2.0, "three"],
           [ 4, 5.0, "six"  ]], dtype=object)

functions_arr = array([act_on_int, act_on_float, act_on_str]) 
```

我当然可以通过划分事物来想办法做到这一点，但对我来说最自然的一件事是将其视为与广播的元素乘法，并将函数视为运算符。所以我想做类似的事情

```
functions_arr*a 
```

并得到效果

```
array([[act_on_int(1), act_on_float(2.0), act_on_str("three")],
       [act_on_int(4), act_on_float(5.0), act_on_str("six")  ]]) 
```

你知道按照这些思路实现目标的方法吗？

**编辑：**我将问题中数组的定义更改为包括`dtype=[object]`，因为人们指出这对于数组以我想要的方式存储类型很重要。

感谢您的回答和评论！我已经接受了 senderles 的回答，并且觉得这与我的想法非常接近。

由于我似乎对如何将运算视为乘法感到有些困惑，让我用另一个例子来澄清一下：

如您所知，这样的操作：

```
v = array([1,2,3])
u = array([[5,7,11],
           [13,17,19]])
v*u 
```

`v`将在行`u`和产量上广播

```
array([[ 1*5, 2*7,  3*11],
       [1*13, 2*17, 3*19]]) 
```

IE

```
array([[ 5, 14, 33],
       [13, 34, 57]]) 
```

如果我们现在要替换`v`为例如我们将拥有的[del 运算符（](http://en.wikipedia.org/wiki/Del)*以下实际上**不是**工作 python 代码*:)

```
V = array([(d/dx),(d/dy),(d/dz)])
u = array([[5,7,11],
           [13,17,19]])
V*u 
```

屈服（精神上）

```
array([[(d/dx)5, (d/dy)7, (d/dz)11]],
       [(d/dx)13,(d/dy)17,(d/dz)19]]) 
```

我承认对一堆常数求导并不是最有趣的运算，所以请随意用,和`u`中的一些符号数学表达式替换。无论如何，我希望这至少让我的推理和标题中关于“（使用 python 函数作为运算符？）”的一点更清楚。`x``y``z`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T15:22:06.580

正如 Sven Marnach 提醒我的那样，您创建的数组可能是 Python 对象数组。对它们的任何操作都可能比纯`numpy`操作慢得多。但是，只要您实际上并不期望这会非常快，您就可以很容易地完成您所要求的事情！[这与AFoglia](https://stackoverflow.com/a/11346524/577088)的建议没有太大区别，但更接近于您所要求的：

```
>>> a = numpy.array([[ 1, 2.0, "three"],
...                  [ 4, 5.0, "six"  ]], dtype=object)
>>> funcs = [lambda x: x + 10, lambda x: x / 2, lambda x: x + '!']
>>> apply_vectorized = numpy.vectorize(lambda f, x: f(x), otypes=[object])
>>> apply_vectorized(funcs, a)
array([[11, 1.0, three!],
       [14, 2.5, six!]], dtype=object) 
```

在这里也呼应AFoglia，很有可能您最好使用记录数组-这使您可以随意划分数组，并使用numpy [ufunc](http://docs.scipy.org/doc/numpy/reference/ufuncs.html)以更自然的方式使用它-这很多比 Python 函数更快，通常：

```
rec.array([(1, 2.0, 'three'), (4, 5.0, 'six')], 
      dtype=[('int', '<i8'), ('float', '<f8'), ('str', '|S10')])
>>> a['int']
array([1, 4])
>>> a['float']
array([ 2.,  5.])
>>> a['str']
rec.array(['three', 'six'], 
      dtype='|S10')
>>> a['int'] += 10
>>> a['int']
array([11, 14]) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T13:55:08.733

您正在寻找内置函数[zip()](http://docs.python.org/library/functions.html#zip)

一个简单的例子`lists`：

```
>>> a=[[ 1, 2.0, "three"],[ 4, 5.0, "six"  ]]

>>> funcs=[lambda x:x**2,lambda y:y*2,lambda z:z.upper()]

>>> [[f(v) for v,f in zip(x,funcs)]for x in a]
[[1, 4.0, 'THREE'], [16, 10.0, 'SIX']] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-05T14:33:30.247

它不是广播，因为原始数组只有一维。看起来它有 2 个维度，因为每个元素都有三个成员（一个 int、一个浮点数和一个字符串），但对于 numpy，这只是类型，并且维度数是 1。

它也不是乘法，因为您将函数应用于每个元素。（乘法并不比加法更多，因此`functions_arr * a`具有误导性的语法。）

尽管如此，您仍然可以编写与您想要的内容类似的东西。我会尝试 numpy.vectorize。未经测试，并假设输出 dtype 与原始数组相同。我想它会像...

```
def act_on_row(row) :
    return (act_on_int(row["int_field"]),
            act_on_float(row["float_field"]),
            act_on_str(row["str_field"]))

act_on_array = numpy.vectorize(act_on_row, otypes=[a.dtype])

acted_on = act_on_array(a) 
```

我从未尝试过矢量化，而且我不知道使用结构化 dtype 是否很棘手，但这应该可以帮助您入门。

不过，更简单的解决方案是按字段循环遍历数组。

```
rslt = numpy.empty((len(a),), dtype=a.dtype)

rslt["int_field"] = act_on_int(a["int_field"])
rslt["float_field"] = act_on_float(a["float_field"])
rslt["str_field"] = act_on_str(a["str_field"]) 
```

（您可能需要对每个单独的函数进行矢量化，具体取决于它们的作用。）

# php - 如何从 Silex 中的自定义文件/类连接到数据库

> ID：11345773
> 
> 赞同：2
> 
> 时间：2012-07-05T13:51:21.193
> 
> 标签：php, doctrine, silex

我第一次尝试这个迷你框架，这是我第一次使用 justa 框架:)
我将教义服务添加到我的 index.php 文件中，如下所示：

```
$app->register(new Silex\Provider\DoctrineServiceProvider(), array(
    'db.options' => array(
        'driver'   => 'pdo_sqlite',
        'path'     => __DIR__.'/../include/database.sqlite',
    ),
)); 
```

例如，我用一个带有返回数组的静态方法的类创建一个新文件。

```
<?php

namespace MyNameSpace;

class myClass{

    static function getStuff(){

       return array(1 => array('foo'=> 'bar',
                               'bar' => 'foo',
                              )
                   );

    }

} 
```

如您所见，它是硬编码的，因此我决定使用数据库（sqlite 就足够了），但我不知道如何访问文件中的 $app 变量。

另一方面，我可以在网上找到的所有教程都令人困惑，并且引用了带有 .phar 文件的旧 Silex 版本，现在已弃用，并且我找到的所有示例的目录结构都与我的不同（取自 fat Silex 压缩文件）

我的项目的目录结构是这样的：

```
├── composer.json
├── composer.lock
├── src
│   └── MyNameSpace
│       └── myClass.php
├── vendor
│   └── composer
│   └── doctrine
│   └── silex
│   └── ...
│   └── **autoload.php**
└── web
    └── css
    └── img
    └── js
    └── views
    └── .htaccess
    └── index.php 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T14:01:24.380

您需要知道的第一件事是访问`$app`是一种不好的做法。如果可能，您应该 DI。如果你真的想这样做，请检查下面的代码。

内部`index.php`（通常`bootstrap.php`）声明一个新服务：

```
$app['my_class'] = $app->share(function() use ($app) {
    // Retrieve the db instance and create an instance of myClass
    return new \MyNameSpace\myClass($app['db']);
}); 
```

添加构造函数 sur `myClass`：

```
namespace MyNameSpace;

class myClass
{
    /**
     * The connection
     *
     * @var \Doctrine\DBAL\Connection
     */
    private $db;

    /**
     * Constructor
     *
     * @param $db \Doctrine\DBAL\Connection
     */
    public function __construct($db)
    {
        $this->db = $db;
    }

    // ...
} 
```

然后你可以像这样检索一个完全初始化的实例`myClass`：

```
$myClass = $app['my_class']; 
```

# javascript - Websql表初始化错误

> ID：11345774
> 
> 赞同：0
> 
> 时间：2012-07-05T13:51:28.280
> 
> 标签：javascript, cordova, web-sql

我想用phonegap在web sql中做一些数据初始化。

下面是我的代码的一部分，当初始化表时，它总是进入错误回调。我没找到原因。

可以直接在浏览器中测试。

```
<!DOCTYPE HTML>
<html>
<head>
<title>Cordova</title>

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

    <script type="text/javascript" charset="utf-8">
    var db = null;
    //document.addEventListener("deviceready", onDeviceReady, false);
    $(document).ready(function(){
        onDeviceReady();
    });

    function errorCB(tx, err) {
        alert("Error processing SQL: "+err);
    }

    function successCB() {
        console.log("success!");
    }

    function onDeviceReady() {
        var dBVersion = localStorage.getItem("db_version");
        if(dBVersion == null){
            db = initDB();
            //init table, set db_version to local storage
            db.transaction(initTable, errorCB, function(){localStorage.setItem("db_version","1.0");});
        }else{
            db = openDatabase('beauty', dBVersion, 'test offline database', 200000);
        }
    }

    function initDB(){
        var myDB = null;
        try { 
            if (!window.openDatabase) { 
              alert('db init failed'); 
            } else {
                var shortName = 'beauty'; 
                var version = '1.0'; 
                var displayName = 'test offline database'; 
                var maxSize = 200000; 
                myDB = openDatabase(shortName, version, displayName, maxSize);
          }
      } catch(e) { 
          console.log(e);
          if (e.name == "INVALID_STATE_ERR") { 
              console.log("Invalid database version.");
          } else { 
              alert("Unknown error "+e+"."); 
          } 
      } 
      return myDB; 
    }

    function initTable(tx){
        $.getJSON("data.json",function(data){
            tx.executeSql('CREATE TABLE IF NOT EXISTS images (id INTEGER PRIMARY KEY, url TEXT, tag TEXT, type TEXT,status TEXT, unlocktime INTEGER, favorite INTEGER, phase INTEGER,other TEXT)');
            for(var i=0; i<data.length; i++){
                tx.executeSql('insert into images values ('+ data[i].id +',"' + data[i].url +'","' + data[i].tag +'","'+ data[i].type +'","' + data[i].status + '",' +data[i].unlocktime+','+data[i].favorite+','+data[i].phase+',"'+ data[i].other +'");');
            }
            console.log("init ok!");
        });
    }

    </script>
</head>
<body>
    <input type="button" value="Get Image" onclick="test()" /> <br/>

</body>
</html> 
```

json文件就像

```
[
    {
        "id": 101001,
        "url": "img/1.jpg",
        "tag": "other",
        "type": "local",
        "status": "normal",
        "unlocktime": 0,
        "favorite": 0,
        "phase": 1,
        "other": ""
    },
    {
        "id": 101002,
        "url": "img/2.jpg",
        "tag": "other",
        "type": "local",
        "status": "normal",
        "unlocktime": 0,
        "favorite": 0,
        "phase": 1,
        "other": ""
    }
] 
```

我使用 Chrome 测试。它警告“错误处理 SQL：未定义”。请帮助找出错误的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T17:35:30.673

我已经稍微更改了您的代码，现在它对我有用。我已经在 android 2.2 和 Chrome 中进行了测试，它将数据存储在 json 文件中定义的表中。

在更改中，我已经进行了数据库事务调用，`initTable()`而不是`initTable()`作为回调调用，因为一旦方法调用完成并且您正在创建表并在回调中插入数据，事务对象将不可用。

```
 function onDeviceReady() {
        var dBVersion = localStorage.getItem("db_version");
        if(dBVersion == null){
            window.db = initDB();
            //init table, set db_version to local storage
            initTable();
        }else{
            window.db = openDatabase('beauty', dBVersion, 'test offline database', 200000);
        }
    }

    function initTable(){
            $.getJSON("data.json",function(data){
                db.transaction(function(tx){
                    tx.executeSql('CREATE TABLE IF NOT EXISTS images (id INTEGER PRIMARY KEY, url TEXT, tag TEXT, type TEXT,status TEXT, unlocktime INTEGER, favorite INTEGER, phase INTEGER,other TEXT)');
                    for(var i=0; i<data.length; i++){
                        tx.executeSql('insert into images values ('+ data[i].id +',"' + data[i].url +'","' + data[i].tag +'","'+ data[i].type +'","' + data[i].status + '",' +data[i].unlocktime+','+data[i].favorite+','+data[i].phase+',"'+ data[i].other +'");');
                    }
                    console.log("init ok!");                
                }, errorCB, function(){localStorage.setItem("db_version","1.0");});
            });
        } 
```

完整源代码 - [https://gist.github.com/3055095](https://gist.github.com/3055095)

# c# - Silverlight 4 WCF RIA 域服务的复杂类型

> ID：11345775
> 
> 赞同：2
> 
> 时间：2012-07-05T13:51:28.857
> 
> 标签：c#, .net, silverlight, silverlight-4.0, wcf-ria-services

经过广泛的谷歌搜索后，我仍然对此感到头疼。

我正在尝试让域服务将对象列表返回到客户端。我的对象是

```
[DataContract]
public class MyComplexType {
    [Key]
    [DataMember]
    public int Id { get; set; }
    [DataMember]
    public string SomeString { get; set; }
    [DataMember]
    public IEnumerable<MySubType> SubTypes { get; set; }
}

[DataContract]
public class MySubType {
    [Key]
    [DataMember]
    public int Id { get; set; }
    [DataMember]
    public string AnotherString { get; set; }
} 
```

域服务具有以下内容

```
[Query]
[Invoke]
public IQueryable<MyComplexType> GetMyComplexTypes() {
    /* return stuff */
} 
```

但是在客户端 MyComplexType 对象没有 SubTypes 属性，我尝试添加该属性：

```
[DataMember]
public int ComplexTypeId { get; set; } 
```

...到 MySubType，以及属性：

```
[Association("SubType_FK", "Id", "ComplexTypeId")] 
```

...到 MyComplexType 中的 SubTypes 属性。

但它仍然没有将 SubTypes 属性推送到客户端。我有另一个对象（原理相同，但使用真实代码），其中 SubTypes 等效项位于客户端 POCO 上，但它始终为空（无论从服务器返回什么）。

我觉得我一定是在这里遗漏了什么，这应该不是那么难吧？任何帮助或解释或指向有用的资源将不胜感激。

**更新**：我发现如果我将以下查询添加到域服务中：

```
 public IQueryable<MySubType> GetMySubTypes() {
        throw new NotImplementedException();
    } 
```

我现在可以从客户端访问 MyComplexType.SubType 属性，但是当我使用以下代码对其进行测试时...

```
_Context.Load(_Context.GetMyComplexTypesQuery(),
            r => {
                myComplexTypes = r.Entities;
                var noCts = myComplexTypes.Count();
                foreach (var ct in myComplexTypes) {
                    var noSts = ct.SubTypes.Count();
                }
            }, null); 
```

我调试它，我创建了两个复杂类型（所以 noCts 是 2），但是对于每次迭代，noSts 都是 0，尽管我在服务器端添加了 SubTypes。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T14:52:19.467

您可能只需要添加`[ComplexType]`属性：

```
using System.ComponentModel.DataAnnotations;

[ComplexType]
public class MyComplexType {
    public int Id { get; set; }
    public string SomeString { get; set; }
    public IEnumerable<MySubType> SubTypes { get; set; }
}

[ComplexType]
public class MySubType {
    public int Id { get; set; }
    public string AnotherString { get; set; }
} 
```

`[DataContract]`和`[DataMember]`属性是可选的。它们由 WCF RIA 自动推断。

# c - 两个字符串的组合

> ID：11345777
> 
> 赞同：1
> 
> 时间：2012-07-05T13:51:42.613
> 
> 标签：c, recursion

我在我的大学上 C 课程，我认为我仍然停留在 JAVA 上，因为我无法获得下一个代码（递归）：

```
#include <stdio.h>
#include <conio.h>
#define N 11

int Combination(char *, char *, char *);
void main(){
int i;
char *S1[]={"","abc","abc","abc","abc","ab c","morning Venm","ABZ","12189","12189",      
    "TTTT"},

     *S2[]={"", "", "def", "def", "def", "def", "Good ita!", "ABAXZ", "129", "129", 
     "X"},

     *S3[]={"", "abc", "abcdef", "daebcf", "adfbce", "deab cf","Good morning Vietnam!",
            "ABAXABZZ", "12181299", "12112998", "XXXXX"};

for(i=0;i<N;i++){
    if(Combination(S1[i],S2[i],S3[i])) 
         printf("S1: \"%s\", S2: \"%s\", S3: \"%s\", 
         Combination!\n",S1[i],S2[i],S3[i]);
    else printf("S1: \"%s\", S2: \"%s\", S3: \"%s\", Not a 
         Combination!\n",S1[i],S2[i],S3[i]);

}

_getch();
}

/*Function name : Combination
  Input : address of three strings
  Output : true(1) if the third string is a combination of the two firsts strings,    
          false (0) if not
  Algorithm : check if the third string is made from the letters of the first and  
              second strings*/
int Combination(char *S1, char *S2, char *S3)
{
    if(!*S1 && !*S2 && !*S3) return 1;
    if(*S3==*S1 && *S3==*S2)
        return (Combination(S1+1,S2,S3+1)||Combination(S1,S2+1,S3+1));
    if(*S3==*S1) return Combination(S1+1,S2,S3+1);
    if(*S3==*S2) return Combination(S1,S2+1,S3+1);
    return 0;
} 
```

我想了解组合方法的任何一行。

1) if(!*S1 && !*S2 && !*S3) = 检查 3 个字符串是否为空？

2）什么部分：（S1 + 1，S2，S3 + 1） - 那在做什么？S1+1 会给我们数组上的下一个单词还是给出下一个字母？如果它会给我们下一封信 - 为什么？如果字符串相等，它已经检查过了？

我很困惑...

*   我得到了递归，但不是 S1+1\S2+1\S3+1 的一部分...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T13:57:08.803

*S1 是字符串 S1 的第一个字符，所以

```
if (!*S1 && !*S2 && !*S3) 
```

正在检查所有三个字符串的第一个字符是否为空，这意味着它们都是空字符串。

S1+1 实际上是删除了第一个字符的字符串 S1。通过传递指向第一个字符的指针，在 C 中传递字符串。通过 S1+1，字符串的开头向下移动一个字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T14:01:02.840

至于第 2 部分）， S1 + 1 将为您提供下一个字符串的地址，而不是下一个字符。下一个字符是 (*S1) + 1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T14:05:06.423

```
if (!*S1) 
```

检查是否`S1`为空 C 字符串。

```
S1+1 
```

的一种子串`S1`。If`S1`是指向`"abc"`then`S1+1`的指针`"bc"`。

编辑：假设这`S1`是一个指针`char`，就像传递给`Combination`函数的参数一样：

```
...(char *S1, ... 
```

其他一些答案似乎假设这`S1`是一个指针数组`char`，就像在你的`main`函数中一样：

```
char *S1[] = ... 
```

你可能应该给他们不同的名字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T14:05:38.077

**1) if(!*S1 && !*S2 && !*S3) = 检查 3 个字符串是否为空？**

它用于检查所有字符指针是否都到达字符串的末尾（即）null。如果全部到达结束，则返回 1。

**2）什么部分：（S1 + 1，S2，S3 + 1） - 那在做什么？S1+1 会给我们数组上的下一个单词还是给出下一个字母？**

它会给我们下一个角色。

**如果它会给我们下一封信 - 为什么？如果字符串相等，它已经检查过了？**

检查下一个字符的组合。

# javascript - 更改按钮的背景颜色

> ID：11345780
> 
> 赞同：0
> 
> 时间：2012-07-05T13:52:00.760
> 
> 标签：javascript, jquery, css

是否可以在下面的脚本中更改投票按钮的背景颜色？

```
 <script type="text/javascript" charset="utf-8" src="http://static.polldaddy.com/p/6352993.js"></script>
    <noscript><a href="http://polldaddy.com/poll/6352993/">This is very long test question to test how polldaddy handles questions that exceed that normal length............ yes a very long question indeed..............</a></noscript>​ 
```

该按钮的样式为类：'pds-vote-button'

这是一个小提琴：http: [//jsfiddle.net/25LjE/8/](http://jsfiddle.net/25LjE/8/)

这是我尝试过但似乎没有任何效果的方法：

```
.pds-vote-button {
    background-color:blue !important;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T13:54:09.757

是的。是的，有可能做到这一点..

[小提琴](http://jsfiddle.net/maniator/25LjE/53/)：

当我这样做时工作：

```
.pds-vote-button {
    background:blue !important;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T13:53:53.413

尝试在呈现按钮时获取生成的 dom，而不是通过 javascript 应用您的样式。您也可以通过这种方式替换图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T13:55:04.850

实际上按钮背景来自图像......您需要更改图像

这：

```
.pds-vote-button {
    background:blue !important;
} 
```

覆盖图像 css 属性。

# sql - SQL - 使用 Group By 时用逗号分隔数据

> ID：11345782
> 
> 赞同：3
> 
> 时间：2012-07-05T13:52:03.440
> 
> 标签：sql, tsql, concatenation, coalesce

我正在使用 SQL Server 和 TSQL：

我想做的是在另一列上使用 group by 时在一列上用逗号分隔值。请参阅下面的数据示例。

```
col1 --- col2

1121 美国广播公司
第 1123 节
第1335章
第1121章
1121 美国广播公司

```

我想在“col1”上分组并计算记录数，但如果数据不同，我也想在 col2 上连接。例如，使用值“1121”作为参考，请参见下面的数据输出。

```
数量 --- col1 --- col2

3 1121 abc, 定义
1 1123 aee
1 1335 afg

```

我想过也许使用 COALESCE，但我不确定在另一列上使用 group by 时如何实现它。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T14:22:58.230

这是一个完整的，经过测试的工作示例。

```
create table tmp (col1 varchar(100), col2 varchar(100));
insert into tmp values ('1121',    'abc');
insert into tmp values ('1123',    'aee');
insert into tmp values ('1335',    'afg');
insert into tmp values ('1121',    'def');
insert into tmp values ('1121',    'abc');

SELECT 
distinct r.col1,
       STUFF((SELECT distinct ','+ a.col2
               FROM tmp a
             WHERE r.col1 = a.col1
            FOR XML PATH(''), TYPE).value('.','VARCHAR(max)'), 1, 1, ''),
       (select COUNT(*) cnt from tmp a where r.col1 = a.col1) cnt
 FROM tmp r 
```

结果

```
1121    abc,def 3
1123    aee     1
1335    afg     1 
```

**参考：**[在这里](https://stackoverflow.com/questions/1817985/how-do-i-create-a-comma-separated-list-using-a-sql-query) 使用 OMG Ponies 的答案作为指南。

# tomcat - Maven：找不到标签库描述符

> ID：11345785
> 
> 赞同：3
> 
> 时间：2012-07-05T13:52:06.607
> 
> 标签：tomcat, maven, jstl, jsp-tags

我正在使用 maven3 和 tomcat7 ，我想在我的 jsp 页面中使用 JSTL，所以我添加了这个 taglib：

```
 <%@ taglib uri="http://java.sun.com/jstl/core" prefix="c" %> 
```

我收到此错误消息的问题：找不到标记库描述符这是添加的依赖项：javax.servlet jstl 1.1.1

```
 <dependency>
        <groupId>taglibs</groupId>
        <artifactId>standard</artifactId>
        <version>1.1.2</version>
    </dependency> 
```

我试过这个标签库，但同样的问题仍然存在：

```
 <%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %> 
```

请问你有什么想法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T04:48:09.590

希望这个答案能帮助新人搜索同一主题..就像我一样，但没有找到任何答案..最后我修好了..

有几个步骤要遵循.. 对于 Tomcat 7 和 maven ，jstl 1.2 和标准 1.1.0 是兼容的

将 pom.xml 文件更新为

```
 <dependency>
<groupId>jstl</groupId>
<artifactId>jstl</artifactId>
<version>1.2</version>
    </dependency>

    <dependency>
    <groupId>taglibs</groupId>
    <artifactId>standard</artifactId>
    <version>1.1.0</version>
    </dependency> 
```

将 web.xml 文件更新为

```
 <web-app version="2.4" xmlns="http://java.sun.com/xml/ns/j2ee" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns /j2ee/web-app_2_4.xsd"> 
```

这有效！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T15:43:33.270

您需要两个不同的 jar 文件才能使标签工作。您已将标准列为依赖项，但您还需要为 JSTL 添加一个依赖项。

# java - EJB 依赖注入适用于 EAR，但不适用于 JAR

> ID：11345790
> 
> 赞同：1
> 
> 时间：2012-07-05T13:52:17.617
> 
> 标签：java, dependency-injection, ejb, weblogic-10.x

# 环境

*   两个具有远程接口的无状态 EJB。EJB1 被注入到 EJB2 中。

```
 /// EJB1

    package com.xxx.layer1;

    @Remote
    public interface EJB1Remote {
    }

    @Stateless (mappedNamed="com.xxx.EJB1")
    public class EJB1 implements EJB1Remote {
    }

    /// EJB2

    package com.xxx.layer2;

    import com.xxx.layer1;

    @Remote
    public interface EJB2Remote {
    }

    @Stateless (mappedNamed="com.xxx.EJB2")
    public class EJB2 implements EJB2Remote {

        @EJB(mappedNamed="com.xxx.EJB1")
        EJB1Remote ejb1;
    } 
```

*   EJB2 还使用了一些可选包（在其 MANIFEST 中声明）

*   WebLogic 应用服务器 (10.3.3)

*   两个 EJB 打包成两个单独的 JAR 文件

# 问题

如果将两个 JAR 文件打包到一个 EAR 文件中并进行部署，则依赖注入有效。但是，如果我单独部署它们，即使在我首先部署了 EJB1 并在 Weblogic ( ***com.xxx.EJB1#com.xxx.layer1.EJB1Remote*** ) 中验证了全局 JNDI 名称之后，EJB2 的部署也会失败并出现***ClassNotFoundException: com.xxx.layer1。 EJB1远程***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T01:17:07.390

在这种情况下，每个单独的 JAR 文件都是 WebLogic 中自己的应用程序，每个应用程序都有自己的类加载器。因此，当单独部署 JAR 文件（未捆绑在 EAR 文件中）时，它们的类加载器不会看到其他类中的类。

在这种情况下，我将 EJB2 的接口分离到另一个 JAR 文件中，并将其部署为可选包，并将其引用添加到其他 JAR 文件的清单中。

# session - 在 chrome 中设置 cookie 标头不适用于以下内容

> ID：11345792
> 
> 赞同：2
> 
> 时间：2012-07-05T13:52:31.473
> 
> 标签：session, google-chrome, cookies

以下设置的 cookie 标头在 chrome 中不起作用（在 firefox 中工作），除了生命时间设置为**遥远的未来**，例如（2015-1-1）或**完全删除它**

```
Set-Cookie:zii_s=s81d344olng0sfc4lt3ogqsup1; expires=Thu, 18-Oct-2012 18:51:01 GMT; path=/; domain=***; HttpOnly 
```

谁能告诉我它有什么问题以及如何绕过它？

# javascript - 如何将 console.log 响应存储在数组中

> ID：11345796
> 
> 赞同：-1
> 
> 时间：2012-07-05T13:52:50.120
> 
> 标签：javascript, jquery, facebook

我有一个函数可以返回我在 facebook 上朋友的姓名和 ID。我需要帮助将它们存储在数组中以便以后访问它们。有任何想法吗？

```
//using JQuery 
function getFriends() {
    alert(" ok lets try and retrieve some friends ");
    FB.api('/me/friends', function (response) {
        if (response.data) {
            alert("waiting for the buddies list");
            $.each(response.data, function (index, friend) {
                console.log(friend.name + ' has id:' + friend.id);
            });
        } else {
            alert("Unable to retrieve friends' list");
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T13:55:37.743

替换这一行：

```
console.log(friend.name + ' has id:' + friend.id); 
```

像这样：

```
friends.push({'name' : friend.name, 'id' : friend.id}); 
```

虽然看起来你基本上只是在运行响应数据并重建它，也许从每个朋友那里扔掉一些额外的数据？

# java - 用 RestFB 获取用户好友图片的方法？

> ID：11345797
> 
> 赞同：1
> 
> 时间：2012-07-05T13:52:55.213
> 
> 标签：java, facebook, restfb

我想显示用户朋友的图片和姓名，但`getPicture()`方法似乎不起作用。

谁能告诉我将使用什么方法来获取用户朋友的照片？

我的代码是

```
Connection<User> myFriends = facebookClient.fetchConnection("me/friends", User.class, Parameter.with("fields", "id,name,picture"));

// Fetching user connections
List<User> friendsList = myFriends.getData(); 

for (User userz : friendsList) {
    // System.out.println(userz.getPicture() + " : " + userz.getName());
    response.getWriter().println(userz.getId() + " : " + userz.getName()+" : " + userz.getPicture()); 
```

NetBeans 无法找到该`getPicture()`方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T03:10:13.393

不需要任何方法就用这个

```
URL url= new URL("https://graph.facebook.com/<your friends id here>/picture?type=normal");
url.openStream 
```

# opengl - 在OpenGL中的模型矩阵转置后翻转纹理

> ID：11345805
> 
> 赞同：0
> 
> 时间：2012-07-05T13:53:44.537
> 
> 标签：opengl, matrix, transpose

在OpenGL中，我们将z方向向前（进入屏幕）作为负值。我将模型矩阵（平面图元）转置为正值。但是有一个问题-纹理在局部X轴上翻转。我可以翻转它矩阵X轴的负缩放。是否有更优雅的方法来实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T16:27:39.393

> 我转置模型矩阵（平面图元）以使其为正。

不要那样做。如果要使 +Z 向前，*则要否定*Z。这意味着创建一个在 Z 中带有 -1 的比例矩阵。

# perl - 根据警告编译指示，为什么“NaN”是数字？

> ID：11345807
> 
> 赞同：6
> 
> 时间：2012-07-05T13:53:52.250
> 
> 标签：perl, nan

[`warnings`](http://perldoc.perl.org/warnings.html)编译指示没有抱怨“NaN”和“nan”是非数字的，这让我有点惊讶（和害怕） 。

为什么不`warnings`排放他们的习惯`'Argument isn't numeric in addition (+)`？

**测试用例**

```
$ perl -Mstrict -wE 'say 0+$_ for qw/string NaN nan fail/;'
Argument "string" isn't numeric in addition (+) at -e line 1.
0
0
0
Argument "fail" isn't numeric in addition (+) at -e line 1.
0 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-05T14:01:54.913

来自[perlop](http://perldoc.perl.org/perlop.html)

> 二进制“<=>”返回 -1、0 或 1，具体取决于左参数在数值上是否小于、等于或大于右参数。如果您的平台支持将 NaN（非数字）作为数值，则将它们与“<=>”一起使用会返回 undef。NaN 不是 "<"、"=="、">"、"<=" 或 ">=" 任何东西（甚至是 NaN），所以这 5 个返回 false。NaN != NaN 返回 true，NaN != 也一样。
> 
> 如果您的平台不支持 NaN，则 NaN 只是一个数值为 0 的字符串。

NaN 在不同的平台上表现不同。它在某种程度上是数字的，因为它可以在数字运算中发挥作用。但它实际上也不是一个数字，因为它具有未定义的值。

此外，它的行为不可移植，因为：

```
perl -E "say 'yes' if 0 == 'NaN'" 
```

除非您使用 Perl 5.22 或更新版本，否则可能会在不同平台上产生不同的结果。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-05T14:02:28.817

“不是数字”是最常表示为“NaN”的值的长名称。另见[维基百科文章](http://en.wikipedia.org/wiki/Not_a_Number)。用 NaN 计算实际上是有意义的（它甚至在 IEEE754 中有一个实际的位级表示）。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-07-05T14:00:07.330

`NaN`是`NiL`in 字符串的数字对应项。

# zend-framework - 视图/助手 zend 中的子文件夹

> ID：11345808
> 
> 赞同：0
> 
> 时间：2012-07-05T13:53:52.143
> 
> 标签：zend-framework, view, view-helpers

我想在我的视图/助手中创建不同的文件夹，并在其中添加我的视图助手类。但我无法访问这些课程。

做这个的最好方式是什么？

我尝试调整我的 application.ini 文件设置......但没有运气

这是我在我的ini文件中设置的：

```
resources.view.helperPath = APPLICATION_PATH "/views/helpers/models"
resources.view.helperPath = APPLICATION_PATH "/views/helpers/test" 
```

`models`并且`test`是我文件夹中的子文件`/views/helpers`夹

任何人都可以提出更好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T22:11:19.463

使用您当前的设置，您只需为 Zend ( )`application.ini`中的默认视图助手添加另一个路径。`Zend_View_Helper_`

您必须指定要使用的类前缀：

```
; View_Helper_Models is the class prefix
resources.view.helperPath.View_Helper_Models = APPLICATION_PATH "/views/helpers/models"
; View_Helper_Test is the class prefix
resources.view.helperPath.View_Helper_Test = APPLICATION_PATH "/views/helpers/test" 
```

现在应用程序知道如何将您的类名映射到路径。或者，您可以在 main 中启用此功能`Bootstrap.php`：

```
protected function _initViewHelper()
{
   $this->bootstrap( 'view' );
   $this->_view = $this->getResource( 'view' );

   $this->_view->addHelperPath( APPLICATION_PATH . '/views/helpers/models',
                                'View_Helper_Models' );
   $this->_view->addHelperPath( APPLICATION_PATH . '/views/helpers/test',
                                'View_Helper_Test' );
} 
```

**注意：**路径的大小写必须正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T03:18:07.017

在您的配置文件中添加这两行第二行是您的帮助者的自定义路径

```
resources.view[] =    
resources.view.helperPath.Zend_View_Helper = APPLICATION_PATH "/../library/FolderA/FolderB/helpers" 
```

在创建 Helper 时，像这样给出类名

```
<?php
class Zend_View_Helper_Foo extends Zend_View_Helper_Abstract
{
   public function foo(){
       echo 'hello world';
   }
} 
```

并在您的任何视图文件中调用该助手作为`$this->foo();`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-05T15:48:59.160

我认为您只需要输入正确的视图助手类名称即可！例如，您在 APPLICATION_PATH "/views/helpers/models" 中创建一个文件 "Mine.php"，然后将类命名为`class View_Helper_Models_Mine`

希望这有帮助。

问候，艾哈迈德 B.

# python - 通过 lambda 将变量传递给函数 Tkinter

> ID：11345810
> 
> 赞同：2
> 
> 时间：2012-07-05T13:54:02.633
> 
> 标签：python, class, lambda, callback, tkinter

我对以下代码的问题是通过 lambda 将“i”（只是一个简单的数字范围，但根据 number_boxes 更改）传递给回调，以便创建每个盒子的单独功能。

我已经尝试阅读教程并在我的代码中尝试了各种事情，但它要么不起作用，要么我得到错误'lambda（）只需要 2 个参数，3 个给定'等。我相信我需要制作 'i' 一个列表但是我仍然得到这个特殊的错误..

我已经评论了出现问题的代码。我需要返回每个框中的值并覆盖文本。

谢谢你。

```
self.clicked = [] # In my __init__ definition
self.numbers = [StringVar() for i in xrange(self.number_boxes) ]   # Create Stringvar for each box

for i in xrange(self.number_boxes): # For each number, create a box

        self.clicked.append(False) # Not clicked in yet
        self.box.append(Entry(self.frame_table,bg='white',borderwidth=0, width=10, justify="center", textvariable=self.numbers[i], fg='grey')) # Textvariable where I enter a value to get after, need to do for each box (use box[i] but cannot for append)
        self.box[i].grid(row=row_list,column=column+i, sticky='nsew', padx=1, pady=1) 
        self.box[i].insert(0, "Value %g" % float(i+1))
        self.box[i].bind("<Button-1>", lambda event, index=i : self.callback(event, index)) # Need to pass the 'i's' to callback but having lambda difficulties

for i in self.numbers: 
        i.trace('w',lambda index=i: self.numberwritten(index) ) # Need for each box again here

def numberwritten(self, index): # A way of combining numberwritten and callback?
    po = self.box[index].get() # Get the values in each box
    print po

def callback(self, event, index):
        if (self.clicked[index] == False): # When clicked in box, overwrite default text with value and change colour to black, not grey
            self.box[index].delete(0, END)
            self.box[index].config(fg='black')
                self.clicked[index] = True 
```

更新：当前问题：需要将“i”的所有值传递给回调，而不仅仅是一个，而是如何将列表放入 lambda？

错误：

```
Exception in Tkinter callback
Traceback (most recent call last):
File "C:\Python26\lib\lib-tk\Tkinter.py", line 1410, in __call__
return self.func(*args)
TypeError: lambda() takes at most 1 argument (3 given) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T01:06:05.830

您的代码非常接近，但是这一行：

```
self.box[i].bind("<Button-1>", lambda self, event,i : self.callback(event, data)) 
```

应该

```
self.box[i].bind("<Button-1>", lambda event, index=i: self.callback(event, index)) 
```

该对象`index`只是我们为其分配值的任意标签`i`。请注意，如果我们通过，Python 会抛出错误`i`，而不是变量名。而且我们不需要通过`self`；它通过在函数调用中的使用隐式传递：`self.callback()`.

我唯一的其他评论是您应该`clicked`变成一个列表，以便您可以跟踪用户选择的对象。你可以完全按照形成的方式`box`形成它。祝你好运。

* * *

这里有一些关于`clicked`变成列表的提示，因为我认为这是您当前遇到的问题。*编辑：*根据 JF Sebastian 的评论更改了几行。

```
# Create an empty list based on the number of boxes created 
# above. This could go in your class's __init__ function, 
# or it could be declared globally, depending on the scope
# of self.box and the loop which determines its length.
self.clicked = ([False] * len(self.box))

# Finally, in your callback, check one member of the list,
# depending on which box was clicked.
def cb(self, event, index):
    if not self.clicked[index]:
        self.box[index].delete(0, END)
        self.box[index].config(fg='black')
        self.clicked[index] = True
    # Print the value of each of the widgets stored in the box list.
    for i, j in enumerate(self.box):
        print("%ith element: %s" % (i, j.get())) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T14:19:52.913

**更新**：看来您的 lambda 完全是多余的。完全删除它。

尝试：

```
self.box[i].bind("<Button-1>",self.callback) 
```

代替：

```
lambda self, event, i: self.callback(event, i) 
```

* * *

更新：

当我输入我的答案时，您似乎使情况恶化了，也许对 lambda-idiom 的一点澄清会比我上面的解决方案对您有更多帮助。;-)

lambda 函数也称为匿名函数，因为它们不需要名称。

比较以下示例：

```
>>>ulist = 'a1 s3 d2 f4 k6 w9'.split()

def normal_sort(L,R):
    result = int(L[1]) - int(R[1])
    return result

>>> sorted(ulist, normal_sort)
['a1', 'd2', 's3', 'f4', 'k6', 'w9'] 
```

与 lambda 函数相同：

```
sorted(ulist, lambda L, R: int(L[1])-int(R[1]))
['a1', 'd2', 's3', 'f4', 'k6', 'w9'] 
```

lambda函数有

1.  无名
2.  无参数括号
3.  没有返回语句，因为它的单个语句的评估被作为返回值传回。

您可以通过将其分配给名称来命名 lambda 函数：

```
lambda_sort = lambda L, R: int(L[1])-int(R[1]) 
```

但是切换到正常功能可能已经很有用了。

# javascript - Web 应用程序国际化，是服务器端还是客户端？

> ID：11345812
> 
> 赞同：6
> 
> 时间：2012-07-05T13:54:09.320
> 
> 标签：javascript, asp.net, internationalization, client-side, server-side

我们正在寻求使 Web 应用程序国际化。最好输出翻译服务器端（它是用.net 4 C#编写的）还是客户端（Javascript）？

我们已经通过创建一个 JS 文件开始在客户端执行此操作，该文件包含一个包含英语短语作为键的对象（以便开发人员了解每个消息在上下文中的含义），其值是显示给客户端的字符串任何警报和提示。我们正在考虑将其扩展到整个前端的所有措辞。

这是一个好主意还是最好在服务器端执行这种工作？

**更新：**如果它有助于改变论点，我们不会在我们的 Web 应用程序中大量使用服务器端控件，我们的大多数控件都是基于 jQuery/JS 的。

**更新：**此特定应用程序不公开可见（除了登录页面），因此不适用 SEO 问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T14:01:03.763

SEO 方面，我建议在服务器端进行，并在单独的 url 下提供应用程序。

例如：

www.application/en/

www.application/es/ ...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T16:30:06.130

I18n 的第一条规则：遵循标准方式。不要重新发明轮子。对于 Asp.Net，这意味着服务器端国际化。

嗯，有点。如果您碰巧有大量动态创建的控件，您仍然需要一些用于客户端脚本的本地化机制。您可以集中它，即创建一个翻译字符串的全局数组和模型+控制器，因此您可以通过 AJAX 调用填充它（尽管对于 JSON，X 最好用 J 代替......）。
无论如何，您的模型应该简单地从资源文件中检索适当的字符串，并且控制器应该将 JSON 提供给客户端（好主意是实际请求较小的块，即仅对给定视图/屏幕进行翻译，而不是对整个应用程序进行翻译）。

如您所见，最好的方法是一些混合方法。出于多种原因，最好对整个应用程序使用一种本地化模型，即仅使用 *.resx 文件。
此外，国际化[不仅仅是](https://softwareengineering.stackexchange.com/a/98364/2554)简单的字符串外部化......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T14:36:59.917

如果您只向用户显示静态内容，那么请通过客户端国际化。如果您显示的内容/消息是动态的，则应使用服务器端。但是您如何检测用户区域设置？

# ruby-on-rails - 我如何使用工厂女孩创建公司？

> ID：11345814
> 
> 赞同：0
> 
> 时间：2012-07-05T13:54:11.180
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rspec, factory-bot

我有这个工厂

```
FactoryGirl.define do
  factory :user do
    email               { Faker::Internet.email }
    first_name          { Faker::Name.first_name }
    last_name           { Faker::Name.last_name }
    password            { 'TarXlrOPfaokNOzls2U8' }
  end
end 
```

在我添加关联验证之前效果很好

```
class User < ActiveRecord::Base
  has_many :companies, :through => :positions
  has_many :positions
  validates_presence_of :company 
```

我如何添加到我的工厂以实现这一目标

我试过这个

```
 association :company, factory: :company, strategy: :build 
```

但是我所有的测试都失败了

```
 undefined method `company=' for #<User:0x007fcd7c13c260> 
```

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T14:02:25.237

你试过简单吗？

```
FactoryGirl.define do
  factory :user do
    email               { Faker::Internet.email }
    first_name          { Faker::Name.first_name }
    last_name           { Faker::Name.last_name }
    password            { 'TarXlrOPfaokNOzls2U8' }
    companies           { [Factory(:company, strategy: build)] }
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T13:57:36.200

如果您希望每个用户拥有 1 个公司，那么您需要`belongs_to :company`在 User 模型中使用而不是 has_many。如果您真的希望每个用户拥有许多公司，[请参阅此答案](https://stackoverflow.com/questions/6003871/factory-girl-has-many-associations)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T13:59:49.887

您需要一个公司、用户和职位的工厂，而不是根据需要覆盖默认值：

```
 factory :position do
    user
    company
  end
  factory :company do
    #company stuff
  end

  user = create(:user)
  company = create(:company)
  postion = create(:position, user: user, company: company)
  user.company.should eq company 
```

# python - 用于将文件从服务器检索到本地驱动器的 Python 脚本

> ID：11345817
> 
> 赞同：0
> 
> 时间：2012-07-05T13:54:21.613
> 
> 标签：python, gis, arcgis, arcmap

我是新来的，在 Python 方面也是新手。我在 GIS 领域工作，想运行一个脚本，该脚本将服务器上特定文件夹中的所有文件（大约 10 个）复制到本地外部硬盘驱动器。

服务器上的这些文件每天都会更新，因此我希望脚本也允许更新本地驱动器中的文件（基本上替换旧文件）。

这很复杂吗？任何帮助表示赞赏...

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T20:34:19.977

使用 xcopy -

要将所有文件和子目录（包括任何空子目录）从驱动器 A 复制到驱动器 B，请键入：xcopy a: b: /s /e

[http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/xcopy.mspx?mfr=true](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/xcopy.mspx?mfr=true)

如果您需要复制要素类或其他地理数据库对象，您可以将任何 ArcToolBox 工具导出到 Python 脚本以使其自动化。

# asp.net - 在 ASP.net 中创建一个弹出窗口以获取用户输入

> ID：11345820
> 
> 赞同：4
> 
> 时间：2012-07-05T13:54:28.463
> 
> 标签：asp.net, web-applications

我正在创建一个 Web 应用程序，我需要创建一个弹出窗口来接受用户输入的两个字段（可能更多）。

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T13:57:14.323

你可以使用微软提供的模态弹出扩展器 [看看](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/ModalPopup/ModalPopup.aspx)

或者您可以为此使用 Jquery [看看这里](http://geekswithblogs.net/vladimirl/archive/2009/12/20/jquery-simple-modal-plugin.aspx)

# java - Android Widget 上的按钮操作

> ID：11345823
> 
> 赞同：2
> 
> 时间：2012-07-05T13:54:37.257
> 
> 标签：java, android, android-intent, android-widget

我正在尝试设置一个包含两个按钮的小部件。单击小部件应引发主要活动。单击两个按钮之一应该执行其他操作。

我已经尝试按照[Android 小部件按钮](https://stackoverflow.com/questions/6361962/android-widget-button)和[处理多个按钮单击 Android 小部件](https://stackoverflow.com/questions/2471875/processing-more-than-one-button-click-at-android-widget)但没有骰子上描述的步骤进行操作。我不知道我做错了什么。

我的清单的相关部分：

```
<receiver android:name="WidgetProvider" android:icon="@drawable/icon" android:label="Radio Podcastellano">
      <intent-filter>
          <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
          <action android:name="es.radiopodcastellano.player.WidgetProvider.ACTION_UPDATEINFO"/>
          <action android:name="es.radiopodcastellano.player.WidgetProvider.ACTION_REFRESH"/>
          <action android:name="es.radiopodcastellano.player.WidgetProvider.ACTION_PLAYPAUSE"/>
          <action android:name="es.radiopodcastellano.player.WidgetProvider.ACTION_SHOWMAIN" />
      </intent-filter>
      <meta-data android:name="android.appwidget.provider" android:resource="@xml/widget_info" />
    </receiver> 
```

现在，WidgetProvider 类本身：

```
public class WidgetProvider extends AppWidgetProvider {

public static String ACTION_PLAYPAUSE="ActionReveicerPlayPause";
public static String ACTION_UPDATEINFO="ActionReceiverUpdateInfo";
public static String ACTION_REFRESH="ActionReceiverRefresh";
public static String ACTION_SHOWMAIN="ActionShowMain";

@Override
public void onReceive(Context ctxt, Intent intent) {
    if (intent.getAction().equals(ACTION_REFRESH)) {
        Log.d("RPod_Widget", ACTION_REFRESH);
    } else if (intent.getAction().equals(ACTION_UPDATEINFO)) {
        Log.d("RPod_Widget", ACTION_UPDATEINFO);
    } else if (intent.getAction().equals(ACTION_PLAYPAUSE)) {
        Log.d("RPod_Widget", ACTION_PLAYPAUSE);
    } else if (intent.getAction().equals(ACTION_SHOWMAIN)) {
        Log.d("RPod_Widget", ACTION_SHOWMAIN);
    } else {
        Log.d("RPod_Widget", intent.getAction());
        super.onReceive(ctxt, intent);
    }
}

@Override
public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {

    Log.d("RPod_Widget","Action: onUpdate");

    RemoteViews remoteViews = new RemoteViews(context.getPackageName(), R.layout.widget);

    Intent active = new Intent(context, MainActivity.class);
    active.setAction(ACTION_SHOWMAIN);
    PendingIntent actionPendingIntent = PendingIntent.getActivity(context, 234, active, 0);
    remoteViews.setOnClickPendingIntent(R.id.widgetLayout, actionPendingIntent);

    Intent active2 = new Intent(context, AppWidgetProvider.class);
    active2.setAction(ACTION_PLAYPAUSE);
    PendingIntent actionPendingIntent2 = PendingIntent.getBroadcast(context, 235, active2, 0);
    remoteViews.setOnClickPendingIntent(R.id.widgetPlayButton, actionPendingIntent2);

    Intent active3 = new Intent(context, AppWidgetProvider.class);
    active3.setAction(ACTION_UPDATEINFO);
    PendingIntent actionPendingIntent3 = PendingIntent.getBroadcast(context, 236, active3, 0);
    remoteViews.setOnClickPendingIntent(R.id.widgetReloadButton, actionPendingIntent3);

    appWidgetManager.updateAppWidget(appWidgetIds, remoteViews);

}

} 
```

当我单击小部件布局时，会引发主要活动，但按钮会被完全忽略。我点击它们但没有效果。Logcat 上没有显示来自 onReceive 的消息，只有这个：

```
07-05 15:41:41.675: DEBUG/RPod_Widget(4144): Action: onUpdate
07-05 15:44:39.261: DEBUG/RPod_Widget(4198): android.appwidget.action.APPWIDGET_UPDATE
07-05 15:44:39.261: DEBUG/RPod_Widget(4198): Action: onUpdate
07-05 15:49:48.078: DEBUG/RPod_Widget(4285): android.appwidget.action.APPWIDGET_UPDATE
07-05 15:49:48.078: DEBUG/RPod_Widget(4285): Action: onUpdate 
```

一些忠告？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:56:15.387

我发现了问题。一键代码：

```
Intent active2 = new Intent(context, AppWidgetProvider.class);
active2.setAction(ACTION_PLAYPAUSE);
PendingIntent actionPendingIntent2 = PendingIntent.getBroadcast(context, 235, active2, 0);
remoteViews.setOnClickPendingIntent(R.id.widgetPlayButton, actionPendingIntent2); 
```

问题是我提供 AppWidgetProvider.class 作为 Intent 的参数，我应该提供 WidgetProvider.class，这是我自己的 AppWidgetProvider 实现（以前扩展 AppWidgetProvider）。因此，更正后的行：

```
Intent active2 = new Intent(context, WidgetProvider.class); 
```

就这样 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T14:14:26.183

Manifest 中的 Action 应与您在 Intent 中传递的相同

例如，

```
public static String ACTION_PLAYPAUSE="es.radiopodcastellano.player.WidgetProvider.ACTION_PLAYPAUSE"; 
```

# java - 伪代码中的 MD5 或 SHA-1 或没有库的 java

> ID：11345826
> 
> 赞同：0
> 
> 时间：2012-07-05T13:54:42.510
> 
> 标签：java, md5, pseudocode, sha

我正在寻找 MD5 或 SHA-1 的精确算法。我在 google、wiki 等中找到的所有内容对我来说都非常混乱、不清楚和不准确。有没有人实现该算法。昨天我在谷歌上找了几个小时，一无所获。我知道如何使用库生成它（我已经做过很多次了）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T14:01:54.543

一个简单的谷歌搜索： [SHA-1](http://home.arcor.de/andi.warnke/SourceCodes/Java/RETE-DB_06/utils/SHA1.java.F_0000.html)和 [MD5](http://enggedu.com/source_code/java/MD5_algorithm_implementation.php)

# matlab - 如何绘制不等式

> ID：11345838
> 
> 赞同：13
> 
> 时间：2012-07-05T13:55:26.237
> 
> 标签：matlab

我想绘制以下不等式： *y* < *p* [2] (1 - *p* [1] ) 和*x* < *p* [1] (1 - ( y / (1 - *p* [1] )))。

鉴于第一个满意，我想绘制两者都满意的区域。
*p* [1]和*p* [2]可以在 [0,1] 内变化。

我将不胜感激任何帮助！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-05T14:43:21.790

试试这个：红色区域是两个不等式都满足的地方。

```
[X,Y]=meshgrid(0:0.01:1,0:0.01:1); % Make a grid of points between 0 and 1
p1=0.1; p2=0.2; % Choose some parameters
ineq1 = Y<p2*(1-p1);
ineq2 = X<p1*(1-(Y./(1-p1)));
colors = zeros(size(X))+ineq1+ineq2;
scatter(X(:),Y(:),3,colors(:),'filled') 
```

![在此处输入图像描述](../Images/c533a09ceea60b508f844e65ad87b55b.png)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-06T00:34:15.240

另一种解决方案（但类似于 Sam Robert 的）将使用[`contourf`](http://www.mathworks.com/help/techdoc/ref/contourf.html)：

```
[X, Y] = meshgrid((0:999) / 1000, (0:999) / 1000);
p = rand(2, 1);                            %# In this example p = [0.1, 0.2]
ineq1 = Y < p(2) * (1 - p(1));             %# First inequation
ineq2 = X < p(1) * (1 - (Y / (1 - p(1)))); %# Second inequation
both = ineq1 & ineq2;                      %# Intersection of both inequations

figure, hold on
c = 1:3;                                   %# Contour levels
contourf(c(1) * ineq1, [c(1), c(1)], 'b')  %# Fill area for first inequation
contourf(c(2) * ineq2, [c(2), c(2)], 'g')  %# Fill area for second inequation
contourf(c(3) * both, [c(3), c(3)], 'r')   %# Fill area for both inequations
legend('First', 'Second', 'Both')
set(gca, ...                               %# Fixing axes ticks
    'XTickLabel', {t(get(gca, 'XTick'))}, 'YTickLabel', {t(get(gca, 'YTick'))}) 
```

这是结果：

![结果](../Images/6498ae4fa8a29cdb38bd61fe8c96cdb9.png)

红色区域（如图例中所述）表示满足两个不等式的位置。

请注意，第二次和第三次`contourf`调用仅用于说明，以显示仅满足其中一个不等式的位置。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-02-02T19:45:53.263

我认为这种方法很容易理解。制作曲面图并将其旋转到顶视图。

```
v = -5:0.1:5;
p1 = 0.1;
p2 = 0.2;
[x,y] = meshgrid(v);
ineq1 = y<p2*(1-p1);
ineq2 = x<p1*(1-(y./(1-p1)));
ineq = double(ineq1 & ineq2);    % intersection of the inequalities
surf(x,y,ineq);
view(0,90)      % rotate surface plot to top view 
```

# c# - 从 .resx 文件中获取控件的注释

> ID：11345840
> 
> 赞同：0
> 
> 时间：2012-07-05T13:55:27.887
> 
> 标签：c#, winforms, comments, controls, resx

我的程序是一个翻译器，它加载一个 exe 和它附带的 resx 文件，编辑它们，保存它们，然后将它们放入程序集中（使用 AS.exe）。我已经可以更改控件中的文本，但我想更改与之关联的注释。

我知道资源文件（.resx）可以包含注释...[链接](https://stackoverflow.com/questions/8854404/how-to-get-the-comment-from-a-resx-file-entry)

![在此处输入图像描述](../Images/f76843ad970fedc5d62b84a1a1c0341a.png)

我的问题是我有由资源文件制作的表单，当我尝试访问控件属性时，我只能获取名称和文本。我希望能够获取并设置控件的注释（例如：按钮名称：btnOk，文本：Ok，注释：Ok 按钮）。

一旦控件有评论，我将保存资源文件，我希望评论仍然存在并且下次打开 resx 时可以访问。

我以这种方式将数据放在 datagridview 中：

```
dgv.Rows.Add(new string[] { ctrl.Name, ctrl.Text, "Here should be the comments" }); 
```

# mysql - MYSQL SUM 和减法

> ID：11345842
> 
> 赞同：0
> 
> 时间：2012-07-05T13:55:36.067
> 
> 标签：mysql, sum

我有以下 SQL 查询。

```
SELECT    u.username, SUM(p.points) AS points,
          SUM(sp.spPoints) AS spPoints,
          (SUM(sp.spPoints) - SUM(p.points)) AS Puntos_Restantes
FROM      users as u
LEFT JOIN points as p ON (u.userid = p.userid)
LEFT JOIN sppoints AS sp ON (u.userid = sp.userid)
WHERE     u.userid = '1'
GROUP BY  u.userid 
```

我的目标是求和 2 个字段，然后减去它们，但是当我执行上述查询时，第二个 SUM 是错误的。
表格是这样的：

```
points: pointId, userId, points    
sppoints: spPointId, userId, spPoints 
```

在点我有这个数量：25 和 spPoints：10 但是当我运行查询时，我得到：

```
points  spPoints    Puntos_Restantes
 25       30              5 
```

这里出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T14:03:27.133

该表`users`与其他 2 个表具有一对多关系。这会导致 2 个连接产生一个 mini-Carstesian 积和多行在列中具有相同数据的`points`行 - 然后将其聚合。

您可以使用子查询进行分组，然后加入，以避免此问题：

```
SELECT 
      u.username
    , COALESCE(p.pPoints,0) 
        AS pPoints
    , COALESCE(sp.spPoints,0) 
        AS spPoints
    , COALESCE(p.pPoints,0) - COALESCE(sp.spPoints,0)
        AS Puntos_Restantes
FROM 
      users as u
  LEFT JOIN 
      ( SELECT userid, SUM(points) AS pPoints
        FROM points
        WHERE userid = 1
        GROUP BY userid
      ) AS p
    ON u.userid = p.userid
  LEFT JOIN 
      ( SELECT userid, SUM(spPoints) AS spPoints
        FROM sppoints
        WHERE userid = 1
        GROUP BY userid
      ) AS sp
    ON u.userid = sp.userid
WHERE u.userid = 1 ; 
```

如果您想获得多个用户（或所有用户）的结果，请替换这三个`WHERE userid=1`条件（或完全删除它们）。

指数将有助于提高效率`points(userid, points)`。`sppoints(userid, spPoints)`

# asp.net - 用 ASP.net 检测 iPad

> ID：11345851
> 
> 赞同：7
> 
> 时间：2012-07-05T13:55:46.463
> 
> 标签：asp.net, asp.net-mvc, mobile, 51degrees

我想在 ASP.net 中检测移动设备是否是平板电脑 (iPad) 我查看了 51degrees 项目，但免费版本中没有检测平板电脑的功能 - 因为我们分发了我们的 ASP。 net 解决方案为 100 位客户，我们不能为所有客户购买 51 度许可证。

51degrees 是否有任何免费或开源的替代方案可用？或者较新版本的 MVC（4？）会比普通的 IsMobileDevice() 提供更多详细信息吗？

谢谢，康拉德

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-05T14:43:21.053

您可以请求用户代理并检查它是否包含像这样的“ipad”

```
bool isIpad = Request.UserAgent.ToLower().Contains("ipad"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-05T13:57:57.440

您不需要“检测 iPad”。只需使用媒体查询来支持 iPad，因为 iPad 附带的 Safari 浏览器已经理解 CSS3：

[CSS3 媒体查询](http://webdesignerwall.com/tutorials/css3-media-queries)

```
/* iPads (landscape) */
@media screen and (min-device-width : 768px) 
    and (max-device-width : 1024px) and (orientation : landscape) {
   ...
}
/* iPads (portrait) */
@media screen and (min-device-width : 768px) and (max-device-width : 1024px) 
    and (orientation : portrait) {
   ...
} 
```

您最好的选择是使用 HTML5Boilerplate，因为它还为 iPad 修复了一些其他问题。使用 Modernizr 进行特征检测；它带有 HTML5Boilerplate。

[HTML5 样板](http://html5boilerplate.com/)

[您应该使用的 20 个片段来自 Html5 样板](http://www.1stwebdesigner.com/design/snippets-html5-boilerplate/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T08:08:40.243

我们现在使用旧的移动设备浏览器文件： http: [//mdbf.codeplex.com/](http://mdbf.codeplex.com/)

并使用我们自己的浏览器文件对其进行扩展，如本解决方案中所述： [http ://www.hanselman.com/blog/MixMobileWebSitesWithASPNETMVCAndTheMobileBrowserDefinitionFile.aspx](http://www.hanselman.com/blog/MixMobileWebSitesWithASPNETMVCAndTheMobileBrowserDefinitionFile.aspx)

现在我们甚至可以定义自己的参数来检测，例如，Internet Explorer 的兼容模式或将 iPad 定义为非移动设备。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-07-05T17:50:35.343

这是为您提供的整体解决方案。这是一个使用 ASP.NET MVC 展示响应式设计的网站；有一篇文章，教程和完整的项目下载源代码。

[http://edcharbeneau.github.com/FoundationSinglePageRWD/](http://edcharbeneau.github.com/FoundationSinglePageRWD/)

# c# - WPF 绑定到单个控件（不是列表）

> ID：11345853
> 
> 赞同：1
> 
> 时间：2012-07-05T13:56:07.693
> 
> 标签：c#, .net, wpf, data-binding, datatemplate

简而言之，我想做的是创建一个 DataTemplate 来指示客户横幅的外观。

我以一种非常简单的形式完成了这项工作，但只使用了一个 ListView 控件，我将 ItemsSource 应用于包含一个条目的列表。

我想要做的是将 Customer 对象直接应用于控件（不确定是什么类型的控件），它会为这种类型选择 DataTemplate 并布置数据。

我正在使用的 xaml 是...

```
<Window x:Class="WpfApplication5.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:WpfApplication5"
        Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <DataTemplate DataType="{x:Type local:Customer}" >
            <Border Background="Blue" >
                <TextBlock Text="{Binding CustomerName}"  />
            </Border>
        </DataTemplate>
    </Window.Resources>
    <ListView x:Name="mylist" />
</Window> 
```

使用以下代码隐藏。

```
namespace WpfApplication5
{
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
            Customer mp=new Customer();
            mp.CustomerName="Mr. Banana";
            List<Customer> temp = new List<Customer>();
            temp.Add(mp);
            mylist.ItemsSource = temp;
        }
    }
    public class Customer
    {
        public string CustomerName { get; set; }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T14:03:04.880

只需使用[`ContentControl`](http://msdn.microsoft.com/en-us/library/system.windows.controls.contentcontrol.aspx)：

```
<ContentControl x:Name="banner" /> 
```

在代码中：

```
banner.Content = mp; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T14:02:12.740

创建您自己的`UserControl`，其中将包含`Customer`可用于绑定的属性。然后您可以使用绑定绑定到该属性`RelativeSource`。

# c# - 实现 IEqualityComparer 用于比较任何类（包括匿名）的任意属性

> ID：11345854
> 
> 赞同：5
> 
> 时间：2012-07-05T13:56:10.937
> 
> 标签：c#, generics, reflection, equality, iequalitycomparer

我正在编写这个实现 IEqualityComparer 的简洁类，这样我就可以将任何匿名类型传递给它（或者实际上是任何具有属性的类型），它会通过比较类型的属性值来自动比较类型。

```
public class CompareProperty<T> : IEqualityComparer<T>
    {
        private Type type;
        private PropertyInfo propInfo;
        private string _fieldName;

        public string fieldName
        {
            get;
            set;
        }

        public CompareProperty(string fieldName)
        {
            this.fieldName = fieldName;
        }

        public bool Equals<T>(T x, T y)
        {
            if (this.type == null)
            {
                type = x.GetType();
                propInfo = type.GetProperty(fieldName);
            }
            object objX = propInfo.GetValue(x, null);
            object objY = propInfo.GetValue(y, null);
            return objX.ToString() == objY.ToString();
        }
    } 
```

我认为这是一个很好的小助手功能，我可以多次使用。

为了使用它，我必须这样做：

```
var t = typeof(CompareProperty<>);
var g = t.MakeGenericType(infoType.GetType());
var c = g.GetConstructor(new Type[] {String.Empty.GetType()});
var obj = c.Invoke(new object[] {"somePropertyName"}); 
```

很公平，但是我该如何处理它返回的 obj 变量呢？

```
someEnumerable.Distinct(obj); 
```

distinct 扩展函数的重载不接受这个，因为它看不到 IEqualityComparer 类型，当然它只看到一个对象。

```
someEnumerable.Distinct((t) obj);
someEnumerable.Distinct(obj as t); 
```

这也行不通。找不到类型/命名空间（红色下划线）。

我该如何直截了当？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T19:31:32.267

我将首先为非匿名类型提供一个解决方案，然后将其扩展到也适用于匿名类型。希望它可以帮助您了解人们在对您的问题发表评论时想说什么。

我的“通用”`IEqualityComparer<>`看起来像这样：

```
public class PropertyComparer<T> : IEqualityComparer<T>
{
    private readonly PropertyInfo propertyToCompare;

    public PropertyComparer(string propertyName)
    {
        propertyToCompare = typeof(T).GetProperty(propertyName);
    }
    public bool Equals(T x, T y)
    {
        object xValue = propertyToCompare.GetValue(x, null);
        object yValue = propertyToCompare.GetValue(y, null);
        return xValue.Equals(yValue);
    }

    public int GetHashCode(T obj)
    {
        object objValue = propertyToCompare.GetValue(obj, null);
        return objValue.GetHashCode();
    }
} 
```

假设我们想首先将它与非匿名类型一起使用，例如`Person`：

```
public class Person
{
    public int Id { get; set; }
    public string FirstName { get; set; }
    public string Surname { get; set; }
 } 
```

用法将非常简单：

```
IEnumerable<Person> people = ... ; // some database call here
var distinctPeople = people.Distinct(new PropertyComparer<Person>("FirstName")); 
```

如您所见，要使用`PropertyComparer<T>`，我们需要指定`T`要相互比较的类型（ ）实例。`T`处理匿名类型时会发生什么？由于它们是在运行时生成的，因此您不能通过直接创建其实例来使用比较器，因为您不知道`T`编译时的情况。相反，您需要使用[类型推断](http://www.amazedsaint.com/2010/10/c-type-inference-in-generic-methods.html)让 C# 编译器`T`自行从上下文推断。这样做的好方法是编写以下扩展方法：

```
public static class LinqExtensions
{
    public static IEnumerable<T> WithDistinctProperty<T>(this IEnumerable<T> source, string propertyName)
    {
        return source.Distinct(new PropertyComparer<T>(propertyName));
    }
} 
```

现在它也适用于匿名类型：

```
var distinctPeople = people
        .Select(x => new { x.FirstName, x.Surname })
        .WithDistinctProperty("FirstName"); 
```

突然之间，不需要在任何地方指定查询正在处理的确切类型，因为 C# 编译器足够聪明，可以从上下文中推断出来（在这种情况下，它是`source`从扩展方法）。

希望这会帮助你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-09-14T16:00:04.023

只需添加自己的验证。

```
class PropertyComparer<T, TResult> : IEqualityComparer<T>
{
    private Func<T, TResult> _getProperty;

    public PropertyComparer(Func<T, TResult> predicate)
    {
        this._getProperty = predicate;
    }

    public bool Equals(T x, T y)
    {
        return this._getProperty(x).Equals(_getProperty(y));
    }

    public int GetHashCode(T obj)
    {
        return this._getProperty(obj).GetHashCode();
    }
} 
```

具有扩展方法的类：

```
public static class IEnumerableExtensions
{
    public static IEnumerable<TSource> DistinctBy<TSource, TResult>
        (this IEnumerable<TSource> source, Func<TSource, TResult> predicate)
    {
        return source.Distinct(new PropertyComparer<TSource, TResult>(predicate));
    }
} 
```

用法：

```
someEnumerable.DistinctBy(i => i.SomeProperty); 
```

# iphone - 如何使用适当的键将 plist 数据解析到 UITableView？

> ID：11345863
> 
> 赞同：0
> 
> 时间：2012-07-05T13:56:25.573
> 
> 标签：iphone, objective-c, xcode, uitableview, plist

我对 Objective-C 很陌生。这就是我想要的。我有一个适用于 iPhone 的标签视图应用程序。在其中一个选项卡中，我需要使用来自 plist 文件的数据的表格视图。数据包括文字、图片和位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T14:06:20.200

Plist 文件实际上是一个 xml 文件（您可以在外部编辑器中打开，您应该会看到结构）。因此，您应该将数据存储在 NSDictionary 中（*对象*和*键*结构，如 xml 文件！）。

例如：

```
 NSString *plistPath = [[NSBundle mainBundle] pathForResource:@"plistFile" ofType:@"plist"];
    NSDictionary *dic = [[NSDictionary alloc] initWithContentsOfFile:plistPath]; 
```

我不知道您是否在 plist 文件中包含数组或字符串...您应该提供更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T13:58:57.053

你可以尝试这样的事情：

```
SString *myFile = [[NSBundle mainBundle] pathForResource:@"plistName" ofType:@"plist"];
NSDictionary *dict = [[NSDictionary alloc]initWithContentsOfFile:myFile]; 
```

# ios - 是否可以在不子类化的情况下替换 UIWebView 中现有方法的主体

> ID：11345864
> 
> 赞同：1
> 
> 时间：2012-07-05T13:56:26.500
> 
> 标签：ios, uiwebview, objective-c-runtime, uiresponder

如果可以在运行时替换 UIWebView 的方法体，我会很有趣吗？我不能继承 UIWebView

例如，我需要实现：

```
- (void) paste:(id)sender;
or
- (BOOL) canPerformAction:(SEL)action withSender:(id)sender; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T07:14:38.053

您是否尝试过运行时方法`method_setImplementation`？

像这样：

```
static IMP originalPaste = NULL;

void myPaste(id rcv, SEL cmd, id sender)
{
    // Your implementation here
}

…
{
    …
    Method m = class_getInstanceMethod([UIWebView class], @selector(paste:));
    originalPaste = method_setImplementation(m, myPaste);
    …
} 
```

使用`originalPaste`您可以在您的实现中执行超级调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T14:00:44.677

是的，但不要经常这样做，Apple 说：

> 尽管 Objective-C 语言目前允许您使用类别来覆盖类继承的方法，甚至是类接口中声明的方法，但强烈建议您不要这样做。类别不能替代子类。使用类别来覆盖方法有几个明显的缺点：
> 
> 当一个类别覆盖一个继承的方法时，该类别中的方法可以像往常一样通过消息调用继承的实现给super。但是，如果一个类别覆盖了该类别的类中存在的方法，则无法调用原始实现。
> 
> 一个类别不能可靠地覆盖在同一类的另一个类别中声明的方法。
> 
> 这个问题特别重要，因为许多 Cocoa 类是使用类别实现的。您尝试覆盖的框架定义的方法本身可能已经在一个类别中实现，因此没有定义哪个实现优先。
> 
> 某些类别方法的存在可能会导致所有框架的行为发生变化。例如，如果您在 NSObject 的一个类别中覆盖 windowWillClose: 委托方法，那么您程序中的所有窗口委托都会使用该类别方法进行响应；您的所有 NSWindow 实例的行为可能会改变。您在框架类上添加的类别可能会导致行为的神秘变化并导致崩溃。

除此之外，如果没有子类化，你的生活会变得非常艰难。甚至执行此操作的运行时方式（覆盖 IMP）也会涉及“子类化”（分配类对）。

# git - 如何将 git-svn 与 svn+ssh 网址一起使用

> ID：11345868
> 
> 赞同：2
> 
> 时间：2012-07-05T13:56:37.003
> 
> 标签：git, svn, git-svn

我喜欢在 cygwin 中`git svn clone`使用我们公司 svn 存储库的命令。

这个网址是`svn+ssh://svn.<url>.com/repo`

在此之下，我可以使用例如 eclipse 带有trunk/tags/branches 的存储库

跑步`git svn clone svn+ssh://svn.<url>.com/repo`

> 没有这样的文件或目录：无法连接到 URL 'svn+ssh://svn..com/repo' 处的存储库：子进程出错：'ssh' 的执行失败：/usr/ 处没有这样的文件或目录lib/git-core/git-svn 第 2299 行

任何人都可以帮助我做什么以及如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-29T08:34:31.007

为了工作`git-svn`，`svn+ssh`您需要确保：

*   您将`ssh`客户端安装在同一台机器上。
*   例如，您在 URI 中提供正确的用户名，`svn+ssh://foo@svn.bar.com/project` *或者*您安排使用 ssh 密钥和可能的 ssh-agent 进行身份验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-31T10:56:53.120

The svn+ssh protocol must be setuped using both the private and the public ssh key.

In case of in the Windows usage you have to setup the ssh key before run the svn client using these general steps related to the native Windows `svn.exe` (should not be a ported one, for example, like the `msys` or `cygwin` tools which is not fully native):

1.  Install the `putty` client.
2.  Generate the key using the `puttygen.exe` utility and the correct type of the key dependent on the svn hub server (Ed25519, RSA, DSA, etc).
3.  Install the been generated public variant of the key into the svn hub server by reading the steps from the docs to the server.
4.  Create the `SVN_SSH` environment variable with this content: `SVN_SSH="<path-to-plink>/plink.exe" -batch -l "<USERNAME>"`. This would avoid hangs in scripts because of interactive login/password request and would avoid usage svn repository urls with the user name inside.
5.  Ensure that all svn working copies and the `externals` properties in them contains valid svn repository urls with the `svn+ssh://` prefix. If not then use the `svn relocate https:// svn+ssh://` command to switch onto it. Then fix all the rest urls in the `externals` properties, for example, just by remove the url scheme prefix and leave the `//` prefix instead.
6.  Run the `pageant.exe` in the background with the previously generated private key (add it).
7.  Test the connection to the svn hub server through the `putty.exe` client. The client should not ask for the password if the `pageant.exe` is up and running with has been correctly setuped private key. The client should not ask for the user name either if the `SVN_SSH` environment variable is declared with the user name.

The `git` client basically is a part of ported `msys` or `cygwin` tools, which means they behaves a kind of differently.

The one of the issues with the message `Can't create session: Unable to connect to a repository at URL 'svn+ssh://...': Error in child process: exec of '' failed: No such file or directory at .../Git/mingw64/share/perl5/Git/SVN.pm line 310.` is the issue with the `SVN_SSH` environment variable. The variable should be defined with an utility from the same tools just like the `git` itself. The attempt to use it with the standalone `plink.exe` from the `putty` application would end with that message.

So, additionally to the steps for the `svn.exe` application you should apply, for example, these steps:

1.  Drop the usage of the `SVN_SSH` environment variable and remove it.
2.  Run the `ssh-pageant` from the `msys` or `cygwin` tools (the `putty`'s `pageant` must be already run with the valid private key). You can read about it, for example, from here: [https://github.com/cuviper/ssh-pageant](https://github.com/cuviper/ssh-pageant)

> ssh-pageant is a tiny tool for Windows that allows you to use SSH keys from PuTTY's Pageant in Cygwin and MSYS shell environments.

3.  Create the environment variable returned by the `ssh-pageant` from the stdout, for example: `SSH_AUTH_SOCK=/tmp/ssh-hNnaPz/agent.2024`.
4.  Use urls in the `git svn ...` commands together with the user name as stated in the documentation ([https://git-scm.com/docs/git-svn#Documentation/git-svn.txt---usernameltusergt](https://git-scm.com/docs/git-svn#Documentation/git-svn.txt---usernameltusergt) ): `svn+ssh://<USERNAME>@svn.<url>.com/repo`

> --username=<user> For transports that SVN handles authentication for (http, https, and plain svn), specify the username. For other transports (e.g. svn+ssh://), **you must include the username in the URL**, e.g. svn+ssh://foo@svn.bar.com/project

These instructions should help to use `git svn` commands together with the `svn` commands.

# javascript - 停止 JavaScript 函数排队，一次允许一个函数

> ID：11345879
> 
> 赞同：0
> 
> 时间：2012-07-05T13:57:18.813
> 
> 标签：javascript, jquery, onclick, parallax

`scrollTo`正如您从[http://www.adamdodds.co.uk/blue-leaf](http://www.adamdodds.co.uk/blue-leaf)中看到的那样，我一直在玩视差和。当您单击时间线时，它会贯穿所有内容，但是当您在最后运行时单击一些东西时，它会全部完成。我如何使它可以运行一个功能而无需更多排队？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T14:02:42.527

查看`.animate()`您正在使用的文档。有一个`queue`选项是“一个布尔值，指示是否将动画放入效果队列。如果为 false，动画将立即开始。从 jQuery 1.7 开始，队列选项也可以接受字符串，在这种情况下添加动画到该字符串表示的队列。”

编辑：在您的情况下，您使用的是流行的`scrollTo`插件。`.stop()`在每次`$.scrollTo()`调用之前尝试使用 jQuery 的方法。查看该[方法的文档](http://api.jquery.com/stop/)以调整行为以适应您的需要。

# linqpad - LinqPad 教程

> ID：11345886
> 
> 赞同：18
> 
> 时间：2012-07-05T13:57:31.367
> 
> 标签：linqpad

嗨，我期待着学习 Linqpad。谁能告诉我是否有任何电子书或教程网站可以帮助我从头开始逐步学习 Linqpad。我尝试在网上搜索它，但找不到任何好的材料。请帮忙，因为它对我来说真的很重要。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-11T15:44:01.487

当您启动 linqpad 时，左下方有一个示例选项卡。《LINQPad 5 分钟介绍》是一个真正简单的 linqpad 交互式介绍。如果您已经熟悉 c#，那么这应该可以很好地概述 linqpad 的功能。

2017 年 11 月 10 日 - 5.25 版让它变得更加容易。该应用程序捆绑了更多教程/介绍内容。您可以通过“帮助 | 教程和参考”找到它。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-23T19:31:06.247

样品是一个很好的起点。我还为 Linqpad 制作了 2 个介绍视频。 [http://dotnetsurfers.com/blog/2013/01/15/developer-tools-screencast-linqpad-part-1/](http://dotnetsurfers.com/blog/2013/01/15/developer-tools-screencast-linqpad-part-1/) [http://dotnetsurfers.com/blog/2013/01/23/developer-tools-screencast- linqpad-part-2/](http://dotnetsurfers.com/blog/2013/01/23/developer-tools-screencast-linqpad-part-2/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-06T14:08:41.650

[这里](http://www.dimecasts.net/Casts/ByTag/LinqPad)有一些视频对[LinqPad](http://www.linqpad.net/)进行了概述。

LinqPad 只是一个工具 - 并且是一个非常容易使用的工具 - 只需运行 exe 并开始编码。如果您在 C# 或 VB 中寻求 LINQ 的帮助，那么 LinqPad 已经为它构建了教程。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-29T21:57:24.920

我正在我的开发人员技巧博客上逐渐建立 linqpad 教程，我从以下内容开始：[在 linqpad 中阅读 CSV](http://www.developertipoftheday.com/2012/10/read-csv-in-linqpad.html)。

我不一定会推荐这篇文章作为您的第一篇文章，但可能是您正在阅读的各种教程。这是了解“我的扩展”如何在解析 CSV 的实际情况下工作的好方法——我没有看到很多教程涵盖（因此我决定进一步研究它）。

# php - 如何使用 PHP 将非英文字符正确保存到 MySQL 数据库中？

> ID：11345892
> 
> 赞同：0
> 
> 时间：2012-07-05T13:57:57.433
> 
> 标签：php, mysql, character

我正在解析网站的 HTML 并将信息保存到数据库中，但在网站中，应该将非英文字符（如中文、印度文、韩文等）保存到 MySQL 中。我的问题是在 MySQL 中（当我使用 PHP MyAdmin 查看这些信息时），它显示奇怪的字符。

> Ä°lgin​​Ã§ GerÃ§ekler
> ê³µì—°ì •ë³´ PARTI(ì—°ê·¹,ì½~ì„œíŠ¸,ë®¤ì§€ì»¬,ì˜¤í...
> ì •ì ‹ ì—°ë ¹ í...ŒìŠ¤íŠ¸</p>

如何正确地将这些信息保存到数据库？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T14:04:06.660

尝试使用

```
mysql_query("SET NAMES 'UTF8'"); 
```

在 mysql_connect 或 mysql_select_db 之后。我将它用于土耳其语 mysql_query("SET NAMES 'latin5'");

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T14:00:57.257

首先确保表和行编码是 UTF-8 格式的。接下来，您应该将 PHP 脚本文件保存为 UTF-8 编码（带或不带 BOM）。

或者您可以尝试使用[htmlspecialchars();](http://php.net/manual/en/function.htmlspecialchars.php) 功能来做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T14:01:02.590

您必须将插入和/或表格转换为另一种编码样式。这里你是如何：[http ://dev.mysql.com/doc/refman/5.0/en/charset-convert.html](http://dev.mysql.com/doc/refman/5.0/en/charset-convert.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T14:31:41.753

将表排序规则更改为 utf8

```
$con=mysql_connect("hostname","username","password");

mysql_query("SET CHARACTER SET utf8",$con); 
```

还要检查[这篇文章](https://stackoverflow.com/questions/4777900/how-to-display-utf-8-characters-in-phpmyadmin)

# php - mysql_fetch_array() 引号提高速度？

> ID：11345894
> 
> 赞同：1
> 
> 时间：2012-07-05T13:57:57.830
> 
> 标签：php, mysql

[http://www.securityandcaffeine.com/2008/04/03/php-mysql-and-mysql_fetch_array/](http://www.securityandcaffeine.com/2008/04/03/php-mysql-and-mysql_fetch_array/)

上面的文章让我很惊讶。它说：

> `mysql_fetch_array()`- “1 – 使用引号！有 1/7 的时间与“`$result['2']`进行比较`$result[2]`”

知道这是否属实吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T14:05:39.420

这似乎完全是基于一种误解。看到这句话，突出我的：

> 1 – 如果您引用这些值，但不要使用引号，您会浪费速度。根据 Reinhold Weber 的博客：#17：***“<code>$row['id'] 比`$row[id]`“.*** 如果你经常这样做，而且经常……哎哟。

是的，`$row['id']`比 快`$row[id]`，**因为`$row[id]`是语法错误，它试图解析一个常量，然后将它变成一个字符串，同时抛出一个通知。**但是`$row[1]`和`$row['id']`都是*有效*的并且应该执行非常相同。如果查找数字索引和查找字符串索引之间存在差异，那么它必须非常小，以至于不值得您花时间。

PHP 数组实际上并没有位置键，但都是关联的，这一发现并不是真正的新闻，因此也没有广泛传播的速度问题。事实上，这个快速基准测试表明“数字字符串”索引很容易成为所有索引中最慢的查找：[http ://codepad.org/aeNJ2u3O](http://codepad.org/aeNJ2u3O)

无论如何，您应该使用`mysql_fetch_assoc`or `mysql_fetch_row`，它分别为您获取命名（字符串索引）或未命名（数字索引）数组。使用`_fetch_array`，这让你们俩都受益，通常是不必要的。

如果您想要真实的性能数据，请针对您的用例对其进行基准测试。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-05T14:11:09.977

基于此报价：

> 获得 $result['2'] 的时间是 $result[2] 的 1/7。

我**非常**怀疑这是没有任何理由的准确，特别是考虑到文章链接到另一个人的（不存在的）博客作为参考。

为什么？因为在内部，[PHP](https://stackoverflow.com/questions/2350361/how-is-the-php-array-implemented-on-the-c-level)对数组使用哈希表。Kendall Hopkins 的回答很好地解释了实现：

> PHP 数组是一个链式哈希表（在键冲突时查找 O(c) 和 O(n)），它允许使用 int 和 string 键。它使用 2 种不同的散列算法将这两种类型放入相同的散列键空间。此外，存储在散列中的每个值都链接到存储在它之前的值和存储在它之后的值（链表）。它还有一个临时指针，用于保存当前项目，以便可以迭代哈希。

因此，除非有基准证明 int 和 string 键的两种独立散列算法存在 7 倍的性能差距，否则这篇文章是无稽之谈。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-05T14:04:51.900

哦，男孩... PHP 真的是一种灾难性的语言。

当您将 MySQL 结果作为组合关联/普通数组提取时，您*真正*得到的是关联数组，其中一些键是数字索引。

因此，*任何*查找都是关键查找。

`$result[2]`和之间的区别`$result["2"]`在于 PHP 需要首先将整数`2`转换为字符串`"2"`，以便它可以将其用作查找的键。

转换是否需要 6 倍的查找长度，我不能说；我没有做过任何基准测试。然而，它更长的事实当然是合理的。不管是真是假？文章的原作者有责任支持这些说法。

# c# - 创建 C# Web 服务 - 在创建结构时遇到问题

> ID：11345895
> 
> 赞同：0
> 
> 时间：2012-07-05T13:57:58.993
> 
> 标签：c#, web-services, xml-serialization

我正在创建 c# web 服务。其他一些服务器会频繁地将数据推送到 web 方法中。现在我必须验证这个 xml 并对那个数据做一些操作并返回确认。

1.  我将从我的 WS 中的服务器获得的请求是 XML 还是我需要反序列化？
2.  肥皂请求中将有用户名/密码。验证 re1uest 的最佳方法是什么？
3.  如何将确认发送回服务器？我需要发布 SOAP 响应并序列化和发送吗？

请帮助我。我是创建 Web 服务的新手。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T14:00:52.580

有一件事是肯定的，您总是需要在接收/传输时序列化/反序列化您的数据。如果您还发送用户名和密码，您还应该使用自己的加密算法对数据进行加密。PS：JSON 是我最喜欢的方式，因为它轻量级。

# android - 所有移动浏览器的完整网页和禁用缩放视口元标记

> ID：11345896
> 
> 赞同：44
> 
> 时间：2012-07-05T13:58:10.850
> 
> 标签：android, iphone, ipad, viewport, meta

我希望我的网页全屏显示并禁用所有移动设备上的缩放。

使用元标记：

```
<meta name="viewport" content="width=1165, user-scalable=no"> 
```

我可以为 iPhone/iPad 做到这一点，但在 Android 设备上，网站被放大到大约 125%。

如果我使用标签

```
<meta name="viewport" content="width=max-device-width, user-scalable=no"> 
```

我得到相反的结果。因此，它适用于 Android，但不适用于 iPad/iPhone。

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-09-04T19:50:29.163

不幸的是，每个浏览器都有自己的视口元标记实现。不同的组合适用于不同的浏览器。

**Android 2.2**：似乎根本不支持视口元标记。

**Android 2.3.x/3.x**：通过设置*user-scalable=no*您也可以禁用视口元标记的缩放。这可能就是您的宽度选项无效的原因。要允许浏览器缩放您的内容，您需要设置*user-scalable=yes*，然后要禁用缩放，您可以将最小和最大比例设置为相同的值，这样它就不会缩小或增长。玩弄最初的比例，直到您的网站完全适合。

```
<meta name="viewport" content="initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,width=device-width,height=device-height,target-densitydpi=device-dpi,user-scalable=yes" /> 
```

**Android 4.x**：与 2.3.x 相同的规则适用，除了不再支持最小和最大比例，如果您使用*user-scalable=yes*用户始终可以缩放，将其设置为“否”意味着忽略您自己的比例，这是我现在面临的问题，它把我引向了这个问题......你似乎不能在 4.x 中同时禁用缩放和缩放。

**iOS/Safari（4.x/5.x 测试）**：缩放按预期工作，您可以使用*user-scalable=0*禁用缩放（关键字是/否在 4.x 中不起作用）。iOS/Safari 也没有*target-densitydpi*的概念，所以你应该把它排除在外以避免错误。您不需要最小值和最大值，因为您可以按预期方式关闭缩放。只使用*宽度*，否则你会遇到[iOS 方向错误](http://scottjehl.github.com/iOS-Orientationchange-Fix/)

```
<meta name="viewport" content="initial-scale=1.0,width=device-width,user-scalable=0" /> 
```

**Chrome ：缩放像在 iOS 中一样按预期工作，最小值和最大值被尊重，您可以使用***user-scalable=no*关闭缩放。

```
<meta name="viewport" content="initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,width=device-width,user-scalable=no" /> 
```

**结论**：在一些基本的浏览器/设备检测之后，您可以使用一些相当简单的 JS 来相应地设置内容。我知道这种类型的检测是不受欢迎的，但在这种情况下，这几乎是不可避免的，因为每个供应商都做了自己的事情！希望这可以帮助人们对抗视口，如果有人有在不使用视口的情况下禁用 Android 4.x 缩放的解决方案，请告诉我。

[编辑]

**Android 4.x Chrome 浏览器**（我认为大多数国家/地区都预装了）：您可以确保用户无法缩放并且页面是全屏的。缺点：您必须确保内容具有固定宽度。我还没有在较低的 Android 版本上测试过这个。为此，请参阅示例：

```
<meta name="viewport" content="width=620, user-scalable=no" /> 
```

[编辑 2]

**iOS/Safari 7.1**：从 v7.1 开始，Apple 为视口元标记引入了一个新标志，称为`minimal-ui`. 为了帮助全屏应用程序，这隐藏了地址栏和底部工具栏以获得全屏体验（不是全屏 API，但关闭并且不需要用户接受）。它确实带有[相当多的错误，并且](http://www.mobilexweb.com/blog/ios-7-1-safari-minimal-ui-bugs)在 iPad 中不起作用。

```
<meta name="viewport" content="initial-scale=1.0,width=device-width,user-scalable=0, minimal-ui" /> 
```

[编辑 3]

**iOS/Safari 8 Beta 4**：在 EDIT 2 中提到的视口元标记`minimal-ui`现在已被 Apple 在此版本中删除。[来源 - WebKit 笔记](https://developer.apple.com/library/prerelease/ios/releasenotes/General/RN-iOSSDK-8.0/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-05T14:37:17.610

**HTML**

```
<head>
    <meta name='viewport' content='width=device-width,initial-scale=1,maximum-scale=1'>
</head> 
```

**jQuery**

选项1：

```
$('meta[name=viewport]').attr('content','width='+$(window).width()+',user-scalable=no'); 
```

选项 2：

```
var deviceSpecific = {
    iPad: 'width=1165,user-scalable=no'
};
if(navigator.userAgent.match(/iPad/i){
    $('meta[name=viewport]').attr('content',deviceSpecific.iPad);
} 
```

如果您发现不一致，选项二是最后的手段。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-23T13:40:36.967

只需使用：

```
<meta name="HandheldFriendly" content="True" /> 
```

适用于我的三星 Note II 和 HTC Desire。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-06-08T22:14:24.130

对于**Apple**设备来说很简单：

```
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1.0" /> 
```

当您通过放置在 iPhone/iPod/iPad 主屏幕上的快捷方式图标打开它时，第一个标签以全屏模式运行 Web 应用程序。

第二个标签仅与第一个标签一起使用。可能的值有：默认值、黑色和黑色半透明。

第三个标签将站点宽度阻止为其标准大小 (1.0)，并且不允许缩放。

注意：由于“apple-mobile”元标记在非 Apple 设备上被忽略，并且第三个标记在 HTML5 中是官方的，因此您可以一起使用所有这些标记。

对于**Android**，您没有一个全局解决方案，因为不是每个人都使用默认的 android 网络浏览器。请参阅[适用于 Android 的全屏 Web 应用程序](https://stackoverflow.com/questions/7517352/fullscreen-web-app-for-android)

这里还有一些其他有用的链接：

iOS 提示：http: [//matt.might.net/articles/how-to-native-iphone-ipad-apps-in-javascript/](http://matt.might.net/articles/how-to-native-iphone-ipad-apps-in-javascript/)

所有官方和非官方已知元：[https ://gist.github.com/kevinSuttle/1997924](https://gist.github.com/kevinSuttle/1997924)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-12-31T15:37:13.207

我有一个三星 Galaxy Note 4 并使用 chrome 作为我的浏览器。我发现它忽略了视口元标记，让它与 HandheldFriendly 一起工作。我最终得到了一个元标记组合。在 Android 和 iOS 上为我工作。

```
<meta name="HandheldFriendly" content="True">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="viewport" content="width=YOUR_SITE_WIDTH"> 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-08-15T08:41:43.717

Android 从版本 4.4.2 修复它

```
<meta name="viewport" content="initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,width=device-width,height=device-height,target-densitydpi=device-dpi,user-scalable=yes" /> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-06-11T08:03:09.523

Dan B 的以下建议对我很有用，我一直在尝试让我的网站在 android 上正确加载时遇到各种问题，这已经对它进行了排序。反正现在！

```
<meta name="viewport" content="width=YOUR_SITE_WIDTH"/> 
```

谢谢！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-06-28T06:26:19.093

我遇到了各种各样的问题，甚至开始构建一个浏览器检测系统来为不同的浏览器提供不同的视口标签。然后我决定尝试简化我正在做的事情并且一切正常。将视口设置为您希望站点的宽度，然后走开一切正常。

```
<meta name="viewport" content="width=1165 /> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-06-05T18:33:47.343

我们在标头中使用了以下 Javascript 来设置元标记：

```
<script>
  if (navigator.userAgent.match(/(iPad|iPhone|iPod)/g) {
    document.write("<meta name='viewport' content='width=1165, user-scalable=no'>"); // or whichever meta tags make sense for your site
  } else {
    document.write("<meta name='viewport' content='width=max-device-width, user-   scalable=no'>"); // again, which ever meta tags you need
  }
</script> 
```

您可以添加其他条件并根据您的特定需求进行设置。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-05-22T01:54:49.497

```
<meta name="viewport" content="width=device-width; height=device-height; maximum-scale=1.4; initial- scale=1.0; user-scalable=yes"/> 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-07-23T17:39:13.677

对于它的价值，这是我用来在我的 Nexus 7 (Android 4.2.2)/Chrome 上获得一个 1024 像素宽度的内容页面以完全全屏显示的内容，仅横向而不使用 javascript*：

```
width=device-width, initial-scale=.94, minimum-scale=0.8, maximum-scale=1.2, user-scalable=no 
```

（我认为 user-scalable=no 实际上否定了 min- & max-scale）。我通过反复试验得到了 0.94 的值，而不是通过调用设备像素密度或类似的任何计算。

*ie 强制内容宽度与窗口匹配——我确实使用 js 有条件地编写视口元内容。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-02-04T04:19:03.747

我正在使用此代码来防止放大 iPhone，问题已解决，但出现了另一个问题；当我单击输入字段时，整个窗口会跳起来，然后将其位置设置为正常，当我按下 go 按钮时，会发生相同的行为并且窗口会跳转。我需要摆脱跳转，以便只有窗口将其调整到正常位置。

```
function zoomDisable(){
  $('head meta[name=viewport]').remove();
  $('head').prepend('<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0" />');
} 
```

# udp - Netty UDP PortUnreachableException 在未来不会捕获

> ID：11345898
> 
> 赞同：0
> 
> 时间：2012-07-05T13:58:14.187
> 
> 标签：udp, netty

我是 Netty 的新手。我准备了一个基本的测试。

当我将数据报从 UDP 客户端发送到不存在的目标时，会引发异常 PortUnreachableException。

但是，该写入操作的未来返回成功。我虽然它应该有返回失败和异常。

```
ChannelFuture cf = udpConnection.write("TEST").awaitUninterruptibly();
if ( cf.isSuccess()){
    log.error("should have failed.");
}else {
    log.error("Exception: ", cf.getCause());
} 
```

我错过了什么？我如何在未来的监听器中为写请求捕获异常。

问候， 哈维

# mysql - mysql log_queries_not_using_indexes 工作错误？

> ID：11345899
> 
> 赞同：2
> 
> 时间：2012-07-05T13:58:22.477
> 
> 标签：mysql, performance, stored-procedures, mysql-slow-query-log

我有以下程序：

```
CREATE PROCEDURE getProjectTeams(IN p_idProject INTEGER)
BEGIN
 SELECT idTeam, name, workersCount, confirmersCount, isConfirm 
 FROM Teams JOIN team_project USING (idTeam)
 WHERE idProject = p_idProject;
END $$ 
```

这里是`CREATE TABLE`表格`Teams`和脚本`team_project`：

```
CREATE TABLE Teams (
 idTeam INT PRIMARY KEY auto_increment,
 name CHAR(20) NOT NULL UNIQUE,
 isConfirm BOOL DEFAULT 0,
 workersCount SMALLINT DEFAULT 0,
 confirmersCount SMALLINT DEFAULT 0 
) engine = innodb DEFAULT CHARACTER SET=utf8 COLLATE=utf8_polish_ci;

CREATE TABLE team_project (
idTeam INT NOT NULL,
idProject INT NOT NULL,
FOREIGN KEY(idTeam) REFERENCES Teams(idTeam)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
FOREIGN KEY (idProject) REFERENCES Projects(idProject)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
PRIMARY KEY(idTeam, idProject)
) engine = innodb DEFAULT CHARACTER SET=utf8 COLLATE=utf8_polish_ci; 
```

我在服务器上几乎没有具有相同架构的数据库，但只有当它被一个数据库调用时才会记录此过程。那些其他数据库完成的调用没有被记录。这不是查询慢或慢的问题（它总是需要大约 0.0001 秒）。这就是为什么它被记录为不使用索引。这怎么可能？

正如 Zagor23 建议`EXPLAIN`的那样，我运行它，这是结果。a) 在记录过程的数据库中：

```
| id | select_type | table        | type | possible_keys     | key       | key_len | ref   | rows | Extra                          |
|  1 | SIMPLE      | team_project | ref  | PRIMARY,idProject | idProject | 4       | const |    3 | Using index                    |
|  1 | SIMPLE      | Teams        | ALL  | PRIMARY           | NULL      | NULL    | NULL  |    4 | Using where; Using join buffer | 
```

b) 数据库，其中未记录过程：

```
| id | select_type | table        | type   | possible_keys     | key       | key_len | ref                              | rows | Extra       |
|  1 | SIMPLE      | team_project | ref    | PRIMARY,idProject | idProject | 4       | const                            |    1 | Using index |
|  1 | SIMPLE      | Teams        | eq_ref | PRIMARY           | PRIMARY   | 4       | ecovbase.team_project.idTeam |    1 |             | 
```

事实是 - 数据有点不同，但差别不大。GoodDB（不记录 proc）在 Teams 中有 11 行，在 team_project 中有 420 行，BadDB - 在 Teams 中有 4 行，在 team_project 中有大约 800 行。看起来不像是出价差异。有没有办法避免记录该过程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T14:17:36.837

也许它没有被记录，因为它在这些情况下使用索引。尝试运行

```
EXPLAIN SELECT idTeam, name, workersCount, confirmersCount, isConfirm 
FROM Teams JOIN team_project USING (idTeam)
WHERE idProject = p_idProject; 
```

在你觉得它不应该使用索引的数据库上，看看它是否真的这样做。如果有一个可用且适合查询的索引，并且返回的结果集达到整个结果集的 7-8% 左右，MySql 将使用索引。

你说那`information_schema`是相同的，但如果数据不是，那可能是不同行为的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T14:25:43.087

@Zago23 解释了为什么会发生这种情况。您的表在此数据库中可能要大得多，并且您没有适当的索引。

我的建议是`UNIQUE`在表上添加一个索引`team_project`，在`(idProject, idTeam)`

* * *

在添加`EXPLAIN`输出之后，似乎在记录的情况下，MySQL 优化器选择了一个不需要使用`Team`表中任何索引的计划，只扫描整个（4 行！）表。这很可能更快，因为该表只有 4 行。

现在，slow-log 有一些默认设置，如果我没记错的话，它会在日志中添加任何不使用索引的查询，即使查询需要 0.0001 秒才能完成。

您可以简单地忽略此日志记录或更改慢日志设置以忽略不使用索引的查询。请参阅 MySQL 文档：[慢查询日志](http://dev.mysql.com/doc/refman/5.5/en/slow-query-log.html)

# ajax - 带有 Ajax POST 的 Django 网址和应用程序网址

> ID：11345901
> 
> 赞同：1
> 
> 时间：2012-07-05T13:58:27.697
> 
> 标签：ajax, django, urlconf

我发现了一个问题并将其跟踪到 url conf。我正在尝试向 /gallery/add 页面执行 ajax 发布，该页面将新记录添加到数据库中。

最初我在我的应用程序中添加了一个 urls.py，然后从根 urls.py 中“包含”它，但是在 ajax 发布期间失败了（似乎 /gallery/ 刚刚从日志记录中返回）。

然后我恢复到根 urls.py 并且它按我预期的那样工作。

所以问题是这些 urlconfs 是否等效？

（一种）

```
# ./urls.py
from django.conf.urls.defaults import *

urlpatterns = patterns('',
    (r'^gallery$', 'gallery.views.home'),
    (r'^gallery/add$', 'gallery.views.add'), # ajax post works with this one
) 
```

(乙)

```
# ./urls.py
from django.conf.urls.defaults import *

urlpatterns = patterns('',
    (r'^gallery/', include('gallery.urls')),
)

# ./gallery/urls.py
from django.conf.urls.defaults import *

urlpatterns = patterns('',
    (r'$', 'gallery.views.home'),
    (r'add$', 'gallery.views.add'), # ajax request doesn't work, instead it goes to gallery.views.home
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T14:01:25.363

在第二个示例中，您仍然需要，`^`因为否则第一个正则表达式将只匹配任何具有结尾的旧字符串（由于`$`），这当然是所有这些:)

```
# ./gallery/urls.py
from django.conf.urls.defaults import *

urlpatterns = patterns('',
    (r'^$', 'gallery.views.home'),
    (r'^add$', 'gallery.views.add'),
) 
```

# asp.net - 我们可以为特定页面使用不同的程序集吗？

> ID：11345903
> 
> 赞同：1
> 
> 时间：2012-07-05T13:58:29.030
> 
> 标签：asp.net, ajax, reporting-services, .net-assembly

我正在为我的项目和**框架 3.5使用****Ajax 工具包**1.0 。我无法更新项目的 ajax 工具包，因为项目非常大。但我想使用**SSRS**进行报告。但问题是每当我构建项目时，它都会显示**system.web.extensions 1.0.61025.0**错误，但报告查看器需要**System.Web.Extensions, Version=3.5.0.0, Culture=中立，PublicKeyToken=31bf3856ad364e35**，所以我可以只在一页使用不同的程序集吗？请提供一些示例或建议。

# nhibernate - NHibernate 将列映射到属性和包

> ID：11345906
> 
> 赞同：0
> 
> 时间：2012-07-05T13:58:33.667
> 
> 标签：nhibernate, nhibernate-mapping

我在映射以下站点时遇到了一些困难：

我有一个具有连接 ID 的人，我用它来获取地图包和属性。如果数据库已经存在，则此方法有效。但是对于我们的单元测试，我们从模式中生成一个，它给出了一个错误：“重复的列名”。

这是映射：

```
 <?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" namespace="DomainLayer.SearchDomain" assembly="Test">
  <class name="SearchPerson" table="person" lazy="false" mutable="false">
    <id name="Id" column="`id`" type="int">
      <generator class="identity" />
    </id>
    <property name="Name" column="`NAAM`" type="string"  />
    <property name="FirstName" column="`VOORNAAM`" type="string"  />
    <property name="ConnectionId" column="`Koppelid`" type="int" />
    <bag name="Languages" lazy="false" mutable="false" access="field.camelcase-underscore">
      <key property-ref="ConnectionId" column="Koppelid" />
      <one-to-many class="DomainLayer.Person.LanguageSkill, Test" />
    </bag>
  </class>
</hibernate-mapping> 
```

问题：“Koppelid”既在包中的 Key 属性中，也在属性中。

**编辑：**

语言技能映射：

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" namespace="DomainLayer.Person" assembly="Test">
  <class name="LanguageSkill" table="languageskill" lazy="false">
    <id name="Id" type="Int32">
      <generator class="identity" />
    </id>
    <property name="ConnectionId" column="`KoppelId`" type="Int64"  />
    <property name="Remark" column="`Opmerking`" type="string"  />
    <property name="Source" column="`CdOorsprong`" type="string"  />
    <property name="MotherTongue" column="`moedertaal`" type="boolean"  />
    <property name="ModifiedDate" column="`wyzdat`" type="DateTime"  />
  </class>
</hibernate-mapping> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T07:53:31.277

它应该确实有效。这可能是因为您在一种情况下用 ` 标记了它，但在另一种情况下没有。

试试这个：

```
<bag ...>
    <key property-ref="ConnectionId" column="`Koppelid`" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T08:05:24.643

原因实际上是该列在 LanguageSkillMapping 中定义了两次。由于您映射了该列，您可以将其映射为参考并将包设置为反向

```
<bag name="Languages" inverse="true" lazy="false" mutable="false" access="field.camelcase-underscore">
  <key property-ref="ConnectionId" column="Koppelid" />
  <one-to-many class="DomainLayer.Person.LanguageSkill, Test" />
</bag>

<many-to-one name="SearchPerson" column="`KoppelId`" /> 
```

更新：没关系，斯特凡明白了

# database - 轻量级 Groovy 持久性

> ID：11345908
> 
> 赞同：11
> 
> 时间：2012-07-05T13:58:44.403
> 
> 标签：database, groovy, persistence

Groovy 中的持久性有哪些轻量级选项？到目前为止，我已经考虑过序列化和 XML，但我想要一些比这些更强大的东西，至少这样我不必每次都重写整个文件。理想情况下，它将：

*   在类路径中不需要 JAR，而是使用 Grapes
*   不需要外部流程、管理或身份验证（因此全部嵌入）
*   支持锁定

我计划使用它在独立的 Groovy 脚本运行之间缓存一些信息。我想响应将集中在 SQL 和 NoSQL 数据库上。链接到展示这种用法的页面将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-05T14:58:27.830

# 完整的 SQL 数据库

[h2](http://www.h2database.com/html/main.html)进程内SQL 数据库非常易于使用。这与 grails 默认使用的数据库引擎相同，但在 groovy 脚本中使用也很简单：

```
@GrabConfig(systemClassLoader=true)
@Grab(group='com.h2database', module='h2', version='1.3.167')

import groovy.sql.Sql

def sql = Sql.newInstance("jdbc:h2:hello", "sa", "sa", "org.h2.Driver")
sql.execute("create table test (id int, value text)")
sql.execute("insert into test values(:id, :value)", [id: 1, value: 'hello'])
println sql.rows("select * from test") 
```

在这种情况下，数据库将保存到一个名为`hello.h2.db`.

# 简单的持久映射

另一种选择是[jdbm](https://code.google.com/p/jdbm2/)，它提供磁盘支持的持久映射。在内部，它使用 Java 的序列化。编程接口要简单得多，但它也没有成熟的 SQL 数据库强大得多。不支持并发访问，但它是同步的和线程安全的，这可能就足够了，具体取决于您的锁定要求。这是一个简单的例子：

```
@Grab(group='org.fusesource.jdbm', module='jdbm', version='2.0.1')

import jdbm.*

def recMan = RecordManagerFactory.createRecordManager('hello')
def treeMap = recMan.treeMap("test")
treeMap[1] = 'hello'
treeMap[100] = 'goodbye'
recMan.commit()
println treeMap 
```

这会将地图保存到一组文件中。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-07-23T23:58:32.237

只是关于使用 JDBM 的简单持久性的一些常规更新。现在支持并发访问。名称已从 JDBM4 更改为 MapDB。

```
@Grab(group='org.mapdb', module='mapdb', version='0.9.3')

import java.util.concurrent.ConcurrentNavigableMap
import org.mapdb.*

DB db = DBMaker.newFileDB( new File("myDB.file") )
           .closeOnJvmShutdown()
           .make()

ConcurrentNavigableMap<String,String> map = db.getTreeMap("myMap")

map.put("1", "one")
map.put("2", "two")
db.commit()

println "keySet "+map.keySet()

assert map.get("1") == "one"
assert map.get("2") == "two"

db.close() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-19T00:25:12.237

[Chronicle Map](https://github.com/OpenHFT/Chronicle-Map)是 JVM 的持久`ConcurrentMap`实现。

使用示例：

```
ConcurrentMap<String, String> store = ChronicleMap
    .of(String.class, String.class)
    .averageKey("cachedKey").averageValue("cachedValue")
    .entries(10_000)
    .createPersistedTo(new File("cacheFile"))

store.put("foo", "bar")
store.close() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-17T11:30:44.927

我参加晚会有点晚了。但为了子孙后代，在这里列出另一个选项：

[风暴](https://github.com/kdabir/gstorm/)

> 用于数据库和 CSV 文件的简单 ORM。旨在用于 groovy 脚本和小型项目

*披露：作者在这里:)*

# facebook - 用户时间轴中的 facebook 应用程序操作

> ID：11345911
> 
> 赞同：1
> 
> 时间：2012-07-05T13:59:01.760
> 
> 标签：facebook, facebook-timeline

我做了一个 facebook 应用程序，我用谷歌搜索了很多次，但没有地方给我答案

我想要的只是在 Facebook 应用程序用户时间轴上发布。

像社交摄像头应用程序，当用户观看视频时，您将能够在该用户时间轴上阅读他/她观看该视频的内容。

您可以从此链接访问我的应用程序，如果您能告诉我如何在用户时间轴中发布，我将不胜感激

[http://apps.facebook.com/asmgxtestonetwo/?qtnid=20](http://apps.facebook.com/asmgxtestonetwo/?qtnid=20)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:35:54.160

您可以使用 Open Graph Actions（有一个内置操作“watch”）并使用聚合发布到时间轴上：

*   [打开图表操作](http://developers.facebook.com/docs/concepts/opengraph/actions/)

*   [操作方法：定义聚合](https://developers.facebook.com/docs/technical-guides/opengraph/defining-an-aggregation/)

# java - Hibernate ClassNotFound Exception - jars 不兼容？

> ID：11345916
> 
> 赞同：1
> 
> 时间：2012-07-05T13:59:39.147
> 
> 标签：java, hibernate, maven, dependencies

我有一个具有以下 Hibernate 相关依赖项的 Hibernate 项目：

```
 <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-core</artifactId>
        <version>4.1.4.Final</version>
    </dependency>

    <!-- Because this is a web app, we also have a dependency on the servlet api. -->
    <dependency>
<groupId>org.apache.tomcat</groupId>
<artifactId>servlet-api</artifactId>
<version>6.0.35</version>
 </dependency>

    <!-- Hibernate uses slf4j for logging, for our purposes here use the simple backend -->
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-simple</artifactId>
        <version>1.6.4</version>
    </dependency>

    <!-- Hibernate gives you a choice of bytecode providers between cglib and javassist -->
    <dependency>
        <groupId>javassist</groupId>
        <artifactId>javassist</artifactId>
        <version>3.12.1.GA</version>
    </dependency> 
```

错误是：

```
 NoClassDefFoundError: org/hibernate/annotations/common/reflection/MetadataProvider 
```

完整的堆栈跟踪：

```
 Initial SessionFactory creation failed.java.lang.NoClassDefFoundError: org/hibernate/annotations/common/reflection/MetadataProvider
 05.07.2012 15:51:47 com.sun.jersey.spi.container.ContainerResponse mapMappableContainerException
 SCHWERWIEGEND: The exception contained within MappableContainerException could not be mapped to a response, re-throwing to the HTTP container
 java.lang.ExceptionInInitializerError
at com.bachelor.core.HibernateUtil.buildSessionFactory(HibernateUtil.java:27)
at        com.bachelor.service.EstateResourceBean.postAndGetResponse(EstateResourceBean.java:420)
at com.bachelor.service.EstateResourceBean.postEstate(EstateResourceBean.java:166)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60)
at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$ResponseOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:205)
at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)
at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:288)
at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)
at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)
at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1483)
at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1414)
at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1363)
at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1353)
at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:414)
at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:537)
at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:708)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:581)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:662) 
```

我已经用hibernate core 4.1.4.Final试过了。不工作。我的 lib 文件夹也有 hibernate-core-4.1.3.Final 和 dom4j-1.6.1.jar。

我有另一个 Hibernate 项目，它适用于这个依赖项设置。我的 lib 文件夹中只有一个额外的 hsqldb.jar。怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T14:25:57.583

更好的是，尝试添加这个，这是更新的：

```
<dependency>
    <groupId>org.hibernate.common</groupId>
    <artifactId>hibernate-commons-annotations</artifactId>
    <version>4.0.1.Final</version>
</dependency> 
```

# java - 如何导入 org.apache Java 依赖项 w/ 或 w/o Maven

> ID：11345923
> 
> 赞同：11
> 
> 时间：2012-07-05T14:00:14.950
> 
> 标签：java, netbeans, import, hadoop, dependencies

所以快速背景是我正在创建一个 java 程序，它使用许多不同的导入

```
 import org.apache.hadoop.conf.*;
    import org.apache.hadoop.fs.Path;
    import org.apache.hadoop.io.*;
    import org.apache.hadoop.mapreduce.*;
    import org.apache.hadoop.util.*;
    import org.apache.hadoop.mapreduce.lib.input.FileInputFormat;
    import org.apache.hadoop.mapreduce.lib.output.FileOutputFormat; 
```

我知道 Netbeans 没有找到这些文件，因为我的计算机上没有这些文件。但是有没有办法让 Netbeans 自动连接 org.apache 并检索这些文件？还是我只需要去下载它们。有人推荐使用 Maven，但我不确定这是否是正确的解决方案或如何去做？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-05T14:09:31.013

除非您使用 Maven 结构（请参阅此处的 Maven[入门](http://maven.apache.org/guides/getting-started/index.html)），否则您必须手动下载所有 jar。

如果仅使用 Hadoop（如您的示例中），这似乎没什么大不了的，但是在处理大型项目时，在 pom.xml 文件中声明您的依赖项会更容易。它比下载 X 个不同的 jar 更容易，并且您可以轻松移动到更新版本的库，而不必删除并下载另一个。

我看到有人在评论中问为什么人们这么喜欢 Maven。好吧，老实说，我个人觉得它易于使用且非常有用。此外，可以轻松地将 Maven 项目导入 IntelliJ、Eclipse 或 NetBeans，而创建例如 IntelliJ 项目可能会导致难以将其导入 Eclipse 或 NetBeans。

要开始将 Maven 与 Netbeans 一起使用，您可以转到：新项目、类别：Maven 项目：{最佳选项}。然后在项目文件中，打开 pom.xml。这里是为您的项目添加依赖项的地方。如果您不确定要插入什么，请尝试在互联网上搜索您的 jar 名称 +“maven”。Netbeans 插件能够连接到 Maven 存储库并自动完成大多数字段。

示例来自： http: [//mvnrepository.com/artifact/mysql/mysql-connector-java/5.1.6](http://mvnrepository.com/artifact/mysql/mysql-connector-java/5.1.6)

```
<project...>
....
<dependencies>
    <dependency>
        <groupId>org.apache.hadoop</groupId>
        <artifactId>hadoop-core</artifactId>
        <version>1.0.3</version>
    </dependency>
    <dependency>
        <groupId>mysql</groupId>
        <artifactId>mysql-connector-java</artifactId>
        <version>5.1.6</version>
    </dependency>
</dependencies>
...
</project> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-17T07:55:45.033

在此处下载 .jar 文件：http: [//mvnrepository.com/artifact/org.apache.hadoop/hadoop-core/0.20.2](http://mvnrepository.com/artifact/org.apache.hadoop/hadoop-core/0.20.2)

在 Eclipse 中，右键单击您的项目，单击 Properties，在文本框中搜索 Library，单击 Build Paths，单击 Add External JAR，然后选择您从上面的链接下载的文件。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-05T14:04:37.297

您必须自己下载 jar 文件。除非你开始使用 Maven 或类似的依赖管理工具。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-05T14:04:24.183

您必须下载它们。该名称`org.apache.hadoop`是一个包名，我们只使用站点的名称作为约定。[有关更多信息，请参阅有关包的本教程](http://www.jarticles.com/package/package_eng.html)。本质上，包是您计算机上的一个文件夹，通常位于`Java\jre\lib\ext\`目录中。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-08-06T11:20:56.533

参考教程 [http://www.tutorialspoint.com/hadoop/hadoop_mapreduce.htm](http://www.tutorialspoint.com/hadoop/hadoop_mapreduce.htm)

它提到：-

*Download Hadoop-core-1.2.1.jar, which is used to compile and execute the MapReduce program. Visit the following link [http://mvnrepository.com/artifact/org.apache.hadoop/hadoop-core/1.2.1](http://mvnrepository.com/artifact/org.apache.hadoop/hadoop-core/1.2.1) to download the jar.*

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-05T14:04:23.520

不是 netbeans 用户，但我敢肯定，即使在 netbeans 中，您也有一个 maven 插件。“Mavenize”您的项目，当您执行 mvn clean install 时，您会将这些 jars 获取到本地 maven 存储库。
对于 Eclipse，我使用 m2Eclipse 插件，它对我来说非常有效。
这当然取决于这些 jars 可以在网络上的 maven 存储库中找到，例如[maven central repository](http://search.maven.org/)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-11-08T15:01:14.943

我终于找到了创建新 Hadoop 项目并使用 Maven 导入依赖项的首选方法。

我使用 NetBeans 创建了一个新的 Maven 项目。

然后在项目文件下，我打开 pom.xml。

我终于在里面添加了

```
 <dependency>
        <groupId>org.apache.hadoop</groupId>
        <artifactId>hadoop-core</artifactId>
        <version>0.20.2</version>
    </dependency> 
```

在构建了依赖项之后，我现在可以编写代码了。

# ruby - 如何在 Nokogiri 中转储具有内联链接目标的文本节点？

> ID：11345925
> 
> 赞同：0
> 
> 时间：2012-07-05T14:00:21.143
> 
> 标签：ruby, nokogiri

我有一些 HTML，例如：

```
<span class="foo">foo bar <a href="http://example.com">example</a> baz</span> 
```

我想把它变成一个字符串，如：

```
foo bar http://example.com baz 
```

我正在使用 Nokogiri，我有类似的东西：

```
doc.css('.foo').each do |message|
  message.css('a').map {|link| link.replace(link['href'])}
  message.xpath('.//text()').map do |m|
    p m.text
  end
end 
```

但这似乎表明：

```
foo bar
http://example.com
baz 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T18:17:52.230

`p m.text`将在每行文本后插入一个换行符，但文档本身没有任何换行符。简单地打印出来`message.text`，你应该得到你想要的。

```
require 'rubygems'
require 'nokogiri'

doc = Nokogiri::HTML.fragment(DATA.read)
doc.css('.foo').each do |message|
  message.css('a').each {|link| link.replace(link['href'])}
  puts message.text # prints "foo bar http://example.com baz"
end

__END__
<span class="foo">foo bar <a href="http://example.com">example</a> baz</span> 
```

# java - Apache Camel - 失败的 FTP 组件

> ID：11345926
> 
> 赞同：3
> 
> 时间：2012-07-05T14:00:32.153
> 
> 标签：java, ftp, apache-camel, esb

我写了一小块骆驼来消费一个ftp服务器。

但是在运行一段时间后，它会抛出异常，继续运行但不再消耗任何东西。此外，当我再次启动它并且有大量文件等待消耗时，它会再次崩溃。我已经添加了一个异常处理程序，但似乎没有捕获异常。

这是我收到的例外：

```
Caused by: [org.apache.camel.component.file.GenericFileOperationFailedException - File operation failed: 150 Opening ASCII mode data connection for 2386442.XML(3895 bytes).
Accept timed out. Code: 150]
org.apache.camel.component.file.GenericFileOperationFailedException: File operation failed: 150 Opening ASCII mode data connection for 2386442.XML(3895 bytes).
Accept timed out. Code: 150
    at org.apache.camel.component.file.remote.FtpOperations.retrieveFileToStreamInBody(FtpOperations.java:336)
    at org.apache.camel.component.file.remote.FtpOperations.retrieveFile(FtpOperations.java:297)
    at org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:333)
    at org.apache.camel.component.file.remote.RemoteFileConsumer.processExchange(RemoteFileConsumer.java:94)
    at org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:175)
    at org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:136)
    at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:140)
    at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:92)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
    at java.util.concurrent.FutureTask$Sync.innerRunAndReset(FutureTask.java:317)
    at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:150)
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$101(ScheduledThreadPoolExecutor.java:98)
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.runPeriodic(ScheduledThreadPoolExecutor.java:180)
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:204)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.net.SocketTimeoutException: Accept timed out
    at java.net.PlainSocketImpl.socketAccept(Native Method)
    at java.net.PlainSocketImpl.accept(PlainSocketImpl.java:408)
    at java.net.ServerSocket.implAccept(ServerSocket.java:462)
    at java.net.ServerSocket.accept(ServerSocket.java:430)
    at org.apache.commons.net.ftp.FTPClient._openDataConnection_(FTPClient.java:560)
    at org.apache.commons.net.ftp.FTPClient.retrieveFile(FTPClient.java:1442)
    at org.apache.camel.component.file.remote.FtpOperations.retrieveFileToStreamInBody(FtpOperations.java:328)
    ... 16 more
Caused by: [org.apache.camel.component.file.GenericFileOperationFailedException - Cannot retrieve file: GenericFile[2386448.XML] from: Endpoint[ftp://1.1.1.1?delay=15000&delete=true&disconnect=true&exclude=((?i).*pdf$)&password=******&username=user]
org.apache.camel.component.file.GenericFileOperationFailedException: Cannot retrieve file: GenericFile[2386448.XML] from:   Endpoint[ftp://1.1.1.1?delay=15000&delete=true&disconnect=true&exclude=((?i).*pdf$)&password=******&username=user]
   at org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:338)
  at org.apache.camel.component.file.remote.RemoteFileConsumer.processExchange(RemoteFileConsumer.java:94)
    at org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:175)
    at org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:136)
    at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:140)
    at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:92)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
    at java.util.concurrent.FutureTask$Sync.innerRunAndReset(FutureTask.java:317)
    at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:150)
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$101(ScheduledThreadPoolExecutor.java:98)
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.runPeriodic(ScheduledThreadPoolExecutor.java:180)
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:204)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662) 
```

这是我使用 Java DSL 制作的路线：

```
 // XML Predicate
    // only allows names without spaces
    Predicate xmlPredicate = header(RssUtils.CAMEL_FILE_NAME).regex(
            "([\\S]+(\\.(?i)(xml))$)");
    // Images Predicate
    // only allows names without spaces
    Predicate imgPredicate = header(RssUtils.CAMEL_FILE_NAME).regex(
            "([\\S]+(\\.(?i)(jpg|png|gif))$)");

    onException(SchemaValidationException.class).to(
            "file://" + props.getProperty(RssUtils.ROOT_DIR)
                    + "/errors/SchemaValidationException");

    onException(GenericFileOperationFailedException.class).to(
            "file://" + props.getProperty(RssUtils.ROOT_DIR)
                    + "/errors/GenericFileExceptions");

    from(
            "ftp://"
                    + props.getProperty(RssUtils.FTP_URL)
                    + "?username="
                    + props.getProperty(RssUtils.FTP_USER)
                    + "&password="
                    + props.getProperty(RssUtils.FTP_PWD)
                    + "&disconnect=true&delete=true&exclude=((?i).*pdf$)&delay="
                    + props.getProperty(RssUtils.FTP_DELAY))
            .choice()
            .when(xmlPredicate)
            .to("jms:xmlQueue")
    .to("jms:archiveQueue")
            .when(imgPredicate)
            .to("file://" + props.getProperty(RssUtils.ROOT_DIR) + "/img")
            .otherwise()
            .to("file://" + props.getProperty(RssUtils.ROOT_DIR)
                    + "/errors/other");

    from("jms:xmlQueue").to("validator:FtpXmlValidator.xsd")
            .to("xslt://XmlToRssConverter.xsl")
            .process(rssFeedProcessor)
            .to("file://" + props.getProperty(RssUtils.ROOT_DIR) + "/rss/");

from("jms:archiveQueue")
    .to("file://" + props.getProperty(RssUtils.ROOT_DIR) + "/archive/"); 
```

我能做些什么来避免这种行为吗？这真的很难测试，所以我希望有人发现我的代码中的缺陷。我现在已经搜索了很长一段时间，但我没有找到任何可靠的东西。也许我可以通过某种方式调试这个问题？

也许有几件事我发现有人可以给出他的强硬：

*   使用 onException 时使用handled(true)
*   我可以设置消费者的最大批量大小吗？（我可以为此使用油门吗？）
*   最后使用显式尝试捕获，因为我使用的是 Java DSL

如果我在这里说错了，请不要开枪，我只是在学习 Camel。因此，如果有人对上面的代码有任何建议，我将不胜感激！

提前非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-23T11:12:58.067

您在这里遇到的是一个 FTP 问题，它发生在 Apache Camel 中的事实在很大程度上是无关紧要的。

炸弹的关键部分是：

> 在 java.net.PlainSocketImpl.socketAccept(Native Method) 在 java.net.PlainSocketImpl.accept(PlainSocketImpl.java:408) 在 java.net.ServerSocket.implAccept(ServerSocket.java:462) 在 java.net.ServerSocket.accept (ServerSocket.java:430) 在 org.apache.commons.net.ftp.FTPClient。*openDataConnection* (FTPClient.java:560)

org.apache.commons.net.ftp.FTPClient的[openDataConnection](http://grepcode.com/file/repo1.maven.org/maven2/commons-net/commons-net/1.4.1/org/apache/commons/net/ftp/FTPClient.java#FTPClient._openDataConnection_%28int%2Cjava.lang.String%29)方法支持主动模式 FTP - 被动模式只使用与命令相同的端口，因此不需要单独的端口连接。

尝试切换到被动模式（对于 Apache Camel，passiveMode = true）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T16:37:00.200

从表面上看，不看为什么你的路线会失败，听起来你想要做的是[处理并继续](http://camel.apache.org/exception-clause.html)——即，处理这个异常并从你离开的地方继续你的路线。根据文档：

> **从 Camel 2.3 开始可用**
> 在 Camel 2.3 中，我们引入了一个新选项`continued`，它允许您**处理**和**继续**在原始路由中路由，就好像没有发生异常一样。
> 
> 例如，如果抛出 IDontCareException 则忽略并继续，我们可以这样做：

```
onException(IDontCareException).continued(true); 
```

这里发生的是：

> Camel 将捕获异常并且 . . . 忽略它并继续在原始路由中路由。然而 。. . 它将首先路由该 [onException] 路由，然后它将继续在原始路由中路由。

试试这个，它可能会解决你的问题。正如我在上面暗示的那样，根据您的根本问题是什么，这可能更像是一个创可贴，而不是一个适当的解决方案。更好的方法可能是找出 FTP 使用者失败的原因。乍一看，似乎找不到名为`2386448.XML`.

一旦确定了根本原因，就可以使用 a`choice`在正确的时间做出不同的行为，如下所示：

```
.choice()
    .when(isValidFtpResponse())
         .to(DIRECT_CONTINUE_FTP_ROUTE)
    .otherwise()
        .setBody(constant(null))
        .log(ERROR, "FTP failed: ${headers}")
.end() 
```

希望这能给你一些想法并帮助你通过这个问题。

# c++ - 在 C++ 中编译 SFML 库的问题

> ID：11345927
> 
> 赞同：1
> 
> 时间：2012-07-05T14:00:36.020
> 
> 标签：c++, visual-studio-2010, compiler-errors, compiler-warnings, sfml

我正在使用 SFML 制作一些项目。我已经从他们的官方网站下载了库，使用 cmake 我制作了 VS10 项目，编译它并获得了我需要的所有库和文件。但是，在我的项目中，我不断收到无意义的错误，例如

> 类“sf::SoundBuffer”没有成员“LoadFromFile”
> 
> 类“sf::Sound”没有成员“SetBuffer”

即使我检查了 SoundBuffer 标头，也有一个名为 LoadFromFile 的函数，而在 Sound 中有一个名为 SetBuffer 的函数。

```
 SoundM::SoundM(void) 
  {
     buffer.LoadFromFile("ress/soundA.wav");
     collision.SetBuffer(buffer);
  }

   #ifndef SOUND_H
   #define SOUND_H

    enum Sounds {
PaddleCollision,
Losing
    };

     class SoundM {
     public:
SoundM(void);
void play(Sounds Sound);
    private:
sf::SoundBuffer buffer;
sf::Sound collision;
    };

    #endif 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T19:23:48.790

我假设您使用的是 SFML 2.0 版 RC。名称约定发生了变化，现在所有函数名称都以小写字母（驼峰式）开头。

所以你应该试试。

```
buffer.loadFromFile("ress/soundA.wav");
collision.setBuffer(buffer); 
```

取而代之的是。

```
buffer.LoadFromFile("ress/soundA.wav");
collision.SetBuffer(buffer); 
```

希望对你有帮助！

# android - ListView 已排序

> ID：11345930
> 
> 赞同：0
> 
> 时间：2012-07-05T14:00:46.053
> 
> 标签：android, listview

我为“ListView”创建了一个“BaseAdapter”。我想对列表中的元素进行排序，因此“BaseAdapter”的构造函数接收到元素的有序数组。但我不知道为什么，元素没有正确排序。

```
public class NotificacionesAdapter extends BaseAdapter
{
  private LayoutInflater inflater;
  private NotificacionInfo[] notificaciones = null;

  static class ViewHolder
  {
   TextView titulo;
   TextView mensaje;
   TextView fecha;
  }

  public static class NotificacionInfo implements Comparable<NotificacionInfo>
  {
    private String titulo;
    private String mensaje;
    private Date fecha; 

    public NotificacionInfo()
    {       
    }

    public String getTitulo()
    {
        return titulo;
    }

    public void setTitulo(String titulo)
    {
        this.titulo = titulo;
    }

    public String getMensaje()
    {
        return mensaje;
    }

    public void setMensaje(String mensaje)
    {
        this.mensaje = mensaje;
    }

    public Date getFecha()
    {
        return fecha;
    }

    public void setFecha(Date fecha)
    {
        this.fecha = fecha;
    }

    @Override
    public int compareTo(NotificacionInfo another)
    {
        return another.getFecha().compareTo(this.fecha);            
    }           
  }

  public NotificacionesAdapter(Context context, NotificacionInfo[] notificaciones)
  {
    this.inflater = LayoutInflater.from(context);       
    this.notificaciones = notificaciones;

    Arrays.sort(this.notificaciones);

    System.out.println ();
  }

  @Override
  public int getCount()
  {
    return this.notificaciones.length;
  }

  @Override
  public Object getItem(int arg0)
  {
    return notificaciones[arg0];
  }

  @Override
  public long getItemId(int position) 
  {
    return position;
  }

  @Override
  public View getView(int position, View convertView, ViewGroup parent)
  {
    ViewHolder holder;

    if (convertView == null)
    { 
        convertView = inflater.inflate(R.layout.t_notificacion, null);

        holder = new ViewHolder();
        holder.titulo = (TextView) convertView.findViewById(R.id.titulo);
        holder.mensaje = (TextView) convertView.findViewById(R.id.mensaje);
        holder.fecha = (TextView) convertView.findViewById(R.id.fecha); 

        convertView.setTag(holder);
    }
    else
    {           
        holder = (ViewHolder) convertView.getTag();
    }

    holder.titulo.setText(notificaciones[position].getTitulo());
    holder.mensaje.setText(notificaciones[position].getMensaje());
    holder.fecha.setText(DateUtil.formatDate(notificaciones[position].getFecha(), "HH:mm dd-MM-yyyy"));

    return convertView;
  }

  public void setNotificaciones (NotificacionInfo[] notificaciones)
  {
    Arrays.sort(this.notificaciones);
    this.notificaciones = notificaciones;
  } 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T14:08:32.023

我认为您的解决方案很复杂。让它变得容易。在您的构造函数中复制数组，然后使用`java.util.Comparator;`带有条件的 a 对其进行排序。您将在此站点中找到许多 Comparator exaple 示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T14:09:14.723

```
 Arrays.sort(this.notificaciones);
 this.notificaciones = notificaciones; 
```

为什么你首先对你的对象进行排序，然后用未排序的列表覆盖它们？

# ios - 如何使用 Restkit 和 Core Data 存储对象和种子预加载数据

> ID：11345931
> 
> 赞同：1
> 
> 时间：2012-07-05T14:00:51.890
> 
> 标签：ios, core-data, restkit

我是一名新的 iOS 开发人员，我正在制作一个使用来自 Restful Web 服务的信息的 iOS 应用程序。我能够从服务器获取数据，但有时数据需要一段时间才能加载。数据的某些方面不会一直变化（例如，商店出售的商品），但数据的某些方面每天都会发生变化（例如，某个商品的库存数量）。我想将不会一直变化的数据存储到 iOS 内存中。从我的研究来看，核心数据似乎是做到这一点的最佳方式。

如何将不会一直更改的对象数据存储到 iOS 的核心数据中并让它在启动时加载该数据，然后获取一直更改的信息？

我做了一些搜索，据我了解，我可以通过获取数据来利用核心数据，然后将其存储到看起来像数据库的东西中。然后我可以从 NSManagedObjects 中获取预加载的数据并在运行时显示它们。

这是一个正确的方法吗？另外，如果数据发生变化（销售新商品），Restkit 会处理这个并将其存储到核心数据中，还是我需要设置它以注意到变化？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T14:43:27.310

使用 RestKit，您可以基于 CoreData 模型构建数据库，但您也可以使用预填充的数据库进行构建。

您的 objectManager 应如下所示：

```
RKObjectManager* objectManager = [RKObjectManager managerWithBaseURLString:@"http://your-url.com"];
objectManager.objectStore = [RKManagedObjectStore objectStoreWithStoreFilename:@"new-database.sqlite" usingSeedDatabaseName:nil managedObjectModel:nil delegate:self]; 
```

或者如果您想要预填充数据库的副本，则像这样：

```
objectManager.objectStore = [RKManagedObjectStore objectStoreWithStoreFilename:@"new-database.sqlite" usingSeedDatabaseName:@"last-database.sqlite" managedObjectModel:nil delegate:self]; 
```

Your last-database.sqlite must be integrated like a copy bundle resource.

This system can help you if you don't want to refresh all datas.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T07:18:13.677

查看 RestKit 示例目录并打开 RKTwitterCoreData 项目。它向您展示了一个完全按照您的描述进行操作的系统。

# javascript - 如何使用具有字符串值的变量作为另一个变量的名称。实际上试图在 $.post (name : value) 数据参数中设置它

> ID：11345934
> 
> 赞同：0
> 
> 时间：2012-07-05T14:00:53.047
> 
> 标签：javascript, jquery

注意`$thisname`和`$thisvalue`。我想`$thisname`成为分配给它的键/名称和值将是`$thisvalue`. 因为它目前是名称/值对是无效的，除非我将 $thisname 替换为一些不是变量的静态值。

```
function SaveNews($thisname, $thisvalue, $thispageid) {

    $.post('/Admin/SaveNews',

                { $thisname: $thisvalue, PageID: $thispageid },
                function (data) {

                });
            } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T14:02:11.173

你不能用 JavaScript 对象文字语法来做到这一点。但是，您可以构造所需的对象。

```
var params = { PageID: $thispageid };
params[$thisname] = $thisvalue;
$.post('/Admin/SaveNews', params, function(data) { ... }); 
```

# r - ggplot2中的条形图，宽度为变量，条形之间的间距均匀

> ID：11345943
> 
> 赞同：11
> 
> 时间：2012-07-05T14:01:11.393
> 
> 标签：r, graph, plot, ggplot2

所以我正在尝试制作一个条形宽度映射到变量的堆叠条形图；但我希望我的酒吧之间的间距是恒定的。

有谁知道如何使条之间的间距保持不变？

现在我有这个：

```
p<-ggplot(dd, aes(variable, value.y, fill=Date, width=value.x / 15))+ coord_flip() + opts(ylab="") 

p1<-p+ geom_bar(stat="identity") + scale_fill_brewer(palette="Dark2") + scale_fill_hue(l=55,c=55)

p2<-p1 + opts(axis.title.x = theme_blank(), axis.title.y = theme_blank())

p2 
```

![在此处输入图像描述](../Images/dc39b0781185152c69c1d38582cbf967.png)

提前致谢。

顺便说一下，这是我的数据（对于冗长而庞大的数据感到抱歉）：

```
> dput(dd)
structure(list(variable = structure(c(1L, 1L, 1L, 1L, 1L, 3L, 
3L, 3L, 3L, 3L, 4L, 4L, 4L, 4L, 4L, 7L, 7L, 7L, 7L, 7L, 2L, 2L, 
2L, 2L, 2L, 6L, 6L, 6L, 6L, 6L, 5L, 5L, 5L, 5L, 5L, 9L, 9L, 9L, 
9L, 9L, 8L, 8L, 8L, 8L, 8L), .Label = c("Alcohol and Tobacco", 
"Health and Personal Care", "Clothing", "Energy", "Recreation and Education", 
"Household", "Food", "Transportation", "Shelter"), class = "factor", scores = structure(c(2.91, 
5.31, 10.08, 15.99, 4.95, 11.55, 11.2, 27.49, 20.6), .Dim = 9L, .Dimnames = list(
    c("Alcohol and Tobacco", "Clothing", "Energy", "Food", "Health and Personal Care", 
    "Household", "Recreation and Education", "Shelter", "Transportation"
    )))), value.x = c(2.91, 2.91, 2.91, 2.91, 2.91, 5.31, 5.31, 
5.31, 5.31, 5.31, 10.08, 10.08, 10.08, 10.08, 10.08, 15.99, 15.99, 
15.99, 15.99, 15.99, 4.95, 4.95, 4.95, 4.95, 4.95, 11.55, 11.55, 
11.55, 11.55, 11.55, 11.2, 11.2, 11.2, 11.2, 11.2, 27.49, 27.49, 
27.49, 27.49, 27.49, 20.6, 20.6, 20.6, 20.6, 20.6), Date = structure(c(5L, 
4L, 3L, 2L, 1L, 5L, 4L, 3L, 2L, 1L, 5L, 4L, 3L, 2L, 1L, 5L, 4L, 
3L, 2L, 1L, 5L, 4L, 3L, 2L, 1L, 5L, 4L, 3L, 2L, 1L, 5L, 4L, 3L, 
2L, 1L, 5L, 4L, 3L, 2L, 1L, 5L, 4L, 3L, 2L, 1L), .Label = c("1993-2001", 
"2001-2006", "2007-2010", "2010-2011", "2012 Jan - May"), class = "factor"), 
    value.y = c(2.1, 2.5, 7.6, 21.7, 2.8, 1.5, 0.3, -4.1, -4.2, 
    4.7, 3, 16.9, 1.9, 32.8, 23.9, 3.2, 4.6, 11.3, 8.9, 12.9, 
    1.7, 2, 7.8, 5.9, 10, 1.9, 2.1, 5.6, 2.2, 9.9, 1.4, 1.3, 
    2.2, 0.6, 17.3, 1.1, 2.3, 6.4, 13.1, 10, 4.3, 7.6, 0.9, 15.2, 
    20.5)), .Names = c("variable", "value.x", "Date", "value.y"
), row.names = c(NA, -45L), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-05T16:17:07.483

对于分类或“离散”比例 - 您可以调整宽度，但它需要介于 0 和 1 之间。您的 value.x 将其置于 1 之上，因此重叠。您可以使用 scales 包中的 rescale 来快速调整它，以便栏的类别内宽度代表其他一些变量（在本例中为 value.x）

```
install.packages("scales")
library(scales) 
ggplot(dd,aes(x=variable,y=value.y,fill=Date)) +
geom_bar(aes(width=rescale(value.x,c(0.5,1))),stat="identity",position="stack")' +
coord_flip() 
```

玩重新缩放以获得最佳“视图”更改 0.5 到 0.25 ......等等。

![在此处输入图像描述](../Images/b5283e8420292a6e00176ca555700c7f.png)

就个人而言，我认为这样的内容更具信息性：

```
ggplot(dd,aes(x=variable,y=value.y,fill=Date)) +
geom_bar(aes(width=rescale(value.x,c(0.2,1))),stat="identity") +
coord_flip() + facet_grid(~Date) + opts(legend.position="none") 
```

![在此处输入图像描述](../Images/5e686313e4fd4506f511552cce15905b.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-06T00:55:36.677

尝试#2。

我在欺骗 ggplot2 将连续尺度写成分类。

```
# The numbers for tmp I calculated by hand. Not sure how to program 
# this part but the math is 
# last + half(previous_width) + half(current_width)
# Change the 1st number in cumsum to adjust the between category width 
```

`tmp <- c(2.91,7.02,14.715,27.75,38.22,46.47,57.845,77.19,101.235) + cumsum(rep(5,9))`

```
dd$x.pos1 <- rep(tmp,each=5)
ggplot(dd,aes(x=x.pos1,y=value.y,fill=Date)) +
geom_bar(aes(width=value.x),stat="identity",position="stack") + 
scale_x_continuous(breaks=tmp,labels=levels(dd$variable)) + 
coord_flip() 
```

![在此处输入图像描述](../Images/c56f2262da24f9373386202bf301cae2.png)

为了更好地衡量，您可能需要调整文本大小。完成了`... + opts(axis.text.y=theme_text(size=12))`

# java - 使用任何 SQL 查询的数据类型范围值

> ID：11345950
> 
> 赞同：1
> 
> 时间：2012-07-05T14:01:46.880
> 
> 标签：java, mysql, sql, oracle

我指的是[Java 常量字段值](http://docs.oracle.com/javase/6/docs/api/constant-values.html)，并考虑是否可以使用 SQL 查询为数据类型检索 边界值（例如`MIN_VALUE`，在数值数据类型的情况下）。`MAX_VALUE`

例如

```
select  
    int.signed_min_value as int_sgnd_min,  
    int.unsigned_min_value as int_usgnd_min,  
    int.signed_max_value as int_sgnd_max,  
    int.unsigned_max_value as int_usgnd_max,  
    int.storage_bytes as int_bytes  
from dual; 
```

应该会产生

```
+--------------+---------------+--------------+---------------+-----------+
| int_sgnd_min | int_usgnd_min | int_sgnd_max | int_usgnd_max | int_bytes |
+--------------+---------------+--------------+---------------+-----------+
|  -2147483648 |             0 |   2147483647 |    4294967295 |       4   |
+--------------+---------------+--------------+---------------+-----------+ 
```

以上结果是[为 MySQL 整数数据类型定义的存储和范围值](http://dev.mysql.com/doc/refman/5.6/en/integer-types.html)。
MySQL 中的其他数据类型存储要求在[此处](http://dev.mysql.com/doc/refman/5.6/en/storage-requirements.html)定义。

我只提供了数字数据类型的示例，但我也期待其他数据类型的可能性。

我确实知道我们只能使用`select`列和表达式，但试图了解 SQL 中是否有这样的工具，比如 Java 和其他编程语言。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T14:15:08.327

如果您的意思是 Sql Server，您可以从 sys.types 表中获取该信息。如果你这样做：

```
select * from sys.types
where name='int' 
```

您可以检查 max_length，它表示该类型的最大长度（以字节为单位）。所以 int = 4 咬 whihc 给你 -2^31 (-2,147,483,648) 到 2^31-1 (2,147,483,647)

# ios - 什么是 iOS 两人游戏的理想服务器端堆栈？

> ID：11345953
> 
> 赞同：0
> 
> 时间：2012-07-05T14:01:56.867
> 
> 标签：ios, node.js, mongodb

我即将开始一个 iOS 两人游戏。它是一个纸牌游戏，并且是轮流玩的。

在浏览了很多文章和博客文章之后，我决定使用这些：

后端的 node.JS 来响应 API 调用。MongoDB 作为数据库。和 Apple 的通知服务将数据推送到其他设备。

我对 JavaScript 很满意，并且我愿意同时学习 node 和 mongoDB，并且在项目开始之前我还有一些时间。

我过去曾使用过 PHP 和 Java。

考虑到整个场景，我应该继续我的想法还是我应该考虑的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T14:06:59.950

您还可以考虑使用 java 或 python 后端作为服务器端的[谷歌应用引擎。](https://developers.google.com/appengine/docs/python/overview)最明显的优势是您不必担心基础设施的麻烦，因为 GAE 是一项托管服务。GAE 有一个类似于 mongo 的高复制数据存储，你可以用你已经知道的 java 编写后端。

# javascript - push() 一个二维数组

> ID：11345954
> 
> 赞同：32
> 
> 时间：2012-07-05T14:01:57.087
> 
> 标签：javascript, arrays, for-loop, multidimensional-array, push

我正在尝试推送到一个二维数组而不会弄乱，目前我的数组是：

```
var myArray = [
[1,1,1,1,1],
[1,1,1,1,1],
[1,1,1,1,1]
] 
```

我正在尝试的代码是：

```
var r = 3; //start from rows 3
var c = 5; //start from col 5

var rows = 8;
var cols = 7;

for (var i = r; i < rows; i++)
{
    for (var j = c; j < cols; j++)
    {
        myArray[i][j].push(0);
    }
} 
```

这应该导致以下结果：

```
var myArray = [
[1,1,1,1,1,0,0],
[1,1,1,1,1,0,0],
[1,1,1,1,1,0,0],
[0,0,0,0,0,0,0],
[0,0,0,0,0,0,0],
[0,0,0,0,0,0,0],
] 
```

但它并不确定这是否是正确的方法。

所以问题是我将如何做到这一点？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-07-05T14:06:08.640

您的代码中有一些错误：

1.  用于`myArray[i].push( 0 );`添加新列。您的代码 ( `myArray[i][j].push(0);`) 将在 3 维数组中工作，因为它试图将另一个元素添加到 position 的数组中`[i][j]`。
2.  您仅在所有行中展开 (col-d)-许多列，即使在那些尚未初始化且因此到目前为止还没有条目的行中也是如此。

一个正确的版本虽然有点冗长，但如下：

```
var r = 3; //start from rows 3

var rows = 8;
var cols = 7;

// expand to have the correct amount or rows
for( var i=r; i<rows; i++ ) {
  myArray.push( [] );
}

// expand all rows to have the correct amount of cols
for (var i = 0; i < rows; i++)
{
    for (var j =  myArray[i].length; j < cols; j++)
    {
        myArray[i].push(0);
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-05T14:09:16.513

您必须遍历所有行，并添加缺少的行和列。对于已经存在的行，从 c 循环到 cols，对于新行，首先将一个空数组推送到外部数组，然后从 0 循环到 cols：

```
var r = 3; //start from rows 3
var c = 5; //start from col 5

var rows = 8;
var cols = 7;

for (var i = 0; i < rows; i++) {
  var start;
  if (i < r) {
    start =  c;
  } else {
    start = 0;
    myArray.push([]);
  }
  for (var j = start; j < cols; j++) {
        myArray[i].push(0);
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-05T14:16:23.850

迭代二维意味着您需要检查二维。

假设你开始：

```
var myArray = [
    [1,1,1,1,1],
    [1,1,1,1,1],
    [1,1,1,1,1]
]; //don't forget your semi-colons 
```

您希望将此二维数组扩展为：

```
var myArray = [
    [1,1,1,1,1,0,0],
    [1,1,1,1,1,0,0],
    [1,1,1,1,1,0,0],
    [0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0],
]; 
```

这意味着您需要了解区别是什么。

从外部数组开始：

```
var myArray = [
    [...],
    [...],
    [...]
]; 
```

如果你想让这个数组更长，你需要检查它的长度是否正确，并添加更多的内部数组来弥补差异：

```
var i,
    rows,
    myArray;
rows = 8;
myArray = [...]; //see first example above
for (i = 0; i < rows; i += 1) {
    //check if the index exists in the outer array
    if (!(i in myArray)) {
        //if it doesn't exist, we need another array to fill
        myArray.push([]);
    }
} 
```

下一步需要遍历每个数组中的每一列，我们将在原始代码的基础上构建：

```
var i,
    j,
    row,
    rows,
    cols,
    myArray;
rows = 8;
cols = 7; //adding columns in this time
myArray = [...]; //see first example above
for (i = 0; i < rows; i += 1) {
    //check if the index exists in the outer array (row)
    if (!(i in myArray)) {
        //if it doesn't exist, we need another array to fill
        myArray[i] = [];
    }
    row = myArray[i];
    for (j = 0; j < cols; j += 1) {
        //check if the index exists in the inner array (column)
        if (!(i in row)) {
            //if it doesn't exist, we need to fill it with `0`
            row[j] = 0;
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-05T14:17:46.103

在您的情况下，您可以完全不使用`push`：

```
var myArray = [
    [1,1,1,1,1],
    [1,1,1,1,1],
    [1,1,1,1,1]
]

var newRows = 8;
var newCols = 7;

var item;

for (var i = 0; i < newRows; i++) {
    item = myArray[i] || (myArray[i] = []);

    for (var k = item.length; k < newCols; k++)
        item[k] = 0;    
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-05T14:07:26.287

```
var r = 3; //start from rows 3
var c = 5; //start from col 5

var rows = 8;

var cols = 7;

for (var i = 0; i < rows; i++)

{

 for (var j = 0; j < cols; j++)

 {
    if(j <= c && i <= r) {
      myArray[i][j] = 1;
    } else {
      myArray[i][j] = 0;
    }
}

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-05T14:14:29.277

您在数组元素（int）上调用 push()，其中应该在数组上调用 push()，同样以这种方式处理/填充数组没有任何意义，您可以这样做

```
for (var i = 0; i < rows - 1; i++)
{
  for (var j = c; j < cols; j++)
  {
    myArray[i].push(0);
  }
}

for (var i = r; i < rows - 1; i++)
{

  for (var j = 0; j < cols; j++)
  {
      col.push(0);
  }
} 
```

您还可以使用 if 条件组合两个循环，如果 row < r，else if row >= r

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-01-17T20:00:17.403

创建 am 数组并放入第一个数组，在这种情况下，我从 JSON 响应中获取数据

```
$.getJSON('/Tool/GetAllActiviesStatus/',
   var dataFC = new Array();
   function (data) {
      for (var i = 0; i < data.Result.length; i++) {
          var serie = new Array(data.Result[i].FUNCAO, data.Result[i].QT, true, true);
          dataFC.push(serie);
       }); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-03-08T04:13:28.783

下面的解决方案使用双循环将数据添加到案例 3 中的 2x2 数组的底部。内部循环将选定元素的值推送到新的行数组中。然后，外部循环将新行数组推送到现有数组的底部（请参阅[新手：使用 for 循环将值添加到二维数组，Google Apps 脚本](https://stackoverflow.com/questions/52867326/newbie-add-values-to-two-dimensional-array-with-for-loops-google-apps-script)）。

在此示例中，我创建了一个从现有数组中提取部分的函数。提取的部分可以是现有数组的行（全部或部分）、列（全部或部分）或 2x2 部分。通过将现有数组 (arr) 中的相关部分推送到新数组中来填充新的空白数组 (newArr)。

```
 function arraySection(arr, r1, c1, rLength, cLength) {      
   rowMax = arr.length;
    if(isNaN(rowMax)){rowMax = 1};
   colMax = arr[0].length;
   if(isNaN(colMax)){colMax = 1};
   var r2 = r1 + rLength - 1;
   var c2 = c1 + cLength - 1;

   if ((r1< 0 || r1 > r2 || r1 > rowMax || (r1 | 0) != r1) || (r2 < 0 || 
     r2 > rowMax || (r2 | 0) != r2)|| (c1< 0 || c1 > c2 || c1 > colMax || 
   (c1 | 0) != c1) ||(c2 < 0 || c2 > colMax || (c2 | 0) != c2)){
        throw new Error(
        'arraySection: invalid input')       
        return;
     };
   var newArr = [];

// Case 1: extracted section is a column array, 
//          all elements are in the same column
 if (c1 == c2){
   for (var i = r1; i <= r2; i++){ 
         // Logger.log("arr[i][c1] for i = " + i);
         // Logger.log(arr[i][c1]);
     newArr.push([arr[i][c1]]); 
     };
    };  

// Case 2: extracted section is a row array, 
//          all elements are in the same row
  if (r1 == r2 && c1 != c2){
    for (var j = c1; j <= c2; j++){ 
      newArr.push(arr[r1][j]); 
      };
   };  

// Case 3: extracted section is a 2x2 section 
    if (r1 != r2 && c1 != c2){     
     for (var i = r1; i <= r2; i++) {
          rowi = [];
       for (var j = c1; j <= c2; j++) {
          rowi.push(arr[i][j]);
        }
       newArr.push(rowi)
      };
    };
   return(newArr);
  }; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-06-07T11:14:17.873

你也可以这样尝试。

```
var r = 3; //start from rows 3
var c = 5; //start from col 5

var rows = 8;
var cols = 7;

for (var i = r; i < rows; i++)
{
    for (var j = c; j < cols; j++)
    {
        myArray.push([var[i],var[j])
    }
} 
```

这将为您创建一个二维数组。

# android - “Intent.ACTION_PRE_BOOT_COMPLETED”的作用是什么？

> ID：11345958
> 
> 赞同：0
> 
> 时间：2012-07-05T14:02:18.063
> 
> 标签：android, android-intent

我想知道`Intent.ACTION_PRE_BOOT_COMPLETED`. 目前，我的要求是在设备启动完成之前完成任务，即在调用`Intent.ACTION_BOOT_COMPLETED`. 谁能指导我如何继续满足要求？在这方面的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-01-24T08:47:25.683

ACTION_PRE_BOOT_COMPLETED 在 ActivityManagerService.java::systemReady 中发送。

但是要接收它，您的应用程序的 uid 必须是 system(1000)。

```
 for (int i=ris.size()-1; i>=0; i--) {
                    if ((ris.get(i).activityInfo.applicationInfo.flags
                            &ApplicationInfo.FLAG_SYSTEM) == 0) {
                        ris.remove(i);
                    }
                } 
```

此外，每次升级只能收到一次广播（这里不太确定，可能应该是每次擦除数据）。

注意下面的代码，如果目标在 lastDoneReceivers 中，它将被删除。

```
 ArrayList<ComponentName> lastDoneReceivers = readLastDonePreBootReceivers();

                final ArrayList<ComponentName> doneReceivers = new ArrayList<ComponentName>();
                for (int i=0; i<ris.size(); i++) {
                    ActivityInfo ai = ris.get(i).activityInfo;
                    ComponentName comp = new ComponentName(ai.packageName, ai.name);
                    if (lastDoneReceivers.contains(comp)) {
                        ris.remove(i);
                        i--;
                    }
                } 
```

lastDoneReceivers 从文件 /data/system/called_pre_boots.dat 中读取。

```
private static File getCalledPreBootReceiversFile() {
    File dataDir = Environment.getDataDirectory();
    File systemDir = new File(dataDir, "system");
    File fname = new File(systemDir, "called_pre_boots.dat");
    return fname;
}

static final int LAST_DONE_VERSION = 10000;

private static ArrayList<ComponentName> readLastDonePreBootReceivers() {
    ArrayList<ComponentName> lastDoneReceivers = new ArrayList<ComponentName>();
    File file = getCalledPreBootReceiversFile();
    FileInputStream fis = null;
    try {
        fis = new FileInputStream(file);
        DataInputStream dis = new DataInputStream(new BufferedInputStream(fis, 2048));
        int fvers = dis.readInt();
        if (fvers == LAST_DONE_VERSION) {
            String vers = dis.readUTF();
            String codename = dis.readUTF();
            String build = dis.readUTF();
            if (android.os.Build.VERSION.RELEASE.equals(vers)
                    && android.os.Build.VERSION.CODENAME.equals(codename)
                    && android.os.Build.VERSION.INCREMENTAL.equals(build)) {
                int num = dis.readInt();
                while (num > 0) {
                    num--;
                    String pkg = dis.readUTF();
                    String cls = dis.readUTF();
                    lastDoneReceivers.add(new ComponentName(pkg, cls));
                }
            }
        }
    } catch (FileNotFoundException e) {
    } catch (IOException e) {
        Slog.w(TAG, "Failure reading last done pre-boot receivers", e);
    } finally {
        if (fis != null) {
            try {
                fis.close();
            } catch (IOException e) {
            }
        }
    }
    return lastDoneReceivers;
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-05T14:13:13.923

没有 ACTION_PRE_BOOT_COMPLETED 这样的操作。我认为您通常无法满足您的要求。系统签名的应用程序可能有一些机制可以做到这一点。

# perl - 从文件加载哈希并进行比较

> ID：11345967
> 
> 赞同：-2
> 
> 时间：2012-07-05T14:02:50.463
> 
> 标签：perl, sorting, hash

我有一个文件（abc.txt），其中包含以下值：

```
ENSP00000200691_1 70.00 1.64119
ENSP00000200691_3 100.00 1.55602
ENSP00000201943_1 93.00 1.14492
ENSP00000201943_2 64.00 1.2178
ENSP00000201943_3 75.00 1.43107
ENSP00000203407_2 90.00 2.04312
ENSP00000203407_4 71.00 1.8197 
```

我想创建一个哈希值，其中诸如 ENSP00000200691 之类的值将是键（_1，_2.. 是同一案例的不同示例）。现在要进行的比较是：

当第二列值低于相同情况下的相应示例，但第三列值高于相应示例时 - 它应该打印行。

例如.. 前两行是这样一种情况，即第二列值 70<100 而 1.64119 > 1.55602 （应该打印）

其余两种情况是 $2(example1) > $2 (example2) 和 $3(example1) > $3 (example2)。

可能有大约 10 个相同哈希的示例（案例）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T18:15:12.650

以下是如何解决您的（家庭作业？）问题的猜测：

```
#!/usr/bin/perl

use strict;
use warnings;

my %info;

while (my $line=<DATA>) {
    chomp $line;
    my ($protein_id, $length, $value)=split /\s+/, $line;
    $protein_id=~s/_\d+$//;

    if (exists $info{$protein_id}) {
        if ($length<$info{$protein_id}->{length} &&
            $value>$info{$protein_id}->{value}) {
            print "$line\n";
        }
    }
    else {
        $info{$protein_id}={ length=>$length, value=>$value };
    }
}

__DATA__
ENSP00000200691_1 70.00 1.64119
ENSP00000200691_3 100.00 1.55602
ENSP00000201943_1 93.00 1.14492
ENSP00000201943_2 64.00 1.2178
ENSP00000201943_3 75.00 1.43107
ENSP00000203407_2 90.00 2.04312
ENSP00000203407_4 71.00 1.8197 
```

运行时的输出是这样的：

```
ENSP00000201943_2 64.00 1.2178
ENSP00000201943_3 75.00 1.43107 
```

您没有完全指定是否应始终将后续行与第一个蛋白质 id 进行比较，或者是否最后一个看到的，或者最后一个打印的。

# git - Sublime Text 2、kemayo 的 git 插件和 Windows 7

> ID：11345968
> 
> 赞同：4
> 
> 时间：2012-07-05T14:02:50.940
> 
> 标签：git, sublimetext, sublimetext2

我要开场白：我希望我可以在这里问这个问题，因为它不是编程，而是使用 Sublime Text 2 和 Git。我已经浏览了几个小时的 kemayo 说明，我一定错过了一些东西。

*   问题：我不明白如何使用 kemayo 的插件将 Git 与 Sublime Text 2 集成。
*   问题 2：在执行 ctrl+shift+p（命令面板）时，我没有收到任何 git 命令。
*   附加信息：我是 Git 新手，但我理解它足以能够使用标准命令提示符来使用它。
*   kemayo安装方法：包管理器
*   操作系统：Windows 7 x64
*   已安装 Git：是
*   ***其中 git***（其中 git 的 Window 版本***）***： ***C:\git\cmd\git.cmd***
*   我将 git 安装到该路径，因为它不包含空格或特殊字符。当然，由于**git 在哪里**工作，这也意味着它被添加到了 enviro 路径中。
*   只需键入***git ，Git 就可以在命令提示符下工作***

*/Packages/User/Git.sublime-settings*

我尝试过的事情：

```
,"git_command": "'c:\\git\\bin\\git.exe'"
,"git_command": "c:/git/bin/git.exe"
,"git_command": "c:\\\\git\\\\bin\\\\git.exe"
,"git_command": "'c:\\git\\cmd\\git.cmd'"
,"git_command": "c:/git/cmd/git.cmd"
,"git_command": "c:\\\\git\\\\cmd\\\\git.cmd"
,"git_command": false 
```

和更多。

我也不明白的事情：

*   kemayo 的安装说明还是有点不清楚。通过包管理器安装后我必须做的唯一手动设置是将 Git.sublime-settings 复制到用户文件夹吗？据我了解，如果 git 在路径中（我很确定它是），则 "git_command": false 应该可以工作。或者，您可以使用该行手动设置路径，但我无法得到它:(
*   如何配置它以使用我的 BitBucket 帐户？我没有遇到任何关于如何将其连接到远程仓库的说明

我试图提供尽可能多的关于我的问题的信息，但是设置 Git+ST2 有很多步骤，所以我可能忘记提及一些事情。如果我遗漏了一些东西，我肯定会回来添加它。感谢您的阅读！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T18:44:16.327

这个：

```
,"git_command": "c:/git/bin/git.exe" 
```

根据 Win7 x64 格式是正确的。

确保您的 $PATH 环境变量中有“C:\git\cmd”根目录。尝试

```
echo %PATH% 
```

在 Windows 命令行中。

如果您在响应中没有找到该根目录，则需要将“C:\git\cmd”添加到 $PATH 变量中。Java 有一本很好的手册：[http ://www.java.com/en/download/help/path.xml](http://www.java.com/en/download/help/path.xml)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T21:47:26.127

1.  将**C:\git\cmd**添加到您的 $PATH 环境变量中

2.  打开这个 >

    ![打开这个文件](../Images/2b50958cb8be672522779a724733044d.png)

3.  **"git_command": "c:/git/bin/git.exe"**

我应该工作

按 - ctrl+shift+p 并输入 - git

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T12:27:41.940

我发现更改默认设置没有任何作用。在用户设置中，以下对我有用：

```
,"git_command": "C:/cygwin/bin/git.exe" 
```

我正在使用来自 cygwin 的 git 安装，没有任何修改，也没有任何路径设置。

顺便说一句，谢谢大家的提示，我设法在大约五分钟内完成了这个设置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-11T04:37:47.317

如果您使用[Github for Wundows](http://windows.github.com)，您的 github.exe 将不在方便的位置。您需要的路径是这样的：

> C:\Users{用户名}\AppData\Local\GitHub\PortableGit_{somejunk}\bin\git.exe

我花了太长时间试图弄清楚这一点，但我找到的答案都没有提到这一点，所以希望这会有所帮助！

# flash - 出于什么目的需要 Transform 类？（ActionScript）

> ID：11345970
> 
> 赞同：0
> 
> 时间：2012-07-05T14:02:53.043
> 
> 标签：flash, actionscript

我正在使用 actionscript 3.0，但我不明白是什么给了我们 Transform 类？

```
 import flash.geom.Matrix;

 var mat1:Matrix = new Matrix();
 mat1.identity();
 mat1.rotate(Math.PI/4);
 mat1.scale(2,2);
 mat1.translate(10,20); 
```

我可以做的事情：

```
var shape:Shape = new Shape();
shape.x = 50; //the same as the translate tx
shape.y = 50; //the same as the translate ty
shape.rotation = 45; // the same as the rotate
shape.scaleX = 20; // the same as the scale X in Matrix object
shape.scaleY = 30; // the same as the scale Y in Matrix object 
```

或者问题是：做同样事情的 Matrix 对象方法或 Shape、MovieClip、Sprite 方法有什么区别？？？，我真的不明白，也许我遗漏了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T14:10:16.280

对于一个矩阵运算可能更快，

在几秒钟内，您可以轻松地对矩阵执行多项操作，然后轻松地将其应用于多个不同的对象，您还可以使用矩阵倾斜您的点，但不能直接使用形状。这就是线性变换的全部内容。

[维基百科中的线性地图](http://en.wikipedia.org/wiki/Linear_map)

注意变换点方法。

至于你的第二个问题，这取决于你使用它的目的，如果你想在几个相似的点上执行相同的转换，你应该考虑构建一个矩阵，然后在每个点上应用它。

# javascript - onmouseover 并单击目标 div 并替换文本

> ID：11345983
> 
> 赞同：1
> 
> 时间：2012-07-05T14:03:52.163
> 
> 标签：javascript, html, css

嗨，我需要能够滚动/单击一些项目符号并定位页面上其他位置的 div（描述）替换其中的文本。有没有人有任何想法？，我真的很感激任何帮助 - 谢谢！

JS

```
$(document).ready(function(){
    $('.bullet').click(function(){
        $('.bullet').removeClass("active");
        $(this).addClass("active");
    });   
}); 
```

CSS

```
.bullet {
    display:block;
    margin: 0 0 0 3px;
    float: right;
    width:10px;
    height:10px;
    background:url(../images/bullets.jpg) 0 0 no-repeat;
}

.bullet:active {
    display:block;
    margin: 0 0 0 3px;
    float: right;
    width:10px;
    height:12px;
    background:url(../images/bullets.jpg) 0 -14px no-repeat;
}

.numbers a {
    display: block;
}

.numbers a div {
    font-family: HelveticaNeueLTPro-Roman, Arial, Helvetica, sans-serif;
    font-size: 9px;
    color: #6e6965;
    margin: -10px 0 0 0px;
    position: absolute;
    display:none;
}

.numbers a:hover div, .numbers a:focus div {
    display: block;
} 
```

HTML

```
<div id="bullet-container"><div class="numbers">
    <span onmouseover="document.rollimg.src=image1.src;">
        <a class="bullet" tabindex="-1">
            <div>1</div>
        </a>
    </span>
    <span onmouseover="document.rollimg.src=image2.src;">
        <a class="bullet" tabindex="-1">
            <div>2</div></a>
    </span>
    <span onmouseover="document.rollimg.src=image3.src;">
        <a class="bullet" tabindex="-1">
            <div>3</div>
        </a>
    </span>
    <span onmouseover="document.rollimg.src=image4.src;">
        <a class="bullet" tabindex="-1">
            <div>4</div>
        </a>
    </span>
</div>

<div class="description">hello</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T14:09:32.023

您需要一个地方来存储文本，所以使用 data 属性将文本添加到元素中

```
<a data-description="hello, I am the first bullet" class="bullet" tabindex="-1">1</a> 
```

然后，只需将`'$('.description')'`文本设置为`'data-description'`您单击的项目中的 aka`'$(this)'`

并且要自动选择第一个，您可以`'.bullet'`在文档准备好时在第一个触发 click 事件

```
<script type="text/javascript">
$(document).ready(function(){

  // Set up click event
  $('.bullet').click(function(){
    $('.bullet').removeClass("active");
    $(this).addClass("active");
    $('.description').text($(this).data('description'))
  });  

  // Click the first item
  $('.bullet:first').click();

});
</script> 
```

* * *

**工作示例**

[http://jsfiddle.net/blowsie/jtnsP/](http://jsfiddle.net/blowsie/jtnsP/)

# php - 将文件移动到特定文件夹

> ID：11345985
> 
> 赞同：-4
> 
> 时间：2012-07-05T14:03:52.897
> 
> 标签：php

我有一个关于文件句柄的问题，我有：

文件：“Mark, 123456, HTCOM.pdf”

“约翰，409721，JESOA.pdf

文件夹：

“马克，123456”

“马克，345212”

“马克，645352”

“约翰，409721”

“约翰，235212”

“约翰，124554”

我需要一个例程将文件移动到正确的文件夹。在上述情况下，我需要比较文件和文件夹中的第一个和第二个值。如果相同，我将移动文件。

补充帖子：我有这个代码，工作正常，但我需要修改以检查名称和代码以移动文件......我对实现功能感到困惑......

```
$pathToFiles = 'files folder'; 
$pathToDirs  = 'subfolders'; 
foreach (glob($pathToFiles . DIRECTORY_SEPARATOR . '*.pdf') as $oldname) 
{ 
    if (is_dir($dir = $pathToDirs . DIRECTORY_SEPARATOR . pathinfo($oldname, PATHINFO_FILENAME)))
     { 
        $newname = $dir . DIRECTORY_SEPARATOR . pathinfo($oldname, PATHINFO_BASENAME);

        rename($oldname, $newname); 
    } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T10:25:35.153

作为一个粗略的草案，并且仅适用于您的特定案例（或遵循相同命名模式的任何其他案例），这应该有效：

```
<?php
// define a more convenient variable for the separator
define('DS', DIRECTORY_SEPARATOR);

$pathToFiles = 'files folder';
$pathToDirs = 'subfolders';

// get a list of all .pdf files we're looking for
$files = glob($pathToFiles . DS . '*.pdf');

foreach ($files as $origPath) {
    // get the name of the file from the current path and remove any trailing slashes
    $file = trim(substr($origPath, strrpos($origPath, DS)), DS);

    // get the folder-name from the filename, following the pattern "(Name, Number), word.pdf"
    $folder = substr($file, 0, strrpos($file, ','));

    // if a folder exists matching this file, move this file to that folder!
    if (is_dir($pathToDirs . DS . $folder)) {
        $newPath = $pathToDirs . DS . $folder . DS . $file;
        rename($origPath, $newPath);
    }
} 
```

# android - 如何将带有 ArrayList 的对象与其他对第一个对象有敬意的对象打包在一起

> ID：11345986
> 
> 赞同：3
> 
> 时间：2012-07-05T14:03:55.070
> 
> 标签：android, parcelable

这有点复杂。

我有对象'A'，它有一个对象'B'的ArrayList

对象“B”具有对对象“A”的引用。

当我开始打包时，会出现 StackoverflowError。

是否有 Workarround 来修复它。

这是我的课程：

**Freizeit.java**

```
public class Freizeit implements Parcelable{

private List<Tag> tage;

public static final String FREIZEIT = "freizeit";

private Freizeit (Parcel in) {
    readFromParcel(in);
}

@Override
public void writeToParcel(Parcel dest, int flags) {
    dest.writeTypedList(this.tage);
}

public void readFromParcel(Parcel in) {
    in.readTypedList(this.tage, Tag.CREATOR);
}

public static final Parcelable.Creator<Freizeit> CREATOR = new Parcelable.Creator<Freizeit>() {

    @Override
    public Freizeit createFromParcel(Parcel source) {
        return new Freizeit (source);
    }

    @Override
    public Freizeit[] newArray(int size) {
        return new Freizeit[size];
    }
}; 
```

}

**标签.java**

```
public class Tag implements Parcelable {

private Freizeit freizeit;

public Tag (Freizeit freizeit) {
    this.freizeit = freizeit;
}

private Tag (Parcel in) {
    readFromParcel(in);
}

@Override
public void writeToParcel(Parcel dest, int flags) {
    dest.writeParcelable(this.freizeit, flags);
}

public void readFromParcel(Parcel in) {
    this.freizeit = in.readParcelable(Freizeit.class.getClassLoader());
}

public static final Parcelable.Creator<Tag> CREATOR = new Parcelable.Creator<Tag>() {

    @Override
    public Tag createFromParcel(Parcel source) {
        return new Tag (source);
    }

    @Override
    public Tag[] newArray(int size) {
        return new Tag[size];
    }
}; 
```

对不起，我的英语不好...

有人有想法吗？谢谢。

# c# - 指定的演员表无效。Linq 日期时间

> ID：11345996
> 
> 赞同：1
> 
> 时间：2012-07-05T14:04:26.533
> 
> 标签：c#, linq

当我尝试执行以下查询时，Linq 中出现“指定的强制转换无效”错误消息。

```
var query = from a in dt.AsEnumerable()
                        where SqlMethods.DateDiffDay(TimeZone.CurrentTimeZone.ToLocalTime(a.Field<DateTime>("StartDate")), DateTime.Now) >= 0 
                        select a; 
```

我的 StartDate 为 '1997-10-01T00:00:00'。谁能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T15:27:47.053

我称您声称该列**存储**为`DateTime`. 我敢打赌，您实际上是在该列中存储日期的*字符串表示形式。*

为了演示，这里有一个简单的例子，你会得到什么异常（如果有的话）。

```
var dt = new DataTable();
dt.Columns.Add("AsString", typeof(string));
dt.Columns.Add("AsDateTime", typeof(DateTime));
var now = DateTime.Now;
var row = dt.Rows.Add(now.ToString(), now);

row.Field<string>("AsString");     // this is fine
row.Field<string>("AsDateTime");   // InvalidCastException: Unable to cast object of type 'System.DateTime' to type 'System.String'.
row.Field<DateTime>("AsString");   // InvalidCastException: Specified cast is not valid.
row.Field<DateTime>("AsDateTime"); // this is fine
DateTime.Parse(row.Field<string>("AsString")); // this is fine 
```

因此，您应该能够看到，当您尝试读取*存储*为 a的字段`string`但您尝试将其作为 a 访问时`DateTime`，它会抛出您刚刚描述的消息的异常。

* * *

有两种方法可以解决它。

我建议更改列上的类型，使其适用于`DateTime`对象并实际存储`DateTime`值。不，字符串表示将不起作用。然后，您的查询将按照您的预期工作，无需额外更改。

否则，请更改您的查询，以便您使用正确的类型 (a `string`) 访问该字段，将其解析回一个`DateTime`对象并从那里开始。

```
var now = DateTime.Now;
var query =
    from row in dt.AsEnumerable()
    let startDate = DateTime.Parse(row.Field<string>("StartDate"))
    where SqlMethods.DateDiffDay(
        TimeZone.CurrentTimeZone.ToLocalTime(startDate),
        now) >= 0 
    select row; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T14:19:24.887

检查列是否可以为空。如果是这样，请`a.Field<DateTime?>("StartDate")`改用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-05T14:12:59.920

不是一个确切的回应，但：

```
var query = from a in dt.AsEnumerable()
            where 
                a.StartDate > DateTime.Now
            select a; 
```

应该运行（假设 s.StartDate 是 DateTime）

# ember.js - 通过 CollectionView 操作 itemView

> ID：11345998
> 
> 赞同：0
> 
> 时间：2012-07-05T14:04:34.300
> 
> 标签：ember.js

小提琴：

[http://jsfiddle.net/lifeinafolder/mpcRr/](http://jsfiddle.net/lifeinafolder/mpcRr/)

本质上，我想隐藏当前的“可见”项目并使下一个“可见”，但 toggleProperty 似乎不适用于 childView 对象。它只是默默地失败并且也不会抛出任何错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T18:53:11.843

CollectionView 将显示集合中的所有项目，这不是您想要的。我将实现一个标准视图，该视图包含集合并在其中显示下一个按钮和一个幻灯片视图，当容器视图将选定的幻灯片设置为幻灯片视图上的内容时，该视图显示选定的幻灯片。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T21:51:08.623

一个非常丑陋的解决方案，几乎可以工作。我保留了切换视图的方式。

模板是一样的，js看起来是这样的：

```
App = Ember.Application.create();

App.slides = Ember.ArrayProxy.create({
    content:[]
});

App.slidesCollectionView = Ember.CollectionView.extend({
    contentBinding:"App.slides",
    tagName:'div',
    emptyView: Ember.View.extend({
        template: Ember.Handlebars.compile("<div class=\"placeholder\">placeholder</div>")
    }),
    itemViewClass:"App.slideView",
    classNames:["slideshow"],
    click:function(){
        var t = Ember.ArrayProxy.create({ content: this.get('childViews') });
        var selected = t.findProperty('isVisible', true);
        if(selected){
            var nextSlide = t.objectAt(selected.get('contentIndex') + 1);
            selected.set('isVisible', false);
            if(nextSlide){
                nextSlide.set('isVisible', true);
            }else{
                t.get('firstObject').set('isVisible', true);
            }
        }else{
            t.get('firstObject').set('isVisible', true);

        }            
    }
});

App.slideView = Ember.View.extend({
    templateName: 'slide-item',
    tagName:'div',
    isVisible: false,
    classNames:['slide'],
    classNameBindings:['isVisible:selected']
});

setTimeout(function(){
App.slides.pushObjects([
    Ember.Object.create({val:'a',index:0}),
    Ember.Object.create({val:'b',index:1}),
    Ember.Object.create({val:'c',index:2}),
    Ember.Object.create({val:'d',index:3}),
    Ember.Object.create({val:'e',index:4}),
    Ember.Object.create({val:'f',index:5})
])},2000); 
```

小提琴：

[http://jsfiddle.net/Sly7/dd6at/](http://jsfiddle.net/Sly7/dd6at/)