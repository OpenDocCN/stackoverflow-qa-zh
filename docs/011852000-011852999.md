# StackOverflow 问答 11852000-11852999

# php - SELECT查询到mysql并返回对象

> ID：11852000
> 
> 赞同：0
> 
> 时间：2012-08-07T18:35:26.090
> 
> 标签：php, mysql, oop

我是 PHP 新手。我创建了代表我的数据库表的类（我来自 .Net 实体框架背景）。我想运行我的 SELECT 语句并传回一个`User`对象。我找到的所有示例都会解析返回的数据。有没有办法做这样的事情并让它传回一个`User`对象：

```
$user = new user();

$user = $mysqli->query($query, MYSQLI_STORE_RESULT);

return $user; 
```

还是我必须先解析结果？

注意：用户类中的所有字段都与数据库中的字段匹配 IE $user->UserName = [user].[UserName]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T18:38:22.410

尝试将 PDO 与“fetchobject”一起使用：

```
$statement = $db->query($query);    
$user = $statement->fetchObject('User'); 
```

[http://www.php.net/manual/en/pdostatement.fetchobject.php](http://www.php.net/manual/en/pdostatement.fetchobject.php)

或将每一“行”数据转换（转换）为用户对象（[示例函数](http://pastebin.com/Fxn1HuPM)）

或尝试[ORM PHP](http://en.wikipedia.org/wiki/List_of_object-relational_mapping_software#PHP)解决方案

# javascript - jQuery/Javascript 延迟执行一个函数，直到几个函数完成

> ID：11852004
> 
> 赞同：1
> 
> 时间：2012-08-07T18:35:40.483
> 
> 标签：javascript, jquery

我有一个棘手的情况。我需要延迟执行一个函数，直到几个函数完成。虽然以下将在正常情况下工作：

```
 $.when(foo1(), foo2(), foo3()).then(function(){
        //foo4();
    }); 
```

我的情况有点不同。我不希望传递给的函数`$.when()`立即执行。`foo1-3`将在不久的将来通过其他方法执行。换句话说，我想`foo1-3`在我选择的时间手动执行。只有在`foo1-3`执行后（没有特定顺序）才会`foo4`运行。

我的直觉告诉我要深入`$.Deferred()`研究，但我还没有完全找到我需要的东西。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T18:40:27.677

让`fooX`函数解析传递给`$.when`.

```
var d1 = $.Deferred();
var d2 = $.Deferred();
var d3 = $.Deferred();

function foo1() {
    // do normal work, then
    d1.resolve();
}

// same for other 2 functions

$.when(d1, d2, d3).then(foo4); 
```

[http://jsfiddle.net/mattball/nVFnv/](http://jsfiddle.net/mattball/nVFnv/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T18:38:45.707

创建一个计分板变量，在每个函数完成时计数，然后在每个函数之后调用 foo4。如果分数没有计算到正确的值，则 foo4 应该退出。

# javascript - 问题在按钮单击时调用 jquery 函数

> ID：11852005
> 
> 赞同：0
> 
> 时间：2012-08-07T18:35:47.103
> 
> 标签：javascript, jquery, html

这是我的jQuery代码

```
(function($){
var W=$(window),
    D=$(document),
    Ht = D.height(),
    Wt = W.width();
$.fn.ThrowMask = function(){
             //Working code
        }
}); 
```

我试图像这样在按钮单击上附加此代码

```
<script type="text/javascript">
    $(document).ready(function(){
        $("#btn").click(function(){
            ThrowMask();
        });

    });
</script> 
```

但这会导致错误未定义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T18:40:07.443

除了 Isaac Fife 的修复之外，您还需要正确调用该函数。

```
<script type="text/javascript">
    $(document).ready(function(){
        $("#btn").click(function(){
            $(this).ThrowMask();
        });
    });
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T18:37:46.427

你永远不会调用 lambda 函数。改用这个

```
(function($){
var W=$(window),
    D=$(document),
    Ht = D.height(),
    Wt = W.width();
$.fn.ThrowMask = function(){
             //Working code
        }
})($); 
```

注意两个额外的括号。将 jquery 添加到函数调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T18:42:02.440

这是工作代码：

```
(function($){
var W=$(window),
    D=$(document),
    Ht = D.height(),
    Wt = W.width();
$.fn.ThrowMask = function(){
             //Working code which binding click event
             $(this).click(function (event) {
                  // do your click even handler here
             });

        }
}(jQuery));

<script type="text/javascript">
    $(document).ready(function(){
        $("#btn").ThrowMask();

    });
</script> 
```

# php - MySQL 查询为大于 where 子句返回较小的值

> ID：11852007
> 
> 赞同：0
> 
> 时间：2012-08-07T18:35:55.653
> 
> 标签：php, mysql

这是查询

> 从表中选择 *，其中 id = '7883c2c8e6' AND value > '45' DESC

但由于某种原因，它返回了字段值为 8 的行。我已经检查过，它没有前面或后面的字符。该字段当前设置为 varchar。我想知道这是否会影响结果？

如果我将 > 的方向更改为 < 这行不会显示，但肯定应该是相反的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T18:37:48.980

因为“8”大于“45”（按字母顺序）。

[将](http://dev.mysql.com/doc/refman/5.0/en/cast-functions.html#function_convert)您的值转换为 int：

```
AND convert( value, unsigned) > 45 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T18:38:13.617

`The field is currently set as varchar`

这就是问题所在；如果您在文本字段上使用比较运算符，它将按字母顺序而不是数字顺序对结果进行排序。

要绕过它，请将字段设置为整数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T18:37:50.910

```
SELECT * FROM TABLE 
WHERE id = '7883c2c8e6' AND (value * 1) > 45
order by value DESC 
```

# php - 如何在 PHP 中检索 2 个标记之间的数组值？

> ID：11852009
> 
> 赞同：2
> 
> 时间：2012-08-07T18:35:58.310
> 
> 标签：php, arrays, loops

我有一个值数组，所有字符串。数组中还有 2 个“标记”条目，表示后面的值是什么。基本上它是这样设置的：

`$array['1','2','3','A','5','6','7','B','8','9']`

我需要*在* **A**之后但*在* **B**之前检索数组索引。因此，在此示例中，索引为 5、6 和 7。

我正在考虑使用 forloop 和一些迭代 if 语句来执行此操作。但我似乎无法弄清楚。任何帮助深表感谢 ：）

编辑：还值得注意的是，A 和 B 并不总是在数组中的同一位置；有些用户在 A 和 B 之间的数据比其他用户多，有些用户根本没有 A 和 B。但是如果 A 存在，我需要获取它后面的值。如果 A 和 B 存在，它们也将始终具有相同的值（A 和 B）。

EDIT2：根据 PeeHaa 的建议，这是我目前正在尝试的。A 是“已注册：当前”，B 是“已注册：下一个”。在他的测试中，他得到了在 A 之后但在 B 之前的值，但是在我的测试中，我只得到了 A 的值（“注册：当前”）。它只输出“注册：当前”而不是两个标记之间存在的值。

```
function getValuesBetweenMarkers($theArray, $startMarker = 'registered:current', $endMarker = 'registered:next')
{
    $offset = array_search($startMarker, $theArray) + 1;
    $length = array_search($endMarker, $theArray) - $offset;

    return array_slice($theArray, $offset, $length, true);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T18:47:52.870

```
function getValuesBetweenMarkers($theArray, $startMarker = 'A', $endMarker = 'B')
{
    $offset = array_search($startMarker, $theArray) + 1;
    $length = array_search($endMarker, $theArray) - $offset;

    return array_slice($theArray, $offset, $length, true);
}

$array = array('1','2','3','A','5','6','7','B','8','9');
var_dump(getValuesBetweenMarkers($array)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T18:41:23.610

我认为这应该有效：

```
$result = array();
$start = "A";
$stop = "B";
$push = false;
foreach($array as $value) {
    if ($value == $start) {
         $push = true;
    } else if ($value == $stop) {
        break;
    }
    if ($push) {
        $result[] = $value;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T18:43:18.073

您可能想像这样使用 array_search() 和 array_slice() ：

```
$index_a = array_search('A', $array);
$index_b = array_search('B', $array);
$offset = $index_a + 1;
$slice_length = $index_b - $offset;

$final_array = array_slice($array, $offset, $slice_length); 
```

当然，您可能希望添加更多逻辑来验证 A&B 都存在以及验证它们以正确的顺序出现（即 $offset >=0 和 $slice_length > 0）

# cocoa - 带有 SimplePing 委托的 NSThread

> ID：11852012
> 
> 赞同：0
> 
> 时间：2012-08-07T18:36:25.987
> 
> 标签：cocoa, nsrunloop

我目前在 Mac OS X 应用程序中使用 Apple 的 SimplePing 在传输数据之前对 URL 执行 ping 操作，效果很好，但会锁定我的 UI。我可能没有找对地方，但我该如何防止这种情况发生？我目前正在使用 currentRunLoop，我认为这是问题所在，但我仍然希望用户能够在此操作期间与 UI 进行交互（例如取消）。如何为 Simple Ping 创建一个运行循环，以便我的 UI 不会锁定？

```
SimplePing *localPing = [SimplePing simplePingWithHostName:pingHost];
        [localPing setDelegate:self];
        [localPing start];

        do {
            [[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode beforeDate:[NSDate distantFuture]];
        } while (localPing != nil); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T10:32:53.050

使用 SimplePing 时您的 UI 被锁定的原因是 ping 实用程序需要一定时间才能完成。而且您似乎是在主线程中执行此操作，导致锁定 UI 界面白 ping 任务正在进行中。所以你可以使用下面的代码

```
-(void) ping:(NSString *) ip
{
SimplePing *localPing = [SimplePing simplePingWithHostName:pingHost];
[localPing setDelegate:self];
[localPing start];
} 
```

然后在新线程中调用 ping 函数

```
[NSThread detachNewThreadSelector:@selector(ping:) toTarget:self. withObject:@"IP Address"]; 
```

# google-chrome - Chrome 扩展图像资产未显示（清单版本 2）

> ID：11852014
> 
> 赞同：6
> 
> 时间：2012-08-07T18:36:31.277
> 
> 标签：google-chrome, google-chrome-extension

我刚刚将 chrome 插件更新为清单版本 2。我没有遇到与 javascript 相关的权限问题，但该插件有一些与其打包的图像资产不再显示。

这两种具体情况是当用户以某种方式与插件交互时弹出通知和插件插入某些页面的一些小图像。在这两种情况下，图像都与插件一起打包。我对插件从外部资源加载图像没有任何问题。我`object-src`在`content_security_policy`include中的设置`'self'`。

我错过了什么？如果我通过“chrome-extension:///some_img.png”直接导航到图像，我可以打开图像，所以它们肯定在那里。我使用了 webkit 检查器并找到了已插入的 img，右键单击 img src 并在新选项卡中打开也显示了 img，因此插入的 url 是正确的（它们应该是正确的，我正在使用`chrome.extension.getURL`功能）。

更新：

设置`img-src`中`content_security_policy`也无济于事。我不知道 chrome 是否甚至使用该特定选项，但它在 W3C 规范中。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-07T21:10:34.883

在浏览了最后几个 chrome 版本的[变更日志](http://code.google.com/chrome/extensions/whats_new.html)[`web_accessible_resources`](https://developer.chrome.com/extensions/manifest/web_accessible_resources)后，我发现了一个新的（在 Chrome 18 中添加的）清单选项。这需要使用字符串列表的值添加到您的清单中。这些字符串是插件目录中的路径，指向您希望在网页中访问的资源（imgs 等...）（或者重要的是，chrome 桌面通知）。将此参数添加到我的清单中会授予加载必要图像的权限。

# windows - 以编程方式请求特定的显示方向？

> ID：11852016
> 
> 赞同：0
> 
> 时间：2012-08-07T18:36:55.450
> 
> 标签：windows, windows-8, microsoft-metro, windows-runtime

是否可以以编程方式将显示设置为特定方向？

我正在转换在 Android 等某些平台上使用函数（如 Activity::setRequestedOrientation()）的中间件代码，这些函数允许开发人员随时在应用程序中更改显示的方向。是否可以在 Metro 中做同样的事情？还是我只能通过方向更改事件访问显示器？

我的应用程序是全屏 Direct X 应用程序。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T20:54:04.150

您需要设置自动旋转首选项，我相信：

[http://msdn.microsoft.com/en-us/library/windows/apps/windows.graphics.display.displayproperties.autorotationpreferences.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.graphics.display.displayproperties.autorotationpreferences.aspx)

这些将允许您设置当前方向；但是，如果您有不止一套，那么它会清楚地选择它认为该设备当前设置的那个。

请注意，您的应用程序可能在不支持旋转的设备上运行——例如桌面。

# c# - Windows Phone 页面导航

> ID：11852019
> 
> 赞同：4
> 
> 时间：2012-08-07T18:37:07.457
> 
> 标签：c#, .net, silverlight, windows-phone-7

我正在开发一个 Windows Phone 应用程序，这是我遇到问题的场景：

所以我有三页，我们称之为第 1、2、3 页。

在第 1 页中，我有一个名为`start downloading`. 单击按钮并使用`NavigateService.Navigate(page2Uri)`并导航到 page2。

第 2 页进行查询并从 Internet 下载图像，因此在其`OnNavigateTo`处理程序中，我检查页面返回堆栈，如果它是从第 1 页导航的，我将进行下载。在此页面的应用栏中，我有一个可以导航到 page3 的按钮。

第 3 页是一个选项列表，这些选项将对第 2 页中下载的图像执行某些行为。一旦我选择了一个选项，我想回到第 2 页并在加载的图像上执行一些行为。
问题来了：
如果我`NavigateService.Navigate(page2Uri)`从 page3 导航到 page2，它将再次调用 Page2 构造函数和`OnNavigateTo`处理程序，这将导致它丢失它已经获得的每个实例变量。
但是如果我使用`NavigatService.GoBack`它会回到page2，然后意识到backstack top entry是page1（因为page1 -> page2 -> page3）。所以它会再次重新下载所有内容。

当将表单第 3 页导航回第 2 页时，我不希望再次下载任何内容。所以想知道是否有人对此有好主意。

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T19:05:34.590

您可以使用查询参数和 NavigationEventArgs 来提供帮助。

首先，您可以使用 NavigationEventArgs 通过检查 NavigationMode 来确定用户是前进还是后退。

其次，您可以使用查询参数告诉第2页下载。

从第1页：

```
private void MoveToPage2FromPage1()
{
    NavigationService.Navigate(new Uri("/Page2.xaml?shouldDownload=true", UriKind.Relative));
} 
```

和第2页：

```
protected override void OnNavigatedTo(NavigationEventArgs e)
{
    if (e.NavigationMode == NavigationMode.Back) return;

    string shouldDownload = ""; //May not be needed if you'll only ever go to page 2 from page 1 to download...
    if (NavigationContext.QueryString.TryGetValue("shouldDownload", out shouldDownload))
    {
        Convert.ToBoolean(shouldDownload);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T05:04:57.630

有几种方法可以将数据传递到另一个页面：

*   您可以按照 Shawn 的建议使用查询参数。
*   您可以使用存储在 app.cs 中的全局数据
*   您可以使用静态类来保存数据。
*   您可以使用共享的 viewModel 来保存参数。（或视图模型中的静态属性）

这一切都取决于具体情况。我认为 Shawns 关于使用查询参数的建议可能是最“正确”的 MVVM 方式，但其他方法也有它们的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-15T08:22:37.907

您需要实现以下功能和导航服务。这些代码肯定会解决你的问题

对于两个或更多参数，请使用此代码

```
String download="true";
String file="image";
NavigationService.Navigate(new Uri("/Page3.xaml?download="+download+"&file="+file+"", UriKind.Relative)); 
```

OnNavigatedTo，将以下代码添加到您的 Page2

```
 protected override void OnNavigatedTo(NavigationEventArgs e)
        {
            base.OnNavigatedTo(e);
            String download=NavigationContext.QueryString["download"];  
          String file=NavigationContext.QueryString["file"]; 

        } 
```

对于上面的 OnNavigatedTo 函数输出 true 和 image。您可以使用`MessageBox.Show();`输出

# query-optimization - Access 2010 优化臃肿的查询

> ID：11852025
> 
> 赞同：0
> 
> 时间：2012-08-07T18:37:35.147
> 
> 标签：query-optimization, ms-access-2010

我必须让这个查询为选择的设备生成每月平均可用性。该查询看起来很丑陋而且很臃肿，我想知道是否可以做些什么来使它变得更好。

现在我有一个表示每个月的表达式列。每个月，以一月为例，我需要检查维护期是否发生在当月内，在月前开始但在月内结束，在月内开始但在外结束，完全封装当月（如果是2012年1月，则开始维护2011 年 12 月到 2012 年 2 月结束），或者不计算在内，因为它在整个月都在全面运作。

所以你可以看到检查这 4 个案例并在之后进行计算真的会膨胀一个月，更不用说 12 个月了！所以我只是在寻找一个建议，如果我可以做更多的事情。如果有人有可以指向我的文章，我不怕一些 RnD。如果这种方法不是太糟糕，我不介意，如果可能的话，我只想做得更好。

先谢谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T00:01:06.447

你不能在 MS Access 中做一个简单的交叉表查询吗？

# asp.net-mvc-3 - 使用 Autofac 进行属性注入

> ID：11852026
> 
> 赞同：0
> 
> 时间：2012-08-07T18:37:41.960
> 
> 标签：asp.net-mvc-3, autofac, property-injection

所以我有一个简单的问题（我认为）。

如何使用 Autofac 对 FilterAttribute 进行属性注入？

```
Public Class TestFilterAttribute
    Inherits ActionFilterAttribute

    Public Property Service As IMyService        

    Public Overrides Sub OnActionExecuting(filterContext As System.Web.Mvc.ActionExecutingContext)

        ** I need to get to the IMyService here **
        Dim val = Service.GetValue()

        MyBase.OnActionExecuting(filterContext)
    End Sub
End Class 
```

我已经在容器中注册了服务：

```
builder.RegisterType(Of MyService).As(Of IMyService)().InstancePerHttpRequest() 
```

或者，也许我正在以错误的方式去做。我希望能够注入过滤器属性。

另外，使用时`Register`，你也必须这样做`.As`吗？就像在`RegisterType`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T12:05:06.297

确保您在容器构建器上调用 RegisterFilterProvider 方法，它会处理其余的事情。

[http://code.google.com/p/autofac/wiki/Mvc3Integration#Filter_Attribute_Property_Injection](http://code.google.com/p/autofac/wiki/Mvc3Integration#Filter_Attribute_Property_Injection)

# php - PHP 和 webserver 集成

> ID：11852027
> 
> 赞同：0
> 
> 时间：2012-08-07T18:37:42.257
> 
> 标签：php, dynamic, webserver

我在 php 中编写了一个简单的脚本来处理用户及其对内容的访问。我想做的最后一件事是编写一个模块来动态限制每组用户尝试访问服务器上的文件时的下载速度和最大连接数。像这样的东西：

```
Usergroup0: [max conn num: 2] [max connection speed: 256kb/sec]
Usergroup1: [max conn num: 4] [max connection speed: 1mbit/sec]
Usergroup2: [max conn num: 8] [max connection speed: 1mbit/sec] 
```

现在我不知道它是如何完成的。我想知道它是什么技术（或模块），所以我可以查一下。任何提示或指导都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T18:48:16.520

我自己从未听说过这样的事情。这应该有助于限制下载速度[如何限制来自 php 脚本的传出响应速度？](https://stackoverflow.com/questions/3110725/how-to-limit-speed-of-outgoing-response-from-php-script)

为了限制连接数（我假设您的意思是同时连接），您可以将“已连接”状态与数据库中当前登录的用户相关联并运行脚本来检查该组的最大用户数是否当前用户所属的会员已被攻破。

编辑：关于限制下载速度，来自 SO 文章，这是一个很好的资源[http://redmine.lighttpd.net/projects/lighttpd/wiki/Docs%3aTrafficShaping#Selective-traffic-shaping-plugin15-svn](http://redmine.lighttpd.net/projects/lighttpd/wiki/Docs%3aTrafficShaping#Selective-traffic-shaping-plugin15-svn)

# nservicebus - 从高层使用 NServiceBus 和 EventStore

> ID：11852033
> 
> 赞同：1
> 
> 时间：2012-08-07T18:37:53.010
> 
> 标签：nservicebus, event-sourcing

因此，我一直在阅读有关 EventStore 和 NServiceBus 的信息，并且我喜欢拥有我的数据的事务日志的想法，它可以帮助我基于该数据构建视图。

我现在不明白的是如何区分将写入您的读取存储的事件和可能触发发送电子邮件的相同事件。

前任。创建客户

```
CreateUserCommand -> CreateUserCommandHandler -> CreatedUserEvent 
```

我是否应该使用 CreatedUserEvent 来触发我对数据存储的写入和向用户发送电子邮件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-01T23:59:03.673

在过去的几年里，Eric Evans 认识到他的 DDD 模式的一个更新：领域事件（又名外部事件概念）。

事件溯源模式中的内部事件是我们一直关注的，例如您示例中的 UserCreatedEvent。使用 IEvent 标记接口保持这些显式。

虽然 IEvents 是在总线上发布的，但 IDomainEvents 对于不影响每个聚合状态的较大的域外通知更引人注目。

所以...

```
CreateUser (ICommand)
 ^- CreateUserCommandHandler

UserCreated (IEvent)
 ^- UserCreatedEventHandler 

SendNewUserEmail (ICommand)
 ^- SendNewUserEmailCommandHandler

NewUserEmailSent (IDomainEvent)
 ^- UserRegistrationService or some other AC 
```

我自己对事件采购还是很陌生；但是，我猜你可以让`UserRegistrationService`总线上的寄存器来监听 SendNewUserEmail ICommand。

无论您采用哪种方式，我都会专注于创建用于发送电子邮件的其他命令/事件，并且电子邮件已发送。然后，稍后您可以查看事务日志，包括何时排队发送、发送多长时间、发送时是否有任何重试、同时发送了多少以及是否影响时间延迟（日期时间差异) 显示任何瓶颈？，安装一个发送电子邮件的队列并将其分解为一个较小的独立服务等。

# ruby-on-rails - 使用 Ruby on Rails 和上传的编码器

> ID：11852035
> 
> 赞同：0
> 
> 时间：2012-08-07T18:37:55.210
> 
> 标签：ruby-on-rails, ruby-on-rails-3, html, video

我的问题是关于编码器文件，我怎样才能让客户将文件上传到我的服务器，然后他们可以查看。我正在实施 html5 以开始，并希望允许客户在那里上传文件 mov、avi 等... 我想知道是否有一个转换器可以在 Rails 世界的飞行中做到这一点，或者还没有解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T20:03:47.870

到目前为止，将视频编码为可视格式的最简单方法是使用服务为您完成。如果你想自己做，你可以用[ffmpeg做。](http://ffmpeg.org/)

对于进行编码的服务，我建议使用[zencoder](http://zencoder.com)，原因如下：

*   他们有一颗非常漂亮的红宝石
*   他们有非常好的调试工具
*   他们有一个 API 构建器，因此您可以在代码中使用它之前通过他们的网站构建您的请求，从而减少请求的反馈循环。

我还使用过其他服务，例如[encoding.com](http://encoding.com)和[Panda](http://www.pandastream.com/)，但我发现 Zencoder 始终是按编码时间定价的最佳编码服务。

使用以下选项（对于 Zencoder）：

```
 :format => "mp4",
      :public => public,
      :video_codec => "h264",
      :audio_codec => "aac" 
```

适用于大多数现代设备（Android 设备、iDevices、Safari、Chrome、IE9+ 和 Flash）

# java - 关于 Android 应用程序的“重点”是什么？

> ID：11852036
> 
> 赞同：1
> 
> 时间：2012-08-07T18:37:58.880
> 
> 标签：java, android

在 Android 应用程序的开发中，我不断看到“专注”和听到“专注”。我的问题是：什么是焦点，它是如何在 Android 应用程序中应用的？是不是重要？你能用它做什么？

很抱歉，如果有人问过这个问题，我看了但没有看到任何清楚解释的东西。我查看了 Android 开发指南，但找不到关于它是什么以及它是如何工作的正确解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T18:44:47.083

如果您曾经使用过黑莓并通过它浏览过网络，您会记得，每当您滚动滚轮时，您都会选择页面上的随机元素，直到找到您想要的内容，然后单击 Enter。当元素改变颜色或成为焦点时，您就知道您正在选择什么元素。这基本上就是在 Android 上“专注”时发生的事情，除了它主要用于当您通过某种按钮滚动时，或者当您选择文本框或其他内容并等待输入时。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T18:50:40.870

焦点只是给予特定视图“焦点”或注意力。

使用焦点的一个示例是，如果您有一个`EditTextView`并且您希望用户能够在它显示后立即输入它，您可以将焦点放在该 EditTextView 上，并且键盘将根据在该视图中的输入自动显示.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T18:47:23.097

它只是指处于活动状态的视图。例如，如果您有一个 TextView 并且它是活动视图，那么它将成为焦点

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-07T18:48:16.513

简而言之，一个让用户关注交互的对象/项目被聚焦。这是一个项目可以处于的状态。

[Android 开发用户界面事件](http://developer.android.com/guide/topics/ui/ui-events.html)

# cocoa-touch - 搜索栏和搜索显示控制器的区别

> ID：11852038
> 
> 赞同：6
> 
> 时间：2012-08-07T18:38:04.577
> 
> 标签：cocoa-touch, uisearchbar, uisearchdisplaycontroller

搜索栏和搜索显示控制器有什么区别？我什么时候应该使用其中一种？

# php - 视频上传文件错误

> ID：11852040
> 
> 赞同：0
> 
> 时间：2012-08-07T18:38:07.643
> 
> 标签：php, file, types, upload, error-handling

我有一个上传视频表单，上传一个小的 avi 文件时效果很好。这是我的 php 代码，用于将视频放在我选择的文件夹中

```
$path = pathinfo($_FILES["file"]["name"]);
$ext = $path['extension'];
if ($ext == "avi" || $ext == "mp4" || $ext == "mpg" || $ext == "mov" || $ext == "wmv" || $ext == "flv"){
    if ($_FILES["file"]["error"] > 0){
        echo "Return Code: " . $_FILES["file"]["error"] . "<br />";
    }
    else{
        echo "Upload: " . $_FILES["file"]["name"] . "<br />";
        echo "Type: " . $_FILES["file"]["type"] . "<br />";
        echo "Size: " . ($_FILES["file"]["size"] / 1024) . " Kb<br />";
        echo "Temp file: " . $_FILES["file"]["tmp_name"] . "<br />";        
        if (file_exists("videos/" . $_FILES["file"]["name"])){
            echo $_FILES["file"]["name"] . " already exists. ";
            echo "<a href = './videochannel.php'>Return to Channel</a>";
        }
        else{
              move_uploaded_file($_FILES["file"]["tmp_name"],"videos/" . $_FILES["file"]["name"]);
              echo "Stored in: " . "videos/" . $_FILES["file"]["name"];
              echo "<a href = './videochannel.php'>Return to Channel</a>";
        }
    }
}
else{
    echo "That is not a supported file type. Please try again.  <a href = './videochannel.php'>Return to Channel</a>";
}
?> 
```

但是，当我上传 mp4 时，我得到“返回代码 1”，如果我没记错的话，这与我在 php.ini 中更改为 200M 的最大上传大小有关。它仍然没有工作。这也表示在上传任何其他选项时它不是受支持的文件类型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T18:48:31.113

当您上传的文件超过 php.ini 设置的最大大小时，返回 1 看看这可能对你有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T19:12:31.190

我猜 1mb 是默认上传的限制，让它 20mb 用于测试并上传最大 20mb 的文件并检查它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T06:30:37.943

问题是我没有重新启动我的服务器

# android - 想要在应用程序启动时不单击任何按钮运行功能

> ID：11852041
> 
> 赞同：-1
> 
> 时间：2012-08-07T18:38:07.813
> 
> 标签：android, function, android-intent, android-activity

我有一个名为“func()”的函数。我想在应用程序启动时运行此功能而不单击任何按钮。就在应用程序加载时，我想在该功能中显示按摩。按摩。我只想在应用程序启动时运行该功能，代码将是什么。

```
public class TextViewActivity extends Activity {
  public static EditText etxt;
public final void func(){
    etxt.setText("Massage");
 }

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
     etxt= (EditText) findViewById(R.id.etxt2);
     }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T18:41:17.450

Just put a call to the function on the `onCreate`

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);        
    etxt= (EditText) findViewById(R.id.etxt2);
    func(); //A call to the function.     
} 
```

Hope that helps.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T18:50:10.800

尝试使用下面的代码..*你需要在初始化edittext etxt后调用你的函数。所以它不会导致你NPE*

```
public final void func(){
    etxt.setText("Message");
 }

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
     setContentView(R.layout.main);
     etxt= (EditText) findViewById(R.id.etxt2);
    func();// here your function call. 
     } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T22:34:31.490

尝试这个：

```
public class TextViewActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        findViewById(R.id.etxt2).setText("SMTH");
    }
} 
```

如果你真的需要调用一个函数，你可以使用这个：

```
public class TextViewActivity extends Activity {

    public final void func() {
        findViewById(R.id.etxt2).setText("SMTH");
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        func();
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T18:43:27.693

我不建议将应用程序子类化以执行此操作。当应用程序启动时，它将转到主要活动。所以我会说如果它已设置，只需保留一个 SharedPreference 布尔值。如果不显示消息。

所以在这里保持应用程序的状态：http: [//developer.android.com/reference/android/content/SharedPreferences.html](http://developer.android.com/reference/android/content/SharedPreferences.html)，只需设置一个布尔值。请记住，当您的应用程序被调用时，活动 onCreate 总是被主活动调用，所以它只是不再调用它的问题。

# wpf - Stringformat 连接数据绑定和资源的值

> ID：11852050
> 
> 赞同：14
> 
> 时间：2012-08-07T18:38:32.447
> 
> 标签：wpf, binding, concatenation, string-formatting, staticresource

我想在我的窗口标题中连接我的视图模型中的一个属性和一个来自资源文件的值。这就是我在没有来自资源的字符串的情况下所做的工作：

```
Title="Binding Path=Description, StringFormat=Building: {0}}" 
```

现在我想删除“Building”字符串并从资源中输入一个值，就像我在其他地方使用的那样：

```
xmlns:res="clr-namespace:Project.View.Resources"
{res:Strings.TitleDescription} 
```

我如何定义两者？我可以定义像 {1} 参数吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-07T18:41:05.960

是的你可以。只需使用[`MultiBinding`](http://msdn.microsoft.com/en-us/library/system.windows.data.multibinding.aspx).

MSDN 上的文章[`StringFormat`](http://msdn.microsoft.com/en-us/library/system.windows.data.bindingbase.stringformat.aspx)有一个例子。

在您的情况下，代码将如下所示：

```
 <TextBlock>
    <TextBlock.Text>
      <MultiBinding  StringFormat="{}{0} {1}">
        <Binding Source="{x:Static res:Strings.TitleDescription}"/>
        <Binding Path="Description"/>
      </MultiBinding>
    </TextBlock.Text>
  </TextBlock> 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2015-12-01T14:06:27.460

我现在已经`MultiBinding`在几个地方看到了答案，几乎从来没有必要使用它。您可以将资源定义为字符串格式，只要字符串格式参数只有一个，`MultiBinding`则不需要。使代码更加简洁：

```
<TextBlock Text="{Binding Description, StringFormat={x:Static res:Strings.TitleDesc}}" /> 
```

而且`TitleDesc`资源很明显`"Building: {0}"`。

# javascript - 如何将 onclick 值传递给另一个按钮？

> ID：11852052
> 
> 赞同：0
> 
> 时间：2012-08-07T18:38:45.423
> 
> 标签：javascript

我想要完成的是我有一个数据表，每个博士都有一个按钮。我想将其设置为单击每个 dr 中的按钮时的位置，它将其 onclick 函数和变量传递给另一个按钮。

我想取消该功能的按钮如下所示：

```
<button onclick="buyPhone('17729198426','(772) 919-8426');" type="button">Acquire</button> 
```

目标按钮如下所示：

```
<button id="saveNumber" type="button" class ="viewcust_tbl_new_button" onclick="">Save</button> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T18:44:05.330

您可以将事件函数从一个元素复制到另一个元素，如下所示：

```
document.getElementById('button1').click = document.getElementById('button2').click; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T18:44:01.423

您可以向您的函数 buyPhone 添加类似的内容：

```
$('#saveNumber').attr('onclick', yourFuncFromTheFirstButton); 
```

# php - WordPress 插件的 PHP include() - 错误/警告消息

> ID：11852053
> 
> 赞同：1
> 
> 时间：2012-08-07T18:38:50.243
> 
> 标签：php, include, warnings

这是我关于堆栈溢出的第一篇文章，所以如果我违反了礼仪或做了一些愚蠢的事情，我深表歉意。我也是一个新手程序员，所以如果这个问题看起来很愚蠢，我提前道歉。

现在进入重点：当我们的主要程序员正在度假时，我正在尝试为网站创建一个 WordPress 插件。我已经取得了一些成功，现在我需要做的是在用户在网页上执行特定操作后从插件中调用 simplemodal-login。目前，我正在尝试这样做以包含文件，这些文件位于文件中插件的上一级目录中（我将屏蔽文件名以保持匿名）：

```
include ("../simplemodal-login/simplemodal-login.php"); 
```

我还尝试在 simplemodal-login 目录部分前加上`/../`、`../../`和`/../../` . 我也试过

```
include ("{$_SERVER['DOCUMENT_ROOT']}/[project name]/wp-content/plugins/simplemodal-login"); 
```

以及它的一些变体。没有任何效果。我不断收到此错误消息的变体：

```
Warning: include(../simplemodal-login/simplemodal-login.php) [function.include]: failed to open stream: No such file or directory in /home/[user name]/public_html/[website name]/[project name]/wp-content/plugins/[my plugin]/[plugin file] on line 29
Warning: include() [function.include]: Failed opening '../simplemodal-login/simplemodal-login.php' for inclusion (include_path='.:/usr/lib/php:/usr/local/lib/php') in /home/[user name]/public_html/[website name]/[project name]/wp-content/plugins/[plugin name]/[plugin file].php on line 29 
```

我究竟做错了什么？我只是想在用户看到网页一定次数后运行 simplemodal-login 插件。如何正确包含文件？对于我的经验不足，我深表歉意——我在大学学习了 Java 入门课程（我做得很好），今年夏天我作为实习生学了一点（我的意思是 LITTLE）一点 PHP。如果有人可以指导我，以便在我尝试包含文件时不会收到该错误消息，那将非常有帮助。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T18:43:33.000

如果您尝试包含的文件是您正在编写代码的插件文件的一个目录级别，那么可移植的解决方案是使用：

```
include dirname(__FILE__) . '/../file.php'; 
```

`dirname(__FILE__)`返回执行该语句的文件的路径（无论它本身是否包含在内）。我在 Wordpress 插件中使用它没有任何问题。

希望有帮助。

# c# - DirectorySecurity 设置特殊权限，而 FileSecurity 没有

> ID：11852057
> 
> 赞同：9
> 
> 时间：2012-08-07T18:39:11.027
> 
> 标签：c#, .net, permissions, implementation

检查以下两个代码块：

```
System.Security.AccessControl.DirectorySecurity dsec = System.IO.Directory.GetAccessControl(str);
System.Security.Principal.NTAccount group= new System.Security.Principal.NTAccount("DOMAIN","USERGROUP");
System.Security.AccessControl.FileSystemAccessRule myrule = new System.Security.AccessControl.FileSystemAccessRule(group,System.Security.AccessControl.FileSystemRights.FullControl, System.Security.AccessControl.AccessControlType.Allow);
dsec.SetAccessRule(myrule);
System.IO.Directory.SetAccessControl(str,dsec); 
```

和

```
System.Security.AccessControl.FileSecurity fsec = System.IO.File.GetAccessControl(file);
System.Security.Principal.NTAccount group= new System.Security.Principal.NTAccount("DOMAIN","USERGROUP");
System.Security.AccessControl.FileSystemAccessRule myrule = new System.Security.AccessControl.FileSystemAccessRule(group,System.Security.AccessControl.FileSystemRights.FullControl, System.Security.AccessControl.AccessControlType.Allow);
fsec.SetAccessRule(myrule);
System.IO.File.SetAccessControl(file,fsec); 
```

人们会期望它们都做完全相同的事情，只有一个对目录和一个文件。而且，在某些方面，他们确实如此。在这两种情况下，所讨论的文件系统对象都会发生变化，因此 DOMAIN\USERGROUP 具有完全控制的有效权限。

但是，奇怪的是，当您右键单击文件并查看安全性时，您会看到： ![文件安全选项卡](../Images/2fb35301a738b19cd4b9e7405f696294.png)

当您右键单击文件夹并查看安全性时，您会看到： ![文件夹安全选项卡](../Images/aee86b9afbceb06495b6fced1cd22d5b.png)

如果我然后转到 Advanced->Effective Permissions->Select(DOMAIN\USERGROUP)，它显示该组的文件夹的有效权限是完全控制（所有框都被选中，而不仅仅是完全控制框. 那会更奇怪）。

我的问题是，为什么几乎相同的实现的效果会有所不同，有人知道如何复制将权限应用于文件的效果吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-16T06:36:35.320

不同之处在于传播标志与目录安全性的相关性。

```
var accessRule = new FileSystemAccessRule(
    identity: group,
    fileSystemRights: FileSystemRights.FullControl,
    type: AccessControlType.Allow,
    inheritanceFlags: InheritanceFlags.ContainerInherit | InheritanceFlags.ObjectInherit,
    propagationFlags: PropagationFlags.None); 
```

注意`inheritanceFlags`设置。如果未指定，默认为无，它被归类为“特殊”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T18:45:29.447

关于向文件添加权限，您可以尝试 Logan

如果有帮助，请尝试此代码

```
 public static bool CheckReadWriteAccces(string filePath, System.Security.AccessControl.FileSystemRights fileSystemRights)
    {
        FileInfo fileInfo = new FileInfo(filePath);

        string str = System.Security.Principal.WindowsIdentity.GetCurrent().Name.ToUpper();
        foreach (System.Security.AccessControl.FileSystemAccessRule rule in fileInfo.GetAccessControl().GetAccessRules(true, true, typeof(System.Security.Principal.NTAccount)))
        {
            if (str == rule.IdentityReference.Value.ToUpper())
                return ((rule.AccessControlType == System.Security.AccessControl.AccessControlType.Allow) && (fileSystemRights == (rule.FileSystemRights & fileSystemRights)));
        }

        return false;
    }

    /// <summary>
    /// Make a file writteble
    /// </summary>
    /// <param name="path">File name to change</param>
    public static void MakeWritable(string path)
    {
        if (!File.Exists(path))
            return;
        File.SetAttributes(path, File.GetAttributes(path) & ~FileAttributes.ReadOnly);
    } 
```

# c# - 动态添加的自定义用户控件不可见

> ID：11852058
> 
> 赞同：2
> 
> 时间：2012-08-07T18:39:16.967
> 
> 标签：c#, winforms

我在 C# 中有一个带有下拉框的表单。当该下拉框发生更改时，我希望它将自定义用户控件加载到面板中。我没有编译错误，没有运行时错误，但我也没有可见的用户控制。这里的想法是每个用户控件都了解不同场景的配置。我想将每个场景封装在自己的控件中，下拉框允许用户选择场景，加载控件供用户执行配置。通过调整下拉菜单中的选项，我可以自定义给定客户的场景。正如我所说，我的问题是我无法让任何控件变得可见。这是我用于下拉索引更改事件处理程序的代码：

```
private void ddlCollectorType_SelectedIndexChanged (object sender, EventArgs e)
{
    m_currentControl = null;
    pnlDeviceConfig.Controls.Clear ();

    switch ((string) ddlCollectorType.SelectedItem)
    {
        case "SEL-421":
            SEL421ASCIIControl s421 = new SEL421ASCIIControl (this);
            m_currentControl = s421;
            pnlDeviceConfig.Controls.Add (s421);
            break;
        case "SEL-421 (FTP)":
            break;
        case "GE D60":
            GED6061850Control geD60 = new GED6061850Control (this);
            m_currentControl = geD60;
            pnlDeviceConfig.Controls.Add (geD60);
            break;
        case "GE D60 (TFTP)":
            break;
        case "MiCOM P442":
            break;
    }
} 
```

到目前为止，我只创建了几个用户控件，因此是空的 case 语句。当我做出应该向我展示某些东西的选择时，我什么也得不到（在调试器中确认我正在点击 case 语句主体）。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T19:00:15.593

为了跟进[我的评论](https://stackoverflow.com/questions/11852058/c-sharp-custom-user-controls-not-visible/11852383#comment15763266_11852058)，我猜您的控件的位置和/或尺寸没有设置。

尝试类似：

```
...
SEL421ASCIIControl s421 = new SEL421ASCIIControl (this);
m_currentControl = s421;
pnlDeviceConfig.Controls.Add (s421);

// TODO: Set real size and position.
s421.Left = 0;
s421.Top = 0;
s421.Width = 100;
s421.Height = 50;

break;
... 
```

您还可以使用控件的[`Dock`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.dock.aspx)和[`Anchor`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.anchor.aspx)属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T18:51:03.710

1 您可以用 PlaceHolder 替换您的菜单，他是添加控件的理想控件

这里有一个例子： http: [//www.developerfusion.com/code/3826/adding-controls-to-placeholders-dynamically/](http://www.developerfusion.com/code/3826/adding-controls-to-placeholders-dynamically/)

2 对于您的情况，您可以尝试将面板的可见属性调整为 true

# visual-studio-2010 - Team Foundation Build 2010 - 将项目属性文件 (.props) 添加到所有项目

> ID：11852066
> 
> 赞同：0
> 
> 时间：2012-08-07T18:39:30.720
> 
> 标签：visual-studio-2010, tfsbuild

我正在使用 TFBuild 2010 构建几个 VC++ 项目。我希望它们都继承一个 .props 文件。有没有办法在构建过程中做到这一点？我知道我可以使用 Visual Studio 中的属性管理器手动将 .props 工作表添加到每个工作表，但我希望有一个更优雅的解决方案。

我在 NT AUTHORITY\Network Service 帐户下运行构建服务，所以我认为我不能利用用户 AppData 文件夹中的 Microsoft.Cpp.Win32.user.props 表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T22:27:15.100

NT AUTHORITY\Network Service 实际上在 C:\Windows\ServiceProfiles 中有一个 AppData 文件夹。我在这个文件夹中编辑了 Microsoft.Cpp.Win32.user.props，解决了我的问题。

# storage - 存储冗余信息与重复转换

> ID：11852072
> 
> 赞同：0
> 
> 时间：2012-08-07T18:39:55.320
> 
> 标签：storage, maintainability, redundancy

*是存储冗余信息（可以从现有数据生成）还是在每次需要访问时转换现有数据更可取？*

我在下面尽可能地简化了我的具体问题，希望提供的答案可以作为未来的参考材料。

**例子：**

假设我们开发了一个程序，将数据放入网格上的 Squares（如井字游戏之类的超级描述性游戏）并分配各种细节，并为每个细节分配一个唯一的标识号：

## ![也被称为世界上最简单的数独谜题。](../Images/53b6686cfd2d498868c46a58b5210cc6.png)

在整个程序中，我们经常根据正方形的 X 和/或 Y 坐标执行逻辑（连续检查 3 个），而其他时候我们只需要 ID（可能访问 "SquareName[ID]" 处的字符串）——我们不确定这两者中哪一个更频繁地被访问，但这是一场相当激烈的竞争。

到目前为止，我们只是将 ID 存储在 square 类中，并在只需要 X 或 Y 时使用一些简单的公式对其进行转换。假设我们特别想获得一个正方形的坐标：

```
int CurrentX = (this.Square.ID - 1) % 3) + 1;  // X coordinate, 1 through 3
int CurrentY = (this.Square.ID + 1) / 3;       // Y, 1 through 3 
```

由于正方形在设置后不会四处移动或更改 ID，部分我认为将所有 3 个值存储在 Square 类中会更简单，但我的另一部分对冗余感到畏缩，因为访问 X 和 Y 已经很容易了足以从现有 ID 计算。

（注意，这个程序本身不是非常占用内存或资源，网格的大小也不会变得更大，所以主要取决于哪个选项是更好的实践或经验法则。）

你会怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T18:57:19.727

根据经验，对于数据是读/写的系统，**存储您的基本数据没有冗余**。

当性能或其他考虑成为一个实际问题时，您应该根据需要进行非规范化。（即等待它成为一个问题，不要过度预优化）。

您的目标应该是尽可能地维护最易维护的代码。这通常意味着编写尽可能少的代码。拥有额外的代码来维护数据点的冗余副本将使您的代码更加脆弱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T18:56:32.583

如果这些值可以在创建时确定然后不再更改，我会选择在构造函数中填充的变量。它不是多余的信息，因为它没有存储在其他任何地方，但这不是我的主要观点。在阅读我的代码时，我通常期望每当在请求时计算某些内容时，它可能会根据请求而改变。很容易在源中找到填充字段和更改字段的点，特别是如果它永远不会更改，但在查看某些总是返回相同结果的计算时，您可能会感到有些困惑，因为它是变量不能改变，想知道你是否只是错过了一个案例，或者这真的是静态的。此外，使用描述性变量名称，您可以摆脱注释。

# dll - 使用 Dependency walker 修复运行时错误

> ID：11852077
> 
> 赞同：0
> 
> 时间：2012-08-07T18:40:13.767
> 
> 标签：dll, x86, 64-bit, pyinstaller, dependency-walker

我编写了一个可执行的 python 程序，`PyInstaller`但出现运行时错误：

![错误](../Images/5dcea2fd1c9483363b6af3dbbcfa502c.png)

该应用程序运行完美，但总是出现此错误。我想摆脱这个问题。

我遵循了 Stack Overflow 的一些建议，并使用了依赖遍历器来查找问题。在日志部分，我得到这样的输出：

[![](../Images/9ba4a4d876d92d68c14d1cd299e99169.png)](https://i.imgur.com/Vmqkg.jpg)

一堆 .dll 文件有一个*红色 x86*而`PyInstaller`有一个*黑色 x64*。这与 32 位和 64 位 CPU 有关吗？我需要将我的 .dll 文件更新为 64 位吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T21:32:18.730

看起来您已经使用 32 位版本的 Dependency Walker 打开了一个 64 位可执行文件。如果您使用 64 位版本的 Dependency walker 重新打开该文件，它应该会消除您的第二个错误。并且应该指出您的第一个错误是缺少 MS CRT DLL。

# windows - Proc::Background 到底发生了什么？

> ID：11852079
> 
> 赞同：0
> 
> 时间：2012-08-07T18:40:16.037
> 
> 标签：windows, perl, automation, background-process, strawberry-perl

我正在尝试编写一个自动化其他 perl 脚本的脚本。本质上，我有一些脚本可以为我汇总数据，并且需要每周运行一次。我也有一对夫妇需要在周末运行以检查事情并在有问题时给我发电子邮件。我已经解决了电子邮件，除了自动化之外的所有内容。从互联网搜索来看，似乎使用 Proc::Background 是要走的路。我尝试编写一个非常基本的脚本来测试它，但无法弄清楚。我对 Perl 很陌生，以前从未自动化过任何东西（除了通过 Windows 任务调度程序），所以我真的不明白代码在说什么。

我的代码：

```
use Proc::Background;

$command = "C:/strawberry/runDir/SendMail.pl";

my $proc1 = Proc::Background -> new($command); 
```

我收到一条错误消息，提示`no executable program located at C:...`有人可以向我解释代码 (Proc::Background) 到底在做什么吗？然后，我至少会对将来如何完成我的任务和调试有一个更好的想法。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T21:16:19.933

我确实注意到 Proc::Background 的文档如下：

> Win32::Process 模块始终用于在 Win32 平台上生成后台进程。此模块始终采用包含可执行文件名称和任何选项参数的单个字符串参数。此外，它还要求将可执行文件的绝对路径也传递给它。如果只有一个参数传递给 new，那么它会在空白处拆分为一个数组，并且拆分数组的第一个元素用于可执行文件的名称。如果将多个参数传递给 new，则第一个元素用作可执行文件的名称。

所以，看起来它需要一个可执行文件，Perl 脚本不需要，但“perl.exe”需要。

我通常也在我的 Windows 任务中指定“perl.exe”：

```
C:\dwimperl\perl\bin\perl.exe "C:\Dropbox\Programming\Perl\mccabe.pl" 
```

# perl - 如何使用 perl 从文件中读取特定行并存储在数组中？

> ID：11852080
> 
> 赞同：1
> 
> 时间：2012-08-07T18:40:15.677
> 
> 标签：perl

如何将文件中未注释的行读取/存储到数组中？

`file.txt`如下所示

```
request abcd uniquename "zxsder,azxdfgt"
request abcd uniquename1 "nbgfdcbv.bbhgfrtyujk"
request abcd uniquename2 "nbcvdferr,nscdfertrgr"
#request abcd uniquename3 "kdgetgsvs,jdgdvnhur"
#request abcd uniquename4 "hvgsfeyeuee,bccafaderryrun"
#request abcd uniquename5 "bccsfeueiew,bdvdfacxsfeyeueiei" 
```

现在我必须将未注释的行（此脚本中的前 3 行）读取/存储到一个数组中。是否可以通过字符串名称或任何正则表达式的模式匹配来使用它？如果是这样，我该怎么做？

下面的代码将所有行存储到一个数组中。

```
open (F, "test.txt") || die "Could not open test.txt: $!\n"; 
@test = <F>; 
close F; 
print @test; 
```

我怎样才能只为未注释的行做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T18:45:00.460

如果您知道您的评论将在开头包含#，您可以使用

```
next if $_ =~ m/^#/ 
```

或者使用你必须读取每一行的任何变量而不是`$_`

这与行首的 # 符号匹配。至于将其他人添加到数组中，您可以使用`push (@arr, $_)`

```
#!/usr/bin/perl

# Should always include these
use strict;
use warnings;

my @lines; # Hold the lines you want

open (my $file, '<', 'test.txt') or die $!; # Open the file for reading
while (my $line = <$file>)
{
  next if $line =~ m/^#/; # Look at each line and if if isn't a comment
  push (@lines, $line);   # we will add it to the array.
}
close $file;

foreach (@lines) # Print the values that we got
{
  print "$_\n";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T18:48:35.277

你可以这样做：

```
push @ary,$_ unless /^#/;END{print join "\n",@ary}' 
```

这会跳过任何以 开头的行`#`。否则，该行将添加到数组中以供以后使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T09:03:57.310

对原始程序的最小更改可能是：

```
open (F, "test.txt") || die "Could not open test.txt: $!\n"; 
@test = grep { $_ !~ /^#/ } <F>; 
close F; 
print @test; 
```

但我强烈建议稍微重写一下以使用当前的最佳实践。

```
# Safety net
use strict;
use warnings;
# Lexical filehandle, three-arg open
open (my $fh, '<', 'test.txt') || die "Could not open test.txt: $!\n"; 
# Declare @test.
# Don't explicitly close filehandle (closed automatically as $fh goes out of scope)
my @test = grep { $_ !~ /^#/ } <$fh>; 
print @test; 
```

# cuda - 适用于 Linux 的硬件加速视频处理工具

> ID：11852084
> 
> 赞同：3
> 
> 时间：2012-08-07T18:40:29.430
> 
> 标签：cuda, ffmpeg, centos, opencl, nvidia

我正在寻找适用于 Linux 的命令行视频处理工具的选项，但我很难找到任何选项。据我所知，FFmpeg 不支持硬件加速，而且我没有看到很多替代方案。

将运行该软件的机器正在运行 CentOS，并且每台机器都有一个可用的 NVIDIA Tesla 卡。虽然 CentOS 可以与其他东西（不是 Windows）交换，但拥有支持 CUDA 或 OpenCL 的东西会很棒。

我对实际需要处理的内容没有任何严格的要求，但我只想看看这个硬件有哪些可用的选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T14:16:16.203

实际上，现在我研究了一下，ffmpeg 支持 VDPAU，这是使用 NVIDIA 卡对视频进行解码/编码的 API，但 ffmpeg 仅支持播放。

配置选项是自动检测的`--enable-vdpau`，因此不需要添加到`./configure`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-01T18:55:30.580

利用：`ffmpeg -i input.avi -c:v nvenc output.avi`

# bison - Flex 编译器错误：请求非结构或联合中的成员

> ID：11852086
> 
> 赞同：0
> 
> 时间：2012-08-07T18:40:30.283
> 
> 标签：bison, flex-lexer

我想同时使用 Flex 和 Bison。我已经在我将在词法分析器中使用的野牛定义文件中声明了一个联合。Bison 生成一个包含联合声明的 .tab.h 文件（见下文）。我在词法分析器定义中包含了这个 .tab.h 文件，但是词法分析器操作：

```
 yylval.stringptr = yytext; 
```

### 导致编译器错误：

```
lexer.l: In function ‘yylex’:
lexer.l:190: error: request for member ‘stringptr’ in something not a structure or union 
```

### 这是 .tab.h 文件的片段：

```
#if ! defined YYSTYPE && ! defined YYSTYPE_IS_DECLARED
typedef union YYSTYPE
{

/* Line 1676 of yacc.c  */
#line 9 "parser.y"

  char * s;
  char * stringptr;
  double d;
  int i;

/* Line 1676 of yacc.c  */
#line 126 "parser.tab.h"
} YYSTYPE;
# define YYSTYPE_IS_TRIVIAL 1
# define yystype YYSTYPE /* obsolescent; will be withdrawn */
# define YYSTYPE_IS_DECLARED 1
#endif

extern YYSTYPE yylval; 
```

### 为什么 yylval 不被识别为结构或联合？我应该如何纠正问题？

PS：我用 --bison-bridge 调用了 Flex

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T19:12:34.580

如果您使用`--bison-bridge`，则 flex 创建一个期望`yylval`作为参数而不是全局的扫描仪，并且该参数是 a`YYSTYPE *`而不是 a `YYSTYPE`。为了使其正常工作，您需要`%define api.pure`在野牛源文件（.y）中指定，因此它将使用额外的参数调用 yylex，而不是声明（并期望 yylex 使用）全局`yylval`

因此，您需要摆脱`--bison-bridge`参数（在 yylex 和 yyparse 之间使用正常的、默认的、不可重入的调用约定），或者您需要添加`%define api.pure`到 .y 文件，并更改您的 .l 代码以使用`yylval->`而不是`yylval.`到处。

# css - 是否可以缩放内容 without resizing the itself?

> ID：11852087
> 
> 赞同：1
> 
> 时间：2012-08-07T18:40:31.633
> 
> 标签：css, iframe, scale, css-transforms

I'm using media queries to scale an `<iframe>` based on screen resolution: the `iframe` and its contents get smaller, as the screen gets smaller. Now, this seems alright on paper, but for some reason, as the `iframe`'s size decreases, it clips part of the content. I've tried going to the source file, and using media queries there, in hopes that the `<iframe>` would also include those; to no effect. Is there any way to scale, or resize, the *contents* of an `<iframe>`, using CSS media queries, without resizing the `iframe` itself?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T03:38:25.220

没有办法在 iFrame 中设置任何内容的样式，因为它直接从其他地方提取内容，并且没有考虑您网站中的任何内容。

如果您只是想从页面中获取一些东西，那么您应该研究 PHP。

# perl - perl populating hash of hashes recursively

> ID：11852091
> 
> 赞同：-1
> 
> 时间：2012-08-07T18:40:41.593
> 
> 标签：perl, recursion, hash-of-hashes

I have a hash like this:

```
{ ABC => [1, 2],
     1 => [11, 12,13,14],
     13 => [17,20] } 
```

I want to generate a hash of hashes like this:

```
(ABC => { 1 => {11 => {},
                12 => {},
                13 => { 17 => {}
                        20 = {} },
                14 => {}
               },
          2 => {}
        }

) 
```

The above hash is nothing but a tree with a root node and further child nodes.

I understand we have to use recursion to check child nodes for every parent node. I have looked at the question previously asked [here](https://stackoverflow.com/questions/4558981/dynamically-recursively-building-hashes-in-perl). I am unable to understand how during recursion specific node's data is stored under its particular parent key. In other words how can hash of hashes be populated recursively ?

Appreciate any pointers or explanation.

Thanks for your time

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T19:00:49.797

真正的问题是你并不真正知道你想要什么。

```
 {ABC => 1 => 11 => {}
     => 1 => 12 => {}
     => 1 => 13 => 17 => {}
                => 20 = {}
     => 1 => 14 => {}
} 
```

只是一种非常奇怪的写作方式

```
{
   ABC => "1",
   11  => {},
   1   => "12",
   {}  => "1",
   13  => "17",
   {}  => "20",
   {}  => "1",
   14  => {},
} 
```

这是没有意义的。我想你实际上想要

```
{
   ABC => {
      1 => {
         11 => {},
         12 => {},
         13 => {
            17 => {},
            20 => {},
         },
         14 => {},
      },
   },
} 
```

既然您知道自己想要什么，就应该尝试实施它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T13:27:00.683

```
#!/usr/bin/env perl

use strict;
use warnings;
use Data::Dumper;

my %data = (
    ABC => [1, 2],
     1  => [11, 12, 13, 14],
     13 => [17, 20] 
);
my %hash;

sub modify_hash {
    my ($base, $ref) = @_;
    for my $k (keys %$ref) {
        if (exists $base->{$k}) {
            $ref->{$k} = $base->{$k};
            delete $base->{$k};
        }
        modify_hash($base, $ref->{$k});
    }
}

map { %{$hash{$_}} = map { $_ => {}; } @{$data{$_}}; } keys %data;
map { modify_hash(\%hash, $hash{$_}); } keys %hash;
print Dumper(\%hash); 
```

输出：

```
$VAR1 = {
          'ABC' => {
                     '1' => {
                              '11' => {},
                              '13' => {
                                        '17' => {},
                                        '20' => {}
                                      },
                              '12' => {},
                              '14' => {}
                            },
                     '2' => {}
                   }
        }; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T23:11:59.877

您可以使用我在此处定义的代码：[如何在 Perl 中将多个散列合并为一个散列？](https://stackoverflow.com/questions/2767477/how-can-i-merge-several-hashes-into-one-hash-in-perl/2768767#2768767)

如此定义`@hash_list`：

```
my @hash_list 
    = { map { ref() eq 'ARRAY' ? { map {; $_ => {} } @$_ } : $_ } 
        %{{ ABC => [1, 2]
          ,  1  => [11, 12,13,14]
          , 13  => [17,20] 
          }}
      }; 
```

# internet-explorer - 是否可以在 IE 中设计一个带有 css3 阴影 + 渐变 + 圆角的 div？

> ID：11852095
> 
> 赞同：0
> 
> 时间：2012-08-07T18:40:55.110
> 
> 标签：internet-explorer, css

我试图让我的 IE div 具有与其他浏览器相同的行为。我有这个CSS：

```
#featured .Reasons{
    height:auto;
    margin-top:40px;
    padding:35px;
    display:block;

    background-image: linear-gradient(left bottom, rgb(255,255,255) 15%, rgb(245,243,233) 48%, rgb(255,255,255) 79%);
    background-image: -o-linear-gradient(left bottom, rgb(255,255,255) 15%, rgb(245,243,233) 48%, rgb(255,255,255) 79%);
    background-image: -moz-linear-gradient(left bottom, rgb(255,255,255) 15%, rgb(245,243,233) 48%, rgb(255,255,255) 79%);
    background-image: -webkit-linear-gradient(left bottom, rgb(255,255,255) 15%, rgb(245,243,233) 48%, rgb(255,255,255) 79%);
    background-image: -ms-linear-gradient(left bottom, rgb(255,255,255) 15%, rgb(245,243,233) 48%, rgb(255,255,255) 79%);

    background-image: -webkit-gradient(
        linear,
        left bottom,
        right top,
        color-stop(0.15, rgb(255,255,255)),
        color-stop(0.48, rgb(245,243,233)),
        color-stop(0.79, rgb(255,255,255))
    );

    -webkit-box-shadow: 0px 1px 5px 0px #4a4a4a;
    -moz-box-shadow: 0px 1px 5px 0px #4a4a4a;
    box-shadow: 0px 1px 5px 0px #4a4a4a;

    -webkit-border-radius: 16px;
    -moz-border-radius: 16px;
    border-radius: 16px;
} 
```

它适用于除 IE 以外的所有浏览器。我知道 IE 在设计方面有点特别（嗯，让我们说烦人），但我该如何解决呢？你可以在这里看到它：[stringtheori.es](https://stringtheori.es) 谢谢 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T18:45:53.540

Internet Explorer 不支持 CSS3，但您可以使用一些 JavaScript 工具来模拟它的工作，例如

*   [http://css3pie.com/](http://css3pie.com/)
*   [http://www.fetchak.com/ie-css3/](http://www.fetchak.com/ie-css3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T19:08:03.683

我以前用过 css3Pie，它很好。但请务必阅读已知问题，以便您可以就是否认为可以使用它做出正确的决定。

[http://css3pie.com/about/](http://css3pie.com/about/)

# ruby-on-rails - Nested forms and accepts_nested_attributes_for

> ID：11852097
> 
> 赞同：0
> 
> 时间：2012-08-07T18:41:02.677
> 
> 标签：ruby-on-rails, ruby

I am trying to understand how to make a nested form of my models but I am struggeling with understanding how and what I need to do it. I have been reading the Rails documentation and looked at the railscast but they just mention the `accepts_nested_attributes_for` method etc without explaining. Can someone please help?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T19:19:33.497

根据 Rails 的 API，据说：

**嵌套属性允许您通过父级将属性保存在关联记录上...**

**示例：**它展示了我们如何通过 Member 管理帖子，**fields_for**用于管理表单中的关联字段，将关联模型的名称传递给它，然后遍历所有关联的帖子记录并为每个记录创建一个表单构建器.

```
#controller
def new
  @member = Member.new
end

#model
class Post < ActiveRecord::Base
  belongs_to :member
end

class Member < ActiveRecord::Base
  has_many :posts
  accepts_nested_attributes_for :posts
end

#form
<%= form_for @member do |f| %>
  <%= f.error_messages %>
  <p>
    <%= f.label :name %><br />
    <%= f.text_field :name %>
  </p>
  <%= f.fields_for :posts do |builder| %>
  <p>
    <%= builder.label :account %><br />
    <%= builder.text_area :account %>
  </p>
  <% end %>
  <p><%= f.submit "Submit" %></p>
<% end %> 
```

Rails API：[http ://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)

# vbscript - 使用vb脚本将参数解析为批处理文件

> ID：11852102
> 
> 赞同：0
> 
> 时间：2012-08-07T18:41:31.383
> 
> 标签：vbscript, batch-file

我有一个代码，通过它我可以将地址解析为批处理脚本，它工作正常，但问题是如果我的路径是这样的，`C:\Documents and Settings\himanshu.jain\Desktop\example`那么 .bat 文件只能读取到`C:\Documents`任何人都可以告诉我应该是什么问题。这是我的代码

VB脚本代码

```
variable1="C:\Documents and Settings\himanshu.jain\Desktop\example"
objWshell.run "batchfile.bat "& variable1 
```

批处理脚本代码

```
set SOURCE=%1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T18:46:30.343

使用文字引号。

```
variable1="""C:\Documents and Settings\himanshu.jain\Desktop\example""" 
```

双双引号转换为文字双引号。

# php - MAMP 与 MySQL 自然驱动程序

> ID：11852103
> 
> 赞同：5
> 
> 时间：2012-08-07T18:41:32.177
> 
> 标签：php, mamp, mysqlnd

所以我一直在与 MAMP 合作，在我的计算机上本地开发一个站点，但真正困扰我的一件事是 MAMP 没有附带 MySQL Natural Driver for PHP。所以我不能使用可爱的`get_result()`功能。我什至尝试使用驱动程序手动编译 PHP，但很快就火了。如果无法使用 mysqlnd 设置 MAMP，那么有人可以解释获得它的最佳方法是什么？运行 Mac OS X 10.7 Lion。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-04T00:54:16.080

Vagrant 很可能是解决 PHP、MySQL 等冲突问题的最佳解决方案。虽然许多人在配置自己的虚拟机方面胆怯，但您可以使用如下所示的预配置框：

[http://laravel.com/docs/homestead](http://laravel.com/docs/homestead)

这使您可以快速启动和运行，并根据您的喜好修改 MySQL。

# validation - 使用 REST 代理访问 Ext.data.Model.save() 回调中的 HTTP 响应

> ID：11852104
> 
> 赞同：3
> 
> 时间：2012-08-07T18:41:40.830
> 
> 标签：validation, rest, extjs, extjs4.1

我成功实现了客户端编辑器和服务器端 API。

现在我在服务器端添加更多验证，除了返回正确的 HTTP 代码（200 表示 OK，4xx 表示其他用途，500 表示错误等）之外，我还想返回提交生成后失败的验证列表通过 Model.save()。

我这样运行它：

```
myModel.save({
  success: function (a, operation, c) {...},
  failure: function (a, operation, c) {...}
}); 
```

但是如果失败了，操作对象只有响应状态和它的statusText，全部通过

```
operation.error.status // i.e. 409
operation.error.statusText // "Conflict" 
```

但是服务器端正在将失败验证的详细信息（主要是域级别的验证）添加到响应中。

有没有一种方法可以获得服务器发送的作为 HTTP 响应的主体对 PUT/POST 提交的内容？

我是否必须使用特定的 JSON 结构返回它？

编辑：我现在将其作为 HTTP 响应的主体返回（代码为 4xx）：

```
{
 data: {/* the record serialized */},
 success: false, // or true if everything went ok
 message: "This failed because X and Y."
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T20:39:51.743

出于某种原因，Ext 没有将响应内容附加到错误对象，但`exception`如果出现故障，它会触发一个事件。

所以我们所做的是处理 `"exception"`模型代理的事件，然后我们将可以访问 XHR 响应，能够用它做任何我们想做的事情。

```
myModel.getProxy().on('exception', this.onProxyException, this); 
```

处理程序如下：

```
onProxyException : function (proxy, response, operation) {
    var errors;
    errors = Ext.JSON.decode(response.responseText).message;
    /* Whatever is needed with the errors */
} 
```

在这个例子中，我们假设错误以 JSON 格式出现，它们可能是一个简单的文本字符串，不需要使用`decode()`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-16T01:48:08.780

根据这个博客： [http ://code.tonytuan.org/2013/07/extjs-get-server-response-in-modelsave.html](http://code.tonytuan.org/2013/07/extjs-get-server-response-in-modelsave.html)

您可以编写如下代码：

```
model.save({
    success: function (record, operation) {
    // json response from server         
    console.log(operation.response);                  
    },
    failure: function (record, operation) {
        // undefined
        console.log(operation.response); 
        // json response from server
        console.log(operation.request.scope.reader.jsonData);
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-14T11:49:53.853

1.  在阅读器块中添加：`messageProperty: 'message'`
2.  从服务器返回：`success:false, message: 'error test'`
3.  从`failure`得到错误：

    ```
    failure: function (records, operation) {
        Ext.Msg.alert('error', operation.error);
    } 
    ```

# android - 创建动态 ListPreference (Android)

> ID：11852106
> 
> 赞同：3
> 
> 时间：2012-08-07T18:41:48.150
> 
> 标签：android, arrays, sqlite, settings, preference

我想在我的设置中创建一个*ListPreference*，其中填充了存储在我的 SQLite 数据库中的不同“年份”。多年来，我一直在添加它，但是如果它们不止一个，它会不止一次地添加它们。我不知道如何让每个只出现一次（例如 2012,2011,2010。而不是 2012,2012,2012,2011,2010,2010）。这是我的代码：

```
ListPreference listPreferenceCategory = (ListPreference) findPreference("Filter");

    entries = new ArrayList<String>();
    values = new ArrayList<String>();     

    mySQLiteAdapter = new SQLiteAdapter(this);

    mySQLiteAdapter.openToWrite();

    cursor = mySQLiteAdapter.queueAll6();
    cursor.moveToFirst();

    for(int i = 0; i < cursor.getCount();i++)
    {

        String year = cursor.getString(cursor.getColumnIndex(SQLiteAdapter.YEAR));

    if(Arrays.asList(entries).contains(year) == false){

        entries.add(year);

        values.add(year);
    }

    cursor.moveToNext();

    }

    final CharSequence[] charSequenceItems = entries.toArray(new CharSequence[entries.size()]);
    final CharSequence[] charSequenceItems2 = values.toArray(new CharSequence[values.size()]);

        listPreferenceCategory.setEntries(charSequenceItems);
        listPreferenceCategory.setEntryValues(charSequenceItems2);

    mySQLiteAdapter.close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T07:03:08.583

弄清楚了。我需要使用 String[] array = entries.toArray(new String[entries.size()]); 然后 Arrays.asList(array).contains(year) == false

# jquery - Jquery 与 Tampermonkey

> ID：11852109
> 
> 赞同：4
> 
> 时间：2012-08-07T18:42:08.147
> 
> 标签：jquery, greasemonkey, tampermonkey

所以我的控制台给了我这个消息 -

```
 The page at https://en.wikibooks.org/wiki/Vehicle_Identification_Numbers_(VIN_codes)/GM/VIN_Codes ran insecure content from http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js.
jquerified: true
ERROR: Execution of script 'GMVinCodeScraper' failed! $ is not defined
ReferenceError: $ is not defined
    at getGMCodes (eval at <anonymous> (eval at eventHandler (eval at <anonymous> (chrome-extension://dhdgffkkebhmkfjojejmpbldmpobfkfo/content.js:57:21))))
    at Function.eval (eval at <anonymous> (eval at eventHandler (eval at <anonymous> (chrome-extension://dhdgffkkebhmkfjojejmpbldmpobfkfo/content.js:57:21))))
    at N (eval at eventHandler (eval at <anonymous> (chrome-extension://dhdgffkkebhmkfjojejmpbldmpobfkfo/content.js:57:21)))
    at l (eval at eventHandler (eval at <anonymous> (chrome-extension://dhdgffkkebhmkfjojejmpbldmpobfkfo/content.js:57:21)))
    at chromeEmu.extension.onRequest.addListener.Z (eval at eventHandler (eval at <anonymous> (chrome-extension://dhdgffkkebhmkfjojejmpbldmpobfkfo/content.js:57:21)))
    at W (eval at eventHandler (eval at <anonymous> (chrome-extension://dhdgffkkebhmkfjojejmpbldmpobfkfo/content.js:57:21))) 
```

在我的用户脚本中，我正在运行一个自动在页面上包含 jquery 的函数，并且似乎 jquery 已加载，因为我可以看到带有 jquery url 作为 src 属性的脚本标记。

作为参考，功能在这里 -

```
function jquerify(jquerified){
if(!(window.JQuery && window.Jquery.fn.jquery == '1')){
    var s = document.createElement('script');
    s.setAttribute('src','http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js');
    s.setAttribute('type','text/javascript');
    document.getElementsByTagName('head')[0].appendChild(s);
    jquerified = true;
    console.log("jquerified: " + jquerified);
    return jquerified; 
}
}
jquerify(false); 
```

所以，不知道为什么 $ 不会被定义。知道为什么吗？

更新-

使用@require 解决了这个问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-07T19:02:31.460

您可以通过使用 @require url 来解决这个问题

```
// @require https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-04-26T04:51:55.030

将此添加到您的脚本标题中。

```
// @require https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js 
```

然后您可以使用`$()`.

# xcode - 动态链接错误 - Xcode 4

> ID：11852112
> 
> 赞同：1
> 
> 时间：2012-08-07T18:42:14.123
> 
> 标签：xcode, runtime-error, dynamic-linking, dylib

我正在尝试通过*libBox.2.1.0.dylib*文件将 Box2D C++ 库链接到我的 Xcode 4.4 项目。这是我所做的：

1.  转到“目标”，选择我的应用程序，并将我的*.dylib*文件添加到“使用库链接二进制文件”部分
2.  创建了一个新的“复制文件”构建阶段并将其设置为“可执行文件”（因此*.dylib文件就在**.app*包中的内部可执行文件旁边）
3.  成功编译我的项目，没有任何错误
4.  跑项目并得到以下运行时错误：

    `dyld: Library not loaded: libBox2D.2.1.0.dylib`

    `Referenced from: /Users/****/Documents/Xcode Projects/ProjectName/DerivedData/ProjectName/Build/Products/Debug/ProjectName.app/Contents/MacOS/ProjectName`

    `Reason: image not found`

[我按照此处链接](http://www.vislab.net/people/john-stavrakakis/johns-blog/xcodehowtolinkdyliblibraryfiles)中的所有步骤操作，但由于某种原因，我仍然收到运行时错误。我在我的设置中遗漏了一些重要的东西吗？

# css - 为什么我的表单文本字段中的文本是灰色的？

> ID：11852113
> 
> 赞同：0
> 
> 时间：2012-08-07T18:42:14.643
> 
> 标签：css, ruby-on-rails, twitter-bootstrap

我正在编写一个 Rails 应用程序，在我的一个观点中，我有一个注册表单。我正在使用引导主题，并且在文本字段中，当输入某些内容时，它是灰色的并且难以阅读。没有主题，文本是黑色的，看起来很好。

我尝试在主题的 textarea 类中编辑颜色，但没有奏效。

我需要更改什么才能使文本变为不同的颜色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T19:01:27.180

您需要将 css 样式应用于文本字段以使文本变黑。尝试类似...

`input { color:black; }`

将该代码放在 assets/css 目录中的 css 文件中。确保在引导后加载此 css，以便它覆盖它。我发现 Google Chrome 的检查器工具可以方便地查看正在应用的样式。

# google-earth-plugin - 将网络链接添加到谷歌地球失败

> ID：11852114
> 
> 赞同：0
> 
> 时间：2012-08-07T18:42:17.027
> 
> 标签：google-earth-plugin

当有人单击已通过 KML 加载的地标时，我正在尝试添加网络链接。我所做的是将事件处理程序附加到地球并检查用户是否单击了地标。

在 html 上，有一个按钮，点击后会从 google earth 中删除网络链接（请参阅 trackRemoval）。第一次单击地标时，一切似乎都正常。

问题是当第二次单击地标时（删除网络链接后），对 createNetworkLink 的调用失败。附件是相关的代码片段。

有人可以看到我做错了什么吗？

```
var ge = new Array(2);

function clickHandler(event) {
    if (event.getTarget().getType() == 'KmlPlacemark') {
        event.preventDefault();
        var placemark = event.getTarget();
        var device = placemark.getName();
        var networkLink = ge[0].createNetworkLink(device + "link");
        var link = ge[0].createLink("");
        networkLink.setDescription("Vechicle view for" + device);
        networkLink.setName("Track for " + device);
        networkLink.setFlyToView(true);
        link.setHref("http://x.x.x.x/blah/blah.kml");
        link.setRefreshMode(ge[0].REFRESH_ON_INTERVAL);
        link.setRefreshInterval(60);
        networkLink.setLink(link);
        ge[0].getGlobe().getFeatures().appendChild(networkLink);
    }
}

function initgeaor(instance) {
    google.earth.addEventListener(instance.getGlobe(), 'click', clickHandler);
}

function trackRemoval() {
    var device = this.name;
    var networklink = ge[0].getElementById(device + "link");
    ge[0].getGlobe().getFeatures().removeChild(networklink);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-19T16:56:36.320

请参阅[https://developers.google.com/earth/documentation/reference/interface_kml_object](https://developers.google.com/earth/documentation/reference/interface_kml_object)

见方法说明`release()`。根据我的经验，这个“不确定的时间”很难衡量。因此，如果您从 GE 删除一个对象，然后尝试添加另一个具有相同 id 的对象，GE 会抱怨并且不会创建该对象 - 除非该“不确定的时间量”已经过去。

您可以在您`removeChild()`和`release()`网络链接之后使用计时器。

您还可以在每次创建新的 KmlNetworkLink 时为其赋予不同的 id，这样就不会发生冲突。我不确定这是否适合您。`var networkLink = ge[0].createNetworkLink(device + "link" + **idNumber**);`

# linux - 从头开始构建 linux 时出现 glibc 错误

> ID：11852123
> 
> 赞同：7
> 
> 时间：2012-08-07T18:42:37.733
> 
> 标签：linux, makefile, glibc

当我为 LFS 7.1 “制作” glibc-2.14.1 时出现以下错误。我使用 ubuntu 作为主机操作系统。

```
gcc ../sysdeps/unix/sysv/linux/syslog.c -c -std=gnu99 -fgnu89-inline -O2 -Wall -Winline 
-Wwrite-strings -fmerge-all-constants -g -Wstrict-prototypes -mpreferred-stack-
boundary=2  -Wa,-mtune=i686 -fexceptions   -I../include -I/mnt/lfs/sources/glibc-
build/misc -I/mnt/lfs/sources/glibc-build -I../sysdeps/i386/elf -
I../nptl/sysdeps/unix/sysv/linux/i386/i686 -I../sysdeps/unix/sysv/linux/i386/i686 -
I../nptl/sysdeps/unix/sysv/linux/i386 -I../sysdeps/unix/sysv/linux/i386 -
I../nptl/sysdeps/unix/sysv/linux -I../nptl/sysdeps/pthread -I../sysdeps/pthread -
I../sysdeps/unix/sysv/linux -I../sysdeps/gnu -I../sysdeps/unix/common -
I../sysdeps/unix/mman -I../sysdeps/unix/inet -I../sysdeps/unix/sysv/i386 -
I../nptl/sysdeps/unix/sysv -I../sysdeps/unix/sysv -I../sysdeps/unix/i386 -
I../nptl/sysdeps/unix -I../sysdeps/unix -I../sysdeps/posix -I../sysdeps/i386/i686/fpu -
I../sysdeps/i386/i686/multiarch -I../nptl/sysdeps/i386/i686 -I../sysdeps/i386/i686 -
I../sysdeps/i386/i486 -I../nptl/sysdeps/i386/i486 -I../sysdeps/i386/fpu -
I../nptl/sysdeps/i386 -I../sysdeps/i386 -I../sysdeps/wordsize-32 -
I../sysdeps/ieee754/ldbl-96 -I../sysdeps/ieee754/dbl-64 -I../sysdeps/ieee754/flt-32 -
I../sysdeps/ieee754 -I../sysdeps/generic/elf -I../sysdeps/generic -I../nptl  -I.. -
I../libio -I. -nostdinc -isystem /usr/lib/gcc/i686-linux-gnu/4.6/include -isystem 
/usr/lib/gcc/i686-linux-gnu/4.6/include-fixed -isystem /tools/include -D_LIBC_REENTRANT 
-include ../include/libc-symbols.h       -o /mnt/lfs/sources/glibc-build/misc/syslog.o 
-MD -MP -MF /mnt/lfs/sources/glibc-build/misc/syslog.o.dt -MT /mnt/lfs/sources/glibc-
build/misc/syslog.o 
In file included from ../sysdeps/unix/sysv/linux/syslog.c:10:0:
../misc/syslog.c: In function '__vsyslog_chk':
../misc/syslog.c:144:9: warning: variable 'prioff' set but not used [-Wunused-but-set-  
variable]
../misc/syslog.c:123:1: sorry, unimplemented: inlining failed in call to 'syslog':   
 function body not available
../misc/syslog.c:155:9: sorry, unimplemented: called from here
make[2]: *** [/mnt/lfs/sources/glibc-build/misc/syslog.o] Error 1
make[2]: Leaving directory `/mnt/lfs/sources/glibc-2.14.1/misc'
make[1]: *** [misc/subdir_lib] Error 2
make[1]: Leaving directory `/mnt/lfs/sources/glibc-2.14.1'
make: *** [all] Error 2 
```

谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-03-03T16:26:15.897

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-02T16:03:20.680

制作失败后，以下内容对我有用：

```
make clean
make -j2 CFLAGS="-U_FORTIFY_SOURCE -O2 -fno-stack-protector" 
```

请参阅此博客[http://www.yonch.com/tech/78-compiling-glibc](http://www.yonch.com/tech/78-compiling-glibc)中的详细信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-15T00:56:35.320

@avinash - 尝试以下...

1) 重新运行 configure ... CFLAGS="-O2 -U_FORTIFY_SOURCE" ./configure
2) 重新运行 make ... CFLAGS="-O2 -U_FORTIFY_SOURCE" make

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T18:48:20.593

[glibc 构建问题，内联失败](http://plash.beasts.org/wiki/GlibcBuildIssues#head-b9149fbab065967691cf1bade23d84325c05e9b0)

> 需要将 -U_FORTIFY_SOURCE 添加到 gcc 调用中。

# node.js - 猫鼬.update({$in}

> ID：11852127
> 
> 赞同：0
> 
> 时间：2012-08-07T18:42:57.853
> 
> 标签：node.js, mongoose

最近我在使用 mongoose.someModel.find({$in}) [https://stackoverflow.com/questions/11839765/whats-wrong-with-in-in-mongoose](https://stackoverflow.com/questions/11839765/whats-wrong-with-in-in-mongoose/ "look here for details...")时询问了**$in "**

重新启动节点几次后，它可以像原来一样正常工作。但现在我发现了下一个

```
dbQueries.update({_id: {$in: req.body.data}, authorId: req.user._id}, {deleted: true}, function onUpdate(err){
            if(err) {
                console.log(err);
                res.json({epicFail: 'ERR_RestrictedAccess'});
                return; 
            }
            res.json({});
        }); 
```

我发现它只更新第一个找到的文件！怎么了？我使用最后一个节点版本和最后一个 mongoose 2。此外，它与 mongo-native 一起正常工作！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T01:28:14.340

我认为，您需要在查询中添加[“多”选项](http://mongoosejs.com/docs/api.html#model_Model-update)。

```
dbQueries.update({_id: {$in: req.body.data}, authorId: req.user._id}, {deleted: true}, { multi: true }, function onUpdate(err){
    if(err) {
        console.log(err);
        res.json({epicFail: 'ERR_RestrictedAccess'});
        return; 
    }
    res.json({});
}); 
```

# php - 区分相同的选择名称

> ID：11852133
> 
> 赞同：-3
> 
> 时间：2012-08-07T18:43:26.793
> 
> 标签：php, javascript, html

如何区分“f1”和“f2”的“选择名称”目前都命名为“subcat”，同时仍然只有 1 个 subcat 变量？此代码仅在 cat value=2 时才能正常工作，如果 cat value=1 则 subcat value 始终 =0

```
<?php    
$cat=$_POST['cat'];
$subcat = $_POST['subcat'];
?>
<form action='submitsite.php' method='POST'>
    <table>
        <tr>
            <td>category(optional)</td>
            <td>
                <select name='cat' id = "opts" onchange = "showForm()">
                    <option value = "0">Select</option>
                    <option value = "1">music </option>
                    <option value = "2">film </option>
                </select> 
                <div id = "f1" style="display:none">
                    <select name='subcat' id = "opts" onchange = "showForm()">
                        <option value = "0">Select</option>
                        <option value = "3">pop</option>
                        <option value = "4">rock </option>
                    </select>
                </div>
                <div id = "f2" style="display:none">
                    <select name='subcat' id = "opts" onchange = "showForm()">
                        <option value = "0">Select</option>
                        <option value = "5">comedy</option>
                        <option value = "6">drama</option>
                    </select>
                </div>
    </form>
</div>

<script type = "text/javascript">
    function showForm(){
        var selopt = document.getElementById("opts").value;

        if (selopt == 1) {
            document.getElementById("f1").style.display="block";
            document.getElementById("f2").style.display="none";
        }
        if (selopt == 2) {
            document.getElementById("f2").style.display="block";
            document.getElementById("f1").style.display="none";
        } 
    }
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T18:48:36.697

添加`[]`到名称。提交时，选择将被解释为数组。

```
<select name="subcat[]">...</select> 
```

使用 PHP 可以`POST`像这样访问（如果 ed）：

```
<?php

    $subCatArr = $_POST['subcat'];

    $firstIndex = $subCatArr[0];
    $secondIndex = $subCatArr[1]; 
```

哦，是的，在 HTML 中重用 ID 是无效的。它们必须是***唯一的***。

**更新**在更好地理解了 OP 的意图之后：

如果我理解这个意大利面条代码的意图（这是一个爱的术语，OP），用户可以选择一个类别和一个子类别，这是基于他/她选择的类别。然后用户提交表单并且该选择被记录在数据库中。

首先，让我们摆脱`table`元素的使用，因为它们是不必要的。其次，`select`子类别只需要一个。

```
<form action='submitsite.php' method='POST'>
    <label>category(optional)</label>
    <select name='cat' id = "opts" onchange = "showForm()">
        <option value = "0">Select</option>
        <option value = "1">music </option>
        <option value = "2">film </option>
    </select> 
    <div id="subcatDiv" style="display:none;">
        <select name='subcat' id='opts'></select>
    </div>
    .
    .
    .
    <input type='submit' />
</form> 
```

我们可以将其留空，因为无论如何它都不会显示。

现在，当用户进行更改时，我们将显示适当的子类别，或者我们将`div`再次隐藏：

```
<script type = "text/javascript">
    function showForm(){
        var selopt = document.getElementById("opts");
        var seloptVal = selOpt.value;
        var subcatDiv = document.getElementById("subcatDiv");

        var options = "";
        switch(seloptVal * 1) {
            case 1:
                options = "<option value='0'>Select</option>" + 
                    "<option value='3'>pop</option>" + 
                    "<option value='4'>rock</option>";
                break;
            case 2:
                options = "<option value='0'>Select</option>" + 
                    "<option value='5'>comedy</option>" + 
                    "<option value='6'>drama</option>";
                break;
            default:
                break;
        }

        if (options == "") {
            subcatDiv.style.display = "none";
            selopt.innerHTML = options;
        } else {
            selopt.innerHTML = options;
            subcatDiv.style.display = "block";
        }
    }
</script> 
```

现在您只需要为子类别处理一个`select`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T19:09:01.307

我已经更改了很多代码以使其成为有效的 html，并且也可以按照我“认为”的方式工作，因为您的问题并没有说得很清楚。

这是我必须做出的修正清单：

1.  更改了 ID 以明确它们的用途。
2.  删除了重复的 ID。
3.  正确关闭你的桌子。
4.  完全改变你的 JavaScript 来显示和隐藏某些选择的
5.  还有很多事情我已经忘记了。

请看这个[jsfiddle](http://jsfiddle.net/g9Y4a/2/)。

固定的html：

```
<form action='submitsite.php' method='POST'>
  <table>
    <tr>
      <td>category(optional)</td>
      <td>
         <select name="cat" id="selectType">
           <option value="0">Select</option>
           <option value="1">music</option>
           <option value="2">film</option>
         </select> 

         <div id="f1" style="display:none">
           <select name='music' id="selectMusic">
             <option value="0">Select</option>
             <option value="3">pop</option>
             <option value="4">rock</option>
           </select>
         </div>

         <div id="f2" style="display:none">
           <select name="type" id="selectFilm">
             <option value="0">Select</option>
             <option value="5">comedy</option>
             <option value="6">drama</option>
           </select>
         </div>
       </td>
     </tr>
   </table>      
 </form> 
```

固定的 JavaScript：

```
$("#selectType").change(function() {

  var selected = $(this).val();
  $("#f1, #f2").hide();

  switch (selected) {
    case "1":
      $("#f1").show();
      break;

    case "2":
      $("#f2").show();
      break;           
  }            
});​​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T18:46:59.677

`document.forms[0].subcat`将是一个数组。

`document.forms[0].subcat[0]`将是第一个实例，等等。

ps ID 应该是唯一的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T18:49:11.300

```
document.getElementById('f2').getElementsByTagName('select')[0] 
```

顺便说一句，您通过重复使用 ID 违反了 HTML 标准。

# ios - IOS 5.1.1 - 使用 SSH 删除文档和数据

> ID：11852144
> 
> 赞同：-1
> 
> 时间：2012-08-07T18:44:26.227
> 
> 标签：ios, ios5, ssh, jailbreak

我有一台装有 iOS 5.1.1 的越狱 iPod touch 4g。如果您转到设置 --> 使用 ---> 应用程序，它会向您显示应用程序实际使用了多少文件和数据。我想使用 SSH 手动删除所有文档和数据。但首先我必须知道文档和数据的存储位置和方式。任何想法位置在哪里，我必须删除什么等？我想将应用程序重置为默认值。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T19:28:45.377

应用程序存储在 var/mobile/applications/ 中。这些文件夹只是随机字符串，但由于您只想删除所有这些文件，您可以进入每个文件夹并删除文档文件夹中的数据。

# android - 将 C 代码中的整数或字节输出到 LogCat

> ID：11852148
> 
> 赞同：2
> 
> 时间：2012-08-07T18:44:48.767
> 
> 标签：android, android-ndk, java-native-interface, type-conversion

我试图在我的代码中添加打印语句以查找错误，但似乎无法获取整数或字节或 jints 或除字符串以外的任何其他内容以在 LogCat 中显示。

```
#define LOG_INFO( info ) __android_log_print( ANDROID_LOG_WARN, "NATIVE CODE", info );

LOG_INFO( "c = " + c ); 
```

结果只是

```
c = 
```

有谁知道我做错了什么，或者这是否可能？我尝试过 jints、ints、chars、jchars 和 bytes（作为 的类型`c`）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T18:58:52.740

语言是 C。C 没有字符串的内置类型。字符串实际上是数组`char`或指向`char`. 您既不能添加数组也不能添加指针。`+`因此，运算符或任何其他运算符都没有字符串连接。C++ 是不同的，但我们现在不要去那里。

__android_log_print() 的工作方式类似于 Java 的 String.format()。要将字符输出到 LogCat，请使用以下调用：

```
__android_log_print(ANDROID_LOG_WARN, "NATIVE CODE", "c=%c", (char)c); 
```

如果你想输出几个变量 - 比如一个 char 和一个 int，调用将是：

```
int n;
__android_log_print(ANDROID_LOG_WARN, "NATIVE CODE", "c=%c, n=%d", (char)c, n); 
```

`__android_log_print`是一个可变参数函数 - 它接受可变数量的参数（但不少于三个），前三个之外的未知类型。额外参数的类型是从格式字符串中的格式说明符推导出来的 - %-sequences。%c 表示 char，%d 表示 int，%s 表示 char 字符串等等，查一下。

这是`printf`整个 C 世界中使用的模式。它不容易进行宏化，除非您愿意引入单独的宏来输出 0、1、2 等参数。这样，它可能看起来像这样：

```
#define LOG_INFO0( info ) __android_log_print( ANDROID_LOG_WARN, "NATIVE CODE", info );
#define LOG_INFO1( info, p1 ) __android_log_print( ANDROID_LOG_WARN, "NATIVE CODE", info, p1 );
#define LOG_INFO2( info, p1, p2 ) __android_log_print( ANDROID_LOG_WARN, "NATIVE CODE", info, p1, p2 );

//...
LOG_INFO("c=%c", (char)c); 
```

我在这里刻意避免字符类型转换的棘手问题；对于 %c 格式说明符，该函数需要一个`char`与`jchar`. 对于非 ASCII 字符的 jchar，此代码段将打印垃圾。

仅供参考：Java 类型和 C 类型之间的对应关系并不简单，实际上它有点依赖于平台。出于打印的目的，您需要仔细观察。所以：

*   `jchar`不是字符；它是`unsigned short`。缩短到`char`丢失数据。
*   `jlong`不是`long`，它是`long long`（64 位整数）
*   `jboolean`是有符号字符（`boolean`C 中没有数据类型）
*   `jbyte`是有符号字符（`byte`C 中没有数据类型）
*   `jint`是`int`（在 Android 上）
*   `jfloat`是`float`
*   `jshort`是`short`
*   `jdouble`是`double`

# mysql - 复杂的mysql行与innodb数据库合并

> ID：11852150
> 
> 赞同：0
> 
> 时间：2012-08-07T18:44:52.030
> 
> 标签：mysql, merge, innodb, rows

[这是对这篇文章](https://stackoverflow.com/questions/11851408/how-can-i-merge-2-rows-in-an-innodb-table)的跟进。请先阅读。

我手头有一个复杂的情况，我不知道如何处理它。基本上，我有三个需要合并数据的表。

实体

```
entity_id    entity_cat    common_name
--------------------------------------
abcdefg      customer      John Doe
hijklmn      customer      Jon Doe 
```

工作

```
job_nbr    customer_entity_id    address_nbr
--------------------------------------------
1          abcdefg               1
2          hijklmn               1 
```

地址

```
entity_id    address_nbr    ...
-------------------------------
abcdefg      1              etc
hijklmn      1              etc 
```

不知何故，我需要合并这两个实体。我将摆脱“hijklmn”，但保留所有数据。我正在更新工作，直到我找到地址。Addresses 有两个主键（entity_id 和 address_nbr）。我需要合并您在地址表中看到的第二行，如下所示：

```
entity_id    address_nbr    ...
-------------------------------
abcdefg      1              etc
abcdefg      2              etc 
```

然后我需要将作业更新为如下所示：

```
job_nbr    customer_entity_id    address_nbr
--------------------------------------------
1          abcdefg               1
2          abcdefg               2 
```

我知道理论上我会怎么做，但我不知道如何在 sql 中进行交流，也不知道在哪里寻找答案。

# c++ - c++ 中的静态与成员函数是否存在开销

> ID：11852153
> 
> 赞同：6
> 
> 时间：2012-08-07T18:45:05.787
> 
> 标签：c++, static

在 C++ 类中，使用静态函数而不是成员函数是否有任何开销。

```
class CExample
{
    public: 
        int foo( int a, int b) {
            return a + b ; 
        }
        static int bar( int a, int b) {
            return a + b ; 
        } 
}; 
```

我的问题是；

*   在这个例子中是 foo() 还是 bar() 更有效？
*   为什么我不想将 foo() 放入静态函数，因为它不会改变任何成员变量？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-07T18:48:29.847

> 在这个例子中是 foo() 还是 bar() 更有效？

不，这两个调用都是静态解决的。`this`将指针传递给非函数可能会有一些开销`static`，但在这种情况下，两者都可能被内联。

> 为什么我不想将 foo() 放入静态函数，因为它不会改变任何成员变量？

你不会，让所有方法不绑定到一个实例实际上是一个好习惯`static`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-07T18:58:43.380

此答案重点解决您的问题的第二部分，
引自 C++ 编码标准：101 条规则、指南和最佳实践：

> 第 44 章。更喜欢编写非成员非友元函数
> [...] 非成员非友元函数通过最小化依赖关系来改进封装 [...]

Scott Meyers 提出了以下算法，用于确定哪些方法应该是类的成员（[来源](http://www.drdobbs.com/how-non-member-functions-improve-encapsu/184401197)）

```
if (f needs to be virtual)
   make f a member function of C;
else if (f is operator>> or operator<<)
   {
   make f a non-member function;
   if (f needs access to non-public members of C)
      make f a friend of C;
   }
else if (f needs type conversions on its left-most argument)
   {
   make f a non-member function;
   if (f needs access to non-public members of C)
      make f a friend of C;
   }
else if (f can be implemented via C's public interface)
   make f a non-member function;
else
   make f a member function of C; 
```

至于你问题的前半部分，我猜编译器会优化任何差异。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T18:49:15.930

bar 在某些编译器/情况下的开销可能较小，因为它永远不需要放在指针表中，也不需要额外的“this”参数。

如果 foo 不使用本地成员，则使 foo 成为非静态的唯一原因是您打算重载它，但由于它不是虚拟的，因此不会起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T18:49:09.303

可能没有区别，因为这两个函数都不会访问数据成员，而且您也不是从任何虚拟的东西中派生出来的。

但在一般情况下，“bar”会无限快，因为“foo”作为成员函数通常必须传递并使用附加参数 - “this”

# objective-c - 使用 UIButton 在不同的视图控制器之间跳转？

> ID：11852159
> 
> 赞同：-1
> 
> 时间：2012-08-07T18:45:25.827
> 
> 标签：objective-c, xcode

我有一个按钮，单击时会打开另一个**viewController`(familyView)`**。还有`familyView`另一个按钮可以让我回到**`mainViewController(ViewController.xib)`**但我不知道如何调用主视图控制器。

我的调用方法`familyView`

```
UIViewController* familyView = [[UIViewController alloc] initWithNibName:@"familyView" bundle:[NSBundle mainBundle]];
[self.view addSubview:familyView.view]; 
```

我希望你能帮助如何调用 main `ViewController`？我必须使用相同的方法来调用它吗？像这样我的意思是：

```
UIViewController* mainView = [[UIViewController alloc] initWithNibName:@"viewController" bundle:[NSBundle mainBundle]];
[self.view addSubview:mainView.view]; 
```

如果是，是否有更好的方法来实现这一点？在我的演示项目中，我试图让 7 个视图充满数据和一个按钮来回。

编辑：如果我使用 UIView 对我来说最好，而不是使用不同的 viewControllers 和它们的实现和接口文件？我的项目将有视图，每个视图都有从不同的 html 页面解析的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T20:02:31.267

有两种方法可以使用。

1.  UINavigationController
2.  代表们

从您的问题来看， UINavigationController 似乎是最好的选择，但我会向您展示两者。

* * *

**UINavigationController**

当您从应用程序委托加载 mainViewController 时，您需要将其包装在导航控制器中，如下所示：

AppDelegate.h

```
@property (strong, nonatomic) UINavigationController *navController; 
```

AppDelegate.m

```
@synthesize navController = _navController; 
```

//在 didFinishLaunchingWithOptions 中：

```
UIViewController *mainViewController = [[MainViewController alloc] initWithNibName:@"MainViewController" bundle:nil];

navController = [[UINavigationController alloc] initWithRootViewController:mainViewController];

self.window.rootViewController = nav1;
[self.window makeKeyAndVisible]; 
```

现在在您的 MainViewController 中，您对 UINavigationController 有了信心。

当您想从父母那里推给孩子时，您可以简单地执行以下操作：

```
ChildViewController *child = [[ChildViewController alloc]...];
[self.navigationController pushViewController:child animated:YES]; 
```

如果您在 ChildViewController 中并想返回，只需执行以下操作：

```
[self.navigationController popViewControllerAnimated:YES]; 
```

这就是“向下钻取”技术。

*（我知道“Drill Down”的意义远不止于此，但它提供了一个很好的参考框架。）*

* * *

**代表**

现在，您拥有的另一种方法是在类之间设置委托。因此，如果您在 childView 中并需要致电您的父母，您将有一个频道可以这样做。

在你的 MainViewController.h 设置它像这样：

```
#import <UIKit/UIKit.h>

//This is our delegate
@protocol TalkToParentDelegate <NSObject>

//This is our delegate method
- (void)helloParent;
@end

@interface MainViewController : UIViewController <TalkToParentDelegate> 
...
..
@end 
```

在您的 MainViewController.m 中确保添加委托方法。

```
- (void)helloParent {
  NSLog(@"Hello child, let me do something here");
} 
```

在您的 ChildViewController.h 中设置它，如下所示：

```
#import <UIKit/UIKit.h>

//Add header of class where protocol was defined
#import "MainViewController.h"

@interface ChildViewController : UIViewController

//Create a property we can set to reference back to our parent
@property (strong, nonatomic) id <TalkToParentDelegate> delegate;

@end 
```

现在，在您的 MainViewController.m 中，每当您展示 ChildViewController 时，请执行以下操作：

```
ChildViewController *child = [[ChildViewController alloc]...];

//Set the delegate reference to parent 
child.delegate = self;

//present the view 
```

最后但并非最不重要的一点是，当您在孩子中时，您可以像这样调用父级（MainViewController）上的方法：

[self.delegate helloParent];

* * *

因此，您可以使用以下两种方法。

但是，我想指出，您可以将它们一起使用。假设您有一个 UINavigationController 但仍然需要一个孩子与它的父母交谈，您可以设置一个委托，这样就可以了。

*   希望这可以帮助。

# url-rewriting - IIS 7.5 URL 重写指向单个站点的不同域

> ID：11852161
> 
> 赞同：0
> 
> 时间：2012-08-07T18:45:28.650
> 
> 标签：url-rewriting, iis-7.5

我在 www.domain1.com 有一个站点。这是一个托管在 Windows 2008/IIS 7.5 机器上的 PHP 站点。我需要设置 www.domain2.com，以便将用户重定向到 www.domain1.com/subfolder。对于用户来说，他们仍然在地址栏中看到 www.domain2.com，但正在查看 www.domain1.com/子文件夹。

任何有关如何实现这一目标的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T18:56:40.763

您需要使用 IIS[应用程序请求路由和 Url Rewrite 模块](http://learn.iis.net/page.aspx/659/reverse-proxy-with-url-rewrite-v2-and-application-request-routing/)。本演练几乎准确地描述了您要实现的目标。

# sql - 如何在 SQL 语句中使用动态变量

> ID：11852163
> 
> 赞同：0
> 
> 时间：2012-08-07T18:45:30.687
> 
> 标签：sql, sql-server-2008, tsql, db2

我正在创建一个更新触发器。我有一种情况，我需要在表列上测试条件，但实际上并不知道确切的列名是什么。触发器是通用的，可以应用于具有不同列的任何表。

伪代码：

```
// define a cursor that loops through all columns in "MyTable"
Define cursor C1 for (select COLS from SYSCAT.TABLES where TABS="MyTable")
FOR
// take the next column from the cursor
@temp_var = C1.COLS
// DELETED and INSERTED are tables that also contain the same columns as "MyTable" table.
if(DELETED.@temp_var <> INSERTED.@temp_var)
THEN
... 
```

上面的语句`if(DELETED.@temp_var <> ...`当然不起作用，但也许你可以看到我在做什么？所以我希望它在运行时出现，例如是`if(DELETED.MyColumn <>... where "MyColumn"`一个列 in`"MyTable"`和 in 。请注意，由于此方法应该是通用的，因此我事先不知道该表有哪些列（取决于使用的特定表）。`INSERTED``DELETED columns`

关于如何动态构建 if 语句的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T09:40:57.113

在 DB2 SQL 中，您不能动态地引用列。因此，您将无法仅使用 SQL 来做到这一点。您可以从触发器中调用以另一种语言编写的外部过程。或者，您可以重新考虑您想要做的事情的整体设计。我没有看到任何其他选择。

# java - Java - 位操作

> ID：11852164
> 
> 赞同：0
> 
> 时间：2012-08-07T18:45:37.027
> 
> 标签：java

我有以下 Java 代码：

```
long a = Long.parseLong("11001100", 2);
long b = Long.parseLong("11000000", 2);
int npos = 0 ;
int pos = 0 ;
long n = ~(a ^ b) ;
int cnt = 0;
while (n != 0) {
  pos++ ;
  if ((n & 3) == 3) cnt++; // count how many matches
  else{
    npos = pos ;  // position that not matched also giving wrong which should be 2 nd position.
  }
  n >>>= 2;
}

System.out.println(npos + "  " + cnt) ; // also print which two bits are not matched i.e. 00 and 11 
```

我试图找出两个整数中有多少个两位序列匹配。我还想找出哪两位不匹配。有人可以帮我怎么做吗？

PS：我的原始代码中没有字符串，只有整数。因此，我不能进行字符串操作。

编辑：

```
long a = Long.parseLong("11000100", 2);
long b = Long.parseLong("11000000", 2);
long mask = 0x03;
int npos = 0 ;
int cnt = 0;
long p1 = 0;
long p2 = 0;
for (int pos = 0; pos < 64; pos++, mask <<= 2) {

  if ((a & mask) == (b & mask)) {
     cnt++; // count how many matches
  } else {
    npos = pos ;  // *last* position that did not match
    p1 = (a & mask) ; // two bits that not matched
    p2 = (b & mask) ; // two bits that not matched
  }
}

  System.out.println(npos + "  " + cnt + " " + p1 + " " + p2) ; // also print which two bits are not matched i.e. 00 and 01 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T19:00:49.370

您将整数解析为以 10 为底的数字，您可能希望将它们解析为二进制整数，为此使用具有 radix 参数的方法：

```
long a = Long.parseInt("11001100", 2);
long b = Long.parseInt("11000000", 2); 
```

使用掩码运行比较两个值的循环可能更容易：

```
long mask = 0x03;
int npos = 0 ;
int cnt = 0;

for (int pos = 0; pos < 32; pos++, mask <<= 2) {

  if ((a & mask) == (b & mask)) {
     cnt++; // count how many matches
  } else {
    npos = pos ;  // *last* position that did not match
  }
} 
```

# unit-testing - 函数式编程、SRP、可测试性和具有静态和实例可变字段的类

> ID：11852173
> 
> 赞同：2
> 
> 时间：2012-08-07T18:46:26.490
> 
> 标签：unit-testing, functional-programming, functional-testing, solid-principles, single-responsibility-principle

我希望我能正确地表达这个问题。在处理具有静态和实例可变字段的类中的状态和可测试性时，我有一个担忧。

由于生命周期/范围的不同，静态字段是否本质上构成了不同的类/职责/实例？

如果是这样：那么实例字段不应该也是一个单独的类/数据结构吗？

然后：如果是这样，那么不应该所有类都是无状态的，只接收它们对构造的依赖，然后都应该是不可变的吗？

最后，这是否意味着函数式编程也是进行面向对象编程的正确方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T19:04:13.440

你不应该有（真的）可变的静态字段。那是蹩脚的设计。函数式编程使事情变得容易得多。我会把这些问题分开：

*   什么是数据，应该只有在课堂上操作它的必要代码。像 "string" "Integer" "Person" ，这些是实体
*   什么操作数据，取决于数据，但不应该有内部状态（格式化程序等）
*   什么驱动执行，通常必须有一些内部状态，但它要么随调用携带，要么是“配置”，如数据库连接、请求等。这要么来自活动请求，要么是纯配置（注入）
*   什么视图结果（纯视图）本身应该是无状态的，状态应该通过上下文提供给它
*   然后中间有胶水，通常是毛茸茸的例外……尽量减少。

ETC..

为了可测试性

*   数据应该可以模拟到假数据库。
*   “什么操纵数据”应该很容易测试，因为它是无状态的。
*   包含在上下文中的状态很容易模拟。
*   “什么驱动执行”应该很容易测试，因为依赖项是可注入的，你可以逐个测试它。
*   视图很容易测试，因为可以将模拟状态提供给它。困难来自实际验证“它看起来像什么”，但这取决于 gui 自动化或人工测试人员。

本质上，如果数据库（磁盘）和请求层（web、ui 等）符合要求，所有这些都可以以功能方式完成。在实践中，您尝试在 pretty 和 functionalish 之间做“纯粹”的部分，并使用设计模式来保护它免受外部污垢的影响。

# javascript - 如何将js函数作为参数发送给另一个函数？

> ID：11852176
> 
> 赞同：0
> 
> 时间：2012-08-07T18:46:34.430
> 
> 标签：javascript

我有以下代码

```
function exec(param1,p2,fun){
    xmlhttp=new XMLHttpRequest();
    xmlhttp.onreadystatechange=function(fun){
        data=xmlhttp.responseText;
        fun(data);
    }
    // rest ajax connection code
} 
```

当我打电话时

```
 exec(param1,param2,
    function(data){
      alert (data);
    }); 
```

它说

> 对象不是函数

在行的定义中`fun('test');`

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T18:57:56.463

您正在`fun`用更窄范围内的新内容覆盖：

```
function exec(param1,p2,fun){
                        ^^^  - The function you pass

xmlhttp.onreadystatechange=function(fun){
                                    ^^^ - new variable (possibly an event object) 
```

更改变量名称之一，这样您就不会在回调函数中对其进行屏蔽。

# iphone - 无法从目标 c 连接到我的 WCF webget 公开服务

> ID：11852181
> 
> 赞同：0
> 
> 时间：2012-08-07T18:46:58.597
> 
> 标签：iphone, objective-c, wcf

这是一个棘手的问题。

当我按下按钮时，它应该连接到一个 URL，这将启动我的 wcf 服务的该方法。但是，当我调试时，我注意到连接失败（就像没有调用任何委托方法等等）。我知道我的 WCF 服务可以正常工作，因为当我直接在 safari 中键入 URL 时，它可以正常工作并执行该方法。这是我的代码：

```
- (IBAction)RBCButtonPressed:(id)sender {

//[[UIApplication sharedApplication] openURL:[NSURL URLWithString: @"http://10.1.51.55:8732/windows2/OnApplication?appName=RoyalBank.BankOfTheFuture.Surface.exe&directory=C:\\Program Files (x86)\\Bank of the Future"]];
NSString *urlString = @"http://10.1.51.55:8732/windows2/OnApplication?appName=RoyalBank.BankOfTheFuture.Surface.exe&directory=C:\\Program Files (x86)\\Bank of the Future";
NSLog(urlString);
NSURL *url = [NSURL URLWithString:urlString];
NSURLRequest *request = [[NSURLRequest alloc] initWithURL:url ];
NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
[connection release];
[request release];
if(connection)
    self.valueReturned = [[NSData data] retain];
else
    NSLog(@"data failed");

NSLog(@"connection failed");
[captureView addSubview:loader]; 
```

}

我不包括委托方法，因为它们无论如何都不会被调用。它打印“连接失败”。

更新：当我使用只接受一个参数的方法时，它在浏览器和设备上都可以正常工作（连接成功并且调用了委托方法）。但是，当有两个参数时，它只能在浏览器中正常工作。连接总是失败。可能性 - 反斜杠的使用会以某种方式混淆它（？）。

这是紧急的，任何帮助将不胜感激。

编辑：它总是会打印我意识到的“连接失败”，但我知道连接失败是因为 1）未调用委托方法和 2）应用程序未打开，如果调用该方法则会打开。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T22:20:01.513

它失败了，因为您在创建连接后立即释放连接。如果您不使用 ARC，您可以使用 autorelease 创建它，或者只使用 ARC 并忘记发布。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T23:39:53.560

如果您在调试器中检查您的 NSURL 对象，您会在尝试初始化它后立即发现它为 nil。这是因为它的格式不正确。首先尝试对其进行[URL 编码](https://stackoverflow.com/questions/8088473/url-encode-a-nsstring)。

请注意您粘贴到 Safari 中的 URL 更改为：

```
http://10.1.51.55:8732/windows2/OnApplication?appName=RoyalBank.BankOfTheFuture.Surface.exe&directory=C:%5C%5CProgram%20Files%20(x86)%5C%5CBank%20of%20the%20Future 
```

查看所有 %20s 和 %5Cs 等？这是因为 Safari URL 在发送请求之前对其进行了编码。你也必须这样做。

最好的祝福。

# java - java中的批处理代码

> ID：11852186
> 
> 赞同：0
> 
> 时间：2012-08-07T18:47:17.223
> 
> 标签：java, batch-file

我不想只从 java 调用批处理文件，我希望代码在 java 中。

到目前为止我有这个但是我的批处理文件有很多代码并且不接受它。

```
public static void main(String[] args) { 
    final String dosCommand = "cmd /c dir /s";
    final String location = "C:\\WINDOWS";
    try {
      final Process process = Runtime.getRuntime().exec(dosCommand + " " + location);
      final InputStream in = process.getInputStream();
      int ch;
      while((ch = in.read()) != -1) {
        System.out.print((char)ch);
      }
    } catch (IOException e) {
      e.printStackTrace();
    }
} 
```

我想在我的 java 类中添加的批处理代码示例。我不会在课堂上添加@echo，除非有人告诉我需要。

```
@echo off

rundll32 wbemupgd, UpgradeRepository

NET USE Q: \\Somenetworkpath\ /PERSISTENT:NO
Q:
CD \DeskTop\Troubleshoot\
COPY subinacl.msi "C:\Documents and Settings\%USERNAME%\Desktop"
C:
MSIEXEC.EXE /i "\Documents and Settings\%USERNAME%\Desktop\subinacl.msi" /qn

DEL /Q "C:\Documents and Settings\%USERNAME%\Desktop\subinacl.msi"

C:
CD \Program Files\Windows Resource Kits\Tools\
SUBINACL /SUBKEYREG HKEY_LOCAL_MACHINE /GRANT=Administrators=F
SUBINACL /SUBKEYREG HKEY_CURRENT_USER /GRANT=Administrators=F
SUBINACL /SUBKEYREG HKEY_CLASSES_ROOT /GRANT=Administrators=F
SUBINACL /SUBDIRECTORIES %SystemDrive% /GRANT=Administrators=F
SUBINACL /SUBKEYREG HKEY_LOCAL_MACHINE /GRANT=System=F
SUBINACL /SUBKEYREG HKEY_CURRENT_USER /GRANT=System=F
SUBINACL /SUBKEYREG HKEY_CLASSES_ROOT /GRANT=System=F
SUBINACL /SUBDIRECTORIES %SystemDrive% /GRANT=System=F 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T03:10:48.480

我怀疑您没有为 java 正确转义批处理代码中的特殊字符。

`"`被转义为`\"`

`'`被转义为`\'`

`\`被转义为`\\`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T19:15:08.440

我想要的似乎不可能。最后只是调用批处理文件。

# android - 如何为 android 编译 GCC？

> ID：11852187
> 
> 赞同：26
> 
> 时间：2012-08-07T18:47:18.133
> 
> 标签：android, gcc, compiler-construction, makefile, cross-compiling

有没有办法为 android 编译 GCC？基本上，让 GCC 编译器可以在 android 终端仿真器中访问，并且能够从 C 或 C++ 源文件编译将在 android 上运行的二进制文件。

我的意图是使用它并最终安装 make。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-10T02:28:58.003

[Android NDK](http://developer.android.com/tools/sdk/ndk/index.html)已经包含在您的计算机上运行的完整 GNU 工具链。您应该能够使用它来编译您想要的任何程序的本机版本。

在 NDK 中，请参阅`docs/STANDALONE-TOOLCHAIN.html`设置交叉编译器。您可能希望按照“调用编译器（简单方法）”的步骤来设置工具链的副本，您应该能够将其`configure`与 GNU 应用程序（如 gcc）中通常包含的脚本一起使用。

这确实是一项不平凡的任务，我建议您非常仔细地阅读文档。它还包含 CFLAGS、LDFLAGS 等的各种值，您在配置和编译程序时需要自定义和使用这些值。

至于自己编译 gcc、make 等，可能没有必要或不希望这样做。例如，gcc 将会很大，您可能没有足够的手机存储空间来安装它。如果您的最终目的是编译一些程序以在 Android 设备上本地运行，那么我建议您只使用 NDK 并将应用程序的`configure`脚本指向它。

# javascript - 在 coffeescript 中迭代 jQuery DOM 元素：$(@)。捷径

> ID：11852190
> 
> 赞同：5
> 
> 时间：2012-08-07T18:47:41.670
> 
> 标签：javascript, coffeescript, shortcut

我的咖啡脚本中有很多循环，它们遍历一组 DOM 元素，并执行更多的 jQuery。这些函数看起来像这样：

```
$('.iterable.object').each ->
    $(@).doThis
    $(@).doThat

    ## More complicated usage
    $(@).jqueryPluginCall
        x: $(@).data('attr1')
        x: $(@).data('attr2')

    ## More complicated usage
    $(@).children('ul.animateable').each ->
        if $(@).data('animation') is "fancy"
            $(@).animate fancy: animation
        else
            $(@).animate simple: animation
        $(@).focus(
            ->
                $(@).animate some: more
            , ->
                $(@).animate even: more
        ) ## Or however you do double callbacks 
```

`$(@).`我一次又一次地输入了大约 3 个拼写错误，这变得很痛苦。

没有快捷语法`$(@)`? 打字有点痛苦，而且似乎是一种很常见的语法。如果它以类似于`@`自动函数调用者的方式运行，例如`&doThis`代替`&.doThis`.

编辑：我希望能够在 jQuery 加载后在 javascript 中定义一个别名，该别名在调用时响应 DOM 元素`&`并链接到 methods `&doThis`，而不是像@bennedich 下面建议的那样在每个循环的顶部。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-07T19:16:02.097

函数链如何：

```
$('.iterable.object').each ->
  $(@)
    .doThis()
    .doThat() 
```

或存储`$(@)`到变量：

```
$('.iterable.object').each ->
  t = $(@)
  t.doThis()
  t.doThat() 
```

或者两者的结合。我能想到的最后一件事是 IDE 片段，例如 textmate 会让你配置 letter+TAB 替换为`$(@)`.

# javascript - 当我单击 chrome 的输入类型 = 搜索元素上的 X 时，是否会触发任何事件？

> ID：11852191
> 
> 赞同：4
> 
> 时间：2012-08-07T18:47:51.297
> 
> 标签：javascript, html, google-chrome, search, input

所以我决定在`<input type="search">`页面上添加一个元素，我看到 Chrome 呈现了一个漂亮的小 X 图标，我可以单击它来清除该值。看起来这个图标可以触发`change`事件，但只有在`input`内容自上次`blur`.

假设我正在处理`keyup`事件以自动将结果呈现为用户类型。当他们键入时，结果会被过滤（在每个`keyup`事件期间自动触发一些 ajax）。然后，当用户停止并单击 X 图标时，我想恢复显示所有结果。

我似乎无法弄清楚如何处理这种情况。当用户从一个空框开始时，他们给它焦点并开始输入。但是，当他们停止并单击 chrome 的 X 按钮时，`keyup`不会触发（duh）。此外，当它们模糊时，`change`不会触发事件，因为搜索输入处于与第一次获得焦点时相同的状态。

当有人点击这个小 X 图标时，是否会触发任何其他事件？我必须处理`click`好`keyup`，还是有更具体的东西？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-07T18:50:42.440

您可能正在寻找[onsearch 事件](http://help.dottoro.com/ljdvxmhr.php)，该事件在用户搜索或通过按删除搜索文本时触发`x`

# jsf - JSF - 导入的 jar 类中的 Bean 声明不起作用

> ID：11852195
> 
> 赞同：0
> 
> 时间：2012-08-07T18:47:53.167
> 
> 标签：jsf, jakarta-ee, dependency-injection, dependency-properties, code-injection

我有两个 web jsf 项目，它们可能共享一些类和 bean，以减少代码重复。

一种是潜在的 JNDI-ServiceLocator 应用范围 Bean。（两个 Web 项目都从同一主机访问 RemoteBeans）

**JNDI - 服务定位器 Bean：**

```
@ManagedBean(name = "jndiServiceLocatorBean")
@ApplicationScoped
public class JndiServiceLocatorBean implements Serializable
{
    // code to cache jndi references
} 
```

**以 Bean 作为 ManagedProperty 的抽象类：**

```
public abstract class AJndiServiceLocator
{
    @ManagedProperty(value = "#{jndiServiceLocatorBean}")
    protected JndiServiceLocatorBean jndiServiceLocatorBean = null;

    public void setJndiServiceLocatorBean(final JndiServiceLocatorBean jndiServiceLocatorBean)
    {
        this.jndiServiceLocatorBean = jndiServiceLocatorBean;
    }
} 
```

**来自其中一个项目的示例 Bean：**

```
@ManagedBean(name = "testBean")
@ApplicationScoped
public class TestBean extends AJndiServiceLocator implements Serializable
{
    // bean code - can now retrieve remote bean interfaces 
    // from super class
} 
```

如果第一个类`JndiServiceLocatorBean`并且`AJndiServiceLocator`位于项目的源文件夹中，则此代码按预期工作。

但是，如果我将这两个类外包到两个 Web 项目之间共享的子项目中，它就不起作用。（包含在构建路径中并标记为部署条目。）

**发生的注入异常：**

```
Schwerwiegend: Error Rendering View[/index.xhtml]
com.sun.faces.mgbean.ManagedBeanCreationException: Bei der Ressourcen-Einspeisung auf dem verwalteten Bean appBean ist ein Fehler aufgetreten.
    at com.sun.faces.mgbean.BeanBuilder.invokePostConstruct(BeanBuilder.java:229)
    at com.sun.faces.mgbean.BeanBuilder.build(BeanBuilder.java:105)
    at com.sun.faces.mgbean.BeanManager.createAndPush(BeanManager.java:409)
    at com.sun.faces.mgbean.BeanManager.create(BeanManager.java:269)
    at com.sun.faces.el.ManagedBeanELResolver.resolveBean(ManagedBeanELResolver.java:244)
    at com.sun.faces.el.ManagedBeanELResolver.getValue(ManagedBeanELResolver.java:116)
    at com.sun.faces.el.DemuxCompositeELResolver._getValue(DemuxCompositeELResolver.java:176)
    at com.sun.faces.el.DemuxCompositeELResolver.getValue(DemuxCompositeELResolver.java:203) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T11:22:36.847

JSF 不会扫描整个类路径中的每个 JAR 以查找 JSF 工件，这在具有数十个 JAR 的大型 web 应用程序中将是一项非常昂贵的工作。JSF 只会扫描`/WEB-INF/lib`包含 JSF 2.0 兼容`/META-INF/faces-config.xml`文件的文件夹中的 JAR。

确保您的 JAR 符合这一点。

*   它必须在`/WEB-INF/lib`.
*   它必须有一个`/META-INF/faces-config.xml`与 JSF 2.0 兼容的根声明。

### 也可以看看：

*   [具有共享代码的多个 JSF 项目的结构](https://stackoverflow.com/questions/8320486/structure-for-multiple-jsf-projects-with-shared-code/8320738#8320738)
*   [JSF facelets 模板打包](https://stackoverflow.com/questions/9290482/jsf-facelets-template-packaging/9473487#9473487)

# eclipse - Subclipse diff 更改黑色背景

> ID：11852197
> 
> 赞同：0
> 
> 时间：2012-08-07T18:47:59.600
> 
> 标签：eclipse, svn, user-interface, colors, subclipse

我在几个系统上运行 Subclipse。Mac 和 Linux 看起来不错，但在 Windows 上，提交面板上的差异视图有黑色背景，无法阅读。尝试在 Preferences > Team > SVN 和 Preferences > Editors 周围寻找，但似乎无法找到设置的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T21:07:18.707

比较工具和 UI 是 Eclipse 平台的一部分。就它可以定制的程度而言，它可能在 Eclipse 首选项中的 General > Appearance 和/或 Compare 下。它不是 Subclipse 控制或试图定义的东西。我从未在标准的 Eclipse 分发文本编辑器中看到黑色背景。也许它会从操作系统中获取默认值？你在其他地方使用黑色背景吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T18:52:18.140

这会有用吗：[Eclipse：Subclipse“编辑冲突”](https://stackoverflow.com/questions/451584/eclipse-subclipse-edit-conflicts)？

你使用的是哪个版本的eclipse？

看起来这可能是 3.5 之前的 Eclipse 版本的错误。如果这适用于您，请查看**[此](http://subclipse.tigris.org/issues/show_bug.cgi?id=928)**subclipse 错误并升级到更新版本（如果这是一个选项）。

# php - PHP脚本在一段时间后触发另一个

> ID：11852202
> 
> 赞同：1
> 
> 时间：2012-08-07T18:48:08.337
> 
> 标签：php, scheduled-tasks

我有一个 PHP 脚本。我希望这个 PHP 脚本在某些条件下触发另一个 PHP 脚本，我可以这样做，但我希望在一段时间后触发第二个脚本。

例如，如果条件成立，则在 2 小时内启动第二个脚本。

如何使用 PHP 或任何其他现成的选项以最简单的方式实现这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T18:49:58.363

我认为[Cronjob](http://net.tutsplus.com/tutorials/php/managing-cron-jobs-with-php-2/)是你所需要的。
上面的这个链接应该为您提供与 PHP 一起使用它可能需要的所有信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T18:49:48.127

研究使用`cronjobs`.

**参考**：[http ://www.unixgeeks.org/security/newbie/unix/cron-1.html](http://www.unixgeeks.org/security/newbie/unix/cron-1.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T19:57:32.947

您可以拥有一个数据库，在您需要运行脚本的时候使用它，并让一个[cron](http://www.adminschoice.com/crontab-quick-reference)每隔一小时左右运行一个 php 脚本，以检查是否有需要执行的任务（并执行它们）。

有了它，你可以让你的第一个 php 脚本来编写任务，并由 cron 运行 php 脚本来完成你的任务。

# .net - 无法转换表达式类型'NHibernate.IQueryOver ' 返回类型 'System.Linq.IQueryable '

> ID：11852211
> 
> 赞同：2
> 
> 时间：2012-08-07T18:48:54.610
> 
> 标签：.net, nhibernate, session, repository, iqueryable

我确定我做错了，但我已经有一段时间了。我正在尝试实现 IRepository Find 方法，但我似乎无法弄清楚如何。任何帮助将不胜感激！

以下代码为我提供了红色波浪线，其中错误消息作为问题发布。

```
 IQueryable<T> IRepository<T>.Find(Expression<Func<T, bool>> predicate)
    {
        return sessionManager.OpenSession().QueryOver<T>().Where(predicate);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T18:50:51.557

您必须改用`.Query<T>()`扩展方法。

# bash - 反引号的论点似乎被解释了两次？

> ID：11852218
> 
> 赞同：2
> 
> 时间：2012-08-07T18:49:12.893
> 
> 标签：bash, shell

我不完全确定如何对这个问题进行分类。感觉就像我在`tail`and/or中发现了一个错误`bash`，但显然这更有可能是我理解的一个错误！

我运行了以下命令：

```
tail -f -n`wc -l scrape.log` scrape.log 
```

为了`cat`整个文件和添加的任何新材料。但是，这`tail`对文件进行*了两次*编辑。运行此命令：

```
tail -f -n`wc -l scrape.log` 
```

给了我想要的结果，`tail`文件一次。我认为反引号是一种 Bash 转义工具，可以在运行下一个命令之前“预处理”一个命令。这里发生了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-07T18:51:37.163

当您使用反引号时，您实际上是将一个命令的输出传递给另一个命令。现在让我们看看有什么`wc -l`作用：

```
[cnicutar@fresh ~]$ wc -l /etc/passwd
11 /etc/passwd 
```

它输出行数**和文件名**。所以你的命令变成：

```
tail -f -n 11 scrape.log scrape.log 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-07T19:04:38.313

如果你`tail`支持它，你可以使用

```
tail -f -n +1 scrape.log 
```

从文件的第 1 行开始`tail`。

（我故意不回答你的问题，cnicutar 已经完成了。我只是提出一个可能的替代方案。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T20:20:53.707

### 替代解决方案

```
tail -f -n $(wc -l < scrape.log) scrape.log 
```

输入重定向可防止打印文件名。

# c++ - C++ struct 默认构造函数 mbed

> ID：11852222
> 
> 赞同：0
> 
> 时间：2012-08-07T18:49:20.597
> 
> 标签：c++, class, constructor, default

我的结构有这个定义：

```
struct localframevelo
{
    double ivelo; //i(x) component of velocity
    double cvelo; //c(y) component of velocity
    double rvelo; //r(z) component of velocity
    double speed; //total magnitude of velocity

    localframevelo()
    {
        ivelo = 0;
        cvelo = 0;
        rvelo = 0;
        speed = 0;
    }
    localframevelo(double init_ivelo, double init_cvelo, double init_rvelo)
    {
        ivelo = init_ivelo;
        cvelo = init_cvelo;
        rvelo = init_rvelo;
        speed = sqrt(pow(ivelo, 2.0) + pow(cvelo, 2.0) + pow(rvelo, 2.0));
    }
}; 
```

这是一个我试图在其中使用 localframevelo 的默认构造函数的类：

```
 class missionprofile
    {
    //misison waypoints structure************************
    private:
        double stdholdtime; // 0.25 second within tolerance radius to "reach" a waypoint
        double stdtolrad; // 0.5 meter tolerance radius (error magnitude) to "be at" a waypoint
        localframevelo stdvelo;
        waypoint missionwaypoints[MAXLISTLENGTH];
        int numwaypoints;

    public:
        missionprofile();
        missionprofile(int points, double StdHoldTime, double StdTolRadius, localframevelo StdVelo); 
```

};

这是我试图调用 localframevelo 的默认构造函数的类的默认构造函数的实现：

```
missionprofile::missionprofile()
{
    numwaypoints = 0;
    stdholdtime = 0;
    stdtolrad = 0;
    stdvelo();          //ERROR
} 
```

我收到此错误：在没有适当的 operator() 或将函数转换为指针函数类型的情况下调用类类型的对象。我正在使用 mbed 编译器，我的代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T18:53:55.370

当您编写`stdvelo()`时，编译器`stdvelo.operator()()`会在不存在此类函数时看到并抱怨。

无论如何都要构造数据成员；你根本不需要这条线。

此外，使用初始化而不是为您的起始值赋值要快一些（尽管您的编译器很可能会优化掉差异）。

因此，例如，您可以将其用于第二个构造函数：

```
localframevelo(double init_ivelo, double init_cvelo, double init_rvelo)
    : ivelo(init_velo)
    , cvelo(init_cvelo)
    , rvelo(init_rvelo)
    , speed(sqrt(pow(ivelo, 2.0) + pow(cvelo, 2.0) + pow(rvelo, 2.0)))
{} 
```

首先，您只需使用`0`而不是`init_velo`等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T18:51:32.250

您可以安全地删除此行：

```
stdvelo(); 
```

在函数体的上下文中，这被解释为对`operator()()`的实例的调用`localframevelo`，而不是初始化。无论如何，数据成员将被默认构造，*无需*任何显式初始化。但是你真正应该做的是在构造函数的初始化列表中初始化你的数据成员：

```
missionprofile::missionprofile() 
  : numwaypoints(),
    stdholdtime(),
    stdtolrad(),
    stdvelo()
{
} 
```

同样对于`localframevelo`'s 的构造函数和其他`missionprofile`构造函数。

# java - SQL 错误：933、SQLState：42000 和 ORA-00933：SQL 命令未正确结束

> ID：11852223
> 
> 赞同：0
> 
> 时间：2012-08-07T18:49:23.140
> 
> 标签：java, sql, hibernate, hql

我正在使用 Hibernate 进行数据库访问。我在我的代码中使用以下查询来获取我需要的数据：

```
SELECT proasset
FROM com.company.claims.participant.AbstractBeneficiary bene
JOIN bene.approvals approval
JOIN bene.proassetkey proasset
join proasset.relatedparties proassetparties
WHERE approval.user_dt > :currentDate
AND approval.user_type = :userType 
```

我正在使用它，`query`如下所示：

```
Query q = this.getSessionFactory().getCurrentSession().createSQLQuery(query.toString())
q.setDate("currentDate", new Date());
q.setString("userType", APPROVER_USER_TYPE);
List<ProAsset> proassets = q.list(); 
```

但是，我在尝试运行它时遇到以下情况：

```
SQL Error: 933, SQLState: 42000
ORA-00933: SQL command not properly ended 
```

如果重要的话，查询是使用 a 构造的`StringBuilder`，它用来`\n`换行

对这个问题有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T00:37:02.667

看起来您正在尝试将 ORM 与本机（普通旧 SQL）查询混合使用。

createSQLQuery 需要本机 SQL。您使用的是类而不是表名。尝试阅读以下内容：

[http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querysql.html](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querysql.html)

简而言之，您需要编写如下查询：

```
select fu
from bar
where situation = 'snafu' 
```

也许你真的想写一个namedQuery？他们使用 ORM 语法来连接实体，就像您在示例中所做的那样。

检查这些示例：

[http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querysql.html#querysql-namedqueries](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querysql.html#querysql-namedqueries)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T15:03:06.440

好的，所以我使用 createSQLQuery() 而不是 createQuery() 并且我使用的是列名而不是变量名。

这是我的代码现在的样子：

```
StringBuilder query = new StringBuilder();

query.append("SELECT proasset\n" +
            "FROM com.avivausa.claims.participant.AbstractBeneficiary bene\n" +
            "JOIN bene.approvals approval\n" +
            "JOIN bene.proAsset proasset\n" +
            "join proasset.additionalParties proassetparties\n" +
            "WHERE approval.userDate < current_date()\n");
query.append("AND approval.userType = ").append(UserAuditType.APPROVER);

Query q = this.getSessionFactory().getCurrentSession().createQuery(query.toString());

List<ProAsset> proassets = q.list(); 
```

显然我也做了一些重构更改，但主要的更改是我上面所说的。谢谢你的回复！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T05:34:36.833

通过删除不适当的子句来更正语法。可以使用另一个 SQL 语句复制已删除的子句。例如，要对视图的行进行排序，请在查询视图时而不是在创建视图时这样做。如果续行缩进，SQL*Forms 应用程序中也会出现此错误。检查缩进的行并删除这些空格。

# prolog - 对卡片列表进行排序序言

> ID：11852226
> 
> 赞同：0
> 
> 时间：2012-08-07T18:49:46.743
> 
> 标签：prolog, bubble-sort

我有一张卡片结构列表，例如：

```
[card(ace, spades), card(10, diamonds), card(king, clubs)] 
```

谁能帮我理解如何根据面值对这些进行排序？

我有这个：

```
bubblesort(L, L1) :-
        (   bubble(L, L2)
        ->  bubblesort(L2, L1)
        ;   L = L1 ).

bubble([card(A,A2), card(B,B2)|T], L) :-
        (   A > B
        ->  L = [card(B,B2), card(A,A2)|T]
        ;   L = [card(A,A2) | L1],
            bubble([card(B,B2)|T], L1)). 
```

效果很好（它的冒泡排序），除非你有`card(ace, spades)`或类似，因为`ace`不是数字

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T19:21:26.290

您可以使用[`predsort/3`](http://www.swi-prolog.org/pldoc/doc_for?object=predsort/3)

就像`sort/2`，但通过调用您提供的比较谓词来确定术语的顺序。所以我们只需要写一个`compare_values/3`谓词来比较你的牌面值。我的尝试：

```
compare_values(D, card(A,_), card(B,_)) :-
    nth0(X, [ace, 2, 3, 4, 5, 6, 7, 8, 9, 10, jack, queen, king], A),
    nth0(Y, [ace, 2, 3, 4, 5, 6, 7, 8, 9, 10, jack, queen, king], B),
    compare(D, X, Y).

sort_cards(L, R) :-
    predsort(compare_values, L, R). 
```

* * *

`compare_values/3`谓词解释：

我们需要在以下列表中定义排序：

```
[ace, 2, 3, 4, 5, 6, 7, 8, 9, 10, jack, queen, king] 
```

如何？给定两个值`A`和`B`，我们只需在列表`nth0/3`中搜索`A`和`B`。`nth0/3`会给我们正在搜索的元素的位置。所以现在：

```
X = position of the element A in the ordered list
Y = position of the element B in the ordered list 
```

但现在`X`和`Y`保证是数字！我们可以将它们与内置的 predicate 进行比较[`compare/3`](http://www.swi-prolog.org/pldoc/man?predicate=compare/3)。如果`X < Y`卡片在卡片`A`之前`B`，反之亦然。

`compare/3`将比较`X`and `Y`，并返回`(>)`, `(<)`, 中的一个`(=)`。

一个例子：

```
?- compare_values(D, card(ace, clubs), card(7, spades)). 
```

*   `nth0`在有序值列表中搜索`ace`和`7`。
*   现在`X = 0`和`Y = 6`（`ace`和`7`在列表中的索引）
*   `compare(D, 0, 6)`与`D = (<)`

最后：`predsort/3`谓词使用 compare_values 根据定义的顺序对列表进行排序`by compare_values/3`

* * *

一个问题：

```
?- sort_cards([card(king, spades), card(ace,spades), card(3, clubs), card(7,diamonds), card(jack,clubs)], X). 

X = [card(ace, spades), card(3, clubs), card(7, diamonds), card(jack, clubs), card(king, spades)]. 
```

# asp.net-mvc-3 - ObjectContext 未检索最近的更改

> ID：11852228
> 
> 赞同：0
> 
> 时间：2012-08-07T18:49:49.210
> 
> 标签：asp.net-mvc-3, entity-framework, telerik-grid

此代码工作正常，但是，如果我在我的工作单元类（或任何更新、删除、添加操作）中运行执行存储过程，我仍然会获得原始数据。实际上，我已经有一个解决方案（在下面的控制器中发布）但我确定这不是最优雅的方式，我希望有人可以帮助我重构代码。请帮忙。谢谢

我的工作单位

```
 public class UnitOfWork : IUnitOfWork, IDisposable
 {
   private readonly ObjectContext _context;
   private BookRepository _books;

    public UnitOfWork(ObjectContext context)
    {
        if (context == null)
        {
            throw new ArgumentNullException("Context was not supplied");
        }

        _context = context;
    }

    public IRepository<Book> Books
    {
        get
        {
            if (_books== null)
            {
                _books= new BookRepository (_context);
            }

            return _books;
        }
    }

    public void UpdateAuthor(int id)
    {
        _context.ExecuteStoreCommand("sp_UpdateAuthor @param1", 
            new SqlParameter("param1", id));
     }

     public void Commit()
    {           
       _context.SaveChanges();
    } 
```

书库

```
public class BookRepository : Repository<Book>
{
    public BookRepository (ObjectContext context)
        : base(context)
    {
    }

    public override Machine GetById(object id)
    {
        return _objectSet.SingleOrDefault(s => s.Id== (int)id);
    }
} 
```

通用存储库

```
public abstract class Repository<T> : IRepository<T>
    where T : class, IAuditEntity
{
    protected IObjectSet<T> _objectSet;

    public Repository(ObjectContext context)
    {
        _objectSet = context.CreateObjectSet<T>();
    }

    public abstract T GetById(object id);

    public IEnumerable<T> GetAll()
    {
        return _objectSet;
    }

    public IEnumerable<T> Query(Expression<Func<T, bool>> filter)
    {
        return _objectSet.Where(filter);
    }

    public void Add(T entity)
    {
        _objectSet.AddObject(entity);
    }

    public void Remove(T entity)
    {            
        _objectSet.DeleteObject(entity); 
    }
  } 
```

控制器代码

```
 public class HomeController : Controller
  {
    private IUnitOfWork _unitOfWork;

    #region Core Action Methods

    public HomeController()
    {
        this._unitOfWork = new UnitOfWork(((IObjectContextAdapter)new BookContext()).ObjectContext);
    }

  private IEnumerable<BookViewModel> GetBookdsViewModels(int id)
    {
        //THE CODE WHERE ITS NOT RETURNING THE UPDATED VLAUES
        //var query = _unitOfWork.Books.GetAll().Where(d => d.Id== id);

        //I WANT TO CHANGE THIS CODE
        ObjectContext objectContext = ((IObjectContextAdapter)new BookContext()).ObjectContext;
        ObjectSet<Book> set = objectContext.CreateObjectSet<Book>();
        set.MergeOption = MergeOption.OverwriteChanges;
        var query = from a in set
                    where a.Id== id && !a.IsDeleted
                    select a;

 return query
            .Select(
            c => new BookViewModel
            {
                Id = c.Id ,
                Name = c.Name
            });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T19:28:55.860

我认为问题在于您直接针对数据库执行操作，然后尝试引用存储在存储库中的本地副本，并且它们是不同的。

```
public void UpdateAuthor(int id)
    {
        _context.ExecuteStoreCommand("sp_UpdateAuthor @param1", 
            new SqlParameter("param1", id));
     } 
```

当您运行此查询时，您正在更改数据库而不是本地 - 为什么不执行以下操作：

```
public void UpdateAuthor(int id)
{
  var book  = Books.GetById(id);
   /* make changes to your book object */
   _unit.Save();
} 
```

如果您想使用存储过程进行更改，您将不得不**处理**您的上下文，并重新创建存储库，以便您使用来自数据库而不是本地副本的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T20:56:06.240

扩展 Mark Oreta 的答案，您需要确保在您的数据库上手动执行存储过程后更新您的模型。如果您必须手动调用该存储过程，请稍后尝试：

```
_context.Entry<Book>(instanceOfAuthor).Reload(); 
```

这可能是：

```
_context.Entry<Book>(_context.Books.GetById(id)).Reload(); 
```

# hibernate - 在 Hibernate 中向列表添加投影

> ID：11852230
> 
> 赞同：2
> 
> 时间：2012-08-07T18:50:00.940
> 
> 标签：hibernate, projection

我有一个名为 Order 的 @Entity，我有一个名为 orderEmails 的字段或成员变量，如下所示。

```
@Entity
@Table(name = "order")
public class Order {

@Id
@Column(name = "order_int")
private Long id;

@OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY)
@JoinColumn(name = "order_int", insertable = false, updatable = false)
private List<OrderEmail> orderEmails; 
```

... }

我正在尝试在此 Order 上创建 Projections，这意味着我想从 Order 实体中选择一些特定的列，并从 OrderEmail 实体中选择一列

但是，当我在 orderEmails 字段上创建投影时。我没有得到完整的电子邮件列表。这就是我想要的。这是我正在尝试的代码

```
ProjectionList columnList = Projections.projectionList();
...
columnList.add(Projections.property("id").as("id"));
...
columnList.add(Projections.property("orderemails.EmailAddress").as("email")); 
```

注意，我也试过 columnList.add(Projections.property("orderemails").as("email")); 并将电子邮件（按原样）更改为列表，但没有帮助

是否可以在 Hibernate 的 List 上创建投影？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-09-23T18:53:36.267

我猜hibernate不提供这样的功能。为此，您必须使用数据库特定的函数，例如Oracle的[LISTAGG或 MySQL 的](https://www.techonthenet.com/oracle/functions/listagg.php)[GROUP_CONCAT](http://dev.mysql.com/doc/refman/5.7/en/group-by-functions.html#function_group-concat)。它将所有电子邮件（字符串）分组到一个列中，因此结果将是：

```
ORDER_ID     EMAILS
1            nemo@email, dory@email, whale@email
2            spongebob@email, squarepants@email 
```

您可以通过 sqlProjection 在 Hibernate 中使用特定于数据库的函数，因此代码将如下所示：

```
public List<Map> emailsByOrder(){
    Criteria c = session.createCriteria(Order.class,"order");

    Criteria critEmail = c.createCriteria("orderEmails", "emails");
    String listAgg = "LISTAGG({alias}.EMAIL_ADDRESS_COLUMN_NAME, ', ') WITHIN GROUP(ORDER BY {alias}.EMAIL_ADDRESS_COLUMN_NAME ASC) AS EMAILS";
    critEmail.setProjection(Projections.projectionList().add(Projections.groupProperty("order.idOrder").as("ORDER_ID"))
                                                        .add(Projections.sqlProjection(listAgg, new String[]{"EMAILS"}, new Type[]{new StringType()}))); 
    c.setResultTransformer(Transformers.ALIAS_TO_ENTITY_MAP);

    return (List<Map>) c.list();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T07:29:47.727

这不可能像您期望的那样。Hibernate 必须对根实体上的记录进行分组，这仅对完整实体进行。

*   您可以加载完整的实体以获取电子邮件并稍后在内存中进行转换。
*   您获取为每个电子邮件地址重复的根实体记录，并将它们组合在内存中

更新：

```
List<Object[]> results = session.createCriteria(Order.class)
    .joinAlias("orderEmails", "email")
    .setProjection(Projections.projectionList()
        .add(Projections.property("id").as("id"))
        .add(Projections.property("email.EmailAddress").as("email")))
    .list<Object[]>();

Map<int, List<String>> groups = new Hashmap<int, List<String>>();
for (Object[] items : results)
{
    if (groups.containsKey((long)items[0]))
        groups.get((long)items[0]).add((String)items[1]);
    else
        groups.add((long)items[0], new List<String>().add((String)items[1]));
}

return groups; 
```

而不是地图，也可以有 dtos 或类似的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-09T08:54:06.153

即使有点晚了，但永远不会太晚，您可以在里面使用列表进行正常投影，然后最后可以在休眠状态下使用以下命令返回一行：

```
.setResultTransformer(Criteria.DISTINCT_ROOT_ENTITY) 
```

此处的详细信息：[Criteria.DISTINCT_ROOT_ENTITY 与 Projections.distinct](https://stackoverflow.com/questions/25536868/criteria-distinct-root-entity-vs-projections-distinct)

# apache - ProxyPassMatch 与 ProxyPassReverse

> ID：11852238
> 
> 赞同：17
> 
> 时间：2012-08-07T18:50:37.853
> 
> 标签：apache, reverse-proxy, proxypass

伙计们，我们正在尝试为以下场景设置 Apache 反向代理：

*   传入请求采用以下形式`http://foo.com/APP/v1/main.html`
*   对于某些服务器，URL 将引用不同的版本，例如，`http://foo.com/APP/v2/main.html`
*   上游负载均衡器（HAProxy）会将请求发送到正确的服务器，该服务器将有一个面向 JBoss 服务器的 Apache2 反向代理。
*   当请求出现在 Apache 2 时，它将具有类似的请求路径`/APP/v1/main.html`
*   我们希望它（反向）代理到`http://localhost:8080/AppContext/main.html`，*而不考虑*URL 中的版本片段（v1、v2 等）。

我一直在尝试这样做：

```
ProxyPassMatch ^/.*?/APP.*?/(.*)$ http://localhost:8080/AppContext/$1
ProxyPassReverse /APP http://localhost:8080/AppContext 
```

我的问题是：

1.  我的用法`ProxyPassMatch`正确吗？
2.  我`ProxyPassReverse`的是“静态的”。我如何让它知道之后的潜在变量`/APP`？

感谢您的任何见解。

-拉吉

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-07T19:04:11.393

你已经接近了，试着稍微改变一下正则表达式来解释版本片段：

```
ProxyPassMatch ^/.*?/APP.*?/v[0-9]+/(.*)$ http://localhost:8080/AppContext/$1 
```

这`ProxyPassReverse`主要是为了确保在代理应用程序给出的响应中即时重写位置标头字段。因此，当它返回一个 301 重定向时，例如`http://localhost:8080/AppContext/something`，apache 知道将其更改为，`/APP/v1/something`因此代理后面的信息不会被暴露。因为您在反向代理中使用了动态 URL，所以这里有几个选择。您可以将其发送到 HAProxy 负载平衡器（不确定适合您的位置），或者您可以选择一个并希望获得最好的结果。例如，如果您有一个负载均衡器`/APP/balancer/`，然后将请求发送到`/APP/v1/`、`/APP/v2/`、`/APP/v3/`等。那么您可以这样做：

```
ProxyPassReverse /APP/balancer http://localhost:8080/AppContext 
```

否则，您可以将其指向一个并希望最好：

```
ProxyPassReverse /APP/v1 http://localhost:8080/AppContext 
```

# android - adb devices 不适用于 Mountain Lion

> ID：11852243
> 
> 赞同：4
> 
> 时间：2012-08-07T18:50:46.307
> 
> 标签：android, adb, osx-mountain-lion, nexus-one

我刚刚升级到 OS X 10.8 (Mountain Lion)。现在 adb devices 没有列出我的 Galaxy Nexus 或我的 Nexus One。我不敢相信它不起作用，因为我确信谷歌必须有 Android 开发人员使用谷歌手机和 Mountain Lion。请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T15:14:08.280

```
adb kill-server
adb start-server 
```

这个对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T02:01:59.727

我和我的团队也看到了山狮的类似问题，但这些问题主要是因为亚行无法正常工作。如评论中所述

```
adb kill-server
adb start-server 
```

是你最好的朋友。一直为我们工作。但是请注意，您可能必须多次执行此操作，这意味着它会挂起再次执行此操作。事实上，我们编写的自动化测试脚本会在一定程度上执行这些命令，但在感觉我们没有得到响应的那一刻。

# php - 制作更快的 jQuery AJAX 帖子

> ID：11852249
> 
> 赞同：0
> 
> 时间：2012-08-07T18:51:26.910
> 
> 标签：php, javascript, html, ajax

如何让 jQuery ajax 发布更快地连接到 php 文件？我可以启用一些缓存吗？这是我的代码

```
$.post("return.php",{"t": "editpost"},function(sResult)
    {
        switch($.trim(sResult))
        {
            case "success":
            {

            };break;

            case "error":
            {

            };break;
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-29T17:14:46.390

在函数末尾添加 return false

# javascript - 为什么我不能在 javascript 中访问这个变量？

> ID：11852250
> 
> 赞同：0
> 
> 时间：2012-08-07T18:51:27.507
> 
> 标签：javascript

我创建了一个对象，我想访问该对象中的变量。但是每次我运行它时，testThis 和 whatThis 变量都是未定义的。我不确定为什么会这样。

```
/* HTML above */
<script type="text/javascript">
    var formData;
    var dataClickTest;

    var FormRowData = function () {
        var self = this;

        self.someValue = "I am visible. Look Here!";

        self.frds = new Array();

        self.addRowData = function (ctrlData) {
            self.frds.push(ctrlData);
        }

        self.convertData = function (rowData) {
            var hi = rowData[0].attr('data-ctrltypeid');
            var hello = "hi";
        }
    }

    function postBackPart(div_id) {

        formData = $('#' + div_id).find('input, select').filter('[name*=".InputtedData"]');

        var testThis = FormRowData();      /* error here */
        var whatThis = testThis.someValue; /* error here */     

        $.ajax({
            url: '/TestEdit/Sections',
            type: 'POST',
            data: formData,
            success: function (result) {
            }
        });

        return false;
    }
</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T18:53:17.453

var testThis = **new** FormRowData();

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T18:53:52.360

`FormRowData`没有`return`语句，并且您没有使用`new`将其视为构造函数的关键字调用它，因此它返回`undefined`.

看起来您打算将其用作构造函数，因此：

```
var testThis = new FormRowData(); 
```

这应该可以解决这两个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T18:55:46.650

由于您实际上并未使用原型，因此您可以`new`完全跳过：

```
var FormRowData = function () {
    var self = {};

    self.someValue = "I am visible. Look Here!";

    self.frds = new Array();

    self.addRowData = function (ctrlData) {
        self.frds.push(ctrlData);
    }

    self.convertData = function (rowData) {
        var hi = rowData[0].attr('data-ctrltypeid');
        var hello = "hi";
    }

    return self;
} 
```

等效于您的代码而不需要`new`

# c# - 将 XML 数据添加到特定的父节点

> ID：11852251
> 
> 赞同：1
> 
> 时间：2012-08-07T18:51:27.970
> 
> 标签：c#, xml

我需要能够将 XML 数据添加到已创建的父节点并将其放置在特定的父节点下。

有没有人对最好的方法有任何建议？

我使用`XMLWriter`来创建原始 XML 文件。

```
 XmlDocument doc = new XmlDocument();
            doc.Load(filePath);
            for (int counter=0; counter<registeredEventCount; counter++)
            {

                try
                {
                    XmlNode checkEvent = doc.SelectSingleNode("Event/Event[@id='" + registeredArrayList[counter] + "']");
                    if (checkEvent != null)
                    {
                        try
                        {
                          XmlNode  checkDog = doc.SelectSingleNode("Event/Event[@id='" + registeredArrayList[counter] + "']/Dog[@id='" + ukcNumberArrayList[counter] + "']");

                            if (checkDog == null)
                            {

                                XmlElement newDogId = doc.CreateElement("Dog");
                                newDogId.SetAttribute("id", ukcNumberArrayList[counter].ToString());
                                XmlElement newDogName = doc.CreateElement("dogName");
                                newDogName.SetAttribute("id", dogNameArrayList[counter].ToString());
                                XmlElement newDogBreed = doc.CreateElement("breed");
                                newDogBreed.SetAttribute("id", breedArrayList[counter].ToString());
                                checkEvent.AppendChild(newDogId);
                                newDogId.AppendChild(newDogName);
                                newDogId.AppendChild(newDogBreed);
                                doc.Save(filePath);
                            }
                            else
                            {
                                MessageBox.Show("You have already registered this dog for this specific event");
                            }
                        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T19:06:34.663

编辑：随着代码的更改，我的旧答案变得无效。无论如何，我在 Visual Studio 中测试了您的代码。有效。这是我的输入 xml 文件：

```
<Event>
  <Event id="0">

  </Event>
</Event> 
```

和输出：

```
<Event>
  <Event id="0">
    <Dog id="1">
      <dogName id="2" />
      <breed id="3" />
    </Dog>
  </Event>
</Event> 
```

我的猜测是您的 XML 文件中有问题，并且 ifs 中的代码没有执行。我认为 XmlSerializer 对于简单的 XML 创建/更新来说更好，更不容易出错。

# backbone.js - Select 中使用 Backbone 集合的占位符

> ID：11852254
> 
> 赞同：0
> 
> 时间：2012-08-07T18:51:39.187
> 
> 标签：backbone.js

我有一个通过主干集合填充的选择框：

```
class Prog.Views.History extends Backbone.View

  template: JST['backbone/templates/shapes/history']
  tagName: "option"

  initialize: ->
    @model.bind('change:formatted', @render, this);

  render: ->
   $(@el).html(@template(history: @model))
   this 
```

骨干/模板/形状/历史

```
<option value="<%=history.get('origin')%>"><%=history.get('origin')%></option> 
```

这很好用，所有正确的数据都显示在选择框中，但我想要的第一个选项是“请选择”，即占位符......我考虑将一个名为“占位符”的记录注入到集合中但这似乎是一种迂回的方式。

这就是我所说的：

```
 appdenDropdown: (history) ->
    console.log("append trigger")
    view = new Prog.Views.History(model: history)
    $('select#history').append(view.render().el) 
```

我怎么能默认这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T19:55:58.680

首先我认为这个实现不能正常工作，我认为渲染的结果会是这样的：

```
<option><option value="the_origin">the_origin</option></option> 
```

注意*双重选项*。

一个适当的解决方案可能是这样的：

```
class Prog.Views.History extends Backbone.View
  tagName: "option"

  initialize: ->
    @model.bind('change:formatted', @render, this);

  render: ->
    $(@el).attr( "value", this.get( "origin" ) )
    $(@el).html( this.get("origin") )
    this 
```

这里不需要模板。

关于包含*“请选择”选项*。

将直接在 HTML 中硬编码的*“请选择”选项元素包含到**选择*元素中。

然后不用于`this.$el.html()`填充*select* but `this.$el.append()`，这将尊重实际的*默认选项*，并将在其后添加动态元素。

### 更新

例如，如果您的*选择元素*如下所示：

```
<select id="history"></select> 
```

让它看起来像这样：

```
<select id="history">
  <option value="0" selected="selected">Please select...</option>
</select> 
```

当您使用`append`添加*动态选项元素*时，*占位符选项元素*将保留。

# asp.net - 什么是 BulkEditGridview？

> ID：11852255
> 
> 赞同：1
> 
> 时间：2012-08-07T18:51:41.167
> 
> 标签：asp.net, gridview

我遇到了我以前从未见过的东西，`BulkEditGridview`？

我可以在那里找到一些对此的参考，但关于它实际上是什么以及与仅 a 有`GridView`什么 区别（如果有的话）的信息并不多。

如果没有，它为什么存在？它从哪里来的？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T18:54:29.863

看看这里

[http://dotnetdiscussion.wordpress.com/2008/04/06/aspnet-how-to-use-bulkeditgridview-to-save-hours-in-database-editing/](http://dotnetdiscussion.wordpress.com/2008/04/06/aspnet-how-to-use-bulkeditgridview-to-save-hours-in-database-editing/)

[http://mukarrammukhtar.wordpress.com/bulk-edit-gridview-in-net/](http://mukarrammukhtar.wordpress.com/bulk-edit-gridview-in-net/)

[http://www.codeproject.com/Questions/99001/BulkEditGridView](http://www.codeproject.com/Questions/99001/BulkEditGridView)

# css - Css匹配所有与祖先具有相同班级的孩子

> ID：11852256
> 
> 赞同：1
> 
> 时间：2012-08-07T18:51:41.237
> 
> 标签：css, css-selectors

我不认为这是可能的，但我希望被证明是错误的。

鉴于此html：

```
<div class='foo'>
  <div class='bar'></div>
  <div class='foo'></div>
</div> 
```

是否可以编写一个选择器来匹配第二个子 div，基于它与它的父级具有相同的类？

**注意**：我知道如何为这个示例 html 的第二个 div 编写选择器，我的问题是你是否可以用某种 css 魔法捕捉*我的班级与我父母的班级相同。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T18:53:06.517

Only if you know the name of the class:

```
.foo .foo {  } 
```

> my question is whether you can capture my class is the same as my parent's class with some kind of css magic

**No.** (*Maybe* with [LESS](http://lesscss.org/) or [SASS](http://sass-lang.com/), but I'm not sure).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T18:54:28.243

```
<style>
.foo { display: block; width: 300px; background: #eee; float: left; margin-right: 50px; }
.foo .bar { display: block; width: 300px; height: 100px; background: #ccc; float: left; }
.foo .foo { display: block; width: 300px; height: 100px; background: #ddd; float: left; }

.foo > .foo:nth-child(2) { color: red; }
</style>

<div class='foo'>
  <div class='bar'>A 1</div>
  <div class='foo'>A 2</div>
  <div class='bar'>A 3</div>
  <div class='foo'>A 4</div>
</div>

<div class='foo'>
  <div class='bar'>B 1</div>
  <div class='foo'>B 2</div>
  <div class='foo'>B 3</div>
  <div class='foo'>B 4</div>
</div>

<div class='foo'>
  <div class='foo'>C 1</div>
  <div class='bar'>C 2</div>
  <div class='bar'>C 3</div>
  <div class='foo'>C 4</div>
</div> 
```

[示例（图片）](http://s13.postimage.org/h5insnzuu/New_Bitmap_Image.jpg)

[第 n 个子 CSS3 属性](http://www.w3schools.com/cssref/sel_nth-child.asp)

# c# - 回发问题

> ID：11852259
> 
> 赞同：0
> 
> 时间：2012-08-07T18:51:53.343
> 
> 标签：c#, asp.net-mvc-3

当我在“审查”页面上回发时，我会检查模型状态并根据结果重新显示页面或继续。我有两个问题。

当它验证失败时，它会挂起部分视图，它在页面的原始获取上加载得很好。

**编辑：这是由 [HttpGet] 属性应用于局部视图的方法引起的。我删除了属性并重新渲染了部分。**

如果我注释掉部分内容，则整个页面将显示而没有任何 CSS 样式。它都是黑白文本。 **编辑：我仍然遇到页面缺少样式的问题**

```
 [HttpGet]
    public ActionResult Review()
    {
        var agmtsService = new AgreementsService();
        bool? scoreRelease = agmtsService.GetReleaseScoreIndicator();

        var vm = new ReviewModel {ReleaseScoreIndicator = scoreRelease};

        return View(vm);
    }

    [HttpPost]
    public ActionResult Review(ReviewModel model)
    {

        if(!ModelState.IsValid)
        {
            return View(model);`**This is displaying the view w/o head section and no css**`
        }

        return RedirectToAction("CheckOut", "Financial");
    } 
```

编辑：

**查看模型**

公共类 ReviewModel {

```
 public bool? ReleaseScoreIndicator { get; set; }

    // Terms & Conditions
    [RequiredToBeTrue(ErrorMessage = "Eligibility Checkbox must be checked.")]
    public bool TermsEligibility { get; set; }

    [RequiredToBeTrue(ErrorMessage = "True and Accurate Checkbox must be checked.")]
    public bool TermsAccurate { get; set; }

    [RequiredToBeTrue(ErrorMessage = "Identity Release Checkbox must be checked.")]
    public bool TermsIdentityRelease { get; set; }

    [RequiredToBeTrue(ErrorMessage = "Score Release Checkbox must be checked.")]
    public bool TermsScoreRelease { get; set; } 
```

}

公共类RequiredToBeTrueAttribute：RequiredAttribute { public override bool IsValid(object value) { return value != null && (bool)value; } }

看法

```
@model Registration.Web.Models.ReviewModel

@{
    ViewBag.DisableNavigation = true;
}
<script type="text/javascript">
    $(document).ready(function () {
        $('.open_review').toggle(function() {
            $(this).text('Done').parents('.review_section').addClass('open_for_review').find('.review_content').slideDown('fast');
            return false;
        }, function() {
            $(this).text('Review').parents('.review_section').removeClass('open_for_review').find('.review_content').slideUp('fast');
            return false;
        });

    });

</script>

<div class='section module'>
          <h2>
            Please Review Your Application
          </h2>
          <p>
            Remember that your application fee is
            <strong>
              not refundable.
            </strong>
            Review your information below and make corrections before submitting.
          </p>
          <div class='review_section'>
            <a class="button open_review" href="#">Review</a>
            <h4>
              Identification
            </h4>
            @{Html.RenderAction("Review", "PersonalInformation");}
          </div>
          <div class='review_section'>
            <a class="button open_review" href="#">Review</a>
            <h4>
              Education
            </h4>
            @{Html.RenderAction("Review", "MedicalEducation");}   /////hangs here         
          </div>
          <div class='review_section'>
            <a class="button open_review" href="#">Review</a>                              
                 @{Html.RenderAction("Review", "PostGraduate");}////then hangs here
            </div>
          </div>
          <div class='actions' id='terms_and_conditions'>

@using (Html.BeginForm("Review", "Agreements", FormMethod.Post))
{

    //"reviewForm","Agreements", FormMethod.Post

    @Html.ValidationSummary(true)

    <div class='group' id='data_release'>
        <h4>
            Data Release
        </h4>

        <p>
            Do you wish to release your scores?
        </p>
        <ul class='input_group'>
            <li>
                @Html.RadioButtonFor(model => model.ReleaseScoreIndicator, true)
                <label>
                    Yes
                </label>
            </li>
            <li>
                @Html.RadioButtonFor(model => model.ReleaseScoreIndicator, false)
                <label>
                    No
                </label>
            </li>
        </ul>

    </div>

              <div class='group' id='terms'>
                  <h4>
                      Terms &amp; Conditions

                  </h4>
                  @Html.ValidationSummary(false)

              <table>
                <tbody>
                  <tr>
                      <th>
                          @Html.CheckBoxFor(x => x.TermsEligibility)  
                         @* @Html.CheckBox("terms_eligibility")*@

                      </th>
                    <td>
                      <label for='terms_eligibility'>
                        I currently meet all of the
                        <a href="" target="_blank"> requirements</a>
                        and have read the
                        <a href="" target="_blank">Information</a>
                      </label>
                    </td>
                  </tr>
                  <tr>
                      <th>
                          @Html.CheckBoxFor(x => x.TermsAccurate) 
                        @*  @Html.CheckBox("terms_accurate")*@

                      </th>
                    <td>
                      <label for='terms_accurate'>
                        The information I've provided is true and accurate
                      </label>
                    </td>
                  </tr>
                  <tr>
                      <th>
                           @Html.CheckBoxFor(x => x.TermsIdentityRelease)  
                         @* @Html.CheckBox("terms_identity_release")*@

                      </th>
                    <td>
                      <label for='terms_identity_release'>
                        I authorize the release
                      </label>
                    </td>
                  </tr>
                  <tr>
                      <th>
                          @Html.CheckBoxFor(x => x.TermsScoreRelease) 
                          @*@Html.CheckBox("terms_score_release")*@

                      </th>
                    <td>
                      <label for='terms_score_release'>
                        I agree 
                      </label>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
              <div class='actions'>

                            <input type="submit" value="Go To Checkout" class="button" />

                  <a class="button" onclick="getForMasterPage('@Url.Action("CheckOut", "Financial")', null);">BYPASS</a>
              </div>

} </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T19:02:43.107

您是否需要在发布返回时设置 ReleaseScoreIndicator？看起来它为初始 GET 设置了，但随后的一个，它没有设置。视图是否使用该属性？

# java - 追根溯源——java.sql.SQLSyntaxErrorException: ORA-00900: invalid SQL statement

> ID：11852266
> 
> 赞同：1
> 
> 时间：2012-08-07T18:52:12.373
> 
> 标签：java, jdbc, oracle11g

当我在 Eclipse 中运行我的 Java-Oracle 11g-JDBC 代码时，我遇到了这个错误。我只是想创建一个表，然后向其中添加一些行。如何查看导致该错误的代码行？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T18:58:43.990

如果可以，请在 Java 之外直接针对 Oracle 数据库运行您尝试执行的 SQL。您将使用 SQL Developer 之类的工具获得更有意义的错误消息。在修补代码之前修复那里的 SQL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T07:25:48.870

如果您正在创建一个表并向该表添加行，请在带有 IN 和 OUT 参数的存储过程中执行所有这些操作，编译存储过程（这样做会消除所有错误）并从 Java 调用此过程。

这将有助于调试和使代码整洁。

问候

# powershell - 具有智能参数的 Powershell 函数

> ID：11852272
> 
> 赞同：0
> 
> 时间：2012-08-07T18:52:34.170
> 
> 标签：powershell, powershell-2.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T19:05:34.717

可能有更优雅的方法，但您可以这样做：
1\. 将“*”附加到您的参数值并对其使用 Test-Path。在这种情况下，您将其视为文件夹，因此*c:\test*将变为*c:\test\* *。
2a. 如果 Test-Path 返回*true*，则您有一个文件夹并且可以继续复制其内容。
2b。如果 Test-Path 返回*false*，请转到步骤 3。
3\. 按原样对参数使用 Test-Path。如果它返回*true*，那么它是一个文件。

**更新**
实际上，它比我想象的要简单得多。您可以将参数 PathType 与 TestPath 一起使用，并指定您是在查找文件夹还是文件。
-`PathType Container`将寻找一个文件夹。
-`PahType Leaf`将寻找一个文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T20:01:30.507

我会确定它是文本文件还是文件夹，然后从那里开始。下面的函数应该让你开始，在脚本运行后它可以像这样执行`Copy-Thing -filename "sourcefile.txt" -Destination "C:\place"`

```
Function Copy-Thing([string]$fileName,[string]$destination){
    $thing = Get-Item $fileName
    if ($thing.Extension -eq ".txt"){
        Get-Content | %{
            Copy-Item -Path $_ -Destination $destination
        }
    }
    elseif ($thing.PSIsContainer){
        Get-ChildItem -Path $fileName | %{
            Copy-Item -Path $_.FullName -Destination $destination
        }
    }
    else{
        Write-Host "Please specifiy a valid filetype (.txt) or folder"
    }
} 
```

# php - 带有 json 和 ajax 的 JQuery UI 自动完成

> ID：11852282
> 
> 赞同：11
> 
> 时间：2012-08-07T18:53:36.307
> 
> 标签：php, jquery, ajax, json, autocomplete

我已经看到很多关于通过 JSON 传递带有标签和值属性的数组的问题，但关于传递字符串的问题不多。我的问题是我似乎无法填充我的自动完成功能。我运行了一个转储函数，并将这些示例值通过 JSON 传递给自动完成：

```
0: 23456
1: 21111
2: 25698 
```

这是一些代码：

```
$("#auto_id").autocomplete( {
    source: function(request,response) {

        $.ajax ( {
          url: "fill_id.php",
          data: {term: request.term},
          dataType: "json",
          success: function(data) {
            //what goes here?
                 } 
    }) }
   }); 
```

这是fill_id.php：

```
$param = $_GET['term'];
$options = array();

$db = new SQLite3('database/main.db');
    $results = $db->query("SELECT distinct(turninId) FROM main WHERE turninid LIKE '".$param."%'");

while ($row_id = $results->fetchArray()) {
        $options[] =  $row_id['turninId']; 
    }   
echo json_encode($options); 
```

我的自动完成仍然空白。如何更改我的 JSON 数组以填充它？或者我在我的 ajax 成功函数中包含什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-07T19:22:27.850

您可以非常坚持 jQuery UI 的自动完成的远程演示：http: [//jqueryui.com/resources/demos/autocomplete/remote-jsonp.html](http://jqueryui.com/resources/demos/autocomplete/remote-jsonp.html)

要将结果放入自动完成列表中，您需要在 ajax 成功函数中放置一个带有标签和值的对象到响应参数（实际上是一个函数）：

```
source: function( request, response ) {
    $.ajax({
        url: "fill_id.php",
        data: {term: request.term},
        dataType: "json",
        success: function( data ) {
            response( $.map( data.myData, function( item ) {
                return {
                    label: item.title,
                    value: item.turninId
                }
            }));
        }
    });
} 
```

但这仅在您稍微修改您的 fill_id.php 时才有效：

```
// escape your parameters to prevent sql injection
$param   = mysql_real_escape_string($_GET['term']);
$options = array();

// fetch a title for a better user experience maybe..
$db = new SQLite3('database/main.db');
    $results = $db->query("SELECT distinct(turninId), title FROM main WHERE turninid LIKE '".$param."%'");

while ($row_id = $results->fetchArray()) {
    // more structure in data allows an easier processing
    $options['myData'][] = array(
        'turninId' => $row_id['turninId'],
        'title'    => $row_id['title']
    ); 
}

// modify your http header to json, to help browsers to naturally handle your response with
header('Cache-Control: no-cache, must-revalidate');
header('Expires: Mon, 26 Jul 1997 05:00:00 GMT');
header('Content-type: application/json');

echo json_encode($options); 
```

当然，当您的表格中没有标题或任何内容时，您也可以保持原样并在成功回调中重复 id。重要的是，您`response`在自动完成中使用值/项目对填充函数：

```
// this will probably work without modifying your php file at all:
response( $.map( data, function( item ) {
    return {
        label: item,
        value: item
    }
})); 
```

编辑：更新了新 jquery UI 的自动完成 ui 的参考链接

# javascript - 使用 gruntjs 自定义初始化任务重命名模板文件夹

> ID：11852283
> 
> 赞同：4
> 
> 时间：2012-08-07T18:53:48.443
> 
> 标签：javascript, gruntjs

我正在尝试为[Grunt](https://github.com/cowboy/grunt)中的个人模板创建自定义*初始化任务*。

这是在一个之后生成我的新项目的 js`grunt init:mytemplate`

```
exports.description = 'Try Grunt';
exports.warnOn = '*';

exports.template = function(grunt, init, done) {
  grunt.helper('prompt', {type: 'skin'}, [
    grunt.helper('prompt_for', 'name', 'trygrunt'),
    grunt.helper('prompt_for', 'title', 'Im Trying GruntJS'),
    grunt.helper('prompt_for', 'author_name', 'Myself')
  ],
  function(err, props) {
    var files = init.filesToCopy(props);
    init.copyAndProcess(files, props);
    done();
  });
}; 
```

一切正常：`root`根据`rename.json`信息从自定义模板的文件夹中正确生成或重命名文件和文件夹。

问题是：我怎样才能动态地重命名文件夹而不仅仅是文件？

IE

```
{
    "libs/name.js": "libs/{%= name %}.js" //this works fine
    "src/name": "src/{%= name %}" //this doesn't work
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-03T11:59:12.190

这可以通过修改 init.filesToCopy 对象的结果来实现。但是，您需要修改键而不是每对的值。

例如，我有一个名为 lib/ 的文件夹，我希望将其内容复制到 app/

```
var files = init.filesToCopy(props),
    libFolder = 'app';

// Repath the files correctly
for (var file in files) {
    if (file.indexOf('lib/') > -1) {
        var path = files[file],
            newFile = file.replace('lib/', libFolder + '/');
        files[newFile] = path;
        delete files[file];
    }
}

init.copyAndProcess(files, props); 
```

还值得注意的是 rename.json 适用于 lib/ 值*而不是*新文件夹。

我做过的一件事是使用 props.main 值来提取 libFolder 值（例如 libFolder = props.main.split('/')[0]）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T19:25:47.740

该`init.filesToCopy`方法仅在`renames.json`首次构建`files`对象时查看特定文件（而不是目录）匹配。最好的办法是以编程方式修改 和之间的`files`对象。`init.filesToCopy``init.copyAndProcess`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T04:29:32.337

完成此操作并绕过无法重命名文件夹的限制的另一种方法是 1) 设置 grunt-contrib-copy 任务来复制文件夹和文件并将所需的任何名称应用于新文件夹/文件，并且然后 2) 让 grunt-contrib-clean 任务清除旧文件/文件夹，从而产生与重命名文件夹相同的净效果。

# c# - 计算二维空间中两点之间的对角线交点时如何确定+/-符号？

> ID：11852284
> 
> 赞同：3
> 
> 时间：2012-08-07T18:53:50.080
> 
> 标签：c#, .net, graph, geometry, 2d

这是[另一个问题](https://stackoverflow.com/questions/11727151/line-intersections-for-diagonals-on-a-2d-plane-in-c-sharp)的一个分支，与[Keith Randall](https://stackoverflow.com/a/11727253/938668)对该问题的回答有关。请快速查看那里的图像，看看下面的功能正在尝试做什么。

`x2 != x1`简而言之，如果和 ，则 2D 网格上的任何两点都会有两个对角线交点`y2 != y1`。我实现了以下功能，但无法弄清楚如何确定要从哪个单元格中减去 delta 以及要添加到哪个单元格。结果，对于某些坐标对，结果是准确的，而对于其他坐标，结果是相反的。

```
// This class is the same as [Point] except
// it uses BigInteger instead of Int32 types.
public class Cell
{
    System.Numerics.BigInteger X = 0;
    System.Numerics.BigInteger Y = 0;
}

public List<Cell> GetIntersections (Cell c1, Cell c2)
{
    List<Cell> cells = new List<Cell>();
    System.Numerics.BigInteger delta = 0;
    System.Numerics.BigInteger deltaHalf = 0;
    System.Numerics.BigInteger width = 0;
    System.Numerics.BigInteger height = 0;

    width = System.Numerics.BigInteger.Abs(c2.X - c1.X);
    height = System.Numerics.BigInteger.Abs(c2.Y - c1.Y);
    delta = System.Numerics.BigInteger.Abs(height - width);
    deltaHalf = System.Numerics.BigInteger.Divide(delta, 2);

    // INTRODUCE CONDITIONS HERE TO DETERMINE +/- COMBINATION.
    cells.Add(new Cell(c1.X - deltaHalf, c1.Y + deltaHalf));
    cells.Add(new Cell(c2.X + deltaHalf, c2.Y - deltaHalf));

    return (cells);
} 
```

起初我认为这是一个简单的梯度/斜率问题，但我似乎无法找到`slope`和`+/- deltaHalf`组合之间的一致相关性。

**重要提示：**请注意，可接受的答案只能进行 x1、y1、x2、y2 比较。由于性能损失，实际上计算线的斜率不是一种选择。我们已经在进行除以 2 且无法再进行除法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T19:50:29.000

您不能简单地使用斜边 ( `delta`)。你必须发现[三角形的高度](http://en.wikipedia.org/wiki/Right_triangle#Altitude)。而且，正如您将看到的，要获得高度，您必须计算腿（使用勾股定理）。

然而，要实现这个使用`BigInteger`需要一些额外的帮助，因为会有一个平方根。我使用了[此处提供](http://social.msdn.microsoft.com/Forums/en-US/csharplanguage/thread/c13d3fec-21d9-4f74-92de-a6132d5e9915/)的解决方案（*Newton Raphson 方法*）。

让我们得到这些值：

```
 // leg = sqrt(hypoteneuse²)/2)
    triangleLeg = SqRtN(System.Numerics.BigInteger.Divide(System.Numerics.BigInteger.Pow(delta, 2), 2));
    // altitude = leg²/hypoteneuse
    triangleAltitude = System.Numerics.BigInteger.Divide(System.Numerics.BigInteger.Pow(triangleLeg, 2), delta); 
```

现在，重点来说，我们将使用`deltaHalf`(for **Y** ) 和`triangleAltitude`(for **X** )。

我已经这样做了：

```
 // INTRODUCE CONDITIONS HERE TO DETERMINE +/- COMBINATION.
        cells.Add(
            new Cell()
            {
                X = c1.X < c2.X? c1.X - triangleAltitude : c1.X + triangleAltitude,
                Y = c1.Y < c2.Y ? c1.Y - deltaHalf : c1.Y + deltaHalf
            }
        );

        cells.Add(
            new Cell()
            {
                X = c2.X < c1.X ? c2.X - triangleAltitude : c2.X + triangleAltitude,
                Y = c2.Y < c1.Y ? c2.Y - deltaHalf : c2.Y + deltaHalf
            }
        ); 
```

任何反馈将不胜感激。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T19:55:00.853

我知道答案是简单的比较，而不是计算斜边。

```
public List<Cell> GetCellIntersections (Cell cell1, Cell cell2)
{
    Cell c1 = null;
    Cell c2 = null;
    List<Cell> cells = null;
    System.Numerics.BigInteger delta = 0;
    System.Numerics.BigInteger deltaHalf = 0;
    System.Numerics.BigInteger width = 0;
    System.Numerics.BigInteger height = 0;

    cells = new List<Cell>();

    // Sorting on y reduces conditions from 8 to 4.
    if (cell1.Y < cell2.Y)
    {
        c1 = cell1;
        c2 = cell2;
    }
    else
    {
        c1 = cell2;
        c2 = cell1;
    }

    if ((c1.X != c2.X) && (c1.Y != c2.Y))
    {
        width = System.Numerics.BigInteger.Abs(c2.X - c1.X);
        height = System.Numerics.BigInteger.Abs(c2.Y - c1.Y);
        delta = System.Numerics.BigInteger.Abs(height - width);
        deltaHalf = System.Numerics.BigInteger.Divide(delta, 2);

        if ((c1.X < c2.X) && (c1.Y < c2.Y))
        {
            if (width < height)
            {
                cells.Add(new Cell(this, c1.X - deltaHalf, c1.Y + deltaHalf));
                cells.Add(new Cell(this, c2.X + deltaHalf, c2.Y - deltaHalf));
            }
            else
            {
                cells.Add(new Cell(this, c1.X + deltaHalf, c1.Y - deltaHalf));
                cells.Add(new Cell(this, c2.X - deltaHalf, c2.Y + deltaHalf));
            }
        }
        else
        {
            if (width < height)
            {
                cells.Add(new Cell(this, c1.X + deltaHalf, c1.Y + deltaHalf));
                cells.Add(new Cell(this, c2.X - deltaHalf, c2.Y - deltaHalf));
            }
            else
            {
                cells.Add(new Cell(this, c1.X - deltaHalf, c1.Y - deltaHalf));
                cells.Add(new Cell(this, c2.X + deltaHalf, c2.Y + deltaHalf));
            }
        }
    }

    return (cells);
} 
```

# vim - 类似于 Mainframes 中的编辑器

> ID：11852285
> 
> 赞同：1
> 
> 时间：2012-08-07T18:53:51.207
> 
> 标签：vim, editor, vi, ispf

我一直在使用我非常熟悉的大型机 (ISPF) 中的编辑器。现在我在一个unix系统上工作，我被迫使用VI。VI 很好，但是由于我习惯了 Mainframes 中的编辑器，由于命令集的差异，我很难过。unix 中是否有类似于大型机中的编辑器的编辑器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T19:52:07.230

看起来至少还有一个免费的：[Hybrid Editor XE](http://www.geocities.jp/sakachin2/index.htm)。[This page](http://www.planetmvs.com/spfeditor/)有一些死的和商业的，包括一个名为[uni-SPF](http://www.wrkgrp.com/unispf/index.html)的商业产品。

你可能想谷歌`ISPF Unix`或`SPF Linux`类似的东西。

# teradata - Teradata：查询 dbc.DBQLogTbl 以按时间顺序返回 SQL 时，我按什么字段排序？

> ID：11852286
> 
> 赞同：1
> 
> 时间：2012-08-07T18:53:51.307
> 
> 标签：teradata

此视图中有几个日期/时间字段，我永远无法围绕要按哪个列（以及哪个辅助列）进行排序，以便按照它们在服务器上执行的顺序检索 SQL 语句列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T21:36:55.970

**StartTime** - 与将查询提交到 Teradata 进行解析时关联的时间戳。

**FirstStepTime** - 与执行查询的第一步时关联的时间戳。

**FirstRespTime** - 与第一行返回给客户端的时间相关联的时间戳。

StartTime 和 FirstStep 时间之间的时间间隔包括解析时间和 Teradata 的动态工作负载管理器强制执行的任何工作负载限制延迟。为了简单起见，我将参考 Teradata 的 Carrie Ballinger 撰写的一篇关于处理延迟时间的优秀[文章](http://developer.teradata.com/blog/carrie/2012/07/intrepreting-dbql-delaytime-in-teradata-13-10)。

# javascript - 基于查询字符串的活动选项卡

> ID：11852295
> 
> 赞同：2
> 
> 时间：2012-08-07T18:54:33.407
> 
> 标签：javascript, jquery, html

我已经创建了 jquery 选项卡。

```
 <div id="tabs_container">
        <ul id="tabs">
            <li class="active"><a href="#tab1">Allgemeines</a></li>
            <li><a href="#tab2">Kontakt</a></li>
            <li><a href="#tab3">Musik</a></li>
            <li><a href="#tab4">Hauptfoto</a></li>
            <li><a href="#tab5">Einstellungen</a></li>
        </ul>
    </div>
    <div id="tabs_content_container">
        <div id="tab1" class="tab_content" style="display: block;">
            <?php include('1.php'); ?>
        </div>
        <div id="tab2" class="tab_content">
            <?php include('2.php'); ?>
        </div>
        <div id="tab3" class="tab_content">
            <?php include('3.php'); ?>
        </div>
        <div id="tab4" class="tab_content">
            <?php include('4.php'); ?>
        </div>
        <div id="tab5" class="tab_content">
            <?php include('5.php'); ?>
        </div>
    </div>
</div>
<script type="text/javascript">
/* <![CDATA[ */
$(document).ready(function(){
    $("#tabs li").click(function() {
        //  First remove class "active" from currently active tab
        $("#tabs li").removeClass('active');

        //  Now add class "active" to the selected/clicked tab
        $(this).addClass("active");

        //  Hide all tab content
        $(".tab_content").hide();

        //  Here we get the href value of the selected tab
        var selected_tab = $(this).find("a").attr("href");

        //  Show the selected tab content
        $(selected_tab).fadeIn();

        //  At the end, we add return false so that the click on the link is not executed
        return false;
    });
});
/* ]]> */
</script> 
```

我需要从 url 中选择标签，这意味着如果`http://example.com/settings.php#tab2`

选项卡 2 一个活动选项卡。#tab3 然后选项卡 3 是一个活动选项卡。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T19:03:13.060

```
$(document).ready(function(){
  $(".active").removeClass("active");
  $(document.location.hash).addClass("active");
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T19:03:02.707

window.onhashchange

使用上面的本机代码。它会在 url 中发生哈希更改时触发

```
window.onhashchange=function(){
if(document.location.hash ==="#tab2"){
//write your code here
}

} 
```

希望它会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-21T09:10:14.173

[http://jsfiddle.net/AavsW/21/](http://jsfiddle.net/AavsW/21/)

```
$('#wizard').tabs({ disabled: [1, 2] }); 
```

试试这个我希望它能解决你的问题

# silverlight-4.0 - 如何在嵌入 html/javascript showModalDialog 的 silverlight 中获取 (ScriptObject)HtmlPage.Window.GetProperty("Xrm")

> ID：11852297
> 
> 赞同：0
> 
> 时间：2012-08-07T18:54:36.400
> 
> 标签：silverlight-4.0, dynamics-crm-2011, crm

嗨，在 CRM2011 中，我在表单中创建了自定义按钮。单击该按钮时，它会打开 javascript 模式对话框。此模式对话框调用嵌入 silverlight 应用程序的 html。所以我的问题是如何获得以下信息。如果 silverlight 应用程序处于形式，我们可能会轻松获得以下值，但我的 silverlight 应用程序会在模式对话框中打开。

```
var xrmProperty = (ScriptObject)HtmlPage.Window.GetProperty("Xrm"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T12:42:49.537

尝试以下代码

```
dynamic xrmnew = (ScriptObject)HtmlPage.Window.GetProperty("Xrm");
if (xrmnew == null)
{
    HtmlWindow parentWindow = HtmlPage.Window.GetProperty("parent") as HtmlWindow;
    xrmnew = (ScriptObject)parentWindow.GetProperty("Xrm");
}
Guid Id = new Guid(xrmnew.Page.data.entity.getId()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T19:00:59.260

你想和开场白说话。例如，在 JavaScript 中你会调用：

```
window.opener.Xrm.Page.getAttribute('cei_name').getValue() 
```

获取表单上“cei_name”属性的值。

# c# - jquery ajax 发布到 .aspx 页面加载 - 如何读取发布的变量？

> ID：11852298
> 
> 赞同：0
> 
> 时间：2012-08-07T18:54:37.967
> 
> 标签：c#, javascript, jquery, vb.net, json

我正在尝试将 ajax 发布到 aspx 页面。如何读取变量“myVar”？在下面的代码中 `HttpContext.Current.Request("myVar")`什么也没带回来

```
var p = { "myVar": JSON.stringify(tableOBJ) };

$.ajax({
    type: "POST",
    url: "Default2AJAX.aspx",
    data: p,
    success: function (data) {

    }
}); 
```

**Default2AJAX.aspx 后面的代码**

```
Partial Class Default2AJAX
    Inherits System.Web.UI.Page

    Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

        Dim s As String = HttpContext.Current.Request("myVar") ''not working???????

    End Sub

End Class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T19:08:09.110

我认为应该是

```
HttpContext.Current.Request.Form("myVar") 
```

# php - 如何将链接添加到php动态生成的表中以返回值？

> ID：11852299
> 
> 赞同：1
> 
> 时间：2012-08-07T18:54:44.717
> 
> 标签：php, mysql, database

```
while($row = mysql_fetch_array($result)) {
    echo "<tr>";
        echo "<td>" . $row['mf_id'] . "</td>";
        echo "<td>" . $row['Manufacturer'] . "</td>";
    echo "</tr>";
} 
```

我想让Manufacturer列可点击，并将对应`mf_id`值的值返回到另一个页面

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T18:57:27.840

你可以在任何你想要的上下文中使用你的变量，包括锚标签：

```
echo '<td><a href="', htmlspecialchars('yourpage.php?mf_id=' . $row['mf_id']), '">',
    htmlspecialchars($row['mf_id']), '</a></td>'; 
```

如果要链接整行，则需要 JavaScript 单击处理程序。否则，简单的锚标签会做你想做的事。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T18:59:54.623

我想这就是你要找的。

尝试这个：

```
while($row = mysql_fetch_array($result))
{
    echo "<tr>";
    echo "<td>" . htmlspecialchars($row['mf_id']) . "</td>";
    echo "<td><a href=\"yourlink.php?mf_id=" . htmlspecialchars($row['mf_id']) . "\">" . $row['Manufacturer'] . "</a></td>";
    echo "</tr>";
} 
```

因此，当您单击该链接时，您将被带到“yourlink.php”页面。如果您想要 $row['mf_id'] 中的值，请执行以下操作：

```
$mf_id = $_GET['mf_id'] 
```

$mf_id 现在将保存传递给页面的值。

# cocoa-touch - push 和 modal segues 的区别

> ID：11852300
> 
> 赞同：4
> 
> 时间：2012-08-07T18:54:46.463
> 
> 标签：cocoa-touch, uistoryboard, uistoryboardsegue

我只是不知道如何在我的故事板中使用 segue。我什么时候应该使用推送转场，什么时候应该使用模态转场？它们彼此有何不同？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T18:57:28.537

**如果您想在导航控制器**的上下文中从一个视图控制器推送到另一个视图控制器，您可以使用推送序列。

您可以使用模态序列在另一个视图控制器上呈现一个视图控制器。这通常是从屏幕的底部到顶部的动画完成的。这可以在导航控制器内部完成，也可以不在导航控制器内部完成。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-08-28T14:37:07.880

**推动转场**

它将一个新的 VC 添加到`navigationController`. 如果我们需要以继承方式管理我们的视图，我们应该使用它。它向导航堆栈添加了新视图。**显示返回按钮**。单击后退按钮时`popped`，VC 来自`navigationController`.

**模态搜索**

A`modal segue`只是一个 VC 以模态方式呈现另一个 VC。**未创建导航**堆栈。不显示返回按钮。您必须根据需要自定义创建。

# android - 动画完成时启用按钮android

> ID：11852301
> 
> 赞同：0
> 
> 时间：2012-08-07T18:54:49.297
> 
> 标签：android, viewflipper

我有`ViewFlipper`3 个视图，每个视图显示不同的 Layout ，每个孩子都有一个下一步按钮。

当点击它时，它使用 "ViewFlipper" 动画过渡到另一个孩子。当用户单击按钮动画开始时我想要什么我想禁用所有按钮以防止动画冲突。当我在一个按钮上快速单击多次时我面临的问题是我重新启动动画。

到目前为止我尝试过的

现在通过将所有动画对象连接到一个侦听器并保留一个布尔值来指示动画是否正在运行。`onTouchEvent()`如果标志为真，`Activity`我返回真，否则我返回超级方法。此标志在`onAnimationStart`回调中设置为 true，在`onAnimationEnd`不起作用时设置为 false。当我记录方法调用时，它显示`onAnimationEnd`在动画完全结束之前调用。

有什么建议可以解决这个问题吗？？

代码

```
public class CreateNewKhtmehActivity extends FragmentActivity implements
        OnClickListener, AnimationListener {    
    AtomicBoolean isAnimationPlaying = new AtomicBoolean(false);
    // phase 1
    Button phase1_continue_button;
    // phase 2      
    Button phase2_continue_button;
    // phase 3
    Button phase3_start_session;

    /** Called when the activity is first created. */
    ViewFlipper flipper;
    Animation flip_in_from_left, flip_in_from_right, flip_out_to_left,
            flip_out_to_right, stay_still;

    RelativeLayout phase1;
    RelativeLayout phase2;
    RelativeLayout phase3;

    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

        setContentView(R.layout.create_new_session);

        /*
         * 
         * phase 1
         */
        phase1 = (RelativeLayout) findViewById(R.id.phase1);
        setUpUIForPhase1(phase1);

        // phase2
        phase2 = (RelativeLayout) findViewById(R.id.phase2);
        setUpUIForPhase2(phase2);

        // phase 3
        phase3 = (RelativeLayout) findViewById(R.id.phase3);
        setUpUIForPhase3(phase3);
        /*
         * Animation
         */

        flipper = (ViewFlipper) findViewById(R.id.main_flipper);
        flipper.setDrawingCacheEnabled(true);

        flipper.setDisplayedChild(2);
        flip_in_from_left = AnimationUtils.loadAnimation(
                getApplicationContext(), R.anim.push_in_from_left);
        flip_in_from_left.setAnimationListener(this);
        flip_in_from_right = AnimationUtils.loadAnimation(
                getApplicationContext(), R.anim.push_in_from_right);
        flip_in_from_right.setAnimationListener(this);
        flip_out_to_left = AnimationUtils.loadAnimation(
                getApplicationContext(), R.anim.push_out_to_left);
        flip_out_to_left.setAnimationListener(this);
        flip_out_to_right = AnimationUtils.loadAnimation(
                getApplicationContext(), R.anim.push_out_to_right);
        flip_out_to_right.setAnimationListener(this);
        stay_still = AnimationUtils.loadAnimation(getApplicationContext(),
                R.anim.stay_still);

        stay_still.setAnimationListener(this);

    }

    private void setUpUIForPhase3(View v) {

        phase3_start_session = (Button) v
                .findViewById(R.id.start_session_button);
        phase3_start_session.setOnClickListener(this);
     }

    private void setUpUIForPhase2(View v) {

        phase2_continue_button = (Button) v
                .findViewById(R.id.phase2_continue_button);
        phase2_continue_button.setOnClickListener(this);
    }
    private void setUpUIForPhase1(View v) {
        phase1_continue_button = (Button) phase1
                .findViewById(R.id.phase1_continue_Button);
        phase1_continue_button.setOnClickListener(this);

    }

    public void onBackPressed() {

        int currentChild = flipper.getDisplayedChild();
        switch (currentChild) {
        // first displayed child
        case 0:
            flipNext();
            if (this.move_from_phase1_to_phase3) {
                flipper.setDisplayedChild(2);

            } else {
                spinner_from.invalidate();
                spinner_to.invalidate();
                flipper.setDisplayedChild(1);
            }

            break;
        case 1:
            flipNext();
            flipper.setDisplayedChild(2);
            break;
        default:
            super.onBackPressed();
        }

    }

    public void onClick(View v) {
        System.out.println("onClick");

        switch (v.getId()) {
        case R.id.phase1_continue_Button:
            spinner_from.invalidate();
            spinner_to.invalidate();
            flipPrevious();
            if (this.move_from_phase1_to_phase3) {
                flipper.setDisplayedChild(0);
            } else {
                flipper.setDisplayedChild(1);
            }

            break;
        case R.id.phase2_continue_button:
            flipPrevious();
            flipper.setDisplayedChild(0);

            break;

        case R.id.start_session_button:
            insetNewSession();

            break;

        }

    }

    // Methods concerning the flip

    public void flipNext() {

        flipper.setInAnimation(flip_in_from_right);

        flipper.setOutAnimation(flip_out_to_left);

    }

    public void flipPrevious() {

        flipper.setInAnimation(flip_in_from_left);

        flipper.setOutAnimation(flip_out_to_right);

    }

    public void stayStill() {

        flipper.setInAnimation(stay_still);

        flipper.setOutAnimation(stay_still);

    }

     .......
     ........

     @Override
     public boolean onTouchEvent(MotionEvent event) {
     System.out.println("isAnimationPlaying " + isAnimationPlaying.get());
     if (isAnimationPlaying.get()) {
     return true;
     } else {
     return super.onTouchEvent(event);
     }

    // }

    public void onAnimationEnd(Animation animation) {
        System.out.println("onAnimationEnd");
            isAnimationPlaying.set(true);
    }

    public void onAnimationRepeat(Animation animation) {
        System.out.println("onAnimationRepeat");
    }

    public void onAnimationStart(Animation animation) {
        System.out.println("onAnimationStart");
        isAnimationPlaying.set(false);

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T19:35:05.000

我可以建议 2 项改进（但是我没有机会尝试它，`ViewFlipper`所以我不能保证它会达到预期的效果）：

**1）**甚至在动画开始之前将标志设置为`true`（让它成为按钮单击侦听器内部要做的第一件事）。

**2)**为了延长标志为真的时间，不要将其设置`false`在`onAnimationEnd`. 而不是直接设置让`onAnimationEnd`创建一个`Runnable`（将标志设置为`false`）并发布它以在下次UI线程准备好执行它时运行。所以不是现在设置它，而是稍后完成**（**一旦当前的 UI 线程工作单元已经运行）。以防万一您不知道 - 在内部有一个 Runnables 消息队列要在主 UI 线程上执行。并且`onAnimationEnd`作为当前 UI 更改的一部分在主 UI 线程上运行。完成 UI 更改后，您`Runnable`将得到处理。这样你就可以推迟设置为假。应该是这样的：

```
@Override
protected void onAnimationEnd() {
    Runnable resetter = new Runnable() {
        @Override
        public void run() {
            yourFlag = false;
        }
    };
    // handler is an instance of android.os.Handler,
    // it should be created somewhere before on the main UI thread
    // using the simplest Handler() constructor
    handler.post(resetter);
} 
```

# java - Hibernate ORM：如何避免获取@OneToOne 映射对象？

> ID：11852302
> 
> 赞同：2
> 
> 时间：2012-08-07T18:54:52.133
> 
> 标签：java, spring, hibernate, jpa, orm

我有以下实体：

Employee [@Id Long id, String name, @OneToOne Address branchAddress, @OneToOne Address homeAddress]

地址 [@Id Long id, String street, String City, String zipcode, Country country]

Country [@Id Long id, String name, String currency, String isoCode]

我的问题是当我尝试加载员工时，大多数时候我不想要地址。获取地址获取地址和后续国家。这些是每次我加载员工时都会执行的额外查询。

我试过制作 @OneToOne(FetchType.LAZY) 但不起作用，它仍然会提取不需要的信息。

如何避免获取复合对象？

我希望最终结果不包含地址对象，因为在 20 个场景中需要一次，我可以单独获取它们。

任何想法，如何实现这一点。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T19:27:04.163

如果我们的 oneToOne 值不可为空，您可以通过添加`optional=false`：@OneToOne(optional=false, fetch = FetchType.LAZY) 来实现延迟加载。

它[在这里得到了完美的解释](https://stackoverflow.com/q/1444227/233495)。

# javascript - 在 JavaScript/jQuery 中，是否有一种更短的方法可以在同一个测试变量上编写带有多个 OR 的“if”语句？

> ID：11852303
> 
> 赞同：2
> 
> 时间：2012-08-07T18:54:55.683
> 
> 标签：javascript, jquery

我知道要声明多个变量，有一个快捷方式，例如`var x=1,y=2,z=3`.

现在，如果我有一个`if`测试 ONE 变量的语句，但对于许多值，例如：

```
if (x==1 || x==15 || x==25 || x==150){

} 
```

由于`x`在现实生活中的例子会更长，我想找到一个快捷方式来枚举所有这些值，一个接一个，而不是每次都写变量的名称）

我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T18:55:52.017

您可以使用可能值的数组并测试以查看变量是否出现在其中。

```
if ([1, 15, 25, 150].indexOf(x) > -1) { 
```

IE8 及更早版本不支持此功能。请参阅[MDN 文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)，其中包含针对旧浏览器的解决方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-07T18:57:32.723

您是否考虑过 case-switch 语句？不是很花哨，但未被充分利用且易于阅读，并且可以移植到大多数其他编程语言：

```
switch (x) {
case 1:
case 15:
case 25:
case 150:
  // do something
  break;
} 
```

如果您担心性能，我运行了一个[jsPerf 测试用例](http://jsperf.com/if-statement-with-many-ors)，这种技术在 Chrome 中是最快的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-07T18:57:52.160

您可以使用 inArray 并执行此操作（跨浏览器兼容）

```
if(jQuery.inArray(x,[1,15,125,150]) > -1)
{
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-07T19:05:03.423

如果您有很多项目要检查，那么地图（使用 JavaScript 对象）可以很整洁并且适用于所有浏览器：

```
var items = {1:true, 15:true, 25:true, 150:true};
if (items[x] === true) {
    // Found x in items
} 
```

对于大量的项目，映射是一种比线性搜索数组的其他示例更有效的查找机制。

我还发现它的代码维护起来比多行`if`语句要简单得多。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-07T19:26:21.047

[UnderscoreJS](http://underscorejs.org/)有一个 .any 函数：

```
var testArray = [1,15,125,150];
if (_.any(testArray, function (item) { return item === x; })) {
  // do stuff
} 
```

该库具有许多处理数组的强大功能。

# java - 线程“主”java.lang.NullPointerException 中的异常，不知道我在做什么错

> ID：11852304
> 
> 赞同：0
> 
> 时间：2012-08-07T18:54:57.087
> 
> 标签：java, exception, nullpointerexception

当我想运行它时出现此错误：

> 线程“主”java.lang.NullPointerException 中的异常

在这条线上

```
for (File y: childfiles){   ) 
```

但奇怪的是，这取决于我选择的方向是否有效

```
 import java.util.*;
    import java.io.*;
    import java.lang.System;

    public class mainclass {
        public static void main(String[] args) throws IOException, InterruptedException{

    String path = null; 
            Scanner scan = new Scanner(System.in);
            System.out.println("enter path:");
            path = scan.nextLine();

    File dir = new File(path);

    File[] files = dir.listFiles();

    for(File x : files){

        System.out.println(x);
        File[] childfiles = x.listFiles();
        for (File y: childfiles){

        if(y.toString().endsWith(".exe")){

           Process p = Runtime.getRuntime().exec(

                   y.toString());
                    p.waitFor();

                    System.out.println(y.toString()+" executed, press enter for next exe");
                    scan.nextLine();

        }
        }

    }

        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T18:56:24.740

`x.listFiles();`将返回`null`( `file`not `directory`)

[`listFiles()`](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#listFiles%28%29)

> `null`如果此抽象路径名不表示目录，或者发生 I/O 错误，则返回。

所以在你的两个循环之前添加一个无效检查，如下所示

```
if(files!=null){

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T18:58:31.067

如果 x 不是目录，则 listFiles 返回 null 值。您应该更改代码以添加检查：

```
for(File x : files){

    System.out.println(x);
    if(! x.isDirectory() )
        continue;
    File[] childfiles = x.listFiles();
        //or add a null check
    if(childFiles != null)
        for (File y: childfiles){
            ... 
```

我认为之前假设 dir 文件是一个目录是安全的，但你可以在那里做同样的事情

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T19:01:51.053

`file.isDirectory()`打电话前一定要检查`file.listFiles()`。

# c++ - 从外部文件中读取字符串行并转换为十六进制

> ID：11852305
> 
> 赞同：1
> 
> 时间：2012-08-07T18:54:59.847
> 
> 标签：c++, char, hex, type-conversion

我对 c++ 非常缺乏经验，但可以使用一些帮助。我正在尝试编写一个小函数，它从外部 .txt 文件中读取一行，然后将十六进制值写入一个短整数。

例子：

从外部文本文件中读取的行：7c00

代码：

短端地址 = 0x7c00

我已经有了从外部文件中读取该行的代码，只需要知道如何将字符信息（7c00）保存到短 end_addr 作为十六进制 0x7c00。

我想我也需要为它写保护，所以如果字符太多（例如 7c0010）或不正确的字符（例如 zyx4），那么就会出现错误，但现在真的只需要转换算法的帮助。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T19:01:23.157

我建议研究`boost::lexical_cast`简单的界面和适当的错误处理。

此代码不处理错误，但您可以通过验证是否已读取整行来添加错误处理。

```
#include <iostream>
#include <fstream>

int main()
{
    std::ifstream f("some_file");
    short x;
    f >> std::hex >> x;
    std::cout << "Hexadecimal value: " << std::hex << x << std::endl;
    std::cout << "Decimal value: " << std::dec << x << std::endl;
} 
```

解释[C++ 参考中的 std::hex](http://www.cplusplus.com/reference/iostream/manipulators/hex/) 因此`std::hex`将默认数字基数更改为 16，然后`std::dec`将其更改回 10。

# php - Yii CDbCriteria 和 Model->findAll，如何添加自定义列？

> ID：11852306
> 
> 赞同：8
> 
> 时间：2012-08-07T18:55:09.027
> 
> 标签：php, yii

我在 Yii 中有一个日历应用程序，我在其中存储每个用户的事件。我想为每个事件动态构建一个标题。

此代码在我的控制器中：

```
$criteria = new CDbCriteria;
$criteria->select = array('all_day','end','id','start');
$criteria->condition = 'user_id ='.$user->id;
$events = Calendar::model()->findAll($criteria);
foreach($events as $event) {
  $event->title = 'test title';
}
echo CJSON::encode($events); 
```

在我的日历模型中，我添加了一个名为 $title 的新属性：

```
public $title; 
```

但是当我去回显 JSON 时，标题没有出现......

```
[{"all_day":false,"end":"-948712553","id":"2","start":"-146154706"}] 
```

我需要做什么才能将标题添加到 JSON 结果集？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T21:58:25.360

发生这种情况是因为对每个模型的*属性*`CJSON::encode`进行编码，并且*自定义属性*未添加到模型的属性中。将自定义属性添加到模型中的方式，这不能以直接的方式完成。

 **[尽管从这个答案](https://stackoverflow.com/a/10184668/720508)中得到了提示，但我确实想出了一个解决方法：

```
$events = Calendar::model()->findAll($criteria);
$rows=array();// we need this array
foreach($events as $i=>$event) {
    $event->title = 'test title';
    $rows[$i]=$event->attributes;
    $rows[$i]['title']=$event->title;
}

echo CJSON::encode($rows); // echo $rows instead of $events 
```

上面的代码应该可以工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-11T23:40:35.690

您可以扩展您的模型并提供您的新属性，如下所示：

```
 public function getTitle() {
        return "test title";
    }

    public function getAttributes($names = true) {
        $attrs = parent::getAttributes($names);
        $attrs['title'] = $this->getTitle();

        return $attrs;
    } 
```**

# java - 在运行时使用加载模式验证 XML，失败取决于模式顺序

> ID：11852311
> 
> 赞同：6
> 
> 时间：2012-08-07T18:55:21.113
> 
> 标签：java, xml, xml-validation

我正在尝试进行 xml 验证。我在运行时得到了一个模式列表（可能包装在一个罐子里）。根据我向 SchemaFactory 提供模式的顺序，验证通过或失败。

这是我正在做的事情：

```
 private void validateXml(String xml, List<URI> schemas){
        Source[] source = new StreamSource[schemas.size()];
        int i=0;
        for (URI f : schemas){
           source[i++] = new StreamSource(f.openStream());
        }

        SchemaFactory sf = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NA_URI);
        sf.setResourceResolver(new MyClassPathResourceResolver());

        Schema schema = schemaFactory.newSchema(source);
        Validator validator = schema.newValidator();
        validator.validate(new StreamSource(new ByteArrayInputStream(xml.getBytes())); 
```

同样，如果传递的模式集不以 xml 的根元素所引用的模式开头，则此操作将失败。有解决办法还是我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T20:16:25.997

默认情况下，如果 Xerces 已经有相同命名空间的模式文档，它将忽略模式文档。可以使用 factory 选项更改此行为

[http://apache.org/xml/features/validation/schema/handle-multiple-imports](http://apache.org/xml/features/validation/schema/handle-multiple-imports)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T09:49:38.250

首先，您必须通过调用 registerErrorHandler() 方法在 XML 阅读器上设置 org.xml.sax.ErrorHandler 对象的实例。您可能会收到警告，为您提供有关问题的线索。

其次，您必须知道您使用的是哪个 xml 库。在您的代码中调用 schemaFactory.getClass().getName() 并打印它。了解库后，如果它支持打开/关闭多个模式导入的功能，则可以参考其文档。

# mysql - 存储外键或 varchar 值

> ID：11852312
> 
> 赞同：0
> 
> 时间：2012-08-07T18:55:31.090
> 
> 标签：mysql

我的网站上有多个表格：

最好是存储查找表中的外键还是`varchar`本身。

我的两个站点表是

```
job_profile
    id
    title
    salary_range_seeking
    cv_link
    datetime_created
    job_type

job_type
    id
    type 
```

`job type`-`type`值为`Full Time`,`Part Time`

因此，例如，最好将 id 存储`job_type`在列中`job_type`并保持引用完整性，或者在前端让用户选择值并将文本值存储在列中`job_type`。我正在寻找最佳性能选项和推荐做法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T19:17:15.737

使用外键而不是将文本值存储在字段中，您将获得更好的性能，因为它会减少使用的内存量。

当字段的值（在本例中为 job_type）将以高速率重复时，这是推荐的做法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T19:17:37.280

读取或写入的性能？或运行报告？您如何存储数据在很大程度上取决于您打算用它做什么，以及您打算如何做。

现在，人们普遍接受存储 id 而不是 varchar，这有几个原因，但主要原因是它是普遍接受的方式。这将使其他人在未来更容易支持您的工作，可能对您也是如此。使用您提供的基本布局，无论您使用此数据做什么，都应该对性能几乎没有影响。

如果该`job_profile`表的主要目的是从中运行报告，则通过存储 varchar 而无需进行连接可以获得更好的性能。您通常会在数据仓库类型的应用程序中看到这种类型的反规范化，您可以在使用更多内存和存储空间以更快地检索和呈现数据进行权衡。

# fortran - FORTRAN 程序产生空白输出。帮我

> ID：11852317
> 
> 赞同：0
> 
> 时间：2012-08-07T18:55:48.367
> 
> 标签：fortran, fortran90

我正在编写一个代码来获取输入文件并逐行（ROWS）对其进行更改。我使用一些分隔符，如“@”和“#”来分隔行并对每个类别的行进行不同的更改。当我运行代码时，一切都很好，但是当我执行它时，它会生成一个空白的 .txt 文件。这是我的代码。帮我。

程序转换1

```
 !!DEFINES THE DIFFERENT VARIABLES USED IN CONVERSION1 PROGRAM!!
    INTEGER ::  K, L
    REAL :: A(5)
    CHARACTER :: ROW1

    !!INCLUDES THE BLOCK TO CONTINUE BUILDING ON THE VALUE OF J(LINE NUMBERS)!!
    INCLUDE 'OTHER_CONDITIONS.BLK'

    !!OPENS EXISTING FILE TO BE READ AND THEN PROGRAM WRITES IT TO 2ND MODIFIED FILE!!
    OPEN(UNIT=1, FILE='C:\MSDEV\Projects\UUDF_Conversion\BXK__96B.TXT')
    OPEN(UNIT=2, FILE='C:\MSDEV\Projects\UUDF_Conversion\BXK__96B_MODIFIED.TXT')

    !!TO OBTAIN AN ARRAY OF LINE NUMBERS WHERE A NEW CATEGORY STARTS, SYMBOLIZED BY '@'!!

    L=1
    DO K=1,10000
    READ(1,'(A150)') ROW1
    IF (ROW1(1:1)=='@') THEN
    A(L)= K
    L = L+1
    ENDIF
    ENDDO 
    CONTINUE

    PRINT(*,*) ROW, ROW1

    !!DO LOOP GOES THROUGH EACH AND EVERY LINE OF THE DOCUMENT CHECKING FOR CONDITIONS MET IN ORDER TO MANIPULATE!!
    DO J=1,10000
    READ(1,'(A150)') ROW

            !!AIRPORT DATA!!
            IF ((J==2) .AND. (ROW(73:73).NE. ' ') .AND. (ROW(80:80).EQ.'|')) THEN
                WRITE(2, '(A)') ROW(1:75) // ROW(78:150)
            ELSEIF ((J==5) .AND. (ROW(8:8).NE. ' ') .AND. (ROW(15:15).EQ.'|')) THEN
                    WRITE(2, '(A)') ROW(1:10) // ROW(13:150)
            ELSEIF ((J==6) .AND. (ROW(27:27).NE. ' ') .AND. (ROW(34:34).EQ.'|')) THEN
                    WRITE(2, '(A)') ROW(1:29) // ROW(32:150)
            ELSEIF ((J==7) .AND. (ROW(18:18).NE. ' ') .AND. (ROW(25:25).EQ.'|')) THEN
                    WRITE(2, '(A)') ROW(1:20) // ROW(23:150)

            !!RUNWAY DATA BEFORE THE FIRST '#'!!            
            ELSEIF ((J==(A(1)+1)) .AND. (ROW(17:17).EQ.'|')) THEN
                    WRITE(2, '(A)') ROW(1:12) // ROW(15:150)
            ELSEIF ((J==(A(1)+2)) .AND. (ROW(11:11).EQ.'|')) THEN
                    WRITE(2, '(A)') ROW(1:6) // ROW(9:150)
            ELSEIF ((J==(A(1)+3)) .AND. (ROW(17:17).EQ.'|')) THEN
                    WRITE(2, '(A)') ROW(1:12) // ROW(15:150)
            ELSEIF ((J==(A(1)+4)) .AND. (ROW(25:25).EQ.'|')) THEN
                    WRITE(2, '(A)') ROW(1:20) // ROW(23:150)
            ELSEIF ((J==(A(1)+5)) .AND. (ROW(31:31).EQ.'|')) THEN
                    WRITE(2, '(A)') ROW(1:26) // ROW(29:150)
            ELSEIF ((J.GT.(A(1)+6)) .AND. (ROW(1:1).NE.'@') .OR. (ROW(1:1).NE.'#')) THEN
                    WRITE(2, '(A)') ROW(1:39) // ROW(42:150)
            ELSEIF ((J.GT.A(1)) .AND. (J.LT.A(2)) .AND. (ROW(1:1)=='#')) THEN
                    CALL RUNWAY_DATA

            !!NAVIGATIONAL AID DATA!!       
            ELSEIF ((J==(A(2)+1)) .AND. (ROW(101:101).EQ.'|')) THEN
                    WRITE(2, '(A)') ROW(1:96) // ROW(99:150)
                    WRITE(2, '(A)') ROW(1:26) // ROW(35:150)
                    WRITE(2, '(A)') ROW(1:71) // ROW(74:150)
            ELSEIF ((J==(A(3)-1)) .AND. (J=='#')) THEN
                    WRITE(2, '(A)') '@'

            !!OBSTRUCTION 1!!       
            ELSEIF ((J.GT.A(3)) .AND. (ROW(129:129).EQ.'|')) THEN
                    WRITE(2, '(A)') ROW(1:124) // ROW(127:150)

            !!OBSTRUCTION 2!!       
            ELSEIF ((J.GE.A(4)) .AND. (ROW(108:108).EQ.'|')) THEN
                    WRITE(2, '(A)') ROW(1:103) // ROW(106:150) 

            !!IF ALL ELSE FAILS!!
            ELSE
                WRITE(2, '(A)') ROW
            ENDIF

    END DO
    CONTINUE                    
    END

    !!SUBROUTINE RUNWAY_DATA TO MANIPULATE DATA AFTER THE '@' IN RUNWAY DATA SECTION AFTER A '#'!!
    SUBROUTINE RUNWAY_DATA

    !!REDEFINES EXISTING VARIABLES FROM MAIN PROGRAM!!

    INCLUDE 'OTHER_CONDITIONS.BLK'

    !!USES THE EXISTING LINE NUMBER FROM MAIN PROGRAM TO PROCEED ON AND CHECK LINE BY LINE FOR CONDITIONS MET WITHIN 2 '#'S'!!
    J=J+1
    IF (ROW(17:17).EQ.'|') THEN
       WRITE(2, '(A)') ROW(1:12) // ROW(15:150)
    ENDIF

    J=J+1
    IF (ROW(11:11).EQ.'|') THEN
        WRITE(2, '(A)') ROW(1:6) // ROW(9:150)
    ENDIF

    J=J+1
    IF (ROW(17:17).EQ.'|') THEN
        WRITE(2, '(A)') ROW(1:12) // ROW(15:150)
    ENDIF

    J=J+1
    IF (ROW(25:25).EQ.'|') THEN
        WRITE(2, '(A)') ROW(1:20) // ROW(23:150)
    ENDIF

    J=J+1
    IF (ROW(31:31).EQ.'|') THEN
        WRITE(2, '(A)') ROW(1:26) // ROW(29:150)
    ENDIF

    J=J+1
    IF ((ROW(1:1).NE.'@') .OR.(ROW(1:1).NE.'#')) THEN             
        WRITE(2, '(A)') ROW(1:39) // ROW(42:150)    
    ENDIF

    J=J+1
    IF ((ROW(1:1).EQ.'#') .OR. (ROW(1:1).EQ.'@')) THEN
    STOP
    ENDIF        

    RETURN
    END SUBROUTINE RUNWAY_DATA 
```

阻止程序“OTHER_CONDITIONS.BLK”

```
 COMMON /INDEX_POSITION/ J
    INTEGER J

    COMMON /LINE/ ROW
    CHARACTER ROW 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T22:35:34.287

这可能不是问题，但根据输入，您可能会遇到下标错误。我建议进行更改，例如：

```
implicit none

integer, parmeter :: max_at_cnt
real, dimension (max_at_cnt) :: A 
```

...

```
L=1
DO K=1,10000
   READ(1,'(A150)') ROW1
   IF (ROW1(1:1)=='@') THEN
      if ( L <= max_at_cnt) then
         A(L)= K
         L = L+1
      else
         write (*, *) "Too many @s in the file!"
      end if
   END IF
END DO 
```

# .net - VB6 应用程序可以连接到 SQL Server，但 .NET 应用程序不能

> ID：11852320
> 
> 赞同：1
> 
> 时间：2012-08-07T18:55:59.903
> 
> 标签：.net, sql-server, deployment, .net-4.0, vb6

我们的系统结合使用 VB6 旧应用程序和较新的 .NET 应用程序。应用程序部署到我们的客户端，它们从终端服务器盒运行应用程序，SQL Server 数据库在不同的盒中运行。

VB6 应用程序工作正常，而所有 .NET 应用程序在每次启动时都会失败（尝试连接到数据库以读取配置信息）并出现错误：

> System.Data.SqlClient.SqlException：建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：TCP Provider，错误：0 - 连接尝试失败，因为连接方在一段时间后没有正确响应，或者连接失败，因为连接的主机没有响应。）

真正奇怪的是：我在 C# 中创建了一个测试 .NET 应用程序，它复制了 .NET 应用程序使用的确切连接字符串——我部署了一个显示实际使用的连接字符串的应用程序的检测版本——以及测试应用程序*工作*。

VB6 连接字符串（有效）：`Provider=SQLOLEDB;Data Source=servername;Initial Catalog=databasename;User ID=username;Password=password;`

.NET 连接字符串（有效和无效）：`Data Source=servername;Initial Catalog=databasename;User ID=username;Password=password;Application Name="ourappname"`

我们的其他客户都没有使用相同的二进制文件遇到过这个问题，这告诉我这是 .NET 应用程序如何与这个特定客户的系统交互的问题。

我应该采取哪些步骤来解决/解决此问题？在这一点上，我真的很茫然。我希望其他人以前见过这个问题；我在 Google 上找不到任何相关内容。

* * *

*   两个盒子都是在 VMWare 上运行的 Windows Server 2008 R2 SP1，并且在同一个域中
*   两个盒子都运行 ESET NOD32；禁用并没有改变任何东西
*   SQL Server 是 2008 R2 RTM 的默认实例（同一个盒子上还有 2008 和 2008 R2 命名实例）
*   应用程序（和我的测试应用程序）是 .NET 4.0
*   应用程序使用 SQL 登录进行身份验证（是的，我检查了失败的应用程序使用的密码是否正确）
*   一些 .NET 应用程序使用不同的代码来执行应用程序启动，但它们都表现出相同的错误
*   .NET 应用程序有些是 C#，有些是 VB，有些是混合的（VB 应用程序、C# 核心程序集）
*   我尝试修复 .NET 4.0 安装
*   我试过重新启动两个盒子
*   我已经尝试部署源二进制文件，以便绕过我们的部署子系统（以防它导致某种损坏）
*   我在本地编译的检测应用程序与通过 Team System 构建的原始应用程序具有相同的行为

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T20:08:47.980

我发现这种行为通常有几个主要原因：

1.  SQL Server 未配置为侦听特定连接类型。要确定这一点，请在 SQL 机器上打开 SQL Server 配置管理器，单击 SQL Server 网络配置，然后单击 MSSQLServer 协议。验证 TCP/IP 是否已启用。

2.  SQL Server 不允许远程连接（如果其他应用程序正在连接，那么这显然不是问题）。

3.  客户端计算机未配置为使用 SQL Server 支持的协议与 SQL Server 通信，或者客户端计算机输入了错误的配置信息。要验证这一点，请从 Run... 提示符运行 cliconfg 并确保启用了适当的协议，并且在 Alias 选项卡中没有任何冲突的别名。我通常会专门为连接字符串中配置的机器名称添加一个，并带有适当的 IP 地址，以防出现 DNS 问题（至少用于测试）。

4.  由于 VB6 客户端可以工作，而 .Net 客户端则不存在 64 位与 32 位访问的问题。如果您的应用程序是为 64 位或任何 CPU 编译的，您可以尝试 32 位构建以查看是否可以解决访问问题。如果是这样，那么这很可能是 64 位 SQL 客户端配置问题。

# ruby-on-rails - 哪种方式使用 Delayed_Job 进行调度？

> ID：11852324
> 
> 赞同：1
> 
> 时间：2012-08-07T18:56:19.780
> 
> 标签：ruby-on-rails, ruby-on-rails-3, delayed-job

我有一个在特定时间结束（到期）的 sql 数据库中的拍卖项目列表，我正在寻找使用 (Delayed::Job.enqueue) 在给定拍卖完成时触发方法的正确方法。

1）在拍卖开始时加载到内存中的每个拍卖使用一个工作器

2) 使用一个在 Web 应用程序启动时加载的工作程序，它会定期查询数据库以查看是否有任何拍卖结束。

有比上面列出的 2 个更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T23:31:12.840

您可以使用`run_at`并单独排队每个项目，以便在将其添加到数据库时在其结束时间唤醒。那么你只需要一名工人，直到某事结束，他才会有任何工作要做。（或者，更准确地说，您需要 N 个工作人员，其中 N 是您期望或想要处理的同时关闭的数量。）

```
auction.delay(:run_at => auction.ending_at).post_end_work 
```

如果您在将拍卖添加到数据库时无法排队（例如，如果它是由无权访问您的东西添加的`DelayedJob`），那么您将需要使用单个工作人员`ending_at`在最后一次扫描数据库中的值X 时间量，其中 X 是工作人员的运行频率。（以及 . 上的索引`ending_at`。）

我强烈建议不要为每次拍卖使用单独的工作人员。

# c# - 新应用程序域的类型

> ID：11852328
> 
> 赞同：2
> 
> 时间：2012-08-07T18:56:34.940
> 
> 标签：c#, appdomain, typeof

我想创建一个新的 AppDomain。我尝试这样做：[创建应用程序域并加载程序集](https://stackoverflow.com/questions/6404373/create-appdomain-and-load-assembly)

但我不知道我应该给我的域提供什么类型......

```
var domain = AppDomain.CreateDomain("NewAppDomain");
var path = @"C:\work\SomeAssembly.dll";
var t = typeof(SomeType);
var instance = (SomeType)domain.CreateInstanceFromAndUnwrap(path, t.FullName); 
```

我真正想做的是`create`加载程序集并找到它的引用的临时 AppDomain。然后我将创建另一个 AppDomain 并加载所有**引用的程序集**和临时 AppDomain 中的程序集。最后，我将`unload`使用临时 AppDomain 并从另一个 AppDomain 工作，当我使用另一个程序集时，我可以卸载它。

**我的主要问题是：上面代码中的“SomeType”是什么？...我应该放什么？**

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T19:52:24.813

有问题的类型是您定义的代理类。它必须从 MarshalByRefObject 继承，并且您单独的 AppDomain*和您当前的 AppDomain*都必须能够找到它。

`CreateInstanceFromAndUnwrap`将在您单独的 AppDomain 中创建该类型的实例，然后在您当前的 AppDomain 中为您提供一个 __TransparentProxy，您可以将其转换为您的类型。代理对象上的方法调用将在您类型上的其他 AppDomain 中调用。

但是请记住，加载/卸载 AppDomain 非常昂贵，尤其是在性能方面，并且对于您尝试从程序集中获取资源的特定场景，听起来可能有更好的方法。您可能想问一个不同的问题，即如何正确访问您的资源文件。

# c++ - 没有头文件的链接库？

> ID：11852329
> 
> 赞同：12
> 
> 时间：2012-08-07T18:56:36.510
> 
> 标签：c++, visual-studio-2010, mfc, linker, static-linking

我正在尝试使用 Visual Studio 2010 链接 C++ 中的静态库。麻烦的是，库（和随附的标头）中有很多 MFC 对象。我想在不重新编译我的项目以包含 MFC 或重新编译库以不使用 MFC 的情况下调用库的函数之一。[这篇](http://www.codeproject.com/Articles/85391/Microsoft-Visual-C-Static-and-Dynamic-Libraries)codeproject 文章似乎暗示如果我在项目中将函数定义为外部函数（使用“extern”关键字），这是可能的。

然而，我没有运气。无论我尝试什么，我都会收到未解决的外部符号错误。

文章是否正确？如果没有，这种联系是否可能以任何其他方式进行？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-07T19:07:57.517

你完全可以做到这一点，你只需要找到正确的函数原型。

使用“dumpbin”转储符号表，并查找您的函数。

如果函数名看起来正常 - 然后定义它，并使用“extern C”链接到它。如果符号是 c++ 损坏的，那么您将需要对其进行解构以找到原型。

如果该函数不在符号表中 - 那么它已在库中静态定义，并且不可访问。那你就完蛋了。没有办法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T19:08:57.837

如果您要调用的函数使用 MFC 位，您还必须将 MFC 支持添加到您的项目中。但是，如果不是，并且函数已由库导出，您只需将函数的原型添加到要调用它的文件中，然后将库链接到可执行文件。

例如，您将在调用导出函数的文件中添加这样的一行：

```
void __stdcall foo( int ); 
```

确保你得到正确的调用约定，它可能不同于`__stdcall`. 此外，您可能必须添加`extern "C"`以防止名称损坏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T19:23:09.293

静态库是一个或多个编译模块的积累。每个模块都可以依赖于其他模块，其中一些模块可能在其他库中。

如果您需要的函数位于没有其他依赖项的模块中，或者其依赖项都包含在当前库中，则可以在创建适当的函数原型后链接它。如果还有其他依赖项，那么您就不走运了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T12:36:22.260

例如，如果您想调用 timeGetTime 并且由于某些冲突而有理由不包含 mmsystem.h，您可以这样做：

```
extern "C" DWORD WINAPI timeGetTime(void);
#pragma comment(lib, "winmm.lib") 
```

# xaml - 如何在 Windows 8 GridView 中创建“添加”按钮项

> ID：11852331
> 
> 赞同：1
> 
> 时间：2012-08-07T18:56:40.417
> 
> 标签：xaml, windows-8, microsoft-metro

我正在创建一个 Windows 8 Metro UI。我想在天气应用程序（或任何默认应用程序）上创建一个类似于“地点”视图的“添加”按钮。

我的 GridView 项目作为列表从数据源中提取。我创建了一个我的数据类型的空对象并将其添加到列表中，然后使用模板选择器检测“null”空对象并显示按钮。

但这似乎有点脏，当我序列化数据以进行存储等时，我必须管理非数据项......只是想知道是否有人有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T19:46:03.840

创建一个属性，该属性公开您的列表副本，其中添加了额外的空项。这将允许您保持 xaml 原样，并在序列化时无需将其过滤掉。

# c# - C# lambda 和数组中的升序值

> ID：11852333
> 
> 赞同：2
> 
> 时间：2012-08-07T18:57:03.920
> 
> 标签：c#, lambda

我有一个数字数组，我想在其中找到第一个连续升序数字系列（计数超过一个）。

示例输入：`{5, 1, 2, 4, 8, 7, 6, 9}`
所需输出： `{1, 2, 4, 8}`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T19:05:33.797

这应该从给定的起始索引中找到第一个升序：

```
public static IEnumerable<int> GetAscending(IEnumerable<int> input, int startIndex)
{
    var ascending = input.Skip(startIndex)
        .Zip(input.Skip(startIndex + 1), (first, second) => new { Num = first, Next = second, Diff = second - first })
        .SkipWhile(p => p.Diff <= 0)
        .TakeWhile(p => p.Diff > 0)
        .Select(p => Tuple.Create(p.Num, p.Next))
        .ToArray();

    if(ascending.Length == 0) return Enumerable.Empty<int>();

    return ascending.Select(t => t.Item1).Concat(new int[] { ascending.Last().Item2 });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T19:04:37.010

```
public IEnumerable<int> getAscendingValues(IEnumerable<int> source)
{
    List<int> output = new List<int>();

    foreach (int next in source)
    {
        if (output.Count == 0 || output.Last() < next)
        {
            output.Add(next);
        }
        else
        {
            if (output.Count <= 1)
            {
                output.Clear();
            }
            else
            {
                return output;
            }
        }
    }

    if (output.Count > 1)
    {
        return output;
    }
    else
    {
        return null; //could also return an empty enumeration
    }
} 
```

如果您想从特定索引开始，您可以`Skip`在调用它之前使用该方法，而不是添加额外的参数来支持它。（即`getAscendingValues(values.Skip(startIndex))`）

# mysql - 使用随机排序更新 MySQL 表

> ID：11852339
> 
> 赞同：1
> 
> 时间：2012-08-07T18:57:24.403
> 
> 标签：mysql, database, random

我有一张这样的桌子

```
ItemsTable

item_id, cat_id, sort
----------------------
1        1       1
20       1       2
15       1       3
12       1       4
11       1       5
....
1521     1       1991 
```

在我的程序中，每次显示页面时，它都会根据排序号拉下一个项目。所以，假设我刚刚显示 sort = 2，下一次页面将显示 item sort = 3（也许 sort 是一个坏名字）。

我想要做的是，一旦我拉出最后一个项目（排序 = 1991），我想重新更新该表中的项目并重新分配新的排序顺序。

像这样：

```
ItemsTable

item_id, cat_id, sort
----------------------
35       1       1
7        1       2
2        1       3
1521     1       4
700      1       5
....
5        1       1991 
```

现在我的想法是我必须编写一个 SELECTS 记录的脚本，其中 cat_id = 1 对结果进行随机排序，然后我必须在 PHP 中创建一个循环来更新数据库 1001 次。在我看来，这似乎没有效率。

你们能提供更好的选择吗？使用 MySQL 执行此操作的最有效方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T20:25:09.493

```
SET @row := 0;
UPDATE ItemsTable SET sort = (@row := @row + 1) WHERE cat_id = 1 ORDER BY RAND(); 
```

好的，经过几个小时的研究和尝试，这解决了我的问题。它现在生成一个随机数字序列。

我知道 RAND() 效率不高，但这是另一天的另一个问题:)

希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T18:59:02.300

这是做你想做的吗？

```
order by cat_id, rand() 
```

或者，您是否尝试两次获取结果集：

```
select item_id, cat_id, sort
from ((select t.*, 0 as whichgroup
       from t
      )
      union all
      (select t.*, 1 as whichgroup
       from t
      )
     ) t
order by cat_id, whichgroup,
         (case when whichgroup = 0 then sort
               else rand()
          end) 
```

这会将每条记录输出两次，首先是“排序”顺序，然后是随机输出。

根据您的评论，这可能是您想要的：

```
order by cat_id,
         (case when sort <= 1991 then sort else rand() end) 
```

# mysql - 是否可以查询非不同的值？

> ID：11852344
> 
> 赞同：0
> 
> 时间：2012-08-07T18:57:34.533
> 
> 标签：mysql

我有两个表： table1 包含名为的字段`domain names`和另一个名为 的字段`keyvalues`。

我需要做的是查询所有键值不明确的域名。（我知道 group by，但 group by 不会检索非不同的域名）。我需要这样做，因为我想在查询它们后删除它们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T19:01:29.900

```
select domainnames
from your_table
group by domainnames
having count(distinct keyvalues) <> count(keyvalues) 
```

# mercurial - 需要 HG 更新分支合并

> ID：11852352
> 
> 赞同：0
> 
> 时间：2012-08-07T18:58:08.197
> 
> 标签：mercurial

也许我在这里遗漏了一些重要的东西，但我想在不先提交我目前拥有的东西的情况下切换到另一个分支。我意识到我也可以使用`hg update -C`并简单地删除当前的更改，但这也不是我想要做的。

我的问题是我有几个同时在工作的分支，不想用大量的小提交来填满我的历史。是否有一个中间立场，我可以在其中存储我当前的分支，而无需提交我在某些情况下所做的每一个小改动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T19:49:23.770

[搁置扩展](http://mercurial.selenic.com/wiki/ShelveExtension)可以做你想做的事：

从页面：

暂时隐藏更改。您可以选择要搁置的确切更改。

> 汞搁置

暂时隐藏更改。所有帅哥都会被自动选中。

> hg 搁置——全部

将更改返回到工作目录。

> hg 搁置

如果您使用 --name 选项，您可以将不同的更改搁置在不同的货架上。

但是，大量的小提交有什么问题？如果更改独立存在，它们可能值得提交，如果您想保持理智，您真的不想在签入中放入多个问题，特别是如果您稍后要将功能合并到其他存储库中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T22:30:57.180

除了已经提到的[搁置](http://mercurial.selenic.com/wiki/ShelveExtension)选项的选项，并且在您的历史中有很多小的变更集，您可以使用[折叠](http://mercurial.selenic.com/wiki/CollapseExtension)扩展来获取这些小变更集并将它们组合成一个更大的变更集。这非常适合您所描述的场景 - 修复错别字等。

在 Mercurial 2.1 和更高版本中，折叠扩展将遵循[阶段](http://mercurial.selenic.com/wiki/Phases)，因此您不会无意中折叠已发布的变更集。

不过，总的来说，我建议在单独的命名分支上进行所有这些小改动，然后在您满意时合并到您的默认（或其他功能）分支中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T07:22:02.790

让每个分支在它自己的克隆中签出。您可以在它们之间切换而无需执行任何操作。

# html - 使用 LinkChecker 进行身份验证

> ID：11852353
> 
> 赞同：3
> 
> 时间：2012-08-07T18:58:09.160
> 
> 标签：html, authentication, hyperlink, linkchecker

我想使用 LinkChecker 来验证我的网页中的链接。但是，我必须经过身份验证才能查看我想测试的大多数页面。

使用 LinkChecker 时如何对网站进行身份验证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T02:37:36.913

用于设置身份验证的用户名和密码的选项在 linkcheckerrc 配置文件中设置。您可以通过启动 LinkChecker 并转到选项对话框来编辑该配置文件。

有关语法，请参阅身份验证部分：

[http://wummel.github.com/linkchecker/man5/linkcheckerrc.5.html](http://wummel.github.com/linkchecker/man5/linkcheckerrc.5.html)

请注意，我发现我需要重新启动 LinkChecker 才能在更改配置文件后读取它。

# javascript - Rally App SDK 2.0：无法按日期过滤

> ID：11852356
> 
> 赞同：2
> 
> 时间：2012-08-07T18:58:18.507
> 
> 标签：javascript, rally

我曾尝试按 StateChangedDate 和 LastUpdateDate 过滤投资组合项目，但似乎不成功。

```
{
    property: 'StateChangedDate',
    operator: '>',
    value: (new Date() - 518400000)
} 
```

我还尝试以与从 Portfolio Items 中检索到的格式相同的格式显示它，以便比较的结果不是以毫秒为单位的时间值。

```
var d = new Date(new Date() - 518400000);

{
    property: 'StateChangedDate',
    operator: '>',
    value: d
} 
```

然而，两者都没有奏效，我最终没有返回任何投资组合项目，即使我绝对确定有些项目应该通过过滤器。

**编辑**：看起来我必须使用 Rally 用来存储它们的相同格式..（即 YYYY-MM-DDThh:mm:ss.nnnZ） 有没有一种简单的方法来格式化日期？还是我只需要解析和连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T19:47:36.407

我认为您应该能够使用 Rally.util.DateTime.toIsoString 函数来格式化您的日期对象。我相信这个代码片段可以做你想做的事情：

```
var d = Ext.Date.add(new Date(), Ext.Date.DAY, -6);

{
    property: 'StateChangedDate',
    operator: '>',
    value: Rally.util.DateTime.toIsoString(d)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T20:21:27.817

谢谢，马特。我想我忽略了这个功能，因为我没有考虑转换，直到我意识到它必须是 ISO 8601 格式。作为替代方案，我从 Mozilla 开发人员网络中获取了示例函数，该函数运行良好： http: [//mzl.la/O0tVVb](http://mzl.la/O0tVVb)

但是，为了简化事情，我想我会继续使用 Rally 的产品。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T22:53:34.280

我不得不在不久前这样做。这很烦人，因为它的格式不适用于 IE8（否则您可以执行类似 new Date(yourDate); 之类的操作）。

所以只需创建一个新的 Date 对象并进行一些字符串解析...

```
 a = //your date from Rally here
    b = a.split('T');
    a = b[0];
    c = b[1];
    a = a.split('-');

    year = a[0];
    month = a[1];
    day = a[2];

    b = c.split('.');
    ms = b[1].replace("Z", '');
    b = b[0].split(':');

    hour = b[0];
    min = b[1];
    sec = b[2];

    tmpDate = new Date();
    tmpDate.setUTCFullYear(year, month - 1, day);
    tmpDate.setUTCHours(hour, min, sec, ms); 
```

# android - Android 通知防止覆盖

> ID：11852357
> 
> 赞同：0
> 
> 时间：2012-08-07T18:58:29.393
> 
> 标签：android, notifications

在我的应用程序中，当我的用户被邀请参加新活动时，他们会收到通知。我经常检查邀请并相应地更新。我的问题是：**如果通知已经存在，是否有一种简单的方法可以防止它被更新？**

我将尝试进一步解释这一点。

假设应用程序在下午 2:00 检查活动邀请。用户有 2 个邀请，因此创建了 2 个通知。用户远离电话，因此他/她不会注意到通知。然后，我的应用会在下午 2:45 检查通知。用户仍然有相同的 2 个事件邀请，但不是创建 2 个更新的通知，我希望保留原始通知。我希望 2 个邀请通知阅读下午 2:00 而不是下午 2:45。

我希望这是有道理的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T19:14:41.183

如果您只保留邀请是否已显示怎么办？这样，两个新邀请将在下午 2:00 显示，无论用户的操作如何，它们都不会在下午 2:45 重新显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T19:24:37.287

创建一个 HashMap，它从您被邀请的事件名称映射到收到邀请的时间，每次您的用户收到邀请时，您只需在映射中创建一个新的键值对。那么在调用 showNotification 时你需要做的就是检查这个事件的名称是否已经存在于 HashMap 的 keySet 中，如果存在 -> 不要调用 showNotification() else -> showNotification(带有事件名称和相应的时间从您的 HashMap 收到通知的时间）。

# aem - cq5设计模式按钮丢失

> ID：11852368
> 
> 赞同：2
> 
> 时间：2012-08-07T18:59:19.397
> 
> 标签：aem

我们最近在 CMS 中创建了新组，以避免将用户直接添加到文件夹中。遵循推荐的最佳做法。

没有像“每个人”、“管理员”等默认/主要组从文件夹中更改或删除，只有我们营销团队中的个人。这在过去几天一直运行良好，但今天，用户和管理员不再在 Sidekick 上看到“设计模式”标尺图标。所以无法编辑页面。

我有预感这是以下站点建议的 ACL 相关：

[http://blogs.adobe.com/dmcmahon/2012/03/09/cq-design-and-preview-mode-toolbar-not-visible/](http://blogs.adobe.com/dmcmahon/2012/03/09/cq-design-and-preview-mode-toolbar-not-visible/)

[http://dev.day.com/discussion-groups/content/lists/cq-google/2010-12/2010-12-07__day_communique__Design_of_component_bar_vanishes_in_design_view_Sourasree_Ghosh.html/2?q=design%20button](http://dev.day.com/discussion-groups/content/lists/cq-google/2010-12/2010-12-07__day_communique__Design_of_component_bar_vanishes_in_design_view_Sourasree_Ghosh.html/2?q=design%20button)

我已经检查并检查了 /etc/designs 文件夹及以下文件夹的权限，但仍然没有乐趣。

非常感谢您对此提供的帮助。有任何想法吗？

非常感谢沃伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T21:13:26.133

我最近也遇到了这个。显然，当使用 clientlib 功能时，一些缩略图没有被正确打包。这可能与使用 Eclipse 有关。解决方法是[在流程资源阶段使用 Maven 过滤程序集](http://maven.apache.org/plugins/maven-assembly-plugin/examples/single/filtering-some-distribution-files.html)。这将确保缩略图被正确复制为 png 文件。

# mqtt - 接收包含 QoS 为 0 但具有消息 ID 的 PUBLISH 消息

> ID：11852370
> 
> 赞同：0
> 
> 时间：2012-08-07T18:59:38.137
> 
> 标签：mqtt

我正在使用 MQTT 开发 M2M 应用程序（在 C# 中，虽然我看不出这有什么关系）。我已经向代理发布了一条消息，其中 a`QoS`为 1 且`RETAIN`位为 ON。当我随后订阅该主题（订阅`QoS`为 0）时，我收到一条 PUBLISH 消息，并且标题显示它的 a`QoS`为 0。

我遇到的问题是该主题的可变标头包含一个消息 ID，但我无法以编程方式知道它的存在。规范似乎表明 MessageID 仅应在`QoS`设置 a 或 1 或 2 时出现，但传入数据包的字节 0 显然是 0x31（消息类型为0，`PUBLISH`= 1）。`QoS``RETAIN`

现在我的解决方法是反序列化数据，如果出现异常，我会向前跳两个字节并重试。这行得通，但对我来说确实感觉很笨拙。

这是预期的行为吗？我正在使用的经纪人有问题吗？对我的规范有一些误解？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T22:56:24.883

从你说的情况来看，肯定是不对的。这不是预期的行为，也不是对规范的误解。QoS 0 消息中不应该有消息 ID。

你用的是什么经纪人？您能否在 test.mosquitto.org:1883 上针对代理尝试您的代码，看看它的行为是否相同？同样，如果现有客户端（例如[http://mosquitto.org/download/](http://mosquitto.org/download/)中的 mosquitto_sub ）有问题，那么问题就不是你。

# java - 从 innerHTML 获取一个未知长度的特定字符串

> ID：11852371
> 
> 赞同：0
> 
> 时间：2012-08-07T18:59:38.367
> 
> 标签：java, regex, string

我正在尝试获取在页面 html 内的脚本中找到的 skuID（形式为 sku102921，数字长度未知（可能是 sku219043012 或 sku2131））。我在想使用正则表达式会很好..任何帮助将不胜感激

```
public String getRecommendedOfferSkuID() {
    WebElement recommendedOffer = driver.findElement(By.xpath"//td[@class='recomm-offer']"));
    String recommendedOfferHTML = (String)((JavascriptExecutor)driver).executeScript("return arguments[0].innerHTML;", recommendedOffer);
    java.lang.String skuID == "";
    recommendedOfferHTML.   //need help here 
```

HTML 中的脚本具有包含 skuID 的此方法

```
submitFormByButtonId("prod9760999"+"-" + "sku30768633"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T19:39:22.467

试试这个：

```
java.lang.String skuID = "";
Pattern pattern = Pattern.compile("sku\\d+");
Matcher m = pattern.matcher(recommendedOfferHTML);
while(m.find()) {
    skuID = m.group(1);
} 
```

感谢您的输入迭戈

# sql - 如何在 SQL Select 中使用值数组 - SQL Server 2005

> ID：11852373
> 
> 赞同：0
> 
> 时间：2012-08-07T18:59:39.427
> 
> 标签：sql, arrays

> **可能重复：**
> [参数化 SQL IN 子句？](https://stackoverflow.com/questions/337704/parameterizing-an-sql-in-clause)
> [SQL Server SP - “IN”数组列表的传递参数？](https://stackoverflow.com/questions/537087/sql-server-sp-pass-parameter-for-in-array-list)

在我的 SP 中，我从参考表中获取数据字符串以过滤 SQL 选择。

这是场景，

Regionids = 2,6,8 我把这个值变成了一个字符串@regions

在我的 SP 中，我进行计算，最后有一个大 SQL 来返回数据。根据计算，我得到从中获取记录的日期和 ID。我还想将行限制在参考中指定的以上区域。

所以在我的 SELECT 的 Where 子句中，AND RG.regionids IN (@regions)

我收到错误，将 varchar 值“2,6,8”转换为数据类型 int 时转换失败。

我怎样才能完成上述要求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T19:13:44.137

最简单的方法是使用动态 SQL：

```
EXECUTE('SELECT * 
         FROM   Region R 
         WHERE  R.RegionID IN (' + @regions + ')') 
```

# interface - Swiftmailer：缺少接口 Swift_CharacterReader

> ID：11852381
> 
> 赞同：1
> 
> 时间：2012-08-07T19:00:13.707
> 
> 标签：interface, swiftmailer, implements

我正在尝试设置 Swiftmailer 以发送个性化的时事通讯。

我已经完成了大部分工作（我认为）：我已经设置了标题和正文，并且 SMTP 身份验证正常工作。我开始了`RCPT OK = 250`SMTP`DATA = 354`的“对话”，然后当然 Swiftmailer 开始按照它应该的方式处理正文内容。

但在那一点上，它没有进一步的进展。相反，它给了我这个错误：

```
Fatal error: Interface 'Swift_CharacterReader' not found in
/home/swift/lib/classes/Swift/CharacterReader/Utf8Reader.php on line 19 
```

现在，`Utf8Reader.php`定义一个`Swift_CharacterReader_Utf8Reader`实现接口的类`Swift_CharacterReader`
——在`/home/swift/lib/classes/Swift/CharacterReader.php`. 但是由于某种原因，它似乎`Utf8Reader.php`被包含在内，并且该类尝试在某个`CharacterReader.php`（尚未）可用/包含的地方实例化。

所以现在对我来说的问题是 SwiftMailer 包含大约 5 亿个文件，尽管来回搜索了很多，但我无法找出调用/包含可能来自哪里。

有没有其他人对这个问题大发雷霆，也许知道在哪里寻找解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T16:00:59.947

看来这只是 Swiftmailer 4.2.1 中的一个错误。

下载了 4.2.0 版，它立即工作。或者至少，它没有给我任何错误，但给了我这个：

```
<< 250 OK id=1Sz8VI-0002Zb-K1 
++ Stopping Swift_SmtpTransport
>> QUIT 
<< 221 cp16.danhost.dk closing connection 
++ Swift_SmtpTransport stopped 
```

– 看起来电子邮件已被接受并发送出去。

不幸的是，它仍然没有到达。但那是另一回事。界面问题似乎只是一个错误。

# spring - Spring - 扫描 bean

> ID：11852385
> 
> 赞同：2
> 
> 时间：2012-08-07T19:00:34.477
> 
> 标签：spring, spring-mvc

我对 Spring bean-scanning 有点困惑。

AFAIK我需要把`<context:component-scan base-package="some.package" />`

Spring 将从给定包的根目录中搜索 bean。

但是现在在我的应用程序中，如果我从 .xml 配置文件中删除这一行，然后启动 Tomcat，我会得到

```
INFO : org.springframework.beans.factory.support.DefaultListableBeanFactory - Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@4dd1b: defining beans 
```

然后我得到一长串 bean，其中一些来自 Spring，但也有一些我希望看到的`<context:component-scan base-package="some.package" />`添加到配置文件中。两个日志之间唯一不同的是控制器方法到地址的映射。如果此行不存在，则不会映射方法。

为什么 Spring 会检测这些 bean？是什么让 Spring 扫描我的包以查找带注释的类？

如果相关，我正在使用 Spring 3

编辑：如果我不删除`<context:component-scan base-package="some.package" />`，我将获得两次预实例化单例的信息。所以看起来这些豆子被扫描了两次。

编辑：似乎在 ContextListener 加载的文件之一中，我进行了组件扫描。这就是为什么我把这些豆子列出了两次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T06:07:01.113

您是否有两个正在扫描相同包的调度程序 xml 配置文件？如果那样，bean 初始化会发生两次。

进行此自动扫描过程的原因是识别您的注释，如 @Controller @Autowire 等。否则这些注释对 Spring IOC 容器没有任何意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T21:22:14.833

`<context:annotation-config/>`您的应用程序上下文中是否还有XML？如果是这样，它将解释为什么在没有`<context:component-scan .../>`.

[这个](https://stackoverflow.com/questions/7414794/difference-between-contextannotation-config-vs-contextcomponent-scan)SO post 实际上解释了两者之间的区别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T20:15:40.810

你必须`<context:component-scan base-package="se.eleon" />`在你的 config.xml 中有 spring 正在扫描你所有代码的地方，如果你没有放任何东西，什么都不会发生，因为 spring mvc 正在期待它。这是 spring 正在寻找所有注释等的地方

# gnuplot - gnuplot 生存函数

> ID：11852386
> 
> 赞同：1
> 
> 时间：2012-08-07T19:00:43.577
> 
> 标签：gnuplot

是否可以使用 gnuplot 的“累积”指令绘制生存函数。生存函数是指 1-CDF。我们可以使用“累积”来绘制CDF如下

```
plot 'datafile.dat' using <column with values>:(1./total number of values) smooth cumulative; 
```

我想要做的只是将y轴乘以-1并偏移1。即

```
plot 'datafile.dat' using <column with values>:(1)-(1./total number of values) smooth cumulative; 
```

但这不起作用，因为累积是作为最后一步执行的。任何指针？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T10:33:08.353

我找到了解决这个问题的方法：

1.  将聚合乘以 -1
2.  重新标记 y 轴以隐藏实际标签：

IE

```
set ytics ("1" 0, "0.75" -0.25, "0.5" -0.5, "0.25" -0.75,"0" -1)
plot 'datafile.dat' using <column with values>:(-1./total number of values) smooth cumulative; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T12:05:42.817

我不是 100% 确定你的意思，但我认为你想要使用的是在 gnuplot 4.4 中引入的*内联函数（？）。*它是这样工作的：

```
cumm_sum=0.0
nrec=0.0
CDF(x)=(nrec=nrec+1, cumm_sum=cumm_sum+x, 1.-cumm_sum/nrec)
plot 'datafile.dat' u (CDF($1)):2 
```

# ms-access - 绑定集合错误

> ID：11852389
> 
> 赞同：0
> 
> 时间：2012-08-07T19:00:54.060
> 
> 标签：ms-access, vb6, ado

我有一个在多个表单上使用 ADO 数据控件的 VB6 程序。表单上各种文本框中的数据通过 .DataSource 和 .DataField 属性绑定到 ADODC。

通常，这些 ADODC 不会给我们带来任何问题。*但是，在一些迁移测试过程中，在某些*计算机上发现了以下错误：

“绑定集合错误”“字段不可更新，绑定属性名称：文本，字段名称：Decimal_Delimiter”

这不会发生在所有计算机上，并且不能完全重现。

我能找到的唯一不错的线索是在这篇[文章中](http://objectmix.com/basic-visual/155027-binding-collection-error-resolved.html)。这表明安装 MS Access 可能会解决问题。

有没有人见过这个错误？如果安装 Access 是诀窍，那么安装 Access 会做什么来修复它？（如果我知道，我可能会检查丢失的文件等）

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T23:01:00.003

您测试的一台或多台 PC 可能具有过期版本的 Active Data 对象，或者可能是不同版本的混合。我猜安装 Access 也会安装更高版本的 ADO（Access 2000 安装 ADO 2.1）。您不需要安装 Access（关于 DAO 的评论是红鲱鱼）。如果您在 Windows 2000 上运行软件，那么您应该升级到最新版本的[Microsoft 数据访问组件](http://en.wikipedia.org/wiki/Microsoft_Data_Access_Components)(MDAC 2.8)。应将 Windows XP 升级到最新的服务包以获取这些组件。

如果您的目标是 Windows Vista 及更高版本，则应该已经安装了 Windows DAC 6.0。不幸的是，这与早期版本的 ADO 二进制不兼容，您必须重新编译。

按照[此链接](http://en.wikipedia.org/wiki/Microsoft_Data_Access_Components)获取有关此的 Wikipedia 文章。

如果您使用的是 Windows 2000，请使用[此链接](http://www.microsoft.com/en-us/download/details.aspx?id=5793)下载 MDAC 2.8。如果您使用的是 Windows XP，请下载最新的服务包。

# wordpress - 使用复制/粘贴代码创建横幅列表的 Wordpress 插件

> ID：11852392
> 
> 赞同：0
> 
> 时间：2012-08-07T19:01:00.130
> 
> 标签：wordpress, plugins

我需要一个插件来帮助我自动创建横幅页面。这是现有页面：[http](http://stopsb249.org/get-banners-for-your-website/) ://stopsb249.org/get-banners-for-your-website/ 应该立即对每个人都显而易见我需要什么 :)

基本上，我希望能够向插件添加横幅图像，并让它根据数据库中的横幅生成页面。

那么，上传一个 125x125 的正方形？在页面上显示它，并在其下方带有将其添加到您的网站所需的 html 的文本区域。

我真的不想自己编写代码，所以我希望有人知道是否存在一个实际上已经可以做到这一点的插件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T03:52:09.030

你可以自己做，我倾向于远离插件并自己创建东西，因为我喜欢为我的博客提供完整的功能。您可以创建一个新页面并使用页面模板。然后，如果您想轻松一点，可以将这些照片上传到 flickr，然后使用一些 PHP 来获取照片，编写您想要的 HTML，然后使用 PHP 作为图像源和链接。

或者您可以获得技术并创建一个元框，允许您上传照片并为您显示。

要回答你的问题，不，我不知道，但我相信至少有一个，你会找到一个你正在寻找的东西的机会很小。对不起。

# javascript - 使用 Yepnope 加载全局和条件脚本的最佳方式

> ID：11852393
> 
> 赞同：1
> 
> 时间：2012-08-07T19:01:03.277
> 
> 标签：javascript, asynchronous, yepnope

我有大约 8 个 js 文件需要在我网站的每个页面上加载，还有一些其他需要有条件地加载。我的工作正常，我只想确保我尽可能优雅地执行此操作（我怀疑我不是）。

这是我目前正在使用的代码：

```
yepnope({
    load: {
        'jquery':       '/include/js/libraries/jquery-1.8rc1.js',
        'ui':           '/include/js/jquery-ui-1.8.16.custom.min.js',
        'global':       '/include/js/global.js',
        'dbObject':     '/include/js/dbObject.js',
        'dbQuery':      '/include/js/dbQuery.js',
        'common':       '/include/js/common.js',
        'credit':       '/include/js/credit.js',
        'messages':     '/include/js/messages.js',
        'poller':       '/include/js/poller.js',
        'ajax_global':  '/include/js/ajax_global.js'
    },
    complete: function (url, res, key) {

        yepnope({
            test: $('body').hasClass('project'),
            yep: {
                'project': '/include/js/project.js'
            },
            callback: function(url, res, key) {

            }
        });

    }
}); 
```

`load`必须为站点上的每个页面加载该初始对象中的所有内容。然后在`complete`我正在测试的函数中查看 body 标记是否具有`project`类，如果是，我正在加载我依赖于此页面的其他脚本。

几个问题：

1.  这是最好的方法吗？
2.  我应该如何为其他页面添加其他测试？我会将嵌套的 yepnope 调用放入数组中并添加更多测试对象吗？

我很感激我能得到的任何帮助。

# c - 在大于 65KB 的字符串上使用 printf 会遇到哪个瓶颈？

> ID：11852394
> 
> 赞同：11
> 
> 时间：2012-08-07T19:01:02.940
> 
> 标签：c, performance, caching, printf, benchmarking

该程序每行打印 65k 字节。

我测量吞吐量`./a.out | pv >/dev/null`并得到大约 3 GB/s。

一旦我将线路长度更改为 70k，吞吐量就会下降到 ~ 1 GB/s。

****我在这里遇到了****哪个瓶颈**（CPU 缓存、libc 特质等） ？**

 ****```
#include <stdio.h>
#include <string.h>

#define LEN 65000     // high throughput
// #define LEN 70000  // low throughput

int main ()
{
  char s[LEN]; memset(s, 'a', LEN-1); s[LEN-1] = '\0';

  while (1)
    printf ("%s\n", s);
} 
```

**更新：**我在具有 EGLIBC 2.15 的 Ubuntu 12.04 64 位和 Core i5-2520M 上运行它。

**更新：** `puts (s)`有同样的问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T19:36:30.453

您在数据传输中未充分利用内核 I/O 缓冲区。如果我们假设 64KB 是内核 I/O 缓冲区大小，那么 70000 写入将在写入 64KB 后阻塞。当它耗尽时，剩余的 4KB + 更改将写入 I/O 缓冲区。`pv`最终执行两次读取以读取`70000`传输的每个字节，由于缓冲区利用率不佳，导致正常吞吐量的一半左右。写入期间 I/O 的停顿可能弥补了其余部分。

您可以为 指定较小的读取大小`pv`，这将通过增加每个时间片传输的平均字节数来增加您的吞吐量。平均而言，写入效率更高，并保持读取缓冲区满。

```
$ ./a.out | pv -B 70000 > /dev/null
9.25GB 0:00:09 [1.01GB/s] [        <=>                                        ]

$ ./a.out | pv -B 30k > /dev/null
9.01GB 0:00:05 [1.83GB/s] [    <=>                                            ] 
```

**编辑：**另外三个运行（2.7GHz 核心 i7）

```
$ ./a.out | pv -B 16k > /dev/null
  15GB 0:00:08 [1.95GB/s] [       <=>                                         ]

$ ./a.out | pv -B 16k > /dev/null
 9.3GB 0:00:05 [1.85GB/s] [    <=>                                            ]

$ ./a.out | pv -B 16k > /dev/null
19.2GB 0:00:11 [1.82GB/s] [          <=>                                      ] 
```****

# javascript - 如何确保在页面卸载之前始终调用代码

> ID：11852397
> 
> 赞同：5
> 
> 时间：2012-08-07T19:01:24.077
> 
> 标签：javascript, jquery, html, websocket, onbeforeunload

通常这并不重要，对于我的情况甚至可能不太重要，但我想知道是否有合理的方法来实现这一点。

我的页面会自动打开一个 Web 套接字连接。为了成为更好的客户端，我希望客户端自行清理并在页面卸载之前关闭 websocket。

我希望浏览器`close()`在页面卸载时有先见之明来调用我，但如果没有，我如何利用`onbeforeunload`消息（或类似消息）进行一些“最终清理”（`atexit()`与C）？

假设我有一些系统，我希望我的客户出于某种原因向我的 websocket 服务器发送“退出”消息。

我现在可以这样做：

```
$(window).on('beforeunload', function () {
    websocket.close(); // websocket is a WebSocket
}); 
```

但是假设`close()`实际上是一个异步调用（是吗？），我想**确保**在实际卸载页面之前触发 socket.onclose 回调！这可以做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T19:06:22.267

```
window.onunload=function(){
//your code here
} 
```

我想我们确实有这个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T19:10:57.257

确保异步调用在现代浏览器中完全执行没有可靠的方法。旧版本可能会被 while 循环阻止，但当前的浏览器会终止任何进程并继续。原因是他们希望用户体验快速，你阻止他们对他们有害。

# ruby - Ruby 模式匹配 - 查找所有可能匹配项的数量

> ID：11852405
> 
> 赞同：2
> 
> 时间：2012-08-07T19:02:27.090
> 
> 标签：ruby, regex, pattern-matching

有谁知道如何找到某个正则表达式模式的所有可能匹配项的数量？我的意思是这样的：

**Calculator_1_([0-1])** *返回 2 个可能的结果，因为它可以匹配两个不同的输入：*

```
 -Calculator_1_0
 -Calculator_1_1 
```

**Calculator_1_([0-2])** *返回 3 个可能的结果，因为它可以匹配三个不同的输入：*

```
 -Calculator_1_0
 -Calculator_1_1
 -Calculator_1_2 
```

**Calculator_1_(.*)** *返回无限，因为它可以匹配无限输入：*

```
 -Calculator_1_0
 -Calculator_1_1
 -Calculator_1_2
 -Calculator_1_3
 -Calculator_1_a
 ... 
```

编辑：顺便说一句，这只是一个例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T03:15:04.607

任何 Ruby 库（据我所知）都没有内置这样的功能。要正确执行此操作，您需要将[正则表达式解析为 pieces](https://stackoverflow.com/questions/11314350/tokenize-lex-parse-a-regular-expression)，以便能够正确区分（例如）：

```
 /1+/   # Infinite possibilities
 /1\+/  # 1 possibility
 /1\\+/ # Infinite possibilities
 /[1+]/ # 1 possibility 
```

一旦完成，对于任何具有 , 或 限定符的正则表达式，将所有（相关）和限定符转换为精确计数，将所有字符类转换为数字集并展开，这将是一项`*`相对`+`“`{n,}`简单`?`”`{n,m}`的`[…]`工作（乘）`a|b`交替和`(a?b){2,3}`分组表达式中的结果。

然而，鉴于目前无法轻松正确地解析正则表达式，这个概念已经死了。我担心，你的想法也是如此。是时候寻找另一种方法来解决您的问题了。

例如，对所有正则表达式使用线程以及块形式`scan`来并行处理匹配，停止和中止所有进一步的扫描并尽早完成？

# r - R中有几个变量的频率表

> ID：11852408
> 
> 赞同：7
> 
> 时间：2012-08-07T19:02:43.447
> 
> 标签：r, aggregate, frequency

我正在尝试复制官方统计中经常使用的表格，但到目前为止还没有成功。给定一个像这样的数据框：

```
d1 <- data.frame( StudentID = c("x1", "x10", "x2", 
                          "x3", "x4", "x5", "x6", "x7", "x8", "x9"),
             StudentGender = c('F', 'M', 'F', 'M', 'F', 'M', 'F', 'M', 'M', 'M'),
             ExamenYear    = c('2007','2007','2007','2008','2008','2008','2008','2009','2009','2009'),
             Exam          = c('algebra', 'stats', 'bio', 'algebra', 'algebra', 'stats', 'stats', 'algebra', 'bio', 'bio'),
             participated  = c('no','yes','yes','yes','no','yes','yes','yes','yes','yes'),  
             passed      = c('no','yes','yes','yes','no','yes','yes','yes','no','yes'),
             stringsAsFactors = FALSE) 
```

我想创建一个表格，显示 PER YEAR ，所有学生（全部）的人数和女性人数，参加人数和通过人数。请注意以下“其中”是指所有学生。

我想到的表看起来像这样：

```
cbind(All = table(d1$ExamenYear),
  participated      = table(d1$ExamenYear, d1$participated)[,2],
  ofwhichFemale     = table(d1$ExamenYear, d1$StudentGender)[,1],
  ofwhichpassed     = table(d1$ExamenYear, d1$passed)[,2]) 
```

我确信在 R 中有更好的方法来处理这种事情。

注意：我见过 LaTex 解决方案，但我不使用这对我有用，因为我需要在 Excel 中导出表格。

提前致谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-07T19:13:18.677

使用`plyr`：

```
require(plyr)
ddply(d1, .(ExamenYear), summarize,
      All=length(ExamenYear),
      participated=sum(participated=="yes"),
      ofwhichFemale=sum(StudentGender=="F"),
      ofWhichPassed=sum(passed=="yes")) 
```

这使：

```
 ExamenYear All participated ofwhichFemale ofWhichPassed
1       2007   3            2             2             2
2       2008   4            3             2             3
3       2009   3            3             0             2 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-07T19:14:21.967

这个`plyr`包非常适合这种事情。首先加载包

```
library(plyr) 
```

然后我们使用`ddply`函数：

```
ddply(d1, "ExamenYear", summarise, 
      All = length(passed),##We can use any column for this statistics
      participated = sum(participated=="yes"),
      ofwhichFemale = sum(StudentGender=="F"),
      ofwhichpassed = sum(passed=="yes")) 
```

基本上，ddply 需要一个数据帧作为输入并返回一个数据帧。然后，我们将输入数据帧拆分为`ExamenYear`。在每个子表上，我们计算一些汇总统计信息。请注意，在 ddply 中，我们在引用列时不必使用该`$`符号。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-07T19:28:11.267

可能对您的代码进行了一些修改（用于`with`减少`df$`调用次数并使用字符索引来改进自我文档），这将使您的代码更易于阅读并成为`ddply`解决方案的有价值的竞争对手：

```
with( d1, cbind(All = table(ExamenYear),
  participated      = table(ExamenYear, participated)[,"yes"],
  ofwhichFemale     = table(ExamenYear, StudentGender)[,"F"],
  ofwhichpassed     = table(ExamenYear, passed)[,"yes"])
     )

     All participated ofwhichFemale ofwhichpassed
2007   3            2             2             2
2008   4            3             2             3
2009   3            3             0             2 
```

我希望这比 ddply 解决方案快得多，尽管只有在处理更大的数据集时才会明显。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-26T07:24:42.313

您可能还想看看 plyr 的下一个迭代器：[dplyr](https://github.com/hadley/dplyr)

它使用类似 ggplot 的语法，并通过用 C++ 编写关键部分来提供快速性能。

```
d1 %.% 
group_by(ExamenYear) %.%    
summarise(ALL=length(ExamenYear),
          participated=sum(participated=="yes"),
          ofwhichFemale=sum(StudentGender=="F"),
          ofWhichPassed=sum(passed=="yes")) 
```

# asp.net - asp.net 复选框从不调用方法

> ID：11852411
> 
> 赞同：0
> 
> 时间：2012-08-07T19:02:58.043
> 
> 标签：asp.net, checkbox

VS2010

您好，我有一个网页，其中包含从数据库填充的 gridview。其中一个字段是复选框。我要做的是在单击复选框时更新数据库中的值。但是，我在该`gvSiteInfo_CheckBoxUpdate()`方法中有一个断点，并且永远无法到达。

您能指出我正确的方向以使其正常工作吗？我在网上找到的几个例子似乎和我的一样。

下面是我的标记的缩写版本。

```
<asp:GridView ID="gvSiteInfo" runat="server" 
    AutoGenerateColumns="False" OnSorting="gvSiteInfo_Sorting" 
    AllowSorting="True">
    <AlternatingRowStyle BackColor="#DCDCDC" />
    <Columns>
        <asp:BoundField DataField="prodHostHeader" HeaderText="Production Host Header" 
            SortExpression="prodHostHeader" />
        <asp:BoundField DataField="prodDirectory" HeaderText="Production Directory" 
            SortExpression="prodDirectory" />
        <asp:BoundField HeaderText="Active Issues" DataField="issueCount"
            SortExpression="issueCount" />
        <asp:TemplateField HeaderText="Testing Complete" SortExpression="true">
            <ItemTemplate>
                <asp:CheckBox ID="cbTestComplete" runat="server" CausesValidation="true" AutoPostBack="true" OnCheckedChanged="gvSiteInfo_CheckBoxUpdate"
                 Checked='<%# DataBinder.Eval(Container, "DataItem.testComplete").ToString().Equals("true") %>' />
            </ItemTemplate>
            <EditItemTemplate>
                <asp:CheckBox ID="cbTestComplete" runat="server" CausesValidation="true" AutoPostBack="true" OnCheckedChanged="gvSiteInfo_CheckBoxUpdate"
                     Checked='<%# DataBinder.Eval(Container, "DataItem.testComplete").ToString().Equals("true") %>' />             
            </EditItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

这是应该调用的代码

```
public void gvSiteInfo_CheckBoxUpdate(object sender, EventArgs e)
{
        SiteDB dbAccess = new SiteDB();
        dbAccess.updateSiteInfo();
} 
```

---------------EDIT---------------------------- 这是我的page_load代码

```
 protected void Page_Load(object sender, EventArgs e){
        SiteDB dataAccess = new SiteDB();
        dataAccess.SelectedConnectionString = "WISQL01";

        DataTable dt = dataAccess.getSiteInfo();

        gvSiteInfo.DataSource = dt;
        gvSiteInfo.DataBind();
    } 
```

- - - - - - -更新 - - - - - - - - - - - - - -

添加`CausesValidation="true"`到`<asp:checkbox>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T19:07:08.243

您需要在每次回发时重新创建网格内容（将网格重新绑定到数据源）。由于复选框单元格是动态生成的 - 必须在每次回发时重新创建它才能使事件处理程序生效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T19:06:07.253

您在绑定 GridView 时遇到问题，每次绑定时，都会删除您的事件。

您必须采用这种绑定行为

```
if(! IsPostBack)
{
  Bind();
} 
```

并使用`EnableViewState=true`以保持您的gridview

# objective-c - 为什么没有多个 NSSortDescriptor 与 NSFetchedResultsController 一起工作

> ID：11852413
> 
> 赞同：-1
> 
> 时间：2012-08-07T19:03:04.420
> 
> 标签：objective-c, ios, nsfetchedresultscontroller, nssortdescriptor

我有一个带有 UITableView 的控制器，它显示“项目”对象的列表，这些项目就像支票簿条目。除了排序之外，一切似乎都正常工作。我将在下面描述我正在寻找的排序，但目前记录是按照它们创建的顺序显示的。Item 对象 (NSManagedObjects) 的属性包括日期 (NSDate)、金额 (NSDecimalNumber) 和条目（Entry 是与 Item 有关系的 NSManaged 对象）。

在应用程序中，您创建一个具有类型（NSNumber 0 == 贷方，1 = 借方）、标题、描述等的条目。然后添加 1 个或多个具有金额、日期等的 Item 对象。

我希望在表格视图部分中按日期对项目进行分组，以便共享相同日期的所有项目都在同一部分中。在每个部分中，它们应首先按类型（先贷后借）然后按金额降序排序。在一个部分中是这样的：

## 2012 年 7 月 3 日

*   学分：900
*   借方：(25)
*   借方：(15)

## 2012 年 8 月 7 日

*   信用：1000
*   学分：900
*   学分：100
*   学分：25
*   借记：（700）
*   借方：(450)
*   借方：(25)

ViewController 本身是一个 UITableViewDelegate、UITableViewDataSource 和 NSFetchedResultsControllerDelegate。

这是 NSFetchedResultsController getter 方法：

```
- (NSFetchedResultsController *)aFetchedResultsController {

    if (_aFetchedResultsController != nil) {
        return _aFetchedResultsController;
    }

    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"(date >= %@) AND (date <= %@)", startDate, endDate];
    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Item" inManagedObjectContext:self.context];
    [fetchRequest setEntity:entity];
    [fetchRequest setPredicate:predicate];

    NSSortDescriptor *sortDate = [[NSSortDescriptor alloc] initWithKey:@"date" ascending:YES];
    NSSortDescriptor *sortType = [[NSSortDescriptor alloc] initWithKey:@"entry.type" ascending:YES];
    NSSortDescriptor *sortAmount = [[NSSortDescriptor alloc] initWithKey:@"amount" ascending:NO];
    [fetchRequest setSortDescriptors:[NSArray arrayWithObjects:sortDate, sortType, sortAmount, nil]];

    [fetchRequest setFetchBatchSize:20];

    NSFetchedResultsController *theFetchedResultsController =
    [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest
                                        managedObjectContext:self.context sectionNameKeyPath:@"day"
                                                   cacheName:@"Root"];
    self.aFetchedResultsController = theFetchedResultsController;
    _aFetchedResultsController.delegate = self;

    return _aFetchedResultsController;

}//end 
```

查看已加载：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.

    NSDate *today = [NSDate new];
    NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
    NSDateComponents *offsetComponents = [[NSDateComponents alloc] init];

    [offsetComponents setMonth:-1]; //1 month ago
    startDate = [gregorian dateByAddingComponents:offsetComponents toDate:today options:0];

    [offsetComponents setMonth:1]; //1 month ahead
    endDate = [gregorian dateByAddingComponents:offsetComponents toDate:today options:0];

    //set the MOC
    self.context = [((AppDelegate *)[[UIApplication sharedApplication] delegate]) managedObjectContext];

    [self fetchRecords];

}//end viewDidLoad 
```

以及实际获取记录的方法：

```
-(void)fetchRecords{

    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"(date >= %@) AND (date <= %@)", startDate, endDate];
    [[self.aFetchedResultsController fetchRequest] setPredicate:predicate];
    [NSFetchedResultsController deleteCacheWithName:@"Root"];

    NSError *error;
    if (![[self aFetchedResultsController] performFetch:&error]) {

        // Update to handle the error appropriately.
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        exit(-1);  // Fail

    }//end if

    [_tableView reloadData];

}//end fetchRecords 
```

"day" 是一个 Item 实例方法，我使用它让 UITableView 部分标题显示格式化的日期字符串：

```
- (NSString *)day {
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    dateFormatter.dateStyle = NSDateFormatterFullStyle;

    return [dateFormatter stringFromDate:self.date];

}//end day 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T00:55:19.070

So as it turns out the code above all works perfectly and there really is no error with how the sorting is working. The issue is obscured by my "day" function which is making UITableView sections based on the `NSDateFormatterFullStyle` representation of the the item's "date" property. However the reality is that the dates are all different when it comes to the time portion which explains why they were being sorted by the order they were created.

I discovered this after trying Martin R's comment about using `sectionNameKeyPath:@"date"` and saw each row in its own section.

Thus the solution to my issue is to only set the month, day, and year of the "date" property when it is set, this may be unique to my application since those are the only portions of the date that I care about, not the time.

To do this I overrode the setter for "date" in my NSManagedObject "Item" with this code:

```
- (void)setDate:(NSDate *)date
{

    NSDateComponents *components = [[NSCalendar currentCalendar] 
                                    components:NSDayCalendarUnit | NSMonthCalendarUnit | NSYearCalendarUnit 
                                    fromDate:date];
    NSInteger day = [components day];
    NSInteger month = [components month];
    NSInteger year = [components year];

    NSDateComponents *comps = [[NSDateComponents alloc] init];

    [comps setDay:day];
    [comps setMonth:month];
    [comps setYear:year];

    NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];

    NSDate *newDate = [gregorian dateFromComponents:comps];

    [self willChangeValueForKey:@"date"];
    [self setPrimitiveValue:newDate forKey:@"date"];
    [self didChangeValueForKey:@"date"];

}//end setDate 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T22:24:07.633

从文档`initWithFetchRequest:managedObjectContext:sectionNameKeyPath:cacheName:`

> sectionNameKeyPath
> 
> ...如果此键路径与 fetchRequest 中第一个排序描述符指定的不同，则它们必须生成相同的相对排序。

您的代码中不是这种情况。将日期转换为字符串不会保留顺序。

Apple Developer Library 中的示例代码[DateSectionTitles](http://developer.apple.com/library/ios/#samplecode/DateSectionTitles/Introduction/Intro.html%23//apple_ref/doc/uid/DTS40009939)演示了如何正确执行此操作。

# c# - HttpContext.Current.Request.Cookies 重新加载后不加载值

> ID：11852414
> 
> 赞同：4
> 
> 时间：2012-08-07T19:03:08.127
> 
> 标签：c#, cookies

我正在开发一个多语言 C# 网站。我写了一个databaselanguages文件和Languages类。在这堂课中，我将所有字符串都放在适当的语言中。默认情况下，语言是荷兰语，除非有 cookie。在我使用语言类之前，我把它写在默认的 aspx.cs 中，并像这样请求 cookie：

```
Context.Request.Cookies ["lancookie"]; 
```

如果更改了语言，我更改了 cookie 并重新加载页面。在我使用的语言课中：

```
HttpContext.Current.Request.Cookies ["lancookie"].Value; 
```

如果我更改语言，那么它也需要几分钟才能加载。我该怎么做才能触发 cookie？

```
 public class Language
    {

      public static string getLanCookie ()
      {
        lancookie string = string.Empty;
        if (HttpContext.Current.Request.Cookies ["lancookie"]. Value! = null)
        {
            lancookie HttpContext.Current.Request.Cookies = ["lancookie"]. Value;
        }
        else
        {
            lancookie = "Dutch";
        }
        lancookie return;
      }

       public static string language = getLanCookie ()
       public static string Home = Language ("Home", language);
       public static string end = Language ("The End", language);
       public static string Subject = Language ("Box", language);

   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T19:07:35.550

你必须使用

> HttpContext.Current.Response.Cookies

设置一个新的。为了能够清除 cookie，您必须将其过期日期设置为过去。不会太详细，因为这应该回答你的问题：

[何时使用 Request.Cookies 而不是 Response.Cookies？](https://stackoverflow.com/questions/573922/when-to-use-request-cookies-over-response-cookies)

# css - 当窗口缩小时，位于右侧的 div 绝对值会超过左侧 div

> ID：11852415
> 
> 赞同：1
> 
> 时间：2012-08-07T19:03:11.207
> 
> 标签：css, html, resize, window, css-position

我的网页上有一个具有以下属性的 div：

```
#topright {

position: absolute;
top: 0;
right: 0;
width: 250px;
height: 400px;
background-color: blue;
} 
```

“topright” div 的功能是用作导航栏。

然后，有一个主要内容 div 容器，它将所有其他内容放在一起。

```
#maincontainer {

position: absolute;
left: 0;
width: 700px;
} 
```

所以我的问题如下：当窗口被调整大小时，我希望右上角的 div 贴在窗口的右上角。但是，当窗口变小时，我希望它是“有限的”，这样它就不会超过 700px 主容器 div。基本上，当窗口的大小调整到距屏幕左侧 700 像素时，我希望水平滚动条出现，并且右上角的 div 不会阻止查看器的主容器内容。

我希望有人能帮帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T19:28:55.440

这是示例[http://jsfiddle.net/mnSGZ/1/](http://jsfiddle.net/mnSGZ/1/)

# javascript - 如何在多个文本节点中搜索字符串

> ID：11852417
> 
> 赞同：3
> 
> 时间：2012-08-07T19:03:15.060
> 
> 标签：javascript, jquery, search

我目前有一个脚本，可以在页面上搜索用户键入的单词并在找到该单词时突出显示该单词。

但是，当用户在他们正在搜索的字符串中放置一个空格时，这会失败，因为我使用 jQuery 将文档文本拆分为节点，并检查每个节点是否包含当前搜索短语。

我想要做的是扩展它以搜索用户定义的字符串，而不是在第一个空格之后失败。不过，我根本不知道该怎么做，所以我希望有人能在这里帮助我。

这是我目前正在使用的查找节点的方法：

```
keyup(function({

    $(instance.textWrapper).html(instance.getOriginalText());               

    if (this.value.length >= instance.startSearchingLength) {

        var regx = new RegExp("(" + escape(this.value) + ")", 'gi');

        $(instance.textWrapper).each(function() {
            var textNodes = $(this).find('*').contents().filter(function(){
                return this.nodeType === 3
        });

        textNodes.each(function(){
            var $this = $(this);
            var content = $this.text();
            content = content.replace(regx, 
                                      '<span class="'
                                      + instance.highlightCssClass +
                                      '">$1</span>');
            $this.replaceWith(content);     
        });
    });
} 
```

`startSearchingLength`之前定义为搜索必须被搜索的长度。 `highlightCssClass`正是 CSS 类在找到字符串后将其包装起来的内容。

失败示例：

搜索`foo bar`将突出显示页面上的每个实例`foo`，但是一旦遇到空格，这些突出显示就会消失，并且无法找到完整的字符串。

因此，代码当前搜索每个人`Text Node`的搜索查询，但我希望让脚本在文件的所有文本中找到任何字符串。我不知道如何做到这一点，所以任何帮助将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T19:47:14.963

简单的。您使用了错误的转义。放下那个`escape`。

```
this.value.replace(/([[\\^$.|?*+()])/g, "\\$1") 
```

您必须转义的是正则表达式的保留字符。

# wpf - ComponentOne 的 FlexGrid 背景颜色

> ID：11852418
> 
> 赞同：1
> 
> 时间：2012-08-07T19:03:18.240
> 
> 标签：wpf, caliburn.micro, componentone

我有一个 WPF Caliburn.Micro 应用程序。我曾经有一个DataGrid，这是代码的一部分：

```
<DataGrid x:Name="FirstEntries" Grid.Row="5"
      AutoGenerateColumns="False"
      BaseControls:DataGridExtension.Columns="{Binding FirstEntryGridColumns}"
      CanUserAddRows="False" IsReadOnly="True"
      SelectedItem="{Binding Path=SelectedFirstEntry}">
  <DataGrid.Resources>
      <conv:StatusToBackgroundColorConverter x:Key="StatusToBackgroundColor"/>
  </DataGrid.Resources>
  <DataGrid.ItemContainerStyle>
      <Style TargetType="{x:Type DataGridRow}">
          <Style.Setters>
              <Setter Property="Background" Value="{Binding Path=Status, Converter={StaticResource StatusToBackgroundColor}}"></Setter>
              <Setter Property="cal:Message.Attach" Value="[Event MouseDoubleClick] = [Action OnDoubleClickFirstEntry($dataContext)]"/>
          </Style.Setters>
      </Style>
  </DataGrid.ItemContainerStyle> 
```

可以看到每一行的背景色都绑定了Status字段值，并且处理了一个双击事件。现在我正在迁移到 ComponentOne 的 FlexGrid，但我不知道如何在那里实现相同的目标，因为 FlexGrid 似乎不知道 ItemContainerStyle。

你能帮我解决这个问题吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T20:34:42.077

C1 FlexGrid 出于性能原因做一些“WinFormsy”的事情，并且不使用 DependencyProperties 或样式/模板，因此您不能使用数据触发器来设置行背景或将命令设置为您想要的事件。他们的建议是使用 Cell 的 mouseclick 事件在代码中处理这一切。

如果可能的话，我的建议是回到 W​​PF 4.0 的 DataGrid 并绑定[到 ICollectionView 以利用它的过滤功能](http://bea.stollnitz.com/blog/?p=31)。链接是 Bea Stollnitz 的许多关于操作集合视图的教程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T10:08:08.803

你有没有看过***CellFactory***类和***ICellFactory***接口。我用它来根据我的一个项目中的项目状态设置不同的背景颜色。

```
Public Overrides Sub CreateCellContent(grid As C1.WPF.FlexGrid.C1FlexGrid, bdr As Border, rng As C1.WPF.FlexGrid.CellRange)
        MyBase.CreateCellContent(grid, bdr, rng)

        Dim infPre As InfPresenterTextEntity
        infPre = CType(grid.Rows(rng.Row).DataItem, InfPresenterTextEntity)

        If Not infPre Is Nothing Then
            If infPre.IsNew Then
                grid.Rows(rng.Row).Background = Brushes.LightGreen
            ElseIf infPre.IsDirty Then
                grid.Rows(rng.Row).Background = Brushes.LightYellow
            End If

            'grid.AutoSizeRow(rng.Row, 0)
            'grid.AutoSizeRows(rng.Row, rng.Row, 0)
        End if 
End Sub 
```

# php - 如何在 PHP 中设置 SSO？

> ID：11852421
> 
> 赞同：-2
> 
> 时间：2012-08-07T19:03:31.610
> 
> 标签：php, single-sign-on

我目前正在开发我的私人网站，该网站由许多子域（新闻/博客等）组成。

所以我想到了用户可以通过 login.domain.com 登录的想法。之后，他们应该在任何地方登录。唯一的问题是我仍在为 SSO 的想法而苦苦挣扎。我不明白 blog.domain.com 如何理解客户端是否登录 login.domain.com，因为每个域都设置了 cookie/会话。

有人可以简要解释一下这个想法（也许有一些 PHP 示例？）。或者是否有一些优秀的 PHP 库可以使 SSO 成为可能（我尝试过一个但使用失败）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T19:08:33.840

如果会话仅在子域上共享，您可以将会话 cookie 设置为在整个域上有效。

[http://php.net/manual/en/function.session-set-cookie-params.php](http://php.net/manual/en/function.session-set-cookie-params.php)

例如：

```
session_set_cookie_params(0, "/", ".example.com"); 
```

# mysql - MySQL的更新命令

> ID：11852423
> 
> 赞同：0
> 
> 时间：2012-08-07T19:03:58.680
> 
> 标签：mysql, sql

我有 2 张桌子（A 和 B）

*   表 A 有 id,project_id,enabled 列
*   表 B 有 id、project_id、name、description、note、created_on 列

假设在 A 表中我们只有 1 个项目 (id = 11) 已启用为 true，因此我将项目 id 11 视为父项目

在表 B 中，我们有项目 11 的详细信息

我想要做的是，如果项目 11 的表 B 中的名称或描述或注释发生更改，我想在单个查询中使用项目 11 的更改值更新所有项目的其余部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T19:11:42.133

如果 project_id=11 的其他记录在同一个表中，您可以简单地运行：

```
Update tblB set description ='...', name ='...' where project_id = 11 
```

如果它们在不同的表中，您可以使用触发器集在更新 tblB 时执行

# css - 使用 CSS 为标题添加彩色边线

> ID：11852424
> 
> 赞同：0
> 
> 时间：2012-08-07T19:03:59.087
> 
> 标签：css, less

我正在尝试使用 CSS 将彩色边线添加到页面上的标题中，这就是我迄今为止提出的（使用 LESS 因此嵌套属性） -

```
h2 {
    font-size: 2em;
    color: @black;
    position: relative;
    text-transform: uppercase;
    &:before {
        position: absolute;
        top: 1em; // 50% of h2 font-size
        left: 100px;
        content: '';
        border-bottom: 1px solid @orange;
        width: 100px;
    }
    &:after {
        position: absolute;
        top: 1em;
        right: 100px;
        content: '';
        border-bottom: 1px solid @orange;
        width: 100px;
    }
} 
```

这给了我在标题两侧底部的一条线（使用border-bottom 属性），但我希望它们垂直居中于标题的高度。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T19:09:51.017

`position:relative`在您的 H2 上使用, 并为您的and使用`position:absolute`正确的顶部/左侧/右侧/底部。`:before``:after`

# php - PHP将类添加到html div

> ID：11852425
> 
> 赞同：3
> 
> 时间：2012-08-07T19:04:02.607
> 
> 标签：php, addclass

我想用 php 在我的 html (.complete) 中添加一个类：

```
if( get_field('to-do-repeater') )
{
    Add (complete) class to <div class="to-do to-do-wrap"> should be <div class="to-do to-do-wrap complete">
}
else
{
    Do nothing
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-07T19:11:28.530

试试这个代码：

```
<div class="to-do to-do-wrap<?php echo get_field('to-do-repeater') ? ' complete' : '' ?>"></div> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T19:09:56.177

```
<?php

echo "<div class=\"to-do to-do-wrap ";
if(get_field('to-do-repeater'))
{
    echo "complete";
}
echo " \"></div>";

?> 
```

# javascript - 使用 .NET JavaScriptSerializer.Deserialize 和来自客户端的 DateTime

> ID：11852432
> 
> 赞同：7
> 
> 时间：2012-08-07T19:04:25.997
> 
> 标签：javascript, .net, json, date, datetime

我正在使用该`JavaScriptSerializer.Deserialize<>()`方法将从客户端收到的 JSON 转换为自定义 C# 类。该类的属性之一是 a `DateTime`。目前该`Deserialize<>()`方法抛出一个错误，说

> “（我的日期字符串）”不是 DateTime 的有效值。

我尝试使用几种不同的格式发送日期，包括由各种内置 JavaScript Date() 方法生成的刻度和其他格式，但它们都不起作用。

`Deserialize<>()`为了将其解析为 .NET的方法所期望的格式到底是什么`DateTime`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-09T17:10:36.060

你是对的，@friendlycello。不幸的是，从这个.Net 序列化程序 DateTime 格式`JSON.stringify()`中删除了反斜杠。`\/Date(ticks)\/`

我编写了一个自定义函数来调整 的输出`JSON.stringify()`，包括这些反斜杠。所以，我可以保持几乎不变，只替换数据中的from`JSON.stringify()`到：param。`customJSONstringify()``$.ajax()`

```
function customJSONstringify(obj) {
    return JSON.stringify(obj).replace(/\/Date/g, "\\\/Date").replace(/\)\//g, "\)\\\/")
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-26T19:46:41.523

Eduardo 在 JavaScript 方面提供了一个解决方案。您还可以选择更正服务器端的问题。

```
// C# Side
var obj = Regex.Replace(json, @"/Date\((\-?\d*)\)/", @"\/Date($1)\/") 
```

请注意，我使用了单个替换。这比使用两个更安全、更准确`replace()`。相同的表达式可用于替换 JavaScript 示例中的表达式。

```
// Safer version of function using a single replace
function customJSONstringify(obj) {
    return JSON.stringify(obj).replace(/\/Date\((\-?\d*)\)\//g, "\\/Date($1)\\/");
} 
```

两次调用`replace()`可能会导致第二次替换替换与数据无关的文本。请注意，更安全的是，可以更新表达式以仅替换`/Date(.\*)/`前面和后面跟单引号的实例。这将确保如果有描述`/Date(.\*)/`语法的文本不会被替换。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T20:02:16.220

想通了 - 它在格式中有效`\/Date(ticks)\/`

注意：如果你使用 JSON.stringify 创建你的请求，它会自动转义你的反斜杠，导致服务器端解析错误。我发现这样做的唯一方法是在服务器端`\\`替换所有实例。`\`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-05T11:45:06.343

收到错误后

> /Date(1347992529530)/ 不是 DateTime 的有效值。

使用@Luis Perez 建议的替换对我有用。

```
var data = ko.toJSON({ objext: obj});
$.ajax({
    url: "/API/API.asmx/SaveObject",
    type: "POST",
    dataType: "json",
    contentType: "application/json; char-utf8;",
    data: data.replace(/\/Date/g, "\\\/Date").replace(/\)\//g, "\)\\\/"),
    success: function (r) {},
    error: function (e) {},
    complete: function () {}
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-10T10:05:53.860

我建议改用 JsonConvert.DeserializeObject<> 。

# c# - 在简单条形图中显示项目计数的简单仪表板

> ID：11852433
> 
> 赞同：1
> 
> 时间：2012-08-07T19:04:27.243
> 
> 标签：c#, jquery, asp.net, dashboard

我正在尝试构建一个非常简单的仪表板图表来显示某人拥有多少未完成的项目。就像是：

```
item 1 ------------------ (54 items)
item 2 ---------------------------------(74 items)
item 2 -------(10 items) 
```

理想情况下，我希望用简单的彩色条代替破折号。

我搜索了谷歌，但可能使用了错误的搜索词。我更喜欢 C# 解决方案，但如果需要，我很乐意使用 JQuery。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T19:13:54.200

我需要更多信息来专门解决这个问题，但这里有一些想法：

我假设您正在呈现某种集合，例如在中继器或 Gridview 中？

如果您不使用它，我会推荐一个中继器，因为它可以在这种情况下做一些非常具体的事情，这里有一个例子：

```
 <asp:Repeater id=Repeater1 runat="server">
      <HeaderTemplate>
         <table>
      </HeaderTemplate>

      <ItemTemplate>
         <tr>
            <td> 
               <%# DataBinder.Eval(Container.DataItem, "Name") %>
               <span class='backgroundBar' style='width:<%# DataBinder.Eval(Container.DataItem, "Count") %>px;'>&nbsp;</span>
               (<%# DataBinder.Eval(Container.DataItem, "Count") %> items)
            </td>
         </tr>
      </ItemTemplate>

      <FooterTemplate>
         </table>
      </FooterTemplate>

   </asp:Repeater> 
```

然后

```
Object[] values = new Object[];

Repeater1.DataSource = values;
Repeater1.DataBind(); 
```

您可以将虚线替换为带有背景图像的某种 div 或任何您喜欢的样式。

** 确保在样式属性中使用单引号，因为双引号会引发内联代码错误 **

# ruby-on-rails - Rails 通过 URL 传递参数

> ID：11852434
> 
> 赞同：0
> 
> 时间：2012-08-07T19:04:28.603
> 
> 标签：ruby-on-rails

我正在尝试在我的 rails 应用程序中实现搜索。我有一个`User`模型，其中每个用户都有一个`id`和一个`facebook_id`.

如何实现搜索`facebook_id`？我正在寻找这样的称呼：`localhost:3000/users.json?facebook_id=123456`.

谢谢！

**编辑**：我尝试了条件索引，但收到错误“我们很抱歉，但出了点问题。”

这是我的代码：

```
 def index
    if params[:facebook_id]
      respond_with User.find(params:facebook_id)
    elsif params[:twitter_id]
      respond_with User.find(params:twitter_id)
    else
      respond_with User.all
    end
  end 
```

导轨日志：

```
2012-08-07T19:43:11+00:00 app[web.1]: Started GET "/users.json?facebook_id=1" for 173.247.200.7 at 2012-08-07 19:43:11 +0000
2012-08-07T19:43:11+00:00 app[web.1]: Processing by UsersController#index as JSON
2012-08-07T19:43:11+00:00 app[web.1]:   Parameters: {"facebook_id"=>"1"}
2012-08-07T19:43:11+00:00 app[web.1]: Completed 500 Internal Server Error in 2ms
2012-08-07T19:43:11+00:00 app[web.1]: 
2012-08-07T19:43:11+00:00 app[web.1]: NameError (undefined local variable or method `facebook_id' for #<UsersController:0x000000044b6e38>):
2012-08-07T19:43:11+00:00 app[web.1]:   app/controllers/users_controller.rb:4:in `index' 
```

**Edit2**：将参数从更改为后`params:facebook_id`，`params[:facebook_id]`我收到另一个错误。这是我的 Rails 日志的副本。

```
2012-08-07T19:53:45+00:00 app[web.1]: Started GET "/users.json?facebook_id=1000" for 173.247.200.7 at 2012-08-07 19:53:45 +0000
2012-08-07T19:53:45+00:00 app[web.1]: Processing by UsersController#index as JSON
2012-08-07T19:53:45+00:00 app[web.1]:   Parameters: {"facebook_id"=>"1000"}
2012-08-07T19:53:45+00:00 app[web.1]: Completed 500 Internal Server Error in 2ms
2012-08-07T19:53:45+00:00 app[web.1]: 
2012-08-07T19:53:45+00:00 app[web.1]: ActiveRecord::RecordNotFound (Couldn't find User with id=1000):
2012-08-07T19:53:45+00:00 app[web.1]:   app/controllers/users_controller.rb:4:in `index' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T19:48:50.170

您正在错误地访问 params 哈希（您正在做`params:facebook_id`，应该是`params[:facebook_id]`）。试试这个：

```
def index
    if params[:facebook_id]
      respond_with User.find(params[:facebook_id])
    elsif params[:twitter_id]
      respond_with User.find(params[:twitter_id])
    else
      respond_with User.all
    end
  end 
```

第二个错误（您的第二次编辑）是因为您试图获取一个不存在的用户（id = 1000）。发生这种情况是因为您正在通过其主键 (id) 查找用户。从[指南](http://guides.rubyonrails.org/active_record_querying.html)：

> 如果没有找到匹配的记录，Model.find(primary_key) 将引发 ActiveRecord::RecordNotFound 异常。

如果你想通过**facebook id**获取，你应该可以这样做：

```
User.find_by_facebook_id(params[:facebook_id]) 
```

这种查找器称为[动态](http://guides.rubyonrails.org/active_record_querying.html#dynamic-finders)查找器，它基本上可以让您执行以下操作：

```
Model.find_by_field 
```

其中 field 是与您的模型相关的表的任何字段或属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T19:07:49.383

你的方法很好。您可以按照您的建议添加查询参数，并在控制器中添加逻辑，如果 facebook_id 存在则搜索用户。 `:facebook_id`将在与 URL 匹配的控制器操作中可用。在你的情况下，这可能是`User#index`行动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T19:50:53.173

您可以在视图中放置一个搜索表单：

```
<%= form_tag user_path, :method => 'post' do %>
  <%= text_field_tag :search, params[:search] %>
  <%= submit_tag "Search", :name => nil %>
<% end %> 
```

控制器中类似以下内容：

```
def index
  @users = User.search(params[:search])
end 
```

然后在模型中：

```
def self.search(search)
  if search
    find(:all, :conditions => ['facebook_id LIKE ?', "%#{search}%"])
  else
  find(:all)
  end
end 
```

# multithreading - 从类 .NET 外部调用

> ID：11852438
> 
> 赞同：1
> 
> 时间：2012-08-07T19:04:59.240
> 
> 标签：multithreading, c++-cli, invoke

我正在使用 Visual Studio C++ 2010。

我想从主线程以外的 GUI 中进行线程安全更改，从在主 Form 类之外声明的函数。这是我的一些代码：

**在主类之外：**

```
public delegate void DEBUGDelegate(String^ text); 
```

(...)

```
int lua_debug(lua_State *L){
    // boolean debug(message)
    Globals^ Global = gcnew Globals;
    String^ debugMsg = gcnew String(lua_tostring(L, 1));

    DEBUGDelegate^ myDelegate = gcnew DEBUGDelegate(Global->FORM, &Form1::DEBUGDelegateMethod);
    Global->FORM->Invoke(myDelegate, gcnew array<Object^> { "HEYO! \r\n" });

    lua_pushboolean(L, true);
    return 1;
} 
```

**在主类内部：**

```
public ref class Form1 : public System::Windows::Forms::Form
{

(...)

    public: void DEBUGDelegateMethod(String^ text)
    {
            this->DEBUGBOX->Text += text;
    }

(...)

    private: System::Void Form1_Load(System::Object^  sender, System::EventArgs^  e)
    {
        Globals^ Global = gcnew Globals;
        Global->FORM = this;
    }

    private: System::Void button1_Click_1(System::Object^  sender, System::EventArgs^  e)
    {
        Globals^ Global = gcnew Globals;
        DEBUGDelegate^ myDelegate = gcnew DEBUGDelegate(this, &Form1::DEBUGDelegateMethod);
        this->Invoke(myDelegate, gcnew array<Object^> { "HEYO! \r\n" });
    }
} 
```

**所以问题是，如果我评论函数“lua_debug”并且其余的保持不变，它可以正常工作并且单击button1会使文本出现在调试文本框中。当我使用 lua_debug 取消注释该部分时，出现错误：**

```
d:\prog\c++\x\x\Form1.h(146): error C2653: 'Form1' : is not a class or namespace name
1>d:\prog\c++\x\x\Form1.h(146): error C2065: 'DEBUGDelegateMethod' : undeclared identifier
1>d:\prog\c++\x\x\Form1.h(146): error C3350: 'X::DEBUGDelegate' : a delegate constructor expects 2 argument(s) 
```

146行是：

```
DEBUGDelegate^ myDelegate = gcnew DEBUGDelegate(Global->FORM, &Form1::DEBUGDelegateMethod); 
```

**==================================================== = @编辑**

在 Form1 声明后移动 lua_debug 后，我收到此错误：

```
d:\prog\c++\x\x\Form1.h(1829): error C2440: 'initializing' : cannot convert from    'System::Windows::Forms::Form ^' to 'X::Form1 ^'
1>          No user-defined-conversion operator available, or
1>          Cast from base to derived requires safe_cast or static_cast
1>d:\prog\c++\x\x\Form1.h(1829): error C3754: delegate constructor: member function    'X::Form1::DEBUGDelegateMethod' cannot be called on an instance of type 'System::Windows::Forms::Form ^' 
```

排队：

```
DEBUGDelegate^ myDelegate = gcnew DEBUGDelegate(Global->FORM, &Form1::DEBUGDelegateMethod); 
```

Global->FORM 声明为：

```
static Form^ FORM; 
```

在全局类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T19:36:03.830

尝试将`lua_debug`' 的定义移到 's 下面，或像之前那样`Form1`向前声明. 我假设它们都在同一个命名空间（和）内。如果不是，在第 146 行，您必须预先添加命名空间，即：。`Form1``DEBUGDelegateMethod``lua_debug``Form1``&YourNamespace::Form1::DEBUGDelegateMethod`

**编辑：（根据OP的编辑）**

只是沮丧：

```
DEBUGDelegate^ myDelegate = gcnew DEBUGDelegate( dynamic_cast<X::Form1^>(Global->FORM ), &Form1::DEBUGDelegateMethod); 
```

# jquery - Jquery 选择器在用户脚本上返回 Null

> ID：11852441
> 
> 赞同：1
> 
> 时间：2012-08-07T19:05:05.297
> 
> 标签：jquery, greasemonkey

我有一个在 chrome 上运行的用户脚本。我认为 jquery 已加载，因为我使用

```
// @require     http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js 
```

我确定页面上存在表格元素并且我已经检查了这一行 -

```
$('table') 
```

在控制台中，它会返回一组表。但是，当我将此行放入我的用户脚本并将其登录到控制台时，它会返回一个 []。

这是怎么回事？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T19:11:39.857

您的代码正在返回`[]`，因为它是在 DOM 准备好之前运行的。您需要将代码包装在`$(document).ready(function(){})`(`$(function(){})`是简写) 中。

```
$(function(){
    console.log($('table'));
}); 
```

# css - Css 将文本居中的最佳方式 vetically

> ID：11852444
> 
> 赞同：-2
> 
> 时间：2012-08-07T19:05:13.487
> 
> 标签：css, position

嗨，谁能帮我定位css吗？我有这个布局[http://jsfiddle.net/9r7NW/2/](http://jsfiddle.net/9r7NW/2/)我希望 TITLE 垂直居中，但是当它的父级不能固定时我不知道该怎么做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T19:07:59.770

HTML

```
<div id="floater">
<div id="content">
    Content here
</div>
</div> 
```

CSS

```
#floater    {float:left; height:50%; margin-bottom:-120px;}
#content    {clear:both; height:240px; position:relative;} 
```

直接来自[谷歌](https://www.google.com/search?q=vertically+center+css&sugexp=chrome,mod=6&sourceid=chrome&ie=UTF-8)。

用它。

# javascript - javascript中的警报Panotour Pro全景名称

> ID：11852451
> 
> 赞同：0
> 
> 时间：2012-08-07T19:05:38.837
> 
> 标签：javascript

我正在尝试从 PanoTour Pro 输出的虚拟游览中检索 javascript 中的全景名称。

![全景属性](../Images/cf3a2712c93ac65a5638eace643b446b.png)

我只是想找回名字，这里圈出来了。以 alert() 为例就可以了，然后我就很好了。

# apache-poi - Apache POI 编译错误

> ID：11852452
> 
> 赞同：1
> 
> 时间：2012-08-07T19:05:43.883
> 
> 标签：apache-poi, jdeveloper

我正在尝试使用 Apache POI 编写 Excel 工作表。我下载了最新版本 (3.8) 并将其添加到我在 JDeveloper 中的项目中。我没有任何例子可以工作。该行：

```
Workbook wb = new HSSFWorkbook(); 
```

给我这个错误：

```
Error(22,13): Iterable not found in interface org.apache.poi.ss.usermodel.Row
  in class org.apache.poi.hssf.usermodel.HSSFWorkbook
  in class test.PoiWriteExcelFile 
```

谷歌没有帮助。好像我缺少一些基本的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T04:03:59.280

java.lang.Iterable 是 Java 1.5 中首次引入的接口。POI要求1.5以上。也许您使用的是早期版本的 java 或者您没有使用 SE 版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T02:54:39.053

您必须将 poi JAR 包含到导出的文件中。为此，请右键单击您的项目 -> 属性。到达那里后，转到“Java Build Path”并转到“Order and Export”。选择您的 poi JAR 并将其一直向上移动。

这应该够了吧 ！

# internet-explorer - Internet Explorer 重定向问题

> ID：11852453
> 
> 赞同：1
> 
> 时间：2012-08-07T19:05:48.477
> 
> 标签：internet-explorer, redirect, internet-explorer-9

我有一个我构建的 URL 缩短服务，但 Internet Explorer 存在问题。我有一个链接到一个彩信服务器 (mms://example.com/somelongurl/somevideo.wmv)，它是从我的应用程序 (http://short.url/video) 重定向的。

当我单击该链接时，视频将打开并开始在 Windows Media Player 中播放，正如预期的那样。这种行为是预期的效果（我可以在 Firefox 和 Chrome 中可靠地重现）。但是，如果用户手动输入 URL（这通常是我们的 URL 缩短应用程序的情况），或者将其粘贴到浏览器窗口中，则会出现“网页无法显示”错误。这只发生在 IE 上；Chrome 和 Firefox 的行为符合预期。

此外，一个简单的重定向到另一个网页（例如[http://google.com](http://google.com)）也可以正常工作，粘贴或单击或键入。

我怀疑它与安全设置有关，或者可能与 mime 类型有关，或者可能两者兼而有之。重定向通过设置标题“位置”来工作。

任何帮助深表感谢。

**编辑**我一直在检查标题，它正在发送一个 302 状态代码（这是我想要的，以便脚本可以记录命中。301 将缓存，并且当用户返回时不会记录命中）。

IE 开发工具在启动器选项卡中显示 res://ieframe.dll/unknownprotocol.htm，用于框架 URL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T10:32:18.077

我建议您使用 IE Developer Toolbar 中的“网络”选项卡或类似[FIddler](http://www.fiddler2.com/fiddler2/)的工具来检查 HTTP 调用

# javascript - 表单中的 HTML 标记生成器

> ID：11852457
> 
> 赞同：1
> 
> 时间：2012-08-07T19:06:08.807
> 
> 标签：javascript, jquery, html, css

我正在制作一个类似[这样](http://www.quackit.com/html/html_generators/html_code_generator.cfm)的 html 模板生成器。它将具有特定的样式和标记，因此它真正需要做的就是从表单中获取输入并将它们放置在“模板”中并作为文本输出以便于复制/粘贴。我想知道是否有更简单的方法可以做到这一点，比如使用 jQuery。接受所有建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T03:32:16.920

jQuery 提供了一系列处理 DOM 的方法，这些方法对于从表单创建 HTML 标记很有用。如果适合您的目的，它还有一些特定于表单本身的方法。

查看[用于操作的 API](http://api.jquery.com/category/manipulation/)。您可能会发现有多种方法很有用。

由于您正在使用表单值构建 HTML，因此[.wrap() 方法](http://api.jquery.com/wrap/)可以非常有价值地使用输入的标签、id 和类来包围内容，这些标签、id 和类可以使用外部链接的 CSS 文件进行样式设置。另请参见 .wrapAll() 和 .wrapInner()。

您可能会发现 .html() 方法对于抓取任何元素的内容也很有趣。它有点与您需要的相反，但它可以派上用场。

# c# - 通过 silverlight 模型向 db 添加新记录

> ID：11852460
> 
> 赞同：0
> 
> 时间：2012-08-07T19:06:22.967
> 
> 标签：c#, sql, silverlight, mvvm

我有一个带有 ria 项目的 silverlight mvvm。我有一个用户界面，管理员用户可以在其中输入信息以创建新的工作订单。但是，我无法调用数据库并向表中添加新记录。我没有 UI 的代码隐藏，控件通过命令和命令参数绑定到模型。因此，当用户单击“添加新工作”时，它会出现在此处，

```
public class EditJobViewModel : ViewModelBase
{
    private Job _job;

    public Job CurrentJob
    {
        get { return _job; }
        set
        {
            _job = value;
            OnPropertyChanged("CurrentJob");
        }
    }

    public ICommand NewJob
    {
        get
        {
            return new DelegateCommand(BeginNewJob, (o) => true);
        }

    }

    public void BeginNewJob(object o)
    {

            _job = new Job();
            //_job.JobNumber = _job.JobID.ToString();
            _job.AssignedTo = App.userID;
            _job.AddedBy = App.userID;
            _job.FileTypeJob = "PDF";
            _job.AddedTS = DateTime.Now;
            _job.OpenDate = DateTime.Now;
            BeginSave(o);
        }
    } 
```

我遇到问题的地方是在“工作”表中创建新记录。在我的断点上，它返回它需要的所有列，而不是一个新的“JobID”，它是我的主键。这就是我试图创造新记录的方式。

```
public void BeginSave(object o)
    {
        if (!IsDesignTime)
        {
            try
            {
                if (CurrentJob.EntityState == EntityState.New)
                {
                    CurrentJob.AddedBy = App.userID;
                    CurrentJob.AddedTS = DateTime.Now;
                }
                CurrentJob.UpdatedBy = App.userID;
                CurrentJob.UpdatedTS = DateTime.Now;

                // This is here because of a bug in infragistics grid/Entity Framework 
                foreach (JobFileType ft in CurrentJob.JobFileTypes)
                {
                    if (ft.EntityState != EntityState.Unmodified)
                        (ft as IEditableObject).EndEdit();
                }

                foreach (JobTag tag in CurrentJob.JobTags)
                {
                    if (tag.EntityState != EntityState.Unmodified)
                        (tag as IEditableObject).EndEdit();
                }
                //(CurrentJob as IEditableObject).EndEdit();

                SubmitOperation s = _context.SubmitChanges();
                if (s.HasError)
                { }
            }
            catch (Exception ex)
            { }
        }
    } 
```

除了它永远不会命中 EntityState.new。这就是我想尝试的方式。我想有一种方法可以通过“BeginNewJob”命令来完成，但通常无法找到创建新 JobID 或记录的方法。数据库已经有 10000 条记录并且有多个用户创建作业，所以我需要一种方法来获取创建的最后一个作业 (getMaxID()??) 并适当地增加，当场创建一个新作业。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T21:35:19.810

如果您对 id 列使用 guid 类型，则无需查找下一个 id，这种方法会将新对象与以前的对象分离。

# xcode - 在 Xcode 4 中自动执行任务

> ID：11852462
> 
> 赞同：0
> 
> 时间：2012-08-07T19:06:45.340
> 
> 标签：xcode, macos, scripting, automation, development-environment

我很好奇 Xcode 4 是否可以以某种方式编写脚本。我面临的代码中散布着我想提取的文字。这听起来像是脚本的完美任务。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T19:16:29.907

AppleScript 内置于 OSX 并与 XCode 一起使用。我想这就是你所追求的。

# joomla2.5 - 从 joomla 网站阻止 Internet Explorer

> ID：11852464
> 
> 赞同：0
> 
> 时间：2012-08-07T19:06:50.363
> 
> 标签：joomla2.5

我有一个 Joomla 站点，我想阻止 Internet Explorer 用户访问该站点，但向他们显示一个自定义页面以升级到另一个浏览器。提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T14:17:03.057

哇，这是个坏主意，我讨厌 IE。您必须记住，有许多用户无法切换浏览器 - 大多数下班上网的用户都不允许安装任何软件，因此您会严重影响您的流量。

确实，没有正当理由不支持 IE7/8 或更新版本。如果网站编码得当，让网站在 IE 中运行并不难。坚持良好的做法，大多数问题根本不是问题。

也就是说，如果你真的想这样做，你所需要的只是一个简单的 javascript，它可以检测浏览器的用户代理，然后根据需要进行重定向。有数百个用于检测用户代理的脚本，只需 Google 一下。

# javascript - 如何通过 API 在 CKEDITOR 中创建链接

> ID：11852465
> 
> 赞同：0
> 
> 时间：2012-08-07T19:06:57.573
> 
> 标签：javascript, hyperlink, ckeditor

我有一个自定义插件可以做一些事情，并且在它处理结束时，如果当前选择了某些文本，它应该使用选定的文本（实际上是选定的 HTML）在 HTML 中创建一个链接。必须保留选定的 HTML 格式（即不能丢失 HTML 标记和属性），并且必须围绕所有元素创建链接。在 FCKEditor（CKEDITOR 的旧版本）中，可以执行以下操作：

```
FCK.CreateLink("mylink"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T20:03:07.333

使用 CKEDITOR 你可以这样做：

```
var selectedText = CKEDITOR.instances.editor1.getSelection().getSelectedText();
CKEDITOR.instances.editor1.insertHtml( '<a href="mylink">'+selectedText+'</a>' ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T13:14:53.107

解决我的问题的方法是：

```
var attributes = Array();
attributes["href"] = link;
var style = new CKEDITOR.style( { element : 'a', attributes : attributes } );
style.type = CKEDITOR.STYLE_INLINE;
style.apply(editor.document); 
```

它在保持所有格式的选定元素中创建了链接。

# dvcs - 应用于 DVCS Mercurial/Git 的复合基线概念

> ID：11852470
> 
> 赞同：0
> 
> 时间：2012-08-07T19:07:12.483
> 
> 标签：dvcs

我来自 IBM Rational ClearCase 世界（UCM 等等），当我记得 Composite Baselines 的概念时，我想知道是否存在与 DVCS 具有相同目的的东西。

我了解 Mercurial/Git 是“获取所有代码库或一无所有”。但可能是可以管理不同存储库的标签/基线并能够将它们作为复合基线进行管理的东西。

systemX/release-1 = 子系统A-repo/release-20 + 子系统B-repo/release-18 + 子系统C-repo/release-2

这种机制将抽象我可以查询 systemX-releasex 的基线并从 dvcs 存储库中获取适当的标签。

有任何想法吗。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T11:51:47.067

`git submodules`,`hg subrepos`等。

# android - 在 Dialog 或 FragmentDialog 中嵌入片段

> ID：11852472
> 
> 赞同：0
> 
> 时间：2012-08-07T19:07:23.123
> 
> 标签：android, dialog, fragment

我正在尝试在 Dialog 或 DialogFragment 中嵌入 Fragment

```
public class addAccountDialog extends DialogFragment 
{
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        View view = inflater.inflate(R.layout.add_account_dialog, container);
    accountType.setOnItemSelectedListener(new OnItemSelectedListener() 
        {
        public void onItemSelected(AdapterView<?> parentView, View selectedItemView, int position, long id) 
            {
            passwordFragment newFragment = new passwordFragment();
            FragmentTransaction transaction = getFragmentManager().beginTransaction();
            transaction.replace(R.id.fragment_base, newFragment);
            transaction.commit();
            }
        }
    }

}

        <LinearLayout
            android:id="@+id/fragment_base"
            android:layout_width="0px"
            android:layout_height="match_parent"
            android:layout_weight="3" > 
        </LinearLayout> 
```

我已经尝试过使用 Dialog 和 DialogFragment 无济于事。有没有人能够在对话框中实现片段。

先感谢您。

罗杰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T21:04:59.887

您无法放入`Fragments`other `Fragments`.

我的建议是把你`Fragments`放在一个`Activity`正常的范围内，然后通过在 XML 中这样做来给出`Activity`一个`Dialog`主题：

```
<activity android:theme="@android:style/Theme.Dialog" /> 
```

编辑：请注意，从 API-17 (4.2) 开始，您现在可以嵌套片段：[嵌套片段](http://developer.android.com/about/versions/android-4.2.html#NestedFragments)

# sharepoint-2010 - 从共享点列表中获取在 10 天或更短的时间内到期的数据

> ID：11852473
> 
> 赞同：1
> 
> 时间：2012-08-07T19:07:30.613
> 
> 标签：sharepoint-2010

我有一个列表，我想获取即将在 10 天或更短的时间内过期的数据。所以我有两个字段创建日期和过期日期。

谁能告诉我如何在共享点中使用 spquery 或任何其他方式来实现这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T20:28:10.900

有 2 种查询数据的方法（不包括跨整个网站集的查询）SPQuery 和 SPMetal（LINQ to SharePoint）。

一般来说，我尝试使用 SPMetal 生成的对象，并且只使用 CAML(SPQuery) 进行复杂查询。

这是首先使用 SPMetal 对象的 2 个示例。

```
ExporttestsDataContext context = new ExporttestsDataContext(SPContext.Current.Web.Url);

        var data = from d in context.Demo
                   where d.Expire < DateTime.Now.AddDays(5) && d.Expire >= DateTime.Now
                   select d;

        foreach (DemoItem item in data)
        {                
            //dowork
        } 
```

现在 SPQuery

```
 SPList list = SPContext.Current.Web.Lists["Demo"];
        SPQuery query = new SPQuery();
        query.Query = "<Where><And><Lt><FieldRef Name='Expire' /><Value Type='DateTime'><Today OffsetDays='10' /></Value></Lt><Geq><FieldRef Name='Expire' /><Value Type='DateTime'><Today /></Value></Geq></And></Where>";

        SPListItemCollection items = list.GetItems(query);
        foreach (SPListItem item in items)
        {
            //DoWork
        } 
```

有关 CAML 的一些信息，请参阅[http://sharepointmagazine.net/articles/writing-caml-queries-for-retrieving-list-items-from-a-sharepoint-list](http://sharepointmagazine.net/articles/writing-caml-queries-for-retrieving-list-items-from-a-sharepoint-list)。（我必须使用 OffsetDays 而不是 Offset 才能使上述工作正常进行）。

可以谷歌 SPMetal 了解更多信息。一个不错的工具是 CKS 开发工具，因为它只需在 Visual Studio 中单击几下即可生成此类。

# php - PHP 删除 Windows ^M 字符

> ID：11852476
> 
> 赞同：6
> 
> 时间：2012-08-07T19:07:36.003
> 
> 标签：php, linux, sanitize

我有一个 CSV 我正在从我无法控制的来源下载，每行的结尾都是

```
^M 
```

打印到 bash 终端时的字符。如何在 PHP 中以编程方式清理此输入？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-07T19:08:53.583

您看到的是一个 Windows 控制字符。为了在 PHP 中摆脱这个，你需要做的是 `$file = str_ireplace("\x0D", "", $file)` 无论十六进制是小写还是大写，这都可以工作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-01-18T03:58:43.073

您还可以通过在读取 CSV 文件之前添加此行来让 PHP 自动检测任何奇怪的行结尾，您无需执行任何其他操作。

```
ini_set('auto_detect_line_endings', true); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-07T19:09:18.443

`^M`是[回车符](http://vimdoc.sourceforge.net/htmldoc/digraph.html#digraph-table)，您应该可以使用以下命令将其删除：

```
$string = str_replace( "\r", "", $string); 
```

# c# - 如何为带有“out”参数的私有函数编写 C# 测试用例？

> ID：11852483
> 
> 赞同：2
> 
> 时间：2012-08-07T19:08:08.657
> 
> 标签：c#, visual-studio-2010, unit-testing, nunit

如何为私有函数的输出参数创建单元测试？

我的服务层：

```
private int LoadProduct(string productId, out IProduct product)
{
    product = this.Load(productId);

    return ErrorCodes.Success;
} 
```

测试用例：

```
[Test]
public void LoadProductTest()
{
    var offerService = new OfferProcessor();
    var privateOfferService = new PrivateObject(offerService);

    IProduct myProduct = null;

    var result = (int)privateOfferService.Invoke("LoadProduct", 
                       new object[] {"AnId", myProduct });

    Assert.That(result, Is.EqualTo(ErrorCodes.Success));
    Assert.That(myProduct, Is.NotNull());
} 
```

上面的测试用例无法编译。如何传递 Invoke 一个 out 参数，然后在调用后访问它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T19:16:18.373

尝试保存传递调用调用的对象数组。

```
object[] args = new object[] { "AnId", myProduct };
var result = (int)privateOfferService.Invoke("LoadProduct", args);
Assert.That(args[1], Is.NotNull()); 
```

[https://stackoverflow.com/a/2438069/1311351](https://stackoverflow.com/a/2438069/1311351)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T19:15:52.843

如果您确实需要测试此方法，则可以将其标记为内部并将该类的[InternalsVisibleTo](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.internalsvisibletoattribute.aspx)属性指定到您的测试命名空间。但是，是的，只需测试公共接口。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-07T19:20:46.143

我相信返回实际对象而不是使用错误代码作为返回值是一种很好的做法。如果有错误，抛出异常。如果您返回实际的业务对象，您将不会遇到此问题。

由于您没有说您的代码无法编译怎么办，我假设您的测试方法无法访问私有方法。如果您这样做，VS 将允许您测试私有方法（右键单击方法并选择 Create Unit Tests...）：

![在此处输入图像描述](../Images/592e5525356981cd024b3405d0712bce.png)

# c# - 重定向时jQuery删除cookie不会删除

> ID：11852485
> 
> 赞同：0
> 
> 时间：2012-08-07T19:08:17.023
> 
> 标签：c#, cookies

我有多个具有相同名称、域和路径但值不同的 cookie。这不是设计使然 - 我正在尝试解决此问题，但无法删除它们。我尝试了多种代码变体。这是一个：

```
string[] cookies = Request.Cookies.AllKeys;
HttpCookie cookie;
string cookieName;
string cookieValue;
for (int i = 0; i < cookies.Count(); i++)
{
  cookieName = Request.Cookies[i].Name;
  if (cookieName == "ASP.NET_SessionId")
  {
    //  Do not delete session cookie or we will be logged out
    continue;
  }

  cookieValue = Request.Cookies[i].Value;
  cookie = new HttpCookie(cookieName);
  cookie.Value = "";
  cookie.Expires = DateTime.Now.AddDays(-1);
  Response.Cookies.Add(cookie);
} 
```

这是另一个：

```
string[] cookies = Request.Cookies.AllKeys;
for (int i = 0; i < Request.Cookies.AllKeys.Count(); i++)
{
    if (Request.Cookies[i].Name == "ASP.NET_SessionId")
    {
        //  Do not delete session cookie or we will be logged out
        continue;
    }

    Request.Cookies[i].Expires = DateTime.Now.AddDays(-1);
} 
```

当我在 Request.Cookies 中列出 cookie 时，“已删除”的 cookie 显示为昨天的到期日期，但还有其他 cookie 的到期日期为 0001 年 1 月 1 日。这些是那些不会接受暗示并徒步旅行的人。

非常感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T17:01:39.593

您是否尝试过将过期日期设置为过去一年而不是 1 天？

这是关于[删除 cookie](http://www.hackification.com/2009/01/25/how-to-delete-a-cookie-in-aspnet/)的帖子。在他的代码中，他将日期追溯到 30 年前。

在 cookie 上设置域。

```
 cookieValue = Request.Cookies[i].Value;
  cookie = new HttpCookie(cookieName);
  cookie.Value = "";
  cookie.Domain = "dev.domain.com";
  cookie.Expires = DateTime.Now.AddDays(-1);
  Response.Cookies.Add(cookie); 
```

# eclipse - 将弹出菜单添加到 Eclipse 问题视图

> ID：11852497
> 
> 赞同：0
> 
> 时间：2012-08-07T19:09:07.243
> 
> 标签：eclipse, eclipse-plugin

我希望在 Eclipse 问题视图中添加一个弹出菜单。我可以添加菜单，但我希望它只在特定条件下出现。例如，当在问题视图中选择某种类型的问题时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T08:30:31.670

假设您正在使用“org.eclipse.ui.menus”扩展点和命令框架，您可以将菜单定义的[visibleWhen](http://wiki.eclipse.org/Menu_Contributions#)部分设置为类似；

```
 <visibleWhen>
    <with variable="selection">
      <iterate>
        <and>
          <instanceof value="com.example.MyClass">
          </instanceof>
        </and>
      </iterate>
    </with>
  </visibleWhen> 
```

只有当所选项目属于正确的实例时，这才应该使选项可见。也可以以类似的方式在命令处理程序上设置启用和活动状态。

# xcode - 设置 Xcode 以使用 SDL？

> ID：11852499
> 
> 赞同：0
> 
> 时间：2012-08-07T19:09:17.483
> 
> 标签：xcode, osx-lion, sdl

所以我知道 C/C++，但我在设置 SDL 以使用 XCode 时遇到了很多麻烦，所以我可以开始制作实际的应用程序。我在网上查看了大量的教程，但它们总是有一两部分没有任何意义。比如很多教程说要下载Mac运行时和开发SDL库，但是Mac没有开发库，只有运行时。所以我希望这里可爱的人可以引导我完成设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T02:27:13.167

以下文章展示了如何解决 Xcode 4 缺少 SDL 项目模板的问题：

[在 Xcode 4 中使用 SDL](http://meandmark.com/blog/2012/01/using-sdl-with-xcode-4/)

# scala - 是否可以声明一个对象并稍后在 Scala 中对其进行初始化

> ID：11852501
> 
> 赞同：2
> 
> 时间：2012-08-07T19:09:27.180
> 
> 标签：scala

刚开始使用 Scala 进行单元测试并遇到了这个基本问题。

```
class Test {
  ClassToBeTested testObject;

  @Before
  void initializeConstructor() {
    testObject = new ClassToBeTested(//Blah parameters);
  }

  @Test
  //Blah
} 
```

上面的 Java 示例表明我可以只声明一个类型的对象`ClassToBeTested`并稍后对其进行初始化。这可以在 Scala 中完成吗？我尝试过这个

```
class Test {
  var testObject = new ClassToBeTested()

  @Before def initializeConstructor() {
    //I do not know how to proceed here!!!!!!
  }

  @Test def testOne() {
    //Some test
  }
} 
```

我不想在里面做所有事情，`testOne()`因为我想在不同的测试中使用这个对象。构造函数的参数是模拟，`JUnit`我知道如果我在全局而不是内部初始化一个对象，模拟不会被初始化`@Before`。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-07T19:21:28.613

这是你如何做到的：

```
class Test {
  var testObject: ClassToBeTested = _

  @Before 
  def initializeConstructor() {
    testObject = new ClassToBeTested()
  }

  @Test 
  def testOne() {
    //Some test
  }
} 
```

[更多](https://stackoverflow.com/questions/8336640/in-scala-what-exactly-does-val-a-a-underscore-mean)关于下划线初始化。

* * *

您还可以在 Scala 编程一书中的第[18.2 节可重新分配的变量和属性中阅读更多相关信息。](http://www.artima.com/pins1ed/stateful-objects.html#18.2)这是报价，可能对您有所帮助：

> 更准确地说，字段的初始值设定项“= _”为该字段分配零值。零值取决于字段的类型。数值类型为 0，布尔类型为 false，引用类型为 null。这就像在 Java 中定义了相同的变量而没有使用初始化程序一样。
> 
> 请注意，您不能简单地省略 Scala 中的“= _”初始值设定项。如果你写过：
> 
> ```
>  var celsius: Float 
> ```
> 
> 这将声明一个抽象变量，而不是未初始化的变量

# javascript - 文本未按正确顺序显示

> ID：11852502
> 
> 赞同：0
> 
> 时间：2012-08-07T19:09:28.927
> 
> 标签：javascript, jquery, html, json

我试图让 JSON 数据显示在一个段落中，但在不同日期获取的数据之间有一个分隔符。

```
function getAllLogs(emId) {
    $.getJSON('datafile.json', function(data) {
        $("#" + emId).html("All logs:<br>");
        var firstDateDisplayed = false;
        $.each(data, function(index, value) {
            //Only displays dates once, then all log sheets for that date
            if (firstDateDisplayed === false ||
                data[index-1].log_sheet.time !== value.log_sheet.time) {

                $("#" + emId).append("<br>----------------<br>");
                //Formats and appends date to a paragraph
                getLogDate(emId, index);
                firstDateDisplayed = true;
            }

            //Formats and appends time to a paragraph
            getLogTime(emId, index);
            //Formats and appends all data to a paragraph
            getLogData(emId, index);
        });
    });
} 
```

我想要的是：

```
All logs:
----------------
Date 1
Time 1
Data 1
Time 2
Data 2
Time 3
Data 3
----------------
Date 2
Time 4
Data 4
Time 5
Data 5 
```

我得到什么：

```
----------------

----------------        
Date 1
Time 1
Data 1
Time 2
Data 2
Time 3
Data 3
Date 2
Time 4
Data 4
Time 5
Data 5 
```

示例 JSON 数据：

```
[
    {
        "log_sheet": {
            "data":"4",
            "date":"2012-07-27T00:00:00-06:00",
            "time":"2000-01-01T02:15:00Z",
            "more_data":"7"
        }
    },
    {    
        "log_sheet": {
            "data":"8,
            "date":"2012-07-27T00:00:00-06:00",
            "time":"2000-01-01T07:30:00Z",
            "more_data":"3"
        }
    }
] 
```

我该如何解决？我的日期显示正确，但为什么没有分隔线？

获取日志时间函数：

```
//Gets, formats and displays the time for the current log sheet in the 
//header of a collapsible menu or paragraph
function getLogTime(emId, logNum) {
    //Accesses the JSON file
$.getJSON('datafile.json', function(data) {
    //Takes only the part of the string that corresponds to time
    var time = data[logNum].log_sheet.measured_at_time.substring(11,16);
    //Formats time to 12 hour clock according to the hour
    switch (time.substring(0, 2))
        {
    case "00":
        //Changes 00 to 12 and adds am
        time = time.replace(/00/, "12") + " am";
        break;
    case "01":
    case "02":
    case "03":
    case "04":
    case "05":
    case "06":
    case "07":
    case "08":
    case "09":
        //Removes extra 0 and adds am
        time = time.replace(/0/, "") + " am";
        break;
    case "10":
    case "11":
        //Adds am
        time += " am";
        break;
    case "12":
        //Adds pm
        time += " pm";
        break;
    case "13":
        //Replaces 13 with 1 and adds pm
        time = time.replace(/13/, "1") + " pm"
    case "14":
        //Replaces 14 with 2 and adds pm
        time = time.replace(/14/, "2") + " pm";
        break;
    case "15":
        //Replaces 15 with 3 and adds pm
        time = time.replace(/15/, "3") + " pm";
        break;
    case "16":
        //Replaces 16 with 4 and adds pm
        time = time.replace(/16/, "4") + " pm";
        break;
    case "17":
        //Replaces 17 with 5 and adds pm
        time = time.replace(/17/, "5") + " pm";
        break;
    case "18":
        //Replaces 18 with 6 and adds pm
        time = time.replace(/18/, "6") + " pm";
        break;
    case "19":
        //Replaces 19 with 7 and adds pm
        time = time.replace(/19/, "7") + " pm";
        break;
    case "20":
        //Replaces 20 with 8 and adds pm
        time = time.replace(/20/, "8") + " pm";
        break;
    case "21":
        //Replaces 21 with 9 and adds pm
        time = time.replace(/21/, "9") + " pm";
        break;
    case "22":
        //Replaces 22 with 10 and adds pm
        time = time.replace(/22/, "10") + " pm";
        break;
    case "23":
        //Replaces 23 with 11 and adds pm
        time = time.replace(/23/, "11") + " pm";
        break;
    }
    //Uses only a portion of the string to accommodate possible future
    //numbers
    if (emId.substring(0,4) === "time") {
        //Sets text in header to time
    $("#" + emId + " .ui-btn-text").html(time);
    } else {
        //For displaying all of the logs
    $("#" + emId).append(time + "<br>");
    }
});
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T19:26:00.823

所以基本上你想做的是在有新的日期出现时输入----？

```
var json = [
{
    "log_sheet": {
        "data":"4",
        "date":"2012-07-27T00:00:00-06:00",
        "time":"2000-01-01T02:15:00Z",
        "more_data":"7"
    }
},
{
    "log_sheet": {
        "data":"4",
        "date":"2012-07-27T00:00:00-06:00",
        "time":"2000-01-01T02:15:00Z",
        "more_data":"7"
    }
},
{
    "log_sheet": {
        "data":"4",
        "date":"2012-07-27T00:00:00-06:00",
        "time":"2000-01-01T02:15:00Z",
        "more_data":"7"
    }
},
{
    "log_sheet": {
        "data":"4",
        "date":"2012-07-27T00:00:00-06:00",
        "time":"2000-01-01T02:17:00Z",
        "more_data":"7"
    }
}
];

console.log("All logs:");
$.each(json, function(index, value) {
  if(index == 0 || (index > 0 && json[index-1].log_sheet.time !== value.log_sheet.time))
  {
   console.log("-----------");
  }
  console.log("Date " + index + ": " + value.log_sheet.date);
  console.log("Time " + index + ": " + value.log_sheet.time);
  console.log("Data " + index + ": " + value.log_sheet.data);
}); 
```

结果：

```
All logs:
-----------
Date 0: 2012-07-27T00:00:00-06:00
Time 0: 2000-01-01T02:15:00Z
Data 0: 4
Date 1: 2012-07-27T00:00:00-06:00
Time 1: 2000-01-01T02:15:00Z
Data 1: 4
Date 2: 2012-07-27T00:00:00-06:00
Time 2: 2000-01-01T02:15:00Z
Data 2: 4
-----------
Date 3: 2012-07-27T00:00:00-06:00
Time 3: 2000-01-01T02:17:00Z
Data 3: 4 
```

所以你重写的函数看起来像这样：

```
function getAllLogs(emId) {
    $.getJSON('datafile.json', function(data) {
        var $output = $("#" + emId);
        $output.html("All logs:<br>");
        $.each(data, function(index, value) {
            //Only displays dates once, then all log sheets for that date
            if(index == 0 || (index > 0 && json[index-1].log_sheet.time !== value.log_sheet.time))
            {
                $output.append("<br>----------------<br>");
                //Formats and appends date to a paragraph
                //getLogDate(emId, index);
                $output.append("Date " + index + ": " + value.log_sheet.time +"<br/>");
            }
            //Formats and appends time to a paragraph
            //getLogTime(emId, index);
            $output.append("Time " + index + ": " + value.log_sheet.time +"<br/>");
            //Formats and appends all data to a paragraph
            //getLogData(emId, index);
            $output.append("Data " + index + ": " + value.log_sheet.data +"<br/>");
        });
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T07:35:42.423

问题是，当您使用 获取更多数据时`$.getJSON()`，您使用的是*异步*AJAX 。这意味着脚本不会停止等待调用完成，而是继续执行。由于从服务器检索数据时存在延迟，但分隔符会立即打印，因此数据总是在分隔符之后打印。

一个简单的解决方法是在主循环中为数据保留容器，这样 AJAX 调用何时完成就无关紧要了。

```
function getAllLogs(emId) {
    $.getJSON('datafile.json', function(data) {

        var $emId = $( '#' + emId );  // cache the main container

        $("#" + emId).html("All logs:<br>");
        var firstDateDisplayed = false;
        $.each(data, function(index, value) {
            //Only displays dates once, then all log sheets for that date
            if (firstDateDisplayed === false ||
                data[index-1].log_sheet.time !== value.log_sheet.time) {

                $emId.append("<br>----------------<br>");

                // create a container for the date and have getLogDate() fill it later
                $emId.append( '<div id="'+emId+'Date'+index+'"></div>' );
                getLogDate(emId+'Date'+index, index);

                firstDateDisplayed = true;
            }

            // do the same to the rest of the functions as we did above for getLogDate()
            $emId.append( '<div id="'+emId+'Time'+index+'"></div>' );
            $emId.append( '<div id="'+emId+'Data'+index+'"></div>' );
            getLogTime(emId+'Time'+index, index);
            getLogData(emId+'Data'+index, index);
        });
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T19:41:12.887

从我可以从您的帖子中收集到的信息来看，您实际上是在按其属性对日志`data`进行分组。如果这是演员表，你可以尝试这样的事情：`time``date`

```
function getAllLogs(elementId)
{
    $.getJSON('datafile.json', function(data)
    {
        var logElement = $('#' + elementId).append('All logs:<br />');

        var lastLogDateDisplayed = null;
        $.each(data, function(index, value)
        {
            // check if we've reached another date
            if (lastLogDateDisplayed != value.log_sheet.date)
            {
                // update the last shown date, and select its html
                lastLogDateDisplayed = value.log_sheet.date;
                logElement.append('----------------<br />');
                    .append(getLogDate(value));
            }

            // select the time and data as html strings
            logElement.append(getLogTime(value))
                .append(getLogData(value));
        });
    });
} 
```

这里有一些值得注意的改进。首先，我们只选择`elementId`元素一次。这提高了我们选择器的性能，从之前的命中率`1 + 4n`下降到`1`. 此外，因此`getLogDate`，`getLogTime`和`getLogData`不接受`value`（即当前日志项），而是返回 dom 或 jQuery 对象以附加到日志元素本身。

这是一些改动，但它更干净，希望能帮助解决您的问题。

# jquery - 带有 jQ uery 的托盘 | 再次单击时关闭托盘

> ID：11852503
> 
> 赞同：0
> 
> 时间：2012-08-07T19:09:33.673
> 
> 标签：jquery, html, css

我有一个带有四个按钮的导航和一个包含 4 个部分的部分。单击导航按钮时，“部分”会滑出，如果选择了另一个，则前一个托盘滑入，单击的托盘滑出。但是我遇到的问题是，当再次选择当前已选择的按钮以使该托盘滑回时。我知道我的代码有点混乱，但是帮助肯定会很棒。

```
$(function hideDrawers() {
            if($('#contentwrapper section').css('left') != '-800px'){
                $('#contentwrapper section').animate({left: "-800px"}, 500);
                }
            Active = null;
            });

        $(function() {
            var $one = $("#content1");
            var $two = $("#content2");
            var $three = $("#content3");
            var $four = $("#content4");

        $("#specials").click(function() {
            $('#contentwrapper section').animate({left: "-800px"}, 500);
            $one.animate({left: "0px"});
          }); 

        $("#lookup").click(function() {
            $('#contentwrapper section').animate({left: "-800px"}, 500);
            $two.animate({left: "0px"});
          });

        $("#recipe").click(function() {
            $('#contentwrapper section').animate({left: "-800px"}, 500);
            $three.animate({left: "0px"});
          });   

         }); 
```

资产净值

```
<nav>
                <span id="logo">
                <img src="img/logo.png" />
                </span>
                <span class="nav">
                    <ul>
                        <a href="#" id="specials" ><span class="wedge"></span><li class="special"><span></span><p>Daily Specials</p></li></a>

                        <a href="#" id="lookup"><span class="wedge"></span><li class="lookup"><span></span><p>Product Lookup</p></li></a>

                        <a href="#" id="recipe"><span class="wedge"></span><li class="recipes"><span></span><p>Recipes</p></li></a>

                        <a href="#" id="pharmacy"><span class="wedge"></span><li class="pharmacy"><span></span><p>Pharmacy</p></li></a>
                    </ul>
                </span>
            </nav> 
```

托盘部分

```
<section id="contentwrapper">
                <!--<img src="img/content-bg.png" />-->
                <section id="content1" class="contentbg">
                    <div id="slides">
                        <div class="slides_container">
                            <a href="#"><img src="img/slides/image1.jpg" width:"570" height="270"></a>
                        </div>
                        <a href="#" class="prev"><img src="img/arrow-prev.png" width="24" height="43" alt="Arrow Prev"></a>
                        <a href="#" class="next"><img src="img/arrow-next.png" width="24" height="43" alt="Arrow Next"></a>
                    </div>
                </section>
                <section id="content2" class="contentbg">
                </section>
                <section id="content3" class="contentbg">
                </section>
                <section id="content4" class="contentbg">
                </section>
            </section> 
```

我知道我目前拥有它，如果一个按钮被选择两次，功能点击的脚本只会重复我尝试搜索这种类型的示例，但我通常会导致幻灯片等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T20:17:39.233

弄清楚了。

```
 $("#specials").click(function() {
            if($one.css('left') != '0px') {
            $('#contentwrapper section').animate({left: "-800px"}, 500);
            $one.animate({left: "0px"});
            }
            else if($one.css('left') != '-800px') {
                $one.animate({left: "-800px"});
            }
          }); 
```

# asp.net-mvc-3 - 我可以添加基于 ViewModel 的视图并且没有新添加的视图的控制器吗？

> ID：11852508
> 
> 赞同：0
> 
> 时间：2012-08-07T19:09:59.060
> 
> 标签：asp.net-mvc-3

我是 MVC3 的新手，我想知道这是否可能和好的做法？

我有一个工作正常的模型+视图+控制器。此视图显示人员列表 - 我希望能够单击一个人的姓名并被重定向到一个新视图，该视图将显示该人员的详细信息。这个新视图只有一个 ViewModel，但没有控制器，因为我打算在操作中传入对象。

Person 对象包含我的视图需要显示的所有属性：@Html.ActionLink(item.Person.FirstName, "PersonDetails", item.Person)

这是可能的/好的做法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T19:13:22.287

我相信您对 MVC 的工作方式有误解。您的 ActionLink 将始终重定向到控制器的相应 ActionMethod。您要做的是在您的控制器中创建一个操作方法，该方法接受必要的参数，然后返回您的 ViewModel 视图。

这是一个非常快速的示例，可以帮助您入门：

```
public class HomeController : Controller
{
    public ActionResult List()
    {
        return View();
    }

    public ActionResult DetailById(int i)
    {
        // load person from data source by id = i

        // build PersonDetailViewModel from data returned 

        return View("PersonDetails", PersonDetailViewModel);
    }

    public ActionResult DetailByVals(string FirstName, Person person)
    {
        // build PersonDetailViewModel manually from data passed in
        // you may have to work through some binding issues here with Person
        return View("PersonDetails", PersonDetailViewModel);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T07:18:56.287

不是一个像你想要的那样做的好方法（在你原来的帖子中）。视图应始终具有视图模型。视图模型仅代表您希望在视图上拥有的数据，不多也不少。不要将您的 domail 模型传递给视图，而是使用视图模型。这个视图模型可能只包含你的域模型的一部分属性。

在您的列表视图中，您可能有一个网格，并且在每一行旁边您可能有一个详细信息链接，或者名称上的链接（如您所拥有的那样）。单击其中任何一个链接时，您将被定向到详细信息视图。此详细信息视图将拥有自己的视图模型，其中仅包含您需要在详细信息视图上显示的属性。

domail 模型可能类似于：

```
public class Person
{
     public int Id { get; set; }

     public string FirstName { get; set; }

     public string LastName { get; set; }

     public int Age { get; set; }

     public string ExampleProperty1 { get; set; }

     public string ExampleProperty2 { get; set; }

     public string ExampleProperty3 { get; set; }
} 
```

假设您只想显示此人的 id、名字、姓氏和年龄，那么您的视图模型将如下所示：

```
public class PersonDetailsViewModel
{
     public int Id { get; set; }

     public string FirstName { get; set; }

     public string LastName { get; set; }

     public int Age { get; set; }
} 
```

您不需要 ExampleProperty1、ExampleProperty2 和 ExampleProperty3，因为它们不是必需的。

您的人员控制器可能如下所示：

```
public class PersonController : Controller
{
     private readonly IPersonRepository personRepository;

     public PersonController(IPersonRepository personRepository)
     {
          // Check that personRepository is not null

          this.personRepository = personRepository;
     }

     public ActionResult Details(int id)
     {
          // Check that id is not 0 or less than 0

          Person person = personRepository.GetById(id);

          // Now that you have your person, do a mapping from domain model to view model
          // I use AutoMapper for all my mappings

          PersonDetailsViewModel viewModel = Mapper.Map<PersonDetailsViewModel>(person);

          return View(viewModel);
     }
} 
```

我希望这能让事情更清楚一点。

# java - 忽略设置边界

> ID：11852510
> 
> 赞同：0
> 
> 时间：2012-08-07T19:10:52.820
> 
> 标签：java, swing, setbounds

我只是想通过 setBounds 方法放置我的 JButton。但是无论这个方法的参数是什么，按钮都在顶部的中间。

这是我的代码：

```
import javax.swing.JButton;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextField;

class Panneau_fenetre1A extends JPanel                      
{ 
    JButton boutonOK = new JButton ("OK");

    public Panneau_fenetre1A(int Na)
    {
        boutonOK.setBounds(300,300,30,30);
        add(boutonOK);

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T19:13:31.593

按钮的位置还取决于您当前使用的布局。这是一个[Vusual 布局指南，](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)可帮助您确定满足您要求的最佳布局。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T19:32:18.863

有了`setLayout(null)`，它的工作原理！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-07T09:53:57.537

您正在扩展 JPanel，因此使用了 JPanel 的默认构造函数，并且无论出于何种原因，默认的[LayoutManager都是 FlowLayout ！](https://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)因此，如果您真的想使用 NullLayout，可以将其添加到您的类中：

```
 public Panneau_fenetre1A()
  {
    super(null);
  } 
```

但认真考虑其他布局管理器，例如 BorderLayoutManager (super(new BorderLayout())) 是一个好的开始。

在设计对话框时，请记住您可以并且应该嵌套布局：一个 JPanel 位于另一个 JPanel 中（例如，GridLayout 位于 BorderLayout 中）。请注意：“好的”对话框应该正确调整大小，这样如果用户调整 Frame 的大小，您希望自动扩展您的信息对象，例如您的表格，而不是显示大面积的 JPanel 背景。这是使用 NullLayout 无法实现的。

# performance - 环回套接字的最大速度

> ID：11852514
> 
> 赞同：4
> 
> 时间：2012-08-07T19:11:02.360
> 
> 标签：performance, kernel, benchmarking, netcat

`pv /dev/zero| nc -l 1234`和`nc localhost 1234 > /dev/null`

给我大约 430 MB/s 的最大吞吐量。**这是为什么？**

`htop`主要显示内核 CPU 活动，所以到目前为止我的怀疑是内核到用户空间的复制。

有没有办法获得比这更高的吞吐量，或者这是否意味着**没有网络程序可以达到 > 500 MB/s 的**吞吐量（至少在这台机器上）？

# javascript - Chrome 扩展程序 - 编辑文本字段

> ID：11852515
> 
> 赞同：5
> 
> 时间：2012-08-07T19:11:16.733
> 
> 标签：javascript, google-chrome-extension

我正在尝试编写我的第一个 Chrome 扩展程序。单击它时，它将自动填写我大学登录页面的 ID 和密码字段（该页面的表单的自动填写功能已禁用）。这是一个非常具体的页面。

我有几个问题。我搜索了 Google 和 SO，但找不到有关如何通过 Chrome 更改文本字段值的解释。我知道如何在 HTML 和 JavaScript 中执行此操作，但是我无法获得正确的输入来修改其文本。

我还尝试使用我找到的一些示例使用 jQuery，但没有运气。我有一个调用 JavaScript 文件的 HTML 页面 (popup.html)。我还尝试将 JS 放在内容脚本中

这是 manifest.json：

```
{
  "name": "My First Extension",
  "version": "1.0",
  "manifest_version": 2,
  "description": "The first extension that I made.",
  "browser_action": {
    "default_icon": "icon.png",
    "default_popup": "popup.html"
  },
  "permissions": [
      "tabs", "http://*/*"
    ],
    "content_scripts": [
      {
        "matches": ["http://*/*"],
        "js": ["jquery-1.7.2.min.js","content.js"]
      }
  ]
} 
```

我对 popup.js（从 popup.html 调用）的尝试之一是：

```
chrome.tabs.getSelected(null, function(tab) {
    console.log(document)
}); 
```

我还尝试将此代码放在 content.js 中。同样的结果，它打印到控制台，但是它打印 popup.html 内容..

我也尝试过直接（以及通过上述方法）直接访问元素，`document.getElementById()`但仍然没有运气..

那么，谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-07T19:17:49.820

您需要使用“web_accessible_resources”属性将 JavaScript 文件注入页面。看这里：

**清单.json**

```
{
  "name": "My First Extension",
  "version": "1.0",
  "manifest_version": 2,
  "description": "The first extension that I made.",
  "browser_action": {
    "default_icon": "icon.png"
  },
  "permissions": [
      "tabs", "http://*/*"
    ],
    "content_scripts": [
      {
        "matches": ["http://*/*"],
        "js": ["jquery-1.7.2.min.js","content.js"],
        "run_at": "document_start"
      }
  ],
  "web_accessible_resources": ["inject.js"]
} 
```

**注入.js**

```
(function () {
    console.log('test');
}()); 
```

**内容.js**

```
(function (chrome) {
    var js = document.createElement('script');
    js.type = 'text/javascript';
    js.src = chrome.extension.getURL('inject.js');
    document.getElementsByTagName('head')[0].appendChild(js);
}(chrome)); 
```

然后只需将要使用的 JavaScript 代码放入 inject.js 即可操作页面。请务必将匹配项更改为仅匹配您大学的登录页面。

出现这种情况的原因是，无论您在哪个网站上，Chrome 扩展程序都可以自行运行和操作。他们可以在您切换页面时继续处理。他们在自己的沙盒环境中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T04:34:32.443

我认为您应该使用在登录页面上执行的简单内容脚本。您甚至不需要任何浏览器操作或弹出窗口。

这是一个清单：

```
{
    "name": "Fill my password",
    "version": "1.0",
    "manifest_version": 2,
    "description": "Fills my password on University login page",
    "content_scripts": [
        {
            "matches": ["http://www.myuniversity.edu/login.html"],
            "js": ["content.js"]
        }
    ]
} 
```

这是一个内容脚本：

```
// define your username and password
var myUsername = '...';
var myPassword = '...';

// find the fiends in your login form
var loginField = document.getElementById('...');
var passwordField = document.getElementById('...');

// fill in your username and password
loginField.value = myUsername;
passwordField.value = myPassword;

// if you want, you can even automaticaly submit the login form
var loginForm = document.getElementById('...');
loginForm.submit(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T19:26:14.787

可能的解决方法（chrome 扩展）：[Autocomplete = on](https://chrome.google.com/webstore/detail/ecpgkdflcnofdbbkiggklcfmgbnbabhh)，但它不适用于某些表单。

# php - Zend Framework 不删除表条目

> ID：11852518
> 
> 赞同：0
> 
> 时间：2012-08-07T19:11:38.723
> 
> 标签：php, zend-framework

我正在尝试从我的表中删除一个帖子，但代码正在删除所有表数据，而不仅仅是一个帖子。

删除.php

```
<?php
class Form_Delete extends Zend_Form
{
    public function __construct()
    {
        @parent::__construct($options);
        $this->setName('Delete');
        $id = new Zend_Form_Element_Hidden('id');
        $title = new Zend_Form_Element_Hidden('Title');
        $description = new Zend_Form_Element_Hidden('Description');
        $submit = new Zend_Form_Element_Submit('Delete');
        $submit->setAttrib('id', 'submitbutton');
        $cancel = new Zend_Form_Element_Submit('cancel');
        $cancel->setAttrib('id', 'cancelbutton');
        $this->addElements( array( $id, $title, $description, $submit, $cancel ));
    }
} 
```

和我的控制器代码

```
public function deleteAction()
    {
        //action body
        $request = $this->getRequest();
        $postid = (int)$request->getParam('id');
        $post = new Model_DbTable_Posts();
        $result = $post->getPost($postid);
        $this->view->post = $result;
        if(!Zend_Auth::getInstance()->hasIdentity()) {
            $this->_redirect('posts/view/id/'.$postid);
        }

        $identity = Zend_Auth::getInstance()->getIdentity();

        $acl = new Model_Acl();
        if( $acl->isAllowed( $identity['Role'] ,'posts','edit','delete') ) {
            $deleteForm = new Form_Delete();
            $deleteModel = new Model_DbTable_Posts();
            if ($this->getRequest()->isPost()) {
                if ($deleteForm->isValid($request->getPost())) {
                    $deleteModel->delete($dpostid);                 
                    $this->_redirect('index/index');
                }
            }
            $this->view->deleteForm = $deleteForm;
        } 
```

我已经尝试了几个小时来让它工作，但可以让它全部删除或全部删除。任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T19:16:57.070

您需要通过`delete()`where 子句进行评估。尝试：

```
$where = $deleteModel->getAdapter()->quoteInto('id = ?', $dpostid);
$deleteModel->delete($where); 
```

将“id”更改为您的主键。

在`@parent::__construct($options);`您的表单类中也有点奇怪。将其更改为`parent::__construct();`. 如果您不生成错误，则无需抑制错误。

# php - 按周排列数组

> ID：11852524
> 
> 赞同：2
> 
> 时间：2012-08-07T19:11:55.603
> 
> 标签：php, arrays, date

我有一个数组，其中有一个名为 date 的字段，我需要将所有这些数组分成几周。有可能这样做吗？这是我的代码：

```
function getWeeks($query){
    $postdate = $query['response']['posts']['date'];

    return $posts;
} 
```

这是我的数组的一部分：

```
Array ( [date] => 07/30/12 [message] => test [post_id] => 1 [impressions] => Array ( [0] => 9638 ) [consumptions] => Array ( [0] => 38 ) [storytellers] => Array ( [0] => 6 ) [engaged_users] => Array ( [0] => 31 ) [story_adds] => Array ( [0] => 6 ) [impressions_unique] => Array ( [0] => 4700 ) [comment] => Array ( [0] => 1 ) [like] => Array ( [0] => 5 ) [share] => Array ( [0] => 0 ) [virality] => Array ( [0] => 0 ) [lifetime] => Array ( [0] => 0 ) [affinity] => Array ( [0] => 0 ) )

Array ( [date] => 07/30/12 [message] => test2 [post_id] => 2 [impressions] => Array ( [0] => 10552 ) [consumptions] => Array ( [0] => 47 ) [storytellers] => Array ( [0] => 5 ) [engaged_users] => Array ( [0] => 44 ) [story_adds] => Array ( [0] => 5 ) [impressions_unique] => Array ( [0] => 4982 ) [comment] => Array ( [0] => 0 ) [like] => Array ( [0] => 4 ) [share] => Array ( [0] => 1 ) [virality] => Array ( [0] => 0 ) [lifetime] => Array ( [0] => 0 ) [affinity] => Array ( [0] => 0 ) ) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T19:33:58.410

如果它们在同一周，这将遍历您的每个帖子并将它们组合在一起。

[查看示例](http://ideone.com/63t9z)

```
<?php

$posts = array(
  array('date' => '7/30/10', 'title' => 'july post'),
  array('date' => '7/19/10', 'title' => 'another post in july'),
  array('date' => '7/22/10', 'title' => 'sup, this will be with another post')
);

$grouped_posts = array();

foreach( $posts as $post ) {
  // @see http://us2.php.net/manual/en/function.date.php
  $week = date('W', strtotime($post['date']));

  // create new empty array if it hasn't been created yet
  if( !isset($grouped_posts[$week]) ) {
    $grouped_posts[$week] = array();
  }

  // append the post to the array
  $grouped_posts[$week][] = $post;
}

print_r($grouped_posts); 
```

# android - 一个线程添加和另一个读取的队列是否需要 volatile 标记？

> ID：11852525
> 
> 赞同：0
> 
> 时间：2012-08-07T19:12:04.800
> 
> 标签：android, tcp, queue, volatile

为了回应[这个线程](https://stackoverflow.com/questions/11847092/android-tcp-does-not-flush-until-socket-is-closed#comment15763190_11847092)中的一些评论，我想知道是否制作一个队列，将一个线程添加到它并且另一个线程从它读取需要'volatile'标记？

我想大多数情况都可以，但是在大小为 1 的队列中读写的情况下，没有它会导致问题吗？

目标：

*   一个线程安全队列，我可以在其中发布要通过 TCP 套接字连接发送的消息。输出流将由另一个类管理，该类将在每个循环开始时检查队列是否为空

我的想法/想法：

*   也许有一个我在研究中没有发现的 TCP 套接字的内置队列？
*   在这种情况下使用 volatile 好用，还是应该使用阻塞或锁定调用？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T19:15:57.560

如果您想要像您提到的那样同步访问，请使用锁定对象。

[在这种情况下并没有真正使用 Volatile](http://www.javamex.com/tutorials/synchronization_volatile_when.shtml)。将您的对象声明`List myList`为 volatile 意味着如果您曾经尝试实例化一个新 Object 并将其设置为 myList 变量，那么线程将保证知道（大致）分配了一个新对象。它不会阻止或同步与实际对象有关的任何事情。

基本上，就像您说的那样，您需要确保在读取或写入列表时，不会弄乱列表并导致意外错误。要阻止两件事同时发生，请使用锁定对象和 Java synchronized 关键字~~，或者使用已经为您同步读/写的 List 类型。~~

# xna - 移动精灵以匹配 xna 中圆圈的边框

> ID：11852526
> 
> 赞同：0
> 
> 时间：2012-08-07T19:12:18.507
> 
> 标签：xna, xna-4.0

我正在尝试在 xna 中构建一个游戏，我有一个圆圈，我希望玩家在它周围移动，如下图所示，它工作得很好，除了我不满意的绘图部分图片链接[http://s12.postimage.org/poiip0gtp/circle.png](http://s12.postimage.org/poiip0gtp/circle.png)

我想将玩家对象居中到圆圈的边缘，这样玩家就不会看起来像站在空中

这就是我计算玩家位置的方式

```
rad = (degree * Math.PI / 180);
            rotationDegree = (float)((Math.PI * degree) / 180);
            currentPosition.X = (float)(Math.Cos(rad) * Earth.radius + (GraphicsDevice.Viewport.Width / 2));
            currentPosition.Y = (float)(Math.Sin(rad) * Earth.radius + (GraphicsDevice.Viewport.Height / 2)); 
```

这就是我画玩家的方式

```
spriteBatch.Draw(texture,currentPosition, null, Color.White,rotationDegree, Vector2.Zero,1f,SpriteEffects.None, 1f); 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T19:31:02.480

使用 spritebatch 的源重载。这是根据位置绘制精灵的位置。

```
Spritebatch.Draw(texture,Position, null,Color.White,0f,new Vector2(texture.Width / 2,texture.Height /2),1f,SpriteEffects.None, 0); 
```

使用`texture.Width / 2,texture.Height /2`原点将其居中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T19:23:44.537

看起来你想要在这里做的是调整精灵的`origin`，这是你传递给 的向量`SpriteBatch.Draw()`。这用于确定精灵的“中心点”；`{0, 0}`代表精灵的左上角，而`{spriteWidth, spriteHeight}`代表右下角。您的精灵将相对于该原点进行定位和旋转。

# java - 在Android中设置固定字体

> ID：11852533
> 
> 赞同：0
> 
> 时间：2012-08-07T19:12:43.287
> 
> 标签：java, android, fonts, android-canvas

我有一个从 1 计数到 100 的应用程序，在屏幕上显示计数。我有一个自定义字体。问题是数字在计数时不断左右跳跃。我使用 graphics.Paint 在画布上绘制数字。

如何将字体设置为固定而不是跳跃？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T20:20:22.850

使用您的自定义字体设置字体，如下所示：

```
private void setLogoTypeface()
{
    AssetManager assetManager = getContext().getAssets();       
    Typeface tf = Typeface.createFromAsset(assetManager,"GILB.TTF");        
    logo = (TextView)findViewById(R.id.logo);
    logo.setTypeface(tf);
} 
```

替换您的字体名称，textview 应该呈现字体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T19:22:52.447

您要么必须使用固定宽度的字体，要么将单个数字放在具有固定宽度的自定义布局中。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >
    <TextView
        android:id="@+id/digit1"
        android:layout_width="0dp"
        android:layout_weight="0.5"
        android:gravity="center_horizontal|center_vertical" />

    <TextView
        android:id="@+id/digit2"
        android:layout_width="0dp"
        android:layout_weight="0.5"
        android:gravity="center_horizontal|center_vertical" />
</LinearLayout> 
```

# java - 在 Multimap 中检索特定值

> ID：11852535
> 
> 赞同：2
> 
> 时间：2012-08-07T19:12:48.990
> 
> 标签：java, guava

我正在使用每个键有两个值的 Multimap。下面是我用来分别获取每个值的代码：

代码的第一位获取第一个对象值：

```
for(Object object : map.get(object))
{
    return object
} 
```

然后，我使用另一种方法来检索另一个值。此方法将第一个对象作为参数：

```
for(Object object : team.get(object))
{
    if(object != initialObject)
    {
        return object;
    }
} 
```

这似乎是一种“骇人听闻”的做事方式，那么我有什么方法可以更轻松地获取这些值吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-07T20:13:49.460

如果您使用的是 Guava，`Iterables#get`可能就是您想要的 - 它从任何可迭代对象中返回第 N 个项目，例如：

```
Multimap<String, String> myMultimap = ArrayListMultimap.create();

// and to return value from position:
return Iterables.get(myMultimap.get(key), position); 
```

如果您使用的是 a`ListMultimap`那么它的行为非常类似于 List 的映射，因此您可以直接调用`get(n)`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T19:17:23.503

```
Collection<Object> values = map.get(key);
checkState(values.size() == 2, String.format("Found %d values for key %s", values.size(), key));

return values.iterator().next(); // to get the first

Iterator<Object> it = values.iterator();
it.next(); // move the pointer to the second object
return it.next(); // get the second object 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-27T07:57:45.587

要获取同一键的所有值，最简单的方法是：

```
 Iterator iterator = multimap.get(key).iterator();
    System.out.println("first element: " + iterator.next());
    System.out.println("second element: " + iterator.next());
    System.out.println("third element: " + iterator.next()); 
```

等等

**如果您想在不知道有多少元素的情况下获取所有元素，则**另一种选择****

 **```
 Iterator iterator = multimap.get(key).iterator();
   int index=1;
   while (iterator.hasNext()) {
    System.out.println(index +" element: " + iterator.next()); 
     index++;
        } 
```**

# air - 如何强制 Air app 基于 html 以管理员权限打开？

> ID：11852541
> 
> 赞同：0
> 
> 时间：2012-08-07T19:13:22.507
> 
> 标签：air

我需要始终在 mac、windows e ubuntu 中以管理员权限打开应用程序。有没有办法在 XML 描述文件中指定它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T14:26:38.760

我需要这个权限才能写入数据库。我发现指向在用户系统文件夹中创建的临时目录是正确的，而不是指向安装文件夹。

# c# - 使用 XmlTextReader 将某些元素内的某些值从外部 .xml 文件打印到命令行时遇到困难

> ID：11852546
> 
> 赞同：0
> 
> 时间：2012-08-07T19:13:38.323
> 
> 标签：c#, .net, xml, xmltextreader

我正在尝试存储和打印`<name></name>`至少第一个`<item></item>`元素的标签之间的值，但我无法“找到”或“获取”的值`<name></name>`。

（*请更清楚地解释您的情况......*）

我计划获取提取的`name`值并将其转换（全部小写并为单词之间的空格添加下划线），以便我可以使用它在“images”文件夹中搜索图像文件名。

如果找到匹配项 - 获取图像文件的文件路径，将其存储在变量中，然后`<image></image>`在当前`<item></item>`元素中创建并粘贴标签之间的文件路径。对另外 999 个项目重复此操作。如果某些项目`name`与任何图像文件名不匹配 - 然后创建一个日志文本文件并存储未匹配的项目的名称。

**XML结构**：

```
<items>
 <item>
  <name>Name1</name>
  <price>Price1</price>
  <description>Description1</description>
 </item>
 <item>
  <name>Name2</name>
  <price>Price2</price>
  <description>Description2</description>
 </item>
</items> 
```

**代码**：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Xml;

    namespace myXmlParser
    {
        class Program
        {
            static void Main(string[] args)
            {
                XmlTextReader reader = new XmlTextReader("C:\\items_data.xml");
                while (reader.Read())
                {
                    switch (reader.NodeType)
                    {
                        case XmlNodeType.Element: // The node is an element.
                            reader.MoveToElement();
                            Console.WriteLine(reader.Name);
                            break;
                        //case XmlNodeType.Text: //Display the text in each element.
                        //    Console.WriteLine(reader.Value);
                        //    break;
                        //case XmlNodeType.EndElement: //Display the end of the element.
                        //    Console.Write("</" + reader.Name);
                        //    Console.WriteLine(">");
                        //    break;
                    }

                }
                Console.ReadKey();

            }// main
        }// class
    }// namespace 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T19:18:31.450

Linq2Xml 更容易使用

```
XDocument xDoc = XDocument.Load("C:\\items_data.xml");
var names = xDoc.Descendants("name")
    .Select(x => x.Value)
    .ToArray(); 
```

-

```
 xDoc.Descendants("name")
    .Where(x => x.Value == "Name1")
    .First()
    .Parent.Add(new XElement("image", "path of the image")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T19:18:24.103

`reader.ReadContentAsString`什么时候试试 `reader.Name == "name"`。
由于您计划稍后编辑 XML，您不妨使用 XmlDocument，并应用您之前建议的 XPath。

# prolog - 误解追加列表序言

> ID：11852548
> 
> 赞同：1
> 
> 时间：2012-08-07T19:13:46.520
> 
> 标签：prolog

最近我开始研究 Prolog ，一旦我处理了它，我就有理解它的问题。

我正在研究列表，但我无法理解`append/3`应该合并两个列表的谓词如何工作。

```
book_append([], L, L). 
book_append([X|L1], L2, [X|L3]) :-
    book_append(L1, L2, L3). 
```

确切地说，我不明白如何`L2`附加到主列表。我试着解释一下我到目前为止所理解的：

只有当第一个列表为空并且第二个和第三个将采用相同的值时，边界条件才会统一。这是对的吗？

第一个问题，也许这很愚蠢，当第一个列表为空时，两个列表必须统一，以便它们取相同的值。但它们应该是不同的，所以我会失去它们的价值之一。

在第二行中，第一个列表的头部被附加到第三个列表中并调用相同的函数。

我通常以这种方式使用此功能：`book_append([1, 2, 3], [a, b, c], X).`

第一行是假的，因为`L1`它不是空的。
而第二个应该是：

```
book_append([1|[2, 3], [a, b, c], [1|L3]) :-
    book_append([2, 3], [a, b, c], L3). 
```

`L3`在第一次通话期间（我已经知道它是第三个列表的尾部）的价值是多少？是空的吗？还是一个未实例化的变量？或者它被实例化为`L2`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T08:41:15.607

Prolog 的逻辑变量（logvars）本质上是命名指针，它只能被实例化/ *“设置”*（赋值）***一次***。每个 logvar 都可以处于“尚未设置”状态，或处于实例化/设置状态。

在没有发生回溯的情况下，永远无法更改绑定***（***在回溯时，可以*撤消*这种“指针设置” ，并且日志变量可以恢复到以前的未实例化状态，以后可能会再次实例化为其他一些值）。

当“设置”时，它可以指向一个原子值，如数字（`5`）、*符号*（`'a'`）等。或者它可以指向另一个 logvar（意思是，两者变得*等价*）。

或者它可以指向一个复合（类似*struct*或*命名为 record*的）值，就像`f(a,B,c)`其子实体本身可以完全实例化（*“ground”*）值一样，或者它们可以是/包含尚未实例化的 logvar 本身.

现在， Prolog 中的*列表*以复合词的形式出现在（一个点）的名称（即*functor*）下。`'.'`列表`[A|B]`实际上是`'.'(A,B)`具有两个子实体的复合术语，即“*参数”*和。`A``B`

因此，当我们“设置”时`A = [1|B]`，我们将`A`“指向”计算机内存中的实际真正结构，用名称 ( *functor* )标记`'.'`，并带有两个字段。第一个字段包含一个数字`1`，第二个字段是一个名为 的 logvar `B`，尚未实例化为任何内容。或者在 C++ 术语中，它是一个未初始化的指针。

并且*该*指针是（*通过**引用***）传递给嵌套递归调用的内容`book_append`。正是*那个*指针被设置在那里。这就是“指向”的“列表节点”的第二个字段`A`现在指向的内容。

所以递归调用不需要将任何东西“返回”给 Prolog 中的“调用者”。它们只是实例化在它们之上设置的结构的一部分，越来越充分地*“充实”这些结构。*

但是如果我们在列表的顶部节点上有一个句柄，我们就可以访问它的所有子实体，因为它们已经完全实例化了。

所有这些冗长的文本在 C++ 术语中意味着，它`append/3`通过沿着它的第一个列表进行操作，同时将列表节点复制到一边，当它到达第一个列表的末尾时，它设置最后复制的列表节点的*下一个*指针- 指向调用它的第二个列表的开头。这意味着它是[*尾递归模 cons*](http://en.wikipedia.org/wiki/Tail_call#Tail_recursion_modulo_cons)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T07:45:04.013

首先，请参阅[@Will Ness](https://stackoverflow.com/users/849891/will-ness)的这个[答案](https://stackoverflow.com/questions/11539203/how-do-i-append-lists-in-prolog/11551001#11551001)和[这个答案](https://stackoverflow.com/questions/10620011/explanation-of-a-prolog-algorithm/10620282#10620282)（我的）。它应该已经回答了你的问题。

然后让我们（快速）解决您的具体问题：

> 第一个问题，也许这很愚蠢，当第一个列表为空时，两个列表必须统一，以便它们取相同的值。但它们应该是不同的，所以我会失去它们的价值之一。

您必须考虑 Prolog 中的值如何变化。

基本上价值观通过统一而改变。并且只改变一次。这意味着它`A`可以成为`[5|B]`然后将完成改变，并且将适用于您的所有程序。`B`最终可能会改变，因此`A`也会以某种方式改变，但绑定只发生一次，如前所述。

所以在这里，你不能“失去”价值，因为你不能重新绑定任何东西。统一将尽最大努力匹配`List2`并将`Result`自由变量绑定到正确的事物。这样，如果`Result`在您的示例中是一个自由变量，那么它将被绑定到`List2`. 如果两个变量都已经绑定，统一可以做的唯一事情就是测试它们是否绑定到相同的值。

对于您的第二个问题，请特别查看我的答案，该答案将详细说明绑定以获得更清晰的想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T04:29:53.777

第一行仅适用于第一个列表为空且第二个和第三个列表相同（或者一个是变量等，然后可以采用另一个的值）的情况。所以你不会丢失信息。

为了理解第二行，请记住（您演示使用它的方式）第三个参数是结果（同样，这只是一种可能的用法）。因此，当以这种方式使用时，第二行表示它将返回 [X|L3]，并且正文中提到了 L3（我实际上不知道正确的术语）——在哪里？作为新 book_append 调用的结果。所以 L3 将是第一个列表没有头的结果附加到第二个列表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-12T13:56:28.787

数据库：

```
book_append([], L, L).
book_append([X|L1], L2, [X|L3]) :- book_append(L1, L2, L3). 
```

调用时：

```
?- book_append([1, 2, 3], [a, b, c], A). 
```

编译器将查看数据库以找到统一。因为第一行不能统一*（[1, 2, 3]不能和[]统一）*所以使用第二行，会变成：book_append([1|[2, 3], [a, b, c], [1|L3]) :- book_append([2, 3], [a, b, c], L3)。只有当“:-”右边的条件也有一个统一时，统一才会发生。因此它将再次查看数据库以找到 book_append([2, 3], [a, b, c], L3) 等的统一。

统一应该如下所示（= 是统一的符号）：

```
book_append([1, 2, 3], [a, b, c], A) = 
    book_append([1|[2,3]], [a,b,c], [1|L3]) =
    book_append([2|[3]],   [a,b,c], [2|L3]) =
    book_append([3|[],     [a,b,c], [3|L3]] =
    book_append([],        [a,b,c], [a,b,c])  % book_append([], L, L).
=> A = 1|2|3|[a,b,c] 
```

如果我错了，请纠正我，我刚开始为一个项目学习这个。

# throttling - 为什么亚马逊的产品广告 API 返回“来自黑名单的请求...被限制。”？

> ID：11852549
> 
> 赞同：1
> 
> 时间：2012-08-07T19:13:47.870
> 
> 标签：throttling, amazon-product-api

我有一个来自[亚马逊产品广告 API（以前称为 ECS）](https://affiliate-program.amazon.com/gp/advertising/api/detail/main.html)的注册密钥。我查询 API 以获取有关我的移动应用程序的产品列表的信息。它工作得很好。今天我注意到API返回

> “来自黑名单的请求……被限制”。

我完全在 API 调用限制之内。此消息的原因可能是什么？有没有人经历过这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T16:34:05.817

我仍然不知道亚马逊 API 将我列入黑名单的依据是什么。但我已经找到了解决方案。制作一个新的密钥对。

# python - 在大学网络中保留 Google Drive 会话数据

> ID：11852554
> 
> 赞同：2
> 
> 时间：2012-08-07T19:14:38.693
> 
> 标签：python, windows, oauth, enterprise, google-drive-api

这似乎是一个问题，我已经看到多人遇到问题并且尚未有效解决。如何在企业级别维护 Google Drive？

我在我的大学担任学生程序员，他们刚刚切换到 Google Apps for Education，并希望使用 Google Drive 允许学生在任何地方访问校园计算机数据。

我们的校园系统称为 Labnet，它使用 iSCSI 和逻辑卷管理器启动 Windows 7 的新副本。每次学生启动一个机器时，它都会散发出完全相同的新鲜 PC 气味。正因为如此，谷歌驱动器添加到注册表的 oAuth 密钥在重新启动时被吹走，驱动器文件夹和应用程序数据文件夹也是如此，所有这些都像在 C 驱动器上一样。

我们为初次使用的用户构建了一个包装器，用于在校园内设置 Drive，它将默认安装位置重定向到网络驱动器，并将包含 sync_config.db 和 snapshot.db 文件的应用程序数据文件夹复制到网络备份，并将驱动器密钥导出到网络驱动器。登录时，我们有一个脚本检查备份，将它们全部还原到 C:\users\admin\appdata\local\drive，然后将 oAuth 令牌导入注册表。

从理论上讲，它工作正常。在实践中，它是如此。该设置在一个实验室中运行良好，所有机器都运行完全相同的硬件并启动相同的映像文件。当我们尝试将密钥和 appdata 导入运行略有不同硬件和软件的实验室时，我们得到`Error -2146893813 CryptUnprotectData, 'Key not valid for use in specified state'.`or `invalid data`.

我不认为 oAuth 无论如何都与机器的硬件或软件相关联，但看起来确实如此。

有没有人知道一种以允许用户访问数据而无需在登录时不断设置驱动器的方式持久保存这些数据的方法？

我将在此处附上完整的代码。它不仅仅是标准的代码块，所以这里有一个链接。

`GoogleDriveLabnetConfig.py`是将默认驱动器位置更改为 H: 驱动器的自定义包装器。 [https://www.dropbox.com/s/fb27936jmm87w0l/GoogleDriveLabnetConfig.py](https://www.dropbox.com/s/fb27936jmm87w0l/GoogleDriveLabnetConfig.py)

`MUNGoogleDriveDaemon.py`是一个包装器，它在 C: 和 H: 之间来回复制用户的 Appdata，并实际启动 Google Drive。我们不允许用户独立于该守护程序启动 Google Drive，因为不会备份快照。

[https://www.dropbox.com/s/z32t3bjluwl0wf5/MUNGoogleDriveDaemon.py](https://www.dropbox.com/s/z32t3bjluwl0wf5/MUNGoogleDriveDaemon.py)

如果有人可以帮助解决这个问题，请随时在您自己的设置中重用代码。

编辑：可以在启动时检查每台计算机的硬件和软件并导入为特定硬件/软件配对生成的密钥，但这将导致用户每次更改实验室时都必须租​​用凭据，如果我们再次在旧实验室中更改图像。不是一个非常优雅的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T06:07:20.103

长镜头，但尝试检查机器上的系统时间。Oauth 要求所有客户端和服务器都具有同步时间。

# jquery - 移动到数天、数月或数周时，通过 AJAX 和 JSON 更新事件

> ID：11852555
> 
> 赞同：0
> 
> 时间：2012-08-07T19:14:39.090
> 
> 标签：jquery, fullcalendar

我最近开始使用完整日历，必须说这很神奇，但我有一些疑问并且在文档中不清楚。我有一个从我的数据库中获取一些事件的方法，这个方法返回一个 JSON 格式良好的字符串。我希望使用该方法来构建日历事件，但有一个特殊性：如果我在月视图中，那么有事件的日子将被涂成蓝色，当我点击有事件的一天时，我应该转到这一天视图，然后那里显示了当天的所有事件。

我怎样才能做到这一点？提前欢呼和感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T21:55:20.257

看一看：

[http://jsfiddle.net/V1tOr/cJPkP/1/](http://jsfiddle.net/V1tOr/cJPkP/1/)

跳转到日视图：

```
dayClick: function (date, allDay, jsEvent, view) {

    calendar.fullCalendar('changeView', 'agendaDay')
            .fullCalendar('gotoDate', date);

}, 
```

绘画有点棘手......我编辑了源代码（l：2292，l：2318）

```
beforeEventRender: function (view) {

    //clears day bgs
    $(".blue").removeClass("blue");

},
eventRender: function (event, element, view) {

     //warning!!! performance issue!!

    var _start = event.start;

    $('#calendar td[data-date="' + (_start.getFullYear() + '' + _start.getMonth() + '' + _start.getDate()) + '"]').addClass('blue');

} 
```

希望能帮助到你。

# php - 发送 JSON 数据

> ID：11852556
> 
> 赞同：0
> 
> 时间：2012-08-07T19:14:40.260
> 
> 标签：php, json, codeigniter, encryption

我想生成加密数据并`http://localhost:8888/A/B`以`http://localhost:8888/C/D`json 格式发送。

最好的方法是什么？用户将只使用`http://localhost:8888/A/B`，因此当请求进入时，`http://localhost:8888/A/B`将生成哈希密钥并将其发送到`http://localhost:8888/C/D`数据库查询将发生的位置，然后才能解密数据并检查用户是否是有效用户。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T19:26:39.223

用于**`cURL`**在任何地方发送任何数据。对于任何情况，它都非常灵活和可配置。您可以使用其中一个`POST`或`GET`方法来发送数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T21:31:45.990

你引用了两个不同的东西.. hashing != encrytping。散列是一种方式，而加密是两种方向。使用对 codeigniter 控制器的 ajax 调用。

# git - gitignore - 只允许某些扩展名和文件

> ID：11852558
> 
> 赞同：30
> 
> 时间：2012-08-07T19:14:45.657
> 
> 标签：git, gitignore

不知道为什么这不起作用，因为我已经完成了这个负载！也许我今天过得不好...

我正在使用以下代码忽略除某些文件名和扩展名之外的所有文件

```
*
!.gitattributes
!.gitignore
!readme.md
!.gitkeep
!*.php 
```

出于某种原因，它只允许我提交 .gitignore 和 readme.md，即使我在子文件夹等中有 php 文件。它有什么问题吗？仅供参考，我正在使用“git add -A”来获取要提交的文件。

提前致谢！

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-08-07T19:52:47.353

解决方案是告诉 Git**不要忽略子目录**：

```
*
!.gitattributes
!.gitignore
!readme.md
!.gitkeep
!*.php
!*/ 
```

否则，只会`*.php`接受第一级目录中的文件，而忽略所有子目录。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-04-16T15:24:47.863

> 实现这一目标的最复杂的方法

在存储库中创建**`.gitignore`**文件**`root`**，并将以下行添加到**`.gitignore`**文件中

```
*.*
!.gitattributes
!.gitignore
!readme.md
!.gitkeep
!*.php 
```

这将递归地包括目录和子目录中的所有指定文件。

测试

> git 版本 2.12.2.windows.2

# html - CSS：自动填充单元格表和构建良好布局的方法？

> ID：11852563
> 
> 赞同：0
> 
> 时间：2012-08-07T19:15:02.863
> 
> 标签：html, css, resize, fill

大家好，提前感谢您的帮助。

我对 CSS 很陌生，我希望有一个好的输入来开始构建和学习最快的方式。我自己已经在做一些 CSS 测试了。就问题而言。

这是相对的css代码（我把它放在pastebin上，因为它有点长） [CSS CODE](http://pastebin.com/sUdUzKjL)

正如您在代码中看到的，图像中显示的 2 个表格有背景，我必须手动设置它们的大小

```
width:100px;
height:120px; 
```

在 td.menuleft 和 td.menucenter 类中。

**1°问题**

如何自动调整单元格大小？

例如我想说：

使表格标签宽度为页面宽度的 100%，然后让我为单元格表格创建类，这些表格宽度是表格宽度的某个百分比。

例子

[我的作品的照片，以及我想如何让它像](http://img62.imageshack.us/img62/8549/04b107766cc847e1bafae30.png)

这样就很容易将表格组成标签以自动填充页面。我已经看到了一些关于定位（相对，绝对）的东西，但我没有设法让它发挥作用。

**2°问题**

一般来说，用 css 构建网页的最佳方法是什么？可以像我说的那样做一个 div，里面有表格并将每个元素以表格的方式放置？

或者你能给我任何指导步骤来指导如何做一个特定的模板吗？

多谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T19:26:42.023

当你想学习如何做出好的和有效的设计，也被搜索引擎认为是有价值的，那么不要使用表格进行布局。表格用于显示表格数据，而不是布局。改用 div 并开始阅读有关位置、显示、浮动的信息。

这就是你想走的路

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T19:33:08.703

如果您将 tds 设置为某个百分比宽度，它们将是父项的百分比。所以：

```
table {
    width: 100px;
}

tr {
    width: 100% /* Will be 100px */
}

td.quarter {
    width: 25%; /* Will be 25px */
}

td.half {
    width: 50%; /* Will be 50px */
} 
```

我同意之前的海报，不要使用表格进行布局。并不是说你在这里这样做。但对于布局坚持 div 等。

# php - MySQL INSERT 命令正在将输入转换为不同的格式/值

> ID：11852565
> 
> 赞同：1
> 
> 时间：2012-08-07T19:15:12.007
> 
> 标签：php, javascript, mysql, html, arrays

我有一个 HTML 输入表单，它作为 PHP_SELF 发送，然后存储在 MySQL 表中。输入字段由 JS 动态控制。有 4 个输入：数字（文本）、金额（整数）、批准（文本）和日期（文本）。当它们通过 POST 发送到 PHP 文件时，所有输入都是数组。它们存储在 MySQL 表中，列字段为：ID（主键）、num（文本（4））、amnt（十进制（8,2））、app（文本（10））和日期（varchar（ 10))。当我尝试运行该页面时，我遇到了三个重大错误。

1.  如果在表单的数字字段中输入了诸如 0125 之类的数字，它将在 MySQL 表中存储为 125。这与该字段被存储为文本字符串的事实无关。

2.  当只输入整数时，审批字段工作得很好，但是，当只插入文本或文本和数字的组合时，MySQL 查询会产生以下错误：错误：“字段列表”中的未知列“aft859”。比如输入853234，一切正常，但是输入aft859，就报错了。

3.  输入日期后，它将作为十进制值输入到 MySQL 表中。例如，日期 08/07/2012 保存为“0.00056802”。

我检查了每一行以确保在 PHP 或 HTML 进程中没有任何内容被转换，并且我已经回显了每一行以确保正确处理这些值。经过多次调试，我相信以下两个部分可能会导致我的问题：

```
//Check To See If User Has Already Created Table
$sql = "CREATE TABLE IF NOT EXISTS $tablename_cc (
ID int NOT NULL AUTO_INCREMENT,
PRIMARY KEY(ID),
cc_num TEXT(4),
cc_amnt DECIMAL(8,2),
cc_app TEXT(10),
cc_date VARCHAR(10)
);"; 
```

或者可能是这样的：

```
if (!mysql_query('INSERT INTO ' .$tablename_cc. '(cc_num, cc_amnt, cc_app, cc_date) VALUES '.implode(',',$pairs)))
    die('Error: ' . mysql_error());
    else
        echo '<strong>', "Your information have been submitted and will be added to your account upon approval.", '</strong>', "</br>", "</br>", "</br>"; 
```

我对 PHP、HTML 或 MySQL 不太熟悉（这是我的第一个程序），我不确定我是否遗漏了什么。我试图检查所有报价并确保它们是正确的。我在 Wordpress 中运行所有这些，以防万一这是罪魁祸首。这是我的完整代码供参考：

```
<?php

if(isset($_POST['submit']))
{
//Get Current User Login
global $current_user;
$current_user = wp_get_current_user();
$ulog = $current_user->user_login;
$tablename_cc = "cc_".$ulog;

//Check To See If User Has Already Created Table
$sql = "CREATE TABLE IF NOT EXISTS $tablename_cc (
ID int NOT NULL AUTO_INCREMENT,
PRIMARY KEY(ID),
cc_num TEXT(4),
cc_amnt DECIMAL(8,2),
cc_app TEXT(10),
cc_date VARCHAR(10)
);";

mysql_query($sql);

$cc_num = $_POST['cc_num'];
$cc_amnt = $_POST['cc_amnt'];
$cc_app = $_POST['cc_app'];
$cc_date = $_POST['cc_date'];

$items = array_map(null,$cc_num,$cc_amnt,$cc_app,$cc_date);
$pairs = array();

foreach ($items as $sub) {
    if(implode(',', $sub) != ",,,")
    $pairs[] = '('.implode(',', $sub).')';
}

echo implode(',',$pairs);

if (!mysql_query('INSERT INTO ' .$tablename_cc. '(cc_num, cc_amnt, cc_app, cc_date) VALUES '.implode(',',$pairs)))
    die('Error: ' . mysql_error());
    else
        echo '<strong>', "Your information has been submitted and will be added to your account upon approval.", '</strong>', "</br>", "</br>", "</br>";

}
?>

<!--raw-->
<html>

<head>
<title></title>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js"></script>
<script src="jquery.maskedinput.js" type="text/javascript"></script>

<script type="text/javascript">
    $(document).ready(function() {
        $('#btnAdd').click(function() {
            var num     = $('.ccinput').length; // how many "duplicatable" input fields we currently have
            var newNum  = new Number(num + 1);      // the numeric ID of the new input field being added

            // create the new element via clone(), and manipulate it's ID using newNum value
            var newElem = $('#input' + num).clone().attr('id', 'input' + newNum);

            // insert the new element after the last "duplicatable" input field
            $('#input' + num).after(newElem);

            // enable the "remove" button
            $('#btnDel').attr('disabled','');

            $("*#date").mask("99/99/9999");

            // business rule: you can only add 20 names
            if (newNum == 20)
                $('#btnAdd').attr('disabled','disabled');
        });

        $('#btnDel').click(function() {
            var num = $('.ccinput').length; // how many "duplicatable" input fields we currently have
            $('#input' + num).remove();     // remove the last element

            // enable the "add" button
            $('#btnAdd').attr('disabled','');

            // if only one element remains, disable the "remove" button
            if (num-1 == 1)
                $('#btnDel').attr('disabled','disabled');
        });

        $("*#date").mask("99/99/9999");
    });
</script>
</head>

<body>

Please fill in your information in the form below and press submit. If you need to add more, please click the "Add" button at the bottom of the form. You may enter a maximum of 20 at a time. Leave all unused fields blank.

<form method="post" action="<?php echo htmlentities($PHP_SELF); ?>">
<fieldset>
<legend>Information:</legend>
<div id="input1" class="ccinput">
    # (last 4 digits): <input id="cnum" type="text" name="cc_num[]" maxlength="4" size="4" /> CC Amount: <input id="camnt" type="int" name="cc_amnt[]" /> Approval Code: <input id="appr" type="text" name="cc_app[]" maxlength="10" size="10" /> Date: <input id="date" type="text" name="cc_date[]" /> </br>
</div>
<div id="input2" class="ccinput">
    # (last 4 digits): <input id="cnum" type="text" name="cc_num[]" maxlength="4" size="4" /> CC Amount: <input id="camnt" type="int" name="cc_amnt[]" /> Approval Code: <input id="appr" type="text" name="cc_app[]" maxlength="10" size="10" /> Date: <input id="date" type="text" name="cc_date[]" /> </br>
</div>
<div id="input3" class="ccinput">
    # (last 4 digits): <input id="cnum" type="text" name="cc_num[]" maxlength="4" size="4" /> CC Amount: <input id="camnt" type="int" name="cc_amnt[]" /> Approval Code: <input id="appr" type="text" name="cc_app[]" maxlength="10" size="10" /> Date: <input id="date" type="text" name="cc_date[]" /> </br>
</div>
<div id="input4" class="ccinput">
    # (last 4 digits): <input id="cnum" type="text" name="cc_num[]" maxlength="4" size="4" /> CC Amount: <input id="camnt" type="int" name="cc_amnt[]" /> Approval Code: <input id="appr" type="text" name="cc_app[]" maxlength="10" size="10" /> Date: <input id="date" type="text" name="cc_date[]" /> </br>
</div>
<div id="input5" class="ccinput">
    # (last 4 digits): <input id="cnum" type="text" name="cc_num[]" maxlength="4" size="4" /> CC Amount: <input id="camnt" type="int" name="cc_amnt[]" /> Approval Code: <input id="appr" type="text" name="cc_app[]" maxlength="10" size="10" /> Date: <input id="date" type="text" name="cc_date[]" /> </br>
</div>
<div>
    <input type="button" id="btnAdd" value="Add" />
    <input type="button" id="btnDel" value="Remove" />
</div>
</fieldset>
<input type="submit" value="Submit" name="submit" />
</form>

</body>
</html>
<!--/raw--> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T19:21:21.820

您的文本值被截断（丢失前导零）的原因是因为您将它们作为数字插入并且 MySQL 正在删除前导零，并且日期变成小数是因为您将它们作为方程式插入并且 MySQL 正在评估它们.

原因是这一行：

```
$pairs[] = '('.implode(',', $sub).')'; 
```

没有任何值被引号包围。您可以使用以下方法解决此问题：

```
$pairs = '("'.implode('","', $sub).'")'; 
```

然后，您`implode()`再次使用该行已经内爆的列表：

```
if (!mysql_query('INSERT INTO ' .$tablename_cc. '(cc_num, cc_amnt, cc_app, cc_date) VALUES '.implode(',',$pairs))) 
```

将此行更新为：

```
if (!mysql_query('INSERT INTO ' .$tablename_cc. '(cc_num, cc_amnt, cc_app, cc_date) VALUES ' .$pairs . )) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T19:20:49.430

```
if (!mysql_query('INSERT INTO ' .$tablename_cc. '(cc_num, cc_amnt, cc_app, cc_date) VALUES '.implode(',',$pairs))) 
```

您需要将输入值包含在撇号中；否则，它们将被视为数字 - 这就是您收到`Unknown column`错误并且日期被视为总和而不是日期的原因。

```
if (!mysql_query("INSERT INTO " .$tablename_cc. " (cc_num, cc_amnt, cc_app, cc_date) VALUES '".implode("','",$pairs) . "'")) 
```

我认为那会做到的。

# javascript - JavaScript：for 语句中的变量赋值 | 在前面或里面

> ID：11852566
> 
> 赞同：0
> 
> 时间：2012-08-07T19:15:17.200
> 
> 标签：javascript

我已经在 for 语句中或之前看到了这两个变量声明。哪个更好？这是一个示例片段。

```
MC.initAll = function() {
    var iterate = [MC, Su], 
        l = iterate.length, 
        i, 
        key;
    for( i = 0; i < l; i++ ) {
        for( key in iterate[i]) {
            if( iterate[i].hasOwnProperty(key) && iterate[i][key].hasOwnProperty("init") ) {
                iterate[i][key].init();
            }
        }
    }
} 
```

**将函数放在 for 语句之外的优点：**

*   由于使用相同的 var 语句，代码更少
*   已经吊起来了，js就不用了
*   内部工作更加明确
*   将通过 jshint.com

**放入 for 语句的优点**

*   简单的目视检查以验证声明发生在函数中

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T19:17:10.557

这是个人风格。哪个“更好”纯粹是见仁见智。无论`var`语句出现在何处，javascript 解释器都会将所有变量定义提升到变量块的开头。

我个人喜欢将我的 var 放在`for`循环中，这样就不会意外忘记并使用隐式全局变量，但这只是个人风格选择。我知道其他人喜欢在函数开始时显式声明的所有变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T19:39:07.730

我在 for 循环中声明我的变量之前

```
var i, j; 
for (i = 0, j = x.length; i < j; i = i+1){
     the loop ... 
} 
```

这样我只在我的代码中声明我的计数器 1 次并随意重置它。如果我需要保留计数器值，我声明另一个值，我将我的计数器值

# gcc - MAC OS X 10.8 上的 gcc 4.8 抛出“架构 x86_64 的未定义符号：”

> ID：11852568
> 
> 赞同：48
> 
> 时间：2012-08-07T19:15:20.263
> 
> 标签：gcc

所有，我在我的mac os x 10.8中编写了这样的代码，当我使用“gcc use_new.cpp -o use_new”来编译它时，它会抛出这样的错误消息：

```
Undefined symbols for architecture x86_64:
  "std::basic_ostream<char, std::char_traits<char> >::operator<<(std::basic_ostream<char, std::char_traits<char> >& (*)(std::basic_ostream<char, std::char_traits<char> >&))", referenced from:
      _main in ccr2vrRQ.o
  "std::basic_ostream<char, std::char_traits<char> >::operator<<(void const*)", referenced from:
      _main in ccr2vrRQ.o
  "std::basic_ostream<char, std::char_traits<char> >::operator<<(double)", referenced from:
      _main in ccr2vrRQ.o
  "std::basic_ostream<char, std::char_traits<char> >::operator<<(int)", referenced from:
      _main in ccr2vrRQ.o
  "std::basic_ostream<char, std::char_traits<char> >::operator<<(unsigned long)", referenced from:
      _main in ccr2vrRQ.o
  "std::ios_base::Init::Init()", referenced from:
      __static_initialization_and_destruction_0(int, int) in ccr2vrRQ.o
  "std::ios_base::Init::~Init()", referenced from:
      __static_initialization_and_destruction_0(int, int) in ccr2vrRQ.o
  "std::cout", referenced from:
      _main in ccr2vrRQ.o
  "std::basic_ostream<char, std::char_traits<char> >& std::endl<char, std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&)", referenced from:
      _main in ccr2vrRQ.o
  "std::basic_ostream<char, std::char_traits<char> >& std::operator<< <std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*)", referenced from:
      _main in ccr2vrRQ.o
  "operator delete(void*)", referenced from:
      _main in ccr2vrRQ.o
  "operator new(unsigned long)", referenced from:
      _main in ccr2vrRQ.o
ld: symbol(s) not found for architecture x86_64
collect2: error: ld returned 1 exit status 
```

当我使用“g++ use_new.cpp -o use_new”时，谁可以帮助我！？谢谢你！

```
#include <iostream>      
    struct fish              
    {
        float weight;
        int id;
        int kind;              
    };
    int main()               
    {
      using namespace std;   
      int* pt = new int;     
      *pt = 1001;            
      cout<<"int: "<<*pt<<"in location: "<<pt<<endl;
      double* pd = new double;
      *pd = 100000001.0;     
      cout<<"double: "<<*pd<<"in location: "<<pd<<endl;
      cout<<"int point pt is length "<<sizeof(*pt)<<endl;
      cout<<"double point pd is length "<<sizeof(*pd)<<endl;
      delete pt;             
      delete pd;             
      cout<<(int *)"How are you!"<<endl;
      return 0;
  } 
```

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2012-08-15T19:28:13.850

即使是旧的 4.2 GCC 也是如此（我在设置非官方 iOS 工具链时遇到过这种情况）。`gcc`默认假定为 C，并调用链接器而不链接到 C++ 标准库；相反，`g++`默认情况下假定 C++ 和 C++ 标准库的链接。

总而言之 - 可能的解决方案：

```
gcc myprog.c -o myprog -lstdc++ 
```

或者

```
g++ myprog.c -o myprog 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-08-15T19:13:16.560

The answer to this stackoverflow question has the answer

[gcc and g++ linker](https://stackoverflow.com/questions/5228154/gcc-and-g-linker)

Use

```
gcc -lstdc++ use_new.cpp -o use_new 
```

The `-lstdc++` flag tells the linker to include the C++ Standard Library

[http://en.wikipedia.org/wiki/C%2B%2B_Standard_Library](http://en.wikipedia.org/wiki/C%2B%2B_Standard_Library)

I'm running Mac OS X 10.7.4 and the library is located here

```
/usr/lib/libstdc++.dylib 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-03-04T10:20:28.600

这与@user1582840 粘贴的代码无关，只是我的 2 美分，并且在处理我自己的一些代码时，由于 g++ 中相同问题的不同原因：

由于不同的原因，在 OS X 10.8/Darwin11 上使用 g++ 4.2.1 时，我收到“ld: symbol(s) not found for architecture x86_64”错误。希望这将有助于一些搜索谷歌的问题。

我收到此错误是因为我定义了一个类，在类定义中我声明了成员函数。但是，当我定义成员函数时，我忘记了包含类修饰符。

因此，对于我正在谈论的示例（代码示例，而不是完整程序）：

```
class NewClass
{
    NewClass(); // default constructor
}; 
```

然后，在定义 NewClass() 构造函数（或任何成员函数）时，我只需要：

```
// don't do this, it will throw that error!!
NewClass()
{
    // do whatever
} 
```

而不是：

```
// proper way
NewClass::NewClass()
{
    // do whatever
} 
```

这是一个相当简单的错误，幸运的是，我设法在很短的时间内抓住了它，但有人很容易错过（尤其是我们新手），关于 gcc/g++ 链接器、XCode 等的解决方案是对此没有任何帮助：P

再次，希望它有所帮助！

# deployment - JBoss 未检测到应用程序部署

> ID：11852569
> 
> 赞同：2
> 
> 时间：2012-08-07T19:15:22.357
> 
> 标签：deployment, jboss, struts2, restart

我在 jboss 4.2.3 上部署了一个 java webapp，它曾经使用 Struts 2.0 库。我最近将它升级到 Struts 2.3.4 并更新了所有代码以使用新版本。

在我的本地工作站上，我开始收到错误，这些错误涉及我删除的依赖于旧版本 Struts 的代码。当我清除位于以下位置的 JBoss 预编译 JSP 文件夹的内容时，这些错误消失了：

```
jboss\server\<name_of_my_instance>\work\jboss.web\localhost\_\org\apache\jsp 
```

今天，我将新版本部署到我们的生产网络服务器。我清除了 JSP 预编译目录（如上所列）的内容并重新启动了网络服务器。

每当用户访问我修改以删除 Struts 2.0 标记（并用 Struts 2.3.4 替换它们）的页面时，他们都会收到关于 Struts 无法找到 Struts 2.0 文件的服务器错误。我无法在我的本地实例上重现这些错误。

有没有人对我的本地和生产网络服务器之间的配置不同有任何想法？如何强制生产服务器读取我部署的新 webapp？

注意 - 我使用的是展开部署（不是 WAR），有问题的页面使用包含文件。这是一个例子：

**myInclude.inc**

```
<s:if test="%{userIsAdmin}">
    <%-- Show some toolbar --%>
</s:if> 
```

**我的文件.jsp**

```
<%@ include file="myInclude.inc"%> 
```

访问 myFile.jsp 会产生堆栈跟踪，因为 JBoss 似乎没有检测到 myInclude.inc 文件已更改。旧版本的 myInclude.inc 依赖于旧的 Struts 2.0，而新版本不依赖。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T21:55:27.850

我真的想通了。我的部署过程被破坏了，包含文件实际上并没有发送到网络服务器。

# javascript - 覆盖 WooCommerce 前端 Javascript

> ID：11852570
> 
> 赞同：27
> 
> 时间：2012-08-07T19:15:24.193
> 
> 标签：javascript, wordpress, overriding, woocommerce

有人可以指导我什么是覆盖 WooCommerce 核心 Javascript 文件，特别是前端文件的正确方法。我还没有找到任何关于此的文档并查看代码，前端脚本文件的路径在插件中是硬编码的，所以我怀疑在我的主题中放置一个资产文件夹会做任何事情。

什么是最干净的方法，以便我可以加载位于我的主题目录中的文件？

谢谢

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-11-27T02:33:43.250

除了 add-to-cart.js，我遇到了同样的问题。简单的解决方案是将 woocommerce 脚本出队并入队您的替代品。就我而言，我将以下内容添加到我的 functions.php 中：

```
wp_dequeue_script('wc-add-to-cart');
wp_enqueue_script( 'wc-add-to-cart', get_bloginfo( 'stylesheet_directory' ). '/js/add-to-cart-multi.js' , array( 'jquery' ), false, true ); 
```

您可能希望将“wc-add-to-cart-variation”脚本出队。我认为您*不必*以相同的名称入队，但我看不出有理由不这样做。

希望这可以帮助。

如果您使用的是 WordPress 4.0.1 版和 WooCommerce 2.2.10 版。您可以使用以下脚本：

```
 wp_deregister_script('wc-add-to-cart');
wp_register_script('wc-add-to-cart', get_bloginfo( 'stylesheet_directory' ). '/js/add-to-cart-multi.js' , array( 'jquery' ), WC_VERSION, TRUE);
wp_enqueue_script('wc-add-to-cart'); 

```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2014-03-25T23:39:26.860

WooCommerce 在`class-wc-frontend-scripts.php`文件中加载前端脚本和样式，可以找到脚本是如何注册、排队、本地化和依赖的。

在 Wordpress 中将脚本排入队列的首选位置是`wp_enqueue_scripts`操作挂钩，因为那是在 Wordpress 完全加载之后但在进行任何输出之前的时刻。而且我喜欢将我所有的相关脚本和样式排入一段代码中。

当您想完全删除某些脚本时，调用其中一个`wp_deregister_script()`或`wp_dequeue_script()`就足够了。但有时如果想要进行一些更改并保留现有的依赖项、变量和本地化，则会出现问题，因为插件是在主题之前加载的。所以入队函数不会像你期望的那样工作。Simple`wp_dequeue_script() => wp_enqueue_script()`将[不起作用](https://developer.wordpress.org/reference/functions/wp_enqueue_script/#notes)，`wp_deregister_script() => wp_register_script`() 将起作用，但本地化数据将丢失。

* * *

这可以通过直接使用`$wp_scripts`全局对象来解决，该对象包含并管理通过以下方式加载`wp_enqueue_script()`或注册的所有脚本`wp_register_script()`：

```
 add_action( 'wp_enqueue_scripts', 'load_theme_scripts' );

    function load_theme_scripts() {
        global $wp_scripts; 
        $wp_scripts->registered[ 'wc-add-to-cart' ]->src = get_template_directory_uri() . '/woocommerce/js/wc-add-to-cart.js';
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-20T04:43:24.267

将此部分添加到您的 function.php

```
function themeslug_enqueue_script() {
wp_enqueue_script( 'add-to-cart-variation', get_bloginfo( 'url' ). '/wp-content/plugins/woocommerce/assets/js/frontend/add-to-cart-variation.js', false );
}
add_action( 'wp_enqueue_scripts', 'themeslug_enqueue_script' ); 
```

# java - 具有命名空间问题的 Java XML

> ID：11852571
> 
> 赞同：1
> 
> 时间：2012-08-07T19:15:27.733
> 
> 标签：java, xml

我有这个代码：

```
org.w3c.dom.Document doc = docBuilder.parse(representation.getStream());
                Element element = doc.getDocumentElement();
                NodeList nodeList = element.getElementsByTagName("xnat:MRSession.scan.file");
                for (int i = 0; i < nodeList.getLength(); i++) {
                    Node node = nodeList.item(i);
                    if (node.getNodeType() == Node.ELEMENT_NODE) {
                        // do something with the current element 
```

我的问题是`getElementsByTagName("xnat:MRSession.scan.file")`

我的 xml 看起来像这样：

```
<?xml version="1.0" encoding="UTF-8"?><xnat:MRSession "REMOVED DATA IGNORE">
<xnat:sharing>
<xnat:share label="23_MR1" project="BOGUS_GSU">
<!--hidden_fields[xnat_experimentData_share_id="1",sharing_share_xnat_experimentDa_id="xnat_E00001"]-->
</xnat:share>
</xnat:sharing>
<xnat:fields>
<xnat:field name="studyComments">
<!--hidden_fields[xnat_experimentData_field_id="1",fields_field_xnat_experimentDat_id="xnat_E00001"]-->S</xnat:field>
</xnat:fields>
<xnat:subject_ID>xnat_S00002</xnat:subject_ID>
<xnat:scanner manufacturer="GE MEDICAL SYSTEMS" model="GENESIS_SIGNA"/>
<xnat:prearchivePath>/home/ryan/xnat_data/prearchive/BOGUS_OUA/20120717_131900137/23_MR1</xnat:prearchivePath>
<xnat:scans>
<xnat:scan ID="1" UID="1.2.840.113654.2.45.2.108830" type="SAG LOCALIZER" xsi:type="xnat:mrScanData">
<!--hidden_fields[xnat_imageScanData_id="1"]-->
<xnat:image_session_ID>xnat_E00001</xnat:image_session_ID>
<xnat:quality>usable</xnat:quality>
<xnat:series_description>SAG LOCALIZER</xnat:series_description>
<xnat:scanner manufacturer="GE MEDICAL SYSTEMS" model="GENESIS_SIGNA"/>
<xnat:frames>29</xnat:frames>
<xnat:file URI="/home/ryan/xnat_data/archive/BOGUS_OUA/arc001/23_MR1/SCANS/1/DICOM/scan_1_catalog.xml" content="RAW" file_count="29" file_size="3968052" format="DICOM" label="DICOM" xsi:type="xnat:resourceCatalog"> 
```

所以基本上我需要能够遍历所有 xnat:MRSession/xnat:scan/xnat:file 元素并进行一些更改。问题是

```
getElementsByTagName("xnat:MRSession.scan.file") 
```

始终为空。请帮忙。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-09T14:53:07.833

您可以使用 XPath 尝试以下操作：

```
Document document = // the parsed document
XPathFactory xPathFactory = XPathFactory.newInstance();
NodeList allFileNodes = xPathFactory.newXPath().evaluate("\\XNAT_NAMESPACE:file", document.getDocumentElement(), XPathConstants.NODESET); 
```

取而代之的是 XNAT_NAMESPACE，您需要指定示例中带有前缀“xnat”的确切名称空间。

# javascript - 带有 iframe 的 jquery 对话框

> ID：11852572
> 
> 赞同：1
> 
> 时间：2012-08-07T19:15:31.787
> 
> 标签：javascript, jquery-ui, jquery, iframe

我正在尝试使用 jquery ui 对话框来输出 iframe。它似乎对我不起作用。我想我在某处犯了语法错误——可能在 iframe 中有引号。任何帮助将非常感激。

```
<a href='' onclick=\"open_course_article('$userid','$title', 'remove', '$sel_course');\">Remove from Course</a>

   function open_course_article(userid,article,option,course) {
        $('<iframe src="article_course.php?option="+option+"&userid="+userid+"&course="+course+"&article="+escape(article)"/>').dialog({
        title: 'Add Article',
        width: 600,
        height: 400,
        modal: true,
        }).width(570).height(370);
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T19:21:09.973

您将单引号和双引号混合在一起来括起来*string*，这在编程中不起作用。

```
$('<iframe src="article_course.php?option="+option+"&userid="+userid+"&course="+course+"&article="+escape(article)"
 />') 
```

应该更像：

```
$('<iframe src="article_course.php?option='+option+'&userid='+userid+'&course='+course+'&article='+escape(article)+'"
 />') 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-07T19:22:04.363

您指定的 jquery 选择器是错误的。我相信您的 html 中某处有一个标签。以这种方式选择 iframe

```
 $('iframe').dialog{ ...} 
```

或者，如果您的 html 中有其他 iframe，那么您将必须提供一些独特的属性......在这种情况下，让我们说 id：

```
 $('iframe #idvalue').dialog{ ...} 
```

请出示您的 html 文件，以便我们更好地提供帮助

# c++ - 我的粒子群优化代码在 C++ 和 MATLAB 中生成不同的答案

> ID：11852577
> 
> 赞同：6
> 
> 时间：2012-08-07T19:15:48.387
> 
> 标签：c++, matlab, porting, mathematical-optimization, particle-swarm

我用 C++ 编写了一个全局版本的粒子群优化算法。我尝试将其编写为与我之前编写的 MATLAB PSO 代码完全相同，但是此代码会生成不同且最糟糕的答案。MATLAB代码是：

```
clear all;

numofdims = 30;
numofparticles = 50;
c1 = 2;
c2 = 2;
numofiterations = 1000;
V = zeros(50, 30);
initialpop = V;
Vmin = zeros(30, 1);
Vmax = Vmin;
Xmax = ones(30, 1) * 100;
Xmin = -Xmax;
pbestfits = zeros(50, 1);
worsts = zeros(50, 1);
bests = zeros(50, 1);
meanfits = zeros(50, 1);
pbests = zeros(50, 30);

initialpop = Xmin + (Xmax - Xmin) .* rand(numofparticles, numofdims);

X = initialpop;
fitnesses = testfunc1(X);
[minfit, minfitidx] = min(fitnesses);
gbestfit = minfit;
gbest = X(minfitidx, :);

for i = 1:numofdims
    Vmax(i) = 0.2 * (Xmax(i) - Xmin(i));
    Vmin(i) = -Vmax(i);
end

for t = 1:1000
    w = 0.9 - 0.7 * (t / numofiterations);

    for i = 1:numofparticles
        if(fitnesses(i) < pbestfits(i))
            pbestfits(i) = fitnesses(i);
            pbests(i, :) =  X(i, :);
        end
    end
    for i = 1:numofparticles
        for j = 1:numofdims
            V(i, j) = min(max((w * V(i, j) + rand * c1 * (pbests(i, j) - X(i, j))...
                + rand * c2 * (gbest(j) - X(i, j))), Vmin(j)), Vmax(j));
            X(i, j) = min(max((X(i, j) + V(i, j)), Xmin(j)), Xmax(j));
        end
    end

    fitnesses = testfunc1(X);
    [minfit, minfitidx] = min(fitnesses);
    if(minfit < gbestfit)
        gbestfit = minfit;
        gbest = X(minfitidx, :);
    end

    worsts(t) = max(fitnesses);
    bests(t) = gbestfit;
    meanfits(t) = mean(fitnesses);
end 
```

其中，testfunc1 为：

```
function [out] = testfunc1(R)
    out = sum(R .^ 2, 2);
end 
```

C++ 代码是：

```
#include <cstring>
#include <iostream>
#include <cmath>
#include <algorithm>
#include <ctime>

#define rand_01 ((float)rand() / (float)RAND_MAX)

const int numofdims = 30;
const int numofparticles = 50;

using namespace std;

void fitnessfunc(float X[numofparticles][numofdims], float fitnesses[numofparticles])
{
    memset(fitnesses, 0, sizeof (float) * numofparticles);
    for(int i = 0; i < numofparticles; i++)
    {
        for(int j = 0; j < numofdims; j++)
        {
            fitnesses[i] += (pow(X[i][j], 2));
        }
    }
}

float mean(float inputval[], int vallength)
{
    int addvalue = 0;
    for(int i = 0; i < vallength; i++)
    {
        addvalue += inputval[i];
    }
    return (float)(addvalue / vallength);
}

void PSO(int numofiterations, float c1, float c2,
              float Xmin[numofdims], float Xmax[numofdims], float initialpop[numofparticles][numofdims],
              float worsts[], float meanfits[], float bests[], float *gbestfit, float gbest[numofdims])
{
    float V[numofparticles][numofdims] = {0};
    float X[numofparticles][numofdims];
    float Vmax[numofdims];
    float Vmin[numofdims];
    float pbests[numofparticles][numofdims];
    float pbestfits[numofparticles];
    float fitnesses[numofparticles];
    float w;
    float minfit;
    int   minfitidx;

    memcpy(X, initialpop, sizeof(float) * numofparticles * numofdims);
    fitnessfunc(X, fitnesses);
    minfit = *min_element(fitnesses, fitnesses + numofparticles);
    minfitidx = min_element(fitnesses, fitnesses + numofparticles) - fitnesses;
    *gbestfit = minfit;
    memcpy(gbest, X[minfitidx], sizeof(float) * numofdims);

    for(int i = 0; i < numofdims; i++)
    {
        Vmax[i] = 0.2 * (Xmax[i] - Xmin[i]);
        Vmin[i] = -Vmax[i];
    }

    for(int t = 0; t < 1000; t++)
    {
        w = 0.9 - 0.7 * (float) (t / numofiterations);

        for(int i = 0; i < numofparticles; i++)
        {
            if(fitnesses[i] < pbestfits[i])
            {
                pbestfits[i] = fitnesses[i];
                memcpy(pbests[i], X[i], sizeof(float) * numofdims);
            }
        }
        for(int i = 0; i < numofparticles; i++)
        {
            for(int j = 0; j < numofdims; j++)
            {
                V[i][j] = min(max((w * V[i][j] + rand_01 * c1 * (pbests[i][j] - X[i][j])
                                   + rand_01 * c2 * (gbest[j] - X[i][j])), Vmin[j]), Vmax[j]);
                X[i][j] = min(max((X[i][j] + V[i][j]), Xmin[j]), Xmax[j]);
            }
        }

        fitnessfunc(X, fitnesses);
        minfit = *min_element(fitnesses, fitnesses + numofparticles);
        minfitidx = min_element(fitnesses, fitnesses + numofparticles) - fitnesses;
        if(minfit < *gbestfit)
        {
            *gbestfit = minfit;
            memcpy(gbest, X[minfitidx], sizeof(float) * numofdims);
        }

        worsts[t] = *max_element(fitnesses, fitnesses + numofparticles);
        bests[t] = *gbestfit;
        meanfits[t] = mean(fitnesses, numofparticles);
    }

}

int main()
{
    time_t t;
    srand((unsigned) time(&t));

    float xmin[30], xmax[30];
    float initpop[50][30];
    float worsts[1000], bests[1000];
    float meanfits[1000];
    float gbestfit;
    float gbest[30];
    for(int i = 0; i < 30; i++)
    {
        xmax[i] = 100;
        xmin[i] = -100;
    }
    for(int i = 0; i < 50; i++)
        for(int j = 0; j < 30; j++)
        {
            initpop[i][j] = rand() % (100 + 100 + 1) - 100;
        }

    PSO(1000, 2, 2, xmin, xmax, initpop, worsts, meanfits, bests, &gbestfit, gbest);

    cout<<"fitness: "<<gbestfit<<endl;
    return 0;
} 
```

我已经多次调试了两个代码，但找不到导致答案不同的差异。它让我发疯！你能帮帮我吗？

## 更新：

请注意，函数**均值**仅用于报告一些信息，不用于优化过程。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-07T20:21:43.573

您在以下行中有整数除法， `w = 0.9 - 0.7 * (float) (t / numofiterations);` 每次迭代 w 将为 0.2，将其更改为 `w = 0.9 - 0.7 * t / numofiterations;`

第一次乘法将自动将 t 提升为双倍，然后除法应将 numof 迭代提升为双倍。

括号意味着它将首先完成，因此不会被提升，因为除法中涉及两个整数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T19:24:05.353

这可能是函数错误`mean`：

```
return (float)(addvalue / vallength); 
```

这是整数除法，因此结果被截断，*然后*转换为浮点数。这不太可能是您想要的。

# python - 生成器函数中的 itertools.takewhile - 为什么它只评估一次？

> ID：11852579
> 
> 赞同：10
> 
> 时间：2012-08-07T19:15:51.443
> 
> 标签：python, generator, itertools

我有一个这样的文本文件：

```
11
2
3
4

11

111 
```

使用 Python 2.7，我想将其转换为行列表列表，其中换行符划分内部列表中的项目，空行划分外部列表中的项目。像这样：

```
[["11","2","3","4"],["11"],["111"]] 
```

为此，我编写了一个生成器函数，一旦传递一个打开的文件对象，它就会一次生成一个内部列表：

```
def readParag(fileObj):
    currentParag = []
    for line in fileObj:
        stripped = line.rstrip()
    if len(stripped) > 0: currentParag.append(stripped)
    elif len(currentParag) > 0:
        yield currentParag
        currentParag = [] 
```

这很好用，我可以从列表理解中调用它，产生所需的结果。然而，后来我突然想到，我也许可以更简洁地使用相同的东西`itertools.takewhile`（为了将生成器函数重写为生成器表达式，但我们现在将保留它）。这是我尝试过的：

```
from itertools import takewhile    
def readParag(fileObj):
    yield [ln.rstrip() for ln in takewhile(lambda line: line != "\n", fileObj)] 
```

在这种情况下，生成的生成器只产生一个结果（预期的第一个结果，即`["11","2","3","4"]`）。我曾希望再次调用它的`next`方法会导致它再次评估`takewhile(lambda line: line != "\n", fileObj)`文件的其余部分，从而导致它产生另一个列表。但是没有：我得到了一个`StopIteration`。所以我推测`take while`表达式只被评估一次，在创建生成器对象时，而不是每次我调用生成的生成器对象的`next`方法。

这个假设让我想知道如果我再次调用生成器函数会发生什么。结果是它创建了一个新的生成器对象，该对象也产生了一个结果（预期的第二个结果，即 ie `["11"]`），然后向我抛出了一个`StopIteration`回击。所以事实上，把它写成一个生成器函数可以有效地给出相同的结果，就好像我把它写成一个普通函数并`return`ed 列表而不是`yield`ing 它一样。

我想我可以通过创建自己的类而不是生成器来解决这个问题（如 John Millikin 对[这个问题](https://stackoverflow.com/questions/1376438/how-to-make-a-repeating-generator-in-python)的回答）。但关键是我希望写出比我原来的生成器函数（甚至可能是生成器表达式）*更简洁的东西。*有人可以告诉我我做错了什么，以及如何做对吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-07T19:24:56.743

您正在尝试做的是一份完美的工作[`groupby`](http://docs.python.org/library/itertools.html#itertools.groupby)：

```
from itertools import groupby

def read_parag(filename):
    with open(filename) as f:
        for k,g in groupby((line.strip() for line in f), bool):
            if k:
                yield list(g) 
```

这将给出：

```
>>> list(read_parag('myfile.txt')
[['11', '2', '3', '4'], ['11'], ['111']] 
```

或者在一行中：

```
[list(g) for k,g in groupby((line.strip() for line in open('myfile.txt')), bool) if k] 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-07T19:35:57.387

其他答案很好地解释了这里发生的事情，您需要`takewhile`多次调用当前生成器不执行的操作。[`iter()`](http://docs.python.org/library/functions.html#iter)这是使用带有 sentinel 参数的内置函数获得所需行为的一种相当简洁的方法：

```
from itertools import takewhile

def readParag(fileObj):
    cond = lambda line: line != "\n"
    return iter(lambda: [ln.rstrip() for ln in takewhile(cond, fileObj)], []) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-07T19:21:22.153

这正是`.takewhile()`应该如何表现。当条件为真时，它会从底层迭代返回元素，一旦它为假，它就会*永久*地切换到迭代完成阶段。

请注意，这是迭代器的行为方式；提高 StopIteration 意味着，停止迭代我，我完成了。

来自[“迭代器”的python词汇表](http://docs.python.org/glossary.html#term-iterator)：

> 表示数据流的对象。重复调用迭代器的`next()`方法会返回流中的连续项。当没有更多数据可用时，`StopIteration`会引发异常。此时，迭代器对象已用尽，对其`next()`方法的任何进一步调用都将`StopIteration`再次引发。

您可以结合`takewhile`来`tee`查看下一批中是否还有更多结果：

```
import itertools

def readParag(filename):
    with open(filename) as f:
        while True:
            paras = itertools.takewhile(lambda l: l.strip(), f)
            test, paras = itertools.tee(paras)
            test.next()  # raises StopIteration when the file is done
            yield (l.strip() for l in paras) 
```

这会产生生成器，因此产生的每个项目本身就是一个生成器。您确实需要消耗这些生成器中的所有元素才能继续工作；另一个答案中列出的 groupby 方法也是如此。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-09T15:58:48.787

If the file contents fit into memory, there is a much easier way to get the groups separated by blank lines:

```
with open("filename") as f:
    groups = [group.split() for group in f.read().split("\n\n")] 
```

This approach can be made more robust by using `re.split()` instead of `str.split()` and by filtering out potential empty groups resulting from four or more consecutive line breaks.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-07T19:28:44.963

这是记录在案的`takewhile`. 条件为真*时*需要。如果条件稍后再次变为真，它不会再次启动。

简单的解决方法是让你的函数只在循环中调用 takewhile，当 takewhile 没有更多返回时停止（即在文件末尾）：

```
def readParag(fileObj):
    while True:      
        nextList = [ln.rstrip() for ln in takewhile(lambda line: line != "\n", fileObj)]
        if not nextList:
            break
        yield nextList 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-07T19:31:07.780

你可以多次调用takewhile：

```
>>> def readParagGenerator(fileObj):
...     group = [ln.rstrip() for ln in takewhile(lambda line: line != "\n", fileObj)]
...     while len(group) > 0:
...         yield group
...         group = [ln.rstrip() for ln in takewhile(lambda line: line != "\n", fileObj)]
... 
>>> list(readParagGenerator(StringIO(F)))
[['11', '2', '3', '4'], ['11'], ['111']] 
```

# android - 更新 GridView 子项

> ID：11852585
> 
> 赞同：1
> 
> 时间：2012-08-07T19:16:04.050
> 
> 标签：android, android-widget

我在 Activity 中加载了一个 GridView，其中存在片段。GridView 本身并不位于 Fragment 中。我通过 BaseAdapter 创建了一个客户适配器，一切正常。

客户适配器.java

```
 @Override
public View getView( int position, View convertView, ViewGroup parent ) {

    ImageView v = new ImageView( activity );
    Bitmap bmp = getBitmap( videoIds[ position ] );
    v.setImageBitmap( bmp );
    v.setAdjustViewBounds( true );
    v.setPadding( 5, 5, 5, 5 );
    v.setId( position );

    thumbnails[ position ] = bmp;

    return v;

} 
```

我有一个上下文操作栏，可让您选择要上传、删除等的视频。

```
videoGallery.setChoiceMode( GridView.CHOICE_MODE_MULTIPLE_MODAL );
videoGallery.setMultiChoiceModeListener( new MultiChoiceModeListener() { ... } 
```

我想在视频被选中时在视频周围添加一个边框，所以我需要做的就是添加背景颜色。所以我在上面列出的新 MultiChoiceModeListener() 部分中有这个：

```
@Override
public void onItemCheckedStateChanged( ActionMode mode, int position, long id, boolean checked ) {
ImageView image = (ImageView)videoGallery.findViewById( position );
    if( checked ) {
        image.setBackgroundColor( Color.YELLOW );
    } else {
        image.setBackgroundColor( Color.TRANSPARENT );
    }
    int count = videoGallery.getCheckedItemCount();
    if( count == 1 ) {
        mode.setSubtitle( "1 item selected." );
    } else if( count != 0 ) {
        mode.setSubtitle( count + " items selected." );
    } else {
        mode.setSubtitle( null );
    }
} 
```

问题是子视图没有更新。标题已更新“选择了 1 个项目，选择了 2 个项目等）所以我知道正在调用该方法。设置背景确实会产生背景，所以并不是我无法看到更改。视图本身没有更新。我什至在创建视图时在视图上设置了随机 ID，并且执行 image.getId() 提供了正确的 ID，所以我知道它正在查找视图。它只是没有更新它。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T21:36:14.783

这似乎不对：

```
ImageView image = (ImageView)videoGallery.findViewById( position ); 
```

原因：位置设置为 0<=position<=count-1 。id 是完全不同的东西。

您需要更新原始数据本身，并告诉适配器更新其视图，例如使用 notifyDataSetChanged()。

* * *

编辑：

这不是唯一的问题。真正的问题是您`getView()`总是为 （这，顺便说一句，由于adapterView 缓存其创建的视图而导致内存泄漏）创建一个新的ImageView，而不是回收它。你真的应该看视频“ [listView 的世界](http://www.google.com/events/io/2010/sessions/world-of-listview-android.html)”。

它对您不起作用的原因是您访问不再使用的旧视图。

# image - 主流浏览器都支持哪些图片格式？(2012)

> ID：11852589
> 
> 赞同：18
> 
> 时间：2012-08-07T19:16:17.700
> 
> 标签：image, cross-browser, image-formats

我想知道主流浏览器会支持哪些图像格式（除了基本的 JPEG、GIF、PNG），尤其是 Chrome、Firefox 和 Webkit。如果有人可以在某处提供指向列表的链接（经常更新以应对最近的频繁更新），那就太好了。对其他格式（如文档和视频）的支持也会很好。

我觉得这些信息应该在某个地方列出，但是我搜索时没有找到任何这样的东西。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-07T19:22:43.443

这是一个很好的资源：[http ://en.wikipedia.org/wiki/Comparison_of_web_browsers#Image_format_support](http://en.wikipedia.org/wiki/Comparison_of_web_browsers#Image_format_support)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-09-26T10:17:56.273

主要图像文件支持

`.bmp`, `.jpg`, `.jpeg`, `.png`,`.gif`

新的

`.webp`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-10T17:52:19.883

流行浏览器支持的图像格式：BMP、SVG、JPG、PNG 和 GIF。没有两种格式的 jpeg 或 jpg，它是一种使用多个扩展名的格式，[请参见此处](https://stackoverflow.com/questions/23424399/jpg-vs-jpeg-image-formats)。

**注意**：SVG（简单矢量图形）可以生成更小的图像，但只允许矢量图像（无光栅）。

接下来，使用的其他格式是 webp 和 jpeg2000。

Webp：- 支持许多浏览器，例如 Chrome、Opera。[此处](https://bugzilla.mozilla.org/show_bug.cgi?id=856375)存在 Firefox 支持问题。请注意，Webp 平均可以将图像内存大小减少到原始大小的 30-40% 左右（在我们的实验中）。这并不总是意味着我们有时会看到从 jpeg 转码的 webp 超出原始 jpeg 大小。与原始 jpeg 相比，输出图像没有视觉差异。我的建议：尽可能提供 webp，即 Chrome、Android、Opera。

JPEG2000：- 这种格式很棒。调整图像大小不会像 JPEG 那样降低质量。问题在于它对于解码来说计算量太大，而且它在十多年前硬件还不是很好（特别是不适用于移动设备）时就出现了。它仍然在某些相机中使用，因为它会产生更小的图像。

不太受欢迎但值得一提：[BPG](http://bellard.org/bpg/)和[FLIF](http://flif.info/)。这将需要使用 JS 或其他库在 web/app 上提供服务。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-03T05:52:25.867

每个浏览器都支持JPEG和PNG。但是新的图像格式 webP 仅受 Chrome 支持，部分受 Firefox 支持，而 Safari 则完全不支持。Thou WebP 非常好，因为它不会影响图像的质量，还可以减少 25-35%。但是我们仍然不能使用它，因为它在不同的浏览器环境中不太灵活。但您也可以寻找其他适用于每种浏览器类型且兼容的图像格式。

# c# - 列表 运算符 == 在 C# 语言规范版本 4 中

> ID：11852596
> 
> 赞同：22
> 
> 时间：2012-08-07T19:16:49.830
> 
> 标签：c#, list, operators

在 C# 语言规范版本 4 中，1.6.7.5 运算符是有关`List<T>`运算符的信息：`==`和`!=`. 但我找不到在 ? 中定义的此类运算符`List<T>`？我错过了什么吗？

来自 1.6.7.5 运算符的示例代码：

```
List<int> a = new List<int>();
a.Add(1);
a.Add(2);
List<int> b = new List<int>();
b.Add(1);
b.Add(2);
Console.WriteLine(a == b); // Outputs "True" => here I get False as well
b.Add(3);
Console.WriteLine(a == b); // Outputs "False" 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-07T19:18:22.427

`List<T>`是不重载的引用类型`operator==`。因此，它使用默认的引用相等语义。您似乎认为它会覆盖`operator==`以提供值语义，但事实并非如此。 `a`将等于`b`when`a`并且`b`两者都引用同一个`List<T>`实例。

编辑：所以我自己查看了规范。它说：

> List 类声明了两个运算符，运算符 == 和运算符 !=，从而为将这些运算符应用于 List 实例的表达式赋予了新的含义。具体来说，运算符将两个 List 实例的相等定义为使用它们的 Equals 方法比较每个包含的对象。以下示例使用 == 运算符比较两个 List 实例。

老实说...我不知道他们在说什么，但这似乎不正确。据我在运行一些测试后所知，`List<T>`该类使用引用相等。好问题。

EDIT2：反编译`List<T>`，没有`operator==`和/或`operator!=`重载。在这种情况下，规范似乎完全不正确。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-08-07T19:37:30.110

该规范确实是正确的，尽管令人困惑。该规范定义了一个名为 List 的类（糟糕的命名选择）。

> 下表显示了一个名为 List 的通用类，它实现了一个可增长的对象列表。该类包含几个最常见的函数成员类型的示例。

此类可以在 1.6.7 节的规范中看到。Equals 运算符被重载并匹配上面解释的输出。也许应该为那个班级选择一个更好的名字。

```
static bool Equals(List<T> a, List<T> b) {
    if (a == null) return b == null;
    if (b == null || a.count != b.count) return false;
    for (int i = 0; i < a.count; i++) {
        if (!object.Equals(a.items[i], b.items[i])) {
            return false;
        }
    }
  return true;
} 
```

# xml - 在 XML DTD 中使用 + 运算符

> ID：11852599
> 
> 赞同：0
> 
> 时间：2012-08-07T19:17:13.520
> 
> 标签：xml, dtd, xml-validation

我有关于在为 XML 定义 DTD 时指定元素的子部分的问题。我想要一个名为“Description”的元素，它可能具有 BookRef 和 PCDATA 的任何交错序列。我在我的 XML DTD 中使用了以下语句。

```
<!ELEMENT Description (#PCDATA|Courseref)* > 
```

但是，我想强制执行比 *. 我想使用 +，它应该要求至少有一个 PCDATA 或 Courseref。但是，当我使用 + 而不是 * 时，使用 xmllint 会出现解析错误。

我是 DTD 的新手，我想知道，根据 XML DTD Specs 指定 + 运算符是否非法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T15:23:51.147

由于您有一个[混合内容模型](http://www.w3.org/TR/REC-xml/#sec-mixed-content)（#PCDATA 和元素 ( `Courseref`)），因此您必须使用`*`出现指示器。

如果模型中没有#PCDATA，则可以使用`+`.

来自规范的[混合内容模型部分](http://www.w3.org/TR/REC-xml/#sec-mixed-content)的关键信息：

> ...子元素的类型可能受到限制，但不受其顺序或出现次数的限制

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T19:09:50.017

是的，XML 规范要求表单的内容模型

```
(#PCDATA | foo | bar | baz)* 
```

首先列出`#PCDATA`并使用`*`not `+`（或其他任何内容）作为出现指示符（http://www.w3.org/TR/xml/#NT-Mixed）。

许多设计考虑都在其中发挥了作用，其中大多数现在具有纯粹的历史重要性。然而，有一个可能值得注意：如果`+`被允许并且你确实写了

```
<!ELEMENT Description (#PCDATA|Courseref)+ > 
```

元素声明将定义与使用的表单完全相同的一组有效元素实例`*`：令牌`#PCDATA`匹配已解析字符数据的零个或多个字符，因此元素实例`<Description/>`对元素声明的任何一种形式（零长度string 匹配内容模型标记`#PCDATA`一次，因此`+`将满足至少一次满足 -marked 选择的要求）。

您可以通过使 Description 包含在此处传达您的意图

```
(p+ | Courseref) 
```

并在文档中说空`p`（段落）元素是不受欢迎的。但是 DTD 没有提供一种要求`#PCDATA`字符串有任何最小长度内容的方法。这就是一些人喜欢使用 XSD、Schematron 或 Relax NG 的原因之一。

# android - 为什么每当我通过应用程序 viewPager 进行分页时，我的片段 onCreate 会被广泛调用？

> ID：11852604
> 
> 赞同：8
> 
> 时间：2012-08-07T19:17:24.980
> 
> 标签：android, android-fragments, android-viewpager, android-fragmentactivity

我不太了解这个片段生命周期业务。

我的应用程序的“查看详细信息”部分有一个非常标准的 3 页水平滑块视图寻呼机布局。我在三个页面的中间页面上启动我的应用程序。我的 FragmentActivity 将页面设置为第 1 页。

```
mPager.setCurrentItem(1); //default to center page, current data view fragment 
```

我一直在使用 FragmentStatePagerAdapter，因为使用 FragmentPagerAdapter 有时会导致我的应用程序崩溃，例如从暂停状态返回时，这是目前解决此问题的最快方法。似乎有效，但我怀疑状态方面可能是我的问题的原因，也许。

所以一开始我以为我会让每个片段完成从休息服务获取数据的工作，然后将其显示在列表中，但我不再那么确定了。

我尝试运行一个独特的异步任务来获取每个片段 onCreateView 事件中的数据。然后在阅读了有关片段生命周期的更多信息后，我切换到 onCreate，注意到 onCreateView 被大量调用，这反过来又导致了一个经常通过网络请求数据的贪婪应用程序。

切换到 onCreate 并没有改变任何东西。对于 2 个相邻片段，OnCreate 仍然像 onCreateView 一样被调用。

奇怪的是，我设置为在 Fragment Activity 中显示的第一个片段只获得了一次调用 onCreate。

感觉这里有些不对劲。

现在我在想我应该声明父片段活动并调用所有异步任务来获取我需要在片段中显示的数据。在父片段活动拥有的对象中设置异步调用的结果，然后让片段使用父片段包含的对象来创建列表视图等。

但是，如果父 Activity 启动的异步任务在调用每个片段 onCreateView 之前没有完成，并且父 Activity 包含的对象还没有准备好怎么办......

签名，困惑和沮丧

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-07T19:24:39.480

ViewPager 非常热衷于关闭它当前不使用的东西，而这正是这里发生的事情。ViewPager 的默认行为是“保留”正在查看的页面两侧的一个页面，并销毁其余页面。因此，在您的3页视图中，选择第1页时，第3页被销毁，然后重新自定义第2页，请重新创建第3页。正如您所注意到的，第 2 页只`onCreate(..)`调用了一次，因为它总是与当前选定的页面相邻，或者说是当前选定的页面。

要解决这个问题，只需设置`ViewPager.setOffscreenPageLimit(2)`. 然后 ViewPager 将保留您的所有片段。显然，这对于大量 Fragment 来说不是一个好主意，但对于您的情况应该没问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T20:56:17.220

@Espiandev 的解决方案将适用于您当前的情况，但您的状态是问题是正确的。您应该使用`setArgument`and/or`onSaveInstanceState`方法来保存您`Fragment`的状态（这不应该太难，因为例如，来自服务器的响应通常可以表示为字符串），然后使用和`getArgument`/或`Bundle`传入`onCreate`恢复它。

或者，您可以让您`Activity`的服务器获取，然后调用`setArgument`您的每个片段，并检查您内部的参数`Fragment`以确定您的数据是否已经到达（如果没有，可能会显示某种加载状态）。

如果您完全关心屏幕方向的变化，[这个相关问题](https://stackoverflow.com/questions/5164126/retain-the-fragment-object-while-rotating)也将对您有用。

# ruby-on-rails-3 - 如何制作定制的载波后处理器？

> ID：11852605
> 
> 赞同：7
> 
> 时间：2012-08-07T19:17:29.713
> 
> 标签：ruby-on-rails-3, carrierwave

我需要对不是图像的文件上传进行一些后期处理——在回形针中我可以有一个自定义的后处理器，但我在carrierwave中找不到任何方法来做到这一点。

Ruby 1.9.3、Rails 3.2.7 和 CarrierWave 0.6.2。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-01-04T19:06:36.737

OP 的问题是如何处理不是图像的文件。

请查看 GitHub 上的源文件： [carrierwave/lib/carrierwave/uploader/processing.rb](https://github.com/carrierwaveuploader/carrierwave/blob/c2ee2e89d3aa447c6b81186be6d627202d33a97f/lib/carrierwave/uploader/processing.rb) 并查看评论。

您将创建自己的 CarrierWave 上传器子类并将其安装在您的模型中，如下所示：

```
 def MyModel < ActiveRecord::Base

    # this is where the uploaded file will be available in your model,
    # as a `MyUploader` instance:
    #
    mount_uploader :uploaded_file, MyUploader

    ... 
  end 
```

请注意，它安装在 ActiveRecord 属性上`:uploaded_file`。这意味着当您`:uploaded_file`从您的模型访问时，您将获得上传的特定文件的 CarrierWave 上传器实例。

您可以简单地在上传器中定义您的处理，如下所示：

```
 class MyUploader < CarrierWave:Uploader::Base
    process :my_custom_processing => [param1,param2,param3]

    def my_custom_processing(param1,param2,param3)
      ...
      # e.g. you could call a method which is defined elsewhere,
      # which operates on a file:
      my_nifty_file_processor( self.uploaded_file ) 
      #
      # or you could just do this directly:
      uploaded_data = self.uploaded_file.read
      ...
    end
  end 
```

在内部`my_nifty_file_processor`，您只需调用`read`传入的对象即可读取文件。

CarrierWave 允许您调用`read`任何 Uploader 实例（= 上传文件的任何实例），它将读取该文件。

**另一个提示：**

有时您需要在上传文件的上传器中访问 ActiveRecord 模型。

只需在您的上传程序代码中访问它，如下所示：

```
 self.model 
```

这使您可以直接在您的 AR 模型中存储有关上传文件的其他信息，例如格式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T09:18:59.283

我写了一篇关于如何创建自定义后处理器来创建视频缩略图的博客文章，也许你会发现它很有用。

[https://prograils.com/posts/video-encoding-processor-for-carrierwave/](https://prograils.com/posts/video-encoding-processor-for-carrierwave/)

# html-agility-pack - 在 windows phone 7 中使用 HTML Agility Pack

> ID：11852611
> 
> 赞同：0
> 
> 时间：2012-08-07T19:17:55.857
> 
> 标签：html-agility-pack, windows-phone-7.1.1

如何使用带有 HtmlAgilitypack 的 Linq 从 body 标签后面的 p 标签中获取文本？我不确定人们说 htmlagility 不支持 xpath。我将解析html代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T01:21:42.100

使用 HtmlAgility 的最简单方法 ->

```
HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();

doc.LoadHtml(string);   //string contains the html code

var paragraphTags = doc.DocumentNode.SelectNodes("p"); //selects all p tags

for (int i = 0; i < paragraphTags.Count; i++)   //loop through the p tags
{
    String text = paragraphTags[i].InnerHtml;
    //text has your paragraph content. use it here.
} 
```

# java - 用于 GWT 的 JQueryUI

> ID：11852618
> 
> 赞同：2
> 
> 时间：2012-08-07T19:18:28.730
> 
> 标签：java, gwt, maven, gquery

我已按照 Eclipse 中 GWT 的 JQueryUI 指南进行操作，但出现错误：

```
The type com.google.gwt.query.client.GQuery cannot be resolved. It is indirectly referenced from required .class files 
```

不过，我不太确定我是否正确地做所有事情。我从未导入过 JQueryUI（我不知道如何正确导入非 jar 文件），但我认为 Google CDN 网络会处理这个问题，不是吗？我遵循的教程在这里：

[http://code.google.com/p/gwtquery-ui/wiki/GettingStarted](http://code.google.com/p/gwtquery-ui/wiki/GettingStarted)

我尝试通过右键单击并选择转换为 Maven 将我的文件转换为 Maven。这创建了一个 POM.xml 文件。我将此添加到 pom 文件中：

```
 <repositories>
<repository>
  <id>gwtquery-ui-repository</id>
  <url>http://gwtquery-ui.googlecode.com/svn/mavenrepo</url>
</repository> 
```

```
 <dependencies>
<dependency>
  <groupId>com.google.gwt</groupId>
  <artifactId>gwtquery-ui</artifactId>
  <version>r146</version>
  <scope>provided</scope>
</dependency> 
```

我在 my.gwt.xml 文件中有 JQueryUI 部分：

```
<inherits name='gwtquery.plugins.UiGoogleCdn' /> 
<inherits name='gwtquery.plugins.UiEmbedded' /> 
```

任何提示都将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T19:44:40.533

我发现了我的错误。您需要先安装和设置 GWTQuery，然后才能使用 GWTQueryUI。我以为它是独立的，但事实并非如此。

# java - Java util 模式实例

> ID：11852623
> 
> 赞同：0
> 
> 时间：2012-08-07T19:18:52.363
> 
> 标签：java, design-patterns

在创建模式对象时，例如

```
Pattern pattern1 = Pattern.compile("s", Pattern.CASE_INSENSITIVE | Pattern.DOTALL); 
```

在同一个参数中传递多个标志背后的逻辑是什么`Pattern.CASE_INSENSITIVE | Pattern.DOTALL`？

这种声明有什么名字吗？

任何类型的对象都可以这样传递吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T19:28:52.273

不，不能像那样传递对象。

这种方式通常用于将可变数量的标志（真/假）传递给方法。常量名称定义为 int 或 long。

例如：

```
public static final int FLAG_A = 1;
public static final int FLAG_B = 2;
public static final int FLAG_C = 4;
public static final int FLAG_D = 8; 
```

int 常量的值是 2 的倍数，因此它们可以与逻辑或组合。

例如：

```
int myValue = FLAG_A | FLAG_C; 
```

myValue 现在包含 FLAG_A 和 FLAG_C 的信息。要检查是否设置了 FLAG_A，您可以使用：

```
if ((myValue & FLAG_A) == FLAG_A) {
  // flag a is set
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T19:24:15.137

调用的第二个参数是一个 int，它是通过按位 OR-ing 其他两个 int 获得的：`Pattern.CASE_INSENSITIVE and Pattern.DOTALL`.

这是一种以位模式压缩更多标志的标准方法。

对象的等效非自然方法是将多个对象打包在一个容器对象中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T19:38:06.507

这是一个[位掩码](http://en.wikipedia.org/wiki/Mask_%28computing%29)，您正在做的是[按位或](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op3.html)。这允许您在同一个参数中组合多个不同的标志，而不是需要冗长而冗长的布尔参数列表。

这是[Pattern 中常量](http://docs.oracle.com/javase/6/docs/api/constant-values.html#java.util.regex.Pattern.CASE_INSENSITIVE)的值，您会注意到它们都是 2 的幂。这意味着您可以将它们与按位组合或不发生位冲突。以你的例子为例，`CASE_INSENSITIVE = 2`它`DOTALL = 32`是二进制的，按位或类似的：

```
 00100000
  00000010
| --------
  00100010 
```

然后在该`compile()`方法中，它可以执行逆操作（按位与）以确定是否设置了给定标志：

```
// Example code, not what compile() actually does
boolean caseInsensitive = flags & CASE_INSENSITIVE != 0; 
```

由于二进制本质上是串联的布尔值列表，并且计算机在处理二进制时非常有效，因此将一系列布尔值存储在位掩码中是一个合乎逻辑的步骤。您在高级语言中看不到它们（例如，Python 的命名参数通常解决相同的问题），但它是一种常见且非常有用的模式，可以包含在您的 Java 工具箱中。

# facebook - 如何对成员列表的组的 API 调用进行排序/限制

> ID：11852624
> 
> 赞同：1
> 
> 时间：2012-08-07T19:18:59.110
> 
> 标签：facebook, facebook-graph-api, facebook-fql, facebook-group

1.  我看到我们只能使用图形 API 获得一个组的 500 个成员。医生说这些是“前500名成员”，

这些是按注册日期排序的，还是按最新的 500 个排序的？

有什么办法可以进一步限制这些在过去 24 小时/1 周内注册？

2.  使用 FQL 是否也有 500 个限制？（文档没有指定）

有什么办法可以进一步限制这些在过去 24 小时/1 周内使用 FQL 注册？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T07:44:27.333

> 我看到我们只能使用图形 API 获得一个组的 500 个成员。医生说这些是“前500名成员”，
> 
> 这些是按注册日期排序的，还是按最新的 500 个排序的，？？？

我会说加入小组的日期，否则称他们为“第一”500 将毫无意义。

> 使用 FQL 是否也有 500 个限制？（文档没有指定）

从我的测试来看，表上似乎没有这样的限制`group_member`（刚刚使用 Grapf API 资源管理器为 FB 开发人员组尝试过，我的浏览器在加载数据时冻结了大约一分钟）。

> 有什么办法可以进一步限制这些在过去 24 小时/1 周内使用 FQL 注册？

不，FQL 表中没有注册日期等信息。

# ios - Xcode 4.4 Mountain Lion 经常挂起

> ID：11852634
> 
> 赞同：0
> 
> 时间：2012-08-07T19:19:56.090
> 
> 标签：ios, xcode, debugging, freeze

自从安装了 Mountain Lion 和 Xcode 4.4 后，我经常不得不在调试会话后强制退出 Xcode。我在控制台“响应 SpringBoard 的终止而终止”中收到以下错误。然后我无法使用 Xcode 开始新会话。我什至无法关闭应用程序 - 唯一的机会就是杀死它。

这是对该问题的另一种解释：[http ://www.1771.in/iphone-xcode-4-4-terminating-in-response-to-springboards-termination.html](http://www.1771.in/iphone-xcode-4-4-terminating-in-response-to-springboards-termination.html)

有人知道解决方法或错误修复吗？

提前谢谢

史蒂夫

# java - java中的类变量声明位置

> ID：11852636
> 
> 赞同：2
> 
> 时间：2012-08-07T19:20:17.763
> 
> 标签：java

我们大多数人在类的开头写类变量，但我发现有些程序员在类的末尾声明类变量。有什么具体原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T19:27:56.847

人们往往不会一直向下滚动。如果您想对其他开发人员隐藏代码，那么源文件的末尾是最好的地方。

# ruby - 覆盖对象属性访问

> ID：11852639
> 
> 赞同：0
> 
> 时间：2012-08-07T19:20:39.173
> 
> 标签：ruby

我想知道是否有可能做到这样，如果我有类似的东西

```
class Test

  attr_reader :access_times
  def initialize
    @access_times = 0
  end

  def get_two
    2
  end

  ...
end

t = Test.new 
```

任何访问`t`都会在实际运行该方法之前运行一段特定的代码？

例如，如果我突然决定说，我使用语法`t.get_two`的事实会加1。或者我做了一个检查，它也会加1。访问继承的任何方法或属性也会使变量加 1 .`.``@access_times``t.is_a?(Test)``@access_times``Test`

如果可能的话，基本上我想在`.`语法中添加一些东西。

我不是在问这是好还是坏的代码，只是它是否可能以及如何完成。我通常不会使用它，因为我可以手动将增量逻辑添加到每个方法，并用方法替换所有直接实例变量访问（甚至像`is_a?`和其他继承自的东西`Object`）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T19:30:32.873

如果您不需要所有东西都是独立的，那么建议只是扩展[`ActiveModel::Callbacks`](http://api.rubyonrails.org/classes/ActiveModel/Callbacks.html). 只需扩展类，您将拥有 before_filter 的所有功能，而不需要所有其他 Rails 东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T19:37:35.763

一个非常核心的版本将是使用`set_trace_func`：[http ://apidock.com/ruby/Kernel/set_trace_func](http://apidock.com/ruby/Kernel/set_trace_func)

这允许您订阅整个程序中触发的所有 ruby​​ 事件，这可能是大量的调用......

我认为没有用于注册任意方法调用的内置挂钩。您可以通过缺少方法、方法链接或委托来实现某些东西，但这取决于您的要求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T06:49:09.297

这是根据您的描述的解决方法。基本上它将为每个实例方法增加@access_times，并且该方法也执行它之前所做的事情。

```
class Test
  attr_accessor :access_times

  def initialize
    @access_times = 0
  end

  def get_two
    2
  end
end

class Test
  @@im = instance_methods

  @@im.each do |m|
    class_eval <<-END
      alias temporary #{m}
    END

    define_method(m) do |*args, &block|
      @access_times += 1
      temporary(*args, &block)
    end
  end

  undef :temporary
end

Test.new.get_two # => @access_times += 1 and original get_two is called: 2 
```

虽然这段代码没有按预期工作，但我稍后会看一下。谢谢。

# android - Android for OpenCV - 打开跟踪文件时出错，UnsatisfiedLinkError

> ID：11852642
> 
> 赞同：0
> 
> 时间：2012-08-07T19:21:00.603
> 
> 标签：android, opencv, unsatisfiedlinkerror

我是 Android 开发和 OpenCV 的新手。[我从http://sourceforge.net/projects/opencvlibrary/files/opencv-android/](http://sourceforge.net/projects/opencvlibrary/files/opencv-android/)下载了适用于 Android 的 OpenCV 库，并使用虚拟设备管理器设置了手机。当我尝试在 Eclipse 中运行“OpenCV 教程 0 - Android 相机”时，手机屏幕显示“致命错误：无法打开相机！” 我在日志中收到这些错误：

```
08-07 15:02:57.322: E/Trace(708): error opening trace file: No such file or directory (2)
08-07 15:02:57.772: E/Sample::SurfaceView(708): Can't open camera! 
```

我还尝试运行一个简单的项目：

```
package com.example;

import org.opencv.core.Mat;
import org.opencv.highgui.Highgui;

    public class Test{
        public static void main(String[] args) {
            Mat example = Highgui.imread("/image.jpg");
        return;
    }
} 
```

这给了我错误

```
Exception in thread "main" java.lang.UnsatisfiedLinkError: org.opencv.highgui.Highgui.imread_1(Ljava/lang/String;)J 
```

我该如何解决这些错误？顺便说一句，/image.jpg 查看项目的父目录，而不是 Android 虚拟设备上的 SD 卡，对吧？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T17:54:47.853

如果您通过 USB 在设备上进行开发，请尝试从选项菜单（行堆栈）转到 App Manager，向下滚动到 OpenCV Manager（假设您使用的是 OpenCV 2.4.2 或更高版本）并强制关闭它。对您的 Tutorial 0 应用程序执行相同操作。

我有教程 0 在我的 ubuntu 机器上工作。但是，当我尝试将一些 OpenCV 类添加到纯 android 项目中时，出现 UnsatisfiedLink 错误。之后，我的教程 0 停止工作一段时间，出现“找不到相机”错误。似乎 OpenCV 管理器可能会搞砸，可能在某些资源上有锁定或其他东西，需要重新启动。我的建议解决了 Totorial 0 相机问题，但没有解决我纯 android + openCV 项目的 unsatisfiedLink 问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T01:35:39.553

经过一堆搜索，我找到[了](http://docs.opencv.org/trunk/doc/tutorials/introduction/android_binary_package/dev_with_OCV_on_Android.html)UnsatisfiedLinkError 的解决方案（在我认为它已修复后再次出现 - 请参见[此处](https://stackoverflow.com/questions/11939192/)）：

“3.如果你的应用项目没有JNI部分，只需将对应的OpenCV原生库从/sdk/native/libs/复制到你的项目目录到文件夹libs/中即可。”

这意味着复制 \armeabi、\armeabi-v7a 和 \x86 文件夹。

"4\. 在您​​的应用程序中启用 OpenCV 的最后一步是调用 OpenCV API 之前的 Java 初始化代码。例如，可以在 Activity 类的静态部分中完成：

```
static {
    if (!OpenCVLoader.initDebug()) {
        // Handle initialization error
    }
} 
```

此代码段应紧随其后：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_load_image); 
```

现在它起作用了！

# java - 小程序文件访问

> ID：11852643
> 
> 赞同：1
> 
> 时间：2012-08-07T19:21:03.720
> 
> 标签：java, fonts, applet, mp3, access-denied

我一直在开发一个音频播放器小程序，但在让它在网络浏览器中运行时遇到了问题。它在 Eclipse 的小程序查看器中完美运行，但当我在 Google Chrome 中尝试时它不起作用。我什至尝试了eclipse生成的applet文件，但它也不起作用，可能与eclipse运行它的方式有关。

这是 html 文件，但不允许访问 mp3 文件或我制作的特殊字体：

```
<html>

<meta http-equiv="Content-Type" content="text/html; charset=MacRoman"/>

<body>

<applet code="DOSPlayer.class" archive="DOSPlayer.jar, basicplayer3.0.jar, commons-logging-1.1.1.jar, mp3spi1.9.5.jar, tritonus_share-0.3.6.jar, jl1.0.1.jar" width="450" height="350" >

</applet>

</body>

</html> 
```

我得到的错误是因为访问权限它无法访问文件：

```
java.security.AccessControlException: access denied (java.io.FilePermission fonts\DOSFont.ttf read)
    at java.security.AccessControlContext.checkPermission(Unknown Source)
    at java.security.AccessController.checkPermission(Unknown Source)
    at java.lang.SecurityManager.checkPermission(Unknown Source)
    at java.lang.SecurityManager.checkRead(Unknown Source)
    at java.io.FileInputStream.<init>(Unknown Source)
    at DOSPlayer.initFont(DOSPlayer.java:398)
    at DOSPlayer.<init>(DOSPlayer.java:413)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at java.lang.Class.newInstance0(Unknown Source)
    at java.lang.Class.newInstance(Unknown Source)
    at sun.plugin2.applet.Plugin2Manager$12.run(Unknown Source)
    at java.awt.event.InvocationEvent.dispatch(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$000(Unknown Source)
    at java.awt.EventQueue$1.run(Unknown Source)
    at java.awt.EventQueue$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source)
java.lang.reflect.InvocationTargetException
    at com.sun.deploy.util.DeployAWTUtil.invokeAndWait(Unknown Source)
    at sun.plugin2.applet.Plugin2Manager.runOnEDT(Unknown Source)
    at sun.plugin2.applet.Plugin2Manager.createApplet(Unknown Source)
    at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.security.AccessControlException: access denied (java.io.FilePermission mp3 read)
    at java.security.AccessControlContext.checkPermission(Unknown Source)
    at java.security.AccessController.checkPermission(Unknown Source)
    at java.lang.SecurityManager.checkPermission(Unknown Source)
    at java.lang.SecurityManager.checkRead(Unknown Source)
    at java.io.File.list(Unknown Source)
    at java.io.File.listFiles(Unknown Source)
    at DOSPlayer.getFiles(DOSPlayer.java:259)
    at DOSPlayer.<init>(DOSPlayer.java:415)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at java.lang.Class.newInstance0(Unknown Source)
    at java.lang.Class.newInstance(Unknown Source)
    at sun.plugin2.applet.Plugin2Manager$12.run(Unknown Source)
    at java.awt.event.InvocationEvent.dispatch(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$000(Unknown Source)
    at java.awt.EventQueue$1.run(Unknown Source)
    at java.awt.EventQueue$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source)
Exception: java.lang.reflect.InvocationTargetException 
```

我知道错误来自这两个代码片段：

```
 //path is "mp3/"
public String[] getFiles(String path) {

              String[] songs = new String[501];
              String files;
              File folder = new File(path);
              File[] listOfFiles = folder.listFiles(); 
              //gets all mp3 files within mp3 folder
             try {
              for (int i = 0; i < listOfFiles.length; i++) {

               if (listOfFiles[i].isFile()) 
               {
               files = listOfFiles[i].getName();
                    if (files.endsWith(".mp3")) {
                            songs[songNum] = files;
                            songNum++;
                            playableSongs++;
                    }
                 }
              }
             } catch (Exception e) {
                 System.out.println("Error Here");
                 e.printStackTrace();
                 return null;
             }
              return songs;

}

/////////////////////////////////

public void initFont() {
        try {
            //URL fontUrl = new URL("fonts/DOSFont.ttf");
            File file = new File("fonts/DOSFont.ttf"); // where ever it is from

            FileInputStream fontPath = new FileInputStream(file);
            dosFont = Font.createFont(Font.TRUETYPE_FONT, fontPath);//fontUrl.openStream());
            dosFont = dosFont.deriveFont(Font.PLAIN,19);
            GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
            ge.registerFont(dosFont);
            font = true;
                } catch(Exception e) {
                    e.printStackTrace();
                    font = false;
                }
    } 
```

我已经尝试签署小程序，但这不起作用，它授予从网页查看小程序的人访问文件的权限。我也尝试编辑策略文件，但我无法让它工作，但它仍然是一个选项。

我已经遇到了几个小时的麻烦，不知道该怎么做，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T00:20:19.727

这些资源（尤其是字体）实际上是“应用程序资源”，可以添加到 Jar 中并添加到小程序的运行时类路径中。如果不在存档中，则应将它们添加到服务器上的公共场所（可以直接从浏览器访问它们）。

一旦进入 Jar 或服务器，就可以通过 URL 访问它们。如果没有嵌入到 Jar 中，则 URL 可以形成为代码或文档库的相对路径。如果它们在 Jar 中，请使用以下内容获取 URL：

```
URL urlToFont = this.getClass().getResource("/path/in/jar/to/the.ttf"); 
```

> 我也尝试编辑策略文件，但我无法让它工作，但它仍然是一个选项。

不，它不能。策略文件适用于非常有限的范围，公开部署的小程序不是其中之一。

* * *

只是对..的快速评论

```
File[] listOfFiles = folder.listFiles(); 
```

这需要重新考虑。如果没有服务器的帮助，小程序无法获取服务器上的文件列表。要定义一组文件，applet 通常会有一个接受路径/名称的参数。

# c++ - 如何使用构造函数在另一个类中创建对象？

> ID：11852645
> 
> 赞同：7
> 
> 时间：2012-08-07T19:21:07.283
> 
> 标签：c++, class, object, constructor

所以我正在编写我的代码，它以模块化的方式设计。现在，我的一门课；被调用`Splash`必须创建另一个名为的类的对象`Emitter`。通常，您只需创建对象并完成它，但这在这里不起作用，因为`Emitter`该类具有自定义构造函数。但是当我尝试创建一个对象时，它不起作用。

举个例子;

`Emitter`有一个像这样的构造函数：`Emitter::Emitter(int x, int y, int amount);`并且需要创建以便可以在`Splash`类中访问它。

我试图这样做，但没有奏效：

```
class Splash{
    private:
        Emitter ps(100, 200, 400, "firstimage.png", "secondimage.png"); // Try to create object, doesn't work.
    public:
       // Other splash class functions.
} 
```

我也试过这个，它也不起作用：

```
class Splash{
    private:
        Emitter ps; // Try to create object, doesn't work.
    public:
       Splash() : ps(100, 200, 400, "firstimage.png", "secondimage.png")
       {};
} 
```

**编辑：**我知道第二种方法应该有效，但它没有。如果我删除该`Emitter`部分，则代码有效。但是当我以第二种方式执行此操作时，没有打开任何窗口，也没有执行任何应用程序。

那么如何创建我的`Emitter`对象以供使用`Splash`？

**编辑：**

这是发射器类和标头的代码： `Header`

```
// Particle engine for the project

#ifndef _PARTICLE_H_
#define _PARTICLE_H_

#include <vector>
#include <string>
#include "SDL/SDL.h"
#include "SDL/SDL_image.h"
#include "image.h"

extern SDL_Surface* gameScreen;

class Particle{
    private: // Particle settings
        int x, y;
        int lifetime;
    private: // Particle surface that shall be applied
        SDL_Surface* particleScreen;
    public: // Constructor and destructor
        Particle(int xA, int yA, string particleSprite);
        ~Particle(){};
    public: // Various functions
        void show();
        bool isDead();
};

class Emitter{
    private: // Emitter settings
        int x, y;
        int xVel, yVel;
    private: // The particles for a dot
        vector<Particle> particles;
        SDL_Surface* emitterScreen;
        string particleImg;
    public: // Constructor and destructor
        Emitter(int amount, int x, int y, string particleImage, string emitterImage);
        ~Emitter();
    public: // Helper functions
        void move();
        void show();
        void showParticles();
};

#endif 
```

这是发射器功能：

```
#include "particle.h"

// The particle class stuff
Particle::Particle(int xA, int yA, string particleSprite){
    // Draw the particle in a random location about the emitter within 25 pixels    
    x = xA - 5 + (rand() % 25);
    y = yA - 5 + (rand() % 25);
    lifetime = rand() % 6;
    particleScreen = Image::loadImage(particleSprite);
}

void Particle::show(){
    // Apply surface and age particle
    Image::applySurface(x, y, particleScreen, gameScreen);
    ++lifetime;
}

bool Particle::isDead(){
    if(lifetime > 11)
        return true;
    return false;
}

// The emitter class stuff

Emitter::Emitter(int amount, int x, int y, string particleImage, string emitterImage){
    // Seed the time for random emitter
    srand(SDL_GetTicks());
    // Set up the variables and create the particles
    x = y = xVel = yVel = 0;
    particles.resize(amount, Particle(x, y, particleImage));
    emitterScreen = Image::loadImage(emitterImage);
    particleImg = particleImage;
}

Emitter::~Emitter(){
    particles.clear();
}

void Emitter::move(){
}

void Emitter::show(){
    // Show the dot image.
    Image::applySurface(x, y, emitterScreen, gameScreen);
}

void Emitter::showParticles(){
    // Go through all the particles
    for(vector<Particle>::size_type i = 0; i != particles.size(); i++){
        if(particles[i].isDead() == true){
            particles.erase(particles.begin() + i);
            particles.insert(particles.begin() + i, Particle(x, y, particleImg));
        }
    }
    // And show all the particles
    for(vector<Particle>::size_type i = 0; i != particles.size(); i++){
        particles[i].show();
    }
} 
```

这里还有[Splash Class](http://pastebin.com/5VaYsLUd)和[Splash Header](http://pastebin.com/ks1Bpr07)。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-07T19:31:56.897

第二个选项应该可以工作，我会开始查看编译错误以了解它为什么不工作。事实上，请发布与此代码相关的任何编译错误。

同时，您可以执行以下操作：

```
class Splash{
   private:
     Emitter* ps;
   public:
     Splash() { ps = new Emitter(100,200,400); }
     Splash(const Splash& copy_from_me) { //you are now responsible for this }
     Splash & operator= (const Splash & other) { //you are now responsible for this}

     ~Splash() { delete ps; }

}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T20:25:17.690

好吧，我设法以一种骇人听闻的方式修复了它。我所做的是创建一个默认构造函数，并将我的普通构造函数代码移动到一个新函数中。然后我创建了对象并调用了新的 init 函数来设置一切。

# iphone - 如何在 Webview 中更快地加载 PDF 文件？

> ID：11852653
> 
> 赞同：-1
> 
> 时间：2012-08-07T19:21:44.087
> 
> 标签：iphone, ios, xcode, pdf

我在服务器上有一本大约 1800 页（6 MB 大小）的 PDF 书籍。我已经使用一种方法在 webview 中成功阅读它。这是我的代码。

```
self.webView = [[[UIWebView alloc] initWithFrame:CGRectMake(0, 0, 320, 480)] autorelease];
self.webView.backgroundColor = [UIColor whiteColor];
self.webView.scalesPageToFit = YES;
self.webView.delegate = self;
[self.view addSubview:self.webView];
[self.webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.hilbert1862.com/Books/American Standard Version.pdf"]]]; 
```

但是由于负载很重，它需要太多时间才能在 webview 中显示。任何人都可以分享一种更快的方法来在 webview 中显示它或部分显示它（意味着通过滚动 webview 来下载新页面）。thanx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T19:28:40.760

此项目的一部分显示 PDF（请参阅 FlipReader 演示）。该项目是关于将 OpenGL 效果作为视图之间的转换。

[https://github.com/epatel/EPGLTransitionView](https://github.com/epatel/EPGLTransitionView)

# android - Android：如何在 View.onDraw() 中使用 RGB_565 颜色来匹配位图颜色

> ID：11852656
> 
> 赞同：1
> 
> 时间：2012-08-07T19:21:50.823
> 
> 标签：android, view, colors, bitmap, rgb

在我的应用程序中，我有一个自定义视图，它呈现一些位图并使用`onDraw()`. 画布最初是用一种颜色填充的。基本上我有以下代码：

```
public static int COLOR = Color.rgb(200, 50, 50);

@Override
public void onDraw(Canvas canvas) {
    canvas.drawColor(COLOR);

    Bitmap bitmap = Bitmap.createBitmap(100, 100, Bitmap.Config.RGB_565);
    Canvas c = new Canvas(bitmap);
    c.drawColor(COLOR);

    canvas.drawBitmap(bitmap, 0, 0, null);
} 
```

我期待代码创建一个连续的红屏；位图以不同的红色渲染，因此它的位置是可见的。为了分析颜色，我对其进行了截图 - 位图是用`(206,48,49)`而不是`(200,50,50)`.

显然，这必须与使用 RGB_565 而不是 ARGB_8888 的位图有关（虽然我不想使用）。所以我的问题是，如何用 RGB_565 颜色填充视图的画布以解决这些颜色问题？

我尝试通过删除最低有效位（ , , ）来转换`(200,50,50)`为 RGB_565 ，但当然这在这里没有什么区别。Android在内部做什么？我的推理错误在哪里？`red >> 3``green >> 2``blue >> 3``(206,48,49)``(200,50,50)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-05T00:02:13.770

终于自己弄清楚了...

在我的`onDraw()`方法中，有两种隐式色彩空间转换：

1.  在 RGB_565 位图上绘制`(200,50,50)`(RGB_888)。
2.  在 RGB_888 画布上绘制 RGB_565 位图。

`(200,50,50)`等于`(25,12,6)`RGB_565 ( `red >> 3, green >> 2, blue >> 3`)。此外，毫不奇怪，`(206,48,49)`它也在`(25,12,6)`RGB_565 中。

现在，当您转换`(25,12,6)`回 RGB_888 时，例如使用[此算法](https://stackoverflow.com/a/9069480/1350193)，您会得到`(206,49,49)`- 足够接近。不过，我真的无法解释为什么 Android 会为绿色通道返回 48 而不是 49。也许这是一个舍入误差或浮点不精确。查看 Android 源代码可能会有所帮助，但由于这不是一个惊天动地的问题，所以我会通过它。

# c++ - 如何正确设置数组中特定空间的条件？

> ID：11852659
> 
> 赞同：0
> 
> 时间：2012-08-07T19:22:00.880
> 
> 标签：c++, arrays, conditional-statements

我正在开发一个用于 C++ 实践目的的小应用程序，实际上我在不使用数组的情况下成功开发了这个算法，但现在我想使用数组来完成它。该计划应接受 15 分中的四个 2 分练习（第一和第三值）、20 分中的两个（第二和第四值）和 30 分中的一个。这是我的代码：

```
int main(int argc, char** argv){

    int grades[5];
    int i; 
    int sum=0;

    for(i=0; i<5; i++){
        cin >> grades[i];

        sum+=grades[i];

        if(grades[0]>15||grades[1]>20){

            cout<<"ERROR"<<endl;
            break;

        }else if(grades[2]||grades[3]){

            cout<<"ERROR"<<endl;
            break;

        }if(grades[4]>30){

            cout <<"ERROR"<<endl;
            break;
        }

    }   
} 
```

这里的问题是它不应该在控制台上打印错误并阻止它继续，只有在满足条件的情况下，此时如果我即使在条件的宽限内输入值，它也会打印出“错误”并停止。

我并不是真的要找人来解决这个问题，我只是想知道我做错了什么，而不是让别人为我解决问题，用恰当的话来说，我正在寻找提示/提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T19:28:00.373

这条线在这里

```
 }else if(grades[2]||grades[3]){

            cout<<"ERROR"<<endl;
            break;

     } 
```

将导致您在索引 2 或 3 处的元素不为零时显示错误。你没有初始化你的数组元素，所以当你的循环开始时这些值很可能是非零的。为确保它们不是，您可以在开始之前将零分配给所有元素。我不确定您的代码要做什么，但是当用户为`cin`at输入除零以外的任何内容时`i = 2`，`i = 3`您的循环将因错误输出而中断（假设`if`您的`if-else`块中的第一个条件不满足，但如果满足该条件无论如何，您的循环也会退出）

# ios - 究竟什么是 iOS 上的 BLE 连接设备？

> ID：11852662
> 
> 赞同：9
> 
> 时间：2012-08-07T19:22:06.563
> 
> 标签：ios, core-bluetooth

该`CBCentralManager retrieveConnectedPeripherals`方法说它获取“当前连接到系统的外围设备列表”。这里系统的定义有点模糊。

这是否意味着我获得了连接到我的应用程序的外围设备列表，或连接到*任何*应用程序的外围设备列表？

如果我可以将外围设备连接到另一个应用程序，这是否也意味着多个应用程序可以连接到同一个外围设备？

仅当应用程序位于前台时才会发生这种情况，还是我需要允许后台应用程序向我认为我的应用程序拥有的外围设备发送命令的可能性？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T06:05:46.943

支持 BLE 4.0 的设备通常与 CBCentralManager 无绑定连接。什么是有界和无界连接，你可以从这个[链接](https://stackoverflow.com/questions/10602790/what-is-the-difference-between-bounded-and-unbounded-device?rq=1)知道。一个支持 BLE 4.0 的设备只能与一个主设备连接，从而增强了安全连接。你应该按照这个[链接](https://stackoverflow.com/questions/10415694/how-can-i-create-a-secured-connection-to-ble-peripheral-through-cbcentralmanager?rq=1)。无论是在前台还是后台，如果连接存在，BLE 从设备将不会与其他应用程序或设备连接。

# mysql - phpMyAdmin，插入时不显示任何字段

> ID：11852664
> 
> 赞同：2
> 
> 时间：2012-08-07T19:22:12.510
> 
> 标签：mysql, phpmyadmin

我不知道这是 phpMyAdmin 的问题还是我的 MYSQL 服务器的问题。每当我想插入数据时，它都会在每个数据库中发生。图片（我没有 10+ 声望，所以这里有一个链接）：http: [//i.stack.imgur.com/laiei.png](http://i.stack.imgur.com/laiei.png)

感谢您的帮助:)

-------------------> 编辑 <----------

**我自己找到了解决方案，感谢@PriestVallon，没有他我无法做到。**

如果有人想知道修复，请转到 CMD，cd 到您的 MYSQL 文件夹，然后到 bin：

```
cd C:/Program Files/Zend/MYSQL51/bin/ 
```

（例如）。现在，关闭服务器并启动它（重新启动）：

```
mysqladmin -u username -p shutdown 
```

（将用户名替换为您的用户名，执行命令时将要求您输入密码）。

现在，启动 MySQL 服务：

```
mysqld 
```

（您可以关闭 CMD 选项卡，该服务将继续运行）。

〜问题是我需要重新启动服务器。再次感谢@PriestVallon。

# php - 嵌套评论代码不起作用

> ID：11852666
> 
> 赞同：2
> 
> 时间：2012-08-07T19:22:19.880
> 
> 标签：php

我正在尝试实现我在[http://www.jongales.com/blog/2009/01/27/php-class-for-threaded-comments/](http://www.jongales.com/blog/2009/01/27/php-class-for-threaded-comments/)找到的嵌套评论代码。

但由于某种原因，我无法让它工作。我的结果是一行中的“父子子子第三级第二父子第二子”，没有任何嵌套。我究竟做错了什么？是否有我必须启用的设置或扩展才能使其正常工作？提前致谢！

这是我正在使用的确切代码：

```
<?php
class Threaded_comments
{

public $parents  = array();
public $children = array();

/**
 * @param array $comments
 */
function __construct($comments)
{
    foreach ($comments as $comment)
    {
        if ($comment['parent_id'] === NULL)
        {
            $this->parents[$comment['id']][] = $comment;
        }
        else
        {
            $this->children[$comment['parent_id']][] = $comment;
        }
    }
}

/**
 * @param array $comment
 * @param int $depth
 */
private function format_comment($comment, $depth)
{
    for ($depth; $depth > 0; $depth--)
    {
        echo "\t";
    }

    echo $comment['text'];
    echo "\n";
}

/**
 * @param array $comment
 * @param int $depth
 */
private function print_parent($comment, $depth = 0)
{
    foreach ($comment as $c)
    {
        $this->format_comment($c, $depth);

        if (isset($this->children[$c['id']]))
        {
            $this->print_parent($this->children[$c['id']], $depth + 1);
        }
    }
}

public function print_comments()
{
    foreach ($this->parents as $c)
    {
        $this->print_parent($c);
    }
}

}

$comments = array(  array('id'=>1, 'parent_id'=>NULL,   'text'=>'Parent'),
                array('id'=>2, 'parent_id'=>1,      'text'=>'Child'),
                array('id'=>3, 'parent_id'=>2,      'text'=>'Child Third level'),
                array('id'=>4, 'parent_id'=>NULL,   'text'=>'Second Parent'),
                array('id'=>5, 'parent_id'=>4,   'text'=>'Second Child')
            );

$threaded_comments = new Threaded_comments($comments);

$threaded_comments->print_comments();

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T19:29:58.623

我认为您只会在控制台中看到格式，而不是在网页中使用它。如果您想在网页中使用它，则必须将以下函数中的and分别替换为`\n`and 。`\t``<br/>``&nbsp;&nbsp;&nbsp;&nbsp;`

```
/**
 * @param array $comment
 * @param int $depth
 */
private function format_comment($comment, $depth)
{
    for ($depth; $depth > 0; $depth--)
    {
        echo "\t";
    }

    echo $comment['text'];
    echo "\n";
} 
```

应该变成：

```
/**
 * @param array $comment
 * @param int $depth
 */
private function format_comment($comment, $depth)
{
    for ($depth; $depth > 0; $depth--)
    {
        echo "&nbsp;&nbsp;&nbsp;&nbsp;";
    }

    echo $comment['text'];
    echo "<br />";
} 
```

# objective-c - 如何让计算器进行第二次计算

> ID：11852667
> 
> 赞同：0
> 
> 时间：2012-08-07T19:22:23.557
> 
> 标签：objective-c

我在编程方面是全新的，对于我第一次尝试应用程序，我正在编写一个基本的计算器。现在，我可以使用所有 4 个运算符（+、-、*、/）进行计算，但如果我再次按下等于，它就会崩溃。如何让它再次运行计算？例如，如果我输入“2+2=4”，我如何按等于第二次产生“6”，然后按第三次产生“8”等等......

这是我到目前为止所拥有的。我正在使用 switch 语句。

```
-(void)equalsButton:(id)sender

{
    second = [display.text integerValue];

    int result;

    NSArray* components;

    switch (operator)
    {
        case 0:
            components = [display.text componentsSeparatedByString:@"+"];
            first = [(NSString*)[components objectAtIndex:0] integerValue];
            second = [(NSString*)[components objectAtIndex:1] integerValue];
            result = first + second;
            break;
        case 1:
            components = [display.text componentsSeparatedByString:@"-"];
            first = [(NSString*)[components objectAtIndex:0] integerValue];
            second = [(NSString*)[components objectAtIndex:1] integerValue];
            result = first - second;
            break;
        case 2:
            components = [display.text componentsSeparatedByString:@"*"];
            first = [(NSString*)[components objectAtIndex:0] integerValue];
            second = [(NSString*)[components objectAtIndex:1] integerValue];
            result = first * second;
            break;
        case 3:
            components = [display.text componentsSeparatedByString:@"/"];
            first = [(NSString*)[components objectAtIndex:0] integerValue];
            second = [(NSString*)[components objectAtIndex:1] integerValue];
            result = first / second;
            break;
            }

    NSString * result1 = [NSString stringWithFormat:@"%i",result];
    display.text = result1;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T19:37:03.447

根据我收集的信息，您将该显示字段用作输入和输出。因此，当您第一次计算时，它现在只有结果，并且您丢失了运算符和第二个操作数，您正试图将其重新应用于结果。

所以我想说，如果您不想进行太多更改，您可以做的一件事是在每次计算结果时将运算符和第二个操作数存储在实例变量中。那样的话，如果你不能确定运营商，就意味着你要召回最后一个。所以本质上它会在你的 switch 语句中添加一个新的案例：

*   用作`display.text`第一个操作数
*   使用最后保存的运算符作为运算符
*   使用最后保存的值作为第二个值

一旦达到这一点，您可能希望将冗余代码合并到一个`evaluate:(int)operator a:(int)a b:(int)b`方法或类似的东西中，这样您就不必为该新案例块中的所有运算符重复所有 eval 代码。

**更新**

我的工作计算机上没有 XCode，所以我不能尝试它，而且我没有你的其余代码，但试试这个。它应该适用于+。如果是这样，请为其他操作员复制。

```
-(void)equalsButton:(id)sender

{
int result;

NSArray* components;

switch (operator)
{
    case 0:
        components = [display.text componentsSeparatedByString:@"+"];
        first = [(NSString*)[components objectAtIndex:0] integerValue];
        if([components count] > 1) {
            second = [(NSString*)[components objectAtIndex:1] integerValue];
        }
        result = first + second;
        break;
    case 1:
        components = [display.text componentsSeparatedByString:@"-"];
        first = [(NSString*)[components objectAtIndex:0] integerValue];
        second = [(NSString*)[components objectAtIndex:1] integerValue];
        result = first - second;
        break;
    case 2:
        components = [display.text componentsSeparatedByString:@"*"];
        first = [(NSString*)[components objectAtIndex:0] integerValue];
        second = [(NSString*)[components objectAtIndex:1] integerValue];
        result = first * second;
        break;
    case 3:
        components = [display.text componentsSeparatedByString:@"/"];
        first = [(NSString*)[components objectAtIndex:0] integerValue];
        second = [(NSString*)[components objectAtIndex:1] integerValue];
        result = first / second;
        break;
        }

NSString * result1 = [NSString stringWithFormat:@"%i",result];
display.text = result1;

} 
```

# algorithm - 在线性或亚线性时间内找到 BIT 的最大值和最小值

> ID：11852668
> 
> 赞同：2
> 
> 时间：2012-08-07T19:22:25.840
> 
> 标签：algorithm, data-structures, bit

我必须对数组执行一系列范围更新，即在范围中添加或减去一些常量。之后，我必须找到最终数组的范围，即 (max-min)。最初的数字是 1 到 n。

我正在使用二进制索引树。每个更新都在日志 N 中。我想知道是否有办法在 O(n) 或更短的时间内找到 RANGE（或最大值和最小值）。按照惯例，它需要 O(n log n)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T19:47:00.050

您需要对数组元素进行直接索引访问，因为您需要处理它们以进行增量更新。

您还需要维护最小堆和最大堆。

当你更新一个元素时，你还需要更新两个堆中的对应条目。因此，您需要将指针存储到数组中两个堆中的相应元素中。

创建原始堆是 O(n)，任何修改都是 O(lg(N))。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T23:36:18.673

为什么不对数组进行一次排序？然后从整个数组中添加或减去一个常数仍然给出相同的顺序，就像乘以一个正数一样。也许还有更多的图片。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-03T19:50:37.307

这个问题已经有将近 2 年的历史了，因此我不确定这个答案是否会有很大帮助。无论如何...我从来没有使用 BIT 来回答最小或最大查询。这里有范围查询，它一次改变了很多数字。所以最大值和最小值也会更新。据我所知，除了点查询、范围和搜索等之外，我从未见过在查询中使用 BIT。通常，段树为搜索最小值和最大值提供了更好的选择。执行所有更新后，您可以在 O(lg n) 时间内找到这些更新。但是，在更新期间，您必须更新每个节点的最小最大值，这可以使用延迟传播来完成。更新成本为 O(lg n)。总而言之，如果 m lg n < n 对于您的应用程序，您可以使用分段树，尽管空间更大。

# rest - Soap UI、REST API、更新数据库

> ID：11852669
> 
> 赞同：2
> 
> 时间：2012-08-07T19:22:25.767
> 
> 标签：rest, mongodb, text, csv, soapui

我将使用soapUI 来测试REST API 框架。

有没有一种方法可以使用soapUI工具在MongoDB中插入/更新带有文件类型（csv、txt等）数据的记录？

我想做的是验证 API 调用并从数据文件更新数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T15:40:52.833

如果您愿意使用 Groovy 脚本，那么您可以很容易地做到这一点。

将您的 jdbc 驱动程序放在 SoapUI 的 bin\ext 目录中。

[https://github.com/mongodb/mongo-java-driver/downloads](https://github.com/mongodb/mongo-java-driver/downloads) （可能你可以在哪里获得 mongodb）

然后你的脚本中大致需要这些东西：

```
import groovy.sql.Sql

def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
groovyUtils.registerJdbcDriver("org.postgresql.Driver")  // NOT SURE WHAT STRING FOR MONGODB

def connectString = "....."
sql = Sql.newInstance(connectString)  // TEST YOUR CONNECT STRING IN A SQL BROWSER
def misc = sql.firstRow("SELECT * from table") 
```

groovy.sql.Sql 很不错！

[http://groovy.codehaus.org/api/groovy/sql/Sql.html](http://groovy.codehaus.org/api/groovy/sql/Sql.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-16T02:44:20.197

您可以在测试用例的“Groovy 测试步骤”中轻松使用以下 groovy 代码并连接到 mongodb。在此之前，请确保 mongodb java 客户端 jar 文件和 gmongo 在您的 soapUI 安装的 {Installation Directory}\bin\ext 文件夹中

Gmongo：[http ://mvnrepository.com/artifact/com.gmongo/gmongo/1.5](http://mvnrepository.com/artifact/com.gmongo/gmongo/1.5)

Mongodb Java 客户端：http: [//mvnrepository.com/artifact/org.mongodb/mongo-java-driver/3.2.2](http://mvnrepository.com/artifact/org.mongodb/mongo-java-driver/3.2.2)

```
import com.gmongo.GMongoClient
import com.gmongo.GMongo
import com.mongodb.MongoCredential
import com.mongodb.ServerAddress

//def credentials = MongoCredential.createMongoCRCredential('admin', 'students', 'admin' as char[])

//def client = new GMongoClient(new ServerAddress("127.0.0.1:27017"))

context.gmongo=new GMongo()
def db=context.gmongo.getDB("test")
log.info db.fruit.find().count()

db.fruit.find().each{

    doc->log.info doc

    } 
```

# filemaker - 带有计算字段和过滤的 FileMaker 数据库设计

> ID：11852673
> 
> 赞同：0
> 
> 时间：2012-08-07T19:22:34.370
> 
> 标签：filemaker

我现在正在试用 Filemaker Pro 12，之前没有 FM 经验，尽管有其他基本的 DB 经验。我遇到的问题是尝试对跨越一对多关系的报告进行过滤查询。这是一个例子；

2张桌子：

```
Sample_Replicate
    PK
    Sample FK
    other fields

Weights
    Sample_Replicate_FK (linked to PK of Sample_Replicate)
    Weight
    Measurement type (tare, gross, dry, ash)
    Wash type (null or from list of lab assays) 
```

我想创建一个报告，显示：（毛皮）、（干皮）/（毛皮）、（灰皮）/（毛皮）和（干皮）/（毛皮） ) 适用于所有具有非零洗涤类型的干重。

FM 似乎希望我为这些值中的每一个创建列（这是可行的，因为实验室化验列表的变化很小，并且更新数据库是可以接受的，尽管不是首选）。我试图将总重量、皮重重量等添加到 Sample_Replicate 表中，但当我使用计算字段和方法时，它只返回第一条记录（皮重重量）：

```
tare wt field = Case ( Weights::Measurement type = "Tare"; Weights::Weights )
gross wt field = Case ( Weights::Measurement type = "Gross"; Weights::Weights )
etc... 
```

当我添加标准时，它似乎也失败了：

```
 and Is Empty(Weights::Wash type ) 
```

有人可以在这个问题上指出我正确的方向。谢谢

**编辑：** 我遇到了这个：[http ://www.filemakertoday.com/com/showthread.php/14084-Calculation-based-on-1-to-many-relationship](http://www.filemakertoday.com/com/showthread.php/14084-Calculation-based-on-1-to-many-relationship)

似乎我可以为权重表上的每个测量和清洗类型组合创建约 15 个计算字段，然后在将这 15 列添加到表中之后，在 sample_replicate 中对这些列进行求和。这看起来绝对是愚蠢的。难道没有更好的方法来过滤 FM 中一对多关系的结果吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T20:54:06.537

下面的结构怎么样：

```
Replicate
  ID
Wash Weight
  Replicate ID
  Type (null or from list of lab assays)
  Tare
  Gross
  Dry
  Ash
  + calculated fields 
```

我假设您只计算相同洗涤类型的重量比。重量类型（皮重、毛重等）在这里不仅仅是标签；由于您在特定地方的公式中使用它们，它们更像是角色，所以我认为它们应该有自己的领域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T21:39:52.923

在 Weights 表中添加 tare wt 字段等，然后在 Sample_Replicate 表中添加一个 calc 字段以获取所有相关值的总和

例如：将字段“total tare wt”添加为“sum (Weights::tare wt)”

# amazon-s3 - 是否有通过 CDN（亚马逊云端）提供图像的 Plone 包

> ID：11852674
> 
> 赞同：1
> 
> 时间：2012-08-07T19:22:35.860
> 
> 标签：amazon-s3, plone, amazon-cloudfront

有没有办法管理上传到 plone 系统的图像，但它们是否与 Amazon S3/Cloudfront 同步并自动提供服务？

我看到了一个自 2011 年初以来似乎没有被触及的项目的参考：http: [//plone.org/products/collective.cdn.core/](http://plone.org/products/collective.cdn.core/) 并且仅具有实验性图像支持，不一定适用于亚马逊s3/云端

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T21:14:01.953

目前还没有一种附加产品可以使这种“点击”变得容易。 [https://github.com/collective/collective.cdn.core](https://github.com/collective/collective.cdn.core)表明collective.cdn.core 仍在继续开发，尽管作者没有将他们的版本推送到plone.org（耻辱！）。它似乎仍然不包括“本机”Amazon/CloudFront 支持，但我怀疑插件作者会欢迎代码贡献或赞助来添加这一点。

# javascript - 未执行 Javascript

> ID：11852680
> 
> 赞同：0
> 
> 时间：2012-08-07T19:22:52.873
> 
> 标签：javascript, html, jsp

我提前为提出这样一个愚蠢的问题道歉，但我似乎无法让我的 Javascript 被执行。我从完整的页面切换到一个简单的示例，以确保我没有做任何太棘手的事情，但我仍然无法让 JS 工作。我将以下代码保存在服务器上名为 index.html 的文件中：

```
 <%@page import="index.jsp" %>
    <html>
        <head>
             <title>Hello World</title>
        </head>
        <body>
             Hello World!<br/>
             <script type="text/JavaScript" src="index.jsp">
             </script>
             Still hello world!
             <script type="text/JavaScript">
                 out.println(" Your IP address is " + request.getRemoteAddr());
                 alert("Welcome to the boost converter site");
             </script>
        </body>
    </html> 
```

当我转到该页面时，我看到的是：

```
 Hello World
 Still Hello World 
```

在 Index.jsp 文件中，我有：

```
 function InitPage(){
     out.println("Your IP address is " + request.getRemoteAddr());
 } 
```

我知道解决方案非常简单，但我无法想出解决此问题的代码行。我一直在将示例代码复制到我的页面上，只是为了查看其他人的 JS 是否正确执行，而我也没有得到。很确定服务器运行Tomcat。

谢谢，

克雷格

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T19:28:25.673

`out.println()`是Java / JSP，它不是Javascript。

尝试将其替换为`document.write('Your IP address is unknown');`

```
<body>
    Hello World!<br/>
    <!-- Remove this. A .jsp is not Javascript. -->
    <!--script type="text/JavaScript" src="index.jsp">
    </script-->
    Still hello world!
    <script type="text/javascript">
        /* You can't use request.getRemoteAddr() in Javascript. It's Java. */
        document.write("Your IP address is unknown");//+ request.getRemoteAddr());
        alert("Welcome to the boost converter site");
    </script>
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T19:31:29.327

会不会是你把 Java 和 JavaScript 混在一起了？它们有完全不同的语法。out.println 是 Java，要写入文档（输出到浏览器窗口），您可以使用 document.write('STRING'); 在 JavaScript 中。一旦你的 JavaScript 中出现这样的错误，JavaScript 的其余部分也不会被执行。

# java - 如何关闭 Netty 库调试输出？

> ID：11852689
> 
> 赞同：18
> 
> 时间：2012-08-07T19:23:31.620
> 
> 标签：java, scala, netty, error-logging

我正在使用 Netty（通过 Ning 异步 HTTP[库](http://www.ning.com/code/2010/03/introducing-nings-asynchronous-http-client-library/)）通过 HTTP 检索文档。这会在控制台产生大量调试输出，如下面的单个文档请求所示。

有谁知道如何关闭这个？我真的不需要看到这个输出。

我从 Scala 打来电话，如果这有什么不同的话。

```
15:07:14.273 [run-main] DEBUG c.n.h.c.p.n.NettyAsyncHttpProvider - 
Non cached request 
DefaultHttpRequest(chunked: false)
GET /api/search.json?q=foo HTTP/1.1
Host: www.documentcloud.org
Connection: keep-alive
Accept: */*
User-Agent: NING/1.0

using Channel 
[id: 0x2839ca40]

15:07:14.930 [New I/O client worker #1-1] DEBUG c.n.h.c.p.n.NettyAsyncHttpProvider - 

Request DefaultHttpRequest(chunked: false)
GET /api/search.json?q=foo HTTP/1.1
Host: www.documentcloud.org
Connection: keep-alive
Accept: */*
User-Agent: NING/1.0

Response DefaultHttpResponse(chunked: true)
HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
Content-Length: 10477
Connection: keep-alive
Vary: Accept-Encoding
Status: 200
X-Powered-By: Phusion Passenger (mod_rails/mod_rack) 3.0.13
ETag: "4f8f766d639dd84d014dfee3abb45de2"
X-Runtime: 611
Cache-Control: private, max-age=0, must-revalidate
Server: nginx/1.2.1 + Phusion Passenger 3.0.13 (mod_rails/mod_rack)

15:07:14.941 [New I/O client worker #1-1] DEBUG c.n.h.c.p.netty.NettyConnectionsPool - Adding uri: http://www.documentcloud.org:80 for channel [id: 0x2839ca40, /10.5.165.61:56133 => www.documentcloud.org/75.101.159.206:80]

15:07:16.921 [New I/O client worker #1-1] DEBUG c.n.h.c.p.n.NettyAsyncHttpProvider - Channel Closed: [id: 0x2839ca40, /10.5.165.61:56133 :> www.documentcloud.org/75.101.159.206:80] with attachment com.ning.http.client.providers.netty.NettyAsyncHttpProvider$DiscardEvent@63182c3d
15:08:13.924 [Timer-0] DEBUG c.n.h.c.p.netty.NettyConnectionsPool - Entry count for : http://www.documentcloud.org:80 : 0 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-07T19:31:58.637

从缩写的包名来看，在我看来 slf4j/logback 被用于记录这里。在这种情况下，只需尝试在类路径中包含一个 logback.xml 配置文件。类似的东西

```
<?xml version="1.0" encoding="UTF-8" ?>
<configuration>
    <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
        <encoder>
            <pattern>%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n</pattern>
        </encoder>
    </appender>

    <root level="INFO">
        <appender-ref ref="STDOUT"/>
    </root>

    <logger name="com.ning.http.client" level="WARN"/>
</configuration> 
```

上面的 xml 会导致 com.ning.http.client （和向下）下的任何内容仅省略警告，并且对输出更糟，这些输出将流式传输到 system.out。其他任何内容都会省略 INFO+，您可以在此处找到有关配置 logback 的更多信息：http: [//logback.qos.ch/manual/configuration.html](http://logback.qos.ch/manual/configuration.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-05-18T06:42:04.770

我知道的一个老问题迟到了，但我最近不得不关闭来自 netty 的烦人的重复信息级别日志记录：

```
[main] INFO com.ning.http.client.providers.netty.NettyAsyncHttpProvider - Number of application's worked threads is 16 
```

就我而言，我需要以编程方式禁用它。查看 slf4j org.slf4j.impl.SimpleLogger（netty 调用的记录器外观）我发现了一种简单的方法来控制您自己的启动代码中所有 SimpleLogger 实例的默认 slf4j 日志级别：

```
System.setProperty(SimpleLogger.DEFAULT_LOG_LEVEL_KEY, "warn"); 
```

或者只是我感兴趣的记录器实例：

```
System.setProperty(SimpleLogger.LOG_KEY_PREFIX + "com.ning.http.client", "warn"); 
```

该值可以是“trace”、“debug”、“info”、“warn”或“error”中的任何一个，默认为“info”。

# php - 使用 Woo Commerce 更改图像大小

> ID：11852702
> 
> 赞同：1
> 
> 时间：2012-08-07T19:24:24.177
> 
> 标签：php, wordpress, woocommerce

我有一个客户，他的产品是他拍摄的照片。商店，然后（使用 Woo Commerce）显示图像的缩略图，当您单击时，您将获得完整尺寸。

问题是后端只有一个缩略图大小设置，并且它设置为水平图像 - 但有些图像是垂直的。

[http://itestwebpageshere.biz/product-category/carribean/](http://itestwebpageshere.biz/product-category/carribean/)

如何独立调整垂直图像。即使您无法发布编码的解决方案，也欢迎提出想法。我已经为此绞尽脑汁了一段时间，似乎没有比重写 Woo Commerce 处理图像的方式更容易获得“垂直”选项的方法了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T23:15:32.673

所以这就是我的想法：

在 CSS 中，声明了产品图像的类：

```
width: 100%; 
```

我将其更改为：

```
max-width: 100%; 
```

修复背后的逻辑：

如果宽度为图像所在 div 元素的 100%，则水平图像的上限为最大值（在本例中为 220 像素），但垂直图像被拉伸到该宽度。Woocommerce 会自动缩放其高度以匹配，从而导致主题中断。如果我们将宽度切换为“自动”，那么图像将处于其自然宽度。这会导致主题再次中断，因为现在水平图像没有被限制在某个宽度（并且对于页面来说变得太宽）。

通过仅将最大宽度声明为 100%，我们做了两件事：我们将水平图像的宽度限制为它们所在的块元素的大小（220 像素）；我们让 CSS 自己整理 min-width。因为没有声明宽度或最小宽度，它们将被设置为“自动”。

这允许垂直图像位于其自然宽度，但将水平图像限制在框的宽度上，从而保持所有图像的缩放和我们的布局整洁和对齐。

# css - 打印 CSS 生成的渐变

> ID：11852703
> 
> 赞同：5
> 
> 时间：2012-08-07T19:24:32.743
> 
> 标签：css, printing

我一直试图搜索这个，但在任何地方都没有找到任何接近我的问题的东西。

有谁知道是否可以打印出 CSS 生成的线性渐变？我正在为我的老板模拟一个网站，它看起来非常好，但是当我尝试制作一个适合打印的页面时，渐变根本不显示。

作为参考，我要打印的是一个指示器栏，上面有一个滑块元素，以指示一个范围内的值的结果。

页面上的渐变看起来非常棒，但只是没有出现在打印对话框中。

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T19:28:07.630

如果我正确理解您的问题，听起来好像所有背景图像都没有打印正确？这是 IE 的默认行为。要打印背景图形（可能包括您的“渐变图形”，请转到打印 -> 页面设置并单击“打印背景颜色和图像”。
希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T19:28:07.810

这里不准确，但打印是在它自己的引擎中呈现的，除了浏览器引擎。

它通常（iPad 除外）过滤掉背景图像和某些类型的渲染材料以节省墨水。改变这一点的唯一方法是用户改变他或她自己的打印偏好。

没有 CSS 或 Javascript 方法可以实现这一点，除非您将页面呈现为图像并打印图像。

如果您愿意，我可以更详细地介绍，但除了 iPad 之外，像电子邮件格式这样的打印格式是一个棘手的领域。

# php - YouTube脚本返回播放列表缩略图给出错误？

> ID：11852706
> 
> 赞同：0
> 
> 时间：2012-08-07T19:24:37.770
> 
> 标签：php, youtube, simplexml

我在创建一个基本上从 YouTube 播放列表中获取视频的最新标题和缩略图的 PHP 脚本方面获得了很多帮助。这曾经有效，但不知何故它已经停止工作。有人可以帮忙吗？

php 脚本在[http://new.fearofmobs.com/playlist.php](http://new.fearofmobs.com/playlist.php)运行，我已打开错误报告。该脚本不会从 YouTube 播放列表返回缩略图并每小时缓存一次。编码

```
<?php error_reporting(E_ALL ^ E_NOTICE); ini_set('display_errors', 1);?>

<?php
$cachefile = 'videobrowser.txt';
$cache_timer = 3600 + @filemtime($cachefile);// files timestamp + 3600 seconds
if (file_exists($cachefile) && time() < $cache_timer ) {
}
else {
    $data = file_get_contents("http://gdata.youtube.com/feeds/api/playlists/C82EBDAC0429B6A2?orderby=published&max-results=12");
    $fh = fopen($cachefile, 'w') or die("can't open file");
    fwrite($fh, $data);
    fclose($fh);
}

$thumbnail ='';
$data = simplexml_load_file($cachefile);
$xml = simplexml_load_string($data);
foreach($xml->entry as $playlist){
    $media = $playlist->children('http://search.yahoo.com/mrss/');
    $attrs = $media->group->thumbnail[1]->attributes();
    $thumb = $attrs['url'];
    $attrs = $media->group->player->attributes();
    $video = $attrs['url'];
    $title = substr( $media->group->title, 21);
    $url = $video;
    parse_str( parse_url( $url, PHP_URL_QUERY ), $my_array_of_vars );
    $vid_Id = $my_array_of_vars['v'];

    ###################NEW CODE
    $toggle = 'hotlink';// replace 'hotlink' with 'null' to save images locally
    if ($toggle == 'hotlink'){
        $image_ID = $thumb;  // hotlink images from YouTube
    }
    else{
        ///////////////////////////////// Save Images To Local Webserver
        ///////////////////////////////// just in case  Youtube objects to hotlinking

        $image_ID = $vid_Id.".jpg"; /// or use sub folder for neatness ->  "images_folder/".$vid_Id.".jpg"
        $image_saved = @filemtime($image_ID);// @ is used to suppress the error caused by the image not having been seen before
        if (!$image_saved){/// if you can't find it on local server go fetch it and save to the sites server
            file_put_contents($image_ID, file_get_contents($thumb));

            //// you can delete the line below
            echo ' fecthed image >> '.$image_ID."<br>" ;
            //// you can delete the line above

        }//// close if image saved
    }        ##################### END NEW CODE

    $thumbnail .= '<div style="float:left; cursor:pointer;">
    <p class="crop"><a class="videobox various iframe" href="http://www.youtube.com/embed/' . $vid_Id . '?autoplay=1&amp;hd=1" onclick=swapper('. $vid_Id .')><img src="' .$image_ID  . '" title="' . $title . '" width="74" height="56"/></a></p></div>';
}
?>

<?php echo $thumbnail; ?> 
```

错误

```
Warning: simplexml_load_file(): videobrowser.txt:1: parser error : Document is empty in /hermes/waloraweb095/b2598/moo.fearofmobscom/fearofmobs2/playlist.php on line 16
Warning: simplexml_load_file():  in /hermes/waloraweb095/b2598/moo.fearofmobscom/fearofmobs2/playlist.php on line 16
Warning: simplexml_load_file(): ^ in /hermes/waloraweb095/b2598/moo.fearofmobscom/fearofmobs2/playlist.php on line 16
Warning: simplexml_load_file(): videobrowser.txt:1: parser error : Start tag expected, '<' not found in /hermes/waloraweb095/b2598/moo.fearofmobscom/fearofmobs2/playlist.php on line 16
Warning: simplexml_load_file():  in /hermes/waloraweb095/b2598/moo.fearofmobscom/fearofmobs2/playlist.php on line 16
Warning: simplexml_load_file(): ^ in /hermes/waloraweb095/b2598/moo.fearofmobscom/fearofmobs2/playlist.php on line 16
Warning: Invalid argument supplied for foreach() in /hermes/waloraweb095/b2598/moo.fearofmobscom/fearofmobs2/playlist.php on line 18 
```

如果有人需要任何进一步的信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T19:38:38.020

据我所知，您没有输入`else`填充的子句`videobrowser.txt`：

```
if (file_exists($cachefile) && time() < $cache_timer ) {
    // you are going here
}
else {
    // but you should be going here
    $data = file_get_contents("http://gdata.youtube.com/feeds/api/playlists/C82EBDAC0429B6A2?orderby=published&max-results=12");
    $fh = fopen($cachefile, 'w') or die("can't open file");
    fwrite($fh, $data);
    fclose($fh);
} 
```

我猜想在某些时候`videobrowser.txt`创建时没有内容（一个完全空的文件）。这意味着您不会重新填充文件，而是希望它被填充。

检查并查看是否`videobrowser.txt`存在，如果存在，则将其删除。

# javascript - 是否可以使用谷歌地图标记作为复选框？

> ID：11852710
> 
> 赞同：1
> 
> 时间：2012-08-07T19:24:59.357
> 
> 标签：javascript, jquery, google-maps

我想使用谷歌地图作为多个位置选择器。是否可以选择地图标记并将其用于提交表单？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T19:28:15.083

`onclick`您可以通过为图标分配事件处理程序来“伪造”它。创建一个包含空复选框图像的[自定义标记，然后](https://developers.google.com/maps/documentation/javascript/overlays#Icons)[分配一个`onclick`事件](https://developers.google.com/maps/documentation/javascript/events)：

*   A）将图标与复选框选中的图标交换为相同的图标
*   B）在页面的其他地方创建或修改`input`可用于逻辑的隐藏字段

# google-visualization - Google Visualization API 格式辅助 Y 轴与主 Y 轴不同

> ID：11852711
> 
> 赞同：20
> 
> 时间：2012-08-07T19:25:01.603
> 
> 标签：google-visualization

我有一些数据正在尝试使用 Google 可视化 API（Google 图表工具）显示。我已经能够创建图表，它看起来很棒，除了辅助 Y 轴应该显示为百分比而不是常规数字。这是我的代码和生成的图像。

```
google.load('visualization', '1', {packages: ['corechart']});

function drawVisualization() {
    //Some raw data (not necessarily accurate)'
    var data = google.visualization.arrayToDataTable([
        ['AuditPeriod', 'Audit Count', 'Fail Percentage'],
        ['02-11-2012',  0,      0],
        ['02-18-2012',  0,      0],
        ['02-25-2012',  0,      0],
        ...
        ['07-21-2012',  1476,   .233062],
        ['07-28-2012',  1651,   .253180],
        ['08-04-2012',  2217,   .210645]
    ]);

    var options = {
        vAxis: [0: {format: '#,###'}, 1: {format: '#%'}],
        hAxis: { title: "Week", format: 'm/d/y'},
        series: {
            0:{ type: "bars", targetAxisIndex: 0 },
            1: { type: "line", targetAxisIndex: 1}
        }
    }

    var chart = new google.visualization.ComboChart(document.getElementById('chart_div'));
    chart.draw(data, options);
}        
google.setOnLoadCallback(drawVisualization); 
```

![在此处输入图像描述](../Images/e32376b84c85e57a04fd1e544bf96fae.png)

如果我设置`vAxis:{format: '#%'}`，那么两个轴都被格式化为我不想要的百分比。有没有办法将第二个轴格式化为不同于第一个轴？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-09T23:12:23.077

[在Google Visualization Group](https://groups.google.com/d/topic/google-visualization-api/z_MnVZdVfek/discussion)上发布了这个问题并得到了答案。

> 豪门
> 
> 您几乎拥有它，在格式化多个轴时使用 vAxes 而不是 vAxis：
> 
> vAxes: { 0: {format: '#,###'}, 1: {format: '#%'} }​

# logging - 从遗留应用程序进行 OSGi 日志记录？

> ID：11852713
> 
> 赞同：0
> 
> 时间：2012-08-07T19:25:06.360
> 
> 标签：logging, log4j, osgi, slf4j, legacy

假设我有四个遗留罐子：

1.  我的库.jar
2.  我的应用程序.jar
3.  我的其他应用程序.jar
4.  log4j.jar

“我的应用程序”和“我的其他应用程序”是不相关的应用程序，都具有 main() 函数。他们都使用“my-library-app”中的各种库函数。这三个都通过 log4j 进行日志记录（真的是 slf4j，但我只是想让示例保持简单）。

目前，这两个应用程序设置了两个不同的 log4j 配置文件，这导致它们登录到两个不同的文件。

现在我想把所有东西都转换成 OSGi。因此，我将前三个分别捆绑为一个单独的捆绑包，将实际应用程序的 main() 转换为 Activators，然后捆绑或找到现有的 log4j 捆绑包。我在同一个 OSGi 框架中启动这两个应用程序。

但是现在这两个不同的应用程序不再登录到不同的文件！正确的？只有一个 log4j 实例在 JVM 中运行，它从一个 log4j.properties 文件中获取其配置。

所以也许不是分别捆绑我的四个罐子，我做了三个捆绑：

1.  我的图书馆
2.  我的应用程序加 log4j
3.  我的其他应用程序加 log4j

现在我可以为两个不同的应用程序获取不同的日志记录配置文件。但是来自我的图书馆的日志调用呢？My Library 捆绑包将锁定到 log4j 的两个副本之一，现在从 My Library 生成的所有日志消息都将出现在两个日志文件中的一个特定文件中 - 比如说我的应用程序中的那个。但即使它是我的图书馆由于来自我的其他应用程序的调用而发出的日志消息也是如此！他们会转到错误的日志文件。

所以也许捆绑：

1.  我的图书馆加 log4j
2.  我的应用程序加 log4j
3.  我的其他应用程序加 log4j

现在，我的库中的日志消息将转到他们自己的日志文件，我想这比其中一些转到错误的应用程序的日志文件要好，但仍然不是很好。该文件包含来自两个应用程序的日志消息，并且打算用于任一应用程序的日志文件都没有来自这些应用程序的所有日志消息。

所以也许捆绑：

1.  我的应用程序加我​​的库加 log4j
2.  我的其他应用程序加上我的图书馆加上 log4j

但是现在 OSGi 的意义何在？我没有分享我的图书馆或 log4j 的使用。实际上，情况可能会更糟——我必须将一堆 jar 包粘贴到我所有的实际应用程序包中，这仅仅是因为我想查看它们的日志消息与导致它们的应用程序相关联。

所以也许备份并尝试不同的东西：我认为这在 log4j 中是不可能的，但在（比如说）slf4j 中我可以回到原来的捆绑计划：

1.  我的图书馆
2.  我的应用
3.  我的其他应用
4.  日志4j

然后我做一些事情，比如把 MDC 信息放在每个线程中，说明线程来自哪个应用程序。对该 MDC 信息做出反应以确定它进入哪个日志文件。

但好像也行不通！从我的应用程序中的某个线程调用我的库中的某个函数可能会导致从我的库中生成一个新线程，这不一定与该 MDC 相关联。

更糟糕的是：我的图书馆可能有一些线程被任何使用我的图书馆的应用程序共享，所以不可能与一些这样的标记相关联。

所以，总而言之，我被难住了。任何建议将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T21:06:48.107

如果我理解正确：

*   您曾经有两个完全独立的应用程序，在不同的 JVM 中运行。他们确实共享了一个库，但仅在文件系统级别上，应用程序彼此不知道。
*   现在您使用一个 JVM，并且应用程序相互干扰（目前是 log4j，但可能还有其他问题），您想使用 OSGi 来解决这个问题。

我认为问题在于您将 OSGi 用作应用程序容器，就像将隔离不同应用程序的 servlet 容器一样。您希望 MyLibrary “属于” MyApp 或 MyOther 应用程序。据我所知，您真的不希望这些应用程序共享任何东西，只是为了在单个 JVM 中运行良好。

这并不是 OSGi 的真正目的，但我可以想到一些可能性：

*   新的 OSGi 规范*确实*支持这个（称为子系统），但它是非常新的，对于您的用例来说可能有点过于复杂，而且据我所知还没有实现。我暂时不建议走这条路。

*   你可以复制包，如果你给它们一个不同的符号名称，你可以依赖于特定的包，使用 Require-Bundle。然后我认为它应该工作，但坦率地说我认为它有点愚蠢。OSGi 然后什么都不添加，只是使事情复杂化，因为您最终会得到许多几乎相同的包。

*   您可以在单个 JVM 中启动两个 OSGi 实例，每个实例都有自己的捆绑包。这应该以一种优雅的方式将您的两个应用程序分开（[在此处](https://stackoverflow.com/questions/4673406/programatically-start-osgi-equinox)查看 Neil 的答案）。运行多个 OSGi 实例非常轻量级，您可以使用相同的包（在文件系统级别），如果您*确实*想要共享代码，您可以将这些包添加到 org.osgi.framework.system.packages.extra 属性。我认为这是你最好的选择。

*   最后，一些 OSGi 容器以专有方式支持这一点，例如 Eclipse Virgo 和 Apache Karaf。（在处女座称为“计划”，在[卡拉夫](http://karaf.apache.org/manual/2.2.5/users-guide/child-instances.html)称为“实例” ）。可能值得一看，这实际上取决于您的情况。

希望能帮助到你，

坦率

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T05:54:14.297

最好的方法是从两个应用程序中删除日志记录设置（至少从您在 OSGi 中部署的 jars 中删除）。然后将 pax 日志添加到您的 OSGi 容器。Pax 日志支持 OSGi 上所有常见的日志 API。它可以配置一个 log4j 配置。在配置中，您可以设置 log4j 记录器和附加器来区分这两个应用程序。因此，您可以随心所欲地登录一两个文件。

您还可以将您的 OSGi 应用程序部署到已经包含 pax 日志记录的 Apache Karaf 中。因此，您不必自己进行设置。

参见： [http ://team.ops4j.org/wiki/display/paxlogging/Pax+Logging](http://team.ops4j.org/wiki/display/paxlogging/Pax+Logging)

[http://karaf.apache.org/](http://karaf.apache.org/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T06:51:34.303

这并不是真正特定于 OSGi（正如 Frank 已经写过的那样）。

使用 MDC 通常是使用应用程序/运行时特定信息增强日志记录上下文的好方法。可能有机会使用 MDC。一些 MDC 实现（SLF4J`BasicMDCAdapter`和`LogbackMDCAdapter`）使用`InheritableThreadLocal`. 新线程从父线程继承 MDC。但是，这需要通过您正在使用的实际实现进行验证。

另一种选择是在生成新线程时复制/复制库代码中的 MDC。

第三种选择是允许应用程序代码将记录器注入库运行时。因此，库代码将使用应用程序代码传递的记录器，而不是按类记录器方法。

# jquery - jquery ui布局自定义

> ID：11852714
> 
> 赞同：7
> 
> 时间：2012-08-07T19:25:13.073
> 
> 标签：jquery, jquery-ui-layout

我喜欢使 ui-layout-west 部分固定宽度，并喜欢隐藏可调整大小的栏。我试过了，但我仍然看到 ui-layout-pane 的右边框。

在 CSS 上：

```
.ui-layout-west { 
    background: #F8F8FF  !important;  
    width: 300px !important;

} 
```

在 Java 脚本上：

```
west: {                  
    enableCursorHotkey: false,                 
    closable: false,
    resizable: false,
    panespacing: 0 
} 
```

关于如何删除 resiable bar 或隐藏它的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T19:40:48.847

尝试指定[spacing_open](http://layout.jquery-dev.net/documentation.cfm#Option_spacing_open)和[spacing_closed](http://layout.jquery-dev.net/documentation.cfm#Option_spacing_closed)选项，而不是`panespacing`：

```
west: {
    enableCursorHotkey: false,
    closable: false,
    resizable: false,
    spacing_open: 0,
    spacing_closed: 0
} 
```

# javascript - 摆脱由mootools和jquery冲突引起的IE浏览器中的Joomla警告错误

> ID：11852715
> 
> 赞同：0
> 
> 时间：2012-08-07T19:25:15.770
> 
> 标签：javascript, jquery, internet-explorer, mootools

我正在这里开发网站：http: [//extremeprodigy.com/projects/leelam36/](http://extremeprodigy.com/projects/leelam36/)

它仅在状态栏中显示 IE 浏览器中的错误，显示“完成但有错误”。网站是用 Joomla 和 mootools 构建的，并且正在使用 jquery。似乎有冲突，但我们无法解决。

当前开发者遇到了 mootools-compressed.js 文件的问题，错误描述如下：

```
TypeError:$(filter) || document).getElementsBySelector is not a function 
```

有什么方法可以通过在 IE 状态栏中显示的代码来抑制或禁用这些警告？

任何帮助深表感谢。

赛义德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T19:30:11.563

有两种解决方案：

*   你找到冲突并解决它。

*   您只依赖 jQuery 或 Mootools，而不是两者。

即使您加载的库越少越好，您也可以通过使用`jQuery()`选择器而不是`$()`使用 jQuery 的任何地方来解决冲突。这应该有效。如果您使用 jQuery 插件，请确保也将选择器替换到 `jQuery()`那里。

希望能帮助到你...

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-07T19:27:27.647

使用`try {} catch () {}`声明。

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/try...catch](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/try...catch)

# javascript - D3：二维阵列数据驱动的灰度图像显示

> ID：11852716
> 
> 赞同：11
> 
> 时间：2012-08-07T19:25:17.617
> 
> 标签：javascript, json, svg, d3.js, heatmap

有人知道如何使用 d3 显示灰度图像，即像素强度的二维数组吗？我似乎在任何地方都找不到它的任何例子，这会很棘手吗？任何帮助/链接/指针表示赞赏！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-07T23:43:56.973

如果只想显示图像，请使用[图像元素](http://www.w3.org/TR/SVG/struct.html#ImageElement)和“xlink:href”属性。例如：

```
svg.append("image")
    .attr("xlink:href", "my.png")
    .attr("width", 960)
    .attr("height", 500); 
```

如果您想为灰度图像着色，请参阅此[着色高度图示例](http://bl.ocks.org/3289530)，该示例使用分位数创建发散色标，并使用 HCL 插值以获得更好的感知：

[![彩色高度图](../Images/c00184aaf3e03f238b040a9d9b8f2577.png)](http://bl.ocks.org/3289530)

如果您有其他表示形式的数据，这些示例可能很有用：

*   [使用 SVG 矩形元素的 CSV 热图](http://bl.ocks.org/3202354)
*   [使用 Canvas 来自 JSON 的热图](http://bl.ocks.org/3074470)

最后，如果您有单个样本而不是预先计算的 2D 直方图，则需要在生成上述热图之一之前对数据进行分箱。

# security - 通过移动应用安全授权支付的协议（算法）

> ID：11852718
> 
> 赞同：2
> 
> 时间：2012-08-07T19:25:30.250
> 
> 标签：security, mobile, token, banking, onlinebanking

我正在寻找最安全的算法/协议来安全地授权通过移动应用程序完成的操作。

假设我正在开发一个需要用户授权某些操作的系统。您可以将其视为“银行平台”。假设有两种访问平台的方式：通过普通浏览器访问网络和通过智能手机上的应用程序访问移动设备。

一次性令牌和 SMS 代码适用于 Web 前端 - 当它与生成令牌/接收 SMS 的设备分开时。但是，我如何确保几乎可以肯定用于接收 SMS 或生成令牌的移动设备的安全性？更安全的是询问密码。如何修补这个明显的安全漏洞？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T10:45:12.840

您可能对移动支付的 PCI 指南感兴趣。阅读： [https ://www.pcisecuritystandards.org/documents/Mobile%20Payment%20Security%20Guidelines%20v1%200.pdf](https://www.pcisecuritystandards.org/documents/Mobile%20Payment%20Security%20Guidelines%20v1%200.pdf)

# php - 如何使用通配符字符串搜索选择属性，使用 PHP 的 SimpleXML 库

> ID：11852722
> 
> 赞同：1
> 
> 时间：2012-08-07T19:25:47.910
> 
> 标签：php, xml, simplexml

我想选择具有包含单词“Rock”的属性的所有节点，但我不确定如何使用 PHP 的 SimpleXML 库来完成此操作。我尝试将星号（通配符）字符附加到属性值，但这不起作用。

这是 XML 文件的片段。

```
<?xml version="1.0" encoding="Shift-JIS"?>
    <CDs>
        <Cat Type="Rock">
            <CD>
                <Name>Elvis Prestley</Name>
                <Album>Elvis At Sun</Album>
            </CD>
            <CD>
                <Name>Elvis Prestley</Name>
                <Album>Best Of...</Album>
            </CD>
        </Cat>
        <Cat Type="RocknRoll">
            <CD>
                <Name>The Beatles</Name>
                <Album>Best of...</Album>
            </CD>
        </Cat>
        <Cat Type="JazzBlues">
            <CD>
                <Name>B.B. King</Name>
                <Album>Singin' The Blues</Album>
            </CD>
            <CD>
                <Name>B.B. King</Name>
                <Album>The Blues</Album>
            </CD>
        </Cat>
    </CDs> 
```

这是我的PHP代码：

```
<?php

    $xml = new XMLReader();
    $xml->open("MusicCatalog.xml") or die ("can't open file");
    foreach($xml->xpath("Cat[@Type='Rock*']/@Type") as $c) {
        print($c) . PHP_EOL;
    }

?> 
```

非常感谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T19:43:55.620

我相信为此您可以使用`starts-with()`：

```
$xml->xpath("Cat[starts-with(@Type,'Rock')]/@Type") 
```

这[在我的演示](http://viper-7.com/ATUPGI)中有效，但是我使用的是 SimpleXML。没关系，因为我相信 SimpleXML 和 XMLReader 在底层都使用 libxml。此外，`XMLReader::xpath()`在我的测试机器上未定义，我在文档中没有看到它。

# parsing - 如何在 GLR 解析器中强制执行关联规则？

> ID：11852727
> 
> 赞同：4
> 
> 时间：2012-08-07T19:26:21.203
> 
> 标签：parsing, glr

我写一个 GLR 是为了好玩（同样，因为自从我上次尝试以来我理解了一些事情）。解析器现在正在工作，我正在实施消歧规则。我正在以一种似乎有效的方式处理优先级。现在我对关联性有点不知所措。

假设我有这样的语法：

```
E <- E '+' E (rule 1)
E <- E '-' E (rule 2)
E <- '0'     (rule 3)
E <- '1'     (rule 4) 
```

其中规则 1) 和 2) 具有相同的优先级和左结合性。

如果没有关联性处理，字符串 '1-1+0' 将生成两个解析树：

```
 1                2
  / \              / \
 /   \            /   \
2     3          4     1
|  \                   | \
4   4                  4  3 
```

其中数字表示用于减少的规则。正确的解析树是第一个，因此我只想保留这个。

我想知道如何通过算法有效地检测关联性侵犯。

我尝试的一种方法是查看在第一棵树的顶部节点处，规则 2 是规则 1 子列表中规则 3 的左侧，而在第二棵树中，规则 1 是规则 4 的右侧，因此由于规则2 和 1 是左关联的我只保留第一棵树。

然而，在更复杂的例子中，这并没有让我走得太远。此解决方案的一个限制是我只能根据与另一棵树的比较来丢弃树。

您认为我可以使用这种方法的改进版本找到解决方案吗？标准的做法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T21:42:22.683

要在算法上执行此操作，我将分为两组：包含规则 3 和 4 的 SIMPLE 和包含规则 1 和 2 的 COMPLEX。如果（COMPLEX）（子）根的最右边的孩子是 COMPLEX，则删除这棵树，因为它是（部分) 右结合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T19:29:24.777

在我看来，这最好通过整合到语法规则中来表达，彻底解决歧义：

```
E <- F
E <- E '+' F
E <- E '-' F
F <- '0'
F <- '1' 
```

当您设置为 (G)LR 时，应该可以同样好地表达左关联性和右关联性。由于单位推导，解析树深度的增加可以通过适当的后处理来解决。

这将完全避免发明一种新机制，并利用无论如何使用的 BNF 的表现力。我认为它需要强有力的论据来支持模棱两可的符号，以及如何解决的单独规范。

XQuery 语言规范在其定义过程中，从使用带有额外消歧规则的模糊 EBNF（参见[2002 年 4 月 30 日草案](http://www.w3.org/TR/2002/WD-xquery-20020430/#prod-Expr)）演变为放弃后者，转而使用包含优先级和关联性的明确规则（参见[2002 年 8 月 16 日草案](http://www.w3.org/TR/2002/WD-xquery-20020816/#prod-Expr)）。作为一名实施者，我非常感谢 - 它让我的生活更轻松。

# c# - 突出显示和编辑网格

> ID：11852735
> 
> 赞同：1
> 
> 时间：2012-08-07T19:26:44.760
> 
> 标签：c#, html, visual-studio-2008, gridview

我目前有一个通过 ac# 方法通过数据库填充的 gridview。

我想知道是否有一种方法可以在单击行上的任意位置时选择该行而不完全使用选择按钮。然后将该行中的信息发回并填充网页上的另一个区域。

有没有比gridview更好的网格？我应该外包给 jQuery 吗？还是我只需要gridview？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T20:25:41.037

你需要做的是开发一个行可点击的 GridView。最好的办法是按照链接中的说明进行操作。如果你对VB没问题，你可以沿着这条路走。用户也将其转换为 C#，在评论部分。生病包括它以防你没有看到它。

这是我保存的链接：http: [//aspadvice.com/blogs/joteke/archive/2006/01/07/14576.aspx](http://aspadvice.com/blogs/joteke/archive/2006/01/07/14576.aspx)

```
using System; 
using System.ComponentModel; 
using System.Configuration; 
using System.Web.UI; 
using System.Web.UI.WebControls; 

namespace CustomGridView 
{ 
 /// <summary> 
 /// Summary description for ClickableGridView 
 /// </summary> 
 public class ClickableGridView : GridView 
 { 
   public string RowCssClass 
   { 
     get 
     { 
       string rowClass = (string)ViewState["rowClass"]; 
       if (!string.IsNullOrEmpty(rowClass)) 
         return rowClass; 
       else 
         return string.Empty; 
     } 
     set 
     { 
       ViewState["rowClass"] = value; 
     } 
   } 

   public string HoverRowCssClass 
   { 
     get 
     { 
       string hoverRowClass = (string)ViewState["hoverRowClass"]; 
       if (!string.IsNullOrEmpty(hoverRowClass)) 
         return hoverRowClass; 
       else 
         return string.Empty; 
     } 
     set 
     { 
       ViewState["hoverRowClass"] = value; 
     } 
   } 

   private static readonly object RowClickedEventKey = new object(); 

   public event GridViewRowClicked RowClicked; 
   protected virtual void OnRowClicked(GridViewRowClickedEventArgs e) 
   { 
     if (RowClicked != null) 
       RowClicked(this, e); 
   } 

   protected override void RaisePostBackEvent(string eventArgument) 
   { 
     if (eventArgument.StartsWith("rc")) 
     { 
       int index = Int32.Parse(eventArgument.Substring(2)); 
       GridViewRowClickedEventArgs args = new GridViewRowClickedEventArgs(Rows[index]); 
       OnRowClicked(args); 
     } 
     else 
       base.RaisePostBackEvent(eventArgument); 
   } 

   protected override void PrepareControlHierarchy() 
   { 
     base.PrepareControlHierarchy(); 

     for (int i = 0; i < Rows.Count; i++) 
     { 
       string argsData = "rc" + Rows[i].RowIndex.ToString(); 
       Rows[i].Attributes.Add("onclick", Page.ClientScript.GetPostBackEventReference(this, argsData)); 

       if (RowCssClass != string.Empty) 
         Rows[i].Attributes.Add("onmouseout", "this.className='" + RowCssClass + "';"); 

       if (HoverRowCssClass != string.Empty) 
         Rows[i].Attributes.Add("onmouseover", "this.className='" + HoverRowCssClass + "';"); 
     } 
   } 
 } 

 public class GridViewRowClickedEventArgs : EventArgs 
 { 
   private GridViewRow _row; 

   public GridViewRowClickedEventArgs(GridViewRow aRow) 
     : base() 
   { 
     _row = aRow; 
   } 

   public GridViewRow Row 
   { 
     get 
     { return _row; } 
   } 
 } 

 public delegate void GridViewRowClicked(object sender, GridViewRowClickedEventArgs args); 
} 
```

# c# - 搜索 IEnumerable

> ID：11852736
> 
> 赞同：2
> 
> 时间：2012-08-07T19:26:52.793
> 
> 标签：c#, search, dynamic, find

我有一个枚举如下：

```
 IEnumerable<dynamic> collection = new 
 {  
    column1 = "1", column2 = "name", column3= "somevalue" 
 }, 
 new 
 { 
    column1 = "2",   column2 = "name2", column3= "somevalue2" 
 },
 new 
 { 
    column1 = "3", column2 = "name3", column3= "somevalue3" 
 } 
```

等等......动态类型中的列数也可以变化。列数可以或多或少。

现在，如果我想在这个 IEnumerable 集合中搜索 somevalue2，我需要在“column2”列的第 2 行（假设 column1 始终是主键）中找到以下信息。这将是将此动态集合转换为数据结构（.NET 列表/集合/哈希表等）的最佳方式，也是从集合中查询信息的最佳方式。该集合最多将是一页数据（25 行）。任何能够以超快速有效的方式搜索数据的代码片段和数据结构都将不胜感激。假设搜索词是“包含”匹配而不是完美匹配。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T19:51:14.583

这些是匿名类型；匿名类型是一种编译器特性，因此布局在编译时是**固定**不变的，因此它们不会发生变化。我建议：不要使用`dynamic`. 例如：

```
 var arr = new[] {
   new { column1 = "1", column2 = "name", column3= "somevalue" }, 
   new { column1 = "2", column2 = "name2", column3= "somevalue2" },
   new { column1 = "3", column2 = "name3", column3= "somevalue3" }
 }; 
```

这都是强类型和明确定义的。您可以使用常规操作，例如：

```
var item2 = arr.FirstOrDefault(x => x.column1 == "2"); 
```

再次，所有静态类型。

如果你想搜索所有的列，那么我建议像字典这样的东西更好：

```
 var arr = new[] {
   new Dictionary<string,string> { {"column1", "1"}, ... }, 
   new Dictionary<string,string> { {"column1", "2"}, ... }, 
   new Dictionary<string,string> { {"column1", "3"}, ... }, 
 }; 
```

既然你可以看看`.Values.Contains(...)`

* * *

编辑：有了评论，我*想*我更清楚地理解它；我正在描绘一个不透明的方法，它返回`IEnumerable<dynamic>`实际上是 POCO 类型（不是动态类型），我们想要检查字符串成员（任意名称）是否匹配。我们应该能够通过反射来做到这一点，但[FastMember](http://nuget.org/packages/FastMember)会使其更快：

```
static void Main()
{
    string search = "ame2";

    int rowIndex = 0;
    string[] names = null;
    TypeAccessor accessor = null;
    foreach(object row in GetData())
    {
        if(names == null)
        { // first row; get the property-names and build an accessor
            names = (from prop in row.GetType().GetProperties(BindingFlags.Public | BindingFlags.Instance)
                     where prop.PropertyType == typeof (string)
                     select prop.Name).ToArray();
            accessor = TypeAccessor.Create(row.GetType());
        }

        foreach(var name in names)
        {
            var val = accessor[row, name] as string;
            if(val != null && val.Contains(search))
            {
                Console.WriteLine("row {0}, col {1}, val {2}", rowIndex, name, val);
            }
        }
        rowIndex++;
    }
}
static IEnumerable<dynamic> GetData()
{
    yield return new {column1 = "1", column2 = "name", column3 = "somevalue"};
    yield return new {column1 = "2", column2 = "name2", column3 = "somevalue2"};
    yield return new {column1 = "3", column2 = "name3", column3 = "somevalue3"};
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T19:54:09.120

如果您真的希望它们成为每个项目中具有不同列的动态对象，则可以这样声明：

```
IEnumerable<dynamic> collection = new dynamic[]
                                        {
                                            new  
                                                {
                                                    column1 = "1",
                                                    column2 = "name",
                                                    column3 = "somevalue"
                                                },
                                            new
                                                {
                                                    column1 = "2",
                                                    column2 = "name2"
                                                },
                                            new
                                                {
                                                    column1 = "3",
                                                    column2 = "name3",
                                                    column3 = "somevalue3",
                                                    column4 = "fourthValue"
                                                }
                                        }; 
```

将其转换为列表很简单：

```
// create a list
var list = new List<dynamic>(collection); 
```

由于属性可能不存在，因此查找项目有点复杂：

```
// find an item
var itemOne = collection.Where(i =>
                                    {
                                        try
                                        {
                                            if (i.column1 == "1")
                                            {
                                                return true;
                                            }
                                        }
                                        catch
                                        {
                                            // ignore error, column doesn't exist
                                        }
                                        return false;
                                    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-06T09:43:28.680

我不知道你的 IEnumerable 下到底隐藏了什么，但最近我不得不搜索 Dapper 从一些作为动态 IEnumerable 返回的查询返回的结果（这就是我遇到这个问题的方式）。

就我而言，解决方案是投我的

```
IEnumerable<dynamic> 
```

作为

```
IEnumerable<IDictionary<String, Object>> 
```

但我认为它只适用于通过 dapper 获取的数据，例如：

```
db.Connection.Query(myQuery) 
```

对于这个特定的问题，这样的事情可能会起作用（尚未测试）：

```
IEnumerable<IDictionary<String, Object>> data = YourData.Cast<IDictionary<String, Object>>();
var row = data.SingleOrDefault(x => x.Where(y => y.Value.ToString() == "somevalue2")); 
```

我不知道这项工作的速度有多快，但我希望它能帮助你（或某人，看到这个问题是不久前发布的）。

# c++ - QSciScintilla 背景颜色

> ID：11852743
> 
> 赞同：3
> 
> 时间：2012-08-07T19:27:23.310
> 
> 标签：c++, qt, qscintilla

我正在尝试更改整个 QSciScintilla 编辑器小部件的颜色。我试过使用这个功能

```
QSciScintilla::setPaper(const QColor &c) 
```

但这似乎只改变了文本后面的颜色（见[截图](http://i.stack.imgur.com/bUz3A.png)）。如何更改整个框的背景颜色？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T20:20:50.837

如果设置了词法分析器，则调用`setPaper`小`QsciScintilla`部件将无效。

尝试使用`setDefaultPaper`当前词法分析器的功能。

# ef-code-first - 每个数据库上下文都应该在自己的 Visual Studio 项目中吗？

> ID：11852745
> 
> 赞同：0
> 
> 时间：2012-08-07T19:27:27.327
> 
> 标签：ef-code-first, entity-framework-migrations

我有一个名为 MyApp.DataAccess 的项目，其中包含多个数据库上下文。这从一个上下文开始，已经发展到三个（我的应用程序需要所有单独的数据库）。正如你可以想象的那样，我也有每个初始化器类，我现在也在尝试使用迁移。我可以看到这真的会弄乱我的 MyApp.DataAccess 项目。

我还有一个名为 MyApp.Model 的项目，其中包含模型类，这些模型类通常根据它们在上述每个上下文中的使用情况组织在文件夹中。

**我正在为如何最好地组织多个 DbContexts 和 Model 类而苦苦挣扎。**

我的直觉告诉我选项 1，但最佳做法是什么？

1.  为每个包含 DbContext、迁移和相关模型类的 DbContext 创建一个 MyApp.DataAccess.[ContextName] 项目。最终，我仍然需要一个 MyApp.Model 项目来表示非数据库模型类。

2.  为每个仅包含 DbContext 和迁移的 DbContext 创建一个 MyApp.DataAccess.[ContextName] 项目；继续将 MyApp.Model 用于所有模型类（按文件夹和子命名空间组织）。

3.  什么都不做——一个带有多个 DbContext、多个迁移等的 MyApp.DataAccess；一个 MyApp.Model，其中包含按文件夹组织的多个数据库的模型。

最佳实践/理想方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T19:31:58.047

你的问题应该从“为什么我应该有不同的 DbContexts”开始。在大多数情况下，不同的上下文意味着不同的数据模型、不同的——不相关的——职责，因此应该尽可能地分开。这意味着要执行不同的程序集。

# memory-leaks - JRE 崩溃 - Java 运行时环境检测到致命错误

> ID：11852747
> 
> 赞同：2
> 
> 时间：2012-08-07T19:27:32.760
> 
> 标签：memory-leaks, crash, stack-trace, java

我正在使用一个基于 JAVA 的开源爬虫，它在内存和磁盘之间处理数百万个 URI 对象。基本上该程序是内存密集型的。坠机事件千载难逢，我一直找不到原因。

粘贴错误日志的一部分，任何可能导致这种情况的指针？

```
# A fatal error has been detected by the Java Runtime Environment:
#
#  SIGSEGV (0xb) at pc=0x00002b97ee1a07df, pid=1445, tid=1102055744
#
# JRE version: 6.0_18-b07
# Java VM: Java HotSpot(TM) 64-Bit Server VM (16.0-b13 mixed mode linux-amd64 )
# Problematic frame:
# V  [libjvm.so+0x6227df]
#
# If you would like to submit a bug report, please visit:
#   http://java.sun.com/webapps/bugreport/crash.jsp
#

---------------  T H R E A D  ---------------

Current thread (0x0000000059db5000):  GCTaskThread [stack: 0x0000000041a00000,0x0000000041b01000] [id=1460]

siginfo:si_signo=SIGSEGV: si_errno=0, si_code=1 (SEGV_MAPERR), si_addr=0x00000000000000d5

Registers:
RAX=0x0000000000000008, RBX=0x0000000059df95f8, RCX=0x0000000000000005, RDX=0x00002aabee55cec0
RSP=0x0000000041affb60, RBP=0x0000000041affbd0, RSI=0x0000000059df95f0, RDI=0x00002aaab5c758b8
R8 =0x000000000000004b, R9 =0x0000000000000001, R10=0x00002aaaafbdfb01, R11=0x00002aabe4c0df38
R12=0x0000000000000001, R13=0x00002aabee55cec0, R14=0x00002aabe4c0e068, R15=0x0000000059df95f0
RIP=0x00002b97ee1a07df, EFL=0x0000000000010297, CSGSFS=0x0000000000000033, ERR=0x0000000000000004
  TRAPNO=0x000000000000000e

Top of Stack: (sp=0x0000000041affb60)
0x0000000041affb60:   0000000000000400 0000000059d9bfa0
0x0000000041affb70:   0000000000000005 01002aaab6b05998
0x0000000041affb80:   0000000041affbb0 0000000000000009
.
0x0000000041affd40:   0000000059db5810 0000000059db5820
0x0000000041affd50:   0000000059db5bf8 0000000041affd80 

Instructions: (pc=0x00002b97ee1a07df)
0x00002b97ee1a07cf:   41 5e 41 5f c9 c3 48 8b 4a 10 4c 89 fe 4c 89 ea
0x00002b97ee1a07df:   ff 91 d0 00 00 00 eb dc 49 8b 55 08 eb c9 4c 89 

Stack: [0x0000000041a00000,0x0000000041b01000],  sp=0x0000000041affb60,  free space=3fe0000000000000018k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
V  [libjvm.so+0x6227df]
V  [libjvm.so+0x6230b0]
V  [libjvm.so+0x6222d4]
V  [libjvm.so+0x23d872]
V  [libjvm.so+0x62583b]
V  [libjvm.so+0x365dda]
V  [libjvm.so+0x5da2af]

---------------  P R O C E S S  ---------------

Java Threads: ( => current thread )
  0x00002aac4c093800 JavaThread "JEEvictor" daemon [_thread_blocked, id=24783, stack(0x0000000046504000,0x0000000046605000)]
  0x000000005a3a2000 JavaThread "JEEvictor" daemon [_thread_blocked, id=24782, stack(0x0000000046605000,0x0000000046706000)]
  0x00002aac4c093000 JavaThread "JEEvictor" daemon [_thread_blocked, id=24781, stack(0x0000000046b0a000,0x0000000046c0b000)]
Other Threads:
  0x0000000059dfb000 VMThread [stack: 0x0000000041c02000,0x0000000041d03000] [id=1462]
  0x0000000059e32800 WatcherThread [stack: 0x00000000423c3000,0x00000000424c4000] [id=1469]

=>0x0000000059db5000 (exited) GCTaskThread [stack: 0x0000000041a00000,0x0000000041b01000] [id=1460]

VM state:at safepoint (normal execution)

VM Mutex/Monitor currently owned by a thread:  ([mutex/lock_event])
[0x0000000059d8b860] Threads_lock - owner thread: 0x0000000059dfb000
[0x0000000059d8bd60] Heap_lock - owner thread: 0x00002aac3c2dd000

Heap
 PSYoungGen      total 835840K, used 825021K [0x00002aabb3600000, 0x00002aabeffc0000, 0x00002aac33600000)
  eden space 809024K, 100% used [0x00002aabb3600000,0x00002aabe4c10000,0x00002aabe4c10000)
  from space 26816K, 59% used [0x00002aabe4c10000,0x00002aabe5baf538,0x00002aabe6640000)
  to   space 27136K, 6% used [0x00002aabee540000,0x00002aabee6ec138,0x00002aabeffc0000)
 PSOldGen        total 4096448K, used 3687089K [0x00002aaab3600000, 0x00002aabad670000, 0x00002aabb3600000)
  object space 4096448K, 90% used [0x00002aaab3600000,0x00002aab946ac6b0,0x00002aabad670000)
 PSPermGen       total 44608K, used 44199K [0x00002aaaae200000, 0x00002aaab0d90000, 0x00002aaab3600000)
  object space 44608K, 99% used [0x00002aaaae200000,0x00002aaab0d29ec0,0x00002aaab0d90000)

Dynamic libraries:
40000000-40009000 r-xp 00000000 fd:00 1116699                            /usr/java/jdk1.6.0_18/bin/java
40108000-4010a000 rwxp 00008000 fd:00 1116699                            /usr/java/jdk1.6.0_18/bin/java
40384000-40387000 ---p 40384000 00:00 0 
40387000-40485000 rwxp 40387000 00:00 0 
40647000-4064a000 ---p 40647000 00:00 0 
4064a000-40748000 rwxp 4064a000 00:00 0 
 2aac4cb1b000-2aac50000000 ---p 2aac4cb1b000 00:00 0 
2b97eda60000-2b97eda61000 rwxp 2b97eda60000 00:00 0 
2b97eda71000-2b97eda72000 rwxp 2b97eda71000 00:00 0 
2b97eda72000-2b97eda79000 r-xp 00000000 fd:00 1119007                    /usr/java/jdk1.6.0_18/jre/lib/amd64/jli/libjli.so
2b97eda79000-2b97edb7a000 ---p 00007000 fd:00 1119007                    /usr/java/jdk1.6.0_18/jre/lib/amd64/jli/libjli.so
2b97edb7a000-2b97edb7c000 rwxp 00008000 fd:00 1119007                    /usr/java/jdk1.6.0_18/jre/lib/amd64/jli/libjli.so
2b97edb7c000-2b97edb7e000 rwxp 2b97edb7c000 00:00 0 
2b97edb7e000-2b97ee332000 r-xp 00000000 fd:00 1119054                    /usr/java/jdk1.6.0_18/jre/lib/amd64/server/libjvm.so
2b97ee332000-2b97ee432000 ---p 007b4000 fd:00 1119054                    /usr/java/jdk1.6.0_18/jre/lib/amd64/server/libjvm.so
2b97ee432000-2b97ee5bc000 rwxp 007b4000 fd:00 1119054                    /usr/java/jdk1.6.0_18/jre/lib/amd64/server/libjvm.so
2b97ee5bc000-2b97ee5f5000 rwxp 2b97ee5bc000 00:00 0 
7fffc4df8000-7fffc4e0e000 rwxp 7ffffffe9000 00:00 0                      [stack]
ffffffffff600000-ffffffffffe00000 ---p 00000000 00:00 0                  [vdso]

VM Arguments:
jvm_args: -Dheritrix.home=/heritrix/heritrix-3.1.0 -Djava.protocol.handler.pkgs=org.archive.net -Dheritrix.out=/heritrix/heritrix-3.1.0/heritrix_out.log -Xmx6144M 
java_command: org.archive.crawler.Heritrix -p 8544 -b / -a user:pass
Launcher Type: SUN_STANDARD

Environment Variables:
JAVA_HOME=/usr/java/default
PATH=/apps/pig-0.9.0/bin:/usr/kerberos/bin:/usr/local/bin:/bin:/usr/bin:/usr/lpp/mmfs/bin:/home/ppra/bin:/usr/lpp/mmfs/bin:/usr/lpp/mmfs/bin
LD_LIBRARY_PATH=/usr/java/jdk1.6.0_18/jre/lib/amd64/server:/usr/java/jdk1.6.0_18/jre/lib/amd64:/usr/java/jdk1.6.0_18/jre/../lib/amd64
SHELL=/bin/bash
  ---------------  S Y S T E M  ---------------

OS:Red Hat Enterprise Linux Server release 5.4 (Tikanga)

uname:Linux 2.6.18-164.11.1.el5 #1 SMP Wed Jan 6 13:26:04 EST 2010 x86_64
libc:glibc 2.5 NPTL 2.5 
rlimit: STACK 10240k, CORE 0k, NPROC 268287, NOFILE 1024, AS infinity
load average:1.31 0.80 0.67

CPU:total 16 (8 cores per cpu, 1 threads per core) family 6 model 29 stepping 1, cmov, cx8, fxsr, mmx, sse, sse2, sse3, ssse3, sse4.1

Memory: 4k page, physical 32960544k(162620k free), swap 6291448k(6290568k free)

vm_info: Java HotSpot(TM) 64-Bit Server VM (16.0-b13) for linux-amd64 JRE (1.6.0_18-b07), built on Dec 17 2009 13:42:22 by "java_re" with gcc 3.2.2 (SuSE Linux)

time: Sat Aug  4 07:27:56 2012
elapsed time: 242358 seconds 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T21:39:08.047

好吧，SIGSEGV 表示一个段错误。您可能正在尝试读取从未初始化过的内容，或者垃圾收集器正在搞砸您。

# jquery - 单击两次时添加活动类而不删除

> ID：11852750
> 
> 赞同：1
> 
> 时间：2012-08-07T19:27:53.460
> 
> 标签：jquery, css

小提琴：http: [//jsfiddle.net/vuKqw/60/](http://jsfiddle.net/vuKqw/60/)

什么会允许“活动”类在单击两次时保持附加到项目？预期的行为是只有在单击新选项卡时才会更改类。否则，例如，如果同一个选项卡被单击两次，它应该保持“活动”状态，而不是在活动和非活动之间切换。

```
$('nav li a').click(function() {
    $(this).parent().toggleClass('active').siblings().removeClass('active');
}); 
```

参考：[单击菜单上的 Jquery 更改类](https://stackoverflow.com/questions/7389334/jquery-change-class-on-click-menu)

* * *

我最终把它分解成一个函数：http: [//jsfiddle.net/vuKqw/72/](http://jsfiddle.net/vuKqw/72/)

```
function tabchange() { 
 var parent = $(this).parent();
    if(!parent.hasClass('active')) {
        parent.addClass('active').siblings().removeClass('active');
}
};

$('nav li a').click(tabchange)​ 
```

谢谢@Madbreaks 的回答——这为我指明了正确的方向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T19:31:39.877

首先检查父级是否处于活动状态：

```
$('nav li a').click(function() {
    var parent = $(this).parent();
    if(!parent.hasClass('active')){
        parent.addClass('active').siblings().removeClass('active');
    }
}); 
```

注意使用 'addClass' 而不是 'toggleClass' - 在您确切知道自己在做什么的情况下更具体（目的只是添加类）。

干杯

# javascript - Javascript 事件，参数 "e" ， "event" 或其他

> ID：11852752
> 
> 赞同：2
> 
> 时间：2012-08-07T19:27:57.053
> 
> 标签：javascript, jquery, events

[我的代码](http://jsfiddle.net/kent93/9UNyH/)：

```
var transformString = Modernizr.prefixed('transform');
var inputDown, inputMove, inputUp;

if (window.Touch) {
  inputDown = "touchstart";
  inputMove = "touchmove";
  inputUp = "touchend";
}
else {
  inputDown = "mousedown";
  inputMove = "mousemove";
  inputUp = "mouseup";
}

var mouse = { startX: 0, startY: 0 };
var innerElement = $('.threedee');

function normalizedX(event){
    return window.Touch ? event.originalEvent.touches[0].pageX : event.pageX;
}    

function normalizedY(event){
    return window.Touch ? event.originalEvent.touches[0].pageY : event.pageY;
}

$(document).bind(inputDown, function(event){
  event.preventDefault();
  if(event.button === 2) return true; // right-click
  mouse.startX = normalizedX(event);
  mouse.startY = normalizedY(event);
  // store the transform state
  // globalMatrix.setMatrixValue($inner.css('-webkit-transform'));
  $(document)
   .bind(inputMove, move)
   .one(inputUp, function(){ $(document).unbind(inputMove); });
});

function move(event){
  event.preventDefault();
  var offsetX = normalizedX(event) - mouse.startX;
  var offsetY = normalizedY(event) - mouse.startY;
  if(event.shiftKey){
   offsetX = roundToMultiple(offsetX, 15);
   offsetY = roundToMultiple(offsetY, 15);
  }
  innerElement.css(transformString, 'rotateY('+offsetX+'deg) rotateX('+-offsetY+'deg)');
  /* move relative to the initial position
  $inner.css('-webkit-transform', globalMatrix.rotate(-offsetY, offsetX, 0));//*/
}

function roundToMultiple(number, multiple){
  var value = number/multiple
  ,   integer = Math.floor(value)
  ,   rest = value - integer;
  return rest > 0.5 ? (integer+1)*multiple : integer*multiple;
}​ 
```

试着只看javascript部分，我的问题就在那里。

我想知道为什么“事件”将作为脚本中大多数函数的参数和参数传递。有时它也可能是“e”。谁创造了他们？？？

我自己从来没有创建过任何负责这个“事件”变量的“事件”变量。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-07T19:30:40.867

jQuery 将调用您的事件函数，并将一个事件对象传递给参数。您无需担心创建变量，并且可以为参数指定任何您想要的名称（假设它是有效的变量名称）。

事件对象的创建应该被认为是“黑匣子”，你不应该担心它的确切结构或实现。只需按照文档和示例显示的操作即可，一切都会好起来的。

不过，关键是在函数中有一个参数；否则，您将无法访问 jQuery 传递的事件对象。

正如其他一些答案所述，避免使用 name 可能是个好主意`event`，因为如果您不小心，您可能会与某些浏览器上的同名全局变量发生冲突。相反，使用`e`或类似的，`NameError`如果你忘记在你的函数中有一个参数，你会得到一个。

```
// Wrong way #1
$('.class').bind('click', function() {
    event.preventDefault();    // may attempt to call .preventDefault() on window.event if it exists
});

// Wrong way #2 (fails fast since e probably won't be on the global object)
$('.class').bind('click', function() {
    e.preventDefault();        // ReferenceError thrown here
});

// The correct way
$('.class').bind('click', function(e) {    // or (event) if you want, but the first example can bite you
    e.preventDefault();        // no problem
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-07T19:30:01.983

jQuery 将规范化、错误修复和功能化的[jQuery 事件对象](http://api.jquery.com/category/events/event-object/)作为第一个参数传递给您的处理程序函数。你应该命名这个参数`e`（或类似的），这样你就不会意外地引用全局`window.event`（这是 chrome 和 IE 中的本机事件对象）并得到一个快速错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T19:30:29.620

引用`e`或是`event`回调函数的函数。它们本质上是由 jQuery 本身调用并传递一个变量作为结果（你在那里定义函数，但它调用它，假设它已定义）。这就是为什么它可以被定义为`e`或`event`（也可以是`purple_elephant`）。

**参考**：[http](http://en.wikipedia.org/wiki/Callback_(computer_programming) ://en.wikipedia.org/wiki/Callback_(computer_programming )

# api - 我可以使用 Foursquare API 查找场地的“一般用途”照片吗？

> ID：11852761
> 
> 赞同：1
> 
> 时间：2012-08-07T19:28:22.213
> 
> 标签：api, foursquare, photos

在我的应用程序中展示 Foursquare 场所时，我想展示每个场所的图像，该图像可以很好地代表该场所 - 管理层可能会使用这种照片来做广告，或者您可能会在餐厅评论中看到这种照片。这通常是内部的广角镜头。不出所料，foursquare 中的许多场地照片都是一群人，并且对这个地方的“感觉”知之甚少。有没有人想出一个好方法来获得更具代表性的照片？获取场地管理人员提供的照片将特别有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T16:55:51.290

目前无法区分场馆管理员和其他用户上传的照片。但是，您可以区分场地朋友拍摄的照片。其他人拍摄的照片和特定人拍摄的照片。

# android - 在 Canvas 上逆向绘制 Bitmap

> ID：11852762
> 
> 赞同：0
> 
> 时间：2012-08-07T19:28:24.520
> 
> 标签：android, android-canvas

如何反转绘制到画布中的图像？

我有以下内容：

```
 canvas.save();
        canvas.drawBitmap(image.current(), null, currentBounds(), Paints.BLANK);
        canvas.restore(); 
```

如何使当前图像在 x 轴上翻转到 currentBounds() 中？

我已经找到了一些表明使用 Matrix 的答案，但我想知道是否有更简单的方法？这样一个打开了一些标志的油漆。

编辑：

以下是我对矩阵转换的尝试：

```
 Rect currentBounds = currentBounds();

    currentBounds.offset((int)offset.x(), (int)offset.y());

    float scale = image.current().getWidth() / currentBounds.width();

    Matrix matrix = new Matrix();
    matrix.setScale(- scale - 1, scale + 1);
    matrix.postTranslate(currentBounds.left, currentBounds.top);

    canvas.drawBitmap(image.current(), matrix, Paints.BLANK);
    canvas.drawRect(currentBounds, Paints.STROKE_BLUE); 
```

本次抽签结果如下：

[https://dl.dropbox.com/u/28683814/game.png](https://dl.dropbox.com/u/28683814/game.png)

可以看出，精灵是从 0,0 向左绘制的，它没有完全完成 currentBounds()，我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T19:43:27.453

利用

```
canvas.scale(-1,0,width/2,height/2); 
```

正如我自己[在这里](https://stackoverflow.com/a/9610066/458968)的回答所提到的。

不过，我要指出的是，你需要大约一分钟时间来理解矩阵，它会让你成为一个更好的 Android 程序员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T23:39:46.473

好吧，我这样解决了：

```
 Rect currentBounds = currentBounds();
    currentBounds.offset((int)offset.x(), (int)offset.y());

    float scale = (float) currentBounds.width() / (float) image.current().getWidth();

    boolean leftMovement = movingLeft();

    Matrix matrix = new Matrix();
    matrix.setScale(leftMovement ? -scale : scale, scale);
    matrix.postTranslate(leftMovement ? currentBounds.right : currentBounds.left, currentBounds.top);

    canvas.drawBitmap(image.current(), matrix, Paints.BLANK); 
```

但是这个“leftMovement？currentBounds.right：currentBounds.left”看起来不正确

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T19:59:00.983

用这个。我认为这很容易。

```
 canvas.save();
        canvas.rotate(180, x, y);
        canvas.drawBitmap(bitmap, x, y, null);
        canvas.restore(); 
```

# javascript - 在关联数组的特定位置添加元素

> ID：11852763
> 
> 赞同：0
> 
> 时间：2012-08-07T19:28:25.050
> 
> 标签：javascript, associative-array

我很好奇使用 javascript 将元素添加到关联数组中，

```
var text=[{"key":"1", "value":"no"},{"key":"2", "value":"yes"} ]; 
```

如果我想在上面的数组中添加一个元素怎么办......说第二个位置，

```
text[1].key="4";
text[1].value="test"; 
```

这个方法我试过

```
test.splice(parseInt(1), 0 );
test[1].type="4";
test[1].value="test"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T19:32:38.220

要将元素添加到数组的末尾，您可以使用`.push()`.

```
text.push({key: 4, value: "no"}); 
```

`[0]`要在数组中的和项目之间插入一个项目`[1]`，您可以使用`.splice()`

```
text.splice(1, 0, {key: 4, value: "no"}); 
```

或者，插入一个空对象，然后填充它：

```
text.splice(1, 0, {});
text[1].key = 4;
text[1].value = "no"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T19:39:21.613

这是一些示例代码（您可以在[这里](http://jsfiddle.net/dPV83/20/)玩）：

```
function toString(array) {
    var output = '';
    for(i = 0; i < array.length; i++) {
        if(output != '')
            output += ' - ';
        output += array[i].key;
    }
    return output;
}

var array = [{"key":"1", "value":"no"},{"key":"2", "value":"yes"} ];

test = {"key":"4", "value":"test"};

alert(toString(array));
array.splice(1, 0, test);
alert(toString(array)); 
```

该`array.splice()`方法采用以下参数（取自[此处](http://www.w3schools.com/jsref/jsref_splice.asp)）：

```
array.splice(index,howmany,item1,.....,itemX) 
```

*   `index`：一个整数，指定在什么位置添加/删除项目，使用负值指定从数组末尾开始的位置。
*   `howmany`：要删除的项目数。如果设置为 0，则不会删除任何项目。
*   `itemN`：要添加到数组中的新项目。

* * *

**编辑**

要从数组中删除元素，您可以通过`splice`以下方式使用相同的函数：

```
array.splice(1, 1);
alert(toString(array)); 
```

在这里，我们指示`splice`在位置`1`，删除`1`元素，但由于我们没有提供任何要插入的元素，因此没有插入任何元素，这导致在位置`1`删除的单个元素。

# xml - 使用 maxLenth=1 的嵌套元素时生成示例 XML 失败

> ID：11852776
> 
> 赞同：2
> 
> 时间：2012-08-07T19:29:23.223
> 
> 标签：xml, visual-studio-2012, visual-studio-2013, xsd

我正在尝试从下面的 XML 架构 (.xsd) 在 Visual Studio 2012 中“生成示例 XML”（通过 XML 架构设计器、内容视图），但出现以下错误

> StartIndex 不能小于零。参数名称：startIndex

错误是由于对包含在 3 级嵌套列表中的元素的*maxLength="1"限制造成的。*

```
root
  Level 0 List
    Level 1 List
      Level 2 List
        Level 2 Item Element (maxLength=1) 
```

如果我将 maxLength 更改为 2 或更大，错误就会消失，或者如果我删除列表级别，错误就会消失。（如果我改为将 maxLength=1 项推送到更深层次的列表，错误仍然会发生。）

知道我可能做错了什么吗？我缺少一个架构概念吗？或者，它可能是 VS 2012 的错误吗？

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema id="Test"
    targetNamespace="http://tempuri.org/Test.xsd"
    elementFormDefault="qualified"
    xmlns="http://tempuri.org/Test.xsd"
    xmlns:mstns="http://tempuri.org/Test.xsd"
    xmlns:xs="http://www.w3.org/2001/XMLSchema">

  <xs:element name="root">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="level0List">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="level0Item" type="level0Item" maxOccurs="unbounded" />
            </xs:sequence>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element>

  <xs:complexType name="level0Item">
    <xs:sequence>
      <xs:element name="level1List">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="level1Item" type="level1Item" maxOccurs="unbounded" />            
          </xs:sequence>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
  </xs:complexType>

  <xs:complexType name="level1Item">
    <xs:sequence>
      <xs:element name="level2List">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="level2Item" type="level2Item" maxOccurs="unbounded" />
          </xs:sequence>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
  </xs:complexType>

  <xs:complexType name="level2Item">
    <xs:sequence>
      <xs:element name="level2Element">
        <xs:simpleType>
          <xs:restriction base="xs:string">
            <xs:maxLength value="1" />
          </xs:restriction>
        </xs:simpleType>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
</xs:schema> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:21:19.723

Saxon 模式处理器没有报告此文档的错误。我觉得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-23T09:22:24.673

我在使用 VS2010 2012 和 2015 时遇到了同样的错误。意识到给我的 XSD 有以下内容：

```
<xs:simpleType name="Blank">
    <xs:annotation>
        <xs:documentation>Blank</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
        <xs:minLength value="0"/>
        <xs:maxLength value="0"/>
    </xs:restriction>
</xs:simpleType> 
```

将 maxLength 更改为 1 并排序 :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-05T15:57:53.850

我的 XSD 似乎是同样的错误。我必须将 1 更改为 2 才能解决问题（CTT_POINT_INAPTITURE）。是否仍然存在 VS 2017 错误？

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified" attributeFormDefault="unqualified">
  <xs:element name="CML_SOQUIJ">
    <xs:complexType>
      <xs:sequence minOccurs="0" maxOccurs="unbounded">
        <xs:element name="CML_SOQUIJ_TYPE">
          <xs:complexType>
            <xs:sequence minOccurs="0" maxOccurs="unbounded">
              <xs:element name="CML_SOQUIJ_DOSSIER_TYPE">
                <xs:complexType>
                  <xs:sequence maxOccurs="unbounded">
                    <xs:element name="COUR_MUNICIPALE" minOccurs="1">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:maxLength value="50"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="CTT_NO_DOSSIER" nillable="true" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:maxLength value="9"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="CTT_NO_CONSTAT" minOccurs="1">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:maxLength value="10"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="OGN_NOM" minOccurs="1">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:maxLength value="50"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="CTT_DATE_FERMETURE" nillable="true" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:pattern value="(\d\d\d\d)-(0[1-9]|1[012])-(0[1-9]|1[0-9]|2[0-9]|3[01])"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="TLN_CODE" minOccurs="1">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:maxLength value="5"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="TLN_DESCRIPTION" minOccurs="1">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:maxLength value="30"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="AAT_ETAPE_ACTUELLE" minOccurs="1">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:maxLength value="60"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="CTT_STATUT" minOccurs="1">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:maxLength value="3"/>
                            <xs:enumeration value="ACT"/>
                            <xs:enumeration value="ENT"/>
                            <xs:enumeration value="SUS"/>
                            <xs:enumeration value="FER"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>

                    <xs:element name="CAN_DATE_INFRACTION" minOccurs="1">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:pattern value="(\d\d\d\d)-(0[1-9]|1[012])-(0[1-9]|1[0-9]|2[0-9]|3[01])"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>

                    <xs:element name="CAN_HEURE_INFRACTION" nillable="true" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:pattern value="(0[0-9]|1[0-9]|2[0123]):(0[0-9]|1[0-9]|2[0-9]|3[0-9]|4[0-9]|5[0-9])"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>

                    <xs:element name="CTT_POINT_INAPTITURE" nillable="true" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:maxLength value="1"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>

                    <xs:element name="CTT_VITESSE_CONSTATEE" type="xs:integer" nillable="true" minOccurs="0"/>

                    <xs:element name="CTT_VITESSE_ZONE" type="xs:integer" nillable="true" minOccurs="0"/>
                    <xs:element name="CTT_ENDROIT" nillable="true" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:maxLength value="70"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="DTE_AMENDE" minOccurs="1">
                      <xs:simpleType>
                        <xs:restriction base="xs:decimal">
                          <xs:totalDigits value="10"/>
                          <xs:fractionDigits value="2"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="CTT_NO_IMMATRICULATION" nillable="true" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:maxLength value="8"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="CTT_PVE_IMMAT_CODE" nillable="true" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:maxLength value="2"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="CTT_GENRE_DEFENDEUR" nillable="true" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:maxLength value="3"/>
                            <xs:enumeration value="MON"/>
                            <xs:enumeration value="MME"/>
                            <xs:enumeration value="CIE"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="CTT_NOM_DEFENDEUR" minOccurs="1">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:maxLength value="60"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="CTT_PRENOM_DEFENDEUR" nillable="true" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:maxLength value="30"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="CTT_DATE_NAISSANCE_DEF" nillable="true" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:pattern value="(\d\d\d\d)-(0[1-9]|1[012])-(0[1-9]|1[0-9]|2[0-9]|3[01])"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="ADR_NO_CIVIQUE" nillable="true" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:maxLength value="10"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="ADR_ADRESSE" minOccurs="1">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:maxLength value="60"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="ADR_VILLE" minOccurs="1">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:maxLength value="30"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="ADR_PVE_CODE" nillable="true" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:maxLength value="2"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="ADR_CODE_POSTAL" nillable="true" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:maxLength value="10"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="ADR_DATE_MAJ" nillable="true" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:pattern value="(\d\d\d\d)-(0[1-9]|1[012])-(0[1-9]|1[0-9]|2[0-9]|3[01])"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="CTT_PERMIS_CONDUIRE" nillable="true" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:maxLength value="15"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="CTT_PVE_PERMIS_CODE" nillable="true" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:maxLength value="2"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="DTE_SOLDE_AMENDE" minOccurs="1">
                      <xs:simpleType>
                        <xs:restriction base="xs:decimal">
                          <xs:totalDigits value="10"/>
                          <xs:fractionDigits value="2"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="DTE_SOLDE_FRAIS" minOccurs="1">
                      <xs:simpleType>
                        <xs:restriction base="xs:decimal">
                          <xs:totalDigits value="10"/>
                          <xs:fractionDigits value="2"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="DTE_SOLDE_DU" minOccurs="1">
                      <xs:simpleType>
                        <xs:restriction base="xs:decimal">
                          <xs:totalDigits value="10"/>
                          <xs:fractionDigits value="2"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="CTT_MRV_NOM" nillable="true" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:maxLength value="30"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="CTT_MVE_NOM" nillable="true" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:maxLength value="30"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="CTT_ANNEE_FAB_VEHICULE" nillable="true" minOccurs="0">
                      <xs:simpleType>
                        <xs:restriction base="xs:integer">
                          <xs:maxInclusive value="9999"/>
                          <xs:minInclusive value="0"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="DATEMAJ" minOccurs="1">
                      <xs:simpleType>
                        <xs:restriction base="xs:string">
                          <xs:pattern value="(\d\d\d\d)-(0[1-9]|1[012])-(0[1-9]|1[0-9]|2[0-9]|3[01])"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                    <xs:element name="ACCUSATION" minOccurs="1" maxOccurs="1">
                      <xs:complexType>
                        <xs:sequence maxOccurs="unbounded">
                          <xs:element name="CML_SOQUIJ_ACCUSATION_TYPE" minOccurs="1">
                            <xs:complexType>
                              <xs:sequence maxOccurs="unbounded">
                                <xs:element name="CAN_NUMERO" minOccurs="1">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:integer">
                                      <xs:maxInclusive value="9"/>
                                      <xs:minInclusive value="0"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="CAN_ALI_RGT_CODE" minOccurs="1">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:maxLength value="10"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="CAN_ALI_NUMERO" minOccurs="1">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:maxLength value="20"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="CAN_ALI_DESCRIPTION" minOccurs="1">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:maxLength value="50"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="CTT_LIBELLE_INFRACTION" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:maxLength value="2000"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="PCE_DATE_PLAIDOYER" nillable="true" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:pattern value="(\d\d\d\d)-(0[1-9]|1[012])-(0[1-9]|1[0-9]|2[0-9]|3[01])"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="PCE_TYPE_PLAIDOYER" nillable="true" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:maxLength value="1"/>
                                      <xs:enumeration value="C"/>
                                      <xs:enumeration value="N"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="ITT_NOM_PRENOM_AVO" nillable="true" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:maxLength value="120"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="JUM_DATE_JUGEMENT" nillable="true" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:pattern value="(\d\d\d\d)-(0[1-9]|1[012])-(0[1-9]|1[0-9]|2[0-9]|3[01])"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="JUM_CJN_IND_CULPABILITE" nillable="true" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:maxLength value="1"/>
                                      <xs:enumeration value="O"/>
                                      <xs:enumeration value="N"/>
                                      <xs:enumeration value="I"/>
                                      <xs:enumeration value=""/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="JUM_CJN_DESCRIPTION" nillable="true" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:maxLength value="60"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="PVL_IND_DELIBERE" nillable="true" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:maxLength value="1"/>
                                      <xs:enumeration value="O"/>
                                      <xs:enumeration value="N"/>
                                      <xs:enumeration value="I"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="PVL_DATE_DELIBERE" nillable="true" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:pattern value="(\d\d\d\d)-(0[1-9]|1[012])-(0[1-9]|1[0-9]|2[0-9]|3[01])"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="DATEMAJ" nillable="true" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:pattern value="(\d\d\d\d)-(0[1-9]|1[012])-(0[1-9]|1[0-9]|2[0-9]|3[01])"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="AUDITION" minOccurs="0" maxOccurs="1">
                      <xs:complexType>
                        <xs:sequence maxOccurs="unbounded">
                          <xs:element name="CML_SOQUIJ_AUDITION_TYPE" minOccurs="0">
                            <xs:complexType>
                              <xs:sequence maxOccurs="unbounded">
                                <xs:element name="ADE_SCE_DATE_SEANCE" nillable="true" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:pattern value="(\d\d\d\d)-(0[1-9]|1[012])-(0[1-9]|1[0-9]|2[0-9]|3[01])"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="ADE_SCE_HEURE_SEANCE" nillable="true" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:pattern value="(0[0-9]|1[0-9]|2[0123]):(0[0-9]|1[0-9]|2[0-9]|3[0-9]|4[0-9]|5[0-9])"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="ADE_SCE_SAE_NO_SALLE" nillable="true" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:integer">
                                      <xs:maxInclusive value="9"/>
                                      <xs:minInclusive value="0"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="ADE_EAE_DESCRIPTION" nillable="true" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:maxLength value="50"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="ADE_SCE_PROCUREUR" nillable="true" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:maxLength value="120"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="ITT_NOM_PRENOM_AVO" nillable="true" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:maxLength value="120"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="PVL_IND_PRESENCE_DEF" nillable="true" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:maxLength value="1"/>
                                      <xs:enumeration value="O"/>
                                      <xs:enumeration value="N"/>
                                      <xs:enumeration value="I"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="PVL_IND_PRESENCE_AVO" nillable="true" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:maxLength value="1"/>
                                      <xs:enumeration value="O"/>
                                      <xs:enumeration value="N"/>
                                      <xs:enumeration value="I"/>
                                      <xs:enumeration value="A"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                                <xs:element name="AUDIDATEMAJ" nillable="true" minOccurs="0">
                                  <xs:simpleType>
                                    <xs:restriction base="xs:string">
                                      <xs:pattern value="(\d\d\d\d)-(0[1-9]|1[012])-(0[1-9]|1[0-9]|2[0-9]|3[01])"/>
                                    </xs:restriction>
                                  </xs:simpleType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

# oauth-2.0 - Soundcloud OAuth2 API：用户连接后出现 invalid_scope 错误

> ID：11852778
> 
> 赞同：4
> 
> 时间：2012-08-07T19:29:42.047
> 
> 标签：oauth-2.0, soundcloud

我正在尝试实现 Soundcloud 连接并遇到一个奇怪的问题。

我要做的第一件事是将我的用户发送到

```
https://soundcloud.com/connect?client_id=MY_CLIENT_ID&redirect_uri=http://myredirecturl.example.com&state=RANDOM_STRING&display=page&response_type=code&scope=email 
```

当用户连接时，他们会被重定向到

```
http://myredirecturl.example.com?error=invalid_scope&error_description=The+requested+scope+is+invalid%2C+unknown%2C+or+malformed.&state=RANDOM_STRING 
```

如果我使用`scope=*`.

但是，如果我使用`scope=non-expiring`它可以让我通过，但我需要用户电子邮件，并且这种类型的范围没有足够的授权。

我认为这与我的应用程序处于开发模式有关，但[Soundcloud 的 Osman 说它没有](https://twitter.com/soundcloudapi/status/232898121162706944)。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T21:24:07.197

“电子邮件”范围不适用于所有集成。它用于一些自定义集成，这些集成为我们提供了可接受的服务条款/隐私政策。无法使用 SoundCloud API 获取用户的电子邮件地址。

但是，您应该能够使用“*”范围来获取即将到期的访问令牌。我会与我们的应用团队核实，看看为什么这会给你一个错误。一旦我在那里获得更多信息，我将编辑我的答案。

出于您的目的，我将保留“非过期”范围，并简单地提示用户输入他们的电子邮件地址（为他们提供同意您的使用条款/隐私信息的方式）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-04T13:02:58.760

使用`scope=*`有时不起作用，因为 url 没有正确编码。如果您在使用通配符时遇到此错误`*`，请尝试使用[urlencode()](http://php.net/manual/en/function.urlencode.php)之类的函数（对于 PHP）正确编码 url。

# java - 用 JTabbedPane 中的图标替换选项卡

> ID：11852780
> 
> 赞同：1
> 
> 时间：2012-08-07T19:29:43.930
> 
> 标签：java, swing, icons, jtabbedpane, changelistener

有人可以就如何将选项卡（仅在选项卡本身，而不是选项卡的内容区域）`JTabbedPane`更改为图标提供建议。可以在选择选项卡时设置另一个图标，在鼠标悬停时设置另一个图标，在未选择选项卡时设置另一个图标。我想在文本下方的完整选项卡宽度和高度上显示此图标，类似于将整个按钮替换为图像时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T19:44:14.540

看一下[setTabComponent](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTabbedPane.html#setTabComponentAt%28int,%20java.awt.Component%29)，这将允许您为该选项卡提供自定义渲染器

You would then need to monitor changes to the tab selection via the [changeListener](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTabbedPane.html#addChangeListener%28javax.swing.event.ChangeListener%29) , when the tab changes, you would use the [getTabComponentAt](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTabbedPane.html#getTabComponentAt%28int%29) method to get the renderer and update it

# javascript - JSON解析和字符串化错误

> ID：11852781
> 
> 赞同：0
> 
> 时间：2012-08-07T19:29:50.777
> 
> 标签：javascript, jquery, json

请你帮忙 - 为什么这个 JSON 不起作用

我的页面的头部看起来像这样

```
<script src="Scripts/json2.js" type="text/javascript"></script>
<script src="Scripts/jquery-1.4.1.js" type="text/javascript"></script>
<script src="Scripts/JScript.js" type="text/javascript"></script> 
```

我的ajax看起来像这样

```
var p = { "myText": JSON.stringify(tableOBJ) };

$.ajax({
    type: "POST",
    url: "Default2AJAX.aspx",
    data: p,
    success: function (data) {

        var obj = JSON.parse(data);

    }
}); 
```

在 Firefox 中，我在 JSON 上收到此错误

> 错误：语法错误
> 源文件：/Scripts/json2.js
> 行：4
> 源代码：
> `<!DOCTYPE html>`

在 IE 7 中我得到`JSON undefined`

在即 8 我得到

> SCRIPT1002：语法错误 json2.js，第 4 行字符 1

在即 9 我得到

> SCRIPT1002：语法错误 json2.js，第 4 行字符 1

我该如何解决？因为我已经添加了 json2.js 但是如果浏览器不需要它会出现它会引发错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T19:40:39.220

更改 Scripts/json2.js 以指向 json2.js 的真实副本。目前它指向一个 HTML 文档（可能是 404 错误页面）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T19:41:24.093

我敢打赌，您的服务器上不存在*“Scripts/JScript.js”*`Source Code: <!DOCTYPE html>`文件，并且这是一个 404 错误页面。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-21T04:56:09.457

@Hello-Word 和 @Rocket Hazmat：

github链接上的文件是一个html文件。解决问题：

1.  下载 json2.js
2.  将文件扩展名更改为 html
3.  在网络浏览器中打开文件
4.  向下滚动页面，复制 javascript 代码部分，并将其保存为 json2.js 的新文件

顺便说一句，感谢 Douglas 的 json 解析器。让我的生活更轻松。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T19:33:27.753

您正在使用的 json2.js 文件中似乎存在错误——至少 IE 8 和 9 同意该文件的第 4 行存在错误。

# tsql - T-SQL 循环查询结果

> ID：11852782
> 
> 赞同：88
> 
> 时间：2012-08-07T19:29:50.837
> 
> 标签：tsql

我运行一个查询`select @id=table.id from table`，我需要遍历结果，以便我可以为每一行执行一个存储过程`exec stored_proc @varName=@id,@otherVarName='test'`

如何在 T-SQL 脚本中执行此操作？

* * *

## 回答 #1

> 赞同：190
> 
> 时间：2012-08-07T19:38:39.937

在这种情况下，您可以使用 CURSOR：

```
DECLARE @id INT
DECLARE @name NVARCHAR(100)
DECLARE @getid CURSOR

SET @getid = CURSOR FOR
SELECT table.id,
       table.name
FROM   table

OPEN @getid
FETCH NEXT
FROM @getid INTO @id, @name
WHILE @@FETCH_STATUS = 0
BEGIN
    EXEC stored_proc @varName=@id, @otherVarName='test', @varForName=@name
    FETCH NEXT
    FROM @getid INTO @id, @name
END

CLOSE @getid
DEALLOCATE @getid 
```

*修改为显示表格中的多个参数。*

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-08-07T19:40:34.540

你可以这样做：

```
create procedure test
as
BEGIN

    create table #ids
    (
        rn int,
        id int
    )

    insert into #ids (rn, id)
    select distinct row_number() over(order by id) as rn, id
    from table

    declare @id int
    declare @totalrows int = (select count(*) from #ids)
    declare @currentrow int = 0

    while @currentrow <  @totalrows  
    begin 
        set @id = (select id from #ids where rn = @currentrow)

        exec stored_proc @varName=@id, @otherVarName='test'

        set @currentrow = @currentrow +1
    end  

END 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-10-23T08:48:53.450

我更喜欢的解决方案是 Microsoft KB 111401 [http://support.microsoft.com/kb/111401](http://support.microsoft.com/kb/111401)。

该链接引用了 3 个示例：

本文介绍了可用于在存储过程、触发器或 Transact-SQL 批处理中模拟类似游标的 FETCH-NEXT 逻辑的各种方法。

```
/*********** example 1 ***********/ 

declare @au_id char( 11 )

set rowcount 0
select * into #mytemp from authors

set rowcount 1

select @au_id = au_id from #mytemp

while @@rowcount <> 0
begin
    set rowcount 0
    select * from #mytemp where au_id = @au_id
    delete #mytemp where au_id = @au_id

    set rowcount 1
    select @au_id = au_id from #mytemp
end
set rowcount 0

/********** example 2 **********/ 

declare @au_id char( 11 )

select @au_id = min( au_id ) from authors

while @au_id is not null
begin
    select * from authors where au_id = @au_id
    select @au_id = min( au_id ) from authors where au_id > @au_id
end

/********** example 3 **********/ 

set rowcount 0
select NULL mykey, * into #mytemp from authors

set rowcount 1
update #mytemp set mykey = 1

while @@rowcount > 0
begin
    set rowcount 0
    select * from #mytemp where mykey = 1
    delete #mytemp where mykey = 1
    set rowcount 1
    update #mytemp set mykey = 1
end
set rowcount 0 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-06-19T06:53:39.990

```
DECLARE @id INT
DECLARE @name NVARCHAR(100)
DECLARE @getid CURSOR

SET @getid = CURSOR FOR
SELECT table.id,
       table.name
FROM   table

WHILE 1=1
BEGIN

    FETCH NEXT
    FROM @getid INTO @id, @name
    IF @@FETCH_STATUS < 0 BREAK

    EXEC stored_proc @varName=@id, @otherVarName='test', @varForName=@name

END

CLOSE @getid
DEALLOCATE @getid 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-11-15T11:35:53.860

```
DECLARE @id INT
DECLARE @filename NVARCHAR(100)
DECLARE @getid CURSOR

SET @getid = CURSOR FOR
SELECT top 3 id,
filename 
FROM  table

OPEN @getid
WHILE 1=1
BEGIN

    FETCH NEXT
    FROM @getid INTO @id, @filename
    IF @@FETCH_STATUS < 0 BREAK

    print @id

END

CLOSE @getid
DEALLOCATE @getid 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-10-12T07:45:23.787

试试这个：

```
declare @i tinyint = 0,
    @count tinyint,
    @id int,
    @name varchar(max)

select @count = count(*) from table
while (@i < @count)
begin
    select @id = id, @name = name from table
    order by nr asc offset @i rows fetch next 1 rows only

    exec stored_proc @varName = @id, @otherVarName = 'test', @varForName = @name

    set @i = @i + 1
end 
```

# c# - 在 Windows N 版本上使用 WMPLib

> ID：11852784
> 
> 赞同：1
> 
> 时间：2012-08-07T19:29:58.077
> 
> 标签：c#, windows, dll, wmp, wmplib

我有一个问题，我不知道如何解决它：我在我的 C# 应用程序中使用了 WMPLib（位于 C:\Windows\System32\WMP.dll 中）。我引用了它并将其添加到主窗体的代码文件的标题中：

```
using WMPLib; 
```

但是，如果我尝试在 Windows N 版本上运行我的应用程序（我认为 KN 版本在这里也很重要），它会停止工作并且 Windows 会显示以下消息：“应用程序名称已停止工作。您可以检查解决方案.. ."。所以现在，我正在尝试找到一种解决此问题的方法，例如，当用户运行 Windows N 版本时，不要在运行时导入该 DLL。恐怕我无法将我的应用程序重新分发给 Windows N 用户。

感谢您的任何建议，瓦利

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T19:41:38.897

N 版本默认没有安装 Windows Media Player，这就解释了为什么缺少 DLL。但是，可以在事后安装 Windows Media Player。

这让您有两个选择：

*   在运行时动态加载 DLL
*   检查并要求安装 Windows Media Player 作为先决条件（即在安装过程中）

你实际上可能想要两者都做。如果您的应用程序需要此程序集来完成其工作，则在应用程序启动时，您可能需要检查 DLL 是否可用。如果不是这样，显示有意义的错误消息将比彻底崩溃更可取。

# javascript - node-mongodb-native、回调、范围和 TypeError

> ID：11852796
> 
> 赞同：5
> 
> 时间：2012-08-07T19:30:44.027
> 
> 标签：javascript, node.js, mongodb, node-mongodb-native

这是一个小故事。

曾几何时，一个小项目想使用[node-mongodb-native](https://github.com/mongodb/node-mongodb-native/)。然而，它很害羞，它想用一个包装对象躲在它后面。

```
var mongodb = require( 'mongodb' ),
    Server = mongodb.Server,
    Db = mongodb.Db,
    database;

var MongoModule = {};

MongoModule.setup = function() {
    // Create a mongodb client object
    var client = new Db( this.config.databaseName,
        new Server(
            this.config.serverConfig.address,
            this.config.serverConfig.port,
            this.config.serverConfig.options
        ),
        this.config.options
    );

    // Open the connection!
    client.open( function( err, db ) {
        if ( err ) throw err;
        database = db;
        console.log( 'Database driver loaded.' );
    });
}; 
```

该`setup`方法是启动小项目的一种方法。它在应用程序运行时被调用。

为了尝试一下，这个小项目`collection`为`node-mongodb-native`.

```
MongoModule.collection = function() {
    database.collection.apply( this, arguments );
}; 
```

但是后来，小项目发现这个方法行不通。它不明白为什么！

```
// In the client.open callback:
db.collection( 'pages', function( e, p ) {
    // no error, works fine
});

// in the same callback:
MongoModule.collection( 'pages', function( e, p ) {
    // error :(
}); 
```

错误如下，即使这个小项目认为它不相关。他最好的朋友谷歌没有找到任何有用的结果，而是一个旧的修复错误。

```
TypeError: Cannot read property 'readPreference' of undefined
    at new Collection (/home/vagrant/tartempion/node_modules/mongodb/lib/mongodb/collection.js:56:92)
    at Object.Db.collection (/home/vagrant/tartempion/node_modules/mongodb/lib/mongodb/db.js:451:24)
    at Object.MongoModule.collection (/home/vagrant/tartempion/core/databases/mongodb.js:27:25)
    at proxy [as collection] (/home/vagrant/tartempion/node_modules/ncore/lib/core.js:116:51)
    at Object.module.exports.getIndex (/home/vagrant/tartempion/pies/page/model.js:4:17)
    at proxy [as getIndex] (/home/vagrant/tartempion/node_modules/ncore/lib/core.js:116:51)
    at Object.module.exports.index (/home/vagrant/tartempion/pies/page/controller.js:7:20)
    at callbacks (/home/vagrant/tartempion/node_modules/express/lib/router/index.js:272:11)
    at param (/home/vagrant/tartempion/node_modules/express/lib/router/index.js:246:11)
    at pass (/home/vagrant/tartempion/node_modules/express/lib/router/index.js:253:5) 
```

[PS：如果你想要一个失败的文件，[这里是一个要点](https://gist.github.com/3288734)。]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T19:47:20.253

您需要在对象而不是对象`collection`的上下文中应用该方法：`database``MongoModule`

```
database.collection.apply( database, arguments ); 
```

# azure - Azure 表存储中的原子操作

> ID：11852797
> 
> 赞同：18
> 
> 时间：2012-08-07T19:30:54.237
> 
> 标签：azure, azure-table-storage

我希望在 azure 表存储中实现页面视图计数器。如果说两个用户同时访问该页面，并且PageViews上的当前值= 100，是否保证更新操作后PageViews = 102？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-07T20:09:38.940

答案取决于您如何实现计数器。:-)

表存储没有“增量”运算符，因此您需要读取当前值 (100) 并将其更新为新值 (101)。表存储采用乐观并发，因此如果您在使用 .NET 存储客户端库时自然而然地进行操作，当两个进程尝试同时执行此操作时，您可能会看到异常。这将是流程：

1.  进程 A 读取 PageViews 的值并收到 100。
2.  进程 B 读取 PageViews 的值并收到 100。
3.  进程 A 对 PageViews 进行有条件的更新，这意味着“只要当前为 100，就将 PageViews 设置为 101”。这成功了。
4.  进程 B 执行相同的操作并失败，因为前提条件 (PageViews == 100) 为假。

当您收到错误时，显而易见的事情是重复该过程。（读取当前值，现在是 101，然后更新为 102。）这将始终（最终）导致您的计数器具有正确的值。

还有其他可能性，我们做了一整集关于如何实现真正可扩展的计数器的 Cloud Cover：http: [//channel9.msdn.com/Shows/Cloud+Cover/Cloud-Cover-Episode-43-Scalable-Counters-与-Windows-Azure](http://channel9.msdn.com/Shows/Cloud+Cover/Cloud-Cover-Episode-43-Scalable-Counters-with-Windows-Azure)。

如果不太可能发生碰撞，那么该视频中描述的内容可能有点矫枉过正。即，如果您的命中率为每秒一次，那么正常的“读取、递增、写入”模式将是安全且高效的。另一方面，如果您每秒收到 1000 次点击，那么您会想要做一些更聪明的事情。

**编辑**

只是想澄清一下阅读本文以了解乐观并发的人......条件操作并不是真正“只要当前为 100 就将 PageViews 设置为 101”。这更像是“将 PageViews 设置为 101，只要它自我上次查看以来没有改变。” （这是通过使用 HTTP 请求中返回的 ETag 来完成的。）

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-07T22:47:12.973

您还可以重新考虑“计数”部分。为什么不把它变成一个两步的过程呢？

**第 1 步 - 记录页面浏览量**

每次有人查看页面时，都会向表中添加一条记录（我们称之为 PageViews）。您将在这些商店之一中添加的信息如下：

*   PartitionKey = 页面名称
*   RowKey = 随机 GUID

浏览几次后，您会看到以下内容：

*   MyPage.aspx - someGuid
*   MyPage.aspx - someGuid
*   SomePage.aspx - someGuid
*   MyPage.aspx - someGuid

**第 2 步 - 计算页面浏览量**

我们现在要做的是获取所有这些记录，对它们进行计数，在某处增加一个计数器并删除所有记录。假设您有多个工作人员正在运行。您的两个工人都会在 1 到 10 分钟之间随机运行一个循环。每次工人的时间过去，如果还没有租用，它将在 blob 上租用（这应该始终是同一个 blob，您可以使用 AutoRenewLease）。

第一个获得锁的工人可以继续计数：

1.  从 PageViewRecordings 表或缓存中获取所有记录
2.  计算每页的所有页面浏览量
3.  在某处更新计数
4.  删除计数时考虑的记录

这里的问题是很难把它变成一个幂等过程。如果您的实例在计数和删除之间崩溃会发生什么？您的页数会增加，但由于这些项目没有被删除，它们将在您下次处理它们时被添加到总页数中。

这就是为什么我会提出以下建议。在**同一个表**(PageViews) 中，您还将记录同一分区中的总页面浏览量。但是数据会有点不同（这将是该分区中的单个记录，其中包含总计数）：

*   PartitionKey = 页面名称
*   RowKey = Guid.Empty（只是不要使用随机的 guid，这样我们就知道记录的页面浏览量和保存总计数的记录之间的区别）。
*   Count = 当前页面浏览次数

这是完全可能的，因为表存储架构较少。我们为什么要这样做？因为如果我们将自己限制在同一个表 + 最多 100 个实体的分区中，我们确实有事务。我们能用这个做什么？

1.  使用 Take，我们从该表 + 分区中获得 100 条记录。
2.  我们将获得的第一条记录是“计数器”记录。为什么？因为它的 rowkey 是 Guid.Empty 并且排序是字典顺序的
3.  计算这些记录（-1 因为第一条记录不是页面视图，它只是我们的计数器占位符）
4.  更新计数器记录的 Count 属性
5.  删除 99 条（或更少）其他记录
6.  使用批处理保存更改。
7.  重复直到只剩下 1 条记录（计数器记录）。

每隔 X 分钟，您的工作人员将查看 blob 上是否没有租约，获取租约并重新启动流程。

这个答案足够清楚还是我应该添加一些代码？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-28T03:43:53.943

我提出了同样的问题。使用 Azure python 库，我正在开发一个简单的计数器增量，使用`eTag`and`If-Match`而不是锁。基本思想是重试增加计数器，直到更新在某个标准下成功运行，也就是没有其他更新干扰这个正在运行的更新。如果更新请求很重，应该调用分片。

[https://github.com/flyakite/simple-scalable-datastore/blob/master/datastore/azuretable.py](https://github.com/flyakite/simple-scalable-datastore/blob/master/datastore/azuretable.py)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-07T09:06:10.847

如果使用 Azure 网站，那么 Azure 队列和 WebJobs 是另一种选择。在我的一种情况下，虽然我实际上将采用分片方法并让 WebJobs 定期更新聚合。具有 PartitionKey = User 和 RowKey = Page 的 UserPageViews 的 Azure 表存储表。不允许使用相同用户 ID 的两个同时用户。

# sql - 计算子查询中值的实例，更新表

> ID：11852800
> 
> 赞同：0
> 
> 时间：2012-08-07T19:31:14.103
> 
> 标签：sql, oracle

我试图计算一个值（mytype）出现在一个不同的 id 值中的次数，并用每一行的这个计数（idsubtotal）更新我的表。我有的桌子：

```
id   | mytype | idsubtotal
-----+--------+-----------
 44    red  
101    red     
101    red
101    blue
101    yellow
494    red
494    blue
494    blue
494    yellow
494    yellow 
```

我需要计算/更新 idsubtotal 列，所以它就像：

```
id   | mytype | idsubtotal
-----+--------+-----------
 44    red      1
101    red      2    
101    red      2
101    blue     1
101    yellow   1
494    red      1
494    blue     2
494    blue     2
494    yellow   2
494    yellow   2 
```

当我在下面尝试此操作时，它正在计算 mytype 值在*整个*表中出现的次数，但我需要知道它在该 id 值的子组中出现了多少次（例如，“red”在其中出现了多少次id 101 行，答案 = 2)。

```
SELECT id, mytype,
COUNT(*) OVER (PARTITION BY mytype) idsubtotal
FROM table_name 
```

我知道将这个小计存储在表本身中（而不是在需要时实时计算）构成表的错误数据模型，但在我的情况下我需要这样做。

此外，我的问题与[这个问题](https://stackoverflow.com/questions/11761557/sql-calculate-item-frequency-using-multiple-dependent-columns)相似，但略有不同，我没有尝试使用我从以前的回复或其他帖子中对 SQL 的非常原始的理解进行调整。TIA 的任何想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T23:12:16.183

```
UPDATE table_name a
SET idsubtotal=(  SELECT COUNT(1)
                  FROM table_name  b
                  WHERE a.id=b.id
                  AND a.mytype=b.mytype
                ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T19:36:57.033

> 当我在下面尝试这个时，它正在计算 mytype 值在整个表中出现的次数，但我需要知道它在该 id 值的子组中出现了多少次（例如，“red”在其中出现了多少次id 101 行，答案 = 2)。

```
SELECT id, mytype, COUNT(*) 
FROM table_name
GROUP BY id, mytype 
```

# javascript - 条件“if(x)”与“if(x == true)”不同吗？

> ID：11852801
> 
> 赞同：4
> 
> 时间：2012-08-07T19:31:25.783
> 
> 标签：javascript, conditional

我想知道下面的条件语法之间的核心区别是什么？

```
if (something) {
    // do something
} 
```

对比

```
if (something == true) {
    // do something
} 
```

有什么不同吗？

**编辑：**我很抱歉。问这个问题时我打错了。我不是故意放一个三等号。我知道三等号是一个严格的运算符。我的意思是问'=='是否等同于if（某事）。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-07T19:42:14.837

不同之处在于 in `if(something)`,[`something`被评估为 boolean](http://es5.github.com/#x12.5)。基本上是

```
if(ToBoolean(something)) 
```

where[`ToBoolean`](http://es5.github.com/#x9.2)是一个内部函数，被调用以将参数转换为布尔值。`ToBoolean`您可以使用双重[否定](http://es5.github.com/#x11.4.9)来模拟: `!!something`。

在第二种情况下，[两个操作数（最终）都转换为 numbers first](http://es5.github.com/#x11.9.3)，所以你最终得到

```
if(ToNumber(something) == ToNumber(true)) 
```

这可能导致非常不同的结果。再次，[`ToNumber`](http://es5.github.com/#x9.3)是一个内部函数。[可以使用一元加运算符](http://es5.github.com/#x11.4.6):来模拟（在某种程度上）`+something == +true`。在实际算法中，`something`首先传递 的是[`ToPrimitive`](http://es5.github.com/#x9.1)if`something`是一个对象。

* * *

**示例**：

假使，假设

```
var something = '0'; // or any other number (not 0) / numeric string != 1 
```

`if(something)`will be `true`，因为`'0'`是一个非空字符串。

`if(something == true)`will be `false`, since `ToNumber('0')`is `0`, `ToNumber(true)`is`1`和`0 == 1`is `false`.

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-07T19:33:05.227

**编辑：以下仅适用于`===`使用运算符的原始问题。**

第一个将执行 if 语句的主体 if`something`为“真”，而第二个将仅在其类型和值等于 时才执行它`true`。

那么，什么是“真实”？要理解这一点，您需要知道它的反面是什么：虚假。如果放在条件表达式中，JavaScript 中的所有值都将被强制转换为布尔值。这是虚假值的列表：

*   `false`
*   `0`（零）
*   `""`（空字符串）
*   `null`
*   `undefined`
*   `NaN`

所有其他值都是真实的，尽管我可能错过了一些模糊的极端情况，有人会在评论中指出。

**这是我对更新问题的回答：**

~~有条件的`if (something)`and`if (something == true)`是等价的，尽管第二个是多余的。`something`在任何一种情况下都将以相同的方式进行类型强制。~~这是错误的。请参阅[Felix Kling 的回答](https://stackoverflow.com/a/11852927/218196)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-07T19:35:17.093

`if(something)`相当于`if(someting == true)`。

运算符在检查相同性的`==`同时检查相等性`===`。在这种情况下，任何真值都会导致第一个值满足条件，但只会`true`导致第二个值满足条件。

**编辑：Felix Kling 的回答是正确的。请改为参考。**

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-07T19:33:26.810

现在问题已从`===`变为`==`，不，没有实际区别。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-07T19:37:57.363

有几种方法可以查看它。第一个示例评估“某物”是否具有类真值或正值。因此，只要它不是 0、负数、null 或空，它就应该评估 if 语句的内容。

在您的第二个语句中，您正在测试“某事”是否等同于布尔真值。另一个词“TRUE”或1。您还可以进行“===”比较，以便它必须与您的比较相同。所以在这种情况下，如果你做了某事 === true 那么“某事”必须是布尔值 true，值 1 是不够的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-07T19:42:21.403

这两个条件没有区别`thing == true`，只是`thing`。

`thing === true`但是，和之间有很大区别`thing`。

在 javascript 中，值在条件中被强制转换为布尔值。这意味着所有类型的所有值都必须能够强制转换为`true`或`false`。强制转换为的值`true`通常称为“真”，而强制转换为的值`false`称为“假”。

“假”值如下：

*   `NaN`（不是数字）
*   `''`（空字符串）
*   `undefined`
*   `null`
*   `0`（数字 0）

`true`其他所有内容都在强制执行时进行评估。[这个 jsFiddle](http://jsfiddle.net/QjSYG/9/)将帮助您跟踪什么是“真”，什么是“假”。

标识运算符 ( `===`) 不执行任何类型强制：如果类型不同，则比较立即失败。

# java - 有效测量 dns 查找和网站内容下载持续时间

> ID：11852804
> 
> 赞同：1
> 
> 时间：2012-08-07T19:31:46.317
> 
> 标签：java, http, dns

我正在实现一种 Java 方法，该方法在加载网页时测量许多指标。指标包括：解析时间、连接时间和下载时间。

挑战似乎是名称解析，因为代码不应该以任何方式触发**两次**NS 查找（即使禁用了 DNS 缓存）。

我的第一个想法是在连接到服务器之前触发名称解析，然后阻止 java 在连接时运行第二个。使用 InetAddress.getByName() 进行名称查找，然后使用 HttpURLConnection 和 setRequestProperty 方法来设置**主机标头**似乎可以解决问题。

所以这是我的问题：下面的这两个片段是否具有相同的效果？他们总是对所有可能的主机给出完全相同的结果吗？如果没有，我还有什么其他选择？

**版本 1：隐式名称解析**

```
/**
 * Site content download Test
 * 
 * @throws IOException
 */
public static void testMethod() throws IOException {

    String protocol = "http";
    String host = "stackoverflow.com";
    String file = "/";

    // create a URL object
    URL url = new URL(protocol, host, file);

    // create the connection object
    HttpURLConnection conn = (HttpURLConnection) url.openConnection();

    // connect
    conn.connect();

    // create a stream reader
    BufferedReader in = new BufferedReader(new InputStreamReader(conn.getInputStream()));
    String inputLine;

    // read contents and print on std out
    while ((inputLine = in.readLine()) != null) {
        System.out.println(inputLine);
    }

    // close the stream
    in.close();
} 
```

**版本 2：显式名称解析**

```
/**
 * Enhanced Site content download Test
 * 
 * @throws IOException
 */
public static void testMethod2() throws IOException {

    String protocol = "http";
    String host = "stackoverflow.com";
    String file = "/";

    // Do a name lookup.
    // If a literal IP address is supplied, only the validity of the address format is checked.
    InetAddress address = InetAddress.getByName(host);

    // create a URL object
    URL url = new URL(protocol, address.getHostAddress(), file);

    // create the connection object
    HttpURLConnection conn = (HttpURLConnection) url.openConnection();

    // allow overriding Host and other restricted headers
    System.setProperty("sun.net.http.allowRestrictedHeaders", "true");

    // set the host header
    conn.setRequestProperty("Host", host);

    // connect
    conn.connect();

    // create a stream reader
    BufferedReader in = new BufferedReader(new InputStreamReader(conn.getInputStream()));
    String inputLine;

    // read contents and print on std out
    while ((inputLine = in.readLine()) != null) {
        System.out.println(inputLine);
    }

    // close the stream
    in.close();
} 
```

TIA 的帮助。-迪米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T22:00:17.467

我浏览了 Java 的源代码，看看当你将域名传递给 HttpURLConnection 时会发生什么，它最终会出现在`NetworkClient.doConnect`：

```
 if (connectTimeout >= 0) {
            s.connect(new InetSocketAddress(server, port), connectTimeout);
        } else {
            if (defaultConnectTimeout > 0) {
                s.connect(new InetSocketAddress(server, port), defaultConnectTimeout);
            } else {
                s.connect(new InetSocketAddress(server, port));
            }   
        } 
```

如您所见，域解析始终由以下人员处理`InetSocketAddress`：

```
public InetSocketAddress(String hostname, int port) {
    if (port < 0 || port > 0xFFFF) {
        throw new IllegalArgumentException("port out of range:" + port);
    }   
    if (hostname == null) {
        throw new IllegalArgumentException("hostname can't be null");
    }   
    try {
        addr = InetAddress.getByName(hostname);
    } catch(UnknownHostException e) {
        this.hostname = hostname;
        addr = null;
    }   
    this.port = port;
} 
```

如您所见，`InetAddress.getByName`每次都被调用。我认为你的方法是安全的。

# php - 带有内容类型的jquery发布请求ajax

> ID：11852809
> 
> 赞同：-1
> 
> 时间：2012-08-07T19:32:10.590
> 
> 标签：php, jquery, html, ajax, post

你好我有下面的代码：

```
<script type="text/javascript">
 14         $(document).ready(function() {
 15                 $('#find').click(function(){
 16                         
 17                         var amount = $('#amount').val();
 18 
 19                         $.ajax({
 20                                 type: "POST",
 21                                 contentType: "text/xml;charset=utf-8",
 22                                 url: "questions.php",
 23                                 data: {'amount': amount},
 24                                 success: function(data){
 25                                         
 26                                         $('#results').show();
 27                         
 28                                         
 29                                         $('#results').html(data);
 30                                 }
 31                         });
 32                 });
 33         });
 34     </script> 
```

我的 php 脚本有下面的代码

```
5 $search_term = $_POST['amount'];
6 echo $search_term; 
```

如果我删除第 21 行内容类型的东西，我将输入作为输出，但我没有得到任何输出！问题是我真的需要内容类型的东西，所以任何关于它的信息都会非常有帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T19:47:46.670

您将数据作为表单数据发送，但将发送的数据声明为 XML。PHP 在期待 XML 时无法解析 JSON 数据，因此不会返回任何内容。并且它是可选的设置`contentType`。

来自[jQuery 文档](http://api.jquery.com/jQuery.ajax/)：

> contentType 默认值：'application/x-www-form-urlencoded; charset=UTF-8'
> 
> 向服务器发送数据时，使用该内容类型。默认为“application/x-www-form-urlencoded; charset=UTF-8”，在大多数情况下都可以。如果您明确地将内容类型传递给 $.ajax()，那么它将始终被发送到服务器（即使没有发送数据）。如果没有指定字符集，数据将使用服务器的默认字符集传输到服务器；您必须在服务器端对此进行适当解码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T19:55:49.943

更改第 21 行

```
contentType: "text/xml;charset=utf-8", 
```

到

```
contentType: "application/x-www-form-urlencoded;charset=utf-8", 
```

# javascript - cffile 替代，我需要上传而不提交表单

> ID：11852813
> 
> 赞同：1
> 
> 时间：2012-08-07T19:32:53.800
> 
> 标签：javascript, jquery, ajax, coldfusion, form-submit

所以我想使用ajax上传一个文件到服务器，所以表单没有提交。Cffile 需要 filefield 属性，但由于没有传递给 coldfusion 的表单对象不起作用。我可以将用户输入的值作为变量存储在 javascript 中，并将该变量传递给 cf. 如何使用此变量上传我的文件？谢谢。

**编辑** 通过提交到 iframe 解决。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T04:28:11.703

您可以使用[cffileupload标签（嵌入用于上传的 flash 小部件），或通过](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec18238-7fd0.html)[此处](https://stackoverflow.com/a/8736436/511250)说明的方法利用 XMLHttpRequest 级别 2（[浏览器支持](http://caniuse.com/#feat=xhr2)） 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T14:10:35.027

你是在上传图片吗？您可以尝试使用 javascript 上传到画布标签客户端。

然后 ajax 发布画布的 base64 png 编码内容。

进一步阅读和示例：

[如何上传/发布多个画布元素](https://stackoverflow.com/questions/7712497/how-to-upload-post-multiple-canvas-elements)

[如何使用javascript将图像转换为base64字符串](https://stackoverflow.com/questions/6150289/how-to-convert-image-into-base64-string-using-javascript)

[在 HTML5 画布中调整图像大小](https://stackoverflow.com/questions/2303690/resizing-an-image-in-an-html5-canvas)

[上传前调整图像大小，但同步上传（不是 ajax）。是否可以？](https://stackoverflow.com/questions/11743082/resize-image-before-upload-but-upload-synchronously-not-ajax-is-it-possible)

[http://coding.pressbin.com/84/File-API-Resize-photo-before-upload/](http://coding.pressbin.com/84/File-API-Resize-photo-before-upload/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T15:23:34.823

将表单提交到隐藏的 iframe 并像往常一样处理表单上传。

# apache - 从同一本地网络上的计算机访问虚拟主机

> ID：11852816
> 
> 赞同：12
> 
> 时间：2012-08-07T19:33:06.920
> 
> 标签：apache, networking, client-server, xampp, virtualhost

我正在尝试进行设置，以便我可以从计算机 B 访问计算机 A 中虚拟主机上的网站。A 和 B 都在同一个网络上。我在 Win 7 上使用 xampp。

因此，随着问题的发生，计算机 A（服务器）在 httpd-vhosts.conf 文件中具有如下虚拟主机配置。

```
NameVirtualHost project:81

<VirtualHost project:81>

    DocumentRoot "D:/work/website"
    ServerName project:81
    <Directory "D:/work/website">
    Options Indexes FollowSymLinks Includes ExecCGI    
    AllowOverride All
    Order Allow,Deny
    Allow from all
    </Directory>
</VirtualHost> 
```

（使用端口 81 作为端口 80 运行 IIS，但是对这些东西不太了解）

此配置在本地机器（服务器）上运行良好。ie project:81 在浏览器的地址栏中打开了它应该的网站。

现在在计算机 B（客户端）上，我更改了 hosts 文件以包含服务器的 IP 以及虚拟主机的名称，例如：-

> 192.168.1.7项目

现在当我在客户端浏览器上输入 project:81 .. 它带我到服务器但它没有带我到虚拟主机目录，而是带到默认目录.. 即在我的情况下

C:\xampp\htdocs

现在我被卡住了，无法让客户端指向当前目的地。因此，任何人都可以建议我在这里做错了什么，或者我需要做些什么才能从客户端机器访问正确的虚拟主机站点。

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-19T19:49:55.307

好的，所以 Seto El Kahfi 对我非常老的问题的回答让我在 Apache 的网站上进行了更多的研究和阅读。

所以我得到的是，我的 NameVirtualHost 指令不正确。所以取而代之的是，

```
NameVirtualHost project:81

<VirtualHost project:81>

    DocumentRoot "D:/work/website"
    ServerName project:81
    <Directory "D:/work/website">
    Options Indexes FollowSymLinks Includes ExecCGI    
    AllowOverride All
    Order Allow,Deny
    Allow from all
    </Directory>
</VirtualHost> 
```

我必须做的就是这个。

```
NameVirtualHost *:81

<VirtualHost *:81>

    DocumentRoot "D:/work/website"
    ServerName project
    <Directory "D:/work/website">
    Options Indexes FollowSymLinks Includes ExecCGI    
    AllowOverride All
    Order Allow,Deny
    Allow from all
    </Directory>
</VirtualHost> 
```

注意'*'，我也可以在那里使用IP地址。（在这种情况下，我的服务器（机器A）本地IP）都可以工作。现在我所要做的就是在客户端机器上输入“project:81”，我得到了我的眼睛希望看到的东西.. :)

我从中得到的东西很少。

1）如何使用NameVirtualHost（或者它的目的基本上是什么。）。在这里阅读更多 [http://httpd.apache.org/docs/2.2/mod/core.html#namevirtualhost](http://httpd.apache.org/docs/2.2/mod/core.html#namevirtualhost) 这个也不错 [http://www.thegeekstuff.com/2011/07/apache-virtual-host/](http://www.thegeekstuff.com/2011/07/apache-virtual-host/)

2）您可以通过命令行使用它：

```
httpd -D DUMP_VHOSTS 
```

了解你的虚拟主机是如何设置的（如果你的设置有问题，也会给你一些关于优先级的警告）

3）别人帮助你的姿态让你帮助自己.. :) 所以继续帮助和摇摆。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T09:30:30.947

您是否尝试在客户端主机的文件中包含端口？

192.168.1.7:81 项目

# android - 防止 css/jquery 弹出窗口允许点击下面的链接（仅限移动设备）

> ID：11852821
> 
> 赞同：0
> 
> 时间：2012-08-07T19:33:30.450
> 
> 标签：android, jquery, html, css, mobile

所以我创建了一个使用 css 和 jquery 的简单弹出窗口。问题是，当弹出窗口被激活时，仍然可以点击弹出窗口下方的链接。有什么办法可以防止这种情况发生。弹出窗口中某些链接的点击框很小，可以轻松点击旁边的链接，这意味着点击弹出窗口下方的链接。

我正在开发的网站：taxslayerplayer.com，在安卓上查看它，你就会明白我的意思。另外，我在手机上浏览时在许多其他网站上都遇到过这个问题。

任何指针将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T19:37:32.943

我不确定是否有严格的移动解决方案，但您可以检查弹出窗口是否可见，如果可见，只需`return false`在链接的点击处理程序中：

```
$('a').filter(
    function(){
        return !$(this).closest(popupSelector).length;
}).on('click', function(e){
    if ($(popupSelector).is(':visible')) {
        return false;
    }
    else {
        // do whatever you'd normally do with the links
    }
}); 
```

或者，您可以改为使用变量，例如`popupIsShown`，将其设置为`false`最初（在 DOMReady 上），然后将其设置`true`为显示弹出窗口的时间，并重置为`false`重新隐藏的时间，从而降低`if`检查成本：

```
$('a').filter(
    function(){
        return !$(this).closest(popupSelector).length;
}).on('click', function(e){
    if (popupIsShown) {
        return false;
    }
    else {
        // do whatever you'd normally do with the links
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T19:39:08.283

如果出现弹出窗口，请使用布尔值并将其设置为 false。有用！

PS：刚刚检查过..大卫已经回答了。

# live - 通过应用程序向系统发送信息

> ID：11852823
> 
> 赞同：-2
> 
> 时间：2012-08-07T19:33:36.980
> 
> 标签：live, options

我想制作一个应用程序，它可以将信息从 iphone 应用程序发送到系统，或者我将向我发送有关您选择的选项的信息。例如

*   我想在餐厅预订一张桌子，所以我通过选择一些选项来预订，比如我想要 4 把椅子等等。然后当我按下完成时，我会收到信息，我知道他选择了哪些选项。

我需要一个服务器吗？如果没有，请给我一些信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T19:39:14.490

是的，您需要一台服务器。

# python - 从文件中获取并格式化字符串

> ID：11852824
> 
> 赞同：0
> 
> 时间：2012-08-07T19:33:36.927
> 
> 标签：python, regex, io

我想在一个字符串中找到一个特定的两个单词`id`，`name`我想使用正则表达式，但我无法格式化。

在文件中我有：

```
<p>Any text, bla bla lorem ipsum, bla bla</p>
<p>test = {"player":{"id":"123123","name":"f_teste"}; 
```

这是我的进展：

```
import re

def main():
    padrao = r'"id"\w+'

    caminho = 'D:\index.txt'
    arquivo = open(caminho,'r')
    texto = arquivo.readlines()[1].split('{')

    textoEncontrado = texto[2].split(',')

    print textoEncontrado[0]
    print textoEncontrado[1]

    arquivo.close()

if __name__ == '__main__':
    main() 
```

结果：

```
"id":"123123"
"name":"f_teste"}; 
```

我想要的是：

```
id: 123123
name = f_teste 
```

当我尝试`id`使用 RE 仅获取字符串时，我得到：

```
padrao = r'^id$'
(...)
result = re.findall(padrao,textoEncontrado[0])
    print result
(...) 
```

结果是`[]`

对不起英语不好。谢谢大家。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T20:15:22.150

如果您的输入是包含 json 文本的有效 html：

```
>>> from bs4 import BeautifulSoup
>>> html = """<p>Any text, bla bla lorem ipsum, bla bla</p>
... <p>test = {"player":{"id":"123123","name":"f_teste"}};"""
>>> soup = BeautifulSoup(html)
>>> import  re
>>> jsonre = re.compile(r'test\s*=\s*(.*);', re.DOTALL)
>>> p = soup('p', text=jsonre)[0]
>>> json_text = jsonre.search(p.get_text()).group(1)
>>> import json
>>> json.loads(json_text)
{u'player': {u'id': u'123123', u'name': u'f_teste'}} 
```

要安装`bs4`，请运行：`pip install beautifulsoup4`。

正则表达式解决方案如下所示：

```
>>> re.findall(r'"(id)":"([^"]*)","(name)":"([^"]*)"', html)
[('id', '123123', 'name', 'f_teste')] 
```

# python - Python / Django - 在一个循环中有一定数量的项目包装在一个div中

> ID：11852826
> 
> 赞同：1
> 
> 时间：2012-08-07T19:33:41.680
> 
> 标签：python, django, loops, django-templates

我`for`在 Django 中有一个简单的循环，输出一系列预告故事。每个都包裹在一个`div`带有一个类的`row`. 我有一个名为 的变量`num_of_rows`，它添加了一个 after 2 循环的类，它使用 css`hidden`将这些 s 从视图中隐藏起来。`div`

这是我的代码：

```
{% block content %}
<h1>{{ section.title }}</h1>

{% for story in story_list %}
<div class="row {% if num_of_rows > 2 %} hidden{% endif %}">
    <h2>
      <a href="{{ story.get_absolute_url }}">
        {{ story.headline|upper }}
      </a>
    </h2>
    <p>{{ story.tease|truncatewords:"100" }}</p>
</div>
{% endfor %}
{% endblock %} 
```

**我想做的是，不是为`hidden`每个单独的行添加一个类，而是将 2 个项目之后的所有项目单独包装`div`，然后使用 Django 用 CSS 隐藏。这样我可以用 jQuery 创建一个更平滑的向下滑动效果。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T19:40:21.157

您可以为此使用[forloop](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#for)变量：

```
{% for story in story_list %}
  {% if forloop.counter == 3 %}<div class="hidden">{% endif %}
  <div class="row">
      <h2>
        <a href="{{ story.get_absolute_url }}">
          {{ story.headline|upper }}
        </a>
      </h2>
      <p>{{ story.tease|truncatewords:"100" }}</p>
  </div>
  {% if forloop.counter > 2 and forloop.last %}</div>{% endif %}
{% endfor %} 
```

# css - 删除元素占用的空间而不隐藏它

> ID：11852830
> 
> 赞同：0
> 
> 时间：2012-08-07T19:34:08.300
> 
> 标签：css

我知道我可以隐藏一个元素，而无需删除它所占用的空间`visibility: hidden`。我想做的恰恰相反：我想渲染页面的其余部分，就好像元素不在页面上一样，但保持元素可见。

我问的原因是因为我有一个居中的 950 像素宽的布局，我想在屏幕左侧添加一个小框。它看起来像这样：

![小样](../Images/eda3c61aad28cc8d84c115eb23223559.png)

现在我有一个`<div>`将侧框作为我的 950px 页面包装器中的顶部元素的一个，它也是一个`<div>`. 到我应用的边框`position: relative`和`left: -200px`（框宽度）将它移到一边，但这仍然让我的主要内容被推下。我是否正确地解决了这个问题？有没有一种合乎逻辑的方法来删除边箱留下的垂直空间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T19:36:49.907

只需使用`position: absolute;`. 该元素将不再是文档流的一部分，您可以相对于它最近的非`static`定位祖先来定位它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T19:36:41.467

相对位置仍将占用空间。尝试位置：绝对；它将元素绝对放置在其父元素内部，但高于其所有兄弟元素。

# asp.net - 如何将隐藏字段值从asp页面传递到锚标记中的另一个

> ID：11852832
> 
> 赞同：0
> 
> 时间：2012-08-07T19:34:17.287
> 
> 标签：asp.net, html

我尝试使用 href 传递隐藏字段值。下面是相同的代码片段，它不起作用。我不想使用 java 脚本函数，因为我希望它在用户禁用 java 脚本时在特定场景中工作。变量的值在后面的代码中设置

```
<form name ="hiddenform" method="get" action="a1.asp">
<input type="hidden" id="hasflash" value=" " />

<div class="header" id="check" style="color: red;">
please <a href="a1.asp?hasflash"+<%=hasflash.Value%>>upgrade your add-on software</a>
</div> 
```

我也试过下面的代码：

```
<div class="header" id="check" style="color: red;">
please <a href=("a1.asp?hasflash={0}",hasflash.Value)>upgrade your add-on software</a>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T19:44:29.873

尝试

```
<div class="header" id="check" style="color: red;">
     please <a href="a1.asp?hasflash=<%=hasflash.Value%>">upgrade your add-on software</a>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T21:51:28.080

首先，您需要添加`runat="server"`到隐藏字段

```
<input type="hidden" runat="server" id="hasflash" Value="SomeValues" /> 
```

然后您可以通过 2 种或多种方式实现这一目标

```
please <a href="a1.asp?hasflash=<%=hasflash.Value %>">upgrade your add-on software</a> 
```

或者

```
please <a href='<%= String.Format("a1.asp?hasflash={0}",hasflash.Value) %>'>upgrade your add-on software</a> 
```

# c# - 如何使用进度数据创建文件上传？

> ID：11852833
> 
> 赞同：0
> 
> 时间：2012-08-07T19:34:18.573
> 
> 标签：c#, jquery, asp.net, ajax, file-upload

我正在开发一个 Web（使用 asp.net 和 c#），它具有来自 asp.net 的 FileUpload 控件。上传的东西很完美，据我所知，我无法使用 asp.net 的 FileUpload 控件显示进度数据（%、传输的字节数、上传速度、经过的时间、剩余时间、进度条），因为它不是异步的。

我在互联网上搜索了很多（真的），但我没有找到我正在寻找的东西，而且太多的信息已经成为一个很大的混乱，因为我不确定我必须使用什么。

在我的网页上，我有一个名为“UploadFile.aspx”的文件，它有一个 FileUpload 控件和一个处理上传的按钮。在代码隐藏（UploadFile.aspx.cs）上，我拥有所有服务器端逻辑（将文件上传到特定文件夹，将有关该文件的信息存储到数据库等），我不想改变这一点。

我需要知道的是如何在上传文件时向用户显示进度数据？我不能使用 3rd 方应用程序，因为这是一个重要的商业网站。如果我必须学习**javascript / jQuery / 不管**，这对我来说不是问题，但我真的有点迷茫，我不知道如何开始。

感谢您的时间和您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T06:56:08.553

网上有很多演示代码可以在 c# 中显示带有文件上传控件的进度条，它们中的大多数在本地系统上都可以正常工作，但不能在实时服务器上工作，因为你不能使用 FileUpload 控件为了你想做的事。当用户发布文件时，您必须将其视为查询字符串参数。它作为一个 Http 请求。如果你想做一个进度条，你会想要研究可以与服务器异步交互的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T19:39:12.953

有一些非常酷的解决方案。当然，您可以编写自己的代码，但我建议使用像[Plupload](http://www.plupload.com/)这样的 jQuery 插件。如果您需要帮助设置它，您可以阅读他们的[文档](http://www.plupload.com/documentation.php)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-08T19:31:31.963

如果您不想使用任何依赖 Flash / Html 5 的 3rd 方，请查看这篇文章：

[http://vanacosmin.ro/Articles/Read/AjaxFileUpload](http://vanacosmin.ro/Articles/Read/AjaxFileUpload)

这是可能的（如果您使用.NET 4.5 GetBufferedInputStream 将使您的生活更轻松），但正如您将看到的那样，这并不容易。

基本上，如果您想要一个与每个浏览器完全兼容的带有进度条的文件上传，您需要处理这个服务器端并提供一个 url，客户端（浏览器）可以在其中定期检查 ajax 的进度。

# java - 无法识别符号 output.print()

> ID：11852835
> 
> 赞同：-1
> 
> 时间：2012-08-07T19:34:35.390
> 
> 标签：java, printing, bufferedreader

由于某种原因，我的代码无法识别打印。

它给了我错误：找不到符号-：方法打印（java.lang.String）

它适用于我制作的另一个代码，但它似乎讨厌这个......

```
21        System.out.print("What is the input file name? ");
22        String input = console.next();
23        FileInputStream fstream = new FileInputStream("/Users/steph/Desktop/Programming/!6 Problem Set TUES/PartB/6/" + input); //becomes input
24        BufferedReader in = new BufferedReader(new InputStreamReader(fstream));
25        System.out.print("What is the output file name? ");
26        String output = new Scanner(System.in).next();
27  
28        char str = input.charAt(0);
29        while (str == 0) {
30          System.out.println (str);
31        }
32        in.close();
35  
36        if (i == 1) {
37          String result = caesarEncipher(input, output, in, shift);
38          System.out.println("DONE!");
39        }
40  
41        if (i == 2) {
42          String result = caesarDecipher(input, output, in, shift);
43          System.out.println("DONE!");
44        }
45  
46          str = input.charAt(0);
47          while (str == 0) {//DON'T WANT THAT B.C LIKELY STICK str AT 0...
48            System.out.println (str);
49          }
50          in.close();
51      }

59    public static String caesarEncipher (String input, String output, BufferedReader in, int shift)
60      throws FileNotFoundException, IOException {
61  
62        int [] abc = new int [25];

83        output.print(abc[i] + "\n");
84        
85        while (shift < 0) { //move forward (a->b, b->c, etc.); stop when all shifted
86          for (int j = 0; j < shift; j++) {
87            int w = abc[0];
88            i = 0;
89          }
90          for (i = 0; i < (len - 1); i++)
91            abc[i] = abc[i+1];
92        }
93  
94        while (shift > 0) { //move backwards (a->z, b->a, etc.); stop when all shifted
95          for (int j = 0; j < shift; j++) {
96            int w = abc[len-1];
97            i = 0;
98            for (i = len-1; i > shift - 1; i--)
99            abc[i] = abc[i-1];
100         abc[i] = w;
101       }
102     }
103 

107     for (int x = 0; x < len; x++)
108       output.print(abc[x] + " ");
109   }
110 

111   public static String caesarDecipher (String fileName, String output, BufferedReader in, int shift)
112     throws FileNotFoundException, IOException {
113 
114       int [] abc = new int [25];
115 

135       output.print(abc[i] + "\n");
136       while (shift < 0) { //move forward (a->b, b->c, etc.); stop when all shifted
137         for (int j = 0; j < shift; j++) {
138           int w = abc[0];
139           i = 0;
140         }
141         for (i = 0; i < (len - 1); i++)
142           abc[i] = abc[i+1];
143       }
144 
145       while (shift > 0) { //move backwards (a->z, b->a, etc.); stop when all shifted
146         for (int j = 0; j < shift; j++) {
147           int w = abc[len-1];
148           i = 0;
149           for (i = len-1; i > shift - 1; i--)
150             abc[i] = abc[i-1];
151           abc[i] = w;
152         }
153       }

157 
158       for (int x = 0; x < len; x++)
159         output.print(abc[x] + " "); 
```

在第 83、108、135 和 159 行，它们都说了同样的话：
找不到符号 symbol : method print(java.lang.String)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T19:50:01.920

因此，您遇到问题的原因`in`是您在一种方法中将其声明为局部变量，但尝试在其他方法中访问它（您可以在编辑中删除大量代码之前看到这一点）。如果您想在任何地方使用它，请将其设为字段。

至于问题`output`，如果你看第 123 行，`output`有一个字符串，而不是一个 PrintStream。（大概您的 PrintStream 也需要是一个字段，因为您想在许多地方访问它。一旦完成，请确保您不会意外地为另一个变量提供相同的名称。）

# asp.net - 从字符串值中选择动态 Linq

> ID：11852836
> 
> 赞同：0
> 
> 时间：2012-08-07T19:34:56.030
> 
> 标签：asp.net, linq

问题编辑因为简单的表格不会让事情变得更简单..

问题是我必须选择动态列值..列名来自上一页（DropDownList）=>当前页面（HiddenField）

这是我当前的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Drawing;
using System.Data;

public partial class ViewChart : System.Web.UI.Page
{
    BlupDataContext database = new BlupDataContext();
    protected void Page_Load(object sender, EventArgs e)
    {
            HiddenFieldWCellName.Value = Request.QueryString["WCEL_Name"];
            HiddenFieldSeries1.Value = Request.QueryString["Series1"];
            HiddenFieldSeries2.Value = Request.QueryString["Series2"];

            var q = from x in database.RSRAN079s
                    join y in database.RSRAN084s
                    on x.WCEL_Name equals y.WCEL_Name
                    where x.WCEL_Name == HiddenFieldWCellName.Value
                    select new
                    {
                        RSRAN079_ID = x.RSRAN079_ID,
                        PeriodStartTime = x.PeriodStartTime,
                        PLMN_Name = x.PLMN_Name,
                        RNC_Name = x.RNC_Name,
                        WBTS_Name = x.WBTS_Name,
                        WBTS_ID = x.WBTS_ID,
                        WCEL_Name = x.WCEL_Name,
                        WCEL_ID = x.WCEL_ID,
                        RRC_Conn_Access_Completitions = x.RRC_Conn_Access_Completitions,
                        RRC_Active_Drops_IU_FR = x.RRC_Active_Drops_IU_FR,
                        RRC_Active_Drops_IU_Fails = x.RRC_Active_Drops_IU_Fails,
                        RRC_Active_Drops_Radio_FR = x.RRC_Active_Drops_Radio_FR,
                        RRC_Active_Drops_Radio_Fails = x.RRC_Active_Drops_Radio_Fails,
                        RRC_Active_Drops_BTS_FR = x.RRC_Active_Drops_BTS_FR,
                        RRC_Active_Drops_BTS_Fails = x.RRC_Active_Drops_BTS_Fails,
                        RRC_Active_Drops_IUR_FR = x.RRC_Active_Drops_IUR_FR,
                        RRC_Active_Drops_IUR_Fails = x.RRC_Active_Drops_IUR_Fails,
                        RRC_Active_Drops_CIPH_FR = x.RRC_Active_Drops_CIPH_FR,
                        RRC_Active_Drops_CIPH_Fails = x.RRC_Active_Drops_CIPH_Fails,
                        RRC_Active_Drops_RNC_FR = x.RRC_Active_Drops_RNC_FR,
                        RRC_Active_Drops_RNC_Fails = x.RRC_Active_Drops_RNC_Fails,
                        RRC_Active_Drops_UE_FR = x.RRC_Active_Drops_UE_FR,
                        RRC_Active_Drops_UE_Fails = x.RRC_Active_Drops_UE_Fails,
                        RAB_Retainability_CS_Voice_SR = x.RAB_Retainability_CS_Voice_SR,
                        RAB_Retainability_CS_Conv_SR = x.RAB_Retainability_CS_Conv_SR,
                        RAB_Retainability_PS_SR = x.RAB_Retainability_PS_SR,
                        AMR_RAB_Setup_Access_Completitions = x.AMR_RAB_Setup_Access_Completitions,
                        AMR_RAB_Drop_Active_Drops_IF_FR = x.AMR_RAB_Drop_Active_Drops_IF_FR,
                        AMR_RAB_Drop_Active_Drops_IU_Fails = x.AMR_RAB_Drop_Active_Drops_IU_Fails,
                        AMR_RAB_Drop_Active_Drops_Radio_FR = x.AMR_RAB_Drop_Active_Drops_Radio_FR,
                        AMR_RAB_Drop_Active_Drops_Radio_Fails = x.AMR_RAB_Drop_Active_Drops_Radio_Fails,
                        AMR_RAB_Drop_Active_Drops_BTS_FR = x.AMR_RAB_Drop_Active_Drops_BTS_FR,
                        AMR_RAB_Drop_Active_Drops_BTS_Fails = x.AMR_RAB_Drop_Active_Drops_BTS_Fails,
                        AMR_RAB_Drop_Active_Drops_IUR_FR = x.AMR_RAB_Drop_Active_Drops_IUR_FR,
                        AMR_RAB_Drop_Active_Drops_IUR_Fails = x.AMR_RAB_Drop_Active_Drops_IUR_Fails,
                        AMR_RAB_Drop_Active_Drops_RNC_FR = x.AMR_RAB_Drop_Active_Drops_RNC_FR,
                        AMR_RAB_Drop_Active_Drops_RNC_Fails = x.AMR_RAB_Drop_Active_Drops_RNC_Fails,
                        AMR_RAB_Drop_Active_Drops_UE_FR = x.AMR_RAB_Drop_Active_Drops_UE_FR,
                        AMR_RAB_Drop_Active_Drops_UE_Fails = x.AMR_RAB_Drop_Active_Drops_UE_Fails,
                        CS_Conv_RAB_Setup_Access_Completitions = x.CS_Conv_RAB_Setup_Access_Completitions,
                        CS_Conv_RAB_Retainability_Completitions = x.CS_Conv_RAB_Retainability_Completitions,
                        CS_Conv_RAB_Active_Drops_IU_FR = x.CS_Conv_RAB_Active_Drops_IU_FR,
                        CS_Conv_RAB_Active_Drops__IU_Fails = x.CS_Conv_RAB_Active_Drops__IU_Fails,
                        CS_Conv_RAB_Active_Drops_Radio_FR = x.CS_Conv_RAB_Active_Drops_Radio_FR,
                        CS_Conv_RAB_Active_Drops_Radio_Fails = x.CS_Conv_RAB_Active_Drops_Radio_Fails,
                        CS_Conv_RAB_Active_Drops_BTS_FR = x.CS_Conv_RAB_Active_Drops_BTS_FR,
                        CS_Conv_RAB_Active_Drops_BTS_Fails = x.CS_Conv_RAB_Active_Drops_BTS_Fails,
                        CS_Conv_RAB_Active_Drops_IUR_FR = x.CS_Conv_RAB_Active_Drops_IUR_FR,
                        CS_Conv_RAB_Active_Drops_IUR_Fails = x.CS_Conv_RAB_Active_Drops_IUR_Fails,
                        CS_Conv_RAB_Active_Drops_RNC_FR = x.CS_Conv_RAB_Active_Drops_RNC_FR,
                        CS_Conv_RAB_Active_Drops_RNC_Fails = x.CS_Conv_RAB_Active_Drops_RNC_Fails,
                        CS_Conv_RAB_Active_Drops_UE_FR = x.CS_Conv_RAB_Active_Drops_UE_FR,
                        CS_Conv_RAB_Active_Drops_UE_Fails = x.CS_Conv_RAB_Active_Drops_UE_Fails,
                        Packet_Service_RAB_Setup_Access_Completitions = x.Packet_Service_RAB_Setup_Access_Completitions,
                        Packet_Service_RAB_Retainability_Completitions = x.Packet_Service_RAB_Retainability_Completitions,
                        Packet_Service_RAB_Active_Drops_IU_FR = x.Packet_Service_RAB_Active_Drops_IU_FR,
                        Packet_Service_RAB_Active_Drops_Fails = x.Packet_Service_RAB_Active_Drops_Fails,
                        Packet_Service_RAB_Active_Drops_Radio_FR = x.Packet_Service_RAB_Active_Drops_Radio_FR,
                        Packet_Service_RAB_Active_Drops_Radio_Fails = x.Packet_Service_RAB_Active_Drops_Radio_Fails,
                        Packet_Service_RAB_Active_Drops_BTS_FR = x.Packet_Service_RAB_Active_Drops_BTS_FR,
                        Packet_Service_RAB_Active_Drops_BTS_Fails = x.Packet_Service_RAB_Active_Drops_BTS_Fails,
                        Packet_Service_RAB_Active_Drops_IUR_FR = x.Packet_Service_RAB_Active_Drops_IUR_FR,
                        Packet_Service_RAB_Active_Drops_IUR_Fails = x.Packet_Service_RAB_Active_Drops_IUR_Fails,
                        Packet_Service_RAB_Active_Drops_RNC_FR = x.Packet_Service_RAB_Active_Drops_RNC_FR,
                        Packet_Service_RAB_Active_Drops_RNC_Fails = x.Packet_Service_RAB_Active_Drops_RNC_Fails,
                        Packet_Service_RAB_Active_Drops_UE_FR = x.Packet_Service_RAB_Active_Drops_UE_FR,
                        Packet_Service_RAB_Active_Drops_UE_Fails = x.Packet_Service_RAB_Active_Drops_UE_Fails,
                        Packet_Session_Rel_HSDSCH_EDCH = x.Packet_Session_Rel_HSDSCH_EDCH,
                        Packet_Session_Rel_HSDSCH_DCH = x.Packet_Session_Rel_HSDSCH_DCH,
                        Packet_Session_Rel_Alloc_Rel = x.Packet_Session_Rel_Alloc_Rel,
                        Packet_Session_Success_Ratio_SR = x.Packet_Session_Success_Ratio_SR,
                        Packet_Session_Drops_HSDSCH_EDCH_DR = x.Packet_Session_Drops_HSDSCH_EDCH_DR,
                        Packet_Session_Drops_HSDSCH_EDCH_Drops = x.Packet_Session_Drops_HSDSCH_EDCH_Drops,
                        Packet_Session_Drops_HSDSCH_DCH_DR = x.Packet_Session_Drops_HSDSCH_DCH_DR,
                        Packet_Session_Drops_HSDSCH_DCH_Drops = x.Packet_Session_Drops_HSDSCH_DCH_Drops,
                        Packet_Session_Drops_DCH_DR = x.Packet_Session_Drops_DCH_DR,
                        Packet_Session_Drops_DCH_Drops = x.Packet_Session_Drops_DCH_Drops,
                        Packet_Session_Drops_HSDSCH_EDCH_Other_DR = x.Packet_Session_Drops_HSDSCH_EDCH_Other_DR,
                        Packet_Session_Drops_HSDSCH_EDCH_Other_Drops = x.Packet_Session_Drops_HSDSCH_EDCH_Other_Drops,
                        Packet_Session_Drops_HSDSCH_DCH_Other_DR = x.Packet_Session_Drops_HSDSCH_DCH_Other_DR,
                        Packet_Session_Drops_HSDSCH_DCH_Other_Drops = x.Packet_Session_Drops_HSDSCH_DCH_Other_Drops,
                        Packet_Session_Drops_DCH_Other_DR = x.Packet_Session_Drops_DCH_Other_DR,
                        Packet_Session_Drops_DCH_Other_Drops = x.Packet_Session_Drops_DCH_Other_Drops,
                        HSDSCH_Alloc_Rel = x.HSDSCH_Alloc_Rel,
                        HSDPA_Retain_NW = x.HSDPA_Retain_NW,
                        HSDPA_Retain_RL_FR = x.HSDPA_Retain_RL_FR,
                        HSDPA_Retain_Non_RL_FR = x.HSDPA_Retain_Non_RL_FR,
                        HSDPA_Retain_Mobility_FR = x.HSDPA_Retain_Mobility_FR,
                        HSDPA_Retain_PRE_EMPTION_FR = x.HSDPA_Retain_PRE_EMPTION_FR,
                        HSDPA_Retain_Other_Mob_FR = x.HSDPA_Retain_Other_Mob_FR,
                        EDCH_Alloc_Rel = x.EDCH_Alloc_Rel,
                        HSUPA_Retain_NW = x.HSUPA_Retain_NW,
                        HSUPA_Retain_RL_FR = x.HSUPA_Retain_RL_FR,
                        HSUPA_Retain_EDCH_Rel_HSDSCH_SCC = x.HSUPA_Retain_EDCH_Rel_HSDSCH_SCC,
                        HSUPA_Retain_Other_FR = x.HSUPA_Retain_Other_FR,
                        HSDSCH_SCC_UE_FR = x.HSDSCH_SCC_UE_FR,
                        HSDSCH_SCC_UE_Fails = x.HSDSCH_SCC_UE_Fails,
                        HSDSCH_SCC_BTS_FR = x.HSDSCH_SCC_BTS_FR,
                        HSDSCH_SCC_BTS_Fails = x.HSDSCH_SCC_BTS_Fails,
                        HSDSCH_SCC_Trans_FR = x.HSDSCH_SCC_Trans_FR,
                        HSDSCH_SCC_Trans_Fails = x.HSDSCH_SCC_Trans_Fails,
                        HSDSCH_SCC_AC_FR = x.HSDSCH_SCC_AC_FR,
                        HSDSCH_SCC_AC_Fails = x.HSDSCH_SCC_AC_Fails,
                        HSDSCH_SCC_Other_FR = x.HSDSCH_SCC_Other_FR,
                        HSDSCH_SCC_Other_Fails = x.HSDSCH_SCC_Other_Fails,
                        R99_Alloc_Rel = x.R99_Alloc_Rel,
                        R99_Retain_NW = x.R99_Retain_NW,
                        Inter_RNC_SCC_Fail = x.Inter_RNC_SCC_Fail,
                        Inter_RNC_SCC_Drop = x.Inter_RNC_SCC_Drop,
                        RSRAN084_ID = y.RSRAN084_ID,
                        PeriodStartTime2 = y.PeriodStartTime,
                        RNC_Name2 = y.RNC_Name,
                        WBTS_Name2 = y.WBTS_Name,
                        WBTS_ID2 = y.WBTS_ID,
                        WCEL_Name2 = y.WCEL_Name,
                        WCEL_ID2 = y.WCEL_ID,
                        Cell_Availability = y.Cell_Availability,
                        Cell_Availability_Exclude = y.Cell_Availability_Exclude,
                        RRC_Set_Att = y.RRC_Set_Att,
                        RRC_Set_Acc_CR_NW = y.RRC_Set_Acc_CR_NW,
                        RRC_Set_Acc_CR_UE = y.RRC_Set_Acc_CR_UE,
                        RRC_Conn_Setup_SR = y.RRC_Conn_Setup_SR,
                        RRC_Conn_SR = y.RRC_Conn_SR,
                        RRC_Reg_Att = y.RRC_Reg_Att,
                        Regist_SR = y.Regist_SR,
                        RAB_Att_Voice = y.RAB_Att_Voice,
                        RAB_STP_and_ACC_CR_Voice = y.RAB_STP_and_ACC_CR_Voice,
                        RAB_SR_AMR_Voice = y.RAB_SR_AMR_Voice,
                        Min_per_Drop_Voice = y.Min_per_Drop_Voice,
                        CS_Serv_Dur_Voice = y.CS_Serv_Dur_Voice,
                        RAB_Att_UDI = y.RAB_Att_UDI,
                        RAB_Stp_Acc_SR = y.RAB_Stp_Acc_SR,
                        RAB_SR_UDI = y.RAB_SR_UDI,
                        Min_Per_Drop_UDI = y.Min_Per_Drop_UDI,
                        CS_Serv_Dur_UDI = y.CS_Serv_Dur_UDI,
                        PS_NRT_RAB_Att = y.PS_NRT_RAB_Att,
                        PS_NRT_RAB_CR = y.PS_NRT_RAB_CR,
                        PS_NRT_RAB_SR_NW = y.PS_NRT_RAB_SR_NW,
                        PS_NRT_RAB_SR_User = y.PS_NRT_RAB_SR_User,
                        Packet_Session_Att = y.Packet_Session_Att,
                        Packet_Session_Stp_SR = y.Packet_Session_Stp_SR,
                        RAB_Att_Stream = y.RAB_Att_Stream,
                        RAB_Stp_Acc_SR_Stream = y.RAB_Stp_Acc_SR_Stream,
                        RAB_SR_Stream = y.RAB_SR_Stream,
                        M_RAB_Att = y.M_RAB_Att,
                        M_RAB_Stp_Acc_SR = y.M_RAB_Stp_Acc_SR,
                        M_RAB_SR = y.M_RAB_SR,
                        SHO_Update_Att_RT = y.SHO_Update_Att_RT,
                        SHO_Update_Att_NRT = y.SHO_Update_Att_NRT,
                        SHO_SR_RT = y.SHO_SR_RT,
                        SHO_SR_NRT = y.SHO_SR_NRT,
                        SHO_Overhead = y.SHO_Overhead,
                        Inter_Sys_HHO_Att_RT = y.Inter_Sys_HHO_Att_RT,
                        Inter_Sys_HHO_Att_NRT = y.Inter_Sys_HHO_Att_NRT,
                        Inter_Sys_HHO_RT_SR = y.Inter_Sys_HHO_RT_SR,
                        Inter_Sys_HHOO_NRT_SR = y.Inter_Sys_HHOO_NRT_SR,
                        Inter_Sys_HHO_RT_DR = y.Inter_Sys_HHO_RT_DR,
                        Inter_Sys_HHO_NRT_DR = y.Inter_Sys_HHO_NRT_DR,
                        Inc_IS_Change_Att = y.Inc_IS_Change_Att,
                        Intra_Sys_HHO_Att = y.Intra_Sys_HHO_Att,
                        Intra_Sys_HHO_SR = y.Intra_Sys_HHO_SR,
                        R99_Allo_DL_DCH_Cap_Data_Call = y.R99_Allo_DL_DCH_Cap_Data_Call,
                        R99_Allo_UL_DCH_Cap_Data_Call = y.R99_Allo_UL_DCH_Cap_Data_Call,
                        HSDSCH_Selections = y.HSDSCH_Selections,
                        HSDPA_Res_Acc_NRT = y.HSDPA_Res_Acc_NRT,
                        HSDPA_Res_Retain_NRT = y.HSDPA_Res_Retain_NRT,
                        HSDPA_Res_Retain_RT = y.HSDPA_Res_Retain_RT,
                        HSDPA_Attempt = y.HSDPA_Attempt,
                        HSDPA_SR = y.HSDPA_SR,
                        Avg_MAC_D_THP = y.Avg_MAC_D_THP,
                        Act_HSDSCH_MAC_D_THP_NW = y.Act_HSDSCH_MAC_D_THP_NW,
                        HSDPA_DL_DATA_Rcvd_NodeB = y.HSDPA_DL_DATA_Rcvd_NodeB,
                        HSDPA_MAC_HS_Data_Vol_at_RNC = y.HSDPA_MAC_HS_Data_Vol_at_RNC,
                        HSPDA_MAC_HS_Efficiency = y.HSPDA_MAC_HS_Efficiency,
                        HARQ_Non_Ack_Ratio_Mean = y.HARQ_Non_Ack_Ratio_Mean,
                        HSDPA_SCC_Att = y.HSDPA_SCC_Att,
                        E_DCH_Selections = y.E_DCH_Selections,
                        HSUPA_Res_Acc_NRT = y.HSUPA_Res_Acc_NRT,
                        HSUPA_Res_Retain_NRT = y.HSUPA_Res_Retain_NRT,
                        HSUPA_Res_Retain_RT = y.HSUPA_Res_Retain_RT,
                        HSUPA_Att = y.HSUPA_Att,
                        HSUPA_SR = y.HSUPA_SR,
                        HSUPA_MAC_es_Data_Vol_RNC = y.HSUPA_MAC_es_Data_Vol_RNC,
                        HSUPA_MAC_es_BLER = y.HSUPA_MAC_es_BLER,
                        E_DCH_HARQ_Non_Ack_Ratio = y.E_DCH_HARQ_Non_Ack_Ratio,
                        HSUPA_SCC_Att = y.HSUPA_SCC_Att,
                        AVG_CS_Traffic = y.AVG_CS_Traffic,
                        Inc_SMS_Att = y.Inc_SMS_Att
                    };

            Chart1.DataSource = q;
            Chart1.Series[0].XValueMember = "PeriodStartTime";
            Chart1.Series[0].YValueMembers = HiddenFieldSeries1.Value.ToString();

            Chart1.Series.Add(HiddenFieldSeries2.Value);
            Chart1.Series[1].XValueMember = "PeriodstartTime2";
            Chart1.Series[1].YValueMembers = HiddenFieldSeries2.Value.ToString();
    }
} 
```

我们可以简化 Linq 选择新代码吗？虽然我只需要 4 列.. :(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T19:50:12.183

就您的评论/标签而言，您的问题没有太大意义，所以我做出了最好的猜测：

```
DDLLessons.DataSource = lesson;
DDLLessons.DataBind();

var query = from x in db.Scores
            where x.StudentName == DDLStudentName.SelectedItem.Value
            select new {
               Day = x.Day,
               Class = DDLLessons.SelectedItem.Value
            }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T19:55:52.733

您是否正在寻找使用字符串动态选择表名（这是我的理解）。如果是，请查看此内容并从字符串中选择表对象：

[如何在运行时使用动态 LINQ 动态选择我的表](https://stackoverflow.com/questions/5032228/how-can-i-dynamically-select-my-table-at-runtime-with-dynamic-linq)

从上面的链接中，这与您相关：

> ```
> '' get the table from a type (which corresponds to a table in your database)
> Dim typeName = "DatabaseTest.AdventureWorks." & tableName & ", DatabaseTest"
> Dim entityType = Type.GetType(typeName)
> Dim table = dc.GetTable(entityType)
> Dim query As IQueryable = table 
> ```

（代码的功劳归于我提供的链接上答案的原始海报）

更新：*C# 版本的代码*：

> ```
> // get the table from a type (which corresponds to a table in your database)
> string typeName = "DatabaseTest.AdventureWorks." + tableName + ", DatabaseTest";
> Type entityType = Type.GetType(typeName);
> object table = dc.GetTable(entityType);
> IQueryable query = table as IQueryable; 
> ```

# python - python嵌套函数内存泄漏？

> ID：11852844
> 
> 赞同：2
> 
> 时间：2012-08-07T19:35:19.627
> 
> 标签：python, function, memory, nested, memory-leaks

从以前的 java 经验中，我知道如果两个 GUI 类对象包含彼此的成员变量引用，则可能存在内存泄漏，直到两个对象都被销毁。

这种情况调试起来非常混乱，所以我想使用严格的指导方针来避免现在在 python 中的内存泄漏。

我目前有一个 GUI 系统，其中有一个主窗口（parent_window）和许多子窗口（子窗口），弹出用户的辅助选项等。

我认为防止内存泄漏的一种简单方法是不要在所有子窗口中保留父窗口的类成员变量。

```
class child_window(object):
    def make_child_window(self, parent_window):
        def on_ok(): parent_window.show()
        QtCore.QObject.connect(self.okbutton, QtCore.SIGNAL("clicked()"), on_ok) 
```

如您所见，我有一个调用 parent_window 的嵌套函数，该函数仅包含在类方法的本地范围内（“make_child_window”）。这是作弊吗？在较低级别上，python 本质上是否将我的“parent_window”存储为类变量？对于将 child_window 与内存中的 parent_window 隔离开来，您还有哪些其他建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T19:57:56.897

您可以调用 parent，因为它是自己的/派生的方法

```
class child_window(object):
    def make_child_window(self): # no need for parent
        def on_ok(): self.show() #no need for parent
        QtCore.QObject.connect(self.okbutton, QtCore.SIGNAL("clicked()"), on_ok) 
```

这是有效的，因为 self 实例是方法的字典，并且包含所有派生类的所有方法，因此您可以从任何范围访问它们。

这也回答了您关于 GC 的第一个问题，即只有一个引用，孩子的自我也是父母的自我，派生类也一样。

更深入。您可以从 child 调用`parent_object.show(self)`具有参数的`show(self)`静态方法，`self`以明确告诉从哪个类中使用 instance 上的方法`self`。

`self`只是实例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T18:00:30.463

我发现弱引用是一个很好的解决方案。

这意味着“父”GUI 窗口包含对后续“子”GUI 窗口的强引用，并且必要时，每个子窗口都包含对父窗口的弱引用。

然后，当父级从内存中删除时，子级也将被删除，因为不存在循环引用。

# matlab - 在 MATLAB 中使用两个通道生成声音

> ID：11852846
> 
> 赞同：0
> 
> 时间：2012-08-07T19:35:32.323
> 
> 标签：matlab, signal-processing, audio, audio-processing

我正在尝试使用两个通道创建声音。我发送两个不同频率的信号。

我试图在没有*Data Acquisition Toolbox*的情况下做到这一点。有可能做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T20:46:21.947

您可以将两个信号重新采样到相同的采样频率，将它们组合为矩阵列，然后使用该`wavwrite`函数创建一个 WAVE 文件（或直接使用 播放声音`soundsc`）

# android - 在无效状态下调用停止：1

> ID：11852852
> 
> 赞同：1
> 
> 时间：2012-08-07T19:36:31.783
> 
> 标签：android, android-intent

我正在尝试在 android 中构建通话记录器。我正在使用`MediaRecorder`类：当我的应用程序到达以下行时：`recorder.stop()`我收到以下错误：

```
stop called in an invalid state: 1 
```

是什么导致了这个问题？

提前致谢，

科比

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T19:41:46.387

从 MediaRecorder 文档页面：

[http://developer.android.com/reference/android/media/MediaRecorder.html](http://developer.android.com/reference/android/media/MediaRecorder.html)

看给出的状态图，只有在状态`stop()`时才能调用`MediaRecorder``Recording`

没有代码很难说你做错了什么，但你必须处于错误的状态才能调用`stop()`.

# rest - Nginx url重写为restful url

> ID：11852854
> 
> 赞同：2
> 
> 时间：2012-08-07T19:36:43.643
> 
> 标签：rest, configuration, url-rewriting, nginx, static-files

我有一个 Rails 网络应用程序，它在动态静态 url 下有静态文件。例如：

```
/projects/1/attachments/some_file.xls 
```

我想设置 Nginx 以重定向到服务器上的静态文件：

```
/public/attachments/1/some_file.xls 
```

其中 1 是动态项目 ID。

位置块和重写语句如何查找 Nginx 配置文件？

* * *

**更新**

我在下面标记了一个答案，因为它回答了我原来的问题。尽管在我的情况下不需要重写我的项目附件 url。我忘记了我已经在我的 Rails 视图 erb 中重新映射了 url。

我真正的目标是阻止 Thin 将缓存响应标头添加到我的附件文件中。最终，我可以通过添加如下附件的位置来使用 Nginx 来防止这种情况：

```
location /attachments/ {
    expires    off;
    add_header Pragma "no-cache";
    add_header Cache-Control "no-cache, no-store";
    access_log off; 
    break;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T18:38:42.027

这是一个简单的例子。

```
location /project/ {
    rewrite ^/project/([0-9]+)/attachments/(.*)$ /public/attachments/$1/$2 last;
} 
```

如果需要更复杂的规则，请查看官方帮助。

[http://wiki.nginx.org/HttpRewriteModule#rewrite](http://wiki.nginx.org/HttpRewriteModule#rewrite)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T19:39:35.093

Sounds like you're doing something wrong with your image/file library, as you shouldn't have to do any nginx rewrite rules for Paperclip, Dragonfly, etc to just work. For example in Paperclip you can set the url and/or path format explicitly when you use the DSL in the Model. For Paperclip it would look like this:

```
has_attached_file :attachment,
                  :url => '/attachments/:id/:style/:basename.:extension',
                  :path => ':rails_root/public/attachments/:id/:style/:basename.:extension' 
```

Then everything should get served by nginx automatically since it's in your public directory. No rewrite rule necessary.

# visual-studio-2010 - 提升与 Visual Studio 2010 的链接

> ID：11852855
> 
> 赞同：0
> 
> 时间：2012-08-07T19:36:48.393
> 
> 标签：visual-studio-2010, boost

我已经使用 bjam 和 Visual Studio 2010 使用以下命令成功构建了 boost：

bjam --build-dir=c:\boost --build-type=complete --toolset=msvc-10.0 address-model=64 architecture=x86 --with-system

我还将 stage/lib 目录设置为 Visual Studio 中的 lib 目录。

但是，链接器给了我这个：

致命错误 LNK1104：无法打开文件“libboost_filesystem-vc90-mt-gd-1_50.lib”

为什么要寻找“vc90”版本的库？目录中有vc100版本..我该如何更改？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-28T07:30:53.383

检查项目属性中的编译器设置（您可以选择 vc90 (2008)、vc100 (2010)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T20:55:06.083

您可以在项目设置中明确指定库的路径。首先，您需要在项目中包含要链接的库名称。

![添加库](../Images/97a82c987dad5658a2260ece825a382c.png)

现在我们必须指定目录，在其中可以找到上面指定的库。

![指定上一个图像中的库所在的目录](../Images/17f0f99397746d1011e248de222df9b5.png)

我希望，这会有所帮助。

# macos - 在 Mountain Lion 上开发 Snow Leopard 应用程序？

> ID：11852866
> 
> 赞同：2
> 
> 时间：2012-08-07T19:37:18.153
> 
> 标签：macos, osx-snow-leopard, osx-mountain-lion

所以，我需要为我所在都市区的一所学校开发几个应用程序，但他们目前仍然有 1:1 笔记本电脑程序，使用旧的、已弃用的 MacBook 并仍在运行 Snow Leopard。这完全是现在，他们说也许在不久的将来他们可能会更新为 Lion 或 Mountain Lion。我现在正在运行 Mountain Lion，但我想知道，如果我为 Mountain Lion 开发 Mac 应用程序，它是否仍可与 Snow Leopard 一起使用。另外，我是否可能需要省略更新的功能，例如通知中心以允许将应用程序移植到 Snow Leopard？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T11:56:12.533

您可以在构建应用程序时选择开发目标。因此，使用 Mountain Lion 为 Snow Leopard / Lion 构建应用程序是没有问题的。但是你不能使用新功能。

# ruby-on-rails - 定义一个在任何地方都可以使用的 Rails 辅助（或非辅助）函数，包括模型

> ID：11852869
> 
> 赞同：4
> 
> 时间：2012-08-07T19:37:31.287
> 
> 标签：ruby-on-rails

我有一个功能可以做到这一点：

```
 def blank_to_negative(value)
    value.is_number? ? value : -1
  end 
```

如果传递的值不是数字，则将值转换为 -1。

我主要为某个模型创建了这个函数，但是在任何一个模型中定义这个函数似乎都不合适，因为这个函数的应用范围显然可以超出任何一个特定的模型。我几乎可以肯定在其他模型中需要这个功能，并且可能在视图中。

**定义此功能然后在任何地方使用它的最“Rails Way”方式是什么，尤其是在模型中？**

我试图在 中定义它`ApplicationHelper`，但它不起作用：

```
class UserSkill < ActiveRecord::Base
  include ApplicationHelper
  belongs_to :user
  belongs_to :skill

  def self.splice_levels(current_proficiency_levels, interest_levels)
    Skill.all.reject { |skill| !current_proficiency_levels[skill.id.to_s].is_number? and !interest_levels[skill.id.to_s].is_number? }.collect { |skill| {
      :skill_id => skill.id,
      :current_proficiency_level => blank_to_negative(current_proficiency_levels[skill.id.to_s]),
      :interest_level => blank_to_negative(interest_levels[skill.id.to_s]) }}
  end 
end 
```

那告诉我

> 未定义的方法 `blank_to_negative' 用于#

无论如何，我读到[你“永远”不应该做那种事情](https://stackoverflow.com/questions/8544230/accessing-applicationhelper-from-user-rb-model)，所以我有点困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T19:47:04.387

如果您想在项目中的*每个*类中都有这样的辅助方法，那么您可以自由地将其添加为方法`Object`或任何您认为合适的方法：

```
module MyApp
  module CoreExtensions
    module Object
      def blank_to_negative
        self.is_number? ? self : -1
      end
    end
  end
end

Object.send :include, MyApp::CoreExtensions::Object 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T19:46:45.603

有几个选项：

*   Monkey-patch 该方法到 ActiveRecord 中，它将在您的所有模型中可用：

    ```
    class ActiveRecord::Base
      def blank_to_negative(value)
        value.is_number? ? value : -1
      end
    end 
    ```

*   添加一个“关注”模块，然后将其混合到选定的模型中：

    ```
    # app/concerns/blank_to_negate.rb
    module BlankToNegate
      def blank_to_negative(value)
        value.is_number? ? value : -1
      end
    end

    # app/models/user_skill.rb
    class UserSkill < ActiveRecord::Base
      include BlankToNegate
      # ...
    end 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T19:58:50.223

Ruby 数据类型功能可以扩展。它们没有密封。既然您想在所有地方使用它，为什么不扩展`FIXNUM`功能并`blank_to_negative`为其添加方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T14:30:06.483

这就是我最终做的事情。我把这段代码放在`config/initializers/string_extensions.rb`.

```
class String
  def is_number?
    true if Float(self) rescue false
  end 

  def negative_if_not_numeric
    self.is_number? ? self : -1
  end 
end 
```

另外，我重命名`blank_to_negative`为`negative_if_not_numeric`, 因为`some_string.negative_if_not_numeric`比`some_string.blank_to_negative`.

# windows - 列出在登录屏幕上对用户可见的 Windows 用户帐户

> ID：11852872
> 
> 赞同：1
> 
> 时间：2012-08-07T19:37:39.487
> 
> 标签：windows, user-accounts

我想列出 Windows 用户帐户，但仅列出在登录屏幕上可见的用户帐户，即在 Windows 启动后显示的用户帐户。

我用谷歌搜索，我发现的一切都归结为这种方法： [http ://www.mydigitallife.info/how-to-create-hidden-user-account-hide-user-account-from-welcome-screen-in-windows/](http://www.mydigitallife.info/how-to-create-hidden-user-account-hide-user-account-from-welcome-screen-in-windows/)

但是，在我的计算机上没有上述文章中提到的注册表项 - 我不想创建它们，我想检查已经存在的东西。

我使用以下查询：

```
List<string> list = new List<string>();

SelectQuery query = new SelectQuery("Win32_UserAccount");
ManagementObjectSearcher searcher = new ManagementObjectSearcher(query);

foreach (ManagementObject obj in searcher.Get())
{
     if (isInteresting(obj))
     {
         list.Add(obj.GetPropertyValue("Name").ToString());
     }
} 
```

通过上述查询返回的对象属性，我设法过滤了一些帐户（这些属性的完整列表：http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa394507(v=vs. 85).aspx#properties](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394507(v=vs.85).aspx#properties)），但从日常用户的角度来看，仍然存在一些垃圾（例如驱动程序供应商用于更新的帐户）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T02:35:09.680

该注册表项并不是帐户可能不会显示在登录屏幕上的唯一原因。以下是其他一些：

*   帐号已停用
*   该帐户没有交互式登录权限 (SeInteractiveLogonRight)
*   该帐户被明确拒绝交互式登录权限 (SeDenyInteractiveLogonRight)

通常 SeInteractiveLogonRight 被授予 Guest 用户以及 Administrators、Users 和 Backup Operators 组的成员。不属于这些组之一的任何帐户（Guest 除外）都可能不会显示在登录屏幕上。（我不确定如果 SeInteractiveLogonRight 已从这些组之一中删除会发生什么，如果登录屏幕仍然显示帐户，我不会感到惊讶。）

您可以使用[LsaEnumerateAccountRights](http://msdn.microsoft.com/en-us/library/windows/desktop/ms721790%28v=vs.85%29.aspx)检查帐户是否应用了 SeDenyInteractiveLogonRight，或使用[LsaEnumerateAccountsWithUserRight](http://msdn.microsoft.com/en-us/library/windows/desktop/ms721792%28v=vs.85%29.aspx)获取受影响帐户的列表。通常个人帐户而不是组被授予此权限，因此登录屏幕很可能以这种方式检查帐户。

# c++ - 模板可以计算 N 维网格存储和操作的最大数量级吗？

> ID：11852875
> 
> 赞同：1
> 
> 时间：2012-08-07T19:37:55.313
> 
> 标签：c++, templates, template-meta-programming, boost-mpl

免责声明：这是为了爱好发展 - 除非被要求这样做，否则我不会在专业工作中过度设计这么多。

想象一个 N 维曲面，例如线 (1D)、网格/圆 (2D)、立方体/球 (3D) 等，其中该曲面的每个轴都是有限的，因为它具有起点和终点，或者环绕。一个很好的例子是地球，那里有经度（环绕）、纬度（起点和终点），必要时还有高度和时间（假设这些起点/终点有一个特定的起点）。

处理这种情况的通用结构可能是这样的：

```
typedef NoAxis End;
typedef Axis<End>::NoWrap<0, 365> Time; // one year, if units are in days
typedef Axis<Time>::NoWrap<0, 35000> Height; // sea level to 35k meters
typedef Axis<Height>::NoWrap<-90, 90> Latitude;
typedef Axis<Latitude>::Wrap<-180, 180> Longitude; 
```

“Axis”类采用模板参数，即*下一个*轴；这形成了一个轴链，其中一个特殊类型“NoAxis”开始链。几何运算，例如查找两点之间的距离，是通过累积每个轴的计算来执行的。

**我的问题：**有没有办法，最好是通过模板元编程，以编程方式找到可以乘以每个轴的极值的最大数量级 - 想法是最大化表面分辨率 - 但不会溢出所用类型的存储包含值（例如，不要在 32 位系统上溢出 32 位等）。这个数量级必须考虑计算表面上点之间的距离，这涉及到求平方距离。

再一次，找到这个数量级的原因是为了获得给定存储类型可能的最高分辨率。

# javascript - 如何包装文本节点 用自己的分隔 标签？

> ID：11852883
> 
> 赞同：2
> 
> 时间：2012-08-07T19:38:41.910
> 
> 标签：javascript, jquery, html, web-services

我从无法修改返回数据的 Web 服务返回内容，例如：

```
<div id="entrance" style="">
    Habilitação / Diploma de Ensino Medio Diploma de Ensino Pre Universitario 
    <br>
    <br>
    Diploma Record of study 
</div> 
```

如何使用 jQuery 将两个句子包装在单独的 < p > 标签中？我知道我可以使用 .wrap 但这会包装整个内容。我需要正则表达式吗？

谢谢，托马斯

更新：

我的要求改为需要一个列表而不是段落，所以使用下面的答案，我稍微修改它以包装在 <li> 然后整个东西在一个 <ul>

```
jQuery('#entrance').show();
jQuery('#entrance').html(data).contents().each(function () {
if ( this.nodeType === 3 ) jQuery( this ).wrap( '<li />' );
    else jQuery( this ).remove();
});
jQuery('#entrance').wrapInner('<ul />'); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T19:45:23.803

怎么样：

```
$( '#entrance' ).contents().each(function () {
    if ( this.nodeType === 3 && $.trim( this.data ) !== '' ) {
        $( this ).wrap( '<p />' );
    } else {
        $( this ).remove();
    }
}); 
```

**现场演示：http:** [//jsfiddle.net/ZMD6m/5/](http://jsfiddle.net/ZMD6m/5/)

我的代码将所有非空文本节点转换为包含该文本的段落。所有其他类型的节点都将被删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T19:55:50.300

此方法用于`$(this).text()`查找每个子元素的长度。如果为零，则将其删除，否则将其包装在一个段落中：

```
$('#entrance').contents().each(function(i,el) {
    if ($.trim($(this).text()).length) {
        $(this).wrap('<p>');
    } else {
        $(this).remove();
    }
});​ 
```

[http://jsfiddle.net/mblase75/ZMD6m/3/](http://jsfiddle.net/mblase75/ZMD6m/3/)

# android - 删除 ImageView 自动调整大小

> ID：11852886
> 
> 赞同：3
> 
> 时间：2012-08-07T19:38:55.727
> 
> 标签：android, scaling, android-imageview, crop

我想在我的屏幕设备上放置一个带有大 Y 边距的 ImageView，这意味着图像的一部分将超出屏幕，然后图像将被裁剪。

问题是Android一直在缩放图像，以便它适合屏幕，但我不希望这样，我希望图像被裁剪。

如何强制 ImageView 被裁剪而不是调整大小？

PS 我尝试了所有可能的 ScaleType 属性，但没有一个对我有用！

代码 ：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content" >

<ImageView 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginTop="200dp"
    android:background="@drawable/my_image"
    android:scaleType="centerCrop"
    />      

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T20:21:24.947

尝试替换`android:background`为`android:src`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T21:01:35.583

您的代码的第一个问题是您使用了：

```
android:background="@drawable/my_image" 
```

代替：

```
android:src="@drawable/my_image" 
```

（在背景下，任何 scaleType 选项都不起作用）。

现在，如果这仍然没有帮助，您可能必须使用 scaleType="matrix" 然后简单地创建一个矩阵来完成所需的工作。例如，假设您想要：

*   保持图像的比例
*   缩放图像，使宽度参数等于 X（例如：X 可以是屏幕的宽度）
*   使图像的顶部可见（因此裁剪图像的底部）-我假设这就是 centerCrop 可能不适合您的原因

这是代码：

```
ImageView imgView = (ImageView)findViewById(R.id.my_image_view);    
Bitmap bitmap = BitmapFactory.decodeResource(getResources(), 
    R.drawable.my_image);

Matrix matrix = new Matrix();
// Let's assume X = 400
float scale = ((float) 400) / bitmap.getWidth();
matrix.setScale(scale, scale);

imgView.setImageMatrix(matrix); 
```

并记住在 xml 文件中进行必要的更改。

# sql - 同一张表上的 SQL 多个连接和求和

> ID：11852887
> 
> 赞同：2
> 
> 时间：2012-08-07T19:38:56.333
> 
> 标签：sql, sql-server

我在做一个项目时正在学习 SQL，希望能在以下方面提供一些帮助。我对stackoverflow也很陌生，所以如果我的格式关闭，我深表歉意：

我有一个包含日期、组、人员、金额列的表。对于每一天，我都有一个条目，每个人都有一个数量和他们所在的组，所以一行看起来像：

```
 Date    Group   Person   Amount
8/7/2012     A     Steve     10 
```

我正在尝试编写一个语句，该语句将返回两天内所有组的总和。

我有：

```
Select t1.group,sum(t1.amount),sum(t2.amount)
  From table t1, table t2
 Where t1.group=t2.group AND t1.date=current_date-1 AND t2.date=current_date-2
 Group by t1.group 
```

我没有收到任何错误，但是这两个总和与我做的不同

```
Select date,sum(amount) From table Group by date 
```

看看有问题的日子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T19:41:44.057

你为什么要在两张桌子之间加入？

我想你想要：

```
Select t.group,
       sum(case when t.date = current_date - 1 then t.amount end),
       sum(case when t.date = current_date - 2 then t.amount end)
From table t
Group by t.group 
```

# php - HTML 表单无法正常工作

> ID：11852888
> 
> 赞同：0
> 
> 时间：2012-08-07T19:39:01.153
> 
> 标签：php, html, forms, sendmail

我构建了一个 HTML 表单，每当我提交它时，我都会被要求打开 G Mail 或 Outlook。当我这样做时，会使用正确的电子邮件地址打开一封新电子邮件。问题是我希望它在不打开任何东西的情况下发送。我只想对表单使用 HTML，而不是 PHP/MySQL。

```
 <form method="post" action="mailto:contact@walkerloden.com" enctype="text/plain">
            <p>Name: <input type="text" name="Name" size="20"></p>
            <p>Email: <input type="text" name="Email" size="20"></p>
            <p><input type="submit" value="Submit" name="Submit"></p>
        </form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T19:42:32.673

真正不支持表单操作`mailto`- 如果您希望表单元素出现在具有所需地址的电子邮件中，这不是表单应该如何工作的方式。

您需要有一些服务器端代码，您可以将表单发布到该代码上，然后执行实际的电子邮件发送。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T19:44:49.393

您不应该将表单操作设置为 mailto 任何东西。

相反，您应该将其直接指向您编写的脚本，您可以在其中接受 POST 变量，然后发送电子邮件。有一个名为的原生 PHP 函数`mail()`可以做到这一点。您的代码应如下所示：

**HTML**

```
<form method="post" action="scripts/mailtome.php" enctype="text/plain">
    <p>Name: <input type="text" name="Name" size="20"></p>
    <p>Email: <input type="text" name="Email" size="20"></p>
    <p><input type="submit" value="Submit" name="Submit"></p>
</form> 
```

**PHP - mailtome.php**

```
<?php
    $name = stripslashes(trim($_POST['Name']));
    $email = stripslashes(trim($_POST['Email']));
    $to = 'email@address.com'; 
    $subject = 'CONTACT FORM';

    $body = "From: $name\n E-Mail: $email";

    if(mail($to, $subject, $body, $name.' - '.$email))
        echo("It worked");
    else
        echo("Something went wrong");
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T19:42:29.033

您不能在示例 HTML 上执行此操作。您必须需要 PHP 或类似发送邮件的东西。HTML 不能以这种方式工作。

操作邮件只打开您的默认邮件应用程序。

谷歌是你的朋友，先搜索再问。网络上有很多关于这方面的例子。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T19:52:31.607

看起来您正在尝试制作一个注册表单，用户在其中输入他们的姓名和电子邮件，然后按提交以将该信息通过电子邮件发送到contact@walkerloden.com。如果这是正确的，那么您有几个选择：

1.  使用 mailto 链接，这就是您在这里所做的。通常这些只是超链接而不是表单。这种技术将提示用户选择一个电子邮件客户端来实际发送电子邮件。当您被要求打开 gmail 或 Outlook 时，就会发生这种情况。好处是它不需要服务器。缺点是用户需要在电子邮件客户端中实际完成发送电子邮件的过程。
2.  制作一个能够发送电子邮件的服务器端脚本。您可以使用 PHP 或任何您想要的语言来执行此操作。然后制作一个提交给这个服务器端脚本的表单。在此选项中，用户只需按提交，但您必须设置服务器端脚本，您提到您不想这样做。

如果您碰巧在 WordPress 或其他博客软件之类的网站上运行此注册表单，它们通常会内置一些方法来制作注册表单，从而为您省去麻烦。

# php - MongoDB PHP 连接管理类

> ID：11852889
> 
> 赞同：-2
> 
> 时间：2012-08-07T19:39:01.323
> 
> 标签：php, oop, mongodb

我正在寻找一个体面的例子来创建一个 PHP 类来处理与多个 MongoDB 数据库的连接。我正在开发一个至少有五个独立数据库的项目。如果我每次调用数据库时都要连接/断开连接，那将是非常繁重的过程。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T20:00:42.543

查看[Doctrine2 及其 MongoDB](http://docs.doctrine-project.org/projects/doctrine-mongodb-odm/en/latest/)功能

当这个项目很大并且需要维护一段时间时，你还应该考虑考虑像[Symfony2](http://symfony.com/)这样的框架，它[与 Doctrine2 完美协调](http://symfony.com/doc/current/bundles/DoctrineMongoDBBundle/index.html)。虽然一开始可能感觉像是一块巨大的石头，但值得一读，一旦你进入它，你就不会再手动制作网站了:)

# javascript - 识别纯文本句子中的推特句柄

> ID：11852890
> 
> 赞同：1
> 
> 时间：2012-08-07T19:39:04.887
> 
> 标签：javascript, jquery, replace

我需要帮助识别纯文本句子中的 twitter 句柄（我认为它被称为句柄..），并在句柄周围包裹一个 span 标签。

所以如果我有一个这样构造的句子：

```
I can't wait to watch the 2012 London Olympic Games! @london2012 
```

我需要找到句柄并在其周围包裹一个 span 标签：

```
I can't wait to watch the 2012 London Olympic Games! <span>@london2012</span> 
```

这是我尝试过的：

```
function findHandle(text) {
    var handle = text.substr(text.indexOf("@"), text.indexOf(" "));
    return text.replace(handle, "<span>" + handle + "</span>");
} 
```

我的代码没有按计划工作。最好的方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T19:46:27.443

假设您的文本内容在一个`div`元素中，以下似乎有效（尽管没有彻底测试）：

```
$('div').html(
    function(i,html) {
        return html.replace(/@[\d\D]+\b/g, '<span>$&</span>');
    });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/GqUbT/)。

以上似乎[有点脆弱](http://jsfiddle.net/davidThomas/GqUbT/10/)，所以我将正则表达式选择器更改为：

```
$('div').html(
    function(i,html) {
        return html.replace(/(@\w+)/g, '<span>$&</span>');
    });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/GqUbT/1/)。

参考：

*   [`html()`](http://api.jquery.com/html/).
*   [JavaScript 正则表达式，在 Mozilla 开发者网络](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)。
*   [`string.replace()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace).

# javascript - 如何增加 Node 中 Whois 服务器的最大连接数？

> ID：11852895
> 
> 赞同：0
> 
> 时间：2012-08-07T19:39:17.817
> 
> 标签：javascript, node.js, coffeescript, connection

我正在查询 Whois 服务器以获取有关许多域的信息。这是我的请求代码：

```
checkDomain (domain, callback) ->
    client = net.connect {port: 43, host: 'whois.examplenic.com'}, ->
        client.write domain + '.com' + '\r\n'

        client.on 'data', (data) ->
            ... do something with data ... 
```

`checkDomain`我首先有一些按顺序触发的代码。然后我决定一次尝试 2 个，结果翻了一番。但是在4之后，性能根本没有增加。这意味着节点或 Whois 服务器将连接数限制为 4。有没有办法告诉我？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T19:45:15.230

您可以使用不同的 Whois 服务器尝试您的代码。如果性能不同，则表明存在依赖于服务器的瓶颈；如果相同，则表明存在节点瓶颈。我*非常*怀疑 Node 只有 4 个并发连接会有任何问题，因此您更有可能看到依赖于服务器的瓶颈；但你要求一种方式来告诉所以你去。

# asp.net - ASP.Net webform/mvc3 - 为多页pdf文档的每一页添加链接

> ID：11852898
> 
> 赞同：0
> 
> 时间：2012-08-07T19:39:22.143
> 
> 标签：asp.net, pdf

我即将推出的移动 Web 应用程序项目将包括从网页链接到多页 pdf 文档的每一页。

左侧会有一个包含所有页面标题的菜单，当用户单击一个时，它将把他们带到 pdf 文档中的那个页面。

是否可以以这种方式链接各个页面？

pdf 将从 pdf 列表中动态选择。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T16:55:18.200

您可以使用如下 URL 在特定页面打开 PDF

```
http://www.example.com/my.pdf#page=3 
```

不过，您应该以某种方式找出页面的标题。

# javascript - 帧间 SOP - Chrome 扩展

> ID：11852899
> 
> 赞同：5
> 
> 时间：2012-08-07T19:39:27.953
> 
> 标签：javascript, jquery, google-chrome, google-chrome-extension, gmail

在 Chrome 扩展程序中，我正在尝试获取 gmail 撰写正文内容。

偶尔会出现错误，但不会阻止它工作。

这是作为内容脚本运行的。我相信权限不是这里的问题，因为当缺少权限时，错误是不同的并且操作被Chrome**阻止**，绝对不是这种情况。

此行出现错误：

```
encodeURIComponent($canvas.find('iframe').contents().find('body').text()); 
```

在哪里

```
var $canvas = $('#canvas_frame').contents(); 
```

有关此错误和可能的转变的任何信息？![在此处输入图像描述](../Images/38c6c943663dcbacf26d92c85c1dd47d.png "尝试在新选项卡中查看图像")

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T07:15:52.847

您无法使用 javascript 读取跨站点内容。Google Chorme 的 XSS 审核员绝不会允许这样做。

请查看[http://en.wikipedia.org/wiki/Same_origin_policy](http://en.wikipedia.org/wiki/Same_origin_policy)

### 更新 1 -

在 Chrome 2+ 中支持使用 window.postMessage() 进行跨站点通信。请查看此文档[https://developer.mozilla.org/en-US/docs/DOM/window.postMessage](https://developer.mozilla.org/en-US/docs/DOM/window.postMessage)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T15:15:22.763

为了给出一个好的答案，我们需要更多信息：

*   您究竟在哪里运行此代码，是在网页中、扩展程序的内容脚本还是 etension 的后台脚本中？
*   另外，您的 manifest.json 文件是什么样的？您已请求在哪些网站上运行。

我怀疑这是一个写得很糟糕的错误消息，实际上它是在说：您的扩展程序没有在 apis.google.com 上运行的权限。在这种情况下，只需为 apis.google.com 添加权限。更多详细信息在 Chrome 扩展文档中：http: [//developer.chrome.com/extensions/manifest.html#permissions](http://developer.chrome.com/extensions/manifest.html#permissions)

# postgresql - 在现在遗留的 Heroku 共享数据库上允许多少并发连接（并且是否有任何缓存）？

> ID：11852902
> 
> 赞同：1
> 
> 时间：2012-08-07T19:39:46.957
> 
> 标签：postgresql, caching, heroku, migration, hosting

我正在从旧的 Heroku 共享数据库迁移到等效的新计划。根据我的总表行数，基本数据库似乎是正确的选择。

然而，Heroku 在谈到所需的迁移时做了以下说明：

> 请注意，开发和基本数据库的连接数限制为 20 个。如果您需要更多连接，请配置生产层数据库。

Heroku 现在还指定 Dev 和 Basic 有 0MB 的缓存。

我的问题是旧的 5MB/20GB “共享”数据库是否允许超过 20 个连接（或者是否有限制，以及它是什么），以及在哪里有缓存。我猜答案是否定的（这里与测功机的数量有什么关系，顺便说一句？），但我在他们的文档中找不到规格。如果答案是肯定的，那么它可能会改变我对升级到 Basic 与 Crane 的想法，如果这在性能方面会更等效，尽管 10M 行足够多，记录方面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T19:48:26.217

在性能方面，新的开发计划和基本计划与旧的共享计划相当。连接限制可以看作是连接到数据库的测功机数。它与数据库本身的性能无关。有 20 个连接限制，这意味着您只能有 20 个 dyno（假设为单线程代码）连接到您的数据库。

根据我们的经验，如果您有超过 20 个测功机，则无论如何都应该在更高容量的数据库上运行以提高性能和生产能力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T20:27:47.753

您应该考虑在应用程序代码中或某处作为中间层的连接池。

[http://wiki.postgresql.org/wiki/Number_Of_Database_Connections](http://wiki.postgresql.org/wiki/Number_Of_Database_Connections)

# cordova - Phonegap - 为用户提供 PictureSourceType 选项

> ID：11852903
> 
> 赞同：2
> 
> 时间：2012-08-07T19:39:55.287
> 
> 标签：cordova, camera, getpicture

刚开始：

我的 PhoneGap 应用程序有时会通过表单将图像上传到服务器。

我可以从 CAMERA 获取图像，也可以从 PHOTOLIBRARY 获取图像。

有没有一种方法可以指定多个来源，`sourceType: Camera.PictureSourceType`或者一次只需要一个。

换句话说...

有没有办法让用户选择他们的 PhoneGap 原生的照片源，或者我需要创建自己的 2 个按钮，用户可以在其中选择“拍照”或“从库中选择照片”

我在构建 2 按钮解决方案时没有任何问题，但如果我不需要的话，我不想构建它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T20:04:48.870

据我所知，没有办法完成您所解释的内容。您可以在[Phonegap Doc](http://docs.phonegap.com/en/2.0.0/cordova_camera_camera.md.html#camera.getPicture)中看到可能的选项是您提到的两个。我遇到了同样的问题，最后打开了一个对话框，让用户选择图片的来源。

# java - 如何使用 Hibernate 将 SQL 查询的结果最好地映射到非实体 Java 对象？

> ID：11852910
> 
> 赞同：17
> 
> 时间：2012-08-07T19:40:50.090
> 
> 标签：java, hibernate, hibernate-mapping

我有一个名为 X 的 Hibernate 托管 Java 实体和一个从 Hibernate SQL 查询中调用的本机 SQL 函数 (myfunc)：

```
SQLQuery q = hibernateSession.createSQLQuery(
                     "SELECT *, myfunc(:param) as result from X_table_name"
             ); 
```

我想要做的是将从此查询返回的所有内容映射到一个名为 Y 的类（不一定由 Hibernate 管理）。 Y 应该包含来自 X 的所有属性/字段加上`result`返回的`myfunc`，例如 Y 可以扩展类 X 并添加一个“结果”字段。

我试过的：

1.  我试过使用`q.addEntity(Y.class)`，但这失败了： `org.hibernate.MappingException: Unknown entity com.mycompany.Y`
2.  `q.setResultTransformer(Transformers.aliasToBean(Y.class));`但这失败了：`org.hibernate.PropertyNotFoundException: Could not find setter for some_property`。X 有一个`someProperty`用适当的 getter 和 setter 调用的字段，但在这种情况下，Hibernate 似乎没有将列名 (some_property) 映射到正确的字段名。
3.  `q.setResultTransformer(Criteria.ALIAS_TO_ENTITY_MAP);`返回一个 Map，但值并不总是 X 中相应字段所期望的类型。例如，X 中类型为 enum 和 Date 的字段不能直接从 SQL 查询返回的 Map 映射（它们是字符串）。

处理这种情况的适当方法是什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-07T22:03:23.233

请参阅[文档中有关 SQL 查询的章节](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#d0e17378)。

您可以使用该`addScalar()`方法来指定 Hibernat 应该为给定列使用的类型。

您可以使用别名将结果与 bean 属性映射：

```
select t.some_property as someProperty, ..., myfunc(:param) as result from X_table_name t 
```

或者，（虽然它需要一些代码行，但这是我的首选解决方案），您可以简单地自己进行映射：

```
List<Object[]> rows = query.list();
for (Object[] row : rows) {
    Foo foo = new Foo((Long) row[0], (String) row[1], ...);
} 
```

这样可以避免反射，并让您控制一切。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-03-21T02:40:29.800

简单的。将行转换为`Map<String, Object>`：

```
final org.hibernate.Query q = session.createSQLQuery(sql);
q.setParameter("geo", geo);
q.setResultTransformer(Transformers.ALIAS_TO_ENTITY_MAP);
final List<Map<String, Object>> src = q.list();
final List<VideoEntry> results = new ArrayList<VideoEntry>(src.size());
for (final Map<String, Object> map:src) {
    final VideoEntry entry = new VideoEntry();
    BeanUtils.populate(entry, map);
    results.add(entry);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-01T08:56:34.240

首先，您需要在休眠配置 xml 文件中声明实体，如下所示：..... class="path to your entity"

或者，您可以在进行查询之前以编程方式执行相同的操作。

# jquery - 快速 jQuery 选择器子元素

> ID：11852911
> 
> 赞同：1
> 
> 时间：2012-08-07T19:41:03.517
> 
> 标签：jquery, class, element, this

我有一组这样的元素：

```
<ol id="selectable">
    <li class="ui-state-default">A</li>
    <li class="ui-state-default">B</li>
    <li class="ui-state-default">C</li>
    <li class="ui-state-default">D</li>
    <li class="ui-state-default">E</li>
    <li class="ui-state-default">F</li>
    <li class="ui-state-default">G</li>
    <li class="ui-state-default">H</li>
    <li class="ui-state-default">I</li>
    <li class="ui-state-default">J</li>
    <li class="ui-state-default">K</li>
    <li class="ui-state-default">L</li>
</ol> 
```

这是我的jQuery代码：

```
$(function() {
        $( "#selectable" ).click(function(){
            $(this).switchClass( "ui-state-highlight", 1000 );
            return false;   
        });
    }); 
```

出于某种原因，我无法理解我做错了什么。我想我可能误解了“this”的含义。我希望 switchClass 只切换我单击的任何元素的类。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T19:42:04.343

你想要的是这个

```
$(function() {
    // Use $( "#selectable > li" ) if you want to limit to direct children
    $( "#selectable li" ).click(function(){  //  binds the click event all li descendants of selectable
        $(this).switchClass("ui-state-default", "ui-state-highlight", 1000);  // this is now the li that was clicked
        return false;   
    });
}); 
```

更好的方法是委托，因为通过不将事件处理程序绑定到每个事件处理程序，`li`而是让父元素在事件冒泡时侦听事件，这样会更有效

```
$(function() {
    $( "#selectable" ).on('click','li'(function(){  
        $(this).switchClass("ui-state-default", "ui-state-highlight", 1000);  // this is now the li that was clicked
        return false;   
    });
}); 
```

除非您想单击​​每个无效的 #selectable，因为 ID 需要是唯一的。您可以将其更改为一个类并使用

```
$(function() {
    $( ".selectable" ).click(function(){  
        $(this).switchClass("ui-state-default", "ui-state-highlight", 1000);  
        return false;   
    });
}); 
```

您可以使用 toggleClass 如下

```
$(function() {
    $("#selectable").on('click', 'li', function() {
        $(this).toggleClass("ui-state-default ui-state-highlight"); // this is now the li that was clicked
        return false;
    });
});​ 
```

[http://jsfiddle.net/G33Mc/](http://jsfiddle.net/G33Mc/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T19:45:29.143

如果您正在寻找选择孩子，您可以使用以下任何一种方法。:)

```
$(function() {
    // this will find all immediate children inside #selectable
    $('#selectable').children().click(function() {
        $(this).switchClass('ui-state-highlight', 1000); 
    });

    // this will find all immediate children that, are an li, inside #selectable
    $('#selectable > li').click(function() {
        $(this).switchClass('ui-state-highlight', 1000); 
    });

    // alternatively, we could look for all anchors inside the li items
    $('#selectable li a').click(function() {
        $(this).switchClass('ui-state-highlight', 1000); 
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T19:45:41.750

假设您正在尝试在“默认”类和“突出显示”类之间进行转换，这似乎就是您想要的。这是一个附加到元素的委托事件，只要单击`#selectable`其中的一个，就会触发该事件。将参考点击。`li``this``li`

```
$( "#selectable" ).on('click','li',function(e){
    e.preventDefault();
    $(this).switchClass("ui-state-default", "ui-state-highlight", 1000);
}); 
```

# sql - 在查询中调用存储过程

> ID：11852914
> 
> 赞同：1
> 
> 时间：2012-08-07T19:41:13.907
> 
> 标签：sql, sql-server, stored-procedures

我想在我的查询中调用我的 sp，但有 2 个错误：

```
Msg 156, Level 15, State 1, Line 17
Incorrect syntax near the keyword 'EXEC'.

Msg 156, Level 15, State 1, Line 19
Incorrect syntax near the keyword 'AS'. 
```

这是我的查询：

```
 SELECT O.OrderId
  ,O.Number
  ,O.Creation
  ,(SELECT Name + ' ' + Surname FROM [User] WHERE UserId = (SELECT CreatedBy FROM [User] WHERE UserId = O.UserId) ) AS OrderOwner
  ,(SELECT Name + ' ' + Surname FROM [User] WHERE UserId = O.UserId )AS Customer
  ,(SELECT Telephone1 FROM [User]  WHERE UserId =  O.UserId) AS Telephone
  ,(SELECT CASE IsActive WHEN 1 THEN 'Indirimli' WHEN 0 THEN 'Indirimsiz' END AS Indirim FROM [User] WHERE UserId = O.UserId) AS Discount
  ,(SELECT CASE IsActive
     WHEN 0
     THEN 

         (SELECT SUM(Price) FROM Product WHERE ProductId IN( SELECT ProductId FROM OrderProduct WHERE OrderId = O.OrderId )) 
    WHEN 1
    THEN
    EXEC USP_CalculatePrice 70

    END AS Price
   FROM [User] WHERE UserId = O.UserID) AS Price

  ,O.Description
  ,O.Status 
  FROM
  [Order] AS O
  WHERE O.Status = 0 
```

你有什么建议吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-07T19:44:34.617

您不能在现有`select`语句中调用存储过程。您想要的是[用户定义的标量函数](http://www.sqlteam.com/article/user-defined-functions)（而不是表函数或内置函数）。

根据您真正想要做的事情，可以应用用户定义的表函数。在这种情况下，您将创建一个返回表的函数，然后您可以加入它。它们有点像视图，但接受参数。

# asp.net-mvc-3 - 如何在不创建新视图的情况下使用不同类型的参数？

> ID：11852926
> 
> 赞同：0
> 
> 时间：2012-08-07T19:42:08.653
> 
> 标签：asp.net-mvc-3, razor

我想同时创建一个包含字符串和 int 值的列表，如下所示：

```
@Html.ActionLink("Back to List", "IndexEvent", new { location = "location" }) 
```

和

```
@Html.ActionLink("Back to List", "IndexEvent", new { locationID = 1 }) 
```

它没有用。我猜MVC控制器没有得到参数的类型差异。所以，我必须创建一个新的 Action 作为“IndexEvenyByID”，但它需要有一个新的视图。既然我想保持简单，有没有办法对不同的参数使用相同的视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T19:47:36.173

尝试向`IndexEvent`操作中添加两个可选参数，如下所示：

```
public ActionResult IndexEvent(string location = "", int? locationID = null) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T19:49:33.020

这不应该需要新的视图或视图模型。正如您所描述的，您应该有两个操作，但代码可能如下所示：

**控制器**

```
public ActionResult GetEvents(string location){
    var model = service.GetEventsByLocation(location);
    return View("Events", model);
}

public ActionResult GetEventsById(int id){
    var model = service.GetEventsById(id);
    return View("Events", model);
} 
```

**服务**

```
public MyViewModel GetEventsByLocation(string location){
    //do stuff to populate a view model of type MyViewModel using a string
}

public MyViewModel GetEventsById(int id){
   //do stuff to populate a view model of type MyViewModel using an id
} 
```

基本上，如果您的视图将使用相同的视图模型并且唯一改变的是您如何获取该数据，那么您可以完全重用视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T20:00:58.790

如果你真的想坚持一个动作和多个类型，你可以使用一个对象参数。

```
public ActionResult GetEvents(object location)
{
    int locationID;
    if(int.TryParse(location, out locationID))
        var model = service.GetEventsByID(locationID);
    else
        var model = service.GetEventsByLocation(location as string);
    return View("Events", model);
} 
```

类似的东西（不完全正确，但它给了你一个想法）。然而，这并不是真正的“干净”方式来做 IMO。

（编辑）

但是 2 actions 方法仍然是更可取的（例如，如果我们能够将位置名称解析为 int 会发生什么？）

# shell - cp 仅非隐藏文件

> ID：11852929
> 
> 赞同：5
> 
> 时间：2012-08-07T19:42:24.083
> 
> 标签：shell, cp

有没有一种`cp`在 shell（在我的情况下为 MinGW）上运行以*仅复制非隐藏文件*（即名称不以 开头的文件`.`）的好方法？

我想排除我的`.svn`文件夹及其内容。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-07T19:49:26.260

shell 不会扩展`*`以包含以点开头的名称，因此：

```
cp * /target/directory 
```

那不会复制`.svn`目录。

如果这不是您的问题（例如，您正在尝试使用包含隐藏文件的子目录进行递归复制），请说明您在做什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T19:48:12.027

ls 本身只会显示非隐藏文件。如果你`echo $file`用你的 cp 命令替换该命令，那应该可以工作。

```
for file in `ls`; do echo $file; done 
```

像这样的东西可以正常工作：

```
for file in `ls`; do cp $file /path/to/desitination; done 
```

有更复杂的方法可以做到这一点，但对于您的需要，这似乎足够合适。

**免责声明：如果文件名中有空格，这将不起作用。

修复将只是使用星号通配符。如果您运行`echo *`，您会注意到这不会扩展到隐藏文件。感谢乔纳森·莱弗勒

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T19:48:33.477

您可以使用 ls 列出所有非隐藏文件并复制它：

```
cp $(ls) destination 
```

# cocos2d-iphone - 在 CCSpriteBatchNode 中更改 CCSprite 的不透明度

> ID：11852932
> 
> 赞同：1
> 
> 时间：2012-08-07T19:42:29.090
> 
> 标签：cocos2d-iphone, opacity, ccsprite

可以修改a`CCSprite`中的不透明度吗？`CCSpriteBatchNode`

以下似乎不起作用：

```
((CCSprite *)[batchNode getChildByTag:myTag]).opacity = 0.5; 
```

精灵只是消失了，而不是显示修改后的不透明度。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-08T01:28:19.247

这就是为什么查看类型是个好主意。`opacity`的属性`CCSprite`是 GLubyte。查看 GLubyte 的 typedef，我们看到它实际上是 unsigned char，这意味着它需要从 0 到 255 的整数值。随着`sprite.opacity = 0.5`您将浮点值隐式转换为 unsigned char，0.5 的小数部分被截断，并且 sprite.opacity 变为 0。

# vba - 为什么我的 Excel 电子表格将我的数字格式化为日期？

> ID：11852935
> 
> 赞同：4
> 
> 时间：2012-08-07T19:42:47.000
> 
> 标签：vba, excel

我们有很多自动电子表格，可以提取数据、计算预测、发布网页等。这是一个非常混乱的系统，我很想重做它（比如说，一个真正的网络服务），但我们没有有权这样做。

我们运行 Excel 2007，大部分电子表格都转换为`.xlsm`s。

无论如何，出于某种我不知道的原因，某些电子表格会在看似随机的时间将某些数字单元格格式化为日期。正如您可能想象的那样，这个问题很难追查，而且通常我只会在有人写了一封关于我们`3-Feb-1901`应该阅读的数据的讨厌电子邮件时才发现`400`（显然 Excel 认为 1900 年有闰年）。

我已经多次明确地将有问题的单元格设置为数字格式，但一周后却发现它们充满了日期。

我已经扫描了宏（许多都使用古老的[Excel 4.0 宏语言](http://www.microsoft.com/en-us/download/details.aspx?id=19243)），它们似乎没有任何格式更改。所有复制/粘贴都作为值完成，不保留源单元格格式。

相关工作表中没有条件格式规则。

在子例程中根据需要添加一点 VBA 来格式化单元格`Auto_Open`似乎可以解决这个问题。

此修复是否足够好，或者在一周内我会发现日期格式出现在计算中间？如果不是，根本原因是什么，我该如何解决？

一件事：我刚刚从[这个来源](http://www.excelforum.com/excel-general/768790-spreadsheets-numbers-change-to-date.html)读到Excel '07 可能会自发地将`Normal`-styled 单元格更改为 format `[$-409]m/d/yy h:mm AM/PM;@`。我的一些已经改变的细胞肯定是风格化的`Normal`，但显然不是全部。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T20:22:11.000

我假设有问题的单元格是复制/粘贴数据的接收者，还是外部/查询数据？

每当您将粘贴的数据添加到 Excel 中的单元格时，它都会运行一个例程来确定列为“通用”格式的任何内容的最佳格式，即使源是“通用”或“数字”。有时即使将目标单元格设置为“数字”格式也无法解决此问题。但是我发现让它按照您需要的方式工作的唯一方法是在粘贴/更新/刷新操作之前将格式（在宏中）显式声明到有问题的目标范围。

我还认为有一种方法可以在您的 VBA 中禁用日期识别，但我不记得确切的代码。尝试在手动导入或执行更新时录制宏，您应该能够使用出现的内容。

编辑：刚刚进行了测试运行，并在您的连接字符串和目标添加后：

```
.WebDisableDateRecognition = True 
```

如果您是从外部源中提取数据而不是复制/粘贴，那肯定可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T11:18:47.023

为了以防万一这有帮助，我遇到了一个问题，即 excel 将我从网页中提取的信息自动格式化为 DATE 格式，修复，在导入窗口中，单击选项并取消选中自动日期格式化选项，之后，我的数据导入完美！

# java - 在servlet上上传画布base64图像

> ID：11852937
> 
> 赞同：0
> 
> 时间：2012-08-07T19:43:07.363
> 
> 标签：java, javascript, html, servlets, canvas

我正在使用以下 JavaScript 代码通过 servlet 上传 HTML5 画布 base64 图像

```
function saveDataURL(a) {
    var postData = "canvasData="+a;
    var ajax = new XMLHttpRequest();
    ajax.open("POST",'uploadPhoto.cgi',true);
    ajax.send(postData);    } 
```

但是在服务器上，当我看到 request.getAttribute("canvasData") 时，即使我调试 java 代码请求显示为 null，它也会给我 null 值。我应该在 Java 上写什么代码，我尝试过解码 Base64 请求，但由于请求本身对代码没有任何帮助，非常感谢教程

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T20:33:25.883

除了 url 编码将内容类型设置为`application/x-www-form-urlencoded`

```
function saveDataURL(a) {
    var postData = "canvasData="+encodeURIComponent(a);
    var ajax = new XMLHttpRequest();
    ajax.open("POST",'uploadPhoto.cgi',true);
    ajax.setRequestHeader("Content-type","application/x-www-form-urlencoded");
    ajax.send(postData);    
} 
```

# c# - 无法删除文件，因为它正被另一个进程使用

> ID：11852938
> 
> 赞同：3
> 
> 时间：2012-08-07T19:43:11.807
> 
> 标签：c#, process, using

最后，当我尝试删除“foreach”循环中的文件时，我收到了错误消息。

我知道我需要在某处使用关键字“使用”，但我不确定在哪里以及如何使用。

```
private void btnEmailIntegrationFiles_Click(object sender, EventArgs e)
{
    DialogResult EmailWarningMsg = MessageBox.Show("You're about to email the Integration IAT text files. Are you sure?", "WARNING!", MessageBoxButtons.YesNo, MessageBoxIcon.Warning, MessageBoxDefaultButton.Button2);

    if (EmailWarningMsg == DialogResult.Yes)
    {
        if (Directory.GetFiles(AppVars.NetworkIntegrationFileLocation).Length == 0)
        {
            MessageBox.Show("The folder is empty. Please create the files before sending it.", "Error!", MessageBoxButtons.OK, MessageBoxIcon.Error);
        }
        else
        {
            if (Directory.GetFiles(AppVars.NetworkIntegrationFileLocation).Length != 4)
            {
                MessageBox.Show("The folder does not contain exactly 4 files.", "Error!", MessageBoxButtons.OK, MessageBoxIcon.Error);
            }
            else
            {
                Email email = new Email();

                email.SendEmailToFinalDestinationWithAttachments(AppVars.DBTeamEmail, AppVars.ChrisWhitmoreEmail, AppVars.DBTeamEmail, "Integration Files", "Please see integration files attached.");
            }
        }

        PopulateListViewWithPoliciesAvailableToHoldBack();

        string[] files = Directory.GetFiles(AppVars.NetworkIntegrationFileLocation);

        foreach (string file in files)
        {
            File.Delete(file);
        }
    }
} 
```

我将如何使用关键字`using`“发送电子邮件”，以便在尝试删除作为附件通过电子邮件发送的那些文件时不会遇到此错误消息？

这是发送电子邮件类：

```
public void SendEmailToFinalDestinationWithAttachments(string EmailFrom, string EmailTo, string EmailCC, string EmailSubject, string EmailBody)
        {
            try
            {
                MailMessage EmailMessage = new MailMessage();
                SmtpClient smtp = new SmtpClient(AppVars.SMTPClient, AppVars.SMTPClientPort);
                smtp.UseDefaultCredentials = false;
                EmailMessage.IsBodyHtml = true;
                EmailMessage.To.Add(EmailTo);
                EmailMessage.CC.Add(EmailCC);
                EmailMessage.CC.Add(user);
                EmailMessage.Subject = EmailSubject;
                EmailMessage.From = new MailAddress(EmailFrom);
                EmailMessage.Body = EmailBody;

                string[] files = Directory.GetFiles(AppVars.NetworkIntegrationFileLocation, "*" + DateTime.Now.ToString("yyyyMMdd") + "*");

                foreach (string file in files)
                {
                    EmailMessage.Attachments.Add(new Attachment(file));
                }

                smtp.Send(EmailMessage);
            }
            catch (Exception e)
            {
                MessageBox.Show(e.Message);
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T19:55:16.620

您需要将您的电子邮件类修改为：

```
using (MailMessage EmailMessage = new MailMessage()) {
    ...
    smtp.Send(EmailMessage);
} 
```

# java - 将图像添加到 Swing 应用程序

> ID：11852942
> 
> 赞同：0
> 
> 时间：2012-08-07T19:44:03.810
> 
> 标签：java, swing, imageicon

我对 Java 还很陌生，仍在学习它，但我想在 JFrame 中显示图像。我到处寻找答案，但是我还没有遇到任何有用的东西，我有一个跟踪 X 和 Y 坐标以及是否按下键的字符类。如果有帮助的话，这里是角色类的代码。

```
import java.awt.Image;
import java.awt.event.KeyEvent;
import javax.swing.ImageIcon;

public class Char {

    private String Char = "Char.png";
    private int dx;
    private int dy;
    private int x;
    private int y;
    private Image image;

    public Char() {
        ImageIcon ii = new ImageIcon(this.getClass().getResource(Char));
        image = ii.getImage();
        x = 40;
        y = 60;
    }

    public void move() {
        x += dx;
        y += dy;
    }

    public int getX() {
        return x;
    }

    public int getY() {
        return y;
    }

    public Image getImage() {
        return image;
    }

    public void keyPressed(KeyEvent e) {
        int key = e.getKeyCode();
        if (key == KeyEvent.VK_LEFT) {
            dx = -1;
            System.out.println("Left arrow key down.");
        }
        if (key == KeyEvent.VK_RIGHT) {
            dx = 1;
            System.out.println("Right arrow key down.");
        }
        if (key == KeyEvent.VK_UP) {
            dy = -1;
            System.out.println("Up arrow key down.");
        }
        if (key == KeyEvent.VK_DOWN) {
            dy = 1;
            System.out.println("Down arrow key down.");
        }
    }

    public void keyReleased(KeyEvent e) {
        int key = e.getKeyCode();
        if (key == KeyEvent.VK_LEFT) {
            dx = 0;
            System.out.println("Left arrow key up.");
        }
        if (key == KeyEvent.VK_RIGHT) {
            dx = 0;
            System.out.println("Right arrow key up.");
        }
        if (key == KeyEvent.VK_UP) {
            dy = 0;
            System.out.println("Up arrow key up.");
        }
        if (key == KeyEvent.VK_DOWN) {
            dy = 0;
            System.out.println("Down arrow key up.");
        }
    }
} 
```

Board 类应该使用 Char 类中的 getImage 方法并绘制图像，但我似乎在这行代码中得到了错误：

```
 ImageIcon ii = new ImageIcon(this.getClass().getResource(Char));
    image = ii.getImage(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T19:48:45.907

确保图像位于类路径的根位置或 Jar 的根路径（如果它被打包为一个）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T19:51:44.080

哟可以这样做：

```
//If the image is inside de classpath
ImageIcon ii = new ImageIcon(this.getClass().getResource("/path/to/image"));

//If the image outside de classpath
ImageIcon ii = new ImageIcon("/path/to/image"); //i.e. C:\\images\\x.png 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T08:23:41.577

用你的类名替换 this.getClass()

如果您的类名是 Craft (Zetcode)，则将 this.getClass() 替换为 Craft.class 和直接在 .java 文件旁边的 Char.png。它会工作

# java - 无法使用 getDeclaredFields() 检索 Scala 类的字段

> ID：11852950
> 
> 赞同：7
> 
> 时间：2012-08-07T19:44:42.310
> 
> 标签：java, scala, reflection

我正在尝试将 Java 库（Johm）与 Scala 一起使用，并注意到当 lib 尝试使用类似`model.getClass().getDeclaredFields()`.

然后我决定尝试用 Scala 解释器中的简单示例来做同样的事情：

```
scala> import java.lang.reflect.Field;
import java.lang.reflect.Field

scala> class myClass(attribute1: String, attribute2: String, attribute3: String)
defined class myClass

scala> val myInstance = new myClass("value1", "value2", "value3")
myInstance: myClass = myClass@7055c39a

scala> myInstance.getClass().getDeclaredFields()
res0: Array[java.lang.reflect.Field] = Array() 
```

事实上，我们根本没有任何领域。

现在，如果我试试这个怎么办：

```
scala> class myClass2(attribute1: String, attribute2: String, attribute3: String) { override def toString = this.attribute1 }
defined class myClass2

scala> val myInstance2 = new myClass2("value1", "value2", "value3")
myInstance2: myClass2 = value1

scala> myInstance2.getClass().getDeclaredFields()
res1: Array[java.lang.reflect.Field] = Array(private final java.lang.String myClass2.attribute1) 
```

因此，如果使用类方法之一中的字段之一，则由 getDeclaredFields() 找到。我在这里想念什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-07T20:03:09.247

您缺少的是*构造函数参数不会自动提升为 fields*。

相反，它们只有在使用时才会被提升。你用`attribute1`了所以它变成了一个领域；你没有使用其他人，所以他们没有。

如果您将它们声明为`val`or `var`，或者该类是案例类，它们也将被提升为字段（因为它们实际上会生成访问器方法，因此会被使用）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T19:59:40.900

如果您将字段标记为`val`或`var`，`getDeclaredFields`则会找到它们，例如，

```
class myClass(val attribute1: String) 
```

JavaDoc for[`getFields`](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getFields%28%29)说它返回“所有可访问的公共字段”，因此除非明确公开这些字段（默认情况下，构造函数参数是私有 val），否则不列出这些字段是有意义的。但是，JavaDoc for[`getDeclaredFields`](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getDeclaredField%28java.lang.String%29)没有提到这样的限制，但是字段的可见性显然在这里也有影响。

**编辑**以回应@Clément：

```
import java.lang.reflect.Field

class Foo(val a1: String, private val a2: String, a3: String, a4: String) {
  val f = 10
  def foo(s: String) = a4 + s
}

val foo = new Foo("v1", "v2", "v3", "v4")

foo.getClass().getDeclaredFields().foreach(println)
  /* {a1, a2, a4, f} */

foo.getClass().getFields().foreach(println)
  /* {} */ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T20:06:39.627

我的猜测是，这是因为 Scala 编译器不会为所有构造函数参数生成字段。如果在类定义字段中添加`var`或`val`，将生成：

```
scala> class myClass3(val attribute1:String, attribute2:String, attribute3:String)
defined class myClass3

scala> val myInstance3 = new myClass3("value1", "value2", "value3")
myInstance: myClass3 = myClass3@fd9178

scala> myInstance3.getClass().getDecalaredFields()
res1: Array[java.lang.reflect.Field] = Array(private field java.lang.String myClass3.attribute1) 
```

请注意，对于最后两个构造函数参数，没有生成字段。那是因为它们只是构造函数参数并且什么都不做。当您覆盖`toString`我认为的函数时它起作用的原因实际上只是因为编译器生成了一个隐藏字段，该字段在`toString`方法中访问参数时使用。我认为不应该依赖这一点。您最好明确说明哪些构造函数参数是您的字段。

# sql - SQL - 确定当时活动的记录数

> ID：11852951
> 
> 赞同：1
> 
> 时间：2012-08-07T19:44:45.913
> 
> 标签：sql, sql-server-2005

我有一个包含以下信息的表：

```
Conf_Start_Time
Part_Start_Time
Part_End_Time 
```

`Part_Start_Time`如果 t 介于和之间，则认为记录在时间 t 处于活动状态`Part_End_Time`。

我想做的是分析所有记录以确定在指定日期有多少记录处于活动状态。我提出的解决方案是循环遍历一天中的每一分钟（例如从早上 6 点到晚上 9 点）并检查当天的每条记录以确定用户是否在指定时间 t 处于活动状态。

SQL中是否有解决方案，或者我应该继续使用代码解决方案？

在代码中，我会将所有记录拉到内存中，遍历时间（早上 6 点到晚上 9 点）并在指定日期测试每条记录以确定它在当前时间是否处于活动状态。如果它处于活动状态，我会增加一个计数器，如果没有，则继续下一条记录。下一次，重新初始化计数器并继续循环一天。

我们使用的是 SQL Server 2005。

更新：我正在寻找的输出将是从早上 6 点到晚上 9 点的最大并发使用数组

```
Record  Conf_Start_Time    Part_Start_Time     Part_End_Time
1\.      6/5/2012 13:40:00  6/5/2012 13:41:23   6/5/2012 13:45:27
2\.      6/5/2012 13:40:00  6/5/2012 13:40:23   6/5/2012 13:47:29
3\.      6/5/2012 13:40:00  6/5/2012 13:42:55   6/5/2012 13:44:17 
```

所以在时间 13:40:00 0 条记录处于活动状态；在时间 13:41:00 1 条记录处于活动状态；在时间 13:42:00 2 条记录处于活动状态；在时间 13:43:00 3 条记录处于活动状态；

我需要一天中每一分钟的数据。然后是每个月的每一天。这种类型的循环甚至可以在 SQL 中完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T19:46:55.883

例如，如果您想要所有在 2012 年 8 月 7 日处于活动状态的记录，请执行以下操作：

```
select * from your_table
where '2012-08-07' between Part_Start_Time and Part_End_Time 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T19:50:21.320

试试这个：

```
DECLARE @auxDate datetime

SELECT *
  FROM your_table
 WHERE @auxDate BETWEEN Part_Start_Time AND Part_End_Time 
```

Between 子句包含在内，如果您不想包含某些日期，请考虑使用：

```
DECLARE @auxDate datetime

SELECT *
  FROM your_table
 WHERE @auxDate >= Part_Start_Time
   AND @auxDate <= Part_End_Time 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T20:01:02.293

以下使用相关子查询来获取您想要的数字。这个想法是计算累积开始和累积结束的次数，最多每次：

```
with alltimes as
    (select t.*
     from ((select part_start_time as thetime, 1 as IsStart, 0 as IsEnd
            from t
           ) union all
           (select part_end_time, 0 as isStart, 1 as IsEnd
            from t
           )
          ) t
     )
select t.*,
       (cumstarts - cumends) as numactive
from (select alltimes.thetime,
             (select sum(isStart)
              from allStarts as where as.part_start_time <= alltimes.thetime
             ) as cumStarts,
             (select sum(isEnd)
              from allStarts as where as.part_end_time <= alltimes.thetime
             ) as cumEnds
      from alltimes
     ) t 
```

输出基于数据中存在的每个时间。

根据经验，您不希望在应用程序端进行大量数据工作。如果可能，最好在数据库中完成。

当有多个开始和同时结束时，此查询将有重复。在这种情况下，您需要确定如何处理这种情况。但是，想法是一样的。外部选择将是：

```
select t.thetime, max(cumstarts - cumends) as numactives 
```

你需要一个 group by 子句：

```
group by t.thetime 
```

“max”给出了开始的优先级（意味着在相同的时间戳下，开始被视为首先发生，所以你在那个时候获得了最大的活动）。“Min”将优先考虑结束。而且，如果您使用平均值，请记住转换为浮点数：

```
select t.thetime, avg(cumstarts*1.0 - cumends) as avgnumactives 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T20:55:16.393

这就是我解决问题的方式。

我要做的第一件事是创建一个如下所示的序列表。由于各种原因，在 SQL 中拥有一个基本上无限（或至少是大）的数字序列可能非常有用。像这样的东西：

```
create table dbo.sequence
(
  seq_no int not null primary key clustered ,
)

declare @v int
set @v = -100000
while @v <= 100000
begin
  insert dbo.sequence values ( @v )
  set @v = @v+1
end 
```

实际上，我会使用批量复制以不同的方式为表设置种子，甚至编写一个 CLR 表值函数来生成所需的范围。上述查询将......在加载表时不会表现出理想的性能特征。

一旦我有了类似的东西，我会写一个如下的查询。它将为您提供一份完整的报告，列出指定报告期内每天所需的每个报告桶。通过设置适当的变量，一切都可以调整。如果您想要稀疏报告，请将 final 更改`left join`为标准内部联接。

**免责声明：**此代码尚未经过测试，但它类似于我为执行相同操作而编写的代码。这种方法是合理的，尽管代码本身很可能包含错误。

```
-----------------------------------------------------------------------------
-- define the range of days in which we are interested
-- it might well be more than 1, but for this example, we'll define the start
-- and end days as the same, so we are interested in just one day.
-----------------------------------------------------------------------------
declare @dtFrom datetime
declare @dtThru datetime

set @dateFrom = '2012-06-01'
set @dateThru = '2012-06-01'

------------------------------------------------------------------------------
-- the next thing in which we are interested in are the boundaries of
-- the time period in which we are interested, and the interval length
-- of each reporting bucket, in minutes.
--
-- For this example, we're interesting in the time period
-- running from 6am through 9pm, such that 6am >= x < 9pm.
--
-- We also need a value defining start-of-day (midnight).
--
-- Setting a datetime value to '' will give you the epoch: 1900-01-01 00:00:00.000
-- Setting a datetime value to just a time-of-day string literal will
-- give you the epoch day at the desired time, so '06:00:00' converts to
-- '1900-01-01 06:00:00'. Crazy, but that's SQL Server.
--
------------------------------------------------------------------------------
declare @start_of_day               datetime
declare @timeFrom                   datetime
declare @timeThru                   datetime
declare @interval_length_in_minutes int

set @start_of_day               = '00:00:00'
set @timeFrom                   = '06:00:00'
set @timeThru                   = '21:00:00'
set @interval_length_in_minutes = 15

------------------------------------------------------------------------------
--
-- On to the meat of the matter. This query has three parts to it.
--
-- 1\. Generate the set of reporting days, using our sequence table
-- 2\. Generate the set of reporting buckets for each day, again, using our sequence table
--
-- The left join of these two virtual tables produces the set of all reporting periods
-- that we will use to match up to the source data that will fill the report.
--
-- 3\. Finally, assign each row to 0 or more reporting buckets.
--    A given record has a time range in which it was 'active'.
--    Consequently, it may fall into multiple reporting buckets, and hence,
--    the comparison is a little wonky: A record is assigned to a reporting bucket
--    if both of these are true for the data record:
--
--    * Its active period ended *on or after* the start of the reporting period/bucket.
--    * Its active period began *on or before* the end of the reporting period.
--
--    It take a while to get your head around that, but it works.
--
--  When all that is in place, we use GROUP BY and the aggregate function SUM()
--  to collapse each reporting bucket into a single row and compute the active count.
--  We use SUM() in preference to COUNT() as we want a full report,
--  so we use left joins. Unlike other aggregate functions, COUNT() does not
--  exclude null rows/expressions in its computation.
-- 
--  There you go. Easy!
--
-----------------------------------------------------------------------------------
select timeFrom = dateadd(minute, times.offset                               , days.now ) ,
       timeThru = dateadd(minute, times.offset + @interval_length_in_minutes , days.now ) ,
       N        = sum( case when t.id is null then 0 else 1 end ) -- we sum() here rather than count() since we don't want missing rows from dbo.myFunkyTable to increment the count
from      ( select now = dateadd(day, seq_no , @dateFrom )                   -- get the set of 'interesting' days
            from dbo.sequence                                                -- via our sequence table
            where seq_no >= 0                                                --
              and seq_no <  datediff(day,@dateFrom,@dateThru)                --
          ) days                                                             --
left join ( select offset = seq_no                                           -- get the set of time buckets
            from dbo.sequence                                                -- each bucket is defined by its offset
            where seq_no >= datediff(minute,@start_of_day,@timeFrom)         -- as defined in minutes-since-start-of-day
              and seq_no <  datediff(minute,@start_of_day,@timeThru)         -- and is @interval_length_in_minuts long
              and 0      =  seq_no % @interval_length_in_minutes             --
          ) times
left join dbo.myFunkyTable t on t.Part_StartTime <  dateadd(minute, times.offset + @interval_length_in_minutes , days.now )
                            and t.Part_EndTime   >= dateadd(minute, times.offset                               , days.now )
group by dateadd(minute, times.offset                               , days.now ) ,
         dateadd(minute, times.offset + @interval_length_in_minutes , days.now )
order by 1 , 2 
```

# java - 在java中运行时更改代码

> ID：11852954
> 
> 赞同：0
> 
> 时间：2012-08-07T19:45:02.357
> 
> 标签：java, jar

有没有办法在运行时更改java的代码？我需要从jar中读取java文件，更改代码，重新编译并放入jar。所有这些都应该在运行时完成。我不知道的部分是如何从 jar 文件中读取 java 文件作为 java 文件并更改代码

# wcf - HostingEnvironment.ApplicationPhysicalPath 和单元测试

> ID：11852958
> 
> 赞同：0
> 
> 时间：2012-08-07T19:45:19.877
> 
> 标签：wcf, unit-testing, hosting

在我的 WCF 代码中，我需要知道服务的物理位置，因此我使用了`HostingEnvironment.ApplicationPhysicalPath`.

但是单元测试项目无法获得价值，这对我来说很正常，因为托管环境不同。

您使用什么解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T07:01:42.550

这为您提供了清单完整路径。不完全是您所要求的，但目录路径应该是正确的。

```
System.Reflection.Assembly.GetAssembly(typeof(typeBeingTested)).Location 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T13:10:08.890

我用过`AppDomain.CurrentDomain.BaseDirectory`，它有点技巧。

在 WCF 服务中我得到 D:\MyProjects\MyService\ 而在单元测试中我得到 D:\MyProjects\MyService.Tests\bin\Debug\，所以我必须在单元测试项目中创建一些构建后事件来处理位置差异。

# html - Twitter引导填充问题

> ID：11852960
> 
> 赞同：0
> 
> 时间：2012-08-07T19:45:20.900
> 
> 标签：html, twitter-bootstrap, padding

我无法弄清楚为什么我在此页面底部的导航（“上一个”和“下一个”链接）比我的 #bloglist 帖子预告片要长于宽度以上。我正在使用开箱即用的 twitter 引导程序，并且正在使用他们提供的脚手架。

[http://www.b-lew.me/page/3/](http://www.b-lew.me/page/3/)

任何想法或建议将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T20:19:47.897

有一些标记不一致：

*   你的每一行都应该是一个`.row`包含一个`.span12`（并且你不需要你的`.margin-left`类）
*   几乎所有东西都是浮动的，`float: left`元素不会在其右侧填充容器
*   `clear: both`不需要，只需使用`.clearfix`容器的类，但您通常不需要它

这是我尝试过的标记：

```
<div class="container">
    <div class="row">
        <div class="span12">
            <div class="well bloglist clearfix">
                <!-- etc -->
            </div>
        </div>
    </div>
</div> 
```

而对于 CSS

`.bloglist`不应该向左浮动。

似乎有很多来自另一个设计的残留标记，恕我直言，如果你不坚持正确的引导架构，你将会有更多的图形错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T20:10:45.847

看来您期望整体大小为 span12，`</div><!-- /span12 -->`但证明了这一点！您没有在任何地方的开始块中声明此类，并且您的博客列表项是 span4 和 span7，因此总体大小将为 span11。我将博客列表项目编辑为 span4/8，这似乎与寻呼机对齐。我会修改您的开头标记以使其达到预期的大小

# ios - ios - 试图了解 cellForRowAtIndexPath 和 heightForRowAtIndexPath 在处理 UITableViewCells 时如何工作

> ID：11852963
> 
> 赞同：0
> 
> 时间：2012-08-07T19:45:28.890
> 
> 标签：ios, ios5, uitableview

在StackOverflow好人的帮助下，我有这两种方法：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{    
    UITableViewCell *cell = [[UITableViewCell alloc] initWithStyle:(UITableViewCellStyleDefault)
            reuseIdentifier:@"business"];

    NSString *comment = [[items_array objectAtIndex:[indexPath row]] objectForKey:(@"comment")];

    NSLog(businessPrivacy);
    // FIND IF THE BUSINESS PLAN IS PRIVATE OR NOT.

        CGSize constraint = CGSizeMake(320 - (10 * 2), 20000.0f); 

        CGSize size = [comment sizeWithFont:[UIFont systemFontOfSize:14] constrainedToSize:constraint lineBreakMode:UILineBreakModeWordWrap]; 

        UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 300, MAX(size.height, 44.0f) + 20.0f)]; 
        label.numberOfLines = 0; 
        label.lineBreakMode = UILineBreakModeWordWrap; 
        label.text = comment;  

        [cell.contentView addSubview:label];        

    return cell;
}

//Cell size for word wrapping.
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath;
{    
    NSString *comment = [[items_array objectAtIndex:[indexPath row]] objectForKey:(@"comment")];

    CGSize constraint = CGSizeMake(320 - (10 * 2), 20000.0f); 

    CGSize size = [comment sizeWithFont:[UIFont systemFontOfSize:14] constrainedToSize:constraint lineBreakMode:UILineBreakModeWordWrap]; 

    CGFloat height = MAX(size.height, 44.0f);

    return height + (10 * 2);
} 
```

它们的效果是从默认字体大小减小字体大小，并动态调整大小以适应评论的整个文本，无论该文本有多长。

我感到困惑的是，我在两种方法中都有一些相同的代码，我不知道它到底应该是什么样子。我确实知道这两种方法都被调用了，但不确定它们应该在哪里正常工作。

提前感谢您的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T20:09:47.020

看起来你两者都需要它们。我已经用注释重写了您的代码，以便您理解它：

```
//This function is used to create the cell and the content of the cell.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{   
    //Here you are allocating a new cell with a reuse identifier.  This is only needed if
    //you plan on reusing the cells and using [tableView dequeueReusableCellWithIdentifier:cellIdentifier]
    //Reusable cells will save you some memory and make your tableview work more smoothly,
    //however here you are not selecting from the reusable pool, and are instead making a new cell each time
    UITableViewCell *cell = [[UITableViewCell alloc] initWithStyle:(UITableViewCellStyleDefault)
            reuseIdentifier:@"business"];

    //This is pulling the text for the comment, it is obviously necessary
    NSString *comment = [[items_array objectAtIndex:[indexPath row]] objectForKey:(@"comment")];

    NSLog(businessPrivacy);
    // FIND IF THE BUSINESS PLAN IS PRIVATE OR NOT.

    // This is creating a constraint size for the label you are making
    CGSize constraint = CGSizeMake(320 - (10 * 2), 20000.0f); 

    // This is determining the size that you will need for the label based on the comment
    // length and the contraint size
    CGSize size = [comment sizeWithFont:[UIFont systemFontOfSize:14] constrainedToSize:constraint lineBreakMode:UILineBreakModeWordWrap]; 

    //  Here you are creating your label and initializing it with the frame that you have
    //  determined by your size calculations above
    UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 300, MAX(size.height, 44.0f) + 20.0f)];

    // setting up the label properties
    label.numberOfLines = 0;
    label.lineBreakMode = UILineBreakModeWordWrap; 
    label.text = comment;  

    // adding the label view to the cell that you have created
    [cell.contentView addSubview:label];        

    // return the cell for the table view
    return cell;
}

//Cell size for word wrapping.
//This method will determine how tall each row needs to be.
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath;
{
    //Here you are getting the comment again.  This is necessary to determine how tall you need
    //the cell to be    
    NSString *comment = [[items_array objectAtIndex:[indexPath row]] objectForKey:(@"comment")];

    // Again you are getting the constraints because you are going to us this size
    // to constrain the height of the cell just like you determined the size for the label.
    CGSize constraint = CGSizeMake(320 - (10 * 2), 20000.0f); 

    // Again, determining the size that we will need for the label, because it will drive
    // the height of the cell
    CGSize size = [comment sizeWithFont:[UIFont systemFontOfSize:14] constrainedToSize:constraint lineBreakMode:UILineBreakModeWordWrap]; 

    //  Finally, we can determine the height for the cell!
    CGFloat height = MAX(size.height, 44.0f);

    //  return the height, which is the height of the label plus some extra space to make
    //  it look good.
    return height + (10 * 2);
} 
```

所以基本上，`cellForRow...`函数创建单元格的内容，`heightForRow...`函数确定高度。您需要它们中的所有信息，因为该`cell`函数仅创建单元格的内容，而该`height`函数创建行的高度，并且注释、约束和大小对于确定`label`单元格内容的大小和单元格的高度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T20:04:34.393

所以`heightForRowAtIndexPath`，顾名思义，只处理单元格的高度。即该`CGFloat`函数的返回值 (a) 是指定索引路径处单元格的高度。

`cellForRowAtIndexPath`另一方面设置实际的单元格，包括它的所有子视图。发生的情况是，假设有些单元格有 5 行`UILabel`，有些单元格有 1 行。然后你需要调整 in 单元格的大小`heightForRowAtIndexPath`，但同时你还需要调整`UILabel`in 单元格的大小`cellForRowAtIndexPath`。后者不会自动发生。你需要照顾好自己。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T20:14:19.407

如果您必须编写两次或多次相同的代码，则应考虑将重复的代码提取到方法或函数中。但是您还有其他一些我们应该解决的问题。

让我们声明一些常量，这样我们就不必在代码中重复数字：

```
static const CGFloat kLabelMargin = 10.0f;
static const CGFloat kLabelWidth = 320.0f - 2.0f * kLabelMargin; 
```

您在两种方法中重复的一行查找一行的注释。让我们做一个方法来做到这一点：

```
- (NSString *)commentForRowAtIndexPath:(NSIndexPath *)indexPath {
    return [[items_array objectAtIndex:[indexPath row]] objectForKey:@"comment"];
} 
```

另一个重复的代码计算行的高度，所以让我们创建一个函数来返回它：

```
static CGFloat heightForComment(NSString *comment) {
    CGSize constraint = CGSizeMake(kLabelWidth, 20000.0f);
    CGSize size = [comment sizeWithFont:[UIFont systemFontOfSize:14] constrainedToSize:constraint lineBreakMode:UILineBreakModeWordWrap];
    return MAX(size.height, 44.0f) + 2.0f * kLabelMargin;
} 
```

现在我们可以重写你的`tableView:heightForRowAtIndexPath:`方法：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
    return heightForComment([self commentForRowAtIndexPath:indexPath]);
} 
```

最后，让我们重写你的`tableView:cellForRowAtIndexPath:`方法。我们将使它正确地重用单元格（以避免浪费内存），并且我们将使它使用我们创建的新方法和函数。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *const kReuseIdentifier = @"business";
    static const NSInteger kLabelTag = 1;

    NSLog(@"%@", businessPrivacy);
    // FIND IF THE BUSINESS PLAN IS PRIVATE OR NOT.

    NSString *comment = [self commentForRowAtIndexPath:indexPath];
    CGRect labelFrame = CGRectMake(0, 0, kLabelWidth, heightForComment(comment));

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:kReuseIdentifier];
    UILabel *label;
    if (cell) {
        label = (UILabel *)[cell.contentView viewWithTag:kLabelTag];
        label.frame = labelFrame;
    } else {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:kReuseIdentifier];
        label = [[UILabel alloc] initWithFrame:labelFrame];
        label.tag = kLabelTag;
        label.numberOfLines = 0;
        label.lineBreakMode = UILineBreakModeWordWrap;
        [cell.contentView addSubview:label];
    }

    label.text = comment;

    return cell;
} 
```

# jquery-plugins - 对日期范围使用 mobiscroll

> ID：11852970
> 
> 赞同：0
> 
> 时间：2012-08-07T19:45:58.373
> 
> 标签：jquery-plugins, daterangepicker, mobiscroll

我正在尝试构建一个网页，其中有 2 个滚动条来选择一系列日期。两个文本输入都是同一个类，所以我设置了 2 个滚动条，如下所示：

```
$('.datetime').scroller({

    preset: 'datetime', minDate: new Date(now.getFullYear(), now.getMonth(), (now.getDate() - 7)), theme: 'default', display: 'modal', timeFormat: 'HH:ii', timeWheels: 'HHii', stepMinute: 5, mode: 'scroller' 

}); 
```

我想做的是让第二个滚动条将第一个滚动条设置的值设置为其 minDate。

我尝试单独设置滚动条，使用 eq() 函数并将第二个的 minDate 设置为 $('.datetime').eq(0).val()。我发现了两个问题：在文本输入中由 mobiscroll 设置的值不被识别为日期；& 该值似乎没有改变，但这可能是由于第一个错误。

mobiscroll 是否有办法解析它加载到文本输入中的日期？我宁愿不添加另一个像 date.js 这样的插件，只是为了让这个插件按我的需要工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:10:39.520

您可以使用 mobiscroll 的 getDate 方法：

```
$('.datetime').eq(0).scroller('getDate'); 
```

这将返回一个日期对象，而不是一个字符串。

还有一个 parseDate 实用函数

```
$.scroller.parseDate(format, strValue); 
```

有关详细信息，请参阅[http://docs.mobiscroll.com/datetime-preset](http://docs.mobiscroll.com/datetime-preset)

# windows-7 - 批处理文件将无法在 XP 仅 Windows 7 上运行

> ID：11852972
> 
> 赞同：0
> 
> 时间：2012-08-07T19:46:07.850
> 
> 标签：windows-7, batch-file, windows-xp

我正在拔头发！这个批处理文件在我的 windows 7 笔记本电脑上运行得很好，但是当我尝试从 windows 2003 服务器或 xp 计算机上运行它时，它的一部分不起作用。脚本如下，在 XP 上不起作用的部分是：

```
rem check if it's sunday or not
IF NOT %Sunday%==%TODAY% (

    chdir "C:\e-edition_upload\tecnavia-archives"
    setlocal EnableDelayedExpansion
    for %%f in (*%Sun_Find%*.pdf) do (
       set "filename=%%f"
       if "!filename:~4,4!" equ "%Sun_Find%" move "%%f" "C:\e-edition_upload\sunday"
    )
)
rem check if it's monday or not
IF NOT %Monday%==%TODAY% (
    chdir "C:\e-edition_upload\tecnavia-archives"
    setlocal EnableDelayedExpansion
    for %%f in (*%Mon_Find%*.pdf) do (
       set "filename=%%f"
       if "!filename:~4,4!" equ "%Mon_Find%" move "%%f" "C:\e-edition_upload\monday"
    )
) 
```

我在这里完全不知所措，这需要尽快修复，因为我的屁股在线。H

这是完整的代码：

```
@echo on
for /f "tokens=2-4 delims=/ " %%a in ('date /T') do set year=%%c
for /f "tokens=2-4 delims=/ " %%a in ('date /T') do set month=%%a
for /f "tokens=2-4 delims=/ " %%a in ('date /T') do set day=%%b
set year=%year:~-2%
set TODAY=%month%%day%%year%

rem find the date of the next monday
>NextMon.vbs echo NextMonday=FormatDateTime(Date+(9-Weekday(Date)))
>>NextMon.vbs echo SY=Year(NextMonday)
>>NextMon.vbs echo SM=Month(NextMonday)
>>NextMon.vbs echo SD=Day(NextMonday)
>>NextMon.vbs echo wscript.echo SY ^& "," ^& SM ^& "," ^& SD
For /f "tokens=1-3 delims=," %%A in ('cscript //nologo NextMon.vbs') do (
    Set mon_yyyy=%%A
    Set mon_mm=%%B
    Set mon_dd=%%C
)
del NextMon.vbs
If %mon_mm% lss 10 Set mon_mm=0%mon_mm%
If %mon_dd% lss 10 Set mon_dd=0%mon_dd%
Set mon_Year=%mon_yyyy:~-2%
Set Monday=%mon_mm%%mon_dd%%mon_Year%

rem find the date of the next sunday
>NextSun.vbs echo NextSunday=FormatDateTime(Date+(8-Weekday(Date)))
>>NextSun.vbs echo SY=Year(NextSunday)
>>NextSun.vbs echo SM=Month(NextSunday)
>>NextSun.vbs echo SD=Day(NextSunday)
>>NextSun.vbs echo wscript.echo SY ^& "," ^& SM ^& "," ^& SD
For /f "tokens=1-3 delims=," %%A in ('cscript //nologo NextSun.vbs') do (
    Set sun_yyyy=%%A
    Set sun_mm=%%B
    Set sun_dd=%%C
)
del NextSun.vbs
If %sun_mm% lss 10 Set sun_mm=0%sun_mm%
If %sun_dd% lss 10 Set sun_dd=0%sun_dd%
Set Sun_Year=%sun_yyyy:~-2%
Set Sunday=%sun_mm%%sun_dd%%Sun_Year%
Set Sun_Find=%sun_mm%%sun_dd%
Set Mon_Find=%mon_mm%%mon_dd%

rem check if it's sunday or not
IF NOT %Sunday%==%TODAY% (

    chdir "C:\e-edition_upload\tecnavia-archives"
    setlocal EnableDelayedExpansion
    for %%f in (*%Sun_Find%*.pdf) do (
       set "filename=%%f"
       if "!filename:~4,4!" equ "%Sun_Find%" move "%%f" "C:\e-edition_upload\sunday"
    )
)
rem check if it's monday or not
IF NOT %Monday%==%TODAY% (
    chdir "C:\e-edition_upload\tecnavia-archives"
    setlocal EnableDelayedExpansion
    for %%f in (*%Mon_Find%*.pdf) do (
       set "filename=%%f"
       if "!filename:~4,4!" equ "%Mon_Find%" move "%%f" "C:\e-edition_upload\monday"
    )
)
md "C:\e-edition_upload\newsbank\%TODAY%"
xcopy /s "C:\e-edition_upload\tecnavia-archives" "C:\e-edition_upload\newsbank\%TODAY%"
pause 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T03:41:31.817

该`DATE /T`命令可能在您的 Windows 7 与 XP 和 Server 2003 上使用不同的日期格式。这肯定会导致问题。只需在所有三台机器上运行该命令即可查看它们是否使用相同的格式。

解析`DATE /T`or`%DATE%`总是有风险的，因为机器之间可能存在差异。

您已经在使用 VBS。为什么不将整个项目移到 VBS 中呢？或者至少从 VBS 获取当前日期信息。

# mysql - MySQL 动态 HAVING 子句

> ID：11852973
> 
> 赞同：1
> 
> 时间：2012-08-07T19:46:08.740
> 
> 标签：mysql

我已经写`SELECT`了完美的声明。但是，我需要进行一些更改，以便它现在从表单中获取用户提交的信息，并根据该信息从数据库中返回结果。

它本质上是一个产品搜索——如果用户搜索“红色”，他们将返回所有红色的项目。如果他们搜索“红色”和“木头”，他们只会返回红色且由木头制成的物品。

这是我的`HAVING`条款：

`HAVING values LIKE "%Red%" AND values LIKE "%Wood%"`

如果我有一系列 5 个下拉菜单，每个都有一组不同的术语，我应该尝试`HAVING`根据用户使用的下拉菜单动态构建子句吗？这将如何完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T20:09:03.370

我会选择静态 SQL 语句，因为用户可以从中选择五个“选项”。

我要做的是使用一个空字符串作为表示特定选项“无限制”的值，所以我的陈述是这样的：例如

```
HAVING `values` LIKE CONCAT('%',:b1,'%')
   AND `values` LIKE CONCAT('%',:b2,'%')
   AND `values` LIKE CONCAT('%',:b3,'%')
   AND `values` LIKE CONCAT('%',:b4,'%')
   AND `values` LIKE CONCAT('%',:b5,'%') 
```

仅对选项 1 和 2 应用限制，对选项 3 没有限制，例如

```
$sth->bind_param(':b1','Red');
$sth->bind_param(':b2','Wood');
$sth->bind_param(':b3','');
$sth->bind_param(':b4','');
$sth->bind_param(':b5',''); 
```

仅对选项 2 应用限制，例如

```
$sth->bind_param(':b1','');
$sth->bind_param(':b2','Wood');
$sth->bind_param(':b3','');
$sth->bind_param(':b4','');
$sth->bind_param(':b5',''); 
```

这允许您拥有一个静态语句，唯一需要更改的是为绑定参数提供的值。

* * *

也可以使用 NULL 值来表示选项的“无限制”，但是当提供 NULL 值时，您需要修改 SQL 语句以执行“无限制”。要么专门检查 NULL 值，例如

```
HAVING ( `values` LIKE CONCAT('%',:b1,'%') OR :b1 IS NULL )
   AND ( `values` LIKE CONCAT('%',:b2,'%') OR :b2 IS NULL )
   AND ( `values` LIKE CONCAT('%',:b3,'%') OR :b3 IS NULL ) 
```

- 或 - 将 NULL 转换为空字符串以用于 LIKE 谓词，例如

```
HAVING `values` LIKE CONCAT('%',IFNULL(:b1,''),'%')
   AND `values` LIKE CONCAT('%',IFNULL(:b2,''),'%')
   AND `values` LIKE CONCAT('%',IFNULL(:b3,''),'%') 
```

* * *

同样的技术也适用于 WHERE 子句。您可能需要考虑 WHERE 子句是否更适合您的情况。（我们无法从提供的信息中判断。）

但请注意，HAVING 子句不限制语句中包含哪些行；相反，HAVING 子句仅限制返回结果集中的哪些行。HAVING 子句几乎在执行计划中最后应用（我认为它后面只有 ORDER BY 和 LIMIT。

HAVING 子句可以应用于聚合，而 WHERE 子句不能这样做。HAVING 子句可以引用 SELECT 列表中的列，而 WHERE 子句不能这样做。

（还要注意 VALUES 是一个保留字，如果它不合格（前面有`alias.`，可能需要用反引号括起来。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T19:50:30.460

不，您不应该构建 HAVING 子句。

是的，您可以按照您的建议构建 WHERE 子句。

HAVING 用于对组施加涉及聚合函数的条件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T19:58:48.810

这种方法适用于涉及更多条件的情况，但您也可以在 5 上使用它们。将您的菜单值收集到一个临时表中，然后在 LIKE 条件下将它们内部连接到您的查询中

```
SELECT .... FROM MyTable
INNER JOIN  MyTempTable
ON values LIKE '%' + MenuValue '%' 
```

# wpf - 检测右键单击了哪个 TreeView 节点

> ID：11852974
> 
> 赞同：0
> 
> 时间：2012-08-07T19:46:11.057
> 
> 标签：wpf, xaml, contextmenu

我正在开发一个 WPF 项目，并且我已经向它添加了一个 TreeView。我还`ContextMenu`为 TreeView 创建了一个，如下所示：

```
<TreeView Name="treeView" ItemsSource="{Binding Elements}">

                <TreeView.ContextMenu>
                    <ContextMenu Name="treeViewContextMenu">
                        <MenuItem Header="First option"/>
                        <MenuItem Header="Second Option/>
                    </ContextMenu>
                </TreeView.ContextMenu>

.... </TreeView> 
```

由于我动态地添加了 treeView 节点，**我如何检测右键单击哪个节点以打开 contextMenu？**

希望有人可以帮助我，在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T20:01:15.860

假设我动态加载了我的树视图项目..

```
 <TreeView Name="treeView" ContextMenuClosing="treeView_ContextMenuClosing">

    <TreeView.ContextMenu>
        <ContextMenu Name="treeViewContextMenu">
            <MenuItem Header="First option"/>
                <MenuItem Header="Second Option"/>
            </ContextMenu>
     </TreeView.ContextMenu>
        <TreeViewItem Header="Hello 1"/>
        <TreeViewItem Header="Hello 2"/>
     </TreeView> 
```

**主窗口.xaml.cs**

```
private void treeView_ContextMenuClosing(object sender, ContextMenuEventArgs e)
        {
           //Sender should let me determine who sent it from my children/parent

            var parent  = sender as TreeView;
            var children = parent.SelectedItem as TreeViewItem;
            MessageBox.Show(children.Header.ToString());
        } 
```

如果您想知道 ContextMenu***关闭/打开***时的对象，或者 MenuItem 被***Clicked***时的任何事件，这取决于您。

# c# - 如何查看 UploadValues 后调用，包括正在发送的标头

> ID：11852977
> 
> 赞同：2
> 
> 时间：2012-08-07T19:46:22.780
> 
> 标签：c#, screen-scraping, webclient, http-post

我一直在寻找答案一段时间，我完全被难住了。我正在编写一个屏幕抓取工具，并且在使用 C# WebClient 时遇到 500 内部错误。我已经覆盖了 WebClient 类以包含对 cookie 的支持。

在 Firefox 上，我安装了一个名为 HTTP Resource Test 的插件，通过使用该插件提交发布数据和正确的标题，我能够准确地复制我正在尝试做的事情。我认为现在弄清楚为什么我不能让 C# WebClient 工作的最好方法是能够看到 WebClient 向服务器发出的实际请求。

如何以字符串格式查看 WebClient 向我试图抓取的 Web 服务器发出的请求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T20:04:08.277

您可以使用[Fiddler2](http://www.fiddler2.com/fiddler2/)查看流量。最简单的尝试是将用户代理添加到[WebClient.Headers](http://msdn.microsoft.com/en-us/library/system.net.webclient.headers.aspx)并查看这是否可以解决您的问题：

```
string userAgent = "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.1; WOW64; Trident/5.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; InfoPath.3; .NET4.0C; .NET4.0E; MS-RTC LM 8)";

client.Headers[HttpRequestHeader.UserAgent] = userAgent; 
```

# javascript - Kendo UI Mobile - 单击按钮时出现故障调用功能

> ID：11852980
> 
> 赞同：0
> 
> 时间：2012-08-07T19:46:45.647
> 
> 标签：javascript, function, button, kendo-ui

我已经使用 Kendo UI 组合了一个小应用程序，它将用户输入存储在 Javascript 数组中，然后通过将文本添加到 div 来打印这些项目。除了文本，我还需要一个删除按钮来从数组中删除这些项目。

由于我在初始化 Kendo UI 后将删除按钮添加到 DOM，因此我假设我需要`.kendoMobileButton()`在添加的每个按钮上使用该方法。如果我不这样做，我的按钮样式不正确，尽管被赋予了属性`data-role="button"`。

不过，当我尝试使用这些按钮时，我无法让它们调用带有`data-click="deleteNumber"`. 该功能似乎根本没有触发。有什么提示吗？

这是我拼凑的一个简单示例，说明了我的问题：[http ://crocdoc.ifas.ufl.edu/files/kendo_example/](http://crocdoc.ifas.ufl.edu/files/kendo_example/)

贴在这里方便参考：

```
<!DOCTYPE HTML>
<html>
<head>
<title>Example code</title>
<meta charset="utf-8">
<link rel="stylesheet" href="styles/kendo.mobile.all.min.css" type="text/css">
<script src="js/jquery.min.js"></script>
<script src="js/kendo.mobile.min.js"></script>
</head>
<body>
<div data-role="view" id="main">
    <div data-role="header">
        <div data-role="navbar">Generate numbers</div>
    </div>  

    <a data-role="button" data-click="addNumber" style="display: block; margin: 10px; text-align: center;">Add number</a>
    <div id="number_list" style="padding: 0 20px 0 20px;"></div>

</div>

<script>
    var app = new kendo.mobile.Application();

    var number_container = [];

    var addNumber = function () {
        var current_number = Math.floor(Math.random() * 1000 + 1);
        number_container.push(current_number);
        console.log(number_container);

        var current_index = number_container.length - 1;

        $('#number_list').append('Number ' + current_index + ': ' + current_number + ' <a id="delete_' + current_index + '" data-role="button" data-click="deleteNumber">Delete</a><br >');
        $('#delete_'+current_index).kendoMobileButton();
    };

    var deleteNumber = function (e) {
        console.log('Delete button hit');
        var button_id = e.button.context.id;
        button_id = button_id.replace('delete_', '');
        button_id = parseFloat(button_id);

        number_container.splice(button_id, 1);

        $('#number_list').empty();
        for (var i = 0; i < number_container.length; i++) {
            $('#number_list').append('Number '+i+': '+number_container[i]+' <a id="delete_' + i + '" data-role="button" data-click="deleteNumber">Delete</a><br >');
        }

    }; 

</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T11:09:12.963

您需要修改您的代码如下，

```
 $('#number_list').append('Number ' + current_index + ': ' + current_number + ' <a id="delete_' + current_index + '">Delete</a><br/>');
    $('#delete_'+current_index).kendoMobileButton({click: deleteNumber}); 
```

谢谢 DJ

[@调试模式](https://twitter.com/debug_mode)

# git - 我可以将存储库安排到 Github 上的文件夹中吗？

> ID：11852982
> 
> 赞同：218
> 
> 时间：2012-08-07T19:46:49.473
> 
> 标签：git, github, repository

我是 git 新手，我现在正在做的是将我最近的所有项目作为存储库上传到 github。有很多不同的项目，如网页设计、wordpress 主题和不同类型的应用程序。其中一些也属于更大的项目，因为它们是将一些东西作为不同的应用程序进行测试。

问题是我现在在线上有大量令人困惑的存储库。如何将相关的 github 存储库分组到一个文件夹结构中？是否有任何功能可以在 github 上订购和构建甚至标记存储库？

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2012-08-08T06:44:12.293

2021 年 12 月更新：

> ## [列表现在可作为公开测试版使用](https://github.blog/changelog/2021-12-09-lists-are-now-available-as-a-public-beta/)

> 列表通过让您在 GitHub 上轻松组织和管理您最喜欢的存储库来提升星级体验。
> 
> [您可以在https://github.com/USERNAME?tab=stars](https://github.com/USERNAME?tab=stars)创建出现在您的星星页面上的公共列表。
> 
> 列表可供除企业管理用户之外的所有人使用。
> 
> [![https://i0.wp.com/user-images.githubusercontent.com/6895176/145467599-0b91cecd-872e-4ca1-bc86-16df076da29d.png?ssl=1](../Images/7b4114d3d760f309255360007069db6c.png)](https://i.stack.imgur.com/vAZfJ.png)

* * *

原答案：

在 GitHub 本身上，您不能按“文件夹”对您的存储库进行分组，除非您创建了[organizations](https://github.com/blog/674-introducing-organizations)。
例如，请参阅[SublimeText](https://github.com/SublimeText)，作为所有 sublimeText 包 repos 的一组。

但这不支持嵌套文件夹组织。目前（2017 年 6 月），它仅支持[嵌套的*团队*组织结构](https://stackoverflow.com/a/44530200/6309)。

* * *

2020 年 8 月更新：[README 项目](https://github.blog/2020-08-20-readme-project/)允许您添加[个人资料页面](https://docs.github.com/en/github/setting-up-and-managing-your-github-profile/about-your-profile)......您可以在其中以任何您想要的方式列出和组织您的存储库。但这是一个手动过程（编辑页面）。

* * *

2019 年 2 月更新：您现在有了**项目**的概念：
请参阅“[用户拥有的项目——您的个人工作区](https://github.blog/2019-02-07-user-owned-projects-your-personal-workspace/)”

> 您还可以将最多 5 个存储库链接到您的项目板。链接存储库会将搜索范围限制为那些链接存储库，因此您可以快速缩小尚未添加到项目板的任何新问题

[![https://i0.wp.com/user-images.githubusercontent.com/3477155/52346373-734e2580-29ed-11e9-82ad-9e5f1ab8aa99.gif?resize=1024%2C512&ssl=1](../Images/4f202c82e5125cddc07ebf29fe46a7e3.png)](https://i.stack.imgur.com/Rzng6.gif)

GitHub 现在也支持标签（以[主题](https://help.github.com/articles/about-topics/)的形式）。

* * *

2012年原始答案：

另一种解决方案是让您定义引用其他存储库的存储库，声明为**[submodules](http://git-scm.com/book/en/Git-Tools-Submodules)**。

这样，当您克隆其中一个存储库（引用其他存储库）时，称为“父存储库”，它们将被克隆到自己的目录中，每个子模块都有一个子目录。

它在您的 GitHub 帐户本身上不会明显可见（因为它仍然包含大量存储库，甚至与父存储库相比更大），但是通过克隆一个父存储库，您将在其中取回其所有关联的子模块。

* * *

[AnneTheAgile](https://stackoverflow.com/users/242110/annetheagile)在 2014 年[的评论](https://stackoverflow.com/questions/11852982/can-i-arrange-repositories-into-folders-on-github/34713071#comment42616671_11859027)中提到的[问题 302现在只是引用（2018 年 11 月）](https://github.com/isaacs/github/issues/302)[`tbnorth/github_repo_tags`](https://github.com/tbnorth/github_repo_tags)

> 此存储库中的[小型 python 程序](https://github.com/tbnorth/github_repo_tags/blob/78511813b961788cd6188967e4a79f69a79c2ba2/repo_tags.py)使用 GitHub API 获取您的存储库列表。并将它们的名称、描述和 URL 添加到新的存储库中，默认情况下称为 repo_tags。最初，每个“问题”都被标记为未分类，但您可以使用常规问题标记随意标记它们。
> 
> 重新运行时，`repo_tags.py`只会为 repos 创建问题。问题尚未涵盖的内容。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2017-11-18T17:40:39.213

我使用[组织](https://github.com/blog/674-introducing-organizations)来安排回购。这允许清晰的描述和清晰的组织，如果需要，可以共享。例如：

**我的组织**

*   Jmr-iOS（iOS 存储库）
*   Jmr-Work（工作回购）
*   用户帐户（Pers repos）

~~所有组织存储库都是公共的，但除非您[升级](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&cad=rja&uact=8&ved=2ahUKEwju58yO_aPkAhVJ7J4KHckFB4wQygQwAXoECAYQBg&url=https%3A%2F%2Fhelp.github.com%2Fen%2Farticles%2Fupgrading-your-github-subscription%23next-steps-for-organizations-using-github-enterprise-cloud&usg=AOvVaw3uWh8iMdMlcQAAwgT1KAE0)到企业云帐户（25 美元/月）~~，否则从 2020 年 9 月起，您可以在组织下拥有无限的公共/私有存储库。（请参阅[此处的](https://github.com/organizations/plan)选项）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-01-08T11:27:41.237

这与其说是一个答案，不如说是一个提醒。

由于以下为用户发布的免费私人回购公告，最近使用组织构建的一个副作用已经曝光：[https ://blog.github.com/2019-01-07-new-year-new-github/](https://blog.github.com/2019-01-07-new-year-new-github/)

组织私人回购仍然不是免费的。因此，如果您需要，使用组织来分离存储库将导致您的组织无法使用免费的私有存储库。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-02-08T20:43:51.170

模拟文件夹的一种可能方法是将逗号分隔的标签附加到存储库描述的末尾。然后，您可以通过这些标签搜索存储库，因为 GitHub 的“查找存储库...”过滤器会在存储库描述中查找！一个例子：

> MyRepo：做一些很酷的事情[计算机视觉、机器学习、python]

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-02-10T01:22:55.300

对于初学者，您现在可以在 GitHub 中以主题的形式标记 repos。耶！

但我不认为它解决了更大的问题。为此，我尝试了一个顶级文件夹系统（其中每个项目都是一个存储库中的一个文件夹）。我还尝试了每个项目系统一个分支（每个项目都在一个新分支中）。最后一个也允许您单独拉动和推动每个项目！但是，两者都不是理想的。

您还可以查看其他版本控制系统，例如[subversion](https://subversion.apache.org/)和[mercurial](https://www.mercurial-scm.org/)。如果需要，Mercurial 也可以托管在[Bitbucket上，Facebook 甚至正在研究对“](https://bitbucket.org)[多项目存储库](https://en.wikipedia.org/wiki/Mercurial#Adoption)”的支持。

我个人喜欢[https://hg.openjdk.java.net/](https://hg.openjdk.java.net/)（或[http://hg.netbeans.org/](http://hg.netbeans.org/)）的系统，在那里你有一个文件夹设置，每个项目都托管在端点上。[实现这一目标的最佳方法是使用您的项目结构（如https://mvnrepository.com/](https://mvnrepository.com/)或[https://www.npmjs.com/](https://www.npmjs.com/) ）创建一个网站（您可以在 GitHub 中执行此操作）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-09-28T23:13:21.167

项目方法的缺点包括：

1.  存储库所在的项目（即“文件夹”）通常不可见，例如在主页或您的个人资料中。要使其在这些地方可见，需要在 repo 的名称中添加一个手动标记，例如 @peter554 建议的那样。但是随后更改“文件夹”（即项目）需要同时更改项目和 repo 名称中的手动标记。
2.  您不能将分叉添加到项目中。

组织方法不存在这些问题。然而：

*   您的“文件夹”存储库将从您的帐户资料页面中消失。但是，组织可以通过成为公共成员在那里可见。（可以在组织内的“人员”下设置）

注意：随着 Github 的进一步发展，这些事情可能会发生变化。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-08-27T03:39:38.813

所以确认Github中没有文件夹功能。

我认为要组织存储库，您可以有两种方法。

*   使用文件系统，每个文件引用一个存储库，它们只是一个到 GitHub 的链接，将它们放在以文件夹名称为类别的文件夹中（python 脚本可以生成所有文件，你可以拖放）

    *   缺点：它假设结构是一棵树，所以一个仓库最多有一个父级（一个类别）
    *   代码：[https ://gist.github.com/AronWaterAron/0e2af669f942c95306123b1fcd556126](https://gist.github.com/AronWaterAron/0e2af669f942c95306123b1fcd556126)
*   使用有向图进行组织（没有现有工具，您需要构建一个 Web 或桌面应用程序来做到这一点，我正在编写代码）

    *   [![这](../Images/95f7a18e53e24d043424e4f2a175f324.png)](https://i.stack.imgur.com/k8Sgj.png)

# python - Python Precommit 钩子，查看一些文本的行

> ID：11852985
> 
> 赞同：2
> 
> 时间：2012-08-07T19:46:56.413
> 
> 标签：python, svn, tortoisesvn

您好，我的问题是关于我要开始工作的 Python 脚本。这样做的重点是，当有人进行 SVN 提交时，他们会看到一个包含四行的登录模板：`Branch`、`Bug_Number`和。现在我正在尝试编写一个脚本，以确保他们在上面写了一些东西，以确保没有人输入一个空日志来提交。`Feature affected``Overview`

这是我迄今为止在 python 中所拥有的，它基于一个旧的 python 脚本。

```
 print "Importing the items"

import re  
 import sys  
 import os   

print "Initializing the list."  

argsList = []  
 hndFile = open(sys.argv[1],"r")  
 for line in hndFile:  
 argsList.append(line)  
 hndFile.close()   

print "Checking what is blank"  
 faOK = ovOK = False  
 for line in argsList:  
 line = line.strip()  
 if line.startswith('FEATURE_AFFECTED:'):  
 faOK = line[17:] != ''    
 if line.startswith('OVERVIEW:'):  
 ovOK = line[9:] != ''   

if not faOK:      
 print "You Must Enter the Feature Affected"    
 ret = -1  
 elif not ovOK:  
 print "You Must Enter an Overview of the Fix"  
 ret = -1    
 else:  
 ret = 0  
 print "Finishing the script"  
 sys.exit(ret) 
```

任何建议都会有所帮助。我正在使用 Windows XP，目前没有任何事情发生。我也在使用collabnet svn。目前，当我尝试运行此脚本时，什么都没有发生。我知道我没有在脚本中添加 svnlook，我真的想不出在哪里添加以及为它添加变量。谢谢你。

# facebook - 申请贴到它的墙上

> ID：11852988
> 
> 赞同：0
> 
> 时间：2012-08-07T19:47:02.060
> 
> 标签：facebook, facebook-php-sdk, facebook-wall

我找不到我正在尝试做的确切示例，如果这是一个重复的问题，很抱歉，但我已经寻找了过去几个小时。

我希望我的 Facebook 应用程序能够更新状态或发布到我管理的页面的墙上：http: [//www.facebook.com/amazingjobsapp](http://www.facebook.com/amazingjobsapp)作为 CRON 工作的一部分。

我似乎找不到任何关于如何做到这一点的例子。非常感谢任何指针。

编辑：

我曾经在下面编码，现在得到：

> object(FacebookApiException)#11 (8) { ["result":protected]=> array(1) { ["error"]=> array(3) { ["message"]=> string(72) "(# 200) 用户尚未授权应用程序执行此操作" ["type"]=> string(14) "OAuthException" ["code"]=> int(200) } } ["message":protected]= > string(72) "(#200) 用户未授权应用程序执行此操作" ["string":"Exception":private]=> string(0) "" ["code":protected]= > int(0) [“文件”：受保护]=> 字符串（86）

有人可以指导我为页面 ID 413282938687554 授予我的应用程序 manage_page 和 publish_stream 权限吗？

编辑 2：如果我查看我的 graph.facebook.com/me/accounts 那么它会显示上面的页面 id 和一个访问令牌，但是如果我在我的代码中使用它，那么我仍然会收到错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T19:56:11.970

您需要获得`manages_pages`许可

```
<?php
$attachment = array(
    'message' => 'this is my message',
    'name' => 'This is my demo Facebook application!',
    'caption' => "Caption of the Post",
    'link' => 'http://mylink.com',
    'description' => 'this is a description',
    'picture' => 'http://mysite.com/pic.gif',
    'actions' => array(
        array(
            'name' => 'Get Search',
            'link' => 'http://www.google.com'
        )
    )
);

// To authenticated user's wall
$result = $facebook->api('/me/feed/', 'post', $attachment);

// To page's wall
$result = $facebook->api('page-id/feed/','post',$attachment);

// To user's wall
$result = $facebook->api('user-id/feed/','post',$attachment); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T08:13:49.937

好的，也许我错过了文档中的某些内容，但我发现解决方案如下：

**请注意，这适用于尝试从 cron 作业发布的人。**

*   向您的应用授予 manage_pages、publish_stream 和 offline_access 权限
*   从图形 api 资源管理器中的我/帐户获取页面的访问令牌
*   在初始化 fb 对象后添加一行简单的代码

    ```
    $facebook->setAccessToken("XXXXX"); 
    ```

请注意，访问令牌需要是您从第 2 步获得的 PAGE 访问令牌，并且请记住，如果您取消对应用程序的身份验证，访问令牌将会更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T09:31:58.780

好吧，我以为我们已经修复了它，但该帖子仅在我实际登录应用程序本身时才有效。

我正在使用 Shawn 的代码以及来自“me/accounts/”的访问令牌提到的所有权限，用于 AmazingJobs 社区页面。

我已经将 manage_pages、publish stream 和 offline_access 授予我自己的 facebook 帐户，然后我使用 graph api explorer 在帐户中查找访问令牌并将其剪切并粘贴到我的代码中。有任何想法吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T19:51:53.697

1.  应用程序将需要询问您的权限 `manage_pages`。`publish_stream`
2.  `page_access_token`从图形 api`/accounts`调用中获取您的页面。您拥有的每个页面都会列出自己的令牌。此令牌可以保存到数据库或在需要时访问。不建议公开或共享此令牌。
3.  使用“php-sdk”来发帖。

参考：http: [//developers.facebook.com/docs/authentication/](http://developers.facebook.com/docs/authentication/)

参考：http: [//developers.facebook.com/docs/reference/php/](http://developers.facebook.com/docs/reference/php/)

注意：要在墙上发布时模拟页面（即作为页面而不是当前用户发布），您必须使用具有 manage_pages 和 publish_stream 权限的页面 access_token，如上面的页面访问令牌中所述。

***示例：** 假设用户已经为 Facebook 安装并初始化了 php sdk*

* * *

```
<?php
if($user){
  $vars = array(
  'message' => "message goes here",
  // you can uncomment below to enable an image with caption and link.
  //'picture' => "image",
  //'link' => "Link here",
  //'name' => "Name here",
  //'caption' => "Caption here",
  'show_error' => true,
  // comment out the access_token array below to post as a user instead of as page.
  array('access_token' => YourPageAccessToken)
);
$testpost = $facebook->api('YourPageId/feed', 'post', $vars);
}
?> 
```

* * *

> 如果您发现此答案有帮助或正确，请记住将其标记或标记为正确，以便将来的用户更容易找到答案。

# javascript - 是否可以在没有 CMS 的情况下使用富文本编辑器？

> ID：11852992
> 
> 赞同：0
> 
> 时间：2012-08-07T19:47:18.783
> 
> 标签：javascript, html, text, content-management-system, editor

富文本编辑器通常作为使用 joomla、wordpress 等制作的 CMS 网站的插件来实现，但是这些可以用于与仅使用 html php javascript 和作品从头开始制作的网站一起使用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T19:49:57.253

大多数 CMS 实现了像 CKEditor 这样的富文本编辑器。这是用 JavaScript 编写的，可以在任何 Web 应用程序中实现 - 例如，按照您的建议使用 html php 和 javascript。

查看他们的[网站](http://ckeditor.com/)以获取有关如何实施它的更多信息和示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T19:50:21.807

是的。查看[TinyMCE](http://www.tinymce.com/)。

引用网站： `"TinyMCE is a platform independent web based Javascript HTML WYSIWYG"`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T19:52:40.770

当然......看看以下链接：

*   [http://www.tinymce.com/](http://www.tinymce.com/)
*   [http://ckeditor.com/](http://ckeditor.com/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T19:50:03.037

是的。如果你正在寻找一个，我建议[http://ckeditor.com/](http://ckeditor.com/)

# android - ViewPager问题的android位图缓存

> ID：11852994
> 
> 赞同：3
> 
> 时间：2012-08-07T19:47:22.897
> 
> 标签：android, caching, bitmap, android-viewpager

我有一个带有 ImageView 作为子视图的 ViewPager。ImageView 显示从网络加载和/或缓存到本地缓存的位图，实现为基于 LruCache 的类（来自 Android 支持库）。问题是当从 LruCache 中删除图像时，GC 似乎没有释放或释放太晚的位图内存。即使从 LruCache 和 ViewPager 的持有 ImageViews 中删除了旧位图（我从 ViewPager 中删除了视图），我在从网络/磁盘加载新位图时也经常遇到 OutOfMemory 异常。我读到有时（？）您必须调用 Bitmap.recycle（在 Android 3.0 之前），但这不起作用。它也不适用于 ICS（我不在那里调用 Bitmap.recycle）。如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T20:30:36.043

如果某些东西仍在引用它，垃圾收集器将不会回收您的位图。我想你的位图上有 ImageViews。ViewPager 不会回收视图，因此您需要在未显示 ImageView 时清除它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-12T02:17:50.547

您可以查看来自 android 开发者[网站](http://developer.android.com/training/displaying-bitmaps/index.html)的 BitmapFun 示例，了解如何有效地显示位图。该示例已经包含图像的 GridView 和 ViewPager，您可以在构建应用程序时参考这些图像。尽管该示例存在一些缓存[问题](https://stackoverflow.com/questions/19166616/bitmapfun-sample-has-a-caching-issue)，但我已经解决了一些问题。你可以在[这里查看](https://github.com/capecrawler/BitmapFun)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-06T21:30:04.927

问题不在于处理很多图像，而是当您的活动被销毁时您的图像没有被释放。

如果不查看您的代码，很难说出为什么会这样。但是，本文有一些提示可能会有所帮助：

[http://blog.booking.com/android-reuse-bitmaps.html](http://blog.booking.com/android-reuse-bitmaps.html)

# operating-system - 如何判断 SP1 是否安装在 Windows Server 2008 R2 Standard 上？

> ID：11852995
> 
> 赞同：12
> 
> 时间：2012-08-07T19:47:25.387
> 
> 标签：operating-system, version, windows-server-2008-r2, servicepacks

我已经获得了对服务器的访问权限，并告诉我在上面安装了 SP1，但我想可能不是。如何检查 Windows Server 2008 R2 上是否安装了 Service Pack 1？

**我试过的：**

如果我右键单击计算机，然后单击属性，它会在 Windows 版本下显示“Windows Server 2008 R2”。如果已安装，我希望它会显示“Windows Server 2008 R2 Service Pack 1”，但我确实在 Windows 7 论坛中找到了有关该 Service Pack 未显示在计算机属性中的内容。

如果我单击控制面板-> 程序-> 查看已安装的更新，它也不存在。我没有看到“Service Pack”字样或对 KB 976932 的任何引用，我认为这是用于 Server 2008 R2 和 Windows 7 的 Service Pack 1 的 KB。（也许我错了？）

如果我运行 msinfo32，它显示版本为 6.1.7600 Build 7600

如果我从命令提示符调用 ver.exe，它会显示 Microsoft Windows [版本 6.1.7600]

有没有其他方法可以验证是否安装了 SP1？或者，我可以证明它没有安装吗？

**更新：**也许有人可以将其移至服务器故障？

这是我收到的解释：“Windows Server 2008 R2 w/sp1 来自我们的 Microsoft 下载，使用的密钥仅适用于该下载”这是 MSDN 下载的正常/预期行为吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-07T19:54:59.690

转到开始 > 运行并键入 winver。点击回车，将出现一个对话框。在主对话框正文的第二行，您将看到如下内容：

Microsoft Windows [版本 6.1.7600]

或者，如果安装了 SP1，您将看到：

Microsoft Windows [版本 6.1.7600：Service Pack 1]

如果正确安装了服务包，它将始终出现在 winver 对话框中，因此它的缺失证明它没有安装，或者以某种方式损坏。

# postgresql - 带有同义词的 Postgres 全文搜索

> ID：11852996
> 
> 赞同：7
> 
> 时间：2012-08-07T19:47:34.207
> 
> 标签：postgresql, full-text-search

我有一个餐厅数据库，我对其进行全文搜索。代码看起来像这样：

```
SELECT * FROM restaurant WHERE restaurant.search_vector @@ plainto_tsquery(:terms); 
```

并且`search_vector`是这样定义的：

```
alter table restaurant add column search_vector tsvector;
create index restaurant_search_index on restaurant using gin(search_vector);
create trigger restaurant_search_update before update or insert on restaurant
    for each row execute procedure
    tsvector_update_trigger('search_vector',
    'pg_catalog.english','title'); 
```

现在，这个搜索的一个显着问题是烧烤这个词。它可以拼写许多不同的方式：烧烤、烧烤、烧烤、烧烤、烧烤等。当有人搜索其中任何一个时，我需要在餐馆中搜索所有这些术语。

从我在网上阅读的内容来看，我似乎需要修改字典（那是`pg_catalog.english`，对吧？），但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T19:55:16.713

听起来你想要做的是在你的英语词典前面*添加*一个同义词词典。但这仅适用于单个单词，因此如果将 BBQ 解析为三个单独的标记，您可能会遇到问题。

[postgresql.org 文档中的同义词词典](http://www.postgresql.org/docs/current/static/textsearch-dictionaries.html#TEXTSEARCH-SYNONYM-DICTIONARY)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T20:00:56.947

当我遇到一个类似的问题时，我遇到了查询重写的选项，例如，参见[http://www.postgresql.org/docs/8.3/static/textsearch-features.html](http://www.postgresql.org/docs/8.3/static/textsearch-features.html)，第 12.4.2.1 节

这是一种比处理字典更简单的方法，因为它允许通过在重写表中插入新规则来立即扩展重写规则。

# php - 使用 Zend HTTP 的 Privoxy、Tor 和 cURL

> ID：11852999
> 
> 赞同：0
> 
> 时间：2012-08-07T19:47:39.217
> 
> 标签：php, zend-framework, yii

我真的陷入了困境，需要专家的帮助。让我解释一下我正在努力实现的目标和设置。我有一个脚本，它使用 Zend_Http_Client 在 https 表单上发布。在服务器设置上，我运行了 tor & privoxy。一切正常，但现在我需要通过在同一台服务器上运行多个 tor 和 privoxy 实例来使代码更具可扩展性。

因此，我将 Zend 的适配器从**Zend_Http_Client_Adapter_Curl**转移到**Zend_Http_Client_Adapter_Proxy**。但是在更改适配器后，我遇到了一个奇怪的错误，上面写着 -**从客户端收到 400 Invalid header**，当我转储 Zend 客户端的对象时，我看到以下内容 -

```
MyWebClientResponse::__set_state(array(
   'json' => NULL,
   'version' => '1.1',
   'code' => 400,
   'message' => 'Invalid header received from client',
   'headers' => 
  array (
    'Proxy-agent' => 'Privoxy 3.0.19',
    'Content-type' => 'text/plain',
    'Connection' => 'close',
  ),
   'body' => 'Invalid header received from client.
',
)) 
```

我不明白我做错了什么。代码是在 Yii 框架中完成的，所以很难分享所有的类和模型，但我分享的是代码的主要部分，它们负责这个 -

```
$client = MyWebClient::factory();
$adapter = $client->getAdapter();
$adapter->setConfig(array('timeout' => 120,
'proxy_host' => 'localhost',
'proxy_port' => 8124
));
$client->setAdapter($adapter);
$client->setCookieJar(true);
$client->setParameterPost(array(
'name' => 'firstname',
'password' => 'password,
'login' => 'home'
));
$response = $client->setUri('https://www.domain.com/post.php')->requestApi('POST', false); 
```

这是 MyWebClient 类的构造函数，以防万一它需要，所有其他方法都是标准的。

```
 static public function factory($new = false)
    {
        if (!isset(self::$client))
        {
            self::$client = new MyWebClient();
            self::$client->setConfig(array(
                'adapter' => 'Zend_Http_Client_Adapter_Proxy',
//              'proxy_host' => 'localhost',
//              'proxy_port' => 8118,
                'persistent' => false,
                'timeout' => 120
            ));
        }
        return self::$client;
    } 
```

标头正在 requestAPI 方法中设置，代码段是 -

```
 $headers = array(
            'X-PHX' => 'true',
            'X-Requested-With' => 'XMLHttpRequest',
            'Referer' => 'https://domain.com/index.html',
            'User-Agent' => self::getRandomUserAgent()
        );
        $this->setHeaders($headers); 
```

我非常感谢在这方面的帮助。认为它是 privoxy，它不会让请求离开服务器。

萨钦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T19:51:26.793

看起来您可能需要用引号将用户代理包装起来。在设置标题时试试这个，看看是否能解决问题。

```
$headers = array(
        'X-PHX' => 'true',
        'X-Requested-With' => 'XMLHttpRequest',
        'Referer' => 'https://domain.com/index.html',
        'User-Agent' => "'".self::getRandomUserAgent()."'"
    );
    $this->setHeaders($headers); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T09:51:53.317

最后我决定使用原生 cURL 库和它附带的 cookieJar。它按预期工作。

干杯，萨钦