# StackOverflow 问答 11674000-11674999

# json - 如何在另一个测试的请求中使用 JMeter 中一个测试的响应？

> ID：11674009
> 
> 赞同：2
> 
> 时间：2012-07-26T16:40:39.683
> 
> 标签：json, jmeter, load-testing

我有 2 个测试必须一个接一个地运行。第一个测试的 JSON 响应包含一个字段，我必须从中提取值并将其放入文件中。第二个测试将读取此文件并替换 JSON 请求中的变量参数。

例如，如果第一个测试的响应是以下类型：

```
{"id":"a1","attr":"b1"}
{"id":"a2","attr":"b2"} 
```

第二次测试的请求格式如下：

```
{"ID":"${A}","ATTR":"B"} 
```

所以发送的请求应该是：

```
{"ID1":"a1","ATTR":"B"}
{"ID2":"a2","ATTR":"B"} 
```

为测试。

我想要的是首先读取所有 JSON 响应，然后使用第一个字段中的值作为`A`第二个测试的 JSON 请求的参数值。无论如何在JMeter中可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T22:40:42.080

您可以使用[FlexibleFileWriter](http://code.google.com/p/jmeter-plugins/wiki/FlexibleFileWriter)将提取的数据存储到文件中，然后使用例如[VariablesFromCSV](http://code.google.com/p/jmeter-plugins/wiki/VariablesFromCSV)或[RawDataSource](http://code.google.com/p/jmeter-plugins/wiki/RawDataSource)插件或[__CSVRead](http://jmeter.apache.org/usermanual/functions.html#__CSVRead)函数从第二个测试中读取它。

或者您可以创建一个大型测试（这使得数据传输变得微不足道），它将按顺序运行这两个测试（[ParameterizedController](http://code.google.com/p/jmeter-plugins/wiki/ParameterizedController)可以帮助您参数化和整理这种方法）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T15:07:30.103

“测试”是指请求吗？如果您要在其间传递数据的请求属于同一个线程组，那么您可以简单地使用[正则表达式提取器](http://jmeter.apache.org/usermanual/component_reference.html#Regular_Expression_Extractor)。

# php - 这个数据库调用有什么问题？

> ID：11674018
> 
> 赞同：0
> 
> 时间：2012-07-26T16:41:18.893
> 
> 标签：php, jquery, mysql, json

**-问题仍未解决-**

我正在尝试调用数据库，将表的所有行放入数组中，将该表作为 json 数据传递给我的 JS，然后将该数据用作函数的参数。

当我运行脚本时，什么也没有发生。我在控制台中没有任何错误，脚本的其余部分正常加载。我对 mySQL 和 PHP 很陌生，我在这里做错了什么？我怀疑我以某种方式搞砸了 php。

*   XAMPP 服务器，正在我的桌面上进行测试
*   所有链接的文件都在同一个目录中
*   任何地方都没有显示可见的错误。据我所知，该脚本甚至没有尝试加载 PHP，但也没有在 firebug 的控制台中显示错误

**尝试**：

*   重命名不带空格的表
*   将 for 循环放在回调函数中
*   修改php错误

这是我正在使用的更新的 JS：

```
 this.taskMenu = function()
    {
        var table = [];
        $.getJSON("taskMaster.php", {"table" : "firstlist"},
            function(data)
            {
                table.push(data);

                for(i=0; i<table.length; i++)
                {
                    var taskId = table[i].taskName.replace(/\s+/g,"") + i;
                    formatTask("interface",taskId,table[i].taskName,table[i].taskDescription,table[i].taskComplete);
                }

            });
     } 
```

这是更新的PHP：

```
error_reporting(E_ALL); ini_set('display_errors','On');
$con = mysql_connect("localhost", "root", "m3648y73");
if (!$con){die('Could not connect: ' . mysql_error());};
mysql_select_db("tasklistdb", $con);

$table = $_GET['table'];

$sql = mysql_query("SELECT taskName, taskId, taskDescription, taskComplete FROM `".$table."`");
$listTasks = array();

while ($row_user = mysql_fetch_assoc($sql))
    $listTasks[] = $row_user;

echo json_encode($listTasks);

mysql_close($con); 
```

我是否正确链接到数据库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T16:48:16.103

getJSON 是异步调用。所以在它可以从 PHP 中获取值并执行回调函数之前，它会移动到 for 循环，这里的表是空的。

解决方案：在回调函数中移动你的 for 循环

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T16:45:51.470

`$listTasks = array()`您在 php 文件的行上缺少一个分号

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-26T16:50:11.780

发生这种情况是因为在请求本身之前执行的异步请求之后的 js 代码已经结束。试试这个：

```
this.taskMenu = function()
{
    var table = [];
    $.getJSON("taskMaster.php", {table : "first list"},
        function(data)
        {
            table.push(data);
            for(i=0; i<table.length; i++)
            {
                var taskId = table[i].taskName.replace(/\s+/g,"") + i;
                formatTask("interface",taskId,table[i].taskName,table[i].taskDescription,table[i].taskComplete);
             }
        });
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-26T16:45:16.177

您的表名不能是“第一个列表”

MySQL 表名中不能有空格。

此外，您应该将表放在 JSON 值中的双引号中，例如 {"table":"table_name"}

# c# - 加载excel模板文件并将数据写入单元格？

> ID：11674022
> 
> 赞同：1
> 
> 时间：2012-07-26T16:41:35.787
> 
> 标签：c#

我有一个 excel 模板文件 (C:\Report\Template\abc.xls)。我需要编写一个 C# 控制台应用程序来执行以下操作，

1.  从 Template 文件夹中复制 abc.xls 文件，并以不同的名称和不同的文件夹“Data”保存相同的模板 ((C:\Report\Data\new_abc.xls)

2.  将“new_abc.xls”文件加载到内存中并将数据（来自数据库）写入它的特定单元格（例如我想在单元格 H17 中写入）

请让我建议或给我链接或代码来执行此操作。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T16:45:19.523

1.  复制文件很容易用[`File.Copy`](http://msdn.microsoft.com/en-us/library/system.io.file.copy.aspx). 只需将要从中复制的源路径和要复制到的目标路径作为字符串传递。
2.  查看[`Microsoft.Office.Interop.Excel`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel%28v=office.11%29.aspx)用于操作 Excel 工作簿的类。这是一个[很好的代码示例](http://msdn.microsoft.com/en-us/library/ms173186%28v=vs.80%29.aspx)，可以帮助您入门。这[也是另一个概述](http://www.dotnetperls.com/excel)。

# javascript - rangy - 如何处理 iframe 中的内容

> ID：11674027
> 
> 赞同：0
> 
> 时间：2012-07-26T16:41:48.610
> 
> 标签：javascript, iframe, rangy

我需要你关于 rangy 图书馆的帮助。

如何在 iframe 选定的内容中应用 rangy，我无法理解（（

我页面中的此代码使用所有 iframe 内容创建红色粗体选择，但我需要将其仅应用于用户选择

```
var cssApplier;
$("#ok_button").click(function()
{
    var iframe = document.getElementById("iframe_id");
    var iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
    var range = rangy.createRange(iframeDoc);
    cssApplier.applyToRange(range);
});

$("iframe#iframe_id").load(function()
{
         rangy.init();
    cssApplier = rangy.createCssClassApplier("boldRed", {normalize: true});
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T23:22:36.270

您需要从 iframe 中获取选择。就是这样：

```
var cssApplier;
$("#ok_button").click(function()
{
    var iframe = document.getElementById("iframe_id");
    var iframeWin = rangy.dom.getIframeWindow(iframe);
    cssApplier.applyToSelection(iframeWin);

    // In Rangy 1.3, you can pass the iframe object directly into
    // applyToSelection so the previous two lines become:
    // cssApplier.applyToSelection(iframe);
});

$("iframe#iframe_id").load(function()
{
         rangy.init();
    cssApplier = rangy.createCssClassApplier("boldRed", {normalize: true});
}); 
```

# c# - SETCHARFORMAT meaaage 从 Color 到 int 的转换

> ID：11674029
> 
> 赞同：0
> 
> 时间：2012-07-26T16:41:55.520
> 
> 标签：c#, winforms

我想将 , 转换为`object Color`,`Int`将他放入`crTextColor`成员中，所以我使用了方法`myColor.ToArgb()`，但是颜色发生了变化，并显示了不同的颜色。

为什么会这样？

这是代码：

```
 CHARFORMAT2 fmt = new CHARFORMAT2();
      fmt.cbSize = Marshal.SizeOf(fmt);
      // check if the text contains CFE_AUTOCOLOR effect
      SendMessage(new HandleRef(this, Handle), EM_GETCHARFORMAT, SCF_SELECTION, ref fmt);
      if ((fmt.dwEffects & CFE_AUTOCOLOR) == CFE_AUTOCOLOR)
      {
          fmt.dwEffects -= CFE_AUTOCOLOR;
      }
      fmt.dwMask = CFM_COLOR;
      Color c = Color.Red;
      fmt.crTextColor =  c.ToArgb();
      SendMessage(new HandleRef(this, Handle), EM_SETCHARFORMAT, SCF_SELECTION, ref fmt); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T16:53:53.807

这工作正常。你在做不同的事情吗？

```
int crTextColor;

public Form1()
{
    InitializeComponent();
    BackColor = Color.Aqua;
    crTextColor = BackColor.ToArgb();//To number
    Text = crTextColor.ToString();
}

private void button1_Click(object sender, EventArgs e)
{
    BackColor = Color.FromArgb(crTextColor);//From number
} 
```

编辑：（看到你的编辑后）

好的。所以你把我带到了那里，我真的不知道这些东西。但：

如果您在`CHARFORMAT2`这里访问 MSDN 的页面[http://msdn.microsoft.com/en-us/library/windows/desktop/bb787883%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb787883%28v=vs.85%29.aspx)并在其中搜索`crTextColor`您会发现（如第五种情况）对它的解释。它说它的类型是： COLORREF 。如果您单击该链接 - 它说它是`RGB`. 点击`RGB`那里的链接到这里[http://msdn.microsoft.com/en-us/library/windows/desktop/dd162937%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162937%28v=vs.85%29.aspx)它说：

```
 C++

COLORREF RGB(
  BYTE byRed,
  BYTE byGreen,
  BYTE byBlue
); 
```

另一方面 - 如果你去这里[http://msdn.microsoft.com/en-us/library/system.drawing.color.toargb.aspx](http://msdn.microsoft.com/en-us/library/system.drawing.color.toargb.aspx)你会看到（在“备注”中`Color.ToArgb`）`ARGB`：

> “以 AA 表示的最高有效字节 (MSB) 是 alpha 分量值。”

所以*也许*这就是问题所在。但是，再说一次，**我真的不知道这些东西！**我只是做了一些搜索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T16:54:06.233

看看这是否适合你

```
int myColorVal = myColor.ToArgb();
someobject.crTextColor = Color.FromArgb( myColorVal ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-11T17:41:29.400

我已经使用二进制和移位运算符完成了这项工作。

```
 Int32 key = color.R << 16 | color.G << 8 | color.B; 
```

# jquery - Yii：以 JSON 格式渲染部分并返回到 AJAX

> ID：11674030
> 
> 赞同：2
> 
> 时间：2012-07-26T16:41:58.220
> 
> 标签：jquery, ajax, yii, renderpartial

根据上述主题，我对数据的返回有些困惑。因此，当我尝试将渲染部分视图数据从我的控制器返回到 AJAX 时，代码将如下所示。

jQuery AJAX：

```
$.ajax({
         url: "<?php echo $this->createUrl('ajaxrequest');?>",
         type: "POST",
         data: {affordableCarPrice: ccarprice},                        
         success: function(data){
            console.log(data);
         }
}); 
```

Yii 控制器

```
public function actionAjaxrequest(){               

        $carListingView[] = $this->renderPartial("_budgetNewCarsListing", array('newCarListing' => $newCarListing), true);
        $carListingView[] = $this->renderPartial("_budgetUsedCarsListing", array('usedCarListing' => $usedCarListing), true);

        var_dump($carListingView);
} 
```

控制器内部的代码，我已将其最小化，当我记录返回数据时，它给了我正确的代码。但是，当我在控制器中使用 json_encode 数组并返回查看返回数据时，它给了我错误的数据。

尽管我在 JQuery ajax 中设置了 dataType: 'json' 和 contentType: "application/json; charset=utf-8"。或 header('Content-type: application/json'); 在控制器中。它仍然返回错误的数据。

非常需要帮助，因为我几乎 2 天都无法解决这个问题。:(

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-26T19:33:25.343

将数据返回给 JS：

```
public function actionAjaxrequest(){               
    $carListingView[] = $this->renderPartial("_budgetNewCarsListing", array('newCarListing' => $newCarListing), true);
    $carListingView[] = $this->renderPartial("_budgetUsedCarsListing", array('usedCarListing' => $usedCarListing), true);

    echo CJSON::encode($carListingView);
} 
```

两件重要的事情。第一个是 的第三个参数`renderPartial()`。正如[文档所述](http://www.yiiframework.com/doc/api/1.1/CController#renderPartial-detail)：

> 是否应该返回渲染结果而不是显示给最终用户

这意味着不是回显呈现的视图，而是将其作为字符串返回。

第二个是[CJSON::encode()](http://www.yiiframework.com/doc/api/1.1/CJSON#encode-detail)，它接受变量并将其转换为 JSON 表示，javascript 将能够处理。 `CJSON::encode()`的优点是它不需要任何特定版本的 PHP（`json_encode`需要 PHP 5.2 或更高版本），并且它可以处理 Active Records。

# c++ - 非阻塞时套接字不能接受连接？

> ID：11674031
> 
> 赞同：1
> 
> 时间：2012-07-26T16:41:58.373
> 
> 标签：c++, sockets, nonblocking, vxworks

编辑：搞砸了我对接受调用的伪编码，它现在反映了我实际在做什么。

我有两个插座。我正在尝试在两者之间使用发送/接收。当监听套接字阻塞时，它可以看到连接并接收它。当它是非阻塞的时，我进行了一个忙碌的等待（只是为了调试它）并且它超时，总是带有 error `EWOULDBLOCK`。为什么侦听套接字无法看到阻塞时可以看到的连接？

代码主要在函数中分离，但这里有一些我正在做的伪代码。

```
int listener = -2;
int connector = -2;
int acceptedSocket = -2;

getaddrinfo(port 27015, AI_PASSIVE) results loop for listener socket
{
  if (listener socket() == 0)
  {
    if (listener bind() == 0)
      if (listener listen() == 0)
        break;
    listener close(); //if unsuccessful
  }
}
SetBlocking(listener, false);

getaddrinfo("localhost", port 27015) results loop for connector socket
{
  if (connector socket() == 0)
  {
    if (connector connect() == 0)
      break; //if connect successful
    connector close(); //if unsuccessful
  }
}

loop for 1 second
{
  acceptedSocket = listener accept();
  if (acceptedSocket > 0)
    break; //if successful
} 
```

This just outputs a huge list errno of `EWOULDBLOCK` before ultimately ending the timeout loop. If I output the file descriptor for the accepted socket in each loop interation, it is never assigned a file descriptor.

The code for SetBlocking is as so:

```
int SetBlocking(int sockfd, bool blocking)
{
  int nonblock = !blocking;

  return ioctl(sockfd,
    FIONBIO,
    reinterpret_cast<int>(&nonblock));
} 
```

If I use a blocking socket, either by calling `SetBlocking(listener, true)` or removing the `SetBlocking()` call altogether, the connection works no problem.

Also, note that this connection with the same implementation works in Windows, Linux, and Solaris.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T16:56:44.953

Because of the tight loop you are not letting the OS complete your request. That's the difference between VxWorks and others - you basically preempt your kernel.

Use `select(2)` or `poll(2)` to wait for the connection instead.

# google-app-engine - 使用phonegap的gwt到android

> ID：11674036
> 
> 赞同：0
> 
> 时间：2012-07-26T16:42:34.020
> 
> 标签：google-app-engine, gwt, cordova, mgwt

我需要通过使用 phonegap 将我的 gwt 应用程序推送到 android。我遵循[http://code.google.com/p/gwt-phonegap/wiki/GettingStarted](http://code.google.com/p/gwt-phonegap/wiki/GettingStarted)和本教程[http://blog.ic3man.gr/?p= 120](http://blog.ic3man.gr/?p=120) . 但是当我运行应用程序时，我得到错误**gwt application must be recompiled**。这些是我遵循的步骤

1.  编译 gwt 应用程序

[2.按照入门](http://docs.phonegap.com/en/2.0.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android)中的说明在android中创建一个phonegap项目 3.将gwt应用程序的war目录移动到android项目4.将.nocache.js文件指向android应用程序的索引。

请让我知道我哪里出错了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T20:28:21.063

通常，当您收到此类错误时，您的 nocache.js 文件与您编译的 javascript 不匹配。

如果您将 maven 和 eclipse 与 google eclipse 插件一起使用并且没有为您的 war 文件夹和 compile 文件夹正确选择正确的文件夹，则可能会发生这种情况。

也许您需要阅读：[http ://code.google.com/p/google-web-toolkit/wiki/WorkingWithMaven](http://code.google.com/p/google-web-toolkit/wiki/WorkingWithMaven)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T13:15:35.343

我解决了这个问题，我使用 Eclipse IDE，并且在名为 Google 的右键单击项目选项上有 GWT 编译器，它会生成所有可能的 js。现在运行项目，它通过 Phonegap-gwt 在 android 中对我来说很好！希望它可以帮助某人！

# parsing - 解析器的问题

> ID：11674037
> 
> 赞同：2
> 
> 时间：2012-07-26T16:42:40.093
> 
> 标签：parsing, haskell

我希望有人可以帮助我理解以下代码

```
type Parser a = String -> [(a,String)]

item :: Parser Char
item = \ s -> case s of
    [] -> []
    (x:xs) -> [(x,xs)]

returnP :: Parser a
returnP a  = \s -> [(a,s)] 

(>>=) :: Parser a -> (a -> Parser b) -> Parser b
p>>=f = \s -> case p s of
    [(x,xs)]-> f x xs
    _ -> []

twochars :: Parser (Char,Char)
twochars= item >>= \a -> item >>= \b -> returnP (a,b) 
```

一切似乎都很清楚，但我不明白 twochars 函数最后一行中的 Lampda 函数。如果有人能给我一个解释，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T21:11:50.033

为了清楚起见重写`twochars`函数，它基本上是：

```
twochars = 
  item >>= \a -> -- parse a character and call it `a`
  item >>= \b -> -- parse another character and call it `b`
  returnP (a,b)  -- return the tuple of `a` and `b` 
```

这里的 lambdas 只是为解析的字符引入名称，并让它们传递到计算的后面部分。

它们对应于您定义的绑定中的第二个参数：

```
(>>=) :: Parser a        -- your item
      -> (a -> Parser b) -- your lambda returning another parse result
      -> Parser b 
```

# c# - asp.net 添加新字体

> ID：11674038
> 
> 赞同：4
> 
> 时间：2012-07-26T16:42:45.033
> 
> 标签：c#, asp.net, css, fonts

我想从我的“样式”文件夹中添加一个新字体，类型为 .ttf 到页面。将所有文本字体更改为该字体的 CSS 代码是什么？

我认为这只是语法问题，因为我知道这很好用：

```
body {font-family: verdana;} 
```

所以基本上，如何将它指向我的字体文件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T17:00:28.623

我相信您正在寻找`src attribute`字体支持。请参阅 url 了解更多知识[http://www.w3.org/TR/css3-webfonts/#src-desc](http://www.w3.org/TR/css3-webfonts/#src-desc)

```
<style type="text/css">
@font-face {
    font-family: "The Example Font";
    src: url(http://www.examplefonts.com/example.ttf) format("truetype");
}
div.ExampleFont { 
    font-family: "The Example Font", Verdana;
}
</style>
<div class="ExampleFont ">I am using the Example Font</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T16:45:13.037

您不能从 Web 应用程序引用字体文件。您只能使用保证已安装在所有机器上的字体，或者使用诸如[Google Web Fonts](http://www.google.com/webfonts/)之类的字体。然后，您将[使用 CSS](http://www.w3schools.com/css/css_font.asp)，就像您已经必须使用 CSS 选择器应用字体一样。

[Web 安全字体列表](http://www.w3schools.com/cssref/css_websafe_fonts.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T16:58:06.297

Microsoft 有一个[Web 嵌入字体工具](http://www.microsoft.com/typography/WEFT.mspx)，可让您嵌入字体。这是一个关于如何使用它的[教程。](http://www.netmechanic.com/news/vol3/css_no15.htm)

# objective-c - Cocos2d 和 tilemap 可碰撞墙问题

> ID：11674047
> 
> 赞同：0
> 
> 时间：2012-07-26T16:43:31.087
> 
> 标签：objective-c, ios, cocos2d-iphone, collision-detection

我试图在迷宫中实现物体的随机移动，所以我用可碰撞的墙壁制作了瓷砖地图。我正在使用这样的代码检查对象可以移动的每个方向的碰撞：

```
int directionsCount = 4;
CGPoint position = sprite.position;
CCArray *newPositions = [CCArray arrayWithCapacity:directionsCount];
CGFloat tileSize = _tileMap.tileSize.width;
[newPositions addObject:[NSValue valueWithCGPoint:CGPointMake(position.x, position.y + tileSize)]];
[newPositions addObject:[NSValue valueWithCGPoint:CGPointMake(position.x + tileSize, position.y)]];
[newPositions addObject:[NSValue valueWithCGPoint:CGPointMake(position.x, position.y - tileSize)]];
[newPositions addObject:[NSValue valueWithCGPoint:CGPointMake(position.x - tileSize, position.y)]];
for (NSValue *value in newPositions) {
    int tileGid = [_meta tileGIDAt:[self tileCoordForPosition:[value CGPointValue]]];
    if (tileGid) {
        NSDictionary *properties = [_tileMap propertiesForGID:tileGid];
        if (properties) {
            NSString *collision = [properties valueForKey:@"Collidable"];
            if (collision && [collision compare:@"True"] == NSOrderedSame) {
                [newPositions removeObject:value];
            }
        }
    }
}
[sprite runAction:[CCMoveTo actionWithDuration:1.0f position:[[newPositions objectAtIndex:(CCRANDOM_0_1() * [newPositions count])] CGPointValue]]]; 
```

但在少数情况下，当有死胡同或路径从正确的物体转向穿过墙壁时。有没有办法解决这样的环境？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T17:56:48.737

这是我的瓷砖地图代码：

```
- (void)ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{

    UITouch *myTouch = [touches anyObject];
    CGPoint location = [myTouch locationInView:[myTouch view]];
    location = [[CCDirector sharedDirector] convertToGL:location];

    [self MoveToTilePosition:location];
} 
```

//这里 cat = 你的主要移动精灵

```
-(void)MoveToTilePosition:(CGPoint)inPoint
{
     CCTMXLayer *layer = [_tileMap layerNamed:@"Background"];

     CGPoint point= [self MyTileCoordForPosition:inPoint];
     CCSprite *tileN = [layer tileAt:point];

     CGPoint point2= [self MyActerTileForPosition:cat.position];

     CCSprite *catTile = [layer tileAt:point2];

    if( ( (point.x==point2.x) || (point.y==point2.y) )
       &&
       !( (point.x==point2.x) && (point.y==point2.y) )
       )
    {
        CGPoint newPos = ccp(tileN.position.x+TILE_SIZE/2,tileN.position.y+(TILE_SIZE/2) );

        if([self checkForMovement:point2 To:point ])
        {
            [cat runAction:[CCMoveTo actionWithDuration:1 position:newPos]];
        }
    }
}

- (CGPoint)MyActerTileForPosition:(CGPoint)position 
{
    int maxTileCol = _tileMap.mapSize.height; 

    int x = ( (position.x)/TILE_SIZE);
    int y = maxTileCol - ( ((position.y))/TILE_SIZE);
    return ccp(x, y);
}

typedef enum GRID_TYPE{
        kGrideCollidable,
        kGrideCollectable,
        kGrideNormal,

}GridType;

-(bool)checkForMovement:(CGPoint)start To:(CGPoint)end
{

    bool isFreePath = true;

    bool isXDif = (start.x!=end.x) ? true :false;

    if(isXDif)
    {
        int diff = end.x-start.x ;

        for (int i=1; i<=abs(diff); i++) {
            CGPoint pt = start;

            if(diff>0)
                pt.x+= i;
            else
                pt.x-= i;

        //    printf("toMove(%f,%f)  \n",pt.x,pt.y);

            GridType type = [self getTileType:pt ];

            if(type==kGrideCollidable)
                isFreePath = false;   
        }
    }
    else
    {
        int diff = end.y-start.y ;

        for (int i=1; i<=abs(diff); i++) {
            CGPoint pt = start;

            if(diff>0)
                pt.y+= i;
            else
                pt.y-= i;

            GridType type = [self getTileType:pt ];

            if(type==kGrideCollidable)
                isFreePath = false;   
        }
    }

    return isFreePath;
}

-(GridType)getTileType:(CGPoint)position {    
     GridType type = kGrideNormal;

    CGPoint tileCoord = position;//[self tileCoordForPosition:position];
    unsigned int tileGid = [_meta tileGIDAt:tileCoord];
    if (tileGid) {
        NSDictionary *properties = [_tileMap propertiesForGID:tileGid];
        if (properties)
        {
            NSString *collision = [properties valueForKey:@"Collidable"];
            if (collision && [collision compare:@"True"] == NSOrderedSame) {
                 type = kGrideCollidable ;
            }
            NSString *collectable = [properties valueForKey:@"Collectable"];
            if (collectable && [collectable compare:@"True"] == NSOrderedSame) {
                type = kGrideCollectable ;
                 // [[SimpleAudioEngine sharedEngine] playEffect:@"pickup.caf"];
            }
        }
    }
    return type;    
} 
```

# vim - Vim退格不起作用

> ID：11674048
> 
> 赞同：1
> 
> 时间：2012-07-26T16:43:33.363
> 
> 标签：vim

> **可能重复：**
> [vim 退格离开 ^?](https://stackoverflow.com/questions/9701366/vim-backspace-leaves)

我的 Vim`Backspace`工作不正常。当我按下它时，它会打印出来`^?`。我发现了一些关于如何修复它的其他建议，例如添加`set backspace=indent,eol,start`到 .vimrc。但这似乎无法正常工作。有没有人对如何解决这个问题有任何其他想法？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-26T17:56:46.187

perreal 的回答告诉您如何更改 Linux 控制台以匹配 vim 的当前设置，但您也可以选择更改 vim 的设置以匹配 Linux 控制台。相关的选项是`t_kb`和`t_kD`告诉 vim 当你分别按下 Backspace 和 Delete 键时终端会生成什么字符。首先查询当前设置，以便查看它们的设置：

```
:set t_kb? t_kD? 
```

然后像这样改变它们：

```
:set t_kb=XXX t_kD=XXX 
```

代替 XXX，您应该键入`Ctrl`-`V`后跟`Backspace`第一个，然后`Ctrl`-`V`后跟`Del`第二个。

您可能会问另一个问题，关于为什么一开始没有正确检测到这些设置。如果您有兴趣对此进行调查，我们需要查看您的`$TERM`变量和相应的 terminfo 数据库条目，您可以通过以下方式获得：

```
echo $TERM
infocmp | egrep 'kdch1|kbs' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T16:50:50.947

来自 vim-docs [:help fixdel](http://vimdoc.sourceforge.net/htmldoc/options.html#%3afixdel)

> 关于 Linux 的注意事项：默认情况下，退格键产生 CTRL-?，这是错误的。您可以通过将此行放入 rc.local 中来修复它：

`echo "keycode 14 = BackSpace" | loadkeys`

# java - 休眠检查线程中与数据库的连接（每个时间段）

> ID：11674049
> 
> 赞同：3
> 
> 时间：2012-07-26T16:43:35.343
> 
> 标签：java, hibernate, session, connection

监视与数据库的连接的最佳/良好/最佳方式是什么。我正在编写摇摆应用程序。我想要它做的是在每个时间段检查与数据库的连接。我试过这样的事情。

```
org.hibernate.Session session = null;
            try {
                System.out.println("Check seesion!");
                session = HibernateUtil.getSessionFactory().openSession();

            } catch (HibernateException ex) {
            } finally {
                session.close();
            } 
```

但这不起作用。我想到的第二个问题是本次会议结束将如何影响其他查询。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T16:50:14.197

使用像[c3p0](/questions/tagged/c3p0 "显示标记为“c3p0”的问题")或[dbcp](/questions/tagged/dbcp "显示标记为“dbcp”的问题")这样的连接池。您可以配置此类池以监视池中的连接 - 在将连接传递给 Hibernate 之前、在接收它之后或定期接收它之后。如果连接断开，池会透明地关闭它，丢弃并打开一个新的——你不会注意到。

数据库连接池更适合同时打开多个连接的多用户、数据库繁重的应用程序，但我认为这并不过分。绑定到最大 1 个连接的池应该可以正常工作。

UPDATE：每次你尝试访问数据库时，Hibernate 都会询问`DataSource`（连接池）。如果没有可用的活动连接（例如，因为数据库已关闭），这将引发异常。如果您想提前知道数据库何时不可用（即使用户没有做任何事情），不幸的是，您需要一个后台线程不时检查数据库。

但是，在某些配置中，几乎不打开会话可能还不够。您最好运行一些虚拟的、廉价的查询，例如`SELECT 1`（在原始 JDBC 中）。

# sharepoint - 从列表中动态读取查找值并填充选择框

> ID：11674052
> 
> 赞同：1
> 
> 时间：2012-07-26T16:43:39.380
> 
> 标签：sharepoint, sharepoint-2010

我有一个包含不同音乐**流派**的列表，该列表作为查找链接到**乐队**和**唱片**列表。当我注册一个新乐队时，我设置了这个乐队演奏的典型流派，当我注册新唱片时，我注册了乐队和流派。

是否有任何推荐的技术可以在创建新记录时自动（和动态地）从 Band 项目中读取流派并填写流派列表？

我正在考虑创建一些集成网络服务，它可以从返回 json 的乐队中读取流派，并在 javascript 的帮助下填充流派列表。我有“onchange”功能。

**新乐队**

![新乐队](../Images/6ceecc7da32c091d225d8945cb8c0f32.png)

**新纪录**

![新纪录](../Images/424b8b834baeef3949b92a609ddc5652.png)

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T19:45:47.870

看看 SPServices javascript 库 - 它具有非常好且易于使用的支持，可提供这种与内置 SharePoint 编辑页面的动态交互。[http://spservices.codeplex.com/](http://spservices.codeplex.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-27T22:13:00.350

假设您使用列表选择器字段将乐队名称带入记录列表，为什么在选择乐队名称时不从乐队列表中带入流派字段？

# java - 基于数据库的报告存在哪些脚本框架？

> ID：11674055
> 
> 赞同：0
> 
> 时间：2012-07-26T16:43:43.257
> 
> 标签：java, database, scripting, jasper-reports, reporting

我必须为我的工作运行大量基于关系数据库的报告。为了让我的生活更轻松，我编写了一些脚本和程序来运行报告（简单的 SQL 查询、复杂的超特定横切查询和完整的 JasperReports 任何风格的报告）、压缩和/或对其进行加密，并通过 SMTP 将其发送给一个或多个收件人。

其中一些是用 Java 编写的，一些是用 PHP 编写的，还有一些是 bash shell 脚本。我想统一其中的很多内容，并添加一个报告描述格式，该格式可以包含配置信息，例如哪个报告（或报告：有时我必须一次运行多个报告并将它们组合成一个“包”客户端）运行，报告的任何参数应该设置为（例如客户 ID），谁应该通过电子邮件/SFTP/等接收报告。

请注意，像 JasperReports 这样的工具只是解决方案的一部分：实际的报告生成部分。我对可用于编写整个过程的脚本并从 cron 作业运行的东西更感兴趣。

是否有任何产品（OSS 会很棒）来帮助我做这种事情？或者，这种事情对于特定环境来说是否如此独特以至于需要我已经构建的那种定制工具？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T03:53:28.597

使用与您的 Java/J2EE 应用程序集成的[BIRT](http://www.eclipse.org/birt/phoenix/)来生成引人注目的报告。第二个选项是类似于流行的 Crystal Reports的[DataVision 。](http://datavision.sourceforge.net/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T06:47:00.720

这可能与您的想法有些不同，但是您是否考虑过（或听说过）[R](http://www.r-project.org/)？R 是一种开源统计编程语言，具有许多功能，但针对您的问题是；

*   是开源的
*   具有支持与 SQL 数据库交互的软件包（通用 ODBC，或特定的 Oracle、MySQL、Postgres 等）
*   可以对数据进行多种数据处理步骤
*   可以制作表格和图表
*   可以通过多种方式生成文档（[LaTex](http://en.wikipedia.org/wiki/Sweave)、Markdown、ODF）
*   可以从命令行使用，（例如我用make生成文档）
*   可以集成到 Web 服务器 ( [RApache](http://www.rapache.net/) )
*   可以运行Java代码（[RJava](http://www.rforge.net/rJava/)）

唯一的问题是这将是您自己的，没有提供您想要的功能的特定实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T06:25:00.137

一些可以帮助您配置报告传递工作流的框架是。

1.  Apache Service Mix [http://servicemix.apache.org/](http://servicemix.apache.org/)参见以前版本的架构图[http://servicemix.apache.org/home.data/ServiceMix3.png](http://servicemix.apache.org/home.data/ServiceMix3.png)

2.  弹簧集成[http://static.springsource.org/spring-integration/reference/htmlsingle/](http://static.springsource.org/spring-integration/reference/htmlsingle/)

两者都应该为您提供一个用于构建解耦架构的框架，以便报告压缩的部分和报告加密和报告生成的部分彼此不了解，但可以通过框架进行配置以在特定工作流中工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T21:52:55.490

你可能想看看 Pentaho：[http ://www.pentaho.com/explore/pentaho-business-analytics/](http://www.pentaho.com/explore/pentaho-business-analytics/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-13T19:34:12.537

也许你可以检查 Gradle [http://www.gradle.org/](http://www.gradle.org/)。由于它基于 Groovy，您可以轻松地发送邮件、打包存档和调用 JasperReports。

来自 Gradle 网站：

> Gradle 是构建自动化的进化。Gradle 可以自动构建、测试、发布、部署和更多软件包或其他类型的项目，例如生成的静态网站、生成的文档或其他任何东西。
> 
> Gradle 将 Ant 的强大功能和灵活性与 Maven 的依赖管理和约定结合成一种更有效的构建方式。由 Groovy DSL 提供支持并充满创新，Gradle 提供了一种通过合理的默认值描述各种构建的声明性方式。Gradle 正迅速成为许多开源项目、领先企业和遗留自动化挑战的首选构建系统。

# wpf - 具有不同大小文本的蒙版文本框

> ID：11674069
> 
> 赞同：0
> 
> 时间：2012-07-26T16:44:40.133
> 
> 标签：wpf

好吧，我承认这是一个不寻常的案例！我需要一个蒙面的文本框，其中不同字符组的大小不同。文本必须可选择为单个块以用于复制/粘贴/删除目的。

我不确定如何在 WPF 中解决这个问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T16:56:54.113

您想从 更改`TextBox`为`RichTextBox`。在richtextbox 中，您可以控制部分文本的格式。

# c# - C#有异步函数调用同步函数或同步函数调用异步函数

> ID：11674073
> 
> 赞同：16
> 
> 时间：2012-07-26T16:44:49.723
> 
> 标签：c#, asynchronous, synchronous, .net-4.5, async-await

我正在编写一个 C# .Net 4.5 库来执行常见的 sql 数据库操作（备份、恢复、执行脚本等）。我希望每个操作都有同步和异步功能，因为这个库将被控制台和 GUI 应用程序使用，但我不想到处重复代码。所以在我看来，我有两个选择：

1.  编写在同步函数中完成工作的代码，然后将其包装在异步函数的任务中，如下所示：

    ```
    public void BackupDB(string server, string db)  
    {  
        // Do all of the work and long running operation here  
    }

    public async Task BackupDBAsync(string server, string db)  
    {  
        await Task.Factory.StartNew(() => BackupDB(server, db)).ConfigureAwait(false);  
    } 
    ```

2.  编写在异步函数中完成工作的代码，并使用 .Wait() 从同步函数中调用它：

    ```
    public async Task BackupDBAsync(string server, string db)  
    {  
        // Do all of the work and long running operation here, asynchronously.  
    }

    public void BackupDB(string server, string db)  
    {  
        BackupDBAsync(server, db).Wait(); // Execution will wait here until async function finishes completely.  
    } 
    ```

一种选择比另一种更好吗？一个是最佳实践吗？或者还有其他（更好的）选择吗？

我知道使用 .Wait() 的一个警告是，异步函数中的所有等待语句都必须使用 .ConfigureAwait(false) 以避免死锁（[如此处所述](https://stackoverflow.com/questions/9343594/how-to-call-asynchronous-method-from-synchronous-method-in-c)），但因为我正在编写一个永远不会需要访问 UI 或 WebContext 我可以安全地这样做。

我还要注意，SQL 库通常也有可以使用的同步和异步函数，所以如果在同步函数中工作，我会调用它们的同步函数，如果在异步函数中工作，我会调用他们的异步函数。

想法/建议表示赞赏。

-- 编辑：我也在[MSDN 论坛上](http://social.msdn.microsoft.com/Forums/en-US/async/thread/7bc69ba9-64b0-447e-b200-ca47c9fdce43)发布了这个问题，试图得到官方的 MS 回复 --

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-26T17:15:03.900

> 我希望每个操作都有同步和异步功能，因为这个库将被控制台和 GUI 应用程序使用，但我不想到处重复代码。

最好的答案是：不要。

Stephen Toub 有两篇关于这个主题的优秀博客文章：

*   [我应该为同步方法公开异步包装器吗？](http://blogs.msdn.com/b/pfxteam/archive/2012/03/24/10287244.aspx)
*   [我应该为异步方法公开同步包装器吗？](http://blogs.msdn.com/b/pfxteam/archive/2012/04/13/10293638.aspx)

他建议将异步方法公开为异步，将同步方法公开为同步。如果您需要同时公开两者，则将通用功能封装在私有（同步）方法中，并复制异步/同步差异。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T17:04:18.360

我有类似的情况，一些应用程序需要同步加载数据，而其他应用程序需要异步加载。我决定创建一个我称之为数据加载器的接口：

```
public interface IIMViewModelDL {
    void LoadProjects(AssignProjects callback);
} 
```

AssignProjects 回调只是一个简单的委托，它接收返回的项目列表：

```
public delegate void AssignProjects(IEnumerable<Project> results); 
```

现在，它的美妙之处在于您可以在不知道您是同步处理还是异步处理的情况下使用界面。

创建了三个类：一个基类、一个同步类和一个异步类：

```
 public abstract class BaseViewModelDL {
    protected IEnumerable<Project> LoadProjects() {
        BaseServiceClient client = new BaseServiceClient();
        return client.Projects();
    }

public class SynchronousViewModelDL : BaseViewModelDL, IIMViewModelDL {
    public void LoadProjects(AssignProjects callback) {
        callback(base.LoadProjects());
    }

public class AsyncIMViewModelDL : BaseViewModelDL, IIMViewModelDL {
    public void LoadProjects(AssignProjects callback) {
        BackgroundWorker loadProjectsAsync = new BackgroundWorker();
        loadProjectsAsync.DoWork += new DoWorkEventHandler(LoadProjectsAsync_DoWork);
        loadProjectsAsync.RunWorkerCompleted += new RunWorkerCompletedEventHandler(LoadProjectsAsync_RunWorkerCompleted);
        loadProjectsAsync.RunWorkerAsync(callback);
    }

void LoadProjectsAsync_DoWork(object sender, DoWorkEventArgs e) {
        var results = new ObservableCollection<Project>(base.LoadProjects());
        e.Result = new object[] { results, e.Argument };
    }

    void LoadProjectsAsync_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e) {
        AssignProjects callback = (AssignProjects)((object[])e.Result)[1];
        IEnumerable<Project> results = (IEnumerable<Project>)((object[])e.Result)[0];
        callback(results);
    } 
```

现在，在您的应用程序中，您可以决定如何加载数据......这可以通过 IoC 容器注入，但为了演示目的而进行了硬编码：

```
private ViewModelDataLoaders.IIMViewModelDL dataLoader = new ViewModelDataLoaders.AsyncIMViewModelDL(); 
```

现在，您的调用代码看起来相同，并且不知道它是异步还是同步：

```
private void LoadProjects() {
        dataLoader.LoadProjects(
            delegate(IEnumerable<Project> results) {
                Projects = new ObservableCollection<Project>(results);
            });
    } 
```

我经常将它用于单元测试（同步）、WPF 应用程序（异步）和控制台应用程序（同步）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T16:55:19.170

在不使用等待的情况下简单地将方法标记为异步似乎没有意义。将其标记为 async 并不会使其异步，它允许您在方法体中使用 awaits（在 await 中执行的代码是异步发生的，然后 async 方法的其余部分也将异步完成）：

通常，由 async 关键字修改的方法至少包含一个 await 表达式或语句。该方法同步运行，直到它到达第一个等待表达式，此时它被挂起，直到等待的任务完成。同时，控制权返回给方法的调用者。如果该方法不包含等待表达式或语句，则它会同步执行。编译器警告会提醒您注意任何不包含 await 的异步方法，因为这种情况可能表示错误。有关详细信息，请参阅编译器警告 CS4014。

来自：[异步](http://msdn.microsoft.com/en-us/library/hh156513%28v=vs.110%29.aspx)

# php - 如果用户选择了级联的某个选项，则删除带有文本输入的选择标签

> ID：11674077
> 
> 赞同：0
> 
> 时间：2012-07-26T16:45:05.620
> 
> 标签：php, mysql, options

我想让如果用户选择某个选项（从数据库提供）只有一个值，那么另一个选项标签似乎选择 else 对于所有其他选项用户有文本框来输入值。类似于下面的东西-

```
 <tr>
      <td><span class="alert">* </span>Country:</td>
      <td><select name="country_id" class="medforminput" id="country_id" onchange="getState('select_state.php?country_id='+this.value)">
     <option value="Select Country">Select Country</option>
      <?php
       while($row4=mysql_fetch_array($coun1))
        { ?>
        <option value="<?php echo $row4['country_id']; ?>">
<?php echo $row4['country_name']; ?></option>
    <?php }?>
    <option value="others">Others</option>
     </select></td>
    </tr>
    <tr>
    <td><span class="alert">* </span>State</td>
<?php
if($row4['country_name']=="INDIA")
{?>
    <td id="statediv"><select name="state_id" class="medforminput" id="state_id" onchange="getCity('select_city.php?state_id='+this.value)">
    <option value="">Choose State</option>
     </select></td>
<?php else {
<td id="statediv"><input type="text" name="state_id" class="medforminput" id="state_id"/>
</td>
<?php }?>
     </tr> 
```

我没有得到什么概念有什么问题？我想在用户选择“印度”其他文本框进入状态的地方显示选择标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T17:01:36.857

您需要在 javascript 中编写一个 onChange 事件处理程序来测试所选选项，然后在动态 div 中显示下拉列表或文本框。

我将使用 jQuery，因为它的代码少了很多。

例子：

```
<select name="country_id" class="medforminput" id="country_id" >
<!-- options go here -->
</select>

<script language="javascript">
    $("#country_id").change(function() {
        if ($(this).val() == 'India') { // put the country id here instead of string comparison
            $("#stateInput").html(getStates());
        } else {
            $("#stateInput").html("<input type='text' id='stateId' name='stateId' />");
        }
    });
</script> 
```

请原谅伪代码 - 我不想让它过长。

# jquery - jQuery UI 可拖动 connectToSortable 不服从可排序项目选项

> ID：11674082
> 
> 赞同：3
> 
> 时间：2012-07-26T16:45:19.587
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable, jquery-ui-draggable

我有一个连接到可排序的 jQuery UI 可拖动，并且可排序使用[项目选项](http://jqueryui.com/demos/sortable/#option-items)来限制可以排序的项目。我不确定这是正常行为还是错误，但我无法防止可拖动的项目在不可排序的项目之后被丢弃。

我设置了这个 JSfiddle 来演示这个问题：http: [//jsfiddle.net/agSwn/1/](http://jsfiddle.net/agSwn/1/)

不能将可拖动对象放在项目 1 或 2 之前，因为它们不可排序。但是，可以将可拖动项放在第 7 项之后。请注意，例如，如果将可拖动项放在第 3 项之后，则无法将该新项排序到第 7 项之后。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T20:27:38.133

如果真的不应该允许用户在 1 和 2 之前或 7 之后删除项目，那么这些项目可能属于不同的列表，因为它们将始终分别是第一个和最后一个项目。如果您希望外观保持不变，您只需调整 html 和 css。

```
<div id='lists'>
   <ul>
      <li class="ui-state-default">Item 1 (not sortable)</li>
      <li class="ui-state-default">Item 2 (not sortable)</li>
   </ul>
   <ul id="sortable">
      <li class="mixable ui-state-default">Item 3 (sortable)</li>
      <li class="mixable ui-state-default">Item 4 (sortable)</li>
   </ul>
   <ul>
      <li class="ui-state-default">Item 5 (not sortable)</li>
      <li class="ui-state-default">Item 6 (not sortable)</li>
      <li class="ui-state-default">Item 7 (not sortable)</li>
   </ul>
</div> 
```

在这里查看我的示例，它看起来就像你想要的功能：http: [//jsfiddle.net/dgmCp/1/](http://jsfiddle.net/dgmCp/1/)

# windows-8 - 如何从 Windows 8 Metro Bing 地图应用程序获取纬度和经度

> ID：11674087
> 
> 赞同：0
> 
> 时间：2012-07-26T16:45:45.190
> 
> 标签：windows-8, microsoft-metro, bing-maps, bing-api

如何从我在地图上点击/单击的位置获取纬度和经度？

我找到了使用 GeoCoordinate 类的示例，但它是来自 Win 7 mobile 的示例，并且该类在 Win 8 Metro 中不存在

我找到了 Geocoordinate 类，但它完全不同，而且我无法像示例中那样将我的地图转换为此类

我的 Win 7 样本看起来像这样

```
Point p = e.GetPosition(this.MapMain);
GeoCoordinate geo = new GeoCoordinate();
geo = MapMain.ViewportPointToLocation(p); 
```

至于现在我已经创建了新项目，添加了 bing 地图并设置了 Tapped 动作。但我不知道，也找不到任何地方如何根据点击获取坐标

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T14:25:57.477

尝试这个：

```
Point p = e.GetPosition(this.MainMap);
Location location = new Location();
MainMap.TryPixelToLocation(p, out location); 
```

位置变量将具有纬度和经度值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T14:20:07.520

首先，为点击事件添加一个事件监听器：

Microsoft.Maps.Events.addHandler(map, 'click', mapClick);

然后在事件处理程序中：

功能地图点击（e）{

```
if (e.targetType == "map") {

    //Get x and y

    var point = new Microsoft.Maps.Point(e.getX(), e.getY());

    //Convert map point to location

    var location = e.target.tryPixelToLocation(point);

    console.log(location.longitude);

    console.log(location.latitude);
} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T00:56:21.833

```
// --------- HTML/JS --------------
var mapCenter = map.getCenter();
var pos = map.tryPixelToLocation(new Microsoft.Maps.Point(location.clientX, location.clientY), Microsoft.Maps.PixelReference.control);

// --------- C# -------------------
Geolocator geolocator = new Geolocator();
var pos = await geolocator.GetGeopositionAsync();
Location location = new Location(pos.Coordinate.Latitude, pos.Coordinate.Longitude); 
```

# symfony1 - Symfony - Propel - 确定当前版本的 propel

> ID：11674093
> 
> 赞同：0
> 
> 时间：2012-07-26T16:46:06.557
> 
> 标签：symfony1, propel

有没有更好的方法来确定 Symfony 1.4 是基于哪个版本的 Propel 构建的？现在我必须做：

```
$ -> ack -i version /path/to/symfony/lib/plugins/sfPropelPlugin/lib/vendor/ 
```

到目前为止，我看到了这个：

```
/path/to/symfony/lib/plugins/sfPropelPlugin/lib/vendor/propel-generator/default.properties
19:propel.version = 1.4.2 
```

所以我假设 Symfony v1.4.16 使用的是 Propel 版本 1.4.2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T16:50:42.807

目前，与 Symfony 1.x 捆绑的推进不支持通过 cli 干净地确定版本的能力，但是您可以使用`ack`or`fgrep`命令，如我在 OP 中所述。但是如果你使用`sfPropelORMPlugin`插件，它允许你在 Symfony 1.x 中使用 propel 1.6，他们会选择添加这个功能，我认为它很快就会可用。[https://github.com/propelorm/sfPropelORMPlugin/pull/152](https://github.com/propelorm/sfPropelORMPlugin/pull/152)

# visual-studio-2010 - 带有 MSTest 测试的 Visual Studio 测试项目报告“该项目不包含任何测试”——尽管它包含

> ID：11674094
> 
> 赞同：0
> 
> 时间：2012-07-26T16:46:07.597
> 
> 标签：visual-studio-2010, mstest

我有一个包含多个项目的 Visual Studio 2010 解决方案，包括 .NET4 测试项目。一个这样的项目，当我尝试在不调试的情况下运行它（Ctrl+F5）时，报告：

“无法启动测试项目 MyTestProject，因为该项目不包含任何测试。”

但是，该项目有几个测试。每个测试类都标有 [TestClass] 属性，其中的每个测试方法都标有 [TestMethod] 属性。只是为了证明我自己的理智，我添加了这个文件，但它仍然无法识别有测试。

```
using Microsoft.VisualStudio.TestTools.UnitTesting;
namespace Foo {
    [TestClass]
    public class UnitTest1 {
        [TestMethod]
        public void TestMethod1() {
        }
    }
} 
```

该项目已正确设置为测试 C# 项目。有问题的测试也无法显示在测试列表编辑器的“测试不在列表中”部分。（我从 VB 翻译了大部分测试。）

为什么 Visual Studio 不能识别测试？我该如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T17:27:29.913

原来这些测试是从 VB 翻译成 C# 的；当我翻译它们时，我忘记在它们上添加显式命名空间。因此，全局命名空间中有两个同名的测试类，这导致一个有效地替换了另一个。我只是希望给出的警告不那么神秘！

# ruby - Ruby 脚本上的 RVM

> ID：11674100
> 
> 赞同：2
> 
> 时间：2012-07-26T16:47:00.433
> 
> 标签：ruby, scripting, rvm

我需要使用 rvm 选择的版本运行 Ruby 脚本。我无法更改脚本的调用方式，但我可以修改脚本。脚本开始于：

```
#!/usr/bin/env ruby 
```

现在，根据我找到的一些信息（例如在[这个问题](https://stackoverflow.com/questions/8048050/rvm-running-user-scripts)中），我尝试了这个：

```
#!/usr/bin/env rvm-shell ree-1.8.7-2012.02@gitorious 
```

但这只会给我这个错误信息：

```
/usr/bin/env: rvm-shell ree-1.8.7-2012.02@gitorious: No such file or directory 
```

现在，`rvm`可用，因为这有效（但没有带来所需的 ruby​​/gemset）：

```
#!/usr/bin/env rvm-shell 
```

我也试过这个：

```
#!/usr/local/rvm/bin/rvm-shell ree-1.8.7-2012.02@gitorious 
```

但这并没有引入环境（例如，仅安装在该 gemset 内的“gem”不可用）。如果我在命令行本身上运行它，它会打开一个具有适当环境的 shell。

那么，有没有人做过这样的事情呢？我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T21:04:03.177

这行得通吗？

`#!/location/of/rvm/folder/rubies/ree-1.8.7-2012.02@gitorious/bin/ruby`

# ruby-on-rails - 从其他模型更改数据

> ID：11674101
> 
> 赞同：0
> 
> 时间：2012-07-26T16:47:04.373
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我想知道我应该接受什么样的查询才能更新我的数据。我的模型由客户、兴趣和经理组成

```
Clients his has follow
id
name
email
password

Interest
id
description

manager
customer_id
interest_id
created_at 
```

经理的目标不是覆盖感兴趣的旧数据，而只是不断添加新的兴趣并引用它。

```
The relationship his has follow
class Client < ActiveRecord::Base
  has_many :music_interest_managers
  has_many :music_interests, through => :music_interest_managers
end
class MusicInterest < ActiveRecord::Base
  has_many :music_interest_managers
  has_many :clients, through => :music_interest_managers
end
class MusicInterestManager < ActiveRecord::Base
  belongs_to :music_interests
  belongs_to :client
end 
```

现在要更新来自客户控制器的数据，我不确定我会怎么做这就是我正在考虑的：

```
@client = Client.find(params[:id])
@manager = @client.manager.build(params[:manager])
@interest = @interest.manager.build(params[:interest]) 
```

这有意义吗？还是我错了？

更新：

```
def update
    @client = Client.find(params[:id])
    @interest = @client.music_interests.build(params[:interest])

    if @client.update_attributes(params[:client])
        flash[:success] = "Profile updated"
        #sign_in @client
        redirect_to @client
    else
        render 'edit'
    end
end 
```

或者我应该根据兴趣渲染模型视图然后应用更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T17:25:26.167

```
@client = Client.find(params[:id])
@interest = @client.music_interests.build(params[:interest]) 
```

应该可以 - 在控制台中尝试一下！

# jquery - jquery - 将函数的执行推迟到其他事件发生之后

> ID：11674102
> 
> 赞同：1
> 
> 时间：2012-07-26T16:47:05.500
> 
> 标签：jquery, jquery-deferred

我有几个获取一些数据的 ajax 请求：

```
$.ajax({
    url: '/bin/MVC/Reporting/GetReportTemplates',
    type: "GET",
    success: function (data) {
        reportingMetaData.ReportTemplates = data.Data;
    }
});

$.ajax({
    url: '/bin/MVC/Reporting/GetReportTopTypes',
    type: "GET",
    success: function (data) {
        reportingMetaData.ReportTopTypes = data.Data;
    }
} 
```

在这两个都返回之后，我想运行另一个函数。

我知道 jquery deferred，但我从未使用过它，并且不确定如何在这种情况下应用它。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T16:49:35.410

```
var a1 = $.ajax({
    url: '/bin/MVC/Reporting/GetReportTemplates',
    type: "GET"
});
var a2 = $.ajax({
    url: '/bin/MVC/Reporting/GetReportTopTypes',
    type: "GET"
});
$.when(a1, a2).then(function() {
    //Both ajax requests have completed successfully
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T16:49:48.487

你需要`$.when()`.

```
var req_1 = $.ajax({...});
var req_2 = $.ajax({...});
$.when(req_1, req_2).done(function(response_1, response_2) {
    //do something here when both requests done
}); 
```

还值得指出的是，`$.when()`可以将延迟或非延迟对象作为参数。这意味着它可以在请求可能是同步或异步的情况下起作用。如果你碰巧在英国，我即将在 .NET 杂志上发表的一篇文章更详细地介绍了这一点。

# c++ - Flex++ Bisonc++ 解析器

> ID：11674104
> 
> 赞同：7
> 
> 时间：2012-07-26T16:47:10.717
> 
> 标签：c++, parsing, bison, flex-lexer

我正在尝试在我的项目中使用`flex`and`bison`为文件结构生成解析器代码。主要编程语言为 C++，项目采用 OO 设计，主要并行运行。

我听说生成`flex`的`bison`解析器是 C 代码，它们不能重入。谷歌搜索，我发现`flex++`和`bisonc++`。不幸的是，没有简单的教程可以开始。大多数示例都基于`bison/flex`. 有些人以某种方式将`bison/flex`解析器集成到他们的 C++ 代码中。他们应该是“棘手的”......

`flex++`和的文档对`bisonc++`我没有帮助。教程和示例，它们都从标准输入获取输入并在标准输出上打印一些消息。

我的解析器需要这些功能：

1.  Parser 应该是一个 C++ 类，以正常方式定义（一个头文件和一个 cpp 文件）
2.  Parser 从`std::string`or`std::stringstream`或 null-terminated接收数据`char*`。

我感到很困惑。我应该使用`flex++/bisonc++`or`flex/bison`吗？以及如何做到这一点，满足上述条件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T17:58:37.503

有 flex/bison、flex++/bison++ 和 flexc++/bisonc++。我认为最好选择这三对中的一对，而不是混合/匹配 flex++ 和 bisonc++。以下是[Flexc++](http://flexcpp.sourceforge.net/flexc++.html)和[Bisonc++](http://bisoncpp.sourceforge.net/bisonc++.html)的用户指南。

来自 Flexc++ 网站：

> 与 flex 和 flex++ 不同，Flexc++ 生成明确供 C++ 程序使用的代码。著名的 flex(1) 程序生成 C 源代码，而 flex++(1) 仅围绕由 flex(1) 生成的 yylex 函数提供了一个类似 C++ 的外壳，几乎不支持当前有关 C++ 软件开发的想法。与此相反，flexc++ 创建了一个 C++ 类，它提供了一个预定义的成员函数 lex，将输入与正则表达式匹配，并且一旦匹配正则表达式就可能执行 C++ 代码。flexc++ 生成的代码是纯 C++，允许其用户应用该语言提供的所有功能。

来自 Bisonc++ 网站：

> Bisonc++ 是一个通用解析器生成器，它将 LALR(1) 上下文无关文法的文法描述转换为 C++ 类以解析该文法。一旦您精通 bisonc++，您就可以使用它来开发范围广泛的语言解析器，从用于简单桌面计算器的解析器到复杂的编程语言。Bisonc++ 与 Alain Coetmeur 编写的程序 bison++ 具有高度可比性：所有正确编写的 bison++ 语法都应该在很少或没有变化后都可以转换为 bisonc++ 语法。任何熟悉 bison++ 或其前身 bison 的人都应该能够轻松使用 bisonc++。您需要熟练使用 C++ 编程才能使用 bisonc++ 或理解本手册。

所以 flexc++/bisonc++ 不仅仅是旧的 flex/bison 实用程序的包装器。它们生成完整的 C++ 类，用于重入扫描/解析。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T17:40:34.597

Flex 可以生成一个可重入的 C 扫描器。请参阅Flex 手册中的第[19 节可重入 C 扫描仪。](http://westes.github.io/flex/manual/Reentrant.html)

类似地，Bison 可以生成一个可重入的 C 解析器。有关详细信息，请参阅 Bison 手册中的第[3.8.11 节 A Pure (Reentrant) Parser](http://www.gnu.org/software/bison/manual/bison.html#Pure-Decl)。

你绝对需要一个 C++ 解析器和基于 std::string/stringstream 的解析器数据吗？

您是否将[Boost.Spirit](http://boost-spirit.com/)视为替代方案？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-21T19:35:42.943

LRSTAR[产品](http://lrstar.tech)（LR(k) 解析器和 DFA 词法分析器生成器）基于 C++。在 Widowns 上运行并有六个 Visual Studio 项目。该代码还可以使用“gcc”和其他编译器进行编译。有用于词法分析器和解析器、符号表、AST 的类。完整的源代码可用。它得到了很好的评价。我应该知道。我是作者。

# visual-studio-2012 - Visual Studio 2012 RC Diff 实用程序是否仅比较？

> ID：11674109
> 
> 赞同：11
> 
> 时间：2012-07-26T16:47:53.963
> 
> 标签：visual-studio-2012

我发誓，在早期版本的预览/测试版/任何版本中，我不仅能够查看两个文件之间的差异，还能够合并/更新。现在我正在查看一个差异窗口，据我所知，没有办法从左到右或从右到左移动线条。

![差异用户界面的屏幕截图](../Images/58b25a3f952d2a6b32bdc120b74435fa.png)

该窗口底部有一个“帮助”链接，可通往此[页面](http://msdn.microsoft.com/en-us/library/tfs/bb385990%28v=vs.110%29.aspx)，遗憾的是该页面没有涵盖任何类型的合并。目前我能做到的唯一方法是手动复制和粘贴，或者将左侧的文本键入右侧的窗格中。

Microsoft 是否删除了选择“仅比较”差异实用程序的这些功能？

这些工具在我不在的地方可用吗？

我的安装是否可能已损坏？任何人都可以确认他们不仅可以比较，还可以使用 RC 进行更新。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T19:31:29.603

比较工具（我相信）没有任何合并选项。但是，如果您在源代码管理资源管理器中右键单击文件并转到分支和合并 > 合并，您可以在任意两个文件之间执行毫无根据的合并（您必须浏览文件），并在合并工具中解决冲突。希望有帮助。

# azure - 为什么多次调用 TableServiceContext.SaveChanges 会导致性能下降

> ID：11674110
> 
> 赞同：0
> 
> 时间：2012-07-26T16:47:54.477
> 
> 标签：azure, azure-storage, azure-table-storage

今天早上我正在编写一个快速客户端，只是将一堆数据插入到表存储中，当我注意到后续保存后，性能会下降。

```
public class MyObject : TableServiceEntity
{
    public MyObject()
    {
        this.RowKey = Guid.NewGuid().ToString();
    }

    public string SomeProperty { get; set; }
} 
```

然后我有一个简单的代码块来添加一些数据......

```
Stopwatch timer = new Stopwatch();
            for (int i = 0; i < target / 50; i++)
            {
                CloudTableClient client = account.CreateCloudTableClient();
                client.CreateTableIfNotExist(entitySet);
                TableServiceContext context = client.GetDataServiceContext();

                timer.Reset();
                timer.Start();
                for (int x = 0; x < i * 50; x++)
                {
                    var obj = new MyObject();

                    context.AddObject(entitySet, obj);
                    context.SaveChanges();
                }
                total += 100;
                timer.Stop();

                Console.WriteLine("Added 100 entities in {0} seconds; total: {1}", timer.Elapsed.Seconds, total);
            } 
```

这是我在运行时看到的（控制台应用程序）

```
Added 100 entities in 0 seconds; total: 100

Added 100 entities in 0 seconds; total: 200

Added 100 entities in 1 seconds; total: 300

Added 100 entities in 2 seconds; total: 400

Added 100 entities in 4 seconds; total: 500

Added 100 entities in 4 seconds; total: 600

Added 100 entities in 6 seconds; total: 700

Added 100 entities in 6 seconds; total: 800 
```

**为什么性能会下降？**

*   **如果我将上下文、客户端和/或帐户**移出循环，它不会改变
*   实施**context.ResolveType**没有解决问题
*   分析之后，context.SaveChanges 方法是瓶颈所在
*   重新运行应用程序会重现相同的结果；即使数据库中有成百上千的其他实体。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T18:30:22.507

我相信您的测试代码在这一行中有一个错误。

```
for (int x = 0; x < i * 50; x++) 
```

您正在迭代`i * 50`多次，因此每次通过外循环时，您将比上一次多添加 50 个实体。第一次通过添加 0 个实体，确实非常快。然后是 50，然后是 100，然后是 150，等等。这被掩盖了，因为您的日志记录代码每次都会盲目地将 100 添加到计数中，即使这不是您实际添加的数字。你可能想要的是：

```
for (int x = 0; x < 100; x++) 
```

关于分析结果，大部分代码都适用于内存数据。`SaveChanges()`进行网络调用，这就是为什么它支配所花费的时间。

我意识到这是测试代码。但是，如果您实际上尝试将大量实体添加到单个 PartitionKey 中，则建议使用批处理。

# javascript - 链调用和应用在一起是什么意思？

> ID：11674115
> 
> 赞同：8
> 
> 时间：2012-07-26T16:48:02.173
> 
> 标签：javascript, function, call, apply

我在 jsGarden 中遇到了这段代码，我无法理解链接`call`和`apply`在一起的含义。两者都将使用给定的上下文对象执行函数，为什么它可以被链接？

```
function Foo() {}

Foo.prototype.method = function(a, b, c) {
    console.log(this, a, b, c);
};

// Create an unbound version of "method" 
// It takes the parameters: this, arg1, arg2...argN
Foo.method = function() {

    // Result: Foo.prototype.method.call(this, arg1, arg2... argN)
    Function.call.apply(Foo.prototype.method, arguments);
}; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-26T16:50:26.820

它正在调用`call`via `apply`; 也就是说，它`call`用于调用函数（“方法”），并且`apply`用于进行调用，因为它以（几乎）数组的形式获取参数。

所以把它拆开：

```
Function.call 
```

这是`call()`对所有 Function 实例上可用的函数的引用，继承自 Function 原型。

```
Function.call.apply 
```

`call`这是通过对函数的引用对`apply`. 因为`apply`是通过`call`对象引用的，所以在调用时，`apply`值`this`将是对`call`函数的引用。

```
Function.call.apply(Foo.prototype.method, arguments); 
```

因此，我们`call`通过 调用函数，并将其作为值`apply`传递给“Foo.mmethod”作为参数。`Foo.prototype.method``this`

我*觉得*和这个效果基本一样：

```
Foo.method = function() {
  var obj = arguments[0], args = [].slice.call(arguments, 1);
  Foo.prototype.method.apply(obj, args);
} 
```

但我得试一试才能确定。*编辑*是的，似乎就是这样。因此，我可以将该技巧的要点总结为一种`apply()`在所需`this`值是包含参数的数组的第一个元素时调用的方法。换句话说，通常当您调用时，`apply()`您已经获得了所需的`this`对象引用，并且您已经获得了参数（在数组中）。但是，这里的想法是您将所需`this`的参数作为参数传递，因此需要将其分离出来以便进行调用`apply`。就我个人而言，我会像在我的“翻译”中那样做，因为它（对我而言）不那么令人费解，但我想人们可以习惯它。根据我的经验，这种情况并不常见。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-02T12:29:14.323

我认为代码应该是这样的：

```
function Foo() {}

Foo.prototype.method = function(a, b, c) {
 console.log(this, a, b, c);
};

Foo.method = function() {

 //Notice this line:
 Function.apply.call(Foo.prototype.method, this, arguments);
}; 
```

然后

```
Foo.method(1,2,3) => function Foo() {} 1 2 3 
```

其他示例：

```
Function.apply.call(Array,this,[1,2]) => [1, 2]
Function.call.apply(Array,this,[1,2]) => [window]
Function.call.call(Array,this,[1,2])  => [[1, 2]] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T16:53:14.503

[`apply`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/apply)确实将数组作为第二个参数，[`call`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/call)采用单个参数。

```
 // lets take call,
 var callfn = Function.prototype.call;
 // an ordinary function from elsewhere
 var method = Foo.prototype.method;
 // and apply the arguments object on it:
 callfn.apply(method, arguments); 
```

因此，第一`arguments`项将是 的`this`值，`method`随后将填充单个参数。

结果是构造函数`method`上的一个静态函数`Foo`，它将一个`Foo`实例（或类似的东西）作为第一个参数并将原型`method`应用于它。一个可能的用例是定义一个`Object.hasOwnProperty`函数，该函数通常仅作为`Object.prototype.hasOwnProperty`.

`method`最终，如果您需要将它应用于 a) 不继承它或 b) 覆盖它的对象，它会使一个“原型”和一个“调用”的调用更短。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-03-03T02:14:13.117

```
Person.prototype.fullname = function(joiner, options) {
  options = options || { order: "western" };
  var first = options.order === "western" ? this.first : this.last;
  var last =  options.order === "western" ? this.last  : this.first;
  return first + (joiner || " ") + last;
};

// Create an unbound version of "fullname", usable on any object with 'first'
// and 'last' properties passed as the first argument. This wrapper will
// not need to change if fullname changes in number or order of arguments.
Person.fullname = function() {
  // Result: Person.prototype.fullname.call(this, joiner, ..., argN);
  return Function.call.apply(Person.prototype.fullname, arguments);
}; 
```

来自 Javascript Garden 的代码。

请注意，它声明了

```
Function.call.apply(Person.prototype.fullname, arguments);
```

会变成这样：

```
Person.prototype.fullname.call(this, joiner, ..., argN);
```

这意味着首先执行**apply()**函数，然后执行**call()**函数。

模式：最**右边** `call() / apply()`的将首先被执行

1.  所以**最正确的** `apply()`将首先被执行
2.  的上下文`apply()`成为`call()`函数的调用者，所以现在

    ```
    Person.prototype,fullname.call()
    ```

3.  `apply()`只能接受一个参数数组，所以`apply()`提供`arguments`给`call()`函数，所以现在

    ```
    Person.prototype,fullname.call(参数)
    ```

来自@foxiris 的示例

第一个：

```
Function.apply.call(Array,this,[1,2])
```

1.  最**正确** `call()`的将首先被执行
2.  的上下文`call()`成为 的调用者`apply()`，所以现在`Array.apply()`
3.  `call()`可以接受多个参数，所以它可以提供和`this`to `[1, 2]`，`apply()`所以 now `Array.apply(this, [1, 2]);`，它将输出`[1, 2]`

第二个：

```
Function.call.apply(Array,this,[1,2])
```

1.  最**正确** `apply()`的将首先被执行
2.  的上下文`apply()`成为 的调用者`call()`，所以现在`Array.call()`
3.  `apply()`只能接受一个数组参数，所以它只能提供给`this`，`call()`所以现在`Array.call(this);`，输出是`[]`。

第三个：

```
Function.call.call(Array,this,[1,2])
```

1.  最**正确** `call()`的将首先被执行
2.  （最右边的）的上下文`call()`变成了（右边第二个）的调用者`call()`，所以现在`Array.call()`
3.  可以接受多个参数，`call()`所以它可以提供`this`和`[1, 2]`给另一个`call()`，所以现在`Array.call(this, [1, 2]);`，输出是`[[1, 2]]`。

# c# - WCF REST 帮助页面与 UriTemplate 冲突

> ID：11674124
> 
> 赞同：0
> 
> 时间：2012-07-26T16:48:26.700
> 
> 标签：c#, wcf, rest

我有一个根 UriTemplate，它在未指定参数时返回默认数据。

```
[WebGet(UriTemplate = "")] 
```

我已经看到在几个例子中使用了这种方法。

但是，我添加了另一个接受简单路径变量的模板：

```
[WebGet(UriTemplate = "{code}")] 
```

然后它将通过代码过滤默认列表。

因此，例如*http://localhost/items*（作为基本 ServiceRoute）显示默认的项目列表，而*http://localhost/items/ABC*显示项目“ABC”。

问题是现在*http://localhost/items/help*现在显示 404 错误而不是自动生成的帮助页面，因为它将 'help' 视为 'code' 参数的值（并且操作返回一个“没有记录匹配时的“未找到”状态）。

关于如何保留 UriTemplate 但不丢失帮助页面的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T17:10:16.997

尝试添加您的 .svc 地址。

所以不要这样做：

```
http://localhost/items/help 
```

做喜欢

```
http://localhost/items.svc/help 
```

它在此处的评论中： [MSDN Rest Help](http://msdn.microsoft.com/en-us/library/ee230442.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T23:10:04.637

帮助页面停止工作的原因是`helpEnabled`定义为`standardEndpoint`under的属性`webHttpEndpoint`以某种方式替换为 wcf 'soap' 元数据启用配置。

因此，在 REST .Net 4.0 中启用帮助页面的正确 web.config 部分是，有据可查：

```
<system.serviceModel>
 <standardEndpoints>
  <webHttpEndpoint>
    <standardEndpoint name="" helpEnabled="true" automaticFormatSelectionEnabled="true"/>
  </webHttpEndpoint>
</standardEndpoints> 
```

尽管我从 Microsoft/Tony Sneed 模板开始创建 REST 项目，并正确配置了它，但我认为发生的事情是我还向 Web 应用程序添加了一个 OData 服务。不管这是否是原因，上面的配置都被替换为：

```
<behaviors>
  <serviceBehaviors>
    <behavior>
      <serviceMetadata httpGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="true" />
    </behavior>
  </serviceBehaviors>
</behaviors> 
```

现在，如果您盯着足够长的时间并在凌晨 1 点 google 'help page wcf rest'，这当然是为 wcf 'soap-style' 服务启用 wsdl 'help' 的方式，因此您会看到匹配的语法并认为 help 是为 REST 正确启用，因此您将问题归咎于 UriTemplates。

# java - 为什么在jsp中上传文件后无法从请求中访问参数？

> ID：11674126
> 
> 赞同：2
> 
> 时间：2012-07-26T16:48:41.387
> 
> 标签：java, jsp, servlets, email-attachments

我正在使用 jsp 和 servlet 来执行此操作。

我有一个联系表格，可以发送包含一些数据（姓名、主题、问题、联系电子邮件等）和文件的电子邮件。

当我提交表单并获得 servlet 响应时，只返回第一件事。

```
String file= fileUpload(request); //upload the client's file and return the absolute      path of the file in the server
//testing the rest of parameters
 out.println("REQUEST LIST"
              "\n"   request.getParameter("name")
              "\n"   request.getParameter("mail")
              "\n"   request.getParameter("subject")
              "\n"   request.getParameter("ask")
              "\n"); 
```

按此顺序，文件已成功上传，但其他参数（名称、邮件等）为空。

* * *

在下面的顺序中，参数是好的，它们正确地返回了数据。但是文件没有上传。

```
//testing the rest of parameters
out.println("REQUEST LIST"
              "\n"   request.getParameter("name")
              "\n"   request.getParameter("mail")
              "\n"   request.getParameter("subject")
              "\n"   request.getParameter("ask")
              "\n");
String file= fileUpload(request); //upload the client's file and return the absolute      path of the file in the server 
```

* * *

我怎么能两者兼得？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T16:53:22.700

**您应该使用与提取上传文件相同**的API（例如 Apache Commons FileUpload）提取请求参数。这通常与调用不可互换，`getParameter()`因为请求正文只能解析一次（最终用户不会发送两次相同的请求，一次由文件上传解析 API 解析，另一次由 解析`getParameter()`）。

### 也可以看看：

*   [如何使用 JSP/Servlet 将文件上传到服务器？](https://stackoverflow.com/questions/2422468/how-to-upload-files-on-server-using-jsp-servlet/2424824#2424824)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T17:16:15.557

看看下面的代码是否对你有帮助。这只是一个例子。你可能需要调整它

创建一个名为`FileUploader`返回`ServletFileUpload`对象的类

```
public class FileUploader 
{
private static ServletFileUpload uploader;

private FileUploader()
{

}

public static synchronized ServletFileUpload getservletFileUploader(String tempDir, int maxSizeInMB) 
{
    if(uploader == null)
    {
        DiskFileItemFactory factory = new DiskFileItemFactory();

        factory.setSizeThreshold(1024 * 1024);
        factory.setRepository(new File(tempDir));

        uploader = new ServletFileUpload(factory);

        uploader.setFileSizeMax(maxSizeInMB * 1024 * 1024);
    }

    return uploader;
}
} 
```

现在您可以处理请求并读取所有数据

```
 protected MultiPartFormData handleMultiPartRequest(HttpServletRequest request)
throws FileSizeLimitExceededException
{
    if(!isMultipartRequest(request))
        return null;

    ServletFileUpload upload = FileUploader.getservletFileUploader(tempDir, 50);
    MultiPartFormData data = new MultiPartFormData();
    try
    {
        List<FileItem> items = upload.parseRequest(request);

        for (FileItem item : items) 
        {
            if(item.isFormField())
            {
                data.getParameters().put(item.getFieldName(), item.getString());
            }
            else
            {
                String filename = item.getName();

                //Internet explorer and firefox will send the file name differently
                //Internet explorer will send the entire path to the file name including 
                //the backslash characters etc ... we should strip it down
                //THIS IS HACKY
                if(filename.indexOf("\\") != -1)
                {
                    int index = filename.lastIndexOf("\\");
                    filename = filename.substring(index + 1);
                }

                if(filename == null || filename.equals(""))
                {
                    //do nothing 
                }
                else
                {
                    File uploadFile = new File(uploadDir + File.separator + randomFileName);
                    item.write(uploadFile);

                                            data.addFile(item.getFieldname(), item.getString());
                }
            }
        }
    }
    catch(FileSizeLimitExceededException e)
    {
        throw e;
    }
    catch(Exception e)
    {
        e.printStackTrace();

    }

    return data;
} 
```

解析请求后，我将其存储在一个名为 MultipartFormData 的对象中，该对象可用于获取请求参数

```
public class MultiPartFormData {

private Hashtable<String, String> parameters;
    private Hashtable<String, String> uploadedFiles;

public MultiPartFormData()
{
    this.parameters = new Hashtable<String, String>();
    this.uploadedFiles = new Hashtable<String, String>();
}

public Hashtable<String, String> getParameters() {
    return parameters;
}
public void setParameters(Hashtable<String, String> parameters) {
    this.parameters = parameters;
}
    public void getParameter(String paramName) {
          if(this.parameters.contains(paramName))
                 return tyhis.parameters.get(paramName);
          return null;
    }
    public void addFile(String key, String filename) {
        uploadedFile.put(key, filename);
    }
    public void getFilename(String key) {
        uploadedFile.get(key);
    }
} 
```

# c++ - 如何重载加号以汇总未确定数量的对象

> ID：11674129
> 
> 赞同：0
> 
> 时间：2012-07-26T16:49:00.617
> 
> 标签：c++

```
#include <cmath>
#include <iostream>
#include <cstdlib>
using namespace std;

class myClass {
    int d;

public:

    myClass(){};

    int get_rand() const {
        return rand() % 10;
    }
};

int operator +(myClass d, myClass e) {
    return d.get_rand() + e.get_rand();
}

int main() {
    myClass mC;
    int sum = mC + mC;
    cout << sum;

} 
```

我希望能够拥有尽可能多的 Mc，例如。`int sum = mC + mC + mC + mC;`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T16:52:56.597

您可以更改您的`class`with 运算符重载。

```
class myClass {
    int d;

public:

    myClass(){ d = get_rand(); };

    int get_rand() const {
        return rand() % 10;
    }

    myClass operator + (myClass b) const { b.d += d; return b; }
    operator int () const { return d; }
}; 
```

然后你就不再需要外部`operator+`了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T16:50:43.653

为此，您需要一个重载运算符，即`int operator+(int, myClass)`：

```
int operator +(int d, myClass e) {
    return d + e.get_rand();
} 
```

`+`操作是从左到右评估的，所以类型`mC + mC`是`int`. 这就是为什么你需要另一个 operator `int operator +(int, myClass)`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T16:52:16.517

再提供两个`operator+`.

```
int operator +(int d, myClass e) {
    return d + e.get_rand();
}

int operator +(myClass d, int e) {
  return d.get_rand() + e;
} 
```

或者，您可以提供与成员的转换`myClass`，`int`尽管`operator int()`我更喜欢第一个选项。

我可能不需要提到运算符重载应该始终非常小心。

# javascript - Ajax / Firebase 仅适用于本地主机（同源策略？）

> ID：11674131
> 
> 赞同：0
> 
> 时间：2012-07-26T16:49:06.483
> 
> 标签：javascript, ajax, same-origin-policy, firebase

我有一个 Firebase 应用程序可以在 localhost 上完美运行，但是当我从外部访问它时（通过允许在我的路由器中进行端口转发）或当我将它上传到 Bluehost 时它不起作用。

此代码有效：

```
$(document).ready(function() {
    $("#button").click(function() {
        alert('Working!');
    });
}); 
```

但这不会：

```
var firebaseRef = new Firebase('[my firebase url]');

$(document).ready(function() {
    $("#button").click(function() {
        alert('Working!');
    });
}); 
```

经过一些研究，我认为问题出在[Same Origin Policy](https://developer.mozilla.org/en/Same_origin_policy_for_JavaScript)，因为 Firebase JS 包含的是

```
http://static.firebase.com/demo/firebase.js 
```

但我的 Firebase 参考已开启

```
http://gamma.firebase.com/ 
```

我找到了一些解决此问题的方法，但想知道使用 Firebase 处理它的最佳方法（或者如果同源策略甚至是这里的问题）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T17:15:34.280

我找到了答案——这只是我的一个愚蠢的错误。

在搜索 Firebase 教程时，我发现了我的错误。我正在包含该`http://static.firebase.com/demo/firebase.js`文件，而教程明确表示要包含该`http://static.firebase.com/v0/firebase.js`文件。

我仍然很好奇为什么该`demo`文件只在本地主机上工作......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T17:04:42.100

Firebase 将 CORS 用于 RESTful API，将 WebSockets 用于 JS 客户端，[请参阅此答案](https://stackoverflow.com/questions/10710635/how-does-firebase-handle-cross-origin-issues)，因此这不是问题。

看起来是与路由有关的问题。您是否在 JavaScript 控制台中遇到错误？“不起作用”有点抽象，更精确的错误可以帮助回答第二个问题。

# network-programming - 以编程方式检查 cisco 网络设备规则

> ID：11674135
> 
> 赞同：-1
> 
> 时间：2012-07-26T16:49:13.003
> 
> 标签：network-programming, firewall, snmp, cisco, cisco-ios

我希望能够（按设备）显示网络上两个设备/端口之间给定协议的打开/阻止状态。换句话说，我需要输出服务器 A 和服务器 B 之间的网络设备（防火墙和交换机）列表，并指示是否应该（根据每个设备的规则）允许或阻止请求。

我从思科网络设备开始，这些设备由思科的安全管理器 (CSM) 应用程序（4.2 版）集中管理。我是网络管理自动化编程的新手，我想确保我不会忽略一个明显的最佳方法来处理这个问题。

到目前为止，看起来我需要定期从 CSM 导出和 ETL 设备规则（我相信他们有一个我可以调用的 perl 脚本）并进入一个单独的数据库，然后编写一些自定义 SQL 代码来确定哪个两个主机/端口之间的路由上的设备将允许或阻止给定协议的流量？

我在正确的轨道上，还是有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T11:35:51.513

如果我理解您的问题，我认为您可以在 Cisco 设备中运行 TCL 脚本，收集必要的信息并将其传输到中央服务器，在那里将其导入数据库，然后关联该信息。

希望对您的工作有所帮助。

# html - 停止在 Outlook 中的正文标记上平铺

> ID：11674140
> 
> 赞同：0
> 
> 时间：2012-07-26T16:49:37.117
> 
> 标签：html, css, outlook, html-email

我在电子邮件的正文标签上使用背景图像，但是当我在 Outlook 中对其进行测试时，它平铺了 x 和 y。

有没有办法阻止这种情况发生？

```
<body style="background-repeat:no-repeat" bgColor=#ffffff      
      background="http://www.bla.com/bla/twc/email-bg.jpg"> 
```

我也试过：

*   `background-repeat:no-repeat no-repeat;`
*   指定宽度和高度

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T19:10:35.340

并非所有邮件客户端都支持 CSS 背景。我建议根本不要使用此功能。

请参阅： http: [//newcampaignmon.cachefly.net/assets/files/css/campaign-monitor-guide-to-css-in-email-sept-2011.pdf](http://newcampaignmon.cachefly.net/assets/files/css/campaign-monitor-guide-to-css-in-email-sept-2011.pdf)

# android - Android 不接受阿拉伯语 xml 并崩溃

> ID：11674141
> 
> 赞同：1
> 
> 时间：2012-07-26T16:49:39.037
> 
> 标签：android, xml, parsing, arabic

我刚开始使用android。问题是当我使用英语时，XML 解析器不处理阿拉伯语，它工作得很好。如您所见，我在 XML 文件中有 utf-8 编码，如果我处理阿拉伯语，应用程序将崩溃。我的 xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?><menu><soura><souraId>1</souraId> <souraName>سورة الفاتحة</souraName></soura></menu> 
```

xml 解析器代码：

```
public class XMLParser {

// constructor
public XMLParser() {

}

/**
 * Getting XML from URL making HTTP request
 * @param url string
 * */
public String getXmlFromUrl(String url) {
    String xml = null;

    try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        xml = EntityUtils.toString(httpEntity);

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    // return XML
    return xml;
}

/**
 * Getting XML DOM element
 * @param XML string
 * */
public Document getDomElement(String xml){
    Document doc = null;
    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    try {

        DocumentBuilder db = dbf.newDocumentBuilder();

        InputSource is = new InputSource();
            is.setCharacterStream(new StringReader(xml));
            doc = db.parse(is); 

        } catch (ParserConfigurationException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        } catch (SAXException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        } catch (IOException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        }

        return doc;
}

/** Getting node value
  * @param elem element
  */
 public final String getElementValue( Node elem ) {
     Node child;
     if( elem != null){
         if (elem.hasChildNodes()){
             for( child = elem.getFirstChild(); child != null; child = child.getNextSibling() ){
                 if( child.getNodeType() == Node.TEXT_NODE  ){
                     return child.getNodeValue();
                 }
             }
         }
     }
     return "";
 }

 /**
  * Getting node value
  * @param Element node
  * @param key string
  * */
 public String getValue(Element item, String str) {     
        NodeList n = item.getElementsByTagName(str);        
        return this.getElementValue(n.item(0));
    }
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T13:41:13.523

从 XML 中删除 BOM 元素

# ruby-on-rails - 表单提交后从会话中删除会话变量

> ID：11674144
> 
> 赞同：2
> 
> 时间：2012-07-26T16:49:53.397
> 
> 标签：ruby-on-rails, ruby-on-rails-3, session, cookies

我在节目中设置了一个会话 var :time_block_id。提交表单后，您会看到相同的 session_id 和 _csrf_token 但 :time_block_id 消失了。有任何想法吗？导轨 3.2.6

控制器.rb

```
def show
  session[:time_block_id] = "test"
  debugger
  (rdb:663) p session 
  # outputs ...
  {"session_id"=>"1232115b1ffe78b7e71163e4bd48974a", "user_return_to"=>"/app/admin/clients", "_csrf_token"=>"/aFAp07yrpQtjgXDS2HQk+uNZLD3QuGRzSGX4Mszyug=", "warden.user.user.key"=>["User", [2], "$2a$10$1Mn/Riq9WdmnUUUiVhXbsO"], "time_block_id"=>"test"}

  render_wizard
end

def update
  debugger
  (rdb:663) p session
{"session_id"=>"1232115b1ffe78b7e71163e4bd48974a", "user_return_to"=>"/app/admin/clients", "_csrf_token"=>"/aFAp07yrpQtjgXDS2HQk+uNZLD3QuGRzSGX4Mszyug=", "warden.user.user.key"=>["User", [2], "$2a$10$1Mn/Riq9WdmnUUUiVhXbsO"]}

  a = ""
end 
```

_form.html.haml

```
=simple_form_for @time_block, url: wizard_path, :method => :put do |f|
    =f.submit "go" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T17:39:27.560

我建议您将“time_block_id”变量移到“warden.user.user.key”之前，并检查游览模型。前一个参数上的错误更有可能在没有错误消息的情况下阻塞其余进程。

# javascript - 自定义谷歌地图标记

> ID：11674151
> 
> 赞同：0
> 
> 时间：2012-07-26T16:50:19.917
> 
> 标签：javascript, google-maps-markers

我正在尝试制作自定义 Google 地图。这个想法是用 3 个不同的标记制作地图，例如：森林、河流、湖泊。

我知道如何添加这些自定义标记。我使用本[教程](http://stiern.com/tutorials/adding-custom-google-maps-to-your-website/)执行此操作，但我需要对标记进行排序。例如，当我在地图中按链接“森林”时，只会显示“森林”标记。请帮助解决这个问题，我尝试在 Google 示例中搜索，但没有找到我需要的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T17:17:56.570

我只是为类似的场景保留所有标记的列表/数组。实际上，我为此目的编写了一个 Javascript 元对象，因此我可以搜索特定类型的所有标记等。

一个非常简单的解决方案是保留三个列表，每种类型一个。因此，您可以遍历所有列表并根据需要隐藏/显示标记。

编辑1：

1.  请参阅[https://stackoverflow.com/a/6662514/356726](https://stackoverflow.com/a/6662514/356726)以获得第一印象。
2.  这是一个结合 jQuery 使用概念的[教程。](http://marcgrabanski.com/article/jquery-google-maps-tutorial-basics/)

# indexeddb - WinJS 中的多个 IndexDB 或过滤？

> ID：11674152
> 
> 赞同：0
> 
> 时间：2012-07-26T16:50:20.347
> 
> 标签：indexeddb, winjs

我正在使用 WinJS 和 IndexDB 来支持我正在编写的 Metro 应用程序。我需要维护 2 个信息列表。如果我可以过滤一个字段，但我找不到支持从 IndexDB 过滤的方法，我可以使用相同的数据库并为两个列表存储相同的对象。

由于那没有用，所以我想我只使用 2 个 IndexDB。我的 Metro 应用程序只是抛出了一个异常，没有其他详细信息表明错误 2。

我可以在 Metro 应用程序的一页中使用多个 IndexDB 吗？

是否可以使用 IndexDB 进行过滤？

甚至 IndexDB 的结果似乎也被隐藏了，因为在获得所有结果后我什至无法手动过滤。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T18:21:51.480

取决于您所说的多个 indexedDB 的含义——您不能打开多个数据库实例，但您可以多次查询数据库，并获取多个数据集。数据库将返回记录的完整对象。

另外，您要进行哪种过滤？

请注意，indexedDB 没有用于基于过滤器进行选择的直接查询语言。你有几个选择：

*   在对象存储上使用索引，并将其用于“精确”匹配（例如图像类型或其他）
*   从数据库结果返回时过滤内容，仅将其返回给其他内容。

[在https://github.com/grork/db.js](https://github.com/grork/db.js)有一个很好的 Aaron Powells db.js 的分支，它提供了一个很好的 WinJS 承诺兼容 API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T05:47:03.263

我已经看到这个问题已经得到解答，但我想指出，我正忙于围绕 indexeddb 编写一个支持查询的库。即使是 indexeddb API 无法实现的过滤器也可以在我的库中解决。

仅供参考看看[这个链接](http://linq2indexeddb.codeplex.com)。它也与 WinJS 兼容，并且每件事都包含在 Promise 中。

# vb.net - .net 接口设计模式

> ID：11674156
> 
> 赞同：0
> 
> 时间：2012-07-26T16:50:32.897
> 
> 标签：vb.net, design-patterns

我正在尝试在我的项目中更多地使用接口。我在网上看到的很多例子都很琐碎（但很有帮助）。请看下面的代码：

```
Public Class Animal
    Implements Eatable
    Public Overridable Sub Eat() Implements Eatable.Eat
        MsgBox("Animal Eat no arguement")
    End Sub
Public Overridable Overloads Sub Eat(ByVal food As String) Implements Eatable.Eat
    MsgBox("Animal Eat food arguement")
End Sub
End Class

Public Class Horse
    Inherits Animal
    Implements Eatable
    Public Overrides Sub Eat()
        MsgBox("Horse Eat no arguement")
    End Sub
    Public Overloads Sub Eat(ByVal food As String)
        MsgBox("Horse Eat food arguement")
    End Sub
End Class

Public Interface Eatable
    Sub Eat()
    Sub Eat(ByVal localEat As String)
End Interface

Public Class Form1

    Private Sub Form2_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        TestFunction(1)
    End Sub

    Public Sub TestFunction(ByVal intTest As Integer)
        Dim e1 As Eatable
        If intTest = 1 Then
            e1 = New Horse
        Else
            e1 = New Animal
        End If
        'Functionality specific to e1 from here
    End Sub
End Class 
```

我在某处读到，以我在 TestFunction 中所做的方式使用多态性是不好的做法，即根据 intTest 的值将 e1 实例化为马或动物。如果是这种情况，那么有人可以推荐一种设计模式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T17:35:24.207

这段代码基本上没有任何问题（除了你的界面应该以大写“I”开头）：

```
Dim e1 As Eatable
If intTest = 1 Then
  e1 = New Horse
Else
  e1 = New Animal
End If 
```

只要您的期望是只需要处理一个 IEatable 对象。

如果您最终需要确定您拥有“哪种”动物，如下所示：

```
If TypeOf e1 Is Horse Then
  MessageBox.Show("Yeah, you're a horse")
Else
  MessageBox.Show("You are not a horse")
End If 
```

那么你最终设计了错误的东西。

# c# - 定期运行实例化对象的方法

> ID：11674159
> 
> 赞同：0
> 
> 时间：2012-07-26T16:50:50.730
> 
> 标签：c#, multithreading

如果有一个看起来像这样的对象：

```
public class MyTask
{
    private Connection _someKindOfConnectionThatShouldStayOpen;

    public MyTask() { ... Opens connection and other stuff } 

    void DoWork(object arg) { ... }
} 
```

我想创建一个小应用程序来创建对象并定期（比如每秒）运行 DoWork 方法，而不破坏对象。这样做的最佳方法是什么？（即最安全和最佳实践）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T16:54:25.427

您当然可以使用[Timer](http://msdn.microsoft.com/en-us/library/system.threading.timer.aspx)。计时器的回调可以调用 DoWork。

让 Timer 成为对象的私有字段。实例化并在对象实例化时启动它。

为您的对象实施 IDisposable 并确保在处置对象时处置计时器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T17:00:20.340

在您的应用程序中，创建 MyTask 的类级实例和计时器。在计时器的经过事件中，调用你想要的方法。我会做类似的事情：

```
using System.Timers;
using System.Threading;

class Program
{
    static MyTask taskInstance = new MyTask();  
    static ManualResetEventSlim cancelEvent = new ManualResetEventSlim(false);

    static void Main()
    {       
        var timer =  new Timer
        {
            AutoReset = true,
            Interval = 1000
        };
        timer.Elapsed += (x, y) => taskInstance.DoWork();
        cancelEvent.Wait();
    }
} 
```

请记住，这不是完整的或经过测试的，但这是我要追求的基本想法。每当您需要停止应用程序时（由于用户输入或其他原因），请调用 cancelEvent.Set();

# c# - DateTime.ParseExact 返回 FormatExpcetion

> ID：11674165
> 
> 赞同：4
> 
> 时间：2012-07-26T16:51:02.670
> 
> 标签：c#, .net, string, exception, datetime

我有一个奇怪的问题：

```
string format = @"ddd MMM dd hh:mm:ss \G\M\Tzzz yyyy";
__timestamp = "Fri Apr 09 17:02:00 GMT-0500 2010";
DateTime.ParseExact(__timestamp, format, new CultureInfo("en")); 
```

返回`FormatException`= **"字符串未被识别为有效的日期时间。"**

但是该代码没有例外：

```
string format = @"ddd MMM dd hh:mm:ss \G\M\Tzzz yyyy";
__timestamp = "Sat Apr 10 01:27:00 GMT-0500 2010";
DateTime.ParseExact(__timestamp, format, new CultureInfo("en")); 
```

从该格式的 30k 日期解析中，大约 50% 的日期解析失败，但有该异常......

有谁知道为什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-26T16:55:28.363

应该`HH`不是`hh`。你是 24 小时制的。

```
ddd MMM dd HH:mm:ss \G\M\Tzzz yyyy 
```

有效的：`Sat Apr 10 01:27:00 GMT-0500 2010`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T17:03:38.667

似乎 DateTime 期待该“en”格式提供程序的 AM/PM 信息。尝试任何少于 12 小时（含）的时间，或添加一些 AM/PM 信息

# java - 将 Java JScrollBar 链接到 JTextArea/自定义定位 JScrollBar（轨道和拇指）

> ID：11674167
> 
> 赞同：0
> 
> 时间：2012-07-26T16:51:20.080
> 
> 标签：java, swing, jscrollbar

我在 JPanel 的 JScrollPane 中创建了一个 JScrollbar（带有自定义 UI）和一个 JTextArea。我不想将滚动条添加为滚动窗格的水平滚动条，因为我希望能够定位它。

我尝试在滚动条上设置模型并将其添加到面板（参见代码），但这不起作用——拇指大小不正确（它总是跨越整个轨道）并且定位不正确。

```
JPanel panel = new JPanel();
JTextArea textArea = new JTextArea(col, rows);
JScrollPane scrollPane = new JScrollPane(textArea);
JScrollBar scrollBar = new JScrollBar();    
scrollBar.setModel(scrollPane.getHorizontalScrollBar().getModel());
panel.add(textArea);
panel.add(scrollPane);
panel.add(scrollBar) 
```

如何将滚动条链接到我的文本区域，以便拇指大小和行为正确，并且仍然能够设置滚动条的位置和尺寸？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T11:09:27.067

如果您想要默认行为 - 您已经这样做了。您需要添加一些组件`JScrollPane`才能真正看到它。

下面是一个例子：

```
public final class Test {
    public static void main(String[] a) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

                Container pane = frame.getContentPane();
                JPanel panel = new JPanel();
                JTextArea textArea = new JTextArea(2, 10);
                JScrollPane scrollPane = new JScrollPane(textArea);
                JScrollBar scrollBar = new JScrollBar();//new JScrollBar(SwingConstants.HORIZONTAL);
                scrollBar.setModel(scrollPane.getHorizontalScrollBar().getModel());
                panel.add(textArea);
                panel.add(scrollPane);

                JPanel internal = new JPanel();
                for(int i = 0; i < 20; ++i) {
                    internal.add(new JLabel("TEXT"));
                }
                scrollPane.setViewportView(internal);
                scrollPane.setPreferredSize(new Dimension(100, 100));
                panel.add(scrollBar);
                pane.add(panel);
                frame.pack();
                frame.setLocationRelativeTo(null);

                frame.setVisible(true);
            }
        });
    }
} 
```

# python - 针对整数评估字符串（Python）

> ID：11674168
> 
> 赞同：2
> 
> 时间：2012-07-26T16:51:22.843
> 
> 标签：python, string, variables, integer, evaluation

> **可能重复：**
> [Python 如何比较字符串和整数？](https://stackoverflow.com/questions/3270680/how-does-python-compare-string-and-int)

我有一个 Python 脚本没有按预期评估两个值。该值`'10'`被确定为大于`200`。问题是保存“10”值的变量实际上是一个字符串而不是一个整数（而`200`它是一个整数）。

我的问题是：

Python 在针对整数评估字符串时会经历什么过程？它是如何进行比较的？

例如：

```
string="10"
int=200
if string >= int:
  print("String is greater")
else:
  print("Int is greater") 
```

会输出：

```
String is greater 
```

为什么是这样？我原以为 Python 在尝试比较这两种类型时会出错并退出。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T16:54:45.643

Python 2.x 允许比较任何类型的对象，并保证结果是可重现的。在 Python 3.x 中，比较无法有意义排序的对象会导致错误。2.x 行为的基本原理是有时能够方便地实现`list.sort()`异构列表。新 3.x 行为的基本原理是旧行为隐藏了错误。

Python 2.x 使用的排序是一个实现细节。CPython 使用了一些相当奇怪的规则，大致上

> `NoneType`< 数字 < 旧式类，按名称排序 < 新式类，按名称排序

（不能保证我做对了，但我不会费心去检查。这是一个实现细节，不要依赖它。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-26T16:54:06.847

在 Python 3 中，`TypeError`当尝试比较字符串和 int（或任何 2 个不可比较的类型）时，您确实会得到一个。

在 Python 2 中，行为是特定于实现的；在 cPython 中，类型的名称通常最终会进行比较（尽管您可能不应该依赖它...），因此字符串总是大于整数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-26T16:54:39.173

从[文档](http://docs.python.org/reference/expressions.html#not-in)

> 运算符 <、>、==、>=、<= 和 != 比较两个对象的值。对象不必具有相同的类型。如果两者都是数字，则将它们转换为通用类型。否则，不同类型的对象总是比较不相等，并且顺序一致但任意。

# c# - 使用 XmlSerializer 反序列化 XML 响应时缺少根元素

> ID：11674170
> 
> 赞同：10
> 
> 时间：2012-07-26T16:51:33.053
> 
> 标签：c#, xml-serialization

我尝试使用 XmlSerializer 反序列化以下 XML 响应。当我删除对 XML 序列化程序的调用时，我不会抛出任何错误。每次我使用 XmlSerializer 时都会出现异常。我错过了什么？

例外是：

```
System.Xml.XmlException: Root element is missing.
  at System.Xml.XmlTextReaderImpl.Throw(Exception e)
  at System.Xml.XmlTextReaderImpl.ParseDocumentContent()
  at System.Xml.XmlTextReaderImpl.Read()
  at System.Xml.XmlTextReader.Read()
  at System.Xml.XmlReader.MoveToContent()
  at Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationReaderSubmitReportResponse.Read5_NeweggAPIResponse() 
```

XML文档是：

```
<?xml version="1.0" encoding="utf-8"?>
<NeweggAPIResponse>
    <IsSuccess>true</IsSuccess>
    <OperationType>OrderListReportResponse</OperationType>
    <SellerID>myID</SellerID>
    <ResponseBody>
        <ResponseList>
            <ResponseInfo>
                <RequestId>XXXXXXXX</RequestId>
                <RequestType>ORDER_LIST_REPORT</RequestType>
                <RequestDate>07/26/2012 09:27:06</RequestDate>
                <RequestStatus>SUBMITTED</RequestStatus>
            </ResponseInfo>
        </ResponseList>
    </ResponseBody>
</NeweggAPIResponse> 
```

我对 XmlSerializer 的调用是：

```
XmlSerializer serializer = new XmlSerializer(typeof(SubmitReportResponse));
reportReq = serializer.Deserialize(respStream) as SubmitReportResponse; 
```

SubmitReportResponse 类是：

```
 public enum RequestStatus
{
    ALL,
    SUBMITTED,
    IN_PROGRESS,
    FINISHED,
    CANCELLED
}

/// <summary>
/// TODO: Update summary.
/// </summary>
[XmlRoot("NeweggAPIResponse")]
public class SubmitReportResponse
{
    public string IsSuccess { get; set; }
    public string OperationType { get; set; }
    public string SellerID { get; set; }
    public ReportResponseBody ResponseBody { get; set; }

    public SubmitReportResponse()
    {
        ResponseBody = new ReportResponseBody();
    }
}

public class ReportResponseBody
{
    public string Memo { get; set; }
    public ReportResponseList[] ResponseList { get; set; }   

    public ReportResponseBody()
    {

        ResponseList = new ReportResponseList[0];
    }
}

public class ReportResponseList
{
    public ResponseInfo[] ResponseInfo { get; set; }

    public ReportResponseList()
    {
        ResponseInfo = new ResponseInfo[0];
    }

}

public class ResponseInfo
{
    public string RequestId { get; set; }
    public string RequestType { get; set; }
    public string RequestDate { get; set; }
    public RequestStatus RequestStatus { get; set; }

    public ResponseInfo()
    {
        RequestStatus = new RequestStatus();
    }
} 
```

编辑：

请求代码：

```
 HttpWebRequest request = WebRequest.Create(endpoint) as HttpWebRequest;
            request.Proxy = null;
            request.Method = "POST";
            //Specify the xml/Json content types that are acceptable. 
            request.ContentType = "application/xml";
            request.Accept = "application/xml";

            //Attach authorization information
            request.Headers.Add("Authorization", apikey);
            request.Headers.Add("Secretkey", secretkey);

            GetOrderListRequest requestObj = new GetOrderListRequest();
            requestObj.OperationType = OperationType.OrderListReportRequest;
            requestObj.RequestBody = new OrderListRequestBody();
            requestObj.RequestBody.OrderReportCriteria = new OrderReportCriteria();
            requestObj.RequestBody.OrderReportCriteria.Status = 3;
            requestObj.RequestBody.OrderReportCriteria.KeywordsType = 0;
            requestObj.RequestBody.OrderReportCriteria.OrderDateFrom = "2012-01-01";
            requestObj.RequestBody.OrderReportCriteria.OrderDateTo = "2012-07-26";
            requestObj.RequestBody.OrderReportCriteria.OrderDownloaded = "false";

            string requestBody = SerializeToString(requestObj);

            byte[] byteStr = Encoding.UTF8.GetBytes(requestBody);
            request.ContentLength = byteStr.Length;

            using (Stream stream = request.GetRequestStream())
            {
                stream.Write(byteStr, 0, byteStr.Length);
            }

            //Parse the response
            using (HttpWebResponse response = request.GetResponse() as HttpWebResponse)
            {
                //Business error
                if (response.StatusCode != HttpStatusCode.OK)
                {
                    Console.WriteLine(string.Format("Error: response status code is{0}, at time:{1}", response.StatusCode, DateTime.Now.ToString()));

                    return;
                }
                else if (response.StatusCode == HttpStatusCode.OK)//Success
                {
                    using (Stream respStream = response.GetResponseStream())
                    {
                        StreamReader readerOK = new StreamReader(respStream);
                        //Console.WriteLine(String.Format("Result:{0}", DateTime.Now.ToString()));
                        Console.WriteLine(String.Format("{0}", readerOK.ReadToEnd()));

                        XmlSerializer serializer = new XmlSerializer(typeof(SubmitReportResponse));
                        reportReq = serializer.Deserialize(respStream) as SubmitReportResponse;
                    }
                }
            }

    public string SerializeToObj(object obj)
    {

        XmlSerializerNamespaces ns = new XmlSerializerNamespaces();
        ns.Add("", "");
        XmlWriterSettings settings = new XmlWriterSettings();
        settings.OmitXmlDeclaration = true;
        settings.Encoding = new UTF8Encoding(false);
        settings.Indent = true;
        XmlSerializer xs = new XmlSerializer(obj.GetType());
        MemoryStream ms = new MemoryStream();

        // xs.Serialize(ms, obj,ns);

        XmlWriter writer = XmlWriter.Create(ms, settings);
        xs.Serialize(writer, obj, ns);

        return Encoding.UTF8.GetString(ms.ToArray());
    } 
```

解析度：

似乎调用`Console.WriteLine(String.Format("{0}", readerOK.ReadToEnd()));`会导致流被消耗并且不可用于序列化。删除这一行使我能够正确地将 XML 序列化到我的类中。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-28T20:31:40.280

调用`Console.WriteLine(String.Format("{0}", readerOK.ReadToEnd()));`会导致流被消耗并且不可用于序列化。

删除这一行使我能够正确地将 XML 序列化到我的类中。

# c# - Outlook Mail Item with OFT Template

> ID：11674172
> 
> 赞同：3
> 
> 时间：2012-07-26T16:51:50.080
> 
> 标签：c#, outlook, html-email

I need to create a new Outlook Mail Item using a pre existing oft template. This works fine, but my problem is when I need to then add text to the body of the template. when i attempt this, it writes over the template body.

The current template body consists if a table with three rows and I need to add user input to the middle row?

I followed the MSDN example to create the item but I'm unsure of how to do this next part.

Is it possible to add text to an oft template without writing over the top of it?

```
private void button1_Click(object sender, EventArgs e)
{
    Outlook.Application application = new Outlook.Application();

    Outlook.Folder f = 
        application.Session.GetDefaultFolder(Outlook.OlDefaultFolders.olFolderDrafts) 
            as Outlook.Folder;

    Outlook.MailItem mail =
        application.CreateItemFromTemplate(@"C:\Documents and Settings\riversd\Desktop\DataBase\Notification.oft", f)
        as Outlook.MailItem;

    mail.BodyFormat = Outlook.OlBodyFormat.olFormatHTML;
    mail.Body = "<p>TEST</p>";
    mail.Save(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T19:30:10.173

[`MailItem.Body`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook._mailitem.body) is a `string` data type. If you want to append text to the `Body`, you should use `+=` instead of just `=`. Since you are using an HTML-formatted email (*`BodyFormat = olFormatHTML`*), you should be working with [`MailItem.HTMLBody`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook._mailitem.htmlbody) which is an HTML-syntax string.

See [MSDN section 17.3.1 for reference on how to add text to the Body property](http://msdn.microsoft.com/en-us/library/office/dd492012%28v=office.12%29.aspx#Outlook2007ProgrammingCh17_AddingTextToAnItem). [Section 17.3.2](http://msdn.microsoft.com/en-us/library/office/dd492012%28v=office.12%29.aspx#Outlook2007ProgrammingCh17_AddingTextToAnItem) shows how to add text to `HTMLBody` property.

### Text Email Example (`BodyFormat = olFormatPlain`)

```
mail.Body += "<p>TEST</p>"; 
```

### HTML Email Example (`BodyFormat = olFormatHTML`)

```
mail.HTMLBody = mail.HTMLBody.Replace("</body>", "<p>TEST</p></body>"); 
```

# php - PHP - 变量问题

> ID：11674173
> 
> 赞同：1
> 
> 时间：2012-07-26T16:51:50.540
> 
> 标签：php, variables

我最近构建了一个表单（见下文），并且我设法编写了一个 php 脚本，我在其中设置了当我按下表单中的提交按钮时要发送的邮件。问题是在 $message 变量中的 php 脚本中，通过电子邮件发送的唯一内容是字符串，而不是 $name、$customer_number 等变量。

有人可以向我指出错误吗？

表格：

```
<form name="bookingForm" method="post" action="send_dates.php">
<table border="0" cellspacing="1" cellpadding="2">

<tr>
<td>Booking From</td>
<td>:</td>
<td><input name="fromDate" id="fromDate" size="20"></td>

<td>To</td>
<td>:</td>
<td><input name="toDate" id="toDate" size="20"></td>
</tr>

<tr>
    <td>Name</td>
    <td>:</td>
    <td><input name="name" id="name" size="30"></td>
</tr>

<tr>
    <td width="20px">Telephone</td>
    <td>:</td>
    <td><input name="customer_telephone" id="customer_telephone" size="30"></td>
</tr>

<tr>
    <td width="20px">Email</td>
    <td>:</td>
    <td><input name="customer_email" id="customer_email" size="30"></td>
</tr>

<tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td><input type="submit" name="submit" value="Submit" onClick="document.getElementById('ResetForm').click();">
    <input type="reset" name="ResetForm" id="ResetForm" value="Reset"></td>
</tr>
</table>
    </form> 
```

PHP 脚本发送数据：

```
<?php
$name = $_POST["name"];
$fromDate = $_POST["fromDate"];
$toDate = $_POST["toDate"];
$email = $_POST["customer_email"];
$telephone = $_POST["customer_telephone"];

// Mail of recievers
$to = "ucjulian@gmail.com";

// Contact subject
$subject ="Reservation Enquiry from $name";

// Details
$message="
From: $name
Email: $customer_email
Telephone: $customer_telephone
--------------------------------------------------------------
Reservation date from: $fromDate to: $toDate ";

// Mail of sender
$mail_from="$customer_email";

$rev = mail($to,$subject,$message);

if($rev) {
    echo 'booking request has been sent!';
}
else {
    echo 'something has gone wrong. Please try again!';
} ?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T16:54:18.800

您将变量定义为`$email`和`$telephone`，但将它们分别用作`$customer_email`和`$customer_telephone`。

更新任一区域的名称用法，您应该已设置好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T16:54:50.727

你有一个错误的变量名。代替

```
From: $name
Email: $customer_email
Telephone: $customer_telephone 
```

和

```
From: $name
Email: $email
Telephone: $telephone 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T16:55:22.137

如果您关闭了 register_globals [可能是这样]，您最好在 $message 中使用 $telephone 而不是 $customer_telephone

# java - 是否可以使用基于 InputStream 的 ScatteringByteChannel

> ID：11674175
> 
> 赞同：1
> 
> 时间：2012-07-26T16:51:58.410
> 
> 标签：java, nio

我想将输入数据从流中拆分到多个缓冲区。我已经探索过 NIO 通道，但似乎无法找到一种方法来在 InputStream 上执行相当于 C 的 readv() 的方法。文件、套接字等似乎都被覆盖了，但没有流。ScatteringByteChannel 看起来最有希望，但我未能从 InputStream 设置它。有没有办法做到这一点？

感谢您的任何提示。

*   克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T17:49:45.810

考虑`nio`一个相当低级的接口，而不是提供的高级接口`java.io`。您的高级流可能使用*任何*实现。只要你能一次读取一个字节，你就可以把它变成一个流。nio 类用于批量数据的原始优化操作。为了进行优化，他们必须非常清楚他们的数据来自哪里。一个泛型`InputStream`根本不适合该图像。

因此，尽管您可以将输入流中的数据分散到多个缓冲区，但没有优化的方法可以为每个输入流可移植地这样做。因此，您不妨自己实现它，因为`nio`不会提供任何性能提升。

请注意，`readv`您引用的 C 接口仅接受低级整数文件句柄，而不是`FILE*`stdlib 使用的。前者只能表示原始的无缓冲内核流。后者可能表示任何内容（参见`fopencookie`手册页），但不会提供原始优化访问。

# php - PHP，Mysql选择行

> ID：11674176
> 
> 赞同：0
> 
> 时间：2012-07-26T16:51:59.893
> 
> 标签：php, mysql

我似乎在从 Mysql 检索数据时遇到了一些困难。

我在 PhpMyAdmin SQL 中试过这个：

```
SELECT *
FROM `ads1`
WHERE state IN ( 'Romania , Germany' ) 
```

并且代码有效，但没有返回任何内容。

我有一个包含值的表和一个具有这种格式的 PHP 变量：`name1,name2,name3,....,nameN`，都在一个变量中。

现在的想法是，如果表值包含在 PHP 变量中，则选择行获取。

你们有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T16:52:53.777

```
SELECT * FROM ads1 WHERE state IN ( 'Romania' , 'Germany' ) 
```

您必须将**每个**条目放在引号中，**而不仅仅是**孔输入。

# windows - Stylus 结束批处理执行

> ID：11674177
> 
> 赞同：0
> 
> 时间：2012-07-26T16:52:01.210
> 
> 标签：windows, node.js, batch-file, windows-shell, stylus

我目前正在尝试编写一个批处理文件来在 Windows 中构建我的项目。该项目是用手写笔构建的。Stylus 与 node.js 和 -g 标志一起安装

每当我使用 stylus 命令运行批处理文件时，stylus 调用后都不会执行任何命令。这就像手写笔调用的完成会强制关闭窗口，即使运行命令本身不会关闭窗口。

这是我的脚本：

```
set sourcedir="d:\Projects\Travnet\Web\source"
set destdir="d:\Projects\Travnet\Web\package"

::clean up the lackage dir
rmdir /q /s %destdir%
md %destdir% 

:: Duplicate all images for the package
xcopy %sourcedir%\assets\img\* %destdir%\img\ /y

::compress the stylus css
::-c is the source, -o is the output dir
if not exist %destdir%\css md %destdir%\css
stylus -c %sourcedir%\assets\styl -o %destdir%\css
::type %destdir%\css\* > %destdir%\css\styles.css
copy /b %destdir%\css\* %destdir%\css\styles.css

pause 
```

复制命令和暂停命令都没有被执行。如果我注释掉 stylus 命令，它们就会被执行。stylus 命令正在输出文件，所以我很茫然。

有谁知道为什么手写笔执行会强制我的脚本结束执行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T16:53:21.887

`stylus`很可能是一个批处理文件。您必须使用 调用其他批处理文件`call`，否则控制将不会返回到调用批处理：

```
call stylus -c ... 
```

# javascript - 带有 json imagegroup 的 Fancybox2 不显示下一张图片

> ID：11674182
> 
> 赞同：0
> 
> 时间：2012-07-26T16:52:29.853
> 
> 标签：javascript, jquery, fancybox, fancybox-2

我想将我的画廊更新到 fancybox 2。在 1.3.4 版本一切正常之前，现在无法在幻灯片中显示下一张图片。它总是首先显示。但是，如果我前后返回，那么一切正常。

看这里： http: [//f.cl.ly/items/3Z1W0t2Z0U1U39452Z1a/fancybox_error.m4v](http://f.cl.ly/items/3Z1W0t2Z0U1U39452Z1a/fancybox_error.m4v)

```
<script type="text/javascript">
    $(function() {
        var images = [];
        $.getJSON("/json/235", function(data) {
            images = data.items;
        }).error(function(e) { console.log( e ); });

        $(".fancybox").click(function(e) {
            e.preventDefault();
            $.fancybox(images, {
                "zoomSpeedIn":0,
                "zoomSpeedOut":0,
                "padding":10,
                "overlayShow":true,
                "nextEffect":"none",
                "nextClick":true,
                "helpers":{
                    "overlay":{
                        "opacity":0.5,
                        "css": { "background-color":"#000" }
                    },
                    "thumbs":{ "width":50, "height":50 }
                },
                index : $(this).attr("rel"),
                prevEffect : "slideOut",
                nextEffect : "slideIn",
                nextClick : true,
                type: "image" 
            });
        });
    }); 
</script> 
```

json文件看起来像

```
{"items":[{
    "href":"\/images\/get\/resize\/1200\/1200\/gallery\/2010-12-12_Fraport_Werft\/SES_6880_01.JPG",
    "title":"Fraport Werft"}, {
    "href":"\/images\/get\/resize\/1200\/1200\/gallery\/2010-12-12_Fraport_Werft\/SES_6888_01.JPG",
    "title":"Fraport Werft"}
]} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T00:37:58.807

正如我在其中一条评论中提到的，您应该记住，`rel`fancybox 使用该属性来确定哪些元素属于同一个画廊。似乎您使用该`rel`属性来获取`index`via的事实`index : $(this).attr("rel"),`混淆了 fancybox 以获得画廊的正确顺序。

如果您愿意将您的画廊更新/升级到fancybox v2.x，您也可以考虑将您的画廊升级`DOCTYPE`到HTML5，这样您就可以使用该`data-*`属性来设置`index`您的画廊元素的权利（并且不用理会该`rel`属性）

因此，例如，在[您的示例](http://www.pitlanepics.de/galerie/-/-/show/174/MINI_Challenge/seite1/)中，更改此：

```
<a rel="0" class="fancybox" ..... 
```

对此：

```
<a data-index="0" class="fancybox" ..... 
```

等等等等。然后在你的脚本中，改变这一行：

```
index : $(this).attr('rel'), 
```

对此

```
index: $(this).data("index"), 
```

...这几乎可以解决问题。

[在此处查看演示](http://www.picssel.com/playground/jquery/jsonImagesIndexIssue_27jul12.html)

# java - Eclipse 仅为某些方法生成 Java Doc

> ID：11674183
> 
> 赞同：2
> 
> 时间：2012-07-26T16:52:33.123
> 
> 标签：java, eclipse, javadoc

现在，当我生成 Java Doc 时，我得到了一堆错误。我想知道是否可以为某些方法生成 Java Doc。假设我正在制作一个供其他人使用的课程。我希望他们能够看到我班级的 Java 文档。我收到以下错误：

```
package org.json does not exist
import org.json.JSONException; 
```

但是 JSON java doc 是无关紧要的。我需要他们能够看到的只是我在 XYZ 类中编写的方法的文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T17:04:58.123

这可能是可能的，但并不常见。本机 Javadoc 不支持这一点，我认为：

[http://java.sun.com/j2se/javadoc/faq/index.html#exclude](http://java.sun.com/j2se/javadoc/faq/index.html#exclude)

[但是您可能对Exclude Doclet](http://java.sun.com/j2se/javadoc/excludedoclet/index.jsp)有一些运气。

# javascript - IE9 中的 Javascript 错误：- SCRIPT5022：DOM 异常：INVALID_CHARACTER_ERR (5)

> ID：11674191
> 
> 赞同：0
> 
> 时间：2012-07-26T16:53:05.540
> 
> 标签：javascript, internet-explorer-9

m 在下面的代码行中出现错误：

```
var input2 = document.createElement('<input name=\'password\' type=\'password\' id=\'password\' onblur=\'checkCopy(this)\' onkeyup=\'return handleEnterSubmission(this.form,event)\'  maxlength=\'16\' autocomplete=\'off\' onfocusin=\'checkValue(this.value, this.id);setMarginInIE();\' />'); 
```

它在 IE8 中运行良好，但在 IE9 中出现问题。请告诉我这段代码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T16:59:24.380

您的代码的主要问题是您显然从未阅读过`document.createElement()`（例如[此处](https://developer.mozilla.org/en/DOM/document.createElement)）的文档。

它说（强调我的）：

> ```
> var element = document.createElement(tagName); 
> ```
> 
> *   `element`是创建的元素对象。
> *   `tagName`是一个字符串**，它指定要创建的元素的类型**。所创建元素的 nodeName 用 tagName 的值初始化。

您不能将完整的 HTML 字符串传递给`createElement`. 您可以传递标签名称：

```
var input2 = document.createElement('INPUT'); 
```

要创建完整的 HTML 块，请使用以下命令：

```
function createElementFromHTML(html) {
  var temp = document.createElement('DIV');
  temp.innerHTML = html;
  return temp.childNodes[0];
} 
```

# haskell - 为什么带有随机单子的函数需要一个额外的参数？

> ID：11674192
> 
> 赞同：0
> 
> 时间：2012-07-26T16:53:10.193
> 
> 标签：haskell, monads

在关于 monads的[教程中，在](http://blog.sigfpe.com/2006/08/you-could-have-invented-monads-and.html)**A more complex side effect: Random Numbers**一节中，作者提供了 random 函数的签名，如下所示：

```
random :: StdGen -> (a,StdGen) 
```

但接着说：

> 因此，一个概念上是随机函数的函数`a → b`可以写成一个函数
> `a -> StdGen -> (b,StdGen)`
> ，其中`StdGen`是种子的类型。

签名开头的多余`a`部分来自哪里？为什么那种类型`StdGen -> (a, StdGen)`不像以前那么简单？？？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T17:01:30.633

我认为这意味着`a`是参数，`a -> b`随机`b`是`StdGen -> (b, StdGen)`。`StdGen -> (a, StdGen)`只会给你一个随机的`a`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T16:44:52.263

这不一样，因为这是他描述的两种不同的功能。:)

第一个接受 a`StdGen`并返回该随机生成器的结果以及新状态。

然后他说，“所以如果我们有一个`a`随机变异（变成`b`）的函数，你会得到......”然后是第二个签名。

# makefile - 了解生成文件

> ID：11674194
> 
> 赞同：2
> 
> 时间：2012-07-26T16:53:16.707
> 
> 标签：makefile, gnu-make

我正在谈论[这个问题](https://stackoverflow.com/questions/7004702/how-can-i-create-a-makefile-for-c-projects-with-src-obj-and-bin-subdirectories)，该人已使用该任务的生成文件更新了他的最终解决方案。我很难理解它是如何完成的。

有一个规则：

```
$(OBJECTS): $(OBJDIR)/%.o : $(SRCDIR)/%.c
    @$(CC) $(CFLAGS) -c $< -o $@ 
```

我无法理解，但凭直觉我知道它会做什么。几乎所有其他事情都非常清楚。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T19:03:22.953

这是一个[静态模式规则](http://www.gnu.org/software/make/manual/make.html#Static-Pattern)。第一个字段是一个目标列表，第二个是Make 用来隔离目标“词干”的*目标模式*，第三个是Make 用来构造先决条件列表的先决条件*模式。*

假设你有

```
SRCDIR = src
OBJDIR = obj
OBJECTS = obj/foo.o obj/bar.o obj/baz.o

$(OBJECTS): $(OBJDIR)/%.o : $(SRCDIR)/%.c
    @$(CC) $(CFLAGS) -c $< -o $@ 
```

如果您`make obj/foo.o`，Make 首先将此规则标识为要使用的规则（因为`obj/foo.o`在目标列表中`$(OBJECTS)`），将其与目标模式匹配`obj/%.o`并发现词干（与通配符匹配的部分`%`）是`foo`，然后将其插入到 prereq 模式中`src/%.c`并发现前提是`src/foo.c`。

如果您还定义了变量

```
CC = gcc
CFLAGS = -thisflag -thatflag=something 
```

那么规则中的命令就变成了

```
 @gcc -thisflag -thatflag=something -c src/foo.c -o obj/foo.o 
```

（请注意，这`$<`是第一个先决条件，`$@`也是目标名称。）

回答您的另一个问题：是的，makefile 可以处理对头文件 () 的依赖关系，`x.h`因此如果头文件已被修改，Make 将重建目标。不，这个 makefile 不会那样做。您可以手动修改makefile，添加如下规则

```
a.o: x.h 
```

假设您知道实际包含的内容，或者您​​可以让 makefile 自动执行此操作，这是您可能不应该尝试的高级技术。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T16:59:02.290

这一行解释了如何从源文件 (.c) 获取目标文件 (.o)，它避免了为每个 .c 文件重复该行。

对象将在 OBJDIR 中，源在 SRCDIR

$(CC) 将包含编译器，CFLAGS 将包含编译器的选项，-c 告诉 gcc 将源代码编译为对象。

例如：

*   CC = gcc

*   CFLAGS = -g -Wall

可以转换成gcc -g -Wall -c test.c -o test.o

# actionscript-3 - .name 属性的 AS3 参考影片剪辑

> ID：11674195
> 
> 赞同：3
> 
> 时间：2012-07-26T16:53:17.373
> 
> 标签：actionscript-3, flash, movieclip

是的，另一个简单的 noobie as3 问题。

如何通过 ".name" 引用影片剪辑？

我试图寻找解决方案，但我找不到任何东西。基本上，我使用循环将一组电影剪辑添加到舞台，所以我发现区分它们的方法是给它们一个“某物”的 .name + 循环的“i”。所以现在它们被命名为“something1”、“something2”、“something3”等。

现在，我需要将一些发送到特定框架。通常我会做类似的事情：

```
something1.gotoAndStop(2); 
```

但是“something1”不是实例名称，只是“.name”。我找不到引用它的方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T17:07:41.427

你想使用 getChildByName("name")[更多信息](http://am3media.com/site/flash-as3/flash-as3-get-child-by-name/)

导入 flash.display.MovieClip；

```
// create boxes
for(var i:int = 0 ; i < 4; i++){

    var box:MovieClip = new myBox(); // myBox is a symbol in the library (export for actionscript is checked and class name is myBox

    box.name = "box_" + i;
    box.x = i * 100;
    this.addChild(box);

}

// call one of the boxes

var targetBox:MovieClip = this.getChildByName("box_2") as MovieClip;
targetBox.gotoAndStop(2); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T21:04:09.800

按名称访问事物很容易出错。如果你是新手，这不是一个好习惯。我认为更安全的方法是存储对您在循环中创建的事物的引用，例如在数组中，并通过它们的索引引用它们。

例子：

```
var boxes:Array = [];
const NUM_BOXES:int = 4;
const SPACING:int = 100;

// create boxes
for(var i:int = 0 ; i < NUM_BOXES:; i++){

    var box:MovieClip = new MovieClip(); 

    // You can still do this, but only as a label, don't rely on it for finding the box later!
    box.name = "box_" + i; 
    box.x = i * SPACING;
    addChild(box);

    // store the box for lookup later.
    boxes.push(box); // or boxes[i] = box;
}

// talk to the third box
const RESET_FRAME:int = 2;
var targetBox:MovieClip = boxes[2] as MovieClip;
targetBox.gotoAndStop(RESET_FRAME); 
```

请注意，我还用常量和变量替换了许多松散的数字，这也将帮助您的编译器发现错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T17:08:36.510

您可以使用父级按名称获取子级。如果父级是舞台：

```
var something1:MovieClip = stage.getChildByName("something1");
something1.gotoAndStop(2); 
```

# javascript - 根据鼠标移动动画 css [如何改进]

> ID：11674196
> 
> 赞同：2
> 
> 时间：2012-07-26T16:53:17.847
> 
> 标签：javascript, jquery, html, css, mousemove

## 你好

所以我开始写一些函数，女巫会这样做（你越靠近你将鼠标移动到 div 越靠近 div 移动到鼠标位置`on parent X axsis`，最大 div 位置是`left:-40%`，最小值是`left: -80%`）：

**注：**黑色箭头为光标（鼠标位置）

1.  ![项目清单](../Images/a1702aabbfd727fea6bad9125f5f536c.png)
2.  ![项目清单](../Images/acd3bb875071774425ce10a8c04c9278.png)
3.  ![项目清单](../Images/7b252fc0a564009005674ac755feddc6.png)

## 代码

**HTML**标记：

```
<div class="wraper">
    <div class="ls">
        <div class="ldiv">
        </div>
    </div>
    <div class="c">
        <div class="coordinates">
        </div>
        <div class="cdiv">
        </div>
    </div>
    <div class="rs">
        <div class="rdiv">
        </div>
    </div>
</div> 
```

**CSS**标记：

```
body{
    margin: 0;
    padding: 0;
}
.wraper{
    width: 100%;
    height: 500px;
}
.ls, .rs{
    position: relative;
    float: left;
    width: 30%;
    height: 100%;
    background-color: #eeeeee;
}
.c{
    position: relative;
    float: left;
    width: 40%;
    height: 100%;
    background-color: #dddddd;
}
.cdiv{
    position: absolute;
    top: 25%;
    left: 10%;
    width: 80%;
    height: 50%;
    background-color: red;
}

.ldiv{
    position: absolute;
    top: 30%;
    left: -80%;
    width: 80%;
    height: 40%;
    background-color: red;
}
.rdiv{
    position: absolute;
    top: 30%;
    right: -40%;
    width: 80%;
    height: 40%;
    background-color: red;
} 
```

**Javacsript**标记：

```
//ASsign global variables
var mouseX = 0;
var newTop = 0;

$("div.ls").mousemove(function(event) {
    // Get parrent offset
    var parentOffset = $(this).offset();
    // Get child division offset
    var division = $(".ldiv").offset();
    // Calculate mouse position inside left division
    var relX = event.pageX - parentOffset.left;
    var relY = event.pageY - parentOffset.top;
    // Check if mouse changed its position
    if (mouseX != relX){
        // Get new position of x axis
        var newPosX = $(this).width() - relX - 161;
        // Get new height of child element in percentage
        var newHeight = 100 * parseFloat($(".ldiv").height()) / parseFloat($(this).height());
        // Display important stuff
        $(".coordinates").text("Mouse position = X:" + relX + " Y:" + relY + "Div offset = X:" + division.left + " Y:" + division.top  + " Width = " + $(this).width()+" newHJeight = "+newHeight);
        //If mouse moves left
        if (mouseX > relX) {
            // Cant go lower then 0.2 because javascript is rounding it down
            newHeight += 0.2;
            // calculate new top so division stays in middle of parent
            newTop = (100 - newHeight) / 2;
            // Assign new css
            $(".ldiv").css({
                left: newPosX + "px",
                height: newHeight + "%",
                top: newTop + "%"
            });
        } 
        //If mouse moves right
        else {
            newHeight -= 0.2;
            newTop = (100 - newHeight) / 2;
            $(".ldiv").css({
                left: newPosX + "px",
                height: newHeight + "%",
                top: newTop + "%"
            });
        }
        // Record mouse position
        mouseX = relX;
    }
}); 
```

​</p>

## 这是[jsFiddle中的实时示例](http://jsfiddle.net/rkWDR/221/)

**我想完成的事情**：

1.  我怎样才能重写这段代码，使它更像动画，并且如果我将鼠标移动得快就不会出现故障？

​</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T17:00:52.540

我不会依赖 mousemove，而是使用 requestAnimationFrame [或简单的 setTimeout]。这样你的 cpu 上的负载就会更小，动画也会更流畅。

# wpf - 仅在单击 DataGrid 行时执行 WPF MouseDoubleClick 事件

> ID：11674199
> 
> 赞同：5
> 
> 时间：2012-07-26T16:53:24.067
> 
> 标签：wpf, datagrid, double-click

我在 WPF 中有一个 DataGrid。当我双击一行时，应该执行对数据库的查询。

此 DataGrid 具有水平和垂直滚动条，我注意到当我快速单击其中一个滚动条的箭头按钮时，它会将查询发送到数据库。

问题是我使用的是DataGrid的`MouseDoubleClick`事件，所以滚动条属于DataGrid，当它们被双击时，会引发这个事件。

只有当我双击 DataGrid 的一行而不是双击滚动条的一部分时，有什么方法可以执行双击事件？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-27T08:26:05.193

在您的 MouseDoubleClick 事件中尝试这样做：

```
private void DataGridMouseDoubleClick(object sender, MouseButtonEventArgs e)
{
    DependencyObject src = VisualTreeHelper.GetParent((DependencyObject)e.OriginalSource);

    // Checks if the user double clicked on a row in the datagrid [ContentPresenter]
    if (src.GetType() == typeof(ContentPresenter))
    {
        // Your logic..
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-26T18:01:31.090

是的，在 中注册活动`RowStyle`。

```
<DataGrid.RowStyle>
    <Style TargetType="{x:Type DataGridRow}">
        <EventSetter Event="PreviewMouseDoubleClick" Handler="Row_PreviewMouseDoubleClick" />
    </Style>
</DataGrid.RowStyle> 
```

# javascript - 如何在javascript中将原型方法作为回调发送？

> ID：11674200
> 
> 赞同：0
> 
> 时间：2012-07-26T16:53:28.767
> 
> 标签：javascript, callback, this, box2d

我有原型方法，它由我正在使用的 Box2D API 的回调激活。回调可以到达函数，但它不是函数的正确实例。获取回调以调用*此*.prototype 类的正确语法是什么。

对 Box2D API 的调用：

```
Box2d.prototype.getBodyAtMouse = function() {
   this.mousePVec = new this.b2Vec2(this.mouseX/this.SCALE, this.mouseY/this.SCALE);
   var aabb = new this.b2AABB();
   aabb.lowerBound.Set(this.mouseX/this.SCALE - 0.001, this.mouseY/this.SCALE - 0.001);
   aabb.upperBound.Set(this.mouseX/this.SCALE + 0.001, this.mouseY/this.SCALE + 0.001);
   this.selectedBody = null;
   var _this = this; 
   this.world.QueryAABB(_this.getBodyCB, aabb);
   return this.selectedBody; 
```

}

这是被调用的 box2D API 方法：

```
b2World.prototype.QueryAABB = function (callback, aabb) {
  var __this = this;
  var broadPhase = __this.m_contactManager.m_broadPhase;

  function WorldQueryWrapper(proxy) {
     return callback(broadPhase.GetUserData(proxy));
  };
  broadPhase.Query(WorldQueryWrapper, aabb); 
```

}

这是我希望 API 正确引用的回调：

```
Box2d.prototype.getBodyCB = function(fixture) 
{
  if(fixture.GetBody().GetType() != this.b2Body.b2_staticBody) {
   if(fixture.GetShape().TestPoint(fixture.GetBody().GetTransform(), this.mousePVec)) {
      selectedBody = fixture.GetBody();
      return false;
   }
}
return true; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T17:11:25.227

要么使用

```
var _this = this; 
this.world.QueryAABB(function(fix){
   _this.getBodyCB(fix);
}, aabb); 
```

或者

```
this.world.QueryAABB(this.getBodyCB.bind(this), aabb); 
```

（旧版浏览[器](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind)不支持，但可以轻松填充）

# android - 如何在没有额外权限的情况下获取 SMS 统计信息（未读消息）？

> ID：11674202
> 
> 赞同：1
> 
> 时间：2012-07-26T16:53:30.810
> 
> 标签：android, permissions, sms

如果权限不是问题，我可以通过简单地阅读 SMS 的内容来解决这个问题：[Get number of unread sms](https://stackoverflow.com/questions/3718687/get-number-of-unread-sms)

然而，这需要`READ_SMS`许可，这是一个非常广泛的许可——我不希望任何用户吓坏。毕竟获取未读短信的数量是非常良性的操作。

那么 - 我怎样才能在不触发任何权限冲突的情况下**读取SMS 的统计信息（总消息、未读消息）？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T18:44:27.423

这是不可能的。您需要拥有 READ_SMS 权限才能执行任何涉及 SMS 的操作。

# javascript - $(this) 之后访问类的最快方法

> ID：11674204
> 
> 赞同：1
> 
> 时间：2012-07-26T16:53:40.890
> 
> 标签：javascript, jquery, parent, closest

具有以下html结构：

```
<tr class="invisible">
    <td align="center">
        <a class="i_edit" data-target="30"></a>
    </td>
    <td class="category">
        <span class="f_type" style="background-image: url(/admin/assets/img/f_type_3.gif);"> Tests </span>
    </td>
    <td style="background-color: blue;">
        <select class="behaviour" name="behaviour" style="opacity: 1;">
            <option selected="" value="1" style="opacity: 1;">Por noticias destacadas</option>
            <option value="2" style="opacity: 1;">Por fecha</option>
        </select>
    </td>
</tr> 
```

这是访问`.i_edit`内部课程的最佳/最快方式：

```
$('.behaviour').change(function(){

        $(this).closest('.i_edit').css('background-color', 'red'); //doesn't work
        $(this).parent().closest('.i_edit').css('background-color', 'red'); //doesn't work
        $(this).parent().parent().find('.i_edit').css('background-color', 'red'); //this works

    return false;

}); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-26T16:56:32.530

这三个都没有。

使用`$(this).closest('tr').find('.i_edit')`, 因为它是可读的，并且当你的 DOM 结构发生变化时仍然可以工作。

另请参阅：[http](http://api.jquery.com/closest/) ://api.jquery.com/closest/ 。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-26T16:56:47.347

首先，做一个 .parents('tr.invisible) 然后做一个 .find('.i_edit')

```
$('.behaviour').change(function(){
    var obj_this = $(this)

    obj_this.parents('tr.invisible').find('.i_edit').css('background-color', 'red');

   return false;
}); 
```

如果您需要多次使用它，也可以将 $(this) 保存到一个变量中。

```
var obj_this = $(this) 
```

# linux - 如何从 Linux 中的 DSN 获取数据库详细信息？

> ID：11674209
> 
> 赞同：0
> 
> 时间：2012-07-26T16:53:54.363
> 
> 标签：linux, zend-framework, dsn

我正在使用 zend 框架挖掘 linux webapps。除了 zend_config.xml 中的以下内容外，我找不到数据库连接字符串

```
<webhost>domain.com</webhost>
<docroot>/var/www/vhosts/domain.com</docroot>
<database>
<CLW>
<dsn>mssql://xyz:xyz@sql02/domain_prod</dsn>
</CLW>
<banner>
<dsn>oci8://INTERFACE01:astr0s06@(DESCRIPTION = (ADDRESS_LIST = (ADDRESS = (PROTOCOL =  TCP)(HOST = bnrprod)(PORT = 1521)))(CONNECT_DATA =(SERVER = DEDICATED)(SID = prod)))
</dsn>
</banner>
</database> 
```

如何从中找到数据库连接字符串？

在 /usr/local/etc/odbc.ini 或 /usr/local/etc/odbcinst.ini 中找不到任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T10:20:27.927

您应该将数据库参数添加到 application/application.ini 或 bootstrap。不是 zend.config。

# rabbitmq - RabbitMQ - 可选择创建附加消息？

> ID：11674211
> 
> 赞同：0
> 
> 时间：2012-07-26T16:53:57.570
> 
> 标签：rabbitmq, amqp

我有两个脚本在一个队列中生成消息，其中一个脚本希望队列在消息成功确认后生成附加消息-注意这不是 RPC 我想在第一条消息后选择性地进行附加处理已成功完成，但在成功处理第一条消息之前，我无法进行第二轮处理。

有没有人有这样做的经验？我最初的想法是向标识“下一步”的初始消息发送额外的参数，但这似乎有点骇人听闻，所以我希望有一个更好的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T11:45:36.550

检查我对这个问题的回答： [RabbitMQ 获取消息发送确认](https://stackoverflow.com/questions/11652368/rabbitmq-get-message-send-confirm)

这个功能应该允许你做你想做的事。

# sql-server - .value 从哪里来？

> ID：11674221
> 
> 赞同：2
> 
> 时间：2012-07-26T16:54:29.717
> 
> 标签：sql-server, tsql

```
SELECT ( SELECT 'White' AS Color1,
 'Blue' AS Color2,
 'Black' AS Color3,
 'Light' AS 'Color4/@Special',
 'Green' AS Color4,
 'Red' AS Color5
 FOR
 XML PATH('COLOR'),
 TYPE
 ).value('.', 'NVARCHAR(MAX)') 
```

该方法从何`.value`而来？我的意思是它是选择语句或字符串方法或内置 TSQL 函数的一部分吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T16:57:27.537

`value`是一种用于 XML 类型的方法。你可以在这里阅读它：

[http://msdn.microsoft.com/en-us/library/ms178030.aspx](http://msdn.microsoft.com/en-us/library/ms178030.aspx)

在您的情况下，`.`是引用当前节点的 xPath，并且您将该数据视为 SQL 类型`NVARCHAR(MAX)`

# java - how to disabling the Stack Trace from the SOAP Fault?

> ID：11674222
> 
> 赞同：3
> 
> 时间：2012-07-26T16:54:30.933
> 
> 标签：java, web-services, spring

i have a web service with Spring and jaxb and i try to throw one exception in some cases, for this I use the anotation @WebFault. just like this:

```
@WebFault
public class ServiceException extends Exception {

private static final long serialVersionUID = -5307754615848423430L;
private FaultBean faultBean;

public ServiceException(String message, ServiceErrorCode serviceErrorCode) {
        super(message);
        this.faultBean = new FaultBean();
        this.faultBean.setMessage(message);
        this.faultBean.setErrorCode(serviceErrorCode);
}

public FaultBean getFaultInfo() {
    return faultBean;
} 
```

}

and it's work fine, this is the output:

```
<S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/">
   <S:Body>
      <S:Fault xmlns:ns3="http://www.w3.org/2003/05/soap-envelope">
         <faultcode>S:Server</faultcode>
         <faultstring>myException</faultstring>
         <detail>
            <ns2:ServiceException xmlns:ns2="http://soap.service.test/">
           <errorCode>UNRECOGNIZED_ERROR</errorCode>
           <message>myException</message>
        </ns2:ServiceException>
        <ns2:exception class="ServiceException" note="To disable this feature, set com.sun.xml.ws.fault.SOAPFaultBuilder.disableCaptureStackTrace system property to false" xmlns:ns2="http://jax-ws.dev.java.net/">
           <message>myException</message>
           <ns2:stackTrace>
              <ns2:frame class="myWebService" file="myWebService.java" line="50" method="listTickets"/>
              <ns2:frame class="sun.reflect.NativeMethodAccessorImpl" file="NativeMethodAccessorImpl.java" line="native" method="invoke0"/>
              <ns2:frame class="sun.reflect.NativeMethodAccessorImpl" file="NativeMethodAccessorImpl.java" line="39" method="invoke"/>
              <ns2:frame class="sun.reflect.DelegatingMethodAccessorImpl" file="DelegatingMethodAccessorImpl.java" line="25" method="invoke"/>
              <ns2:frame class="java.lang.reflect.Method" file="Method.java" line="597" method="invoke"/>
              <ns2:frame class="com.sun.xml.ws.api.server.InstanceResolver$1" file="InstanceResolver.java" line="246" method="invoke"/>
              <ns2:frame class="com.sun.xml.ws.server.InvokerTube$2" file="InvokerTube.java" line="146" method="invoke"/>
              <ns2:frame class="com.sun.xml.ws.server.sei.EndpointMethodHandler" file="EndpointMethodHandler.java" line="257" method="invoke"/>
              <ns2:frame class="com.sun.xml.ws.server.sei.SEIInvokerTube" file="SEIInvokerTube.java" line="93" method="processRequest"/>
              <ns2:frame class="com.sun.xml.ws.api.pipe.Fiber" file="Fiber.java" line="595" method="__doRun"/>
              <ns2:frame class="com.sun.xml.ws.api.pipe.Fiber" file="Fiber.java" line="554" method="_doRun"/>
              <ns2:frame class="com.sun.xml.ws.api.pipe.Fiber" file="Fiber.java" line="539" method="doRun"/> 
```

...

so the problem is that does not seem correct show the stacktrace of the error, because the client does not care about those details, but can not find the way to do this, any ideas?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T10:56:49.013

Propagation of Stack trace is on by default. If you think its not safe for your Web Service Application to send the complete stack trace, you can turn off this functionality. I am sure you want to set it in the server's VM.If yes :

Effectively we need to configure the WLS server to include the following option on startup:

```
-Dcom.sun.xml.ws.fault.SOAPFaultBuilder.disableCaptureStackTrace=false 
```

For WLS 10.3 this entry should be included in your startWebLogic.cmd file.

For a standalone WLS this file is found under:

```
<WLS_HOME>/user_projects/domains/<YOUR_DOMAIN>/bin 
```

For the integrated WLS within JDeveloper 11g it's found under:

```
<JDEV_HOME>\system\system11.1.1.0.31.51.88\DefaultDomain\bin 
```

Locate the following entry in the startWebLogic.cmd file:

```
set JAVA_OPTIONS=%SAVE_JAVA_OPTIONS% 
```

..and change it to:

```
set JAVA_OPTIONS=-Dcom.sun.xml.ws.fault.SOAPFaultBuilder.disableCaptureStackTrace=false %SAVE_JAVA_OPTIONS% 
```

Restart the WLS server, and reinvoking the web service with an invalid SOAP payload.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-08T12:09:20.900

You can also set it in system properties in your java code, which is simple and does not depend on the type of server deployed. Just add the below line(in bold) at the very beginning of your service implementation call. Hope that helps.

Example:

> @WebService(endpointInterface="com.service.IMyService") public class MyServiceImpl implements IMyService {
> 
> @Override public List myService(String pnr) throws MyException {
> 
> > **System.setProperty("com.sun.xml.ws.fault.SOAPFaultBuilder.disableCaptureStackTrace", "false");**
> 
> .
> 
> .
> 
> .
> 
> }

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-17T08:23:50.523

This worked for me, after trying all the other methods...

`import com.sun.xml.ws.fault.SOAPFaultBuilder` to your class

Declare a variable for SOAPFaultBuilder ie: `SOAPFaultBuilder soapFaultBuilder;`

In your constructor, set the `soapFaultBuilder.captureStackTrace = false;`

# c++ - QT QSyntaxHighlighter - setCurrentBlockState 的作用是什么？

> ID：11674230
> 
> 赞同：1
> 
> 时间：2012-07-26T16:54:57.923
> 
> 标签：c++, qt, qt4, syntax-highlighting

也许我只是愚蠢，但我已经阅读了 qt Richtext 演示的文档（[https://doc.qt.io/archives/qt-4.7/richtext-syntaxhighlighter.html](https://doc.qt.io/archives/qt-4.7/richtext-syntaxhighlighter.html)）和 setCurrentBlockState 文档（[https ://doc.qt.io/archives/qt-4.7/qsyntaxhighlighter.html#setCurrentBlockState](https://doc.qt.io/archives/qt-4.7/qsyntaxhighlighter.html#setCurrentBlockState)），但我仍然无法弄清楚“newState”的含义以及如何在“highlightBlock”事件中使用这些函数。

有人可以用简单的话启发我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T17:32:53.727

就 Qt 而言，`newState`没有任何意义；它是一个任意整数。当您调用 时`setCurrentBlockState`，`QSyntaxHighlighter`只会将`newState`整数与您在`highlightBlock`成员函数内使用的当前文本块相关联。换句话说，整数严格来说是一个用户值，你可以用它来表示你想要的任何东西。

正如您发布的示例中所述，问题`highlightBlock`在于它只真正知道富文本引擎已传递给它的当前文本块。如果您需要了解有关您处理的前一个文本块的信息，则需要将此信息存储在某处。因此，`setCurrentBlockState`添加了该函数，以便您可以存储有关您正在使用的当前文本块的一些任意信息，以便以后调用`highlightBlock`可以看到先前调用在做什么。在示例中，提到突出显示多行 C++ 注释需要这样的功能才能正常工作。

话虽如此，您实际上不必使用`setCurrentBlockState`. 您可以实现自己的方法来存储`highlightBlock`调用之间的状态。但是，`setCurrentBlockState`它提供了一种将整数与文本块相关联的有效方法。

希望这能让事情变得清楚。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T08:31:16.750

我想我已经意识到使用 setCurrentBlockState() 来记住多行突出显示状态是不够的，以防您有多个多行突出显示规则。假设您有某种文件，其中有不同类型的多行语句，并且需要对它们进行不同的着色。然后，您需要为它们中的每一个维护当前和以前的状态。我让多行的规则索引 (+1) 表示当前突出显示状态，然后在为下一个块调用时匹配该索引是不够的。在这种情况下，必须维护每个多行规则的状态信息。

# c++ - CFtpConnection::GetCurrentDirectory 未解决的令牌错误。SetCurrentDirectory 等其他功能虽然有效

> ID：11674231
> 
> 赞同：1
> 
> 时间：2012-07-26T16:55:16.037
> 
> 标签：c++, visual-studio-2010, unmanaged, managed

dll 作为非托管代码编译得很好，但是当我在项目属性中添加 /clr 并更改为在共享 DLL 中使用 MFC 时，mfCFtpConnection::GetCurrentDirectory 会给我 LNK2028 和 LNK2019 错误。这是未解决的令牌和未解决的永恒符号错误。

我有#include 并链接了wininet.lib。所以我很困惑。

我在网上阅读了一篇用户遇到此问题的帖子，它与 mfc100.lib 将 CFtpConnection::GetCurrentDirectory 重命名为 CFtpConnection::GetCurrentDirectoryA 有关。没有解决方法，微软代表说它将在未来版本的 mfc100.lib 中修复。我不知道这是否是问题所在。

这是帖子的链接。 [链接到在线帖子](http://connect.microsoft.com/VisualStudio/feedback/details/558583/error-in-cftpconnection-getcurrentdirectory-inside-mfc100-dll)

任何想法都让我发疯。

我也尝试了 CFtpConnection::GetCurrentDirectoryAsURL 并且代码编译得很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-17T16:52:47.930

我认为这个错误源于这样一个事实，即有一些`#define`s 用于绕过 MFC dll 的 CLR 限制。如果您使用的是 VS2010，您可以将鼠标悬停在方法名称上，您将在生成的文件中看到`#define`正在重命名您的方法的语句。`.obj`由于它已被重命名，您代码中的其他模块将无法链接到它。

# mysql - mysql 搜索标题、描述和多行标签

> ID：11674232
> 
> 赞同：3
> 
> 时间：2012-07-26T16:55:18.770
> 
> 标签：mysql, search, full-text-search

我有下表。

条目表描述

```
+-------------+-------------------+------+-----+---------+----------------+
| Field       | Type              | Null | Key | Default | Extra          |
+-------------+-------------------+------+-----+---------+----------------+
| id          | int(11) unsigned  | NO   | PRI | NULL    | auto_increment |
| title       | varchar(255)      | YES  |     | NULL    |                |
| slug        | varchar(255)      | YES  |     | NULL    |                |
| description | text              | YES  |     | NULL    |                |
| user_id     | int(10) unsigned  | NO   |     | NULL    |                |
| unsafe      | enum('0','1')     | NO   |     | NULL    |                |
| copyright   | enum('0','1')     | NO   |     | 0       |                |
| status      | enum('0','1','2') | NO   |     | 0       |                |
| date_add    | datetime          | NO   |     | NULL    |                |
+-------------+-------------------+------+-----+---------+----------------+ 
```

标签表描述

```
+-------------+---------------------+------+-----+---------+----------------+
| Field       | Type                | Null | Key | Default | Extra          |
+-------------+---------------------+------+-----+---------+----------------+
| id          | bigint(20) unsigned | NO   | PRI | NULL    | auto_increment |
| relation_id | int(10) unsigned    | NO   |     | NULL    |                |
| name        | varchar(255)        | NO   |     | NULL    |                |
+-------------+---------------------+------+-----+---------+----------------+ 
```

我想在 entry.title 和 tag.name 中搜索。这个查询的性能如何。

我继续使用全文。你怎么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T17:09:21.210

我不确定标签与条目之间的关系，所以我假设relation_id 是条目ID。

```
SELECT 
    e.*
FROM entry e
WHERE MATCH(title) AGAINST ('{search string}')
{maybe a limit and/or order here}
UNION
SELECT
    DISTINCT
    e.*
FROM entry e
JOIN tags t ON t.relation_id = e.id
WHERE t.name IN ('word1','word2',...)#{search string} split by whitespace
{maybe a limit and/or order here} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T08:41:24.957

Do you mean is to show the attributes the columns `entry . title` and `tag . name` by joining `entry . user_id` into `tag . relation_id`? If that's what you want, you could check the SQL queries below:

```
SELECT entry . title , tag . name
FROM entry
INNER JOIN tag ON entry . user_id = tag . relation_id
ORDER BY entry . title 
```

Now if you're using query string to search a value on `entry . title` and `tag . name` attributes, try to check this code:

```
$q = $_GET["q"];

$result = mysqli_query($con, 'SELECT entry . title , tag . name
FROM entry
INNER JOIN tag ON entry . user_id = tag . relation_id
WHERE entry . title LIKE "%' . $q . '%"
OR tag . name LIKE "%' . $q . '%"'); 
```

Example, when a searcher go to *domain.com/?q=test* the system will then look if there's a matched text for **test** on `entry . title` and `tag . name` and if ever founds some, the row*(s)* of `entry . title` and `tag . name` that included that word will be a result.

Now if you want to show all the attributes that included the value of the query string *?q=* then just `SELECT *`. Check this out:

```
$q = $_GET["q"];

$result = mysqli_query($con, 'SELECT *
FROM entry
INNER JOIN tag ON entry . user_id = tag . relation_id
WHERE entry . title LIKE "%' . $q . '%"
OR tag . name LIKE "%' . $q . '%"'); 
```

Or include all there `TableName . AttributeField`s manually, such this:

```
$q = $_GET["q"];

$result = mysqli_query($con, 'SELECT entry . id , entry . title , entry . slug , entry . description , entry . user_id , entry . copyright , entry . status , tag . id , tag . relation_id , tag . name
FROM entry
INNER JOIN tag ON entry . user_id = tag . relation_id
WHERE entry . title LIKE "%' . $q . '%"
OR tag . name LIKE "%' . $q . '%"'); 
```

* * *

P.S. don't forget to rename the **"tags"** table into **"tag"**.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T17:01:01.490

首先，您需要确保标题和名称字段均已编入索引（无法通过您发送的信息看到这一点。我假设 tag.relation_id 与 entry.id 相关。所以您可以搜索：

```
SELECT * FROM entry as e JOIN tags as t on e.id = t.relation_id WHERE e.title LIKE('%YOURSEARCH%') OR t.name LIKE('%YOURSEARCH%') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-11T23:48:18.263

因此，您正在寻找一个系统来搜索标题，然后使用标签缩小结果范围。这是你想要的？

为了实现这一点，首先显示标题搜索的结果，然后将标签作为链接，就像这个页面“mysql搜索标题，描述和多行标签”是你的标题，在结果和结果中显示标签作为按钮“mysql search full-text-search " 当点击标签时显示特定结果。

如果您可以提供更多信息或您想要实现的目标和场景，将帮助我们为您提供更好的解决方案。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-12T20:31:01.130

```
SELECT entries.id, entries.title
FROM entries
INNER JOIN tags ON entries.id = tags.relation_id
WHERE tags.name IN ("tag1", "tag2", "tag3") AND MATCH(entries.title, entries.description) AGAINST ('{text}') 
```

# css - 用css悬停的相对div

> ID：11674235
> 
> 赞同：0
> 
> 时间：2012-07-26T16:55:21.513
> 
> 标签：css, positioning, z-index

问题并不那么简单（正如您可能想象的那样），举个例子：

**的HTML：**

```
Text text text <div id="special-image"></div> special content More text text text text... 
```

我希望**输出**看起来如何：

![在此处输入图像描述](../Images/7786fef6d001971d34161df7a47cde45.png)

如您所见，#special-image 是“悬停”在内容上而不触碰它。
我知道首先想到的是`position:absolute;`
但是正如您在示例图像中看到的那样，我希望这些 div位于设置它们`position:relative`的
区域（在 html 中）。并且 x,y 位置可能因页面而异
（它们不一致）。

**页面中的文本应该在页面中保持“锚定”，我不能给它绝对位置。要点是我不希望#special-image div 移动任何文本并只是悬停在那里。**

你建议我应该做什么才能实现这种行为？

提前致谢。

**编辑：**
这更近了一步（感谢@Ross McLellan），
但新创建的 div 正在推送内容：http:
[//jsbin.com/isepow/1/](http://jsbin.com/isepow/1/)
我需要一张图片而不是橙色背景。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T17:06:24.887

如果您知道图像/图像支架的宽度，我想可以通过一些负边距来实现

在IE7中无法使用...

```
<div>Text text text <div id="special-image" style="display: inline-block; position: relative; top: -15px; left: -15px; width: 40px; margin-right: -40px; background-color: #ff6600;">&nbsp;</div> special content More text text text text... </div> 
```

不能在 Chrome 中工作...

```
<div>Text text text <div id="special-image" style="position: absolute; margin-top: -15px; margin-left: -5px; width: 40px; background-color: #ff6600;">&nbsp;</div> special content More text text text text... </div> 
```

如果允许额外的包装器，则替代解决方案：

```
<div>Text text text <div style="position: absolute; display: inline;"><div id="special-image" style="display: inline-block; position: relative; top: -15px; left: -15px; width: 40px; background-color: #ff6600;">&nbsp;</div></div> special content More text text text text... </div> 
```

外包装持有绝对风格的位置。这允许特殊图像相对移动而不影响页面的其余部分

**编辑** 可能修复了使用边距的 IE7 问题。不知道为什么，但事实是他们在 a 上`<div>`，而是使用 span 并且看起来很开心（据我在测试中看到的，没有移动任何其他文本）

```
Text text text<span id="special-image" style="position: relative; top: -15px; left: -15px; display: inline-block; width: 40px; margin-right: -40px; background-color: #ff6600;">&nbsp;</span> special content More text text text text... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T17:01:56.737

对我来说，不清楚是什么定义了这两个图像的位置。如果图像应接近特殊内容文本，则将此文本与图像放在单独的 div 中。然后，您可以相对于其父 div 定位图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T17:02:51.130

像这样 ？

```
div#special-image{position:absolute;top:-5px; display:inline-block;}​ 
```

将此视为概念证明[；-)](http://jsfiddle.net/BouFe/xeugK/)

# c++ - 为什么 strlen (..) 不期望 const char* const str 而不是 const char*

> ID：11674237
> 
> 赞同：3
> 
> 时间：2012-07-26T16:55:22.013
> 
> 标签：c++, string

我在读这个：[const char * const vs const char *?](https://stackoverflow.com/questions/4949254/const-char-const-versus-const-char)

在 中`string.h`，[strlen](http://www.cplusplus.com/reference/clibrary/cstring/strlen/)定义为：

```
size_t strlen ( const char * str ); 
```

如果我理解正确，strlen 需要一个指向 const 字符的指针。不应该是：

```
size_t strlen ( const char* const str ); 
```

这将确保 strlen 不能修改指针以指向不同的指针？

或者，是不是这样：

由于 str 指针将按值传递给 strlen，因此函数中对该指针的任何更改都不会更改源指针，因此没关系..

??

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-26T16:56:11.000

如果你真的阅读了那个讨论，你应该明白第二个`const`对函数的外部行为没有影响。对于你，用户来说，不管是声明还是参数`strlen`，都没有任何区别。正如您正确指出的那样，可能对指针进行的任何修改都只会影响内部指针的内部本地*副本*。无论参数是否以 second 声明，您传递给的参数指针都将保持不变。（您的参数指针甚至不必是左值。）`const char *``const char *const``strlen`*`strlen``strlen``const`*

 *第二个`const`只会影响函数内部局部参数变量的内部行为，防止作者*修改*`strlen`该局部变量。他们是否想以这种方式限制自己，非正式地说，是他们自己的事。它不`strlen`以任何方式关注用户。

事实上，由于顶级`const`限定符对函数类型没有影响，因此通常可以使用参数*声明*一个函数，`const char *`然后使用参数*定义*它`const char *const`。编译器（链接器）仍会将这些声明视为“匹配”。这意味着如果库作者如此需要，他们实际上可以`strlen`使用`const char *const`参数进行定义。他们根本没有告诉你，因为这实际上是一个实现细节，或者`strlen`，即你不需要知道的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T16:58:04.983

> 由于 str 指针将按值传递给 strlen，因此函数中对该指针的任何更改都不会更改源指针，因此没关系..

是的。这只是对函数内部处理的限制。

> 这将确保 strlen 不能修改指针以指向不同的指针？

不需要，指针是按值传递的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-26T17:06:21.710

> size_t strlen ( const char* const str );
> 
> 这将确保 strlen 不能修改指针以指向不同的指针？

您自己解释了原因：*strlen 无法修改指针*...。

它不必要地对参数施加了限制，该参数可用于*在修改指针本身时*计算长度，如：

```
 size_t len = 0;
 while(*str)
 {
   ++len;
   ++str; //error if `const char *const str` is used!
 } 
```

请参阅`strlen()`在[glibc](http://www.stdlib.net/%7Ecolmmacc/strlen.c.html)中修改指针本身的实现：通过将其分配给*可修改*的指针类型。

另请参阅[OpenBSD](http://www.openbsd.org/cgi-bin/cvsweb/src/lib/libc/string/strlen.c?rev=1.7;content-type=text%2Fplain;only_with_tag=MAIN)库实现：

```
size_t strlen(const char *str)
{
    const char *s;

    for (s = str; *s; ++s)
        ;
    return (s - str);
} 
```

如果是类型，这里`s=str`会出错！`str``const char * const`*

# c# - 在给定起点、终点和圆心（圆）点的情况下找到弧的中点

> ID：11674239
> 
> 赞同：4
> 
> 时间：2012-07-26T16:55:27.543
> 
> 标签：c#, trigonometry

我正在寻找有关如何找到弧线中点的帮助。我有起点和终点、圆心和半径。我在网上到处搜索，找不到可以在任何地方转换成代码的答案。如果有人有任何想法，请告诉我。下图是我试图找到的（假设已经找到了圆心）。

![找到中点？](../Images/6deba1619c3af78803658913a62e54d1.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T18:23:37.030

x1,x2 的平均值和 y1,y2 的平均值的 Atan2() 为您提供到中点的角度。因此，圆弧的中点为：

```
double c=Math.Atan2(y1+y2, x1+x2);
double x_mid=R*Math.Cos(c);
double y_mid=R*Math.Sin(c); 
```

请注意，我从 Atan2 的两个参数中删除了 1/2 因子（平均值），因为这不会改变角度。

**更新：**此方法将始终在周长上两点之间的最短弧上找到中点。这可能是也可能不是你需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-21T23:23:05.910

尽管此函数返回一个近似点，但它对于实际目的很有用。我自己想出了这个，效果很好。

先决条件：
- 此处假设圆弧中心为 (0, 0)，尽管可以将其修改为使用圆心参数
- 您必须知道圆弧开始的角度（例如 270）
- 您必须知道测量值圆弧的角度（例如 90 度）

下面的代码是用 Objective-C 编写的：

```
#define   DEGREES_TO_RADIANS(degrees)  ((M_PI * degrees)/ 180)
- (CGPoint)getApproximateMidPointForArcWithStartAngle:(CGFloat)startAngle andDegrees:(CGFloat)degrees {

CGFloat midPointDegrees = fmodf(startAngle + degrees / 2, 360);
CGFloat midStartAngle = midPointDegrees - .1f;
CGFloat midEndAngle = midPointDegrees + .1f;

UIBezierPath *midPointPath = [UIBezierPath bezierPathWithArcCenter:CGPointMake(0, 0) radius:self.radius startAngle:DEGREES_TO_RADIANS(midStartAngle) endAngle:DEGREES_TO_RADIANS(midEndAngle) clockwise:YES];

CGRect midPointPathFrame = CGPathGetPathBoundingBox(midPointPath.CGPath);
CGPoint approximateMidPointCenter = CGPointMake(CGRectGetMidX(midPointPathFrame), CGRectGetMidY(midPointPathFrame));
return approximateMidPointCenter;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T18:12:49.910

取终点。

```
(x1, y1), (x2, y2) 
```

围绕圆心对它们进行标准化。然后转换为极性。

```
(r, theta1), (r, theta2) 
```

半径将是相同的。圆弧的中心是

```
(r, (theta2 + theta1) / 2) 
```

转换为笛卡尔坐标并添加中心的坐标。

编辑：是这样的：

```
def Point CenterOfArc(Point start, end, center)
    let (x1, y1) = (start.x - center.x, start.y - center.y)
    let (x2, y2) = (end.x   - center.x, end.y   - center.y)

    let (r1, theta1) = (sqrt(x1^2 + y1^2), atan(y1/x1))
    let (r2, theta2) = (sqrt(x2^2 + y2^2), atan(y2/x2))
    if (theta1 > theta2) theta2 += 2 * pi

    let (r, theta) = ((r1 + r2) / 2, (theta1 + theta2) / 2) // averaging in case of rounding error

    let (x, y) = (r * cos(theta), r * sin(theta))

    return (x + center.x, y + center.y)
end 
```

EDIT2：当您转换为极坐标时，您需要确保 theta2 > theta1，否则就好像弧是向后的。

EDIT3：另外，`tan<sup>-1</sup>(y/x)`是正确的操作，但对于许多语言，您应该将其称为`atan2(y, x)`而不是`atan(y/x)`. `atan2`专为此用途而设计，它在 x=0 时避免了错误，并且可能会给出更准确的结果。

# javascript - 在 emberjs 中执行此操作的正确方法

> ID：11674247
> 
> 赞同：0
> 
> 时间：2012-07-26T16:56:18.887
> 
> 标签：javascript, ember.js, ember-old-router

那么单击操作是否应该转到路由器上的一个方法说“showPropertyPanel”，并且在此页面显示路由上将路由器置于 showProperties 状态？然后设置属性插座。

它是否正确？
问题是我不希望路由从 /pages/1234 更改为 /pages/1234/showproperties

这是现在通过路由器更改状态的所有操作的正确方法吗？您可以将有和没有路线的状态混合在一起吗？

在我只是在 PageView 上触发一个事件以创建属性面板并显示它等之前。

请有人可以在这方面给我一些帮助，因为我确定我不是目前唯一一个为此苦苦挣扎的人吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T17:43:02.207

状态上的事件处理程序不必进入新状态即可显示面板。它可以，但不是必须的。这是一种关于如何处理此类事情的架构决策。如果面板启动时可能会发生复杂的事情，您可能需要一个新状态来处理可能源自面板的所有事件。

另一方面，你可以做你以前做的事情，但是在路由器中而不是直接在视图上做。

关于路线问题，你不能做

`route: "/",`

在面板状态上保持与以前相同？

# objective-c - if 语句 obj-c 零输入

> ID：11674251
> 
> 赞同：0
> 
> 时间：2012-07-26T16:56:22.603
> 
> 标签：objective-c, if-statement, zero

这是代码。

```
 int main(int argc, const char * argv[])
    {

        @autoreleasepool {

            int x,y;
            //BOOL divsibleYESOrNo;

            NSLog(@"enter two number for test it\n");
            scanf("%i %i",&x,&y);

            if ( x%y ==0 ) {

                NSLog(@"YES,it can be");
            }

            else if (x%y !=0) {
                NSLog(@"no there cant.");
            }
            else 
                NSLog(@"zero is not allow");
        }
        return 0;
    } 
```

此代码无法检测用户是否输入了两个零。如何修改可以检测输入值为零的代码？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T17:05:37.607

任何 % 0 都是未定义的，因此您需要在其他 if 语句之前添加对 y == 0 的检查。它必须是第一个 if 语句才能确保它被评估；否则您的其他陈述之一将首先错误地捕获它。

```
if ( y == 0 ) {
    NSLog(@"zero is not allowed.");
}
else if ( x%y == 0 ) {
    NSLog(@"YES,it can be");
}
else {
    NSLog(@"no there cant.");
} 
```

# selenium - Selenium Webdriver sessionId 或检查所有浏览器窗口是否关闭

> ID：11674254
> 
> 赞同：2
> 
> 时间：2012-07-26T16:56:28.337
> 
> 标签：selenium, webdriver

有没有办法查看是否所有的浏览器窗口都关闭了？我看到如果您在 WebDriver 上调用 driver.quit() 或 driver.close()，则 sessionId 变为空。有没有办法检查？

我不想调用已关闭或退出的驱动程序，因为它会引发 WebDriverException。所以我想在继续之前检查浏览器的状态。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T12:02:04.840

刚设置

```
driver=null; 
```

每次你退出浏览器，然后检查

```
if (browser!=null){
  //Attention: this comand is not supported
  //as far as i know ;)
  driver.doSomething();
} 
```

或者

```
try{

}catch (NullPointerException e)

    e.printStackTrace();
    System.err.print"DAMN";
} 
```

或收到 NullPointerException ;)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-04T14:32:49.203

```
public bool InstanceExist
    {
        get
        {
            if (Instance != null)
            {
                try
                {
                    return (Instance.WindowHandles != null); // allways returns true if browser instance exist or thrown error
                }
                catch (Exception e)
                {
                    return false;
                    // means that browser was closed by user
                }
            }
            return false; // means that it wasn't created yet or was closed by developer programmally
        }
    } 
```

你需要检查3种情况：

1.  未创建驱动程序
2.  驱动程序被开发商关闭
3.  浏览器已被用户关闭，但 driwer 实例仍然存在

使用此代码检查所有这些情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-11T21:41:06.670

我认为检测是否所有窗户都关闭的最干净的方法是：

```
boolean allWindowsClosed = webDriver.getWindowHandles().isEmpty(); 
```

getWindowHandles 为所有打开的窗口返回一组窗口句柄 - 请参阅[http://selenium.googlecode.com/git/docs/api/java/org/openqa/selenium/WebDriver.html#getWindowHandles()](http://selenium.googlecode.com/git/docs/api/java/org/openqa/selenium/WebDriver.html#getWindowHandles())

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-18T16:27:18.397

实际上在浏览器窗口消失时调用 getWindowHandles 会引发“UnreachableBrowserException”。

您必须将调用放入 try-catch 块并处理该错误。实际上，这是捕获意外浏览器窗口关闭的唯一已知工作方法。我在配置类中有一个静态方法来处理我的驱动程序：我像这样重新启动浏览器：

```
protected static void loadPages() {

    if (driver == null || driver.toString().contains("null"))  { //null refers to an missing session id

            driver = new FirefoxDriver();

        //load all my page objects like
        loginpage = new LoginPage(driver);
        //....
        //....

        }
try {
        if (driver.getWindowHandles() == null || driver.getWindowHandles().isEmpty()){ //will cause an UnreachableBrowserException if the browser really is not avalable. 
            try { //you actually dont need this try catch block 
                driver.quit();
            } catch (Exception e) {
                System.err.println("Quitting levtover driver did not work.");
            }
            driver = null; //you have to set the driver to null
            loadPages();
            }
    } catch (UnreachableBrowserException ube) {
        driver = null; //like above set to null to make sure no driver left
    } 
```

}

现在，您当前的测试将失败，但您将能够继续进行其余测试。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-16T20:39:06.740

在 C# 中

```
 public void BrowserCheck()
    {
        try
        {
            var h = webDriver.WindowHandles;
            return; // no problem
        }
        catch // browser window is closed so re-init it
        {
            webDriver.Quit();
            WebDriverInit(); // your init code 
        }
    } 
```

# api - 函数系统.bytescopy

> ID：11674256
> 
> 赞同：0
> 
> 时间：2012-07-26T16:56:31.540
> 
> 标签：api, actionscript, haxe

我一直在寻找这个函数，但没有找到任何关于它的作用的参考，所以我想知道你们中是否有人能告诉我它接收到什么和功能。

我正在复制的功能是这样的：`System.bytescopy(buffer, cutsize*8, buffer, 0, (bufend-cutsize)*8);`但我不知道它做了什么以及收到了什么。

我必须将此函数（从 haxe）复制到 actionscript 代码，因为我正在修复一个可能帮助我开发所需内容的代码。请帮忙！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T12:45:12.453

`System.bytescopy`不是 Haxe 的原生功能。也许你指的是[这个](https://github.com/francois2metz/WavPlayer/blob/master/System.hx)。

# ios - 加载 30 多张图片后 iPad 应用程序崩溃

> ID：11674258
> 
> 赞同：0
> 
> 时间：2012-07-26T16:56:35.983
> 
> 标签：ios, image, crash, uiimageview

使用以下代码在图像视图中快速加载 30 多个图像后，ipad 崩溃并重新启动是否有原因：

```
else if([webData isEqualToString:@"ppt33"]){
    if(movieisplaying == @"yes"){
        UIImage *image = [UIImage imageNamed: @"33.png"];
        [imageView setImage:image];
        [moviePlayerController stop];
        [moviePlayerController.view removeFromSuperview];
        movieisplaying = @"no";
    }
    else{
        UIImage *image = [UIImage imageNamed: @"33.png"];
        [imageView setImage:image];

    }
} 
```

编辑：崩溃错误 - **2012-07-26 13:48:55.172 Stream[5554:707] 收到内存警告。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T18:00:34.680

是否所有图像和视频都在使用/可见？从警告看来，您可能超出了为您的应用分配的内存。

这个问题似乎是相关的，虽然没有详细说明如何销毁未使用的图像，但[收到了内存警告。](https://stackoverflow.com/questions/4018456/received-memory-warning)我想说当你加载什么图像时要聪明一点，如果你不再使用它，然后释放它。视频也是如此。希望有帮助！

编辑：你可以做这样的事情：

```
NSMutableArray * imageArray;

imageArray = [[NSMutableArray alloc] init];

UIImage *oneImage = [UIImage imageNamed: @"33.png"];
[imagesArray addObject:oneImage];
[oneImage release];
//Add the remaining images, could probably turn this into a for loop 
```

或者，在您试一试之前，您可以尝试`[image release]`在您提供的 else 语句中的所有内容之后执行。

# mysql - 在 mysql 上对数百万行执行 SUM() 和 GROUP BY

> ID：11674260
> 
> 赞同：0
> 
> 时间：2012-07-26T16:56:42.227
> 
> 标签：mysql, database, performance

我有这个查询，每个请求只运行一次。

```
SELECT SUM(numberColumn) AS total, groupColumn
FROM myTable
WHERE dateColumn < ? AND categoryColumn = ?
GROUP BY groupColumn
HAVING total > 0 
```

`myTable`有不到十几个列，可以增长到 500 万行，但在生产中更可能是 200 万行。查询中使用的所有列都是数字，除了，并且在和`dateColumn`上有索引。`dateColumn``categoryColumn`

如果数据库得到适当优化，期望这个查询在大多数现代服务器上运行 500 万行，在 5 秒内运行是否合理？

我问的原因是我们没有 500 万条数据，我们甚至不会在未来几年内达到 200 万条，如果查询没有在 5 秒内运行，那么很难知道在哪里问题出在哪里。会不会是查询不适合大表，或者数据库没有优化，或者服务器不够强大？基本上，我想知道使用`SUM()`and `GROUP BY`over a large table 是否合理。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T17:16:58.867

正如您问题下评论中的人们所建议的那样，最简单的验证方法是生成随机数据并测试查询执行时间。请注意，在 dateColumn 上使用聚集索引会显着改变执行时间，因为在“<”条件下，仅检索连续磁盘数据的子集以计算总和。

如果您正处于开发过程的开始阶段，我建议您不要专注于收集数据的表和索引的结构 - 而是您希望将来需要从表中检索什么。我可以分享我自己的经验，向网站管理员展示网络使用统计数据。我从服务器请求了几个网页，每个网页都属于更多“类别”。我的第一种方法是使用一些索引在日志表中收集每个请求，但是该表比我最初估计的要大得多。:-) 由于统计数据在固定组（每周、每月和每年）中进行分析，我决定创建一个附加表，用于在预定义的周/月/年组中聚合请求。每个请求都会增加相关列 - 列指的是我的“类别”。这打破了一些规范化规则，但让我可以在眨眼间计算出统计数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T17:07:11.377

一个重要的问题是 dateColumn < ? 健康）状况。我猜它正在过滤过时的记录。表中有多少记录并不重要。重要的是这种情况减少了多少记录。

按日期进行积极过滤并结合按日期对表进行分区可以在非常大的表上为您提供惊人的性能。

附带说明一下，如果您不希望在未来的许多年中获得这么多数据，请不要费心解决它。届时，您的业务需求可能会发生十几次变化，包括架构、数据库布局、设计和实现细节。提前计划很好，但有时您希望尽快提供足够好的解决方案并在下一个版本中处理未来的痛苦问题。

# php - 为什么我的 PHP 会话不断清除？

> ID：11674261
> 
> 赞同：0
> 
> 时间：2012-07-26T16:56:43.003
> 
> 标签：php, session, sessionid

在网上阅读了很多关于会话安全的内容后，我正在编写一个 PHP 登录脚本。但是，我遇到了一个问题，即页面之间的会话信息不一致。我正在使用的一种方法可能涉及我忽略的一种行为，但我并不完全是 PHP 或会话专家。我遇到问题的代码在`head`每个页面中调用的会话启动函数中：

```
//Setup the session
session_name('CPI_SESSION');
session_set_cookie_params(0, '/', $_SERVER['SERVER_NAME'], (isset($_SERVER['HTTPS']) ? $_SERVER['HTTPS'] : true), true); 
//Start the session
session_start();

print_r($_SESSION);
echo '<br/>';
if(!isset($_SESSION['session_init']))
{
     session_regenerate_id(true);
     $_SESSION['session_init'] = true;

     print_r($_SESSION);
} 
```

[我在这里](http://phpsec.org/projects/guide/4.html)读到的我正在使用的方法。我唯一修改的是`session_regenerate_id`删除旧会话，这是我想要的行为。然而，我得到了意想不到的结果。我得到的`echo`看起来像这样：

> 数组 ( )
> 数组 ( [session_init] => 1 )

从每一个`print_r`分别。因此，每次调用该函数时，出于某种我不知道的原因会话是空的，这会导致它重新生成 id 并清除已经为空的会话，然后设置`session_init`. 如果我刷新页面，`session_init`应该仍然保存，但它不是。这会导致它再次做同样的事情。为什么是这样？我试过注释掉`session_name`，`session_set_cookie_params`但没有任何区别。

我使用 Apache 2.2 服务器和 PHP 5.3 在本地运行它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T20:04:55.367

这似乎是会话生命周期的问题。`[session_set_cookie_params](http://www.php.net/manual/en/function.session-set-cookie-params.php)`将会话持续的秒数作为第一个参数。在您的代码中，它设置为 0。尝试像这样将其更改为更高的数字。

```
<?php
//Setup the session
session_name('CPI_SESSION');
// set session time to 4 hours
session_set_cookie_params(3600*4, '/', $_SERVER['SERVER_NAME'], (isset($_SERVER['HTTPS']) ? true : false), true);      
//Start the session
session_start();

print_r($_SESSION);
echo '<br/>';
if(!isset($_SESSION['session_init']))
{
     session_regenerate_id(true);
     $_SESSION['session_init'] = true;

     print_r($_SESSION);
}
?> 
```

# actionscript-3 - 从 AIR 3 执行媒体文件

> ID：11674262
> 
> 赞同：0
> 
> 时间：2012-07-26T16:56:43.130
> 
> 标签：actionscript-3, video, air, media

我知道，从 AIR 2.0 开始，可以像这样执行应用程序 (.exe)：

```
if(NativeProcess.isSupported)
{
    var file:File = File.desktopDirectory;
    file = file.resolvePath("StyleLookupold.exe");

    var nativeProcessStartupInfo:NativeProcessStartupInfo = new NativeProcessStartupInfo();
    nativeProcessStartupInfo.executable = file;
    var process:NativeProcess = new NativeProcess();

    process.start(nativeProcessStartupInfo);

} 
```

但是可以在系统的默认播放器中打开视频吗？例如，使用命令行参数执行 Windows Media Player 作为要播放的视频的路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T17:09:42.533

[http://cookbooks.adobe.com/post_Open_file_with_Default_Application_AIR_2_0-16745.html](http://cookbooks.adobe.com/post_Open_file_with_Default_Application_AIR_2_0-16745.html)对 AIR 2 及更高版本中可用的 File 对象使用 openWithDefaultApplication 方法。

# groovy - 如何对递归函数进行基准测试？

> ID：11674266
> 
> 赞同：4
> 
> 时间：2012-07-26T16:56:53.330
> 
> 标签：groovy, benchmarking

我正在使用[GBench](http://code.google.com/p/gbench/)。它对于普通方法基准测试非常有用。现在我想要的是对递归函数进行基准测试。

可以说我有：

```
def recursive() {
  //do something
  return recursive()
} 
```

对于这个功能，我需要做基准测试。`@Benchmark`在方法顶部添加一个为每个递归调用提供基准。但我想要的是获得整个`recursive`方法的基准。

有可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T17:05:08.700

从不同的非递归函数对递归函数进行初始调用，并对非递归函数进行基准测试。

# jquery - 如何使用 Pixastic？

> ID：11674269
> 
> 赞同：1
> 
> 时间：2012-07-26T16:57:05.450
> 
> 标签：jquery, pixastic

我正在尝试使用[Pixastic 插件](http://www.pixastic.com/lib/docs/actions/blend/)混合两个图像- 这是[我的代码](http://jsfiddle.net/tara_irvine/vQLSH/20/)。

这些图像将是动态的，我不确定为什么测试不起作用。我可能做错了什么，因为我认为我没有正确编码。这是否必须与 jQuery 插件一起使用？

有人可以解释一下如何让混合模式在两张图像上工作，其中一张是未知的，但 ID 是固定的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-28T15:48:55.117

1.  您加载的第二张图像正在检索 404。这意味着那里有任何图像。
2.  您的外部库（pixastic.core.js、blend.js）也在检索 404 状态。
3.  您必须在 javascript 的第二行获取图像元素。

    var img = new Image(); img = document.getElementById("userImage");

# android - Android：在片段中更改 layout.xml

> ID：11674270
> 
> 赞同：2
> 
> 时间：2012-07-26T16:57:10.130
> 
> 标签：android, android-fragments, fragment

我有两个并排的片段。当我对左侧片段执行操作时，我希望右侧片段发生变化。只要正确片段的 layout.xml 没有更改，它就可以工作。我想要的是定义一些布局，例如layout1.xml、layout2.xml 等等，根据左边发生的情况，应该显示这些布局之一。我找到了[http://developer.android.com/guide/components/fragments.html#Transactions](http://developer.android.com/guide/components/fragments.html#Transactions)但我不确定这是否是正确的方法。如果不是正确的方法是什么？如果是我有点挣扎

```
transaction.replace(R.id.fragment_container, newFragment); 
```

我需要告诉newFragment 它现在有例如layout27.xml。我怎样才能做到这一点？

**编辑：**

我的 main.xml 看起来像这样

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<fragment class="com.whatever.OverviewFragment"
    android:id="@+id/list"
    android:name="com.whatever.OverviewFragment"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_weight="1" />

    <fragment class="com.whatever.DetailFragment"
    android:id="@+id/listB"
    android:name="com.whatever.DetailFragment"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_weight="1" />

</LinearLayout> 
```

第二个片段应该在用户操作上交换，对于 listB，我可以说 5 个不同的 layout.xml 文件。

DetailFragment.java 看起来基本上是这样的：

```
public  class DetailFragment extends Fragment {
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, 
            Bundle savedInstanceState) {
        return inflater.inflate(R.layout.details, container, false);
    }

    //this is called when I do an action in the other fragment
    public void setScreen(int id) {
        //This fragment is one of the 5 possible fragments
        DetailFragment2 newF = new DetailFragment2();
        FragmentTransaction transaction = getFragmentManager().beginTransaction();
        transaction.replace(R.id.listB, newF);
        transaction.addToBackStack(null);
        transaction.commit();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-18T05:35:45.393

我使用片段参数做类似的事情来传递要选择的布局

片段 1（对照）

```
Bundle data = new Bundle();
data.putInt("LayoutChoice",i); // i chooses which layout to use on fragment 2
Fragment f = new Fragment2();
f.setArguments(data);
fragmentTransaction.replace(R.id.fcontainer, f); 
```

片段 2（显示）

```
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

    switch( getArguments().getInt("LayoutChoice") ) {
    case 1:
        rootView = inflater.inflate(R.layout.layout1, container, false);
        break;
    case 2:
        rootView = inflater.inflate(R.layout.layout2, container, false);
        break;
    } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-26T17:49:30.270

所以你可以做的是使用片段事务管理器和 myabe 某种事件（让我们假设一个按钮单击事件）你改变你希望片段看起来的方式。

对于我的代码，我有一个选项卡单击它加载了一个新片段，所以我所做的就是用新片段替换旧片段。

```
 RSSFragment rssfrag = new RSSFragment();
        FragmentManager fmi = getSupportFragmentManager();
        FragmentTransaction ftu = fmi.beginTransaction();
        ftu.replace(R.id.frame_fragment, rssfrag).addToBackStack(null).commit(); 
```

RSSFragment 是我正在调用的一个类，然后使用 FragmentManager 和 FragmentTransaction 来替换片段。所以你可以为任何你想要的片段充气

# c# - 从文件目录添加 WSDL 文件

> ID：11674271
> 
> 赞同：12
> 
> 时间：2012-07-26T16:57:10.317
> 
> 标签：c#, visual-studio, web-services, wsdl

我有 WSDL 文件需要作为 Web 引用添加到我的项目中。它们位于`.wsdl`我的本地目录中的扩展名中。我从来没有像这样添加它们，所以我不确定如何将它们添加为网络参考。

我一直找不到有用的东西。有任何想法吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-26T17:02:56.093

> 1.  右键单击项目并选择添加 Web 参考
>     
>     
> 2.  在 URL File://test.xsdl 上的对话框中键入

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-02-04T08:19:23.997

没有答案对我来说是准确的，但是对于 VS2019，要添加 wsdl 文件作为服务参考，我右键单击项目 -> 添加 -> 连接的服务 -> Microsfot WCF Web 服务参考 -> 浏览 .wsdl 文件。这将生成调用引用服务的代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-26T17:06:07.757

右键单击项目，单击“添加服务引用”。添加 WSDL 文件的路径。它将生成代码来为您调用服务。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-05T12:02:01.800

要将 wsdl 文件添加为服务引用，请右键单击项目，然后添加、连接服务和 Microsfot WCF Web 服务引用。选择你想要的 .wsdl 文件，如果 wsdl 没有错误，就会为你生成调用服务的代码。

这也很有帮助： [如何使用 WSDL](https://stackoverflow.com/questions/1302525/how-to-use-a-wsdl)

# postgresql - PostgreSQL 是否像 Oracle 一样缓存 Prepared Statements

> ID：11674273
> 
> 赞同：8
> 
> 时间：2012-07-26T16:57:18.600
> 
> 标签：postgresql

在与 Oracle 合作了几年后，我刚刚搬到了 PostgreSQL。我一直在使用 PostgreSQL 数据库研究应用程序（Java、JDBC）中准备好的语句的一些性能问题。

Oracle 在其 SGA 中缓存准备好的语句 - 准备好的语句池在数据库连接之间共享。

PostgreSQL 文档似乎没有表明这一点。这是文档中的片段（[https://www.postgresql.org/docs/current/static/sql-prepare.html](https://www.postgresql.org/docs/current/static/sql-prepare.html)） -

> 准备好的语句仅在当前数据库会话期间持续。当会话结束时，准备好的语句被遗忘，因此必须重新创建它才能再次使用。这也意味着单个准备好的语句不能被多个同时的数据库客户端使用；但是，每个客户都可以创建自己的准备好的语句来使用。

我只是想确保我理解这一点是正确的，因为对于数据库来说，实现某种常用的准备好的语句的公共池似乎是非常基本的。

如果 PostgreSQL 不缓存这些，则意味着每个需要大量数据库事务的应用程序都需要开发某种可以跨连接重用的准备好的语句池。

如果您以前使用过 PostgreSQL，我将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-26T18:18:57.773

是的，你的理解是正确的。通常，如果您有一组准备好的非常关键的查询，那么您会让应用程序调用一个自定义函数来在连接时设置它们。

这个 afaik 有三个主要原因：

1.  有一个很长的待办事项列表，当开发人员有兴趣/付费解决它们时，它们就会完成。大概没有人认为它值得资助或想出一种有效的方法来做到这一点。

2.  PostgreSQL 在比 Oracle 更广泛的环境中运行。我猜想 99% 的已安装系统不会从中受益。有很多设置没有高事务性能要求，或者 DBA 需要注意它是否需要。

3.  计划的查询并不总是能带来胜利。在延迟计划/使缓存无效以提供与实际数据和查询参数尽可能好的匹配方面已经做了大量工作。

我怀疑添加此类内容的最佳位置是在其中一个连接池（pgbouncer/pgpool）中，但上次我检查时没有这样的功能。

高温高压

# php - JS 或 PHP 将前导零添加到小数

> ID：11674275
> 
> 赞同：2
> 
> 时间：2012-07-26T16:57:26.030
> 
> 标签：php, javascript, formatting, decimal

我有一个表单，我试图在某些输入字段中自动强制使用小数。基本上我希望用户不用担心格式，而只是让字段自己格式化 onBlur。

以下是我希望实现的一些示例：

1.) 如果用户输入“0.95”，则什么也不做，因为这是我最终要采用的最终格式。

2.) 如果用户输入“.95”，我希望字段 onBlur 更改为上述格式“0.95”。（同样，如果他们输入“.9”等）

我一直在互联网上彻夜寻找解决方案，所以这是我最后的手段！我能得到的任何帮助和反馈将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T17:00:59.147

这样的事情会做到这一点：

```
document.getElementById('amount').onblur = function() {
    if(this.value && !isNaN(this.value)) {        
        this.value = parseFloat(this.value).toFixed(2);
    } else {
        this.value = 0;
    }
}; 
```

[jsFiddle](http://jsfiddle.net/DYs7Y/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T17:20:40.097

这是简洁明了的：

```
function blurFormatDecimal (e) {
    var val = isFinite(this.value) ? +this.value : 0;
    this.value = val.toFixed(2);
}
myInput.onblur = blurFormatDecimal; 
```

使用`isFinite()`而不是`!isNaN()`因为`isNaN("Infinity")`返回`false`，但您当然不想接受`"Infinity"`作为有效输入。

[http://jsfiddle.net/gilly3/NjeQD/](http://jsfiddle.net/gilly3/NjeQD/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-18T04:01:05.200

如果您需要使用 PHP 执行此操作，请尝试： `$formattedAmount = sprintf("%05.2f",$amount);`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-27T02:54:41.127

这是php解决方案：

```
$formattedAmount = sprintf("%01.2f",$amount); 
```

# java - 未报告的异常 java.lang.exception

> ID：11674277
> 
> 赞同：0
> 
> 时间：2012-07-26T16:57:34.123
> 
> 标签：java, try-catch

未报告的异常 java.lang.exception ：必须被捕获或声明为抛出。为什么会出现这个问题？是否有一些简单的方法可以帮助解决这个问题？

我在我的java中应用这个代码..

```
public byte[] encrypt(String message) throws Exception {
    MessageDigest md = MessageDigest.getInstance("md5");
    byte[] digestOfPassword = md.digest("ABCDEABCDE"
                    .getBytes("utf-8"));
    byte[] keyBytes = Arrays.copyOf(digestOfPassword, 24);
    for (int j = 0, k = 16; j < 8;) {
            keyBytes[k++] = keyBytes[j++];
    }

    SecretKey key = new SecretKeySpec(keyBytes, "DESede");
    IvParameterSpec iv = new IvParameterSpec(new byte[8]);
    Cipher cipher = Cipher.getInstance("DESede/CBC/PKCS5Padding");
    cipher.init(Cipher.ENCRYPT_MODE, key, iv);

    byte[] plainTextBytes = message.getBytes("utf-8");
    byte[] cipherText = cipher.doFinal(plainTextBytes);
    // String encodedCipherText = new sun.misc.BASE64Encoder()
    // .encode(cipherText);

    return cipherText;
}

public String decrypt(byte[] message) throws Exception {
    MessageDigest md = MessageDigest.getInstance("md5");
    byte[] digestOfPassword = md.digest("ABCDEABCDE"
                    .getBytes("utf-8"));
    byte[] keyBytes = Arrays.copyOf(digestOfPassword, 24);
    for (int j = 0, k = 16; j < 8;) {
            keyBytes[k++] = keyBytes[j++];
    }

    SecretKey key = new SecretKeySpec(keyBytes, "DESede");
    IvParameterSpec iv = new IvParameterSpec(new byte[8]);
    Cipher decipher = Cipher.getInstance("DESede/CBC/PKCS5Padding");
    decipher.init(Cipher.DECRYPT_MODE, key, iv);

    byte[] plainText = decipher.doFinal(message);

    return new String(plainText, "UTF-8");
} 
```

错误显示在下面的部分

```
byte[] pass = encrypt(password);
String pw = new String(pass); 
```

任何想法？我使用 java netbeans 来做我的项目..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T16:59:32.493

你的`encrypt()`方法抛出一个`Exception`. 这意味着在您调用此方法的地方，您应该明确地抛出它`Exception`或使用`try-catch`块处理它。

在您的情况下，对于此特定代码：

```
byte[] pass = encrypt(password);
String pw = new String(pass); 
```

您应该将其包含在：

```
try{
 byte[] pass = encrypt(password);
 String pw = new String(pass);
}catch(Exception exe){
 //Your error handling code
} 
```

或声明包含此代码的方法`throws Exception`。

*   如果您不熟悉异常处理，请考虑阅读以下内容：[课程：Java 教程中的异常](http://docs.oracle.com/javase/tutorial/essential/exceptions/index.html)

*   此外，还有另一篇关于[“异常传播指南（Java 中）”的有趣读物](https://stackoverflow.com/questions/3551221/guidelines-on-exception-propagation-in-java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T17:16:55.153

**1.**有**两种处理异常的方法。**

```
 - Either `declare` it
 - or `Handle` it. 
```

**2.** `encrypt()`上面的方法**抛出异常**

**所以要么在你调用它的方法声明中声明它。**

**例如：**

```
public void MyCallingMethod() throws Exception{

     byte[] pass = encrypt(password);
     String pw = new String(pass);

} 
```

**或者用** `try/catch` **块处理它，** `finally` **是可选的**

```
try{

     byte[] pass = encrypt(password);
     String pw = new String(pass);
   }catch(Exception ex){

  } 
```

# java - GWT 使用 ImageResource 创建图像

> ID：11674279
> 
> 赞同：3
> 
> 时间：2012-07-26T16:57:40.990
> 
> 标签：java, image, gwt, gwt-2.4, clientresource

我的问题真的很简单。但希望我能有一个明确的答案。我们可以通过多种方式创建 GWT Image。

```
Image image = new Image ( (ImageResource)imageRes);

Image image = new Image ( (ImageResource)imageRes.getSafeUri() );

Image image = new Image ();
image.setUrl((ImageResource)imageRes.getSafeUri().asString() ); 
```

我的问题是：这三种使用 ImageResouce 创建新图像的方法有什么区别。第一次加载哪个最好或更快？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T17:14:10.007

首先，你不应该使用最后两个。

从`ImageResource`技术上讲，一个“精灵”图像中的区域表示：它具有精灵的 URL 和该图像上区域的坐标。在许多浏览器中，对于大多数图像，URL 实际上是一个`data:`URL，并且区域将代表整个图像。这可以使用`@ImageOptions(preventInlining=true)`您`set-property`的`gwt.xml`. 换句话说，您的代码不应依赖它，而应始终将`ImageResource`a 视为精灵图像中的一个区域。*仅供参考，默认情况下*
实际使用精灵图像的情况适用于不支持URL 的 IE6/7，以及太大而无法容纳在URL 中的图像（所有浏览器）。*`data:``data:`*

 *然而，这正是您在最后两种情况下所做的：仅使用 的 URL `ImageResource`，就好像它不是（可能）是精灵图像一样。*

# html - 重复身体背景图像下方的空白区域

> ID：11674281
> 
> 赞同：0
> 
> 时间：2012-07-26T16:57:57.873
> 
> 标签：html, css, image, background

我是编程世界的新手，一直在尝试学习更多。我正在使用静态 html i-frame 应用程序创建一个自定义 facebook 选项卡，并且在垂直重复正文背景图像时一直遇到问题。由于我无法弄清楚的原因，图像与重复图像之间有一个白色间隙。任何帮助将非常感激！

这是代码：

```
 body {
    background-image:url('http://i1187.photobucket.com/albums/z389/mawler023/FBTabBody.png');
    margin:0;
    padding:0;
    background-position:right top;
    background-attachment: fixed;
    background-repeat:repeat-y;
    width:810px; 
    color: #333333;
    font-family: Verdana, Geneva, sans-serif;
    }` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T17:03:48.087

您正在使用的图像 (http://i1187.photobucket.com/albums/z389/mawler023/FBTabBody.png) 顶部有一条白色带（粗略测量说它的高度约为 123 像素）。这将在每次重复时都会显示出来，从而导致您正在观察到的差距。

您只想修剪图像，它应该消除间隙。

如果你想在页面顶部有一个白色区域（但不是重复），你最好要么减少应用背景的区域，要么在顶部的元素上放置一个明确的白色背景。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T17:05:10.473

因为图像本身在顶部有一个巨大的空白

# c++ - 尝试遵循 Bucky 教程

> ID：11674282
> 
> 赞同：0
> 
> 时间：2012-07-26T16:58:00.367
> 
> 标签：c++

在遵循[此 Youtube 教程](http://www.youtube.com/watch?v=OVfUq2DPKKg)（请参阅下面的相关代码）时，我收到以下错误：

> 错误第 6 行
> 错误：预期的构造函数析构函数或类型转换之前'（'

什么可能导致此错误，我该如何解决？

```
#include <iostream>
#include <cmath>
#include <stdlib.h>
#include <time.h>
void myfun(int);//using own function
myfun(8);//pow(4.0,10.0)
using namespace std;
int main()
{
    double num1;
   srand(time(0));// to get a true random number
    double num2;
    num1 = pow(3.0, 9.0);//2 to the power of 4
    cout << num1 <<endl;
    num2 = rand() %100;//random number out of 100
    cout << "\nrandom number = " << num2 << endl ;

    return 0;
}
void myfun(int x)
{

    using namespace std;
    cout << "my favourite number is " << x << endl;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T16:59:13.740

这是一个声明：

```
void myfun(int);//using own function 
```

这是一个函数调用：

```
myfun(8);//pow(4.0,10.0) 
```

您不能在上下文之外调用函数。

试着把它移到里面`main`。你想达到什么目的？

```
int main()
{
    myfun(8);  //<---- here

    double num1;
    srand(time(0));// to get a true random number
    double num2;
    num1 = pow(3.0, 9.0);//2 to the power of 4
    cout << num1 <<endl;
    num2 = rand() %100;//random number out of 100
    cout << "\nrandom number = " << num2 << endl ;

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T17:20:17.930

正如 Luchian 所说，将函数调用移动到范围内 .. 在本例中为 main。我还有其他几点。请参阅以下代码。

```
 #include <iostream>
    #include <cmath>
    #include <stdlib.h>
    #include <time.h>

    void myfun(int);//using own function

    void myfun(int x)
    {
        std::cout << "my favourite number is " << x << std::endl;
    }

    int main()
    {
        double num1, num2;

        srand(time(0));// to get a true pseudo-random number
        num1 = pow(3.0, 9.0);//2 to the power of 4
        std::cout << num1 << std::endl;
        num2 = rand() %100;//random number out of 100
        std::cout << "\nrandom number = " << num2 << std::endl ;
        myfun(8);//pow(4.0,10.0)

        return 0;
    } 
```

几点：

*   通常认为在全球范围内做是一个坏主意*。*`using namespace std;`最好`std`根据需要附加到名称中，以避免混淆命名空间并避免名称冲突。
*   srand() 并没有真正生成真正的随机数 - 只是一个伪随机数。

# .net - Rational Team Concert 和 .Net 开发 - 管理二进制文件

> ID：11674284
> 
> 赞同：1
> 
> 时间：2012-07-26T16:58:05.997
> 
> 标签：.net, version-control, rtc

我们目前正在进行一个公司范围的项目，该项目将用 IBM Rational Team Concert 3.0 替换 IBM ClearCase 7.0.1。我们主要使用 Microsoft .NET 平台。

我对 RTC 源代码控制功能感到满意，但我想知道如何使用 RTC 管理二进制文件引用。这里的许多系统在二进制级别共享组件，我看不到在工具上管理这些引用的方法。

一些顾问建议我们使用与“源组件”平行的“二进制组件”（对于每个系统），我们将在其中存储已编译的二进制文件并将它们用作参考。

这是最好的方法吗？尊敬的 RTC 专家，请指教。

obs.: 到目前为止，我尝试在内部使用 NuGet 都失败了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T17:09:07.200

> 我们目前正在进行一个公司范围内的项目，该项目将取代 IBM ClearCase 7.0.1

我也是！

> 一些顾问建议我们使用“二进制组件”

谈到二进制管理，您有两个主题：

*   开发依赖：
    *   第三方二进制文件：开发*所需*的所有二进制文件并不总是发布的一部分。
    *   内部二进制文件（您应该依赖于其他项目的二进制文件，而不是重新编译它们的源代码）
*   发布管理：您正在投入生产的内容，即您正在“发布”（以一种或另一种方式）的所有 exe，以便 ITP（产品和发布管理团队）来获取所述二进制文件并将它们部署到生产

对于所有这些类型的交付，我建议*不要*将它们放入 RTC：它的“Jazz 源代码控制”组件仍然是*源*VCS。

[像Nexus](http://www.sonatype.org/nexus/)这样的外部“工件存储库” ，或者对于 .Net 项目，基于[NuGet](http://nuget.codeplex.com/)的引用（即使您到目前为止尝试不成功）更合适。

您可以在以下位置找到有关 Nexus 和 RTC 之间集成的更多详细信息：

^(您需要设置一个 Jazz 帐户)

*   [如何使用 Jazz SCM Provider for Maven？](https://jazz.net/wiki/bin/view/Main/UsingMavenScmPlugin)
*   [RTC 的 Maven SCM 插件扩展](https://jazz.net/jazz/web/projects/Rational%20Team%20Concert#action=com.ibm.team.workitem.viewWorkItem&id=90042)

[（都在这个线程](https://jazz.net/forum/questions/42145/integrating-with-nexus)中提到）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T17:18:04.620

如果源代码可用，我通常主张从源代码构建所有内容。否则，需要一个部署对象库（工件存储库）（例如，像 AntHillPro 所拥有的那样）。

# c# - 训练 tesseract 后应该在 tessdata 文件夹中包含哪些文件？

> ID：11674288
> 
> 赞同：2
> 
> 时间：2012-07-26T16:58:32.817
> 
> 标签：c#, image-processing, ocr, tesseract, tessnet2

我正在使用 tesseract 作为我的 ANPR 应用程序的 OCR 引擎。我已经用车牌字体训练了 tesseract 3.01v。但我需要知道：

1.  tessdata 文件夹中应包含哪些文件？
2.  我应该使用安装 tesseract 3.01v 的同一个 tessdata 文件夹吗？
3.  我已经使用 tesseract 3.01v 进行了培训，并且在我的代码中使用了 tessnet2，所以这会是一个问题吗？

以下是我尝试过的代码，但它不断退出 DoOcr() 方法。

```
List<tessnet2.Word> ocrText = new List<tessnet2.Word>();
tessnet2.Tesseract ocr = new tessnet2.Tesseract();
ocr.Init(@"C:\Program Files (x86)\Tesseract-OCR\tessdata", "eng", true);
ocrText = ocr.DoOCR(bmpGrayScale, new Rectangle(rect.X, rect.Y, rect.Width, rect.Height));

foreach (tessnet2.Word word in ocrText)
Console.WriteLine("{0} : {1}", word.Confidence, word.Text); 
```

有谁知道出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T04:31:06.600

“3.01 不向后兼容 2.04。数据文件不同。”

[http://code.google.com/p/tesseract-ocr/wiki/ReadMe](http://code.google.com/p/tesseract-ocr/wiki/ReadMe)

对于与 3.01 兼容的 .NET 库，请查看位于[http://code.google.com/p/tesseractdotnet/](http://code.google.com/p/tesseractdotnet/)或[https://github.com/charlesw/tesseract-ocr-dotnet](https://github.com/charlesw/tesseract-ocr-dotnet)的项目。

# c# - 如何从图片框中仅删除背景图像并保留我绘制的像素？

> ID：11674289
> 
> 赞同：0
> 
> 时间：2012-07-26T16:58:32.273
> 
> 标签：c#

这是播放按钮代码：

```
private void btnPlay_Click(object sender, EventArgs e)
        {
            _files = new List<FileInfo>(); 
            _indx = 0;
            DirectoryInfo dir = new DirectoryInfo(filesForanimation);

            if (_files == null)
                _files = new List<FileInfo>();

            fi1 = dir.GetFiles("*.bmp");
            _files.AddRange(fi1);

            _files = _files.OrderBy(f => f.LastWriteTime).ToList();
            button14.ForeColor = Color.Red;
            button13.ForeColor = Color.Black;
            button12.ForeColor = Color.Black;
            timer3.Start();
            button13.Enabled = true;
            button13.Text = "Pause";
            button12.Enabled = true;
            trackBar1.Maximum = fi1.Length;
            trackBar1.Minimum = 0;
        } 
```

然后是计时器滴答事件：

```
private void timer3_Tick(object sender, EventArgs e)
        {
            try
            {
                Image iOLd = this.pictureBox1.Image;
                trackBar1.Value = _indx;
                label23.Text = _files[_indx].Name;

            if (checkBox1.Checked)
            {
                Image img = Image.FromFile(_files[_indx].FullName);
                this.pictureBox1.Image = img;
                this.pictureBox1.Image = null;
                pictureBox1.Refresh();
            }
            else
            {
                Image img = Image.FromFile(_files[_indx].FullName);
                this.pictureBox1.Image = img;
            }
            if (iOLd != null)
                // iOLd.Dispose();
                _indx++;

            if (_indx >= _files.Count)
            {
                _indx = 0;
                trackBar1.Value = 0;
            }
                timer3.Interval = Convert.ToInt32(numericUpDown1.Value); 
            }
            catch
            {

            }
        } 
```

和 checkBox 检查事件：

```
private void checkBox1_CheckedChanged(object sender, EventArgs e)
        {
            if (checkBox1.Checked) 
            {
                Graphics g = Graphics.FromImage(pictureBox1.Image);
                g.Clear(SystemColors.Control);
                pictureBox1.Invalidate();
            }
            else
            {
                pictureBox1.Load(fi[trackBar1.Value].FullName);
                pictureBox1.Invalidate();
            }
        } 
```

问题出在计时器滴答声中。我第一次尝试在 if (checkBox1.Checked) 里面我只做了 pictureBox1.Refresh(); 但是当点击播放按钮时，它会显示带有白色背景的大红色 X。所以我标记了 // 行：iOLd.Dispose(); 所以现在我只看到这些像素的图纸，但它们永远不会改变我猜出于某种原因它不会从硬盘加载新图像，因为它应该这样做它会不断地在同一个图像上移动。

所以我尝试在 if (checkBox1.Checked) 中做现在这样：

```
Image img = Image.FromFile(_files[_indx].FullName);
                    this.pictureBox1.Image = img;
                    this.pictureBox1.Image = null;
                    pictureBox1.Refresh(); 
```

但在这种情况下，trackBar 和计时器移动一次到图像编号 2 并停在那里而不做任何事情。

并且仅当复选框被选中时才会发生这种情况，如果它没有被选中并且在图片框中有像素并且背景图像工作正常。

**我修改了clear并缩短了问题**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T17:02:45.933

您不应该从非持久方法（例如检查更改事件）绘制到图形对象上。

您应该处理 PictureBox 的[Paint](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.paint.aspx)事件，以便在每次`PictureBox`需要刷新时（例如更改背景图像时）重新绘制您的图形。就目前而言，如果您也将窗口移动得足够多，您很可能会丢失图形。

例如：

```
pictureBox1.Paint += new System.Windows.Forms.PaintEventHandler(this.pictureBox1_Paint);

private void pictureBox1_Paint(object sender, PaintEventArgs e)
{
   Graphics g = e.Graphics;
   // draw your pixels here
} 
```

**注意**：图片框有用途也有问题，如果您想做自定义绘图，我建议您只在标准面板上绘图。

# java - 为什么在大约 10 个内核之后添加内核会减慢我的 Java 程序？

> ID：11674290
> 
> 赞同：4
> 
> 时间：2012-07-26T16:58:34.080
> 
> 标签：java, performance, scalability, multicore

我的程序使用如下所示的 fork/join 来运行数千个任务：

```
private static class Generator extends RecursiveTask<Long> {
    final MyHelper mol;
    final static SatChecker satCheck = new SatChecker();

    public Generator(final MyHelper mol) {
        super();
        this.mol = mol;
    }

    @Override
    protected Long compute() {
        long count = 0;
        try {
            if (mol.isComplete(satCheck)) {
                count = 1;
            }
            ArrayList<MyHelper> molList = mol.extend();
            List<Generator> tasks = new ArrayList<>();
            for (final MyHelper child : molList) {
                tasks.add(new Generator(child)); 
            }
            for(final Generator task : invokeAll(tasks)) { 
                count += task.join(); 
            }
        } catch (Exception e){
            e.printStackTrace();
        }       
        return count;           
    }
} 
```

我的程序大量使用第三方库来实现 isComplete 和 extend 方法。extend 方法也使用了本地库。就 MyHelper 类而言，任务之间没有共享变量或同步。

我使用来自 linux 的 taskset 命令来限制我的应用程序使用的内核数量。我通过使用大约 10 个内核（比如大约 60 秒）获得了最佳速度。这意味着使用超过 10 个内核会导致应用程序变慢，因此 16 个内核与 6 个内核在同一时间内完成（大约 90 秒）。

我更困惑，因为选定的核心 100% 忙（不时进行垃圾收集除外）。有谁知道什么会导致这样的减速？我应该在哪里解决这个问题？

PS：我也在 Scala/akka 和使用 ThreadPoolExecutor 中进行了实现，但结果相似（虽然比 fork/join 慢）

PPS：我的猜测是，在 MyHelper 或 SatCheck 的深处，有人越过了内存屏障（中毒缓存）。但是我怎样才能找到并修复或解决它呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T17:10:32.670

由于将线程/任务分配给不同的内核，可能会出现过载。另外，您确定您的程序是完全可并行化的吗？事实上，一些程序不能总是 100% 有效地使用所有可用的 cpu，并且调度任务所花费的时间可能会减慢程序的速度，而不是帮助它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T22:15:09.073

我认为您应该对`molList`（或`mol`）变量的大小使用阈值，以避免对太小的数据集进行分叉。

我一直在使用 fork/join 来了解框架，而我的第一个示例没有考虑到阈值。显然我的表现很糟糕。解决问题大小的适当限制就可以了。

为阈值找到正确的值需要您花一些时间尝试不同的值并查看性能如何变化。

因此，`if`在方法的最开始放置一个，`compute`如下所示：

```
@Override
protected Long compute() {
    if (mol.getSize() < THRESHOLD) //getSize or whatever gives you size of problem
         return noForkJoinCompute(mol); //noForkJoinCompute gives you count without FJ

    long count = 0;
    try {
        if (mol.isComplete(satCheck)) {
            count = 1;
        }
    ... 
```

# c# - 如何从网页下载所有链接的 mp3？

> ID：11674302
> 
> 赞同：0
> 
> 时间：2012-07-26T16:59:32.283
> 
> 标签：c#, winforms, download

如何从网页下载所有链接的 mp3？

示例 html

```
<a href=​"http:​/​/test.com/linkofmusic1.mp3" download=​"Song.mp3">​
<a href=​"http:​/​/test.com/linkosong2.mp3" download=​"music2.mp3">​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T17:12:00.567

您可以使用[HtmlAgilityPack](http://htmlagilitypack.codeplex.com/wikipage?title=Examples)获取所有带有 .mp3 扩展名的 href 链接

**例子：**

```
 HtmlDocument doc = new HtmlDocument();
 doc.Load("file.htm");

 List<string> mp3Links = new List<string();
 foreach(HtmlNode link in doc.DocumentElement.SelectNodes("//a[@href"])
 {
    if(link != null)
    {
      if(link["href"].EndsWith(".mp3"))
      {
        mp3Links.Add(link["href"].Value);
      }
    }
 } 
```

# android - Eclipse Android 模拟器不会启动

> ID：11674306
> 
> 赞同：15
> 
> 时间：2012-07-26T16:59:47.650
> 
> 标签：android, eclipse, ubuntu, opengl-es, adt

我已经在 ubuntu 11.10 上安装了带有 Eclipse android 插件（ADT）的 Eclipse 4.2。当我将“Hello World”项目作为 android 应用程序启动时，它根本不会启动！

ps -x > log.txt 启动模拟器后，输出：

```
1000      7221 20.0  0.6  16884  6908 ?        D    18:11   0:00 /home/tutakhail/android-sdks/tools/emulator-arm -avd AndroidBrowser -netspeed full -netdelay none 
```

从 shell 手动启动模拟器，我收到以下错误，不久之后模拟器启动但速度很慢。

```
emulator: ERROR: Could not load OpenGLES emulation library: libOpenglRender.so:    cannot open shared object file: No such file or directory
emulator: WARNING: Could not initialize OpenglES emulation, using software renderer. 
```

关于这里可能是什么问题的任何提示？也许与Ubuntu有关？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-27T23:38:33.380

原来解决方案是将 LD_LIBRARY_PATH 指向 /tools/lib 路径。下面对我有用。

➜ 工具文件 ../tools/lib/libOpenglRender.so ../tools/lib/libOpenglRender.so：ELF 32 位 LSB 共享对象，Intel 80386，版本 1 (SYSV)，动态链接，未剥离

➜ 工具导出 LD_LIBRARY_PATH=/home/xxxx/devel/android-sdk-linux/tools/lib:$LD_LIBRARY_PATH

➜ 工具 ./emulator-x86 -avd AtomX86 -gpu on -qemu -m 1024 -enable-kvm

模拟器：模拟器窗口不在视野范围内并被重新定位....

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-10T17:44:15.977

我猜它是一个影响最新版本 ADT 的错误，可能与 NVIDIA GPU 驱动程序有关。这个问题在这里讨论：

[https://groups.google.com/forum/?fromgroups#!topic/adt-dev/nlA07toW1fc](https://groups.google.com/forum/?fromgroups#!topic/adt-dev/nlA07toW1fc)

我发现至少可以让我执行我的应用程序直到发布永久解决方案的解决方法是，首先从 shell 启动模拟器，即使它抛出错误。之后，我右键单击并将我的项目作为“Android 应用程序”运行。模拟器确实令人惊讶地执行它们！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-23T08:08:40.197

我有类似的错误，我猜这个错误是由于缺少 libGL.so 引起的。

安装软件包 libgl1-mesa-dev；

```
sudo apt-get install libgl1-mesa-dev 
```

[资源](http://learnedstuffs.wordpress.com/2012/07/17/fixing-ubuntu-error-failed-to-load-libgl-so/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-02-06T03:21:28.050

I tried to use the Intel Hardware Acceleration in Ubuntu 12.04 for running emulators using KVM package. However I was getting the error, "*Failed to start RenderThread*". Installing the package **libgl1-mesa-dev** and reducing the **Device RAM Size** to **512** solved my problem. The emulator now is indeed atleast 10X faster. I hope this would help someone trying to emulate android devices in Ubuntu using Intel processor that supports Virtualizattion Technology.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-26T19:27:15.553

首先尝试从命令行运行**模拟器，看看是否一切顺利。**您可能需要添加以下选项：

```
-no-audio 
-gpu off 
```

我已经看到音频阻止模拟器在某些 Ubuntu 配置上启动。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-26T17:35:42.413

所以我想也许你没有正确安装所有东西。

您应该检查您是否按照以下步骤操作：http: [//www.wikihow.com/Install-Android-on-Ubuntu-Linux-With-Eclipse-Ide](http://www.wikihow.com/Install-Android-on-Ubuntu-Linux-With-Eclipse-Ide)

正确安装并设置 PATH 环境变量后。您还可以做的另一件事是尝试删除 AVD 模拟器并创建一个新的，然后再试一次。

我也在这里找到了你的问题：[https ://groups.google.com/forum/?fromgroups#!topic/adt-dev/nlA07toW1fc](https://groups.google.com/forum/?fromgroups#!topic/adt-dev/nlA07toW1fc)

您提出的问题并不具体，因此请尝试按照步骤操作。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-12-05T11:12:33.103

如果使用 eclipse，您必须在“Java Build Path”-> Libraries-> Android 4.4 ->“Native library location”中添加 Project-Properties 到 sdk/tools/lib 目录的路径。对我来说，这是“sdk 安装目录”/sdk/tools/lib”

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-12-27T08:33:39.983

以下命令在同样的问题上救了我的命

```
sudo apt-get install libgl1-mesa-dev 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-05-25T18:01:27.303

配置 ANDROID_HOME

> export ANDROID_HOME=//android-sdk-macosx
> export PATH=${PATH}:$ANDROID_HOME/tools:$ANDROID_HOME/platform-tools

并设置 LD_LIBRARY_PATH

> 导出 LD_LIBRARY_PATH="$ANDROID_HOME/emulator/lib64:$LD_LIBRARY_PATH"

运行 ARM 版本

> cd $ANDROID_HOME/emulator/
> ./emulator64-arm -avd Nexus_5X_ARM_22 -no-audio -gpu off

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-09-01T17:24:46.303

libOpenglRender.so 和其他必要的文件确实存在于 tools/lib64 中，而 avd 试图在 tools/lib 中找到它们 对文件和目录进行符号链接有帮助（在我的情况下）

```
ln -s ../lib64/qt qt
ln -s ../lib64/gles_mesa gles_mesa
ln -s ../lib64/libstdc++ libstdc++
ln -s ../lib64/lib64GLES_V2_translator.so lib64GLES_V2_translator.so
ln -s ../lib64/lib64emugl_test_shared_library.so lib64emugl_test_shared_library.so
ln -s ../lib64/lib64OpenglRender.so lib64OpenglRender.so
ln -s ../lib64/lib64GLES_CM_translator.so lib64GLES_CM_translator.so
ln -s ../lib64/lib64EGL_translator.so lib64EGL_translator.so 
```

（似乎是原始配置中的错误，因为在全新安装工作室/sdk 时会发生这种情况）

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-07-13T21:45:32.657

我通过安装 32 位 libGL 在我的 Red Hat Linux 64 位上解决了这个问题（它应该位于 /usr/lib/ 中）

```
 sudo yum install mesa-libGL.i686 
```

# css - 使用 css3 转换时如何使文本粘在图像上

> ID：11674307
> 
> 赞同：0
> 
> 时间：2012-07-26T16:59:48.167
> 
> 标签：css

为了显示转换，我使用了 jsfiddle，如何在转换时将粘性文本保留在图像上，现在文本是不变的，如何将文本也与图像一起转换

[http://jsfiddle.net/U9g3c/2/](http://jsfiddle.net/U9g3c/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T17:12:23.890

看到这个小提琴，在这里我插入了旋转和位置变化（带有`div.namehover`.

[http://jsfiddle.net/5r6mx/](http://jsfiddle.net/5r6mx/)

如果您将图像及其标题放在 a 中`<div>`并在此上执行所有旋转和重新定位的东西会更优雅`<div>`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T17:05:31.747

您只是在旋转图像。您还必须为`rotate`文本包装器设置一个 -class。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T17:11:17.487

将您的文本和图像放在一个共享的 div 容器中并旋转它。

# php - 警告：mysql_fetch_* 期望参数 1 是资源，布尔值给定错误

> ID：11674312
> 
> 赞同：5
> 
> 时间：2012-07-26T17:00:06.670
> 
> 标签：php, mysql

> **可能重复：**
> [如何修复此错误“mysql_fetch_assoc() 期望参数 1 是资源，给出的布尔值”？](https://stackoverflow.com/questions/5571907/how-to-fix-this-error-mysql-fetch-assoc-expects-parameter-1-to-be-resource-b)

*这是一个规范的答案，旨在解决这个非常常见的问题。与此错误消息有关的任何问题都应作为此错误消息的副本关闭。*

使用 MySQL 时，使用`mysql_fetch_array()`or时出现错误`mysql_fetch_assoc()`。错误信息是：

> mysql_fetch_array() 期望参数 1 是资源

或者

> mysql_fetch_assoc() 期望参数 1 是资源

# c# - 如何在 C# 中将 TreeNode 添加到具有多个名称和文本的 TreeNodeCollection

> ID：11674315
> 
> 赞同：0
> 
> 时间：2012-07-26T17:00:18.040
> 
> 标签：c#, treeview, nodes, treenode, treenodecollection

我想在我的树视图中添加一些带有子节点的节点，但是在如何添加节点时遇到问题，例如 ToolTipText。我想用 TreeNodeCollection 来做。有可能或者我怎么能改变我的代码？这是我的代码，其中所有节点都是根节点。

```
protected void CreateTreeView(TreeNodeCollection parentNode, int parentID, DataTable mytab)
        {
        foreach (DataRow dta in mytab.Rows)
        {
            if (Convert.ToInt32(dta["parent_id"]) == parentID)
            {
                String key = dta["id"].ToString();
                String text = dta["host_ip"].ToString();
                TreeNode tn = new TreeNode();
                tn.Name = dta["id"].ToString();
                tn.Text = dta["host_ip"].ToString();
                tn.ToolTipText = dta["description"].ToString();
                parentNode.Add(tn);

                TreeNodeCollection newParentNode = parentNode;
                CreateTreeView(newParentNode, Convert.ToInt32(dta["id"]), mytab);
            }
        }
    } 
```

调用代码：

```
CreateTreeView(treeView1.Nodes, 0, dt); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T10:41:40.497

如果有人遇到这个问题，这里是一个例子：

```
void add_tooltiptext(DataTable mytab)
    {
        try
        {

            foreach (DataRow nodes in mytab.Rows)
            {
                TreeNode[] found = treeView1.Nodes.Find(nodes["id"].ToString(), true);
                for (int i = 0; i < found.Length; i++)
                {
                    treeView1.SelectedNode = found[i];

                    treeView1.SelectedNode.ToolTipText = nodes["description"].ToString();
                }
            }

        }
        catch
        { }
    } 
```

# php - 如果我关闭错误报告，我不需要担心有人看到我的 SQL 表吗？

> ID：11674323
> 
> 赞同：0
> 
> 时间：2012-07-26T17:00:43.533
> 
> 标签：php, sql, report, xss, code-injection

如果我只是在我的网站上禁用错误报告，我是否可以避免任何人发现我的 SQL 数据库中的信息？

另外，这会完全防止 XSS 攻击吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T17:03:08.373

禁用错误报告从来都不是一个好主意。您应该禁用`display_errors()`和启用`log_errors()`.

[这也与XSS](http://en.wikipedia.org/wiki/Cross-site_scripting)无关。有助于对抗 XSS 的是使用[`htmlspecialchars()`](http://php.net/manual/en/function.htmlspecialchars.php).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T17:06:24.967

关闭错误报告是为了防止数据库注入/XSS 攻击，因为闭上眼睛是为了防止被抢劫。*没有什么*可以保护您免受攻击，例如实际检查您的代码并手动掩盖每个单独的安全风险（无论是黑名单`exec()`类型的命令，使用准备好的语句，超时，那些太多失败的尝试计数器，无论它可能是）。

# c# - 从应用程序配置文件中读取符号

> ID：11674327
> 
> 赞同：0
> 
> 时间：2012-07-26T17:00:52.610
> 
> 标签：c#, configuration-files

我正在使用我的 C# 应用程序（它是 Windows 服务）从配置文件中读取密码。我正在使用这些行：

```
private NameValueCollection appSettings = ConfigurationManager.AppSettings;
string password = appSettings["Password"]; 
```

配置看起来像：

```
<add key="Password" value="exam&ple" /> 
```

由于应用程序配置不正确，服务无法启动。如果我删除“&”，则该服务有效。我怎么能控制这个问题？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T17:04:08.977

您需要像这样在 app.config 中编码您的值

```
<add key="Password" value="exam&amp;ple"/> 
```

# c++ - C++这个函数有什么问题

> ID：11674331
> 
> 赞同：0
> 
> 时间：2012-07-26T17:01:00.790
> 
> 标签：c++

```
void webparser(const string siteurl,string filename)
{
    stringstream ss;
    ss << "lynx -dump '" << siteurl << "'" > filename;
    system(ss.str().c_str());
} 
```

在上面的示例中，如何使用文件名而不是 file.txt？

最初我的 ss 行是

```
 ss << "lynx -dump '" << siteurl << "' > file.txt"; 
```

但我决定将其更改为使用参数中的值，所以我添加了文件名。

以下是我的错误信息

```
main.cpp: In function ‘void webparser(std::string, std::string)’:
main.cpp:244:46: error: no match for ‘operator>’ in ‘std::operator<< [with _Traits = std::char_traits<char>]((* & std::operator<< [with _CharT = char, _Traits = std::char_traits<char>, _Alloc = std::allocator<char>]((* & std::operator<< [with _Traits = std::char_traits<char>]((* & ss.std::basic_stringstream<char>::<anonymous>.std::basic_iostream<char>::<anonymous>), ((const char*)"lynx -dump \'"))), (* & siteurl))), ((const char*)"\'")) > filename’
main.cpp:244:46: note: candidates are:
/usr/include/c++/4.6/bits/stl_pair.h:220:5: note: template<class _T1, class _T2> bool std::operator>(const std::pair<_T1, _T2>&, const std::pair<_T1, _T2>&)
/usr/include/c++/4.6/bits/stl_iterator.h:303:5: note: template<class _Iterator> bool std::operator>(const std::reverse_iterator<_Iterator>&, const std::reverse_iterator<_Iterator>&)
/usr/include/c++/4.6/bits/stl_iterator.h:353:5: note: template<class _IteratorL, class _IteratorR> bool std::operator>(const std::reverse_iterator<_IteratorL>&, const std::reverse_iterator<_IteratorR>&)
/usr/include/c++/4.6/bits/basic_string.h:2547:5: note: template<class _CharT, class _Traits, class _Alloc> bool std::operator>(const std::basic_string<_CharT, _Traits, _Alloc>&, const std::basic_string<_CharT, _Traits, _Alloc>&)
/usr/include/c++/4.6/bits/basic_string.h:2559:5: note: template<class _CharT, class _Traits, class _Alloc> bool std::operator>(const std::basic_string<_CharT, _Traits, _Alloc>&, const _CharT*)
/usr/include/c++/4.6/bits/basic_string.h:2571:5: note: template<class _CharT, class _Traits, class _Alloc> bool std::operator>(const _CharT*, const std::basic_string<_CharT, _Traits, _Alloc>&)
/usr/include/c++/4.6/bits/stl_iterator.h:842:5: note: template<class _Iterator, class _Container> bool __gnu_cxx::operator>(const __gnu_cxx::__normal_iterator<_Iterator, _Container>&, const __gnu_cxx::__normal_iterator<_Iterator, _Container>&)
/usr/include/c++/4.6/bits/stl_iterator.h:836:5: note: template<class _IteratorL, class _IteratorR, class _Container> bool __gnu_cxx::operator>(const __gnu_cxx::__normal_iterator<_IteratorL, _Container>&, const __gnu_cxx::__normal_iterator<_IteratorR, _Container>&)
make: *** [main.o] Error 1 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-26T17:01:55.270

代替

```
ss << "lynx -dump '" << siteurl << "'" > filename; 
```

和

```
ss << "lynx -dump '" << siteurl << "'" << filename; 
```

或者，与您的原始代码一致：

```
ss << "lynx -dump '" << siteurl << "' > " << filename; 
```

# xml - 带有命名空间的 SQL Server 2005 XML

> ID：11674332
> 
> 赞同：1
> 
> 时间：2012-07-26T17:01:11.440
> 
> 标签：xml, sql-server-2005, xquery, xml-namespaces

很抱歉这种 n00b 问题，但这是我第一次在 SQL Server (2005) 中处理 XML。这是我认为可行的...

```
DECLARE @doc xml

SET @doc =

'<?xml version="1.0" encoding="UTF-8"?>
<p:OrderRequest xmlns:p="http://xxx.OrderRequest/2" xmlns:xsi="http://xxx.XMLSchema-instance" xsi:schemaLocation="http://xxx.OrderRequestV2.xsd ">
  <p:Header>
    <p:LLLRequestCount>0</p:LLLRequestCount>
    <p:MFRRequestCount>1</p:MFRRequestCount>
    <p:FileCreatedAt>2001-12-31T12:00:00</p:FileCreatedAt>
    <p:RequestFileName>p:RequestFileName</p:RequestFileName>
  </p:Header>
  <p:RequestItems>
  <p:MFRRequest id="1" priority="">
      <p:AccountNumber>9999999</p:AccountNumber>
      <Status>Initial</Status>
      <p:CaseInformation>
       <ReferralDate>2011-01-01</ReferralDate>
       <Type>1A</Type>
       <ARM>Yes</ARM>
        <InvestorNumber>InvestorNumber</InvestorNumber>
        <PropertyAddress>PropertyAddress</PropertyAddress>
        <PrivateLabel>Yes</PrivateLabel>
        <CaseNumber>01-11111/AK/</CaseNumber>
        <SuspenseBalance>9999.00</SuspenseBalance>
        <TitleOrderedDate>2011-09-01</TitleOrderedDate>
        <TotalMonthlyPayment>876.99</TotalMonthlyPayment>
      </p:CaseInformation>
    </p:MFRRequest>
  </p:RequestItems>
</p:OrderRequest>'
;WITH XMLNAMESPACES(DEFAULT 'http://xxx.OrderRequest/2)')

SELECT Y.i.value('Status[1]', 'varchar(10)') AS Status
FROM @doc.nodes('/OrderRequest/MFRRequest') AS Y(i) 
```

...但我回到空白。我也尝试过使用 OPENXML。我只得到空白。在这一点上我已经尝试了很多例子，但我不确定我错过了什么：-/

我需要拉回 MFRRequest、AccountNumber、Status 的 ID 属性，然后是 CaseInformation 中的几个字段。我将非常感谢任何帮助。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T17:07:48.317

三个问题：

1.  您的命名空间不正确 - 最后没有右括号；命名空间必须指定为`'http://xxx.OrderRequest/2'`(not `'http://xxx.OrderRequest/2)'`)

2.  您错过了`<OrderRequest>`and之间`<MFRRequest>`的一个 XML 元素 - 这`<RequestItems>`两者之间有一个

3.  一些元素使用命名空间——一些（比如`<Status>`）不使用——所以你需要为你的命名空间使用一个 XML 命名空间前缀来指示哪些元素使用它（哪些不使用）。

因此，如果您改用此 T-SQL 代码，它将起作用：

```
;WITH XMLNAMESPACES('http://xxx.OrderRequest/2' AS p)
SELECT 
    Y.i.value('Status[1]', 'varchar(10)') AS Status
FROM 
    @doc.nodes('/p:OrderRequest/p:RequestItems/p:MFRRequest') AS Y(i) 
```

# java - 列出首选项，单击首选项时如何做某事

> ID：11674335
> 
> 赞同：-2
> 
> 时间：2012-07-26T17:01:22.883
> 
> 标签：java, android, listview, android-preferences, listpreference

好的，所以我发现的每篇文章都无法正常工作，我正在尝试进入我的列表首选项

设置basic.xml

```
<ListPreference
  android:title="themes"
  android:summary="Select the option of the list"
  android:key="listPref"
  android:entries="@array/Themes"
  android:entryValues="@array/list" 
  android:defaultValue="default" /> 
```

现在，正如您在上面看到的，这是我的 settingsbasic.xml 文件中的列表首选项。现在我需要知道如何做的是我有 2 个 java 文件，我的主要活动。和我的偏好 java 文件。我需要知道当用户单击其中一个条目时，我可以如何做某事，喜欢打开某事或更改 ui，只是我认为我可以从那里获取它。我只需要知道代码的去向和去向。在主要活动或偏好活动中。

这是我的首选java文件

```
 public class Prefs extends PreferenceActivity {

ListPreference listPref;

protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.settingsbasic);

       }

    protected void onResume() {
    super.onResume();

 // Registers a callback to be invoked whenever a user changes a preference.
    getPreferenceScreen().getSharedPreferences().registerOnSharedPreferenceChangeListener(this);

} 

protected void onPause() {
    super.onPause();

 // Unregisters the listener set in onResume().
    // It's best practice to unregister listeners when your app isn't using them to cut down on
    // unnecessary system overhead. You do this in onPause().
    getPreferenceScreen()
            .getSharedPreferences().unregisterOnSharedPreferenceChangeListener(this);

  public void onSharedPreferenceChanged(SharedPreferences sharedPreferences, String key) {
        // Sets refreshDisplay to true so that when the user returns to the main
        // activity, the display refreshes to reflect the new settings.
        WebViewClientDemoActivity.????? = true;
    }

 } 
```

任何示例代码都会有所帮助，或者添加到我上面的代码中。我只需要一个可以对这段代码有所了解的人。我尝试了很多不同的东西，但都没有奏效。

好的，所以使用下面推荐的示例应用程序的方法是我拥有的更多代码。

```
 Main Activity   

  public class WebViewClientDemoActivity extends Activity {

    public static String sPref = null;

    public void onStart() {
        super.onStart();

     // Gets the user's network preference settings
        SharedPreferences sharedPrefs = PreferenceManager.getDefaultSharedPreferences(this);
     // Retrieves a string value for the preferences. The second parameter
        // is the default value to use if a preference value is not found.
        sPref = sharedPrefs.getString("listPref", "Default");

         } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T17:19:59.723

这是我使用 PreferenceActivity 的方式：

```
public class EditPrefs extends PreferenceActivity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.screen_prefs);
    }
} 
```

然后在 /res/xml 文件夹中我有 XML 文件：

```
<PreferenceScreen
    xmlns:android="http://schemas.android.com/apk/res/android">

     <ListPreference
        android:key="txtColor"
        android:title="textView Color"
        android:summary="select color for textViews"
        android:entries="@array/txtColor"
        android:entryValues="@array/txtColorValues" />
</PreferenceScreen> 
```

在 /res/values 我有这个 XML 文件包含项目及其值：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string-array name="txtColor">
        <item>blue</item>
        <item>brown</item>
        <item>gray</item>
        <item>violet</item>
    </string-array>
    <string-array name="txtColorValues">
        <item>#ff000099</item>
        <item>#5F1E02</item>
        <item>#333333</item>
        <item>#421C52</item>
    </string-array>
</resources> 
```

然后我很容易地从另一个 android 类调用这个类，例如当用户点击一个菜单项时：

```
startActivity(new Intent(this, EditPrefs.class)); 
```

您可以在 onCreate 和 onResume 中调用首选项，例如：

```
@Override
protected void onResume() {  
    super.onResume();
    SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
    String txtColor = prefs.getString("txtColor", DEFAULT COLOR); // for instanse : #ff000099 
    textView.setBackgroundColor(Color.parseColor(txtColor));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T19:39:37.813

我已经通过这个解决了我的问题。

首选项

```
 public static String theme = "Theme1";

    @Override
    public void onBackPressed() {
      ListPreference listPreference = (ListPreference) findPreference("listPref");
      String currValue = listPreference.getValue();
      theme = currValue;
      super.onBackPressed();

   } 
```

主要活动

```
 if (Prefs.theme.equals("Theme1"))
setContentView(R.layout.main);
    else 
       setContentView(R.layout.main2); 
```

偏好 XML

```
 <ListPreference
android:title="themes"
android:summary="Select the option of the list"
android:key="listPref"
android:entries="@array/listReturnValue"
android:entryValues="@array/listDisplayWord" /> 
```

# android - 阅读 Jelly Bean 上的日志（未经许可，可能需要 root 权限？）

> ID：11674340
> 
> 赞同：1
> 
> 时间：2012-07-26T17:01:53.907
> 
> 标签：android, root, logcat, android-logcat

我正在寻找一种读取 Android Jelly Bean 日志的方法。我知道，不再授予相应的许可，这就是我要求替代的原因。

是否有可能进行 root 访问？

谢谢。

# sql-server - 如何使用 CKEditor 在 Grails 中保存和显示 HTML？

> ID：11674344
> 
> 赞同：4
> 
> 时间：2012-07-26T17:02:12.877
> 
> 标签：sql-server, grails, ckeditor

我正在使用 Grails 的 CKEditor 插件，虽然我可以将 CKEditor 中的 HTML 内容存储到数据库中，但我无法在视图中正确呈现它。

我在视图中得到的是转义的 HTML，而不是标记内容。

```
<p> sdfsdfsadf</p> <p> asdfasdfasdf</p> <p> asdfasdfasdf</p> <p> &yen;</p> 
```

当我想要：

```
sdfsdfsadf
asdfasdfasdf
asdfasdfasdf
¥ 
```

如何让存储的数据正确呈现？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-09-20T07:26:30.257

迁移到 Grails 2.4，经过一番摸索，发现`<%=expression%>`已弃用。

使用新语法`${raw(expression)}`解决了我的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T00:55:15.783

试试 ${instance?.attribute?.decodeHTML()}

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T13:22:55.433

来自[John Flinchbaugh](https://stackoverflow.com/a/1755532/20770)[关于编解码器和编码的问题](https://stackoverflow.com/q/1337464/20770)的回答：

> 要为页面中默认为 HTML 的一个表达式禁用 HTML 编码，请使用`<%=expression%>`符号而不是`${...}`.

# xml - XSLT 只选择一个对象

> ID：11674345
> 
> 赞同：0
> 
> 时间：2012-07-26T17:02:15.397
> 
> 标签：xml, xslt

我正在尝试从 XML 文档中选择一个企业的位置集合。此代码有效，但仅选择一项。所以，我的问题是：我可以对这段代码做些什么来使它适用于每个位置？

```
 <xsl:template match="/InstitutionAlias/InstitutionAliasExternalReferenceCollection">
  <InstitutionExternalReferenceCollection>    
    <xsl:for-each select="InstitutionAliasExternalReference">
      <InstitutionExternalReference>
        <ExternalReferenceIdentifier>
          <xsl:value-of select="ExternalReferenceIdentifier"/>
        </ExternalReferenceIdentifier>
      </InstitutionExternalReference>
    </xsl:for-each>
  </InstitutionExternalReferenceCollection>
</xsl:template> 
```

这就是输出的样子

```
 <InstitutionExternalReferenceCollection>
- <InstitutionExternalReference>
  <ExternalReferenceIdentifier>Test1</ExternalReferenceIdentifier>
</InstitutionExternalReference>

- <InstitutionExternalReference>
  <ExternalReferenceIdentifier>Test2</ExternalReferenceIdentifier>
</InstitutionExternalReference> 
```

这是一个示例 xml 文件。

```
 - <InstitutionAliasExternalReferenceCollection>
- <InstitutionAliasExternalReference>
  <ExternalReferenceIdentifier>Test1</ExternalReferenceIdentifier>
</InstitutionAliasExternalReference>
- <InstitutionAliasExternalReference>
  <ExternalReferenceIdentifier>Test2</ExternalReferenceIdentifier>
</InstitutionAliasExternalReference> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T17:52:54.293

像这样的东西？如果您确定每个企业只能有一个位置标识符（我不知道），则可以将其压缩，但我决定将事物分开到单独的模板中。

您可以在[此 XMLPlayground](http://www.xmlplayground.com/wlKKZ4)上运行它（请参阅输出源）。

```
 <!-- kick things off -->
    <xsl:template match="BusinessCollection">
        <BusinessCollection>
            <xsl:apply-templates select='Business' />
        </BusinessCollection>
    </xsl:template>

    <!-- each business -->
    <xsl:template match='Business'>
        <Business>
            <xsl:apply-templates select='LocationIdentifier' />
        </Business>
    </xsl:template>

    <!-- each location identifier -->
    <xsl:template match='LocationIdentifier'>
        <LocationIdentifier>
            <xsl:value-of select='.' />
        </LocationIdentifier>
    </xsl:template>

</xsl:stylesheet> 
```

您的预期输出提到`Data`了节点，但这些没有出现在您的 XSL 尝试中，所以我不确定那里的意图是什么。

# objective-c - iOS - 检查字符串是否为空时出现异常

> ID：11674347
> 
> 赞同：0
> 
> 时间：2012-07-26T17:02:28.527
> 
> 标签：objective-c, ios, xcode, ios5

我正在做这样的事情：

```
// GET THE USER ID
NSUserDefaults *standardUserDefaults = [NSUserDefaults standardUserDefaults];
NSString *user_id = [standardUserDefaults objectForKey:@"user_id"]; 
```

然后检查user_id是否为空

```
if ([user_id length] == 0) {
  proceed = false;
  NSLog(@"Error: User id is not set.");
} 
```

我得到了这个运行时异常：

> ***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[__NSCFBoolean length]: unrecognized selector sent to instance 0x1469f70”

知道为什么我会得到例外吗？我不认为我所做的事情有什么问题。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T17:06:47.663

这个：

```
NSString *user_id = [standardUserDefaults objectForKey:@"user_id"]; 
```

正在返回一个`NSNumber`（作为`NSCFBoolean`的私有子类`NSNumber`）而不是字符串。因此它没有实现`length`，导致异常。

也许你想测试`[user_id intValue] > 0`？即使您将其转换为字符串，它也总会有一些长度。

（提出的附带问题：仅仅声明`user_id`为 an 的引用`NSString`并不意味着您分配给它的任何东西都会神奇地变成一个字符串；实际上没有任何类型对象类型强制效果。编译器不会抱怨，因为`NSUserDefaults`返回的对象type `id`, 即它保证它们是对象但不声明它们的类型, 编译器也不知道. 所有对象都可以在`id`不产生警告的情况下进行转换, 因此它可以被诸如此类的类使用用户默认，`NSArray`等，他们可以接受任何东西，只要它是一个对象）。

编辑：根据评论中提出的问题，听起来最初存储的东西可能不是字符串。验证 Web 内容的好方法可能类似于：

```
// fall through here if the object isn't a string
if(![responseString isKindOfClass:[NSString class]])
{
    // check whether it's something that can be converted to a string
    if(![responseString respondsToSelector:@selector(stringValue)])
    {
        // some sort of error condition; the server returned something
        // that isn't a string and doesn't convert (in and of itself) to string
    }
    else
    {
        // convert the object to a string
        responseString = [responseString stringValue];
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T17:05:36.353

您收到该错误的原因是您试图在看似布尔值的情况下调用“长度”。无论哪种方式，为了检查字符串是否为空，这里有一些简单的方法，您可以通过类别添加到 NSString 类：

```
 -(BOOL)isBlank{
        return [[self trim] length]==0;
    }
    -(NSString *)trim{
        return [self stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceCharacterSet] ];
    } 
```

然后调用它只是：

```
 [myString isBlank]; 
```

# sql-server - SSRS 2008 嵌入式图像隐藏

> ID：11674348
> 
> 赞同：0
> 
> 时间：2012-07-26T17:02:35.923
> 
> 标签：sql-server, reporting-services, ssrs-2008

我的报告中有一个嵌入图像，我想根据数据库字段值显示/隐藏它。你能告诉我如何实现这一目标吗？我尝试根据以下表达式设置图像属性“可见性”显示或隐藏，但收到一条错误消息。它不允许我从报表生成器保存报表。谢谢你的帮助。

=`First(Fields!dbField.Value, "NEW")`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T17:49:53.237

我认为这会成功

```
=IIf((First(Fields!dbField.Value) = "NEW"),True,False) 
```

# silverlight - 将卫星组件添加到 XAP

> ID：11674350
> 
> 赞同：1
> 
> 时间：2012-07-26T17:02:41.570
> 
> 标签：silverlight, localization, xap

我有一种情况，我需要将本地化的卫星程序集添加到现有的 XAP 文件中。这是在 SharePoint Webpart 的上下文中。

问题是当我添加 de/Assembly.resources.dll 并重建 XAP 时，它无法在浏览器中加载。失败模式取决于我如何尝试将程序集添加到 AppManifest.xaml。在某些情况下，它只是在浏览器中不显示任何内容。在其他情况下，它显示加载微调器卡在 0%。

我的程序如下：

提取 XAP

从核心 Webpart 程序集中提取 .resource

转换为 .resx

翻译

重建为延迟签名的卫星组件

复制到“de”子文件夹

添加到 AppManifest

重建 XAP

复制回 14 hive

IIS重置

清除浏览器缓存

测试

原始程序集已签名，因此我禁用了程序集验证检查 sn -Vr [star],[star] 并修改了注册表以包含 64 位和 32 位条目以进行验证检查。装配验证检查跳过已在非 Silverlight/XAP 上下文中的同一系统上得到证明。这些程序集是使用相同的 .net 版本构建的。在 sn -Vr 后重新启动 SharePoint 计时器服务以重新加载异常列表以跳过验证。

我一定错过了什么，但我不知道是什么。

在一个 Silverlight 本地化指南中，我看到 .csproj 包含一系列支持的本地化 - 我怀疑原始基础程序集是使用指定的任何其他文化构建的 - 这可能是问题吗？

我需要对我转售的软件的一些 OOTB 组件进行第 3 方（我是软件分销商）扩展。我对此有许可，甚至可以在适当的时候签署我的程序集，但是我没有源代码访问权限，对核心组件的任何更改都需要很长时间和很多努力 - 即不受欢迎。

非常感谢您的帮助。我已经为一些 ASP.net 应用程序和标准 web 部件工作了 - 但是这个基于 Silverlight 的 web 部件仍然是一个问题。

非常感谢。

# python - 如何使 Python 脚本可移植到具有不同位置的解释器的机器上？

> ID：11674359
> 
> 赞同：1
> 
> 时间：2012-07-26T17:02:59.633
> 
> 标签：python

我确定这在某处有据可查，但我找不到！我想让我的脚本可移植到可能在同一位置没有 Python 解释器的机器上。出于这个原因，我认为我可以将第一行编码为`#!python3`而不是使用解释器的绝对路径，如`#!/usr/local/bin/python3`.

毫无疑问，你们中的大多数人都明白为什么这不起作用，但我不知道。尽管我的实验室伙伴并没有抱怨必须重新编码我的脚本以反映他们自己机器上解释器的绝对路径，但这似乎没有必要。我会非常满意提供相应文档链接的回复。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T17:04:40.327

shebang 行后面给出的路径`#!`是绝对路径，所以根本`python3`行不通。你应该使用

```
#!/usr/bin/env python3 
```

`python3`在`PATH`POSIX 机器上查找。当然，这只会在 Python 解释器位于`PATH`环境变量中给定的某个目录中时找到。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T17:04:48.820

`env`是一个处理这类事情的程序。您几乎应该总是使用类似的东西`#! /usr/bin/env python3`作为您的 shebang 线，而不是指定绝对路径。

# mysql - 我在 mysql 中的 str_to_date 返回 null

> ID：11674362
> 
> 赞同：2
> 
> 时间：2012-07-26T17:03:18.027
> 
> 标签：mysql, string

我在 mysql 中运行了这个语句，它在每一行都返回 null：

```
SELECT STR_TO_DATE('Fri, 22 Jun 2012 03:35:24 +0000', '%a, %e %b %Y %H:%i:%s %%%%%%%%%%') FROm t2; 
```

我不知道`+0000`. 应该是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T17:07:53.327

+0000 是时区偏移量。

mySQL 不理解时区的概念，显然也不理解`STR_TO_DATE`： [日期/时间格式占位符列表](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)根本没有提到时区。

如果您希望日期来自不同的时区，那么仅借助 mySQL 似乎无法解决。您必须在其他地方预处理日期以将其转换为*始终*为UTC（或您的本地时区，无论适用）的日期，或者如果它已经始终为 UTC，ManseUK 的建议（添加`+0000`到您的格式字符串以便 mySQL 忽略它）应该工作。

# php - 我想更改索引中的 url

> ID：11674363
> 
> 赞同：0
> 
> 时间：2012-07-26T17:03:21.240
> 
> 标签：php

我想在不创建另一个文件的情况下更改我的网址：我的 index.php 文件不在文件夹中……而其他页面在文件夹“about -> index.php”中，依此类推……我的索引页脚页面是这样的：

```
 <li><a href="about">About</a></li>
        <li><a href="contact">Contact</a></li> 
```

像“about”这样的文件夹的页脚是这样的：

```
 <li><a href="../about">About</a></li>
        <li><a href="../contact">Contact</a></li> 
```

我只想要 1 个页脚文件而不是 2 个，更改数据要快得多...请帮助！（我更喜欢PHP）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T17:05:59.207

如果您在网址中使用前导斜杠`/`，它将是基本路径。你目前正在做一个相对路径，这意味着你需要离开一个目录然后链接到某个东西。

像这样：

```
example site url: www.mysite.com/about
<a href="/about">about</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T17:05:52.357

在页脚中对链接进行绝对引用，例如 www.mydomain.com/about

# jquery - 通过回发保持 CSS 更改

> ID：11674364
> 
> 赞同：1
> 
> 时间：2012-07-26T17:03:23.517
> 
> 标签：jquery, html, css, jquery-plugins, lavalamp

我正在使用[Lavalamp](http://www.gmarwaha.com/blog/2007/08/23/lavalamp-for-jquery-lovers/) jquery 插件。

此 jquery 的问题在于单击菜单/或回发时。选定的菜单不会保留。

我知道我们需要为我们想要选择的菜单设置一个 CSS 类“当前”。

但是我应该如何知道回发时选择了哪个菜单。

我有这些东西到现在

```
<ul class="lavaLamp">
            <li  style="width: 80px;"><a href="#" onclick="getPartial(1)">Home</a></li>
            <li  style="width: 120px;"><a href="#" onclick="getPartial(2)">Contact Us</a></li>
            <li  style="width: 180px;" class="current"><a href="../Home/VolumetricWeight" onclick="getPartial(3)">
                Volumetric Weight</a></li>
            <li  style="width: 130px;"><a href="#" onclick="getPartial(4)">Banned Items</a></li>
            <li  style="width: 150px;"><a href="#" onclick="getPartial(5)">Transportation</a></li>
            <li  style="width: 131px;"><a href="#" onclick="getPartial(6)">Suggestion</a></li>
            <li  style="width: 120px;"><a href="../Home/AboutUs" onclick="getPartial(7)">About
                Us</a></li>
        </ul>

<script language="javascript" type="text/javascript">
function getPartial(variable) {
    $("ul.lavaLamp li").removeClass('current');
    $(this).addClass('current');
} 
```

我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T07:01:07.610

这是一个简单的 CSS 要求。

按照这些链接，它会帮助你

[http://www.search-this.com/2007/06/13/css-current-page-indicator/](http://www.search-this.com/2007/06/13/css-current-page-indicator/)

[http://www.pmob.co.uk/temp/nav-body6.htm](http://www.pmob.co.uk/temp/nav-body6.htm)

[http://www.hicksdesign.co.uk/else/cssnav/faq.html](http://www.hicksdesign.co.uk/else/cssnav/faq.html)

# ios - 如何访问 QuickDialog 单元格元素的 UITableViewCell？

> ID：11674366
> 
> 赞同：2
> 
> 时间：2012-07-26T17:03:27.837
> 
> 标签：ios, quickdialog

我正在尝试访问 QuickDialog 表单的 UITableViewCell 的属性。

更具体地说，我正在尝试访问 QEntryElement (QDateTimeInlineElement) 的附件视图属性，该属性“隐藏”在我创建的对象的属性列表中。

我正在尝试使用

```
 UITableViewCell *thisCell = [dateelement getCellForTableView:self.quickDialogTableView controller:self]; 
```

但由于某些原因，没有显示任何内容。我正在尝试在其中插入一个 UIButton，如下所示：

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
[button setTitle:@"=" forState:UIControlStateNormal];
button.frame = CGRectMake(0, 0, 24, 24); 
```

然后 thisCell.accessoryView = button;

我是否以错误的方式访问该属性，或者根本没有创建按钮？没有显示错误，但附件视图为空。

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T17:55:31.967

[这个问题](https://github.com/escoz/QuickDialog/issues/133)看起来非常接近你的要求。基本上，您首先必须提供您自己的`QuickDialogStyleProvider`，按照 escoz 建议的方式实施该`cell:willAppearForElement:atIndexPath:`方法：

> 一旦你在提供者方法中得到调用，你就可以完全控制单元格。您可以检查单元格是否为 type `QEntryTableViewCell`，如果是，则转换为该类型并更改`textField`属性的颜色/字体。一个很好的副作用是这也会改变所有子类的颜色，比如单选按钮、日期/时间字段等。

所以，在你的情况下，你会做类似的事情

```
- (void)viewDidLoad
{
    self.quickDialogTableView.styleProvider = self;
}

- (void)cell:(UITableViewCell *)cell willAppearForElement:(QElement *)element atIndexPath:(NSIndexPath *)indexPath
{
    if([cell isKindOfClass:[QDateTimeInlineElement class]])
    {
        UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
        [button setTitle:@"=" forState:UIControlStateNormal];
        button.frame = CGRectMake(0, 0, 24, 24);

        cell.accessoryView = button;
    }
} 
```

抱歉，如果它不完全正确，我现在远离 Xcode。

# mysql - 如何通过加入字符串来加速 INSERT SELECT

> ID：11674371
> 
> 赞同：1
> 
> 时间：2012-07-26T17:03:42.953
> 
> 标签：mysql, sql, performance, insert-select

我想调用插入选择并尝试使用此选择（[当一列是唯一的时，借助此 INSERT SELECT 查询](https://stackoverflow.com/questions/11648568/insert-select-query-when-one-column-is-unique)的帮助）

```
SELECT minids.userid, username, password, full_name, country, email,
      (select openclipart_files.id from aiki_users, openclipart_files
       where aiki_users.userid = users.userid and avatar like '%svg' AND
             filename = avatar) as avatar,
      homepage, usergroup, notify, nsfwfilter
FROM aiki_users users
INNER JOIN (SELECT MIN(userid) as userid FROM aiki_users GROUP by username) 
           minids ON minids.userid = users.userid; 
```

我用它插入

```
INSERT INTO openclipart_users(id, user_name, password, full_name, country,
email, avatar, homepage, user_group, notify, nsfw_filter) SELECT ... 
```

执行需要很长时间（我会在几分钟后取消它）

aiki_users 表有 100k 行，openclipart_files 有 30k 行，基本上我只是将所有内容从 aiki_users 复制到 openclipart_users 跳过重复项，我希望头像是旧表中是字符串的文件的 id（只有大约 300 个用户有大约 1k 的 svg 头像用户没有''头像，但我只有什么 svg）。

有什么方法可以快速将该化身（没有它在几秒钟内执行 INSERT SELECT）插入到 openclipart_users 中，任何可行的解决方案都会很好（我的意思是不到一分钟）。

**SELECT 上解释的**EDIT输出****

 **```
+----+--------------------+--------------------+--- -----+----------------+----------+---------+------- ---------------+--------+------------- +
| 编号 | 选择类型 | 表| 类型 | 可能的键 | 关键 | key_len | 参考 | 行 | 额外 |
+----+--------------------+--------------------+--- -----+----------------+----------+---------+------- ---------------+--------+------------- +
| 1 | 初级 | <派生3> | 全部 | 空 | 空 | 空 | 空 | 106689 | |
| 1 | 初级 | 用户 | eq_ref | 初级 | 初级 | 4 | minids.userid | 1 | |
| 3 | 派生 | aiki_users | 索引 | 空 | 用户名 | 302 | 空 | 111273 | 使用索引 |
| 2 | 依赖子查询 | openclipart_files | 全部 | 空 | 空 | 空 | 空 | 37715 | |
| 2 | 依赖子查询 | aiki_users | eq_ref | 初级 | 初级 | 4 | openclipart_staging.users.userid | 1 | 使用位置 |
+----+--------------------+--------------------+--- -----+----------------+----------+---------+------- ---------------+--------+------------- +

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T13:46:14.893

转换为仅连接语法（摆脱相关的子查询并改为连接到子选择）：

```
SELECT minids.userid, username, password, full_name, country, email,
      clip.id as avatar,
      homepage, usergroup, notify, nsfwfilter
FROM aiki_users users
INNER JOIN (SELECT MIN(userid) as userid FROM aiki_users GROUP by username) 
           minids ON minids.userid = users.userid
LEFT OUTER JOIN openclipart_files clip ON 
           clip.owner = users.userid AND RIGHT(users.avatar, 3) = 'svg' 
           AND clip.filename = users.avatar 
```

试试看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T17:49:21.167

```
SELECT 
    MIN(userid), username, password, full_name, country, email,
    openclipart_files.id,
    homepage, usergroup, notify, nsfwfilter
FROM aiki_users 
LEFT JOIN openclipart_files  ON filename = avatar AND avatar like '%svg'
GROUP BY username 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T18:09:08.210

使用[@SPFiredrake](https://stackoverflow.com/users/370412/spfiredrakefrom)的提示与 CASE 和 RIGHT 我创建了这个查询

```
SELECT minids.userid, username, password, full_name, country, email,
       case RIGHT(avatar, 3) 
       when 'svg' then 
            (select openclipart_files.id 
             from openclipart_files
             where filename = users.avatar AND users.userid = owner)
       else 
            null 
       end as avatar, homepage, usergroup, first_login, notify, nsfwfilter
FROM aiki_users users 
INNER JOIN (SELECT MIN(userid) as userid FROM aiki_users GROUP by username) 
minids ON minids.userid = users.userid; 
```

它在 2-4 秒内运行（内部 SQL 仅针对这 300 个案例运行）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T17:27:17.400

一些改进：

```
SELECT MINIDS.USERID, USERNAME, PASSWORD, FULL_NAME, COUNTRY, EMAIL,
       (SELECT OPENCLIPART_FILES.ID
          FROM OPENCLIPART_FILES
         WHERE AVATAR LIKE '%svg' AND USERS.FILENAME = AVATAR) AS AVATAR, 
       HOMEPAGE, USERGROUP, NOTIFY, NSFWFILTER
  FROM     AIKI_USERS USERS
       INNER JOIN
           (SELECT MIN(USERID) AS USERID
              FROM AIKI_USERS
            GROUP BY USERNAME) MINIDS
       ON MINIDS.USERID = USERS.USERID; 
```**

# php - 存储嵌套 JSON 对象的问题

> ID：11674372
> 
> 赞同：0
> 
> 时间：2012-07-26T17:03:43.377
> 
> 标签：php, json

谁能帮助我如何在不添加引号的情况下将一个 JSON 对象作为字段传递给另一个？基本上，我有一个函数需要能够在某些情况下将“标题”附加到预先解析为 JSON 的一组数据中，或者仅在其他情况下解析数据。

问题是一切正常，直到我尝试传递一个 JSON 对象作为标头的“有效负载”存储，此时由于附加了额外的引号集，JSON 变得无效。

我试图使用的对象是：

```
{
    "header": {
        "table": "user",
        "action": "insert",
        "opType": "string",
        "message": "Insert sucessful for user: 6",
        "start of records": false,
        "end of records": true
    },
    "data": "[
        {
            "id": "6",
            "Surname": "Peter",
            "Forename": "Kane",
            "Email": "pkane@a.co.uk",
            "Personal_Email": "p.kane@gmail.com",
            "Home_Phone_No": "01216045429",
            "Work_Phone_No": "087852489",
            "Mobile_Phone_No": "77245455598",
            "Address_Line_1": "1aplace",
            "Address_Line_2": "thistown",
            "Address_Line_3": "Someplace",
            "Address_Line_4": "whereever",
            "Post_Code": "W549AJ",
            "Mode_ID": "44",
            "Route_ID": "g12",
            "image": ""
        }
    ]"
} 
```

问题是“数据”键之后和最后一个花括号之前的引号，没有这些一切都可以验证。正如我所说，我使用 PHP 我尝试了正则表达式子字符串等，但似​​乎没有任何效果。

我的PHP如下：

```
 public function dataToJSON($operationType, $table, $action, $data, $message, $header = true, $firstRecord = null) {

    if ((!($operationType) === 'recordSet') and (!($operationType === 'error')) and (!($operationType === 'string') )) {
        throw new Exception("Operation type:" . ' ' . $operationType . ' ' . 'passed to the dataToJSON function not recogonised');
    }

    if (!(is_null($firstRecord))) {

        $isFirstRecord = $firstRecord;
        $isLastRecord = !$firstRecord;
    } else {
        $isFirstRecord = false;
        $isLastRecord = false;
    }

    if ($header) {
        $jsonData = array('header' => array(
                'table' => "$table",
                'action' => "$action",
                'opType' => "$operationType",
                'message' => "$message",
                'start of records' => $isFirstRecord,
                'end of records' => $isLastRecord),
        );
    } else {
        $jsonData = array();
    }

     $recordSet = array();

    if ($operationType === 'recordSet') {
        while ($row = mysql_fetch_assoc($data)) {
            array_push($recordSet, $row);
        }
        if ($header) {
            $jsonData ['data'] = $recordSet;
            return json_encode($jsonData);
        } else {
            return json_encode($recordSet);
        }

    } else if (($operationType === 'error') || ($operationType === 'string')) {
        if ($header) {
            $jsonData ['data'] = $data;
            return stripslashes(json_encode($jsonData));
        } else {
            return $data;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T17:08:21.677

为了使用/解析 json，它必须是*有效*的 json……而那些`**"**`字符使它无效。

在此处粘贴和处理以了解我的意思：http: [//jsonformat.com/](http://jsonformat.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T17:08:37.197

JSON 对象只不过是一个*字符串*。要实现您想要实现的目标，您可能需要解码然后重新编码您的 JSON 字符串：

```
$jsonData['data'] = json_decode($data, TRUE); 
```

# python - Python大文件解析与re

> ID：11674376
> 
> 赞同：6
> 
> 时间：2012-07-26T17:03:53.110
> 
> 标签：python, regex, file

如何使用正则表达式解析大文件（使用`re`模块），而不将整个文件加载到字符串（或内存）中？内存映射文件无济于事，因为它们的内容无法转换为某种惰性字符串。该`re`模块仅支持字符串作为内容参数。

```
#include <boost/format.hpp>
#include <boost/iostreams/device/mapped_file.hpp>
#include <boost/regex.hpp>
#include <iostream>

int main(int argc, char* argv[])
{
    boost::iostreams::mapped_file fl("BigFile.log");
    //boost::regex expr("\\w+>Time Elapsed .*?$", boost::regex::perl);
    boost::regex expr("something usefull");
    boost::match_flag_type flags = boost::match_default;
    boost::iostreams::mapped_file::iterator start, end;
    start = fl.begin();
    end = fl.end();
    boost::match_results<boost::iostreams::mapped_file::iterator> what;
    while(boost::regex_search(start, end, what, expr))
    {
        std::cout<<what[0].str()<<std::endl;
        start = what[0].second;
    }
    return 0;
} 
```

来证明我的要求。我使用 C++（和 boost）编写了一个简短的示例，这与我希望在 Python 中使用的相同。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-27T16:44:15.893

现在一切正常（Python 3.2.3 与 Python 2.7 在界面上有一些差异）。搜索模式应仅以 b" 为前缀以获得有效的解决方案（在 Python 3.2.3 中）。

```
import re
import mmap
import pprint

def ParseFile(fileName):
    f = open(fileName, "r")
    print("File opened succesfully")
    m = mmap.mmap(f.fileno(), 0, access = mmap.ACCESS_READ)
    print("File mapped succesfully")
    items = re.finditer(b"\\w+>Time Elapsed .*?\n", m)
    for item in items:
        pprint.pprint(item.group(0))

if __name__ == "__main__":
    ParseFile("testre") 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-26T17:06:45.620

这取决于您正在执行哪种解析。

如果您正在执行的解析是逐行的，则可以使用以下命令遍历文件的行：

```
with open("/some/path") as f:
    for line in f:
        parse(line) 
```

否则，您将需要通过一次读取块并解析它们来使用分块之类的东西。显然，如果您尝试匹配的内容与块边界重叠，则需要更加小心。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T17:15:48.257

要详细说明 Julian 的解决方案，您可以通过存储和连接连续行来实现分块（如果您想做多行正则表达式），如下所示：

```
list_prev_lines = []
for i in range(N):
    list_prev_lines.append(f.readline())
for line in f:
    list_prev_lines.pop(0)
    list_prev_lines.append(line)
    parse(string.join(list_prev_lines)) 
```

这将保留前 N 行的运行列表，包括当前行，然后将多行组解析为单个字符串。

# web - Flash 电影无法加载

> ID：11674380
> 
> 赞同：0
> 
> 时间：2012-07-26T17:04:13.540
> 
> 标签：web, flashdevelop

我正在复制当前网站。现有站点的标头有一个 .swf，我复制了与当前站点完全相同的代码（显然更改了 .swf 文件的位置）。我遇到的问题是它不会加载到新站点中。我已经到处寻找“电影未加载”问题，但大多数问题都通过过时的 Flash 播放器等问题得到解决。我的 Flash 播放器显然能够在他们现有的网站上处理完全相同的 .swf 文件，而我正要把头发拉出来。哈哈

任何帮助，将不胜感激！

PS 如果对任何人有帮助，我将在 asp.net 中重新创建该站点。

谢谢，迈克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T17:09:48.333

检查 SWF 是否试图引用服务器上的任何外部文件，例如图像或 XML。有时这些路径可能被硬编码到 SWF 中，并且需要使用更新的路径重新导出文件（或者只是不更改此文件的路径）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T21:50:53.667

谢谢。我实际上输入了它在现有站点上的静态 url，它运行良好。我不确定我做错了什么，但它确实有效。

# java - FEST：在执行任何操作之前等待 GUI 加载

> ID：11674383
> 
> 赞同：2
> 
> 时间：2012-07-26T17:04:16.840
> 
> 标签：java, swing, testing, robot, fest

```
 @Before public void setUp() {
        Robot robot = BasicRobot.robotWithCurrentAwtHierarchy();
        ApplicationLauncher.application("myApp").start(); 

        Pause.pause(5, TimeUnit.SECONDS); 
        frame = WindowFinder.findFrame("frame0").using(robot);

        JTableFixture table = frame.table(new GenericTypeMatcher<JTable>(JTable.class) {
             @Override protected boolean isMatching(JTable table) {
                return (table instanceof myTreeTable); 
             }  
        });
    } 
```

这段代码运行良好。如果我们删除 5 秒的暂停，则找不到该表，因为应用程序需要几秒钟来加载它。

我想知道是否有更清洁的方法。我在 ApplicationLauncher 之后尝试了 robots.waitForIdle() （我猜一旦 EDT 为空，所有内容都已加载），但它不起作用。

我知道暂停可以使用某些条件作为何时停止的事件，但我不明白如何编写它，因为 JavaDoc 和官方文档很差。

*   Pause.pause(WaitForComponentToShowCondition.untilIsShowing(frame.component())) ：我需要一个组件，如果我通过包装框架它不起作用。而且我不能通过桌子，因为这正是我正在等待得到的。
*   我明白我可能应该使用 ComponentFoundCondition 但我不明白！我厌倦了：

    ```
     ComponentMatcher matcher = new GenericTypeMatcher<JTable>(JTable.class) {
               @Override protected boolean isMatching(JTable table) {
                 return (table instanceof myTreeTable); 
               }  
           };

           Pause.pause(new ComponentFoundCondition("DebugMsg", frame.robot.finder(), matcher)); 
    ```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T04:48:23.197

您可以使用[ComponentFinder](http://fest.easytesting.org/swing/apidocs/org/fest/swing/core/ComponentFinder.html)来定位组件。例如，基于问题中的匹配器：

```
final ComponentMatcher matcher = new TypeMatcher(myTreeTable.class);

Pause.pause(new Condition("Waiting for myTreeTable") {
    @Override
    public boolean test() {
        Collection<Component> list = 
                window.robot.finder().findAll(window.target, matcher);
        return list.size() > 0;
    }
 }, 5000); 
```

这是按名称查找的替代方法：

```
final ComponentMatcher nameMatcher = new ComponentMatcher(){
    @Override
    public boolean matches(Component c) {
        return "ComponentName".equals(c.getName()) && c.isShowing();
    }
};

Pause.pause(new Condition("Waiting") {
    @Override
    public boolean test() {
        Collection<Component> list = 
                window.robot.finder().findAll(window.target, nameMatcher);
        return list.size() > 0;
    }
 }, 5000); 
```

# jquery - 用于检查复选框的 jQuery 函数

> ID：11674385
> 
> 赞同：1
> 
> 时间：2012-07-26T17:04:21.020
> 
> 标签：jquery, forms, checkbox, checked

我需要一些关于 jQuery 的帮助。

我有一个带有复选框的表单，例如：

```
<form name="myform">
<input type="checkbox" name="apple[]" value="12" />
<input type="checkbox" name="apple[]" value="12" />
<input type="checkbox" name="apple[]" value="14" />
<input type="checkbox" name="apple[]" value="15" />
<input type="checkbox" name="peach[]" value="12" />
<input type="checkbox" name="peach[]" value="14" />
<input type="checkbox" name="peach[]" value="15" /> 
```

这是已经尝试过的jQuery：

```
$(document).ready(function(){ 
    $(":checkbox").change(function(){ 
        if($('.peach').attr("checked")) { 
           alert("Checked"); 
        } 
        else { 
             alert("Unchecked"); 
        } 
     }); 
 }); 
```

当我选中一个名为“peach”的复选框时，我应该能够选中名为“apple”的复选框，其值与“peach”相同。因此，如果我以 12 作为其值检查“peach”，那么还应检查以 12 作为其值的名为“apple”的复选框。

我是 jQuery 新手，所以我自己找不到解决方案……有人能帮我吗？:-)

问候

费德里科

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T17:12:28.400

尝试以下操作：

```
$('input[name^="peach"]').change(function() {
    var apple = $('input[name^="apple"][value='+ this.value +']') // phew
    if (this.checked) {
       apple.prop('checked', true)
    } else {
       apple.prop('checked', false)
    }       
}) 
```

[演示](http://jsfiddle.net/MD7Jt/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T17:16:30.170

检查这个小提琴工作链接。[http://jsfiddle.net/NfU68/](http://jsfiddle.net/NfU68/)

```
$('input').on('click', function() {
    var value = $(this).val();
    var checked = $(this).is(':checked');
    $('input[value='+value+']').attr('checked', checked)
}); 
```

在这里，您可以使用基于类或父标签的自己的选择器，而不是输入。我已经用于演示目的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T18:21:11.017

以下解决方案将[`on()`](http://api.jquery.com/on)事件处理程序附加到`checkbox`元素以捕获任何`change`事件。然后它将获取`value`当前元素的 并检查包含该值的`checkbox`所有其他元素。`checkbox`

```
$('input[type=checkbox]').on('change', function() {
    $('input[value='+this.value+']').attr('checked', $(this).is(':checked'));
}); 
```

演示：http: [//jsfiddle.net/z6H7j/](http://jsfiddle.net/z6H7j/)

对于 1.7 之前的版本，请使用[`delegate()`](http://api.jquery.com/delegate)当时`on()`不存在的版本。

```
$(document).delegate('input[type="checkbox"]', 'change', function() {
    $('input[value='+this.value+']').attr('checked', $(this).is(':checked'));
}); 
```

演示：http: [//jsfiddle.net/8mQwV/](http://jsfiddle.net/8mQwV/)

# xml - WP7 - 构建 XML 消息

> ID：11674387
> 
> 赞同：0
> 
> 时间：2012-07-26T17:04:37.857
> 
> 标签：xml, silverlight, windows-phone-7

我需要将 XML 消息发送到我的 WP7 应用程序的 Web 服务，但我没有这样做的经验。

这是 Web 服务需要我发送 XML 的格式：

```
<pfpMessage version='1.5'>
 <header>
    <source>
      <component type="pfsvc" role="master">
        <host ip="" hostname="" serverId=""/>
      </component>
    </source>
  </header>
  <request request-id='1288730909' async='0' response-url='' language='en'>
    <phoneAppValidateDeviceTokenRequest >
      <phoneAppContext >
        <guid>...</guid>
        <deviceToken >...</deviceToken>
        <version >1.0.0</version>
      </phoneAppContext>
      <validationResult >yes</validationResult>
    </phoneAppValidateDeviceTokenRequest>
  </request>
</pfpMessage> 
```

这是我编写的代码的一小部分：

```
 XDocument doc = new XDocument();

    // start message
    XElement root = doc.Element("pfpMessage");
    root.SetAttributeValue("version", 1.5);
    doc.Add(root);

    // message header
    XElement header = doc.Element("header");
    root.Add(header);
    XElement source = doc.Element("source");
    header.Add(source);
    XElement component = doc.Element("component");
    component.SetAttributeValue("type", "pfsdk");
    source.Add(component);
    XElement element = doc.Element("host");
    element.SetAttributeValue("ip", pfAuthParams.IpAddress);
    element.SetAttributeValue("hostname", pfAuthParams.Hostname);
    component.Add(element); 
```

部分问题是 SetAttributeValue 函数不断抛出异常，即使它看起来与 MSDN 示例完全相同。

这是构建与格式匹配的 XML 消息的正确方法吗？

编辑：这会导致 InvalidOperationException：

```
XDocument doc = new XDocument(
            new XElement("pfpMessage",
                new XAttribute("version", 1.5),
                new XElement("header",
                    new XElement("source",
                        new XElement("component",
                            new XAttribute("type", "pfsdk"),
                            new XElement("host",
                                new XAttribute("ip", pfAuthParams.IpAddress),
                                new XAttribute("hostname", pfAuthParams.Hostname)
                            )
                        )
                    )
                )
            ),
            new XElement("request",
                new XAttribute("request-id", y),
                new XAttribute("async", 0),
                new XAttribute("response-url", ""),
                new XAttribute("language", "en"),
                new XElement("phoneAppValidateDeviceTokenRequest",
                    new XElement("phoneAppValidateContext"),
                    new XElement("guid", (Application.Current as App).SharedGUID),
                    new XElement("deviceToken", (Application.Current as App).SharedURI)
                    ),
                    new XElement("version", "1.0.0")
                )                   
        ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T17:07:54.807

这里：

```
XElement root = doc.Element("pfpMessage");
root.SetAttributeValue("version", 1.5); 
```

...您假设该元素已经存在。该`Element`方法*在您调用它的容器中找到一个元素*。您刚刚*创建*了文档，所以它是空的。您需要创建一个*新*元素：

```
XElement root = new XElement("pfpMessage"); 
```

其他地方也一样。

这是一种更清晰的方法：

```
XDocument doc = new XDocument(
    new XElement("pfpMessage",
        new XAttribute("version", 1.5),
        new XElement("header",
            new XElement("source",
                new XElement("component",
                    new XAttribute("type", "pfsdk"),
                    new XElement("host",
                        new XAttribute("ip", pfAuthParams.IpAddress),
                        new XAttribute("hostname", pfAuthParams.Hostname)
                    )
                )
            )
        )
    )
); 
```

（显然，如果您愿意，您可以在末尾折叠括号。）

这是构造文档的一种更具声明性的方式——它更接近 LINQ to XML 的精神。当然，您*可以*手动单独创建每个元素并将其附加到父元素，但它更冗长。

# css - 如何使用 z-index 将图像定位在 box-shadow 后面？

> ID：11674393
> 
> 赞同：2
> 
> 时间：2012-07-26T17:05:03.910
> 
> 标签：css

我想在标题的框阴影后面放置一个图像，以便框阴影出现在我的图像顶部。

我一直在使用 z-index 来实现这一点，但无法使其工作。

我制作的代码在[JSFiddle](http://jsfiddle.net/Abijah/zrm69/)中可用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T17:07:25.777

将标题中的位置值更改为左复制

```
position:relative; 
```

z-index 仅适用于定位元素（位置：绝对、位置：相对或位置：固定）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T17:07:43.623

给你：http: [//jsfiddle.net/zrm69/3/](http://jsfiddle.net/zrm69/3/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-26T17:07:47.123

Z-index 对静态定位的元素无效。将标题更改为`position: relative`，一切都会好起来的。

# iphone - 在iTunes连接中上传时如何确保二进制文件不无效

> ID：11674402
> 
> 赞同：0
> 
> 时间：2012-07-26T17:05:51.300
> 
> 标签：iphone, app-store-connect, binaryfiles

如何确保在 iTunes Connect 中上传二进制文件（归档后的 ipa 文件）时不会出现无效的二进制文件。

我只是想确保并仔细检查当我在 iTunes Connect 系统中上传二进制文件时不会说二进制文件无效的每一件事。

检查以确保二进制文件有效的关键点是什么。

感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T17:13:27.363

Xcode 的 window|organizer|archives 有一个验证存档的选项。

# mysql - 如何删除phpmyadmin中的数据库记录？

> ID：11674410
> 
> 赞同：2
> 
> 时间：2012-07-26T17:06:08.677
> 
> 标签：mysql, vb.net, phpmyadmin

我是 VB.net、sql 甚至 phpmyadmin gui 的新手。我想删除保存在 phpmyadmin 中的记录，但是在执行 sqlcommand 的 executenonquery() 时出现错误

这是我在 VB.NET 中使用的代码：

```
Public Sub RetrieveInfos(ByRef SQLStatement As String)
    Dim cmd As MySqlCommand = New MySqlCommand

    With cmd
        .CommandText = SQLStatement
        .CommandType = CommandType.Text
        .Connection = SQLConnection
        .ExecuteNonQuery()

    End With

    '--read the records in database in phpmyadmin gui---
    Dim myReader As MySqlDataReader = cmd.ExecuteReader

    If myReader.Read Then
        lblName.Text = myReader.GetString(0)
        lblAge.Text = myReader.GetString(1)

    End If

    myReader.Close()
    SQLConnection.Close()
    MsgBox("Records Successfully Retrieved")
    SQLConnection.Dispose()
End Sub     
 Private Sub btnRefresh_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnRefresh.Click
  Dim SQLStatement As String = "DELETE FROM patient WHERE 1"
        RetrieveInfos(SQLStatement)
 End Sub 
```

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-19T07:49:50.737

要从 phpmyadmin 中删除数据，如 [phpMyAdmin 设置](http://wiki.phpmyadmin.net/pma/Config#AllowUserDropDatabase)中指定的，您需要在 config.inc.php 中进行编辑。

```
boolean $cfg['AllowUserDropDatabase'] (line 503)

show a 'Drop database' link to normal users 
```

# image - 如何使用不断变化的图像创建动态悬停地图

> ID：11674411
> 
> 赞同：1
> 
> 时间：2012-07-26T17:06:10.160
> 
> 标签：image, map, hover, area, coords

我正在为客户构建地图导航并且卡住了！我已经使用和坐标构建了地图，一切都很好。但是，当您将鼠标悬停在每个区域上时，我现在需要更改颜色。

我之前在 Photoshop 中使用简单的切片 PNG 来完成此操作，但由于地图的复杂性和重叠的项目，这不是一个选项。我什至不知道从哪里开始 - 尝试了一些不同的教程和大量的谷歌搜索，但找不到一个好的解决方案。

到目前为止，这是我的地图：http: [//www.wiredcanvas.com/uploads/map/map.html](http://www.wiredcanvas.com/uploads/map/map.html)

我想要它，这样当您单击一个区域时，它会变成不同的颜色 - 如果需要，我还可以添加一个工具提示。

非常感谢收到关于我应该从哪里去的任何建议或帮助！

先感谢您

爱丽丝

# css - 位置绝对 iPad 容器宽度问题

> ID：11674419
> 
> 赞同：0
> 
> 时间：2012-07-26T17:06:28.723
> 
> 标签：css, css-position

我在 iPad Safari 中查看时遇到问题，我的容器 div 正在调整大小以适应绝对定位的元素。iPad 似乎将溢出元素的宽度添加到“.content” 980 宽度并缩小以显示大约 1080 像素的宽度。也许有一个属性可以强制 iPad 只调整到 980px 宽度的内容？

我有一个包含内容类的容器 div，其中定义了以下 css 属性：

```
.content{
    position:relative;
    width:980px;
    height:100%;
    margin:0 auto;
}
.e1{left:880px;top:892px;width:300px} 
```

在内容中，我有一个超出 980px 宽度范围的绝对定位元素，如下所示：

```
<div class="content">   
   <div class="e1">
      <img src="images/elements/e1.png"/>
   </div>
</div> 
```

![iPad Safari 截图](../Images/83c222aafff03a93a8794fbff876a992.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T11:49:50.443

我有一个类似的问题，并能够使用下面的代码修复它，希望这有助于...

```
html,body
{
width: 100%;
overflow-x: hidden;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-26T17:12:12.310

将此添加到您的脑海中：

```
<meta name="viewport" content="width=980, user-scalable=0" /> 
```

编辑：

好的，查看您的代码和屏幕后，我可以看到元素实际上并不是绝对定位，因为您已经设置了顶部和左侧，但没有包含“位置：绝对；”。任何人，似乎问题在于图像的宽度，所以将其添加到您的 css

```
.e1 img{
    width:100%;
    height:auto;
} 
```

# java - 通过 Java 发送保存在 Chrome 上的 HAR 文件

> ID：11674420
> 
> 赞同：2
> 
> 时间：2012-07-26T17:06:28.833
> 
> 标签：java, har

一个 HAR 文件可以保存在 Chrome 打开开发者工具 (Ctrl+Shift+J)，然后单击网络选项卡，最后右键单击并选择将条目保存为 HAR。

下载此文件后，如何使用此文件作为 Java 输入发送 HTTP 请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T13:28:51.227

您可以查看[http://www.frogthinker.org/projects/harlib](http://www.frogthinker.org/projects/harlib)，它允许您轻松读取 HAR 文件并将它们映射到 Java 对象。下一步是编写一些基于 Har 对象构建 Http Requests 的工厂。

# ruby-on-rails - 移植和备份数据库

> ID：11674424
> 
> 赞同：0
> 
> 时间：2012-07-26T17:06:50.050
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我在 Rails 3.2 应用程序的开发中使用 sqlite3，在生产中使用 mysql。

我希望能够备份 mysql，并创建它的 sqlite 副本以在开发环境中使用。任何人都知道如何做到这一点，或者至少是备份 mysql 的首选方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-23T05:46:24.137

如果您有一个大型数据库，这可能不可行，但我正在使用一个相当小的数据库（大约 10MB）。 **(1)**我使用 rake 任务将所有模型类备份到 .zip 文件中，然后

**(2)**有一个按钮（具有管理员身份验证）运行另一个 rake 任务以重新加载数据。

所以我可以在 dev/prod 模式下备份数据，将我的文件推送到另一个环境，然后从备份中重新加载数据（它在 .csv 文件中，因此它与 DB 无关）。这对我在 sqlite3 和 mysql2 之间切换有用（如果相关的话，我正在使用 Rails 4.0.1）。

如果这对人们有帮助，我可以发布代码，但它有点乱，所以除非有人觉得它有帮助，否则我会省去眼睛。我发现 .csv 到 .zip 文件备份对于不同的 SQL 系统来说是一个很好的解决方法，如果你正在处理兆字节的顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T20:50:20.513

我偏爱这个，并使用它大量转换为/从 MSSQL、sqlite 和 MySQL 转换： [https ://github.com/unixmonkey/rails_db_convert_using_adapters](https://github.com/unixmonkey/rails_db_convert_using_adapters)

# c - 如何打印编号。给定整数可以用不同数字的总和表示的方式有哪些？

> ID：11674426
> 
> 赞同：0
> 
> 时间：2012-07-26T17:06:57.493
> 
> 标签：c, algorithm

假设我有一个数字 5，现在表示 5 的总和的可能组合是：

4 + 1

3 + 2

3 + 1 + 1

2 + 2 + 1

2 + 1 + 1 + 1

1 + 1 + 1 + 1 + 1

我们如何在 C 中为此创建程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T17:33:45.563

让我换一种说法（以帮助递归）：

总和为 5 的所有不同组合由

*   4 + 所有以最多 4 开头的总和为 1 的组合
*   3 + 所有以 3 开头的总和为 2 的组合
*   2 + 所有以 2 开头的总和为 3 的组合
*   1 + 所有以最多 1 开头的总和为 4 的组合

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T17:56:36.033

```
#include <stdio.h>
#include <stdlib.h>

int *LIST;   /* result work list */
int LEVEL=-1;/* partition level */

void print (void){
    int i;

    for(i=LEVEL;i>=0;--i){
        printf("%d",LIST[i]);
        if(i!=0)
            printf(" + ");
    }
    printf("\n");
}

void part(int n){
    int i, first; /* first is last-1  */

    if(n<1) return ;
    LIST[++LEVEL]=n; /* add list tail */
    print();

    first=(LEVEL==0) ? 1 : LIST[LEVEL-1];

    for(i=first;i<=n/2;i++){ /* candidate > first */
        LIST[LEVEL]=i; /* last element replace */
        part(n-i);
    }
    LEVEL--;
    return;
}

int main(int argc, char **argv){
    int N;

    N=(argc>1)?atoi(argv[argc-1]):5;

    LIST=(int *)calloc(N, sizeof(int));
    if(LIST==NULL){
        fprintf(stderr, "not enough memory\n");
        return -1;
    }

    part(N);
    free(LIST);

    return 0;
}
/* result
5
4 + 1
3 + 1 + 1
2 + 1 + 1 + 1
1 + 1 + 1 + 1 + 1
2 + 2 + 1
3 + 2
*/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T17:26:22.507

```
Function that returns an array of sets:

Set[] SumComb(int n) {
  If n == 1 return { 1 };
  Set[] ResultN_1 = SumComb(n-1);
  Set[] ResultN;
  for each set S in ResultN_1 {
    Insert { S , 1 } to ResultN
    for each element E in S {
      Let TmpS = S
      Remove E from TmpS
      Increment E
      Add E to TmpS
      Sort TmpS
      Insert TmpS to ResultN if not already inserted
    } 
  }
} 
```

# iphone - 有没有办法在没有方向的情况下创建 UIImage？

> ID：11674429
> 
> 赞同：0
> 
> 时间：2012-07-26T17:07:12.920
> 
> 标签：iphone, ios, xcode, uiimageview, crop

我即将裁剪图像，但在使用`CGImageCreateWithImageInRect`.

`CGImageCreateWithImageInRect`根据 UIImage 方向裁剪图像，因此我无法获得所需的正确图像。

我想要 UIImage/maybe-camera-image 中没有方向元数据的普通图像。

有没有办法做到这一点？

**编辑：** 我有一些选定的“UIImage”矩形。如果我在“UIImage”上应用裁剪，它会以其他方向给出不同的输出

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-13T18:01:46.923

可以帮助某人！

```
-(UIImage*) removeImageOrientation:(UIImage*)ImgtakenByUser
{
    UIGraphicsBeginImageContext(ImgtakenByUser.size);
    [ImgtakenByUser drawInRect:CGRectMake(0, 0, ImgtakenByUser.size.width, ImgtakenByUser.size.height)];
    UIImage *_image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return _image;

} 
```

谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T17:19:49.700

尝试这个：

```
 CGImageRef imageRef = CGImageCreateWithImageInRect(src.CGImage, croppingRect);
    UIImage *result = [UIImage imageWithCGImage:imageRef scale:1.0f orientation:src.imageOrientation]; 
```

# php - 是 MAX、MIN、SUM SQL 命令标准跨不同的 RDBMS

> ID：11674430
> 
> 赞同：0
> 
> 时间：2012-07-26T17:07:24.450
> 
> 标签：php, sql, aggregate-functions, rdbms, rdbms-agnostic

我现在只安装了 MySQL，但是在 PgSQL、MS SQL 等中运行时它们会正常工作吗？

```
SELECT MAX(field) as max_field FROM table
SELECT MIN(field) as max_field FROM table
SELECT SUM(field) as max_field FROM table 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T17:10:48.367

您可以自己检查，但聚合函数在大多数（如果不是全部）RDBMS 中都很常见：

*   [H2 聚合函数](http://www.h2database.com/html/functions.html)
*   [Oracle 聚合函数](http://docs.oracle.com/cd/E11882_01/server.112/e10592/functions003.htm)
*   [PostgreSQL 聚合函数](http://www.postgresql.org/docs/8.2/static/functions-aggregate.html)
*   [SQL Server 聚合函数](http://msdn.microsoft.com/en-us/library/ms173454.aspx)

你明白了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T17:11:07.583

是的，它们在每个数据库中都运行良好。

```
SELECT AVG(field) as max_field FROM table -- Work fine too 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T17:12:01.670

*所有**SQL RDBMS 都设计为与 SQL 语言一起使用。他们都是。这就是为什么它们被称为*SQL RDBMSes。聚合函数是标准 SQL 的一部分，因此可以在 SQL 可用的任何地方使用。

# android - 形状识别

> ID：11674432
> 
> 赞同：3
> 
> 时间：2012-07-26T17:07:30.863
> 
> 标签：android, image-processing, shapes, image-recognition

我需要实现一个简单的 Android 应用程序，允许用户在他们的手机上绘制一个“简单”的形状（圆形、三角形等），然后询问服务器绘制的形状是否与其数据库中的一个形状匹配，该数据库由一个低形状的数量（假设 < 100，但可以更多）。为了使这个应用程序工作，我正在考虑使用以下步骤（我们假设输入图像仅包含黑白像素）；

A. 重新调整大小并裁剪输入图像，使其与数据库中的图像具有相同的比例

B. 将输入图像旋转一个小角度（比如说 15 度）x 次（在本例中为 24），并尝试将这些旋转中的每一个与 DB 中的每个形状进行匹配。

问题：

1.  对于 A，最好的方法是什么？在将数据发送到服务器之前，我正在考虑在 Android 应用程序中实现这一步。
2.  对于 B，比较仅包含一个形状的 2 个黑白像素图像的体面算法是什么？
3.  有没有更好/更简单的方法来实现这个？一个也有实现的解决方案是可取的。

PS：我可以看到很多人在这里讨论过类似的话题，但我似乎无法找到足够符合我要求的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T21:11:21.197

### 机器学习方法

您选择一些描述轮廓的特征，选择一些分类方法，准备一组标记轮廓的训练集，训练分类器，在程序中使用它。

**轮廓特征。**给定一个轮廓（在图像中检测到或从用户输入构建），您可以计算旋转不变矩。最古老，最广为人知的是一组[胡时刻](http://en.wikipedia.org/wiki/Image_moment#Rotation_invariant_moments)。

您还可以考虑轮廓的特征，例如偏心率、面积、凸度缺陷、质心距离函数的 FFT 变换等。

**分类器。**现在你需要训练一个分类器。支持向量机、神经网络、决策树、贝叶斯分类器是一些流行的方法。有[很多方法可供选择](http://en.wikipedia.org/wiki/Statistical_classification)。如果您选择 SVM，[LIBSVM](http://www.csie.ntu.edu.tw/~cjlin/libsvm/)是一个免费的 SVM 库，它也适用于 Java，也适用于 Android。

### 临时规则方法

您还可以使用多边形曲线近似轮廓（请参阅[Ramer-Douglas-Peucker 算法](http://en.wikipedia.org/wiki/Ramer-Douglas-Peucker_algorithm)，OpenCV 库中有一个免费实现，现在可在 Android 上使用）。对于某些简单的形式，如三角形或矩形，您可以轻松发明一些特别的启发式规则来“识别”它们（例如，如果闭合轮廓可以仅用三段和小误差来近似，那么它很可能是三角形；如果质心距离函数几乎是恒定的，并且凸度缺陷为零，那么它很可能是一个圆）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T17:44:10.493

由于这与手写识别非常相关，因此您可以使用简单的 hmm 算法将形状与预学习的 db 进行比较。

但是对于更简单的方法，您可以检测图像中的角点，然后计算角点以检测形状。

第一种方法可用于任何复杂的形状，而第二种方法仅适用于基本形状。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T20:05:38.057

您可以使用[监督学习](http://en.wikipedia.org/wiki/Supervised_learning)方法。对于您要解决的问题，我认为简单的分类器，如[Naive Bayes](http://en.wikipedia.org/wiki/Naive_Bayes_classifier)、[KNN](http://en.wikipedia.org/wiki/K-nearest_neighbor_algorithm)等应该会给您带来好的结果。

您需要从每个图像中提取特征。对于每个图像，您可以将它们保存在矢量中。让我们称之为特征向量。对于数据库中的图像，您已经知道形状的类型，因此您可以在特征向量中包含类型的 id。这将作为训练集。

一旦你有了训练集，你就可以训练你的分类器，每次你想对一个新的形状进行分类时，你只需要得到它的特征向量并用它来查询分类器。

我建议您使用比例和大小不变的功能，这样您就不必重新调整每个图像的大小，您只需要比较一次而不是旋转它。

您可以快速搜索缩放/旋转不变特征并尝试它们。

# python - Django本地化，提取字符串到单独的消息文件

> ID：11674444
> 
> 赞同：2
> 
> 时间：2012-07-26T17:07:56.467
> 
> 标签：python, django, internationalization

是否有任何简单的方法可以将模板文件中的字符串提取到单独的消息文件中，然后在模板 html 中通过键引用它们？

在 Java Iuse 字符串的属性文件中：

```
i18n.header.title=This is title
i18n.header.content=Long content with some parameters {0} here. 
```

在jsp中我使用：

```
<h4><fmt:message key="18n.header.title"/></h4>
<p><fmt:message key="18n.header.title">
        <fmt:param>A param</fmt:param>
    </fmt:message>
</p> 
```

这是一种方便的方式，我正在 django 中寻找类似的方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T19:00:11.007

听起来您正在寻找的是 Django 对[翻译](https://docs.djangoproject.com/en/dev/topics/i18n/translation/)和[消息文件](https://docs.djangoproject.com/en/dev/topics/i18n/translation/#message-files)的支持。

特别是我认为您正在寻找[blocktrans](https://docs.djangoproject.com/en/dev/topics/i18n/translation/#blocktrans-template-tag)模板标签。

# windows - JPEG数字证书

> ID：11674445
> 
> 赞同：1
> 
> 时间：2012-07-26T17:08:17.897
> 
> 标签：windows, certificate, x509certificate, digital-signature

是否可以将数字 SSL 证书注入图像？我知道如何签署可执行文件 (.exe) 文件或 PowerShell 脚本 (.ps1)，但是否可以使用图像 (JPEG)？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T17:36:13.147

您可以创建一个分离的 CMS 签名并将其与 JPEG 文件一起传递。好处是原始 JPEG 文件不会以任何方式修改。

我想到的另一个想法是将JPEG放入PDF并使用PDF签名技术对PDF进行签名。但这不会让您轻松提取 JPEG（尽管用户将能够轻松查看它）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T03:13:43.330

我是“dSIG”块的共同发明者，该块涉及嵌入在 PNG 中的数字签名。我相信这更多的是关于你真正追求的东西，你可能想看看[规范](ftp://ftp.simplesystems.org/pub/png/documents/signatures/index.html)。

您可以使用仅包含证书但没有实际 SignerInfo 的退化 CMS 签名来将证书添加到 PNG 图像中，但我认为实际签名可能更多地与您真正想要的有关？

这种方法的美妙之处在于，不知道 dSIG 的软件将继续显示图像，就好像它根本没有签名一样，它会简单地忽略额外的 dSIG 块。

# sql-server - 从 ODBC DSN 连接切换到 OLEDB 后出错

> ID：11674451
> 
> 赞同：2
> 
> 时间：2012-07-26T17:08:34.797
> 
> 标签：sql-server, asp-classic, odbc, oledb

从我的 ASP 应用程序到我的 SQL Server 数据库，我一直遇到超时和登录连接问题。我的托管服务提供商建议将我的连接字符串从 ODBC DSN 更改为 OLEDB。一旦我这样做了，我在执行我的第一个存储过程时就会收到这个错误。

> 过程或函数“storedproc”需要参数“@param1”，但未提供该参数。

这是我的连接字符串

```
Dim objconn
Set objconn = Server.CreateObject("ADODB.Connection")
objconn.open "Provider=SQLOLEDB;Data Source=localhost\sqlexpress;Initial Catalog=db;user id=user;password=pw" 
```

这是我的存储过程调用

```
Dim objrs, cmd
Set cmd = Server.CreateObject("ADODB.Command")
Set cmd.ActiveConnection = objconn
cmd.CommandText = "storedproc"
cmd.Parameters.Append(cmd.CreateParameters("param1",adDouble,adParamInput,,session("param1")))
Set objrs = Server.CreateObject("ADODB.Recordset")
objrs.CursorLocatoin = adUseClient
objrs.Open cmd 
```

任何想法为什么我的 proc 调用不适用于不同的连接字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T00:06:15.293

有一些拼写错误，`.CreateParameters => .CreateParameter`我`.CursorLocatoin => .CursorLocation`
忽略了它们，因为看起来拼写错误只适用于问题。

[CommandType 属性](http://msdn.microsoft.com/en-us/library/windows/desktop/ms678358%28v=vs.85%29.aspx)

> 如果 CommandType 属性值设置为默认值 adCmdUnknown，您可能会遇到性能下降的情况，因为 ADO 必须调用提供程序以确定 CommandText 属性是 SQL 语句、存储过程还是表名。如果您知道所使用的命令类型，则设置 CommandType 属性会指示 ADO 直接转到相关代码。如果 CommandType 属性与 CommandText 属性中的命令类型不匹配，则在调用 Execute 方法时会出错。

`CommandType`据我了解，未指定时，操作因提供商而异。

我使用 SQL Server Profiler 跟踪查询。我看到的是 OLEDB Provider，没有 CommandType 属性的命令对象在后台执行没有参数的查询，例如：`Exec storedproc`，这意味着如果过程是无参数的，它可以正常工作。然而它应该是`Exec storedproc parametervalue`。另一方面，正如您所说，相同的代码在 MySQL 上就像一个魅力。

因此，需要指定`cmd.CommandType`等于`adCmdStoredProc`4 **，**然后您的代码才能工作。
顺便说一句，默认为**-1** ( `adCmdUnknown`)。

# java - 从传递给 DataProvider 的方法中获取 testContext

> ID：11674459
> 
> 赞同：0
> 
> 时间：2012-07-26T17:09:01.610
> 
> 标签：java, testng

是否可以从传递给 DataProvider 的方法中获取 TextContext？这就是我的意思。。

```
@DataProvider(name= "foo")
public static Object[][] testData(Method method){
    TestContext tc = //possible?
    //reason for this, I want to get some property from TextContext
    Object x = tc.getAttribute("bar");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T21:06:43.060

只需声明您的`ITestContext`in 参数，TestNG 就会为您注入它：

```
@DataProvider(name= "foo")
public Object[][] testData(Method method, ITestContext context) { 
```

# netbeans - 哈德森 netbeans 项目构建

> ID：11674460
> 
> 赞同：1
> 
> 时间：2012-07-26T17:09:02.003
> 
> 标签：netbeans, continuous-integration, hudson, jenkins

我想在 Hudson 开始工作以构建我的 netbeans Web 项目。虽然我可以`ant dist`在我的项目目录中成功运行，但我的 hudson 任务在其自己的工作区中更新（拉取）数据后引发以下错误

```
-init-debug-args:

BUILD FAILED
C:\Windows\System32\config\systemprofile\.hudson\jobs\Scribe\workspace\nbproject\build-impl.xml:485: Execute failed: java.io.IOException: Cannot run program "${platforms.JDK_1.6_64_Bit_.home}\bin\java": CreateProcess error=2, The system cannot find the file specified
    at java.lang.ProcessBuilder.start(ProcessBuilder.java:460)
    at java.lang.Runtime.exec(Runtime.java:593)
    at org.apache.tools.ant.taskdefs.Execute$Java13CommandLauncher.exec(Execute.java:862)
    at org.apache.tools.ant.taskdefs.Execute.launch(Execute.java:481)
    at org.apache.tools.ant.taskdefs.Execute.execute(Execute.java:495)
    at org.apache.tools.ant.taskdefs.ExecTask.runExecute(ExecTask.java:631)
    at org.apache.tools.ant.taskdefs.ExecTask.runExec(ExecTask.java:672)
    at org.apache.tools.ant.taskdefs.ExecTask.execute(ExecTask.java:498)
    at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
    at sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
    at org.apache.tools.ant.Task.perform(Task.java:348)
    at org.apache.tools.ant.Target.execute(Target.java:390)
    at org.apache.tools.ant.Target.performTasks(Target.java:411)
    at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399)
    at org.apache.tools.ant.Project.executeTarget(Project.java:1368)
    at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
    at org.apache.tools.ant.Project.executeTargets(Project.java:1251)
    at org.apache.tools.ant.Main.runBuild(Main.java:809)
    at org.apache.tools.ant.Main.startAnt(Main.java:217)
    at org.apache.tools.ant.launch.Launcher.run(Launcher.java:280)
    at org.apache.tools.ant.launch.Launcher.main(Launcher.java:109)
Caused by: java.io.IOException: CreateProcess error=2, The system cannot find the file specified
    at java.lang.ProcessImpl.create(Native Method)
    at java.lang.ProcessImpl.<init>(ProcessImpl.java:81)
    at java.lang.ProcessImpl.start(ProcessImpl.java:30)
    at java.lang.ProcessBuilder.start(ProcessBuilder.java:453)
    ... 23 more

Total time: 0 seconds
[DEBUG] Skipping watched dependency update for build: Scribe #12 due to result: FAILURE
Finished: FAILURE 
```

我在哈德森的构建命令如下所示

```
set PATH=%PATH%;C:\Program Files\Java\jrockit-jdk1.6.0_29-R28.2.2-4.1.0\bin
set JAVA_HOME=C:\Program Files\Java\jrockit-jdk1.6.0_29-R28.2.2-4.1.0
I:\Developement\libs\apache-ant-1.8.2\bin\ant -Dj2ee.server.home=E:\eClinicalWorks\tomcat6 dist 
```

令人惊讶`ant`的是不能从“PATH”变量中识别出来，而是我必须给出绝对路径

build-impl.xml 可以在这里找到[http://cynosuredev.com/build-impl.xml](http://cynosuredev.com/build-impl.xml)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T06:26:47.933

我通过从永远不会提交的 netbeans 私有文件夹中复制 java 选项来解决这个问题:)

# javascript - Jquery UI 选项卡：基于选择框的下一个和上一个启用/禁用

> ID：11674461
> 
> 赞同：1
> 
> 时间：2012-07-26T17:09:02.610
> 
> 标签：javascript, jquery, jquery-ui, tabs

我目前正在使用仅使用下一个/上一个按钮操作的 Jquery UI 选项卡（这将迫使用户按顺序浏览选项卡）。在我的第一个选项卡中，我有一组动态选择框，我试图让用户选择一个类别及其对应的子类别，然后才能启用 NEXT 按钮。但是下一个按钮根本没有被禁用。

如何让用户从所有相应的选择框中进行选择，然后启用 NEXT 按钮？[例子](http://webprolearner.ueuo.com/dropdown-menu/test1.php)

我`$('.update').change(function()`在 JS 中添加了 NEXT/PREVIOUS 以检测最后一个选择框中的选定项目并为 NEXT 按钮提供支持

**下一个/上一个的 JS**

```
<script>
$(function() {
    var $tabs = $('#tabs').tabs({
        disabled: [0, 1]
    });

    $(".ui-tabs-panel").each(function(i) {
        var totalSize = $(".ui-tabs-panel").size() - 1;

        if (i != totalSize) {
            next = i + 2;
            $(this).append("<a href='#' class='next-tab mover' rel='" + next + "'>Next Page &#187;</a>");
        }

        if (i != 0) {
            prev = i;
            $(this).append("<a href='#' class='prev-tab mover' rel='" + prev + "'>&#171; Prev Page</a>");
        }
    });

    $('.update').change(function() {
        $('#tabs').tabs(
            'option',
            'disabled',
            (
                $(this).hasClass('last') &&
                parseInt($(this).val(), 10) > 0 ?
                [] :
                [1]
            )
        );
    });

    $('.next-tab, .prev-tab').click(function() {
        var tabIndex = $(this).attr("rel");
        $tabs.tabs('enable', tabIndex)
            .tabs('select', tabIndex)
            .tabs("option","disabled", [0, 1]);
        return false;
    });
});
</script> 
```

**更新选择框.js**

```
// following line is added to detect last select box picked
$('.update').removeClass('last');
if (!data.error) {
    obj.next('.update').html(data.list).removeAttr('disabled hidden');
} else {
    // following line is changed
    obj.addClass('last').nextAll('.update').attr({'disabled': true, 'hidden':true}).html('<option value="">----</option>');
} 
```

**选择框的 HTML**

```
<select name="gender" id="gender" class="update" size="7"> 
  <option value="">Select one</option> 
    <?php if (!empty($list)) { ?> 
        <?php foreach($list as $row) { ?> 
            <option value="<?php echo $row['id']; ?>"> 
                <?php echo $row['category_name']; ?> 
   </option> 
    <?php } ?> 
    <?php } ?> 
</select> 

<select name="category" id="category" class="update" disabled="disabled" hidden="hidden" size="7"> 
   <option value="">----</option> 
</select> 

<select name="colour" id="colour" class="update" disabled="disabled" hidden="hidden" size="7"> 
   <option value="">----</option> 
</select> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T20:33:32.103

好的，这是未经测试的。仅在下一次/上一次单击时更改选项卡，如果您不在第一个选项卡*(1)*上或*确实*存在最后一个选项卡并且选择了一个选项（除了中性选项）*(2)*。

```
$('.next-tab, .prev-tab').click(function() {
    var tabIndex = $(this).attr("rel");
    if (
        /*(1)*/ $('#tabs').tabs('option', 'selected') > 0 ||
        /*(2)*/ ($('.update.last').length > 0 && parseInt($('.update.last').val(), 10) > 0)
    ) {
        $tabs.tabs('enable', tabIndex)
            .tabs('select', tabIndex)
            .tabs("option","disabled", [0, 1]);
    }
    return false;
}); 
```

祝你好运，明天见:-)

# c# - 无法使用 Elmah MVC 在生产服务器上访问 /elmah？

> ID：11674464
> 
> 赞同：55
> 
> 时间：2012-07-26T17:09:07.957
> 
> 标签：c#, asp.net-mvc, elmah, http-status-code-403

我安装了 elmah.mvc nuget 包，并保留了该 sans 的默认配置，以设置发送电子邮件并将其插入 SQL 数据库。

在我的本地计算机上，当我使用 Visual Studio 主机时，我可以打开我的应用程序并访问 /elmah 以查看错误报告。但是，当我尝试在生产环境中访问 /elmah 时，出现两个错误，首先是`403 access is denied`服务器错误。然后在我的电子邮件中（来自 elmah）我得到：

```
System.Web.HttpException: Server cannot set status after HTTP headers have been sent. 
```

任何人都知道这里发生了什么以及如何解决？谢谢。

到目前为止，我按照以下答案的建议尝试了以下方法：

在`<system.webServer>`

```
<handlers>
  <add name="elmah" verb="GET" path="elmah.axd" type="Elmah.ErrorLogPageFactory, Elmah"/>
</handlers> 
```

而在`<system.web>`

```
<httpHandlers>
<add verb="POST,GET,HEAD" path="elmah.axd" type="Elmah.ErrorLogPageFactory, Elmah" />
</httpHandlers> 
```

我尝试将路径设置为既`elmah.axd`简单又简单`~/elmah`。所有仍然给出相同的错误，并且仍然可以在本地工作，但不能在生产中。

**编辑：**当我远程进入服务器并通过浏览器访问它时它实际上也有效（不使用本地主机，而是实际的站点地址）。那我没有什么权限？似乎它在服务器级别。

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2012-07-27T02:45:54.113

您需要通过将以下配置设置添加到`<elmah>`web.config 文件中的部分来启用 Elmah 进行远程访问。此值的默认设置是 false，它只允许 localhost，因此它在 Visual Studio 中的本地计算机上工作。

```
 <elmah>
      <security allowRemoteAccess="true"/>
   </elmah> 
```

我自己似乎总是忘记这一点，花几分钟挠头；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T17:10:40.250

确保在 web.config 文件的 webServer 部分中定义了 HttpHandler。

```
<system.webServer>
  <httpHandlers>
    <add name="elmah" verb="GET" path="elmah.axd"  type="Elmah.ErrorLogPageFactory, Elmah"/>
  </httpHandlers>
</system.webServer> 
```

# django - Django 不翻译内置视图

> ID：11674467
> 
> 赞同：0
> 
> 时间：2012-07-26T17:09:29.317
> 
> 标签：django, view, internationalization, translation

我正在使用 auth.password_reset 来查看带有我自己的模板的视图。该模板有 1 个不会翻译的文本字符串。我对 i18n 并不完全陌生，所以我 99% 确信我涵盖了我所有的基础，并且如果这是我自己的观点，它会转化。以下是我确保不要忘记的事情：

-删除了;模糊标签 -确保我有正确的翻译字符串 -运行 makemessages，翻译和编译消息 -重新启动我的服务器

知道发生了什么吗？

# android - Android - 在 XML 中修改布局值

> ID：11674471
> 
> 赞同：1
> 
> 时间：2012-07-26T17:10:11.860
> 
> 标签：android, xml, size, android-actionbar

有没有办法在 XML 中分配资源时修改它的值？

例如，这很好用：

```
android:layout_height="?attr/actionBarSize" 
```

但我想将此值加倍为其宽度：

```
// this obviously doesn't work
android:layout_width="?attr/actionBarSize * 2" 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T17:15:34.713

您可以以编程方式执行此操作。

```
LinearLayout layout = (LinearLayout) findViewById(R.id.yourlayout);
LayoutParams params = layout.getLayoutParams();

params.width *= 2; 
```

# mysql - MySQL查询以将一列中的值匹配到另一列中的相同值

> ID：11674472
> 
> 赞同：0
> 
> 时间：2012-07-26T17:10:13.517
> 
> 标签：mysql

我有一个事务表，它有两个 id 参考字段 NEW_REF、Orginal_REF。因此，在这个事务表中，我可以拥有与一个事件实际相关的多个事务。添加新事件时，它会获得一个 NEW_REF 并且 Original_REF 字段为空。如果有关此事件的某些更改，则会创建一条新记录，并且新记录的 Original_REF 会更新为之前的 NEW_REF ID。

例如，在我的表中，我有：

```
REF1 | Original_Ref
 956 | 200
 960 | null
 967 | 960
 980 | 967
 990 | 600
 991 | 700
 992 | 670
 998 | 343
1000 | 980
1001 | 778
1010 | 787
1020 | 565 
```

例如，如果一个事件有多个相关事务，我希望能够有一个查询来提取每个事件的所有相关事务。在上面的例子中，我希望看到：

```
REF1 | Original_Ref
 960 | null
 967 | 960
 980 | 967
1000 | 980 
```

此处记录 960 为原始记录，已更新 3 次。有没有办法查询我的表来识别每个事件的相关事务并将其组合在一起？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T17:20:37.463

你的表的结构方式，你最终不得不做嵌套子查询。如果你的树比大约 3 个节点更深，它就会变得可怕。您可能会考虑这样的表结构：

```
id int unsigned auto_increment primary key,
parent_id int unsigned,
root_id int unsigned not null 
```

初始事件记录可能如下所示：`200, null, 200`. 第一个孩子可能是`547, 200, 200`。第n个孩子可能是`1038, 986, 200`。

所以查询一个事件的所有记录很简单：

```
SELECT * FROM mytable WHERE root_id= ? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T17:24:45.853

这可能是满足您要求的最快查询。请注意，它不会按“事务组”对结果记录进行分组——在这种情况下，单独使用 SQL 很难实现这样的排序。（我假设您已经在两列上都有单独的索引 - 如果没有，请确保您这样做，否则此查询将执行得很差。）

```
SELECT a.REF1, a.Original_Ref

FROM txn AS a

LEFT JOIN txn AS b
ON a.Original_Ref = b.REF1

LEFT JOIN txn AS c
ON c.Original_Ref = a.REF1

WHERE b.REF1 IS NOT NULL
   OR c.Original_Ref IS NOT NULL; 
```

您也可以使用相关子查询来执行此操作，但众所周知，MySQL 在将这些子查询优化为连接方面很差。

# mysql - 如何在 Rails / ActiveRecord 中的事务之外执行数据库操作

> ID：11674475
> 
> 赞同：11
> 
> 时间：2012-07-26T17:10:23.043
> 
> 标签：mysql, ruby-on-rails, activerecord

我需要在我的 Rails 应用程序中执行一些原始 SQL。如果在事务中执行查询，它会导致隐式提交。我们将 MySQL 与 InnoDB 一起使用，查询将包括例如创建表。

执行查询`ActiveRecord::Base.connection.execute`会触发隐式提交，这是一个问题。

感觉就像我只需要一个单独的连接来执行我的查询。ActiveRecord 可以提供这个吗？我已经看到了关于连接到多个数据库但不是多个连接到同一个数据库的讨论。

如果有更好的方法，解决方案不必涉及 ActiveRecord。

我们的 Rails 和 ActiveRecord 版本是 3.2.3。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-26T18:25:12.057

数据库连接是在每个线程的基础上完成的（这基本上是线程安全所必需的），您可以利用它来发挥自己的优势：例如，只需在单独的线程中执行您的代码

```
ActiveRecord::Base.transaction do
  # ...
  Thread.new do
    ActiveRecord::Base.connection.execute "..." # in a new connection
  end.join
end 
```

从 rails 4 开始，activerecord 不再自动获取以这种方式创建的连接。为了避免泄漏连接，您需要将它们返回到池中。正如 Matt Connelly 建议的那样，最简单的方法是使用`with_connection`在块末尾检查连接的方法，例如

```
Thread.new do
  ActiveRecord::Base.connection_pool.with_connection do
    ...
  end
end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-08-11T00:48:22.220

重要的是，如果您在线程中使用连接，则在完成后将连接返回到连接池。最简单的方法是这样的：

```
Thread.new do
  ActiveRecord::Base.connection_pool.with_connection do |connection|
    connection.execute "..." 
    # ensures the connection is returned to the pool when the thread is done.        
  end
end.join 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-26T18:16:46.683

DDl 和更多查询会触发隐式提交，因此它们不能按照 mysql 文档回滚

[http://dev.mysql.com/doc/refman/5.1/en/implicit-commit.html](http://dev.mysql.com/doc/refman/5.1/en/implicit-commit.html)

这些隐式地结束当前会话中活动的任何事务，就像您在执行语句之前完成了 COMMIT 一样。

如果两者之间没有这样的查询，那么您可以使用 SAVEPOINT 功能。（[这不适用于 DDL 语句](http://api.rubyonrails.org/classes/ActiveRecord/Transactions/ClassMethods.html#label-Caveats)）

在活动记录中有一个选项可以帮助创建使用保存点的子事务

```
 ActiveRecord::Base.transaction do
     # ...
   ActiveRecord::Base.transaction(:requires_new => true) do #creates save point
       # perform task 
       # if error occurs rollbacks only till the save point.
     end
   end 
```

查看[Rails 文档](http://api.rubyonrails.org/classes/ActiveRecord/Transactions/ClassMethods.html#label-Nested+transactions)以获取更多详细信息。

# php - 如何将 DateTime 与学说 MongoDB ODM 一起使用

> ID：11674476
> 
> 赞同：0
> 
> 时间：2012-07-26T17:10:24.087
> 
> 标签：php, mongodb, symfony, doctrine-orm, doctrine-odm

我一直在我的映射中使用“日期”和“时间戳”类型，然后处理对象中无处不在的 DateTime。突然我得到 MongoDate 和 MongoTimestamp 对象。这是有目的的更改还是错误？

运行最新的 symfony 和学说 master 分支。

# php - SQL 自动插入 - 时间格式 - 时间相差 10 小时？

> ID：11674478
> 
> 赞同：0
> 
> 时间：2012-07-26T17:10:37.177
> 
> 标签：php, mysql, sql

在我的 SQL Server 变量和设置中，系统时区以 MST 形式给出。我正在尝试将时区更改为伦敦，它不起作用在 PHP 代码中手动添加 10 小时不是一个选项，因为服务器是由 android 和 iphone 访问的。

我在数据库中尝试过

```
mysql > SET GLOBAL time_zone = timezone 
```

这表明

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'mysql&gt; SET GLOBAL time_zone = timezone' at line 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T17:19:23.290

在 SQL Server 中

```
ALTER DATABASE your-database-name SET TIMEZONE TO 'your-timezone'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T17:19:44.823

'mysql>' 不应该是查询的一部分。看起来您是从 mysql 文档中直接复制的，这很好，您正在寻找正确的位置。请理解，当您看到“mysql>”时，它只是表示命令行提示符（即，如果在命令提示符下在 MySQL 中运行）。

# c# - 除了 Windows 应用程序 C# 中 datagridview 的组合框中列出的值之外，用户还可以输入自己的值吗？

> ID：11674479
> 
> 赞同：-1
> 
> 时间：2012-07-26T17:10:37.620
> 
> 标签：c#

除了列出的值之外，我希望用户能够在数据网格视图的组合框中输入他们自己的值。

任何建议如何做到这一点？？？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T00:34:57.000

是的，您需要设置 SelectCommand、DeleteCommand、UpdateCommand、Insertcommand。并且取决于它是否绑定到数据库，您需要将它放在一个

我们需要看看你到目前为止有什么，你能发布你的代码吗？

# ruby-on-rails - 重启 Heroku 服务器的 Rake 任务

> ID：11674482
> 
> 赞同：0
> 
> 时间：2012-07-26T17:10:44.343
> 
> 标签：ruby-on-rails, heroku, rake

我正在尝试创建一个重新启动我的 heroku 服务的 rake 任务。我发现这篇文章帮助很大：[http](http://railspikes.com/2010/2/13/rake-task-for-deploying-to-heroku) ://railspikes.com/2010/2/13/rake-task-for-deploying-to-heroku 。

我拼凑了这个 rake 任务，但它给了我一个错误。我得到了消息：未初始化的常量 Heroku::Command::BaseWithApp。

这是我的方法。

```
desc 'restarts the server'
task restart_server: :environment do
  require 'heroku'
  require 'heroku/command'
  user, pass = File.read(File.expand_path("~/.heroku/credentials.txt")).split("\n")
  heroku = Heroku::Client.new(user, pass)

  cmd = Heroku::Command::BaseWithApp.new([])
  remotes = cmd.git_remotes(File.dirname(__FILE__) + "/../..")

  remote, app = remotes.detect {|key, value| value == (ENV['APP'])}# || cmd.app)}

  if remote.nil?
    raise "Could not find a git remote for the '#{ENV['APP']}' app"
  end

  heroku.restart(ENV['APP'])
end 
```

我不确定它为什么拒绝 Heroku::Command。该应用程序已经在 Heroku 上运行，所以我知道它与 Heroku 兼容。

有什么建议吗？

编辑：这是我的堆栈跟踪。

```
** Invoke restart_server (first_time)
** Invoke environment (first_time)
** Execute environment
** Execute restart_server
rake aborted!
uninitialized constant Heroku::Command::BaseWithApp
/Users/bendowney/Sites/ProblemChildApp/lib/tasks/scheduler.rake:51:in `block in <top (required)>'
/Users/bendowney/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/Users/bendowney/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
/Users/bendowney/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/Users/bendowney/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/Users/bendowney/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
/Users/bendowney/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/Users/bendowney/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/Users/bendowney/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/Users/bendowney/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task'
/Users/bendowney/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block (2 levels) in top_level'
/Users/bendowney/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'
/Users/bendowney/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block in top_level'
/Users/bendowney/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/Users/bendowney/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'
/Users/bendowney/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `block in run'
/Users/bendowney/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/Users/bendowney/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/Users/bendowney/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'
/Users/bendowney/.rvm/gems/ruby-1.9.3-p194@global/bin/rake:19:in `load'
/Users/bendowney/.rvm/gems/ruby-1.9.3-p194@global/bin/rake:19:in `<main>'
/Users/bendowney/.rvm/gems/ruby-1.9.3-p194@ProblemChildApp/bin/ruby_noexec_wrapper:14:in `eval'
/Users/bendowney/.rvm/gems/ruby-1.9.3-p194@ProblemChildApp/bin/ruby_noexec_wrapper:14:in `<main>'
Tasks: TOP => restart_server 
```

# ios - uitableview 第一个和最后一个可见单元格颜色变化

> ID：11674487
> 
> 赞同：1
> 
> 时间：2012-07-26T17:11:08.503
> 
> 标签：ios, uitableview

我正在尝试在`UITableView`iPhone 中实现此功能：始终只有 FIRST 和 LAST VISIBLE 单元格具有不同的背景颜色，例如红色，而其他单元格的颜色保持白色。滚动过程中的平滑变化。
我试过了：

在`.m`文件中：

```
NSIndexPath *firstRow;
UITableViewCell* firstCell;

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *simpleTableIdentifier = @"tableCell";    
    tableCell *cell = (tableCell *)[tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];

    if (cell == nil) 
    {
        NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"tableCell" owner:self options:nil];
        cell = [nib objectAtIndex:0];
    } 

    cell.nameLabel.text = [tableData objectAtIndex:indexPath.row];
    //cell.thumbnailImageView.image = image;

    return cell;
}

- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath;
{
    NSArray *visible = [tableView indexPathsForVisibleRows];
    firstRow = (NSIndexPath *)[visible objectAtIndex:0];
    firstCell = [tableView cellForRowAtIndexPath:firstRow];
    firstCell.contentView.backgroundColor=[UIColor redColor];
    NSLog(@"main visible cell's row: %i", firstRow.row);
    [tableView endUpdates];
    firstCell.contentView.backgroundColor=[UIColor redColor];   
} 
```

但是向上滚动时颜色不会更新。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T17:45:01.973

如果需要，您可以在 cellForRowAtIndexPath 中完成所有操作。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    NSString *tableViewCellID = @"cellID";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:tableViewCellID];
    if (!cell) 
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:tableViewCellID];

    [[cell textLabel] setText:[NSString stringWithFormat:@"some sting %i", [indexPath row]]];

    NSArray *visibleCells = [tableView visibleCells];

    for (int i = 0; i < [visibleCells count]; i++) {
        UITableViewCell *cell = [visibleCells objectAtIndex:i];
        if (i == 0 || i == [visibleCells count] - 1)
            [cell setBackgroundColor:[UIColor redColor]];
        else 
            [cell setBackgroundColor:[UIColor clearColor]];
    }

    return cell;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-26T17:23:24.653

在你的

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

尝试这样的事情

```
//Find the first row
if(indexPath.row == 0){
    cell.contentView.backgroundColor = [UIColor redColor];
} 
```

并检查最后一行，你应该重用你为

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section 
```

# c# - .net c# 等待异步事件完成并在代码中仍有“同步”流程的最佳方式

> ID：11674490
> 
> 赞同：9
> 
> 时间：2012-07-26T17:11:30.020
> 
> 标签：c#, .net, asynchronous

我的一般性问题是：您如何编写仍然清晰且易于遵循的异步代码，就像同步解决方案一样？

我的经验是，如果你需要使一些同步代码异步，使用像 BackgroundWorker 这样的东西，你不再有一系列易于遵循的程序语句来表达你的整体意图和活动顺序，你最终会得到一堆“完成”事件处理程序，每个处理程序都启动下一个 BackgroundWorker，生成的代码非常难以遵循。

我知道这不是很清楚。更具体的东西：

假设我的 WinForms 应用程序中的一个函数需要启动一些亚马逊 EC2 实例，等待它们开始运行，然后等待它们全部接受 SSH 连接。伪代码中的同步解决方案可能如下所示：

```
instances StartNewInstances() {
    instances = StartInstances()
    WaitForInstancesToBecomeRunning(instances)
    WaitForInstancesToAcceptSSHConnection(instances).
    return (instances)
    } 
```

那很好。发生的事情很清楚，程序动作的顺序也很清楚。没有白噪音分散您对代码和流程的理解。我真的很想得到看起来像这样的代码。

但实际上，我不能有一个同步的解决方案..这些功能中的每一个都可以运行很长时间，并且每个都需要执行以下操作：更新 ui，监控超时，并定期重试操作，直到成功或超时。简而言之，这些都需要在后台发生，以便前台 UI 线程可以继续运行。

但是，如果我使用像 BackgroundWorker 这样的解决方案，似乎我最终不会像上面那样轻松地遵循程序逻辑。相反，我可能会从我的 UI 线程启动一个后台工作程序来执行第一个功能，然后我的 ui 线程在工作线程运行时返回到 UI。当它完成时，它的“完成”事件处理程序可能会启动下一个后台工作程序。当它完成时，它的“完成”事件处理程序可能会启动最后一个 BackgroundWorker，依此类推。这意味着您必须“跟踪”完成事件处理程序才能了解整个程序流程。

必须有一种更好的方法a）让我的UI线程响应，b）让我的异步操作能够更新ui，最重要的是c）能够将我的程序表达为一系列连续的步骤（就像我已经如上所示）以便有人可以理解生成的代码

任何和所有输入将不胜感激！迈克尔

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-26T17:15:08.883

> 我的一般性问题是：您如何编写仍然清晰且易于遵循的异步代码，就像同步解决方案一样？

你等待 C# 5。现在不会太久了。`async`/`await`岩石。您确实在上面的句子中描述了该功能...有关教程、语言规范、下载等，请参见[Visual Studio 异步主页。](http://msdn.microsoft.com/en-us/vstudio/async.aspx)

目前，真的*没有*一个非常干净的方法——这就是为什么首先需要这个功能。异步代码很自然地变得一团糟，尤其是当您考虑错误处理等时。

您的代码将表示为：

```
async Task<List<Instance>> StartNewInstances() {
    List<Instance> instances = await StartInstancesAsync();
    await instances.ForEachAsync(x => await instance.WaitUntilRunningAsync());
    await instances.ForEachAsync(x => await instance.WaitToAcceptSSHConnectionAsync());
    return instances;
} 
```

这是假设有*一些*额外的工作，例如`IEnumerable<T>`表单上的扩展方法

```
public static Task ForEachAsync<T>(this IEnumerable<T> source,
                                   Func<T, Task> taskStarter)
{
    // Stuff. It's not terribly tricky :(
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T17:20:05.183

如果您不能像 Jon 正确建议的那样等待 5，我建议您查看[Task Parallel Library](http://msdn.microsoft.com/en-us/library/dd460717.aspx)（.NET 4 的一部分）。它围绕您在问题中描述的“异步执行此操作，并在它完成时执行此操作”范例提供了很多管道。它还对异步任务本身的错误处理提供了坚实的支持。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-26T17:35:01.150

`Async/await`真的是最好的方法。但是，如果您不想等待，可以尝试[Continuation-passing-style](http://en.wikipedia.org/wiki/Continuation-passing_style)或 CPS。为此，您将委托传递给异步方法，该方法在处理完成时调用。在我看来，这比拥有所有额外的事件要干净。

这将改变这个方法签名

```
Foo GetFoo(Bar bar)
{
    return new Foo(bar);
} 
```

到

```
void GetFooAsync(Bar bar, Action<Foo> callback)
{
    Foo foo = new Foo(bar);
    callback(foo);
} 
```

然后使用它，你会有

```
Bar bar = new Bar();
GetFooAsync(bar, GetFooAsyncCallback);
....
public void GetFooAsyncCallback(Foo foo)
{
    //work with foo
} 
```

`GetFoo`当可能引发异常时，这会变得有点棘手。我更喜欢的方法是更改`GetFooAsync`​​ .

```
void GetFooAsync(Bar bar, Action<Func<Foo>> callback)
{
    Foo foo;
    try
    {
        foo = new Foo(bar);
    }
    catch(Exception ex)
    {
        callback(() => {throw ex;});
        return;
    }

    callback(() => foo);
} 
```

您的回调方法将如下所示

```
public void GetFooAsyncCallback(Func<Foo> getFoo)
{
    try
    {
        Foo foo = getFoo();
        //work with foo
    }
    catch(Exception ex)
    {
        //handle exception
    }
} 
```

其他方法包括给回调两个参数，实际结果和异常。

```
void GetFooAsync(Bar bar, Action<Foo, Exception> callback); 
```

这依赖于回调检查异常，这可能允许它被忽略。其他方法有两个回调，一个代表成功，一个代表失败。

```
void GetFooAsync(Bar bar, Action<Foo> callback, Action<Exception> error); 
```

对我来说，这使流程更加复杂，并且仍然允许忽略异常。

但是，为回调提供一个必须调用才能获得结果的方法会强制回调处理异常。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-26T17:25:33.950

> 当它完成时，它的“完成”事件处理程序可能会启动下一个后台工作程序。

这是我一直在努力解决的问题。基本上等待进程完成而不锁定 UI。

但是，您可以在一个 backgroundWorker 中完成所有任务，而不是使用 backgroundWorker 来启动 backgroundWorker。在 backgroundWorker.DoWork 函数中，它在该线程上同步运行。因此，您可以拥有一个处理所有 3 个项目的 DoWork 函数。

然后你必须等待一个 BackgroundWorker.Completed 并拥有“更干净”的代码。

所以你可以最终得到

```
BackgroundWorker_DoWork
  returnValue = LongFunction1
  returnValue2 = LongFunction2(returnValue)
  LongFunction3

BackgroundWorker_ProgressReported
  Common Update UI code for any of the 3 LongFunctions

BackgroundWorker_Completed
  Notify user long process is done 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T18:12:26.727

在某些情况下（稍后将解释），您可以将异步调用包装到类似以下伪代码的方法中：

```
byte[] ReadTheFile() {
  var buf = new byte[1000000];
  var signal = new AutoResetEvent(false);
  proxy.BeginReadAsync(..., data => {
    data.FillBuffer(buf);
    signal.Set();
  });
  signal.WaitOne();
  return buf;
} 
```

要使上述代码正常工作，需要从不同的线程调用回调。所以这取决于你正在使用什么。根据我的经验，至少 Silverlight Web 服务调用是在 UI 线程中处理的，这意味着无法使用上述模式 - 如果 UI 线程被阻塞，甚至无法执行之前的 begin 调用。如果您正在使用这种框架，处理多个异步调用的另一种方法是将您的更高级别的逻辑移动到后台线程并使用 UI 线程进行通信。然而，在大多数情况下，这种方法有点过头了，因为它需要一些样板代码来启动和停止后台线程。

# emacs - 使用 auctex 跳转到下一个缺失的参考

> ID：11674495
> 
> 赞同：7
> 
> 时间：2012-07-26T17:11:42.103
> 
> 标签：emacs, latex, auctex

我正在使用 emacs + auctex 来满足我所有的 TeXing 需求，我对工作流程非常满意。然而，有一件事情困扰着我。每当我编译一个文档（可能由多个文件组成）并且缺少参考时，auctex 就会打印出这个烦人的消息

```
LaTeX Warning: Reference `fig:MyMissingLabel' on page 42 undefined on input line 37. 
```

就是这样。没有捷径可以跳转到缺少的参考，nada！
我知道我可以启用警告调试，但是，如果文档产生我不想调试的其他警告¹，这并不适合。

我想要一个defun，它将点循环到丢失引用的位置。因此我在网上没有找到任何东西，也许你们中的一个可以帮忙？

提前致谢！

埃勒马基尔

[1] 例如，某些包在未加载版本号或其他内容时会报告警告。我不想调试这个。我想更正我的参考资料！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T18:15:24.560

AUCTeX 中的快捷方式允许您跳转到错误。缺少的参考是警告。`TeX-toggle-debug-warnings`您可以通过将警告视为绑定到的错误来激活所需的行为`C-c C-t C-w`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-02T19:23:54.520

这个问题很老，但这是我的看法。一、定义函数

```
(defun my-ignore-TeX-warnings (type file line text &rest more)
  (setq ref "LaTeX Warning: Reference")
  (not (string-match-p ref text))) 
```

然后*自定义*两个变量`TeX-ignore-warnings`-`TeX-suppress-ignored-warnings`例如，

```
(custom-set-variables
 ;; custom-set-variables was added by Custom.
 ;; If you edit it by hand, you could mess it up, so be careful.
 ;; Your init file should contain only one such instance.
 ;; If there is more than one, they won't work right.
 '(TeX-ignore-warnings 'my-ignore-TeX-warnings)
 '(TeX-suppress-ignored-warnings t)) 
```

*注意*：注意上面的警告——也就是说，你应该只有*一个* `custom-set-variables`.

将代码放入您的`~/.emacs`或类似的文件中。然后，启用`TeX-toggle-debug-warnings`或通过菜单**Command->TeXing options->Debug warnings**。

循环遍历错误`C-``将包括未定义的引用。可以扩展上面的代码以选择未定义的引用。

你的，

基督教

# c# - 根据选择的单选按钮显示数据库值

> ID：11674497
> 
> 赞同：0
> 
> 时间：2012-07-26T17:11:43.340
> 
> 标签：c#, asp.net

我想根据选择的单选按钮在网格视图中显示数据库值。我目前正在使用 RadioButtonList，我应该根据他们在单选按钮中选择的交易日期显示某些交易。例如，如果他们选择查看过去 1 个月的交易，我的 gridview 应该只显示过去一个月的交易。我目前正在使用 C#。

日期根据系统日期检索，并在进行交易时记录。我可以知道如何使用 gridview 将无线电事务与数据库链接吗？

![在此处输入图像描述](../Images/ff71d71c942afd8c8a53b794324acd25.png) ![在此处输入图像描述](../Images/233a527d0a09f30eefd0516d9cebad72.png)

这是我对 gridview 的编码。

```
 myConnection.ConnectionString = strConnectionString;
    SqlCommand cmd = new SqlCommand("SELECT thDate, thType, thAmountIn, thAmountOut from [Transaction] ORDER BY thDate, thType, thAmountIn, thAmountOut DESC", myConnection);
    myConnection.Open();
    SqlDataReader reader1 = cmd.ExecuteReader();
    GridView1.DataSource = reader1;
    GridView1.DataBind(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T17:25:41.873

鉴于我看不到您的任何代码：

在 RadioButtonList 的 OnSelectedIndexChanged 事件上，您可以使用 RadioButtonList1.SelectedItem.Value 选择哪个单选按钮

然后您可以使用 Sql 查询来获取结果并将其绑定到您的 Datagrid

**例子 ：**

```
//This is the method for event OnSelectedIndexChanged 
void Index_Changed(Object sender, EventArgs e)
{
  //RadioButtonList1.SelectedItem.Value use the value
   and to built as sql query string on your sqldatasource
  //Execute 
  //attach datasource to datagrid
  //Databind datagrid
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T17:32:51.160

尝试这样的事情：

```
DataTable table= new DataTable("table");
using (SqlConnection sqlConn = new SqlConnection(@"Your Connection Stuff;"))
{
if (radioButton1.Checked == true)
{
using (SqlDataAdapter da = new SqlDataAdapter("SELECT * FROM yourdatabase WHERE date = " + date, sqlConn))
{
da.Fill(table);
}
dataGridView1.DataSource = table;
} 
```

这会将表格链接到数据网格：

```
dataGridView1.DataSource = table; 
```

**基于您的代码的示例：**

您可以像这样获取当前日期：

```
DateTime date = DateTime.Now; 
```

您的 sql 命令将变为：

```
SqlCommand cmd = new SqlCommand("SELECT thDate, thType, thAmountIn, thAmountOut from [Transaction] WHERE thDate = " + date + " ORDER BY thDate, thType, thAmountIn, thAmountOut DESC", myConnection); 
```

您可以像这样实现 if 语句：

```
if(radioButton1.Checked == true)
{
cmd += " WHERE thDate = " + date + ";
} 
```

# objective-c - 当我在其中搜索 NSString 时，如何确定 NSMutableArray 中对象的索引？

> ID：11674498
> 
> 赞同：1
> 
> 时间：2012-07-26T17:11:56.567
> 
> 标签：objective-c, xcode, nsmutablearray, xcode4.3, uisearchbar

目前，我正在使用表中显示的数据库中的数据对 UISearchBar 的搜索功能进行编码。我找出搜索结果并将它们保存到`NSMutableArray *searchResults`. 看起来是这样的：

```
- (void) searchGrapesTableView {
    [searchResult removeAllObjects];
    numSearchWines=0;
    for (NSString *str in listOfWines)
    {
        NSRange titleResultsRange = [str rangeOfString:searchBar.text options:NSCaseInsensitiveSearch];
        if (titleResultsRange.length > 0) {
            [searchResult addObject:str];
            numSearchWines++;
        }
    }
} 
```

`listOfWines`也是一个 NSMutableArray ，其中包含可以从中搜索的所有名称的列表。理想情况下，我想确定`listOfWines`具有匹配值的对象的索引并将其添加到另一个 NSMutableArray，这样我以后可以很容易地访问它。例如，稍后当我使用此搜索数据显示表格单元格时，我有以下代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    UITableViewCell *cell = [self.tableView dequeueReusableCellWithIdentifier:@"wineCell"];
    //determine how many to add to get the grape ID
    NSInteger grapeID=0;
    for (int i=0; i<indexPath.section; i++) {
        grapeID += [self.tableView numberOfRowsInSection:i];
    }

    Wines *currentWine;
    if (isSearchOn) {
        NSString *cellValue = [searchResult objectAtIndex:(grapeID+indexPath.row)];
        NSInteger index = 0;
        index = [listOfWines indexOfObject:cellValue];
        currentWine = [allWines objectAtIndex:(index)];
    }

    else {
        currentWine = [allWines objectAtIndex:(grapeID+indexPath.row)];
    }

    cell.textLabel.text = currentWine.name;
    return cell;
} 
```

`listOfWines`不幸的是，如果（以及随后`searchResult`）中有重复的条目，这将不起作用。这就是为什么将它们的索引也放在一个 NSMutableArray 中会非常有用的原因`searchResultID`，这样我就可以做这样的事情：

```
NSInteger theResultID = [searchResultID objectAtIndex:(grapeID+indexPath.row)];
currentWine = [allWines objectAtIndex:theResultID]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T17:28:35.780

这听起来像是 indexOfObjectsPassingTest: 的工作。您应该在 NSArray 文档中查看它。你使用它是这样的：

```
NSIndexSet  *indxs = [allWines indexesOfObjectsPassingTest: ^BOOL(NSString *obj, NSUInteger idx, BOOL *stop) {
        return [obj isEqualToString:searchBar.text]];
    }]; 
```

所以这将遍历 allWines 中的所有值（我假设对象是字符串）并返回与搜索字符串匹配的任何索引，为您提供一个包含找到的任何索引的索引集。

# xml - xsl:copy-of 不输出元素而是输出它们的内容

> ID：11674503
> 
> 赞同：0
> 
> 时间：2012-07-26T17:12:08.290
> 
> 标签：xml, xslt

以下 XSLT 的输出`xsl:copy-of`是这样的（我使用的是 oXigen）：

```
 Spot 1 HappinessUnit
     Spot 2 HappinessUnit
            Spot Begin:-----------

1

  317981023
  THIRD PERSON
  1
  SMITH,  ROBERT
  123 Coglan ST
  (613) 123-1234
  OTTAWA,  ONT

  AFJALGJH12348
  ONT
  M
            Spot End:----------- 
```

我期待这样的事情：

```
<Driver>
  <ID_Num>317981023</ID_Num>
  <RoleTrans>THIRD PERSON</RoleTrans>
  <RoleNumber>1</RoleNumber>
  <PersonNameText>SMITH,  ROBERT</PersonNameText>
  <AddressFullText>123 Coglan ST</AddressFullText>
  <PersonalTelephoneNumber>(613) 123-1234</PersonalTelephoneNumber>
  <CityProvince>OTTAWA,  ONT</CityProvince>
  <PostalZipcode/>
  <Licence>AFJALGJH12348</Licence>
  <ProvinceOfIssue>ONT</ProvinceOfIssue>
  <Sex>M</Sex>
</Driver> 
```

这是代码：

```
<xsl:stylesheet version="2.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:output method="text" />
    <xsl:variable name="in" select="/"/>
    <xsl:variable name="filter" select="document('elementsToBeFilterOut.xml')"/>

    <xsl:template match="/">
        <xsl:apply-templates select="*">
            <xsl:with-param name="f" select="$filter/*"/>
        </xsl:apply-templates>
    </xsl:template>

    <xsl:template match="*">
        <xsl:param name="f"/>
         <xsl:choose>
            <xsl:when test="$f/*">
         Spot 1 <xsl:value-of select="$f/*/name()" />
         Spot 2 <xsl:value-of select="*[name() = '/agency/HappinessUnit/location']/name()" />
                <xsl:for-each select="*[name() = $f/*/name()]">
                    <xsl:value-of select="current()/name()" />
                    <xsl:apply-templates select=".">
                        <xsl:with-param name="f" select="f/*[name() = current()/name()]"/>
                    </xsl:apply-templates>
                </xsl:for-each>

            </xsl:when>
            <xsl:otherwise>
                Spot Begin:-----------
                <xsl:copy-of select="."/>
                Spot End:-----------
            </xsl:otherwise>
         </xsl:choose>
Spot 3
    </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T17:29:06.317

您已`output method="text"`设置，因此输出是结果树中任何文本节点的序列化。改为使用`output method="xml"`。

# html - Outlook 2010 表格行之间的间距问题

> ID：11674506
> 
> 赞同：0
> 
> 时间：2012-07-26T17:12:13.697
> 
> 标签：html, html-table, html-email, outlook-2010

我有一个包含 3 列（25px：580px：25px）的单表 HTML，整个表、trs 和 tds 具有白色背景。除 Outlook 2010 外，所有浏览器均可使用。

在 Outlook 2010 中，我在表格行之间的两个外部列中收到垂直间隙 - 大约 3px 的间隙。看起来背景白色要么没有显示在整个单元格中，要么 Outlook 正在添加换行符或类似内容。

截图在这里：

![http://postimage.org/image/ft3zqg7jl/](../Images/9c6188cf140c7a2c52f8c9e274b23dc7.png)

受影响行的结构如下：

```
<tr><td height="20" width="25" align="left" valign="top" bgcolor="#ffffff"></td>
<td height="20" width="580" align="left" valign="top" bgcolor="#ffffff"></td>
<td height="20" width="25" align="left" valign="top" bgcolor="#ffffff"></td>
</tr> 
```

任何人有什么想法是什么原因造成的以及如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-15T00:26:54.267

图像应设置为内联显示：块

添加到您的嵌入式 CSS 中：

```
table, table td { border:0; border-collapse:collapse; mso-table-lspace:0; mso-table-rspace:0; margin:0; padding:0; }` 
```

你应该把你的 bgcolors 放在标签而不是表格单元格中：

```
<table bgcolor="#ededed" cellpadding="0" cellspacing="0" border="0">
<tr>
  <td>
    <table bgcolor="#ffffff"cellpadding="0" cellspacing="0" border="0">
    <tr>
       <td height="20" width="25" align="left" valign="top"></td>
      <td height="20" width="580" align="left" valign="top"></td>
      <td height="20" width="25" align="left" valign="top" ></td>
    </tr>
    </table>
  </td>
</tr>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T21:18:59.657

可能的解决方案：

1.  `background-color: #ffffff`用 CSS设置
2.  `&nbsp;`在受影响的s中添加a`td`并使用CSS设置`font-size: 0px`和`line-height: 0px`
3.  *同时*尝试以上两种方法:)

# java - FEST：通过他的类获取组件（从基本组件继承）

> ID：11674511
> 
> 赞同：1
> 
> 时间：2012-07-26T17:12:26.510
> 
> 标签：java, swing, user-interface, testing, fest

我有这个代码：

```
 //FrameFixture frame = (...got it from window, main frame...)
   JTableFixture table = frame.table(new GenericTypeMatcher<JTable>(JTable.class) {
         @Override protected boolean isMatching(JTable table) {
            return (table instanceof myTreeTable); 
         }  
    }); 
```

有没有更好的语法糖来通过他的 .class 获取组件（从基本组件继承）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T05:34:56.903

如果您需要实现，`ComponentMatcher`那么[TypeMatcher](http://fest.easytesting.org/swing/apidocs/org/fest/swing/core/TypeMatcher.html)可以根据类型进行匹配。

但是`TypeMatcher`不能在[ContainerFixture.table](http://fest.easytesting.org/swing/apidocs/org/fest/swing/fixture/ContainerFixture.html#table%28org.fest.swing.core.GenericTypeMatcher%29)方法的情况下使用，因为它们需要`GenericTypeMatcher`。

`TypeMatcher`两者`GenericTypeMatcher`都实现`ComponentMatcher`但不在同一层次结构中。

`GenericTypeMatcher`是抽象的，所以你必须提供一个实现。如果需要，您可以使用自己的扩展名，即：

```
class ConcreteTypeMatcher<T extends Component> extends GenericTypeMatcher<T> {
    Class<T> type;

    public ConcreteTypeMatcher(Class<T> supportedType) {
        super(supportedType);
        this.type = supportedType;
    }

    @Override
    protected boolean isMatching(T arg) {
        return type.isInstance(arg);
    }
} 
```

并像这样使用它：

```
JTableFixture table = frame.table(
      new ConcreteTypeMatcher<myTreeTable>(myTreeTable.class)); 
```

# javascript - 内容更改时，输入控件在 IE 中未重新对齐

> ID：11674513
> 
> 赞同：0
> 
> 时间：2012-07-26T17:12:28.707
> 
> 标签：javascript, html, internet-explorer

我不确定这是浏览器错误还是我遗漏了一些微妙的东西。在我的页面顶部，我有 2 个选择下拉菜单、一个标签和一个文本框，它们都水平排列。一切都向左对齐。

最初，仅填充第一个选择框。当用户选择一个项目时，第二个框通过 JavaScript 填充。发生这种情况时，第二个选择框的宽度会增加以容纳内容，并且标签会被推到右侧。但是问题是输入框不会移动并最终与选择框重叠。

在 Firefox 中，一切正常，标签和文本框都被推到右侧。另外，如果我打开 IE 开发人员工具，选择文本框并取消选中左对齐，然后重新选中它，文本框会移动到它应该在的位置。

我的 html 看起来像这样：

```
<div id="main-top">
    <select id="firstSel" name="firstSel" >
        <option value="">-- Select an Item --</option>
        <option value="one">One</option>
    </select>
    <select id="secondSel" name="secondSel" >
        <option value="">--</option>
    </select>
    <label for="Currency">Currency:</label>
    <input class="input-sm" type="text" id="BECurrency" name="Currency" />
</div> 
```

关于如何解决这个烦人的问题有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T17:37:41.183

我最终修复了css中元素的宽度。这意味着宽度设置为在所有浏览器中始终保持相同的宽度。

# haskell - 为什么随机绑定的类型需要额外的 StdGen？

> ID：11674516
> 
> 赞同：1
> 
> 时间：2012-07-26T17:12:38.923
> 
> 标签：haskell, monads

在[教程](http://blog.sigfpe.com/2006/08/you-could-have-invented-monads-and.html)中继续，在*更复杂的副作用部分：随机数*我来这个：

```
bind :: (a → StdGen → (b,StdGen)) → (StdGen → (a,StdGen)) → (StdGen → (b,StdGen)) 
```

当“随机函数”的类型（作者称之为）如下：

```
a → StdGen -> (b,StdGen) 
```

此外，绑定定义为：

```
bind f x seed = let (x',seed') = x seed in f x' seed' 
```

*问题*：为什么绑定`StdGen`的签名末尾有一个额外的？不应该是：

```
bind :: (a → StdGen → (b,StdGen)) → (StdGen → (a,StdGen)) → (b,StdGen) 
```

我的推理如下：

1.  Bind 接受一个函数`f:: a -> StdGen -> (b,StdGen)`和“输出” `StdGen -> (a,StdGen)`。
2.  它将 the 应用于`f`and `a`，`StdGen`并返回签名`f`所说的任何内容 - 这只是`(b, StdGen)`：

    ```
    f::a -> StdGen -> (b,StdGen) 
    ```

3.  即使遵循绑定实现，`f`也适用于 value`x'`和`seed'`type `StdGen`，所以它的结果必须是一个元组！

    ```
     bind f x seed = let (x',seed') = x seed in f x' seed' 
    ```

我哪里出错了？任何帮助表示赞赏！

注意：对于未来的读者，作者的定义`bind`等同于标准定义，除了参数翻转：`flip . >>=`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T17:53:38.173

让我们看看你的类型：

```
bind :: (a → StdGen → (b,StdGen)) → (StdGen → (a,StdGen)) → (b,StdGen) 
```

现在，我 100% 同意你的第一点：

> Bind 接受一个函数`f :: a -> StdGen -> (b,StdGen)`和“输出” `StdGen -> (a,StdGen)`。

但是你的第二个让我担心：

> 它适用`f`于`a`and `StdGen`。

你从哪里得到类型的值`a`？你从哪里得到类型的值`StdGen`？

The answer to both of these questions is "you don't have one lying about"; however, since you *do* have a `StdGen -> (a,StdGen)` lying about, you could get both if only you had one more `StdGen` parameter. And that's where the extra parameter comes from.

Now, a slightly higher-level explanation. Part of the problem (I think) is that these type signatures are a bit too cluttered to read comfortably. We need some abstractions. What we're trying to model here are probability distributions, which we're modeling as their sampling functions. So, we can say a distribution over `a` is a function that knows how to sample from the distribution and return an `a`:

```
type Dist a = StdGen -> (a, StdGen) 
```

Now, not all distributions are so flat as all that. For example, the Bernoulli distribution is "sort of" a `Dist Bool`, but it's also parameterized on the probability of choosing `False`. We can write its type thus:

```
bernoulli :: Double -> Dist Bool 
```

So, we can model parameterized distributions as functions that return distributions; equivalently, we can think of functions that return distributions as parameterized distributions.

Now with this high-level interpretation in mind, the type of `bind` becomes much more readable:

```
bind :: (a -> Dist b) -> (Dist a -> Dist b) 
```

This says that `bind` is the function that tells how to first sample from an `a` distribution, then use that `a` as a parameter when sampling from the `b` distribution. Not only that, but with this type alias, it almost becomes unthinkable to write a type for `bind` that doesn't have the "extra" argument.

# android - Android在解析JSON时转义特殊字符

> ID：11674517
> 
> 赞同：0
> 
> 时间：2012-07-26T17:12:41.567
> 
> 标签：android, json

我正在使用以下代码在我的 android 应用程序中解析 JSON。

```
 String result = postHttpResponse(uri, json);
    try {
        JSONObject jsonResult = new JSONObject(result);
        boolean authenticated = jsonResult.getBoolean("Authenticated");
        if(authenticated){
            user = new User();
            JSONObject jsonUser = (JSONObject) jsonResult.get("User");
            user.setName(jsonUser.getString("Name"));
            user.setUserId(jsonUser.getString("UserId"));
        }
    } catch (JSONException e) {
        Log.e(TAG, e.getMessage());
    } 
```

jsonUser.getString("UserId") 返回值“corp\\ns0017”而不是“corp\ns0017”。实际上，它正在用一个“\”转义字符串中的字符“\”。但在解析时我想删除额外的“\”。我怎样才能实现它？

# model-view-controller - pureMVC Actionscript 3 中的复杂视图层次结构

> ID：11674519
> 
> 赞同：2
> 
> 时间：2012-07-26T17:12:59.160
> 
> 标签：model-view-controller, actionscript, puremvc

考虑这样的情况：

应用程序逻辑由许多级别、组件和它们之间的关系组成。一个级别包含组件组。两个级别或两个组件之间可以有特殊的关系。所有级别、组件和关系都可以有许多不同的参数。

这是一个快速的可视化：http: [//i49.tinypic.com/2yv2wsn.jpg](http://i49.tinypic.com/2yv2wsn.jpg)

我尝试以 pureMVC 方式对其进行编码，但最终拥有一个带有 CanvasView 的巨大 CanvasMediator 来管理复杂的逻辑表示。问题是每个级别和组件都应该很容易被复制、删除、拖动、交换、重新定位、插入到其他对象之间等。应该简单地从一个对象拖动到另一个对象来创建关系。换句话说，这个 CanvasView 内部有很多交互性，我相信代码会非常臃肿，试图将每个视图组件绑定到中介并在命令级别执行交互性代码。然而，我的方法感觉远非正确。

一个更具体的问题：当一个包含大量组件和子组件的关卡以 pureMVC 方式重新定位时，如何处理这种情况？请记住，在拖动现有关卡时，它的组件也应该随之移动。当悬停在其他两个级别之间的空白空间时，应用程序应指示可以将选定的级别放置在其他两个之间（这两个应该分开一点并腾出一些空间，携带很长的自己的组件）。

# javascript - Threejs 创建天空盒场景

> ID：11674521
> 
> 赞同：1
> 
> 时间：2012-07-26T17:13:12.090
> 
> 标签：javascript, webgl, three.js

我试图在 three.js 中创建一个天空盒。

我创建了 2 个场景。第一个是天空盒，第二个是我的游戏场景。我只是在学习three.js，我真的不知道，为什么它不起作用。仅渲染天空盒，不渲染其他场景。

代码：http: [//jsfiddle.net/5bqFr/](http://jsfiddle.net/5bqFr/)

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T17:52:18.567

现在发生的情况是，即使首先渲染天空盒，您也在深度缓冲区上进行写入。天空盒恰好比球体更靠近相机，这就是为什么你看不到球体的原因。

您只需要禁用深度写入：

```
new THREE.MeshBasicMaterial( { color: 0x0000FF, depthWrite: false } ); 
```

# ios - 如何使用 UIAccessibility 协议在 iOS 上的模式弹出窗口中捕获焦点？

> ID：11674522
> 
> 赞同：4
> 
> 时间：2012-07-26T17:13:15.607
> 
> 标签：ios, accessibility, voiceover, uiaccessibility

当用户单击 iOS 上的按钮时，我正在启动一个自定义弹出窗口。在 iPhone 上使用画外音时，如何确保焦点保持在自定义弹出窗口内（出于可访问性原因）？当前，当我向右滑动时，焦点落在父容器中的元素上。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T11:37:16.597

如果您的目标是 iOS >= 5.0，那么有一个名为[accessibilityViewIsModal](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIAccessibility_Protocol/Introduction/Introduction.html)的属性。使用它绝对可以解决您的问题。

如果您的目标是 iOS < 5.0，那么没有直接的方法。您需要自定义视图控制器的视图并重新排序“_accessibleElements”，如此处[所示](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/iPhoneAccessibility/Making_Application_Accessible/Making_Application_Accessible.html#//apple_ref/doc/uid/TP40008785-CH102-SW5)。请参阅**使自定义容器视图的内容可访问**部分。

# android - Android 应用程序是本机代码还是 JavaVM 代码？

> ID：11674523
> 
> 赞同：1
> 
> 时间：2012-07-26T17:13:23.087
> 
> 标签：android, compilation

可能是个笨蛋！@# 问题。

我对为Android开发应用程序一无所知，但我想知道Android应用程序在编译时生成的代码是PURE ANDROID NATIVE CODE，还是Java虚拟机兼容代码。

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T17:16:23.867

它有自己的虚拟机[Dalvik](http://en.wikipedia.org/wiki/Dalvik_%28software%29)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T17:18:14.993

大多数 Android 应用程序都是 Java 应用程序。它们由 Java 编译器编译为 .class 文件，然后 dx 编译器获取 .class 并将它们编译为 .dex 文件，这些文件可由 Android 上的 Dalvik VM（即 Java VM）执行。

尽管 Dalvik VM 是为运行 Java 代码而设计的，但它与您计算机上的标准 Java VM 有很大不同。标准 VM 是“基于堆栈”的机器，而 Dalvik VM 是“基于寄存器”的。

您还可以使用 NDK 制作应用程序，并用 C 或 C++ 编写它们。这在任何方面都与 Java 不兼容（尽管您可以将本机 C 代码与带有 JNI 的 Java 代码接口）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T17:23:49.647

至少有三种方法可以做到：

1.  所有Java
2.  所有本地人
3.  一半 Java，一半原生。Android 库可以用 C 编写并编译为本机代码，然后从 Java 调用。如果您愿意，您的应用程序可以是两者的混合。

更多信息：[http ://en.wikipedia.org/wiki/Android_software_development#Native_development_kit](http://en.wikipedia.org/wiki/Android_software_development#Native_development_kit)

# iphone - 使用 NSInputStream/NSOutputStream 通过 TCP (iPhone) 进行通信

> ID：11674526
> 
> 赞同：1
> 
> 时间：2012-07-26T17:13:28.660
> 
> 标签：iphone, networking, tcp, nsstream, nsinputstream

是否可以在 iPhone 上使用 NSInputStream/NSOutputStream 进行 TCP 通信？苹果在其文档中提供的示例使用 [NSStream getStreamsToHost] 并且 iPhone 不支持该示例。我看过其他使用 CFStream 设置套接字然后桥接到 NSStream 的帖子，这是唯一受支持的方式吗？

根据文档，理论上应该是这样的：

```
//input stream
NSURL *url = [[NSURL alloc] initWithString:@"10.252.1.1:8080"];

iStream = [NSInputStream inputStreamWithURL:url];
[iStream setDelegate:self];

[iStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
[iStream open];

oStream = [NSOutputStream outputStreamWithURL:url append:true];
[oStream setDelegate:self];

[oStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
[oStream open]; 
```

但是，这样做有两个问题：

1）如果我只做 iStream 部分，我永远不会看到我的委托调用任何事件。

2) outputStreamWithURL 失败并显示来自 CFWriteStreamSetProperty 的神秘“EXC_BAD_ACCESS”错误消息

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T20:13:56.780

这篇 Apple 文章解释了如何`getStreamsStreamsToHost`在 iOS上实现

[在没有 NSHost 的情况下使用 NSStreams 进行 TCP 连接](http://developer.apple.com/library/ios/#qa/qa1652/_index.html)

# jquery - 动态选择标签重叠问题 - IE7

> ID：11674527
> 
> 赞同：0
> 
> 时间：2012-07-26T17:13:29.630
> 
> 标签：jquery, select, internet-explorer-7

我连续有 9 个选择元素，我使用 jQuery 来动态更改选择的某些选项，具体取决于在第一个选择元素上选择的选项。The problem is in IE7 when the options of a select are changed such that the width expands, the label of the subsequent select doesn't move along, the label remains overlapped on the select that has just budged forward. In FireFox when the select elements change the subsequent labels and select elements moving along fine.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T17:14:40.927

I've had trouble modifying selects in IE7\. Try removing the select from the DOM, making your changes and then placing the select back into the DOM. This usually solves my IE7 select issues.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T18:16:18.207

如果您通过 CSS 在更改的选择元素上设置固定宽度，这将解决问题。

# php - 试图阻止文本区域中的项目符号作为特殊字符进入我的数据库

> ID：11674531
> 
> 赞同：3
> 
> 时间：2012-07-26T17:14:01.200
> 
> 标签：php, mysql, insert, escaping, special-characters

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T19:12:45.310

# javascript - Is possible to pause main window in jquery?

> ID：11674535
> 
> 赞同：-1
> 
> 时间：2012-07-26T17:14:34.117
> 
> 标签：javascript, jquery

We have a jquery where we do drag and drop effect based on using different images. The drag and drop works fine and we can even exchange information among the images. The issue now just before we allow the drag and drop to complete we call a pop-up window like this window.open(url, "VALUES", "width=500,height=300");. In it we have 2 text boxes and javascript to validate the data entry. The issue is that in the main window we must not proceed (drag n drop) until the pop-up window text boxes have been filled and information sent back to main window? How to control that ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T17:25:27.743

[您可以使用此处](http://www.javascriptkit.com/javatutors/openclose.shtml)描述的技术检测窗口是否已关闭：

```
function checker () {
    if (windowRef.closed)
        allowDrops = true;
    else
        setTimeout(checker, 100);
} 
```

所以你要做的是当你打开窗口时，设置`allowDrops`为 false 并调用`checker()`. 修改您的拖放事件处理程序，使其仅在 allowDrops 为 时才有效`true`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T17:28:23.653

使用`var returnValue = window.showModalDialog(...);`而不是`window.open()`.

模态窗口是一个阻塞调用，在模态窗口关闭之前，主页中的 javascript 将不会继续。

[https://developer.mozilla.org/en/DOM/window.showModalDialog](https://developer.mozilla.org/en/DOM/window.showModalDialog)

# java - Retrieving Maven Artifact from Repository using Maven Java API

> ID：11674537
> 
> 赞同：8
> 
> 时间：2012-07-26T17:14:42.200
> 
> 标签：java, api, maven, maven-plugin, aether

If I have a Maven Artifact information (GroupId, ArtifactId, Version) how can I programmatically (using Java) retrieve that Artifact from my local repository?

Specifically, I need to be able to connect to the Maven Repository and create/retrieve a org.apache.maven.artifact.Artifact so I can retrieve the file associated with the Artifact.

I have looked into m2e source code, but the MavenImpl.java (which provides Artifact resolution) is way more complex than what I need and it is difficult to understand how the connection to the repository works.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-26T19:33:39.653

你可能想看看[Aether](https://projects.eclipse.org/projects/technology.aether)。有关示例，请参见[Wiki](https://wiki.eclipse.org/Aether)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T12:37:21.837

这就是我们在[jcabi-aether](http://www.jcabi.com/jcabi-aether/)中的做法：

```
final File repo = this.session.getLocalRepository().getBasedir();
final Collection<Artifact> deps = new Aether(this.getProject(), repo).resolve(
  new DefaultArtifact("junit", "junit-dep", "", "jar", "4.10"),
  JavaScopes.RUNTIME
); 
```

给它一个远程存储库列表、本地存储库的位置以及工件的 Maven 坐标。顾名思义，该库使用Sonatype 的[Apache Aether](http://www.sonatype.org/aether)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T20:02:22.453

您可以根据给定的信息构建一个 URL 并下载文件（注意，将 替换为`'.'`）：`<groupId>``'/'`

```
<repositoryUrl>/<groupId>/<artifactId>/<version>/<artifactId>-<version>.<type> 
```

# c++ - HeapWalk() fails if Page Heap and / or Application Verifier is enabled

> ID：11674539
> 
> 赞同：2
> 
> 时间：2012-07-26T17:14:46.650
> 
> 标签：c++, windows, debugging, heap-memory

Maybe someone on here can shed some light on why this is the case or what other calls to use for walking the heap for debugging purposes in an application. If it turns out that there is no way of getting Page Heap and / or the Application Verifier to work with an application that uses HeapWalk() and there is no replacement - at least I can stop looking for one :)

So a confirmation from people with more experience on the matter that these will never play together would be appreciated.

Nothing in the documentation on HeapWalk() I could find mentions problems with Page Heap / Application Verifier or suggests any replacement for this use case.

Considering the small sample code below:

If the code is executed "as is" it will work as expected. If I turn on either Page Heap or Application Verifier (or both) for it the call to HeapWalk() fails. The error code returned by GetLastError() in this case is always 0x00000001 which regarding to the Microsoft documentation is "ERROR_INVALID_FUNCTION".

Underlying motivation for the question:

Track down heap corruption and potential memory leaks in a legacy application with custom heap management. Running with Page Heap and / or Application Verifier was intended to help with that.

Thanks for reading this and any comments that could shed some light unto the issue are welcome.

```
#include <Windows.h>
#include <iostream>
#include <sstream>
#include <iomanip>
#include <string>

size_t DummyHeapWalk(void* heapHandle)
{
    size_t commitSize = 0;
    PROCESS_HEAP_ENTRY processHeapEntry;

    processHeapEntry.lpData = 0;

    HeapLock(heapHandle);

    if (HeapWalk(heapHandle, &processHeapEntry))
    {
        commitSize = processHeapEntry.Region.dwCommittedSize;
    }
    else
    {
        int lastError = GetLastError();
        std::ostringstream errorMsg;
        errorMsg << "DummyHeapWalk failed on heapHandle [0x" << std::setfill('0') << std::setw(16) << std::hex << (size_t)(heapHandle) << "] last error: " << lastError << std::endl;
        OutputDebugString(errorMsg.str().c_str());
        DebugBreak();
    }

    HeapUnlock(heapHandle);

    return commitSize;
}

int main(void)
{
    HANDLE myProcess = GetProcessHeap();    

    std::cout << "Process Heap Commit size: " << DummyHeapWalk(myProcess) << std::endl;

    return 0;
} 
```

# jquery - jQuery flipping between existing divs

> ID：11674540
> 
> 赞同：2
> 
> 时间：2012-07-26T17:14:54.383
> 
> 标签：jquery, toggle, flip

I have found numerous jQuery plugins that allow you to "flip" an element; SmashUp Labs' [Flip!](http://lab.smashup.it/flip/) plugin seems most popular/useful, and it is what I am currently using.

Meanwhile, there are, of course, numerous solutions here and elsewhere for toggling between two different existing `div`s, but none of them touch on flipping.

But what I need is for both things to happen. The problem I'm finding with Flip! is that it includes the content as part of the function call, while I actually want to use the flip to toggle between two different existing `div`s. I've gotten this to look more-or-less right using an `iframe` but then I'm using a fairly unnecessary `iframe` and I also have to wait for that frame to load after the flip, which looks bad.

Both "sides" of the flipped div are too large and complex to be reasonably inserted into the function call, and I cannot use something like `$('div').text()` because that creates a copy of the div rather than revealing the one that I already have.

So, does anyone know of any library that does flipping, but allows you to specify an element to be made visible after the flipping is over? Or has anyone done this kind of thing with Flip!, perhaps using its callback functions?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T17:29:44.943

您可以尝试将两个 div 放在翻转框的顶部，使用 CSS 绝对位置，使 div 的内容在翻转框的背景之上，看起来就像在盒子里一样。

例如，你有 div1 和 div2，默认情况下，当页面加载时，div1 正在显示，div2 的样式为 display:none，然后你在 Flip 中连接回调，如下所示：

```
$("#flipbox").flip({
    direction:'tb',
    onBefore: function(){
        $('#div1').hide();
    },
    onEnd: function(){
        $('#div2').show();
    }
}); 
```

div1 和 div2 的内容都在翻转框的顶部，因此它们看起来像是包含在内。

# android - 向 MatOfPoint2f 添加点

> ID：11674542
> 
> 赞同：0
> 
> 时间：2012-07-26T17:14:59.970
> 
> 标签：android, arrays, opencv

我正在尝试在 opencv for android 中为 MatOfPoint2f 添加点，但不确定执行此操作的最有效方法。我正在考虑调用 MatOfPoint2f.toArray()，然后将其添加到 arraylist，然后添加我的元素，然后调用 MatOfPoint2f.fromArray()。我曾尝试使用 MatOfPoint2f 方法 put，但有时我会添加超出数组边界的元素，所以这不起作用。我也尝试调用 toList() 方法并使用 add 方法，但它给我的列表无法添加或放入元素。我在 mat 中看到了 push_back 方法，我确信这也不起作用，因为它会将元素添加到较低的行，并且我相信所有的点都存储在第 0 行的列中。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T21:45:08.333

我通过使用链表全局变量解决了这个问题，每当我需要添加或删除点时，我都会在该链表中执行此操作，然后调用 MatOfPoint.fromList() 中的方法，该方法从列表中加载矩阵。它不漂亮，但它可以满足我的需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-24T23:48:39.940

刚刚遇到同样的问题并得到（我认为）更好的答案。我有：

```
MatOfPoint2f allContours = new MatOfPoint2f();
MatOfPoint2f oneContour = new MatOfPoint2f(); 
```

一旦我在 oneContour 中有一组值，我正在使用的是：

```
allContours.push_back(oneContour); 
```

# powershell - 使用powershell登录网站

> ID：11674543
> 
> 赞同：1
> 
> 时间：2012-07-26T17:15:00.810
> 
> 标签：powershell, login, https

我正在尝试使用 powershell 脚本登录到 https 站点。

我尝试过使用 PSCredential，但这样做时会收到 401 未经授权的错误。

我在脚本中提供用户名和密码。我希望它在没有提示的情况下让我登录。

做这个的最好方式是什么？最好使用httprequest吗？

这是我到目前为止所拥有的。

```
$userName = "username"
$secure_password = ConvertTo-SecureString "my password" -AsPlainText -Force
$credential = New-Object System.Management.Automation.PSCredential($userName,         $secure_password)
$proxy = New-WebServiceProxy -Uri "url_for_the_download" -Credential $credential 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T20:11:11.427

像这样的东西应该工作：

```
$client = New-Object System.Net.Webclient
$client.Credentials = New-Object System.Net.NetworkCredential("user","pass")
$client.DownloadFile("http://somesite.com/somefile.zip","C:\somefile.zip") 
```

# java - 我们可以禁用 AOP 调用吗？

> ID：11674545
> 
> 赞同：3
> 
> 时间：2012-07-26T17:15:03.563
> 
> 标签：java, log4j, aop, aspectj, spring-aop

我具有基于 AOP 的登录功能，具有以下设置

上下文xml配置：

```
<bean id="performanceMonitor" 
class="org.springframework.aop.interceptor.PerformanceMonitorInterceptor" />

<aop:config>
        <aop:pointcut id="allServiceMethods" 
            expression="execution(* com.eshop.sfweb.service.impl..*(..))" /> 
    <aop:pointcut id="allEpServices" 
            expression="execution(* com.service.catalog..*(..))" />
        <aop:advisor pointcut-ref="allServiceMethods" 
            advice-ref="performanceMonitor" order="2" /> 
        <aop:advisor pointcut-ref="allEpServices"
            advice-ref="performanceMonitor" order="2" />
    </aop:config> 
```

Log4j 属性：

```
log4j.logger.org.springframework.aop.interceptor.PerformanceMonitorIntercept
or=${ep.perflog.level},PERFORMANCE 
log4j.appender.PERFORMANCE.File=webAppRoot:WEB-INF/log/performance.log 
log4j.appender.PERFORMANCE.threshold=DEBUG 
log4j.appender.PERFORMANCE=org.apache.log4j.DailyRollingFileAppender 
log4j.appender.PERFORMANCE.DatePattern='.'yyyy-MM-dd 
log4j.appender.PERFORMANCE.layout=org.apache.log4j.PatternLayout 
log4j.appender.PERFORMANCE.layout.ConversionPattern=%d -- %-5p [%t | %F:%L] 
-- %m%n 
```

有什么方法可以根据环境禁用 AOP 调用本身？我可以很容易地禁用日志记录，但我可以禁用/启用整个后台进程和调用吗？

如果需要任何澄清，请告知。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T17:44:13.480

由于您使用的是 Spring AOP，因此启用或禁用方面的一种快速方法可能是简单地使用 Bean 配置文件。

定义配置文件说`enableAOP`：将aop：config包装在特定配置文件下的配置文件中

```
<beans profile="enableAOP">
    <aop:config> <aop:pointcut id="allServiceMethods" 
    expression="execution(* com.eshop.sfweb.service.impl..*(..))" /> 
    <aop:pointcut id="allEpServices" expression="execution(* 
    com.service.catalog..*(..))" />
....
</beans> 
```

现在，无论您希望启用特定方面的哪个环境，只需打开`enableAOP`配置文件即可。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-29T13:33:20.180

自从提出这个问题以来已经有一段时间了，但这是我为 Spring 2 提出的：

创建一个`aop-context-off.xml`带有空`<beans>`声明的空 xml 文件 ( )。`aop-context-enabled.xml`然后使用您的 AOP 声明创建例如一个文件。

最后，在导入 XML 时，您可以使用：

```
<import resource="aop-context-${AOP_CONTEXT_SUFFIX:off}.xml" /> 
```

这将寻找一个名为 AOP_CONTEXT_SUFFIX 的系统变量，如果没有找到，则将值强制为`off`.

所以在上面的例子中，通过设置`AOP_CONTEXT_SUFFIX`它`enabled`会加载`aop-context-enabled.xml`

因此开关是系统变量，您可以在服务器启动时轻松启用/禁用它。

# python - 尝试用生成器表达式理解 Python 代码

> ID：11674548
> 
> 赞同：1
> 
> 时间：2012-07-26T17:15:19.440
> 
> 标签：python, generator

在以下代码中：

```
chars = set('AEIOU')
...
if any((cc in chars) for cc in name[ii]):
    print 'Found' 
```

什么是“（cc in chars）”部分？我知道它适用于 for 循环生成的每个 cc 。但是“（cc in chars）”本身是一个生成器表达式吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T17:18:17.290

`(cc in chars)`只需检查字符串`cc`是否包含在`chars`并返回布尔值`false`或`true`。

根据[Python Language Reference](http://docs.python.org/reference/expressions.html#generator-expressions)，括号之间的东西不是生成器表达式，除非它至少有一个`for i in iterable`子句。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T17:17:29.507

不，这`(cc in chars)`部分是布尔表达式；[`in`是一个序列运算符](http://docs.python.org/library/stdtypes.html#sequence-types-str-unicode-list-tuple-bytearray-buffer-xrange)，用于测试是否`cc`是序列的成员`chars`。括号实际上是多余的，可以省略。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T17:22:17.960

不，这`(cc in chars)`只是一个布尔值，如果 cc 在字符中则返回 True ，否则返回 False 。

事实上，代码实际上可以写成

```
chars = set('AEIOU')
...
if [cc for cc in name[ii] if cc in chars]:
    print 'Found' 
```

在这种情况下，如果列表有任何元素（使其通过 if 子句），那是因为某些 cc 在字符中。我实际上会发现它更具可读性和直截了当。干杯。

**编辑：**

为了澄清我的答案，`[cc for cc in name[ii] if cc in chars]`生成 name[ii] 中“chars”中所有字符的列表（在这种情况下，元音）。如果此列表上有任何元素，它将通过 if 测试。

`[cc for cc in name[ii] if cc in chars]`说“对于名称 [ii] 中的每个元素/字符，仅当它在字符中时才添加它。查看[此](https://stackoverflow.com/questions/4406389/if-else-in-a-list-comprehension/4406777#4406777)答案以进行澄清。

# node.js - Heroku 上的 socket.io + node.js

> ID：11674550
> 
> 赞同：4
> 
> 时间：2012-07-26T17:15:22.587
> 
> 标签：node.js, heroku, socket.io

我在 Heroku 上编译 socket.io 应用程序时遇到了一些问题。

那就是 app.js 文件

```
var app = require('express').createServer()
   , io = require('socket.io').listen(app.listen(process.env.PORT || 5000));

app.get('/', function (req, res) {
    res.sendfile(__dirname + '/index.html');
});

var users = [];

  io.configure(function () { 
  io.set("transports", ["xhr-polling"]); 
  io.set("polling duration", 10); 
});

io.sockets.on('connection', function (socket) {

  socket.on('message',function(data,time,username){

    socket.broadcast.emit('message',data,time,username);

    socket.emit('message',data,time,username,true);
  });

  socket.on('connected',function(username){

    socket.nick = username;

    users.push(username);

    io.sockets.emit('user_connected',users);
  });

  socket.on('disconnect',function(){

    users.splice(users.indexOf(socket.nick), 1);

    socket.broadcast.emit('updated_user_list',users);
  });

}); 
```

包.json

```
{
  "name": "application-name",
  "version": "0.0.1",
  "private": true,
  "scripts": {
    "start": "node app"
  },
  "engines": {
    "node": "0.8.x",
    "npm":  "1.1.x"
  },
  "dependencies": {
    "express": "3.0.0rc1",
    "jade": "*",
    "socket.io": "~0.9.8"
  }
} 
```

这就是将它推到heroku时的错误

```
[gaggina:~/Desktop/socket2]→git push heroku master
Counting objects: 1016, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (892/892), done.
Writing objects: 100% (1016/1016), 3.90 MiB | 104 KiB/s, done.
Total 1016 (delta 74), reused 0 (delta 0)

-----> Heroku receiving push
-----> Node.js app detected
-----> Resolving engine versions
       Using Node.js version: 0.8.3
       Using npm version: 1.1.41
-----> Fetching Node.js binaries
-----> Vendoring node into slug
-----> Installing dependencies with npm
       npm WARN package.json application-name@0.0.1 No README.md file found!
       npm WARN package.json jade@0.26.3 No README.md file found!
       npm WARN package.json application-name@0.0.1 No README.md file found!
       npm WARN package.json jade@0.26.3 No README.md file found!
       npm WARN package.json connect@2.4.1 No README.md file found!
       npm WARN package.json methods@0.0.1 No README.md file found!
       npm WARN package.json hiredis@0.1.14 No README.md file found!

       > ws@0.4.21 install /tmp/build_3gzqoe2cjr234/node_modules/socket.io/node_modules/socket.io-client/node_modules/ws
       > node install.js

       [ws v0.4.21] Attempting to compile blazing fast native extensions.
       [ws v0.4.21] Native extension compilation successful!

       > hiredis@0.1.14 preinstall /tmp/build_3gzqoe2cjr234/node_modules/socket.io/node_modules/redis/node_modules/hiredis
       > make || gmake

       cd deps/hiredis && make static
       make[1]: Entering directory `/tmp/build_3gzqoe2cjr234/node_modules/socket.io/node_modules/redis/node_modules/hiredis/deps/hiredis'
       make[1]: Nothing to be done for `static'.
       make[1]: Leaving directory `/tmp/build_3gzqoe2cjr234/node_modules/socket.io/node_modules/redis/node_modules/hiredis/deps/hiredis'
       node-waf configure build
       Setting srcdir to                        : /tmp/build_3gzqoe2cjr234/node_modules/socket.io/node_modules/redis/node_modules/hiredis 
       Setting blddir to                        : /tmp/build_3gzqoe2cjr234/node_modules/socket.io/node_modules/redis/node_modules/hiredis/build 
       Checking for program g++ or c++          : /usr/bin/g++ 
       Checking for program cpp                 : /usr/bin/cpp 
       Checking for program ar                  : /usr/bin/ar 
       Checking for program ranlib              : /usr/bin/ranlib 
       Checking for g++                         : ok  
       Checking for node path                   : not found 
       Checking for node prefix                 : ok /tmp/node-node-de4o 
       'configure' finished successfully (1.834s)
       Waf: Entering directory `/Users/gaggina/Desktop/socket2/node_modules/socket.io/node_modules/redis/node_modules/hiredis/build'
       Waf: Leaving directory `/Users/gaggina/Desktop/socket2/node_modules/socket.io/node_modules/redis/node_modules/hiredis/build'
       Traceback (most recent call last):
         File "/tmp/node-node-de4o/bin/node-waf", line 16, in <module>
           Scripting.prepare(t, os.getcwd(), VERSION, wafdir)
         File "/tmp/node-node-de4o/bin/../lib/node/wafadmin/Scripting.py", line 145, in prepare
           prepare_impl(t, cwd, ver, wafdir)
         File "/tmp/node-node-de4o/bin/../lib/node/wafadmin/Scripting.py", line 135, in prepare_impl
           main()
         File "/tmp/node-node-de4o/bin/../lib/node/wafadmin/Scripting.py", line 188, in main
           fun(ctx)
         File "/tmp/node-node-de4o/bin/../lib/node/wafadmin/Scripting.py", line 386, in build
           return build_impl(bld)
         File "/tmp/node-node-de4o/bin/../lib/node/wafadmin/Scripting.py", line 405, in build_impl
           bld.compile()
         File "/tmp/node-node-de4o/bin/../lib/node/wafadmin/Build.py", line 268, in compile
           os.chdir(self.bldnode.abspath())
       OSError: [Errno 2] No such file or directory: '/Users/gaggina/Desktop/socket2/node_modules/socket.io/node_modules/redis/node_modules/hiredis/build'
       make: *** [all] Error 1
       sh: gmake: not found
       npm ERR! hiredis@0.1.14 preinstall: `make || gmake`
       npm ERR! `sh "-c" "make || gmake"` failed with 127
       npm ERR! 
       npm ERR! Failed at the hiredis@0.1.14 preinstall script.
       npm ERR! This is most likely a problem with the hiredis package,
       npm ERR! not with npm itself.
       npm ERR! Tell the author that this fails on your system:
       npm ERR!     make || gmake
       npm ERR! You can get their info via:
       npm ERR!     npm owner ls hiredis
       npm ERR! There is likely additional logging output above.

       npm ERR! System Linux 2.6.32-343-ec2
       npm ERR! command "/tmp/node-node-de4o/bin/node" "/tmp/node-npm-Xp2N/cli.js" "rebuild"
       npm ERR! cwd /tmp/build_3gzqoe2cjr234
       npm ERR! node -v v0.8.3
       npm ERR! npm -v 1.1.41
       npm ERR! code ELIFECYCLE
       npm ERR! stack Error: hiredis@0.1.14 preinstall: `make || gmake`
       npm ERR! stack `sh "-c" "make || gmake"` failed with 127
       npm ERR! stack     at ChildProcess.<anonymous> (/tmp/node-npm-Xp2N/lib/utils/exec.js:56:20)
       npm ERR! stack     at ChildProcess.EventEmitter.emit (events.js:91:17)
       npm ERR! stack     at Process._handle.onexit (child_process.js:674:10)
       npm ERR! 
       npm ERR! Additional logging details can be found in:
       npm ERR!     /tmp/build_3gzqoe2cjr234/npm-debug.log
       npm ERR! not ok code 0
 !     Failed to rebuild dependencies with npm
 !     Heroku push rejected, failed to compile Node.js app

To git@heroku.com:boiling-beyond-2052.git
 ! [remote rejected] master -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com:boiling-beyond-2052.git'
[gaggina:~/Desktop/socket2]→cat /tmp/build_3gzqoe2cjr234/npm-debug.log
cat: /tmp/build_3gzqoe2cjr234/npm-debug.log: No such file or directory 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T13:51:56.480

Heroku 未能构建hiredis。原因是hiredis（node.js 模块）依赖于hiredis（C 库），它需要GNU make，这在你的slug 上不可用。

问题是，为什么 NPM 尝试构建不在您的依赖项中的hiredis？

您应该检查hiredis 是否出现在您的项目中的任何位置（`grep -R hiredis .`）。另一种可能性是 Heroku 正在尝试为所有 node.js 应用程序提供 redis ？

我会检查 Heroku 的支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T22:45:13.490

WAAAAAAAIT 一秒钟。

在我运行之后我注意到在`grep -R hiredis .`目录下`./node_modules/socket.io/node_modules`出现了文件夹`redis`。显然，`socket.io`现在是`redis`内置的，这与 Heroku 混淆了。

尝试`redis`从`socket.io`'s文件夹中删除文件`node_modules`夹。我通过完全删除 socket.io 解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T14:14:35.863

我在搞乱heroku时遇到了同样的问题。所有的路径似乎都在那里。运行 Ubuntu 12.04，我什至为 gmake 创建了一个符号链接。没有什么能解决它。我最终尝试了这个

```
"dependencies": {
  "express": "3.0.0rc2",
  "ejs": "*",
  "stylus": "*",
  "mongojs": "0.4.3"
},
"bundledDependencies": {
  "socket.io": "*"
}, 
```

代替

```
"dependencies": {
  "express": "3.0.0rc2",
  "ejs": "*",
  "stylus": "*",
  "mongojs": "0.4.3",
  "socket.io": "*"
}, 
```

这似乎解决了它并使heroku高兴。如果您找到合适的解决方案，请告诉我。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T07:44:25.070

当您在`npm install`本地运行时，hiredis 会创建一些具有特定于您机器的路径的文件。当您将这些缓存的依赖项推送到 Heroku 时，构建会失败。

```
Waf: Entering directory `/Users/gaggina/Desktop/socket2/node_modules/socket.io/node_modules/redis/node_modules/hiredis/build' 
```

你可以通过`node_modules/hiredis`从源代码管理中删除目录，让 Heroku 重新编译它来解决这个问题：

```
git rm -rf node_modules/hiredis
rm -rf node_modules/hiredis
echo "node_modules/hiredis" >> .gitignore 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T14:48:58.127

[我已经在将 nodejs 部署到 heroku](https://stackoverflow.com/questions/11951616/deploy-nodejs-to-heroku)时发布了一个类似问题的答案，这似乎已经解决了这个问题。

基本上尝试使用 socket.io 0.9.6 而不是 0.9.8。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-23T06:51:12.947

我做了一些谷歌搜索，但找不到解决方案，但我尝试如下更改我的代码，它开始工作......

```
var express = require('express'),
    app = express(), 
    server = require('http').createServer(app),
    io = require('socket.io').listen(server),

var port = process.env.PORT || 5000; // Use the port that Heroku provides or default to 5000

server.listen(port, function() {
});

io.configure(function () {
    io.set("transports", ["xhr-polling"]);
    io.set("polling duration", 10);
    io.set("log level", 1);
}); 
```

让我知道你是否同样​​的问题，但仍然没有成功..

# javascript - 更新 Javascript 货币计算器以实时计算多个总数

> ID：11674554
> 
> 赞同：0
> 
> 时间：2012-07-26T17:15:39.660
> 
> 标签：javascript, real-time, calculator

我在 Yaldex 上找到了以下货币计算器，需要帮助对其进行一些更新。我足智多谋可以编辑现有的 Javascript，但仅此而已。代码如下，一个工作示例可以在这里找到：[http ://www.yaldex.com/FSCalculators/MoneyCounter.htm](http://www.yaldex.com/FSCalculators/MoneyCounter.htm)

```
<script language="javascript" type="text/javascript">
/* Visit http://www.yaldex.com/ for full source code
and get more free JavaScript, CSS and DHTML scripts! */
<!-- Begin
function s(num, val) {
amount = num * 1; // amount is the num or NaN
sum = (!num ? 0 : num) * val;  // the sum for that bill or coin

if (isNaN(amount)) { // if the entire is not a number

alert(
"' " + num + " ' is not a valid entry and that field will "
+ "not be included in the total money calculation."
);

return 0;
}
else
return sum; // if it is OK, send sum back
}

function money(form) {
hun = s(form.hun.value, 100); // Each amount is the returned value
fif = s(form.fif.value, 50);  // for the amount in the s() function
twe = s(form.twe.value, 20);
ten = s(form.ten.value, 10);
fiv = s(form.fiv.value, 5);
one = s(form.one.value, 1);
hlf = s(form.hlf.value, .5);
qtr = s(form.qtr.value, .25);
dme = s(form.dme.value, .1);
nck = s(form.nck.value, .05);
pny = s(form.pny.value, .01);

// add up all the amounts
var ttl = hun + fif + twe + ten + fiv
+ one + hlf + qtr + dme + nck + pny;

// rounds total to two decimal places

ttl = "" + ((Math.round(ttl * 100)) / 100);

dec1 = ttl.substring(ttl.length-3, ttl.length-2);
dec2 = ttl.substring(ttl.length-2, ttl.length-1);

if (dec1 != '.') { // adds trailing zeroes if necessary
if (dec2 == '.') ttl += "0";
else ttl += ".00";
}
form.total.value = "$ " + ttl; // display total amount
}
//  End -->
</script>

<form name=coinform>
<table border=1>
<tr>
<td align=center>$ 100</td>
<td align=center>$ 50</td>
<td align=center>$ 20</td>
<td align=center>$ 10</td>
<td align=center>$ 5</td>
<td align=center>$ 1</td>
</tr>
<tr>
<td align=center><input type=text name=hun size=3></td>
<td align=center><input type=text name=fif size=3></td>
<td align=center><input type=text name=twe size=3></td>
<td align=center><input type=text name=ten size=3></td>
<td align=center><input type=text name=fiv size=3></td>
<td align=center><input type=text name=one size=3></td>
</tr>
<tr>
<td colspan=6> </td>
</tr>
<tr>
<td> </td>
<td align=center>50 &cent;</td>
<td align=center>25 &cent;</td>
<td align=center>10 &cent;</td>
<td align=center>5 &cent;</td>
<td align=center>1 &cent;</td>
</tr>
<tr>
<td> </td>
<td align=center><input type=text name=hlf size=3></td>
<td align=center><input type=text name=qtr size=3></td>
<td align=center><input type=text name=dme size=3></td>
<td align=center><input type=text name=nck size=3></td>
<td align=center><input type=text name=pny size=3></td>
</tr>
<tr>
<td colspan=5 align=center>
<input type=button name=calc value="Calculate" onClick="javascript:money(this.form)">
<input type=text name=total size=10>
</td>
</tr>
</table>
</form> 
```

我已经确定如何通过向每个输入字段添加一个 onkeyup 事件来实时更新总计，但我还想为每个美元/硬币金额添加一个附加字段，以显示每个单位的总金额用户输入每个数量，并实时更新所有数量的总计。我还希望能够将总计显示为两个金额，即总美元和总美分（例如 100.00 美元/10000 美分）。我设想它或多或少看起来像这样：

```
$100 x ___ = $___ total
$50 x ___ = $___ total
.
.
.
5¢ x ___ = $___ total
1¢ x ___ = $___ total

GRAND TOTAL $_______ / _______ cents 
```

任何和所有的指导和帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T17:51:31.200

[Knockout JS](http://knockoutjs.com/)将是实现此类功能的好方法。这是一个可以做什么的快速示例。每美元金额的数量将是一个可观察的，而总数将是计算的可观察的：

**HTML**

```
<input type="text" data-bind="value: hundredsQuantity, valueUpdate: 'afterkeydown'" />
<span id="hundredsResult" data-bind="text: hundredsAmount"></span> 
```

**视图模型 (JS)**

```
return function myViewModel() {
    var self = this;
    self.hundredsQuantity = ko.observable();
    self.hundredsAmount = ko.computed(function () {
        return parseInt(self.hundredsQuantity) * 100;
    });
}; 
```

在这种情况下，数据绑定配置为在用户开始键入字符 ( `afterkeyDown`) 时立即更新。

然后，视图模型`var vm = new myViewModel();`将由`ko.applyBindings(vm)`. Knockout 站点上的文档非常好，将提供对此处显示的模式的更多解释。祝你好运！

# java - 从 AsyncTask 添加数据时的 Android Listview 问题

> ID：11674564
> 
> 赞同：1
> 
> 时间：2012-07-26T17:16:25.597
> 
> 标签：java, android, listview

我正在使用带有lazyadapter的android listview在列表中显示图像和textview。

当用户滚动到底部时，我正在使用 AsyncTask 添加更多内容，但是当我执行 AsyncTask 时，它会终止进程。

这是我的代码。 **主要活动**

```
import java.util.ArrayList;
import java.util.HashMap;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;
import org.w3c.dom.NodeList;

import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.sax.Element;
import android.view.View;
import android.widget.AbsListView;
import android.widget.AbsListView.OnScrollListener;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.Button;
import android.widget.ListView;
import android.widget.ProgressBar;
import android.widget.TextView;

public class AndroidJSONParsingActivity extends Activity {

    // url to make request

    // JSON Node names
    static final String TAG_CONTACTS = "comics";
    static final String TAG_ID = "id";
    static final String TAG_NAME = "title";
    static final String TAG_EMAIL = "id";
    static final String TAG_PHONE_MOBILE = "image";

    // contacts JSONArray
    JSONArray contacts = null;
    ListView list;
    LazyAdapter adapter;
    static int counter = 0;
    ArrayList<HashMap<String, String>> contactList = new ArrayList<HashMap<String, String>>();
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    list=(ListView)findViewById(R.id.list);
                    // call the function
    LoadData();

}

public void LoadData(){

      String url = "http://myurl?start=" + counter;

            // Creating JSON Parser instance
            JSONParser jParser = new JSONParser();

            // getting JSON string from URL
            JSONObject json = jParser.getJSONFromUrl(url);

            try {
                // Getting Array of Contacts
                contacts = json.getJSONArray(TAG_CONTACTS);

                // looping through All Contacts
                for(int i = 0; i < contacts.length(); i++){
                    JSONObject c = contacts.getJSONObject(i);

                    // Storing each json item in variable
                    String id = c.getString(TAG_ID);
                    String name = c.getString(TAG_NAME);
                    String email = c.getString(TAG_EMAIL);
                    String mobile = "http://www.funnydash.com/uploads/s/" + c.getString(TAG_PHONE_MOBILE);
                    // Phone number is agin JSON Object

                    // creating new HashMap
                    HashMap<String, String> map = new HashMap<String, String>();

                    // adding each child node to HashMap key => value
                    map.put(TAG_ID, id);
                    map.put(TAG_NAME, name);
                    map.put(TAG_EMAIL, email);
                    map.put(TAG_PHONE_MOBILE, mobile);

                    // adding HashList to ArrayList
                    contactList.add(map);
                }
            } catch (JSONException e) {
                e.printStackTrace();
            }

            /**
             * Updating parsed JSON data into ListView
             * */

            // Getting adapter by passing xml data ArrayList
            adapter=new LazyAdapter(this, contactList);        
            list.setAdapter(adapter);

            list.setOnScrollListener(new EndlessScrollListener());

}

public class BackgroundLoadMore extends AsyncTask<Void, Void, Void> {

      @Override
        protected void onPreExecute() {
            // Showing progress dialog before sending http request

        }

    protected Void doInBackground(Void... unused) {
        LoadData();

        return (null);

    }

    protected void onPostExecute(Void unused) {
        // On completing background task
        // closing progress dialog etc,.
        list.setOnScrollListener(new EndlessScrollListener());

        }

}

      public class EndlessScrollListener implements OnScrollListener {

            private int visibleThreshold = 0;
            private int currentPage = 0;
        private int previousTotal = 0;
        private boolean loading = true;

        public EndlessScrollListener() {
        }
        public EndlessScrollListener(int visibleThreshold) {
            this.visibleThreshold = visibleThreshold;
        }

        @Override
        public void onScroll(AbsListView view, int firstVisibleItem,
                int visibleItemCount, int totalItemCount) {
            if (loading) {
                if (totalItemCount > previousTotal) {
                    loading = false;
                    previousTotal = totalItemCount;
                    counter +=12;
                }
            }
            if (!loading && (totalItemCount - visibleItemCount) <= (firstVisibleItem + visibleThreshold)) {
                // I load the next page of gigs using a background task,
                // but you can call any function here.
                new BackgroundLoadMore().execute();
                loading = true;
            }
        }

        @Override
        public void onScrollStateChanged(AbsListView view, int scrollState) {
        }
    } 
```

}

**Lazyadapter.java**

```
import java.util.ArrayList;
import java.util.HashMap;

import android.app.Activity;
import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageView;
import android.widget.TextView;

public class LazyAdapter extends BaseAdapter {

    private Activity activity;
    private ArrayList<HashMap<String, String>> data;

    private static LayoutInflater inflater=null;
    public ImageLoader imageLoader; 

    public LazyAdapter(Activity a, ArrayList<HashMap<String, String>> d) {
        activity = a;
        data=d;
        inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        imageLoader=new ImageLoader(activity.getApplicationContext());
    }

    public int getCount() {
        return data.size();
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        View vi=convertView;
        if(convertView==null)
            vi = inflater.inflate(R.layout.list_row, null);

        TextView title = (TextView)vi.findViewById(R.id.title); // title
        TextView artist = (TextView)vi.findViewById(R.id.artist); // artist name

        ImageView thumb_image=(ImageView)vi.findViewById(R.id.list_image); // thumb image

        HashMap<String, String> song = new HashMap<String, String>();
        song = data.get(position);

        // Setting all values in listview

    title.setText(song.get(AndroidJSONParsingActivity.TAG_NAME));
    artist.setText(song.get(AndroidJSONParsingActivity.TAG_ID));

    imageLoader.DisplayImage(song.get(AndroidJSONParsingActivity.TAG_PHONE_MOBILE), thumb_image);
    return vi;
} 
```

}

[这](http://pastebin.com/XiUpci64)就是我在我的 logcat 中得到的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T17:21:16.300

问题是因为您试图从 UI 线程外部在列表中设置适配器。Android 中的视图**不能**在后台线程中修改，在这种情况下，这意味着您不能`doInBackground`从`AsyncTask`. 因此，您的方法`LoadData()`不能调用以下内容：

```
adapter=new LazyAdapter(this, contactList);        
list.setAdapter(adapter);
list.setOnScrollListener(new EndlessScrollListener()); 
```

`contactList`您将需要从您的方法返回一些数据（可能） `doInBackground()`，然后将有问题的代码移动到在 UI 线程上运行**的**`onPostExecute()`方法。

 **堆栈跟踪中指出的关键问题是：

```
CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T17:20:58.520

您正在尝试在主线程类之外创建一个视图。

正如这条线所说

> 07-26 22:26:36.933: E/AndroidRuntime(16353): Caused by: android.view.ViewRootImpl$CalledFromWrongThreadException: 只有创建视图层次结构的原始线程才能触摸其视图。

您的主要问题在您的 asyncTask 中。您不能创建不在原始线程中的视图项。你可以做什么。是将这些行放在您的 post 方法上，而不是在后台方法或 asynctask 类之外。

```
 // Getting adapter by passing xml data ArrayList
        adapter=new LazyAdapter(this, contactList);        
        list.setAdapter(adapter); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T17:22:57.707

**1**、始终保持**UI线程在UI线程上工作，Non-UI线程在Non-UI线程上工作，这****从Android蜂窝版的到来**就成为了一个规律。

 ****2.**从您上面的 logcat 中，它只指向一件事，即您正**试图从 UI 线程（主专用 UI​​ 线程）上的非 UI 线程执行某些操作。**

**在这里....您在作为非 UI 线程的 doInBackground() 上调用它。**

```
adapter=new LazyAdapter(this, contactList);        
list.setAdapter(adapter);
list.setOnScrollListener(new EndlessScrollListener()); 
```

**3.修改适配器表单UI线程，可以在** `onPostExecute()`****

# perl - 如何在 perl 脚本中将输入文件作为循环提供？

> ID：11674565
> 
> 赞同：-1
> 
> 时间：2012-07-26T17:16:26.033
> 
> 标签：perl

我正在使用下面的脚本来比较两个文件：`UEDP35.txt`和`BB_UEDP35.txt`. 如果我手动输入，这个脚本效果很好，但现在我需要更多的东西。

在一个文件夹中，我有许多文件，例如`UEDP35.txt`. 例如：`UEDP1.txt`,`UEDP2.txt`等`UEDP3.txt`。类似地，还有另一组文件，`BB_UEDP35.txt`例如`BB_UEDP1.txt`,等`BB_UEDP2.txt`，在这两个文件名中都很常见。`BB_UEDP3.txt``UEDP`

如果有一对匹配的 UDP 编号，那么我想将这两个文件作为脚本的输入。如果在比较它们时发现任何差异，则必须将它们写入另一个新文件。这必须作为循环来完成。

```
use warnings;
use strict;

open AIN, "<UEDP35.txt ";
open BIN, "<BB_UEDP35.csv";

my %seen;
while (<ain>) {
  my $v = (split(/,/))[0];
  $seen{$v}++;
}

while (<bin>) {
  my $v = (split)[0];
  print "$vn" if not $seen{substr($v, 0, 5)};
}

close AIN;
close BIN;

ls -1 UEDP* | while read line; do f1=echo $line | cut -f1 -d'.' ; f2=ls -1 BB_UEDP* | grep $f1;f3=echo $line | cut -f1; ./test.sh $f3 $f2;done 
```

示例：我有两个文件：`A.txt`和`B.txt`. 在 file`A.txt`中，第一个具有五位数字的文件。在文件`B.txt`中给出了整数。如果文件的前五位数字`A.txt`与第二个文件不匹配，`B.txt`那么我需要将数字打印`B.txt`到另一个文件中。

一个.txt

```
81270,UEDP35

81274,UEDP35

87562,UEDP35

89537,UEDP35

90050,UEDP35 
```

B.txt

```
8127047667

8756209276

9956176149

8127463873

8953713146

9935805068 
```

这`A.txt`是`UEDP35.txt`和`B.txt`是`BB_UEDP35.txt`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T18:34:18.167

```
use strict;
use warnings;

for my $bb_uedp_file (<BB_UEDP*>) {
  if ($bb_uedp_file =~ /BB_UEDP(\d+)/) {
    my $uedp_file = "UEDP$1.txt";
    open AIN, "<$uedp_file"    or die($uedp_file);
    open BIN, "<$bb_uedp_file" or die($bb_uedp_file);
    # ...  rest of the script ...
    close AIN;
    close BIN;
  }
} 
```

# java - 如何使用 Java 编辑 docx 字段内容？

> ID：11674567
> 
> 赞同：3
> 
> 时间：2012-07-26T17:16:31.860
> 
> 标签：java, ms-word, docx

我有一个 .docx 模板，其中定义了字段。我需要获取用户在 Web 服务中输入的数据，并使用 Java 将其插入到这些字段中。

我和我的团队大部分时间都在研究这个问题，但我们一直无法找到一个直接的解决方案。

有没有办法相对容易地做到这一点？

谢谢。

编辑：

*   按 alt+F9 后，所有字段显示如下：`{ FORMTEXT }`

*   POI 似乎没有足够的支持来做到这一点。

*   我无法在 Windows XP 中成功设置 Open Office SDK，因为我无法满足它的所有依赖项。

*   docx4j 可能有效，但其中的 MailMerger 当前未使用给定数据填充字段。

*   如果我提取 docx 并打开 word/document.xml 文件，这就是围绕一个字段的 XML 的样子：[http](http://pastebin.com/uXBtz7X5) : //pastebin.com/uXBtz7X5（搜索 FieldName 和 FieldValue 以查看它们的定义位置）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-03T15:22:32.757

看看 Docx4j，您可以使用它来更新 docx 文档中的字段，还有示例

[字段更新程序示例](https://github.com/plutext/docx4j/blob/master/src/main/java/org/docx4j/model/fields/FieldUpdater.java)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T23:19:28.657

**披露：我公司赞助 docx4j**

看看[MailMerger](https://github.com/plutext/docx4j/blob/master/src/main/java/org/docx4j/model/fields/merge/MailMerger.java)；见底部的主要方法。

对于其他类型的字段，您可以尝试更通用的字段支持。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T19:34:41.557

docx 格式是一个 zip 文件，里面有 XML 和其他文件。您可以使用标准 XML 工具编辑 XML 文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T01:07:01.597

Docmosis 和 JODReports 可能会对您有所帮助 - 它们是用于以多种格式生成文档/填充模板的 Java 库。Docmosis 可以与 DocX 一起使用，因为它们基于相同的技术，所以 JODReports 可能也可以。我不知道特定的 {FORMTEXT} 字段是否可以工作，但是当您按 ALT-F9 时，Docmosis 可以处理纯文本文件或看起来像 {MERGEFIELD} 的 Word 合并字段。

# matlab - 五维矩阵操作

> ID：11674568
> 
> 赞同：0
> 
> 时间：2012-07-26T17:16:33.623
> 
> 标签：matlab, for-loop, matrix

我对代码进行了以下更改，但仍然在调用“if 语句”的行上出现“索引超出矩阵尺寸”错误，并且我要从 2:25 开始循环“h”。我仍然知道如何在当前维度方程表达式中使用前一维度中的元素

```
 number_of_days = 3;
number_of_hours = 24*number_of_days;
number_panels = 1:5;

for idx_number_panels = 1:length(number_panels) % range of PV panel units examined

for number_turbines = 0:1 % range of wind turbine units examined

    for number_batteries = 1:2 % range of battery units examined

        for h=2:25 %# hours
               battery_capacity(:,:,:,1,1) = max_battery_capacity*number_batteries;

            for d = 1:number_of_days %# which day

                n = h + 24*(d-1);

                if   (max_battery_capacity*number_batteries) - (battery_capacity(idx_number_panels, number_turbines+1 ,number_batteries, h-1,d)*number_batteries) >0

                    storage_availability(idx_number_panels, number_turbines+1 ,number_batteries, h,d) =  (max_battery_capacity*number_batteries) - (battery_capacity(idx_number_panels, number_turbines+1 ,number_batteries, h-1,d)) ;

                else

                    storage_availability(idx_number_panels, number_turbines+1 ,number_batteries, h,d) = 0;

                end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T17:42:26.220

让我们以小时为单位来看看这个。

```
for h = 1:24
    battery_capacity(1) = initial_battery_capacity*number_batteries

    if hourly_total_RES(h) > hourly_annual_demand(n), % battery charging
        battery_capacity(h) = battery_capacity(h-1);
    else
        battery_capacity(h) = battery_capacity(h-1);
    end
end 
```

首先，if 语句的两边和写的一样。我假设您的实际代码对以前的数据进行了某种处理。如果没有，那就有问题了。

如果您切换日期和小时循环的顺序，它还可能使代码更容易思考。对我来说，一次查看一天中的所有时间比查看每天的第一个小时，然后是每天的第二个小时更有意义......

至于索引，一个明确的错误是您`battery_capacity(h-1)`在循环的第一次迭代中索引。也就是说，当`h`是 1 时，您定义`battery_capacity(1)`然后尝试查看`battery_capacity(0)`，这可能是引发错误的原因。

要解决此问题，您可以检查 if `h == 1`，但我认为更优雅的方法是在进入该循环之前循环`h = 2:24`并设置。`battery_capacity(1)`看看这段代码是否有效：

```
for d = 1:number_of_days
    battery_capacity(1) = initial_battery_capacity*number_batteries
    for h = 2:24
        if hourly_total_RES(h) > hourly_annual_demand(n), % battery charging
            battery_capacity(h) = battery_capacity(h-1);
        else
            battery_capacity(h) = battery_capacity(h-1);
        end
    end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T17:29:27.083

据我了解，最后两个维度分别存储小时和天。因此，要将第一天的值设置为 hour=1（我假设这意味着一天的午夜开始）：

```
battery_capacity(:,:,:,1,1) = 2;    %# 2kWh 
```

这将为`2`所有“面板”、所有“涡轮机”和所有“电池”设置值。

我假设您已经在代码中的某个位置预先分配了矩阵。

* * *

对于它的价值，我认为您`battery_capacity`在代码中第一次提到的地方有错字（缺少`h`参数）

# python - 可选但有条件的参数python

> ID：11674570
> 
> 赞同：0
> 
> 时间：2012-07-26T17:16:49.953
> 
> 标签：python, arguments

因此，假设我有一个带有两个参数的函数，但至少应该存在一个：

```
 def foo_bar(foo = None, bar = None): 
```

问题是它们都是可选的，但实际上要么`foo`或`bar`将被传入。现在我检查函数中是否存在，如下所示：

```
do_this() if foo else do_that() sort of logic.. 
```

但我不喜欢这个样子。

处理这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T17:22:01.177

我认为你做对了。也可以使用以下`kwargs`语法读取参数：

```
def foo(*args, **kwargs):
    if 'foo' in args:
        do_this()
    elif 'bar' in args:
        do_that()
    else:
        raise ValueError() 
```

或者，您可以执行以下操作：

```
def foo(param, flag):
    if flag == 'foo':
        do_this()
    elif flag == 'bar':
        do_that()
    else:
        raise ValueError() 
```

无论哪种方式都应该没问题。希望这可以帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T17:32:14.907

您走在正确的轨道上，但是如果两者都指定了怎么办？我通常做的是：

```
def some_func(foo=None, bar=None):
    "either one, or neither, but not both, are allowed"
    if foo is not None and bar is not None:
        raise TypeError("cannot specify both 'foo' and 'bar'")
    if foo is not None:
        pram = foo
    elif bar is not None:
        pram = bar
    else:
        pram = None  # or whatever 
```

简单，容易理解。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-26T17:22:36.417

想到3种方法来处理它：

如果您可以根据有关参数的某些规则（一种是一种类型，一种是另一种，一种匹配 1 个正则表达式，另一种匹配等）来切换行为，请传递一个参数并确定在函数内部要做什么。

创建 2 个函数，它们都为共享行为调用其他函数，但独立处理 foo 和 bar 特定情况。

传递 1 个数据值和另一个控制值：

```
def foo_bar(val, control):
    if control=='foo':
        #Do foo stuff
    elif control=='bar':
        #Do bar stuff 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T17:19:52.737

为什么不简单地检查一下哪个是 None，然后说另一个肯定是存在的呢？

```
if foo == None:
    do bar()
elif bar == None:
    do foo()
else:
    throwUpYourHandsInFrustration() 
```

# python - 具有参数限制的根 minuit2 轮廓

> ID：11674574
> 
> 赞同：3
> 
> 时间：2012-07-26T17:17:19.957
> 
> 标签：python, data-analysis, minimization, root-framework

我正在尝试使用作为[ROOT](http://root.cern.ch/drupal/)数据分析框架的一部分的 Minuit2 最小化器为具有物理限制的参数生成等高线图。不幸的是，当我尝试生成等高线图时，Minuit2 似乎有意将参数漂移到超出其限制的区域：

```
>>> from minuit2 import Minuit2
>>> def f(x,y):
...     if x < 0 or y < 0:
...             print 'x = %.2f, y = %.2f' % (x,y)
...             raise Exception
...     return x**2 + y**2
... 
>>> m = Minuit2(f)
>>> m.limits['x'] = 0, 10
>>> m.limits['y'] = 0, 10
>>> m.migrad()
>>> xy = m.contour('x','y',3)
Info in <Minuit2>: MnMinos UP value has changed, need to update FunctionMinimum class
x = -9.95, y = 0.00
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 4, in f
Exception 
```

有没有其他人处理过这个或类似的问题？有什么解决方法吗？

我已经在[ROOT 论坛](http://root.cern.ch/phpBB3/viewtopic.php?f=3&t=15023&sid=463c7f827b418610e211e6caa3741717)上问过这个问题，但我认为可能还有一些堆栈溢出用户已经处理过这个或类似的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T10:23:37.050

在不引发异常的情况下尝试您的示例

```
def f(x,y):
    return x ** 2 + y ** 2 
```

并且您将获得合理的 xy 轮廓点（即在真实轮廓的 1e-3 范围内）。

请注意，`sigmas=3`您的轮廓调用中的参数`m.contour('x', 'y', 3)`意味着`sigmas ** 2 == 9`将计算轮廓，并计算沿参数限制的轮廓点。据我所知， [contour() pyminuit 文档](http://code.google.com/p/pyminuit/wiki/FunctionReference#contour%28param1,_param2,_sigmas%5B,_npoints%5D%29)中没有提到这一点）。在您的示例中，轮廓从 开始`(0, 0)`，上升到`(3, 0)`，沿着圆圈到`(0, 3)`，然后返回到`(0, 0)`。

一种常见的方法是通过为排除的参数返回非常高的值来在成本函数中实现参数限制（任意形状，不仅是最小值/最大值）：

```
def f(x,y):
    if x < 0 or y < 0:
        return 1e10
    return x ** 2 + y ** 2 
```

这确实将优化器抛出了禁止区域，但它并不阻止它有时探测它们（即`f`在那里评估）。

我不知道为什么`contour()`要严格遵守您设置的限制

```
m.limits['x'] = 0, 10
m.limits['y'] = 0, 10 
```

[这是 Minuit（和 Minuit2）使用的轮廓算法](http://wwwasdoc.web.cern.ch/wwwasdoc/minuit/node7.html#SECTION00344000000000000000)的简短描述，这里是[ROOT 中 Minuit2 代码的文档](http://root.cern.ch/root/html/ROOT__Minuit2__MnContours.html)，我没有找到显示实现的实际 C 文件。

# php - 浮点数在 PHP 中不四舍五入

> ID：11674575
> 
> 赞同：0
> 
> 时间：2012-07-26T17:17:27.540
> 
> 标签：php, floating-point, rounding

我有一个类似于 4.0157725356416E+24 的浮点数组，它们没有被四舍五入`round()`。（看门狗是一个drupal日志工具）

```
$score = ($results['results'][0]['score']);
watchdog( 'multi', "float: $score");

$score = ($score * 100);
watchdog( 'multi', "percent (". gettype($score) . "): $score");

$score = round( $score );
watchdog( 'multi', "round: $score"); 
```

这个的输出是：

```
> float: 1.9532660466727E+25
> percent (double): 1.9532660466727E+27
> round: 1.9532660466727E+27 
```

我在这里遗漏了一些东西......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T17:19:56.573

您正在查看指数数字（即 1.9532660466727 * 10 ^ 27）。它们仍在四舍五入到最接近的整数，它们只是巨大的。

与 1,953,266,046,672,700,000,000,000,000 相同

# html - 如何使css3中的动画位于其他图像之上？

> ID：11674580
> 
> 赞同：0
> 
> 时间：2012-07-26T17:17:32.237
> 
> 标签：html, css, css-animations

嗨，伙计们，我正在尝试制作一个小型 css3 动画...问题是它并没有超出我想要的范围...它下降了...我尝试应用 z-index 但它有还没有工作...在想也许动画的处理方式不同？

如果有人对我如何将它移到顶部有任何想法，请告诉我

```
#header{
   background: url(/images/clouds.png) repeat-x center 48px;
   -webkit-animation-name:cloud-crawl-header;
   -webkit-animation-duration:  180s;
   -webkit-animation-timing-function:linear;
   -webkit-animation-iteration-count:infinite;
   -moz-animation-name:cloud-crawl-header;
   -moz-animation-duration:180s;
   -moz-animation-timing-function:linear;
   -moz-animation-iteration-count:infinite;
   z-index: 5;
}
@-webkit-keyframes cloud-crawl-header{
    from{ background-position: -100% 48px, center top}to{background-position: 100% 48px, center top}
    } 
```

我只是想让它超越我正在使用的基本图像......

像这样添加的

```
<div class="logo">
   <a href="website.com/bla">
      <img src="images/logo.jpg" alt="logotop" title="title!" />
   </a>
</div>

.logo {
   margin: auto auto;
   text-align: center;
   z-index: -1;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T14:19:51.703

元素的位置当前是静态的 - 您需要将其更改为相对、绝对或固定才能应用 z-index。在你的情况下，我认为应用相对定位是最好的。推理：它不会改变元素的 x,y (left,top) 位置。

# android - 通过消息应用程序发送 ListView 结果

> ID：11674589
> 
> 赞同：0
> 
> 时间：2012-07-26T17:18:07.790
> 
> 标签：android, string, listview, android-arrayadapter, arrays

我对编程很陌生。我有一个有多个视图的应用程序。主视图显示早餐、午餐和晚餐等列表。选择一个物品后，示例午餐，显示午餐菜单的列表，例如汉堡包，芝士汉堡，炸薯条...（此列表是由\ valuts \ valuts \ valuts \ bunch.xml的弦乐阵列午餐_MENU创建的。 ) 当用户选择他们想要的项目时，它存储在一个名为 myNewList 的新数组中，并在用户按下 lunchList 按钮时显示。显示用户选择的所有项目。到目前为止，一切都很好。我在 selecteditems.xml 中创建了一个 android:onClick="shareMyList" 并且该按钮有效，但没有填充我的列表。我认为我需要一些如何将其转换为字符串的方法，这就是我需要帮助的地方。

这是我现在的问题......我有我的共享按钮，当按下它时，我希望它自动打开默认的消息应用程序并从所选项目 ListView 中填充列表。

```
package com.mycompany.lunch;

import java.util.ArrayList;
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ListView;
import android.widget.Toast;

public class LunchListMenu extends Activity {  

    /** Called when the activity is first created. */
    @Override
    public void onCreate(final Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.maincoarse);
        final ListView lv=(ListView)findViewById(R.id.listView1);              
        ArrayAdapter<CharSequence> adapter=ArrayAdapter.createFromResource(this, R.array.lunch_menu,android.R.layout.simple_list_item_1);
        lv.setAdapter(adapter);
        final ArrayList<String> myNewList = new ArrayList<String>();
        lv.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {  
                String item=lv.getItemAtPosition(arg2).toString();
                String itemordered;
                itemordered = item + " added to list";
                Toast.makeText(getApplicationContext(), itemordered, Toast.LENGTH_SHORT).show();
                myNewList.add(item);                
            }
        });

                // List View Button
                Button btnLunchList = (Button) findViewById(R.id.lrList);
                btnLunchList.setOnClickListener(new View.OnClickListener() {

                    @Override
                    public void onClick(View v) {                       
                        setContentView(R.layout.selecteditems);
                        ListView selecteditems = (ListView) findViewById(android.R.id.list);
                        ArrayAdapter<String> newadapter = new ArrayAdapter<String>(LunchListMenu.this, android.R.layout.simple_list_item_1, myNewList);              
                        selecteditems.setAdapter(newadapter);
                    }
                });
    }
                    public void shareMyList(View v){
                        // Share Selected Items Button
                        Button btnShareItems = (Button) findViewById(R.id.shareMyList);
                        btnShareItems.setOnClickListener(new View.OnClickListener() {

                            @Override
                            public void onClick(View v) {
                                // TODO Auto-generated method stub

                                Intent share = new Intent(Intent.ACTION_SEND);
                                share.setType("text/plain");
                                share.putExtra(Intent.EXTRA_TEXT, "I'm being sent!!");
                                startActivity(Intent.createChooser(share, "Share Text"));
                            }

                        });
                    }
} 
```

这是午餐菜单布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:background="@drawable/main_background"
    android:paddingLeft="10.0dip" 
    android:paddingTop="0.0dip" 
    android:paddingRight="10.0dip" 
    android:paddingBottom="10.0dip" 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <Button
            android:id="@+id/lrList"
            android:layout_width="72dip"
            android:layout_height="72dip"
            android:layout_gravity="right"
            android:background="@drawable/list" />

         <ImageView
            android:id="@+id/LunchMenuTitle"
            android:contentDescription="@string/LunchMenu"
            android:layout_width="0dip"
            android:layout_height="72dip"
            android:layout_weight="0.96"
            android:background="@drawable/lunch"
            android:paddingLeft="10.0dip"
            android:paddingRight="10.0dip" />

    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="10.0dip"
        android:background="@drawable/head"
        android:orientation="horizontal" />

    <ListView
        android:id="@+id/listView1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:divider="#FFCC00"
        android:dividerHeight="2dp" >
    </ListView>

    <LinearLayout 
    android:orientation="horizontal" 
    android:background="@drawable/head" 
    android:layout_width="fill_parent" 
    android:layout_height="10.0dip" />  
</LinearLayout> 
```

这是我的 selecteditems.xml 布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
      xmlns:android="http://schemas.android.com/apk/res/android"
      android:orientation="vertical"
      android:background="@drawable/main_background" 
      android:paddingLeft="10.0dip" 
      android:paddingTop="0.0dip" 
      android:paddingRight="10.0dip" 
      android:paddingBottom="10.0dip" 
      android:layout_width="fill_parent" 
      android:layout_height="fill_parent">

        <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <Button
            android:id="@+id/shareMyList"
            android:layout_width="72dip"
            android:layout_height="72dip"
            android:layout_gravity="right"
            android:onClick="shareMyList"
            android:background="@drawable/share" />

        <ImageView
            android:id="@+id/selectedItemsTitle"
            android:contentDescription="@string/LunchTitle"
            android:layout_width="0dip"
            android:layout_height="72dip"
            android:layout_weight="0.96"
            android:background="@drawable/title"
            android:paddingLeft="10.0dip"
            android:paddingRight="10.0dip" />

    </LinearLayout>

    <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="10.0dip"
            android:background="@drawable/head"
            android:orientation="horizontal" />  

              <ListView
                  android:id="@android:id/list"
                  android:layout_width="fill_parent"
                  android:layout_height="wrap_content"
                  android:divider="#FFCC00"
                  android:dividerHeight="2dp"
                  android:padding="10dip"
                  android:textColor="#ffffff"
                  android:textSize="20dip"
                  android:textStyle="bold" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T15:35:07.783

这可能是最笨拙的方法，但它确实有效。

```
package com.mycompany.lunch;

import java.io.BufferedReader;
import java.io.File;
import java.io.FileReader;
import java.io.FileWriter;
import java.io.IOException;
import java.io.PrintWriter;
import java.util.ArrayList;
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.os.Environment;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ListView;
import android.widget.Toast;

public class LunchListMenu extends Activity {

    String itemsordered;  

    /** Called when the activity is first created. */
    @Override
    public void onCreate(final Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.maincoarse);
        final ListView lv=(ListView)findViewById(R.id.listView1);              
        ArrayAdapter<CharSequence> adapter=ArrayAdapter.createFromResource(this, R.array.lunch_menu,android.R.layout.simple_list_item_1);
        lv.setAdapter(adapter);
        final ArrayList<String> myNewList = new ArrayList<String>();
        lv.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {  
                String item=lv.getItemAtPosition(arg2).toString();
                String itemordered;
                itemordered = item + " added to list";
                Toast.makeText(getApplicationContext(), itemordered, Toast.LENGTH_SHORT).show();
                myNewList.add(item);                
            }
        });

                // List View Button
                Button btnLunchList = (Button) findViewById(R.id.lrList);
                btnLunchList.setOnClickListener(new View.OnClickListener() {

                    @Override
                    public void onClick(View v) {                       
                        setContentView(R.layout.selecteditems);
                        ListView selecteditems = (ListView) findViewById(android.R.id.list);
                        ArrayAdapter<String> newadapter = new ArrayAdapter<String>(LunchListMenu.this, android.R.layout.simple_list_item_1, myNewList);              
                        selecteditems.setAdapter(newadapter);

                        // Get sdCard location so we can Create Dir and File
                        File sdCard = Environment.getExternalStorageDirectory();
                        File lunch = new File(sdCard,"Lunch");
                        lunch.mkdirs();
                        File file = new File(lunch, "Lunch.txt");
                        PrintWriter out = null;
                        try {
                            out = new PrintWriter(new FileWriter(file));
                        } catch (IOException e) {
                            e.printStackTrace();
                        }  

                        // Write each string in the array
                        StringBuilder text = new StringBuilder();
                        for (String s : myNewList) {  
                            out.println(s);  
                        }  
                        out.close();

                        // read File
                        try {
                            BufferedReader br = new BufferedReader(new FileReader(file));
                            String line;
                            while ((line = br.readLine()) != null) {
                                text.append(line);
                                text.append(',');
                                text.append(' ');
                            }
                        }
                        catch (IOException e) {
                        }
                        itemsordered = text; 
                    }
                });
    }

                    public void shareMyList(View v){
                        // Share Selected Items Button
                        Button btnShareItems = (Button) findViewById(R.id.shareMyList);
                        btnShareItems.setOnClickListener(new View.OnClickListener() {

                            @Override
                            public void onClick(View v) {
                                Intent sendIntent = new Intent(Intent.ACTION_VIEW);
                                sendIntent.putExtra("sms_body", itemsordered); 
                                sendIntent.setType("vnd.android-dir/mms-sms");
                                startActivity(sendIntent);
                            }
                        });
                    }
} 
```

# web-services - 如何在两个 Apache Tomcat 服务器之间启用 SSL 通信

> ID：11674594
> 
> 赞同：2
> 
> 时间：2012-07-26T17:18:17.210
> 
> 标签：web-services, tomcat, ssl, client-server, ssl-certificate

我有两个计算机系统，每个系统都有一个 apache 服务器。一台机器是客户端机器，另一台是服务器机器。我希望客户端请求和服务器响应都被加密，从而使数据传输安全。

有人可以就我如何在这方面取得进展提供指点/步骤。通信不涉及任何 GUI 组件，这意味着通信纯粹是一个后端。

客户端和服务器都是用java编码的。我正在使用 Axis2 和 jaxws 进行通信。

目前，我能够在不启用 SSL 的情况下发送客户端请求并接收服务器响应。现在如果我启用 SSL 是否意味着我也应该根据 SSL 修改现有代码，或者当前工作代码仍然有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T18:30:19.333

一个相当简单的选项是使用[`stunnel`](http://www.stunnel.org/index.html)，它可以通过大多数 *NIX 系统上的标准包管理器获得。您将 stunnel 配置为一台服务器上的客户端（如果您使用服务器），然后将另一台服务器配置为服务器（如果您愿意，还有客户端），然后将您的 Tomcat 实例配置为连接到 localhost:XYZ ，其中 XYZ 是端口stunnel 在哪里听。

使用它的好处`stunnel`是您可以使用它来隧道任何协议：它既不是特定于 Tomcat 的技术，也不是特定于 Java 的技术，因此如果您愿意，您可以将它用于同一环境中的其他应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T17:31:23.217

你在这里有很多选择。既然您提到 SSL... 在每台服务器上生成一个非对称密钥对（RSA 2048 是一个安全的选择）。然后在每台服务器上创建一个自签名证书。然后将每个证书复制到另一台机器上，并将其标记为受 apache 正在使用的 Java 环境的信任，并且 NONE OTHER 是受信任的。在每个 apache 上配置 SSL/TLS 以使用良好的对称密码（3DES 是一个安全的选择，但如果您想要领先优势，还有其他更新的密码）。接下来确保 Tomcat 服务器之间的所有访问都是通过 https URL 进行的，并且您的状态应该不错。

另一种方法是使用 IPSEC 在使用证书或其他信任库的两个服务器之间建立静态隧道。

# c++ - VS'08 C++ 初始化指针时的访问冲突以前没有问题

> ID：11674597
> 
> 赞同：0
> 
> 时间：2012-07-26T17:18:28.987
> 
> 标签：c++, pointers, initialization, access-violation

我正在编写一个代码来索引游戏中用户可用的技能，构建为链表。我已经彻底测试了填充列表的函数，它似乎工作正常（所以列表的头指针不应该为空）。当我尝试遍历列表以在技能中设置值时，在列表中写入内存的任何代码执行之前，当我将列表的搜索函数中的临时指针初始化为头指针时，程序崩溃.

让我觉得这也很奇怪的是，它工作得很好（我已经相当彻底地测试过），直到我添加到一个列表中来存储可用项目的列表，并且当我填充它们时可能只是错过了两者之间的奇怪交互.

具体的错误是指针应该访问要写入的内存索引 0x000000c，但我看不到此时的代码是如何处理空指针的（因为在程序运行 10 次后，操作系统不应该每次都将该内存块分配给临时指针，其他任何内容都不应为空。

在这一点上我可能只是漫不经心，所以这里是代码：

根据调试器导致错误的函数：

```
void Mechanics::setSkillValue(int index, int value)
   {
    Skill *temp = FirstSkill; // << The error is happening on this line //

    while((temp != NULL)&&(temp->index != index))
    {
    temp = temp->next;
    }

    if (temp == NULL)
    {
        cout << "%";
    }
    else temp->setValue(value);

 // cout << temp->returnValue(); //This was a test check, not needed for anything
} 
```

应该填充技能和项目列表的函数。

```
 void Mechanics::Populate()
 { 
 ifstream skillstream("Skills.txt");
 if(skillstream.is_open())
 {
    while(skillstream.good())
    {
        Skill *newskill;
        int indexval;
        string skillindex;
        string skillname;
        string skilldescription;

        cout << "TP4" << endl; //TEST POINT
        getline(skillstream, skillindex);
        cout << skillindex;
        getline(skillstream, skillname);
        cout << skillname;
        getline(skillstream, skilldescription);
        cout << skilldescription; cout << endl;

        indexval = atoi(skillindex.c_str());

        newskill = new Skill(skillname, skilldescription,indexval);
    //cout << "TP5" << endl; //TEST POINT
    if(newskill == NULL) cout << "NULL!!!";
    addSkill(newskill);
    }
}

ifstream itemstream("Items.txt");
if(itemstream.is_open())
{
    while(itemstream.good())
    {
        Item *newitem;
        int indexval;
        string skillindex;
        string skillname;
        string skilldescription;
        string abilitydescription;
        string valueSTR;
        string typeSTR;
        int value;
        int type;
        int numeric[5];
//          cout << "TP4" << endl; //TEST POINT
        getline(itemstream, skillindex);
//          cout << skillindex;
        getline(itemstream, skillname);
//      cout << skillname;
        getline(itemstream, skilldescription);
//      cout << skilldescription;
        getline(itemstream, abilitydescription);
        getline(itemstream, valueSTR);
        value = atoi(valueSTR.c_str());
        getline(itemstream,typeSTR);
        type = atoi(typeSTR.c_str());

        for (int i=0; i < 5; i++)
        {
            string numericSTR;
            getline(itemstream,numericSTR);
            numeric[i]=atoi(numericSTR.c_str());
        }

        indexval = atoi(skillindex.c_str());

        newitem = new Item(indexval, skilldescription, skillname, abilitydescription, value, type, numeric);
    //cout << "TP5" << endl; //TEST POINT
//  if(newskill == NULL) cout << "NULL!!!";
    addItem(newitem);
    }
} 
```

应该将技能实际添加到技能列表的功能：

```
void Mechanics::addSkill(Skill *nskill)
{
 Skill *temp = FirstSkill;

 if(FirstSkill == NULL)
 {
     FirstSkill = nskill;
     //cout << "TP1" << endl; //TEST POINT
       //FirstSkill->printname();
 }

 else
 {
    while((temp->next != NULL))
    {
    temp = temp-> next;
    //cout << "TP2" << endl; //TEST POINT
    //temp->printname(); cout << endl;
    }
     if (FirstSkill != NULL)
     {
         temp->next = nskill;
         nskill->next = NULL;
     }
 }
} 
```

我的代码有点广泛，所以我只包含可能与引发错误的函数交互的块。

提前感谢您阅读本文以及您能够提供的任何帮助，我已经为此努力了大约 6 个小时，但我已经失去了实际追踪这个问题的视角。

# objective-c - NavBar\Toolbar 按钮文本颜色？

> ID：11674598
> 
> 赞同：0
> 
> 时间：2012-07-26T17:18:34.900
> 
> 标签：objective-c, ios, uinavigationbar, uitoolbar, uitoolbaritem

我正在使用以下代码来创建我的工具栏按钮......我想将文本颜色更改为黑色或更好......将背景图像设置为文本着色......setBackgroundColor 不起作用...... ..任何帮助表示赞赏，谢谢。

```
UIButton *btnEditLogin = [UIButton buttonWithType:UIButtonTypeCustom];
   [btnEditLogin setBackgroundImage:[UIImage imageNamed:@"btnPlain.png"] forState:UIControlStateNormal];
   [btnEditLogin setTitle:@"Edit Login" forState:UIControlStateNormal];
   [btnEditLogin setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];
   btnEditLogin.titleLabel.font = [UIFont fontWithName:@"Helvetica-Bold" size:12.0f];
   [btnEditLogin.layer setCornerRadius:5.0f];
   [btnEditLogin.layer setMasksToBounds:YES];
   [btnEditLogin.layer setBorderWidth:1.0f];
   [btnEditLogin.layer setBorderColor: [[UIColor brownColor] CGColor]];
   btnEditLogin.frame=CGRectMake(0.0, 100.0, 90.0, 30.0);
   [btnEditLogin addTarget:self action:@selector(LoginBtn) forControlEvents:UIControlEventTouchUpInside];
   UIBarButtonItem *editLoginItem = [[UIBarButtonItem alloc] initWithCustomView:btnEditLogin]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T18:10:11.680

您可以只使用 NavigationItem 的 titleView 属性来做您需要做的事情。您可以执行以下操作：

```
UILabel *myLabel = [... enter all the code you want to customize the text, etc here];
self.navigationcontroller.navigationitem.titleView = myLabel; 
```

你应该完成......除非我误解了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-09T09:47:58.777

使用此代码更改工具栏文本颜色。

```
UIBarButtonItem *barButtonAppearance = [UIBarButtonItem appearance];
[barButtonAppearance setTintColor:[UIColor redColor]]; 
```

# sql - SQL 查询检索值或全部捕获

> ID：11674599
> 
> 赞同：1
> 
> 时间：2012-07-26T17:18:35.057
> 
> 标签：sql, sql-server, tsql

我正在处理以下形式的表格：

```
 A        B
  ------   -----------
   1       value1
   2       value2
   3       value3
  -1       value4 
```

在此表中`-1`，如果列中没有其他匹配项，则该值表示全部捕获`A`。这意味着，查询`A = 2`应该返回一条记录，其`value2`值为 B 列的值。如果查询表，比如说 ，`A = 6`那么 B 的值应该是`value4`（因为它是与全部捕获关联的值）。

实现这一目标的“最佳”查询是什么？有更好的解决方案吗？如果有帮助，我在[SQLFiddle](http://sqlfiddle.com/#!3/35d1e/8)编写了一个小型设置示例。

数据库是 SQL Server。

你能帮我吗？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T17:23:59.693

```
select top (1) A, B
from (
  select A, B, 0 as priority from t where A = @value
  union
  select A, B, 1             from t where A = -1
) foo
order by priority 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T17:25:20.573

```
DECLARE @param int
SET @param = 6

SELECT * 
FROM test
WHERE a = @param OR (
    a = -1 AND @param NOT IN (SELECT a FROM test)
) 
```

替换`@param = 6`为`@param = 2`再次测试

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T17:28:32.823

在 MySQL 中，这将是微不足道的：

```
SELECT b FROM test WHERE a = @var or a = -1 ORDER BY a DESC LIMIT 1; 
```

但是，MSSQL 没有内置这样的技巧——您需要添加一个存储过程来正确限制它。

**编辑** 似乎在 2005 年，他们添加了一些分页功能：

```
SELECT TOP 1 b FROM test WHERE a = @var or a = -1 ORDER BY a DESC; 
```

应该管用。

尽管如此，这听起来像是一个糟糕的设计问题。我会查看需要这个的应用程序，看看是否没有更简洁的方法来实现默认值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-26T18:10:21.470

这是我编写查询的方式：

```
SELECT TOP 1 B 
  FROM mytable
 WHERE A IN (2,-1)
 ORDER BY CASE WHEN A = -1 THEN 1 ELSE 0 END, B; 
```

该语句的硬编码搜索参数为“2”（如您的示例中所示）。

显然，您可以用您的搜索参数代替硬编码的“2”。

* * *

子句中的 CASE 表达式`ORDER BY`确保 -1 的“全部捕获”值是“最后的手段”，-1 将是列表中的最后一个值，任何其他任何值都将出现在排序中的 -1 之前.

```
 A  expr
--  ---- 
-2     0
-1     1 
 0     0
 1     0
 2     0 
```

所以，当我`ORDER BY expr`保证 -1 的值将是列表中的最后一个时。结果集排序后，`TOP 1`将返回不超过 1 行。因此，只有在没有找到其他匹配值时才会返回与 -1 “catch all” 值关联的值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T17:25:25.053

```
if exists(select * from YourTable WHERE A=6)
  select * from YourTable WHERE A=6
else
  select * from YourTable WHERE A<0 
```

# grails - GORM Criteria Query：查找具有特定属性的子项

> ID：11674600
> 
> 赞同：1
> 
> 时间：2012-07-26T17:18:37.583
> 
> 标签：grails, grails-orm, criteria

具有以下域模式：

```
class TransactionHeader {
  static hasMany = [details: TransactionDetail]
}

class TransactionDetail {
   static belongsTo = [header: TransactionHeader]
   Product product
} 
```

我正在尝试编写一个条件查询，该查询将返回包含 TransactionDetails 和 2 个不同产品的所有 TransactionHeader 行。这就是我到目前为止所拥有的，它并没有完全符合我的要求：

```
def list = TransactionHeader.withCriteria {
    details {
      and {
        eq("product", product1)
        eq("product", product2)
      }
    }
} 
```

发生的事情是返回的行至少包含 1 个产品的 1 个详细信息。我需要有 2 个详细信息的行，每个都有一个产品。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T17:55:59.227

感觉就像你想从中删除细节，所以实际上

```
def list = TransactionHeader.withCriteria {
    and {
       details {
          eq("product", product1)
       }
       details {
          eq("product", product2)
       }
    }
} 
```

不过，不确定 hibernate / gorm 将如何处理这个问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-07T18:12:15.443

您是否尝试过在您的标准 dsl 中使用“in”语句？

```
def list = TransactionHeader.withCriteria {
    and {
       details {
          'in'("product", [product1, product2])
       }
    }
} 
```

# rack-pow - Pow 在本地工作，但在 xip.io 上为其他站点提供服务

> ID：11674602
> 
> 赞同：0
> 
> 时间：2012-07-26T17:18:44.190
> 
> 标签：rack-pow

我将 Pow.cx 用于本地开发服务器 - Rails、PHP 和静态。它在本地运行良好，但是当我尝试使用新的 xip.io 功能从另一台设备浏览时，我每次都会获得不同的本地主机站点。

Pow 中没有设置这个特定的错误服务站点，但我为它设置了一个较旧的虚拟主机。

换句话说：stm.dev 在我的桌面上提供正确的站点。我 iPhone 上的 stm.192.168.1.XXX.xip.io 提供了一个未在 Pow 中配置的不同站点。

网上找不到类似的问题，请问有没有人遇到过这个问题？如果重要的话，这个特定的站点是静态 html。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T19:02:34.320

到目前为止，我一直无法让 Pow 自动获取 xip.io 地址。但是，我终于让它工作到可以继续构建站点的地步。

我按照此链接[http://blogs.adobe.com/shadow/2012/06/19/shadow-xip-io-virtual-hosts-workflow-simplified/](http://blogs.adobe.com/shadow/2012/06/19/shadow-xip-io-virtual-hosts-workflow-simplified/)中的说明为该站点设置了虚拟主机别名。我相信这会将 Pow 排除在外，但至少它现在可以在我需要的其他设备上进行测试。

我很想让 Pow 像描述的那样工作，所以如果有任何关于这方面的建议，我很想听听。

# openlayers - 多边形特征标签的超链接 - openlayers

> ID：11674606
> 
> 赞同：1
> 
> 时间：2012-07-26T17:18:57.720
> 
> 标签：openlayers

我正在使用 Openlayers 来显示地图和一些矢量特征，如多边形和点。是否可以为矢量特征的标签提供超链接？有谁知道如何做到这一点？我有一张包含矢量多边形和点特征的地图。并且点要素可能属于多边形要素，如果多边形和点要素都具有 selectControl，则很难单击多边形内部的点。所以我在想如果我可以拥有多边形标签的超链接，我可以删除多边形的 selectControl 并通过单击标签而不是多边形中的任何位置来执行相同的功能。

谢谢，阿里布。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T13:04:23.577

添加超链接的一种方法是将其放在弹出 html 中，我知道这不是您想要的……也许如果您使弹出窗口锚定、不可关闭和自动调整大小，您可以更接近。

# javascript - CDN 托管脚本（如 jQuery）上的 XSS 预防

> ID：11674612
> 
> 赞同：2
> 
> 时间：2012-07-26T17:19:21.970
> 
> 标签：javascript, cdn, xss, spoofing

[已编辑：] 如果访问我的网站的客户通过 Microsoft 的 CDN 网络提供 jQuery，则他/她的 DNS 被模仿 Microsoft 的 CDN 的攻击者欺骗。在这种情况下，理论上攻击者应该能够运行任意 javascript 代码。

有什么办法可以防止这种情况发生吗？还是我应该停止热链接 CDN 服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T17:00:15.387

标准的 XSS 预防机制适用，但在这种情况下，由于它是 CDN，您可能对服务器没有太多控制权，因此您能做的最好的事情就是仅使用 SSL 上的 CDN。

也就是说，如果受害者的 DNS 已经受到攻击，他们可能还会遇到*许多*其他问题，尤其是像 Banks 这样的高价值网站，或者像 Facebook 这样更多人可能使用的大型目标网站。

# java - 在java中将带有计数的awk 2D数组转换为hashmap

> ID：11674622
> 
> 赞同：0
> 
> 时间：2012-07-26T17:19:58.390
> 
> 标签：java, awk, hashmap

我发现这个问题很有趣。我正在使用一个具有相同键、值、计数的 awk 二维数组。并且正在打印到文件中。该文件采用以下格式

```
A100|B100|3
A100|C100|2
A100|B100|5 
```

现在我有一个这样的文件.. 我的动机是将此文件转换为哈希映射，以便哈希映射的最终输出是。

```
A100|B100|8
A100|C100|2 
```

只是一个聚合

挑战在于，这个有 3 个维度而不是 2 个维度。我确实有以下格式的另一个文件

```
D100|4
H100|5
D100|6 
```

我很容易汇总上面的内容，因为它只是 2D，我使用下面的代码来做到这一点

```
String[] fields= strLine.trim().split("\\|");
if(hashmap.containsKey(fields[0]))
{
//Update the value of the key here
hashmap.put(fields[0],hashmap.get(fields[0]) + Integer.parseInt(fields[1]));
}
else
{
//Inserting the key to the map
hashmap.put(fields[0],Integer.parseInt(fields[1]));
} 
```

所以这很容易实现。

但是当涉及到 3D 时，我必须在里面进行另一次检查。我的想法是保持 [B100,5(beanObject[5])]

```
 Map<String,beanClassObject> hashmap=new Map<String,beanClassObject>(); 
```

secongField hash map 已经用在代码中，它与创建的 ben 对象下标和 key 之间的映射关系作为第二个字段 "For instance it is "

这个 bean 类将具有用于文件的第二个和第三个字段的 getter 和 setter 方法。我希望我清楚这一点。所以这个的实现将是

```
if(hashmap.containsKey(fields[0]))
{
   **//Have to check whether the the particular key value pair already exists ... I dint find any method for this ... Just a normal iteration is there .. Could you ppl guide me regarding this**

    //Update the value of the key here
     secondFieldHashMap.get(fields[1]).COunt= secondFieldHashMap.get(fields[1]).getCOunt+ Integer.parseInt(fields[2]));
   }
   else
    {
     //Inserting the key to the map
     hashmap.put(fields[0],Integer.parseInt(fields[1]));
     secondFieldHashMap.get(fields[1]).COunt=  Integer.parseInt(fields[2]));
    }
else
{

 // This meands there is no key field
 // Hence insert the key field and also update the count of seconfFieldHashMap as done previously.
 } 
```

请您对此提出一些想法。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T17:32:35.193

考虑使用Google Guava 库中提供的[表格。](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Table.html)

# php - CodeIgniter 多页

> ID：11674626
> 
> 赞同：0
> 
> 时间：2012-07-26T17:20:04.053
> 
> 标签：php, apache, codeigniter

我最近才开始深入研究 CI，并且无法访问不同的视图。我有一个家和关于视图，我的大部分代码都是标准的。我的设置是通过 vm 的 LAMP 堆栈，通过修改我的 hosts 文件以指向具有 VirtualHost 名称的 VM IP 地址来访问。

控制器代码：

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Site extends CI_Controller {

    public function index()
    {
        $this->about();
    }
    public function home()
    {
        $this->load->view('engage_header');
        $this->load->view('engage_nav');
        $this->load->view('content_home');
        $this->load->view('engage_footer');
    }
    public function about()
    {
        $this->load->view('engage_header');
        $this->load->view('engage_nav');
        $this->load->view('content_about');
        $this->load->view('engage_footer');
    }
}
?> 
```

config.php 代码：

```
<?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');

/*
|--------------------------------------------------------------------------
| Base Site URL
|--------------------------------------------------------------------------
|
| URL to your CodeIgniter root. Typically this will be your base URL,
| WITH a trailing slash:
|
|   http://example.com/
|
| If this is not set then CodeIgniter will guess the protocol, domain and
| path to your installation.
|
*/
$config['base_url'] = 'dev.code.os/Code/';

/*
|--------------------------------------------------------------------------
| Index File
|--------------------------------------------------------------------------
|
| Typically this will be your index.php file, unless you've renamed it to
| something else. If you are using mod_rewrite to remove the page set this
| variable so that it is blank.
|
*/
$config['index_page'] = '';

/*
|--------------------------------------------------------------------------
| URI PROTOCOL
|--------------------------------------------------------------------------
|
| This item determines which server global should be used to retrieve the
| URI string.  The default setting of 'AUTO' works for most servers.
| If your links do not seem to work, try one of the other delicious flavors:
|
| 'AUTO'            Default - auto detects
| 'PATH_INFO'       Uses the PATH_INFO
| 'QUERY_STRING'    Uses the QUERY_STRING
| 'REQUEST_URI'     Uses the REQUEST_URI
| 'ORIG_PATH_INFO'  Uses the ORIG_PATH_INFO
|
*/
$config['uri_protocol'] = 'AUTO';

/*
|--------------------------------------------------------------------------
| URL suffix
|--------------------------------------------------------------------------
|
| This option allows you to add a suffix to all URLs generated by CodeIgniter.
| For more information please see the user guide:
|
| http://codeigniter.com/user_guide/general/urls.html
*/

$config['url_suffix'] = '';

/*
|--------------------------------------------------------------------------
| Default Language
|--------------------------------------------------------------------------
|
| This determines which set of language files should be used. Make sure
| there is an available translation if you intend to use something other
| than english.
|
*/
$config['language'] = 'english';

/*
|--------------------------------------------------------------------------
| Default Character Set
|--------------------------------------------------------------------------
|
| This determines which character set is used by default in various methods
| that require a character set to be provided.
|
*/
$config['charset'] = 'UTF-8';

/*
|--------------------------------------------------------------------------
| Enable/Disable System Hooks
|--------------------------------------------------------------------------
|
| If you would like to use the 'hooks' feature you must enable it by
| setting this variable to TRUE (boolean).  See the user guide for details.
|
*/
$config['enable_hooks'] = FALSE;

/*
|--------------------------------------------------------------------------
| Class Extension Prefix
|--------------------------------------------------------------------------
|
| This item allows you to set the filename/classname prefix when extending
| native libraries.  For more information please see the user guide:
|
| http://codeigniter.com/user_guide/general/core_classes.html
| http://codeigniter.com/user_guide/general/creating_libraries.html
|
*/
$config['subclass_prefix'] = 'MY_';

/*
|--------------------------------------------------------------------------
| Allowed URL Characters
|--------------------------------------------------------------------------
|
| This lets you specify with a regular expression which characters are permitted
| within your URLs.  When someone tries to submit a URL with disallowed
| characters they will get a warning message.
|
| As a security measure you are STRONGLY encouraged to restrict URLs to
| as few characters as possible.  By default only these are allowed: a-z 0-9~%.:_-
|
| Leave blank to allow all characters -- but only if you are insane.
|
| DO NOT CHANGE THIS UNLESS YOU FULLY UNDERSTAND THE REPERCUSSIONS!!
|
*/
$config['permitted_uri_chars'] = 'a-z 0-9~%.:_\-';

/*
|--------------------------------------------------------------------------
| Enable Query Strings
|--------------------------------------------------------------------------
|
| By default CodeIgniter uses search-engine friendly segment based URLs:
| example.com/who/what/where/
|
| By default CodeIgniter enables access to the $_GET array.  If for some
| reason you would like to disable it, set 'allow_get_array' to FALSE.
|
| You can optionally enable standard query string based URLs:
| example.com?who=me&what=something&where=here
|
| Options are: TRUE or FALSE (boolean)
|
| The other items let you set the query string 'words' that will
| invoke your controllers and its functions:
| example.com/index.php?c=controller&m=function
|
| Please note that some of the helpers won't work as expected when
| this feature is enabled, since CodeIgniter is designed primarily to
| use segment based URLs.
|
*/
$config['allow_get_array']      = TRUE;
$config['enable_query_strings'] = FALSE;
$config['controller_trigger']   = 'c';
$config['function_trigger']     = 'm';
$config['directory_trigger']    = 'd'; // experimental not currently in use

/*
|--------------------------------------------------------------------------
| Error Logging Threshold
|--------------------------------------------------------------------------
|
| If you have enabled error logging, you can set an error threshold to
| determine what gets logged. Threshold options are:
| You can enable error logging by setting a threshold over zero. The
| threshold determines what gets logged. Threshold options are:
|
|   0 = Disables logging, Error logging TURNED OFF
|   1 = Error Messages (including PHP errors)
|   2 = Debug Messages
|   3 = Informational Messages
|   4 = All Messages
|
| For a live site you'll usually only enable Errors (1) to be logged otherwise
| your log files will fill up very fast.
|
*/
$config['log_threshold'] = 0;

/*
|--------------------------------------------------------------------------
| Error Logging Directory Path
|--------------------------------------------------------------------------
|
| Leave this BLANK unless you would like to set something other than the default
| application/logs/ folder. Use a full server path with trailing slash.
|
*/
$config['log_path'] = '';

/*
|--------------------------------------------------------------------------
| Date Format for Logs
|--------------------------------------------------------------------------
|
| Each item that is logged has an associated date. You can use PHP date
| codes to set your own date formatting
|
*/
$config['log_date_format'] = 'Y-m-d H:i:s';

/*
|--------------------------------------------------------------------------
| Cache Directory Path
|--------------------------------------------------------------------------
|
| Leave this BLANK unless you would like to set something other than the default
| system/cache/ folder.  Use a full server path with trailing slash.
|
*/
$config['cache_path'] = '';

/*
|--------------------------------------------------------------------------
| Encryption Key
|--------------------------------------------------------------------------
|
| If you use the Encryption class or the Session class you
| MUST set an encryption key.  See the user guide for info.
|
*/
$config['encryption_key'] = '';

/*
|--------------------------------------------------------------------------
| Session Variables
|--------------------------------------------------------------------------
|
| 'sess_cookie_name'        = the name you want for the cookie
| 'sess_expiration'         = the number of SECONDS you want the session to last.
|   by default sessions last 7200 seconds (two hours).  Set to zero for no expiration.
| 'sess_expire_on_close'    = Whether to cause the session to expire automatically
|   when the browser window is closed
| 'sess_encrypt_cookie'     = Whether to encrypt the cookie
| 'sess_use_database'       = Whether to save the session data to a database
| 'sess_table_name'         = The name of the session database table
| 'sess_match_ip'           = Whether to match the user's IP address when reading the session data
| 'sess_match_useragent'    = Whether to match the User Agent when reading the session data
| 'sess_time_to_update'     = how many seconds between CI refreshing Session Information
|
*/
$config['sess_cookie_name']     = 'ci_session';
$config['sess_expiration']      = 7200;
$config['sess_expire_on_close'] = FALSE;
$config['sess_encrypt_cookie']  = FALSE;
$config['sess_use_database']    = FALSE;
$config['sess_table_name']      = 'ci_sessions';
$config['sess_match_ip']        = FALSE;
$config['sess_match_useragent'] = TRUE;
$config['sess_time_to_update']  = 300;

/*
|--------------------------------------------------------------------------
| Cookie Related Variables
|--------------------------------------------------------------------------
|
| 'cookie_prefix' = Set a prefix if you need to avoid collisions
| 'cookie_domain' = Set to .your-domain.com for site-wide cookies
| 'cookie_path'   =  Typically will be a forward slash
| 'cookie_secure' =  Cookies will only be set if a secure HTTPS connection exists.
|
*/
$config['cookie_prefix']    = "";
$config['cookie_domain']    = "";
$config['cookie_path']      = "/";
$config['cookie_secure']    = FALSE;

/*
|--------------------------------------------------------------------------
| Global XSS Filtering
|--------------------------------------------------------------------------
|
| Determines whether the XSS filter is always active when GET, POST or
| COOKIE data is encountered
|
*/
$config['global_xss_filtering'] = FALSE;

/*
|--------------------------------------------------------------------------
| Cross Site Request Forgery
|--------------------------------------------------------------------------
| Enables a CSRF cookie token to be set. When set to TRUE, token will be
| checked on a submitted form. If you are accepting user data, it is strongly
| recommended CSRF protection be enabled.
|
| 'csrf_token_name' = The token name
| 'csrf_cookie_name' = The cookie name
| 'csrf_expire' = The number in seconds the token should expire.
*/
$config['csrf_protection'] = FALSE;
$config['csrf_token_name'] = 'csrf_test_name';
$config['csrf_cookie_name'] = 'csrf_cookie_name';
$config['csrf_expire'] = 7200;

/*
|--------------------------------------------------------------------------
| Output Compression
|--------------------------------------------------------------------------
|
| Enables Gzip output compression for faster page loads.  When enabled,
| the output class will test whether your server supports Gzip.
| Even if it does, however, not all browsers support compression
| so enable only if you are reasonably sure your visitors can handle it.
|
| VERY IMPORTANT:  If you are getting a blank page when compression is enabled it
| means you are prematurely outputting something to your browser. It could
| even be a line of whitespace at the end of one of your scripts.  For
| compression to work, nothing can be sent before the output buffer is called
| by the output class.  Do not 'echo' any values with compression enabled.
|
*/
$config['compress_output'] = FALSE;

/*
|--------------------------------------------------------------------------
| Master Time Reference
|--------------------------------------------------------------------------
|
| Options are 'local' or 'gmt'.  This pref tells the system whether to use
| your server's local time as the master 'now' reference, or convert it to
| GMT.  See the 'date helper' page of the user guide for information
| regarding date handling.
|
*/
$config['time_reference'] = 'local';

/*
|--------------------------------------------------------------------------
| Rewrite PHP Short Tags
|--------------------------------------------------------------------------
|
| If your PHP installation does not have short tag support enabled CI
| can rewrite the tags on-the-fly, enabling you to utilize that syntax
| in your view files.  Options are TRUE or FALSE (boolean)
|
*/
$config['rewrite_short_tags'] = FALSE;

/*
|--------------------------------------------------------------------------
| Reverse Proxy IPs
|--------------------------------------------------------------------------
|
| If your server is behind a reverse proxy, you must whitelist the proxy IP
| addresses from which CodeIgniter should trust the HTTP_X_FORWARDED_FOR
| header in order to properly identify the visitor's IP address.
| Comma-delimited, e.g. '10.0.1.200,10.0.1.201'
|
*/
$config['proxy_ips'] = '';

/* End of file config.php */
/* Location: ./application/config/config.php */ 
```

我的 config.php 在我的虚拟主机配置中有 baseurl dev.code.os “Servername”。我试图通过 dev.code.os/index.php/about 访问 about 页面，但我不断收到 500 内部错误。我删除了我的 .htaccess 文件，但我仍然不断收到这个错误，我对如何让它工作感到困惑。除非我将要查看的页面加载到索引中，否则我似乎无法访问该视图。任何帮助将非常感激。

这是我的旧 .htaccess 代码：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /Code/

RewriteCond %{REQUEST_URI} ^system.*
RewriteRule ^(.*)$ /index.php?/$1 [L]

RewriteCond %{REQUEST_URI} ^application.*
RewriteRule ^(.*)$ /index.php?/$1 [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?/$1 [L]
</IfModule> 
```

我想要的只是能够从 dev.code.os/index.php/about 访问其他视图，我可以稍后取出 index.php。我只需要知道我做错了什么而无法访问其他视图以及它们为什么显示 404 和 500 错误。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T02:45:47.300

只是为了给这个答案，检查你的 url`site/`以便控制器实际被调用。

# javascript - 如何在我的服务器上创建使用该服务器后端并将在另一个网站上使用的 javascript？

> ID：11674631
> 
> 赞同：1
> 
> 时间：2012-07-26T17:20:27.197
> 
> 标签：javascript, google-app-engine, xss

我需要提供一种网络服务，我的客户可以通过 AJAX 在他们的网站上使用它。由于 XSS 防护，他们无法调用我的 Web 服务。客户端无法制作代理来访问我的 Web 服务。

我正在尝试在我的服务器上创建一个 JavaScript 库，他们可以将其包含在他们的网站中，这反过来又会调用服务器上的 Web 服务。不知何故，它似​​乎不起作用。

服务器位于 Google App Engine。

所以问题是：如何在我的服务器上创建一个使用该服务器后端的 javascript 库，并且远程用户可以使用它？很像 google maps js API 的工作原理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T17:27:21.717

您应该改用[跨域资源共享](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)，只需为您的 Web 服务设置 CORS http 标头。

```
Access-Control-Allow-Origin: http://clientsite.com http://client.website.com 
```

同源策略依赖于文档来源，因此提供 JavaScript 库将无济于事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T21:30:48.320

两种可能：

*   让您的 javascript 库创建一个指向您的服务器的 iframe。通过适用于您所使用浏览器的最佳跨页通信，在该 iframe 中运行的代码与第 3 方站点之间进行通信。Google 的 Closure 库有一个名为[CrossPageChannel](http://code.google.com/p/closure-library/source/browse/trunk/closure/goog/net/xpc/crosspagechannel.js?r=1024)的类，可以很好地解决这个问题。将大部分逻辑放在 iframe 中。这可能很好，因为它会阻止第 3 方站点执行您通过 iframe 边界传递的消息未明确定义的任何事情。

*   使用[JSONP](http://en.wikipedia.org/wiki/JSONP)从您的服务器获取数据并将所有逻辑保留在 javascript 库中。

# mysql - JOIN 两个表，同时按索引分组并匹配多个外部 id

> ID：11674636
> 
> 赞同：0
> 
> 时间：2012-07-26T17:20:43.640
> 
> 标签：mysql, join, group-by

我有以下 3 个表格：

对象：

```
ObjectID ObjectDescription
1        "first"
2        "second" 
```

属性：

```
AttributeID AttributeDescription
1           "att1"
2           "att2"
3           "att3"
4           "att4" 
```

属性链接：

```
AttributeID ObjectID
1           1
2           1
4           1 
```

现在我的问题：我现在想选择一些属性并想知道哪个对象具有我所有选择的属性。我尝试了以下方法：

```
SELECT * FROM `objects` 
    INNER JOIN `attributelink` 
         ON `objects`.`ObjectID` = `attributelink`.`ObjectID`
    WHERE `attributelink`.`AttributeID` =1 AND `attributelink`.`AttributeID` =2  
GROUP BY `objects`.`ObjectID` 
```

这显然行不通，因为一行不能有 2 个 AttributeID，但我该如何归档呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T17:23:39.757

`attributelink`对于要检查的每个选定属性，您必须在表上加入一次：

```
SELECT o.ObjectID
FROM objects o
INNER JOIN attributelink a1 ON o.ObjectID = a1.ObjectID AND a1.AttributeID = 1
INNER JOIN attributelink a2 ON o.ObjectID = a2.ObjectID AND a2.AttributeID = 2
GROUP BY o.ObjectID 
```

您的测试数据并没有显示很多关于它是否有效，但是 FWIW，[这里是 sqlfiddle](http://sqlfiddle.com/#!3/77dcb/1)。

* * *

另一种方法是使用`COUNT DISTINCT`and `HAVING`( `GROUP BY`sqlfiddle [)](http://sqlfiddle.com/#!3/77dcb/2)：

```
SELECT o.ObjectID
FROM objects o
INNER JOIN attributelink a ON o.ObjectID = a.ObjectID
WHERE a.AttributeID IN (1,2) --here you filter the rows on the attributes to test
GROUP BY o.ObjectID
HAVING COUNT(DISTINCT(a.AttributeID)) = 2 --# of attributes, means "having ALL" 
```

# r - 在 y 轴上绘制百分比

> ID：11674637
> 
> 赞同：19
> 
> 时间：2012-07-26T17:20:44.900
> 
> 标签：r, plot

我正在使用这个绘制图表

```
plot(dates,returns) 
```

我想`returns`用百分比而不是数字表示。`0.1`会变成`10%`. 此外，y 轴上的数字向左倾斜 90 度。是否可以使它们水平显示？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-26T17:55:16.893

这是一种`las=TRUE`用于转动 y 轴上的`axis()`标签和调整标签的新 y 轴的方法。

```
dates <-  1:10
returns <- runif(10)

plot(dates, returns, yaxt="n")
axis(2, at=pretty(returns), lab=pretty(returns) * 100, las=TRUE) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-11-12T23:30:15.180

如果你使用 ggplot 你可以使用[scales](https://cran.r-project.org/web/packages/scales/scales.pdf)包。

```
library(scales)
plot + scale_y_continuous(labels = percent) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-22T22:21:41.797

```
library(scales)
dates <-  1:100
returns <- runif(100)
yticks_val <- pretty_breaks(n=5)(returns)
plot(dates, returns, yaxt="n")
axis(2, at=yticks_val, lab=percent(yticks_val)) 
```

强调：

1.  无需显式添加“%”
2.  手动修复 y 刻度的数量以与进一步的绘图保持一致。这里我选择了 5。

[![看](../Images/ce4dea0f54d11a81c76b7c1654f9fb87.png)](https://i.stack.imgur.com/4VrXf.png)

将两个答案结合在一起@rengis @vladiim

# android - 构建ndk库时出错

> ID：11674640
> 
> 赞同：4
> 
> 时间：2012-07-26T17:21:05.803
> 
> 标签：android, eclipse, android-ndk, cygwin

我有一个带有原生部分的 android 项目。现在我试图让 eclipse 编译所有东西，但是在本机编译期间它给了我这个错误：

```
sh ndk-build all 
ERROR: You are using a non-Cygwin compatible Make program.
Currently using: C:/cygwin/bin/make

To solve the issue, follow these steps:

1\. Ensure that the Cygwin 'make' package is installed.
   NOTE: You will need GNU Make 3.81 or later!

2\. Define the GNUMAKE environment variable to point to it, as in:

     export GNUMAKE=/usr/bin/make

3\. Call 'ndk-build' again. 
```

现在我可以从 Cygwin 编译它并且它可以工作。它也可以在我的另一台计算机上以完全相同的路径从 eclipse 中运行。

我发现如果我`ndk-build`从 cygwin 启动它没问题，但如果我启动“sh ndk-build”它会给我 Eclipse 的错误。

我认为这是问题所在，但我不知道为什么在命令前面加上`sh`它不起作用（也用 bash 前面加上它会给我错误）。

有人可以帮忙吗？

先感谢您。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-31T15:10:10.290

问题已解决，在 Eclipse 首选项中未正确设置 ndk 路径。（在 Eclipse Window->preferences->Android->NDK->NDK_Location 中）

# desire2learn - 在 Desire2Learn 10.0 中发布新论坛帖子时出现 404 错误

> ID：11674645
> 
> 赞同：1
> 
> 时间：2012-07-26T17:21:20.670
> 
> 标签：desire2learn

我正在使用 D2L API，并且在处理一些 POST 请求时遇到了困难。

使用 JSON 对象进行版本检查 (POST)：

```
[{ "ProductCode": "lp", "Version": "1.0" }] 
```

返回正确，为我提供了一个有效的 JSON 对象作为响应，据说我确信我发出调用的代码工作正常。

但是，当我发布 POST 以在论坛中创建帖子时，我收到 404 作为响应。我为此调用发送的 JSON 对象是：

```
[
 {
 "ParentPostId": null,
 "Subject": "API Posted",
 "Message": {
   "Text": "This message has been posted by the API",
   "HTML": "This message has been posted by the API"
   },
 "IsAnonymous": false
 }
] 
```

提交的网址是`/d2l/api/le/{ver}/{orgId}/discussions/forums/{forumId}/topics/{topicId}/posts/`

我已经验证了 ver/orgId/forumId/topicId 在同一论坛和主题中使用帖子的 GET 都是有效的。我也尝试过分别引用和统一引用 ParentPostId 和 IsAnonymous 的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T18:25:19.863

[在http://docs.valence.desire2learn.com/res/discuss.html#post--d2l-api-le-(D2LVERSION-version)-(D2LID-orgUnitId)-discussions-forums](http://docs.valence.desire2learn.com/res/discuss.html#post--d2l-api-le-(D2LVERSION-version)-(D2LID-orgUnitId)-discussions-forums-(D2LID-forumId)-topics-(D2LID-topicId)-posts-)查看该路线的文档[-(D2LID-forumId)-topics-(D2LID-topicId)-posts-](http://docs.valence.desire2learn.com/res/discuss.html#post--d2l-api-le-(D2LVERSION-version)-(D2LID-orgUnitId)-discussions-forums-(D2LID-forumId)-topics-(D2LID-topicId)-posts-)，看起来所需的数据结构使用 a`RichTextInput`而不是`RichText`for `Message`。

尝试将您的`Message`字段更改为：

```
{
   "Content": "This message has been posted by the API",
   "Type": "Text"
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T20:49:00.393

尝试从 JSON 中删除方括号。

成功请求和响应的示例如下：

```
REQUEST  

POST https://valence.desire2learn.com/d2l/api/le/1.0/7664/discussions/forums/203/topics/508/posts/?x_b=TwULqrltMXvTE8utuLCN5O&x_a=L2Hd9WvDTcyiyu5n2AEgpg&x_d=nF61tBeuzd0EPTW7nm8iGc4MB7NeJZaNM2VlzHp0bwU&x_c=I3i_k2aANTIf2X6aFsiOdvlElSR_avvOYnA2ibcWabA&x_t=1343335429 HTTP/1.1
Accept-Encoding: gzip,deflate
Accept: application/json
Content-Type: application/json

 { "ParentPostId": null, "Subject": "API Posted", "Message": { "Content": "This message has been posted by the API", "Type": "HTML" }, "IsAnonymous": false } 

RESPONSE

HTTP/1.1 200 OK
Cache-Control: no-cache, no-store
Pragma: no-cache
Content-Length: 369
Content-Type: application/json; charset=UTF-8
Expires: -1
Server: Microsoft-IIS/6.0
X-Powered-By: ASP.NET
X-AspNet-Version: 2.0.50727
Date: Thu, 26 Jul 2012 20:43:58 GMT

{"ForumId":203,"PostId":574,"TopicId":508,"PostingUserId":3667,"ThreadId":205,"ParentPostId":null,"Message":{"Text":"","Html":"This message has been posted by the API"},"Subject":"API Posted","DatePosted":"2012-07-26T20:43:58.920Z","IsAnonymous":false,"RequiresApproval":false,"IsDeleted":false,"LastEditDate":null,"LastEditedBy":null,"CanRate":false,"ReplyPostIds":[]} 
```

# jquery - 使用 Select2 的 createSearchChoice 函数

> ID：11674647
> 
> 赞同：22
> 
> 时间：2012-07-26T17:21:28.610
> 
> 标签：jquery, jquery-select2

我正在尝试使用 createSearchChoice 函数来允许用户在默认列表不够用时输入他们自己的选择。当我尝试在`<select>`元素上使用此函数时，我收到以下错误：

`Error: Error: Option 'createSearchChoice' is not allowed for Select2 when attached to a <select> element.`

我尝试使用一个`<input type='hidden'>`元素，但现在收到以下错误：

`Error: uncaught exception: query function not defined for Select2 'MyInputName'`

我更喜欢使用 select 元素来与现有代码保持一致（需要能够选择多个选项），但除了从先前的列表中进行选择之外，还需要用户输入自己的选项的能力。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-29T07:40:01.610

天哪，我如何取消这个赏金。我惊慌失措，由于惊慌，我能够回答我们都在寻找的东西：

您不能`createSearchChoice`在`select`. 所以你必须使用一个`input`代替。

```
<input type="hidden" id="category"> 
```

解决方法是使用`query`参数：

```
$("#category").select2({query:function(query){
  var data = {results: []};
  data.results.push({text: query.term});
  query.callback(data);
}}); 
```

如果它不存在，它的作用是将当前术语添加到选项中。您可以像这样填充`results`对象：

```
var data = {results: [{text:'math'},{text:'science'}]}; 
```

这解决了我的问题，所以我希望它解决了你的问题。我认为我们应该阅读更多关于[文档](http://ivaynberg.github.com/select2/index.html#documentation)的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T17:43:27.940

我遇到了这个问题，这是由于在同一字段上调用 ​​select2 两次

# php - 将数据保存在表格上

> ID：11674648
> 
> 赞同：0
> 
> 时间：2012-07-26T17:21:31.967
> 
> 标签：php, validation, user-registration

我有一个注册表单，它是在没有刷新页面的情况下发布数据！我的问题表格重置数据。它适用于用户名并保留用户的输入。我也尝试为“性别”做同样的事情，但如果我出错，“性别选择也会被重置。我无法保留它。

任何人都可以帮助我吗？

我的代码如下：

```
/* Current Page */
    public function currentPage() {
        /* Current Page */
        $currentPage  = 'http';
        if(isset($_SERVER["HTTPS"]) == "on") {$currentPage .= "s";}
        $currentPage .= "://";
        $currentPage .= $_SERVER["SERVER_NAME"] . $_SERVER["REQUEST_URI"];
        return $currentPage;
    }

    /* Register */
    public function register() {
    global $database;

    /* Set Message Array */
    $message = array();

    /* Check if Login is set */
    if(isset($_POST['register'])) {

    /* Check Username */
    if(!empty($_POST['username'])) {

    $check_username = strtolower($_POST['username']);

    /* Check the username length */
    $length = strlen($check_username);
    if($length >= 5 && $length <= 25) {

    /* Is the username Alphanumeric? */
    if(preg_match('/[^a-zA-Z0-9_]/', $check_username)) {
    $error[] = "Please enter a valid alphanumeric username";
    $username = null;
    } else {
    $database->query('SELECT id FROM users WHERE username = :username', array(':username' => $check_username));

    /* Check if user exist in database */
    if($database->count() == 0) {

    /* Require use to validate account */
    if($this->email_verification == true) {

    /* Check if user exist in inactive database */
    $database->query('SELECT date FROM users_inactive WHERE username = :username', array(':username' => $check_username));

    /* If user incative is older than 24 hours */

    $user = $database->statement->fetch(PDO::FETCH_OBJ);
    if($database->count() == 0 or time() >= strtotime($user->date) + 86400) {

    /* If user incative is older than 24 hours */
    $username = $_POST['username'];
    } else {
    $error[] = "Username already in use";
    $username = $check_username;
    }
    } else {
    $username = $_POST['username'];
    }
    } else {
    $error[] = "Username already in use";
    $username = $check_username;
    }
    }
    } else {
    $error[] = "Please enter a username between 5 to 25 characters";
    $username = $check_username;
    }
    } else {
    $error[] = "Please enter a username";
    $username = null;
    }

    /* Check Password */
    if(!empty($_POST['password'])) {

    /* Do passwords match? */

    if(isset($_POST['password_again']) && $_POST['password_again'] == $_POST['password']) {

    /* Is the password long enough? */
    $length = strlen($_POST['password']);
    if($length >= 8) {
    $password = $_POST['password'];
    } else {
    $error[] = "Passwords must be atleast than 8 characters";
    }
    } else {
    $error[] = "Passwords must match";
    }
    } else {
    $error[] = "Please enter a password";
    }

    /* Check Gender */
    if(empty($_POST['gender'])) {
    $error[] = "Please choose your gender";
    }else{

    $gender = $_POST['gender'];

                }

    $form = '
    <form name="register" action="' . $this->currentPage() . '" method="post">
    <label><span>Username</span>
    <input type="text" name="username" value="' . $username . '" />
    </label>

    <label><span>Password</span>
    <input type="password" name="password" />
    </label>

    <label><span>Password Again</span>
    <input type="password" name="password_again" />
    </label>

    <label><span>Gender:</span>
    <select name="gender" value="' . $gender . '">
    <option value="">Choose</option>
    <option value="Male">Male</option>
    <option value="Female">Female</option>

    <input name="register" type="submit" value="Register" />
    </form>
            ';
            /* Combine Data */
            $data = "";
            /* Report any Info */
            if(isset($info)) {
                foreach($info as $message) {
                $data .= '<div class="notice info">' . $message . '</div>';
                }
            }
            /* Report any Errors */
            if(isset($error)) {
                foreach($error as $message) {
                $data .= '<div class="notice error">' . $message . '</div>';
                }
            }
            /* Report any Success */
            if(isset($success)) {
                foreach($success as $message) {
                $data .= '<div class="notice success">' . $message . '</div>';
                }
            }

            /* Return data */
            return $data;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T17:40:04.407

关于您的“性别”价值问题 - 您需要更改此代码

```
<select name="gender" value="' . $gender . '">
    <option value="">Choose</option>
    <option value="Male">Male</option>
    <option value="Female">Female</option> 
```

至

```
<select name="gender">
    <option value="" ' .($gender == '' ? 'selected="selected"' : '') . '>Choose</option>
    <option value="Male" ' .($gender == 'male' ? 'selected="selected"' : '') . '>Male</option>
    <option value="Female" ' .($gender == 'female' ? 'selected="selected"' : '') . '>Female</option> 
```

您正在尝试设置一个无效`value`的`select`标记。

# git - 使用 jgit 获取 git svn

> ID：11674649
> 
> 赞同：2
> 
> 时间：2012-07-26T17:21:47.533
> 
> 标签：git, git-svn, jgit

我使用 jGit 在我的项目中自动化我与 git 的交互。有一个对应的 API，`git fetch`但我需要在这里执行，但在 jGit 项目[javadoc](http://jgit.info/javadoc/)`git svn fetch`中找不到任何关于 svn 的信息。

所以恐怕这是不可能的，但也许有一个技巧可以做到这一点，知道怎么做吗？

我的替代方法是调用 shell 命令`git svn fetch`，但它比使用 jGit 干净得多，所以我想避免它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T19:26:58.783

JGit 不支持某些功能，其中包括 SVN 集成。我怀疑 JGit 是否会支持 SVN 集成，原因有几个（缺少所需的 SVN API、许可政策等）。

作为一种解决方法，如果您有权访问 Subversion 存储库，则可以将[SubGit](http://subgit.com)安装到您的 SVN 存储库中（它将为其创建一个 Git 界面）并使用创建的 Git 界面重用您的通用工作流程。

另请参阅[JGit/EGit 与 Git 差异](http://wiki.eclipse.org/EGit/Differences_to_Git)的完整列表以及相关的[错误条目](https://bugs.eclipse.org/bugs/show_bug.cgi?id=315264)。

# php - 从 PHP 设置 HTTP 用户名/密码

> ID：11674652
> 
> 赞同：1
> 
> 时间：2012-07-26T17:21:56.947
> 
> 标签：php, apache, http, permissions

我有一个无法使用直接链接下载文件的设置，除非使用 HTTP 身份验证提供用户名/密码。

我想创建一个链接到下载的页面，访问该页面时会设置 HTTP 用户名和密码，因此用户永远不会看到 HTTP 身份验证框。（但是，如果他们尝试直接下载文件，则不能。）

`$_SERVER['PHP_AUTH_USER']`并`$_SERVER['PHP_AUTH_PW']`提供一种读取但不设置这些值的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T17:30:56.200

您可以通过在 URL 中放置用户名和密码来访问 HTTP-auth 链接：

```
http://username:password@archive.example.com/path/to/file.zip 
```

请注意，可能并非所有浏览器都支持此表示法，或者对它的支持可能是用户可在浏览器中配置的。您需要在对您很重要的平台上对此进行测试。

请注意，您的问题很可能有更好的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T18:44:06.297

这是一个坏主意！身份验证是为了*确保您是您所说的那个人*。相反，您使用它作为一种方法来控制对给定资源的访问。

如果您想强制某人通过网关页面，请生成随机查询字符串，并在匹配时`header()`用于设置 HTTP 元数据和`fpassthru()`/或`sendfile()`发送内容。

# java - 如何从字符串中提取浮点数值数据

> ID：11674655
> 
> 赞同：0
> 
> 时间：2012-07-26T17:22:12.347
> 
> 标签：java, json

大家好，我正在使用 Google Currency Api 请求货币转换信息。例如我使用[Google Currency Api](http://www.google.com/ig/calculator?hl=en&q=1USD=?GBP)

将 1 美元兑换成我的当地货币。返回的字符串是 {lhs: "1 US Dollar",rhs: "2 481.38958 Ugandan shillings",error: "",icc: true} 我需要 java 代码来提取 2481.38958 浮点数据类型并将其保存在浮点变量中。请帮忙。非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T17:34:54.963

对于您的输入 JSON 字符串：

```
{lhs: "1 U.S. dollar",rhs: "2481.38958 Ugandan shillings",error: "",icc: true} 
```

使用[http://json-lib.sourceforge.net/](http://json-lib.sourceforge.net/)：

```
 JSONObject json = (JSONObject) JSONSerializer.toJSON( jsonTxt );        
    String dollarString = json.getFloat( "rhs" );
    float dollars = Float.parseFloat(dollarString.split(" ")[0]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T17:33:54.077

此字符串为 JSON 格式。有一些库可以将其作为对象进行操作。示例：GSON ( [http://code.google.com/p/google-gson/](http://code.google.com/p/google-gson/) ) 或[http://www.json.org/java/](http://www.json.org/java/)

类似于：new JSONObject("{lhs:"1 美元",rhs:"2 481.38958 乌干达先令",error:"",icc:true}").get("rhs")

在你必须压制单位之后，也许使用正则表达式。最后... Float.parseFloat("2 481.38958")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T17:35:55.167

考虑值总是介于`rhs:`和一个词之间。

```
String str = "{lhs: \"1 U.S. dollar\",rhs: \"2 481.38958 Ugandan shillings\",error: \"\",icc: true}";
Matcher m = Pattern.compile("rhs:\\s.*?([\\d\\s\\.]+)\\s\\w+").matcher(str);
m.find();
float value = Float.parseFloat(m.group(1).replaceAll("[^\\d\\.]", ""));
System.out.println(value); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T17:50:47.347

如果响应始终包含相同的模式（使用乌干达先令文本），则一种可能的方法是这样的：

```
package so;

import java.util.StringTokenizer;

public class DemoString {

    public static void main(String[] args) {
        String s = new String("{lhs: \"1 U.S. dollar\",rhs: \"2 481.38958 Ugandan shillings\",error: \"\",icc: true}") ;
        StringTokenizer st = new StringTokenizer(s, "\"");
        st.nextToken();  //{lhs: 
        st.nextToken();  //1 U.S. dollar
        st.nextToken();  //,rhs: 
        String value = st.nextToken();  //2 481.38958 Ugandan shillings
        String num = value.substring(0, value.indexOf("U"));  // 2 481.38958 
        num = num.replaceAll(" ", "");
        Float fnum = 0f;
        try {
            fnum = Float.parseFloat(num);           
        } catch (Exception e) {
            e.printStackTrace(System.out);
        }
        System.out.println("The float number is: " + fnum.toString());
    }

} 
```

# maven - 如何为詹金斯中的自定义脚本替换生成的脚本？

> ID：11674658
> 
> 赞同：1
> 
> 时间：2012-07-26T17:22:32.487
> 
> 标签：maven, jenkins, pom.xml

我正在使用 jenkins 构建一个 Maven 应用程序，该项目旨在运行一个 .jar 文件。它当前生成一个 .tar，其中包含一个以应用程序名称命名的 shell 文件。

我想知道是否可以替换自定义脚本生成的脚本。目前我可以实现的是将脚本包含在 tar 文件中：

```
 <project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

    <parent>
        <artifactId>org-pom</artifactId>
        <groupId>com.myOrg.org</groupId>
        <version>1.14</version>
    </parent>

    <modelVersion>4.0.0</modelVersion>

    <groupId>com.myOrg.division.group</groupId>
    <artifactId>myCurrentApplication</artifactId>
    <version>1.0-SNAPSHOT</version>
    <name>My Application</name>

    <build>
        <plugins>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>appassembler-maven-plugin</artifactId>
                <version>1.0</version>
                <configuration>
                    <programs>
                        <program>                           
                            <mainClass>com.myOrg.division.group.MyMainClass</mainClass>
                            <name>myApplication</name>
                        </program>
                    </programs>
                    <platforms>                     
                        <platform>unix</platform>
                    </platforms>
                    <binFileExtensions>
                        <unix>.sh</unix>
                    </binFileExtensions>
                </configuration>
                <executions>
                    <execution>
                        <id>appassembly</id>
                        <phase>package</phase>
                        <goals>
                            <goal>assemble</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <artifactId>maven-assembly-plugin</artifactId>
                <configuration>                 
                    <archive>
                        <manifest>
                            <addClasspath>true</addClasspath> 
                            <mainClass>com.myOrg.division.group.MyMainClass</mainClass>
                        </manifest>
                    </archive>
                    <descriptors>
                        <descriptor>src/assemble/bin.xml</descriptor>
                    </descriptors>
                </configuration>
                <executions>
                    <execution>
                        <id>make-assembly</id>
                        <phase>package</phase>
                        <goals>
                            <goal>single</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>
</project> 
```

bin.xml 如下所示：

```
<assembly xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.0"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.0 http://maven.apache.org/xsd/assembly-1.1.0.xsd">
  <id>bin</id>
  <formats>
    <format>tar</format>
  </formats>
  <baseDirectory>target/appassembler</baseDirectory>
  <includeBaseDirectory>false</includeBaseDirectory>
  <fileSets>
    <fileSet>
      <directory>target/appassembler</directory>
      <outputDirectory>myApplication</outputDirectory>
      <fileMode>0755</fileMode>
      <directoryMode>0755</directoryMode>
    </fileSet>
    <fileSet>
      <directory>src/main</directory>
      <outputDirectory>myApplication</outputDirectory>
      <includes>
                <include>conf/**</include>
                <include>scripts/**</include>
      </includes>
    </fileSet>
  </fileSets>
</assembly> 
```

但是，这仅包括它们，而不是替换它们。是否可以将 myCustomShell.sh 而不是 myApplicationShell.sh 作为主脚本？

注意：我无法更改 jenkins 中的任何配置。

谢谢。

# templates - 允许 vi 节点接受任何输入类型

> ID：11674660
> 
> 赞同：3
> 
> 时间：2012-07-26T17:22:44.570
> 
> 标签：templates, labview, variant

我想创建一个接受整数、浮点数、布尔值、字符串或枚举作为输入节点（但只有一个节点）的 VI，然后在我的 VI 中检测输入类型，以便我可以以不同方式使用数据. 谁能指出我正确的方向，我正在考虑变体，但不确定如何去做。

我希望我的 VI 的工作方式与使用模板类型的 C++ 函数或重载函数的工作方式基本相同。

谢谢，埃蒙

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T08:11:05.580

一些额外的选项：

1.  应该有一些交付 VI 可以告诉您变体中的数据类型是什么。这应该会简化前面的建议，因为您只需从案例结构开始并在每个案例中转换为一种类型。VI 应该在 vi.lib 中，我相信在一个名为 VariantDataType 的文件夹中，或者可能在 Utility 文件夹中。
2.  创建一个多态 VI - 它基本上是一组 VI（每个数据类型一个），它们使用 poly VI 连接。将其放入图中后，LV 会根据您使用的连线类型自动选择正确的 VI。这样做的最大优点是代码简单明了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T21:13:05.777

您可以使用变体。LabVIEW变体允许任何数据类型作为输入。要对变体做任何有用的事情，您需要使用“Variant to Data”并将变体转换为可用的数据类型。

现在，完成您正在做的事情的最简单方法是简单地循环浏览您想要使用的各种数据类型，并为所有这些数据类型调用“Variant to Data”并检查错误。只有正确的数据类型才会运行而不会产生错误。

还有其他方法可以动态转换变体，但它们要复杂得多（使用更多数据对变体进行编码或手动编写解析器）。

LabVIEW 没有很好的模板或重载功能（您可以使用重载，但它仅适用于 LabVIEW 对象，大多数 LabVIEW 数据类型不是对象）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T15:20:32.473

多态 vi 听起来像是一个很好的解决方案，但在这种情况下，您需要将数据连接到 vi，以便编译器在运行之前知道需要什么样的数据。它不适用于在运行时向 vi 发送不同数据类型的情况。扫描变体将起作用，或者您可以创建具有数据类型描述和变体数据的字符串/枚举集群，然后接收者 vi 将知道数据类型。Yair，非常有趣，这是我第一次听说检查变体中的数据类型，这些 vis 位于 vi.lib\Utility\VariantDataType 但我没有在调色板中看到它们。

# node.js - node.js 中的集群在带有 EBADF 的 azure 模拟器或 azure vm 中失败

> ID：11674661
> 
> 赞同：0
> 
> 时间：2012-07-26T17:22:45.217
> 
> 标签：node.js, azure, azure-worker-roles

这个经典的集群示例：

```
var cluster = require('cluster');
var http = require('http');
var numCPUs = require('os').cpus().length;

if (cluster.isMaster) {
  // Fork workers.
  for (var i = 0; i < numCPUs; i++) {
    cluster.fork();
  }

  cluster.on('exit', function(worker, code, signal) {
    console.log('worker ' + worker.process.pid + ' died');
  });
} else {
  // Workers can share any TCP connection
  // In this case its a HTTP server

  // Worker code omitted
} 
```

使用 windows azure PowerShell 和简单的节点进程在我的 windows 机器上顺利运行，但是当我将它部署到 azure 模拟器或真正的工作角色机器时，我收到以下错误：

```
spawn EBADF
    at errnoException (child_process.js:837:11)
    at ChildProcess.spawn (child_process.js:789:11)
    at exports.spawn (child_process.js:614:9)
    at exports.fork (child_process.js:443:10)
    at new Worker (cluster.js:288:20)
    at Cluster.cluster.fork (cluster.js:474:11)
    at Object.<anonymous> (X:\workspaces\tp\deploy\local_package.csx\roles\zealot\approot\server.js:8:13)
    at Module._compile (module.js:449:26)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32) 
```

任何人都知道为什么会发生这种情况或我如何调试这个问题？

谢谢....

**更新：**这个问题似乎只发生在节点引擎> = 0.8.0

**UPDATE2：**打开一个问题[https://github.com/joyent/node/issues/3779](https://github.com/joyent/node/issues/3779)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T21:22:50.760

相信这在节点 0.8.7 中已修复

# java - 如何处理一对相关的线程对象？

> ID：11674664
> 
> 赞同：1
> 
> 时间：2012-07-26T17:23:13.297
> 
> 标签：java, multithreading, garbage-collection

**我已经更改了文本，所以一些评论可能参考以前的版本**

下面是代码示例。有两个线程：observer 和 observable。Observable 由 main 启动。观察者由可观察对象的创建开始，并以它的销毁结束。但它不会发生，观察者会永远运行。为什么？

```
public class ThreadObjectReaping01 {

private static final Logger log = LoggerFactory.getLogger(ThreadObjectReaping01.class);

public static void main(String[] args) throws InterruptedException {

    Thread observable = new Thread("observable") {

        private Thread observable2 = this;

        Thread observer = new Thread("observer") {
            @Override
            public void run() {

                log.info("Observer is starting");

                while(!interrupted()) {

                    if( observable2.isAlive() ) {
                        log.info("Observable is running");
                    }
                    else {
                        log.info("Observable is NOT running");
                    }

                    try {
                        sleep(1000);
                    } catch (InterruptedException e) {
                        interrupt();
                    }
                }

                log.info("Observer is terminating");

            }
        };

        {
            observer.start();
        }

        @Override
        protected void finalize() throws Throwable {
            observer.interrupt();
        }

        @Override
        public void run() {

            log.info("Observable is starting");

            while(!interrupted()) {
                try {
                    sleep(1000);
                } catch (InterruptedException e) {
                    interrupt();
                }
                //log.info("Observable is running");
            }

        }
    };

    log.info("Main is starting observable");
    observable.start();
    Thread.sleep(10000);
    log.info("Main is interrupting observable");
    observable.interrupt();
    observable = null;
    Thread.sleep(10000);
    log.info("Main is terminating");

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T17:26:59.350

当您的主对象（覆盖的对象`finalize()`）不再*可访问*（有资格进行垃圾收集）时，GC 将`finalize()`首先调用。我看到您正在跟踪它，因此请确保您的日志消息实际上已被调用。

然而仅仅调用`interrupt()`是不够的，守护线程必须主动检查该标志（使用`isInterrupted()`）并正确响应它，尽快关闭。如果有的话，你也应该正确处理`InterruptedException`。

您的线程是守护线程这一事实无关紧要。非守护线程阻止 JVM 退出（当所有非守护线程完成工作时，JVM 存在）。在这里，您手动中断线程 - 该线程是否为守护进程并不重要。

> 这只是垃圾收集器延迟还是线程真的永远不会结束，因为主对象因为被报告者引用而没有被删除？

您的`"Reporting of..."`消息是否显示过？你可以在那里放一个断点。这意味着实现的对象`finalize()`是 GC 的受害者。如果只有`reporter`线程持有对您的主对象的引用（反之亦然），如果它们都没有被外部引用，GC 仍将释放这些对象，尽管循环依赖。

# 也可以看看：

*   [如何打破无限循环](https://stackoverflow.com/questions/11433383)
*   [中断Java中的线程](https://stackoverflow.com/questions/10056853)
*   [停止特定的 java 线程](https://stackoverflow.com/questions/7786305)
*   [加入线程时处理异常的最佳方法](https://stackoverflow.com/questions/11565720)

# 后经

与你的问题无关。如果您使用的是[slf4j](/questions/tagged/slf4j "显示标记为“slf4j”的问题")，则：

```
log.info(String.format("Reporting of (%s) is about ot interrupt", getName())); 
```

可以替换为：

```
log.info("Reporting of {} is about to interrupt", getName()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T17:27:03.277

> 我注意到，尽管它是在主线程中编码的，但记者线程并没有结束

`run()`当一个线程由于异常或返回而完成该方法时结束。如果您正在谈论，`thread.interrupt()`那么这只是设置中断标志并导致某些方法（睡眠，等待，...） throw `InterruptedException`。在您的线程中，您需要测试中断标志：

```
while (!Thread.currentThread().isInterrupted()) {
     // here's how you should be catching InterruptedException
     try {
        ...
     } catch (InterruptedException e) {
        // re-enable the interrupted flag
        Thread.currentThread.interrupt();
        // probably you should quit the thread too
        return;
     }
} 
```

一旦线程完成*并且*没有人引用`Thread`对象本身，垃圾收集器将回收该线程。如果 main 仍然有一个`Thread thread`字段，那么它将永远不会被垃圾收集。

顺便说一句，`finalize`真的不鼓励使用 - 特别是如果你在那里记录和做其他事情。你应该有你自己的`destroy()`方法或一些这样的方法，当线程完成时进行那种清理。也许是这样的：

```
 public void run() {
     try {
        // do the thread stuff
     } finally {
        destroy();
     }
 } 
```

# asp.net - 如何允许匿名用户访问图像？

> ID：11674666
> 
> 赞同：0
> 
> 时间：2012-07-26T17:23:32.407
> 
> 标签：asp.net, web-config, forms-authentication

我目前正在开发一个 ASP.NET 网站，该网站用于`Forms Authentication`限制对`~/resources/restricted/*`用户需要注册才能查看的某些文件 ( ) 的访问。`~/common/images/backgrounds/bg_community.jpg`不幸的是，这具有在网站的不相关部分中不允许背景 () 的额外效果。

我的配置有什么问题/我该如何解决？

### ~/Web.config

```
<?xml version="1.0" encoding="utf-8"?>
<configuration xmlns="http://schemas.microsoft.com/.NetConfiguration/v2.0">

  <!-- ... --->

  <system.web>

    <!-- ... --->

    <authentication mode="Forms">
      <forms loginUrl="~/users/login.aspx" />
    </authentication>

    <!-- ... --->

  </system.web>

  <!-- ... --->

  <location path="~/resources/restricted">
    <system.web>
      <authorization>
        <deny users="?" />
      </authorization>
    </system.web>
  </location>

  <!-- ... --->

</configuration> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T18:12:06.083

我不确定路径，我认为这就足够了：

```
path="resources/restricted" 
```

在这种情况下，我喜欢在 /resources/restricted/ 文件夹中创建额外的 web.config 文件。这样您就可以确定您控制的位置。缺点是您有多个配置文件。

```
<?xml version="1.0"?>
<configuration>
    <system.web>
        <authorization>
            <deny users ="?"/>
        </authorization>
    </system.web>
</configuration> 
```

# asp.net-mvc - 在 VB ASP.NET MVC Razor 中循环遍历集合

> ID：11674674
> 
> 赞同：5
> 
> 时间：2012-07-26T17:24:09.110
> 
> 标签：asp.net-mvc, vb.net, asp.net-mvc-3

我正在使用以下 Razor 脚本进行循环，但它给了我以下错误：

```
@foreach (var item in ViewBag.Articles)
{
    <div>@item.Title</div>
} 
```

错误：

说明：在编译服务此请求所需的资源期间发生错误。请查看以下特定错误详细信息并适当修改您的源代码。

编译器错误消息：BC30451：未声明“foreach”。由于其保护级别，它可能无法访问。

源错误：

> 第 29 行：文章 第 30 行：第 31 行：@foreach（ViewBag.Articles 中的变量项） 第 32 行：{ 第 33 行：
> 
> @(item.index)。@item.model.Description
> 
> 源文件：C:\Users\darchual\documents\visual studio 2010\Projects\Blog\Blog\Views\Blog\Details.vbhtml 行：31

它还在我的 IDE 中说“未声明'foreach'。由于其保护级别，它可能无法访问。”

如何循环浏览集合？感谢您的帮助。

编辑：

这是整个代码：

> @ModelType 博客。
> 
> @Code ViewData("Title") = ViewBag.Title 结束代码
> 
> ## 细节
> 
> 博客
> 
> ```
> <div class="display-label">name</div>
> <div class="display-field">
>     @Html.DisplayFor(Function(model) model.name)
> </div>
> 
> <div class="display-label">description</div>
> <div class="display-field">
>     @Html.DisplayFor(Function(model) model.description)
> </div>
> 
> <div class="display-label">dateCreated</div>
> <div class="display-field">
>     @Html.DisplayFor(Function(model) model.dateCreated)
> </div> </fieldset> 
> ```
> 
> 文章
> 
> ```
> @foreach (var item in ViewBag.Articles)
> {
>     <div>@item.Title</div>
> } 
> ```
> 
> ```
> @Html.ActionLink("Edit", "Edit", New With {.id = Model.BlogId}) |
> @Html.ActionLink("Back to List", "Index") </p> 
> ```

这是博客对象：

> 导入 System.Data.Entity 导入 System.ComponentModel.DataAnnotations
> 
> 公开课博客
> 
> ```
> Public Property BlogId() As Integer
> 
> Public Property Name() As String
> Public Property Description() As String
> Public Property DateCreated As Date
> 
> Public Overridable Property Articles() As ICollection(Of Article) 
> ```
> 
> 结束类
> 
> 公共类 BlogDbContext
> 
> ```
> Inherits DbContext
> Public Property Blogs As DbSet(Of Blog) 
> ```
> 
> 结束类

编辑：

终于让它工作了。工作代码是：

```
@For Each item In ViewBag.Articles
    @<div>@item.Title</div>
Next 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T19:03:16.630

答案是：

```
@For Each item In ViewBag.Articles
    @<div>@item.Title</div>
Next 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T17:46:52.467

您的页面代码位于 VB.Net 中，并且`foreach()`是 C# 构造。您只需要使用 For Each 循环的 VB 构造来修改您的代码：

[ASP.NET 论坛上的这个线程有一个很好的答案/代码片段](http://forums.asp.net/t/1769748.aspx/1)：

```
Dim list As New List(Of Article)
list = ViewBag.Articles
If (list.Any()) 
Then     
    For Each item As Article In ViewBag.Articles 
        <div>@item.Title</div>
    Next
End If 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T17:26:53.103

如果您已经在剃刀代码块中，则不需要`@`

```
@if(ViewBag.Articles.Count>0)
{
   foreach (var item in ViewBag.Articles)
   { 
     <div>@item.Title</div>
   }
} 
```

您使用的是VB.NET**版本**`foreach`吗？

```
@For Each item As Article In ViewBag.Articles
  <div>@item.Title</div>
Next 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-17T13:36:49.113

由于模型绑定器在 ASP.NET MVC 中的工作方式，在许多情况下，回发列表中每个值的索引很有帮助。

所以我更喜欢使用**索引 for 循环（而不是****为每个循环**强类型的简单性）：

```
@For i = 0 To Model.Articles.Count - 1
    Dim curItem = Model.Articles(i)
    @Html.EditorFor(Function(model) curItem)
Next 
```

**进一步阅读**：
[使用 Razor 语法的 ASP.NET Web 编程简介 (Visual Basic)](https://docs.microsoft.com/en-us/aspnet/web-pages/overview/getting-started/introducing-razor-syntax-vb#looping-code) | [C＃](https://docs.microsoft.com/en-us/aspnet/web-pages/overview/getting-started/introducing-razor-syntax-c#looping-code)

# .net - Windows 密码正则表达式

> ID：11674676
> 
> 赞同：-1
> 
> 时间：2012-07-26T17:24:28.187
> 
> 标签：.net, regex, passwords

我正在尝试使用 .NET 对强制执行 Windows 密码策略要求的密码执行正则表达式：

1) 长度至少为 8 个字符

2) 包含来自以下 4 个类别中的 3 个的字符：

*   英文大写字符 (A..Z)
*   英文小写字符 (a..z)
*   以 10 位为基数 (0..9)
*   特殊字符

我棘手的部分是，从上面的部分中，我只需要 3 条而不是 4 条规则。有谁知道我该如何存档？我的正则表达式如下；

```
 ^.*(?=.{8,})(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[\W]).*$ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T17:27:24.780

就个人而言，我会使用单独的正则表达式设置所有四个规则，然后在代码中，我会检查四个匹配项中的三个。

简单，易于阅读，即使对于不熟悉正则表达式的人也是如此。（并不是所有的开发人员都对他们很好。让维护能力差的开发人员轻松一些。）

如果其中一项规则发生变化，它也会简化事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T17:55:39.060

最终只使用普通的 VB.Net

代码如下；

```
 Public Function IsPasswordInCorrectFormat(ByVal Password As String) As Boolean
    Dim blnLowerLetter, blnUpperLetter, blnDigit, blnSpecials As New Boolean
    Dim intCorrectSet As New Short

    If Password.Length >= 8 Then
        For Each chrLetter In Password.ToCharArray
            If Not blnLowerLetter AndAlso Char.IsLower(chrLetter) Then blnLowerLetter = True : intCorrectSet += 1
            If Not blnUpperLetter AndAlso Char.IsUpper(chrLetter) Then blnUpperLetter = True : intCorrectSet += 1
            If Not blnDigit AndAlso Char.IsDigit(chrLetter) Then blnDigit = True : intCorrectSet += 1
            If Not blnSpecials AndAlso (Char.IsSymbol(chrLetter) OrElse Char.IsSeparator(chrLetter) OrElse _
                                      Char.IsWhiteSpace(chrLetter) OrElse Char.IsPunctuation(chrLetter)) Then blnSpecials = True : intCorrectSet += 1

            If intCorrectSet >= 3 Then Exit For
        Next
    End If

    Return intCorrectSet >= 3
End Function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T18:05:52.107

我喜欢这样做。“按意图编程”。它比等效的正则表达式更容易理解。更简单。也可能更快——只通过字符串一次，没有回溯。

如果您也愿意，这种方法可以很容易地定义有效性具有来自您正在查看的最小数量的字符类的字符......比如说至少 5 个中的 3 个。

```
/// <summary>
/// Determine password validity
/// </summary>
/// <param name="password"></param>
/// <returns></returns>
public bool IsPasswordValid(string password)
{
    if ( password == null ) throw new ArgumentNullException() ;

    const int MIN                     =  8    ;
    const int MAX                     = 32    ;
    bool      meetsLengthRequirements = password.Length >= MIN && password.Length <= MAX ;
    bool      hasLeadingWhitespace    = char.IsWhiteSpace( password[0]                     ) ;
    bool      hasTrailingWhitespace   = char.IsWhiteSpace( password[ password.Length - 1 ] ) ;
    bool      hasUpperCaseLetter      = false ;
    bool      hasLowerCaseLetter      = false ;
    bool      hasNumericChar          = false ;
    bool      hasSpecials             = false ;
    bool      hasWhitespace           = false ;

    for (int i = 0; i < password.Length; ++i)
    {
        char ch = password[i];

        hasUpperCaseLetter =  char.IsUpper(       ch ) ;
        hasLowerCaseLetter =  char.IsLower(       ch ) ;
        hasNumericChar     =  char.IsDigit(       ch ) ;
        hasWhitespace      =  char.IsWhitespace(  ch ) ;
        hasSpecials        =  char.IsPunctuation( ch )
                           || char.IsSeparator(   ch )
                           || char.IsSymbol(      ch )
                           ;

    }

    bool isValid = !hasLeadingWhitespace
                && !hasTrailingWhitespace
                && hasUpperCaseLetter
                && hasLowerCaseLetter
                && hasNumericChar
                && ( hasSpecials || hasWhitespace )
                ;
    return isValid ;
} 
```

# tsql - 使用 SQL 查询确定给定结果表的获胜者

> ID：11674677
> 
> 赞同：0
> 
> 时间：2012-07-26T17:24:29.770
> 
> 标签：tsql

我有一个包含 3 列的表：

```
 id|WonTeam|LostTeam
    1| t1    | t2
    2| t2    | t3
    3| t1    | t2
    4| t3    | t2
    5| t1    | t4
    etc.... 
```

我想找到赢得帽子戏法的球队。例如，这里 t1 赢得了帽子戏法。是否可以在单个选择语句中编写？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T17:48:40.460

这提出了一些从您的问题中不清楚的假设。我用“帽子戏法”来表示连续赢得 3 场*比赛*。由于没有任何时间戳，我还假设它`Id`给出了时间顺序。这个查询感觉有点笨拙，我觉得应该有一种方法可以收紧它，但它确实有效。基本上，对于每条记录，我都会计算自最近一次失败以来的获胜次数。如果这是> = 3，你有一个帽子戏法。

```
SELECT DISTINCT(R.Win) FROM Results R
CROSS APPLY (
    SELECT COUNT(*) AS WinStreak
    FROM Results T
    WHERE T.Win = R.Win AND T.Id <= R.Id
        AND T.Id >= (
            SELECT ISNULL(MAX(Id), T.Id)
            FROM Results S
            WHERE S.Lose = R.Win AND S.Id <= R.Id
        )
) X
WHERE X.WinStreak >= 3 
```

在这个[SQL Fiddle](http://sqlfiddle.com/#!3/9acaf/6)中，我为第 2 队添加了更多胜利，但由于它们不是连续出现的，因此它们不算作帽子戏法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T17:29:54.087

根据有限的数据和细节，这应该可行：

```
SELECT WonTeam
FROM yourTable
GROUP BY WonTeam
HAVING Count(WonTeam) > 2 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/e0ad2/1)

# caching - 从命令行或 Powershell 脚本删除 ARR 缓存中的所有缓存对象

> ID：11674679
> 
> 赞同：2
> 
> 时间：2012-07-26T17:24:31.457
> 
> 标签：caching, iis-7, proxy

文档描述了如何使用 IIS 管理器的应用程序请求路由缓存小程序删除所有缓存的对象（详细信息：[http](http://learn.iis.net/page.aspx/576/delete-cached-objects/) ://learn.iis.net/page.aspx/576/delete-cached-objects/ ）。这如何从命令行或 powershell 脚本完成？

就我而言，我确实有一个本地磁盘缓存，删除该文件夹中的文件不会导致重新计算文件。还需要什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T15:13:48.953

以下 C# 代码示例是一个简单的控制台程序，它可以删除缓存的所有内容，或删除您希望从缓存中清除的特定 URL。

为了编译它，您需要引用我在 GAC 中找到的*Microsoft.Web.Administration* DLL（尽管我也相信它也是 Windows SDK 的一部分）。

```
using Microsoft.Web.Administration;
using System;

namespace IISCacheManager
{
  class Program
  {
    static void Main(string[] args)
    {
      if (args.Length != 1)
      {
        Console.WriteLine("Incorrect Usage: Specify the URL that you want to flush the cache for. To delete everything, specify 'ALL'.");
        Environment.Exit(1);
      }

      var url = args[0] == "ALL" ? string.Empty : args[0];

      var m = new ServerManager();
      var x = m.GetApplicationHostConfiguration().GetSection("system.webServer/diskCache");
      var method = x.Methods["FlushUrl"].CreateInstance();
      method.Input.SetAttributeValue("url", url);
      method.Execute();
      Console.WriteLine("Item flushed successfully.");
    }
  }
} 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T23:33:58.820

我能想到的最佳选择是从提升的命令提示符调用 iisreset.exe，然后删除缓存文件夹的内容，例如：

```
iisreset
cd d:\cache
FOR /R %d IN (.) DO rmdir /s /q "%d" 
```

它有点难看——肯定有更优雅的东西。

# php - 仅显示最高金额

> ID：11674684
> 
> 赞同：2
> 
> 时间：2012-07-26T17:24:48.233
> 
> 标签：php, mysql, database, datatable

我目前正在尝试将一些数据拉入表中，但我只想显示某一行，如果它包含列中的最高金额。

```
+----+--------+---------+---------+----------+-----+
| id | auc_id | user_id | bamount |   date   | out | 
+----+--------+---------+---------+----------+-----+
| 20 | 10002  |  10008  |    12   |1342445619|   1 |
| 21 | 10002  |  10009  |    14   |1342445667|   1 |
| 22 | 10002  |  10008  |    16   |1342445669|   0 |
+----+--------+---------+---------+----------+-----+ 
```

我想在表格中显示每个 auc_id 的每个 user_id 的最新行

因此 auc_id 10002 用户 10008 的用户将仅在表中显示 16 的 bamount 并忽略 12 行的 bamount 因为 12 小于 16

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T17:37:10.877

是的，可以显示与每个用户的最高出价对应的行。

从做@Bryan Moyles 建议的开始；按用户汇总您的出价。

```
 SELECT user_id, MAX(bamount) bamount
   FROM table_name
  GROUP BY user_id 
```

现在您知道每个用户的最高出价。接下来，您需要通过将原始表连接到摘要来检索整行。

```
 SELECT t.id, t.auc_id, t.user_id, t.bamount, t.date, t.out
   FROM table_name t
  INNER JOIN (
     SELECT user_id, MAX(bamount) bamount
       FROM table_name
      GROUP BY user_id
  ) m ON t.user_id = m.user_id AND t.bamount = m.bamount 
```

这几乎是正确的。但是，如果您有一个用户在两次不同的拍卖中出价完全相同，您将获得该用户的两行。您的问题没有指定您需要对这个特殊的边缘情况做什么。

这个怎么样？在两个出价金额相同的情况下，让我们为用户给出最近的（即具有最大数字 id 的那个）出价。所以，我们需要另一个摘要查询，就像这样。

```
 SELECT w.user_id, MAX(w.id) id
   FROM table_name w
  INNER JOIN (
     SELECT user_id, MAX(bamount) bamount
       FROM table_name
      GROUP BY user_id
  ) x ON w.user_id = x.user_id AND w.bamount = x.bamount
  GROUP BY w.user_id 
```

现在您将该查询加入到您的原始表中，您瞧，您已经完成了。不要忘记在这个整体查询中使用适当的 ORDER BY 子句。

这假定 id 是主键唯一列。

```
 SELECT t.id, t.auc_id, t.user_id, t.bamount, t.date, t.out
   FROM table_name t
  INNER JOIN (
     SELECT w.user_id, MAX(w.id) id
       FROM table_name w
      INNER JOIN (
         SELECT user_id, MAX(bamount) bamount
           FROM table_name
          GROUP BY user_id
      ) x ON w.user_id = x.user_id AND w.bamount = x.bamount
     GROUP BY w.user_id
  ) m ON t.id = m.id 
```

看看情况如何？有一个摘要可以找到用户的最大数字出价。它嵌套在一个摘要中，为每个用户找到最大的 ID 号。它反过来用于从原始表中选择您需要的行。

通过利用比您在问题中给出的更好地理解您的数据，可能有更简单的方法来实现这一目标。例如，如果您知道出价总是在增加，并且没有两个出价的日期相同，并且您不关心如果用户对不止一个出价进行正确的拍卖，那么您可以只用日期字段。但是，根据我的经验，最好避免依赖关于您的数据的假设（例如出价总是在增加），因为现实生活中的事情会变得很糟糕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T17:30:13.550

使用MAX函数获取最高bamount

```
 SELECT user_id, MAX(bamount) FROM table_name GROUP BY user_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T17:45:11.083

```
select * from table1 t
where auction_date = (select max(auction_date) from table1 where 
                          user_id = a.user_id and auc_id = a.auc_id) 
```

您的索引顺序是：Auction_date、user_id、auc_id。Aution_date 应该是索引中的列。

# jquery - 砌体 - 文件准备好的扩展框

> ID：11674685
> 
> 赞同：0
> 
> 时间：2012-07-26T17:24:49.523
> 
> 标签：jquery

当文件在 Masonry 中准备好时，有谁知道如何将第一个框设置为展开状态？

[http://jsfiddle.net/vDGTC/](http://jsfiddle.net/vDGTC/)

也很高兴知道如何为某些框设置动画，而不是向下似乎是默认设置。我需要将此应用到框的底行，以便所有框的总暗度 - 或布局容器 - 无论扩展什么都保持不变。

非常感谢，这是一个地狱般的插件！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T17:35:29.257

您可以将其添加到脚本的底部：

```
$('.expandable:first').click(); 
```

设置完所有内容后，我们基本上只是在第一个元素上执行点击事件。

[http://jsfiddle.net/ufomammut66/xHvvT/1/](http://jsfiddle.net/ufomammut66/xHvvT/1/)

# ruby-on-rails - Rails will_paginate 和 ajax，在 DB 表更改时分页

> ID：11674686
> 
> 赞同：5
> 
> 时间：2012-07-26T17:24:52.440
> 
> 标签：ruby-on-rails, ajax, will-paginate, infinite-scroll

我正在尝试将 will_paginate 用于 Rails 3.2 应用程序，但我在任何地方都没有看到任何参考，说明当数据库中的数据发生更改时有人进行分页时会发生什么。更具体地说，添加了新记录。

我可能在这里遗漏了一些东西，但如果我知道它是如何工作的，will_paginate 只会计算数据库中的记录。假设我一次加载一个包含 5 条记录的页面，并希望它们按最新的排序。用户加载页面并获取显示在第 1 页的记录 6-10（当时的最新记录）。然后，有人将另一条记录插入到表中，id=11。之后，第一个用户点击进入第 2 页，但现在第 2 页提供记录 2-6。所以用户在两个页面中都得到了 id=6。

这个问题听起来并没有那么糟糕，但如果你想使用 will_paginate 分页进行无限滚动，这真的很糟糕，如下所示：[http ://railscasts.com/episodes/114-endless-page](http://railscasts.com/episodes/114-endless-page)

我考虑添加第一个页面加载的时间戳并将其传递给连续的 ajax 调用以过滤最初存在的记录，以免重复。

是否有一些最佳实践方法来处理这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T06:00:21.520

如果仅添加记录，则检查时间戳的解决方案有效。另一种方法是使用返回的最旧记录的时间戳来获取下一组数据。

这样，如果删除记录，则不会跳过任何记录。

使用返回的最旧记录的时间戳在查询时间上也有优势，因为数据库不需要数出 100 条记录来获取第 101 条记录，它可以简单地获取比某个时间更早的第一条记录（这要快得多如果您的 created_at 列被索引 - 允许二进制搜索）。

# asp.net-mvc - PhoneGap 与 Asp.net MVC 4？- 有人知道史蒂夫·桑德森在说什么吗？

> ID：11674691
> 
> 赞同：1
> 
> 时间：2012-07-26T17:25:12.470
> 
> 标签：asp.net-mvc, mobile, cordova, razor

我观看了[单页应用程序演示](http://blog.stevensanderson.com/2012/03/06/single-page-application-packages-and-samples/)，在视频的 4:15 标记中，他提到了使用 phonegap 将他的单页应用程序部署到“应用商店”。

有谁真正知道他打算如何做到这一点（他实际上从未在演示文稿中讨论过如何做到这一点）。

据我了解，没有移动设备支持 asp.net mvc，而 phonegap 只支持 html/javascript/css。

我看到他正在使用剃须刀，所以我唯一能想到的就是他在 mvc 中编写代码，然后以某种方式采用了一个快速通过应用程序并将所有视图呈现为纯 html 的工具。

然后因为他正在使用这个新的 webapi（我理解它基本上是一个只处理静态数据的网络服务器）。

因此，他会将应用程序构建为纯 html 并使用 phonegap 将其打包，并且每个链接都指向 webapi，只要托管该应用程序就可以工作。

有人对他的意思有任何其他想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T18:08:58.517

如果是单页应用，则只有一个视图。因此，一旦您在浏览器中打开它，您就会拥有所需的一切。Chrome 有一个“将页面另存为...，网页完成”功能，可以将页面和所有资源保存到一个目录中（其他浏览器也有类似的东西）。所以这将是一个简单的方法。

此外，如果您想编写脚本，您可以使用无头浏览器来实现相同的效果。

# python - 如何将文本文件中的某些单词大写？

> ID：11674692
> 
> 赞同：4
> 
> 时间：2012-07-26T17:25:14.533
> 
> 标签：python, formatting, python-2.7, text-manipulation

我有一个包含正常句子的文本文件。实际上，我在输入该文件时很着急，所以我只是将句子第一个单词的第一个字母大写（根据英语语法）。

但是现在我希望每个单词的第一个字母都大写会更好。就像是：

> 这句话的每个单词都大写

*上面句子中要注意的一点是**of**和**is**不是大写的，实际上我想转义等于或小于**3**个字母的单词。*

我该怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T17:28:48.450

```
for line in text_file:
    print ' '.join(word.title() if len(word) > 3 else word for word in line.split()) 
```

**编辑**：省略计数标点符号替换`len`为以下功能：

```
def letterlen(s):
    return sum(c.isalpha() for c in s) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-26T17:29:42.500

看看[NLTK](http://nltk.org/)。

标记每个单词，并大写。诸如“if”、“of”之类的词称为“停用词”。如果您的标准仅仅是长度，史蒂文的回答是这样做的好方法。如果您想查找停用词，SO 中有一个类似的问题：[How to remove stop words using nltk or python](https://stackoverflow.com/questions/5486337/stop-words-using-nltk-in-python)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-26T17:37:17.027

您应该拆分单词，并且只将那些超过三个字母的单词大写。

`words.txt`：

```
each word of this sentence is capitalized
some more words
an other line 
```

-

```
import string

with open('words.txt') as file:
    # List to store the capitalised lines.
    lines = []
    for line in file:
        # Split words by spaces.
        words = line.split(' ')
        for i, word in enumerate(words):
            if len(word.strip(string.punctuation + string.whitespace)) > 3:
                # Capitalise and replace words longer than 3 (without punctuation).
                words[i] = word.capitalize()
        # Join the capitalised words with spaces.
        lines.append(' '.join(words))
    # Join the capitalised lines.
    capitalised = ''.join(lines)

# Optionally, write the capitalised words back to the file.
with open('words.txt', 'w') as file:
    file.write(capitalised) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-26T17:50:39.077

你真正想要的是一个叫做[停用词](http://en.wikipedia.org/wiki/Stop_words)列表的东西。如果没有此列表，您可以自己构建一个并执行以下操作：

```
skipWords = set("of is".split())
punctuation = '.,<>{}][()\'"/\\?!@#$%^&*' # and any other punctuation that you want to strip out
answer = ""

with open('filepath') as f:
    for line in f:
        for word in line.split():
            for p in punctuation:
                # you end up losing the punctuation in the outpt. But this is easy to fix if you really care about it
                word = word.replace(p, '')  
            if word not in skipwords:
                answer += word.title() + " "
            else:
                answer += word + " "
    return answer # or you can write it to file continuously 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T17:31:55.200

您可以将文本文件中的所有元素添加到列表中：

```
list = []
f.open('textdocument'.txt)
for elm in f (or text document, I\'m too tired):
   list.append(elm) 
```

一旦你有一个列表中的所有元素，运行一个 for 循环来检查每个元素的长度，如果它大于三个，则返回第一个大写的元素

```
new_list = []
for items in list:
   if len(item) > 3:
      item.title()    (might wanna check if this works in this case)
      new_list.append(item)
   else:
   new_list.append(item)    #doesn't change words smaller than three words, just adds them to the new list 
```

看看这是否有效？

# php - 使用 PHP 从数组中删除项目

> ID：11674700
> 
> 赞同：5
> 
> 时间：2012-07-26T17:25:41.127
> 
> 标签：php, arrays

我有两个数组

```
$alpha=array('a','b','c','d','e','f');

$index=array('2','5'); 
```

我需要从第二个数组中删除第一个数组中具有索引的项目。

（去掉c-index为2，f-index为5）

所以返回的数组是

{'a','b','d','e'}

我怎样才能使用 PHP 做到这一点？谢谢

编辑

实际上我需要最终的数组如下

```
[0]=>a
[1]=>b
[2]=>d
[3]=>e 
```

取消设置将返回具有相同索引的数组

```
0 => string 'a' 
2 => string 'c' 
3 => string 'd' 
4 => string 'e' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T17:27:28.443

```
foreach ($index as $key) {
    unset($alpha[$key]);
} 
```

之前有它作为 array_unset() 。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T17:42:54.027

请尝试这个以获得更多性能：

```
var_dump(array_diff_key($alpha, array_flip($index))); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-26T17:34:29.503

另一种方法（以防万一`$alpha`或`$index`碰巧很大并且您想将其全部保留在php上）：

```
function remove_keys($array, $indexes = array()){
  return array_intersect_key($array, array_diff(array_keys($array),$indexes));
} 
```

[IDEOne 示例](http://ideone.com/P03lT)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-26T17:32:42.227

遍历`$index`数组中的键，并在迭代期间使用以下方法删除相应的键[`unset()`](http://uk.php.net/manual/en/function.unset.php)：

```
<?php
$alpha=array('a','b','c','d','e','f');  
$index=array('2','5'); 

foreach ($index as $key) {     
    unset($alpha[$key]);
} 

var_dump($alpha);
?> 
```

输出：

```
array(4) { [0]=> string(1) "a" [1]=> string(1) "b" [3]=> string(1) "d" [4]=> string(1) "e" } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T17:28:18.370

检查这个：

```
$array = array('a', 'b','c');
unset($array[0]);
$array = array_values($array); //reindexing 
```

# oracle - Oracle Data Modeler 脚本模板或变量占位符

> ID：11674703
> 
> 赞同：0
> 
> 时间：2012-07-26T17:25:59.537
> 
> 标签：oracle, database-design

我一直在使用 Oracle SQL Developer Data Modeler 创建我们数据库的关系模型。我们的表中需要一个自动递增的 ID，所以我创建了一个脚本，放置在 Table Properties > Scripts > After Create 部分中。但我遇到的问题是需要更改每个表的数据库、序列和触发器的名称。

因此，如果我们不得不以任何方式重命名表，那么去更改脚本就会变得很麻烦。

我想知道有没有办法从脚本区域引用表名？像变量、模板还是占位符？

这是我的脚本示例：

```
CREATE SEQUENCE table_Seq
START WITH 1
INCREMENT BY 1;

CREATE OR REPLACE TRIGGER table_Trigger
BEFORE INSERT
ON table
REFERENCING NEW AS NEW
FOR EACH ROW
BEGIN
SELECT table_Seq.nextval INTO :NEW.ID FROM dual;
END;
/ 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T22:38:05.937

在发现 Oracle SQL Developer Data Modeler 中有一个内置函数来处理序列和触发器后，我已经解决了这个问题。

要访问此界面...

1.  打开表属性（在关系模型视图中双击表对象）。
2.  从左侧的菜单树中选择“列”。
3.  双击要为其创建序列和触发器的列。
4.  从左侧的菜单树中选择“自动增量”。（填写信息以创建此列的序列）
5.  选中“生成触发器”复选框，让它自动为此序列生成触发器。

# .htaccess - 使用 .htaccess 隐藏扩展名和变量

> ID：11674705
> 
> 赞同：1
> 
> 时间：2012-07-26T17:26:01.463
> 
> 标签：.htaccess

如何通过[.htaccess](https://en.wikipedia.org/wiki/.htaccess)在一行中隐藏文件的扩展名和[GET](http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Request_methods)变量？

此代码不起作用：

```
...
RewriteRule ^(.*)$ $1.php [L]
RewriteRule ^file-([0-9]+)\.php$ /some_directory/files.php?id=$1 [L] 
```

例子：

[http://www.example.com/file.php?variable=value](http://www.example.com/file.php?variable=value)

应该：

[http://www.example.com/file](http://www.example.com/file)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T17:43:15.230

您需要在第一条规则中添加一些条件以防止其循环，您可以尝试将其更改为：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^(.*)$ $1.php [L] 
```

然后继续你的第二条规则，它看起来很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-11T15:15:19.293

这对于静态页面更好。您只需将“索引”更改为您的文件并根据您的更改获取元素。例如，有“id”元素。

```
RewriteEngine On
RewriteRule ^((?:[a-zA-Z0-9_-]|%20)+)/?$ index.php?id=$1 
```

# asp.net - Tridion 分析和个性化错误：用户不能为空。请确保正确配置 WAI

> ID：11674707
> 
> 赞同：9
> 
> 时间：2012-07-26T17:26:09.840
> 
> 标签：asp.net, tridion

我有一个使用从 Tridion 2011 SP1 发布的分析和个性化的 ASP.NET 页面 (index.aspx)。如果用户之前查看了 3 个标记为“golf”的页面（通过 cat+keywords），它只会显示一个动态组件演示文稿和第二个动态组件演示文稿。

我通过将 TBB 的“目标组个性化”和“激活跟踪”添加到我的默认完成操作来启动分析。我重新发布了该页面，并看到它使用分析代码创建了动态 cp，一切进展顺利：

```
<tridion:ComponentPresentation runat="server" PageURI="tcm:8-667-64" ComponentURI="tcm:8-668" TemplateURI="tcm:8-666-32"/>
<tridion:TargetGroup runat="server" ItemURI="tcm:8-667-64">
    <tridion:Conditions runat="server" Negate="false" Operator="AND">
        <tridion:Conditions runat="server" Negate="false" Operator="OR">
            <tridion:Conditions runat="server" Negate="false" Operator="AND">
                <tridion:Condition runat="server" Type="TrackingKey" Operator="=" Negate="false" Name="Golf" Value="3"/>
                </tridion:Conditions>
            </tridion:Conditions>
    </tridion:Conditions>
    <tridion:ComponentPresentation runat="server" PageURI="tcm:8-667-64" ComponentURI="tcm:8-663" TemplateURI="tcm:8-666-32"/>  
</tridion:TargetGroup>
<tridion:IncrementKey runat="server" ItemURI="tcm:8-667-64" Name="Golf" ComponentURI="tcm:8-663"/> 
```

问题：当我在浏览器中查看 index.aspx 时，出现以下错误：

***用户不能为空。请确保正确配置 WAI***

我检查了经纪人数据库，那里没有数据。我相信我的 cm_wai_conf.xml 文件配置正确。我读了这篇文章，建议 WAI 使用我添加到 Windows 的环境变量 REMOTE_USER ，但仍然没有运气。 [http://sdltridionworld.com/articles/UsingPandPinDistributedEnvironments.aspx](http://sdltridionworld.com/articles/UsingPandPinDistributedEnvironments.aspx)

有没有人遇到过这个错误并且可以提供帮助？如有必要，我可以提供我的 cd_wai_conf.xml 文件

在此先感谢，非常感谢您的帮助，这让我发疯了！

**编辑：添加了配置文件** XML 不会在 StackOverflow 中呈现，所以我在 PasteBin 上添加了它：http: [//pastebin.com/tHwqhwtq](http://pastebin.com/tHwqhwtq)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-27T13:15:33.500

多谢你们。你是对的。我网站的 web.config 中未正确配置 WAIModule。我的站点在 IIS7 集成模式下运行，因此我将其配置如下：

```
<system.webServer>
<directoryBrowse enabled="true" />
<modules>
    <add name="TridionWAIHttpModule" type="Tridion.ContentDelivery.Web.WAI.WAIModule, Tridion.ContentDelivery" preCondition="managedHandler" />
</modules>
<validation validateIntegratedModeConfiguration="false"/></system.webServer> 
```

这给了我一个新错误“对象引用未设置为对象的实例”。我将我的 AppPool 更改为经典模式并添加了以下几行：

```
<httpModules>
    <add type="Tridion.ContentDelivery.Web.WAI.WAIModule, Tridion.ContentDelivery" name="TridionWAIHttpModule" /> 
</httpModules> 
```

然后页面加载，分析和个性化工作 100%

非常感谢你们在这里的时间。我希望这对将来的其他人有所帮助。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-26T17:29:22.293

当您没有为用于访问 cd_wai_conf.xml 中的站点的 URL 配置演示文稿 ID 时，我已经看到了这一点。默认情况下，我相信这使用`localhost`. 确保为用于访问站点的任何 URL 定义了主机 URL。

还要仔细检查您的 WAI 模块是否已正确添加到您的 webb 应用程序的 web.config 中。在 IIS 中确保您的模块位于正确的位置，这可能会有所不同，具体取决于您使用的是 IIS6 还是更高版本，以及您的应用程序池是处于经典模式还是集成模式。

# parallel-processing - 用 openCL 内核替换计算着色器，o/p 像素化和闪烁，尽管 o/p 缓冲区中的值匹配

> ID：11674709
> 
> 赞同：0
> 
> 时间：2012-07-26T17:26:21.233
> 
> 标签：parallel-processing, opencl, shader, directx-11, compute-shader

我有一个应用程序，其中有不同的着色器，其中之一是计算着色器，它计算场景中的光值，光值由计算着色器中编写的累积函数计算。

我编写了一个类似于计算着色器 (.hlsl) 文件的内核 openCL (.cl)。

我已经用 openCL 内核替换了计算着色器，

我在输出光缓冲区中的值与计算着色器输出的值相同，

但是输出看起来像素化并且它在屏幕上闪烁，并且像素化输出的一个小单元的方框与我的内核的工作组大小相匹配。

由于输出光缓冲区（我很确定这是唯一的一个输出缓冲区）具有与计算着色器相同的值，我无法确定我的程序在哪里失败。

有没有人遇到过类似的问题？任何提示或建议都会有所帮助。

# perl - 将 IE Cookie 加载到 Perl 的 WWW::Mechanize

> ID：11674711
> 
> 赞同：3
> 
> 时间：2012-07-26T17:26:40.483
> 
> 标签：perl, cookies, login, internet-explorer-9

我在这件事上玩得很开心...

我正在尝试连接到需要登录的网站。我显然可以直接进入页面而无需登录，因为 IE 有一个 cookie 可以这样做。

我正在编写一个将由我以外的人运行的脚本，因此我不想发送包含我的登录信息的文件。理想情况下，其他人也不必输入这些信息。

这是代码中相关的小部分。我只想从 IE 加载 cookie 并打印它们（因为我假设一旦它们在那里，它们就会被正确访问）。

我已经搜索了几个小时，甚至读到有人声称这会加载 cookie。我看到它现在能够存储 cookie，但不能在我的计算机上加载现有的 cookie。

```
#!/usr/bin/perl -w
use strict;
use WWW::Mechanize;
use HTTP::Cookies::Microsoft;
use Win32::TieRegistry(Delimiter => "/");

my $cookies_dir = $Registry-> {"CUser/Software/Microsoft/Windows/CurrentVersion/Explorer/Shell Folders/Cookies"};
my $cookie_jar = HTTP::Cookies::Microsoft->new(file => "$cookies_dir\\index.dat",'delayload'=>0,);
my $mech = WWW::Mechanize->new(cookie_jar => $cookie_jar);
print "Set Cookie Jar?\n", $cookie_jar->as_string, "\n";
print "Set Cookie Jar?\n", $mech->cookie_jar->as_string, "\n"; 
```

我可以加载现有的 cookie 吗？

不[`HTTP::Cookies::Microsoft`](http://search.cpan.org/~gaas/HTTP-Cookies/lib/HTTP/Cookies/Microsoft.pm)兼容IE9？（网站列出了 IE6 和 IE7，但自 2002 年以来一直没有更新）。

我什至看不到这个示例或任何示例中实际加载现有 cookie 的位置。如果只是兼容性问题，IE9有哪些选择？（我必须坚持IE9，因为它是这家公司的支持浏览器）

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T23:34:14.150

在我的 Windows XP 系统上使用 IE8，cookie 位于`C:\Documents and Settings\userid\Local Settings\Temporary Internet Files`. 没有`index.dat`，cookies 在它们自己的文件中。

我不知道[IE9 在哪里存储 cookie](http://windows.microsoft.com/en-US/windows7/View-temporary-Internet-files-in-Internet-Explorer-9)。

但是，如果您尝试在用户通过 IE 登录的站点上自动执行某些操作并启动程序，则可以使用[Win32::IE::Mechanize或通过](http://search.cpan.org/perldoc/Win32%3a%3aIE%3a%3aMechanize)[Win32::OLE](http://search.cpan.org/perldoc/Win32%3a%3aOLE)驱动 IE 。例如，请参阅我的博客文章[Using Win32::OLE with events to capture Internet Explorer screenshots with Perl](http://blog.nu42.com/2012/06/using-win32ole-with-events-to-capture.html)。有关可用方法、属性和事件的信息，请参阅[InternetExplorer 对象文档](http://msdn.microsoft.com/en-us/library/aa752084%28v=vs.85%29)。

# php - 加密是否可以防止 sql 注入？

> ID：11674713
> 
> 赞同：2
> 
> 时间：2012-07-26T17:26:51.267
> 
> 标签：php, sql, encryption, web, code-injection

在将值插入 SQL 查询之前使用哈希值是否可以防止 sql 注入，甚至不必使用 mysql_real_escape_string？（假设您要为整个站点执行此操作）

编辑：具体来说，目的是从用户那里获取一个键并在将其与我表中的其他散列列进行比较之前对其进行散列，然后检索散列匹配的另一个列值。抱歉没有指定

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-26T17:31:34.720

是的，但它也会使您的数据变得无用。:P 请记住，散列是单向的，因此您将无法取回有意义的数据。加密是两种方式，这可能是您真正的意思。

我认为使用准备好的 SQL 语句是一种更广泛接受的解决方案。看到[这个问题](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T17:31:25.140

是的，但是一旦你散列了信息，你就不能从散列中重新生成信息。请改用编码方法。

此外，`mysql_`* 函数已（或即将）弃用。您应该考虑切换到`mysqli`或`PDO`。如果你是一个懒惰的流浪汉（像我一样），你可以使用与原始功能`mysqli`几乎相同的程序样式。`mysql_`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T17:28:52.067

只要您的散列输出在 mysql 中没有任何冲突的字符，那么我绝对会说是的。base64 是做这样的事情的好方法

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-12T18:01:48.340

是的，但前提是您将密钥既加密又作为哈希存储。我刚刚完成了一个执行此操作的 tcl 脚本。主要程序应该对您有所帮助。获取纯文本密钥和哈希，同时加密此纯文本密钥并将它们存储在与您正在保存的表单数据相同的行中（也加密）。

通过解密密钥列并插入框中，使用纯文本密钥填充下拉列表或任何内容。现在您可以选择纯文本键进行搜索。

这需要加密、解密和散列路由，每次您想要添加、更新、删除记录或显示记录时都会调用该路由，但我注意到它并没有减慢，尽管我确信它存在于微秒级。

确保您的加密来自标准化和受人尊敬的来源，如 openssl 或类似来源，以便您可以使用自动填充和自动 IV 创建进行 cbc。这种方式就像数据库中的单词以不同的方式加密。这也是您需要散列密钥的原因。否则它将以不同的方式加密，您将无法搜索任何内容。

通过这种方式，一个键被散列并与其他散列值进行检查。尝试将一组恶意的单词插入到一个字段中，可能发生的情况是它被散列成一个非危险的单词。

如果使用 tcl 它也有助于使用花括号，这应该可以防止问题开始

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T17:29:37.117

如果您正在考虑 md5() 或 sha1()，您将永远无法解密哈希。如果你有自己的加密算法，我说去吧。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-26T17:36:12.490

在我看来，我认为你应该同时使用它们，这是一个例子：

```
$em = mysql_real_escape_string($_REQUEST['email']);
$pw = mysql_real_escape_string($_REQUEST['password']);
at the insert you use the password($pw) function. 
```

# android - Android-Notification：让代码文本保持更长的时间

> ID：11674714
> 
> 赞同：4
> 
> 时间：2012-07-26T17:26:51.650
> 
> 标签：android, notifications

我正在研究果冻豆。当通知出现在状态栏中时，通知中的代码文本会出现和消失。通知图标会一直保持在那里（在状态栏中），直到我们清除通知。在清除通知之前，是否可以将代码文本也保留在状态栏中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T19:05:52.257

不，抱歉 - 股票代码文本，如 a `Toast`，被设计为瞬态的。毕竟，状态栏中还有其他内容会被代码文本替换。

# c# - 在文件 asp.net 后面的代码中检索文本框值

> ID：11674718
> 
> 赞同：2
> 
> 时间：2012-07-26T17:26:59.530
> 
> 标签：c#, asp.net, webforms

嗨，我在页面上有一个 crontrol：

```
<asp:TextBox ID="q" runat="server" autocomplete="off" /> 
```

我试图从文件后面的代码中访问 的值。

我试过了：

```
TextBox searchTerm = FindControl("q") as TextBox; 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-26T17:28:30.607

如果它`ASP.NET TextBox server control`在您的表单中，您可以简单地使用该`Text`属性

```
string searchKey=q.Text; 
```

您可以访问 CodeBehind 中的任何元素，前提是它的`ID`属性值和`Runat`属性值设置为`"Server"`

**例如**：你可以在你的`.ASPX`页面中写一些这样的标记

```
<div id="someInfoDiv" runat="server"> Tim's point is valid</div> 
```

在代码隐藏中

```
 someInfoDiv.InnerHtml = "So i am adding that"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T17:38:44.533

您不需要以这种方式搜索它，`TextBox searchTerm = FindControl("q") as TextBox;` 因为它是一个服务器控件，您将能够通过其 id 获取文本

这边走`string query = q.Text;`

# python - Python中的多态性和数据库加载

> ID：11674721
> 
> 赞同：0
> 
> 时间：2012-07-26T17:27:07.123
> 
> 标签：python, mysql, database, oop, polymorphism

我在以多态方式将记录加载到数据库时遇到问题。

我有：

*   由不同类型的记录 ( , )`Record`扩展的 ' ' 对象`RecordA``RecordB`
*   一种`load_record()`不知道它正在加载什么类型的记录的方法
*   一个数据库接口，需要包含数据库的所有信息

据我了解，多态我可以这样做：

```
class RecordA(Record):
    def load_into_db(self, db_impl):
        db_impl.load_record_a(self)

class DbImpl(DbInt):
    def load_record_a(self, record):
        ... 
    def load_record_b(self, record):
        ... 

def load_record(record):
    record.load_into_db(db_impl) 
```

或者

```
class RecordA(Record):
    def get_record_data(self):
        ....
    def get_db_proc(self, db_impl):
        return db_impl.get_record_a_proc()

class DbImpl(DbInt):
    def get_record_a_proc(self):
        ...

def load_record(record):
    record_data = record.get_data()
    db_proc = record.get_db_proc(db_impl)
    db_impl.load_record(record_data, db_proc) 
```

这两个似乎有点笨拙。或者，我们可以有效地使用 switch 语句：

```
class DbImpl(DbInt):
    procs = { RecordA: ..., RecordB: ...}
    ...

def load_record(record):
    data = record.get_data()
    db_proc = procs[type(record)]
    db_impl.load_record(record_data, db_proc) 
```

现在可能很明显，问题是数据库需要使用一个特定的存储过程（它在它自己的代码中），但是如果不询问记录本身，它就不知道要使用哪个存储过程。

示例 1 对我来说看起来是最多态的，但是`DbImpl`每当我们添加新类型的记录时它仍然需要编辑代码，那么它是否比示例 3 更好？如果是这样，为什么？

干杯，威尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T13:17:36.307

对我来说最有意义的是拥有一个包含基本数据库功能的基类，例如将某些内容放入数据库和连接信息。然后，您将从这个基类中继承 RecordA、RecordB、RecordC 等，它们将保存信息/功能，例如存储过程信息。在我看来，拥有一个包含一堆方法的基类感觉很笨拙，并且不适合 OOP 范式。

因此，具有基本数据库功能的基类，然后每个 Record 子类将包含该特定记录类型所需的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T17:31:21.490

在这种情况下，如果 Record 类型与特定的存储过程相关，那么我会说记录本身需要了解需要运行的存储过程并将该数据传递给实现它的 DB 类。因此，不需要使用每种新记录类型来修改 DB 类。只需要对 recordType 进行编码以了解需要使用的存储过程名称并将该名称公开给 DB 类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T06:42:52.883

我遇到了同样的问题，发现现有的数据库 ORM 就多态性/OOP 而言缺乏，为此我一直在研究一个主要关注这一点的新数据库。它称为 ORB，可在以下位置找到：[http ://docs.projexsoftware.com/api/orb/](http://docs.projexsoftware.com/api/orb/)

现在它只适用于 PostgreSQL 和 Mongo，但我很快就会将它扩展到更多后端。

它非常灵活，具体取决于您要执行的操作，无论是否简单，例如：

*   基类（数据库层）
*   子类（纯 python 调用 - 所以控制器逻辑运行同一个表）

或者

*   基类（抽象层 - 通用控制器逻辑，未定义表）
*   子类（数据库层 - 每个定义不同的数据库表）

或者

*   基类（数据库层 - 定义根表）
*   子类（数据库层 - 为支持它的 Db 定义继承的表，或为不支持它的 Db 定义重复的列式表）

这是一个例子：

```
# import the orb system
from orb import Table, Column, ColumnType, Orb

# define the base class (will create default_fruit table)
class Fruit(Table):
    __db_columns__ = [
        Column(ColumnType.String, 'shape'),
        Column(ColumnType.String, 'color'),
        Column(ColumnType.String, 'name'),
        Column(ColumnType.String, 'classType')
    ]

    def initRecord( self ):
        """
        Set the initialization information from the base Table type
        """
        super(Fruit, self).initRecord()
        self.setRecordDefault('classType', self.__class__.__name__)

    @staticmethod
    def expanded( records ):
        """
        Expands the records based on their class type.

        :return   [<Table>, ..]
        """
        out = []
        for record in records:
            # map the record to their base classes
            model = Orb.instance().model(record.classType())
            if ( not model ):
                out.append(record)
                continue

            expanded_record = model(record)
            if ( not expanded_record.isRecord() ):
                continue

            out.append(expanded_record)
        return out        

# define the sub class (no database table)
class Apple(Fruit):
    def initRecord( self ):
        super(Apple, self).initRecord()
        self.setRecordDefault('shape', 'round')
        self.setRecordDefault('color', 'red')

# define the sub class (with a sub-table, will create default_banana table)
class Banana(Fruit):
    __db_columns__ = [
        Column(ColumnType.String, 'isPlantain')
    ]

    def initRecord( self ):
        super(Banana, self).initRecord()
        self.setRecordDefault('shape', 'oblong')
        self.setRecordDefault('color', 'yellow') 
```

这将定义 3 个不同的类（Fruit、Apple、Banana）和 2 个数据库表（default_fruit、default_banana）

使用这个系统（你必须创建文档中定义的数据库连接等）会给你类似的东西：

```
>>> from fruits import Fruit, Apple, Banana
>>> apple = Apple()
>>> apple.setColor('green')
>>> apple.setName('Granny Smith')
>>> apple.commit()
>>> banana = Banana()
>>> banana.setName('Chiquita')
>>> banana.setPlantain(False)
>>> banana.commit()
>>> fruits = Fruit.select() # select all fruit
[<Fruit>, <Fruit>]
>>> fruits = Fruit.expanded(fruits) # expand the fruit based on their types
[<Apple>, <Banana>] 
```

# java - 找不到 Spring JPA TransactionManager

> ID：11674722
> 
> 赞同：1
> 
> 时间：2012-07-26T17:27:08.843
> 
> 标签：java, spring, jpa

我有一个我认为是一个简单的项目，我在其中使用 Spring 来管理 JPA 和 EclipseLink 用于我的持久性单元。我将 JavaFX 用于我的前端，并将我的项目拆分为客户端模块、通用模块和服务器模块。我正在使用 Maven 进行构建。几天来，我一直在用头撞墙，试图弄清楚这一点。我尝试了持久性单元和 servlet 配置的不同配置，但似乎没有任何效果。并且错误似乎总是非常相似：事务管理器配置或使用中的某些东西是可疑的。

非常感谢所有帮助。我是这个 Spring JPA 空间的新手，如果问题没有得到充分定义，请原谅。

这是我的pom：

```
<project xmlns="http://maven.apache.org/POM/4.0.0"     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>

<groupId>com.lamtec</groupId>
<artifactId>NewTrialServer</artifactId>
<version>1.0</version>
<packaging>war</packaging>

<name>NewTrialServer</name>
<!-- Spring Web MVC -->
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.3.2</version>
            <configuration>
                <source>1.7</source>
                <target>1.7</target>
            </configuration>
        </plugin>
    </plugins>
</build>
<repositories>
    <repository>
        <id>unknown-jars-temp-repo</id>
        <name>A temporary repository created by NetBeans for libraries and jars it could not identify. Please replace the dependencies in this repository with correct ones and delete this repository.</name>
        <url>file:${project.basedir}/lib</url>
    </repository>
    <repository>
        <url>http://download.eclipse.org/rt/eclipselink/maven.repo/</url>
        <id>eclipselink</id>
        <layout>default</layout>
        <name>Repository for library EclipseLink (JPA 2.0)</name>
    </repository>
</repositories>
<dependencies>
    <dependency>
        <groupId>com.lamtec</groupId>
        <artifactId>NewTrialCommon</artifactId>
        <version>1.0</version>
    </dependency>

    <!-- Spring Web MVC -->

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-webmvc</artifactId>
        <version>3.0.6.RELEASE</version>
    </dependency>

    <!-- Spring data -->

    <dependency>
        <groupId>org.springframework.data</groupId>
        <artifactId>spring-data-jpa</artifactId>
        <version>1.0.2.RELEASE</version>
    </dependency>

    <!-- JPA -->

    <dependency>
        <groupId>org.hibernate.java-persistence</groupId>
        <artifactId>jpa-api</artifactId>
        <version>2.0-cr-1</version>
    </dependency>

    <!-- Hibernate -->

    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-entitymanager</artifactId>
        <version>3.6.8.Final</version>
    </dependency>

    <!-- HSQL DB -->

    <dependency>
        <groupId>hsqldb</groupId>
        <artifactId>hsqldb</artifactId>
        <version>1.8.0.10</version>
    </dependency>

    <!-- Injection framework -->

    <dependency>
        <groupId>javax.inject</groupId>
        <artifactId>javax.inject</artifactId>
        <version>1</version>
    </dependency>
    <dependency>
        <groupId>org.eclipse.persistence</groupId>
        <artifactId>eclipselink</artifactId>
        <version>2.3.2</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>org.eclipse.persistence</groupId>
        <artifactId>javax.persistence</artifactId>
        <version>2.0.3</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>org.eclipse.persistence</groupId>
        <artifactId>org.eclipse.persistence.jpa.modelgen.processor</artifactId>
        <version>2.3.2</version>
        <scope>provided</scope>
    </dependency>
</dependencies> 
```

这是我的persistence.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
  <persistence-unit name="NewTrialsPU" transaction-type="JTA">
    <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
    <jta-data-source>NewTrials</jta-data-source>
    <class>com.lamtec.newtrial.service.Trial</class>
    <class>com.lamtec.newtrial.service.TrialCtWtCheck</class>
    <exclude-unlisted-classes>true</exclude-unlisted-classes>
    <properties/>
  </persistence-unit>
</persistence> 
```

这是我的小服务程序：

```
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:context="http://www.springframework.org/schema/context"
   xmlns:data="http://www.springframework.org/schema/data/jpa"
   xmlns:tx="http://www.springframework.org/schema/tx"
   xsi:schemaLocation="
http://www.springframework.org/schema/beans 
http://www.springframework.org/schema/beans/spring-beans.xsd
http://www.springframework.org/schema/context
http://www.springframework.org/schema/context/spring-context-2.5.xsd
http://www.springframework.org/schema/data/jpa
http://www.springframework.org/schema/data/jpa/spring-jpa.xsd
http://www.springframework.org/schema/tx
http://www.springframework.org/schema/tx/spring-tx-3.0.xsd">

<context:annotation-config/>
<context:component-scan base-package="com.lamtec"/>

<bean name="trialServiceImpl" class="com.lamtec.newtrial.service.TrialServiceImpl"/>

<bean name="/new-trial.service" class="org.springframework.remoting.httpinvoker.HttpInvokerServiceExporter">
    <property name="service" ref="trialServiceImpl"/>
    <property name="serviceInterface" value="com.lamtec.newtrial.service.TrialService"/>
</bean>

<!-- Database Setup -->
<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalEntityManagerFactoryBean">
    <property name="persistenceUnitName" value="NewTrialsPU" />
</bean>
<data:repositories base-package="com.lamtec.newtrial.service.repository"/>

<!-- Transaction Setup -->
<tx:annotation-driven/>

<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory"/>
</bean> 
<bean class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor" /> 
```

我有两个实体类，试用：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package com.lamtec.newtrial.service;

import java.io.Serializable;
import java.util.List;
import javax.persistence.Basic;
import javax.persistence.CascadeType;
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.FetchType;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.Lob;
import javax.persistence.NamedQueries;
import javax.persistence.NamedQuery;
import javax.persistence.OneToMany;
import javax.persistence.Table;

@Entity
@Table(name = "Trial")
public class Trial implements Serializable{
private static final long serialVersionUID = 1L;
// @Max(value=?)  @Min(value=?)//if you know range of your decimal fields consider using these annotations to enforce field validation
@Id
@Basic(optional = false)
@GeneratedValue(strategy = GenerationType.AUTO)
@Column(name = "TRIAL_ID")
private Long trial_Id;
@Column(name = "AUX_ADHESIVE1_WEIGHT")
private String auxAdhesive1Weight;
@Column(name = "AUX_ADHESIVE2_WEIGHT")
private String auxAdhesive2Weight;
@Column(name = "AUX_ADHESIVE_1")
private String auxAdhesive1;
@Column(name = "AUX_ADHESIVE_2")
private String auxAdhesive2;
@Column(name = "CT_WT_RANGE")
private String ctWtRange;
@Column(name = "DRIVE")
private String drive;
@Column(name = "DRIVE_WEIGHT")
private String driveWeight;
@Column(name = "FINISH_WT_ACCEPTABLE_RANGE")
private String finishWtAcceptableRange;
@Basic(optional = false)
@Column(name = "LAMINATOR")
private String laminator;
@Column(name = "LOWER_ADHESIVE")
private String lowerAdhesive;
@Column(name = "LOWER_ADHESIVE_WEIGHT")
private String lowerAdhesiveWeight;
@Column(name = "LOWER_AUX_WEIGHT")
private String lowerAuxWeight;
@Column(name = "LOWER_AUXILLIARY")
private String lowerAuxilliary;
@Column(name = "LOWER_UNWIND")
private String lowerUnwind;
@Column(name = "LOWER_UNWIND_WEIGHT")
private String lowerUnwindWeight;
@Column(name = "TARGET_CT_WEIGHT")
private String targetCtWeight;
@Column(name = "TARGET_TOTAL_FINISHED_WEIGHT")
private String targetTotalFinishedWeight;
@Column(name = "TRIAL_DATE")
private String trialDate;
@Basic(optional = false)
@Column(name = "TRIALNO")
private String trialno;
@Lob
@Column(name = "TRIAL_NOTES")
private String trialNotes;
@Column(name = "TRIAL_START_TIME")
private String trialStartTime;
@Column(name = "UPPER_ADHESIVE")
private String upperAdhesive;
@Column(name = "UPPER_ADHESIVE_WEIGHT")
private String upperAdhesiveWeight;
@Column(name = "UPPER_AUX_WEIGHT")
private String upperAuxWeight;
@Column(name = "UPPER_AUXILLIARY")
private String upperAuxilliary;
@Column(name = "UPPER_UNWIND")
private String upperUnwind;
@Column(name = "UPPER_UNWIND_WEIGHT")
private String upperUnwindWeight;
@Column(name = "YARN")
private String yarn;
@Column(name = "YARN_WEIGHT")
private String yarnWeight;
@OneToMany(cascade={CascadeType.ALL}, mappedBy="trialId", targetEntity=TrialCtWtCheck.class, fetch= FetchType.EAGER)
//    @JoinColumn(name="ID")
private List<TrialCtWtCheck> trialCtWtCheckList;
public List<TrialCtWtCheck> getTrialCtWtCheckList() {
    return trialCtWtCheckList;
}

public void setTrialCtWtCheckList(List<TrialCtWtCheck> trialCtWtCheckList) {
    this.trialCtWtCheckList = trialCtWtCheckList;
}

public Trial() {
    super();
}

public Trial(Trial t) {
   //        this.trial_Id = t.getTrialId();
        this.auxAdhesive1Weight = t.getAuxAdhesive1Weight();
    this.auxAdhesive2Weight = t.getAuxAdhesive2Weight();
    this.auxAdhesive1 = t.getAuxAdhesive1();
    this.auxAdhesive2 = t.getAuxAdhesive2();
    this.ctWtRange = t.getCtWtRange();
    this.drive = t.getDrive();
    this.driveWeight = t.getDriveWeight();
    this.finishWtAcceptableRange = t.getFinishWtAcceptableRange();
    this.laminator = t.getLaminator();
    this.lowerAdhesive = t.getLowerAdhesive();
    this.lowerAdhesiveWeight = t.getLowerAdhesiveWeight();
    this.lowerAuxWeight = t.getLowerAuxWeight();
    this.lowerAuxilliary = t.getLowerAuxilliary();
    this.lowerUnwind = t.getLowerUnwind();
    this.lowerUnwindWeight = t.getLowerUnwindWeight();
    this.targetCtWeight = t.getTargetCtWeight();
    this.targetTotalFinishedWeight = t.targetTotalFinishedWeight;
    this.trialDate = t.getTrialDate();
    this.trialno = t.getTrialno();
    this.trialNotes = t.getTrialNotes();
    this.trialStartTime = t.getTrialStartTime();
    this.upperAdhesive = t.getUpperAdhesive();
    this.upperAdhesiveWeight = t.getUpperAdhesiveWeight();
    this.upperAuxWeight = t.getUpperAuxWeight();
    this.upperAuxilliary = t.getUpperAuxilliary();
    this.upperUnwind = t.getUpperUnwind();
    this.upperUnwindWeight = t.getUpperUnwindWeight();
    this.yarn = t.getYarn();
    this.yarnWeight = t.getYarnWeight();
    this.trialCtWtCheckList = t.getTrialCtWtCheckList();
}

...  and getters and setters....

} 
```

和 TrialCtWtCheck：

```
package com.lamtec.newtrial.service;

import java.io.Serializable;
import javax.persistence.Basic;
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.JoinColumn;
import javax.persistence.ManyToOne;
import javax.persistence.NamedQueries;
import javax.persistence.NamedQuery;
import javax.persistence.Table;
import javax.xml.bind.annotation.XmlRootElement;

@Entity
@Table(name = "TrialCtWtCheck")
@XmlRootElement

public class TrialCtWtCheck implements Serializable {
private static final long serialVersionUID = 1L;
// @Max(value=?)  @Min(value=?)//if you know range of your decimal fields consider using these annotations to enforce field validation
@Id
@Basic(optional = false)
@Column(name = "ID")
@GeneratedValue(strategy = GenerationType.AUTO)
private Long id;
@Column(name = "COAT_WEIGHT")
private String coatWeight;
@Column(name = "FINISHED_MATERIAL_WT")
private String finishedMaterialWt;
@Column(name = "RAW_MATERIAL_TOT")
private String rawMaterialTot;
@ManyToOne
@JoinColumn(name="TRIAL_ID")
private Trial trialId;
public Trial getTrialId() {
    return trialId;
}

public void setTrialId(Trial trialId) {
    this.trialId = trialId;
}

public TrialCtWtCheck() {
    super();
}

public TrialCtWtCheck(Long id, String coatWeight, String finishedMaterialWt, String rawMaterialTot, Trial trialId) {
    this.id = id;
    this.coatWeight = coatWeight;
    this.finishedMaterialWt = finishedMaterialWt;
    this.rawMaterialTot = rawMaterialTot;
}

public TrialCtWtCheck(Long id) {
    this.id = id;
}

public Long getId() {
    return id;
}

public void setId(Long id) {
    this.id = id;
}

public String getCoatWeight() {
    return coatWeight;
}

public void setCoatWeight(String coatWeight) {
    this.coatWeight = coatWeight;
}

public String getFinishedMaterialWt() {
    return finishedMaterialWt;
}

public void setFinishedMaterialWt(String finishedMaterialWt) {
    this.finishedMaterialWt = finishedMaterialWt;
}

public String getRawMaterialTot() {
    return rawMaterialTot;
}

public void setRawMaterialTot(String rawMaterialTot) {
    this.rawMaterialTot = rawMaterialTot;
}

@Override
public int hashCode() {
    int hash = 0;
    hash += (id != null ? id.hashCode() : 0);
    return hash;
}

@Override
public boolean equals(Object object) {
    // TODO: Warning - this method won't work in the case the id fields are not set
    if (!(object instanceof TrialCtWtCheck)) {
        return false;
    }
    TrialCtWtCheck other = (TrialCtWtCheck) object;
    if ((this.id == null && other.id != null) || (this.id != null && !this.id.equals(other.id))) {
        return false;
    }
    return true;
}

@Override
public String toString() {
    return "com.lamtec.newtrials.entity.TrialCtWtCheck[ id=" + id + " ]";
}

} 
```

如下所示的存储库文件：

```
package com.lamtec.newtrial.service.repository;

import com.lamtec.newtrial.service.Trial;
import org.springframework.data.repository.CrudRepository;

public interface TrialRepository extends CrudRepository<Trial, Long> {

} 
```

我的服务：

```
package com.lamtec.newtrial.service;

import com.lamtec.newtrial.service.repository.TrialRepository;
import java.util.List;
import javax.inject.Inject;
import javax.persistence.EntityManager;
import javax.persistence.PersistenceContext;
import javax.persistence.Query;
import org.springframework.stereotype.Repository;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

@Service
@Repository
@Transactional(readOnly=true)
public class TrialServiceImpl implements TrialService {
  @Inject private TrialRepository trialRepository;

  @Override
  public void addTrial(Trial trial) {
      trialRepository.save(trial);
  }

  @Override
  @Transactional(readOnly=true)
  public List<Trial> listTrials() {
      return (List<Trial>)trialRepository.findAll();
  }
  @Override
  public Trial findTrial(Long Id) {
      return trialRepository.findOne(Id);
  }

  @Override
  @Transactional(readOnly=false)
  public void updateTrial(Trial trial) {
      trialRepository.save(trial);
  }

} 
```

war 文件在 GlassFish 3.1.2.2 服务器上成功构建和部署。我的开发环境是 NetBeans 7.2。

当我针对该服务运行我的客户端时，我得到以下堆栈跟踪：

```
org.springframework.remoting.RemoteAccessException: Could not deserialize result from HTTP invoker remote service [http://localhost:8080/NewTrialServer/new-trial.service]; nested exception is java.lang.ClassNotFoundException: org.springframework.transaction.CannotCreateTransactionException
at org.springframework.remoting.httpinvoker.HttpInvokerClientInterceptor.convertHttpInvokerAccessException(HttpInvokerClientInterceptor.java:208)
at org.springframework.remoting.httpinvoker.HttpInvokerClientInterceptor.invoke(HttpInvokerClientInterceptor.java:145)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
at $Proxy7.listTrials(Unknown Source)
at com.lamtec.newtrialclient.app.TrialsUIPresenter$1.call(TrialsUIPresenter.java:540)
at com.lamtec.newtrialclient.app.TrialsUIPresenter$1.call(TrialsUIPresenter.java:536)
at javafx.concurrent.Task$TaskCallable.call(Task.java:1229)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
at java.util.concurrent.FutureTask.run(FutureTask.java:166)
at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.ClassNotFoundException: org.springframework.transaction.CannotCreateTransactionException
at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Class.java:264)
at java.io.ObjectInputStream.resolveClass(ObjectInputStream.java:622)
at org.springframework.core.ConfigurableObjectInputStream.resolveClass(ConfigurableObjectInputStream.java:79)
at java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java:1593)
at java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1514)
at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1750)
at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1347)
at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1964)
at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1888)
at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1771)
at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1347)
at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1964)
at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1888)
at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1771)
at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1347)
at java.io.ObjectInputStream.readObject(ObjectInputStream.java:369)
at org.springframework.remoting.httpinvoker.AbstractHttpInvokerRequestExecutor.doReadRemoteInvocationResult(AbstractHttpInvokerRequestExecutor.java:290)
at org.springframework.remoting.httpinvoker.AbstractHttpInvokerRequestExecutor.readRemoteInvocationResult(AbstractHttpInvokerRequestExecutor.java:241)
at org.springframework.remoting.httpinvoker.CommonsHttpInvokerRequestExecutor.doExecuteRequest(CommonsHttpInvokerRequestExecutor.java:143)
at org.springframework.remoting.httpinvoker.AbstractHttpInvokerRequestExecutor.executeRequest(AbstractHttpInvokerRequestExecutor.java:136)
at org.springframework.remoting.httpinvoker.HttpInvokerClientInterceptor.executeRequest(HttpInvokerClientInterceptor.java:192)
at org.springframework.remoting.httpinvoker.HttpInvokerClientInterceptor.executeRequest(HttpInvokerClientInterceptor.java:174)
at org.springframework.remoting.httpinvoker.HttpInvokerClientInterceptor.invoke(HttpInvokerClientInterceptor.java:142)
... 9 more 
```

我在堆栈跟踪中没有看到的一件事，我在客户端和服务器之间的有线通信中看到的是：

```
 4317 [Thread-4] DEBUG httpclient.wire.content  - << "Exception Description: Cannot use an EntityTransaction while using JTA." 
```

这是新的堆栈跟踪：

```
org.springframework.remoting.RemoteAccessException: Could not deserialize result from HTTP invoker remote service [http://localhost:8080/NewTrialServer/new-trial.service]; nested exception is java.lang.ClassNotFoundException: org.springframework.transaction.CannotCreateTransactionException
at org.springframework.remoting.httpinvoker.HttpInvokerClientInterceptor.convertHttpInvokerAccessException(HttpInvokerClientInterceptor.java:208)
at org.springframework.remoting.httpinvoker.HttpInvokerClientInterceptor.invoke(HttpInvokerClientInterceptor.java:145)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
at $Proxy7.listTrials(Unknown Source)
at com.lamtec.newtrialclient.app.TrialsUIPresenter$1.call(TrialsUIPresenter.java:540)
at com.lamtec.newtrialclient.app.TrialsUIPresenter$1.call(TrialsUIPresenter.java:536)
at javafx.concurrent.Task$TaskCallable.call(Task.java:1229)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
at java.util.concurrent.FutureTask.run(FutureTask.java:166)
at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.ClassNotFoundException: org.springframework.transaction.CannotCreateTransactionException
at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Class.java:264)
at java.io.ObjectInputStream.resolveClass(ObjectInputStream.java:622)
at org.springframework.core.ConfigurableObjectInputStream.resolveClass(ConfigurableObjectInputStream.java:79)
at java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java:1593)
at java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1514)
at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1750)
at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1347)
at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1964)
at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1888)
at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1771)
at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1347)
at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1964)
at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1888)
at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1771)
at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1347)
at java.io.ObjectInputStream.readObject(ObjectInputStream.java:369)
at org.springframework.remoting.httpinvoker.AbstractHttpInvokerRequestExecutor.doReadRemoteInvocationResult(AbstractHttpInvokerRequestExecutor.java:290)
at org.springframework.remoting.httpinvoker.AbstractHttpInvokerRequestExecutor.readRemoteInvocationResult(AbstractHttpInvokerRequestExecutor.java:241)
at org.springframework.remoting.httpinvoker.CommonsHttpInvokerRequestExecutor.doExecuteRequest(CommonsHttpInvokerRequestExecutor.java:143)
at org.springframework.remoting.httpinvoker.AbstractHttpInvokerRequestExecutor.executeRequest(AbstractHttpInvokerRequestExecutor.java:136)
at org.springframework.remoting.httpinvoker.HttpInvokerClientInterceptor.executeRequest(HttpInvokerClientInterceptor.java:192)
at org.springframework.remoting.httpinvoker.HttpInvokerClientInterceptor.executeRequest(HttpInvokerClientInterceptor.java:174)
at org.springframework.remoting.httpinvoker.HttpInvokerClientInterceptor.invoke(HttpInvokerClientInterceptor.java:142)
... 9 more 
```

在服务器和 IDE（我在其中启动客户端）之间的消息流量是：

```
"Could not open JPA EntityManager for transaction" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T08:06:13.807

看起来您的交易类型不匹配，可能是由于配置。我认为您正在使用 JTA 和基于实体的事务的组合。这整个区域有点混乱，但我认为除非您查询多个数据库等，否则您可以将 JTA 排除在外，而只需使用简单的基于实体的事务管理（基本上是标准的数据库级事务）。

我对 EclipseLink 了解不多，但尝试使用使用 RESOURCE_LOCAL 的 persistence.xml。也许是这样的：[http ://www.vogella.com/articles/JavaPersistenceAPI/article.html#example_persistenceunit](http://www.vogella.com/articles/JavaPersistenceAPI/article.html#example_persistenceunit)

如果您真的想使用完整的 JTA，那么您可能可以保留您的 persistence.xml 并更改 EntityManager 的配置以使用 JtaTransactionManager。为此，您必须在网上搜索更多详细信息。

作为旁注，“ClassNotFoundException”有点误导。这只是客户端尝试反序列化来自服务器的真正异常时抛出的内容。真正的例外是CannotCreateTransactionException，它通过线路发送到您的客户端，但客户端在其类路径中没有此JAR，因此无法反序列化它，然后您会看到ClassNotFoundException。

在标准设置中，我认为您会在服务器日志中看到真正的异常。如果没有，您可以在服务器方法的主体周围添加一个 try-catch，捕获所有内容并记录它（或围绕您的服务类包装一个方面，以神奇地做到这一点）。

或者，您可以将 spring 持久性和 hibernate jar 添加到客户端的类路径（通过将它们添加到 POM）。这会增加客户端的膨胀，但允许客户端反序列化异常，然后记录完整的堆栈跟踪等。

希望有帮助，宗斯基

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T17:52:42.897

```
Caused by: java.lang.ClassNotFoundException: org.springframework.transaction.CannotCreateTransactionException 
```

似乎创建交易时出错。这可能是由于`persistance.xml`或 glassfish 配置文件中的配置错误。

```
<persistence-unit name="NewTrialsPU" transaction-type="JTA"> 
```

`EntityManagerFactory`无法从 JNDI 找到事务。我没有那么多用玻璃鱼。但这应该是找到实际问题的线索。应该有某种方法来验证是否在 glassfish 中创建了 JNDI 资源并相应地使用它。

**编辑**

对于快速解决方案，请考虑使用`transaction-type="RESOURCE_LOCAL"`并提供相关`database connection`的数据库`username`信息`password`应该会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-24T12:16:17.897

根据异常，您的配置似乎与`perrsistence.xml`JTA`Application-context.xml`事务不兼容。你可以看到下面的配置，我在 JBoss AS 服务器中使用了 JpaTransaction 管理器来处理事务和数据源。

```
<bean id="dataSource" class="org.springframework.jndi.JndiObjectFactoryBean">
        <property name="jndiName" value="java:jboss/datasources/testDS" />
    </bean>

    <bean id="entityManagerFactory"
        class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="persistenceXmlLocation" value="classpath:/META-INF/persistence.xml" />
        <property name="persistenceUnitName" value="restUnit" />
        <property name="jpaVendorAdapter">
            <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter" />
        </property>
        <property name="persistenceUnitManager">
            <bean
                class="org.springframework.orm.jpa.persistenceunit.DefaultPersistenceUnitManager">
                <property name="defaultDataSource" ref="dataSource" />
            </bean>
        </property>
        <property name="dataSource" ref="dataSource" />
    </bean>

    <bean class="org.springframework.orm.jpa.JpaTransactionManager"
        id="transactionManager">
        <property name="entityManagerFactory" ref="entityManagerFactory" />
    </bean>

    <context:spring-configured /> 
```

# javascript - 将 rgb 字符串转换为十进制

> ID：11674723
> 
> 赞同：2
> 
> 时间：2012-07-26T17:27:10.307
> 
> 标签：javascript

我有字符串`'rgb(255,0,0)'`，需要获取小数数组。

以下片段似乎给了我想要的结果。有什么建议、顾虑、更好的方法吗？

```
var arrRGB = pagedefault.nodelist.style.color.match(/\d+/g); //gives me ["255","0","0"]
arrRGB[0] = Number(arrRGB[0]) / 255;
arrRGB[1] = Number(arrRGB[1]) / 255;
arrRGB[2] = Number(arrRGB[2]) / 255; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T17:39:09.770

```
'rgb(255,0,0)'.match(/\d+/g).map(Number) // ==> [255, 0, 0] 
```

如果您有`map`实现，则可以使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T17:38:38.273

我会将部分逻辑包装在一个`for`循环中：

```
var arrRGB = pagedefault.nodelist.style.color.match(/\d+/g);
for (var i = 0; i < arrRGB.length; i++) {  
    arrRGB[i] = Number(arrRGB[i]) / 255;
} 
```

否则，这看起来不错。

# c++ - 标准::向量 破坏抛出 sigabrt

> ID：11674733
> 
> 赞同：6
> 
> 时间：2012-07-26T17:27:52.810
> 
> 标签：c++, vector, sigabrt

我有一个`std::vector<double>`GDB 在其中显示它包含这些值：

```
Wph <5 items>            vector<double>
    [0] 10.750281685547618      double
    [1] 0.0053087812248281997   double
    [2] 4.2807534148705719e-08  double
    [3] 5.7427427663508097e-07  double
    [4] 0                       double 
```

在函数退出时自动销毁时，它会抛出一个 SIGABRT。

```
0   raise   raise.c 64  0x7fffeec5ad05  
1   abort   abort.c 92  0x7fffeec5eab6  
2   __libc_message  libc_fatal.c    189 0x7fffeec93d7b  
3   malloc_printerr malloc.c    6283    0x7fffeec9fa8f  
4   _int_free   malloc.c    4795    0x7fffeec9fa8f  
5   __libc_free malloc.c    3738    0x7fffeeca38e3  
6   __gnu_cxx::new_allocator<double>::deallocate    new_allocator.h 95  0x457828    
7   std::_Vector_base<double, std::allocator<double> >::_M_deallocate   stl_vector.h    146 0x45567e    
8   std::_Vector_base<double, std::allocator<double> >::~_Vector_base   stl_vector.h    132 0x4542b3    
9   std::vector<double, std::allocator<double> >::~vector   stl_vector.h    314 0x453a96 
```

这是怎么回事？

```
 int data = 0;
  vector<double> Wph;
  Wph.resize(mydata.data.size());

  for (size_t t = 0; t < mydata.t.size(); t++)
  {
    double t0 = (PI / 180.0) * mydata.t[i];

    for (size_t p = 0; p < mydata.p.size(); p++)
    {

      double _Wph = 5; //arbitrary math
      Wph[data] = _Wph;

      data++;
    }
  }

struct mydata
{
  vector<double> t, p;
  vector<point> data;
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T17:39:03.613

请确定`mydata.data.size() == mydata.t.size() * mydata.p.size()`。

您将`mydata.t.size() * mydata.p.size()`值分配到带有`mydata.data.size()`元素的向量中。这是一个数组绑定写入。

也许你应该试试`vector::push_back()`。那是，

```
vector<double> Wph;

for (size_t t = 0; t < mydata.t.size(); t++)
{
  double t0 = (PI / 180.0) * mydata.t[i];

  for (size_t p = 0; p < mydata.p.size(); p++)
  {
    double _Wph = 5; //arbitrary math
    Wph.push_back(_Wph);
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T17:44:50.627

> 数据 = 5，p = 2，t = 3

```
 for (size_t t = 0; t < mydata.t.size(); t++)
  {
    double t0 = (PI / 180.0) * mydata.t[i];

    for (size_t p = 0; p < mydata.p.size(); p++)
    {

      double _Wph = 5; //arbitrary math
      Wph[data] = _Wph;

      data++;
    }
  } 
```

所以，你有双循环。而且您有 6 次迭代...因此内存损坏将在 t == 2 和 p == 1 上，因为`Wph[5] = _Wph`如果 Wph 的大小 == 5 为 4，您将尝试执行 Wph 的最大合法索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T18:01:46.190

我怀疑你让 Wph 太小了。我们不知道是什么`mydata.data.size()`，但我猜它太小了。

从代码中，看起来正确的大小是

```
 Wph.resize(mydata.p.size() * mydata.t.size()); 
```

然而，在 C++ 中，我们尝试编写防御性代码，因此这样的错误更难犯。

```
 vector<double> Wph;

  for (size_t t = 0; t < mydata.t.size(); t++)
  {
    double t0 = (PI / 180.0) * mydata.t[t];

    for (size_t p = 0; p < mydata.p.size(); p++)
    {
      double _Wph = 5; //arbitrary math
      Wph.push_back(_Wph);
    }
  } 
```

如果你必须预先分配大小，那么至少改变

```
 Wph[data] = _Wph; 
```

到

```
 Wph.at(data) = _Wph; 
```

at() 与 [] 的工作方式相同，除了 at() 检查您是否未超出数组末尾并引发异常。

# r - 如何在基本图形图中将美元符号添加到轴标签？

> ID：11674737
> 
> 赞同：3
> 
> 时间：2012-07-26T17:25:00.373
> 
> 标签：r, plot, label

我在 R 的散点图中绘制了一些数字，并希望在数字中添加美元符号。我该怎么做？

```
x <- = c(100,200,300,400,500)
boxplot(x) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-26T18:12:37.020

快速的 google 搜索显示您需要`labels`在`axis`. 然后你可以`sprintf`用来控制格式：

```
boxplot(x, yaxt="n")
axis(2, at=axTicks(2), labels=sprintf("$%s", axTicks(2))) 
```

![在此处输入图像描述](../Images/6a5673ea2cb9623b9348e6dadbb463f2.png)

* * *

要旋转标签，请使用参数`las`：

```
boxplot(x, yaxt="n")
axis(2, at=axTicks(2), labels=sprintf("$%s", axTicks(2)), las=1) 
```

![在此处输入图像描述](../Images/d4552753fccf3f0f98fd1f9d6ee3032a.png)

# ruby-on-rails - 推送到 Heroku 时出现 linecache19 错误

> ID：11674739
> 
> 赞同：0
> 
> 时间：2012-07-26T17:28:25.117
> 
> 标签：ruby-on-rails, heroku

我过去在尝试执行 git push Heroku master 时遇到以下错误，这是由于

```
gem 'ruby-debug19', :require => 'ruby-debug' 
```

在我的 Gem 文件中。

```
An error occurred while installing linecache19 (0.5.12), and Bundler cannot continue.
   Make sure that `gem install linecache19 -v '0.5.12'` succeeds before bundling.

 !     Failed to install gems via Bundler.

 !     Heroku push rejected, failed to compile Ruby/rails app 
```

注释掉 gem 并运行 bundle install 并重新推送通常可以解决问题，但这次不行。

Linecache19 似乎是 ruby​​-debug19 的依赖项，所以我不明白为什么当我从 Gem 文件中删除 ruby​​-debug19 时 Heroku 试图安装 linecache19

我的 gemfile.lock 文件如下：

```
specs:
activeadmin (0.4.3)
  bourbon (>= 1.0.0)
  devise (>= 1.1.2)
  fastercsv
  formtastic (>= 2.0.0)
  inherited_resources (> 0)
  jquery-rails (>= 1.0.0)
  kaminari (>= 0.13.0)
  meta_search (>= 0.9.2)
  rails (>= 3.0.0)
  sass (>= 3.1.0)

GEM
remote: https://rubygems.org/
specs:
actionmailer (3.2.1)
  actionpack (= 3.2.1)
  mail (~> 2.4.0)
actionpack (3.2.1)
  activemodel (= 3.2.1)
  activesupport (= 3.2.1)
  builder (~> 3.0.0)
  erubis (~> 2.7.0)
  journey (~> 1.0.1)
  rack (~> 1.4.0)
  rack-cache (~> 1.1)
  rack-test (~> 0.6.1)
  sprockets (~> 2.1.2)
activemodel (3.2.1)
  activesupport (= 3.2.1)
  builder (~> 3.0.0)
activerecord (3.2.1)
  activemodel (= 3.2.1)
  activesupport (= 3.2.1)
  arel (~> 3.0.0)
  tzinfo (~> 0.3.29)
activeresource (3.2.1)
  activemodel (= 3.2.1)
  activesupport (= 3.2.1)
activesupport (3.2.1)
  i18n (~> 0.6)
  multi_json (~> 1.0)
arel (3.0.0)
bcrypt-ruby (3.0.1)
bourbon (1.4.0)
  sass (>= 3.1)
builder (3.0.0)
coffee-rails (3.2.2)
  coffee-script (>= 2.2.0)
  railties (~> 3.2.0)
coffee-script (2.2.0)
  coffee-script-source
  execjs
coffee-script-source (1.2.0)
commonjs (0.2.6)
devise (2.0.0)
  bcrypt-ruby (~> 3.0)
  orm_adapter (~> 0.0.3)
  railties (~> 3.1)
  warden (~> 1.1)
erubis (2.7.0)
execjs (1.3.0)
  multi_json (~> 1.0)
fastercsv (1.5.4)
foreigner (1.1.2)
  activerecord (>= 3.0.0)
formtastic (2.1.1)
  actionpack (~> 3.0)
has_scope (0.5.1)
hike (1.2.1)
i18n (0.6.0)
inherited_resources (1.3.1)
  has_scope (~> 0.5.0)
  responders (~> 0.6)
journey (1.0.1)
jquery-rails (2.0.0)
  railties (>= 3.2.0.beta, < 5.0)
  thor (~> 0.14)
json (1.6.5)
kaminari (0.13.0)
  actionpack (>= 3.0.0)
  activesupport (>= 3.0.0)
  railties (>= 3.0.0)
less (2.2.1)
  commonjs (~> 0.2.6)
less-rails (2.2.3)
  actionpack (>= 3.1)
  less (~> 2.2.0)
libv8 (3.3.10.4)
macaddr (1.5.0)
  systemu (>= 2.4.0)
mail (2.4.1)
  i18n (>= 0.4.0)
  mime-types (~> 1.16)
  treetop (~> 1.4.8)
meta_search (1.1.3)
  actionpack (~> 3.1)
  activerecord (~> 3.1)
  activesupport (~> 3.1)
  polyamorous (~> 0.5.0)
mime-types (1.17.2)
multi_json (1.0.4)
orm_adapter (0.0.6)
pg (0.12.2)
polyamorous (0.5.0)
  activerecord (~> 3.0)
polyglot (0.3.3)
rack (1.4.1)
rack-cache (1.1)
  rack (>= 0.4)
rack-ssl (1.3.2)
  rack
rack-test (0.6.1)
  rack (>= 1.0)
rails (3.2.1)
  actionmailer (= 3.2.1)
  actionpack (= 3.2.1)
  activerecord (= 3.2.1)
  activeresource (= 3.2.1)
  activesupport (= 3.2.1)
  bundler (~> 1.0)
  railties (= 3.2.1)
railties (3.2.1)
  actionpack (= 3.2.1)
  activesupport (= 3.2.1)
  rack-ssl (~> 1.3.2)
  rake (>= 0.8.7)
  rdoc (~> 3.4)
  thor (~> 0.14.6)
rake (0.9.2.2)
rdoc (3.12)
  json (~> 1.4)
responders (0.9.0)
  railties (~> 3.1)
sass (3.1.14)
sass-rails (3.2.4)
  railties (~> 3.2.0)
  sass (>= 3.1.10)
  tilt (~> 1.3)
sprockets (2.1.2)
  hike (~> 1.2)
  rack (~> 1.0)
  tilt (~> 1.1, != 1.3.0)
systemu (2.4.2)
therubyracer (0.10.1)
  libv8 (~> 3.3.10)
thor (0.14.6)
tilt (1.3.3)
treetop (1.4.10)
  polyglot
  polyglot (>= 0.3.1)
twitter-bootstrap-rails (2.1.1)
  actionpack (>= 3.1)
  less-rails (~> 2.2.2)
  railties (>= 3.1)
  therubyracer (= 0.10.1)
tzinfo (0.3.31)
uglifier (1.2.3)
  execjs (>= 0.3.0)
  multi_json (>= 1.0.2)
uuid (2.3.5)
  macaddr (~> 1.0)
warden (1.1.0)
  rack (>= 1.0)

PLATFORMS
ruby

DEPENDENCIES
activeadmin!
coffee-rails (~> 3.2.1)
devise (= 2.0.0)
foreigner
jquery-rails (>= 1.0.12)
pg
rails (= 3.2.1)
sass-rails (~> 3.2.3)
twitter-bootstrap-rails
uglifier (>= 1.0.3)
uuid 
```

为什么 Heroku 仍在尝试安装 linecache19，我该如何解决这个问题？

例如，我可以清空我的 Heroku 主人并从头开始重新推送吗？（这不是生产，所以我买得起）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T13:11:09.397

将调试 gem 放入 Gemfile 中的 :development 组；我不知道有任何方法可以远程调试 Heroku 应用程序，因此在 Heroku 上以“生产”模式部署它们是没有意义的。例子：

```
group :development do
  gem "ruby-debug-base19x"
end 
```

# tridion - Tridion UGC 匿名用户保存到 ID 为 null 的 UGC 数据库

> ID：11674743
> 
> 赞同：1
> 
> 时间：2012-07-26T17:28:32.353
> 
> 标签：tridion, tridion-2011, ugc

**注意与**[Tridion UGC 评论](https://stackoverflow.com/questions/10870068/tridion-ugc-comment-shows-author-as-null)完全相同的问题将作者显示为空

当发布来自演示网站的评论时，用户的 ID 为 null。这会导致下一条评论显示为来自第一个发表评论并且 ID 为 null 的用户。

cd 核心日志文件显示`AnonymousPostClaimProcessor`正在使用`tracking id`.

```
DEBUG ClaimStore - put: uri=taf:claim:contentdelivery:webservice:user, value=tridion_2151731a-97d2-4a90-800f-bee20074b970
TRACE ODataInputParser - Parsing following queryString: /Comments
TRACE BasePostClaimProcessor - User ID: tridion_2151731a-97d2-4a90-800f-bee20074b970, Request URI: /odata.svc/Comments
DEBUG PostAllowedByEveryoneClaimProcessor - Allowing user 'tridion_2151731a-97d2-4a90-800f-bee20074b970' to post on: /odata.svc/Comments
DEBUG ClaimStore - put: uri=taf:claim:contentdelivery:webservice:post:allowed, value=true
DEBUG ClaimStore - put: uri=taf:response:cookie:generation, value=true
DEBUG WebContext - setCurrentClaimStore: com.tridion.ambientdata.dotnet.DotNetClaimStore@74002515, thread: Thread-1
DEBUG ClaimStore - put: uri=taf:request:uri, value=/odata.svc/Comments
DEBUG ClaimStore - put: uri=taf:request:full_url, value=http://staging:8080/odata.svc/Comments
DEBUG ClaimStore - put: uri=taf:request:headers, value={content-type=[Ljava.lang.String;@3582c132, connection=[Ljava.lang.String;@1b59d510, host=[Ljava.lang.String;@26b31b77, accept=[Ljava.lang.String;@38d0357a, content-length=[Ljava.lang.String;@6d66f9b9}
DEBUG ClaimStore - put: uri=taf:request:cookies, value={}
DEBUG ClaimStore - put: uri=taf:request:parameters, value={CONTENT_TYPE=[Ljava.lang.String;@39518cc, $orderby=[Ljava.lang.String;@318efaea, QUERY_STRING=[Ljava.lang.String;@21fb3211, $filter=[Ljava.lang.String;@72940b84, $expand=[Ljava.lang.String;@558041e0, $top=[Ljava.lang.String;@576504fa, $skip=[Ljava.lang.String;@2929e5e9}
DEBUG ClaimStore - put: uri=taf:server:variables, value={REMOTE_USER=, PATH_TRANSLATED=C:\inetpub\staging_cd_webservices\odata.svc, SERVER_PORT=8080, SCRIPT_NAME=/odata.svc, REMOTE_ADDR=127.0.0.1, AUTH_TYPE=, SERVER_PROTOCOL=HTTP/1.1, REQUEST_METHOD=GET, DOCUMENT_ROOT=C:\inetpub\staging_cd_webservices, REMOTE_HOST=127.0.0.1, SERVER_NAME=staging, SECURE=false}
DEBUG ClaimStore - put: uri=taf:session:id, value=tridion_546acbc8-a478-45cd-80fa-5d93bc10481d
DEBUG ClaimStore - put: uri=taf:tracking:id, value=tridion_08092308-7e3b-47c7-9524-79497daee2e2
DEBUG ClaimStore - put: uri=taf:session:attributes, value={Tridion.ContentDelivery.AmbientData.ClaimStore=Tridion.ContentDelivery.AmbientData.ClaimStore}
DEBUG AllowAnonymousPostClaimProcessor - No external user specified, using tracking id. 
```

我的ugc环境墨盒配置如下：

```
<ClaimProcessorDefinitions>
    <!-- Allows anonymous posts. Disable when using a login system. -->
    <ClaimProcessorDefinition Uri="taf:claimprocessor:webservice:ugc:anonymous"
                              ImplementationClass="com.tridion.ugc.odata.claimprocessor.AllowAnonymousPostClaimProcessor"
                              Description="Claim processor that allows an anonymous post.">
        <RequestStart>
            <OutputClaims>
                <ClaimDefinition Uri="taf:claim:contentdelivery:webservice:user"/>
            </OutputClaims>
        </RequestStart>
    </ClaimProcessorDefinition>
    <!-- Post allowed by everyone. -->
    <ClaimProcessorDefinition Uri="taf:claimprocessor:webservice:ugc:post"
                              ImplementationClass="com.tridion.ugc.odata.claimprocessor.PostAllowedByEveryoneClaimProcessor"
                              Description="Claim processor that allows a post.">
        <RequestStart>
            <InputClaims>
                <ClaimDefinition Uri="taf:claim:contentdelivery:webservice:user"/>
            </InputClaims>
            <OutputClaims>
                <ClaimDefinition Uri="taf:claim:contentdelivery:webservice:post:allowed"/>
            </OutputClaims>
        </RequestStart>
    </ClaimProcessorDefinition>
</ClaimProcessorDefinitions> 
```

cm ugc Web 服务的 ugc 墨盒配置是相同的，但会显示正确的 ID。

如果任何人都可以指导我到正确的配置文件进行验证，那就太好了。

**编辑 27/7**

演示文稿 cd ws 上的 ugc 环境墨盒配置如下，并定义了 AllowAnonymousPostClaimProcessor。

```
<?xml version="1.0" encoding="UTF-8"?>
<CartridgeDefinition Version="6.1" Uri="tcd:cartridge:ugc" Description="UGC cartridge."
                     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                     xsi:noNamespaceSchemaLocation="schemas/cd_ambient_cartridge_conf.xsd">
    <ClaimDefinitions>
        <ClaimDefinition Uri="taf:claim:contentdelivery:webservice:post:allowed" Scope="REQUEST"
                         Description="A flag where a POST is allowed to the UGC OData entities."/>
        <ClaimDefinition Uri="taf:claim:contentdelivery:webservice:user" Scope="REQUEST"
                         Description="The user posting to the OData service."/>
        <ClaimDefinition Uri="taf:claim:tracking:internalcontactid" Scope="REQUEST"
                         Description="The Audience Manager internal contact id."/>
        <ClaimDefinition Uri="taf:claim:tracking:updatedcontact:xml" Scope="REQUEST"
                         Description="The Audience Manager updated contact xml."/>
    </ClaimDefinitions>

    <ClaimProcessorDefinitions>
        <!-- Allows anonymous posts. Disable when using a login system. -->
        <ClaimProcessorDefinition Uri="taf:claimprocessor:webservice:ugc:anonymous"
                                  ImplementationClass="com.tridion.ugc.odata.claimprocessor.AllowAnonymousPostClaimProcessor"
                                  Description="Claim processor that allows an anonymous post.">
            <RequestStart>
                <OutputClaims>
                    <ClaimDefinition Uri="taf:claim:contentdelivery:webservice:user"/>
                </OutputClaims>
            </RequestStart>
        </ClaimProcessorDefinition>

        <!-- Post allowed by owners. -->
        <!--
        <ClaimProcessorDefinition Uri="taf:claimprocessor:webservice:ugc:post"
                                  ImplementationClass="com.tridion.ugc.odata.claimprocessor.PostAllowedByOwnerClaimProcessor"
                                  Description="Claim processor that determines if a post is allowed by checking if the user is the owner.">
            <RequestStart>
                <InputClaims>
                    <ClaimDefinition Uri="taf:claim:contentdelivery:webservice:user"/>
                </InputClaims>
                <OutputClaims>
                    <ClaimDefinition Uri="taf:claim:contentdelivery:webservice:post:allowed"/>
                </OutputClaims>
            </RequestStart>
        </ClaimProcessorDefinition>
        -->

        <!-- Post allowed by everyone. -->
        <ClaimProcessorDefinition Uri="taf:claimprocessor:webservice:ugc:post"
                                  ImplementationClass="com.tridion.ugc.odata.claimprocessor.PostAllowedByEveryoneClaimProcessor"
                                  Description="Claim processor that allows a post.">
            <RequestStart>
                <InputClaims>
                    <ClaimDefinition Uri="taf:claim:contentdelivery:webservice:user"/>
                </InputClaims>
                <OutputClaims>
                    <ClaimDefinition Uri="taf:claim:contentdelivery:webservice:post:allowed"/>
                </OutputClaims>
            </RequestStart>
        </ClaimProcessorDefinition>
    </ClaimProcessorDefinitions>
</CartridgeDefinition> 
```

以及请求的 POST 日志文件：

```
DEBUG ClaimStore - put: uri=taf:response:cookie:generation, value=true
DEBUG WebContext - setCurrentClaimStore: com.tridion.ambientdata.dotnet.DotNetClaimStore@29578426, thread: Thread-6
DEBUG ClaimStore - put: uri=taf:request:uri, value=/odata.svc/Comments
DEBUG ClaimStore - put: uri=taf:request:full_url, value=http://staging:8080/odata.svc/Comments
DEBUG ClaimStore - put: uri=taf:request:headers, value={expect=[Ljava.lang.String;@30a4effe, content-type=[Ljava.lang.String;@1c8825a5, host=[Ljava.lang.String;@2e5f8245, accept=[Ljava.lang.String;@6197cc, content-length=[Ljava.lang.String;@734d246}
DEBUG ClaimStore - put: uri=taf:request:cookies, value={}
DEBUG ClaimStore - put: uri=taf:request:parameters, value={CONTENT_TYPE=[Ljava.lang.String;@1cd8f55c, QUERY_STRING=[Ljava.lang.String;@67d479cf}
DEBUG ClaimStore - put: uri=taf:server:variables, value={REMOTE_USER=, PATH_TRANSLATED=C:\inetpub\staging_cd_webservices\odata.svc\Comments, SERVER_PORT=8080, SCRIPT_NAME=/odata.svc/Comments, REMOTE_ADDR=127.0.0.1, AUTH_TYPE=, SERVER_PROTOCOL=HTTP/1.1, REQUEST_METHOD=POST, DOCUMENT_ROOT=C:\inetpub\staging_cd_webservices, REMOTE_HOST=127.0.0.1, SERVER_NAME=staging, SECURE=false}
DEBUG ClaimStore - put: uri=taf:session:id, value=tridion_51f52143-1095-4585-9eb8-b01f95dff721
DEBUG ClaimStore - put: uri=taf:tracking:id, value=tridion_f409708f-4063-4eca-8c81-f140ba4a6568
DEBUG AllowAnonymousPostClaimProcessor - No external user specified, using tracking id.
DEBUG ClaimStore - put: uri=taf:claim:contentdelivery:webservice:user, value=tridion_f409708f-4063-4eca-8c81-f140ba4a6568
TRACE ODataInputParser - Parsing following queryString: /Comments
TRACE BasePostClaimProcessor - User ID: tridion_f409708f-4063-4eca-8c81-f140ba4a6568, Request URI: /odata.svc/Comments
DEBUG PostAllowedByEveryoneClaimProcessor - Allowing user 'tridion_f409708f-4063-4eca-8c81-f140ba4a6568' to post on: /odata.svc/Comments
DEBUG ClaimStore - put: uri=taf:claim:contentdelivery:webservice:post:allowed, value=true
DEBUG ClaimStore - put: uri=taf:response:cookie:generation, value=true
DEBUG WebContext - setCurrentClaimStore: com.tridion.ambientdata.dotnet.DotNetClaimStore@2e893a4a, thread: Thread-6
DEBUG ClaimStore - put: uri=taf:request:uri, value=/odata.svc/Comments
DEBUG ClaimStore - put: uri=taf:request:full_url, value=http://staging:8080/odata.svc/Comments
DEBUG ClaimStore - put: uri=taf:request:headers, value={expect=[Ljava.lang.String;@3351e824, content-type=[Ljava.lang.String;@465fadce, host=[Ljava.lang.String;@338bd37a, accept=[Ljava.lang.String;@20e90906, content-length=[Ljava.lang.String;@234f79cb}
DEBUG ClaimStore - put: uri=taf:request:cookies, value={ASP.NET_SessionId=wx00dumyccjnopshos2ucw4l}
DEBUG ClaimStore - put: uri=taf:request:parameters, value={CONTENT_TYPE=[Ljava.lang.String;@36c51089, QUERY_STRING=[Ljava.lang.String;@43c0ae76}
DEBUG ClaimStore - put: uri=taf:server:variables, value={REMOTE_USER=, PATH_TRANSLATED=C:\inetpub\staging_cd_webservices\odata.svc, SERVER_PORT=8080, SCRIPT_NAME=/odata.svc, REMOTE_ADDR=127.0.0.1, AUTH_TYPE=, SERVER_PROTOCOL=HTTP/1.1, REQUEST_METHOD=POST, DOCUMENT_ROOT=C:\inetpub\staging_cd_webservices, REMOTE_HOST=127.0.0.1, SERVER_NAME=staging, SECURE=false}
DEBUG ClaimStore - put: uri=taf:session:id, value=tridion_90269b03-0f48-4986-a607-ec04010a9161
DEBUG ClaimStore - put: uri=taf:tracking:id, value=tridion_9a97ffcb-7c38-41b6-95dd-8bd6d564a163
DEBUG ClaimStore - put: uri=taf:session:attributes, value={Tridion.ContentDelivery.AmbientData.ClaimStore=Tridion.ContentDelivery.AmbientData.ClaimStore}
DEBUG AllowAnonymousPostClaimProcessor - No external user specified, using tracking id.
DEBUG ClaimStore - put: uri=taf:claim:contentdelivery:webservice:user, value=tridion_9a97ffcb-7c38-41b6-95dd-8bd6d564a163
TRACE ODataInputParser - Parsing following queryString: /Comments
TRACE BasePostClaimProcessor - User ID: tridion_9a97ffcb-7c38-41b6-95dd-8bd6d564a163, Request URI: /odata.svc/Comments
DEBUG PostAllowedByEveryoneClaimProcessor - Allowing user 'tridion_9a97ffcb-7c38-41b6-95dd-8bd6d564a163' to post on: /odata.svc/Comments
DEBUG ClaimStore - put: uri=taf:claim:contentdelivery:webservice:post:allowed, value=true
DEBUG ODataService - ODATA.NET: Inserting entity on path: Comments
DEBUG WebContext - setCurrentClaimStore: com.tridion.ambientdata.dotnet.DotNetClaimStore@2e893a4a, thread: Thread-2
TRACE ODataInputParser - Parsing following queryString: Comments
DEBUG WritableCommentEntryService - Parsing comment: {d:{"Id":0,"ItemPublicationId":11,"ItemId":361,"ItemType":64,"CreationDate":"\/Date(1343385654263+60)\/","LastModifiedDate":"\/Date(1343385654263+60)\/","User":{"Id":null,"Name":"John Doe","EmailAddress":"bla@bla.com","ExternalId":null},"Content":"sdfsdfsdf","Moderator":null,"ModeratedDate":null,"Score":0,"Status":0}}.
DEBUG UGCConfigurationLoader - Attempt loading default storage configuration file
DEBUG WritableCommentEntryService - Storing comment: Comment [commentId=0, content=sdfsdfsdf, itemPublicationId=11, itemId=361, itemType=64, author=com.tridion.storage.ugc.UGCUser@2537e19e, creationDate=Fri Jul 27 11:40:54 BST 2012, lastModifiedDate=Fri Jul 27 11:40:54 BST 2012, moderatedDate=null, moderator=null, score=0, status=0].
DEBUG JPACommentDAO - Add comment to storage: Comment [commentId=0, content=sdfsdfsdf, itemPublicationId=11, itemId=361, itemType=64, author=com.tridion.storage.ugc.UGCUser@2537e19e, creationDate=Fri Jul 27 11:40:54 BST 2012, lastModifiedDate=Fri Jul 27 11:40:54 BST 2012, moderatedDate=null, moderator=null, score=0, status=0].
DEBUG JPAUserDAO - Searching for user with id null in storage.
TRACE JPABaseDAO - [ActionTimer] Query List Result time: 10275376 nanoseconds (10.275376 milliseconds)
DEBUG JPAUserDAO - User already in storage. No need to create new one. 
```

您可以在某些时候看到用户 ID 为空，在发布评论数据时已经如此。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T02:27:33.140

使用用户名客户端和 tridion 端进行验证

下面的代码应该在程序集（dll）中

```
Tridion side :
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Text.RegularExpressions;
using Tridion.ContentDelivery.UGC.WebService;
using Tridion.ContentDelivery.UGC.Web.Model;
using Tridion.ContentDelivery.UGC.Web.Utilities;
using Tridion.ContentDelivery.AmbientData;
using System.Configuration;

namespace PresentationLayer
{
        public class UGCWordsSpamFilter : SpamFilter
    {
        // Collect a list of disallowed words

        IList<string> spamWords = new List<string>();

        public UGCWordsSpamFilter()
        {
            bool hasExcludes = true;
            int i = 1;
            while (hasExcludes)
            {
                string spamFilterWord = ConfigurationSettings.AppSettings["Comment.SpamFilter.Exclude" + i];
                if (!string.IsNullOrEmpty(spamFilterWord))
                {
                    spamWords.Add(spamFilterWord);
                }
                else
                {
                    hasExcludes = false;
                }
                i++;
            }
        }

        /// <summary>
        /// Validate a comment.
        /// </summary>
        /// <param name="claimStore">The Claim Store from the current request.</param>
        /// <param name="comment">The comment to validate.</param>
        /// <returns>A valid comment.</returns>
        /// <exception cref="SpamFilterException">If comment is regarded as spam.</exception>
        public Comment ValidateComment(ClaimStore claimStore, Comment comment)
        {
            string commentContent = comment.Content;
            string userName = comment.User.Name;
            string emailAddress = comment.User.EmailAddress;
            if (String.IsNullOrEmpty(commentContent))
            {
                throw new SpamFilterException("Comment cannot be empty.");
            }
            else if (String.IsNullOrEmpty(userName))
            {
                throw new SpamFilterException("Username cannot be empty.");
            }
            else if (String.IsNullOrEmpty(emailAddress))
            {
                throw new SpamFilterException("User email address cannot be empty.");
            }
            else if (!CheckEmail(emailAddress))
            {
                throw new SpamFilterException("User email address is wrong.");
            }
            else
            {
                foreach (string spamWord in spamWords)
                {
                    if (commentContent.Contains(spamWord))
                    {
                        throw new SpamFilterException("Comment rejected: contains the word '" + spamWord + "'");
                    }
                }
                // The comment contains none of the configured words, so it is acceptable.

                return comment;
            }
        }

        private bool CheckEmail(string emailAddress)
        {
            string strPattern = "^([0-9a-zA-Z]([-.\\w]*[0-9a-zA-Z])*@([0-9a-zA-Z][-\\w]*[0-9a-zA-Z]\\.)+[a-zA-Z]{2,9})$";
            if (Regex.IsMatch(emailAddress, strPattern))
            {
                return true;
            }
            return false;
        }

    }
}

Add some keys in web config
<add key="Comment.SpamFilter.Assembly" value="PresentationLayer" />
    <add key="Comment.SpamFilter.Implementation" value="PresentationLayer.UGCWordsSpamFilter" />
<add key="Comment.SpamFilter.Exclude1" value="poker" /> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T09:34:07.413

清理您的浏览器 cookie，然后再次尝试在您的 UGC 演示网站上发表评论。这次填写正确的数据。您看到的行为通常发生在您首先对某事物进行评分并且 UGC 为您创建匿名配置文件时......创建此配置文件后，您只能以编程方式修改生成的用户名（'null'）。如果这对你有用......很好......如果不是......需要一些调试步骤。

第一步是确保在 UGC 演示站点上正确设置了 ADF。在演示站点上的 ADF 上，您至少需要启用 AllowAnonymousPostClaimProcessor。启用 TRACE 日志记录以检查 UGC 演示站点上是否一切正常。

第二步（不是在完成第一步，清理 cookie 并重试之前）是继续 UGC WS...启用 TRACE 日志记录并检查实际上是 POST 的请求并给我们日志记录。

希望这可以帮助。

PS：您复制/粘贴的日志记录来自 GET 请求....而不是来自实际发出 POST 的请求....您可以通过查看“uri=taf:server”中的“REQUEST_METHOD=GET”来看到这一点:variables”声明。

干杯，丹尼尔。

# teamcity - TeamCity tfs 拉代理

> ID：11674749
> 
> 赞同：1
> 
> 时间：2012-07-26T17:29:08.680
> 
> 标签：teamcity

我有一个在我的 mac 上运行的 teamcity 服务器，我的 tfs/vs2010 构建机器上有一个代理。每次我开始构建“Team Foundation Server VCS 支持仅在 Windows 下运行”时，我都会收到错误消息。我的第一反应是网络服务器正试图提取代码（mac 而不是 windows 构建机器）。我将 VCS 结帐模式更改为“自动在代理上”，但我仍然收到该错误。有什么我需要改变的，以便所有的拉动都在代理而不是网络服务器上完成吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T16:55:00.433

不幸的是，TeamCity 服务器必须安装在 Windows 上才能与 TFS 通信。即使使用代理端结帐，服务器也会直接与 VCS 通信 - 以监视更改、显示源差异等。在 TFS 的情况下，我们需要使用 Mac OS 不可用的 TFS 客户端（团队资源管理器）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-07T09:40:25.687

从现在开始，可以试用 TeamCity 的跨平台 TFS 插件的 EAP 版本。因此，您将能够在 Linux、Mac OS 或 Windows 平台上安装 TeamCity 服务器和代理，并检查 TFS 存储库。

您可以在公告中阅读有关如何获取它的更多详细信息：http: [//blog.jetbrains.com/teamcity/2015/12/teamcity-cross-platform-tfs-support/](http://blog.jetbrains.com/teamcity/2015/12/teamcity-cross-platform-tfs-support/)

# facebook - 如何使用 facebook graph api 从用户那里获取所有事件？

> ID：11674750
> 
> 赞同：2
> 
> 时间：2012-07-26T17:29:16.870
> 
> 标签：facebook, facebook-graph-api

我要求访问 user_events 和 friends_events。这是我从中获取 json 内容的 url。

```
https://graphs.facebook.com/me/events?access_token=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx 
```

我不断收到 {"data":[]}

我查看了我的 facebook 页面，我有一百万个事件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T17:36:52.270

使用[https://graphs.facebook.com/me/events](https://graphs.facebook.com/me/events)只会获取您参与或不确定的事件。

但。您可以使用 FQL 从用户那里获取所有事件。参加与否。

```
select eid, uid, rsvp_status from event_member where uid = me() 
```

rsvp_status 可以是

> “参加”、“拒绝”、“未回复”和“不确定”

[在这里](https://developers.facebook.com/tools/explorer/?fql=select%20eid,%20uid,%20rsvp_status%20from%20event_member%20where%20uid%20=%20me%28%29)检查

# javascript - mootools 析构函数

> ID：11674755
> 
> 赞同：1
> 
> 时间：2012-07-26T17:29:36.427
> 
> 标签：javascript, mootools

mootools 有析构函数吗？我有一个统计类实例的静态变量。
问题是当实例被销毁时，我无法更新我的静态变量。无论如何要扩展析构函数，以便我可以更新该变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T08:19:57.540

从来没有在mootools中看到过这种情况，通常，你让浏览器垃圾收集所以......

到目前为止，这不是一个理想的解决方案——它需要知道实例的范围（窗口、其他对象等）。

混合类：

```
var Destructor = new Class({
    destruct: function(scope) {
        scope = scope || window;
        // find the object name in the scope
        var name = Object.keyOf(scope, this);
        // let someone know
        this.fireEvent && this.fireEvent('destroy');
        // remove instance from parent object
        delete scope[name];
    }
}); 
```

然后你在你想要的类中使用它：

```
var a = new Class({

    Implements: [Events, Options, Destructor],

    initialize: function(options) {
        this.setOptions(options);
        this.hai();
    },

    hai: function() {
        console.log('hai');
    }

}); 
```

最后，您创建一个类的实例，并绑定一个事件`onDestroy`

```
var instance = new a({
    onDestroy: function() {
        console.log('goodbye cruel world. time to set affairs in order!');
    }
});

instance.destruct();

instance.hai(); // reference error. 
```

我知道这很hacky，但它可能使您能够明智地销毁类并进行清理。

# python - Python 单元测试以及何时模拟

> ID：11674762
> 
> 赞同：2
> 
> 时间：2012-07-26T17:29:57.067
> 
> 标签：python, unit-testing, mocking

我在一份新工作中开始了一个新项目。这是我第一次在 Python 中大量工作。与我必须在静态类型语言中跳过的箍相比，Mocking 是一种全新的野兽。我自己研究了团队的单元测试，并希望将其中一些从使用 Dingus 升级到 Mock。

今天早些时候，我遇到了一些检查转换类的测试。具体来说，它将十六进制数字字符串转换为 Mongo ObjectIds（唯一标识符）。我期望看到的是一个测试，验证给定一个有效的十六进制数，一个具有相同十六进制数的 ObjectId 将被返回 - 或者 - 如果一个错误的十六进制数会发生错误。相反，所有测试验证的是创建并返回了一个 ObjectId。事实上，ObjectId 被完全模拟出来了，十六进制数字也是如此！

现在，从字符串创建 ObjectId 不需要到服务器或任何东西。一切都在本地运行。

我和我的新同事询问了这个特殊的测试套件。他们的想法是，应该使用集成测试来验证实际的转换，并且作为单元测试，单元测试应该做的就是确保代码按预期从上到下流动，并创建并返回 ObjectId。所以，基本上，测试只验证这个类是否以预期的方式与环境交互。

我已经编写单元测试很长时间了。根据我的经验，我根本不会使用模拟，我只会验证转换是否按预期发生。这意味着与来自另一个模块的 ObjectId 类进行交互。也许我对单元测试的想法太笼统了。我一直保留用于连接到远程服务器、文件等的集成测试。

在我看来，在这个例子中使用 ObjectId 与使用 str 或 list 没有什么不同。当然，我可以模拟 str 和 list，但由于它们对我的代码所做的工作至关重要，所以在我看来，模拟它们没有多大意义。我唯一应该关心与依赖项交互的时候是它可以改变测试的结果。

编写简单检查代码流的单元测试有什么价值吗？单元测试不应该是验证代码行为/正确性的结果吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T17:44:22.493

因此，如果不查看代码，很难确切地看到发生了什么，但仅基于您的解释......

我会同意你的。行为才是重要的，而不是代码的流程。

如果以后有人需要更改代码流以支持不同的情况（例如，使用具有不同参数的函数来实现相同的结果）怎么办？他们可以在不破坏现有测试的情况下这样做。

如果您升级正在使用的库，而现在调用该函数实际上得到的结果与您想要的不同，该怎么办？您的测试仍然有效（正在调用该函数），但单元测试实际上试图测试的内容却没有。

真的，如何使用模拟和测试仍然是一个非常年轻的学科。关于单元测试（以及单元测试中使用的各种策略，例如模拟）是否被认为是“好东西”，目前尚无定论。然而，毫无疑问，我发现自己创建测试并不是为了实际测试行为，而是为了让我可以说我有测试，并且不正确地使用模拟是假装你已经创建了测试的好方法，而实际上你'刚刚创造了一种错误的成就感，即您的代码现在已经过更严格的测试。

# javascript - OpenLayers 地图行不对齐

> ID：11674764
> 
> 赞同：4
> 
> 时间：2012-07-26T17:30:06.763
> 
> 标签：javascript, codeigniter, twitter-bootstrap, openlayers

我得到了这个 OpenLayers 项目，我需要在其中使用本地地图服务。

我遇到的问题：（截图）[http://tinypic.com/r/x38oq1/6](http://tinypic.com/r/x38oq1/6)

这对我来说本身就是一个谜，因为我在空白网页上使用 100% 相同的代码进行测试（空白页将是一个只有地图的页面），而且效果很好！（截图：[http](http://tinypic.com/r/20zyxxh/6) ://tinypic.com/r/20zyxxh/6 ）

我正在使用 OpenLayers 10.12（7 月 26 日最新稳定版）我还在使用带有引导 twitter 的 codeigniter 框架。

如果我使用与指南/教​​程相同的地图服务器，地图会显示得很好——但是当我切换到我的本地地图文件夹时失败了。

JavaScript 代码：

```
 <script defer="defer" type="text/javascript">
    var map = new OpenLayers.Map('map');
    var tms = new OpenLayers.Layer.OSM( 
        "OSM Layer",
        "./assets/map/WholeWorld256-8bit/${z}/${y}-${x}.png",
        {layers: 'basic'} );
    map.addLayer(tms);
    map.zoomToMaxExtent();
  </script> 
```

如果有人知道它为什么会这样，那就太好了！

我也尝试了 IRC 频道，但我没有得到任何回应。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-27T07:01:51.197

所以我找到了问题的解决方案，如果其他人遇到同样的问题，我会发布它。

问题在于 Bootstrap Twitter 样式。但是，推特团队已经创建了一个 ID 标签来解决这个问题。使用 ID="map_canvas" 解决了这个问题。

在地图的瓦片上放置某种最大宽度的代码：

Bootstrap.css - 第 64-74 行：

```
img {
  max-width: 100%;
  vertical-align: middle;
  border: 0;
  -ms-interpolation-mode: bicubic;
} 
```

解决方案位于第 76-78 行（boostrap.css）：

```
#map_canvas img {
  max-width: none;
} 
```

希望这对其他人有帮助！祝你今天过得愉快！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T01:02:52.950

遇到同样的问题，但不想更改我的 OpenLayers 容器的 id。您可以使用相同的 CSS 规则修复任意 div：

```
<style>#mapCanvas img { max-width:none; } /* make Boorstrap work with OpenLayers */</style> 
```

# linux - 脚本不在cron下运行而是手动运行

> ID：11674766
> 
> 赞同：1
> 
> 时间：2012-07-26T17:30:11.697
> 
> 标签：linux, cron

我有一个开发人员为我编写的脚本，它执行主要与 ffmpeg 相关的各种功能。当我使用手动运行脚本时

```
sh /home/site/rawvids/encode.sh > /home/site/rawvids/log.txt 
```

该脚本运行良好，但是当它通过 cron 运行时失败，错误代码为 127

有任何想法吗？

`ls -l`脚本上显示：

> -rwxrwxrwx 1 站点没人 3786 Jul 23 17:07 /home/site/rawvids/encode.sh*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T18:36:55.287

错误 127 表示“找不到命令”。您可能在脚本中运行了一些不在 of 中的命令`cron`（如果您查看 ，您可以看到 cron 的 PATH 是什么`/etc/crontab`）。

您可以在 shell 中检查当前的 PATH：

```
$ echo $PATH 
```

然后将此 PATH 复制到脚本的开头：

```
PATH=... 
```

而不是`...`您必须编写您之前获得的行（使用`echo $PATH`）。

`#!/bin/sh`还要检查脚本开头是否有 shebang 行。`sh`如果您在没有命令行的情况下启动脚本，则它是导入的。

如果您可以向我们展示`/etc/crontab`运行脚本的行，那也很棒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T17:34:15.733

您很可能依赖于未为 cron 设置的环境变量（我不确定 cron 是否使用任何？）或者 cron 运行的权限是错误的。如果您在 cron 版本中像这样管道输出，它会得到任何输出吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-17T00:40:36.227

同样...，好吧，我只能忍受这些路径问题，我设置了指向 ffprobe 路径的符号链接或缺少的任何内容，例如

`ln -s /usr/local/bin/ffprobe /home/ec2-user/.rvm/rubies/ruby-2.3.0/bin/ffprobe`

# indexing - Lua 最大编号程序

> ID：11674770
> 
> 赞同：1
> 
> 时间：2012-07-26T17:30:35.943
> 
> 标签：indexing, lua, iteration, lua-table

这是一个简短的程序，它接收一个表格，并返回表格中最大数值的索引。

我的问题是 - 有人可以向我解释第 5 行 for 循环中的“单词，计数”吗？该程序有效，但我不明白 for 循环中的 count 这个词如何做任何事情。

```
 numbers = {10, 5, 1}

 function largest(t)
   local maxcount = 0
   local maxindex
   for word, count in pairs(t) do
     if count > maxcount then
       maxcount = count
       maxindex = word 
     end
   end
   return maxindex, maxcount
 end

 print(largest(numbers)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T17:53:40.840

运行以下代码应该更清楚：

```
tbl = { a = "one", b = "two", c = "two and half" }
for key, val in pairs(tbl) do print(key, val) end 
```

当您`pairs`在 for 循环中运行时，它会为表中的每个键/值对执行一次之间`do`的代码；为循环内的代码设置键和值的名称。 是最常见的[迭代器](http://www.lua.org/pil/7.1.html)示例。`end``for x, y in``pairs`

# php - 如何从 SQL 中获取不同的行

> ID：11674772
> 
> 赞同：1
> 
> 时间：2012-07-26T17:30:41.520
> 
> 标签：php, mysql, sql, codeigniter

这是我的 SQL 表。在这里我想得到所有

```
 marks_table
ID  STUD_ID MARKS   VERSION    VERIFICATION_ID
1      50     90       1             2
2      22     50       1             2
3      33     20       1             2
4      10     30       1             2
5      55     50       1             2
6      55     40       2             2
7      20     60       1             2
8      30     90       1             2
9      10     88       1             3
10     10     45       2             3 
```

我想要的是，通过verification_id 获得所有结果，并且版本是更大的值。例如 ID 5,6 和 9,10 具有相同的 stud_id 不同的标记，并且版本也不同。我想从该验证 ID 中获得最大版本结果和所有其他结果。

在 CodeIgniter 中，我使用了以下命令。

```
$this->db->select('*');
$this->db->from('marks_table');
$this->db->where('version IN (SELECT MAX(version) FROM marks_table)',NULL,FALSE);
$this->db->where('verification_id','2');
$this->db->get(); 
```

我得到的只是最终的最大版本

```
 marks_table
    ID  STUD_ID MARKS   VERSION    VERIFICATION_ID
    6      55     40       2             2 
```

我真正想要的，像这样

```
 marks_table
ID  STUD_ID MARKS   VERSION    VERIFICATION_ID
1      50     90       1             2
2      22     50       1             2
3      33     20       1             2
4      10     30       1             2
6      55     40       2             2
7      20     60       1             2
8      30     90       1             2 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T17:33:13.040

首先找到 Max 版本，然后获取它的数据：

```
 select * from marks_table a
    where version = (select max(version) from 
                        marks_table where stud_id = a.stud_id); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T03:27:56.297

我已经修改了 srini.venigalla 的答案。感谢他。

```
 select * from marks_table a
    where version = (select max(version) from 
                        marks_table where stud_id = a.stud_id) AND VERIFICATION_ID = 2; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T08:03:21.887

尝试从表中获取多行

```
$this->db->select('*');
$this->db->from('marks_table');
$this->db->where('version IN (SELECT MAX(version) FROM marks_table)',NULL,FALSE);
$this->db->where('verification_id','2');
$this->db->get()->result_array(); 
```

# jquery - jQuery函数无法解析

> ID：11674773
> 
> 赞同：0
> 
> 时间：2012-07-26T17:30:47.033
> 
> 标签：jquery, javascript-framework, javascript

我对堆栈溢出和从头开始使用 jQuery 都是新手，所以请原谅我的任何不正确的格式（或完全省略代码）以及明显以次充好的编码实践。

我在这里编制一个投资组合： `Question answered, link removed`

如果您尝试单击导航中的链接，则会出现fadeOut>fadeIn 效果解析。在 Portal 和 About 之间，链接工作得很好，但是如果您单击 Journal、Resources 或 Contact，文本会中断并且在离开它们时无法淡出。

我可以替换单个 div 的 innerHTML，但我更喜欢使用这种格式来交换内容。谁能告诉我为什么它适用于前两个链接，但在我对它们进行相同编码时会中断其他三个链接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T17:35:55.043

我不确定这是否能解决您的问题，但我注意到您所有的条件检查都使用单个等号而不是双（甚至更好，三倍！）等号。

尝试从此更改所有条件：

```
else if (about=true) 
```

对此：

```
else if (about===true) 
```

编辑：在浏览 javascript 之后，我注意到你有很多不必要的冗余代码。我已经在 jsfiddle 上写了一个小演示，希望能帮助你大大减少你的代码。

[http://jsfiddle.net/FdeM9/](http://jsfiddle.net/FdeM9/)

```
$('a').on('click', function () {
    var clickedDiv = this;
    var visibleDiv = $('div:visible');
    var divToShow = $('div').eq(parseInt(clickedDiv.innerHTML)-1);

    if (visibleDiv[0] === divToShow[0]) {
        return;
    }

    visibleDiv.fadeOut(500, function () {
        divToShow.fadeIn(500);
    });
});​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T17:36:09.603

您应该`==`在 if 语句中使用双等号进行比较。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T17:40:41.613

您将赋值运算符（=）与比较运算符（== 或 === 用于类型比较）混淆了。

由于您的条件是从布尔变量中读取的，因此您可以执行以下操作：

如果（条件）{

}

您的脚本标签也缺少类型属性。

此外，您应该将这些事件绑定调用封装在一个函数中，并将该函数附加到 onReady(jQuery(document).ready) 事件。

在全局变量中也是邪恶的（或者至少应该避免）。查看您的代码，您似乎打算使用这些全局标志来启用或禁用某些菜单项？为什么不首先控制这些菜单项的呈现，这样您就不需要全局变量了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T17:39:26.353

最简单和最干净的方法是给所有菜单项一类让我们说“菜单”

然后用这个

```
$(".menu").click(function () {
    $(".menu").fadeOut().delay(500);
    $(this).fadeIn();
} 
```

# python - 如何在 setup.py 中添加头文件，以便在构建扩展时观察依赖关系？

> ID：11674774
> 
> 赞同：6
> 
> 时间：2012-07-26T17:30:54.843
> 
> 标签：python, distutils, setup.py

这个问题似乎很长，但这一切都归结为我如何将头文件添加到特定的扩展规范中。

动机是，如果我更改其中一个头文件，发出

python setup.py 构建

即使没有 .c 文件被更改，也应该重建扩展名。

我尝试在 Extension 构造函数的“sources”关键字 arg 中添加依赖的头文件，但运行生成的 setup.py 会生成错误，抱怨未知文件扩展名“.h”。

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-27T08:17:12.750

看看类上的[`depends`选项](http://docs.python.org/distutils/setupscript.html#other-options)`Extension`。我自己没有使用过它，但是您的确切示例被列为用例。

# windows - 无法让 Windows 资源管理器文件内容搜索正常工作

> ID：11674777
> 
> 赞同：4
> 
> 时间：2012-07-26T17:30:55.997
> 
> 标签：windows, visual-studio

Windows 资源管理器无法在目录“C:\WindRiver3.3\workspace\DaVinci_Control_System”的 .htm 文件中找到字符串“WAZAT”。

这是在 Windows Vista 上。但是，在我在 Windows-XP 之后遇到的所有 Windows 版本、我家庭办公室的不同计算机和所有客户端工作站上，我都遇到了 Windows Explorer 文件搜索问题。

秘诀是什么？？？我在右上角的“搜索”文本框中键入“WAZAT”，它在文件名中找不到它，所以我单击“在文件内容中再次搜索”它只在一个文件（.js 文件）中找到它，并且无法在 .htm 文件中找到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-04-13T15:18:48.520

我一直发现 Windows 的本机搜索功能在某种程度上受到了限制。

我建议您查看[Windows 应用商店中的](https://www.microsoft.com/en-au/p/file-content-finder/9mzc4sk6j6bp)[File Content Finder](https://geosystemsdev.com/products/file-content-finder/)应用（免责声明 - 我是它的开发者）。它专为搜索文件内容而设计，无需索引。它支持所有主要文件格式 - pdf、doc(x)、xls(x)、pptx 等。它甚至可以搜索扫描的文档。

它也可用于[Apple Store](https://itunes.apple.com/au/app/file-content-finder/id1448621435)上的 Mac 。

# iphone - iOS iPhone 的表情符号

> ID：11674783
> 
> 赞同：0
> 
> 时间：2012-07-26T17:31:28.320
> 
> 标签：iphone, emoji, emoticons

我想为 iphone iOS 创建原始表情符号。它们需要多大的尺寸和像素？我在任何地方都找不到这个问题的答案。请帮忙。谢谢 =)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T17:36:59.227

好吧，iOS 没有任何原始表情符号，大多数用户下载带有表情符号图标的“hack”。

我相信它们是 16x16 像素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T21:29:17.260

您可以使用[UIKit Artwork Extractor](https://github.com/0xced/UIKit-Artwork-Extractor/)查看 IOS 中使用的表情符号的大小。

# visual-studio-2010 - VS2010 负载测试中的 SQL 跟踪显示不相关的结果

> ID：11674784
> 
> 赞同：0
> 
> 时间：2012-07-26T17:31:29.717
> 
> 标签：visual-studio-2010, load-testing

我正在尝试对 Visual Studio 2010 负载测试进行一些 SQL 跟踪。它正在工作，但我从其他用户和自动化进程那里获得了一些不相关的 SQL 流量。

我通过创建一个反复拉下 google.com 的测试来验证它是不相关的。即使这个测试仍然显示来自我们系统的 SQL 流量。

因此，很难判断哪些 SQL 流量值得关注，哪些只是背景噪音。

有没有办法可以配置 SQL 跟踪以仅显示与我的负载测试相关的流量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T19:48:20.333

到目前为止，据我所知，我们没有合适的方法来过滤要在 SQL 跟踪连接字符串中跟踪的数据库。请记住，被测系统（web/app+db）应该专门用于测试。

在我的公司，我们只需使用带有特定过滤器（应用程序名称或登录名）的 SQL Server Profiler 启动单独的跟踪

# c# - .NET 反序列化 - 返回多种类型

> ID：11674786
> 
> 赞同：0
> 
> 时间：2012-07-26T17:31:43.067
> 
> 标签：c#, .net, silverlight, serialization

我们建立了一个框架，它的 API 是这样的：

```
T Deserialize<T>(string to deserialize)
{
    //  XmlSerializer(typeof(T))
    //  deserialize and return
} 
```

我们一直在传递它，例如：

```
[XmlRoot("apple")]
public class Apple
{
    [XmlElement("Id")]
    public int AppleId { get; set; }
} 
```

当我们返回一个苹果时，这很有效，但是，有时我们会得到“notAnApple”。所以我要么得到“apple”，要么得到“notAnApple”。当我得到“notAnApple”时，我得到了一个例外。

由于我们围绕这个方法构建了很多代码，我不希望四处更改方法签名之类的东西。但是，我确实可以完全灵活地将我喜欢的任何类传递给这个反序列化方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T17:40:08.117

通常，您“确切地知道”您正在序列化和反序列化的内容。例如，您可以像这样序列化：

```
serializer.Serialize(stream, new Apple());
serializer.Serialize(stream, new notAnApple()); 
```

然后你会像这样序列化：

```
Apple apple = (Apple)deserialzer.Deserialize(stream);
notAnApple peach = (notAnApple)desserializer.Deserialize(stream); 
```

您通常不会随机尝试反序列化数据以找出您正在反序列化的内容。从技术上讲，您已经知道，因为您有特定的文件格式或特定的流格式。

# django - 过滤器出现“需要超过 1 个值才能解压”错误

> ID：11674787
> 
> 赞同：0
> 
> 时间：2012-07-26T17:31:43.937
> 
> 标签：django, django-errors

我在过滤器上有错误：`need more than 1 value to unpack`

这是对的吗 ：

```
groups_list = Group.objects.filter({'assignment__in': editedcourse.assignment.all()}) 
```

我认为这是一个语法错误，或者给出的参数缺少但我无法纠正它：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T17:35:29.023

尝试不使用 { } 和 ''

```
groups_list = Group.objects.filter(assignment__in= editedcourse.assignment.all()) 
```

或者

```
ids = map(lambda x:x.id,editedcourse.assignment.all())
groups_list = Group.objects.filter(assignment__in=ids) 
```

# c++ - 通过标记匹配字符串 - 概念检查

> ID：11674791
> 
> 赞同：0
> 
> 时间：2012-07-26T17:31:57.527
> 
> 标签：c++, token, string-matching, extended-ascii

这个问题用于概念检查。我有一个字符串 000.00-010.0.0.0 我想从列表 {000.00-012.0.0.0 和 000.00-008.0.0.0} 中找到最接近的匹配项（在编辑度量中包含一个数字距离度量）我会喜欢以'012'，'010'和'008'作为标记并测量它们之间的距离。

字符串匹配的标准方法将查找每个字符位置的变化，对变化求和并返回一个距离。修改后的距离也将测量 CHARS 之间的 ASCII 距离 - G 离 E 比 D 更远。

要测量 '012' 与 '008' 一样是 '010'，需要将三个字符捆绑​​到一个令牌中。可以轻松测量此令牌的编辑距离和距离吗？由于删除了树数据库中的定界符，问题似乎更加复杂。

我想要进行实际检查的建议解决方案是将“012”、“010”和“008”转换为单个 CHAR ASCII 符号，例如 )、* 和 +，测量字符距离和字符串编辑距离，然后打印转换回“012”、“010”和“008”。

示例字符串：`MER99.C0.00M.14.006.00.060.350`

而且，还有通配符：

*   `MER99.*.006.00.060.350`
*   `MER99.C0.00M.??.006.00.060.350`

由于字符串的长度相同（有些需要虚拟字符作为长度，'00M'实际上是'M'）匹配与汉明距离。

我不需要匹配算法、汉明距离方法、通配符或虚拟字符的帮助，我将其添加到问题的上下文中。现在，我将令牌视为单独的字符并获得良好的结果，但知道它们不如作为令牌处理时那样精确。限制因素可能是编码模式中的不一致。但是，我想以此作为限制，而不是我的算法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T19:06:49.223

您的字符串包含字母数字字符，即以 36 为基数的数字。此外，这些字符被分组为“令牌”。它不能存储在 中`char`，但您可以将其存储在 中`int`。

您可以存储一对，而不是在树中存储整数，其中 char 告诉值的类型：

*   `0`对于数值
*   `1`为了`*`
*   `2`对于`xxxx?`（掩码）
*   ETC...

# .htaccess - 在更改文件名的同时将许多 URL 重写到另一个目录

> ID：11674792
> 
> 赞同：1
> 
> 时间：2012-07-26T17:32:09.290
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

我想做的是重写类似的东西

`http://www.example.com/folderA/aaa_bb_cc_ddd.php`

到

`http://www.example.com/folderB/aaa-bb.php`

...而且我很难弄清楚如何做。非常感谢任何帮助或正确方向的观点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T17:39:59.053

这实际上取决于这些 URL 的外观，但对于初学者，您可以在文档根目录的 htaccess 文件中尝试此操作：

```
RewriteEngine On
RewriteRule ^/?folderA/(.*)_cc_ddd\.php /folderB/$1.php [L] 
```

这里的诀窍是弄清楚`(.*)_cc_ddd\.php`需要看起来像什么。它*完全取决于*您需要更改的许多 URL 的列表。

# android - 列表视图 + 资源 > 图像 + 文本

> ID：11674795
> 
> 赞同：-1
> 
> 时间：2012-07-26T17:32:14.460
> 
> 标签：android, xml

我有这个

```
setListAdapter(ArrayAdapter.createFromResource(getApplicationContext(),
                R.array.listOfCountries, R.layout.row)); 
```

它从这个资源 xml 中创建了基本的列表视图

```
<string-array name="listOfCountries">
        <item>Bulgaria</item>
        <item>Canada</item>
        <item>Croatia</item>
        <item>USA</item>
        <item>UK</item>
    </string-array> 
```

但我需要为每个国家添加当前图像，例如保加利亚我想添加保加利亚国旗等。

但是我需要将这个字符串数组存储在资源中，因为我想为更多语言进行本地化。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T17:37:09.137

您将不得不通过继承 BaseAdapter 并覆盖 getView()、getCount()、getItem() 等方法来创建自己的 ListAdapter。

[http://thinkandroid.wordpress.com/2010/01/13/custom-baseadapters/](http://thinkandroid.wordpress.com/2010/01/13/custom-baseadapters/)

创建一个名为 Country 的类，如下所示：

```
public class Country {
   public String name;
   public int flagResourceId;

   public Country( String name, int flagResourceId ) {
      this.name = name;
      this.flagResourceId = flagResourceId;
   }
} 
```

然后您可以在您的自定义 BaseAdapter 中使用它，并将该对象绑定到 getView() 中的视图中。可以在 onCreate() 期间或在您的应用程序中的类中完成创建列表的操作。

# asp.net - 用于不同服务器的数据库连接的企业库

> ID：11674806
> 
> 赞同：1
> 
> 时间：2012-07-26T17:32:56.980
> 
> 标签：asp.net, enterprise-library

您好我正在开发一个 ASP.NET Web 应用程序。如何使用企业库连接到服务器上的数据库？

示例：如果我在测试环境中，数据库应该连接到测试服务器连接字符串。如果我在生产环境中数据库应该连接到生产服务器连接字符串。

实现这一点的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T17:56:00.813

您可以使用名为[Slow Cheetah - XML Transforms的扩展](http://visualstudiogallery.msdn.microsoft.com/69023d00-a4f9-4a34-a6cd-7e854ba318b5/)

此包使您能够根据构建配置转换您的 app.config 或任何其他 XML 文件。它还添加了额外的工具来帮助您创建 XML 转换。

# oracle - ORA-02303: 不能用类型或表依赖项删除或替换类型

> ID：11674807
> 
> 赞同：16
> 
> 时间：2012-07-26T17:33:00.007
> 
> 标签：oracle, plsql

我是甲骨文的新手，我尝试更改`varchar(50)`为`250`

```
CREATE OR REPLACE TYPE CEQ_OWNER.TYPE_REC_PARAE2
AS OBJECT    
(
    ...
    BONETAT_DESC  VARCHAR2(250),
    ... 
)
/ 
```

我得到 ORA-02303: cannot drop or replace a type with type or tabledependent

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-26T17:48:52.047

还有其他类型或表格取决于您要更改的类型。如果它是依赖类型，那么您可以使用 FORCE 选项来更改类型。

如果是直接或间接使用该类型的表，则需要创建新类型和新表，迁移所有数据，最后删除并重命名表和类型。

有关更多信息，请参阅此[Oracle 文档](http://docs.oracle.com/cd/E16338_01/appdev.112/e11822/adobjmng.htm#CHDBAEHJ)。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-06-07T17:18:22.533

我也在到处寻找语法，但很难找到文档。从 Codo 链接的页面...注意`FORCE`对象名称和`as object`

```
create or replace type ceq_owner.type_rec_parae2 FORCE as object    
(
  ...
  BONETAT_DESC  VARCHAR2(250),
  ... 
)
/ 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-01-20T14:55:28.857

尝试：

```
drop type your_type force; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-25T07:47:29.567

您尝试修改或删除的对象存在一些依赖关系。

如果你想跳过这首先删除依赖对象并尝试删除或修改

就像下面的截图

[![](../Images/ce66025dbb454fe7458c9cb8fc167818.png)](https://i.stack.imgur.com/tIDit.jpg)

问候， 阿鲁尔

# bash - 重新分发具有依赖关系的 bash 脚本

> ID：11674812
> 
> 赞同：0
> 
> 时间：2012-07-26T17:33:24.123
> 
> 标签：bash

我编写了一个相当广泛的 BASH 脚本来执行一堆任务。在此主脚本中调用其他脚本。打包此脚本以便其他用户可以使用基本脚本的最佳方法是什么。

我想到了一些方法： 将所有依赖项与主脚本一起发送：这可能会遇到其他用户不了解如何将脚本放入其 PATH 但很容易发送的问题。

将所有脚本的内容作为函数添加到主服务器：这需要进行大量重写，以便可以访问所有脚本。然后，如果我将来进行更改，我很难让 Master 与子脚本保持同步。

谁能想到另一种打包一组脚本（和可执行文件）的方法，以便接收它的最终用户可以轻松地以最少的麻烦运行包？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T17:37:35.167

您可以`PATH`在主脚本的开头进行修改，因为听起来用户不需要手动运行依赖项（即，在主脚本之外）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T18:29:46.117

您可以使用此方法在脚本中打包很多东西。base-64 文本来自对包中所有文件的 tar.gz 文件进行 uuencode 编码。此示例打包了 3 个脚本。

```
#!/bin/bash
pushd /tmp && mkdir stuff$$here  && pushd stuff$$here
if [[ $? != 0 ]]; then
    echo "can't make /tmp/stuff$$here"
    exit 1
fi
a=$(cat <<'@@@'
H4sIABWJEVAAA+3TsQ6CMBRA0c58RcVdWin0e9rGBBY1FOPvW2BxQScQ4j1p8pLXDl2uO8VGLEwl1lbD
1LZS73NSGqHPSpkynXrYW1vWQqqlPzZ4xN51UooQnh/ffbvfqeOh8O218C422SU0N5nH0LX3Xro8+/Xf
sDy/tf6tHvs3mv7XMNu/p/9/EDbWv1FT/2lF/yuY7T/QPwAAAAAAAAAAAADsyQsw5pIDACgAAA==
@@@
)
st=0
for (( i=0; i<"${#a}"; i++ ))
do
 x=${a:$i:1}
 in=$(($(expr index \
 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/' "\\$x")-1))
 if [ $in -ge 0 ]; then case $st in
  0 ) out=$(($in<<2)); st=3;;
  1 ) out=$(($out|$in)); 
    printf \\$(printf '%03o' $(($out&255)) ) ; st=0 ;;
  2 ) out=$(($out+($in>>2))); 
    printf \\$(printf '%03o' $(($out&255)) ) ;
    st=0; out=$(($in<<6)); st=1;;
  * ) out=$(($out+($in>>4))); 
    printf \\$(printf '%03o' $(($out&255)) ) ;
    st=0; out=$(($in<<4)); st=2;;
  esac fi
done | (gzip -d |tar -xf - )
./a.sh
./b.sh
./c.sh
rm a.sh b.sh c.sh
popd
rmdir stuff$$here
popd
exit 
```

# macos - 可与 CBC 块密码加密算法一起使用的纠错

> ID：11674813
> 
> 赞同：0
> 
> 时间：2012-07-26T17:33:25.560
> 
> 标签：macos, block, encryption

我在 CBC 模式下使用 AES 块密码来加密数据。我对使用可与 CBC 块密码一起使用的适当纠错码进行数据检索感到困惑？谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T15:57:07.273

您应该使用 AES CMAC（不同于 AES MAC）来提供消息的完整性保护和身份验证。为此，您应该使用*不同的密钥*。AES-CMAC 应在加密消息上计算。

# javascript - Onclick选择文件在chrome中不起作用

> ID：11674815
> 
> 赞同：3
> 
> 时间：2012-07-26T17:33:34.173
> 
> 标签：javascript, jquery, html

我正在尝试在用户单击按钮时选择文件，但这仅在 chrome 中不起作用

在这里看看我是怎么做到的

```
$("#upllnk").click(function() {
    $("#ufile").click();
}); 
```

这是我的html代码

```
<a href="#" class="wb" id="upllnk">Select File To Upload</a>
<div style='display:none'><input type='file' name='ufile' id='ufile'/></div> 
```

将 input:file 放入 div 的原因是隐藏该元素。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T18:03:09.623

在[Esailija](https://stackoverflow.com/users/995876/esailija)的有用评论之后，我下载了一个便携式版本的谷歌浏览器（8.0.552.215），它确实没有用。

正如 Esailija 建议的那样，您可以使用`opacity`解决方法

```
<div style='opacity:0;'><input type='file' name='ufile' id='ufile'/></div>
            ^^^^^^^^^ setting the opacity to 0 "hides" the input element 
```

这是一个工作[小提琴](http://jsfiddle.net/aCaHJ/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T19:26:14.767

通过 JavaScript 在文件输入上触发点击会触发安全错误（通常在尝试提交表单之后），并且通常不会像您期望的那样工作。这在 IE 和早期版本的 Chrome 和 Firefox 中非常普遍。

我过去通过将输入包装在标签中解决了这个问题。这样，当点击标签时，它将触发输入。

`.Foo input { visibility: hidden; }`

`<label class="Foo">Select File to Upload<input type="file" /></label>`

# android - 自定义相机活动的Android图像方向问题

> ID：11674816
> 
> 赞同：13
> 
> 时间：2012-07-26T17:33:36.963
> 
> 标签：android, camera, orientation

我编写了一个自定义相机活动来处理我在调用 Intent 图像捕获时遇到的某些 Android 设备的一些问题。用户可以选择保存图像或仅使用从`OnPictureTakenCallback`.

我遇到的问题是相对于拍摄的方向正确显示图像。我通过调用强制活动以纵向显示`SetRequestedOrientation`。

当用户拍照时，我怎么知道相机的正确方向？即，用户可以旋转 90 度（纵向）拍摄照片。

我试图`getRotation()`在窗口管理器的默认显示上使用 ，但将请求的方向设置为仅返回`Surface.ROTATION_0`.

`byte[]`更新：为了澄清我的另一个问题，如果用户不保存图像，我如何仅从图片回调中的数据确定方向？

更新：在使用此代码尝试以下答案后，我得到的只是 ExifInterface.ORIENTATION_NORMAL。我还更改了我的代码，只保存从相机返回的文件，因为我不确定是否有一种简单的方法可以通过`byte[]`数据来确定方向。

```
 private PictureCallback mPicture = new PictureCallback() 
    {
        @Override
        public void onPictureTaken(byte[] data, Camera camera) 
        {
            File directory = new File(android.os.Environment.getExternalStoragePublicDirectory(android.os.Environment.DIRECTORY_PICTURES),
                    "MyApp");
            if(!directory.exists())
            {
                if(!directory.mkdirs())
                {
                    Log.d("CAMERA", "Unable to create directory to save photos.");
                    return;
                }
            }
            File file = new File(directory.getPath() + file.separator + "IMG_" + SimpleDateFormat.getDateTimeInstance().toString() + ".jpg");
            FileOutputStream fos = new FileOutputStream(file);
            fos.write(data);
            fos.close();
            ExifInterface exif = new ExifInterface(file.getCanonicalPath());
            int orientation = exif.getAttributeInt(ExifInterface.TAG_ORIENTATION, ExifInterface.ORIENTATION_NORMAL);
            int rotate = 0;

            switch (orientation) 
            {
                case ExifInterface.ORIENTATION_ROTATE_90:
                   rotate = 90;
                   break; 
                case ExifInterface.ORIENTATION_ROTATE_180:
                   rotate = 180;
                   break;
                case ExifInterface.ORIENTATION_ROTATE_270:
                   rotate = 270;
                   break;
                case default:
                   break;
             }
        }
    }; 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-26T17:41:31.757

所以你在相机的方向上遇到了一些问题。

此链接显示了一个简单的相机捕捉活动的示例应用程序：http: [//labs.makemachine.net/2010/03/simple-android-photo-capture/](http://labs.makemachine.net/2010/03/simple-android-photo-capture/)

也许您应该尝试通过执行以下操作来固定方向：

```
 ExifInterface exif = new ExifInterface(_path);
          int exifOrientation = exif.getAttributeInt(
          ExifInterface.TAG_ORIENTATION,
          ExifInterface.ORIENTATION_NORMAL);

          int rotate = 0;

          switch (exifOrientation) {
          case ExifInterface.ORIENTATION_ROTATE_90:
          rotate = 90;
          break; 

         case ExifInterface.ORIENTATION_ROTATE_180:
         rotate = 180;
         break;

         case ExifInterface.ORIENTATION_ROTATE_270:
         rotate = 270;
         break;
         }

           if (rotate != 0) {
          int w = bitmap.getWidth();
          int h = bitmap.getHeight();

// Setting pre rotate
          Matrix mtx = new Matrix();
          mtx.preRotate(rotate);

         // Rotating Bitmap & convert to ARGB_8888, required by tess
         bitmap = Bitmap.createBitmap(bitmap, 0, 0, w, h, mtx, false);
         bitmap = bitmap.copy(Bitmap.Config.ARGB_8888, true);
       } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-26T17:39:52.583

您需要从原始 JPEG 中读取元数据以验证拍摄照片的方向。

```
ExifInterface exif = new ExifInterface(SourceFileName);
String exifOrientation = exif.getAttribute(ExifInterface.TAG_ORIENTATION); 
```

资料来源：[如何在没有 ExifInterface 的情况下确定图片的方向？](https://stackoverflow.com/questions/5309863/how-to-determine-orientation-of-picture-without-exifinterface)

编辑：回答您的编辑，您是否尝试过使用回调中传递的 Camera 对象可用的 getCameraInfo() 方法？它有你需要的信息吗？

来源：http: [//developer.android.com/reference/android/hardware/Camera.html](http://developer.android.com/reference/android/hardware/Camera.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-11-30T01:35:43.313

```
public void surfaceCreated(SurfaceHolder holder) {
    try {
        mCamera.setPreviewDisplay(holder);
        Camera.Parameters parameters = mCamera.getParameters();
        if (this.getResources().getConfiguration().orientation !=
                Configuration.ORIENTATION_LANDSCAPE)
        {
            parameters.set("orientation", "portrait"); <----THis gets the job done!!!
            // For Android Version 2.2 and above
            mCamera.setDisplayOrientation(90);
            // For Android Version 2.0 and above
            parameters.setRotation(90);
        }

        // End Effects for Android Version 2.0 and higher
        mCamera.setParameters(parameters);
    }
    catch (IOException exception)
    {
        mCamera.release();
    }

} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-27T14:19:21.427

删除`setRequestedOrientation()`允许`getWindowManager().getDefaultDisplay().getRotation()`给出正确的旋转。我猜设置请求的方向可以防止活动在配置更改时重绘自身，因此设备不知道任何类型的旋转已更改。我现在唯一的问题是从 0 度方向的横向模式切换到横向模式 180 度旋转不会触发这个：

```
@Override
public void onConfigurationChanged(Configuration newconfig)
{
    super.onConfigurationChanged(newconfig);

} 
```

# python - 如何在 Python 中进行 strtok() 类型的解析？

> ID：11674817
> 
> 赞同：4
> 
> 时间：2012-07-26T17:33:42.690
> 
> 标签：python, strtok

标题[如何在 Python 中执行 strtok() 在 C 中所做的事情？](https://stackoverflow.com/questions/456084/how-do-i-do-what-strtok-does-in-c-in-python)建议它应该回答我的问题，但我正在寻找的特定 strtok() 行为正在破坏分隔符字符串中的任何*一个字符。*也就是说，给定：

```
const char* delim = ", ";
str1 = "123,456";
str2 = "234 567";
str3 = "345, 678"; 
```

strtok() 查找数字的子字符串，而不管有多少来自 delim 的字符。Python 的 split 期望整个分隔字符串都在那里，所以我不能这样做：

```
delim = ', '
"123,456".split(delim) 
```

因为它没有找到 delim 作为子字符串并返回单个元素的列表。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T17:43:48.740

如果您知道标记将是数字，您应该能够使用[`split`](http://docs.python.org/library/re.html#re.split)Python[`re`](http://docs.python.org/library/re.html)模块中的函数：

```
import re
re.split("\D+", "123,456") 
```

更一般地说，您可以匹配任何分隔符：

```
re.split("[ ,]", "123,456") 
```

或者：

```
re.split("[" + delim + "]", "123,456") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T17:39:32.717

使用`replace()`将所有分隔符规范化为同一个字符，并`split()`对该字符进行 -ting 是处理更简单情况的一种方法。对于您的示例，`replace(',',' ').split()`应该可以工作（将逗号转换为空格，然后使用特殊的无参数形式`split`来拆分空格）。

在 Python 中，当事情开始变得过于复杂时`split`，`replace`您通常会转向`re`模块；请参阅 Sam Mussmann 的更一般的答案。

# javascript - Twitter Bootstrap Typeahead 功能类似于 Google Chrome Omnibox

> ID：11674819
> 
> 赞同：3
> 
> 时间：2012-07-26T17:33:48.617
> 
> 标签：javascript, jquery, twitter-bootstrap, omnicomplete, typeahead

喜欢 Twitter Bootstrap 预输入功能，但我想做一些小修改 - 我想要最好的匹配（或者第一个匹配可能更简单），结果下拉菜单会自动填充到输入框中。

我正在寻找的功能正是 Google Chrome Omnibox 的工作方式

![截屏](../Images/43f6d8de438d4270b44f626a168589cb.png)

有谁知道这个的解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T00:05:57.403

玩了一下，我想出了那个代码。

[现场演示（jsfiddle）](http://jsfiddle.net/Sherbrow/VaYBe/1/)

```
$('.omnitype').each(function() {
    var $omnitype = $(this);
    $omnitype.typeahead({
        source: mySource,
        items: 4,
        sorter: function(items) {
            // Bootstrap code
            /* ... */
            // Modified code (delay the return of sorted)
            var sorted = beginswith.concat(caseSensitive, caseInsensitive);

            // if there is a first element, we fill the input select what we added
            var first = sorted.length && sorted[0];
            if (first) {
                var origin = this.$element.val();
                this.$element.val(first);
                createSelection(this.$element.get(0), origin.length, first.length);
            }

            // back to the intended behavior
            return sorted;
        }
    });
}); 
```

我用这个[答案](https://stackoverflow.com/a/646662/1478467)来提供`createSelection`功能（不确定是否真的需要）。

仍然需要进行一些调整，因为键不能按预期工作。通过一些自然地给出直观行为的检查来重新编码整个插件可能会更容易。

或者您可以在插件之前捕获关键事件并做适当的事情。

# random - 如何在 Dart 中生成随机数？

> ID：11674820
> 
> 赞同：244
> 
> 时间：2012-07-26T17:33:50.493
> 
> 标签：random, dart

如何使用 Dart 生成随机数？

* * *

## 回答 #1

> 赞同：300
> 
> 时间：2012-07-26T17:33:50.493

使用[`Random`](https://api.dartlang.org/stable/1.24.3/dart-math/Random-class.html)类`dart:math`：

```
import 'dart:math';

main() {
  var rng = Random();
  for (var i = 0; i < 10; i++) {
    print(rng.nextInt(100));
  }
} 
```

截至撰写本文时，此代码已使用 Dart VM 和 dart2js 进行了测试。

* * *

## 回答 #2

> 赞同：115
> 
> 时间：2019-12-10T19:34:56.187

您可以通过库中的`Random`类 object来实现它。该方法需要最大限制。随机数从 开始，最大限制本身是排他的。`random.nextInt(max)``dart:math``nextInt()``0`

```
import 'dart:math';
Random random = new Random();
int randomNumber = random.nextInt(100); // from 0 upto 99 included 
```

如果要添加最小限制，请将最小限制添加到结果中

```
int randomNumber = random.nextInt(90) + 10; // from 10 upto 99 included 
```

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2015-02-19T18:43:40.360

这是用于生成随机数列表的片段

```
import 'dart:math';

main() {
  var rng = new Random();
  var l = new List.generate(12, (_) => rng.nextInt(100));
} 
```

这将生成一个从 0 到 99（含）的 12 个整数的列表。

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2015-10-19T16:33:57.027

刚刚添加了一个安全的随机 API`dart:math`

```
new Random.secure() 
```

> `dart:math` `Random`添加了一个`secure`构造函数，该构造函数返回一个加密安全的随机生成器，该生成器从嵌入器为每个生成的随机值提供的熵源中读取。

它委托给`window.crypto.getRandomValues()`浏览器和操作系统（如`urandom`服务器上）

* * *

## 回答 #5

> 赞同：22
> 
> 时间：2020-06-20T18:49:17.693

试试这个，你可以控制最小值/最大值：

```
import 'dart:math';

void main(){
  int random(min, max){
    return min + Random().nextInt(max - min);
  }
  print(random(5,20)); // Output : 19, 5, 15..
} 
```

* * *

## 回答 #6

> 赞同：18
> 
> 时间：2012-07-26T21:51:55.423

如果您需要**加密安全的**随机数（例如用于加密），并且您在浏览器中，则可以使用[DOM 加密 API](http://api.dartlang.org/html/Crypto.html)：

```
int random() {
  final ary = new Int32Array(1);
  window.crypto.getRandomValues(ary);
  return ary[0];
} 
```

这适用于 Dartium、Chrome 和 Firefox，但可能不适用于其他浏览器，因为这是一个实验性 API。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2020-03-31T18:22:15.157

无法发表评论，因为我刚刚创建了这个帐户，但我想确保指出 @eggrobot78 的解决方案有效，但它在 dart 中是专有的，因此它不包括最后一个数字。如果将最后一行更改为“r = min + rnd.nextInt(max - min + 1);”，那么它也应该包含最后一个数字。

解释：

```
max = 5;
min = 3;
Random rnd = new Random();
r = min + rnd.nextInt(max - min);
//max - min is 2
//nextInt is exclusive so nextInt will return 0 through 1
//3 is added so the line will give a number between 3 and 4
//if you add the "+ 1" then it will return a number between 3 and 5 
```

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2020-04-22T14:27:21.187

它对我有用 `new Random().nextInt(100); // MAX = number`

它将给出 0 到 99 个随机数

示例::

```
import 'dart:math';
int MAX = 100;
print(new Random().nextInt(MAX));` 
```

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2020-07-30T17:48:58.307

让我用一个简单的骰子滚动应用程序形式的实际示例来解决这个问题，该应用程序在点击时随机调用 6 个骰子面图像中的 1 个到屏幕上。

首先声明一个生成随机数的变量（不要忘记导入 dart.math）。然后声明一个变量，将 1 到 6 之间的约束内的初始随机数解析为整数。

这两个变量都是静态私有的，以便初始化一次。这不是什么大问题，但如果您必须初始化一大堆随机数，这将是一个好习惯。

```
static var _random = new Random();
static var _diceface = _random.nextInt(6) +1 ; 
```

现在创建一个带有 ClipRRect 作为子对象的手势检测小部件，以便在点击时将六个骰子面图像之一返回到屏幕。

```
GestureDetector(
          onTap: () {
            setState(() {
              _diceface = _rnd.nextInt(6) +1 ;
            });
          },
          child: ClipRRect(
            clipBehavior: Clip.hardEdge,
            borderRadius: BorderRadius.circular(100.8),
              child: Image(
                image: AssetImage('images/diceface$_diceface.png'),
                fit: BoxFit.cover,
              ),
          )
        ), 
```

每次点击屏幕时都会生成一个新的随机数，并参考该数字来选择选择哪个骰子面图像。

我希望这个例子有帮助:)

[掷骰子应用程序使用飞镖中的随机数](https://i.stack.imgur.com/RPS8N.gif)

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2021-12-18T03:30:37.007

您可以通过这种方式简单地生成一个名为 Random() 的类；

你可以使用它并生成随机数

```
Random objectname = Random();
int number = objectname.nextInt(100);
// it will generate random number within 100. 
```

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2013-01-14T00:27:44.110

刚刚写了这个用于生成**正常**随机数的小类......这是我需要做的检查的一个不错的起点。（这些集合将分布在“钟形”曲线上。）种子将随机设置，但如果您希望能够重新生成一个集合，您只需传递一些特定的种子，就会生成相同的集合。

玩得开心...

```
class RandomNormal {
  num     _min, _max,  _sum;
  int     _nEle, _seed, _hLim;
  Random  _random;
  List    _rNAr;

  //getter
  List get randomNumberAr => _rNAr;

  num _randomN() {
    int r0 = _random.nextInt(_hLim);
    int r1 = _random.nextInt(_hLim);
    int r2 = _random.nextInt(_hLim);
    int r3 = _random.nextInt(_hLim);

    num rslt = _min + (r0 + r1 + r2 + r3) / 4000.0;  //Add the OS back in...
    _sum += rslt; //#DEBUG ONLY
    return( rslt );
  }

  RandomNormal(this._nEle, this._min, this._max, [this._seed = null]) {
    if (_seed == null ) {
      Random r = new Random();
      _seed    = r.nextInt(1000);
    }
    _hLim   = (_max - _min).ceil() * 1000;
    _random = new Random(_seed);
    _rNAr   = [];
    _sum    = 0;//#DEBUG ONLY

    h2("RandomNormal with k: ${_nEle}, Seed: ${_seed}, Min: ${_min}, Max: ${_max}");//#DEBUG ONLY
    for(int n = 0; n < _nEle; n++ ){
      num randomN = _randomN();
      //p("randomN  = ${randomN}");
      LIST_add( _rNAr, randomN );
    }

    h3("Mean = ${_sum/_nEle}");//#DEBUG ONLY
  }
}

new RandomNormal(1000, 80, 120);
new RandomNormal(1000, 80, 120);
new RandomNormal(1000, 80, 120);
new RandomNormal(1000, 80, 120);
new RandomNormal(1000, 80, 120);
new RandomNormal(1000, 80, 120);
new RandomNormal(1000, 80, 120); 
```

然后，您可以像这样使用它来检查在下限和上限之间生成的 1000 组的平均值。这些值存储在类中，因此可以在实例化后访问它们。

_swarmii

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2012-07-27T06:31:46.173

另一种解决方案可能是使用以下代码[DRandom](https://github.com/financeCoding/DRandom/blob/master/DRandom.dart)。此类应与种子一起使用。它为您在 .NET 中所期望的提供了一个熟悉的界面，它是从 mono 的 Random.cs 移植而来的。此代码可能不是加密安全的，并且未经统计测试。

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2019-12-20T06:43:59.553

对我来说，最简单的方法是：

```
import 'dart:math';
Random rnd = new Random();
r = min + rnd.nextInt(max - min);
//where min and max should be specified. 
```

感谢@adam-singer 在[这里的解释。](https://stackoverflow.com/questions/13318207/how-to-get-a-random-number-from-range-in-dart)

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2021-12-09T03:23:02.753

[使用Random](https://api.dart.dev/stable/2.15.0/dart-math/Random-class.html)类生成随机数。您可以选择为 Random 构造函数提供种子。

```
var random = Random();
random.nextDouble(); // Between 0.0 and 1.0: [0, 1)
random.nextInt(10); // Between 0 and 9. 
```

您甚至可以生成随机布尔值：

```
var random = Random();
random.nextBool(); // true or false 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2012-08-03T21:26:57.557

使用这个库[http://dart.googlecode.com/svn/branches/bleeding_edge/dart/lib/math/random.dart](http://dart.googlecode.com/svn/branches/bleeding_edge/dart/lib/math/random.dart)提供了一个很好的随机生成器，我认为它很快就会包含在 sdk 中希望它有所帮助

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2020-11-24T14:21:06.977

使用 Dart 生成器，用于生成一系列数字或值。

```
 main(){ 
       print("Sequence Number");
       oddnum(10).forEach(print);
     }
    Iterable<int> oddnum(int num) sync*{
     int k=num;
     while(k>=0){
       if(k%2==1){
        yield k;
       }
      k--;
     } 
} 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2021-11-26T19:11:58.893

使用 'dart:math' 库中的 Random() 类。

```
import 'dart:math';

void main() {
  int max = 10;
  int RandomNumber = Random().nextInt(max);
  print(RandomNumber);
} 
```

这应该生成并打印一个从 0 到 9 的随机数。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2022-02-02T10:06:12.230

此方法生成随机整数。最小值和最大值都包含在内。

确保将此行添加到文件中：`import 'dart:math';`然后您可以添加并使用此方法：

```
int randomInt(int min, int max) {
return Random().nextInt(max - min + 1) + min;
} 
```

因此，如果您调用`randomInt(-10,10)`它将返回一个介于 -10 和 10 之间的数字（包括 -10 和 10）。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2022-01-31T11:44:17.710

一种解决方案，您也可以直接使用构造函数调用所有函数。

```
import 'dart:math';

print(Random().nextInt(100)); 
```

# javascript - 如何在多页面项目中使用 RequireJS build profile + r.js

> ID：11674824
> 
> 赞同：34
> 
> 时间：2012-07-26T17:34:06.690
> 
> 标签：javascript, requirejs

我目前正在学习 RequireJS 基础知识，并且对构建配置文件、主文件以及在多页面项目中使用 RequireJS 有一些疑问。

我的项目的目录结构如下：

```
httpdocs_siteroot/
    应用程序/
        php文件...
    媒体/
        css/
            css 文件...
        js/
            库/
                jQuery.js
                需要.js
                小胡子.js
            电源/
                main.page1.js
                main.page2.js
                main.page3.js
            插件/
                jquery.plugin1.js
                jquery.plugin2.js
                jquery.plugin3.js
            实用程序/
                util1.js
                util2.js
        图片/

```

由于该项目不是单页应用程序，因此我为每个页面都有一个单独的主文件（尽管有些页面使用相同的主文件）。

我的问题是：

1.  RequireJS 对于非单页项目是否实用？

2.  在不使用优化器的情况下，我的每个主文件都以基本相同的配置选项开头：

    ```
    requirejs.config({
      paths: {
        'jquery': 'http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min'
      },
      baseUrl: '/media/js/',
      // etc...
    });
    require(['deps'], function() { /* main code */ }); 
    ```

    有没有办法避免这种情况？就像让每个主文件都包含相同的构建配置文件而不必实际构建它？

3.  r.js 应该进入`httpdocs_siteroot`的父目录吗？

4.  我的应用程序目录结构或我对 RequireJS 的使用是否存在明显问题？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-07-30T21:47:02.727

首先，这不是一个有唯一解的问题。我将解释我使用对我有用的 RequireJS 的方式，并且可能对你有用:)

其次，英语不是我的母语。非常感谢有关该语言的更正和提示。随意，伙计们:)

> 1）对于非单页的项目，require js 是否实用？

这取决于。例如，如果您的项目在页面之间没有共享代码，那么 RequireJS 帮助将是适度的。RequireJS 的主要思想是将应用程序模块化为可重用的代码块。如果您的应用程序仅使用特定于页面的代码，那么使用 RequireJS 可能不是一个好主意。

> 2) 在不使用优化器的情况下，我的每个主文件都以基本相同的配置选项开头。有没有办法避免这种情况？就像让每个主文件都包含相同的构建配置文件而不必实际构建它？

我看到的唯一方法是在主文件上进行配置，或者创建一个将配置 RequireJS 的模块，然后将该模块用作 main.js 的第一个依赖项。但这可能很棘手。我没有在我的应用程序中使用很多 main.js 文件；我只使用一个充当加载器（见下文）。

> 3) r.js 应该放在 httpdocs_siteroot 的父目录中吗？

不必要。你可以把它放在 /media 目录中，因为你所有的客户端东西都在那里。

> 4) 我的应用程序目录结构或我对 requirejs 的使用是否存在明显问题？

我不会这么说。另一方面，结构可能有点过于分散。例如，您可以将所有“第 3 方的东西”放在 /vendor 目录中。但这只是糖；您的结构将运行良好并且看起来是正确的。我认为主要问题是多个主文件中的 requirejs.config() 调用。

我现在遇到了同样的问题，我最终得到了以下解决方案：

1) 不要用定义包装不符合 AMD 标准的文件。虽然它有效，但您可以使用 requirejs.config 中的“shim”属性获得相同的结果（见下文）。

2）在多页面应用程序中，我的解决方案是不需要优化后的 main.js 文件中的页面特定模块。相反，我需要主文件中的所有共享代码（第 3 方和我自己的），将特定于页面的代码留在每个页面上加载。主文件最终只是一个加载器，它在加载所有共享/lib 文件后启动特定于页面的代码。

**这是我用 requirejs 构建多页应用程序的样板**

目录结构：

/src - 我把所有客户端的东西放在一个 src 目录中，所以我可以在这个目录中运行优化器（这是你的媒体目录）。

/src/vendor - 我在这里放置所有 3rd 方文件和插件，包括 require.js。

/src/lib - 在这里我放置了由整个应用程序或某些页面共享的所有我自己的代码。换句话说，不是特定于页面的模块。

/src/page-module-xx - 然后，我为我拥有的每一页创建一个目录。这不是一个严格的规则。

**/src/main.js**：这是整个应用程序的唯一主文件。它会：

*   配置 RequireJS，包括垫片
*   加载共享库/模块
*   加载特定于页面的主模块

这是 requirejs.config 调用的示例：

```
requirejs.config({
        baseUrl: ".",
        paths: {
            // libraries path
            "json": "vendor/json2",
            "jquery": "vendor/jquery",
            "somejqueryplugion": "vendor/jquery.somejqueryplufin",
            "hogan": "vendor/hogan",

            // require plugins
            "templ": "vendor/require.hogan",
            "text": "vendor/require.text"
        },
        // The shim section allows you to specify 
        // dependencies between non AMD compliant files.
        // For example, "somejqueryplugin" must be loaded after "jquery".
        // The 'exports' attribute tells RequireJS what global variable
        // it must assign as the module value for each shim.
        // For example: By using the configutation below for jquery, 
        // when you request the "jquery" module, RequireJS will 
        // give the value of global "$" (this value will be cached, so it is
        // ok to modify/delete the global '$' after all plugins are loaded.
        shim: {
            "jquery": { exports: "$" },
            "util": { exports: "_" },
            "json": { exports: "JSON" },
            "somejqueryplugin": { exports: "$", deps: ["jquery"] }
        }
    }); 
```

然后，在配置之后，我们可以对所有这些库发出第一个 require() 请求，然后对我们的“页面主”模块发出请求。

```
//libs
require([
    "templ",     //require plugins
    "text",
    "json",      //3rd libraries
    "jquery",
    "hogan", 
    "lib/util"  // app lib modules
 ],
    function () {
        var $ = require("jquery"),
            // the start module is defined on the same script tag of data-main.
            // example: <script data-main="main.js" data-start="pagemodule/main" src="vendor/require.js"/>
            startModuleName = $("script[data-main][data-start]").attr("data-start");

        if (startModuleName) {
            require([startModuleName], function (startModule) {
                $(function(){
                    var fn = $.isFunction(startModule) ? startModule : startModule.init;
                    if (fn) { fn(); }
                });
            });
        }
    }); 
```

正如您在上面 require() 的正文中看到的那样，我们期望 require.js 脚本标签上有另一个属性。**data-start**属性将保存当前页面的模块名称。

因此，在 HTML 页面上，我们必须添加这个额外的属性：

```
<script data-main="main" data-start="pagemodule/main" src="vendor/require.js"></script> 
```

通过这样做，我们将得到一个优化的 main.js，它包含“/vendor”和“/lib”目录（共享资源）中的所有文件，但不包含特定于页面的脚本/模块，因为它们不是在 main.js 中硬编码为依赖项。页面特定的模块将分别加载到应用程序的每个页面上。

“page main”模块应该返回一个`function()`将由上面的“app main”执行。

```
define(function(require, exports, module) {
    var util = require("lib/util");

    return function() {
        console.log("initializing page xyz module");
    };
}); 
```

**编辑**

下面是如何使用构建配置文件来优化具有多个文件的特定于页面的模块的示例。

例如，假设我们有以下页面模块：

/page1/main.js

/page1/dep1.js

/page1/dep2.js

如果我们不优化这个模块，那么浏览器会发出 3 个请求，每个脚本一个。我们可以通过指示 r.js 创建一个包并包含这 3 个文件来避免这种情况。

在构建配置文件的“模块”属性上：

```
...
"modules": [
   { 
      name: "main"  // this is our main file
   },
   {
        // create a module for page1/main and include in it
        // all its dependencies (dep1, dep2...)
        name: "page1/main",
        // excluding any dependency that is already included on main module
        // i.e. all our shared stuff, like jquery and plugins should not
        // be included in this module again.
        exclude: ["main"]
   }
] 
```

通过这样做，我们创建了另一个包含所有依赖项的每页主文件。但是，由于我们已经有一个可以加载所有共享内容的主文件，因此我们不需要在 page1/main 模块中再次包含它们。配置有点冗长，因为您必须为拥有多个脚本文件的每个页面模块执行此操作。

我在 GitHub 中上传了样板代码：[https](https://github.com/mdezem/MultiPageAppBoilerplate) ://github.com/mdezem/MultiPageAppBoilerplate 。它是一个工作样板，只需为 node 安装 node 和 r.js 模块并执行 build.cmd （在 /build 目录内，否则会失败，因为它使用相对路径）

我希望我已经清楚了。让我知道是否听起来很奇怪；）

问候！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T05:25:19.663

```
<script data-main="js/main" src="js/lib/require.js"></script>

// file: js/main

require(['./global.config'], function(){
    require(['./view/home'], function() {
        // do something
    });
}); 
```

这是我在我的项目中使用的。

# c# - WCF 中的 MessageHeader 问题

> ID：11674829
> 
> 赞同：3
> 
> 时间：2012-07-26T17:34:29.380
> 
> 标签：c#, .net, wcf, messagecontract

我在 WCF 中有两个单独的消息合同：

```
[MessageContract(WrapperName = "GetFooRequest", WrapperNamespace = "http://whatever.services.schema")]
public class GetFooRequest
{
    [MessageHeader]
    public int ResponseType { get; set; }

    [MessageBodyMember(Order = 1)]
    public string FirstName { get; set; }

    [MessageBodyMember(Order = 1)]
    public string LastName { get; set; }
}

[MessageContract(WrapperName = "GetBarRequest", WrapperNamespace = "http://whatever.services.schema")]
public class GetBarRequest
{
    [MessageHeader]
    public int ResponseType { get; set; }

    [MessageBodyMember(Order = 1)]
    public string FirstName { get; set; }

    [MessageBodyMember(Order = 1)]
    public string LastName { get; set; }
} 
```

这很好用，但是一旦我在 GetBarRequest 上更改 MessageHeader 的类型，该服务就不再起作用：

```
[MessageHeader]
public string ResponseType { get; set; } 
```

现在我在 GetFooRequest 和 GetBarRequest 中都有一个名为 ResponseType 的 MessageHeader，但它们有不同的类型。该服务不再起作用。为什么我不能在两个完全不同的消息合约上拥有同名/不同类型的 MessageHeader？

我得到的错误非常神秘：

```
Error: Cannot obtain Metadata from http://localhost:42575/Services/Test/TestService.svc If this is a Windows (R) Communication Foundation service to which you have access, please check that you have enabled metadata publishing at the specified address.  For help enabling metadata publishing, please refer to the MSDN documentation at http://go.microsoft.com/fwlink/?LinkId=65455.WS-Metadata Exchange Error    URI: http://localhost:42575/Services/Test/TestService.svc    Metadata contains a reference that cannot be resolved: 'http://localhost:42575/Services/Test/TestService.svc'.    Content Type application/soap+xml; charset=utf-8 was not supported by service http://localhost:42575/Services/Test/TestService.svc.  The client and service bindings may be mismatched.    The remote server returned an error: (415) Unsupported Media Type.HTTP GET Error    URI: http://localhost:42575/Services/Test/TestService.svc    There was an error downloading 'http://localhost:42575/Services/Test/TestService.svc'.    The underlying connection was closed: The connection was closed unexpectedly. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T20:55:17.807

消息契约在 wsdl 上显示为原始类型，因此`GetBarRequest`看起来`GetFooRequest`如下 ![](../Images/dc55e42972fc9add7c25df8795855035.png)

WCF 不按名称和类型验证架构，只有名称，所以类型更改名称相同，发生以下错误

> ** 操作引用已从 ** 操作导出的消息元素 [ [http://tempuri.org/:ResponseType] 。](http://tempuri.org/:ResponseType])您可以通过更改方法名称或使用 OperationContractAttribute 的 Name 属性来更改其中一项操作的名称。或者，您可以使用 MessageContract 编程模型更详细地控制元素名称。

```
[MessageHeader(Name = "TextResponseType")]
public string ResponseType { get; set; }  - Name property resolve the issue 
```

# c# - 将数据表绑定到报表查看器表时出错

> ID：11674832
> 
> 赞同：1
> 
> 时间：2012-07-26T17:34:58.227
> 
> 标签：c#, asp.net, datatable, reportviewer

我已经填写了数据表。我想在报告中显示它。我正在这样做：

```
ReportDataSource source = new ReportDataSource("dtss", dt);
ReportViewer1.LocalReport.DataSources.Clear();
ReportViewer1.LocalReport.DataSources.Add(source);
ReportViewer1.DataBind();
ReportViewer1.LocalReport.Refresh(); 
```

但是当我尝试构建时，我得到了错误：

> 数据集“DataSet1”指的是不存在的数据源“”。

我错过了什么？使用 Webforms(ASP.net)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T19:50:37.887

您为 ReportDataSource 提供的名称需要与 DataSet 的名称（在报告中定义）相匹配。例如，在第 1 行（您的代码，上面），您需要说：

```
ReportDataSource source = new ReportDataSource("DataSet1", dt); 
```

或将数据集（在您的报告中）重命名为“dtss”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-08T14:14:30.357

选择。

显然，如果您在 rdlc 文件中添加一个 DataSet，它会自动关联 xml 中的名称，并且当您从 rdlc 中删除它时，它不会从 xml 中删除它，因此它只会为您提供它认为的参考空数据集，无法评估。我首先将我的第二个命名为 DataSet2，然后在设计中对其进行设置后决定将其删除并重命名，但您必须返回 xml 并删除整个空的 DataSet 节点<>。希望这可以帮助那些无法通过上述答案解决问题的人。

# objective-c - 动画结束后 Cocos2D setvisible =no

> ID：11674834
> 
> 赞同：1
> 
> 时间：2012-07-26T17:35:16.937
> 
> 标签：objective-c, ios, animation, cocos2d-iphone

在我的代码小行星接近飞船时，如果激光击中小行星，我想实现爆炸动画。小行星应该运行爆炸动画并切换到隐形模式。

击中目标时没有动画，目标成功切换到隐形模式。在不将对象设置为不可见的情况下，动画运行良好。当我因为程序代码将它放在一起而没有看到动画时，它很快将对象设置为不可见。

我怎样才能看到动画然后将其设置为不可见模式。（目标又名小行星的速度各不相同，其中一些太快而另一些太慢）使目标隐形的想法是防止它们撞到船。

我试过这个问题&回答[cocos2d autoremove sprite after animation](https://stackoverflow.com/questions/4174445/cocos2d-autoremove-sprite-after-animation) didn't work

```
for (CCSprite *asteroid in _asteroids) 
{        
     if (!asteroid.visible) continue;

        for (CCSprite *shipLaser in _shipLasers)
        {                        
            if (!shipLaser.visible) continue;

            if (CGRectIntersectsRect(shipLaser.boundingBox, asteroid.boundingBox)) 
            {                
                [[SimpleAudioEngine sharedEngine] playEffect:@"explosion_large.caf"];

                //explosion zombie animation starts 
                NSMutableArray *walkAnimFrames = [NSMutableArray array];
                for(int i = 1; i <= 12; ++i) 
                {
                    [walkAnimFrames addObject:
                     [[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:
                      [NSString stringWithFormat:@"zombieexplodes%d.png", i]]];
                }
                CCAnimation *walkAnim = [CCAnimation 
                                         animationWithFrames:walkAnimFrames delay:0.1f];

                _dieAction = [CCRepeatForever actionWithAction:
                               [CCAnimate actionWithAnimation:walkAnim restoreOriginalFrame:NO]];

                [asteroid runAction:_dieAction];
                //explosion zombie ends

                [self addPoint];

                //change meme to woohoo.png   
                [_ship setDisplayFrame:[[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName: @"woohoo.png"]];

                shipLaser.visible = NO;
                [asteroid setDisplayFrame:[[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName: @"zombieexplodes13.png"]];
                //asteroid.visible=NO;

                continue;
            }
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T17:43:55.307

没有在 Cocoa2D 中进行游戏开发，但是当我制作这样的游戏时，我会有一个单独的爆炸对象，它会在动画结束时自行移除。所以你应该生成一个爆炸物体并立即使小行星隐形。如果您无法在动画完成时自动移除工作，请为爆炸计时，然后在您的爆炸对象上设置一个计时器以自行移除。

我注意到你正在使小行星隐形......你应该将它们移除 - 当它们隐形时它们仍然会占用内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T18:09:49.667

在调用时使用这种风格：

```
CCAnimation *walkAnim = [CCAnimation 
                         animationWithFrames:walkAnimFrames delay:0.1f];
id animate  = [CCAnimate actionWithAnimation:walkAnim restoreOriginalFrame:NO];
id calFuncN = [CCCallFuncN actionWithTarget:self selector:@selector(explodeAnimDone:)];
id sequence = [CCSequence actions:animate, calFuncN,nil];

[asteroid runAction:sequence]; 
```

动画完成后禁用精灵。

```
-(void)explodeAnimDone:(id)sender
{
    CCNode *myNode = (CCNode*)sender;
    myNode.visible = false;
} 
```

# asp.net-mvc-3 - 不知道如何用 MvcMailer 做附件

> ID：11674837
> 
> 赞同：1
> 
> 时间：2012-07-26T17:35:25.530
> 
> 标签：asp.net-mvc-3, mvcmailer

我究竟如何以及在何处放置字符串的实际文件位置`attachmentPath`：

```
public virtual MailMessage Welcome(string attachmentPath)
    {
        var mailMessage = new MailMessage{Subject = "Welcome to MvcMailer"};
        ...
        mailMessage.Attachments.Add(new Attachment(attachmentPath));
        PopulateBody(mailMessage, "Welcome");
        return mailMessage;
    } 
```

假定服务器上的物理文件位置`c:\inetpub\server\website\docs\test.pdf`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T18:47:03.783

你会做这样的事情：

```
mailMessage.Attachments.Add(new Attachment((Path.Combine(AppDomain.CurrentDomain.BaseDirectory) + "\docs\") + attachmentFile)) 
```

attachmentFile 是您的文件`test.pdf`。

c:\inetpub\server\website\docs\test.pdf

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T11:16:38.763

只需将 attachmentPath 替换为 @"c:\inetpub\server\website\docs\test.pdf" ，如下所示：

更改附件路径

```
mailMessage.Attachments.Add(new Attachment(attachmentPath)); 
```

@"c:\inetpub\server\website\docs\test.pdf"

```
mailMessage.Attachments.Add(new Attachment(@"c:\inetpub\server\website\docs\test.pdf")); 
```

# python - matlab到python代码转换

> ID：11674841
> 
> 赞同：1
> 
> 时间：2012-07-26T17:35:37.950
> 
> 标签：python, matlab, numpy, scipy, porting

由于缺少 matlab，我正在尝试将 matlab 代码转换为 python。如果您能告诉我以下我找不到的函数的 python 等效项，我将不胜感激：

```
letter2number_map('A') = 1;
number2letter_map(1) = 'A';
str2num()

strcmp()
trace()
eye()
getenv('STRING')

[MI_true, ~, ~] = function() What does ~ mean?
mslice
ones() 
```

非常感谢您的友好帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T17:44:54.247

我实际上并不了解 matlab，但我可以回答其中的一些问题（假设您将 numpy 导入为 np）：

```
letter2number_map('A') = 1;  -> equivalent to a dictionary:  {'A':1}    
number2letter_map(1) = 'A';  -> equivalent to a dictionary:  {1:'A'}

str2num() -> maybe float(), although a look at the docs makes 
             it look more like eval -- Yuck. 
             (ast.literal_eval might be closest)
strcmp()  -> I assume a simple string comparison works here.  
             e.g. strcmp(a,b) -> a == b
trace()   -> np.trace()    #sum of the diagonal
eye()     -> np.eye()      #identity matrix (all zeros, but 1's on diagonal)
getenv('STRING')  -> os.environ['STRING'] (with os imported of course)
[MI_true, ~, ~] = function() -> Probably:  MI_true,_,_ = function()  
                                although the underscores could be any  
                                variable name you wanted. 
                                (Thanks Amro for providing this one)
mslice    -> ??? (can't even find documentation for that one)
ones()    -> np.ones()     #matrix/array of all 1's 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T17:41:13.613

从字母到数字的转换：`ord("a") = 97`

从数字转换为字母：`chr(97) = 'a'`

（你可以减去 96 来得到你正在寻找的小写的结果，或者 64 得到大写的结果。）

将字符串解析为 int：`int("523") = 523`

比较字符串（区分大小写）：`"Hello"=="Hello" = True`

不区分大小写：`"Hello".lower() == "hElLo".lower() = True`

`ones()`：`[1]*ARRAY_SIZE`

单位矩阵：`[[int(x==y) for x in range(5)] for y in range(5)]`

要制作二维数组，您需要使用[numpy](http://numpy.scipy.org/)。

编辑：

或者，您可以制作一个 5x5 二维数组，如下所示：`[[1 for x in range(5)] for y in range(5)]`

# r - 如何在 R 的 twitteR 包中提取推文地理编码

> ID：11674842
> 
> 赞同：11
> 
> 时间：2012-07-26T17:35:39.917
> 
> 标签：r, twitter, geocode

最近 Edwin Chen 发布了一张很棒的地图，显示了苏打水、汽水和可乐的区域使用情况，这些地图是根据地理编码的推文创建的，这些推文在饮酒的背景下涉及这些词。[http://blog.echen.me/2012/07/06/soda-vs-pop-with-twitter/](http://blog.echen.me/2012/07/06/soda-vs-pop-with-twitter/)

他提到他使用了由 Jeff Gentry 在 R 中创建的 twitteR 包。果然，很容易收集使用给定单词的推文并将它们放入数据框中：

```
require(twitteR)
require(plyr)
cat.tweets<-searchTwitter("cats",n=1000)
tweets.df = ldply(cat.tweets, function(t) t$toDataFrame() ) 
```

数据框 (tweets.df) 将包含每条推文的用户 ID、推文文本等，但似乎不包含地理编码。关于如何在 R 中获取它的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-11-01T14:48:08.663

地理编码是否意味着经度和纬度坐标？如果是，以下命令对我有用。

```
cat.tweets = searchTwitter("cats",n=1000)
tweets.df = do.call("rbind",lapply(cat.tweets,as.data.frame)) 
```

来源：[链接](http://parasdoshi.com/2012/11/24/grab-twitter-search-data-using-r-and-export-to-a-tab-delimited-file/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T00:46:24.260

我一直在修改 R 函数，您输入搜索文本、搜索站点的数量以及每个站点周围的半径。例如`twitterMap("#rstats",10,"10mi")`这里的代码：

```
twitterMap <- function(searchtext,locations,radius){
require(ggplot2)
require(maps)
require(twitteR)
#radius from randomly chosen location
radius=radius
lat<-runif(n=locations,min=24.446667, max=49.384472)
long<-runif(n=locations,min=-124.733056, max=-66.949778)
#generate data fram with random longitude, latitude and chosen radius
coordinates<-as.data.frame(cbind(lat,long,radius))
coordinates$lat<-lat
coordinates$long<-long
#create a string of the lat, long, and radius for entry into searchTwitter()
for(i in 1:length(coordinates$lat)){
coordinates$search.twitter.entry[i]<-toString(c(coordinates$lat[i],
coordinates$long[i],radius))
}
# take out spaces in the string
coordinates$search.twitter.entry<-gsub(" ","", coordinates$search.twitter.entry ,
fixed=TRUE)

#Search twitter at each location, check how many tweets and put into dataframe
for(i in 1:length(coordinates$lat)){
coordinates$number.of.tweets[i]<-
 length(searchTwitter(searchString=searchtext,n=1000,geocode=coordinates$search.twitter.entry[i]))
}
#making the US map
all_states <- map_data("state")
#plot all points on the map
p <- ggplot()
p <- p + geom_polygon( data=all_states, aes(x=long, y=lat, group = group),colour="grey",     fill=NA )

p<-p + geom_point( data=coordinates, aes(x=long, y=lat,color=number.of.tweets
                                     )) + scale_size(name="# of tweets")
p
}
# Example
searchTwitter("dolphin",15,"10mi") 
```

![示例地图](../Images/8a8dd8635d02de0266b02c7d209a89d3.png)

我遇到了一些大问题，我不知道如何处理。首先，代码搜索 15 个不同的随机生成位置，这些位置是从美国东部最大经度到西部最大经度、最北纬到最南纬度的均匀分布生成的。这将包括不在美国的地点，比如加拿大明尼苏达森林湖以东。我想要一个随机检查生成的位置是否在美国的函数，如果不是则丢弃它。更重要的是，我想搜索数千个位置，但 twitter 不喜欢这样，并给了我一个`420 error enhance your calm`. 所以也许最好每隔几个小时搜索一次，慢慢建立一个数据库，删除重复的推文。最后，如果一个人选择了一个远程流行的主题，R 会给出一个类似的错误`Error in function (type, msg, asError = TRUE) : transfer closed with 43756 bytes remaining to read`。我对如何解决这个问题有点困惑。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-26T21:05:02.133

这是一个玩具示例，假设您每次调用只能提取 100 条推文：

```
require(twitteR)
require(plyr)
URL = paste('http://search.twitter.com/search.atom? 
      q=','&geocode=39.724089,-104.820557,3mi','&rpp=100&page=', page, sep='') #Aurora,CO with radii of 3mi
XML = htmlTreeParse(URL, useInternal=TRUE)
entry = getNodeSet(XML, "//entry")
tweets = c()

for (i in 1:99){ 
    t = unlist(xpathApply(entry[[i]], "//title", xmlValue))
    tweets = c(tweets,t)
} 
```

这个解决方案可能不太优雅，但我能够获得给定特定地理编码的推文。

# asp.net - 获取隐藏字段的值

> ID：11674844
> 
> 赞同：4
> 
> 时间：2012-07-26T17:35:52.237
> 
> 标签：asp.net, hidden-field

我有一个带有三个隐藏字段的 ASP.NET 页面。（如果我能让它工作，只有一个会做。只是表明我已经尝试了几件事。）

```
<input type="hidden" id="hiddenSkillId1" runat="server" />
<input type="hidden" id="hiddenSkillId2" />
<asp:HiddenField ID="hiddenSkillId3" runat="server"/> 
```

我还有一个由 AJAXControlToolKit.AutoCompleteExtender.OnClientItemSelected 事件调用的 JavaScript 函数：

```
<script type="text/javascript">
function SkillPartialMatchSelected(source, eventArgs ) {
    document.getElementById("ctl00_Content_hiddenSkillId1").Value = eventArgs.get_value();
    document.getElementById("hiddenSkillId2").Value = eventArgs.get_value();
    document.getElementById("ctl00_Content_hiddenSkillId3").Value = eventArgs.get_value();
}
</script> 
```

使用断点并检查值，我已经确认在客户端设置了 vales。

最后，我为连接到 LinkBut​​ton OnClick 事件的页面提供了 C# 代码。

```
protected void AddSkillToProspect(object sender, EventArgs e)
{
   string selectedKey1 = Request.Form[hiddenSkillId1.ClientID];
   string selectedKey2 = Request.Form["hiddenSkillId2"];
   string selectedKey3 = Request.Form[hiddenSkillId3.ClientID];
   string selectedItem = SkillNameBox.Text.Trim();   
   ...
} 
```

所有三个 selectedKey 值均为 null，但 ASP.NET 文本编辑中的 selectedItem 值具有值。

从我读过的内容来看，其中一个应该可以工作。我错过了什么吗？我该怎么做才能将客户端的 JavaScript 函数的值返回到服务器端？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T20:05:29.283

该问题与 JavaScript 中的大小写敏感有关。尽管您已经为这些字段设置了 .Value，但这与 .value 不同。更改您的 javascript 以设置 .value，您应该已准备就绪。

```
<script type="text/javascript">
function SkillPartialMatchSelected(source, eventArgs )     
{
    document.getElementById("ctl00_Content_hiddenSkillId1").value = eventArgs.get_value();
    document.getElementById("hiddenSkillId2").value = eventArgs.get_value();
    document.getElementById("ctl00_Content_hiddenSkillId3").value = eventArgs.get_value(); 
} 
</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T17:44:03.987

您的隐藏控件`runat=server`上有它们意味着它们是服务器控件，您可以通过它们背后的代码中的 id 访问它们

这种方式的区别将`hiddenSkillId1`是一个 htmlserver 控件，`hiddenSkillId2`普通的 html 控件，而这个`hiddenSkillId3`是一个 asp.net 控件

```
string selectedKey1 = hiddenSkillId1.Value;
string selectedKey3 = hiddenSkillId3.Text;
string selectedKey2 = Request.Form[hiddenSkillId2]; 
```

所以请尝试以这种方式使用它

# mysql - 聚合数据表

> ID：11674849
> 
> 赞同：8
> 
> 时间：2012-07-26T17:35:56.060
> 
> 标签：mysql

我正在构建一个大型数据库（数百万行）的前端。数据是不同公司负荷的用水量，表格如下所示：

```
id | company_id | datetime            | reading | used | cost
=============================================================
1  | 1          | 2012-01-01 00:00:00 | 5000    | 5    | 0.50
2  | 1          | 2012-01-01 00:01:00 | 5015    | 15   | 1.50
.... 
```

在前端，用户可以选择他们想要查看数据的方式，例如：6 小时增量、每日增量、每月等。快速执行此操作的最佳方法是什么。鉴于数据变化如此之大以及任何一组数据将被看到的次数，将查询数据缓存在 memcahce 或类似的东西中几乎没有意义，并且由于变量太多，无法预先构建数据。

我认为使用某种聚合聚合表可以使诸如`readings`,`readings_6h`之类的表`readings_1d`具有完全相同的结构，只是已经聚合。

如果这是一个可行的解决方案，那么使聚合表保持最新和准确的最佳方法是什么。除了来自仪表的数据外，该表是只读的。用户不必更新或写入它。

一些可能的解决方案包括：

1）坚持使用组/聚合函数进行查询

2）做一个基本的选择和保存

```
SELECT `company_id`, CONCAT_WS(' ', date(`datetime`), '23:59:59') AS datetime, 
MAX(`reading`) AS reading, SUM(`used`) AS used, SUM(`cost`) AS cost 
FROM `readings`
WHERE `datetime` > '$lastUpdateDateTime'
GROUP BY `company_id` 
```

3）重复键更新（不确定如何在这里进行聚合，还要确保数据准确，不计算两次或丢失行。

```
INSERT INTO `readings_6h` ... 
SELECT FROM `readings` .... 
ON DUPLICATE KEY UPDATE .. calculate... 
```

4) 其他想法/建议？

我目前正在执行选项 2，这需要大约 15 分钟将 +- 100k 行聚合成 +- 30k 行，超过 4 个表（_6h、_1d、_7d、_1m、_1y）

**TL;DR 查看/存储大量无法有效缓存的报告的聚合数据的最佳方法是什么。**

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-26T19:04:53.197

这个功能最好由一个名为[materialized view](http://en.wikipedia.org/wiki/Materialized_view)的特性来提供，遗憾的是 MySQL 缺少该特性。您可以考虑迁移到不同的数据库系统，例如 PostgreSQL。

有多种方法可以使用存储过程、触发器和事件来模拟 MySQL 中的物化视图。您创建一个更新聚合数据的存储过程。如果必须在每次插入时更新聚合数据，您可以定义一个触发器来调用该过程。如果数据必须每隔几个小时更新一次，您可以定义一个[MySQL 调度程序事件](https://dev.mysql.com/doc/refman/5.7/en/event-scheduler.html)或一个 cron 作业来完成它。

有一种组合方法，类似于您的选项 3，它不依赖于输入数据的日期；想象一下如果一些新数据来得太晚并且没有进入聚合会发生什么。（您可能没有这个问题，我不知道。）您可以定义一个将新数据插入“积压”的触发器，并让该过程仅从积压更新聚合表。

本文详细介绍了所有这些方法：[http ://www.fromdual.com/mysql-materialized-views](http://www.fromdual.com/mysql-materialized-views)

# python - urllib2.urlopen 中的内容问题

> ID：11674850
> 
> 赞同：0
> 
> 时间：2012-07-26T17:36:03.863
> 
> 标签：python, web-scraping

我有一些简单的 python 代码向服务器发出请求

```
html_page = urllib2.urlopen(baseurl, timeout=20)
print html_page.read()
html_page.close() 
```

当我试图抓取一个包含“-”（破折号）字符的页面时。它是浏览器中的一个破折号，但是当我尝试打印出 urlopen 响应的请求时，它会打印为“？”。我尝试使用本地文件重新创建 html 页面，从源代码复制受影响的文本，但我无法重新创建它。

还有哪些其他因素/变量可能在起作用？这可能与编码有关吗？

**更新**：我现在知道这个问题与编码有关。我在“iso-8859-1”中编码的网站。问题是我仍然无法解码它，即使遵循[Python：Converting from ISO-8859-1/latin1 to UTF-8](https://stackoverflow.com/questions/6539881/python-converting-from-iso-8859-1-latin1-to-utf-8)

解码后的字符给了我：

```
>>>text.decode("iso-8859-1")
  u"</strong><p>Let's\x97in "
>>> text.decode("iso-8859-1").encode("utf8")
  "</strong><p>Let's\xc2\x97in "
>>> print text.decode("iso-8859-1").encode("utf8")
  </strong><p>Let'sin 
```

角色完全消失了。有人有想法么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T22:47:07.760

所以感谢亚当·罗森菲尔德，我发现了我的问题。该网站表明该字符集是 iso-8859-1

```
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
```

卜！我遇到问题的字符是“em dash”，用 Windows-1252 编码

```
>>> text.decode("windows-1252")
  </strong><p>Let's\u2014in"
>>> print text.decode("windows-1252")
  </strong><p>Let's—in 
```

多谢你们！

# facebook - Facebook 考拉循环无法正常工作

> ID：11674855
> 
> 赞同：0
> 
> 时间：2012-07-26T17:36:14.340
> 
> 标签：facebook, koala

以下是不起作用的代码 -

```
for x in @y
  v = @graph.get_object("me") # This is not a useful code. I'm just trying to make a point
end 
```

虽然以下代码有效

```
u = @graph.get_object("me")
for x in @y
  v = u
end 
```

我很感激这个问题的帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T19:45:26.437

我尝试在控制台中测试类似的东西，然后说类似

```
for i in 1..1000
  @graph.get_object("me")
end 
```

一段时间后，它终于完成了..但花了一段时间。我假设您和 facebook 之间的连接有可能被阻止/关闭/超时。

每次通话大约需要一秒钟。我认为问题在于 facebook 的 API 有带宽限制。因此，在您的第一个代码块的情况下，您一遍又一遍地调用 get_object，而在第二个代码块中，您只需调用 API 一次，然后一遍又一遍地分配该值。

# sql - 带有 XML 命名空间的 SQL Server 2005 - 查询多个节点和属性

> ID：11674859
> 
> 赞同：2
> 
> 时间：2012-07-26T17:36:36.367
> 
> 标签：sql, sql-server, xml, namespaces, xml-namespaces

我有以下 XML 和代码，可以拉回 AccountNumber 和 Status。我也需要拉回来...

*   MFRRequest 的 ID 属性
*   CaseInformation 节点中的几个元素

我不确定如何获取 ID 属性，我想知道......我可以在同一个查询中获取所有这些信息（来自多个节点）吗？

谢谢！

```
DECLARE @doc xml
SET @doc =
'<?xml version="1.0" encoding="UTF-8"?>
<p:OrderRequest xmlns:p="http://XXX.Schemas.OrderRequest/2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://XXX.Schemas.OrderRequest/2 OrderRequestV2.xsd ">
  <p:Header>
    <p:SCRARequestCount>0</p:SCRARequestCount>
    <p:MFRRequestCount>1</p:MFRRequestCount>
    <p:FileCreatedAt>2001-12-31T12:00:00</p:FileCreatedAt>
    <p:RequestFileName>p:RequestFileName</p:RequestFileName>
  </p:Header>
  <p:RequestItems>
  <p:MFRRequest id="1" priority="">
      <p:AccountNumber>9999999</p:AccountNumber>
      <Status>Initial</Status>
      <p:CaseInformation>
       <ReferralDate>2011-01-01</ReferralDate>
       <LoanType>1A</LoanType>
       <ARM>Yes</ARM>
        <InvestorNumber>InvestorNumber</InvestorNumber>
        <PropertyAddress>PropertyAddress</PropertyAddress>
        <PrivateLabel>Yes</PrivateLabel>
        <CaseNumber>01-11111/AK/</CaseNumber>
        <SuspenseBalance>9999.00</SuspenseBalance>
        <TitleOrderedDate>2011-09-01</TitleOrderedDate>
        <TotalMonthlyPayment>876.99</TotalMonthlyPayment>
      </p:CaseInformation>
    </p:MFRRequest>
  </p:RequestItems>
</p:OrderRequest>'
;WITH XMLNAMESPACES('http://XXX.Schemas.OrderRequest/2' AS p) 

SELECT     
 Y.i.value('Status[1]', 'varchar(10)') AS Status ,
 Y.i.value('p:AccountNumber[1]', 'varchar(10)') AS AccountNumber
FROM      @doc.nodes('/p:OrderRequest/p:RequestItems/p:MFRRequest') AS Y(i) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T17:57:21.160

尝试这样的事情：

```
;WITH XMLNAMESPACES('http://XXX.Schemas.OrderRequest/2' AS p)
SELECT 
    MFRRequestID = Y.i.value('(@id)[1]', 'int'),
    RequestStatus = Y.i.value('Status[1]', 'varchar(10)') ,
    AccountNumber = Y.i.value('p:AccountNumber[1]', 'varchar(10)'),
    ReferralDate = CIF.value('(ReferralDate)[1]', 'varchar(25)'),
    CaseInfoType = CIF.value('(Type)[1]', 'varchar(25)')
FROM 
    @doc.nodes('/p:OrderRequest/p:RequestItems/p:MFRRequest') AS Y(i)
CROSS APPLY
    i.nodes('p:CaseInformation') AS Tbl(CIF) 
```

基本上，一旦您的伪表中有`<p:MFRRequest>`XML 元素，您就可以再次使用第二个调用来获取（可能是多个）节点，并使用对这个新的第二个伪表的调用来从中提取单个信息位。`Y(i)``.nodes()``<p:CaseInfomration>``.value()`

# ms-access - 访问97自定义功能

> ID：11674860
> 
> 赞同：0
> 
> 时间：2012-07-26T17:36:42.690
> 
> 标签：ms-access

我需要编写一个自定义函数，该函数将运行自定义代码，以便在将他人日历中的约会添加到她的 Outlook 日历时自动将其转发给我。我已经有了代码，但我需要它在特定表单关闭时运行。如果我选择表单的 on close 属性，它想创建自己的事件过程。我可以使用宏并使用运行代码，但它需要一个函数的名称。所以我需要一个自定义函数的例子。谁能帮我？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T18:46:18.153

您不能像这样使用关闭事件的任何原因：

```
Private Sub Form_Close()
   MyCustomSub
End Sub 
```

# objective-c - 我应该如何更新计划选择器的间隔？

> ID：11674862
> 
> 赞同：1
> 
> 时间：2012-07-26T17:36:50.023
> 
> 标签：objective-c, cocos2d-iphone

我有一个预定的选择器，我想更新间隔，我试过打电话

```
[self schedule:@selector(method) interval:1]; 
```

但它给了我这个日志：

> CCScheduler#scheduleSelector。选择器已安排。更新间隔从：0.12 到 1.00

这样做是正确的还是我应该先取消计划？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T17:42:12.227

这是正确的做法。评论来自`CCScheduler.h`：

*如果选择器已经被调度，那么只会更新间隔参数而不重新调度它。*

编辑：由于**cocos2d**是开源的，你也可以随便`CCScheduler.m`看看，看看它是否干净地处理了这个案例：

```
if( selector == timer->selector ) {
   CCLOG(@"CCScheduler#scheduleSelector. Selector already scheduled. Updating interval from: %.4f to %.4f", timer->interval, interval);
   timer->interval = interval;
   return;
} 
```

# android - 如何使用 JQuery mobile 在 JQuery 中实现事件 onkeyup？

> ID：11674864
> 
> 赞同：-2
> 
> 时间：2012-07-26T17:36:53.887
> 
> 标签：android, jquery, html, mobile

我有一个移动应用程序，目前无法使用 JQuery Mobile，**只能使用 JQuery**。我发现在 Android 手机中，“onkeyup”事件根本不起作用，只有当用户键入“back”时才会触发该事件。

我有一个“输入”字段 (HTML5)，需要将 onkeyup 事件附加到它。该怎么办？我试图替换 val()，添加像“#”这样的 val somhting 并快速删除它。它没有帮助。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T17:55:26.243

您可以在下面使用它。

```
$(document).ready(function() {
$("#MyElement").keyup(Function(e) {
$("#MyElement").val("MyValue");
});
}); 
```

e 参数应该告诉您使用属性 keycode 按下了哪个键以及哪个键。希望这可以帮助您找到正确的方向。

# javascript - 带有允许标记的列的 jQuery 表

> ID：11674867
> 
> 赞同：1
> 
> 时间：2012-07-26T17:37:07.990
> 
> 标签：javascript, jquery, tagging

到目前为止，我有一个简单的 HTML 表，其中包含一个额外的列，其中包含一个标记为 dropable 的 <ul> 元素。我在表格下方有一个元素列表，并且能够将该标签拖到特定单元格以标记显示的数据行（使用 ajax 服务器通信和其他东西）。

现在我想要一个更漂亮的表，它允许列排序、重新排序、搜索和分页，并且还可以对特定行进行简单的拖放（如果可能）标记。我正在查看 jquery datatable 或 flextable（或类似的强大库）并添加一个允许这种动态编辑的列。

我看到至少两个选项：尝试在表格内实现拖放以与以前相同或尝试编写使用“标签”库的单元格编辑器（例如[http://tagedit.webwork-albrecht. de/](http://tagedit.webwork-albrecht.de/) ) 但我需要一个库，它可以让您轻松选择预先存在的标签。

我的问题：这两个选项中的任何一个是否可能，如果，如何？还是有更多的“缺货”选项来做到这一点？

# html - 我的超链接跨越整个页面，而不仅仅是图像

> ID：11674875
> 
> 赞同：1
> 
> 时间：2012-07-26T17:37:38.450
> 
> 标签：html, css

我有一个徽标，我想链接回我的主页。但是，当我超链接徽标时，我注意到链接跨越整个页面（即跨越徽标左侧和右侧的空白），而不仅仅是在徽标图像上。

我的 HTML：

```
<a href="#" id="splash-logo">
    <img src="images/splash-logo.png" width="259" height="51">   
</a> 
```

我的 CSS：

```
#splash-logo {
    clear: both;
    width:100%;
    display: inline-block;
    text-align:center;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T17:39:23.500

去掉 width:100%，因为它是 100% 宽度，当然它会跨越（水平）页面

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T17:40:14.293

您的链接宽度是父标签的宽度。而不是做 100%，只需指定块的宽度。

# c# - 是否可以在 Windows 工作流规则条件中使用 LINQ 查询？

> ID：11674878
> 
> 赞同：1
> 
> 时间：2012-07-26T17:37:47.717
> 
> 标签：c#, workflow-foundation, rule-engine

我正在对规则引擎的实现进行原型设计，以帮助我们使用订购门户。例如，如果订购了某些商品，则给予商品折扣或要求批准。我们还希望能够为美元金额、用户层次结构添加规则，并将其应用于一个或多个客户。

我觉得 WWF 很好地满足了这一需求。

所有这些都说了，但是我很难弄清楚如何最好地设置一些更复杂的规则。我有一个我觉得最好在 LINQ 查询中描述的“条件”，如下所示：

`var y = from ol in currentOrder.OrderLines where ol.ItemCode == "MYITEMCODE" select ol;`

我不反对为规则引擎使用不同的框架或向我们的对象添加额外的属性/方法（例如：`OrderHasItem(ItemCode)`等）以使这些规则更加简化，但我想避免这样做。感觉弄巧成拙，因为它迫使我们走上可能需要更改新规则的代码的道路。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T15:43:46.233

是的，您可以将 Linq 查询与 Workflow 一起使用。在 WF 中，您所指的规则是在运行时计算的表达式。您的查询正在根据条件选择有序性的子集。

例如，如果我有一组名称，并且我只想查看以“R”开头的名称。我可以编写以下代码。

```
private static void ShowQueryWithCode(IEnumerable<string> names)
{
    Console.WriteLine("LINQ Query in Code - show names that start with 'R'");

    // Assuming there are no null entries in the names collection
    var query = from name in names where name.StartsWith("R") select name;

    // This is the same thing as 
    // var query = names.Where(name => name.StartsWith("R"));
    foreach (var name in query)
    {
        Console.WriteLine(name);
    }

    Console.WriteLine();
} 
```

对工作流做同样的事情

**步骤 1：使用 IEnumerable 类型的 In 参数创建工作流**

在这里你可以看到我添加了 in 参数 ![在争论中](../Images/952306584988a9a4823d686f0f0a4c92.png)

**步骤 2：为 IEnumerable 类型的查询添加一个变量**

在添加变量之前，您需要包含一个具有变量的活动。在这个工作流程中，我添加了一个序列。

![多变的](../Images/d933dd8f9f8ce15be0f9b597487a7912.png)

**第 3 步：为查询分配要使用的 LINQ 表达式** 您可以使用方法链或查询语法。

![表达](../Images/4469a8693cd32e642eac742b7159fbdf.png)

**第 4 步：遍历集合**

在完成的工作流程中，我使用了 ForEach 活动来迭代名称列表并将它们写入控制台。

![工作流程1](../Images/43ed5f80b6b664d4e51ee9992d5280b7.png)

此示例在 .NET 4.5 中使用 C#，但同样的技术也可用于 Visual Basic。

[您可以在此处](http://code.msdn.microsoft.com/Using-Linq-Queries-in-5b17f6be)下载示例代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T18:40:41.670

WF 是一个工作流引擎。它被用来经营工厂和银行。规则引擎只是其中的一小部分。有意义的是，任何正常的 WF 项目都需要一个专门的专业团队来构建它。对于您的特定目的，这似乎是一种矫枉过正。您很可能将自己和您的项目埋没在需求与团队实际技能之间的典型斗争中。

在您的情况下，使用任何可用的 .NET 引擎都会更合理。请记住，构建自定义规则引擎并不是一件容易的事，无论从一开始看起来多么简单。设置类的属性值（通常称为“事实”或“源”对象）或执行操作（调用类的方法）是规则引擎最擅长的。看来这正是您所需要的。查看一些可用的 .NET 引擎。它们很便宜，如果不是免费的，而且可靠。

# php - 如果选择/下拉列表更改，则 Mysql 更新

> ID：11674880
> 
> 赞同：0
> 
> 时间：2012-07-26T17:37:57.950
> 
> 标签：php, javascript, mysql, sql-update

我正在建立一个相当简单的 crud 网站。我有三个基于[Mike Tuupola 的 Chained Selects Project 的](http://www.appelsiini.net/projects/chained)选择/下拉菜单。

这是我的代码：

```
<? 
include('../config.php'); 
if (isset($_GET['id']) ) { 
   $id = (int) $_GET['id']; 
   if (isset($_POST['submitted'])) { 
       foreach($_POST AS $key => $value) { $_POST[$key] = mysql_real_escape_string($value); }
       $cselect1 = $_REQUEST['cselect1'];
       $cselect2 = $_REQUEST['cselect2'];
       $cselect3 = $_REQUEST['cselect3'];

       $query="SELECT cat FROM cat WHERE id='$cselect1'";
       $result = mysql_query ($query);
       while($catselect=mysql_fetch_array($result)){
       $catselect1 = $catselect['cat'];
       }
       $query="SELECT cat FROM cat WHERE id='$cselect2'";
       $result = mysql_query ($query);
       while($catselect=mysql_fetch_array($result)){
       $catselect2 = $catselect['cat'];
       }
       $query="SELECT cat FROM cat WHERE id='$cselect3'";
       $result = mysql_query ($query);
       while($catselect=mysql_fetch_array($result)){
       $catselect3 = $catselect['cat'];
       }
   $sql = "UPDATE `company` SET  `name` =  '{$_POST['name']}' ,  `phone` =  '{$_POST['phone']}' ,  `cat1` =  '$catselect1' ,  `cat2` =  '$catselect2' ,  `cat3` =  '$cselect3' ,  `zipcode` =  '{$_POST['zipcode']}' ,  `city` =  '{$_POST['city']}' ,  `address` =  '{$_POST['address']}' ,  `address2` =  '{$_POST['address2']}' ,  `website` =  '{$_POST['website']}' ,  `product1` =  '{$_POST['product1']}' ,  `product2` =  '{$_POST['product2']}' ,  `product3` =  '{$_POST['product3']}' ,  `product4` =  '{$_POST['product4']}' ,  `product5` =  '{$_POST['product5']}' ,  `product6` =  '{$_POST['product6']}' ,  `product7` =  '{$_POST['product7']}' ,  `subcat1` =  '{$_POST['sselect1']}' ,  `subcat2` =  '{$_POST['sselect2']}' ,  `subcat3` =  '{$_POST['sselect3']}'   WHERE `id` = '$id' "; 
   mysql_query($sql) or die(mysql_error());
   $sql = "UPDATE `company_secondary` SET  `company_description` =  '{$_POST['description']}' ,  `since` =  '{$_POST['since']}' ,  `smoking` =  '{$_POST['select3']}' ,  `delivery` =  '{$_POST['select5']}' ,  `alcohol` =  '{$_POST['select6']}' ,  `kids` =  '{$_POST['select1']}' ,  `wheelchair` =  '{$_POST['select2']}' ,  `twitter` =  '{$_POST['twitter']}' ,  `facebook` =  '{$_POST['facebook']}' ,  `youtube` =  '{$_POST['youtube']}' ,  `premium` =  '{$_POST['premium']}' ,  `creditcards` =  '{$_POST['select4']}' ,  `outdoor` =  '{$_POST['select7']}' ,  `featured` =  '{$_POST['featured']}' ,  `shortdesc` =  '{$_POST['shortdesc']}' WHERE company_id = '$id' "; 
   mysql_query($sql) or die(mysql_error());
   echo "Edited Row<br/>";
   echo "<a href='allbiz.php'>Back To Listing</a>"; 
  } 

  $row = mysql_fetch_array ( mysql_query("SELECT * FROM `company` WHERE `id` = '$id' "));

?> 
```

这是我的表格：

```
<form action='' method='POST'> 
    <p><b>Name:</b><br /><input type='text' name='name' value='<?= $row['name'] ?>' /> 
    <p><b>Phone:</b><br /><input type='text' name='phone' value='<?= stripslashes($row['phone']) ?>' />
    <?php
        $cat1 = stripslashes($row['cat1']);
        $cat2 = stripslashes($row['cat2']);
        $cat3 = stripslashes($row['cat3']);
        $subcat1 = stripslashes($row['subcat1']);
        $subcat2 = stripslashes($row['subcat2']);
        $subcat3 = stripslashes($row['subcat3']);
    ?>
    <p><b>Cat1:</b><br />
   <?php
       $query="SELECT * FROM cat";
       $result = mysql_query ($query);
       echo"<select name='cselect1' id='cat1'><option value='0'>Please Select A Category</option>";
       // printing the list box select command
       while($catinfo=mysql_fetch_array($result)){//Array or records stored in $nt
            echo "<option value=\"".htmlspecialchars($catinfo['number'])."\">".$catinfo['cat']."</option>";

       }
       echo"</select>";
   ?>
   <?php
       $query="SELECT * FROM subcat";
       $result = mysql_query ($query);
   echo"<select name='sselect1' id='subcat1'><option value=''>Sub Category</option>";
   echo $subcat1;
   echo"'>$sucat1</option>";
       // printing the list box select command
       while($catinfo=mysql_fetch_array($result)){//Array or records stored in $nt
           echo "<option value='".htmlspecialchars($catinfo['subcat'])."' class='".$catinfo['catnumber']."'>".$catinfo['subcat']."</option>";
       }

       echo"</select>";
  ?>

  <p><b>Cat2:</b><br />
  <?php
      $query="SELECT * FROM cat";
      $result = mysql_query ($query);
  echo"<select name='cselect2' id='cat2'><option value='0'>Please Select A Category</option>";
      // printing the list box select command
      while($catinfo=mysql_fetch_array($result)){//Array or records stored in $nt
          echo "<option value=\"".htmlspecialchars($catinfo['number'])."\">".$catinfo['cat']."</option>";

      }
     echo"</select>";
   ?>
   <?php
     $query="SELECT * FROM subcat";
     $result = mysql_query ($query);
 echo"<select name='sselect2' id='subcat2'><option value=''>Sub Category</option>";
 echo $subcat1;
 echo"'>$sucat1</option>";
     // printing the list box select command
     while($catinfo=mysql_fetch_array($result)){//Array or records stored in $nt
         echo "<option value='".htmlspecialchars($catinfo['subcat'])."' class='".$catinfo['catnumber']."'>".$catinfo['subcat']."</option>";
     }

     echo"</select>";
  ?>
  <p><b>Cat3:</b><br />
  <?php
     $query="SELECT * FROM cat";
     $result = mysql_query ($query);
 echo"<select name='cselect3' id='cat3'><option value='0'>Please Select A Category</option>";
     // printing the list box select command
     while($catinfo=mysql_fetch_array($result)){//Array or records stored in $nt
         echo "<option value=\"".htmlspecialchars($catinfo['number'])."\">".$catinfo['cat']."</option>";

     }
     echo"</select>";
  ?>
  <?php
     $query="SELECT * FROM subcat";
     $result = mysql_query ($query);
 echo"<select name='sselect3' id='subcat3'><option value=''>Sub Category</option>";
     // printing the list box select command
     while($catinfo=mysql_fetch_array($result)){//Array or records stored in $nt
     echo "<option value='".htmlspecialchars($catinfo['subcat'])."' class='".$catinfo['catnumber']."'>".$catinfo['subcat']."</option>";
     }

     echo"</select>";
  ?> 
```

我省略了其余的表单代码（但如果需要我可以发布）。现在这是我的问题：在诸如姓名和电话之类的文本输入中，它们的值默认为数据库中已有的值，这就是它 echo 的原因`value='<?= $row['name'] ?>'`。这意味着如果用户不编辑这些，默认值将发送到 mysql 更新并保持不变。不幸的是，选择/下拉列表的值设置类似于 Mike Tuupola 的链式选择，并且在用户单击它之前没有值，这意味着 -> 用户进行编辑，只想编辑业务名称并提交，这意味着所有选择都保存为0。

如果我不将选择/下拉菜单更改为不会保存为 0 并且保持原样的值，我该如何获得它？

感谢大家的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T17:48:09.970

两种选择：

在处理 POST 数据之前，从数据库中获取当前信息。对于任何设置为 0 的 POST 值，将它们更改为当前存储的值。

**或**根据提交的值动态构建 SQL 更新查询，检查是否每个都未设置为 0，例如。

```
$update_query = "";
foreach(Array('company_name', 'company_description', 'started') as $key) {
    if(isset($_POST[$key]) && $_POST[$key] !== 0) {
        if($update_query) {
            $update_query .= ", ";
        }
        $update_query .= "`{$key}`='". mysql_real_escape_string($_POST[$key]) ."'";
    }
}
if($update_query) {
    mysql_query("UPDATE `table` SET {$update_query} WHERE `id`='$id' LIMIT 1");
} 
```

# sql - 如何组合表和视图？

> ID：11674882
> 
> 赞同：0
> 
> 时间：2012-07-26T17:38:10.863
> 
> 标签：sql

如何将表和视图组合到一个查询中？我有两个 Select 语句，一个是内部连接我想在第二个选择中组合表和视图并进行一个查询。

```
SELECT PROJECT.PROJ_ID,
       PROJECT.HULL_NUM_ID,
       PROJECT.SHIP_TYPE_CD,
       PROJECT.PROJ_NM,
       ICP_SUMMARY.MOD_STOP_DT
  FROM BAIM.ICP_SUMMARY ICP_SUMMARY
 INNER JOIN BAIM.PROJECT PROJECT
    ON ICP_SUMMARY.PROJ_ID = PROJECT.PROJ_ID

SELECT ICP_SUMMARY_JS_VW.PROJ_ID,
       ICP_SUMMARY_JS_VW.LBR_EST_MANDAYS,
       ICP_SUMMARY_JS_VW.LBR_ICP_MANDAYS,
       ICP_SUMMARY_JS_VW.MATL_EST_COST,
       ICP_SUMMARY_JS_VW.MATL_ICP_COST,
       ICP_SUMMARY_JS_VW.TOTAL_EST_COST,
       ICP_SUMMARY_JS_VW.TOTAL_ICP
  FROM BAIM.ICP_SUMMARY_JS_VW ICP_SUMMARY_JS_VW 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T17:39:32.693

你对待视图就像对待一张桌子一样。您可以对视图执行连接，并且可以在 select 语句中拥有任意数量的视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T17:56:51.397

你只需要`JOIN`在表和视图上，类似这样：

```
SELECT PROJECT.PROJ_ID,
       PROJECT.HULL_NUM_ID,
       PROJECT.SHIP_TYPE_CD,
       PROJECT.PROJ_NM,
       ICP_SUMMARY.MOD_STOP_DT,
       ICP_SUMMARY_JS_VW.PROJ_ID,
       ICP_SUMMARY_JS_VW.LBR_EST_MANDAYS,
       ICP_SUMMARY_JS_VW.LBR_ICP_MANDAYS,
       ICP_SUMMARY_JS_VW.MATL_EST_COST,
       ICP_SUMMARY_JS_VW.MATL_ICP_COST,
       ICP_SUMMARY_JS_VW.TOTAL_EST_COST,
       ICP_SUMMARY_JS_VW.TOTAL_ICP
  FROM BAIM.ICP_SUMMARY ICP_SUMMARY
 INNER JOIN BAIM.PROJECT PROJECT
    ON ICP_SUMMARY.PROJ_ID = PROJECT.PROJ_ID
 INNER JOIN BAIM.ICP_SUMMARY_JS_VW ICP_SUMMARY_JS_VW -- do JOIN Here
    ON ICP_SUMMARY.PROJ_ID = ICP_SUMMARY_JS_VW.PROJ_ID -- select the field to JOIN on 
```

# html - 使分页组件和下拉菜单对齐

> ID：11674883
> 
> 赞同：1
> 
> 时间：2012-07-26T17:38:20.767
> 
> 标签：html, css, twitter-bootstrap

我正在一个带有 twitter bootstrap 的网站上工作并制作一个带有分页的表格我遇到了某些问题。基本上我不能使分页和下拉按钮对齐。

使用@flackend 的 JSFiddle 来显示问题：[JSFiddle 示例](http://jsfiddle.net/gVg7H/1/) **代码**

```
<html>
<body>
<div class="container">
<div class="btn-group">
    <a class="btn dropdown-toggle" data-toggle="dropdown" href="#"><i class="icon-user"></i> Usuarios <span class="caret"></span></a>
    <ul class="dropdown-menu">
        <li><a id="enaUsr" href="#"><i class="icon-ok-circle"></i> Activar Cuenta(s)</a></li>
                    <li><a id="enaUsr" href="#"><i class="icon-remove-circle"></i> Desactivar Cuenta(s)</a></li><li><a href="#"><i id="delUsr" class="icon-trash"></i> Eliminar</a></li>    </ul>

</div>
<div class="pagination pagination-right">
    <ul>
        <li><a href="#">Prev</a></li>
        <li class="active"><a href="#">1</a></li>
        <li><a href="#">2</a></li>
        <li><a href="#">3</a></li>
        <li><a href="#">4</a></li>
        <li><a href="#">Next</a></li>
    </ul>
</div> 
</div>
</body>
</html> 
```

**截屏**

![截屏](../Images/b46cc9bad16aaea60ba321fc350467a5.png)

有任何想法吗 ？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T17:50:13.273

你只是想让他们在同一条线上？CSS 向左浮动：

[http://jsfiddle.net/flackend/gVg7H/](http://jsfiddle.net/flackend/gVg7H/)

# d3.js - 带有 SVG 元素和 G 的 StopPropagation()

> ID：11674886
> 
> 赞同：15
> 
> 时间：2012-07-26T17:38:38.303
> 
> 标签：d3.js, svg, dom-events, stoppropagation

我创建了一个带有`.on("click")`行为的 SVG 元素，并添加了 g 元素，`.on("click")`并认为我可以使用它`d3.event.stopPropagation()`来防止 SVG 点击事件被 g 点击事件触发。相反，这两个事件继续触发。所以我必须把`stopPropagatio`n 放在错误的地方。

```
svg = d3.select("#viz").append("svg:svg")
    .attr("width", 800)
    .attr("height", 800)
    .on("mousedown", mousedown);

sites = svg.selectAll("g.sites")
    .data(json.features)
    .enter()
    .append("svg:g")
    .on("click", siteClick)
    ;

sites.append("svg:circle")                
    .attr('r', 5)
    .attr("class", "sites")
    ;

function mousedown() {
    console.log("mouseDown");
}

function siteClick(d, i) {
    d3.event.stopPropagation();
    console.log("siteClick");
} 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-26T23:21:34.233

你似乎混淆了`click`和`mousedown`事件。调用`stopPropagation`一次只会阻止一个事件的传播，这些是单独的事件。

通常，单击手势将按该顺序引发`mousedown`和事件。`mouseup``click`

您可以将`click`事件处理程序保留在子元素上并`mousedown`通过调用添加事件处理程序`stopPropagation`，这应该可以实现您所追求的。

这是[一个示例](http://bl.ocks.org/3186840)，展示了它在与您的情况类似的情况下的使用。

# javascript - 用三元运算符整理 javascript

> ID：11674890
> 
> 赞同：2
> 
> 时间：2012-07-26T17:39:05.497
> 
> 标签：javascript, jquery, ternary-operator

我知道这段代码很乱：

```
$("#tog-desc").click(function(e) {
    $(this).toggleClass("open");
    $(".description").slideToggle();

    if( $(this).hasClass("open") ) {
        $(this).html("Hide Description").css("background-position", "85px 3px");
    }
    else {
        $(this).html("Show Description").css("background-position", "88px -10px");
    }

    e.preventDefault();
}); 
```

但我不确定如何用三元运算符整理它以使其简洁明了。我似乎总是用 Javascript 编写过长的 if/else 语句，我想了解如何不必这样做！

编辑：默认情况下 #tog-desc 显示“显示说明”并且 .description 被隐藏，以防这不明显

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T17:46:54.533

正如您在此处的其他一些答案中看到的那样，当然可以使用三元运算符将您的代码缩短几行。

但是，我质疑这样做的价值。代码不是写尽可能短的形式的竞赛。在性能方面，您的代码绝对**没有问题；**与 if 语句相比，三元组没有或多或少的内在性能。

此外，必须考虑可维护性。就目前而言，您的代码在当前形式下更易于扫描和理解。虽然三元运算符可以为您节省几行代码，但同样，这与行数无关，而是与提供具有合理性能的功能有关。您应该评估改进的地方不是代码长度本身，而是代码重用、效率以及最后通过缩小器的文件大小。

有使用三元运算符的时间和地点——它不是你应该在已经工作的代码中添加的东西，只是为了消除一些清晰易读的功能代码行。

**更多阅读**

*   [http://blog.ashodnakashian.com/2011/03/code-readability/](http://blog.ashodnakashian.com/2011/03/code-readability/)
*   [https://docs.google.com/presentation/d/1zHb855D5fQAKix47YCeVCH6QUQFzwCTxuz5GFMoNQyc/edit?pli=1#slide=id.p](https://docs.google.com/presentation/d/1zHb855D5fQAKix47YCeVCH6QUQFzwCTxuz5GFMoNQyc/edit?pli=1#slide=id.p)
*   可读代码的艺术有一个关于三元的部分 - [http://www.amazon.com/The-Readable-Code-Dustin-Boswell/dp/0596802293](https://rads.stackoverflow.com/amzn/click/com/0596802293)

**编辑**一件事......你*可以*删除围绕单行条件不必要的花括号：

```
$("#tog-desc").click(function(e) {
    e.preventDefault();

    $(this).toggleClass("open");
    $(".description").slideToggle();
    if( $(this).hasClass("open") )
        $(this).html("Hide Description").css("background-position", "85px 3px");
    else
        $(this).html("Show Description").css("background-position", "88px -10px");
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T17:41:38.683

```
$("#tog-desc").click(function(e) {
    var $this = $(this), has_cls = $this.hasClass("open");
    $this.toggleClass("open")
       .text((has_cls ? "Hide" : "Show") + " Description")
       .css("background-position", has_cls ? "85px 3px" : "88px -10px");

    $(".description").slideToggle()

    e.preventDefault();
}); 
```

* * *

或者使`.open`css类的背景位置部分......

```
$("#tog-desc").click(function(e) {
    var $this = $(this);
    $this.toggleClass("open")
       .text(($this.hasClass("open") ? "Hide" : "Show") + " Description");

    $(".description").slideToggle();

    e.preventDefault();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T17:41:00.127

```
var open = $(this).hasClass('open');
$(this)
  .html( ( open ? "Show" : "Hide" ) + " Description")
  .css("background-position", open ? '85px 3px' : '88px -10px' ); 
```

这就是你所追求的吗？基本上：

```
<condition> ? <true_result> : <false_result> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T17:41:52.957

好吧，我不知道它是否会变得*更好*，但是您可以执行以下操作：

```
var update = $(this).hasClass('open') ? 
  { label: "Hide Description", position: "85px 3px" } :
  { label: "Show Description", position: "88px -10px" };

$(this).html(update.label).css("background-position", update.position); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T17:45:34.060

我不确定这是否更清洁，但这应该可以：

```
$("#tog-desc").click(function(e) {
    $(this).toggleClass("open");
    $(".description").slideToggle();

    var open = $(this).hasClass("open");
    $(this).html((open ? "Hide" : "Show") + " Description")
           .css("background-position", "85px " + (open ? "85px" : "3px");

    e.preventDefault();
}); 
```

# haskell - 'in' 关键字是怎么回事？

> ID：11674892
> 
> 赞同：15
> 
> 时间：2012-07-26T17:39:13.563
> 
> 标签：haskell, syntax

在 Haskell 中，为什么你不在 do-block 中使用 'in' 和 'let'，但你必须不然呢？

例如，在下面有些人为的例子中：

```
afunc :: Int -> Int
afunc a = 
       let x = 9 in
       a * x

amfunc :: IO Int -> IO Int
amfunc a = do
       let x = 9
       a' <- a
       return (a' * x) 
```

这是一个很容易记住的规则，但我就是不明白它的原因。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-26T18:10:53.027

您正在提供表达式来定义`afunc`和`amfunc`。let 表达式和 do 块都是表达式。然而，虽然 let-expression 引入了一个新的绑定，该绑定在 'in' 关键字之后给出的表达式的范围内，但 do-block 不是由表达式组成的：它是一个*statements*序列。do-block 中有三种形式的语句：

1.  结果绑定到某个变量的计算`x`，如

    ```
    x <- getChar 
    ```

2.  结果被忽略的计算，如

    ```
    putStrLn "hello" 
    ```

3.  一个 let 语句，如

    ```
    let x = 3 + 5 
    ```

let-statement 引入了一个新的绑定，就像 let-expressions 一样。这个新绑定的范围扩展到 do-block 中的所有剩余语句。

简而言之，let 表达式中“in”之后的是一个表达式，而 let 表达式之后的是一系列语句。我当然可以使用 let 表达式来表达对特定语句的计算，但是绑定的范围不会超出该语句而扩展到后面的语句。考虑：

```
do putStrLn "hello"
   let x = 3 + 5 in putStrLn "eight"
   putStrLn (show x) 
```

上述代码在 GHC 中导致以下错误消息：

```
Not in scope: `x' 
```

然而

```
do putStrLn "hello"
   let x = 3 + 5
   putStrLn "eight"
   putStrLn (show x) 
```

工作正常。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-26T17:54:03.263

您确实可以`let .. in`在 do-notation 中使用。事实上，根据 Haskell 报告，以下

> 做 {let decls; 语句}

脱糖成

> 让 decls 做 {stmts}

我认为它很有用，因为否则您可能必须对“in”块进行一些深度缩进或定界，从您的 in .. 到 do-block 的最后。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-26T20:04:03.057

简短的回答是 Haskell`do`块很有趣。Haskell 是一种基于表达式的语言——除了在`do`块中，因为`do`块的目的是提供一种“语句”语法。大多数“语句”只是 type 的表达式`Monad m => m a`，但有两种语法与语言中的其他任何东西都不对应：

1.  `<-`用:绑定一个动作的结果`x <- action`是一个“语句”，而不是一个表达式。此语法需要`x :: a`和`action :: Monad m => m a`。
2.  的`in`-less 变体`let`，类似于赋值语句（但用于右侧的纯代码）。在`let x = expr`中，必须是`x :: a`和`expr :: a`。

请注意，就像使用 of`<-`可以脱糖（在这种情况下，进入`>>=`和 lambda）一样，`in`-less`let`总是可以脱糖到常规中`let ... in ...`：

```
do { let x = blah; ... }
    => let x = blah in do { ... } 
```

# python - 遍历 pyparsing 树只会产生唯一的项目？

> ID：11674893
> 
> 赞同：2
> 
> 时间：2012-07-26T17:39:19.697
> 
> 标签：python, pyparsing

我在下面有一个用 pyparsing 编写的简单解析器：

```
import pyparsing as pp

Token = pp.Word(pp.alphas)("Token")
Modifier = pp.Word(pp.nums)("Modifier")

Random = pp.Group(pp.Keyword("?") + pp.OneOrMore(Modifier))("Random")
Phrase = pp.Group(Token + pp.OneOrMore(Modifier))("Phrase")

Collection = pp.Group(pp.delimitedList(Phrase ^ Random, ","))("Collection")

tree = Collection.parseString("hello 12 2, ? 1 2, word 4, ? 3 4, testing 5") 
```

然后我尝试这样做：

```
>>> for name, item in tree[0].items():
        print name, item
Phrase ['testing', '5']
Random ['?', '3', '4'] 
```

...但由于某种原因，它只返回树中的最后一个`Phrase`和`Random`项目。我怎样才能得到所有这些？

（注意：我也尝试过这样做：

```
>>> for item in tree[0]:
        print item
['hello', '12', '2']
['?', '1', '2']
['word', '4']
['?', '3', '4']
['testing', '5'] 
```

...但如您所见，它不会返回我需要的令牌名称。我也试过做`item.name`，但那些总是返回空字符串。）

**如何遍历 pyparsing 树并按顺序获取每个项目以及分配的名称？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T18:46:35.223

ParseResults 可以通过调用获得它们的定义名称`getName()`：

```
>>> for f in tree[0]: print f.getName(), f.asList()
... 
Phrase ['hello', '12', '2']
Random ['?', '1', '2']
Phrase ['word', '4']
Random ['?', '3', '4']
Phrase ['testing', '5'] 
```

您还可以恢复使用`setResultsName`并将`listAllMatches`参数设置为 True。在 1.5.6 版本中，`expr("name")`快捷方式得到了增强，如果名称以 '*' 结尾，则相当于`expr.setResultsName("name", listAllMatches=True)`. 以下是通过设置此标志来更改输出的方式：

```
>>> Random = pp.Group(pp.Keyword("?") + pp.OneOrMore(Modifier))("Random*")
>>> Phrase = pp.Group(Token + pp.OneOrMore(Modifier))("Phrase*")
>>> Collection = pp.Group(pp.delimitedList(Phrase ^ Random, ","))("Collection")
>>> tree = Collection.parseString("hello 12 2, ? 1 2, word 4, ? 3 4, testing 5")
>>> print tree.dump()
[[['hello', '12', '2'], ['?', '1', '2'], ['word', '4'], ['?', '3', '4'], ['testing', '5']]]
- Collection: [['hello', '12', '2'], ['?', '1', '2'], ['word', '4'], ['?', '3', '4'], ['testing', '5']]
  - Phrase: [['hello', '12', '2'], ['word', '4'], ['testing', '5']]
  - Random: [['?', '1', '2'], ['?', '3', '4']] 
```

# php - PHP正则表达式在字符之间选择或到字符串结尾

> ID：11674895
> 
> 赞同：1
> 
> 时间：2012-07-26T17:39:24.090
> 
> 标签：php, regex

我已经研究这个问题好几天了，它开始让我发疯。我很喜欢使用正则表达式，但这件事似乎让我无法理解。
如果它们存在，我需要在一组字符之间匹配一个字符串，否则它应该匹配到行尾。

例如：我只是想从以下示例中获取“内容”：

```
$str1="title:content @description"
$str2="title:content"
preg_match("/:(.*?)[(@)|(:)|(\*)]?$/",$str1,$content);
preg_match("/:(.*?)[(@)|(:)|(\*)]?$/",$str2,$content); 
```

$str1 输出：“内容@description”

$str2 输出：“内容”

注意：字符串的顺序可能不同，或者可能没有特殊字符（@、: 或 *），或者它们可能有一个，因此除了“行尾”之外，没有常见的“字符串结尾”字符”。

我已经尝试了所有我能想到的组合，以使整个“或”语句成为有条件的，并阅读了大量具有相似但不完全相同的问题的帖子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T17:45:05.960

你可以写：

```
preg_match("/:(.*?)(?:[@:*]|$)/", $str1, $content); 
```

（请注意，匹配结束于字符串之一`@:*` *或*字符串结尾，使用`|`；您的版本具有`[@:*]`可选的，但使字符串结尾是强制性的。）

或者简单地说：

```
preg_match("/:([^@:*]*)/", $str1, $content); 
```

（意思是“一个冒号，后跟零个或多个不在`@:*`”中的字符）。

# ant - xmltask 错误编码

> ID：11674902
> 
> 赞同：0
> 
> 时间：2012-07-26T17:39:41.447
> 
> 标签：ant, encoding, xmltask

我正在尝试获取 xml 文件中节点的值。我观察到这个值是错误的。我相信问题是编码。有人可以帮助我吗？下面是我的代码：

**在 xml 文件中：**

```
<?xml version="1.0" encoding="UTF-8" ?>
<projects>
    <project>
       <application>Padrão</application> <!-- The problem is the character ~ -->
       <name>padrao</name>
       <icon>c:\buffer</icon>
       <market>br.com.tls.test</market>
  </project>
</projects> 
```

**我的蚂蚁代码**

```
<xmltask source="config.xml"  encoding="UTF-8">
    <call path="//project">
       <param name="name" path="name/text()" />
       <param name="market" path="market/text()" />
       <param name="icon" path="icon/text()" />
       <param name="application"  path="application/text()" />

          <actions>
             <echo message="@{application}" />
             <init-release name="@{name}" market="@{market}" icon="@{icon}"  application="@{application}"/>
          </actions>
     </call>
</xmltask> 
```

**结果**

```
[echo]:    padr#o 
```

**预期的**

```
[echo]:    padrão 
```

**解决方案**

我将文件更改为 UTF-8，我会成功替换。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T08:05:32.263

我没用过xmltask，但是echo task也有encoding属性，你也试过设置吗？

例如 `<echo message="@{application}" encoding="UTF-8" />`

# maven - 用 cxf jars 打包骆驼项目

> ID：11674903
> 
> 赞同：2
> 
> 时间：2012-07-26T17:39:41.743
> 
> 标签：maven, plugins, apache-camel, cxf, maven-shade-plugin

我刚开始研究 Camel，并从一些开箱即用的示例开始。使用 mvn 时效果很好`camel:run`。我也在尝试将其打包为一个 uber jar 并能够从命令行执行它。

我正在使用 Maven shade 插件来构建 jar。当我尝试执行它时，我收到此错误：

```
Caused by: org.apache.cxf.BusException: No DestinationFactory was found for the namespace http://cxf.apache.org/transports/http.
    at org.apache.cxf.transport.DestinationFactoryManagerImpl.getDestinationFactory(DestinationFactoryManagerImpl.java:126)
    at org.apache.cxf.endpoint.ServerImpl.initDestination(ServerImpl.java:88)
    at org.apache.cxf.endpoint.ServerImpl.<init>(ServerImpl.java:72)
    at org.apache.cxf.jaxrs.JAXRSServerFactoryBean.create(JAXRSServerFactoryBean.java:149) 
```

我有这些依赖项以及其他一些依赖项：

```
 <properties>
      <camel.version>2.8.0-fuse-04-01</camel.version>
      <cxf.version>2.4.3-fuse-02-02</cxf.version>
    </properties>

    <dependency>
        <groupId>org.apache.camel</groupId>
        <artifactId>camel-cxf</artifactId>
        <version>${camel.version}</version>
    </dependency>

    <dependency>
        <groupId>org.apache.cxf</groupId>
        <artifactId>cxf-rt-transports-http-jetty</artifactId>
        <version>${cxf.version}</version>
    </dependency> 
```

以下是在 maven shade 插件中定义转换器的方式：

```
 <transformers>
      <transformer implementation="org.apache.maven.plugins.shade.resource.ManifestResourceTransformer">
       <mainClass>org.apache.camel.spring.Main</mainClass>
     </transformer>
     <transformer implementation="org.apache.maven.plugins.shade.resource.AppendingTransformer">
      <resource>META-INF/spring.handlers</resource>
     </transformer
     <transformer implementation="org.apache.maven.plugins.shade.resource.AppendingTransformer">
      <resource>META-INF/spring.schemas</resource>
    </transformer>
  </transformers> 
```

我不知道我错过了什么。有人可以帮我解决这个问题吗？请让我知道任何替代方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T11:43:17.340

您创建的 jar 中可能没有 cxf.xml。

它应该位于`META-INF/cxf/cxf.xml`.

阴影可能需要更完整的配置（[例如](https://stackoverflow.com/questions/6831954/how-to-package-an-apache-cxf-application-into-a-monolithic-jar-with-the-maven-s)参见这个问题）

```
<configuration>
  <transformers>
    ...
    <transformer implementation="org.apache.maven.plugins.shade.resource.AppendingTransformer">
        <resource>META-INF/cxf/cxf.extension</resource>
    </transformer>
    <transformer implementation="org.apache.maven.plugins.shade.resource.XmlAppendingTransformer">
        <resource>META-INF/extensions.xml</resource>
    </transformer>
    <transformer implementation="org.apache.maven.plugins.shade.resource.XmlAppendingTransformer">
        <resource>META-INF/cxf/extensions.xml</resource>
    </transformer>
  </transformers>
</configuration> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-25T13:51:22.527

我遇到过同样的问题。我通过添加一个`org.apache.maven.plugins.shade.resource.AppendingTransformer`for bus-extensions.txt 解决了这个问题。

这对我有用：

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-shade-plugin</artifactId>
            <version>2.1</version>
            <executions>
                <execution>
                    <phase>package</phase>
                    <goals>
                        <goal>shade</goal>
                    </goals>
                    <configuration>
                        <shadedArtifactId>${ivyExecutable}</shadedArtifactId>
                        <finalName>${ivyExecutable}</finalName>
                        <createDependencyReducedPom>false</createDependencyReducedPom>
                        <shadedArtifactAttached>true</shadedArtifactAttached>
                        <shadedClassifierName>exec</shadedClassifierName>
                        <artifactSet>
                            <includes>
                                <include>*:*</include>
                            </includes>
                        </artifactSet>

                        <filters>
                            <filter>
                                <artifact>*:*</artifact>
                                <excludes>
                                    <exclude>META-INF/*.SF</exclude>
                                    <exclude>META-INF/*.DSA</exclude>
                                    <exclude>META-INF/*.RSA</exclude>
                                </excludes>
                            </filter>
                        </filters>
                        <transformers>
                            <transformer implementation="org.apache.maven.plugins.shade.resource.AppendingTransformer">
                                <resource>META-INF/cxf/bus-extensions.txt</resource>
                            </transformer>
                            <transformer implementation="org.apache.maven.plugins.shade.resource.ServicesResourceTransformer"/>
                            <transformer implementation="org.apache.maven.plugins.shade.resource.ManifestResourceTransformer">
                                <mainClass>${mainClass}</mainClass>
                            </transformer>
                        </transformers>
                    </configuration>
                </execution>
            </executions>
            <dependencies>
                <dependency>
                    <groupId>org.apache.cxf</groupId>
                    <artifactId>cxf-buildtools</artifactId>
                    <version>2.2.12</version>
                    <type>jar</type>
                    <scope>compile</scope>
                </dependency>
            </dependencies>
        </plugin> 
```

# winapi - UpdateNow 没有设置？（语言监视器问题）

> ID：11674908
> 
> 赞同：0
> 
> 时间：2012-07-26T17:39:47.403
> 
> 标签：winapi, dll, printing, driver, inf

我试图弄清楚如何在不使用 WIN32 API 的 AddMonitor() 的情况下设置打印机语言监视器（即通过编辑注册表或使用 INF 文件），但我一直遇到问题，而且我没有看到任何好的用于此目的的 INF 文件示例。

出于测试目的，我编辑了 ntprint.inf 以将 PJL_LANGUAGE_MONITOR 指向我的 DLL 而不是 pjlmon.dll，并更改了相应的注册表项也这样做。每次我尝试重新加载打印假脱机程序时，我都可以看到它似乎成功加载了我的语言监视器，基于调试输出，但是当我打印时，我不断收到调试消息，上面写着“Upd​​ateNow not set”以及我使用的任何编辑器的 PID正在使用。

我的问题是，您认为这个“UpdateNow not set”消息与问题有关，还是只是一些无关紧要的症状？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-05T15:10:10.003

雇主转移到另一个项目，现在没有实际意义。

# bjam - Boost-build/BJam 语言 - 检查标志的值

> ID：11674918
> 
> 赞同：0
> 
> 时间：2012-07-26T17:40:12.357
> 
> 标签：bjam

我需要为特定类型的项目编辑 boost-build 使用的 .jam 文件。BJAM 语言的官方手册说：

> 1.  关心 DEF 文件的工具集之一是 msvc。应添加以下行。标志 msvc.link DEF_FILE ;
> 2.  由于 msvc.link 操作不使用 DEF_FILE 变量，我们需要将其修改为： actions link bind DEF_FILE { $(.LD) .... /DEF:$(DEF_FILE) .... } 注意绑定 DEF_FILE 部分。它告诉 bjam 将 DEF_FILE 中的内部目标名称转换为链接中的相应文件名

所以显然只用 ECHO 打印 DEF_FILE 是行不通的。如何将其扩展为字符串变量或可以实际检查的东西？

我需要做的是打印一条错误消息并在未设置标志的情况下中止构建。我试过：

```
if ! $(DEF_FILE)
{
    errors.user-error "file not found" ;
    EXIT ;
} 
```

但是这个“如果”总是正确的

我还尝试将“if！$_DEF_FILE {...}”放在包含的“动作”中，但显然它被忽略了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T04:57:57.693

我不确定我是否了解您的全球任务。但是，如果您想添加对非空 DEF_FILE 的检查——扩展您引用的文档位，则需要在 msvc.link 函数中添加检查。

如果你有一个命令行模式（用'actions'指定），它的内容就是传递给操作系统执行的内容。但是，您也可以有一个同名的函数，它将在生成动作之前被调用。例如，这是当前代码库的内容：

```
rule link.dll ( targets + : sources * : properties * )
{
    DEPENDS $(<) : [ on $(<) return $(DEF_FILE) ] ;
    if <embed-manifest>on in $(properties)
    {
        msvc.manifest.dll $(targets) : $(sources) : $(properties) ;
    }
} 
```

您可以将此代码修改为另外：

```
if ! [ on $(<) return $(DEF_FILE) ] {
       ECHO "error" ;
} 
```

# android - 按下按钮时在听筒和免提电话之间切换

> ID：11674921
> 
> 赞同：9
> 
> 时间：2012-07-26T17:40:23.200
> 
> 标签：android, button, toggle, speakerphone

我正在尝试通过在两者之间切换按钮来播放扬声器和听筒的音频。问题是我试图默认从听筒播放音频，但没有任何声音出现。然后当我按下按钮切换到免提电话时，仍然没有音频播放。我正在播放本地原始文件。

我在清单中也有 android.permission.MODIFY_AUDIO_SETTINGS 。

这是我的代码：

```
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);

    context = getActivity().getBaseContext();

    am = (AudioManager) context.getSystemService(Context.AUDIO_SERVICE);

    am.setMode(AudioManager.MODE_IN_CALL);
    am.setSpeakerphoneOn(false);
    am.setBluetoothScoOn(true);
    speakerON = false;
}

@Override
public void onClick(View v)
{               
    switch (v.getId())
    {

        case R.id.buttonSpeaker:
            if(!speakerON)//speaker off
            {
                speakerON = true;
                am.setMode(AudioManager.MODE_NORMAL);
                am.setSpeakerphoneOn(true);
                am.setBluetoothScoOn(false); 
                speaker.setCompoundDrawablesWithIntrinsicBounds(android.R.drawable.ic_lock_silent_mode_off, 0, 0, 0);
            }
            else
            {
                speakerON = false;
                am.setMode(AudioManager.MODE_IN_CALL);
                am.setSpeakerphoneOn(false);
                am.setBluetoothScoOn(true);
                speaker.setCompoundDrawablesWithIntrinsicBounds(android.R.drawable.ic_lock_silent_mode, 0, 0, 0);
            }

            break;

    }
} 
```

这是我设置 MediaPlayer 的方式：

```
mediaPlayer = MediaPlayer.create(getActivity().getBaseContext(), R.raw.test_message);
mediaPlayer.setAudioStreamType(AudioManager.STREAM_VOICE_CALL);
mediaPlayer.start(); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-30T20:13:43.270

原来我把模式设置错了。

这是更新的媒体播放器：

```
mediaPlayer = MediaPlayer.create(getActivity().getBaseContext(), R.raw.test_message);
mediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
mediaPlayer.start(); 
```

然后我将音频管理器的模式设置为：

```
context = getActivity().getBaseContext();

am = (AudioManager) context.getSystemService(Context.AUDIO_SERVICE);        
am.setMode(AudioManager.MODE_IN_CALL);
am.setSpeakerphoneOn(false); 
```

然后它起作用了。因此，请确保媒体播放器和音频管理器处于相同模式。

# .net - 非公共方法的单元测试和测试驱动开发

> ID：11674922
> 
> 赞同：3
> 
> 时间：2012-07-26T17:40:24.420
> 
> 标签：.net, unit-testing, testing, mstest

我是 TDD 概念的新手，并且刚刚开始掌握为我的应用程序的公共接口编写好的单元测试的窍门。

目前，我正在开发一个类库，其中公共接口相对较小，但在幕后的类中存在大量复杂性。此功能在内部范围的类和方法中实现，因此不可用于单元测试。我不想公开这些类和方法，因为它们不应该对消费应用程序可用，但我觉得如果不编写更具体的测试用例就可以充分测试应用程序的所有功能。

有人可以向我解释我如何完成这样的测试吗？或者我的方法有问题，我可以改变以促进更好的测试。

顺便说一句，我在 C# .NET 环境中工作，但我认为我的问题也适用于 Java 或任何数量的其他平台。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T17:58:30.687

由于您使用的是 dotnet，因此您可以将其他类设为 dll-internal，并使用业务类中的[internalsvisibleto](https://stackoverflow.com/questions/3279639/when-should-assembly-internalsvisibleto-be-used)属性来允许 unittest-dll 访问它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T17:50:57.460

在 Java 中，您通常会使用类似 PowerMock 的 Whitebox 类或使用默认（包）范围来绕过访问检查。换句话说，根本没有访问修饰符。单元测试通常与被测类在同一个包中。在 .NET 中，您可能能够在内部范围内获得类似的功能，但在这种情况下，听起来您需要您的测试和被测代码位于同一个程序集中。如果这是一个问题，也许你可以让你的测试程序集成为被测代码的[朋友程序集。](http://msdn.microsoft.com/en-us/library/0tke9fxk%28v=vs.80%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T20:52:58.023

不要对私有方法进行单元测试。如果值得测试，那么值得公开或功能应该在自己的类中。似乎违反了 SOLID 原则。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T18:00:40.840

大多数单元测试专家会告诉你，你应该只测试公共接口。但是我不同意他们的观点，因为我经常遇到类似的情况。如果您使用 C# 和支持单元测试的 Visual Studio 版本，那么您很幸运。只需单击测试-> 新建测试...，然后选择“单元测试向导”。然后选择您想要测试的任何方法（包括私有方法）。Visual Studio 将自动为您生成单元测试。对于私有方法，它将创建名为 MyClass_Accessor 的影子类。这些类与您的原始类完全相同，但它们的私有成员是公共的。如果您更改课程，这些影子课程也会自动更新。

# c# - 我的实体只有 setter 和 getter，但没有方法 - 设计失败 -

> ID：11674923
> 
> 赞同：0
> 
> 时间：2012-07-26T17:40:26.623
> 
> 标签：c#, architecture, poco

我读过一次：

“除非你有充分的理由，否则不要将实体作为 getter 和 setter 的袋子，并将它们的方法放在另一层中”

我的客户、订单、...对象只是从 SqlDataReaders 获取数据。他们只有 getter 和 setter。

我的第一个问题是当有人在实体中实现方法时遵循哪种设计方法，这些方法在做什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T17:14:38.833

这种思维方式来自领域驱动设计社区。

In DDD you create a Domain Model that captures the functionality that your users request. You design your entities as having functionality and the data they need for it. You group them together in aggregates and you have separate classes that are responsible for construction (Factories) and querying (Repositories).

If you only have getters/setters you have an 'Anemic Domain Model'. Martin Fowler wrote about it in this [article](http://martinfowler.com/bliki/AnemicDomainModel.html).

The problem with an Anemic Domain model is that you have the overhead of mapping your database to objects but not the benefits of it. If you don't use your entities as a real domain model, why don't you just use a DataTable or something for your data and keep your business logic in separate functions? An Anemic Domain model is an anti-pattern that should be avoided.

You also mention that you map the entities yourself. [This blog](http://lostechies.com/jimmybogard/2012/07/24/dont-write-your-own-orm/) explains why using an Object-Relational Mapping tool can really help. If you use Entity Framework with a Code First approach you can write a clean domain model with both data and functionality and map it to your database without much hassle. Then you will have the best of both worlds.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T17:08:55.790

当您将方法作为模型的一部分时，您应该只包含模型特定类型的逻辑。例如，考虑一个银行账户：

```
public class Account {
   public AccountId Id { get; set; }
   public Person Customer {get; set; }

   public void Credit(Money amount) { ... }
   public void Debit(Money amount) { ... } 

} 
```

Credit 和 Debit 是特定于模型的逻辑（您不会在应用程序的其他任何地方找到它们），并且应该封装在 Account 类中。

您还提到您在模型类中使用 SqlDataReader 从数据库中获取数据。这是一个很大的反模式。以下是您将遇到的一些问题：

1.  违反单一职责原则 - 该模型现在负责表示数据并从数据库中获取数据。
2.  在你的模型中查询孩子怎么样？它变得混乱。
3.  您将无法轻松更改数据访问权限。

保持模型精益。将数据访问逻辑放在一个存储库中，即AccountRepository。

# c# - word自动打印输出：等待完成？

> ID：11674925
> 
> 赞同：2
> 
> 时间：2012-07-26T17:40:37.780
> 
> 标签：c#, c#-4.0, automation, ms-word, office-interop

我正在使用 word 自动化生成一个 docx 文件，然后将其打印出来。这是我的基本代码。我发现在adoc.PrintOut之后我必须等待一段时间，否则打印可能会失败。似乎是因为我在那之后关闭了文件。在文件关闭之前，word 还没来得及打印出来。所以，基本上， adoc.PrintOut 是非阻塞的（这可能不是正确的术语）。现在，我等待 10 秒钟，它工作正常。但是，它对此有更优雅的解决方案吗？我的意思是，如何等到 PrintOut 完成，然后关闭文档？

谢谢

```
object yes = true;
object no = false;           
object missing = System.Reflection.Missing.Value;

Word.Application wordApp = new Word.Application();

object fileName = originalFileName;
Word.Document adoc = null;
try
{
    adoc = wordApp.Documents.Open(ref fileName,
            ref missing, ref no, ref missing,
            ref missing, ref missing, ref  missing, ref  missing, ref  missing,
            ref  missing, ref missing, ref yes, ref  missing, ref  missing, ref  missing, ref  missing);

    adoc.Activate();

    /* 
        some other processing
    */

    object sFile = fileName;

    adoc.PrintOut(ref missing, ref missing, ref  missing, ref  missing, ref  missing, ref missing, ref missing, ref  missing, ref  missing, ref  missing, ref missing, ref missing, ref missing, ref  missing, ref  missing, ref  missing, ref missing, ref missing);

    // http://msdn.microsoft.com/en-us/library/b9f0ke7y
    //adoc.PrintPreview();

    for (int i = 0; i < 10; i++)
    {
        Thread.Sleep(TimeSpan.FromSeconds(1));
        Application.DoEvents();
    }
    //adoc.Save();

    object savechanges = Word.WdSaveOptions.wdDoNotSaveChanges; //.wdSaveChanges;
    object originalFormat = Word.WdOriginalFormat.wdWordDocument;
    object routeDocument = missing; // Type.Missing; // true;

    ((Word._Document)adoc).Close(ref savechanges, ref originalFormat, ref routeDocument);

    ((Word._Application)wordApp).Quit(ref savechanges, ref missing, ref missing);

    adoc = null;
    wordApp = null;
}
catch
{

}
finally
{
    /*
        some dispose work       
    */

    // do it twice to release all memory
    GC.Collect();
    GC.WaitForPendingFinalizers();
    GC.Collect();
    GC.WaitForPendingFinalizers();

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T21:58:50.193

您可以使用 PrintOut 的第一个参数。

```
object background = false;
adoc.PrintOut(background, ref missing, ref  missing, ref  missing, ref  missing,
    ref missing, ref missing, ref  missing, ref  missing, ref  missing, ref missing,
    ref missing, ref missing, ref  missing, ref  missing, ref  missing, ref missing,
    ref missing); 
```

正如文档所说： http: [//msdn.microsoft.com/en-us/library/microsoft.office.tools.word.document.printout (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/microsoft.office.tools.word.document.printout(v=vs.80).aspx)

“背景为真，在 Microsoft Office Word 打印文档时继续自定义代码。”

# c++ - Visual Studio 将非托管 64 位 DLL 复制到 SysWOW64 而不是 System32

> ID：11674929
> 
> 赞同：1
> 
> 时间：2012-07-26T17:41:02.407
> 
> 标签：c++, visual-studio-2010, windows-7, 32bit-64bit, unmanaged

我有一个使用 Visual Studio 2010 用非托管 C++ 编写的驱动程序。在 64 位 Windows 7 上编译 DLL 时，构建后步骤是：

```
echo Copying $(TargetFileName) to the OS's 64-bit system folder ...
xcopy $(TargetPath) $(SystemRoot)\System32\. /Y /Q 
```

但是，该 dll 被复制到 $(SystemRoot)\SysWOW64\，这应该只发生在 32 位程序集上。

但！如果我使用 Windows 资源管理器或使用命令 shell 中的 xcopy 将 dll 复制到 System32，则 dll 正确放置在 System32 文件夹中。我究竟做错了什么？是因为 Visual Studio 是一个 32 位程序并且 POST-BUILD 事件是在该 32 位进程的上下文中运行的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T17:54:23.560

您的脚本正在从 32 位进程运行。作为一种创可贴解决方案，您应该能够替换`system32`为`sysnative`WOW64 层应该做正确的事情。

**更新：**对不起，也许是这样：`%windir%\sysnative\cmd.exe /C "xcopy ..."`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T17:53:36.837

变量 SystemRoot 对应调用程序展开。

由于调用程序 (devenv.exe) 是一个 32 位程序，它被 SysWOW64 替换。

# wordpress - Wordpress - 如何调整移动标题图像的大小

> ID：11674930
> 
> 赞同：0
> 
> 时间：2012-07-26T17:41:01.790
> 
> 标签：wordpress, image-resizing, screen-size, mobile-devices, skeleton-css-boilerplate

前言：

我正在使用一个有点响应的主题（骨架）。它将布局更改为小屏幕尺寸的单列，

我的问题是：

调整屏幕大小时，我的标题图像（我使用管理面板中的主题选项插入）没有缩放。它始终保持在 940x150。在移动设备上查看时，这会导致一个完整大小的标题，其内容在左侧的单列中，所以我留下了各种空白。

我想：使图像随着屏幕宽度缩小

或者

将标题图像替换为适合较小屏幕尺寸的图像。

选项 2 的问题不是所有设备都具有相同的屏幕宽度，因此它仍然需要可缩放到一个点。

理想情况下：

当高于以下规定的宽度时，图像将缩放以适应 700 左右（ipad 横向）和 940 标准之间的屏幕。

当低于某个屏幕宽度（比如低于平板电脑/ipad 尺寸，因此最大宽度为 700 左右）时，图像被交换为较小的，然后在 300 到 700 左右之间放大或缩小（刚好低于 ipad 尺寸）。

通过这种方式，图像对于网站的渲染来说总是合适的尺寸。

这个特定图像的问题是中间的空白（空白空间）量。在一定宽度以下，我认为图像的元素会变得不自然，而且它们之间的空间很大。

网站：

porthuronairportshuttle.com

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T19:48:13.293

将此添加到您的CSS：

```
img {
height: auto;
max-width: 100%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T20:59:52.393

我想到了。这实际上是删除我使用主题选项上传的标题并使用 wp 核心功能上传它的问题。然后我移动了 header.php 中的导航栏，并在对边距和填充进行了一些调整后 - 噗！

# ssms - 当 SqlStudio.bin 不存在时，删除 SQL Server Management Studio 的“连接到服务器”屏幕中保存的用户名/密码？

> ID：11674932
> 
> 赞同：5
> 
> 时间：2012-07-26T17:41:03.640
> 
> 标签：ssms

我想删除“连接到服务器”屏幕中显示的已保存用户名和密码。在互联网上（例如[这里](https://stackoverflow.com/questions/6230159/how-to-delete-server-entries-in-sql-server-management-studios-connect-to-serve "这里")）我读到我应该删除文件`%APPDATA%\Microsoft\Microsoft SQL Server\100\Tools\Shell\SqlStudio.bin`，但在里面`%APPDATA%\Microsoft\Microsoft SQL Server\`我找不到文件夹`100`（只有`90`和`110`）。如果我开始搜索，我也无法`SqlStudio.bin`在另外两个文件夹之一中找到该文件。

我使用的是 Windows 7 和 Microsoft SQL Server Management Studio 版本 11.0.1750.32。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-06-06T04:33:09.343

当进一步深入研究时，我在以下位置找到了文件：

`%APPDATA%\Microsoft\SQL Server Management Studio\11.0\SqlStudio.bin`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-07T18:03:58.950

路径的“100”部分取决于 SQL Studio 的版本：

```
 90 = v9  = SQL Server 2005
100 = v10 = SQL Server 2008
110 = v11 = SQL Server 2012 
```

由于您已安装 v11 (SQL Server 2012)，因此可以在此处找到该文件：

%APPDATA%\Microsoft\Microsoft SQL Server\ **110** \Tools\Shell\SqlStudio.bin

# regex - 哪些 Perl 匹配正则表达式的细微差别会引起头痛？

> ID：11674936
> 
> 赞同：2
> 
> 时间：2012-07-26T17:41:13.280
> 
> 标签：regex, perl

此代码未能识别它似乎识别的任何键：

```
if( $key =~ /upsf|free|ground|sla|pickup|usps/ ) 
```

所以我将其更改为：

```
 if( $key eq 'upsf' || $key eq 'free' 
    || $key eq 'ground' || $key eq 'sla' 
    || $key eq 'pickup' || $key eq 'usps' ) 
```

~~在我看来，它们在功能上是等效~~的，所以我试图找出第一个失败的原因。它是 Windows 7 上 XAMPP 下的 Perl，但它也是 Linux 机器上 Apache2 下的 Perl。

这会在 Windows 和 Linux 上打印“搁置它”。

```
$key = 'upsf';
if( $key =~ /^(upsf|free|ground|sla|pickup|usps)$/ ) {
    print 'ship it';
} else {
    print 'shelf it';
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T17:59:07.900

它们不是等价的，因为第一个比较运算符是“=~”（“包含”），而第二个是“eq”（“显式匹配，等于”）。

第一个究竟是如何失败的？$key 的测试值是多少？

```
$key = 'xxx';
if( $key =~ /upsf|free|ground|sla|pickup|usps/ ) {
    print 'ship it';
} else {
    print 'shelf it';
} 
```

将打印“搁置它”。例如， $key='xusps' 将打印 'ship it'，通过 '=~' 运算符（“包含”）进行匹配，这可能不是您的目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T21:03:33.633

# 我的错！

此代码由 ClickCart Pro 执行，它从文件中读取它并像这样对其进行预处理：

```
$custom_script_code =~ s/\`/\'/gs;
$custom_script_code =~ s/\|\|/%7C%7C/g;
$custom_script_code =~ s/\|/ /gs;
$custom_script_code =~ s/%7C%7C/\|\|/g;
$custom_script_code =~ s/system/System/gs;
$custom_script_code =~ s/exec/Exec/gs;
$custom_script_code =~ s/die/Die/gs; 
```

所以管道被这里的第三个语句删除。感谢氪金！（讽刺）perreal 的评论已被加分。我不应该得到任何分数。对不起浪费了大家的时间！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T14:10:23.287

这个怎么样：

```
if ($key =~ /^(?:upsf|free|ground|sla|pickup|usps)$/) {
  # ...
} else {
  # ...
} 
```

# ruby-on-rails - sqlite3 更改为 pg 中断了应用程序部署到 heroku

> ID：11674937
> 
> 赞同：0
> 
> 时间：2012-07-26T17:41:21.933
> 
> 标签：ruby-on-rails, ruby-on-rails-3

好的，所以我正在使用 Rails 第 4 版（rails 3.2+）进行敏捷 Web 开发，我在第 16 章，其中涉及部署。我大部分时间都在跟进，但鉴于我想使用 heroku，我决定继续尝试将我的应用程序部署到 heroku。按照以下说明操作：[https](https://devcenter.heroku.com/articles/rails3) : //devcenter.heroku.com/articles/rails3 我开始部署heroku。但是，当我去访问该应用程序时：

```
heroku open 
```

我遇到了这个错误：

```
We're sorry, but something went wrong. 
```

所以运行后：

```
heroku logs 
```

我意识到这是导致问题的错误：

```
2012-07-25T19:41:16+00:00 app[web.1]: ActiveRecord::StatementInvalid (PG::Error: ERROR:  relation "carts" does not exist
2012-07-25T19:41:16+00:00 app[web.1]:              WHERE a.attrelid = '"carts"'::regclass
2012-07-25T19:41:16+00:00 app[web.1]:               FROM pg_attribute a LEFT JOIN pg_attrdef d
2012-07-25T19:41:16+00:00 app[web.1]: :             SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
2012-07-25T19:41:16+00:00 app[web.1]:                AND a.attnum > 0 AND NOT a.attisdropped
2012-07-25T19:41:16+00:00 app[web.1]:              ORDER BY a.attnum
2012-07-25T19:41:16+00:00 app[web.1]: ): 
```

现在，在遵循 heroku 说明的同时，我只修改了我的 gemfile 中的两件事。首先我改变了：

```
gem 'sqlite3' 
```

至：

```
gem 'pg' 
```

我还补充说：

```
ruby '1.9.3' 
```

在文件的顶部。但是，由于错误位于“PG”，我认为错误出现在 b/c 我将“sqlite3”gem 更改为“pg”。我用 sqlite3 开发了这个应用程序，所以我认为这是导致错误的原因。为了验证这一点，我将“pg”改回“sqlite3”并运行“bundle install”。但是，这样做后，我收到了这个错误：

```
Gemfile syntax error:
  gem 'sass-rails',   '~> 3.2.3' 
```

如果我改回“pg”，这个错误就会消失。拜托，有人在这里帮助一个新手。为什么当我将我的应用程序部署到 heroku 时它没有工作，我在“heroku 日志”中发现的错误是什么意思。任何和所有输入表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T18:07:25.493

你跑了吗

```
heroku run rake db:migrate 
```

因为否则您的数据库将没有表，因此不会有关联。

# c# - 服务器违反了协议。使用 tor 代理时的 Section=ResponseStatusLine

> ID：11674938
> 
> 赞同：9
> 
> 时间：2012-07-26T17:41:26.387
> 
> 标签：c#, asp.net, proxy, httpwebrequest, tor

我正在尝试通过我的 asp.net 应用程序使用 Tor 代理发送 httpwebrequest，并且在调用 webresponse.GetResponse() 方法时收到此错误消息：

> 服务器违反了协议。Section=ResponseStatusLine

我尝试在网上搜索解决方案，发现此错误的 3 个主要解决方案：

1.  添加到 Web.config。

    ```
    <system.net>
      <settings>
        <httpWebRequest useUnsafeHeaderParsing="true"/>
      </settings>
    </system.net>` 
    ```

2.  将行：添加`webRequest.ProtocolVersion = HttpVersion.Version10;`到代码中。

3.  将该行添加`request.ServicePoint.Expect100Continue = false;`到代码中。

列出的每个解决方案都没有改变错误消息的任何内容。

这是请求代码：

```
WebRequest.DefaultWebProxy = new WebRequest("127.0.0.1:9051");
HttpWebRequest webRequest = (HttpWebRequest)WebRequest.Create(url);

webRequest.CookieContainer = new CookieContainer();
webRequest.ProtocolVersion = HttpVersion.Version10;
webRequest.KeepAlive = false;
webRequest.Method = "GET";
webRequest.ContentType = "application/x-www-form-urlencoded";
webRequest.Accept = "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8";
webRequest.UserAgent = "Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.168 Safari/535.19";

HttpWebResponse webResponse = (HttpWebResponse)webRequest.GetResponse();
StreamReader streamReader = new StreamReader(webResponse.GetResponseStream());

string html = streamReader.ReadToEnd();
webResponse.Close();
return html; 
```

谁能帮我找到解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T17:58:22.217

您可以通过查看异常的属性然后检查和属性来获取有关您所获得的异常的更多详细信息，该异常实际上是一个[WebException](http://msdn.microsoft.com/en-us/library/ztey1y5b)。这将帮助您获得有关错误的更多详细信息，并希望为您指明正确的方向。`Response``StatusDescription``StatusCode`

像这样的东西：

```
 catch(WebException e) 
    {
        if(e.Status == WebExceptionStatus.ProtocolError)
        {
            Console.WriteLine("Status Code : {0}", ((HttpWebResponse)e.Response).StatusCode);
            Console.WriteLine("Status Description : {0}", ((HttpWebResponse)e.Response).StatusDescription);
        }
    } 
```

另外，请查看 MSDN 上的[WebException.Status](http://msdn.microsoft.com/en-us/library/system.net.webexception.status)示例以获取更多详细信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-20T09:26:11.603

我有同样的问题。httpwebrequest getresponse 方法总是返回错误协议 vialotion，我以这种方式解决了问题；

首先，我使用 xml com 对象而不是 xdocument 或 xmldocument。

这个 com 对象有几个版本的 Microsft XML，v3.0-v5.0-v6.0。我用的是 v6.0。

```
MSXML2.DOMDocument60Class doc = new MSXML2.DOMDocument60Class();
doc.setProperty("ServerHTTPRequest",true);
doc.setProperty("ProhibitDTD", false); 
doc.async = false;
doc.load(extURL);  

if (doc.parseError.errorCode != 0)
{
 // error  
}
else
{
 // do stuff
} 
```

# javascript - 无法通过类和数字 ID 选择 jquery 元素

> ID：11674939
> 
> 赞同：1
> 
> 时间：2012-07-26T17:41:29.057
> 
> 标签：javascript, jquery, dom

```
$(".associated_requests")
[<div class=​"associated_requests" id=​"0">​&lt;/div>​, 
<div class=​"associated_requests" id=​"1">​&lt;/div>​, 
<div class=​"associated_requests" id=​"2">​&lt;/div>​, 
<div class=​"associated_requests" id=​"3">​&lt;/div>​]

$(".associated_requests#0")
[] 
```

我在做一些语法错误吗？看[这里](https://stackoverflow.com/questions/1944302/jquery-select-an-elements-class-and-id-at-the-same-time)，这似乎应该是可能的。

编辑：以下也失败：

```
$(".associated_requests #0")
[]
$("#0 .associated_requests")
[]
$("#0.associated_requests")
[] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T17:43:42.953

在 HTML5 之前，`id`s 不能以数字开头。将其更改为以字母开头。即`item0`,等`item1`_`item2`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T17:44:21.467

为什么不直接做`$('#item0')`？..你不应该有重复的ID

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T17:48:42.533

```
var item0 = document.getElementById('0');

var item1 = document.getElementById('1'); 
```

或者您可以重命名您的 id 而不是添加一个数字`id="id-0"`

所以你可以选择它作为`$('#id-0.associated_content')`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T17:50:38.797

如果要根据索引选择 div，*则*可以使用`eq()`以下方法：

```
$('.associated_requests').eq(0) // selects the first one
$('.associated_requests').eq(1) // selects the second one 
```

# vb.net - 将 DLL 引用添加到 VB.NET 项目

> ID：11674944
> 
> 赞同：5
> 
> 时间：2012-07-26T17:41:40.620
> 
> 标签：vb.net, dll, ogg

刚开始，这个问题似乎与另一篇文章**[Add the DLL (lame_enc.dll) reference to my project](https://stackoverflow.com/questions/5762755/add-the-dll-lame-enc-dll-reference-to-my-project)**非常相似，但我无法成功应用该答案。我对 VB.NET 很陌生，所以很可能我只是遗漏了一些明显的东西。

我正在尝试将 DLL 链接到 VB.NET 2010 项目以允许我的 VB 应用程序播放 *.ogg 文件。我在论坛上遵循了其他一些建议并下载了**[FMOD 的](http://www.fmod.org/fmod-downloads.html)** **FMOD Ex Programmers API**。我现在正在尝试引用该功能。这些似乎是我需要以某种方式引用的文件。

**C:\Program Files (x86)\FMOD SoundSystem\FMOD Programmers API Windows\api\fmodex64.dll**。
**C:\Program Files (x86)\FMOD SoundSystem\FMOD Programmers API Windows\api\libfmodex64_vc.lib**。

我还没有发现如何添加 *.lib 引用（或等效引用），但选择 DLL 作为引用会出现以下错误。

> 无法添加对“C:\Program Files (x86)\FMOD SoundSystem\FMOD Programmers API Windows\api\fmodex64.dll”的引用。请确保该文件是可访问的，并且它是一个有效的程序集或 COM 组件。

我不确定我可能会错过什么。有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-24T12:44:36.363

在解决方案资源管理器中，双击项目的“我的项目”节点。

在项目设计器中，单击引用选项卡。

单击“添加”按钮打开“添加引用”对话框。

在“添加引用”对话框中，选择指示要引用的组件类型的选项卡。

选择要引用的组件，然后单击“确定”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T14:55:58.963

我尝试的另一种方法对我有用。我找到了一个带有 LibZPlay VB.NET 示例（[http://planetsourcecode.com/vb/scripts/ShowCode.asp?txtCodeId=7789&lngWId=10](http://planetsourcecode.com/vb/scripts/ShowCode.asp?txtCodeId=7789&lngWId=10)）的工作示例的站点。它在 VS 2008 下运行，我能够调整我的项目以在 VS 2008 下使用 LibZPlay（开源库[http://libzplay.sourceforge.net/WELCOME.html](http://libzplay.sourceforge.net/WELCOME.html)）。

这对我来说已经足够了。谢谢你的建议。这可能是我的一些配置问题或误解。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-10T19:38:12.427

使用 VB.net 2015 I（无法添加甚至找不到 System32 dll）作为参考，使用解决方案资源管理器，选项卡参考。转到主菜单，项目/添加引用...使用浏览和所有 System32 dll 都是可见的。然后我能够加载所需的dll。

# azure - 远程桌面无法在 Azure 上的 Hadoop 上运行

> ID：11674946
> 
> 赞同：0
> 
> 时间：2012-07-26T17:41:55.727
> 
> 标签：azure, hadoop

我可以通过输入我的 Windows Live ID 在 Windows Azure 上分配一个 Hadoop 集群，但在那之后，我无法对那里的主节点执行远程桌面。在集群创建之前，它会显示一条消息，上面写着“Microsoft 已经从 Hadoop On Azure 用户那里获得了压倒性的积极反馈，因此它提供了 5 天的免费试用，其中包含 2 个从节点。” [PS，这个HoA的预览版之前工作过]

对这个问题有什么建议吗？

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T18:03:00.873

创建 Hadoop 集群时，系统会要求您输入集群的 DNS 名称，可能类似于 your_hadoop_cluster.cloudapp.net。

所以首先请ping你的Hadoop集群名称，看看它是否返回一个IP地址，这将证明你是否真的配置了任何集群。如果您没有获得 IP，那么您在 Azure 上没有 Hadoop 集群并尝试创建一个。

如果您确定在 Winodws Azure 上确实有 Hadoop 集群，请尝试在 Azure CTP 论坛上将您的问题发布到以下 Hadoop，您将获得所需的适当帮助：

[http://tech.groups.yahoo.com/group/HadoopOnAzureCTP/](http://tech.groups.yahoo.com/group/HadoopOnAzureCTP/)

# eclipse - 如何使用 Eclipse git 合并工具进行“我们的”合并？

> ID：11674950
> 
> 赞同：9
> 
> 时间：2012-07-26T17:42:20.540
> 
> 标签：eclipse, egit

我正在尝试在有冲突且一个文件大量分歧的情况下进行合并。eclipse git merge 工具非常适合进行小的更改，但我的一个文件很大并且有数百个明确标记的冲突部分。我一辈子都找不到一种简单的方法来使用“我们的”策略进行合并，即只使用我的版本并放弃远程版本。

在 Linux 或 Mac 上，我可以很容易地从命令行执行此操作，但我在公司的 Windows 计算机上并且没有命令行 git。我什至尝试了从包资源管理器的文件上下文菜单中执行“替换为”->“头版本”的解决方法，但是由于存储库处于合并冲突模式，该操作被禁用。这将是一个不错的解决方案，但最好还是有一种清晰的方式将“我们的”或“他们的”策略应用到合并工具中的整个文件。

我不得不求助于硬重置，复制我的文件，进行合并，然后用我的干净副本替换合并的版本。我错过了一种更简单的方法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-27T08:11:43.177

在合并工具的编辑器中，您可以编辑左侧部分。

单击合并工具后，在出现的对话框中选择“HEAD”选项，然后左侧部分将包含与 HEAD 相同的内容。

所以当左边的部分已经好了的时候，只需做一个小修改，撤消它然后保存。修改是必要的，因为从一开始就无法保存。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-07-19T15:32:15.380

现在有一个条目“替换为”，允许您在 Git 暂存视图中的文件的上下文菜单中选择“我们的”或“他们的”。

# c# - 用“as”铸造一个对象仍然给出错误

> ID：11674954
> 
> 赞同：2
> 
> 时间：2012-07-26T17:42:27.117
> 
> 标签：c#, asp.net

我有一个对象 MyObject 并将其存储在会话中。

我写这个：

```
MyObject TheObject = HttpContext.Current.Session["TheObjInSession"] as MyObject; 
```

我收到错误`Object reference not set to an instance of an object`为什么？我认为，如果您使用`as`to 强制转换并且强制转换产生错误，那么它只会返回 null 并继续执行。我应该如何重写这一行？

感谢您的建议。

PS：产生错误是因为我删除了启用会话行`[WebMethod(EnableSession = true)]`，我将把该行放回去，但我想确保没有异常，以防出现任何问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T17:44:51.110

可能`Session`是触发它（它不存在或尚未建立）。如果您没有将类标记为管理会话，这在处理程序中很常见。

是的，你是对的，`as`将尝试强制转换或导致 a `null`，但这只是假设你是左手对象是有效的并且具有尝试强制转换的值。

为了更深入地解释它：

```
HttpContext.Current.Session["Foo"]
HttpContext                         Probably fine
HttpContext.Current                 May not exist
HttpContext.Current.Session         Most likely cause (no access to session) 
```

如果元素本身不存在，这实质上使得引用`Session`元素的键是不可能的。`Session`

# c - C 中的错误消息

> ID：11674955
> 
> 赞同：2
> 
> 时间：2012-07-26T17:42:32.070
> 
> 标签：c, visual-studio-2010

我在编译 C 应用程序时遇到问题，显示的错误毫无意义。我不知道从哪里开始寻找解决方案。

这是代码：

```
static char* FilterCreate(
    void* arg,
    const char* const* key_array, const size_t* key_length_array,
    int num_keys,
    size_t* filter_length) {
  *filter_length = 4;
  char* result = malloc(4); // error: error C2143: syntax error : missing ';' before 'type' C:\Projects\myleveldb\db\c_test.c
  memcpy(result, "fake", 4);
  return result;
} 
```

[这](https://i.stack.imgur.com/fChIr.png)是全屏截图： ![截屏](../Images/51e3dca4a5aae5652aa724ad362ad961.png)

什么可能导致这样的错误？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-07-26T17:45:14.567

您正在使用 C89/90 编译器编译 C 代码。

在经典 C (C89/90) 中，在块中间声明变量是非法的。所有变量都必须在块的开头声明。

一旦你开始写*语句*，比如`*filter_length = 4`，这意味着你已经完成了*声明*。您不再被允许在此块中引入变量声明。将您的声明移到更高的位置，代码将编译。

* * *

在 C 语言中，*声明*不是*语句*（与 C++ 中的*声明*只是*语句*的一种形式相反）。在 C89/90 中，复合语句的语法是：

```
compound-statement:
  { declaration-list[opt] statement-list[opt] } 
```

这意味着所有声明都必须先出现，在块的开头。

请注意，在 C99 中，声明也不是语句。但是复合语句的语法已更改为：

```
compound-statement:
  { block-item-list[opt] }

block-item-list:
  block-item
  block-item-list block-item

block-item:
  declaration
  statement 
```

这就是为什么您可以在 C99 中交错声明和语句的原因。

# mysql - 如何将行转换为基于列的重复数据？

> ID：11674964
> 
> 赞同：3
> 
> 时间：2012-07-26T17:43:18.193
> 
> 标签：mysql, ruby, excel, transform, transformation

我正在尝试获取如下所示的数据集：

![数据源格式](../Images/502d873acd790310687d8e7dda29dd72.png)

并将记录转换为这种格式：

![目标格式](../Images/084893656dec028940174113c9c104c1.png)

生成的格式将有两列，一列用于旧列名，一列用于值。如果有 10,000 行，那么应该有 10,000 组新格式的数据。

我对所有不同的方法持开放态度，excel 公式、sql (mysql) 或直接 ruby​​ 代码也适用于我。解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-26T19:11:05.500

您可以在数据左侧添加一个 ID 列并使用[反向数据透视](http://spreadsheetpage.com/index.php/tip/creating_a_database_table_from_a_summary_table/)表方法。

*   按 Alt+D+P 访问*数据透视表向导*，步骤如下：

    ```
    1\.  Multiple Consolidation Ranges
    2a. I will create the page fields
    2b. Range: eg. sheet1!A1:A4 
        How Many Page Fields: 0
    3\.  Existing Worksheet: H1 
    ```

*   在数据透视表中：

    ```
    Uncheck Row and Column from the Field List
    Double-Click the Grand Total as shown 
    ```

![在此处输入图像描述](../Images/6ca43d00f895917b5fd0d750d1735e8c.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T19:40:21.177

只是为了好玩：

```
# Input file format is tab separated values

# name  search_term address code
# Jim jim jim_address 123
# Bob bob bob_address 124
# Lisa  lisa  lisa_address  126
# Mona  mona  mona_address  129

infile = File.open("inputfile.tsv")

headers = infile.readline.strip.split("\t")
puts headers.inspect
of = File.new("outputfile.tsv","w")
infile.each_line do |line|
  row = line.split("\t")
  headers.each_with_index do |key, index|
    of.puts "#{key}\t#{row[index]}"
  end
end

of.close

# A nicer way, on my machine it does 1.6M rows in about 17 sec

File.open("inputfile.tsv") do | in_file |
  headers = in_file.readline.strip.split("\t")
  File.open("outputfile.tsv","w") do | out_file |
    in_file.each_line do | line |
      row = line.split("\t")
      headers.each_with_index do | key, index | 
        out_file << key << "\t" << row[index]
      end
    end 
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T19:59:16.340

```
destination = File.open(dir, 'a') do |d|   #choose the destination file and open it

    source = File.open(dir , 'r+') do |s|  #choose the source file and open it
      headers = s.readline.strip.split("\t")  #grab the first row of the source file to use as headers
      s.each do |line| #interate over each line from the source

        currentLine = line.strip.split("\t") #create an array from the current line
           count = 0   #track the count of each array index
        currentLine.each do |c| #iterate over each cell of the currentline
              finalNewLine = '"' + "#{headers[count]}" + '"' + "\t" + '"' + "#{currentLine[count]}" + '"' + "\n" #build each new line as one big string
          d.write(finalNewLine) #write final line to the destination file.
          count += 1 #increment the count to work on the next cell in the line
        end

      end
  end

end 
```

# ios - UIPickerView 可以用于选择要加载的不同视图吗？

> ID：11674965
> 
> 赞同：0
> 
> 时间：2012-07-26T17:43:19.950
> 
> 标签：ios, selection, xib, pageload

可以从代码或 UI 界面设计器`UIPickerView`加载特定`.nib`/文件吗？`.xib`或者还有什么我需要使用的吗？我一直在谷歌搜索有关如何执行此操作的教程，到目前为止，我发现的所有内容都在使用静态内容示例（例如颜色、国家、日期等），这些示例应该被选中，但不是必然从一个地方过渡到另一个地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T18:50:36.723

创建一个 NSDictionary ，其中用户可选择的字符串作为键，然后是您要实例化的类/笔尖的名称字符串。

当用户选择一个选项时，您可以拉出代号，然后加载相应的捆绑包。

```
UINib *nib = [UINib nibWithNibName:theString bundle:whatever]; 
```

如果你想打开一个视图控制器，你可以：

```
UIViewController *c = [NSClassFromString(theString) alloc] initWithNibName:theString bundle:whatever]; 
```

# facebook - 如何从链接中检索 Facebook id

> ID：11674969
> 
> 赞同：1
> 
> 时间：2012-07-26T17:43:29.410
> 
> 标签：facebook, url, hyperlink

我想从链接中检索 facebook id。我想知道的是我是否有所有可能的情况或/以及我是否可以有一个标准的方法来做到这一点：

如果有[http://www.facebook.com/pages/ExchangeMyRooms/301768493253094](http://www.facebook.com/pages/ExchangeMyRooms/301768493253094) 我可以从 URL 中检索 id

如果我有[http://www.facebook.com/babelverse](http://www.facebook.com/babelverse)我会这样做： [https](https://graph.facebook.com/?ids=babelverse) ://graph.facebook.com/?ids=babelverse 我得到了 id

如果我有[http://www.imdb.com/title/tt0117500/](http://www.imdb.com/title/tt0117500/)我会：[https://graph.facebook.com/?ids=http://www.imdb.com/title/tt0117500/](https://graph.facebook.com/?ids=http://www.imdb.com/title/tt0117500/) 我得到身份证

结果应如下所示：

```
{
"babelverse": {
  "id": "177626422254171",
  "name": "Babelverse",
  "picture": "http://profile.ak.fbcdn.net/hprofile-ak-snc4/372895_177626422254171_1480242829_s.jpg",
  "link": "http://www.facebook.com/babelverse",
  "likes": 957,
  ... 
```

有没有办法进行类似的查询

SELECT id FROM idontknow WHERE link=mylink

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T12:05:50.617

所以您只是在寻找 Graph API 调用的 FQL 等价物……？

[https://developers.facebook.com/docs/reference/fql/object_url/](https://developers.facebook.com/docs/reference/fql/object_url/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T19:12:47.727

The page-id will be the trailing number after the seo name in the url

URL break down for pages with out `Vanity URL`.

`facebook.com/pages/` **| seo name** `ExchangeMyRooms/` **| page-id** `301768493253094`

**Try** [https://graph.facebook.com/?ids=301768493253094](https://graph.facebook.com/?ids=301768493253094)

**Returns**

```
{
  "id": "301768493253094", 
  "name": "ExchangeMyRooms", 
  "picture": "http://profile.ak.fbcdn.net/static-ak/rsrc.php/v2/yY/r/fmYdZvdquYb.png", 
  "link": "http://www.facebook.com/pages/ExchangeMyRooms/301768493253094", 
  "likes": 2, 
  "category": "Company", 
  "is_published": true, 
  "can_post": true, 
  "talking_about_count": 1
} 
```

# html - 除歌剧外，所有浏览器中的奇怪行为

> ID：11674970
> 
> 赞同：0
> 
> 时间：2012-07-26T17:43:31.103
> 
> 标签：html

这两种情况：

```
<div title=" " >Hi</div>
<div title="&nbsp;" >Hi</div> 
```

不要在 Safari、Firefox 和 Google Chrome 中显示空白标题。（它显示在 Opera 12 Mac OS X 中）。

[http://jsfiddle.net/a3MNx/](http://jsfiddle.net/a3MNx/)

我怎样才能让它在那些浏览器中工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T18:54:12.983

如果您想获得一个空白标题，那么您可以尝试使用[Soft Hyphen](http://en.wikipedia.org/wiki/Soft_hyphen)，它有代码`&#173;`并且其 html 实体是`&shy;`

```
<div title="&#173;" >Hi</div>
<div title="&shy;" >Hi</div> 
```

[http://jsfiddle.net/a3MNx/2/](http://jsfiddle.net/a3MNx/2/)

使用 Firefox (Iceweasel 10.0.5) 可以正常工作。使用`&nbsp;`它不会。

# objective-c - 使用正则表达式解析 Obj-c 方法

> ID：11674972
> 
> 赞同：1
> 
> 时间：2012-07-26T17:43:32.493
> 
> 标签：objective-c, regex, parsing, methods

我正在尝试使用正则表达式解析 Obj-c 源代码。我想找到声明和实现。

首先，我寻找这样的类：

```
@implementation(.|\n)+@end

@interface(.|\n)+@end 
```

然后我有这些模式来查找类范围内的*实例方法：*

```
For interface:       -.*;
For implementation:  -.*{ 
```

然而，来自：注释、字符串和数学运算的内容也包括在内。

**这些模式失败的示例：**

```
//I'm pretending to-be an instance method;

/*
Disabled methods:
- (void)myProgrammerDidntLikeMe;
*/

if (a + b == 2) { ... }
str = @"-----"; 
```

我怎样才能让模式排除这些伪装的方法，还有其他我没有预见到的东西吗？

**更新：**在尝试解析单个方法字符串时，我注意到我的模式也适用于识别它们。这就是我想出的：

```
(-|\+)\s\(([\w|\*|\s]*)\)(?:(?:(?:(\w*)(?:\:\([\w|\s|\*]*)\)(\w*)\s*){1,}))?(\w*) 
```

然而它没有，不像我第一次尝试找到没有返回类型的方法。但我对此没意见，因为我从未见过有人使用过。

```
- noReturnType 
```

我对注释和 ifs 一无所知，但是 1）例如数学运算符和 2）它也解析方法本身。

现在我正在改变我的问题，但我正在尝试实现这样的捕获组输出，我不知道该怎么做。

```
1\. -
2\. void
FOLLOWING_CAN_REPEAT
3\. setFoo:
4\. Foo*
5\. foo
END_REPEAT 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T15:02:30.087

我会使用[Yacc](http://en.wikipedia.org/wiki/Yacc)或[Bison](http://en.wikipedia.org/wiki/GNU_bison)之类的东西，用 Objective-C 语言语法来创建一个我可以挂钩的高效的 c 源代码解析器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T23:20:32.780

如果你想可靠地做到这一点，你不能用正则表达式来做到这一点。

你打算怎么处理#if？宏？头文件？人们不断学习这一课：正则表达式不能用于可靠地处理计算机语言。

如果您不介意偶尔犯错误，那么您已经有了一个可行的解决方案（有点）；你可以把它修补到你心中，它会有所改善，但总是有一个根本性的缺陷。

# git - 显示自上次合并以来的提交，包括合并的提交

> ID：11674973
> 
> 赞同：0
> 
> 时间：2012-07-26T17:43:32.753
> 
> 标签：git

我有两个分支，`staging`并且`live`. 我之前已经合并`staging`到`live`. 我想要一个自上次合并`staging`到以来发生的所有提交的列表`live`，并且该列表应该有任何合并提交替换已合并的提交列表（即，如果我合并`dev`到`staging`，我想查看来自`dev`该的提交被合并，而不是合并提交）。我该怎么做？

可选地，为了额外的乐趣，告诉我如何从这个列表中排除合并到`staging`的`live`提交。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T11:24:26.717

`git log staging ^live`将为您提供所有暂存但未实时提交的提交*，*即自上次合并后在暂存中发生的提交。

# batch-file - Runas 不允许复杂的命令

> ID：11674974
> 
> 赞同：1
> 
> 时间：2012-07-26T17:43:35.680
> 
> 标签：batch-file, windows-server-2003, runas

我已经在这个 SVN 提交后挂钩批处理文件上工作了一段时间，但我遇到了另一个问题。这一切都在 Windows 2003 服务器机器上完成。

我正在尝试以管理员身份执行此行（这在自行执行时有效）：

```
START "game_server" CMD /k ""C:\Program Files\nodejs\"node.exe "C:\Program Files\nodejs\game_server.js"" 
```

我已经对此进行了测试，它也可以按预期工作：

```
runas /savecred /user:admin_account CMD 
```

但是当我将两者结合起来时：

```
runas /savecred /user:admin_account "START "game_server" CMD /k ""C:\Program Files\nodejs\"node.exe "C:\Program Files\nodejs\game_server.js""" 
```

然后我得到“runas 使用”输出，基本上相当于 runas /? 信息。START 周围的外部 " 包装器并在它失败后添加到最后。因此两种方式都经过了测试。

我似乎无法组合两个简单的命令这一事实让我觉得我今天只是无脑，所以请告诉我我缺少什么明显的东西。

# java - 只需在java中复制一个子字符串

> ID：11674982
> 
> 赞同：1
> 
> 时间：2012-07-26T17:44:15.527
> 
> 标签：java, string, copy, substring

我有很多字符串，例如 Animal.dog 、 World.game ，我只想取句号之前的字符串。例如我需要动物和世界

我不想使用 indexOf() 方法，也不想搜索子字符串，因为某些名称相同等

有没有其他方法可以实现这一目标？例如复制字符串直到句号。

由于句号之前的字符串长度每次都不是恒定的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T17:46:21.217

使用`split()`, （它可能在内部使用`indexOf()`）

```
String partBeforeFullStop = string.split("\\.")[0]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T17:49:21.357

[http://www.java-examples.com/java-string-split-example](http://www.java-examples.com/java-string-split-example)

您只需要使用点作为分隔符来拆分字符串。

`String.split`返回所有结果子字符串的数组，因此：

```
String str = "Animal.dog";
String[] split_str = str.split("\\."); 
```

split_str 将是：

```
["Animal", "dog"] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T17:47:27.233

如果字符串中总是有一个句点，则可以使用句点作为分隔符拆分字符串，并从数组中取出第一个字符串。

# c - 使用 valgrind 的 C 程序的浮点陷阱

> ID：11674985
> 
> 赞同：2
> 
> 时间：2012-07-26T17:44:28.927
> 
> 标签：c, valgrind, nan, floating-point-exceptions

我试图弄清楚如何找到用 C 编写的模拟代码生成 NaN 的确切位置。我在 Debian 挤压上使用普通 C89（但我可以移至 C99/C11）和 gcc 4.4.5。

显然有一个valgrind 的[补丁](https://bugs.kde.org/show_bug.cgi?id=214950)应该能够执行此检查。不幸的是，它不包含在 Debian 分发的二进制文件中。实际上，尝试编译 vanilla valgrind 加上 exp-floattrap 也不起作用（它似乎不包含在最终的可执行文件中）。

您是否继续在 C 源代码中查找此类错误的来源？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T18:20:10.020

我承认我根本不使用 valgrind，只是因为我不需要它，但是如果您要寻找的只是单个变量设置为 NaN 的情况，您可以不只使用 GDB（或类似），并为变量设置一个观察点，例如：

```
watch var==NaN 
```

这让你知道一个变量在什么时候变成 NaN，如果这不是有罪操作本身，而是一个返回值，你将自己移动到有罪链上的一个函数并在该函数中设置一个观察点，依此类推依此类推，直到您看到错误为止。

希望这会有帮助 ：）

# c# - “双工”Ef 代码优先 db 操作

> ID：11674986
> 
> 赞同：1
> 
> 时间：2012-07-26T17:44:39.923
> 
> 标签：c#, .net, database, entity-framework, ef-code-first

我有一个**`User`**具有以下字段的类：

```
public int Id { get; set; }
public ICollection<Event> AdminEvents { get; set; }
public ICollection<Event> SubscribedEvents { get; set; } 
```

我的**`Event`**课看起来像：

```
public int Id { get; set; }
public ICollection<User> Subscribed { get; set; }
public User Admin { get; set; }
public int AdminId { get; set; } 
```

OnModelCreating 在我的**`Context`**：

```
modelBuilder.Entity<User>().HasMany(u => u.SubscribedEvents).WithMany(u => u.Subscribed);
modelBuilder.Entity<User>().HasMany(u => u.AdminEvents).WithRequired(u => u.Admin).WillCascadeOnDelete(false); 
```

* * *

*   这里的重点是 User 可以创建一个 Event ( `Event.Admin && Admin.Id`) 并且可以订阅其他事件 ( `User.SubscribedEvents && Event.Subscribed`)
*   当我尝试访问`User.SubcribedEvents.ToList()`它时会引发以下错误：

    值不能为空。参数名称：源

    但是插入有效，并且该值进入正确的表： `**dbo.UserEvents**`.

*   我的实体设计有什么问题？如果您需要更多信息来追踪故障，请询问。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T19:03:59.180

您的导航和集合属性（至少）应该是虚拟的，以便可以延迟初始化。