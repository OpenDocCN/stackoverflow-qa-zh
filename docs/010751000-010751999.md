# StackOverflow 问答 10751000-10751999

# java - 带有精美拖放功能的 Java 应用程序

> ID：10751001
> 
> 赞同：1
> 
> 时间：2012-05-25T08:24:25.270
> 
> 标签：java, swing, drag-and-drop, awt

是否有任何框架或工具来开发精美的 Java 应用程序 - 具有良好拖放功能的用户界面？

例如，来自 Mac OS 的这个：http: [//appzapper.com/](http://appzapper.com/)

![在此处输入图像描述](../Images/27a74c3d764eefb7b2c6fc8a6a1c7746.png)

它不需要具有 Mac OS 的外观和感觉。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T08:35:44.887

请参阅教程中的[DnD 简介以](http://docs.oracle.com/javase/tutorial/uiswing/dnd/intro.html)开发一些有效的代码。

* * *

> *请查看第一篇文章的屏幕截图，了解 nice 的规范。*
> 
> 唯一的自定义部分是向下箭头的虚线边框及其下方的文本。您可以在文本的 HTML 格式中使用图标（用于箭头/边框）`JLabel`来实现这一点。

## 例如

![标签中带有 HTML 格式文本的图标](../Images/54de9b492c2fea43910471734ea67f52.png)

```
package test.t100.t006;

import javax.swing.Icon;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.SwingConstants;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;

public class DrawLabel {

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable(){
            public void run() {
                // substitute for downward pointing arrow with dashed border
                Object obj = UIManager.getDefaults()
                        .get("OptionPane.warningIcon");
                if (obj!=null && obj instanceof Icon) {
                    Icon icon = (Icon)obj;
                    String text = "<html><body>Drag <em><b>Stuff</b></em> Here";
                    JLabel l = new JLabel(
                            text, icon, SwingConstants.HORIZONTAL);
                    l.setVerticalTextPosition(SwingConstants.BOTTOM);
                    l.setHorizontalTextPosition(SwingConstants.CENTER);
                    JOptionPane.showMessageDialog(
                            null, l);
                }
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T10:26:44.507

享受截图，享受它:)

```
import java.awt.*;
import java.awt.event.*;
import java.awt.font.*;
import java.awt.geom.*;
import javax.swing.*;
public class DragHereIcon implements Icon {
  private int size = 80;
  private float a = 4f;
  private float b = 8f;
  private int r = 16;
  private int f = size/4;
  private Font font = new Font("Monospace", Font.PLAIN, size);
  private FontRenderContext frc = new FontRenderContext(null, true, true);
  private Shape s = new TextLayout("\u21E9", font, frc).getOutline(null);
  private Color linec = Color.GRAY;
  @Override public void paintIcon(Component c, Graphics g, int x, int y) {
    Graphics2D g2 = (Graphics2D)g.create();
    g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING,
                        RenderingHints.VALUE_ANTIALIAS_ON);
    g2.translate(x, y);

    g2.setStroke(new BasicStroke(a));
    g2.setPaint(linec);
    g2.draw(new RoundRectangle2D.Float(a,a,size-2*a-1,size-2*a-1,r,r));

    g2.setStroke(new BasicStroke(b));
    g2.setColor(UIManager.getColor("Panel.background"));
    g2.drawLine(1*f,0*f,1*f,4*f);
    g2.drawLine(2*f,0*f,2*f,4*f);
    g2.drawLine(3*f,0*f,3*f,4*f);
    g2.drawLine(0*f,1*f,4*f,1*f);
    g2.drawLine(0*f,2*f,4*f,2*f);
    g2.drawLine(0*f,3*f,4*f,3*f);

    g2.setPaint(linec);
    Rectangle2D b = s.getBounds();
    Point2D.Double p = new Point2D.Double(
        b.getX() + b.getWidth()/2d, b.getY() + b.getHeight()/2d);
    AffineTransform toCenterAT = AffineTransform.getTranslateInstance(
        size/2d - p.getX(), size/2d - p.getY());
    g2.fill(toCenterAT.createTransformedShape(s));
    g2.translate(-x,-y);
    g2.dispose();
  }
  @Override public int getIconWidth()  {
    return size;
  }
  @Override public int getIconHeight() {
    return size;
  }
  public static JComponent makeUI() {
    JLabel label = new JLabel(new DragHereIcon());
    label.setText("<html>Drag <b>Stuff</b> Here");
    label.setVerticalTextPosition(SwingConstants.BOTTOM);
    label.setHorizontalTextPosition(SwingConstants.CENTER);
    label.setForeground(Color.GRAY);
    label.setFont(new Font("Monospace", Font.PLAIN, 24));
    JPanel p = new JPanel();
    p.add(label);
    p.setBorder(BorderFactory.createEmptyBorder(8,8,8,8));
    return p;
  }
  public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
      @Override public void run() {
        createAndShowGUI();
      }
    });
  }
  public static void createAndShowGUI() {
    JFrame f = new JFrame();
    f.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
    f.getContentPane().add(DragHereIcon.makeUI());
    f.setSize(320, 200);
    f.setLocationRelativeTo(null);
    f.setVisible(true);
  }
} 
```

# java - 通过 Java 运行 Oracle Sql 脚本

> ID：10751002
> 
> 赞同：0
> 
> 时间：2012-05-25T08:24:35.407
> 
> 标签：java, oracle, triggers, oracle11g

`insert and update`我为oracle数据库编写了一个java程序来处理数据。`DISABLE`在插入或更新数据之前，我需要一些触发器。在插入或更新数据后还需要`ENABLE`先前 DISABLED 触发器。我写了两个 sql 脚本作为`pre_script.sql`和`post_script.sql`到`DISABLE`和`ENABLE`触发器。

我如何使用 java 运行这些文件？有什么方法可以传递这些 sql 文件以在 java 中执行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T08:59:40.133

最简单的选择是将您的 SQL 脚本创建为数据库中的存储过程或函数，然后只需要从 Java 进行简单调用即可执行它们。

```
CallableStatement cs = conn.prepareCall("{ call pre_script_as_func() }");
cs.execute();

// do inserts, updates 

cs = conn.prepareCall("{ call post_script_as_func() }");
cs.execute(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T08:48:55.663

```
import java.io.*;
import java.sql.*; 
```

假设连接对象为`conn`

从连接对象创建 SQL 语句：

```
Statement DMLString conn.createStatement(); 
```

创建一个字符串变量并使用 alter trigger 语句填充：

```
String sql = "ALTER TRIGGER [TRIGGER_NAME] DISABLE"; 
```

对数据库执行 SQL

```
String  result = DMLString.execute(sql.toString()); 
```

# jquery - DIV 标签在随机方向移动

> ID：10751005
> 
> 赞同：0
> 
> 时间：2012-05-25T08:25:04.997
> 
> 标签：jquery, animation, html

我正在尝试使具有不同 ID 的 div 标签沿随机/不同方向移动。我怎样才能做到这一点？下面是我的一些代码。好心提醒。

我已经分配了一个随机坐标，但它仍然不起作用？

```
function runALl(item) {    
    var coordinates = Math.floor(Math.random()*101+1);
    var cycle1;
    //alert(item);
    (cycle1 = function() {
        var m = randomRange(coordinates,coordinates);
        var n = randomRange(coordinates,coordinates);
        item.animate({left:'+='+n},2000);
        item.animate({left:'+='+m, top:'+='+m}, 2000);
        item.animate({left:'-='+m, top:'+='+m}, 2000);
        item.animate({left:'-='+n},2000);
        item.animate({top:'-='+n},2000,cycle1)
    })();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T08:31:45.827

您的`coordinates`变量没有得到更新。

您不会移动`div`不同`id`，项目不会在您的功能中随时更改

根据您提供的小提琴。移动是连续进行的，仅在一个对象上进行。它还在 0 - 45 - 90 - 135 ... 方向移动。因为您不更新“随机”值。

发送一个 div 元素数组并遍历它们，为每个元素提供不同的随机值。每次你应该使用它之前更新随机值，否则它将保持不变。

# c++ - 在 C++ Eclipse 项目中包含共享库

> ID：10751011
> 
> 赞同：1
> 
> 时间：2012-05-25T08:25:27.683
> 
> 标签：c++, eclipse, shared-libraries

我用 C++ 创建了一个共享库。我将 .so 文件复制到 /usr/local/include/ 文件夹中，并在链接器中引用了我的库（我也包含了 -ldl），但是当我在新项目中编写 #include 时，我有一个“未解决的包含”警告。

我能做些什么来解决这个问题？

第 1 步：http: [//imageshack.us/photo/my-images/24/step1f.png/](http://imageshack.us/photo/my-images/24/step1f.png/)

第 2 步：http: [//imageshack.us/photo/my-images/827/step2i.png/](http://imageshack.us/photo/my-images/827/step2i.png/)

感谢提前。

# regex - 如何为以下场景创建正则表达式？

> ID：10751012
> 
> 赞同：1
> 
> 时间：2012-05-25T08:25:31.207
> 
> 标签：regex, grails, groovy

我目前正在使用正则表达式构建我的匹配项。我想只接受字母数字和特殊字符，如句点 (.)、逗号 (,) 和破折号 (-)。这是我的代码：

```
code nullable: false, blank: false, maxSize: 30, matches : /^[0-9a-zA-Z,.-]+?[0-9a-zA-Z ]+?[0-9a-zA-Z,.-]*?$/ 
```

此代码工作正常，但每次我输入单个字母和指定特殊字符之一的组合时，都会引发错误消息。

例子：

```
1) A. (an error is thrown)
2) A- (an error is thrown)
3) A, (an error is thrown) 
```

上面的例子应该是一个有效的输入。我将如何修剪我的正则表达式以允许给定的示例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T08:38:58.737

`A.`被匹配，`[0-9a-zA-Z,.-]+?`但中间部分`[0-9a-zA-Z ]+?`不匹配任何东西。

只匹配字母数字和句点、逗号和破折号`/^[0-9a-zA-Z,.-]+$/`就足够了。

# c - 为什么可以在c中使用未定义的结构

> ID：10751027
> 
> 赞同：12
> 
> 时间：2012-05-25T08:26:31.843
> 
> 标签：c

```
#include <stdio.h>

int main()
{
  printf("%d", sizeof(struct token *));
} 
```

以上代码可以在Linux下使用gcc编译链接。你们中的任何人都可以向我解释幕后的事情吗？我知道重点是固定内存大小，因此结构标记与 sizeof 无关，但即使在 gcc 中打开警告选项，也根本没有关于“不存在”结构的警告。问题的上下文是我正在阅读其他人的一些源代码，我正在非常努力地找到“结构令牌”的定义，但当然失败了。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-25T08:29:19.813

因为您正在尝试获取*指向*`struct token`. 指针的大小不取决于结构的实际定义方式。

通常，您甚至可以声明一个类型为 的变量`struct token*`，但不能取消引用它（例如，通过指针访问成员）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-25T08:33:34.180

套用 C 标准，不完整类型是描述对象但缺少确定其大小所需信息的类型。

void 是另一种不完整的类型。与其他不完整类型不同，void 无法完成。

这种“不完整类型”通常用于各种句柄：库允许您为某物分配一个“句柄”，使用它并再次处理它。所有这些都封装在库中。作为用户，您不知道里面会发生什么。

例子：

lib.h：

```
struct data * d_generate(void);
void d_set(struct data *, int);
int d_get(struct data *);
void d_free(struct data*); 
```

lib.c：

```
#include "lib.h"
#include <stdlib.h>
struct data { int value; };
struct data * d_generate(void) {
    return malloc(sizeof(struct data))
}
void d_set(struct data * d, int v) {
    d -> value = v;
}
int d_get(struct data * d) {
    return d->value;
}
void d_free(struct data* d) {
   free(d);
} 
```

用户.c：

```
#include "lib.h"
[...]
struct data * d = d_generate();
d_set(d, 42);
int v = d_get(d);
// but v = d->value; doesn't work here because of the incomplete definition.
d_free(d); 
```

# redis - 在没有 Rails 的情况下设置 Rescue 和 Redis

> ID：10751032
> 
> 赞同：2
> 
> 时间：2012-05-25T08:26:43.550
> 
> 标签：redis, resque, ruby-1.9.3

我知道这是一个相当模糊的问题，并不是真正的编程问题，但我正在努力建立一个 Resque 系统。

我遇到的问题如下：

我知道如何编写可以推送到我们队列系统的作业。我们依赖于定义了**perform**方法的模块，因此它可以由 Worker 执行。我能够编写 Ruby 代码，因此它可以使用 Gems 等......

但是，我们不依赖 Rails。我只有一个小的 Ruby 应用程序，它应该“加载”应用程序的环境。这意味着运行一些初始化脚本来配置 memcache、redis 和 Sequel 的变量。

我们有一个使用 monit.d 运行的旧版本来监控队列并保持它们运行。为了使帖子简短，我正在寻找有关编写某种“应用程序”的信息，该“应用程序”可用作队列系统的基础。它不是 Rails 应用程序，但它应该能够执行以下操作：

*   通过轮询队列来运行作业（在代码中定义）
*   定义新作业
*   启动和停止整个工作池（首选 Rake 任务）
*   不依赖于 Rails

我知道这个问题有点模糊，但我不知道如何更好地描述它。希望有人可以提供一些有关如何解决此问题的见解。

# javascript - 跨浏览器脚本使我的网站成为主页

> ID：10751036
> 
> 赞同：2
> 
> 时间：2012-05-25T08:27:08.127
> 
> 标签：javascript, jquery, html

我有一个网站，我想请用户将我的网站设为主页。如果他们单击是，我想运行一个脚本，使我的网站成为用户浏览器的主页。[在这里](http://www.dynamicdrive.com/dynamicindex9/addhome.htm)有一个[类似的线程](https://stackoverflow.com/questions/1832846/i-need-script-in-jquery-that-make-the-page-as-your-default-home-page-website-in)和一个解决方案。但是，我后一个链接中的解决方案仅适用于 IE。我需要一个跨浏览器脚本。

谁可以帮我这个事。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T08:29:04.767

在大多数浏览器中，作为安全措施，不可能通过代码来做到这一点。如果是这样，您访问的任何网站都可以在未经您同意的情况下自动成为您的主页。

事实上，旧版本的 IE 允许您这样做是非常例外而不是规则。

如果您需要这种行为，您需要编写分步指南，告诉人们要单击哪个工具栏，以及在浏览器设置中设置主页的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T22:07:59.107

nitesh、google 和 bing 不这样做...任何默认为 google 或 bing 或 hewlett packard 主页的浏览器或与该站点一起预先打包的任何内容作为主页...[改变](http://www.cashnhits.com/index.php?view=ptp&ref=043823335)这一点的唯一方法，是手动的，或者通过：

1) 突出显示地址栏中的地址并将其拖动到小“[主页](http://freebtc247.blogspot.com/)”图标

2）转到浏览器的设置并粘贴或输入地址

3) 安装 yahoo messenger 之类的软件包，在安装过程中当您同意时为您更改这些设置，通常通过选中一个框并单击同意

# video - 在 localhost 之外访问 red5 服务器

> ID：10751039
> 
> 赞同：0
> 
> 时间：2012-05-25T08:27:29.773
> 
> 标签：video, red5, video-recording

我是 red5 服务器上的新手，所以我卡住了。我正在尝试从网络摄像头录制视频并将它们保存到我的服务器中。为此，我在我的服务器上安装了 red5。另外，我还下载了red5recorder，放到了我的webapps文件夹中。但是有任何关于其实现细节的信息。任何。所以我继续使用 Red5 SimpleRecorder 教程。

当我在我的服务器上尝试时一切正常，但是当我尝试从其他计算机连接到服务器以录制视频时出现问题。实际上，处理了视频录制，但录制的视频没有上传到服务器。当我在 localhost 工作时，它工作正常，但从外部我无法录制或上传视频。

我更改了 red5-web.properties 文档，并将虚拟主机设置为我的服务器的 IP，但它再次仅适用于 localhost。可能是什么原因？是关于文件权限的吗？或者可能是什么？

亲切的问候，可以

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T20:59:53.190

如果您使用的是 red5recorder 或（任何其他演示）。似乎 rtmp 服务器在 red5recorder.swf 中设置为 rtmp://127.0.0.1:/red5recorder。您需要在 src/red5recorder.as 中搜索以下内容：

```
if(Application.application.parameters.server!=null) 
    myRecorder.server= Application.application.parameters.server; 
```

并将其更改为：

```
if(Application.application.parameters.server!=null) 
    myRecorder.server= "rtmp://your-server-ip/red5recorder"; 
```

然后从源代码编译。

编辑：

您最好更改 Recorder.as (src/classes/Recorder.as) 文件，而不是使用那里提到的所有参数。

```
server:String="rtmp://127.0.0.1/red5recorder/"; 
```

然后编译源代码并制作新的 .swf。

事实证明，您可以将一些 Flash 参数从 html 传递到 swf。在这里检查：[http ://www.red5-recorder.com/params.php](http://www.red5-recorder.com/params.php)

# compilation - uic：意外的元素名称

> ID：10751041
> 
> 赞同：0
> 
> 时间：2012-05-25T08:27:34.290
> 
> 标签：compilation, qt4, qmake, cppunit, test-runner

我正在尝试使用Qt4编译`.pro`文件以从中获取库，但出现此错误：`qmake``qttestrunnerlib.pro`

```
~/docs/UT_Cpp_Test/main/cppDir/src/qttestrunner$ qmake qttestrunnerlib.pro 
uic: Error in line 6, column 14 : Unexpected element name
uic: Error in line 6, column 14 : Unexpected element name 
```

当我使用 Qt3 时，它可以工作，并且我成功获得了我的库。但我想将它升级到 Qt4。可能吗？我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T17:05:52.313

我`uic3`从`qt3-support`包中使用过（至少在 gentoo 上）

`uic3 -convert ui-file-qt3.ui -o ui-file-qt4.ui`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T08:49:09.413

那是因为 qt4 中的设计器与 qt3 不同。表示qt3和qt4生成的ui文件不一样。`That's why the unexpected element name error!`

```
The uic reads a user interface definition (.ui) file in XML as generated by Qt
Designer and creates corresponding C++ header or source files.

Easiest way to solve is, use your qt4 ide to open you form and it will ask for 
conversion.Then use the newly created ui for your compilation. 
```

# javascript - 使用 underscore.js 进行空值检查

> ID：10751043
> 
> 赞同：16
> 
> 时间：2012-05-25T08:27:43.030
> 
> 标签：javascript, underscore.js

```
var name = "someName";
if(name !=null) {
   // do something
} 
```

1.  我现在正在使用[http://underscorejs.org/#isNull](http://underscorejs.org/#isNull)，我将如何使用`underscore.js`
2.  它在此类功能的性能方面是否有任何轻微的改进。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-25T08:31:54.447

在下划线中，您可以使用

```
if(!_.isNull(name)) {} 
```

在纯 Javascript 中，您应该使用

```
if(name !== null) {} 
```

您应该避免使用松散的不等式运算符`!=`，因为它确实类型强制并且`undefined != null`会返回`false`。

使用纯 Javascript 稍微快一些，因为它不必调用函数，但它是不易察觉的，几乎不应该考虑。

就可读性而言，我对这两种方式都没有强烈的偏好，但调用库函数进行如此简单的检查似乎有点过分和冗长。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T08:31:05.590

在 underscore.js 中，您必须编写此代码才能实现该功能。

```
var name = "someName";
if(!(_.isNull(name ))) {
   // do something
} 
```

在 underscore.js 中函数`isNull`是这样写的

```
_.isNull = function(obj) {
    return obj === null;
  }; 
```

所以区别在于`==`您的代码和`===`underscore.js 中使用。有关该区别的更多详细信息，您可以查看此问题。

[在 JavaScript 比较中应该使用哪个等号运算符（== vs ===）？](https://stackoverflow.com/questions/359494/javascript-vs-does-it-matter-which-equal-operator-i-use)

PS我会建议写你自己的条件，而不是在这么简单的地方使用任何库。

```
var name = "someName";
if(name !== null)) {
   // do something
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T08:30:32.127

好吧，您的原始代码有缺陷，因为如果`name`是空字符串，`false`数字或任何其他虚假值，那么就您的测试而言`0`，它将被考虑。`null`

作为一般规则，调用 ANY 函数是一种开销，应尽可能避免。在这种情况下，调用一个函数只是为了测试一个值是否为空，而你可以很容易地编写`if( name === null)`, 只是愚蠢的，IMO ...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-04T17:46:04.313

```
if ((!(_.isUndefined(data)) || _.isEmpty(data))) {
//Valid Data 
}else {//Not Valid} 
```

# php - PHP 连接到数据库：OOP 与程序 1 不工作 2 工作

> ID：10751045
> 
> 赞同：0
> 
> 时间：2012-05-25T08:27:47.420
> 
> 标签：php

我正在为这个问题挠头：

当我将日志数据作为程序处理时，一切正常。我需要该文件一次，然后可以继续我的选择查询。但是，如果与 DB 文件的连接被写入为 OOP。我收到未选择数据库的错误

====

```
<?php

        // SETTING VALUES AS CONSTANTS

        DEFINE('DB_USER', 'root');
        DEFINE('DB_PASSWORD', '');
        DEFINE('DB_HOST', 'localhost');
        DEFINE('DB_NAME', 'tra');

        // CONNECTING JUST TO THE SERVER
        $dbc = @mysql_connect(DB_HOST, DB_USER, DB_PASSWORD);

        if (!$dbc)  // IF IT CAN'T CONNECT, ISSUE A MESSAGE
             {
                die('Could not connect: ' . mysql_error());
        }

        // CONNECTING NOW TO THE DB
        mysql_select_db("tra", $dbc);

    ?> 
```

所以那里工作正常。我在一个单独的文件中得到了它，（在根路径之外）

但是，如果我尝试以 OOP 方式进行，那么一旦我有权访问数据库，其余的查询将无法正常工作。我有时将查询写为输出，我的意思是好像没有执行，只是纯文本：

```
 $mysqli = new mysqli("localhost", "root", "");
            $mysqli->select_db("tra"); 
```

我用 OOP 版本尝试了很多品种，首先分别实例化，例如

```
$mysqli = new mysli();
$mysqli->connect("127.0.0.1", "root", "", "tra"); 
```

或者也

```
$mysqli = new mysqli("localhost", "root", "");
$mysqli-> select_db("tra"); 
```

但是 OOP 的任何尝试都不起作用。我的意思是，我的腿上放着这本书，所以我正在逐字写它。问题必须在其他地方。

PHP 版本是 5.3.8 大约是最新的一个。

在连接和选择数据库之后的 sql 查询（如果连接文件是程序性的，如我所说）是：

```
$sql ="SELECT FName
                              FROM work_assignment, developer
                              WHERE developer.country = '".$country."'
                              AND work_assignment.from_language = '".$from."'
                              AND work_assignment.into_language = '".$into."'
                              AND work_assignment.developer_id = developer.developer_id

                              "; 
```

关于为什么的任何想法？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T08:42:33.110

根据您的评论，我推测您正在**混合使用 mysql 和 mysqli 扩展。**它们是两个独立的扩展，没有任何共同之处，只是它们都连接到 MySQL。如果您使用 mysqli 对象连接到数据库，请使用该对象运行您的查询。`mysql_query`将没有活动连接，因为您没有使用 mysql 功能建立一个。

# java - Java，断言文件等于

> ID：10751049
> 
> 赞同：3
> 
> 时间：2012-05-25T08:28:05.120
> 
> 标签：java, performance, equals

我想使用 char by char 比较断言文件。最好的方法是什么？没有第 3 部分库。哪个文件阅读器最适合这个？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-25T08:32:27.447

不确定对第 3 方库的反对意见是什么……无需重新发明轮子。

我发现开源和广泛使用的[apache.commons.io](http://commons.apache.org/io/)方法`FileUtils.contentEquals(file1, file2)`非常好 - 这是[javadoc](http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html#contentEquals%28java.io.File,%20java.io.File%29)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-09T20:27:48.723

如果您碰巧正在使用 Google Guava 库，那么您可以使用：

```
Files.equal(file1, file2); 
```

从[文档](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/io/Files.html#equal(java.io.File,%20java.io.File))：

```
Returns true if the files contains the same bytes. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-21T16:40:03.723

对于小文件（最多几 MB），流式 I/O 几乎没有什么好处，所以你可以保持简单：

```
Arrays.equals(Files.readAllBytes(firstFile), Files.readAllBytes(secondFile)); 
```

如果要使用不同的编码，还可以将字节解码为字符：

```
boolean equal = new String(Files.readAllBytes(firstFile), firstEncoding).equals(
                new String(Files.readAllBytes(secondFile), secondEncoding)); 
```

这只需要 Java 7。

# ios - 点击 MKAnnotationView 不会调用 didSelectAnnotationView 委托

> ID：10751052
> 
> 赞同：0
> 
> 时间：2012-05-25T08:28:24.127
> 
> 标签：ios, mkmapview, mkannotationview

看看这段代码，看看你能不能帮我修复它：

```
- (void)viewDidLoad
{
//Initialize the array and add annotations for the location on the map

annotations = [[NSMutableArray alloc] init];    
CustomAnnotation *annotation;
CLLocationCoordinate2D coordinate;

//1
coordinate.latitude = 25.220390105797264;
coordinate.longitude = 55.28095199798584;
annotation = [[CustomAnnotation alloc] initWithCoordinate:coordinate];
annotation.annotationIndex = @"123";

[annotations addObject:annotation];

//2
coordinate.latitude = 25.218880105797264;
coordinate.longitude = 55.27992199798584;
annotation = [[CustomAnnotation alloc] initWithCoordinate:coordinate];
annotation.annotationIndex = @"117";

[annotations addObject:annotation]; 

//3
coordinate.latitude = 25.219280105797264;
coordinate.longitude = 55.28052199798584;
annotation = [[CustomAnnotation alloc] initWithCoordinate:coordinate];
annotation.annotationIndex = @"118";

[annotations addObject:annotation]; 

//4
coordinate.latitude = 25.219680105797264;
coordinate.longitude = 55.28052199798584;
annotation = [[CustomAnnotation alloc] initWithCoordinate:coordinate];
annotation.annotationIndex = @"119";

[annotations addObject:annotation]; 

//5
coordinate.latitude = 25.219980105797264;
coordinate.longitude = 55.28095199798584;
annotation = [[CustomAnnotation alloc] initWithCoordinate:coordinate];
annotation.annotationIndex = @"120";

[annotations addObject:annotation]; 

//6
coordinate.latitude = 25.220380105797264;
coordinate.longitude = 55.28115199798584;
annotation = [[CustomAnnotation alloc] initWithCoordinate:coordinate];
annotation.annotationIndex = @"121";

[annotations addObject:annotation];

//7
coordinate.latitude = 25.220350105797264;
coordinate.longitude = 55.28105199798584;
annotation = [[CustomAnnotation alloc] initWithCoordinate:coordinate];
annotation.annotationIndex = @"122";

[annotations addObject:annotation];

//8
coordinate.latitude = 25.215050105797264;
coordinate.longitude = 55.28105199798584;
annotation = [[CustomAnnotation alloc] initWithCoordinate:coordinate];
annotation.annotationIndex = @"124";

[annotations addObject:annotation];

//9
coordinate.latitude = -35.44138;
coordinate.longitude = -71.66208;
annotation = [[CustomAnnotation alloc] initWithCoordinate:coordinate];
annotation.annotationIndex = @"125";

[annotations addObject:annotation]; 

//10
coordinate.latitude = -35.44138;
coordinate.longitude = -71.66208;
annotation = [[CustomAnnotation alloc] initWithCoordinate:coordinate];
annotation.annotationIndex = @"126";

[annotations addObject:annotation];
//Set the region and zoom factor of the map view
MKCoordinateRegion region;

region.span.latitudeDelta = 0.01f;
region.span.longitudeDelta = 0.01f;
region.center.latitude = 25.216050105797264;
    region.center.longitude = 55.27905199798584;
    [sheikhZayedRoadMapView addAnnotations:annotations];
[sheikhZayedRoadMapView setRegion:region];
//[siteMapView.layer setCornerRadius:5.0];
}

-(MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:
(id <MKAnnotation>)annotation 
{
NSLog(@"Annotation Class: %@", [annotation class]);

static NSString * const kPinAnnotationIdentifier = @"PinIdentifier";
MKAnnotationView *annotationView;
Myriadproregular *annotationIndexLabel;
 //CustomAnnotation *customAnnotation =nil
annotationView = [mapView dequeueReusableAnnotationViewWithIdentifier:kPinAnnotationIdentifier];
if (!annotationView) {

    annotationView = [[MKAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:kPinAnnotationIdentifier];
        annotationIndexLabel = [[Myriadproregular alloc] initWithFrame:CGRectMake(0, 3, 25 , 20)];
        annotationIndexLabel.font = [UIFont boldSystemFontOfSize:12];
        [annotationIndexLabel setBackgroundColor:[UIColor clearColor]];
        [annotationIndexLabel setTextColor:[UIColor whiteColor]];
        [annotationIndexLabel setTextAlignment:UITextAlignmentCenter];
        [annotationView addSubview:annotationIndexLabel];
        annotationView.canShowCallout = YES;
    annotationView.calloutOffset = CGPointMake(-5, 5);

}else {

    //Get the label if exists
    for (UIView *labelView in annotationView.subviews) {
        if ([labelView isKindOfClass:[UILabel class]]) {
            annotationIndexLabel = (Myriadproregular *) labelView;
            break;
        }
    }
}

if ([annotation isKindOfClass:[MKUserLocation class]]) {

    [annotationView setImage:[UIImage imageNamed:@"map_notify_bg.png"]];

}else {
    CustomAnnotation *customAnnotation = (CustomAnnotation *) annotation;
    [annotationIndexLabel setText:customAnnotation.annotationIndex];

    [annotationView setImage:[UIImage imageNamed:@"ico_inspector.png"]];
}

return annotationView;
} 
```

问题是：

当我`didSelectAnnotationView`点击提供给`MKAnnotationView`.

任何形式的帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T07:16:26.680

`[annotationView setCanShowCallout:NO]`

这解决了我的问题，因为我不想在单击图钉时调用标注，但我想调用要调用的`didSelectAnnotationView`委托。

谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T10:22:12.027

你给你的注释一个`title`属性吗？你确定`[annotationView setCanShowCallout:YES]`设置正确吗？

# jquery - 通过单击一个按钮打开一个 div 并通过单击另一个按钮关闭同一个 div

> ID：10751056
> 
> 赞同：1
> 
> 时间：2012-05-25T08:28:44.063
> 
> 标签：jquery, slidetoggle

我正在制作一个页面，其中将包含三个按钮 1）使命，2）愿景，3）管理

这里的功能必须是 1.通过单击任务按钮，将打开一个单独的 div(#mission1)。

2.通过单击视觉按钮，另一个 div(#vision1) 应在 #mission1 div 的相同位置打开，并且 #mission1 和 #mteam div 应关闭。

1.  通过单击管理按钮，另一个 div(#mteam) 应在 #mission1 和 #vision1 div 的相同位置打开，并且 #mission1、#vision1 div 应关闭。以此类推

我编写了以下脚本

```
$('document').ready(function() {

   $('#show1').click(function(){

     $('#mission1').slideToggle();  

       });

       $('#show2').click(function(){

           $(' #vission1').slideToggle();

           });

           $('#show3').click(function(){

            $('#mteam').slideToggle();   

               });
}); 
```

CSS

```
 #mission1 
  {
    width:450px; 
    height:200px; 
    background:#069; 
    margin-top:10px;
    display:none; 
    position:absolute; }

  #vission1
  {
    width:450px; 
    height:200px; 
    background:#096;
    margin-top:10px;
    display:none; 
    position:absolute; }

    #mteam
  {
    width:450px; 
    height:200px; 
    background:#CC3;
    margin-top:10px;
    display:none; 
    position:absolute; }​ 
```

HTML

```
<button id="show1">Mission</button>
<button id="show2">Vision</button>
<button id="show3">Management</button>

         <div id="mission1">Abcd</div>
         <div id="vission1">VVVVVVV</div>
         <div id="mteam">MMMMMMMMM</div> 
```

[看演示](http://jsfiddle.net/amitabhaghosh197/XseGB/)

我已经做到了，但我面临的问题只有隐藏问题。仅在单击相同按钮但未单击其他按钮后才进行隐藏操作。

请帮助我该怎么做。非常感谢提前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T08:31:12.877

根据您当前的代码：

```
$('#show1').click(function(){
     $('#vision1, #mteam').slideUp();
     $('#mission1').slideToggle();  
});

$('#show2').click(function(){
     $('#mission1, #mteam').slideUp();
     $('#vission1').slideToggle();  
});

$('#show3').click(function(){
     $('#mission1, #vission1').slideUp();
     $('#mteam').slideToggle();  
}); 
```

但是如果你可以像这样改变标记

```
<button class="mission1">Mission</button>
<button class="vission1">Vision</button>
<button class="mteam">Management</button>

         <div class="mission1 common">Abcd</div>
         <div class="vission1 common">VVVVVVV</div>
         <div class="mteam common">MMMMMMMMM</div> 
```

然后试试这段代码

```
$('button').on('click', function() {
  var current = this.className;
  $('div.common:visible').slideUp(function() {
    $('div.' + current).slideToggle();
  });
}); 
```

会更容易

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T08:58:25.250

thecodeparadox 的回答非常好。但是您可以使用 jQuery.data() 从按钮元素中获取 div id。如果是这样，你必须这样做：

```
<button data-href="mission1">Mission</button>
var currentDivId = $('button').data('href'); 
```

然后试试这个代码：

```
<button id="show1" data-href="mission1">Mission</button>
<button id="show2" data-href="vission1">Vision</button>
<button id="show3" data-href="mteam">Management</button>

<div id="mission1" class="demo">Abcd</div>
<div id="vission1" class="demo">VVVVVVV</div>
<div id="mteam" class="demo">MMMMMMMMM</div> 
```

和 JavaScript 代码：

```
$('document').ready(function() {
    $('#show1, #show2, #show3').click( function() {
        var $div = $('#' + $(this).data('href'));
        $('.demo').not($div).hide();
        $div.slideToggle();
    });
}); 
```

# iphone - #ifdef 条件不工作

> ID：10751057
> 
> 赞同：1
> 
> 时间：2012-05-25T08:28:45.710
> 
> 标签：iphone, objective-c, ios

我正在使用如下条件代码，

我只想在 ios5.0 和 > ios5.0 中运行某些代码（我的意思是我也想支持 ios5.0 和 5.1 版本）

但以下条件似乎不起作用。（目前我的开发版本是 5.1，但下面的代码片段没有被识别。控件没有进入它。）

请让我知道你的想法

```
#ifdef __IPHONE_5_0_OR_LATER 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T08:36:36.790

```
#if __IPHONE_OS_VERSION_MIN_REQUIRED >= __IPHONE_5_0
// iPhone 5.0 code here
#endif

#define __IPHONE_2_0     20000
#define __IPHONE_2_1     20100
#define __IPHONE_2_2     20200
#define __IPHONE_3_0     30000
#define __IPHONE_3_1     30100
#define __IPHONE_3_2     30200
#define __IPHONE_4_0     40000
#define __IPHONE_4_1     40100
#define __IPHONE_4_2     40200
#define __IPHONE_4_3     40300
#define __IPHONE_5_0     50000
#define __IPHONE_5_1     50100
#define __IPHONE_NA      99999  /* not available */ 
```

[如何定位特定的 iPhone 版本？](https://stackoverflow.com/questions/820142/how-to-target-a-specific-iphone-version)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T08:36:52.030

`#ifdef`是一个编译指令，因此它将在编译时而不是运行时进行评估。

因此，如果您将其添加到您的代码中，如果您的目标 SDK 与您的`#ifdef`. 因此，如果您为 iOS 4 和 5 编译一个应用程序并将所有 5 个唯一方法放在`#ifdef io5`应用程序中，那么在 iOS 4 上将崩溃，因为这些方法将被调用。

如果您想检查某些方法是否可用，那么您应该这样做：

这是一个从其父级解除模态视图控制器的示例。由于在 iOS 5`parentViewController`中更改为，我们检查是否可用并使用它。`presentingViewController``presentingViewController`

```
if ([self respondsToSelector:@selector(presentingViewController)]) {
    [self.presentingViewController dismissModalViewControllerAnimated:YES];
} else {
    [self.parentViewController dismissModalViewControllerAnimated:YES];
} 
```

检查类是否可用也是如此：

```
if ([MPNowPlayingInfoCenter class]) {
     MPNowPlayingInfoCenter *center = [MPNowPlayingInfoCenter defaultCenter];
     NSDictionary *songInfo = /* ... snip ... */;
    center.nowPlayingInfo = songInfo;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T10:25:44.050

```
NSArray *versionCompatibility = [[UIDevice currentDevice].systemVersion componentsSeparatedByString:@"."];

if ( 5 == [[versionCompatibility objectAtIndex:0] intValue] ) { /// iOS5 is installed

    // Put iOS-5 code here

} else { /// iOS4 is installed

    // Put iOS-4 code here         

} 
```

# c++ - QT QTableWidget 未出现在 QTabWidget 中

> ID：10751058
> 
> 赞同：0
> 
> 时间：2012-05-25T08:28:46.257
> 
> 标签：c++, qt, qtablewidget, qtabwidget

我有一个使用多个选项卡的应用程序。我用过`QTabWidget`。在某些选项卡上我需要显示表格，所以我使用了`QTableWidget`.

代码片段是：

```
QWidget *qwgt = qPreviewTabs->widget(Index);
QTableWidget *qDrvTab = new QTableWidget();
....
....
....
QVBoxLayout *vbLyt = new QVBoxLayout();
vbLyt->addWidget(qDrvTab);
qwgt->setLayout(vbLyt); 
```

当我添加按钮和树小部件时，它们都会毫无问题地出现在指定的选项卡上。只有`QTableWidget`拒绝显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T09:16:21.010

```
A table with no rows and columns is a void. 
```

也一样

```
qDrvTab->setRowCount(no_of_rows);
qDrvTab->setColumnCount(no_of_cols); 
```

在将其添加到布局之前。

现在您可以在布局中看到您的 Tablewidget。

# asp.net - 以编程方式设置 sessionState 的 customProvider

> ID：10751064
> 
> 赞同：3
> 
> 时间：2012-05-25T08:29:14.057
> 
> 标签：asp.net

在我的`web.config`文件中，我声明了 2 个 sessionState 提供程序：

```
<sessionState mode="Custom" customProvider="SessionProvider1">
    <providers>
        <add name="SessionProvider1" ... />
        <add name="SessionProvider2" ... />
    </providers>
</sessionState> 
```

现在我想在运行时切换`customProvider`到`SessionProvider2`...除了以`web.config`编程方式修改之外，还有什么方法可以做到这一点？

谢谢。

# asp.net - 如何从 asp.net 中具有 UNICODE 值的 URL 获取正确的 QueryString 值？

> ID：10751065
> 
> 赞同：4
> 
> 时间：2012-05-25T08:29:17.840
> 
> 标签：asp.net, url, query-string, unicode-string

我有一个带有 nvarchar 数据类型的字段来存储 UNICODE 值。该字段绑定到Repeater Control，单击链接后我将从该控件重定向到其他页面。当此字段包含字段中的数值时，我得到正确的 QueryString 并显示重定向页面。但是，当它包含一些 unicode 字符（数字或英文字符除外）时，它会显示值 '?????' 在 'fhn' 的 QueryString 中。如何按原样获取此 UNICODE QueryString 值并显示结果？

在中继器项目模板中：

```
<b>घर क्र./House No.</b><%# Eval("HouseNumber")%> 
<a href="AddressList.aspx?li=<%=Request.QueryString["li"].Trim().ToString() %>&fhn=<%# Eval("HouseNumber")%" target="_blank">या पत्यावरील </a> 
```

在 .cs 文件中：

```
string HouseNumber = Request.QueryString["fhn"].ToString().Trim(); 
```

//在这里我得到'????' 值，如果它包含 unicode 值。

帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T08:42:30.627

尝试将其更改为更像这样的内容：

`<!-- Web.Config Configuration File -->``<configuration>` `<system.web>` `<customErrors mode="Off"/>` `<globalization fileEncoding="iso-8859-1" requestEncoding="iso-8859-1"responseEncoding="iso-8859-1"/>` `</system.web>` `</configuration>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T08:47:44.150

你必须更精确。您可以在 web.config 文件中设置请求和响应编码：

```
<system.web> 
    <globalization requestEncoding="iso-8859-1" responseEncoding="iso-8859-1" /> 
</system.web> 
```

# c# - 避免 Row not found 或 changed 错误

> ID：10751069
> 
> 赞同：1
> 
> 时间：2012-05-25T08:30:08.727
> 
> 标签：c#, asp.net-mvc, linq-to-sql

我在网站上有横幅。当横幅显示时，我在数据库中增加字段。这是代码：

```
public Banner GetBanner(CategoryBanner type)
        {
            var banners = Database.Banners.Where(b => b.IsPublish.Value &&
                                                      b.Category.Value == (int)type &&
                                                      b.PeriodShowCountAlready < b.PeriodShowCount || b.IsPublish.Value && b.Category.Value == (int)type &&
                                                      b.ShowNext < DateTime.Now);

            var count = banners.Count();
            if (count != 0)
            {
                var skip = new Random().Next(banners.Count() - 1);

                Banner banner = banners.Skip(skip).FirstOrDefault();

                if (banner != null)
                {
                    UpdatePeriodShowCountAlready(banner); // problem is inside this method

                    if (banner.ShowStart == null)
                        UpdateShowStartAndEnd(banner); 

                    return banner;
                }
            }
            return null;
        }

private void UpdatePeriodShowCountAlready(Banner banner)
        {
            try
            {
                if (banner != null)
                {
                    banner.PeriodShowCountAlready++;

                    if (banner.PeriodShowCountAlready >= banner.PeriodShowCount && banner.ShowNext < DateTime.Now)
                    {
                        banner.PeriodShowCountAlready = 0;
                        banner.ShowStart = null;
                        banner.ShowNext = null;
                    }

                    Database.SubmitChanges();
                }
            }
            catch (Exception ex)
            {
                ErrorLog.GetDefault(null).Log(new Error(ex));
            }

        } 
```

而且，我收到以下错误：

```
System.Data.Linq.ChangeConflictException
Row not found or changed. 
```

这个错误很容易重现：按住F5几秒钟就够了。我明白为什么会发生这个错误，但是如何正确地重写我的代码呢？
谢谢。

# android - 为什么在android中加载多个图像时imageview会占用空间

> ID：10751071
> 
> 赞同：0
> 
> 时间：2012-05-25T08:30:24.260
> 
> 标签：android, android-imageview

当我加载图像时图像占用空间我不明白为什么在第一个图像显示后占用空间其他图像正常显示你可以看到我的活动 java 类具有 imagedisplay 方法我也在这里加载图像在这个图像是采取第一张图片前后的空格

![在此处输入图像描述](../Images/3f749881d4fd70a574c971e5fa0a543d.png)

> 我的活动.java

```
public void imagedisplay()
{
    itable = (TableLayout)findViewById(R.id.itable);

    String chekplace=null;

    Log.e("MyList Size", "Counted--->"+mylist.size());

    int size=mylist.size();
    s:
       for(int j=0;j<mylist.size();j++)
        {

            trstate = new TableRow(this);
            trstate.setGravity(Gravity.CENTER_HORIZONTAL);

            tstate = new TextView(this);
            tstate.setGravity(Gravity.CENTER);

            String tempstate = mylist.get(j).get(KEY_PLACENAME).intern().toString();
            tstate.setText(tempstate);

            trstate.addView(tstate);
            itable.addView(trstate);

            chekplacename=mylist.get(j).get(KEY_PLACENAME).intern().toString();

            int counter=1;
            String nextplace=chekplacename;
            chekplace=nextplace;
            m:
                while(nextplace==chekplace)
            {
                     trimage = new TableRow(this);
             trimage.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.FILL_PARENT));
              for (int m = 1; m <= 4; m++)
           {                      
                       chekplace=mylist.get(j).get(KEY_PLACENAME).intern().toString();

                if(nextplace==chekplace)     
                {
                          iimage = new ImageView(this);
              iimage.setPadding(2,2,2,2);
                          BitmapFactory.Options bmOptions;
              bmOptions = new BitmapFactory.Options();
             bmOptions.inSampleSize = 4;
                String loadimageurl=mylist.get(j).get(KEY_PHOTOURL).intern().toString();
                counter++
                        bm = LoadImage(loadimageurl, bmOptions);

                int height=bm.getWidth();
                int width=bm.getHeight();  

               Log.e("newheight","Before--->" +height);
           Log.e("new width","Before--->"+width);
               bm=resize(bm, bm.getHeight(), bm.getWidth());
               height=bm.getWidth();
               width=bm.getHeight(); 

                    iimage.setLayoutParams(new TableRow.LayoutParams( height, width));
        iimage.setImageBitmap(bm);
                trimage.addView(iimage); 
                     }

           }
            itable.addView(trimage);    

        }    
     } 
```

# java - ajax 可以调用其他ajax 页面吗？

> ID：10751073
> 
> 赞同：0
> 
> 时间：2012-05-25T08:30:28.363
> 
> 标签：java, javascript, ajax

我有索引页面，其中包含 div 部分。我想根据她的链接点击将不同的页面调用到这个 div 部分中，这就完成了。当调用也可能使用 ajax 调用的页面时，在这种情况下，ajax 调用不适用于此页面。请告诉我可以在 ajax 中调用 ajax。如果是，请帮助我。

**更新编辑：**

我创建了一个要点，其中包含所有使用过的页面，脚本[https://gist.github.com/2786811](https://gist.github.com/2786811) .page service_status 使用 ajax 调用每 5 秒调用一次 view.jsp，手头 view.jsp 与数据库交互并准备view.当我们从 index.jsp 进行 ajax 调用时，调用了 service_status 但它没有调用 view.jsp 文件。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T08:34:39.457

如果您尝试使用 转储`<script>`标签`innerHTML`，它将无法正常工作。

但是，您可以（例如）返回具有两个属性的 JSON 对象：

```
{
    html: "All your <b>HTML</b> here",
    js: "alert('JavaScript to be run');"
} 
```

然后，使用`html`属性将内容放在页面上，然后`eval`使用`js`属性。

这不是最好的解决方案，因为它使用 evil `eval`，但是除非您想重写整个基本结构以正确使用回调，否则它可能是您最好的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T08:35:28.130

您可以使用**$(document).ready(function () {...});在页面加载时进行 ajax 调用** 在您正在调用的目标页面中。

# c# - 如何使用 Watin 测试 DataTables 服务器处理源表？

> ID：10751075
> 
> 赞同：0
> 
> 时间：2012-05-25T08:30:33.470
> 
> 标签：c#, jquery, testing, datatables, watin

我有一个 DataTables 控制的表，它通过[server-side processing](http://datatables.net/usage/server-side)获取数据。我想用 Watin 测试该表是否包含某些行，但是当页面最初加载时，该表尚未填充（因为 DataTables 脚本正在从服务器加载数据）。如何在我的测试中等待 DataTables 完成从服务器加载数据，然后再检查表行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T22:33:59.340

我建议在子元素出现之前轮询 DOM。如果您有一个静态数据集返回，您可以等到表返回正确的行数。一旦您确定数据已填充，您就可以进入下一步的下一步。我只是将数字作为示例。

```
public void CheckForCells()
{
    Table table = Document.Table(Find.ById("MyTableID"));

    int counter = 0;
    while (table.TableRows.Count < 5 && counter < 50)
    {
        table.Refresh();
        counter++;
        System.Threading.Thread.Sleep(10);
    }

} 
```

# django - 如何从模板中获取用户未提交的变量

> ID：10751076
> 
> 赞同：0
> 
> 时间：2012-05-25T08:30:36.403
> 
> 标签：django, django-forms, django-templates, django-views

我是 django 的新手，为了练习，我正在尝试编写我自己版本的所有熟悉的“待办事项列表”应用程序。

我有一些页面显示用户输入的所有待办事项列表项，以及一个用于编辑每个项的按钮。编辑按钮将用户发送到另一个页面，其中包含一个表单以输入对项目的更改。

用户可以更改有关项目的所有内容。显然 request.POST 给了我用户刚刚输入表单的所有信息，但我希望这些信息重写他们最初单击的项目的信息。那么如何编写视图代码来找出原始项目是什么？

我想我可以将表单提交按钮格式化为：

> `<button type="submit" name="save" value={{ item.pk }}>Save</button>`

并以这种方式获取主键

但是可以说我已经将两个项目传递给了编辑页面，我想让用户能够将它们组合起来。同样，我*可以*通过以下方式弄清楚这些项目是什么：

> `<button type="submit" name="save" value='{{ item1.pk }} {{ item2.pk }}'>Save</button>`

然后

> `request['save'].split(' ')`

这似乎有点愚蠢。还有其他一些不那么蛮力的方法吗？

像一个：

> request.tell_me_all_items_passed_to_the_template

之类的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T07:26:13.707

如果其他人有同样的问题

**所以不要这样做：**

*模板*

```
<form method="post" action="/list/saving/">
    <!--- form fields --->
    <button type="submit" name="save" value='{{ item.pk }}'>Save</button>
</form> 
```

*网址.py*

```
(r'^list/saving/$', save) 
```

*视图.py*

```
def save(request):
    ....
    item = Item.objects.get(pk=request.POST['save'])
    .... 
```

**做这个：**

*模板*

```
<form method="post" action="{% url todolist.views.save item.pk %}">
    <!--- form fields --->
    <button type="submit" name="save">Save</button>
</form> 
```

*网址.py*

```
(r'^list/saving/(\d+)/$', save) 
```

*视图.py*

```
def save(request, pk):
    ....
    item = Item.objects.get(pk=pk)
    .... 
```

[有关 url 反转的更多信息](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#url)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T14:16:00.553

如果你真的需要，只需使用隐藏输入。但是，无论如何这是不必要的。用户可能能够更改有关项目的“一切”，但他们不能更改`pk`（或者至少他们*不*应该能够......不要给他们选项）。这`pk`是 Django 用来识别对象的，所以这已经为你处理好了。不确定这里的问题是什么。

# c# - 加载由 Roslyn 编译器生成的程序集

> ID：10751079
> 
> 赞同：8
> 
> 时间：2012-05-25T08:31:01.200
> 
> 标签：c#, assemblies, roslyn

我正在使用 Roslyn 编译器生成 Greeter.dll。尝试加载 DLL 文件时出现我的问题。

这是代码：

```
using System;

using Roslyn.Compilers;
using Roslyn.Compilers.CSharp;

using System.IO;
using System.Reflection;
using System.Linq;

namespace LoadingAClass
{
    class Program
    {
        static void Main(string[] args)
        {
            var syntaxTree = SyntaxTree.ParseCompilationUnit(@"
class Greeter
{
    static void Greet()
    {
        Console.WriteLine(""Hello, World"");
    }
}");

            var compilation = Compilation.Create("Greeter.dll",
                syntaxTrees: new[] { syntaxTree },
                references: new[] {
                    new AssemblyFileReference(typeof(object).Assembly.Location),
                    new AssemblyFileReference(typeof(Enumerable).Assembly.Location),
                });

            Assembly assembly;
            using (var file = new FileStream("Greeter.dll", FileMode.Create))
            {
                EmitResult result = compilation.Emit(file);
            }

            assembly = Assembly.LoadFile(Path.Combine(Directory.GetCurrentDirectory(), @"Greeter.dll"));
            Type type = assembly.GetType("Greeter");
            var obj = Activator.CreateInstance(type);

            type.InvokeMember("Greet",
                BindingFlags.Default | BindingFlags.InvokeMethod,
                null,
                obj,
                null);

            Console.WriteLine("<ENTER> to continue");
            Console.ReadLine();

        }
    }
    // Thanks, http://blogs.msdn.com/b/csharpfaq/archive/2011/11/23/using-the-roslyn-symbol-api.aspx
} 
```

错误信息发生在线路上`assembly = Assembly.LoadFile(Path.Combine(Directory.GetCurrentDirectory(), @"Greeter.dll"));`并显示

> Im Modul wurde ein Assemblymanifest erwartet。（Ausnahme von HRESULT：0x80131018）

大致翻译为

> 模块中应有程序集清单。

有谁知道我在这里想念什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-13T16:54:36.510

我偶然发现了这一点，即使你有一个公认的答案，我认为它一般没有帮助。因此，我将把它留给像我这样的未来搜索者。

代码的问题在于两件事，您可以通过查看从

```
EmitResult result = compilation.Emit(file); 
```

如果查看 EmitResult 对象的属性，您会发现 results.Diagnostics 成员中有 2 个错误。

1.  找不到主要方法
2.  找不到类控制台

所以，要解决这个问题，1.您需要将输出标记为 dll 2.您需要添加“使用系统；” 到您传递给 API 的代码或说“System.Console.WriteLine”

以下代码可以进行更改以解决这两个问题：

```
 var outputFile = "Greeter.dll";
        var syntaxTree = SyntaxTree.ParseCompilationUnit(@"
 // ADDED THE FOLLOWING LINE
using System;

class Greeter
{
    public void Greet()
    {
        Console.WriteLine(""Hello, World"");
    }
}");
        var compilation = Compilation.Create(outputFile,
            syntaxTrees: new[] { syntaxTree },
            references: new[] {
                new AssemblyFileReference(typeof(object).Assembly.Location),
                new AssemblyFileReference(typeof(Enumerable).Assembly.Location),
            },

// ADDED THE FOLLOWING LINE
            options: new CompilationOptions(OutputKind.DynamicallyLinkedLibrary));

        using (var file = new FileStream(outputFile, FileMode.Create))
        {
            EmitResult result = compilation.Emit(file);
        }

        Assembly assembly = Assembly.LoadFrom("Greeter.dll");

        Type type = assembly.GetType("Greeter");
        var obj = Activator.CreateInstance(type);

        type.InvokeMember("Greet",
            BindingFlags.Default | BindingFlags.InvokeMethod,
            null,
            obj,
            null);

        Console.WriteLine("<ENTER> to continue");
        Console.ReadLine(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T11:27:30.377

我一直在向[O2 Plarform](http://diniscruz.blogspot.co.uk/p/o2-platform.html)添加 Roslyn 支持，这里是您如何使用它的 Roslyn 支持来编译（代码）、创建（和汇编）和调用（其方法）一行代码：

```
return @"using System; class Greeter { static string Greet() {  return ""Another hello!!""; }}"
        .tree().compiler("Great").create_Assembly().type("Greeter").invokeStatic("Greet"); 

//O2Ref:O2_FluentSharp_Roslyn.dll 
```

这是一个执行看起来像你的代码片段的版本（我添加了一个返回值）：

```
panel.clear().add_ConsoleOut();
var code = @"
using System;
class Greeter
{
    static string Greet()
    { 
        Console.WriteLine(""Hello, World""); 
        return ""hello from here"";
    }
}";
var tree = code.astTree();
if (tree.hasErrors())
    return tree.errors();   

var compiler = tree.compiler("Great")
                   .add_Reference("mscorlib");

if (compiler.hasErrors()) 
    return compiler.errors();    

var assembly  =tree.compiler("Great")
                   .create_Assembly();

return assembly.type("Greeter")
               .invokeStatic("Greet"); 

//O2Ref:O2_FluentSharp_Roslyn.dll
//O2File:_Extra_methods_Roslyn_API.cs
//O2File:API_ConsoleOut.cs 
```

有关此功能的更多详细信息和屏幕截图，请参阅此博客文章：[1 行编译、创建和执行：O2 脚本使用 Roslyn 动态编译和执行方法](http://diniscruz.blogspot.co.uk/2012/06/1-line-to-compile-create-and-execute-o2.html)

**更新：**请参阅[http://blog.diniscruz.com/search/label/Roslyn](http://blog.diniscruz.com/search/label/Roslyn)了解大量 Roslyn 相关帖子和工具（使用 O2 平台创建）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-07T00:32:11.233

参考有一个新的 API，如下所示：

```
var compilation = Compilation.Create(outputFile,
    syntaxTrees: new[] { syntaxTree },
    references: new[] {
        new MetadataFileReference(typeof(object).Assembly.Location),
        new MetadataFileReference(typeof(Enumerable).Assembly.Location),
    },
    options: new CompilationOptions(OutputKind.DynamicallyLinkedLibrary)
); 
```

这是 9 月最新的 Roslyn-CTP 2012...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T09:28:35.287

这段代码运行良好：

```
using System;

using Roslyn.Compilers;
using Roslyn.Compilers.CSharp;

using System.IO;
using System.Reflection;
using System.Linq;

namespace LoadingAClass
{
    class Program
    {
        static void Main(string[] args)
        {
            var syntaxTree = SyntaxTree.ParseCompilationUnit(@"
using System;
namespace HelloWorld
{
    class Greeter
    {
        public static void Greet()
        {
            Console.WriteLine(""Hello, World"");
        }
    }
}");

            string dllPath = Path.Combine(Directory.GetCurrentDirectory(), "Greeter.dll");
            string pdbPath = Path.Combine(Directory.GetCurrentDirectory(), "Greeter.pdb");

            var compilation = Compilation.Create(dllPath,
                new CompilationOptions(
                    assemblyKind: AssemblyKind.DynamicallyLinkedLibrary
                ))
                .AddSyntaxTrees( syntaxTree )
                .AddReferences(new AssemblyFileReference(typeof(object).Assembly.Location))
                .AddReferences(new AssemblyFileReference(typeof(Enumerable).Assembly.Location));

            EmitResult result;

            using (FileStream dllStream = new FileStream(dllPath, FileMode.OpenOrCreate))
            using (FileStream pdbStream = new FileStream(pdbPath, FileMode.OpenOrCreate))
            {
                result = compilation.Emit(
                    executableStream: dllStream,
                    pdbFileName: pdbPath,
                    pdbStream: pdbStream);
            }

            if (result.Success)
            {
                //assembly = Assembly.LoadFile(Path.Combine(Directory.GetCurrentDirectory(), @"Greeter.dll"));
                Assembly assembly = Assembly.LoadFrom(@"Greeter.dll");

                Type type = assembly.GetType("HelloWorld.Greeter");
                var obj = Activator.CreateInstance(type);

                type.InvokeMember("Greet",
                    BindingFlags.Default | BindingFlags.InvokeMethod,
                    null,
                    obj,
                    null);
            }
            else
            {
                Console.WriteLine("No Go");
                Console.WriteLine(result.Diagnostics.ToString());
            }

            Console.WriteLine("<ENTER> to continue");
            Console.ReadLine();

        }
    }
    // Thanks, http://blogs.msdn.com/b/csharpfaq/archive/2011/11/23/using-the-roslyn-symbol-api.aspx
    // Thanks, http://social.msdn.microsoft.com/Forums/en-US/roslyn/thread/d620a4a1-3a90-401b-b946-bfa1fc6ad7a2
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-25T09:16:06.373

原来我需要创建一个 pdb 文件。

```
using (FileStream dllStream = new FileStream(dllPath, FileMode.OpenOrCreate))
using (FileStream pdbStream = new FileStream(pdbPath, FileMode.OpenOrCreate))
{
    result = compilation.Emit(
       executableStream: dllStream,
       pdbFileName: pdbPath,
       pdbStream: pdbStream);
} 
```

# hibernate - 是否可以在 Hibernate 中为非延迟关系延迟加载？

> ID：10751082
> 
> 赞同：5
> 
> 时间：2012-05-25T08:31:06.557
> 
> 标签：hibernate, lazy-loading

我有一个与*惰性*属性集*false*的父子关系，所以当我通过查询获得父类时，我也获得了他的孩子。

通常最好加载所有内容，父子，但在一种情况下，我不需要这样做。

**当我在不改变lazy=false关系的情况下获得父母时，有没有办法避免获取孩子？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T10:00:24.847

不，这是不可能的。如果您只有一种不能获取关联的情况，您唯一可以做的就是使用 DTO 而不是您的实体，并使用投影来仅检索您想要的内容：

```
String hql = "select firstName, lastName from User u where ...";
List<Object[]> rows = session.createQuery(hql).list();
List<UserDTO> users = new ArrayList<UserDTO>(rows.size());
for (Object[] row : rows) {
    users.add(new User((String) row[0], (String) row[1]));
}
return users; 
```

# php - 使用分块响应时如何禁用 chrome 缓存

> ID：10751083
> 
> 赞同：1
> 
> 时间：2012-05-25T08:31:07.190
> 
> 标签：php, flush, chunked

`<?php`
`echo 'first<br>';`
`ob_flush();`
`flush();`
`file_get_contents("http://ttt.tt");`
`echo "second";`

[http://ttt.tt](http://ttt.tt)无法访问。所以在浏览器中我们可以看到输出“first”，然后等待“30s”/*每个脚本的最大执行时间*/将输出“second”。在 IE、FF 下运行正常。
但是在chrome中，“first”&&“second”会一起输出。

我的英语不好。我不知道你是否明白。帮助！！！

我还尝试像这样禁用浏览器的缓存：
`header("Cache-Control: no-cache, must-revalidate");`
`header("Cache-Control: post-check=0, pre-check=0", false);`
`header("Pragma: no-cache");`

但是问题依然存在。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T14:49:40.240

您不需要禁用缓存。这都是关于内容类型编码的。我所做的只是：

```
header('Content-Type: text/html; charset=UTF-8'); 
```

最初是：

```
header('Content-Type: text/html'); 
```

......这没有用。指定“ **charset=UTF-8** ”会立即强制 Chrome 呈现分块响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T10:03:57.090

问题可能是“Pragma: no-cache”不会每次都起作用。HTTP 规范没有为 Pragma 响应标头设置任何准则。尝试使用“过期”。

如果您需要更多信息，这里是[Web 缓存教程的链接](http://www.mnot.net/cache_docs/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-11T10:17:11.823

一种选择是添加`X-Content-Type-Options: nosniff`.

有关详细说明，请参阅[分块传输编码 - 浏览器行为](https://stackoverflow.com/a/56089065/277267)。

# xcode - 从 Jenkins 运行 iOS 项目单元测试不会产生任何输出

> ID：10751086
> 
> 赞同：0
> 
> 时间：2012-05-25T08:31:27.793
> 
> 标签：xcode, continuous-integration, jenkins

我已经用 git 和 Xcode 插件设置了 Jenkins，这样我就可以在 CI 机器上构建一个 iOS 项目。但是 - 我似乎没有在控制台中获得任何单元测试输出。我看到了编译消息（对于实现文件以及 xibs），我看到了测试包的构建，但没有“测试通过”或“测试失败”消息。从 Xcode 运行单元测试会产生所有需要的输出。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T22:22:49.980

您的问题可能是由几件事引起的。要接近解决方案，您需要了解一些事项：

*   你如何运行詹金斯？您是否使用了[http://jenkins-ci.org](http://jenkins-ci.org)的 Jenkins Mac 安装程序？
*   Jenkins 是否在您的用户帐户下运行？还是以其他人的身份运行？它是否作为启动守护程序运行？
*   您的测试是否需要访问 WindowServer，或者他们是否完全满意仅命令行？
*   你的机器发生了什么？

当 Jenkins 运行构建并且单元测试没有运行时，打开 Activity Monitor，显示进程树，检查 Xcode 的子进程，如果你找到一个看起来像你的单元测试的进程，然后对其进行采样（使用 Sample 按钮在活动监视器或“示例”命令行实用程序中）。基于样本的流程是什么？

如果您的单元测试需要访问 WindowServer 并且您将 Jenkins 作为启动守护程序运行，您可能会对[https://github.com/stisti/jenkins-app感兴趣](https://github.com/stisti/jenkins-app)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T12:03:17.613

通常像“测试 x 通过”或“测试 x 失败”这样的输出是由于测试套件输出到控制台。当我调用 MSTest 时，我通过 cmd 调用，输出通过 jenkins 转发回来。听起来您需要一些东西来读取 xcode 正在制作的输出并将其显示给您。听起来您可能无法实时执行此操作，除非有某种输出转到您未设置的控制台标志。

# android - 如何在 Android 中创建一个整洁的两列输入表单？

> ID：10751094
> 
> 赞同：16
> 
> 时间：2012-05-25T08:32:01.793
> 
> 标签：android, android-layout

我想创建一个整洁的两列输入表单，如下所示：

![http://img31.imageshack.us/img31/115/addnew2.png](../Images/479461951a84bfb39b67b2b767aca1cd.png)

到目前为止，我的 xml 布局代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <TextView
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="0.25"
            android:text="@string/lblTitle" />

        <EditText
            android:id="@+id/txtTitle"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="0.75"
            android:ems="10" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <TextView
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="0.25"
            android:text="@string/lblAuthor" />

        <EditText
            android:id="@+id/txtAuthor"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="0.75"
            android:ems="10" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <TextView
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="0.25"
            android:text="@string/lblPublisher" />

        <EditText
            android:id="@+id/txtPublisher"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="0.75"
            android:ems="10" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <TextView
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="0.25"
            android:text="@string/lblIsbn" />

        <EditText
            android:id="@+id/txtIsbn"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="0.75"
            android:ems="10" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <View
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="0.25" />

        <Button
            android:id="@+id/btnSubmit"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="0.375"
            android:text="@string/submit" />

        <Button
            android:id="@+id/btnCancel"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="0.375"
            android:text="@string/cancel" />
    </LinearLayout>

</LinearLayout> 
```

你可以看到我使用了 LinearLayout，利用 layout_weight 和 layout_width="0dp" 技巧使两列划分看起来很整齐。在 HTML 代码中，我们可以使用 with % width size。但在 android xml 布局中，layout_width 没有 %-value。我想避免列宽的硬编码 dp 值。在安卓中可以吗？

到目前为止，这是我能做的最好的。现在我想调整 ISBN 文本框的大小以变得更小（从当前大小减小 50%）。但我无法调整文本框宽度，因为 layout_width 必须为“0dp”才能使 layout_weight 起作用。我也想对提交和取消按钮大小做同样的事情。

我想知道使用 LinearLayout 是否是在 android 中巧妙地创建输入表单的正确方法。TableLayout 可以更好地解决这个问题吗？听说不能在 TableLayout 中更改子视图的 layout_width。

这里有人推荐我使用RelativeLayout，我试过了，但它不支持layout_weight。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-25T10:23:02.030

好吧，我找到了 LinearLayout 的方法。诀窍是通过使用 LinearLayout 包装要调整大小的视图。然后可以通过使用：android:layout_width 或 android:ems 属性来调整 View 本身的宽度。

这是xml代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <TextView
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="0.25"
            android:text="@string/lblTitle" />

        <EditText
            android:id="@+id/txtTitle"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="0.75"
            android:ems="10" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <TextView
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="0.25"
            android:text="@string/lblAuthor" />

        <EditText
            android:id="@+id/txtAuthor"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="0.75"
            android:ems="10" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <TextView
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="0.25"
            android:text="@string/lblPublisher" />

        <EditText
            android:id="@+id/txtPublisher"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="0.75"
            android:ems="10" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <TextView
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:layout_weight="0.25"
            android:text="@string/lblIsbn" />

        <LinearLayout
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="0.75"
            android:orientation="horizontal" >

            <EditText
                android:id="@+id/txtIsbn"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:ems="5" />
        </LinearLayout>
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <View
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="0.25" />

        <LinearLayout
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="0.75"
            android:orientation="horizontal" >

            <Button
                android:id="@+id/btnSubmit"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:ems="5"
                android:text="@string/submit" />

            <Button
                android:id="@+id/btnCancel"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:ems="5"
                android:text="@string/cancel" />
        </LinearLayout>
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T09:22:32.823

您还应该考虑[gridLayout](http://developer.android.com/reference/android/widget/GridLayout.html)，它可以在 API7+ 上使用（通过使用 android 库）。

这是一个链接： [http ://android-developers.blogspot.com/2011/11/new-layout-widgets-space-and-gridlayout.html](http://android-developers.blogspot.com/2011/11/new-layout-widgets-space-and-gridlayout.html)

# python - 有python的文档工具吗？

> ID：10751101
> 
> 赞同：2
> 
> 时间：2012-05-25T08:32:48.297
> 
> 标签：python

就像 perldoc 用于 perl，man 用于 c。

有python的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T08:34:59.823

通常，您应该使用[文档字符串](http://docs.python.org/tutorial/controlflow.html#documentation-strings)：

```
def foo(bar):
   """ Applies the foo operation onto bar """
   # ... 
```

[然后，您可以使用pydoc](http://docs.python.org/library/pydoc.html)或[sphinx](http://sphinx.pocoo.org/)生成 HTML（或其他输出格式），或使用内置[`help`](http://docs.python.org/library/functions.html#help)函数在活动对象上查看它们。

内置模块的文档[可在线获取](http://docs.python.org/library/index.html)（[也可下载](http://docs.python.org/download.html)）或通过`help`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-25T08:37:57.180

有 - 它被称为：“pydoc”。您可以从 shell 运行它，例如：

```
$ pydoc sys 
```

将为您提供有关 sys 模块的帮助。它可以将帮助导出到 html (pydoc -w) 或通过简单的 gui 管理生成服务器：

```
$ pydoc -g 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-25T08:35:14.297

在 python shell 中，您可以使用[help](http://docs.python.org/library/functions.html#help)内置函数（例如，这里是 os.path 模块的文档）：

```
>>> import os
>>> help(os.path) 
```

> 关于模块 posixpath 的帮助：
> 
> NAME posixpath - Posix 路径名的常见操作。
> 
> 文件 /usr/lib/python2.7/posixpath.py
> 
> 模块文档 [http://docs.python.org/library/posixpath](http://docs.python.org/library/posixpath)
> 
> 描述 不是直接导入这个模块，而是导入 os 并将这个模块称为 os.path。“os.path”名称是该模块在 Posix 系统上的别名；在其他系统（例如 Mac、Windows）上，os.path 以特定于该平台的方式提供相同的操作，并且是另一个模块（例如 macpath、ntpath）的别名。
> 
> ```
> Some of this can actually be useful on non-Posix systems too, e.g.
> for manipulation of the pathname component of URLs. 
> ```
> 
> 功能
> 
> ... ... ..

# javascript - 在 n 个字符后剪切一个字符串，但如果它位于单词的中间，则剪切整个单词

> ID：10751102
> 
> 赞同：14
> 
> 时间：2012-05-25T08:32:54.133
> 
> 标签：javascript, jquery, character, truncate

我正在尝试制作一个 JS 函数，它可以在 n 个字符之后剪切一个字符串 - 这很有效。问题是如果它在一个单词的中间它看起来很糟糕，所以我需要你的帮助让它在它的中间切掉整个单词。

到目前为止我的代码：

```
if($('#desc').text().length > 505){
  str = $("#desc").text();
  $('#desc').text(str.substring(0, 505)).append('...');
} 
```

附言

*   #desc 是包含我的字符串的 div。
*   你可以使用 jQuery。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-25T09:02:26.777

```
function cut(n) {
    return function textCutter(i, text) {
        var short = text.substr(0, n);
        if (/^\S/.test(text.substr(n)))
            return short.replace(/\s+\S*$/, "");
        return short;
    };
}
$('#desc').text(cut(505)); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-25T13:45:03.707

**lastIndexOf**方法可以找到字符串中的最后一个空格字符，

并传递第二个参数设置上限。

```
var cutat= string.lastIndexOf(' ',505);
if(cutat!=-1)string=string.substring(0,cutat)+'...';
//else the string is shorter than 505 (or has no spaces...) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-25T09:01:07.573

它是[`for`循环](https://developer.mozilla.org/en/JavaScript/Reference/Statements/for),[`charAt`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/charAt)和针对您认为是单词分隔符的字符测试字符的方法的组合。我将为此使用[正则表达式](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp)：

```
function splitString(str, index) {
  var delim = /\s|[,\.]/; // Put any other character you consider
                          // a non-word char in the brackets.
                          // The initial \s is any whitespace, so
                          // space, tab, newline, etc.
  var ch;
  var i;

  // Loop until we find a matching delimiter or we run out of string    
  for (i = index;
       i >= 0 && !delim.test(str.charAt(i));
       --i) {
    // No body
  }
  if (i < 0) {
    // No break before, split word in middle
    return index;
  }
  return i + 1;
} 
```

[实例](http://jsbin.com/ijiwav)| [来源](http://jsbin.com/ijiwav/edit)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-25T08:42:12.637

你可能想看看[Cutter.js](https://github.com/tcorral/Cutter.js/)

> Cutter.js 是一个用于截断 HTML 代码以通过字数限制其长度的库，而不会丢失标记。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-15T22:41:56.453

这个简单的功能在任何情况下都可以使用，如果需要，还可以添加 3 个点：

```
function shortenString(source_string, max_length) {
    var short = source_string.substr(0, max_length);
    if (/^\S/.test(source_string.substr(max_length)))
        return short.replace(/\s+\S*$/, "") + '...';
    return short;
}; 
```

例子：

```
var title = "This function will work in any situation";
var short = shortenString(title, 30); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-09-28T14:23:43.820

```
 var texte = `Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc eu magna at justo bibendum accumsan. Aliquam quam metus, hendrerit eget commodo at, sagittis eu lectus. Nunc quis purus urna. Etiam sollicitudin aliquam dui, vel rutrum ligula tincidunt id. In elementum ultricies ex ut bibendum. Proin ac purus id lorem pharetra commodo. Curabitur euismod commodo eleifend. Proin porttitor aliquet massa eu dapibus. Phasellus vitae tempor nibh. Donec venenatis ligula dui, at eleifend urna facilisis sed. Proin sollicitudin vehicula mi aliquam interdum. Quisque in erat purus. Ut ut ipsum nec odio mollis maximus. Vivamus nec ultricies mi, ut posuere augue.`;

    function cut(n,text) {
        if(n<text.length){
          while(text[n] != " " && n>0){
            n--;
          }
          return text.substr(0,n);
        }else{
          return text;
        }

		}

    document.getElementById("result").innerHTML = cut(5,texte);
```

```
<p id="result"></p>
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-05-25T08:38:49.207

```
function cutAt(text, n) {
    if(text.length > n){
        for (; " .,".indexOf(text[n]) !== 0; n--){
        }
        return text.substr(0, n) + '...';
    }
    return text;
}
$('#desc').text(cutAt($('#desc').text(), 505)); 
```

# html - 页面放大时在视口中居中 DIV

> ID：10751103
> 
> 赞同：0
> 
> 时间：2012-05-25T08:32:54.107
> 
> 标签：html, css

看到那个[小提琴](http://jsfiddle.net/MZgxN/)。如果您放大页面，您会看到第一个 div 始终可见且居中（宽度为 %）。另一个不是（以 px 为单位的宽度）。我可以以某种方式使第二个 div 以类似的方式表现吗？

更新：目标是让它在中心。它的扩展超出视口边界不是问题。

顺便说一句：IE8 可以根据需要放大任何网站（好吧，我知道左上角更重要）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T08:36:17.663

你的问题缺乏逻辑。如果你放大一个尺寸固定的元素，显然它会变大。另一方面，如果您放大具有动态大小的元素，其大小将调整到新的视口。

# android - 如何从安卓模拟器发送短信到手机

> ID：10751104
> 
> 赞同：-1
> 
> 时间：2012-05-25T08:32:54.583
> 
> 标签：android, sms, emulation

我正在尝试向手机发送 SMS，但我遇到了一个问题：我无法收到消息，但模拟器告诉我消息已发送。

这是我的代码，

```
import android.app.Activity;
import android.os.Bundle;
import android.widget.Button;
import android.widget.EditText;
import android.telephony.SmsManager;
import android.view.View.OnClickListener;
import android.widget.Toast;
import android.view.View;

public class sendsms extends Activity {
  Button buttonSend;
  EditText textPhoneNo;
  EditText textSMS;
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.sending);
    buttonSend = (Button) findViewById(R.id.BTNSENDSMS);
    textPhoneNo = (EditText) findViewById(R.id.txtEnterNoSMS);
    textSMS = (EditText) findViewById(R.id.txtMsgSMS);
    buttonSend.setOnClickListener(new OnClickListener() {
      @Override
      public void onClick(View v) {
        String phoneNo = textPhoneNo.getText().toString();
        String sms = textSMS.getText().toString();
        try {
          SmsManager smsManager = SmsManager.getDefault();
          smsManager.sendTextMessage(phoneNo, null, sms, null, null);
          Toast.makeText(getApplicationContext(), "SMS Sent!", Toast.LENGTH_LONG).show();
        } catch (Exception e) {
          Toast.makeText(getApplicationContext(),"SMS faild, please try again later!",Toast.LENGTH_LONG).show();
          e.printStackTrace();
        }
      }
    });
  }
} 
```

还有我的 AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="com.sdc"
  android:versionCode="1"
  android:versionName="1.0" >
  <uses-sdk android:minSdkVersion="12" />
  <uses-permission android:name="android.permission.SEND_SMS" />
<intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
      </intent-filter>
    </activity>
  </application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-25T08:34:26.620

**不**，您不能从模拟器向手机发送短信，简单而合乎逻辑的原因是模拟器没有**SIM 卡**。

但是，假设两个实例都在同一台计算机上运行，​​您可以将 SMS 从一个仿真器发送到另一个仿真器。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-25T08:35:44.130

您绝不可以将短信从模拟器发送到实际手机，但您可以将短信从一个模拟器发送到另一个（提供两个正在运行的模拟器实例）

例如。第一个使用模拟器代码 (5554) 运行的模拟器和其他使用 (5556) 运行的模拟器，并从模拟器 5554 向 5556 发送短信

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T08:56:33.113

如果您没有其他手机，为什么不尝试使用网络服务发送短信？我很快用谷歌搜索了一些东西，也许它已经足够好了：

[http://www.txt2day.com/](http://www.txt2day.com/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T08:48:21.907

如果你真的想试试看，你可以将你的代码构建成一个 .apk 文件，然后尝试在一些实际的 android 手机上运行该应用程序。

# android - Android：语言环境（系统语言）更改影响我的应用程序布局

> ID：10751107
> 
> 赞同：1
> 
> 时间：2012-05-25T08:33:19.363
> 
> 标签：android, locale

我在我的应用程序中，打开了一项活动。我按下主页按钮并更改语言，从任务管理器打开我的应用程序。问题：我的活动布局越来越宽。

对应于该活动的 androidmanifest 变化：

注意：如果我在 android 清单中添加语言环境，布局是正确的，但语言不会立即更新。用户必须关闭该活动，然后重新启动，然后语言才会更新。

请向我提供您的意见。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T08:53:03.803

正如对您问题的评论中所述，这是正常行为。

区域设置的更改被视为配置的更改，与方向更改等相同。

您需要覆盖[onConfigurationChanged](http://developer.android.com/reference/android/app/Activity.html#onConfigurationChanged%28android.content.res.Configuration%29)并`Activity`从那里重新加载所有内容。

注意：您还需要在文件`android:configChanges="locale"`的`Activity`声明中指定`AndroidManifest`。

# c++ - 如何在 Qt 应用程序中使用 MFC 类？

> ID：10751116
> 
> 赞同：1
> 
> 时间：2012-05-25T08:34:32.247
> 
> 标签：c++, qt, mfc

我正在 Qt 中开发一个大型应用程序。有一些类/组件不能提供我需要的性能，所以我想使用原生解决方案。

我用 MFC 安装了 Visual Studio 2010，实际上我知道开源库的位置。

如何将我的 Qt 应用程序链接到 MFC 并使用它的一些类？

# actionscript-3 - 在 Flash Actionscript3 中加载 Microsoft 文档

> ID：10751122
> 
> 赞同：0
> 
> 时间：2012-05-25T08:35:03.127
> 
> 标签：actionscript-3, flash, loader

我想将 microsoft word/excel 文档加载到 swf 中。我写了如下的动作脚本：-

* * *

```
var myloader:Loader = new Loader();

myloader.load(new URLRequest("test.doc"));

board.addChild(myloader); 
```

提前致谢，

## 普罗森吉特

但是这段代码不起作用。我可以需要一个解析器吗？

有人可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T05:02:46.327

我的 github 项目也许可以帮助你[https://github.com/childoftv/as3-xlsx-reader](https://github.com/childoftv/as3-xlsx-reader)

# jquery - 如何为每个添加一个类 运行语法高亮器之前的元素？

> ID：10751125
> 
> 赞同：2
> 
> 时间：2012-05-25T08:35:15.280
> 
> 标签：jquery

我有以下代码：

```
 $.fn.addTemplateSetup(function () {
        this.find('pre').each(function (i) {
            SyntaxHighlighter.highlight({}, this);
        });
    }); 
```

它找到每个元素，然后在其上运行 SyntaxHighlighter。

在荧光笔运行之前，我想将 a 中带有一类文本的每个`<pre>`内容`<div>`更改为`<pre class='brush: plain'>`

我应该在第一个函数中执行此操作，我应该使用另一个 this.find 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T08:36:27.447

试试这个：

```
$.fn.addTemplateSetup(function () {
    $("pre", this).addClass("brush: plain");
    this.find('pre').each(function (i) {
        SyntaxHighlighter.highlight({}, this);
    });
}); 
```

或者

```
$.fn.addTemplateSetup(function () {
    this.find('pre').each(function (i) {
        this.addClass("brush: plain");
        SyntaxHighlighter.highlight({}, this);
    });
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T08:37:17.210

```
$.fn.addTemplateSetup(function () {
    this.find('pre').each(function () {
        this.addClass("brush: plain");
        SyntaxHighlighter.highlight({}, this);
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T09:07:42.467

每当您使用 $ 选择时，您都会获得一组元素，并且您对选择执行的每个操作都将在所有元素上执行。所以`$("pre").addClass("myClass")`会将类“myClass”添加到文档中的所有前置元素。此外，该操作会返回它自己的选择，因此您可以像这样链接操作： `$("pre").addClass("myClass").css("font-weight","bolder")`这将添加类并将 CSS 属性 font-weight 设置为粗体

返回值时例外。例如，当执行类似`$("input").val()`第一个输入元素的值的操作时，将返回

因此，在您的特定情况下，您需要选择所有前置元素添加类和突出显示

```
$.fn.addTemplateSetup(function () {
        this.find('pre')
            .addClass("brush: plain")
            .each(function () {
               SyntaxHighlighter.highlight({}, this);
        });
}); 
```

但是，由于您的课程看起来更像您尝试应用一些内联样式，因此我也包含了如何做到这一点

```
$.fn.addTemplateSetup(function () {
        this.find('pre')
            .css('brush', 'plain')
            .each(function () {
               SyntaxHighlighter.highlight({}, this);
        });
}); 
```

我把 addClass/css 放在 each 之前的原因是 addClass/css 会在它应用到的选择上调用 each。如果在 each 函数中使用 addClass ，它将在选择一个元素时调用 each ，我希望这比迭代整个集合两次要慢。在这两种情况下，每个元素的访问次数都是相同的，我会在评论中反对任何一个

# python - 从 pandas 返回多个值适用于 DataFrame

> ID：10751127
> 
> 赞同：53
> 
> 时间：2012-05-25T08:35:27.927
> 
> 标签：python, pandas

根据此示例，我正在使用 Pandas`DataFrame`进行逐行 t 检验：

```
import numpy
import pandas

df = pandas.DataFrame(numpy.log2(numpy.randn(1000, 4), 
                      columns=["a", "b", "c", "d"])

df = df.dropna() 
```

现在，假设我有“a”和“b”作为一组，而“c”和“d”在另一组，我正在逐行执行 t 检验。这对于熊猫来说是相当微不足道的，使用`apply`axis = 1。但是，如果我的函数没有聚合，我可以返回一个相同形状的 DataFrame，如果它聚合，我可以返回一个 Series。

通常我只会输出 p 值（因此，聚合），但我想根据其他计算生成一个附加值（换句话说，返回两个值）。我当然可以进行两次运行，首先聚合 p 值，然后再进行其他工作，但我想知道是否有更有效的方法来执行此操作，因为数据相当大。

作为计算的一个例子，假设函数是：

```
from scipy.stats import ttest_ind

def t_test_and_mean(series, first, second):
    first_group = series[first]
    second_group = series[second]
    _, pvalue = ttest_ind(first_group, second_group)

    mean_ratio = second_group.mean() / first_group.mean()

    return (pvalue, mean_ratio) 
```

然后调用

```
df.apply(t_test_and_mean, first=["a", "b"], second=["c", "d"], axis=1) 
```

当然，在这种情况下，它返回一个带有两个元组作为值的系列。

相反，ny 的预期输出将是一个包含两列的 DataFrame，一列用于第一个结果，另一列用于第二个结果。这是可能的还是我必须为这两个计算做两次运行，然后将它们合并在一起？

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2012-05-25T23:48:46.777

返回一个系列，而不是元组，应该生成一个新的多列 DataFrame。例如，

```
return pandas.Series({'pvalue': pvalue, 'mean_ratio': mean_ratio}) 
```

# exception-handling - Groovy 脚本中的主线程异常处理程序

> ID：10751141
> 
> 赞同：1
> 
> 时间：2012-05-25T08:36:17.490
> 
> 标签：exception-handling, groovy

Groovy 有问题，如果在脚本中抛出未捕获的异常，我需要在退出之前进行一些清理，但找不到解决方法。

我试过*Thread.setDefaultUncaughtExceptionHandler*，但似乎它不适用于主线程。然后，我查看了堆栈跟踪，它把我带到了 GroovyStarter，在那里我发现了一段不错的代码，这意味着*Thread.setDefaultUncaughtExceptionHandler*并不真正应该工作：

```
public static void main(String args[]) {
   try {
       rootLoader(args);
   } catch (Throwable t) {
       t.printStackTrace();
   }
} 
```

只是为了举例，这里是我想要存档的（这不是可运行的脚本，只是为了展示这个概念）：

```
def process = new ProcessBuilder(command).redirectErrorStream(true).start();

onException = {
    process.destroy()
} 
```

请不要建议使用 try/catch，这是我自己能想到的 :)

PS：我是 Groovy 的新手，所以可能会遗漏一些明显的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T06:28:58.797

您可以[添加一个关闭钩子](http://mrhaki.blogspot.com/2010/01/groovy-goodness-add-shutdownhook.html)，它会在程序退出时始终运行（如果可能）：

```
def process = new ProcessBuilder(command).redirectErrorStream(true)

boolean success = false

def cleanup = {
    success = true
    process.destroy()
}

addShutdownHook {
    if(!success && process) {
        cleanup()
    }
}

process.start()
// alternatively, always rely on the shutdown hook
cleanup() 
```

请注意，即使程序干净退出，shutdown 挂钩也会*始终*运行，因此如果您想尽早清理连接，则需要有一些方法来跟踪您已经运行了清理。

您还可以拥有任意数量的关闭挂钩，因此如果您有多个要清理的东西，则可以在函数内部使用它。

# oracle-sqldeveloper - 防止在 Oracle SQL Developer 中编辑表数据

> ID：10751145
> 
> 赞同：3
> 
> 时间：2012-05-25T08:36:27.740
> 
> 标签：oracle-sqldeveloper

Oracle SQL Developer 中有没有办法以**只读**方式查看表数据或防止编辑？当我查看表格中的数据时，它允许我进行编辑，并且我想避免意外进行更改。我希望有一种方法可以以某种方式切换它，但我还没有找到它。我正在使用版本 2.1.1.64。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T16:49:31.010

就在这里。请您的 DBA 创建一个仅对相关 TABLES 具有读取权限的用户，然后使用该用户登录。

要记住的另一件事是，如果您确实在数据网格中编辑某些数据以便将更改写入数据库，您必须通过`COMMIT`在 SQL 工作表中发出命令或单击绿色勾号按钮或按`F11`。

按下`F12`将回滚尚未提交的更改。

# php - 如何使用 PHP 捕获完整的 HTTP 请求数据（标头和正文）？

> ID：10751148
> 
> 赞同：10
> 
> 时间：2012-05-25T08:36:42.333
> 
> 标签：php, api, header, request, capture

我在实现适用于 Java 的 API 时遇到问题，但无法使用 cURL。到目前为止，我们已经完成了所有工作，Java 发出的请求与我们发出的请求之间肯定存在一些不同之处。

在 PHP 中，我们可以通过查看`$_SERVER['HTTP_*']`变量来获取标头数据，我们可以从中获取请求正文，`file_get_contents('php://input');`但我们无法获取从用户代理发送到客户端的确切数据。

是否可以使用 PHP 获取用户代理发送的完整请求？包括标题和正文？如果是这样，那怎么办？

我发现的唯一示例是[here](http://www.daniweb.com/web-development/php/code/216846/get-http-request-headers-and-body)，但是这个示例以我提到的方式获取正文，而它通过解析获取标头`$_SERVER`，这似乎是一种黑客攻击，因为它从来都不是实际发送的100％。

感谢所有帮助和提示！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-25T08:42:30.427

对于标题，您可以尝试[apache_request_headers()](http://www.php.net/manual/en/function.apache-request-headers.php)而对于正文，我不知道其他方法`file_get_contents('php://input');`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-13T08:20:09.773

老问题，但是对于将来需要这样做的任何人......最好的（可能唯一的）方法是通过*成为*服务器来完全控制服务器。

设置一个侦听端口 80 的套接字服务器（如果这是您需要服务器执行的全部操作），或者如果 80 不可用，则设置任何其他端口。

这样您就可以完全不加修改地捕获请求。基本套接字服务器的示例很多，这是我实现的最新版本的简化版本，它将打印完整的请求：

```
<?php
//Read the port number from first parameter on the command line if set
$port = (isset($argv[1])) ? intval($argv[1]) : 80;

//Just a helper
function dlog($string) {
    echo '[' . date('Y-m-d H:i:s') . '] ' . $string . "\n";
}

//Create socket
while (($sock = @socket_create(AF_INET, SOCK_STREAM, SOL_TCP)) === false) {
    dlog("socket_create() failed: reason: " . socket_strerror(socket_last_error()));
    sleep(1);
}

//Reduce blocking if previous connections weren't ended correctly
if (!socket_set_option($sock, SOL_SOCKET, SO_REUSEADDR, 1)) {
    dlog("socket_set_option() failed: reason: " . socket_strerror(socket_last_error($sock)));
    exit;
}

//Bind to port
$tries = 0;
while (@socket_bind($sock, 0, $port) === false) {
    dlog("socket_bind() failed: reason: " . socket_strerror(socket_last_error($sock)));
    sleep(1);
    $tries++;
    if ($tries>30) {
        dlog("socket_bind() failed 30 times giving up...");
        exit;
    }
}

//Start listening
while (@socket_listen($sock, 5) === false) {
    dlog("socket_listen() failed: reason: " . socket_strerror(socket_last_error($sock)));
    sleep(1);
}

//Makes it possible to accept several simultaneous connections
socket_set_nonblock($sock);

//Keeps track of active connections
$clients = array();

dlog("server started...");

while(true) {
    //Accept new connections
    while (($msgsock = @socket_accept($sock)) !== false) {
        //Prevent blocking
        socket_set_nonblock($msgsock);

        //Get IP - just for logging
        socket_getpeername($msgsock, $remote_address);

        //Add new client to array
        $clients[] = array('sock' => $msgsock, 'timeout' => time()+30, 'ip' => $remote_address);

        dlog("$remote_address connected, client count: ".count($clients));
    }
    //Loop existing clients and read input
    foreach($clients as $key => $client) {
        $rec = '';
        $buf = '';
        while (true) {
            //Read 2 kb into buffer
            $buf = socket_read($clients[$key]['sock'], 2048, PHP_BINARY_READ);

            //Break if error reading
            if ($buf === false) break;

            //Append buffer to input
            $rec .= $buf;

            //If no more data is available socket read returns an empty string - break
            if ($buf === '') break;
        }
        if ($rec=='') {
            //If nothing was received from this client for 30 seconds then end the connection
            if ($clients[$key]['timeout']<time()) {
                dlog('No data from ' . $clients[$key]['ip'] . ' for 30 seconds. Ending connection');

                //Close socket
                socket_close($client['sock']);

                //Clean up clients array
                unset($clients[$key]);
            }
        } else {
            //If something was received increase the timeout
            $clients[$key]['timeout']=time()+30;

            //And.... DO SOMETHING
            dlog('Raw data received from ' . $clients[$key]['ip'] . "\n------\n" . $rec . "\n------");
        }
    }

    //Allow the server to do other stuff by sleeping for 50 ms on each iteration
    usleep(50000);
}

//We'll never reach here, but some logic should be implemented to correctly end the server
foreach($clients as $key => $client) {
    socket_close($client['sock']);
}
@socket_close($sock);
exit; 
```

要在端口 8080 上启动服务器，只需`php filename.php 8080`从 shell 运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-09T16:38:51.343

这些不是“使用 php”，但您可能会发现它们对您的目的很有用

*   ssldump [http://ssldump.sourceforge.net/](http://ssldump.sourceforge.net/)
*   mod_dumpio [http://httpd.apache.org/docs/2.2/mod/mod_dumpio.html](http://httpd.apache.org/docs/2.2/mod/mod_dumpio.html)
*   mod_dumpost [https://github.com/danghvu/mod_dumpost](https://github.com/danghvu/mod_dumpost)

# excel - 创建一个结合百分比和小数的度量？

> ID：10751157
> 
> 赞同：0
> 
> 时间：2012-05-25T08:37:20.540
> 
> 标签：excel, math, tableau-api

我正在使用 Tableau 中的一个项目（它使用与 Excel 非常相似的功能，如果有帮助的话），我需要从两个不同的测量值得出一个测量值，其中一个是低十进制数（高端为 2.95，0.00667低），另一个是百分比（范围从 29.8% 到 100%）。

换句话说，我有两张表格详细说明了公交车的准时性——一张是针对高频路线的，以超额等待时间（EWT，以分钟为单位）来衡量，另一个针对低频路线，以准时百分比来衡量。我有一张所有路线的地图，并希望根据该路线的准时程度对线条进行着色（EWT 低或准时百分比高的路线用细线；EWT 高或准时百分比低的路线用粗线）。在为此做准备时，我已经合并了两个表并将不存在的值归零。

我以为我会做类似 log(EWT + PercentOnTime) 的事情，但我意识到这可能不会给出我想要的值（特别是因为我最终需要一个或另一个的倒数，因为低 EWT 是有利的和高百分比准时优惠）。

知道我会怎么做吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T08:44:14.073

如果您以均匀的方式组合/比较指标并且数据是相对线性的，那么您需要做的就是规范化它们。

如果您有 EWT 预期范围（例如 0.00667 到 2.95）。那么 2 将是

(2 - 0.00667)/(2.95 - 0.00667) = 0.67723 但因为 EWT 在语义上与准时性相反，我们需要使用 1-0.67723 = 0.32277。

如果您对守时百分比范围执行相同操作：

例如。80%

(80 - 29.8)/(100-29.8) = 0.7169

您可以比较这些指标，因为如果您假设基础指标 (1-EWT) 和准时百分比 (OTP) 是类似的，它们是标准化的（在 0-1 之间：乘以 100 以获得百分比）。

因此，您可以将这些组合到一个表中。您将需要忽略所有零值，因为这实际上表明您在这些点上没有数据。

你必须使用 if 语句来表达类似的内容：

```
if OTP > 0 then ([OTP-29.8])/(100-29.8) else (1-(([EWT]-0.00667)/(2.95-0.00667))) 
```

希望这可以帮助。

# javascript - 获取asp中继器中asp下拉列表的选定值

> ID：10751158
> 
> 赞同：0
> 
> 时间：2012-05-25T08:37:21.500
> 
> 标签：javascript, jquery, asp.net

我有一个中继器，它有多个下拉列表和多个按钮。每个按钮都与中继器行中的下拉列表相关联。有没有办法在单击按钮时提醒下拉列表值。我希望单击按钮以提醒同一中继器行中 ddl 的值。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T08:45:14.850

必须有一些东西将按钮与相应的下拉列表相关联。你提到了一些关于*row*的事情。但是在 ASP.NET 中继器中，没有什么可以强迫您分隔行。

但是让我们假设你已经用 a 分隔了你的行`<div>`：

```
<asp:Repeater ID="rep" runat="server">
    <ItemTemplate>
        <div>
            <asp:LinkButton runat="server" Text="Click me" CssClass="btn" />
            <asp:DropDownList runat="server" DataSource="foo" DataValueField="Value" DataTextField="Text" />
        </div>
    </ItemTemplate>
</asp:Repeater> 
```

现在您可以订阅`click`按钮的事件并找到相应的下拉列表：

```
$(function() {
    $('.btn').click(function() {
        var ddl = $(this).closest('div').find('select');
        var selectedValue = ddl.val();
        alert(selectedValue);
        return false;
    });
}); 
```

# php - 如何将输入的密码从字母更改为****

> ID：10751159
> 
> 赞同：-4
> 
> 时间：2012-05-25T08:37:24.463
> 
> 标签：php, html, forms, passwords

我正在使用一个非常简单的 php 表单来密码保护一个页面。我希望在他们输入时字符“*”出现在框中

```
 <form name="form1" method="post" action="checkpw.php">
    <table><tr><td colspan="2">
    <p class="form"> Password: <span id="formfield"><input name="pw" type="text" id="pw"></span></p></td>
    <tr><td valign="top"></td><td align="right"><span class="submitbt"><input type="image" class="rollover" src="images/buttons/BTN_Submit.png" id="contact_submit" alt="Submit" width="72px" height="68px" border="0" hover="images/buttons/BTN_Submit_over.png" name="submitbt" value="Login"></span></td> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-25T08:38:31.237

代替：

```
<input name="pw" type="text" id="pw"> 
```

采用：

```
<input name="pw" type="password" id="pw"> 
```

[请参阅HTML 4.01 规范](http://www.w3.org/TR/html4/interact/forms.html#h-17.4.1)`input`中的元素类型：

> 密码：类似于“文本”，但输入文本以隐藏字符的方式呈现（例如，一系列星号）。此控件类型通常用于密码等敏感输入。请注意，当前值是用户输入的文本，而不是用户代理呈现的文本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T08:38:28.847

采用`<input type="password" />`

# java - 循环中每个项目的 JSF 唯一输入 bean

> ID：10751163
> 
> 赞同：1
> 
> 时间：2012-05-25T08:38:08.020
> 
> 标签：java, jsf, jsf-2

我想遍历元素列表，并为每个元素显示一个表单。在那种形式中，我希望能够为循环的每个元素填充一个不同的 bean。这是我到目前为止得到的，但当然它不起作用；）

```
 <ui:repeat value="#{productBean.productPositions}" var="position">
        <div>position info here</div>
        <div>list price ranges</div>
        <div>
            <h5>Create new price range for product position position</h5>
            <h:form>
                Min:
                <h:inputText
                    value="#{priceRangeBean.priceRanges[productPositionRangeSearch.productPositions.indexOf(position)].min}" />
                Max:
                <h:inputText
                    value="#{priceRangeBean.priceRanges[productPositionRangeSearch.productPositions.indexOf(position)].max}" />
                price:
                <h:inputText
                    value="#{priceRangeBean.priceRanges[productPositionRangeSearch.productPositions.indexOf(position)].price}" />
                <h:commandButton value="create"
                    action="#{priceRangeController.createRange(productPositionRangeSearch.productPositions.indexOf(position))}" />
            </h:form>

        </div>
    </ui:repeat> 
```

我的 PriceRangeBean：

```
@SessionScope
public class PriceRangeBean {

    private List<PriceRange> priceRanges = new ArrayList<PriceRange>();

    public List<PriceRange> getPriceRanges() {
        return priceRanges;
    }

    public void setPriceRanges(List<PriceRange> priceRanges) {
        this.priceRanges = priceRanges;
    }

} 
```

作为一个 POJO包含`PriceRange`min, max, price as`String`

调用页面的控制器`PriceRangeBean`用尽可能多`PriceRange`的 s填充`ProductPosition`s，以便列表中有一个“新”`PriceRange`对象可以创建。然而，输入似乎没有到达支持 bean。

任何想法我做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T10:19:48.393

我认为你不能`value`在`<h:inputText`.

表达方式：

```
 value="#{priceRangeBean.priceRanges[productPositionRangeSearch.productPositions.indexOf(position)].min}" 
```

（至少）被评估了两次。一旦需要在“应用请求值”中设置该值。第二次是在“渲染响应阶段”。

当值被设置时（在应用请求值阶段），表达式被 EL 评估为 an`lvalue`并且似乎具有有限的功能。

来自规范[（JavaServer Pages 2.1 Expression Language Specification）](http://download.oracle.com/otndocs/jcp/jsp-2.1-fr-eval-spec-oth-JSpec/)：

> 左值只能由单个变量（例如 ${name}）或属性解析组成。

您可能想查看同一规范中的第 1.2.1.1 节。

# google-chrome-extension - 有什么方法可以访问 Chrome 的主题图标吗？

> ID：10751170
> 
> 赞同：3
> 
> 时间：2012-05-25T08:38:41.407
> 
> 标签：google-chrome-extension

我想使用 Chrome 的默认网站图标。
例如（您可以简单地在 Chrome 中打开它们）：

*   chrome://theme/IDR_HISTORY_FAVICON
*   chrome://theme/IDR_EXTENSIONS_FAVICON
*   chrome://theme/IDR_SETTINGS_FAVICON
*   chrome://theme/IDR_PRODUCT_LOGO_16

当我将它用作图像源时，什么也没发生。也许 Chrome 阻止了对图标的访问，或者这不是使用图标的正确方法。我尝试使用“chrome://favicon/”，但它不适用于扩展和设置（奇怪，但它适用于历史记录）。

如何使用内置的图标作为图像？如果您能给我一份完整的 Chrome 网站图标列表，我也将不胜感激，它必须在 Chromium 的源代码中，但我不知道去哪里找。

（我使用的是 Chrome 19.0.1084.52）

# facebook-graph-api - “喜欢”后的方格需要刷新，但仅在某些计算机上

> ID：10751171
> 
> 赞同：1
> 
> 时间：2012-05-25T08:38:41.860
> 
> 标签：facebook-graph-api, facebook-page

我们的 fangate 在我们办公室的 safari、chrome 或 firefox 上运行良好，但当然，不是在客户的计算机上，既不是 chrome 也不是 firefox 或 safari。

所以我们通过teamviewer查看了他的环境中发生了什么，我们在firebug中看到facebook会在点击“like”后触发一个帖子，结果是“404”

```
http://www.facebook.com/ajax/pages/fetch_app_column.php?__a=1&__user=XXX&fb_dtsg=AQBzGDeE&phstamp=165816612271681016991&profile_id=XXX&tab_key=app_XXX 
```

有没有人遇到过这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T08:52:26.533

根据我的经验，像这样的错误经常出现在 Facebook 上，更糟糕的是，它们在部分或全部服务器上一次存在数天，这意味着一些用户会遇到错误，而另一些用户则可以正常工作。

最近，在他们修复它之前，我们已经看到这个问题好几天了。如果您在他们的系统上找不到列出的错误，我会尽快注册。[http://bugs.developers.facebook.net/](http://bugs.developers.facebook.net/)

# php - 如果查询不存在，则重定向到另一个页面

> ID：10751178
> 
> 赞同：0
> 
> 时间：2012-05-25T08:39:25.107
> 
> 标签：php, redirect, web

`notenrolled.php`即使输入值正确，此代码也只会重定向到。如果输入的值正确，我希望它继续该过程。我的代码有问题吗？

```
<?php
//Setup connection to the database 
$connect = mysql_pconnect("localhost", "root", "") 
or die(mysql_error()); 

//Connect to the database 
mysql_select_db("dbgis", $connect) or die(mysql_error());

$query  = "SELECT * from tbl_student WHERE stud_id= '$stud_id' ";
$result = mysql_query($query);
$totalrows = mysql_num_rows($result);

while($row = mysql_fetch_array($result))
{
    header("Location: yesno.php");
}

if($totalrows != 0)
{
    header("Location: notenrolled.php");
}

?> 
```

* * *

我尝试了`die();`它，它似乎正在工作，因为它只是说重定向循环错误`yesno.php`。所以我想我可能把代码放在了错误的`.php`页面上。

流程是这样的：我有一个`guard.php`页面，我可以在页面中`query(stud_id)`使用我的搜索表单进行搜索。然后我想检查查询是否存在，如果不存在，我希望它重定向到`notenrolled.php`else 如果找到查询，我希望它继续到`yesno.php`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T08:41:00.780

`exit`当您设置 Location 标头时，您总是立即使用or跟随它`die()`。

（只有真正了解自己在做什么，才可能不会立即使用它，但风险自负。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T09:01:59.007

1.  您不应该`while`仅用于评估是否有记录。

    ```
    while($row = mysql_fetch_array($result))
    {
      header("Location: yesno.php");
    } 
    ```

2.  由于代码，您的代码总是重定向到`notenrolled.php`：

    ```
    if($totalrows != 0)
    {
        header("Location: notenrolled.php");
    }
    //this block will always be true if your $totalrows is greater than 0 
    ```

解决方法：检查`$totalrows`是否大于0

```
if ($totalrows > 0){
   header("Location: yesno.php");
} else {
   header("Location: notenrolled.php");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T08:44:40.543

正确的做法是这样的：

```
if($totalrows>0)
  header("Location: yesno.php");

else
 header("Location: notenrolled.php"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T08:45:04.510

尝试这个

```
if($totalrows == 0)
{
    header("Location: notenrolled.php");
    die();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-25T08:47:28.313

```
if ($totalrows > 0)
{   // has results
    header("Location: yesno.php");
    exit(0);
}
else
{   // no result
    header("Location: notenrolled.php");
    exit(0);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-25T09:58:28.880

您可以使用 php 函数[mysql_affected_rows查看](http://ua2.php.net/manual/en/function.mysql-affected-rows.php)**SELECT**中受影响的行数，

```
if (mysql_affected_rows() == 0){
  header("Location: notenrolled.php");
} else {
    header("Location: yesno.php");
} 
```

# c# - .NET 数据库轮询和广播

> ID：10751184
> 
> 赞同：1
> 
> 时间：2012-05-25T08:40:01.157
> 
> 标签：c#, asynchronous, notifications, broadcast, polling

我正在开发一个应用程序，需要向登录的用户发送一些实时更新。我目前正在开发一个只提供电子邮件通知的 XRM 系统，所以为了让事情更快地启动和运行，我将求助于轮询数据库。

我想在 global.asax 的 Application_Start() 方法中启动一个新进程，它将轮询数据库并在客户端之间广播。问题是我有点菜鸟，不知道我需要什么开始。

我已阅读[http://haacked.com/archive/2011/10/16/the-dangers-of-implementing-recurring-background-tasks-in-asp-net.aspx](http://haacked.com/archive/2011/10/16/the-dangers-of-implementing-recurring-background-tasks-in-asp-net.aspx)并知道潜在的缺陷，如我说先让它运行无所谓。

谁能告诉我需要在我的解决方案中添加什么样的项目？我还认为如果它运行异步允许我同时轮询不同实体以进行更新，它可能会更好一些。

轮询将由服务器管理，客户端不请求轮询，因此不会对数据库进行长轮询，更新会推送给订阅组的用户。这将帮助我将投票保持在最低限度，并在没有人登录时关闭投票。

# scope - smarty : 分配 var 和 scope root

> ID：10751185
> 
> 赞同：1
> 
> 时间：2012-05-25T08:40:01.707
> 
> 标签：scope, smarty, assign

我在 smarty 中有一个这样的模板：

*   模板文件夹
    *   主页.tpl
    *   文章.tpl
    *   类别.tpl
    *   变种tpl

在每个模板文件（var.tpl 除外）中，我都包含文件 var.tpl。home.tpl 有 1 列结构 article.tpl 有 2 列结构

我的模板文件是这样的（家庭示例）：

```
{include file="$tpl_dir./var.tpl"}
<div class="span{$center_column}" id="center_column">
</div> 
```

为了快速改变我网站的外观，我在 var.tpl 中写了以下几行：

```
{assign var=center_column_g value=['home'=>'12','article'=>'10'] scope="root"}
{assign var=center_column_default value='10' scope="root"}

{if $center_column_g[$page_name]}
{assign var=center_column value=$center_column_g[$page_name] scope="root"}
{else}
{assign var=center_column value=$center_column_default scope="root"}
{/if} 
```

ps : $page_name 是一个全局变量，带有每个模板页面的名称。

因此，使用 var.tpl，如果我可以轻松更改 div 的类#center_column

我对这段代码有疑问：

```
{if $center_column_g[$page_name]}
    {assign var=center_column value=$center_column_g[$page_name] scope="root"}
    {else}
    {assign var=center_column value=$center_column_default scope="root"}
    {/if} 
```

在根范围内分配 var center_column 是否正确？

# jquery - 使用 jQuery 获取 ASP.NET 会话 ID

> ID：10751188
> 
> 赞同：3
> 
> 时间：2012-05-25T08:40:18.897
> 
> 标签：jquery, asp.net

我想知道是否可以使用 jQuery 获取会话的会话 ID？如果是这样，我该怎么做，似乎无法在 jquery.com 上找到它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T08:42:26.613

会话 ID 存储在 cookie 或查询字符串中（取决于浏览器功能或 asp.net 配置）。找到您的会话 ID 并从那里读取

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T08:41:52.327

您不能单独在 jQuery 中执行此操作，因为它只是客户端，并且无法与服务器对话以获取 sessionID。

解决方法是创建一个 web 服务，它以 XML/JSON 格式返回会话 id，您可以从 jQuery 中的 AJAX 请求中调用它。

像这样的东西：

```
$.ajax({
    url: "/mywebservice.asmx",
    dataType: "json",
    success: function(data) {
        var sessionId = data.sessionId; // This would be determined by your server-side implementation
        // do something with the sessionId...
    }
}); 
```

# c++ - 拔下以太网电缆和从操作系统禁用以太网网络之间的区别

> ID：10751189
> 
> 赞同：2
> 
> 时间：2012-05-25T08:40:24.353
> 
> 标签：c++, qt, sockets, ethernet, disconnection

我正在尝试使我的程序对网络断开具有鲁棒性。现在，如果我从操作系统禁用以太网网络（我在 Ubuntu 11.10 上，但我想这不重要），一旦网络再次启用，我的套接字就会恢复并且一切正常。

从现在开始，我认为这个测试与拔掉以太网电缆是一样的。但事实并非如此，因为我的程序在执行此操作时突然终止。

我想知道这两种情况有什么区别，以及如何检测它们。我正在使用来自 Qt 和 C++ 的 QTcpSockets。

另外，当不再检测到wifi时，我想这相当于拔掉以太网电缆，而在操作系统上禁用它相当于禁用以太网。我对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-06T15:08:45.330

启用驱动程序时，意味着在 OS kennel 上运行了一个程序，用于管理不同的场景。例如，在电缆断开连接时，会出现链路掉线。并进入低功耗模式。禁用驱动程序时，您的设备上有一个可以管理设备的固件，或者设备将关闭。

# php - 关于限制 Rss 提要

> ID：10751195
> 
> 赞同：-1
> 
> 时间：2012-05-25T08:40:41.517
> 
> 标签：php

我只想在我的网站上显示最新的 5 个提要。
我正在使用以下代码来获取 rss 提要...任何人都可以帮助显示有限的提要...谢谢您提前:)

正在使用的代码

```
<?php
 require_once('rss_fetch.inc');

 $url = 'http://news.google.com/news?ned=us&topic=h&output=rss';

 $rss = fetch_rss($url);

 echo "Site: ", $rss->channel['title'], "<br>\n";
 foreach ($rss->items as $item ) {
   $title = $item['title'];
   $url   = $item['link'];
   $desc = $item['description'];
   $category = $item['category'];
   echo "<a href=$url>$title</a>$desc <br/>CATEGORY : $category <br/><br/> ";
 }
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T08:47:57.603

限制它使用`foreach`?

```
 foreach ($rss->items as $i => $item ) { // use $i as counter
   $title = $item['title'];
   $url   = $item['link'];
   $desc = $item['description'];
   $category = $item['category'];
   echo "<a href=$url>$title</a>$desc <br/>CATEGORY : $category <br/><br/> ";
   if($i == 4) break; // add this, == 4 is because $i starts from 0
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T08:47:56.247

如果您希望限制帖子的数量，您只需要跟踪它们并在适用时打破 foreach 循环，例如

```
<?php
 require_once('rss_fetch.inc');

 $url = 'http://news.google.com/news?ned=us&topic=h&output=rss';

 $rss = fetch_rss($url);

 echo "Site: ", $rss->channel['title'], "<br>\n";
 $numposts = 0;
 $maxposts = 5;
 foreach ($rss->items as $item ) {
   $numposts++;
   if ($numposts<=$maxposts) {
     $title = $item['title'];
     $url   = $item['link'];
     $desc = $item['description'];
     $category = $item['category'];
     echo "<a href=$url>$title</a>$desc <br/>CATEGORY : $category <br/><br/> ";
   } else {
     break;
   }
 }
?> 
```

# search - TYPO3 后端：搜索自定义记录

> ID：10751197
> 
> 赞同：4
> 
> 时间：2012-05-25T08:41:12.267
> 
> 标签：search, typo3

我开发了一个允许创建新记录的扩展。

在列表模块中，在记录列表下，有搜索表单。

例如，它适用于 fe 用户，但不适用于我的自定义记录。

是否必须在我的 tca 中添加任何特殊配置才能使此表单与我的自定义记录一起使用？

**编辑**：这似乎是在更新到 TYPO3 4.6 之后发生的。在以前的版本 4.3.3 中，它可以工作。

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-25T09:05:40.853

编辑`ext_tables.php`目录中的`typo3conf/ext/yourext`文件，找到您的表格，并将其添加到其`ctrl`部分`searchFields`属性中，以逗号分隔的字段列表进行搜索：

```
$TCA['tx_yourext_table'] = array(
    'ctrl' => array(
        'title' => 'Title of your table',
        'label' => 'title',
        'tstamp' => 'tstamp',
        'crdate' => 'crdate',
         // etc...
        'searchFields' => 'title, other_field, yet_other_field',
    ),
); 
```

之后不要忘记清除所有缓存，在`4.6.3`

有[官方信息](http://wiki.typo3.org/TYPO3_4.6#Live_Search)何时以及为何更改

# macos - 如何获取 Finder 侧边栏收藏夹内容可可？

> ID：10751199
> 
> 赞同：3
> 
> 时间：2012-05-25T08:41:31.310
> 
> 标签：macos, cocoa, finder

我需要获取 Finder 侧边栏的收藏夹部分中显示的对象路径（对于当前用户）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T08:54:01.977

本身没有 Cocoa API。您将使用 LSSharedFileList API。API 是公开的，但唯一的文档是头文件 /System/Library/Frameworks/CoreServices.framework/Frameworks/LaunchServices.framework/Headers/LSSharedFileList.h。您想要`kLSSharedFileListFavoriteItems`（并且可能`kLSSharedFileListFavoriteVolumes`）列表类型。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-30T21:08:01.490

获取共享文件列表只是第一部分，您仍然可能希望获取带有路径的实际字符串对象。这是一个小代码片段，可让您在查找器侧边栏的收藏夹部分中获取每个对象的路径。

```
UInt32 seed;
LSSharedFileListRef sflRef = LSSharedFileListCreate(NULL,
                                                    kLSSharedFileListFavoriteItems,
                                                    NULL);
CFArrayRef items = LSSharedFileListCopySnapshot( sflRef, &seed );
for( size_t i = 0; i < CFArrayGetCount(items); i++ )
{
    LSSharedFileListItemRef item = (LSSharedFileListItemRef)CFArrayGetValueAtIndex(items, i);
    if( !item )
        continue;
    CFURLRef outURL = NULL;
    LSSharedFileListItemResolve( item, kLSSharedFileListNoUserInteraction, (CFURLRef*) &outURL, NULL );
    if( !outURL )
        continue;
    //The actual path string of the item
    CFStringRef itemPath = CFURLCopyFileSystemPath(outURL,kCFURLPOSIXPathStyle);
    // TODO: Do whatever you want to do with your path here!!!!
    CFRelease(outURL);
    CFRelease(itemPath);
}
CFRelease(items);
CFRelease(sflRef); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-25T18:25:42.700

使用`LSSharedFileList`API(LaunchServices/LSSharedFileList.h.)

```
 LSSharedFileListRef favoriteItems = LSSharedFileListCreate(NULL,
                                                            kLSSharedFileListFavoriteItems, NULL); 
```

# c# - 使用 stackpanel 时 WPF TreeviewItem 标题文本设置为对象类型

> ID：10751202
> 
> 赞同：0
> 
> 时间：2012-05-25T08:41:38.080
> 
> 标签：c#, wpf, treeview, stackpanel

我正在尝试使用同时具有图像和文本的项目创建树视图。

我已经按照这个例子[http://www.codeproject.com/Articles/124644/Basic-Understanding-of-Tree-View-in-WPF](http://www.codeproject.com/Articles/124644/Basic-Understanding-of-Tree-View-in-WPF)但我在 treeviewitem 标题上得到了一个奇怪的行为。

标题应该包含图像和标签，但它显示为所有树视图项的标题文本：`System.Windows.Controls.StackPanel`

这是我的代码：

```
tree_view.Items.Add(GetTreeView("text"));

private TreeViewItem GetTreeView(string text)
{
    TreeViewItem newTreeViewItem = new TreeViewItem();

    // create stack panel
    StackPanel stack = new StackPanel();
    stack.Orientation = Orientation.Horizontal;

    // create Image
    Image image = new Image();
    image.Source = new BitmapImage(new Uri(@"/ComponentName;component/Resources/Images/warning.png", UriKind.Relative));

    // Label
    Label lbl = new Label();
    lbl.Content = text;

    // Add into stack
    stack.Children.Add(image);
    stack.Children.Add(lbl);

    // assign stack to header
    newTreeViewItem.Header = stack;

    return newTreeViewItem;
} 
```

编辑：

另外，我在 TreeView 的 HeaderTemplate 中有这个来包装文本：

```
<Setter Property="HeaderTemplate">
     <Setter.Value>
         <DataTemplate>
             <TextBlock Width="139" TextWrapping="Wrap" Text="{Binding}" />
         </DataTemplate>
     </Setter.Value>
</Setter> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T10:00:12.443

您可以用 ContentPresenter替换`TextBlock`您的 或删除以获得正确的结果。`HeaderTemplate``HeaderTemplate`

由于您的`HeaderTemplate`设置，TVI 的标题将显示为文本块，其数据上下文更改为堆栈面板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T09:50:55.817

我设法通过删除`HeaderTemplate`xaml 中的 来解决这个问题。

然后，在我的代码隐藏文件中，我将 更改`Label`为`Textblock`，然后在 -object 上设置`TextWrapping`和`Width`-properties，`Textblock`如下所示：

```
tree_view.Items.Add(GetTreeView("text"));

private TreeViewItem GetTreeView(string text)
{
    TreeViewItem newTreeViewItem = new TreeViewItem();

    // create stack panel
    StackPanel stack = new StackPanel();
    stack.Orientation = Orientation.Horizontal;

    // create Image
    Image image = new Image();
    image.Source = new BitmapImage(new Uri(@"/ComponentName;component/Resources/Images/warning.png", UriKind.Relative));

    // Label
    Textblock lbl = new Textblock();
    lbl.Text = text;
    lbl.TextWrapping = TextWrapping.Wrap;
    lbl.Width = 139;

    // Add into stack
    stack.Children.Add(image);
    stack.Children.Add(lbl);

    // assign stack to header
    newTreeViewItem.Header = stack;

    return newTreeViewItem;
} 
```

# c# - 验证由 IHO S-63 方案签名的 DSA 签名

> ID：10751208
> 
> 赞同：1
> 
> 时间：2012-05-25T08:42:10.703
> 
> 标签：c#, certificate, sha1, dsa

我正在尝试验证[ENC](http://en.wikipedia.org/wiki/Electronic_navigational_chart)（电子导航图）的签名。这些文件使用带有 SHA1 的 DSA 的证书进行签名。

单个 ENC 的签名文件如下所示

//签名部分R：

0DA3 AFDB CE55 B926 00D6 D97A ADE2 CAAF 8AD1 51C3。

//签名部分S：

1A25 7FDD B1E9 FE28 AE12 15CE 4DF8 7616 3E32 4312。

//签名部分R：

53AA DA​​93 CEA4 162D 01A1 BDB3 2A66 D9A7 9D4A 02F8。

//签名部分S：

7DF3 9C2C EB93 73C6 CC2C 65A1 AE7C C7D6 5BCB BFBA。

//大p

FCA6 82CE 8E12 CABA 26EF CCF7 110E 526D B078 B05E DECB CD1E B4A2 08F3 AE16 17AE 01F3 5B91 A47E 6DF6 3413 C5E1 2ED0 899B CD13 2ACD 50D9 9151 BDC14 3EE7 3759。

// 大 q

962E DDCC 369C BA8E BB26 0EE6 B6A1 26D9 346E 38C5。

//大g

6784 71B2 7A9C F44E E91A 49C5 147D B1A9 AAF2 44F0 5A43 4D64 8693 1D2D 1427 1B9E 3503 0B71 FD73 DA17 9069 B32E 2935 630E 1C20 6235 4D0D A20A 6C41 6E50 BE79 4CA4.

// 大

AA25 DF9E C3CA 96B7 9D01 3ED8 D572 D47C B3F3 80D0 731D EA47 B106 26BA C387 C1FA 3C33 EC55 6845 3744 76BE 5825 6E07 A74D 607F 7A5E 7B210 3455 71CBF.A74D 607F 7A5E 7B210 3455 74CBF8

以下文本摘自 IHO S-63 规范。[完整的 PDF 链接在这里。](http://www.iho.int/iho_pubs/standard/S-63/S-63_e1.1.1_EN_Apr12.pdf)

5.4.2.7 ENC 签名文件格式

签名文件必须包含签名和证书对。仅带有签名的文件是无效的，因为它不能证明数据服务器的身份。ENC 数字签名文件的格式、结构和顺序如下例所示：

第二个 R 和 S 对用于验证数据服务器数字证书（p、q、g 和 y 字符串）。如果验证成功，可以提取数据服务器公钥（y 字符串）并用于验证加密 ENC 的数字签名（第一个 R 和 S 对）。这允许数据客户端验证 SA 数字证书，提取数据服务器公钥，并验证 ENC 数据的数字签名。

我从现有实现转换的代码执行以下操作：

使用 p、q、g 和 y 的字节数组值初始化一个新的 DSACryptoServiceProvider（空格和尾随 . 已删除）

将签名文件（包括标题）的 BIG P、Q、G 和 Y 部分作为字节数组读取，然后对数组进行 SHA1.Hash。

取以下字符串的字节数组

```
var asn = string.Format("{0}{1}{2}{3}", "302E021500", rPart, "021500", sPart); 
```

并打电话

```
dsa.VerifySignature(hashedPQGY,asn); 
```

可以说我还没有设法验证 p、q、g 和 y。有人可以向我指出一个很好的文档、示例来源，或者只是解释我所缺少的。

谢谢，本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:57:02.627

您的总长度指示器是 2E，即 46。

这个对吗？通常我认为这将是 2C 或 2D。

我家里有一些 C# 代码可以满足你的需求。

否则[检查一下](http://navidigital.com/node/2)；它展示了如何生成签名而不是验证它，但它可能会有所帮助。

# php - 如何处理当前语言？始终在 URL 或会话中？

> ID：10751211
> 
> 赞同：1
> 
> 时间：2012-05-25T08:42:24.827
> 
> 标签：php, language-agnostic

我打算在我的网站上添加语言功能。我可以看到两种方式：

*   在 url 中存储语言，所以总是 www.mysite.com/en/introduce、www.mysite.com/en/home，或者如果缺少第一个参数，只需使用默认值。它对书签很有用，但很难对所有可用链接实施
*   存储在会话中。容易得多，但用户可能会因为看不到 URL 中的语言而感到困惑。

我会说：会话。你打算说什么？有什么经验吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-25T08:45:38.660

如果您希望您的所有页面都被搜索引擎索引，您需要将语言参数放在 URL 中。

如果您正在制作更多类似 Facebook 的内容，其中用户需要登录才能以他的个性化语言接收内容，请使用会话。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T08:56:02.617

您希望将您的语言作为 url 的一部分，否则 google 将无法为不同的国家/地区编制索引。此外，他们可能会认为您在同一页面上有两种类型的内容。

如果只有部分内容发生变化，我会将其存储在会话中，因为如果您只是根据用户来自哪个国家/地区更改公司的联系方式，则更容易实施。但作为一般规则，使用 .htaccess 或您的路由系统给它一个单独的 url。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-25T08:46:45.960

我会使用第一种方法与 url 重写引擎一起使用。

Fe 使用 RewriteEngine for Apache 时，您可以将此行添加到您的 .htaccess 中：

```
RewriteRule ^([a-zA-Z][a-zA-Z])/([a-zA-Z]*)$ content.php?culture=$1&content=$2 
```

甚至这可以工作：

```
RewriteRule ^([a-zA-Z][a-zA-Z])/([a-zA-Z]*)$ $2.php?culture=$1 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-25T09:09:16.750

普通用户不会查看 URL 并从那里更改参数。普通用户是点击。将语言选择保持在页面上可见的某个地方以及用户设置中。这不是用户在访问期间想要多次更改的内容。我们正在谈论您可以在第一次访问时询问和设置的设置。目前我讨厌谷歌使用我的 IP 进行操作的方式，假设（错误）如果我从挪威进入，我肯定会说挪威语，并且我可以在挪威语菜单中找到英文版本。我确实喜欢 Etsy.com 的做法，他们在第一次访问时会询问您首选的语言、货币等。如果您接受它们很好，但您可以在此处更改它们而无需导航到菜单。在我看来，使用 cookie 或会话而不是污染 URL。

# php - 在php和joomla中将数组变量从一个页面传递到另一个页面

> ID：10751220
> 
> 赞同：1
> 
> 时间：2012-05-25T08:43:08.397
> 
> 标签：php, arrays, session, joomla

我在 foreach() 循环中使用了一个数组，我可以使用发件人页面中的链接将其从一个页面传递到另一个页面：

```
$annoncenumber = $book[7];
<a href="index.php?annoncenumber=' . $annoncenumber . '&option=com_aicontactsafe&view=message&layout=message&pf=4&redirect_on_success="> 
```

并在接收者页面中： $annoncenumber = $_GET['annoncenumber'];

这工作正常，但由于链接中的 $annoncenumber ，我无法使用 joomla 菜单链接系统将模块添加到接收器页面（菜单、页脚）。我尝试改用 $_SESSION ：

```
$annoncenumber = $book[7];
$_SESSION['lginumero'] = $annoncenumber; 
```

但是使用这种方法并使用 SEO 优化链接：

用户单击链接时会话结果不正确。它只检索数组的最后一个值。所以我的问题是如何让 joomla 模块显示一个使用变量的链接，或者当用户单击链接时如何使用 $_SESSION 将数组变量正确传递给我的接收器页面。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T07:32:04.820

您应该使用 joomla 类 JSession 而不是原生 PHP $_SESSION，因为 Joomla 有时会清除 $_SESSION 变量。

[http://docs.joomla.org/JSession/11.1](http://docs.joomla.org/JSession/11.1)

您永远不应该使用未经处理的 $_GET 来检索变量，因为这是一个很大的安全风险。使用 Joomla JRequest::getInt('announcenumber'); 而是正确清理变量。

[http://docs.joomla.org/JRequest/11.1](http://docs.joomla.org/JRequest/11.1)

如果您用来捕获请求的 PHP 文件是 Joomla 外部的外部文件，那么您不能使用核心 Joomla 类。在这种情况下，我建议您重写扩展以符合 MVC 标准。

# java - 如何在 Java 中将浮点值写入文本文件

> ID：10751222
> 
> 赞同：-3
> 
> 时间：2012-05-25T08:43:16.277
> 
> 标签：java, netbeans, file-io, floating-point, netbeans-7

我正在从 GRD 文件中读取文件：

```
File stockInputFile = new File("C://MAX.GRD"); 
```

我想将它们写入文本文件：

```
File StockOutputFile = new File("C://StockOut.txt"); 
```

我收到了一些韩文信件。你能帮我编码吗？
实际上我想将它们作为浮点数存储到文本文件中。我可以用 C 做同样的事情。

```
fin = fopen("D:\\DailyT\\MeanT\\MEAN.GRD","rb");   // Input file
fout = fopen("D:\\DailyT\\MEAN.TXT","w");     // Output file
fread(&t,sizeof(t),1,fin) ;

for(i=0 ; i < 32 ; i++)
{  
    fprintf(fout,"\n") ;
    for(j=0 ; j < 35 ; j++)
        fprintf(fout,"%6.2f",t[i][j]);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T08:50:26.253

在 Java 中，写入文件是这样的：

```
import java.io.*;
class FileWrite 
{
 public static void main(String args[])
 {
  try{
   // Create file 
   FileWriter fstream = new FileWriter("out.txt");
   BufferedWriter out = new BufferedWriter(fstream);
   out.write("Hello Java");

   //Close the output stream
   out.close();
  } catch (Exception e) {
   System.err.println("Error: " + e.getMessage());
  }
 }
} 
```

请参阅 Google 以获取有关“java 写入文件”和“java 读取文件”的更多教程。另外，一旦您实际尝试过某些事情并遇到了一些困难，请更新您的问题。

# c# - WPF (XAML) DataContext 和实体框架上下文对象之间是否存在链接？

> ID：10751223
> 
> 赞同：-1
> 
> 时间：2012-05-25T08:43:18.877
> 
> 标签：c#, .net, wpf, entity-framework

我试图了解 Mixrosoft 的想法。WPF (XAML) DataContext 和实体框架上下文对象之间是否存在链接？为什么将它们都称为上下文？**实体框架上下文对象是 WPF DataContext 吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T08:50:33.553

不。

术语上下文是英语中的常用术语，通常用于定义一组事物，这些事物设定事物的条件或边界。例如，在编程的***上下文***中，函数是返回值的代码片段，而在人类活动的***上下文***中，它可能是一个人所做的工作。

因此，对于 WPF 中的数据绑定，上下文是绑定到演示文稿的数据（或对象）。EF 上下文是负责连接到数据源的一组事物。

坦率地说，您会发现大多数软件到处都有上下文对象 :-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T08:47:30.810

不，它们不一样。
WPF DataContext 是任何对象，其数据可以绑定到 WPF 控件。
实体框架 ObjectContext (DbContext) 是 ORM 的“门面”。
您可以在没有 EF 的情况下使用 WPF 并用作 DataContext 任何东西。同样，您可以使用 EF 并在 WinForms 中显示您的数据......或者根本不显示它们。

我认为，MS 称它们为“-Context”，因为它们以上下文方式用于各自的用例：“在 UI 中显示数据”和“使用数据库中的数据进行操作”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T08:47:57.027

不，它们之间没有联系。它们都包含单词[Context](http://en.wiktionary.org/wiki/context)，因为它们都提供了上下文。
`DataContext`提供控件可以绑定到`ObjectContext`的上下文，提供用于处理数据源（如数据库）的上下文。

# android - android.nfc.action.TECH_DISCOVERED Intent的捕获和预处理

> ID：10751224
> 
> 赞同：1
> 
> 时间：2012-05-25T08:43:23.883
> 
> 标签：android, android-intent, nfc

我的活动已注册到 android.nfc.action.TECH_DISCOVERED 动作，一般来说效果很好：

```
<activity android:name="MyActivityToPpocessNfcTag"
    android:label="@string/app_name">
    <intent-filter>
         <action android:name="android.nfc.action.TECH_DISCOVERED" />
         <category android:name="android.intent.category.DEFAULT"/>
    </intent-filter>
    <meta-data android:name="android.nfc.action.TECH_DISCOVERED"
               android:resource="@xml/filter_nfc"
    />
</activity> 
```

问题是“android.nfc.action.TECH_DISCOVERED”动作的性质。每次我扫描标签时，我都会对系统提示选择应用程序感兴趣（一些预安装的应用程序还会捕获类似类型的 nfc 标签以显示一些基本信息）。系统不提供“记住选择”功能。

我理解为什么会这样：有许多不同类型的 nfc 标签调用 TECH_DISCOVERED 操作。但是，此操作没有提供足够的信息来有效地确定如何过滤每个标签的应用程序，从而导致用户不得不做出选择。

现在我的应用程序毫无疑问可以确定它可以处理哪个标签，那么有没有办法在系统提示选择应用程序之前捕获这个意图，以便我可以采取相应的措施。我只想摆脱这个系统消息“选择应用程序”，我不想消耗所有的 nfc 标签。

请注意，“android.nfc.action.TECH_DISCOVERED”是 Android 完成的第二级 NFC 处理，第一级是“android.nfc.action.NDEF_DISCOVERED”，它具有 uri 和 mimeType 数据，因此 Android 可以有效地选择要运行的应用程序。我正在处理的 NFC 标签正在调用 TECH_DISCOVERED 操作而不是 NDEF_DISCOVERED。

# php - 用php删除图像背景并保存透明png

> ID：10751227
> 
> 赞同：7
> 
> 时间：2012-05-25T08:43:44.447
> 
> 标签：php

我想删除在 PHP 平台上工作的网站上上传的任何图像的白色背景。上传功能已完成，但与此功能混淆。

这是我在这里找到的链接： [从图像中删除白色背景并使其透明](https://stackoverflow.com/questions/8041703/remove-white-background-from-an-image-and-make-it-transparent)

但这正在做相反的事情。我想删除彩色背景并使其具有透明背景的图像。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T08:55:56.077

由于您只需要单色透明度，因此最简单的方法是使用`imagecolortransparent()`. 像这样的东西（未经测试的代码）：

```
$img = imagecreatefromstring($your_image); //or whatever loading function you need
$white = imagecolorallocate($img, 255, 255, 255);
imagecolortransparent($img, $white);
imagepng($img, $output_file_name); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-13T14:48:38.773

```
function transparent_background($filename, $color) 
{
    $img = imagecreatefrompng('image.png'); //or whatever loading function you need
    $colors = explode(',', $color);
    $remove = imagecolorallocate($img, $colors[0], $colors[1], $colors[2]);
    imagecolortransparent($img, $remove);
    imagepng($img, $_SERVER['DOCUMENT_ROOT'].'/'.$filename);
}

transparent_background('logo_100x100.png', '255,255,255'); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-04-08T14:20:51.567

试试 ImageMagick，它对我有用。您还可以控制需要去除的颜色量。只需将图像路径、bgcolor 作为 RGB 数组传递，并以百分比形式传递 fuzz。只要您在系统/主机上安装了 ImageMagick。我让我的托管服务提供商为我安装它作为一个模块。

我正在使用 ImageMagick 6.2.8 版

例子：

```
 $image = "/path/to/your/image.jpg";
    $bgcolor = array("red" => "255", "green" => "255", "blue" => "255");
    $fuzz = 9;
    remove_image_background($image, $bgcolor, $fuzz); 

        protected function remove_image_background($image, $bgcolor, $fuzz)
        {
            $image = shell_exec('convert '.$image.' -fuzz '.$fuzz.'% -transparent "rgb('.$bgcolor['red'].','.$bgcolor['green'].','.$bgcolor['blue'].')" '.$image.'');
            return $image;
        } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-25T08:59:28.667

获取图像中白色的索引并将其设置为透明。

```
$whiteColorIndex = imagecolorexact($img,255,255,255);
$whiteColor = imagecolorsforindex($img,$whiteColorIndex);
imagecolortransparent($img,$whiteColor); 
```

如果您不知道确切的颜色，您也可以使用 imagecolorclosest()。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-04-07T08:45:48.907

@geoffs3310 的函数应该是这里接受的答案，但请注意，保存的 png 不包含 alpha 通道。

要删除背景并将新 png 保存为带有 alpha 的透明 png，以下代码有效

```
$_filename='/home/files/IMAGE.png';
$_backgroundColour='0,0,0';
$_img = imagecreatefrompng($_filename);
$_backgroundColours = explode(',', $_backgroundColour);
$_removeColour = imagecolorallocate($_img, (int)$_backgroundColours[0], (int)$_backgroundColours[1], (int)$_backgroundColours[2]);
imagecolortransparent($_img, $_removeColour);
imagesavealpha($_img, true);
$_transColor = imagecolorallocatealpha($_img, 0, 0, 0, 127);
imagefill($_img, 0, 0, $_transColor);
imagepng($_img, $_filename); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-25T08:49:13.057

使用php图像处理和GD，如果RGB分量都是255（像素为白色），则逐像素读取图像，设置alpha通道为255（透明）。您可能需要更改图像的文件类型，具体取决于上传的文件类型是否支持 Alpha 通道。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-11-12T14:42:36.590

从 URL 转换并返回页面的版本：

```
$img = imagecreatefromjpeg('http://mypage.com/image.jpg');

$remove = imagecolorallocate($img, 255, 255, 255); // Define color rgb to remove
imagecolortransparent($img, $remove);

ob_start();
imagepng($img);
$imgData = ob_get_clean();
imagedestroy($img);

$data_img = 'data:image/png;base64,'.base64_encode($imgData);
echo '<body style="background: #f00;"><img src="'.$data_img.'"></body>'; 
```

# java - 在java网络中，我可以获得客户端试图访问服务器的域名吗？

> ID：10751228
> 
> 赞同：0
> 
> 时间：2012-05-25T08:43:50.410
> 
> 标签：java, networking, network-programming

假设 user1 尝试使用 foo1.com 在 11.11.11.11 访问我的服务器，而 user2 尝试使用 foo2.net 在 11.11.11.11 访问我的服务器

使用 Java + servlet 编程时是否可以区分这些请求？

谢谢 ： ）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T08:49:14.910

当 HTTP GET 进入时，您将获得原始 URL。这意味着您实际上并没有获得客户端尝试连接的 IP 地址。例如，如果请求被转发、BNATed 或代理。

简而言之，您只有包含主机名的 URL。您可以查看标头，也许客户端会告诉您它连接到的 IP 地址。

# javascript - Zend 框架中的谷歌 CDN

> ID：10751229
> 
> 赞同：2
> 
> 时间：2012-05-25T08:43:52.470
> 
> 标签：javascript, jquery, zend-framework, zend-view

如何在 Zend Framework(Zend_View) 中获得具有后备功能的 Google CDN？

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js"></script>
<script type="text/javascript">!window.jQuery && document.write('<script src="/base/js/jquery-1.7.2.js"></script>');</script> 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T08:49:12.230

你写的方式是对的。

我刚刚添加了 2 件事。
1) 基本 URL
2) 取消转义特殊字符

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script>
!window.jQuery && document.write(unescape('%3Cscript src="<?php echo $this->baseUrl(); ?>/base/js/jquery-1.7.2.js"%3E%3C/script%3E'));
</script> 
```

用于使用头脚本视图助手

```
 $java_script_code= '<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>';
    $java_script_code.= '<script>';
    $java_script_code.= '!window.jQuery && document.write(unescape(\'%3Cscript src="' . $this->baseUrl() . '/base/js/jquery-1.7.2.js"%3E%3C/script%3E\'));';
    $java_script_code.= '</script>'; 
```

您可以在视图中执行此操作

```
$this->headScript()->appendScript($java_script_code); 
```

或在控制器中（更新上面的基本网址）

```
$this->view->headScript()->appendScript($java_script_code); 
```

仅供参考：[头部脚本助手](http://framework.zend.com/manual/en/zend.view.helpers.html#zend.view.helpers.initial.headscript)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T12:50:31.177

正如@Venu 所说，使用headScript() 进行最佳实践。

如果您已自定义或将修改文件的基本位置，则可以使用 setBaseUrl() 来修改包含文件的路径。

```
//File: /public/js/jquery.js
$view->baseUrl("js/jquery.js"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-10T07:35:54.610

*在/base/js/*目录下创建一个文件*fallback.js*并粘贴以下内容

 *```
!window.jQuery && document.write('<script src="/base/js/jquery-1.7.2.js"> 
```

在 bootstrap.php 中添加以下代码

```
protected function initJquery() {
    $this->bootstrap('view');
    $view = $this->getResource('view'); //get the view object

    //default loads from google CDN
    $view ->jQuery()->enable()->setVersion('1.7');

    $view ->headScript()->prependFile($view->baseUrl().'/base/js/fallback.js');
    return $view;
} 
```

我希望它有帮助*

# ruby-on-rails - 在rails中使用curl和两个模型传递xml

> ID：10751230
> 
> 赞同：0
> 
> 时间：2012-05-25T08:44:04.303
> 
> 标签：ruby-on-rails, xml

我想通过 curl 传递这个：

```
<invoice>
.....
<invoice-details>
<invoice-detail>
....
</invoice-detail>
<invoice-detail>
....
</invoice-detail>
</invoice_details>
</invoice> 
```

顺便说一下，我有两个模型，invoice 和 invoice_detail，它们是关联的。我有一个用于将发票传递给所有 invoice_details 的主键，以便我可以识别它们。例如，如果主键是 200，我希望该发票下方的所有详细信息也具有 200 的外键。我怎么能做到这一点？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T10:50:16.337

为此操作创建一个 xml 视图。在您的控制器中，我想您有以下 respond_to 块：
`respond_to do |format|`
`format.html`
`format.xml {render :xml => @invoice}`

有关创建 xml 视图的更多信息，请查看 xml builder 或这个[SO question](https://stackoverflow.com/questions/2936361/how-do-i-use-xml-builder-to-create-xml-in-rails)

要通过 curl 传递它，请在 url 中请求 .xml，例如：

`curl "http://yourapp.com/invoices/2/show.xml"`

# blackberry - 如何从黑莓中的 url 裁剪图像

> ID：10751231
> 
> 赞同：0
> 
> 时间：2012-05-25T08:44:06.603
> 
> 标签：blackberry

我想裁剪从服务器获取的图像。我尝试了以下代码 -

```
URLBitmapField wmf= new URLBitmapField("http://a0.twimg.com//sticky//default_profile_images//default_profile_4_normal.png"); 
```

URLBitmapField 类如下 -

```
import net.rim.device.api.math.Fixed32;
import net.rim.device.api.system.Bitmap;
import net.rim.device.api.system.EncodedImage;
import net.rim.device.api.ui.Color;
import net.rim.device.api.ui.Graphics;
import net.rim.device.api.ui.UiApplication;
import net.rim.device.api.ui.component.BitmapField;

//local

public class URLBitmapField extends BitmapField implements URLDataCallback {
EncodedImage result = null;
Bitmap myImage;

public static EncodedImage _encoded_img = null;

int _imgWidth = 52;
int _imgHeight = 62;
int _imgMargin = 10;

public URLBitmapField(String url) {
    try {
        http_image_data_extrator.getWebData(url, this);
    }
    catch (Exception e) {}
}

public Bitmap getBitmap() {
    if (_encoded_img == null) return null;
    return myImage;
}

public void callback(final String data) {
    if (data.startsWith("Exception")) return;

    try {
        byte[] dataArray = data.getBytes();

        //bitmap = EncodedImage.createEncodedImage(dataArray, 0, dataArray.length);//no scale

        _encoded_img = EncodedImage.createEncodedImage(dataArray, 0, dataArray.length); // with scale
        _encoded_img = sizeImage(_encoded_img, _imgWidth, _imgHeight);

        setImage(_encoded_img);
        UiApplication.getUiApplication().getActiveScreen().invalidate();
    }
    catch (final Exception e){}
}

public EncodedImage sizeImage(EncodedImage image, int width, int height) {

      int currentWidthFixed32 = Fixed32.toFP(image.getWidth());
      int currentHeightFixed32 = Fixed32.toFP(image.getHeight());

      int requiredWidthFixed32 = Fixed32.toFP(width);
      int requiredHeightFixed32 = Fixed32.toFP(height);

      int scaleXFixed32 = Fixed32.div(currentWidthFixed32,
        requiredWidthFixed32);
      int scaleYFixed32 = Fixed32.div(currentHeightFixed32,
        requiredHeightFixed32);

      result = image.scaleImage32(scaleXFixed32, scaleYFixed32);
      return result;
}

}

public interface URLDataCallback {

    public void callback(String data);

}

import java.io.IOException;
import java.io.InputStream;
import javax.microedition.io.Connector;
import javax.microedition.io.HttpConnection;
import net.rim.device.api.system.RadioInfo;
import net.rim.device.api.system.WLANInfo;
import net.rim.device.api.ui.UiApplication;

public class http_image_data_extrator {
static String url_="";
static StringBuffer rawResponse=null;
//static String result = null;
     public static void getWebData(String url, final URLDataCallback callback) throws IOException {
         //url_=url;

                 HttpConnection connection = null;  
                 InputStream inputStream = null;  

                try {  

                    if ((WLANInfo.getWLANState() == WLANInfo.WLAN_STATE_CONNECTED)
                            && RadioInfo
                                    .areWAFsSupported(RadioInfo.WAF_WLAN)) {
                        url += ";interface=wifi";
                    }

                    connection = (HttpConnection) Connector.open(url, Connector.READ, true);  

                    String location=connection.getHeaderField("location");

                    if(location!=null){

                        if ((WLANInfo.getWLANState() == WLANInfo.WLAN_STATE_CONNECTED)
                                && RadioInfo
                                        .areWAFsSupported(RadioInfo.WAF_WLAN)) {
                            location += ";interface=wifi";
                        }

                        connection = (HttpConnection) Connector.open(location, Connector.READ, true);  

                    }else{
                        connection = (HttpConnection) Connector.open(url, Connector.READ, true);  
                    }

                    inputStream = connection.openInputStream();  
                    byte[] responseData = new byte[10000];  
                    int length = 0;  
                    rawResponse = new StringBuffer();  
                    while (-1 != (length = inputStream.read(responseData))) { 
                        rawResponse.append(new String(responseData, 0, length));  
                    }  
                    int responseCode = connection.getResponseCode();  
                    if (responseCode != HttpConnection.HTTP_OK){
                        throw new IOException("HTTP response code: "+ responseCode);  
                    }  

                    final String  result = rawResponse.toString();
                    UiApplication.getUiApplication().invokeLater(new Runnable() {  
                        public void run(){  
                            callback.callback(result);  
                        }  
                    });  
                }  
                catch (final Exception ex) {  
                    UiApplication.getUiApplication().invokeLater(new Runnable() {  
                        public void run() {  
                            callback.callback("Exception (" + ex.getClass() + "): " + ex.getMessage());  
                        }  
                    });  
                }
    }  

} 
```

我也有图像裁剪的代码 -

```
 int width = myImage.getWidth();
    int height = myImage.getHeight();

    // get original data from the image
    int myImageData[] = new int[width * height];
    myImage.getARGB(myImageData, 0, width, 0, 0, width, height);

    // get default color of a newly created bitmap
    int defaultColors[] = new int[1 * 1];
    (new Bitmap(1, 1)).getARGB(defaultColors, 0, 1, 0, 0, 1, 1);

    int defaultColor = defaultColors[0];
    int fillColor = Color.RED;
    int diameter = 65;

    // dummy data preparation
    Bitmap dummyImage = new Bitmap(width, height);
    Graphics dummyImageGraphics = Graphics.create(dummyImage);
    dummyImageGraphics.setColor(fillColor);
    int startX = width / 2 - diameter / 2;
    int startY = height / 2 - diameter / 2;
    dummyImageGraphics.fillArc(startX, startY, diameter, diameter, 0, 360);
    int dummyData[] = new int[width * height];
    dummyImage.getARGB(dummyData, 0, width, 0, 0, width, height);

    // filling original data with transparent value.
    int totalPixels = width * height;
    for (int i = 0; i < totalPixels; i++) {
        if (dummyData[i] == defaultColor) {
            myImageData[i] = 0;
        }
    }

    // set new data
    myImage.setARGB(myImageData, 0, width, 0, 0, width, height); 
```

如何从 url 裁剪图像？在哪里添加裁剪代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T10:51:11.703

简单的：

```
 public static Bitmap cropBitmap(Bitmap src, int w, int h) {
        Bitmap cropped = new Bitmap(w, h);
        Graphics g = new Graphics(cropped);
        g.drawBitmap(0, 0, w, h, src, 0, 0);
        return cropped;
    } 
```

至于缩放，看看`Bitmap.scaleInto`方法。

# git - “git checkout tag-name”与“git reset --hard tag-name”

> ID：10751237
> 
> 赞同：18
> 
> 时间：2012-05-25T08:44:35.447
> 
> 标签：git

我知道有这样的问题[，](https://stackoverflow.com/questions/2541545/is-there-a-difference-between-git-reset-hard-hash-and-git-checkout-hash)但这不是我要问的。

我也知道：

`git checkout tag-name`：

*   将你从分支中分离出来。（即移动`HEAD`指针，保持`BRANCH`指针）

`git reset --hard tag-name`：

*   不会将您从分支中分离出来，但会使之前的提交变得“悬空”。（即同时移动`HEAD`和`BRANCH`指针）

我想知道哪个更适合更新到标签，即是否应该重置或签出生产。我知道垃圾收集器可能会运行，删除悬空提交，但话又说回来，如果在更新到标签的过程之前总是“拉动”生产，我看不出有什么不好的。

考虑到 a总是在此更新调用之前完成，是否应该使用`reset`or对标签进行生产更新？`checkout``pull`

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-25T10:33:57.383

> 我想知道哪一个更适合更新到标签

您的生产安装应该检查一个标签。

这样想：您的生产安装是只读的。`git reset --hard tag-name`将修改当前签出的分支。

**或者**

通常的做法是，除了创建标签之外，您还有一个分支，它只是最新版本。在这种情况下，您可以合并到 master 并从那里创建一个标签；在您的生产安装中，您只需使用 git pull （在 master 上）进行更新。

# c# - Monodroid 相当于 Android 中的可搜索

> ID：10751244
> 
> 赞同：0
> 
> 时间：2012-05-25T08:45:23.790
> 
> 标签：c#, android-manifest, xamarin.android

我正在搜索相当于可在 Monodroid 中[搜索](http://developer.android.com/guide/topics/search/search-dialog.html)的 Android ，因为 monodroid 会自动生成应用程序 xml 清单。有没有办法拥有一个自己的应用程序 xml 并向 monodroid 编译器说这个 xml 应该绑定到编译中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T10:43:42.033

将这些行添加到 Search-Activity 它会生成正确的清单：

```
[IntentFilter (new[]{Intent.ActionSearch})]
[MetaData ("android.app.searchable", Resource="@xml/searchable")] 
```

这是所有的了。

有关更多信息，请查看[http://docs.xamarin.com/android/advanced_topics/working_with_androidmanifest.xml](http://docs.xamarin.com/android/advanced_topics/working_with_androidmanifest.xml)

# jsp - spring webflow 2绑定：如何填充使用枚举值，我正在使用 spring webflow 2，我面临着呈现用户注册表单的问题。用户必须插入姓名、姓氏……和他/她的国籍。这是模型类：@Component @Entity @Table (name = "personal_data") public class PersonalData implements Serializable { @Id @GeneratedValue @Column (name = "id") private

> ID：10751249
> 
> 赞同：2
> 
> 时间：2012-05-25T08:46:13.137
> 
> 标签：jsp, select, binding, enums, spring-webflow-2

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T16:11:54.160

标签中的“items”属性 `<form:options />`显示以下文档：

> 用于生成内部“选项”标签的集合、映射或对象数组。除非包含选择的数据绑定属性是枚举，否则此属性是必需的，在这种情况下使用枚举的值。

所以你只需要在`<form:options />`选择中添加没有任何属性的标签。这将使选择填充枚举项作为文本和值。您还可以添加默认的“选择”选项。例如：

```
<form:select path="personalData.nationality">
    <option value="">Choose a nationality</option>
    <form:options />
</form:select> 
```

该代码将产生以下 html 输出：

```
<select name="personalData.nationality">
    <option value="">Choose a nationality</option>
    <option value="Afghan">Afghan</option>
    <option value="Albanian">Albanian</option>
    <option value="Algerian">Algerian</option>
    <option value="American">American</option>
    <option value="Andorran">Andorran</option>
    <option value="Angolan">Angolan</option>
    <option value="Antiguans">Antiguans</option>
    <option value="Argentinean">Argentinean</option>
    <option value="Armenian">Armenian</option>
</select> 
```

希望这可以帮助。

# android - androidaidl 空指针

> ID：10751250
> 
> 赞同：0
> 
> 时间：2012-05-25T08:46:19.310
> 
> 标签：android

有谁知道为什么我总是在“myService.getMountPoint();”中得到空指针？

我想我做的几乎和网上的例子一样。

```
public class mainActivity extends Activity {
/** Called when the activity is first created. */

private IMountService myService = null;

private ServiceConnection conn = new ServiceConnection() {
    public void onServiceConnected(ComponentName name, IBinder service) {
        // TODO Auto-generated method stub

        myService = IMountService.Stub.asInterface(service);
    }

    public void onServiceDisconnected(ComponentName name) {
        // TODO Auto-generated method stub

    }
};

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    bindService(new Intent(mainActivity.this, DeviceStatusService.class), conn,
            Context.BIND_AUTO_CREATE);
    startService(new Intent(mainActivity.this, DeviceStatusService.class));
    try {
        myService.getMountPoint();
    } catch (RemoteException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T09:05:15.090

当您尝试访问该服务时，该服务尚未绑定 - 因此在这种情况下引用为空。在调用 onServiceConnected 并设置对服务的引用后，您应该做您想做的事情

# iphone - 用私钥加密的数据只能用公钥解密。

> ID：10751251
> 
> 赞同：2
> 
> 时间：2012-05-25T08:46:30.220
> 
> 标签：iphone

我正在阅读[证书、密钥和信任服务概念](http://developer.apple.com/library/ios/#DOCUMENTATION/Security/Conceptual/CertKeyTrustProgGuide/02concepts/concepts.html#//apple_ref/doc/uid/TP40001358-CH204-TP9)

来自 ios 开发者库。在这篇文章中，当我读到“用私钥加密的数据只能用公钥解密，反之亦然”这一行时。

我卡住了。这怎么可能？我认为用公钥加密的数据可以用私钥解密。

这是错字还是我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T08:55:13.783

加密操作与解密操作相同。

大多数公钥加密依赖于使用两个密钥的**相同**操作再次生成纯文本这一事实。

所以以错误的顺序使用它们仍然会返回原始数据。

但是用私钥加密意味着**每个人**都可以解密它——因为解密是用**公钥**完成的。几乎肯定不是你想要的！:)

但是，反向使用密钥是数字签名中所做的。所以也不是完全没用。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T09:10:52.837

不，这不是错字。在[非对称加密](http://en.wikipedia.org/wiki/Public-key_cryptography)算法（ex.RSA）中，我们使用两个密钥。钥匙是一对。

一对中的一个密钥是公钥，它是共享的。私钥是秘密的。

如果你用一个密钥加密，另一个密钥可以解密它。

如果使用公钥加密，只有私钥持有者才能解密。这确保了机密性。

另一方面，如果使用私钥进行加密，则称为[数字签名](http://en.wikipedia.org/wiki/Digital_signature)。它用于身份验证。

# css - div里面的textarea

> ID：10751252
> 
> 赞同：5
> 
> 时间：2012-05-25T08:46:31.920
> 
> 标签：css, html, textarea

我认为我在这里做错了，我希望 textarea 在每一侧都比父 div 小 10px，但事实并非如此，它太小了：

```
<html>
  <div style="position: absolute; left: 10px; top: 10px; width:50%; height: 50%; border: 1px solid #000000;">
    <textarea style="position: absolute; left: 10px; top: 10px; bottom: 10px; right: 10px; border: 1px solid #FF0000; resize:none;"></textarea>
  </div>
</html> 
```

jsfiddle：http: [//jsfiddle.net/2a7LR/1/](http://jsfiddle.net/2a7LR/1/)

为什么会这样？我怎样才能使它适合从父 div 的每一侧小 10 像素？

它仅在 chrome/safari 中正确显示，但在其他所有浏览器（firefox、opera、IE8）中都错误

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-25T08:59:46.670

[http://jsfiddle.net/2a7LR/5/](http://jsfiddle.net/2a7LR/5/)为你调整了一些 CSS。基本上使用`width: 100%; height: 100%`，将 移到`10px`容器的`padding`属性，然后添加`box-sizing`到 textarea 以使大小考虑边框。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T09:00:57.123

```
<html>
<div style="position: absolute; left: 10px; top: 10px; width:50%; height: 50%; border: 1px solid #000000;">
    <textarea style="position: relative; margin: 10px 10px 10px 10px; width:90%; height: 90%"></textarea>
</div>
</html>​ 
```

这应该适合你。文本区域在绝对 div 内可以是相对的。您只需要使用边距而不是顶部和左侧来定位它。

干杯，费德

编辑：并且还注意到您没有在文本区域中设置任何宽度和高度，因此不知道它的大小 - 它只是放置了默认值。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-25T08:49:52.603

[http://jsfiddle.net/EzJ8G/1/](http://jsfiddle.net/EzJ8G/1/) 替换textarea中的样式并添加padding:10px；

# objective-c - SBJson 无密钥解析

> ID：10751259
> 
> 赞同：1
> 
> 时间：2012-05-25T08:46:53.780
> 
> 标签：objective-c, ios, sbjson

通过使用单例客户端（RestKit）获得响应，我得到了这个 json 字符串。

```
[
   {
      "created_at":"Tue Apr 24 19:25:14 +0000 2012",
      "id":132456,
   },
   {
      "created_at":"Tue Apr 24 19:25:14 +0000 2012",
      "id":13456,
   },
] 
```

我得到了这个结果

```
NSDictionary *results = [[response bodyAsString] JSONValue]; 
```

这导致了这个

```
(
   {
      "created_at" = "Tue Apr 24 19:25:14 +0000 2012";
      "id"=132456;
   }
   {
      "created_at" = "Tue Apr 24 19:25:14 +0000 2012";
      "id"=132456;
   }
) 
```

作为 NSDictionary。

如您所见，我没有可用的密钥。如果是这样，我会做这样的代码`NSMutableArray *block = [results objectForKey:@"key"];`。我试图为 objectForKey 放置和空字符串，但它不起作用并给了我一个错误“objectForKey”。

问题：如何解析每个块以将其放入没有键的数组中？

请帮忙！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T08:51:42.633

这实际上是一个包含 2 个字典的数组。更改您的代码：

```
NSDictionary *results = [[response bodyAsString] JSONValue]; 
```

至

```
NSArray *results = [[response bodyAsString] JSONValue]; 
```

然后，如果需要，您可以使用 For-In 从该数组中获取所有字典。Key 似乎是 id 属性。

所以对于数组中的第一个：

```
NSDictionary *dictionary = (NSDictionary *)[results objectAtIndex:0];
NSInteger myKey = [[dictionary valueForKey@"id"] intValue]; 
```

# validation - 的禁用属性 不评估请求参数

> ID：10751260
> 
> 赞同：3
> 
> 时间：2012-05-25T08:46:58.550
> 
> 标签：validation, jsf-2

我想在按下按钮添加和按钮删除时禁用验证，所以我尝试了这个

```
<f:validateLength maximum="500" disabled="#{!empty param['mainForm:add_Button'] or !empty param['mainForm:delete_Button']}" /> 
```

按钮添加已经被禁用，但是按钮删除还没有。而且我不知道有什么问题！这是我的代码，你们能帮我检查一下吗。抱歉我的英语不好

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
            xmlns:h="http://java.sun.com/jsf/html"
            xmlns:f="http://java.sun.com/jsf/core"
            xmlns:ui="http://java.sun.com/jsf/facelets" template="../main.xhtml">
<ui:define name="content">

    <div id="question">

        <div id="mainForm" class="form">

            <span>ID:#<h:outputText value="#{editQuestion.questionData.question.id}" /></span>
            <br />
            <div>
                <span><h:outputText value="#{i18n['admin.edit.questiontitle']}" />:</span>
                <h:inputTextarea id ="title" rows="3" style="width: 100%" value="#{editQuestion.questionData.title}" required="#{!empty param['mainForm:Save_btn']}" label="Question Title">
                    <f:validateLength maximum="500" disabled="#{!empty param['mainForm:add_Button'] or !empty param['mainForm:delete_Button']}" />
                </h:inputTextarea> 
                <h:message for="title" style="color: red"/>
            </div>
            <div>
                <span><h:outputText value="#{i18n['admin.edit.questiontext']}" />:</span><br />
                <h:inputTextarea rows="6" id="name" style="width: 100%" value="#{editQuestion.questionData.text}" required="#{!empty param['mainForm:Save_btn']}" label="Question Text">
                    <f:validateLength maximum="1000" disabled="#{!empty param['mainForm:add_Button'] }"/>
                </h:inputTextarea>
                <h:message for="name" style="color:red"/>
            </div>

            <div class="list">

                <div class="title"><h:outputText value="#{i18n['admin.edit.answers']}" /></div>
                <div class="btn_add">
                    <h:commandButton image="/resources/imgs/#{editQuestion.buttonAdd}" alt="add" id="add_Button"
                                     title="#{i18n['img.add']}"  action="#{editQuestion.addAnswer}" 
                                     disabled="#{!editQuestion.possibleToAdd}">
                        <f:param name="id" value="#{editQuestion.id}"/>
                    </h:commandButton>
                </div>
                <h:dataTable cellspacing="0" value="#{editQuestion.answersData}" var="answer">
                    <h:column>
                        <f:facet name="header">ID</f:facet>
                        <h:outputText value="#{answer.answer.id}" />
                    </h:column>

                    <h:column>
                        <f:facet name="header"><h:outputText value="#{i18n['admin.edit.rightanswer']}"  /></f:facet>
                        <h:selectBooleanCheckbox value="#{answer.answer.isRight}"/>
                    </h:column>

                    <h:column>
                        <f:facet name="header"><h:outputText value="#{i18n['admin.edit.answers']}"  /></f:facet>
                        <h:inputTextarea id="answer" rows="3" cols="40" value="#{answer.text}" required="#{!empty param['mainForm:Save_btn']}" label ="Answer">
                            <f:validateLength maximum="500" disabled="#{!empty param['mainForm:add_Button'] }"/>
                        </h:inputTextarea>
                        <div>
                           <h:message for="answer" style ="color:red"/>  
                        </div>

                    </h:column>

                    <h:column>
                        <h:commandButton image="/resources/imgs/#{editQuestion.buttonDelete}" 
                                         action="#{editQuestion.deleteAnswer(answer)}" disabled="#{!editQuestion.possibleToDelete}"
                                         alt="delete" id="delete_Button" title="#{i18n['img.delete']}">
                            <f:param name="id" value="#{editQuestion.id}"/>
                        </h:commandButton>
                    </h:column>
                </h:dataTable>
            </div>

            <div class="btn_block" style="float: inherit" >
                <center>
                    <h:commandButton value="#{i18n['btn.save']}" styleClass="button bg_green" id="Save_btn"  action="#{editQuestion.saveAction}">
                        <f:param name="id" value="#{editQuestion.id}" />
                    </h:commandButton>

                    <h:commandButton value="#{i18n['btn.cancel']}" styleClass="button bg_red" action="#{editQuestion.calcelAction}">
                        <f:param name="id" value="#{editQuestion.id}" />
                    </h:commandButton>
                </center>
            </div>
        </div>
    </div>

</ui:define> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T12:25:54.213

这`<f:validateLength>`是一个标签处理程序，而不是一个 UI 组件。所有 taghandler 属性都是在视图构建时按规范评估的，而不是在视图渲染时。因此，在同一视图的整个生命周期中，属性将保持与第一次构建视图时相同的值。

您基本上需要创建一个自定义验证器来检查`validate()`方法内的请求参数，然后委托给标准`LengthValidator`类。

```
<f:validator validatorId="delegateLengthValidator" />
<f:attribute name="maximum" value="1000" />
<f:attribute name="buttonId" value="mainForm:add_Button" /> 
```

和

```
String buttonId = component.getAttributes().get("buttonId");

if (!context.getExternalContext().getRequestParameterMap().containsKey(buttonId)) {
    LengthValidator validator = new LengthValidator();
    validator.setMaximum(Integer.valueOf(component.getAttributes().get("maximum")));
    validator.validate(context, component, value);
} 
```

请注意，[OmniFaces](http://omnifaces.org)最近添加了一个新`<o:validator>`标签，它应该可以解决这个问题，如下所示：

```
<o:validator validatorId="javax.faces.Length" maximum="1000" disabled="#{!empty param['mainForm:add_Button']}" /> 
```

[在此处](http://showcase.omnifaces.org/taghandlers/validator)查看展示示例。

# android - 如何使用视图的中心作为相对布局内的参考点

> ID：10751261
> 
> 赞同：11
> 
> 时间：2012-05-25T08:46:59.907
> 
> 标签：android, android-layout, android-relativelayout

我一直在使用一些技巧来拉伸父`RelativeLayout`级内部的视图，以便它从左上角开始并在底部中心结束。虽然`RelativeLayout`确实可以让您将某些东西定位在其自身的中心，但它似乎并不能让您将某些东西拉伸到同一点。

我的解决方案很简单，在该中心放置一些东西，并给它 1px 尺寸，使其成为 parent 的实际中心`RelativeLayout`。不要误会我的意思，这是可行的，我对此没有任何问题，但是如果有更好的做法，我想知道它。

至于我在说什么的图形表示，让我添加一些图像来说明。

                                                ![在此处输入图像描述](../Images/e3aa05d207e1def71265e0424ac9e99a.png)

第一张图片的中心有一个无文本`TextView`的`RelativeLayout`，我给它的宽度是 0dp。正如您在下一张图片中看到的那样，这使我可以相对于该中心放置任何东西。我的观点是，如果不在中心添加额外的视图就无法做到这一点，这让我感到很奇怪，因为我可以看到诸如`Layout to left of`or `Layout to right of`but **no** `Layout to center of`之类的属性。

                                                 ![在此处输入图像描述](../Images/fde20a28282380fa3284a0ed13b89c99.png)

所以这个场景可能更像是“*它还没有坏**，但**我担心它会随时弹出*”。然后另一方面，如果这是正确的做法，并且我帮助某人学习新事物，那也适用于我。

**为什么我会问没有得到回答的问题！？我在这里设置赏金..**

建议的最明智的事情（根据我的判断）是我`LinearLayout`用 a替换 my `View`，我认为它会占用更少的内存，即使它稍微少一点。所以我感谢@yorkw。我很惊讶以前没有人问过这个问题。

只是为了澄清，因为似乎对我实际追求的东西存在误解。我不希望某些东西占据父宽度/高度的一半。我正在寻求一种将其用作参考点的方法（这就是我在标题中所说的），这样我就可以做一些事情，例如将图像定位在中心的左侧，而无需添加占一半的线性布局和左侧的重力管他呢。

### 更新

从 API 14 开始，我们就有[`Space`](https://developer.android.com/reference/android/widget/Space.html)了一个轻量级的`View`子类，*可能*更适合这种黑客攻击。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T04:01:31.143

我喜欢你目前的解决方案，但如果你想避免时髦的隐形薄居中小部件，你可以按如下方式完成：

*   将 containerWidth 计算为包含 RelativeLayout 派生类的像素宽度（调用此 MyRelativeLayout）
*   创建一个名为 leftHalfWidgetLayoutParams 的 MyRelativeLayout.LayoutParams 实例
*   设置 leftHalfWidgetLayoutParams.width = containerWidth / 2，或者在上面创建时使用构造函数参数，或者在事后。如果您想稍后调整它（例如，在 MyRelativeLayout 中的 onSizeChanged() 的覆盖中），则事实是必要的。
*   每次设置或更改 leftHalfWidgetLayoutParams.width 时，调用 leftHalfWidget.setLayoutParams(leftHalfWidgetLayoutParams)。
*   如果需要在每次宽度变化时重绘 MyRelativeLayout，请调用 requestLayout()

如果中心右侧的小部件过大，可能还需要明确设置它们的布局宽度值，以防止它们侵入容器的左半部分。

现在我意识到这失去了让 RelativeLayout 自动完成所有事情的一些“魔力”，这就是你的方法实际上更好的地方。但是RelativeLayout仍然会尽可能地强制你的小部件的相对位置，因为你的leftHalfWidget的布局参数中已经添加了宽度的附加约束，所以你不会覆盖或放弃它的整体这方面的贡献。

如果不以上述方式显式设置布局参数的宽度值，我想不出一种方法来满足您在 RelativeLayout 中的要求。这是您的另一种方法，但不一定是更好的方法。

我要指出的是，*如果*您的左半部分小部件*总是*占据容器的左半部分，那么我看不出为什么在*顶层*（权重为 0.5 ）有水平 LinearLayout（而不是 RelativeLayout）对于您的左侧大小的小部件，其右侧的右侧相对布局（RelativeLayout）用于剩余的右半部分），这不是一个好的解决方案。在这种情况下，“相对”的东西无论如何只会在右半部分进行，那么当 LinearLayout 可以更简洁地完成工作时，为什么还要在顶层使用 RelativeLayout 呢？但也许您想在左侧使用 RelativeLayout 来处理垂直关系，因此您实际上可能在左侧拥有多个控件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T09:53:54.053

为了实现你正在做的事情，我使用了 LinearLayout，layout_width=0dip 和 layout_weight=50。但它不是最优的，因为它在线性布局内嵌套了另一个布局。我很想知道是否有其他更好的解决方案可用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T05:25:30.600

That seems kind of wonky. I'd hate to be the guy doing follow up work on that layout. Really though, to address the issue, you should just use a LinearLayout and weights.

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#ff0000"
    android:weightSum="2" >

    <Button
            android:layout_width="0dp"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:background="#00ff00"
            android:text="@string/hello" />
</LinearLayout> 
```

you could embed the above into a RelativeLayout as is. Given each direct child of a RelativeLayout has a dev-defined role, it's easy for one to see that a LinearLayout child with fill_parent in both directions is another layer of the RelativeLayout.

You could insert arbitrary, empty, views as noted in another comment with a given layout_weight, or, as I did above, assign a weightSum so the rest is implied. I added some color above and here's a pretty picture

![pretty picture](../Images/02b1a6dfe609f07f15b41d2cba1510aa.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-27T14:39:25.647

我认为最好使用LinearLayout。有了'layout_weight'这个属性，我认为LinearLayout可以解决很多问题。使用 LinearLayout 还需要在 LinearLayout 内部有另一个空视图，但我认为它更好，我喜欢 LinearLayout :) 这是我的代码

```
<LinearLayout android:layout_height="wrap_content"
    android:layout_width="fill_parent"
    android:background="@drawable/your_image">
    <Button android:layout_height="fill_parent"
        android:layout_width="0dip"
        android:layout_weight="1.0"/>
    <View android:layout_height="fill_parent"
        android:layout_width="0dip"
        android:layout_weight="1.0"
        android:visibility="invisible"/>
</LinearLayout> 
```

最后，对不起我糟糕的英语。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-02T18:28:32.883

目前，Android 中没有任何内置功能可以帮助使用布局的中心作为参考点。但是，您可以仅使用上面其他答案中建议的一些扩展和技巧来完成此操作。如果 Android 已经为此提供了一些东西，那么它将执行与其中一些答案相同数量的计算和工作。所以它是一样的，但如果我们内置它肯定会看起来更干净。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-05-19T04:27:51.207

您可以使用支持库的[PercentRelativeLayout](https://developer.android.com/reference/android/support/percent/PercentRelativeLayout.html)。

1.  将其包含在您的项目中：`compile 'com.android.support:percent:23.4.0'`

2.  使用`PercentRelativeLayout`代替你的`RelativeLayout`

3.  使按钮的宽度为其父级的 50%：`app:layout_widthPercent="50%"`

新布局看起来快速且易于使用。我认为它唯一真正的缺点是它不能用于主屏幕小部件。

# facebook-fql - facebook api fql/places 中的页面 ID

> ID：10751263
> 
> 赞同：1
> 
> 时间：2012-05-25T08:47:13.447
> 
> 标签：facebook-fql

我正在尝试使用 fql/places api 来查询我当前位置附近的地方。我不确定以下查询中的页面 ID 是什么意思。查询工作正常并返回预期结果。但是，如果我不使用页面 ID，我会收到错误消息。

```
https://api.facebook.com/method/fql.query?   query=SELECT+name%2Cdescription%2Cgeometry%2Clatitude%2Clongitude%2Ccheckin_count%2Cdisplay_subtext+FROM+place+WHERE+page_id%3D110506962309835&access_token=... 
```

返回以下结果

```
Facebook Palo Alto We’re building a web where the default is social. Point -122.15198690595 37.4163458217 37.4163458217 -122.15198690595 657486 Corporate Office・158,101 were here 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T13:47:46.093

[https://graph.facebook.com/search?type=place¢er=65.5833,22.15&distance=1000](https://developers.facebook.com/tools/explorer?method=GET&path=search%3Ftype%3Dplace%26center%3D65.5833%2C22.15%26distance%3D1000)

有关如何找到您的位置的更多信息，请参阅[此答案。](http://facebook.stackoverflow.com/questions/9579739/facebook-application-that-searches-for-nearest-place/9582039#9582039)

您所做的是查找与特定 Facebook 页面（在本例中为 Facebook 总部）关联的位置信息。

# css - CSS：在页面中心对齐手风琴

> ID：10751266
> 
> 赞同：0
> 
> 时间：2012-05-25T08:47:26.627
> 
> 标签：css, accordion

今天的问题：我如何垂直对齐页面中心的 *#@$¤<ç~ 手风琴（垂直和水平对齐）？这是[jsFiddle](http://jsfiddle.net/z6Zyj/ "jsFiddle")

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T08:59:02.720

尝试：

```
myUl = $("ul");
myUl.css('position', 'absolute');
myUl.css('top', $(window).height() / 2 - myUl.height() / 2);  
myUl.css('left', $(window).width() / 2 - myUl.width() / 2); 
```

结果：http: **[//jsfiddle.net/z6Zyj/2/](http://jsfiddle.net/z6Zyj/2/)**。

如果您想要仅使用 CSS 的解决方案，则必须执行以下操作：

```
ul {
    position: absolute;
    top: 50%;
    left: 50%;
    margin-top: -45px;
    margin-left: -295px;
} 
```

where`45px`大约是手风琴高度的`245px`一半，宽度的一半。

结果：http: **[//jsfiddle.net/z6Zyj/3/](http://jsfiddle.net/z6Zyj/3/)**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T21:50:24.383

我只是将整个手风琴 div 包裹在一个 1x1 的桌子上，然后将桌子居中对齐。使表格宽度与手风琴宽度相同。

# python - 如何在 vim 中映射组合键（同时按下按钮，而不是按顺序按下）？

> ID：10751270
> 
> 赞同：4
> 
> 时间：2012-05-25T08:47:44.507
> 
> 标签：python, vim, keyboard

如何在vim中映射组合键（同时按下按钮，而不是顺序按下）？假设我想将命令映射`:!python % <ENTER>`到按键`j`和`k`一起？

我试过了`:map j+k :!python % <ENTER>`，但这不起作用。`:map j-k :!python % <ENTER>``:map <j-k> :!python % <ENTER>`

另外，您建议映射哪些按钮组合？（请不要`F1`, `F2`, ... 不与`ctrl`or组合`shift`。）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-25T08:57:06.453

如果您可以接受使用脚本，那么有适合您需要的[琶音脚本。](http://www.vim.org/scripts/script.php?script_id=2425)

# javafx-2 - 访问 FXML 控制器类

> ID：10751271
> 
> 赞同：78
> 
> 时间：2012-05-25T08:47:50.373
> 
> 标签：javafx-2, fxml

我想随时与 FXML 控制器类进行通信，以从主应用程序或其他阶段更新屏幕上的信息。

这可能吗？我还没有找到任何方法来做到这一点。

静态函数可能是一种方式，但它们无法访问表单的控件。

有任何想法吗？

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2012-05-25T11:01:34.240

您可以从`FXMLLoader`

```
FXMLLoader fxmlLoader = new FXMLLoader();
Pane p = fxmlLoader.load(getClass().getResource("foo.fxml").openStream());
FooController fooController = (FooController) fxmlLoader.getController(); 
```

将它存储在您的主阶段并提供 getFooController() getter 方法。
从其他类或阶段，每次需要刷新加载的“foo.fxml”页面时，从其控制器询问它：

```
getFooController().updatePage(strData); 
```

updatePage() 可以是这样的：

```
// ...
@FXML private Label lblData;
// ...
public void updatePage(String data){
    lblData.setText(data);
}
// ... 
```

在 FooController 类中。
这样其他页面用户就不会担心页面的内部结构，比如什么和在哪里`Label lblData`。

另请查看[https://stackoverflow.com/a/10718683/682495](https://stackoverflow.com/a/10718683/682495)。在 JavaFX 2.2`FXMLLoader`中得到了改进。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2017-02-06T16:45:15.080

**只是为了帮助澄清公认的答案，并可能为其他 JavaFX 新手节省一些时间：**

对于 JavaFX FXML 应用程序，NetBeans 将在主类中自动生成您的启动方法，如下所示：

```
@Override
public void start(Stage stage) throws Exception {
    Parent root = FXMLLoader.load(getClass().getResource("FXMLDocument.fxml"));

    Scene scene = new Scene(root);

    stage.setScene(scene);
    stage.show();
} 
```

现在，要访问控制器类，我们需要做的就是将 FXMLLoader`load()`方法从静态实现更改为实例化实现，然后我们可以使用实例的方法来获取控制器，如下所示：

```
//Static global variable for the controller (where MyController is the name of your controller class
static MyController myControllerHandle;

@Override
public void start(Stage stage) throws Exception {
    //Set up instance instead of using static load() method
    FXMLLoader loader = new FXMLLoader(getClass().getResource("FXMLDocument.fxml"));
    Parent root = loader.load();

    //Now we have access to getController() through the instance... don't forget the type cast
    myControllerHandle = (MyController)loader.getController();

    Scene scene = new Scene(root);

    stage.setScene(scene);
    stage.show();
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-07-18T15:25:45.140

另一种解决方案是从你的控制器类中设置控制器，就像这样......

```
public class Controller implements javafx.fxml.Initializable {

    @Override
    public void initialize(URL location, ResourceBundle resources) {
        // Implementing the Initializable interface means that this method
        // will be called when the controller instance is created
        App.setController(this);
    }

} 
```

这是我更喜欢使用的解决方案，因为创建功能齐全的 FXMLLoader 实例的代码有些混乱，该实例可以正确处理本地资源等

```
@Override
public void start(Stage stage) throws Exception {
    Parent root = FXMLLoader.load(getClass().getResource("/sample.fxml"));
} 
```

相对

```
@Override
public void start(Stage stage) throws Exception {
    URL location = getClass().getResource("/sample.fxml");
    FXMLLoader loader = createFXMLLoader(location);
    Parent root = loader.load(location.openStream());
}

public FXMLLoader createFXMLLoader(URL location) {
    return new FXMLLoader(location, null, new JavaFXBuilderFactory(), null, Charset.forName(FXMLLoader.DEFAULT_CHARSET_NAME));
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-25T08:47:50.530

在从主屏幕加载对象时，传递我找到并有效的数据的一种方法是使用查找，然后将数据设置在一个不可见的标签内，稍后我可以从控制器类中检索该标签。像这样：

```
Parent root = FXMLLoader.load(me.getClass().getResource("Form.fxml"));
Label lblData = (Label) root.lookup("#lblData");
if (lblData!=null) lblData.setText(strData); 
```

这行得通，但必须有更好的方法。

# jsf - 重定向两个参数

> ID：10751278
> 
> 赞同：1
> 
> 时间：2012-05-25T08:48:14.490
> 
> 标签：jsf, geolocation, primefaces, params, forwarding

我试图模仿 BalusC 在这篇文章 [How to make a redirection in JSF 中的](https://stackoverflow.com/questions/4032825/how-to-make-a-redirection-in-jsf)回答， 但我不能依靠它来工作。任何提示都非常感谢！:) 当用户点击 index.xhtml 页面时，他/她将被重定向到另一个页面，带来地理定位参数纬度和经度，我将与其他帐户信息一起保存在我的 sessionBean 中。

所以我有我的 faces-config.xml 这样

```
 <?xml version="1.0" encoding="utf-8"?>

    <faces-config xmlns="http://java.sun.com/xml/ns/javaee"
                xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd"
                version="2.0">

    <!-- =========== FULL CONFIGURATION FILE ================================== -->

    <managed-bean> 
        <managed-bean-name>mapBean</managed-bean-name> 
        <managed-bean-class>mapp.MapBean</managed-bean-class> 
        <managed-bean-scope>session</managed-bean-scope> 
    </managed-bean> 

    <managed-bean> 
        <managed-bean-name>forward</managed-bean-name> 
        <managed-bean-class>mapp.ForwardBean</managed-bean-class> 
        <managed-bean-scope>request</managed-bean-scope> 
        <managed-property> 
            <property-name>latitude</property-name> 
            <value>#{param.latitude}</value> 
        </managed-property> 
        <managed-property> 
            <property-name>longitude</property-name> 
            <value>#{param.longitude}</value> 
        </managed-property> 
    </managed-bean> 

    <navigation-rule> 
        <navigation-case> 
            <from-outcome>map</from-outcome> 
            <to-view-id>/destination.xhtml</to-view-id> 
            <redirect /> 
        </navigation-case> 
    </navigation-rule> 

    </faces-config> 
```

我有我的 ForwardBean.java

```
 package mapp;

            import javax.faces.context.FacesContext;
            import javax.faces.event.PhaseEvent;

            /**
            * Reference BalusC
            */
            public class ForwardBean {
                private String latitude;
                private String longitude;
                public void navigate(PhaseEvent event){
                    FacesContext facesContext = FacesContext.getCurrentInstance();
                    //String outcome = latitude+":"+longitude;
                    String outcome = "map";
                    //TODO Add the paramvalue to the session user bject;
                    facesContext.getApplication().getNavigationHandler().handleNavigation    (facesContext, null, outcome); 
                }
            } 
```

我有我的 index.xhtml

```
 <?xml version='1.0' encoding='UTF-8' ?>
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml"    
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:f="http://java.sun.com/jsf/core" template="/layouts/ui.xhtml">
        <h:head>
        <f:verbatim>
        <script type="text/javascript">
        var map;
        var mapCenter
        var geocoder;

        function getLatLong() 
        {
                if (navigator.geolocation) 
                {
                        navigator.geolocation.getCurrentPosition( function (position) {  
                                // alert (position.coords.latitude);
                                //document.getElementById('latitude').value = 'value';
                                // document.getElementById('longitude').value = 'value';//(position.coords.longitude);
                                // document.getElementById('location').submit();
                                // for (key in position.coords){alert(key)}
                        }, 
                                function (error)
                                {
                                        switch(error.code) 
                                        {
                                        case error.TIMEOUT:
                                                        alert ('Timeout');
                                                        break;
                                                case error.POSITION_UNAVAILABLE:
                                                        alert ('Position unavailable');
                                                        break;
                                                case error.PERMISSION_DENIED:
                                                        alert ('Permission denied');
                                                        break;
                                                case error.UNKNOWN_ERROR:
                                                        alert ('Unknown error');
                                                        break;
                                        }
                                }
                        );
                } 
                else 
                {
                //alert("geolocation services are not supported by your browser.");
            }  
            }
        getLatLong();
            </script>
                </f:verbatim> 
            <title>Map location</title>
        </h:head>
        <h:body>
        <f:view  rendered="true"  afterPhase="#{forward.navigate}"  />  
        </h:body>
    </html> 
```

所以用户点击然后会被转发并带来lat和long的就是index。作为一个初学者，我只想在没有参数的情况下向前推进，但它不起作用。什么不见​​了？下面是我命名为destination.xhtml的测试目的地

```
 <?xml version='1.0' encoding='UTF-8' ?>
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml"
        xmlns:h="http://java.sun.com/jsf/html">
        <h:head>
            <title>Facelet Title</title>
        </h:head>
        <h:body>
            Hello from Destination
        </h:body>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T11:57:44.960

该答案针对 JSF 1.x。在 JSF 2.x 中，您最好使用`<f:event type="preRenderView">`.

```
<h:body>
    <f:event type="preRenderView" listener="#{forward.navigate}" />
</h:body> 
```

和

```
@ManagedBean
@RequestScoped
public class Forward {

    @ManagedProperty("#{param.latitude}")
    private String latitude;

    @ManagedProperty("#{param.longitude}")
    private String longitude;

    @ManagedProperty("#{mapBean}")
    private MapBean mapBean;

    public void navigate() {
        mapBean.setLatitude(latitude);
        mapBean.setLongitude(longitude);

        FacesContext context = FacesContext.getCurrentInstance();
        context.getApplication().getNavigationHandler().handleNavigation(context, null, "/destination.xhtml");
    }

    // ...
} 
```

注意，这里不需要`<managed-bean>`and `<navigation-case>`，`faces-config.xml`这只是 JSF 1.x 的强制要求。

# android - Android：在 WebView 中使用 fastScroll

> ID：10751288
> 
> 赞同：1
> 
> 时间：2012-05-25T08:49:00.453
> 
> 标签：android, webview, fastscroll

我正在编写一个 Android 应用程序，它在 WebView 控件中显示非常长的 HTML 页面（对此我无能为力，它会解析外部网站）。有什么方法可以让滚动更容易吗？我试过 fastScroll 但看起来 WebView 不支持它。有任何想法吗？

# sql - Create table 语句中的语法错误是什么？

> ID：10751289
> 
> 赞同：3
> 
> 时间：2012-05-25T08:49:00.597
> 
> 标签：sql, database, create-table

如果这太容易了，我很抱歉，但我很累，似乎无法自己解决这个问题。谁能看到这个命令有什么问题？

```
create table Users (
   user_id NUMBER(4) PRIMARY KEY ,
   username VARCHAR2(16) NOT NULL,
   password VARCHAR2(16) NOT NULL,
   first_name VARCHAR2(20) NOT NULL,
   last_name VARCHAR2(20) NUT NULL,
); 
```

**编辑：**谢谢大家。问题解决了。这是最后一个逗号和 NUT :P

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-25T08:50:13.453

做这个

```
create table Users (
    user_id numeric(4) PRIMARY KEY ,
    username VARCHAR(16) NOT NULL,
    password VARCHAR(16) NOT NULL,
    first_name VARCHAR(20) NOT NULL,
    last_name VARCHAR(20) NOT NULL
); 
```

我变了：

*   `number`到`numeric`
*   删除最后一个逗号
*   `varchar2`到`varchar`
*   `NUT`到`NOT`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T08:50:36.060

尝试删除最后一个逗号并更改`NUT`为`NULL`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-25T08:52:22.883

尝试

```
create table Users (
    user_id NUMBER PRIMARY KEY ,
    username VARCHAR2(16) NOT NULL,
    password VARCHAR2(16) NOT NULL,
    first_name VARCHAR2(20) NOT NULL,
    last_name VARCHAR2(20) NOT NULL
); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-25T08:51:28.420

我假设这是针对 SQL SERVER 的？

```
 CREATE TABLE Users ( 
        user_id INT PRIMARY KEY 
    ,   username VARCHAR(16) NOT NULL
    ,   [password] VARCHAR(16) NOT NULL
    ,   first_name VARCHAR(20) NOT NULL
    ,   last_name VARCHAR(20) NOT NULL 
    ) 
```

# html - 如何在轨道上用 div 包裹表格 trs？

> ID：10751294
> 
> 赞同：1
> 
> 时间：2012-05-25T08:49:29.017
> 
> 标签：html, ruby-on-rails, view, html-table, partial

**看法：** `<table><%= render(:partial => 'item') %></table>`

**部分：** `<div><tr><td>foo</td></tr></div>`

**我期待看到：** `<table><div><tr><td>foo</td></tr></div></table>`

**但我看到：** `<div></div> <table><tr><td>foo</td></tr></table>`

**为什么？以及如何实现我的期望？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T09:45:01.453

在 div 中包装 tds 和 trs 是不正确的。如果你想为 Capybara 添加一些 css 或标记一个特定的 td，你可以使用 td 中的 id 或 class**属性**。类似的东西`<td id="td_id" class="td_class">`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T09:40:39.817

Erb 不会生成您所期望的，因为那是不正确的 html。您不能将您的 trs 或 tds 包裹在 div 中。事实上，trs 只能是 table 元素的直接子元素或 tbody (html5) 的直接子元素。

你为什么要在 div 中包装 trs 呢？

# django - django.core.context_processors.request 没有被添加

> ID：10751298
> 
> 赞同：0
> 
> 时间：2012-05-25T08:49:51.190
> 
> 标签：django, request

这是在我的 settings.py 中定义的

```
TEMPLATE_CONTEXT_PROCESSOR = (
     "django.core.context_processors.request", # <- HERE
     "django.contrib.auth.context_processors.auth",
     "django.core.context_processors.debug",
     "django.core.context_processors.i18n",
     "django.core.context_processors.media",
     "django.core.context_processors.static",
     "django.core.context_processors.tz",
     "django.contrib.messages.context_processors.messages",
) 
```

这是在我的视图文件中：

```
def home(request):
     ctx = {}
     request.session['test'] = 1
     return render(request, 'home.html', ctx)
     # return render_to_response('home.html', ctx, 
     #                            context_instance=RequestContext(request)) 
```

如果我尝试从模板访问请求对象（例如`{{ request.session.test }}`，没有显示任何内容。Django 调试工具栏显示在 CONTEXT_PREPROCESSOR`django.core.context_processors.request`中未添加。任何帮助？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T08:56:11.493

你少了一个's'。您应该`TEMPLATE_CONTEXT_PROCESSORS`在设置文件中定义。

# c++ - 如何在运行时更改 QDialog 的模式？

> ID：10751302
> 
> 赞同：4
> 
> 时间：2012-05-25T08:50:00.450
> 
> 标签：c++, qt, qdialog, modality

我有一个 QDialog，我阅读了很多关于 show()、exec() 和 open() 的区别。不幸的是，我从未找到在运行时更改对话框模式的解决方案。我有一个应用程序，从那里开始我的 QDialog。我在这个对话框中有一个切换按钮，点击它 QDialog 应该改变模式，以便可以与应用程序交互 - 但这不应该一直发生 - 只是在选中切换按钮时。

有没有可能？我无法通过设置 setModal(true/false) 来解决问题，这只允许我以模态方式启动它，切换按钮并将其设置为非模态，但随后我无法返回模态。

这里有一些代码：

启动对话框：

从主窗口：

```
_dialog = new ToggleModalDialog(this, id, this);
_dialog->setWindowModality(Qt::ApplicationModal);
_dialog->open(); 
```

在 ToggleModalDialog 的切换插槽中

```
void ToggleModalDialog::changeModality(bool checkState)
{
    if(checkState)
    {
        this->setWindowModality(Qt::NonModal);
        ui->changeModalityButton->setChecked(true);
        this->setModal(false);
    }
    else
    {
        this->setWindowModality(Qt::ApplicationModal);
        ui->changeModalityButton->setChecked(true);
    } 
```

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-25T09:38:59.303

您可以使用`QDialog::setModal(bool)`或`setWindowModality(Qt::ApplicationModal)`。但是文档说明了`setWindowModality()`一些额外的内容，即..

```
Changing this property while the window is visible has no effect;
you must hide() the widget first, then show() it again. 
```

所以你的代码应该如下所示..

```
void ToggleModalDialog::changeModality(bool checkState)
{
    if(checkState)
    {
        this->setWindowModality(Qt::NonModal);
        ui->changeModalityButton->setChecked(true);
    }
    else
    {
        this->setWindowModality(Qt::ApplicationModal);
        ui->changeModalityButton->setChecked(true);
    }

    this->hide();
    this->show();
} 
```

# java - java.lang.UnsatisfiedLinkError: no rxtxSerial in java.library.path throw while loading gnu.io.RXTXCommDriver

> ID：10751304
> 
> 赞同：8
> 
> 时间：2012-05-25T08:50:12.107
> 
> 标签：java, fedora, rxtx

Fedora 现在使用（包已安装`Package rxtx-2.2-0.5.20100211.fc15.i686 already installed and latest version` ）。

我已经使用/尝试过：

```
# locate librxtxSerial
/home/sun/Downloads/rxtx-2.1-7-bins-r2/Linux/i686-unknown-linux-gnu/librxtxSerial.so
/home/sun/Downloads/rxtx-2.1-7-bins-r2/Linux/ia64-unkown-linux-gnu/librxtxSerial.so
/home/sun/Downloads/rxtx-2.1-7-bins-r2/Linux/x86_64-unknown-linux-gnu/librxtxSerial.so
/home/sun/Downloads/rxtx-2.1-7-bins-r2/Mac_OS_X/librxtxSerial.jnilib
/home/sun/Downloads/rxtx-2.1-7-bins-r2/Solaris/sparc-solaris/sparc32-sun-solaris2.8/librxtxSerial-2.1-7.so
/home/sun/Downloads/rxtx-2.1-7-bins-r2/Solaris/sparc-solaris/sparc32-sun-solaris2.8/librxtxSerial.so
/home/sun/Downloads/rxtx-2.1-7-bins-r2/Solaris/sparc-solaris/sparc64-sun-solaris2.8/librxtxSerial-2.1-7.so
/home/sun/Downloads/rxtx-2.1-7-bins-r2/Solaris/sparc-solaris/sparc64-sun-solaris2.8/librxtxSerial.so
/usr/lib/rxtx/librxtxSerial-2.2pre1.so
/usr/lib/rxtx/librxtxSerial.so 
```

然后使用：

```
-Djava.library.path=/usr/lib/rxtx/librxtxSerial.so -Djava.library.path=/usr/lib/jni 
```

但我仍然得到以下信息：

```
java.lang.UnsatisfiedLinkError: no rxtxSerial in java.library.path thrown while loading gnu.io.RXTXCommDriver
Exception in thread "main" java.lang.UnsatisfiedLinkError: no rxtxSerial in java.library.path
    at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1681)
    at java.lang.Runtime.loadLibrary0(Runtime.java:840)
    at java.lang.System.loadLibrary(System.java:1047)
    at gnu.io.CommPortIdentifier.<clinit>(CommPortIdentifier.java:83)
    at main.Tty.sendCommand1(Tty.java:212)
    at main.Tty.main(Tty.java:236) 
```

如何解决这个问题？

**跟进：**

错误的：

`-Djava.library.path=/usr/lib/rxtx -Djava.library.path=/usr/lib/jni`

正确的

`-Djava.library.path=/usr/lib/jni -Djava.library.path=/usr/lib/rxtx`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T09:23:44.180

我想问题是你有多个`-Djava.library.path`参数，第二个参数覆盖了第一个参数。该值还应该是包含库的文件夹的路径，不包括库名称。

在 linux 系统上，您应该能够使用冒号作为分隔符来组合两个路径参数：

```
-Djava.library.path=/usr/lib/rxtx:/usr/lib/jni 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-14T06:23:26.533

从存储库安装的 v4l4j 库有同样的问题。在 ununtu netbeans 项目中，无法从 IDE 启动，但作为 jar 可以正常工作。

通过将 *.so 文件放入`/usr/lib`非`/usr/lib/jni`文件夹来解决。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-28T05:04:32.903

项目 -> 属性 -> Java 构建路径 -> 找到您的 .jar。单击 + 打开 JAR 的属性。选择 Native library location 并编辑它以指向 RXTX 的共享库（.DLL、.so、.dylib）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T11:22:07.210

我们在linux上遇到了同样的问题。我们修复它的关键是

1.  使用冒号“:”分隔 java.library.path 元素
2.  使用正斜杠作为目录分隔符

在我们的例子中，我们使用了这样的相对路径

```
-Djava.library.path=jar/linux64:jars 
```

该路径是相对于启动路径的。例如，当从 netbeans 运行时，启动目录就是项目目录。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-03-30T21:39:10.757

```
Copy RXTXcomm.jar ---> <JAVA_HOME>\jre\lib\ext 
```

`Copy rxtxSerial.dll ---> <JAVA_HOME>\jre\bin`

`Copy rxtxParallel.dll ---> <JAVA_HOME>\jre\bin`

# asp.net-mvc - ASP.NET MVC4 路由问题

> ID：10751307
> 
> 赞同：7
> 
> 时间：2012-05-25T08:50:25.100
> 
> 标签：asp.net-mvc, asp.net-mvc-routing, asp.net-mvc-4

我已经搜索了 Stack 很长时间，阅读了 MSDN 文档并使用了 Bing，但看不出为什么这不起作用！我在下面有相关代码+路线。调用的路由`Browse`工作得很好，但路由的`productCode`参数`Details`总是等于没有。如果我制作任何模组，我会不断收到“找不到资源”404 页面。

```
' Lives in controller called 'Details'
' Usage: site.com/details/abc123
Function Index(productCode As String) As ActionResult

' Lives in controller called 'Browse'    
' Usage: site.com/browse/scifi/2
Function Index(genre As String, Optional page As Integer = 1) As ActionResult 
```

路线是：

```
routes.MapRoute( _
        "Browse", _
        "{controller}/{genre}/{page}", _
        New With {.controller = "Browse", .action = "Index", .id = UrlParameter.Optional, .page = UrlParameter.Optional}
    )

    routes.MapRoute( _
        "Details", _
        "details/{productCode}", _
        New With {.controller = "Details", .action = "Info", .productCode = UrlParameter.Optional}
    ) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-25T09:44:20.490

定义路线时，顺序确实很重要。

当您要求时，`site.com/details/abc123`我认为它与您的第一条路线相匹配。

你会得到

`controller = "details"`

`action = "Index"`

`genre = "abc123"`

这就是您的 productCode 为空的原因。

切换这两个`route.MapRoute`语句，它应该可以解决您的问题。

您的第二条路线确实将操作设置为`info`而不是`index`，但我假设这是一个错字？

# javascript - 在javascript中创建一个插入超链接的工具

> ID：10751310
> 
> 赞同：-2
> 
> 时间：2012-05-25T08:50:29.137
> 
> 标签：javascript, href

我需要在 javascript 中创建一个工具以简化“

我需要的是这个：

1）单击按钮“创建新链接”>出现一个弹出窗口，其中包含如下文本输入：

> “请命名您要创建的链接（例如：链接到 Google）”

2）点击 OK 使第二个弹出窗口出现第二个输入：

> “请插入您要链接的网址（例如：www.google.fr）”

我很确定这种 javascript 已经存在很多年了，但我找不到这种代码的来源。有人得到答案了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T08:55:23.643

```
function createNewLink(){
  var title = prmpt('please name the link you want to create (e.g : Link to Google)');
  var href = prompt('please insert the URL you want to link (e.g : www.google.fr) ');
  document.write('<a href="'+href+'">'+title+'</a>');
} 
```

# android - 定义坐标来定位 textView

> ID：10751313
> 
> 赞同：1
> 
> 时间：2012-05-25T08:50:44.410
> 
> 标签：android, textview, position, padding, coordinate

我有一个`RelativeLayout`inside `ScrollView`，我正在尝试移动 textView，将其向下或向右移动，但我找不到路。

我试过：

```
valueTV.setPadding(200, 500, 40, 100); 
```

但是 textView 并没有改变它的位置

粘贴我的代码：

```
 RelativeLayout layout = (RelativeLayout) findViewById(R.id.layout);
        TextView valueTV = new TextView(this);
        valueTV.setText("try txtVw");
        valueTV.setBackgroundColor(Color.CYAN);
        valueTV.setLayoutParams(new LayoutParams( 30,20));
//      valueTV.setPadding(200, 500, 40, 100); //It doesn't work//
        layout.addView(valueTV); 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T09:03:31.410

我想它会对你有所帮助。尝试这个。

```
TextView tv;
RelativeLayout.LayoutParams lp = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT,
                                                                 LayoutParams.WRAP_CONTENT);
lp.rightMargin = //RIGHTMARGIN;
lp.leftMargin = //LEFT MARGIN;
lp.topMargin = // TOP MARGIN;
lp.bottomMargin =  // BOTTOM MARGIN;
layout.addView(tv, lp); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T09:01:47.980

您必须使用 res 中的 XMl 文件进行设计，与您使用 java 代码进行设计相比，它的设计更加容易和舒适。如果您使用的是 java 代码，请确保输入正确的 coddinates 以及 tht textview 的大小是适当的

# sql-server-2008 - 视图性能不佳

> ID：10751314
> 
> 赞同：3
> 
> 时间：2012-05-25T08:50:51.730
> 
> 标签：sql-server-2008

总体挑战：

我们每天为多个“市场”添加数次商品。

所以

*   在 12:00 我们为市场“x”添加 2000 个项目
*   在 12:30 我们为市场“y”添加 3000 个项目
*   在 14:00 我们再次为市场“x”添加 2500 个项目

每天进行几次。

在任何给定时间，我们都需要每天为每个市场提取最新项目

上述插入的期望结果是

市场“x”的 2500 个项目

市场“y”的 3000 个项目

一批数据的每次添加都有一个 ExecutionTime 时间戳，该时间戳唯一地定义了该批。因此，市场“x”在 12:00 的 2000 个项目将具有相同的 ExecutionTime 值，而市场“x”在 14:00 的 2500 个项目将具有另一个 ExecutionTime 值。

我们为我们创建了一个视图

```
SELECT     
    *
FROM         
    dbo.Items AS s
WHERE     
    (ExecutionTime =
       (SELECT     MAX(ExecutionTime) AS Expr1
        FROM          dbo.Items AS s2
        WHERE      (SiteAlias = s.SiteAlias) AND (Market = s.Market) 
          AND (LocalTimestamp >= 
            DATEADD(dd, DATEDIFF(dd, 0, s.LocalTimestamp), 0)) 
          AND 
              (LocalTimestamp < 
            DATEADD(dd, DATEDIFF(dd, 0, s.LocalTimestamp), 1)))) 
```

我们这样查询视图：

```
SELECT *
FROM [ExportedData]
WHERE 
  SiteAlias = 'MyAlias'
  AND LocalTimeStamp between '2012-05-14 00:00' AND '2012-05-18 00:00'
ORDER BY [Timestamp] 
```

我们在执行时间字段上定义了表 ITems 上的索引，并在 sitealias、marked 和 localtimestamp 上定义了组合索引。

问题：性能很差。查询大约 150000 行需要几分钟时间。

我们应该做的视图有什么明显的改进吗？我已经准备好提供查询计划等 - 以防我们在创建视图时没有简单的搞砸。

有趣的是，如果我们在 SiteAlias 上使用“LIKE”而不是“=”来查询视图，它会加快大约 90% 的执行速度——这是我没有预料到的。

谢谢，

:o)

/杰斯珀哥本哈根

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T09:27:03.300

乍一看，您的 T-SQL 和表结构对我来说还不错 - 所以这只是暗中的狂野 :-)

由于您使用的是 SQL Server 2008，因此我可能会尝试使用 CTE（公用表表达式）并转换`LocalTimestamp`为数据类型。`DATE`

有了这些，您可以让您的视图类似于：

```
CREATE VIEW dbo.YourView
AS
   WITH DataPerDay AS
   (
      SELECT 
         *,
         RowNum = ROW_NUMBER() OVER (PARTITION BY CAST(LocalTimestamp AS DATE) 
                                     ORDER BY ExecutionTime DESC)
      FROM         
         dbo.Items AS s
   )
   SELECT *
   FROM DataPerDay 
   WHERE RowNum = 1 
```

基本上，CTE 按仅日期部分“分区”您的数据，`LocalTimestamp`然后将序列号分配给当天的所有条目，从 1 开始 - 所以每天的“最新”或“最近”条目`RowNum = 1`就是我在从该 CTE 中选择时使用。

这绕过了`SELECT(MAX) ....`子查询，在我个人的观察中似乎要快一点——但这在很大程度上取决于你的表和数据——所以你自己试试看是否有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T09:18:00.863

> *有趣的是，如果我们在 SiteAlias 上使用“LIKE”而不是“=”来查询视图，它会加快大约 90% 的执行速度——这是我没有预料到的。*

嗯，确实很奇怪。这可能是潜在问题的结果。

查询是否一直很慢或性能问题是否在一段时间后开始。您可以在查询末尾添加 OPTION (RECOMPILE) 以便我们可以排除“参数嗅探”吗？

```
SELECT *
FROM [ExportedData]
WHERE 
  SiteAlias = 'MyAlias'
  AND LocalTimeStamp between '2012-05-14 00:00' AND '2012-05-18 00:00'
ORDER BY [Timestamp]
OPTION (RECOMPILE) 
```

您是说该表每天添加几次。SQL Server 通常在使统计信息保持最新方面做得很好，但优化器可能使用错误/数据不足的统计信息

*   是否为此数据库设置了 AUTO_CREATE_STATISTICS？
*   您能否隔离一个执行缓慢的查询实例并在刷新所有统计信息后让它运行？

最好看到类似的执行计划和查询的 = 版本。

**更新 1**

你给出了估计的执行计划的截图。我们需要查看*实际*（包括估计）。此外，屏幕截图的第二个链接不起作用。

您能否使用 xml 计划更新问题，而不是将它们放入评论中。这对新人看问题也更有帮助。

我不明白“=”版本的执行计划说，当估计的行数为 1 时，100% 进入键查找。这没有意义

实际执行的 xml 计划肯定会有所帮助。您可以查看实际行数和估计行数之间的差异，因为基数可能会关闭。在这种情况下使用临时表可能会有所帮助，因为统计信息是准确的，并且您可以在其上放置索引

```
SELECT *
into #tempExportedData
FROM [ExportedData]

SELECT *
FROM #tempExportedData
WHERE 
  SiteAlias = 'MyAlias'
  AND LocalTimeStamp between '2012-05-14 00:00' AND '2012-05-18 00:00'
ORDER BY [Timestamp] 
```

# java - 使用主线程读取文件，使用多线程和 ExecutorService 处理数据

> ID：10751315
> 
> 赞同：0
> 
> 时间：2012-05-25T08:50:51.853
> 
> 标签：java, multithreading

我需要使用多线程读取批量数据文件并处理数据（如数据验证、跟踪验证失败和插入数据库等）。我想使用主线程从文件中读取数据并使用`ExecutorService`.

1.  这是正确的方法吗？如果是，我该怎么做？

2.  此外，一旦对数据库进行验证和插入，我需要跟踪每条记录输出。如何跟踪每条记录的输出？可以把它放在一个公共变量上并增加故障记录数据的数量吗？

3.  我还需要跟踪有多少记录顺序失败？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T09:31:39.290

我建议将文件拆分为虚拟段，并允许您的执行者选择和处理这些段。在主线程中读取文件最终会造成瓶颈。允许每个线程分别并行读取其段。请参阅以下帖子[如何在Java中实现对映射到内存的文件的并发读取？](https://stackoverflow.com/questions/10579808/how-to-implement-concurrent-read-to-a-file-mapped-to-memory-in-java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T09:23:32.930

是的，它是正确的，但是如果处理需要大量时间（与读取文件相比），处理片段是独立的并且您有多个内核，您将会得到改进。将您的数据读取到任何容器（如果它适合 RAM）并使用任何 ExecService 教程，如下所示：[http ://tutorials.jenkov.com/java-util-concurrent/executorservice.html](http://tutorials.jenkov.com/java-util-concurrent/executorservice.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T09:24:01.623

你的想法是正确的IMO，我会做这样的事情：

```
while ((line = filereader.readLine()) != null) {
    Mycallable mycallable = new Mycallable(line);
    executor.submit(mycallable);
            } 
```

# radio-button - 如何以编程方式检查单选按钮？

> ID：10751319
> 
> 赞同：0
> 
> 时间：2012-05-25T08:51:12.137
> 
> 标签：radio-button, swt

我设置了一个带有 2 个单选按钮的对话框，并使用布尔值以编程方式检查它们。

```
 // Not working day radio button
    final Button notWorkingDayButton = new Button(mSelectedDayGroup, SWT.RADIO);
    notWorkingDayButton.setSelection(isWorkingDay);
    notWorkingDayButton.setText("Jour chômé"+(isHoliday ? deft : ""));

    // Working day radio button
    final Button workingDayButton = new Button(mSelectedDayGroup, SWT.RADIO);
    workingDayButton.setText("Jour travaillé"+(isHoliday ? "" : deft));
    workingDayButton.setSelection(!isWorkingDay); 
```

正如你所看到的，他们使用相同的`boolean`，所以他们总是有相反的状态。

下面是它的样子 if `isWorkingDay`is `true`：![isWorkingDay=真](../Images/9ab2d8aa24b5b8d9a90b5ab4d28a3d11.png)

下面是它的样子 if `isWorkingDay`is `false`：![isWorkingDay=false](../Images/42c712909386f739046db0afc691571c.png)

如您所见，第一个收音机保持启用状态。我希望第一个完全禁用，第二个完全启用`isWorkingDay = false`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T09:05:42.797

I don't have a Mac but this looks like the keyboard focus to me. There is no "somewhat enabled" state for radio buttons.

# macos - 如何访问launchd plist中的环境变量

> ID：10751321
> 
> 赞同：8
> 
> 时间：2012-05-25T08:51:16.970
> 
> 标签：macos, launchd

我有一个已启动的每用户代理。在它的.plist 中，我想使用`$HOME`环境变量。

可能吗？

（它是“程序”键，我想将其定义为“$HOME/bin/myscript”）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T20:00:05.913

launchd 不会对其 .plist 中的值执行任何替换，因此无法以您尝试执行的形式执行此操作。您可以做的是将要运行的命令交给 shell，让它*执行*变量替换并运行命令。例如，你可以`Program`用这个替换那个键：

```
<key>ProgramArguments</key>
<array>
    <string>/bin/sh</string>
    <string>-c</string>
    <string>exec $HOME/tmp/myscript</string>
</array> 
```

（请注意，`exec`前缀并不是真正需要的，它只是一个小的优化。它使 shell 用脚本替换自己，而不是将脚本作为子进程启动，然后等待它完成。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-24T08:50:07.897

EnableGlobbing 为 ProgramArguments（但不是 Program）启用波浪号和通配符扩展。

```
<key>EnableGlobbing</key>
<true/>
<key>ProgramArguments</key>
<array>
    <string>~/bin/myscript</string>
</array> 
```

ProgramArguments 只能是字符串数组，而不仅仅是字符串。默认情况下，波浪号扩展也适用于 WatchPaths。

# java - 如何使用 GregorianCalendar 从年份和年份计算 UTC？

> ID：10751323
> 
> 赞同：0
> 
> 时间：2012-05-25T08:51:30.233
> 
> 标签：java, datetime, gregorian-calendar

基本上我得到了一些年份，年份值。我想根据这些值以分钟为单位计算 UTC。

我尝试使用 GregorianCalendar，但我无法让它工作。如果我可以设置 YEAR 和 DAY_OF_YEAR 字段，然后填写其他字段，那就太好了。

或者有可以提供帮助的安迪图书馆吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T10:07:27.577

那是你要的吗？

```
GregorianCalendar gc=new GregorianCalendar();
gc.set(GregorianCalendar.YEAR, 2012);
gc.set(GregorianCalendar.DAY_OF_YEAR, 32);
System.out.println(gc.getTimeInMillis()/1000/60); // /1000 -> in seconds; /60-> in minutes

System.out.println(gc.get(GregorianCalendar.DATE));
System.out.println(gc.get(GregorianCalendar.MONTH));//months are indexed from 0
System.out.println(gc.get(GregorianCalendar.YEAR)); 
```

# r - World Map - Plotting Circles，与 No of 相关的圆圈大小

> ID：10751326
> 
> 赞同：4
> 
> 时间：2012-05-25T08:52:11.213
> 
> 标签：r, world-map

我希望能够在与文档数量相关的图表上创建一个带有圆圈的世界地图。

这是我尝试使用 mapBubbles 来完成的，但是在绘制图表时出现了问题。

我拥有的数据文件如下：

```
ISO3V10   Country   No of Documents    Lat  Lon
ARG     Argentina   41          -64 -34
AUS     Australia   224         133 -27
CAN     Canada      426         -95 60
IRL     Ireland 68           -8 53
ITA     Italy             583           12.8333 42.8333
NLD     Netherlands 327          5.75   52.5
NZL     New Zealand 26           174    -41
ESP     Spain             325            -4  40
GBR     United Kingdom  2849             -2 54
USA     United States   3162            -97 38 
```

我写的代码如下：

```
# Thanks to Andrie for the reproducible code and Paolo for the suggested edit

zz <-"ISO3V10   Country No.of.Documents Lat  Lon
ARG Argentina   41  -64 -34
AUS Australia   224 133 -27
CAN Canada  426 -95 60
IRL Ireland 68  -8  53
ITA Italy   583 12.8333 42.8333
NLD Netherlands 327 5.75    52.5
NZL 'New Zealand' 26  174 -41
ESP Spain   325 -4  40
GBR 'United Kingdom'  2849    -2  54
USA 'United States'   3162    -97 38
"

dF2 <- read.table(textConnection(zz), header = TRUE)

# dF2 <- read.delim(file="C:\\Users\\js207963\\Documents\\noofpublications_AllUpdated.txt", header = TRUE, sep = "\t")
 dF2[]
 par(mai=c(0,0,0.2,0),xaxs="i",yaxs="i")
 mapBubbles(dF2=getMap(), nameZSize="No.of.Documents", nameZColour="Country",oceanCol="lightblue", landCol="wheat", addLegend=FALSE 
```

所以问题是你能帮我修复代码以正确绘制数据吗？

干杯，杰斯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T09:25:05.737

您可以使用以下方法绘制它`ggplot`：

![在此处输入图像描述](../Images/8a6b82862018c27f6bc1dd9b888650a9.png)

重新创建您的数据：

```
dat <- read.table(text="
ISO3V10   Country   'No of Documents'    Lat  Lon
ARG     Argentina   41          -64 -34
AUS     Australia   224         133 -27
CAN     Canada      426         -95 60
IRL     Ireland 68           -8 53
ITA     Italy             583           12.8333 42.8333
NLD     Netherlands 327          5.75   52.5
NZL     'New Zealand' 26           174    -41
ESP     Spain             325            -4  40
GBR     'United Kingdom'  2849             -2 54
USA     'United States'   3162            -97 38
", header=TRUE) 
```

加载包和情节：

```
library(ggplot2)
library(maps)

mdat <- map_data('world')

str(mdat)
ggplot() + 
  geom_polygon(dat=mdat, aes(long, lat, group=group), fill="grey50") +
  geom_point(data=dat, 
             aes(x=Lat, y=Lon, map_id=Country, size=`No.of.Documents`), col="red") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T09:13:44.597

您需要向函数传递更多信息`mapBubbles`，因为您的数据框不是 SpatialPolygonsDataFrame。以下应该有效（您现在`Lat`并且`Lon`可能被贴错标签）：

```
 mapBubbles(dF=dF2, nameZSize="No.of.Documents",
  nameZColour="Country",oceanCol="lightblue", landCol="wheat",
  addLegend=FALSE, nameX = "Lat", nameY = "Lon") 
```

上面，`nameX`并被`nameY`传递给函数以指示在哪里绘制气泡。此外，将数据框传递`dF2`给参数`dF`，而不是调用`getMap()`.

**编辑：**

我也喜欢 Andrie 的回答`ggplot2`（除其他外，空间比下图中的空间使用得更好），但是由于您专门使用 发布了其他问题`rworldmap`，我认为坚持使用该软件包是合适的。

![带气泡的世界地图](../Images/bcf43a8bcc9b323ba1db57f98757a33d.png)

# android - 在android中发送推送通知

> ID：10751327
> 
> 赞同：4
> 
> 时间：2012-05-25T08:52:13.943
> 
> 标签：android, push-notification, android-c2dm, android-notifications

我想知道一些关于推送通知的事情。我正在制作一个android应用程序，在这个应用程序中，第一个用户注册到这个android应用程序和远程数据库上的数据存储，远程数据库存储在SQL SERVER上，然后他登录。我的问题是我想向我的 android 应用程序用户发送通知。如何发送通知？所以，请给我一个很好的例子或示例链接。

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-11T12:19:54.310

您可以使用 Google 云消息传递。[这](http://developer.android.com/google/gcm/index.html)是此主题的 Android 文档。概述：

> Google Cloud Messaging for Android (GCM) 是一项服务，可让您将数据从服务器发送到用户的 Android 设备，并从同一连接上的设备接收消息。GCM 服务处理消息排队和传递到目标设备上运行的目标 Android 应用程序的所有方面。无论您的消息传递需求有多大，GCM 都是完全免费的，并且没有配额。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-11T12:28:07.173

您应该使用 Google 云消息传递来满足此需求。云消息传递是高效的，因为它不需要一直运行任何后台服务，节省电池和 RAM。

[谷歌云消息](http://javapapers.com/android/google-cloud-messaging-gcm-for-android-and-push-notifications/)

# python - XLRDError：预期的 BOF 记录；找到 0x4b50

> ID：10751330
> 
> 赞同：7
> 
> 时间：2012-05-25T08:52:29.927
> 
> 标签：python, excel

我不认为代码有什么问题。你能帮助我吗？我需要帮助。谢谢！

```
from xlrd import open_workbook

wb = open_workbook('/pdf-ex/exc.xlsx','rb')
for s in wb.sheets():
    print 'Sheet:',s.name
    for row in range(s.nrows):
        values=[]
        for col in range(s.ncols):
            values.append(s.cell(row,col).value)
        print ",".join(values)
    print 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T02:19:42.287

我有同样的问题并通过升级到版本 0.8.0 解决了它。

在该版本之前，不支持 xlsx/xlsm。

发布公告： http: [//mail.python.org/pipermail/python-list/2012-August/627757.html](http://mail.python.org/pipermail/python-list/2012-August/627757.html)

最新版本：[https ://pypi.python.org/pypi/xlrd/](https://pypi.python.org/pypi/xlrd/)

# visual-studio-2010 - 在 Visual Studio 2008 中按 F1 时如何在默认浏览器中搜索 MSDN？

> ID：10751331
> 
> 赞同：4
> 
> 时间：2012-05-25T08:52:33.470
> 
> 标签：visual-studio-2010, visual-studio, visual-studio-2008

在 2010 年，如果我按 F1，VS 将打开光标所在对象的 MSDN 帮助页面。它甚至在查询字符串中传递目标框架，以便您获得正确的文档页面。我希望在 2008 年出现这种行为，但我似乎不知道该怎么做。

现在它将在集成查看器或外部查看器中打开帮助页面（取决于设置*选项→环境→帮助→显示帮助使用*，但两者都很丑陋并且使用一些非常旧的CSS样式。我只是希望它打开在我的默认浏览器中。

URL 就在查看器中，所以我知道只需在宏中提取它并打开默认浏览器，或者找到一些非常隐藏的设置，让 VS 自己完成。

[这个问题](https://stackoverflow.com/questions/3930962/customization-for-visual-studio-2008-that-opens-msdn-help-in-a-browser-when-hitt)很相似，但从来没有得到好的答案，我认为[这些答案](https://stackoverflow.com/questions/1334212/load-search-url-in-browser-from-visual-studio)不合适，因为我想直接转到正确的 MSDN 页面，而不是在 Google/Bing/whatever 中搜索对象名称。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T19:05:51.457

第一个链接有一个很好的建议。删除 F1 的键绑定，编写一个宏，然后将宏映射到 F1。第二个链接有另一个宏示例。

[http://s344.codeinspot.com/q/1309159](http://s344.codeinspot.com/q/1309159)

[从 Visual Studio 在浏览器中加载搜索 URL](https://stackoverflow.com/questions/1334212/load-search-url-in-browser-from-visual-studio)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-22T16:35:47.683

对于 Visual Studio 2013，我为此使用了外部工具。单击工具/外部/添加。对于 URL，您可以使用它

```
https://social.msdn.microsoft.com/Search/en-US?query=$(CurText) 
```

![在此处输入图像描述](../Images/8355a64fa27f2621492721db04d4be11.png)

然后，您可以将密钥绑定到外部工具。

# jquery - 如何在 jQuery 可调整大小的插件中更改鼠标光标？

> ID：10751333
> 
> 赞同：1
> 
> 时间：2012-05-25T08:52:34.957
> 
> 标签：jquery, cursor, resizable

当您使用 jQuery 可调整大小插件时，鼠标光标样式可以为“e-resize”（2 个相反方向的箭头）。但是，我们怎样才能改变它呢？我试过这个：

```
$("#right-line").hover(function() {
    $(this).css("cursor", "crosshair");
}); 
```

但是，它不起作用，即光标仍然是“e-resize”。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-10-01T15:13:07.937

要覆盖 Jquery 可调整大小的光标，您可以这样做：

```
$(selector).resizable({
        handles: "e",
        create: function( event, ui ) {
            // Prefers an another cursor with two arrows
            $(".ui-resizable-e").css("cursor","ew-resize");
        }
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T08:56:30.447

内联 CSS 可能被 jquery 样式表覆盖。如果您在本地加载它，那么您可以编辑`jquery.ui.resizable.css`，或者如果您使用更多的 UI 小部件，那么主要`jquery-ui.css`并编辑`cursor`属性。

您要编辑的元素`.ui-resizable-se`是第 202 行`jquery-ui.css`

# c# - 尝试将字符串解析为属性中的日期时间（C#）

> ID：10751334
> 
> 赞同：0
> 
> 时间：2012-05-25T08:52:38.187
> 
> 标签：c#, datetime, properties

我试图解析一个 DateTime 对象的字符串。没问题 :-) 当我尝试直接在属性集方法中执行此操作时，我的问题来了。

我以为我可以这样做：

```
 private DateTime _fromDate;
        public DateTime FromDate
        {
            get { return _fromDate; }
            set { _fromDate = DateTime.Parse(value); }
        } 
```

但我得到这个错误：

“参数 1：无法从 'System.DateTime' 转换为 'string'”

有谁知道如何做到这一点，如果它可以做到吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T08:55:06.563

`_fromDate`是类型`DateTime`。

`DateTime.Parse`接受 a`string`并返回 a `DateTime`。

您正在传入`value` *which is already* a`DateTime`并且没有 to 的隐式`DateTime`转换`string`。

如果你想直接将 a 解析`string`成 a`DateTime`那么你需要一个新的属性，它是一个`string`类型：

```
private DateTime _fromDate;
public string FromDate
{
    get { return _fromDate.ToString(); }
    set { _fromDate = DateTime.Parse(value); }
} 
```

尽管您需要 a) 对字符串的格式进行一些控制，并且 b) 对输入字符串进行一些安全检查，以确保它不会在不是有效日期时引发异常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T08:55:22.397

该属性的类型为`DateTime`; 您根本无法将字符串作为值传递，即使您打算将其转换为`DateTime`自己。

用更专业的术语来说，这个属性会导致你的类有一个方法

```
public DateTime get_FromDate(DateTime value)
{
    // your property setter code here
} 
```

该方法接受一个`DateTime`参数，没有办法改变它。

如果您想提供一种方便的方法将字符串转换为 a`DateTime`给类的用户（可能是使用非平​​凡处理的用户），您可以将转换公开为类的方法。用户每次都必须明确调用它，但这就是生活。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-25T08:55:40.930

您已经将参数作为 a 获取`DateTime`，因此无需解析它。

如果您真的坚持要解析它，请将其转换为字符串

```
set { _fromDate = DateTime.Parse(value.ToString()); } 
```

但是如果你这样做，你会得到一个日期时间，将它转换为一个字符串，然后将它转换回一个日期时间，这是......好吧，不是很出色:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-11-29T03:06:49.683

不要打败一个 4 年的死马，但我偶然发现了这个线程，其思考过程与 OP 相似，并想用这个主题总结我的个人发现。最终，如果要设置现有对象的 DateTime 属性，则必须提前解析它（如先前的答案所示）。但是，我实际上关心的是初始化对象，您可以**传递**一个文本值以在构造函数中解析。

```
public class SomeClass
{
    public SomeClass(String date)
    {
        DateTime tmpDate;
        DateTime.TryParse(date, out tmpDate);
        if (tmpDate != DateTime.Minvalue)
        {
            FromDate = tmpDate;
        }
        else
        {
            throw new ArgumentError(("Unable to parse the input string " + date));
        } 
```

在我的特殊情况下，我希望我的 DateTime 属性可以为空，因此我必须创建一个方法（[从此处提取](https://stackoverflow.com/questions/192121/how-do-i-use-datetime-tryparse-with-a-nullabledatetime "如何将 DateTime.TryParse 与 Nullable<DateTime> 一起使用？")）来处理解析（这将用于在外部以及在构造函数中解析数据。例如：

```
public class SomeClass
{
    public SomeClass(String date)
    {
        DateTime? tmpDate = this.TryParse(date);
        if (tmpDate.hasValue)
        {
            FromDate = tmpDate;
        }
        else
        {
            throw new ArgumentError(("Unable to parse the input string " + date));
        }
    }
    public DateTime? FromDate { get; set;}

    public DateTime? TryParse(string text)
    {
        DateTime date;
        if (DateTime.TryParse(text, out date))
        {
            return date;
        }
        else
        {
            return null;
        }
    } 
```

显然你会想要创建额外的构造函数，并且可能有一个匹配的类型构造函数作为你的默认值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-25T09:00:28.090

你会得到编译器错误，因为`DateTime.Parse(string s)`它接受了一个`string`输入参数，但`value`它的类型是`DateTime`，它不能被隐式转换为`string`.

您不需要解析该值，因为它已经存在`DateTime`，因此您可以将代码更改为`set { _fromDate = value; }`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-25T09:03:41.443

简单使用

```
private DateTime _fromDate;
public DateTime FromDate
    {
        get { return _fromDate; }
        set { _fromDate = value; }
    } 
```

`value`将是 的，`DateTime`因为财产是 的`DateTime`。当有人分配此属性`DateTime object`时，它将进入`value`。在 Set 中，该值将分配给`_fromDate`

# c++ - 如何静态编译和链接 Qt 到 MySQL

> ID：10751336
> 
> 赞同：2
> 
> 时间：2012-05-25T08:52:44.037
> 
> 标签：c++, mysql, qt, static

我在这里有以下问题。我正在用 Qt 编写一个多平台（Linux/Windows）应用程序。

问题在于 Linux：我静态编译 Qt 以摆脱 Qt 库（并且为了拥有一个大的可执行文件），以下是我的配置行：

```
./configure -qt-sql-mysql -static -prefix ~/qt-4.6.3-static -platform linux-g++ -I /usr/include/mysql -opensource -webkit 
```

还有一些不那么重要的参数。我使用qt 4.6.3，因为4.7不支持webkit的静态链接，webkit用于应用程序的帮助系统。现在，应用程序也在使用 MySql，我想让 QT 暂时处理 mysql 的东西，所以我告诉他将它链接到 (qt-sql-mysql)。当我分发应用程序时，主要问题出现了：

现在我在 CentOS 6 上开发，显然 CentOS 6 带有他自己的 MySQL 库 (16)，当我将应用程序移动到具有 18 版 mysql 库的 Linux Mint 13 盒子时，应用程序不再启动，只是以下内容熟悉的错误：

```
./ddm: error while loading shared libraries: libmysqlclient_r.so.16: cannot open shared object file 
```

（是的，我已经安装了 libmysqlclient-dev）

所以现在我的困境是：我希望尽可能多的 Linux 用户可以使用该应用程序，而不必为每个平台单独构建安装包。

问题来了：你知道构建 Qt 以使其静态链接到 libmysql 的方法吗？我想摆脱这条线：

```
$ ldd ./ddm | grep mysql
    libmysqlclient_r.so.16 => not found 
```

来自应用程序的动态依赖项。

或者，只要我不需要为所有平台制作单独的安装包，任何其​​他建议都是受欢迎的。

谢谢

# c# - Linq to XML spotify 解析

> ID：10751337
> 
> 赞同：1
> 
> 时间：2012-05-25T08:52:44.770
> 
> 标签：c#, linq-to-xml

我正在尝试从 spotify 读取以下 xml 文件：[http ://ws.spotify.com/search/1/track?q=sail+awolnation](http://ws.spotify.com/search/1/track?q=sail+awolnation)

我想获取集合中的所有曲目，我一直在尝试使用 Linq to XML 但到目前为止没有成功，我发现的所有示例都以与我完全相同的方式进行操作，但由于某种原因它没有填充我的清单，我一无所知。

这是我目前正在使用的代码：

```
 XDocument xdoc = XDocument.Parse(xml);
        XNamespace ns = XNamespace.Get("http://www.spotify.com/ns/music/1");

        var tracks =  from track in xdoc.Descendants(ns + "track")
                    select new
                    {
                        Name = track.Element(ns + "name").Value,
                    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T09:10:29.787

我认为您的命名空间有问题。

我会亲自去获取这样的命名空间

```
XDocument xDoc = XDocument.Load("http://ws.spotify.com/search/1/track?q=sail+awolnation");
XNamespace ns = xDoc.Document.Root.GetDefaultNamespace(); 
```

这确保了如果命名空间确实发生了变化（通过 Spotify），那么您的程序将自动处理它，您不必更改代码并重新编译以使其与新代码一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T09:17:08.240

```
WebClient wb = new WebClient();
var xdoc = XDocument.Parse(wb.DownloadString("http://ws.spotify.com/search/1/track?q=sail+awolnation"));
XNamespace ns = XNamespace.Get("http://www.spotify.com/ns/music/1");
var tracks = from track in xdoc.Root.Elements(ns + "track") 
     select 
       new 
        { 
           Name = track.Element(ns + "name").Value 
        };
string s = ""; 
```

这段代码对我来说很好用

# grails - Groovy/Grails 将 NaN 字符串自动转换为双字段

> ID：10751338
> 
> 赞同：1
> 
> 时间：2012-05-25T08:52:47.047
> 
> 标签：grails, groovy, double, nan

我想让用户在 Grails 视图中编辑具有双数据的字段。我想允许 Double.NaN （无效值）。

有一个特殊的字符，看起来像一个带有问号的菱形（在 HTML 中），它的行为类似于 NaN，但是 - 好吧 - 用户不会在他们的键上找到它。

在 Java 中，它与`Double.valueOf("NaN")`. 但是在输入字段中键入 NaN 会引发 IllegalArgumentException，说“NaN”是一个不可解析的数字。

调用什么方法进行转换？让它自动转换为双精度的关键是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T09:38:06.217

如果您在域类或命令对象中使用`Double`而不是，并且在约束中使用“空”作为“无数据”值。`double``nullable:true`

如果你真的想坚持 NaN，你必须注册一个自定义的 propertyeditor，见[http://ishanf.tumblr.com/post/434379583/custom-property-editor-for-grails](http://ishanf.tumblr.com/post/434379583/custom-property-editor-for-grails)。

# javascript - 长按链接时的jquery Mobile错误？

> ID：10751340
> 
> 赞同：0
> 
> 时间：2012-05-25T08:52:53.740
> 
> 标签：javascript, ios, jquery-mobile, uiwebview, mobile-safari

我正在使用 jquery mobile 并且我有一个烦人的问题......当一个元素有一个链接时，例如一个按钮，我正在捕获像 touchEnd 事件这样的事件来触发然后 javascript 调用或阻止链接。但是，当长按按钮（1 或 2 秒）时，总是会执行链接！在 iOS5 和 Android 上测试并尝试了多种可能性，但问题仍然存在！例如，以下代码应该阻止链接，如果您在按钮处单击“快速”，它会阻止链接。但是，如果您按住按钮（不触发 touchend），链接也会执行！此外，如果您不处理任何事件。谢谢

```
$(document).ready(function() 
 {
  $("a").bind('touchend', function(event)
  {      
          event.stopImmediatePropagation();
          event.preventDefault();
  } 
```

编辑：问题来自 tabhold 事件，尽管该事件被使用与否，但总是触发链接！Definetely 似乎是一个错误，可能的解决方案可以将其时间设置为无限。如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T06:48:27.713

[请在 jquery-mobile 网站https://github.com/jquery/jquery-mobile/issues](https://github.com/jquery/jquery-mobile/issues)上报告错误

理想情况下，制作一个显示此模板中的错误的示例应用程序：http: [//jsbin.com/otepum/edit#html](http://jsbin.com/otepum/edit#html)

我最近报告了一个类似的错误，即 cmd+click on a link doesn't open in new window（在实际触摸屏上显然不是问题）

谢谢！

# javascript - 在 ajax 响应中获取对 JS 对象的引用

> ID：10751342
> 
> 赞同：0
> 
> 时间：2012-05-25T08:53:00.340
> 
> 标签：javascript, jquery, dom

我正在通过包含 JS 对象的 ajax 加载一个 html 页面。如何将新加载的（子）页面内的对象引用到父页面？

家长：

```
//parent.html

<script>

    function ParentObject() {
        this.children = new Array();
    }

    var aParentObject = new ParentObject();

    $.get('/url/to/child.html', function(data) {
        $("#child-div").html(data);
    });

</script> 
```

孩子：

```
//child.html

<div>Some html element</div>

...

<script>
    function ChildObject() {
        this.someProperty = "I'm a Child";
    }

    var aChildObject = new ChildObject();
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T09:04:45.903

You should use var when you declare new variable

```
var aChildObject = new ChildObject(); 
```

When you append a html containing a jscript the script will execute and you will get reference after that point. So you must ensure that you access the child variable after you insert it.

```
$.get('/url/to/child.html', function(data) {
    $("#child-div").html(data);
    //Access your child here
    alert(aParentObject.someProperty);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T09:11:22.617

您可能想使用`.load()`. `.get()`您可以为“子”页面指定一个选择器，以`.load()`拉回您要检索的特定部分。

假设 child.html`div`有`id="child-div"`：

```
//parent.html

<script>

    function ParentObject() {
        this.children = new Array();
    }

    aParentObject = new ParentObject();

    $("#child-div").load('/url/to/child.html #child-div');

</script> 
```

请参阅此处的“加载页面片段”部分：http: [//api.jquery.com/load/](http://api.jquery.com/load/)

# android - 三星 Note 布局问题

> ID：10751343
> 
> 赞同：1
> 
> 时间：2012-05-25T08:53:01.993
> 
> 标签：android, android-layout, samsung-mobile

在我的应用程序中，我设计了分辨率为 600x1024 的布局并将它们放在`layout-large`文件夹中。

当我在 Samsung Galaxy Tab 上运行该应用程序时，它会从`layout-large`文件夹中选择布局，并且 UI 看起来不错。

但对于三星 Note 来说，它也会从`layout-large`文件夹中提取布局，并且 UI 看起来不太好。

**有什么办法可以为三星 Note 创建一个例外情况，并告诉 android 如果设备是三星 Note，不要使用 layout-large 文件夹中的布局，而是使用其他文件夹中的布局用于此特定设备？？？**

我还设计了分辨率为 800x1280 的布局并将它们放在`layout-xlarge`文件夹中。但即使三星 Note 的分辨率为 800x1280，它也不使用此文件夹中的布局！！

我在这里遇到了新的大小限定符[http://developer.android.com/guide/practices/screens_support.html#DeclaringTabletLayouts](http://developer.android.com/guide/practices/screens_support.html#DeclaringTabletLayouts) 但由于我的应用程序的最低 sdk 版本为 2.3（API 级别 9），因此无法使用这种方法

我必须为我的应用程序支持三星 Note 并且需要优先解决此问题，请帮助...提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T09:44:49.580

是的。您可以为三星 Galaxy Note 创建一个特殊文件夹，如下所示：

> res/drawable-sw800dp

这意味着最小宽度为 800 dp。所以 gaalxy note 属于这一类，但你的 1024*600 平板电脑不属于这一类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T09:22:40.027

//检查你手机的密度并创建一个布局并将你的xml文件放在那里。

适用于 160dpi 的中等密度

```
res/layout-large-mdpi 
```

用于 240dpi 的高密度

```
res/layout-large-hdpi 
```

对于 320dpi 的 xhigh 密度

```
res/layout-large-xhdpi 
```

# jquery-ui - 敲除 jquery 对话框绑定不起作用

> ID：10751345
> 
> 赞同：1
> 
> 时间：2012-05-25T08:53:06.480
> 
> 标签：jquery-ui, knockout.js

我在我的项目中使用了 RP Niemeyer 的 jquery 对话框示例，但它不起作用。模板绑定抱怨它在我的模型上找不到成员（创建根模型时，我将对话框模板数据成员设置为空的 observable）

这是一个重现问题的简化小提琴

[http://jsfiddle.net/NnkQB/](http://jsfiddle.net/NnkQB/)

在我看来，我的代码与他完全一样，但我使用原型作为方法，不重要

编辑：解决问题的方法是添加对 jquery 模板引擎的引用，在示例中错过了该引用。但我不希望依赖于 jquery 模板引擎。淘汰赛有bug吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T10:17:02.497

您的小提琴失败了，因为它试图在您选择一个数字之前呈现详细信息对话框 div，因此称为 showDetails。当您将 detailsItem 初始化为一个空的 observable（没有数字属性）时，您会收到一个 JavaScript 错误。

解决此问题的一种方法是在您的 div 周围添加一个 if 条件，如下所示：

[http://jsfiddle.net/jearles/NnkQB/2/](http://jsfiddle.net/jearles/NnkQB/2/)

编辑：我还必须更改清理对话框的方式。

# javascript - 重用来自另一个的 Mustache 模板，如果两者都在一个 html 文件中定义

> ID：10751347
> 
> 赞同：0
> 
> 时间：2012-05-25T08:53:15.450
> 
> 标签：javascript, mustache

如果两个模板都定义在同一个 html 文件的不同标签中，如何调用和使用另一个模板？

我知道这当然可以使用不同的 .mustache 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T18:53:40.977

我相信您在问如何使用在与模板相同的 HTML 文件中定义的部分。此示例在两个单独的模板中使用相同的部分来演示这一点。如果您正在寻找其他示例，请告诉我。

这是两个不同的模板和一个部分

```
<script type=text id=tpl1>
    {{greeting}} {{> planet}}
</script>

<script type=text id=tpl2>
    {{planet}}
</script>

<script type=text id=tpl3>
    {{> planet}} {{goal}}
</script>​ 
```

这是用于查找这些模板、准备其数据并使用重用的部分进行渲染的 JavaScript。

```
// get template html
var tpl1 = $('#tpl1').html(),
    tpl2 = $('#tpl2').html(), // partial
    tpl3 = $('#tpl3').html(),
// define data for each template
    tpl1Data = { 'greeting' : 'hello'},
    tpl2Data = { 'planet' : 'world'},
    tpl3Data = { 'goal' : 'peace'},
// define partial object
    partial = {'planet' : tpl2 },
// render to html combining template view and partial view and defining partial
    html1 = Mustache.to_html(tpl1, jQuery.extend(tpl1Data, tpl2Data), partial),
    html2 = Mustache.to_html(tpl3, jQuery.extend(tpl3Data, tpl2Data), partial);
// write compiled Mustache templates to document
document.write(html1 + ', let\'s try for ' + html2); 
```

​您可以[在 jsFiddle 上完整查看此示例](http://jsfiddle.net/maxbeatty/xMPf6/)。

如果您想为第二个模板中的部分使用不同的数据，您可以定义类似的`tpl2bData = { 'planet' : 'mars' }`内容并在渲染时引用它`html2`。

```
html2 = Mustache.to_html(tpl3, jQuery.extend(tpl3Data, tpl2bData), partial); 
```

# android - GPS 未能在 FragmentActivity 的 onPause() 内关闭

> ID：10751351
> 
> 赞同：0
> 
> 时间：2012-05-25T08:53:23.757
> 
> 标签：android, gps

我有一个托管 MapActivity 和 ListActivity 的 FragmentActivity。每个活动都会调用一个 LocationManager 方法来获取用户的当前位置。当应用程序在后台运行时，我正在尝试关闭 GPS。

当我尝试单独运行每个 Activity 时，我根本没有任何问题。onPause 内部的方法有效。GPS 标志不再出现在手机的通知栏上。但是当我运行同时托管 Map 和 ListActivity 的 FragmentActivity 时，当我点击后退按钮时，GPS 徽标仍然存在。

我不知道为什么会发生这种情况，有人可以告诉我有什么可能吗？

仅供参考：我没有在 FragmentActivity 中调用任何 locationManager 方法。

这是我对这两个活动的 onPause() 和 onResume() 方法：

```
@Override
    public void onResume() {        

        if (locationListener != null)
        {
        locationManager = (LocationManager) getApplicationContext().getSystemService(Context.LOCATION_SERVICE);            
        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 1000, 10f, locationListener);
        }
        super.onResume();
    }

    @Override
    public void onPause() {             
        locationManager.removeUpdates(locationListener);
        locationManager = null;
        super.onPause();
    } 
```

**更新：我发现问题** 这是我的 FragmentActivity

```
protected void onCreate(Bundle bundle) {

        WWHApplication.setFragmentInstance(this);
        WWHApplication.getInstance().getJsonDBInstance();
        Util.isJsonDBDownloaded();

        super.onCreate(bundle);
        setContentView(R.layout.main_fragment_activity_alt);

        cbAll = (RadioButton) findViewById(R.id.cb_tab_all);
        cbAll.setChecked(true);
        cbAll.setOnClickListener(this);

        cbFavorites = (RadioButton) findViewById(R.id.cb_tab_favorites);
        cbFavorites.setOnClickListener(this);

        cbHistorical = (RadioButton) findViewById(R.id.cb_tab_historical);
        cbHistorical.setOnClickListener(this);

        cbFood = (RadioButton) findViewById(R.id.cb_tab_food);
        cbFood.setOnClickListener(this);

        slidingDrawer = (MultiDirectionSlidingDrawer) findViewById(R.id.drawer);

        //Always prepare content on start
        WWHApplication.setCategory('a');
        WWHApplication.getListActivityIntance().loadListView();
        animate();

        animateStart();

    }

    public void animateStart() {
        slidingDrawer.animateOpen();
    }

    public void animate() {
        slidingDrawer.refreshContent();
    }

    @Override
    public void onClick(View v) {
        switch (v.getId()) {
        case R.id.cb_tab_all:
            WWHApplication.setCategory('a');
            WWHApplication.getListActivityIntance().loadListView();
            animate();

            break;
        case R.id.cb_tab_favorites:
            WWHApplication.setCategory('f');
            WWHApplication.getListActivityIntance().loadListView();
            animate();

            break;
        case R.id.cb_tab_historical:

            break;
        case R.id.cb_tab_food:

            break;
        }

    } 
```

当我在 Activity 中注释掉以下所有行时，onPause() 中的 GPS off 方法正在工作：

```
WWHApplication.setCategory('a');
WWHApplication.getListActivityIntance().loadListView(); 
```

问题是我需要同时调用两条线路，任何人都有一个解决方案，当 onPause() 中的 GPS 关闭方法仍在工作时，我仍然可以调用上面的这些方法？

# wpf - 具有自动高度的网格行中的列表框。滚动条不起作用

> ID：10751357
> 
> 赞同：3
> 
> 时间：2012-05-25T08:53:46.823
> 
> 标签：wpf, scroll, listbox, grid

我有以下网格：

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="*"/>
        <RowDefinition Height="Auto"/>
    </Grid.RowDefinitions>
    <Border Height="50" Background="Gainsboro" Grid.Row="0"/>
    <Border Background="AliceBlue" Grid.Row="1">
        <ListBox ScrollViewer.VerticalScrollBarVisibility="Auto" ItemsSource="asdasdfasdf3dfasdf"/>
    </Border>
    <Border Height="60" Background="Aquamarine" Grid.Row="3"/>
</Grid> 
```

为什么没有启用 ListBox 的滚动查看器？最后一个边框被推出窗口。如果我将 Grid.Row 2 Height 设置为 * 星 - 它工作得很好。是否可以在自动高度网格行中使用带有滚动查看器的列表框？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T10:26:56.160

`Auto`使您的控件根据需要调整大小。因此，您`ListBox`将自行调整大小以显示其所有内容，并且永远不会显示滚动条。

`*`使您的控件采用可用大小，并且不会超出此范围。

您需要做的是定义 的`MaxHeight`属性`ListBox`或`*`用作 中的高度`RowDefinition`。

# javascript - javascript使用setInterval打开和关闭多个url

> ID：10751360
> 
> 赞同：0
> 
> 时间：2012-05-25T08:53:53.333
> 
> 标签：javascript, setinterval

我试图在 javascript 中打开多个 url 几秒钟并自动关闭它们。我没有编程方面的背景知识，只是一点点php。我这样做是为了演示一个项目。

我有一个带有一些网址的数组。

```
var allURL = ["http://google.com", "http://yahoo.com", "http://msn.com"]; 
```

现在我想在新窗口/标签中一一打开所有 url 10 秒并自动关闭。所以[http://google.com](http://google.com)打开 10 秒并自动关闭，然后[http://yahoo.com](http://yahoo.com)打开。与数组中的所有 url 类似。

您能否指导我如何使用 setInterval 或任何其他方式来实现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T09:08:45.753

```
var allURL = ["http://google.com","http://yahoo.com","http://msn.com"];

function showUrl(index) {
    index = index || 0;

    // are there any urls to show?
    // is the given index valid?
    if (allURL.length === 0 || index < 0 || index >= allURL.length) {
        return;
    }

    // open the url
    var popup = window.open(allURL[index]);

    // set a timer which closes the popup after 10 seconds and opens the next url by calling 'showUrl' with the next index
    setTimeout(function() {
        popup.close();
        showUrl(index + 1);
    }, 10000);
}

// To start the "diashow" call 'showUrl' without an index or if you want to start at a pre-defined url with the corresponding index
showUrl();    // starts with the first url 
```

# c# - 使用 Solver 在 2D 区域上找到最佳点

> ID：10751362
> 
> 赞同：1
> 
> 时间：2012-05-25T08:54:02.460
> 
> 标签：c#, ms-solver-foundation

这是我第一次使用 Solver Foundation，我不明白如何指定目标函数。我试图使用 Solver 解决的问题是根据目标函数在 2D 表面上找到最佳点。作为输入数据，我在这个表面上有 3 个点，声波需要从源（最佳点）到达这三个点的时间差。这个时间差导致距离差。

这是我的代码：

```
var solver = SolverContext.GetContext();
var model = solver.CreateModel();

decisionX = new Decision( Domain.Real, "X" );
decisionY = new Decision( Domain.Real, "Y" );

model.AddDecision( decisionX );
model.AddDecision( decisionY );

model.AddGoal( "Goal", GoalKind.Minimize, GoalFunction() );

var solution = solver.Solve();
Console.WriteLine("X " + decisionX.GetDouble());
Console.WriteLine("Y " + decisionY.GetDouble()); 
```

GoalFunction() 定义如下：

```
double GoalFunction() {
    Location X = new Location( decisionX.ToDouble(), decisionY.ToDouble() );
    var rA = A.Location.Distance( X );
    var rB = B.Location.Distance( X );
    var rC = C.Location.Distance( X );

    rA = (Distance)( rA - dsA );
    rB = (Distance)( rB - dsA );
    rC = (Distance)( rC - dsA );

    return ( rA * rA + rB * rB + rC * rC ) / 3;
} 
```

上面的代码抛出异常 ( `decisionX.ToDouble()`)，因为此时尚未初始化决策。

有人可以帮我重写吗？

* * *

我已将我的 GoalFunction 重写为 all-Model.methods-calls。

```
var solver = SolverContext.GetContext();
var model = solver.CreateModel();

decisionX = new Decision( Domain.Real, "X" );
decisionY = new Decision( Domain.Real, "Y" );

model.AddDecision( decisionX );
model.AddDecision( decisionY );

var rA = Model.Difference(
    Model.Sqrt(
        Model.Sum(
            Model.Power( Model.Difference( decisionX, A.Location.X ), 2 ),
            Model.Power( Model.Difference( decisionY, A.Location.Y ), 2 )
        )
    ),
    dsA.Value
);
var rB = Model.Difference(
    Model.Sqrt(
        Model.Sum(
            Model.Power( Model.Difference( decisionX, B.Location.X ), 2 ),
            Model.Power( Model.Difference( decisionY, B.Location.Y ), 2 )
        )
    ),
    dsB.Value
);
var rC = Model.Difference(
    Model.Sqrt(
        Model.Sum(
            Model.Power( Model.Difference( decisionX, C.Location.X ), 2 ),
            Model.Power( Model.Difference( decisionY, C.Location.Y ), 2 )
        )
    ),
    dsC.Value
);
var miner = Model.Min( rA, rB, rC );
rA = Model.Difference( rA, miner );
rB = Model.Difference( rB, miner );
rC = Model.Difference( rC, miner );
var goal = Model.Sum(
    Model.Power( rA, 2 ),
    Model.Power( rB, 2 ),
    Model.Power( rC, 2 )
);
model.AddGoal( "Goal", GoalKind.Minimize, goal );

var solution = solver.Solve();
var q = solution.Quality;
double x = decisionX.GetDouble();
double y = decisionY.GetDouble();

solution.GetNext();
x = decisionX.GetDouble();
y = decisionY.GetDouble(); 
```

此代码有效，但返回 {0.0} 作为 LocalOptimal 解决方案，而最优是 {2,2}（我检查过，GoalFunction 为 {2,2} 返回 0，而为 {0,0} 返回更高的值。可能是 {0,当决策是 Domain.Real 时，0} 是起点。

Solution.GetNext() 没有任何改变。

* * *

```
decisionX = new Decision( Domain.RealRange( -10, 10 ), "X" );
decisionY = new Decision( Domain.RealRange( -10, 10 ), "Y" ); 
```

如果我限制域，返回的解决方案是 {1.9999999984154413,1.99999999990963979} 所以它是正确的。

但为什么解算器不启动完整的真实域？还是不知道

也许有一天有人会回答......我希望，但我将下面的答案标记为正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T09:37:45.077

我本人不是无国界医生的专家，但据我所知，你的`model.AddGoal()`说法是不正确的。根据[文档](http://msdn.microsoft.com/en-us/library/ff525581)，第三个参数应该是[Term](http://msdn.microsoft.com/en-us/library/microsoft.solverfoundation.services.term)。*Term有一个从**double*到*Term*的隐式强制转换运算符，因此在您的`model.AddGoal()`语句中发生的唯一事情`GoalFunction`就是调用一次（并抛出异常，因为一开始没有初始化决策）。

在 MSF 示例中，有一些关于如何创建目标的示例。

**更新**

基于这些示例，我创建了一个简单的目标（Rosenbrock 香蕉函数）并将这个目标合并到`AddGoal`调用中，如下所示：

```
 var goal = Model.Sum(Model.Power(1.0 - decisionX, 2.0),
                         Model.Product(100.0, Model.Power(decisionY - Model.Power(decisionX, 2.0), 2.0)));
    model.AddGoal( "Goal", GoalKind.Minimize, goal); 
```

希望这可以引导您制定目标函数的方向。

# asp.net - 如何在我的 ASP.NET 应用程序中创建一个“一般错误”页面，以便它处理在提供该页面本身时触发的错误？

> ID：10751363
> 
> 赞同：5
> 
> 时间：2012-05-25T08:54:03.443
> 
> 标签：asp.net, .net, iis, error-handling

在我的 ASP.NET MVC 应用程序中，我希望有一个通用错误页面，该页面与返回的 HTTP 500 一起显示。类似于[Stack Overflow 上的这个页面](https://stackoverflow.com/error)。

当然，我希望尽可能多地重用代码，以便页面的样式与我的应用程序中的其他页面相同，因此我希望有一个 ASP.NET 页面重用母版页，而不是纯 HTML 文件。但是，如果我这样做，我有一个页面，其中包含一些服务器端可执行代码，用于创建提供给客户端的实际 HTML。在 Stack Overflow 通用错误页面的情况下，代码检查用户是否已注册、检索他的代表等，并将其元素插入 HTML。

该代码可能会失败，如果发生这种情况，页面构造不正确，服务器会引发异常。

如何优雅地处理这种情况（为错误页面构建 HTML 时出错）？典型的做法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-25T09:34:07.043

我喜欢首先对可能的错误进行分类。

## 对错误进行分类。

1.  找不到页面（这是我的日志）。
2.  通过尝试破解页面来破坏页面的参数
3.  错误的用户数据输入错误。
4.  完全未知的错误 - 我们必须修复的新错误。
5.  一个非常严重的一般错误 - 没有运行 - 例如，数据库根本没有打开。

## 我们的目标

现在显示错误页面，但仅在极少数情况下。

因此，当用户在没有页面的情况下进行操作时，我们会尝试捕获用户的所有错误输入，并向他展示如何在没有任何错误的情况下继续操作。

## 全局错误处理程序

`global.asax`您可以从使用 void捕获所有错误开始`Application_Error(object sender, EventArgs e)`

```
void Application_Error(object sender, EventArgs e) 
{
    try
    {
        Exception LastOneError = Server.GetLastError();

        if (LastOneError != null)
        {
            Debug.Fail("Unhandled error: " + LastOneError.ToString());

            if (!(EventLog.SourceExists(SourceName)))
                EventLog.CreateEventSource(SourceName, LogName);

            EventLog MyLog = new EventLog();
            MyLog.Source = SourceName;
            StringBuilder cReportMe = new StringBuilder();

            cReportMe.Append("[Error come from ip:");
            cReportMe.Append(GetRemoteHostIP());
            cReportMe.Append("] ");
            cReportMe.Append("Last Error:");
            cReportMe.Append(LastOneError.ToString());

            if (LastOneError.ToString().Contains("does not exist."))
            {
                // page not found
                MyLog.WriteEntry(cReportMe.ToString(), EventLogEntryType.Warning, 998);
            }
            else
            {
                MyLog.WriteEntry(cReportMe.ToString(), EventLogEntryType.Error, 999);
            }               
        }
    }
    catch (Exception ex)
    {
        Debug.Fail("Unhandled error: " + GlobalFun.GetErrorMessage(ex));
    }

    string cTheFile = HttpContext.Current.Request.Path;

    // to avoid close loop and stackoverflow
    if(!cTheFile.EndsWith("error.aspx"))
        Server.Transfer("~/error.aspx");
} 
```

这个全局错误句柄有一个主要目标，告诉我什么不工作并且在到达这里之前无法处理它，所以我记录它（而不是记录它的方式）并尽快修复它。当我调试我的代码时，我没有让服务器传输能够快速定位错误。

## 对于黑客错误案例

在这种情况下，最好现在显示任何错误，但只需通过重定向重新加载页面。如何知道它是否试图破解页面？

如果在回发时您会收到一些您知道的参数的 CRC/hach 错误。查看答案[https://stackoverflow.com/a/2551810/159270](https://stackoverflow.com/a/2551810/159270)以查看视图状态错误的示例以及如何处理它。

我知道 MVC 没有视图状态，但是您的代码中可能有其他加密字符串，或者您可以知道它何时被破坏的某种安全性。这是一般的想法：

```
if(IsPostBack && HashErrorOnParametres)
{
  LogIt();
  Responce.Redirect(Request.RawUrl, true);
  return;
} 
```

## 对于一个非常困难的一般错误

假设您的数据库根本没有打开，那么所有用户都开始从通用处理程序中看到错误页面。在那里，您可能有一个额外的选项来重新启动池，或者在过去 5 分钟内出现 20 个错误后停止页面，或者类似的事情，然后向您发送电子邮件以运行并修复这个非常困难的错误。

## 对于其余的软错误

我认为所有可能的已知错误必须在页面内使用 try/catch 进行处理，并向用户显示出错的消息，如果此错误来自用户，当然记录它以查看并修复它。

将页面分成几部分，也许一部分是抛出错误，其余部分工作正常，如果这不是那么重要，您可以简单地隐藏这部分，并显示其余部分，直到您修复它。例如，如果您只是显示有关产品的信息，而涉及某个部分的部分抛出错误，您可以简单地隐藏该部分并在日志中看到它并修复它。

有时我尝试使用每页处理错误，`protected override void OnError(EventArgs e)`但这对我没有帮助，我将其删除。我处理每个操作的错误，如果它们不是关键的，我会隐藏它们，直到我修复它们。

其余的正常错误显示在用户身上，例如未输入正确的数据...一条消息并告诉他们要修复什么。

正如我所说，我的目标是根本不显示错误页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T09:14:58.270

基本上在你的 web.config 中你需要这样的东西：

```
<customErrors mode="RemoteOnly" defaultRedirect="~/ErrorPages/Oops.aspx">
</customErrors> 
```

自然，您的错误页面的路径将与上述不同。

您可以更全面地了解如何处理特定错误，例如像这样的 404：

```
<customErrors mode="RemoteOnly" defaultRedirect="~/ErrorPages/Oops.aspx">
      <error statusCode="404" redirect="~/ErrorPages/404.aspx" />
</customErrors> 
```

编辑：

根据评论，这就是我的意思：

当您构建“oops.aspx”页面时，我建议您保持简单；如果可能，根本没有执行代码。如果您确实需要在“oops.aspx”中执行代码，则将该代码放在一个`try..catch`块中并吃掉异常：

```
try {
    // Your oops code.
}
catch (Exception e) {
    // Do nothing with the exception.
    // Maybe plonk it in a log file, or System.Diagnostics.Trace.WriteLine(e.Message);
} 
```

关键是您要避免调用“oops.aspx”，因为“oops.aspx”本身会导致异常！递归问题啊哈。

您不需要在母版页中尝试...catch（除非您愿意），我的意思只是集中在“oops.aspx”页面上。

# security - 如何从私钥中提取指数和模数？

> ID：10751364
> 
> 赞同：5
> 
> 时间：2012-05-25T08:54:08.637
> 
> 标签：security, openssl, cryptography

有没有办法使用openssl提取私钥的模数和指数？如果有办法，请告诉我。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-25T09:02:54.487

是的。使用[openssl rsa](http://www.openssl.org/docs/apps/rsa.html)`-text`选项是一种方法：

```
$ openssl genrsa 2048 > dummy.key
Generating RSA private key, 2048 bit long modulus
..............+++
....................+++
e is 65537 (0x10001)
$ openssl rsa -in dummy.key -noout -text
Private-Key: (2048 bit)
modulus:
    00:c3:21:46:32:f5:d8:89:c5:bb:bd:a7:4a:14:32:
    [...]
    ea:5d:d3:20:bd:d7:5d:36:1e:45:28:f3:e3:dd:0b:
    d1:f9
publicExponent: 65537 (0x10001)
privateExponent:
    55:4d:74:8c:ce:a0:cd:09:de:1a:f8:c9:0f:af:4f:
    ed:a1:92:89:89:86:4f:cb:b2:f6:aa:60:e7:05:a6:
    [...] 
```

# pdf - （预定）每日 PDF 下载，带有可变 URL

> ID：10751365
> 
> 赞同：0
> 
> 时间：2012-05-25T08:54:10.320
> 
> 标签：pdf, automation, bookmarklet, schedule

我想每天从一个 URL 下载 PDF 格式的报纸，该 URL 每天都会根据以下变量变化：

网址：www.alwasatnews.com/data/yyyy/1234/pdf/all.pdf

其中 [yyyy] 是今天日期的年份，[1234] 是报纸发行号（每天递增 1）

理想情况下，这是一个浏览器书签或 rss 提要，不需要额外的软件或运行 cron 作业的服务器。这最终将在我的工作场所共享，以便每天轻松访问最新版本的 pdf 版本的报纸

任何想法如何实现这一目标？

谢谢！

# javascript - 检查在给定的开始日期和结束日期时间之间是否有可用房间

> ID：10751371
> 
> 赞同：1
> 
> 时间：2012-05-25T08:54:45.063
> 
> 标签：javascript, sql, web-services

我正在用 jquery mobile 构建一个移动 webapp。现在让我先画出我正在做的事情。

用户想要预订会议室。首先，他选择了一个房间，并且只选择了他想要保留的那个房间，没有其他房间。然后他还输入了开始和结束日期时间。这是他想要拥有这个房间的时期。

现在，我的网络服务中有一个功能，它会返回一个列表，其中包含在该特定会议室进行的所有预订。稍后，如果此列表为空，我将检查我的 javascript。

现在我的数据库结构。

我有以下设计的餐桌预订

```
 ID           --> int
  ROOMID       --> int
  DATE_BEGIN   --> DATETIME
  DATE_END     --> DATETIME 
```

我还有一个具有以下设计的桌子房间

```
 ID            --> int
   NAME          --> VARCHAR(30) 
```

现在在表保留中插入一行看起来像这样

```
 ID            --> 1
     ROOMID        --> 2
     DATE_BEGIN    --> 2012-01-01 12:02:33
     DATE_END      --> 2012-01-01 14:00:00 
```

现在我有这个查询

```
SELECT res.DATE_BEGIN,res.DATE_END 
FROM reservations res
INNER JOIN room roo
ON res.ROOMID =roo.ID
WHERE WHERE res.DATE_BEGIN <> @DATE_BEGIN
AND res_DATE_END <> @DATE_END 
```

现在我的问题是应该进行什么查询才能获得正确的结果。过去的保留也应该被过滤掉。

有人可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T09:03:19.867

您需要检查一个日期范围是否与另一个日期范围重叠。

```
New Date Range =               |-----------|
Test1          =      |=====|
Test2          =            |=====|
Test3          =                  |=====|
Test4          =                        |=====|
Test5          =                              |=====|
Test6          =            |=================| 
```

只有 Test1 和 Test5 不重叠。

因此，可以通过...找到碰撞

```
SELECT
  res.DATE_BEGIN, res.DATE_END
FROM
  reservations res
INNER JOIN
  room roo
    ON res.ROOMID =roo.ID
WHERE
      res.DATE_BEGIN < @DATE_END
  AND res_DATE_END   > @DATE_BEGIN 
```

*笔记：*

注意边界条件。如果一个会议在上午 10 点结束，而另一个会议在上午 10 点开始，这通常不会被视为重叠。这就是我使用`<`and的原因`>`。

**编辑**

由于超出本问答范围的原因，我上面强调的此类查询不容易使用索引进行优化。

出于这个原因，另一种方法是创建可以预订房间的时间段。没有人需要在中午过去 2 分 33 秒开始会议。相反，他们会在 12:00 开始。因为这样的 5 分钟块通常足够准确，实际上系统经常使用 15 分钟块甚至 30 分钟块。

这意味着一个预订可能需要多条记录（每个预订时间块 1 条记录），但是对该数据的*每个查询都变得更容易解决。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-03T15:14:14.760

接受的答案处理重叠会议，但不会与现有会议同时处理会议。我将查询用于已接受的解决方案，并为相同的开始和结束日期添加了第二次检查。为了便于阅读，我将查询分开。

我使用了上面的解决方案并添加了第二个检查：

-- 新会议是否与现有会议同时开始或结束
SELECT res.DATE_BEGIN, res.DATE_END
FROM reservations res
WHERE res.DATE_BEGIN = @DATE_BEGIN OR
res.DATE_END = @DATE_END;

结果表明存在冲突。

# c# - 当两个子节点都必须存在时，如何使用 XPath 从 XML 文件中提取子节点？

> ID：10751373
> 
> 赞同：0
> 
> 时间：2012-05-25T08:54:53.377
> 
> 标签：c#, xpath, xpathnavigator

我正在尝试从 xml 文档中提取某些值。在下面的示例中，我想将存储在“c”和“d”节点中的值存储在列表中，但仅限于“b”节点同时包含“c”和“d”的地方。到目前为止，我的代码循环遍历所有“b”节点，但我不确定在 while 循环中放入什么，或者这是否是最好的方法。

```
XmlDocument attrsXML = new XmlDocument();
attrsXML.LoadXml(dbReader["SampleXml"].ToString());

XPathNavigator nav = attrsXML.CreateNavigator();

XPathNodeIterator attribNodes = nav.Select("/a/b");

while (attribNodes.MoveNext())
{
    // What do I need to put here in order to extract the 'c' and 'd' nodes?
    // Any other nodes can be ignored (such as 'e' above). I am only interested
    // when 'b' contains both 'c' AND 'd'.
} 
```

从数据库加载的“SampleXml”是：

```
<a>
    <b>
        <c>Extract this</c>
        <d>And this</d>
        <e>not this</e>
    </b>
    <b>
        <c>not this</c>
        <e>not this</e>
    </b>
    <b>
        <c>Extract this</c>
        <d>And this</d>
    </b>
</a> 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T10:30:07.157

您可以使用以下代码：

```
XmlDocument attrsXML = new XmlDocument();
attrsXML.LoadXml(dbReader["SampleXml"].ToString());

XmlNodeList nodeList = attrsXML.SelectNodes("/a/b[c and d]");

foreach (XmlNode xmlNode in nodeList)
{
  string cText = xmlNode.SelectSingleNode("c").InnerText;
  string dText = xmlNode.SelectSingleNode("d").InnerText;
} 
```

XPath "/a/b[c and d]" 返回所有包含 c 和 d 元素作为子元素的 b 元素，这意味着您不需要在循环内手动检查它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T09:28:45.010

我是这样解决的：

```
while (attribNodes.MoveNext())
{
    string cText = String.Empty;
    string dText = String.Empty;

    XPathNavigator nav2 = attribNodes.Current;

    var cNode = nav2.SelectSingleNode("c");

    if (cNode != null)
    {
        cText = nameNode.ToString();

        var dNode = nav2.SelectSingleNode("d");
        if (dNode != null)
        {
            dText = dNode.ToString();
        }
    }

    if (dText != String.Empty && cText != String.Empty)
    {
        // Problem solved
    }
} 
```

欢迎任何更好的解决方案，因为它看起来不太优雅。

# css - 可能隐藏的跨度之间的分隔符

> ID：10751378
> 
> 赞同：3
> 
> 时间：2012-05-25T08:55:15.950
> 
> 标签：css, html

我有许多跨度，形成一个枚举：

```
<span class="item">Value 1</span><span class="delim">, </span>
<span class="item">Value 2</span><span class="delim">, </span>
<span class="item">Value 3</span> 
```

`item`当 all of has时没关系，但是当我向第二个span`display:inline`添加一个类时，结果如下所示：`display:none``item`

> 值 1, , 值 2

我在 CSS 中找不到这个问题的解决方案，并且不希望使用 JS（切换可见性的代码已经非常复杂）。

有任何想法吗？

**更新。**截至目前，所有提出的解决方案都忽略了一个事实，即任何`item`跨度都可以隐藏或可见，而不仅仅是第二个。问题不仅在于中间的双逗号，还在于末尾的额外逗号。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T09:05:09.520

仅使用 CSS 的简单解决方案：

```
.item:before{
    content: ", ";
}
.item:first-child:before{
    content: "";
} 
```

[http://jsfiddle.net/8aEhz/](http://jsfiddle.net/8aEhz/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T08:57:25.717

那是因为具有该值的跨度不是分隔跨度的父级。为了在隐藏值范围时隐藏分隔符，您必须将它们包含在值范围内，如下所示：

```
<span class="item">Value 1<span class="delim">, </span></span>
<span class="item">Value 2<span class="delim">, </span></span>
<span class="item">Value 3</span> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T08:59:07.857

这就是你所追求的吗？

[http://jsfiddle.net/whQxW/](http://jsfiddle.net/whQxW/)

```
.hidden {
    display: none;
}

.hidden + .delim {
    display: none;
} 
```

它给

> 价值 1，价值 3

这看起来像是对兄弟选择器的一个很好的介绍：http: [//css-tricks.com/child-and-sibling-selectors/](http://css-tricks.com/child-and-sibling-selectors/)。您可能应该了解它们——它们非常强大。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-25T13:54:03.217

解决方案是使用所谓的[通用兄弟选择器](http://reference.sitepoint.com/css/generalsiblingselector)：

```
.item.active ~ .item.active:before {
    content: ', ';
} 
```

逗号只插入到那些可见项之前，其父项有另一个可见项作为子项，并且该子项在文档中位于我们之前。

# iphone - Iphone sdk 显示缩略图

> ID：10751384
> 
> 赞同：0
> 
> 时间：2012-05-25T08:55:33.940
> 
> 标签：iphone

我正在尝试从视频中获取（第一帧的）缩略图，以便显示它。有人成功地做到了这一点吗？如果是这样，你是怎么做到的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T09:55:18.930

第一个使用 AssetImageGenerator 的方法有很多：-

```
- (UIImage *)imageFromVideoURL 
{
// result 
UIImage *image = nil;

// AVAssetImageGenerator
AVAsset *asset = [[AVURLAsset alloc] initWithURL:appDelegate.videoURL options:nil];; 
AVAssetImageGenerator *imageGenerator = [[AVAssetImageGenerator alloc] initWithAsset:asset];
imageGenerator.appliesPreferredTrackTransform = YES;

// calc midpoint time of video
Float64 durationSeconds = CMTimeGetSeconds([asset duration]);
CMTime midpoint = CMTimeMakeWithSeconds(durationSeconds/2.0, 600); 

// get the image from 
NSError *error = nil; 
CMTime actualTime;
CGImageRef halfWayImage = [imageGenerator copyCGImageAtTime:midpoint actualTime:&actualTime error:&error];

if (halfWayImage != NULL) 
{
    // cgimage to uiimage
    image = [[UIImage alloc] initWithCGImage:halfWayImage];
    [dic setValue:image forKey:kImage];
    NSLog(@"Values of dictonary==>%@", dic);
    NSLog(@"Videos Are:%@",appDelegate.videoURLArray);
    CGImageRelease(halfWayImage);
}
return image;
} 
```

这是另一种方法使用 MPMoviePlayerController 的最佳方法：-

```
MPMoviePlayerController *player = [[MPMoviePlayerController alloc] initWithContentURL:url];
UIImage *thumbnail = [player thumbnailImageAtTime:1.0 timeOption:MPMovieTimeOptionNearestKeyFrame];
[player stop]; 
```

它可以帮助你谢谢:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T09:19:20.967

首先你应该有 videoURL 或 nsdata 的视频。现在添加 MediaPlayer 框架和#import MediaPlayer/MPMoviePlayerController.h。将此添加到您想要视频缩略图的位置

```
MPMoviePlayerController *player = [[MPMoviePlayerController alloc] initWithContentURL:url];
UIImage *thumbnail = [player thumbnailImageAtTime:1.0 timeOption:MPMovieTimeOptionNearestKeyFrame];
//Player autoplays audio on init
[player stop];
[player release]; 
```

# javascript - YUI3 - 创建全局变量以避免使用 .use(...);

> ID：10751388
> 
> 赞同：0
> 
> 时间：2012-05-25T08:55:56.840
> 
> 标签：javascript, yui, yui3, yahoo-api

我成功地将我的页面从 YUI2 迁移到 YUI3 并且在升级时我使用 YUI3 的动态库加载仅包括`yui-min.js`和 using `YUI().use(...)` ，但现在我想删除本地 YUI2 JS 并在本地添加 YUI3。

我创建了一个全局变量`var Y = YUI().use('*',function(Y){});`并将其更改`yui-min.js`为`yui-core-min.js`并添加了我想要使用的库，并且它在更改时效果很好`Y instead YUI()`。

```
Y.use('datatable','datasource', function(Y){
    ...
    fcTable = new Y.DataTable(...);
}); 
```

但我想知道我是否只能`Y.use(...)`第一次调用并且只能使用全局`Y`变量，例如：

```
 ...
    fcTable = new Y.DataTable(...); 
```

我认为这可能会使加载速度更快，推荐吗？

谢谢4你的时间；）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T18:05:01.260

因为`use()`对于当前不在页面上的模块是异步操作，所以您正在设置竞争条件。忽略这一点，有可能，是的。

```
Y.use('datatable'); 
```

将`Y.DataTable`在模块解析并附加时全局可用。唯一的麻烦是你不能保证什么时候会。`use()`这就是回调的原因。

如果所有模块依赖项已经静态地在页面上（在 <script> 中），`use()`则将是同步的，这将允许

```
Y.use('datatable');
var table = new Y.DataTable({ … }); 
```

但是，如果您在页面上包含模块脚本并调用`use('*')`，则无需`Y.use('datatable')`稍后显式调用，因为`*`附加了所有内容。

# ruby - 为什么我在最新版本的 RVM 中看到这条正在运行的 after_cd 消息？

> ID：10751391
> 
> 赞同：3
> 
> 时间：2012-05-25T08:56:16.017
> 
> 标签：ruby, rvm

我刚刚安装了最新版本的 RVM，当我打开一个新终端时，我看到了这条`Running /Users/foo/.rvm/hooks/after_cd`消息。

这是预期的行为吗？有没有办法抑制这个消息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T05:48:50.780

这是我收到的关于此问题的第二份报告，尚不清楚是什么原因造成的，但您可以通过以下方式修复它：

```
printf "rvm_verbose_flag=0\nrvm_debug_flag=0\n" >> ~/.rvmrc 
```

如果这不能解决问题，请在此处开票：[https ://github.com/wayneeseguin/rvm/issues](https://github.com/wayneeseguin/rvm/issues)

# javascript - 使用 jquery 读取 json 时遇到问题

> ID：10751395
> 
> 赞同：1
> 
> 时间：2012-05-25T08:56:23.940
> 
> 标签：javascript, jquery, json

我有来自脚本的以下 json 响应：

```
[{"title":"Welkom bij Pica Plus!","url_title":"welkom-bij-pica-plus","entry_id":"36","channel_id":"1","author_id":"6","status":"open","entry_date":"1336650955000","edit_date":"1337180757000","expiration_date":"","answer_content":"Beste [Leerling],\n\nWelkom bij de cursus PowerPoint van Picaplus. Wat leuk dat je gekozen hebt voor deze cursus. \n\nMijn naam is Linda en ik zal jou begeleiden tijdens deze cursus. Dat betekent dat als je vragen hebt, je mij een berichtje kunt sturen. Ik zal je dan zo snel mogelijk antwoord geven. Ook kijk ik je toetsen na. Ik zal je na iedere toets in een bericht laten weten wat ik van jouw presentatie vind. \n\nZoals je misschien al gezien hebt, kun je op deze website een aantal belangrijke dingen doen. Je kunt instructiefilmpjes bekijken en lesmateriaal, zoals afbeeldingen en geluiden, downloaden. Ook zul je hier op de site iedere twee weken je toetspresentatie uploaden. Hoe dit allemaal in zijn werk gaat, lees je in de lessen. \n\nIk wens je veel succes met de cursus en natuurlijk heel veel plezier.\n\nMet vriendelijke groet,\n","answer_subject":""}] 
```

当我用 jQuery 获取它并尝试将 url_title 属性输出到控制台时（这只是一个测试用例，它最终会被插入到 a 中`textarea`），我得到未定义。但是当我记录整个响应对象时，属性显然就在那里......

我的功能：

```
$.getJSON(fetch, function(data){
    console.log(data.url_title);
}); 
```

我在这里想念什么？

谢谢，

史蒂文

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T08:57:43.893

```
$.getJSON(fetch, function(data){
    console.log(data[0].url_title);// because data is an array, 
                                   // so you need to use data[0]
}); 
```

如果它有多个对象，最好对数据进行循环。

```
$.getJSON(fetch, function(data){
   $.each(data, function() {
      console.log(this.url_title);
      ....
   });
}); 
```

# visual-studio-2010 - NServiceBus 初始化错误

> ID：10751401
> 
> 赞同：0
> 
> 时间：2012-05-25T08:56:33.610
> 
> 标签：visual-studio-2010, nservicebus

经过一些困难，我第一次成功安装了 NServiceBus 3.2，并且可以运行示例应用程序。

但是，当我尝试创建一个新项目时，出现错误：

'Microsoft.VisualStudio.Patterning.Extensibility.Binding.BindingSerializer' 的类型初始化程序引发了异常。

可能出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T11:43:42.847

事实证明，Pattern Toolkit Builder 无法自行更新，即使在扩展管理器中添加了凭据之后也是如此。

转到 Internet Explorer-> Internet 选项-> 本地 Intranet-> 站点，然后取消勾选自动检测 Intranet 网络和其他 3 个包含选项允许插件更新而无需凭据。

这允许 Pattern Toolkit Builder 正确更新，之后一切正常。

# java - 为什么要扩展异常类？

> ID：10751402
> 
> 赞同：8
> 
> 时间：2012-05-25T08:56:35.470
> 
> 标签：java

我遇到了一个扩展 Exception 的类：

```
public class MyException extends Exception
{
    public MyException()
    {
        super();
    }

    public MyException(final String argMessage, final Throwable argCause)
    {
        super(argMessage, argCause);
    }

    public MyException(final String argMessage)
    {
        super(argMessage);
    }

    public MyException(final Throwable argCause)
    {
        super(argCause);
    }

} 
```

由于所有重写的构造函数都只是调用超类 Exception ，因此以这种方式扩展异常不是毫无意义吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-25T08:57:28.463

不，这不是毫无意义的。您可以`catch`通过这种方式处理特定异常并专门处理它，而不是捕获一般`Exception`情况，这可能并非在所有情况下都可以处理。

有了这个，你可以这样做：

```
try { 
  foo();
} catch (MyException e) {
  handleMyException(e);
} 
```

如果您不知道如何处理 general ，这是不可能的`Exception`，但您可以处理`MyException`得更好。

它还提高了可读性 - 最好将方法声明为`throws MyException`（通常使用更好的名称）然后`throws Exception`- 你知道这样会更好地出错。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-25T08:57:59.790

是的，这是有原因的。它允许您区分异常的类型。

假设以下代码：

```
try {
    // some instructions
} catch (MyFirstException firstException) {
    // Handler for the first exception
} catch (MySecondException secondException) {
    // Handler for the first exception
} catch (Exception exception) {
    // Handler for all other exceptions
} 
```

事件如果继承自 Exception 并覆盖所有方法，则可以在 catch 块中区分它们`MyFirstException`。`MySecondException`因此，您可以为这两个异常设置不同的处理程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T09:00:19.087

当您总是做 a 时，`catch (Exception e)`您实际上会捕获 的每个子类`Exception`，这也特别适用于`RuntimeException`您通常不想捕获的 s 。这只能通过抓住变得更糟`Throwable`

# javascript - 使用变量访问 Javascript 中的对象信息？

> ID：10751403
> 
> 赞同：1
> 
> 时间：2012-05-25T08:56:37.967
> 
> 标签：javascript, jquery

我似乎不明白如何正确访问对象值。

我的对象：

```
 // countrycode: "Radio station name"
  var radioStations = {
    fi: "Foo",
    hu: "Bar",
    am: "Baz"
  }; 
```

然后我有一个名为的变量`code`，它来自一个 jQuery 插件，并且有用户在矢量图上鼠标悬停的国家的国家代码。

我需要`code`在这里将电台名称添加到工具提示中：

> ```
> onLabelShow: function(event, label, code){
>   if ( code in radioStations ) {
>     label.text(radioStations.code); // <- doesn't work
>   } else  { // hide tooltips for countries we don't operate in
>     event.preventDefault();
>   }
> }, 
> ```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T08:58:26.657

您需要使用数组表示法来通过变量访问对象。试试这个：

```
onLabelShow: function(event, label, code){
    if (code in radioStations) {
        label.text(radioStations[code]);
    } 
    else  { 
        event.preventDefault();
    }
}, 
```

[**示例小提琴**](http://jsfiddle.net/RoryMcCrossan/xk8tg/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T09:05:23.530

您可以使用：

```
onLabelShow: function(event, label, code){
  if(radioStations[code]) {
   label.text(radioStations[code]);
  } else {
   event.preventDefault();
  }
} 
```

[演示](http://jsfiddle.net/js4kq/1/)

# asp.net-mvc-3 - 如何在 MVC3 的 SQL 服务器中存储会话

> ID：10751404
> 
> 赞同：0
> 
> 时间：2012-05-25T08:56:40.697
> 
> 标签：asp.net-mvc-3

我想在 ASP.NET MVC3 中的 SQL Server 中存储会话，因为我想在两个应用程序之间共享会话和一些数据。我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-25T09:01:00.710

通过[`<sessionState>`](http://support.microsoft.com/kb/317604)在您的 web.config 中设置：

```
<sessionState 
    mode="SQLServer"
    sqlConnectionString="data source=SQLServerName;user id=<username>;password=<strongpassword>"
/> 
```

这假设您`ASPState`首先使用该[`aspnet_regsql.exe`](http://msdn.microsoft.com/en-us/library/ms229862.aspx)实用程序在目标数据库服务器上创建了数据库：

```
aspnet_regsql.exe -S SQLServerName -E -ssadd -sstype p 
```

确保从正确的 .NET 框架目录运行此实用程序。例如，如果您使用 .NET 4.0，这将是`c:\Windows\Microsoft.NET\Framework\v4.0.30319\`.

在 SQL 服务器上创建数据库后，您可以分配一个用户帐户来访问它，您应该在连接字符串中指定该用户帐户。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-04-23T07:49:23.147

如果您正在使用`asp.net mvc5`模型对象并将其存储到会话中，那么您需要将该模型放置`Serializable`在 `

```
[Serializable]
public class MyModel
{ 
```

它在ajax调用时很重要。并发送解释到 sql server

# java - 为什么 JSON 过滤器会在 bean 中创建空集合？

> ID：10751407
> 
> 赞同：1
> 
> 时间：2012-05-25T08:56:43.503
> 
> 标签：java, json, hibernate, serialization, filter

我有对象集合（bean，Hibernate 一对多）。例子：

```
class Small{
    private String field1;
    public String getField1(){
        return this.field1;
    }
    public void setField1(String field1){
        this.field1 = field1;
    }
}
class Big {
    Set<Small> list = new HashSet<Small>(0);
    public Set<Small> getList(){
        return this.list;
    }
    public void setField1(Set<Small> list){
        this.list = list;
    }
}

List<Big> list = ....;/// Here I get a list of Big object;
JsonConfig jsonConfig=new JsonConfig();
jsonConfig.setJsonPropertyFilter(new PropertyFilter() {   
    public boolean apply(Object source, String name, Object value) {   
        if (!(name.equals("list")) {
            return true;   
        } else {   
            return false;   
        }   
    }   
}); 

JSONArray json = JSONArray.fromObject(list , jsonConfig);
System.out.println(json.toString()); 
```

结果我有下一个字符串：

```
[{"list":{}}] 
```

列表中没有任何内容，但是当我使用时：

```
JSONArray json = JSONArray.fromObject(list); 
```

反而

```
JSONArray json = JSONArray.fromObject(list , jsonConfig); 
```

json 显示所有信息。

如何使用`jsonConfig`和获取内部集合中的信息？

# php - 是否有 PHP Archive 实用程序可以压缩您的 Web 根文件夹以进行备份？

> ID：10751411
> 
> 赞同：2
> 
> 时间：2012-05-25T08:57:18.230
> 
> 标签：php, ftp, zip, backup

我想备份我的整个文件夹和其中的文件，`www`或者`public_html`只将其放入一种存档格式（.tar 或 .zip）。这样下载时它会很快而且不会乱七八糟。

我的 cpanels 文件管理器为我提供了这种功能，但我无法访问我客户的 cpanel。我只能访问他的 FTP，我可以在其中放置 php 脚本并运行这些脚本。

我正在寻找一种备份类型的实用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T09:00:37.123

有了正确的许可，您可以使用`exec()`：

```
<?php
      exec("tar czf backup.tar.gz /path-to-dir");
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T09:00:58.870

## 假设

我将假设您实际上并不是指系统根目录`/`，而是您网站的根目录。

## 通过使用 tar`exec`

如果您的用户具有 tar 的能力，`exec`那么您可以使用一个简单的脚本，如下所示：

```
exec('/usr/bin/tar -czf /home/pennfolio/backup.tgz /home/pennfolio/www'); 
```

## 带 Zip 的 PHP

如果您没有能力，那么您可以使用 PHP 的[Zip 功能](http://php.net/manual/en/book.zip.php)，但它需要您递归地遍历文件夹结构并将每个文件添加到 ZipArchive 实例。

StackOverflow 上已经有涵盖此问题的答案，例如[How to [recursively] Zip a directory in PHP?](https://stackoverflow.com/questions/1334613/how-to-recursively-zip-a-directory-in-php#1334949)

# iphone - 如何更改文本视图中数字字符的颜色

> ID：10751415
> 
> 赞同：0
> 
> 时间：2012-05-25T08:57:29.383
> 
> 标签：iphone, ios, nsstring, uitextview, ios5

我正在使用此代码`- (void)textViewDidEndEditing:(UITextView *)textView`将文本与 aa textview 中的数字分开。我的代码是

```
//removing string in text

NSString *originalString = myStringTxt;
NSMutableString *strippedString = [NSMutableString 
                                   stringWithCapacity:originalString.length];

NSScanner *scanner = [NSScanner scannerWithString:originalString];
NSCharacterSet *numbers = [NSCharacterSet 
                           characterSetWithCharactersInString:@"0123456789"];

while ([scanner isAtEnd] == NO) {
    NSString *buffer;
    if ([scanner scanCharactersFromSet:numbers intoString:&buffer]) {
        [strippedString appendString:buffer];

    } else {
        [scanner setScanLocation:([scanner scanLocation] + 1)];
    }
}

NSLog(@"%@", strippedString); // "123123123" 
```

stippeString 包含来自文本组的数字宪章，我只想更改这些数字字符的字体颜色。我知道 UITextView 中不可能有多种颜色，但是有什么可能的黑客方法或可以改变颜色的东西上面的字符串？请帮我做这件事提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T09:02:27.480

一个对象中不能*有*多种颜色。`UITextView`只有一种颜色是可能的。

但是您可以使用一些潜在的替代方案。我知道的一个是 JTextView，其[源代码可在此处获得](http://github.com/jeremytregunna/JTextView)。您可能可以在 StackOverflow 上或通过 Google 查找其他替代方案。重要的是他们需要处理 " `NSAttributedString`" 对象（这是如何将字体样式分配给字符串中的范围）。

我怀疑这是 Apple 将在即将发布的 iOS 版本（例如 iOS 6）中修复的这些经常要求的问题之一，但在它宣布之前我们不会知道它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T09:03:58.917

您可以继承 UITextview 并将`layerClass`方法更改为 return `CATextLayer`。您现在可以将 NSAttributedString 用于`CustomTextView.Layer`.

*   将 customTextView.layer 转换为 CATextLayer
*   您可以在 NSAttributedString 中有多种颜色

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T09:06:44.333

核心文本可以帮助您为文本着色，或者您可以使用 uiwebview。

以这个[链接为例](http://www.raywenderlich.com/4147/how-to-create-a-simple-magazine-app-with-core-text)

# sql - 动态游标的插入和删除示例

> ID：10751417
> 
> 赞同：-2
> 
> 时间：2012-05-25T08:57:41.193
> 
> 标签：sql, oracle, plsql, oracle10g, oracle11g

使用`Execute Immediate`for `FORALL`，`BULK`收集 pl/sql 块：

```
FORALL i in rowid.FIRST ..rowid.LAST
Execute Immediate 'Delete table_name  where rowid '=rowid(i) 
```

上面的东西是行不通的。谁能给出`insert`and的语法`delete`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T09:25:37.577

以下是如何实现此目的的示例：

```
create table brainoverflow as ( select * from all_objects );

select count(*) from brainoverflow;

declare
  type ri is table of rowid;
  rowids ri;
begin
  select rowid bulk collect into rowids from brainoverflow;
  for i in rowids.first .. rowids.last loop
    execute immediate ('delete brainoverflow where rowid='''||rowids(i)||'''');
  end loop;
end;
/

select count(*) from brainoverflow; 
```

在 SQL*Plus 中执行：

```
oracle@stormwind:~$ sqlplus phil/phil

SQL*Plus: Release 11.2.0.3.0 Production on Fri May 25 11:37:40 2012

Copyright (c) 1982, 2011, Oracle.  All rights reserved.

Connected to:
Oracle Database 11g Enterprise Edition Release 11.2.0.3.0 - 64bit Production
With the Partitioning, OLAP, Data Mining and Real Application Testing options

SQL> create table brainoverflow as ( select * from all_objects );

Table created.

SQL> select count(*) from brainoverflow;

  COUNT(*)
----------
     72440

SQL> declare
  2    type ri is table of rowid;
  3    rowids ri;
  4  begin
  5    select rowid bulk collect into rowids from brainoverflow;
  6    for i in rowids.first .. rowids.last loop
  7      execute immediate ('delete brainoverflow where rowid='''||rowids(i)||'''');
  8    end loop;
  9  end;
 10  /

PL/SQL procedure successfully completed.

SQL> select count(*) from brainoverflow;

  COUNT(*)
----------
     0

SQL> 
```

# wpf - 带有 DataTemplateSelector 的 ContentControl - 需要帮助

> ID：10751419
> 
> 赞同：6
> 
> 时间：2012-05-25T08:57:45.610
> 
> 标签：wpf, datatemplate, contentcontrol, datatemplateselector

我遇到了一个令人讨厌的问题......也许有人可以（请！）提供帮助。我正在使用一个模型，该模型具有类型和枚举，以及一​​个属性，该属性应该为枚举中的每个选定类型保存 UI 模型：让我们像这样定义它们：

```
class ViewModel
   {
     Types selectedType{get;set;}
     UiModelBase editedModel{get;set;}
   } 
```

我想要一个内容控件，每次我更改 selectedType 时，它​​都会使用 datatemplateselector 来更改他的视图。

```
 <ListBox x:Name="RuleTypeList" ItemsSource="{Binding Source={StaticResource Types}}" SelectedItem="{Binding Path=selectedType}"/>     
    <!--Content control-->
    <ContentControl ContentTemplateSelector="{StaticResource ruleEditTemplateSelector}" 
             Content="{Binding SelectedItem, ElementName=RuleTypeList}"/> 
```

问题：在我创建的要由 ruleEditTemplateSelector 返回的 DataTemplates 中，**DataContext**是**Type**（同意这一点），但我需要访问editedModel 来创建我的DataTemplate ...我不知道如何处理它

提前致谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-31T07:23:52.013

解决方案不是很困难....

```
 DataContext="{Binding RelativeSource={RelativeSource AncestorType=ContentControl},Path=DataContext}" 
```

这样模板的上下文与他父母的内容相同，我可以访问他的成员。我想我试着这样做，但我没有正确编码......感谢 Cstein 参与！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T09:38:07.820

如果我理解你的话，你想在模板选择器中创建你的 DataTemplate，而数据模板是基于editedModel 属性的。

我会这样解决这个问题：

**Windows.xaml：**

```
<Window.Resources>
    <local:Selector x:Key="sel"/>

    <DataTemplate x:Key="templateA">
        <TextBlock Text="{Binding editedModel.PropertyName}"/>
    </DataTemplate>

    <DataTemplate x:Key="templateB">
        <TextBlock Text="{Binding editedModel.PropertyName}"/>
    </DataTemplate>

    <DataTemplate x:Key="templateC">
        <TextBlock Text="{Binding editedModel.PropertyName}"/>
    </DataTemplate>

</Window.Resources> 
```

内容控件和列表框保持不变。

**数据模板选择器：**

```
public class Selector : DataTemplateSelector
{
    public override DataTemplate SelectTemplate(object item, DependencyObject container)
    {
        if (item is ClassA)
            return (container as FrameworkElement).FindResource("TemplateA") as DataTemplate;
        else if (item is ClassB)
            return (container as FrameworkElement).FindResource("TemplateB") as DataTemplate;
        else if (item is ClassC)
            return (container as FrameworkElement).FindResource("TemplateC") as DataTemplate;
        return null;
    }
} 
```

这将根据项目的类型返回现有的数据模板。我希望我理解你的权利，它可以帮助你。

# matlab - Matlab YTick 和 XTick 值

> ID：10751420
> 
> 赞同：0
> 
> 时间：2012-05-25T08:57:47.017
> 
> 标签：matlab

我需要获取图中表示的所有值（也在 Y 轴和 X 轴上）。我使用了`YTick`and `XTick`，但是在某些情况下，`get()`函数并没有得到所有代表值（不管轴是什么）。

例如：
-假设我们在绘图的 X 轴上有下一个值：`0 1 2 3 4 5 6 7 8`
-`XTick`只给我`0 2 4 6 8`值:(

怎么可能`XTick`给我的值与图中的所有值都不匹配？
我也尝试过使用`YMinorTick`and `XMinorTick`，它也没有帮助......

如果你知道，请给我一些解决方案！
谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T10:17:35.527

确保您选择了正确的图形和轴。一种方法是单击所需的轴，然后执行`get(gca,'XTick')`where`gca`为您提供当前轴的句柄（您可以这样做`help gca`以获取更多信息）。您还可以使用`figure(f)`and `subplot()`（使用正确的参数）选择它，以返回您感兴趣的图形和子图。

还有其他方法可以做到这一点，但请确保您当前的轴是您正在使用的轴`get`。

或发布您的准确代码以进行`get()`通话。

最后，如果您只是想缩放，为什么不直接使用`axis`命令。像这样`axis([xmin xmax ymin ymax]);`

# apache2 - 使用 Apache ProxyPass 的反向代理重定向而不是透明地通过

> ID：10751427
> 
> 赞同：11
> 
> 时间：2012-05-25T08:58:25.983
> 
> 标签：apache2, reverse-proxy, httpd.conf, proxypass

我在 Tomcat 中运行了一个 Web 应用程序`http://<server>:8080/app/portal/`。我希望全世界都能通过 URL 看到这个应用程序`http://<server>/portal/`。

为此，我使用 Apache 2.2 设置了一个反向代理。根据[ProxyPass 的文档，](http://httpd.apache.org/docs/2.0/mod/mod_proxy.html#proxypass)我希望反向代理能够透明地传递所有请求。我的浏览器不应该知道 Tomcat URL。

这是我的配置：

没有虚拟主机，我将这些行添加到我的 httpd.conf

```
<Location /portal/>
    AllowOverride All
    RewriteEngine On
    ProxyPass  http://server:8080/app/portal/
    ProxyPassReverse http://server:8080/app/portal/
 </Location> 
```

当我使用 Firefox 打开`http://<server>/portal/`时，我得到一个 302 Moved Temporarily，所有后续调用都从我的浏览器直接转到`http://<server>:8080/app/portal/`. 我的浏览器指向这个 URL。

这不是我对反向代理的期望。是我做错了配置还是我误解了反向代理的目的？我应该怎么做才能得到我想要的行为？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T12:03:41.160

我试图评论来自 davidethell 的答案，但无法正确格式化这些行，所以这就是我发现的：

问题是反向代理似乎只适用于在我的 Tomcat 中部署 War 的 URL，而不适用于 Tomcat 内的 servlet。这导致了 2 次重写，其中一次是反向代理，另一次只是重写后面的所有内容。

```
RewriteEngine On
RewriteRule   ^/portal/$ /portal/portal
RewriteRule   ^/portal(.+) http://<server>:8080/app$1 [P] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-09-08T08:48:34.340

您忘记在反向代理配置中添加以下选项：

```
ProxyPreserveHost On 
```

您可以使用 Url Rewriting 实现相同的行为，但文档中不建议这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T10:23:32.417

您是否尝试过使用 mod_rewrite 代理选项而不是 ProxyPass？就像是：

```
RewriteRule ^$ http://server:8080/app/portal/ [P] 
```

# jquery - 在剑道网格单元中初始化小部件？

> ID：10751433
> 
> 赞同：4
> 
> 时间：2012-05-25T08:58:39.120
> 
> 标签：jquery, jquery-templates

无论如何要在`kendo`网格单元（`td`）中初始化自定义小部件？

我尝试的是

```
$("#container").kendoGrid({
    dataSource: {
        data: dataSource,
        pageSize: 8,
    },
    height: 280,
    scrollable: {
        virtual: false
    },
    columns: ["Name", "StartTime", "EndTime"],
    rowTemplate: $.template($("#rowTemplate"))
}); 
```

在行模板中

```
<script id="rowTemplate" type="text/x-jquery-tmpl">
    <tr><td>
        <div class="">
            {{html reFill(this.data) }}
        </div>
    </td></tr>                
</script> 
```

```
function reFill(data){
    var td = $('<div><div>').expander();
    return td[0].innerHTML;
} 
```

扩展器小部件有一个`div`，我列出了单击`div`以执行某些操作。

这里的问题是当我点击那个时`div`，点击事件没有触发。

我想知道问题出在模板中，还是有什么最好的方法来初始化剑道网格单元格中的小部件？

# jquery - Jquery淡入淡出背景/表格行上的动画背景颜色

> ID：10751435
> 
> 赞同：3
> 
> 时间：2012-05-25T08:58:41.197
> 
> 标签：jquery, jquery-ui, html-table

经过大量谷歌搜索和查看其他帖子后，我仍然无法确定这是否可能。我想基本上在我的表格行上设置一个背景颜色，在 :hover 上快速褪色为另一种颜色 - Jquery 可以做到这一点吗？

我正在使用多个表格，这些表格将具有或希望具有不同颜色的背景悬停，目前我只使用 CSS 来执行悬停事件，但显然我想尝试添加一个微妙但很好的效果，因为它们是很好的矮胖的表格行。

****编辑****

我找到了解决方案：我正在使用 Jquery UI -

```
$('tr').mouseover(function() {
    $('td', this).stop(true, true).animate
        ({ backgroundColor: "red" }, 1000);
});

$('tr').mouseout(function() {
    $('td', this).stop(true, true).animate
        ({ backgroundColor: "#666" }, 1000);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T09:16:14.977

您可以使用 jQuery UI 的[Color Animate 效果](http://jqueryui.com/demos/animate/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T10:39:12.300

由于您希望表格单元格的背景悬停事件具有不同的颜色，因此此[jsFiddle](http://jsfiddle.net/UBtFz/)向您展示了如何使用背景颜色属性通过**NTSC 颜色的伪颜色映射来更改鼠标悬停时每个单元格的颜色**。

不需要**jQuery**或其他库，因为这个**纯 CSS 解决方案**可以快速跟上用户的鼠标位置。

我认为在我提供的示例中使用**动画淡入淡出**会使太多的单元格**在过渡中徘徊，**从而导致混乱。也就是说，如果需要，添加 jQuery 动画效果仍然很容易，但这取决于您的表格布局方案。

这是一个使用 jQuery修改过的[jsFiddle 。](http://jsfiddle.net/UBtFz/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T14:30:30.037

我找到了解决方案：我正在使用 Jquery UI -

```
$('tr').mouseover(function() {
    $('td', this).stop(true, true).animate
        ({ backgroundColor: "red" }, 1000);
});

$('tr').mouseout(function() {
    $('td', this).stop(true, true).animate
        ({ backgroundColor: "#666" }, 1000);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T09:14:54.110

这是我在我的一个项目中使用的代码。

```
 $('#table1 td, #table2 td').hover(function(){
        $(this).parents('tr').addClass('active').animate({opacity: 0.65,}, 500);
        $(this).parents('tr').addClass('active').animate(
             {opacity: 0.65,}, 500, function() {
           //Animation complete.
           $(this).animate({opacity: 1,}, 'slow');
     });
        $(this).mouseleave(function(){
            $(this).parents('tr').removeClass('active');
        });
    }); 
```

而在你的`css`，你应该有类似的东西：

```
#table1 .active { background: #CCC;}
#table2 .active { background: #F2F2F2;} 
```

# xml - 属性的 XML 验证失败

> ID：10751437
> 
> 赞同：2
> 
> 时间：2012-05-25T08:58:46.263
> 
> 标签：xml, validation, xsd, xerces

我在针对我定义的模式验证 xml 时遇到了一些问题。奇怪的是，只有当我使用默认命名空间时验证才会失败，`xmlns="http://retis.sssup.it/duck-lab"`而如果我将其定义为`xmlns:dl="http://retis.sssup.it/duck-lab"`.

当我使用空命名空间时，验证仅在具有以下消息的属性上失败：

```
cvc-complex-type.3.2.2: Attribute 'data_len' is not allowed to appear in element 'data'.    
cvc-complex-type.4: Attribute 'data_len' must appear on element 'data'. 
```

有效的 XML：

```
<dl:duck xmlns:dl="http://retis.sssup.it/duck-lab" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://retis.sssup.it/duck-lab ../duck.xsd ">
...
        <dl:data dl:data_len="1" dl:data_name="name uint" dl:data_type="uint16" dl:endianess="big-endian"/> 
```

无效的 XML：

```
<duck xmlns="http://retis.sssup.it/duck-lab" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://retis.sssup.it/duck-lab ../duck.xsd ">
...
    <data data_len="1" data_name="name uint" data_type="uint16" endianess="big-endian"/> 
```

**- 编辑 -**

鸭子.XSD

```
<schema xmlns="http://www.w3.org/2001/XMLSchema" targetNamespace="http://retis.sssup.it/duck-lab"
    xmlns:dl="http://retis.sssup.it/duck-lab" elementFormDefault="qualified">

    <include schemaLocation="datatypes.xsd"/>
    <include schemaLocation="duck_message.xsd"/>

    <complexType name="DuckDefinitionType" block="#all" final="#all">
        <sequence>
            <element type="dl:MessageType" name="message_description" form="qualified"/>
        </sequence>
    </complexType>

    <element name="duck" type="dl:DuckDefinitionType" />

</schema> 
```

数据类型.XSD

```
<schema xmlns="http://www.w3.org/2001/XMLSchema" targetNamespace="http://retis.sssup.it/duck-lab"
    xmlns:dl="http://retis.sssup.it/duck-lab" elementFormDefault="qualified">
        <attribute name="data_name" type="string"/>
    <attribute name="data_len" type="nonNegativeInteger"/>
    <attribute name="data_type" type="string"/>
    <attribute name="endianess" type="string"/>
        <element name="data">
        <complexType>
            <attribute ref="dl:data_name" use="required"/>
            <attribute ref="dl:data_len" use="required"/>
            <attribute ref="dl:data_type" use="required"/>
            <attribute ref="dl:endianess" use="required"/>
        </complexType>
    </element>
</schema> 
```

DUCK_MESSAGE.XSD

```
<schema xmlns="http://www.w3.org/2001/XMLSchema" targetNamespace="http://retis.sssup.it/duck-lab"
    xmlns:dl="http://retis.sssup.it/duck-lab" elementFormDefault="qualified">

    <include schemaLocation="datatypes.xsd"></include>
    <complexType name="MessageType">
        <sequence maxOccurs="unbounded">
            <element ref="dl:data"></element>
        </sequence> 
    </complexType>
</schema> 
```

显然我可以绕过定义非空命名空间的问题，但我想了解什么是错的。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T14:55:50.350

对属性的默认命名空间的处理是不同的——没有命名空间前缀的属性不与默认命名空间相关联，它没有命名空间，请参见[此处](http://www.w3.org/TR/REC-xml-names/#scoping-defaulting)。

这意味着在无效的 XML 中，各种属性`data-len`等`data-name`没有命名空间，而架构`http://retis.sssup.it/duck-lab`由于`form="qualified"`指令将它们声明为在命名空间中。

# unit-testing - 如何使用 Spock/Build-Test-Data 对包含“where”或使用“namedquery”的方法进行单元测试？

> ID：10751439
> 
> 赞同：1
> 
> 时间：2012-05-25T08:58:54.110
> 
> 标签：unit-testing, grails, spock

我尝试了几种组合，但我无法测试依赖于 Grails 'where' 查询或 'named-query' 的方法。

顺便说一下，使用 Grails 2.0.3！

**服务代码**

```
def findPersonInCity(name, city) {
    Person p = Person .where{fullname =~ name && cities.contains(city)}.find()
} 
```

**测试**

```
@Build([Person,City])
class PersonSpec    

    // code omitted

    def "Find a person by name"() {
        when:
        City city = City.build(name: "NY")
        Person.build(fullname: "test", city)
        Person found = personService.findPerson("test", city)

        then:
        found.name == "test"
    }    
} 
```

我缺少什么来成功对我的“where”查询或“named-queries”进行单元测试？

我得到的错误似乎与关联的属性有关。groovy.lang.MissingMethodException：没有方法签名：grails.gorm.CriteriaBuilder.cities() 适用于参数类型：

当只查询名称时，它似乎有效.. :(

# java-me - 尝试使用 JSR-179 时引发 SecurityException

> ID：10751440
> 
> 赞同：1
> 
> 时间：2012-05-25T08:58:58.200
> 
> 标签：java-me, midp, midp-2.0, jsr179

我想通过以下代码获取手机`longitude`的`latitude`手机：

```
 public void commandAction(Command com, Displayable d) {
        if (com == position)
        {
            try
            {
                Criteria cr = new Criteria();
                cr.setHorizontalAccuracy(500);
                LocationProvider lp = LocationProvider.getInstance(cr);
                // get the location, one minute timeout
                Location l = lp.getLocation(60);
                Coordinates coords = l.getQualifiedCoordinates();
                if (coords != null)
                {
                    double longitude = coords.getLongitude();
                    double latitude = coords.getLatitude();
                    String sLong = String.valueOf(longitude);
                    String sLat = String.valueOf(latitude);
                    Tlongitude.setString(sLong);
                    Tlatitude.setString(sLat);
                }
            } catch (LocationException ex) {
                Tlongitude.setString("LocationException");
                Tlatitude.setString("LocationException");
            } catch (InterruptedException ex) {
                Tlongitude.setString("InterruptedException");
                Tlatitude.setString("InterruptedException");
            }
        }
    } 
```

问题是，当单击“位置”命令时，会显示系统警报：`java.lang.SecurityException : Application not authorized to access the restricted API`。

所以我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T09:37:47.977

您正在尝试访问一个位置 API，这是一个受限 API。为此，您必须使用[Verisign](http://www.verisign.com/)、[Thawte](http://www.thawte.com/)等签名证书对您的移动应用程序进行签名。

证书的费用约为 20K 印度卢比。

[您可以在此处](https://stackoverflow.com/a/8164404/996493)和[此处](https://stackoverflow.com/a/8323397/996493)访问我关于签名证书的其他答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T09:59:06.203

将相关权限添加到您的应用程序并使用相应安全域中的证书对其进行签名。

JSR179 规范在`javax.microedition.location`. 根据您需要代码执行的操作来选择您需要的那些。

如果位置功能组位于您要在其上运行代码的手机的受信任的第三方安全域中，则 Lucifer 的解决方案（Verisign 或 Thawte）将有所帮助。不过，手机的移动网络运营商或制造商可能已决定将位置信息放在他们的安全域中。

[https://stackoverflow.com/q/1716755](https://stackoverflow.com/q/1716755)包含 MIDP 安全模型的简要说明。

# java - 如何在 JSP 中编写 PHP 功能

> ID：10751446
> 
> 赞同：-1
> 
> 时间：2012-05-25T08:59:23.377
> 
> 标签：java, jsp

有没有办法在jsp中编写相同的功能来向服务器发送数据？我想使用 Java 从 Flash 捕获图像并将其发送到服务器。在我搜索的任何地方，我都会得到相同的脚本将其发送到服务器。jsp不能这样吗？

```
<?php
if ( isset ( $GLOBALS["HTTP_RAW_POST_DATA"] )) {
    $uniqueStamp = date(U);
    $filename = $uniqueStamp.".jpg";
    $fp = fopen( $filename,"wb");
    fwrite( $fp, $GLOBALS[ 'HTTP_RAW_POST_DATA' ] ); 
    fclose( $fp );

    echo "filename=".$filename."&base=".$_SERVER["HTTP_HOST"].dirname($_SERVER["PHP_SELF"]);
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T10:16:04.850

在 Java 中上传文件的最简单方法之一是利用[Apache Commons FileUpload](http://commons.apache.org/fileupload/)。编写文件很简单——使用`java.io`.

# singlepage - 使用淘汰赛和结果卡住 MVVM 声明

> ID：10751450
> 
> 赞同：0
> 
> 时间：2012-05-25T08:59:39.603
> 
> 标签：singlepage, upshot, single-page-application

我有这种格式的服务返回数据 ![在此处输入图像描述](../Images/4f83e17971b5dbe011ab3716dc02f901.png)

现在我正在尝试以这种方式访问​​ html 中的数据 ![在此处输入图像描述](../Images/74d06f83e5b14789588f6b0c72d81a25.png)

我可以访问当前期间，但不能访问 WebChartView 的 Id。

顺便说一句，我正在使用 MVC4 chartResult 是视图模型

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T12:18:43.417

实际上，数据属性是 WebChartViews 的集合，所以我尝试像这样 Result().Data() 循环遍历并且它有效

# c++ - 在哪里初始化随机种子以通过多个随机模块使用？

> ID：10751458
> 
> 赞同：4
> 
> 时间：2012-05-25T09:00:18.227
> 
> 标签：c++, random, srand

所以，每次我开发一些大的东西时，多个模块组合在一起构建最终功能时，我一直在想同一个问题：如果超过 1 个模块需要使用随机函数，在哪里初始化随机种子？

如果我有某个需要随机的类（例如，通过使用自我实现的快速排序对输入数组进行排序来初始化自身的类，所以我需要一个随机的枢轴选择），我通常有一个私有`static bool isRandOn;`变量，所以在我开始之前随机枢轴选择，我检查该变量并`srand(time(NULL));`在随机尚未打开时执行。

如果我在命名空间中有大量实用程序函数，我会做类似的事情：我将这样一个变量放在我的 utils 库中的匿名命名空间中，并与类做或多或少相同的事情。

*我遇到的问题*是在组合这些模块时。就其本身而言，我知道每个模块不会多次设置种子。但是，我希望能够一起使用不同数量的模块，我希望其他人能够独立于其他人使用我的一个或多个模块......

那么，处理多个需要随机种子的模块**的最佳方法是什么？**在每个模块中设置种子？根本不设置种子，而是记录随机的用法并让用户在他想使用模块时初始化种子？第三点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T09:12:30.640

我建议使用 Boost.Random 而不是依赖在程序级别共享的一些全局状态。

Boost.Random 有两个概念：

*   引擎：生成随机数
*   分布：调整引擎的结果以提供适合特定分布（正态、泊松、高斯......）的结果

然后，每个模块可能有自己的引擎，或者实际上是其中的几个：没有特定理由让给定引擎在同一模块内的几个不同功能之间共享。

最后一句话：无论您做什么，请确保您有一种方法可以确定地设置种子以用于错误重现目的。错误重现可能会受益于拥有多个引擎（部件的隔离有帮助）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T09:07:29.787

您可以为随机数生成创建一个特殊的“模块”，并从应用程序的其他部分使用它。然后，您只需在初始化随机数模块时播种一次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T09:29:22.540

@penelope 给出了正确答案。后面有一些生成伪随机数序列的复杂算法`rand()`。这就像一些函数`rand_func(prev_rand)`，它从前一个生成下一个伪随机数。您第一次调用`srand(time(NULL))`，在这些术语中设置`prev_rand`为 假设`time(NULL)`是非常不确定的。因此，您可以安全地`srand()`多次调用 (which sets )。

特殊问题是您是否需要*可预测*的伪随机序列：例如，`srand(0)`等等。但这似乎不是您的情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-23T14:51:04.923

我想避免总是重复相同的初始随机序列的最佳方法是在调用`random()`函数的每个模块中执行以下操作：

```
/* Global variable to remember if we already initialized the PRNG */
static bool seed_initialized = false;

/* Helper function to avoid having always the same sequence again and again */
static void
prng_init (unsigned int seed)
{
  if (!seed_initialized)
    {
      srandom (seed);
      seed_initialized = true;
    }
} 
```

而且，每次`random()`在函数中使用时，都会使用以下内容启动函数：

```
 /* Initializing PRNG with a 'reasonably strong' random seed for our purpose */
 prng_init (time (NULL) - getpid()); 
```

这样，您可以确保：

1.  您将至少在第一次通过时初始化您的 PRNG；

2.  您永远不会在模块内多次重新初始化随机序列。

希望这有帮助！

# c++ - Microsoft C++ 编译器有错误吗？

> ID：10751470
> 
> 赞同：1
> 
> 时间：2012-05-25T09:01:04.453
> 
> 标签：c++, visual-studio-2010, visual-c++

```
usigned int x=1;
signed int y = -1;
double z = y * x * 0.25; 
```

我正在使用 Microsoft Visual Studio 10 C++ 编译器。为什么 z 没有 -0.25 值？正如我从反汇编中看到的那样，它进行有符号整数乘法（imul），将 edx 的结果放在堆栈上，并用 0! 扩展它，因为它将是一个无符号整数。之后，它使用 FP 指令将其相乘。

```
.............
imul        edx,dword ptr [ecx]  
mov         dword ptr [ebp-98h],edx  
mov         dword ptr [ebp-94h],0
fild        dword ptr [ebp-98h]  
fmul        qword ptr [__real@3fd0000000000000 (1402FB8h)]  
fstp        qword ptr [z] 
```

为什么有符号*无符号的乘法结果被解释为无符号？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-25T09:09:12.233

表达式`y * x * 0.25`与`(y * x) * 0.25`C 和 C++ 中的关联。

`unsigned int`当 an和 a相乘时`signed int`，两个操作数都被转换为`unsigned int`并且结果也是`unsigned int`由于 C 和 C++ 中算术表达式的整数转换规则，因此结果`y * x`将同时出现`UINT_MAX - 1`在 C 和 C++ 中。

无论您将示例编译为 C 还是 C++，您的示例都不会出现编译器错误。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-25T09:07:37.007

这实际上是根据规范。C++11、5.9：

> 许多期望算术或枚举类型的操作数的二元运算符会导致转换并以类似的方式产生结果类型。目的是产生一个公共类型，这也是结果的类型。这种模式称为通常的算术转换，其定义如下：
> 
> [...]
> 
> 否则，应在两个操作数上执行积分提升 (4.5)。然后将以下规则应用于提升的操作数：
> 
> [...]
> 
> *   否则，如果无符号整数类型的操作数的秩大于或等于另一个操作数类型的秩，则将有符号整数类型的操作数转换为无符号整数类型的操作数的类型。

这里的两个操作数是`y * x`有符号整数和无符号整数，它们具有相等的[整数转换等级](https://www.securecoding.cert.org/confluence/display/seccode/INT02-C.+Understand+integer+conversion+rules)；所以`y`最终被转换为无符号。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-25T09:09:39.293

这在标准的 [expr] 部分中有描述：

> ……
> 
> 否则，应在两个操作数上执行积分提升 (4.5)。然后将以下规则应用于提升的操作数：
> 
> — 如果两个操作数具有相同的类型，则不需要进一步转换。
> 
> — Otherwise, if both operands have signed integer types or both have unsigned integer types, the operand with the type of lesser integer conversion rank shall be converted to the type of the operand with greater rank.
> 
> — Otherwise, if the operand that has unsigned integer type has rank greater than or equal to the rank of the type of the other operand, the operand with signed integer type shall be converted to the type of the operand with unsigned integer type.

The expression is evaluated left to right and so `y * x` is calculated first. This has two integral types of the same rank, one operand signed and the other unsigned. Hence the signed value is converted to an unsigned value, as described in the final paragraph of the standards extract.

# database - Quartz 调度器的数据库连接

> ID：10751472
> 
> 赞同：0
> 
> 时间：2012-05-25T09:01:08.980
> 
> 标签：database, quartz-scheduler, scheduler

我是 Quartz 调度程序的新手。我想将数据库连接到调度程序...我如何连接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T09:51:40.793

它没有什么特别之处。如果您展示[了您尝试过](http://whathaveyoutried.com)的内容，那就太好了，但我会按照指示进行：

1.  创建你的`Job`(org.quartz.Job) 类。
2.  在`execute`方法中，创建并使用 JDBC 连接。

就这样。

现在，如果您想了解 JDBCJObStore，有一篇很棒的[文章](http://www.ibm.com/developerworks/java/library/j-quartz/)可以学习。

# payment-gateway - Authorize.net CIM 配置文件编辑 CC

> ID：10751480
> 
> 赞同：0
> 
> 时间：2012-05-25T09:02:04.593
> 
> 标签：payment-gateway, payment, authorize.net, authorize.net-cim

Authorize.net CIM 允许使用新信用卡、到期日期和 CVV 信息编辑个人资料。

如果客户将配置文件用于订单并且金额已通过一张信用卡使用该配置文件授权并且在捕获金额之前，客户使用新的信用卡信息编辑相同的配置文件怎么办？

如果客户使用一个配置文件下订单并且在客户删除配置文件时捕获金额之前怎么办。

任何帮助将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T16:41:48.597

使用他们的 CIM 个人资料下订单*后，当时*与他们的个人资料相关联的所有信息都将用于该付款。他们在下订单后所做的编辑只会影响未来使用 CIM 进行的付款。这同样适用于删除配置文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T17:08:49.613

根据我的观察和猜测，当客户使用他当前的个人资料信息进行交易时，会使用真实的卡信息（显然 Auth.net 个人资料 ID 在网关之外没有任何意义），并且在交易后更改客户个人资料信息不应该影响.

# objective-c - RestKit - RKFetchedResultsTableController : mapObjectsWithClass

> ID：10751481
> 
> 赞同：1
> 
> 时间：2012-05-25T09:02:11.430
> 
> 标签：objective-c, ios5, restkit

你好，

我正在使用 a`RKFetchedResultsTableController`来从我的 WS 中获取数据并驱动我的 tableview。

我`RKTableViewCellMapping`用来映射我的模型和单元格。

这是我设置 cellMapping 的方法：

```
RKTableViewCellMapping *cellMapping = [RKTableViewCellMapping cellMapping];
cellMapping.cellClassName = @"CrudCategoryCell";
cellMapping.reuseIdentifier = @"CrudCategory";
cellMapping.rowHeight = 100; 
[cellMapping mapKeyPath:@"name.name" toAttribute:@"nameLabel.text"];
[cellMapping mapKeyPath:@"desc.desc" toAttribute:@"descLabel.text"];

[self.tableController mapObjectsWithClass:[CrudCategory class]            
                      toTableCellsWithMapping:cellMapping]; 
```

如您所见，我的模型由一个类 : 表示`CrudCategory`。

这个类有两个属性：`name`, `desc`; 分别为`CrudCategoryName`和`CrudCategoryDesc`。

这些类继承自`NSManagedObject`.

运行应用程序时：

```
Terminating app due to uncaught exception 'NSInternalInconsistencyException',
reason: 'Cannot build a tableView cell for object <NSManagedObject: 0x6c4fb90> 
(entity: CrudCategory; id: 0x6c4d900 <x-coredata://FA7323F8-519D-4AA9-AC6E-  BD30446B4C9B/CrudCategory/p210> ; data: <fault>): 
No cell mapping defined for objects of type 'NSManagedObject'' 
```

我能够通过使用使其工作：

```
[self.tableController mapObjectsWithClass:[NSManagedObject class]
                      toTableCellsWithMapping:cellMapping]; 
```

代替 ：

```
[self.tableController mapObjectsWithClass:[CrudCategory class]
                      toTableCellsWithMapping:cellMapping]; 
```

我真正不明白的是，异常声明没有类型对象的映射`NSManagedObject`，当我使用`NSManagedObject`类而不是`CrudCategory`- 它只是继承自`NSManagedObject`- 一切都很好......

这是我的环境：

*   ios5
*   RestKit（github 中的最后一个稳定版本）
*   弧
*   故事板

如果有人有想法:)

谢谢 ！

**编辑 - 已解决：** 我通过为每个实体指定适当的类来解决数据模型中的这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T11:57:34.617

Your CrudCategory class must have properties associated in it with the coredata model you have. Also you must be using this class to define mapping for the restkit mapping provider.

When you just use NSManagedObject class youre using a superclass which does not define the attributes in the subclass CrudCategory hence you see the issue. (I think!)

The question is, why do you want to use NSManagedObject Class instead of CrudCategory? Using CrudCategory is the right way of doing this as I use a similar method in my app + it is the method that Restkit exampls RKGithub uses.

# javascript - jquery中的多个显示/隐藏表单

> ID：10751482
> 
> 赞同：0
> 
> 时间：2012-05-25T09:02:22.847
> 
> 标签：javascript, jquery, ajax

您好，我想要目录中的文件列表和每个文件下方的表单，允许我的用户命名它们。这一切都很清楚 - 我在 php 中制作了它，但现在我想要这个列表和隐藏表单，当我点击我的文件名之一时，表单显示在点击的名称下。

像这里的东西：http: [//papermashup.com/demos/jquery-sliding-div/#](http://papermashup.com/demos/jquery-sliding-div/#)

这是代码： http: [//papermashup.com/simple-jquery-showhide-div/](http://papermashup.com/simple-jquery-showhide-div/)

但它的工作原理是，当我单击一个文件时，所有表单都会显示或全部隐藏。如何修复它仅适用于单击的文件？

JSFIDDLE 示例：http: [//jsfiddle.net/qbNrR/](http://jsfiddle.net/qbNrR/)

**@UPDATE - 类似的问题**

嘿，我在提交 ajax 表单时遇到了类似的问题 - 使用本教程： http: [//net.tutsplus.com/tutorials/javascript-ajax/submit-a-form-without-page-refresh-using-jquery/](http://net.tutsplus.com/tutorials/javascript-ajax/submit-a-form-without-page-refresh-using-jquery/)

我的表单在 div id=#upform 中，当我尝试通过 $.ajax 提交其中任何一个时，它只提交第一个，这是代码：

```
<script> 
 $(function() {
    $(".button").click(function() {
        var txt = $(".tekst#test").val();
        var dataString = 'tekst=' + tekscior;
        $.ajax({
            type: "POST",
            url: "upload/base",
            data: dataString,
            success: function() {
                $('#upform').html("<div id='message'></div>");
                $('#message')
                    .html("<h2>described!</h2>")
                    .append("<p>thanks!</p>")
                    .hide()
                    .fadeIn(1500, function() {
                        $('#message')
                            .append("<img id='checkmark' src='http://artivia-dev2/i/check.png' />");
                });
            }
        });
        return false;
    });
});​
</script> 
```

这是我的表格：

// 只有这一个被提交，即使我正在提交第二个！

```
<div class="slidingDiv">
<div id="upform">
<form name="contact" action="">  
<input type="text" value="TESTFORM" class="tekst" id="test">
<input type="submit" name="submit" class="button" id="submit" value="Send" />
<form>
</div> 

<div class="slidingDiv">
<div id="upform">
<form name="contact" action=""> 
<input type="text" value="TESTFORM" class="tekst" id="test">
<input type="submit" name="submit" class="button" id="submit" value="Send" />
<form>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T09:22:56.647

您可以使用`next()`jQuery 方法。然后您的代码将如下所示：

```
$(document).ready(function() {
    $(".slidingDiv").hide();
    $(".show_hide").show();
    $('.show_hide').click(function(e) {
        $(e.target).next(".slidingDiv").slideToggle();
    });
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T09:07:49.873

尝试 event.currentTarget 获取触发点击事件的表单

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T09:10:36.330

在点击事件上使用 jquery 之类的

```
$(this).show(); // or hide(); 
```

如示例

```
$('.show_hide').click(function(){
  //$(".slidingDiv").slideToggle();
  $(this).slideToggle();
}); 
```

# cassandra - cassandra 读取大量键的性能

> ID：10751490
> 
> 赞同：1
> 
> 时间：2012-05-25T09:03:03.377
> 
> 标签：cassandra, phpcassa

这是情况

我正在尝试从 CF 获取大约 10k 个密钥。集群大小：10 个节点节点上的数据：250 GB 分配的堆：12 GB 使用的 Snitch：属性 snitch，在同一个数据中心有 2 个机架。不。每个节点 cf 的 sstables 数：大约 8 到 10

我是超列方法。每行包含大约 300 个超列，其中包含 5-10 列。我正在使用 10k 行键和 1 个超列触发 multiget。

当第一次触发调用时，大约需要 30 到 50 秒才能返回结果。之后 cassandra 会从密钥缓存中提供数据。然后它会在 2-4 秒内返回结果。

所以 cassandra 读取性能阻碍了我们的项目。我正在使用 phpcassa。有什么办法可以调整 cassandra 服务器以便更快地获得结果？

超级列方法会影响读取性能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T09:07:49.147

超级列的使用最适合子列数量相对较少的用例。在此处阅读更多信息： [http ://www.datastax.com/docs/0.8/ddl/column_family](http://www.datastax.com/docs/0.8/ddl/column_family)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T16:44:37.053

以防万一您还没有这样做，因为您使用的是 phpcassa 库，请确保您已经编译了 Thrift 库。根据 phpcassa 库文件夹中的“INSTALLING”文本文件：

## 使用 C 扩展

C 扩展对 phpcassa 的性能至关重要。

您需要配置和制作才能使用 C 扩展。

```
cd thrift/ext/thrift_protocol
phpize
./configure
make
sudo make install 
```

将以下行添加到您的 php.ini 文件中：

```
extension=thrift_protocol.so 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T04:53:04.617

在对这些东西做了很多 RND 之后，我们认为没有办法让这个工作达到最佳状态。当 cassandra 第一次获取这 10k 行时，这将需要时间，并且没有办法对此进行优化。

1) 然而在实际中，人们访问相同记录的概率更大。所以我们最大限度地利用了密钥缓存。密钥缓存的默认设置是 2 MB。因此，我们可以负担得起将其增加到 128 MB，而不会出现内存问题。加载数据后，运行预期的查询以预热密钥缓存。

2) JVM 在 8-10 GB 时最佳工作（没有数字来证明它。只是观察）。

3）最重要的是，如果您使用的是物理机（不是云或虚拟机），那么请检查您正在使用的磁盘调度程序。将其设置为 NOOP，这对 cassandra 有好处，因为它从一个部分读取所有密钥，从而减少了磁盘头的移动。

上述更改有助于将查询所需的时间缩短到可接受的范围内。

如果您有体积小但经常访问的 CF，则除了上述更改之外，还可以为其启用行缓存。

希望以上信息有用。

# objective-c - initWithNibName : 我没有滚动条也没有导航栏？

> ID：10751491
> 
> 赞同：0
> 
> 时间：2012-05-25T09:03:06.917
> 
> 标签：objective-c, ios, uinavigationcontroller, uiscrollview, interface-builder

所以我有一个带有 IBAction 的按钮，它通过它的 initWithNibName 方法指向另一个 ViewController。一切都嵌入在 NavigationController 中。

我还为这个 ViewController 创建了一个 .xib，这是一个快速截图：

![在此处输入图像描述](../Images/8e0b902daaf3f53a1e37e4926d94c791.png)

这是我的代码：

。H

```
@interface ModeEmploiController : UIViewController
{
    IBOutlet UIScrollView *scrollView;
    UITextView *vueOffres, *vueInfos, *vueGrilles;
}

@property (nonatomic, retain) IBOutlet UIScrollView *scrollView; 
```

.m

```
@implementation ModeEmploiController

@synthesize scrollView;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) 
    {
        [scrollView setScrollEnabled:YES];
        [scrollView setContentSize:CGSizeMake(320, 529)];
        // Here I define vueOffres, vueInfos and vueGrilles and for each of them :
        [self.view addSubview:vueGrilles/vueInfos/vueOffres];
    }
} 
```

但是当我运行我的应用程序时，我的滚动未启用，并且我没有导航控制器的导航栏。发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T09:27:23.007

`ScrollView`在我称为我的内容视图中添加另一个视图。该做的

```
self.scrollView.contentSize = self.contentView.frame.size; 
```

对于导航栏，您需要有一个 uinavigation 控制器并使您的控制器成为导航控制器的 rootviewcontroller。像这样

```
-(IBAction)MyButton:(id)sender
{
    MyViewController *controller = [[MyViewController alloc] initWithNibName:@"MyView" bundle:nil];
    UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:controller];
    [self.navigationController presentModalViewController:navController animated:YES];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T09:29:47.170

您的初始化代码使用了错误的方法。

由于您使用的是 Storyboard，因此您的视图控制器正在从 nib 文件中取消归档。初始化控件的正确位置是在`awakeFromNib`方法中。

确保您已为滚动视图设置了 IBOutlet 属性并将其连接到情节提要中，然后：

```
- (void)awakeFromNib {
    [self.scrollView setScrollEnabled:YES];
    [self.scrollView setContentSize:CGSizeMake(320, 529)];
    // Here I define vueOffres, vueInfos and vueGrilles and for each of them :
    [self.view addSubview:vueGrilles/vueInfos/vueOffres];
} 
```

这只留下了您正在添加的子视图的问题。是什么`vueGrilles/vueInfos/vueOffres`？您应该在方法中正确创建此视图`viewDidLoad`并将其添加为子视图，而不是在此初始化程序中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T09:12:51.217

从 中删除您`ModeEmploiController`的`xib`，但保留其子项`View`和`ScrollView`。

现在单击`File's Owner`并`ModeEmploiController`从右侧面板中的身份检查器中放置。

现在右键单击`File's Owner`并连接`view`to`View`和`scrollView`to的属性`ScrollView`。

# java - 将项目添加到 JList

> ID：10751496
> 
> 赞同：0
> 
> 时间：2012-05-25T09:03:47.900
> 
> 标签：java, swing, jlist, listitem

我想将项目添加到我的列表中。我的列表首先由讲师自动调用的 initComponent() 初始化（我使用的是 NetBeans，并且所有 GUI 组件都由 prog 自动初始化）。

我的问题是：

1.  假设我们有一个 Frame1，在这个框架中我们有一个“显示图像”按钮，当点击它时
2.  打开具有 JList 的 Frame2 ...
3.  通过Frame3成功添加图像列表...

下面是我的代码，我想在我的列表中列出所有图像：

```
private void setImagesToList()
{
    ***//bLayer is my Business Layer and _getNomOfSelectedImg() returns number of 
    //images.***

    int imagesCount = bLayer._getNomOfSelectedImg(); 

    ***// through my searches i fount that i've to create ListModel to hold my items*** 
    DefaultListModel listModel = new DefaultListModel();

    if (imagesCount > 0) // there is/are image(s)
    {
        for(int i=0; i < imagesCount ; i++)
        {
            // ***i want to add image name and tooltip (image path) ***
            String imgName = bLayer._getImageName(i);
            String imgPath = bLayer._getImagePath(i);
            listModel.add(i, imgName);
            break;
        }
        images_List.setModel(listModel);
    }
} 
```

当我运行此代码时，它会在最后一行抛出 NullPointerException`images_List.setModel(listModel);`

怎么做才能显示这些项目，允许多选，添加鼠标点击事件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T11:33:12.310

是的，您可以添加工具提示。您只需在渲染器返回的组件上设置工具提示文本。将`JList`使用这些组件工具提示来确定正确的工具提示文本。这可以在`JList#getTooltipText`我复制相关部分的实现中看到

```
Component rComponent = r.getListCellRendererComponent(
                       this, getModel().getElementAt(index), index,
                       lsm.isSelectedIndex(index),
                       (hasFocus() && (lsm.getLeadSelectionIndex() ==
                                       index)));

            if(rComponent instanceof JComponent) {
                MouseEvent      newEvent;

                p.translate(-cellBounds.x, -cellBounds.y);
                newEvent = new MouseEvent(rComponent, event.getID(),
                                          event.getWhen(),
                                          event.getModifiers(),
                                          p.x, p.y,
                                          event.getXOnScreen(),
                                          event.getYOnScreen(),
                                          event.getClickCount(),
                                          event.isPopupTrigger(),
                                          MouseEvent.NOBUTTON);

                String tip = ((JComponent)rComponent).getToolTipText(
                                          newEvent);

                if (tip != null) {
                    return tip;
                } 
```

您是否还可以用这些新问题更新您的问题，因为您的“新问题的答案”会浮到底部

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T09:28:44.690

我发现了我的大错误:( :( 在调用 initComponent() 之前，我调用了将图像设置为列表的函数，这就是引发异常的原因..

谢谢大家的回答，但我还有更多问题：1）我可以将 ToolTipText 添加到列表项中吗，我想添加图像路径 2）你对“我的接受率”是什么意思...

# iphone - UISearchDisplayController 及相关搜索结果tableview

> ID：10751497
> 
> 赞同：0
> 
> 时间：2012-05-25T09:03:50.083
> 
> 标签：iphone

我在同一个 UIView 上有 2 个 UITableView 和 UISearchDisplayController。如何确定两个 UITableView 中的哪一个与 UISearchDisplay Controller 相关？

欢迎任何评论

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T09:11:21.453

您可以为 searchBars 和 tableViews 设置标签，并在 UISearchBarDisplayController 和 UITableView 委托的回调中适当地检查它们。

例如：

```
-(BOOL)searchDisplayController:(UISearchDisplayController *)controller shouldReloadTableForSearchScope:(NSInteger)searchOption
{
    if (controller.searchBar.tag == 1)
    {
        [self.tableView1 reloadData];
        return YES;
    }
    else if (controller.searchBar.tag == 2)
    {
        [self.tableView2 reloadData];
        return YES;
    }
    return NO;
} 
```

您始终可以在 UIViews 上使用标签来检查代码中的“谁是谁”。

希望这可以帮助。

# c# - 为什么这个工作但另一个失败（Linq To Xml）

> ID：10751499
> 
> 赞同：2
> 
> 时间：2012-05-25T09:04:09.227
> 
> 标签：c#, xml, linq, linq-to-xml

我在 LinqPad 上尝试了这个简单的查询，并对为什么第二个查询有效但第一个查询没有改变列表（**descen**）感到头疼。

*   我如何使它工作。我使用此代码克隆和修改 xml 属性、值

### 失败

```
var doc = XElement.Parse("<Root><Descendants>Welcome</Descendants><Descendants>Stack</Descendants><Descendants>Overflow</Descendants></Root>");
var descen = (from des in doc.Descendants("Descendants") select new XElement(des));
foreach (var desc in descen)
{
    desc.Value += DateTime.UtcNow;
}
descen.Dump();
doc.Dump(); 
```

### 作品

```
var doc = XElement.Parse("<Root><Descendants>Welcome</Descendants><Descendants>Stack</Descendants><Descendants>Overflow</Descendants></Root>");
var descen = (from des in doc.Descendants("Descendants") select new XElement(des));
foreach (var desc in doc.Descendants("Descendants"))
{
    desc.Value += DateTime.UtcNow;
}
descen.Dump();
doc.Dump(); 
```

### 摊位是我的电脑？？WTH

```
var doc = XElement.Parse("<Root><Descendants>Welcome</Descendants><Descendants>Stack</Descendants><Descendants>Overflow</Descendants></Root>");
var descen = (from des in doc.Descendants("Descendants") select des);
foreach (var desc in descen)
{
    desc.Value += DateTime.UtcNow;
}
var instance = from t in descen select new XElement(t);
doc.Elements("Descendants").LastOrDefault().AddAfterSelf(instance);
descen.Dump(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T09:08:47.987

在第一个查询中，`descen`是从现有元素到*新*元素的投影。它是懒惰的评估 - 每次迭代它时，它都会创建新元素。

在第一种情况下，您遍历`descen`并随时修改新元素。但是，这些修改过的元素在创建后很快就被有效地丢弃了——它们不是原始文档的一部分。

在第二种情况下，您修改了*原始*文档中的元素，因此当您迭代时`descen`，它将创建*修改后*元素的副本，并显示这些元素。

编辑：如果你想改变`descen`而*不是*原始文件，你可以`ToList()`在初始化部分的末尾添加`descen`. 例如：

```
var descen = (from des in doc.Descendants("Descendants")
              select new XElement(des)).ToList(); 
```

或者，更易读的 IMO：

```
var descen = doc.Descendants("Descendants")
                .Select(x => new XElement(x))
                .ToList(); 
```

您的最终代码挂起的原因是，随着`AddAfterSelf`迭代`instance`，它正在添加元素......但是这些元素是文档的一部分，这意味着它们是`descen`查询的一部分，这意味着它们是`instance`查询的一部分......所以迭代`instance`永远不会完成。

# javascript - get outer div by id, then get inner div by class

> ID：10751506
> 
> 赞同：0
> 
> 时间：2012-05-25T09:04:39.540
> 
> 标签：javascript, html, jquery-mobile

First I want to get the outer div by id, then the inner div by class (dynamically added by jquery mobile ui-collapsible content) and finally append a child text node to it.

```
<div id="aab" data-role="collapsible" data-content-theme="c">
     <h3>Heading</h3>
     <div class="ui-collapsible-content">
         <div id="coll">
             Collapsible Content
         </div>
     </div>
     </div>
     <p><button onclick='func()'>Button</button></p>    

   <script>
        function func() {
            var section = $("#aab > .ui-collapsible-content"); 
            section.appendChild(document.createTextNode("Hello world!"));
        }
    </script> 
```

I also tried things out with document.getElementById but somehow it doesn't work.. Thanks in advance!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T09:18:27.377

您已使用 jquery 进行选择，因此您应该使用它来添加子项

```
function func() {
  var section = $("#aab > .ui-collapsible-content"); 
  section.append("Hello world!");
} 
```

# powershell - 替代“下载”作为 PowerShell 动词？

> ID：10751509
> 
> 赞同：9
> 
> 时间：2012-05-25T09:04:48.600
> 
> 标签：powershell, naming

我有一个 PowerShell 函数`Download-File`，它使用`WebClient.DownloadFile`-- 因此得名。

当我尝试将`.ps1`脚本转换为`.psm1`模块时，PowerShell 警告我“下载”不在[推荐动词](https://stackoverflow.com/questions/1060854/what-are-good-guidelines-for-naming-powershell-verbs)列表中。

有什么好的选择？`Get-`似乎是关于获取属性，而不是内容（`Get-Content`奇怪的是，除了）。`Receive-`对我来说似乎有点过于被动（即脚本阻塞，直到信息被发送）——这不太合适。

想法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-25T12:41:01.847

对我来说，“Get”是最自然的动词。它得到了一切，而不仅仅是属性。对于名词，我会使用“WebFile”之类的东西，你可以很容易地猜出你得到了什么以及它来自哪里。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-25T09:27:39.993

这行不通：

```
 Start-Download -Url http://blah/ 
```

或使用`Invoke-Download`，根据同步操作的建议。`Start`用于异步。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T09:11:29.753

`New-Download`或者`New-WebDownload`或者`New-DownloadFile`?? _

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-13T17:46:03.343

也许`Request-TeamCityArtifacts`？

# objective-c - Select a string to change it

> ID：10751511
> 
> 赞同：1
> 
> 时间：2012-05-25T09:05:04.457
> 
> 标签：objective-c, string, select

I would like to create a plug-in necessary for our hospital, but I have never coded in Objective-C. I have been looking at many examples but cannot see how to select a specific word into a file to change it.

I want to select the word `MRSC` that is written on a line beginning with `0008,0060` and change it to `MR` (to tell our server that this file was sent by a MRI machine, which is necessary to archive it). I know how I can change the word, using `NSMutableArray`, but I don't know how to select my `MRSC`. How can I do this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T09:44:33.980

沿着这些思路，假设 ARC 或 GC 内存管理：

```
NSString *inputLine = ... ; // the line you've read in

if ([inputLine hasPrefix:@"0008,0060") // is it a line needing changing?
{
   // replace MRSC with MR and store result in same variable
   inputLine = [inputLine stringByReplacingOccurencesOfString:@"MRSC" withString:@"MR"];
} 
```

如果您愿意，您也可以使用可变字符串来执行此操作，在这种情况下几乎没有什么区别。

# javascript - 我可以在事件中调用另一个事件处理程序吗？

> ID：10751515
> 
> 赞同：4
> 
> 时间：2012-05-25T09:05:20.947
> 
> 标签：javascript, jquery, event-handling

我有这两组代码，一个是点击按钮时提示，

```
$('.button_class').click(function(){
    var baker_url = base_url + 'baker/baker/manage/Bread/1';
    var answer = confirm('Are you sure?');
    if(answer == true){
        // if this is true, i will call an external script so that within this condition that process will be executed
    }
    else if(answer == false){
        return false; // exits
}
}); 
```

然后这里的这段代码是负责在单击按钮时执行该过程的代码，

```
$('.another_button_class').click(function(e){
        e.preventDefault();
        var baker_url = base_url + 'baker/baker/manage/Bread/1';
        var form    = '#'+ $(this).attr('rel');
        var url     = $(form).attr('action');
        var target  = '#'+ $(form).attr('rel');
            $(target).slideUp();
            $.post(url, $(form).serialize(),function(data) {
                $(target).html(data).slideDown(function(){
                    if(data == '<div class="ok">Added</div>'){
                    setTimeout(refresh,1000)
                    c();
                    window.location = baker_url; // sets the url after refreshing
                    }
                });

            });
    }); 
```

在第一个函数中`answer == true`，我想执行后一个函数（*单击按钮时执行进程*的函数）。

我真的有可能调用另一个函数或事件处理程序来在另一个函数中执行它的进程吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T09:10:14.200

不确定这是否是您想要的

```
if(answer == true){
    // if this is true, i will call an external script so that within this condition that process will be executed
    $('.another_button_class').trigger('click');
} 
```

这将触发绑定在`$('.another_button_class')`元素上的单击事件处理程序的调用。

* * *

确保`e.preventDefault();`在第一次点击时也使用，否则链接将被跟踪

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T09:14:31.623

如果我正确理解了这个问题，那么当您单击按钮 #2 或单击按钮 #1 并在提示中单击“是”时，您需要产生效果？如果是这样，我可以想到三个选项：

1.  `e`命名第二个函数，如果未定义则使其工作；它真正做的就是防止默认。然后，您可以从第一个事件中调用命名函数。

2.  1 的更好版本：创建一个新函数，除了`e.preventDefault();`第二段代码之外，它可以执行所有操作。然后，您可以从这两个事件中调用它。

3.  如果在第一个按钮处选择了“是”，则使用 jQuery 模拟第二个按钮的单击事件。

**编辑**在这种情况下，第二个更可取。如果您确实需要事件对象来做某事，请使用第三个。

# android - Android ActionBar (Sherlock) - Changing menu icon color / transparency

> ID：10751521
> 
> 赞同：1
> 
> 时间：2012-05-25T09:05:41.033
> 
> 标签：android, colors, transparency, android-actionbar

Is there a way to make to change the color of the 3 dots of the menu icon? I'd like to make them completely white without any transparency but haven't found anything in the android styles/themes?

FYI: I'm using actionbarsherlock.

Thanks in advance :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T09:10:44.137

这是因为它们不是在代码中制作的，只需`com_actionbarsherlock/res/drawable-hdpi/abs__list_divider_holo_light.9.png`在您的可绘制目录中搜索图像，您就可以更改该图像的颜色。

# asp.net - 动态添加样式到表单？使用 Asp.net？

> ID：10751523
> 
> 赞同：0
> 
> 时间：2012-05-25T09:05:54.283
> 
> 标签：asp.net

在 Web 应用程序中，我正在尝试为表单添加样式，我这样写：

```
 form1.Attributes.CssStyle.Add ("style","background:url(nEWmOSIACH.jpg)"); 
```

但我没有得到任何图像，你能帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T09:22:23.633

我明白了，我以 oninit 事件的形式编写代码，现在它来了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T09:07:45.120

验证生成的 html，最重要的是，使用浏览器中的开发工具验证给定的路径。这应该有效。我的猜测是图像的错误路径...

# jquery - jQuery addClass 属性出现然后消失

> ID：10751524
> 
> 赞同：1
> 
> 时间：2012-05-25T09:06:20.647
> 
> 标签：jquery, html, css

我有一个包含 3 个项目的列表，并且我制作了一个 jQuery click 事件来向它添加一个 css 类。但是，当我单击其中一个项目时，类属性已设置，但之后立即消失。

任何想法为什么？

代码：

```
<ul>
    <li><a id="home" href="home.php">Home</a></li>
    <li><a id="apps" href="apps.php">Apps</a></li>
    <li><a id="support" href="support.php">Support</a></li>
</ul> 
```

```
$(document).ready(function() {
    $('#home').click(function (){
        $(this).addClass('btnActive');
    });
}); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-25T09:08:47.227

**更新答案**：

当你点击一个链接时，页面的整个 DOM 被拆除并丢弃，取而代之的是通过读取新页面的 HTML 创建的 DOM。因此，您对旧 DOM 所做的更改不会持续存在。如果您希望“btnActive”类在页面加载时出现在链接上，则需要相应地修改`home.php`、`apps.php`和`support.php`页面的 HTML。

例如，对于`home.php`：

```
<ul>
    <li><a id="home" href="home.php" class="btnActive">Home</a></li>
    <li><a id="apps" href="apps.php">Apps</a></li>
    <li><a id="support" href="support.php">Support</a></li>
</ul> 
```

...但是对于`apps.php`：

```
<ul>
    <li><a id="home" href="home.php">Home</a></li>
    <li><a id="apps" href="apps.php" class="btnActive">Apps</a></li>
    <li><a id="support" href="support.php">Support</a></li>
</ul> 
```

或者，您可以在页面加载时使用 JavaScript 添加基于 的类`location.href`，但实际上最好修改 HTML。`id`但为了完整起见，由于您对链接和页面名称使用相同的值，您可以这样做：

```
$(document).ready(function() {
    var id = location.href.replace(/.*\/([\w]+)\.php$/, '$1');
    if (id) {
        $("#" + id).addClass("btnActive");
    }
}); 
```

这将页面的名称与 URL 隔离开（忽略通向它的任何路径，并`.php`在末尾剥离），然后将其用作 an`id`并添加类。同样，我不推荐它，但是使用您引用的 URL，它应该可以工作。

以下原始答案来自于我意识到（感谢 Rory）您可能确实需要点击链接之前。

**原答案**：

因为你从来没有告诉浏览器不要点击链接，所以页面会重新加载。

您可以通过在`return false;`事件处理程序之外执行以下操作来修复它：

```
$(document).ready(function() {
    $('#home').click(function (){
        $(this).addClass('btnActive');
        return false;  // <=== The new bit
    });
}); 
```

...或接受`event`论点并呼吁[`preventDefault`](http://api.jquery.com/event.preventDefault/)它：

```
$(document).ready(function() {
    // Accept the arg ---------v
    $('#home').click(function (event){
        // call the preventDefault
        event.preventDefault();
        $(this).addClass('btnActive');
    });
}); 
```

`return false`在 jQuery 事件处理程序中做两件事：

1.  阻止默认操作（在这种情况下，按照链接）。

2.  停止传播到祖先元素的事件。

`preventDefault`只做第一个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T09:09:08.383

您需要阻止链接加载“home.php”：

```
$(document).ready(function() {
    $('#home').click(function (e){
        e.preventDefault();
        $(this).addClass('btnActive');
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T09:09:45.103

```
$(document).ready(function() {
    $('#home').click(function (e){
        e.preventDefault(); 
        e.stopPropagation();
        $(this).addClass('btnActive');
    });
}); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-25T09:25:45.770

```
<!DOCTYPE html> 
<html> 
<head> 

  <script src="http://code.jquery.com/jquery-latest.js"></script> 
   <script>

                $(document).ready(function() {
                    $('#home li').click(function() {
                        $('#home li').removeClass();
                        $(this).addClass('btnActive');
                    });
                });
            </script>

</head> 
<body> 
<ul id="home">
    <li>Home</li>
    <li>Apps</li>
    <li>Support</li>

</ul>
</body> 
</html> 
```

# joomla - 如何更改 Joomla 管理员 URL

> ID：10751525
> 
> 赞同：4
> 
> 时间：2012-05-25T09:06:21.597
> 
> 标签：joomla

默认情况下，Joomla 管理员 URL 是您的站点名称/管理员。我怎样才能为 Joomla 1.5 更改它，以便它不会影响我的模块和组件或后端的任何其他东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T09:22:44.930

我认为这不是一个好主意，因为模块/组件中一些指向“/administator”的链接是硬编码的（静态的），所以你最好使用其中一些插件[http://extensions.joomla.org/extensions /access-a-security/site-security/login-protection](http://extensions.joomla.org/extensions/access-a-security/site-security/login-protection)或者只是尝试使用 .htaccess （询问密码、IP 过滤等...）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-02T09:56:18.970

安装 jSecure 身份验证插件。

每个 Joomla 后端都有相同的 URL。如果你安装了一个安全插件，你可以给你的后端 URL 添加一个后缀，使它看起来像这样：[http ://www.yoursite.com/administrator?helloworld](http://www.yoursite.com/administrator?helloworld)

如果未使用正确的后缀输入 URL，则站点将重定向到 404（未找到）页面。定期更改后缀。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-24T09:55:49.440

这是一个简单的步骤（这不是正确的方法，但对我有用），

*   只需在根目录中创建一个新文件夹。
*   在该文件夹中创建 index.php （或其他名称），并添加以下代码

    ```
    $admin_cookie_code="2145446497812";
    setcookie("JoomlaAdminSession",$admin_cookie_code,0,"/");
    header("Location: ../administrator/index.php"); 
    ```

*   然后在 administrator/index.php 中添加以下代码。请确保在打开 PHP 标记后立即添加它。

    ```
    if($_COOKIE['JoomlaAdminSession']!= "159753987456321")
    {
        header('Location:../index.php');
    } 
    ```

*   然后尝试通过键入您的 root_joomla_address/new_folder_name 来访问管理员登录。然后它将自动重定向到您的管理页面。如果您尝试直接访问默认管理员登录页面，那么它将重定向到 Joomla 主页。

希望这会奏效。我不认为这是一个正确的程序。但是，如果您想避免使用插件，那么此 hack 将对您有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T14:33:00.227

我使用 changeadmin 组件来隐藏管理员 url：

[http://extensions.joomla.org/extensions/access-a-security/site-security/login-protection/14666](http://extensions.joomla.org/extensions/access-a-security/site-security/login-protection/14666)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-31T10:51:15.230

通过简单的步骤，您可以限制访问您的管理员登录页面

请按照以下步骤操作：

[在完成所有步骤之前，首先从这个链接www.whatismyip.com](http://www.whatismyip.com)找到您的 ID 地址

1.  在管理员文件夹中创建一个 .htaccess 文件。
2.  现在在 .htaccess 文件中编写以下代码

    ```
    <Limit GET POST> deny,allow deny from all allow from 192.168.0.1</Limit> 
    ```

    3.现在写你自己的ip而不是192.168.0.1 4.最后保存文件并尝试从你的ip和不同的ip访问你的管理员页面。

希望它会有所帮助。谢谢。

# c++ - unordered_map 用于堆管理系统。是否可以进行无冲突设置？

> ID：10751527
> 
> 赞同：0
> 
> 时间：2012-05-25T09:06:32.963
> 
> 标签：c++, c++11, unordered-map

( `unordered_map<>`c++11) 使用哈希函数在内部组织它的键值。碰撞概率很小`(1.f/std:numeric_limits<size_t>::max()`）。

可以将 an`unordered_map<>`用作堆内存管理的存储容器吗？也就是说，如果两个元素混合在一起（通过碰撞），程序的稳定性就会被破坏。在我的情况下，这将导致重复调用`free()`同一个指针。( `SIGSEGV`)。

或者碰撞概率仅在搜索密钥时才重要。并且保证两个不同的键总是引用不同的值？

后续问题：说它的`unordered_map`标准哈希函数不适合我的应用程序。如果想确保*不会*发生冲突，并且可以将自己限制为最多`size_t`元素，那么可以提供自己的哈希函数来返回参数本身。就像是：

```
template<class T>
struct Hash
{
  size_t operator()(T t) {
    return (size_t)t;
  }
} 
```

并确保没有碰撞？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T09:20:22.523

碰撞只会影响性能，不会影响容器的内容。`unordered_map`接受一个哈希函数*和*一个相等函数。两个元素可以安全地具有相同的哈希值，如果它们比较不相等，则它们被视为不相等。它们总是在同一个哈希桶中。大桶会损害在该桶中查找的操作的性能。

# windows-phone-7 - 如何固定应用程序以在 Windows Phone 模拟器中启动？

> ID：10751533
> 
> 赞同：1
> 
> 时间：2012-05-25T09:07:14.577
> 
> 标签：windows-phone-7

我是 Windows 手机的新手。我开发了一个示例 Windows Phone 应用程序。它在模拟器中运行良好。我的问题是我找不到任何选项来固定应用程序以在 Windows Phone 模拟器中启动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T09:10:50.660

您可以通过在应用程序列表中查看应用程序（向右滚动）然后单击并按住并选择出现的“固定到开始”菜单选项来固定应用程序。

# php - 使用 LIKE 的 PHP MySql 搜索匹配太多行

> ID：10751534
> 
> 赞同：2
> 
> 时间：2012-05-25T09:07:21.703
> 
> 标签：php, mysql, search, sql-like

我接管了一个使用 LIKE 查询在分隔值字段中搜索的站点。一个典型的字段可能如下所示：

```
129|145|181 
```

查询如下所示：

```
SELECT id,title FROM research WHERE members like '$arr[0]' 
```

问题是当它搜索例如“29”时，它会返回包含“129”的字段。我希望它只返回带有“29”的字段。有没有办法做到这一点？

谢谢，G

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T09:15:06.707

使用这个，更快更高效。

```
$str="129|145|181";
$newstr=str_replace("|",",",$str);
$sql='SELECT id,title FROM research WHERE members IN('.$newstr.')' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-25T09:15:27.820

```
SELECT id,title 
  FROM research 
 WHERE CONCAT('|',members,'|') like '|29|' 
```

或者

```
SELECT id,title  
  FROM research  
 WHERE FIND_IN_SET(29,REPLACE('|',',',members)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-25T09:11:48.287

```
SELECT id,title FROM research WHERE members like '%|$arr[0]|%' OR members like '$arr[0]|%' OR members like '%|$arr[0]' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-25T09:18:58.687

我建议不要使用这种方法“修补”，而是使用**JSON**来存储数字和类似数组的东西，它们总是在值或键周围有**“” 。**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-25T09:10:04.793

你可以做。

```
SELECT id,title FROM research WHERE members ='$arr[0]' 
```

对于成员数组，您应该在运算符中。

```
SELECT id,title FROM research WHERE members in (121,123) 
```

如果它是一个字符串，那么

```
memebers in ('121','123') 
```

您需要进行格式化。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-25T09:12:04.353

要检查此字段中是否**包含**数字，这是一个完整的答案：

```
SELECT id,title FROM research WHERE members like '%|$arr[0]' OR members like '$arr[0]|%' or members like '%|$arr[0]|%' 
```

# c# - 防止重定向并在 div MVC/C#/Jquery 中返回 json 结果

> ID：10751542
> 
> 赞同：0
> 
> 时间：2012-05-25T09:07:43.493
> 
> 标签：c#, jquery, model-view-controller

这是我下面的函数，我想知道如何在调用此函数后防止重定向并将我的 json 结果返回到名为“resultMessage”的 div 的同一页面中。

```
function PdfHeaderAndFooterManager() {
 $('#formPdfImages').submit(function(event) {
         $.post("@(Url.Action("PdfHeaderAndFooterManager", "Dashboard"))", $(this).serialize(), function(data) {
            if (data.success) {
                $("#resultMessage").text(data.message);
            } else {
                $("resultMessage").text(data.message);
            }

        });
    });
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T09:08:33.730

```
$('#formPdfImages').submit(function(event) {
         //event.preventDefault(); // prevent the page reload
         $.post("@(Url.Action("PdfHeaderAndFooterManager", "Dashboard"))", $(this).serialize(), function(data) {
            if (data.success) {
                $("#resultMessage").text(data.message);
            } else {
                $("resultMessage").text(data.message);
            }
           return false;
        });
    }); 
```

# jqgrid - jqgrid中的列分组与struts2？

> ID：10751549
> 
> 赞同：0
> 
> 时间：2012-05-25T09:08:04.357
> 
> 标签：jqgrid, struts2

我想知道如何在 jqgrid 中使用 struts2 中的**组字段。**我想在 jqgrid中创建**一组列。**请给我任何示例或建议我任何对 struts2 有用的网站

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T08:56:58.907

你可以在这里找到网格（分组）的例子：http: [//struts.jgeppert.com/struts2-jquery-showcase/index.action](http://struts.jgeppert.com/struts2-jquery-showcase/index.action)

# apache-camel - activemq - 在 servicemix/fuseesb 中创建新的代理

> ID：10751559
> 
> 赞同：1
> 
> 时间：2012-05-25T09:08:51.050
> 
> 标签：apache-camel, activemq, apache-servicemix, fuseesb

我正在使用 fuseesb 作为我的 esb，我想在 activemq 中创建新消息，所以我正在做：

在卡拉夫：`activemq:create-broker --name=myBroker`

然后我看到：

```
 Creating file: @|green .../myBroker-broker.xml|

Default ActiveMQ Broker (myBroker) configuration file created at: .../myBroker-broker.xml
Please review the configuration and modify to suite your needs. 
```

我看到该文件已创建，但在 karaf 我看到了：

```
karaf@root> Exception in thread "SpringOsgiExtenderThread-26" java.lang.IllegalStateException: BeanFactory not initialized or already closed - call 'refresh' before accessing beans via the ApplicationContext
    at org.springframework.context.support.AbstractRefreshableApplicationContext.getBeanFactory(AbstractRefreshableApplicationContext.java:171)
    at org.springframework.osgi.context.support.AbstractDelegatedExecutionApplicationContext$4.run(AbstractDelegatedExecutionApplicationContext.java:368)
    at org.springframework.osgi.util.internal.PrivilegedUtils.executeWithCustomTCCL(PrivilegedUtils.java:85)
    at org.springframework.osgi.context.support.AbstractDelegatedExecutionApplicationContext.completeRefresh(AbstractDelegatedExecutionApplicationContext.java:320)
    at org.springframework.osgi.extender.internal.dependencies.startup.DependencyWaiterApplicationContextExecutor$CompleteRefreshTask.run(DependencyWaiterApplicationContextExecutor.java:132)
    at java.lang.Thread.run(Thread.java:679) 
```

而且我不知道它是什么...

你可以帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T08:35:15.877

我有同样的异常，并通过更改我新生成的代理 xml 文件中配置的端口来修复它，这样它们就不会与在 etc/activemq-broker.xml 中配置的默认代理冲突

# android - Android：在应用程序中设置语言

> ID：10751571
> 
> 赞同：0
> 
> 时间：2012-05-25T09:09:34.007
> 
> 标签：android, localization

我想在我的应用程序中更改我的应用程序语言，因为 android 语言没有我想使用的所有语言。所以我得到了这个改变：

```
String languageToLoad  = "en";  
Locale locale = new Locale(languageToLoad);   
Locale.setDefault(locale);  
Configuration config = new Configuration();  
config.locale = locale;  
getBaseContext().getResources().updateConfiguration(config,   
getBaseContext().getResources().getDisplayMetrics()); 
```

但是，当用户打开应用程序并更改它时。然后，此时显示的字符串仍然是旧语言，它在`Activity`创建新语言时会更改。

其他问题，我应该以某种方式保存选择的用户语言，然后在启动应用程序时更改语言。

那么如何改进呢？我希望当用户选择语言时，所有字符串都将从选择语言 strings.xml 中获取，以及如何保存选择的语言用户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T09:12:55.497

您可以使用 SharedPreference 来存储用户的语言。这是关于它的文档：http: [//developer.android.com/reference/android/content/SharedPreferences.html](http://developer.android.com/reference/android/content/SharedPreferences.html)

关于需要重新加载Activity，你可以在这里找到一些答案：[Android: locale(system Language) change effect my application layouts](https://stackoverflow.com/questions/10751107/android-localesystem-language-change-effect-my-application-layouts#comment13972019_10751107)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T09:21:35.050

您可以创建一个`public class Share`带有静态成员的公共类 ( )，例如您可以在整个项目中`public static String language = "en";`使用代码轻松访问此类的字段。`Share.language`如果你想改变你可以设置的语言`Share.language = "fa";`。要使用所选语言重新加载活动，您应该在任何活动之前放置以下代码`super.onCreate(saveInstanceState);`：

```
Locale l = new Locale(Shares.language);
Locale.setDefault(l);
Configuration config = new Configuration();
config.locale = l;
context.getApplicationContext().getResources()
        .updateConfiguration(config, null); 
```

`values-language`请注意，如果您的文件夹中有类似的文件夹，则可以设置语言`/res`。

祝你好运，侯赛因 :)

# python - 如何在 vim 中映射 Alt Gr 组合键？

> ID：10751575
> 
> 赞同：5
> 
> 时间：2012-05-25T09:09:42.517
> 
> 标签：python, vim, keyboard

假设我想将命令映射`:!python % <ENTER>`到按键`Alt Gr`并`j`一起按下？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T09:52:37.330

AltGr 由您的键盘驱动程序解释，因此 Vim 不知道它是修饰键。但是，有[两种方法](http://vim.wikia.com/wiki/Mapping_fast_keycodes_in_terminal_Vim#1d._Entering_literal_characters_.26_terminal_codes "输入文字字符和终端代码")可以获取`AltGr`-的密钥代码`j`。在插入模式下：

1.  按`Ctrl`-`v`然后`AltGr`- `j`（显示文字字符代码）
2.  按住`Ctrl`- `v`，按`AltGr`-`j`然后松开`Ctrl`- `v`（显示终端代码）

结果取决于您的键盘布局。如果你只是得到`j`那么你就不走运了。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-25T09:58:25.453

由于键盘输入在内部处理的方式，许多组合键无法使用，即使在 GVIM 中也是如此。这是一个已知的痛点，也是 vim_dev 和 #vim IRC 频道上各种讨论的主题。

一个基本规则是：如果组合键在命令行模式下产生可见字符，则它可以被映射。但特别是对于`AltGr`，它可能与 的映射相同`Alt`，具体取决于您的操作系统在与其他键组合时返回的内容。

一些人（最重要的是 Paul LeoNerd Evans）想要解决这个问题（即使是支持这个的终端中的控制台 Vim），并提出了各种建议，cp。[http://groups.google.com/group/vim_dev/browse_thread/thread/626e83fa4588b32a/bfbcb22f37a8a1f8](http://groups.google.com/group/vim_dev/browse_thread/thread/626e83fa4588b32a/bfbcb22f37a8a1f8)

但是截至今天，还没有补丁或志愿者出现，尽管许多人表示希望在未来的 Vim 8 主要版本中拥有它。

# java - 使用java代码在quartz中实现作业

> ID：10751581
> 
> 赞同：-3
> 
> 时间：2012-05-25T09:10:07.157
> 
> 标签：java, eclipse, quartz-scheduler, scheduler

如何在 Eclipse IDE 中使用 java 编码在 Quartz 调度器中调度作业？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T09:16:57.147

试试这个：http: [//quartz-scheduler.org/documentation/quartz-2.x/quick-start](http://quartz-scheduler.org/documentation/quartz-2.x/quick-start)

# jquery - 什么是“@+节点”？

> ID：10751585
> 
> 赞同：0
> 
> 时间：2012-05-25T09:10:34.700
> 
> 标签：jquery, python, bottle

我正在尝试扩展 Python + BottlePy 脚本。我遇到了一个问题，即我的 POST 数据`Null`在传输过程中变成了问题，所以我对代码进行了更深入的研究。在网站模板中，我找到了类似的字符串`<!--@+node:ngerum.20120101211222.1350: *3* settings-->`，它们是什么意思？我在 BottlePy 文档中没有找到任何东西，唯一使用的其他库是 jQuery。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T09:28:08.653

我认为这与 Bottle 或 jQuery 无关。

也许像 GMail 或 HotMail 这样的云电子邮件提供商插入了这些字符串以进行内部跟踪，因为我在 google 中可以找到的*唯一*其他参考是转发的论坛帖子，正文中有两个这样的节点，就在电子邮件地址之后：

[http://baexpats.org/expat-life/930-storage-awhile.html](http://baexpats.org/expat-life/930-storage-awhile.html)

# java - Java 1.6.15、Mac OS X、JMenuItem 不会消失

> ID：10751591
> 
> 赞同：0
> 
> 时间：2012-05-25T09:10:49.683
> 
> 标签：java, macos, swing, jvm, jmenuitem

我的应用程序使用了一些许可机制的实现。根据许可证类型，某些菜单项必须是不可见的。现在我在 Mac OS X 10.6.2 上遇到了问题。Java 版本 1.6.0_15。无论如何，菜单项都不会消失。我调试了实现该功能的方法并亲眼看到-*可见*属性变为错误！在这个应用程序中，没有任何代码可以改变它。甚至更多 - 应用程序在我使用最后一个 JRE 的所有 Windows 上运行良好，并且在使用 Java 1.6.0_31 更新到 10.6.8 的 OS X 上运行良好。这是一个有缺陷的 Apple JVM 吗？在这种情况下，最好的解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T10:31:55.683

好吧，我尝试创建 SSCCE 并失败了。在 JFrame 的简单子类中一切正常。项目按预期消失。但相反，我找到[了这个文件](http://developer.apple.com/library/mac/releasenotes/CrossPlatform/JavaSnowLeopardUpdate2LeopardUpdate7RN/JavaSnowLeopardUpdate2LeopardUpdate7RN.pdf)。它说：

> 雷达 #7420583
> JMenuItems setVisible(false) 不隐藏。
> 说明：
> 屏幕菜单栏不会隐藏标记为 setVisible(false) 的 JMenuItem。
> 解决方案：此问题已解决。

正如我所料，这是苹果的错。剩下的就是明确检查 Mac OS X 上的运行时版本。欢迎在评论中提出任何其他解决方案（升级 java 除外——这不是我的职责范围）。

# javascript - 用jquery选择listview列

> ID：10751595
> 
> 赞同：0
> 
> 时间：2012-05-25T09:10:53.070
> 
> 标签：javascript, jquery, asp.net, listview

我有 2 列，“a”和“b”。“b”被隐藏，而“a”不被隐藏。我希望当鼠标单击“a”列时，“b”列中的文本（记住被隐藏）显示在对话框中。

目前我有这个选择器显示“a”文本列成功：

```
<div id="dialog"
style="display:none;padding:5px 5px 5px 5px;min-height:310px;">
<div id="content" style="width:100%;overflow:auto;height:120px;"></div> 
```

我准备对话框：

```
$('#dialog').dialog({
 autoOpen: false,
    resizable: true,
    modal: true,
    width: 460,
    title: "Message",
    buttons: {
        "Cerrar": function () {
            $(this).dialog("close");
        }
    }
}); 
```

// 当鼠标悬停在 "a" 上被点击时的事件

```
$('.a').click(
        function () {
            var text = $(this).attr('data-desc');
            $('#content').html(text);
            $('#dialog').dialog('open');
        }
    ); 
```

**Listview:** // 这是我点击的列

```
style="overflow:hidden;"
        **CssClass="a"**
        data-desc='<%# Eval("subject") %>'  
        runat="server" 
        text='<%# Eval("subject") %>'
        Visible="true" /> 
```

// 我想在对话框中显示此列 -text- //

```
<span
 id="coment" 
 style="width:0%;vertical-align:top">
 <cc1:SWCLabel 
     **cssclass="b"** 
     style="overflow:hidden;"
     data-desc='<%# Eval("Text") %>'  
     runat="server" 
     text='<%# Eval("Text") %>'
     Visible="false" /> 
```

# ip-address - VM 的 IP 地址已更改。真的？

> ID：10751596
> 
> 赞同：0
> 
> 时间：2012-05-25T09:10:54.903
> 
> 标签：ip-address, vmware

我只想知道虚拟机IP地址是否会定期更改。之前是 xxx.xxx.xx.xx，现在一个月后是 xxx.xxx.xx.xy。那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T09:21:29.127

这取决于您的 dhcp 服务器：如果 dhcp 服务器配置为从某个范围内租用 ip，您可以在 dhcpd.leases 文件中看到所有租用的 ip。如果您想使用静态 ip，您可以从范围中保留 ip 并配置客户端机器以使用静态 ip。

# java - 到 Tomcat 的 HttpURLConnection

> ID：10751601
> 
> 赞同：0
> 
> 时间：2012-05-25T09:11:10.510
> 
> 标签：java, jsp, tomcat, servlets

我正在尝试从 java 桌面应用程序连接到 jsp Servlet 以发送文件。

客户端编码：

```
HttpURLConnection urlConnection = null;
URL url = null;
url = new URL("http://127.0.0.1:8080/emobile/AddTripMobile");
urlConnection = (HttpURLConnection) url.openConnection();
urlConnection.setDoOutput(true);
OutputStream out = new BufferedOutputStream(
urlConnection.getOutputStream());

out.write(12); //The data to send
out.flush(); 
```

如果我将桌面应用程序连接到服务器，则不会发生任何事情。（我在 doGet 和 doPost 中设置了断点）

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T09:19:28.143

尝试关闭输出流。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T09:34:28.150

您需要添加以下内容：

```
InputStream is = urlConnection.getInputStream();
out.write(12); //The data to send
out.flush(); 
```

# c# - 在 C# 中绘制类似于图形的线条

> ID：10751602
> 
> 赞同：0
> 
> 时间：2012-05-25T09:11:11.103
> 
> 标签：c#, windows-phone-7, graph, charts

由于图形和图表库有点复杂，我想自己画图表。我所做的：嗯，它必须是一条有两个点的线，所以我有这样一段代码

```
 int k = 0;
        while ( k < 200)
        {

            //previous point
            Point l_p1 = new Point();
            l_p1.X = 100;
            l_p1.Y = 250;
            //current point
            Point l_p2 = new Point();
            l_p2.X = 200+k;
            l_p2.Y = 350 ;
            // count 
            Point l_count = new Point();
            l_count.X = k + 75;
            l_count.Y = k + 50;
            Line l_ex = new Line();
            l_ex.Stroke = new SolidColorBrush(Colors.Orange);
            l_ex.StrokeThickness = 5;
            l_ex.X1 = l_p1.X;
            l_ex.X2 = l_p2.X;
            l_ex.Y1 = l_p1.Y;
            l_ex.Y2 = l_p2.Y;
            k += 10;

            l_p2 = l_p1;
            l_count = l_p2;
            this.ContentPanelCanvas.Children.Add(l_ex);

        } 
```

如何使图表看起来像股市图表？

# java - 如何以编程方式在二维数组中插入值？

> ID：10751603
> 
> 赞同：8
> 
> 时间：2012-05-25T09:11:19.497
> 
> 标签：java, android, arrays, multidimensional-array, arraylist

我想在java中动态地做到这一点。我知道如何在一维数组中插入值。我对二维数组有点困惑。

```
static final String shades[][] = {

 // Shades of grey
  {
    "lightgrey", 
    "dimgray", 
    "sgi gray 92", 
  },
 // Shades of blue
  {
    "dodgerblue 2", 
    "steelblue 2", 
    "powderblue", 
  },
// Shades of yellow
  {
    "yellow 1",
    "gold 1",
    "darkgoldenrod 1", 
  },
 // Shades of red
  {
    "indianred 1", 
    "firebrick 1", 
    "maroon", 
  }
}; 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-25T09:15:26.693

```
String[][] shades = new String[intSize][intSize];
 // print array in rectangular form
 for (int r=0; r<shades.length; r++) {
     for (int c=0; c<shades[r].length; c++) {
         shades[r][c]="hello";//your value
     }
 } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-25T09:15:55.617

尝试在下面编写代码，

```
String[][] shades = new String[4][3];
for(int i = 0; i < 4; i++)
{
  for(int y = 0; y < 3; y++)
  {
    shades[i][y] = value;
  }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-25T09:20:55.727

您不能将值“添加”到数组中，因为数组长度是不可变的。您可以在特定数组位置设置值。

如果您知道如何处理一维数组，那么您就会知道如何处理 n 维数组：Java 中没有 n 维数组，只有数组的数组（数组的数组......）。

但是您可以链接索引运算符以访问数组元素。

```
String[][] x = new String[2][];
x[0] = new String[1];
x[1] = new String[2];

x[0][0] = "a1";
    // No x[0][1] available
x[1][0] = "b1";
x[1][1] = "b2"; 
```

请注意，子数组的维度不需要匹配。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-01-16T20:33:43.427

如果您事先不知道必须处理多少元素，则使用集合可能是一个更好的解决方案（[https://en.wikipedia.org/wiki/Java_collections_framework](https://en.wikipedia.org/wiki/Java_collections_framework)）。也可以创建一个更大的新二维数组，复制旧数据并在其中插入新项目，但集合框架会自动为您处理。

在这种情况下，您可以使用字符串映射到字符串列表：

```
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

public class MyClass {
    public static void main(String args[]) {
        Map<String, List<String>> shades = new HashMap<>();

        ArrayList<String> shadesOfGrey = new ArrayList<>();
        shadesOfGrey.add("lightgrey");
        shadesOfGrey.add("dimgray");
        shadesOfGrey.add("sgi gray 92");

        ArrayList<String> shadesOfBlue = new ArrayList<>();
        shadesOfBlue.add("dodgerblue 2");
        shadesOfBlue.add("steelblue 2");
        shadesOfBlue.add("powderblue");

        ArrayList<String> shadesOfYellow = new ArrayList<>();
        shadesOfYellow.add("yellow 1");
        shadesOfYellow.add("gold 1");
        shadesOfYellow.add("darkgoldenrod 1");

        ArrayList<String> shadesOfRed = new ArrayList<>();
        shadesOfRed.add("indianred 1");
        shadesOfRed.add("firebrick 1");
        shadesOfRed.add("maroon 1");

        shades.put("greys", shadesOfGrey);
        shades.put("blues", shadesOfBlue);
        shades.put("yellows", shadesOfYellow);
        shades.put("reds", shadesOfRed);

        System.out.println(shades.get("greys").get(0)); // prints "lightgrey"
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-25T09:21:06.790

将其视为数组数组。

如果你这样做 str[x][y]，那么就会有长度为 x 的数组，其中每个元素又包含长度为 y 的数组。在java中，第二维没有必要具有相同的长度。所以对于 x=i 你可以有 y=m 和 x=j 你可以有 y=n

为此，您的声明看起来像

字符串[][] 测试 = 新字符串[4][]; 测试[0] = 新字符串[3]；测试[1] = 新字符串[2];

ETC..

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-12-12T06:20:38.883

[这是这个程序的输出](https://i.stack.imgur.com/1mLtP.png)

```
Scanner s=new Scanner (System.in);
int row, elem, col;

Systm.out.println("Enter Element to insert");
elem = s.nextInt();
System.out.println("Enter row");
row=s.nextInt();
System.out.println("Enter row");
col=s.nextInt();
for (int c=row-1; c < row; c++)
{
    for (d = col-1 ; d < col ; d++)
         array[c][d] = elem;
}
for(c = 0; c < size; c++)
{ 
   for (d = 0 ; d < size ; d++)
         System.out.print( array[c] [d] +"   ");
   System.out.println();
} 
```

# mysql - MySQL全文搜索属性

> ID：10751604
> 
> 赞同：2
> 
> 时间：2012-05-25T09:11:19.607
> 
> 标签：mysql, sql

我对 MySQL 全文搜索功能有点陌生。

我想澄清 MATCH()..AGAINST() FTS 功能的一些用法。

如果我们有一列文本类型，并且包含多个名称对值以及其他文本。一般来说，我知道 MySQL 中的 FTS 功能可以通过以下命令使用：

```
select col from mytable where match(text_data) against('some word') limit 10; 
```

但我需要搜索多个单词，例如，如果：

```
select text_data from mytable;
==============================

abcd, xyax&iopp data=1244 amt=78 ..
abcd, xyax&iopp data=12xx amt=7x .. 
```

现在我想在 text_data 列中搜索 value 数据值为 '1244' 和 amt 为 '78'。那么如何使用两个表达式是 AGAINST 子句：

```
select col from mytable where match(text_data) against ('data=1244' and  'amt=78')

OR

select col from mytable where match(text_data) against ('data=1244') and match(text_data) against ('amt=78') 
```

或者

```
select col from mytable where match(text_data) against ('data 1244 amt 78') 
```

或者

还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T09:14:00.437

```
SELECT  col
FROM    mytable
WHERE   MATCH(text_data) AGAINST('+"data 1244" +"amt 78"' IN BOOLEAN MODE) 
```

请注意，您应该`ft_min_word_len`设置为 1 才能工作（默认值为 4，`amt`甚至`78`不会被索引）

# c# - How to create Time converter using c#

> ID：10751607
> 
> 赞同：0
> 
> 时间：2012-05-25T09:11:25.680
> 
> 标签：c#, asp.net, visual-studio-2010

hello im mohammed from sri lanka and new to programing so i am litle bit confused these days

So we have a server in srilanka and we have clients are access to the website from several countries and make reservations then the server saves the time acording to srilankan time zone so i wont store actual time i need hep to resolve thease problems Helpme!and serve me!

EG:

client make order at `3.10am` from USA it saves `3.10am` and make Oder *srilankan time* `3.10 am` so i want to atomatically conver to clint country time

how can i code that using `C#` `visual studio 2010`

thanks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T09:14:26.257

On the client side convert the time to GMT time using [DateTime.ToUniversalTime](http://msdn.microsoft.com/en-us/library/system.datetime.touniversaltime%28v=vs.71%29.aspx) and store it in your database. Then read it converting as local time zone.

E.g. in your code behind do something on the following lines. Code from MSDN.

```
System.DateTime univDateTime = localDateTime.ToUniversalTime(); 
```

to convert it back

```
System.DateTime localDateTime;
try {
    localDateTime = System.DateTime.Parse(strDateTime);
}
catch (System.FormatException) {
    System.Console.WriteLine("Invalid format.");
    return;
} 
```

# html - 将 CSS 放在文档头部但我没有头部？

> ID：10751608
> 
> 赞同：2
> 
> 时间：2012-05-25T09:11:28.653
> 
> 标签：html, pagespeed

根据谷歌的风格指南，你应该省略可选标签，如`<head>`

[http://google-styleguide.googlecode.com/svn/trunk/htmlcssguide.xml#Optional_tags](http://google-styleguide.googlecode.com/svn/trunk/htmlcssguide.xml#Optional_tags)

但是，这样做会导致 google pagespeed 告诉我：

> 文档正文中的 CSS 会对渲染性能产生不利影响。 [http://site.com](http://site.com)文档正文中有 CSS：正文中的 1 个样式块应移动到文档头部。

对了，那应该怎么办呢？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T09:23:37.270

此链接告诉您在哪些**条件**下可以省略某些标签。

[http://www.whatwg.org/specs/web-apps/current-work/multipage/syntax.html#syntax-tag-omission](http://www.whatwg.org/specs/web-apps/current-work/multipage/syntax.html#syntax-tag-omission)

但要注意，省略**标签**并不意味着省略**元素**

在您的情况下， **<head>**是可选的（甚至是 html）。做就是了

```
<!DOCTYPE html>     
  <link rel="stylesheet" href="pathTo.css"> 
```

你可以看看

[有必要写 HEAD、BODY 和 HTML 标签吗？](https://stackoverflow.com/questions/5641997/is-it-necessary-to-write-head-body-and-html-tags)

对于可能想要进行实验的读者，请将以下代码保存到文件中并阅读并使用 firebug 之类的工具进行检查

```
<!DOCTYPE html>     
 <meta http-equiv="Content-type" content="text/html; charset=utf-8">
 <title>Page Title</title>
 <link rel="stylesheet" href="pathTo.css">
 <script>var a = 0;</script><!-- placed in head -->

 <div>any html text or tags</div>
 <script> var b = 1</script> <!-- placed in body --> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T11:00:18.470

PageSpeed 在这样的事情上是不可靠的。您应该分析自己的文档结构是否正确。使用 HTML 4.01 和验证器，您将立即看到某个`style`元素是否出现在 内部`body`，因为它是一个标记错误（尽管它也可以在那里工作）。

您引用的页面[http://site.com](http://site.com)没有这个问题（它是 XHTML，没有标记遗漏）。请发布一个真实的 URL，或者至少使用 .example 伪域来表明一个 URL 是虚拟的。

没有看到实际页面，无法分析问题，但总的来说，Google PageSpeed 似乎会发出虚假评论。它似乎工作不一致，但至少在某些情况下，它显然会错误地解析文档。例如，以下代码触发了该消息：

```
<!doctype html>
<title>foo</title>
<style></style>
<h1>foo</h1> 
```

这里没有歧义：`style`元素在`head`元素中（这就是浏览器解析文档的方式，搜索引擎在这里并不重要），即使 PageSpeed 声称并非如此。

我尝试添加省略的标签，但没有任何效果，直到突然，PageSpeed 停止发出消息，现在上面的文档得到了一个干净的报告。我得出结论，PageSpeed 的工作方式是不确定的，这可能是由于其积极的缓存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T09:14:44.133

从规范：

> 如果 body 元素为空，或者 body 元素内的第一件事不是空格字符或注释，则 body 元素的开始标记可以省略，***除非 body 元素内的第一件事是脚本或样式元素。***

这似乎是您的问题的最可能原因，因为这使得起始正文标记非可选。

（这是假设您按照说明删除了所有可选标签，而不仅仅是选择）

# tomcat - 在tomcat中处理多个域名

> ID：10751611
> 
> 赞同：0
> 
> 时间：2012-05-25T09:11:34.183
> 
> 标签：tomcat

我有两个域名

```
www.example1.com
www.example2.com 
```

当这些进入 tomcat 时，我想将它们引导到正确的目录以获取资源。

我在 tomcat 中的 webapp 文件夹中有 2 个文件夹

```
/example1
/example2 
```

例如：如果我进入`www.example.com`它应该从`example1`webapps 目录的文件夹中获取资源

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T09:13:45.163

我不喜欢粘贴 URL 作为答案，但这正是您所要求的：[http ://wiki.apache.org/tomcat/CreateVirtualHosts](http://wiki.apache.org/tomcat/CreateVirtualHosts)

# iphone - ios 5子视图在tableview单元格中的两个视图之间翻转

> ID：10751617
> 
> 赞同：0
> 
> 时间：2012-05-25T09:12:13.903
> 
> 标签：iphone, ios5, tableview

我有包含自定义单元格的表格视图。当用户单击该行时，每个单元格都有我想要翻转的视图。我成功地使它适用于这个。但是我遇到的问题是当用户单击其他行时，我想翻转回前一个单元格的原始视图并翻转当前单击的行。

这是一些代码

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

CustomCell *selectedCell = 
        (CustomCell *)[self.AlbumViewTable cellForRowAtIndexPath:self.current_index];
//if other row is already flipped then make it back to original state.
if(otherRowIsFlipped){
    selectedCell.defaultImage = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"defaultIndecator.jpg"]];
    selectedCell.defaultImage = CGRectMake(0, 0, 43, 43);
    [self flipView:selectedCell.flipViewContainer From:selectedCell.activity To:selectedCell.defaultImage];
}

CustomCell * new_row = 
        (CustomCell *)[self.AlbumViewTable cellForRowAtIndexPath:indexPath];

new_row.activity = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhite];
new_row.activity.frame = CGRectMake(0, 0, 43, 43);
[new_row.activity startAnimating];

 //this method is merely called UIView subroutine to flip between two view 
[self flipView:new_row.flipViewContainer From:new_row.defaultImage To:new_row.activity];

[self.AlbumViewTable deselectRowAtIndexPath:indexPath animated:YES];
} 
```

我能够翻转先前选择的行并翻转当前选择的行，但是我发现奇怪的事情是，当我向下滚动表格视图时，翻转视图出现在从未被选择的行上。

我试图在 CustomCell 类中创建属性并尝试翻转但也没有运气。我不确定这种方法是否正确，但它似乎有效，除非我向下滚动以加载其他行。

我很感激任何建议。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T14:40:11.590

您应该使用这种视图结构制作自定义 TableViewCell

```
-CELL
--CONTENT_VIEW
---1st_side
---2nd_side 
```

代码是

```
[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:0.7f];
[UIView setAnimationTransition:UIViewAnimationTransitionFlipFromRight forView:containerView cache:NO];
  [firstView removeFromSuperview];
  [containerView addSubview:secondView];
[UIView commitAnimations]; 
```

和 back 方法一样

# iphone - 如何从视图层次结构中选择随机视图控制器

> ID：10751619
> 
> 赞同：0
> 
> 时间：2012-05-25T09:12:21.263
> 
> 标签：iphone, ios

我正在构建一个应用程序，我在其中执行此层次结构：

view1controller(调用presentmodalviewcontroller方法)-->view2controller(调用presentmodalviewcontroller方法)-->view3controller(调用presentmodalviewcontroller)--->view4controller

我知道我总是可以通过使用dismissmodalviewcontroller 方法从一个视图切换回另一个视图的概念。就像我可以从视图 4 切换到视图 3，从视图 3 切换到视图 2。我的问题是如何切换到随机视图控制器？喜欢从视图 4 到视图 2 还是从视图 3 到视图 1？..我没有使用导航控制器。我知道我错过了一个概念。任何人都可以阐明这个概念。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T09:29:47.157

来自参考指南[UIViewController](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/dismissViewControllerAnimated%3acompletion%3a)

> 如果您连续呈现多个视图控制器，从而构建一个呈现视图控制器的堆栈，则在堆栈中较低的视图控制器上调用此方法会解除其直接子视图控制器以及堆栈上该子视图控制器上方的所有视图控制器。发生这种情况时，只有最顶层的视图会以动画方式消失；任何中间视图控制器都简单地从堆栈中删除。最顶层的视图使用其模态转换样式被关闭，这可能与堆栈中其他视图控制器使用的样式不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T09:40:54.513

```
 AppDelegate *delegate_app = (AppDelegate *)[[UIApplication sharedApplication] delegate];
ABC:;
    NSUInteger iRan = arc4random() % [delegate_app.viewcontrollerArray count];

    if ([(UIViewController *)[delegate_app.viewcontrollerArray objectAtIndex:iRan] isEqual:self]) 
    {
        NSLog(@"self so not taken");
        goto ABC;
    }

    [self presentModalViewController:(UIViewController *)[delegate_app.viewcontrollerArray objectAtIndex:iRan] animated:YES]; 
```

viewcontrollerArray 在 AppDelegate 中与您拥有的所有视图控制器一起分配和合成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T10:02:41.527

我认为你应该一次只保留一个模态。关闭不带动画的那些你不想看到的。

第一个模态：

```
[view1controller presentViewController:view2controller animated:YES] 
```

移至第二个模态：

```
[presentingViewController dismissModalViewControllerAnimated:NO]
[presentingViewController presentViewController:view3controller animated:YES] 
```

移至第三模式：

```
[presentingViewController dismissModalViewControllerAnimated:NO]
[presentingViewController presentViewController:view4controller animated:YES] 
```

回到第一个模态：

```
[presentingViewController dismissModalViewControllerAnimated:NO]
[presentingViewController presentViewController:view1controller animated:YES] 
```

如果您确实需要多个嵌套的模态视图控制器，则必须以相反的顺序关闭它们，并且一次代表多个，有时只有最后一个被动画化。所以要从 1 到 4，您需要在没有动画的情况下呈现 2 和 3，然后呈现第 4 个动画。反之，用动画解雇 4 和不带动画的 3 & 2。在这种情况下，您最好使用导航控制器恕我直言（您不需要有可见的导航栏）。

[有关更多信息，请参阅此问题](https://stackoverflow.com/questions/2474314/problem-dismissing-multiple-modal-view-controllers)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T09:41:48.943

如果您想从第三视图转到第一视图或类似的视图，您可以尝试以下代码：

```
[self.parentViewController.parentViewController dismissModalViewControllerAnimated:YES]; 
```

# html - 表格的对齐和边框问题

> ID：10751620
> 
> 赞同：0
> 
> 时间：2012-05-25T09:12:24.253
> 
> 标签：html, css, drupal

由于某种原因，此广告页面上的表格样式（笔记本电脑的图像和规格）。通常，它应该在中间有一个边框和垂直对齐。

我发现有一个`reset.css`-stylesheet 负责对齐错误。但我不知道如何在我的普通`styles.css`文件中覆盖这个设置。不使用该`reset.css`文件不是一种选择。

关于边界问题：我找不到边界可见性（或大小）设置为非的位置......所以如果有人能看到这个并告诉我如何让边界再次可见，那就太好了！

内容管理器使用 CKEditor 创建此类内容：

![在此处输入图像描述](../Images/478dd1252296bcfd1e50c944d4c22b8b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T09:18:03.570

边框未设置为无..

手动将边框颜色设置为白色的 2 个元素上有一个`style`属性（*硬编码）*`td`

```
<td style="border-bottom-color: #ffffff; border-top-color: #ffffff; width: 252px; border-right-color: #ffffff; border-left-color: #ffffff">...</td> 
```

你需要删除它。

* * *

对于这个`vertical-align`问题，只需写一个规则

```
td{vertical-align:middle;} 
```

并确保您自己的样式表出现在***文件之后***`reset.css`..

（*请记住，它将适用于所有`td`元素*）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T09:23:47.157

试试这个。边框颜色设置为白色？你怎么能在白色背景下看到？

```
<td style="border:1px solid #000000;vertical-align:middle" valign="middle"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T09:25:53.290

桌子里面。转到行或 tr

采用：

```
<tr valign="top|middle|bottom"> 
```

在该行内，文本/图像的 v 对齐将取决于 valign 的值。

对于每行/列的表格边框：

```
table td {
    border:1px solid red;
} 
```

# php - ASP/PHP 身份验证

> ID：10751622
> 
> 赞同：1
> 
> 时间：2012-05-25T09:12:27.133
> 
> 标签：php, asp.net, session, authentication

我目前正在用 PHP 开发一个网站，但是该网站的很大一部分（我无法重新开发）在 ASP.NET 中。

我需要一个系统，我们的客户可以登录，然后登录到我们网站的 PHP 和 ASP 页面。我做了一些研究并提出了一些*想法*，但我不确定最好的方法是什么？

*   使用两种语言都可以访问和读/写的 cookie
*   使用某种 HTAccess/Digest Auth，这将导致所有页面都登录一次
*   使用两者都可以读取的数据库会话，尽管不确定如何实现这一点，特别是看到我无法从 PHP 访问 MSSQL 服务器，只有 MySQL - ASP 可以访问 mysql 服务器吗？
*   某种登录脚本如下：
    *   用户登录并提交到 PHP 页面
    *   使用 PHP 处理登录并创建会话等
    *   用户/密码重新发布到 asp 页面
    *   ASP 页面处理登录并存储它的会话等
    *   ASP 返回“登录后”页面。

老实说，我不确定最好的解决方案是什么！您的想法将不胜感激！

谢谢，

戴夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T09:23:58.140

我不知道您的应用程序的具体部分，但从声明中我会选择 Cookie。这是一个简单的解决方案，而且非常可靠。如果您有任何会话变量，那么它位于服务器端，因此您访问它们不会有任何问题。

任何其他解决方案、脚本或数据库会话都将是工作重复。但一切都取决于您存储的数据和您需要的复杂性/安全性。

# c# - 带有可选参数的扩展方法中的方法解析

> ID：10751624
> 
> 赞同：6
> 
> 时间：2012-05-25T09:12:30.937
> 
> 标签：c#, .net, extension-methods, resolution, optional-parameters

我有以下几个扩展方法，它们位于相同的命名空间和程序集中：

```
public static class DateTimeExtensions
{
    public static string NullSafeToString(this DateTime? possiblyNullDateTime, string format, string nullString = "")
}

public static class NullableExtensions
{
    public static string NullSafeToString<T>(this Nullable<T> nullable, string nullString = "") where T : struct
} 
```

我的问题是关于方法解析。以下调用（来自另一个命名空间）解析为`ObjectExtensions.NullSafeToString`我预期的`DateTimeExtensions.NullSafeToString`时间：

```
DateTime? dateTime;
// ...
dateTime.NullSafeToString("yyyyMMdd"); 
```

从中删除可选参数`DateTimeExtensions.NullSafeToString`会导致它按预期解析。

C# 规范的第 7.6.5.2 节概述了搜索的命名空间的顺序，但由于以上都在同一个命名空间中，我希望它使用第 7.6.5.1 节中的规则。

我认为它会匹配`DateTimeExtensions.NullSafeToString`，因为：

*   尽管它们都有第一个参数类型`Nullable<DateTime>`，但我认为首先会考虑非泛型方法（即没有类型参数）。
*   我虽然首先考虑参数列表而不考虑它们的可选参数

任何人都可以澄清为什么它会被选中`ObjectExtensions.NullSafeToString`吗`DateTimeExtensions.NullSafeToString`？

（除此之外：从这里的其他讨论中，我怀疑有些人可能不赞成使用扩展方法语义来使解除引用 null 安全，但我发现用于像这样的有限场景，它们使代码更具可读性。我也知道`Nullable.ToString`已经空安全，因为`Nullable`对象本身不是空的，但这不适合所包含的参数`ToString`，而且我发现显式命名的方法表明了空安全意图。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T09:40:40.800

您的问题与扩展方法无关。这是关于重载解析和可选参数的。（7.5.3 c#规范的重载解析）你可以试试这段代码

```
public static string NullSafeToString(DateTime? possiblyNullDateTime, string format, string nullString = "")
    {
        return string.Empty;
    }
    public static string NullSafeToString<T>(Nullable<T> nullable, string nullString = "") where T : struct
    {
        return string.Empty;
    }
    static void Test()
    {
        DateTime? datetime = DateTime.Now;
        NullSafeToString(datetime, "yyyyMMdd");
    } 
```

# php - PHP中VB6函数String$(number, character)的等价物是什么

> ID：10751626
> 
> 赞同：1
> 
> 时间：2012-05-25T09:12:45.723
> 
> 标签：php, vb6

该函数在[此处](http://www.vb6.us/tutorials/vb6-string-functions)进行了描述，基本上它的作用是创建一个包含许多字符的字符串，例如

```
strTest = String$(5, "a") 
```

结果将是一个包含 5 个字母“a”字符的字符串

```
strTest = "aaaaa" 
```

现在，不要误会我的意思，我可以轻松地在 PHP 中使用 for 循环来完成此操作，但我想知道 PHP 核心中是否已经存在这样的函数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T09:14:22.310

是的，看看[`str_repeat()`](http://php.net/manual/en/function.str-repeat.php)功能：

```
echo str_repeat('a', 5); // aaaaa 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-25T09:14:35.087

是的，有一个：[`str_repeat`](http://php.net/manual/en/function.str-repeat.php)。例子：

```
$strTest = str_repeat('a', 5); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-25T09:14:54.960

PHP中有str_repeat函数；

```
$strTest = str_repeat("a",5); 
```

来源：[http ://www.php.net/manual/tr/function.str-repeat.php](http://www.php.net/manual/tr/function.str-repeat.php)

# php - 刷新 DIV 容器

> ID：10751634
> 
> 赞同：-1
> 
> 时间：2012-05-25T09:13:25.290
> 
> 标签：php, javascript, ajax

`click_function_ps()`一旦函数执行，我编写了代码来刷新 DIV 容器。但是我的代码不起作用。它说：

```
missing ; before statement
var newHTML = "<img class="displayed" src="ganttchart.php">"; 
```

那么，我需要放在`;`哪里？

```
<div class="buttons">
    <a href="#" class="regular" onclick="click_function_ps(); replaceContent();">
        <img src="images/opt.png" alt=""/> Run </a>
</div>

<div id="opt_container">
        <table width="100%">
            <tr>
                <td width="100%">
                    <div class="scrollbar" id="chart">
                        <img class="displayed" src="ganttchart.php">
                    </div>  
                </td>
            </tr>
        </table>
</div>

<script type="text/javascript">
function replaceContent() {
     var newHTML = "<img class="displayed" src="ganttchart.php">";
     document.getElementById("scrollbar").innerHTML = newHTML;
}
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T09:14:13.030

尝试这个

```
var newHTML = "<img class=\"displayed\" src=\"ganttchart.php\">"; 
```

此外，没有具有 ID 的元素`scrollbar`。将 DIV 从 更改`class="scrollbar"`为`id="scrollbar"`或立即使用 ID`chart`或通过以下操作替换 javascript `document.getElementsByClassName("scrollbar")[0]`。但请记住，`getElementsByClassName()`IE 不支持。我强烈建议使用`id`而不是`class`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T09:15:14.620

在这部分你没有逃避双引号：

```
function replaceContent() {
   var newHTML = "<img class=\"displayed\" src=\"ganttchart.php\">";
   document.getElementById("scrollbar").innerHTML = newHTML;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T09:18:46.740

你可以试试这些：-

```
<div class="buttons">
    <a href="#" class="regular" id="scrollbar" onclick="click_function_ps(); replaceContent();">
        <img src="images/opt.png" alt=""/> Run </a>
</div>

<div id="opt_container">
        <table width="100%">
            <tr>
                <td width="100%">
                    <div class="scrollbar" id="chart">
                        <img class="displayed" src="ganttchart.php">
                    </div>  
                </td>
            </tr>
        </table>
</div>

<script type="text/javascript">
function replaceContent() {
     var newHTML = "<img class=\"displayed\" src=\"ganttchart.php\">";
     document.getElementById("scrollbar").innerHTML = newHTML;
}
</script> 
```

如果您将使用任何 ..，则不会出现这种类型的错误`IDE(netbeans etc)`。因为`IDE`在您编写代码时检查您的语法错误..

# java - Android 2.1：引起：java.lang.ClassNotFoundException: Fragment

> ID：10751635
> 
> 赞同：0
> 
> 时间：2012-05-25T09:13:35.103
> 
> 标签：java, android, android-fragments

我创建了一个需要两个片段的应用程序，因此我声明了一个片段类，并在该类中创建了另一个静态片段类。我将 main.xml 更改为

```
 <FrameLayout xmlns:android="http://schemas.android.com/apk/res/android" 
             android:layout_width="fill_parent"
             android:layout_height="fill_parent">
    <fragment
        android:id="@+id/titles"
        android:layout_width="25dp"
        android:layout_height="wrap_content"
        class="frag.demo.DActivity$TFragment" />

    <fragment
        android:id="@+id/details"
        android:layout_width="25dp"
        android:layout_height="wrap_content"
        class="frag.demo.DActivity$DFragment" />

</FrameLayout> 
```

在运行这个应用程序时，我得到了运行时异常，比如

```
05-25 14:39:45.224: E/AndroidRuntime(911): Uncaught handler: thread main exiting due to uncaught exception
05-25 14:39:45.264: E/AndroidRuntime(911): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{frag.demo/frag.demo.JFragmentActivity}: java.lang.ClassNotFoundException: frag.demo.JFragmentActivity in loader dalvik.system.PathClassLoader@44e8c6f0
05-25 14:39:45.264: E/AndroidRuntime(911):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2417)
05-25 14:39:45.264: E/AndroidRuntime(911):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
05-25 14:39:45.264: E/AndroidRuntime(911):  at android.app.ActivityThread.access$2200(ActivityThread.java:119)
05-25 14:39:45.264: E/AndroidRuntime(911):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
05-25 14:39:45.264: E/AndroidRuntime(911):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-25 14:39:45.264: E/AndroidRuntime(911):  at android.os.Looper.loop(Looper.java:123)
05-25 14:39:45.264: E/AndroidRuntime(911):  at android.app.ActivityThread.main(ActivityThread.java:4363)
05-25 14:39:45.264: E/AndroidRuntime(911):  at java.lang.reflect.Method.invokeNative(Native Method)
05-25 14:39:45.264: E/AndroidRuntime(911):  at java.lang.reflect.Method.invoke(Method.java:521)
05-25 14:39:45.264: E/AndroidRuntime(911):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
05-25 14:39:45.264: E/AndroidRuntime(911):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
05-25 14:39:45.264: E/AndroidRuntime(911):  at dalvik.system.NativeStart.main(Native Method)
05-25 14:39:45.264: E/AndroidRuntime(911): Caused by: java.lang.ClassNotFoundException: frag.demo.JFragmentActivity in loader dalvik.system.PathClassLoader@44e8c6f0
05-25 14:39:45.264: E/AndroidRuntime(911):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
05-25 14:39:45.264: E/AndroidRuntime(911):  at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
05-25 14:39:45.264: E/AndroidRuntime(911):  at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
05-25 14:39:45.264: E/AndroidRuntime(911):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
05-25 14:39:45.264: E/AndroidRuntime(911):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2409) 
```

05-25 14:39:45.264: E/AndroidRuntime(911): ... 11 更多

我的 JFragmentActivity 类扩展了 FragmentActivity。所以请告诉我代码出错的地方......

我的活动课

```
public class DActivity extends FragmentActivity {// from android.support.v4.app.*;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
       Log.i("DA","active");
        if (getResources().getConfiguration().orientation
                == Configuration.ORIENTATION_LANDSCAPE) {
            // If the screen is now in landscape mode, we can show the
            // dialog in-line with the list so we don't need this activity.
            finish();
            return;
        }

        if (savedInstanceState == null) {
            // During initial setup, plug in the details fragment.
            DFragment details = new DFragment();
            details.setArguments(getIntent().getExtras());
            getSupportFragmentManager().beginTransaction().add(android.R.id.content, details).commit();
        }
    }
    public static class TFragment extends ListFragment {
        boolean mDualPane;
        int mCurCheckPosition = 0;
        String nos[]={"1","2","3","4","5"};
        public TFragment(){

        }
        @Override
        public void onActivityCreated(Bundle savedInstanceState) {
            // TODO Auto-generated method stub
            super.onActivityCreated(savedInstanceState);
            Log.i("TF","active");
            setListAdapter(new ArrayAdapter<String>(getActivity(),R.layout.simple_list,nos));
            View detailsFrame = getActivity().findViewById(R.id.nos);
            mDualPane = detailsFrame != null && detailsFrame.getVisibility() == View.VISIBLE;
            if (savedInstanceState != null) {
                // Restore last state for checked position.
                mCurCheckPosition = savedInstanceState.getInt("curChoice", 0);
            }
             if (mDualPane) {
                    // In dual-pane mode, the list view highlights the selected item.
                    getListView().setChoiceMode(ListView.CHOICE_MODE_SINGLE);
                    // Make sure our UI is in the correct state.
                    showDetails(mCurCheckPosition);
                }
        }
         @Override
            public void onSaveInstanceState(Bundle outState) {
                super.onSaveInstanceState(outState);
                outState.putInt("curChoice", mCurCheckPosition);
            }
         @Override
            public void onListItemClick(ListView l, View v, int position, long id) {
                showDetails(position);
            }
         void showDetails(int index) {
                mCurCheckPosition = index;

                if (mDualPane) {
                    // We can display everything in-place with fragments, so update
                    // the list to highlight the selected item and show the data.
                    getListView().setItemChecked(index, true);

                    // Check what fragment is currently shown, replace if needed.
                    DFragment details = (DFragment)
                            getFragmentManager().findFragmentById(R.id.nos);
                    if (details == null || details.getShownIndex() != index) {
                        // Make new fragment to show this selection.
                        details = DFragment.newInstance(index);

                        // Execute a transaction, replacing any existing fragment
                        // with this one inside the frame.
                        FragmentTransaction ft = getFragmentManager().beginTransaction();
                        ft.replace(R.id.nos, details);
                        ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);
                        ft.commit();
                    }

                } else {
                    // Otherwise we need to launch a new activity to display
                    // the dialog fragment with selected text.
                    Intent intent = new Intent();
                    intent.setClass(getActivity(), DActivity.class);
                    intent.putExtra("index", index);
                    startActivity(intent);
                }
            }

    }
    public static class DFragment extends Fragment {
        String names[]={"aaa","bbb","ccc","ddd","eee"};
        public DFragment() {
            // TODO Auto-generated constructor stub
        }
    public static DFragment newInstance(int index){
        DFragment f= new DFragment();
        Bundle args=new Bundle();
        args.putInt("index", index);
        f.setArguments(args);
        return f;
    }
    public int getShownIndex() {
        return getArguments().getInt("index", 0);
    }
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        Log.i("DF","active");
        if (container == null) {
            return null;
        }
         ScrollView scroller = new ScrollView(getActivity());
         TextView text = new TextView(getActivity());
         int padding = (int)TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP,
                 4, getActivity().getResources().getDisplayMetrics());
         text.setPadding(padding, padding, padding, padding);
         scroller.addView(text);
         text.setText(names[getShownIndex()]);
         return scroller;
    }

    }
} 
```

我的主要活动课程是

```
public class JFragmentActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Log.i("main","active");
        setContentView(R.layout.main);
        /*Intent i = new Intent(getApplicationContext(), DActivity.class);
        startActivity(i);*/
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T15:04:13.773

您的标题暗示您正在尝试在 2.1 上运行此代码，如果是这种情况，那就是您的问题。

Fragment 类是在 API 级别 11（即 Android 3.0）中添加的，因此除非您有 Honeycomb 平板电脑或 ICS 手机或平板电脑，否则您将无法运行它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T09:27:32.397

如果第二个片段在第一个片段内，那么第二个片段的类属性应该是：

```
class="frag.demo.TFragment$DFragment" 
```

谢谢 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T12:43:05.297

您应该将活动添加到清单文件中。查看它以获取示例代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T13:20:22.287

如果您上面的代码仍然正确，那么您的主要活动 JFragmentActivity 会尝试通过 xml 加载 DActivity 的片段，但这是不可能的，因为这些片段与 DActivity 相关联。所以 DActivity 是唯一能够调用它们的活动。

所以你`/* Intent */`是对的。将你`FrameLayout`的`main.xml`文件应用到一个新的`DActivity`xml 文件并加载它`onCreate`，然后在你的`JFragmentActivity`. `LinearLayout`在您的应用程序中随机放置一些`JFragmentActivity`并运行该应用程序。

片段的类属性应该是这样的`class="frag.demo.DActivity$DFragment"`

# clojure - Clojure 舍入到小数位

> ID：10751638
> 
> 赞同：23
> 
> 时间：2012-05-25T09:13:53.513
> 
> 标签：clojure, decimal

我有代表十进制值的字符串，例如：“0.010”、“0.0100000”、“00.01000”

我想将它们四舍五入到指定的格式，例如：#.##

在 Java 中，我们有：

```
public BigDecimal setScale(int newScale, RoundingMode roundingMode) {
    return setScale(newScale, roundingMode.oldMode);
} 
```

在 Clojure 中实现这一目标而不是使用互操作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-05-25T09:45:10.737

`format`您可以为此目的使用 Clojure 。它应该为您的问题提供解决方案。以下是一些示例和参考：

```
user=> (format "%.2f" 0.010)
"0.01"
user=> (format "%.2f" 0.010000)
"0.01"
user=> (format "%.2f" 00.010000000)

user=> (doc format)
-------------------------
clojure.core/format
([fmt & args])
  Formats a string using java.lang.String.format, see java.util.Formatter for format
  string syntax 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2014-08-02T19:23:16.303

[这是clojure-doc.org](http://clojure-doc.org/articles/language/functions.html)上一个示例的略微修改版本：

```
(defn round2
  "Round a double to the given precision (number of significant digits)"
  [precision d]
  (let [factor (Math/pow 10 precision)]
    (/ (Math/round (* d factor)) factor))) 
```

@number23_cn 的答案在很多情况下都是正确的。但是，如果您想显示一个对每个数字进行舍入的序列，则带有精度参数的实数舍入函数可能会很有用。然后，您可以简单地映射`round2`序列以一次格式化每个数字：

```
(map (partial round2 2) [0.001 10.123456 9.5556]) 
```

返回

```
(0.0 10.12 9.56) 
```

当然，这对于更长的序列更有用。

* * *

另一种选择是使用[`cl-format`](http://clojuredocs.org/clojure_core/clojure.pprint/cl-format)，它是 Common Lisp 的 Clojure 实现`format`。它类似于 Clojure 的`format`（基于`java.util.Formatter`），但语法不同，并允许一些更花哨的技巧。

```
(clojure.pprint/cl-format nil "~,2f" 23.456)
; => "23.46" 
```

该`~{ ~}`指令允许处理序列，如上面的第一个示例所示：

```
(clojure.pprint/cl-format nil "~{ ~,2f~}" [0.001 10.123456 9.5556])
; => " 0.00 10.12 9.56" 
```

`~{ ~}`期望将序列视为参数，并将使用出现在它们之间的任何指令一个一个地吃掉序列中的元素`~{`和之间的任何指令一个一个地吃掉序列的元素`~}`。

（来自 Peter Seibel 的[*Practical Common Lisp*](http://www.gigamonkeys.com/book/)[的章节`format`](http://www.gigamonkeys.com/book/a-few-format-recipes.html)是对 Common Lisp 的最佳介绍，因此也是对 Clojure 和imo 的最佳介绍。通常来源[Common Lisp Hyperspec中](http://www.lispworks.com/documentation/HyperSpec/Front/index.htm)[关于 CL 的文档](http://www.lispworks.com/documentation/HyperSpec/Body/22_c.htm)有时可能难以使用。[关于 CL 的部分](http://www.cs.cmu.edu/afs/cs.cmu.edu/project/ai-repository/ai/html/cltl/clm/node200.html#SECTION002633000000000000000)在[*Common Lisp 中语言*](http://www.cs.cmu.edu/afs/cs.cmu.edu/project/ai-repository/ai/html/cltl/clm/clm.html)稍微好一点。）[](http://www.gigamonkeys.com/book/)*`format``cl-format`[`format`](http://www.lispworks.com/documentation/HyperSpec/Body/22_c.htm)[`format`](http://www.cs.cmu.edu/afs/cs.cmu.edu/project/ai-repository/ai/html/cltl/clm/node200.html#SECTION002633000000000000000)[](http://www.cs.cmu.edu/afs/cs.cmu.edu/project/ai-repository/ai/html/cltl/clm/clm.html)*

 *** * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-09-09T21:45:56.973

接受的答案建议`format`，但`format`不四舍五入（正如其中一条评论所指出的那样）。另一个答案（由火星）不适用于`BigDecimal`s。在 Clojure 中将 s舍`bigdec`入到小数位，我发现的唯一解决方案是使用 Java 互操作：

```
(defn round [s]
  (fn [n]
    (assert (bigdec? n))
    (.setScale n s RoundingMode/HALF_EVEN)))

(def round4 (round 4)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-07-17T14:08:58.550

一开始就将这些字符串转换为 BigDecimal 值很重要。任何数字文字`0.0001`或任何数值都可能被推断为双精度或浮点数，并且您可能会失去具有非常大比例的数字的精度。

第二件事是您可能不想明确格式化它，只需重新缩放到一些名义比例：

```
(defn round
  [n scale rm]
  (.setScale ^java.math.BigDecimal (bigdec n)
             (int scale)
             ^RoundingMode (if (instance? java.math.RoundingMode rm)
                             rm
                             (java.math.RoundingMode/valueOf
                              (str (if (ident? rm) (symbol rm) rm))))))

(round "12.345" 2 :UP)
12.35M

(round "12.345" 2 :DOWN)
12.34M

(round "12.345" 2 :HALF_UP)
12.35M

(round "12.3" 2 :HALF_EVEN)
12.30M 
```

`M`要在没有字母的情况下打印它，只需使用`str`or `.toPlainString`：

```
(str (round "0" 2 :HALF_EVEN))
"0.00"

(.toPlainString ^java.math.BigDecimal (round "1.2" 4 :UP))
"1.2000" 
```

您还可以看到我如何在[Bankster 库](https://github.com/randomseed-io/bankster)中抽象出类似的东西（用于玩货币和金钱）——寻找`apply`协议方法：

[https://github.com/randomseed-io/bankster/blob/main/src/io/randomseed/bankster/scale.clj](https://github.com/randomseed-io/bankster/blob/main/src/io/randomseed/bankster/scale.clj)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-04-10T18:23:14.980

`Double/ParseDouble`在对十进制数使用后使用该函数`format`将返回一个四舍五入为使用描述的所需小数位数的小数`format`。像这样：

```
user=> (Double/parseDouble (format "%.2f" 0.009) ) 
0.01 
```

如果进一步计算需要舍入数字，则解析 Double 很重要。但是，如果只需要输出一个四舍五入的数字，那么使用`format`是合适的。**

# sql - 如何获取不同生效日期的员工详细信息？

> ID：10751641
> 
> 赞同：1
> 
> 时间：2012-05-25T09:14:08.067
> 
> 标签：sql, oracle

请看以下图片。它本质上是我的数据库的样子。

BI_EMPLOYEE 表始终具有今天的当前记录。虽然它可能从以前的某个日期开始生效。

例如，如图所示的员工 Anna 从 3 月 31 日开始加入，直到今天没有对该员工进行任何更新。

因此，BI_EMPLOYEE 的生效日期 = 2012 年 3 月 31 日。

但是，稍后可能会在现在知道的未来日期对员工进行调整。

例如，安娜将于 5 月 10 日从亚洲搬到我们这里，以此类推。因此，从 5 月 10 日起，她所在的地区将是我们。

因此，我需要一份报告，其中将列出所有员工在每个生效日期的状态。基本上，所有员工在不同日期的所有活动和更新。

我们还安排了每天运行所有更新和活动的计划，即从更新和活动表中对 BI_EMPLOYEE TABLE 进行更改。

因此，5 月 10 日的时间表将把地区从亚洲改为我们。

我还附上了具有预期结果的图像。

我们正在使用 Oracle 数据库。

请帮忙。

![在此处输入图像描述](../Images/fc6c36f1394d5ef85fdc66829f935419.png) ![在此处输入图像描述](../Images/43b95c1e240dd79a4ca483e26acf24e9.png)

![在此处输入图像描述](../Images/26ac925674059c9bc04db8cc6e803396.png) ![在此处输入图像描述](../Images/a3408309bf9f8f3cc4316933c34815c9.png)

![在此处输入图像描述](../Images/02ab5fe11b7e29253248b7b61b062c20.png)

我基本上需要创建一个视图，该视图将提供所需的输出，然后可以随时查询任何报告。

**编辑1：**

以下是 DDL 和 DML

```
 --------------------------------------------------------
    --  DDL for Table BI_REGION
    --------------------------------------------------------
     CREATE TABLE "BI_REGION" 
       (    "REGION_ID" NUMBER(*,0) NOT NULL ENABLE, 
        "REGION_NAME" VARCHAR2(4000) NOT NULL ENABLE
       ) ;
    --------------------------------------------------------
    --   DATA FOR TABLE BI_REGION
    --------------------------------------------------------
    Insert into BI_REGION (REGION_ID,REGION_NAME) values (1,'Asia');
    Insert into BI_REGION (REGION_ID,REGION_NAME) values (2,'US');
    Insert into BI_REGION (REGION_ID,REGION_NAME) values (3,'UK');
    Insert into BI_REGION (REGION_ID,REGION_NAME) values (4,'Germany');
    Insert into BI_REGION (REGION_ID,REGION_NAME) values (5,'EUROPE');
    Insert into BI_REGION (REGION_ID,REGION_NAME) values (6,'AUSTRALIA');

    -------------------------------------------------------
    --  DDL for Table BI_COUNTRY
    --------------------------------------------------------
      CREATE TABLE "BI_COUNTRY" 
       (    "COUNTRY_ID" NUMBER(*,0) NOT NULL ENABLE, 
        "COUNTRY_NAME" VARCHAR2(4000) NOT NULL ENABLE 
       ) ;

    --   DATA FOR TABLE BI_COUNTRY
    --   FILTER = none used
    ---------------------------------------------------
    REM INSERTING into BI_COUNTRY
    Insert into BI_COUNTRY (COUNTRY_ID,COUNTRY_NAME) values (1,'India');
    Insert into BI_COUNTRY (COUNTRY_ID,COUNTRY_NAME) values (2,'USA');
    Insert into BI_COUNTRY (COUNTRY_ID,COUNTRY_NAME) values (3,'England');
    Insert into BI_COUNTRY (COUNTRY_ID,COUNTRY_NAME) values (4,'Germany');
    Insert into BI_COUNTRY (COUNTRY_ID,COUNTRY_NAME) values (5,'New Zealnd');

    --------------------------------------------------------
    --  DDL for Table BI_DIVISION
    --------------------------------------------------------
      CREATE TABLE "BI_DIVISION" 
       (    "DIVISION_ID" NUMBER(*,0) NOT NULL ENABLE, 
        "DIVISION_NAME" VARCHAR2(4000) 
       ) ;

    ---------------------------------------------------
    --   DATA FOR TABLE BI_DIVISION
    --   FILTER = none used
    ---------------------------------------------------

    Insert into BI_DIVISION (DIVISION_ID,DIVISION_NAME) values (1,'D1');
    Insert into BI_DIVISION (DIVISION_ID,DIVISION_NAME) values (2,'D2');

    --------------------------------------------------------
    --  DDL for Table BI_PRODUCT
    --------------------------------------------------------
      CREATE TABLE "BI_PRODUCT" 
       (    "PRODUCT_NAME" VARCHAR2(4000), 
        "PRODUCT_ID" NUMBER(*,0) NOT NULL ENABLE 
       ) ;

    ---------------------------------------------------
    --   DATA FOR TABLE BI_PRODUCT
    --   FILTER = none used
    ---------------------------------------------------
    REM INSERTING into BI_PRODUCT
    Insert into BI_PRODUCT (PRODUCT_NAME,PRODUCT_ID) values ('P1','1');
    Insert into BI_PRODUCT (PRODUCT_NAME,PRODUCT_ID) values ('P2','2');

    --------------------------------------------------------
    --  DDL for Table BI_EMPLOYEE_ACTIVITY
    --------------------------------------------------------
      CREATE TABLE "BI_EMPLOYEE_ACTIVITY" 
       (    "ACTIVITY_ID" NUMBER(*,0) NOT NULL ENABLE, 
        "STATUS" NUMBER(*,0), 
        "STATUS_2" NUMBER(*,0),     
        "STATUS_3" VARCHAR2(4000), 
        "CONFIDENTIAL" VARCHAR2(1 CHAR) DEFAULT 'N', 
        "EFFECTIVE_DATE" DATE, 
        "PARENT_ACTIVITY_ID" NUMBER(*,0), 
        "EXECUTED" VARCHAR2(1 CHAR) DEFAULT 'N', 
        "EMPLOYEE_ID" NUMBER 
       ) ;

    ---------------------------------------------------
    --   DATA FOR TABLE BI_EMPLOYEE_ACTIVITY
    --   FILTER = none used
    ---------------------------------------------------

    REM INSERTING into BI_EMPLOYEE_ACTIVITY
    Insert into BI_EMPLOYEE_ACTIVITY (ACTIVITY_ID,EMPLOYEE_ID, STATUS,STATUS_2,STATUS_3,CONFIDENTIAL,EFFECTIVE_DATE,PARENT_ACTIVITY_ID,) 
    values (1,1,'Leaver','Intra Region','','No','10-May-2012',0);

    Insert into BI_EMPLOYEE_ACTIVITY (ACTIVITY_ID,EMPLOYEE_ID, STATUS,STATUS_2,STATUS_3,CONFIDENTIAL,EFFECTIVE_DATE,PARENT_ACTIVITY_ID,) 
    values (2,1,'Joiner','Intra Region','','No','10-May-2012',1);

    Insert into BI_EMPLOYEE_ACTIVITY (ACTIVITY_ID,EMPLOYEE_ID, STATUS,STATUS_2,STATUS_3,CONFIDENTIAL,EFFECTIVE_DATE,PARENT_ACTIVITY_ID,) 
    values (3,1,'Leaver','Intra Region','','No','10-June-2012',0);

    Insert into BI_EMPLOYEE_ACTIVITY (ACTIVITY_ID,EMPLOYEE_ID, STATUS,STATUS_2,STATUS_3,CONFIDENTIAL,EFFECTIVE_DATE,PARENT_ACTIVITY_ID,) 
    values (4,1, 'Joiner','Intra Region','','No','10-June-2012',3);

    Insert into BI_EMPLOYEE_ACTIVITY (ACTIVITY_ID,EMPLOYEE_ID, STATUS,STATUS_2,STATUS_3,CONFIDENTIAL,EFFECTIVE_DATE,PARENT_ACTIVITY_ID,) 
    values (5,1,'Leaver','Intra Region','','No','10-July-2012',0);

    Insert into BI_EMPLOYEE_ACTIVITY (ACTIVITY_ID,EMPLOYEE_ID, STATUS,STATUS_2,STATUS_3,CONFIDENTIAL,EFFECTIVE_DATE,PARENT_ACTIVITY_ID,) 
    values (6,1, 'Joiner','Intra Region','','No','10-July-2012',5);

    Insert into BI_EMPLOYEE_ACTIVITY (ACTIVITY_ID,EMPLOYEE_ID, STATUS,STATUS_2,STATUS_3,CONFIDENTIAL,EFFECTIVE_DATE,PARENT_ACTIVITY_ID,) 
    values (7,1,'Leaver','Intra Business','','No','10-Aug-2012',0);

    Insert into BI_EMPLOYEE_ACTIVITY (ACTIVITY_ID,EMPLOYEE_ID, STATUS,STATUS_2,STATUS_3,CONFIDENTIAL,EFFECTIVE_DATE,PARENT_ACTIVITY_ID,) 
    values (8,1, 'Joiner','Intra Business','','No','10-Aug-2012',7);

    Insert into BI_EMPLOYEE_ACTIVITY (ACTIVITY_ID,EMPLOYEE_ID, STATUS,STATUS_2,STATUS_3,CONFIDENTIAL,EFFECTIVE_DATE,PARENT_ACTIVITY_ID,) 
    values (9,1,'Leaver','Intra Business','','No','10-Sep-2012',0);

    Insert into BI_EMPLOYEE_ACTIVITY (ACTIVITY_ID,EMPLOYEE_ID, STATUS,STATUS_2,STATUS_3,CONFIDENTIAL,EFFECTIVE_DATE,PARENT_ACTIVITY_ID,) 
    values (10,1, 'Joiner','Intra Business','','No','10-Sep-2012',9);

    --------------------------------------------------------
    --  DDL for Table BI_EMPLOYEE
    --------------------------------------------------------
      CREATE TABLE "BI_EMPLOYEE" 
       (    "EMP_ID" NUMBER(*,0) NOT NULL ENABLE, 
        "FIRSTNAME" VARCHAR2(4000), 
        "LASTNAME" VARCHAR2(4000), 
        "DIVISION_ID" NUMBER(*,0), 
        "PRODUCT_ID" NUMBER(*,0), 
        "REGION_ID" NUMBER(*,0), 
        "COUNTRY_ID" NUMBER(*,0), 
        "CITY" VARCHAR2(4000) ,
        "EFFECTIVE_DATE" DATE
       ) ;

    ---------------------------------------------------
    --   DATA FOR TABLE BI_EMPLOYEE
    --   FILTER = none used
    ---------------------------------------------------
    Insert into BI_EMPLOYEE (EMP_ID,FIRSTNAME,LASTNAME,DIVISION_ID,PRODUCT_ID,REGION_ID,COUNTRY_ID,EFFECTIVE_DATE,CITY) values (1,'Ana','Johnston',1,1,1,1,'31-March-2012','Mumbai');

    --------------------------------------------------------
    --  DDL for Table BI_EMPLOYEE_UPDATE
    --------------------------------------------------------
      CREATE TABLE "BI_EMPLOYEE_UPDATE" 
       (    "EMPLOYEE_UPDATE_ID" NUMBER(*,0) NOT NULL ENABLE, 
        "EMPLOYEE_ID" NUMBER(*,0), 
        "COLUMN_NAME" VARCHAR2(4000), 
        "OLD_VALUE" VARCHAR2(4000), 
        "NEW_VALUE" VARCHAR2(4000), 
        "EFFECTIVE_DATE" DATE, 
        "EXECUTED" VARCHAR2(1 CHAR) DEFAULT 'N', 
        "ACTIVITY_ID" NUMBER 
       ) ;

    ---------------------------------------------------
    --   DATA FOR TABLE BI_EMPLOYEE_UPDATE
    --   FILTER = none used
    ---------------------------------------------------
    Insert into BI_EMPLOYEE_UPDATE (EMPLOYEE_ID,COLUMN_NAME,OLD_VALUE,NEW_VALUE,EFFECTIVE_DATE,EXECUTED,ACTIVITY_ID)  values (1,'REGION_ID','1','2','10-May-2012', 'N', 1);
    Insert into BI_EMPLOYEE_UPDATE (EMPLOYEE_ID,COLUMN_NAME,OLD_VALUE,NEW_VALUE,EFFECTIVE_DATE,EXECUTED,ACTIVITY_ID)  values (1,'COUNTRY_ID','1','2','10-May-2012', 'N', 1);
    Insert into BI_EMPLOYEE_UPDATE (EMPLOYEE_ID,COLUMN_NAME,OLD_VALUE,NEW_VALUE,EFFECTIVE_DATE,EXECUTED,ACTIVITY_ID)  values (1,'CITY','Mumbai','New York','10-May-2012', 'N', 1);

    Insert into BI_EMPLOYEE_UPDATE (EMPLOYEE_ID,COLUMN_NAME,OLD_VALUE,NEW_VALUE,EFFECTIVE_DATE,EXECUTED,ACTIVITY_ID)  values (1,'REGION_ID','2','3','10-June-2012', 'N', 3);
    Insert into BI_EMPLOYEE_UPDATE (EMPLOYEE_ID,COLUMN_NAME,OLD_VALUE,NEW_VALUE,EFFECTIVE_DATE,EXECUTED,ACTIVITY_ID)  values (1,'COUNTRY_ID','2','3','10-June-2012', 'N', 3);
    Insert into BI_EMPLOYEE_UPDATE (EMPLOYEE_ID,COLUMN_NAME,OLD_VALUE,NEW_VALUE,EFFECTIVE_DATE,EXECUTED,ACTIVITY_ID)  values (1,'CITY','New York','London','10-June-2012', 'N', 3);

    Insert into BI_EMPLOYEE_UPDATE (EMPLOYEE_ID,COLUMN_NAME,OLD_VALUE,NEW_VALUE,EFFECTIVE_DATE,EXECUTED,ACTIVITY_ID)  values (1,'REGION_ID','3','4','10-July-2012', 'N', 5);
    Insert into BI_EMPLOYEE_UPDATE (EMPLOYEE_ID,COLUMN_NAME,OLD_VALUE,NEW_VALUE,EFFECTIVE_DATE,EXECUTED,ACTIVITY_ID)  values (1,'COUNTRY_ID','3','4','10-July-2012', 'N', 5);
    Insert into BI_EMPLOYEE_UPDATE (EMPLOYEE_ID,COLUMN_NAME,OLD_VALUE,NEW_VALUE,EFFECTIVE_DATE,EXECUTED,ACTIVITY_ID)  values (1,'CITY','London','frankfurt','10-July-2012', 'N', 5);

    Insert into BI_EMPLOYEE_UPDATE (EMPLOYEE_ID,COLUMN_NAME,OLD_VALUE,NEW_VALUE,EFFECTIVE_DATE,EXECUTED,ACTIVITY_ID)  values (1,'DIVISION_ID','1','2','10-Aug-2012', 'N', 7);
    Insert into BI_EMPLOYEE_UPDATE (EMPLOYEE_ID,COLUMN_NAME,OLD_VALUE,NEW_VALUE,EFFECTIVE_DATE,EXECUTED,ACTIVITY_ID)  values (1,'Product_ID','1','2','10-Aug-2012', 'N', 7);

    Insert into BI_EMPLOYEE_UPDATE (EMPLOYEE_ID,COLUMN_NAME,OLD_VALUE,NEW_VALUE,EFFECTIVE_DATE,EXECUTED,ACTIVITY_ID)  values (1,'PRODUCT_ID','2','3','10-Sep-2012', 'N', 9);

    Insert into BI_EMPLOYEE_UPDATE (EMPLOYEE_ID,COLUMN_NAME,OLD_VALUE,NEW_VALUE,EFFECTIVE_DATE,EXECUTED,ACTIVITY_ID)  values (1,'LASTNAME','Johnston','thomas','10-Nov-2012', 'N', 0); 
```

好的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T13:23:53.977

首先，更好的数据结构是在数据中有一个生效日期和结束日期。这样，您可以查看在任何给定日期哪个记录处于活动状态。

幸运的是，您可以使用以下查询在 Oracle 中获取结束日期：

```
select eu.*,
       (lead(effective_date, 1, '9999-01-01') over (partition by employee_id, column_name
                                      order by effective_date)) - 1) as end_date
from bi_employee_update 
```

此查询使用“lead”分析函数查看下一个生效日期。然后它减去一天以获得当前记录的结束日期，当前记录的默认值为 01Jan9999。

使用此查询，您可以使用 between 子句在任何日期获取有关员工的信息：

```
select eu.*
from (select eu.*,
             (lead(effective_date, 1, '9999-01-01') over (partition by employee_id, column_name
                                      order by effective_date)) - 1) as end_date
      from bi_employee_update
     ) eu
where <date> between effective_date and end_date 
```

你能从这里查询吗？

# c# - asp.net 中的 C# 下拉列表

> ID：10751643
> 
> 赞同：-3
> 
> 时间：2012-05-25T09:14:15.040
> 
> 标签：c#

我需要代码来清除下拉列表文本而不是项目。喜欢`textbox1.text=" ";`请帮帮我。

```
// I need dropdownlist clear like textbox.
TextBox1.Text = ""; //like this 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T09:29:06.903

我假设您在 0（第一个）索引处有一个 DropDownList 的空条目（名称值）。

```
<asp:DropDownList ID="DropDownList1" runat="server">
   <asp:ListItem Value="0">***Select***</asp:ListItem>
   <asp:ListItem value="10">Foo</asp:ListItem>
   <asp:ListItem value="20">Bar</asp:ListItem>
</asp:DropDownList> 
```

并使用 DropDownList1.SelectedIndex 或 SelectedValue 属性重置 ListItem。

```
DropDownList1.SelectedValue="0"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T09:29:19.853

也许 ...

```
MyDropDownList.Items.Clear(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-15T09:41:39.357

用这个：

```
DropDownList1.SelectedIndex = 0; 
```

# r - ggplot2中具有多个密度的多个图

> ID：10751646
> 
> 赞同：6
> 
> 时间：2012-05-25T09:14:25.507
> 
> 标签：r, ggplot2

我正在尝试使用 facet_wrap() 在共享一个共同图例的图上绘制几个图。这些图包含 4 个密度估计，每个使用 geom_density() 构建。这是数据外观的一个最小示例。为每个级别的估计器估计一个密度，并为每个 xp 值绘制不同的图。

```
 > esti
    estimator      value           xp
1      OLS Oracle 0.35757317 N= 10 T= 100
2      OLS Oracle 0.50540655 N= 10 T= 100
3        OLS Full 0.02276872 N= 10 T= 100
4        OLS Full 0.53616020 N= 10 T= 100
5           Lasso 0.00000000 N= 10 T= 100
6           Lasso 0.30448578 N= 10 T= 100
7  Adaptive Lasso 0.00000000 N= 10 T= 100
8  Adaptive Lasso 0.49949267 N= 10 T= 100
9      OLS Oracle 0.48392914 N= 10 T= 500
10     OLS Oracle 0.53685915 N= 10 T= 500
11       OLS Full 0.50565482 N= 10 T= 500
12       OLS Full 0.61407003 N= 10 T= 500
13          Lasso 0.38342782 N= 10 T= 500
14          Lasso 0.52012928 N= 10 T= 500
15 Adaptive Lasso 0.47951875 N= 10 T= 500
16 Adaptive Lasso 0.53222172 N= 10 T= 500 
```

我可以用四种密度构建一个图：

```
library('ggplot2')
ggplot(data=esti,aes(x=value,colour=estimator)) + geom_density() 
```

或两个面板，每个面板具有一个密度：

```
ggplot(data=esti,aes(x=value)) + geom_density() +facet_wrap(~xp,scales='free_y') 
```

但是，两者一起不起作用并导致错误：

```
> ggplot(data=esti,aes(x=value,colour=estimator)) + geom_density() +facet_wrap(~xp,scales='free_y')
Error in UseMethod("scale_dimension") : 
  no applicable method for 'scale_dimension' applied to an object of class "NULL" 
```

我尝试了不同的尺度值，或者完全忽略它，但没有运气。我试图跟踪哪个对象被应用于“scale_dimension”，但也没有运气。任何人都可以启发我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T02:45:15.517

由于我无法发表评论以支持第二个 joran 的建议（即，我没有足够的声誉），因此这里有一个答案：

通过从

```
 ggplot(data=esti,aes(x=value,colour=estimator)) + geom_density() 
```

至

```
 ggplot(data=esti,aes(x=value,colour=estimator))
 + geom_density() +facet_wrap(~xp,scales='free_y') 
```

每个估计器/xp 对只剩下 2 个数据点。看起来，这不足以计算密度。例如，下面的代码行（注`data=rbind(esti,esti)`）

```
ggplot(data=rbind(esti,esti),aes(x=value,colour=estimator))
+ geom_density() +facet_wrap(~xp,scales='free_y') 
```

此外，如果你替换`geom_density`为`geom_bar`，它的工作原理

```
ggplot(data=esti,aes(x=value,colour=estimator))
+ geom_bar() +facet_wrap(~xp,scales='free_y') 
```

# jquery - 将“of:”属性设置为 jQuery ui 位置插件中的前一个元素

> ID：10751652
> 
> 赞同：2
> 
> 时间：2012-05-25T09:14:41.857
> 
> 标签：jquery, user-interface, position, css-position

我使用 jQuery ui 位置插件在其先前元素旁边设置一些帮助框，如果我设置先前的框 id，它可以工作，但如果我尝试使其更具动态性，并且为此，我需要它是动态的。让我们看看代码：

CSS

```
.helpBox {
    width: 150px;
    height: 75px;
    position: absolute;        
    display: block;
    right: 0;
    bottom: 0;
    background-color: #bcd5e6;
    text-align: center;
} 
```

HTML

```
<asp:TextBox ID="txtInformation" runat="server" TextMode="MultiLine" Rows="5" CssClass="required" ClientIDMode="Static"></asp:TextBox>
<div class="helpBox">This is a helping box.</div> 
```

对不起 asp.net 代码，它只是一个文本框。

JS

```
$(".helpBox").position({
    of: $("#txtInformation"),
    my: "left center",
    at: "right center",
    offset: "10 0"
}); 
```

这行得通，但是如果我尝试使用它，以便我可以重用它并使其与它不支持的所有帮助框一起工作：

```
$(".helpBox").position({
    of: $(this).prev(),
    my: "left center",
    at: "right center",
    offset: "10 0"
}); 
```

现在我想知道如何使它工作。该属性应该处理它，但不知何故它不是。谁能告诉我我做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T09:20:13.667

您正在将一个对象传递给该`.position`函数。对象在传递给函数之前被定义，因此`$(this).prev()`将在调用该方法的代码的上下文中进行评估。*不一定*`this`会在此处参考您的。*`.helpBox`*

 *但是，如果您使用 迭代您的帮助框`$.each`，那么`this`在每次迭代时都会引用实际的框：

```
$('.helpBox').each(function() {
   $(this).position({
     of: $(this).prev(),
     my: "left center",
     at: "right center",
     offset: "10 0"
   });
}); 
```

[演示](http://jsfiddle.net/9NmTw/)*

# android - 如何让我的应用程序使用 android 以不同的语言显示

> ID：10751658
> 
> 赞同：3
> 
> 时间：2012-05-25T09:15:03.627
> 
> 标签：android

我有一个正在运行的应用程序，但我希望能够将其更改为不同的语言，如西班牙语和意大利语。请帮助我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T09:20:08.017

您应该阅读 [本地化](http://developer.android.com/guide/topics/resources/localization.html)文章以了解更多信息

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T10:00:39.483

在您的项目中，在“res”目录中添加一个“values-es”目录。然后在此目录中放置一个新文件“string.xml”。您现在应该在“values”目录中有一个“string.xml”文件，在“values-es”目录中有一个“string.xml”文件。

现在，您只需在每个文件中放入类似的内容：

在“values”目录的“string.xml”中：

```
<resources>
    <string name="toto">The value in the default language</string>
</resources> 
```

在“values-es”目录的“string.xml”中：

```
<resources>
    <string name="toto">The value in spanish</string>
</resources> 
```

现在，在您的代码中，当您调用“toto”字符串时，它将选择正确语言的字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T09:20:52.653

您可以在“values-it”和“values-es”目录中提供 string.xml。设备会自动使用设备语言对应的资源。您必须了解的一件事是，默认情况下将使用“值”目录。所以如果我有一个“values”和一个“values-es”目录，这就是行为：当你启动你的应用程序时，设备将检查它的语言是否是“es”。如果是这种情况，它将使用“values-es”资源。在所有其他情况下，它将使用“值”目录。

# objective-c - NSOutlineView - 它是如何被调用的？

> ID：10751662
> 
> 赞同：0
> 
> 时间：2012-05-25T09:15:16.377
> 
> 标签：objective-c, cocoa, nsoutlineview

在 NSTableView 中，有一个名为 reloadData 的方法。

NSOutlineView 中有类似的东西吗？我正在使用没有树控制器的 NSOutlineView。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T09:18:17.580

`NSOutlineView`是 的子类`NSTableView`，因此所有表格视图方法也适用于大纲视图。

# php - 不同的单选按钮 不同的查询

> ID：10751666
> 
> 赞同：1
> 
> 时间：2012-05-25T09:15:52.043
> 
> 标签：php

请原谅我的英语，我使用翻译器。

假设我的网站上有 4 个单选按钮和一个提交。由于没有选择任何内容并单击提交按钮以显示文本，例如“请选择”。选择了第一个单选按钮并单击提交以发送查询，例如

```
mysql_query("UPDATE `users` SET `credits` = `credits` + $credits1 WHERE `username` = '$logged[username]'") or die(mysql_error()); 
```

选择了第二个单选按钮并单击提交以发送请求

```
mysql_query("UPDATE `users` SET `credits` = `credits` + $credits2 WHERE `username` = '$logged[username]'") or die(mysql_error()); 
```

和其他人通过这种方式。

```
if(isset($_POST['radio'])) {

                $choices= mysql_escape_string($_POST['choices']);

}else{
?>
<form method="post" action="">

<input type="radio" name="choices" value="1" /> Run Query 1
<input type="radio" name="choices" value="2" /> Run Query 2
<input type="radio" name="choices" value="3" /> Run Query 3

<input type="submit" class="buttonsub" name="submit" value="Post"/>
</form>
<?php } ?> 
```

这 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T09:54:25.957

为您的输入字段命名“

```
<input type='radio' name = ' credit1 '...>" and so forth, 
```

在 php 中将它们设置为变量

```
 $radio1 = $_POST['credit1']; $radio2 = $_POST['credit2']; 
```

然后做一个 if 语句：

```
 if($radio1 == 'the value you gave your input') {
    mysql_query("UPDATE users SET credits = 
                credits + $credits1 WHERE username    
                = '" . $logged[username] . "'");}
 elseif( $radio2 == 'other value') {
    mysql_query("UPDATE users SET credits = 
    credits + $credits2 WHERE username
     = '" . $logged[username] . "'");} 
```

希望我了解您的问题并有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T09:59:53.257

请尝试下面给出的代码

```
 if(isset($_POST['choices']) && !empty($_POST['choices'])){
        if($_POST['choices'] == '1'){
             //Run query for credit1
        }elseif($_POST['choices'] == '2'){
             //Run query for credit2
        }elseif($_POST['choices'] == '3'){
             //Run query for credit3
        }elseif($_POST['choices'] == '4'){
             //Run query for credit4
        } 
}else{
     echo "Please select once choice for submit query!";
} 
```

如果您正在运行上面给出的查询，那么您不需要设置 if else 条件。只需输入后值`$credit`并运行查询。

谢谢

# c# - 在c#中获取网页的+1计数

> ID：10751670
> 
> 赞同：1
> 
> 时间：2012-05-25T09:16:13.690
> 
> 标签：c#, .net, c#-4.0, google-plus, google-plus-one

我想要一种方法来获取网页网址并返回它的 +1 计数。我搜索了谷歌并找到[了这个](http://johndyer.name/getting-counts-for-twitter-links-facebook-likesshares-and-google-1-plusones-in-c-or-php/)，方法是：

```
int GetPlusOnes(string url) 
{

     string googleApiUrl = "https://clients6.google.com/rpc"; //?key=AIzaSyCKSbrvQasunBoV16zDH9R33D88CeLr9gQ";

     string postData = @"[{""method"":""pos.plusones.get"",""id"":""p"",""params"":{""nolog"":true,""id"":""" + url + @""",""source"":""widget"",""userId"":""@viewer"",""groupId"":""@self""},""jsonrpc"":""2.0"",""key"":""p"",""apiVersion"":""v1""}]";

     System.Net.HttpWebRequest request = (System.Net.HttpWebRequest)System.Net.WebRequest.Create(googleApiUrl);
     request.Method = "POST";
     request.ContentType = "application/json-rpc";
     request.ContentLength = postData.Length;

     System.IO.Stream writeStream = request.GetRequestStream();
     UTF8Encoding encoding = new UTF8Encoding();
     byte[] bytes = encoding.GetBytes(postData);
     writeStream.Write(bytes, 0, bytes.Length);
     writeStream.Close();

     System.Net.HttpWebResponse response = (System.Net.HttpWebResponse)request.GetResponse();
     System.IO.Stream responseStream = response.GetResponseStream();
     System.IO.StreamReader readStream = new System.IO.StreamReader(responseStream, Encoding.UTF8);
     string jsonString = readStream.ReadToEnd();

     readStream.Close();
     responseStream.Close();
     response.Close();

    var json = new System.Web.Script.Serialization.JavaScriptSerializer().Deserialize(jsonString);
    int count = Int32.Parse(json[0]["result"]["metadata"]["globalCounts"]["count"].ToString().Replace(".0", ""));

    return count;
} 
```

但有一个错误

```
var json = new System.Web.Script.Serialization.JavaScriptSerializer().Deserialize(jsonString); 
```

因为该`Deserialize`方法有两个参数，而我不知道第二个参数。有人知道第二个参数是什么或知道另一种可以正常工作的方法吗？

**更新** 我也试过

```
 public static Regex REGEX_GETURLCOUNT =
    new Regex(@"<div[^>]+id=""aggregateCount""[^>]+>(\d*)</div>");

    public int GetPlusOnes(string url)
    {
        string fetchUrl =
            "https://plusone.google.com/u/0/_/+1/fastbutton?url=" +
            HttpUtility.UrlEncode(url) + "&count=true";
        WebClient wc=new WebClient();
        string response = wc.DownloadString(fetchUrl);

        Match match = REGEX_GETURLCOUNT.Match(response);
        if (match.Success)
        {
            return int.Parse(match.Groups[1].Value);
        }
        return 0;
    } 
```

但`match.Success`总是`false`！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T09:20:27.737

最近不得不做这样的事情，我用过：

```
 public partial class _Default : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            int test = GetPlusOnes("http://www.allfancydress.com/"); //Returns 11 plus ones
            Response.Write("Plus ones: " + test.ToString());
        }

        public static Regex REGEX_GETURLCOUNT =
         new Regex(@"<div[^>]+id=""aggregateCount""[^>]+>(\d*)</div>");

        public static int GetPlusOnes(string url)
        {
            string fetchUrl =
                "https://plusone.google.com/u/0/_/+1/fastbutton?url=" +
                HttpUtility.UrlEncode(url) + "&count=true";
            HttpWebRequest request =
                (HttpWebRequest)WebRequest.Create(fetchUrl);
            string response = new StreamReader(request.GetResponse()
                .GetResponseStream()).ReadToEnd();
            Match match = REGEX_GETURLCOUNT.Match(response);
            if (match.Success)
            {
                return int.Parse(match.Groups[1].Value);
            }
            return 0;
        }

    } 
```

希望这可以帮助

*编辑了我的自定义代理类，你可以剪切和粘贴它，它会为你工作。

# mongodb - 在 MongoMapper 中搜索与正则表达式不匹配的字段

> ID：10751673
> 
> 赞同：3
> 
> 时间：2012-05-25T09:16:38.177
> 
> 标签：mongodb, mongomapper

在 MongoMapper 中，我可以使用以下查询来搜索基于正则表达式匹配的项目：

```
Foo.where(:name => /Foo.*/) 
```

如何搜索他们的`name`字段不匹配的项目`/Foo.*/`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T09:26:49.077

您可以使用[`$not`](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-Metaoperator%3A%7B%7B%24not%7D%7D)

```
db.customers.find( { name : { $not : /acme.*corp/i } } ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-28T23:23:20.823

如果你在 python (pymongo) 中，这将不起作用，你会得到一个关于如何使用 BSON 正则表达式的令人困惑的错误。

但是，它将直接接受 python 正则表达式对象：

```
db['collection'].find({'name': {'$not': re.compile("^__TEST")}}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-19T02:42:55.690

或者 mongomapper 中的类似内容也适用于搜索在电子邮件字段中未找到电子邮件域的情况，如果为 false 则批准：

```
non_org_email_users = org.users.where(
  :email => { '$not' => /@#{org.official_email}/i }, 
  approved: false).all 
```

# c# - 级联删除数据库后删除用户界面数据的正确方法

> ID：10751674
> 
> 赞同：0
> 
> 时间：2012-05-25T09:16:44.570
> 
> 标签：c#, jquery, asp.net-mvc, user-interface, software-design

我有关系 1 公司有很多组织

我的组织树视图显示在用户界面的左侧。

“删除公司”按钮打开模式删除对话框。

在对话框中，我选择了要删除并确认的公司。

现在，该公司在数据库中被删除，并带有一个 ajax 帖子。

如果**result.success**为**真**，那么我有**2 个**选择。

我的问题是现在哪个更好，为什么？

1.  通过 $('#TreeView').empty(); 删除整个组织树 清除 div 内的所有内容
2.  通过执行 $('#TreeView').load(UrlToGetTreeHierarchy) 来“删除”整个组织树，这应该返回一个空的树集合。

两者具有相同的效果，但第 2 点再次访问数据库。

在这种情况下，最佳做法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T09:22:22.870

绝对是第一。要求一个空的数据集没有任何好处。这将需要一个请求、一个数据库查询，然后是一个响应。第一种方法只是清除已经确认删除的数据。

# maven - Maven 提供了目标所需的依赖项

> ID：10751675
> 
> 赞同：0
> 
> 时间：2012-05-25T09:16:45.013
> 
> 标签：maven

我在我的 Maven 构建中有一个提供的依赖项——在 Tomcat 实例中安装和提供的数据库驱动程序。到目前为止，一切都很好。

但我也使用[Flyway](http://code.google.com/p/flyway/)并希望`mvn flyway:migrate`从我的构建中执行手动 () 迁移。因为我需要依赖项。当然，我可以通过在 Web 应用程序启动时检查数据库的方式集成 Flyway，但我想解决 Maven 方法。

如何才能做到这一点？在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T09:19:34.007

您可以使用运行 Flyway 所需的依赖项创建一个[Maven 配置文件，您可以通过以下方式激活该配置文件：](http://maven.apache.org/guides/introduction/introduction-to-profiles.html)

```
 mvn flyway:migrate -P flywayProfile 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T09:22:00.720

我发现也可以在插件部分下指定依赖项，请参阅[如何在 Maven 中覆盖插件的依赖项](http://www.sonatype.com/people/2008/04/how-to-override-a-plugins-dependency-in-maven/)。这解决了我的问题。

应该注意的是，如果您对依赖项使用其他存储库，则必须`pluginRepositories`在这种情况下提供标签。

# javascript - Paper.js 与 excanvas

> ID：10751677
> 
> 赞同：4
> 
> 时间：2012-05-25T09:16:51.513
> 
> 标签：javascript, internet-explorer-8, excanvas, paperjs

我越来越喜欢 paper.js，但在意识到它不支持 IE8 之后，我想知道是否可以让 paper.js 与 excanvas 一起工作？有没有人测试过这个并且有可用的例子吗？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-11T23:41:56.033

Paper.js 代码显式使用 HTMLCanvasElement（截至 2012 年 8 月 11 日在[dist 中的](https://github.com/paperjs/paper.js/blob/master/dist/paper.js#L7137)第 7137 行），它在 IE8 上不存在，因此开箱即用的代码失败。

paperjs[关于页面](http://paperjs.org/about/)说：

> Paper.js 针对支持 Canvas 对象和 EcmaScript 5 的现代浏览器。尽管理论上可以编写适用于旧浏览器的代码（是的，Explorer 8 及以下版本，我们正在寻找你！），我们目前不要开箱即用地支持它们。让我们前进吧！

可能可以修改 paperjs 代码以使其正常工作，但我没有这样做（在 IETester 中进行测试……错误是画布没有 getContext 属性，即使 excanvas 应该提供了一个属性）。

# android - 操作系统级别的 Android 应用程序中的数据安全性和缺陷

> ID：10751681
> 
> 赞同：0
> 
> 时间：2012-05-25T09:17:06.023
> 
> 标签：android, security

我已经开始研究 Android 中可能存在什么样的安全漏洞。你能分享你对可能发生的事情的看法吗？

在操作系统级别我发现

1> 内存块上的缓冲区溢出。

你能分享一下其他情况可能是什么......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T13:13:59.510

科学界有两篇关于此的主要文章：

[http://www.blackhat.com/presentations/bh-usa-09/BURNS/BHUSA09-Burns-AndroidSurgery-PAPER.pdf](http://www.blackhat.com/presentations/bh-usa-09/BURNS/BHUSA09-Burns-AndroidSurgery-PAPER.pdf)

[http://www.cs.rice.edu/~sc40/pubs/enck-sec11.pdf](http://www.cs.rice.edu/~sc40/pubs/enck-sec11.pdf)

此外，您还可以[在此处](http://css.csail.mit.edu/6.858/2012/readings/android.pdf)找到有关 Android 安全性本身的文章。

还有伯恩斯的[介绍](http://www.youtube.com/watch?v=c1pYCuhTJrE)。

# ruby-on-rails-3 - 在 Rails 3 中将参数传递给 yield（或者可能吗？）

> ID：10751685
> 
> 赞同：6
> 
> 时间：2012-05-25T09:17:27.347
> 
> 标签：ruby-on-rails-3, erb, yield, content-for

我正在尝试使用`yield`and创建动态内容`content_for`。基本上我有一堆布局。而且我不想为每个布局创建一堆视图。我想在需要时渲染视图部分。对于代码的不同部分，没关系。但是我对不同内容的相同部分有问题。

在我的`application.html.erb`

```
<%= yield %>
<%= yield :name_section %> 
```

在我的`show.html.erb`我有；

```
<% content_for :name_section do %>
    <b>Name:</b>
    <%= @post.name %>
<% end %> 
```

这是问题；

如果我想要多个具有不同内容的 name_section 怎么办。我是说; 我想在`:name_section`不同的地方放置不同的内容。

例如；

```
<table>
  <tr>
    <td>
      <%= yield :name_section %>
    </td>
  </tr>
  <tr>
    <td>
      <%= yield :name_section %>
    </td>
  </tr>
</table> 
```

有任何想法吗？

谢谢你。恰达什

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-06-03T00:15:57.080

我相信你所要求的现在是可能的：

```
# The template
<%= render layout: "my_layout" do |customer| %>
  Hello <%= customer.name %>
<% end %>

# The layout
<html>
  <%= yield Struct.new(:name).new("David") %>
</html> 
```

来自： [http ://api.rubyonrails.org/classes/ActionView/Helpers/RenderingHelper.html#method-i-_layout_for](http://api.rubyonrails.org/classes/ActionView/Helpers/RenderingHelper.html#method-i-_layout_for)

希望这可以帮助其他人寻找相同的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T16:14:14.220

以下解决方案对我来说效果很好。它不允许您传递 args，但是如果在调用之前`content_for`（第二次），您将 args 分配给实例变量，这允许您在`content_for`. 基本思想是`content_for`在第一次调用内容时生成内容，然后该内容保持静态，但此解决方法会延迟静态内容生成，直到您准备好显示内容。

首先，将此函数添加到您的帮助模块：

```
def immediate_content_for name, content = nil, &block
  @immediate_content ||= {}
  if content || block_given? then
    @immediate_content[name] = Proc.new { content_for name, content, &block }
    nil
  else
    @immediate_content[name].call
    content_for name
  end
end 
```

然后，假设您想传递`arg1`给`content_for`. 您现在可以这样做：

```
<% content_for :my_form %>
  <%= some_helper_function(@arg1) %>
<% end %> 
```

然后，稍后在您的代码中，在您定义之后`arg1`：

```
<%= @arg1 = arg1 %>
<%= content_for :my_form %> 
```

从某种意义上说，这是一种黑客行为，我不能保证 的行为`immediate_content_for`在所有其他方面与 的行为相同`content_for`，并且如果`content_for`某些未来版本的 rails 中的行为发生变化，`immediate_content_for`则需要对其进行更新继续镜像`content_for`。尽管它不是最佳解决方案，但它现在可以完成工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-25T11:26:23.060

鉴于文档：

[http://api.rubyonrails.org/classes/ActionView/Helpers/RenderingHelper.html#method-i-_layout_for](http://api.rubyonrails.org/classes/ActionView/Helpers/RenderingHelper.html#method-i-_layout_for)

和方法的源代码（你可以在那里浏览）：

```
def _layout_for(*args, &block)
  name = args.first

  if block && !name.is_a?(Symbol)
    capture(*args, &block)
  else
    super
  end
end 
```

`yield`你所要求的在布局中是不可能的。

# gwt - 移动应用程序的 GWT/mGWT 开发和部署

> ID：10751686
> 
> 赞同：8
> 
> 时间：2012-05-25T09:17:43.640
> 
> 标签：gwt, cordova, mgwt

我真的对很多链接感到困惑：mgwt、Phonegap、Cordova、gwt-phonegap 等......有人真的可以帮助我解决所有这些基本问题吗？

1.  Phonegap 和 Cordova 是一回事——它们将帮助我们使用生成的 JS 文件构建移动可部署组件。我对么？

2.  Cordova 站点中提供的步骤来创建 Android 项目并部署需要生成我们项目的 html、JS 和 CSS 内容。所以我们需要在我们从项目来到这里之前构建这些。对？

3.  现在，如果我有一个简单的 GWT 项目，我可以直接使用步骤 b（Cordova 方法）构建 GWT 客户端并部署生成的 Web 应用程序内容（.nocache.js 和模块 html 文件）而无需任何更改。我知道这本身被称为 Phonegap 项目，我们使用[Phonegap 的 Android 教程](http://docs.phonegap.com/en/1.7.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android)

4.  现在，如果我在我的 GWT 应用程序中使用了 mGWT 小部件，在我开始使用 Cordova 步骤之前还需要什么额外的 - mGWT 编译的代码不能直接在 Cordova Phonegap 项目中使用？

什么是gwt-Phonegap？为什么我们现在需要这个？有人真的可以用一些简单的话来解释使用 gwt-Phonegap 到底发生了什么吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-25T21:18:36.200

以下是答案：

1.  Cordova 是开源代码库，Phonegap 是它的一种发行版，就像 ubuntu 是 linux 内核的一种发行版一样。
2.  如果您想将 GWT 部署到 android 设备，您需要编译您的 GWT 应用程序并将编译器的输出放在 phonegap 项目的 www 文件夹中。
3.  见 2。
4.  您只需使用 mgwt 小部件和 phonegap api (gwt-phonegap) 正常构建 GWT，使用 GWT 编译器对其进行编译并将其复制到设备。

这是一个视频，解释了 GWT、Phonegap、mgwt 和 gwt-phonegap 的基本概念：[http ://www.youtube.com/watch?v=0V0CdhMFiao&feature=plcp](http://www.youtube.com/watch?v=0V0CdhMFiao&feature=plcp)

# php - PHP：可以在默认的 php.ini 文件中设置常量

> ID：10751688
> 
> 赞同：6
> 
> 时间：2012-05-25T09:17:44.180
> 
> 标签：php, apache

我想要一个可用于服务器上所有 PHP 脚本的常量（一个字符串）。

根据[http://php.net/manual/en/function.parse-ini-file.php](http://php.net/manual/en/function.parse-ini-file.php)如果你解析一个额外的 .ini 文件，这很容易，但是我不想解析一个额外的文件，我想要在全局 php.ini 中设置我的常量，而无需解析脚本中的任何内容。（事实上​​，这就是重点，因为我需要常量来查找要包含/解析/等的东西：当我知道这个额外的 .ini 文件在哪里时，我就不再需要它了！）

只是在 php.ini 中发明一个新常量，然后尝试使用 ini_get() 访问它是行不通的，还有其他方法吗？

我自己编译 Apache 和 PHP，所以我也可以在编译时设置常量和/或在必要时使用 Apache-constants。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-25T09:20:36.207

您可以在 PHP ini 中使用 PHP[`auto_prepend_file`](http://www.php.net/manual/en/ini.core.php#ini.auto-prepend-file)脚本来执行此操作，因为它将在您的任何用户级脚本之前运行：

> 指定在主文件之前自动解析的文件的名称。该文件被包含，就好像它是用 require 函数调用的一样，因此使用了 include_path。

所以你可以添加一个ini行，如：

```
auto_prepend_file="/home/user/script.php" 
```

在 /home/user/script.php 中：

```
define('CONSTANT_NAME', 'your nice value here'); 
```

现在在您的 PHP 脚本中，您可以`CONSTANT_NAME`从任何您喜欢的地方访问，因为它在所有 PHP 脚本中都可用。

我在使用基于 mod_rewrite 的大规模虚拟主机的登台服务器上使用此技术，因此我可以为我的 PHP 脚本提供准确的文档根目录。我[之前在一篇博文](http://blog.simonholywell.com/post/1516566788/team-development-server#virtual_document_root)中讨论过这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T09:23:48.830

简单的。创建一个文件 xxx.php，在其中定义常量并将该文件添加到 php.ini 中的全局[include_path](http://www.php.net/manual/en/ini.core.php#ini.include-path)。我想补充一点，虽然不推荐保留这种全局常量或变量，因为您可能会忘记常量来自哪里，并且不会使您的应用程序对其他开发人员非常可移植和明确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T09:22:25.523

根据您所说的，我认为您会发现[$_SERVER](http://php.net/manual/en/reserved.variables.server.php)中已经有类似的东西可用，特别是“DOCUMENT_ROOT”。

# asp.net - 回发时超出最大请求长度异常

> ID：10751691
> 
> 赞同：9
> 
> 时间：2012-05-25T09:17:46.257
> 
> 标签：asp.net, .net

我在单击按钮时遇到以下异常，对于在页面加载时在 gridview 中绑定 500 多条记录的 asp 页面。

我的页面没有任何上传控件。它包含一个文本框、按钮和gridview。有谁知道为什么会这样。

异常说明：

```
Maximum request length exceeded.
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-25T09:28:17.293

回发发回每个控件的视图状态 - 如果您有一个巨大的数据网格，那么当浏览器将其重新发布到服务器时，这就是您收到异常的原因。

您的两个选择是：

1.  `EnableViewState="false"`如果您不需要视图状态，请在您的 GridView 上设置，这样它就不会那么臃肿并且回发是一个合理的大小，
2.  增加最大请求大小，`web.config`如下所示：

    ```
    <configuration>
        <system.web>
            <httpRuntime maxRequestLength="32768" />
        </system.web>
    </configuration> 
    ```

希望这可以帮助

# ios - 为“停止”Xcode 操作触发 UIApplicationWillTerminateNotification

> ID：10751695
> 
> 赞同：2
> 
> 时间：2012-05-25T09:18:04.053
> 
> 标签：ios, xcode, uiapplicationdelegate

我注意到`UIApplicationWillTerminateNotification`如果我从 Xcode 停止可执行文件，则不会发送。有没有一种干净的方法让它打电话？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-03-17T07:53:44.857

使用下面的代码。它会很好用！

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(applicationWillTerminate:) name:UIApplicationWillTerminateNotification object:nil]; 
```

# ios4 - 如何在ios中删除其他UI组件

> ID：10751697
> 
> 赞同：0
> 
> 时间：2012-05-25T09:18:18.493
> 
> 标签：ios4

在我的应用程序中，我有以下情况

1.  有线程在后台运行，检查某些标志是否打开
2.  该线程正在为整个应用程序运行。
3.  如果发现标志“打开”然后转到某个视图（从导航控制器推送）
4.  所以我需要丢弃或删除所有其他 UI 组件，如 UIAlertView、UIActionSheet 等

在我的情况下，当我推动视图控制器时，动作表打开不会自动丢弃

每当推送视图时，如何删除已启动的所有其他 UI 组件

请写信到这个线程

提前谢谢

德什潘德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T09:43:53.463

-(void)removeSubView:(UIView *view) { NSArray* arr =view.subViews; for(UIView* tmp in arr) {

}

# android - ant 是否可以只运行特定的 android 测试或测试包？

> ID：10751701
> 
> 赞同：0
> 
> 时间：2012-05-25T09:18:36.553
> 
> 标签：android, testing, ant, automated-tests, adb

我总是更喜欢 ant test 命令而不是 am instrument 来在我的构建服务器上运行 android 测试，因为它更简单，而且 am instrument 并不总是有效。

但到目前为止，我不知道是否可以使用 ant 只运行特定的测试类、包或套件，以便更加灵活并区分不同测试类型的运行频率（例如，单元、ui、接受度、性能等）。

如果我的问题的答案是“不”，我还能做什么，当然不使用 am instrument？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T12:00:36.593

您可以为每种类型的测试定义一个单独的 Ant 目标，然后使每个目标以某些属性为条件。

```
<target name="performance" if="test.performance">
</target> 
```

然后，您可以通过在构建时设置所需的属性来执行所需的测试——例如，通过传递 Ant 命令行 ( `-Dkey=value`) 或在您在构建文件中加载的属性文件中进行定义。

# android - 我如何将用户名和密码翻译到android上的浏览器

> ID：10751703
> 
> 赞同：1
> 
> 时间：2012-05-25T09:18:39.360
> 
> 标签：android, browser

现在，我有一个问题，如果你知道，请帮助我，谢谢！

我有一个活动来显示我的用户名和密码，它有一个按钮可以跳转到系统浏览器以显示网页，我如何将我的用户名和密码传输到浏览器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T09:50:43.430

您可能需要按意图传递 uri 左右。

希望以下提供的链接会有所帮助：

[通过 PayPal 的 Intent 和 Posting 数据打开浏览器](https://stackoverflow.com/questions/2154862/opening-the-browser-through-an-intent-and-posting-data-for-paypal)

[如何使用指定的 POST 参数打开 android 浏览器？](https://stackoverflow.com/questions/4119827/how-can-i-open-android-browser-with-specified-post-parameters)

# java - 如何处理并行排序和添加数据的表？

> ID：10751706
> 
> 赞同：5
> 
> 时间：2012-05-25T09:18:45.100
> 
> 标签：java, sorting, jxtable

我面临`JXTable`. `JXTable`如果我在插入新行时对数据进行排序`JXTable`，则最终结果会`JXTable`显示重复的行，这些行会导致表中的结果无效。即使它也显示了已插入的正确行数，但有些行完全丢失，而有些行在`JXTable`.

如果我在所有数据都已成功插入之后进行排序，`JXTable`那么它会显示正确的数据，即没有重复的行，也没有丢失的行。

代码示例：我有一个传递 defaultTableModel 的方法，这里是在表中添加项目

```
public void addingItems(DefaultTableModel  defaultTableModel)
{
for(int i=0;i< numberofItems;i++){
Vector vobject = new Vector();
vobject.add("...");
vobject.add("xxx");
vobject.add("yyy");
...
..
vobject.add("");
defaultTableModel.addRow(vobject);
} 
```

另一方面，我在 tableHeader actionlistener 添加了排序代码

```
tableheader.addMouseListener(new MouseListener() {
 public void mouseClicked(MouseEvent e) {
     Vector data = defaultTableModel.getDataVector();   
     Collections.sort(data, new ColumnSorter(colIndex, ascending));
} 
```

});

我已将代码放入`synchronized`块中，但没有成功。

请提供更好的解决方案来处理此问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T08:41:59.710

> 我已将代码放在同步块中，但没有成功。

因为您不仅必须在排序处理程序块中处理同步，而且还必须在每个修改操作中处理同步。

例如：

```
 ... 
  vobject.add("");
  synchronized(monitor) {
    defaultTableModel.addRow(vobject);
  }
} 
```

和

```
 ...
  Vector data = defaultTableModel.getDataVector();
  synchronized(monitor) {
    Collections.sort(data, new ColumnSorter(colIndex, ascending));
  }
} 
```

在这种情况下，如果您的表中有大量数据，您的 UI 可能看起来有些反应迟钝，因为排序是 N^2*logN。如果您有大约 200 个条目 - 这对您来说不会有问题。

# ios - IOS：带引号的ASIFormDataRequest

> ID：10751710
> 
> 赞同：5
> 
> 时间：2012-05-25T09:19:07.893
> 
> 标签：ios, json, asihttprequest

我必须将 json 发送到仅通过 POST 变量接受它的 Web 服务。

ASIFormDataRequest 坚持转义我的引号。

任何帮助，将不胜感激

```
ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];
NSString *body = [NSString stringWithFormat:@"{\"user\":\"username\",\"pass\":\"password\"}"];
[request setPostValue:body forKey:@"body"];
[request startSynchronous];

output: "{\"user\":\"username\",\"pass\":\"password\"}" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T09:30:45.073

在通过 SBJSON 或您使用的任何 JSON 解析器发送参数之前，请尝试将参数转换为 JSON 表示形式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T15:18:32.587

约瑟夫是对的

```
ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
 [request appendPostData:[dataString dataUsingEncoding:NSUTF8StringEncoding]];
[request setRequestMethod:@"POST"];
[request startSynchronous]; 
```

是要走的路。

# itk - 给定ITK中的一个点，如何获得到边界的径向距离？

> ID：10751713
> 
> 赞同：0
> 
> 时间：2012-05-25T09:19:18.657
> 
> 标签：itk

我正在加载一个 3D CT 模型并对其进行细化算法。现在我想计算一下算法做了多少细化。我如何知道骨架点与其最近/最远边界点之间的距离？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T11:54:01.987

计算骨架点和边界点的[距离变换](http://en.wikipedia.org/wiki/Distance_transform)（存储为二进制掩码）。你的答案就在那里。

# sql - 更新所选数据的x列数据后的oracle插入

> ID：10751716
> 
> 赞同：-2
> 
> 时间：2012-05-25T09:19:21.607
> 
> 标签：sql, oracle

我需要在我的项目中实现一个功能：我必须从具有列的表中

选择**`10`行**`5`，然后在更新检索到的数据的 2 列（来自选择查询）后将数据插入同一个表中......查询将用于实现相同的功能。

示例：（10行）column1中的数据是'zz'，'zz'，'zz'，'zz'，'zz'，'zz'，'zz'，'zz'，'zz'，'zz'。
column2 中的数据是 'ClassA','ClassB','ClassC','ClassD','ClassE','ClassA','ClassB','ClassC','ClassD','ClassE'

INSERT INTO tableT (SELECT * FROM tableT (update column1='yy',column2=append '_tt' on the existing data in the rows column))

触发查询后，我们有**20 条记录**，10 条旧的和 10 条新的。
**10 条新记录数据**将在 column1 为
column2 中的 'yy','yy','yy','yy','yy','yy','yy','yy','yy','yy' 数据是'ClassA_tt','ClassB_tt','ClassC_tt','ClassD_tt','ClassE_tt','ClassA_tt','ClassB_tt','ClassC_tt','ClassD_tt','ClassE_tt'

其余3列数据相同

请指导我构建查询

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T10:02:15.140

这取决于查询的大小以及更新数据的方式。但是对于您的示例，您可以使用

```
insert into table (column1,column2)
select decode(column2,'1','yy','2','zz',null) col1, col2 from table; 
```

**编辑：**

在你改变你的问题后，我根本不明白你想要做什么。请解释一下：

> column2 中的数据是 abc、bcd、dce、xyz 等

因为我没有得到模式。

**编辑2：**

好的。开始了：

```
INSERT INTO <table_name> (col1,col2,col3,col4,col5)
SELECT col1,col2,col3,col4,col5 
FROM (
    select  'yy' as col1 , (col2 || '_tt') as col2,col3,col4,col5, rownum r_num 
    from <table_name>
) where r_num <= 10; 
```

你没有指定你想要哪 10 行。这将选择并更改内部选择查询返回的前 10 行。

# android - Facebook 登录对话框在加载后很快消失，没有登录屏幕或 Android 应用程序中的任何响应

> ID：10751717
> 
> 赞同：0
> 
> 时间：2012-05-25T09:19:23.430
> 
> 标签：android, facebook, login, sdk, fbconnect

Facebook sdk 已集成到我们的 android 应用程序中，并且直到上周 fb 登录都可以正常工作。然而，从 5 月 22 日开始，在一些运行 2.2 android OS 的设备（如 LG-P500、huawei-u8800）中 - 当单击 fbconnect 登录按钮时，登录对话框会在短时间内打开和关闭，而无需等待用户输入。但是，相同的代码在 Samsung-S5570 等设备中也能正常工作。因此，我们甚至无法使用该应用程序。

当我调试应用程序时，facebook 错误消息显示为“与服务器的连接不成功。”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T11:11:51.787

更改您的 Main Java File 代码并写下以下代码：-

```
public void loginAndPostToWall() {
    facebook.authorize(this, PERMISSIONS, Facebook.FORCE_DIALOG_AUTH,
            new LoginDialogListener());
} 
```

# video-streaming - 使用 vlcj 通过 http 进行实时视频流传输

> ID：10751718
> 
> 赞同：4
> 
> 时间：2012-05-25T09:19:26.367
> 
> 标签：video-streaming, live-streaming, vlcj

我正在开发一个视频聊天应用程序。我用于`vlcj`实时视频流，但未能从其他系统捕获视频。

```
public static void main(String[] args) throws Exception 
{
     NativeLibrary.addSearchPath("libvlc", "C:\\Program Files\\VideoLAN\\VLC");

     String media = "dshow://"; 
     String[] options = {" :dshow-vdev=CyberLink Webcam Splitter :dshow-adev=Microphone (Realtek High Defini  :live-caching=300", ":sout = #transcode{vcodec=h264,vb=800,fps=15,scale=1,width=1280,height=800,acodec=mp4a,ab=128,channels=2,samplerate=44100}:http{dst=:8080/a.ogg} :sout-keep"};

     System.out.println("Streaming '" + media + "' to '" + options + "'"); 

     MediaPlayerFactory mediaPlayerFactory = new MediaPlayerFactory(options); 
     HeadlessMediaPlayer mediaPlayer = mediaPlayerFactory.newMediaPlayer(); 
     mediaPlayer.playMedia(media, options);
     new PlayStream().play();

     // Don't exit
     Thread.currentThread().join();
} 
```

这是我的代码，请帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T04:12:16.697

更改了流式传输字符串，我工作正常

```
mediaPlayer.playMedia("dshow://", ":sout=#transcode{vcodec=h264,vb=800,fps=15,scale=1,width=1280,height=800,acod‌​ec=mp4a,ab=128,channels=2,samplerate=44100}:rtp{sdp=rtsp://@:5555/demo}", ":no-sout-rtp-sap", ":no-sout-standard-sap", ":sout-all", ":sout-keep"); 
```

# sql - 选择行单元格作为新列

> ID：10751721
> 
> 赞同：1
> 
> 时间：2012-05-25T09:19:42.760
> 
> 标签：sql, postgresql, plpgsql, dynamic-sql, crosstab

基本上，我有一个存储列名的表，但有一些限制：`infos`，以及另一个存储这些列的值的表：`info_data`。我想得到一个表，其中包含来自的列和来自的`infos`数据`info_data`。我已经尝试过使用交叉表功能，但它没有达到预期的效果。

我有 2 张桌子：

```
CREATE TABLE infos
(id serial PRIMARY KEY,
 name text NOT NULL,
 id_member integer NOT NULL,
 title text,
 min_length integer NOT NULL DEFAULT 0,
 max_length integer NOT NULL DEFAULT 30,
 required boolean NOT NULL DEFAULT false,
 type text NOT NULL DEFAULT 'text'::text
);

CREATE INDEX info_id_idx ON infos (id); 
```

和

```
CREATE TABLE info_data
(id serial PRIMARY KEY,
 id_info integer,
 value text,
  CONSTRAINT info_data_id_info_fkey FOREIGN KEY (id_info)
      REFERENCES infos (id) MATCH SIMPLE
      ON UPDATE NO ACTION ON DELETE NO ACTION
);

CREATE INDEX info_data_id_idx ON info_data(id); 
```

具有以下值：

信息：

```
COPY infos (id, name, id_member, title, min_length, max_length, required, type)     FROM     stdin;
1 nume 1 Nume 0 30 t text
2 prenume 1 Prenume 0 30 t text
3 cnp 1 C.N.P. 13 13 t number
4 nume anterior 1 Nume anterior 0 30 f text
5 stare civila 1 Starea civila 0 30 f text
6 cetatenie 1 Cetatenie 0 30 f text
7 rezidenta 1 Rezidenta 0 30 f text
9 tip act 1 C.I. / B.I. 0 10 t text
10 serie ci 1 Serie C.I. / B.I. 0 30 t text
11 numar ci 1 Numar C.I. / B.I. 0 30 t text
12 data eliberarii 1 Data eliberarii 0 30 t text
13 eliberat de 1 Eliberat de 0 30 t text
8 adresa 1 Adresa 0 50 f text
\. 
```

信息数据：

```
COPY info_data (id, id_info, value) FROM stdin;
1 1 a
2 2 a
3 3 100
4 4
5 5
6 6
7 7
8 8
9 9 ci
10 10 sv
11 11 13
12 12 132
13 13 123
14 1 b
15 2 b
16 3 100
17 4
18 5
19 6
20 7
21 8
22 9 BI
23 10 XT
24 11 123
25 12 10
26 13 10
\. 
```

问题：我怎样才能实现这个输出？（必须根据表中的唯一条目生成`infos`列

```
nume, prenume, cnp, nume anterior, ... (as columns - built from infos)
a   , a, ...
b   , b, ... (as rows - built from info_data) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T21:29:22.030

这个问题比你想象*的要难解决。*您的尝试`crosstab()`瞄准了正确的方向。但是要分配动态列名，您还需要动态 SQL：[`EXECUTE`在 plpgsql 函数中。](http://www.postgresql.org/docs/current/interactive/plpgsql-statements.html#PLPGSQL-STATEMENTS-EXECUTING-DYN)

将列的数据类型`infos.type`从更改`text`为[`regtype`](http://www.postgresql.org/docs/current/interactive/datatype-oid.html)以防止 SQL 注入和其他错误。例如，您有 data type `number`，它不是有效的 PostgreSQL 数据类型。我用 替换了它[`numeric`](http://www.postgresql.org/docs/current/interactive/datatype-numeric.html)，所以它可以工作。

您*可以*通过避免需要双引号的列名来简化任务。喜欢`nume_anterior`而不是`"nume anterior"`.

您可能希望在表中添加一列`row_id`以`info_data`标记一行的所有元素。该函数需要它`crosstab()`，它允许您忽略具有`NULL`值的列。有两个参数的`crosstab()`函数可以处理缺失的列。我用下面的表达式综合了缺失的列`(d.id-1)/13`- 这适用于您示例中的数据。

您需要安装[附加模块 tablefunc](http://www.postgresql.org/docs/current/interactive/tablefunc.html)（每个数据库一次）：

```
CREATE EXTENSION tablefunc; 
```

[**在此相关答案中**](https://stackoverflow.com/a/10110519/939860)查找其他解释和链接。

此功能将执行所需的操作：

```
CREATE OR REPLACE FUNCTION f_mytbl()
  RETURNS TABLE (id int
, nume text           , prenume text       , cnp numeric
, "nume anterior" text, "stare civila" text, cetatenie text
, rezidenta text      , adresa text        , "tip act" text
, "serie ci" text     , "numar ci" text    , "data eliberarii" text
, "eliberat de" text)
  LANGUAGE plpgsql AS
$BODY$
BEGIN

RETURN QUERY EXECUTE $f$
SELECT *
FROM   crosstab(
    'SELECT (d.id-1)/13 -- AS row_id
          , i.id, d.value
     FROM   infos i
     JOIN   info_data d ON d.id_info = i.id
     ORDER  BY 1, i.id',

    'SELECT id
     FROM   infos
     ORDER  BY id'
    )
AS tbl ($f$ || 'id int,
, nume text           , prenume text       , cnp numeric
, "nume anterior" text, "stare civila" text, cetatenie text
, rezidenta text      , adresa text        , "tip act" text
, "serie ci" text     , "numar ci" text    , "data eliberarii" text
, "eliberat de" text)';

END;
$BODY$; 
```

称呼：

```
SELECT * FROM x.mytbl(); 
```

不要对嵌套的[美元报价](http://www.postgresql.org/docs/current/interactive/sql-syntax-lexical.html#SQL-SYNTAX-DOLLAR-QUOTING)感到困惑。

顺便说一句：我用这个语句创建了列列表：

```
SELECT 'id int,' || string_agg(quote_ident(name) || ' ' || type
                              ,', ' ORDER BY i.id) 
FROM   infos i; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T06:51:05.910

这就是为什么 EAV 对大多数事情都很糟糕的原因。如果您想检索列中的内容，您可能不想使用 EAV。我提出了我自己的 EAV-lite，它使用应用程序数据目录和 ALTER TABLE 命令根据自定义字段的类似内容创建实际的关系模型。然而，这并不是真的在这里或那里。

基本上你有两个选择。您不能“只使用存储过程”，因为您必须提前告诉 PostgreSQL 使用什么结果名称和类型。您可以使用返回引用和动态 SQL 的存储过程。这就是满足您严格要求的答案。

这看起来像

```
CREATE OR REPLACE FUNCTION eav_get(in_id int) RETURNS refcursor
LANGUAGE PLPGSQL AS 
 $$ DECLARE outval refcursor;
            t_row RECORD;
            t_query TEXT;
  BEGIN
      t_query := 'SELECT ';

      FOR t_row IN select distinct "name" FROM infos
      LOOP
         t_query := t_query 'max(CASE WHEN "name" = '|| quote_literal(t_row."name") || ' THEN value ELSE NULL END) ';
      END LOOP;
      t_query := t_query || 'FROM info_data WHERE id_key = || in_id || ' 
                 GROUP BY id_key ';
      OPEN outval FOR EXECUTE t_query;
      RETURN outval;
 END; $$; 
```

我还没有测试过上面的代码，但它应该足够接近让你继续前进。

但是，您应该考虑另一种选择。这不会在列中返回，但它更干净并且在客户端解析起来也不太难。我们在实际需要 EAV 的 LedgerSMB 中使用它。

```
 SELECT id_key, array_agg("name"::text || '=' || "value"::text) 
   FROM infos_data 
  WHERE id_key = ? 
```

假设您不允许等号（您可以使用任何其他分隔符），您会得到一个 PostgreSQL 数组，该数组很容易为您的应用程序解析。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T14:21:41.477

如果您必须对 EAV 内容进行非规范化并且没有可用的类似枢轴的功能，那么这个丑陋的野兽会派上用场。

我必须在 info_data 中为*实体*添加一个键域。

```
ALTER TABLE info_data
        ADD column id_key INTEGER
        ;
UPDATE info_data
SET id_key= 1+ ((id-1)/13);

WITH reut AS (
   SELECT d.id_info
        , d.value
        , d.id_key
        , i.zname AS zname
   FROM info_data d
   JOIN infos i ON i.id = d.id_info
        )
, num AS (
        SELECT DISTINCT id_key AS id_key
        FROM info_data
        )
SELECT n.id_key AS id_key
        ,r1.value AS "nume"
        ,r2.value AS "prenume"
        ,r3.value AS "cnp"
        ,r4.value AS "nume anterior"
        ,r5.value AS "stare civila"
        ,r6.value AS "cetatenie"
        ,r7.value AS "rezidenta"
        ,r8.value AS "adresa"
        ,r9.value AS "tip act"
        ,r10.value AS "serie ci"
        ,r11.value AS "numar ci"
        ,r12.value AS "data eliberarii"
        ,r13.value AS "eliberat de"
FROM num n
LEFT JOIN reut r1 ON r1.id_key = n.id_key AND r1.zname = 'nume'
LEFT JOIN reut r2 ON r2.id_key = n.id_key AND r2.zname = 'prenume'
LEFT JOIN reut r3 ON r3.id_key = n.id_key AND r3.zname = 'cnp'
LEFT JOIN reut r4 ON r4.id_key = n.id_key AND r4.zname = 'nume anterior'
LEFT JOIN reut r5 ON r5.id_key = n.id_key AND r5.zname = 'stare civila'
LEFT JOIN reut r6 ON r6.id_key = n.id_key AND r6.zname = 'cetatenie'
LEFT JOIN reut r7 ON r7.id_key = n.id_key AND r7.zname = 'rezidenta'
LEFT JOIN reut r8 ON r8.id_key = n.id_key AND r8.zname = 'adresa'
LEFT JOIN reut r9 ON r9.id_key = n.id_key AND r9.zname = 'tip act'
LEFT JOIN reut r10 ON r10.id_key = n.id_key AND r10.zname = 'serie ci'
LEFT JOIN reut r11 ON r11.id_key = n.id_key AND r11.zname = 'numar ci'
LEFT JOIN reut r12 ON r12.id_key = n.id_key AND r12.zname = 'data eliberarii'
LEFT JOIN reut r13 ON r13.id_key = n.id_key AND r13.zname = 'eliberat de'

ORDER BY n.id_key; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T10:47:44.853

我想你可以做这样的事情

```
SELECT 
    C1.VALUE AS (SELECT NAME FROM INFOS WHERE ID=1),  
    C2.VALUE AS (SELECT NAME FROM INFOS WHERE ID=2),  
    C3.VALUE AS (SELECT NAME FROM INFOS WHERE ID=3),  
    C4.VALUE AS (SELECT NAME FROM INFOS WHERE ID=4),  
    C5.VALUE AS (SELECT NAME FROM INFOS WHERE ID=5),  
    C6.VALUE AS (SELECT NAME FROM INFOS WHERE ID=6),  
    C7.VALUE AS (SELECT NAME FROM INFOS WHERE ID=7),  
    C8.VALUE AS (SELECT NAME FROM INFOS WHERE ID=8),  
    C9.VALUE AS (SELECT NAME FROM INFOS WHERE ID=9),  
    C10.VALUE AS (SELECT NAME FROM INFOS WHERE ID=10),  
    C11.VALUE AS (SELECT NAME FROM INFOS WHERE ID=11),  
    C12.VALUE AS (SELECT NAME FROM INFOS WHERE ID=12),  
    C13.VALUE AS (SELECT NAME FROM INFOS WHERE ID=13)  
    FROM (
    (SELECT VALUE FROM INFO_DATA WHERE ID_INFO=1) C1,
    (SELECT VALUE FROM INFO_DATA WHERE ID_INFO=2) C2,
    (SELECT VALUE FROM INFO_DATA WHERE ID_INFO=3) C3,
    (SELECT VALUE FROM INFO_DATA WHERE ID_INFO=4) C4,
    (SELECT VALUE FROM INFO_DATA WHERE ID_INFO=5) C5,
    (SELECT VALUE FROM INFO_DATA WHERE ID_INFO=6) C6,
    (SELECT VALUE FROM INFO_DATA WHERE ID_INFO=7) C7,
    (SELECT VALUE FROM INFO_DATA WHERE ID_INFO=8) C8,
    (SELECT VALUE FROM INFO_DATA WHERE ID_INFO=9) C9,
    (SELECT VALUE FROM INFO_DATA WHERE ID_INFO=10) C10,
    (SELECT VALUE FROM INFO_DATA WHERE ID_INFO=11) C11,
    (SELECT VALUE FROM INFO_DATA WHERE ID_INFO=12) C12,
    (SELECT VALUE FROM INFO_DATA WHERE ID_INFO=13) C13) 
```

仅当 Infos 表中的行数为 13 时。

**编辑**

由于列名是动态的，您需要使用存储过程代替直接查询。在这种情况下，您必须使用动态查询。告诉我你是否可以使用存储过程。我可以说出确切的查询。

# javascript - 过滤掉 Javascript 注入

> ID：10751722
> 
> 赞同：1
> 
> 时间：2012-05-25T09:19:43.213
> 
> 标签：javascript, security, javascript-injection, html-injections

我有一个文本区域，我在其中放置了不允许`<script>`标记和 Javascript 标记的验证代码，但用户可以输入诸如`<strong onmouseover=alert(2)>`.

因此，当有人将鼠标悬停在此字符串标记上时，JS 警报框就会出现。

我怎样才能停止这种 javascript 注入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T09:23:13.210

您需要正确清理您允许的 HTML。正如您所发现的，这并非微不足道。（您可能需要禁止`iframe`和其他几个元素。）

适当的清理需要一个元素的白名单，并且在这些白名单中每个元素都允许使用白名单。显然，各种`onXyz`属性不会在白名单上。

清理**必须**发生在服务器端，因为可以绕过任何客户端。因此，如果不知道您使用的是哪种服务器技术，就无法推荐某些东西。例如，[JSoup](http://jsoup.org/)是 Java 的一个众所周知的方法，但当然，如果您不使用 Java，它对您没有用处。:-) 对于 .Net，有[HTML Agility Pack](http://www.codeplex.com/htmlagilitypack)或[Microsoft Anti-XSS 库](http://msdn.microsoft.com/en-us/security/aa973814)，但这是一个**非常**不完整的列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T09:22:58.030

有很多工具称为 html 净化器。例如，你可以试试[这个](http://htmlpurifier.org/demo.php)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T09:22:58.217

简单的答案是`replace(/</g,'&lt;');`，但这当然会阻止使用***任何***HTML。这就是存在 BBCode、Markdown 和其他此类语言的原因：提供格式化功能而不授予用户发布任意代码的权限。

或者，只需搜索模式的东西`/\bon[a-z]+=/i`

# c++ - Visual Studio 可以告诉我哪个断言失败了吗？

> ID：10751726
> 
> 赞同：2
> 
> 时间：2012-05-25T09:20:09.577
> 
> 标签：c++, visual-studio-2010

我通常使用 Qt Creator 来满足我的 C++ 需求。当我的程序中的一个断言失败时，它可以告诉我哪个断言失败了。在 Visual Studio 中，我只看到这个：

![断言失败](../Images/461aa2ec49dbdf00e9f9e7401bc88757.png)

我可以单击 Retry 跳转到应用程序，但它没有告诉我哪个断言失败。即使是简单的`assert(false)`Visual Studio 也会尝试向我展示*msvcr100d.dll*的源代码，但该源代码不可用。

如何找出我的程序中的哪个断言失败了？我真的不想使用断点和`std::cout`s 的组合来进行繁琐的手动搜索，以寻找可以自动追踪的东西。

**编辑**：Visual Studio 实际上确实`.PDB`为我生成了一个文件，但它仍然无法正常工作。尽管调试器不会突出显示断言失败的行，但我确实看到*Assertion failed: false, file main.cpp, line 8*在命令行上。为什么它不能只显示行并让我检查变量？我的意思是，所有信息似乎都可用...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T09:26:04.227

您所要做的就是单击“重试”以使用调试器进入应用程序的源代码。这将突出显示包含失败断言的行，因此很容易看到罪魁祸首，除非您喜欢将多个嵌套断言塞进一行。如果你这样做了，那么你应该承受这可能给你带来的所有痛苦。

它现在对您不起作用的原因很可能是因为您的应用程序当前构建中没有可用的调试符号。当您使用与 Visual Studio 捆绑的编译器构建应用程序时，根据您的项目设置，它将生成一个`.PDB`包含调试符号的文件。这些是在调试时获取有用信息所必需的，例如哪条线路产生了最后一次故障。

确保在编译应用程序时将其设置为生成调试符号。您应该在 /bin 目录中看到一个`.PDB`文件。[正如这里所讨论](https://stackoverflow.com/questions/5457095/release-generating-pdb-files-why/5457250#5457250)的，调试符号的生成与是否启用优化（通常称为“发布”的配置）是正交的。

**更新：**我刚刚意识到您可能正在 Qt Creator 中编译/构建应用程序，然后尝试从 Visual Studio 调试二进制文件。这不会很好地工作——如果你不使用 VS 的工具进行编译，它就不会生成 VS 调试器可以读取的调试符号。

我假设问题反过来也是一样的：如果您使用 Visual Studio 构建，然后尝试使用 Qt Creator 进行调试，它可能也无法解释调试符号。

因此，我建议坚持使用单一工具集进行构建。您使用哪个 IDE 无关紧要，但您需要使用相同的工具进行编译/构建。您可以将 Qt Creator 或 Visual Studio 配置为使用与另一个捆绑在一起的编译器和链接器。通常，Qt Creator 带有 GCC 的 Win32 端口，但使用 Microsoft 的工具集构建它是微不足道的，这将允许您使用 VS 来调试您的代码。

# java - 如何在 Spock 中模拟 HttpServletRequest

> ID：10751728
> 
> 赞同：5
> 
> 时间：2012-05-25T09:20:15.240
> 
> 标签：java, servlets, groovy, mocking, spock

我们有一个 ServletFilter，我们想用 Spock 进行单元测试并检查对 HttpServletRequest 的调用。

以下代码抛出 `java.lang.ClassFormatError: Absent Code attribute in method that is not native or abstract in class file javax/servlet/http/Cookie`

```
def "some meaningless test"(){
    given:
    HttpServletRequest  servletRequest = Mock(HttpServletRequest)

    when:
    1+1

    then:
    true
} 
```

JavaEE 5 API（以及因此的 Servlet API）位于类路径中。Spock 版本是 0.6-groovy-1.8。

我们将如何正确地做到这一点？它可以与 Mockito 一起使用，但我们会失去 Spock 嘲笑的魅力。

编辑：我们知道 Grails 和 Spring 内置的 Servlet 模拟功能，我们只想知道是否有办法使用 Spock 模拟。否则，您将混合使用模拟设置技术...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T10:36:40.540

Grails 自动为每个集成测试配置一个`MockHttpServletRequest`, `MockHttpServletResponse`, 并且`MockHttpSession`您可以在测试中使用它。

在单元测试中，您需要导入并实例化一个新的[MockHttpServletRequest](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/mock/web/MockHttpServletRequest.html)。

```
import org.springframework.mock.web.MockHttpServletRequest

def "some meaningless test"(){
    given:
    def servletRequest = new MockHttpServletRequest()

    when:
    1+1

    then:
    true
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T06:15:55.087

Spock uses JDK dynamic proxies for mocking interfaces, and CGLIB for mocking classes. Mockito uses CGLIB for both. This seems to make a difference in some situations where mocked interfaces (like `javax.servlet.http.HttpServletRequest`) reference classes (like `javax.servlet.http.Cookie`). Apparently, in Spock's case the `Cookie` class gets loaded, which results in a class loading error because the classes in the servlet API Jar have no method bodies (rather than empty method bodies).

Currently, Spock doesn't provide a way to force the usage of CGLIB for interfaces. This means you can either put the servlet implementation Jar, rather than the API Jar, on the test class path (which is probably the safer bet anyway), or use Mockito.

# javascript - 为什么浏览器会替换通过 css 分配的宽度值？

> ID：10751729
> 
> 赞同：5
> 
> 时间：2012-05-25T09:20:15.947
> 
> 标签：javascript, css, browser, styles, width

当我为所有选择分配基本样式时，例如。

```
width: 300px;
padding: 0;
margin: 0;
border-width: 1px; 
```

在不同情况下通过 javascript 检索宽度时，我得到了意想不到的结果。

*   When the **select is visible** the with is **298px** .
*   When the **select is display:none** , the width is also **298px** (ff, jquery)
*   When the **select is in a div with display:none** , the width is correct **300px** .

（结果也是一样的赋值：box-sizing:border-box）

好吧，检索到的宽度有时与使用的浏览器和 javascript 框架不同，但总而言之，我只想能够检索分配的宽度（300px）。（我想这与这里所说的“正式的怪异”有关：http: [//meyerweb.com/eric/thoughts/2007/05/15/formal-weirdness/](http://meyerweb.com/eric/thoughts/2007/05/15/formal-weirdness/)，但为什么浏览器不使用用户指定的宽度？？）

如何检索分配的宽度？真的有办法吗？

例子：

[http://jsfiddle.net/ETCcH/5/](http://jsfiddle.net/ETCcH/5/)（用于使用 jquery，或将 5 替换为 4，例如使用 mootools）

（使用不同的浏览器查看并尝试）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T09:40:02.170

你永远不会得到写在 css 文件中的值。使用 JavaScript，您将只能获得 Web 浏览器当前应用于该元素的 css 属性。

在您的情况下，如果宽度确实是固定的，您可以“强制”它，将 max-width 设置为 300px 或添加`overflow: hidden`- 如果这是一个选项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T10:01:51.260

实际上是边界给你带来了麻烦。将边框宽度设置为 0，您将能够看到每个人的 300 像素。实际上，浏览器将元素的宽度设置为您期望的 300 像素，并在周围添加边框。对于可见元素，您可以使用 offsetWidth 获取元素的整个宽度（如果您将显示设置为无，它将设置为 0。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T09:45:43.840

对于选择元素，默认情况下，您的浏览器框大小似乎是边框框。尝试放置 box-sizing: content-box; 在 select 和 jquery 上给你正确的结果。

Jquery 使用 'width' 方法为您获取内容宽度，以便去除边距、填充和边框。使用 box-sizing:border-box，给定的宽度会考虑填充和边框。

厄诺里尔

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T10:13:40.123

没有简单的方法可以访问 CSS 中的指定值。

当您`.css()`在 jQuery 中使用时，您将获得*[计算值](http://www.w3.org/TR/CSS21/cascade.html#computed-value)*。您所追求的称为*[指定值](http://www.w3.org/TR/CSS21/cascade.html#specified-value)*。

*当计算*指定值时，它将根据情况进行调整（在您的小提琴中，边框）。这就是宽度不同的原因。不过，我不知道为什么隐藏在父 div 中的选择不适应边框。

**解决方案 1**：也许比获取元素的指定值更好的方法是查找其父元素的宽度？了解永远不要在特定元素上设置宽度（而是在其父元素上设置宽度，例如在使用网格系统或类似系统时）是一种很好的做法，这可能是您的方法。在父母身上使用宽度有效地限制了其孩子的最大宽度。

**解决方案 2**：现在，如果您确实需要指定的值，我想您可以遍历`document.styleSheets`每个样式表，访问该`cssRules`属性并按照自己的方式进行操作，直到找到您正在寻找的值。当我在 Chrome 中尝试此操作时，`cssRules`它似乎是空的，但 Firefox 会填充它并乖乖地列出附加到页面的每个样式表中的所有样式。

我不推荐它，但如果你决定去那个洞，你可能会对这些 SO 问题中的任何一个感兴趣：

*   [将计算的 CSS 样式映射到指定的样式？](https://stackoverflow.com/questions/1013478/mapping-computed-css-styles-to-specified-ones)
*   [使用 Javascript 列出已知的 CSS 类](https://stackoverflow.com/questions/4651834/listing-known-css-classes-using-javascript)

我不建议更改`box-sizing`其中之一，因为这将为您提供您正在寻找的值，但元素的实际宽度会更宽（基本宽度 300 像素 + 边框 = 302 像素宽）。

如果这些都不是你的船，也许是时候坐下来思考（并解释！）你想做什么以及为什么。每当我发现自己想要为简单的任务做非标准的事情时，这并不罕见，因为我的解决方案可能不是最佳的，在继续之前我需要缩小一点。

# ios - Xcode 4.3.2 的内存泄漏工具意外退出

> ID：10751731
> 
> 赞同：1
> 
> 时间：2012-05-25T09:20:24.123
> 
> 标签：ios, xcode, memory, instruments, memory-leaks

当我通过 Xcode 设备调试器调试我的应用程序时，我收到了“收到内存警告”。我的应用程序似乎没有消耗那么多内存，所以我想第一次看一下 Instruments 工具。

我的项目在我的 iphone 设备上。（在我调试时由 xcode 生成）我目前使用的是 Xcode 4.3.2。

BaseSDK：5.0.1（最新）

目标部署：5.0

设备软件：5.0.1 (9A405)

我遵循的步骤（不知道我是否做得对）

我打开仪器工具，为 iOS 选择内存泄漏方案，选择目标（我的设备），再次选择目标和我的应用程序（由上次构建的 xcode 创建）。当我按下记录按钮时，应用程序启动没有问题，但是当应用程序启动时，仪器工具退出。（我设备上的应用程序继续运行）。

我觉得我没有正确地做某事。还有一个问题。我的 baseSDK 是 5.1，但我的目标是 5.0.1 设备。这也是一个问题吗？

***分析在 iOS Simulator 5.1 上效果很好，但在我的 iPhone 上却不行。***

***编辑：*** 我也尝试过配置文件启动，都设置为调试和发布。两者都破坏了仪器工具。

# wordpress - 将 localhost wordpress 导出到实时服务器

> ID：10751733
> 
> 赞同：-2
> 
> 时间：2012-05-25T09:20:35.787
> 
> 标签：wordpress

如何将 localhost wordpress 导出到实时服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T12:32:18.917

阅读文档：[移动 WordPress « WordPress Codex](http://codex.wordpress.org/Moving_WordPress)以及[如何将 WordPress 移动到新域或位置 » 我的数字生活](http://www.mydigitallife.info/2007/10/01/how-to-move-wordpress-blog-to-new-domain-or-location/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T15:23:10.543

1) 登录到本地 Wordpress > 仪表板 > 工具 > 导出 > 所有帖子和内容（包括附件）

2) 登录 Live Wordpress > Dashboard > Tools > Import > Wordpress > Install & Activate Wordpress Importer plugin > Select File > Finish

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T10:44:18.430

从 localhost 上传到服务器的步骤-

1.  创建 wrpdress 文件夹的备份并创建该文件夹的一个 zip 文件。
2.  进行数据库备份。
3.  将其上传到实时服务器，我假设您通过`cpanel`.
4.  在文件管理器下上传您的 zip 文件。
5.  通过 Mysql 向导上传数据库。
6.  通过在数据库中搜索“localhost”关键字，将 url 从 localhost 更改为您的 URL。

如果您遇到任何问题，请告诉我。

# python - tkInter 列表框上的隐藏 id

> ID：10751735
> 
> 赞同：3
> 
> 时间：2012-05-25T09:20:41.667
> 
> 标签：python, listbox, tkinter

我想知道是否有可能以某种方式将隐藏的 id 与列表框中的每个条目一起存储。这样做的原因是我有一个表，其中包含一个来自数据库的唯一 ID（用户不可见，但用于唯一标识每条记录）我将表缓存在内存中并使用键控字典身份证

我想创建一个允许我选择其中一条记录的列表框 - 显示的文本不是唯一的 id，而是一个描述性字段（例如“名称”），它可能是唯一的，但这不是强制的，并且有没有索引。例如，如果我有：

```
Id  Name
--  ----
 2  Rod
 5  Jane
15  Freddy 
```

然后选择`Jane`，我将能够以某种方式轻松访问 id`5`

我的问题是我找不到将唯一 id ( `5`) 与选择 ( `Jane`) 相关联的方法，以便我可以轻松识别缓存的记录。我知道我可以使用控制变量，但这只是给了我列表中所有字符串的列表——不是我想要的。此外，索引（例如在插入时）似乎对此不可靠。

我设法做到这一点的唯一方法是让另一个字典将名称映射到 id。由于多种原因，这是次优的。

我在这里错过了什么吗？有没有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T09:37:31.410

将您的 id 保存在列表中，然后使用`.curselection()`索引将它们映射回行 id，只要您保持顺序相同。

在您的示例中，`Jane`是列表中的第二个选择，因此如果选择`.curselection()`返回`1`. 如果您有一个`rowids`相同顺序的列表，`rowids[1]`将是`5`：

```
>>> rowids = [2, 5, 15]
>>> rowids[listbox.curselection()]
5 
```

比将名称映射到字典中的 rowid 稍微高效一些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T10:49:06.477

如果您使用[ttk.Treeview](http://www.tkdocs.com/tutorial/tree.html)小部件而不是 Listbox，则可以将 id 存储在不可见的列中。

# c# - 如何将全局异常处理程序添加到 Metro 风格应用程序？

> ID：10751745
> 
> 赞同：7
> 
> 时间：2012-05-25T09:21:24.070
> 
> 标签：c#, xaml, windows-8, windows-runtime

是否有任何特定方法可以将全局异常处理程序添加到 Metro 风格应用程序，就像 App.Xaml.cs 文件中的 WP7 中的 LittleWatson 一样？处理此问题的最佳实践和模式是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T18:42:31.543

[UnhandledException 事件页面](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.application.unhandledexception.aspx)解释了为什么您的异常没有被它处理（强调我的）：

> 此事件**仅用于 XAML 框架遇到的异常**。未连接到 XAML 框架的其他 Windows 运行时组件或应用程序部分遇到的异常不会导致引发此事件。

它继续解释说您应该在最具体的时间捕获异常。据我所知，Windows 8 风格的应用程序中不存在全局事件处理程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T17:28:33.643

在[Application 类](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.application.aspx)上使用[UnhandledException 事件](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.application.unhandledexception.aspx)。

# sql - 将结果存储在 plpgsql 中的变量中

> ID：10751748
> 
> 赞同：0
> 
> 时间：2012-05-25T09:21:33.100
> 
> 标签：sql, postgresql, plpgsql

对于我的家庭作业，我有以下任务：我有一个简单的数据库，就像 facebook 与朋友和他们的关系。现在我要统计直系好友的数量和直系好友的好友数量。

**所以我的方法是**：选择所有直接朋友并将他们的 id 存储在一个变量中。然后我遍历这些 id 并将当前用户的所有直接朋友存储在另一个变量中。（对于每个相同）。最后，我得到了一个包含所有相关用户 ID 的大数组。然后我只需要选择不同的 id 并计算它们。

我的问题是：如何将 id 存储在变量（数组？）中，以便我可以轻松地循环它们并最终对 id 进行不同的选择？

希望你能给我一个提示...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T18:43:06.633

如果分配不需要使用 plpgsql，则可以使用普通**SQL**更轻松地解决。

鉴于此表（您应该提供）：

```
CREATE TEMP TABLE f (
   friend_of int
  ,friend_with int
  ,PRIMARY KEY (friend_of, friend_with)
); 
```

用户 1 有多少朋友？

```
SELECT count(*) As friends
FROM   f
WHERE  friend_of = 1; 
```

用户 1 的好友有多少个唯一好友（不包括用户 1 本人）？

```
SELECT count(DISTINCT f2.friend_with) - 1 AS friends_friends -- minus himself
FROM   f f1
JOIN   f f2 ON f2.friend_of = f1.friend_with
WHERE  f1.friend_of = 1; 
```

没有`DISTINCT`共同的朋友会被计算多次。
[sqlfiddle 上的演示。](http://sqlfiddle.com/#!1/8272c/2)

# facebook - 从 facebook 导出图片分享列表

> ID：10751750
> 
> 赞同：2
> 
> 时间：2012-05-25T09:21:46.193
> 
> 标签：facebook, facebook-graph-api, export, facebook-page

我在 facebook 上开始了一个游戏。在我的页面墙上张贴一张图片，分享这张图片的人将赢得我的产品。

这个游戏非常有名，超过1500人分享了这张照片。

如何导出共享图片的列表显示？

最好的问候， 加博尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T12:52:25.667

当您通过 Graph API 访问对象时（例如`http://graph.facebook.com/{object_id)`，Facebook 仅向您提供有关`Likes`和的信息`Comments`。它不显示有关共享的信息，因此您所要求的内容是不可能的。

您可以尝试`http://graph.facebook.com/{object_id)/shares`，但它不起作用，不像`http://graph.facebook.com/{object_id)/likes`或`http://graph.facebook.com/{object_id)/comments`

此外，使用原生 Facebook 功能“赠送”某些东西是违反 Facebook 平台政策的。这意味着，不允许为喜欢、评论或分享而赠送一些东西。

> 您不得激励用户使用 Facebook 社交渠道（或限制使用内容背后的内容），或暗示激励与使用我们的渠道直接相关。

还：

> 您不得将 Facebook 特性或功能（例如“赞”按钮）用作促销的投票机制。

# sql - sql sum + varchar

> ID：10751751
> 
> 赞同：1
> 
> 时间：2012-05-25T09:21:50.747
> 
> 标签：sql

我的 sql 表（SQL 2008）中有用于存储学生分数的 varchar 类型列。如果我只存储标记，我可以通过将列转换为整数来计算标记的总和。

但我需要`Absent`为缺勤者储存。现在，它`Absent`在转换为整数并对值求和时显示错误，插入`Absent`.

是否可以只总结分数，不包括`Absent`？我试过这样

```
select sum(cast(Marks as integer))
from Results    
group by Marks 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T09:25:49.277

你应该使用一个整数列，`Marks`并且你应该有一个自己的列来表示缺席。

要解决您当前的情况，您可以使用`case`语句。

```
select sum(case Marks when 'Absent' then 0 else Marks end) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T09:25:00.607

无需添加`Group by`子句。

除了聚合函数中使用的列之外，Select 中没有其他列，因此不需要 GROUP BY。

```
select sum(cast(Marks as integer))
from Results    
where Marks <>'Absent' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T09:25:35.757

使用解码功能 -

```
select sum(decode(Marks, 'Absent', 0, cast(Marks as integer))) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-25T09:25:36.957

也许是这样的？

```
select sum(cast(Marks as integer))
from Results
where Marks <> 'Absent' 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-25T09:26:44.830

假设缺席`Absent`在列中。尝试这个 -

```
select sum(IF(Marks = 'Absent', 0, cast(Marks as integer))) -- MySQL
select sum(decode(Marks, 'Absent', 0, cast(Marks as integer))) -- Oracle
from Results    
group by Marks; 
```

或者

```
select sum(cast(Marks as integer))
from Results
where Marks <> 'Absent'
group by Marks 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-25T09:25:10.780

```
select sum(cast(Marks as integer))
from Results
where Marks <> 'Absent' 
```

只需添加一个 where 子句！

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-25T13:32:00.990

哇，我在 SQL Server 中的首选解决方案就是：

```
select sum(case when isnumeric(Marks) = 1 then cast(Marks as Integer) end)
from Results 
```

或者，等效地：

```
select cast(Marks as Integer)
from Results
where isnumeric(Marks) = 1 
```

group by 是不必要的，除非您尝试生成直方图。

顺便说一句，上面仍然容易出错，因为浮点数不能安全地转换为整数。您可能更喜欢：

```
select cast(sum(case when isnumeric(Marks) = 1 then cast(Marks as float) end) as int)
from Results 
```

# html - 并排放置 2 个文本块

> ID：10751753
> 
> 赞同：1
> 
> 时间：2012-05-25T09:22:01.310
> 
> 标签：html, css

我尝试并排放置 2 块文本。你能帮助我吗？

像这样的东西：

![在此处输入图像描述](../Images/a89b693b93d9100501c27f482dee9cf5.png)

如果调整页面大小，我希望 2 个块居中。我无法将我的积木并排放置。

我在这里创建一个 jsFiddle 作为起点：http: [//jsfiddle.net/LpJBm/2/](http://jsfiddle.net/LpJBm/2/)

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T09:28:22.637

浮动 div 并将它们包装为居中：http: [//jsfiddle.net/Xj5Wy/](http://jsfiddle.net/Xj5Wy/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T09:28:31.837

只需将灰色框向右浮动：

```
#block2 {
    background-color: #F5F5F5;
    margin: 10px 20px;
    padding: 20px;
    width: 180px;
    float: right;
} 
```

并交换 HTML 的顺序：

```
<div id="block2">
    Nos bureaux sont ouverts du lundi au vendredi de 9h00 à 17h00
</div>
<div id="block1">
    Merci d'avoir utilisé notre plateforme...
</div> 
```

​<a href="http://jsfiddle.net/Eric/LpJBm/8/" rel="nofollow">http://jsfiddle.net/Eric/LpJBm/8/

* * *

使盒子居中是一个单独的问题。要将任何东西水平居中，请将其包装在 div 中，然后应用

```
.wrapper {
    margin: auto;
    width: 400px; /*The width you want it to be when centered*/
    /* min-width works too */
} 
```

在您的情况下，您还需要`overflow: hidden`, 以强制您的包装器包含浮动。

[http://jsfiddle.net/Eric/LpJBm/18/](http://jsfiddle.net/Eric/LpJBm/18/) ​</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T09:26:28.060

[http://jsfiddle.net/LpJBm/4/](http://jsfiddle.net/LpJBm/4/)

它在那里。只需添加：

```
float:left; 
```

到两个 div。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T09:26:43.973

尝试

```
#block1
{
    margin: 10px 20px;
    padding: 20px;
    width: 400px;
    float: left;
}
#block2
{
    background-color: #F5F5F5;
    margin: 10px 20px;
    padding: 20px;
    width: 180px;
    margin-left:400px;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-25T09:36:12.770

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<style>
#block2
{
    background-color: #F5F5F5;
    margin: 10px 20px;
    padding: 20px;
    width: 180px;
}
</style>
</head>

<body>

    <div id="block1" style="float:left;">
        Merci d'avoir utilisé notre plateforme...
    </div>

    <div id="block2" style="float:right;">
        Nos bureaux sont ouverts du lundi au vendredi de 9h00 à 17h00
    </div>

</body>
</html> 
```

试试这样............你得到答案

# firefox - 使用 CSS3 通过 display:none 为不透明度设置动画

> ID：10751754
> 
> 赞同：2
> 
> 时间：2012-05-25T09:22:08.597
> 
> 标签：firefox, css, webkit, opacity, css-transitions

我有一个元素，带有一个最初隐藏的子容器。当我将鼠标悬停在父级上时，应该显示子级。简单的。

现在，对于真正的浏览器，我想添加一些天赋并让孩子淡入 - 同时仍然保留非 CSS3 兼容浏览器的基本功能。对于旧的浏览器，我只是简单地切换，同时我用很酷的浏览器为所有孩子`display`制作动画。`opacity`应该是简单的操作吧？

令我非常惊讶和失望的是，这有点像马车。

在**Firefox中，当我将鼠标悬停在上面时，子元素会在****淡出**之前切换为完全不透明。**但是，嘿，我希望它以完全透明的**方式开始，然后淡入！

在**Webkit**中，动画不会触发——只有`display`切换。

在**IE**（包括 IE10 PP）中，它也只是简单地切换`display`（正如预期的那样，虽然我希望它会在 IE10 中动画）。

在**Opera**中，一切都运行良好。<3 <3

现在，如果我从最初的声明中删除，动画在**Fx**`display:none;`中可以很好地工作，但是我会遇到不酷的浏览器的问题，遗憾的是，这在这个特定项目的访问者中占主导地位。

 **由于我拥有 Modernizr 的能力，我可以简单地制作一个条件样式，以便我`display`只在愚蠢的浏览器上使用切换，生活又美好了，但问题仍然存在：

**这是 Fx/Webkitz 中的错误，还是故意的？**

这里有一个小提琴供你看：http: [//jsfiddle.net/TheNix/q5bAZ/4/](http://jsfiddle.net/TheNix/q5bAZ/4/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T17:16:15.883

问题是转换发生在计算值更改时，并且浏览器在设置时不会计算大多数属性`display: none`的值。

有一些......关于规范应该对此说些什么的热烈讨论。[请参阅从http://lists.w3.org/Archives/Public/www-style/2011Dec/0353.html](http://lists.w3.org/Archives/Public/www-style/2011Dec/0353.html)开始并在过去 4 个月左右的线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T10:11:04.437

只需省略`display`声明并添加

```
-moz-opacity: 0.5;
-khtml-opacity: 0.5;
filter: alpha(opacity=x); // x =  0 ... 100. 
```

现在针对 IE 和其他较旧的浏览器，您应该没问题。

如果您想更加准确，请将过滤器放入额外的 IE 样式表中，这样您就不会用愚蠢的 IE 内容使您的样式表无效。（但只有专有前缀 xD ）**

# c++ - 来自 c++ 的 MS Word 的函数、命令的完整列表

> ID：10751759
> 
> 赞同：0
> 
> 时间：2012-05-25T09:22:26.940
> 
> 标签：c++, com, ms-word

我正在通过我的 c++ 应用程序使用 word。我想阅读一些有关可用机会的文档。我在论坛中看到一些特殊情况的代码（添加图片，添加文本，保存文件，填写表格），但我想观察所有功能。

告诉我在哪里可以获得此类文档或如何找到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T09:24:41.543

完整的文档可以在 MSDN 上找到：http: [//msdn.microsoft.com/en-us/library/ff841702](http://msdn.microsoft.com/en-us/library/ff841702)

# java - OpenCMS：如何在 JSP/Javascript/Java 中使用变量？

> ID：10751760
> 
> 赞同：0
> 
> 时间：2012-05-25T09:22:27.830
> 
> 标签：java, jsp, variables, opencms

我有这样的表格：

```
<form id="form" method="post">
    Name: <input name="name" />
    E-Mail: <input name="email"/>
    Comment: <textarea name="comment" cols="5" rows="10"></textarea>
    <input type="submit" name="submit" value="submit"/>
</form> 
```

为一些开发者博客提供评论功能。因此，我需要将输入插入到某个数据库中，以便稍后进行一些选择查询。

现在我如何告诉脚本哪些评论属于哪个博客文章？

我的想法是获取文件的名称或条目的标题或其他内容，并将其放入我正在创建的查询中。而且我可能会设法找出如何在 OpenCMS 中获取文件名 - 如果有的话，大约需要五分钟的搜索时间 - 但我不知道如何将 OpenCMS 变量放入文件的 Java 部分，其中我设置了实际的查询/查询。

几周前，我已经在早些时候搜索过，但当时我设法找到了避免这种情况的方法。现在虽然我也想不出一种避免的方法，所以我希望有人知道如何正确完成这项工作。

如果您需要这个，这里是到目前为止实际博客条目的代码，然后我将在作者信息下方附加评论功能（作为一个元素）。

```
 <cms:contentcheck ifexistsone="Header"><h2><cms:contentshow element="Header" /></h2></cms:contentcheck>
                <p class="BlogEntry">
                <cms:contentcheck ifexistsone="Text"><cms:contentshow element="Text" /></cms:contentcheck>  
                <cms:contentcheck ifexistsone="IntLink"><%@ include file="/system/modules/de.medienkonzepte.uform.templates/elements/internerlink.txt" %></cms:contentcheck>
                </p>
                <cms:contentcheck ifexistsone="Image">
                    <cms:contentloop element="Image">
                        <img style="padding:10px;" src="<cms:link><cms:contentshow element="ImageSrc" /></cms:link>" alt="<cms:contentshow element="Alt_Tag" />" />
                    </cms:contentloop>
                </cms:contentcheck>

            </cms:contentloop>
        </cms:contentcheck>
                 <cms:contentcheck ifexistsone="Content/Text">

        <c:set var="dateString"><cms:contentshow element="Date"/></c:set>
        <% 
         java.util.Date date = new java.util.Date(); 

         date.setTime(Long.parseLong(pageContext.getAttribute("dateString").toString())); 
         pageContext.setAttribute("date", date); 
        %>                  

                <% // Author %>
                <cms:contentcheck ifexistsone="Author"><p class="blogentry_author">Written by: <cms:contentshow element="Author"/> on <fmt:formatDate value="${date}" type="date" pattern="dd.MM.yyyy"/></p></cms:contentcheck>

        </cms:contentcheck> 
    </div> <% // ende innercontent %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T02:44:47.380

> 一些开发者博客的评论功能

用户是否在博客条目的详细页面（整个页面只有一个条目），底部有评论表单，很常见，即在 Wordpress 博客中？或者它是一个包含多个博客条目的页面？

如果您在详细信息页面上，您可以使用 java 代码立即获取当前文件名：

```
CmsJspActionElement cms = new CmsJspActionElement(pageContext, request, response);
String filename = cms.getRequestContext().getUri(); 
```

> 但我不知道如何将 OpenCMS 变量放入文件的 Java 部分，在那里我设置了实际的查询/查询。

```
<c:set var="filename" scope="request">output your OpenCms variable in here</c:set> 
```

然后你可以通过访问文件名变量

```
 request.getAttribute("filename") 
```

你在哪里做查询？在 jsp 中还是在 java 类中？但没关系，您可以将请求作为参数传递给它。这是一种方法：

# lucene - 调试 Jackrabbit Lucene 重新索引中止/失败

> ID：10751779
> 
> 赞同：0
> 
> 时间：2012-05-25T09:23:47.920
> 
> 标签：lucene, jackrabbit, crx

我正在尝试在 Jackrabbit 2.0 实例（实际上是 Day CRX 2.1 实例）上重建 Lucene 搜索索引，以便我可以为相关性评分应用新的属性提升权重。然而，它在同一点重复中止索引，计数 3173000

> *INFO * MultiIndex：索引... /content/xxxxxx/jcr:content (3173000)（MultiIndex.java，第 1209 行）
> *INFO * RepositoryImpl：关闭存储库...（RepositoryImpl.java，第 1139 行）

（公司名称已编辑）让 CRX Web 实例显示

> java.lang.IllegalStateException：存储库不可用。

日志中没有说明它关闭的原因。在任何更高级别的跟踪上，这两者之间没有更多的线。提到的路径存在并且不起眼。Jackrabbit 每 100 个节点记录一次路径，因此它可能是导致故障的下 100 个节点中的任何一个。

知道可能出了什么问题，或者我该如何调试？

（不幸的是，这是我无法深入了解的问题之一——我不能告诉你更多，因为我不知道去哪里找。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T08:56:27.137

感谢大家在评论中提出的建议。问题是我们有一些 HTML 错误的内容：特别是 a `<li>`，封闭与否，在 a 内`<select><option>`：

```
<html><body><form>
  <select>
    <option value="1"><li></option>
  </select>
</form></body></html> 
```

这会用 StackOverflowError 杀死[javax.swing.text.html.parser.Parser](http://docs.oracle.com/javase/6/docs/api/javax/swing/text/html/parser/Parser.html)，这是一个 Throwable，因此不会被 Jackrabbit MultiIndex 中的错误处理捕获。

我已经[向 Oracle 报告了 Parser 崩溃](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7172359)，我将向 Jackrabbit 核心提出一个补丁，该补丁在索引代码周围添加额外的 try/catch，以至少记录有问题的确切节点，并在可能的情况下从错误中恢复并携带关于索引。在 StackOverflowError 的情况下，我认为这是可以恢复的：当我们回到异常处理代码时，堆栈已经展开到合理的深度。

在实践中，我不会被允许在生产环境中运行修改后的 Jackrabbit，但至少我已经识别并修复了不良内容，因此同样的问题不会在那里困扰我们。

# c# - c#中的简单翻转图像

> ID：10751783
> 
> 赞同：0
> 
> 时间：2012-05-25T09:24:06.803
> 
> 标签：c#, html, rollover-effect

我正在尝试将翻转图像添加到我正在处理的测试 DotNetNuke 页面，但似乎无法正确使用语法（对于 c# 来说完全是新的）。我敢肯定，对于有任何经验的人来说，这应该是一个简单的过程。

到目前为止，我已经尝试了几种不同的方法，其中大多数都会导致对象引用错误。这是我尝试的最后一件事（请注意下面我放置此代码的代码，该行简单地放在此处，因为这是添加其他属性的地方，我想有一个更合乎逻辑的地方放置该行？）：

```
loginLink.Attributes.Add(" onmouseover", "this.src=(http://localhost/portals/_default/skins/BSAVA/Images/Nav/log_in_link_h.png);"); 
```

页面加载没有错误，但翻转不起作用。链接使用此属性呈现：

```
onmouseover="this.src=(http://localhost/portals/_default/skins/BSAVA/Images/Nav/log_in_link_h.png);" 
```

显然不正确。

整个页面代码如下：

```
using System;
using System.Web;
using System.Web.UI;
using DotNetNuke.Common;
using DotNetNuke.Common.Utilities;
using DotNetNuke.Services.Exceptions;
using DotNetNuke.Services.Localization;
using DotNetNuke.UI.Modules;

namespace DotNetNuke.UI.Skins.Controls
{

public partial class Login : SkinObjectBase
{

    private const string MyFileName = "Login.ascx";

    public string Text { get; set; }

    public string CssClass { get; set; }

    public string LogoffText { get; set; }

    public string login_link_img = "http://localhost/portals/_default/skins/BSAVA/Images/Nav/log_in_link.png";
    public string login_link_img_hover = "http://localhost/portals/_default/skins/BSAVA/Images/Nav/log_in_link_h.png";

    public string logout_link_img_hover = "http://localhost/portals/_default/skins/BSAVA/Images/Nav/logout_link_h.png";
    public string logout_link_img = "http://localhost/portals/_default/skins/BSAVA/Images/Nav/logout_link.png";

    protected override void OnLoad(EventArgs e)
    {
        base.OnLoad(e);

        try
        {

            if (Request.IsAuthenticated)
            {

            loginLink.CssClass = "logoutLink"; 
            loginLink.ImageUrl = logout_link_img;

                if (!String.IsNullOrEmpty(LogoffText))
                {
                    if (LogoffText.IndexOf("src=") != -1)
                    {
                        LogoffText = LogoffText.Replace("src=\"", "src=\"" + PortalSettings.ActiveTab.SkinPath);
                    }
                    loginLink.Text = LogoffText;
                }
                else
                {
                    loginLink.Text = Localization.GetString("Logout", Localization.GetResourceFile(this, MyFileName));
                }
                loginLink.NavigateUrl = Globals.NavigateURL(PortalSettings.ActiveTab.TabID, "Logoff");
            }
            else
            {

            loginLink.CssClass = "loginLink"; 
            loginLink.ImageUrl = login_link_img;

                if (!String.IsNullOrEmpty(Text))
                {
                    if (Text.IndexOf("src=") != -1)
                    {
                        Text = Text.Replace("src=\"", "src=\"" + PortalSettings.ActiveTab.SkinPath);
                    }
                    loginLink.Text = Text;
                }
                else
                {
                    loginLink.Text = Localization.GetString("Login", Localization.GetResourceFile(this, MyFileName));
                }

                string returnUrl = HttpContext.Current.Request.RawUrl;
                if (returnUrl.IndexOf("?returnurl=") != -1)
                {
                    returnUrl = returnUrl.Substring(0, returnUrl.IndexOf("?returnurl="));
                }
                returnUrl = HttpUtility.UrlEncode(returnUrl);

                loginLink.NavigateUrl = Globals.LoginURL(returnUrl, (Request.QueryString["override"] != null));

                if (PortalSettings.EnablePopUps && PortalSettings.LoginTabId == Null.NullInteger)
                {
                    loginLink.Attributes.Add(" onclick", "return " + UrlUtils.PopUpUrl(loginLink.NavigateUrl, this, PortalSettings, true, false, 200, 550)); 
                    loginLink.Attributes.Add(" onmouseover", "this.src=(http://localhost/portals/_default/skins/BSAVA/Images/Nav/log_in_link_h.png);");

                }
            }

        }
        catch (Exception exc)
        {
            Exceptions.ProcessModuleLoadException(this, exc);
        }
    }

}
} 
```

我已经做了大量的搜索，似乎有几种方法使用 JavaScript，而另一些则没有。非常感谢您对此的任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T10:11:30.897

我使用这个来实现图像按钮上的 RolloverImage 效果：

```
namespace My.Controls
{
    /// <summary>
    /// Summary description for RolloverImageButton
    /// </summary>
    [DefaultProperty("Text")]
    [ToolboxData("<{0}:RolloverImageButton runat=server></{0}:RolloverImageButton>")]
    public class RolloverImageButton : ImageButton
    {
        [DefaultValue("")]
        [UrlProperty]
        [Bindable(true)]
        public virtual string ImageOverUrl
        {
            get
            {
                if (null == ViewState["ImageOverUrl"]) return string.Empty;
                else return Convert.ToString(ViewState["ImageOverUrl"]);
            }
            set { ViewState["ImageOverUrl"] = value; }
        }

        protected override void AddAttributesToRender(HtmlTextWriter writer)
        {
            writer.AddAttribute("onmouseover", "this.src='" + base.ResolveClientUrl(ImageOverUrl) + "'");
            writer.AddAttribute("onmouseout", "this.src='" + base.ResolveClientUrl(ImageUrl) + "'");
            base.AddAttributesToRender(writer);
        }
    }
} 
```

您可以像使用 ImageButton 一样在标记中使用它，但您还可以将 ImageOverUrl 设置为它。

要使 Control 全局可用而不在每个页面中包含命名空间，您可以简单地添加对 web.config 的引用，如下所示：

```
<system.web>
  ...
  <pages theme="..." controlRenderingCompatibilityVersion="..." clientIDMode="...">
    <controls>
      <add tagPrefix="mycontrols" namespace="My.Controls" />
    </controls>
  </pages>
</system.web> 
```

然后，您可以在标记中使用 My.Control 命名空间中定义的所有控件，如下所示：

```
<mycontrols:RolloverImageButton runat="server" ImageUrl="~/Images/image1.png" ImageOverUrl="~/Images/image1_h.png" ... /> 
```

如果您不希望它成为 Button 控件，只需覆盖 Image 类，而不是`ImageButton`该类并调用它`RolloverImage`。您应该拥有一个可以在普通超链接中显示的图像标签。

问候，杰拉德

# python - 如何在python中删除非字母数字字符但保留一些特殊字符

> ID：10751785
> 
> 赞同：2
> 
> 时间：2012-05-25T09:24:14.260
> 
> 标签：python, regex

我弄清楚如何使用以下函数在 python 中删除特殊的非字母数字字符：

```
p_nonalphanum = re.compile('\W+')

def removeNonAlphaNum(string):
        m = p_nonalphanum.match(string)
        if m:
            string = string[m.end():]
        return string 
```

我想保留一些特殊字符，例如我认为是数字的 ½、¾。我应该如何编辑我的正则表达式？

> **例如：从**“• ½ 杯面粉”**到**“½ 杯面粉”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T09:34:28.480

您可以使用否定字符类并添加要保留的所有字符

你可以这样做：

```
p_nonalphanum = re.compile('[^\w½¾]+')
print (p_nonalphanum.sub('', test)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T09:45:54.543

不要为手动添加所需的每个字符的正则表达式而烦恼，使用内置`isalnum`函数！

```
>>> s = "• ½ cup flour -> ½ cup flour"
>>> def only_alphanum(s):
...     s = unicode(s, "utf-8")
...     return ' '.join(c for c in s.split() if c.isalnum())
... 
>>> print only_alphanum(s)
½ cup flour ½ cup flour 
```

这将让您捕获任何分数，而不仅仅是您在正则表达式中组装的分数列表（这可能会很快变长）

```
>>> s = "• ¼ cup oats -*(*&!!"
>>> print only_alphanum(s)
¼ cup oats 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-25T09:57:59.677

```
>>> def remove_unwanted(s):
...     '''• ½ cup flour -> ½ cup flour'''
...     allowed = '[\w½¾]+'
...     return ' '.join(re.findall(allowed, s))
... 
>>> print remove_unwanted('• ½ cup flour ->')
½ cup flour 
```

# firefox - 如何在当前浏览器中截取开发工具的屏幕截图？

> ID：10751788
> 
> 赞同：3
> 
> 时间：2012-05-25T09:24:30.357
> 
> 标签：firefox, google-chrome, google-chrome-extension, firefox-addon, google-chrome-devtools

`Awesome screenshot`是一个很棒的工具，我将它用于谷歌浏览器。

现在，我也想拍摄作为 google chrome 浏览器一部分的 devtool，但`Awesome screenshot`无法使用。

看这张图

是否有其他插件/浏览器（firefox/firebug）能够完成这项工作？

谢谢。

附言

Awesome screenshot 的目标不仅仅是制作一个屏幕截图，而是非常容易地在网络上与其他网络开发人员分享这个截图。

![在此处输入图像描述](../Images/fc10eccb72a1aaa16d4ae0e4338bf8bf.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T10:36:51.717

我认为您的问题是“我如何在当前浏览器中截取开发工具的屏幕截图？”，您可以做一个简单的打印屏幕并将其粘贴到 Photoshop 或烟花中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T10:38:22.603

Chrome 允许对网页进行截图。书签面板/开发人员工具窗口不是网页的一部分，因此它们不会出现在屏幕截图上。

有一个全新的[开发者工具 API](http://code.google.com/chrome/extensions/devtools.html)，允许扩展开发者工具面板。可以创建一个扩展程序，从 devtools 窗口内部进行屏幕截图，然后将其与网页的屏幕截图结合起来。但这似乎很复杂。

如果可能，只需使用一些外部工具对整个浏览器窗口进行截图。

# asp.net - Visual Studio 无法识别控件

> ID：10751789
> 
> 赞同：0
> 
> 时间：2012-05-25T09:24:32.370
> 
> 标签：asp.net, visual-studio-2012

使用 VS2011 测试版；

在 web.config 我有一个`<add tagPrefix="aa1" assembly="MyProject" namespace="MyProject" />`

为什么，在我的 aspx 文件中，当我写时`<aa1:MyControl runat="server" />`，我得到`Unrecognized tag prefix or device filter 'aa1'`

当我把 a`<%@ Register TagPrefix="aa1" Namespace="MyProject" Assembly="MyProject" %>`在 aspx

我明白了`Element 'MyControl' is not a known element. This can occur if there is a compilation error in the Web site, or the web.config file is missing.`

这两个警告都不会阻止构建，并且在部署时它实际上似乎工作正常。但我不明白为什么 VS 不配合。

# objective-c - 选择无法转到其他页面时的didSelectRowAtIndexPath

> ID：10751792
> 
> 赞同：0
> 
> 时间：2012-05-25T09:24:42.443
> 
> 标签：objective-c, didselectrowatindexpath

```
if(!_personViewController)
    {
        _personViewController=[[PersonViewController alloc]initWithNibName:@"PersonViewController" bundle:nil];
    }

    _personViewController.user=_user;
    [self.navigationController pushViewController:_personViewController animated:YES];
    [PersonViewController release]; 
```

这是我的代码。我只想在选择行时可以跳转到 personViewController 页面，但这似乎很糟糕。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T11:51:38.760

尝试这个..

```
//_personViewController.user=_user; 
```

或者

```
_personViewController.user=[_user retain]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T12:39:37.793

只需检查它是否写入导航控制器 `- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions`，它是 AppDelegate.m 文件。

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
    {

        self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
        self.viewController = [[[ViewController alloc] initWithNibName:@"ViewController_iPhone" bundle:nil] autorelease];
       UINavigationController *navControl = [[UINavigationController alloc] initWithRootViewController:self.viewController];

        [self.window addSubview:[navControl view]];

        [self.window makeKeyAndVisible];
        return YES;
    } 
```

# php - PHP 按日期排序功能（JWPLAYER 自动播放列表脚本）

> ID：10751794
> 
> 赞同：0
> 
> 时间：2012-05-25T09:24:45.160
> 
> 标签：php, jwplayer

这将帮助任何使用 JWPLAYER 的人通过扫描文件夹并自动创建正确的 XML 文件来制作播放列表。

我想添加一个我无法解决的功能。

我想按名称或日期排序播放列表。

```
 $folder = opendir($path);
$start="<asx version='3.0'>n<title>Example ASX playlist</title>";
$Fnm = "./playlist.xml";
$inF = fopen($Fnm,"w");
fwrite($inF,$start."n");
while( $file = readdir($folder) ) {
     if (($file != '.')&&($file != '..')&&($file != 'index.htm')){
     $result="<entry>n<title>$file</title>n<ref href='$path2$file'/>n<param name='image' value='preview.jpg'/>n</entry>n";
         fwrite($inF,$result);
     }
}
fwrite($inF,"</asx>");
closedir($folder);
fclose($inF);
?> 
```

问题：

在创建 XML 和列表之前，我想在上面的代码中添加一个按日期排序的函数。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T10:04:03.367

您必须循环目录并使用 filemtime 获取日期并将其转储到数组中，这是一个工作脚本，您可以根据需要将 $path、$xmlfile 或 arsort() 更改为 sort() ...

```
<?php

$xmlfile = "playlist.xml";
$path = "http://".$_SERVER['HTTP_HOST'].dirname($_SERVER['SCRIPT_NAME']). "/musicfolder";
$folder = scandir($path);
$files = array();
foreach($folder as $file){
    if($file == '.' OR $file == '..' OR $file == 'index.htm'){}else{
        $files[$file] = filemtime($path.'/'.$file);
    }
}
arsort($files);

//use asort to sort from old to new

$output="<asx version='3.0'>" . PHP_EOL . "<title>Example ASX playlist</title>";
foreach($files as $file => $date){
$output .= "<entry>" . PHP_EOL . "<title>$file</title>" . PHP_EOL . "<ref href='$path'/>" . PHP_EOL . "<param name='image' value='preview.jpg'/>" . PHP_EOL . "</entry>" . PHP_EOL;
}
$output .= "</asx>";
file_put_contents($xmlfile,$output);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T09:31:28.043

使用文件名、日期时间（使用 filemtime($file)）等创建一个数组并进行相应排序。

# java - 如何使用 Apache Ant 缩放图像？- 使用百分比的问题

> ID：10751795
> 
> 赞同：2
> 
> 时间：2012-05-25T09:24:48.920
> 
> 标签：java, ant

我写了一个简单的任务来缩放我的图像，但它似乎对 PNG 文件有问题。

这是任务的内容[它的重要部分]：

```
 <image srcdir="${imgResizeDir}" destdir="${imgResizeDir}/md" overwrite="yes" >
            <scale width="75%" height="75%"/>
            <regexpmapper from="^(.*)-hd\.(.*)$$" to="\1-md.\2"/>
 </image> 
```

当我运行它时，我最终遇到了这个错误：

```
Error: IOException occurs when search for propriate codecs.
Occurs in: com.sun.media.jai.codec.ImageCodec
java.io.IOException: Bad file descriptor
    at java.io.RandomAccessFile.seek(Native Method)
    at com.sun.media.jai.codec.FileSeekableStream.readPage(FileSeekableStream.java:141)
    at com.sun.media.jai.codec.FileSeekableStream.read(FileSeekableStream.java:181)
    at com.sun.media.jai.codec.SeekableStream.readFully(SeekableStream.java:327)
    at com.sun.media.jai.codec.SeekableStream.readFully(SeekableStream.java:306)
    at com.sun.media.jai.codec.ImageCodec.getDecoderNames(ImageCodec.java:274)
    at com.sun.media.jai.opimage.StreamRIF.create(StreamRIF.java:80)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at javax.media.jai.FactoryCache.invoke(FactoryCache.java:130)
    at javax.media.jai.OperationRegistry.invokeFactory(OperationRegistry.java:1679)
    at javax.media.jai.ThreadSafeOperationRegistry.invokeFactory(ThreadSafeOperationRegistry.java:481)
    at javax.media.jai.registry.RIFRegistry.create(RIFRegistry.java:340)
    at javax.media.jai.RenderedOp.createInstance(RenderedOp.java:830)
    at javax.media.jai.RenderedOp.createRendering(RenderedOp.java:878)
    at javax.media.jai.RenderedOp.getRendering(RenderedOp.java:899)
    at javax.media.jai.RenderedOp.createInstance(RenderedOp.java:810)
    at javax.media.jai.RenderedOp.createRendering(RenderedOp.java:878)
    at javax.media.jai.RenderedOp.getRendering(RenderedOp.java:899)
    at javax.media.jai.RenderedOp.createInstance(RenderedOp.java:810)
    at javax.media.jai.RenderedOp.createRendering(RenderedOp.java:878)
    at javax.media.jai.RenderedOp.getRendering(RenderedOp.java:899)
    at javax.media.jai.JAI.createNS(JAI.java:1103)
    at javax.media.jai.JAI.create(JAI.java:977)
    at javax.media.jai.JAI.create(JAI.java:1672)
    at org.apache.tools.ant.taskdefs.optional.image.Image.processFile(Image.java:320)
    at org.apache.tools.ant.taskdefs.optional.image.Image.processDir(Image.java:253)
    at org.apache.tools.ant.taskdefs.optional.image.Image.execute(Image.java:374)
    at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
    at org.apache.tools.ant.Task.perform(Task.java:348)
    at org.apache.tools.ant.Target.execute(Target.java:390)
    at org.apache.tools.ant.Target.performTasks(Target.java:411)
    at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399)
    at org.apache.tools.ant.Project.executeTarget(Project.java:1368)
    at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
    at org.apache.tools.ant.Project.executeTargets(Project.java:1251)
    at org.apache.tools.ant.Main.runBuild(Main.java:809)
    at org.apache.tools.ant.Main.startAnt(Main.java:217)
    at org.apache.tools.ant.launch.Launcher.run(Launcher.java:280)
    at org.apache.tools.ant.launch.Launcher.main(Launcher.java:109)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.intellij.rt.ant.execution.AntMain2.main(AntMain2.java:29)
java.lang.RuntimeException: - Unable to render RenderedOp for this operation.
    at org.apache.tools.ant.taskdefs.optional.image.Image.processFile(Image.java:343)
    at org.apache.tools.ant.taskdefs.optional.image.Image.processDir(Image.java:253)
    at org.apache.tools.ant.taskdefs.optional.image.Image.execute(Image.java:374)
    at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
    at org.apache.tools.ant.Task.perform(Task.java:348)
    at org.apache.tools.ant.Target.execute(Target.java:390)
    at org.apache.tools.ant.Target.performTasks(Target.java:411)
    at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399)
    at org.apache.tools.ant.Project.executeTarget(Project.java:1368)
    at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
    at org.apache.tools.ant.Project.executeTargets(Project.java:1251)
    at org.apache.tools.ant.Main.runBuild(Main.java:809)
    at org.apache.tools.ant.Main.startAnt(Main.java:217)
    at org.apache.tools.ant.launch.Launcher.run(Launcher.java:280)
    at org.apache.tools.ant.launch.Launcher.main(Launcher.java:109)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.intellij.rt.ant.execution.AntMain2.main(AntMain2.java:29)
Caused by: java.lang.RuntimeException: - Unable to render RenderedOp for this operation.
    at javax.media.jai.RenderedOp.createInstance(RenderedOp.java:838)
    at javax.media.jai.RenderedOp.createRendering(RenderedOp.java:878)
    at javax.media.jai.RenderedOp.getRendering(RenderedOp.java:899)
    at javax.media.jai.RenderedOp.createInstance(RenderedOp.java:810)
    at javax.media.jai.RenderedOp.createRendering(RenderedOp.java:878)
    at javax.media.jai.RenderedOp.getRendering(RenderedOp.java:899)
    at javax.media.jai.RenderedOp.createInstance(RenderedOp.java:810)
    at javax.media.jai.RenderedOp.createRendering(RenderedOp.java:878)
    at javax.media.jai.RenderedOp.getRendering(RenderedOp.java:899)
    at javax.media.jai.JAI.createNS(JAI.java:1103)
    at javax.media.jai.JAI.create(JAI.java:977)
    at javax.media.jai.JAI.create(JAI.java:1672)
    at org.apache.tools.ant.taskdefs.optional.image.Image.processFile(Image.java:320)
    ... 24 more 
```

如果我从宽度和高度中删除 % 符号，我最终会得到具有适当尺寸的图像，但是 PNG 被搞砸了[它们看起来像是覆盖着半透明的黑色层]。大多数图像都是PNG，我必须使用％。

我在 MacOS Lion 上使用 Apache Ant 1.8.2 运行此任务。Java版本：1.6.0_31

我应该在我的蚂蚁中添加一些东西来完成这项工作吗？

谢谢

# android - 使用 AndroidMock 的 Ant android 测试项目

> ID：10751797
> 
> 赞同：0
> 
> 时间：2012-05-25T09:24:53.117
> 
> 标签：android, ant, annotation-processing

我有一个 android 项目，我想使用命令行构建和安装并运行测试。

以下是我的构建 shell 脚本：

```
android update project --path ./main/libraryProject
android update project --path ./main/Project --library ../libraryProject
android update project --path ./main/Test --library ../libraryProject
android update test-project -m $(pwd)/main/Project -p ./main/Test
cd main/Project
ant debug install
cd ../Test
ant debug install test 
```

该项目可以构建和安装，但在构建测试项目时遇到以下错误：

```
 [javac] An annotation processor threw an uncaught exception.
    [javac] Consult the following stack trace for details.
    [javac] java.lang.NoClassDefFoundError: android/app/Activity
    [javac]     at java.lang.ClassLoader.defineClass1(Native Method)
    [javac]     at java.lang.ClassLoader.defineClass(ClassLoader.java:634)
    [javac]     at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
    [javac]     at java.net.URLClassLoader.defineClass(URLClassLoader.java:277)
    [javac]     at java.net.URLClassLoader.access$000(URLClassLoader.java:73)
    [javac]     at java.net.URLClassLoader$1.run(URLClassLoader.java:212)
    [javac]     at java.security.AccessController.doPrivileged(Native Method)
    [javac]     at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
    [javac]     at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    [javac]     at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
    [javac]     at java.lang.Class.forName0(Native Method)
    [javac]     at java.lang.Class.forName(Class.java:264)
    [javac]     at com.google.android.testing.mocking.UsesMocksProcessor.findClassesToMock(UsesMocksProcessor.java:144)
    [javac]     at com.google.android.testing.mocking.UsesMocksProcessor.process(UsesMocksProcessor.java:108)
    [javac]     at com.sun.tools.javac.processing.JavacProcessingEnvironment.callProcessor(JavacProcessingEnvironment.java:735)
    [javac]     at com.sun.tools.javac.processing.JavacProcessingEnvironment.discoverAndRunProcs(JavacProcessingEnvironment.java:664)
    [javac]     at com.sun.tools.javac.processing.JavacProcessingEnvironment.doProcessing(JavacProcessingEnvironment.java:809)
    [javac]     at com.sun.tools.javac.main.JavaCompiler.processAnnotations(JavaCompiler.java:1060)
    [javac]     at com.sun.tools.javac.main.JavaCompiler.compile(JavaCompiler.java:795)
    [javac]     at com.sun.tools.javac.main.Main.compile(Main.java:380)
    [javac]     at com.sun.tools.javac.main.Main.compile(Main.java:306)
    [javac]     at com.sun.tools.javac.main.Main.compile(Main.java:297)
    [javac]     at com.sun.tools.javac.Main.compile(Main.java:82)
    [javac]     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    [javac]     at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    [javac]     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    [javac]     at java.lang.reflect.Method.invoke(Method.java:616)
    [javac]     at org.apache.tools.ant.taskdefs.compilers.Javac13.execute(Javac13.java:56)
    [javac]     at org.apache.tools.ant.taskdefs.Javac.compile(Javac.java:1153)
    [javac]     at org.apache.tools.ant.taskdefs.Javac.execute(Javac.java:930)
    [javac]     at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
    [javac]     at sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)
    [javac]     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    [javac]     at java.lang.reflect.Method.invoke(Method.java:616)
    [javac]     at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
    [javac]     at org.apache.tools.ant.Task.perform(Task.java:348)
    [javac]     at org.apache.tools.ant.taskdefs.Sequential.execute(Sequential.java:68)
    [javac]     at com.android.ant.IfElseTask.execute(IfElseTask.java:120)
    [javac]     at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
    [javac]     at sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)
    [javac]     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    [javac]     at java.lang.reflect.Method.invoke(Method.java:616)
    [javac]     at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
    [javac]     at org.apache.tools.ant.Task.perform(Task.java:348)
    [javac]     at org.apache.tools.ant.taskdefs.Sequential.execute(Sequential.java:68)
    [javac]     at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
    [javac]     at sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)
    [javac]     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    [javac]     at java.lang.reflect.Method.invoke(Method.java:616)
    [javac]     at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
    [javac]     at org.apache.tools.ant.Task.perform(Task.java:348)
    [javac]     at org.apache.tools.ant.taskdefs.MacroInstance.execute(MacroInstance.java:398)
    [javac]     at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
    [javac]     at sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)
    [javac]     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    [javac]     at java.lang.reflect.Method.invoke(Method.java:616)
    [javac]     at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
    [javac]     at org.apache.tools.ant.Task.perform(Task.java:348)
    [javac]     at org.apache.tools.ant.Target.execute(Target.java:392)
    [javac]     at org.apache.tools.ant.Target.performTasks(Target.java:413)
    [javac]     at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399)
    [javac]     at org.apache.tools.ant.Project.executeTarget(Project.java:1368)
    [javac]     at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
    [javac]     at org.apache.tools.ant.Project.executeTargets(Project.java:1251)
    [javac]     at org.apache.tools.ant.Main.runBuild(Main.java:811)
    [javac]     at org.apache.tools.ant.Main.startAnt(Main.java:217)
    [javac]     at org.apache.tools.ant.launch.Launcher.run(Launcher.java:280)
    [javac]     at org.apache.tools.ant.launch.Launcher.main(Launcher.java:109)
    [javac] Caused by: java.lang.ClassNotFoundException: android.app.Activity
    [javac]     at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
    [javac]     at java.security.AccessController.doPrivileged(Native Method)
    [javac]     at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
    [javac]     at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    [javac]     at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
    [javac]     ... 68 more 
```

有没有人知道我该怎么办？我使用 AndroidMock 会发生这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T23:30:57.737

您需要将 android jar 添加到类路径中才能编译代码。您可以通过设置来做到这一点：

```
<property name="jar.libs.dir" value="${libs.dir}" /> 
```

然后你可以在编译后删除它：

```
<target name="-post-compile">
    <delete file="libs/android.jar"> </delete>
</target> 
```

# c# - 需要在 Windows 7 中使用 NAudio 录制来自声卡的所有声音

> ID：10751804
> 
> 赞同：2
> 
> 时间：2012-05-25T09:25:11.343
> 
> 标签：c#, audio, record, naudio

需要从声卡录制所有声音。这样 mic+output 就被写入了文件。
是否可以使用 Windows 7 中的 NAudio 库？找不到任何示例，仅找到允许编写麦克风或仅从扬声器发出声音的示例，而不是两者。
PS，对不起，如果问题看起来不太好……我是录音新手。
添加了我在 codeplex 上询问的问题：http: [//naudio.codeplex.com/workitem/16353](http://naudio.codeplex.com/workitem/16353)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T13:03:36.957

要录制声卡播放的声音，您可以在环回模式下使用 WASAPI。要录制进入麦克风的声音，您可以使用 WASAPI 捕获或 NAudio 中的任何其他麦克风捕获类。

然后，您需要将这两个输入混合在一起，这有点棘手。这可能需要事先进行采样率转换，并且可能需要您为录制的音频添加时间戳（因为在没有播放任何内容时，环回音频可能包含间隙）。

使用 NAudio，您可以将两个流转换为浮点，然后使用 NAudio 中的“Mixer”波形或样本提供程序之一将它们混合，然后将其写回文件。

所以是的，这是可能的，我自己之前做过一次，但它确实需要你在核心 NAudio 库之上编写一些你自己的代码。

# xpages - XPages 视图中的条目计数

> ID：10751808
> 
> 赞同：5
> 
> 时间：2012-05-25T09:25:32.230
> 
> 标签：xpages, xpages-ssjs

我的 XPage 有一个视图数据源，其中包含从 URL 参数构造的搜索公式（“在视图结果中搜索”）。

搜索结果显示在面板内的重复控件中。如果没有搜索结果，我想隐藏此面板并显示适当的消息。

该面板基于以下代码可见：

```
var vec:NotesViewEntryCollection = view1.getAllEntries();
vec.getCount() != 0; 
```

但是，似乎 getAllEntries 在过滤发生之前返回视图中的所有条目。AllEntries 的帮助说“如果 FTSearch 过滤了视图，则此属性将返回过滤视图中的条目。”

我误解了这个吗？有没有办法在过滤后获取条目数？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-25T09:53:17.613

当您通过 SSJS 访问 dominoView 数据源时，您获得的不是 dominoView，而是与之关联的 NotesView。这就是 NotesView 类可用的属性和方法的原因。但是搜索是在 dominoView 数据源前端而不是在与其关联的 NotesView 对象上执行的。

不要使用数据源，而是获取使用它的控件（例如 A repeat、viewPanel 等）并使用 getRowCount() 方法。这将为您提供正确的总数。例如

```
getComponent("repeat1").getRowCount() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-01T15:09:16.773

使用视图标题属性....

示例：“显示 30 of 30220”

```
<xp:this.caption><![CDATA[#{javascript:return "Displaying " + getComponent("viewPanel1").getRowCount() + " of " + view1.getAllEntries().getCount();}]]></xp:this.caption> 
```

注意：这也会计算分类行。

# c# - 指定和不指定域的 Cookie（浏览器不一致）

> ID：10751813
> 
> 赞同：50
> 
> 时间：2012-05-25T09:25:39.373
> 
> 标签：c#, cookies, cross-browser

我注意到浏览器之间在 cookie 方面存在一些真正的不一致。

这将是相当长的，所以请耐心等待。

**注意：**我在我的主机文件中设置了一个名为“testdomain.com”的域，这个*错误*在使用“localhost”时不会起作用。

**注意2：**我很想知道这在 Apache/PHP 上是如何工作的，如果您按名称检索 cookie，如果它返回一组 cookie。

## 维基百科

维基百科指出：[http ://en.wikipedia.org/wiki/HTTP_cookie#Domain_and_Path](http://en.wikipedia.org/wiki/HTTP_cookie#Domain_and_Path)

> **域和路径**
> cookie 域和路径定义了 cookie 的范围——它们告诉浏览器 cookie 应该只针对给定的域和路径发送回服务器。**如果未指定，则默认为所请求对象的域和路径。**

因此，如果我们向下推：

```
Response.Cookies.Add(new HttpCookie("Banana", "2")
{

}); 
```

我们应该得到一个 cookie，使用的域是来自请求对象的域，在这种情况下它应该是“testdomain.com”。

## W3

W3 在 cookie 规范中声明：http: [//www.w3.org/Protocols/rfc2109/rfc2109](http://www.w3.org/Protocols/rfc2109/rfc2109)

> 域=域
> 
> 选修的。Domain 属性指定 cookie 对其有效的域。 **明确指定的域必须始终以点开头。**

因此，如果我们向下推：

```
Response.Cookies.Add(new HttpCookie("Banana", "1")
{
    Domain = Request.Url.Host
}); 
```

我们明确地向下推主机名，我们应该在 cookie 上设置一个域名，该域名将以点为前缀，在这种情况下它应该是“.testdomain.com”。

它还说明了维基百科上的内容：

> 域默认为请求主机。（请注意，request-host 的开头没有点。）

* * *

跟我到现在？

如果我使用第一种方法，定义一个域：

```
Response.Cookies.Add(new HttpCookie("Banana", "1")
{
    Domain = Request.Url.Host
}); 
```

这是结果：

IE9：1个cookie

![具有 1 个 cookie 和域的 IE 显式设置](../Images/15e6e94f9e4bac8cd25cf0b46705955a.png)

歌剧：1个饼干

![Opera 明确设置了 1 个 cookie 和域](../Images/19d93e5163d6c08a703d60ecc581e64d.png)

火狐：1个cookie

![明确设置了 1 个 cookie 和域的 Firefox](../Images/0fa47f4110d3d74f927ef81c7b13da1d.png)

铬：1个饼干

![明确设置了 1 个 cookie 和域的 Chrome](../Images/93cb5e5186983434bf32be8b106f9720.png)

如您所见，Opera 和 IE 都设置了一个没有点前缀的 EXPLICIT 域。

Firefox 和 Chrome 都使用点前缀设置 EXPLICIT 域。

如果我使用以下代码：

```
Response.Cookies.Add(new HttpCookie("Banana", "2")
{

}); 
```

IE / Opera：两者的结果完全相同，没有点前缀的域。

有趣的是，Firefox 和 Chrome 都创建没有点前缀的 cookie。

（我清除了所有 cookie 并再次运行代码）

火狐：

![明确设置了 1 个 cookie 和域的 Firefox](../Images/3917a7100fa8f183044d16661ace542c.png)

铬合金：

![明确设置了 1 个 cookie 和域的 Chrome](../Images/1e401db02ae41d2e281b2cddcd0c6822.png)

## 有趣的位

这就是有趣的地方。如果我像这样一个接一个地写饼干：

```
Response.Cookies.Add(new HttpCookie("Banana", "1")
{
    Domain = Request.Url.Host
});
Response.Cookies.Add(new HttpCookie("Banana", "2")
{

}); 
```

就我个人而言，我希望浏览器中存在一个 cookie，因为我认为它是基于 cookie 名称的。

这是我观察到的：

在 IE / Opera 中，LAST cookie 集是使用的 cookie。这是因为 Cookie 名称和域名相同。

如果您用点显式定义域名，两个浏览器仍会看到 1 个 cookie，即最后一个同名 cookie。

另一方面，Chrome 和 Firefox 会看到多个 cookie：

我编写了以下 JavaScript 将值转储到页面：

```
<script type="text/javascript">

(function () {
    var cookies = document.cookie.split(';');
    var output = "";

    for (var i = 0; i < cookies.length; i++) {
        output += "<li>Name " + cookies[i].split('=')[0];
        output += " - Value " + cookies[i].split('=')[1] + "</li>";
    }

    document.write("<ul>" + output + "</ul>");
})();

</script> 
```

这些是结果：

IE - 2 cookie 集（浏览器看到 1）：

![IE - 2 cookie 设置，结果](../Images/f8ea1b5428e7da60747c5c121cf8eeae.png)

Opera - 2 个 cookie 集（浏览器看到 1）：

![在此处输入图像描述](../Images/17e2c753641a078cc3d9742ee79d0a52.png)

Firefox - 设置了 2 个 cookie，浏览器看到 2！：

![在此处输入图像描述](../Images/921a5377a3d24c69ce117c9f0664c42e.png)

Chrome - 2 个 cookie 设置和浏览器看到 2！：

![在此处输入图像描述](../Images/69b464d6feb3f0abf7cb3b9b9b189e98.png)

* * *

现在你可能想知道这一切都是什么。

好：

1.  当您在 C# 中按名称访问 cookie 时，它​​会为您提供 1 个 cookie。（第一个具有该名称的 cookie）
2.  浏览器将所有 cookie 发送到服务器
3.  除了 cookie 的键/值之外，浏览器不会发送任何信息。（这意味着服务器不关心域）
4.  如果您通过索引检索它们，您可以访问同名的两个 cookie

问题...

当我们按下它时，我们必须更改我们的身份验证以在 cookie 中指定域。

这破坏了 Chrome 和 Firefox，用户不再能够登录，因为服务器会尝试验证旧的 auth cookie。这是因为（据我了解）它使用身份验证 Cookie 名称来检索 cookie。

即使有两个 cookie，第一个被检索到恰好是旧的，身份验证失败，用户没有登录。有时正确的 cookie 是列表中的第一个，并且身份验证成功......

最初，我们通过推送一个带有旧域的 cookie 来解决这个问题。这适用于 Chrome 和 Firefox。

但它现在破坏了 IE/Opera，因为两种浏览器都不关心域，只根据名称比较 cookie。

我的结论是，cookie 上的域完全是浪费时间。

假设我们必须指定域，并且我们不能依赖用户清除他们的浏览器缓存。我们如何解决这个问题？

## 更新：

深入研究 .NET 如何注销用户。

```
if (FormsAuthentication._CookieDomain != null)
{
    httpCookie.Domain = FormsAuthentication._CookieDomain;
} 
```

看起来表单身份验证完全有可能推送过期的 Auth cookie，这与用户通过身份验证的 cookie 完全无关。它不使用当前 Auth Cookie 的域。

无论如何它都不能使用它，因为域没有通过 cookie 推回服务器。

## 更新 2

看来 FormsAuthentication 真的坏了。如果在对用户进行身份验证时在 cookie 上使用显式域名，请等待会话超时，然后刷新页面，FormsAuthentication 使用的生成 cookie 的方法会导致域为 null，从而导致浏览器分配一个无点域。

它需要预先为表单分配一个域才能将其分配给 cookie，这会破坏多租户系统......

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-01T08:36:39.317

@WilliamBZA 的建议帮助解决了最初的问题，但随后导致 cookie 创建隐式域 cookie 的注销/会话超时错误使我得出结论，解决方案是......

***不要在 .NET 中使用显式 cookie ...永远***

问题太多了，肯定可以通过在表单/域、Cookie/域等上显式来解决。确保在任何地方都使用正确的域。但是，如果您的应用程序托管多个域或者是多租户，那么它就变得太成问题了。

吸取了教训。不要使用显式 cookie。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-26T08:03:00.697

无法帮助*解释为什么*对 cookie 进行不同处理，但快速解决方法是为每个子应用程序使用不同的 cookie 名称，而不是使用 cookie 的域。

在表单身份验证的情况下，更改 ASPXAUTH cookie 的名称。

# c# - 更改不透明度时未重绘窗口

> ID：10751814
> 
> 赞同：2
> 
> 时间：2012-05-25T09:25:44.770
> 
> 标签：c#, wpf, xaml

我一直在尝试创建一个通知窗口，但我正在努力弄清楚为什么在我运行它时没有发生这种不透明度变化。相反，窗口将保持一秒钟然后关闭而没有任何可见的变化。我通过其他方法进行的所有其他尝试也都失败了，所以它一定是我缺少的一些属性。谢谢你的帮助！

```
 public void RunForm(string error, MessageBoxIcon icon, int duration)
    {
        lblMessage.Text = error;
        Icon i = ToSystemIcon(icon);
        if (i != null)
        {
            BitmapSource bs = System.Windows.Interop.Imaging.CreateBitmapSourceFromHIcon(i.Handle, Int32Rect.Empty, BitmapSizeOptions.FromEmptyOptions());
            imgIcon.Source = bs;
        }
        this.WindowStartupLocation = WindowStartupLocation.Manual;
        this.Show();
        this.Left = System.Windows.Forms.Screen.PrimaryScreen.WorkingArea.Right - this.RestoreBounds.Width - 20;
        this.Top = System.Windows.Forms.Screen.PrimaryScreen.WorkingArea.Bottom - this.RestoreBounds.Height - 20;
        while (this.Opacity > 0)
        {
            this.Opacity -= 0.05;
            Thread.Sleep(50);
        }
        this.Close();
    }

<Window Width="225" Height="140" VerticalContentAlignment="Center" HorizontalAlignment="Center" ShowActivated="True" ShowInTaskbar="False"
ResizeMode="NoResize" Grid.IsSharedSizeScope="False" SizeToContent="Height" WindowStyle="None" BorderBrush="Gray" 
BorderThickness="1.5" Background="White" Topmost="True" AllowsTransparency="True" Opacity="1">
<Grid Height="Auto" Name="grdNotificationBox" >
    <Image Margin="12,12,0,0" Name="imgIcon" Stretch="Fill" HorizontalAlignment="Left" Width="32" Height="29" VerticalAlignment="Top" />
    <TextBlock Name="lblMessage" TextWrapping="Wrap" Margin="57,11,17,11"></TextBlock>
</Grid> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T09:34:15.930

这是行不通的：完整的 WPF 处理是在一个线程中完成的（技术上是两个，但并不重要）。您更改不透明度并直接让ui线程休眠，再次更改并将其送回休眠状态。ui 线程从来没有时间来处理你所做的事情。即使删除睡眠也无济于事，因为它会快得多，而且 ui 线程也无法处理任何请求。重要的是要了解您的代码和 WPF 处理是在同一个线程中完成的，您需要的时间越长，WPF 获得的时间就越少，反之亦然。

要解决它，您需要使用[动画](http://msdn.microsoft.com/en-us/library/ms752312.aspx)。他们正是为了这类事情。签出这个[线程](https://stackoverflow.com/questions/5958508/fading-out-a-window)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T09:35:01.630

您基本上是在阻止 UI 线程在`while loop`. 使用计时器或更合适地使用[后台工作线程来执行此操作。](http://msdn.microsoft.com/en-us/library/cc221403%28v=vs.95%29.aspx)

编辑：正如**dowhilefor**指出的那样，您可以为此目的使用 WPF 动画。[这篇文章](http://tarundotnet.wordpress.com/2011/03/18/wpf-tutorial-change-opacity-using-animation/)在这里详细讨论了这一点。

```
DoubleAnimation da = new DoubleAnimation();
da.From = 1;
da.To = 0;
da.Duration = new Duration(TimeSpan.FromSeconds(2));
da.AutoReverse = true;
da.RepeatBehavior = RepeatBehavior.Forever;
rectangle1.BeginAnimation(OpacityProperty, da); 
```

# linux - 在 ubuntu 中自动启动应用程序

> ID：10751821
> 
> 赞同：2
> 
> 时间：2012-05-25T09:25:59.547
> 
> 标签：linux, embedded, ubuntu-10.04, init, rc

我创建了脚本文件 -

```
#!/bin/sh
echo "my application is here"
./helloworld  # helloworld is our application 
```

1.  创建脚本文件后，我将其复制到`init.d`
2.  我给出了命令`chmod +x /etc/init.d/vcc_app` （vcc_app 是我创建的脚本的名称）
3.  然后我给了命令`ln -s /etc/init.d/vcc_app /etc/rc.d/vcc_app`（rc.d是运行级目录）

但是当我重新启动板时，我的应用程序不会自动执行。谁能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T09:34:56.747

`/etc/init.d`需要[符合 LSB 的](http://wiki.debian.org/LSBInitScripts)脚本。

如果您只是想在引导过程结束时自动运行命令，请尝试将它们放入`/etc/rc.local`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T09:55:51.743

并非所有 linux 系统都使用相同的`init`守护进程（ubuntu 使用 upstart：[http](http://upstart.ubuntu.com/getting-started.html) ://upstart.ubuntu.com/getting-started.html ），但它们都在脚本中使用`start`和函数。`stop`其他常见功能是`status`and `restart`，但同样，没有真正的全面标准。例如：

```
!#/bin/sh

start () {
    echo "application started";
    ./helloworld  # you should use an absolute path here instead of ./
}

stop () {

}

case "$1" in
    start)
        start
        ;;
    stop)
        stop
        ;;
    *)
        echo "Usage start|stop";
esac

exit $? 
```

最后一位是基于第一个命令行参数的开关，因为 init 将调用脚本`myrcscript start`。

为了使用`stop()`（也经常有用`restart()`），您需要保留或能够获取由`start()`;启动的进程的 pid 有时这是通过 /tmp 中的一个小“pid 文件”（包含 pid 的文本文件，例如，在 start() 中创建的*/tmp/myscript.pid ）完成的。*

Ubuntu 上使用的“upstart”初始化守护进程有其自己的特定功能，但除非您需要使用它们，否则只需将其停止/启动保持在最低限度，它就会（可能）在任何地方工作。

# javascript - 如何分析网页上的负载？

> ID：10751824
> 
> 赞同：1
> 
> 时间：2012-05-25T09:26:09.953
> 
> 标签：javascript, html, debugging

我碰巧创建了一个页面来显示博客文章。每个博客条目都有通常的“Facebook like”、“tweet this post”和“+1”。还有一些额外的 JS 用于其他功能，可能还有一些我不知道的脚本在后台运行。

不幸的是，该页面会产生非常沉重的 CPU 负载，对 UX 产生负面影响。

我假设一些在后台运行的 JS 是原因。

您是否推荐任何解决方案来分析此类问题？理想情况下，我想要一个浏览器的“任务管理器”，在那里我可以看到是什么产生了繁重的 CPU 负载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T09:30:12.350

您可以使用 Chrome 任务管理器，它会显示您想要的所有统计信息。或者在 chrome://system/ 访问内存使用情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T09:31:41.723

你需要使用[http://www.fiddler2.com/fiddler2/](http://www.fiddler2.com/fiddler2/)来分析它。如果调用网页并在提琴手中检查您的网页如何执行，它会告诉您哪些 javascript ，哪些图像加载需要时间，这将非常有帮助。这适用于任何浏览器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T09:40:48.273

您可以使用 firebug 来分析不同资源的负载。你也可以使用

关于：记忆

或者试试

关于：关于

看看你可以用什么'about：'命令来分析你的问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T09:43:22.517

您可以使用`YSLOW`（chrome 扩展）更好地了解您的网站

# ios - 苹果推送通知反馈服务 - 我无法从反馈服务中获得任何信息

> ID：10751827
> 
> 赞同：2
> 
> 时间：2012-05-25T09:26:31.023
> 
> 标签：ios, push, feedback

当我连接到反馈服务时，它可以成功连接，但我从反馈服务中什么也得不到。

我已经从我的设备上卸载了该应用程序，然后再次推送，然后连接到反馈服务，但我仍然一无所获，即使是第二天。

任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T14:59:16.650

> 如果您从您的设备或计算机中删除您的应用程序，然后向其发送推送通知，您会期望设备令牌被拒绝，并且无效的设备令牌应该出现在反馈服务上。但是，如果这是设备或计算机上最后一个启用推送的应用程序，它将不会显示在反馈服务中。这是因为删除最后一个应用程序会在发送删除通知之前断开与推送服务的持久连接。
> 
> 您可以通过在设备或计算机上保留至少一个支持推送的应用程序来解决此问题，以保持持久连接。要保持与生产环境的持久连接，只需从 App Store 安装任何支持推送的免费应用程序，然后您应该能够删除您的应用程序并看到它出现在反馈服务中。
> 
> 回想一下，每个推送环境都有自己的持久连接。因此，要保持与沙盒环境的持久连接，请安装另一个支持开发推送的应用程序。

资料来源：[Apple 文档](http://developer.apple.com/library/ios/#technotes/tn2265/_index.html)

因此，只需在卸载您自己的应用程序后从应用程序商店安装任何支持推送的应用程序，您的 devicetoken 应该由反馈服务触发。

注意您使用的证书和环境（沙盒/生产）。另请记住，反馈服务仅列出您上次推送的失败交付尝试。

# jquery - jquery：如何隐藏和显示

> ID：10751833
> 
> 赞同：0
> 
> 时间：2012-05-25T09:26:55.270
> 
> 标签：jquery

我想`<p>`在鼠标悬停时隐藏和显示标签，但我的代码只能隐藏`p`标签而不再显示，为什么？

```
<html>
  <head>
<script type="text/javascript" src="jquery.js"></script>
<script>
  $(function(){
    $("#mouse").mouseover(function(){
      if($(this).is(':hidden')){
        $(this).show("normal");
      }
      else{
       $(this).hide("slow"); 
      }
    });
  });
</script>
  </head>
  <body bgcolor="white">
   <p id="mouse">
     test
   </p>
 </body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T09:29:13.607

因为在隐藏的 p 上不会有 mouseover 事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T09:48:57.940

当元素被隐藏时，您不能使用任何事件。如果你不隐藏“p”而只隐藏“p”中的元素会更好。

**例子**

```
<script>
$(document).ready(function() {
  $(".hidden").hover(function () {
     $(".hidden span").toggle();
  });
});
</script>

<p class='hidden'>please hover<span> Hide this text </span></p> 
```

# c# - 自定义配置文件提供程序：未找到设置属性“”-MVC3

> ID：10751834
> 
> 赞同：3
> 
> 时间：2012-05-25T09:26:56.127
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

我在尝试编辑/更新用户资料时遇到了这个问题。本质上，当用户注册时，他们将布尔调用“AuthorizedTeamMember”设置为 false。然后，他们的团队经理可以将其设置为 true 以授权用户。

但是，当单击“授权”按钮授权用户时，我收到以下错误：

```
The settings property 'AuthorizedTeamMember' was not found. 
```

我环顾四周寻找解决方案，但似乎没有任何效果。在点击 HttpPost 上的“AuthorizePlayer”方法之前似乎出错了。

**无论如何，这是我的自定义配置文件提供程序：**

```
namespace iConfirm.Models
{
    public class TeamPlayer : ProfileBase
    {
        [Display(Name = "First Name")]
        public virtual string FirstName
        {
            get
            {
                return (this.GetPropertyValue("FirstName").ToString());
            }
            set
            {
                this.SetPropertyValue("FirstName", value);
            }
        }

        [Display(Name = "Last Name")]
        public virtual string LastName
        {
            get
            {
                return (this.GetPropertyValue("LastName").ToString());
            }
            set
            {
                this.SetPropertyValue("LastName", value);
            }
        }
        [Display(Name = "Date Of Birth")]
        public virtual string DateOfBirth 
        {
            get
            {
                return (this.GetPropertyValue("DateOfBirth").ToString());
            }
            set
            {
                this.SetPropertyValue("DateOfBirth", value);
            }
        }
        [Display(Name = "Phone Number")]
        public virtual string PhoneNumber
        {
            get
            {
                return (this.GetPropertyValue("PhoneNumber").ToString());
            }
            set
            {
                this.SetPropertyValue("PhoneNumber", value);
            }
        }
        public virtual string TeamId
        {
            get
            {
                return (this.GetPropertyValue("TeamId").ToString());
            }
            set
            {
                this.SetPropertyValue("TeamId", value);
            }
        }
        public virtual bool AuthorizedTeamMember
        {
            get
            {
                return (bool)base["AuthorizedTeamMember"]; //<-- Errors here on post
            }
            set
            {
                base["AuthorizedTeamMember"] = value;
            }
        }
        public static TeamPlayer GetProfile(string username)
        {
            return Create(username) as TeamPlayer;
        }

        public static List<TeamPlayer> GetProfilesByTeam(int teamId)
        {
            //var profileList = ProfileManager.GetAllProfiles(ProfileAuthenticationOption.All);
            var profilesInTeam = Membership.GetAllUsers().Cast<MembershipUser>()
            .Select(user => TeamPlayer.Create(user.UserName, true) as TeamPlayer)
            .Where(profile => profile.GetPropertyValue("TeamId").ToString().Equals(teamId.ToString()))
            .ToList();

            return profilesInTeam;

        }
    }
} 
```

**这是授权用户的代码：**

```
 [HttpPost]
        public ActionResult AuthorizePlayer(TeamPlayer teamPlayer)
        {
            teamPlayer.AuthorizedTeamMember = true;
            var user = TeamPlayer.GetProfile(teamPlayer.UserName);
                user.FirstName = teamPlayer.FirstName; 
                user.LastName = teamPlayer.LastName;
                user.AuthorizedTeamMember = teamPlayer.AuthorizedTeamMember;
                user.DateOfBirth = teamPlayer.DateOfBirth;
                user.PhoneNumber = teamPlayer.PhoneNumber;
                user.Save();
            /*TeamPlayer _teamPlayer = TeamPlayer.Create(teamPlayer.UserName) as TeamPlayer;
            //var tempProfile = TeamPlayer.Create(teamPlayer.UserName) as TeamPlayer;
            _teamPlayer.AuthorizedTeamMember = true;
            _teamPlayer.Save();
            //Email user that they have been authorized*/
            return View("Index");
        } 
```

**最后是视图：**

```
@model iConfirm.Models.TeamPlayer
@{
    ViewBag.Title = "AuthorizePlayer";
    MembershipUser user = Membership.GetUser(Model.UserName);
}

<h2>AuthorizePlayer</h2>
@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)

    <fieldset>
        <legend>Authorize the following user?</legend>
        @Html.HiddenFor(model => model.AuthorizedTeamMember)
        <div class="display-label">
            Username
        </div>
        <div class="display-field">
            @Html.DisplayFor(model => model.UserName)
        </div>
        <div class="display-label">
            Full Name
        </div>
        <div class="display-field">
            @Html.DisplayFor(model => model.FirstName) @Html.DisplayFor(model => model.LastName)
        </div>
        <div class="display-label">
            Email
        </div>
        <div class="display-field">
            @user.Email
        </div>
        <div class="display-label">
            Telephone number
        </div>
        <div class="display-field">
            @Html.DisplayFor(model => model.PhoneNumber)
        </div>
        <div class="display-label">
            Date of Birth
        </div>
        <div class="display-field">
            @Html.DisplayFor(model => model.DateOfBirth)
        </div>

        <p>
            <input type="submit" value="Authorize" />
        </p>
    </fieldset>
} 
```

任何帮助将不胜感激。

亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T01:06:50.123

可能会遗漏一些东西，但你使用有什么原因吗

this.SetPropertyValue()

对于除 base["AuthorizedTeamMember"] = value 之外的所有属性；

# android - 如何在 ListActivity 中有键值对而不是数组元素？

> ID：10751836
> 
> 赞同：0
> 
> 时间：2012-05-25T09:27:04.957
> 
> 标签：android, android-listview

我有一份物品清单及其相应的价格。我想在 ListActivity 中显示这些项目（以及右侧的价格）。我们应该怎么做？到目前为止，我刚刚使用了传递给适配器的简单数组。我希望将索引数据结构传递给适配器，因为我还需要对价格进行排序，然后在 ListView 中显示它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T09:35:31.470

您必须自定义列表，而不是使用 Android 提供的默认列表。如果您需要任何帮助，请与我联系。

# java - 将 db2 表导出到 xml 文件并从 xml 读取并更新表

> ID：10751839
> 
> 赞同：0
> 
> 时间：2012-05-25T09:27:24.457
> 
> 标签：java, xml

我正在做一个项目，我们需要通过 xml 迁移数据。我不知道该怎么做，有人可以给我一些建议或指导我一些教程或书籍。这些表也有一对多和多对多的关系。我们可以为每个表创建一个单独的 xml，因为单个 xml 变得太大。我们正在使用 Db2。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T09:34:38.743

要在数据库中读取/写入日期，您需要使用 JDBC：[http ://docs.oracle.com/javase/tutorial/jdbc/basics/](http://docs.oracle.com/javase/tutorial/jdbc/basics/)

通常使用 XML JAXB 库来工作：http: [//jaxb.java.net/tutorial/](http://jaxb.java.net/tutorial/)

要读取/写入文件，请使用 Java IO：[http ://tutorials.jenkov.com/java-io/index.html](http://tutorials.jenkov.com/java-io/index.html)

# javascript - 将objective-c对象发送给js？

> ID：10751842
> 
> 赞同：0
> 
> 时间：2012-05-25T09:27:35.830
> 
> 标签：javascript, html, objective-c, ios, webkit

我实际上正在做一个带有 html 和 js 的 UIWebview。一个用安卓做同样事情的朋友

我的问题是，在 android 上，有一种方法可以将一个 Android 对象发送到 javascript 并在其中轻松使用它

但是有没有办法在 iOS 中做同样的事情？

我尝试使用 windowScriptObject 但它在 iphone 上不可用。我还尝试将所有数据逐个发送

```
stringByEvaluatingJavaScriptFromString 
```

但这有点难看：/

还有其他解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T09:54:35.723

[如果您使用 Webkit ，](https://developer.apple.com/library/mac/#documentation/AppleApplications/Conceptual/SafariJSProgTopics/Tasks/ObjCFromJavaScript.html#//apple_ref/doc/uid/30001215-BBCBFJCD)您可以做到这一点。[从 Objective-C 程序中使用 WebKit](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DisplayWebContent/DisplayWebContent.html#//apple_ref/doc/uid/10000164-SW1)的文档在这里

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T14:11:05.193

在 iOS 上，唯一的方法是使用 stringByEvaluatinfJavaScriptFromString。

但是为什么要一一调用数据呢？将它们打包到您自己的数据结构中，或者使用 Jason 是一种将数据传递给 Javascript 的简单而自然的方法。

# ios - 无法计算到注释的距离

> ID：10751851
> 
> 赞同：0
> 
> 时间：2012-05-25T09:28:12.213
> 
> 标签：ios, xcode, distance

尝试计算到注释的距离，但由于某种原因无法获得注释坐标。我从`plist`.

```
CLLocationCoordinate2D annocoord = myAnnotation.coordinate;
        CLLocationCoordinate2D usercoord = self.mapView.userLocation.coordinate;

        NSLog(@"ANNO  = %f, %f", annocoord.latitude, annocoord.longitude);
        NSLog(@"USER = %f, %f", usercoord.latitude, usercoord.longitude);

        CLLocation *loc = [[CLLocation alloc] initWithLatitude:myAnnotation.coordinate.latitude longitude:myAnnotation.coordinate.longitude];
        CLLocation *loc2 = [[CLLocation alloc] initWithLatitude:self.mapView.userLocation.coordinate.latitude longitude:self.mapView.userLocation.coordinate.longitude];

        NSLog(@"LOC  = %f, %f", loc.coordinate.latitude,  loc.coordinate.longitude);
        NSLog(@"LOC2 = %f, %f", loc2.coordinate.latitude, loc2.coordinate.longitude);

        CLLocationDistance dist = [loc distanceFromLocation:loc2];

        NSLog(@"DIST: %f", dist); 
```

日志：

```
ANNO  = 0.000000, 0.000000
USER = 60.492631, 22.258933
LOC  = 0.000000, 0.000000
LOC2 = 60.492631, 22.258933
DIST: 6999960.693412 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T09:40:41.173

```
-(CGFloat)distanceBetweenTwoPoints:(CGPoint)firstP secondPoint:(CGPoint)secondP{

    CGFloat distance = sqrtf(powf((secondP.y - firstP.y), 2.0) + powf((secondP.x - firstP.x), 2.0));

    return distance;

} 
```

使用此代码查找两点之间的距离。

# android - getFocus() 在 EditTexts 上的奇怪行为

> ID：10751856
> 
> 赞同：0
> 
> 时间：2012-05-25T09:28:28.340
> 
> 标签：android, focus, android-edittext

所以我有三个 EditText- 框，当用户在其中一个中按 Enter 键时，我想继续下一个。

我试过：

```
final EditText email = (EditText) findViewById(R.id.editText1);
email.setOnKeyListener(new OnKeyListener() {
    public boolean onKey(View v, int keyCode, KeyEvent event) {

        if ((event.getAction() == KeyEvent.ACTION_DOWN) &&
            (keyCode == KeyEvent.KEYCODE_ENTER)) {

            findViewById(R.id.editText2).requestFocus();
          return true;
        }
        return false;
    }
});

final EditText pass = (EditText) findViewById(R.id.editText2);
pass.setOnKeyListener(new OnKeyListener() {
    public boolean onKey(View v, int keyCode, KeyEvent event) {

        if ((event.getAction() == KeyEvent.ACTION_DOWN) &&
            (keyCode == KeyEvent.KEYCODE_ENTER)) {

            findViewById(R.id.editText3).requestFocus();
          return true;
        }
        return false;
    }
});

final EditText passrep = (EditText) findViewById(R.id.editText3);
passrep.setOnKeyListener(new OnKeyListener() {
    public boolean onKey(View v, int keyCode, KeyEvent event) {

        if ((event.getAction() == KeyEvent.ACTION_DOWN) &&
            (keyCode == KeyEvent.KEYCODE_ENTER)) {

            findViewById(R.id.button1).requestFocus();
          return true;
        }
        return false;
    }
}); 
```

但是使用此代码，焦点会在键盘输入时从 editText1 跳转到 editText3。

这是什么有效的（我偶然发现的）：

```
final EditText email = (EditText) findViewById(R.id.editText1);
email.setOnKeyListener(new OnKeyListener() {
    public boolean onKey(View v, int keyCode, KeyEvent event) {

        if ((event.getAction() == KeyEvent.ACTION_DOWN) &&
            (keyCode == KeyEvent.KEYCODE_ENTER)) {

            findViewById(R.id.editText2).requestFocus();
          return true;
        }
        return false;
    }
});

final EditText pass = (EditText) findViewById(R.id.editText2);
email.setOnKeyListener(new OnKeyListener() {
    public boolean onKey(View v, int keyCode, KeyEvent event) {

        if ((event.getAction() == KeyEvent.ACTION_DOWN) &&
            (keyCode == KeyEvent.KEYCODE_ENTER)) {

            findViewById(R.id.editText3).requestFocus();
          return true;
        }
        return false;
    }
});

final EditText passrep = (EditText) findViewById(R.id.editText3);
email.setOnKeyListener(new OnKeyListener() {
    public boolean onKey(View v, int keyCode, KeyEvent event) {

        if ((event.getAction() == KeyEvent.ACTION_DOWN) &&
            (keyCode == KeyEvent.KEYCODE_ENTER)) {

            findViewById(R.id.button1).requestFocus();
          return true;
        }
        return false;
    }
}); 
```

例如，为同一个 EditText（电子邮件）设置三个不同的 OnKeyListener。

我在这里想念什么？这是我的布局：

```
<EditText
    android:id="@+id/editText1"
    android:layout_width="234dp"
    android:layout_height="wrap_content"
    android:layout_gravity="center_horizontal"
    android:ems="10"
    android:inputType="textEmailAddress"
    android:layout_marginTop="20dp"
    android:hint="Email" >

</EditText>

<EditText
    android:id="@+id/editText2"
    android:layout_width="234dp"
    android:layout_height="wrap_content"
    android:layout_gravity="center_horizontal"
    android:ems="10"
    android:inputType="textPassword"
    android:layout_marginTop="20dp"
    android:hint="Password" />

<EditText
    android:id="@+id/editText3"
    android:layout_width="234dp"
    android:layout_height="wrap_content"
    android:layout_gravity="center_horizontal"
    android:ems="10"
    android:inputType="textPassword"
    android:layout_marginTop="20dp"
    android:hint="Confirm Password" />

<Button
    android:id="@+id/button1"
    android:layout_width="123dp"
    android:layout_height="wrap_content"
    android:layout_gravity="center_horizontal"
    android:layout_marginTop="35dp"
    android:text="@string/submit" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T09:33:43.657

实际上这里发生的事情是你所有的`EditText`人一直在监听关键事件**，**无论他们是否处于焦点

您需要使用`OnEditorActionListener`Done/Enter/Go/Search 键

```
editText.setOnEditorActionListener(new OnEditorActionListener() {        
    @Override
    public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
        if(actionId==EditorInfo.IME_ACTION_DONE){
            //do something
        }
    return false;
    }
}); 
```

# android - WAP 应用示例

> ID：10751865
> 
> 赞同：0
> 
> 时间：2012-05-25T09:29:00.463
> 
> 标签：android

也许这是一个愚蠢的问题.. 但是，Android 上的谷歌地图应用程序是 WAP 应用程序的一个例子吗？任何人都可以给我提供 WAP 应用程序的例子吗？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T09:40:48.690

看起来[WAP](http://en.wikipedia.org/wiki/Wireless_Application_Protocol)是移动电话和移动电信的标准协议。

android 应用程序不依赖于特定的标准或协议。它只是使用安卓手机提供的连接。此连接可以是[3G](http://en.wikipedia.org/wiki/3G)连接或 Wifi 连接。（或 WAP 连接，但此标准已过时）

总而言之，谷歌地图使用连接来获取本地化数据等。但谷歌地图应用程序并不“了解”该连接的特征。它只是通过某种包装器使用任何可用的连接。

# c - 汉字UTF-8宽度显示问题

> ID：10751867
> 
> 赞同：5
> 
> 时间：2012-05-25T09:29:11.147
> 
> 标签：c, perl, unicode, utf-8, vertical-alignment

当我对某些数据使用 Perl 或 C 时`printf`，我尝试了它们的格式来控制每列的​​宽度，比如

```
printf("%-30s", str); 
```

但是当 str 包含汉字时，该列未按预期对齐。见附件图片。

我的ubuntu的charset编码是zh_CN.utf8，据我所知，utf-8编码有1~4个字节长度。汉字有3个字节。在我的测试中，我发现 printf 的格式控制将一个汉字计数为 3，但它实际上显示为 2 ascii 宽度。

所以真正的显示宽度并不是想象中的一个常数，而是一个与汉字个数有关的变量，即

```
Sw(x) = 1 * (w - 3x) + 2 * x = w - x 
```

w 是预期的宽度限制，x 是汉字的个数，Sw(x) 是实际显示宽度。

所以str包含的汉字越多，显示的越短。

我怎样才能得到我想要的？数printf前的汉字？

据我所知，我猜的所有中文甚至所有宽字符都显示为2宽度，那么为什么printf将其计为3？UTF-8 的编码与显示长度无关。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-26T07:37:53.450

是的，这是`printf`我所知道的所有版本的问题。[我在这个答案](https://stackoverflow.com/a/7072795/471272)和这个答案中简要讨论了[这个](https://stackoverflow.com/a/7372126/471272)问题。

对于 C，我不知道有哪个库可以为您执行此操作，但如果有人拥有它，那就是 ICU。

对于 Perl，您必须使用 CPAN 中的[Unicode::GCString](http://search.cpan.org/perldoc?Unicode%3a%3aGCString)模块来计算 Unicode 字符串将占用的打印列数。这考虑了[Unicode 标准附件 #11：东亚宽度](http://unicode.org/reports/tr11/)。

例如，一些代码点占用 1 列，而其他代码点占用 2 列。甚至有些根本不占用列，例如组合字符和不可见的控制字符。该类有一个`columns`方法可以返回字符串占用的列数。

我有一个使用它来垂直对齐 Unicode 文本的[示例](http://training.perl.com/scripts/perlunicook.html#PROGRAM:-Demo-of-Unicode-collation-and-printing)。它将对一堆 Unicode 字符串进行排序，包括一些具有组合字符和“宽”亚洲表意文字（CJK 字符）的字符串，并允许您垂直对齐。

![样本终端输出](../Images/c180142eb72fe8db7a65a176f4b576a7.png)

`umenu`下面包含打印对齐输出的小演示程序的代码。

您可能还对雄心勃勃的[Unicode::LineBreak](http://search.cpan.org/perldoc?Unicode%3a%3aLineBreak)模块感兴趣，前面提到的`Unicode::GCString`类只是其中一个较小的组件。这个模块更酷，并考虑了[Unicode 标准附件 #14：Unicode 换行算法](http://unicode.org/reports/tr14/)。

这是小`umenu`演示的代码，在 Perl v5.14 上测试：

```
 #!/usr/bin/env perl
 # umenu - demo sorting and printing of Unicode food
 #
 # (obligatory and increasingly long preamble)
 #
 use utf8;
 use v5.14;                       # for locale sorting
 use strict;
 use warnings;
 use warnings  qw(FATAL utf8);    # fatalize encoding faults
 use open      qw(:std :utf8);    # undeclared streams in UTF-8
 use charnames qw(:full :short);  # unneeded in v5.16

 # std modules
 use Unicode::Normalize;          # std perl distro as of v5.8
 use List::Util qw(max);          # std perl distro as of v5.10
 use Unicode::Collate::Locale;    # std perl distro as of v5.14

 # cpan modules
 use Unicode::GCString;           # from CPAN

 # forward defs
 sub pad($$$);
 sub colwidth(_);
 sub entitle(_);

 my %price = (
     "γύρος"             => 6.50, # gyros, Greek
     "pears"             => 2.00, # like um, pears
     "linguiça"          => 7.00, # spicy sausage, Portuguese
     "xoriço"            => 3.00, # chorizo sausage, Catalan
     "hamburger"         => 6.00, # burgermeister meisterburger
     "éclair"            => 1.60, # dessert, French
     "smørbrød"          => 5.75, # sandwiches, Norwegian
     "spätzle"           => 5.50, # Bayerisch noodles, little sparrows
     "包子"              => 7.50, # bao1 zi5, steamed pork buns, Mandarin
     "jamón serrano"     => 4.45, # country ham, Spanish
     "pêches"            => 2.25, # peaches, French
     "シュークリーム"    => 1.85, # cream-filled pastry like éclair, Japanese
     "막걸리"            => 4.00, # makgeolli, Korean rice wine
     "寿司"              => 9.99, # sushi, Japanese
     "おもち"            => 2.65, # omochi, rice cakes, Japanese
     "crème brûlée"      => 2.00, # tasty broiled cream, French
     "fideuà"            => 4.20, # more noodles, Valencian (Catalan=fideuada)
     "pâté"              => 4.15, # gooseliver paste, French
     "お好み焼き"        => 8.00, # okonomiyaki, Japanese
 );

 my $width = 5 + max map { colwidth } keys %price;

 # So the Asian stuff comes out in an order that someone
 # who reads those scripts won't freak out over; the
 # CJK stuff will be in JIS X 0208 order that way.
 my $coll  = new Unicode::Collate::Locale locale => "ja";

 for my $item ($coll->sort(keys %price)) {
     print pad(entitle($item), $width, ".");
     printf " €%.2f\n", $price{$item};
 }

 sub pad($$$) {
     my($str, $width, $padchar) = @_;
     return $str . ($padchar x ($width - colwidth($str)));
 }

 sub colwidth(_) {
     my($str) = @_;
     return Unicode::GCString->new($str)->columns;
 }

 sub entitle(_) {
     my($str) = @_;
     $str =~ s{ (?=\pL)(\S)     (\S*) }
              { ucfirst($1) . lc($2)  }xge;
     return $str;
 } 
```

如您所见，使其在该特定程序中工作的关键是这行代码，它只调用上面定义的其他函数，并使用我正在讨论的模块：

```
print pad(entitle($item), $width, "."); 
```

这将使用点作为填充字符将项目填充到给定的宽度。

是的，它不那么方便`printf`，但至少是可能的。

# sql-server - CTE 的 T-SQL 性能不佳

> ID：10751875
> 
> 赞同：17
> 
> 时间：2012-05-25T09:29:24.643
> 
> 标签：sql-server, performance, tsql, common-table-expression

我有一个关于 SQL Server 中公用表表达式的性能问题。在我们的开发团队中，我们在构建查询时使用了很多链式 CTE。我目前正在处理一个性能很差的查询。但是我发现如果我在链的中间将所有记录插入到该 CTE 的临时表中，然后继续但从该临时表中进行选择，我会显着提高性能。现在我想获得一些帮助，以了解这种类型的更改是否仅适用于此特定查询，以及为什么您将在下面看到的两种情况在性能上存在如此大的差异。或者我们是否可能在我们的团队中过度使用 CTE，我们是否可以通过从这个案例中学习来获得普遍的绩效？

请尝试向我解释这里到底发生了什么......

代码已完成，您将能够在 SQL Server 2008 和可能的 2005 上运行它。一部分被注释掉了，我的想法是你可以通过注释掉一个或另一个来切换这两种情况。你可以看到在哪里放置你的块评论，我已经用`--block comment here`和标记了这些地方`--end block comment here`

未注释的默认情况是性能缓慢的情况。给你：

```
--Declare tables to use in example.
CREATE TABLE #Preparation 
(
    Date DATETIME NOT NULL
    ,Hour INT NOT NULL
    ,Sales NUMERIC(9,2)
    ,Items INT
);

CREATE TABLE #Calendar
(
    Date DATETIME NOT NULL
)

CREATE TABLE #OpenHours
(
    Day INT NOT NULL,
    OpenFrom TIME NOT NULL,
    OpenTo TIME NOT NULL
);

--Fill tables with sample data.
INSERT INTO #OpenHours (Day, OpenFrom, OpenTo)
VALUES
    (1, '10:00', '20:00'),
    (2, '10:00', '20:00'),
    (3, '10:00', '20:00'),
    (4, '10:00', '20:00'),
    (5, '10:00', '20:00'),
    (6, '10:00', '20:00'),
    (7, '10:00', '20:00')

DECLARE @CounterDay INT = 0, @CounterHour INT = 0, @Sales NUMERIC(9, 2), @Items INT;

WHILE @CounterDay < 365
BEGIN
    SET @CounterHour = 0;
    WHILE @CounterHour < 5
    BEGIN
        SET @Items = CAST(RAND() * 100 AS INT);
        SET @Sales = CAST(RAND() * 1000 AS NUMERIC(9, 2));
        IF @Items % 2 = 0
        BEGIN
            SET @Items = NULL;
            SET @Sales = NULL;
        END

        INSERT INTO #Preparation (Date, Hour, Items, Sales)
        VALUES (DATEADD(DAY, @CounterDay, '2011-01-01'), @CounterHour + 13, @Items, @Sales);

        SET @CounterHour += 1;
    END
    INSERT INTO #Calendar (Date) VALUES (DATEADD(DAY, @CounterDay, '2011-01-01'));
    SET @CounterDay += 1;
END

--Here the query starts.
;WITH P AS (
    SELECT DATEADD(HOUR, Hour, Date) AS Hour
        ,Sales
        ,Items
    FROM #Preparation
),
O AS (
        SELECT DISTINCT DATEADD(HOUR, SV.number, C.Date) AS Hour
        FROM #OpenHours AS O
            JOIN #Calendar AS C ON O.Day = DATEPART(WEEKDAY, C.Date)
            JOIN master.dbo.spt_values AS SV ON SV.number BETWEEN DATEPART(HOUR, O.OpenFrom) AND DATEPART(HOUR, O.OpenTo)
),
S AS (
    SELECT O.Hour, P.Sales, P.Items
    FROM O
        LEFT JOIN P ON P.Hour = O.Hour
)

--block comment here case 1 (slow performing)
--With this technique it takes about 34 seconds.
,N AS (
        SELECT  
            A.Hour
            ,A.Sales AS SalesOrg
            ,CASE WHEN COALESCE(B.Sales, C.Sales, 1) < 0
                THEN 0 ELSE COALESCE(B.Sales, C.Sales, 1) END AS Sales
            ,A.Items AS ItemsOrg
            ,COALESCE(B.Items, C.Items, 1) AS Items
        FROM S AS A
        OUTER APPLY (SELECT TOP 1 *
                     FROM S
                     WHERE Hour <= A.Hour
                        AND Sales IS NOT NULL
                        AND DATEDIFF(DAY, Hour, A.Hour) = 0                      
                     ORDER BY Hour DESC) B
        OUTER APPLY (SELECT TOP 1 *
                     FROM S
                     WHERE Sales IS NOT NULL
                        AND DATEDIFF(DAY, Hour, A.Hour) = 0
                     ORDER BY Hour) C
    )
--end block comment here case 1 (slow performing)

/*--block comment here case 2 (fast performing)
--With this technique it takes about 2 seconds.
SELECT * INTO #tmpS FROM S;

WITH
N AS (
        SELECT  
            A.Hour
            ,A.Sales AS SalesOrg
            ,CASE WHEN COALESCE(B.Sales, C.Sales, 1) < 0
                THEN 0 ELSE COALESCE(B.Sales, C.Sales, 1) END AS Sales
            ,A.Items AS ItemsOrg
            ,COALESCE(B.Items, C.Items, 1) AS Items
        FROM #tmpS AS A
        OUTER APPLY (SELECT TOP 1 *
                     FROM #tmpS
                     WHERE Hour <= A.Hour
                        AND Sales IS NOT NULL
                        AND DATEDIFF(DAY, Hour, A.Hour) = 0                      
                     ORDER BY Hour DESC) B
        OUTER APPLY (SELECT TOP 1 *
                     FROM #tmpS
                     WHERE Sales IS NOT NULL
                        AND DATEDIFF(DAY, Hour, A.Hour) = 0
                     ORDER BY Hour) C
    )
--end block comment here case 2 (fast performing)*/
SELECT * FROM N ORDER BY Hour

IF OBJECT_ID('tempdb..#tmpS') IS NOT NULL DROP TABLE #tmpS;

DROP TABLE #Preparation;
DROP TABLE #Calendar;
DROP TABLE #OpenHours; 
```

如果您想尝试了解我在最后一步中所做的事情，我在[这里](https://stackoverflow.com/questions/10654508/t-sql-query-update-null-values)有一个关于它的问题。

对我来说，案例 1 大约需要 34 秒，案例 2 大约需要 2 秒。不同之处在于我将 S 的结果存储在案例 2 中的临时表中，在案例 1 中我直接在下一个 CTE 中使用 S。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-25T14:27:21.237

A`CTE`本质上只是一个一次性的视图。它几乎永远不会比将`CTE`代码`FROM`作为表表达式放入子句中更快地进行查询。

在您的示例中，真正的问题是我相信的日期函数。

您的第一个（慢）案例需要为每一行运行日期函数。

对于您的第二种（更快）情况，它们运行一次并存储到表中。

除非您对函数派生字段执行某种逻辑，否则这通常不会那么明显。在您的情况下，您正在执行`ORDER BY`on `Hour`，这非常昂贵。在您的第二个示例中，这是对字段的简单排序，但在第一个示例中，您为每一行运行该函数，然后排序。

**有关 CTE 的更深入阅读**，请参阅[DBA.SE 上的这个问题](https://dba.stackexchange.com/q/13112/1945)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-25T14:09:00.093

CTE 只是语法快捷方式。该 CTE 在连接中运行（并重新运行）。使用#temp，它会被评估一次，然后在连接中重新使用结果。

该文档具有误导性。

[MSDN_CTE](http://msdn.microsoft.com/en-US/library/ms190766%28v=sql.105%29.aspx)

可以将公用表表达式 (CTE) 视为临时结果集。

这篇文章解释得更好

[爸爸文章](http://msdn.microsoft.com/en-us/magazine/cc163346.aspx)

CTE 非常适合这种场景，因为它使 T-SQL 更具可读性（如视图），但它可以在同一批次中紧随其后的查询中多次使用。当然，超出这个范围是不可用的。此外，CTE 是一种语言级别的结构，这意味着 SQL Server 不会在内部创建临时表或虚拟表。每次在紧随其后的查询中引用 CTE 的基础查询时，都会调用它。

看看表值参数

[电视节目](http://msdn.microsoft.com/en-us/library/bb510489.aspx)

它们具有类似#temp 的结构，但没有那么多开销。它们是只读的，但您似乎只需要只读。创建和删除 #temp 会有所不同，但在中低端服务器上它是 0.1 秒的命中，而使用 TVP 基本上没有命中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-10T10:19:17.593

CTE 是一种非常好的语法糖，使查询更具可读性。但是，在大型数据集上，根据我的经验，性能是灾难性的，我不得不根据需要将它们全部替换为具有特定索引的临时表。

例如：

```
SELECT IdBL, LgnBL, chemin, IdBE, IdLot, SUM(CuTrait) AS CuTraitBE
INTO #temp_arbo_of_8_cte
FROM #CoutTraitParBE
GROUP BY IdBL, LgnBL, chemin, IdBE, IdLot;

CREATE NONCLUSTERED INDEX #temp_arbo_of_8_cte_index_1 ON #temp_arbo_of_8_cte(chemin, IdBE, IdLot);

SELECT a.*, CuTraitBE, ROUND(CuTraitBE * QteSortieBE, 3) AS CoutTraitParBE, QteFactParBE*PxVte AS CaParBE
INTO #temp_arbo_of_8
FROM #temp_arbo_of_7 a
LEFT JOIN #temp_arbo_of_8_cte b ON a.chemin=b.chemin AND a.IdBE=b.IdBE AND a.IdLot=b.IdLot;

/*
WITH cte AS (
    SELECT IdBL, LgnBL, chemin, IdBE, IdLot, SUM(CuTrait) AS CuTraitBE 
    FROM #CoutTraitParBE
    GROUP BY IdBL, LgnBL, chemin, IdBE, IdLot
)
SELECT a.*, CuTraitBE, ROUND(CuTraitBE * QteSortieBE, 3) AS CoutTraitParBE, QteFactParBE*PxVte AS CaParBE
INTO #temp_arbo_of_8
FROM #temp_arbo_of_7 a
LEFT JOIN cte b ON a.chemin=b.chemin AND a.IdBE=b.IdBE AND a.IdLot=b.IdLot;
*/ 
```

在 cte 版本中，查询优化器会丢失并生成非常复杂的执行计划。查询将永远运行。Wthout cte 它会在瞬间运行。

所以是的，cte 可能是一个巨大的性能问题！

# php - 在 PHP 中从回显的 XML 响应中解析数据

> ID：10751877
> 
> 赞同：1
> 
> 时间：2012-05-25T09:29:28.043
> 
> 标签：php, xml, web-services, xml-parsing, echo

我正在开发一个 Web 服务集成项目。现在，使用 cURL 方法传递请求并获得 XML 响应。我没有保存 XML 响应文件，而是在我的页面中回显了 XML 响应（认为它会节省服务器响应时间）。现在我在我的页面中得到了这样的 XML 响应，

```
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" >
<SOAP-ENV:Body>
   <CreateShipmentReply xmlns="http://www.parcelforce.net/ws/ship/v5">
     <CompletedShipmentInfo>    
         <Status>ALLOCATED</Status>
      <CompletedShipments>
        <CompletedShipment>
            <ShipmentNumber>MK0030912</ShipmentNumber>
        </CompletedShipment>
      </CompletedShipments>
      <RequestedShipment>
        <DepartmentId>1</DepartmentId>
        <ShipmentType>DELIVERY</ShipmentType>
        <ContractNumber>P664383</ContractNumber>
        <ServiceCode>SUP</ServiceCode>
        <ShippingDate>2012-05-25</ShippingDate>
        <RecipientContact>
           <BusinessName>BUSINESS NAME</BusinessName> 
```

为了将 XML 中的数据保存到我的数据库/表中，我需要从节点中解析它。我有从保存的文件中解析 XML 的代码，但在回显的 XML 响应中找不到相同的解决方案。如何从回显的 XML 响应中读取数据。

需要帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T09:43:36.497

要使用 XML，请使用[DOM](http://ru.php.net/manual/en/book.dom.php) PHP 类。它很容易理解并且非常强大。

只需通过以下方式加载您的响应 XML：

```
$dom = new DOMDocument;

$dom->loadXML($responsestring); 
```

然后你可以通过 DOMDocument 方法做任何你想做的操作 DOM。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T09:39:59.053

您可能想阅读[SimpleXML](http://www.php.net/manual/en/simplexml.examples-basic.php)，它可以让您将 xml 文档转换为对象，使它们更易于阅读和操作。IE

`$xml_object = new SimpleXMLElement($xmlstr);`

# postgresql - MacOS：不知何故最终得到了两个版本的 postgres，我应该使用哪个版本？

> ID：10751882
> 
> 赞同：0
> 
> 时间：2012-05-25T09:30:11.327
> 
> 标签：postgresql, osx-lion, postgresql-9.1

我已经在 MacOS Lion 上安装了来自 MacPorts 的 postgres。我现在对下一步该怎么做感到很困惑，因为我找不到一套关于设置的清晰文档。

我最终在我的机器上使用了两个版本的 postgres，一个 at`/usr/bin/psql`和一个 at `/usr/local/pgsql/bin/psql`。MacOS 是否附带一个 postgres 版本？

无论如何，鉴于我最终得到了两个版本：

1.  我应该将其中哪些添加到我的路径中？
2.  我应该删除另一个吗？
3.  一些文档集说我应该确保某些 postgres 目录归`postgres`用户所有。这个对吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:06:00.587

这取决于你想要什么。如果您尝试分发将在 Lion 上运行的软件，请使用操作系统随附的版本。如果您想使用具有附加主要功能的更新版本，请使用更新版本。

一般来说，当您想要分发自己的软件时，我建议坚持使用常用的分发版本。

# c# - c# winforms - 如何从 ChildForm 访问 ParentForm

> ID：10751884
> 
> 赞同：0
> 
> 时间：2012-05-25T09:30:13.707
> 
> 标签：c#, winforms, forms

我阅读了有关此的手册文章，但是-仍然感到困惑。

从 Form1 我打开 Form2：

```
new Form2().Show(); 
```

在 Form2.ClosingEvent 我需要：

```
Form1.TextBox1.Visible = false; 
```

我应该把什么代码和确切地放在哪里 - 来实现这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-25T09:59:49.917

问题在于，按照您的代码当前的结构方式，您的类实例`Form2`对您的类实例一无所知`Form1`。因此，它不能访问其他对象的属性或调用方法。请记住，`Form1`and`Form2`是***类***的名称，而不是*对象*的名称。

hacky 的解决方案是向您的`Form2`类添加一个公共字段，该字段包含对您的`Form1`对象的引用。您将在创建`Form2`类的实例之后但在调用该`Show`方法之前填写该字段。

您将遇到的下一个问题是，默认情况下，表单上的控件是`private`，这意味着只有定义表单的类内部的代码才能访问它们。它们不能从不同类的代码中访问或*操作*。

从面向对象的角度来看，您的设计从根本上被打破了。一个类不应该操作或访问另一个类的私有成员。

如果有的话，你应该在`Form1`. 修改`Form2`类以在关闭时引发事件，然后从`Form1`. 在`Form1`事件处理方法内部，隐藏文本框。

快速而肮脏的解决方案是切换到该`ShowDialog`方法，该方法显示另一个表单并阻止执行，直到该表单关闭。然后你可以写：

```
// Create an instance of your Form2 class and show it as a modal dialog
using (var f = new Form2())
{
    f.ShowDialog(this);
}

// When the ShowDialog method returns, the Form2 form has closed, so
// you can go ahead and change the visible state of your control on Form1.
this.TextBox1.Visible = false; 
```

然而，模态的缺点是用户无法`Form1`在`Form2`打开时进行交互。从你的问题中不清楚这是否可行。如果没有，我推荐之前的解决方案，它涉及引发事件。无论哪种方式，我都强烈建议您阅读一本关于 C# 面向对象编程的书。如果你弄错了，这样的设计以后很难修复。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-25T09:32:20.447

您可以使用，好吧，访问您的父表单`ParentForm`。

在这种情况下`((Form1)ParentForm).TextBox1.Visible = false;`，假设`TextBox1`是从外部可见的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-25T09:43:37.117

在 Form2.ClosingEvent 上

```
Form1 parentForm = Application.OpenForms["FormName"] as Form1;
if (parentForm != null)
 {
    parentForm.TextBox1.Visible = false;
 } 
```

确保在 form1 TextBox1 上是公开的

# plone - IOError：[Errno 13] 在 Plone 4.1.4 zeo 中使用collective.recipe.filestorage 拒绝权限

> ID：10751887
> 
> 赞同：0
> 
> 时间：2012-05-25T09:30:29.467
> 
> 标签：plone

我在 debian 5 上安装了 plone 4.1.4 “UnifiedInstaller” zeo，我想将多个 Data.fs 与collective.recipe.filestorage 一起使用。

启动 zeo 服务器时出现此错误：
`IOError: [Errno 13] Permission denied: '/home/intranetcfa/intranetcfa/var/filestorage/vanilla/Data.fs.lock'`

我的扩建：

```
parts =
    filestorage
    ...

[filestorage]
recipe=collective.recipe.filestorage
blob-storage = var/blobstorage-%(fs_part_name)s
location = var/filestorage/%(fs_part_name)s/Data.fs
parts =
    vanilla 
```

这导致 zeo.conf ：

```
<filestorage vanilla>
    path /home/intranetcfa/intranetcfa/var/filestorage/vanilla/Data.fs
    blob-dir /home/intranetcfa/intranetcfa/var/blobstorage-vanilla
</filestorage> 
```

和 zope.conf ：

```
<zodb_db vanilla>
    cache-size 5000
    <zeoclient>
      blob-dir /home/intranetcfa/intranetcfa/var/blobstorage-vanilla
      shared-blob-dir on
      server 127.0.0.1:8102
      storage vanilla
      name vanilla_zeostorage
      var /home/intranetcfa/intranetcfa/parts/client1/var
      cache-size 30MB

    </zeoclient>
    mount-point /vanilla
</zodb_db> 
```

回溯（最近一次通话最后）：

```
 File "/home/intranetcfa/buildout-cache/eggs/ZODB3-3.10.5-py2.6-linux-x86_64.egg/ZEO/runzeo.py", line 405, in <module>
main()
  File "/home/intranetcfa/buildout-cache/eggs/ZODB3-3.10.5-py2.6-linux-x86_64.egg/ZEO/runzeo.py", line 402, in main
s.main()
  File "/home/intranetcfa/buildout-cache/eggs/ZODB3-3.10.5-py2.6-linux-x86_64.egg/ZEO/runzeo.py", line 158, in main
self.open_storages()
  File "/home/intranetcfa/buildout-cache/eggs/ZODB3-3.10.5-py2.6-linux-x86_64.egg/ZEO/runzeo.py", line 207, in open_storages
self.storages[opener.name] = opener.open()
  File "/home/intranetcfa/buildout-cache/eggs/ZODB3-3.10.5-py2.6-linux-x86_64.egg/ZODB/config.py", line 177, in open
return FileStorage(config.path, **options)
  File "/home/intranetcfa/buildout-cache/eggs/ZODB3-3.10.5-py2.6-linux-x86_64.egg/ZODB/FileStorage/FileStorage.py", line 125, in __init__
self._lock_file = LockFile(file_name + '.lock')
  File "/home/intranetcfa/buildout-cache/eggs/zc.lockfile-1.0.0-py2.6.egg/zc/lockfile/__init__.py", line 73, in __init__
fp = open(path, 'w+')
IOError: [Errno 13] Permission denied: '/home/intranetcfa/intranetcfa/var/filestorage/vanilla/Data.fs.lock' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T10:57:49.907

你的`var/filestorage/vanilla`目录不能被你的 ZEO 服务器运行的用户写入，或者你之前以不同的用户运行 ZEO，并且`Data.fs.lock`它创建的文件不能被当前用户写入。

通过调整该目录的权限来解决此问题，或者如果`.lock`文件存在，则锁定文件本身。

# c# - 我不能让空值使我的 C# 程序崩溃？

> ID：10751888
> 
> 赞同：1
> 
> 时间：2012-05-25T09:30:29.823
> 
> 标签：c#, crash, null

好的，所以我遇到了这个奇怪的问题，我已经在 Google 上搜索了很多次以寻找答案，但无济于事……无论如何，我遇到了这个问题，我似乎无法让我的程序在何时向我显示错误消息我想。这种情况发生过很多次，最终发现它是一个为空的变量，但由于某种原因没有引发错误？

这是我刚刚拥有的一个示例。

人员单击一个按钮以显示一个名为 debug 的新表单。

```
Debug debug = new Debug();
debug.Show(this); 
```

这是我的调试形式。

```
public new void Show(IWin32Window owner)
{
    base.Show(owner);
    Parent.Move += new EventHandler(delegate(object sender, EventArgs e)
    {
        Location = new Point(Parent.Location.X + Parent.Width, Parent.Location.Y);
    });
} 
```

长话短说，代码不起作用，因为 Parent 为空，但它甚至从未暗示这是问题所在。

我确信有一些解释，但我还没有在我的谷歌搜索中找到一个......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T10:02:06.813

您还可以在 Visual Studio 中尝试以下操作：

1.  调试 > 异常
2.  展开“公共语言运行时异常”条目
3.  展开“系统”条目
4.  单击 System.NullReferenceException 的复选框
5.  点击确定
6.  运行附加了调试器的应用程序。

现在，只要抛出 NullReferenceException，它就会导致调试器中断。

我猜你的应用程序被包装在一个 try{} catch{} 中，或者在调用堆栈底部的某个地方导致 debug.Show() 被调用，代码被包装在一个 try{} catch{}

# intellij-idea - 如何（重新）启用 IntelliJ IDEA alt-enter 日志支持

> ID：10751889
> 
> 赞同：0
> 
> 时间：2012-05-25T09:30:34.393
> 
> 标签：intellij-idea

IntelliJ IDEA 有一个不错的小功能，它允许为您的日志输出创建唯一的 LOG ID。

只需键入**Alt-Enter**然后选择**Add-LogID**即可使用它。

但我又做了一次。手指滑动而不是**Add-LogID**我单击了**Disable**。现在该功能消失了。消失了。再也找不到了。

有人知道如何重新启用它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T13:02:20.343

IntelliJ IDEA 没有提供这种开箱即用的意图，很可能您正在使用第三方[Log Support](http://plugins.intellij.net/plugin/?idea&id=4953)插件。仔细检查它是否仍然安装并启用，然后打开这个意图：

![在此处输入图像描述](../Images/ac7bfbad9603ebe0f00a731eee124831.png)

# java - 如何将 ComboBox.SelectedItem() 转换为 int？

> ID：10751891
> 
> 赞同：1
> 
> 时间：2012-05-25T09:30:43.053
> 
> 标签：java, casting

我尝试将 ComboBox.SelectedItem() 转换为 int 并且它不起作用。我知道 ComboBox.SelectedItem() 具有 String 类型，我将其转换为：

```
 int idprovider = ((Integer)IdProviderComboBox.getSelectedItem()).intValue(); 
```

但我收到错误：java.lang.ClassCastException：java.lang.String 无法转换为 java.lang.Integer

也许有人有一个想法。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T09:33:07.450

您正在将 String 转换为 Integer，因此它会抛出 ClassCastException，要从 String 中获取 int，请使用以下方法之一：

更新：

JComboBox.getSelectedItem() 将返回您对象，以将其转换为 int use ：

```
int idprovider = Integer.valueOf((String)IdProviderComboBox.getSelectedItem()); // Internally calls parseInt, returns Integer, Java converts it to int for you.

int idprovider = Integer.parseInt((String)IdProviderComboBox.getSelectedItem()); // Since you need int use this better 
```

# android - startactivityforResult 不工作

> ID：10751893
> 
> 赞同：0
> 
> 时间：2012-05-25T09:30:49.150
> 
> 标签：android

```
 Intent bookIntent = new Intent(this,ParseJson.class);
         // bookIntent.setClass(TitanGallery.this,ParseJson.class);
          startActivityForResult(bookIntent,BOOK_SELECT);

        protected void onActivityResult(int requestCode, int resultCode, Intent data) 
         {
          // TODO Auto-generated method stub
          super.onActivityResult(requestCode, resultCode, data);
          Toast.makeText(getApplicationContext(), "test", Toast.LENGTH_SHORT).show();
         } 
```

称为活动

```
Bundle b  = new Bundle();
      b.putStringArrayList("str_array", values);
      Intent go_parent  = new Intent();
      go_parent.putExtras(b);
      setResult(RESULT_OK,go_parent);
      finish(); 
```

我有一个调用 startactivityforResult 的活动，并且该活动与数组捆绑在一起。子活动没有被调用。我为此提供了很多代码，但我没有得到我的错误在哪里。如果你学过的人可以调查一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T09:33:04.127

尝试这个...

```
protected void onActivityResult(int requestCode, int resultCode, Intent data)  {
  // TODO Auto-generated method stub
  if(requestCode == BOOK_SELECT && resultCode == RESULT_OK) {
  Toast.makeText(getApplicationContext(), "test", Toast.LENGTH_SHORT).show();
  }
} 
```

# javafx-2 - JavaFX XYChart 对数图

> ID：10751894
> 
> 赞同：4
> 
> 时间：2012-05-25T09:30:55.760
> 
> 标签：javafx-2

我有一个 XYChart 将数据绘制为 Y 轴上的线性步长，我想绘制为对数或半对数 Y 刻度，如何更改我的以下代码？

```
public class BaseXYChart extends Application {

@Override
public void start(Stage stage) {
   stage.setTitle("Linear plot");

   final CategoryAxis xAxis = new CategoryAxis();
   final NumberAxis yAxis = new NumberAxis(1, 22, 0.5);

   yAxis.setTickLabelFormatter(new NumberAxis.DefaultFormatter(yAxis){
        @Override
    public String toString(Number object){
        return String.format("%7.2f", object);
    }
});
final LineChart<String, Number>lineChart = new LineChart<String, Number>(xAxis, yAxis);

   lineChart.setCreateSymbols(false);
   lineChart.setAlternativeRowFillVisible(false);

   XYChart.Series series1 = new XYChart.Series();

    series1.getData().add(new XYChart.Data("Jan", 1));
    series1.getData().add(new XYChart.Data("Feb", 1.5));
    series1.getData().add(new XYChart.Data("Mar", 2));
    series1.getData().add(new XYChart.Data("Apr", 2.5));
    series1.getData().add(new XYChart.Data("May", 3));
    series1.getData().add(new XYChart.Data("Jun", 4));
    series1.getData().add(new XYChart.Data("Jul", 6));
    series1.getData().add(new XYChart.Data("Aug", 9));
    series1.getData().add(new XYChart.Data("Sep", 12));
    series1.getData().add(new XYChart.Data("Oct", 15));
    series1.getData().add(new XYChart.Data("Nov", 20));
    series1.getData().add(new XYChart.Data("Dec", 22));

    BorderPane pane = new BorderPane();
    pane.setCenter(lineChart);          
    Scene scene = new Scene(pane, 800, 600);
    lineChart.getData().addAll(series1);

    stage.setScene(scene);

    stage.show();
}

public static void main(String[] args) {
    launch(args);
}

} 
```

谢谢大家

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T05:22:26.303

我认为这在 JavaFX Vanilla 中是不可能的。但你可以看看这里：[http ://blog.dooapp.com/2013/06/logarithmic-scale-strikes-back-in.html](http://blog.dooapp.com/2013/06/logarithmic-scale-strikes-back-in.html)

# c# - 从 Wcf 服务连接到 dbml

> ID：10751896
> 
> 赞同：0
> 
> 时间：2012-05-25T09:30:56.047
> 
> 标签：c#, android, wcf, linq-to-sql

我有与 Wcf 服务通信的 Web 应用程序和 android 应用程序。我的一项服务是 Chat.svc

```
 [ServiceContract(Namespace = "http://webchat.com")]
public interface IChat
{
    [OperationContract]
    [WebInvoke(Method = "POST",
       ResponseFormat = WebMessageFormat.Json,
       RequestFormat = WebMessageFormat.Json,
       BodyStyle = WebMessageBodyStyle.Wrapped,
       UriTemplate = "Start")]
    StartChatResult StartChat(StartChatEntity sce);
} 
```

和 Chat.svc.cs

```
 public StartChatResult StartChat(StartChatEntity sce)
    {
        //doing something else

        List<tblChatRoom> list = ChatManager.GetChatRoomList();

        return new StartChatResult() { IsSuccess = true, ChatRooms = list };

    } 
```

这个方法来自我的 ChatManager 类

```
public static List<tblChatRoom> GetChatRoomList()
    {
        SessionDBDataContext db = new SessionDBDataContext();
        return db.tblChatRooms.ToList();
    } 
```

当我从 Android 端调用 StartChat 方法时，总是有“错误请求”响应。当我对此行发表评论时

```
List<tblChatRoom> list = ChatManager.GetChatRoomList(); 
```

我有“好的”，没问题。这条线有问题。SessionDBDataContext 类也是

```
[global::System.Data.Linq.Mapping.DatabaseAttribute(Name="SessionDB")]
public partial class SessionDBDataContext : System.Data.Linq.DataContext
{

    private static System.Data.Linq.Mapping.MappingSource mappingSource = new AttributeMappingSource();

    public SessionDBDataContext() : 
            base(global::System.Configuration.ConfigurationManager.ConnectionStrings["SessionDBConnectionString"].ConnectionString, mappingSource)
    {
        OnCreated();
    }

    public SessionDBDataContext(string connection) : 
            base(connection, mappingSource)
    {
        OnCreated();
    }

    public SessionDBDataContext(System.Data.IDbConnection connection) : 
            base(connection, mappingSource)
    {
        OnCreated();
    }

    public SessionDBDataContext(string connection, System.Data.Linq.Mapping.MappingSource mappingSource) : 
            base(connection, mappingSource)
    {
        OnCreated();
    }

    public SessionDBDataContext(System.Data.IDbConnection connection, System.Data.Linq.Mapping.MappingSource mappingSource) : 
            base(connection, mappingSource)
    {
        OnCreated();
    }

    public System.Data.Linq.Table<tblChatRoom> tblChatRooms
    {
        get
        {
            return this.GetTable<tblChatRoom>();
        }
    }

    public System.Data.Linq.Table<tblTalker> tblTalkers
    {
        get
        {
            return this.GetTable<tblTalker>();
        }
    }

    public System.Data.Linq.Table<tblSession> tblSessions
    {
        get
        {
            return this.GetTable<tblSession>();
        }
    }

    public System.Data.Linq.Table<tblMessagePool> tblMessagePools
    {
        get
        {
            return this.GetTable<tblMessagePool>();
        }
    }
} 
```

我认为 SessionDB.dbml 有问题，但是当我使用不是服务方法的方法来拥有聊天室列表时，没关系。打电话给服务时我不明白出了什么问题。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T21:33:36.647

测试这段代码：创建一个类如tblChatRoom，例如：

```
public class ChatRoom
{
    public string username;
    public string firstname;
    public string lastname;

    public ChatRoom(){}

    public ChatRoom(string username, string firstname, string lastname)
    {
         this.username = username;
         this.lastname = lastname;
         this.firstname = firstname;
    }
}

public StartChatResult StartChat(StartChatEntity sce)
{
    //doing something else

    List<ChatRoom> list =
         (from q in ChatManager.GetChatRoomList()
          select new ChatRoom(q.username, q.firstname, q.lastname)).ToList();

    return new StartChatResult() { IsSuccess = true, ChatRooms = list };

} 
```

# python - python中Request.host对象的类型？

> ID：10751900
> 
> 赞同：0
> 
> 时间：2012-05-25T09:31:18.353
> 
> 标签：python, google-app-engine, wsgi, webapp2

我目前正在为我的 GAE 应用程序完成一种个人通用的 URI 解析器。

在全球范围内，一切都很好并且运行非常顺利，但是现在我查看了我的代码，我想知道我用来解析信息的 self.request.host 对象是一个数组还是一个字符串。

我现在这对某些人来说似乎很明显，但我已经在 Google 的网站、python 的网站和 Django 的网站上搜索了有关它的文档，但没有找到任何有关对象类型的相关信息（或者我可能搜索不好）。

因此，如果有人可以告诉我是否有包含对象类型的文档（例如 php 文档 ;-)）我会很高兴 ;-)

我现在可以使用 isinstance 来检索它，但我更喜欢 python 自己的文档，因为我必须对我打算使用的许多其他对象做同样的事情。

提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T11:33:03.610

什么是“表”？

无论如何，一个 webapp2 请求对象继承自[webob.Request](http://docs.webob.org/en/latest/reference.html#id1)，这是有据可查的。该`host`属性是一个普通字符串。

# alfresco - Alfresco webscript：未使用模型脚本

> ID：10751906
> 
> 赞同：0
> 
> 时间：2012-05-25T09:31:44.733
> 
> 标签：alfresco

所以我有一个包含以下文件的网页脚本：

*   xyz.post.desc.xml
*   xyz.post.json.ftl
*   xyz.post.json.js

描述是这样的：

```
<webscript>
  <shortname>xxx</shortname>
  <description>xxx</description>
  <url>/my/url/xyz?uri={id}</url>
  <format default="json">argument</format>
  <lifecycle>draft_public_api</lifecycle>
  <authentication>user</authentication>
  <transaction>none</transaction>
  <family>my/family</family>
</webscript> 
```

在我的 js 中，我这样做：

```
model.foo = "bar" 
```

然后在我的ftl

```
${foo} 
```

我有一个 ftl 异常，它说 foo 是未定义的，我现在很确定我不执行 js 文件本身。

在评估模板之前，可以解释 webscript 没有运行模型的原因是什么？

注意：从 url/alfresco/service/ webscript 列表中，如果我进入 xyz.post 的详细信息，我可以看到相关的 .js 内容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T14:03:59.503

所以对于记录，只是我忘记传递 :`requestContentType: Alfresco.util.Ajax.JSON`到 Ajax POST 方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T19:54:01.657

json.js 不是你的模型，你的模型应该是 xyz.post.js

所以很明显 foo 没有定义。

查看[Wiki](http://wiki.alfresco.com/wiki/Web_Scripts#How_Do_I_Create_a_Web_Script.3F)了解更多信息

# android - LVL 测试不起作用。清除缓存

> ID：10751910
> 
> 赞同：2
> 
> 时间：2012-05-25T09:31:56.187
> 
> 标签：android, android-lvl

我第一次在我的应用程序中测试 LVL。仔细阅读[开发指南](http://developer.android.com/guide/market/licensing/index.html)后，我使用了一些更改来实现默认示例`ServerManagedPolicy`，并作为草稿上传到我的开发者帐户。
我第一次运行我的应用程序时，我可以看到它正在验证许可证（它延迟了几秒钟并且显示了不确定的进度）。回调是`LICENSED`. 完美到这里。

但是后来我更改了测试响应（在我的开发人员帐户的编辑配置文件中），下次我运行它时，立即显示 LICENSED 而不连接和检查，就像它正在从缓存中读取一样。

（我在一个物理设备上进行测试，它有 2 个谷歌账户（开发者一个和另一个。）

有没有办法清除这个缓存？
还是我做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-09T11:42:17.010

另一种方法是使用 StrictPolicy 来测试许可检查的结果，这样就不会缓存许可结果。

只需替换该行：

```
mChecker = new LicenseChecker( this, new ServerManagedPolicy( this,
  new AESObfuscator( SALT, getPackageName(), deviceId ) ), BASE64_PUBLIC_KEY ); 
```

和：

```
mChecker = new LicenseChecker( this, new StrictPolicy(), BASE64_PUBLIC_KEY ); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-09T11:25:34.623

更改盐应该有助于刷新许可证响应。

# javascript - 根据其中的元素更改 div 的高度

> ID：10751911
> 
> 赞同：0
> 
> 时间：2012-05-25T09:32:04.877
> 
> 标签：javascript, jquery, css

基本上 IF`div.PageheaderDescription`包含 NO`img`和 NO`div#cat-text`然后我希望高度为 0px 所以没有空白。

**这是我的CSS：**

```
.PageHeaderDescription {
    height: 320px;
    position: relative;
    width: 99%;
} 
```

**这是 CSS 路径：**

```
html body div#Container div#Content div.PageHeaderDescription 
```

**下面是HTML**

```
<div class="PageHeaderDescription">
    <img border="0" src="images/Category/large/22.png" class="c1" />

    <div id="cat-text" class="c2">
      <table>
        <tbody>
          <tr>
            <td>
              <h1>1 Person</h1>
            </td>

            <td><span>test</span></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div> 
```

使用 jquery 是最好的方式还是我可以使用 clear:both 一些如何？你能帮我吗，我不知道如何使用 jquery 检查 div 中的元素。我知道包含字符串值的作品吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T09:33:20.117

为什么不将“最大高度”设置为 320 像素。这样 div 将默认为 0 高度，但如有必要，将扩展到最大 320px 高度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T09:33:25.793

好吧，您可以`:empty`在 CSS 中使用选择器：

```
.PageHeaderDescription:empty {display: none;} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T09:41:28.007

你可以使用 css`height: auto`

```
div.PageHeaderDescription {height: auto} 
```

# facebook - 我所有的赞都被删除了？我的脚本中的 LIKE-url 错误？

> ID：10751912
> 
> 赞同：-2
> 
> 时间：2012-05-25T09:32:07.357
> 
> 标签：facebook, facebook-graph-api, facebook-like

我在我的网站上使用了以下 LIKE BUTTON （脚本）

```
<iframe src="http://www.facebook.com/plugins/like.php?href=http%3A%2F%2Fwww.facebook.com%2Fpages%2Fsearchjobsabroad%2F132117540199153&amp;send=false&amp;layout=button_count&amp;width=220&amp;show_faces=true&amp;action=like&amp;colorscheme=light&amp;font&amp;height=21" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:220px; height:21px;" allowTransparency="true">

</iframe> 
```

这工作了几个月............我有超过 200 个 LIKES。

自 2 周以来，我的按钮消失了。

我认为我使用的like url有问题吗？

[http://www.facebook.com/pages/searchjobsabroad/132117540199153](http://www.facebook.com/pages/searchjobsabroad/132117540199153)（我用的这个）

那么我现在该怎么办？我已经创建了一个新按钮，........我尝试了它是否有效。它适用于新的喜欢按钮脚本，但我所有的喜欢都丢失了！！！！

我现在应该怎么做才能让我所有的喜欢都回来？我再也找不到它们/它们不再显示了:-(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T11:54:36.553

听起来 Facebook 要么删除了您的页面，要么您取消了发布它，从而停止了“赞”按钮的工作。您可以尝试联系 Facebook 以查看发生了什么，您应该已经从 Facebook 收到一封电子邮件，表明它正在删除违反服务条款的页面。

如果您证明您没有违反 TOS 或诱骗用户点赞该页面，Facebook 将取消删除该页面。否则，您所有的点赞将永远丢失。

# r - 打印整页世界地图时的空白

> ID：10751918
> 
> 赞同：3
> 
> 时间：2012-05-25T09:32:23.503
> 
> 标签：r, pdf

我正在尝试在 A4 横向 PDF 上获取世界地图的整页图。当我使用以下

```
pdf("temp.pdf", paper="a4r")
#par(mar=rep(0,4))
map("world", mar = rep(0,4))
dev.off() 
```

我明白了

![在此处输入图像描述](../Images/197834619c6595a4adfa45ba21bb417f.png)

我似乎无法让情节填满页面。有小费吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-25T10:58:47.843

尝试：

```
pdf("temp.pdf", paper="a4r",width=0,height=0)
map("world")
dev.off() 
```

这看起来很奇怪但有效，并且在文档中提到。它给了我一张左右填充页面的世界地图，但不是上下填充，因为它保持纵横比。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T10:03:29.260

您可以提取坐标：

```
coord <- map.poly(database="world", regions=".", exact=FALSE,
        xlim=NULL, ylim=NULL, boundary=TRUE, interior=TRUE, fill=FALSE,
        as.polygon=TRUE) 
```

然后用 and 绘制任何你想要的`coord$x`东西`coord$y`。

# android - 有没有办法在激活微调器时收到通知？

> ID：10751921
> 
> 赞同：0
> 
> 时间：2012-05-25T09:32:47.037
> 
> 标签：android, spinner

我希望在激活微调器并显示下拉列表时收到通知，但我找不到。第一次显示时，我想更改列表中的条目。我正在使用带有微调器的 ArrayAdapter。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T10:02:31.103

我不知道我是否理解正确。

但只需设置一个标志，如下所示：

```
boolean isTriggeredBefore = false; 
```

如果那是错误的，只需为该 arrayadapter 使用另一个值，例如

```
if(isTriggeredBefore)
     ArrayAdapter(this, R.array.list, R.id.tv);
else
     ArrayAdapter(this, R.array.listFirstTime, R.id.tv); 
```

希望有帮助！

# database - 如何打开 dbs 文件 (SQLBase)

> ID：10751922
> 
> 赞同：1
> 
> 时间：2012-05-25T09:32:56.357
> 
> 标签：database, odbc, sqlbase

我有一个扩展名为“.dbs”的文件。我只知道它是 Gupta SQLBase DB 9.1 版，我已经下载并安装了 SQLBase 11.6，但我不知道如何加载它。谷歌没有告诉我任何可以理解的事情。谁能帮我？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T05:52:45.283

SQLBase 引擎附带了一个名为 SQLTalk 的查询工具。您应该首先阅读在线帮助手册...... [SQLBase 用户指南](http://support.unify.com/Docs/SQLBaseDoc116/wwhelp/wwhimpl/js/html/wwhelp.htm)，因为有很多方法可以进入 .dbs

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-01T21:27:30.247

2017 年 2 月 10 日更新此答案。请参阅附加的 SQLBase 语言参考，特别是“UNLOAD”以将您的数据和架构从 v9 中取出，然后“LOAD”将您的数据放入 v11.6。随附的手册适用于 v9，但无论哪个版本的 SQLbase，LOAD 和 UNLOAD 的工作方式都是一样的。请参阅：[SQLBase 语言参考](http://enos.itcollege.ee/~priit/(I216)%20Ab-de%20administreerimine/SQLBase%20admin%20juhendid/LANG.PDF)

# sql - 从当前日期减去日期并仅返回年份

> ID：10751923
> 
> 赞同：0
> 
> 时间：2012-05-25T09:32:59.430
> 
> 标签：sql, sql-server

我需要从当前日期中减去一个日期（存储在数据库中），然后只返回年份部分。目前出于测试目的，我正在做这样的事情，但返回结果是错误的

```
print DATEDIFF (year ,1993-04-24,getdate()) 
```

返回值为 107。系统日期完全正确。

有什么不对。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T09:35:47.787

你忘记了`'`约会的时间

```
select DATEDIFF (year , '1993-04-24', GETDATE()) 
```

# java - 如何正确处理人类可读的结果？

> ID：10751924
> 
> 赞同：1
> 
> 时间：2012-05-25T09:33:00.080
> 
> 标签：java, oop, user-interface, selenium

我正在开发一个基于 Selenium 2 的测试套件。目标是在不同的情况下测试一系列页面（通过任意 XML 文件指定）。

输出通过以下方式给出：

*   一些压缩截图
*   原始日志文件
*   一个html文件

现在，原始日志文件和 markdown 日志文件（后来用于生成 html）是通过在应用程序中硬编码的消息生成的。

现在我正在考虑使用一些辅助数据结构来包含每一条相关信息，使用某种约定（代码、枚举等）来稍后处理和呈现。如果我没记错的话，这应该使代码更容易维护并且更少冗余。

**我的问题是：**是否有更好的方法或被广泛接受的做法？

作为输出（只是一个划痕）的示例：

```
<Test> | <name of page> | <browser>:
    * Searchbox found and query submitted
    * ERROR: timeout while waiting for results
<Test> | <name of page> | <browser>:
    * Question found and answer submitted
    * Alert box content: < ... >
    * OK 
```

谢谢

PS：如果有人找到更合适的问题标题，那将非常受欢迎

### 编辑

抱歉，如果我的问题不够简洁，我会尽力让自己清楚。

换句话说，当我的程序必须输出大量提供有关执行测试结果的信息时，我应该怎么做？对消息进行硬编码或使用一些辅助数据结构（例如队列/堆）来跟踪从执行开始到结束所发生的事情（例如，错误和状态代码），然后对其进行处理组成一个可读文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T10:23:37.443

使用与表示无关的数据结构显然是更好的选择。它允许

*   将测试与报告脱钩
*   生成多种报告（HTML、PDF、文本等）
*   报告国际化
*   将测试集成到另一个应用程序中，该应用程序不会进行任何报告，但会将结果显示在某个 GUI 组件（例如树或表格）中

# c# - 如何检查状态并决定执行代码的哪一部分

> ID：10751925
> 
> 赞同：0
> 
> 时间：2012-05-25T09:33:01.483
> 
> 标签：c#, mysql, connection

我有这个代码：

```
//open database connection on the server
                con = new MySqlConnection("server=localhost;database=GPS;uid=root;pwd=****");
                con.Open();
                if (con.State == ConnectionState.Closed)
                {
                    cmd = new MySqlCommand("insert into data values (null, ?Parname , ?Parname2, ?Parname3, ?Parname4, ?Parname5, ?Parname6, ?Parname7);", con);
                    cmd.Parameters.Add("?Parname", MySqlDbType.Double).Value = Math.Round(deciLat, 5);
                    cmd.Parameters.Add("?Parname2", MySqlDbType.Double).Value = Math.Round(deciLon, 5);
                    cmd.Parameters.Add("?Parname3", MySqlDbType.Timestamp).Value = DateTime.Now;
                    if (card_number != null)
                    {
                        cmd.Parameters.Add("?Parname4", MySqlDbType.VarChar).Value = card_number;
                    }
                    else
                    {
                        cmd.Parameters.Add("?Parname4", MySqlDbType.VarChar).Value = null;
                    }
                    cmd.Parameters.Add("?Parname5", MySqlDbType.VarChar).Value = ConfigSettings.ReadSetting("reg");
                    cmd.Parameters.Add("?Parname6", MySqlDbType.VarChar).Value = ConfigSettings.ReadSetting("ser");
                    cmd.Parameters.Add("?Parname7", MySqlDbType.Double).Value = ellipHeight;
                    cmd.ExecuteNonQuery();
                    lastDBUpdate = DateTime.Now;
                }
                else
                {
                    // local mysql database
                    con = new MySqlConnection("server=localhost;database=temp_GPS;uid=root;pwd=******");
                    con.Open();
                    if (con.State == ConnectionState.Open)
                    {
                        cmd = new MySqlCommand("insert into temp_data values (null, ?Parname , ?Parname2, ?Parname3, ?Parname4, ?Parname5, ?Parname6, ?Parname7);", con);
                        cmd.Parameters.Add("?Parname", MySqlDbType.Double).Value = Math.Round(deciLat, 5);
                        cmd.Parameters.Add("?Parname2", MySqlDbType.Double).Value = Math.Round(deciLon, 5);
                        cmd.Parameters.Add("?Parname3", MySqlDbType.Timestamp).Value = DateTime.Now;
                        if (card_number != null)
                        {
                            cmd.Parameters.Add("?Parname4", MySqlDbType.VarChar).Value = card_number;
                        }
                        else
                        {
                            cmd.Parameters.Add("?Parname4", MySqlDbType.VarChar).Value = null;
                        }
                        cmd.Parameters.Add("?Parname5", MySqlDbType.VarChar).Value = ConfigSettings.ReadSetting("reg");
                        cmd.Parameters.Add("?Parname6", MySqlDbType.VarChar).Value = ConfigSettings.ReadSetting("ser");
                        cmd.Parameters.Add("?Parname7", MySqlDbType.Double).Value = ellipHeight;
                        cmd.ExecuteNonQuery();
                        lastDBUpdate = DateTime.Now;
                    }
                } 
```

如果例如连接状态正常并且与服务器建立连接然后将结果保存在服务器上，我想让我的代码工作，如果与服务器的连接失败，则连接并保存到我的本地数据库，该数据库将始终可访问。

有人可以安排我的代码按我的意愿工作，因为我不知道如何实现它。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T09:42:15.120

创建一个函数 GetConnection() 并使用此函数始终获取连接。

写下代码以检查连接状态并在此基础上返回连接。

```
public MySqlConnection GetConnection(MySqlConnection con)
{
        if (con.State == ConnectionState.Closed)
       {
           // local mysql database
             con = new MySqlConnection("server=localhost;database=temp_GPS;uid=root;pwd=******");
            con.Open();
       }

          return con;
    } 
```

# c# - 在 UI 线程中引发事件

> ID：10751931
> 
> 赞同：0
> 
> 时间：2012-05-25T09:33:30.977
> 
> 标签：c#, winforms, compact-framework

我需要在 UI 线程中引发事件，我发现的所有解决方案都仅适用于完整框架：例如非常简单的解决方案，带有 GetInvocationList 和 ISynchronizeInvoke，但 NET CF 不支持 ISynchronizeInvoke。有没有办法在 CF 的 UI 线程中引发事件？我的代码如下。我使用 .NET CF 3.5

```
class Publisher {
  public event EventHandler OnEventHandler;
  private void OnEvent()
  {
    var handler = OnEventHandler;
    if (handler != null) handler(this, EventArgs.Empty); 
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T13:25:15.673

我使用`MethodInvoker`，必须声明（因为它在紧凑框架下不存在），然后包含到父控件的链接（通常是主窗体）：

```
class Publisher {
  #if PocketPC // MethodInvoker delegate is not declared in CF!
  public delegate void MethodInvoker(); 
  #endif
  private Form _parent;

  public Publisher(Form parent) {
    _parent = parent;
  }

  public event EventHandler OnEventHandler;
  private void OnEvent() {
    if (OnEventHandler != null) {
      MethodInvoker mi = delegate { OnEventHandler(this, EventArgs.Empty); };
      try {
        _parent.BeginInvoke(methInvoker);
      } catch (ObjectDisposedException) {
      } catch (NullReferenceException err) {
        LogError("OnEvent NullReference", err);
      } catch (InvalidOperationException err) {
        LogError("OnEvent InvalidOperation", err);
      }
    }
  }
} 
```

希望你能用它做点什么。;)

〜乔

# c - 套接字读取速度非常慢的原因可能是什么？

> ID：10751935
> 
> 赞同：5
> 
> 时间：2012-05-25T09:33:59.650
> 
> 标签：c, sockets, tcp, blocking

我正在为我的客户端和服务器使用阻塞 TCP 套接字。每当我阅读时，我首先使用`select`. 我总是一次读写 40 个字节。虽然大多数读取需要几毫秒或更短的时间，但有些只需要半秒以上。在我知道套接字上有可用数据之后。

我也在使用`TCP_NODELAY`

可能是什么原因造成的？

**编辑 2**

我分析了每个发送和接收的数据包的时间戳，发现只有当客户端在服务器写入下一个对象之前尝试读取对象时才会发生这种延迟。例如，服务器写入对象编号 x，然后客户端尝试读取对象 x，然后服务器才能够开始写入对象编号 x+1。这让我怀疑服务器端正在发生某种合并。

**编辑**

服务器正在侦听 3 个不同的端口。客户端一一连接到这些端口中的每一个。

有三种连接：一种是频繁地从服务器向客户端发送一些数据。第二个只将数据从客户端发送到服务器。第三个很少用于发送单字节数据。我面临第一次连接的问题。我正在使用`select()`该连接上可用的数据进行检查，然后当我为 40 字节读取添加时间戳时，我发现该读取花费了大约半秒。

任何有关如何分析此内容的指示都会非常有帮助

在 Linux 上使用 gcc。

```
`rdrr_server_start(void)
{

  int rr_sd;
  int input_sd;
  int ack_sd;
  int fp_sd;` startTcpServer(&rr_sd, remote_rr_port);
  startTcpServer(&input_sd, remote_input_port);
  startTcpServer(&ack_sd, remote_ack_port);
  startTcpServer(&fp_sd, remote_fp_port);

connFD_rr = getTcpConnection(rr_sd);
  connFD_input = getTcpConnection(input_sd);
  connFD_ack= getTcpConnection(ack_sd);
  connFD_fp=getTcpConnection(fp_sd);
}

static int getTcpConnection(int sd)
{
  socklen_t l en;

  struct sockaddr_in clientAddress;
  len = sizeof(clientAddress);
  int connFD = accept(sd, (struct sockaddr*) &clientAddress, &len);
  nodelay(connFD);
  fflush(stdout);
  return connFD;
}

static void
startTcpServer(int *sd, const int port)
{
  *sd= socket(AF_INET, SOCK_STREAM, 0);
  ASSERT(*sd>0);

// Set socket option so that port can be reused
  int enable = 1;
  setsockopt(*sd, SOL_SOCKET, SO_REUSEADDR, &enable, sizeof(int));

struct sockaddr_in a;
  memset(&a,0,sizeof(a));
  a.sin_family = AF_INET;
  a.sin_port = port;
  a.sin_addr.s_addr = INADDR_ANY;
  int bindResult = bind(*sd, (struct sockaddr *) &a, sizeof(a));
  ASSERT(bindResult ==0);
  listen(*sd,2);
}
static void nodelay(int fd) {
  int flag=1;
  ASSERT(setsockopt(fd, SOL_TCP, TCP_NODELAY, &flag, sizeof flag)==0);
} 

```
`startTcpClient() {
  connFD_rr = socket(AF_INET, SOCK_STREAM, 0);
  connFD_input = socket(AF_INET, SOCK_STREAM, 0);
  connFD_ack = socket(AF_INET, SOCK_STREAM, 0);
  connFD_fp= socket(AF_INET, SOCK_STREAM, 0);` struct sockaddr_in a;
  memset(&a,0,sizeof(a));
  a.sin_family = AF_INET;
  a.sin_port = remote_rr_port;
  a.sin_addr.s_addr = inet_addr(remote_server_ip);

int CONNECT_TO_SERVER= connect(connFD_rr,  &a, sizeof(a));
  ASSERT(CONNECT_TO_SERVER==0) ;

a.sin_port = remote_input_port;
  CONNECT_TO_SERVER= connect(connFD_input,  &a, sizeof(a));
  ASSERT(CONNECT_TO_SERVER==0) ;

a.sin_port = remote_ack_port;
  CONNECT_TO_SERVER= connect(connFD_ack,  &a, sizeof(a));
  ASSERT(CONNECT_TO_SERVER==0) ;

a.sin_port = remote_fp_port;
  CONNECT_TO_SERVER= connect(connFD_fp,  &a, sizeof(a));
  ASSERT(CONNECT_TO_SERVER==0) ;

nodelay(connFD_rr);
  nodelay(connFD_input);
  nodelay(connFD_ack);
  nodelay(connFD_fp);
} 
            回答 #1

赞同：1

时间：2012-05-25T14:06:09.747

我会怀疑这行代码：

```
ASSERT(setsockopt(fd, SOL_TCP, TCP_NODELAY, &flag, sizeof flag)==0); 
```

如果您正在运行发布版本，那么 ASSERT 很可能被定义为空，因此实际上不会进行调用。setsockopt 调用不应出现在 ASSERT 语句中。相反，应该在断言语句中验证返回值（在变量中）。  [带有副作用](https://www.securecoding.cert.org/confluence/display/seccode/EXP31-C.+Avoid+side+effects+in+assertions)的断言通常是一件坏事。所以即使这不是问题，也应该改变它。

            回答 #2

赞同：0

时间：2012-05-25T10:30:01.107

一个客户端和多个连接？

一些套接字函数可能会阻止您的执行（即等待函数的结果）。我建议为每个连接打开一个新线程（在服务器端），这样它们就不会相互干扰......

但我在黑暗中拍摄；你需要发送一些额外的信息......

            回答 #3

赞同：0

时间：2013-08-12T10:16:10.490

您可以尝试将`TCP_CORK`（CORK'ed 模式）与内核扩展一起使用`GRO`，`GSO`并`TSO`通过以下方式禁用`ethtool`：

*   在`TCP_CORK`标记的会话中发送将确保数据不会在部分段中发送

*   禁用`generic-segmentation-offload`，`generic-receive-offload`并`tcp-segmentation-offload`确保内核在将数据移入/移出用户空间之前不会引入人为延迟来收集额外的 tcp 段

            回答 #4

赞同：0

时间：2012-05-25T10:52:18.527

您的陈述仍然令人困惑，即“只有一个客户端的多个 tcp 连接”。显然，您有一台服务器在一个端口上侦听。现在，如果您有多个连接，这意味着有多个客户端连接到服务器，每个客户端都连接到不同的 tcp 客户端端口。现在服务器运行选择并响应任何有数据的客户端（意味着客户端在他的套接字上发送了一些数据）。现在如果两个客户端同时发送数据，服务器只能按顺序处理它们。因此，在服务器完成第一个处理之前，不会处理第二个客户端。

Select 仅允许服务器监视多个描述符（套接字）并处理曾经有可用数据的进程。它不像它并行处理。为此，您需要多个线程或进程。

            回答 #5

赞同：0

时间：2012-05-25T11:23:08.097

也许这与`timeout`论点有关。

你为调用`timeout`参数设置了`select`什么？

尝试将超时参数更改为更大的参数并观察延迟。有时，超时时间太短，而且系统调用通常会扼杀吞吐量。如果您假设更大的延迟，也许您可​​以获得更好的结果，这是可以实现的。

我怀疑超时或一些代码错误。

```

```

# facebook-opengraph - 打开图形操作链接返回 500 错误

> ID：10751936
> 
> 赞同：2
> 
> 时间：2012-05-25T09:34:01.023
> 
> 标签：facebook-opengraph, actionlink

我使用了开放图操作。行动运作良好。我还使用了开放图形操作链接。它在取消关注帖子旁边显示我的链接。但是当我单击此操作链接时，ajax 调用返回 500 错误代码。我没有在 url 上收到任何服务器到服务器的调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T13:01:46.833

我知道错误在哪里。为了使用 Action Link，Facebook 使用服务器到服务器调用将数据发送到您的服务器。facebook 使用的调用需要 SSL / HTTPS，我看到您的服务器不支持。这就是 Facebook 返回错误 500 的原因。

阅读文档，它说以下内容：

> 为您的操作链接添加端点信息。这是在故事中单击操作链接时将调用的端点。此端点必须与应用程序的域匹配，并且必须是有效的 https:// 端点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-05T19:13:30.373

我知道这是一个旧帖子但是..

您是否检查了您的应用状态和评论选项卡。您必须添加操作并提交您的应用以供审核。Facebook 将要求您提供网站或平台的屏幕截图，以批准您访问这些功能。

# c# - 使用我的 xml 文件检查多个数据

> ID：10751938
> 
> 赞同：1
> 
> 时间：2012-05-25T09:34:06.733
> 
> 标签：c#, xml, visual-studio-2010

我正在创建一个窗口应用程序，其中我有一个用于显示问题的标签和一个用于回答相应问题的文本框。然后是 3 个按钮用于使用我的 xml 文件检查答案，一个按钮用于下一个问题，一个按钮用于上一个问题。

这是我的 xml 文件

```
<?xml version="1.0" encoding="utf-8" ?>
<Exam>
  <Question number="1" Text="What is IL Code">
    <Answer Text="Half compiled, Partially compiled code"> </Answer>
  </Question>
  <Question number="2" Text="What is JIT">
    <Answer Text="IL code to machine language"> </Answer>
  </Question>
  <Question number="3" Text="What is CLR">
    <Answer Text="Heart of the engine , GC , compilation , CAS(Code access security) , CV ( Code verification)"> </Answer>
  </Question>
</Exam> 
```

现在单击按钮，我想用我的 xml 答案检查用户的答案，这部分我已经完成了，但只要第一个问题是什么是 il 代码，我的代码就可以正常工作，当问题改变时，我的代码每次回答第一个问题时都无法回答第二个问题并与之进行比较，那么我该如何实现呢？下面是我截取的代码

```
string[] arrUserAnswer = textBox1.Text.Trim().ToLower().Split(' ');
            do
            {
                XmlReader reader = XmlReader.Create(@"E:\ferozProject\WindowsFormsApplication1\WindowsFormsApplication1\QuestionFile.xml");
                reader.Read();
                reader.ReadToFollowing("Question");
                reader.MoveToContent();
                que = reader.GetAttribute("Text");
                reader.ReadToFollowing("Answer");
                reader.MoveToContent();
                string[] arrXMLAnswer = reader.GetAttribute("Text").ToString().Trim().ToLower().Split(' ');
                List<string> lststr1 = new List<string>();
                if (label2.Text == que)
                {
                    abc = 1;
                    foreach (string nextStr in arrXMLAnswer)
                    {
                        if (Array.IndexOf(arrUserAnswer, nextStr) != -1)
                        {
                            lststr1.Add(nextStr);
                        }
                    }
                    if (lststr1.Count > 0)
                    {
                        label4.Visible = true;
                        label4.Text = "Your Answer is " + ((100 * lststr1.Count) / arrXMLAnswer.Length).ToString() + "%" + "Correct";
                    }
                    else
                    {
                        textBox1.Text = "0 %";
                    }

                }
                else
                {
                    reader.ReadToNextSibling("Question");
                }

            } while (abc <= 0);
            abc = 0; 
```

我还为此使用了第二种方法，但是由于我在问题节点中编写了问题，因此代码无法找到我的问题，下面是我的另一个代码。

```
XmlDocument docQuestionList = new XmlDocument();// Set up the XmlDocument //
            docQuestionList.Load(@"E:\ferozProject\WindowsFormsApplication1\WindowsFormsApplication1\QuestionFile.xml"); //Load the data from the file into the XmlDocument //
            XmlNodeList QuestionList = docQuestionList.SelectNodes("Exam/Question");
            foreach (XmlNode nodexm in QuestionList)
            {
                string obj = nodexm.SelectNodes("Text").ToString();
                if (obj == label2.Text)
                {
                    string[] arrUserAnswer = textBox1.Text.Trim().ToLower().Split(' ');
                    string[] arrXMLAnswer = nodexm.NextSibling.InnerText.Trim().ToLower().Split(' ');
                    List<string> lststr1 = new List<string>();
                    foreach (string nextStr in arrXMLAnswer)
                    {
                        if (Array.IndexOf(arrUserAnswer, nextStr) != -1)
                        {
                            lststr1.Add(nextStr);
                        }
                    }
                    if (lststr1.Count > 0)
                    {
                        label4.Text = "Your Answer is " + ((100 * lststr1.Count) / arrXMLAnswer.Length).ToString() + "%" + "Correct";
                    }
                    else
                    {
                        textBox1.Text = "0 %";
                    }
                }
            } 
```

请以任何一种方法帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T12:43:09.640

就像是：

```
//setup the doc
string fn="C:\\bla.xml";
XmlDocument xmlDocument=new XmlDocument();
xmlDocument.Load(fn);
XmlNode root=xmlDocument.DocumentElement;

//get the node
XmlNode answerNode=root.SelectSingleNode("//Question[@number="+num+"]/Answer");

//get the value
string attrName="Text";
XmlAttribute atr=answerNode.Attributes.GetNamedItem(attrName) as XmlAttribute;
if (atr!=null){
   string answer=atr.value;
} 
```

会让你的生活轻松很多。注意并提供 num 变量，并进行一些空值检查。

# java - Hibernate criteria.list 带有引号和重音符号的错误结果

> ID：10751942
> 
> 赞同：0
> 
> 时间：2012-05-25T09:34:15.763
> 
> 标签：java, hibernate, criteria

我正在使用hibernate 3.6，但在使用criteria.list 时遇到问题。我需要带有引号或重音的搜索词，例如“d'eau”或“d´eau”。我的代码是这样的：

```
Criteria criteria;
criteria.add(Restrictions.ilike("nameParam", "d''eau", MatchMode.ANYWHERE)); 
```

我放了两个单引号，因为我正在使用 sql server 数据库。有 2 个单引号，因为单引号与另一个单引号一起转义。该语句有 0 个结果，但是如果我在 sql server 客户端执行日志中打印的 sql 语句，我会得到 120 个结果。

使用 HQL 和相同的 sql 语句进行测试。我明白了：

```
String hqlQuery = "select distinct(t) from Table t where b.idCon in (select t2.idCon from Table t2 where lower(t2.outTerTb) like '%d''eau%')";
List qwer = getEntityManager().createQuery(hqlQuery).getResultList();
System.out.println("qwer.size() -> " + qwer.size());

String hqlQuery2 = "select distinct(t) from Table t where b.idCon in (select t2.idCon from Table t2 where lower(t2.outTerTb) like :param)";
List qwer2 = getEntityManager().createQuery(hqlQuery2).setParameter("param", "%d''eau%").getResultList();
System.out.println("qwer2.size() -> " + qwer2.size()); 
```

此代码打印：

```
qwer.size() -> 120
qwer2.size() -> 0 
```

我不明白为什么会这样。对不起，如果我的英语不好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T09:53:21.770

您不需要在参数中转义单引号。这就是使用参数的全部意义（在 Hibernate 中以及在幕后，在 JDBC 准备语句中）：JDBC 驱动程序转义了需要为您转义的所有内容。

您将来自 UI 层的内容按原样填充到参数中，所有内容都由驱动程序正确转义，并且您不会冒任何 SQL 注入攻击的风险。

# python - 在python中作为命令行参数传递的数字不被解释为整数

> ID：10751948
> 
> 赞同：31
> 
> 时间：2012-05-25T09:34:30.913
> 
> 标签：python, argv

我熟悉C，并且已经开始在python中进行实验。我的问题是关于`sys.argv`命令的。我读过它用于命令行解释器，但是当尝试执行一个简单的程序时，我没有得到我期望的结果。

代码：

```
import sys

a = sys.argv[1]
b = sys.argv[2]

print a, b

print a+b 
```

输入：

```
python mySum.py 100 200 
```

输出：

```
100 200
100200 
```

当我添加两个参数时，它们被连接起来，而不是两个值被加在一起。似乎这些值被视为字符串。

如何将它们解释为数字？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-05-25T09:36:10.693

您可以使用 int() 将参数转换为整数

```
import sys

a = int(sys.argv[1])  b = int(sys.argv[2])

print a, b

print a+b 
```

输入：`python mySum.py 100 200`

输出：

```
100 200
300 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-25T12:46:26.597

您还应该验证用户输入：

```
import sys

def is_intstring(s):
    try:
        int(s)
        return True
    except ValueError:
        return False

for arg in sys.argv[1:]:
    if not is_intstring(arg):
        sys.exit("All arguments must be integers. Exit.")

numbers = [int(arg) for arg in sys.argv[1:]]
sum = sum(numbers)

print "The sum of arguments is %s" % sum 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-05-25T09:36:49.007

确实，你自己也发现了问题，`sys.argv`是一个字符串数组。

您可以使用 将字符串转换为整数`int()`。在这种情况下，例如：`a = int(sys.argv[1])`

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-05-25T09:37:43.467

`sys.argv`项目总是`strings`。您应该将它们投射到`int`with `int(a)`。

您还可以使用第三方库来处理 CLI 参数，例如[OptParse](http://wiki.python.org/moin/OptParse)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-17T01:24:26.613

在 Python 中，字符串不会隐式转换为整数。尝试

```
num1 = int(sys.argv[1])
This would represent the numerical value of the number, not its string representation. 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-06T23:40:17.293

小心执行涉及命令行参数的比较，由于 Python 2 的比较不同类型的对象（'int' < 'list' < 'string' < 'tuple'）的策略，这可能会导致*非常意外的行为，如此*[处](https://stackoverflow.com/questions/3270680/how-does-python-compare-string-and-int)所述。在 Python 3 中，比较不同类型的对象会导致 TypeError。

有关对象比较混乱的示例，请尝试删除`int()`第 6.1.1 节中的调用。[Python教程斐波那契代码](https://docs.python.org/2/tutorial/modules.html)，你会得到一个无限循环，因为while循环条件变成：'int'<'string'。*（这在 Perl 中不会发生，顺便说一句）。*

来自上述@Jan-Philip 的很好的建议是验证命令行参数，即使对于 Python 3 也是如此。

# algorithm - 存储数字流中最大的 5000 个数字

> ID：10751953
> 
> 赞同：11
> 
> 时间：2012-05-25T09:34:48.557
> 
> 标签：algorithm, binary-search-tree

鉴于以下问题：

> “存储数字流中最大的 5000 个数字”

想到的解决方案是二叉搜索树，它维护树中节点数的计数，并在计数达到 5000 时引用最小节点。当计数达到 5000 时，可以将要添加的每个新数字与树中最小的项目。如果更大，则可以添加新数字，然后删除最小的数字并计算新的最小数字（这应该很简单，已经有了以前的最小数字）。

我对这个解决方案的担忧是二叉树自然会偏斜（因为我只删除一侧）。

**有没有办法解决这个问题，不会产生一个非常倾斜的树？**

如果有人想要它，到目前为止，我已经为我的解决方案包含了伪代码：

```
process(number)
{
  if (count == 5000 && number > smallest.Value)
  {
    addNode( root, number)
    smallest = deleteNodeAndGetNewSmallest ( root, smallest)
  }
}

deleteNodeAndGetNewSmallest( lastSmallest)
{
  if ( lastSmallest has parent)
  {
    if ( lastSmallest has right child)
    {
      smallest = getMin(lastSmallest.right)
      lastSmallest.parent.right = lastSmallest.right
    }
    else
    {
      smallest = lastSmallest.parent
    }
  }
  else 
  {
    smallest = getMin(lastSmallest.right)
    root = lastSmallest.right
  }
  count--
  return smallest
}

getMin( node)
{
  if (node has left)
    return getMin(node.left)
  else
    return node
}

add(number)
{
  //standard implementation of add for BST
  count++
} 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-05-25T09:36:49.443

最简单的解决方案是维护一个最大大小为 5000 的最小[堆](http://en.wikipedia.org/wiki/Heap_%28data_structure%29)。

*   每次有新数字到达时 - 检查堆是否小于 5000，如果是 - 添加它。
*   如果不是 - 检查最小值是否小于新元素，如果是，则将其弹出并插入新元素。
*   完成后 - 您有一个包含 5000 个最大元素的堆。

这个解决方案很`O(nlogk)`复杂，其中`n`元素的数量是元素的数量，并且`k`是您需要的元素数量（在您的情况下为 5000）。

也可以`O(n)`使用[选择算法](http://en.wikipedia.org/wiki/Selection_algorithm)来完成- 存储所有元素，然后找到第 5001 个最大的元素，并返回大于它的所有元素。但它更难实现和合理的大小输入 - 可能不会更好。此外，如果流包含重复项，则需要更多处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-01T16:31:03.133

使用（最低）优先级队列。将每个传入项目添加到队列中，当大小达到 5,000 时，每次添加传入元素时删除最小（顶部）元素。队列将包含 5,000 个最大的元素，当输入停止时，只需删除内容。此 MinPQ 也称为堆，但这是一个重载术语。插入和删除大约需要 log2(N)。其中 N 最大值为 5,000，这将是您正在处理的项目数的 12 [log2(4096) = 12] 倍。

一个极好的信息来源是 Robert Sedgewick 和 Kevin Wayne 的 Algorithms，（第 4 版）。coursera.org 上有一个基于此文本的优秀 MOOC。

# vb.net - 使用 xmlDocument、xmlNode 和 xmlNodelist 从 xml 检索数据

> ID：10751955
> 
> 赞同：-1
> 
> 时间：2012-05-25T09:34:55.277
> 
> 标签：vb.net

这是 vb.net 中的示例代码，我在其中检索没有属性的元素的详细信息。

```
For Each standardItemInfoNode In ItemInfoNodes
        baseDataNodes = ItemInfoNodes.ChildNodes
        bFirstInRow = True
        For Each baseDataNode As XmlNode In baseDataNodes
            If (bFirstInRow) Then
                bFirstInRow = False
            Else
                Response.Write("<br>")
            End If
            Response.Write(baseDataNode.Name & ": " & baseDataNode.InnerText)
        Next
    Next 
```

如何检索 xml 的详细信息，例如具有属性的节点及其子节点也具有属性。我需要检索存在于其他 xml 标记中间的节点及其子节点的所有属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T12:50:33.620

我不确定你到底在问什么，如果不知道你要处理的 XML 的格式，我不能给你一个具体的例子，但我认为你正在寻找的是 XmlNode 的 Attributes 属性对象。每个 XmlNode 都有一个 Attributes 属性，允许您访问该节点的所有属性。这是解释它的 MSDN 页面（并提供了一个简单的示例）：

[http://msdn.microsoft.com/en-us/library/7f285y48.aspx](http://msdn.microsoft.com/en-us/library/7f285y48.aspx)

编辑：

使用您在评论中发布的示例 XML，您可以读取所有值和属性，如下所示：

```
 Dim doc As XmlDocument = New XmlDocument()
    doc.LoadXml("<EventTracker><StandardItem><Header1>Header1 Text</Header1> <Header2>Header2 Text</Header2></StandardItem><Item> <Events> <EventSub EventId='73' EventName='Orchestra' Description='0'> <Person PersonId='189323156' PersonName='Chandra' Address='Arunachal'/><Person PersonId='189323172' PersonName='Sekhar' Address='Himachal'/></EventSub> </Events> </Item> </EventTracker>")
    Dim header1 As String = doc.SelectSingleNode("EventTracker/StandardItem/Header1").InnerText
    Dim header2 As String = doc.SelectSingleNode("EventTracker/StandardItem/Header2").InnerText
    For Each eventSubNode As XmlNode In doc.SelectNodes("EventTracker/Item/Events/EventSub")
        Dim eventId As String = eventSubNode.Attributes("EventId").InnerText
        Dim eventName As String = eventSubNode.Attributes("EventName").InnerText
        Dim eventDescription As String = eventSubNode.Attributes("Description").InnerText
        For Each personNode As XmlNode In eventSubNode.SelectNodes("Person")
            Dim personId As String = personNode.Attributes("PersonId").InnerText
            Dim personName As String = personNode.Attributes("PersonName").InnerText
            Dim personAddress As String = personNode.Attributes("Address").InnerText
        Next
    Next 
```

但是，如果您要像这样加载 XML 中的所有数据，我建议将 XML 反序列化为 EventTracker 对象。或者，正如我在对您的帖子的评论中所说，如果读取 XML 文档的唯一目的是将其转换为另一个 XML 或 HTML 文档，我会建议使用 XSLT。

如果要测试属性是否存在，可以执行以下操作：

```
Dim attribute As XmlNode = personNode.Attributes.GetNamedItem("PersonId")
If attribute IsNot Nothing Then
    Dim personId As String = attribute.InnerText
End If 
```

但是，使用序列化会更容易，因为反序列化的对象对于任何不存在的元素只会具有 null 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T20:41:28.520

您可以在该节点上使用`SelectSingleNode("XPath or NodeName")`和循环。`Attributes.Item(index)`如果您事先知道子节点名称，您还可以循环遍历`SelectSingleNode("XPath Or NodeName").SelectSingleNode("XPath or ChildName").Attributes.Item(index)`.

# c# - 让 DisplayFor(m => m.Property) 显示换行符和格式？

> ID：10751957
> 
> 赞同：1
> 
> 时间：2012-05-25T09:34:59.320
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor

我的视图有问题，当我使用`TextAreaFor`任何换行符或格式编辑内容时，我插入的内容被保存，当我编辑相同的元素时，它仍然会显示如下：

> 这个冬天需要一些东西来让家人开心吗？还是在寻找完美的圣诞礼物？您会在 CD WOW 找到这两种产品！
> 
> 通过此优惠，会员可以：
> 
> • 搜索大量音乐、电影、电视、书籍和游戏。
> 
> • 在圣诞节期间将最新版本直接送到您家门口，全球免费送货。

但是当我使用`DisplayFor`或只是`@Model.Property`它会显示如下：

> 这个冬天需要一些东西来让家人开心吗？还是在寻找完美的圣诞礼物？您会在 CD WOW 找到这两种产品！通过此优惠，会员可以： • 搜索大量音乐、电影、电视、书籍和游戏。• 在圣诞节期间将最新版本直接送到您家门口，全球免费送货。

我应该使用什么来以显示的格式显示它`TextAreaFor`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T09:38:09.490

您可以使用`<pre>`标签：

```
<pre>
    @Html.DisplayFor(x => x.Property)
</pre> 
```

另一种可能性是编写一个自定义助手，将新行 ( `\r\n`)替换为`<br/>`标签并像这样使用它：

```
@Html.DislpayFormattedFor(x => x.Property) 
```

以下是自定义助手的定义方式：

```
public static class HtmlExtensions
{
    public static IHtmlString DislpayFormattedFor<TModel>(
        this HtmlHelper<TModel> htmlHelper,
        Expression<Func<TModel, string>> expression
    )
    {
        var value = Convert.ToString(
            ModelMetadata.FromLambdaExpression(expression, htmlHelper.ViewData).Model
        );
        if (string.IsNullOrEmpty(value))
        {
            return MvcHtmlString.Empty;
        }

        value = string.Join(
            "<br/>",
            value.Split(
                new[] { Environment.NewLine }, 
                StringSplitOptions.None
            ).Select(HttpUtility.HtmlEncode)
        );

        return new HtmlString(value);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T09:46:29.290

只是禁用该字段？这样你就可以使用现有的`TextAreaFor`：

```
@Html.TextAreaFor(m => m.Property, new { disabled = "disabled" }) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-24T10:56:30.640

使用 <pre> 标签或将此 css 属性添加到您的 div/span 标签：

```
white-space: pre-wrap; 
```

例子 ：

```
<div style="white-space: pre-wrap;">
  my
  multiline
  text
</div> 
```

# html - 调整窗口大小后的页面对齐

> ID：10751962
> 
> 赞同：0
> 
> 时间：2012-05-25T09:35:20.477
> 
> 标签：html, css

每当我开发 HTML 页面时，都会遇到调整窗口大小的问题。页面对齐受到干扰。一个元素或标签与另一个元素或标签重叠。我希望我的页面在调整大小时应该保持不变并且应该出现滚动条。有人建议解决方案。哪种样式属性（位置，溢出）对此有用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T09:40:48.413

在主体上设置 a `width`（或者，更优选地， a `min-width`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T09:41:06.650

不确定这是否是您需要的，但可能：

```
overflow:auto; 
```

是你要找的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T12:25:27.537

我理解我认为，问题在于您将元素放置在相对位置（任何元素上的默认位置），因此相对于您当前的屏幕尺寸。您可以将位置更改为绝对位置并且它们不会移动，如果您不是 CSS 忍者，这可能会导致您失去控制。生病展示一些很酷的技术现在如何控制元素。

提示1：包装你的标签！包裹的元素将保持原状！例子：

html =>

```
<div id="box_wrapper">
  <div class="box">
  </div>
  <div class="box">
  </div>
  <div class="box">
  </div>
</div> 
```

CSS =>

```
#box_wrapper {
  margin: /*top and bottom*/5px /*left and right*/ auto; /*this will center your wrapper*/
  height: 300px; /*what ever height you want*/
  width: 1200px; /*what ever width you want*/
 }
.box {
  /*what dimensions you want*/
 } 
```

这是将对象保持在适当位置的好方法，如果您指定溢出，它们将永远不会离开包装器元素。

提示2：位置：绝对；小心这可能会变得混乱。

我在将徽标定位到屏幕角落时使用绝对位置，这样如果您更改屏幕尺寸，徽标仍将保留在角落中。这很酷，因为您不需要为父元素指定宽度。

html

```
<div class="header">
 <img src="/images/logo.png" alt="page_logo">
 <div id="login_button">
   /*......*/
 </div>
</div> 
```

css

```
.header {
  width: 100%
  height: 150px;
  border: 1px solid #ccc; 
}
.header img{
  position: absolute;
  margin: 0px; /*position: absolute must have a margin even if its 0*/
  float: left;
  height: 150px;
}
#login_buttons {
 float:left;
 position: absolute right;
 margin-right: 5px;
} 
```

此示例将徽标放在左上角，将登录按钮放在右侧，如果您随后更改屏幕大小，它将使它们保持在需要的位置。

我不想在这里写一个完整的教程，但这些技巧应该有助于设计适应多种屏幕尺寸的实体页面。如果我看不到代码，很难猜出问题可能是什么，但我希望这会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-14T17:00:27.563

```
<body id="page" onload=" pageHeight = document.getElementById('page').offsetHeight;
 pageWidth = document.getElementById('page').offsetWidth;

pageHeight=1000 px ;
pageWidth=600 px ;
"> </body> 
```

*您必须根据调整后的浏览器窗口大小将页面加载时正文的宽度固定为像素而不是 %。*

# asp.net - File.Exist() 返回错误值

> ID：10751963
> 
> 赞同：0
> 
> 时间：2012-05-25T09:35:22.923
> 
> 标签：asp.net, file

我正在使用 Asp.net Mvc3！

我编写了以下代码来将我的文件搜索到文件夹中：-

```
 string TrailorsPath =Server.MapPath( "/ePortfolio/"+cid+"/Icons/"+ fileName);
  if (System.IO.File.Exists(TrailorsPath)) 
```

但它总是给出不正确的结果：

我的文件路径是这样的：-

```
"D:\SVN_HobbyHomes\HobbyHomesWebApp\ePortfolio\1\Icons" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T09:41:39.367

尝试在路径的开头使用“~”。

```
string TrailorsPath =Server.MapPath("~/ePortfolio/"+cid+"/Icons/"+ fileName); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T09:42:00.473

可能有多个问题
在行上放一个断点

```
string TrailorsPath =Server.MapPath( "/ePortfolio/"+cid+"/Icons/"+ fileName); 
```

并检查`Server.MapPath( "/ePortfolio/"+cid+"/Icons/"+ fileName)`

并开始使用这个

```
Server.MapPath( "~/ePortfolio/"+cid+"/Icons/"+ fileName) 
```

# css - 在另一个选择器中导入 CSS 选择器样式？（不是@import）

> ID：10751966
> 
> 赞同：6
> 
> 时间：2012-05-25T09:35:39.353
> 
> 标签：css

有没有办法将单个 CSS 选择器的样式导入另一个 CSS 选择器并添加到它或从中重写属性。

比方说：

```
.original_class{
background:black;
color:white;
}
.overwrite{
@import(.original_class); /* I know this doesn't work */
color:blue;
border:1px solid green;
} 
```

我可以通过重新声明 .original_class 并分配新值来实现这一点（因为 CSS 样式是从上到下重写的），但这将替换原始 CSS 类的属性。我想要的是将其属性继承到另一个类中，而不必再次编写它们（重复）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T13:54:36.957

您可以通过用逗号（[分组选择器](http://www.w3.org/TR/CSS2/selector.html#grouping)`.overwrite`）将选择器与现有选择器分隔来将选择器添加到第一条规则，因此选择器规则变为：`.original_class, .overwrite`

```
.original_class,
.overwrite {
background: black;
color: white;
}
.overwrite {
color: blue;
border: 1px solid green;
} 
```

另外，当你写：

> 这将替换原始 CSS 类的属性

CSS中没有属性和类之类的东西，我猜不是OOP的预期含义。有规则、选择器规则（选择 HTML id、类、元素、属性和其他伪）、声明、属性和值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T09:37:50.800

不直接，不。

你可以在你的 HTML 中做这样的事情：

```
<div class="original_class overwrite">...</div> 
```

这将具有相同的效果，但是您必须对您希望以这种方式设置样式的每个元素执行此操作。

还可以选择使用 CSS 预处理器，如[SASS](http://sass-lang.com/)，它支持继承/混合。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T09:38:01.050

不幸的是没有。至少不是没有那些我不会用一英里长的杆子碰触的花哨的 CSS 插件东西之一……

当然，没有什么能阻止您在单个元素上拥有多个类。

# c# - 未捕获异常

> ID：10751967
> 
> 赞同：4
> 
> 时间：2012-05-25T09:35:44.550
> 
> 标签：c#, .net, winforms, exception-handling

我有一个带有 Win7 的 64 位系统，我使用带有 .Net Framework 4.0 的 VS2010。

在 Winform 应用程序中，我从第三方组件获得异常，我试图用 Try-Catch 捕获此异常，但它不起作用！

为什么？

![在此处输入图像描述](../Images/e1964e1755aecb872253f928c1e9c9d4.png)

**更新**

如果我取消选中 CLR 异常它可以正常工作，但由于这个已知问题我不得不检查它：[为什么表单加载无法捕获异常？](https://stackoverflow.com/q/3209706/735864)

如果我按 F10 它将继续进入 catch 语句！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T09:44:07.787

似乎您在这里使用调用非托管 dll。尝试使用[ExternalException Class](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.externalexception%28v=VS.100%29.aspx)捕获此异常。这可能对您有用，但是一旦您脱离了 .NET 运行时的控制，这完全取决于非托管代码；.NET 运行时无能为力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T10:00:31.010

您是否未选中以下设置：

> 当异常跨越 AppDomain 或托管/本机边界时中断（仅限托管）

在 Visual Studio 2010 的 Tools->Options->Debugging->General 选项卡中

它在 MSDN 中[解释](http://msdn.microsoft.com/en-us/library/85yzd16c%28v=vs.80%29.aspx)

# sharepoint - 将值添加到包含查找字段的列表

> ID：10751975
> 
> 赞同：0
> 
> 时间：2012-05-25T09:36:16.120
> 
> 标签：sharepoint, sharepoint-2010

我有一个名为“名称”的列表，其中包含名称代码和名称。我有另一个名为“员工”的列表，其中包含员工姓名和指定名称（作为查找字段）。我可以使用以下代码将值插入“员工”列表。

```
 protected void AddEmp(object sender, EventArgs e)
    {
      string emp_name = txtEmployeeName.Text;
      string emp_designation = ddlDesignation.SelectedValue;                    
      using (SPSite site = new SPSite("My Site"))
      {
       using (SPWeb web = site.OpenWeb())
       {
        SPSecurity.RunWithElevatedPrivileges(delegate()
        {
         web.AllowUnsafeUpdates = true;
         SPList splist_employees = web.Lists["Employee"];
         SPList splist_designations = web.Lists["Designations"];
         SPListItemCollection splc_items = splist_employees.Items;
         SPListItem spli_item = splc_items.Add();
         SPFieldLookup lookup = splist_employees.Fields["Designated"] as SPFieldLookup;
         string fieldName = lookup.LookupField;
         spli_item["Employee Name"] = emp_name;
         spli_item[fieldName] = GetLookFieldIDS(emp_designation, splist_designations);
         spli_item.Update();
         });
        }
      }
    }

    public static string GetLookFieldIDS(string lookupValues, SPList lookupSourceList)
    {
     string id = string.Empty;
     SPFieldLookupValueCollection lookupIds = new SPFieldLookupValueCollection();
     SPQuery query = new Microsoft.SharePoint.SPQuery();
     query.Query = "<Where><Eq><FieldRef Name='Designation' /><Value type='Text'>"+lookupValues + "</Value></Eq></Where>";
     SPListItemCollection listItems = lookupSourceList.GetItems(query);
     foreach (Microsoft.SharePoint.SPListItem item in listItems)
     {
      id = item.ID.ToString();
     }
     return id;
    } 
```

在这里，我在查询中将字段名称指定为“指定”。

但是，我想根据用户端给出的值来查找字段名称，而不是将字段名称硬编码为“指定”。

任何帮助是极大的赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T13:29:30.453

不确定您的请求，但您可以将[SPFieldLookup.LookupField](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spfieldlookup.lookupfield)属性传递给您的 GetLookFieldIDS 方法并使用该变量而不是“指定”

```
spli_item[fieldName] = GetLookFieldIDS(emp_designation, splist_designations, lookup.LookupField); 
```

# python - SVN - 工作副本版本/格式问题

> ID：10751978
> 
> 赞同：1
> 
> 时间：2012-05-25T09:36:29.350
> 
> 标签：python, svn

我在尝试在我的 SVN 版本和我的工作副本之间找到平衡时遇到了问题。最初我收到一条消息，告诉我升级工作副本，我照做了。现在我被告知要降级工作副本（不像升级那么简单），或者升级你的 SVN 版本，这是不可能的。

我发现了一个用于救援的 python 脚本，它是 change-svn-wc-format.py。建议您按以下方式运行....

`python change-svn-wc-format.py WC-PATH svn version`

我现在收到此错误：

```
 ERROR: Unsupported version number '1.7.5'; only 1.4, 1.5, and 1.6 can
 be supported 
```

所以我更改为 1.6 版，现在我得到：

```
Unrecognized WC format 12 in WC PATH only formats 8, 9, and 10 can be supported 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T10:02:59.310

我认为您应该将您的 svn 客户端更新到 1.7.5。另一种方法是删除本地副本并将其从服务器中检出。

此链接也可能有帮助：[如何降级 SVN 工作副本的版本？](https://stackoverflow.com/questions/716021/how-can-i-downgrade-the-version-of-an-svn-working-copy)

# c# - 更新通用列表 使用 LINQ

> ID：10751979
> 
> 赞同：1
> 
> 时间：2012-05-25T09:36:34.827
> 
> 标签：c#, .net, linq, list

我正在寻找一种更新通用列表项的索引属性的方法。

例如我有一堂课：

```
public class ItemInfo
{
        public int SRNO { get; set }

        public Name{ get; set }
} 
```

现在我有`List<ItemInfo> myList`很多项目。

并希望使用递增值更新每个 Item 的 ItemInfo.SRNO

就像如果列表项有 10 个项目，那么“SRNO”应该像这样更新

```
1
2
.
.
.
10 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T09:44:12.720

实际上你不需要这样的LINQ：

```
infoList.Select((info, i) => { info.SRNO = i + 1; return info }); 
```

或者

```
Enumerable.Range(0, infoList.Count).Select(i =>
    {
        var info = infoList[i];
        info.SRNO = i+1;
        return info;
    }); 
```

* * *

使用简单的`for`循环：

```
for (int i = 0; i < infoList.Count; i++)
{
    info[i].SRNO = i + 1;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T09:46:04.773

你将不得不这样做。LINQ 不支持副作用（按设计），因此您必须使用和命令式构造（例如 for 循环）遍历列表。

```
for(var i = 0;i<infoList.Count;){
    infoList[i].SRNO = ++i;
} 
```

您可以违反很多 linq 方法的意图，并让它们做它们不打算做的事情。例如，在 where project 或 select 操作数据（至少通过引用。但它们从未为此设计，并且生成的代码通常令人眼花缭乱。

在特定情况下使用适合您需要的构造，使用旨在产生副作用的东西。

# .net - 需要：将节点转换为其十六进制值的 xsl:template？

> ID：10751983
> 
> 赞同：4
> 
> 时间：2012-05-25T09:36:52.287
> 
> 标签：.net, xslt, hexavigesimal

我几乎可以在这里说：“@##$# 是什么`hexavigesimal`值？”

> 十六进制数字系统以二十六为底。或者，base-26 可以仅使用拉丁字母表示。由于英语中有 26 个字母，base-26 也是可能的最高基数，因此会利用每个字母。0 由 A 表示，1 = B，2 = C ... 24 = Y，25 = Z。一些示例：26 = AA，30 = BE

所以它基本上就是 Excel 使用的列描述。我想要一个将具有 int 值的节点转换为该值的函数。

来源：

```
<root>
  <row>12</row>
  <column>23</column>
</root> 
```

我想通过调用进行转换的模板`column`来打印。`X`可以做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T11:11:59.293

试试这个 XSLT...

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>

   <xsl:variable name="symbols" select="'ABCDEFGHIJKLMNOPQRSTUVWXYZ'" />
   <xsl:variable name="symbols-count" select="string-length($symbols)" />
   <xsl:template match="row">
      <row>
      <xsl:call-template name="convert" />
      </row>
   </xsl:template>

   <xsl:template name="convert">
      <xsl:param name="value" select="number(.)" />
      <xsl:choose>
         <xsl:when test="$value >= $symbols-count">
            <xsl:variable name="div" select="floor($value div $symbols-count)" />
            <xsl:variable name="remainder" select="$value - $div * $symbols-count" />
            <xsl:call-template name="convert">
               <xsl:with-param name="value" select="$div" />
            </xsl:call-template>
            <xsl:value-of select="substring($symbols, $remainder + 1, 1)" />
         </xsl:when>
         <xsl:otherwise>
            <xsl:value-of select="substring($symbols, $value + 1, 1)" />
         </xsl:otherwise>
      </xsl:choose>
   </xsl:template>

   <xsl:template match="@*|node()">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>
</xsl:stylesheet> 
```

应用于以下 XML 时

```
<root>
   <row>12</row>
   <column>23</column>
   <row>26</row>
   <column>23</column>
</root> 
```

以下是输出

```
<root>
  <row>M</row>
  <column>23</column>
  <row>BA</row>
  <column>23</column>
</root> 
```

您应该能够调整**符号**变量以允许任何花哨的命名转换。例如，要转换为十六进制，请将其更改为以下

```
<xsl:variable name="symbols" select="'0123456789ABCDEF'" /> 
```

并转为二进制

```
<xsl:variable name="symbols" select="'01'" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T11:18:49.957

您可能会发现它`<xsl:number value="$n" format="A"/>`可以满足您的需求，但不能保证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T13:12:04.317

**在 XSLT 1.0 中使用**：

```
 <xsl:template name="toHex">
   <xsl:param name="decimalNumber" />
   <xsl:if test="$decimalNumber >= 16">
     <xsl:call-template name="toHex">
       <xsl:with-param name="decimalNumber" 
              select="floor($decimalNumber div 16)" />
       </xsl:call-template>
   </xsl:if>
   <xsl:value-of select=
      "substring($hexDigits, ($decimalNumber mod 16) + 1, 1)" />
 </xsl:template> 
```

`$hexDigits`字符串在哪里`'0123456789ABCDEF'`。

**这是一个完整的例子**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="text"/>

    <xsl:variable name="hexDigits" select="'0123456789ABCDEF'"/>

    <xsl:template match="/*">
      <xsl:call-template name="toHex"/>
    </xsl:template>

    <xsl:template name="toHex">
        <xsl:param name="decimalNumber" select="." />
        <xsl:if test="$decimalNumber >= 16">
            <xsl:call-template name="toHex">
                <xsl:with-param name="decimalNumber" select=
                  "floor($decimalNumber div 16)" />
            </xsl:call-template>
        </xsl:if>
        <xsl:value-of select=
         "substring($hexDigits, ($decimalNumber mod 16) + 1, 1)" />
    </xsl:template>
</xsl:stylesheet> 
```

**当将此 XSLT 1.0 转换应用于此 XML 文档时：**

```
<t>12345</t> 
```

**产生了想要的正确结果：**

```
3039 
```

**另请参阅我对这个问题的回答**：

[https://stackoverflow.com/a/3053656/36305](https://stackoverflow.com/a/3053656/36305)

# c# - 部署报告显示错误

> ID：10751985
> 
> 赞同：1
> 
> 时间：2012-05-25T09:36:56.853
> 
> 标签：c#, visual-studio-2008, sql-server-2008-r2, ssrs-2008

我正在为我的报告使用 SSRS 2008 R2。

我一直在本地环境中工作，部署到本地服务器没有问题。现在我想将所有报告部署到实时服务器，但是当我尝试通过更改目标服务器 url 然后提供用户名和密码来部署到实时服务器时。它显示错误。（我从 VS 2008 部署）

```
===================================

Could not connect to the report server http://192.168.0.217/ReportServer. Verify that the TargetServerURL is valid and that you have the correct permissions to connect to the report server. (Microsoft SQL Server Report Designer)

===================================

The underlying connection was closed: An unexpected error occurred on a receive. (System.Web.Services)

------------------------------
Program Location:

   at System.Web.Services.Protocols.WebClientProtocol.GetWebResponse(WebRequest request)
   at System.Web.Services.Protocols.HttpWebClientProtocol.GetWebResponse(WebRequest request)
   at System.Web.Services.Protocols.SoapHttpClientProtocol.Invoke(String methodName, Object[] parameters)
   at Microsoft.SqlServer.ReportingServices2006.ReportServiceAuthentication.GetAuthenticationMode()
   at ReportServiceClient2010.CheckAuthenticated()
   at Microsoft.ReportDesigner.Project.ReportClientManager.DetectEndpointAndAuthenticate(String url, ICredentials credentials, String& authCookieName, Cookie& authCookie, EndpointType& endpointType)
   at Microsoft.ReportDesigner.Project.ReportClientManager.DetectEndpointAndAuthenticate(String url, ConnectionProperties& connectionProperties)
   at Microsoft.ReportDesigner.Project.ReportClientManager.GetCredentials(String url, CancelFlag cancelFlag)
   at Microsoft.ReportDesigner.Project.ReportProjectDeployer.PrepareDeploy()

===================================

Unable to read data from the transport connection: An existing connection was forcibly closed by the remote host. (System)

------------------------------
Program Location:

   at System.Net.Sockets.NetworkStream.Read(Byte[] buffer, Int32 offset, Int32 size)
   at System.Net.PooledStream.Read(Byte[] buffer, Int32 offset, Int32 size)
   at System.Net.Connection.SyncRead(HttpWebRequest request, Boolean userRetrievedStream, Boolean probeRead)

===================================

An existing connection was forcibly closed by the remote host (System)

------------------------------
Program Location:

   at System.Net.Sockets.Socket.Receive(Byte[] buffer, Int32 offset, Int32 size, SocketFlags socketFlags)
   at System.Net.Sockets.NetworkStream.Read(Byte[] buffer, Int32 offset, Int32 size) 
```

但我可以通过提供凭据从本地计算机浏览报表服务器。有谁知道这个的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T16:04:22.940

试试这个，应该很有帮助。还可以尝试使用 SSRS 服务器本身的上传工具来一一上传报告 [http://www.sqlservercentral.com/Forums/Topic1135602-150-1.aspx#bm1135709](http://www.sqlservercentral.com/Forums/Topic1135602-150-1.aspx#bm1135709)

# .net - XSLT Position() 基于列值

> ID：10751990
> 
> 赞同：1
> 
> 时间：2012-05-25T09:37:32.220
> 
> 标签：.net, xslt, xslt-1.0

每当“column3”的值发生变化时，我都会尝试在行之间创建一个间隙。目前，间隙设置为每 2 行出现一次，这不是我需要的。例如，前 10 行中 'column3' 的值是 1,1,3,3,3,3,5,5,5,5 我想要最后一个 '1' 和第一个 '3' 等之间的间隙.

```
 <xsl:for-each select="Market">
        <tr>
          <td>
            <xsl:value-of select="Column1"/>
          </td>
          <td>
            <xsl:value-of select="Column2"/>
          </td>
          <td>
            <xsl:value-of select="Column3"/>
          </td>
        </tr>
          <xsl:if test="(position() mod 2 = 0)">
          <tr>
            <td colspan="5" height="25px" />
          </tr>
        </xsl:if> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T09:52:12.527

您可以使用 XPath 中的**以下兄弟**轴来执行此操作。

```
<xsl:if test="Column3 != following-sibling::Market[1]/Column3"> 
```

即下一个**Market**元素是否有一个具有不同值的**Column3元素。**

例如，给定以下 XML

```
<Markets>
    <Market>
        <Column1>A</Column1>
        <Column3>1</Column3>
    </Market>
    <Market>
        <Column1>A</Column1>
        <Column3>1</Column3>
    </Market>
    <Market>
        <Column1>A</Column1>
        <Column3>3</Column3>
    </Market>
    <Market>
        <Column1>A</Column1>
        <Column3>3</Column3>
    </Market>
    <Market>
        <Column1>A</Column1>
        <Column3>3</Column3>
    </Market>
    <Market>
        <Column1>A</Column1>
        <Column3>3</Column3>
    </Market>
    <Market>
        <Column1>B</Column1>
        <Column3>4</Column3>
    </Market>
    <Market>
        <Column1>B</Column1>
        <Column3>4</Column3>
    </Market>
</Markets> 
```

当您应用以下 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="html" indent="yes"/>
   <xsl:template match="/Markets">
      <table>
         <xsl:apply-templates select="Market"/>
      </table>
   </xsl:template>

   <xsl:template match="Market">
      <tr>
         <td>
            <xsl:value-of select="Column1"/>
         </td>
         <td>
            <xsl:value-of select="Column3"/>
         </td>
      </tr>
      <xsl:if test="Column3 != following-sibling::Market[1]/Column3">
         <tr>
            <td colspan="2" height="25px"/>
         </tr>
      </xsl:if>
   </xsl:template>
</xsl:stylesheet> 
```

然后输出如下

```
<table>
   <tr>
      <td>A</td>
      <td>1</td>
   </tr>
   <tr>
      <td>A</td>
      <td>1</td>
   </tr>
   <tr>
      <td colspan="2" height="25px"/>
   </tr>
   <tr>
      <td>A</td>
      <td>3</td>
   </tr>
   <tr>
      <td>A</td>
      <td>3</td>
   </tr>
   <tr>
      <td>A</td>
      <td>3</td>
   </tr>
   <tr>
      <td>A</td>
      <td>3</td>
   </tr>
   <tr>
      <td colspan="2" height="25px"/>
   </tr>
   <tr>
      <td>B</td>
      <td>4</td>
   </tr>
   <tr>
      <td>B</td>
      <td>4</td>
   </tr>
</table> 
```

（注意，为了简洁起见，我错过了 Column2）。

# oracle-adf - 更改 ADF 查询面板的默认组件

> ID：10751998
> 
> 赞同：0
> 
> 时间：2012-05-25T09:37:58.693
> 
> 标签：oracle-adf

在我的 JSPX 页面中，我通过将 View Criteria (VC) 拖放到页面来创建了一个搜索页面。默认情况下，组件是文本框。我想要做的是将其中一些更改为使用其他组件，例如 selectOneChoice 组件，与另一个实体对象 (EO) 绑定，或者可能添加一个日期选择器。

这可能吗？还是我必须坚持默认设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T19:17:15.423

这是所有可以在属性下的视图对象中完成的事情。对于日期属性，请确保类型设置为日期。我还没有完成这个，但是对于 selectOneChoice 组件，我假设您可以在基于另一个视图对象的所需属性上定义一个值列表。编辑属性时，还要查看控制提示的控制类型字段。如果您在搜索中使用绑定变量，我相信您也可以在那里定义这些属性。