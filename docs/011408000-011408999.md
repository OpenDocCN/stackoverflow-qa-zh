# StackOverflow 问答 11408000-11408999

# nsstring - 如何将 NSString 直接分配给 NSMutableData？

> ID：11408000
> 
> 赞同：0
> 
> 时间：2012-07-10T06:46:52.970
> 
> 标签：nsstring, aes, nsmutabledata

我正在开发一个包括 sqlite 数据库的应用程序。我想使用 AES 加密对数据库内的数据进行加密和解密。我已成功实施 AES 加密并将加密数据插入数据库中。并将数据提取到 NSString 中。

那么如何在不将字符串值更改为 NSMutableData 的情况下分配该字符串。因为我想将该数据传递给 AES 解密方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T06:57:21.937

这是 NSString <-> NSData 转换的一些示例：

```
NSString *someString = @"string";

//NSString to NSData
NSData* data=[someString dataUsingEncoding: [NSString defaultCStringEncoding]];

//NSData to NSString
someString = [[NSString alloc] initWithData:data encoding:[NSString defaultCStringEncoding]];

NSLog(@"%@", someString); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T06:43:52.607

```
NSString *someString= @"This string will be converted to mutableData in the next line";

NSMutableData *someData = [[someString dataUsingEncoding:NSUTF8StringEncoding] mutableCopy]; 
```

# php - 瓶颈问题mysql

> ID：11408001
> 
> 赞同：1
> 
> 时间：2012-07-10T06:46:56.310
> 
> 标签：php, mysql, optimization

我有这个项目拍卖门户，问题是有时用户无法出价或更好的词是请求出价**有时**需要 2-3 秒才能注册，冲突是在系统检测到有人之前拍卖已经关闭出价。

我添加了一个日志来查看发生了什么，这是我发现的：

```
Bid insert date        |    Auction close date
2012-06-25 14:40:57         2012-06-25 14:40:54 
```

如您所见，拍卖已经结束，但出价处理晚了 3 秒。澄清一下，如果拍卖已经结束，用户就不能出价，所以我确信请求是在结束之前提出的。

这发生在每天 1 次拍卖中，我不知道是什么引发了这个问题。我正在使用 PHP 和 MySQL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T06:59:30.540

一个可能的原因是用户加载了包含“出价”按钮的页面，拍卖结束，按钮仍然存在，并且相应地执行了操作。如果您*在插入之前*验证拍卖是否已关闭，则永远不会发生这种情况。SELECT 和 INSERT 之间的时间不应大于 0.1 秒。我假设您在添加最后一个出价之前没有验证拍卖的状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T08:21:43.197

2-3秒？

您在出价请求时运行了多少查询？我会想象：

1）用户是否登录？2) 是否有账户允许出价？3) 拍卖还开着吗？4) 发布投标

我不会想象这 4 个查询会花费超过一秒钟的时间来运行，除非您编写的查询非常糟糕。您使用的是什么 MySQL DB 层？您是否确保您的代码尽可能精简？即您多久打开一次数据库等。

如果他们出价并且拍卖在他们的出价被处理之前完成，那么艰难的cookie。你没有赢。同样的事情有时会在 eBay 上发生，而且很艰难。如果问题是您的系统允许延迟出价获胜，那么您需要在这方面重新访问您的代码。在保存出价之前，最后一次出价尝试肯定会检查拍卖是否仍在运行。这不应该花费任何时间来完成。

也许您也应该查看表索引。太少，数据搜索慢，太多，影响数据插入速度。

可能有很多错误，从简单的索引错误到狡猾的查询/循环/等等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T06:51:45.200

不匹配确切的关闭时间戳，但将其与（关闭时间 - 周转时间）进行比较。

假设关闭时间是 14:00:00，请求的周转时间是 10 秒。然后，如果在 13:59:50 之前提出请求，则只会考虑。

# sql - 将数据从 Excel 导入 SQL Server 中的主明细表

> ID：11408005
> 
> 赞同：0
> 
> 时间：2012-07-10T06:47:14.807
> 
> 标签：sql, sql-server, sql-server-2008, tsql, dts

我有一个有四列的 excel 表

```
SaleID, SaleDate,PersonID, ProductID, SaleQuantity,UnitRate 
```

我想将此数据导入一对多关系表中，以便每个人的销售都应单独记录。我的表格如下

```
Sale Master
SaleID,SaleDate,PersonID

SaleDetail
SaleID,productID,SaleQuantity,UnitRate 
```

我正在尝试按照[此处](http://www.mssqltips.com/sqlservertip/1207/different-options-for-importing-data-into-sql-server/)的说明进行操作。我尝试了以下查询以开始

```
SELECT * FROM OPENROWSET('Microsoft.ACE.OLEDB.12.0','Excel 12.0;Database=d:\tmp.xlsx', 'Select * from [aa$]') 
```

但它给了我以下错误

```
OLE DB provider "Microsoft.ACE.OLEDB.12.0" for linked server "(null)" returned message "The Microsoft Office Access database engine could not find the object 'aa$'.  Make sure the object exists and that you spell its name and the path name correctly.". 
```

有没有其他更好的方法来做到这一点

![在此处输入图像描述](../Images/104fa65b7f37de9380a5b9323358e81f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T19:52:55.413

好的，我不确定我是否按照您的意愿执行此操作。因为我看到我可以使用 SSIS，所以我使用了 SSIS。首先，我创建了一个示例 Excel 文件。你说它有四列，但我看到六列：

> SaleID、SaleDate、PersonID、ProductID、SaleQuantity、UnitRate

在我的测试数据库中，我创建了两个表来将数据导入到：

```
CREATE TABLE SalesMaster (
SalesID INT NOT NULL,
SalesDate DATE,
PersonID INT
    CONSTRAINT PK_SalesMaster_SalesID
        PRIMARY KEY (SalesID))

CREATE TABLE SalesDetail (
ProductID INT NOT NULL,
SalesQuantity INT,
UnitRate MONEY,
SalesID INT
    CONSTRAINT PK_SalesDetail_ProductID
        PRIMARY KEY (ProductID),
    CONSTRAINT FK_SalesDetail_SalesMaster_SalesID
        FOREIGN KEY (SalesID)
            REFERENCES SalesMaster(SalesID)) 
```

然后我为该任务创建了一个 SSIS 包。首先在控制流上，我使用了两个数据流任务。第一个用于填充 SalesMaster 表，第二个用于填充 SalesDetail 表。

每个数据流任务都有 Excel 源适配器和 OLE DB 目标适配器。配置 Excel 源时，请确保正确映射 Excel 文件中的列。然后运行该软件包，它应该可以完成这项工作。

希望这就是你要找的。谢谢！

# c - 与 pthread 并发，典型的不当行为

> ID：11408007
> 
> 赞同：1
> 
> 时间：2012-07-10T06:47:18.260
> 
> 标签：c, concurrency, pthreads

我不确定下面的程序有什么问题，但它不会打印每种语言一次，而是随机地多一些，少一些，有些不会打印

```
#include <pthread.h>
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>

char *messages[] = { 
    "English: Hello World!", 
    "French: Bonjour, le monde!",
    "Spanish: Hola al mundo", 
    "Klingon: Nuq neH!",
    "German: Guten Tag, Welt!", 
    "Russian: Zdravstvytye, mir!",
    "Japan: Sekai e konnichiwa!", 
    "Latin: Orbis, te saluto!"
};
#define NUM_MESSAGES (sizeof( messages ) / sizeof( char* ))

void *PrintHello( void *messageid )
{
    pthread_t taskid;
    int *id_ptr, message_num;

    taskid = pthread_self();
    printf( "This is thread with ID %lu.\n", taskid );

    message_num = *((int *) messageid);
    printf( "%s \n", messages[message_num] );

    pthread_exit( NULL );
}

int main( int argc, char *argv[] ) 
{
    pthread_t threads[NUM_MESSAGES];
    int rc, i;

    for( i = 0; i < NUM_MESSAGES; i++ ) {
        void * argument = (void*) &i;
        rc = pthread_create( &threads[i], NULL, PrintHello, argument );
        if( rc ) {
            printf( "ERROR; return code from pthread_create() is %d\n", rc );
            exit( -1 );
        }
    }

    for( i = 0; i < NUM_MESSAGES; i++ ) {
        pthread_join( threads[i], NULL );
    }

    pthread_exit( NULL );
} 
```

我猜这个问题与参数指针有关。我试图锁定不同的部分，但没有成功。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T06:57:28.433

您正在传递**主线程不断变化**`i`的变量地址。所以你受调度的摆布：在你的线程有机会运行之前有人会改变吗？**`i`**

 **相反，您可以尝试直接传递字符串，从而大大简化代码：

```
rc = pthread_create( &threads[i], NULL, PrintHello, messages[i]);

void *PrintHello(void *arg)
{
    char *msg = arg;
    printf("%s\n", msg);

    return NULL;
} 
```

* * *

还有另一种更糟糕的选择，您将实际值`i`作为参数（而不是它的地址）传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T07:08:11.510

这是一个典型的`race`情况。
确切的说，新线程创建后，线程的执行顺序决定了程序的结果。有两种情况：

1.  当线程函数`PrintHello`在下一个增量`i++`和线程分配之前执行`void * argument = (void*) &i;`时`main`，它会输出您期望的内容。

2.  当新线程`PrintHello`已创建但直到下一个线程中`i++`执行时才被调度`main`。在这种情况下，您`argument`在线程函数中的引用，即`message_num = *((int *) messageid);`不是您所期望的。

对此的解决方案是动态分配（使用`malloc`）`argument`，并`free`在使用后将它们放在线程函数中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T08:43:33.120

将标量整数参数传递给线程函数的一种方法是（ab-）使用 C99 标准第 6.3.2.3 节中的以下文本：

> (5) 整数可以转换为任何指针类型。除非前面指定，结果是实现定义的，可能没有正确对齐，可能不指向引用类型的实体，并且可能是陷阱表示。

除了第二句的最后一部分，以下代码应该适用于大多数系统：

```
int int_val;
...
pthread_create(..., ..., thread_func, (void *)int_val); 
```

然后`thread_func`将其转换回整数：

```
void *thread_func (void *data)
{
    int int_arg = (int)data;
    ...
} 
```**

# vba - VBA-需要创建一个函数，将范围作为输入

> ID：11408013
> 
> 赞同：2
> 
> 时间：2012-07-10T06:47:44.547
> 
> 标签：vba, excel

我在 Excel 中有一个二维表。例如。

```
outputproduct      blending combination
**5                P1:0.6/P3:0.5**
  2                P1:0.3/P2:0.7
  4                P5:0.4/P2:0.7
  7                P11:0.7/P7:0.4 
```

假设表格的范围从 B2:C6 变化（它可以变化）。我必须创建一个函数，其首要任务是读取此范围（这将是用户定义的输入），然后将数据存储到二维数组中，以便我可以使用第一列中的数据（整数）和第二列中的字符串，适当地。

第一列是合成产品索引，而第二列是给定比例的混合产品，它们组合在一起得到第一列中的产品。

然后是另一个表：

```
product index      current stock    updated stock
      **1**             **10**
        2                 20 
      **3**             **50**
        4                 15
      **5**             **100**
        .                 .
        .                 .
        .                 . 
```

我必须在数据处理后更新此表中的库存量。例如，产品 1 与产品 3 以 6:5（单位）的比例组合时，生产 1 单位产品 5。因此，我必须更新表 2 中每种产品的库存量。

任何建议，如何将范围转换为二维数组？

```
Public Function Blending_function( R1 as Range, R2 as Range)
 ' R2 is the range of table 2, where the updating is to be done
 ' R1 is first stored in to a 2 dimensional array, such that the data in the
 ' column 1 could be read, and the data in the column 2 could be read (of table 1).
 ' the integer in the column 1 of table 1 refers to the product index in table 2.
 ' P(i) stands for the ith product. In first row of table-1, P1 and P3 combine in the 
 ' ratio of 6:5 to give P5\. The current stock of each product is provide in table-2,
 ' whose range is R2(entire table 2).

 ' R1 is the range of table 1, from where the processing is to be done

End Function 
```

我的主要障碍是将范围 R1（表 1）转换为二维数组。然后从该数组中查找输出产品的索引，并在表 2 中找到该产品以更新库存水平。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T10:21:01.300

这是有关如何使用 2D 数组的示例。该函数将分解`blending combination`并提取您想要的值，以便您可以使用它们。

```
Sub Sample()
    Dim Rng1 As Range, Rng2 As Range

    On Error Resume Next
    Set Rng1 = Application.InputBox("Please select the Table1 Range", Type:=8)
    On Error GoTo 0

    If Rng1.Columns.Count <> 2 Then
        MsgBox "Please select a range which is 2 columns wide"
        Exit Sub
    End If

    On Error Resume Next
    Set Rng2 = Application.InputBox("Please select the Table2 Range", Type:=8)
    On Error GoTo 0

    If Rng2.Columns.Count <> 3 Then
        MsgBox "Please select a range which is 3 columns wide"
        Exit Sub
    End If

    Blending_function Rng1, Rng2

End Sub

Public Function Blending_function(R1 As Range, R2 As Range)
    Dim MyAr1 As Variant, MyAr2 As Variant
    Dim i As Long
    Dim blndCom As String, OutputPrd As String
    Dim ArP1() As String, ArP2() As String, tmpAr() As String

    MyAr1 = R1

    For i = 2 To UBound(MyAr1, 1)
        OutputPrd = MyAr1(i, 1)
        blndCom = MyAr1(i, 2)
        tmpAr = Split(blndCom, "/")

        ArP1 = Split(tmpAr(0), ":")
        ArP2 = Split(tmpAr(1), ":")

        Debug.Print OutputPrd
        Debug.Print Trim(ArP1(0))
        Debug.Print ArP1(1)
        Debug.Print ArP2(0)
        Debug.Print ArP2(1)
        Debug.Print "-------"
    Next
End Function 
```

**快照**

![在此处输入图像描述](../Images/80792dcbe0fbabb17b30d0211f6ec00a.png)

获得这些值后，您可以使用它在范围内`.Find`搜索，然后使用它来输入您的公式。`product index``R2``.Offset`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T07:08:44.863

我不确定我是否理解了整个故事，但这就是返回
多维数组的函数的样子：

```
Public Sub Main_Sub()

Dim vArray_R1()                     As Variant
Dim oRange                          As Range

Set oRange = ThisWorkbook.Sheets(1).Range("A1:B5")
vArray_R1 = Blending_function(oRange)
'You do the same for The second array.     

set oRange = nothing

End Sub

Public Function Blending_function(R1 As Range)

 Dim iRange_Cols As Integer
 Dim iRange_Rows As Integer

iRange_Cols = R1.Columns.Count
iRange_Rows = R1.Rows.Count

'Set size of the array (an existing array would be cleared)
ReDim vArray(1 To iRange_Rows, 1 To iRange_Cols)

vArray = R1
Blending_function = vArray

End Function 
```

第二种选择可能是声明函数返回一个布尔值，因为参数是标准的由 Ref 发送的；您可以仅在主子中声明范围和数组，并在函数中同时转换它们。我不会选择此选项，因为之后您将无法重新使用该函数将其他范围转换为数组。

补充信息：这种技术是双向的。之后您可以定义一个范围并执行以下操作：

```
set oRange = vArray 
```

这是在 Range 与数组大小相同的条件下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T07:06:11.160

```
row = 2
column = "B"
Do While Len(Range(column & row).Formula) > 0
    ' repeat until first empty cell in column 'column'(user input)
    ' read (column, row) and (column+1, row) value
     Cells(row, column).Value
     Cells(row, column+1).value
    ' store in Array
Loop 
```

# android - GPS OnPause 代码不会关闭 GPS

> ID：11408018
> 
> 赞同：5
> 
> 时间：2012-07-10T06:47:59.563
> 
> 标签：android

即使我安装了 OnPause 代码来停止 GPS 服务，GPS 也不会停止。这是我的代码。

```
 @Override
    protected void onPause() {
        if(lm != null) {
            lm.removeUpdates(ll);
        }
        ll = null;
        lm = null;
        super.onPause();
    } 
```

只要 lm 和 ll 被全局声明为受保护的变量，此代码就可以正常运行。问题是我离开程序后 GPS 图标一直亮着。如何关闭 GPS？我已经在手机和模拟器上对此进行了测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T07:34:50.803

正如文档所说的那样[removeUpdates(LocationListener listener)](http://developer.android.com/reference/android/location/LocationManager.html)：

> 使用给定的 LocationListener 删除当前活动的位置更新的任何当前注册。

您的当前代码仅使用给定的 LocationListener 删除当前活动的位置更新的任何当前注册，而不是停止 GPS 或从状态栏中删除图标。所以您是否要停止 GPS，那么您有两个解决方案

**第一个解决方案：**通过代码停止（仅适用于 Android 2.3 以下）：

```
 try{
    String provider = Settings.Secure.getString(getContentResolver(), Settings.Secure.LOCATION_PROVIDERS_ALLOWED);

    if(!provider.contains("gps")){
         final Intent poke = new Intent();
         poke.setClassName("com.android.settings", "com.android.settings.widget.SettingsAppWidgetProvider"); 
         poke.addCategory(Intent.CATEGORY_ALTERNATIVE);
         poke.setData(Uri.parse("3")); 
         sendBroadcast(poke);
     }
     }
     catch(Exception e)
     {
      Log.d("Location", " exception thrown in enabling GPS "+e);
     } 
```

Manifest.xml 中的权限：

```
android.permission.WRITE_SECURE_SETTINGS 
```

**第二个解决方案：**启动 Gps 设置活动：

```
startActivityForResult(new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS), 1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T02:13:21.320

我的问题是位置管理器和位置侦听器名称在更改位置代码中被重新定义，因此它们不是全局语句中引用的全局名称。我从 YouTube 教程中复制了这段代码，我假设许多其他人也有同样的问题。一旦我删除了重新定义，当屏幕向后箭头时，GPS 几乎立即关闭。事实上，GPS 掉得太快了，这是我现在需要处理的问题。

见[lm.removeUpdate(ll); 不发布更新](https://stackoverflow.com/questions/11497810/lm-removeupdatell-not-releasing-updates)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T06:56:28.797

在你的 onPause() 中使用它

```
protected void onPause() 
{
    super.onPause();
    mylocaationoverlay.disableCompass();
    removeLocationUpdates();
} 
```

这将是您的 removeLocationUpdates()

```
public void removeLocationUpdates()
{
    if(locationManager_ != null && myLocationListener_ != null)
        locationManager_.removeUpdates(myLocationListener_);
} 
```

或者试试这个： [onPause 停止 LocationManager](https://stackoverflow.com/a/8548899/1351659)

# c++ - c++ 使用来自文本文件的输入案例进行测试

> ID：11408020
> 
> 赞同：1
> 
> 时间：2012-07-10T06:48:17.730
> 
> 标签：c++, testing

如何使用给定的输入测试用例测试 c++ 程序？

例如这样的输入

```
23 45 78 45 12 67 23 76 56 34
34 65 78 45 74 3  98 34 23 97 
```

我希望能够在运行时将这些数字从文本文件输入到程序中并测试预期的输出。我无法在控制台中手动输入数千个数字，那么有没有允许此类测试的软件？

这已经在[InterviewStreet](http://interviewstreet.com)中使用，他们使用给定的测试用例并匹配预期的输出来测试程序。

- 编辑 -

有什么办法可以将文本文件中的值传递到`stdin`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T07:08:21.143

您可以编写一个小 bash 脚本来运行所有测试。单个测试看起来像这样：

```
#!/bin/bash
testprog < input1.txt > output1.txt
diff expected_output1.txt output1.txt
# examine the return code of diff to see if the files are different? 
```

# r - 在 ggplot2 geom_text 中使用 plotmath 符号 - 图例被更改 - 为什么？

> ID：11408031
> 
> 赞同：2
> 
> 时间：2012-07-10T06:49:11.143
> 
> 标签：r, ggplot2

我想使用 ggplot2 在绘图中定位绘图符号（x 条）。不知何故，我这样做的方式改变了传说。字母“a”突然出现。我在这里哪里出错了？

```
d <- data.frame(x=rnorm(10), y=rnorm(10), g=rep(c("m", "w"), 5))
ggplot(d, aes(x, y, group=g, color=g)) + geom_point() +
    geom_text(x=0, y=0, label="bar(x)", parse=T) 
```

![](../Images/09835e2b336222bfa1ff431e8482b6da.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-10T07:04:17.840

这将解决问题：

```
ggplot(d, aes(x, y, group = g)) +   
  geom_point(aes(colour = g)) + 
  geom_text(x = 0, y = 0, label = "bar(x)", parse=T) 
```

只为点添加颜色。

或者，如果您想对绘图进行*注释*，则注释不会放在图例中，因此

```
ggplot(d, aes(x, y, group = g,colour = g)) +   
  geom_point() + 
  annotate('text',x = 0, y = 0, label = "bar(x)", parse=T) 
```

会工作。

# bash - Oracle expdp CentOS 6.2 Shell 脚本异常行为 - 新行给出命令未找到

> ID：11408032
> 
> 赞同：1
> 
> 时间：2012-07-10T06:49:13.563
> 
> 标签：bash, centos, oracle11gr2, rhel5

我的第一篇文章要温柔。

我有下面的脚本，它是从 RedHat 5.3 框中取出来备份 Oracle 数据库的。该脚本在 Redhat 5.3 机器上运行良好。然后，我将其用作在 centos 6.2 机器上备份 oracle 数据库的参考，并根据需要对其进行了修改。

```
#!/bin/bash
ORACLE_HOME="/u01/app/oracle/product/11.2.0/db_1"
NLS_LANG=AMERICAN_AMERICA.AR8ISO8859P6

BKDATE=`date "+%Y-%m-%d_%H-%M-%S"`
C1="system/password@dbname DIRECTORY=RMBACKUP SCHEMAS=USER1,USER2,USER3 DUMPFILE=dbname_"
C2="_full_pump.dmp LOGFILE=dbname_"
C3="_full_pump.log"
BKCMD=$C1$BKDATE$C2$BKDATE$C3
echo $C1
echo $C2
echo $C3
echo $BKDATE
echo $BKCMD
#run the exp backup
$ORACLE_HOME/bin/expdp $BKCMD 
```

奇怪的行为是，当我执行脚本时，新行会导致找不到命令错误，并且连接被合并，如下所示。

```
system/password@dbname DIRECTORY=RMBACKUP SCHEMAS=USER1,USER2,USER3 DUMPFILE=dbname_
_full_pump.dmp LOGFILE=dbname_
_full_pump.log
2012-07-10_09-39-06
system/password@dbname DIRECTORY=RMBACKUP SCHEMAS=USER1,USER2,USER3 DUMPFI_full_pump.log39-06ILE=dbname_
/bin/expdp: No such file or directoryacle/product/11.2.0/db_1 
```

与其他文本合并的日期不是错字，即回显输出。

我在开头添加了 set -x ，这是输出

```
+ ORACLE_HOME=$'/u01/app/oracle/product/11.2.0/db_1\r'
+ NLS_LANG=$'AMERICAN_AMERICA.AR8ISO8859P6\r'
++ date +%Y-%m-%d_%H-%M-%S
+ BKDATE=$'2012-07-10_10-27-45\r'
+ C1='system/password@dbname DIRECTORY=RMBACKUP SCHEMAS=USER1,USER2,USER3 DUMPFI'E=dbname_
' C2='_full_pump.dmp LOGFILE=dbname_
+ C3=_full_pump.log
+ BKCMD='system/password@dbname DIRECTORY=RMBACKUP SCHEMAS=USER1,USER2,USER3 DUM_full_pump.log'7-45ILE=dbname_
+ echo system/password@dbname DIRECTORY=RMBACKUP SCHEMAS=USER1,USER2,USER3 $'DUMPFILE=dbname_\r'
system/password@dbname DIRECTORY=RMBACKUP SCHEMAS=USER1,USER2,USER3 DUMPFILE=dbname_
+ echo _full_pump.dmp $'LOGFILE=dbname_\r'
_full_pump.dmp LOGFILE=dbname_
+ echo $'_full_pump.log\r'
_full_pump.log
+ echo $'2012-07-10_10-27-45\r\r'
2012-07-10_10-27-45
+ echo system/password@dbname DIRECTORY=RMBACKUP SCHEMAS=USER1,USER2,USER3 $'DUMPFILE=dbname_\r2012-07-10_10-27-45\r_full_pump.dmp' $'LOGFILE=dbname_\r2012-07-10_10-27-45\r_full_pump.log\r'
system/password@dbname DIRECTORY=RMBACKUP SCHEMAS=USER1,USER2,USER3 DUMPFILE=dbn_full_pump.log27-45ILE=dbname_
+ $'/u01/app/oracle/product/11.2.0/db_1\r/bin/expdp' system/password@dbname DIRECTORY=RMBACKUP SCHEMAS=USER1,USER2,USER3 $'DUMPFILE=dbname_\r2012-07-10_10-27-45\r_full_pump.dmp' $'LOGFILE=dbname_\r2012-07-10_10-27-45\r_full_pump.log\r'
/bin/expdp: No such file or directoryacle/product/11.2.0/db_1 
```

等待回复...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T08:13:02.463

如您所见，`'\r'`文本中有字符。`\r`可能您使用在行尾自动添加的编辑器编辑了文件。您必须再次编辑该文件并删除这些字符。

# sql-server-2008 - 如何将列值拆分为 SQL 中的不同列

> ID：11408033
> 
> 赞同：1
> 
> 时间：2012-07-10T06:49:19.860
> 
> 标签：sql-server-2008

我有表格测试

```
col_1
----------
aa,ab,ac
ba,bb,bc
ca,cb,cc 
```

我想要输出为

```
col_1     col_2    col_3
-------------------------
aa        ab       ac
ba        bb       bc
ca        cb       cc 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T07:15:57.840

```
select substring(col_1,1,CHARINDEX(',',col_1,1)-1) as col_1, 
substring(col_1,(CHARINDEX(',',col_1,1)+1),CHARINDEX(',',col_1,CHARINDEX(',',col_1,1)+1)-(CHARINDEX(',',col_1,1)+1)) as col_2,
substring(col_1,CHARINDEX(',',col_1,CHARINDEX(',',col_1,1)+1)+1,LEN(col_1)) as  col_3
from test 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T11:30:21.897

嗨，如果没有固定的列，那么我们可以使用下面的查询。

```
DECLARE @col TABLE(col_1 varchar(255))

INSERT INTO @col
values('aa,ab,ac'),('ba,bb,bc'),('ca,cb,cc')

select * from @col

select LEFT(col_1,CHARINDEX(',',col_1,1)-1) as col_1,
LEFT(RIGHT(col_1,len(col_1)-CHARINDEX(',',col_1,1)),CHARINDEX(',',RIGHT(col_1,len(col_1)-CHARINDEX(',',col_1,1)),1)-1) as col_2,
RIGHT(col_1,2) as col_3
from @col 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T11:38:49.253

即使有超过 2 个用逗号分隔的字符，这也是解决方案。

```
DECLARE @col TABLE(col_1 varchar(255))

INSERT INTO @col
values('aa,ab,ac'),('ba,bb,bc'),('ca,cb,cc')

select * from @col

select LEFT(col_1,CHARINDEX(',',col_1,1)-1) as col_1,
LEFT(RIGHT(col_1,len(col_1)-CHARINDEX(',',col_1,1)),CHARINDEX(',',RIGHT(col_1,len(col_1)-CHARINDEX(',',col_1,1)),1)-1) as col_2,
RIGHT(RIGHT(col_1,len(col_1)-CHARINDEX(',',col_1,1)),LEN(RIGHT(col_1,len(col_1)-CHARINDEX(',',col_1,1)))-CHARINDEX(',',RIGHT(col_1,len(col_1)-CHARINDEX(',',col_1,1)),1)) as col_3

from @col 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T07:40:23.143

您可以使用函数来[拆分](https://stackoverflow.com/questions/2647/split-string-in-sql)字符串，代码如下所示

从测试中选择 dbo.Split(col_1,',')

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T08:11:00.980

```
declare @T table
(
  col_1 varchar(100)
)

insert into @T values
('aa,ab,ac,4,5,6,7,8,9,10'),
('ba,bb,bc,4,5,6,7,8,9,10'),
('ca,cb,cc,4,5,6,7,8,9,10')

select left(T.col_1, C1.Pos-1) as col_1,
       substring(T.col_1, C1.Pos+1, C2.Pos-C1.Pos-1)  as col_2,
       substring(T.col_1, C2.Pos+1, C3.Pos-C2.Pos-1)  as col_3,
       substring(T.col_1, C3.Pos+1, C4.Pos-C3.Pos-1)  as col_4,
       substring(T.col_1, C4.Pos+1, C5.Pos-C4.Pos-1)  as col_5,
       substring(T.col_1, C5.Pos+1, C6.Pos-C5.Pos-1)  as col_6,
       substring(T.col_1, C6.Pos+1, C7.Pos-C6.Pos-1)  as col_7,
       substring(T.col_1, C7.Pos+1, C8.Pos-C7.Pos-1)  as col_8,
       substring(T.col_1, C8.Pos+1, C9.Pos-C8.Pos-1)  as col_9,
       stuff(T.col_1, 1, C9.Pos, '') as col_10
from @T as T
  cross apply (select charindex(',', col_1)) as C1(Pos)
  cross apply (select charindex(',', col_1, C1.Pos+1)) as C2(Pos)
  cross apply (select charindex(',', col_1, C2.Pos+1)) as C3(Pos)
  cross apply (select charindex(',', col_1, C3.Pos+1)) as C4(Pos)
  cross apply (select charindex(',', col_1, C4.Pos+1)) as C5(Pos)
  cross apply (select charindex(',', col_1, C5.Pos+1)) as C6(Pos)
  cross apply (select charindex(',', col_1, C6.Pos+1)) as C7(Pos)
  cross apply (select charindex(',', col_1, C7.Pos+1)) as C8(Pos)
  cross apply (select charindex(',', col_1, C8.Pos+1)) as C9(Pos) 
```

# c - 带有 Jazzy UI 的 C# 应用程序

> ID：11408034
> 
> 赞同：-2
> 
> 时间：2012-07-10T06:49:45.200
> 
> 标签：c, winapi, com, wcf-client

我目前有一个带有本机浏览器 (IE) 嵌入式的 C Shell 我可以在其中使用 WPF /WCF 吗？我说的是总客户端而不是启动器应用程序？

在 UI 方面想要一些酷炫的东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T05:06:48.923

WPF 和 WCF 始终首选 dotnet 桌面应用程序。这可以使用 C 来完成，但这将是太多的代码，并且无法保证代码是否能正常运行。

所以最好是创建 dotnet 应用程序而不是 C 应用程序。

# android - Android中的.tif到.png的转换

> ID：11408036
> 
> 赞同：1
> 
> 时间：2012-07-10T06:49:51.020
> 
> 标签：android, png, tiff

由于 android 不支持 TIIF fromat，所以我想在 android 中将 .tif 图像转换为 .png 图像。

有没有可以帮助我的库或代码？

我得到的任何东西都不足以进行这种转换。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T06:56:34.130

我会尝试[http://www.schaik.com/png/tiff2png.html](http://www.schaik.com/png/tiff2png.html)并将他的 .c 文件转换为 .rs 以便它适用于所有 android 平台。或者更好的是在它到达手机之前进行转换。

# php - PDO - 无效的参数号

> ID：11408037
> 
> 赞同：11
> 
> 时间：2012-07-10T06:49:56.777
> 
> 标签：php, mysql, pdo

就在最近，我转而在 PHP/MySQL 中使用 PDO 并转换了几十个查询。他们中的大多数都可以工作，但是这个非常简单的方法会在`$sql->execute()`

```
$sql=$pdo->prepare("SELECT id FROM user WHERE username = :username LIMIT 1");
$sql->execute(array(':username',$username)); 
```

> PDOStatement::execute() pdostatement.execute SQLSTATE[HY093]：无效的参数号：绑定变量的数量与...中的标记数量不匹配

经过研究，我发现了这个链接：[https ://bugs.php.net/bug.php?id=60515](https://bugs.php.net/bug.php?id=60515)

...因此尝试将查询更改为

```
$sql=$pdo->prepare("SELECT `id` FROM `user` WHERE `username` = :username LIMIT 1");
$sql->execute(array(':username',$username)); 
```

但仍然得到相同的结果。有没有人看到明显的错误，或者为什么这个查询在所有其他人都做的时候不起作用？

非常感谢您！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-10T06:50:51.860

这不是错误，您只需为一个占位符提供两个参数。

```
$sql->execute(array(':username',$username)); 
```

应该

```
$sql->execute(array(':username' => $username)); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-10T06:59:48.533

`':username',$username`仅在 bindParam() 方法中起作用：

```
$sql->bindParam(':username', $username, PDO::PARAM_STR); 
```

看看这里：[http ://www.php.net/manual/en/pdostatement.bindparam.php](http://www.php.net/manual/en/pdostatement.bindparam.php)

对于执行，您需要传递正确的仅输入值数组：

```
$sql->execute(array(':username' => $username)); 
```

**占位符：**

你也可以使用这个：

```
$sql->execute(array($username)); 
```

但为此，您需要将查询更改为：

```
$sql=$pdo->prepare("SELECT `id` FROM `user` WHERE `username` = ? LIMIT 1"); 
```

这 ？用作占位符并从数组中获取变量。当您在 SQL 语句中使用更多占位符时，该函数会按顺序将所有变量从数组中取出。

# java - dwr 服务类未定义

> ID：11408039
> 
> 赞同：1
> 
> 时间：2012-07-10T06:50:01.433
> 
> 标签：java, servlets, dwr

我正在使用 dwr 发送和获取一些信息，但我收到以下错误。

```
service(DwrSampleTest) is not defined 
```

当我尝试使用以下行查看文件时：

```
http://localhost:8080/Servlets-DWR/dwr/index.html 
```

我得到以下异常：`Access to debug pages is denied.`

这是我的 dwr.xml ：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE dwr PUBLIC
"-//GetAhead Limited//DTD Direct Web Remoting 2.0//EN"
"http://getahead.org/dwr/dwr20.dtd">
<dwr>
    <allow>
            <create creator="new" javascript="Dwrsample">
            <param name="class" value="com.dwrsample.servlet.DwrSampleTest"/>
        </create>
    </allow>
</dwr> 
```

网页.xml：

```
<servlet>
        <servlet-name>dwr-invoker</servlet-name>
        <servlet-class>org.directwebremoting.servlet.DwrServlet</servlet-class>
        <init-param>
            <param-name>crossDomainSessionSecurity</param-name>
            <param-value>false</param-value>
        </init-param>
        <init-param>
            <param-name>debug</param-name>
            <param-value>false</param-value>
        </init-param>
    </servlet>
    <servlet>
        <servlet-name>DwrsampleServlet</servlet-name>
        <servlet-class>com.dwrsample.servlet.DwrsampleServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>dwr-invoker</servlet-name>
        <url-pattern>/dwr/*</url-pattern>
    </servlet-mapping> 
```

以及我调用该方法的文件：

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>DWR Sample</title>
        <script src='dwr/dwr/engine.js'></script>
        <script src='dwr/dwr/util.js'></script>
        <script src='dwr/dwr/interface/DwrSampleTest.js'></script>

        <script>
            function getName() {
                DwrSampleTest.getName({callback:setName,async:false});
            }
            function setName(strName) {
                document.getElementById("enterdwr").value = "";
                document.getElementById("enterdwr").value = strName;
            }
        </script>
    </head>
    <body>
        <h1>DWR Sample Test!</h1>

        <form method="post" name="dwrsample" id="dwrsample">
            <table>
                <tr class="lightrow">
                    <td width="1%">*</td>
                    <td width="39%">Eenter DWR</td>
                    <td width="60%"><input name="enterdwr" id="password" type="text" onblur="getName()"/></td>
                </tr>
                <tr class="lightrow">
                    <td width="1%">*</td>
                    <td width="39%">DWR Result</td>
                    <td width="60%"><input name="resultdwr" id="password" type="text" /></td>
                </tr>
            </table>
        </form>
    </body>
</html> 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T07:02:46.327

更改 dwr.xml 文件中的条目如下

```
 <create creator="new" javascript="DwrSampleTest">
        <param name="class" value="com.dwrsample.servlet.DwrSampleTest"/>
    </create> 

Javascript ="DwrSampleTest" must match with the service name that you call in jsp page . 
```

您调用了 javaclass 名称而不是调用了 javascript 类名称。

并启用调试

```
<init-param>
            <param-name>debug</param-name>
            <param-value>true</param-value>
        </init-param> 
```

将参数值更改为 true。

# c# - NHibernate 延迟加载问题

> ID：11408040
> 
> 赞同：0
> 
> 时间：2012-07-10T06:50:05.730
> 
> 标签：c#, nhibernate

这是我正在执行的步骤 1）让所有实体处理数据 2）单独处理每个实体

```
ForEach Entity
   {       
     using (TransactionScope scope = new TransactionScope())
     {
             - Modify Entity
             - Modify Child objects //Childs can be accesed by Lazy loading
             - _sessionFactory.GetCurrentSession().Update(Entity);
             - _sessionFactory.GetCurrentSession().Flush(); 
             - scope.Complete();
     }
  } 
```

因此，一旦完成一个实体的处理，并在修改子对象时开始处理下一个实体，就会抛出延迟加载异常，说会话已关闭。

谁能帮我找出这个问题的原因？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T07:02:56.373

由于第一次修改有效，我猜想作为副作用的存储库或范围正在关闭会话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T07:00:02.023

您不需要刷新任何内容，因为您已经在使用 using 语句，一旦对象超出范围，它将清除您的对象。

# linux - 如何使用 GDB 和 QEMU 调试 Linux 内核？

> ID：11408041
> 
> 赞同：39
> 
> 时间：2012-07-10T06:50:10.203
> 
> 标签：linux, linux-kernel, gdb, qemu

我是内核开发的新手，我想知道如何使用 QEMU 和 gdb 运行/调试 linux 内核。我实际上正在阅读 Robert Love 的书，但不幸的是它并不能帮助读者了解如何安装适当的工具来运行或调试内核......所以我所做的就是遵循本教程[http://opensourceforu.efytimes.com /2011/02/kernel-development-debugging-using-eclipse/](http://opensourceforu.efytimes.com/2011/02/kernel-development-debugging-using-eclipse/)。我使用 eclipse 作为 IDE 在内核上开发，但我想首先让它在 QEMU/gdb 下工作。所以到目前为止我所做的是：

1）编译内核：

```
make defconfig (then setting the CONFIG_DEBUG_INFO=y in the .config)
make -j4 
```

2) 编译结束后，我使用以下命令运行 Qemu：

```
qemu-system-x86_64 -s -S /dev/zero -kernel /arch/x86/boot/bzImage 
```

它以“停止”状态启动内核

3）因此我必须使用gdb，我尝试以下命令：

```
gdb ./vmlinux 
```

它运行正确但是...现在我不知道该怎么办...我知道我必须在端口 1234（Qemu 使用的默认端口）上使用远程调试，使用 vmlinux 作为符号表文件调试。

所以我的问题是：我应该怎么做才能在 Qemu 上运行内核，将我的调试器附加到它上面，从而让它们一起工作，让我的内核开发工作更轻松。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-07-10T09:02:57.047

我会尝试：

```
(gdb) target remote localhost:1234
(gdb) continue 
```

使用 '-s' 选项让 qemu 监听端口 tcp::1234，如果你在同一台机器上，你可以连接到 localhost:1234。Qemu 的 '-S' 选项使 Qemu 停止执行，直到你发出 continue 命令。

最好的办法可能是看一个像样的 GDB 教程来了解你正在做的事情。[这个](https://web.archive.org/web/20180401080715/www.dirac.org/linux/gdb/)看起来很不错。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2015-10-18T21:46:45.557

**在 Ubuntu 16.10 主机上测试的分步过程**

为了快速从头开始，我在以下位置制作了一个最小的全自动 QEMU + Buildroot 示例：https [://github.com/cirosantilli/linux-kernel-module-cheat/blob/c7bbc6029af7f4fab0a23a380d1607df0b2a3701/gdb-step-debugging.md](https://github.com/cirosantilli/linux-kernel-module-cheat/blob/c7bbc6029af7f4fab0a23a380d1607df0b2a3701/gdb-step-debugging.md)步骤如下。

首先得到一个根文件系统`rootfs.cpio.gz`。如果您需要，请考虑：

*   仅最小的`init`可执行映像：[https ://unix.stackexchange.com/questions/122717/custom-linux-distro-that-runs-just-one-program-nothing-else/238579#238579](https://unix.stackexchange.com/questions/122717/custom-linux-distro-that-runs-just-one-program-nothing-else/238579#238579)
*   Busybox 交互系统：[https ://unix.stackexchange.com/questions/2692/what-is-the-smallest-possible-linux-implementation/203902#203902](https://unix.stackexchange.com/questions/2692/what-is-the-smallest-possible-linux-implementation/203902#203902)

然后在 Linux 内核上：

```
git checkout v4.15
make mrproper
make x86_64_defconfig
cat <<EOF >.config-fragment
CONFIG_DEBUG_INFO=y
CONFIG_DEBUG_KERNEL=y
CONFIG_GDB_SCRIPTS=y
EOF
./scripts/kconfig/merge_config.sh .config .config-fragment
make -j"$(nproc)"
qemu-system-x86_64 -kernel arch/x86/boot/bzImage \
                   -initrd rootfs.cpio.gz -S -s \
                   -append nokaslr 
```

在另一个终端上，从 Linux 内核树内部，假设您想从以下位置开始调试`start_kernel`：

```
gdb \
    -ex "add-auto-load-safe-path $(pwd)" \
    -ex "file vmlinux" \
    -ex 'set arch i386:x86-64:intel' \
    -ex 'target remote localhost:1234' \
    -ex 'break start_kernel' \
    -ex 'continue' \
    -ex 'disconnect' \
    -ex 'set arch i386:x86-64' \
    -ex 'target remote localhost:1234' 
```

我们完成了！

对于内核模块，请参阅：[如何使用 QEMU 调试 Linux 内核模块？](https://stackoverflow.com/questions/28607538/how-to-debug-linux-kernel-modules-with-qemu/44095831#44095831)

对于 Ubuntu 14.04，`hbreak`需要 GDB 7.7.1，`break`软件断点被忽略。16.10 不再是这种情况。另见：[https ://bugs.launchpad.net/ubuntu/+source/qemu-kvm/+bug/901944](https://bugs.launchpad.net/ubuntu/+source/qemu-kvm/+bug/901944)

杂乱无章的`disconnect`事情以及解决该错误之后的事情是：

```
Remote 'g' packet reply is too long: 000000000000000017d11000008ef4810120008000000000fdfb8b07000000000d352828000000004040010000000000903fe081ffffffff883fe081ffffffff00000000000e0000ffffffffffe0ffffffffffff07ffffffffffffffff9fffff17d11000008ef4810000000000800000fffffffff8ffffffffff0000ffffffff2ddbf481ffffffff4600000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007f0300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000801f0000 
```

相关话题：

*   [https://sourceware.org/bugzilla/show_bug.cgi?id=13984](https://sourceware.org/bugzilla/show_bug.cgi?id=13984)可能是 GDB 错误
*   [远程“g”数据包回复太长](https://stackoverflow.com/questions/8662468/remote-g-packet-reply-is-too-long)
*   [http://wiki.osdev.org/QEMU_and_GDB_in_long_mode](http://wiki.osdev.org/QEMU_and_GDB_in_long_mode) osdev.org 像往常一样是解决这些问题的绝佳来源
*   [https://lists.nongnu.org/archive/html/qemu-discuss/2014-10/msg00069.html](https://lists.nongnu.org/archive/html/qemu-discuss/2014-10/msg00069.html)
*   `nokaslr`：[https ://unix.stackexchange.com/questions/397939/turning-off-kaslr-to-debug-linux-kernel-using-qemu-and-gdb/421287#421287](https://unix.stackexchange.com/questions/397939/turning-off-kaslr-to-debug-linux-kernel-using-qemu-and-gdb/421287#421287)

已知限制：

*   Linux 内核不支持（甚至在没有补丁的情况下也无法编译）`-O0`：[如何对 Linux 内核进行反优化并使用 -O0 进行编译？](https://stackoverflow.com/questions/29151235/how-to-de-optimize-the-linux-kernel)
*   GDB 7.11 会在某些类型的制表符补全上大吃一惊，即使在`max-completions`修复之后：[大型二进制文件的制表符补全中断](https://stackoverflow.com/questions/597777/tab-completion-interrupt-for-large-binaries)可能是该补丁未涵盖的一些极端情况。所以 an`ulimit -Sv 500000`是调试前的明智之举。`file<tab>`当我为如下`filename`参数完成标签时，特别爆炸`sys_execve`：[https ://stackoverflow.com/a/42290593/895245](https://stackoverflow.com/a/42290593/895245)

也可以看看：

*   [https://github.com/torvalds/linux/blob/v4.9/Documentation/dev-tools/gdb-kernel-debugging.rst](https://github.com/torvalds/linux/blob/v4.9/Documentation/dev-tools/gdb-kernel-debugging.rst)官方Linux内核“文档”
*   [Linux内核实时调试，它是如何完成的以及使用什么工具？](https://stackoverflow.com/questions/4943857/linux-kernel-live-debugging-how-its-done-and-what-tools-are-used)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-03-22T12:15:56.270

BjoernID 的回答对我来说并没有真正起作用。在第一次继续之后，没有达到断点并且在中断时，我会看到如下行：

```
0x0000000000000000 in ?? ()
(gdb) break rapl_pmu_init
Breakpoint 1 at 0xffffffff816631e7
(gdb) c
Continuing.
^CRemote 'g' packet reply is too long: 08793000000000002988d582000000002019[..] 
```

我想这与不同的 CPU 模式有关（BIOS 中的实模式与 Linux 启动时的长模式）。无论如何，解决方案是先运行 QEMU 而无需等待（即不等待`-S`）：

```
qemu-system-x86_64 -enable-kvm -kernel arch/x86/boot/bzImage -cpu SandyBridge -s 
```

就我而言，我需要在启动过程中中断某些事情，所以在几分之一秒后，我运行了 gdb 命令。如果您有更多时间（例如，您需要调试手动加载的模块），那么时间并不重要。

`gdb`允许您指定启动时应运行的命令。这使得自动化更容易一些。要连接到 QEMU（现在应该已经启动），中断一个函数并继续执行，使用：

```
gdb -ex 'target remote localhost:1234' -ex 'break rapl_pmu_init' -ex c ./vmlinux 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-08-19T03:27:09.307

当您尝试使用 gdb 启动 vmlinux exe 时，gdb 上的第一件事就是发出 cmd：

(gdb) 目标远程 localhost:1234

(gdb) 中断 start_kernel

（继续）

这将在 start_kernel 处破坏内核。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-03-22T17:12:42.200

对我来说，调试内核的最佳解决方案是使用 Eclipse 环境中的 gdb。您应该在远程调试部分为 gdb 设置适当的端口（必须与您在 qemu 启动字符串中指定的端口相同）。这是手册： [http ://www.sw-at.com/blog/2011/02/11/linux-kernel-development-and-debugging-using-eclipse-cdt/](http://www.sw-at.com/blog/2011/02/11/linux-kernel-development-and-debugging-using-eclipse-cdt/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-03-27T04:57:28.877

在 Linux 系统上，vmlinux 是一个静态链接的可执行文件，它包含采用 Linux 支持的目标文件格式之一的 Linux 内核，包括 ELF、COFF 和 a.out。内核调试、符号表生成或其他操作可能需要 vmlinux 文件，但必须在用作操作系统内核之前通过添加多引导标头、引导扇区和设置例程使其可引导。

此初始根文件系统的映像必须存储在 Linux 引导加载程序可访问的计算机引导固件的某个位置。这可以是根文件系统本身、光盘上的引导映像、本地磁盘上的小分区（引导分区，通常使用 ext4 或 FAT 文件系统）或 TFTP 服务器（在可以从以太网引导的系统上） ）。

1.  编译linux内核

    使用此系列构建内核，启用**CONFIG_DEBUG_INFO**（但不要关闭 CONFIG_DEBUG_INFO_REDUCED）

    *   [https://www.kernel.org/doc/html/latest/admin-guide/README.html](https://www.kernel.org/doc/html/latest/admin-guide/README.html)
    *   [https://wiki.archlinux.org/index.php/Kernel/Traditional_compilation](https://wiki.archlinux.org/index.php/Kernel/Traditional_compilation)
    *   [https://lwn.net/Articles/533552/](https://lwn.net/Articles/533552/)
2.  安装 GDB 和 Qemu

    ```
    sudo pacman -S gdb qemu 
    ```

3.  创建 initramfs

    ```
    #!/bin/bash

    # Os     : Arch Linux
    # Kernel : 5.0.3

    INIT_DIR=$(pwd)
    BBOX_URL="https://busybox.net/downloads/busybox-1.30.1.tar.bz2"
    BBOX_FILENAME=$(basename ${BBOX_URL})
    BBOX_DIRNAME=$(basename ${BBOX_FILENAME} ".tar.bz2")
    RAM_FILENAME="${INIT_DIR}/initramfs.cpio.gz"

    function download_busybox {
        wget -c ${BBOX_URL} 2>/dev/null
    }

    function compile_busybox {
        tar xvf ${BBOX_FILENAME} && cd "${INIT_DIR}/${BBOX_DIRNAME}/"
        echo "[*] Settings > Build options > Build static binary (no shared libs)"
        echo "[!] Please enter to continue"
        read tmpvar
        make menuconfig && make -j2 && make install
    }

    function config_busybox {
        cd "${INIT_DIR}/${BBOX_DIRNAME}/"
        rm -rf initramfs/ && cp -rf _install/ initramfs/
        rm -f initramfs/linuxrc
        mkdir -p initramfs/{dev,proc,sys}
        sudo cp -a /dev/{null,console,tty,tty1,tty2,tty3,tty4} initramfs/dev/

    cat > "${INIT_DIR}/${BBOX_DIRNAME}/initramfs/init" << EOF
    #!/bin/busybox sh
    mount -t proc none /proc
    mount -t sysfs none /sys

    exec /sbin/init
    EOF

        chmod a+x initramfs/init
        cd "${INIT_DIR}/${BBOX_DIRNAME}/initramfs/"
        find . -print0 | cpio --null -ov --format=newc | gzip -9 > "${RAM_FILENAME}"
        echo "[*] output: ${RAM_FILENAME}"

    }

    download_busybox
    compile_busybox
    config_busybox 
    ```

4.  使用 Qemu 引导 Linux 内核

    ```
    #!/bin/bash

    KER_FILENAME="/home/debug/Projects/kernelbuild/linux-5.0.3/arch/x86/boot/bzImage"
    RAM_FILENAME="/home/debug/Projects/kerneldebug/initramfs.cpio.gz"

    qemu-system-x86_64 -s -kernel "${KER_FILENAME}" -initrd "${RAM_FILENAME}" -nographic -append "console=ttyS0" 
    ```

    ```
    $ ./qemuboot_vmlinux.sh
    SeaBIOS (version 1.12.0-20181126_142135-anatol)

    iPXE (http://ipxe.org) 00:03.0 C980 PCI2.10 PnP PMM+07F92120+07EF2120 C980

    Booting from ROM...
    Probing EDD (edd=off to disable)... o
    [    0.019814] Spectre V2 : Spectre mitigation: LFENCE not serializing, switching to generic retpoline
    can't run '/etc/init.d/rcS': No such file or directory

    Please press Enter to activate this console.
    / #  uname -a
    Linux archlinux 5.0.3 #2 SMP PREEMPT Mon Mar 25 10:27:13 CST 2019 x86_64 GNU/Linux
    / # 
    ```

5.  使用 GDB 调试 Linux 内核

    ```
    ~/Projects/kernelbuild/linux-5.0.3 ➭ gdb vmlinux
    ...
    (gdb) target remote localhost:1234
    Remote debugging using localhost:1234
    0xffffffff89a4b852 in ?? ()
    (gdb) break start_kernel
    Breakpoint 1 at 0xffffffff826ccc08
    (gdb)
    Display all 190 possibilities? (y or n)
    (gdb) info functions
    All defined functions:

    Non-debugging symbols:
    0xffffffff81000000  _stext
    0xffffffff81000000  _text
    0xffffffff81000000  startup_64
    0xffffffff81000030  secondary_startup_64
    0xffffffff810000e0  verify_cpu
    0xffffffff810001e0  start_cpu0
    0xffffffff810001f0  __startup_64
    0xffffffff81000410  pvh_start_xen
    0xffffffff81001000  hypercall_page
    0xffffffff81001000  xen_hypercall_set_trap_table
    0xffffffff81001020  xen_hypercall_mmu_update
    0xffffffff81001040  xen_hypercall_set_gdt
    0xffffffff81001060  xen_hypercall_stack_switch
    0xffffffff81001080  xen_hypercall_set_callbacks
    0xffffffff810010a0  xen_hypercall_fpu_taskswitch
    0xffffffff810010c0  xen_hypercall_sched_op_compat
    0xffffffff810010e0  xen_hypercall_platform_op 
    ```

# java - JavaFX 2 TreeView 从 TreeView TreeCell 更改焦点

> ID：11408044
> 
> 赞同：0
> 
> 时间：2012-07-10T06:50:19.163
> 
> 标签：java, user-interface, treeview, javafx

您好，我正在尝试实现一个 TreeView，它能够通过 TreeView 中的 ContextMenu 创建一个新元素。但是，我希望新元素能够集中调用 startEdit() 方法并自己给它起一个名字。有没有什么办法可以做到...

这是我的代码：

```
public class NotesBrowser extends TreeView<String>
{
    public NotesBrowser()
    {
    this.setEditable(true);

    IconView rootIcon = new IconView(Resources.rootImage);
    rootIcon.setSize(28.5, 28.5);

    ExtendedTreeItem treeRoot = new ExtendedTreeItem("Notes", true);
    treeRoot.setGraphic(rootIcon);
    treeRoot.setIsRoot(true);
    setRoot(treeRoot);

    this.setId("menubar_Notes");
    this.setShowRoot(true);
    this.setRoot(treeRoot);

    this.setCellFactory(new Callback<TreeView<String>, TreeCell<String>>()
    {
        @Override
        public TreeCell<String> call(TreeView<String> p)
        {
        return new TextFieldTreeCellImpl();
        }
    });

    treeRoot.setIsRoot(true);
    treeRoot.setExpanded(true);
    }

    /**
     * TextFieldTreeCellImpl handles actions on TreeView items Core functions: -
     * Right Click on Folder -> create Folder, add Note, delete, rename - Right
     * Click on Note -> add Note, delete, rename
     * 
     * @author Googles
     * @credits Oracle TreeView
     *          Samples(http://docs.oracle.com/javafx/2/ui_controls
     *          /TreeViewSample.java.html)
     * 
     */
    public final class TextFieldTreeCellImpl extends TreeCell<String>
    {
    private TextField textField;

    private ContextMenu noteMenu = new ContextMenu();
    private ContextMenu folderMenu = new ContextMenu();

    @SuppressWarnings({ "rawtypes", "unchecked" })
    public TextFieldTreeCellImpl()
    {
        // Initialize MenuItems
        MenuItem addFolder = new MenuItem("Create Folder");
        MenuItem addNote = new MenuItem("Create Note");
        MenuItem delete = new MenuItem("Delete");
        MenuItem rename = new MenuItem("Rename");

        // Add MenuItem to dedicated ContextMenus
        noteMenu.getItems().addAll(rename, delete);
        folderMenu.getItems().addAll(addNote, addFolder, rename, delete);

        // Set MenuItem actions
        addNote.setOnAction(new EventHandler()
        {
        public void handle(Event t)
        {
            ExtendedTreeItem newNote = new ExtendedTreeItem("New Note", false);
            getTreeItem().getChildren().add(newNote);
            getTreeItem().setExpanded(true);

        }
        });

        rename.setOnAction(new EventHandler()
        {
        @Override
        public void handle(Event t)
        {
            startEdit();
        }
        });

    }

    /**
     * Creates TextField on TreeCell Element to rename it
     */
    @Override
    public void startEdit()
    {
        if (!((ExtendedTreeItem) getTreeItem()).isRoot())
        {
        super.startEdit();
        if (textField == null)
        {
            createTextField();
        }
        setText(null);
        setGraphic(textField);
        textField.selectAll();
        }
    }

    /**
     * Cancel Edit; obvious comment is obvious...
     */
    @Override
    public void cancelEdit()
    {
        super.cancelEdit();

        setText((String) getItem());
        setGraphic(getTreeItem().getGraphic());
    }

    /**
     * Updates TreeCell to new name and attach ContextMenus to different
     * TreeCells
     */
    @Override
    public void updateItem(String item, boolean empty)
    {
        super.updateItem(item, empty);

        if (empty)
        {
        setText(null);
        setGraphic(null);
        }

        else
        {
        if (isEditing())
        {
            if (textField != null)
            {
            textField.setText(getString());
            }
            setText(null);
            setGraphic(textField);
        }
        else
        {
            setText(getString());
            setGraphic(getTreeItem().getGraphic());

            if (((ExtendedTreeItem) getTreeItem()).isDirectory())
            {
            setContextMenu(folderMenu);
            }
            else if (!((ExtendedTreeItem) getTreeItem()).isDirectory())
            {
            setContextMenu(noteMenu);
            }
        }
        }
    }

    /**
     * Initializes TextField and adds onClick actions to handle commit /
     * cancel
     */
    private void createTextField()
    {
        textField = new TextField(getString());
        textField.setOnKeyReleased(new EventHandler<KeyEvent>()
        {
        @Override
        public void handle(KeyEvent t)
        {
            if (t.getCode() == KeyCode.ENTER)
            {
            commitEdit(textField.getText());
            }
            else if (t.getCode() == KeyCode.ESCAPE)
            {
            cancelEdit();
            }
        }
        });
    }

    private String getString()
    {
        return getItem() == null ? "" : getItem().toString();
    }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T03:01:08.257

可以通过选择创建的项目或项目的索引来聚焦新创建的项目。可以如下进行选择。

```
treeview.getSelectionModel().select(new_item) 
```

或者

```
treeview.getSelectionModel().select(new_item_index) 
```

# html - Ajax表单提交，无法弄清楚为什么它不起作用

> ID：11408045
> 
> 赞同：2
> 
> 时间：2012-07-10T06:50:19.757
> 
> 标签：html, ajax, forms, serialization, submit

有谁知道为什么这不起作用？这个序列化的唯一数据是来自第 1 页的数据。我还尝试将两个不同的函数链接到每个页面（我将它作为 2 个单独的表单，尽管这样它只会覆盖彼此（以及其他所有内容）。

```
<script type="text/javascript">
 $(document).ready(function(){
  $("#submit").click(function(){
   $("#page3").text($("#q").serialize());
  });
});
</script>
</head>
<body>
 <div data-role="page" id="page1">
   <form id="q">
    <div data-role="content">
     <input type="checkbox" name="4[]" value="1">1</input><br/>
     <input type="checkbox" name="4[]" value="2">2</input><br/>
     <input type="checkbox" name="4[]" value="3">3</input><br/>
     <input type="checkbox" name="4[]" value="4">4</input><br/>
     <input type="checkbox" name="asdf[]" value="1">1</input><br/>
     <input type="checkbox" name="asdf[]" value="2">2</input><br/>
    </div>
    <a data-role="button" href="#page2">Next</a>
 </div>

 <div data-role="page" id="page2">
  <div data-role="content">
   <input type="checkbox" name="3[]" value="11">11</input><br/>
   <input type="checkbox" name="3[]" value="21">21</input><br/>
   <input type="checkbox" name="adf[]" value="1">11</input><br/>
   <input type="checkbox" name="adf[]" value="2">12</input><br/>
  </div>
 </form>
 <a data-role="button" type="submit" href="#page3" id="submit">Next</a>
</div>

<div data-role="page" id="page3">
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T06:59:25.433

您的问题可能与您如何让第一个表单与外部 div 交错有关 - HTML 中不允许，不确定浏览器会如何处理。你能在 div 中关闭你的第一个表单，在第 2 页 div 中启动一个新表单吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T07:10:07.553

这是因为所有的复选框都没有选中，试试[这个](http://jsfiddle.net/Mtde3/)

# iphone - 使用#define 区分调用类

> ID：11408048
> 
> 赞同：0
> 
> 时间：2012-07-10T06:50:46.660
> 
> 标签：iphone, objective-c, ios

当且仅当从单元测试类调用该方法时，我才想调用某个方法。我为此实现了以下代码：

```
 #ifndef UNIT_TESTING

    NSLog(@"inside unit testing");

#endif 
```

当我从控制器类调用时不会调用它。我应该怎么做才能调用这个循环？如何将宏设置为 UNIT_TESTING

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T06:58:42.053

在您的单元测试目标构建设置中（在 X 代码中），将以下内容添加到“Apple LLVM 3.1”部分（或等效的 GCC 部分，如果您仍在使用该部分）下的“预编译头文件中未使用的预处理器宏”选项中：

```
UNIT_TESTING=1 
```

# javascript - 传递回调的正确方法是什么？

> ID：11408055
> 
> 赞同：2
> 
> 时间：2012-07-10T06:51:34.803
> 
> 标签：javascript, jquery, callback

我正在编写我的代码如下：

```
var MyLib = (function (window, $, undefined) {
    return {
        URI: 'http://testpage/API/',
        OnSuccess: function (data, status) { },
        OnError: function (request, status, error) { },
        MakeRequest: function (method, args) {
            $.ajax({
                type: 'POST',
                url: this.URI + '/' + method,
                contentType: 'application/json; charset=utf-8',
                data: args,
                dataType: 'json',
                success: this.OnSuccess,
                error: this.OnError
            });
        },
        GetSamples: function (data1, data2) {
            var args = {
                data1: data1,
                data2: data2
            };
            this.MakeRequest('GetTestData', JSON.stringify(args));
        }
   };
} (this, jQuery)); 
```

因此，如果我想调用 AJAX 调用，我会这样做：

```
function OnSuccess(data, status) {
   // ...
}

function OnError(request, status, error) {

}

MyLib.OnSuccess = OnSuccess;
MyLib.OnError = OnError;
MyLib.GetSamples("data1", "data2"); 
```

我不想更改 GetSamples 的签名，因此我选择按上述方式实现它。关于这是否是一种可接受的方法（或如何改进）的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T06:53:37.447

不是很 javascript 惯用的。看起来更像 .NET 代码。在 javascript 中提供回调的标准方法是将它们作为参数传递。但是，如果您不能修改`GetSamples`方法的签名，那么我想这种方法也适用于您的情况。我只是不会将它推广到您的所有 API。仅在这种特殊情况下用作解决方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T07:13:46.040

I'll agree with Darin Dimitrov and will suggest to use only one callback. Not two for success and failure. For example:

```
MyLib.GetSamples("data1", "data2", function(err, response) {

}); 
```

By using this approach you are dealing with only one callback and you will be sure that the developers that are going to use your class will not forget to check for errors (that's the idea to put the err attribute on first place).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T06:53:26.130

您还可以返回 jQuery AJAX 对象并在您使用请求的地方调用 .done() 。

喜欢：

```
var MyLib = (function (window, $, undefined) {
    return {
        URI: 'http://testpage/API/',
        OnSuccess: function (data, status) { },
        OnError: function (request, status, error) { },
        MakeRequest: function (method, args) {
            return $.ajax({
                type: 'POST',
                url: this.URI + '/' + method,
                contentType: 'application/json; charset=utf-8',
                data: args,
                dataType: 'json'
            });
        },
        GetSamples: function (data1, data2) {
            var args = {
                data1: data1,
                data2: data2
            };
            return this.MakeRequest('GetTestData', JSON.stringify(args));
        }
   };
} (this, jQuery)); 
```

接着：

```
function OnSuccess(data, status) {
   // ...
}

function OnError(request, status, error) {

}

MyLib.GetSamples("data1", "data2").done(OnSuccess).fail(OnError); 
```

这些被称为 jQuery deferreds，看看[API](http://api.jquery.com/deferred.always/)。IMO 这是处理异步调用的一种非常干净的方式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T07:39:41.367

有趣的话题。我看到很多 JavaScript 开发人员都在做这样的事情：

```
(function ($, window, document) {

  "use strict";

  var App = (function () {

    function App() {
      this.url = 'http://testpage/API';
      this.debug();
    }

    App.prototype = {

      url: 'http://testpage/API',

      success: function (data, status) {},

      error: function (req, status, err) {},

      request: function (command, options) {
        $.get({
          type: 'POST',
          url: this.url + '/' + command,
          contentType: 'application/json; charset=utf-8',
          data: options || {},
          success: this.success,
          error: this.error
        });
      },

      getSample: function (data1, data2) {
        this.request('getTestData', JSON.stringify({
          data1: data1, data2: data2
        }));
      }

    };

    return App;

  })();

})(jQuery, window, document); 
```

我猜测使用了原型方法，因此如果您需要您的应用程序在一个页面中有多个实例，您不必重新定义方法。

还有一点需要注意的是，在 JavaScript 中，主要的命名约定是 camelCase。我的一位同事在 Backbone.js 中写了一个模式列表，它也适用于 JS 设计模式。[http://ricostacruz.com/backbone-patterns/](http://ricostacruz.com/backbone-patterns/)

# django - '+' 以 django 形式

> ID：11408056
> 
> 赞同：1
> 
> 时间：2012-07-10T06:51:41.363
> 
> 标签：django, django-forms

我有一个选择框，它的值可能在 -20 和 +20 范围内：

```
class MyForm(forms.ModelForm):
    class Meta:
        i0=xrange(-20, 20, 0.25)
        c = tuple(("%g" % x , "%g" % x) for x in i0)
        model = MyModel
        widgets = {
            'my_field' : forms.Select(choices=c),

        } 
```

输出是：

```
<select>
    <option value="-20">-20</option>
    <option value="-19.75">-19.75</option>
    <option value="-19.5">-19.5</option>
    <option value="-19.25">-19.25</option>
    <option value="-19">-19</option>
    .
    .
    .
    <option value="19">19</option>
</select> 
```

但我想要一个正数的“+”符号。`i0=xrange(-20, +20, 0.25)`不解决问题。如何在选项中的正数中添加“+”符号？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T07:03:14.223

如果无法使用 python 访问机器，我无法测试，但您应该能够：

```
 c = tuple(("%g" % x , "%+g" % x) for x in i0) 
```

[http://docs.python.org/release/3.0/library/stdtypes.html#old-string-formatting-operations](http://docs.python.org/release/3.0/library/stdtypes.html#old-string-formatting-operations)

也应该在早期的 python 版本中工作

**编辑：-**`+`从零值中删除：

```
 c = tuple(("%g" % x , "%+g" % x) for x in i0 if x != 0 else ("0", "0")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T07:00:23.393

将此字段定义为字符，但在 Integer 中进行验证。这应该是快速的解决方案

# ruby-on-rails - #show 页面上的 ActiveAdmin 嵌套表单

> ID：11408060
> 
> 赞同：6
> 
> 时间：2012-07-10T06:51:51.117
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activeadmin

是否可以将嵌套表单添加到#show 页面？

现在我有了我的管理员/posts.rb：

```
ActiveAdmin.register Post do
  show do |post|
    h2 post.title
    post.comments.each do |comment|
      row :comment do comment.text end
    end
  end
end 
```

它列出了帖子的所有评论。现在我需要一个表格来添加新评论。我正在尝试这样做：

```
ActiveAdmin.register Post do
  show do |post|
    h2 post.title
    post.comments.each do |comment|
      row :comment do comment.text end
    end

    form do |f|
      f.has_many :comments do |c|
        c.input :text
      end
    end
  end
end 
```

并得到一个错误：

> <form></form> 的未定义方法 `has_many' :Arbre::HTML::Form

Post 和 Comments 的模型如下所示：

```
class Post < ActiveRecord::Base
  has_many :comments
  accepts_nested_attributes_for :comments
end

class Comment < ActiveRecord::Base
  belongs_to :post
end 
```

如何将该表单添加到我的显示页面？谢谢

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-03T18:17:34.880

我为 has_one 关系做了这样的事情：

```
ActiveAdmin.register Post do
  show :title => :email do |post|

    attributes_table do
      rows :id, :first_name, :last_name
    end

    panel 'Comments' do
      attributes_table_for post.comment do
        rows :text, :author, :date
      end
    end

  end
end 
```

如果您不需要 sorens 解决方案的额外灵活性，我敢打赌您可以使用它。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-05T16:48:16.163

将此类信息添加到显示页面时，我使用以下配方

```
 ActiveAdmin.register Post do
      show :title => :email do |post|
        attributes_table do
          row :id
          row :first_name
          row :last_name
        end
        div :class => "panel" do
          h3 "Comments"
          if post.comments and post.comments.count > 0
            div :class => "panel_contents" do
              div :class => "attributes_table" do
                table do
                  tr do
                    th do
                      "Comment Text"
                    end
                  end
                  tbody do
                    post.comments.each do |comment|
                      tr do
                        td do
                          comment.text
                        end
                      end
                    end
                  end
                end
              end
            end
          else
            h3 "No comments available"
          end
        end
      end
    end 
```

# asp.net - 为什么在“异步回发场景”中不允许使用这些 HttpResponse 方法？

> ID：11408061
> 
> 赞同：2
> 
> 时间：2012-07-10T06:51:51.277
> 
> 标签：asp.net, asynchronous, postback, httpresponse

我正在阅读以获取有关该课程的更多信息`HttpResponse`。我在[MSDN](http://msdn.microsoft.com/en-us/library/system.web.httpresponse.aspx)上遇到了一个奇怪的评论。

> HttpResponse 类的以下方法仅在回发场景中支持，在[异步回发场景中](http://msdn.microsoft.com/en-us/library/bb386454%28VS.90%29.aspx)不支持：
> 
> ```
> BinaryWrite
> Clear
> ClearContent
> ClearHeaders
> Close
> End
> Flush
> TransmitFile
> Write
> WriteFile
> WriteSubstitution 
> ```

这到底是什么意思呢？在我的一个项目中，我非常依赖 HttpResponse.Write。究竟是什么`asynchronous postback scenario`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T07:06:13.837

当您通过诸如 updatePanel 之类的东西进行回发时，就会发生异步回发。

异步回发的主要区别在于渲染。

您的正常预渲染和渲染逻辑将不会被调用。

只有部分页面在前端使用 javascript 进行更新。

这意味着您不能返回另一个文档、更改 http 标头等。

# ruby-on-rails - 运行 rake assets:precompile 后数据表未在生产模式下显示。导轨 3.2

> ID：11408062
> 
> 赞同：0
> 
> 时间：2012-07-10T06:52:09.770
> 
> 标签：ruby-on-rails, datatables, production-environment

当我在开发中运行我的应用程序时，我的数据[表表](http://datatables.net)正在显示，但是当我在生产中运行我的应用程序时，数据表没有显示。只显示记录。

开发中的截图：

![数据表显示](../Images/a3b816b1315cc30261e11b10e536263b.png)

生产中的屏幕截图：

![缺少数据表](../Images/990008812000a1c34e44087e7d0451ae.png)

我的生产.rb：

```
Contractbeheerpj::Application.configure do
  # Settings specified here will take precedence over those in config/application.rb

  # Code is not reloaded between requests
  config.cache_classes = true

  # Full error reports are disabled and caching is turned on
  config.consider_all_requests_local       = false
  config.action_controller.perform_caching = true

  # Disable Rails's static asset server (Apache or nginx will already do this)
  config.serve_static_assets = false

  # Compress JavaScripts and CSS
  config.assets.compress = true

  # Don't fallback to assets pipeline if a precompiled asset is missed
  config.assets.compile = true

  # Generate digests for assets URLs
  config.assets.digest = true

  # Defaults to nil and saved in location specified by config.assets.prefix
  # config.assets.manifest = YOUR_PATH

  # Specifies the header that your server uses for sending files
  # config.action_dispatch.x_sendfile_header = "X-Sendfile" # for apache
  # config.action_dispatch.x_sendfile_header = 'X-Accel-Redirect' # for nginx

  # Force all access to the app over SSL, use Strict-Transport-Security, and use secure cookies.
  # config.force_ssl = true

  # See everything in the log (default is :info)
  # config.log_level = :debug

  # Prepend all log lines with the following tags
  # config.log_tags = [ :subdomain, :uuid ]

  # Use a different logger for distributed setups
  # config.logger = ActiveSupport::TaggedLogging.new(SyslogLogger.new)

  # Use a different cache store in production
  # config.cache_store = :mem_cache_store

  # Enable serving of images, stylesheets, and JavaScripts from an asset server
  # config.action_controller.asset_host = "http://assets.example.com"

  # Precompile additional assets (application.js, application.css, and all non-JS/CSS are already added)
  # config.assets.precompile += %w( search.js )

  # Disable delivery errors, bad email addresses will be ignored
  # config.action_mailer.raise_delivery_errors = false

  # Enable threaded mode
  # config.threadsafe!

  # Enable locale fallbacks for I18n (makes lookups for any locale fall back to
  # the I18n.default_locale when a translation can not be found)
  config.i18n.fallbacks = true

  # Send deprecation notices to registered listeners
  config.active_support.deprecation = :notify

  # Log the query plan for queries taking more than this (works
  # with SQLite, MySQL, and PostgreSQL)
  # config.active_record.auto_explain_threshold_in_seconds = 0.5
end 
```

希望有人能帮忙！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T07:30:46.970

您的问题可能是因为 Rails 资产管道化，生产中的 Rails 将您的 js 文件预编译为 public/assets，因此您的 js 文件要么未加载，要么是旧版本。查看与您遇到的类似问题的[答案。](https://stackoverflow.com/questions/10218740/rails-javascript-asset-missing-after-precompile/ "这个答案")

# html - 动画/交互式图表：SVG、Canvas 还是两者都没有？

> ID：11408067
> 
> 赞同：1
> 
> 时间：2012-07-10T06:52:27.107
> 
> 标签：html, canvas, svg, html5-canvas

我正在开发一种图形形式的可视化，其边缘可能是弯曲的并且颜色和厚度会有所不同。图上的节点包含图像和一些文本。该图是动画和交互式的（您可以单击和移动节点）并使用强制定向布局。

我希望至少支持大部分智能手机浏览器，例如 android 和 iphone 设备上的浏览器以及桌面上的任何现代浏览器。

是否可以在不使用画布或 SVG 的情况下创建这样的可视化？

如果我必须使用一个，那一个会是更好的选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T07:11:19.620

当然，这两种技术都可以做到这一点，但您应该记住，它们有不同的方法。
我建议你使用画布（那里有很多好的库，比如[kinetic](http://www.kineticjs.com/)），因为 android 2.x 不支持 svg :(

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T07:15:52.437

Definitely SVG if you want tooltips/hover effects. Because the elements in the SVG image are just XML tags you can add mouse event handlers to them in the same way you would elements in the DOM.

# scala - 无法使 scala 类型推断正常工作

> ID：11408072
> 
> 赞同：0
> 
> 时间：2012-07-10T06:53:09.947
> 
> 标签：scala, implicits

### 总体目标：

例如，假设我想开发一个非常可插拔的问题跟踪器。它的核心实现可能只支持票证 ID 和描述。其他扩展可能会添加对各种其他字段的支持，但这些字段可能存在于同一表的数据库中。即使没有，对数据库的查询数量也不应该随着扩展数量的增加而增加。他们应该能够为查询的定义做出贡献。

`Item[A, B, R[_]]`将表示一列，`A`表类型（具有列表示）`B`作为数据类型，并`R`作为表示类型列的类型构造函数`B`。例如，ScalaQuery`R[B]`可能也是如此。`NamedColumn[String]`

现在我正在尝试创建一个类型类来处理构建“查询”。

### 问题：

以 val q 开头的行（在末尾）应该读起来很简单`val q = query(items)`并且仍然可以编译。`defaultNext`由于推断`B0`和/或`B`to ，各种尝试产生推断类型参数不符合预期类型参数`Nothing`的错误，或“发散隐式扩展”错误或其他错误。我认为隐式错误是由不正确的类型推断触发的。

我已经在这上面浪费了好几天（这是我的一个开源项目），所以如果有人能帮忙，我真的很感激。

```
 class CanBuildQuery[A, B, R[_], Q, I <: Item[A, B, R]](val apply: I => A => Q)

  trait Low {
    implicit def defaultNext[A, B, R[_], B0, P <: Item[A, B0, R], I <: NextItem[A, B, B0, R, P], PQ](
      implicit cbq: CanBuildQuery[A, B0, R, PQ, P]
    ): CanBuildQuery[A, B, R, (PQ, R[B]), I] =
      new CanBuildQuery[A, B, R, (PQ, R[B]), I](sys.error("todo"))
  }

  object CanBuildQuery extends Low {
    implicit def defaultFirst[A, B, R[_]]:
      CanBuildQuery[A, B, R, R[B], FirstItem[A, B, R]] =
        new CanBuildQuery[A, B, R, R[B], FirstItem[A, B, R]](_.get)
  }

  def query[A, B, R[_], Q, I <: Item[A, B, R]](
    i: I with Item[A, B, R]
  )(
    implicit cbq: CanBuildQuery[A, B, R, Q, I]
  ): A => Q =
    cbq apply i

  trait Item[A, B, +R[_]] {    
    def get: A => R[B]
  }    
  trait FirstItem[A, B, +R[_]] extends Item[A, B, R] {    
    def get: A => R[B]
  }    
  trait NextItem[A, B, B0, +R[_], I <: Item[A, B0, R]] extends Item[A, B, R] {   
    val prev: I
    def get: A => R[B]
  }

  val items =
    new NextItem[Boolean, String, Long, Option, FirstItem[Boolean, Long, Option]]{
      val get = { _:Boolean => "hello" }
      val prev = new FirstItem[Boolean, Long, Option] {
        val get = { _:Boolean => 73 }
      }
    }

  val q = query(items)(CanBuildQuery.defaultNext(CanBuildQuery.defaultFirst)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T05:33:21.760

在 Gd 的帮助下，包括 Josh Seureth 的一些见解和建议，我得到了它的工作：

```
 trait Item[A] {
    type B
    type R[_]
    def get: A => R[B]
  }
  object Item {
    def apply[A, B, R[_]](get: A => R[B])(render: B => String => String) = {
      val get0 = get
      type B0 = B
      type R0[T] = R[T]
      new FirstItem[A] {
        type B = B0
        type R[T] = R0[T]
        def get = get0
      }
    }
  }
  trait FirstItem[A] extends Item[A] {
    type B
    def get: A => R[B]
    def &(item: Item[A]) =
      new NextItem[A] {
        type P = FirstItem.this.type
        type B = item.B
        type R[T] = item.R[T]
        val prev = FirstItem.this: FirstItem.this.type
        def get = item.get
      }
  }
  trait NextItem[A] extends Item[A] {
    type B
    type P <: Item[A]
    type _P = P
    val prev: P
    def get: A => R[B]
    def &(item: Item[A]) =
      new NextItem[A] {
        type P = NextItem.this.type
        type B = item.B
        type R[T] = item.R[T]
        val prev = NextItem.this: NextItem.this.type
        def get = item.get
      }
  }

  class CanBuildQuery[A, +Q, -I](val apply: I => A => Q)
  class CanBuildQueryImplicits {
    def apply[A, ]
    implicit def defaultNext[A, I <: NextItem[A], PQ](implicit cbq: CanBuildQuery[A, PQ, I#P]): CanBuildQuery[A, (PQ, I#R[I#B]), I] =
      new CanBuildQuery[A, (PQ, I#R[I#B]), I](ni => a => query(ni.prev)(cbq)(a) -> ni.get(a).asInstanceOf[I#R[I#B]])
    implicit def defaultFirst[A, B, I <: FirstItem[A]]: CanBuildQuery[A, I#R[I#B], I] =
      new CanBuildQuery[A, I#R[I#B], I](i => i.get.asInstanceOf[A => I#R[I#B]])
  }
  def query[A, Q, I <: Item[A]](i: I with Item[A])(implicit cbq: CanBuildQuery[A, Q, I]): A => Q = cbq apply i
}

  val items =
    Item((_: Field.type).id)(x => _ + " " + x) &
      Item((_: Field.type).name)(x => _ + " " + x) &
      Item((_: Field.type).allowMultiple)(x => _ + " " + x)

   val q = query(items) apply Field
   println(q) 
```

# python - 如何在 Plone 的 atreal.richfile.preview 代码中使用 javascript？

> ID：11408075
> 
> 赞同：0
> 
> 时间：2012-07-10T06:53:15.170
> 
> 标签：python, plone

我希望在 atreal.richfile.preview 鸡蛋中添加 javascript。我怎么做？实际上我希望在预览 doc/xls/pdf 文件时禁用预览视图中的复制/粘贴？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T08:30:06.870

在 ZMI 中，位于 /MySite/portal_view_customizations/atreal.richfile.preview.interfaces.ipreview-rfpreview

将自定义代码与 javascript 一起使用：

```
<html>
  <head>
    <title tal:content="here/Title"></title>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
    <script type="text/javascript">
    document.onkeydown = function(e) {
      if (e.ctrlKey && e.keyCode === 65) {
          return false;
      }
      if (e.ctrlKey && e.keyCode === 67) {
         return false;
      }
      if (e.ctrlKey && e.keyCode === 86) {
         return false;
      }

    return true;
}
   document.oncontextmenu = function(){
        return false;
    }

  </script>
  </head>
  <body tal:content="structure view/getPreview" >

</body>
</html> 
```

# iphone - 如何动态读取和更改 UILabel 的字体大小？

> ID：11408078
> 
> 赞同：4
> 
> 时间：2012-07-10T06:53:34.310
> 
> 标签：iphone, ios, objective-c

我在动态更改 UILabel 中的字体大小时遇到​​问题。在我的应用程序中，我有两个标签。

1.  第一个标签的尺寸是 90*59
2.  第二个标签的尺寸是 59*59

现在的问题是，第一个标签的字体大小在运行时可能会有所不同。我必须根据第一个标签的字体大小更改第二个标签的字体大小。

我使用了以下方法，但它不起作用。

```
 CGFloat secondLabelsize = firstLabel.font.pointSize;
    [seconLabel setFont: [UIFont fontWithName: @"Exo-Light" size:secondLabelsize]];

    viewDidLod
    {
    [hr_lbl setFont: [UIFont fontWithName: @"Exo-Light" size:55]];
    } 
```

每次我的标签尺寸只有 55。请建议我获取当前字体大小（第一个标签）而不是在 viewdidload 处定义的字体大小。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T08:07:10.540

这是答案，

label2.frame.size.width == label1.frame.size.width;

注意：如果我使用单“=”它是一个错误。如果我使用“==”它会发出警告，但也会给出预期的输出。真的很困惑那里发生了什么。任何人请指导我理解这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T07:13:13.840

1.  @"Exo-Light" 字体无法设置为 55。这是字体问题。尝试使用 sandart @"Helvetica" 以确保代码正常工作，然后找到更接近你的 exo-light 的字体（当然，它会正常运行）。

2.  还要确保标签在 xib 中正确连接。

# c# - OpenSSL asn1parse 和 asn1Editor 之间的分歧

> ID：11408081
> 
> 赞同：0
> 
> 时间：2012-07-10T06:53:37.817
> 
> 标签：c#, content-management-system, openssl, bouncycastle, asn.1

我正在尝试实现 SCEP 服务，我对密码学 ++ 的经验非常有限，所以这是一场艰苦的战斗。目前我正在接受来自客户的证书请求，并且我正在解释该请求。证书请求应该采用 CMS/PKCS#7 的形式，但是我在解释它时遇到了很大的困难：

1.  在[http://lipingshare.com/Asn1Editor/](http://lipingshare.com/Asn1Editor/)使用 ASN.1 编辑器时，我只是得到“读取数据失败”。
2.  在 Linux 上使用 'openssl asn1parse -inform DER < bytes' 时，我得到了一些看起来很明智的东西。该应用程序应该在 Windows .NET 上运行，因此对 linux 的破坏主要是一种绝望。
3.  尝试在 .NET 中解码失败：

    byte[] 数据 = Convert.FromBase64String( input_message );
    SignedCms signerInfo = new SignedCms();
    EnvelopedCms contentInfo = new EnvelopedCms();
    签名者信息.解码（数据）；
    contentInfo.Decode(signerInfo.ContentInfo.Content);
    contentInfo.Decrypt();[*]

    [*]：这会失败并出现 CryptographicException 和消息：“找不到对象或属性”。

4.  尝试使用 BouncyCastle .NET 类进行解码失败：

    byte[] 数据 = Convert.FromBase64String( input_message );
    Org.BouncyCastle.Cms.CmsSignedData signedData = new CmsDignedData(data);
    Org.BouncyCastle.Cms.CmsEnvelopedData ed = new CmsEnvelopedData(signedD.ContentInfo);[*]

    [*] 失败，出现“ArgumentException”和消息：“未知对象因素：BerTaggedObject”。

我意识到这不能满足 StackOverflows 对一个清晰简洁的问题的要求；但我想这只是反映了我这边缺乏清晰性:-(基本上我会非常感谢任何关于如何使用标准 Windows 类或BouncyCastle API；但以一些具体问题结束：

1.  我可以从 Linux 上的 asn1parse 似乎处理我的消息这一事实推断出一些东西，而 Lipingshare Asn.1 编辑器失败了吗？
2.  SCEP 标准规定 CMS 消息应进行 BER 编码；而 asn1parse 程序采用“-inform DER”开关（并且仍然有效......），而 BouncyCastle 类似乎抱怨 BERTaggedObject。

感谢任何想法，想法或建议。

乔金

# objective-c - 如何将 self 传递给对象类并在完成后被调用？

> ID：11408085
> 
> 赞同：1
> 
> 时间：2012-07-10T06:54:03.213
> 
> 标签：objective-c, uiviewcontroller, delegates

我目前有一个 UIViewController 和一个 NSObject 类。

我想要做的是告诉 NSObject 类执行一个动作，然后告诉 UIViewController 当它完成它的动作。

我正在调用对象来执行它的操作，如下所示：

```
[fooObject performActionWithDelegate:self]; 
```

performActionWithDelegate 函数基本上只需要 UIViewcontroller 的委托来执行回调。

```
-(void)performActionWithDelegate:(id)d{

    // bar is declared in the fooObject header file
    // id bar;

    [bar setDelegate:d];

    [bar performCallback];

} 
```

UIViewController 中`performCallback`的简单语句在哪里：`NSLog()`

```
-(void)performCallback{

    NSLog(@"Successfully performed a callback");    

{ 
```

现在，我希望这个工作。我的第一个猜测是，这不是解决这个问题的最佳方法。

问题的全部范围是 fooObject 应该对 web 服务执行 httppost 以更新其属性之一，然后通知 uiviewcontroller 操作是否成功。

我如何实现这一目标？

任何提示和/或指针将不胜感激！

提前致谢。

**编辑：** 实际问题是 fooObject 没有执行回调。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T07:41:35.440

目前尚不清楚您要完成的工作。您所做的似乎与两种不同的设计模式有关：

*   代表
*   异步回调

**委托：**如果出于某种原因将 UIViewController 的某些功能分离到另一个对象中，您将使用委托。而不是 UIViewController 做某事，它要求另一个对象来做。这通常用于代码重用，因此您可以在不同的情况下使用相同的 UIViewController 服务，只需更改委托以更改其某些行为。

**异步回调：**这允许在您做其他事情时在后台发生操作，然后在操作完成时通过调用对象的方法来通知。您可以在不涉及其他对象的情况下执行此操作。

在您的情况下，您为什么要向我们的 UIViewController 之外的 Web 服务执行 HTTP 发布？您是否只想将网络代码与 UI 代码分开？在这种情况下，您实际上并不需要委托，只需从 UIViewController 调用另一个对象的方法，当它返回时，它就完成了。它可以在其他参数中传回您需要的任何结果。通过在调用对象上设置属性来返回值通常不是一个很好的设计。即使您这样做， UIViewController 也不是真正的“代表”。

另一方面，如果您担心在 HTTP 发布过程中阻塞主线程，那么您将需要使用异步回调之类的东西。最简单的方法是使用[Grand Central Dispatch](http://developer.apple.com/library/ios/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html)。从概念上讲，您可以执行以下操作：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
  [self doLongHTTPPost];
  dispatch_async(dispatch_get_main_queue(), ^{ [self longHTTPPostDone]; });
}); 
```

这将`doLongHTTPPost`在后台调用，然后在完成后的某个时间点调用`longHTTPPostDone`主线程，在该线程中可以安全地执行 UI 操作。

# fork - 在窗口中分叉

> ID：11408095
> 
> 赞同：1
> 
> 时间：2012-07-10T06:54:51.070
> 
> 标签：fork

我正在研究不同 fork 实现方法的细节。以下链接用于 fork 实现， [http://doxygen.scilab.org/5.3/d0/d8f/forkWindows_8c_source.html](http://doxygen.scilab.org/5.3/d0/d8f/forkWindows_8c_source.html)。这个 fork 实现是通过使用 ntdll 导出的 ZwXXX 函数实现的。

我可以在 vs2012，windows 7 -64 位机器上编译这个。但是在测试中，我没有得到预期的输出。在分叉时，会创建新的子进程，但该进程会在恢复其挂起的主线程时立即返回。它不会再次调用 fork 调用。有没有人尝试为 Windows 实现 fork ？我在这个代码片段中缺少什么？过去一周我一直在研究不同的分叉实现。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T11:25:54.920

在将 fork api 移植到 Windows 时，我也遇到了类似的问题，我使用了一个临时解决方案：

*   在子进程的fork之后添加Sleep()。
*   ctrl+F5 运行父进程。
*   然后将子进程附加到 VS 调试器。
*   使用 F5 键继续调试。
*   我们还可以将父进程附加到 VS 调试器。

有没有更好的解决方案来调试分叉的子进程。

# java - maven ejb-client 生成依赖排除

> ID：11408100
> 
> 赞同：7
> 
> 时间：2012-07-10T06:55:11.877
> 
> 标签：java, maven, dependencies, client, ejb

我们有一个解决方案，我们的 UI 项目通过使用 EJB 客户端依赖项包含大量业务服务。Maven 上的问题在于，即使客户端 .jar 通常包含大约 1-2 个类，它们也会带来整个服务应用程序的完整依赖堆栈。这可能有点难看，当 .ear 文件开始增长到 50-100Mb时，由于不相关的依赖项潜入 UI 应用程序*，*不时会出现令人讨厌的错误。

当然，我们总是可以排除客户端上的依赖关系，但是我们必须为使用这些服务的每个客户端项目编写相同的一行代码，这是很多不必要的重复。另外，人们提出了最奇怪的错误消息并花费大量时间跟踪它们，然后才记得提到它们包含一些客户端 jar 并且没有检查它带来了哪些额外的依赖项。

例子：

```
 <dependency>
            <groupId>fi.path.to.service</groupId>
            <artifactId>customermanagement-common</artifactId>
            <version>2.6</version>
        </dependency>
        <dependency>
            <groupId>fi.path.to.service</groupId>
            <artifactId>customermanagement-service</artifactId>
            <classifier>client</classifier>
            <exclusions>
                <exclusion>
                    <groupId>fi.path.to.dependency</groupId>
                    <artifactId>internal-dependency-#1</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>org.codehaus.castor</groupId>
                    <artifactId>castor</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>fi.path.to.dependency</groupId>
                    <artifactId>internal-dependency-#2</artifactId>
                </exclusion>
                <exclusion>
                    <artifactId>internal-dependency-#3</artifactId>
                    <groupId>fi.path.to.dependency</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>internal-dependency-#4</artifactId>
                    <groupId>fi.path.to.dependency</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>internal-dependency-#5</artifactId>
                    <groupId>fi.path.to.dependency</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>castor-xml</artifactId>
                    <groupId>org.codehaus.castor</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>castor-codegen</artifactId>
                    <groupId>org.codehaus.castor</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>castor-xml-schema</artifactId>
                    <groupId>org.codehaus.castor</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>internal-dependency-#6</artifactId>
                    <groupId>fi.path.to.dependency</groupId>
                </exclusion>
            </exclusions>
            <version>2.6</version>
        </dependency> 
```

这只是包含一个服务客户端，想象一下在几个不同的应用程序中有几个这样的应用程序，你就会明白，每次都写下所有的排除项是很烦人的，项目 POM 开始变得相当冗长。

我会将依赖项标记为已提供，但是如果它们不存在，则有几个依赖项会在运行时崩溃。比如说那些包含对另一个应用程序的另一个服务调用的外部异常类，这不是出于某种原因或其他原因包装在服务项目中，如果不存在，则会在运行时导致 ClassNotFoundException。

因此，我知道可以通过使用 maven-ejb-plugin 上的 pom.xml 规范在 ejb 客户端生成过程中排除/包含类，但是有什么方法可以排除依赖项吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-24T07:29:07.557

似乎 Maven 只是不支持从一个模块中构建多个 jar 非常好。

因此，我们发现的唯一合理的解决方法是创建另一个模块（将 xxx-service 分解为 xxx-service 和 xxx-service-client）并将 xxx-service-client 模块配置为只有 EJB 客户端/委托类和最小依赖项。这样，可以通过一次执行来构建项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T23:11:10.543

我在这里有同样的问题。我**认为**一种解决方案可能是使用配置文件，因为在每个配置文件中您都可以指定依赖项（请参阅[http://blog.sonatype.com/people/2010/01/how-to-create-two-jars-from-one-项目和为什么你应该/](http://blog.sonatype.com/people/2010/01/how-to-create-two-jars-from-one-project-and-why-you-shouldnt/)）

就我而言，这不起作用，因为我需要在一次执行 Maven 时生成两个 JAR（ejb 和 ejb-client）。:)

# php - 从 javascript 调用 php 作为 src 文件

> ID：11408103
> 
> 赞同：1
> 
> 时间：2012-07-10T06:55:20.043
> 
> 标签：php, javascript

我有一个问题，当 .php 文件称为 javascript 时，这意味着什么？什么时候需要使用它？

前任：

```
<head> 
<script src="dir/myphpfile.php" type="text/javascript"></script>
</head> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T06:57:18.693

这意味着它将生成 javascript 代码作为输出而不是 HTML，因为这就是 Web 浏览器可以在标签`myphpfile.php`中理解的全部内容。`script`当您想在运行时生成动态 javascript 而不是将其静态编码到单独的`.js`文件中时，它很有用。例如，声明一个 javascript 变量，其中包含存储在服务器数据库中的客户列表，并使该 javascript 变量可全局访问。

另一个可能有用的常见示例是实现允许跨域 AJAX 请求的[JSONP 。](http://en.wikipedia.org/wiki/JSONP)

另一个例子是使用一个 php 脚本，它将多个 javascript 文件的输出合并并缓存到一个文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T07:03:27.430

正如 Darin Dimitrov 所说，它可用于在运行时生成动态 javascript，有时也可用于动态缩小 javascript 文件。

# javascript - 从两侧拖放到 Html5

> ID：11408106
> 
> 赞同：4
> 
> 时间：2012-07-10T06:55:48.997
> 
> 标签：javascript, jquery, html

我正在创建一个应用程序，我在其中实现 Html5 拖放功能，并且工作正常。现在它是一个应用程序，在这种情况下可能不需要放置项目，我想再次将元素拖放到上一个位置。我在这里看到了一个示例，`http://ashishware.com/MochikitDnD.shtml`但它使用 MochiKit.js 作为他们的示例，我不想要任何外部插件/js。请为我提供相同的示例或代码。我的拖放代码如下所示：

```
function allowDrop(ev)
    {
            ev.preventDefault();
    }

function drag(ev)
    {
            ev.dataTransfer.setData("Text",ev.target.id);
    }

function drop(ev)
    {
            ev.preventDefault();
            var data=ev.dataTransfer.getData("Text");
            ev.target.appendChild(document.getElementById(data));
    } 
```

和 Html 看起来像

```
<div id="div1" ondrop="drop(event)" ondragover="allowDrop(event)"></div>

<div id="drag1" draggable="true" ondragstart="drag(event)" ondragover="allowDrop(event)"></div> 
```

提前致谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T07:52:10.473

为了能够将某些东西“拖回”，您需要一个将东西拖回的地方，如下所示：

```
<div id="div1" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
<div id="div2"ondrop="drop(event)" ondragover="allowDrop(event)">
    <div id="drag1" draggable="true" ondragstart="drag(event)"></div>
</div> 
```

除此之外，[您的代码可以工作](http://jsfiddle.net/robertc/pXjpY/)（在我测试过的 Chrome、Firefox 和 Opera 中）。

# java - 迄今为止解析 Java 字符串

> ID：11408116
> 
> 赞同：2
> 
> 时间：2012-07-10T06:57:14.830
> 
> 标签：java, parsing, date, date-format

日志（2 个不同的日期）：

```
START TIME BEFORE PARSE: 06/27/2012 09:00
START TIME AFTER PARSE : Thu Mar 06 09:00:00 EET 2014

START TIME BEFORE PARSE: 07/06/2012 09:00
START TIME AFTER PARSE : Thu Jun 07 09:00:00 EEST 2012 
```

代码 ：

```
DateFormat sdf = new SimpleDateFormat("dd/MM/yyyy HH:mm");
            Date date = sdf.parse(time);
            System.out.println("TIME BEFORE PARSE: " + time);
            System.out.println("TIME AFTER PARSE : " + date); 
```

为什么过年会乱？如何让它工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T07:00:07.840

因为您将月份与日期反转：

```
 dd/MM/yyyy HH:mm
              06/27/2012 09:00 
```

一年没有第 27 个月。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T07:00:16.437

第一个示例中的月份在`27`我知道的任何日历中都无效。（您可能只是在您的输入或您选择的格式中弄错了日/月顺序。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T07:01:26.890

您使用模式 dd/MM/yyyy 来解析日期 06/27/2012。我怀疑27是一个月。适当的格式是 MM/dd/yyyy。

DateFormat 默认情况下是宽松的，因此会将 27 视为有效月份：2 年 + 3 个月，因此您将在 2 年后的 3 月结束。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T07:07:16.690

```
 String time = "06/27/2012 09:00";
    DateFormat sdf = new SimpleDateFormat("MM/dd/yyyy HH:mm");
    Date date = sdf.parse(time);
    System.out.println("TIME BEFORE PARSE: " + time);
    System.out.println("TIME AFTER PARSE : " + date); 
```

在您的示例中，日期格式错误。你给了“dd/MM/yyyy HH:mm”，应该是“MM/dd/yyyy HH:mm”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T07:08:48.297

You have used the **pattern dd/MM/YYYY** , but **you have entered the date as MM/dd/YYYY**, causing you this weird behaviour..

# c# - 将搜索到的行从 DataGridView 复制到另一个 DataGridView

> ID：11408119
> 
> 赞同：0
> 
> 时间：2012-07-10T06:57:24.200
> 
> 标签：c#, visual-studio-2008, datagridview, datasource

我们如何**将数据网格视图中的一行或多行复制到**同一表单上的其他数据网格视图。在这里，我有从第一个网格搜索的搜索选项，如果找到一些匹配的行，则将它们复制到第二个网格。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T07:03:40.553

你可以这样做：

```
ConvertGridToTable();  // Add data in Datatabledt from gridview
Clipboard.Clear();
DataObject data = new DataObject(DataFormats.Serializable, Datatabledt);
MessageBox.Show("Data Copied.");
Clipboard.SetDataObject(data); 
```

现在 Datatabledt 在剪贴板中可用，您可以将其粘贴到第二个 gridview 中，您可以这样做：

```
DataObject data = (DataObject)Clipboard.GetDataObject();
DataTable dt = (DataTable)data.GetData(DataFormats.Serializable);

foreach (DataRow dr in dt.Rows)
{
    dtData.ImportRow(dr);
}
dtData.AcceptChanges();
grdProgramData.DataSource = dtData;
MessageBox.Show("Data Pasted."); 
```

**编辑：**

对于**一行或多行**，您可以通过循环选择行来实现。

**编辑**

这是 ConvertGridToTable 中的内容

```
private void ConvertGridToTable()
{

    if (Datatabledt.Rows.Count > 0)
    { }

    Datatabledt = dtData.Clone();

    foreach (DataGridViewRow gr in YOURGRIDVIEW.SelectedRows)
    {
        DataRow dc = Datatabledt.NewRow();
        dc["KEY-FIELD"] = Int32.Parse(gr.Cells[0].Value.ToString());
        .....

        Datatabledt.Rows.Add(dc);
    }
    Datatabledt.AcceptChanges();
} 
```

# java - java.lang.UnsupportedOperationException 的 HTTP 501

> ID：11408121
> 
> 赞同：7
> 
> 时间：2012-07-10T06:57:42.370
> 
> 标签：java, http, exception, rest

我有一个写入 Java 模块的通用 REST 服务层，可以插入。如果模块不支持任何所需的操作（资源的 GET/POST/PUT/DELETE），则模块会抛出 java.lang.UnsupportedOperationException或我拥有的等效异常类型。

那么，在这种情况下，我可以向客户端返回 HTTP 501 错误代码吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-10T07:01:55.437

在这种情况下，您应该使用`405` *Method Not Allowed （*[来自 Wikipedia 的](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes)所有引用）：

> 使用该资源不支持的请求方法对该资源发出请求；例如，在需要通过 POST 呈现数据的表单上使用 GET，或者在只读资源上使用 PUT。

`501`是合理的：

> 服务器要么**无法识别请求方法**，要么无法完成请求。

但我会保留它用于您计划在不久的将来实施的操作。

# jsf - h:commandButton/h:commandLink 在第一次单击时不起作用，仅在第二次单击时起作用

> ID：11408130
> 
> 赞同：24
> 
> 时间：2012-07-10T06:58:28.960
> 
> 标签：jsf, jsf-2, commandbutton, commandlink

我们有一个更新动态包含的 ajax 导航菜单。包含文件有各自的形式。

```
<h:form>
    <h:commandButton value="Add" action="#{navigator.setUrl('AddUser')}">
        <f:ajax render=":propertiesArea" />
    </h:commandButton>
</h:form>
<h:panelGroup id="propertiesArea" layout="block">
    <ui:include src="#{navigator.selectedLevel.url}" />
</h:panelGroup> 
```

它可以正常工作，但包含文件中的任何命令按钮在第一次单击时都不起作用。它仅适用于第二次点击。

我发现这个问题[commandButton/commandLink/ajax action/listener method not invoked 或 input value not updated](https://stackoverflow.com/questions/2118656/hcommandlink-hcommandbutton-is-not-being-invoked/2120183#2120183)并且我的问题在第 9 点中描述。我知道我需要在 include 中明确包含的 ID`<h:form>`来`<f:ajax render>`解决它。

```
<f:ajax render=":propertiesArea :propertiesArea:someFormId" /> 
```

但是，在我的情况下，表单 ID 事先是未知的。此外，此表格最初在上下文中将不可用。

有没有解决上述情况的方法？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-07-10T11:16:19.683

您可以使用以下脚本来修复 Mojarra 2.0/2.1/2.2 错误（注意：这不会出现在 MyFaces 中）。此脚本将为`javax.faces.ViewState`在 ajax 更新后未检索任何视图状态的表单创建隐藏字段。

```
jsf.ajax.addOnEvent(function(data) {
    if (data.status == "success") {
        fixViewState(data.responseXML);
    }
});

function fixViewState(responseXML) {
    var viewState = getViewState(responseXML);

    if (viewState) {
        for (var i = 0; i < document.forms.length; i++) {
            var form = document.forms[i];

            if (form.method == "post") {
                if (!hasViewState(form)) {
                    createViewState(form, viewState);
                }
            }
            else { // PrimeFaces also adds them to GET forms!
                removeViewState(form);
            }
        }
    }
}

function getViewState(responseXML) {
    var updates = responseXML.getElementsByTagName("update");

    for (var i = 0; i < updates.length; i++) {
        var update = updates[i];

        if (update.getAttribute("id").match(/^([\w]+:)?javax\.faces\.ViewState(:[0-9]+)?$/)) {
            return update.textContent || update.innerText;
        }
    }

    return null;
}

function hasViewState(form) {
    for (var i = 0; i < form.elements.length; i++) {
        if (form.elements[i].name == "javax.faces.ViewState") {
            return true;
        }
    }

    return false;
}

function createViewState(form, viewState) {
    var hidden;

    try {
        hidden = document.createElement("<input name='javax.faces.ViewState'>"); // IE6-8.
    } catch(e) {
        hidden = document.createElement("input");
        hidden.setAttribute("name", "javax.faces.ViewState");
    }

    hidden.setAttribute("type", "hidden");
    hidden.setAttribute("value", viewState);
    hidden.setAttribute("autocomplete", "off");
    form.appendChild(hidden);
}

function removeViewState(form) {
    for (var i = 0; i < form.elements.length; i++) {
        var element = form.elements[i];
        if (element.name == "javax.faces.ViewState") {
            element.parentNode.removeChild(element);
        }
    }
} 
```

只需将其包含在错误页面的`<h:outputScript name="some.js" target="head">`内部即可。`<h:body>`如果您不能保证有问题的页面使用 JSF `<f:ajax>`，这会触发自动包含`jsf.js`，那么您可能希望在调用`if (typeof jsf !== 'undefined')`之前添加一个额外的检查`jsf.ajax.addOnEvent()`，或者通过

```
<h:outputScript library="javax.faces" name="jsf.js" target="head" /> 
```

请注意，`jsf.ajax.addOnEvent`仅涵盖标准 JSF `<f:ajax>`，而不包括 PrimeFaces`<p:ajax>`或`<p:commandXxx>`它们在 jQuery 下使用的工作。要同时涵盖 PrimeFaces ajax 请求，请添加以下内容：

```
$(document).ajaxComplete(function(event, xhr, options) {
    if (typeof xhr.responseXML != 'undefined') { // It's undefined when plain $.ajax(), $.get(), etc is used instead of PrimeFaces ajax.
        fixViewState(xhr.responseXML);
    }
} 
```

* * *

**如果您使用的是 JSF 实用程序库[OmniFaces ，请](http://omnifaces.org)**更新**，很高兴知道上述内容自 1.7 以来已成为 OmniFaces 的一部分。只需在`<h:body>`. 另请参阅[陈列柜](http://showcase.omnifaces.org/scripts/FixViewState)。**

 **```
<h:body>
    <h:outputScript library="omnifaces" name="fixviewstate.js" target="head" />
    ...
</h:body> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-04-11T08:56:00.013

感谢 BalusC，因为他的回答真的很棒（像往常一样:)）。但我必须补充一点，这种方法不适用于来自 RichFaces 4 的 ajax 请求。他们有几个关于 ajax 的问题，其中之一是没有调用 JSF-ajax-handlers。因此，当使用 RichFaces-components 对某个包含表单的容器进行重新渲染时，不会调用 fixViewState-function 并且 ViewState 会丢失。

在[RichFaces 组件参考](http://docs.jboss.org/richfaces/4.3.X/4.3.5.Final/Component_Reference/en-US/html/chap-Component_Reference-Common_Ajax_attributes.html#sect-Component_Reference-Events_and_JavaScript_interactions-Registering_event_callbacks_with_jQuery)中，他们说明了如何为“他们的”ajax 请求注册回调（实际上他们正在使用 jQuery 来挂钩所有 ajax 请求）。但是使用它，我无法获得上面 BalusC 的脚本用来获取 ViewState 的 ajax-response。

所以基于 BalusC 的修复，我制定了一个非常相似的修复。在浏览器处理 ajax 请求之前，我的脚本将当前页面上所有表单的所有 ViewState 值保存在地图中。在更新 DOM 之后，我尝试恢复之前保存的所有 ViewStates（对于现在缺少 ViewState 的所有表单）。

继续：

```
jQuery(document).ready(function() {
    jQuery(document).on("ajaxbeforedomupdate", function(args) {
        // the callback will be triggered for each received JSF AJAX for the current page
        // store the current view-states of all forms in a map
        storeViewStates(args.currentTarget.forms);
    });
    jQuery(document).on("ajaxcomplete", function(args) {
        // the callback will be triggered for each completed JSF AJAX for the current page
        // restore all view-states of all forms which do not have one
        restoreViewStates(args.currentTarget.forms);
    });
});

var storedFormViewStates = {};

function storeViewStates(forms) {
    storedFormViewStates = {};
    for (var formIndex = 0; formIndex < forms.length; formIndex++) {
        var form = forms[formIndex];
        var formId = form.getAttribute("id");
        for (var formChildIndex = 0; formChildIndex < form.children.length; formChildIndex++) {
            var formChild = form.children[formChildIndex];
            if ((formChild.hasAttribute("name")) && (formChild.getAttribute("name").match(/^([\w]+:)?javax\.faces\.ViewState(:[0-9]+)?$/))) {
                storedFormViewStates[formId] = formChild.value;
                break;
            }
        }
    }
}

function restoreViewStates(forms) {
    for (var formIndexd = 0; formIndexd < forms.length; formIndexd++) {
        var form = forms[formIndexd];
        var formId = form.getAttribute("id");
        var viewStateFound = false;
        for (var formChildIndex = 0; formChildIndex < form.children.length; formChildIndex++) {
            var formChild = form.children[formChildIndex];
            if ((formChild.hasAttribute("name")) && (formChild.getAttribute("name").match(/^([\w]+:)?javax\.faces\.ViewState(:[0-9]+)?$/))) {
                viewStateFound = true;
                break;
            }
        }
        if ((!viewStateFound) && (storedFormViewStates.hasOwnProperty(formId))) {
            createViewState(form, storedFormViewStates[formId]);
        }
    }
}

function createViewState(form, viewState) {
    var hidden;

    try {
        hidden = document.createElement("<input name='javax.faces.ViewState'>"); // IE6-8.
    } catch(e) {
        hidden = document.createElement("input");
        hidden.setAttribute("name", "javax.faces.ViewState");
    }

    hidden.setAttribute("type", "hidden");
    hidden.setAttribute("value", viewState);
    hidden.setAttribute("autocomplete", "off");
    form.appendChild(hidden);
} 
```

由于我不是 JavaScript 专家，我想这可能会进一步改进。但它绝对适用于 FF 17、Chromium 24、Chrome 12 和 IE 11。

这种方法的两个附加问题：

*   再次使用相同的 ViewState-value 是否可行？即 JSF 是否为每个请求/响应的每个表单分配相同的 ViewState 值？我的方法是基于这个假设（我没有找到任何相关信息）。

*   是否有人预计此 JavaScript 代码会出现任何问题，或者已经在使用任何浏览器时遇到了一些问题？**

# conflict - yacc shift/reduce conflict

> ID：11408133
> 
> 赞同：0
> 
> 时间：2012-07-10T06:58:46.310
> 
> 标签：conflict, yacc, shift-reduce-conflict

I faced conflict problem during yacc compilation.

Error message below:

```
24: shift/reduce conflict (shift 66, reduce 99) on '/'
state 24
arithmetic_leaf : absolute_path .  (99)
absolute_path : absolute_path . '/' relative_path  (102) 
```

Code below:

```
arithmetic_leaf:  '(' arithmetic_expression ')'
    {
    }
| integer_value
    {
    }
| real_value
    {
    }
| absolute_path
    {
    }
;

absolute_path: '/'
    {
    }
| '/' relative_path
    {
    }
| absolute_path '/' relative_path
    {
    }
;

relative_path: path_segment
    {
    }
| relative_path '/' path_segment
    {
    }
; 

path_segment: V_ATTRIBUTE_IDENTIFIER V_LOCAL_TERM_CODE_REF
    {
    }
| V_ATTRIBUTE_IDENTIFIER '[' V_ARCHETYPE_ID ']'
    {
    }
| V_ATTRIBUTE_IDENTIFIER
    {
    }
; 
```

At this point, 'shift/reduce' conflict will occur.

I don't know what is the problem. How to solve this conflict?

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T07:18:22.910

The conflict (appears to me) to be between the alternatives for `absolute_path`.

It appears that a string like `'/a/b` will match either the `absolute_path '/' relative_path` rule, *or* the `'/' relative_path` rule.

At least to me, it looks like you just want to eliminate one of the two. I'd probably write it as:

```
absolute_path: '/'
             | '/' relative_path
             ; 
```

Alternatively, it might make more sense to allow a `relative_path` to just be an empty string, in which case, you could end up with something like:

```
absolute_path: '/' relative_path
             ;

relative_path:
             | path_segment
             | relative_path '/' path_segment
             ; 
```

# android - 在android中一键注入key_events。

> ID：11408135
> 
> 赞同：0
> 
> 时间：2012-07-10T06:58:55.410
> 
> 标签：android, key-events

在我的应用程序中，我想在单击按钮时调用一组 KEY_EVENT 时执行相同的功能。那可能吗。

# svn - 合并而不从同一代码库分支？

> ID：11408136
> 
> 赞同：1
> 
> 时间：2012-07-10T06:58:56.017
> 
> 标签：svn, version-control, merge, branch, codebase

我们有一个没有使用版本控制系统管理的小型开发项目。两个人正在处理原始代码库，因此原始代码库有两个略有不同的副本。说这些副本“copyA”和“copyB”。

现在我尝试为这两个副本创建一个 SVN 存储库。我将“copyA”放在主干中，将“copyB”放在名为“branchB”的分支中。

之后，两名开发人员开始研究这两个存储库路径。（“主干”和“分支B”）。

然后我们需要合并这两个分支，但似乎没有产生正确的结果。

是否有必要将分支从相同的“代码库”中分离出来以便在稍后阶段合并？

就我而言，没有一个“代码库”。“copyA”和“copyB”中的两个分别提交给 SVN。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T07:08:00.110

最好两个分支有相同的起点。
您可以在 SVN 中“合并”两个不相关的分支（“在[没有 Mergeinfo](http://svnbook.red-bean.com/en/1.6/svn.branchmerge.advanced.html)的情况下合并”部分）：

> ### 合并不相关的来源
> 
> 如果您要求 svn merge 比较两个彼此不相关的 URL，仍然会生成一个补丁并将其应用于您的工作副本，但不会创建合并元数据。这两个来源之间没有共同的历史，未来的“智能”合并取决于共同的历史。

请注意，在这种情况下[git](http://git-scm.com/)会更有效，因为它很容易设置两个分支，每个分支都以“ `copyA`”开头，并用“”擦除第二个分支的内容`copyB`（git 会检测到由引入的所有重命名、移动和添加" `copyB`" 与 " `copyA`") 相比。
如果你在 git 中创建了两个不相关的分支，你仍然可以[伪造一个共同的历史并将它们合并](https://stackoverflow.com/questions/1488753/how-to-merge-two-branches-without-a-common-ancestor)。

# ada - 将整数转换为记录

> ID：11408137
> 
> 赞同：5
> 
> 时间：2012-07-10T06:59:09.293
> 
> 标签：ada

我从 C 中得到一个 16 位整数。这个整数由 16 个标志组成。

如何在 16 个布尔值的记录中转换此整数？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T14:03:28.280

```
type Flags is record
   Flag1 : Boolean;
   Flag2 : Boolean;
   - ...
   Flag15 : Boolean;
end record;

for Flags use record
   Flag1  at 0 range 0 .. 0;
   Flag2  at 0 range 1 .. 1;
   -- ...
   Flag15 at 0 range 15 .. 15;
 end record;
 for Flags'Size use 16;

 -- This is vital, because normally, records are passed by-reference in Ada.
 -- However, as we use this type with C, it has to be passed by value.
 -- C_Pass_By_Copy was introduced in GNAT and is part of the language since Ada 2005.
 pragma Convention (C_Pass_By_Copy, Flags); 
```

您可以直接在 C 整数类型的导入 C 函数的声明中使用此类型。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T07:08:18.583

您可以简单地执行 16 次右位移并将结果与​​ 1 逐位与来确定是否设置了位/标志。这是一个例子（我希望这不是家庭作业）：

```
#include <stdio.h>
#include <stdint.h>

typedef unsigned char BOOL;

int main(void)
{
   unsigned i;
   uint16_t flags = 0x6E8B; /* 0b0110111010001011 */
   BOOL arr[16];

   for (i = 0; i < 16; i++) {
      arr[i] = (flags >> i) & 1;
      printf("flag %u: %u\n", i+1, arr[i]);
   }

   return 0;
} 
```

`arr[0]`将包含最低有效位和`arr[15]`最高有效位。

输出：

```
flag 1: 1
flag 2: 1
flag 3: 0
flag 4: 1
flag 5: 0
flag 6: 0
flag 7: 0
flag 8: 1
flag 9: 0
flag 10: 1
flag 11: 1
flag 12: 1
flag 13: 0
flag 14: 1
flag 15: 1
flag 16: 0 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-10T14:07:35.610

在 Ada 中，您通常可以声明一个导入函数以获取所需类型的参数或返回值，而不是您必须转换的 C 等效类型。

所以，在这里，你想要

```
type Flags is array (0 .. 15) of Boolean;
for Flags'Component_Size use 1;
for Flags'Size use 16;
pragma Convention (C, Flags); 
```

你可以将你的函数声明为

```
function Get_Flags return Flags;
pragma Import (C, Get_Flags, “get_flags"); 
```

其中与

```
unsigned short get_flags(void) {
  return 0x6e8b;
} 
```

一个简单的安全带给了我

```
flag 0 is TRUE
flag 1 is TRUE
flag 2 is FALSE
flag 3 is TRUE
flag 4 is FALSE
flag 5 is FALSE
flag 6 is FALSE
flag 7 is TRUE
flag 8 is FALSE
flag 9 is TRUE
flag 10 is TRUE
flag 11 is TRUE
flag 12 is FALSE
flag 13 is TRUE
flag 14 is TRUE
flag 15 is FALSE 
```

正如 Bo Persson 所说，只要您的代码只需要在 little-endian 机器上运行就可以了。如果您希望它在 SPARC 或 Powerbook 上运行，最好使用垃圾神的建议；

```
subtype Flags is Interfaces.C.unsigned_short;
use type Flags;

function Get_Flags return Flags;
pragma Import (C, Get_Flags, "get_flags"); 
```

然后，可能，命名你的标志位（用更有意义的东西！）

```
Flag_3 : constant Flags := 2#0000_0000_0000_1000#; 
```

或（可能更像 C）

```
Flag_4 : constant Flags := 2 ** 4; 
```

然后检查

```
(Get_Flags and Flag_3) /= 0 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-10T12:11:46.047

在 Ada 中，[*模块化类型*](http://www.ada-auth.org/standards/12rm/html/RM-3-5-4.html)允许逻辑操作以位集的形式访问值。在 Ada 95 中引入，可以在[*Ada 95 Rationale, §3.3.2 Modular Types*](http://www.adaic.org/resources/add_content/standards/95rat/rat95html/rat95-p2-3.html#3-2)中找到概述。根据实现，预定义类型[`Interfaces.C.unsigned_short`](http://www.ada-auth.org/standards/12rm/html/RM-B-3.html)可能是从 C 中获取值的方便选择。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-10T20:37:27.250

您也可以使用叠加来达到预期的效果；让我们假设这些布尔值都是有意义的并且是严格的布尔值（即没有什么是枚举）。

首先你需要定义你的记录；我将使用单个 Nybble 来说明，但原理是适用的。Nybble 是旧的 DOS 属性：读取（可见性；回想起来应该是 Is_Hidden）、写入、存档和系统。

```
Type Nyble_Data is mod 2**4;
For Nyble_Data'Size use 4;

Type Data_Record is record
    Can_Read, Can_Write, Is_Archived, Is_System : Boolean:= False;
end record;

-- Ensure 4 bits used.
pragma Pack (Data_Record);
For Data_Record'Size use 4;

-- Specify Layout.
For Data_Record use
    record
        Can_Read    at 0 range 0..0;
        Can_Write   at 0 range 1..1;
        Is_Archived at 0 range 2..2;
        Is_System   at 0 range 3..3;
    end record;

-- This is where the magic occurs.
Function Convert( Data : In Nyble_Data ) Return Data_Record is
    Result : Data_Record;
    For Result'Address use Data'Address;
    Pragma Import( Convention => Ada, Entity => Result );
    Pragma Inline( Convert );
begin
    Return Result;
end Convert;

-- Test variables.
Input   : Nyble_Data:= 5;
Output  : Data_Record:= Convert(Input);

-- Display the record.
Procedure Put( Data : In Data_Record ) is
    Use Ada.Text_IO;
begin
    Put_Line( "Read:   "    & ASCII.HT & Boolean'Image(Data.Can_Read) );
    Put_Line( "Write:  "    & ASCII.HT & Boolean'Image(Data.Can_Write) );
    Put_Line( "Archive:"    & ASCII.HT & Boolean'Image(Data.Is_Archived) );
    Put_Line( "System: "    & ASCII.HT & Boolean'Image(Data.Is_System) );
end Put; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-10T07:36:52.083

您可以使用包含一个短整数（或一个 int_16）和一个位字段的联合：

```
union UMyFlags {
    short n;
    struct {
        flag_1 : 1;
        flag_2 : 1;
        // other flags ...
    } flags;
}; 
```

但是，由于字节顺序，您的代码不会在每个平台上都可移植。

# c# - 在 C# 中使用鼠标绘制矩形

> ID：11408139
> 
> 赞同：2
> 
> 时间：2012-07-10T06:59:18.823
> 
> 标签：c#, winforms

我只是想在鼠标移动事件上画一个矩形。我刚刚将起点保存在 MouseDown 事件中，而终点来自 Mouse Move 。并调用了paintImage函数。

```
Rectangle rec = new Rectangle (x1,y1,x2 - x1 , y2 - y1);
G.DrawRectangle(Pens.Blue,rec);

Starting Points = (x1,y1)
Ending Points = (x2,y2) 
```

问题是当 x2 的值小于 x1 或 y2 小于 y1 时，矩形没有绘制......任何人都可以帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T07:15:14.117

你可以很容易地写一张支票：

```
int drawX, drawY, width, height;
if (x1 < x2)
{
    drawX = x1;
    width = x2 - x1;
}
else
{
    drawX = x2;
    width = x1 - x2;
}

if (y1 < y2)
{
    drawY = y1;
    height = y2 - y1;
}
else
{
    drawY = y2;
    height = y1 - y2;
}

Rectangle rec = new Rectangle (drawX, drawY, width, height);
G.DrawRectangle(Pens.Blue,rec); 
```

这也可以写成更短的形式：

```
Rectangle rec = new Rectangle ((x1 < x2) ? x1 : x2, (y1 < y2) ? y1 : y2, (x1 < x2) ? x2 - x1 : x1 - x2, (y1 < y2) ? y2 - y1 : y1 - y2);
G.DrawRectangle(Pens.Blue,rec); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T07:15:24.833

如果宽度变为负数，您需要交换坐标：

```
int xpos = (x2-x1 < x1) ? x2 : x1;
int ypos = (y2-y1 < y1) ? y2 : y1;
int width = Math.Abs(x2-x1);
int height = Math.Abs(y2-y1);

G.DrawRectangle(Pens.Blue, new Rectangle(xpos, ypos, width, height)); 
```

# android - 自定义对话框中的多个时间选择器？

> ID：11408140
> 
> 赞同：0
> 
> 时间：2012-07-10T06:59:18.890
> 
> 标签：android, customdialog

我正在做一个基于警报管理器的应用程序，我必须在自定义对话框中设置多个时间选择器，

我刚刚创建了自定义对话框并使用微调器动态显示多个按钮。

我收到一个错误

```
protected Dialog onCreateDialog(int id) {
                    switch (id) {
                    case TIME_DIALOG_ID:
                        return new TimePickerDialog(this, timeListener, hours, min,
                                false);
                    }
                    return null;
                }
            } 
```

错误在 (int id) 标记 ")" 上的语法错误，; 预期的

我能够解决这个问题并建议我做多个时间选择器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T07:52:49.423

如果你想重复对话框，你必须声明多个常量。像这样

```
private static final int TIME_DIALOG_ID = 0;
    private static final int TIME_DIALOG_ID1 = 1;

@Override
    public Dialog onCreateDialog(int id) {
        switch (id) {

        case TIME_DIALOG_ID:
            return new TimePickerDialog(this,mTimeSetListener, 0, 0, false);

    case TIME_DIALOG_ID1:
        return new TimePickerDialog(this,mTimeSetListener, 0, 0, false);

    }

        return null;

} 
```

＆然后在按钮上单击Listner jst像在不同按钮上那样称呼它

```
showDialog(TIME_DIALOG_ID);
showDialog(TIME_DIALOG_ID1); 
```

# c# - 识别在 ajax-jquery 中获取 Web 方法的返回值

> ID：11408141
> 
> 赞同：2
> 
> 时间：2012-07-10T06:59:21.593
> 
> 标签：c#, jquery, asp.net, ajax

我编写了一个具有字符串返回值的 Web 方法。此返回值从存储过程中获取。但是当条件不成立时，返回未定义的值。我编写了以下代码，但它不起作用

```
 $.ajax(
                                                {
 type: "POST",
  url: "WebForm1.aspx/confirm",
  data: JSON.stringify({
  username: username,
  password: password, email: email,codemeli: codemeli}),
    contentType: "application/json; charset=utf-8",
    dataType: "json",

       async: true,
       cache: false,
       success: function (ret) {

             if (ret != "") {
             $('#result').text(ret.d + " : " + "it is reserved  "+ret.lenght); }
          else { $('#result').text("the operation is successful"); }
        },
        error: function (x, e) {
         $('#result').text(x.responseText);
            }
            }
       ); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T07:01:12.003

`ret.lenght`应该`ret.d.length`在你的`success`回调中。

# iphone - fbdialog 无法关闭

> ID：11408144
> 
> 赞同：1
> 
> 时间：2012-07-10T06:59:32.070
> 
> 标签：iphone, ios, facebook

我正在使用 Facebook 开发人员提供的 iOS 静态库项目来显示屏幕，由于存在会话超时情况，我必须在 15 分钟时关闭屏幕。当用户尝试分享帖子并且如果他只是离开它 15 分钟时，我无法关闭他的视图，而是在我的一段代码关闭所有视图（fbdialog 除外）之后就像背景一样。问题是我自己没有创建 fbdialog，而是尝试了

```
facebook = [[Facebook alloc] initWithAppId:facebookAppId andDelegate:self] ; 
```

Facebook 类创建对话框并自行管理，只要我想从我的应用程序到静态库，必须做什么才能关闭对话框。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-10T07:39:06.217

在您的 facebook sdk 中，必须有关闭对话框的方法。您必须使用它提供的委托才能向该方法发送消息。在您的工人阶级中找到并实施它们。

它必须是 FBDelegate 或 FBDialogDelegate 之类的东西，我不确定，你可以分享一个指向你的 facebook sdk 的链接来查看它。我使用过几个 FB sdk，它们都不同。

# python - 如何从基类中获取派生类名

> ID：11408148
> 
> 赞同：54
> 
> 时间：2012-07-10T06:59:51.753
> 
> 标签：python, plone, derived-class, base-class

我有一个基类`Person`和派生类`Manager`以及`Employee`. 现在，我想知道的是创建的对象是`Manager`或`Employee`.

该人如下：

```
from Project.CMFCore.utils import getToolByName
schema = getattr(Person, 'schema', Schema(())).copy() + Schema((TextField('FirstName', required = True, widget = StringWidget(label='First Name', i18n_domain='project')), TextField('Last Name', required = True, widget = StringWidget(label='Last Name', i18n_domain='i5', label_msgid='label_pub_city'))
class Manager(BaseContent):
  def get_name(self):
    catalog = getToolByName(self, "portal_catalog")
      people = catalog(portal_type='Person')
      person={}
      for object in people:
        fname = object.firstName
        lname = object.lastName
        person['name'] = fname+' '+ lname
        # if the derived class is Employee then i would like go to the method title of employee and if its a Manager then go to the title method of Manager
        person['post'] = Employee/Manager.title()
      return person 
```

对于经理和员工来说，他们就像（员工也相似，但有些不同的方法）

```
from Project.Person import Person
class Manager(Person):
    def title(self):
      return "Manager" 
```

对于员工，标题是“员工”。当我创建`Person`它时，它要么`Manager`是`Employee`. 当我得到 person 对象时，类是 Person，但我想知道它是来自派生类“Manager”还是“Employee”。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-07-10T07:23:33.590

我不知道这是否是您想要的，以及您希望它实现的方式，但这里有一个尝试：

```
>>> class Person(object):
    def _type(self):
        return self.__class__.__name__

>>> p = Person()
>>> p._type()
'Person'
>>> class Manager(Person):
    pass

>>> m = Manager()
>>> m._type()
'Manager'
>>> 
```

优点：只有一种`_type`方法定义。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-10T07:22:27.303

您可以使用`x.__class__.__name__`以字符串形式检索类名，例如

```
class Person:
    pass

class Manager(Person):
    pass

class Employee(Person):
    pass

def get_class_name(instance):
    return instance.__class__.__name__

>>> m = Manager()
>>> print get_class_name(m)
Manager
>>> print get_class_name(Employee())
Employee 
```

或者，您可以使用 isinstance 检查不同的类型：

```
>>> print isinstance(m, Person)
True
>>> print isinstance(m, Manager)
True
>>> print isinstance(m, Employee)
False 
```

所以你可以做这样的事情：

```
def handle_person(person):
    if isinstance(person, Manager):
        person.read_paper()     # method of Manager class only
    elif isinstance(person, Employee):
        person.work_hard()      # method of Employee class only
    elif isinstance(person, Person):
        person.blah()           # method of the base class
    else:
        print "Not a person" 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-07-10T07:22:44.603

Python 对象提供了一个`__class__`属性，该属性存储用于创建该对象的类型。这反过来提供了一个`__name__`属性，该属性可用于将类型的名称作为字符串获取。所以，在简单的情况下：

```
class A(object):
    pass
class B(A):
    pass

b = B()
print b.__class__.__name__ 
```

会给：

`'B'`

所以，如果我正确地遵循了你的问题，你会这样做：

```
m = Manager()
print m.__class__.__name__
'Manager' 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-07-10T08:37:22.757

你会寻找这样的东西吗？

```
>>> class Employee:
...     pass
... 
>>> class Manager(Employee):
...     pass
... 
>>> e = Employee()
>>> m = Manager()
>>> print e.__class__.__name__
Employee
>>> print m.__class__.__name__
Manager
>>> e.__class__.__name__ == 'Manager'
False
>>> e.__class__.__name__ == 'Employee'
True 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-07-10T07:29:42.180

“这样做”的最好方法是不这样做。相反，在 Person 上创建可在 Manager 或 Employee 上覆盖的方法，或者为子类提供自己的扩展基类的方法。

```
class Person(object):
    def doYourStuff(self):
        print "I'm just a person, I don't have anything to do"

class Manager(object):
    def doYourStuff(self):
        print "I hereby manage you"

class Employee(object):
    def doYourStuff(self):
        print "I work long hours" 
```

如果您发现自己需要在基类中知道正在实例化哪个子类，那么您的程序可能存在设计错误。如果其他人后来扩展 Person 以添加一个名为 Contractor 的新子类，你会怎么做？当子类不是它所知道的任何硬编码替代品时，Person 会做什么？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-10T08:35:20.387

在您的示例中，您不需要知道类，只需通过引用类实例来调用方法：

```
# if the derived class is Employee then i would like go to the method title 
# of employee and if its a Manager then go to the title method of Manager
person['post'] = object.title() 
```

但不要`object`用作变量名，你隐藏了内置名称。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-02T20:40:11.223

Python 类有一个`__subclasses__`神奇的方法，可以用来查看当前哪些范围内的类是从给定的父类派生的。

```
# related.py

class Parent: ...

class Child(Parent): ... 
```

```
>>> from related import Parent
>>> Parent.__subclasses__()
[<class 'related.Child'>] 
```

在访问类时，这些类是对任何范围内派生类的弱引用`Parent`。

```
# not_related.py

class StepChild(Parent): ... 
```

```
>>> from related import Parent
>>> Parent.__subclasses__()
[<class '__main__.Child'>]
>>> from not_related import StepChild
>>> Parent.__subclasses__()
[<class 'related.Child'>, <class 'not_related.StepChild'>] 
```

# php - 从字符串中剥离“曲目编号”

> ID：11408150
> 
> 赞同：0
> 
> 时间：2012-07-10T06:59:54.187
> 
> 标签：php, string

我正在编写一个小型音乐播放网络应用程序，但遇到了一个我无法解决的问题。音乐文件通常以两位数的曲目编号开头，例如：

`02 Hiding Place (Mudule Remix).m4a`

或者`15 An Afternoon on the Moon (Jet Jaguar Remix).m4a`

PHP 脚本如何检测`## *`规则并删除字符串开头的数字和空格？

我想遍历前 3 个字符并检查它们是否是数字和空格，然后用 删除`substr`，这是最好的方法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T07:11:17.633

```
echo ltrim('02 Hiding Place (Mudule Remix).m4a', ' 0123456789'); 
```

看：[`ltrim`](http://php.net/manual/function.ltrim.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T07:11:35.090

> 我想循环遍历前 3 个字符并检查它们是否是数字和空格，然后用 substr 删除，这是最好的方法吗？

这似乎是最简单的方法，对于这样一个简单的任务没有认真优化的空间，所以我会推荐这种方法。

您还可以使用正则表达式将其删除，但由于开销，这会稍微慢一些。

# c# - 在 LINQ 中使用 Case 或 if 语句？

> ID：11408153
> 
> 赞同：0
> 
> 时间：2012-07-10T06:59:58.403
> 
> 标签：c#, linq, entity-framework

我有一个 LINQ 查询（与 EF 一起使用）

我有以下 LINQ 查询。请指导我如何在此查询中使用 case 或 if 语句。

```
var selectedResults=
    from InvoiceSet in Invoices
    join BookedAreasSet in BookedAreas 
    on InvoiceSet.InvoiceID equals BookedAreasSet.InvoiceID
    join AreaSet in Areas on BookedAreasSet.AreaID equals AreaSet.AreaID
    select new       
    {
         InvoiceSet.InvoiceNumber,
         InvoiceSet.Amount,
         InvoiceSet.TotalDiscount,
         InvoiceSet.GST,       
         InvoiceSet.PaymentDate,
         InvoiceSet.ShoppingCentreID,
         BookedAreasSet.BookedAreaID,
         AreaSet.Name //Here I want to use Case/ If statment based on some other column
    }; 
```

请指导。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T07:01:30.160

你可以这样做，但使用三元运算符`?`

```
var selectedResults=
    from InvoiceSet in Invoices
    join BookedAreasSet in BookedAreas 
    on InvoiceSet.InvoiceID equals BookedAreasSet.InvoiceID
    join AreaSet in Areas on BookedAreasSet.AreaID equals AreaSet.AreaID
    select new     {InvoiceSet.InvoiceNumber,InvoiceSet.Amount,InvoiceSet.TotalDiscount,InvoiceSet.GST,       InvoiceSet.PaymentDate,InvoiceSet.ShoppingCentreID,BookedAreasSet.BookedAreaID,
AreaSet.Name, YourColumn = AreaSet.YourColumnName == yourVariable ? "firstResult" : "other result?"} 
```

您可以通过这种方式组合多个条件。

> AreaSet.YourColumnName == yourVariable ? “firstResult”：AreaSet.YourColumnName == YoursecondVariable？“一些结果”：“一些其他结果”

# java - 如何在 Java 中以编程方式获取文件权限模式

> ID：11408154
> 
> 赞同：4
> 
> 时间：2012-07-10T07:00:01.987
> 
> 标签：java, android, file-permissions

我知道可以使用以下方法更改文件的权限模式：

`Runtime.getRuntime().exec( "chmod 777 myfile" );`.

此示例将权限位设置为`777`。`777`是否可以使用 Java以编程方式设置权限位？可以对每个文件都这样做吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-10T07:16:43.977

Using chmod in Android

Java doesn't have native support for platform dependent operations like chmod. However, Android provides utilities for some of these operations via android.os.FileUtils. The FileUtils class is not part of the public SDK and is therefore not supported. So, use this at your own risk:

```
public int chmod(File path, int mode) throws Exception {
 Class fileUtils = Class.forName("android.os.FileUtils");
Method setPermissions =
  fileUtils.getMethod("setPermissions", String.class, int.class, int.class, int.class);
return (Integer) setPermissions.invoke(null, path.getAbsolutePath(), mode, -1, -1);
}

...
chmod("/foo/bar/baz", 0755);
... 
```

Reference : [http://www.damonkohler.com/2010/05/using-chmod-in-android.html?showComment=1341900716400#c4186506545056003185](http://www.damonkohler.com/2010/05/using-chmod-in-android.html?showComment=1341900716400#c4186506545056003185)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T07:11:15.273

Android 使与其他应用程序及其数据的交互变得困难，除非通过 Intents。Intent 不适用于权限，因为您依赖于接收 Intent 的应用程序来执行/提供您想要的；他们可能不是为了告诉任何人他们的文件权限而设计的。有一些方法可以解决它，但只有当应用程序被设计为在同一个 JVM 中运行时。所以每个应用程序只能更改它的文件。有关文件权限的更多详细信息，请参阅[http://docs.oracle.com/javase/1.4.2/docs/guide/security/permissions.html](http://docs.oracle.com/javase/1.4.2/docs/guide/security/permissions.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-13T19:02:41.123

如前所述，[`android.os.FileUtils`](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/os/FileUtils.java)已更改，Ashraf 发布的解决方案不再有效。以下方法应该适用于所有版本的 Android（尽管它确实使用反射，并且如果制造商进行了重大更改，这可能不起作用）。

```
public static void chmod(String path, int mode) throws Exception {
    Class<?> libcore = Class.forName("libcore.io.Libcore");
    Field field = libcore.getDeclaredField("os");
    if (!field.isAccessible()) {
        field.setAccessible(true);
    }
    Object os = field.get(field);
    Method chmod = os.getClass().getMethod("chmod", String.class, int.class);
    chmod.invoke(os, path, mode);
} 
```

显然，您需要拥有该文件才能进行任何权限更改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-14T17:52:17.547

这是使用[Apache Commons.IO FileUtils](http://commons.apache.org/proper/commons-io/javadocs/api-release/org/apache/commons/io/FileUtils.html)和[File](http://developer.android.com/reference/java/io/File.html)对象的适当方法的解决方案。

```
for (File f : FileUtils.listFilesAndDirs(new File('/some/path'), TrueFileFilter.TRUE, TrueFileFilter.TRUE)) {
    if (!f.setReadable(true, false)) { 
        throw new IOException(String.format("Failed to setReadable for all on %s", f));
    }
    if (!f.setWritable(true, false)) {
        throw new IOException(String.format("Failed to setWritable for all on %s", f));
    }
    if (!f.setExecutable(true, false)) { 
        throw new IOException(String.format("Failed to setExecutable for all on %s", f));
    }
} 
```

这相当于`chmod -R 0777 /some/path`. 调整`set{Read,Writ,Execut}able`调用以实现其他模式。（如果有人发布适当的代码来执行此操作，我会很乐意更新此答案。）

# vba - 查看 PowerPoint 智能参考线是否处于活动状态

> ID：11408158
> 
> 赞同：1
> 
> 时间：2012-07-10T07:00:13.780
> 
> 标签：vba, vsto, powerpoint

PowerPoint 2010 引入了所谓的智能参考线，如此[处](http://blogs.office.com/b/microsoft-powerpoint/archive/2012/06/21/smart-guides-in-powerpoint-2010.aspx)所述。您可以在“网格和参考线”设置对话框中选择启用或禁用此功能，并选中“对齐形状时显示智能参考线”复选框。

我想通过代码查询设置，并在对象模型中查看了相应的属性，但没有找到。那么是我忽略了还是没有暴露？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-25T13:01:46.960

我认为您需要查询注册表

HKEY_CURRENT_USER\Software\Microsoft\Office\14.0\PowerPoint\Options\ShowSmartGuides

1 = 开 0 = 关

# php - 宽恕地搜索数据库。

> ID：11408164
> 
> 赞同：1
> 
> 时间：2012-07-10T07:00:34.113
> 
> 标签：php, sql, search

我有一个包含 30k 个元素的数据库，每个游戏名称。

我目前正在使用：

```
SELECT * from gamelist WHERE name LIKE '%%%$search%%%' OR aliases LIKE '%$search%' LIMIT 10" 
```

对于搜索栏。
但是，它可能对以下内容非常挑剔：

```
'Animal Crossing: Wild World' 
```

看，很多用户不知道 ':' 在那个短语中，所以当他们开始搜索时：

```
 Animal Crossing Wild World 
```

它不会出现。

我怎样才能让 sql 更宽容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T07:13:26.510

`Animal Crossing Wild World`将搜索参数中的非字母数字字符替换为通配符，以便`%Animal%Crossing%Wild%World%`对其进行过滤。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T07:05:48.763

我建议您制作另一张桌子，其中包含诸如

```
+---------+------------+
| game_id | keyword_id |
+---------+------------+
|       1 |          1 |
|       1 |          2 |
|       1 |          3 |
|       1 |          4 |
+---------+------------+ 
```

```
+------------+--------------+
| keyword_id | keyword_name |
+------------+--------------+
|          1 | animal       |
|          2 | crossing     |
|          3 | wild         |
|          4 | world        |
+------------+--------------+ 
```

之后，您可以轻松地将用户给定的文本分解为关键字并在数据库中搜索它们，女巫会给您他/她正在寻找的可能游戏的 ID。

哦，删除特殊符号，如“：”或“-”，这样您就不需要为同一个词组使用多个关键字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T07:03:28.683

以下来自[MySQL LIKE %string% 不够宽容。还有什么我可以用的吗？](https://stackoverflow.com/questions/7940346/mysql-like-string-not-quite-forgiving-enough-anything-else-i-can-use)由用户 M_M：

> 如果您使用的是 MyISAM，则可以使用全文索引。[看这个教程](http://devzone.zend.com/article/1304)
> 
> 如果你使用不同的存储引擎，你可以使用像 sphinx 这样的第三方全文引擎，它可以作为[mysql 的存储引擎](http://sphinxsearch.com/index.html)或可以查询的单独服务器。
> 
> 使用 MySQL 全文索引，搜索`A J Kelly`将匹配`AJ Kelly`（不会混淆问题，但 A、J 和 AJ 将被忽略，因为它们默认太短并且会在 Kelly 上匹配。）通常全文更宽容（通常比LIKE '%string%') 因为允许部分匹配，然后可以根据相关性进行排名。
> 
> 您还可以使用[SOUNDEX](http://www.madirish.net/node/85)通过索引单词的语音等效项来使搜索更加宽容，并通过将 SOUNDEX 应用于您的搜索词然后使用它们来搜索索引来搜索它们。例如，使用 soundex `mary`、`marie`和`marry`将全部匹配。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T07:17:28.297

如果您的 MySQL 引擎是 MyISAM 或 InnoDB，您可以尝试 Match () AGAINST ()：

[http://dev.mysql.com/doc/refman/5.6/en/fulltext-search.html](http://dev.mysql.com/doc/refman/5.6/en/fulltext-search.html)

[http://dev.mysql.com/doc/refman/5.6/en/fulltext-boolean.html](http://dev.mysql.com/doc/refman/5.6/en/fulltext-boolean.html)

您生成的 SQL 将如下所示：

```
SELECT * from gamelist WHERE MATCH (name, aliases) AGAINST ('$search' IN BOOLEAN MODE) LIMIT 10 
```

搜索的行为更像是搜索引擎中使用的布尔搜索。

# tridion - 如何减小 Tridion Jetty Log 的大小

> ID：11408169
> 
> 赞同：2
> 
> 时间：2012-07-10T07:01:12.070
> 
> 标签：tridion

最近我运行了一个脚本来保存 Tridion 中的许多项目，并注意到那天的 Jetty 日志大约是 500MB，而其他日子只有 2MB。

我假设使用 Jetty 的 Solr 搜索服务正在记录索引中的项目何时更新。

运行批处理脚本时是否可以更改日志级别或禁用 Jetty 的日志记录？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T07:56:47.207

您可以在文件 C:\Program Files (x86)\Tridion\solr-jetty\conf\log4j.properties 中更改 jetty 的日志级别。

# python-3.x - python 3.2.3中的Matplotlib pylab savefig运行时错误

> ID：11408173
> 
> 赞同：1
> 
> 时间：2012-07-10T07:01:20.743
> 
> 标签：python-3.x, osx-snow-leopard, matplotlib

我正在尝试测试 matplotlib 是否在 python3 中正确安装。我正在关注这个基本教程：[http ://www.scipy.org/Plotting_Tutorial](http://www.scipy.org/Plotting_Tutorial)

这个问题与[之前](https://stackoverflow.com/questions/9934546/python-matplotlib-errors-with-savefig-newbie/9936696#9936696)提出的问题类似，但遗憾的是没有明确报告最终解决方案，这是一个不同的操作系统。

用于此的操作系统是 Mac OS X 10.6.8。在 Python 3.2 中运行脚本不起作用，但在 Python 2.7 中运行它。不幸的是我需要3.2。

当 savefig 行被注释掉时，它工作正常。

```
"""
Example: simple line plot.
Show how to make and save a simple line plot with labels, title and grid
"""
import numpy
import pylab

t = numpy.arange(0.0, 1.0+0.01, 0.01)
s = numpy.cos(2*2*numpy.pi*t)
pylab.plot(t, s)

pylab.xlabel('time (s)')
pylab.ylabel('voltage (mV)')
pylab.title('About as simple as it gets, folks')
pylab.grid(True)
pylab.savefig('/Users/USERNAME/Documents/simple_plot.png', format='png')

pylab.show() 
```

无论是否明确设置了路径，上面的代码都会返回相同的错误。除了上述之外，我还尝试了以下方法：

```
pylab.savefig('simple_plot.png', format='png')
pylab.savefig('simple_plot') 
```

我尝试像另一个问题所说的那样明确设置路径（如上面更长的示例），但这导致了以下错误。注意：mplex.py 是脚本的名称。

```
libpng warning: Application was compiled with png.h from libpng-1.2.44
libpng warning: Application  is  running with png.c from libpng-1.4.11
libpng warning: Incompatible libpng version in application and library
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "mplex.py", line 16, in <module>
pylab.savefig('/Users/USERNAME/Documents/simple_plot.png', format='png')
  File "/opt/local/Library/Frameworks/Python.framework/Versions/3.2/lib/python3.2/site-packages/matplotlib/pyplot.py", line 474, in savefig
return fig.savefig(*args, **kwargs)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/3.2/lib/python3.2/site-packages/matplotlib/figure.py", line 1225, in savefig
self.canvas.print_figure(*args, **kwargs)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/3.2/lib/python3.2/site-packages/matplotlib/backend_bases.py", line 2075, in print_figure
**kwargs)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/3.2/lib/python3.2/site-packages/matplotlib/backend_bases.py", line 1846, in print_png
return agg.print_png(*args, **kwargs)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/3.2/lib/python3.2/site-packages/matplotlib/backends/backend_agg.py", line 497, in print_png
filename_or_obj, self.figure.dpi)
RuntimeError: Could not create write struct 
```

想法？除了我在 savefig 行中尝试的方法之外，还有另一种方法可以明确设置目标吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T20:16:43.807

我不确定您使用的是什么包管理器，而且我使用的是 Python 2.7（不是 3.2.3），但我使用的是 Fink 并且遇到了类似的问题（使用不同的 libpng 版本号）。

在 iPython --pylab 中，我看到了这个：

```
In [3]: savefig('foo.png')
libpng warning: Application  is  running with png.c from libpng-1.4.11
libpng warning: Incompatible libpng version in application and library
libpng warning: Application was compiled with png.h from libpng-1.5.11 
```

检查我的 libpng 的 Fink 安装，我看到了这个：

```
$ fink list libpng
Information about 6268 packages read in 0 seconds.
 i   libpng14             1.4.11-1        PNG image format handling library
 i   libpng14-shlibs      1.4.11-1        Shared libraries for libpng14 package
     libpng15             1.5.10-1        PNG image format handling library
     libpng15-32bit       1.5.10-1        PNG library (32-bit)
     libpng15-32bit-shli  1.5.10-1        Shared libraries for libpng15 package
 i   libpng15-shlibs      1.5.10-1        Shared libraries for libpng15 package
     libpng3              1:1.2.49-1      PNG image format handling library
     libpng3-shlibs       1:1.2.49-1      Shared libraries for libpng3 package
 i   system-pkgconfig-li  1.5.11-1        [virtual pkgconfig package representing libpng]
 i   system-pkgconfig-li  1.5.11-1        [virtual pkgconfig package representing libpng15] 
```

运行“fink install libpng15”后，我的 libpng 包版本如下所示：

```
$ fink list libpng
Information about 6268 packages read in 1 seconds.
     libpng14             1.4.11-1        PNG image format handling library
 i   libpng14-shlibs      1.4.11-1        Shared libraries for libpng14 package
 i   libpng15             1.5.10-1        PNG image format handling library
     libpng15-32bit       1.5.10-1        PNG library (32-bit)
     libpng15-32bit-shli  1.5.10-1        Shared libraries for libpng15 package
 i   libpng15-shlibs      1.5.10-1        Shared libraries for libpng15 package
     libpng3              1:1.2.49-1      PNG image format handling library
     libpng3-shlibs       1:1.2.49-1      Shared libraries for libpng3 package
 i   system-pkgconfig-li  1.5.11-1        [virtual pkgconfig package representing libpng]
 i   system-pkgconfig-li  1.5.11-1        [virtual pkgconfig package representing libpng15] 
```

如您所见，libpng14 不再安装，而 libpng15 已安装。

接下来，“pip uninstall matplotlib”和“pip install matplotlib”会生成一个 matplotlib 构建摘要，如下所示：

```
$ pip install matplotlib
Downloading/unpacking matplotlib
  Downloading matplotlib-1.2.0.tar.gz (36.9Mb): 36.9Mb downloaded
  Running setup.py egg_info for package matplotlib
    basedirlist is: ['/usr/local/', '/usr', '/usr/X11', '/opt/local']
    ============================================================================
    BUILDING MATPLOTLIB
                matplotlib: 1.2.0
                    python: 2.7.3 (default, Jul 27 2012, 16:40:57)  [GCC 4.2.1
                            Compatible Apple Clang 3.1
                            (tags/Apple/clang-318.0.61)]
                  platform: darwin

    REQUIRED DEPENDENCIES
                     numpy: 1.6.2
                 freetype2: 15.0.9

    OPTIONAL BACKEND DEPENDENCIES
                    libpng: 1.5.10
                   Tkinter: Tkinter: 81008, Tk: 8.5, Tcl: 8.5
                      Gtk+: no
                            * Building for Gtk+ requires pygtk; you must be able
                            * to "import gtk" in your build/install environment
           Mac OS X native: yes
                        Qt: no
                       Qt4: no
                    PySide: no
                     Cairo: no

    OPTIONAL DATE/TIMEZONE DEPENDENCIES
                  dateutil: 1.5
                      pytz: 2012b

    OPTIONAL USETEX DEPENDENCIES
                    dvipng: no
               ghostscript: 9.05
                     latex: no 
```

您可以看到构建现在将选择 libpng 1.5.10。以前，它为构建选择了 1.4.11。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-12T08:53:09.990

避免使用标准控制台，双击`yourcode.py`或`yourcode.pyw`文件不会出现错误。

# iphone - 如何更新 UITableView 的屏幕外单元格

> ID：11408176
> 
> 赞同：2
> 
> 时间：2012-07-10T07:01:45.330
> 
> 标签：iphone, uitableview

我的应用程序中有一个 UITableView 并且我已经对其进行了自定义。每个单元格包含一个 Imageview 和一个按钮。当我单击按钮时，将开始下载过程，并且该按钮将替换为 UIProgressView。一旦下载完成，进度视图将被删除，并且按钮将再次显示不同的状态。对于屏幕中可见的单元格，它工作正常。但是一旦下载完成，我就无法更新屏幕外的单元格。即使单元格不在屏幕上，进度视图更新也能正常工作。但是在尝试用按钮替换进度视图时遇到问题。

这是我的一些代码示例：

用于更新，一旦下载完成，

```
//Creating custom cell with the Id value and upadting the cell
NSIndexPath *indexPath = [NSIndexPath indexPathForRow:btnId inSection:0]; //btnId is the id of the button clicked
UIMenuItemCell *cell = [(UIMenuItemCell *)[self.menuItemsPanel cellForRowAtIndexPath:indexPath] retain];

//hiding the progressview
for (UIProgressView *currentProgress in cell.contentView.subviews) {
    if ([currentProgress isKindOfClass:[UIProgressView class]]) {
        currentProgress.hidden = YES;
        [cell.contentView reloadInputViews];
    }
}
for (UIButton *currentBtn in cell.contentView.subviews) {
    if ([currentBtn isKindOfClass:[UIButton class]]) {
        if (currentBtn) {
        //updating the button status here, once the download is complete
   }
} 
```

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T07:45:51.460

当 Cell 出现 OnScreen 时，将调用 cellForRowAtIndexPath。

在那个方法中，检查

```
if(download completed) remove progress bar and add button. 
```

# c# - 我如何从 mvc 中的 viewpage 更改布局页面

> ID：11408178
> 
> 赞同：-1
> 
> 时间：2012-07-10T07:01:48.887
> 
> 标签：c#, asp.net-mvc-3, razor

我正在使用剃刀处理 asp.net mvc 3。我的项目中有一个布局（主）页面。它包含一个带有 4 个链接的侧面板和 viewpage (@RenderBody) 的位置。当用户点击link1时，它重定向到viewpage1并且应该选择link1，当他点击link2时，它重定向到viewpage2并且应该选择link2，依此类推。它很好地重定向到所需的页面，但它总是选择链接 1，尽管我点击了链接 2、链接 3、链接 4。我如何从单个视图页面中选择布局页面中的适当链接。引导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T07:07:57.883

通过*选中*我猜你的意思是*使用 CSS 突出显示*，不是吗？如果是这种情况，我建议您编写一个自定义 HTML 帮助程序来生成这些链接：

```
public static IHtmlString MenuItem(
    this HtmlHelper htmlHelper, 
    string text,
    string action, 
    string controller
)
{
    var li = new TagBuilder("li");
    var routeData = htmlHelper.ViewContext.RouteData;
    var currentAction = routeData.GetRequiredString("action");
    var currentController = routeData.GetRequiredString("controller");
    if (string.Equals(currentAction, action, StringComparison.OrdinalIgnoreCase) &&
        string.Equals(currentController, controller, StringComparison.OrdinalIgnoreCase))
    {
        li.AddCssClass("active");
    }
    li.InnerHtml = htmlHelper.ActionLink(text, action, controller).ToHtmlString();
    return new HtmlString(li.ToString());
} 
```

然后在您的布局中使用帮助器：

```
<ul>
    @Html.MenuItem("link 1", "Action1", "Controller1")
    @Html.MenuItem("link 2", "Action2", "Controller2")
    ...
</ul> 
```

现在剩下的就是`.active`在你的 CSS 类中定义规则：

```
.active {
    ... something fancy to pop the currently selected link from the others
} 
```

# android - 如何将整个图像放在屏幕上作为墙纸

> ID：11408179
> 
> 赞同：5
> 
> 时间：2012-07-10T07:01:50.537
> 
> 标签：android, wallpaper

我正在开发一个应用程序，它从图库中选择一张图片，然后将该图片设置为壁纸。但这里的问题是只有部分图像设置为墙纸而不是整个图像，但我想将整个图像设置为墙纸。你能告诉我怎么做吗？？？

这是我的代码...

```
public class Scaleimage extends Activity {
    /** Called when the activity is first created. */

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        String FileName;
        File file = new File("/sdcard/pictures");   
        File[] imageFiles = file.listFiles( );
        if(imageFiles.length > 0 ) {
            FileName = imageFiles[0].getName();
        final WallpaperManager wallpaperManager = WallpaperManager.getInstance(getBaseContext());   
        Bitmap myBitmap =  BitmapFactory.decodeFile("/sdcard/pictures" + "/" + FileName); 

        DisplayMetrics displayMetrics = new DisplayMetrics();
        getWindowManager().getDefaultDisplay().getMetrics(displayMetrics);
        int height = displayMetrics.heightPixels;
        int width = displayMetrics.widthPixels << 1;
        myBitmap = Bitmap.createScaledBitmap(myBitmap,width, height, true);
        try {
            wallpaperManager.setBitmap( myBitmap);
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }  
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T10:26:36.260

将壁纸尺寸设置为您的图像尺寸：

```
WallpaperManager wm = (WallpaperManager) getSystemService(WALLPAPER_SERVICE);
wm.setBitmap(bitmap);
wm.suggestDesiredDimensions(w, h); 
```

并记得添加权限：

```
<uses-permission android:name="android.permission.SET_WALLPAPER_HINTS"/>
<uses-permission android:name="android.permission.SET_WALLPAPER"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-05T09:57:12.143

像这样将宽度高度传递给壁纸管理器：

```
final WallpaperManager wallpaperManager = (WallpaperManager)getSystemService(
                Context.WALLPAPER_SERVICE);    

Bitmap myBitmap = Bitmap.createScaledBitmap(Const.cropped_bitmap, wallpaperManager.getDesiredMinimumWidth(), wallpaperManager.getDesiredMinimumHeight(), true);
wallpaperManager.suggestDesiredDimensions(wallpaperManager.getDesiredMinimumWidth(), wallpaperManager.getDesiredMinimumHeight());

try {

    wallpaperManager.setBitmap(myBitmap);
    Toast.makeText(CropImageActivity.this, CropImageActivity.this.getString(R.string.wallpaper_has_been_set), 0).show();
} catch (IOException e) {
    e.printStackTrace();
    Toast.makeText(CropImageActivity.this, "Wallpaper not set", 0).show();
} 
```

不要忘记添加权限：

```
<uses-permission android:name="android.permission.SET_WALLPAPER_HINTS"/>
<uses-permission android:name="android.permission.SET_WALLPAPER"/> 
```

# xcode - 核心图形 CGContextClip - Xcode

> ID：11408180
> 
> 赞同：0
> 
> 时间：2012-07-10T07:01:50.723
> 
> 标签：xcode, core-graphics, clipping

开始了解核心图形。我正在绘制一条带有填充和笔划的路径，但我无法对其进行剪辑。谁能告诉我我在这里做错了什么？

这段代码在我的 UIView 子类的 drawRect 方法中。

```
//Draw a closed path with rounded corners, a fill and a stroke.
CGContextRef context = UIGraphicsGetCurrentContext();
CGContextSetLineWidth(context, 4.0);
CGContextSetStrokeColorWithColor(context,[UIColor blueColor].CGColor);
CGContextSetFillColorWithColor(context, [UIColor redColor].CGColor);
//fill
CGContextMoveToPoint(context, 10, 10);
CGContextAddLineToPoint(context, 10, 100);
CGContextAddArcToPoint(context, 10,140, 30,140, 20);
CGContextAddLineToPoint(context, 200, 140);
CGContextAddArcToPoint(context, 240,140, 240,100, 20);
CGContextAddLineToPoint(context, 240, 10);
CGContextClosePath(context);
CGContextFillPath(context);
//stroke
CGContextMoveToPoint(context, 10, 10);
CGContextAddLineToPoint(context, 10, 100);
CGContextAddArcToPoint(context, 10,140, 30,140, 20);
CGContextAddLineToPoint(context, 200, 140);
CGContextAddArcToPoint(context, 240,140, 240,100, 20);
CGContextAddLineToPoint(context, 240, 10);
CGContextClosePath(context);
CGContextStrokePath(context);
CGContextBeginPath(context);
//clip??
CGContextMoveToPoint(context, 10, 10);
CGContextAddLineToPoint(context, 10, 100);
CGContextAddArcToPoint(context, 10,140, 30,140, 20);
CGContextAddLineToPoint(context, 200, 140);
CGContextAddArcToPoint(context, 240,140, 240,100, 20);
CGContextAddLineToPoint(context, 240, 10);
CGContextClosePath(context);
CGContextClip(context); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T07:06:59.920

你应该在做应该剪裁的图纸之前剪裁上下文，然后在之后恢复上下文

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T07:31:24.957

您应该使用 `CGContextClip`before`CGContextStrokePath`和 after `CGContextClosePath`。够了。无需编写额外的代码。像这样尝试如下..

```
 CGContextClosePath(context);
    CGContextClip(context);
    CGContextStrokePath(context); 
```

我想这会对你有所帮助。

# iphone - didFailWithError 中的 MKReverseGeocoder 位置查找器错误 {PBHTTPStatusCode=503} 响应：委托 iPhone？

> ID：11408183
> 
> 赞同：0
> 
> 时间：2012-07-10T07:01:56.890
> 
> 标签：iphone, ios, cllocationmanager, mkreversegeocoder, didfailwitherror

我正在使用`MKReverseGeocoder`在我的 iPhone 应用程序中查找当前位置。现在有一天，该应用程序不应该找到当前位置。当我解决问题时，我发现来自`- (void)reverseGeocoder:(MKReverseGeocoder *)geocoder didFailWithError:(NSError *)error`委托的以下错误响应。错误信息是，

```
SourceCache/ProtocolBuffer/ProtocolBuffer-92/Runtime/PBRequester.m:687 server returned error: 503
2012-07-10 12:21:29.773 Dial25[3046:707] didFailWithError:- Error Domain=NSURLErrorDomain Code=-1011 "The operation couldn’t be completed. (NSURLErrorDomain error -1011.)" UserInfo=0x264090 {PBHTTPStatusCode=503} 
```

我使用了谷歌并找到了添加委托的答案，`[geoder autorelease];`但`didFailWithError:`我的应用程序仍然不应该找到当前位置。

```
-(void)startFindLocationService 
{
    NSLog(@"Starting Location Services");
    CLLocationManager *locationManager = [[CLLocationManager alloc] init];
    locationManager.delegate = self;
    locationManager.desiredAccuracy = kCLLocationAccuracyNearestTenMeters;
    locationManager.distanceFilter = 20.0f;
}

-(void)findAddressByLatLong:(CLLocation *)currentLocation
{
    CLLocationCoordinate2D locationToLookup = currentLocation.coordinate;

    MKReverseGeocoder  *reverseGeocoder = [[MKReverseGeocoder alloc] initWithCoordinate:locationToLookup];
    reverseGeocoder.delegate = self;
    [reverseGeocoder start];
}

- (void)reverseGeocoder:(MKReverseGeocoder *)geocoder didFailWithError:(NSError *)error
{
    NSLog(@"Error: %@", [error description]);
    [geocoder cancel];
    geocoder.delegate = nil;    
    [geocoder autorelease];
} 
```

谁能帮我解决这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T21:31:53.097

我正在尝试更多地了解自己的地理编码，并且可能已经找到了一些其他有用的参考资料。

1.  自 iOS 5 以来，几个 MKReverseGeocoder 类方法已被弃用：http: [//developer.apple.com/library/ios/#documentation/MapKit/Reference/MKReverseGeocoder_Class/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/doc/uid/TP40008323-附录A](http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MKReverseGeocoder_Class/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/doc/uid/TP40008323-AppendixA)

2.  早在 2010 年就有问题，谷歌只在一天中的特定时间响应 MKReverseGeocoder 请求。我不知道这是否与您的问题有关，但可能与 Apple 弃用这些方法的原因有关。 [http://blog.aribraginsky.com/2009/12/curious-case-of-mkreversegeocoder.html](http://blog.aribraginsky.com/2009/12/curious-case-of-mkreversegeocoder.html)

3.  通过切换到 CLGeocoder 查看 Rohan Kapur 对 MKReverseGeocoder 错误的解决方案： [在单例类 (ARC) 中使用 MKReverseGeocoder](https://stackoverflow.com/questions/10384789/using-mkreversegeocoder-in-a-singleton-class-arc)

希望这可以帮助！

# c# - NAudio WaveStream 和多通道

> ID：11408185
> 
> 赞同：5
> 
> 时间：2012-07-10T07:02:01.987
> 
> 标签：c#, .net, naudio

我有一个 WaveStream，我可以读取 WaveFormat 来获取通道数。当我从那个 WaveStream 中读取数据时，我是在读取第一个通道还是从所有混合通道中读取数据？

我想做一个用户控件来显示 WaveForm，但我不确定我的控件是否正确显示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T07:08:33.890

当您从 WaveStream 读取时，您正在读取所有通道样本，一个接一个。首先，您正在读取第一个通道，第二个样本是第二个通道的第一个样本。

如果你把它们放在一个数组中，那么第一个索引是第一个通道，第二个索引是第二个通道，第三个索引是第三个通道。因此，如果您在波形中显示左声道，则应显示索引 0、2、4 和 6，如果显示右声道索引 1、3、5 和 7（如果您有课程）。

# c#-4.0 - 无法执行重载方法

> ID：11408188
> 
> 赞同：0
> 
> 时间：2012-07-10T07:02:14.997
> 
> 标签：c#-4.0, overriding, overloading

然后给出以下类声明：

```
 class Employee {
        public string Name { get; set; }
        public int Age { get; set; }

        public override bool Equals(object obj)
        {
            Console.WriteLine("In Equals(Object)");

            if (obj is Employee)
                if (this.Name == (obj as Employee).Name && this.Age == (obj as Employee).Age)
                    return true;
                else
                    return false;
            else
                return false;
        }

        public bool Equals(Employee obj)
        {
            Console.WriteLine("In Equals(Employee)");

            return this.Equals(obj as Object);
        }

        public override int GetHashCode()
        {
            return base.GetHashCode();
        }
    } 
```

我正在尝试使用 Employee.Equals(Employee) 但由于某种原因它不起作用：

```
 private static void CompareObjects(Object a, Object b)
    {        
        if (a.Equals(b as Employee)) Console.WriteLine("a.Equals(b) returns true");
        else Console.WriteLine("a.Equals(b) returns false");
    } 
```

当我将 b 转换为 Employee 时，我期望 Employee.Equals(Employee) 会被调用，因为它比 Employee.Equals(Object) 更好地匹配签名，但后者被调用了。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T07:04:20.503

在

```
private static void CompareObjects(Object a, Object b) 
```

你用

```
a.Equals 
```

但是`a`是 Object 类型，因此您使用的是 Object.Equals()。 *您正在调用 的 Equals() 方法`a`，而不是 的`b`*。

如果您期望两者都`a`属于`b`类型，则`Employee`可以编写

```
if (((Employee)a).Equals(b)) Console.WriteLine("a.Equals(b) returns true"); 
```

或者

```
if ((a as Employee).Equals(b)) Console.WriteLine("a.Equals(b) returns true"); 
```

`a`但是，任何一种变体都会抛出不是 Employee 类型的异常。

相反，考虑

```
Employee aEmployee = a as Employee;
if (aEmployee != null) 
{
    if (aEmployee.Equals(b)) Console.WriteLine("a.Equals(b) returns true");
} 
```

**更新**

如果您的意图是覆盖，则 Equals 方法的签名不正确`Object.Equals(object o)`。您的方法`Employee.Equals(Employee e)`仍然不会被称为书面。如果您想覆盖`Object.Equals(object o)`并且如果您希望非员工的事物永远不等于员工的事物，我会推荐以下模式。

```
public override bool Equals(object obj)
{
    // If the references are equal, objects must be equal
    if (object.ReferenceEquals(this, obj)) return true;

    Employee other = obj as Employee;

    // obj is not able to be cast to Employee, no need to compare further
    if (other == null) return false;

    // Here, implement the checks you need to compare two 
    // Employee instances for equality
    return this.FirstName == other.FirstName /* && etc. */;
} 
```

请注意，每当您覆盖语义时，`Equals()`您几乎肯定也想覆盖`GetHashCode()`。看

[在 C# 中简化覆盖 Equals()、GetHashCode() 以获得更好的可维护性](https://stackoverflow.com/questions/9707918/simplify-overriding-equals-gethashcode-in-c-sharp-for-better-maintainabilit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T07:12:52.973

将条件从这里更改 `if (a.Equals(b as Employee))`
为

```
if ((Employee)a.Equals(b as Employee)) 
```

# dotnetnuke - DNN 中的关键字搜索

> ID：11408200
> 
> 赞同：0
> 
> 时间：2012-07-10T07:03:03.837
> 
> 标签：dotnetnuke

我在 DNN ( [http://dnnsearchenhanced.codeplex.com/](http://dnnsearchenhanced.codeplex.com/) ) 中使用增强型搜索模块。安装模块后，DNN 搜索未按预期工作。我做了以下配置

以主持人身份登录 - 转到主持人菜单并选择搜索管理员 - 填空 - 最大字长，最小字长， - 勾选两个框以包括常用词和数字。- 按更新。-按重新索引的内容-然后安装模块-再次按重新索引的内容

它无法搜索标题、关键字和页面名称。

我必须执行某种设置吗？

注意：使用包含搜索模块的 DNN 6.2 社区版。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T20:32:50.743

你得到任何搜索结果吗？我建议检查主机/计划页面和搜索索引器作业的历史记录，看看它是否正在运行，以及是否有任何错误被抛出。

# wcf - 在 WCF 服务的 web.config 中的元素中找不到“SecurityMode”属性

> ID：11408204
> 
> 赞同：0
> 
> 时间：2012-07-10T07:03:16.940
> 
> 标签：wcf, binding, https, basichttpbinding

我正在使用 .NET Framework 4.0 在 Visual Studio 2010 中编写 WCF 服务应用程序。

我正在尝试使用 HTTPS 实现 BasicHttpBinding。我在一些示例中读到，我需要如下创建一个自定义绑定，并在设置端点时将其设置为“bindingConfiguration”属性。

```
<bindings>
<basicHttpBinding>
<binding
configurationName="UsingHttps"
securityMode="Https"/>
</basicHttpBinding>
</bindings> 
```

但是，当我尝试在 web.config 中编写类似内容时，智能感知没有显示“configurationName”和“securityMode”属性。这可能是什么原因？我是否需要更改 Visual Studio IDE 中的任何设置？

对此有任何帮助，非常感谢。

谢谢

尼尔曼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T07:11:32.683

您的属性名称错误，并试图在错误的位置设置安全模式：

```
<binding name="myBindingName">
    <security mode="Transport">
        ...etc...
    </security>
</binding> 
```

这篇旧的（2007 年 7 月！！）MSDN 文章有很多关于绑定、传输安全等的编程和静态配置的示例：[WCF Bindings In Depth](http://download.microsoft.com/download/3/A/7/3A7FA450-1F33-41F7-9E6D-3AA95B5A6AEA/MSDNMagazineJuly2007en-us.chm)（整个杂志现在打包为 CHM 下载，但您可以查看指定的文章直接在[Wayback 机器](https://web.archive.org/web/20081223210236/http://msdn.microsoft.com/en-us/magazine/cc163394.aspx)上在线）。

# php - jquery在jquery ajax成功时调用PHP函数

> ID：11408208
> 
> 赞同：0
> 
> 时间：2012-07-10T07:03:42.390
> 
> 标签：php, jquery

是否可以在 jquery ajax 调用上调用 php 函数。当我尝试这样做时，我在 php 函数上得到函数未定义错误

```
 $.ajax({
        type:"POST",
        url:"x.php?z=" + id,
        cache:false,
        success: function(data)
        {

          <?php xcz();  ?>
        }
    }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T07:12:29.870

```
 $.ajax({
        type:"POST",
        url:"x.php?z=" + id,
        cache:false,
        success: function(data)
        {

          anotherFunction();
        }
    });

function anotherFunction(){
    $.ajax({
        type:"POST",
        url:"anotherFile.php",
        cache:false,
        success: function(data)
        {
              //do something else;
        }
    });   
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T07:06:34.537

那是不可能的。PHP 和 javascript 在不同的计算机上运行。PHP 在服务器上运行，而 javascript 在浏览器中运行。在执行 javascript 时，该服务器已经执行了 PHP 代码，并将其发送给浏览器。

实现这一目标的唯一方法是发出额外的 Ajax 请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T07:10:22.023

不可能。因为 jQuery (javascript) 在客户端运行，所以 php 在服务器端运行。

当页面加载到浏览器上时，php 的工作就完成了。

您可以像这种方法一样只调用javascript的函数。

# c# - ASP.NET MVC 4 - 如何在删除旧项目的同时将 SQL Server Express DB 移动到新项目？

> ID：11408209
> 
> 赞同：0
> 
> 时间：2012-07-10T07:03:47.070
> 
> 标签：c#, database, asp.net-mvc

我在一个旧项目中启动了一个 ASP.NET MVC 4 应用程序，然后停止了一段时间的开发。现在我回到了这个项目的工作中，但是（出于多种原因）我决定从一个新的项目解决方案重新开始。我想从旧项目中保留的一件事是数据库（SQL Server Express）。如何将数据库移动/复制到新解决方案中（请记住，在我看到新解决方案中的一切正常后，我可能会完全删除旧解决方案）？旧项目使用 aspx，新项目使用 Razor。这两个项目都在 C# 中。

我可以简单地将旧项目中的 APP_DATA 文件夹复制并粘贴到新项目中吗？如果是这样，我应该以某种方式从 Visual Studio 执行此操作，还是可以直接进入 Windows 资源管理器？如果我这样做了，我需要修改哪些设置/配置/连接字符串？请记住，这是我第一次完成链接到数据库的项目，所以我需要很多细节。

另外，我想一旦数据库到位，我将使用该功能创建基于数据库的类模型。如果这可能是最好的方法，或者您预见到这种方法有任何问题，请告诉我。

我已经检查了关于 SO 的其他问题，但我发现没有一个类似的问题（包括[如何将模型移动到单独的项目 .NET MVC](https://stackoverflow.com/questions/6585241/how-to-move-models-to-separate-project-net-mvc)）真正回答了我的问题。我也在谷歌上搜索并找到了[http://msdn.microsoft.com/en-us/library/ms345408.aspx](http://msdn.microsoft.com/en-us/library/ms345408.aspx)，看起来信息在那里（也许），但我不太了解所有术语有信心开始搞事情……我真的不想因为我做了糟糕的假设而失去了之前的工作。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T07:06:35.847

只需复制并粘贴数据库，您可以直接从文件夹中进行操作

使用相同的连接字符串，可能只需要更改数据库的路径

# ios - ios5故事板版Facebook集成

> ID：11408216
> 
> 赞同：5
> 
> 时间：2012-07-10T07:04:51.673
> 
> 标签：ios, facebook, ios5

只是好奇是否存在现有的 Facebook 集成故事板版本，因为我已经搜索了大约 2 天。到目前为止，我可以为我的应用程序进行授权，我的想法是尝试将一条简单的状态消息从我的应用程序发布到我的 Facebook 新闻源。我经历过的大多数演示/教程都使用 xib，例如[this](http://www.icodeblog.com/2011/03/28/facebook-sdk-posting-to-user-news-feed/)。这是一个很好的教程，但是我想要一个故事板版本。告诉我这篇文章是否是骗子，并请发布该问题，以便我研究它。

我知道这里有很多人知道分享的想法 :) 所以非常感谢任何有用的链接，因为它会在某种程度上提升我的学习体验以及其他开始 iOS 开发的人:)

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T00:39:22.603

如果您只想发布状态更新，您应该能够使用 nib 文件中显示的相同示例。但是，如果您想查看使用故事板的示例应用程序，您可以查看此示例应用程序：

[https://github.com/fbsamples/ios-social-cafe](https://github.com/fbsamples/ios-social-cafe)

它使用故事板来设置 UI 并执行 facebook 登录。您还可以查看它以了解如何使用新的 UI 选择器（朋友、地点）以及如何执行打开图形操作。

如果您对如何发布状态更新有更具体的详细信息，请提供，以便我进一步澄清。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T08:25:38.320

是的，有一个使用 Storyboard（iOS5 及更高版本）的 iOS 应用程序的简单示例：[https ://github.com/fbsamples/ios-social-cafe](https://github.com/fbsamples/ios-social-cafe)

希望这会有所帮助，并展示如何使用 Storyboard 进行良好的授权流程。

祝你好运。

# fish - 鱼 $EDITOR 互动

> ID：11408217
> 
> 赞同：0
> 
> 时间：2012-07-10T07:05:05.297
> 
> 标签：fish

如何从`fish`shell 启动当前配置的编辑器？那是与关联的编辑器`$EDITOR`。

从管道获取输入并在由`$EDITOR`.

`$EDITOR`从参数列表中打开路径的函数会是什么样子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T20:44:00.800

怎么样：

```
function edit -d "Open a file using $EDITOR"
    for file in $argv
        if test -e $file
            eval $EDITOR $file
            echo "Opening file $file"
        else
            echo "Create file? (y/n)"
            read createFile
            if test $createFile = "y"
                eval $EDITOR -n $file
                echo "Creating file $file"
            end
        end
    end
end 
```

# javascript - 从函数返回警报

> ID：11408218
> 
> 赞同：1
> 
> 时间：2012-07-10T07:05:09.783
> 
> 标签：javascript

请你告诉我为什么这行不通。

如果我打电话给 sA 为什么不显示警报。

```
var s = {

    A: function () { alert("test A"); },
    B: function () { alert("test B"); }

};

s.A; 
```

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-10T07:06:40.730

尝试

```
s.A(); 
```

`A`是一个函数。如果你只是说`s.A;`你所做的只是发出对什么的引用`A`，例如，如果我`s.A;`进入 Chrome 的 javaScript 控制台，我会得到以下信息：![铬截图](../Images/24b0dd0f576f2a4125a90b46a1c59ef5.png)

注意它是如何输出函数定义的？

现在，如果我说 `sA();' 我得到了你最初的预期——它触发了这个函数：

![在此处输入图像描述](../Images/ff1c6d06b04a8df5ad39b6a511310d32.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T07:07:41.013

[看到它在 jsfiddle 上工作](http://jsfiddle.net/sEK8b/)。您必须添加大括号才能`s.A`使其成为函数调用。

```
s.A(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T07:19:17.350

您正在返回对该函数的引用，但它没有被调用。为此，请在 之后添加大括号`s.A`：

```
s.A(); 
```

# ruby-on-rails - Rails Active Record 通过多个连接进行排序

> ID：11408220
> 
> 赞同：3
> 
> 时间：2012-07-10T07:05:16.387
> 
> 标签：ruby-on-rails, join, include, rails-activerecord

我有以下关系。

```
AdhocBkg
  has_many :invoice_trans
InvoiceTran
  belongs_to :invoice_hdr
  belongs_to :meal
InvoiceHdr
  belongs_to :supplier
  belongs_to :client 
```

我需要提取所有处于“已开票”状态的 AdhocBkg，然后通过每个 AdhocBkg 的最后一个发票交易对它们进行排序：供应商名称、客户名称、inv no、inv tran 日期和膳食排序顺序。

我当前的代码是：

```
#AdhocBkg Billed Status ID
abbilledstatusid = AdhocBkgStatus.find_by_abstatdesc('Billed').id
@adhocbkgs = AdhocBkg.find_all_by_abstatusid(abbilledstatusid)
@adhocbkgs.sort! {|x,y| x.invoice_trans.last.invoice_hdr.supplier.suppname + x.invoice_trans.last.invoice_hdr.client.clientname + x.invoice_trans.last.invoice_hdr.invno.to_s + x.invoice_trans.last.invtrndate.strftime('%Y%m%d') + x.invoice_trans.last.meal.mealsortseq.to_s <=> y.invoice_trans.last.invoice_hdr.supplier.suppname + y.invoice_trans.last.invoice_hdr.client.clientname + y.invoice_trans.last.invoice_hdr.invno.to_s + y.invoice_trans.last.invtrndate.strftime('%Y%m%d') + y.invoice_trans.last.meal.mealsortseq.to_s } 
```

以上工作但非常慢，主要是因为对数据库的多次读取，我怀疑实际排序。我想知道如何重构代码以使用`:include`或`:joins`与`:order`子句一起使用，这可能有助于加快速度。但是，我无法弄清楚 Rails Active 记录的“查找”语句应该是什么。

我在 Ubuntu 11.04 上使用 Rails 3.2.1、Ruby 1.9.3p0 和 MySQL 5.1。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T20:40:17.507

最后一笔交易是什么？是具有最大 ID 的那个（查看您的代码，好像是这样），还是最新更新的时间戳？

让我们试着弄清楚：

```
AdHocBkg.joins(:adhoc_bkg_status, :invoice_trans => [ :meal, { :invoice_hdr => [ :supplier, :client ] } ]).
  where("adhoc_bkg_statuses.abstatdesc='Billed' and invoice_trans.id = (select max(id) from invoice_trans as it where it.ad_hoc_bkg_id=ad_hoc_bkgs.id)").
  order("suppliers.suppname desc, clients.clientname desc, invoice_hdrs.invno desc, invoice_trans.invtrndate, meals.mealsortseq desc") 
```

我没有对此进行测试，因此不确定它是否会完全按照您的意愿工作，但您可能可以从这里开始。

**编辑**

如果您想访问您正在排序的字段，您可以尝试使用`includes`而不是。`joins`

# qt - 自定义paint（）不适用于QLayout.setSpacing（）

> ID：11408222
> 
> 赞同：0
> 
> 时间：2012-07-10T07:05:22.143
> 
> 标签：qt, pyqt4, pyside

我很难理解一些看似简单的事情：

我有一个从 QPushButton 子类化的自定义小部件，我在 QGridLayout() 中布置了多个实例。当我添加一个 paint() 函数并绘制背景颜色以填充按钮的 rect() 时，布局的间距似乎不再起作用。这是显示我的意思的屏幕截图： ![在此处输入图像描述](../Images/ca529fc55dc232d95f138cef9cf6feb2.png)

这显示了遵循布局间距的默认 QPushButtons 和不遵循的自定义“按钮”。我确定我只需要（重新）在我的 CustomButton 中实现一些东西，但找不到它是什么。我尝试设置 contentMargins 无济于事。

我错过了什么？也许我不需要填写 self.rect() 而是其他东西？这是生成上述屏幕截图的示例代码：

```
import sys
from PySide.QtGui import *
from PySide.QtCore import *
class CustomButton(QPushButton):
    def __init__(self, tool, icon=None, parent=None):
        super(CustomButton, self).__init__(parent)
        self.setSizePolicy(QSizePolicy.Expanding,  QSizePolicy.Fixed)
        self.setMinimumWidth(200)
        self.frameGeometry()

    def paintEvent(self, event):
        painter = QPainter(self)
        bgColor  = QColor(60, 60, 60)
        painter.fillRect(self.rect(), bgColor)

app = QApplication(sys.argv)
mainWindow = QWidget()
grid = QGridLayout()
grid.setSpacing(10)
mainWindow.setLayout(grid)
for i in xrange(4):
    btn1 = CustomButton('A')
    btn2 = QPushButton('B')
    grid.addWidget(btn1, 0, i)
    grid.addWidget(btn2, 1, i)

mainWindow.show()
sys.exit(app.exec_()) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T04:50:15.293

所以一个解决方案似乎是手动调整 self.rect() 有点小，虽然我不明白为什么这是必要的，因为我认为这就是布局的间距：

```
def paintEvent(self, event):
    rect = self.rect()
    rect.adjust(5,5,-5,-5)
    painter = QPainter(self)
    bgColor = QColor(60, 60, 60)
    painter.fillRect(rect, bgColor) 
```

这会给我我需要的间距。如果有人可以阐明这是错误还是功能，我将不胜感激。

# opencv - 将 SDL_Surface 转换为 IplImage

> ID：11408230
> 
> 赞同：0
> 
> 时间：2012-07-10T07:06:18.593
> 
> 标签：opencv, sdl

我 使用此[***链接***](http://s114.codeinspot.com/q/394190)**的参考将IplImage**转换为**SDL_Surface**
[](http://s114.codeinspot.com/q/394190)

 *```
SDL_Surface *single_channel_ipl_to_surface (IplImage *opencvimg)
{
    SDL_Surface *surface = SDL_CreateRGBSurfaceFrom((void*)opencvimg->imageData,
                           opencvimg->width,
                           opencvimg->height,
                           opencvimg->depth*opencvimg->nChannels,
                           opencvimg->widthStep,
                           1, 1, 1 ,0);
    return surface;
} 
```

如何将**SDL_Surface**转换为**IplImage**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T13:06:46.207

您必须从 SDL_Surface 检索 4 条信息，因此请研究 API 以了解如何检索：

*   图片的**尺寸**（宽/高）；
*   图像的**位深度**；
*   **通道**数；
*   以及图像的**数据**（像素）；

之后，您可以[从头开始创建一个 IplImage](https://stackoverflow.com/questions/10124717/opencv-convert-the-pointer-in-memory-to-image/10125322#10125322)，`cvCreateImageHeader()`后跟`cvSetData()`.*

# php - 我的 YouTube PHP 脚本很重，如何缓存它？

> ID：11408232
> 
> 赞同：0
> 
> 时间：2012-07-10T07:06:22.940
> 
> 标签：php, performance, api, caching, youtube

如何在我的网站上缓存我的 YouTube PHP 脚本，使其每小时只请求新数据，而不是在每次页面加载时调用数据？

```
<?php
get_playlists();

function get_playlists(){
$data = file_get_contents("http://gdata.youtube.com/feeds/api/playlists/C82EBDAC0429B6A2?                      orderby=published&max-results=12");
$xml = simplexml_load_string($data);

foreach($xml->entry as $playlist){
$media = $playlist->children('http://search.yahoo.com/mrss/');
$attrs = $media->group->thumbnail[1]->attributes();
$thumb = $attrs['url'];
$attrs = $media->group->player->attributes();
$video = $attrs['url'];
$title = substr( $media->group->title, 27);
$url = $video;

parse_str( parse_url( $url, PHP_URL_QUERY ), $my_array_of_vars );
$vid_Id = $my_array_of_vars['v'];

$thumbnail .= '<div style="float:left; cursor:pointer;">
<p class="crop"><a class="videobox various iframe" href="http://www.youtube.com/embed/' .         $vid_Id . '?autoplay=1&hd=1"><img src="' .$thumb . '" title="' . $title . '" width="74"         height="56"/></a></p></div>';
}print $thumbnail;}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T07:12:01.713

尝试使用[memcached](http://php.net/memcached)并在那里保存加载的播放列表

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T07:12:19.747

设置每小时加载电影的 cron 作业。电影信息存储在数据库中。您可以避免每次都下载和解析 XML。对于基本的加速它会很好。

# c - 如何从使用 ASN1 编码的数字签名 PE 文件的 Authenticode 中提取签名者信息？

> ID：11408240
> 
> 赞同：5
> 
> 时间：2012-07-10T07:06:57.297
> 
> 标签：c, x509certificate, x509, asn.1, authenticode

我需要`SignerInfo`从`Authenticode`ASN1 结构中的数字签名 PE 文件中提取。

`INFO`: 一个 PE 文件在`Security Directory RVA`inside指定的偏移处包含验证码`Optional Header Data Directories`。[在阅读了Microsoft Authenticode PE Signature Format](http://msdn.microsoft.com/en-us/library/windows/hardware/gg463180.aspx)提供的文档后，我尝试开始，但运气不好，因为我对 SSL/TSL 很陌生。

**我的问题：**

1.  有没有办法解析二进制文件并以 C 字符串格式打印数据结构？

2.  有什么方法可以解析给定的二进制文件并指向`SignerInfo`or `SignerName`？

`NOTE`：我不想使用任何平台相关的 API，因为我希望代码独立于平台。

在此先感谢所有大师:-)

`UPDATE:`我在 C# 中找到了一个代码。有人能帮我找到相同的C等价物吗？

```
using System;
using System.IO;
using System.Text;
using System.Security.Cryptography.X509Certificates;

public class CertInfo
{
 public static void Main(String[] args)
 {
    byte[] certBytes;
    X509Certificate x509cert;

    while (true)
    {
        Console.WriteLine("\nEnter File Name: ");
        String filename = Console.ReadLine();
        if (filename == "")  //exit while(true) loop
            break;
        if (!File.Exists(filename))
        {
            Console.WriteLine("File \"{0}\" does not exist!\n", filename);
            continue;
        }

        try
        {             //try binary DER format first
            x509cert = X509Certificate.CreateFromCertFile(filename);
            showCertInfo(x509cert);
        }

        catch (System.Security.Cryptography.CryptographicException cryptder)
        { //not binary DER
            StreamReader sr = File.OpenText(filename);
            String filestr = sr.ReadToEnd();
            sr.Close();
            StringBuilder sb = new StringBuilder(filestr);
            sb.Replace("-----BEGIN CERTIFICATE-----", "");
            sb.Replace("-----END CERTIFICATE-----", "");
            //Decode 
            try
            {        //see if the file is a valid Base64 encoded cert
                certBytes = Convert.FromBase64String(sb.ToString());
                x509cert = new X509Certificate(certBytes);
                showCertInfo(x509cert);
            }
            catch (System.FormatException formexc)
            {
                Console.WriteLine("Not valid binary DER or Base64 X509 certificate format");
            }
            catch (System.Security.Cryptography.CryptographicException cryptb64)
            {
                Console.WriteLine("Not valid binary DER or Base64 X509 certificate format");
            }
        }

    } // end while true
}

private static void showCertInfo(X509Certificate x509cert)
{
    Console.WriteLine("Name: " + x509cert.GetName());
    Console.WriteLine("Issuer: " + x509cert.GetIssuerName());
    Console.WriteLine("Serial Number: " + x509cert.GetSerialNumberString());
    Console.WriteLine("Expiration Date: " + x509cert.GetExpirationDateString());
    Console.WriteLine("PublicKey: " + x509cert.GetPublicKeyString());
}
} 
```

# mysql - mysql数值计算错误

> ID：11408245
> 
> 赞同：0
> 
> 时间：2012-07-10T07:07:20.973
> 
> 标签：mysql

我不断收到此错误：

> 错误 1292 (22007)：截断不正确的 DOUBLE 值：'81d119b1a5'

每当我在 mysql 中运行此代码时

```
UPDATE myTable SET myCol = GREATEST((myCol - 10,000.00),0) WHERE myId = Id; 
```

我的表引擎是 innodb，CHARSET=utf8 和 COLLATE=utf8_unicode_ci。myCol 的数据类型也是 NUMERIC(10,2)。

谁能解释为什么这个错误不断弹出。我的猜测是我可能不得不转换为整数，但到目前为止它没有成功。

**ADDEDUM**：通过更改 SET SQL_MODE = ''; 来解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T07:14:52.380

try this

```
 UPDATE myTable SET myCol = GREATEST((myCol - 10,000.00),0) WHERE myId = Id; 
```

this may work as there was some bracket mismatch.

# date - 你如何在 iso8601 中代表永远（无限地在未来）？

> ID：11408249
> 
> 赞同：7
> 
> 时间：2012-07-10T07:07:53.837
> 
> 标签：date, iso8601

API 定义日期应作为 iso8601 发送，但我们要求将“永远”作为日期发送，而标准似乎并未涵盖这一点。谁能提出比 9999 年 12 月 31 日更好的解决方案？有没有更合适的标准？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T07:59:31.623

引用 ISO 8601:2004(E)：

> **3.5 扩展** 经信息交换合作伙伴双方同意，允许扩展标识日历年的组件，否则限制为四位数。这使得能够在完整表示支持的范围之外引用日历年中的日期和时间，即在年初[0000] 之前或年底[9999] 之后。

同样相关的可能是第**3.7 节相互协议**，它基本上说您可以自由定义自己的表示，只要您不干扰 ISO 8601 中定义的表示。所以 9999-12-32 或 9999-13-00 可以双方就您的提议`forever`价值达成一致。

至于什么是常见的做法，我会说这取决于。

我会尽可能选择 3.7。但重要的是评估您在整个设置中的角色。例如，如果您为了方便或未来的兼容性而在自己的组件集中使用第 3 方 API，则应该完全没有问题。如果您是更大系统的一部分，并且您必须说服数十个其他系统方/组件/模块/等。我会说这不值得麻烦。

检查遗留代码也非常重要。并且至少草拟一个关于如何进行迁移的计划，以防万一它破坏了令人难以置信的设置。这可能是任何东西，从记录您的 API“扩展”到实际向遗留代码维护者发送补丁。

# django-models - 如何在 Django 模型中存储一个类数组

> ID：11408252
> 
> 赞同：0
> 
> 时间：2012-07-10T07:08:00.670
> 
> 标签：django-models

假设我必须在 django 的特定类中保存一个类数组。我该如何进行？例如，我有一个类 Books。我希望将惊悚书籍数组存储在类书籍中。Django 模型和数据库表的语法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T07:52:38.213

你读过[Django 教程](https://docs.djangoproject.com/en/1.4/intro/tutorial01/)吗？一切都在那里解释。不过，答案实际上可能取决于您使用的数据库。但是假设您使用经典 SQL，那么 ORM 的工作原理如下：

1）您定义主要模型：

```
class Company( models.Model ):
    name = models.CharField( max_length = 100 )
    # some other fields if necessary 
```

2）您定义指向主模型的相应子模型：

```
class Employer( models.Model ):
    name = models.CharField( max_length = 100 )
    company = models.ForeignKey( Company )  # <----- relation here
    # some other fields if necessary 
```

3）如果您有一个`comp`类型的对象`Company`，那么您可以使用以下方式访问该公司的所有雇主：

```
comp.employer_set.all( ) 
```

该`employer_set`属性来自`Employer`类名和`_set`后缀。您可以为此字段定义自己的名称。您只需要`Employer`稍微修改类的定义，如下所示：

```
class Employer( models.Model ):
    name = models.CharField( max_length = 100 )
    # note the change
    company = models.ForeignKey( Company, related_name = 'employers' ) 
```

现在您可以使用：

```
comp.employers.all( ) 
```

这些是基础。关系数据库不可能（或至少效率极低）在主模型中实际创建引用数组。但是，如果您使用的是 MongoDB 等非关系型数据库，情况并非如此。

# php - 使用 WCAP 协议访问 Sun Java Calendar Server 的 PHP 库

> ID：11408256
> 
> 赞同：1
> 
> 时间：2012-07-10T07:08:18.093
> 
> 标签：php, calendar

有谁知道在 PHP 中使用 WCAP 服务器访问 Sun Java Calendar Server 的工作库？

我已经尝试过使用这个库：[http](http://code.google.com/p/php-wcap-client/) ://code.google.com/p/php-wcap-client/但它似乎不起作用。我花了几个小时试图调试它，但我没有成功。

如果有人知道用 PHP 访问这种服务器的好方法，请告诉我。

谢谢您的帮助。问候，乔纳森

# css - 在引导缩略图上重叠图像

> ID：11408260
> 
> 赞同：1
> 
> 时间：2012-07-10T07:08:22.500
> 
> 标签：css, twitter-bootstrap

首先，我尝试在 JSfiddle 中重新创建它，但无法做到，因此对此表示歉意。我在我的网站中使用引导程序并使用缩略图类来设置我的图像。我正在努力将另一个图像放在缩略图内的图像顶部。据我所知，我已经玩过这些位置，但无法解决这个问题

该页面位于

```
http://46.32.253.11/our_team 
```

你会注意到左边有一个大头针，我希望它贴在图片的顶部，就像把图片贴在墙上一样。

理想情况下，我想知道对齐这些图像的规则，以便我可以从中学习，或者如果有人确实剃掉了答案，他们能否简要解释正在发生的事情，所以我可以再次从中学习。

感谢任何帮助，因为我需要完成这个项目。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T07:31:36.433

您可以通过在当前标记中使用以下标记来实现。编写您的`<img class="team" alt="" src="/assets/teresa.jpg">`外部`<div class="pin"></div>`并在您的 CSS 中进行以下更改。

**HTML**

```
<div class="span4">

    <div class="thumbnail">

        <div class="pin"></div>
        <img class="team" alt="" src="/assets/teresa.jpg">         
        <h4 class="team">Teresa Beggs</h4>
        <p class="team" href="#myModal99" data-toggle="modal">Operations Director</p>

    </div>       

</div> 
```

**CSS：**

```
.thumbnail {
    border: medium none;
    box-shadow: none;
    display: block;
    line-height: 1;
    position: relative;
    z-index: 1; /* Added Lower Z-Index Value */
}

.pin {
    background: url("/assets/purplepin.png") no-repeat scroll 0 0 transparent;
    height: 100px; /* Added Height of image */
    width: 100px; /* Added Width of image */
    left: 100px; /* Added Left Position */ 
    position: absolute; /* Added Position */
    top: -20px; /* Added Top Position */        
    z-index: 2; /* Added Higher Z-Index Value from thumbnail div */
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-10T07:31:13.663

我检查了问题中提到的链接。

发现对于 Pin 的图像，如果 div 具有类名，则您正在设置背景

使用 CSS 的“.pin”。o 背景图像永远不会出现在人的图像上。

还要更改“.pin”类的 CSS。添加一些宽度作为人的宽度

图片。

建议你搬家

```
<img class="team" src="/assets/teresa.jpg" alt=""> out of the <div class="pin"> 
```

然后给我 HTML，然后我可以告诉如何在人的图像上显示图钉。

# jquery - Grails g:formRemote 自动检索

> ID：11408261
> 
> 赞同：0
> 
> 时间：2012-07-10T07:08:23.610
> 
> 标签：jquery, grails

我在我的视图区域中有这个问题，其中我有这个`<g:select>`标签有一个`onChange`属性来检索引用到所述标签的选定值的数据。不幸的是，我们在 中包含了`<g:select>`标签，`<g:formRemote>`以便通过 URI 检索数据，`<g:formRemote>`而无需刷新页面。

```
<!-- The g:formRemote of the view -->
<g:formRemote name="formRemote" uri:[controller:'test', action:'functionCall']>
   <g:select name="selectedValue" from="${['AA','BB']}"/>
   ${returnData}
</g:formRemote>

//The closure where the formRemote will be calling [TestController.functionCall]
def functionCall(){
   println 'entered'
   def returnData = ''
   if(params.value == 'AA')
      returnData = 'aaa'
   else if(params.value == 'BB')
      returnData = 'bbb'       

   [data:returnData]
} 
```

问题是我们无法`<g:formRemote>`在`<g:select>`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T11:06:12.930

您的 select 标记不必位于 formRemote 标记内，带有 remoteFunction 调用的常规表单标记就可以了。

来自[http://grails.org/AJAX-Driven+SELECTs+in+GSP](http://grails.org/AJAX-Driven+SELECTs+in+GSP)：

在 gsp 中选择标签：

```
<form>
    <g:select
        optionKey="id" optionValue="name" name="country.name" id="country.name" from="${Country.list()}"
        onchange="${remoteFunction(
            controller:'country', 
            action:'ajaxGetCities', 
            params:'\\'id=\\' + escape(this.value)', 
            onComplete:'updateCity(e)')}"
    ></g:select>
    <g:select name="city" id="city"></g:select>
</form> 
```

gsp 中的 javascript 函数将数据发送到 grails 控制器：

```
<g:javascript>
    function updateCity(e) {
        // The response comes back as a bunch-o-JSON
        var cities = eval("(" + e.responseText + ")")   // evaluate JSON

        if (cities) {
            var rselect = document.getElementById('city')

            // Clear all previous options
            var l = rselect.length

            while (l > 0) {
                l--
                rselect.remove(l)
            }

            // Rebuild the select
            for (var i=0; i < cities.length; i++) {
                var city = cities[i]
                var opt = document.createElement('option');
                opt.text = city.name
                opt.value = city.id
                try {
                    rselect.add(opt, null) // standards compliant; doesn't work in IE
                }
                catch(ex) {
                    rselect.add(opt) // IE only
                }
            }
        }
    }

    // This is called when the page loads to initialize city
    var zselect = document.getElementById('country.name')
    var zopt = zselect.options[zselect.selectedIndex]
    ${remoteFunction(controller:"country", action:"ajaxGetCities", params:"'id=' + zopt.value", onComplete:"updateCity(e)")}

</g:javascript> 
```

圣杯控制器：

```
import grails.converters.*
class CountryController {

    def ajaxGetCities = {
        def country = Country.get(params.id)
        render country?.cities as JSON
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T06:12:04.940

我们最近知道我们不需要`<g:formRemote>`标签来让理论起作用。我们缺少以下格式的`onChange="${remoteFunction ...}"`参数：`<g:select tag>`

```
<g:select 
   name="selectedValue"
   from="${['AA','BB']}" 
   optionKey="<the id of the model with reference to line#9>"
   onChange="${remoteFunction(
     controller:'test', 
     action:'functionCall',
     update:[success:'updateDiv'],
     params:'\'id=\' + escape(this.value)',
     onComplete='displayVal(this)')}"/> 
```

其中`updateDiv`，也位于 中`.gsp`，负责保存要从带有闭包的控制器渲染的视图`functionCall`。

```
<div id="updateDiv"></div> 
```

并且 TestController.functionCall 具有以下内容：

```
def functionCall(){
   println 'entered'
   def returnData = ''
   if(params.value == 'AA')
      returnData = 'aaa'
   else if(params.value == 'BB')
      returnData = 'bbb'       

   render(view:'<can be a template or an html page>', model:[data:returnData])
} 
```

# java - Android 应用程序中对象类的用途

> ID：11408262
> 
> 赞同：0
> 
> 时间：2012-07-10T07:08:29.303
> 
> 标签：java, android

我正在从事Android开发。我偶然发现了 Object 类。我阅读了文档，并没有太多说明课程的目的。我认为当应用程序有多个线程时它会派上用场。有没有其他地方可以有益？谁能告诉我什么时候使用它以及使用它的好处？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T07:12:24.287

对象类来自`java.lang.Object`. Object 是**Java 中所有对象的超类。**

我们一直使用的 Object 类最常用的方法是**equals()**

例如：

```
 String s1 = "Hello";
    String s2 = "Hello";

  if (s1.equals(s2){

   } 
```

上面的例子很简单..我们`wait() , notify()` **在使用线程时使用，它在Android中运行良好，虽然我们有Async任务给我们带来无痛线程..** `finalise()`是GC调用的方法来垃圾收集没有对象的对象参考一下。。

# ruby-on-rails - 运行 FactoryGirl 时有什么方法可以检查数据库数据？

> ID：11408263
> 
> 赞同：0
> 
> 时间：2012-07-10T07:08:29.797
> 
> 标签：ruby-on-rails, debugging, rspec, factory-bot, guard

**设置：**嗨，我有 Rails 3.2、Guard、RSpec 和 FactoryGirl。很常见。

**问题：**我以管理员身份创建的用户行为与预期不符。另外，当测试完成时，数据库已经是空的，所以我无法理解发生了什么。

**期望：**我想“调试”，或者 - 换句话说 - 有一些断点并检查 my_test 数据库。

**- 或者 -**至少我想在测试开始时清理数据库，而不是在最后。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T07:26:59.270

安装调试器 gem，您将能够通过调用进入调试器`debugger`

测试包含在事务中，并且在大多数（所有？）数据库上，这意味着其他连接（例如，由您使用的任何数据库浏览工具打开的连接）无法看到您的测试所做的更改。您可以在 mysql 上使用

```
set transaction isolation level read uncommitted 
```

其他数据库可能有所不同

# java - java邮件使用executorservice

> ID：11408269
> 
> 赞同：0
> 
> 时间：2012-07-10T07:08:51.930
> 
> 标签：java, multithreading, email, executorservice

我正在使用 java 邮件 API。我能够将电子邮件发送给各个收件人，

```
transport.connect();
for loop {
    member = list.get(i)
    message.setRecipients(MimeMessage.RecipientType.TO, memebr+ "@abc.com");
    transport.sendMessage(message, message.getRecipients(Message.RecipientType.TO));
}
transport.close(); 
```

收件人列表可能是 200,300,500 等等.....现在我想在上述情况下实现 executorservice。任何人都可以让我知道在这里实施执行者服务的方法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-29T18:29:41.690

```
Sample code look like this:-

ExecutorService executor = Executors.newFixedThreadPool(10);
        for (int i = 0; i < 10; i++) {
            Member member = list.get(i);
            Runnable worker = new EmailSender(member);
            executor.execute(worker);
        }
        executor.shutdown();
        while (!executor.isTerminated()) {
        }
        System.out.println("Finished all threads"); 
```

在 EmailSender 类中编写发送电子邮件功能

```
message.setRecipients(MimeMessage.RecipientType.TO, memebr+ "@abc.com");
transport.sendMessage(message, message.getRecipients(Message.RecipientType.TO)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T07:25:06.837

使用从`Execturors`. （最好不是单线程。）然后创建处理邮件发送的可运行或可调用（如果您需要一些反馈）任务，将不同的部分作为参数（地址等）。然后就像您在示例中所做的那样循环，但不是直接调用这些行，而是总结我之前在每个步骤中描述的任务。
您应该注意的是邮件服务器可能是非线程安全的，而且如果只有一个邮件服务器，它不会解决问题，因为在这种情况下您会受到资源的限制（但执行获胜'不要阻塞你的主线程）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T08:28:21.247

您需要注意的主要问题是邮件地址列表的并发消费。创建一个对象，该对象将保存一个发送操作所需的所有数据，并将这些对象放入`ConcurrentLinkedQueue`. 用于`poll`从队列中弹出项目。

# android - Android 包括纵向和横向布局

> ID：11408270
> 
> 赞同：1
> 
> 时间：2012-07-10T07:09:07.430
> 
> 标签：android, merge, include

我有纵向和横向布局的活动。它们中的每一个都包含不同的 balloon.xml

1.  对于肖像，一切正常。
2.  对于横向 - 经过测试，我发现系统包括我的纵向包括 :( 并且所有布局都在可见屏幕之外进行。

一些示例代码：我有两个 main.xml 文件 - 在“layout”和“layout-land”文件夹中。

## main.xml /横向和纵向的不同内容/

```
<RelativeLayout
    .......
    <include layout= "@layout/balloon" />
</RelativeLayout> 
```

## 和 baloon.xml /横向和纵向的不同内容/

如何强制正确包含？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T07:13:54.337

You should actually name both layouts with the same name

**layout-land/baloon.xml** and l **layout/baloon.xml****

System automatically finds wchich one to show.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T08:08:12.583

嗯。我做了一些改变。根据谷歌文档，这是非常糟糕的，但有效。

在纵向 main.xml 中包含 balloon.xml。在横向 mainl.xml 中包括 balloon_lan.xml。这个固定的问题。我感到很生气，因为我必须违反正确的资源使用方式，并且将来我必须在必须更改代码时记住这个黑客。希望android更新后程序不会崩溃。

# sharepoint - 用于共享点集成的 ActiveX 控件

> ID：11408272
> 
> 赞同：0
> 
> 时间：2012-07-10T07:09:27.087
> 
> 标签：sharepoint, activex

我正在努力在 sharepoint 上集成 Web 部件。在阅读了许多文章后，我发现开发 ActiveX 控件将是实现这种集成的一种方法。

但是只有当您想要访问 Windows 功能（硬件交互）时才需要 ActiveX 控件，例如从 GUI 访问网络摄像头或麦克风。如果不需要这种交互，那么可以在 jquery 或 java 中开发一个简单的 web 部件，而无需任何 activeX 控件。这些 jquery 或 java 组件可以与 Sharepoint 集成，并且可以调用任何第三方 web 服务以显示在 sharepoint 页面上。

请确认我的理解是正确的。任何其他建议都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T08:38:24.950

ActiveX 控件是一个糟糕的主意，除非您必须做一些用 html、javascript 等绝对无法完成的事情——在这种情况下，您仍然应该首先考虑 Silverlight/Flash。

您可以通过多种方式将任意 javascript 添加到 SharePoint 页面 - 内容编辑器 Web 部件、编辑母版页、委托控件、自定义 Web 部件。

更多细节。

[http://techtrainingnotes.blogspot.co.uk/2012/05/adding-javascript-and-css-to-sharepoint.html](http://techtrainingnotes.blogspot.co.uk/2012/05/adding-javascript-and-css-to-sharepoint.html)

[http://techtrainingnotes.blogspot.co.uk/2012/02/sharepoint-how-to-add-javascript-to.html](http://techtrainingnotes.blogspot.co.uk/2012/02/sharepoint-how-to-add-javascript-to.html)

# python - 在 django Model clean_fields() 中读取上传的文件内容？

> ID：11408275
> 
> 赞同：1
> 
> 时间：2012-07-10T07:09:48.023
> 
> 标签：python, django, model-view-controller

我正在尝试在 Model 中打开上传的文件`clean_fields()`，

```
class Person(models.Model):
  attach = models.FileField(upload_to='attach')
  def clean_fields(self, exclude=True):
    f = open(self.attach.path, 'rb') 
```

问题是，在 model 之前`save()`， self.attach.path 实际上是错误的。`upload_to`路径丢失。而且该文件还不存在。

`self.attach.path`唯一存在并且在模型*之后是正确的*`save()`

如何在此`clean_fields()`过程中验证上传文件的内容？我想在模型保存后引发 ValidationError，而不是错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T07:28:31.453

在这些情况下，我正在做这样的事情......

```
def save(self, *args, **kwargs):
        super(Gallery, self).save(*args, **kwargs)
        gallery = self.process_control()
        super(Gallery, self).delete()
        return gallery 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T00:56:24.247

好的，由于无法回答这个问题，我自己想通了。

```
def clean_fields(self, exclude=None):
    self.SomeFileField.save(self.SomeFileField.name, self.SomeFileField, True) 
```

然后一切就绪。

# c# - 如何使用 radtextbox 创建登录密码字段并记住信息？

> ID：11408276
> 
> 赞同：0
> 
> 时间：2012-07-10T07:09:53.200
> 
> 标签：c#, asp.net, cookies, textbox, passwords

Telerik bibilotheque 的小问题。问题来自我的登录页面，或者我使用了两个字段：（登录名和密码）与控制器“radcombobox”。每次我返回登录页面时，登录信息都会被保存并通过 cookie 重写字段。直到一切正常。但是当我点击按钮连接时。我将返回错误登录....我不明白为什么，因为字段的值看起来不错。

！！如果我使用 [asp:textbox] 一切都很好，但没有 [radtextbox] .. 这是我的两个字段的代码（使用按钮的登录名和密码）非常感谢

```
 <tr>
            <td class="labelCo">
                <asp:Label ID="lbLogin" runat="server" Text='<%$ Resources:IRM, user_label_identity %>'></asp:Label>
            </td>
        </tr>
        <tr>
            <td class="inputCo">
                <telerik:RadTextBox ID="txtBoxLogin" Runat="server" Width="300px" AutoCompleteType="None">
                </telerik:RadTextBox>
            </td>
        </tr>
        <tr>
            <td class="labelCo">
                <asp:Label ID="lbPassword" runat="server" Text='<%$ Resources:IRM, user_label_password %>' ></asp:Label>
            </td>
        </tr>
        <tr>
            <td class="inputCo">
                <telerik:RadTextBox ID="txtBoxPassword" Runat="server" TextMode="Password" AutoCompleteType="None"  Width="300px" ></telerik:RadTextBox> 
            </td>
        </tr>
        <tr>
            <td class="btnconectCo">
                <asp:Button ID="btnConnect" runat="server" Text='<%$ Resources:IRM, global_button_connect %>' OnClick="btnConnect_Click" />
            </td>
        </tr> 
```

和 buttonClick ... 一个长代码 ^^

```
try
            {
                string name;
                string password;

                name = txtBoxLogin.Text.Replace("'", ""); ;
                password = txtBoxPassword.Text.Replace("'", "");

                if (name.Trim().Length >= 3 && password.Length >= 3)
                {

                    general_function myFunction = new general_function(ConfigurationManager.ConnectionStrings["SCI2ConnectionString"].ConnectionString);
                    //Récupère la connection de l'utilisateur dans la BD ARMS_USER
                    string[,] resultArmsUser = myFunction.sql_request2D("getInfoUserAuthentification '" + name.Trim() + "','" + password.Trim() + "'");
                    int countConnection = resultArmsUser.GetLength(0);

                    if (countConnection > 1)
                    {
                        object[] sessionUser = new object[4];
                        sessionUser[0] = resultArmsUser[0, 1]; //login
                        sessionUser[1] = password; //stock le password
                        sessionUser[3] = resultArmsUser; //Stocke les infos du user
                        Session["sessionUser"] = sessionUser;
                        Session["user_name"] = name;
                        Session["user_password"] = password;

                        Session["userDb"] = null;
                        string res = string.Empty;
                        for (int a = 0; a < resultArmsUser.GetLength(0); a++)
                        {
                            res += resultArmsUser[a, 5].ToString() + "#" + resultArmsUser[a, 3].ToString() + "{-}";
                        }
                        Session["userDb"] = res;

                        creatTableConnection_withoutWindowsLogin(countConnection, resultArmsUser);
                    }
                    else
                    {
                        if (resultArmsUser[0, 0] != "")
                        {

                            string userID = myUser.getUserIDAtAuthentification(name, password, resultArmsUser[0, 3]);

                            if (userID != "")
                            {
                                myFunction = new general_function(resultArmsUser[0, 3]);

                                Session["logged"] = true;
                                Session["userID"] = userID;
                                Session["user_name"] = name;
                                Session["user_password"] = password;
                                string[,] nothing = new string[0, 0];
                                myFunction.addActivity("user", int.Parse(userID), "access", int.Parse(userID), nothing, 1, 0);

                                //Création de l'objet user 
                                object[] sessionUser = new object[4];
                                sessionUser[0] = resultArmsUser[0, 1]; //Login
                                sessionUser[1] = resultArmsUser[0, 3]; //ConnectionStrings
                                sessionUser[2] = userID; //UserID
                                sessionUser[3] = resultArmsUser[0, 4]; //connectionStringID
                                Session["sessionUser"] = sessionUser;

                                Session["userDb"] = null;
                                string res = string.Empty;
                                for (int a = 0; a < resultArmsUser.GetLength(0); a++)
                                {
                                    res += resultArmsUser[a, 5].ToString() + "#" + resultArmsUser[a, 4].ToString() + "{-}";
                                }
                                Session["userDb"] = res;

                                //Flag à true le champ actif de la table tblUser
                                user t = new user(resultArmsUser[0, 3], int.Parse(userID));
                                t.isActif = true;

                                if (Session["page"] != null)
                                {
                                    string page = Session["page"].ToString();
                                    if (page.Equals("finance.aspx"))
                                    {
                                        Response.Redirect("Finance/" + page);
                                    }
                                    else
                                    {
                                        Response.Redirect(page);
                                    }
                                }
                                else
                                {
                                    Response.Redirect("Default.aspx");
                                }
                            }
                            else
                            {
                                lbInfo.Text = myFunction.getResource("user_label_error_password_incorrect");
                                lbInfo.ForeColor = Color.Red;
                                Session["logged"] = null;
                            }

                        }
                        else
                        {
                            lbInfo.Text = myFunction.getResource("user_label_error_password_incorrect");
                            lbInfo.ForeColor = Color.Red;
                            Session["logged"] = null;
                        }

                        ContentPlaceHolder menuActive;
                        DropDownList cbbx_dbUser;
                        menuActive = (ContentPlaceHolder)Master.FindControl("menuActive");
                        cbbx_dbUser = (DropDownList)menuActive.FindControl("cmbx_dbListUser");
                        object[] myUserSession = (object[])Session["sessionUser"];

                        general_function myFunction_ = new general_function(ConfigurationManager.ConnectionStrings["SCI2ConnectionString"].ToString());
                        string resDbName = myFunction_.sql_request2D("getConnectionStringName " + myUserSession[3].ToString())[0, 0];

                        int index = 0;
                        for (int b = 0; b < cbbx_dbUser.Items.Count; b++)
                        {
                            string value = cbbx_dbUser.Items[b].Text;
                            //Si la corresspondance est parfaite avec la db utilisée actuellement on effetue la selection par defaut
                            if (value.ToLower().Trim().Equals(resDbName.ToLower().Trim()))
                            {
                                cbbx_dbUser.SelectedIndex = index;
                            }
                            index++;
                        }

                    }
                }
                else
                {
                    general_function myFunction = new general_function(ConfigurationManager.ConnectionStrings["SCI2ConnectionString"].ConnectionString);
                    lbInfo.Text = myFunction.getResource("user_label_enter_login");
                    lbInfo.ForeColor = Color.Green;
                }
            }
            catch (Exception er)
            {

            } 
```

# python - 如何将选定的文件移动到文件夹中？

> ID：11408277
> 
> 赞同：2
> 
> 时间：2012-07-10T07:09:53.383
> 
> 标签：python, sorting, filesystems

该程序将文件夹中的每个文件分类到具有特定日期的新文件夹中。大多数文件名都遵循这种模式：

```
20120509_1324654_house.jpg
20120509_1324654_roof.jpg 
```

但也可能有一些文件是这样命名的：

```
20120509_cat.jpg
20120509_cat.txt
20120509_dog.jpg
20120509_dog.txt 
```

这些是我想在文件夹“动物”中拥有的文件，但我不知道如何编辑我的代码，以便程序可以创建文件夹并将这些文件放在那里。

这是我到目前为止所拥有的：

```
from zipfile import ZipFile
import glob
import datetime
import os 
import re
from collections import defaultdict
from shutil import copyfile
pat = r'(\d+)(?:_\d+)?_(\w+?)[\._].*'
from collections import defaultdict

src = 'D:/Testing/src/'

or name in glob.glob('D:/Testing/src/*'): 
    print name

dict_date = defaultdict(lambda : defaultdict(list))
for fil in os.listdir(src):
    if os.path.isfile(os.path.join(src, fil)):
        date, subFolder = re.match(pat, fil).groups()
        dict_date[date][subFolder].append(fil)

for date in dict_date:
        for subFolder in dict_date[date]:
            try:
                os.makedirs(os.path.join(src, date, subFolder))
            except os.error:
                pass
            for fil in dict_date[date][subFolder]:
                copyfile(os.path.join(src, fil), os.path.join(src, date, subFolder, fil))

for date in dict_date:
    with ZipFile(os.path.join(src, '{0}.zip'.format(date)), 'w') as myzip:
        for subFolder in dict_date[date]:
            for fil in os.listdir(os.path.join(src, date, subFolder)):
                if not fil.endswith('.zip'):
                    myzip.write(os.path.join(src, date, subFolder, fil))

directory = src
os.chdir(directory)
files = glob.glob('*.txt')
for filename in files:
    os.unlink(filename)

files2 = glob.glob('*.png')
for filename in files2:
    os.unlink(filename)

print ("\n follows files are now in the folder \n")

for name in glob.glob('D:/Testing/src/*'):  
    print name 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T14:06:42.437

要创建一个文件夹`os.mkdir`，例如创建一个名为 animals 的文件夹，请使用`os.mkdir("animals")`

# entity-framework - nHibernate 查询到等效的实体框架查询

> ID：11408280
> 
> 赞同：0
> 
> 时间：2012-07-10T07:10:10.623
> 
> 标签：entity-framework, fluent-nhibernate, entity-framework-4.1

由于部分信任问题，我们目前正在从我们的应用程序中删除 fluent nhibernate。我们正在使用他们的 fluent API 迁移到 Entity Framework 5.1RC。

我们的存储库中有以下方法，我试图找出是否可以使用实体框架编写相同的查询？我显然在寻找它尽可能高效。

```
 public PagedList<Topic> GetRecentTopics(int pageIndex, int pageSize, int amountToTake)
    {
        // Get a delayed row count
        var rowCount = Session.QueryOver<Topic>()
                        .Select(Projections.RowCount())
                        .Cacheable()
                        .FutureValue<int>();

        // Get the topics using an efficient query
        var results = Session.QueryOver<Topic>()                            
                        .OrderBy(x => x.CreateDate).Desc
                        .Skip((pageIndex - 1) * pageSize)
                        .Take(pageSize)
                        .Cacheable()
                        .Future<Topic>().ToList();

        // We might only want to display the top 100
        // but there might not be 100 topics
        var total = rowCount.Value;
        if (total > amountToTake)
        {
            total = amountToTake;
        }

        // Return a paged list
        return new PagedList<Topic>(results, pageIndex, pageSize, total);
    } 
```

非常感谢任何帮助/指针。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T12:13:15.727

AFAIK EF 没有查询批处理[，请参见此处](https://stackoverflow.com/a/6087746/671619)。你可以[自己实现它](http://blog.cincura.net/232079-multiquery-more-queries-in-one-batch-in-entity-framework-using-linq/)，这很棘手。

或者，您可以让 NH 在中等信任下工作，[这里](http://puredotnetcoder.blogspot.de/2011/09/update-nhibernate-32-and-medium-trust.html)和[这里](http://puredotnetcoder.blogspot.de/2011/08/nhibernate-32-and-medium-trust.html)的信息。

在[此链接](http://blog.yeticode.co.uk/2010/03/running-nhibernate-in-medium-trust/)的评论中，有一个指向在中等信任下工作的 NHibernate dll 的链接（我自己没有测试过）。

# jsp - 检查数据库值，当用户与会话没有交互时

> ID：11408282
> 
> 赞同：4
> 
> 时间：2012-07-10T07:10:19.530
> 
> 标签：jsp, session, servlets, invalidation

我已经编写了一个 test.jsp、web.xml 和会话监听器。对于会话超时，我正在使用功能。我`HttpSessionListener`的会话在 1 分钟后失效，当时没有用户与会话交互。使用技术：JSP,Servlet JSP

```
<%@ page import="java.util.List"%>
<%@ page import="java.util.ArrayList"%>
<html>
    <head>
        <title>Servlet Session Listener example</title>
    </head>
    <body>
        <h2>Add User Screen</h2>

        <span style="float: right"> 
            <a href="DestroySession.jsp">Destroy this session</a>
             </span>

        <form method="post" action="AddUser.jsp">
            <h3>Enter Username to Add in List</h3>
            <input type="text" name="user"/>
            <input type="submit" value="Add User"/>
        </form>

    <%
        List<String> users = (List<String>)session.getAttribute("users");
        for(int i=0; null!=users && i < users.size(); i++) {
            out.println("<br/>" + users.get(i));
        }
    %>
    </body>
</html> 
```

Java 代码

```
import javax.servlet.http.HttpSessionEvent;
import javax.servlet.http.HttpSessionListener;

public class SessionListener implements HttpSessionListener {
    private int sessionCount = 0;

    public void sessionCreated(HttpSessionEvent event) {
        synchronized (this) {
            sessionCount++;
        }

        System.out.println("Session Created: " + event.getSession().getId());
        System.out.println("Total Sessions: " + sessionCount);
    }

    public void sessionDestroyed(HttpSessionEvent event) {
        synchronized (this) {
            sessionCount--;
        }
        System.out.println("Session Destroyed: " + event.getSession().getId());
        System.out.println("Total Sessions: " + sessionCount);
    }
} 
```

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app>
    <display-name>SessionListener</display-name>
    <distributable/>
    <listener>
        <listener-class>SessionListener</listener-class>
    </listener>
    <session-config>
        <session-timeout>1</session-timeout>
    </session-config>
</web-app> 
```

我的要求是：当用户与会话没有交互 1 分钟时，我想根据某些数据库值使会话无效。如果数据库值为 false，则不应使会话无效。如果数据库值为真，则会话应无效。但是 1 分钟后（当用户与会话没有交互时），SessionListener 类的 sessionDestroyed 函数被自动调用，我无法检查数据库值。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T07:19:25.290

你应该试试这个：

*   将会话添加到自定义管理线程
*   自定义管理线程应定期执行以下步骤。
    *   让自定义管理线程读取 DB 值
    *   如果在 DB 中禁用了无效会话，则让管理线程使用 增加会话超时值`setMaxInactiveInterval`。价值`-1` 意味着`Never Invalidate.`
    *   如果在 DB 中启用了无效会话，则让管理线程通过在 中设置较小的值来减少会话超时值`setMaxInactiveInterval`。

# c# - 有没有更好的方法来定位字典中的子字符串

> ID：11408287
> 
> 赞同：0
> 
> 时间：2012-07-10T07:10:48.367
> 
> 标签：c#, string, comparison

我目前正在创建一个文件扫描器，它根据特定标准枚举文件。扫描选项之一是排除大于预定义大小的文件。此规则可应用于单个目录及其子目录。

例如，用户可以指定一条规则以仅从 C:\Users{USERNAME}\Documents 获取小于 1GB 的文件。因此，如果用户决定扫描文档文件夹中的目录，可以说：`C:\Users\{USERNAME}\Documents\SOMEDIR1\SOMEDIR2\`指定的规则应应用于该目录，并且仅应填充大小小于或等于 1GB 的文件。

目前，我将规则存储在字典中，该字典定义为`Dictionary<string, long> dSizeLimit;`键是完整目录路径，值是规则的文件大小（以字节为单位）。

目前我正在使用以下方法来确定是否应从填充的文件列表中省略文件：

```
public void SearchDirectory(DirectoryInfo dir_info, List<string> file_list, ref long size, ScanOptions Opt = null)
        {
            if (Opt == null)
                Opt = DefaultOption;
            try
            {
                foreach (DirectoryInfo subdir_info in dir_info.GetDirectories())
                {
                    SearchDirectory(subdir_info, file_list, ref size, Opt);
                }
            }
            catch(Exception ex)
            {
                Console.WriteLine("Failed to enumerate directory: {0}", dir_info.FullName);
                Console.WriteLine("Exception: {0}", ex.Message);
            }

            try
            {

                foreach (FileInfo file_info in dir_info.GetFiles())
                {
                    //Here I iterate over all the size rules to determine if the current file should be added to the file_list 
                    foreach (KeyValuePair<string,long> entry in Opt.dSizeLimit)
                    {
                        if(string.Compare(entry.Key, 0, file_info.FullName, 0, entry.Key.Length, true)==0)
                        {
                            if (entry.Value > 0 && file_info.Length > entry.Value)
                                continue;
                        }
                    }

                    file_list.Add(file_info.FullName);
                    size += file_info.Length;
                }
            }
            catch(Exception ex)
            {
                Console.WriteLine("Failed to enumerate directory: {0}", dir_info.FullName);
                Console.WriteLine("Exception: {0}", ex.Message);
            }
        } 
```

ScanOptions 是一个包含所有扫描规则的结构，包括大小规则。从代码中可以看出，我目前遍历所有规则以确定当前文件是否应该包含在文件列表中。这可能是致命的，因为`dSizeLimit`字典中的条目数量不受限制，因为用户可以添加他想要的任何规则。

那么有没有更好的方法来处理这种查找？

PS 请注意，我的目标框架应该是 .NET 2.0，所以 LINQ 和任何其他非 2.0 友好的命名空间都是不可能的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T07:36:14.873

如果规则是基于目录应用的，那么您可以在迭代文件之前确定最严格的规则，如下所示：

```
long maxSize = long.MaxValue;
foreach (KeyValuePair<string,long> entry in Opt.dSizeLimit) {
    if(dir_info.FullName.StartsWith(entry.Key)) {
        maxSize = Math.Min(maxSize, entry.Value);
    }
}
// now iterate on the files, if no rules were present, file size
// should always be < long.MaxValue 
```

没有理由（如果我理解正确的话）每次都为同一文件夹中的文件重新扫描规则，所以这应该可以节省很多操作。

为了避免对字典进行迭代，您可以让 options 结构只有一个值，然后当您迭代文件夹时，您会使用适当的值构造结构，如下所示（伪代码，只是为了给您一个想法）：

```
foreach (DirectoryInfo subdir_info in dir_info.GetDirectories()) {
    ScanOptions optForSubFolder = Opt;
    if (/* more specific rules for given subfolder */) {
        optForSubFolder.SizeLimit = /* value for subfolder */;
    }
    SearchDirectory(subdir_info, file_list, ref size, optForSubFolder);
} 
```

# html - Firefox 中的 HTTP Content-Type video/mp4 警告

> ID：11408289
> 
> 赞同：6
> 
> 时间：2012-07-10T07:11:02.787
> 
> 标签：html, firefox, html5-video

我有一个嵌入网页的视频。

我的 htaccess：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ app.php [QSA,L]
    AddType video/ogg .ogv
    AddType video/mp4 .mp4
    AddType video/webm .webm
</IfModule> 
```

HTML：

```
<video autoplay="false" width="586px" height="440" src="...mp4"></video> 
```

我使用 mediaelement.js 播放器：

```
$('video').mediaelementplayer(); 
```

在 Firefox 中，视频不会预加载，也不会显示预览图像。玩家只是黑色。在萤火虫中，我收到此警告：

> 不支持 HTTP“内容类型”“视频/mp4”。下载媒体失败...

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-10T07:26:51.467

Firefox 支持 Ogg Theora 和 WebM 视频。它不支持 MP4 (H.264) 视频。

[http://diveintohtml5.info/video.html#what-works](http://diveintohtml5.info/video.html#what-works)

# batch-file - 使用 Windows 批处理文件，如何解析文件并将部分输出到一个文件，部分输出到另一个文件？

> ID：11408295
> 
> 赞同：1
> 
> 时间：2012-07-10T07:11:17.697
> 
> 标签：batch-file

我是一名 Perl 程序员，但我需要为特定任务创建一个 Windows 批处理文件。

该脚本需要逐行读取输入文件，并复制到输出文件。然而，在完成的过程中，它需要切换输出文件。

对于通常读取输入文件并输出到文件，Jeb 的以下文章中的解决方案似乎效果最好。（当输入数据有奇怪的字符或长行时，其他解决方案效果不佳）[批处理文件：如何读取文件？](https://stackoverflow.com/questions/206114/dos-batch-files-how-to-read-a-file/4531090#4531090)

但是，在中途更改输出文件的情况下，我无法让它工作。问题可能与 DelayedExpansion 的工作方式有关。

当我运行以下脚本时，最后的 outfile 仍然是 a.txt，并且没有设置 new_variable。

```
@echo off
del /f/q a.txt
del /f/q b.txt
del /f/q c.txt
del /f/q out.txt

set outfile=a.txt
SETLOCAL DisableDelayedExpansion
FOR /F "usebackq delims=" %%a in (`"findstr /n ^^ in.txt"`) do (
    set "var=%%a"
    SETLOCAL EnableDelayedExpansion
    set "var=!var:*:=!"
    IF "!%var!" == "/************************** PLUGINS SECTION *************************/" (
   set outfile=b.txt
   set new_variable=this
   echo "FOUND! Value of outfile should change to b.txt"
  )
  echo( !outfile! !var! >>!outfile!
    ENDLOCAL
)

echo Outfile:      %outfile%
echo New Variable: %new_variable% 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T07:23:15.887

在 endlocal 之后，您会丢失变量更改。
因此，您需要将值保存在`endlocal`障碍上。
这里最简单的方法是使用`FOR-Endlocal`技术。

```
 SETLOCAL DisableDelayedExpansion
 FOR /F "usebackq delims=" %%a in (`"findstr /n ^^ in.txt"`) do (
    set "var=%%a"
    SETLOCAL EnableDelayedExpansion
    set "var=!var:*:=!"
    if "!var!" == "****" (
      set outfile=b.txt
      set new_variable=this
    )
  FOR /F "tokens=1,2" %%O in (!outfile! !new_variable!) DO
  (
    ENDLOCAL
    set "outfile=%%O"
    set new_variable=%%P
  )
) 
```

这是因为 FOR 循环的 %%O 和 %%P 参数不受`ENDLOCAL`.
这两个值都*缓存*在屏障上。

# css - 带有渐变的 div 背景和带有 .less 的过渡

> ID：11408297
> 
> 赞同：1
> 
> 时间：2012-07-10T07:11:20.853
> 
> 标签：css, less

我有一个带有渐变的 div，我想在用户浏览它时应用一个过渡，我已经创建了一个过渡，但是渐变不起作用，这是我的带有 styles.less 的 css 代码

```
#navigation li
{
    margin: 0;
    width:126px;
    height:40px;
    padding-left:0px;
    padding-right:0px;
    list-style:none;
    float:left;

    /* Mozilla: */
    background: -moz-linear-gradient(top, #c9c9c9, #7b7b7b);
    /* Chrome, Safari:*/
    background: -webkit-gradient(linear,
                left top, left bottom, from(#c9c9c9), to(#7b7b7b));
    /* MSIE */
    filter: progid:DXImageTransform.Microsoft.Gradient(
                StartColorStr='#c9c9c9', EndColorStr='#7b7b7b', GradientType=0);
    .transition_bg;
}

#navigation li:hover{

    background: -moz-linear-gradient(top, #696969, #404040);
    /* Chrome, Safari:*/
    background: -webkit-gradient(linear,
                left top, left bottom, from(#696969), to(#404040));
    /* MSIE */
    filter: progid:DXImageTransform.Microsoft.Gradient(
                StartColorStr='#696969', EndColorStr='#404040', GradientType=0);
}

.transition_bg{
    transition-property: background; /*standard*/
    transition-duration: 0.4s;

    -webkit-transition-property: background; /*Safari e Chrome */
    -webkit-transition-duration: 0.4s;

    -o-transition-property: background;      /*Opera*/
    -o-transition-duration: 0.4s;

    -moz-transition-property: background;    /*Firefox*/
    -moz-transition-duration: 0.4s; 
} 
```

这是我的html

```
<div id="navigation">
            <ul>
                <li><a href="index.php" id="index_btn">HOME</a></li>
                <li><a href="#" id="">AZIENDA</a></li>
                <li><a href="#" id="">PRODOTTI</a></li>
                <li><a href="#" id="">PARTNER</a></li>
                <li><a href="#" id="">NEWS</a></li>
                <li><a href="#" id="">CONTATTI</a></li>
            </ul>
        </div> 
```

# javascript - 根据第一个下拉列表中的选定值填充第二个下拉列表

> ID：11408298
> 
> 赞同：0
> 
> 时间：2012-07-10T07:11:23.460
> 
> 标签：javascript, ajax, jsp

我需要通过执行 Mysql 查询来填充第二个组合，该查询具有从我的 jsp 页面中的第一个组合中选择的参数。我认为 AJAX 会起作用，但我没有找到 AJAX 的想法和正确语法来通过执行查询来填充第二个组合。

提前致谢。

现在，我发现正确的语法 ti 编写了一个 Ajax 调用，如下所示：

```
 function newXMLHttpRequest()
     { 
        var req = null; 
        try {  
            // Firefox, Opera 8.0+, Safari 
            req = new XMLHttpRequest();
        }
        catch (e) {
        // Internet Explorer 
            try {
                req = new ActiveXObject("Msxml2.XMLHTTP");
            }
            catch (e) {
                try {
                    req = new ActiveXObject("Microsoft.XMLHTTP");
                }
                catch (e) {
                    alert("Your browser does not support AJAX!");
                    return false;
                }
            }
        }

    return req;
}

 function updateCombo()
{
    var req = newXMLHttpRequest();
    req.onreadystatechange = function() 
     {
       if(req.readyState == 4)
       {
         if(req.status == 200)
         {
              var xmlDoc=req.responseXML;
          //Fill your combo with data
         } 
         else 
         {          

         } 
       } 
      };
    req.open("GET","myURL", false ); 
    req.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
    req.send();
    return status;
} 
```

谢谢大家。

# c++ - 使用 Visual Studio 2010 Ultimate 制作自定义操作 dll

> ID：11408304
> 
> 赞同：0
> 
> 时间：2012-07-10T07:11:38.817
> 
> 标签：c++, visual-studio-2010, dll, wix, wix3.5

我正在开发一个需要一些 customactiondll 的安装程序，我知道我需要一个可以转换为 .dll 的 cpp 文件。

我一直在阅读互联网上与 VS 6.0 相关的帖子，我正在使用这个 VS 2010 Ultimate，我正在运行我编写了 .cpp 文件的 x64 机器，请帮助我逐步创建 .dll在 VS 2010 终极版中，我也安装了 Votive。

我没有使用任何 VS 来创建我的安装程序，但是我使用 Notepad ++ 进行 XML 编码和命令行来编译我的代码。

请逐步帮助我，以便我可以成功创建.dll

暂时可以考虑一下[Wix 教程 书中没有的内容](http://wix.tramontana.co.hu/tutorial/events-and-actions/whats-not-in-the-book)！

我正在使用可以在[这里](http://wix.tramontana.co.hu/tutorial/events-and-actions/whats-not-in-the-book)下载的 CASAMPLE.dll ！

请帮忙谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T11:59:06.207

在 VS2010 中创建一个 C++ 自定义操作项目并创建您需要的功能，并在构建它时在 bin 文件夹中创建您的 DLL 文件..:)

# grails - 如何在grails中定义关联关系

> ID：11408307
> 
> 赞同：0
> 
> 时间：2012-07-10T07:11:44.380
> 
> 标签：grails, grails-orm, grails-2.0

**更新**

我有一个域类如下

```
class Training{
  // has one createdBy object references User domain and 
  // has one course object references Course domain
  // has One Trainer1 and Trainer2 objects refernces Trainer Object.
}

class Trainer{
   String name
  //can have many trainings.
  //If Trainer gets deleted, the trainings of him must be deleted
}
Class User{
  String name
  // can have many trainings. 
}

class Course{
  String name
   //If Course gets deleted, Trainings of this course must be deleted
   // can have many trainings.
} 
```

我有一个培训创建页面，我必须在其中填充已保存的课程、用户、Trainer1 和 Trainer2。我没有在创建培训时保存它们。

那么，如何在grails中指定关系

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T07:41:55.910

我在您的初始设计中看到了一些小缺陷：即，如果删除用户，为什么要删除培训，而培训显然会与许多用户联系在一起。没有培训师可以进行培训吗？反之亦然？

我会从这样的事情开始：

```
Class Training {
    static hasMany = [users: User, trainers: Trainer]
    static belongsTo = Course
}

Class Trainer {
    String name
}

Class User {
   String name
}

Class Course {
    String name
    static hasMany = [trainings: Training]   
} 
```

编辑：我必须同意 Tomasz 的观点，你在没有自己寻找答案的情况下跳得太早了。Grails.org 也有很好的关于 GORM 的文档以及示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T07:31:51.227

你没有为自己寻找答案而付出任何努力。有很多基本示例和博客文章如何在 Grails 中映射关系。您应该从 GORM 的 Grails 文档开始 - Grails 的对象关系映射。你可以在[这里](http://grails.org/doc/latest/guide/GORM.html)找到它。

# sql-server - FK 从动态表中选择

> ID：11408310
> 
> 赞同：0
> 
> 时间：2012-07-10T07:12:15.410
> 
> 标签：sql-server, sql-server-2008

我在 C# 中有一个对象结构，我以类似于[此处](http://www.sqlteam.com/article/implementing-table-inheritance-in-sql-server)描述的模式将其持久化到 SQL Server 2008 。基本上我有一些状态，它们有不同的属性。有一个主状态表，它的 Id 是子类型表上的 FK，见附图（实现中有大量状态）。

现在，我想获取给定状态（已知 ID）的属性。例如，假设 ID 5 表示活动状态，我想在图中获取 prop1 和 prop2 的值。

我能想出的唯一方法是加入*所有*状态表（知道我只会从中得到一个匹配项）。有没有更好的方法来实现这一点？

![数据库表](../Images/7ade05d45817c0e716570dd00d499fea.png)

# javascript - 使用 jQuery 展开/折叠文本

> ID：11408311
> 
> 赞同：4
> 
> 时间：2012-07-10T07:12:15.447
> 
> 标签：javascript, jquery

我想根据固定的高度截断文本。当文本被截断时，使用“更多”链接扩展为文本。展开文本时，会使用“较少”链接来折叠文本。我把js写成这样：

```
$(document).ready(function () {
      // line height in 'px'
      var maxheight=218;
      var showText = "More";
      var hideText = "Less";

      $('.textContainer_Truncate').each(function () {
        var text = $(this);
        if (text.height() > maxheight){
            text.css({ 'overflow': 'hidden','height': maxheight + 'px' });

            var link = $('<a href="#">' + showText + '</a>');
            var linkDiv = $('<div></div>');
            linkDiv.append(link);
            $(this).after(linkDiv);

            link.click(function (event) {
              event.preventDefault();

              if (text.css('height') == 'auto') {
                  $(this).html(showText);
                  text.css('height', maxheight + 'px');
              } else {
                  $(this).html(hideText);
                  text.css('height', 'auto');
              }
            });
        }       
      });
  }); 
```

html代码是：

```
<div class="textContainer_Truncate">
  <p>content</p>
</div> 
```

我的问题是“更多”链接有效，但“更少”链接无效。也就是点击more的时候，文本被展开，但是点击less的时候不会返回。这里有什么问题？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T07:30:50.110

这只是一个小错误，这个：

```
if (text.css('height') == 'auto') { 
```

应该是这样的：

```
if (text.height() > maxheight) { 
```

[小提琴](http://jsfiddle.net/X3AyB/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T07:19:52.043

我相信你在看这个

[http://jsfiddle.net/rbUst/](http://jsfiddle.net/rbUst/)

```
$(".act").click(function() {
  var val = $(this).text();
  if (val == "More") {
    $("div").css('height', '200px');
    $(this).text("less");
  } else {
    $("div").css('height', '20');
    $(this).text("More");
  }
  return false;
});
```

```
div {
  background-color: #CCA;
  height: 20px;
  overflow: hidden;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<a href="" class="act">More</a> 
<div>This fskdljfl sflsdajfsadf
  <br />fsdafsdfsadfsdf dfjsadf slfkjsf</div>
```

以上是活生生的例子..

# wcf - iis7 wcf：在本地计算机上我得到 401 - 未经授权：由于凭据无效，访问被拒绝

> ID：11408318
> 
> 赞同：4
> 
> 时间：2012-07-10T07:12:35.743
> 
> 标签：wcf, service, iis-7

我是网络服务的新手，我有以下问题。我有一个 WCF 服务，它在 IIS 7.5 和 Windows 2008 R2 上以 Windows 身份验证模式运行。当我直接从 IIS 机器调用它时效果很好。但是当我尝试从本地计算机调用服务时，我收到以下错误：401 - 未经授权：由于凭据无效，访问被拒绝。

该服务在本地计算机上运行了几天，然后突然停止了（我不确定，但可能更改了某些配置）。

我直接从 IExplorer 调用服务：`http://serveriis/ssopension/service.svc`

网络配置：

```
 <?xml version="1.0" encoding="UTF-8"?>
<configuration>

  <connectionStrings configProtectionProvider="RsaProtectedConfigurationProvider">
    <EncryptedData Type="http://www.w3.org/2001/04/xmlenc#Element" xmlns="http://www.w3.org/2001/04/xmlenc#">
      <EncryptionMethod Algorithm="http://www.w3.org/2001/04/xmlenc#tripledes-cbc" />
      <KeyInfo xmlns="http://www.w3.org/2000/09/xmldsig#">
        <EncryptedKey xmlns="http://www.w3.org/2001/04/xmlenc#">
          <EncryptionMethod Algorithm="http://www.w3.org/2001/04/xmlenc#rsa-1_5" />
          <KeyInfo xmlns="http://www.w3.org/2000/09/xmldsig#">
            <KeyName>Rsa Key</KeyName>
          </KeyInfo>
          <CipherData>
            <CipherValue>O8jBoF9YUW3sZtSN+L/Xxhzss=</CipherValue>
          </CipherData>
        </EncryptedKey>
      </KeyInfo>
      <CipherData>
        <CipherValue>C+EeTszivHho8Ujk2oIQ==</CipherValue>
      </CipherData>
    </EncryptedData>
  </connectionStrings>

<system.web>
    <compilation targetFramework="4.0" />

    <authentication mode="Windows" />

    <pages controlRenderingCompatibilityVersion="3.5" clientIDMode="AutoID" />
  </system.web>

  <system.serviceModel>

    <bindings>
      <basicHttpBinding>
        <binding name="BasicHttpEndpointBinding">
          <security mode="TransportCredentialOnly">
            <transport clientCredentialType="Windows" />
          </security>
        </binding>
      </basicHttpBinding>
    </bindings>

    <services>
      <service behaviorConfiguration="SSO_Pension.ServiceBehavior" name="SSO_Pension.Service">
        <endpoint address="" binding="basicHttpBinding" bindingConfiguration="BasicHttpEndpointBinding" name="BasicHttpEndpoint" contract="SSO_Pension.IService">
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>

      </service>
    </services>

    <behaviors>
      <serviceBehaviors>
        <behavior name="SSO_Pension.ServiceBehavior">
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true" />
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="false" />
        </behavior>
      </serviceBehaviors>
    </behaviors>

    </system.serviceModel>

    <system.webServer>
        <defaultDocument>
            <files>
                <add value="Service.svc" />
            </files>
        </defaultDocument>
    </system.webServer>

</configuration> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T07:06:39.707

我在 [http://social.technet.microsoft.com/Forums/en-US/winserversecurity/thread/c9239a89-fbee-4adc-b72f-7a6a9648331f/上找到了解决方案](http://social.technet.microsoft.com/Forums/en-US/winserversecurity/thread/c9239a89-fbee-4adc-b72f-7a6a9648331f/)

> 不管这对谁有帮助，这救了我的命……
> 
> IIS 7 很难弄清楚为什么我得到 401 - 未经授权：由于凭据无效，访问被拒绝......直到我这样做......
> 
> 1.）打开iis并选择导致401的网站
> 
> 2.) 打开“IIS”标题下的“Authentication”属性
> 
> 3.) 点击“Windows Authentication”项，然后点击“Providers”
> 
> 4.) 对我来说，问题在于协商高于 NTLM。我假设在幕后进行了某种握手，但我从未真正通过身份验证。我把 NTLM 移到了最上面的位置，然后 BAM 修复了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T07:26:08.197

谢啦！

我一直在到处寻找这个，包括这两篇文章：

[http://blogs.msdn.com/b/distributedservices/archive/2009/11/10/wcf-calling-wcf-service-hosted-in-iis-on-the-same-machine-as-client-throws-身份验证错误.aspx](http://blogs.msdn.com/b/distributedservices/archive/2009/11/10/wcf-calling-wcf-service-hosted-in-iis-on-the-same-machine-as-client-throws-an-authentication-error.aspx)

[http://support.microsoft.com/default.aspx?scid=kb;EN-US;926642](http://support.microsoft.com/default.aspx?scid=kb;EN-US;926642)

这解决了我的问题。

# hadoop - HBase 按值排序

> ID：11408319
> 
> 赞同：3
> 
> 时间：2012-07-10T07:12:36.757
> 
> 标签：hadoop, cassandra, hbase, cloudera, hadoop-plugins

我正在使用 SingleColumnValueFilter、scan、getScanner 并从 hbase 表中检索值。结果值在 Id-vise 行中排序。但我希望结果在价值虎钳中进行排序。

例子：

```
Hbase Table:
RowId | col1:amount | col1:balance
  1         5000         1000
  2         3000         1500
  3         4000          500 
```

现在，当我在 Web UI（我自定义）中选择金额时。然后，Result 应该按数量进行排序。

```
Expected Result after chosen amount column:

RowId | **col1:amount** | col1:balance
  2         3000         1500
  3         4000          500
  1         5000         1000 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T15:43:13.897

如果您想明智地对事物进行排序 - 不幸的是，这不会在 HBase 中发生。HBase 按行键对数据进行排序，并且按字典顺序进行。

您需要做的是创建一个二级索引，其中 rowKey 包含该值。在您的情况下，该值是数字，因此您必须对数字进行零填充才能使字典排序正常工作。

以下是构建二级索引的方法：

```
Hbase Table:
RowId | col1:amount | col1:balance
  val000500         rowID         3
  val001000         rowID         1
  val001500         rodID         2 
```

当您获取二级索引时，它将返回原始数据的行 ID。使用该行 ID 从原始记录中获取其余数据。

# jasper-reports - iReport 中的子数据集

> ID：11408320
> 
> 赞同：2
> 
> 时间：2012-07-10T07:12:36.797
> 
> 标签：jasper-reports, ireport

我想在我的报告中使用多个查询。但是主报告只允许我一个主查询，但是，我找到了一种在我的报告中包含多个查询的方法，这是由*iReport*中的子数据集完成的。但是我无法在我的主报告中访问我的子数据集的字段。怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T12:18:56.200

要查看您的子数据集，您必须在图表、列表、表格等中使用它。

这是一个很好的解释：

[单个 jasper 文档中的多个查询](https://stackoverflow.com/questions/7482412/multiple-queries-in-a-single-jasper-document)

# spring - 使用 Spring MVC 在 Session 中存储和检索数据

> ID：11408324
> 
> 赞同：0
> 
> 时间：2012-07-10T07:12:45.107
> 
> 标签：spring, spring-mvc

想要在会话中保存用户信息，并希望使用 Spring MVC 3 从会话中取回用户信息。任何人都可以举个例子

但这是一个例外

org.springframework.web.HttpSessionRequiredException：需要会话属性“用户”-在会话中找不到

# google-chrome - 下载适用于 Linux 的旧版 Google Chrome

> ID：11408325
> 
> 赞同：38
> 
> 时间：2012-07-10T07:12:52.887
> 
> 标签：google-chrome

我正在寻找旧版本的 Google Chrome 稳定版。现在，Windows 的旧版本很容易获得，但我需要它用于 Linux，最好是 Debs 而不是 RPM。就版本而言，我更具体地寻找 17.0+ 版本。如中，17 之前的版本也是必需的，但包括 17 和 17 之后的版本是必须的。

我在哪里可以获得 Chrome 的稳定旧版本？

**注意：** 我们在这里需要 Chrome 而不是 Chromium。尽管 Chrome 来自 Chromium 项目，但您永远无法确定 Chrome 中对 Chromium 的代码进行了哪些添加/更改。所以我们需要的是 Chrome，而不是 Chromium。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2014-12-09T17:04:24.193

这是迄今为止我为基于 RPM 的系统的 google-chrome-stable 找到的最好的镜像。

[http://orion.lcg.ufrj.br/RPMS/myrpms/google/](http://orion.lcg.ufrj.br/RPMS/myrpms/google/)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-08-07T07:30:33.010

尝试使用“inurl:”选项搜索谷歌以找到非官方镜像：

**谷歌提示：** `inurl:/deb/pool/main/g/google-chrome-stable/`

镜子不时弹出并消失--不知道为什么，但似乎没有什么能与第 3 方镜子保持一致......也许这是一个法律问题，或者这只是一个让每个人都升级更好或更好的策略更差。这有点痛苦，我现在正在为清理 /var/cache/apt/archives 文件夹而自责。

您还可以从本地包缓存中谷歌搜索特定已知文件名的 deb 包，并通过其他文件获取其他镜像的一些命中——谷歌的网络下载为您提供了一个安装程序，文件名中没有版本号，但是完整的文件名显示在本地 apt 缓存中。使用本地 apt 缓存中的随机文件名将比从博客或具有有限版本历史的已知镜像中复制和粘贴示例名称提供更好的结果。

使用从不受信任的站点获取安装程序时在文件名搜索中弹出的[Gentoo 校验和，或使用清单提供的文件名来搜索您想要的版本。](http://sources.gentoo.org/cgi-bin/viewvc.cgi/gentoo-x86/www-client/google-chrome/Manifest?hideattic=0&view=log)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-04-28T06:19:43.670

[您可以从http://www.slimjet.com/chrome/google-chrome-old-version.php](http://www.slimjet.com/chrome/google-chrome-old-version.php)获取旧版 Chrome 。他们为 windows、linux 和 Mac 缓存了旧版本的 Chrome。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-07-23T12:07:55.773

确实，Neo 的答案（和评论）中的链接有一天会起作用，但现在有些已死，有些仅提供 v28 以来的版本。

目前，这个链接几乎包含了 Ubuntu 的所有旧 chrome 版本：

[http://google-chrome.en.uptodown.com/ubuntu/old](http://google-chrome.en.uptodown.com/ubuntu/old)

# pdf - PhantomJS：将 PDF 导出到标准输出

> ID：11408332
> 
> 赞同：19
> 
> 时间：2012-07-10T07:13:20.540
> 
> 标签：pdf, pipe, file-descriptor, phantomjs, io-redirection

有没有办法在不指定扩展名为 .pdf 的输出文件的情况下触发 PhantomJS 中的 PDF 导出功能？我们想用它`stdout`来输出 PDF。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-06-24T18:30:14.897

您可以直接输出到标准输出，而不需要临时文件。

`page.render('/dev/stdout', { format: 'pdf' });`

有关添加时间的历史记录，请参见[此处](https://github.com/ariya/phantomjs/pull/386)。

如果您想从标准输入获取 HTML 并将 PDF 输出到标准输出，[请参见此处](https://stackoverflow.com/a/17286691/137067)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-07-15T05:19:35.220

很抱歉回答太长了；我有一种感觉，我一生中需要参考这种方法几十次，所以我会写“一个答案来统治他们”。我将首先讨论一下文件、文件描述符、（命名的）管道和输出重定向，然后回答您的问题。

* * *

考虑这个简单的 C99 程序：

```
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char* argv[])
{

  if (argc < 2) {
    printf("Usage: %s file_name\n", argv[0]);
    return 1;
  }

  FILE* file = fopen(argv[1], "w");
  if (!file) {
    printf("No such file: %s\n", argv[1]);
    return 2;
  }

  fprintf(file, "some text...");

  fclose(file); 

  return 0;
} 
```

非常简单。它接受一个参数（文件名）并将一些文本打印到其中。再简单不过了。

* * *

`clang write_to_file.c -o write_to_file.o`用or编译它`gcc write_to_file.c -o write_to_file.o`。

现在，运行`./write_to_file.o some_file`（打印到`some_file`）。然后运行`cat some_file`。结果正如预期的那样`some text...`

现在让我们变得更花哨。输入`(./write_to_file.o /dev/stdout) > some_file`终端。我们要求程序写入其*标准输出*（而不是常规文件），然后我们将其重定向`stdout`到`some_file`（使用`> some_file`）。我们可以使用以下任何方法来实现这一点：

*   `(./write_to_file.o /dev/stdout) > some_file`，这意味着“使用`stdout`”

*   `(./write_to_file.o /dev/stderr) 2> some_file`，这意味着“使用`stderr`，并使用重定向它`2>`”

*   `(./write_to_file.o /dev/fd/2) 2> some_file`, 同上; `stderr`是默认分配给 Unix 进程的第三个文件描述符（在`stdin`和之后`stdout`）

*   `(./write_to_file.o /dev/fd/5) 5> some_file`，这意味着“使用你的第六个文件描述符，并将其重定向到`some_file`”

如果不清楚，我们使用的是 Unix 管道而不是实际文件（毕竟在 Unix 中一切都是文件）。我们可以用这个管道做各种花哨的事情：将其写入文件，或将其写入命名管道并在不同进程之间共享。

* * *

现在，让我们创建一个命名管道：

```
mkfifo my_pipe 
```

如果你`ls -l`现在输入，你会看到：

```
total 32
prw-r--r--  1 pooriaazimi  staff     0 Jul 15 09:12 my_pipe
-rw-r--r--  1 pooriaazimi  staff   336 Jul 15 08:29 write_to_file.c
-rwxr-xr-x  1 pooriaazimi  staff  8832 Jul 15 08:34 write_to_file.o 
```

注意第二行开头的**p 。**这意味着这`my_pipe`是一个（命名的）管道。

现在，让我们指定我们想要对管道做什么：

```
gzip -c < my_pipe > out.gz & 
```

这意味着：`gzip`我放入里面`my_pipe`并将结果写入`out.gz`. 最后`&`的 要求外壳在后台运行此命令。你会得到类似的东西`[1] 10449`，并且控制回到终端。

然后，只需将我们的 C 程序的输出重定向到这个管道：

```
(./write_to_file.o /dev/fd/5) 5> my_pipe 
```

或者

```
./write_to_file.o my_pipe 
```

你会得到

```
[1]+  Done                    gzip -c < my_pipe > out.gz 
```

这意味着`gzip`命令已经完成。

现在，做另一个`ls -l`：

```
total 40
prw-r--r--  1 pooriaazimi  staff     0 Jul 15 09:14 my_pipe
-rw-r--r--  1 pooriaazimi  staff    32 Jul 15 09:14 out.gz
-rw-r--r--  1 pooriaazimi  staff   336 Jul 15 08:29 write_to_file.c
-rwxr-xr-x  1 pooriaazimi  staff  8832 Jul 15 08:34 write_to_file.o 
```

我们已经成功`gzip`编辑了我们的文本！

执行`gzip -d out.gz`解压这个`gzip`ed 文件。它将被删除并`out`创建一个新文件 ( )。`cat out`得到我们：

```
some text... 
```

这是我们所期望的。

*别忘了用`rm my_pipe`!*

* * *

现在回到 PhantomJS。

这是一个简单的 PhantomJS 脚本（`render.coffee`用 CoffeeScript 编写），它接受两个参数：一个 URL 和一个文件名。它加载 URL，呈现它并将其写入给定的文件名：

```
system = require 'system'

renderUrlToFile = (url, file, callback) ->
  page = require('webpage').create()
  page.viewportSize = { width: 1024, height : 800 }
  page.settings.userAgent = 'Phantom.js bot'

  page.open url, (status) ->
    if status isnt 'success'
      console.log "Unable to render '#{url}'"
    else
      page.render file

    delete page
    callback url, file

url         = system.args[1]
file_name   = system.args[2]

console.log "Will render to #{file_name}"
renderUrlToFile "http://#{url}", file_name, (url, file) ->
  console.log "Rendered '#{url}' to '#{file}'"
  phantom.exit() 
```

现在`phantomjs render.coffee news.ycombinator.com hn.png`在终端中输入以将 Hacker News 的首页呈现到文件`hn.png`中。它按预期工作。也是如此`phantomjs render.coffee news.ycombinator.com hn.pdf`。

让我们重复我们之前对 C 程序所做的操作：

```
(phantomjs render.coffee news.ycombinator.com /dev/fd/5) 5> hn.pdf 
```

它不起作用...... :(为什么？因为，如[PhantomJS 的手册](http://code.google.com/p/phantomjs/wiki/Interface)所述：

> **渲染（文件名）**
> 
> 将网页渲染到图像缓冲区并将其保存为指定文件。
> 
> 目前，输出格式是根据文件扩展名自动设置的。支持的格式为 PNG、JPEG 和 PDF。

它失败了，仅仅是因为既不`/dev/fd/2`也不以等`/dev/stdout`结尾。`.PNG`

但不用担心，命名管道可以帮助您！

创建另一个命名管道，但这次使用扩展名`.pdf`：

```
mkfifo my_pipe.pdf 
```

现在，告诉它简单地`cat`输入到`hn.pdf`：

```
cat < my_pipe.pdf > hn.pdf & 
```

然后运行：

```
phantomjs render.coffee news.ycombinator.com my_pipe.pdf 
```

看美丽`hn.pdf`！

显然你想做一些更复杂的事情，只是`cat`输出，但我相信现在你应该做什么很清楚:)

* * *

## **TL;博士：**

1.  创建一个命名管道，使用“.pdf”文件扩展名（所以它会让 PhantomJS 误以为它是一个 PDF 文件）：

    ```
    mkfifo my_pipe.pdf 
    ```

2.  对文件的内容做任何你想做的事情，比如：

    ```
    cat < my_pipe.pdf > hn.pdf 
    ```

    这简直`cat`就是`hn.pdf`

3.  在 PhantomJS 中，渲染到这个文件/管道。

4.  稍后，您应该移除管道：

    ```
    rm my_pipe.pdf 
    ```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-07-16T15:58:16.747

正如 Niko 所指出的，您可以使用`renderBase64()`将网页呈现到图像缓冲区并将结果作为 base64 编码的字符串返回。
但目前这仅适用于 PNG、JPEG 和 GIF。

要将 phantomjs 脚本中的某些内容写入标准输出，只需使用文件系统 API。

我对图像使用这样的东西：

```
var base64image = page.renderBase64('PNG');
var fs = require("fs");
fs.write("/dev/stdout", base64image, "w"); 
```

我不知道 PDF 格式是否`renderBase64()`会出现在 phanthomjs 的未来版本中，但作为一种解决方法，这些方面的内容可能对您有用：

```
page.render(output);
var fs = require("fs");
var pdf = fs.read(output);
fs.write("/dev/stdout", pdf, "w");
fs.remove(output); 
```

`output`pdf文件的路径在哪里。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-15T09:07:24.607

我不知道它是否能解决您的问题，但您也可以检查`renderBase64()`添加到 PhantomJS 1.6 的新方法：[https ://github.com/ariya/phantomjs/blob/master/src/webpage.cpp#L623](https://github.com/ariya/phantomjs/blob/master/src/webpage.cpp#L623)

不幸的是，该功能尚未在 wiki 上记录：/

# c# - 如何通过不同的 .net(c#) 线程处理多个 SQL 事务

> ID：11408334
> 
> 赞同：3
> 
> 时间：2012-07-10T07:13:24.660
> 
> 标签：c#, .net, database, sqlbulkcopy, sqltransaction

我有以下方法在表中批量插入数据。首先，我的代码填充数据表中的数据，并使用 .net 的 SqlBulkCopy claas 将此数据插入相应的表中。

我要求数据应该插入所有表中，或者都不插入。为此，我使用了 .net 的 SqlTransaction 类。

场景是，多个线程同时执行下面的代码块。

```
 public void Import()
        {
            using (SqlConnection sqlConnection = new SqlConnection(connectionString))
            {

                SqlTransaction sqlTrans =null;
                try
                {
                    sqlConnection.Open();
                    sqlTrans = sqlConnection.BeginTransaction(IsolationLevel.Serializable)

                    SqlCommand cmd = sqlConnection.CreateCommand();
                    cmd.CommandText = "select top 1 null from lockTable with(xlock)";
                    cmd.CommandTimeout = 3600*3;
                    cmd.Transaction = sqlTrans;
                    SqlDataReader reader = cmd.ExecuteReader();

                    foreach (DataTable dt in DataTables)
                    {
                        ImportIntoDatabase(sqlConnection, dt, sqlTrans);
                    }

                    reader.Close();
                    sqlTrans.Commit();                    
                }
                catch (Exception ex)
                {
                    sqlTrans.Rollback();
                    throw ex;
                }
            }
        }

       private void ImportIntoDatabase(SqlConnection sqlConn, DataTable dt, SqlTransaction sqlTrans)
        {
            using (SqlBulkCopy bulkCopy = new SqlBulkCopy(sqlConn, SqlBulkCopyOptions.Default, sqlTrans))
            {
                bulkCopy.BulkCopyTimeout = dt.Rows.Count * 10;
                try
                {
                    bulkCopy.DestinationTableName = dt.TableName;                    
                    bulkCopy.WriteToServer(dt);
                }
                catch (Exception ex)
                {
                   throw ex;
                }
            }
        } 
```

为了处理这种并发，我在另一个表所在的数据库（批量插入表）中创建了一个虚拟表（名为“lockTable”的表）。我在 SqlTransaction 中的这个虚拟表上获得了排他锁，命令超时时间高达 3 小时。

问题：我收到以下异常

: 无法访问目标表 'Tbl1'（tbl1 是用于批量插入的表）

紧随其后的是另一个异常，同时在 catch 块中回滚事务

：执行活动时出错服务器无法恢复事务。描述：3a00000001。此会话中活动的事务已被另一个会话提交或中止。

任何人都可以帮助我解决代码的这种奇怪行为。我已经在互联网上搜索了很多关于这个问题的信息，但我没有发现任何对我有帮助的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T13:23:19.227

在导入中（DataTables 中的 DataTable dt）不会是线程安全的。

sqlConnection 已经有一个来自 Import 的活动读取器，因此无法在 ImportIntoDatabase 中使用连接。

Echo smp - 如果您要锁定表，那么为什么要使用多线程？

如果您想在 SQL 插入发生时构建输入，请使用异步方法，例如 SqlCommand.BeginExecuteReader。您可以在没有线程开销的情况下获得异步。并且 DataTables 相对较慢。我使用 TVP 和轻量级对象插入。插入性能的一个重要因素是索引碎片。如果可能按聚集索引的顺序插入顺序。循环是简单的构建输入，等待异步，运行异步。或者构建输入可以从队列中读取输入。SQL 插入到同一个表中通常不会并行运行得更快。我的经验是订购连续插入，插入之间没有时间间隔。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T10:02:44.553

我的问题解决了。

以下是我对导入方法所做的更改

```
public void Import()
        {
            using (SqlConnection sqlConnection = new SqlConnection(connectionString))
            {
                sqlConnection.Open();
                using (SqlTransaction sqlTrans = sqlConnection.BeginTransaction())
                {
                    try
                    {                       
                        SqlCommand cmd = sqlConnection.CreateCommand();
                        cmd.CommandText = "select top 1 null from lockTable with(xlock)";
                        cmd.CommandTimeout = LOCK_TIME_OUT;
                        cmd.Transaction = sqlTrans;
                        SqlDataReader reader = cmd.ExecuteReader();

                        foreach (DataTable dt in DataTables)
                        {
                            ImportIntoDatabase(sqlConnection, dt, sqlTrans);                            
                        }

                        reader.Close();
                        sqlTrans.Commit();                        
                    }
                    catch (Exception ex)
                    {
                        sqlTrans.Rollback();
                        throw ex;
                    }
                }
                sqlConnection.Close();
            }
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T07:55:28.133

如果多个线程可以访问“导入”方法，那么您不应该锁定该方法的内容吗？

我不认为你需要一个虚拟表，你只需要锁定上面的两种方法。

我还要提到你应该加入所有线程，这样你就可以知道它们何时完成。

# xpath - Extracting value from select element in HTML using XPath Query in JMeter

> ID：11408338
> 
> 赞同：4
> 
> 时间：2012-07-10T07:13:30.753
> 
> 标签：xpath, automated-tests, jmeter, load-testing

I want to extract the first value which has the property `selected = "selected"` using XPath extractor. But it doesn't seem to work for me.

The html which i'm extracting the value from is:

```
< select id="ddLocation" name="ddLocation" class="DDlocation" size="1"      onchange="jsf.util.chain(this,event,'onLocationChange();,'mojarra.ab(this,event,\'valueChange\',\'@this\',0)')"> <br>
    < option value="43" selected="selected">Pune</option> <br>
    < option value="44">Agra< /option> <br>
    < option value="45">Guntur< /option> <br>
    < option value="46">Kochi< /option> <br>
    < option value="73">Kothrud< /option> <br>
    < option value="153">Ratnagiri< /option> <br>
    < option value="156">Baner< /option> 
```

My XPath query is:

```
//select[@id="ddLocation"]/option[1]/@value 
```

Is it wrong?
Can anyone suggest me any better / right approach please?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T07:18:20.407

您的 xml 格式不正确

它在选项前面有很多空格，并且选择最后没有关闭。

```
<select id="ddLocation" name="ddLocation" class="DDlocation" size="1" onchange="jsf.util.chain(this,event,'onLocationChange();,'mojarra.ab(this,event,\'valueChange\',\'@this\',0)')">
    <option value="43" selected="selected">Pune </option>
    <option value="44">Agra</option>
    <option value="45">Guntur</option>
    <option value="46">Kochi</option>
    <option value="73">Kothrud</option>
    <option value="153">Ratnagiri</option>
    <option value="156">Baner</option>
</select> 
```

最后，您的 XPATH 将按预期工作。

```
//select[@id="ddLocation"]/option[1]/@value 
```

它给出的输出为**43**

## 编辑：

如果你在 XPATH 下使用，它会根据属性的位置给出结果`selected=selected`

```
//select[@id='ddLocation']/option[@selected='selected']/@value 
```

我没有使用 JMeter 进行测试，但正在检查 XMLSPY 上的 XPATH。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T10:27:34.777

由于您使用 XPath Extractor 来解析 HTML（不是 XML！..）响应，因此请确保选中**Use Tidy（容错解析器）**选项（在[XPath Extractor 的控制面板](http://jmeter.apache.org/usermanual/component_reference.html#XPath_Extractor)中）。

并使用下面 Siva 的答案中更精细的 xpath 查询。

# javascript - Valum's Ajax file uploader - bind to all elements of a given class

> ID：11408342
> 
> 赞同：3
> 
> 时间：2012-07-10T07:13:40.790
> 
> 标签：javascript, jquery, ajax

I'm trying to use Valum's file upload script ( [http://valums.com/ajax-upload/](http://valums.com/ajax-upload/) ) to allow the creation of links that allow file uploads.

I'm using the jQuery library.

It's simple to get one link on a page to work using the standard documentation, but now I want to be able to catch all links of a given class rather than statically assigning to a given element.

Futhermore my site uses Ajax pageloads so I need to be able to somehow assign the uploader to new Ajax loaded content.

The envisaged use is to allow creating a link like this in an Ajax loaded page and have it trigger the uploader:

```
<a href="#" class="uploader">Upload a file</a> 
```

My first thought is to use the jQuery live() method to try bind the class, but I can't find a suitable event to trigger on.

Has anybody had experience with this sort of issue?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T18:12:51.173

`<input type="file">`不，不幸的是，这并不容易。由于一些安全问题，IE（甚至是 IE9！）只是不允许您使用“摆弄”这个元素来汇总表单 - 当人为地在其上引发“单击”、“更改”或任何其他事件时。

所以这个插件的工作方式不同。不是创建一个事件处理程序来“重新路由”用户单击到某个动态创建的文件输入元素，而是围绕作为其目标的链接创建包装器结构 - 并且文件输入就插入那里，隐藏得足以让用户看不到它 - 但足以让浏览器注册点击它（查看源代码中的[此方法和](https://github.com/valums/file-uploader/blob/master/client/js/button.js#L45)[本文](http://www.shauninman.com/archive/2007/09/10/styling_file_inputs_with_css_and_the_dom)以获取详细信息）。

底线是，你不能在这里使用事件处理委托：唯一明智的方法是用该插件包装新创建的元素。

# iphone - 如何查找元素是否存在于 TBXML 中？

> ID：11408352
> 
> 赞同：-2
> 
> 时间：2012-07-10T07:14:21.490
> 
> 标签：iphone, tbxml

在我的`XML`，我需要找到元素标签是否存在或不使用`TBXML`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T07:25:14.647

在此处输入代码您将检查元素是否不为零而不是它存在.. as

```
TBXMLElement *rootElement = [xml rootXMLElement];

TBXMLElement *yourTag = [TBXML childElementNamed:@"YourTagName" parentElement:rootElement];
if(yourTag)
   NSLog(@"This element exists");
else
   NSLog(@"This element does not exist"); 
```

# jsp - JSP中的解密

> ID：11408353
> 
> 赞同：1
> 
> 时间：2012-07-10T07:14:26.610
> 
> 标签：jsp, oracle10g, encryption

如何（使用 JavaServerPages）解密使用 PL/SQL 加密的数据

```
dbms_obfuscation_toolkit.DESEncrypt 
```

钥匙是已知的。我是 JSP 的新手，所以请解释一下你的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T07:26:11.870

这种加密方法`dbms_obfuscation_toolkit.DESEncrypt`允许您拥有密码，或者您只说它是 8 个字符的倍数的字符串。所以下面我编写了一个示例 JSP 页面，它向你展示了一个字符串是加密和解密的..

**先决条件：**此代码使用库 org.apache.commons.codec.binary，下载 org.apache.commons.codec.binary 1.5 二进制文件并将其放在 lib 文件夹中。

```
<%@ page import="java.io.*" %>
<%@ page import="java.security.*" %>
<%@ page import="javax.crypto.*" %>
<%@ page import="javax.crypto.spec.*" %>
<%@ page import="java.lang.*" %>
<%@ page import="org.apache.commons.codec.binary.*" %>

    <HTML>
    <HEAD>
    <TITLE> Cheers! </TITLE>
    </HEAD>
    <BODY>

    <%
        String algorithm1 = "DES";//magical mystery constant
        String algorithm2 = "DES/CBC/NoPadding";//magical mystery constant
        IvParameterSpec iv = new IvParameterSpec( new byte [] { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 } );//magical mystery constant
        Cipher cipher;
        SecretKey key;
        String k="12345abc"; //Just a random pick for testing
        key = new SecretKeySpec( k.getBytes("UTF-8"), algorithm1 );
        cipher = Cipher.getInstance( algorithm2 );

        String str="test4abc"; //Test String, 8 characters

        cipher.init( Cipher.ENCRYPT_MODE, key, iv ); //normally you could leave out the IvParameterSpec argument, but not with Oracle

        byte[] bytes=str.getBytes("UTF-8");

        byte[] encrypted = cipher.doFinal( bytes );

        String encoded = new String( Hex.encodeHex( encrypted ) );
        out.println( "Encrypted/Encoded: \"" + encoded + "\"" );

        cipher.init( Cipher.DECRYPT_MODE, key, iv );    

        //byte [] decoded = org.apache.commons.codec.binary.Hex.decodeHex( encoded.toCharArray( ) );
        byte [] decoded = Hex.decodeHex( encoded.toCharArray( ) );

        String decrypted = new String (cipher.doFinal( decoded ));
        out.println("DECRYPTED: \"" + decrypted + "\"" );
    }

    %>  
    </BODY>
    </HTML> 
```

这应该可以解决您的问题。干杯!

# android - 如何在 Android ICS 样式对话框中自定义行

> ID：11408355
> 
> 赞同：4
> 
> 时间：2012-07-10T07:14:30.930
> 
> 标签：android, dialog, styles

如何设置对话框标题和内容之间的蓝色分隔线（见截图）？

我更喜欢通过 xml 来实现，但如有必要，我将采用编程解决方案。

我查看了android-15 的默认styles.xml 和themes.xml，但我什么也找不到。

![标准 Android 对话框](../Images/d4e7386321d926d43b5f11aa584555be.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T07:32:46.787

如果您使用的是 ActionBarSherlock，您可以通过查看 abs_dialog_title_holo.xml 来检查它。在那里你会看到蓝线是一个通过视图定义的分隔符：

```
<View android:id="@+id/abs__titleDivider"
        android:layout_width="fill_parent"
        android:layout_height="2dip"
        android:background="@color/abs__holo_blue_light" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T07:30:49.673

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:layout_width="match_parent"
        android:layout_height="match_parent"
    android:orientation="vertical"
    android:fitsSystemWindows="true">
    <TextView android:id="@android:id/title" style="?android:attr/windowTitleStyle"
        android:layout_width="match_parent"
        android:layout_height="30dp"
        android:paddingLeft="16dip"
        android:paddingRight="16dip"
        android:gravity="center_vertical|left" 
        android:text="Dialog"
        android:textColor="@Color/blue"/>
    <View android:id="@+id/titleDivider"
            android:layout_width="match_parent"
            android:layout_height="2dip"
            android:background="@Color/blue" />
    <TextView android:id="@android:id/title"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:paddingLeft="16dip"
        android:paddingRight="16dip"
        android:gravity="center_vertical|left"
        android:textColor="@android:color/white" 
        android:text="Your Text"/>
</LinearLayout> 
```

将此 xml 设置为类的内容，并在活动下方的清单文件中添加以下行：

```
 android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen" 
```

# r - Chi-squared goodness of fit test in R

> ID：11408357
> 
> 赞同：13
> 
> 时间：2012-07-10T07:14:50.550
> 
> 标签：r, statistics, chi-squared, goodness-of-fit

I have a vector of observed values and also a vector of values calculated with model:

```
actual <- c(1411,439,214,100,62,38,29,64)
expected <- c(1425.3,399.5,201.6,116.9,72.2,46.3,30.4,64.8) 
```

Now I'm using the Chi-squared goodness of fit test to see how well my model performs. I wrote the following:

```
chisq.test(expected,actual) 
```

but it doesn't work. Can you help me with this?

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-10T08:25:11.347

X^2 = 10.2 在 7 个自由度会给你 ap ~ 0.18 。

```
> 1-pchisq(10.2, df = 7)
[1] 0.1775201 
```

您应该在参数下传递预期值`p`。确保将值缩放为总和为 1。

```
> chisq.test(actual, p = expected/sum(expected))

    Chi-squared test for given probabilities

data:  actual 
X-squared = 10.2581, df = 7, p-value = 0.1744 
```

这与 X^2 测试正在做什么有关。你给函数一个模型 ( ) 并问 - 我的数据来自“生成”的人口的`expected`可能性有多大？`observed``expected`

# jquery - Jquery with HTTPS

> ID：11408364
> 
> 赞同：3
> 
> 时间：2012-07-10T07:15:22.117
> 
> 标签：jquery, http, https

When I run my code on HTTP Internet Explorer browser it works fine. But when I try to run the same code on HTTPS I do not get result as expected .

This is my code :

```
<!DOCTYPE html>
<html>
<head>
    <script src="js/jquery-1.4.2.min.js"></script>
    <script type="text/javascript">
    $(document).ready(function(){       
        $("#submit").click(function(event) {        
        alert("here");              
        $.post('process.php', {name:'test1',email:'test.com'}, function(data)
        {
            $('#results').html(data);
            alert(data);
        });
      });
    });
    </script>

</head>
<body>
<form name="myform" id="myform" action="" method="POST">
    <label for="name" id="name_label">Name</label>
    <input type="text" name="name" id="name" size="30" value=""/>
    <br>
    <label for="email" id="email_label">Email</label>
    <input type="text" name="email" id="email" size="30" value=""/>
    <br>
    <input type="button" name="submit" id="submit" value="Submit">
</form>
<div id="results"><div>
</body>
</html> 
```

I do get an alert box saying HERE along with an Ok button. but the problem is when I click on that OK button I do not get anything. Ideally I should be getting another alert box.

Could please help me on this

Thanks in advance

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T11:40:03.620

我找到了答案。

```
The solution is to  include an header file 
```

header("内容类型: text/html; charset=ISO-8859-1");

# c++ - Replacing dll driver and its integrity

> ID：11408369
> 
> 赞同：0
> 
> 时间：2012-07-10T07:15:51.110
> 
> 标签：c++, winapi, dll, driver, biometrics

I developed testing dll driver for Windows Biometric Framework. This driver takes care of storing fingerprint information.

WinBio uses 3 types of driver - engine,storage and sensor. These were installed with biometric sensor.

I'd like to replace storage adapter with my own. So I simply copyied my implementation to corresponding folder and changed value in registry to use my dll. But when I test my application I get error at Opening Session that says

> The adapter binary did not pass its integrity check

What exactly do I need to make it work with my application?

Thanks in advance

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T07:22:36.760

您将需要对插件驱动程序进行签名 - 为了进行测试，您可以使用使用 WDK 工具创建的测试证书。可以在[Windows 生物识别框架：代码签名指南](http://msdn.microsoft.com/en-us/library/windows/hardware/gg463093.aspx)中找到详细信息。

# ruby-on-rails - How to update Twitter status with image in Rails application?

> ID：11408372
> 
> 赞同：0
> 
> 时间：2012-07-10T07:16:02.217
> 
> 标签：ruby-on-rails

I have been trying to use twitter api `https://upload.twitter.com/1/statuses/update_with_media.json` to post tweet along with image (with OAuth). But i am continuously facing issues with uploading image for the past 3 days.

I have posted my question in StackOverflow [here](https://stackoverflow.com/questions/11390253/uploading-image-with-status-to-twitter-using-rails/11395955#11395955). But cannot able to find a solution.

Do i have to use anyother method to achieve this?

# ios - Using Library at Xcode

> ID：11408374
> 
> 赞同：3
> 
> 时间：2012-07-10T07:16:06.950
> 
> 标签：ios, xcode

I had download Xenofex-MultiColumnTableViewForiOS-0b3fa88 library and plan to use it in my iOS project.

May i know what is step to import and link this library to my project? Just drag and drop the unzipped folder to my project?

I had drag the needed file to my project and try to run it.

The compiler prompt me error below Undefined symbols for architecture i386: "_OBJC_METACLASS_$_CALayer", referenced from: _OBJC_METACLASS_$_EWHeaderHighlightLayer in EWHeaderHighlightLayer.o "_OBJC_CLASS_$_CALayer", referenced from: _OBJC_CLASS_$_EWHeaderHighlightLayer in EWHeaderHighlightLayer.o objc-class-ref in EWMultiColumnTableView.o "_OBJC_CLASS_$_CATransaction", referenced from: objc-class-ref in EWMultiColumnTableView.o "_kCATransactionDisableActions", referenced from: -[EWMultiColumnTableView highlightColumn:] in EWMultiColumnTableView.o ld: symbol(s) not found for architecture i386 clang: error: linker command failed with exit code 1 (use -v to see invocation)

Can anyone advice on this?

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-10T08:48:25.933

从链接器错误来看，您需要将 QuartzCore 框架添加到您的项目中。这是实现 CALayer 类的地方，以及其他一些东西。

在这个 SO 问题的最高评价答案中有关于如何执行此操作的说明：[Addingquartzcore to xcode 4 for iOS](https://stackoverflow.com/questions/6956432/adding-quartzcore-to-xcode-4-for-ios)。

# wcf - 用于移动设备的 ADO.NET 解决方案的同步服务 - ArgumentNullException

> ID：11408375
> 
> 赞同：0
> 
> 时间：2012-07-10T07:16:15.990
> 
> 标签：wcf, windows-ce

我正在尝试在我的移动和数据库服务器之间创建同步。我正在关注[本教程](http://mobileworld.appamundi.com/blogs/andywigley/archive/2008/12/08/building-a-sync-services-for-ado-net-solution-for-mobile-devices.aspx)，它进入`ArgumentNullException Value can not be null. Parameter name: ServerSyncProvider`了 sych() 函数。

代码

```
 private void Sync()
        {
            Cursor.Current = Cursors.WaitCursor;
            WebReference.NorthwindCacheSyncService svcProxy = new WebReference.NorthwindCacheSyncService();
            Microsoft.Synchronization.Data.ServerSyncProviderProxy syncProxy =
                new Microsoft.Synchronization.Data.ServerSyncProviderProxy(svcProxy);
            // Call SyncAgent.Synchronize() to initiate the synchronization process.
            // Synchronization only updates the local database, not your project's data source.
            NorthwindCacheSyncAgent syncAgent = new NorthwindCacheSyncAgent();
            Microsoft.Synchronization.Data.SyncStatistics syncStats = syncAgent.Synchronize();

            // TODO: Reload your project data source from the local database (for example, call the TableAdapter.Fill method).
            // Show synchronization statistics
            MessageBox.Show("Changes downloaded: " + syncStats.TotalChangesDownloaded.ToString()
                + "\r\nChanges Uploaded: " + syncStats.TotalChangesUploaded.ToString());

            Cursor.Current = Cursors.Default;

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T12:18:17.423

正如错误所说**“值不能为空。参数名称：ServerSyncProvider”**

表示未初始化

你错过了中间的一行代码

NorthwindCacheSyncAgent syncAgent = new NorthwindCacheSyncAgent();

```
syncAgent.RemoteProvider = syncProxy
Microsoft.Synchronization.Data.SyncStatistics syncStats = syncAgent.Synchronize(); 
```

# c# - Xelement 不是有效的 Windows 运行时类型

> ID：11408377
> 
> 赞同：2
> 
> 时间：2012-07-10T07:16:27.207
> 
> 标签：c#, windows-phone-7, windows-8, .net-4.5

我正在将 Windows Phone 7 应用程序移植到 Windows 运行时。在我的 wp7 应用程序中，我有：

```
public sealed class Packet
{
  public XElement _element;

  public Packet(XElement element)
  {

  }
} 
```

它说 XElement 未被识别为有效的 Windows 运行时类型。

请任何人解释为什么会这样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T22:54:42.843

Windows 运行时组件公开的类型必须是 Windows 运行时类型...

*在外部，您的类型的成员只能公开其参数和返回值的 Windows 运行时类型。*

... 来自[在 C# 和 Visual Basic 中创建 Windows 运行时组件](http://msdn.microsoft.com/en-us/library/windows/apps/br230301%28v=vs.110%29.aspx)。

# codeigniter - Codeigniter Hooks 推进

> ID：11408379
> 
> 赞同：2
> 
> 时间：2012-07-10T07:16:55.383
> 
> 标签：codeigniter, hook

您好，我正在使用 post_controller 挂钩来验证用户是否已登录但是当验证失败时，我将用户重定向到登录控制器....反复重定向。我想为除登录控制器之外的每个控制器调用 post_controller 挂钩.... 还有一种方法是我不需要一次又一次地加载会话库，因为如果用户已登录，那么它也会在 post 控制器中加载会话库通过在配置文件中自动加载...这是我的代码

```
 //Hooks
    $hook['post_controller'] = array(
                                'class'    => 'is_login',
                                'function' => 'index',
                                'filename' => 'is_login.php',
                                'filepath' => 'hooks'
                                );  `//Is_Login Hook
class is_login {
function __construct(){
$this->CI =& get_instance();

    if(!isset($this->CI->session))              //Check if session lib is loaded or not
        $this->CI->load->library('session');    //If not loaded, then load it here
}

public function index()
{
    $login_id = $this->CI->session->userdata('login_id');
    $login_flag = $this->CI->session->userdata('logged_in');

       if ($login_flag != TRUE || $login_id == "")
        {
            redirect(site_url().'/welcome_login', 'refresh');

        }           
}
}` 

            回答 #1

赞同：4

时间：2012-07-10T07:27:20.300

看来这不是使用 Codeigniter 钩子的好地方。最好在应用程序中扩展 Controller 类，并在构造函数中检查用户是否已登录并重定向到登录控制器。但无需从您的控制器扩展登录控制器，而是从 CI_Controller 扩展它。

            回答 #2

赞同：1

时间：2012-07-10T08:53:39.760

我通过钩子验证登录没有问题。我只是在注销和`exit`应用程序时生成登录视图，以便唯一显示的是登录，而控制器（和休息）被忽略。

真的不需要重定向。

            回答 #3

赞同：0

时间：2013-12-23T02:01:04.680

```
if ($this->CI->uri->segment(1) != 'auth') {

    //Authenticate
    if (empty($user->user_id))redirect('auth');

} 
```

```

# c# - 在c#中将未知格式的字符串转换为日期

> ID：11408381
> 
> 赞同：7
> 
> 时间：2012-07-10T07:17:03.963
> 
> 标签：c#, .net

我已经搜索了 stackoverflow 的答案，但没有运气。我正在开发一个 Windows 应用程序，我有一些不同日期格式的字符串，例如。

```
dd/MM/yyyy
MM/dd/yyyy
MM-dd-yyyy
dd-MM-yyyy
dd/MM/yyyy hh:mm::ss
MM/dd/yyyy hh:mm::ss
etc... 
```

但我需要转换为通用格式 - `dd/MM/yyyy`. 该应用程序可以在不同文化的任何 Windows 机器上运行。

正确的方法是什么？

编辑：还有一件事我可能不知道传入字符串的格式。

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-10T07:18:48.997

使用[`DateTime.ParseExact`](http://msdn.microsoft.com/en-us/library/332de853)不同的模式作为格式。

如果在解析后您确实需要使用字符串表示，请使用您感兴趣的显式格式的`ToString`方法`DateTime`（以便它是文化不变的）。但是最好保留它，`DateTime`因为它与格式无关。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T07:20:52.377

您可以区分使用不同分隔符的那些格式（即“/”与“-”）。但是您怎么知道诸如 2010 年 10 月 11 日这样的日期代表 11 月 10 日还是 10 月 11 日？如果一个数字不大于 12，则在不知道确切格式的情况下没有可靠的方法可以做到这一点。

正如其他人指出的那样，如果您*确实*知道确切的格式，那么您可以使用`DateTime.ParseExact`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T07:32:36.137

如果您正在处理一些包含大量日期的未知格式的导入文件*，*您可以尝试不同的格式，并希望有一个不会出现格式错误。

或者换一种说法：将“日期”分成三个数字并检查每个数字的值范围。> 1900 的值将是年。如果您找到从 1 到 31 的值，则为天。从 1 到 12 的值*可能*是月，但也可能是天。尝试并识别每个部分。

最好的方法是向这些日期的供应商**询问格式。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T07:50:22.763

要在不同的文化上运行这个程序，我认为你应该创建一个函数来识别这种字符串格式的文化，然后使用 Datetime.Parse

# php - 如何搜索 [num:0] 之类的模式并替换它？

> ID：11408382
> 
> 赞同：0
> 
> 时间：2012-07-10T07:17:08.193
> 
> 标签：php, string

我知道有很多关于替换字符串中的内容的教程和问题。

但我找不到一个关于我想做的事！

假设我有一个这样的字符串

```
$string="Hi! [num:0]"; 
```

还有一个像这样的示例数组

```
$array=array();
$array[0]=array('name'=>"na");
$array[1]=array('name'=>"nam"); 
```

现在我想要的是 PHP 应该首先搜索模式，比如`[num:x]`where`x`是数组中的有效键。然后用数组的匹配键替换它。例如，上面给出的字符串应该变成：`Hi! na`

我正在考虑这样做：

1.  搜索模式。
2.  如果找到，调用一个函数来检查该号码是否有效。
3.  如果有效，则从该键的数组中返回名称，例如 0 或 1 等。
4.  PHP 将字符串中函数返回的值替换为模式。

但我找不到执行这个想法的方法。如何匹配该模式并为每次匹配调用该函数？

这正是我想做的方式。任何其他方法也可以。

如果您对我的问题有任何疑问，请在评论中提问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T07:24:54.700

尝试这个

```
$string="Hi! [num:0]";
$array=array();
$array[0]=array('name'=>"na");
$array[1]=array('name'=>"nam");

echo preg_replace('#(\!)?\s+\[num:(\d+)\]#ie','isset($array[\2]) ? "\1 ".$array[\2]["name"] : " "',$string); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T09:16:51.063

如果您不想要正则表达式的开销，并且您的字符串格式保持不变；你可以使用：

```
<?php

$string="Hi! [num:0]"; 
echo_name($string);          // Hi John
echo "<br />";
$string="Hello! [num:10]"; 
echo_name($string);          // No names, only Hello

// Will echo Hi + Name
function echo_name($string){
$array=array();
$array[0]=array('name'=>"John");
$array[1]=array('name'=>"Doe");

$string = explode(" ", $string);
$string[1] = str_replace("[num:", "", $string[1]);
$string[1] = str_replace("]", "", $string[1]);

if(array_key_exists($string[1], $array)){
    echo $string[0]." ".$array[$string[1]]["name"];
} else {
    echo $string[0]." ";
}
}// function echo_sal ENDs

?> 
```

[直播：http://codepad.viper-7.com/qy2uwW](http://codepad.viper-7.com/qy2uwW)

假设：

*   $string 总是只有一个空格，正好在之前`[num:X]`。
*   `[num:X]`始终采用相同的格式。

当然，如果您可以将输入设置为简单
`Hi! 0` *或* `Hello! 10`

# php - 认证对象上的非对象错误

> ID：11408385
> 
> 赞同：3
> 
> 时间：2012-07-10T07:17:12.457
> 
> 标签：php, object, symfony

我正在处理带有非实体字段（在集合中）的 Symfony 表单。

（编辑：下面的所有代码现在都运行良好！）

## 我们在谈论什么

为了便于理解，这是一些代码片段：表单定义（在 PieceType 类中）：

```
// Form\Type\PieceType.php

$builder
    ->add('name',
          'text',
          array('max_length' => 70,
                'label' => "piece.name"))
    ->add('compositors',
          'collection',
          array('type' => 'entity',
                'options' => array('class' => 'kalisonStdArchiveBundle:Person',
                                   'property_path' => false),
          'allow_add' => true,
          'allow_delete' => true,
          'property_path' => false,
          'by_reference' => false,
          'label' => 'piece.compositor'
    )); 
```

合成器字段是使用 javascript 添加的，使用数据原型（[在此处](http://symfony.com/doc/current/reference/forms/types/collection.html#adding-and-removing-items)解释）。

使用该视图简单地完成渲染：

```
// Resources\views\Piece\piece.new.html.twig

{% block javascripts %}
{{ parent() }}
<script type="text/javascript">var nbCompositors = {{ form.compositors|length }}</script>
<script type="text/javascript" src="{{ asset('bundles/kalisonstdarchive/js/piece.new.js') }}"></script>
{% endblock javascripts %}

{% block main %}
<form novalidate action="{{ path("kalisonStdArchiveBundle_piece_new") }}" method="post" {{ form_enctype(form) }}>
    {{ form_widget(form) }}
    <button id="add-compositor">{{ "compositor.add"|trans }}</button>
    <input type="submit" id="submit" value="{{ "piece.create"|trans }}" name="submit" />
</form>
{% endblock %} 
```

相关的javascript是：

```
// Resources\public\js\piece.new.js

$(document).ready(function() {
    jQuery('#add-compositor').click(function() {
        var list = jQuery('#kalison_stdarchivebundle_piecetype_compositors');
        var newCompositor = list.attr('data-prototype');
        newCompo = newCompositor.replace(/\$\$name\$\$/g, nbCompositors);
        nbCompositors++;
        var html = jQuery('<p></p>').html(newCompositor);
        html.appendTo(jQuery('#kalison_stdarchivebundle_piecetype_compositors'));
        return false;
    });
}); 
```

这是管理数据的操作。正如@l3l0 通知的那样，我没有检查最后一次迭代，这会导致 $addCompositor 为空：

```
// Controller\PieceController.php

$newPiece = new Piece();
$form = $this->get('form.factory')->create(new PieceType(), $newPiece);

if ('POST' == $request->getMethod()) {
    $form->bindRequest($request);

    if ($form->isValid()) { 
        $this->get('piece_manager')->savePiece($newPiece);

        if ($form["compositors"] != null) { 
            foreach ($form["compositors"] as $formCompositor) {
                $addCompositor = $formCompositor->getData();
                if ($addCompositor != null) {
                    $newPerfomance = new Performance();
                    $newPerfomance->setPerson($addCompositor); // Throw Catchable Fatal Error
                    $newPerfomance->setPiece($newPiece);
                    $newPerfomance->setInstrument($instrument);
                    $this->get('performance_manager')->savePerformance($newPerfomance);
                }
            }
        }
    }
} 
```

我的问题是我得到了一个 Symfony 错误，告诉我：`Argument 1 passed to Performance::setPerson() must be an instance of Person, null given`. （当然，Performance 类中的方法是`public function setPerson(Person $person)`）

## 我试过的

*   我试图确定：`if (!is_object($addCompositor)) throw new Exception('NOT AN OBJECT');`

    是的，`$addCompositor`确实是一个对象。

*   我认为它是一个不兼容的对象，但如果尝试打印该对象：`var_dump($addCompositor)`.

    我并不感到惊讶：`object(...\Entity\Person)`

*   最后我的最后一个测试是在这个对象上调用一个方法：`echo $addCompositor->getLastName();`.

    工作得很好，打印名称 - 就在抛出这个众所周知的错误之后：`Call to a member function getLastName() on a non-object`.

所以，我的代码现在看起来像这样：

```
foreach ($form["compositors"] as $formCompositor) {
    $addCompositor = $formCompositor->getData();
    if (!is_object($addCompositor))
        throw new Exception('NOT AN OBJECT'); // Not throwing: it's an object
    var_dump($addCompositor); // Print a Person object
    echo $addCompositor->getLastName(); // Print the name, then break on "non-object" error
    $newPerfomance = new Performance();
    $newPerfomance->setPerson($addCompositor); // Throw Catchable Fatal Error
    $newPerfomance->setPiece($newPiece);
    $newPerfomance->setInstrument($instrument);
    $this->get('performance_manager')->savePerformance($newPerfomance);
} 
```

## 你的上帝现在在哪？

起初我认为这是一个 Symfony 错误，但在最后一次测试中我有点困惑。你有没有遇到过这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T08:38:00.683

似乎在下一次迭代中，您只是没有数据对象。

请检查提交了哪些数据并向我们展示 JS 代码。`$form["compositors"]`你也可以检查里面有什么

啊，你能说出你使用的是哪个版本的 Symfony 吗？（2.0.x，2.1？）

# javascript - Javascript setInterval - 速率还是延迟？

> ID：11408393
> 
> 赞同：6
> 
> 时间：2012-07-10T07:17:49.517
> 
> 标签：javascript, setinterval

Javascript setInterval 方法是（至少）等待两次执行特定代码之间的指定间隔，还是在完成前一次执行和开始下一次执行之间等待该间隔？

（或者，当与 Java 的`ScheduledExecutorService`方法进行比较时 - setInterval 是否类似于`scheduleAtFixedRate()`或更确切地说`scheduleWithFixedDelay()`？）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-10T07:20:28.673

如果您`setInterval`以**1000**毫秒的间隔调用并且回调代码需要**100**毫秒才能运行，则下一个回调将在**900**毫秒后执行。

如果回调需要**1050**毫秒，则下一个将在第一个完成后立即启动（**延迟****50**毫秒）。这种延迟将不断累积。

 **所以在 Java 世界中，这类似于[`scheduleAtFixedRate()`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledExecutorService.html#scheduleAtFixedRate%28java.lang.Runnable,%20long,%20long,%20java.util.concurrent.TimeUnit%29). 如果您需要[`scheduleWithFixedDelay()`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledExecutorService.html#scheduleWithFixedDelay%28java.lang.Runnable,%20long,%20long,%20java.util.concurrent.TimeUnit%29)行为，则必须在`setTimeout()`每次完成时使用并重新安排回调：

```
function callback() {
    //long running code
    setTimeout(callback, 1000);
}
setTimeout(callback, 1000); 
```

上面的代码将在完成后恰好等待 1000 毫秒，`callback()`然后再重新启动，无论运行多长时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T07:19:21.337

这个答案包括来自 jfriend00 下面评论的帮助。

Javascript 是单线程的，所以同一个函数不能同时运行两次。但是 setInterval 延迟不考虑运行该函数需要多长时间。

例如，假设您的 setInterval 函数需要 500 毫秒才能运行，而您的延迟是 1000 毫秒。这将导致函数再次启动之前有 500 毫秒的延迟。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T07:36:59.080

正如您在[这个 jsFiddle 测试用例](http://jsfiddle.net/jfriend00/kGQsQ/)中看到的那样，setInterval 尝试保持时间间隔，无论在时间间隔上运行的代码需要多长时间，只要该代码花费的时间少于设置的时间间隔。因此，如果您将间隔设置为 5 秒，并且在每个间隔上运行的代码需要 200 毫秒，则每个间隔仍应相隔 5 秒（或者尽可能接近单线程 javascript 引擎可以使其达到 5 秒）。

另一方面，如果您在每个间隔上运行的代码花费的时间比间隔时间本身执行的时间长，因为javascript是单线程的，那么下面的间隔将不会按时开始，并且会因为第一个的时间溢出而延迟间隔的代码。

通过调整延迟时间，可以在这个工作测试用例中看到这两种情况。

这里的工作测试用例：http: [//jsfiddle.net/jfriend00/kGQsQ/](http://jsfiddle.net/jfriend00/kGQsQ/)**

# postgresql - 使用一个命令自动设置附加 Heroku-Postgresql

> ID：11408395
> 
> 赞同：1
> 
> 时间：2012-07-10T07:18:07.753
> 
> 标签：postgresql, heroku

我想在我的应用程序中使用 PostgreSQL 9 并在 Heroku 上托管。默认情况下，heroku 使用 Postgres 8.3。要使用 Postgres 9，我需要安装附加组件 heroku-postgres（https://addons.heroku.com/heroku-postgresql）。在文档中，我发现了使用 Postgresql 9 的几个步骤。这很简单，但我需要自动化和简化所有部署步骤。

问题，我至少需要从这些问题中得到一个答案：

*   默认情况下是否可以在没有任何附加组件的情况下在 Heroku 中使用 Postgresql 9？
*   当我添加像这样的附加组件时，是否可以设置自定义数据库 URL 名称`heroku addons:add heroku-postgresql:dev CUSTOME_HEROKU_DATABASE_URL_NAME`？
*   是否可以在促销中使用最后一个数据库 url，例如`heroku pg:promote HEROKU_POSTGRESQL_LAST`？
*   是否可以通过添加附加组件来提升数据库，例如：`heroku addons:add heroku-postgresql:dev --promote`？

我不想使用像`grep`or之类的工具`sed`。我已经建立了这个解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T22:00:21.810

*   PostgreSQL 9 现在是 Heroku 的默认设置。
*   当您创建一个新的 Heroku 数据库时，它*总是*会为您自动生成一个名称（一种颜色），您无法更改它。
*   如果不使用 grep / sed / 自定义，就无法将新数据库提升为默认值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T22:07:32.250

> 默认情况下是否可以在没有任何附加组件的情况下在 Heroku 中使用 Postgresql 9？

该`dev`计划*将*是 heroku 上的默认计划。如果您现在希望它成为您的默认设置，您可以添加[此功能标志](https://devcenter.heroku.com/articles/labs-default-heroku-postgresql-dev/)：

```
 heroku labs:enable default-heroku-postgresql-dev 
```

> 当我添加像 heroku addons:add heroku-postgresql:dev CUSTOME_HEROKU_DATABASE_URL_NAME 这样的附加组件时，是否可以设置自定义数据库 URL 名称？

还没有。

> 是否可以在promote 中使用最后一个数据库url，例如heroku pg:promote HEROKU_POSTGRESQL_LAST？

不，但是如果你设置了那个标志，当你第一次推送代码时，它会`dev`为你提供一个数据库并且它会被提升。

> 是否可以通过添加附加组件来提升数据库，例如：heroku addons:add heroku-postgresql:dev --promote？

不，但有趣的想法。

# html - UL LI 与背景图像在一排

> ID：11408400
> 
> 赞同：-1
> 
> 时间：2012-07-10T07:18:25.040
> 
> 标签：html, css

我正在调试一个棘手的对齐问题。这是[jsfiddle](http://jsfiddle.net/umeshpatil86/U2Wax/4/)。问题是评级“拇指”向上和向下出现在单个图像中。我`background-position`用来生成不同的图像。

视觉效果看起来不错，但我**需要将所有四个特征与背景图像一起显示在一行中**。

有谁知道如何修理它 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T08:32:43.177

好的，从我的理解来看，您希望将您的评级等级与 li 中的实际文本分开。

```
<li><span class="rating up"></span>Courteous Staff</li> 
```

然后将跨度设置为`display: inline-block;`，你应该得到我认为你所追求的。

[http://jsfiddle.net/spacebeers/U2Wax/35/](http://jsfiddle.net/spacebeers/U2Wax/35/)

您需要做更多的工作才能使其正确对齐，但这会给您一个好主意。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-10T10:33:54.667

您是否尝试过添加这种 CSS 样式？

```
white-space: nowrap; 
```

# jquery - jQuery 根据组合框选择将项目从一个列表移动到另一个列表

> ID：11408401
> 
> 赞同：4
> 
> 时间：2012-07-10T07:18:32.253
> 
> 标签：jquery

我有两个组合框，一个包含所有可用的国家名称，另一个是空的，例如：

**国家**

```
<select name="countryId[]" multiple="multiple" id="countryId" size="10">
    <option id="" value="1" >Afghanistan</option>
    <option id="" value="3" >Albania</option>
    <option id="" value="4" >Algeria</option>
    <option id="" value="5" >American samoa</option>
</select> 
```

**空的**

```
<select name="mycountryId[]" multiple="multiple" id="mycountryId" size="10">
</select> 
```

现在，如果我从国家列表中选择任何国家，它应该移动到空列表，但是如果我从国家列表中选择三个国家，则具有**选定**的属性和确切**值，结果应该是：**

**国家**

```
<select name="countryId[]" multiple="multiple" id="countryId" size="10">
    <option id="" value="1" >Afghanistan</option>
</select> 
```

**空的**

```
<select name="mycountryId[]" multiple="multiple" id="mycountryId" size="10">
    <option selected="selected" id="" value="3" >Albania</option>
    <option selected="selected" id="" value="4" >Algeria</option>
    <option selected="selected" id="" value="5" >American samoa</option>
</select> 
```

**同样，如果我从我的新国家/地区列表（名为Empty** ）中单击任何国家/地区，则所选国家/地区应移回具有**未选择**属性和确切**值**的可用国家/地区列表， 例如 **国家** 阿富汗阿尔及利亚

我遵循[Jquery - 根据组合框选择将项目从一个列表移动到另一个列表，](https://stackoverflow.com/questions/5756703/jquery-moving-items-from-one-list-to-another-based-on-the-combobox-selection)这是一段非常好的代码**，但是如何选择所有在 targetCars 中移动的值？**具有**选定**的属性，反之亦然？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-04-15T03:11:58.373

![在此处输入图像描述](../Images/fc498f9db3ce2c262b0f66156c7f92e6.png)

```
function MoveListBoxItem(leftListBoxID, rightListBoxID, isMoveAll) {
    if (isMoveAll == true) {

        $('#' + leftListBoxID + ' option').remove().appendTo('#' + rightListBoxID).removeAttr('selected');

    }
    else {

        $('#' + leftListBoxID + ' option:selected').remove().appendTo('#' + rightListBoxID).removeAttr('selected');
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T08:06:30.810

首先，为什么你`[]`在你的控制ID中使用？您可以使用此将项目从一个列表移动到另一个列表，

```
 $('#countryId option:selected').appendTo('#countryId'); 
```

有关`select`元素操作的更多信息[操作选择选项](http://calisza.wordpress.com/2009/03/29/6-jquery-snippets-you-can-use-to-manipulate-select-inputs/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-18T04:55:05.613

这是html代码！

```
 <select multiple id="countryId">
            <option value="1">Afghanistan</option>
            <option value="2">Albania</option>
            <option value="3">Algeria</option>
            <option value="4">American samoa</option>
        </select>
        <a href="#" id="add">add &gt; &gt;</a>

        <select multiple id="mycountryId"></select>
        <a href="#" id="remove">remove &lt; &lt;</a> 
```

和我的 javascript 代码。

```
$("#countryId").click(function(){
    $("#countryId option:selected").remove().appendTo($("#mycountryId"));
})
$("#mycountryId").click(function(){
    $("#mycountryId option:selected").remove().appendTo($("#countryId"));
}) 
```

确保您将`jquery.js`文件添加到您的项目中！

# javascript - 具有不同样本间隔的谷歌折线图

> ID：11408405
> 
> 赞同：0
> 
> 时间：2012-07-10T07:18:50.083
> 
> 标签：javascript, google-visualization

我正在尝试在[折线图](https://developers.google.com/chart/interactive/docs/gallery/linechart)上绘制多条线，但每条线都有不同的数据采样间隔 - 有些每 4 小时一次，有些每 8 小时一次。

如果我将间隔合并在一起，数据看起来像这样。

```
Interval, Avg-8h, Avg-4h
0       ,   0.45, 0.33
4       ,       , 0.21
8       ,   0.32, 0.55
12      ,       , 0.65 
```

目前，我能得到的最好结果是显示 Avg-4h 线，但由于“差距”，Avg-8h 线只是点。

一个最小的例子（为大量的 HTML 道歉）：

```
<html>
  <head>
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">
     var data;
     var chart;
      google.load('visualization', '1', {'packages':['corechart']});
      google.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = {
            "cols": [
                { "label": "Interval", "type": "number" },
                { "label": "Avg-8h", "type": "number" },
                { "label": "Avg-4h", "type": "number" }],
            "rows": [
                { "c": [{ "v": 24 }, { "v": 0.2275 }, { "v": 0.1527 }] },
                { "c": [{ "v": 20 }, { }, { "v": 0.0664 }] },
                { "c": [{ "v": 16 }, { "v": 0.0624 }, { "v": 0.0495 }] },
                { "c": [{ "v": 12 }, { }, { "v": 0.0555 }] },
                { "c": [{ "v": 8 }, { "v": 0.109 }, { "v": 0.1112 }] },
                { "c": [{ "v": 4 }, { }, { "v": 0.1403 }] },
                { "c": [{ "v": 0 }, { "v": 0.1403 }, { }] }
            ]
        };

        var table = new google.visualization.DataTable(data);

        var options = {
            legend: 'none',
            pointSize: 5
        };

        var chart = new google.visualization.LineChart(document.getElementById('chart_div'));

        chart.draw(table, options);
    }

    </script>
  </head>
  <body>
    <div id="chart_div" style="width:400; height:300"></div>
  </body>
</html> 
```

除了插入假/虚拟值（我不想这样做 - 这歪曲了实际数据）之外，有没有办法做到这一点？

我已经尝试将空值设置为 null 或空 - 到目前为止没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T15:08:38.260

我遇到了完全相同的问题并像这样修复了它：

使用`interpolateNulls`LineChart 页面中记录的选项：[http ://code.google.com/apis/chart/interactive/docs/gallery/linechart.html#Configuration_Options](http://code.google.com/apis/chart/interactive/docs/gallery/linechart.html#Configuration_Options)

> 是否猜测缺失点的值。如果为真，它将根据相邻点猜测任何缺失数据的值。如果为假，它将在未知点处留下断线。

该选项默认为 False，使用`var options = {'interpolateNulls':true};`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T09:26:59.850

您会即时自动计算间隔值，唯一的缺点是这些值将在图表上显示为点。定义后需要运行以下命令`data`：

```
for(var i = 0; i < data.rows.length; i++) {
    if(data.rows[i].c[1].v == undefined) {
        data.rows[i].c[1].v = (data.rows[i - 1].c[1].v + data.rows[i + 1].c[1].v) / 2;
    }
} 
```

这将遍历每一行，检查值是否已定义。如果没有，它将找到下一个点和上一个点之间的中间点并将其设为值。这是它的工作[原理](http://jsfiddle.net/cchana/77Mwj/)。

# php - 在不同的浏览器+PHP中获取不同的RSS Feed顺序

> ID：11408406
> 
> 赞同：0
> 
> 时间：2012-07-10T07:18:54.697
> 
> 标签：php, rss

我正在使用 PHP在[http://sports.espn.go.com/espn/rss/news上获得最新的 RSS 提要。](http://sports.espn.go.com/espn/rss/news)所以这里的想法是每次[http://sports.espn.go.com/espn/rss/news](http://sports.espn.go.com/espn/rss/news)被添加到我的系统中，它都会得到最新发布的帖子。

这里的问题是，当我在 Firefox 和 Chrome 中查看 RSS Feed 时，结果是这样的： ![在此处输入图像描述](../Images/b176b2352bf62185d79f101e154b6f89.png)

但是在 IE 中，结果是这样的：
![IE 结果](../Images/508cd4398f49266304870d2b4b1ac83f.png)

所以基本上结果是完全不同的，显然 IE 结果是正确的（注意帖子标题下方的时间）。但是，在我的代码中，它看起来像这样：

```
header('Content-type: application/xml');
echo file_get_contents( 'http://sports.espn.go.com/espn/rss/news' ); 
```

我在 Firefox 中也得到了相同的结果，这导致我没有得到[http://sports.espn.go.com/espon/rss/news的最新发布帖子](http://sports.espn.go.com/espon/rss/news)

请指导我这个。任何帮助将不胜感激和奖励！

谢谢！:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T08:25:32.640

这是我的解决方案，但由于不同 RSS 帖子的日期格式，它给了我不一致的结果

```
<?php
$doc = new DOMDocument();

$arrFeeds = array();
$doc->load( "http://sports.espn.go.com/espn/rss/news" );
foreach ( $doc->getElementsByTagName('item') as $node ) {
    $itemRSS = array(
        'title' => $node->getElementsByTagName('title')->item(0)->nodeValue,
        'desc' => $node->getElementsByTagName('description')->item(0)->nodeValue,
        'link' => $node->getElementsByTagName('link')->item(0)->nodeValue,
        'date' => $node->getElementsByTagName('pubDate')->item(0)->nodeValue
    );
    array_push( $arrFeeds, $itemRSS ); #store array for comparing purposes
}   

$newArray = array();
foreach( $arrFeeds as $k=>$v ){
    $newArray[$v['date']] = $v;
}

ksort($newArray);
$finalArray = array();
foreach( $newArray as $k=>$v ){
    $finalArray[] = $v;
}
krsort($finalArray);

ItemDebug($finalArray);

function ItemDebug($value){
    echo "<pre>";
    print_r( $value );
    echo "</pre>";
}

?> 
```

结果是这样的： ![在此处输入图像描述](../Images/c6a60a76ccfa5aa67d39c33ee5febd98.png)

谢谢！

# exception - 适用于 Java 的 Google 文档 API（例外）

> ID：11408408
> 
> 赞同：0
> 
> 时间：2012-07-10T07:19:07.763
> 
> 标签：exception, nullpointerexception, google-docs, google-docs-api, google-drive-api

我对谷歌文档有疑问。我想使用 OAuth 2.0 检索您的所有文件。问题是，一旦你这样做了，尝试下载文件时的授权会给我这个错误：

```
Exception in thread "main" java.lang.NullPointerException
at GoogleBlack.readUrl(GoogleBlack.java:95)
at GoogleBlack.getDocument(GoogleBlack.java:87)
at GoogleBlack.go(GoogleBlack.java:187)
at GoogleBlack.main(GoogleBlack.java:222) 
```

这是我使用的代码

```
import java.io.BufferedInputStream;
import java.io.BufferedOutputStream;
import java.io.BufferedReader;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.OutputStream;
import java.net.URL;
import java.util.Arrays;
import java.util.List;

import com.google.api.client.auth.oauth2.Credential;
import com.google.api.client.googleapis.auth.oauth2.GoogleAuthorizationCodeRequestUrl;
import com.google.api.client.googleapis.auth.oauth2.GoogleAuthorizationCodeTokenRequest;
import com.google.api.client.googleapis.auth.oauth2.GoogleCredential;
import com.google.api.client.googleapis.auth.oauth2.GoogleTokenResponse;
import com.google.api.client.http.HttpTransport;
import com.google.api.client.http.javanet.NetHttpTransport;
import com.google.api.client.json.jackson.JacksonFactory;
import com.google.gdata.client.GoogleService;
import com.google.gdata.client.GoogleAuthTokenFactory.UserToken;
import com.google.gdata.client.docs.DocsService;
import com.google.gdata.data.MediaContent;
import com.google.gdata.data.docs.DocumentListEntry;
import com.google.gdata.data.docs.DocumentListFeed;
import com.google.gdata.data.media.MediaSource;
import com.google.gdata.util.ServiceException;

public class GoogleBlack {

private static final String APPLICATION_NAME = "Homework";
public DocsService service;
public GoogleService spreadsheetsService;
static String CLIENT_ID = "***********";
static String CLIENT_SECRET = "**************";
static String REDIRECT_URI = "urn:ietf:wg:oauth:2.0:oob";
static List<String> SCOPES = Arrays.asList("https://docs.google.com/feeds");

public void getSpreadSheet(String id, String i, String ids, String type) throws Exception {
    UserToken docsToken = (UserToken) service.getAuthTokenFactory()
            .getAuthToken();
    UserToken spreadsheetsToken = (UserToken) spreadsheetsService
            .getAuthTokenFactory().getAuthToken();
    service.setUserToken(spreadsheetsToken.getValue());

    URL url = null;

    if(type.equals("doc"))
    {
        url = new URL("https://docs.google.com/feeds/download/documents/Export?id="+ ids);
    }

    else
    {
         url = new URL("https://docs.google.com/feeds/download/spreadsheets/Export?key="+ ids +"&exportFormat="+ type + "&gid=0");
         i += ".xls";
    }

    System.out.println("Spred = " + url.toString());

    readUrl1(url.toString(), i, type);
    service.setUserToken(docsToken.getValue());
}

public void readUrl1(String url, String i, String type) throws IOException, ServiceException
{
     MediaContent mc = new MediaContent();
     mc.setUri(url);
     MediaSource ms = service.getMedia(mc);   

     System.out.println("Name: "+i);
     BufferedInputStream bin = new BufferedInputStream(ms.getInputStream());
     OutputStream out = new FileOutputStream(i);
     BufferedOutputStream bout = new BufferedOutputStream(out);

     while (true) {
       int datum = bin.read();
       if (datum == -1)
         break;
       bout.write(datum);
     }
     bout.flush();
}

public void getDocument(String id, String i) throws Exception {
    URL url = new URL(id);
    readUrl(url,i);
}

public void readUrl(URL url, String i) throws Exception {
    MediaContent mc = new MediaContent();
    mc.setUri(url.toString());
    System.out.println("Url "+ url.toString());
    System.out.println("MC: " + mc.toString());
    MediaSource ms = service.getMedia(mc);   

    System.out.println("Name: "+i);
    BufferedInputStream bin = new BufferedInputStream(ms.getInputStream());
    OutputStream out = new FileOutputStream(i);
    BufferedOutputStream bout = new BufferedOutputStream(out);

    while (true) {
      int datum = bin.read();
      if (datum == -1)
        break;
      bout.write(datum);
    }
    bout.flush();

 //     FileOutputStream fout = null;
 //     fout = new FileOutputStream(i);
//      fout.write(cbuf.);
//        fout.close();

}

static Credential getCredentials() {
    HttpTransport transport = new NetHttpTransport();
    JacksonFactory jsonFactory = new JacksonFactory();

    // Step 1: Authorize -->
    String authorizationUrl =
        new GoogleAuthorizationCodeRequestUrl(CLIENT_ID, REDIRECT_URI, SCOPES).build();

    // Point or redirect your user to the authorizationUrl.
    System.out.println("Go to the following link in your browser:");
    System.out.println(authorizationUrl);

    // Read the authorization code from the standard input stream.
    BufferedReader in = new BufferedReader(new InputStreamReader(System.in));
    System.out.println("What is the authorization code?");
    String code = null;
    try {
        code = in.readLine();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    // End of Step 1 <--

    // Step 2: Exchange -->
    GoogleTokenResponse response = null;
    try {
        response = new GoogleAuthorizationCodeTokenRequest(transport, jsonFactory, CLIENT_ID, CLIENT_SECRET,
            code, REDIRECT_URI).execute();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    // End of Step 2 <--

    // Build a new GoogleCredential instance and return it.
    return new GoogleCredential.Builder().setClientSecrets(CLIENT_ID, CLIENT_SECRET)
        .setJsonFactory(jsonFactory).setTransport(transport).build()
        .setAccessToken(response.getAccessToken()).setRefreshToken(response.getRefreshToken());
  }

public void go() throws Exception {

    DocsService service = new DocsService(APPLICATION_NAME);
    service.setOAuth2Credentials(getCredentials());

    URL feedUrl = new URL("https://docs.google.com/feeds/default/private/full/");

    DocumentListFeed feed = service.getFeed(feedUrl, DocumentListFeed.class);

    System.out.println("Feed " + feed.getEntries().size());

    for(int i = 0; i < feed.getEntries().size(); i++)
    {

            DocumentListEntry entry = feed.getEntries().get(i);
            if(entry.getType().equals("file"))
            {
                MediaContent mc1 = (MediaContent) entry.getContent();
                String UrlForDownload = mc1.getUri();
                System.out.println("Type is: " + entry.getType());
                System.out.println("File Name is: " + entry.getTitle().getPlainText());
                System.out.println("URL "+ UrlForDownload);

                getDocument(UrlForDownload, entry.getFilename());
            }

            else
            {
                MediaContent mc1 = (MediaContent) entry.getContent();
                String UrlForDownload = mc1.getUri();
                System.out.println("URL "+ UrlForDownload);
                System.out.println("Type is: " + entry.getType());
                System.out.println("File Name is: " + entry.getTitle().getPlainText());

                if(entry.getTitle().getPlainText().equals("Web Design 2011/2012 - Материали"))
                {
                    continue;
                }

                if(entry.getType().equals("spreadsheet"))
                {
                    String name = entry.getTitle().getPlainText().replaceAll(" ", "");
                    System.out.println("name: " + name);
                    getSpreadSheet(UrlForDownload, name, entry.getDocId(),"xls");
                }
                else
                {
                    String name = entry.getTitle().getPlainText().replaceAll(" ", "");
                    System.out.println("name: " + name);
                    getSpreadSheet(UrlForDownload, name, entry.getDocId(),"doc");
                }
            }
    }

}

public static void main(String[] args) throws Exception {

    new GoogleBlack().go();

}

} 
```

第 95 行 - MediaSource ms = service.getMedia(mc);

87 行 - readUrl(url,i);

第187行-​​getDocument（UrlForDownload，entry.getFilename（））；

222 行 - 新的 GoogleBlack().go();

如果我没有得到很好的解释，我深表歉意！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T18:24:16.103

您从未初始化“公共 DocsService 服务”；您的 GoogleBlack 课程的成员，因此当您调用“service.getMedia(mc);”时 你得到一个 NullPointerException。

# iphone - 在iphone中解析json

> ID：11408415
> 
> 赞同：0
> 
> 时间：2012-07-10T07:19:44.773
> 
> 标签：iphone, objective-c, xcode

我有一个 twitter json Feed。问题是我在使用 jsonkit 解析 json feed 时出错。下面是 json url。我想解析下面 json feed.cud 中的值文本和 profile_background_image_url。你们帮帮我出去

```
[
{
    "created_at": "Mon Jul 09 21:46:49 +0000 2012",
    "id": 222446736654872580,
    "id_str": "222446736654872576",
    "text": "@mevru you have to go to  : http://t.co/pPGYijEX",
    "source": "web",
    "truncated": false,
    "in_reply_to_status_id": 222445085235752960,
    "in_reply_to_status_id_str": "222445085235752961",
    "in_reply_to_user_id": 146917266,
    "in_reply_to_user_id_str": "146917266",
    "in_reply_to_screen_name": "mevru",
    "user": {
        "id": 145125358,
        "id_str": "145125358",
        "name": "Amitabh Bachchan",
        "screen_name": "SrBachchan",
        "location": "Mumbai, India",
        "description": "Actor ... well at least some are STILL saying so !!",
        "url": "http://srbachchan.tumblr.com",
        "protected": false,
        "followers_count": 3022511,
        "friends_count": 415,
        "listed_count": 22016,
        "created_at": "Tue May 18 05:16:47 +0000 2010",
        "favourites_count": 10,
        "utc_offset": 19800,
        "time_zone": "Mumbai",
        "geo_enabled": false,
        "verified": true,
        "statuses_count": 14166,
        "lang": "en",
        "contributors_enabled": false,
        "is_translator": false,
        "profile_background_color": "BADFCD",
        "profile_background_image_url": "http://a0.twimg.com/profile_background_images/144221357/t-1.gif",
        "profile_background_image_url_https": "https://si0.twimg.com/profile_background_images/144221357/t-1.gif",
        "profile_background_tile": true,
        "profile_image_url": "http://a0.twimg.com/profile_images/2227330575/Amitji_normal.png",
        "profile_image_url_https": "https://si0.twimg.com/profile_images/2227330575/Amitji_normal.png",
        "profile_link_color": "FF0000",
        "profile_sidebar_border_color": "F2E195",
        "profile_sidebar_fill_color": "FFF7CC",
        "profile_text_color": "0C3E53",
        "profile_use_background_image": true,
        "show_all_inline_media": true,
        "default_profile": false,
        "default_profile_image": false,
        "following": null,
        "follow_request_sent": null,
        "notifications": null
    } 
```

以下是我用来解析的ios代码

```
 jsonurl=[NSURL URLWithString:@"https://api.twitter.com/1/statuses/user_timeline.json?screen_name=@SrBachchan&count=10"];

jsonData=[[NSString alloc]initWithContentsOfURL:jsonurl];

jsonArray = [jsonData objectFromJSONString]; 

items = [jsonArray objectForKey:@"text"];

NSLog(@"the given text:%@",items);
story = [NSMutableArray array];
title = [NSMutableArray array];
picture = [NSMutableArray array];

for (NSDictionary *item in items )
{

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T07:28:00.410

问题出在这一行：

```
items = [jsonArray objectForKey:@"text"]; 
```

正如您的代码所暗示的，它是一个数组而不是字典，因此您首先从数组中获取对象：

```
for (NSDictionary *item in jsonArray ) {
     NSDictionary *user = [item objectForKey:@"user"];  
     NSString *imageURLString = [user objectForKey:@"profile_image_url"];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T07:24:00.440

```
 NSData *data = [NSData dataWithContentsOfURL:jsonurl];
    NSArray *array = [NSJSONSerialization JSONObjectWithData:data options:0 error:nil];
    if (!array) return;
    NSDictionary *dictionary = [array objectAtIndex:0];
    if (dictionary){
        NSString *text = [dictionary valueForKey:@"text"];
        NSString *profileBackgroundImageURL = [dictionary valueForKeyPath:@"user.profile_background_image_url"];
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T07:28:19.780

使用[jsonlint.com](http://jsonlint.com)验证您的 JSON。错误是缺少 JSON 字符串末尾的最后一个关闭操作数 }。有2个开场，但只有1个关门。

```
Parse error on line 52:
...cations": null    }
----------------------^
Expecting '}', ',', ']' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T07:29:37.443

试试这个

```
items = [[jsonArray objectAtIndex:0] objectForKey:@"text"];

backImage=[[[jsonArray objectAtIndex:0] objectForKey:@"user"] objectForKey:@"profile_background_image_url"] ; 
```

# android - WebView 和缩放图像

> ID：11408418
> 
> 赞同：0
> 
> 时间：2012-07-10T07:20:11.347
> 
> 标签：android, webview

我在代码中创建 webview。在这个 webview 中，我展示了图片。现在我有两个问题。我如何以全尺寸显示图像，因为我的图片分辨率为 1381x1829，而我只看到这张图片的一部分。第二。正如您在代码中看到的，我从资产加载图片，但我想从 sd 卡加载图片。我怎么能这样做？

这是代码：

```
 WebView web = new WebView(getContext());
web.getSettings().setJavaScriptEnabled(true);
web.getSettings().setBuiltInZoomControls(true);
web.loadUrl("file:///android_asset/lj.png");

addView(web); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-10-21T23:06:51.107

这个解决方案非常适合我：

```
webView.setInitialScale(30);
WebSettings webSettings = webView.getSettings();
webSettings.setUseWideViewPort(true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T08:05:39.573

此方法`webview.getSettings().setBuiltInZoomControls(true)`将让您实现非多点触控屏幕的内置缩放控制

您可以使用此代码从任何地方从 sdcard 加载图像到 webview。那就是如果你想从多个位置加载多个图像。

```
String base = Environment.getExternalStorageDirectory().getAbsolutePath().toString() + "/Your/Folder";
String imagePath = "file:/"+ base + "/test.jpg";
String html = "<html><head></head><body><img src=\""+ imagePath + "\"></body></html>";
mWebView.loadData(html, "text/html","utf-8"); 
```

但是如果你想加载存在于同一个父文件夹下的图像，这将解决问题

```
String imagePath = "test.jpg";
String html = "<html><head></head><body><img src=\""+ imagePath + "\"></body></html>";
mWebView.loadDataWithBaseURL("file:///mnt/sdcard/Your/Folder/", html, "text/html","utf-8",null); 
```

请注意，如果您尝试将 1600x1840 等高分辨率图像加载到 webview，webview 将减少图像分辨率以维持内存使用，这会导致图像看起来很糟糕

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T09:14:43.033

将此添加到您的 HTML 中：

```
<style type='text/css'>
   img {max-width: 100%;height:initial;} div,p,span,a {max-width: 100%;}
   </style> 
```

这将使您的图像缩放以适合屏幕尺寸。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-02T00:35:30.350

要删除默认填充 - 不要忘记设置样式：

```
<html><head></head><body style="padding:0; margin:0;"><img src=""+ gifUrl + ""
width="100%"></body></html> 
```

# ruby-on-rails - 路径安全和 before_filters rails

> ID：11408419
> 
> 赞同：0
> 
> 时间：2012-07-10T07:20:14.743
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我目前正在创建一个应用程序，用户可以在其中创建和申请工作。但是，由于我对 Rails 相当陌生，因此我面临着一个相当重要的安全功能，即如果任何用户知道正确的路径，例如：

```
 localhost:3000/users/user_id/apps 
```

然后他们可以看到任何用户为任何工作所做的任何应用程序！

我相当确定我需要使用 a`before_filter`来检查 current_user.id 是否与我的作业表中为每个作业找到的 user_id 匹配，或者与我的应用程序表中找到的 user_id 匹配。

我真的不确定如何构建它或在哪里应用过滤器 - 例如，在应用程序控制器中创建过滤器然后`skip_before_filter`在需要的地方应用实例是否更好。

人们可以提供有关构建此代码以及将其放置在何处的任何帮助，我们将不胜感激！谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T07:46:27.700

在您开始查看 cancan 等授权解决方案之前，一个简单的方法是避免这样做

```
App.find params[:id] 
```

由于应用程序与用户相关联并且您拥有 current_user 设置，因此您可以执行

```
app = current_user.apps.find params[:id] 
```

无论要查找什么参数，它都只会找到与用户关联的应用程序。

当你需要一个更复杂的谁能做什么系统时，cancan 真正发挥作用的地方。例如，用户可能能够编辑他们创建的任何作业，但可以查看（而不是编辑）另一组作业。

例如

```
can :manage, Project, :user.id  => user.id
can :read, Project, :department => user.department 
```

这将允许用户完全访问他们的任何项目并读取他们部门项目的访问权限

关于 cancan 的另一件事是，与其在控制器周围散布 before_filters 或宏，不如在一个地方声明规则，因此通常更容易看到发生了什么。在 cancan wiki 和 railscast 上也有更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T07:26:14.030

你是对的，`before_filter`可能是一个解决方案，但它不是最先进的解决方案。有一个railscast，...

[http://railscasts.com/episodes/192-authorization-with-cancan/](http://railscasts.com/episodes/192-authorization-with-cancan/)

当您使用 cancan 但未设计时，您需要创建`current_user`应该返回当前登录用户的 User 对象的帮助程序...

# javascript - 在移动 webkit 中使用时，普通超链接是否需要 FastClick？

> ID：11408421
> 
> 赞同：2
> 
> 时间：2012-07-10T07:20:26.100
> 
> 标签：javascript, html, jquery-mobile, webkit, mobile-safari

FastClick库在 Webkit 下使用时增强了对 JavaScript事件的响应[能力](http://assanka.net/content/tech/2011/08/26/fastclick-native-like-tapping-for-touch-apps/)`onClick`，但它会提高普通超链接的响应能力吗？（例如`<a href=''...`）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-14T12:38:51.470

查看 FastClick 代码，它似乎适用于任何继承自 HTMLElement 的 DOM 对象（大多数 DOM 对象）并支持单击事件（和/或触摸事件，如果在启用触摸的设备上）。

这意味着它也应该适用于 Anchor 标签。

作为参考，这里是 FastClick 源代码中唯一对传入对象进行任何类型验证的代码...

```
 if (!(layer instanceof HTMLElement)) {
        throw new TypeError('Layer must be instance of HTMLElement');
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T14:15:36.860

`click`触发事件时，普通的锚元素将在浏览器中导航。在移动设备上，点击在`touchstart`. 使用 FastClick 和自定义`window.location`更改，确实会加快速度。

*PS：我想您是在询问默认链接是否会在没有附加自定义 JS 处理程序的情况下使用 FastClick 更快；**他们不会**，您必须添加自己的自定义处理程序。您可以通过从较高的 HTML 元素委托来轻松做到这一点，例如`body`. 您可以将 jQuery 与优秀的一起使用：[`.on( events \[, selector\] \[, data\], handler(eventObject) )`](http://api.jquery.com/on/)*

# javascript - 创建 AJAX 调用时 - 我需要询问什么样的数据？

> ID：11408424
> 
> 赞同：1
> 
> 时间：2012-07-10T07:20:47.927
> 
> 标签：javascript, html, ajax, json

我想创建一个 ajax 调用并获取一些数据（假设一个有 100 行的表）。我有两种方法：

1.  向服务器请求**JSON**对象（然后我将使用 Javascript 创建表）
2.  向服务器询问**HTML** - 然后我不需要在客户端上做任何事情。

**一种选择绝对比另一种更好吗？**我假设对于大量数据，最好选择**JSON**选项。对于非常小的**HTML**片段，最好询问 HTML 本身。但我不确定这一点以及在一般用例中该怎么做——什么是最有效的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T07:26:59.770

这完全取决于您的使用情况。当您立即需要 html 并且可以轻松地从服务器端返回 html 时。使用**HTML**，如果您想使用 json 对象来创建所需的输出，请使用**Json**。

显然 HTML 比 json 有更大的数据

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T07:25:57.537

这真的取决于。每种方法都有其优点和缺点。

*   JSON

优点：体积更小，可互操作

缺点：与 HTML 相比，在客户端上构建 UI 更加困难，尽管现在有客户端模板框架可以帮助您。

*   HTML

优点：客户端非常简单，几乎只有一行代码：`$('#foo').html(result);`

缺点：不可互操作。例如，如果您的客户端是 WPF 应用程序，您将解析此 HTML 以提取您感兴趣的信息，以便构建您的 UI。

因此，根据您的要求和环境，您可能会决定为您的应用程序选择一种或另一种方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T07:26:35.760

你有什么限制？谁会访问您的网站？如果它可以从手机和慢速 PC 访问，那么您必须选择选项 2。如果它只能从良好的公司 PC 访问，那么您可以选择选项 1。再说一次，如果您的应用程序在商品服务器上可以很好地扩展，那么您仍然可以选择选项 2。

# javascript - 如何让 onclick 事件在 onblur 之前发生？

> ID：11408426
> 
> 赞同：3
> 
> 时间：2012-07-10T07:20:52.723
> 
> 标签：javascript, html, ajax

我有 2 个元素，一个带有 onclick = "..." 的锚点和一个带有 onfocus = "..." 的输入 锚点由输入按钮切换，所以当按钮处于焦点时，会显示锚点，当它失去焦点锚被隐藏。有没有一种方法可以从锚点访问 onclick 事件而不会首先发生 onblur？

```
input(type="radio", name="sample", value=str(sample['id']),
     id="S"+str(sample['id']),onfocus = 'javascript:toggleVisibility("%stoggle");' 
     % sample['id'], onblur = 'toggleVisibility("%stoggle");' % sample['id'])

a("edit", id = "%stoggle" % str(sample['id']), style="display:none; float:right;
   padding-left:10px; text-decoration:none;", href='do something') 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T07:29:27.740

尝试使用`onmousedown` 代替`onclick`。

# java - String 类如何覆盖 + 运算符？

> ID：11408427
> 
> 赞同：134
> 
> 时间：2012-07-10T07:21:02.350
> 
> 标签：java, string, object

为什么在 Java 中，当 String 是一个类时，您可以使用 + 运算符添加字符串？在`String.java`代码中，我没有找到该运算符的任何实现。这个概念是否违反了面向对象？

* * *

## 回答 #1

> 赞同：162
> 
> 时间：2012-07-10T07:28:38.460

让我们看一下Java中的以下简单表达式

```
int x=15;
String temp="x = "+x; 
```

编译器在内部转换`"x = "+x;`为 a并用于将整数“添加”到字符串中。`StringBuilder``.append(int)`

**[5.1.11。字符串转换](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.1.11)**

> 任何类型都可以通过字符串转换转换为String类型。
> 
> 原始类型 T 的值 x 首先被转换为引用值，就好像通过将其作为参数提供给适当的类实例创建表达式（第 15.9 节）：
> 
> *   如果 T 是布尔值，则使用 new Boolean(x)。
> *   如果 T 是 char，则使用 new Character(x)。
> *   如果 T 是 byte、short 或 int，则使用 new Integer(x)。
> *   如果 T 很长，则使用 new Long(x)。
> *   如果 T 是浮点数，则使用 new Float(x)。
> *   如果 T 为 double，则使用 new Double(x)。
> 
> 然后通过字符串转换将此引用值转换为 String 类型。
> 
> 现在只需要考虑参考值：
> 
> *   如果引用为 null，则将其转换为字符串“null”（四个 ASCII 字符 n、u、l、l）。
> *   否则，转换就像调用被引用对象的 toString 方法一样执行，不带参数；但如果调用 toString 方法的结果为 null，则使用字符串“null”。
> 
> ^(toString 方法由原始类 Object（第 4.3.2 节）定义。许多类会覆盖它，特别是 Boolean、Character、Integer、Long、Float、Double 和 String。)
> 
> 有关字符串转换上下文的详细信息，请参见第 5.4 节。

**[15.18.1。](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.18.1)**

> **字符串连接的优化：** 实现可以选择在一个步骤中执行转换和连接，以避免创建然后丢弃中间字符串对象。为了提高重复字符串连接的性能，Java 编译器可以使用 StringBuffer 类或类似技术来减少通过计算表达式创建的中间 String 对象的数量。
> 
> 对于原始类型，实现还可以通过直接从原始类型转换为字符串来优化包装对象的创建。

优化后的版本实际上不会首先进行完整包装的字符串转换。

这是编译器使用的优化版本的一个很好的说明，尽管没有转换原语，您可以在其中看到编译器在后台将内容更改为 StringBuilder：

[http://caprazzi.net/posts/java-bytecode-string-concatenation-and-stringbuilder/](http://caprazzi.net/posts/java-bytecode-string-concatenation-and-stringbuilder/)

* * *

这个java代码：

```
public static void main(String[] args) {
    String cip = "cip";
    String ciop = "ciop";
    String plus = cip + ciop;
    String build = new StringBuilder(cip).append(ciop).toString();
} 
```

生成这个 - 看看这两种连接样式如何导致相同的字节码：

```
 L0
    LINENUMBER 23 L0
    LDC "cip"
    ASTORE 1
   L1
    LINENUMBER 24 L1
    LDC "ciop"
    ASTORE 2

   // cip + ciop

   L2
    LINENUMBER 25 L2

    NEW java/lang/StringBuilder
    DUP
    ALOAD 1
    INVOKESTATIC java/lang/String.valueOf(Ljava/lang/Object;)Ljava/lang/String;
    INVOKESPECIAL java/lang/StringBuilder.<init>(Ljava/lang/String;)V
    ALOAD 2
    INVOKEVIRTUAL java/lang/StringBuilder.append(Ljava/lang/String;)Ljava/lang/StringBuilder;
    INVOKEVIRTUAL java/lang/StringBuilder.toString()Ljava/lang/String;

    ASTORE 3

    // new StringBuilder(cip).append(ciop).toString()

   L3
    LINENUMBER 26 L3

    NEW java/lang/StringBuilder
    DUP
    ALOAD 1
    INVOKESPECIAL java/lang/StringBuilder.<init>(Ljava/lang/String;)V
    ALOAD 2
    INVOKEVIRTUAL java/lang/StringBuilder.append(Ljava/lang/String;)Ljava/lang/StringBuilder;
    INVOKEVIRTUAL java/lang/StringBuilder.toString()Ljava/lang/String;

    ASTORE 4
   L4
    LINENUMBER 27 L4
    RETURN 
```

查看上面的示例以及如何根据给定示例中的源代码生成字节码，您将能够注意到编译器在内部对以下语句进行了转换

```
cip+ciop; 
```

进入

```
new StringBuilder(cip).append(ciop).toString(); 
```

换句话说，`+`字符串连接中的运算符实际上是更冗长的`StringBuilder`习语的简写。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-07-10T07:24:34.807

它是检查运算`+`符的操作数的 Java 编译器功能。并根据操作数生成字节码：

*   对于 String，它会生成代码来连接字符串
*   对于 Numbers，它会生成添加数字的代码。

**这就是 Java 规范所说的**：

> 运算符 + 和`-`称为加法运算符。AdditiveExpression：MultiplicativeExpression AdditiveExpression + MultiplicativeExpression AdditiveExpression - MultiplicativeExpression
> 
> 加法运算符具有相同的优先级并且在语法上是左结合的（它们从左到右分组）。**如果运算符的任一操作数的类型`+`是`String`，则该操作是字符串连接。**
> 
> **否则，运算符的每个操作数的`+`类型必须是可转换（第 5.1.8 节）为原始数字类型的类型，否则会发生编译时错误。**
> 
> 在每种情况下，二元`-`运算符的每个操作数的类型都必须是可转换（第 5.1.8 节）为原始数字类型的类型，否则会发生编译时错误。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-07-10T09:53:45.100

> String 类如何覆盖 + 运算符？

它没有。编译器会这样做。严格来说，编译器为字符串操作数*重载*了 + 运算符。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-07-10T07:26:10.690

首先 (+) 被重载而不是被覆盖

> Java 语言为字符串连接运算符 (+) 提供了特殊支持，该运算符已为 Java 字符串对象重载。

1.  如果左侧操作数是字符串，它作为连接工作。

2.  如果左侧操作数是整数，则它用作加法运算符

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-07-10T14:39:40.960

正如每个人都已经写过的那样，`+`运算符在应用时的含义由语言定义。`String`由于您似乎认为这不够令人信服，请考虑以下几点：

整数、浮点数和双精度数都有不同的二进制表示，因此添加两个整数与添加两个浮点数在位操作方面是不同的操作：对于整数，您可以逐位添加，携带位并检查溢出；对于浮点数，您必须分别处理尾数和指数。

因此，原则上，“加法”取决于被“加法”对象的性质。Java 为字符串以及整数和浮点数（longs、doubles、...）定义了它

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-07-10T07:25:39.577

Java 语言为字符串连接运算符 (+) 和将其他对象转换为字符串提供了特殊支持。字符串连接是通过`StringBuilder`(or `StringBuffer`) 类及其`append`方法实现的。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-07-10T07:25:03.183

`+`运算符通常在编译时替换为a `StringBuilder`。检查此[答案](https://stackoverflow.com/questions/4648607/stringbuilder-stringbuffer-vs-operator)以获取有关此问题的更多详细信息。

# php - 在谷歌地图 v3 markercluster 中按下关闭按钮时，infowindow 没有关闭..？

> ID：11408435
> 
> 赞同：0
> 
> 时间：2012-07-10T07:21:51.050
> 
> 标签：php, mysql, ajax, google-maps, markerclusterer

**加载函数**

```
function load() {

                 var cluster = [];
                infoWindow = new google.maps.InfoWindow();         

                 var map = new google.maps.Map(document.getElementById("map"), {
                        center: new google.maps.LatLng(10.6145, -24.3418),
                        zoom: 2,
                        mapTypeId: 'roadmap'
                      });

              // Read the data from example.xml
               downloadUrl("phpsqlajax_genxml.php", function(data) {
                var xml = data.responseXML;
                var markers = xml.documentElement.getElementsByTagName("marker");

                for (var i = 0; i < markers.length; i++) {
                  // obtain the attribues of each marker
                  var name = markers[i].getAttribute("name");
                  var address = markers[i].getAttribute("address");
                  var link = markers[i].getAttribute("link");
                  var type = markers[i].getAttribute("type");
                  var point = new google.maps.LatLng(
                      parseFloat(markers[i].getAttribute("lat")),
                      parseFloat(markers[i].getAttribute("lng")));

                   var html = "<b>" + '<a href="' + link + '" >' + markers[i].getAttribute("name")  + '</a>' + "</b> <br/>"  + "</b> <br/>" + '<a href="' + link + '" >' + markers[i].getAttribute("address")  + '</a>';

                  var icon = customIcons[type] || {};

                  // create the marker
                    var marker = new google.maps.Marker({
                    map: map,
                    position: point,
                    icon: icon.icon,
                    shadow: icon.shadow
                  });

                 addMarker(marker, html);

              cluster.push(marker);

                }
                var mc = new MarkerClusterer(map,cluster);

                 //markerCluster = new MarkerClusterer(map, gmarkers);
              });
   } 
```

**添加标记**

```
function addMarker(marker, content)
    {

      google.maps.event.addListener(marker, 'click', function() {

       infoWindow.setContent(content);
       infoWindow.open(map, marker);
       infoWindow.close();

     });

    } 
```

*ajax的代码*

```
function downloadUrl(url, callback) {
  var request = window.ActiveXObject ?
      new ActiveXObject('Microsoft.XMLHTTP') :
      new XMLHttpRequest;

  request.onreadystatechange = function() {
    if (request.readyState == 4) {
      request.onreadystatechange = doNothing;
      callback(request, request.status);
    }
  };

  request.open('GET', url, true);
  request.send(null);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T11:33:08.100

如果单击集群标记，则会触发“clusterclick”事件。

添加一个事件侦听器，然后关闭信息窗口：

```
var mc = new MarkerClusterer(map, cluster);

google.maps.event.addListener(mc, 'clusterclick', function() {
  infoWindow.close();
}); 
```

# java - 需要帮助通过 Eclipse 使用 jadclipse 插件调试代码？

> ID：11408439
> 
> 赞同：0
> 
> 时间：2012-07-10T07:22:14.590
> 
> 标签：java, eclipse-plugin

我目前正在使用 Jadclipse eclipse 插件在源未附加到 eclipse 时反汇编代码。

我不清楚如何使其同步和调试相同。

有人可以帮助我详细的步骤和评论吗？

任何帮助深表感谢。

谢谢， 凯瑟尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T08:30:37.313

我不确定 Eclipse 是否能够同步读取 Jadclipse 反编译的代码作为调试源。我想应该不会吧。

因此，我建议您手动反编译这些代码并将其保存到本地源文件，将它们链接到 Eclipse 中的源代码，然后尝试使用远程调试模式来调试您的代码。这是我一直做的方式。

# php - symfony 1.0：错误->“页面未正确重定向”

> ID：11408442
> 
> 赞同：0
> 
> 时间：2012-07-10T07:22:21.360
> 
> 标签：php, symfony1

我正在学习 symfony 1.0，但我一直面临页面未正确重定向的问题

我尝试了所有方法，但每次尝试都失败了。是因为 setAuthentication() 还是 session() ？

更新：`.htaccess`文件：

```
Options +FollowSymLinks +ExecCGI

#rewritecond %{http_host} ^www.imaginamalta.com/New/ [nc]
#rewriterule ^(.*)$ https://www.imaginamalta.com/New/$1 [r=301,L]

<IfModule mod_rewrite.c>
  RewriteEngine On

  # uncomment the following line, if you are having trouble
  # getting no_script_name to work
  #RewriteBase /

  # we skip all files with .something
  # comment the following 3 lines to allow periods in routes
  RewriteCond %{REQUEST_URI} \..+$
  RewriteCond %{REQUEST_URI} !\.html$
  RewriteRule .* - [L]

  # we check if the .html version is here (caching)
  RewriteRule ^$ index.html [QSA]
  RewriteRule ^([^.]+)$ $1.html [QSA]
  RewriteCond %{REQUEST_FILENAME} !-f

  # no, so we redirect to our front web controller
  RewriteRule ^(.*)$ index.php [QSA,L]

  rewritecond %{http_host} ^http://meh.newsly.svs113/ [nc]
  rewriterule ^(.*)$ http://meh.newsly.svs113/$1 [r=301,L]

</IfModule>

# big crash from our front web controller
ErrorDocument 500 "<h2>Application error</h2>symfony application failed to start properly" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T07:50:28.527

听起来像你的问题`.htaccess`。尝试设置`AllowOverride`为`ALL`.

# model-view-controller - MVC datatype.datetime 有值但不显示

> ID：11408446
> 
> 赞同：2
> 
> 时间：2012-07-10T07:22:33.720
> 
> 标签：model-view-controller, datetime, input, model

" input class="text-box single-line" data-val="true" data-val-date="Bill Date字段必须是日期。" data-val-required="需要账单日期" id="BillDate" name="BillDate" type="date" value="22.02.2012"

这是 chrome 上的源代码中显示的 html 代码。但是文本框中没有值。

这是我的“BillDate”模型

```
 [Required]
    [Display(Name = "Bill Date")]
    [DataType(DataType.Date, ErrorMessage = "Not a valid date")]
    [DisplayFormat(ApplyFormatInEditMode = true, DataFormatString = "{0:dd.MM.yyyy}")]
    public DateTime BillDate { set; get; } 
```

这就是我试图显示它的方式@Html.EditorFor(model => model.BillDate)

你能帮我吗...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T06:31:46.140

我有这个完全相同的问题。最后我查看了返回到控制器的 HTTP Post，POST 中日期的格式是 yyyy-MM-dd。

我将我的数据注释更改为此并且它工作......

```
[DisplayFormat(ApplyFormatInEditMode = true, DataFormatString = "{0:yyyy-MM-dd}")] 
```

希望有帮助！

# android - 停止线程 onPause

> ID：11408453
> 
> 赞同：1
> 
> 时间：2012-07-10T07:22:56.583
> 
> 标签：android, android-intent

我想在用户离开活动时停止线程。这听起来很简单，但没有任何功能，我试过了，有效。

我用代码开始活动

```
lovi = new Intent(getApplicationContext(), listoverview.class);
lovi.putExtra("reloadAll", true);
startActivity(lovi); 
```

在 listoverview 的 onCreate 中，我使用代码启动线程

```
rlMF.start(); 
```

rlMF 看起来像这样：

```
public Thread rlMF = new Thread(new Runnable() {
    public void run() {
        reloadMissingFiles();
    }
}); 
```

我尝试在 onPause 中使用 rlMF.stop()、.interrupt()、.suspend。没有什么能阻止它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T07:35:49.417

你必须添加一些标志来阻止它。通过其他方式停止线程可能会产生可怕的后果，例如资源泄漏。

例如：

```
volatile boolean activityStopped = false; 
```

创建可运行文件时：

```
public Thread rlMF = new Thread(new Runnable() { 

    public void run() {
        while (!activityStopped) {
        // reloadMissingFiles() should check the flag in reality
            reloadMissingFiles(); 
        }
    }
}); 
```

在 onPause() 中：

```
protected void onPause(){
    super.onPause();
    activityStopped = true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T07:29:15.307

使用 Android 处理程序

```
Runnable r = new Runnable()
{
    public void run() 
    {
        // do stuff
        handler.post(this);
    }
};

handler.post(r); 
```

在 onPause 中：

```
protected void onPause(){
    super.onPause();
    handler.removeCallbacks();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T07:30:04.560

而不是`Thread`尝试和使用一个`AsyncTask`，这样你可以调用的`cancel(boolean mayInterruptIfRunning)`方法`AsyncTask`。您还应该记住，`InteruptedException`如果您使用`cancel(true)`.

这是一个关于的[有用教程](http://www.vogella.com/articles/AndroidPerformance/article.html)`Threads`，可能会对您有所帮助。`Handlers``AsyncTask`

# python - 在 matploblib 中拆分图例

> ID：11408459
> 
> 赞同：5
> 
> 时间：2012-07-10T07:23:33.657
> 
> 标签：python, matplotlib, legend

是否可以将单个大图例拆分为多个（通常为 2 个）较小的图例。

```
from pylab import *

t = arange(0.0, 2.0, 0.01)
s = sin(2*pi*t)
plot(t, s, linewidth=1.0, label="Graph1")
grid(True)
s = sin(4*pi*t)
plot(t, s, color='r',linewidth=1.0, label="Graph2")

legend(loc='lower left')
show() 
```

我想将图例分成两部分，并将它们放在可用的空白处。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T08:27:29.337

我从[http://matplotlib.sourceforge.net/users/plotting/examples/simple_legend02.py得到了答案](http://matplotlib.sourceforge.net/users/plotting/examples/simple_legend02.py)

```
from pylab import *

t = arange(0.0, 2.0, 0.01)
s = sin(2*pi*t)
p1, = plot(t, s, linewidth=1.0, label="Graph1")
grid(True)
s = sin(4*pi*t)
p2, = plot(t, s, color='r',linewidth=1.0, label="Graph2")

l1 = legend([p1], ["Graph1"], loc=1)
l2 = legend([p2], ["Graph2"], loc=4)
gca().add_artist(l1)

show() 
```

在这里，唯一的缺点是我必须给 labelname 两次。

![在此处输入图像描述](../Images/16743bef27b773a0e77d5f0ec227048b.png)

# css - CSS 菜单与标记右对齐：UL>LI>UL>LI

> ID：11408462
> 
> 赞同：0
> 
> 时间：2012-07-10T07:23:50.033
> 
> 标签：css

一个朋友给了我这个 HTML 和 CSS：

[http://jsfiddle.net/LGFYE/2/](http://jsfiddle.net/LGFYE/2/)

我的工作是在 CMS 中使用它，但那段代码的标记有几个问题：

*   BR 在 UL 内的每个 LI 之后
*   LI>SPAN 带有管道字符仅用于设计
*   子页面的顺序被还原

我最好的尝试是这样的：

[http://jsfiddle.net/MQLZh/1/](http://jsfiddle.net/MQLZh/1/)

但我也有一个问题：

*   子菜单右侧的间距不是通用的，它总是 100px

我已经挣扎了几个小时，希望有人知道这条路。我很想再学一两个 CSS 技巧。此外，最终解决方案必须在 IE7+ 中“工作”。“工作”与“未损坏”一样，但不一定相同或“设计完美”。

我感谢任何努力，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T09:00:00.950

试试这个：http: [//jsfiddle.net/MQLZh/3/](http://jsfiddle.net/MQLZh/3/)

让我知道是否还有其他需要更改的地方

事实上，这个你不必更改 HTML 标记，但都可以工作：http: [//jsfiddle.net/MQLZh/4/](http://jsfiddle.net/MQLZh/4/)

# javascript - 如何从 jquery 或 javascript 获取 HTML 的值

> ID：11408466
> 
> 赞同：0
> 
> 时间：2012-07-10T07:24:02.293
> 
> 标签：javascript, jquery, html, jquery-selectors

我想通过 Jquery 或 Javascript 从 HTML 文件中选择以下三个值。

1.  类“class1”href 值
2.  类“class1”内部文本值（示例代码中的 PersonA）
3.  类“Title”内部文本值（示例中的会计）

如何按节点选择li节点的所有数据？我搞不清楚了 ：（

```
<ol id="result-set">
<li id="v-0">
    <div class="result-data">
    ..
    <h2>
        <a class="class1" href="">PersonA</a>
    </h2>
    <dl class="basic">
        <dt>Title</dt>
        <dd class="title">Accountant</dd>
        ....
    </dl>
    </div>
</li>
<li id="v-1">
...
</li>
..... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T07:32:57.840

使用 jQuery，您可以执行以下操作：

```
$("#result-set li").each(function() {
   var $currentLi = $(this),
       $class1link = $currentLi.find("a.class1"),
       class1href = $classAlink.attr("href"),
       class1content = $classAlink.html();

   // do something with values
}); 
```

该`.each()`方法将处理每个 li 元素。在对`.each()`变量的回调中`$currentLi`是一个 jQuery 对象，它保存着 li（从`$(this)`哪里设置`this`li 元素本身）。该`.find()`方法用于在 li 中查找锚元素，然后检索其 href 和内容。

您询问的“会计师”是定义列表中的一项，因此您可能希望在该列表中循环使用另一个`.each()`嵌套在上面的语句中的语句。

您没有明确说明要如何使用这些值，但这应该可以帮助您入门。有关我提到的各种 jQuery 方法的更多详细信息，请查看[jQuery API](http://api.jquery.com)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-10T07:33:52.403

要获得“PersonA”：`$('#v-0 h2 a').html();`

要获取该链接的href：`$('#v-0 h2 a').attr('href');`

要获得“会计师”：`$('#v-0 dl dd').html();`

您可以在选择器的开头修改 id ("v-0") 以选择数据集的特定“行”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T07:32:59.100

```
document.getElementById(Id).value 
```

返回具有特定 id 的元素的值。在jQuery中：

```
$("#id").val() 
```

按班级`$(".yourClass").val()`

`attr("attributeName")`例如获取属性值使用`$(".class1").attr('href')`。

如果您想从指定元素中获取文本，请使用`.text()`like `$(".title").text() //will return Accountant`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T07:30:02.060

你的意思是用 jQuery 选择器选择它们？可以这样做：

```
$('.class1').attr('href') //class1 href, i persume you dont mean classA as it doesnt exist in your code
$('.class1').text(); //PersonA text using the same selector
$('.title').text(); //Accountant from the .title dd 
```

# android - gmail中的附件名称为“noname

> ID：11408468
> 
> 赞同：1
> 
> 时间：2012-07-10T07:24:15.230
> 
> 标签：android, gmail

当我通过带有音频附件的 android 发送邮件时，下载的文件的名称为“noname”，并且任何媒体播放器都不会播放它。

当文件的扩展名更改为.3gp时，该文件可以与gom player，vlc等一起使用。为什么会这样？什么是补救措施？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T14:27:34.680

听起来像这样的问题： http://productforums.google.com/forum/#!topic/gmail/ [L0rwZfE1exc](http://productforums.google.com/forum/#!topic/gmail/L0rwZfE1exc)

来自 Retailmessiah 的最佳答案：

> “它发生在来自不同 MacOS 计算机的某些编码中，但更常见的是当一个人使用 Microsoft Outlook 发送转发时。Outlook 以某种修改后的 rfc-822 编码对前一个线程进行编码，而 GMail 不能很好地使用它。”

可能想仔细查看文件附件上的编码？

# c# - 将 html 保存到服务器时的文件权限

> ID：11408469
> 
> 赞同：0
> 
> 时间：2012-07-10T07:24:17.083
> 
> 标签：c#, asp.net

我有一个问题，我想使用 asp.net 在目录中保存一个 html 文件。但是当我尝试这样做时，我得到了一个安全异常，如下所示。

```
7/10/2012 12:03:54 AM,http://www.teddytank.com/admin/AddNewsLetter.aspx?  
      nid=3,System.IO.IOException: The process cannot access the     
file   'D:\hosting\7837152\html\ne\newsletter06_07_2012_T_37.html' because it is being 
used by    another process.
at System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)
at System.IO.FileInfo.Delete()
at Admin_AddNewsLetter.Submit_Click(Object sender, EventArgs e)
7/10/2012 12:04:45 AM,http://www.teddytank.com/admin/AddNewsLetter.aspx?      
nid=3,System.IO.IOException: The process cannot access the file '
 D:\hosting\7837152\html\ne\newsletter06_07_2012_T_37.html' because it is being used by
another process.
at System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)
at System.IO.FileInfo.Delete()
at Admin_AddNewsLetter.Submit_Click(Object sender, EventArgs e) 
```

请帮忙。提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T07:27:38.303

您的文件正在被另一个进程使用，这说明了一切，您必须检查谁在使用该文件，也就是说，如果您在另一个应用程序中打开了 html 文件，还要确保您关闭了 StreamWriter 或 Filestream（例如 yourstreamwriter. close())，否​​则你会得到这个异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T07:28:07.943

尝试重置应用程序池

# php - 像 Google 一样匹配项目搜索 - PHP 代码

> ID：11408472
> 
> 赞同：1
> 
> 时间：2012-07-10T07:24:24.913
> 
> 标签：php, pattern-matching, preg-match, preg-match-all

我想写一个像这个函数（str，find）{}这样的函数，这样当我有一个像这样的str

> 大家好，大家好，大家好，大家好

并找到像“你好”这样的词，我得到了结果

```
<span class="match">Hello</span> every body, <span class="match">HeLlo</span> and <span class="match">hElLo</span> everyone blah 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T07:28:46.113

```
echo preg_replace('~Hello~i', '<span blabla>\0</span>', 'Hello every body, HeLlo and hElLo everyone blah'); 
```

给

```
<span blabla>Hello</span> every body, <span blabla>HeLlo</span> and <span blabla>hElLo</span> everyone blah 
```

# ruby-on-rails - 将 Rails 以前的项目更新到当前版本

> ID：11408476
> 
> 赞同：1
> 
> 时间：2012-07-10T07:25:02.043
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我有一个带有 ruby​​ 1.8.7、gems 1.3.6、rails 2.3.5 版本的 rails 项目

我想将项目更新到当前版本，你们可以给图片如何将旧的 Rails 应用程序更新到当前版本.. 谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T08:32:01.340

使用 gemfile 的 RVM 和 Bundler 在您所处的情况下很有帮助。

* * *

**Ruby 版本控制**

1.  安装 Ruby 版本管理器（注意如何安装） RVM 的安装文档在这里[https://rvm.io/rvm/install/](https://rvm.io/rvm/install/)
2.  安装后下载您想要使用 rvm install 1.9.3 或**rvm install 1.8.7的 RUBY 版本**
3.  然后输入**RVM use 1.8.7**，它会将您的系统设置为使用旧版本

* * *

**宝石版本控制**

*   显然你可以使用 rake 命令在 rails 2 中安装 gems

    输入**rake gems:install**

*   配置 gem 的代码位于 config/environment.rb 有一个名为“Bundler”的有用工具，它是一个 gem，可让您通过使用名为“gemfile”的文件轻松管理 gem 版本。我认为下面的链接是关于如何升级 Rails 2 项目的一个很好的资源 [http://llamarada-cinetica.heroku.com/blog/2011/02/14/using-gemfiles-on-rails](http://llamarada-cinetica.heroku.com/blog/2011/02/14/using-gemfiles-on-rails)

使用 RVM 和 gem 配置，您可以根据需要升级 gems 并检查它是否适用于您的构建。（如果我错了，请其他人纠正我，我只是在轨道上待了一会儿）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T07:31:44.957

我的建议是，如果您的客户希望您更新项目，您可以更新或者使用旧版本的 Rails 扩展应用程序功能，因为如果您升级到新的 Rails 版本，许多功能将会中断。

而且您的问题不适合在 Stackoverflow 中提问。

# android - 通过服务类接收短信

> ID：11408478
> 
> 赞同：1
> 
> 时间：2012-07-10T07:25:04.557
> 
> 标签：android, eclipse, jakarta-ee

我希望创建一个服务类来接收从广播接收器接收到的短信并更新数据库，因为我已经为 SmsService 类开发了一些代码，但它不起作用。先生请告诉我是否可以通过服务类接收短信并在后台更新数据库。如果不明白，感谢和抱歉我的发音不好。

下面是我的 SmsService 类的源代码。

公共类 SmsService 扩展服务 {

```
private SMSReceiver mSMSreceiver;
private IntentFilter mIntentFilter;

@Override
public IBinder onBind(Intent arg0) {
    // TODO Auto-generated method stub
    return null;
}
public SmsService(){
    /*dba = new DataBaseAdapter(this);*/
    mSMSreceiver = new SMSReceiver(this);
}
@Override
public void onCreate(){
    super.onCreate();       

    mIntentFilter = new IntentFilter();
    mIntentFilter.addAction(ConstantClass.SMS_RECEIVED);
    registerReceiver(mSMSreceiver,mIntentFilter);
}
@Override 
public int onStartCommand(Intent intent , int flags, int type){
    return START_STICKY;
}

@Override 
public void onDestroy(){
    super.onDestroy();
    //unregisterReceiver(mSMSreceiver);

} 
```

}

提前致谢

Om Parkash Kaushik

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T07:30:55.923

你可以检查

[http://mobiforge.com/developing/story/sms-messaging-android](http://mobiforge.com/developing/story/sms-messaging-android)

本教程展示了如何发送然后接收，当您收到文本时发出通知（toast）。

让我知道这是否有帮助！

您也可以查看 [android: register application to receive sms](https://stackoverflow.com/questions/4257045/android-register-application-to-receive-sms)了解更多详情。

谢谢

# c# - 从图形图像中获取信息

> ID：11408484
> 
> 赞同：0
> 
> 时间：2012-07-10T07:25:56.650
> 
> 标签：c#, image-processing, multidimensional-array, pixel

![在此处输入图像描述](../Images/2be30a15604ba5598b68ffb282237be3.png)

在此图像中，黑色图形位于白色背景中。我想获得图中两个峰值波之间的像素长度和峰值波的平均幅度（峰值的高度）。

我坚持实现此代码的逻辑。任何人都可以帮我实现这个。我正在使用 C#

```
public void black(Bitmap bmp)
{
         Color col;
             for (int i = 0; i < bmp.Height; i++)
             {
                for (int j = 0; j < bmp.Width; j++)
                {
                        col = bmp.GetPixel(j, i);
                        if (col.R == 0) //check whether black pixel
                        {
                            y = i;  //assign black pixel x,y positions to a variable
                            x = j;
                        }

                }                           
            }
 } 
```

我的主管告诉我必须使用二维数组来存储线的增量和减量（每个增量和减量的起点像素值和终点像素值）以获得这些值。但我没有足够的编码技能来应用它这段代码的逻辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-20T17:40:17.647

位图 img = new Bitmap(pictureBox1.Image);

```
 int width = img.Width;
        int height = img.Height;
        for (int y = 0; y < height; y++)
        {
        for (int x = 0; x < width; x++)
        {
            Color pixelColor = img.GetPixel(x, y);
        if (pixelColor.R == 0 && pixelColor.G == 0 && pixelColor.B == 0)               
            //listBox1.Items.Add(String.Format("x:{0} y:{1}", x, y));

              textBox1.Text = (String.Format("x:{0} y:{1}", x, y));

    }
    } 
```

# php - 获取具有特定 id 的标签 href 值

> ID：11408492
> 
> 赞同：1
> 
> 时间：2012-07-10T07:26:22.157
> 
> 标签：php, curl, href, getelementbyid

这是我拥有的代码，我想获取该 id 的 href 值

```
function file_get_contents_curl($url){
            $ch = curl_init();
            curl_setopt($ch, CURLOPT_HEADER, 0);
            curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
            curl_setopt($ch, CURLOPT_URL, $url);
            curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
            $data = curl_exec($ch);
            curl_close($ch);
            return $data;
}

    $str = 'someLink';
    $html = file_get_contents_curl($str);
        $doc = new DOMDocument();
        libxml_use_internal_errors(true);
        $doc->loadHTML('<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />' . $html);
        libxml_clear_errors();

        $nodes = $doc->getElementsByTagName('title');
        $hrefValue = $doc->getElementById('linker'); 
```

someLink html 示例：

```
<html>

<head>
<title></title>
</head>

<body>

<div>one</div>

<div>two</div>

<div>
<a href="link" id="linker" />LINK HERE</a>
</div>

</body>

</html> 
```

我想获取 id="linker" 的 href 值。我尝试使用 getElementById() 但它没有返回任何内容

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T07:29:26.570

```
$nodes = $doc->getElementsByTagName('title')->item(0)->nodeValue;
        $hrefValue = $doc->getElementById('linker')->getAttribute("href"); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-10T07:39:08.323

```
preg_match('/href=[\'"]?(.+?)[\'"]?.*?id=[\'"]?linker[\'"]?/si', $subject, $matches);
var_dump($matches); 
```

# javascript - 不同风格的打开弹窗

> ID：11408493
> 
> 赞同：0
> 
> 时间：2012-07-10T07:26:25.027
> 
> 标签：javascript, html

我以简单的格式显示一个弹出窗口。我想应用不同的打开弹出窗口的格式。如何应用格式或样式以使其在弹出窗口打开时看起来非常好？以下是我的源代码：

```
<div onMouseOver="show('healing')" onMouseOut="hide('healing')">
    <div id="healing" class="bgdiv" >
        <div id ="title" class="Title" >Healing</div>
        <img class="img"  src="images/healing.bmp">
        <div class="description" >Welcome Sir.</div>
    </div>
</div> 
```

javascript代码

```
<script language="JavaScript">
function show(id) 
{     
    document.getElementById(id).style.visibility = "visible"; 
} 
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T07:34:18.470

你应该看看 JQuery (http://jquery.com/)。JQuery 是一个 Javascript 框架，您可以使用效果来显示元素，如淡入淡出、幻灯片、显示/隐藏。

您所要做的就是稍微更改您的代码（Jquery 解决方案）：

```
<div id="showhealing">
    <div id="healing" class="bgdiv">
        <div id ="title" class="Title" >Healing</div>
        <img class="img" src="images/healing.bmp">
        <div class="description" > Welcome Sir.</div>
    </div>
</div>

<script>
    $('#showhealing').hover(
        function() { $('#healing').show(500) }, function() { $('#healing').hide(500) }
    );
</script> 
```

当您也使用 JQuery UI（它是 JQuery 的扩展）时，您会获得更多效果。（看看这里：http: [//jqueryui.com/demos/effect/](http://jqueryui.com/demos/effect/)）。

要使用 JQuery UI 的效果，您需要像这样更新脚本：

```
<script>
    $('#showhealing').hover(
        function() { $('#healing').show("explode", {}, 500); }, function() { $('#healing').hide("explode", {}, 500) }
    );;
</script> 
```

# select - TYPO3 选择所有页面的下拉菜单（1 级和 2 级）

> ID：11408494
> 
> 赞同：1
> 
> 时间：2012-07-10T07:26:27.630
> 
> 标签：select, typo3, typoscript

我目前正在与打字稿作斗争。我需要存档的是有一个选择框，其中包含某个页面的所有页面（第 1 级、第 2 级）。

因此，假设我有一个名为“产品”的页面，其中包含子项“产品 1”和“产品 2”。“产品 1”和“产品 2”都有自己的其他子项。

现在，我得到了以下脚本：

```
temp.drop_down_box = COA
temp.drop_down_box {
  10 = HMENU
  10 {
     # Special menu type 'directory': Get subpages of the current page
     special = directory
     # '123' is the uid of the page, for which the subpages shall be listed in the drop down box
     special.value = 35
     # Select box with JavaScript event 'onChange' that enables a jump to the target page, once an entry has been selected in the list
     wrap = <select name="dropdown_navigation" size="1" onChange="document.location.href='index.php?id=' + this.value">|</select>
     1 = TMENU
     1 {
       expAll = 1
       noBlur = 1
       NO {
         # 'value' holds the uid of the page in the list (is later appended to the target URL above)
         stdWrap.dataWrap = <option value="{field:uid}">
         allWrap = |</option>
         # Don't wrap the items in link tags
         doNotLinkIt = 1
       }
       # Inherit the 'allWrap' and 'doNotLinkIt' settings from the NO part
       CUR < copy">.NO
       CUR = 1
       CUR {
       # If we're on the current page, mark this list entry as 'selected'
         stdWrap.dataWrap = <option value="{field:uid}" selected="selected">
       }
     }
  }
} 
```

它工作得很好，但只在一个层面上。我想这样：

```
Product
- Product 1
  - Item 1
  - Item 2
  - Item 3
  - Item 4
- Product 2
  - Item 1
  - Item 2
  - Item 3 
```

... 等等。

有没有办法做到这一点？

最好的问候， 安德烈亚斯

***** 编辑：得到它的工作：****

 **```
temp.drop_down_box = COA
temp.drop_down_box {
  10 = HMENU
  10 {

    // ... {code from first part of question here} ...
    // additional levels copying 1 level and changing required values

    2 < .1
    2.NO.linkWrap = <option value="{field:uid}">-- |</option>

    3 < .1
    3.NO.linkWrap = <option value="{field:uid}">---- |</option>

  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T08:01:55.153

对于每个菜单级别，您需要添加下一个 TMENU 声明：

```
1 = TMENU
1 {
   ...
}

2 = TMENU
2 {
   ...
}

99 = TMENU
99 {
   ...
} 
```**

# algorithm - 移除一个页面表单推荐框

> ID：11408495
> 
> 赞同：0
> 
> 时间：2012-07-10T07:26:27.657
> 
> 标签：algorithm, facebook-social-plugins

[我的网站](http://www.strf.ru/)上有推荐框。
有[一个受欢迎的页面](http://www.strf.ru/material.aspx?CatalogId=221&d_no=44149)，现在不存在了。
但它仍然出现在推荐框中。

如何从插件中删除此页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T17:36:28.790

尝试转到`Page settings > Basic Information`，然后取消选中`Show this map`您的位置信息在哪里。这没有任何意义，但似乎可以解决问题。

# java - Tomcat 配置 - 多台主机

> ID：11408499
> 
> 赞同：1
> 
> 时间：2012-07-10T07:26:50.970
> 
> 标签：java, tomcat, war, restriction, hosts

我有三个 Web 服务（来自第三方供应商的 WAR 文件_托管在 Tomcat 中。每个 Web 服务都有不同的 URL（例如 website1.com、website2.com、website3.com）以及我的研究和 POC 工作已经做到了，这可以通过使用虚拟主机来实现。

两个问题： 1\. 我想限制对其中两个 Web 服务的访问，使它们只能通过内部 IP 地址访问。如何才能做到这一点？2\. 每个 Web 服务都有一个状态检查方法，可以运行该方法来检查服务是否正常工作（它轮询数据库并在 Web 服务上运行一些方法）。当它检查 Web 服务上的方法时，它使用 localhost 来调用它。但是，我的 Tomcat 配置设置为使用主机名，因此失败。如何在仍然将每个 Web 服务绑定到主机名的同时解决这个问题？

这是 Tomcat server.xml 文件中的主机配置：

```
 <Host name="website1.com"  appBase="adminapps" unpackWARs="true" autoDeploy="true">
  </Host>

  <Host name="website2.com"  appBase="packagingapps" unpackWARs="true" autoDeploy="true">
  </Host>

  <Host name="website3.com"  appBase="fulfillmentapps" unpackWARs="true" autoDeploy="true">
  </Host> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T07:50:24.557

对于第一部分，请执行以下操作之一：

*   设置防火墙规则以限制对 IP 地址白名单的访问。
*   一个简单的 HTTP 模块就可以工作。只需硬编码（或从配置）允许的 IP/主机并拒绝所有其他。

对于第二部分：

*   只需更改为：

    `<Host name="http://localhost:8080/yourWebName appBase="packagingapps" unpackWARs="true" autoDeploy="true">
    </Host>`

# php - 如果单击复选框，则将文本字段的值转换为负数

> ID：11408506
> 
> 赞同：0
> 
> 时间：2012-07-10T07:27:22.857
> 
> 标签：php, jquery, html

我有 10 个用于数值的文本字段。每一个都有一个复选框。如果选中该复选框，则在文本字段中输入的值必须转换为负值，然后保存在数据库中。如果再次检查，它应该变为阳性。

```
<td><input type="text" name="or" class="num" maxlength="5" ?>" id="or"/>db</td>
<td><input type="text" name="or2" class="num" maxlength="5" />db</td>
<td><input type="text" name="or4" class="num" maxlength="5" />db</td>
<td><input type="text" name="or8" class="num" maxlength="5" />db</td>
<td><input type="text" name="or5" class="num" maxlength="5" />db</td> 
```

每个文本框的复选框

```
<td>-<input type="checkbox" name="orneg1 " class="check1" id="org"  /></td>
<td>-<input type="checkbox" name="org2" class="check2" /></td>
<td>-<input type="checkbox" name="org4" class="check3" /></td>
<td>-<input type="checkbox" name="org8" class="check4" /></td>
<td>-<input type="checkbox" name="org5" class="check5" /></td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T07:43:53.557

这可以工作：

```
$('input[type=checkbox]').each(function(i){
   if ($(this).attr('checked') == 'checked') {
       var inputText  = $('input[type=text]:eq('+i+')');
       var inputValue = parseInt(inputText.val(),10);
       if (inputValue > 0) {
           inputValue = '-'+inputValue;
       } else {
           inputValue = (-1) * inputValue;
       }
       inputText.attr('value', inputValue);
   } 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T07:45:41.017

**工作示例演示** [http://jsfiddle.net/SQSMK/](http://jsfiddle.net/SQSMK/)

我会建议也研究一下 Jquery`isNan`和`isNumeric`api，

休息这个演示应该会有所帮助：`:)`

Ps - 我希望你有我在下面的 html 中加上一些小的调整的标签`table`。`tr`

**代码**

```
$('input[type="checkbox"]').click(function() {

    if ($(this).is(':checked')) {

        $('input[type="text"][name="' + $(this).prop('name') + '"]').val(-$('input[type="text"][name="' + $(this).prop('name') + '"]').val());

    } else {
        $('input[type="text"][name="' + $(this).prop('name') + '"]').val(-parseInt($('input[type="text"][name="' + $(this).prop('name') + '"]').val()));
    }
});​ 
```

**html**

```
<table>
    <tr>
<td><input type="text" name="or1" class="num" maxlength="5" id="or"/>db</td>
                    <td><input type="text" name="or2" class="num" maxlength="5" />db</td>
                    <td><input type="text" name="or4" class="num" maxlength="5" />db</td>
                    <td><input type="text" name="or8" class="num" maxlength="5" />db</td>
                    <td><input type="text" name="or5" class="num" maxlength="5" />db</td>
    </tr>
    <tr>

    <td>-<input type="checkbox" name="or1" class="check1" id="org"/></td>
                    <td>-<input type="checkbox" name="or2" class="check2"  /></td>
                    <td>-<input type="checkbox" name="or3" class="check3"  /></td>
                    <td>-<input type="checkbox" name="or8" class="check4" /></td>
                    <td>-<input type="checkbox" name="or5" class="check5" /></td>
    </tr>
</table​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T07:39:35.360

你在这里有两个不同的东西：

*   首先，您要在复选框上的 onClick 上添加一个行为。使用 jQuery 处理这个应该没问题。在 onClick clabback 中，如果选中该复选框，您只需将相关输入文本的值设置为 -value。否则，您将其设置为 abs(value)

*   然后您正在谈论将 satte 保存在数据库中。为此，您需要使用 ajax 调用将输入值作为键/值对传输到服务器。

我想你现在知道该怎么做就可以自己处理代码了:)

# java - 如何使用 PowerMockito 从最终静态类返回模拟对象

> ID：11408509
> 
> 赞同：3
> 
> 时间：2012-07-10T07:27:42.463
> 
> 标签：java, testng, mockito, powermock

嘿，我正在使用 Mockito 和 TestNG 为一个对服务进行大量外部调用的类编写单元测试，我实际上对此很陌生，因此对于我的确切信息，我似乎在网上几乎没有文档问题。

我的测试基本上是这样的

```
@Test
public class ClassToTestTest{

@Mock
private Object1 object1;

@Mock
private Object2 object2;

@InjectMocks
private ClassToTest classToTest;

public void test1(){
    classToTest.methodToTest();

}
...
...
} 
```

实际类如下

```
import FinalClass;

public class ClassToTest{

private Object1 object1;
private Object2 object2;

public void methodToTest(){
    object2 = FinalClass.getObject2();

    ...
    ...
}

...
...
} 
```

我只需要 FinalClass.getObject2() 来返回我在我的测试中创建的 Object2 的模拟，我知道我可以使用 PowerMock 模拟 FinalClass，但我不太了解如何将它注入我的 classToTest创建，因此当我从我的测试 object2 运行 classToTest.methodToTest() 时，会使用我的模拟实现进行初始化。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T21:47:33.560

当您希望使用 PowerMockito 模拟最终静态类时，您缺少注释 @PrepareForTest 和 mockStatic() 的使用。我认为您可能会感到困惑的地方是您正在处理一个`final static`类而不仅仅是一个`final`类，因此您需要注意一些额外的模拟调用。

鉴于这些实现类

```
/*
The final static class that's giving you all the mocking grief
*/
public final class FinalStaticClass {

    // this object instance "will not" be returned when we mock() the class
    private static MyObject obj = new MyObject();

    public static MyObject getMyObject() {
        return obj; 
    }
}

/*
A simple value object used by MyClass
*/
public class MyObject {

}

/*
The class you wish to test
*/
public class MyClass {

    private MyObject obj;

    public void methodToTest() {
        obj = FinalStaticClass.getMyObject();
        // do something
    }

    public MyObject getMyObject() {
        return obj;
    }
} 
```

确保你包含`powermock-mockito-1.4.10-full.jar`在你的项目中，然后你可以使用这个测试类

```
import static org.junit.Assert.assertEquals;
import static org.powermock.api.mockito.PowerMockito.mockStatic;
import static org.powermock.api.mockito.PowerMockito.when;

import ...    

@RunWith(PowerMockRunner.class)
@PrepareForTest(FinalStaticClass.class)
public class MyClassTest{

    @Mock
    MyObject expectedObject;

    @InjectMocks
    MyClass myClass = new MyClass();

    @Test
    public void test1(){

        // mock all static methods
        mockStatic(FinalStaticClass.class);

        when(FinalStaticClass.getMyObject()).thenReturn(expectedObject);

        // execute the method under test
        myClass.methodToTest();

        assertEquals(expectedObject, myClass.getMyObject());

    }
} 
```

您可以看到这`expectedObject`是您在测试中创建的模拟，而不是从 FinalStaticClass 返回的实现

# python - 关于python闭包

> ID：11408515
> 
> 赞同：7
> 
> 时间：2012-07-10T07:28:03.540
> 
> 标签：python, closures

下面是我从某人的博客中获得的关于 python 闭包的示例。我在 python 2.7 中运行它并得到与我预期不同的输出。

```
flist = []

for i in xrange(3):
    def func(x):
        return x*i
    flist.append(func)

for f in flist:
    print f(2) 
```

我的预期输出是：0、2、4
但输出是：
4、4、4 有没有人可以帮忙解释一下？
先感谢您。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-10T07:33:45.580

循环不会在 Python 中引入作用域，因此所有三个函数都关闭同一个`i`变量，并在循环结束后引用其最终值，即 2。

似乎几乎所有与我交谈过的在 Python 中使用闭包的人都被这个问题所困扰。推论是外部函数可以改变`i`，但内部函数不能（因为`i`根据 Python 的句法规则，这会产生局部而不是闭包）。

有两种方法可以解决这个问题：

```
# avoid closures and use default args which copy on function definition
for i in xrange(3):
    def func(x, i=i):
        return x*i
    flist.append(func)

# or introduce an extra scope to close the value you want to keep around:
for i in xrange(3):
    def makefunc(i):
        def func(x):
            return x*i
        return func
    flist.append(makefunc(i))

# the second can be simplified to use a single makefunc():
def makefunc(i):
    def func(x):
        return x*i
    return func
for i in xrange(3):
    flist.append(makefunc(i))

# if your inner function is simple enough, lambda works as well for either option:
for i in xrange(3):
    flist.append(lambda x, i=i: x*i)

def makefunc(i):
    return lambda x: x*i
for i in xrange(3):
    flist.append(makefunc(i)) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-10T07:31:32.290

您没有创建闭包。您正在生成一个函数列表，每个函数`i`在第一个循环后访问等于 2 的全局变量。因此，每个函数调用最终得到 2 * 2。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T07:35:41.810

每个函数都访问全局`i`.

[functools.partial](http://docs.python.org/library/functools.html#functools.partial)来救援：

```
from functools import partial
flist = []

for i in xrange(3):
    def func(x, multiplier=None):
        return x * multiplier
    flist.append(partial(func, multiplier=i)) 
```

# jquery - 网格单元中 jqwidget 下拉列表的数据库绑定

> ID：11408519
> 
> 赞同：1
> 
> 时间：2012-07-10T07:28:12.903
> 
> 标签：jquery, asp.net-mvc-3, javascript-framework, jqwidget

在 jqwidget 网格[单元编辑](http://www.jqwidgets.com/jquery-widgets-demo/demos/jqxgrid/index.htm)示例中（在 jqxGrid 左侧菜单下，打开 Editing/Editing），在客户端生成数据。如何将下拉列表绑定到 asp .net MVC3 项目中的数据库？（您可以在演示选项卡的产品列下看到下拉列表）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T09:27:46.750

使用数据库初始化下拉列表时，应将其绑定到数据源（或数据适配器），并应设置 selectedIndex。然后，对于行更新，所选值应保留在选择上。

列定义可能如下：

```
{ text: 'Urun', columntype: 'dropdownlist', datafield: 'UrunAdi', width: 177,
                  initeditor: function (row, cellvalue, editor) {
                      var urunId = $('#jqxgrid').jqxGrid('getcellvalue', row, "UrunId");
                      editor.jqxDropDownList({ displayMember: 'UrunAdi', source: dropdownListAdapter, selectedIndex: urunId });
                      $(document).on('select', editor, function (event) {
                          selectedUrunId = editor.jqxDropDownList('getSelectedIndex');
                      });
                  }
} 
```

变量“selectedUrunId”应该是全局定义的，可能就像`var selectedUrunId = -1;`在 jqxgrid 初始化之前一样。然后在更新行定义中（它在源定义中）应该使用下拉列表的选定值。它可能是这样的：

```
if (selectedUrunId != undefined && selectedUrunId != -1) {
                    rowdata.UrunId = selectedUrunId;
                    selectedUrunId = -1;
                } 
```

这个场景的整体场景是：

```
 // prepare the data
        var gridSource = {
            datatype: "json",
            datafields: [{ name: 'KargoId' }, { name: 'UrunAdi' }, { name: 'UrunId', type: 'int' }],
            url: 'BindGrid',
            updaterow: function (rowid, rowdata) {
                // synchronize with the server - send update command  
                if (selectedUrunId != undefined && selectedUrunId != -1) {
                    rowdata.UrunId = selectedUrunId;
                    selectedUrunId = -1;
                }                   

                var data = $.param(rowdata);

                $.ajax({
                    dataType: 'json',
                    url: 'UpdateEditGrid',
                    data: data,
                    success: function (data, status, xhr) {
                        gridDataAdapter.dataBind();                            
                    },
                    error: function (xhr, status, error) {
                        alert(JSON.stringify(xhr));
                    }
                });
            }
        };

        var gridDataAdapter = new $.jqx.dataAdapter(gridSource);

        var dropdownSource = {
            datatype: "json",
            datafields: [{ name: 'UrunId' }, { name: 'UrunAdi'}],
            url: 'BindDropdown'
        };

        var selectedUrunId = -1;
        var dropdownListAdapter = new $.jqx.dataAdapter(dropdownSource);

        // initialize jqxGrid
        $("#jqxgrid").jqxGrid(
        {
            width: 670,
            source: gridDataAdapter,
            editable: true,
            theme: theme,
            selectionmode: 'singlecell',
            columns: [
              { text: '#', datafield: 'KargoId', width: 40 },                  
              { text: 'Urun', columntype: 'dropdownlist', datafield: 'UrunAdi', width: 177,
                  initeditor: function (row, cellvalue, editor) {
                      var urunId = $('#jqxgrid').jqxGrid('getcellvalue', row, "UrunId");
                      editor.jqxDropDownList({ displayMember: 'UrunAdi', source: dropdownListAdapter, selectedIndex: urunId });
                      $(document).on('select', editor, function (event) {
                          selectedUrunId = editor.jqxDropDownList('getSelectedIndex');
                      });
                  }
              }]
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T10:10:23.197

您可以使用名为“createeditor”的函数并在其中初始化 DropDownList。

列定义：

```
{ text: 'Proyecto', columntype: 'dropdownlist', datafield: 'jobid', width: 10,
                      createeditor: function (row, cellvalue, editor) {
                          editor.jqxDropDownList({ displayMember: 'displaylabel', valueMember: 'catalogvalue', source: dropdownListAdapter });
                      }
} 
```

DropDownList 的数据适配器可以使用类似的代码进行初始化：

```
source = {
    datatype: "xml",
    datafields: [
    { name: 'CompanyName' },
    { name: 'ContactName' },
    { name: 'ContactTitle' },
    { name: 'City' },
    { name: 'Country' },
    { name: 'Address' }
    ],
    async: false,
    record: 'Table',
    url: 'Default.aspx/GetCustomers',
};
var dropdownListAdapter = new $.jqx.dataAdapter(source,
    {  contentType: 'application/json; charset=utf-8'}
); 
```

# matplotlib - Mac Lion Python 安装：Matplotlib 以 mysql 错误结尾

> ID：11408529
> 
> 赞同：0
> 
> 时间：2012-07-10T07:28:48.577
> 
> 标签：matplotlib, osx-lion, python-2.7, mysql-python

我正在我的 Mac Lion 上设置 python/numpy/scipy/matplotlib/mysql。我首先安装了 Python 2.7.3 和 mysqldb。然后我更新到 XCode 4.3.3 并使用[ScipySuperpack](http://fonnesbeck.github.com/ScipySuperpack/)安装 numpy、scipy 等。

在这一点上，我可以在 python 中导入几个包而不会发生意外，但 matplotlib 如下所示：

```
Python 2.7.3 (v2.7.3:70274d53c1dd, Apr  9 2012, 20:52:43) 
[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import numpy
>>> import scipy
>>> import _mysql
/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-           
packages/MySQL_python-1.2.3-py2.7-macosx-10.6-intel.egg/_mysql.py:3: 
UserWarning: Module _mysql was already imported from  
/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-   
packages/MySQL_python-1.2.3-py2.7-macosx-10.6-intel.egg/_mysql.pyc, but 
/Users/myname/pypy is being added to sys.path
>>> import matplotlib
Error 2002: Can't connect to local MySQL server through socket
'/tmp/mysql.sock' (2) 
```

对不起，如果问题是基本的，但我不明白警告，或者它可能与最终错误有什么关系......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T12:27:55.593

奇怪的。可能发生了一些内部命名空间冲突（假设如果您在 mysql 构建目录中就不会发生这种情况）。Matplotlib 不以任何方式使用 mysql，我从 matplotlib 源代码的克隆中检查了这一点：

```
$> grep -ir mysql * 
```

并且没有命中。但我想显而易见的答案是不要从 mysql 构建目录中导入 matplotlib ......

# svn - 是否可以在 Subversion 中保留一些关于提交的元信息

> ID：11408530
> 
> 赞同：2
> 
> 时间：2012-07-10T07:28:53.250
> 
> 标签：svn, git-svn

subversion 的一个问题是它仅通过用户名来识别提交。例如，Git 允许将全名和电子邮件地址作为元信息添加到提交中。一些组织需要难以映射到人员的用户帐户。其中一些组织还需要使用 svn。使这种情况对代码审查员可行会导致我提出以下问题：

*   *是否可以在提交中保留一些元信息，以便我可以让 svn 进行映射*？

或者如果这是不可能的，

*   *我将如何使用 git-svn 在本地系统上进行映射*？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T10:39:02.540

您可以在任何 subversion 修订上设置自定义修订属性（有关详细信息，请参阅[http://svnbook.red-bean.com/en/1.7/svn.advanced.props.html](http://svnbook.red-bean.com/en/1.7/svn.advanced.props.html)）。

```
$ svn propset property_name property_value -r<REV> --revprop
property 'property_name' set on repository revision <REV> 
```

这可以在提交后挂钩脚本中调用（脚本可以查看修订作者，查找短作者姓名以使用一些映射文件解析完整的作者信息，例如 authors.txt --- 见下文）。

Git<->SVN 翻译解决方案，如 subgit 或 git-svn 也可以使用以下格式的 authors.txt 映射：

```
shortname = Long Name <email@example.com>
anothername = Another Long Name <email2@example.com>
... 
```

对于每个 git-svn 命令（对于 git-svn --authors-file仅适用于 SVN->Git 翻译，Git->SVN 始终在用户名下创建修订版；对于 subgit，该选项可双向使用）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T20:09:01.293

如果您需要使用 git-svn 将“git 用户”映射到“颠覆用户”，我建议使用 --authors-prog 选项来“git svn clone”。例如，您将创建 my-complex-mapping.sh ，它将 subversion 用户作为其第一个参数，然后回显您希望 git 使用的“Git User”名称。然后你会运行“git svn clone --authors-prog=$HOME/my-complex-mapping.sh”

# php - 如何使用 PHP 和 JavaScript 创建进度条？

> ID：11408538
> 
> 赞同：1
> 
> 时间：2012-07-10T07:29:25.277
> 
> 标签：php, javascript, ajax, progress-bar

我在我的应用程序中使用 PHP 和 JavaScript。

我想从数据库中删除条目，这个过程需要大量时间，因此我想向最终用户报告进度。

我想知道如何实现这一点，有人可以向我解释这个理论吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T07:41:37.340

您需要 2 个脚本：

*   先删除
*   地位第二

首先向第一个脚本发出请求，然后向第二个脚本发出第二个请求，它将向您报告进度。

然后你可以使用任何jQuery插件来显示进度条。

# apache-zookeeper - Zookeeper CLI - 用空格读取 Znode

> ID：11408542
> 
> 赞同：3
> 
> 时间：2012-07-10T07:29:31.417
> 
> 标签：apache-zookeeper

是否可以通过 Zookeeper CLI 读取带有空格的 znode？

我在区域下有 2 个值（'us-west 1' 和 'us-east'）

```
 [zk: localhost:2181(CONNECTED) 11] get /regions/
 us-west 1   us-east 
```

我可以读“我们-东方”。

```
[zk: localhost:2181(CONNECTED) 11] get /regions/us-east
null
cZxid = 0xa
ctime = Tue Jul 10 12:41:49 IST 2012
mZxid = 0xa
mtime = Tue Jul 10 12:41:49 IST 2012
pZxid = 0x1b
cversion = 9
dataVersion = 0
aclVersion = 0
ephemeralOwner = 0x0
dataLength = 0
numChildren = 9 
```

但不是“美国西部 1”

```
[zk: localhost:2181(CONNECTED) 11] get /regions/us-west 1
Node does not exist: /regions/us-west 
```

我尝试了诸如 '%20'、'\'、'+' 等用于空间的选项，但没有任何效果。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-09-17T13:52:02.817

请尝试[zookeepercli](https://github.com/outbrain/zookeepercli)，如下：

```
$ zookeepercli --servers srv1,srv2,srv3 -c create "/demo_only 1" "the value"
$ zookeepercli --servers srv1,srv2,srv3 -c get "/demo_only 1" 
the value 
```

**zookeepercli**是免费和开源的。免责声明：我是这个工具的作者。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T11:33:48.980

看起来您将无法从 ZK 命令行客户端执行此操作。Zookeeper Java 客户端（可能是您正在使用的客户端）通过解析空格字符将命令（例如`get`）与其参数（例如`/regions/us-west 1`在您的情况下）分开，正如您在客户端提供的代码（例如 zookeeper-3.3 .5\src\java\main\org\apache\zookeeper\ZooKeeperMain.java）：

```
public boolean parseCommand( String cmdstring ) {
    String[] args = cmdstring.split(" ");
    if (args.length == 0){
        return false;
    }
    command = args[0];
    cmdArgs = Arrays.asList(args);
    return true;
} 
```

由于它们被“”分割，除非您`split`在调用命令时找到一种通过某种转义来克服该调用的方法，否则您`get`将无法使用此客户端检索这些节点。上面的代码将您的`1`in`get`调用解释为参数，如您在命令语法`watch`中所见：`get`

> 获取路径 [观看]

我建议您使用不同的字符，例如“_”，而不是 znodes 命名上的空格。如果这不是一个选项，您将需要自己修改 ZK Java 客户端，或者使用其他客户端。

# api - 使用 Zend 上传到 Google Docs 时出现错误 403 403.4

> ID：11408545
> 
> 赞同：0
> 
> 时间：2012-07-10T07:29:50.657
> 
> 标签：api, zend-framework, doc

我尝试在 Zend Gdata 演示中使用 google docs sample 并得到以下错误：

> 致命错误：在 F:\PHP_libs\Zend\Gdata\App.php:714 中未捕获的异常 'Zend_Gdata_App_HttpException' 和消息 'Expected response code 200, got 403 403.4 SSL required' 堆栈跟踪：#0 F:\PHP_libs\Zend\Gdata .php(219): Zend_Gdata_App->performHttpRequest('GET', 'http://docs.goo...', Array, NULL, NULL, NULL) #1 F:\PHP_libs\Zend\Gdata\App.php (880): Zend_Gdata->performHttpRequest('GET', 'http://docs.goo...', Array) #2 F:\PHP_libs\Zend\Gdata\App.php(768): Zend_Gdata_App->get ('http://docs.goo...', NULL) #3 F:\PHP_libs\Zend\Gdata\App.php(210): Zend_Gdata_App->importUrl('http://docs.goo... ', 'Zend_Gdata_Docs...', NULL) #4 F:\PHP_libs\Zend\Gdata.php(162): Zend_Gdata_App->getFeed('http://docs.goo...', 'Zend_Gdata_Docs... ') #5 楼：\PHP_libs\Zend\Gdata\Docs.php(130): Zend_Gdata->getFeed('http://docs.goo...', 'Zend_Gdata_Docs...') #6 F:\xampp\htdocs\ZendGdata- 1.11.12\demos\Zend\Gdata\Docs.php(277): Zend_Gdata_Docs->getDocumentListFeed('http://docs.goo...') #7 F:\xampp\htdocs\ZendGdata-1.11.12\ demos\Zend\Gdata\Docs.php(752)：在第 714 行的 F:\PHP_libs\Zend\Gdata\App.php 中检索 WPD

我第一次使用 Zend 库，无法弄清楚授权是如何在这里工作的。请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T21:46:38.440

我不确定这是否在最新版本的 Zend 库中得到修复，但我在 Zend 安装中更新了这个文件：library/Zend/Gdata/Docs.php

需要更新第 62 行周围的常量以将 http 更改为 https，在我的安装中现在看起来像这样：

```
const DOCUMENTS_LIST_FEED_URI = 'https://docs.google.com/feeds/documents/private/full';
const DOCUMENTS_FOLDER_FEED_URI = 'https://docs.google.com/feeds/folders/private/full';
const DOCUMENTS_CATEGORY_SCHEMA = 'https://schemas.google.com/g/2005#kind';
const DOCUMENTS_CATEGORY_TERM = 'https://schemas.google.com/docs/2007#folder'; 
```

那成功了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T19:28:55.143

如果您想连接到 GoogleDocs，则必须使用`https`而不是，这在您收到的错误消息中说明： . 消息的部分解释如下：`http``Expected response code 200, got 403 403.4 SSL required`

*   `Expected response code 200`：被调用的方法期望http响应代码是`200`
*   `got 403`：实际收到的http代码
*   `403.4 SSL required`：代码的简短描述

查看[HTTP 状态代码列表](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes)以获取更多信息。

Zend 框架中的示例[：文档：使用 Google 文档列表数据 API - Zend 框架手册](http://framework.zend.com/manual/en/zend.gdata.docs.html)不是最新的，应该是这样的：

```
$feed = $docs->getDocumentListFeed(
    'https://docs.google.com/feeds/documents/private/full/-/document'); 
```

# php - 需要表单操作查询字符串中的下拉选项值

> ID：11408546
> 
> 赞同：0
> 
> 时间：2012-07-10T07:29:55.723
> 
> 标签：php, javascript, jquery, html

我正在使用 PHP + HTML

我有一个表单，其动作定义如下：

1]表单action="index.php?option=com_advertisment&task=keysearch&Itemid=2&catid=this.options[this.selectedIndex].value"

但是当我提交表单时，查询字符串中未显示下拉的选定值。

这意味着`this.options[this.selectedIndex].value`不是替换为，`value`而是在查询字符串中出现，如下所示：

> http://mydemoserver.com/index.php?option=com_advertisment&task=keysearch&Itemid=2&catid=this.options[this.selectedIndex].value

如果有人知道解决方案，请帮助我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T07:34:26.800

看起来您正试图错误地混合 HTML 和 JS。

如果您有`<form>`标签，只需将所有字段都放在标签内。

如果您希望前三个查询参数对是静态的，您可以将它们写入隐藏`<input>`标签内。

例如：

```
<form action = "index.php" method = "GET">

<input type = "hidden" name = "option" value = "com_advertisment" />
<input type = "hidden" name = "task" value = "keysearch" />
<input type = "hidden" name = "Itemid" value = "2" />

<select name = "catid">
    <option value = "1">Some option</option>
    <option value = "2">Another option</option>
</select>

<input type = "submit" />

</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T07:35:09.897

确保您已`name`为下拉/选择框提供属性。

`eg. <select name="foobar"><option value='first'>First</option></select>`

并将您的 action 属性更改`<form>`为`index.php`only 和`method='get'`

因此，一旦您提交表单，所有数据将通过 get 方法发送到您的 php 页面（在本例中为 index.php），您可以使用`$_GET['foobar']`.

# c# - 无法再次打开表单 - 不断出现错误

> ID：11408550
> 
> 赞同：0
> 
> 时间：2012-07-10T07:30:02.663
> 
> 标签：c#

当我第二次打开在运行时创建的表单时，我不断收到错误消息“无法访问已处置的对象”。“对象名称'Form'” 这里是函数的代码。它由 buttonclick 事件调用。我查看了整个网络，发现有类似问题的人，但是我尝试了这些修复，但没有一个有效。不知道如何解决这个问题。VS 高亮显示 frmFavorites.Show();

先感谢您。

```
public void frmMyBrowser_ShowFavorites(object sender, EventArgs e)
{        
    frmFavorites.ShowIcon = false;
    frmFavorites.ShowInTaskbar = false;
    frmFavorites.Text = "Bookmarks";
    frmFavorites.Width = 500;
    frmFavorites.Height = 320;
    frmFavorites.Controls.Add(lstFavorites);
    frmFavorites.Controls.Add(btnRemoveFavorite);
    frmFavorites.Controls.Add(btnAddFavorite);
    frmFavorites.Controls.Add(txtCurrentUrl);
    lstFavorites.Width = 484;
    lstFavorites.Height = 245;
    btnRemoveFavorite.Location = new Point(397, 255);
    btnAddFavorite.Location = new Point(8, 255);
    txtCurrentUrl.Location = new Point(110, 255);
    txtCurrentUrl.Size = new Size(265, 20);
    btnAddFavorite.Text = "Add";
    btnRemoveFavorite.Text = "Remove";
    txtCurrentUrl.Text = wbBrowser.Url.ToString();
    btnAddFavorite.Click += new EventHandler(btnAddFavorite_Click);
    btnRemoveFavorite.Click += new EventHandler(btnRemoveFavorite_Click);
    frmFavorites.Load += new EventHandler(frmFavorites_Load);
    frmFavorites.Show();
    frmFavorites.FormClosed += new FormClosedEventHandler(frmFavorites_FormClosed);

    StreamReader reader = new System.IO.StreamReader(@Application.StartupPath + "\\favorites.txt");
    {
        while (!reader.EndOfStream)
        {
            for (int i = 0; i < 4; i++)
            {
                string strListItem = reader.ReadLine();
                if (!String.IsNullOrEmpty(strListItem))
                {
                     lstFavorites.Items.Add(strListItem);
                }
            }
        }
        reader.Close();   
    }        
}

public void btnAddFavorite_Click(object sender, EventArgs e)
{
    lstFavorites.Items.Add(wbBrowser.Url.ToString());
}

public void btnRemoveFavorite_Click(object sender, EventArgs e)
{
    try
    {
        lstFavorites.Items.RemoveAt(lstFavorites.SelectedIndices[0]);
    }
    catch
    {
        MessageBox.Show("You need to select an item", "Error");
    }
}
public void frmFavorites_Load(object sender, EventArgs e)
{       
}

public void frmFavorites_FormClosed(object sender, FormClosedEventArgs e)
{
    StreamWriter writer = new System.IO.StreamWriter(@Application.StartupPath + "\\favorites.txt");
    {
        for (int i = 0; i < lstFavorites.Items.Count; i++)
        {
            writer.WriteLine(lstFavorites.Items[i].ToString());
        }
        writer.Close();
    }
    frmFavorites.Close();
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T07:32:57.770

试试这个

```
public void frmMyBrowser_ShowFavorites(object sender, EventArgs e)
{
  frmFavorites = new Form();

   ....
   ....

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T07:44:45.090

您无法重新打开已关闭的表单。当窗体关闭时 (1) 它被释放并且 (2) 底层操作系统窗口句柄被释放。

我想您*可能*能够获取表单构造函数的内容并将其放入您可以调用以重新打开表单的方法中，但我真的不建议这样做，即使它确实有效。

相反，只需创建表单的一个新实例。

# c++ - 生成序列 1,3,8,22,60,164 。如何让我的代码更高效？

> ID：11408554
> 
> 赞同：-1
> 
> 时间：2012-07-10T07:30:16.877
> 
> 标签：c++, sequence

```
#include <vector>
#include<iostream>
#include<stdio.h>
#define REP(i,n) for (ll i = 1; i <= n; i++)
using namespace std;

typedef unsigned long long int ll;
typedef vector<vector<ll> > matrix;
ll MOD = 1000000007;
const ll K = 2;

// computes A * B
matrix mul(matrix A, matrix B)
{
    matrix C(K+1, vector<ll>(K+1));
    REP(i, K) REP(j, K) REP(k, K)
        C[i][j] = (C[i][j] + A[i][k] * B[k][j]) % MOD;
    return C;
}

// computes A ^ p
matrix pow(matrix A, ll p)
{
    if (p == 1)
        return A;
    if (p & 1)
        return mul(A, pow(A, p-1));
    matrix X = pow(A, p>>1);
    return mul(X, X);
}

// returns the N-th term of Fibonacci sequence
ll fib(ll N)
{
    // create vector F1
    vector<ll> F1(K+1);
    F1[1] = 1;
    F1[2] = 3;

    // create matrix T
    matrix T(K+1, vector<ll>(K+1));
    T[1][1] = 0, T[1][2] = 1;
    T[2][1] = 2, T[2][2] = 2;

    // raise T to the (N-1)th power
    if (N == 1)
        return 1;
    T = pow(T, N-1);

    // the answer is the first row of T . F1
    ll res = 0;
    REP(i, K)
        res = (res + ((T[1][i] )* (F1[i]))) %MOD;
    return res;
}
ll fib2(ll n)
{
    if(n==1)
    return 1;
    ll a=1;ll b=3;ll c;
    for(ll i=3;i<=n;i++)
    {
        c=(2*a+2*b)%MOD;
        a=b;
        b=c;
    }
    return c;
}
int main()
{
    ll t;
    scanf("%llu",&t);
   // t=10000;
    ll n=1;
    while(t--)
    {
        scanf("%llu",&n);
        //n=1;
       // n++;
     //  n=1000000000;
        printf("%llu\n",fib(n));
    }
    return 0;
} 
```

我正在编写代码来生成 1,3,8,22,60,164 a[n]=2*(a[n-1]+a[n-2]) mod 10^9+7 。我正在使用模幂以及生成此序列的矩阵乘法方法。对于最坏的情况，即 n=10^9 ，如何将其时间从 2.3 秒缩短。10000 次到大约 0.5 到 1 秒？请给我建议以提高此代码的速度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T08:10:46.630

[https://en.wikipedia.org/wiki/Strassen_algorithm](https://en.wikipedia.org/wiki/Strassen_algorithm)

您甚至可以在 MIT Opencourseware Intro to Algorithms 课程或斯坦福的算法课程的视频讲座中找到它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T09:15:25.733

如果您专注于 2x2 矩阵，您将获得显着的加速：

```
struct matrix {
  ll a, b, c, d ;
  void Square() ;
  void Mul (const matrix& M) ;
  } ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T09:17:05.163

我怀疑`vector`是这里的罪魁祸首 - 动态分配和数字的东西不能很好地混合。
2x2 矩阵对于任何花哨的算法来说都太小了，无法产生任何影响。我有一种预感，由于花哨的开销，它们实际上会*更糟。*

您是否尝试过展开循环并放弃动态分配？

我*希望*这是正确的：

```
void mul(ll A[][2], ll B[][2], ll C[][2])
{
    C[0][0] = (A[0][0] * B[0][0]) % MOD;
    C[0][0] = (C[0][0] + A[0][1] * B[1][0]) % MOD;

    C[0][1] = (A[0][0] * B[0][1]) % MOD;
    C[0][1] = (C[0][1] + A[0][1] * B[1][1]) % MOD;

    C[1][0] = (A[1][0] * B[0][0]) % MOD;
    C[1][0] = (C[1][0] + A[1][1] * B[1][0]) % MOD;

    C[1][1] = (A[1][0] * B[0][1]) % MOD;
    C[1][1] = (C[1][1] + A[1][1] * B[1][1]) % MOD;
}

void pow(ll A[][2], ll p, ll out[][2])
{
    if (p == 1)
    {
        out[0][0] = A[0][0];
        out[0][1] = A[0][1];
        out[1][0] = A[1][0];
        out[1][1] = A[1][1];
        return;
    }
    if (p & 1)
    {
        ll B[2][2] = {{0}};
        pow(A, p - 1, B);
        mul(A, B, out);
    }
    else
    {
        ll X[2][2] = {{0}};
        pow(A, p >> 1, X);
        mul(X, X, out);
    }
}

ll fibv(ll N)
{
    ll T[2][2] =
    {
        {2, 2},
        {1, 0}
    };

    if (N == 1)
        return 1;
    ll RM[2][2] = {{0}};
    pow(T, N-1, RM);
    ll res = RM[0][1] % MOD;
    res = (res + RM[0][0] * 3) % MOD;
    return res;
} 
```

# iphone - iPhone：iOS 4.3 上的 SHA1 哈希

> ID：11408555
> 
> 赞同：1
> 
> 时间：2012-07-10T07:30:26.843
> 
> 标签：iphone, hash, sha1

我在我的应用程序中对来自 NSString 的 SHA1 哈希使用以下函数：

```
-(NSString *)stringToSha1:(NSString *)str{
    const char *cstr = [str cStringUsingEncoding:NSUTF8StringEncoding];
    NSData *data = [NSData dataWithBytes:cstr length:str.length];

    uint8_t digest[CC_SHA1_DIGEST_LENGTH];

    CC_SHA1(data.bytes, data.length, digest);

    NSMutableString* output = [NSMutableString stringWithCapacity:CC_SHA1_DIGEST_LENGTH * 2];

    for(int i = 0; i < CC_SHA1_DIGEST_LENGTH; i++)
        [output appendFormat:@"%02x", digest[i]];

    return output;

} 
```

这在我的带有 ios 5.0 及更高版本的 iphone 设备上就像一个魅力，但在我运行 4.3.5 版的 iPad 上它在线崩溃

```
CC_SHA1(data.bytes, data.length, digest); 
```

它说：

> dyld：惰性符号绑定失败：由于无法加载依赖的 dylib #3，因此无法解析符号 _CC_SHA1
> 
> dyld：无法解析符号 _CC_SHA1，因为无法加载依赖的 dylib #3

关于如何让它在我的 iPad 4.3.5 设备上运行的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T07:53:01.287

如果您查看头文件，您会看到：

```
extern unsigned char *CC_SHA1(const void *data, CC_LONG len, unsigned char *md) __OSX_AVAILABLE_STARTING(__MAC_10_4, __IPHONE_5_0); 
```

这`__OSX_AVAILABLE_STARTING(...)`意味着该功能仅适用于 OS X 10.4+ 和 iOS 5.0+。这就是您的应用程序崩溃的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T15:32:12.397

自己找到了解决方案，但我不知道它为什么会起作用。

从我的项目中删除框架“libcommonCrypto.dylib”，清理，构建并且它工作。

在 IOS 4.1 和 4.3 上测试过，效果很好。

# c# - 如何在C#中搜索类中的字符串

> ID：11408557
> 
> 赞同：11
> 
> 时间：2012-07-10T07:30:31.983
> 
> 标签：c#, asp.net, asp.net-mvc, string, nlp

我正在开发一个应用程序，其中我有一些从网络获取的数据到一个类中。类是

```
public class Detail
{
        public string name { get; set; }
        public List<Education> education { get; set; }
        public City city { get; set; }
        public List<Work> work { get; set; }
}

public class Education
{
        public string DegreeName { get; set; }
}

public class City 
    {
        public string name { get; set; }
    }
public class Work
    {
        public string name { get; set; }
    } 
```

为上述类中的人存储数据。

现在我想搜索一个字符串说`q=" Which Manager Graduated From USA ?"`

所以我希望它搜索上述查询...

根据匹配的单词数量，我想给出用户的名称。*如果他是从美国毕业的经理*，那么正在寻找人吗？*（可能会少一些字，像一些印度导演*一样搜索）

我正在尝试寻找像*Manager* in`Work`和*Graduate* in`Education`和*Location* for这样的词的方法`USA`

我正在制作一个搜索字符串数组

```
string[] qList = q.Split(' '); 
```

然后遍历类。但我不知道如何（有效地）在课堂上查找数据。

我的方法对于搜索是否足够好，还是有更好的选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T07:58:47.877

我有点担心你试图实现的机制，如果用户类型`q=" Manager Graduated From USA ?"`，意思是没有把“which”这个词放在里面，所以你必须按照建议使用像 ANTLR 这样的查询语言。

我的建议是给用户下拉列表，首先必须包含工作属性的值，第二必须包含教育的值，然后是输入城市的文本框。

将这些值传递给您的方法后，使用 LINQ 从您的集合中获取数据，例如：

```
var filteredResults = from result in YOURDETAILCOLLECTION
                      where result.city.Contains(YOURCITYTEXTBOXVALUE)
                      select result; 
```

您可以搜索机制，如何`where`在`LINQ`.`List`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T07:39:52.330

您正在开发的是一种人类可读和可写的查询语言。从字符串拆分开始可能是一个很好的开始，但想象一下搜索的可能性：搜索一个城市或一系列城市的人，搜索在 500 强公司或某个领域工作的人。

为此，您应该开发一种查询语言。具有易于更改和记录的语法。看看[ANTLR](http://www.antlr.org/)一个与 C#/.NET 配合得很好的解析器生成器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T11:00:54.810

如果可能，请尝试使用[Lucene .NET](http://incubator.apache.org/lucene.net/)或类似的搜索技术（如 Solr 或 ElasticSearch）来索引您的数据。这些技术针对搜索进行了优化，并为您提供了许多提高结果排名的选项。它可以轻松回答您开篇文章中的问题，而且速度非常快。自己实现此功能将非常困难。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T07:40:28.737

如果您有许多您知道将存在的领域——比如教育和工作——我建议为每个领域准备一系列同义词和与单词相关的词。

所以，对于教育，你可以有一个这样的单词列表：

```
Graduate, University, School, Learning, Taught e.t.c 
```

做这样的事情？

显然，您无法匹配每个单词，但可能值得一试？

或者您可以尝试在每个字段中包含标签，而不仅仅是单词。因此，与其说“我从大学毕业”，不如说你有一个教育领域，然后是一个大学子领域，他们把名字放在那里。

这一切都是为了限制错误，请记住人类可能会犯数百万个您无法以编程方式处理的错误。

# mysql - 如何在mysql中将所有行结果计为1？

> ID：11408558
> 
> 赞同：-1
> 
> 时间：2012-07-10T07:30:32.233
> 
> 标签：mysql, database, count

我有两张桌子。“tbl_a”包含患者和医院的字段，“tbl_b”是咨询。现在我的问题是只计算在“tbl_b”中有 4 条记录的患者，这样如果患者在“tbl_b”中有 4 条记录，则它计为 1。我只希望在使用 mysql coz 时得到这个结果，我需要这个在事件调度程序中运行。简而言之，我想计算在每家医院进行 4 次咨询的所有患者。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T08:06:20.250

假设表患者和咨询由患者 ID 加入

```
SELECT * FROM patients
JOIN (SELECT IF(COUNT(patient_id) = 4, patient_id, NULL) AS con 
    FROM consultation 
    GROUP BY patient_id) AS con 
        ON con.patient_id = patients.patient_id
GROUP BY patient_id 
```

连接表将只获得来自咨询的数字，即 4，而所有其他数字均为 NULL，因此该案例中的连接子句将导致患者的咨询记录总数仅为 4

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T07:38:02.980

使用此解决方案：

```
SELECT patient
FROM tbl_b
GROUP BY patient
HAVING COUNT(1) >= 4 
```

如果您只想让患者进行四次咨询，而***不是***四次或更多次，请更改为`>=`。`=`

 *也许您想要***计算****有四次或更多咨询的患者*的数量......在这种情况下，您可以将上面的内容包装起来`SELECT`并计算行数：

```
SELECT COUNT(1)
FROM
(    
    SELECT patient
    FROM tbl_b
    GROUP BY patient
    HAVING COUNT(1) >= 4
) a 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T08:37:39.283

尝试这个

```
 SELECT 
         COUNT(consultation )/4 AS Patient_Number 
 FROM 
         tbl_b

 GROUP BY 
         consultation 
 HAVING
         (COUNT(consultation ) % 4) = 0 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T07:35:45.133

尝试这个 ：：

```
Select *, count(1) 
from table_a a 
inner join table_b b 
inner join on (a.patient_id=b.patient_id) 
group by b.patient_id having count(1) =4 
```*

# javascript - “类”常量和构造函数：如何实现？

> ID：11408564
> 
> 赞同：1
> 
> 时间：2012-07-10T07:30:52.750
> 
> 标签：javascript

我想在 javasript 中实现类似的东西：

```
var hat = new Hat(Hat.Color.RED, Hat.Size.MEDIUM); 
```

请问我该怎么做（试图弄乱功能`prototype`但取得了一点成功）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T07:35:55.873

如果您创建这样的`Hat`构造函数，则可以这样做：

```
function Hat(color, size) {
  this.color = color;
  this.size = size;
}
Hat.Color = {
  RED: "#F00",
  GREEN: "#0F0",
  BLUE: "#00F"
};
Hat.Size = {
  SMALL: 0,
  MEDIUM: 1,
  LARGE: 2
} 
```

然后您可以创建一个`new Hat`并获取它的属性

```
var hat = new Hat(Hat.Color.RED, Hat.Size.MEDIUM);
var hatColor = hat.color; // "#F00" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-10T07:36:10.710

`Hat`将是一个构造函数：

```
function Hat(color, size) {
    this.id = "X"+color+size; // or anything else
} 
```

在原型上是“方法”，`Hat`例如：

```
Hat.prototype.raise = function() {
    ...
}; 
```

但是常量是 Function 对象的属性：

```
Hat.Color = {
    RED: "F00",
    GREEN: "0F0",
    ...
};
Hat.Size = {
    MEDIUM: 0,
    LARGE: 1,
    ...
}; 
```

如果您的库正确实现了“扩展”功能（构造函数没有什么特别的），这也应该有效：

```
Object.extend(Hat, {
    Color: {RED: "F00", GREEN: "0F0", ...},
    Size: = {MEDIUM: 0, LARGE: 1, ...},
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T07:45:46.763

这是功能继承方式。它区分私有和公共方法和变量。

```
var Hat = function (color, size) {
  var that = {};
  that.Color = { RED: 'abc'};  // object containing all colors
  that.Size = { Medium: 'big'}; // object containing all sizes
  that.print = function () {
    //I am a public method
  };
  // private methods can be defined here.
  // public methods can be appended to that.
  return that;  // will return that i.e. all public methods and variables
} 
```

# php - 从 PHP 调用 Windows Forms .NET EXE

> ID：11408571
> 
> 赞同：1
> 
> 时间：2012-07-10T07:31:34.087
> 
> 标签：php, .net, exe

我在 stackoverflow 上看过很多帖子，但没有一个有帮助。

我（我）试图运行一个 .NET Windows 窗体应用程序（它不包含任何内容`forms/GUI/dialogs/so`，但由于应用程序的性质，它必须是 Windows 窗体）。我试过`shell_exec()`, `exec()`, `passthru()`, 等等，但都失败了（它们需要无限长的时间，而且 PHP 脚本永远不会终止）

然后，我尝试运行一个简单的 C++（非托管）控制台应用程序 - 它工作并返回正确的输出和返回代码。

然后，我想，也许我可以调用这个 C++ EXE 并让它进一步调用一个 Windows 应用程序（即在 C++ 中使用`SYSTEM("path_to_exe.exe");`）当我编译它时它工作得很好，但是再次，

当 PHP 调用此控制台（使用新代码运行 .NET EXE）时，PHP 再次花费无限时间并且永不停止。为什么？

**有没有一种方法可以让我在服务器上从 PHP 成功运行我的 .NET EXE？**

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T09:34:29.343

"Is there any one way I can successfully run my .NET EXE on Server from PHP?" : Your EXE is already running !

So the problem is in your .NET EXE, i don't know what kind of EXE it is but you may use [AutoIt](http://www.autoitscript.com/site/autoit/downloads/) scripting to execute it and then close the process after X seconds, here's a snippet of code (don't forget to compile it):

```
Run("C:\Program Files (x86)\K-Lite Codec Pack\Media Player Classic\mpc-hc.exe"); // You may use a relative path !
Sleep(5000); // Wait for 5 seconds
ProcessClose("mpc-hc.exe"); // Close the process 
```

# asp.net - UserControl 导致完全回发

> ID：11408572
> 
> 赞同：2
> 
> 时间：2012-07-10T07:31:35.143
> 
> 标签：asp.net, user-controls, updatepanel

我在更新面板中有占位符。在 Page_Load 我通过以下代码加载用户控件：

```
Control ctrl = LoadControl("~/UserControls/ListViewThumbs.ascx");
ucThumbs = (ListViewThumbs)ctrl;
ucThumbs.ID = "ucThumbs";

ucThumbs.SelectedIndexChanged += new UserControlSelectedIndexChanged(listView_SelectedIndexChanging);
ucThumbs.ItemDoubleClicked += new UserControlItemDoubleClicked(UserControlDoubleClicked);

ucPH.Controls.Clear();
ucPH.Controls.Add(ucThumbs);

AsyncPostBackTrigger trigger = new AsyncPostBackTrigger();
trigger.ControlID = ucThumbs.UniqueID;
trigger.EventName = "ItemDoubleClicked";
updateMyDocs.Triggers.Add(trigger); 
```

下面的aspx代码：

```
<asp:UpdatePanel ID="updateMyDocs" UpdateMode="Always" ChildrenAsTriggers = "true" EnableViewState = "true" runat="server">
<ContentTemplate>
    <asp:PlaceHolder ID="ucPH" runat="server"></asp:PlaceHolder>
</ContentTemplate> 
```

单击用户控件会导致完全回发。我该如何预防？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T14:40:27.240

我会将更新面板放在 userControl 内部而不是外部。

当您将 UserControls 放入其中时，更新面板会出现这样的问题

# jsf - DataExporter 不适用于 Primefaces 3.2 中的过滤数据表

> ID：11408577
> 
> 赞同：1
> 
> 时间：2012-07-10T07:31:59.520
> 
> 标签：jsf

在我的应用程序中，我使用全局过滤器来搜索 Primefaces DataTable 中的记录，并且我在同一个 DataTable 上应用了 DataExporter。

当我搜索任何记录并进行导出时，它会返回一个完整的数据列表而不是过滤列表。

我的开发环境是：java 6.0、Primefaces 3.2、JSF2.1、GlassFish Server 3.1.2、Netbeans 7.1.1

* * *

在我的 dataTable 和 dataExporter 代码下方列出。

我的数据表代码是::

```
 <p:dataTable value="#{personnelController.allItems}" 
                                     emptyMessage="#{bundle.PersonnelEmpty}"
                                     selectionMode="single"
                                     dblClickSelect="false"
                                     var="item"
                                     id="tbl"
                                     rowKey="#`enter code here`{item.id}"
                                     sortBy="#{item.lastName}"
                                     sortOrder="ascending"
                                     widgetVar="itemTable"
                                     paginator="true"
                                     paginatorPosition="bottom"
                                     paginatorAlwaysVisible="false"
                                     currentPageReportTemplate="Page {currentPage} of {totalPages}"
                                     paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}"
                                     rows="10"
                                     >
                            <f:facet name="header">  
                                <p:outputPanel>  
                                    <h:outputText value="#{bundle.GlobalFilterPrompt}" />  
                                    <p:inputText id="globalFilter" 
                                                 onkeyup="itemTable.filter()" 
                                                 style="width:150px;" 
                                                 />  
                                    <p:watermark for="globalFilter" value="#{bundle.GlobalFilterWatermark}" />
                                </p:outputPanel>  
                            </f:facet>  
                            <p:ajax event="rowSelect" listener="#{personnelController.onRowSelectNavigate}" /> 

                            <p:column 
                                sortBy="#{item.lastName}"
                                filterBy="#{item.lastName}"
                                filterStyle="display: none;"
                                >
                                <f:facet name="header">
                                    <h:outputText value="#{bundle.PersonnelTitle_lastName}"/>
                                </f:facet>
                                <h:outputText value="#{item.lastName}"/>
                            </p:column>
                            <p:column 
                                sortBy="#{item.firstName}"
                                filterBy="#{item.firstName}"
                                filterStyle="display: none;" 
                                >
                                <f:facet name="header">
                                    <h:outputText value="#{bundle.PersonnelTitle_firstName}"/>
                                </f:facet>
                                <h:outputText value="#{item.firstName}"/>
                            </p:column>
                            <p:column 
                                sortBy="#{item.location.name}"
                                filterBy="#{item.location.name}"
                                filterStyle="display: none;"
                                >
                                <f:facet name="header">
                                    <h:outputText value="#{bundle.PersonnelTitle_locations}"/>
                                </f:facet>
                                <h:outputText value="#{item.location.name}"/>
                            </p:column>
                            <p:column 
                                sortBy="#{item.department.name}"
                                filterBy="#{item.department.name}"  
                                filterStyle="display: none;"
                                >
                                <f:facet name="header">
                                    <h:outputText value="#{bundle.PersonnelTitle_departments}"/>
                                </f:facet>
                                <h:outputText value="#{item.department.name}"/>
                            </p:column>

                        </p:dataTable> 
```

我正在将数据表外部的表数据导出为::

```
 <h:commandLink>  
      <p:graphicImage value="#{resource['images:excel.png']}" />  
      <p:dataExporter type="xls" target=":personnel:tbl" fileName="personnel" />  
 </h:commandLink> 
```

如果我做错了什么，请建议我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T05:52:38.023

这是我的用户表示例：

```
<p:dataTable id="table" value="#{myBean.users}" var="usr" rowKey="#{usr.username}" widgetVar="usrwv">
        <f:facet name="header">  
            <p:outputPanel>  
                 <h:outputText value="Search all fields:" />  
                 <p:inputText id="globalFilter" onkeyup="usrwv.filter()" style="width:150px" />  
            </p:outputPanel>  
        </f:facet>
        <p:column headerText="Username" sortBy="#{usr.username}" filterBy="#{usr.username}">
               <f:facet name="header">  
                     Username
               </f:facet>
               <h:outputText value="#{usr.username}"/>
        </p:column>
        <p:column headerText="Role" sortBy="#{usr.role}" filterBy="#{usr.role}">
                <f:facet name="header">  
                     Role
                </f:facet>
                <h:outputText value="#{usr.role}"/>
        </p:column>
        <f:facet name="footer">
                <h:commandLink>  
                     <p:graphicImage value="/resources/images/excel.ico" title="myExcel"/>
                     <p:dataExporter type="csv" target="table" fileName="all_users"/>  
                </h:commandLink>
        </f:facet>
</p:dataTable> 
```

此外，您将导出器和数据表放在两种不同的形式中。尝试将它们放在相同的形式中。这应该有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-07T04:51:51.047

在 pom.xml 中：

```
<dependency>
   <groupId>org.apache.poi</groupId>
   <artifactId>poi</artifactId>
   <version>3.10.1</version>
</dependency>

<dependency>
   <groupId>com.itextpdf</groupId>
   <artifactId>itextpdf</artifactId>
   <version>5.5.3</version>
</dependency> 
```

并替换：

```
<h:commandLink>  
      <p:graphicImage value="#{resource['images:excel.png']}" />  
      <p:dataExporter type="xls" target=":personnel:tbl" fileName="personnel" />  
 </h:commandLink>

 <h:commandLink>  
      <h:graphicImage value="#{resource['images:excel.png']}" />  
      <p:dataExporter type="xls" target=":personnel:tbl" fileName="personnel" />  
 </h:commandLink> 
```

# html - 仅在右侧具有边框渐变的 div

> ID：11408578
> 
> 赞同：1
> 
> 时间：2012-07-10T07:32:04.010
> 
> 标签：html, border, css

我在我的css中有一个div，我想只在右边应用一个边框渐变是可能的吗？其他解决方案是将图像放在右侧或在我的边框上应用图像，所有浏览器都支持还是我必须将图像放入右侧的 div 中？这是我的 CSS 代码：

```
#navigation li{
    list-style:none;
}

    #navigation li{
        margin: 0;
        width:126px;
        height:40px;
        padding-left:0px;
        padding-right:0px;
        list-style:none;
        float:left;

        border-color:gradient(start=#fff, end=#000, midpoint=50%);//works? and for other browser?

    } 
```

我的html：

```
<div id="navigation">
            <ul>
                <li><a href="index.php" id="index_btn">HOME</a></li>
                <li><a href="#" id="">AZIENDA</a></li>
                <li><a href="#" id="">PRODOTTI</a></li>
                <li><a href="#" id="">PARTNER</a></li>
                <li><a href="#" id="">NEWS</a></li>
                <li><a href="#" id="">CONTATTI</a></li>
            </ul>
        </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T07:42:14.547

WebKit 现在（至少 Chrome 12）支持渐变作为边框图像：

```
-webkit-border-image: -webkit-gradient(linear, left top, left bottom, from(#00abeb), to(#fff), color-stop(0.5, #fff), color-stop(0.5, #66cc00)) 21 30 30 21 repeat repeat; 
```

证明链接——http: [//www.webkit.org/blog/1424/css3-gradients/](http://www.webkit.org/blog/1424/css3-gradients/)

**注意：**最好使用渐变边框作为跨浏览器支持的图像

`border-image`详细理解见此帖：http: [//css-tricks.com/understanding-border-image/](http://css-tricks.com/understanding-border-image/)

# salesforce - 从组发送时，入站电子邮件服务不起作用

> ID：11408580
> 
> 赞同：0
> 
> 时间：2012-07-10T07:32:19.073
> 
> 标签：salesforce, apex-code

我写了一个 Apex 类，它将传入的电子邮件转换为潜在客户，并根据 toAddress 分配所有者（我知道，这很棒 - 谢谢^^）

当发送到 emailService 生成的地址时，它工作得很好。但是，为了让我的用户不会看到这样的地址，我在我们的邮件服务器（例如 google）中创建了一个别名组，并给该名称一个更合适/可读的名称。上课休息的地方。

第一个调试代码使用直接地址，如您所见，SOQL 返回 1 行（应该如此）

```
10:21:15.091 (91499000)|SOQL_EXECUTE_BEGIN|[33]|Aggregations:0|select Id from User where Alias = :tmpVar1
10:21:15.097 (97818000)|SOQL_EXECUTE_END|[33]|Rows:1 
```

第二个日志是在使用 elias/group 时（组中的唯一地址与第一个示例中的相同）但是，这一次，SOQL 没有返回任何内容

```
10:14:46.127 (127098000)|SOQL_EXECUTE_BEGIN|[33]|Aggregations:0|select Id from User where Alias = :tmpVar1
10:14:46.132 (132488000)|SOQL_EXECUTE_END|[33]|Rows:0 
```

我认为这与 Google 转换/创建/转发电子邮件的方式有关吗？

有人有想法吗？

好的，更多信息。

我已经执行了完整的调试。我认为 toAddresses[] 既填充了原始地址（组），也填充了列表中的每一封电子邮件。所以我必须调整我的代码以检查并检查我使用的已知字符串的开头（前导）。

我仍然得到一个错误，这里有一些更多的相关代码。注意：我正在寻找地址：**lead** .alias.leadsource@blablablabla.apex.salesforce.com

这是我的相关 Apex 代码：

```
 Boolean isMissing = true;
        Integer i = 0;

        // if many toAddresses look for the one with : lead at the beginning
        while (isMissing && i-1 < email.toAddresses.size() ){
            sourceText = email.toAddresses[i].split('@');
            mParams = sourceText[0].split('\\.');

            if (mParams[0] == 'lead')
                isMissing = false;
            else
                i++;
        } 
```

这些是调试日志中的行：一些澄清：test.processor@optite... 是我创建的组。它包含一个电子邮件：lead.saarm.processr@..apex.salesforce.com 邮件。

```
11:07:13.144 (144793000)|VARIABLE_ASSIGNMENT|[-1]|this.subject|"Re: test"|0x702f2bd6
11:07:13.144 (144808000)|HEAP_ALLOCATE|[EXTERNAL]|Bytes:5
11:07:13.144 (144813000)|HEAP_ALLOCATE|[EXTERNAL]|Bytes:68
11:07:13.144 (144831000)|VARIABLE_ASSIGNMENT|[-1]|this.plainTextBodyIsTruncated|false|0x702f2bd6
11:07:13.144 (144860000)|HEAP_ALLOCATE|[EXTERNAL]|Bytes:34
11:07:13.144 (144865000)|HEAP_ALLOCATE|[EXTERNAL]|Bytes:68
11:07:13.144 (144887000)|VARIABLE_ASSIGNMENT|[-1]|this.toAddresses|["test.processor@optit (6 more) ..."]|0x702f2bd6
11:07:13.144 (144907000)|HEAP_ALLOCATE|[EXTERNAL]|Bytes:292
11:07:13.144 (144912000)|HEAP_ALLOCATE|[EXTERNAL]|Bytes:68
11:07:13.144 (144936000)|VARIABLE_ASSIGNMENT|[-1]|this.references|["\u003CCAEYMRoxMYKDfEjM1Lf (48 more) ...","\u003CCAEYMRoxwwWamgU-oss (48 more) ...","\u003CCAEYMRowxqwP2iBeRp7 (48 more) ...","\u003CCAEYMRox1LY1ws9D370 (48 more) ..."]|0x702f2bd6
11:07:13.144 (144955000)|HEAP_ALLOCATE|[EXTERNAL]|Bytes:17
11:07:13.144 (144960000)|HEAP_ALLOCATE|[EXTERNAL]|Bytes:68
11:07:13.144 (144971000)|VARIABLE_ASSIGNMENT|[-1]|this.replyTo|"saar@mail.com"|0x702f2bd6
11:07:13.144 (144985000)|HEAP_ALLOCATE|[EXTERNAL]|Bytes:17
11:07:13.144 (144989000)|HEAP_ALLOCATE|[EXTERNAL]|Bytes:68
11:07:13.145 (145000000)|VARIABLE_ASSIGNMENT|[-1]|this.fromAddress|"saar@mail.com"|0x702f2bd6
11:07:13.145 (145017000)|HEAP_ALLOCATE|[EXTERNAL]|Bytes:15
11:07:13.145 (145025000)|HEAP_ALLOCATE|[EXTERNAL]|Bytes:68
11:07:13.145 (145044000)|VARIABLE_ASSIGNMENT|[-1]|this.fromName|"Saar "|0x702f2bd6
11:07:13.145 (145067000)|HEAP_ALLOCATE|[EXTERNAL]|Bytes:1864
11:07:13.145 (145076000)|HEAP_ALLOCATE|[EXTERNAL]|Bytes:68
11:07:13.145 (145104000)|VARIABLE_ASSIGNMENT|[-1]|this.htmlBody|"\u003Cdiv dir=\"ltr\"\u003E\u003Cbr c (1844 more) ..."|0x702f2bd6
11:07:13.145 (145131000)|HEAP_ALLOCATE|[EXTERNAL]|Bytes:68
11:07:13.145 (145139000)|HEAP_ALLOCATE|[EXTERNAL]|Bytes:68
11:07:13.145 (145164000)|VARIABLE_ASSIGNMENT|[-1]|this.messageId|"\u003CCAEYMRowEZ3CLdTQKJU (48 more) ..."|0x702f2bd6
11:07:13.145 (145192000)|HEAP_ALLOCATE|[EXTERNAL]|Bytes:5
11:07:13.145 (145201000)|HEAP_ALLOCATE|[EXTERNAL]|Bytes:68
11:07:13.145 (145221000)|VARIABLE_ASSIGNMENT|[-1]|this.htmlBodyIsTruncated|false|0x702f2bd6
11:07:13.145 (145651000)|HEAP_ALLOCATE|[EXTERNAL]|Bytes:56
11:07:13.145 (145661000)|HEAP_ALLOCATE|[EXTERNAL]|Bytes:12
11:07:13.145 (145679000)|VARIABLE_ASSIGNMENT|[-1]|this.fromAddress|"test.processor+bncCO (36 more) ..."|0x5dee72ee
11:07:13.145 (145695000)|HEAP_ALLOCATE|[EXTERNAL]|Bytes:103
11:07:13.145 (145700000)|HEAP_ALLOCATE|[EXTERNAL]|Bytes:12
11:07:13.145 (145712000)|VARIABLE_ASSIGNMENT|[-1]|this.toAddress|"lead.saarm.processor (83 more) ..."|0x5dee72ee
11:07:13.146 (146435000)|EXECUTION_STARTED
11:07:13.146 (146447000)|CODE_UNIT_STARTED|[EXTERNAL]|01pD0000001EXM9|ProcessInboundEmail.handleInboundEmail
11:07:13.146 (146563000)|HEAP_ALLOCATE|[EXTERNAL]|Bytes:1
11:07:13.146 (146583000)|METHOD_ENTRY|[6]|01pD0000001EXM9|ProcessInboundEmail.ProcessInboundEmail() 
```

这是while循环的一些调试，我感觉这里有问题，因为我看到了超出范围的错误，但无法指出。

```
11:07:13.147 (147847000)|LIMIT_USAGE|[30]|SCRIPT_STATEMENTS|8|200000
11:07:13.147 (147861000)|VARIABLE_SCOPE_BEGIN|[30]|i|Integer|false|false
11:07:13.147 (147867000)|HEAP_ALLOCATE|[30]|Bytes:8
11:07:13.147 (147875000)|VARIABLE_ASSIGNMENT|[30]|i|0
11:07:13.147 (147912000)|SYSTEM_METHOD_ENTRY|[33]|LIST<String>.size()
11:07:13.147 (147951000)|SYSTEM_METHOD_EXIT|[33]|LIST<String>.size()
11:07:13.147 (147962000)|STATEMENT_EXECUTE|[33]
11:07:13.147 (147966000)|STATEMENT_EXECUTE|[34]
11:07:13.147 (147970000)|LIMIT_USAGE|[34]|SCRIPT_STATEMENTS|9|200000
11:07:13.147 (147984000)|HEAP_ALLOCATE|[34]|Bytes:26
11:07:13.147 (147996000)|HEAP_ALLOCATE|[34]|Bytes:1
11:07:13.148 (148042000)|HEAP_ALLOCATE|[34]|Bytes:12
11:07:13.148 (148049000)|HEAP_ALLOCATE|[34]|Bytes:1
11:07:13.148 (148061000)|HEAP_ALLOCATE|[34]|Bytes:37
11:07:13.148 (148085000)|VARIABLE_ASSIGNMENT|[34]|sourceText|["test.processor","optitex.com"]|0x14c8551b
11:07:13.148 (148094000)|STATEMENT_EXECUTE|[35]
11:07:13.148 (148098000)|LIMIT_USAGE|[35]|SCRIPT_STATEMENTS|10|200000
11:07:13.148 (148109000)|HEAP_ALLOCATE|[35]|Bytes:14
11:07:13.148 (148117000)|HEAP_ALLOCATE|[35]|Bytes:2
11:07:13.148 (148133000)|HEAP_ALLOCATE|[35]|Bytes:12
11:07:13.148 (148137000)|HEAP_ALLOCATE|[35]|Bytes:2
11:07:13.148 (148147000)|HEAP_ALLOCATE|[35]|Bytes:25
11:07:13.148 (148164000)|VARIABLE_ASSIGNMENT|[35]|mParams|["test","processor"]|0x43cf0468
11:07:13.148 (148175000)|HEAP_ALLOCATE|[37]|Bytes:4
11:07:13.148 (148182000)|HEAP_ALLOCATE|[37]|Bytes:4
11:07:13.148 (148215000)|STATEMENT_EXECUTE|[40]
11:07:13.148 (148220000)|LIMIT_USAGE|[40]|SCRIPT_STATEMENTS|11|200000
11:07:13.148 (148226000)|HEAP_ALLOCATE|[40]|Bytes:8
11:07:13.148 (148238000)|VARIABLE_ASSIGNMENT|[40]|i|1
11:07:13.148 (148258000)|SYSTEM_METHOD_ENTRY|[33]|LIST<String>.size()
11:07:13.148 (148270000)|SYSTEM_METHOD_EXIT|[33]|LIST<String>.size()
11:07:13.148 (148278000)|STATEMENT_EXECUTE|[33]
11:07:13.148 (148282000)|STATEMENT_EXECUTE|[34]
11:07:13.148 (148286000)|LIMIT_USAGE|[34]|SCRIPT_STATEMENTS|12|200000
11:07:13.148 (148368000)|HEAP_ALLOCATE|[34]|Bytes:31
11:07:13.148 (148405000)|VARIABLE_SCOPE_BEGIN|[64]|e|Exception|true|false
**It**
11:07:13.148 (148527000)|STATEMENT_EXECUTE|[64]
11:07:13.148 (148532000)|STATEMENT_EXECUTE|[65]
11:07:13.148 (148536000)|LIMIT_USAGE|[65]|SCRIPT_STATEMENTS|13|200000
11:07:13.148 (148546000)|HEAP_ALLOCATE|[65]|Bytes:5
11:07:13.148 (148566000)|VARIABLE_ASSIGNMENT|[65]|this.success|false|0x10d7a7dd
11:07:13.148 (148573000)|STATEMENT_EXECUTE|[66]
11:07:13.148 (148576000)|LIMIT_USAGE|[66]|SCRIPT_STATEMENTS|14|200000
11:07:13.148 (148584000)|HEAP_ALLOCATE|[66]|Bytes:18 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T10:23:39.170

好的，我从您发布的内容中猜测异常是由该行引起的

```
while (isMissing && i-1 < email.toAddresses.size() ){ 
```

这将导致越界异常，因为在退出 while 循环之前`i`将变为等于。`email.toAddressess.size()`

您可以重写此循环以使其更加安全，就像这样

```
Boolean isMissing = true;
for(Integer i=0; i < email.toAddresses.size(); i++){
    if(email.toAddresses[i].startsWith('lead.'){
        isMissing = false;
        break;
    }
} 
```

我不确定这是否能解决您的第一个问题，但希望删除异常有助于揭示潜在问题。

# wcf - WCF 合同和命名空间？

> ID：11408582
> 
> 赞同：1
> 
> 时间：2012-07-10T07:32:28.113
> 
> 标签：wcf, web-services, namespaces, datacontract, servicecontract

**你好，**

WCF 中数据/服务协定的默认命名空间是`"http://tempuri.org/"`. 通过设置`ServiceContract.Namespace`and`ServiceBehavior.Namespace`我们可以得到一个自定义的命名空间。但是，我确实对此有一些疑问：

1.  我必须使用`http://`命名空间还是可以将其命名为相同的 CLS 命名空间？
2.  如果我需要在 MyApp.IO 下设置我的所有数据合同以使用 CLS 命名空间，是否有一种简单的方法可以做到这一点而无需手动设置所有这些？
3.  有没有一种简单的方法将 CLS 命名空间设置为整个服务及其数据合同的合同命名空间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T14:57:50.650

问题 1\. 命名空间可以是任何东西。人们通常使用某种形式的 URI，但它不必指向实际的网页。人们通常会在命名空间中使用版本标识符，但没有关于您应该做什么的规则。

问题 2。见上文。

问题 3\. 您可以为所有合约设置命名空间，如下所示：

```
// This overrides the standard namespace mapping for all contracts 
// in Contoso.CRM. 
[assembly: ContractNamespace("http://schemas.example.com/crm",
   ClrNamespace = "Contoso.CRM")]
namespace Contoso.CRM
{
    // The namespace is overridden to become: 
    // http://schemas.example.com/crm.
    // But the name is the default "Customer".
    [DataContract]
    public class Customer
    {
        // Code not shown.
    }
} 
```

您可以查看此[MSDN 文章](http://msdn.microsoft.com/en-us/library/ms731045.aspx)以获取更多信息

# java - 如何在其他android应用程序中维护skype、gtalk等的传入和传出聊天消息的日志

> ID：11408587
> 
> 赞同：0
> 
> 时间：2012-07-10T07:32:52.623
> 
> 标签：java, android

我正在设计应用程序，当手机中的其他 IM 聊天客户端（如 Skype、gTalk 等）发送或接收聊天消息时应该广播通知。我还想在我的应用程序中维护来自 IM 聊天客户端（如 Skype、gtalk 等）的聊天消息日志.. 有可能吗？？.. Skype 和 gTalk 有可用的 API 吗？这个怎么做？？请回复..谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T07:42:04.510

你不能做这个。除非他们明确提供了记录在案的 ContentProviders 或 Broadcasts 你想要做的事情是不可能的。

# iphone - 无法更改 UIButton 的图像

> ID：11408588
> 
> 赞同：2
> 
> 时间：2012-07-10T07:32:52.933
> 
> 标签：iphone, objective-c, ios5, uibutton

我想在 viewWillAppear 上设置按钮的图像。

我已经尝试遵循所有代码 -

```
UIButton *front;
    UIImage *temp= [UIImage imageNamed:@"06_asystole.jpg"];
        [front setBackgroundImage:temp forState:UIControlStateNormal];

        //front.imageView.image = [UIImage imageNamed:@"06_asystole.jpg"];
       /// [front setBackgroundImage:[UIImage imageNamed:@"06_asystole.jpg" forState:UIControlStateNormal]];
       // [front setImage:[UIImage imageNamed:@"06_asystole.jpg" forState:UIControlStateNormal]]; 
```

我还将 IBOutlet 设置为按钮并在 XIB 中分配它。

我不知道为什么按钮的图像无法设置。

谢谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T07:35:13.870

这**不起作用**：

```
UIButton *front = [[UIButton alloc]init];
UIImage *temp= [UIImage imageNamed:@"06_asystole.jpg"];
[front setBackgroundImage:temp forState:UIControlStateNormal]; 
```

您想要更改`backgroundImage`现有`UIButton`. 您现在添加`front`到您的视图并删除旧的，或者使用现有按钮名称而不是`front`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T07:41:08.457

```
[btn setImage:[UIImage imageNamed:@"06_asystole.jpg"] forState:UIControlStateNormal]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T07:39:30.507

试试这样：

```
UIButton *btn = [UIButton buttonWithType: UIButtonTypeCustom]; 
btn.frame = CGRectMake(40, 140, 240, 30); //this should be something valid for you...
UIImage *temp= [UIImage imageNamed:@"06_asystole.jpg"];
        [btn setBackgroundImage:temp forState:UIControlStateNormal]; 
```

框架应该是图像的大小或对您有用的东西。

如果您正确链接了 xib 中的按钮，您应该能够直接从编辑器中编辑按钮。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T07:39:41.790

请试试这个，

```
UIButton *front = [UIButton buttonWithType:UIButtonTypeCustom];
UIImage *img = [UIImage imageNamed:@"06_asystole.jpg"];
[front setImage:img forState:UIControlStateNormal]; 
```

希望这会奏效。

如果您已经在 xib 中添加了按钮，则无需创建新按钮。您可以通过代码或通过 xib 将图像设置为该按钮，如下所示，

![通过xib的按钮图像](../Images/eabafa17d60167b3a2e35c3f4265ccee.png) 在 xib 中选择您的按钮并在属性检查器上设置图像属性。

检查此链接以获取 UIButton 类参考。[关联](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIButton_Class/UIButton/UIButton.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T10:40:58.337

我通过在我的应用程序中重新添加图像解决了我的问题。虽然我已经将图像添加到捆绑包中，但它没有获得该图像的参考。所以我删除了旧图像并重新添加了它。比它工作正常。

感谢大家的帮助。:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-10T19:46:24.283

试试这个

```
 UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
    [button setBackgroundImage:[UIImage imageNamed:@"image.png"] forState:UIControlStateHighlighted]; 
```

# android - 尝试动态插入 LinearLayout

> ID：11408593
> 
> 赞同：0
> 
> 时间：2012-07-10T07:33:04.230
> 
> 标签：android, android-layout

我使用下面的代码动态添加了一个 LinearLayout。

```
 public void sendMessage02(View view){
    view.getId();
    EditText editText=(EditText)findViewById(R.id.edit_message);
    String message=editText.getText().toString();

    LinearLayout l=(LinearLayout)findViewById(R.id.layout_odd);
    TextView text=new TextView(this);
    text.setText(message);
    text.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));
    l.addView(text);

    LinearLayout l2=(LinearLayout)findViewById(R.id.layout01);
    l2.addView(l);

} 
```

当我运行我的应用程序时，它模拟器显示错误，说应用程序不幸停止了。

我究竟做错了什么？有没有其他方法可以动态添加布局。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T07:38:17.177

在此示例中，您不会尝试插入 LinearLayout。您将获得现有 LinearLayout 的参考

```
LinearLayout l=(LinearLayout)findViewById(R.id.layout_odd); 
```

并向其添加 TextView

```
 l.addView(text); 
```

如果您想动态添加一个 LinearLayout，您可以参考您的 ViewGroup 并将一个新的 LinearLayout 附加到它。

您可以创建您的 LinearLayout 创建一个全新的实例：

```
LinearLayout l = new LinearLayout(context); 
```

或从布局资源膨胀：

```
LinearLayour l = getInflater().inflate(R.layout.my_linear_layout); 
```

然后将其附加到您的 ViewGroup

```
ViewGroup root = findViewById(R.id.my_view_group);
root.addView( l ); 
```

# iphone - UIActivityIndi catorView 未在 UIAlertView 上正确显示

> ID：11408594
> 
> 赞同：5
> 
> 时间：2012-07-10T07:33:07.187
> 
> 标签：iphone, objective-c, ios, uialertview

我正在编写一个 iOS 应用程序，我必须显示一个带有微调器的 UIAlertView。*有时*，当我尝试在警报中心添加微调器时会出现问题，通常是在此之前有另一个警报（不完全是规则，但这就是我注意到它失败的原因）。

我通过延迟微调器的创建部分解决了这个错误。这是我的做法（*alert*是 UIAlertView 的成员）：

此代码在 viewDidLoad 中：

```
alert = [[[UIAlertView alloc] initWithTitle:@"Loading..." message:nil delegate:nil cancelButtonTitle:nil otherButtonTitles: nil] autorelease];

[alert show];

[self performSelector:@selector(addSpinner) withObject:nil afterDelay:0.5f]; 
```

这是我的*addSpinner*函数：

```
- (void) addSpinner{

    UIActivityIndicatorView *indicator2 = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];

    indicator2.center = CGPointMake(alert.bounds.size.width / 2, alert.bounds.size.height - 50);

    [indicator2 startAnimating];
    [alert addSubview:indicator2];
    [indicator2 release];
} 
```

这个解决方案每次都有效，但我真的不喜欢它是如何完成的。即使在警报弹出半秒后显示微调器并没有那么令人不安，但必须有更好的方法来处理这个问题。我不是iOS专家，也不是高级程序员，但我不能使用事件吗？像“当实际显示警报时，使用 addSpinner 函数”之类的东西？我不知道如何做到这一点，在网上找不到太多帮助......

希望可以有人帮帮我 ！谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T07:39:48.530

您可以改用[https://github.com/jdg/MBProgressHUD](https://github.com/jdg/MBProgressHUD)。

对于警报中的微调器，您可以使用这些方法。

```
-(void)startLoading
{
    alert = [[UIAlertView alloc] initWithTitle:@"" message:@"Please Wait..." delegate:nil cancelButtonTitle:nil otherButtonTitles:nil];

    UIActivityIndicatorView *progress= [[UIActivityIndicatorView alloc] initWithFrame:CGRectMake(125, 50, 30, 30)];
    progress.activityIndicatorViewStyle = UIActivityIndicatorViewStyleWhiteLarge;
    [alert addSubview:progress];
    [progress startAnimating];
    [progress release];
    [alert show];
}
-(void)stopLoading
{
    [alert dismissWithClickedButtonIndex:0 animated:YES];
    [alert release];
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-09T11:55:45.313

基本上问题看起来是在显示 UIAlertView 之前添加 UIActivityIndi​​cator 。尝试使用 UIAlertView Delegate 方法添加指示器，如下所示。

```
//AlertView delegate methods
- (void)didPresentAlertView:(UIAlertView *)alertView
{
    UIActivityIndicatorView *indicator = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhite];

    indicator.center = CGPointMake(alertView.bounds.size.width/2, alertView.bounds.size.height/3 * 2);

    [indicator startAnimating];
    [alertView addSubview:indicator];
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T07:49:52.847

尝试这个

```
[[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:YES];
megaAlert = [[[UIAlertView alloc] initWithTitle:@"Please wait..."
                                                         message:nil delegate:self cancelButtonTitle:nil
                                               otherButtonTitles: nil] autorelease];
[megaAlert show];
indicator = [[UIActivityIndicatorView alloc]                                                      initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];
            indicator.center = CGPointMake(megaAlert.bounds.size.width / 2,                                            megaAlert.bounds.size.height - 45);
[indicator startAnimating];
[megaAlert addSubview:indicator];
[indicator release]; 
```

要关闭指标，请使用此代码

```
[megaAlert dismissWithClickedButtonIndex:0 animated:YES];
megaAlert = nil;
[indicator stopAnimating]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-12T13:08:45.790

还要记住在主线程中关闭警报：

```
dispatch_async(dispatch_get_main_queue(), ^{
    [self.alert dismissWithClickedButtonIndex:0 animated:YES];
}); 
```

# sql - Linq to SQL 过滤器查询

> ID：11408597
> 
> 赞同：0
> 
> 时间：2012-07-10T07:33:18.487
> 
> 标签：sql, linq, linq-to-sql, filter

我有一个数据库，其中有 3 列。首先是机器名称列，然后是状态列，最后是日期时间列 reg_Data。这是一个跟踪生产机器的数据库，它的状态每分钟左右注册一次，导致每台机器有多个条目。我只需要显示具有特定状态的条目。除此之外，我只需要在每台机器上显示一个条目，但如果机器的当前状态等于维护，那么我需要显示最旧的条目。如果机器有更新的状态，我需要它来替换条目，但仍显示该特定状态的最旧条目。

这可以通过 linq 语句来实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T08:21:55.610

同意，是的，因为 linq 可以处理多个语句。

# android - 如何在每侧的其他两个 RelativeLayout 之间水平对齐包含 ListView 的 RelativeLayout？

> ID：11408599
> 
> 赞同：0
> 
> 时间：2012-07-10T07:33:36.670
> 
> 标签：android, listview, imageview, android-relativelayout

我包括 layout.xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:background="@color/grey" >

    <RelativeLayout
        android:id="@id/layout_content_magthumb"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:background="@color/grey" >

        <ImageView
            android:id="@id/content_thumb"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:padding="@dimen/padding_large"
            android:src="@drawable/cover1" />

    </RelativeLayout>

    <RelativeLayout
        android:id="@id/layout_content_list"
        android:layout_width="100dp"
        android:layout_height="fill_parent"
        android:layout_toRightOf="@id/layout_content_magthumb"
        android:layout_toLeftOf="@id/layout_content_description"
        android:background="@color/yellow" >

        <ListView
            android:id="@id/list_content"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent" >
        </ListView>
    </RelativeLayout>

    <RelativeLayout
        android:id="@id/layout_content_description"
        android:layout_width="wrap_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:background="@android:color/darker_gray" >

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:padding="@dimen/padding_large"
            android:src="@drawable/cover2" />
    </RelativeLayout>

</RelativeLayout> 
```

我面临的问题是，每当我在布局中包含 ListView 时，它都会占用整个布局，除了左侧 RelativeLayout 的布局空间。

请建议。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-10T07:37:43.533

尝试为包含以下内容的分配权重`0.1`或其他内容：`RelativeLayout``ListView`

```
android:layout_weight="0.1" 
```

# google-apps-script - Google电子表格导入具有任意日期格式的CSV？

> ID：11408604
> 
> 赞同：2
> 
> 时间：2012-07-10T07:33:52.993
> 
> 标签：google-apps-script, google-sheets, google-spreadsheet-api

我试图弄清楚处理具有不一致区域设置日期格式的 CSV 文件的选项是什么？电子表格设置为将 MMM-dd-yyyy 识别为有效日期（通过电子表格设置）并且 CSV 文件具有 dd-MMM-yyyy。a) 我可以编写一个自定义 CSV 加载器，在将数据放入电子表格之前处理/修复数据吗？b) 我可以访问（通过 API）原始单元格文本（避免自动转换的“错误”日期字符串）并根据需要进行修复吗？c) 任何其他解决方案？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2020-01-23T18:14:05.157

如果您编写自己的脚本来生成 CSV，请将日期设为这种格式，然后 Google 表格会自动识别它们，您可以根据需要设置它们的格式：

```
YYYY-MM-DD hh:mm:ss 
```

这是一个示例日期（2020 年 1 月 22 日下午 1:34:22）：

```
2020-01-22 13:34:22 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T19:08:07.423

我认为这个问题没有很好的解决方案。但我可以想象一些可能对你有用的解决方法。

1.  您可以在不转换为 Google Docs/Drive 的情况下上传文件，然后让[Google Apps 脚本](https://developers.google.com/apps-script/)读取它[并加载到您的电子表格](https://developers.google.com/apps-script/articles/docslist_tutorial)中。

2.  或者，您可以使用计算机上的常规文本编辑器在每个日期前插入撇号，进行搜索和替换。撇号防止单元格的内容被电子表格解析并保持原样（即文本）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-23T08:14:13.730

特别是对于日期为 dd/mm/yyyy 的 csv，一种选择是在其旁边手动添加一列并使用此公式转换单元格：

```
=if(isblank(A2),"",if(isdate(A2),date(year(A2),day(A2),month(A2)),if(len(A2)=10,date(value(mid(A2,7,4)),value(mid(A2,4,2)),value(mid(A2,1,2))),"error"))) 
```

它不优雅，不是很实用（需要手动编辑），但也许它适合您的需求。

# regex - Graylog2 流过滤规则

> ID：11408605
> 
> 赞同：3
> 
> 时间：2012-07-10T07:33:55.903
> 
> 标签：regex, logging, graylog

我有一个灰色日志服务器设置和工作。（版本 0.9.6，带有 Web 界面）。我有一个严重级别为 NOTICE 或更高级别的日志条目流。
我想向该流添加一个过滤规则，该规则过滤掉所有带有单词 nagios 的条目（也是 nagios: 或 nagios-plugins）。

我尝试将这些规则添加到流中（作为完整的消息过滤器）：

```
NOT .*nagios.*
-nagios\:*
 -*nagios*
NOT *nagios* 
```

结果是流停止获取日志条目。

如何添加正确的过滤器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T13:25:33.840

好吧，感谢[http://rubular.com](http://rubular.com)和一些测试这个正则表达式的工作：

```
^((?!nagios).)*$ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T09:08:01.800

`.*nagios.*`应该够了。

# linux - c语言中的linux蓝牙编程

> ID：11408609
> 
> 赞同：13
> 
> 时间：2012-07-10T07:34:26.113
> 
> 标签：linux, bluetooth, bluez

我正在尝试在 linux[ubuntu] 中运行 c 的基本代码来搜索蓝牙设备，但我遇到了一些问题。

通过使用 command`sudo apt-get install bluez`来安装所需的 blueZ 库，表示 bluez 已经是最新版本。

`bluetooth.h`但是错误来了，在编译 C 源代码时无法找到和其他文件，与`gcc -o simplescan simplescan.c -lbluetooth`

是否有完整的库包，还是我必须下载这些头文件？

我正在关注这个[链接](http://people.csail.mit.edu/albert/bluez-intro/c404.html)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-11T12:39:24.540

也许您没有包含必要的标题。

这是扫描蓝牙设备的代码示例

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <sys/socket.h>
#include <bluetooth/bluetooth.h>
#include <bluetooth/hci.h>
#include <bluetooth/hci_lib.h>

int main(int argc, char **argv)
{
    inquiry_info *ii = NULL;
    int max_rsp, num_rsp;
    int dev_id, sock, len, flags;
    int i;
    char addr[19] = { 0 };
    char name[248] = { 0 };

    dev_id = hci_get_route(NULL);
    sock = hci_open_dev( dev_id );
    if (dev_id < 0 || sock < 0) {
        perror("opening socket");
        exit(1);
    }

    len  = 8;
    max_rsp = 255;
    flags = IREQ_CACHE_FLUSH;
    ii = (inquiry_info*)malloc(max_rsp * sizeof(inquiry_info));

    num_rsp = hci_inquiry(dev_id, len, max_rsp, NULL, &ii, flags);
    if( num_rsp < 0 ) perror("hci_inquiry");

    for (i = 0; i < num_rsp; i++) {
        ba2str(&(ii+i)->bdaddr, addr);
        memset(name, 0, sizeof(name));
        if (hci_read_remote_name(sock, &(ii+i)->bdaddr, sizeof(name), 
            name, 0) < 0)
        strcpy(name, "[unknown]");
        printf("%s  %s\n", addr, name);
    }

    free( ii );
    close( sock );
    return 0;
} 
```

要在 linux 上编译它，只需执行

```
gcc -o simplescan simplescan.c -lbluetooth 
```

编辑：

原始代码可以在[这里找到](https://people.csail.mit.edu/albert/bluez-intro/c404.html)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2019-04-25T20:22:04.693

这解决了我的问题：

```
apt-get install libbluetooth-dev 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-11-27T11:29:15.823

至于我知道这些标题没有包。您必须从 Internet 下载以下头文件。

1.  `bluetooth.h`
2.  `hci.h`
3.  `hci_lib.h`

并在您的主机中创建一个名为“ `bluetooth`”的目录并将上述标题复制到. 然后编译你的程序，它应该可以工作。`/usr/lib/``/usr/lib/bluetooth/`

注意：在编译链接时`-lbluetooth`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-31T14:30:13.497

您需要安装 linux-headers 包。在 Ubuntu 或 Debian 上，这是通过这样做来完成的：

```
sudo apt install linux-headers 
```

# android - json字符串不是完整的传输

> ID：11408610
> 
> 赞同：0
> 
> 时间：2012-07-10T07:34:26.237
> 
> 标签：android, json

现在我在这里遇到一个问题，基本数据查询一个休息服务他交付一个json字符串交付30,000个字符。将在3g网络中进行查询现在到大约4000个字符后字符串停止的问题，我不知道其余的在哪里。

**RestClient.java**

```
public class RestClient {

private ArrayList <NameValuePair> params;
private ArrayList <NameValuePair> headers;

private String url;

private int responseCode;
private String message;

private String response;

public String getResponse() {
    return response;
}

public String getErrorMessage() {
    return message;
}

public int getResponseCode() {
    return responseCode;
}

public RestClient(String url)
{
    this.url = url;
    params = new ArrayList<NameValuePair>();
    headers = new ArrayList<NameValuePair>();
}

public void AddParam(String name, String value)
{
    params.add(new BasicNameValuePair(name, value));
}

public void AddHeader(String name, String value)
{
    headers.add(new BasicNameValuePair(name, value));
}

public void Execute(RequestMethod method) throws Exception
{
    switch(method) {
        case GET:
        {
            //add parameters
            String combinedParams = "";
            if(!params.isEmpty()){
                combinedParams += "?";
                for(NameValuePair p : params)
                {
                    String paramString = p.getName() + "=" + URLEncoder.encode(p.getValue(),"UTF-8");
                    if(combinedParams.length() > 1)
                    {
                        combinedParams  +=  "&" + paramString;
                    }
                    else
                    {
                        combinedParams += paramString;
                    }
                }
            }

            HttpGet request = new HttpGet(url + combinedParams);

            //add headers
            for(NameValuePair h : headers)
            {
                request.addHeader(h.getName(), h.getValue());
            }

            executeRequest(request, url);
            break;
        }
        case POST:
        {
            HttpPost request = new HttpPost(url);

            //add headers
            for(NameValuePair h : headers)
            {
                request.addHeader(h.getName(), h.getValue());
            }

            if(!params.isEmpty()){
                request.setEntity(new UrlEncodedFormEntity(params, HTTP.UTF_8));
            }

            executeRequest(request, url);
            break;
        }
    }
}

private void executeRequest(HttpUriRequest request, String url)
{
    request.setHeader("Authorization", "Basic sssss");
    HttpClient client = new DefaultHttpClient();
    HttpResponse httpResponse;

    try {
        httpResponse = client.execute(request);

        responseCode = httpResponse.getStatusLine().getStatusCode();
        message = httpResponse.getStatusLine().getReasonPhrase();

        HttpEntity entity = httpResponse.getEntity();

        if (entity != null) {

            InputStream instream = entity.getContent();
            response = convertStreamToString(instream);

            // Closing the input stream will trigger connection release
            instream.close();
        }

    } catch (ClientProtocolException e)  {
        client.getConnectionManager().shutdown();
        e.printStackTrace();
    } catch (IOException e) {
        client.getConnectionManager().shutdown();
        e.printStackTrace();
    }
}

private static String convertStreamToString(InputStream is) {

    BufferedReader reader = new BufferedReader(new InputStreamReader(is),8 * 1024);
    StringBuilder sb = new StringBuilder();

    String line = null;
    try {
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        try {
            is.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
    return sb.toString();
} 
```

**活动课**

```
 ConnectivityManager connMgr = (ConnectivityManager) 
                getSystemService(Context.CONNECTIVITY_SERVICE);
            NetworkInfo networkInfo = connMgr.getActiveNetworkInfo();
            if (networkInfo != null && networkInfo.isConnected()) {
                // fetch data

            execute = new Netzwerk().execute("https://.....");
            try {
                String  t = execute.get().toString();
                    Log.d("MyTag", "Response: " + t);

            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (ExecutionException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 

        } else {
            // display error
        } 
```

**Netzwerk.java**

```
public class Netzwerk extends AsyncTask {
    @Override
protected Object doInBackground(Object... arg0) {
            RestClient rest = new RestClient(arg0[0].toString());
            try {
                 rest.Execute(RequestMethod.GET);
            } catch (Exception e) {
                e.printStackTrace();
            }
            System.out.println(rest.getResponse());
            Log.d("MyTag", "getResponse: " + rest.getResponse());
            Log.d("MyTag", "getResponseCode: " + rest.getResponseCode());
    return rest.getResponse();
}

public String httpAuthentication(String user, String password) {

    String auth=null;
    try {
        auth = android.util.Base64.encodeToString(
                (user + ":" + password).getBytes("UTF-8"), 
                android.util.Base64.NO_WRAP);
    } catch (UnsupportedEncodingException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    Log.d("MyTag", "Base64 encoded auth string: " + auth);
    return auth;
}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T07:45:26.497

我认为您应该使用 AsyncTask 类来进行这种长期处理。

# android - Titanium：在 commonjs 模块中需要一个模块

> ID：11408613
> 
> 赞同：1
> 
> 时间：2012-07-10T07:34:49.923
> 
> 标签：android, ios, module, titanium, commonjs

我发现我们可以创建 CommonJS 模块而不是原生或 Web 模块（查看您的 Titanium 文件夹并搜索 ti.cloud 模块）。但是我找不到可以解释它的文档...

因此，我尝试在 Titanium 文件夹“commonjs”中添加自己的 CommonJS 模块，并使用“require”将其导入我的应用程序。它像魅力一样运行。

现在，我想在我的 CommonJS 模块中添加一些其他文件，并使模块在模块内相互引用。

例如在我的应用程序中，我有：

*   main.js
*   用户界面
    *   CommonView.js

在这个结构中，main.js 是我的主模块，并且有一个方法 createCommonView() 尝试要求模块 CommonView (require('./ui/CommonView')) 但编译器抱怨找不到该模块。

如何创建具有多个相互引用的模块的 CommonJS 模块？

准确地说，我不想在我的项目中复制这些模块。我想将它们保存在 Titanium 文件夹中，以便所有项目都可以使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:33:43.660

这是 Appcelerator 的一篇关于 CommonJS 模块的博客文章：http: [//developer.appcelerator.com/blog/2011/12/commonjs-module-guide-for-1-8.html](http://developer.appcelerator.com/blog/2011/12/commonjs-module-guide-for-1-8.html)

这是来自 Appcelerator 的指南/文档：[https ://wiki.appcelerator.org/display/guides/CommonJS+Modules+in+Titanium](https://wiki.appcelerator.org/display/guides/CommonJS+Modules+in+Titanium)

现在，所有模块引用都相对于应用程序根：

*   在 app.js 中，需要（'main'）；
*   在 main.js 中，需要（'ui/CommonView'）
*   在 CommonView.js 中，需要（'ui/SpecificView'）

并且打包的 CommonJS 模块（例如 ti.cloud，安装在您的应用程序或 Application Support 的“modules”目录中）仅支持单个 JavaScript 文件。

提示：我只需在 Google 中输入“Appcelerator CommonJS”即可找到这些指南。我不确定您使用什么方法来查找文档。Titanium Mobile 文档的“全局”对象中也大量记录了“要求”： [http ://docs.appcelerator.com/titanium/2.1/index.html#!/api/Global](http://docs.appcelerator.com/titanium/2.1/index.html#!/api/Global)

# pom.xml - 在 Apache 项目上运行 pom.xml 失败-James

> ID：11408617
> 
> 赞同：0
> 
> 时间：2012-07-10T07:35:11.613
> 
> 标签：pom.xml, james

我收到错误

```
 Failed to execute goal on project james-server: Could not resolve dependencies for project org.apache.james:james-server:jar:2.3.2: Failed to collect dependencies for [org.bouncycastle:bcmail-jdk14:jar:129 (compile), org.bouncycastle:bcmail-jdk14-workaround:jar:129 (compile), 
```

这是我用源下载的 Apache James 项目中的 pom.xml：

```
 http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing,
  software distributed under the License is distributed on an
  "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, either express or implied.  See the License for the
  specific language governing permissions and limitations
  under the License.    
-->
<!--
 | DISCLAIMER DISCLAIMER DISCLAIMER DISCLAIMER DISCLAIMER 
 | 
 | This file is only intended to be used to build the james-server
 | website. It must not be used to build packages for james-server
 | application.
 | 
 | DISCLAIMER DISCLAIMER DISCLAIMER DISCLAIMER DISCLAIMER 
 -->
<project>
  <modelVersion>4.0.0</modelVersion>
  <groupId>org.apache.james</groupId>
  <artifactId>james-server</artifactId>
  <name>Apache JAMES Server</name>
  <version>2.3.2</version>
  <packaging>jar</packaging>
  <description>
    The Apache Java Enterprise Mail Server (a.k.a. JAMES Server)
  </description>
  <parent>
    <artifactId>james-server-root</artifactId>
    <groupId>org.apache.james</groupId>
    <version>1.2</version>
    <relativePath>../james-project/project/server/pom.xml</relativePath>
  </parent>
  <url>http://james.apache.org/server/2.3.2/</url>
  <inceptionYear>2002</inceptionYear>

  <scm>
    <connection>
      scm:svn:http://svn.apache.org/repos/asf/james/server/tags/2_3_2
    </connection>
    <developerConnection>
      scm:svn:https://${maven.username}@svn.apache.org/repos/asf/james/server/tags/2_3_2
    </developerConnection>
    <url>
      http://svn.apache.org/viewcvs.cgi/james/server/tags/2_3_2?root=Apache-SVN
    </url>
  </scm>

  <repositories>
    <!-- 
     this should be removed and custom jars should 
     be copied to a local files based repository.
    -->
    <repository>
      <id>bago-dist-m1</id>
      <name>Temporary Repository</name>
      <url>http://people.apache.org/~bago/maven/dist-m1</url>
      <layout>legacy</layout>
      <snapshots>
        <enabled>true</enabled>
        <checksumPolicy>ignore</checksumPolicy>
      </snapshots>
    </repository>

    <repository>
      <id>central</id>
      <name>Apache Snapshot Repository</name>
      <url>http://people.apache.org/repo/m2-ibiblio-rsync-repository</url>
      <releases>
        <enabled>true</enabled>
      </releases>
      <snapshots>
        <enabled>true</enabled>
      </snapshots>
    </repository>

    <repository>
      <id>apache.snapshots</id>
      <name>Apache Snapshot Repository</name>
      <url>http://people.apache.org/repo/m2-snapshot-repository</url>
      <releases>
        <enabled>false</enabled>
      </releases>
    </repository>

<!-- 
    <repository>
      <id>local-server-3rd-party-m1</id>
      <name>Local Server third party repository</name>
      <url>file://${basedir}/repos/third-party-m1</url>
      <layout>legacy</layout>
      <releases>
        <enabled>true</enabled>
        <checksumPolicy>ignore</checksumPolicy>
      </releases>
      <snapshots>
        <enabled>true</enabled>
        <checksumPolicy>ignore</checksumPolicy>
      </snapshots>
    </repository>
 -->

    <repository>
      <id>ibiblio</id>
      <name>Main maven repo</name>
      <url>http://repo1.maven.org/maven2</url>
      <snapshots>
        <enabled>false</enabled>
      </snapshots>
    </repository>

  </repositories>

  <dependencies verbose="true">

    <!-- NEED TO DEAL WITH THESE JARS -->
    <dependency>
      <groupId>org.bouncycastle</groupId>
      <artifactId>bcmail-jdk14</artifactId>
      <version>129</version>
    </dependency>
    <dependency>
      <groupId>org.bouncycastle</groupId>
      <artifactId>bcmail-jdk14-workaround</artifactId>
      <version>129</version>
    </dependency>
    <!-- NEED TO DEAL WITH THESE JARS -->

    <dependency>
      <groupId>javax.mail</groupId>
      <artifactId>mail</artifactId>
      <version>1.4</version>
    </dependency>

    <dependency>
      <groupId>avalon-framework</groupId>
      <artifactId>avalon-framework-api</artifactId>
      <version>4.3</version>
    </dependency>

    <dependency>
      <groupId>avalon-framework</groupId>
      <artifactId>avalon-framework-impl</artifactId>
      <version>4.3</version>
      <exclusions>
        <exclusion>
          <groupId>commons-logging</groupId>
          <artifactId>commons-logging</artifactId>
        </exclusion>
        <exclusion>
          <groupId>jmock</groupId>
          <artifactId>jmock</artifactId>
        </exclusion>
        <exclusion>
          <groupId>xalan</groupId>
          <artifactId>xalan</artifactId>
        </exclusion>
        <exclusion>
          <groupId>xml-apis</groupId>
          <artifactId>xmlParserAPIs</artifactId>
        </exclusion>
      </exclusions>
    </dependency>

    <dependency>
      <groupId>commons-dbcp</groupId>
      <artifactId>commons-dbcp</artifactId>
      <version>1.2.1</version>
      <exclusions>
        <exclusion>
          <groupId>xerces</groupId>
          <artifactId>xercesImpl</artifactId>
        </exclusion>
      </exclusions>
    </dependency>

    <dependency>
      <groupId>commons-net</groupId>
      <artifactId>commons-net</artifactId>
      <version>1.4.1</version>
      <scope>test</scope>
    </dependency>

    <dependency>
      <groupId>cornerstone-connection</groupId>
      <artifactId>cornerstone-connection-api</artifactId>
      <version>2.1</version>
    </dependency>

    <dependency>
      <groupId>cornerstone-connection</groupId>
      <artifactId>cornerstone-connection-impl</artifactId>
      <version>2.1</version>
    </dependency>

    <dependency>
      <groupId>cornerstone-sockets</groupId>
      <artifactId>cornerstone-sockets-api</artifactId>
      <version>2.1</version>
    </dependency>

    <dependency>
      <groupId>cornerstone-sockets</groupId>
      <artifactId>cornerstone-sockets-impl</artifactId>
      <version>2.1</version>
      <exclusions>
        <exclusion>
          <groupId>xml-apis</groupId>
          <artifactId>xml-apis</artifactId>
        </exclusion>
      </exclusions>
    </dependency>

    <dependency>
      <groupId>cornerstone-datasources</groupId>
      <artifactId>cornerstone-datasources-api</artifactId>
      <version>2.1</version>
    </dependency>

    <dependency>
      <groupId>excalibur-datasource</groupId>
      <artifactId>excalibur-datasource</artifactId>
      <version>2.1</version>
      <exclusions>
        <exclusion>
          <groupId>excalibur-pool</groupId>
          <artifactId>excalibur-pool-instrumented</artifactId>
        </exclusion>
        <exclusion>
          <groupId>excalibur-component</groupId>
          <artifactId>excalibur-component</artifactId>
        </exclusion>
        <exclusion>
          <groupId>excalibur-component</groupId>
          <artifactId>excalibur-testcase</artifactId>
        </exclusion>
        <exclusion>
          <groupId>excalibur-fortress</groupId>
          <artifactId>excalibur-fortress</artifactId>
        </exclusion>
        <exclusion>
          <groupId>excalibur-fortress</groupId>
          <artifactId>excalibur-fortress-container-api</artifactId>
        </exclusion>
        <exclusion>
          <groupId>excalibur-logger</groupId>
          <artifactId>excalibur-logger</artifactId>
        </exclusion>
        <exclusion>
          <groupId>hsqldb</groupId>
          <artifactId>hsqldb</artifactId>
        </exclusion>
        <exclusion>
          <groupId>excalibur-fortress</groupId>
          <artifactId>excalibur-fortress-meta</artifactId>
        </exclusion>
      </exclusions>
    </dependency>

    <dependency>
      <groupId>cornerstone-datasources</groupId>
      <artifactId>cornerstone-datasources-impl</artifactId>
      <version>2.1</version>
      <exclusions>
        <exclusion>
          <groupId>d-haven-managed-pool</groupId>
          <artifactId>d-haven-managed-pool</artifactId>
        </exclusion>
      </exclusions>
    </dependency>

    <dependency>
      <groupId>cornerstone-scheduler</groupId>
      <artifactId>cornerstone-scheduler-api</artifactId>
      <version>2.1</version>
    </dependency>

    <dependency>
      <groupId>cornerstone-scheduler</groupId>
      <artifactId>cornerstone-scheduler-impl</artifactId>
      <version>2.1</version>
    </dependency>

    <dependency>
      <groupId>cornerstone-store</groupId>
      <artifactId>cornerstone-store-api</artifactId>
      <version>2.1</version>
    </dependency>

    <dependency>
      <groupId>cornerstone-store</groupId>
      <artifactId>cornerstone-store-impl</artifactId>
      <version>2.1</version>
    </dependency>

    <dependency>
      <groupId>dnsjava</groupId>
      <artifactId>dnsjava</artifactId>
      <version>2.0.6</version>
    </dependency>

    <dependency>
      <groupId>excalibur-thread</groupId>
      <artifactId>excalibur-thread-api</artifactId>
      <version>2.1</version>
    </dependency>

    <dependency>
      <groupId>excalibur-thread</groupId>
      <artifactId>excalibur-thread-impl</artifactId>
      <version>2.1</version>
      <exclusions>
        <exclusion>
          <groupId>junitperf</groupId>
          <artifactId>junitperf</artifactId>
        </exclusion>
      </exclusions>
    </dependency>
    <dependency>
      <groupId>avalon-logkit</groupId>
      <artifactId>avalon-logkit</artifactId>
      <version>2.1</version>
      <exclusions>
        <exclusion>
          <groupId>geronimo-spec</groupId>
          <artifactId>geronimo-spec-javamail</artifactId>
        </exclusion>
        <exclusion>
          <groupId>geronimo-spec</groupId>
          <artifactId>geronimo-spec-jms</artifactId>
        </exclusion>
        <exclusion>
          <groupId>servletapi</groupId>
          <artifactId>servletapi</artifactId>
        </exclusion>
      </exclusions>
    </dependency>

    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>3.8.1</version>
      <scope>test</scope>
    </dependency>

    <dependency>
      <groupId>oro</groupId>
      <artifactId>oro</artifactId>
      <version>2.0.8</version>
    </dependency>

  </dependencies>

  <distributionManagement>
    <site>
      <id>server-2.3.2-website</id>
      <url>scp://people.apache.org/www/james.apache.org/server/2.3.2/</url>
    </site>
  </distributionManagement>

  <build>
    <sourceDirectory>src/java</sourceDirectory>
    <testSourceDirectory>src/test</testSourceDirectory>

    <testResources>
      <testResource>
        <directory>src/test</directory>
        <includes>
          <include>**/*.zone</include>
        </includes>
      </testResource>
    </testResources>

    <plugins>
      <plugin>
        <artifactId>maven-compiler-plugin</artifactId>
        <configuration>
          <optimize>true</optimize>
          <source>1.4</source>
          <target>1.4</target>
        </configuration>
      </plugin>
    </plugins>

  </build>

  <reporting>
    <plugins>
      <plugin>
        <artifactId>maven-surefire-plugin</artifactId>
      </plugin>
      <!-- Removed because it seems to have bugs.
      <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>surefire-report-maven-plugin</artifactId>
      </plugin>
      -->
      <plugin>
        <artifactId>maven-javadoc-plugin</artifactId>
      </plugin>
      <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>jxr-maven-plugin</artifactId>
      </plugin>
      <plugin>
        <artifactId>maven-pmd-plugin</artifactId>
        <configuration>
          <targetjdk>1.4</targetjdk>
          <rulesets>
            <ruleset>/rulesets/basic.xml</ruleset>
            <ruleset>/rulesets/controversial.xml</ruleset>
          </rulesets>
          <format>xml</format>
          <linkXref>true</linkXref>
          <sourceEncoding>utf-8</sourceEncoding>
          <minimumTokens>100</minimumTokens>
        </configuration>
      </plugin>
      <!--
      <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>taglist-maven-plugin</artifactId>
      </plugin>
      -->
      <plugin>
        <artifactId>maven-site-plugin</artifactId>
      </plugin>
    </plugins>
  </reporting>

</project> 
```

我是 maven 和 pom 的新手，请指定我应该如何更改我的 pom.xml 的路径

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T08:13:19.283

目标必须是`eclipse:eclipse`

我的目标是`dependency:copy-dependencies`

# android - 在 Android 中获取当前正在运行的进程

> ID：11408622
> 
> 赞同：2
> 
> 时间：2012-07-10T07:35:31.647
> 
> 标签：android

这是关于当前运行的进程信息。

我想捕获当前正在运行的进程图标下出现的生动名称或同名。

在使用 [RunningTaskInfo](http://developer.android.com/reference/android/app/ActivityManager.RunningTaskInfo.html)或[RunningProcessInfo](http://developer.android.com/reference/android/app/ActivityManager.RunningAppProcessInfo.html)时，我只能获取 com.android.browser 之类的复杂信息。

实际上，我想获取诸如 Brower、Clock、Contact 等名称。

我怎样才能做到这一点？请直接访问完整的教程链接或完整的解释代码。

PS：我只是一个初学者，我确信我已经探索了 Android 开发者网站。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-09-03T17:06:22.330

从 pid 获取当前 RunningAppProcessInfo

```
public static String getCurrentProcessName(Context context) {
    // Log.d(TAG, "getCurrentProcessName");
    int pid = android.os.Process.myPid();
    ActivityManager manager = (ActivityManager) context.getSystemService(Context.ACTIVITY_SERVICE);
    for (ActivityManager.RunningAppProcessInfo processInfo : manager.getRunningAppProcesses())
    {
        // Log.d(TAG, processInfo.processName);
        if (processInfo.pid == pid)
            return processInfo.processName;
    }
    return "";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-04T12:12:31.357

获得包名称（例如 com.android.browser）后，只需将该名称与 PackageManager 一起使用：

```
PackageManager pm = context.getPackageManager();
ApplicationInfo ai = pm.getApplicationInfo(name, 0);
CharSequence name = pm.getApplicationLabel(ai); 
```

您需要处理一些异常，但您会从中获得真正的应用程序名称。

# ruby-on-rails - Guard for RoR 未检测到 Windows 中的文件更改或更新

> ID：11408625
> 
> 赞同：1
> 
> 时间：2012-07-10T07:35:46.783
> 
> 标签：ruby-on-rails, ruby, guard

我有一个安装了保护 gem 的 RoR 3.2.5 应用程序来自动运行 MiniTest::Spec 测试。Guardfile 已正确配置为自动运行规范 - 我知道这一点，因为我已经在我的 Mac OS X 环境中的同一应用程序上测试了 Guard，并且当 Guard 监视的文件发生更改时，它会自动运行规范测试。

但是，在我的 Windows（8 Release Preview）环境下，Guard 不会在文件更改时自动运行测试（这些文件在我的 Mac 环境下以相同的方式更改）。但是，如果我点击“enter”或输入“minitest”，测试会在 Guard 中运行。

有没有其他人遇到同样的问题？我应该放弃尝试让 Guard 在 Windows 下正常工作吗？

谢谢

# jquery - jQuery - 如何过滤表格行

> ID：11408627
> 
> 赞同：0
> 
> 时间：2012-07-10T07:35:50.600
> 
> 标签：jquery

我需要通过单击链接来过滤某个表格行。

```
function filterRows(statusName) {
         $("#mainTable > tbody > tr").find(statusName).each( function () {
             alert($(this));
             //the alert is not shown

         });
     }

<a class="rejected" href="#" onclick="filterRows('rejected');">rejected</a>
<a class="new" href="#" onclick="filterRows('new');">new</a>

<table id="mainTable">
  <thead>
   <tr>
     <td>col1</td>
     <td>col2</td>
   </tr>
 </thead>
 <tbody class="Content">
  <tr class="rejected">
    <td>data1</td>
    <td>data12</td>
  </tr>
  <tr>
    <td>data13</td>
    <td>data15</td>
  </tr>
  <tr  class="new">
    <td>data16</td>
    <td>data18</td>
  </tr>
</tbody> 
```

但它不工作，甚至`alert($(this))`没有。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T07:53:26.247

我修改了选择器如下：

```
function filterRows(statusName) {
    $("#mainTable tbody tr."+statusName).each( function () {
        console.log(this);
        $(this).hide();
    });
} 
```

可以进一步简化为：

```
function filterRows(statusName) {
    $("#mainTable tbody tr."+statusName).hide();
} 
```

**实现过滤器**

但是，如果您尝试实现基于存储为类的数据的 jQuery 过滤器，您可以执行以下操作：

```
function filterRows(statusName) {
    $("#mainTable tbody tr."+statusName).show();
    $("#mainTable tbody tr").not("."+statusName).hide();
} 
```

这将显示匹配“statusName”的行，但同样重要的是它会隐藏不匹配的行。记得添加清除过滤器的功能！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T07:44:38.550

Guy David 是正确的 - 将您的 HTML 更改为：

```
<table id="mainTable">
 <thead>
   <tr>
     <td>col1</td>
     <td>col2</td>
   </tr>
 </thead>
 <tbody>
  <tr class="rejected">
    <td>data1</td>
    <td>data12</td>
  </tr>
  <tr>
    <td>data13</td>
    <td>data15</td>
  </tr>
  <tr class="new">
    <td>data16</td>
    <td>data18</td>
  </tr>
 </tbody>
 ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T07:47:39.313

或者 ：

```
$('a').click(function(e){

    $('.'+e.target.className).not('a').hide();

}); 
```

# c# - CultureInfo 和默认选择值

> ID：11408628
> 
> 赞同：1
> 
> 时间：2012-07-10T07:35:55.067
> 
> 标签：c#, asp.net, cultureinfo

我的功能：

```
 public void loadCultureList()
 {
        CultureInfo[] cultures = CultureInfo.GetCultures(CultureTypes.AllCultures);
        ddlCulture.DataSource = cultures; //ddlCulture is dropdownlist id
        ddlCulture.DataTextField = "DisplayName";
        ddlCulture.DataValueField = "IetfLanguageTag";
        ddlCulture.DataBind();
  } 
```

当我使用此函数绑定时，`dropdownlist`我得到第一项是`Arabic`.

![文化](../Images/dcf9603d33e4118bfd44b89769e649c0.png)

但我希望第一项必须是`English`. 有什么技巧可以达到这个结果吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T07:39:27.070

您可以在数组中找到相应的文化`cultures`并创建一个新数组，其中英语是第一项，所有其他项都“下移”了一个位置。

使用 LINQ 非常简单：

```
var english = new[] { cultures.Single(ci => ci.DisplayName == "English") };
cultures = english.Concat(cultures.Except(english)).ToArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T07:39:38.683

尝试使用这个：

```
CultureInfo[] cultures = CultureInfo
    .GetCultures(CultureTypes.AllCultures)
    .OrderBy(p => p.EnglishName == "English" ? 0 : 1)
    .ToArray(); 
```

如果您想确保列表按英文名称排序，您可以使用

```
CultureInfo[] cultures = CultureInfo
    .GetCultures(CultureTypes.AllCultures)
    .OrderBy(p => p.EnglishName == "English" ? 0 : 1)
    .ThenBy(p => p.EnglishName)
    .ToArray(); 
```

# java - Java：如何从 Spring 的 DMLC 中取消订阅持久订阅者？

> ID：11408631
> 
> 赞同：0
> 
> 时间：2012-07-10T07:36:06.430
> 
> 标签：java, spring-jms

在普通的 JMS 中，我们可以这样做： session.unsubscribe("持久订阅的名称"); 但是我们如何通过 DMLC 做到这一点？在其中找不到任何用于此目的的特定方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T07:54:52.933

据我所知，没有 Spring 特定的方式可以向 MQ 服务器发送“取消订阅”命令，但是您始终可以选择通过扩展[`DefaultMessageListenerContainer`](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/jms/listener/DefaultMessageListenerContainer.html)类并调用[`getSession()`](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/jms/listener/AbstractPollingMessageListenerContainer.html#getSession%28org.springframework.jms.connection.JmsResourceHolder%29)或来获取底层 JMS 会话[`createSession()`](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/jms/support/JmsAccessor.html#createSession%28javax.jms.Connection%29)。毕竟 Spring 只是 JMS 之上的一个方便的抽象，并且不会阻止您在需要时直接使用 JMS API。

# javascript - 多个谷歌图表API，在同一个网页上

> ID：11408636
> 
> 赞同：0
> 
> 时间：2012-07-10T07:36:16.607
> 
> 标签：javascript, html, google-visualization

老实说，我相信我要么是个白痴，要么我不知道。我一辈子都无法在一个网页上获得两个谷歌图表。我已经让它运行没有任何错误，但它现在没有显示任何东西？

```
<html>   
<head>     
<script type="text/javascript" src="https://www.google.com/jsapi"></script>    
 <script type="text/javascript">       
 google.load("visualization", "1", {packages:["corechart"]});       

 function ChartA() {         
 var data1 = google.visualization.arrayToDataTable([           
 ['Year', 'Derby', 'Bristol', 'Warrington', 'Indianapolis', 'Dahlewitz', 'Montreal'],           
 ['2012',  143754.00 , 7607.59, 958.51, 6029.12 , 13605.12, 586.00],        
 ['2013',  186065.32, 1674.50, 1823.93, 9574.24, 23935.14, 743.43],          
 ['2014',  251238.53, 0,    0,  10154.41, 19926.63, 363.71],           
 ['2015',  323134.57, 0,    0,  10400.66, 12002.84, 555.86], 
 ['2016',  467058.18, 0,    0,  10529.27, 5844.90,  0] ,
 ['2017',  391209.43, 0,    0,  11072.43, 3603.65,  0] ,
 ['2018',  460257.40, 0,    0,  12031.69, 1833.52,  0] ,
 ['2019',  744114.34, 0,    0,  13012.83, 1517.89,  0] ,
 ['2020',  1484193.59,0,    0,  14274.78, 1292.55,  0]        
 ]);          

 var options1 = {           
 title: 'Total CPU Hours Per Year By Site',          
 hAxis: {title: 'Year',  titleTextStyle: {color: 'black'}},   
 vAxis: {title: '1000s CPU Hours',  titleTextStyle: {color: 'black'}}
 };   

 function ChartB() {         
 var data2 = google.visualization.arrayToDataTable([           
 ['Year', 'Derby', 'Bristol', 'Warrington', 'RRC', 'RRD', 'Canada'],           
 ['2012',  275.82, 1.145, 0, 2.71, 18.44, 0],        
 ['2013',  398.29, 0.04, 0, 3.01, 29.38, 0],          
 ['2014',  509.84, 0.04, 0 , 3.29, 26.05, 0],           
 ['2015',  723.08, 0,   0, 3.54, 13.09, 0], 
 ['2016',  951.38, 0, 0, 3.90, 7.59, 0] ,
 ['2017',  609.01, 0, 0, 4.32, 3.92, 0] ,
 ['2018',  1002.65, 0 , 0, 4.69, 1.70, 0] ,
 ['2019',  1133.86, 0, 0, 4.93, 1.31, 0] ,
 ['2020',  2127, 0 ,0, 5.31, 0.79, 0]        
 ]);          

 var options2 = {           
 title: 'Total CPU Hours Required For FE Code',          
 hAxis: {title: 'Year',  titleTextStyle: {color: 'black'}},   
 vAxis: {title: '1000s CPU Hours',  titleTextStyle: {color: 'black'}}
 };          

function drawcharts(){
draw.ChartA();
draw.ChartB();
}

google.setOnLoadCallback(drawcharts);

 var chartA = new google.visualization.AreaChart(document.getElementById('chart_div')); 
 chartA.draw(data1, options1); 
 var chartB = new google.visualization.AreaChart(document.getElementById('chart_divs'));        
 chartB.draw(data2, options2);        

  } 
  }    
  </script>  
  </head>
    <body>  
    <div id="chart_div" style="width: 900px; height: 500px;"></div> 
    <p></p>
    <p></p>
     <div id="chart_divs" style="width: 900px; height: 500px;"></div>
  </body> 
  </html> 
```

如果有人知道我在显示它们时哪里出错了，请向我指出。因为我需要在同一页面上获取多个图表

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T08:13:27.220

那个正在工作 - JS 在语法上是错误的：

```
<html>
<head>
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">

        function drawcharts() {

            var data1 = google.visualization.arrayToDataTable(
                    [
                        ['Year', 'Derby', 'Bristol', 'Warrington', 'Indianapolis', 'Dahlewitz', 'Montreal'],
                        ['2012', 143754.00 , 7607.59, 958.51, 6029.12 , 13605.12, 586.00],
                        ['2013', 186065.32, 1674.50, 1823.93, 9574.24, 23935.14, 743.43],
                        ['2014', 251238.53, 0, 0, 10154.41, 19926.63, 363.71],
                        ['2015', 323134.57, 0, 0, 10400.66, 12002.84, 555.86],
                        ['2016', 467058.18, 0, 0, 10529.27, 5844.90, 0] ,
                        ['2017', 391209.43, 0, 0, 11072.43, 3603.65, 0] ,
                        ['2018', 460257.40, 0, 0, 12031.69, 1833.52, 0] ,
                        ['2019', 744114.34, 0, 0, 13012.83, 1517.89, 0] ,
                        ['2020', 1484193.59, 0, 0, 14274.78, 1292.55, 0]
                    ]);

            var options1 = {
                title:'Total CPU Hours Per Year By Site',
                hAxis:{title:'Year', titleTextStyle:{color:'black'}},
                vAxis:{title:'1000s CPU Hours', titleTextStyle:{color:'black'}}
            };

            var data2 = google.visualization.arrayToDataTable(
                    [
                        ['Year', 'Derby', 'Bristol', 'Warrington', 'RRC', 'RRD', 'Canada'],
                        ['2012', 275.82, 1.145, 0, 2.71, 18.44, 0],
                        ['2013', 398.29, 0.04, 0, 3.01, 29.38, 0],
                        ['2014', 509.84, 0.04, 0 , 3.29, 26.05, 0],
                        ['2015', 723.08, 0, 0, 3.54, 13.09, 0],
                        ['2016', 951.38, 0, 0, 3.90, 7.59, 0] ,
                        ['2017', 609.01, 0, 0, 4.32, 3.92, 0] ,
                        ['2018', 1002.65, 0 , 0, 4.69, 1.70, 0] ,
                        ['2019', 1133.86, 0, 0, 4.93, 1.31, 0] ,
                        ['2020', 2127, 0 , 0, 5.31, 0.79, 0]
                    ]);

            var options2 = {
                title:'Total CPU Hours Required For FE Code',
                hAxis:{title:'Year', titleTextStyle:{color:'black'}},
                vAxis:{title:'1000s CPU Hours', titleTextStyle:{color:'black'}}
            };

            var chartA = new google.visualization.AreaChart(document.getElementById('chart_div'));
            chartA.draw(data1, options1);

            var chartB = new google.visualization.AreaChart(document.getElementById('chart_divs'));
            chartB.draw(data2, options2);
        }

        google.setOnLoadCallback(drawcharts);
        google.load("visualization", "1", {packages:["corechart"]});

    </script>
</head>
<body>
<div id="chart_div" style="width: 900px; height: 500px;"></div>
<p></p>

<p></p>

<div id="chart_divs" style="width: 900px; height: 500px;"></div>
</body>
</html> 
```

# drools - drools - 查找符合最大条件的对象

> ID：11408638
> 
> 赞同：1
> 
> 时间：2012-07-10T07:36:32.597
> 
> 标签：drools

我有一张有条件的桌子

尺寸 | 类型 | 编号 | 内容
1 | 2 | 1 | "海"
null | 空 | 空 | “默认内容”
1 | 空 | 空 | “尺寸 1 的内容”

我将表中的每一行都放入对象列表中。

```
class A{  
  private String size="";  
  private String type="";  
  private String id="";  
 private String content = "";  
} 
```

要求是显示与最大条件匹配的行对应的内容。否则显示默认消息（对应于 'null,null,null' 行）。

我怎么能在流口水中做到这一点？我完全迷路了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T23:29:19.110

首先清理您作为内容输入获得的数据，它看起来与问题有点不一致。

接下来你需要做的是用对象表示你的问题的领域。举例来说，创建一个名为 ContentObject 的 pojo，其属性映射到输入文件中定义的属性（注意，您需要一个整数或实现 Comparable 的东西来允许您进行排序）。接下来你需要的是一个 pojo 来保存你的最大值（包含一个名为 max 的属性）。

创建无状态知识会话并用对象填充它。再次，为了举例，说：

```
 // load up the knowledge base
    KnowledgeBase kbase = readKnowledgeBase();
    StatelessKnowledgeSession ksession = kbase.newStatelessKnowledgeSession();

    // build the session input objects
    ContentObject co1 = new ContentObject(0,"T1","id1", "Some Content 1");
    ContentObject co2 = new ContentObject(1,"T2","id2", "Some Content 2");
    ContentObject co3 = new ContentObject(3,"T3","id3", "Some Content 3");
    Max max = new Max();

    // populate a fact set
    Set<Object> facts = new HashSet<Object>();
    facts.add(co1); facts.add(co2); facts.add(co3); facts.add(max);

    // run rules
    ksession.execute(facts);

    // display result
    System.out.println(max.getMax()); 
```

在单独的资源中定义以下流口水：

```
 package com.yourpackage
    import com.yourpackage.ContentObject;
    dialect "mvel"

    rule "GetMax"
      when
         m1 : ContentObject ()
         mx : Max( m1.size > max )
    then
         mx.max = m1.size;
         update(mx);
    end 
```

我认为在 Drools 中不那么明显的是对象在工作内存中是如何组织和使用的。值得在 drools 文档中搜索术语“交叉产品”。

另外，在你用 drools 实现这个简单的算法之前，请记住，java 中有一个可以做同样事情的单行代码（假设你正在实现 Comparable - cf Collections.sort()）！

# asp.net - 将 Visual Studio 2010 asp 标签格式中的文档格式化为小写

> ID：11408640
> 
> 赞同：0
> 
> 时间：2012-07-10T07:36:38.290
> 
> 标签：asp.net, visual-studio-2010

我有[这个帖子](https://stackoverflow.com/questions/1037288/visual-studio-2008-formats-asp-tags-to-lowercase)的类似问题。

当我尝试在 asp.net 文件 (*.aspx) 中使用快捷键 CTRL + K、CTRL + D 来格式化文档时，所有文档都被重新格式化为小写。

我尝试了针对 Visual stuio 2008 公开的解决方案，但不起作用。

我尝试重置 Visual Studio 设置，关闭 Resharper (v6.1)。似乎什么都没有咬人。

一些想法来解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T11:19:43.390

我在 Visual Studio 2012 中遇到了同样的问题，我在工具、选项中更改了格式设置。

转到文本编辑器、HTML、格式。尝试大写下的设置。

此问题也在此处讨论[Visual Studio 2008 将 asp 标记格式化为小写](https://stackoverflow.com/questions/1037288/visual-studio-2008-formats-asp-tags-to-lowercase)

# android - 在安卓操作系统上开发安卓应用

> ID：11408641
> 
> 赞同：1
> 
> 时间：2012-07-10T07:36:38.617
> 
> 标签：android, eclipse

抱歉，如果有人已经问过类似的问题，但我一直在寻找很多东西，但没有找到解决方案。

有没有办法在运行 Android 操作系统的实际设备上开发 Android 应用程序？例如，我有一些购买平板电脑的计划，能够运行 Eclipse（或类似的东西）并制作一些应用程序会很有趣。:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T07:38:56.757

是的，市场上有一些应用程序，例如[https://play.google.com/store/apps/details?id=com.aide.ui](https://play.google.com/store/apps/details?id=com.aide.ui) ...

在 Google Play 商店中搜索“IDE”（集成开发环境）。

希望对您有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T07:55:05.627

如果您想在移动设备上为 Android 编程（例如在旅行中），您可以使用在 Android 上运行并允许创建原生 Android 应用程序的集成开发环境，而无需在 Windows 或 Linux 上使用 Android SDK，您可以从 google play 下载这样的应用程序，例如：

[安卓java编辑器](https://play.google.com/store/apps/details?id=com.anjedi&hl=fr)

[JavaIDEDroid](https://play.google.com/store/apps/details?id=com.t_arn.JavaIDEdroid&feature=also_installed)

[机器人开发](https://play.google.com/store/apps/details?id=com.assoft.DroidDevelop&feature=also_installed)

[AIDE - 安卓 Java IDE](https://play.google.com/store/apps/details?id=com.aide.ui&feature=related_apps)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T07:50:04.713

试试 RFO BASIC！

在 BASIC 中的 Android 设备上编写程序！语言。

[http://laughton.com/basic/](http://laughton.com/basic/)

# c# - 为其他类型配置 ReSharper 的“可能的多个枚举”

> ID：11408643
> 
> 赞同：2
> 
> 时间：2012-07-10T07:36:46.653
> 
> 标签：c#, resharper

ReSharper 有警告“IEnumerable 的可能多重枚举”。是否有可能让 ReSharper 为其他类型生成此警告？具体来说，我希望 ReSharper 为我自己的一种类型生成此警告。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T19:19:50.397

ReSharper 分析经过硬编码，仅检查 IEnumerable

# iphone - NSString 到 NSDecimalNumber 的客观 c 转换

> ID：11408646
> 
> 赞同：5
> 
> 时间：2012-07-10T07:37:02.310
> 
> 标签：iphone, objective-c, ios

谁能告诉我 NSString 到 NSDecimalNumber 的转换

无符号长长订单；

```
 if (i==1) {

            order = [feeArray objectAtIndex:0];
        }
        if (i==2) {
            order = [amountArray objectAtIndex:0];
        } 
```

提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-10T07:43:01.837

您可以使用`NSDecimalNumber`'`decimalNumberWithString`初始化器从字符串转换

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-10T07:53:40.660

尝试这个：

```
NSString *order = @"";
if (i==1) {
  order = [feeArray objectAtIndex:0];
}
if (i==2) {
  order = [amountArray objectAtIndex:0];
}

NSDecimalNumber *decimal = [NSDecimalNumber decimalNumberWithString:order]; 
```

# java - Java - 覆盖泛型类型的接口方法时如何获取具体参数类型

> ID：11408648
> 
> 赞同：3
> 
> 时间：2012-07-10T07:37:12.513
> 
> 标签：java, generics

我是一个泛型新手，我无法找到实现这一目标的最佳方法。如果我做的事情明显错误，请随时指出。

```
interface Node<T> {

    void addOne(Node<T> node);
}

class StringNode implements Node<String> {

    List<StringNode> data = new ArrayList<>();

    /**
     * {@inheritDoc}
     */
    @Override
    public void addOne(Node<String> node) {
        StringNode stringNode = (StringNode) node;
        data.add(stringNode);
    }

} 
```

我希望找到一种方法来避免在 addOne 的实现中从*Node*到*StringNode*的向下转换，方法是让函数本身具有签名*public void addOne(StringNode node)*。关于如何更改 Node 的定义以实现接口的任何实现的任何想法？

我尝试搜索已经提出的问题，但无法找到匹配的结果。任何指向已经讨论过的问题的指针也将不胜感激。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T07:44:45.907

为什么要分别使用 String 和 StringNode ？你不能说

```
interface Node<T> {

    void addOne(T node);
}

class StringNode implements Node<StringNode> {

    List<StringNode> data = new ArrayList<StringNode>();

    /**
     * {@inheritDoc}
     */
    @Override
    public void addOne(StringNode node) {
        StringNode stringNode =  node;
        data.add(stringNode);
    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T07:56:51.200

我会这样做：

```
interface Node<T extends Node<T>> {

    void addOne(T node);
}

class StringNode implements Node<StringNode> {

    List<StringNode> data = new ArrayList<StringNode>();

    /**
     * {@inheritDoc}
     */
    @Override
    public void addOne(StringNode node) {
        data.add(node);
    }

} 
```

类似于 U-No-Poo 的建议，但更严格一些（强制 T 实际上是一个节点）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T07:54:59.277

您可以引入另一个通用参数：

```
public interface Node<VALUE_TYPE, SELF> {
  public void addOne(SELF u);
}

public class StringNode implements Node<String, StringNode> {

  @Override
  public void addOne(StringNode u) {
    // TODO Auto-generated method stub  
  }
} 
```

`VALUE_TYPE`每当您需要实际值类型（在本例中为 String）以及`SELF`想要传递该类型的节点时使用。

# asp.net - 通过 sql server SP 在 aspnet 成员中添加用户和分配角色

> ID：11408650
> 
> 赞同：6
> 
> 时间：2012-07-10T07:37:25.463
> 
> 标签：asp.net, sql-server-2005, asp.net-membership

技术 - asp.net 3.5, Sql server 2005

我已经为我的 web 应用程序集成了 aspnet 成员资格。

我正在通过导入 excel 文件添加一些用户（成员）。

那么如何在 aspnet 成员表中添加该用户和该用户的角色呢？

注意 - 我有 SP 用于从上传的 excel 文件中添加数据库中的成员，我在成员表上写了插入触发器。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-10T08:31:54.787

不要手动插入数据库记录。使用 .NET 的 Membership Provider 的存储过程来做到这一点，例如`aspnet_Membership_CreateUser`和`aspnet_Roles_CreateRole`.

但更好的是，使用 .NET 的类/方法来做到这一点。它们为您封装了整个机制：

*   [会员提供者](http://msdn.microsoft.com/en-us/library/aa478949.aspx)
*   [角色提供者](http://msdn.microsoft.com/en-us/library/aa478950.aspx)

首先，您创建一个用户，然后（可选）将角色附加到。

**2015 年 12 月更新**

人们一直在读这篇文章。重要的是要知道几年来，有一个完全不同的范例，[ASP.NET Identity](http://www.asp.net/identity)。请使用它而不是旧的会员资格提供者。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-19T09:36:42.050

阿比你应该使用

```
 //to create a user
     MembershipUser newUser = Membership.CreateUser(UserName, Password, Email);
     //to attach created user some role
     Roles.AddUserToRole(newUser.UserName, role); 
```

**更新**
为此，您可以为成员存储过程**aspnet_Membership_CreateUser**创建一个用户，或者您可以创建一个用于将数据插入到 user 和 userinroles 表中。我鼓励你参考[链接](https://msdn.microsoft.com/en-us/library/aa478949.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-19T21:32:05.313

您可以使用空的 PasswordHash 和 SecurityStamp 在 AspNetUsers 表中简单地执行 INSERT。然后我们有一个“忘记密码”流程，它使用 ASP.NET Membership 建立凭据。

# java - 解析 XML 模式 java

> ID：11408652
> 
> 赞同：0
> 
> 时间：2012-07-10T07:37:32.877
> 
> 标签：java, xsd, wsdl, jaxb, xsom

我需要解析 XML 模式（源可以是 wsdl 文件或 xsd ）并提取所有复杂类型及其组成元素及其类型。我使用了 JAXB (xjc)，但它没有返回所有 complexTypes 的列表。我应该使用哪种替代方案 (XSOM)？我更喜欢 jdk6 中的一些内置库。

`

```
 <element name="BankLoanProcessRequest">   
   <complexType>
     <sequence>
    <element name="ClientId" type="int"/>
    <element name="LoanAmount" type="double"/>
   </sequence>
  </complexType>
 </element>` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T08:50:34.970

您可以使用 JDOM 或 DOM4j-

这是链接 -

[http://www.jdom.org/](http://www.jdom.org/)

[http://dom4j.sourceforge.net/](http://dom4j.sourceforge.net/)

# c# - 数据库图像字段传递空值

> ID：11408653
> 
> 赞同：3
> 
> 时间：2012-07-10T07:37:33.683
> 
> 标签：c#, database, winforms

如何将`null`值传递给具有图像类型的数据库字段。我正在尝试这个但得到一个错误：

```
if (photo)
    cmd.Parameters.AddWithValue("EPhotograph",img);
else
    cmd.Parameters.AddWithValue("EPhotograph", "");
if (signn)
    cmd.Parameters.AddWithValue("ESignature",sign);
else
    cmd.Parameters.AddWithValue("ESignature",DBNull.Value); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T07:52:43.440

而不是`DBNull.Value`请尝试像这样放置空字节数组 `new byte[0];`

原因 SQL 图像类型需要字节数组作为其中的值。

# visual-studio - 在 Visual Studio 中查看进程命令行参数

> ID：11408657
> 
> 赞同：0
> 
> 时间：2012-07-10T07:38:03.183
> 
> 标签：visual-studio, web-services, debugging, visual-studio-debugging

我有一个在 IIS 的应用程序池中运行的 Web 服务。每当我尝试调试此 Web 服务时，我都会将其附加到 Visual Studio 调试器。但是，问题是有多个`w3wp.exe`（托管 Web 服务），我不知道要附加到哪一个。作为一种解决方法，我首先打开任务管理器（其中有进程命令行作为列之一）检查哪个多个`w3wp.exe`正在托管我的应用程序池，记下它的 PID，然后从 Visual Studio 使用该 PID 附加到进程。有没有更好的方法来做到这一点？我可以`w3wp.exe`从 Visual Studio 的“附加到进程”窗口本身查看命令行参数吗？我正在使用视觉工作室 2010。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-11T19:31:54.457

对于 Window 2008/Vista/7 (IIS 7.0/7.5)

*   IIS 7.0/7.5 附带了一个名为 AppCmd 的新实用程序，它用作命令行服务器管理实用程序。
*   此工具位于 %systemroot%\system32\inetsrv\AppCmd.exe
*   要列出当前工作进程 ID 及其对应的站点，请使用以下命令

    `C:\Windows\System32\inetsrv>appcmd list wp`

*   知道应用程序工作进程 ID 后，从 Visual Studio 的“附加到进程”对话框中选择正确的工作进程

希望它有帮助。

# c# - 为 NeutralResourcesLanguageAttribute 设置了哪种语言？

> ID：11408661
> 
> 赞同：0
> 
> 时间：2012-07-10T07:38:18.433
> 
> 标签：c#, asp.net, .net, silverlight, windows-phone-7

我正在开发阿拉伯语和乌尔都语应用程序（在同一个应用程序中），所以我为 NeutralResourcesLanguageAttribute 设置了哪种语言（在汇编信息页面中）。 ![在此处输入图像描述](../Images/e48430ebf89223c2933bb4b522201daa.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T10:13:34.317

Visual Studio 项目通常具有：

*   编译到主程序集 ( ) 中的中性资源文件（例如 MyResources.resx `MyAssembly.dll`）

*   特定区域性资源文件（例如 MyResources.de-DE.resx）被编译到特定区域性子文件夹（例如`de-DE/MyAssembly.Resources.dll`）中的附属程序集中。

您应该将 NeutralResourcesLanguageAttribute 设置为您在中性资源文件中使用的区域性。

如果它是一个全局应用程序，您通常会将“en-US”用于中性资源，并将其他语言放在附属程序集中，以与 .NET Framework 本身保持一致。

在您的情况下，您说您正在使用两种非英语语言，所以只需选择其中一种。虽然您的示例图像有英文文本，但您也可以使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T10:02:46.840

看一下这个

[中性资源语言属性](http://blogs.msdn.com/b/bclteam/archive/2005/10/11/479330.aspx)

您可以将其设置为其中之一，即您想要回退到的那个。

# ios - iCarousel - 两指滑动而不是单指滑动

> ID：11408662
> 
> 赞同：0
> 
> 时间：2012-07-10T07:38:24.350
> 
> 标签：ios, swipe

我在我的一个 iOS 项目中使用 iCarousel，我必须说这是一项出色的工作。

[https://github.com/nicklockwood/iCarousel](https://github.com/nicklockwood/iCarousel)

不过我有一个问题——我想用单指滑动在 UIView 上绘图，用两指滑动在 UIView 之间切换/移动。

有没有简单的方法来实现这一目标？

干杯壶

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T06:46:30.993

很容易..

只需在 iCarousel.m 中添加即可

panGesture.minimumNumberOfTouches = 2; panGesture.maximumNumberOfTouches = 2;

# javascript - 检查用户是否登录到 facebook

> ID：11408663
> 
> 赞同：0
> 
> 时间：2012-07-10T07:38:37.090
> 
> 标签：javascript, facebook-graph-api

我在facebook上开发应用程序。如果他登录facebook，当他阅读我网站上的任何文章时，这个应用程序可以发布到用户墙上。一切正常，但我想做一些我希望我的应用程序检查用户是否登录到 facebook，如果不是，应用程序必须强制他登录到 facebook，然后他才能阅读任何文章。

```
<html>
<head>
    <meta property="fb:app_id" content="452488354765730" />
    <meta property="og:title" content="3eesho reading club" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="http://3eesho.com/fb/subhitest/test_PAGE"  />
    <meta property="og:site_name" content="3eesho.com" />
    <meta property="og:image"       content="http://ogp.me/logo.png" /> 
</head>
    <body>
<script type="text/javascript">
function getCookie(c_name)
{
var i,x,y,ARRcookies=document.cookie.split(";");
for (i=0;i<ARRcookies.length;i++)
{
x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));
y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);
x=x.replace(/^\s+|\s+$/g,"");
if (x==c_name)
{
return unescape(y);
}
}
}
function setCookie(c_name,value,exdays)
{
var exdate=new Date();
exdate.setDate(exdate.getDate() + exdays);
var c_value=escape(value) + ((exdays==null) ? "" : "; expires="+exdate.toUTCString());
document.cookie=c_name + "=" + c_value;
}
function checkCookie()
{
var a=document.location.href;
var b=a.split("/");
var username=getCookie("username");
if (username==null || username=="")
{
alert("thank you for visit this Id:"+b[4]);
username=b[4];
myFunction();
setCookie("username",username,365);
}
else 
{
alert("this Id visited:"+b[4]);
if(username!=b[4])
{
myFunction();
setCookie("username",b[4],365);
}   
}
}
function myFunction()
{
var x;
var r=confirm("did you want to publish this article to your wall on facebook");
if (r==true)
{
x=alert("the article published!");
graphStreamPublish();
}
else
{
x=alert("the article doesn't publish!");
}
}
</script>
<script>
            (function(d, s, id) {
                                            var js, fjs = d.getElementsByTagName(s)[0];
                                            if (d.getElementById(id)) return;
                                            js = d.createElement(s); js.id = id;
                                            js.src =   "//connect.facebook.net/en_US/all.js#xfbml=1&appId=452488354765730";
                                            fjs.parentNode.insertBefore(js, fjs);
                                            }(document, 'script', 'facebook-jssdk'));
//FB App Script
            var button;
            var userInfo;
            window.fbAsyncInit = function() {
                            FB.init({ appId: '452488354765730',
                            status: true,
                            cookie: true,
                            xfbml: true,
                            oauth: true});
                            showLoader(true);
            };
            (function() {
                            var e = document.createElement('script'); e.async = true;
                            e.src = document.location.protocol
                            + '//connect.facebook.net/en_US/all.js';
                            document.getElementById('fb-root').appendChild(e);
            }());
            //stream publish method
            function graphStreamPublish(){
                                alert("graphStreamPublish");
                            showLoader(true);
                            FB.api('/me/feed', 'post',
                            {
                             message :    "\u0642\u0631\u0627 \u0647\u0630\u0627 \u0627\u0644\u0645\u0642\u0627\u0644 \u0639\u0644\u0649 \u0639\u064A\u0634\u0648.\u0643\u0648\u0645",   
                                              link    : document.location.href+'? utm_campaign=spring&utm_medium=referral&utm_source=exampleblog'+target="_blank",
                                              },
                            function(response) {
                                            showLoader(false);
                                            if (!response || response.error) {
                                            //alert('Error occured');
                                            } 
                                                  else
    {

        alert("Posted as "+response.id);
    }
                            });
            }
            function showLoader(status){
                            if (status)
                                              document.getElementById('loader').style.display = 'block';
                            else
                                            document.getElementById('loader').style.display = 'none';
            }
</script>
<a href="#" onclick="checkCookie()">Testing</a>
<div class="fb-login-button" data-show-faces="true" data-width="180" data-max-rows="1"  scope="publish_actions"></div>
                <div id="loader" style="display:none"></div>
    </body>
</html> 
```

# javascript - 浮点数的正则表达式

> ID：11408665
> 
> 赞同：3
> 
> 时间：2012-07-10T07:38:49.903
> 
> 标签：javascript, regex

我发现这个正则表达式用于验证浮点数。但我看不出 2-1 将如何被接受。以下评估为真。我不能使用 parseFloat，因为我需要能够接受“，”而不是“。” 还。我写了re2，但结果相同。

```
var re1 = new RegExp("^[-+]?[0-9]*\.?[0-9]+$");
console.log(re1.test("2-1"));

var re2 = new RegExp("^([0-9]+)\.([0-9]+)$");
console.log(re2.test("2-1")); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T07:46:56.530

有时当你创建一个正则表达式字符串时，你甚至不得不转义反斜杠；这当然可以用反斜杠来完成，所以最终的正则表达式看起来像`"\\.*"`，等等。

这样做，我能够得到正确的结果，如下[所示](http://jsfiddle.net/Daedalus/EMdPB/)：

```
var re1 = new RegExp("^[-+]?[0-9]*\\.?[0-9]+$");
console.log(re1.test("2-1"));

var re2 = new RegExp("^([0-9]+)\\.([0-9]+)$");
console.log(re2.test("2-1"));

console.log(re1.test("2.1"));
console.log(re2.test("2.1"));​ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T07:53:47.390

如果使用构造函数生成正则表达式，则必须转义反斜杠，即`\`变为`\\`：

```
var re1 = new RegExp("^[-+]?[0-9]*\\.?[0-9]+$"); 
```

另一种选择是使用不需要转义的文字语法：

```
var re1 = /^[-+]?[0-9]*\.?[0-9]+$/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T07:44:27.153

用句点（“.”）替换逗号（“，”）然后使用 parseFloat 怎么样？

# java - 识别wav之间模式的算法

> ID：11408666
> 
> 赞同：2
> 
> 时间：2012-07-10T07:38:52.237
> 
> 标签：java, algorithm, wav

我正在从事一个项目，该项目必须识别频率不同的波形文件之间的相似模式。
例如，人类的语音频率彼此不同。如果我要识别人类是否在**哭泣，大喊大笑的声音**，无论频率如何，哭声之间都应该有一种模式。

所以我正在寻找一种可以识别这些元素的算法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T07:45:17.723

你可以先看看[神经网络](http://en.wikipedia.org/wiki/Neural_network)。这些类型的程序通常可以很好地处理数据中的某些*不一致*。Neuroph [Studio](http://neuroph.sourceforge.net/)为您提供了一种快速且相对简单的方法来构建您的神经网络。

您所需要的只是一组数据，其中包含您想要匹配的任何内容。您可以使用大约 70% 的数据让您的神经网络学习对数据进行聚类，然后使用剩余的 30% 来测试您的神经网络。

神经网络的主要问题是您需要找到一种将数据编码为输入向量的方法。一旦你这样做了，神经网络应该尝试并学会自己找到差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T07:44:04.900

对于基于图像的识别，主成分分析和它的兄弟姐妹，如内核 PCA 或线性判别分析是正确的。PCA 是一种适用于任何类型数据的算法，所以我认为也适用于声音。

我会将 wav 转换为 int-Vectors 并在其上运行 PCA 以提取特征。

[JMathTools](http://jmat.sourceforge.net/_index.html)非常适合...

这个我[也](https://dsp.stackexchange.com/questions/912/is-there-an-analogous-library-to-opencv-for-audio-analysis)发现...

希望我能帮到你...

# css - 如何垂直居中导航栏元素（Twitter Bootstrap）？

> ID：11408667
> 
> 赞同：19
> 
> 时间：2012-07-10T07:38:52.700
> 
> 标签：css, twitter-bootstrap, alignment, less, vertical-alignment

到目前为止，这是我的 CSS/LESS CSS 代码：

```
//make navbar taller
@navbarHeight: 60px;

//make navbar link text 18px
.navbar-inner {
    font-size: 18px;
}

//make navbar brand text 36px
.navbar .brand {
    font-size: 36px;
} 
```

产生这个：

![在此处输入图像描述](../Images/1ffe96f1000879e1ccdfecf55718c825.png)

*仅供参考，我正在使用 Twitter Bootstrap 演示代码，我没有更改 html（除了更改品牌名称）。*

正如您所看到的，品牌名称在导航栏中垂直居中，就像它应该的那样，但导航链接不是（它们向顶部高一点）。只有在我更改导航栏的高度后，问题才变得明显。我怎样才能让它们垂直居中（例如[这个](http://www.fleetio.com/)网站）？

如果有任何帮助，突出显示 Chrome 中的元素会显示：

![在此处输入图像描述](../Images/7d72b55f6c418fea012898185ed5a8f1.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T00:43:58.870

该类`.brand`使用不同于`line-height`整个 Bootstrap 使用的基本文本，以及其他一些关键差异。

来自原始引导导航栏的相关部分 LESS -

对于`.brand`：

```
.brand {
  // Vertically center the text given $navbarHeight
  @elementHeight: 20px;
  padding: ((@navbarHeight - @elementHeight) / 2 - 2) 20px ((@navbarHeight - @elementHeight) / 2 + 2);
  font-size: 20px;
  line-height: 1;
} 
```

对于导航栏中的链接：

```
.navbar .nav > li > a {
  @elementHeight: 20px;
  padding: ((@navbarHeight - @elementHeight) / 2 - 1) 10px ((@navbarHeight - @elementHeight) / 2 + 1);
  line-height: 19px;
} 
```

您可能需要使用 , 的值`@elementHeight`，`line-height`并且可能`padding`需要`.navbar .nav > li > a`选择器来反映更大的 60px `@navbarHeight`（这些默认值适用于 40px `@navbarHeight`）。也许尝试 40px`@elementHeight`和/或 29px 行高开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T10:25:09.740

如果上面的答案没有帮助，而且你还没有接触过 html，那么我唯一能想到的就是 css。您可能想查看引导示例使用的 css 并相应地修改其`.navbar-inner`大小`.navbar .brand`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-18T01:52:41.747

我刚刚在 Bootstrap 3 上遇到了类似的问题，但在品牌元素方面。最后我使用了以下css：

```
.navbar-brand {
  font-size: 3em;
  line-height: 1em;
} 
```

由于 50 像素的图像，我的导航栏的大小增加了，顶部和底部边距为 10 像素。不确定这是否有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T08:27:11.543

你可以试试这个：

`display: table-cell;`

# javascript - AngularJS - 是否可以使用 ng-repeat 来呈现 HTML 值？

> ID：11408668
> 
> 赞同：17
> 
> 时间：2012-07-10T07:38:52.820
> 
> 标签：javascript, html, model-view-controller, web, angularjs

我将 AngularJS 与生成 html 响应的第三方服务一起使用。我想使用 ng-repeat 将 HTML 响应呈现为列表，但是 Angular 将其呈现为文本。

是否可以使用 ng-repeat 呈现 HTML 属性？

我创建了这个 jsFiddle 来演示我的问题。 [http://jsfiddle.net/DrtNc/1/](http://jsfiddle.net/DrtNc/1/)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-10T15:02:02.480

我认为使用`ng-bind-html-unsafe`会得到你所需要的。

```
<div ng:repeat="item in items" ng-bind-html-unsafe="item.html"></div> 
```

这是一个工作小提琴：http: [//jsfiddle.net/nfreitas/aHfAp/](http://jsfiddle.net/nfreitas/aHfAp/)

该指令的文档可以在这里找到：http://docs.angularjs.org/api/ng.directive: [ngBindHtmlUnsafe](http://docs.angularjs.org/api/ng.directive:ngBindHtmlUnsafe)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-09-17T13:03:02.660

我实现这一点的方法是通过 ng-repeat 中的 ng-bind-html;

```
<div ng-repeat="comment in comments">
  <div ng-bind-html="comment.content"></div>
</div> 
```

希望这对某人有帮助！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T08:15:43.743

item.html 将始终被解释为文本。您必须将其显式转换为 html。[点击这里](http://jsfiddle.net/DrtNc/3/)

我添加了一个渲染函数，它将每个字符串转换为 html。

# javascript - javascript：通过变量访问对象属性

> ID：11408670
> 
> 赞同：0
> 
> 时间：2012-07-10T07:39:03.590
> 
> 标签：javascript

我想动态访问 Javascript 对象。

例子：

```
example: { 
    name: "dev.pus", 
    year: 2012, 
    os: "linux" 
} 
```

这不是什么新鲜事。现在您通常可以通过以下方式访问“示例”的属性：

```
console.log(example.name);
// or
console.log(example.year); 
```

但是如果我想动态地获取属性怎么办？例如，另一个 var（假设用户设置它）应该决定我们想要哪个属性：

```
var = "name";
console.log(example.var); // error
console.log(example[var]); // error 
```

要走的路是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T07:42:52.373

如果您要更改变量名称（保留 var），您的示例应该可以工作。

```
var key = 'name';
console.log(example[key]); 
```

您还可以遍历对象以获取所有键：

```
for (var item in example){
    if (example.hasOwnProperty(item)){
      console.log(example[item]);
    }
} 
```

[http://jsfiddle.net/bC9XJ/](http://jsfiddle.net/bC9XJ/)

# iphone - NSSet 相交集实现

> ID：11408673
> 
> 赞同：2
> 
> 时间：2012-07-10T07:39:11.483
> 
> 标签：iphone, objective-c, ios5, xcode4.3

我需要创建一个方法来比较一些 NSSet 并查看是否所有对象都在那里，或者它是否缺少一个对象以及它是哪个对象。我刚刚创建了 viewDidLoad 方法，但我需要一个方法来检查所有 NSSet（有很多）。我没有工作得那么好。

```
- (void)viewDidLoad
{
        [super viewDidLoad];
         NSMutableSet *masterSet = [[NSMutableSet alloc] initWithObjects:@"0", @"1", @"2", @"3", @"4" ,nil];
        NSMutableSet *set2 = [[NSMutableSet alloc] initWithObjects:@"0", @"1", @"2", @"3", nil];
        NSMutableSet *set3 = [[NSMutableSet alloc] initWithObjects:@"2", @"10", @"12", @"14", @"18", nil];

        if ([masterSet intersectsSet:set2] == [set2 count]) {
            NSLog(@"set2: %@", set2);
        }
} 
```

在此示例中，我尝试检查是否 set2 上的所有对象都在 masterSet 中，所以我打印 set2。我不明白为什么这不起作用，因为这没有在日志上打印。

如果有人可以帮助我，我需要在一个方法上创建这个“如果”，该方法将检查我拥有的所有 NSset，并检查是否缺少一个完全匹配的对象，也获取这个对象。谢谢你们

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T08:04:09.687

`intersectsSet:`返回一个`BOOL`。这意味着 0（假）或 1（真）。因此，只要您对 set2 的计数大于 1，该语句就永远不会正确。

您正在寻找的方法是[intersectSet](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSMutableSet_Class/Reference/NSMutableSet.html#//apple_ref/occ/instm/NSMutableSet/intersectSet%3a)：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T08:11:49.920

如果我对您的理解正确，您想知道其中的每个对象`masterSet`是否都在`set2`.

你可以检查这个`isEqualToSet:`

```
if ([masterSet isEqualToSet:set2]) {
    NSLog(@"set2: %@", set2);
} 
```

> 来自文档： 如果 otherSet 的内容等于接收集的内容，则
> **返回YES，否则返回 NO。**
> 
> 如果两个集合都具有相同数量的成员并且如果一个集合的每个成员都存在于另一个集合中，则它们具有相同的内容。

# ruby-on-rails - 如何使用 paypal_permissions gem 获取 PayPal 的用户数据和交易详情？

> ID：11408674
> 
> 赞同：8
> 
> 时间：2012-07-10T07:39:12.067
> 
> 标签：ruby-on-rails, transactions, report, paypal

[我需要获取交易数据（日期，价值）和用户数据。我可以像这个问题](https://stackoverflow.com/questions/11389726/how-to-receive-payment-data-or-user-data-from-paypal-using-paypal-permissions-ge)一样使用这个 gem 并进行一些修改吗？

另外，从文档中：

> 例如，如果您计划使用 getBasicPersonalData 和 getAdvancedPersonalData 查询 PayPal，您可能会生成如下商家模型：

```
rails generate paypal_permissions merchant email:string first_name:string last_name:string full_name:string country:string payer_id:string street1:string street2:string city:string state:string postal_code_string phone:string birth_date:string 
bundle exec
rake db:migrate 
```

我应该使用支付数据传输 (PDT) 还是 TRANSACTION_DETAILS？这是我将写入数据的地方，但我如何从 PayPal 获取数据？

谁能给我代码示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T07:28:26.307

**Paypal Adaptive**似乎是解决这个问题的方法，这是我找到的一些文档，希望对您有所帮助。

* * *

## PayPal 自适应 Rails 3

像往常一样，PayPal 文档非常混乱和杂乱无章，因此我想我会记录我是如何设法让 PayPal Adaptive 在市场风格的网站上工作的。

* * *

### 警告！

请使用这篇文章作为有关 paypal API 如何与您的 rails 应用程序连接的指南。正如 Jamesw 在下面的评论中指出的那样，我没有创造出一种足够的方式来记录每笔交易的所有细节。毫无疑问，这是法律要求的。所以也许在读完这篇文章后看看他的评论。希望你能找到一种方法来做到这一点

* * *

### 设置

经过一番搜索，我发现现在最好使用的 gem 是[paypal_adaptive](https://github.com/tc/paypal_adaptive)。ActiveMerchant 目前不支持 PayPal Adaptive（有一个 gem 可以添加它，但似乎没有维护。）

```
# Gemfile
gem 'paypal_adaptive' 
```

* * *

### 这个怎么运作

PayPal Adaptive 相对简单，但杂乱无章的文档让人望而生畏。简而言之，这就是我的做法：

1.  在您的配置文件夹中创建 paypal_adaptive.yml 并添加您的详细信息
2.  创建一个资源来处理付款——我创建了一个“采购”资源（模型：采购）
3.  当用户单击购买按钮时，它会调用我在 PurchasesController 中称为“购买”的操作
4.  在“购买”操作中，我首先创建一个新的购买项目 (Purchase.new)，然后添加一些详细信息，如 user_id、product_id、amount 等。
5.  然后我在我新创建的 Purchase 对象 (purchase.pay) 上调用一个名为“pay”的模型方法
6.  在我的购买模型中，我定义了“支付”方法，在其中我最终通过创建请求类 (PaypalAdaptive::Request.new) 来使用 paypal_adaptive gem
7.  我将要发送到 PayPal 的所有必要数据添加到哈希中，然后调用 Request.pay 方法，传入该数据哈希。这会向 PayPal 发起 API 调用，然后 PayPal 会回复此请求成功的确认信息
8.  如果 API 调用成功，我会将用户重定向到 PayPal 以登录并确认付款
9.  用户付款后，PayPal 会向您指定的 IPN 地址发送一个 IPN（即时付款通知）——我将其路由到我的 PurchasesController 中的一个方法
10.  在这种方法中，我找到了 Purchase 对象并将其标记为已付款（purchase.paid = true），然后就完成了！

* * *

### paypal_adaptive.yml

转到[此处](https://developer.paypal.com/)创建一个沙盒帐户（您将需要它）。登录后转到“创建预配置帐户”。创建两个帐户——一个买家和一个卖家。如果您使用链式或并行付款（由多人分摊的付款），请创建更多帐户。

单击左侧面板中的 Api Credentials。

现在使用这些凭据填写您的 paypal_adaptive.yml（也使用我在下面提供的 application_id - 这是 www.x.com 提供的测试 application_id

```
development:
  environment: "sandbox"
  username: "platts_xxxxxxxx_biz_api1.gmail.com"
  password: "xxxxxxxxxxxx"
  signature: "xxxxxxx"
  application_id: "APP-80W284485P519543T"

test:
  environment: "sandbox"
  username: "platts_xxxxxxxx_biz_api1.gmail.com"
  password: "xxxxxxxx"
  signature: "xxxxxxxx"
  application_id: "APP-80W284485P519543T"

production:
  environment: "production"
  username: "my_production_username"
  password: "my_production_password"
  signature: "my_production_signature"
  application_id: "my_production_app_id" 
```

* * *

### 创建控制器操作来处理购买请求

在这里，您只需要支付的金额和您希望这笔钱去往的电子邮件列表。所以写下你的逻辑来解决这个问题，然后打电话给 PayPal 来设置购买。

```
pay_request = PaypalAdaptive::Request.new
    data = {
      "returnUrl" => return_url,
      "requestEnvelope" => {"errorLanguage" => "en_US"},
      "currencyCode" => "USD",
      "receiverList" =>
              { "receiver" => [
                {"email" => "platts_xxxxxxxx_biz@gmail.com", "amount"=> amount}
              ]},
      "cancelUrl" => cancel_url,
      "actionType" => "PAY",
      "ipnNotificationUrl" => ipn_url
    }

    #To do chained payments, just add a primary boolean flag:{“receiver”=> [{"email"=>"PRIMARY", "amount"=>"100.00", "primary" => true}, {"email"=>"OTHER", "amount"=>"75.00", "primary" => false}]}

    pay_response = pay_request.pay(data)

    if pay_response.success?
        # Send user to paypal
        redirect_to pay_response.approve_paypal_payment_url
    else
        puts pay_response.errors.first['message']
        redirect_to "/", notice: "Something went wrong. Please contact support."
    end 
```

* * *

### 处理 IPN 呼叫

我将我的 IPN 呼叫从 PayPal 路由到此方法：

```
def ipn_notification
    ipn = PaypalAdaptive::IpnNotification.new
    ipn.send_back(request.raw_post)

    if ipn.verified?
      logger.info "IT WORKED"
    else
      logger.info "IT DIDNT WORK"
    end

    render nothing: true
  end 
```

不幸的是，如果您在本地主机上，PayPal 无法向您发送 IPN，因此在测试整个过程时会出现问题。Ryan Bates 的解决方案是使用 curl 来模拟 IPN 请求。但是，正如您在上面的代码中看到的，我们向 PayPal 发出另一个请求，确认 IPN 是真实的。因此，即使 curl 发送假 IPN，我们也会遇到问题。我现在要去寻找解决方案，但是如果您有任何想法，请发表评论。

# spring - EntityManager 没有持久性提供程序 - 使用 Hibernate 和 Spring MVC

> ID：11408683
> 
> 赞同：0
> 
> 时间：2012-07-10T07:39:40.387
> 
> 标签：spring, hibernate, jakarta-ee, spring-mvc

我有 Spring MVC 项目。我正在使用 HSQL 数据库和 Hibernate。我在与 Spring MVC（默认为 JPA）和 Hibernate 建立连接时卡住了。我`persistance.xml`在 Spring MVC 目录中创建了文件：`src/main/resources/META-INF`. 我也尝试将它放在 Spring MVC 目录中：`Deployed Resources/webapp/WEB-INF/classes/META-INF`. 我不知道哪一个是正确的。我仍然有同样的问题。

这是我的`persistance.xml`：

```
<?xml version="1.0" encoding="UTF-8" ?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/persistence
                             http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd" version="2.0"> 
<persistence-unit name="entityManager">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <class>package.pl.models.Users</class>
    <properties>                    
        <property name="javax.persistence.jdbc.driver" value="org.hsqldb.jdbcDriver" />
        <property name="javax.persistence.jdbc.url" value="jdbc:hsqldb:file:/home/user/hsqldb/lib/my.spring.mvc/mybase" />
        <property name="javax.persistence.jdbc.user" value="user" />
        <property name="javax.persistence.jdbc.password" value="password" />

        <property name="hibernate.dialect" value="org.hibernate.dialect.HSQLDialect" />          
        <property name="hibernate.hbm2ddl.auto" value="create" />
        <property name="hibernate.show_sql" value="true" />
        <property name="hibernate.cache.provider_class" value="org.hibernate.cache.HashtableCacheProvider" />
    </properties>
</persistence-unit> 
```

这是我的 Spring MVC 控制器方法体之一：

```
UsersHome usersHome = new UsersHome();
EntityManagerFactory entityManagerFactory = Persistence.createEntityManagerFactory("entityManager");
EntityManager entityManager = entityManagerFactory.createEntityManager();
entityManager.getTransaction().begin();
usersHome.setEntityManager(entityManager);
Users user = usersHome.findByUsername(login); 
```

当我`EntityManagerFactory`第一次使用时，我在线路上收到错误 - 指示我的持久性单元的名称。

我的例外是：

```
org.springframework.web.util.NestedServletException: Request processing failed; 
nested exception is javax.persistence.PersistenceException: No Persistence 
provider for EntityManager named entityManager 
```

根本原因是：

```
javax.persistence.PersistenceException: No Persistence provider for EntityManager named entityManager 
```

我在`EntityManagerFactory`. 大概我在我的`Dispatcher Servlet Context`文件中犯了错误。根据 Hibernate 等，我有此代码：

```
<!-- Hibernate session factory -->      
<beans:bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">     

    <beans:property name="dataSource">
        <beans:ref bean="dataSource" />
    </beans:property>

    <beans:property name="hibernateProperties">
        <beans:props>
            <beans:prop key="hibernate.dialect">org.hibernate.dialect.HSQLDialect</beans:prop>
            <beans:prop key="hibernate.show_sql">true</beans:prop>
            <beans:prop key="hibernate.hbm2ddl.auto">update</beans:prop>
        </beans:props>
    </beans:property>

    <beans:property name="annotatedClasses">
        <beans:list>
            <beans:value>package.pl.models.Users</beans:value>                              
        </beans:list>
    </beans:property>       
</beans:bean>
<!-- Hibernate session factory end -->

<!-- <beans:bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalEntityManagerFactoryBean">
    <beans:property name="persistenceUnitName" value="entityManager" />
</beans:bean> -->

<beans:bean id="transactionManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
    <beans:property name="sessionFactory" ref="sessionFactory" />
</beans:bean>   

<!-- <beans:bean id="usersDao" class="hutter.pl.dao.UsersHome">
    <beans:property name="entityManagerFactory" ref="entityManagerFactory" />
</beans:bean> --> 
```

我已经评论了`bean id="entityManagerFactory"`and `bean id="usersDao"`。有必要吗？但是我无法使用 uncommented 启动我的 Web 应用程序`bean id="entityManagerFactory"`。我收到此异常：

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with 
name 'entityManagerFactory' defined in ServletContext resource 
[/WEB-INF/spring/appServlet/servlet-context.xml]: Invocation of init method failed;
nested exception is javax.persistence.PersistenceException: No Persistence 
provider for EntityManager named entityManager 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T08:57:59.487

抱歉，我还没有阅读您的完整问题。当我看到这个时，我停下来：`persistance.xml`。怎么用`persistence.xml`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T08:36:07.483

将您的 xml 文件放入 WEB-INF 文件夹。xml 文件内容 sessionFactory 和所有存根。并将其导入 spring.xml 文件，如下所示：

```
<import resource="classpath:persistance.xml" /> 
```

# ios - 通过 iOS 应用程序打开图形操作不会出现在移动时间轴中

> ID：11408690
> 
> 赞同：0
> 
> 时间：2012-07-10T07:40:14.590
> 
> 标签：ios, facebook-graph-api, facebook-opengraph

它与从非沙盒模式的 iOS 应用程序发布活动的打开图形操作有关。

该操作已成功发布，并且在用户的时间轴中可见。但是，从 Facebook iOS 应用程序查看时间线时，它是不可见的。

在 Facebook iOS 应用中，该操作也不会出现在“最近的活动”中。似乎该操作从未发布，但可以从网络上看到。

正在使用以下代码。

```
NSMutableDictionary  *params = [NSMutableDictionary dictionaryWithObjectsAndKeys: 
                                @"xxxxxxxxxxxx", @"profile", nil];

[params setObject: @"Hello" forKey: @"message"];

[facebook requestWithGraphPath: @"me/appname:action" andParams: params andHttpMethod: @"POST" andDelegate: self]; 
```

我浏览了 Facebook iOS 错误和 OpenGraph 错误（已打开并已解决），但找不到任何相关内容。

有没有其他人遇到过？这是最近的错误还是我错过了什么？

编辑：我尝试禁用应用程序的移动网络设置，但没有运气，OG 操作在 Facebook iOS 应用程序的用户时间轴中不可见。

# internet-explorer - 无法在 IE8 中下载附件（Javamail）

> ID：11408693
> 
> 赞同：0
> 
> 时间：2012-07-10T07:40:22.270
> 
> 标签：internet-explorer, download, jakarta-mail, attachment

我无法使用 IE 下载电子邮件中的附件。没啥事儿。但我的代码在 Chrome 中工作。下面是下载代码：

```
public String downloadattach() {
    InputStream attStream = null;
    OutputStream oStream = null;
    try {
        String mailid = getRequest().getParameter("mailid");
        String filename = getRequest().getParameter("filename");
        MailboxServ serv = new MailboxServImpl();
        CmMailbox mailbox = serv.getMailbox(mailid);
        if (mailbox != null && mailbox.getCmessageBody() != null) {
            Session session = Session.getInstance(System.getProperties(),
                    null);
            InputStream iStream = mailbox.getCmessageBody()
                    .getBinaryStream();
            MimeMessage message = new MimeMessage(session, iStream);
            MailManage mm = new MailManage();
            attStream = mm.getAttach(message, filename);
            if (attStream != null) {
                getResponse().setContentType("APPLICATION/OCTET-STREAM");//("APPLICATION/x-msdownload");
                getResponse().setContentLength(attStream.available());
                getResponse().setHeader("Content-Disposition",
                        "attachment; filename=\"" + URLEncoder.encode(filename, "UTF-8") + "\"");
                byte[] buff = new byte[2048];
                oStream = getResponse().getOutputStream();
                int count = 0;
                while ((count = attStream.read(buff, 0, 1024)) > 0) {
                    oStream.write(buff, 0, count);
                }
                oStream.flush();
                oStream.close();
                attStream.close();
                oStream = null;
            }
        } else {
            writeMsg(false, "下载附件出错！邮件不存在或该邮件不包含指定附件！");
        }
    } catch (Exception e) {
        // TODO: handle exception
        logger.error(e.toString());
        writeMsg(false, "下载附件出错！错误：" + e.getMessage());
    } finally {
        if (attStream != null) {
            try {
                attStream.close();
            } catch (Exception e2) {
                // TODO: handle exception
            }
        }
        if (oStream != null) {
            try {
                oStream.close();
            } catch (Exception e2) {
                // TODO: handle exception
            }
        }
    }
    return null;
} 
```

jsp中附件的链接是：

```
'<a href="downloadattachMail.action?mailid='+mailboxid+
                             '&filename='+fname+'" target="_blank">'+fname+'</a>&nbsp;&nbsp;'+fsize 
```

它只是打开了一个带有链接的新窗口（例如：localhost:8081/CMAIL/downloadattachMail.action?mailid=40e4c0b6386e81e801386f0e67ce0018&filename=java-event中文.doc），但什么也不会发生。而“另存为”菜单也无法使用。有什么问题吗？谢谢！

# 下载可以在chrome、firefox和IE9下运行。但它不能在 IE8 中工作（也许不能在 IE7 和 IE6 中工作）。

我找到了原因。但这非常非常奇怪！为了解码汉字，我通过添加更改了tomcat的配置：

```
 URIEncoding="UTF-8" 
```

如果附件名称是英文，一切正常（chrome、ie8、ie9、firefox）。但是如果名字有汉字，用ie8的时候参数就乱了，而chrome、firefox和ie9都好。我改变了tomcat的配置：

```
 URIEncoding="GBK" 
```

# ie8 效果很好，但是chrome，firefox 不行。

我找到了解决方案并分享给大家：

1）。将整个项目设置为 UTF-8，也将 jsp 设置为 utf-8。2）。在 Js 中，使用“encodeURI()”对 url 进行编码。3）。并使用 request.getParameter() 获取它。再次感谢您的好意！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T18:17:00.337

让我们问所有明显的问题......

您的 downloadattach() 方法是否被调用过？

如果是这样，它是否抛出任何异常或检测到任何其他错误？

如果您使用纯 ASCII 文件名，有什么不同吗？

# c++ - Qt 通过 const 引用传递 - 更有效？为什么？

> ID：11408698
> 
> 赞同：0
> 
> 时间：2012-07-10T07:40:59.163
> 
> 标签：c++, qt, constants, pass-by-reference

我被告知将 Qt/C++ 应用程序中的所有按值传递或按引用传递参数更改为按 const 引用传递。所有 Qt 类型（例如 QString）都涉及，但不涉及本机类型（双精度、整数）。您能否更准确地解释原因或指向参考？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T07:50:27.270

按值传递会生成参数的本地副本，因此如果传递一个大结构，则可能会浪费大量时间和空间。这就是为什么大结构应该通过引用传递。但是如果函数/方法真的需要参数的副本，那就按值传递。

另一方面，通过引用传递使对象容易受到更改 - 如果对象的状态在函数中发生更改，则原始对象将被修改，因为它们是相同的。这就是使用 const 引用的原因：它可以防止错误地更改/编辑对象。

另一个原因是多态性。当按值传递时，虚拟性丢失，而按引用或指针传递时，虚拟方法按预期工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T07:48:19.183

当通过引用传递时，我们传递的是同一个实例的地址，其中通过值传递涉及将对象复制到另一个实例（通过复制构造函数`QString`），如 int、double 等本机类型的大小将更小，因此开销更少比较`QString`相似的对象。通过传递`const`引用，我们确保对象不会在传递的函数中被修改，因为被调用函数所做的更改会影响传递的对象，因为它们都指向同一位置。

# c# - SP 设计器中未显示 SharePoint 工作流活动。部署成功

> ID：11408704
> 
> 赞同：1
> 
> 时间：2012-07-10T07:41:25.203
> 
> 标签：c#, sharepoint, workflow, sharepoint-designer

我为 SP Designer 开发了一个 SP 工作流活动。部署成功。在 webconfig 文件中，authorizedType 已正确插入：

```
<authorizedType Assembly="WorkflowActivity, Version=1.0.0.0, Culture=neutral, PublicKeyToken=5c8e215f3e395427" Namespace="AdventureWorksWFs" TypeName="*" Authorized="True" /> 
```

源代码：

```
public static DependencyProperty TestProperty = DependencyProperty.Register("Test", typeof(string), typeof(TestSite));

    [Description("Name of the new Site")]
    [Category("Sites")]
    [Browsable(true)]
    [DesignerSerializationVisibility(DesignerSerializationVisibility.Visible)]
    public string Test
    {
        get
        {
            return ((string)(base.GetValue(TestSite.TestProperty)));
        }
        set
        {
            base.SetValue(TestSite.TestProperty, value);
        }
    }

    protected override ActivityExecutionStatus Execute(ActivityExecutionContext executionContext)
    {
        using (SPSite siteCollection = new SPSite(Url))
        {
            using (SPWeb web = siteCollection.OpenWeb())
            {
                using (SPWeb testWeb = web.Webs.Add(Test)) 
                {
                    testWeb.Description = "This is a test!";
                    testWeb.Title = Test;
                }
            }
        }
        return ActivityExecutionStatus.Closed;
    } 
```

这是 .actions 文件：

```
<WorkflowInfo>
  <Actions Sequential="then" Parallel="and">
    <Action Name="Create New Site" ClassName="TestActivity.TestSite"
        Assembly="TestActivity, Version=1.0.0.0, Culture=neutral, 
        PublicKeyToken=5c25d241f3e851927" AppliesTo="all"
        Category="Sites">
      <RuleDesigner Sentence="Create TestSite">
        <FieldBind Field="Test" Text="test" DesignerType="TextBox" Id="1" />
      </RuleDesigner>
      <Parameters>
        <Parameter Name="Test" Type="System.String, mscorlib" Direction="In" />
      </Parameters>
    </Action>
  </Actions>
</WorkflowInfo> 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T17:50:16.900

搜索以下参考：

• 打开安装包的WebApplication的配置文件：C:\Inetpub\wwwroot\wss\VirtualDirectories[Port Web App]\web.config

• 查看出现在适当位置的以下两个应创建解决方案安装的配置条目：

```
 <SafeControl Assembly="TestActivity.TestSite, Version=1.0.0.0, Culture=neutral, PublicKeyToken=5c25d241f3e851927" Namespace="TestActivity.TestSite" TypeName="*" Safe="True" SafeAgainstScript="False" />

  <authorizedType Assembly="TestActivity.TestSite, Version=1.0.0.0, Culture=neutral, PublicKeyToken=5c25d241f3e851927" Namespace="TestActivity.TestSite" TypeName="*" Authorized="True" /> 
```

如果您没有在适当的地方手动添加它们。

然后验证该文件是 TestActivity.TestSite.Actions 进入适当的目录：

C:\Program Files\Common Files\Microsoft Shared\Web Server Extensions\14\TEMPLATE\1033\Workflow\

# c# - 在数据网格中绑定组合框

> ID：11408707
> 
> 赞同：0
> 
> 时间：2012-07-10T07:41:29.083
> 
> 标签：c#, wpf

xml:

```
<ComboBox SelectionChanged="status_SelectionChanged" Height="23" Name="status" ItemsSource="{Binding}" Width="120">
</ComboBox> 
```

如何将数据库中的项目添加为组合框的 ItemsSource？

```
MySqlCommand status_db = new MySqlCommand("select name from request_status", conn); 
```

所以：

```
List<string> combolist = new List<string>();
            MySqlDataReader reader = status_db.ExecuteReader();
            while (reader.Read())
            {
                combolist.Add((string)reader);
            } 
```

但是错了……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T07:44:45.847

最好用你的项目填写一个列表，例如`List<request_status> myList`从你的数据库中，然后设置`myList`为你的 ItemsSource

```
ItemsSource="{Binding Path=myList}" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T08:04:39.917

您在 ComboBox 中拥有 Binding 的方式`ItemsSource="{Binding}"`意味着您需要将 ComboBox 的 DataContext 设置为 SQl 查询中的列表：

```
MySqlCommand status_db = new MySqlCommand("select name from request_status", conn);
// build a list from the query
ObservableCollection<YourType> listElements = From_SQL_QUeury;
ComboOne.DataContext = listElements; // add x:Name="ComboOne" in the XAML for your comboxBox. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T08:42:51.870

使用您已经向我们展示的代码，`ItemsSource={Binding}`从您的组合框 xaml 中删除该部分。

然后只需添加：

```
status.ItemsSource = comboList; 
```

我认为这足以为您完成工作，但您必须考虑使用 xaml 绑定。但这是另一个大故事……

# c - 在 C 中池化内存 - 内存管理

> ID：11408708
> 
> 赞同：0
> 
> 时间：2012-07-10T07:41:29.693
> 
> 标签：c, memory-management, shared-libraries, pool

我正在用 C 编写一个跨平台共享库。这个库的工作流程是这样的，

```
lib *handle = lib_init();
result = lib_do_work(handle);
lib_destroy(handle); 
```

通常，用户会在他们的应用程序启动时初始化它，并在应用程序结束时关闭它。`lib_do_work()`通常在一秒钟内被多次调用。因此，为了避免每次调用的内存分配和释放，我使用了池化机制。有了这个，我要求池返回我需要的结构的实例。如果没有可用的资源，池将返回一个未使用的实例或创建一个新实例。这个新实例也将被添加到池中，以便下次使用。

对我的库的任何 API 调用都以函数调用开始，该函数调用`reset_pool()`使池中的所有元素再次可用。该池作为`lib_destroy()`调用的一部分被销毁。在我的测试中，我观察到有时我的池会获得 100000 多个结构实例。

我想知道这是处理内存的好习惯吗？任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T07:47:26.890

正如评论中已经指出的那样，只有分析才能告诉您分配和释放是否是您的应用程序的瓶颈。此外，如果您的系统始终只分配和释放相同大小的对象，那么默认实现可能会执行得相当好。

通常，池通过预先分配块或元素来提供分配优化。该块被分割成单独的元素以满足单独的分配请求。当池耗尽时，分配一个新块。这是一种分配优化，因为减少对库分配器的调用会更便宜。

池分配器还可以帮助减少碎片。如果应用程序分配和释放具有不同生命周期的不同大小的对象，那么碎片的机会就会增加（并且默认分配器中的合并代码必须做更多的工作）。如果为每个不同大小的对象创建一个池分配器，并且每个池块的大小相同，这将有效地消除碎片。

（正如 Felice 指出的那样，还有另一种类型的池，它预先分配了固定数量的内存供应用程序使用，以确保应用程序使用的内存不会超过预配的内存。）

在解除分配时，可以将单个元素放置到空闲列表中。但。您的`reset_pool`实现可以只遍历块，释放每个块，然后分配一个新块。

以下内容比较简单。它只处理一种元素。POOL_SIZE 需要调整为适合您的应用程序的合理值。假设数据结构如下：

```
typedef struct element {
    struct element *next;
    /* ... */
} element;

typedef struct pool_block {
    struct pool_block *next;
    struct element block[POOL_SIZE];
} pool_block;

typedef struct element_pool {
    struct pool_block *pools;
    struct element *freelist;
    int i;
} element_pool; 
```

然后，API 看起来像：

```
void pool_init (element_pool *p) { /* ... */ }

element * pool_alloc (element_pool *p) {
    element *e = p->freelist;
    if (e) p->freelist = e->next;
    else do {
        if (p->i < POOL_SIZE) {
            e = &p->pools->block[p->i];
            p->i += 1;
        } else {
            pool_block *b = pool_block_create();
            b->next = p->pools;
            p->pools = b;
            p->i = 0;
        }
    } while (e == 0);
    return e;
}

element * pool_dealloc (element_pool *p, element *e) {
    e->next = p->freelist;
    p->freelist = e;
}

void pool_reset (element_pool *p) {
    pool_block *b;
    while ((b = p->pools)) {
        p->pools = b->next;
        pool_block_destroy(b);
    }
    pool_init(p);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T07:49:38.093

我不知道它对于您当前的架构是否过于复杂，但通常一个池会限制池化实例的数量，并在所有池化实例都忙时排队请求。

# c# - Zedgraph 持续时间轴

> ID：11408710
> 
> 赞同：3
> 
> 时间：2012-07-10T07:41:31.693
> 
> 标签：c#, zedgraph

我正在尝试在我的一个轴（X 轴）上获得持续时间。目前我使用日期轴，虽然这不能有第 0 天。我目前有： ![日期](../Images/af6ed012614122dd6ef69071b3ce5044.png)

正如你所看到的，我没有我需要的第 0 天，因为第 0 天可能发生了一些事情（好吧，从一开始不到 24 小时。）我需要的是格式为：*numberOfDays 小时：分：秒*

我目前使用以下代码来计算我的 x：

```
XDate date = new XDate(0, 0,
    event.Time.Days,
    event.Time.Hours,
    event.Time.Minutes,
    event.Time.Seconds,
    event.Time.Milliseconds);
double x = date; 
```

我的轴：

```
graphPane.XAxis.Title.Text = xAxisTitleText.ToString();
graphPane.XAxis.Scale.IsVisible = true;
graphPane.XAxis.Type = AxisType.Date;
graphPane.XAxis.Scale.Format = "dd HH:mm:ss"; 
```

所以最终我想要这样的标签：0 02:23:14 0 08:56:12 1 01:03:44

我需要能够缩小并查看日期和小时，还需要放大并查看每个事件的分钟和秒。

注意：如果可以隐藏负数，那就太棒了，尽管不是很重要。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T13:24:44.940

我自己解决了我的问题！

对于那些将来可能正在寻找类似东西的人，我是这样做的：

首先，我现在将点的 x 值设置为 TimeSpan 的 TotalHours，然后将处理程序添加到 XAxis.ScaleFormatEvent

```
graphPane.XAxis.ScaleFormatEvent += new Axis.ScaleFormatHandler(Axis_ScaleFormatEvent);

static string Axis_ScaleFormatEvent(GraphPane pane, Axis axis, double val, int index)
{
    TimeSpan timeVal = TimeSpan.FromHours(val); return timeVal.ToString();
} 
```

希望这有助于其他人寻找相同的东西！

注意：使用这种方法也可以做其他事情，任何你可以更改为双精度，然后再更改回来的东西都应该在这里工作。非常有用的东西。

# java - Oracle Weblogic 10.3.6 上的推土机 5.3.2

> ID：11408711
> 
> 赞同：3
> 
> 时间：2012-07-10T07:41:32.837
> 
> 标签：java, weblogic, dozer

我在 Oracle Weblogic 10.3.6 上运行 Dozer 5.3.2 时遇到问题。如果我在容器中运行 Dozer，则会发生以下异常。在我的 JUnit 测试中，Dozer 工作正常。

```
java.lang.IllegalArgumentException   
oracle.xml.jaxp.JXDocumentBuilderFactory.setAttribute(JXDocumentBuilderFactory.java:147) 
weblogic.xml.jaxp.RegistryDocumentBuilderFactory.setAttribute(RegistryDocumentBuilderFactory.java:176) 
org.dozer.loader.xml.XMLParserFactory.createDocumentBuilderFactory(XMLParserFactory.java:56) 
org.dozer.loader.xml.XMLParserFactory.createParser(XMLParserFactory.java:35) 
org.dozer.loader.xml.MappingFileReader.<init>(MappingFileReader.java:46) 
org.dozer.loader.CustomMappingsLoader.<init>(CustomMappingsLoader.java:52) 
org.dozer.DozerBeanMapper.loadCustomMappings(DozerBeanMapper.java:212) 
org.dozer.DozerBeanMapper.getMappingProcessor(DozerBeanMapper.java:186) 
org.dozer.DozerBeanMapper.map(DozerBeanMapper.java:111) 
myProject.myObject.MyDefaultMapper.map(MyDefaultMapper.java:23) 
myProject.myObject.mapToClientDS(XYZService.java:162) 
myProject.myObject.read(XYZService.java:42) 
myProject.myObject.search(MyController.java:64) 
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 
java.lang.reflect.Method.invoke(Method.java:597) 
com.sun.el.parser.AstValue.invoke(Unknown Source) 
com.sun.el.MethodExpressionImpl.invoke(Unknown Source) 
oracle.adf.controller.internal.util.ELInterfaceImpl.invokeMethod(ELInterfaceImpl.java:173) 
.... 
weblogic.work.ExecuteThread.run(ExecuteThread.java:178) 
```

问题似乎是以下方法`org.dozer.loader.xml.XMLParserFactory`：

```
private DocumentBuilderFactory createDocumentBuilderFactory() { DocumentBuilderFactory     
factory = DocumentBuilderFactory.newInstance(); 
factory.setValidating(true); 
factory.setNamespaceAware(true); 
factory.setIgnoringElementContentWhitespace(true); 
factory.setAttribute(SCHEMA_FEATURE, true); // For Xerces implementation 
return factory; } 
```

此方法设置`factory.setAttribute(SCHEMA_FEATURE, true)`. Oracle 实现不支持该属性`SCHEMA_FEATURE`并抛出`IllegalArgumentException`包括以下堆栈跟踪：

```
oracle.xml.jaxp.JXDocumentBuilderFactory.setAttribute(JXDocumentBuilderFactory.java:147) 
weblogic.xml.jaxp.RegistryDocumentBuilderFactory.setAttribute(RegistryDocumentBuilderFactory.java:176) 
```

我还尝试用 Xerces 替换 JAXP 的 oracle 实现。我通过配置Xerces 库并将其添加到已部署的库中来完成此操作`<prefer-web-inf-classes>true</prefer-web-inf-classes>`。`WEB-INF/weblogic.xml`但是，如果我尝试替换我在部署应用程序时收到以下异常的库。我已经尝试过 Xerces 2.11.0 (JAXP 1.4) 和 Xerces 2.9.1 (JAXP 1.3，它应该是 Weblogic 10.3.6 的正确替代品)。( `xercesImpl.jar`, `xml-apis.jar`)

```
Caused By: java.lang.NoSuchMethodError: 

org.apache.xerces.impl.xpath.regex.RegularExpression.<init>(Ljava/lang/String;Ljava/lang/String;Ljava/util/Locale;)V at 

org.apache.xerces.impl.dv.xs.XSSimpleTypeDecl.applyFacets(Unknown Source) at 

org.apache.xerces.impl.dv.xs.XSSimpleTypeDecl.applyFacets1(Unknown Source) at 

org.apache.xerces.impl.dv.xs.BaseSchemaDVFactory.createBuiltInTypes(Unknown Source) at 

org.apache.xerces.impl.dv.xs.SchemaDVFactoryImpl.createBuiltInTypes(Unknown Source) at 

org.apache.xerces.impl.dv.xs.SchemaDVFactoryImpl.<clinit>(Unknown Source) Truncated. see log file for complete stacktrace 
```

如果您查看 org.apache.xerces.impl.xpath.regex.RegularExpression 的源代码，您会看到 RegularExpression 在 2.11.0 版本中具有以下 ctor：

```
(String a) 
(String b, String d) 
(String c, String f, Locale l) 
(String d, Token t, int p, boolean h, int o) 
```

正则表达式在 2.9.1 版本中具有以下 ctor：

```
(String a) 
(String b, String d) 
(String c, Token t, int p, boolean h, int o) 
```

所以我不明白为什么两个版本都会出现异常。

我还尝试通过配置将 xerces 配置为由过滤器类加载器加载，`<prefer-application-packages> <package-name>org.apache.xerces.*<package-name>`但这会导致`ClassCastException`s 因为实现混淆了。

我希望有人可以帮助我在 WebLogic 10.3.6 上运行 Dozer。

问候，

最大限度

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-09T03:39:33.217

该问题可以通过更改类加载顺序来解决。添加具有以下内容的文件 weblogic-application.xml：

```
<prefer-application-packages>
  <package-name>org.dozer.*</package-name>
  <package-name>org.apache.*</package-name>
  <package-name>antlr.*</package-name>    
</prefer-application-packages> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T09:13:40.000

我遇到了类似的情况。

我还没有找到更好的方法，但是在你的 jar 文件 META-INF 中删除文件 javax.xml.parsers.DocumentBuilderFactory 可以使它工作。但可能会导致另一个问题。

# android - Android Eclipse 调试模式

> ID：11408712
> 
> 赞同：0
> 
> 时间：2012-07-10T07:41:33.220
> 
> 标签：android, debugging, variables, view, breakpoints

如何在eclipse的调试模式下查看视图的ID？我知道您可以浏览变量，但我无法在变量窗口中显示的信息网络中找到视图/微调器的 ID 值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T07:46:18.320

在模拟器中运行您的应用程序并尝试“HierarchyViewer”（Window->Open Perspective）。

# php - 如何解析将 URL 存储在变量中的 URL GET 数据？

> ID：11408716
> 
> 赞同：0
> 
> 时间：2012-07-10T07:41:41.530
> 
> 标签：php

我有一个 url 存储在一个变量中，例如：

```
$url = 'example.com?a=20&i=10' 
```

如何获取存储在 variable`a`和 variable中的值`i`？有没有捷径可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T07:48:18.917

您可以使用 parse_url()。

```
data = parse_url($url)
print_r($data['query']) 
```

有关详细信息，请参阅[php 手册](http://php.net/manual/en/function.parse-url.php)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T07:49:02.247

您可以使用[parse_url](http://php.net/manual/en/function.parse-url.php)和[parse_str](http://www.php.net/manual/en/function.parse-str.php)：

```
<?php
  $url = 'example.com?a=20&i=10';
  $tmp=parse_url($url);
  parse_str($tmp['query'],$out);
  print_r($out);
?> 
```

[演示](http://codepad.viper-7.com/s9BSXu)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T08:02:45.130

试试这个：

```
<?php
  $url = 'example.com?a=20&i=10';
  $result = parse_url($url);
  parse_str($result['query'],$getVar);
  echo 'value of a='. $getVar['a'];
  echo 'value of i='. $getVar['i']; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T08:05:26.770

如果您想访问这些变量，请查看 extract() 函数，它将从上面的 parse_str() 函数创建变量 $a 和 $i。

但是，它将覆盖任何名为 $a 的现有变量，因此请谨慎使用。

```
<?php
  $url = 'example.com?a=20&i=10';
  $tmp=parse_url($url);
  parse_str($tmp['query'],$out);
  extract($out);
?> 
```

# jquery-mobile - 复选框选中状态在 JQuery Mobile 中未更改

> ID：11408719
> 
> 赞同：2
> 
> 时间：2012-07-10T07:41:47.837
> 
> 标签：jquery-mobile, asp.net-mvc-4

我正在创建一个带有`JQuery Mobile`UI 的 MVC4 项目。

这是我的登录表单：

![登录表单](../Images/5d8b41328ea3382e5d09624d9371a7ff.png)

这是我`<form>`在我的 html 中的：

```
 <form action="/Account/Login/" method="post">
    <ul>
        <li>
            @Html.Label("User name:")
            @Html.TextBox("userName")
        </li>

        <li>
            @Html.Label("Password")
            @Html.Password("password")
        </li>
        <li>
            <input type="checkbox" name="rememberme" id="remember" />
            <label for="remember">Remember me</label>
        </li>
        <li>
            <input type="submit" value="Login" />
            @{if (ViewBag.LoginFailed)
              {
                <br />
                <b style="color: red;">Username and/or password was not correct. please try again.</b>
              }
            }
            <br />
            <br />
            Not registered? <a href="/Account/Register">Click here</a> to create an account!
        </li>
    </ul>
    </form> 
```

我的问题是：当我点击`Remember me`标签或复选框时，复选框仍然未选中...

这个问题怎么解决？？

* * *

**编辑：** [这](http://safebin.net/8193)是 mvc 的完整输出 html，[这](http://safebin.net/8194)是我的 style.css 文件，[这](http://safebin.net/8195)是在 DOM 中生成的代码。

（我的项目从一个月前开始更改，所以这些输出与屏幕截图略有不同。但复选框仍然不起作用......）

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-16T03:29:08.517

我刚才用[jsfiddle](http://jsfiddle.net/gKLd7/)试过了，我们知道 Asp.Net MVC 不会更改输出中的 HTML 标记。但我也在 MVC4 应用程序中尝试过它并且它有效。你可以在[这里](http://tests.ahmadalli.net/cb/)看到结果。

您的浏览器可能有一些问题，`jquery mobile`如果您使用的是 chrome，您可以使用 google chrome 的开发工具查看错误（如果存在）（在页面上右键单击并单击打开它`inspect element`）。

**更新**

您的更新给了我们一个输出文件。我在[jsfiddle](http://jsfiddle.net/GZPFa/)中复制了它，它也可以工作。问题不是来自`HTML`，`JqueryMobile`或其他编程工具。我想是因为你的系统。

# java - 屏幕高度与实际屏幕高度不匹配

> ID：11408720
> 
> 赞同：0
> 
> 时间：2012-07-10T07:41:47.873
> 
> 标签：java, android

**解决了：**

正如 Zoltán 所写，我没有考虑状态栏和标题栏（他们都是 25 高）

我在 Activity 中的 onClickListener 方法中使用了以下代码，并将结果转发到我的 Service 类并在那里打印出来：

```
Rect rectgle = new Rect();
Window window = getWindow();
window.getDecorView().getWindowVisibleDisplayFrame(rectgle);
int StatusBarHeight = rectgle.top;
int contentViewTop = window.findViewById(Window.ID_ANDROID_CONTENT).getTop();
int TitleBarHeight = contentViewTop - StatusBarHeight;

serviceIntent.putExtra("Titlebarheight", Integer.toString(TitleBarHeight));
serviceIntent.putExtra("Statusbarheight", Integer.toString(StatusBarHeight)); 
```

## -------------------------------------------------- --------------------------------------

我正在尝试在**main.xml**中设置 ImageView 的布局高度，但是当我将 layout_height 设置为 270dp（或 px）时，它会从上到下填满整个屏幕，但我的屏幕尺寸实际上是 320x240（HTC 魔术- Android 1.5) - 所以它不应该从上到下填满屏幕！

活动中的代码：

```
Display display = getWindowManager().getDefaultDisplay();
Log.i("Screen height", Integer.toString(display.getHeight())); // Returns 320
Log.i("Screen width", Integer.toString(display.getWidth())); // Returns 240 
```

main.xml 中的代码：

```
<ImageView
    android:id="@+id/bitmapImageView"
    android:layout_height="270dp" // Fills up the whole screen from top to bottom
    android:layout_width="50dp"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:background="#FFFFFF"
    android:src="@drawable/ic_launcher" /> 
```

为什么会这样？我该如何解决？

使用 270 作为布局高度时的示例：

![](../Images/39e406cb88066e2ce6e0031c7cc86a1b.png)

使用 240 作为布局高度时的示例：

![](../Images/3c5a9f0c1543c8a48d302fff028da6f4.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T07:45:01.357

请参阅：[android 的屏幕分辨率](https://stackoverflow.com/questions/5815380/screen-resolution-of-android)和与 [比例无关的像素](https://stackoverflow.com/questions/5289458/scale-independent-pixel)

基本上，dp（与显示无关的像素）在所有显示器上的大小都不相同。以您的分辨率 1dp =~ .75px

要进行[全屏活动，请参阅：Android 中的全屏活动？](https://stackoverflow.com/questions/2868047/fullscreen-activity-in-android)

具体来说，设置：`android:theme="@android:style/Theme.NoTitleBar.Fullscreen"`在该活动的 android 清单中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T07:52:00.273

您的应用程序的状态栏和标题栏的高度似乎与您的宽度大致相同，`ImageView`从您的 XML 判断为 50px。

那么50px + 270px = 320px，就是你屏幕的总高度（包括状态和标题栏）。

# javascript - javascript：将参数传递给对象构造函数

> ID：11408722
> 
> 赞同：4
> 
> 时间：2012-07-10T07:41:55.040
> 
> 标签：javascript, object, arguments

我正在编写一个 jquery lib，我需要实现 Datetime 函数。我需要创建一个 .Date() 函数，它返回一个新的 Date 对象。

如何将我的 .Date(args) 函数的参数传递给 Date 对象构造函数以创建新的日期对象？

我试过这样的东西，我是插件命名空间，me=$.jqGUI。

```
 //.Date(Value)
        /* Return a date object.
         * ReturnValue = Date(Value)
         */
        me.Date = function(Value){
            //pass arguments to Date constructor
            var sDate = Date.prototype.constructor.apply(null, arguments);

            console.log(sDate);

            //create a date object d
            var d = new Date(sDate);

            //validate date object
            if(d.toDateString()=="Invalid Date"){
                throw new Error("$.jqGUI.Date: Invalid Date");
            }
            else{
                return d;                   
            }
        }; 
```

在这里，我将参数传递给 Date.prototype.constructor，但无论如何我都会得到当前日期。如果参数是日期字符串，则忽略它。为什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-08-14T19:05:37.830

```
var args = Array.prototype.concat.apply([null], arguments);
return new (Function.prototype.bind.apply(Date, args)); 
```

如果您的目标浏览器不支持 ECMAScript 5 Function.prototype.bind，则代码将不起作用。但可能性不大，请参阅[兼容性表](http://kangax.github.io/compat-table/es5/#Function.prototype.bind)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T07:48:09.333

```
Date.prototype.constructor 
```

挺没用的，直接用`Date`——函数*就是*构造函数。

```
.apply(null, ... 
```

您将需要在该类型的新创建对象上应用构造函数，而不是在`null`. 请参阅[将 .apply() 与“new”运算符一起使用。这可能吗？](https://stackoverflow.com/q/1606797/1048572)

但是，不可能应用真正的`Date`构造函数（用于 的函数`new`），因为 EcmaScript 规定当`Date`作为函数调用时，它必须返回当前的 UTC 时间。

* * *

无论如何，你不应该需要这个。而不是接收一堆参数（可变大小），您应该只指定一个参数作为`Date`对象。该功能的用户可以按照*自己*的意愿构建。

您看起来很奇怪的函数似乎与构造函数完全相同`Date`。扔掉它，让用户`Date`自己申请——他知道他想要哪种格式。

此外，您不应该使用`if(d.toDateString()=="Invalid Date")`，这不是标准化的，而是依赖于实现的。要检查有效`Date`对象，只需使用`isNaN`- 不可解析日期的内部表示（`Date`实例的值）是`NaN`.

建议：

```
me.date = function(d) {
/* gets: a Date object or something that can be transformed to a Date
returns: a valid Date object, else throws an Error */

    d = new Date(d); // works also for Date instances, uncouples them
                     // else creates new one from string or number
    if (isNaN(d))
        throw new Error("$.jqGUI.Date: Invalid Date");
    return d;
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-14T18:47:46.640

几点注意事项：

*   **千万不要用`eval`**，很危险。
*   `bind`并不总是可用的，正如所指出的，垫片的工作方式不同。
*   [`Date.UTC`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/UTC)还接受一个变量参数列表并返回一个可由`Date`构造函数使用的标量。
*   `apply`只需要一个像对象这样的数组，而不是一个实际的数组，所以`arguments`就足够了。

所以这是我首选的、浏览器安全的、完全可变的方法。请注意它如何处理没有参数的`Date.now()`. 传递 a`null`与没有参数不同，因此允许执行相同的操作。

```
me.Date = function(value){
    if (arguments.length < 1) value = Date.now();
    else if (arguments.length > 1) value = Date.UTC.apply(null, arguments);
    var d = new Date(value);

    // ...
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-01-30T02:23:04.990

接受的答案并不理想。我只能希望任何阅读此主题的人都会进一步调查。使用“eval”有许多副作用，我认为你不会在 util-lib 中想要这些副作用。

以下是您可以做的粗略介绍：

```
function dateShimmer() {  
    if(arguments.length === 1){
        return new Date(arguments[0]);
    }
    else if(arguments.length > 1){
        return dateArgumentShimmer.apply(null, arguments);
    }
    return new Date();
}

function dateArgumentShimmer(a1, a2, a3, a4, a5, a6, a7){
    //Direct invocation is faster than apply/call
    switch(arguments.length){
    case 2:  return new Date(a1, a2);
    case 3:  return new Date(a1, a2, a3);
    case 4:  return new Date(a1, a2, a3, a4);
    case 5:  return new Date(a1, a2, a3, a4, a5);
    case 6:  return new Date(a1, a2, a3, a4, a5, a6);
    case 7:  return new Date(a1, a2, a3, a4, a5, a6, a7); 
    }
 }; 
```

Jsfiddle在这里：http: [//jsfiddle.net/y7Zmr/](http://jsfiddle.net/y7Zmr/)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-07-10T12:21:59.820

对我来说好的，以下工作

```
var args = [];
for(var i = 0; i < arguments.length; i++)
   args.push("arguments[" + i + "]");

var d = eval("new Date(" + args.join(",") + ")"); 
```

# ios - UIimage动画一定量

> ID：11408726
> 
> 赞同：0
> 
> 时间：2012-07-10T07:42:11.343
> 
> 标签：ios, animation, uiimage, xcode4.3, animated

我正在 iOS 设备上创建一个应用程序，它将在背景上有一个动画，但基本上我不希望有多少图像可以上传到一个动画继承我设置的代码。

。H

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController {
    IBOutlet UIImageView *animation;
}

@end 
```

.m

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

-(void)viewDidLoad {

    animation.animationImages = [NSArray arrayWithObjects:

                                 [UIImage imageNamed:@"animatedbg1.gif"],

                                 [UIImage imageNamed:@"animatedbg2.gif"],

                                 [UIImage imageNamed:@"animatedbg3.gif"],

                                 [UIImage imageNamed:@"animatedbg4.gif"],

                                 [UIImage imageNamed:@"animatedbg5.gif"],

                                 [UIImage imageNamed:@"animatedbg6.gif"],

                                 [UIImage imageNamed:@"animatedbg7.gif"],

                                 [UIImage imageNamed:@"animatedbg8.gif"],

                                 [UIImage imageNamed:@"animatedbg9.gif"],nil],

    [animation setAnimationRepeatCount:0];

    animation.animationDuration = 2;

    [animation startAnimating];

} 
```

目前我有 9 张图片，但对于我的动画，我将有 155 张图片，所以这仍然有效:) 如果没有，你们知道我可以采取更好的路线吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T09:39:14.687

我认为您不会遇到任何严格的限制。但是，如果您使用太多图像，您可能会遇到内存限制。每张未压缩的图像有多大？这极大地影响了这一点。

当然，您可能知道第 3 方 iOS 应用程序的可用内存量没有保证。根据系统上正在运行的其他内容、用户在 Mobile Safari 中打开的网页数量等，将提供不同数量的可用内存。

您可能需要构建它并进行实验。

只是一个参考点。我有一个正在使用的应用程序`animationImages`，并且图像不是全屏（480 x 270 像素）。这些图像是 24 位 PNG，每个大约 70KB，经过压缩。

我发现我只能安全地使用其中的 10 个，而不必太担心被关闭以处理内存不足的情况。现在，当时我的目标是**iPhone 3G**，它现在已经很老了。但是，您可能仍希望支持 iPhone 3G 机型。

您当然可以[在代码中查询设备型号](https://stackoverflow.com/questions/448162/determine-device-iphone-ipod-touch-with-iphone-sdk)，并为您的应用尝试加载的图像数量设置不同的默认值。如果您想要更通用的东西，在新的 iOS 设备发布时不会中断，您可以[询问设备它有多少内存](https://stackoverflow.com/a/8072278/119114)。然后，如果您检测到您在内存较少的设备上运行，您可以将您的应用程序编码为仅加载偶数编号的图像。

您还可以`didReceiveMemoryWarning`在 UIViewControllers 中实现，并在收到内存警告时选择卸载一些图像。这一切都假设您的动画是这样的，即删除图像只会使动画看起来不那么流畅，并且不会使其完全不起作用。

[这是一些关于解释 iOS 内存警告的信息](https://stackoverflow.com/a/2915477/119114)

# entity-framework - 实体框架代码优先代理的深拷贝

> ID：11408733
> 
> 赞同：2
> 
> 时间：2012-07-10T07:43:02.607
> 
> 标签：entity-framework, ef-code-first

如何在启用代理的情况下制作已由 Entity Framework Code First 加载的对象图的深层副本？

我正在使用这样的代码：

```
 static public T DeepCopy<T>(T obj)
    {
        BinaryFormatter s = new BinaryFormatter();
        using (MemoryStream ms = new MemoryStream())
        {
            s.Serialize(ms, obj);
            ms.Position = 0;
            T t = (T)s.Deserialize(ms);

            return t;
        }
    } 
```

但是，序列化程序正确地抱怨代理类型不是已知类型。

**更新**

将 DataContractSerializer 与 ProxyContractResolver 一起使用不起作用，因为我的类用`DataContract(IsReference = true)`.

看

[当 POCO 具有 IsReference = true 属性时序列化 EF 代理](https://stackoverflow.com/questions/11418822/serialize-ef-proxy-when-poco-has-isreference-true-attribute)

# jsp - 如何将任何动作类的属性提取到另一个jsp页面中？

> ID：11408736
> 
> 赞同：0
> 
> 时间：2012-07-10T07:43:21.673
> 
> 标签：jsp, struts2

有人可以告诉我吗

“如何将任何动作类的属性提取到另一个jsp页面中？”

我有一个动作类“FindQuestion.java”，它有一个属性“private int ra,ua;”。我已经制作了“ra”和“ua”的getter和setter。现在我有另一个jsp页面“home.jsp”，它在`<s:property value=""/>`标签中显示了“FindQuestion.java”的一些属性，它是在引用“FindQuestion.java”的操作时加载的。还有一个带有“检查”按钮的表单，它从带有`<s:select name ="ua" (list of integers) />`标签的用户那里获取一个整数。

我需要从“FindQuestion.java”中获取另一个属性“ra”，该属性仅用于在“检查”按钮操作时将其值与“ua”（来自选择标签）的值进行比较。如果它们相等，则显示消息“匹配成功”，否则显示“匹配失败”。[ra 不会显示在 jsp 页面上]。

有人可以建议要完成什么 java 或任何其他编码。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T15:02:05.670

假设您在动作类（不是 jsp）中进行匹配：在**home.jsp**表单中声明一个隐藏字段

```
<s:hidden name="ra" value="%{ra}"/> 
```

（`value`据我所知，这里不需要属性，因为变量名是相同的）。

在您匹配变量的操作类中声明此变量（使用 getter/setter）。然后，您可以比较变量。

# iphone - 具有完整图像质量的 webView 的屏幕截图

> ID：11408737
> 
> 赞同：2
> 
> 时间：2012-07-10T07:43:29.647
> 
> 标签：iphone, uiwebview, pdf-generation

我正在尝试截取 webView 的屏幕截图并将其更改为 PDF。我用过这个方法： http: [//www.ioslearner.com/wp-content/uploads/2012/01/HtmlToPdfDemo.zip](http://www.ioslearner.com/wp-content/uploads/2012/01/HtmlToPdfDemo.zip)

我的意思是这个项目中的代码。它适用于 iPad，但不能覆盖 iPhone 的全宽。我已经为 webView 使用了 -sizeThatFits:，但这会为大型 html 页面提供不可读的图像。我搜索了很多，但我能找到的只是 Android ......而不是 iPhone。请帮助我。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T07:52:11.633

通过在渲染之前更改 webView 的框架，您将能够捕获整个页面。

```
NSMutableData *pdfData = [NSMutableData data];
CGRect contentRect = CGRectMake(0, 0, webView.scrollView.contentSize.width, webView.scrollView.contentSize.height);
[webView setFrame:contentRect];
UIGraphicsBeginPDFContextToData(pdfData, contentRect, nil);
UIGraphicsBeginPDFPage();
CGContextRef context = UIGraphicsGetCurrentContext();
[webView.layer renderInContext:context];
UIGraphicsEndPDFContext(); 
```

# python - 如何从桌面应用程序向 python 烧瓶服务器发送 http 请求？

> ID：11408741
> 
> 赞同：4
> 
> 时间：2012-07-10T07:43:36.980
> 
> 标签：python, python-2.7, flask, flask-sqlalchemy

我已经使用烧瓶框架配置了 python 服务器。现在我想从我的桌面应用程序向服务器发送请求。我的服务器位置是：`http://127.0.0.1:5000/`

我已经编写了可以在浏览器上运行的代码，但我想从我的桌面应用程序中访问该代码。

```
import flask,flask.views import os import functools 
app=flask.Flask(__name__)

app.secret_key="xyz" users={'pravin':'abc'}
class Main(flask.views.MethodView):
    def get(self):
        return flask.render_template('index.html')
    def post(self):
        if 'logout' in flask.request.form:
            flask.session.pop('username',None)
            return flask.redirect(flask.url_for('index'))
        required=['username','passwd']
        for r in required:
        if r not in flask.request.form:
            flask.flash("Error: {0} is required.".format(r))
            return flask.redirect(flask.url_for('index'))

        username=flask.request.form['username']
        password=flask.request.form['passwd']
        if username in users and users[username]==password:
            flask.session['username']=username
        else:
            flask.flash("Username doesn`t exist or incorrect password.")

        return flask.redirect(flask.url_for('index'))

app.add_url_rule("/",view_func=Main.as_view("index"),methods=["GET","POST"])
app.debug=True
app.run() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T17:15:16.107

您必须使用 python 库从桌面应用程序访问 url。

尝试[请求模块](http://kennethreitz.com/requests-python-http-module.html)。它使处理 http 请求变得容易，并将自己描述为`an elegant and simple HTTP library for Python, built for human beings.`

示例代码：

```
 >>> r = requests.get('http://127.0.0.1:5000')
    >>> r.status_code
        <Response [200]> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-10T07:53:56.980

您是否尝试使用 python 标准库[httplib](http://docs.python.org/library/httplib.html)？

或者更好的[httplib2](http://code.google.com/p/httplib2/)。

这是一个 GET 测试（受[httplib2 示例](http://httplib2.googlecode.com/hg/doc/html/libhttplib2.html#examples)的启发）：

```
import httplib2
h = httplib2.Http()
resp, content = h.request("http://127.0.0.1:5000/") 
```

# android - Android，初始程序加载，待机消息

> ID：11408742
> 
> 赞同：0
> 
> 时间：2012-07-10T07:43:38.647
> 
> 标签：android, message

我的应用程序将一堆文件从 res.raw 复制到 SD 卡上的文件中。这可能需要几十秒。在此期间，用户留下黑屏。一些用户认为应用程序失败了。我想显示“待机”消息。

我试过吐司。我试过 setContentView(R.layout.main) 在布局中有一条消息。两者都没有给出预期的结果。在加载过程中屏幕保持黑色。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T07:48:03.113

这是因为你在 UI Thread 中运行了这个沉重的东西，它会阻塞与用户的交互。您将不得不在另一个线程中完成这个繁重的工作。我推荐 Asynctask：http: [//developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

1.  onPreExecute()：显示待机消息。
2.  doInBackground(Params...)：做重负载。
3.  onPostExceute(Result r)：你已经完成了繁重的工作，所以继续删除待机消息。

# java - Java 正则表达式捕获“”或“”之间的文本

> ID：11408745
> 
> 赞同：0
> 
> 时间：2012-07-10T07:43:56.007
> 
> 标签：java, regex

我有一个文档，我正在尝试使用 Java Regex 解析，并且其中的文本出现在引号中的 """ 或 ''' 中，因此您有：

""" Bla，你不是很好！""" 或者：

''' Bla，这 1 不是一个很好的例子 '''

我一直在尝试`["""|''']([\p{Alnum}|\p{Blank}]+)[\"""|''']`

假设： 文本将以“””或“'”开始和结束 文本可以包括数字、字母、空格和标点符号 文本的主体将不包括三个“或三个'的序列

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T07:50:56.780

试试这个模式：`("""|''').*?\1`

鉴于：

```
"""Hello, World!""" some unquoted text """ lorem ipsum ''" dolor """ some more unquoted text '''single quotes'''
''' Bla, this 1 isn't a great example ''' 
```

它将匹配：

1.  `"""Hello, World!"""`
2.  `""" lorem ipsum ''" dolor """`
3.  `'''single quotes'''`
4.  `''' Bla, this 1 isn't a great example '''`

您也可能比`.*?`“标点符号”更具体，但我不确定您指的是什么字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T07:59:08.487

像这样对我有用：

```
 Pattern p = Pattern.compile("(\"{3}(.*?)\"{3})|('{3}(.*?)'{3})");
        String s1 = "\"\"\" Bla, you're not very nice! \"\"\"";
        String s2 = "''' Bla, this 1 isn't a great example '''";

        Matcher m1 = p.matcher(s1);
        Matcher m2 = p.matcher(s2);

        if (m1.matches())
        {
            System.out.println(m1.group(2));
        }

        if (m2.matches())
        {               
            System.out.println(m2.group(4));
        } 
```

但是，它会使只使用 2 个正则表达式变得更简单。上面的代码产生了以下结果：

> 布拉，你不是很好！
> 
> 布拉，这 1 不是一个很好的例子

正则表达式的问题之一是方括号内的任何文本都是*OR'D*，这意味着管道字符是无用的（作为`OR`运算符）。您将需要用圆括号替换您的方括号。

# foursquare - 无法使用foursquare api启动广告系列

> ID：11408746
> 
> 赞同：0
> 
> 时间：2012-07-10T07:43:58.293
> 
> 标签：foursquare

我有一个场地，目前正在运行 1 个活动活动、1 个计划活动和 1 个待定活动。如果我使用 api 启动未决活动，则会引发错误“以下场所已经有 2 个活动特价”

# sql - 在 Sql Server 中按子字符串选择查询排序

> ID：11408752
> 
> 赞同：1
> 
> 时间：2012-07-10T07:44:25.320
> 
> 标签：sql, sql-server, sql-server-2008

我在 SQL Server 表中有一个列，其中包含以下行：

我的专栏：

```
1 Month
2 Week
10 Minutes
1 week
12 hours
1 days
2 month
2 day
5 minutes
1 hours 
```

它是一个包含优先级字符串的文本列。

有没有办法让选择返回此列，排序如下：

```
10 Minutes
5 minutes
1 hours
10 Hours
1 day
2 days
1 week
2 weeks
1 month
2 months 
```

ETC..

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T08:10:20.153

试试这个解决方案：

```
SELECT mycolumn
FROM tbl
ORDER BY
    SUBSTRING(mycolumn, PATINDEX('%[^0-9]%', mycolumn)+1, 999),
    CAST(LEFT(mycolumn, PATINDEX('%[^0-9]%', mycolumn)-1) AS INT) 
```

[SQL-Fiddle 演示](http://sqlfiddle.com/#!3/012be/11/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T07:52:29.747

```
order by case when patindex('%Month', MyColumn) > 0
              then 0
              when patindex('%week', MyColumn) > 0
              then 1
              when patindex('%days', MyColumn) > 0
              then 2
              when patindex('%Minutes', MyColumn) > 0
              then 3
         end, 
         cast(substring(MyColumn, 1, CHARINDEX(' ', MyColumn)) as int) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T08:34:46.057

```
select T4.cnt +' '+T4.name from (         
select substring(name, 1, CHARINDEX(' ', name)) cnt,substring(name,CHARINDEX(' ', name)+1,LEN(name)) name from test4) T4      
left outer join (
select 1 as id,'Month' As name union all
select 2 as id,'Week' As name union all
select 3 as id,'Day' As name union all
select 4 as id,'Minutes' As name )T6
on t4.name=t6.name
order by t6.id,t4.cnt 
```

您必须在左表中使用“union all”按照您想要的顺序给出所有不同的值（月、周等）

# php - 使用 Graph Api 在新线程中发布 facebook

> ID：11408765
> 
> 赞同：0
> 
> 时间：2012-07-10T07:45:11.577
> 
> 标签：php, facebook-graph-api

在我的项目中，用户可以发布文本。我实现了一个功能“也发布 facebook”（如 twitter） 过程是我将用户文本保存在我的数据库中，然后尝试使用图形 api 将其发送到 facebook。最后我返回 json 响应。

伪代码就像;

```
db->query("insert text on USER_TEXT") 
facebookApi->status(text);
response->json(text); 
```

问题是我的 json 响应如此缓慢，因为有时 facebook api 很慢。我只想使用 facebook api 是一个后台进程。因此，我的应用程序尽快成功返回响应，并将其保存在数据库中。此时在 facebook 上的分享是微不足道的，因此可以稍后完成。也许基于线程的解决方案适用于此，但我不知道如何用 PHP 等脚本语言实现它。

也许另一种简单的方法？

谢谢。

# ruby-on-rails - 多个 content_for 用于指定类

> ID：11408769
> 
> 赞同：0
> 
> 时间：2012-07-10T07:45:27.547
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有以下小问题。

在布局中，我让**content_for**在我的 body 标签上设置一些类：

```
<body class="<%= yield(:body_classes) %> 
```

他们我想打电话给**content_for**

```
<%= content_for(:body_classes, "one") %> 
```

到现在为止还挺好。我第二次使用**content_for**：

```
<%= content_for(:body_classes, "two") %> 
```

在我的 HTML 中，我得到以下信息：

```
<body class="onetwo"> 
```

有没有一种优雅的方法可以按空间分隔这两个类？我可以想到几个 hacky 解决方案，但感觉不对...

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T19:05:13.217

我认为`content_for`在这种情况下不太合适。但是，您可以使用几个辅助方法（摘自我的一个 Rails 项目）优雅地解决问题：

```
def klass(*classes)
  @classes = [] if @classes.nil?
  @classes += classes
  @classes.uniq!
  nil
end

def has_klass?(klass)
  !@classes.nil? && @classes.include?(klass)
end

def body_klasses
  @classes.map(&:to_s).join(" ") rescue nil
end 
```

模板中的用法：

```
<%= klass :one, :two %>
<%= klass :three %> 
```

在布局中，判断是否设置了某个类：

```
<% if has_klass? :one %> 
```

最后...

```
<body class="<%= body_klasses %>"> 
```

您可以进一步自定义这些以更好地满足您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T07:53:27.817

每次设置时，只需在课程之前（或之后）放置一个空格`content_for`。

```
<% content_for(:body_classes, "one ") %> 
```

顺便说一句，您可能不希望`=`在您的设置标签中使用 ；您通常不希望 Rails 将您存储的内容输出到 HTML 中以备后用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T09:34:01.770

也许您可以在向 :body_clases 添加内容之前检查其中是否已有内容，以便在添加新内容之前添加空间。

```
<% content_for(:body_classes,content_for?(:body_classes) ? ' one' : 'one') %>
<% content_for(:body_classes,content_for?(:body_classes) ? ' two' : 'two') %> 
```

最终的 HTML 将是：

```
<body class="one two"> 
```

# iphone - Xcode iOS 理解堆栈跟踪

> ID：11408774
> 
> 赞同：2
> 
> 时间：2012-07-10T07:45:47.040
> 
> 标签：iphone, objective-c, ios, xcode, stack-trace

applicationWillTerminate 有什么问题吗？

谁能告诉我如何分析跟踪或有关异常的更多详细信息？

我试过 dwarfdump 但似乎没有更多细节。

```
dwarfdump -arch armv7 MyApp.app.dSYM --lookup 0x000034b3 
```

告诉我

```
Line table file: 'main.m' line 14, column 18 with start address 0x00000000000034aa 
```

这是

```
int retVal = UIApplicationMain(argc, argv, nil, nil); 
```

这是堆栈跟踪

```
-[UIApplication applicationWillTerminate:]: unrecognized selector sent to instance 0x27eed0
(null)
(
0   CoreFoundation                      0x30df964f __exceptionPreprocess + 114
1   libobjc.A.dylib                     0x34914c5d objc_exception_throw + 24
2   CoreFoundation                      0x30dfd1bf -[NSObject(NSObject) doesNotRecognizeSelector:] + 102
3   CoreFoundation                      0x30dfc649 ___forwarding___ + 508
4   CoreFoundation                      0x30d73180 _CF_forwarding_prep_0 + 48
5   CommonTools                         0x089e441f -[ButtonEventOpt onProcClickEvent:state:frame:viewControl:] + 1662
6   CommonTools                         0x089ead37 -[CommonToolsView onClickBtnEvent:] + 366
7   CoreFoundation                      0x30d69571 -[NSObject(NSObject) performSelector:withObject:withObject:] + 24
8   UIKit                               0x30e77ec9 -[UIApplication sendAction:to:from:forEvent:] + 84
9   UIKit                               0x30e77e69 -[UIApplication sendAction:toTarget:fromSender:forEvent:] + 32
10  UIKit                               0x30e77e3b -[UIControl sendAction:to:forEvent:] + 38
11  UIKit                               0x30e77b8d -[UIControl(Internal) _sendActionsForEvents:withEvent:] + 356
12  UIKit                               0x30e78423 -[UIControl touchesEnded:withEvent:] + 342
13  UIKit                               0x30e5d535 _UIGestureRecognizerSortAndSendDelayedTouches + 2200
14  UIKit                               0x30e5cc01 _UIGestureRecognizerUpdateObserver + 696
15  CoreFoundation                      0x30dd0a35 __CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ + 16
16  CoreFoundation                      0x30dd2465 __CFRunLoopDoObservers + 412
17  CoreFoundation                      0x30dd375b __CFRunLoopRun + 854
18  CoreFoundation                      0x30d63ec3 CFRunLoopRunSpecific + 230
19  CoreFoundation                      0x30d63dcb CFRunLoopRunInMode + 58
20  GraphicsServices                    0x306e241f GSEventRunModal + 114
21  GraphicsServices                    0x306e24cb GSEventRun + 62
22  UIKit                               0x30e89d69 -[UIApplication _run] + 404
23  UIKit                               0x30e87807 UIApplicationMain + 670
24  MyApp                           0x000034b3 MyApp + 9395
25  MyApp                           0x0000346c MyApp + 9324
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T11:30:27.870

应用程序何时崩溃？看起来您正在调用不知道该方法的对象上的方法。

请发布相关的手势识别器代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T10:53:00.670

ApplicationWillTerminate 中没有错误，当您遇到未解决的错误时，应用程序通常会在此处结束。

您应该在输出日志中有一些详细信息，您的主要错误似乎是您调用了一个选择器，而您调用的类不支持该选择器：

```
unrecognized selector sent to instance 0x27eed0 
```

在堆栈中，您可以看到进行了多个调用，但其中只有两个来自您自己的类（我猜，因为我不知道这些）：

```
5   CommonTools                         0x089e441f -[ButtonEventOpt onProcClickEvent:state:frame:viewControl:] + 1662 
6   CommonTools                         0x089ead37 -[CommonToolsView onClickBtnEvent:] + 366 
```

检查您的输出日志，如果有更多关于引发错误的方法调用的详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-02T10:46:07.230

我也遇到了同样的问题，我找到了！CommonTools 是一款越狱应用 91 桌面的库。当用户安装这个应用程序时，他们可以直接用它杀死这个应用程序。当他们使用此应用程序退出应用程序时，我的应用程序在 os 4.x 上收到崩溃报告。所以你可以检查你的应用程序是否有同样的问题。祝你好运！

# facebook - 如何重新验证 NATIVE DESKTOP Facebook 应用程序

> ID：11408778
> 
> 赞同：0
> 
> 时间：2012-07-10T07:45:53.123
> 
> 标签：facebook, token, desktop

我正在阅读与为 Facebook 编写本机桌面应用程序相关的所有 Facebook 文档。我明确声明了本机桌面应用程序。它将在没有 JAVA SDK 的情况下使用客户端身份验证。

据我所知，我知道 access_tokens 确实过期了。我还读到您可以重新进行身份验证。但是............ Facebook 关于如何在没有 JAVA SDK 的情况下使用客户端身份验证在 Windows/Mac OSX 或 Linux 上运行的桌面应用程序的文档非常有限。

我的问题是......对于这样的 Facebook 桌面应用程序，这是否可能，还是每次 access_token 过期时我都必须询问用户，以再次授权我的应用程序？

**重要提示**：Facebook 不再支持`offline_access`权限功能/API（可能的解决方案）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T09:48:25.407

找到了解决方案。

是的，本机桌面客户端可以重新进行身份验证。access_tokens（由 Facebook 在用户的应用程序身份验证期间提供）形成用户、Facebook 和我的桌面应用程序之间的连接。此 access_token（一串 111 个令牌）有效期为 60 天。当它过期时，用户必须再次进行身份验证，但不必再次标记所有选项来指定我的本机桌面应用程序可能拥有的权限。

然后，用户只需使用

```
https://www.facebook.com/dialog/oauth?client_id=YourAppClientIDGivenByFacebookDuringAppRegistration&redirect_uri=https://www.facebook.com/connect/login_success.html&scope=PermissionsScope 
```

再次没有他或她必须做的任何其他操作（只需使用正确的 URL 和正确的权限范围登录就可以了）。然后，我的桌面应用程序的用户被重定向到仅显示消息**Success**的 URL 。

所以你需要一个浏览器或者你需要自己通过代码处理http get和post请求。

# java - JavaApplet 中的网络摄像头

> ID：11408779
> 
> 赞同：1
> 
> 时间：2012-07-10T07:46:02.043
> 
> 标签：java, applet

我正在尝试创建一个运行客户端网络摄像头并使用按钮拍照的 Java Applet，但我只是找不到在小程序中运行网络摄像头的方法。有没有人知道实现这一目标的简单方法？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T07:50:46.083

第一个问题是Applet需要硬件许可。小程序有一个安全管理器，它从 Java 安装中读取策略文件。作为标准，没有从网络摄像头或文件系统等外部设备读取的权限。

对于您的问题，我认为，您应该将 Applet 用作 JFrame 或其他运行应用程序的加载器。

对于网络摄像头，您可以使用[OpenCV](http://opencv.willowgarage.com/wiki/)，它也适用于 C++、Android 和 .NET。

希望它对你有帮助；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T22:28:20.870

我建议你看看**[这个例子](https://github.com/sarxos/webcam-capture/tree/master/webcam-capture-examples/webcam-capture-applet)**。我想这正是您正在寻找的 - 如何使用网络摄像头功能创建 Applet 并将其嵌入 HTML 页面。`jarsigner`由于 JAR 是用工具签名的，因此访问硬件没有问题。当使用自签名证书对 JAR 进行签名时，Java 会询问用户是否要运行它。如果它是用证书颁发机构的证书签名的，它不会询问，只需运行它。

此处提供演示小程序（请耐心等待，网络摄像头需要几秒钟来初始化）：[http ://webcam-capture.sarxos.pl/examples/applet](http://webcam-capture.sarxos.pl/examples/applet)

您可以为此使用几个框架，例如：

1.  [Webcam Capture](https://github.com/sarxos/webcam-capture)是一个简单的 Java 库，允许您从嵌入式或 USB 网络摄像头读取图像，与从 IP / 网络摄像头相同。它还不成熟，但很小，可以在 Applet 中使用。我上面提供的示例取自它。您不必编写太多代码 - 几乎所有东西都准备好了。它适用于各种系统，例如 Windows、Linux 和 Mac OS。
2.  [JavaCV](http://code.google.com/p/javacv/)是 OpenCV 的 Java 包装器，但我不推荐它，缺乏文档和 ~100MB OpenCV 安装包对于 Java Applet 来说太多了。您可能只需要真正需要的本机二进制文件，但仍然很难区分哪些是真正需要的。它定义了巨大的 API，在我看来这很难学习。
3.  [LTI-CIVIL](http://lti-civil.org/)是一个小型框架，允许您从嵌入式或 USB 连接的网络摄像头读取图像。它非常易于使用，但不再维护（2007 年最后一次更新）。
4.  [JMF](http://www.oracle.com/technetwork/java/javase/download-142937.html)是用于 Java 的 Oracle 媒体库。它使您可以访问网络摄像头和录制设备，但是它已经过时（2004 年的最后一次更新）并且不再被维护。它可能与 Applet 一起使用，但每个想要使用此 Applet 的人都必须在他/她的 PC 上安装 JMF。安装包很少 - 每个支持的系统（Windows、Linux、Solaris、Mac OS）一个。
5.  [VLCj](http://code.google.com/p/vlcj/)是 VLC 播放器原生二进制文件的 Java 包装器。它可以访问网络摄像头，但无法检测到它（至少在 Windows 上），因此您必须始终知道网络摄像头定位器地址（通常为 0）才能从 Java Applet 使用它。
6.  [OpenIMAJ](http://www.openimaj.org/)是一个非常强大的用于媒体分析的 Java 库。它非常快速且可移植，但不幸的是需要许多第 3 方依赖项，因此您的 Applet 必须全部下载它们（如果没有更多，则至少 20MB）。

因此，如果您决定使用选项 1。您应该很容易重新设计我提供的示例以满足您的需求。在这个例子中使用了 Maven，但是通过使用 Ant 甚至手动创建 JAR 也可以达到同样的效果。

# c++ - 在 c++ dll 项目中使用对话框

> ID：11408780
> 
> 赞同：0
> 
> 时间：2012-07-10T07:46:06.217
> 
> 标签：c++, dll, mfc, dialog

我想向 c++ dll 应用程序添加一个对话框。首先，我想知道这是否可能，然后我该如何编译项目。

当我在配置中设置“使用 MFC 标准库”时，我收到错误：致命错误 C1189：#error：使用 /MD[d]（CRT dll 版本）构建 MFC 应用程序需要 MFC 共享 dll 版本。请#define _AFXDLL 或不要使用 /MD[d]

当我在共享 dll 文件中使用 MFC 设置配置时，我收到错误：一般错误 c101008a：无法将更新的清单保存到文件“.\Debug\RenameDLL.dll.embed.manifest”错误参数。

任何建议如何解决这个问题？我也使用 windows.h 库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T16:15:35.753

是的，这绝对是可能的，并且“在共享 DLL 中使用 MFC”是您想要的。

如果您打开了预编译头文件，您`stdafx.h`的项目中将有一个应该包含各种`#include <afx...>`这些是需要包含的 MFC 头文件。

我怀疑你的第二个错误会随着`Rebuild All`.

您可能会或可能不会遇到的另一个问题是调用`DoModal()`您的对话框实例后没有任何反应。在这种情况下`AFX_MANAGE_STATE(AfxGetStaticModuleState())`，在`DoModal()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T08:10:41.887

*   什么是 MFC 标准库？它应该是标准 Windows 库。
*   您实际上是否将 MFC 用于对话框（CDialog 等）？如果没有，则不需要使用 MFC。
*   如果您使用 MFC，最好创建一个支持 MFC 的 DLL 项目，查找所有设置并将它们放入您的 DLL。它包括 C++ 设置、链接器和**清单**工具设置。

# ruby-on-rails - Rails Validates_uniqueness of scope 不起作用

> ID：11408781
> 
> 赞同：2
> 
> 时间：2012-07-10T07:46:12.657
> 
> 标签：ruby-on-rails, validation, scope, validates-uniqueness-of

我的验证在 create 方法上引发了“已发送电子邮件”错误。

我在我的客户模型中有这个验证：

```
validates :email, :uniqueness => {:scope => :account_id, :case_sensitive => false} 
```

这就是我在日志中看到的：

```
Customer Load (0.4ms)  SELECT `customers`.* FROM `customers` WHERE `customers`.`account_id` = 2 AND `customers`.`email` = 'xxxxx@gmail.com' LIMIT 1
(0.1ms)  BEGIN
Customer Exists (0.8ms)  SELECT 1 AS one FROM `customers` WHERE `customers`.`email` = BINARY 'xxxxx@gmail.com' LIMIT 1
Customer Exists (0.3ms)  SELECT 1 AS one FROM `customers` WHERE (`customers`.`email` = 'xxxxx@gmail.com' AND `customers`.`account_id` = 2) LIMIT 1
(0.2ms)  ROLLBACK 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T06:24:14.030

您的范围正在将电子邮件搜索范围缩小到给定的 account_id (= 2)。不确定这是否是您的预期行为，但如果您希望它也搜索其他帐户 ID，则应该删除范围。

验证失败，因为您输入的电子邮件已被占用。因此，他们正在做你告诉他们做的事情......

# dotnetzip - 是否可以创建一个自解压存档，在解压缩时将运行特定文件？

> ID：11408790
> 
> 赞同：2
> 
> 时间：2012-07-10T07:46:54.427
> 
> 标签：dotnetzip

例如，我想部署一个包含`setup.exe`自解压存档的应用程序。当用户执行自解压存档时，它会将内容解压缩到临时文件夹并运行 setup.exe。

这可能吗？如果是这样，有什么例子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T06:27:08.423

是的，这是您可以做的事情之一`DotNetZip`。

文档页面提供了一个示例。
[SaveSelfExtractor 方法（exeToGenerate，选项）](http://dotnetzip.herobo.com/DNZHelp/html/87eec1c4-57fa-9d8b-a64a-8ad2130ca4cb.htm)

```
string DirectoryPath = "c:\\Documents\\Project7";
using (ZipFile zip = new ZipFile())
{
    zip.AddDirectory(DirectoryPath, System.IO.Path.GetFileName(DirectoryPath));
    zip.Comment = "This will be embedded into a self-extracting WinForms-based exe";
    var options = new SelfExtractorSaveOptions
    {
      Flavor = SelfExtractorFlavor.WinFormsApplication,
      DefaultExtractDirectory = "%USERPROFILE%\\ExtractHere",
      PostExtractCommandLine = ExeToRunAfterExtract,
      SfxExeWindowTitle = "My Custom Window Title",
      RemoveUnpackedFilesAfterExecute = true
    };
    zip.SaveSelfExtractor("archive.exe", options);
} 
```

# c# - C# 编译器如何决定发出可重定向的程序集引用？

> ID：11408792
> 
> 赞同：12
> 
> 时间：2012-07-10T07:47:02.280
> 
> 标签：c#, compiler-construction, portable-class-library

.NET Compact Framework 引入了可重定向程序集引用，现在用于支持可移植类库。

基本上，编译器会发出以下 MSIL：

```
.assembly extern retargetable mscorlib
{
    .publickeytoken = (7C EC 85 D7 BE A7 79 8E )                         
    .ver 2:0:5:0
} 
```

C# 编译器如何理解它必须发出可重定向的引用，以及如何强制 C# 编译器即使在可移植类库之外也发出这样的引用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T04:17:44.450

对于程序集本身，它是一个程序集标志，即[程序集：AssemblyFlags(AssemblyNameFlags.Retargetable)]。

请注意，此标志在平台程序集之外没有意义 - 自定义程序集不能重新定位。

对于引用，它作为名称的一部分从被引用的程序集中复制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T07:55:10.577

不确定这是否会有所帮助，但以下文件是自动生成的并包含在构建中。

```
using System;
using System.Reflection;
[assembly: global::System.Runtime.Versioning.TargetFrameworkAttribute(
   ".NETPortable,Version=v4.0,Profile=Profile4", 
   FrameworkDisplayName = ".NET Portable Subset")] 
```

这可能暗示编译器做一些魔术。

编辑：

我认为上面使库可移植。从命令行我可以看到`/nostdlib+`使用了，并且引用了便携式`mscorlib.dll`（我假设它具有与上面提到的相同的属性）。

“...\Program Files\Reference Assemblies\Microsoft\Framework.NETPortable\v4.0\Profile\Profile4\mscorlib.dll”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T11:00:18.070

我通过实验注意到，如果引用的程序集被标记为可重定向（`.assembly`MSIL 中的部分上的修饰符），C# 编译器将使引用编译器成为可重定向的。我还没有发现编译器如何决定使程序集可重定向。

# ios - 将 MPMoviewPlayerController 添加到 UIViewController 以实现全屏播放旋转

> ID：11408795
> 
> 赞同：0
> 
> 时间：2012-07-10T07:47:20.947
> 
> 标签：ios, uiview

我有同样的问题： [MPMoviewPlayerController 全屏播放旋转，底层 UIViewController 仅具有纵向模式（不允许旋转）](https://stackoverflow.com/questions/5014176/mpmoviewplayercontroller-fullscreen-playback-rotation-with-underlying-uiviewcont?rq=1)

我认为这个问题的答案非常有用。然后我为此添加了一个 UIViewController。首先：youtubePlayer 是一个 MPMoviePlayerController，下面的代码将 youTubeView 的帧发送到 youtubePlayer 并在 youTubeView 上显示 youtubePlayer：

```
[youtubePlayer.view setFrame:youTubeView.bounds];
[youTubeView addSubview:youtubePlayer.view]; 
```

切换到全屏后，我想将 youtubePlayer.view 添加到一个新的 UIViewController，然后它可以自动旋转： playerFullScreen = [[UIViewController alloc]init];

```
[playerFullScreen.view addSubview:youtubePlayer.view];
[nav pushViewController:playerFullScreen animated:NO]; 
```

但是屏幕变白，视频不显示，我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T07:55:46.600

你不需要使用`UIViewController`; `MPMoviePlayerViewController`效果一样好，它有自己的功能来模态展示视频，就像 YouTube 一样（我认为）。也代替`addSubview`，尝试使用`setView`：

我花了很长时间研究这个并且以下工作完美。

```
moviePlayer = [[MPMoviePlayerController alloc] initWithContentURL:videoURL];

//Calls for movie playback once video is finished
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(moviePlayBackDidFinish:)
                                             name:MPMoviePlayerPlaybackDidFinishNotification
                                           object:moviePlayer];
playerView = [[MPMoviePlayerViewController alloc]init];
[moviePlayer setControlStyle:MPMovieControlStyleFullscreen];
[playerView setView:moviePlayer.view];

[moviePlayer.view setFrame: self.view.bounds];  // player's frame must match parent's

[self presentMoviePlayerViewControllerAnimated:playerView];

[moviePlayer play];
NSLog(@"playing video view"); 
```

并在解除其呼叫时

```
- (void) moviePlayBackDidFinish:(NSNotification*)notification {
    MPMoviePlayerController *player = [notification object];
    [[NSNotificationCenter defaultCenter] removeObserver:self      
                                                    name:MPMoviePlayerPlaybackDidFinishNotification
                                                  object:player];

    [self dismissMoviePlayerViewControllerAnimated];

    NSLog(@"removed video view");
} 
```

# ios - iphone 的 flite tts 中的完美音高、方差和速度值是什么

> ID：11408802
> 
> 赞同：0
> 
> 时间：2012-07-10T07:47:49.340
> 
> 标签：ios, avaudioplayer, text-to-speech, flite

嗨，我已成功添加 flite-tts(flite-1.4)，我在这里是我输入文本的声音，但问题是有时这些词听不清楚，

任何人都可以建议输入文本的最佳值（音高，方差）是什么。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T16:45:22.377

嗯，这些并没有真正的“最佳”价值。我想你知道你可以选择使用哪个声音 ;-)

我使用女声：`cmu_us_flt` 并具有以下设置：

*   **持续时间拉伸**：1.2
*   **目标平均值**：1.2
*   **目标标准开发**：2.0

尽管它听起来仍然像计算机语音，但它仍然非常适合我的应用程序并且可以正常工作。

希望这可以帮助！

# android - View 仅在 1 台设备上绘制按钮和 textViews 而不是其他设备

> ID：11408803
> 
> 赞同：0
> 
> 时间：2012-07-10T07:47:52.700
> 
> 标签：android, android-view

我有一个名为 GameView 的自定义视图，用于绘制我的游戏。还有一个名为 PausedView 的子视图用作 GameView 的叠加层。当游戏暂停时，PausedView 设置为可见，屏幕获得 50% 不透明度的黑色覆盖层和 4 个按钮。

我的问题是在我的 LG Optimus S (Android 2.3.3) 上没有出现这些按钮。他们在那里，你可以点击然后，但他们没有显示出来。此外，黑色覆盖仅出现在 GameView 中的按钮和文本视图上。如果我离开，然后回到活动，一切看起来都很正常。

我的摩托罗拉 Xoom (Android 3.2.1) 或摩托罗拉 Droid (Android 2.2.3) 上不会出现此错误。直到最近我的 Optimus 上也没有发生这种情况（我想大约是在我获得服务更新的时候）。

我正在谈论的屏幕截图：

[http://postimage.org/image/qjhiho3ed/](http://postimage.org/image/qjhiho3ed/)

[http://postimage.org/image/9k8k2es6t/](http://postimage.org/image/9k8k2es6t/)

我尝试在 GameView 和 PausedView 上调用 postInvalidate()，但没有帮助。

有没有人遇到过这样的事情？

* * *

更新：我尝试从 XML 中删除不可见性设置并使用此代码，但它仍然无法正常工作。在创建视图很久之后，我可以通过在视图上调用 setVisibility 来纠正它，但是在创建过程中我找不到调用这些函数的正确位置。

```
// Use XML layout
setContentView(R.layout.main);

// define the views of this activity
gameView    = (GameView)findViewById(R.id.gameView);
pausedView  = findViewById(R.id.pausedView);
victoryView = findViewById(R.id.victory); 

pausedView.setVisibility(View.INVISIBLE);
victoryView.setVisibility(View.INVISIBLE); 
```

更新：

通过使用修复它

```
pausedView.setVisibility(View.GONE);
victoryView.setVisibility(View.GONE); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T08:32:13.440

是的，我想我遇到过类似的事情。在我的应用程序中，我有一个带有图像源和叠加层的 FrameView。在我的 Android 4.0.3 设备上，它看起来很好，但对于 2.3.x 设备（或更早版本），它们在设置为可见时不会出现。

到目前为止，我唯一的解决方案是**不在 XML 文件中将视图设置为不可见**，并在布局膨胀后立即将它们变为不可见（或消失）。在那之后，一切似乎都正常。

# javascript - 返回元素的html以及jquery中的元素

> ID：11408810
> 
> 赞同：0
> 
> 时间：2012-07-10T07:48:21.780
> 
> 标签：javascript, jquery

我已经标记为

```
<div id="div1">
   <div id="div2">
     blah blah
   </div>
</div> 
```

如果我使用 $("#div1").html()，它将返回 div#div2。但我想获得完整的 html。即，与 div#div1 一起。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T07:51:47.620

你可以试试：

```
$('#div1')[0].outerHTML 
```

编辑：

相同的解决方案，但不使用 jQuery（更好的性能）：

```
document.getElementById('div1').outerHTML 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T07:57:17.580

试试这个：http: [//jsfiddle.net/96u9c/3/](http://jsfiddle.net/96u9c/3/)

`:)`特殊需要的功能，现在您可以将其用于您自己的任何目的。

`justtext`将为您提供父标签的唯一文本，而`inner`版本将为您提供子文本。

希望能帮助到你`:)`

您可以很好地将其添加到项目中的通用 javascript 文件中，或者对其进行自定义并将其用作项目中的插件。

**代码**

```
jQuery.fn.justtext = function() {

    return $(this).clone()
            .children()
            .remove()
            .end()
            .text();

};

jQuery.fn.justtextinner = function() {

    return $(this).clone()
            .children()
            .end()
            .text();

};

alert($('#div1').justtextinner());​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T07:51:10.923

我会说尝试选择父元素，或者另一种方法是这样做：

```
var html = $('<div>').append($('#top').clone()).remove().html(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T08:19:21.443

您可以创建一个简单的 jQuery 插件来为您完成这项工作，允许您在本地`.outerHTML`属性存在时使用它，或者在它不存在时使用 polyfill。

```
(function($) {
  if('outerHTML' in document.createElement('div')) {
    $.fn.outerHtml = function() {
      return this[0].outerHTML;
    }
  }
  else {
    $.fn.outerHtml = function() {
      return $("<div />").append(this.eq(0).clone()).html();
    }
  }
}(jQuery)); 
```

一个例子是[http://jsfiddle.net/steveukx/qUEyp/](http://jsfiddle.net/steveukx/qUEyp/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T07:53:10.750

使用 .parent()：

```
$("#div1").parent().html(); 
```

然而，这也将获得所有兄弟姐妹的 html。您可以将 div1 包装在另一个 div 中... :)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-10T07:53:21.070

`.html()`返回`innerHTML`你需要outerHTML。[这](https://stackoverflow.com/questions/2419749/get-selected-elements-outer-html)可能会有所帮助。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-10T08:04:09.670

```
$("<div />").append($("#div1").clone()).html(); 
```

[小提琴](http://jsfiddle.net/WjynX/)

# css - 如何将文本阴影添加到 Twitter Bootstrap 导航栏链接？

> ID：11408816
> 
> 赞同：4
> 
> 时间：2012-07-10T07:49:14.837
> 
> 标签：css, twitter-bootstrap, css-selectors, less, navbar

到目前为止，我已经尝试过：

```
.navbar-inner {
  text-shadow: black 0.1em 0.1em 0.2em;
} 
```

和：

```
.nav > li > a {
  text-shadow: black 0.1em 0.1em 0.2em;
} 
```

两者都不起作用。是什么赋予了？

仅供参考，我的导航栏 html 代码与 Twitter Bootstrap 演示代码相同：

```
<div class="navbar navbar-fixed-top">
  <div class="navbar-inner">
    <div class="container">
      <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </a>
      <a class="brand" href="#">Test Inc.</a>
      <div class="nav-collapse">
        <ul class="nav">
          <li class="active"><a href="#">Home</a></li>
          <li><a href="#about">About</a></li>
          <li><a href="#contact">Contact</a></li>
        </ul>
      </div><!--/.nav-collapse -->
    </div>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-10T21:09:02.423

尝试：

```
.navbar .nav > li > a{
  text-shadow: black 0.1em 0.1em 0.2em;
} 
```

演示：[这里](http://jsfiddle.net/8nn2r/)

一个建议使用 px 而不是 em，因为引导程序使用 px

# cuda - 将结果写入 CUDA / Optix 中的文本文件

> ID：11408817
> 
> 赞同：0
> 
> 时间：2012-07-10T07:49:18.643
> 
> 标签：cuda, optix

我想知道是否可以编写在我的程序 Cuda / Optix 中计算的变量的文本文件。那是变量在我的 .cu 文件中，因此不能由 CPU 写入。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T07:55:52.340

据我所知，不可能从 CUDA 内核执行文件 I/O。您需要使用`cudaMemcpy`数据并将其复制回主机内存，然后您可以从那里将值写入文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T17:37:29.727

正如前面的答案所暗示的，不可能通过 CUDA 内核将数据写入文件。如果您的代码涉及多个循环，您可能会想您的程序在每个循环上传输和写入数据的速度有多慢；如果是这样，您应该在给定数量的循环后进行数据传输。换句话说，将文件写入多个循环的块中，而不是在每个循环中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T08:00:59.173

我没有使用 Optix 的经验，但据我所知，没有办法从 CUDA 写入文件。您应该将值下载到主机，以便将它们存储到文件中。

您可以使用`cudaMemcpy( dstPointer, srdPointer, size, cudaMemcpyDeviceToHost);`将数据从设备 (GPU) 复制到主机 (CPU)。请参阅：[NVIDIA CUDA 库：cudaMemcpy](http://www.clear.rice.edu/comp422/resources/cuda/html/group__CUDART__MEMORY_g48efa06b81cc031b2aa6fdc2e9930741.html) 请注意，您`dstPointer`必须足够大才能存储数据！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-14T21:48:57.667

不，您无法在设备代码中打开文件；您可以对控制台执行 printf() 以进行调试（在 optix 或 cuda 中，没关系），但无法打开或写入文件。

可能最简单的解决方案是创建一些可以在主机和设备上读写的 CUDA 托管内存 (cudaMallocManaged())；将您的变量值写入设备上，然后打开一个文件并将它们转储到主机上。这也适用于 cuda 和 optix。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-03T20:29:35.247

我不知道如何打开文件描述符并直接从设备写入；但是，我在 OptiX 中使用`rtPrintf`[1](https://raytracing-docs.nvidia.com/optix_6_0/api_6_0/html/group__rt_printf.html)**将程序的输出重定向到文件**。`rtPrintf`将允许您打印变量等的内容，如果您在打印前加上关键字，您可以`grep`轻松地打印特定项目。这种策略是调试早期 OptiX 代码甚至在某种程度上跟踪它正在做什么的好方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-12-26T16:11:04.847

在 optix 中，您可以使用缓冲区将所有数据传输回主机，一旦将其下载回主机内存，您就可以轻松地将数据转换为 csv 或 txt 格式

# ios - iOS 应用程序中的 360 度视图

> ID：11408823
> 
> 赞同：2
> 
> 时间：2012-07-10T07:49:31.747
> 
> 标签：ios

我正在使用需要创建图像的 360 度视图的 iPhone 应用程序。在我的搜索中，我可以找到从图像拍摄的图像并且图像在视图中旋转。

我想知道是否有人有一个很好的解决方案或任何关于如何完成这项工作的好教程。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T09:32:36.667

像这样的东西？ [http://javieralog.blogspot.com/2012/03/japanoview-open-source-panorama-viewer.html](http://javieralog.blogspot.com/2012/03/japanoview-open-source-panorama-viewer.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T08:04:27.310

有许多 js（例如[这里](http://code.google.com/p/jspanoviewer/)，[这里](http://www.cheetah3d.com/download/HTML5pano/index.html)）库可用于 360 度全景视图。您可以将 UIWebView 与这些库一起使用来轻松实现此目的。

# c++ - 为什么 C++ 中没有“NULL 引用”？

> ID：11408825
> 
> 赞同：9
> 
> 时间：2012-07-10T07:49:38.440
> 
> 标签：c++, pointers, reference, null, specifications

我正在阅读 C++ 常见问题解答 - “ [8.6 - 何时应使用引用，何时应使用指针？](http://www.parashift.com/c++-faq-lite/refs-vs-ptrs.html) ”，尤其是以下语句：

> 尽可能使用引用，必要时使用指针。
> 
> ...
> 
> 上述情况的例外是函数的参数或返回值需要一个“哨兵”引用——一个不引用对象的引用。这通常最好通过返回/获取一个指针，并赋予 NULL 指针特殊的意义（引用必须始终为对象别名，而不是取消引用的 NULL 指针）。

从我所见，对“哨兵”引用的需求确实经常是使用指针而不是引用的原因。我想知道的是：为什么 C++ 没有一个特殊的“NULL 值”用于引用？似乎它几乎不需要指针，这将解决许多问题。

那么为什么它不是语言规范的一部分呢？

**编辑：**

我不确定我的问题是否清楚——我想我并没有乱七八糟地询问 NULL 引用。大多数情况下，我在 C++ 中读到“引用就是对象”。而且，在大多数 OOP 语言中，对象可以是 NULL - Pascal、C#、Java、JavaScript、PHP 等，您可以在所有这些中执行`someObject = null`或`someObject := nil`. 事实上，Pascal 也支持指针，但仍然允许对象是`nil`，因为它有它的用途。那么为什么 C++ 有某种特殊性并且没有 NULL 对象呢？这只是一个疏忽还是一个实际的决定？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-10T07:55:41.057

因为引用带有指向一个永不改变的有效内存地址的语义；即取消引用它是安全/定义的，因此不需要 NULL 检查。不能通过设计重新分配参考。

当 var 可以为 NULL 并且客户端代码必须处理这种情况时，您可以使用指针。当您可以保证有效/初始化的内存地址时，您可以使用引用。

使用指针的一个示例是作为类的成员来存储对某个实例的“引用”，该实例在类构造时可能不知道或无法初始化。但是，成员引用必须在构造时初始化（通过初始化列表），并且不能推迟它们的分配。

如果您允许空引用，那么除了语法之外，它与指针没有什么不同（需要进行相同的 NULL 检查。）

**更新：**

> “而且，在大多数 OOP 语言中，对象可以是 NULL - Pascal、C#、Java、JavaScript、PHP 等。[...] 那么为什么 C++ 有点特殊并且没有 NULL 对象？这只是一个忽略还是一个实际的决定？”

我想你对此有点困惑。*Java 和 C# 等可能会给人一种“NULL 对象”*的印象，但这些对象引用或多或少像一个 C++ 指针，具有更简单的语法、GC 检测和异常抛出。在这些语言中，如果您对“空对象”进行操作，您将得到某种异常，例如**NullReferenceException** (C#)。地狱，在 Java 中它被称为**NullPointerException**。

您必须先进行检查，`null`然后才能安全地使用它们。有点像 C++ 指针（除了在大多数托管语言中，指针默认初始化为 NULL，而在 C++ 中，通常由您负责设置初始指针值（否则未定义/已经存在的任何内存））。

C++ 观点是关于有选择的，因此是冗长的：

*   使用普通指针随心所欲，必要时检查 NULL。
*   使用具有编译器强制有效性语义/约束的引用。
*   滚动您自己的智能指针，这些指针可以记账并按照您希望的方式运行。
*   如果需要，使用 void 指针（小心！）来引用无类型的内存块。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-10T07:58:48.837

请看一下指针和引用之间的区别——虽然标准让引用的实现方式保持开放，但它们目前总是作为指针实现。

这意味着它们之间的主要区别是 a) 语义 b) 指针可以重新定位 c) 指针可以为空。

所以简短的回答是，这是故意的。当您作为程序员看到一个引用时，您应该知道 a）该引用已填充 b）它不会改变（并且 c）您可以使用与对象相同的语义来使用它）。

标准是否允许空引用，您总是必须在使用引用之前检查空值，这是不想要的。

编辑：

关于您的编辑，我想这里的混淆可能源于大多数简单的面向对象语言隐藏正在发生的事情这一事实。以 Java 为例，虽然看起来你有 NULL 对象，并且可以分配它们，但你真的不能 - 真正发生的是 Java 只有指针，并且可以为这些指针分配空值。由于在 Java 中实际上不可能直接拥有对象，因此它们取消了指针语义并将指针视为对象。C++ 更强大 - 并且容易出错（Java 爱好者会说堆栈用户类实例不是必需的，并且在 Java 中不使用它们的决定是为了降低复杂性，并使 Java 更易于使用）。这也随之而来，因为 Java 没有对象，所以它没有引用。然而，真正没有帮助的是，

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T07:58:03.007

定义引用应该与另一个变量或对象相关联。因此，空引用或空引用违反了它的存在目的。

从技术上讲，这意味着您从空引用开始，然后将其分配给某个变量，或者可能稍后重新分配给另一个变量。这根本不是要创建的参考。

引用不能复制的指针还有其他几种用途。例如，使用指针引用具有少量内存的大量复杂数据（字节序列），并通过仅花费 8 个字节左右的指针来根据需要频繁地传递它。您不能在不浪费相同内存的情况下通过引用来做到这一点。

引用总是与类型相关联，而指针则不是这种情况。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T10:14:32.477

C++ 引用不是大多数其他语言使用该术语的意义上的引用。它更像是一个*别名*。使用 C++ 引用并不涉及以与取消引用指针相同的方式“取消引用”它；它实际上*是*分配给它的对象。

没有真正的空对象*实例*这样的东西，所以你不能创建对这样的东西的 C++ 引用。在其他语言中，空引用等同于 C++ 空指针。它实际上不包含任何内容。

现在，关于您的其他想法： 1\. 拥有不可为空的引用对我来说是件*好事*；这意味着您可以获得通过引用传递的所有好处，而无需在所有地方检查空值。2\. 可空引用不能代替指针...如果您需要在低级别进行内存或 IO 工作，您将需要对内存和内存映射设备的原始访问。您可以查看 C#（或 C++/CLR），正是出于这个原因，它具有托管引用和非托管指针。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T07:55:26.200

引用必须引用某些东西，因此，空引用不可用。
C 没有引用，在这种语言中我们只能使用指针，因此，这是与 C 语言的兼容性

# javascript - 如何在 asp.net 中的 2 个用户之间创建聊天通信通道

> ID：11408826
> 
> 赞同：1
> 
> 时间：2012-07-10T07:49:39.403
> 
> 标签：javascript, asp.net, web-services

我想在我的网站中添加一个聊天应用程序。我几乎开发了聊天应用程序的一部分。但是我在创建聊天通信通道时遇到了问题。我使用 Web 服务从数据库中插入和检索消息。当我输入新消息时，另一个用户在重新加载其聊天窗口之前无法阅读该消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T07:52:50.180

我不完全确定你的问题是什么 - 但是：

如果您想在 .Net 中创建聊天应用程序，为什么不研究 SignalR？

[https://github.com/SignalR/SignalR/](https://github.com/SignalR/SignalR/)

他们有一个演示（用少量代码）如何编写聊天应用程序。

[http://www.hanselman.com/blog/AsynchronousScalableWebApplicationsWithRealtimePersistentLongrunningConnectionsWithSignalR.aspx](http://www.hanselman.com/blog/AsynchronousScalableWebApplicationsWithRealtimePersistentLongrunningConnectionsWithSignalR.aspx)

还有一个使用 SignalR 编写的实时聊天应用程序 - [http://www.hanselman.com/blog/AsynchronousScalableWebApplicationsWithRealtimePersistentLongrunningConnectionsWithSignalR.aspx](http://www.hanselman.com/blog/AsynchronousScalableWebApplicationsWithRealtimePersistentLongrunningConnectionsWithSignalR.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T08:47:01.713

如果您真的想创建自己的聊天应用程序。然后，这里有一些关于如何根据您当前的进度使其工作的想法。

*   为您的聊天消息创建一个 instance_id，这将确定谁能够访问这些消息。如果两个人一起聊天，除了发送者和接收者 ID 之外，他们应该有相同的 instance_id。
*   您必须使用 Ajax 计时器来不断获取新消息的更新。

    您是否在以某种方式模仿 Facebook 聊天？

    首先尝试使用网页进行聊天以更轻松地实施，然后逐步使其成为小部件。

# visual-studio - 在使用控件本身时，如何使用假数据设计时初始化 XAML UserControl？

> ID：11408828
> 
> 赞同：2
> 
> 时间：2012-07-10T07:49:45.143
> 
> 标签：visual-studio, xaml, windows-8, winrt-xaml

我有一个基本的 WinRT XAML UserControl，它具有如下实现的单个依赖项属性。用户控件显然只有在另一个 Page 或 UserControl 中使用时才在设计时构建。当我在设计器中使用用户控件本身工作时，不会呈现文本“Hello world”。在这种情况下，如何让设计器也用数据初始化用户控件？

XAML：

```
<UserControl
    x:Class="GTWin8.Ui.SimpleBinding"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:GTWin8.Ui"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    d:DesignHeight="300"
    d:DesignWidth="400"
    x:Name="ThisControl">

    <Grid Background="Black">
        <TextBlock Text="{Binding Path=Message, ElementName=ThisControl}" 
                   HorizontalAlignment="Left" Margin="10,10,0,0" 
                   TextWrapping="Wrap" VerticalAlignment="Top" Height="280" Width="380"/>
    </Grid>
</UserControl> 
```

代码隐藏：

```
public sealed partial class SimpleBinding : UserControl
{
    public static DependencyProperty MessageProperty = DependencyProperty.Register(
           "Message", typeof(String), typeof(SimpleBinding), new PropertyMetadata(null));

    public String Message
    {
        get { return (String)GetValue(MessageProperty); }
        set { SetValue(MessageProperty, value); }
    }

    public SimpleBinding()
    {
        this.InitializeComponent();
        Message = "Hello world";
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T17:40:13.400

好吧，一个更简单的方法是声明式调用。

```
<UserControl>

    <d:Page.DataContext>
        <sample:FakeViewModel />
    </d:Page.DataContext>

    <Grid>
        <!-- your bind/content -->
    </Grid>

</UserControl> 
```

我在所有项目中都使用它，因为它提供设计时数据而不会影响我的运行时体验。更多：[http ://blog.jerrynixon.com/2012/06/windows-8-15-more-reasons-why-i-choose.html](http://blog.jerrynixon.com/2012/06/windows-8-15-more-reasons-why-i-choose.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T15:09:09.390

IIRC，以您编写的直接形式，这是不可能实现的，因为在设计时您不使用控件的实例。请注意 XAML 的第一行：根元素指定了 UserControl，即基类。这是您使用的实例！这就是为什么在设计带有抽象基类的组件时总是存在问题的原因。您在设计器中使用的所有内容都是一个 UserControl 实例，其中填充了 XAML 指定的内容。

XAML 分析器实例化由标记名称描述的任何对象。在您设计控件时，会阻止解析器实例化它，因为该控件实际上还不存在。这正是为什么 XAML 的第一个词是 UserControl 并且您的类名作为 x:Class 属性给出的原因。当您保存 XAML 时，它将被预处理为指定部分类的 MyControl.g.cs 文件，它将与您自己的 MyControl.cs 一起编译，然后 Visual Studio（或您的应用程序）才会能够调用它包含的代码。

如果您努力尝试，您可能会强制 XAML 解析器加载您的控件，但这是为了什么？您将获得 PREVIOUS 构建的快照，而不是当前编辑的快照。只有 XAML 模板保持最新，因为它们是动态删除和加载的。

这就是“为什么我的构造函数没有运行”的部分。

如果您需要在 ctor 中设置消息，为什么不将其设置为默认属性值？

```
public sealed partial class SimpleBinding : UserControl
{
    public static DependencyProperty MessageProperty = DependencyProperty.Register(
           "Message", typeof(String), typeof(SimpleBinding), new PropertyMetadata("Hello world"));
...
    public SimpleBinding()
    {
        this.InitializeComponent();
    }
} 
```

当然，与您可以在构造函数中分支/计算/等相比，它受到严格限制和硬编码。如果您需要更多自由，请尝试使用 Design Time Data，也许这会有所帮助。

如果您**确实**需要在自己的单独设计时在组件内运行自定义代码，请考虑将代码移动到虚拟基类中，并将 <MyBaseClass> 而不是 <UserControl> 放在 XAML 的根目录中。XAML 解析器将被迫对其进行实例化，然后使用 xaml 的内容对其进行皮肤处理。请注意，您将调用该基类的先前成功构建。另外，请记住使用 IsInDesignMode 或类似方法（参见即[https://stackoverflow.com/a/426072/717732](https://stackoverflow.com/a/426072/717732)）来过滤行为。

# magento - Magento 网站地图

> ID：11408830
> 
> 赞同：1
> 
> 时间：2012-07-10T07:49:47.483
> 
> 标签：magento

我在 magento 购物车中有大约 3500 个产品，当我从管理员生成站点地图时，它只生成 2268 个 url，这是正确的数量，因为我有类别、分层导航，但没有显示分层导航 Url。

任何想法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T07:55:39.287

通常所有产品都有一个唯一的 URL，并且应该显示在您的 XML 文件中。

*   所有产品都激活了吗？
*   所有产品都按类别分类？
*   您的商店真的有 3500 种产品吗？或者它只是您的完整库存？

您可以检查并转到**Admin->Catalog->URL Rewrite Management**那里您可以看到您的所有 URL。也许您可以检查哪些产品未包含在您的站点地图中并进行检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T01:28:41.983

是的，如果您有以下任何一种情况，这很可能是正确的： 1\. 简单关联产品的可配置产品未设置为单独显示。2\. 缺货产品和缺货产品设置为不显示。

# sql - 如何从查询结果中递归选择？

> ID：11408833
> 
> 赞同：0
> 
> 时间：2012-07-10T07:49:55.577
> 
> 标签：sql, sql-server, tsql

如何以最有效的方式重用查询结果？

我有两个表：项目和关系。项目可以是单独的项目，也可以是另一个项目的子项目。关系在关系表中维护。项目由 depNo、itemNo 列唯一标识。这是示例数据集：

```
create table items
(
itemId int identity (1,1) not null ,
depNo int not null,
itemNo int not null,
name varchar(50),
class int not null, -- 0 - unknown class, 1 - child item
constraint pk_depNo_itemNo primary key (depNo, itemNo)
);

create table relations
(
relId int identity (1,1) not null,
pDepNo int not null,
pItemNo int not null,
cDepNo int not null,
cItemNo int not null,
constraint pk_parent_child primary key (pDepNo, pItemNo, cDepNo, cItemNo)
);

insert into items values (1, 1, 'M1CItem1', 1);
insert into items values (1, 2, 'M1CItem2', 1);
insert into items values (1, 3, 'M1CItem3', 1);
insert into items values (2, 1, 'Master1', 0);
insert into items values (2, 2, 'LItem1', 0);
insert into items values (2, 3, 'LItem2', 0);
insert into items values (2, 4, 'LItem3', 0);
insert into items values (2, 5, 'Master2', 0);
insert into items values (2, 6, 'M2CItem1', 1);
insert into items values (2, 7, 'M2CItem1', 1);

insert into relations values (2, 1, 1, 1);
insert into relations values (2, 1, 1, 2);
insert into relations values (2, 1, 1, 3);
insert into relations values (2, 5, 2, 6);
insert into relations values (2, 5, 2, 7); 
```

以下查询选择满足查询条件的所有项目或其父项（如果项目是子项）：

```
with qRes as (
select depNo, itemNo, name, class, pDepNo, pItemNo from items
left outer join relations
on depNo = cDepNo
and itemNo = cItemNo
where name like '%Item1'
)
-- select all results where item is not a child
select depNo, itemNo, name, class from qRes where class <> 1
union
-- select all parents of the children
select B.depNo, B.itemNo, B.name, B.class from qRes A
inner join items B
on A.pDepNo = B.depNo
and A.pItemNo = B.itemNo; 
```

执行的查询将返回：

```
depNo   itemNo  name    class
2           1   Master1 0
2           2   LItem1  0
2           5   Master2 0 
```

有没有更好的方法来解决这样的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T09:21:31.633

如果您只有一个级别的递归，那么您的方法很好，如果您在层次结构中有很多级别，那么您可能需要考虑使用递归方法。

例如，如果我改变你的一种关系：

```
UPDATE  Relations
SET     pItemNo = 6
WHERE   cItemNo = 7 
```

然后它使这一行`{DepNo: 2, ItemNo: 7, name: M2CItem1}`成为 的孩子`{DepNo: 2, ItemNo: 6, name: M2CItem1}`，而后者又是 的孩子`{DepNo: 2, ItemNo: 5, name: Master2}`

以下将返回`M2CItem1`和`Master2`

```
;WITH CTE AS
(   SELECT  depNo, itemNo, name, class, pDepNo, pItemNo, 1 [RecursionLevel]
    FROM    items
            LEFT JOIN relations
                ON DepNo = cDepNo
                AND ItemNo = cItemNo
    WHERE   name like '%Item1'
    UNION ALL
    SELECT  i.depNo, i.itemNo, i.name, i.class, r.pDepNo, r.pItemNo, RecursionLevel + 1
    FROM    CTE i
            INNER JOIN relations r
                ON i.pDepNo = r.cDepNo
                AND i.pItemNo = r.cItemNo
)
SELECT  DISTINCT c.DepNo, c.ItemNo, i.Name, i.Class
FROM    CTE c
        INNER JOIN Items i
            ON COALESCE(c.pDepNo, c.DepNo) = i.DepNo
            AND COALESCE(c.pItemNo, c.ItemNo) = i.ItemNo 
```

但是，如果您只想返回最顶层的父级，您可以使用：

```
;WITH CTE AS
(   SELECT  depNo, itemNo, name, class, pDepNo, pItemNo, 1 [RecursionLevel]
    FROM    items
            LEFT JOIN relations
                ON DepNo = cDepNo
                AND ItemNo = cItemNo
    WHERE   name like '%Item1'
    UNION ALL
    SELECT  i.depNo, i.itemNo, i.name, i.class, r.pDepNo, r.pItemNo, RecursionLevel + 1
    FROM    CTE i
            INNER JOIN relations r
                ON i.pDepNo = r.cDepNo
                AND i.pItemNo = r.cItemNo
), CTE2 AS
(   SELECT  c.DepNo, c.ItemNo, i.Name, i.Class, RecursionLevel, MAX(RecursionLevel) OVER(PARTITION BY c.DepNo, c.ItemNo) [MaxRecursionLevel]
    FROM    CTE c
            INNER JOIN Items i
                ON COALESCE(c.pDepNo, c.DepNo) = i.DepNo
                AND COALESCE(c.pItemNo, c.ItemNo) = i.ItemNo
)
SELECT  DepNo, ItemNo, Name, Class
FROM    CTE2
WHERE   Recursionlevel = maxRecursionLevel 
```

这只会返回`{DepNo: 2, ItemNo: 5, name: Master2}`该行`{DepNo: 2, ItemNo: 7, name: M2CItem1}`，因为这是其父级的父级。

[SQL Fiddle 上的工作示例](http://sqlfiddle.com/#!3/df60f/2)

顺便说一句，我认为您应该重新考虑您的架构？如果您将 ItemNo 和 DepNo 设为复合主键，您的身份列是什么？您可能应该选择其中之一，而不是两者兼而有之。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T07:54:52.650

您可以使用 UNION ALL 语句在公用表表达式本身中进行子父递归，但您的方法几乎就在那里。

`Hierarchy`如果您可以选择更改表，则可能需要查看数据类型。

# geolocation - W3C 地理定位 API 没有错误没有期望也没有结果

> ID：11408836
> 
> 赞同：0
> 
> 时间：2012-07-10T07:50:02.170
> 
> 标签：geolocation, w3c-geolocation

我在这里多次阅读了相同的问题，并修复了最重复的解决方案，并添加了 w3c 规范中提到的错误处理程序，但它没有给我任何异常或错误，也没有结果。我不知道我该怎么办？

这是我写的完整代码！

```
<!DOCTYPE HTML>
<html>
<head>
    <title> HTML5 Egypt User Group - Demos</title>
<script src="http://maps.google.com/maps/api/js?sensor=false">
</script>
<script type="text/javascript">

var lastLat; 
    var lastLong; 
function updateStatus(message) { 
        document.getElementById("status").innerHTML = message; 
    } 

function loadDemo() { 
    if(navigator.geolocation) { 
        updateStatus("W3C Geolocation is supported in your browser."); 
        navigator.geolocation.watchPosition(updateLocation, 
                                            handleLocationError, 
                                            {maximumAge:20000}); 
    } 
} 

window.addEventListener("load", loadDemo, true); 

function handleLocationError(error) { 
  switch (error.code) { 
case 0: 
updateStatus("There was an error while retrieving your location: " +  
                error.message); 
break; 

case 1: 
updateStatus("The user prevented this page from retrieving a location."); 
break; 

case 2: 
updateStatus("The browser was unable to determine your location: " +  
              error.message); 
break; 

case 3: 
updateStatus("The browser timed out before retrieving the location."); 
break; 
  } 
} 
function updateLocation(position) { 
    var latitude = position.coords.latitude; 
    var longitude = position.coords.longitude; 
    var accuracy = position.coords.accuracy; 
    var timestamp = position.timestamp; 

    document.getElementById("latitude").innerHTML = latitude; 
    document.getElementById("longitude").innerHTML = longitude; 
    document.getElementById("accuracy").innerHTML = accuracy; 
    document.getElementById("timestamp").innerHTML = timestamp; 
      // sanity test... don't calculate distance if accuracy 
    // value too large 
    if (accuracy >= 500) { 
        updateStatus("Need more accurate values to calculate distance."); 
        return; 
}
} 

     </script>
 </head>
     <body> 
 <button onclick="loadDemo()"> loadDemo()</button>
 <input type="text" value="latitude here" id="latitude" />
 <input type="text" value="latitude here" id="latitude" />
 <input type="text" value="accuracy here" id="accuracy" />
 <input type="text" value="timestamp here" id="timestamp" />
 <input type="text" value="status here" id="status" />

 <span> By Mustafa Adel<span>
 </body>
 </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T08:09:50.493

您正在使用输入控件。尝试设置值而不是 innerHTML。

```
function updateLocation(position) { 
    var latitude = position.coords.latitude; 
    var longitude = position.coords.longitude; 
    var accuracy = position.coords.accuracy; 
    var timestamp = position.timestamp; 

    document.getElementById("latitude").value = latitude;
    document.getElementById("longitude").value = longitude;
    document.getElementById("accuracy").value = accuracy;
    document.getElementById("timestamp").value = timestamp; 
      // sanity test... don't calculate distance if accuracy 
    // value too large 
    if (accuracy >= 500) { 
        updateStatus("Need more accurate values to calculate distance."); 
        return; 
    }
} 
```

# html - 使背景图像和内容都可点击

> ID：11408850
> 
> 赞同：0
> 
> 时间：2012-07-10T07:51:14.087
> 
> 标签：html, css

我想让背景图像以及其中的内容都可以点击。我不确定如何实现它...

图片：

![在此处输入图像描述](../Images/5ce28dd1c34ab31e3afe872720ceec67.png)

我希望图像和内容都是可点击的。

html部分：

```
<div class = "reportslistitem">
   <a href="[[ url ]]"
       target=="_blank">
          [[ startdate ]] -
           [[ enddate ]]
   </a>  
</div> 
```

CSS部分：

```
.reportslistitem{
    width:120px;
    height:140px;
    display:block;
    float: right;
    background:url('../images/Report-icon-without-text.png');
}

a{
 font: bold 12px 'Thin2Regular';
 text-decoration: none;
 color: rgb(0,0,0);
 padding: 10px 15px;
 position: relative;
 text-align: center;
 display:block;
 padding: 0px;
 position:relative;
 top:25px;
 } 
```

我该如何改变它？需要一些指导...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T07:54:05.507

如果您使用 HTML5，则现在可以使用锚标记包装整个部分，因此它将是

```
<a href="[[ url ]]" target="_blank">
   <div class = "reportslistitem">
          [[ startdate ]] - [[ enddate ]]
   </div> 
</a> 
```

CSS应该是这样的

```
.reportslistitem{
    width:120px;
    height:140px;
    display:block;
    background:url('../images/Report-icon-without-text.png');
}

a{
 font: bold 12px 'Thin2Regular';
 text-decoration: none;
 color: rgb(0,0,0);
 padding: 10px 15px;
 text-align: center;
 padding: 0px;
 display:block;
 width:120px;
 height:140px;
 }​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T07:56:49.200

背景不能点击。尽管您可以通过将背景图像分配给链接来模拟这种行为。

只需删除/省略`DIV`并将此类设置为锚点。`display: block;`也可以分配给链接以允许指定宽度和高度。

# java - 如何在运行时设置 text_selector

> ID：11408852
> 
> 赞同：-5
> 
> 时间：2012-07-10T07:51:23.767
> 
> 标签：java, android, android-layout

我正在使用以下选择器

text_selector.xml

```
<?xml version="1.0" encoding="utf-8"?>

<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_selected="true" android:color="@android:color/white"/>
    <item android:state_focused="true" android:color="@android:color/white"/>
    <item android:state_pressed="true" android:color="@android:color/white"/>    
    <item android:color="@android:color/black" />
</selector> 
```

我正在使用以下代码在运行时设置选择器

```
txtMainlabel.setTextColor(R.color.text_selector); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T07:54:49.170

```
txtMainlabel.setTextColor(R.color.text_selector); 
```

setTextColor 需要一个与颜色值对应的整数。您正在做的是用整数值 R.color.text_selector 赋予颜色。您可以在 R 文件中看到该值。因此，您始终为视图设置相同的颜色。

要设置颜色，您可以执行以下操作：`setTextColor(Color.white)`。

另外我不确定 TextView 是否有状态，所以我不确定您是否可以将选择器设置为 TextView。如果这不是一个选项，您始终可以设置点击侦听器并为这些操作设置新颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T08:04:11.090

将您的选择器放在 res/drawable 下并使用

```
label.setTextColor(getResources().getColorStateList(R.drawable.text_selector)); 
```

不要忘记`android:clickable="true"`在布局中的 TextView 声明中设置

# jquery - 如何在 mvc3 中隐藏表格列并在悬停时显示？

> ID：11408853
> 
> 赞同：0
> 
> 时间：2012-07-10T07:51:27.640
> 
> 标签：jquery, html, asp.net-mvc-3

我必须从我的表格中隐藏一列并在悬停时再次显示它。这是表格的外观：

```
 ProjectName|Description|Status 
```

当我将鼠标放在 ProjectName 上时，我必须隐藏描述表并在弹出窗口中显示它。描述列在开始时应处于隐藏模式。

这就是我的 Index.cshtml 页面的外观

```
 @{
           ViewBag.Title = "Index";
             }

        <h2>Index</h2>

        <p>
      @Html.ActionLink("Create New", "Create")
        </p>
      <table>
          <tr>
               <th>
               projectName
         </th>
        <th>
             Description
       </th>
        <th>
            status
         </th>
       <th></th>
  </tr>

    @foreach (var item in Model) {
       <tr>
         <td>
          @Html.DisplayFor(modelItem => item.projectName)
         </td>
         <td >
          @Html.DisplayFor(modelItem => item.Description)
        </td>
         <td>
          @Html.DisplayFor(modelItem => item.status)
       </td>
       <td>
        @Html.ActionLink("Edit", "Edit", new { id=item.ProjectId }) |
        @Html.ActionLink("Details", "Details", new { id=item.ProjectId }) |
        @Html.ActionLink("Delete", "Delete", new { id=item.ProjectId })
        </td>
      </tr>
      }

 </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T07:56:15.367

使用 jquery 隐藏列

```
$('td:nth-child(IndexNumber)').hide(); 
```

请检查 StackOverflow 中的其他问题

[在 HTML 表格中隐藏/显示列](https://stackoverflow.com/questions/455958/hide-show-column-in-an-html-table)

# c# - C# 免费使用图像文件

> ID：11408857
> 
> 赞同：4
> 
> 时间：2012-07-10T07:51:40.407
> 
> 标签：c#, image, bmp

我有一个临时图像文件，我用它打开

```
Bitmap CapturedImg = (Bitmap)Image.FromFile("Item/Item.bmp"); 
```

因为是临时的，我想用另一个图像替换它以供进一步使用，但程序仍在使用该图像，我无能为力。

如何从图像中放手以便被替换？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T07:56:56.723

来自[MSDN](http://msdn.microsoft.com/en-us/library/4sahykhd.aspx)

> 该文件保持锁定状态，直到图像被释放。

而是从文件流中读取图像

```
using( FileStream stream = new FileStream( path, FileMode.Open, FileAccess.Read ) )
{
         image = Image.FromStream( stream );
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T08:02:44.350

我有一个类似的问题，无法使用 using，因为该文件被一些异步代码覆盖。我通过复制位图并释放原始位图解决了这个问题：

```
 Bitmap tmpBmp = new Bitmap(fullfilename);
                Bitmap image= new Bitmap(tmpBmp);
                tmpBmp.Dispose(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T07:56:41.477

尝试使用此语法

```
using (Bitmap bmp = (Bitmap)Image.FromFile("Item/Item.bmp"))
{
    // Do here everything you need with the image
}
// Exiting the block, image will be disposed
// so you should be free to delete or replace it 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T07:59:49.483

```
using (var stream = System.IO.File.OpenRead("Item\Item.bmp"))
{
    var image= (Bitmap)System.Drawing.Image.FromStream(stream)
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-24T10:08:05.520

你也可以试试这个。

```
 BitmapImage bmpImage= new BitmapImage();
 bmpImage.BeginInit();
 Uri uri = new Uri(fileLocation);
 bmpImage.UriSource = uri;
 bmpImage.CacheOption = BitmapCacheOption.OnLoad;
 bmpImage.EndInit();
 return bmpImage; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-02-26T16:43:25.750

这像：

```
public Bitmap OpenImage(string filePath) =>
    return new Bitmap(filePath).Clone(); 
```

或者像这样：

```
public Bitmap OpenImage(string filePath)
{
    using (Bitmap tmpBmp = (Bitmap)Image.FromFile(filePath))
    {
        return new Bitmap(tmpBmp);
    }
} 
```

或者像这样：

```
public Bitmap OpenImage(string filePath)
{
    using (var stream = System.IO.File.OpenRead(filePath))
    {
        return (Bitmap)System.Drawing.Image.FromStream(stream);
    }
} 
```

# html - 统一 Html 网格

> ID：11408858
> 
> 赞同：0
> 
> 时间：2012-07-10T07:51:40.603
> 
> 标签：html, css

我需要以下 HTML 布局（S - 空白空间，*Child* - html 子级，可以是 DIV 或 TABLE。布局应该可以在没有 JavaScript 帮助的情况下调整大小（CSS + HTML 是工具），它应该支持无限数量的子级。所有孩子的宽度都相同。

S*儿童*S*儿童*S*儿童*S

请注意，为此使用表将导致：S*Child*SS*Child*SS*Child*S，这不是我想要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T08:52:01.110

我假设您的意思是子元素尽可能并排出现的网格，然后换行等，自动适应可用宽度。它不会是一个矩形网格，除非是偶然的——通常最后一行的元素比另一行少。

一个简单的方法是使用浮动。假设简单的标记如

```
<div class=grid>
<div>Child</div>
<div>Child</div>
...
</div> 
```

您可以使用样式表，例如

```
.grid div { 
width: 4em;
float: left;
margin-left: 0.2em;
background: #ccc; 
} 
```

这不会在最后一个 Child 的右侧设置任何空间。如果由于某种原因需要这样的间距，您可以添加

```
.grid div:last-child { margin-right: 0.2em; } 
```

# json - 使用 JQuery 解析 JSON

> ID：11408860
> 
> 赞同：0
> 
> 时间：2012-07-10T07:51:50.023
> 
> 标签：json

我收到来自我的 WCF 服务的 JSON 字符串响应。我想将此 JSON 解析为相应的对象。所以我做了如下。

```
$.ajax({
    type: 'GET',
    url: 'http://URL/Service.svc/LoginValidation?',
    success: function(response, status, xhr) {
    if (response != "") {
        var JSON=response.replace(/^"|"$/g, '\''); // replace Start and End double Quotes with single quotes. becze JSON string should be start and end with single quotes while parsing this.
        var obj = JSON.parse(JSON); // Here is my problem. While accessing JSON variable here that automatically showing double quotes. so that here showing syntax error.
            UserID = obj.UserID;
            ClientID = obj.ClientID;
            DomainName = obj.DomainName;
            AuthenticationKey = obj.AuthenticationKey;
        }
        else {
            alert("Invalid UserName or Password.");
        }
    }
}); 
```

如何解析这个 JSON 数据。我们可以使用 JQuery 来做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T07:53:47.890

只需`dataType: 'json'`在您的`$.ajax()`调用选项中设置，jQuery 就会解析它并将解码的对象提供给您的`success`处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T08:00:22.383

使用 getJSON 函数作为

```
 $.getJSON('http://URL/Service.svc/LoginValidation?',function(data)
       {
        var JSON=data.replace(/^"|"$/g, '\''); 
        UserID = JSON.UserID;
        ClientID = JSON.ClientID;
        DomainName = JSON.DomainName;
        AuthenticationKey = JSON.AuthenticationKey;
           // do remaining stuffs
       })  
    }); 
```

# java - Apache wicket - DropDownChioce.onSelectionChanged() 不起作用

> ID：11408862
> 
> 赞同：0
> 
> 时间：2012-07-10T07:52:01.983
> 
> 标签：java, apache, events, wicket, dropdownchoice

我最近开始使用检票口。我尝试在您的项目示例中使用“Vaynberg 的 Apache wicket”一书中的“链接选择框”。

我从书中重新创建了示例：

```
public class LinkedSelectboxesPage extends WebPage {

private Country country;
private City city;

public LinkedSelectboxesPage() {
    Database.buildData();
    country = Database.getCountries().get(0);

    FeedbackPanel feedbackPanel = new FeedbackPanel("feedback");
    add(feedbackPanel);

    Form form = new Form("form");
    add(form);

    DropDownChoice<Country> countries = new DropDownChoice<Country>(
            "countries",
            new PropertyModel<Country>(this, "country"),
            new CountriesModel(),
            new ChoiceRenderer<Country>("name", "code")) {
        protected boolean
        wantOnSelectionChangedNotifications() {
            return true;
        }

        protected void
        onSelectionChanged(Country newSelection) {
            city = null;
        }
    };
    countries.setRequired(true);
    form.add(countries);

    DropDownChoice<City> cities = new DropDownChoice<City>(
            "cities",
            new PropertyModel<City>(this, "city"),
            new CitiesModel(),
            new ChoiceRenderer<City>("name", "code"));
    cities.setRequired(true);
    form.add(cities);
}

private static class CountriesModel extends LoadableDetachableModel<List<? extends Country>> {
    protected List<? extends Country> load() {
        return Database.getCountries();
    }
}

private class CitiesModel extends LoadableDetachableModel<List<? extends City>> {
    protected List<? extends City> load() {
        return Database.getCities(country.getCode());
    }
}
} 
```

当我尝试在我的项目中使用链接选择框时，没有实现固定在函数体前面的断点。

```
public class AddArticlePanel extends Panel {

private Type type;
private Subtype subtype;

private List<Type> typesList;
private List<Subtype> subtypesList;

@SpringBean
@SuppressWarnings("unused")
public static ITypeDao typeDao;

@SpringBean
@SuppressWarnings("unused")
private ISubtypeDao subtypeDao;

public AddArticlePanel(String id) {
    super(id);

    this.typesList = typeDao.loadAllTypes();
    this.type = this.typesList.get(0);

    Form form = new Form("form");
    add(form);

    FormComponent<String> tbTitleArticle = new TextField<String>("titleArticle").setRequired(true);
    form.add(tbTitleArticle);

    FormComponent<String> taTextArticle = new TextArea<String>("textArticle").setRequired(true);
    form.add(taTextArticle);

    DropDownChoice<Type> ddcTypes = new DropDownChoice<Type>(
            "typeArticle",
            new PropertyModel<Type>(this, "type"),
            new TypesModel(),
            new ChoiceRenderer<Type>("name", "id")) {

        protected boolean wantOnSelectionChangedNotifications() {
            return true;
        }

        protected void onSelectionChanged(Type newSelection) {
            type = null;
        }
    };
    ddcTypes.setRequired(true);
    form.add(ddcTypes);

    DropDownChoice<Subtype> ddcSubtypes = new DropDownChoice<Subtype>(
            "subtypeArticle",
            new PropertyModel<Subtype>(this, "subtype"),
            new SubtypesModel(),
            new ChoiceRenderer<Subtype>("name", "id"));
    ddcSubtypes.setRequired(true);
    form.add(ddcSubtypes);
}

public AddArticlePanel(String id, IModel<?> model) {
    super(id, model);
}

private static class TypesModel extends LoadableDetachableModel<List<? extends Type>> {
    protected List<? extends Type> load() {
        return typeDao.loadAllTypes();
    }
}

private class SubtypesModel extends LoadableDetachableModel<List<? extends Subtype>> {
    protected List<? extends Subtype> load() {
        return subtypeDao.loadSubtypesByTypeId(type.getId());
    }
}
} 
```

我不明白为什么会这样。请帮助我，并为我的英语感到抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T14:26:56.863

我的解决方案是使用 Ajax：

```
ddcTypes.add(new AjaxFormComponentUpdatingBehavior("onchange")
{
    @Override
    protected void onUpdate(AjaxRequestTarget target)
    {
        target.add(ddcSubtypes);
    }
}); 
```

但我想了解为什么面板之前没有工作（没有 Ajax）......

????!!!!!!!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T08:04:51.403

在您的 onSelectionChanged 方法中，您将类型设置为 null。这是支持所需 DropDownChoice 字段 ddcTypes 模型的成员，而不是书中国家-ddc onSelectionChanged 方法重置城市变量的示例。

在您的情况下，您将对类型的每一次更改都重置为 null，从而使您的表单无效并阻止它做任何有用的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T17:39:30.953

我已经使用 wicket 1.5.7。

我在类 AddArticlePage 中使用类 AddArticlePanel

```
public class AddArticlePage extends AbstractBasePage {
    public AddArticlePage() {
        add(new HeaderPanel("header"));
        add(new MenuPanel("menu"));
        add(new AddArticlePanel("body")); // !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
        add(new FooterPanel("footer"));
    }
} 
```

和类 BlogApplication 中使用的类 AddArticlePage：

```
public class BlogApplication extends WebApplication {

    @Override
    public void init() {
        this.getComponentInstantiationListeners().add(new SpringComponentInjector(this));
        Injector.get().inject(AddArticlePanel.class);

        mountPage("/add-article/", AddArticlePage.class);
    }

    @Override
    public Class<? extends Page> getHomePage() {
        return IndexPage.class;
    }
} 
```

当我打开带有链接选择框的页面时，此构造不起作用。但是如果更改类 BlogApplication ->

```
public class BlogApplication extends WebApplication {

    @Override
    public void init() {
        this.getComponentInstantiationListeners().add(new SpringComponentInjector(this));
        Injector.get().inject(AddArticlePanel.class);

    }

    @Override
    public Class<? extends Page> getHomePage() {
        return AddArticlePage.class; // !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
    }
} 
```

它发生了魔法 - 链接的选择框可以正常工作。也许我不太明白如何/何时/为什么使用 WebApplication.mountPage(string, class) 方法。

# winforms - Telerik for WinForms gridview 渲染缓慢

> ID：11408868
> 
> 赞同：1
> 
> 时间：2012-07-10T07:52:30.407
> 
> 标签：winforms, telerik, telerik-grid

我们正在测试用于桌面应用程序开发的 Telerik radcontrols。到目前为止，我们对产品非常满意，但有一个问题让我们抓狂。

我们有一个具有 3 级层次结构的 gridview 和 3 个位于第一级的子 gridview。像这样的东西：

![在此处输入图像描述](../Images/51e30ec55fe249420d805bc1704f6a97.png)

主网格有 28 个可见列，里面有很多自定义和验证规则。有 6 列，里面有一个按钮来触发不同的动作。有 4 列上面有图像，其他几列只是不同的颜色，对用户具有不同的含义。每个子网格视图都有大约 5 个可见列，还带有自定义、按钮、图像等。

最初，我们检测到数据的加载速度很慢。因此，现在我们首先加载第一级，然后按需加载较低层次的数据，当用户想要查看每行内的内容时。通过这样做，网格的加载速度得到了提高。

现在瓶颈在gridview 渲染上。我已经在 Telerik 论坛上问过，但给出的答案并没有太大帮助。我发现一些用户提出了同样的问题，但没有一个给出 100% 满意的答案。例如：[自参考网格](http://www.telerik.com/community/forums/winforms/gridview/self-referencing-grid.aspx)

所以我的问题是：有没有人遇到过类似的问题？它是如何解决的，如果有解决方案？别管它有多复杂，我们需要减少加载时间，现在每次点击网格大约需要 10-15 秒，这是无法忍受的。

# java - 下面代码中提交任务到Executor框架的方法是什么？

> ID：11408873
> 
> 赞同：0
> 
> 时间：2012-07-10T07:52:43.693
> 
> 标签：java, multithreading, synchronization, java.util.concurrent

请参考Future类[的 Javadoc 中的以下代码：](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/concurrent/Future.java#Future)

```
FutureTask<String> future =
   new FutureTask<String>(new Callable<String>() {
     public String call() {
       return searcher.search(target);
   }});
 executor.execute(future); 
```

PS：我在`executor.submit(future)`这里没有做任何独家电话。

所以我试图通过调用`executor.execute()`方法在这里执行未来的任务。但是首先任务是如何提交到执行器框架的呢？上面哪一行代码实际上是将任务提交给执行者？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T07:56:53.147

这是线

```
executor.execute(future); 
```

[这种方法的javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Executor.html#execute%28java.lang.Runnable%29)说：

> 在将来的某个时间执行给定的命令。该命令可以在新线程、池线程或调用线程中执行，由 Executor 实现决定。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T08:14:08.700

您的基本问题已得到解答，我只想评论`execute`vs. `submit`。

基本上，它们都不能保证立即执行您的代码。如果池中的任务超载，则必须等到队列中的所有先前任务完成后才能执行任务。

现在，您可以看到方法签名的不同之处：

```
void execute(Runnable command) 
public Future<?> submit(Runnable task) 
```

因此，提交允许您获取`Future`参考，您可以稍后使用它来等待任务完成或根据需要取消它。

额外的，为了彻底弄清楚，看看[AbstractExecutorService 的源代码](http://www.docjar.com/html/api/java/util/concurrent/AbstractExecutorService.java.html)，我们可以看到它的实现`submit`实际上是：

```
103       /**
104        * @throws RejectedExecutionException {@inheritDoc}
105        * @throws NullPointerException       {@inheritDoc}
106        */
107       public Future<?> submit(Runnable task) {
108           if (task == null) throw new NullPointerException();
109           RunnableFuture<Void> ftask = newTaskFor(task, null);
110           execute(ftask);
111           return ftask;
112       } 
```

在第 110 行中，您可以看到它实际上调用`execute`了 ，因此它们的功能是相同的，以部分为模`Future`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T08:07:56.910

`I am not doing any exclusive executor.submit(future)`

`Executor`接口有一个方法`execute`作为`Runnable`参数[。FutureTask](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Future.html)类是 Future 的实现，它实现了 Runnable，因此可以由 Executor 执行。

所以你可以运行下面的代码

`executor.execute(future);`

# android - Android中的数据库检索导致错误

> ID：11408874
> 
> 赞同：1
> 
> 时间：2012-07-10T07:52:46.047
> 
> 标签：android, database

在我的应用程序中，我必须从数据库中检索数据。我的要求是我必须通过满足我必须对组列应该是家庭的总列求和的条件来检索数据。

我写了这个查询：

```
public String addhousehold()
{
    long sum = 0;

    Cursor cursor1 = db.rawQuery("SELECT SUM("+(KEY_TOTAL)+") FROM incomexpense WHERE groups=Income", null);

     if(cursor1.moveToFirst())
     {
         sum = cursor1.getLong(0);
     }

     cursor1.close();

     String housetotal=String.valueOf((long)sum);       
     System.out.println("house="+housetotal);

     return housetotal; 
} 
```

但我收到一个错误：

> java.lang.RuntimeException：无法启动活动 ComponentInfo{com.budget1/com.budget1.Report}：
> android.database.sqlite.SQLiteException：没有这样的列：收入：，编译时：SELECT SUM(total) FROM incomexpense WHERE groups =收入。
> 由于我是新手，请帮助我。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T07:54:28.837

查询应该是：

```
Cursor cursor1 = db.rawQuery(
         "SELECT SUM("+(KEY_TOTAL)+") FROM incomexpense WHERE groups='Income'",null); 
```

如果（收入）是一个字符串..如果不是，那么您应该确保该列存在..

# sql-server - 递归 SUM Sql 服务器

> ID：11408878
> 
> 赞同：5
> 
> 时间：2012-07-10T07:52:52.940
> 
> 标签：sql-server, sum, common-table-expression

我需要在 SQL Server 中进行递归求和。我想要一个存储过程，我可以在其中传递父 ID，然后返回链接到该父 ID 的所有孩子（和孩子的孩子）的总数。

这是我到目前为止所拥有的

```
IF object_id('tempdb..#Averages') IS NOT NULL
BEGIN
   DROP TABLE #Averages
END

CREATE TABLE #Averages
(
ID INT PRIMARY KEY CLUSTERED IDENTITY(1,1),
Name VARCHAR(255),
ParentID int,
Value INT
)

INSERT INTO #Averages(Name,ParentID,Value)VALUES('Fred',NULL,1)
INSERT INTO #Averages(Name,ParentID,Value)VALUES('Bets',NULL,1)

INSERT INTO #Averages(Name,ParentID,Value)(SELECT 'Wynand',ID,21 FROM #Averages WHERE      Name = 'Fred'  )

INSERT INTO #Averages(Name,ParentID,Value)(SELECT 'Dewald',ID,27 FROM #Averages WHERE     Name = 'Fred'  )
INSERT INTO #Averages(Name,ParentID,Value)(SELECT 'Katelynn',ID,1 FROM #Averages WHERE Name = 'Dewald'  )

INSERT INTO #Averages(Name,ParentID,Value)(SELECT 'Jacques',ID,28 FROM #Averages WHERE Name = 'Bets'  )
INSERT INTO #Averages(Name,ParentID,Value)(SELECT 'Luan',ID,4 FROM #Averages WHERE Name = 'Jacques'  )
INSERT INTO #Averages(Name,ParentID,Value)(SELECT 'Ruben',ID,2 FROM #Averages WHERE Name = 'Jacques'  )

;WITH Personal AS
(
SELECT N=1, ID,Name,ParentID,Value
FROM #Averages 
WHERE ParentID IS NULL
UNION ALL
SELECT N+1, Av.ID,Av.Name,Av.ParentID,Av.Value
FROM #Averages Av
INNER JOIN  Personal P ON P.ID = Av.ParentID
)

SELECT Name,
    SUM(Value) as Total
FROM Personal
WHERE N<=3
GROUP BY Name 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T08:33:52.397

这是实现您想要的一种方法，尽管它与您上面的方法略有不同：

[SQLFiddle](http://www.sqlfiddle.com/#!3/2a0d3/31)

```
Create Table #Ancestors (
    ID int
  ,  Name VARCHAR(255)  
  ,  ParentID int
  ,  AncestryCompleteTF tinyint
  ,  Ancestors varchar(max)
  ,  TotalValue int    
)

INSERT INTO #Ancestors
SELECT
    ID
  , Name
  , ParentID
  , CASE ISNULL(ParentID, 0)
     WHEN 0 THEN 1
     ELSE 0
    END
  , CONVERT(VARCHAR, ISNULL(ParentID, ''))
  , Value
FROM
   Averages

WHILE EXISTS (SELECT * FROM #Ancestors WHERE AncestryCompleteTF = 0) 
BEGIN
  UPDATE C SET 
    C.Ancestors = P.Ancestors + ',' + CONVERT(VARCHAR, P.ID),
    C.AncestryCompleteTF = 1,
    C.TotalValue = P.TotalValue + C.TotalValue
  FROM #Ancestors C 
    INNER JOIN #Ancestors P ON (C.ParentID = P.ID) 
    AND P.AncestryCompleteTF = 1
END

SELECT 
  Name
, TotalValue 
FROM 
  #Ancestors 
```

基本上我创建了一个临时表，并使用一个while循环来不断更新已经计算了父行的行的总数（因为这只是将当前行的总数添加到父行的总数的情况）直到所有行已经计算过了。ParentID 为 null 的行设置为开始完成，因此将首先计算它们的直接后代，然后是这些行的后代等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T08:53:35.650

玩了一会儿后，我想我明白了。我添加了一个顶级 ID，我在 CTE 的根中设置了它。然后只需为所有递归添加顶级 id。

最后我只求和，基本上使用 TopLevelId 加入顶级表。

```
IF object_id('tempdb..#Averages') IS NOT NULL
BEGIN
   DROP TABLE #Averages
END

CREATE TABLE #Averages
(
    ID INT PRIMARY KEY CLUSTERED IDENTITY(1,1),
    Name VARCHAR(255),
    ParentID int,
    Value INT
)

 INSERT INTO #Averages(Name,ParentID,Value)VALUES('Fred',NULL,1)
 INSERT INTO #Averages(Name,ParentID,Value)VALUES('Bets',NULL,1)

 INSERT INTO #Averages(Name,ParentID,Value)(SELECT 'Wynand',ID,21 FROM #Averages WHERE Name = 'Fred'  )

 INSERT INTO #Averages(Name,ParentID,Value)(SELECT 'Dewald',ID,27 FROM #Averages WHERE Name = 'Fred'  )
 INSERT INTO #Averages(Name,ParentID,Value)(SELECT 'Katelynn',ID,1 FROM #Averages WHERE Name = 'Dewald'  )

 INSERT INTO #Averages(Name,ParentID,Value)(SELECT 'Jacques',ID,28 FROM #Averages WHERE Name = 'Bets'  )
 INSERT INTO #Averages(Name,ParentID,Value)(SELECT 'Luan',ID,4 FROM #Averages WHERE Name = 'Jacques'  )
 INSERT INTO #Averages(Name,ParentID,Value)(SELECT 'Ruben',ID,2 FROM #Averages WHERE Name = 'Jacques'  )

;WITH Personal AS
(
    SELECT N=1, 
        ID,
        Name,
        ParentID,
        Value,
        TopLevelID =ID
    FROM #Averages 
    WHERE ParentID IS NULL

    UNION ALL

    SELECT N+1, 
        Av.ID,
        Av.Name,
        Av.ParentID,
        Av.Value,
        TopLevelID =P.TopLevelID
    FROM #Averages Av
    INNER JOIN  Personal P ON P.ID = Av.ParentID
)

SELECT SUM(P.Value) AS Total,
        A.Name
FROM Personal P
INNER JOIN #Averages A on A.ID = P.TopLevelID
GROUP BY A.Name 
```

# iphone - 粒子系统中的粒子行为怪异

> ID：11408880
> 
> 赞同：0
> 
> 时间：2012-07-10T07:53:05.550
> 
> 标签：iphone, cocos2d-iphone, particle-system

我有一个节点（名为“地形”），我偏移了这个节点，以便我的主要游戏对象（我的角色）保持在屏幕的中心。我这样做：

```
 [_terrain setOffsetX:offsetX andOffsetY:offsetY*4/3]; 
```

问题是在我的地形上，我有一个粒子系统。当移动我的角色（从而抵消地形）时，发射的粒子不会保持它们的上行轨迹。看起来发射的粒子是相移的。这是我包含在地形类中的粒子系统代码（即 self 指的是地形本身）：

```
 emitterSnow = [CCParticleSnow node];
   emitterSnow.position = startPoint;
    [emitterSnow setAnchorPoint:CGPointZero];
    [self addChild:emitterSnow z:0 tag:windIndicatorTag];

    CGPoint p = emitterSnow.position;
    emitterSnow.position = ccp( p.x + width/2 , p.y);
    emitterSnow.life = 1;
    emitterSnow.lifeVar = .3f;
    [emitterSnow setIsRelativeAnchorPoint:YES];

     emitterSnow.posVar = CGPointMake(width/2,0);

    // gravity
    emitterSnow.gravity = ccp(0,1000);

    // speed of particles
    emitterSnow.speed = 140;
    emitterSnow.speedVar = 20;

    ccColor4F startColor = emitterSnow.startColor;
    startColor.r = 0.9f;
    startColor.g = 0.9f;
    startColor.b = 0.9f;
    emitterSnow.startColor = startColor;

    ccColor4F startColorVar = emitterSnow.startColorVar;
    startColorVar.b = 0.1f;
    emitterSnow.startColorVar = startColorVar;

    emitterSnow.emissionRate = 30;

    emitterSnow.texture = [[CCTextureCache sharedTextureCache] addImage: @"bubble2.png"]; 
```

如何让我的粒子从我的粒子系统源向上移动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T07:58:25.117

尝试设置`positionType`(a `tCCPositionType`)。使用`kCCPositionTypeFree`（默认之一）自由移动粒子。或用于`kCCPositionTypeGrouped`在一组中移动它们。

# asp.net-mvc - 是否可以为 MVC 站点创建 Dot Net Nuke 部分视图？

> ID：11408881
> 
> 赞同：1
> 
> 时间：2012-07-10T07:53:05.680
> 
> 标签：asp.net-mvc, content-management-system, dotnetnuke

我正在研究将第三方组件集成到我们基于 MVC 的站点中的可能性。原因是我们想要文档处理和搜索功能，而不是从头开始实现它的全部工作。

我不确定如何进行，我想知道你们中是否有人对 Dot Net Nuke 有任何经验。是否可以在云中运行 Dot Net Nuke 实例并创建提供文档模块（类似 cms）和搜索模块的部分视图？

是否有任何其他第三方系统与云兼容并提供用于处理文档、安全性和全文搜索的 API？

# javascript - IE9 SCRIPT87：XDomainRequest 上的参数无效

> ID：11408885
> 
> 赞同：2
> 
> 时间：2012-07-10T07:53:21.403
> 
> 标签：javascript, internet-explorer-9, explorer, xdomainrequest

我正在 Internet Explorer 9 上测试我的应用程序，该应用程序在 Chrome、Firefox、Opera 和 Safari 上运行良好，但在 IE 中......好吧，在这段代码中：

```
this.xhr.open("PUT",url,true); 
```

IE 显示“SCRIPT87：无效参数”。我附上一张图片： ![在此处输入图像描述](../Images/795e2d1d0f7a698d62b681887494e13e.png)

xhr 元素是一个 XDomainRequest() 对象，url 属性是一个正确的 url。有人知道IE9在说什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T09:23:21.673

好吧，我认为我的具有跨源请求的应用程序使用 api restful（使用 get、post、put 和 delete 方法）将与 IE（显然与 8 和 9 版本）“兼容”，我认为 XDomainRequest 具有相同的实现cors 比 XMLHttpRequest 多，但仅此而已，对于 XDomainRequest，我们有很多限制：仅运行“get”和“post”方法，没有自定义标头等。[这里](http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx)是 ie8 和 9 问题的链接。

似乎 ie10 将有一个带有 XMLHttpRequest 的 cors 实现。

# c++ - 哪个更好：派生还是包含？

> ID：11408889
> 
> 赞同：-1
> 
> 时间：2012-07-10T07:53:34.613
> 
> 标签：c++, oop

> **可能重复：**
> [更喜欢组合而不是继承？](https://stackoverflow.com/questions/49002/prefer-composition-over-inheritance)

我最近几次偶然发现的一个一般性问题：与包含相比，派生有哪些优点和缺点？

更具体：

```
class A : public std::vector<int> {}; 
```

或者

```
class B {public: std::vector<int> elem;} 
```

?

当然，在生产代码中，我会声明`elem`为私有并实现公共 getter 和 setter。

有一般建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T07:56:05.590

一般建议不要从标准库容器派生。另请参阅[此问题的答案](https://stackoverflow.com/q/1073958/1025391)。

这个问题的第一个答案给出了关于[Liskov 替换原则](http://en.wikipedia.org/wiki/Liskov_substitution_principle)的注释，这可能是你的答案。

> **可替代性**是面向对象编程的一个原则。它指出，在计算机程序中，如果 S 是 T 的子类型，则类型 T 的对象可以用类型 S 的对象替换（即，类型 S 的对象可以替换类型 T 的对象）而不改变任何该程序的理想属性（正确性、执行的任务等）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T08:02:14.247

组合意味着`has-a`关系，而继承意味着`is-a`关系。

虽然您应该选择更能反映这种关系的那个，但一般建议使用`composition`.

这个[维基百科页面](http://en.wikipedia.org/wiki/Composition_over_inheritance)提供了一些解释。

这里也有一个类似的[问题](https://stackoverflow.com/questions/49002/prefer-composition-over-inheritance)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T07:56:42.917

始终努力将最小的耦合施加到您的客户身上。您公开的实体越多，可以绑定到您的库的客户端代码就越复杂，并且提供未来更改和中断依赖项变得越困难。

并且通常从不派生自任何标准库容器，这些容器并不意味着基类。

* * *

相关参考：

*   [耦合（计算机编程）](http://en.wikipedia.org/wiki/Coupling_%28computer_programming%29)（维基百科文章）
*   [更喜欢组合而不是继承。](http://www.artima.com/cppsource/codestandards3.html)
*   [小型、正交和松耦合：避免继承](http://wiki.dlma.com/cplusplus%3aguidelines#avoid-inheritance)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T07:56:50.750

您需要根据您当前的任务、需求、要求等做出选择。

你提出的问题太笼统了。但是，通常，从 std 类派生不是一个好主意。

另外，检查[这个](https://stackoverflow.com/questions/3929542/derive-or-inject)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T07:57:19.493

我不确定这个问题是否与从 stl 类派生有关，但一般来说，如果类是相关的并且意义完整，我会去派生，以 Car、engine 和 Hybrid Car 类为例

混合动力汽车从汽车内部的汽车和发动机（遏制）派生出来更有意义。在继承的情况下，您可以使用强大的虚函数。

如果要遵循 Open-Close 原则，通常使用继承

# xslt - XSL 将每个属性连接起来

> ID：11408890
> 
> 赞同：-1
> 
> 时间：2012-07-10T07:53:36.377
> 
> 标签：xslt, xslt-1.0

我有看起来像这样的xml：

```
<field index="1" name="my_field_1" type="String">
<value>Value of Field 1</value>
</field>

<field index="2" name="my_field_2" type="String">
<value>Value of Field 2</value>
</field>

<field index="3" name="my_field_3" type="String">
<value>Value of Field 3</value>
</field> 
```

稍后，对于每个我迭代这些字段，我尝试获取字段的名称（相同）并将其与索引属性连接（这取决于可能变化的元素数量）。

我试过这个（我把撇号放在变量中，因为我不知道如何逃避它）。

```
<xsl:variable name="currentIndex" select="@index"></xsl:variable>
            <xsl:variable name="apostrof">'</xsl:variable>

<xsl:value-of select="concat(
'//field[@name=',
$apostrof,
'sar_account_entrepreneur_name_',
@index,
$apostrof,
']/value')"/> 
```

问题是，这不是选择值，而是输出字符串 my_field_1 例如。输出应该是字段 1 的值、字段 2 的值等。我需要的是动态连接名称属性和索引属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T08:29:22.293

以下变换

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:transform version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:template match="/">
        <xsl:for-each select="field">
            <xsl:value-of select="value" />
        </xsl:for-each>
    </xsl:template>
</xsl:transform> 
```

应用于此输入

```
<?xml version="1.0" ?>
<root>
<field index="1" name="my_field_1" type="String">
    <value>Value of Field 1</value>
</field>

<field index="2" name="my_field_2" type="String">
    <value>Value of Field 2</value>
</field>

<field index="3" name="my_field_3" type="String">
    <value>Value of Field 3</value>
</field>
</root> 
```

产生所需的输出

```
<?xml version="1.0"?>
Value of Field 1Value of Field 2Value of Field 3 
```

我希望这有帮助。否则在评论中给我一个提示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T13:21:47.913

答案很简单：

此代码采用索引 attr 并将其连接到名称。

# powershell - 如何使用 power shell 获取 Get-WMIObject -Class Win32_PerfFormattedData 的值

> ID：11408894
> 
> 赞同：0
> 
> 时间：2012-07-10T07:53:48.950
> 
> 标签：powershell

```
$wmi = Get-WMIObject -Class Win32_PerfFormattedData_Tcpip_NetworkInterface -ComputerName $computer -Namespace $namespace. 
```

使用这个 power shell 脚本如何获取参数的值？即我怎样才能得到这些的价值：

*   `BytesReceivedPerSec`
*   `BytesSentPerSec`
*   `BytesTotalPerSec`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T08:18:08.460

这还不够吗？

```
$wmi = Get-WMIObject -Class Win32_PerfFormattedData_Tcpip_NetworkInterface -ComputerName $computer | select Name, BytesReceivedPerSec, BytesSentPerSec, BytesTotalPerSec 
```

您还可以使用 .NET 进行统计总计：

```
$wmi = [System.Net.NetworkInformation.NetworkInterface]::GetAllNetworkInterfaces() | foreach {$_.name; $_.GetIPv4Statistics()} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T08:17:31.437

```
Get-WMIObject -Class Win32_PerfFormattedData_Tcpip_NetworkInterface -ComputerName $computer -Namespace $namespace 
| Select BytesReceivedPerSec, BytesSentPerSec, BytesTotalPerSec 
```

# c# - SHA1 哈希转换为无效的 xml

> ID：11408901
> 
> 赞同：0
> 
> 时间：2012-07-10T07:54:30.967
> 
> 标签：c#, xml, sha1

我有一本字典，我把它转成 XML，然后用 SHA1 散列。

```
string xmlMessageCode = inputDictionary.ToXML(); //Extension method.

UnicodeEncoding UE = new UnicodeEncoding();
SHA1Managed hasher = SHA1Managed();
byte[] hashString = Encoding.UTF8.GetBytes(xmlMessageCode.ToCharArray());
byte[] hashCode = hasher.ComputeHash(hashString);

string computedHashString = UTF8Encoding.UTF8.GetString(hashCode);

return computedHashString; 
```

之后，我将值放入对象属性中，然后将这些对象的集合序列化为 XML：

```
XmlSerializer ser = new XmlSerializer(typeof(T));
XmlWriterSettings settings = new XmlWriterSettings()
{
Indent = false,
OmitXmlDecleration = false,
Encoding = Encoding.UTF8
};

using(StringWriter sr = new StringWriter)
{
using(XmlWriter xmlr = XmlWriter.Create(sr, settings))
{
ser.Serialize(sr, newList);
}
return sr.ToString();
} 
```

这会生成 XML，但是当我尝试验证生成的 XML 时，我在从散列字符串创建的属性中得到一个错误。

解决此问题的最佳方法是什么？我应该去掉无效字符还是有更优雅的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T07:58:14.397

XML 是一种基于文本的表示形式——您不能将二进制信息直接嵌入其中。

因此，您必须将二进制数据转换为文本 - 通常 Base64 编码用于此目的。

因此而不是

```
string computedHashString = UTF8Encoding.UTF8.GetString(hashCode); 
```

你应该使用

```
string computedHashString = System.Convert.ToBase64String(hashCode); 
```

# core-audio - UISlider跟随音量，不工作

> ID：11408903
> 
> 赞同：1
> 
> 时间：2012-07-10T07:54:47.947
> 
> 标签：core-audio, avaudioplayer, audio

我的 iPhone 应用程序出现声音问题。我有一个 UISlider 对象，用于调整音量。

当它出现时，我使用基于以下行的代码来设置滑块的初始值：

```
AudioSessionGetProperty ('chov',&dataSize,&volume); 
```

这很好用。然后，当我激活设备的硬件音量按钮时，我希望滑块相应地移动。但是这部分基于这种代码：

```
AudioSessionPropertyID volumeChangeID=kAudioSessionProperty_CurrentHardwareOutputVolume;
AudioSessionAddPropertyListener(volumeChangeID,handleSoundVolume,self); 
```

效果不太好。我可以看到回调函数：handleSoundVolume 仅在播放某些声音时才被调用，否则不会被调用。另一方面，AudioSessionGetProperty 提供的值始终是正确的，与是否播放声音无关。这是为什么？

我认为 AudioSessionGetProperty 和 AudioSessionAddPropertyListener 正在“一起”工作，但似乎并非如此。

看看 iPod touch 上默认的 Music 应用，似乎我想做的事情是很有可能的。

感谢您提供任何信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T23:47:15.590

我看到了同样的问题，回调对我来说根本不起作用。

最好的解决方案是为属性 AVSystemController_SystemVolumeDidChangeNotification 添加一个观察者到 NSNotificationCenter。

```
NSNotificationCenter * center = [NSNotificationCenter defaultCenter];
[center addObserver:self
           selector:@selector(volumeChanged:)
               name:@"AVSystemController_SystemVolumeDidChangeNotification"
             object:nil]; 
```

你有方法

```
- (void)volumeChanged:(NSNotification*)notification
{
     float volume = [[[notification userInfo]
                        objectForKey:@"AVSystemController_AudioVolumeNotificationParameter"]
                      floatValue];
} 
```

顺便说一句，我建议您不要使用“chov”，而是应该使用常量

```
kAudioSessionProperty_CurrentHardwareOutputVolume 
```

# objective-c - NSString 到 NSDate 返回错误的日期

> ID：11408911
> 
> 赞同：1
> 
> 时间：2012-07-10T07:54:59.870
> 
> 标签：objective-c, ios, nsstring, nsdate, nsdateformatter

我尝试将我的对象转换`NSString`为`NSDate`对象，但`NSDateFormatter`返回一个奇怪的值。

这是代码：

```
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
[dateFormat setDateFormat:@"yyyy-MM-dd HH:mm"]; 
NSDate *date = [dateFormat dateFromString:@"2012-08-15 00:00"];
[dateFormat release]; 
```

`date`值为`2012-08-14 21:00 +0000`。`NSString`价值和价值之间有3小时的差异`NSDate`。我想我错过了一些东西，但我不知道是什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T08:10:11.777

这就是我使用的：

```
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
[dateFormat setDateFormat:@"yyyy-MM-dd HH:mm:ss ZZZ"]; 

NSDate *date = [dateFormat dateFromString:@"2012-08-15 00:00:00 +0000"];
NSLog(@"\n\n  DATE: %@ \n\n\n", date); 
```

是时区，因此`+0000`请确保使用您的时区，例如`+0400`.

编辑：如果你不能改变字符串，你可以使用这个代码来做到这一点：

```
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
[dateFormat setDateFormat:@"yyyy-MM-dd HH:mm"]; 
[dateFormat setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]];

NSDate *date = [dateFormat dateFromString:@"2012-08-15 00:00"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T08:05:33.790

我知道 NSDate 持有格林威治时间，所以如果你在莫斯科时区，一切都是正确的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-10T04:15:49.193

在 NSDate 的目标 c 中，如果您没有设置 setTimeZone，NSDate 会将默认时区作为 localTimeZone。因此，如果您需要获取以 NSString 字符串格式提供的确切日期，则需要将 TimeZone 设置为 UTC。按照示例代码进行操作，我想它会对您有所帮助。

```
NSDateFormatter *loacalformatter=[[NSDateFormatter alloc]init];
[loacalformatter setDateFormat:@"yyyy-MM-dd HH:mm:ss"];
NSDate *localDate =[loacalformatter dateFromString:@"2012-08-15 00:00"];
NSLog(@"localDate :%@",localDate);

NSDateFormatter *UTCformatter=[[NSDateFormatter alloc]init];
[UTCformatter setTimeZone:[NSTimeZone timeZoneWithName:@"UTC"]];
[UTCformatter setDateFormat:@"yyyy-MM-dd HH:mm:ss"];
NSDate *UTCDate =[UTCformatter dateFromString:@"2012-08-15 00:00"];
NSLog(@"UTCDate :%@",UTCDate);
UTCDate :2012-08-15 00:00 +0000 (GMT+00:00) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-10T08:19:45.647

正如评论中所建议的，如果您收到的日期是 UTC，那么您需要将其转换为您当地的时区。Apple 建议您在显示日期时始终使用正确配置的 NSDateFormatter 来处理本地化问题。

下面是一些将 NSDate 转换为 NSString 的示例代码：

```
NSDate *date = // initialised elsewhere

NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
dateFormat.locale = [NSLocale currentLocale];
dateFormat.timeZone = [NSTimeZone localTimeZone];
dateFormat.timeStyle = NSDateFormatterShortStyle;
dateFormat.dateStyle = NSDateFormatterShortStyle;    
dateFormat.locale = [NSLocale currentLocale];
NSString *dateAsString = [dateFormat stringFromDate:date]; 
```

# ruby - Carrierwave：用于动态调整大小的伪版本

> ID：11408914
> 
> 赞同：1
> 
> 时间：2012-07-10T07:55:23.803
> 
> 标签：ruby, carrierwave

为了能够拥有动态图像大小（是的。我知道）我想出了以下内容`version`，它只是在每个请求上创建一个临时文件（日本人，愚蠢的我知道——[基于 args 将文件存储在缓存中？]）

```
version :resized do 
  def url(*args) 
    width,height,gravity,region = args[0],args[1],args[2],args[3]
    manipulate! do |img|
      cols, rows = img[:dimensions]
      img.combine_options do |cmd|
        if width != cols || height != rows
          scale = [width/cols.to_f, height/rows.to_f].max
          cols = (scale * (cols + 0.5)).round
          rows = (scale * (rows + 0.5)).round
          cmd.resize "#{cols}x#{rows}"
        end
        cmd.gravity gravity
        cmd.extent "#{width}x#{height}#{region}" if cols != width || rows != height
      end
      img = yield(img) if block_given?
      img
    end 
    convert "jpg"
    super() 
  end 
end 
```

我遇到的问题是，由于我没有`process`这个版本，它准复制了原始版本并将其用于“按需”操作。如果那个原始文件是一个 100MB 的 tiff，这会变得一团糟！所以现在我正在寻找一种方法来阻止该版本实际创建文件并使用不同版本的文件进行“按需”操作。有任何想法吗 ？

# libavcodec - 使用 libavcodec 的 mpeg1 编码性能低下

> ID：11408921
> 
> 赞同：1
> 
> 时间：2012-07-10T07:55:48.747
> 
> 标签：libavcodec

我正在使用 mpeg1 编解码器来创建我的高清和标清内容的代理视频。Mpeg1 分辨率和比特率是；高清视频代理：704x576 4.5 Mbit 标清视频代理：352x288 1.5 Mbit

我的视频参数是这样的；如何获得更多性能来更改任何参数...

此致，

```
AVCodecContext *c = &m_OutputCodecCtxVideo;
avcodec_get_context_defaults2( c, AVMEDIA_TYPE_VIDEO );
c->codec_id = CODEC_ID_MPEG1VIDEO;
c->codec_type = AVMEDIA_TYPE_VIDEO;
c->pix_fmt = PIX_FMT_YUV420P; 
if( bHD ){
    c->width = 704; 
    c->height = 576; 
    c->sample_aspect_ratio.num = 16;
    c->sample_aspect_ratio.den = 11;    
    c->bit_rate = 4500000; 
}
else{
    c->width = 352; 
    c->height = 288; 
    c->sample_aspect_ratio.num = 12;
    c->sample_aspect_ratio.den = 11;
    c->bit_rate = 1500000; 
}
c->time_base.num = 1; 
c->time_base.den = 25; 
c->gop_size = 15; 
c->max_b_frames = 2; 
//      Needed to avoid using macroblocks in which some coeffs overflow.
//      This does not happen with normal video, it just happens here as
//      the motion of the chroma plane does not match the luma plane.
c->mb_decision = 2;
// some formats want stream headers to be separate
if( m_pFormatCtxDst->oformat->flags & AVFMT_GLOBALHEADER )
    c->flags |= CODEC_FLAG_GLOBAL_HEADER;

m_OutputCodecCtxVideo.thread_count = 0; 
```

# android - TextView.setMaxLines 不工作？

> ID：11408922
> 
> 赞同：4
> 
> 时间：2012-07-10T07:55:49.173
> 
> 标签：android, android-layout

在我的应用程序中，我有一个屏幕，我在其中显示一些文本，然后是一张照片。文本的长度是可变的（有时根本没有，有时很多），所以我想设置它，这样文本永远不会占用超过几行（但可以滚动），为下面的图像留出足够的空间。

这部分的视图组件是以编程方式创建的，并且我已将代码调整为具有以下内容（目前在我的文本设置方法中，但如果它在初始视图创建代码中也会发生同样的事情）

```
public void SetDescription(String description)
{
    mTxtDescription.setText(Html.fromHtml(description));
    mTxtDescription.setClickable(true);
    mTxtDescription.setMaxLines(5);
    mTxtDescription.setLines(5); //this makes no difference either!
    mTxtDescription.setSingleLine(false);
    mTxtDescription.setScrollbarFadingEnabled(true);
    mTxtDescription.setScrollBarStyle(VERTICAL);
    mTxtDescription.setMovementMethod(ScrollingMovementMethod.getInstance());
    mTxtDescription.invalidate(); //adding this made no difference...
} 
```

但是它不起作用 - 长文本仍然填满整个屏幕，并且图像由于被推到 0 的高度而消失了。我怎样才能让文本永远不超过 5 行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T08:02:44.213

尝试删除对`setSingleLine`. 并使用`setInputType(InputType.TYPE_TEXT_FLAG_MULTI_LINE)`. 它还会将此调用放在`setMaxLines`and`setLines`调用之前以确保。

注意：`setLines`覆盖 和 的`setMaxLines`设置`setMinLines`。

`TextView`围绕如何显示多个、椭圆等的各种调用存在许多问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-13T07:36:59.333

setSingleLine(false) 似乎重置了 setMaxLines 命令。尝试将 setSingleLine 命令移到 setText 之前。这对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T08:14:26.833

下面的代码对我来说工作正常

```
 txt = (TextView)findViewById(R.id.textview);
   txt.setMaxLines(5);
   txt.setMovementMethod(new ScrollingMovementMethod());

   txt.setScrollContainer(true);
   txt.setText("Example Text");
   txt.setTextColor(Color.WHITE);
   txt.setScrollbarFadingEnabled(true); 
```

在 xml 里面的 textview

```
 android:scrollbars="vertical" 
```

# css - 全局样式覆盖特定组件样式

> ID：11408927
> 
> 赞同：0
> 
> 时间：2012-07-10T07:56:12.990
> 
> 标签：css, actionscript-3, flex4

我有以下问题。我有一个带有 css 文件的 flex 4.1 项目，其中包含以下组件：

```
global {
    color: #FFFFFF;
    font-family: Verdana;
    font-anti-alias-type: advanced;
    modal-transparency-color:000000;
    focusColor: #b3001e;
    errorColor: #b3001e; } 
```

然后我有文本输入的特定样式：

```
s|TextInput, s|NumericStepper, astra|IPv4AddressInput {
    color: #000000;
    disabledColor: #555;
    contentBackgroundColor: #e5e5e8;
    borderColor: #000000; } 
```

但有时会发生 s:textInput 有问题。您输入的字符的颜色有时具有全局样式的颜色。所以你期望的是黑色字体，但你看到的是白色字体。

有谁知道如何解决这个问题或解释为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T08:08:19.477

您可以使用以下命令强制它覆盖：

```
color: #000000 !important; 
```

# html - XHTML W3C 合规性，src 属性中的多个信息

> ID：11408930
> 
> 赞同：0
> 
> 时间：2012-07-10T07:56:21.463
> 
> 标签：html, xhtml, w3c-validation

我们正在构建一个图像轮播，它显示可点击的缩略图，点击后会显示实际图像。因此，我们需要两个 url 都出现在 Html 中。由于 img 标签中没有定义“actualImageUrl”属性，我们发现我们可以像这样构建缩略图 url `/thumb.png?altUrl=actualImageUrl.png`：。服务器不关心actualImageUrl 查询字符串参数，我们可以使用javascript 来解析scr 属性并找出actualImage Url。

W3C 的有效性如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T07:58:25.753

更改`src`属性的 URL 是完全有效的 - 但是您可以使用`data-`属性 - 新的 HTML5 （尽管该 doctype 不是使用它们的要求），其目的正是如此，从规范：

> 自定义数据属性旨在存储页面或应用程序私有的自定义数据，没有更合​​适的属性或元素。

[自定义属性的 w3 规范](http://www.w3.org/TR/2011/WD-html5-20110525/elements.html#embedding-custom-non-visible-data-with-the-data-attributes)

**注意**- 您可以[在此处测试验证](http://validator.w3.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T08:32:33.500

任何东西作为`src`属性值都是有效的，在 XHTML 中表示“有效”（一种正式的事物）。在这样的值中包含查询部分并在客户端脚本中使用它也是正确的。

但这可能是不必要的复杂。当您使用客户端 JavaScript 时，您可以将 URL 包含在 JavaScript 数组或对象中，而不是将它们放在 HTML 标记中的任何位置。例如，您可以使用具有缩略图 URL 作为属性名称和完整图像 URL 作为相应值的对象，例如

```
var fullImage = { 'thumb.png': 'actualImageUrl.png', ... } 
```

然后，您将使用此对象在单击缩略图时获取完整的图像 URL。

对于更健壮的解决方案，即使在禁用 JavaScript 时也能工作，您需要在服务器端生成代码，`a`围绕元素生成`img`元素。

# c++ - 使用 std::tuple 作为 std::unordered_map 的键

> ID：11408934
> 
> 赞同：11
> 
> 时间：2012-07-10T07:56:47.353
> 
> 标签：c++, stl, compiler-errors, tuples, unordered-map

使用下面的代码，我在 MSVC 中得到一个非常令人困惑的错误，这似乎表明密钥类型（std::tuple）正在转换为 std::string。

```
#include <iostream>
#include <string>
#include <tuple>
#include <utility>
#include <unordered_map>

typedef std::tuple<std::string,int,char> key_t;

struct key_hash : public std::unary_function<key_t, std::size_t>
{
   std::size_t operator()(const key_t& k) const
   {
      return std::get<0>(k)[0] ^ std::get<1>(k) ^ std::get<2>(k);
   }
};

struct key_equal : public std::binary_function<key_t, key_t, bool>
{
   bool operator()(const key_t& v0, const key_t& v1) const
   {
      return (
               std::get<0>(v0) == std::get<0>(v1) &&
               std::get<1>(v0) == std::get<1>(v1) &&
               std::get<2>(v0) == std::get<2>(v1)
             );
   }
};

struct data
{
   std::string x;
};

typedef std::unordered_map<key_t,data,key_hash,key_equal> map_t;

int main()
{
   map_t m;
   data d;
   d.x = "test data";
   m[std::make_tuple("abc",1,'X')] = d;
   auto itr = m.find(std::make_tuple(std::string("abc"),1,'X'));
   if (m.end() != itr)
   {
      std::cout << "x: " << itr->second.x;
   }
   return 0;
} 
```

错误：

```
Error   1   error C2664: 'std::basic_string<_Elem,_Traits,_Ax>::basic_string(const std::basic_string<_Elem,_Traits,_Ax> &)' : cannot convert parameter 1 from 'const std::tr1::tuple<_Arg0,_Arg1,_Arg2>' to 'const std::basic_string<_Elem,_Traits,_Ax> &'  c:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\tuple    127 1 
```

编译器：MS Visual Studio 2010

在 ideone 上，我得到以下更复杂的错误：

[http://ideone.com/yEv2j](http://ideone.com/yEv2j)

我似乎无法弄清楚我哪里出错了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T08:06:54.243

ideone 的问题是`key_t`已经存在：

```
prog.cpp:7:42: error: conflicting declaration 'typedef class std::tuple<std::basic_string<char>, int, char> key_t'
/usr/include/sys/types.h:123:17: error: 'key_t' has a previous declaration as 'typedef __key_t key_t' 
```

将您的重命名`key_t`为其他名称，或将其放入某些名称空间中。

在 g++ 和 clang++ 中[进行此更改后，您的代码可以正常工作。](http://ideone.com/RJglv)我相信这是 MSVC 中的一个错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T08:00:45.540

奇怪的。您的代码在 Visual Studio 2012 RC 中运行良好，输出为“x：测试数据”。

# asp.net - 当我尝试连接到另一台服务器时，用户名未知或密码错误

> ID：11408935
> 
> 赞同：1
> 
> 时间：2012-07-10T07:56:47.840
> 
> 标签：asp.net, security

我需要通过 vb.net 应用程序读取另一台服务器的文件。对于这种情况，我尝试通过 FileSream 读取目标文件。

另一个服务器中的目标文件是 (\dstServer\sheardFolder\dstFilename)。对于目标父路径，我键入 \dstServer\sharedFolder\Filename 并且此字符串包含在 FileSream 类中。当我运行此应用程序时，我收到带有此主题的 asp.net 错误（登录失败：未知用户名或密码错误）...！！！

我在目标服务器的父文件夹上设置了以下权限

1-用户拥有完全权限

2-每个人都有完全的权限

3- asp.net 拥有完全权限

注意：我在互联网上搜索并注意到在第一步中我应该连接到目标服务器，并且我的用户应该由目标服务器进行身份验证。

之后我使用了 .Net 安全类和 advapi32.dll ，Kernel32.dll 也模拟了ValidUser。我在 impersonateValidUser 函数中设置了目标服务器用户名和目标服务器密码以及目标服务器名称或 IP，但是当我运行应用程序时，我得到响应（失败），这意味着连接到目标服务器失败。

用于将用户与目标服务器连接的此应用程序位于以下 microsoft 示例代码中：http: [//support.microsoft.com/kb/842789](http://support.microsoft.com/kb/842789)

请给我提示。

提前致谢。

# jquery - jQuery：如何用表格（由多行组成）包装元素？

> ID：11408942
> 
> 赞同：0
> 
> 时间：2012-07-10T07:57:08.640
> 
> 标签：jquery

jQuery [.wrap()](http://api.jquery.com/wrap/)函数允许您使用一些自定义 HTML 包装任何匹配的元素。但是，该函数不允许您指出您希望在 HTML 中插入匹配元素的位置——***它总是插入到最里面的元素***中。

我需要用一个相当基本的表格包装一个 div（以便为其添加圆角），但唯一的问题是表格有两行，我希望我的元素出现在第二行。例如：

```
$("#my-div").wrap('<table> \
                        <tr> \
                            <td class="corner-topleft" colspan="2"></td> \
                            <td class="corner-topright"></td> \
                        </tr> \
                        <tr> \
                            <td class="corner-bottomleft"></td> \
                            <td class="DIV-SHOULD-APPEAR-HERE"></td> \
                            <td class="corder-bottomright"></td> \
                        </tr> \
                    </table>'); 
```

如果您尝试执行此脚本，则 wrap() 函数会自动将匹配的元素放置在**第一个表格单元格中**（即“corner-topleft”），因为这是“第一个最里面的元素”。

***如何使用 jQuery 将我的元素与上面的多行表一起包装？***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T08:02:11.470

您必须手动执行此操作，如下所示：

```
var div = $('#my-div');
var table = $('<table> \
                        <tr> \
                            <td class="corner-topleft" colspan="2"></td> \
                            <td class="corner-topright"></td> \
                        </tr> \
                        <tr> \
                            <td class="corner-bottomleft"></td> \
                            <td class="DIV-SHOULD-APPEAR-HERE"></td> \
                            <td class="corder-bottomright"></td> \
                        </tr> \
                    </table>');
table.find('.DIV-SHOULD-APPEAR-HERE').append(div.clone());
// Have to clone the div, because of the possible 
// circular reference in next line.
div.replaceWith(table); 
```

我没有测试它，但即使它不起作用，那么你应该理解这个想法。

# c# - 是否可以通过一个连接在.Net中实现异步Web服务调用？

> ID：11408945
> 
> 赞同：3
> 
> 时间：2012-07-10T07:57:11.670
> 
> 标签：c#, .net, web-services, asynchronous, long-polling

我有一个 .net 网络服务。它有一个方法可以执行需要 60 秒的任务，然后将字符串结果返回给客户端。

在某些网络特别是低带宽中，我在 40 秒内收到超时错误，然后 web 服务方法在 60 秒内完成任务。

现在我想实现 web 服务异步调用来支持低带宽网络。

在异步 Web 服务调用中，一种方法是使用运行 Web 服务方法并将 Web 服务结果返回到主线程的线程，如下图所示。

![在此处输入图像描述](../Images/b376b2b622cbbe3443a013b229977ba7.png)

但是这种方法无法解决我的问题，因为该线程使用一个连接。

我需要另一种方法。我的客户端调用 webservice 方法和方法中的一个线程开始其操作，当任务完成时，**1）webservice 发送一条消息，表明您的响应已准备好**，或者，**2）客户端检查 webservice 响应是否已准备好（我认为轮询机制）**，例如下图。

![在此处输入图像描述](../Images/5b1e46f7b21202d66fd155a5c584fff1.png)

如何在.net 中实现第二种方法？是否可以？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T10:13:45.900

在您的数据库上创建一个表来存储进程的状态。

```
UniqClientId, ProcessId, StartTime, EndTime and any other state if required. 
```

1.  客户端通过传递其唯一 ID 向服务器发送请求。
2.  服务器将进程记录在上表中并启动进程。
3.  客户端立即联系服务器（2-3 秒或 15-20 秒，具体取决于您的应用程序）以检查流程是否完成。
4.  如果客户端得到一个进程已经完成的响应，那么它会请求服务器发送响应。

在这两者之间，服务器执行以下工作。

1.  该过程完成后，将 EndTime 存储在上表中。
2.  提供通过检查上表发送进程状态的方法。
3.  提供发送响应的方法。

我不确定您的服务到底在做什么，但是如果您的进程的操作只是修改数据库上的某些表，那么实现这一点并不难。

# javascript - tinymce 失去插入符号位置

> ID：11408946
> 
> 赞同：6
> 
> 时间：2012-07-10T07:57:14.947
> 
> 标签：javascript, tinymce

我有一个 tinymce 自定义按钮，它可以切换文本区域旁边的表情符号 div。

```
onclick : function() {
  ed.focus();
  $('#my-input').toggleClass('with-emoticons');
  $('#emoticons').toggleClass('emo-visible');
} 
```

当我单击按钮时，表情符号 div 已显示，但插入符号从文本的末尾到开头。

单击自定义按钮时如何保留插入符号的位置？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T08:16:30.657

看起来你需要使用书签

```
onclick : function() {
  ed.focus();

  var bookmark = ed.selection.getBookmark();

  $('#my-input').toggleClass('with-emoticons');
  $('#emoticons').toggleClass('emo-visible');

  ed.selection.moveToBookmark(bookmark); 
} 
```

此处使用的书签类型是 html 书签，它表示编辑器 html 中的不可见跨度。getBookmark 函数也能够生成非 html 书签。为此，您可以致电 `ed.selection.getBookmark(2, true);`有关 tinymce 书签的更多信息，请查看[文档](http://www.tinymce.com/wiki.php/API3%3amethod.tinymce.dom.Selection.getBookmark)。

# ruby-on-rails - 在模型中设置不可访问属性的 Rails 最佳实践

> ID：11408951
> 
> 赞同：1
> 
> 时间：2012-07-10T07:57:48.330
> 
> 标签：ruby-on-rails, model, rspec, callback

我是 Rails 的新手，我正在考虑一个很好的解决方案，在保存模型之前在模型中设置受保护的属性，但我找不到正确的方法。

假设我有属于公司的用户，这些公司可以有很多客户。在保存新客户端之前，我想设置它的 company_id，从存储在会话中的 current_user 的 company_id 中获取它（我正在使用 Devise）。

我正在考虑使用模型回调，如 before_create 或其他，但后来我意识到我的 Rspec 模型测试可能会失败，因为运行它们时不会有 current_user ......

是否有设置必须自动设置的参数的最佳实践？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T08:01:06.943

只需将其设置在控制器中。

```
def create
  @new_user = User.new(params[:user])
  @new_user.company = current_user.company # <-- here
  if @new_user.save
    # ...
  else
    # ...
  end
end 
```

如果在模型回调中设置它，有一些缺点。

*   它打破了你的测试
*   它可能不是到处都需要的——想象一下你创建了一个管理前端。

# c# - 如何使此复选框在 GridView 中起作用？

> ID：11408952
> 
> 赞同：1
> 
> 时间：2012-07-10T07:57:54.273
> 
> 标签：c#, asp.net, gridview, sql-server-2008-r2

我是一名新的 ASP.NET 开发人员，并尝试使用 GridView 控件作为管理每个部门员工的一种方式。此 GridView 将显示数据库中员工表中的所有员工。现在，我面临以下问题：

仅供参考，我有以下数据库设计：

```
Employee Table: Username, Name, JobTitle, BadgeNo, IsActive, DivisionCode
Divisions Table: SapCode, DivisionShortcut 
```

***（IsActive 就像一个标志（位数据类型）来指示员工是否在分配中）***

**IsActive**将在 GridView 中显示为 Checkbox。如果选中，则表示真实，并且该员工存在于他的部门中。如果不勾选，则表示该员工不在该部门，应在 GridView 中隐藏。**那么该怎么做呢？另外，我想隐藏在编辑模式下出现在复选框旁边的（真）文本。也该怎样做？**

ASP.NET 代码：

```
<asp:TemplateField HeaderText="Is Active?">
                    <ItemTemplate>
                        <%# Eval("IsActive")%>
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:CheckBox ID="isActive" runat="server" Text='<%# Bind("IsActive")%>' />
                    </EditItemTemplate>
                </asp:TemplateField> 
```

**更新：**

我希望员工的所有信息都从 GridView 中隐藏，因为他处于非活动状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T08:02:17.053

尝试这个

```
<asp:CheckBox ID="isActive" runat="server" Visible='<%# Bind("IsActive")%>' Text='<%# Bind("IsActive")%>' /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T08:03:54.133

改用这个。已删除 text 属性，因此 IsActive 将不可见。可见性由 IsActive 标志控制

```
<asp:TemplateField HeaderText="Is Active?">
                    <ItemTemplate>
                        <%# Eval("IsActive")%>
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:CheckBox ID="isActive" runat="server" Checked='<%# Eval("IsActive").ToString().Equals("True")  %> />
                    </EditItemTemplate>
                </asp:TemplateField> 
```

**编辑**

如果您希望为非活动用户隐藏整行，最好在执行 databind() 操作之前从数据集中过滤非活动用户。你甚至可以在数据库端过滤它，但由于我不知道整个场景，我建议你这样做。

```
 DataSet filter = ds.Tables[0].Select("IsActive == 'True'");
    gridUser.DataSource = filter;
    gridUser.DataBind(); 
```

# html - 两个条件合二为一，css可能吗？

> ID：11408953
> 
> 赞同：0
> 
> 时间：2012-07-10T07:58:01.563
> 
> 标签：html, css, css-selectors

你好我有一个根据css的问题。

在我的导航栏中，我有 3 个链接。我用：

```
 #p1 {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 13px;
    line-height: 45px;
    font-weight: bolder;
    color: #999999;
    text-decoration: none;
} 
```

对于显示用户所在站点的状态。

如果用户滚动其他两个链接，我有这些：

```
 #p2 {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 13px;
    line-height: 45px;
    font-weight: bolder;
    color: #ECECEC;
    text-decoration: none;
}
#p2:hover {
    font-weight: bolder;
    color: #999999;
    cursor:default;
}
#p2:active {
    font-weight: lighter;
    color: #999999;
} 
```

好的，问题是我想在用户悬停 p2 时从 p1 更改颜色。意思是：

```
 #p2:hover {
    font-weight: bolder;
    color: #999999;
    cursor:default;
        #p1 {
        color: #f23;
        }
 } 
```

那可能吗？

多谢。

的HTML：

```
 <div id="nav">
      <div id="link"><p1>link1</p1></div>
      <div id="link"><p2>link2</p2></div>
      <div id="link"><p2>link3</p2></div>
      <div id="link"><div id="login"></div></div>
    </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T08:16:30.153

纯 CSS 无法做到这一点。

您可以做的是在#p2 的悬停事件上使用javascript 并更改#p1 的颜色。

或者您可以使用[较少的 css](http://lesscss.org/)将 #p1 的颜色设置为变量并更改 #p2:hover 中该变量的值，尽管我没有尝试过这种方法。*但同样 less css 不是纯 css，它也使用 javascript。*

使用 javascript（使用 jquery 库），您的代码将是：

```
$("#p2").hover(function() {
  $("#p1").css('color', '#f23');
}); 
```

# android - 在android中升级应用程序的过程是什么。它是仅替换 Apk 还是更多？

> ID：11408955
> 
> 赞同：2
> 
> 时间：2012-07-10T07:58:09.217
> 
> 标签：android, version, upgrade

在android中升级应用程序的过程是什么。它只是替换 Apk 还是其他东西。

还

1.  它是仅替换新的 Apk 文件（如重新安装）还是已更新？

2.  与旧版本关联的数据库表会发生什么情况？

3.  与旧版本关联的共享首选项会发生什么情况？

在我们实际将其推向市场之前，任何人都可以让我们知道模拟此操作的正确方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T08:04:40.703

1.  是的，该应用程序已替换为较新的应用程序。
2.  将`database`被升级，所以[`onUpgrade()`](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html)你方法上的`SQLiteOpenHelper`方法会被调用，所以你需要小心处理这里的数据，例如你可能不想删除整个数据库和表，而只是升级可能已经改变的特定表。
3.  `ShardePreferences`不会被抹去，它们会被保留。

为了模拟这一点，您可以将旧版本的应用程序放在您的设备上，然后安装较新的应用程序。这实际上将更新您的应用程序`Play Store`，并且`Eclipse`当您重新安装一个应用程序时，该应用程序已经安装在您的设备/模拟器上。

# javascript - 如何获取活动时移动的输入元素的点击事件？

> ID：11408959
> 
> 赞同：0
> 
> 时间：2012-07-10T07:58:17.477
> 
> 标签：javascript, javascript-events

我的网站有输入按钮，它们在“：活动”时移动 1px。而且，如果我点击一个边框，我无法捕捉到点击事件，因为它会移动一点。

这是一个例子。您无法获得点击事件。

**HTML：**

```
<input type="button" value="Click Me!"> 
```

​CSS **：**

```
input{
  width: 100px;
  height: 50px;
}
input:active{
  position: relative;
  top: 50px;
  left: 100px;
} 
```

​jQuery **：**

```
$(function() {
  $('input').on('click', function() {
    alert('You caught me!');
  });
}); 
```

​演示 **：**

[http://jsfiddle.net/duwYv/](http://jsfiddle.net/duwYv/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T08:05:18.143

您可以尝试`mousedown`代替：http `click`: [//jsfiddle.net/duwYv/6/](http://jsfiddle.net/duwYv/6/)

或者，您可以在单击后使用 jQuery 移动输入：http: [//jsfiddle.net/duwYv/8/](http://jsfiddle.net/duwYv/8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T08:05:48.863

事情就是`active`这样，`mousedown`在您按下鼠标按钮时发生。您正在尝试处理`onclick`单击完成后触发的事件

在您的情况下，永远不会发生“完全点击”。我不确定您的问题，但是如果您想在按下鼠标按钮时查看消息，请将代码更改为：

```
$('input').on('mousedown' 
```

# ruby - 使用 ruby 1.9.3 咆哮错误

> ID：11408961
> 
> 赞同：0
> 
> 时间：2012-07-10T07:58:21.633
> 
> 标签：ruby

在 rant 目录中使用 ruby​​ 1.9.3 执行其中一个 rant 示例，我收到以下错误：~/.rvm/gems/ruby-1.9.3-p194/gems/rant-0.5.7/doc/examples/directedrule

rant -T （读取位于上述目录中的 Rantfile） 作为目标目录所需的字符串

有谁知道如何解决这个错误？

提前致谢

# jquery - 在 Web 浏览器中滑动以选中复选框

> ID：11408962
> 
> 赞同：2
> 
> 时间：2012-07-10T07:58:24.520
> 
> 标签：jquery, usability

有时我们的表单在表格列中有很多复选框。用户必须检查一堆（但不是全部）。

通常我认为，如果您可以单击并拖动复选框，只需轻扫一下即可选择您想要的复选框。

我以前没有见过这个实现。有人对这样的东西的可用性有意见吗？

有没有人见过可以启用此功能的 jquery 插件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T05:24:41.547

这是我的答案，这归功于 Trufa 和 Tats 让球滚动：http: [//jsfiddle.net/ebStc/7/](http://jsfiddle.net/ebStc/7/)

这是一个插件：

```
$.fn.swipeable = function() {

var mousedownOn = {
        id: '',
        checkState: false
    };

$(document)
    .mouseup(function() {
        mousedownOn.id = '';
    });

$(this)
    .filter(':checkbox')
    .mousedown(function() {
        var $this = $(this);
        mousedownOn.id = $this.attr('id');
        mousedownOn.checkState = $this.prop('checked');
        $this.prop('checked',!$this.prop('checked'));
        $this.change();
    })
    .mouseenter(function() {
        var $this = $(this);

        if (mousedownOn.id != '' && mousedownOn.id != $this.attr('id')){
            $this.prop('checked',!mousedownOn.checkState);
            $this.change();
        }
    })
    .click(function(e) {
        e.preventDefault();
        return false;
    });
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T08:05:11.553

喜欢这个人吗？[http://jsfiddle.net/ebStc/3/](http://jsfiddle.net/ebStc/3/) **或** [http://jsfiddle.net/ebStc/2/](http://jsfiddle.net/ebStc/2/)

如果这有帮助，请告诉我，或者我很乐意删除这篇文章。

希望对事业有所帮助。

**当**您拖动鼠标指针时，它将被选中，如果再次拖动，它将取消选择`:)`

**代码**

```
$('input[type="checkbox"]').mouseenter(function() {

    if ($(this).is(':checked')) {
        $(this).prop('checked',false);
    } else {
         $(this).prop('checked',true);
    }
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T08:22:58.817

免责声明：这是未完成的工作，它基于[Tats 答案](https://stackoverflow.com/a/11409054/463065)和[这个答案](https://stackoverflow.com/a/322827/463065)。

[您可以在此处](http://jsfiddle.net/ebStc/5/)查看实时示例。

它认为这是 OP 想要的，但还没有弄清楚为什么当你按下鼠标时它实际上没有检查第一个复选框，但它接近 OP 正在寻找的鼠标拖动效果。

[在这里](http://jsfiddle.net/ebStc/6/)编辑是一个不理想的解决方案。

# php - PHP MVC 渲染主页

> ID：11408967
> 
> 赞同：0
> 
> 时间：2012-07-10T07:58:40.660
> 
> 标签：php, model-view-controller, module, structure, partial-views

我正在尝试学习 Web 应用程序的 MVC 设计模式，所以我决定编写自己的 PHP MVC 框架。在写这篇文章之前，我阅读了很多关于 MVC 的教程和论坛。现在我很好地理解了 MVC 的想法，以及控制器-模型-视图的通信方式。我有写路由器和几个模块（登录，类别，......） - 似乎它正在工作。

现在我有点困惑：

如果我打电话`localhost/LogIn`，我只会得到登录表格，如果我打电话，`localhost/categories`我会得到类别列表。一切正常，但我想创建索引控制器，并且在调用时`localhost/index`我想查看登录表单、类别和更多模块。

我应该调用控制器（登录名、类别）`indexController.php`吗？

我需要建议如何在一页中连接所需的模块。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T08:11:46.007

不，控制器不应该调用彼此的函数。一些框架引入了“[助手](http://codeigniter.com/forums/viewthread/55212/)”来实现你所需要的。

控制器可以使用相同的模型，并且视图会有所不同，因此您可以使用类别模型为您提供要显示的类别（例如 $categories->getCategoriesList()），然后在类别控制器视图和索引控制器视图。

从另一个控制器调用一个控制器的合法方法是形成一个 HTTP 请求 - 例如接收一个 HTML 片段（另一个控制器呈现的视图）以通过 AJAX 显示在您的视图中，或者使用一个 iframe 的源指向您的另一个控制器（这是一个笨拙的解决方案，主要用于想法说明）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T08:19:30.190

你需要几样东西：

1.  您需要一个 .htaccess 文件，该文件将导致所有请求都通过您的索引文件，这是一个简单的文件：

    ```
    RewriteEngine On
    RewriteBase /demo
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-l

    RewriteRule ^(.+)$ index.php?url=$1 [QSA,L] 
    ```

2.  在 index.php 文件中，您需要设置包含路径，因此您不必显式包含模块/控制器/视图或您选择的任何其他类：

    ```
     define("APPLICATION_PATH", realpath('.'));
     $paths = array(
        APPLICATION_PATH.'/controllers',
        APPLICATION_PATH.'/models',
        APPLICATION_PATH.'/views',
        APPLICATION_PATH.'/libs',
        APPLICATION_PATH.'/includes',
        get_include_path()
    );

    set_include_path(implode(PATH_SEPARATOR, $paths)); 
    ```

3.  现在为自动加载类（自动调用）添加“魔术方法”并初始化您的 Bootsrap 类：

    ```
    function __autoload($className){
    $fileName = str_replace('\\','/', $className);
    require_once "$fileName.php";
    }
    new Bootstrap(); 
    ```

4.  引导程序.php：

    ```
    <?php
    class Bootstrap {

        public function __construct() {

            $url = $_GET['url'];

            $params = explode('/', $url);

            //if controller exist - call it, else call login controller
            if (isset($params[0]) && $params[0]){
                $controller = new $params[0]();
            }
            else{
                $controller = new login();
            }

            //if method exist - call it, else call index method
            if (isset($params[1]) && $params[1]){

                //if parameter exit - call method with param, else call witout param
                if (isset($params[2]) && $params[2]){
                    $controller->$params[1]($params[2]);
                }
                else{
                    $controller->$params[1]();
                }
            }
            else{
                $controller->index();
            }
        }
    } 
    ```

那应该给你一个基本的 MVC 框架。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-14T16:30:29.390

使用您的控制器 (index.php) 来集中将在每个页面上使用的代码（请求验证器、错误处理程序、异常处理程序、会话内容）。

创建一个路由器类以获取正确的模型。允许模型获得正确的视图。[我已经从我的其他答案（ https://stackoverflow.com/questions/42172228/is-this-how-an-mvc-router-class-typically-works](https://stackoverflow.com/questions/42172228/is-this-how-an-mvc-router-class-typically-works) ）中包含了一些 UML 图来提供帮助。请记住，尝试编程到抽象接口，而不是具体实现。

[![路由器UML图](../Images/3d38c00909066ce9b6d169e03cba06f2.png)](https://i.stack.imgur.com/XlEsB.png)

[![模型 UML 图](../Images/c1447e5475906797153d8bf3acf9450a.png)](https://i.stack.imgur.com/juG9I.png)

# java - 使用 Button 作为列表的渲染器

> ID：11408971
> 
> 赞同：2
> 
> 时间：2012-07-10T07:59:05.957
> 
> 标签：java, swing, jython, jlist

我想使用一个更复杂的渲染器，它包含一个列表的几个组件（更准确地说是[这样](https://stackoverflow.com/questions/10840498/java-swing-1-6-textinput-like-firefox-bar)的（一个文本字段输入，一些按钮排列在面板中）。但是，当我尝试使用列表中的按钮时，它似乎忽略了点击.

**最小的例子**

```
from javax.swing import DefaultListCellRenderer
from javax.swing import DefaultListSelectionModel
from javax.swing import JButton
from javax.swing import JLabel
from javax.swing import JPanel
from javax.swing import JList
from javax.swing import JFrame

def printer():
    print "pressed the button"

class cellRenderer(DefaultListCellRenderer):

    def getListCellRendererComponent(self, theList, value, index, selected, hasFocus):
        renderer = DefaultListCellRenderer.getListCellRendererComponent(self, theList, value, index, selected, hasFocus)

        if selected:
            pan = JPanel()
            pan.add(JLabel('beer'))
            pan.add(JButton('get one', actionPerformed=printer))
            renderer = pan

        return renderer

panel = JFrame('example', size=(200,200))

configurations = JList([1,2,3,4],
                       cellRenderer = cellRenderer(),
                       selectionMode = DefaultListSelectionModel.SINGLE_SELECTION )

panel.add(configurations)
panel.visible = True 
```

**编辑**：按照建议添加最小示例。更新的问题，因为在最小的示例创建过程中解决了原始问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T11:20:26.290

单独的渲染器是不够的；您还需要一个编辑器，它不是`JList`API 的一部分。作为替代方案，将 a`JTable`与自定义渲染器和编辑器一起使用。[`JRadioAsRendererEditor`](https://stackoverflow.com/a/11179669/230513)是一个添加`StatusPanel`包含单选按钮的示例。当然，您也可以使用[多列表](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)。

# visual-studio-2010 - VS 2010 中 WCF 项目的控制台应用程序与 WCF 服务应用程序

> ID：11408973
> 
> 赞同：0
> 
> 时间：2012-07-10T07:59:30.113
> 
> 标签：visual-studio-2010, wcf

在过去一周左右的时间里，我目前正在迈出进入 WCF 世界的第一步。

关于何时在 Visual Studio 2010 中使用控制台应用程序或 WCF 服务应用程序，我的脑海中不断浮现出一些东西？

是关于自托管还是 IIS 和 WAS 托管？我得到它的方式是，如果我是自托管的，那么控制台应用程序就是要走的路，因为您将`ServiceHost`自己实现和代理，而在 IIS 或 WAS 托管的情况下，我们使用 WCF 服务应用程序？是在哪里`ServiceHost`动态生成的？

我对这个问题的理解正确吗？还是里面有更多的东西？我觉得这里缺少一些链接......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T11:58:43.353

您可以参考这篇 MSDN 文章以了解有关托管的更多详细信息。 [http://msdn.microsoft.com/en-us/library/bb332338.aspx](http://msdn.microsoft.com/en-us/library/bb332338.aspx)

# bash - 当 Bash 函数是管道的一部分时，它会失败

> ID：11408978
> 
> 赞同：3
> 
> 时间：2012-07-10T07:59:45.457
> 
> 标签：bash, pipe, bash-function

这是为了简化我遇到的问题。我定义了一个设置变量的函数，这适用于这种情况：

```
$ function myfunc { res="ABC" ; }
$ res="XYZ"
$ myfunc
$ echo $res
    ABC 
```

所以 res 已经被 myfunc 的调用改变了。但：

```
$ res="XYZ"
$ myfunc | echo
$ echo $res
    XYZ 
```

因此，当 myfunc 是管道的一部分时，值不会改变。即使涉及管道，如何使 myfunc 以我想要的方式工作？

（在真正的脚本中，“myfunc”当然做了一些更精细的事情，管道的另一边有一个 zenity 进度对话而不是一个毫无意义的回声）

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T08:06:08.433

这在 Unix 上是不可能的。为了更好地理解这一点，您需要知道什么是变量。Bash 保留两个包含所有已定义变量的内部表。一种是用于当前 shell 的本地变量。`set name=value`您可以使用或仅创建那些`name=value`. 这些是流程本地的；创建新进程时，它们不会被继承。

要将变量导出到新的子进程，您必须使用`export name`. 这告诉 bash “我希望孩子们看到这个变量的值”。这是一项安全功能。

当您在 bash 中调用函数时，它会在当前 shell 的上下文中执行，因此它可以访问和修改所有变量。

但是管道是与 I/O 管道连接的进程列表。这意味着您的函数在 shell 中执行，并且只有这个 shell 的输出对`echo`.

即使导出`myfunc`也不起作用，因为导出仅适用于由您执行导出的 shell 启动的进程，并且`echo`由与以下相同的 shell 启动`myfunc`：

```
bash
 +-- myfunc
 +-- echo 
```

那是`echo`不是孩子的`myfunc`。

解决方法：

1.  将变量写入文件
2.  使用更复杂的输出格式，如 XML 或多行输出，其中第一行输出始终是变量，真正的输出在下一行。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-10T16:06:50.607

正如@Aaron 所说，问题是由在子shell 中运行的函数引起的。但是有一种方法可以在 bash 中避免这种情况，使用进程替换而不是管道：

```
myfunc > >(echo) 
```

这与管道的作用大致相同，但 myfunc 在主 shell 中运行，而不是在子进程中运行。请注意，这是一个仅限 bash 的功能，您*必须*使用 #!/bin/bash 作为您的 shebang 才能使其工作。

# html - 外部 css 中引用的背景图像未加载

> ID：11408980
> 
> 赞同：6
> 
> 时间：2012-07-10T07:59:50.357
> 
> 标签：html, css, relative-path

我在一个外部 css 文件中有这个，但它根本不起作用。我会假设我写错了，但是当放在内部时，它工作正常。关于可能发生什么的任何想法？

```
html
{
background-image:url(images/background-grid.jpg);
background-repeat:repeat;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T08:05:06.847

我假设您的 CSS 文件位于这样的文件夹中。

```
    /
        css/
            你的css.css
        图片/
            背景-grid.jpg
        索引.html

```

CSS 文件中给出的路径是**相对于**CSS 文件的路径（在我给出的示例中，`css`文件夹）。所以你应该使用`..`：

```
background-image: url(../images/background-grid.jpg); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-10T08:05:27.943

我认为你没有写完全错误

但是最好使用body而不是html。

**解释为什么要使用body**

*它允许您在该主体标签之上使用覆盖。就像身体上的网格背景和侧面的阴影。但两者都是正确的。取决于您要执行的操作。*

*如果你不重复你的背景，那么你的图片可能没有使用整个页面，那么你应该使用 html 标签。但在这种情况下，由于重复，它给出了相同的解决方案。*

[SO重播](https://stackoverflow.com/questions/10947541/applying-a-background-to-html-and-or-body/10947583#10947583)：tnx to attronics

**你的“错误”的解释**

如果您的图像与您的 html 页面位于不同的文件夹中（应该是这种情况）。您应该将`..`其用作 css 文件的相对路径。

如果没有`..`它，则意味着您将在与您的 html 页面相同的文件夹中查找该图像。

```
body{
  background-image:url(../images/background-grid.jpg);
  background-repeat:repeat;
} 
```

这是一个提供一些[CSS 基础知识的](http://www.cssbasics.com/introduction-to-css/)网站。不过没查出处。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T08:05:02.723

可能是你的文件夹结构，试试

```
html
{
background-image:url(../images/background-grid.jpg);
background-repeat:repeat;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-03-28T08:21:22.327

当我们有这些文件夹时

```
css
img
and index.html 
```

当我们在称为内部css的索引页面中的样式标签中编写css时，它可以正常工作，但是当我们`styles.css`在css文件夹中正确css时，背景img不起作用。

因为您在文件夹中移动，并且背景 img 的路径不起作用。所以你必须这样写：

```
background-image: url('../img/bg.jpg'); 
```

然后它将正常工作

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-16T17:16:28.273

`..`这意味着上一层楼。

所以，如果你的文件夹结构是这样的：

```
image/
     background.png
css/
    stylesheet.css 
```

那么你的css规则应该是这样的：

```
html {
background-image: url('../image/background.png');
} 
```

如果你的文件夹结构是这样的：

```
style/
     image/
           bgr/
               background.png
     css/
         deeper/
               stylesheet.css 
```

然后，上两层到图像目录，如下所示：

```
 html {
    background-image: url('../../image/bgr/background.png');
 } 
```

等等。`..`只需将后面的斜杠加起来即可`/`。

# javascript - 将 Shadowbox.js 应用于动态生成的内容

> ID：11408993
> 
> 赞同：5
> 
> 时间：2012-07-10T08:01:07.673
> 
> 标签：javascript, jquery

我正在使用 shadowbox.js 进行图片库显示。

为此，我们必须像这样生成 html

```
<a href="images/Ganesha3602.jpg" rel="shadowbox[my]"><img src="images/thumb.jpg"   alt="First" title="First image" /></a>
<a href="images/original.jpg" rel="shadow[my]"><img src="images/thumb.jpg" alt="Second" title="Second image" /></a>
<a href="images/original.jpg" rel="shadowbox[my]"><img src="images/thumb.jpg" alt="First" title="First image" /></a> 
```

然后适用`Shadowbox.init()`于身体负荷。当上面的 html 是静态的时，它的工作就像一个魅力。但是当我使用动态生成它`$.ajax`并调用`Shadowbox.init()`成功时；影子盒不工作。我也尝试调用 `Shadowbox.init()`完成。

我的代码是这样的：

```
$(document).on('click','#load_posts_comments',function(){

    $.ajax({
        url:"post_comment_json.php",
        type: "POST",
        dataType: "json",
        data:{user_id:"123"},
        success: function(data){
            load_posts_comments(data);
        },
        complete: function(){
            Shadowbox.init();
        }
    });
}); 
```

我哪里错了？我查看了 shadowbox 网站，但没有关于动态加载内容的文档。帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T08:40:45.597

您需要使用`Shadowbox.clearCache();`and重新初始化它`Shadowbox.setup();`。
在这里解释得更好：[shadowbox stop working after jquery function call](https://stackoverflow.com/questions/9144577/shadowbox-stops-working-after-jquery-function-call)

# java - 如何从java中的单个端口读取多个com端口？

> ID：11408994
> 
> 赞同：0
> 
> 时间：2012-07-10T08:01:11.167
> 
> 标签：java, serial-port

我想从单个 USB 串行端口读取多个串行端口（其中连接了多个设备）。

这怎么可能？任何人都告诉我如何解决这个问题。请参考一些教程或网站。

# java - cron.xml - 验证错误

> ID：11408995
> 
> 赞同：0
> 
> 时间：2012-07-10T08:01:19.950
> 
> 标签：java, google-app-engine

我的 cron.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<cronentries>
 <cron>
   <url>/myURL</url>
   <description>Backup data 02 times per day</description>
   <schedule>every 12 hours</schedule>
   <timezone>America/New_York</timezone>
   <target>ah-builtin-python-bundle</target>
 </cron>
</cronentries> 
```

当我将我的应用程序上传到 gae 时，我收到一条错误消息：

> 在“将应用程序部署到 Google”期间发生内部错误。针对 /Users/Aptos/appengine-java-sdk-1.7.0/docs/cron.xsd 验证 /Users/Aptos/Documents/workspace/App/war/WEB-INF/cron.xml 的 XML 错误

cron.xsd 文件：

[http://code.google.com/p/googleappengine/source/browse/trunk/java/docs/cron.xsd?r=109](http://code.google.com/p/googleappengine/source/browse/trunk/java/docs/cron.xsd?r=109)

**解决方法**：如果 url 元素中包含特殊的 XML 字符 &、<、>、' 或 "，您应该将它们转义。
非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T08:31:48.180

你有一个额外的标签 :target （最后一个标签），这个标签不会出现在 XSD 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T08:34:30.993

至少在您链接到的文件中，cron 元素中没有目标元素。
看起来你有一个旧的 xsd 文件，最新的 xsd 看起来像这样：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="cronentries" type="cronentries-Type"/>

  <xs:complexType name="cronentries-Type">
    <xs:sequence>
      <xs:element type="cron-Type" name="cron" maxOccurs="unbounded" minOccurs="0"/>
    </xs:sequence>
  </xs:complexType>

  <xs:complexType name="cron-Type">
    <xs:all>
      <xs:element type="xs:string" name="url"/>
      <xs:element type="xs:string" name="description" minOccurs="0"/>
      <xs:element type="xs:string" name="schedule"/>
      <xs:element type="xs:string" name="timezone" minOccurs="0"/>
      <xs:element type="target-Type" name="target" minOccurs="0"/>
    </xs:all>
  </xs:complexType>

  <xs:simpleType name="target-Type">
    <xs:restriction base="xs:string">
      <xs:pattern value="[a-z\d\-]{1,100}"/>
    </xs:restriction>
  </xs:simpleType>

</xs:schema> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-26T23:40:08.630

这些 AppEngine 配置文件的 XSD 是“无名称空间的”（即没有与 appengine-web.xsd 的 xs:schema 相比的目标名称空间），因此您必须将其声明为：

```
<?xml version="1.0" encoding="UTF-8"?>
<cronentries xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:noNamespaceSchemaLocation="https://googleappengine.googlecode.com/svn-history/r109/trunk/java/docs/cron.xsd">
 <cron>
   <url>/myURL</url>
   <description>Backup data 02 times per day</description>
   <schedule>every 12 hours</schedule>
   <timezone>America/New_York</timezone>
   <target>ah-builtin-python-bundle</target>
 </cron>
</cronentries> 
```

另请注意，您必须使用文件的原始版本：

[https://googleappengine.googlecode.com/svn-history/r109/trunk/java/docs/cron.xsd](https://googleappengine.googlecode.com/svn-history/r109/trunk/java/docs/cron.xsd)

而不是浏览器版本：

[https://code.google.com/p/googleappengine/source/browse/trunk/java/docs/cron.xsd?r=109](https://code.google.com/p/googleappengine/source/browse/trunk/java/docs/cron.xsd?r=109)

# c# - 移动位图区域

> ID：11408996
> 
> 赞同：2
> 
> 时间：2012-07-10T08:01:21.993
> 
> 标签：c#, image, bitmap, drawing

为了让我的问题更容易理解，我给你伪代码片段：

```
// dx (i.e. offset value) can be arbitrary. 
for(i = 0; i < bitmap.columnsCount - dx; i++)
{
    // "=" means copy pixels from one column to another.
    bitmap.column[i] = bitmap.column[i+dx];
} 
```

我该怎么做？当然，我可以通过 LockBitmap 获取原始像素，然后以某种方式使用 MarshalCopy 或不安全部分......但这很难看而且太复杂了。有没有更好的办法？

我试图找到类似于`MoveBitmapRegion()`方法的东西，但我不能。给自己画位图的想法没有奏效：

```
Graphics g = Graphics.FromImage(bmp);
g.DrawImage(bmp, 0, 0, new Rectangle(dx, 0, bmp.Width - dx, bmp.Height), GraphicsUnit.Pixel); 
```

制作位图的副本会有所帮助，但我认为它的操作成本太高：

```
Graphics g = Graphics.FromImage(bmp);
g.DrawImage(new Bitmap(bmp), 0, 0, new Rectangle(dx, 0, bmp.Width - dx, bmp.Height), GraphicsUnit.Pixel); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T10:10:46.113

好的，只是在一天结束时很快就完成了，所以可能会有一些错误，但在我测试的图像中，它似乎工作正常。

```
private static void CopyBmpRegion(Bitmap image, Rectangle srcRect, Point destLocation)
{
    //do some argument sanitising.
    if (!((srcRect.X >= 0 && srcRect.Y >= 0) && ((srcRect.X + srcRect.Width) <= image.Width) && ((srcRect.Y + srcRect.Height) <= image.Height)))
        throw new ArgumentException("Source rectangle isn't within the image bounds.");

    if ((destLocation.X < 0 || destLocation.X > image.Width) || (destLocation.Y < 0 || destLocation.Y > image.Height))
        throw new ArgumentException("Destination must be within the image.");

    // Lock the bits into memory
    BitmapData bmpData = image.LockBits(new Rectangle(Point.Empty, image.Size), ImageLockMode.ReadWrite, image.PixelFormat);
    int pxlSize = (bmpData.Stride / bmpData.Width); //calculate the pixel width (in bytes) of the current image.
    int src = 0; int dest = 0; //source/destination pixels.

    //account for the fact that not all of the source rectangle may be able to copy into the destination:
    int width = (destLocation.X + srcRect.Width) <= image.Width ? srcRect.Width : (image.Width - (destLocation.X + srcRect.Width)); 
    int height = (destLocation.Y + srcRect.Height) <= image.Height ? srcRect.Height : (image.Height - (destLocation.Y + srcRect.Height));

    //managed buffer to hold the current pixel data.
    byte[] buffer = new byte[pxlSize];

    for (int x = 0; x < width; x++)
    {
        for (int y = 0; y < height; y++)
        {
            //calculate the start of the current source pixel and destination pixel.
            src = ((srcRect.Y + y) * bmpData.Stride) + ((srcRect.X + x) * pxlSize);
            dest = ((destLocation.Y + y) * bmpData.Stride) + ((destLocation.X + x) * pxlSize);

            // Can replace this with unsafe code, but that's up to you.
            Marshal.Copy(new IntPtr(bmpData.Scan0.ToInt32() + src), buffer, 0, pxlSize);
            Marshal.Copy(buffer, 0, new IntPtr(bmpData.Scan0.ToInt32() + dest), pxlSize);
        }
    }

    image.UnlockBits(bmpData); //unlock the data.
} 
```

本质上，您描述了您希望复制的区域的源矩形（以像素为单位，而不是以字节为单位），即 Rectangle(0, 0, 100, 100) 将描述从图像左上角开始的 100x100 像素宽的块。

接下来，描述目标矩形的左上角。尽可能多的源矩形将被复制到目标，但如果图像不够宽/高以容纳整个矩形，它将被剪裁。

使用示例如下：

```
Image img = Image.FromFile(@"C:\Users\254288b\Downloads\mozodojo-original-image.jpg");
CopyBmpRegion((Bitmap)img, new Rectangle(5, 5, 100, 100), new Point(100, 100));
img.Save(@"C:\Users\254288b\Downloads\mozodojo-new-image.jpg", ImageFormat.Jpeg); 
```

结果如下：

[mozodojo-原始图像.jpg](http://pasteshack.net/images/455931001341914968.png)

[mozodojo-new-image.jpg](http://pasteshack.net/images/600481001341915003.png)

看看情况如何。