# StackOverflow 问答 12197000-12197999

# objective-c - 如何知道哪些静态库已与 iOS 构建链接？

> ID：12197003
> 
> 赞同：0
> 
> 时间：2012-08-30T12:37:35.870
> 
> 标签：objective-c, cocoa-touch, build

假设您无权访问源代码，有没有办法找出哪些框架/静态库已与 iOS 构建（ipa 文件）链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T13:06:52.493

AFAIK 不，因为静态库中的符号被*复制*到您的二进制文件中，而没有对原始静态库的任何引用。也许有一些魔法，但我不知道。

但是您可以使用`nm`例如列出可执行文件中的符号，然后猜测它们的来源。

# jquery - Datepicker 获取 maxDate 或 Mindate

> ID：12197009
> 
> 赞同：3
> 
> 时间：2012-08-30T12:37:42.133
> 
> 标签：jquery, jquery-ui, datepicker

我在页面上使用 serverall 日期选择器，并在不同的事件上设置 maxDate 和 Mindate。在某些情况下（例如删除句点），我想知道在日期选择器上设置的最大 Mindate 是多少。有没有办法通过 document.getElementById ($) 从 datepicker 中检索 maxDate 或 minDate？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-30T13:55:44.990

阅读文档：

```
var minDate = $( ".selector" ).datepicker( "option", "minDate" ); 
```

[http://jqueryui.com/demos/datepicker/#option-minDate](http://jqueryui.com/demos/datepicker/#option-minDate)

2018 年 11 月 5 日更新链接：http: [//api.jqueryui.com/datepicker/#option-minDate](http://api.jqueryui.com/datepicker/#option-minDate)

# outlook - 将 imap 邮件保存到 pop 帐户

> ID：12197011
> 
> 赞同：0
> 
> 时间：2012-08-30T12:37:44.940
> 
> 标签：outlook, save, imap, pop3

有没有一种解决方案可以存储我的 IMAP 邮件，以便我可以将 imap 电子邮件转移到 pop3 帐户？

我现在使用 Outlook。

问题是我的邮件提供商无法在不删除我的电子邮件的情况下切换到 pop3 :(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T14:29:07.737

POP3 不包含上传功能，所以没有。除非您*还*具有 IMAP 访问权限，否则您可以使用它来复制/上传消息。

# jquery - 使用 Jquery 将 size="5" 添加到选择中

> ID：12197019
> 
> 赞同：0
> 
> 时间：2012-08-30T12:38:00.620
> 
> 标签：jquery, select

我是 jQuery 新手，我只是想知道如何将 size="5" 添加到选择中。非常感谢。

例如改变

```
<select>
    <option value="123">123</option>
</select> 
```

进入：

```
<select size="5">
    <option value="123">123</option>
</select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T12:39:40.410

在您的情况下，`size`是一个属性，因此您可以使用该[`attr`](http://api.jquery.com/attr/)方法。

```
$(your selector here).attr('size', '5'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T12:39:52.817

使用添加属性[`.attr()`](http://api.jquery.com/attr/)：

```
$("select").attr("size", "5") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T12:40:40.680

```
$("select").attr("size", "5"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T12:41:06.607

用这个

```
​$("#sel").attr('size',5);​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

其中`sel`id 的 id`select`

# c++ - 使用 gsoap 代理类使用 gsoap 独立服务器实现 http get

> ID：12197024
> 
> 赞同：0
> 
> 时间：2012-08-30T12:38:07.733
> 
> 标签：c++, proxy, gsoap

我知道如何为 gsoap 普通代码实现 http get，但是当我使用 gsoap 和 生成代码时`soapcpp2 -i`，我没有可用的 soap_serve 函数，我不知道如何/在哪里重新实现 fget/http_get 回调

有没有人试过这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T17:47:48.123

It is hard to understand, what you try to do. I will give small "cookbook" example (C++ version, but C is looks the same), that i wrote some time ago with

a) write correct service interface

$ cat service.h

```
//gsoap ns service name:    mon Simple monitor service
//gsoap ns service encoding: literal 

//gsoap ns service namespace:   http://feniksa.dnsalias.com/hlanmon.wsdl
//gsoap ns service location:    http://feniksa.dnsalias.com:8888

//gsoap ns schema namespace:    urn:mon

#import "stlvector.h"

int ns__commandsuccess(std::string secret, int commandid, bool& status); 
```

I created just one simple soap method: commandsuccess

b) generate service classes via soapcpp

```
soapcpp2 -S -i -2 -I /usr/share/gsoap/import service.h 
```

See soapcpp2 output

gsoap will generate a lot of files. See files: monService.h and monService.cpp (mon is name of service), also see soapH.h

c) implement service function For my example, i add to monService.cpp function

```
int monService::commandsuccess(std::string secret, int commandid, bool &status)
{
   // some logic here
    return SOAP_OK;
} 
```

d) find function serve or run. For my service i wrote such code in main.cpp

```
#include "monService.h"

// other includes here

int main(int argc, char* argv[])
{
        // init code
        monService service;
       // other code here 
       service.serve();               // <- haha, i am here
      // other code
} 
```

See this: [https://freeman.svn.sourceforge.net/svnroot/freeman/other/trunk/gsoap](https://freeman.svn.sourceforge.net/svnroot/freeman/other/trunk/gsoap)

# java - 在 Maven 程序集中包含共享对象

> ID：12197039
> 
> 赞同：8
> 
> 时间：2012-08-30T12:38:41.960
> 
> 标签：java, maven, shared-libraries

我目前正在尝试使用 maven 和 sqlite4java 构建我的项目。可以在官方 maven 存储库中找到。google code 上的官方[sqlite4java 页面](http://code.google.com/p/sqlite4java/wiki/UsingWithMaven)确实有一个示例配置，但它有点过时了，不适合我的需要。我想最后有一个 .jar 文件，我可以在其他地方部署。这里的问题是共享对象依赖。我正在使用他们页面上的官方构建目标将 so 复制到 build.dir/lib 但我的装配目标崩溃：

```
[INFO] Failed to create assembly: Error adding file-set for 'com.almworks.sqlite4java:libsqlite4java-linux-i386:so:0.282' to archive: Error adding archived file-set. PlexusIoResourceCollection not found for: /home/lhw/.m2/repository/com/almworks/sqlite4java/libsqlite4java-linux-i386/0.282/libsqlite4java-linux-i386-0.282.so
No such archiver: 'so'. 
```

​我做错了什么？这是我当前的 pom.xml 从一些与本主题无关的依赖项中剥离出来的

```
<?xml version="1.0"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>de.ring0.lhw</groupId>
  <artifactId>system</artifactId>
  <version>0.0.1-SNAPSHOT</version>
  <dependencies>
    <dependency>
      <groupId>com.almworks.sqlite4java</groupId>
      <artifactId>sqlite4java</artifactId>
      <version>${sqlite4java.version}</version>
    </dependency>
    <dependency>
      <groupId>com.almworks.sqlite4java</groupId>
      <artifactId>libsqlite4java-linux-i386</artifactId>
      <version>${sqlite4java.version}</version>
      <type>so</type>
    </dependency>
  </dependencies>
  <properties>
    <sqlite4java.version>0.282</sqlite4java.version>
  </properties>
  <build>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-dependency-plugin</artifactId>
        <executions>
          <execution>
            <id>copy</id>
            <phase>compile</phase>
            <goals>
              <goal>copy</goal>
            </goals>
            <configuration>
              <artifactItems>
                <artifactItem>
                  <groupId>com.almworks.sqlite4java</groupId>
                  <artifactId>libsqlite4java-linux-i386</artifactId>
                  <version>${sqlite4java.version}</version>
                  <type>so</type>
                  <overWrite>true</overWrite>
                  <outputDirectory>${project.build.directory}/lib</outputDirectory>
                </artifactItem>
              </artifactItems>
            </configuration>
          </execution>
        </executions>
      </plugin>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>2.5.1</version>
        <configuration>
          <source>1.6</source>
          <target>1.6</target>
        </configuration>
      </plugin>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-surefire-plugin</artifactId>
        <version>2.12.2</version>
        <configuration>
          <skipTests>true</skipTests>
          <systemProperties>
            <property>
              <name>sqlite4java.library.path</name>
              <value>${project.build.directory}/lib</value>
            </property>
          </systemProperties>
        </configuration>
      </plugin>
      <plugin>
        <artifactId>maven-assembly-plugin</artifactId>
        <executions>
          <execution>
            <phase>package</phase>
            <goals>
              <goal>single</goal>
            </goals>
            <configuration>
              <archive>
                <manifest>
                  <mainClass>de.ring0.lhw.Init</mainClass>
                </manifest>
              </archive>
              <descriptorRefs>
                <descriptorRef>jar-with-dependencies</descriptorRef>
              </descriptorRefs>
            </configuration>
          </execution>
        </executions>
      </plugin>
    </plugins>
  </build>
</project> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T12:27:03.377

编辑 ：

我认为 jar-with-dependencies 程序集描述符试图解包依赖项。

见链接：

[http://maven.apache.org/plugins/maven-assembly-plugin/descriptor-refs.html](http://maven.apache.org/plugins/maven-assembly-plugin/descriptor-refs.html)

maven.apache.org/plugins/maven-assembly-plugin/... ...

```
<unpack>true</unpack> 
```

当然，它无法解压 .so

因此，您可能必须使用自定义程序集来执行您想做的事情

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-07T06:16:35.063

可以使用库存的“jar-with-dependencies”程序集描述符创建可执行 jar，而无需使用任何启动 shell/批处理脚本。但是，它需要不涉及太多 Maven 配置的肮脏变通方法。

1.  我们需要将所有本机库[（包含在 sqlite4java zip 下载中）放置](http://code.google.com/p/sqlite4java/downloads/list "sqlite4java 下载页面")到**src/main/resources**目录。还要从 Maven POM 文件中删除 sqlite4java 本机库依赖项。
2.  因为 sqlite4java 的本地库加载器不查看您的类路径或 JAR 文件内部，所以您必须**在启动时提取本地库**，并**在运行时设置“sqlite4java.library.path”系统属性**。请看以下示例代码：

 `````
/** List of native libraries you put in src/main/resources */
public static final String[] NATIVE_LIB_FILENAMES = {
    "libsqlite4java-linux-amd64.so",
    "libsqlite4java-linux-i386.so",
    "libsqlite4java-osx.jnilib",
    "libsqlite4java-osx-10.4.jnilib",
    "libsqlite4java-osx-ppc.jnilib",
    "sqlite4java-win32-x64.dll",
    "sqlite4java-win32-x86.dll",
};

/**
 * Extract native libraries to the current directory.
 * This example needs Apache Commons IO (https://commons.apache.org/proper/commons-io/)
 */
public static void extractNativeResources() {
    for(String filename: NATIVE_LIB_FILENAMES) {
        // Change "DemoSQLite2" to your class name
        final InputStream in = DemoSQLite2.class.getResourceAsStream("/"+filename);

        if(in != null) {
            try {
                System.out.println("Extracting " + filename);
                FileUtils.copyInputStreamToFile(in, new File(filename));
            } catch (IOException e) {
                System.err.println("Can't extract " + filename);
                e.printStackTrace();
            }
        }
    }
}

/**
 * Delete native libraries in the current directory
 */
public static void removeNativeResources() {
    for(String filename: NATIVE_LIB_FILENAMES) {
        File file = new File(filename);
        file.delete();
    }
}

public static void main(String[] args) throws Exception {
    boolean deleteNativesOnExit = false;    // Delete natives on exit

    // Extract native libraries if sqlite4java.library.path property is not set
    String sqlitePath = System.getProperty("sqlite4java.library.path");
    if(sqlitePath == null) {
        System.setProperty("sqlite4java.library.path", "."); // Read natives from current directory
        extractNativeResources();
        deleteNativesOnExit = true;
    }

    // Do SQLite jobs here
    final SQLiteConnection db = new SQLiteConnection(new File("test.db"));
    try {
        db.open();
        db.dispose();
        System.out.println("Success");
    } catch (Exception e) {
        e.printStackTrace();
        System.err.println("FAILED");
    }

    // Delete the native libraries we extracted
    if(deleteNativesOnExit) removeNativeResources();
} 
````  `现在您的应用程序应该可以使用标准的“jar-with-dependencies”描述符构建，并且您的应用程序可以使用标准的“java -jar your_jar.jar”命令运行。

当然，如果 sqlite4java 以后有更新，你必须手动更新资源目录中的原生库。

如果您有更好、更少脏的解决方案，请告诉我！``

# mysql - 根据存储在另一个表中的重量范围查找记录

> ID：12197040
> 
> 赞同：0
> 
> 时间：2012-08-30T12:38:46.657
> 
> 标签：mysql, database, relational-database

我有两张桌子：`fighters`和`weight_divisions`。我的`weight_divisons`表如下所示：

```
id | name              | upper_limit
====================================
1  | Flyweight         | 125
2  | Bantamweight      | 135
3  | Featherweight     | 145
4  | Lightweight       | 155
5  | Welterweight      | 170
6  | Middleweight      | 185
7  | Light Heavyweight | 205
8  | Heavyweight       | 265 
```

然后我的`fighters`桌子看起来像这样：

```
id | name          | weight
===========================
1  | Rob Sinclair  | 155
2  | Mark Adams    | 145
3  | Jack Marshamn | 185 
```

我想要做的是通过传递重量类别的 ID 来选择战士。我有一个查询，它选择了一个类别上限 *以下*的所有战士……</p>

```
SELECT
    *
FROM
    `fighters`
WHERE
    `weight` <= (
        SELECT
            `upper_limit`
        FROM
            `weight_divisions`
        WHERE
            `id` = :weight_division
    )
ORDER BY
    `name` ASC 
```

…但是，我也想使用下一个最低重量类别的上限作为下限。

例如，如果我指定`4`（轻量级），它应该选择所有 155 岁或以下，但也超过 145 岁的拳手（羽量级`upper_limit`，羽量级是次低重量级）。在享元的情况下，使用 0 作为下限。

我如何实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T12:47:31.733

您可以在连接的`weight_divisions`一侧低于另一侧的条件下将表自连接到自身，按连接`upper_limit`的另一侧分组并选择连接`MAX(upper_limit)`的下侧以获得下和上每个部门的权重范围。

然后只需将结果与`fighters`表连接并适当过滤：

```
SELECT fighters.*
FROM   fighters
  JOIN (
    SELECT   IFNULL(MAX(l.upper_limit),0) AS lower_limit, u.upper_limit
    FROM     weight_divisions l
      RIGHT JOIN weight_divisions u ON l.upper_limit < u.upper_limit
    WHERE    u.id = 4
  ) w ON w.lower_limit <= fighters.weight AND fighters.weight < w.upper_limit 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/1294e/1/0)上查看。

# mysql - 如何在选择之外使用动态内列

> ID：12197041
> 
> 赞同：1
> 
> 时间：2012-08-30T12:38:48.480
> 
> 标签：mysql

我有这个查询，我在 mysql 中得到错误

**错误代码：1054。“字段列表”中的未知列“calc_diff_free”**

我理解这个问题，但我怎样才能在不改变太多的情况下使用这个专栏

**我过滤了查询以隐藏一些数据并帮助你们更好地阅读查询**

```
insert into ranking_1 (difference_free)
(
 select 
 f.ranking, rc.ranking,
(-1*(f.ranking-rc.ranking)) as calc_diff_free
     from base_testing.ranking_temp f
     left join ranking_1 rc
     on f.id=rc.id
     where 1
 ) 
on duplicate key update difference_free=calc_diff_free 
```

**谢谢你的帮助！！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T12:46:42.643

查询中的`on duplicate key update`子句超出了声明列的选择项的范围`calc_diff_free`。

您可能需要重新编写查询以将其置于范围内。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T12:49:32.237

尝试这样的事情，

```
insert into ranking_1 (difference_free)
select -1 * (f.ranking-rc.ranking) as calc_diff_free
from base_testing.ranking_temp f
            left join ranking_1 rc
                    on f.id=rc.id
on duplicate key update difference_free = calc_diff_free 
```

要点：您的*and**子句**中的列数必须相等`insert``select`*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T13:07:59.220

我想我设法让它工作......

```
insert into ranking_1 (difference_free)
(
 select 
 f.ranking, rc.ranking,
 (-1 * (f.ranking-rc.ranking)) calc_diff_free
     from base_testing.ranking_temp f
     left join ranking_1 rc
     on f.id=rc.id
     where 1
 ) 
on duplicate key update difference_free=-1*(f.ranking-rc.ranking) 
```

但它给了我一些警告......

85672 行受影响，记录：42883，重复：42789，警告：4

# qt - Qt QAbstractModel：删除复选框

> ID：12197044
> 
> 赞同：0
> 
> 时间：2012-08-30T12:38:59.990
> 
> 标签：qt, qtableview, qabstracttablemodel

我开始学习Qt，我想通过QTableView实现一个填充数据的表格。我的问题是，我不知道如何从单元格中删除复选框。似乎它们是默认放入的。

但是，我读到我必须返回一个 NULL-QVariant，但这不是我想要的，因为我还有数据要输入。

到目前为止，这是我的代码：

```
QVariant MyModel::data(const QModelIndex &index, int role) const
{
int row = index.row();
int col = index.column();
QString daten;

switch (col)
{
case 0:
{
    daten = "column 1";
    break;
}
case 1:
{
    daten = "column 2";
    break;
}
case 2:
{
    daten = "column 3";
    break;
}
case 3:
{
    daten = "column 4";
    break;
}
}

return daten;
} 
```

现在，如您所见，我想用名为“daten”的 QString 填充单元格。但在字符串旁边，每个单元格中都有一个复选框。

有人知道如何删除复选框但仍然用“daten”填充内容吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T13:51:36.300

您中的单元格`QTableView`有一些复选框暗示它们被定义为用户可检查的事实。检查您的定义中是否没有`Qt.ItemIsUserCheckable`激活标志`QTableView`，如果是这种情况，请停用它。您可以尝试修改该`flags`方法，例如，强制每个条目*不可*检查

作为附加评论，您可能应该修改您的`::data`方法以考虑`index`无效的情况，并且仅当角色对应于时才返回一些值`Qt.DisplayRole`。在 Python 中，语法是

```
if index.isvalid():
    if (role == Qt.DisplayRole):
        (row, col) = (index.row(), index.column()
        return_something_depending_on_col
    return QVariant()
return QVariant() 
```

这样，您就可以涵盖无效索引的情况，否则您的代码可能会崩溃。

测试`role`允许您选择要访问的数据类型。例如，[文档](http://doc.qt.nokia.com/4.7-snapshot/qt.html#ItemDataRole-enum)指出：

> 模型中的每个项目都有一组与之关联的数据元素，每个元素都有自己的角色。视图使用角色向模型指示它需要哪种类型的数据。自定义模型应返回这些类型的数据。

基本作用是`Qt.DisplayRole`，在其中返回`QString`与当前单元格对应的位置。如果您的角色是...，您也可以返回`QBrush`用于绘制背景的`Qt.BackgroundRole`...

虽然不是强制性的，但`role`仍然强烈鼓励进行这些测试：它使您的代码更清晰，更易于维护。

# c# - 如何对实体框架进行单元测试？

> ID：12197046
> 
> 赞同：6
> 
> 时间：2012-08-30T12:39:08.320
> 
> 标签：c#, linq, unit-testing, ef-code-first

我正在尝试首先使用 EntityFramework 代码测试我的代码。为了使其可测试并允许隔离测试，我创建了一个我`DbContext`实现的接口。我没有测试这个`DbContext`类 - 我将假设 EF 代码按预期工作。

现在，考虑以下方法：

```
public IEnumerable<User> GetOddId()
{
    return context_.Users.Where((u, i) => i % 2 == 1).AsEnumerable();
} 
```

此方法将与我的模拟一起通过`FakeDbSet`（因为它将使用内存中的 LINQ 提供程序），而在使用 EF/LINQ to SQL 驱动程序时它会失败并出现异常。

你会保持原样并希望人们知道的足够多，不要写这样的查询吗？您会放弃隔离测试并在实际数据库上进行测试吗？

带有 DataMigrations 的 LocalDb（可能带有适当的种子）是否有助于在实际数据库上进行测试？

请证明答案的合理性。

TLDR：考虑到内存 LINQ 和 SQL LINQ 之间的差异，如何测试 EntityFramework 代码？

很久以后的编辑：我已经找到了一个非常好的框架，可以完全满足我的需要。我写了一篇关于[使用 Effort 进行单元测试](http://cvlad.info/unit-testing-and-entityframework/)的博客文章。另请注意，即将推出的 EF6 可能不需要所有这些，它承诺提供一些单元测试功能。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-30T12:59:14.763

为此，我们使用 SQLite 的内存数据库。它们的创建、查询和拆除速度极快，对整体测试速度几乎没有任何影响。一旦你建立了一个测试框架来创建数据库和注入数据，测试就可以快速编写。

当然，SQLite 是一个比大多数数据库简单得多的数据库，因此复杂的查询可能无法转换为它的 SQL 版本，但对于测试 90% 的情况，它运行良好。

这些测试是否构成集成测试？我不这么认为。他们仍然只测试代码的一个单元*，*即生成 LINQ 查询的位。您正在测试两件事：**1)**查询返回正确的数据（但您可以使用内存中的集合来检查这一点，如您所说），以及**2)**实体框架可以将查询转换为有效的 SQL。测试后者的唯一真正方法是在真实的实体框架上触发查询，但使用*存根*数据库。

虽然您可能会争辩说，真正的单元测试应该只测试代码的输出（即解析和检查已生成的表达式树），并且更难编写，但这并不能证明任何事情。例如，如果您修改代码以生成内部连接而不是子查询，您是否希望测试中断？只有当它返回不同的结果时，我才会想到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T12:51:17.423

在我工作的地方，我们有一个开发/测试版/生产 SQL 服务器。有时我们会在对实际数据库执行测试之前针对 beta 和种子测试数据创建测试（例如，在测试特定选择之前插入等）。人们会区分单元测试和集成测试，但它至少可以让我们测试我们的逻辑，这比仅仅交叉手指并希望在数据访问层做到最好要好。

易于测试但在某些重要情况下实际上并不代表实时系统的内存提供程序有什么好处？

编辑：我们不使用EF，顺便说一句......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T16:00:05.247

您可能想要使用像 Telerik 的[JustMock](http://www.telerik.com/products/mocking.aspx)这样的模拟框架（或从许多其他框架中选择）。

这将使您对测试代码中发生的事情有很大的控制权。[（这里](http://www.telerik.com/help/justmock/introduction.html)简短介绍。）

您可以“模拟”查询并返回预定义的对象集合，而不是实现对真实数据库的查询。

例如，您可以创建多个调用您的`GetOddId()`方法的单元测试，并定义涵盖您需要的所有测试用例的不同返回集合（空列表、正确的内容、错误的内容、抛出异常等等……）。

[这里](http://www.telerik.com/freemocking.aspx)或通过 NuGet也有一个免费的“精简版”版本。

# highcharts - highcharts 列标签

> ID：12197047
> 
> 赞同：6
> 
> 时间：2012-08-30T12:39:10.570
> 
> 标签：highcharts

我制作了一个包含分组和堆叠列的 Highcharts 图表，就像在此处找到的示例一样：[http](http://www.highcharts.com/demo/column-stacked-and-grouped) ://www.highcharts.com/demo/column-stacked-and-grouped 。该示例显示了 5 个不同人的许多水果，按性别分组。在这个例子中我错过的是一个 x 轴标签，显示每个组下方的组名称（男性或女性）。是否可以将其添加到图表中？

这是我正在尝试制作的图表的简化版本：http: [//jsfiddle.net/WQjVP/66/](http://jsfiddle.net/WQjVP/66/)。它显示了案件处理系统中三个地点的未解决（蓝色）和过期（红色）问题的数量。每组的左列显示该地点 7 月的数字，每组的右列显示同一单位 8 月的数字。我想做的是在每列下显示月份，以便第一列有“Jul”，第二列有“Aug”，第三列有“Jul”，依此类推，在列和位置标签。

```
chart = new Highcharts.Chart({
    chart: {
        renderTo: 'container',
        type: 'column'
    },
    title: {
         text: ''
    },
    subtitle: {
        text: ''
    },
    xAxis: {
        categories: ["Location A","Location B","Location C"],
        title: {
            text: "Location"
        }
    },
    yAxis: {
        allowDecimals: false

    },
    plotOptions: {
        series: {
            dataLabels: {
                enabled: true,
                formatter: function() {
                    if (this.y === 0) {
                        return null;
                    }
                    return this.y;
                },
                style: {
                    color: 'white'
                }
            }
        },
        column: {
            stacking: 'normal',
            borderWidth: 0
        }
    },
    series: [{
        "color": "rgb(0,0,255)",
        "name": "open",
        "data": [18, 2, 6],
        "stack": "Jul"},
    {
        "color": "rgb(255,0,0)",
        "name": "overdue",
        "data": [0, 0, 0],
        "stack": "Jul"},
    {
        "color": "rgb(0, 0, 255)",
        "name": "open",
        "data": [20, 1, 10],
        "stack": "Aug"},
    {
        "color": "rgb(255, 0, 0)",
        "name": "overdue",
        "data": [2, 1, 2],
        "stack": "Aug"
    }]
}); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-31T00:12:59.100

尝试使用`stackedLabels`.

```
yAxis: {
    stackLabels: {
        enabled: true,
        style: {
            fontWeight: 'bold',
            color: 'gray'
        },
        formatter: function() {
            return  this.stack;
        }
    }
} 
```

[**演示**](http://jsfiddle.net/TrNR6/)

[参考](http://api.highcharts.com/highstock#plotOptions.series.dataLabels)

# javascript - 从javascript中的字符串末尾删除“

> ID：12197048
> 
> 赞同：-2
> 
> 时间：2012-08-30T12:39:15.060
> 
> 标签：javascript, jquery

基本上，我将诸如“box_1”（包括引号）之类的变量作为变量框存储在函数中，传递给将为所述框设置动画的函数，但是我需要一个完整的函数来完成动画之后的工作("box_1 .title") 所以我想要做的是去掉传递给函数的变量末尾的 "，然后使用 (box + '.title"') 我找不到一个简单的答案在线，所以我想我会在这里问:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T12:51:47.907

我认为真正的问题是您将 "s 存储在变量名中。选择器不需要这些。您需要 $(".title") 之类的引号的唯一原因是将 .title 声明为一个字符串。您的字符串不应包含引号。请参阅此示例：http: [//jsfiddle.net/n5htY/](http://jsfiddle.net/n5htY/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T12:48:16.367

也许`$(given_selector_string).find('.title')`是你正在寻找的？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T12:44:36.850

你可以简单地砍掉最后一个`"`& 连接;

```
id = id.substr(0, id.length - 1) + " .title\""​​​​​​​​; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T12:44:48.977

只是删除最后一个字符？

```
box.substring(0, box.length-1); 
```

# javascript - Ajax 调用冻结了 Internet Explorer 中的 UI，但在 Firefox 中运行良好

> ID：12197051
> 
> 赞同：0
> 
> 时间：2012-08-30T12:39:29.710
> 
> 标签：javascript, ajax, internet-explorer, jquery, dwr

我正在进行 AJAX 调用（Savvion Business Manager 中的 JSP 页面），我想在处理 AJAX 请求时显示 LOADING SPINNER

它在 Firefox 中运行良好，但在 Internet Explorer 中，UI 冻结，直到在回调成功函数中收到响应。我猜 Internet Explorer 没有进行异步调用。我在回调成功函数中收到响应，但是在进行 Ajax 调用时加载微调器会冻结。

这是代码

```
function CallbackMyFunction(data)
{
        hideLoadingSpinner();

       // Some Code Here
       ...
}

.
.
.

function AjaxFunction()
{
   showLoadingSpinner();

   SetupAjax.myFunction(jQuery("#Var1").val(), jQuery("#Var2").val(), CallbackMyFunction);

   // Some Code Here
   ...
} 
```

DWR 用于 SetupAjax.myFunction()

SetupAjax.myFunction() 返回实现“java.io.Serializable”的“AJAXResponseDTO”对象

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T12:52:01.183

我猜这`setupAjax.myFunction`是在进行异步 AJAX 调用。可能仅从 IE 访问时。如果您准确发布`setupAjax.myFunction`AJAX 调用的定义或行会更清楚。

# node.js - express cookie 返回未定义

> ID：12197053
> 
> 赞同：6
> 
> 时间：2012-08-30T12:39:37.887
> 
> 标签：node.js, cookies, express, session-cookies

我正在尝试在 express.js 上设置 cookie，但它返回未定义。我搜索了很多网页并放在`express.cookieParser()`上面，`app.use(app.router)` 但它仍然无法返回正确的值。

应用程序.js

```
app.configure(function(){
   var RedisStore = require('connect-redis')(express);
    app.use(express.logger());
    app.set('view options', { layout: false });
    app.set('views', __dirname + '/views');
    app.set('view engine', 'jade');
    app.use(express.bodyParser({uploadDir: './uploads/tmp'}));
    app.use(express.methodOverride());
    app.use(express.cookieParser());
    app.use(express.session({ secret: "william", store: new RedisStore }));
//Initialize Passport!  Also use passport.session() middleware, to support
//persistent login sessions (recommended).
    app.use(passport.initialize());
    app.use(passport.session());
    //app.router should be after passportjs
    app.use(app.router);
    app.use(express.compiler({ src: __dirname + '/public', enable: ['less']}));
    app.use(express.static(path.join(__dirname, 'public')));
});

app.get('/', function(req, res) {
    res.cookie('cart', 'test', {maxAge: 900000, httpOnly: true})
});

app.get('/test', function(req, res) {
    res.send('testcookie: ' + req.cookies.cart);
}); 
```

结果：

```
testcookie: undefined 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T21:09:38.377

Cookies are set in HTTP Headers. `res.cookie()` just sets the header for your HTTP result, but doesn't actually send any HTTP. If your code was syntactically correct and it ran, it would actually just sit and not return anything. I also fixed some syntax bugs in your code in this `app.get()`:

```
app.get('/', function(req, res) {
    res.cookie('cart', 'test', {maxAge: 900000, httpOnly: true});
    res.send('Check your cookies. One should be in there now');
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T16:57:43.830

`res.end()`在设置 cookie 之后，您需要发送一些东西，或者至少调用。否则`res.cookie()`，所做的只是将一些标头添加到稍后将发送出去的标头列表中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-21T08:50:59.867

将 cookie 名称设置为 value，其中可能是转换为 JSON 的字符串或对象。路径选项默认为“/”。

```
res.cookie('name', 'tobi', { domain: '.example.com', path: '/admin', secure: true }); 
```

这是链接以获取更多详细信息

[http://expressjs.com/api.html#res.cookie](http://expressjs.com/api.html#res.cookie)

# python - forms.py 的问题

> ID：12197058
> 
> 赞同：3
> 
> 时间：2012-08-30T12:39:56.590
> 
> 标签：python, django, django-forms

当我提交表单时，我**在 forms.py 第 25 行 password1=self.cleaned_data['password1']**`KeyError`得到了password1 。文件代码如下：

 **forms.py 的代码是：

```
from django import forms
from django.contrib.auth.models import User
from django.forms import ModelForm
from drinker.models import Drinker

class RegistrationForm(ModelForm):
       username   = forms.CharField(label=(u'User Name'))
       email      = forms.EmailField(label=(u'Email Address'))
       password   = forms.CharField(label=(u'Password'), widget=forms.PasswordInput(render_value=False))
       password1   = forms.CharField(label=(u'Verify Password'), widget=forms.PasswordInput(render_value=False))

       class Meta:
              model=Drinker
              exclude=('user',)

       def clean_username(self):
                username=self.cleaned_data['username']
                try:
                      User.objects.get(username=username)
                except User.DoesNotExist:
                      return username
                raise forms.ValidationError("The Username is already taken, please try another.")
       def clean_password(self):
                password=self.cleaned_data['password']
                password1=self.cleaned_data['password1']
                if password != password1:
                    raise forms.ValidationError("The Password did not match, please try again.")
                return password 
```

html文件的代码是：

```
{% extends "base.html" %}
{% block extrahead %}
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js" type="text/javascript"></script>
    <script>
    $(function() {
        $( "#id_birthday" ).datepicker();
    });
    </script>
{% endblock %}
{% block content %}
<form action="" method="post">
{% csrf_token %}
{% if form.errors %}<p>Please correct the following fields:</p>{% endif %}
<div class="register_div">
    {% if form.username.errors %}<p class="error">{{ form.username.errors }}</p>{% endif %}
    <p><label for="username"{% if form.username.errors %} class="error"{% endif %}>Username:</label></p>
    <p>{{ form.username }}</p>
</div>
<div class="register_div">
    {% if form.email.errors %}<p class="error">{{ form.email.errors }}</p>{% endif %}
    <p><label for="email"{% if form.email.errors %} class="error"{% endif %}>Email:</label></p>
    <p>{{ form.email }}</p>
</div>
<div class="register_div">
    {% if form.password.errors %}<p class="error">{{ form.password.errors }}</p>{% endif %}
    <p><label for="password"{% if form.password.errors %} class="error"{% endif %}>Password:</label></p>
    <p>{{ form.password }}</p>
</div>
<div class="register_div">
    {% if form.password1.errors %}<p class="error">{{ form.password1.errors }}</p>{% endif %}
    <p><label for="password1"{% if form.password1.errors %} class="error"{% endif %}>Password1:</label></p>
    <p>{{ form.password1 }}</p>
</div>
<div class="register_div">
    {% if form.birthday.errors %}<p class="error">{{ form.birthday.errors }}</p>{% endif %}
    <p><label for="birthday"{% if form.birthday.errors %} class="error"{% endif %}>Birthday:</label></p>
    <p>{{ form.birthday }}</p>
</div>
<div class="register_div">
    {% if form.name.errors %}<p class="error">{{ form.name.errors }}</p>{% endif %}
    <p><label for="name"{% if form.name.errors %} class="error"{% endif %}>Name:</label></p>
    <p>{{ form.username }}</p>
</div>
<p><input type="submit" value="submit"/></p>
</form>
{% endblock %} 
```

视图文件是

```
from django.http import HttpResponseRedirect
from django.contrib.auth.models import User
from django.shortcuts import render_to_response
from drinker.models import Drinker
from django.template import RequestContext
from drinker.forms import RegistrationForm

def DrinkerRegistration(request):
    if request.user.is_authenticated():
         return HttpResponseRedirect('/profile/')
    if request.method == 'POST':
         #return render_to_response('register')
         form = RegistrationForm(request.POST)
         if form.is_valid():
                  user=User.objects.create_user(username=form.cleaned_data['username'], email=form.cleaned_data['email'], password = form.cleaned_data['password'])

                  user.save()
 #                 drinker=user.get_profile()
  #                drinker.name=form.cleaned_data['name']
   #               drinker.birthday=form.cleaned_data['birthday']
    #              drinker.save()
                 drinker=Drinker(user=user,name=form.cleaned_data['name'],birthday=form.cleaned_data['birthday'])  
                  drinker.save()    
                  return HttpResponseRedirect('/profile/')
         else:
                  return render_to_response('register.html',{'form':form} , context_instance=RequestContext(request))  
    else:
         ''' user is not submitting the form, show them a blank registration form '''

         form = RegistrationForm()
         context={'form':form}
         return render_to_response('register.html',context , context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T12:51:26.253

Django`clean_xxx()`为表单中的每个字段调用方法。当一个字段有效时，它会将键/值添加到`cleaned_data`. 当 Django 调用`clean_password`并且尚未处理该字段`password1`时，`cleaned_data`将不包含`password1`. 那是您当前遇到的错误。

要修复它，您需要将`clean()`在 Django 单独检查每个字段后调用的密码验证移动到该位置。此方法可用于执行涉及表单的多个字段（即整个表单）的验证。

这也是有道理的，因为您要提出的错误是关于`password`and之间的不匹配`password1`，而不仅仅是字段`password`（您当前正在清理的字段）。**

# javascript - Nodejs 一个请求阻塞了另一个请求

> ID：12197064
> 
> 赞同：2
> 
> 时间：2012-08-30T12:40:11.100
> 
> 标签：javascript, node.js

如果一个请求需要很长时间才能执行，另一个选项卡将等到第一个请求完成。为什么？请解释一下。以及如何解决？这是我的代码：

```
var http = require("http");
var url = require("url");

http.createServer(function(request, response) {

    if (url.parse(request.url).pathname == '/long')
    {
        function longlong()
        {
            var counter = 0;
            var startTime = new Date().getTime();
            while (new Date().getTime() < startTime + 10000)
            {
                counter++;
            }
            return counter;
        }

        response.writeHead(200, {"Content-Type": "text/plain"});
        response.write(longlong() + '');
        response.end();
    }
    else
    {
      response.writeHead(200, {"Content-Type": "text/plain"});
      response.write(0 + '');
      response.end();
    }

}).listen(8888); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T13:09:16.683

好读：

[http://blog.mixu.net/2011/02/01/understanding-the-node-js-event-loop/](http://blog.mixu.net/2011/02/01/understanding-the-node-js-event-loop/)

这篇文章的关键是：

> …然而，除了你的代码之外，一切都是并行运行的

这意味着昂贵的 I/O 应该是异步的，但您的代码可能会阻塞。但是，我们担心在服务器上阻塞通常是昂贵的 I/O。

有关示例的更多详细信息，请参阅其他问题：[Node.js blocking the event loop？](https://stackoverflow.com/questions/12052907/node-js-blocking-the-event-loop/12053141#12053141)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T12:50:34.493

因为 NodeJS 是单线程的（就像浏览器 JavaScript 一样）。它一次只能处理一个代码。我们得到了并发的错觉，因为 NodeJS 有非常花哨的代码块队列，它们以异步方式触发。但是，一旦处理了块，就不能同时处理其他块。

使用 NodeJS，您必须确保每个请求都结束（无论成功与否），否则它可能会崩溃，超出任何帮助（整个服务器，而不仅仅是请求）。

也使用`process.nextTick`而不是经典循环可以帮助您的请求更快地工作（即更具可扩展性）。

# jquery - 强制使用 jQuery 而不是 $

> ID：12197071
> 
> 赞同：2
> 
> 时间：2012-08-30T12:40:52.393
> 
> 标签：jquery

我正在用 jquery 脚本编写我的页面，然后写成这样`$.`，`$(` 我的示例代码就像这里

```
<script src="http://code.jquery.com/jquery-latest.js"></script>

function dome(){
  $.ajax({
     async: false,
     type: 'POST',
     url: 'test.php',
     success: function(data) {
     alert('ok');
     }
});
} 
```

但我也必须使用原型库，然后添加代码`<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/prototype/1.7.1.0/prototype.js"></script>`

我上面的功能不再起作用 firebug 的错误报告是**TypeError: $.ajax is not a function** 那么解决这个问题的唯一方法是更改`$.ajax({`​​为`jQuery.ajax({`

你知道我怎样才能像以前一样短地编写代码（$.）吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T12:43:47.897

您必须`$`在代码中定义才能使用它；`jQuery.noConflict();`也会成功的。检查 Internet 上如何设置`$`为 jQuery 运算符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T12:43:45.450

```
<script src="https://ajax.googleapis.com/ajax/libs/prototype/1.7.1.0/prototype.js"></script>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script>    
    (function($){ // remap '$' to jQuery

       $(function(){  // DOM ready
           // YOUR STUFF HERE
       });

    })(jQuery); 
</script> 
```

或者看一下文档中的[jQuery.noconflict](http://api.jquery.com/jQuery.noConflict/) *：*

```
jQuery.noConflict();
// Do something with jQuery
jQuery("div p").hide();
// Do something with another library's $()
$("content").style.display = 'none'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T12:41:47.993

使用 jQuery.noConflict(); 在你的代码中。

在这里阅读[http://api.jquery.com/jQuery.noConflict/](http://api.jquery.com/jQuery.noConflict/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T12:42:37.807

将其他内容分配给 Jquery，例如

```
var $_ = jQuery 
```

然后使用`$_.ajax()`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T12:42:24.763

`jQuery.noConflict();`是您正在寻找的用于分离库用途的确切内容。 [看这里](http://api.jquery.com/jQuery.noConflict/)

# wcf - WCF wsHttpBinding 安全错误

> ID：12197079
> 
> 赞同：2
> 
> 时间：2012-08-30T12:41:10.253
> 
> 标签：wcf, wcf-security

我有一个托管在 Windows 服务中并使用用户域帐户运行的 WCF。

我在该域中的所有客户端（控制台应用程序或 Web 应用程序）都运行良好。

我有一个不在域中不起作用的控制台应用程序。

这是错误：

```
Exception non gérée : System.ServiceModel.Security.SecurityNegotiationException:
L'appelant n'a pas été authentifié par le service. ---> System.ServiceModel.Fau
ltException: The request for security token could not be satisfied because authe
ntication failed. 
```

这是 WCF 服务器配置：

```
 <wsHttpBinding>
        <binding name="TransactionalBind" transactionFlow="true"/>
      </wsHttpBinding>

[...]

    <endpoint address="http://machine.domain.fr:1083/MyService/"
              binding="wsHttpBinding"
              bindingConfiguration="TransactionalBind"
              contract="MyService.IMyService"/>
[...]

    <behavior name="MyBahavior">
      <serviceMetadata httpGetEnabled="True"/>
      <serviceDebug includeExceptionDetailInFaults="True" />
      <dataContractSerializer maxItemsInObjectGraph="2147483647" />
    </behavior> 
```

这是我的客户端配置：

```
 <wsHttpBinding>
            <binding name="WSHttpBinding_IMyService" closeTimeout="00:01:00"
                openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                bypassProxyOnLocal="false" transactionFlow="true" hostNameComparisonMode="StrongWildcard"
                maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                messageEncoding="Text" textEncoding="utf-8" useDefaultWebProxy="true"
                allowCookies="false">
                <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                    maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                <reliableSession ordered="true" inactivityTimeout="00:10:00"
                    enabled="false" />
                <security mode="Message">
                    <transport clientCredentialType="Windows" proxyCredentialType="None"
                        realm="" />
                    <message clientCredentialType="Windows" negotiateServiceCredential="true"
                        algorithmSuite="Default" />
                </security>
            </binding>
        </wsHttpBinding>
[...]

        <client>
            <endpoint address="http://machine.domain.fr:1083/MyService/"
                binding="wsHttpBinding" bindingConfiguration="WSHttpBinding_IMyService"
                contract="wsArchi.IMyService" name="WSHttpBinding_IMyService">
            </endpoint>
        </client> 
```

你能帮我吗 ？

非常感谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-11T04:26:50.400

尝试使用 BasicHttpBinding ...我在使用 WSHttpBinding 时遇到了问题 .... BasicHttpBinding 解决了我的问题。！！！

# javascript - javascript 定时函数 - 预期标识符

> ID：12197081
> 
> 赞同：0
> 
> 时间：2012-08-30T12:41:11.143
> 
> 标签：javascript

我遇到了一个简单脚本的问题，该脚本应该使用一些值（用户输入）更新页面，这些值从每月变为每年（数字进入由 confirmIT 创建的数字字段）

```
<script>
function update() {
  for (var i = 0; i < 9; i++) {
    var ans = parseInt(document.getElementById("bq10a_" + i).value, 10);
    if (!isNaN(ans)) {
      var new = ans * 12;
      document.getElementById("bq10a_" + i + "calc").value = new;
    }
  }
}
return;
}

setInterval("update()", 1000);    
</script> 
```

这会在线产生一个预期的标识符错误

```
var new = ans*12; 
```

我将不胜感激有关如何解决它的任何帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T12:42:31.830

该词`new`是 JavaScript 中的保留字，不能用作变量的名称。

该错误意味着解析器期望一个“标识符”，也就是说它期望看到一个*有效*的标识符。

更改变量的名称，事情应该会有所改善。在您发布的代码中，我认为存在`{ }`嵌套问题；`return`在函数的之前似乎有一个太多。

*编辑*——也正如 jbabey 在评论中指出的那样，你的`setInterval()`电话应该是

```
setInterval(update, 1000); 
```

`setInterval()`尽管有成千上万个发霉的旧教学网站的建议，但通常将字符串传递给 并不是一个好主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T12:47:02.390

单词“new”——在 javascript 语言中很特殊：

行不正确：

```
var new = ans*12; 
```

试试这个：

```
var newvalue = ans*12; 
```

更多信息：

[http://javascript.about.com/library/blreserved.htm](http://javascript.about.com/library/blreserved.htm)

[http://www.ecma-international.org/publications/standards/Ecma-262.htm](http://www.ecma-international.org/publications/standards/Ecma-262.htm)

# sql - 不使用子查询的 SQL 查询

> ID：12197082
> 
> 赞同：-1
> 
> 时间：2012-08-30T12:41:14.953
> 
> 标签：sql, oracle

我正在使用 2 张桌子

假设（这些表还有更多内容，但这只是一个非常简单的视图）

```
Table1 is
sID   ResearchPaperID 
1     A1
2     A1
3     A1
4     A1

Table2 is
sID    Name
1     Person1
2     Person2
3     Person3
4     Person4 
```

我需要做的是找到与（共同撰写）Person1 的论文但未在输出中显示 Person1 的人。

目前我有类似的东西

```
SELECT Table2.sID, Table1.sID
FROM Table2, Table1
WHERE Table2.sID = Table1.sID
AND Table2.Name = 'Person1' 
```

这会给我 Person1 所做的一切。

这是一个家庭作业问题，现在已经停留了一段时间。

**也不能使用子查询。对不起，我应该提到不使用内连接、外连接、左/右连接、自然连接。**

它不应该比我上面仅使用基本命令更难..

[编辑] 输出会是这样的

```
ResearchPaperID    Name
A1                 Person2
A1                 Person3
A1                 Person4 
```

我想找到那些是 person1 论文的共同作者但在输出中不显示 person1 的人

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T12:59:12.300

```
SELECT * 
FROM Table1 t1
INNER JOIN Table1 t2 ON t1.ResearchPaperID = t2.ResearchPaperID
INNER JOIN Table2 t3 ON t1.SID = t2.SID
WHERE t3.Name = 'Person1' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T12:59:29.203

你需要弄清楚如何识别论文的*主要*作者，然后假设其他人都是共同作者。一旦你能做到这一点，你的 SQL 查询将需要排除该主要作者，但包括所有其他人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T13:13:58.920

解决方案，没有子查询和 JOIN：

```
select distinct t3.sID, t3.ResearchPaperID
from Table1 t1, Table2 t2, Table1 t3
where t1.sID = t2.sID and t2.Name = 'Person1'
  and t1.ResearchPaperID = t3.ResearchPaperID
  and t3.sID <> t2.sID       -- this restriction is the one that removes the 'Person1' 
```

# jquery - eq() 与 index() jQuery

> ID：12197083
> 
> 赞同：-1
> 
> 时间：2012-08-30T12:41:15.607
> 
> 标签：jquery, for-loop

我想访问`for`循环内的元素，`jQuery`我应该使用哪个构造？

`eq()`或者`index()`它们有什么不同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T12:53:47.070

我会推荐每个这样的用法

```
.each(function(index) {
    $(this) //references the element
    index //references the index
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T13:14:18.413

如果你在一个循环中，你会想要使用[eq()](http://api.jquery.com/eq/) - 因为 .eq() 在传入的索引处返回 jQuery 对象。

```
for( i= 0; i<3; i++){
   $('div').eq(i); // <-- gets div elements from index 0-2
}); 
```

如果您使用 .each() 循环遍历它，则它已经具有索引、元素参数

```
 //(key,value)  <-- if map
$.each(function(indexInArray, valueOfElement){

}); 
```

# android - 如何使用两个片段实现视频和视频列表

> ID：12197084
> 
> 赞同：1
> 
> 时间：2012-08-30T12:41:22.457
> 
> 标签：android, android-fragments, expandablelistview, android-videoview

我正在创建一个应用程序`HonyComb`，我必须在其中显示视频和视频列表。为此，我创建了两个片段，一个用于显示视频，另一个用于 videoList。当用户单击视频列表时，该视频应该开始`videoview`在其他片段中播放。

我创建了`expandablelist`用于显示 videoList 的自定义（因为我的视频被归类为组）。我必须显示视频图像、标题和描述，我已经为其创建了一个`imageview`和两个布局`textview`。我能够显示视频列表。现在我被困在两点：

1.  单击视频列表时，我无法播放视频。`onChildCLick()`没有被调用，但`onTouch()`能够`onGroupClick()`被调用。
2.  我想在用户点击时全屏播放视频`VideoView`。我不知道如何实现。

请帮我..

1.  片段布局.xml

    ```
    <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" > 
    <fragment
        android:id="@+id/detailFragment"
        android:layout_width="0dip"
        android:layout_height="match_parent"
        android:layout_weight="1"
        class="com.abs.qpr.VideoFragment" >
    </fragment>

    <fragment
        android:id="@+id/listFragment"
        android:layout_width="0dip"
        android:layout_height="match_parent"
        android:layout_weight="0.6"
        class="com.abs.qpr.VideoListFragment" > 
    </fragment> 
    </LinearLayout> 
    ```

2.  我的活动.java

    ```
     import android.os.Bundle;

     public class MyActivity extends android.support.v4.app.FragmentActivity{

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.fragment_layout);
    }

    } 
    ```

3.  视频片段.java

    ```
    import android.net.Uri;
    import android.os.Bundle;
    import android.support.v4.app.Fragment;

    public class VideoFragment extends Fragment{
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
      Bundle savedInstanceState) {
    Log.d("VideoFragment", "On Create View");

    View view = inflater.inflate(R.layout.activity_my_video, container,  false);
    return view;

     }

      @Override
      public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
      } 

    public void playVideo() {

    VideoView myVideoView2=  (VideoView)getView().findViewById(R.id.my_tecnique_video);
    String temp="android.resource://" + getActivity().getApplicationContext().getPackageName() + "/" 
    + R.raw.back_circles;

    System.out.println(temp + ": " + getActivity().getApplicationContext());
     Uri video = Uri.parse("android.resource://" + getActivity().getApplicationContext().getPackageName() + "/" 
                + R.raw.back_circles);

        myVideoView2.setVideoURI(video);
        myVideoView2.setMediaController(new MediaController(getActivity()));
        myVideoView2.requestFocus();
        myVideoView2.start();
     } 
    } 
    ```

4.  VideoListFragment.java

    ```
    public class VideoListFragment extends Fragment {
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    Log.e("VideoFragment", "On Create View");
    View view = inflater.inflate(
            R.layout.activity_my_techniques_video_list, container, false);
    return view;
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    Log.e("VideoListFragment", "On Activity Created ");

    ExpandableListView expList = (ExpandableListView) getView()
            .findViewById(R.id.my_tech_video_listview);

    expList.setAdapter(new VideoExpandableListAdapter(getActivity()));

    expList.setOnChildClickListener(new OnChildClickListener() {

     @Override
     public boolean onChildClick(ExpandableListView expandablelistview,
                View view, int i, int j, long l) {

            // TODO Auto-generated method stub
            Log.d("Checking.....", "onGroupClick()");

            VideoFragment fragment = (VideoFragment) getFragmentManager()
                    .findFragmentById(R.id.detailFragment);
            if (fragment != null && fragment.isInLayout()) {
                fragment.playVideo();
            } else {

                Intent videointent = new Intent(getActivity()
                        .getApplicationContext(), VideoActivity.class);

                startActivity(videointent);

            }

            return false;
        }
    });
    } 
    ```

5.  VideoExpandableListAdapter.java

    ```
    public class VideoExpandableListAdapter extends BaseExpandableListAdapter{

    private Context myContext;
    ArrayList<VideoListVO> videoListVO;

    public VideoExpandableListAdapter(Context context) {
    myContext = context;        
    }

    @Override
    public Object getChild(int groupPosition, int childPosition) {
    // TODO Auto-generated method stub
    return null;
    }

    @Override
    public long getChildId(int groupPosition, int childPosition) {
    // TODO Auto-generated method stub
    return 0;
    }

    @Override
    public View getChildView(int groupPosition, int childPosition,
        boolean isLastChild, View convertView, ViewGroup parent) {

    if (convertView == null) {
        LayoutInflater inflater = (LayoutInflater) myContext
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        convertView = inflater.inflate(R.layout.childrow, null);

    }

    VideoListVO vlvo= videoListVO.get(groupPosition);
    VideoDetailsVO vdvo=vlvo.getVideoDetailList().get(childPosition);

    InputStream is = null;
    try {
        String imageName=vdvo.getImageName();
        imageName="images/"+imageName+".png";
      is = myContext.getResources().getAssets().open(imageName);
    } catch (IOException e) {
      Log.w("EL", e);
    }

    Bitmap image = BitmapFactory.decodeStream(is);

    ImageView ib2 = (ImageView) convertView.findViewById( R.id.video_image);
    ib2.setImageBitmap(image);

    TextView titleText=(TextView)convertView.findViewById(R.id.video_title_text);
    titleText.setText(vdvo.getVideoTitle());

    TextView descriptionText=(TextView)convertView.findViewById(R.id.video_description);
    descriptionText.setText(vdvo.getVideoDescription());

    return convertView;
    }

    @Override
    public int getChildrenCount(int groupPosition) {
    // TODO Auto-generated method stub
    return videoListVO.get(groupPosition).getVideoDetailList().size();
    }

    @Override
    public Object getGroup(int groupPosition) {
    // TODO Auto-generated method stub
    return null;
    }

    @Override
    public int getGroupCount() {
    // TODO Auto-generated method stub
    return videoListVO.size();
    }

    @Override
    public long getGroupId(int groupPosition) {
    // TODO Auto-generated method stub
    return 0;
    }

    @Override
    public View getGroupView(int groupPosition, boolean isExpanded,
        View convertView, ViewGroup parent) {

    if (convertView == null) {
        LayoutInflater inflater =  (LayoutInflater) myContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        convertView = inflater.inflate(R.layout.group_row, null);
       }
    TextView tvGroupName = (TextView) convertView.findViewById(R.id.tvgrpname);
    tvGroupName.setText(videoListVO.get(groupPosition).getVideoType());

    return convertView;
    }

    @Override
    public boolean hasStableIds() {
    // TODO Auto-generated method stub
    return false;
    }

    @Override
    public boolean isChildSelectable(int groupPosition, int childPosition) {
    // TODO Auto-generated method stub
    return true;
    }

    } 
    ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T13:54:03.667

请从 ListFragment 扩展 VideoListFragment（正确方式），您可以在其中直接设置适配器，可以收听 listitemclick 事件等，这将有助于解决您的问题。

为此，您可以阅读[本](http://mobile.tutsplus.com/tutorials/android/android-sdk_fragments/)教程。

然后解决您的第二个问题（点击时全屏视图）：

当用户触摸视频部分两次（点击）时（您可以借助 ontouchlistener 和计时器来检查是否发生连续触摸），调用视图部分中的另一个活动，设计为全屏视图。所以当用户点击返回时，它会回到片段活动。

# xml - 使用 Xerces-C 进行批量 XML 验证

> ID：12197087
> 
> 赞同：1
> 
> 时间：2012-08-30T12:41:26.667
> 
> 标签：xml, validation

我正在使用 XML ValidatorBuddy 设置批处理验证环境。在创建批处理任务时，我可以在 Xerces-C 和 Xerces-C SAX 解析器（以及其他...）之间进行选择。在为我的 XML 实例文档运行批处理时，无论我使用 Xerces 还是 Xerces SAX，我都会得到相同的结果。

我知道 SAX 解析器需要更少的内存并且还可以验证更大的 XML 文件。但是，如果我为计划的批处理验证任务选择 SAX 解析器，会有什么缺点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T09:15:06.563

You can find more information about differences between the Xerces-C SAX and DOM parser [here](https://stackoverflow.com/questions/3148604/difference-between-dom-parser-and-xerces-parser)

According to the link above in your particular case of XML ValidatorBuddy the only difference will be that using SAX the batch run will use much less memory and should be the preferred parser.

# c# - IDDictionary 到字符串

> ID：12197089
> 
> 赞同：1
> 
> 时间：2012-08-30T12:41:30.427
> 
> 标签：c#, extension-methods, idictionary

我创建了一个`IDictionary`扩展来将`IDictionary Exception.Data`值写入字符串。

扩展代码：

```
public static class DictionaryExtension
{
    public static string ToString<TKey, TValue>(this IDictionary<TKey, TValue> source, string keyValueSeparator, string sequenceSeparator)
    {
        if (source == null)
            throw new ArgumentException("Parameter source can not be null.");

        return source.Aggregate(new StringBuilder(), (sb, x) => sb.Append(x.Key + keyValueSeparator + x.Value + sequenceSeparator), sb => sb.ToString(0, sb.Length - 1));           
    }
} 
```

当我使用此扩展程序时`Exception.Data.ToString("=", "|")`出现错误

`The type arguments cannot be inferred from the usage.`

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-30T12:44:12.653

[`Exception.Data`](http://msdn.microsoft.com/en-us/library/system.exception.data.aspx)是类型`IDictionary`，不是`IDictionary<TKey, TValue>`。

您需要将扩展​​方法更改为：

```
public static string ToString(this IDictionary source, string keyValueSeparator,
                                                       string sequenceSeparator) 
{ 
    if (source == null) 
        throw new ArgumentException("Parameter source can not be null."); 

    return source.Cast<DictionaryEntry>()
                 .Aggregate(new StringBuilder(),
                            (sb, x) => sb.Append(x.Key + keyValueSeparator + x.Value
                                                  + sequenceSeparator),
                            sb => sb.ToString(0, sb.Length - 1));            
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T13:16:41.780

例外是指出您缺少演员表。我在测试项目中复制了您的代码，但无法重现您的错误。尝试使用`x.Key.ToString()`和`x.Value.ToString()`。我发现的唯一一件事是 Dictionary 为空时引发的错误： `sb.ToString(0, sb.Length - 1)`when lenght is zero is not working

# solr - 如何在 solr 查询中实现 mod

> ID：12197090
> 
> 赞同：1
> 
> 时间：2012-08-30T12:41:30.520
> 
> 标签：solr, lucene, modulo

我正在寻找一种使用 mod 函数查询 solr 的方法，例如 q=mod(id):2 它将返回 id mod 2 等于 0 的文档。有没有办法进行这种搜索？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T05:46:24.687

我找到了解决方案。在 fq 中使用函数是完美的。查询看起来像：

```
q=subject:mp3&fq={!frange l=0 u=1}mod(id,2) 
```

[http://lucene.apache.org/solr/api-4_0_0-BETA/org/apache/solr/search/FunctionRangeQParserPlugin.html](http://lucene.apache.org/solr/api-4_0_0-BETA/org/apache/solr/search/FunctionRangeQParserPlugin.html)

# ruby-on-rails - 使图像安全，使其不被他人访问

> ID：12197092
> 
> 赞同：0
> 
> 时间：2012-08-30T12:41:34.750
> 
> 标签：ruby-on-rails, ruby-on-rails-3, image, amazon-s3, paperclip

我使用回形针 gem 将图像存储到 s3 并显示为 amazon 的 url。我需要的是，我想将图像存储在 s3 中，并且我只希望用户使用 url 查看图像。现在，如果知道 url，则可以在任何地方访问图像。那么如何限制呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T15:49:20.543

Github 上的回形针 wiki 上有关于如何执行此操作的非常详细的描述： [检查这里](https://github.com/thoughtbot/paperclip/wiki/Restricting-Access-to-Objects-Stored-on-Amazon-S3)。只需向具有权限的用户提供以这种方式创建的链接，它应该可以正常工作。

# objective-c - Objective-C：理解 ARC

> ID：12197095
> 
> 赞同：1
> 
> 时间：2012-08-30T12:41:45.543
> 
> 标签：objective-c, ios, automatic-ref-counting

我是 Objective-C 的新手。这是我对一些用于以编程方式添加子视图的简单代码的 ARC 的理解（如在评论中）。如果我错了，请纠正我。特别是在这个声明中：

> “ViewController 弱指向 myView”实际上意味着 _myView（ViewController 的 ivar）弱指向 UIView 对象

```
// _myView stores a pointer pointing to a UIView object
// "ViewController points to myView weakly" ACTUALLY means that _myView (ViewController's ivar) points to a UIView object weakly

@interface ViewController ()
@property (nonatomic,weak) UIView *myView;
@end

@implementation
@synthesize myView = _myView;
@end

- (void)viewDidLoad
{
    [superviewDidLoad];
    CGRect viewRect = CGRectMake(10, 10, 100, 100);

    // a UIView object is alloc/inited    
    // mv is a pointer pointing to the UIView object strongly (hence the owner of it)
    UIView *mv = [[UIView alloc] initWithFrame:viewRect];

   // _myView points to the UIView object weakly 
   // Now the UIView object now have two pointers pointing to it
   // mv points to it strongly
   // _myView points to it weakly, hence NOT a owner 
   self.myView = mv;

   // self.view points to the UIView object strongly
   // Now UIView object now have THREE pointer pointing to it
   // Two strong and one weak
   [self.view addSubview:self.myView];
}   

// After viewDidLoad is finished, mv is decallocated. 
// Now UIView object now have two pointer pointing to it. self.view points to it strongly hence the owner, while _myView points to it weakly. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T12:45:57.523

你大部分是正确的，除了这句话：

> viewDidLoad 完成后， mv 被释放。

那就是你错了。请记住，对象的释放只有`retain`在对象`release`的每个人都属于它时才会发生。因此，虽然您已经获得`release`了临时变量`mv`，但您仍然有另一个来源保留它：`self.view.subviews`. 一旦`mv`从子视图数组中删除，它就可以被正确清理，`_myView`设置为`nil`，并且您不再有泄漏。

# mongodb - mongodb数据库参考

> ID：12197098
> 
> 赞同：1
> 
> 时间：2012-08-30T12:41:55.217
> 
> 标签：mongodb, mongodb-java

我是 mongodb 的新手。我需要使用主键和外键概念链接两个集合，例如在关系数据库中的一个。

我知道 mongodb 不支持连接。

```
comments
 { uid:12345, pid:444, comment="blah" }
 { uid:12345, pid:888, comment="asdf" }
 { uid:99999, pid:444, comment="qwer" }

users
 { uid:12345, name:"john" }
 { uid:99999, name:"mia"  } 
```

在评论集合中，uid --> 主键，在用户中，uid--> 外键。

如何在 mongodb 中插入集合时解决这种关系？如何引用它？

你能给我发个mongodb命令吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:04:34.250

使用 MongoDB 时的一个常见新手错误是将其视为关系数据库。

在 MongoDB 中，您通常不需要自己的 ID，因为每个文档都会自动具有 _id 字段（这是一个 GUID）。

要在 MongoDB 中引用另一个实体，可以使用 DBRef 对象。因此，每个评论文档都应该有一个字段“作者”，它是用户集合中文档的 DBRef。或者，您可以只使用要引用的对象的 GUID 作为“作者”的值。

有关详细信息，请参阅[http://docs.mongodb.org/manual/applications/database-references/](http://docs.mongodb.org/manual/applications/database-references/)。

关于将文档及其引用的文档放在一起：您必须在加载文档时在应用程序级别执行此操作。MongoDB Java 驱动程序中的 DBRef 类具有 fetch() 方法，该方法自动获取它引用的文档。这使得实现起来非常简单。

# c# - 调用二级基类构造函数

> ID：12197106
> 
> 赞同：4
> 
> 时间：2012-08-30T12:42:07.213
> 
> 标签：c#, oop, inheritance, encapsulation

在 C# 中，我有一个类 ，`foo`它继承自 class `bar`，而后者又继承自 class `foobar`。

在`foo`构造函数中，我想`foobar`直接调用构造函数，而不是从调用`bar`构造函数。我试过这样的事情：

```
 public foo(int i): base : base(i) 
```

显然这是行不通的。在不通过`bar`构造函数的情况下，您将如何使其工作？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-30T12:44:05.573

你不能，因为你不能跳过 bar 的初始化。您必须在 bar 中创建一个构造函数来传递您的参数。原因是 bar 有责任决定如何构造它的基类。（基类的构建是bar*实现*的一部分，面向对象的原则之一就是封装——将实现隐藏在外面。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T12:45:11.843

从构造函数中取出您想要执行的任何共享逻辑`foobar`。

在调用初始化中创建一个方法`foobar`，签名将是`void initialize(int i)`

从 中的构造函数调用此方法`foo`。

当然，这不会跳过`bar`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T12:46:47.617

我认为您正在尝试从并非旨在以这种方式工作的语言功能中获得一些特定行为。有点类似于，例如，使用异常来控制正常的应用程序流。

也许您可以向我们提供更多详细信息，然后获得更适合您正在尝试做的事情的建议。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T13:07:35.697

+1 同意酒吧有责任决定如何构建它。我出来的代码如下所示，因此您可以使用默认构造函数（bar）并允许覆盖构造函数

```
public class bar
{
    //  Original constructor
    int value { get; set; }
    public bar(int i)
    {
        this.value = i;    
    }       
}

public abstract class foobar : bar
{
    int value {get; set;}
    protected foobar(int i) : base(i)
    {
      value = i;
    }        
}

public class foo : foobar
{
    //  New constructor
    protected foo(int i)
        : base(i)
    {

    }
} 
```

# biztalk - BizTalk：如何在 SendPort 中设置输出文件名以表示当前日期时间

> ID：12197107
> 
> 赞同：0
> 
> 时间：2012-08-30T12:42:14.187
> 
> 标签：biztalk, filenames, biztalk-2010, send-port

在 BizTalk SendPort 属性中，我希望输出文件名附加当前日期时间。请建议我怎样才能做到这一点。

目前我正在使用 %MessageID%.csv 属性，但我希望名称有意义。

例如：如果输入文件名是 Test.csv，我希望输出文件名是 Test_29_08_2012.csv 或类似的东西来唯一标识文件名。

```
 <om:Element Type="Module" OID="44107b43-7a62-4452-b6a7-4fbf2fb6608f" LowerBound="1.1" HigherBound="105.1">

        <om:Element Type="PortType" OID="1b19ad0b-d962-4d86-806d-37a2176334dc" ParentLink="Module_PortType" LowerBound="19.1" HigherBound="26.1">
            <om:Property Name="Synchronous" Value="False" />
            <om:Property Name="TypeModifier" Value="Internal" />
            <om:Property Name="ReportToAnalyst" Value="True" />
            <om:Property Name="Name" Value="Port_ReceiveFlatFile" />
            <om:Property Name="Signal" Value="True" />
            <om:Element Type="OperationDeclaration" OID="440beff9-5144-452e-ae02-5f3f4ac2dc22" ParentLink="PortType_OperationDeclaration" LowerBound="21.1" HigherBound="25.1">
                <om:Property Name="OperationType" Value="OneWay" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="Operation_1" />
                <om:Property Name="Signal" Value="False" />
                <om:Element Type="MessageRef" OID="02d08019-d0c1-4d18-a00b-fc2bc1dcdb91" ParentLink="OperationDeclaration_RequestMessageRef" LowerBound="23.13" HigherBound="23.28">
                    <om:Property Name="Ref" Value="BulkUpload.FlatFileSchema1" />
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="Request" />
                    <om:Property Name="Signal" Value="True" />
                </om:Element>
            </om:Element>
        </om:Element>
        <om:Element Type="PortType" OID="cb4117d3-0601-4008-97db-a6c6dcfc8a75" ParentLink="Module_PortType" LowerBound="26.1" HigherBound="33.1">
            <om:Property Name="Synchronous" Value="True" />
            <om:Property Name="TypeModifier" Value="Internal" />
            <om:Property Name="ReportToAnalyst" Value="True" />
            <om:Property Name="Name" Value="Port_CallSP" />
            <om:Property Name="Signal" Value="True" />
            <om:Element Type="OperationDeclaration" OID="205a8265-e483-4840-b01a-67b2f79b29fa" ParentLink="PortType_OperationDeclaration" LowerBound="28.1" HigherBound="32.1">
                <om:Property Name="OperationType" Value="RequestResponse" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="Operation_1" />
                <om:Property Name="Signal" Value="False" />
                <om:Element Type="MessageRef" OID="87a40965-030d-47e0-b3f5-e539e05b8f86" ParentLink="OperationDeclaration_RequestMessageRef" LowerBound="30.13" HigherBound="30.41">
                    <om:Property Name="Ref" Value="BulkUpload.SQLService.BulkUploadRequest" />
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="Request" />
                    <om:Property Name="Signal" Value="True" />
                </om:Element>
                <om:Element Type="MessageRef" OID="4ce02fef-cd67-408c-9cf5-0e55e5b54f03" ParentLink="OperationDeclaration_ResponseMessageRef" LowerBound="30.43" HigherBound="30.72">
                    <om:Property Name="Ref" Value="BulkUpload.SQLService.BulkUploadResponse" />
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="Response" />
                    <om:Property Name="Signal" Value="True" />
                </om:Element>
            </om:Element>
        </om:Element>
        <om:Element Type="PortType" OID="6d8d9a28-9c62-4869-8aa9-dcc68c03ee10" ParentLink="Module_PortType" LowerBound="33.1" HigherBound="40.1">
            <om:Property Name="Synchronous" Value="False" />
            <om:Property Name="TypeModifier" Value="Internal" />
            <om:Property Name="ReportToAnalyst" Value="True" />
            <om:Property Name="Name" Value="Port_SendResponce" />
            <om:Property Name="Signal" Value="True" />
            <om:Element Type="OperationDeclaration" OID="8c13188d-6f2f-47ff-869c-67615b55d725" ParentLink="PortType_OperationDeclaration" LowerBound="35.1" HigherBound="39.1">
                <om:Property Name="OperationType" Value="OneWay" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="Operation_1" />
                <om:Property Name="Signal" Value="False" />
                <om:Element Type="MessageRef" OID="21cc1037-5a01-425f-b9d8-ab986a1e900f" ParentLink="OperationDeclaration_RequestMessageRef" LowerBound="37.13" HigherBound="37.34">
                    <om:Property Name="Ref" Value="BulkUpload.FlatFileSchema_Output" />
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="Request" />
                    <om:Property Name="Signal" Value="True" />
                </om:Element>
            </om:Element>
        </om:Element>
        <om:Element Type="PortType" OID="db0090d2-469b-4336-a84a-fb80eb73699a" ParentLink="Module_PortType" LowerBound="40.1" HigherBound="47.1">
            <om:Property Name="Synchronous" Value="False" />
            <om:Property Name="TypeModifier" Value="Internal" />
            <om:Property Name="ReportToAnalyst" Value="True" />
            <om:Property Name="Name" Value="PortType_ReplyFromSP" />
            <om:Property Name="Signal" Value="False" />
            <om:Element Type="OperationDeclaration" OID="3b0d7f64-b5f4-4a5d-95c0-7a70365ea89a" ParentLink="PortType_OperationDeclaration" LowerBound="42.1" HigherBound="46.1">
                <om:Property Name="OperationType" Value="OneWay" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="Operation_1" />
                <om:Property Name="Signal" Value="False" />
                <om:Element Type="MessageRef" OID="6a19b2ef-8754-4c29-8809-bb67a167d98d" ParentLink="OperationDeclaration_RequestMessageRef" LowerBound="44.13" HigherBound="44.42">
                    <om:Property Name="Ref" Value="BulkUpload.SQLService.BulkUploadResponse" />
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="Request" />
                    <om:Property Name="Signal" Value="True" />
                </om:Element>
            </om:Element>
        </om:Element>
        <om:Element Type="PortType" OID="6d2ec7cf-e4e6-459d-9c72-ebe9f23bd734" ParentLink="Module_PortType" LowerBound="47.1" HigherBound="54.1">
            <om:Property Name="Synchronous" Value="False" />
            <om:Property Name="TypeModifier" Value="Internal" />
            <om:Property Name="ReportToAnalyst" Value="True" />
            <om:Property Name="Name" Value="PortType_1" />
            <om:Property Name="Signal" Value="False" />
            <om:Element Type="OperationDeclaration" OID="63959541-c722-4478-a95e-4ecf42f6600e" ParentLink="PortType_OperationDeclaration" LowerBound="49.1" HigherBound="53.1">
                <om:Property Name="OperationType" Value="OneWay" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="Operation_1" />
                <om:Property Name="Signal" Value="False" />
                <om:Element Type="MessageRef" OID="07b848b3-39f0-4719-b0eb-658e3de39d4e" ParentLink="OperationDeclaration_RequestMessageRef" LowerBound="51.13" HigherBound="51.42">
                    <om:Property Name="Ref" Value="BulkUpload.SQLService.BulkUploadResponse" />
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="Request" />
                    <om:Property Name="Signal" Value="True" />
                </om:Element>
            </om:Element>
        </om:Element>
        <om:Element Type="MessageDeclaration" OID="fcf5f62f-fb1d-4885-a42b-fccc9ecbdeb0" ParentLink="ServiceDeclaration_MessageDeclaration" LowerBound="68.1" HigherBound="69.1">
                <om:Property Name="Type" Value="BulkUpload.FlatFileSchema_Output" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="SendAssetDetails" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="ServiceBody" OID="7bb1d19d-18bd-4268-8505-baabfd0e5ded" ParentLink="ServiceDeclaration_ServiceBody">
                <om:Property Name="Signal" Value="False" />
                <om:Element Type="Receive" OID="94540c63-9c2c-4963-a229-21ab2be324cf" ParentLink="ServiceBody_Statement" LowerBound="72.1" HigherBound="75.1">
                    <om:Property Name="Activate" Value="True" />
                    <om:Property Name="PortName" Value="Receive_FlatFile" />
                    <om:Property Name="MessageName" Value="ReceiveAssetDetails" />
                    <om:Property Name="OperationName" Value="Operation_1" />
                    <om:Property Name="OperationMessageName" Value="Request" />
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="Receive_1" />
                    <om:Property Name="Signal" Value="True" />
                </om:Element>
                <om:Element Type="Construct" OID="29f06329-5666-452f-883d-f93039631eb9" ParentLink="ServiceBody_Statement" LowerBound="75.1" HigherBound="81.1">
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="ConstructMessage_1" />
                    <om:Property Name="Signal" Value="True" />
                    <om:Element Type="Transform" OID="342dd643-6c41-4caa-91a8-8449cb1ab24f" ParentLink="ComplexStatement_Statement" LowerBound="78.1" HigherBound="80.1">
                        <om:Property Name="ClassName" Value="BulkUpload.Transform_ReqToSP" />
                        <om:Property Name="ReportToAnalyst" Value="True" />
                        <om:Property Name="Name" Value="Transform_1" />
                        <om:Property Name="Signal" Value="False" />
                        <om:Element Type="MessagePartRef" OID="df2a5cfc-5cda-4f65-aef2-95dd5b3bb9e5" ParentLink="Transform_InputMessagePartRef" LowerBound="79.73" HigherBound="79.92">
                            <om:Property Name="MessageRef" Value="ReceiveAssetDetails" />
                            <om:Property Name="ReportToAnalyst" Value="True" />
                            <om:Property Name="Name" Value="MessagePartReference_1" />
                            <om:Property Name="Signal" Value="False" />
                        </om:Element>
                        <om:Element Type="MessagePartRef" OID="2b1493eb-77e1-477a-ba81-b2143a3f0bfd" ParentLink="Transform_OutputMessagePartRef" LowerBound="79.28" HigherBound="79.39">
                            <om:Property Name="MessageRef" Value="RequestToSP" />
                            <om:Property Name="ReportToAnalyst" Value="True" />
                            <om:Property Name="Name" Value="MessagePartReference_2" />
                            <om:Property Name="Signal" Value="False" />
                        </om:Element>
                    </om:Element>
                    <om:Element Type="MessageRef" OID="48ab8cba-8079-400e-ad45-493ab16116f7" ParentLink="Construct_MessageRef" LowerBound="76.23" HigherBound="76.34">
                        <om:Property Name="Ref" Value="RequestToSP" />
                        <om:Property Name="ReportToAnalyst" Value="True" />
                        <om:Property Name="Signal" Value="False" />
                    </om:Element>
                </om:Element>
                <om:Element Type="Send" OID="3cf55830-5d5a-4db9-bcc0-ad807e5381b4" ParentLink="ServiceBody_Statement" LowerBound="81.1" HigherBound="83.1">
                    <om:Property Name="PortName" Value="CallSP" />
                    <om:Property Name="MessageName" Value="RequestToSP" />
                    <om:Property Name="OperationName" Value="Operation_1" />
                    <om:Property Name="OperationMessageName" Value="Request" />
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="Send_1" />
                    <om:Property Name="Signal" Value="True" />
                </om:Element>
                <om:Element Type="Receive" OID="aa834a70-ebc3-41a6-b138-b5c0924a4387" ParentLink="ServiceBody_Statement" LowerBound="83.1" HigherBound="85.1">
                    <om:Property Name="Activate" Value="False" />
                    <om:Property Name="PortName" Value="CallSP" />
                    <om:Property Name="MessageName" Value="ResponceFromSP" />
                    <om:Property Name="OperationName" Value="Operation_1" />
                    <om:Property Name="OperationMessageName" Value="Response" />
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="Receive_2" />
                    <om:Property Name="Signal" Value="True" />
                </om:Element>
                <om:Element Type="Send" OID="5cc7ab65-e76e-436e-a645-193f93afb946" ParentLink="ServiceBody_Statement" LowerBound="85.1" HigherBound="87.1">
                    <om:Property Name="PortName" Value="ResponseFromSP" />
                    <om:Property Name="MessageName" Value="ResponceFromSP" />
                    <om:Property Name="OperationName" Value="Operation_1" />
                    <om:Property Name="OperationMessageName" Value="Request" />
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="Send_3" />
                    <om:Property Name="Signal" Value="True" />
                </om:Element>
                <om:Element Type="Construct" OID="64d9b759-f4c2-4e84-b440-7cffcc651ac9" ParentLink="ServiceBody_Statement" LowerBound="87.1" HigherBound="93.1">
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="ConstructMessage_2" />
                    <om:Property Name="Signal" Value="True" />
                    <om:Element Type="Transform" OID="9112ed74-2de2-4c76-ab89-ad46f9539877" ParentLink="ComplexStatement_Statement" LowerBound="90.1" HigherBound="92.1">
                        <om:Property Name="ClassName" Value="BulkUpload.Transform_CreateSVCFile" />
                        <om:Property Name="ReportToAnalyst" Value="True" />
                        <om:Property Name="Name" Value="Transform_2" />
                        <om:Property Name="Signal" Value="False" />
                        <om:Element Type="MessagePartRef" OID="f1fdbe31-e934-4c33-b907-31560d0da5db" ParentLink="Transform_InputMessagePartRef" LowerBound="91.84" HigherBound="91.98">
                            <om:Property Name="MessageRef" Value="ResponceFromSP" />
                            <om:Property Name="ReportToAnalyst" Value="True" />
                            <om:Property Name="Name" Value="MessagePartReference_3" />
                            <om:Property Name="Signal" Value="False" />
                        </om:Element>
                        <om:Element Type="MessagePartRef" OID="2dc6f8d0-6265-4c60-94b1-b9fdb8272e13" ParentLink="Transform_OutputMessagePartRef" LowerBound="91.28" HigherBound="91.44">
                            <om:Property Name="MessageRef" Value="SendAssetDetails" />
                            <om:Property Name="ReportToAnalyst" Value="True" />
                            <om:Property Name="Name" Value="MessagePartReference_4" />
                            <om:Property Name="Signal" Value="False" />
                        </om:Element>
                    </om:Element>
                    <om:Element Type="MessageRef" OID="1e6cfb87-b294-4673-bcdc-2b335edc6f65" ParentLink="Construct_MessageRef" LowerBound="88.23" HigherBound="88.39">
                        <om:Property Name="Ref" Value="SendAssetDetails" />
                        <om:Property Name="ReportToAnalyst" Value="True" />
                        <om:Property Name="Signal" Value="False" />
                    </om:Element>
                </om:Element>
                <om:Element Type="Decision" OID="b8b4ca28-d5bb-40e1-b3ac-ead4d3e8a39d" ParentLink="ServiceBody_Statement" LowerBound="93.1" HigherBound="102.1">
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="Decide_1" />
                    <om:Property Name="Signal" Value="False" />
                    <om:Element Type="DecisionBranch" OID="a11c2ba8-a463-42e6-8054-b5b9e3a2e760" ParentLink="ReallyComplexStatement_Branch" LowerBound="94.13" HigherBound="97.1">
                        <om:Property Name="Expression" Value="SubscriberInformation == &quot;&quot;" />
                        <om:Property Name="IsGhostBranch" Value="True" />
                        <om:Property Name="ReportToAnalyst" Value="True" />
                        <om:Property Name="Name" Value="Rule_1" />
                        <om:Property Name="Signal" Value="True" />
                    </om:Element>
                    <om:Element Type="DecisionBranch" OID="1c552883-30c9-4111-b6d2-4441926b2ea6" ParentLink="ReallyComplexStatement_Branch">
                        <om:Property Name="IsGhostBranch" Value="True" />
                        <om:Property Name="ReportToAnalyst" Value="True" />
                        <om:Property Name="Name" Value="Else" />
                        <om:Property Name="Signal" Value="False" />
                        <om:Element Type="Send" OID="34517dd3-b5af-46d2-b4d0-c95d7a6d2edf" ParentLink="ComplexStatement_Statement" LowerBound="99.1" HigherBound="101.1">
                            <om:Property Name="PortName" Value="SendResponce" />
                            <om:Property Name="MessageName" Value="SendAssetDetails" />
                            <om:Property Name="OperationName" Value="Operation_1" />
                            <om:Property Name="OperationMessageName" Value="Request" />
                            <om:Property Name="ReportToAnalyst" Value="True" />
                            <om:Property Name="Name" Value="Send_2" />
                            <om:Property Name="Signal" Value="True" />
                        </om:Element>
                    </om:Element>
                </om:Element>
            </om:Element>
            <om:Element Type="PortDeclaration" OID="f89cfd41-275c-4c18-834c-18b98a26a883" ParentLink="ServiceDeclaration_PortDeclaration" LowerBound="57.1" HigherBound="59.1">
                <om:Property Name="PortModifier" Value="Implements" />
                <om:Property Name="Orientation" Value="Left" />
                <om:Property Name="PortIndex" Value="-1" />
                <om:Property Name="IsWebPort" Value="False" />
                <om:Property Name="OrderedDelivery" Value="False" />
                <om:Property Name="DeliveryNotification" Value="None" />
                <om:Property Name="Type" Value="BulkUpload.Port_ReceiveFlatFile" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="Receive_FlatFile" />
                <om:Property Name="Signal" Value="True" />
                <om:Element Type="PhysicalBindingAttribute" OID="d7e1285d-9cce-4c97-a861-fc517ec46266" ParentLink="PortDeclaration_CLRAttribute" LowerBound="57.1" HigherBound="58.1">
                    <om:Property Name="InPipeline" Value="BulkUpload.CsvReceivePipeline" />
                    <om:Property Name="OutPipeline" Value="Microsoft.BizTalk.DefaultPipelines.XMLTransmit" />
                    <om:Property Name="TransportType" Value="FILE" />
                    <om:Property Name="URI" Value="C:\Mayur\BulkUpload\BulkUpload_IN\*.csv" />
                    <om:Property Name="IsDynamic" Value="False" />
                    <om:Property Name="Signal" Value="False" />
                </om:Element>
            </om:Element>
            <om:Element Type="PortDeclaration" OID="ab491535-5d21-4c5a-a42b-2a538c1c6886" ParentLink="ServiceDeclaration_PortDeclaration" LowerBound="59.1" HigherBound="61.1">
                <om:Property Name="PortModifier" Value="Uses" />
                <om:Property Name="Orientation" Value="Right" />
                <om:Property Name="PortIndex" Value="-1" />
                <om:Property Name="IsWebPort" Value="False" />
                <om:Property Name="OrderedDelivery" Value="False" />
                <om:Property Name="DeliveryNotification" Value="None" />
                <om:Property Name="Type" Value="BulkUpload.Port_CallSP" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="CallSP" />
                <om:Property Name="Signal" Value="True" />
                <om:Element Type="LogicalBindingAttribute" OID="58f85bf1-f7e8-4698-86e1-42ce700829f0" ParentLink="PortDeclaration_CLRAttribute" LowerBound="59.1" HigherBound="60.1">
                    <om:Property Name="Signal" Value="False" />
                </om:Element>
            </om:Element>
            <om:Element Type="PortDeclaration" OID="f5ed8551-d0e4-4339-84c9-cd7581d1fe09" ParentLink="ServiceDeclaration_PortDeclaration" LowerBound="61.1" HigherBound="63.1">
                <om:Property Name="PortModifier" Value="Uses" />
                <om:Property Name="Orientation" Value="Right" />
                <om:Property Name="PortIndex" Value="-1" />
                <om:Property Name="IsWebPort" Value="False" />
                <om:Property Name="OrderedDelivery" Value="False" />
                <om:Property Name="DeliveryNotification" Value="None" />
                <om:Property Name="Type" Value="BulkUpload.Port_SendResponce" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="SendResponce" />
                <om:Property Name="Signal" Value="True" />
                <om:Element Type="PhysicalBindingAttribute" OID="d54e1294-e0ab-49d9-a0af-f9bf64a17ce9" ParentLink="PortDeclaration_CLRAttribute" LowerBound="61.1" HigherBound="62.1">
                    <om:Property Name="InPipeline" Value="Microsoft.BizTalk.DefaultPipelines.XMLReceive" />
                    <om:Property Name="OutPipeline" Value="BulkUpload.XmlSendPipeline" />
                    <om:Property Name="TransportType" Value="FILE" />
                    <om:Property Name="URI" Value="C:\Mayur\BulkUpload\BulkUpload_OUT\%MessageID%.csv" />
                    <om:Property Name="IsDynamic" Value="False" />
                    <om:Property Name="Signal" Value="False" />
                </om:Element>
            </om:Element>
            <om:Element Type="PortDeclaration" OID="cf4736b1-c841-447e-9e90-9f82a84c7696" ParentLink="ServiceDeclaration_PortDeclaration" LowerBound="63.1" HigherBound="65.1">
                <om:Property Name="PortModifier" Value="Uses" />
                <om:Property Name="Orientation" Value="Left" />
                <om:Property Name="PortIndex" Value="-1" />
                <om:Property Name="IsWebPort" Value="False" />
                <om:Property Name="OrderedDelivery" Value="False" />
                <om:Property Name="DeliveryNotification" Value="None" />
                <om:Property Name="Type" Value="BulkUpload.PortType_ReplyFromSP" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="ResponseFromSP" />
                <om:Property Name="Signal" Value="True" />
                <om:Element Type="PhysicalBindingAttribute" OID="9ef09822-1743-4a15-8042-37d503162a99" ParentLink="PortDeclaration_CLRAttribute" LowerBound="63.1" HigherBound="64.1">
                    <om:Property Name="InPipeline" Value="Microsoft.BizTalk.DefaultPipelines.XMLReceive" />
                    <om:Property Name="OutPipeline" Value="Microsoft.BizTalk.DefaultPipelines.XMLTransmit" />
                    <om:Property Name="TransportType" Value="FILE" />
                    <om:Property Name="URI" Value="C:\Mayur\BulkUpload\Test\%MessageId%.xml" />
                    <om:Property Name="IsDynamic" Value="False" />
                    <om:Property Name="Signal" Value="False" />
                </om:Element>
            </om:Element>
        </om:Element>
    </om:Element>
</om:MetaModel>
#endif // __DESIGNER_DATA
[Microsoft.XLANGs.BaseTypes.BPELExportable(false)]
module BulkUpload
{
    internal messagetype procedureRequest
    {
        body SQLService.BulkUploadRequest parameters;
    };
    internal messagetype procedureResponse
    {
        body SQLService.BulkUploadResponse parameters;
    };
    internal porttype SQLServiceExec
    {
        requestresponse procedure
        {
            procedureRequest, procedureResponse
        };
    };
    internal porttype Port_ReceiveFlatFile
    {
        oneway Operation_1
        {
            FlatFileSchema1
        };
    };
    internal porttype Port_CallSP
    {
        requestresponse Operation_1
        {
            SQLService.BulkUploadRequest, SQLService.BulkUploadResponse
        };
    };
    internal porttype Port_SendResponce
    {
        oneway Operation_1
        {
            FlatFileSchema_Output
        };
    };
    internal porttype PortType_ReplyFromSP
    {
        oneway Operation_1
        {
            SQLService.BulkUploadResponse
        };
    };
    internal porttype PortType_1
    {
        oneway Operation_1
        {
            SQLService.BulkUploadResponse
        };
    };
    [Microsoft.XLANGs.BaseTypes.BPELExportable(false)]
    internal service Orchestration_1
    {
        [Microsoft.XLANGs.BaseTypes.PhysicalBinding("FILE", "C:\\Mayur\\BulkUpload\\BulkUpload_IN\\*.csv", typeof(BulkUpload.CsvReceivePipeline))]
        port implements Port_ReceiveFlatFile Receive_FlatFile;
        [Microsoft.XLANGs.BaseTypes.LogicalBinding()]
        port uses Port_CallSP CallSP;
        [Microsoft.XLANGs.BaseTypes.PhysicalBinding("FILE", "C:\\Mayur\\BulkUpload\\BulkUpload_OUT\\%MessageID%.csv", typeof(BulkUpload.XmlSendPipeline))]
        port uses Port_SendResponce SendResponce;
        [Microsoft.XLANGs.BaseTypes.PhysicalBinding("FILE", "C:\\Mayur\\BulkUpload\\Test\\%MessageId%.xml", typeof(Microsoft.BizTalk.DefaultPipelines.XMLTransmit))]
        port uses PortType_ReplyFromSP ResponseFromSP;
        message FlatFileSchema1 ReceiveAssetDetails;
        message SQLService.BulkUploadRequest RequestToSP;
        message SQLService.BulkUploadResponse ResponceFromSP;
        message FlatFileSchema_Output SendAssetDetails;
        System.String SubscriberInformation;

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T13:06:34.093

你可以在发送文件适配器文件名属性上做类似的事情 `test_%datetime%.csv` 检查这个链接[文件适配器宏](http://www.codeproject.com/Articles/13449/Using-the-SourceFileName-Macro-to-Create-a-Custom)

**另一种**选择是在编排中设置文件名，您可以在同一链接中举例，如果您使用端口到端口，则只能使用第一个选项

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T11:22:06.573

您使用的是什么类型的接收适配器？

它是文件/FTP，因为`%SourceFileName%`宏仅在您使用文件/FTP 适配器时才有效。

由于这些适配器可以提升文件名，因此还可以确保您在接收端使用 XML 管道。

# c# - C# 用函数填充 GridView

> ID：12197118
> 
> 赞同：0
> 
> 时间：2012-08-30T12:42:38.650
> 
> 标签：c#, linq-to-sql

我有一个网格视图，我想用我的 linq 到 sql 文件中的数据填充。

我试图创建一个函数来用一个字符串填充一个网格视图，该字符串是它的表名。

```
InformitoDataContext db = new InformitoDataContext();

    public void FillGridView(string Table, Control GridView) 
    {
        var ds = from q
              in db.Table //Error in db.Table: 'InformitoDataContext' does not contain a definition for 'Table'
                select q;
        (GridView as GridView).DataSource = ds;
        (GridView as GridView).DataBind();
    } 
```

它应该像这样工作：

```
 public void Page_Load(object sender, EventArgs e)
{
    Data.FillGridView("news", GridView1);
} 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T12:53:01.963

在 InformitoDataContext 的构造函数中传递连接字符串

```
string str= /*connection string*/
InformitoDataContext db = new InformitoDataContext(str); 
```

尝试一下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T12:53:55.207

您可以尝试使用反射：

```
public void FillGridView(string Table, Control GridView) 
{
    var property = typeof(InformitoDataContext).GetProperty(Table);
    IQueryable query = (IQueryable)(property.GetGetMethod().Invoke(db, new object[0]));
    (GridView as GridView).DataSource = query;
    (GridView as GridView).DataBind();
} 
```

但这不是我推荐的……您正在将对象链接到字符串，尽管 linq to SQL 的做法恰恰相反……

嗯......我没有测试代码，它可能无法编译......这只是为了得到这个想法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T12:52:05.583

首先，您应该删除变量开头的大写字母：

```
public void FillGridView(string table, GridView gridView) 
    {
        var ds = from q in table;
        select q;
        gridView.DataSource = ds;
        gridView.DataBind();
    } 
```

# javascript - 如何防止用户中间单击带有 javascript 或 jquery 的链接

> ID：12197122
> 
> 赞同：0
> 
> 时间：2012-08-30T12:42:51.300
> 
> 标签：javascript, jquery

我想防止用户能够通过中键单击某个链接来打开一个新选项卡。我尝试了以下方法：

```
$(window).on('mouseup', '.sptDetails', function(e){
    e.preventDefault();
    if(e.button == 1){
        return false;
    }
}); 
```

这似乎不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T13:12:05.050

这是 jQuery 和浏览器的不幸结合。为了防止新选项卡打开，您必须使用`click`事件（而不是`mouseup`），但 jQuery[不会为左侧按钮以外的鼠标按钮运行委托单击处理程序](https://github.com/jquery/jquery/blob/master/src/event.js#L382)：

```
// Avoid non-left-click bubbling in Firefox (#3861)
if ( delegateCount && !(event.button && event.type === "click") ) { 
```

您可以做的是使用非委托处理程序并自己检查目标元素：http: [//jsbin.com/ojoqap/10/edit](http://jsbin.com/ojoqap/10/edit)。这至少适用于 Chrome（受@Abraham 启发）。

```
$(document).on("click", function(e) {
  if($(e.target).is("a[href]") && e.button === 1) {
    e.preventDefault();
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T12:47:05.820

请记住，这是一个坏主意。我**不**建议这样做。请参阅上面的评论。但这里是如何检测中键：

```
if (e.which == 2)
  return false 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T13:00:02.627

我猜您正在尝试确保某些导航保留在您的“父”页面中。我认为从另一个角度处理这个问题可能是合适的。

假设您不需要担心非 JS 用户，作为防止中间点击的替代方法，我可能会建议通过 ajax 调用加载内容并将其插入当前页面。

这可以用一点 javascript 来完成，同时让它可用（尽管关闭 JS 的用户可能不理想）

只是想一想。我敢肯定，有很多方法可以改进这个想法。

HTML：

```
<a href="/mylink" id="href-load-content">
<div id="content-pane"></div> 
```

Javascript：

```
$(function() {

     $('#href-load-content').data('href', function() { return $(this).attr('href') } )
        .attr('href', 'javascript:return;')
        .on('click', function() {
            $.get($(this).data('href'), function(msg) { $('#content-pane').html(msg); });
        });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T12:53:18.273

嗨，通过这个参考..

[http://delphi.about.com/od/objectpascalide/l/blvkc.htm](http://delphi.about.com/od/objectpascalide/l/blvkc.htm)

鼠标中键键码是 4

所以你可以这样尝试

```
if(e.which==4|| e.keycode==4)
e.returnValue=false; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-03T11:56:47.823

```
// <a href="http://google.com" id="google">Google</a><br> <a href="http://bing.com" id="bing">Bing</a>
$(function(){
  $(document).on("click", function(e){
    if($(e.target).is("#google") && e.button===1)
      e.preventDefault()
  })
}) 
```

[小提琴链接](https://jsfiddle.net/kezcrxop/1/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-10T19:25:12.040

上面的答案都不适合我。根据[MDN](https://developer.mozilla.org/en-US/docs/Web/API/Element/auxclick_event)，该`auxclick`事件是执行此操作的正确方法。

以下代码将阻止整个页面的中间点击行为。

```
window.addEventListener("auxclick", (event) => {
  if (event.button === 1) event.preventDefault();
}); 
```

如果您只想为某个链接禁用它，只需将事件侦听器目标（窗口）替换为对特定节点的引用。

# c++ - OpenCV 错误：在 cvSplit 中断言失败 (i < src.channels())

> ID：12197128
> 
> 赞同：1
> 
> 时间：2012-08-30T12:43:05.853
> 
> 标签：c++, opencv

我正在使用 C++ 的 openCV 运行一个基本应用程序。我正在尝试使用`cvSplit()`以下方法将图像拆分为 rgb 组件：

```
CvMat* mat;

//initialize mat

CvMat* b = cvCreateMat(mat->rows, mat->cols, CV_8UC1);
CvMat* g = cvCreateMat(mat->rows, mat->cols, CV_8UC1);
CvMat* r = cvCreateMat(mat->rows, mat->cols, CV_8UC1);
cvSplit(mat, b, g, r, NULL ); 
```

它构建得很好，但是当我尝试运行它时，出现以下错误：

```
OpenCV Error: Assertion failed (i < src.channels()) in cvSplit, file /home/username/Downloads/OpenCV-2.4.0/modules/core/src/convert.cpp, line 1196
terminate called after throwing an instance of 'cv::Exception' 
```

这个错误是什么意思，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T16:05:19.513

您用来创建 Mat 的 IplImage 应该是彩色的。您需要三个频道才能使用`cvSplit`. `IplImage->nChannels`您可以在调试器中检查这一点。

# hibernate - Hibernate Stateless Session 处理错误的最佳方式？

> ID：12197133
> 
> 赞同：0
> 
> 时间：2012-08-30T12:43:18.553
> 
> 标签：hibernate, playframework, bulkinsert, stateless-session

我正在我的 Play Framework 1.2.4 项目中使用无状态会话进行批处理作业。

我插入和更新行很好，但我不知道发生异常时该怎么办。这是我的代码：

```
try{
      statelesssession.insert(someobject);
   }
catch(ConstraintViolationException e)  //It happens from time to time dont ask me why..
   {
      ??????transaction.rollback();????? THATS MY CONCERN
   }
finally{
      transaction.commit();
   } 
```

我需要知道的是，我每 100 次插入就提交数据。我想知道，如果在即第 56 条记录中发生约束违规并且事务回滚，我是否也会丢失其他 55 条记录？

如果是，我必须在约束违反异常中做什么？还是我应该在每 1 条记录中承诺以避免这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T06:29:17.137

在这种类型的用例中，您有另一个作业，将所有数据切割成 100 个对象，并为这些对象启动子作业。

在这种情况下，对我来说最好的办法就是抛出异常。然后主作业得到这个异常，你所有的 100 个对象都回滚了。然后主作业可以进入这些对象的另一种模式并重新启动每个对象的子作业。然后只有抛出异常的那个不会被保存。

这是典型的批次处理。如果一切正常，您的批处理速度很快，因为您每 100 个对象提交一次，但如果出现错误，您会退回到单个对象提交，因此您只是不保存失败的对象。

但正如 mericano1 所说，在您的情况下，正确的行为是业务规则的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T19:01:25.757

如果您回滚，您也将丢失事务中的所有先前记录。如果您只想丢失具有约束异常的记录，那么您可以将每个批次的记录保存在一个列表中，并在批次爆炸时切换为一个一个提交，然后继续处理批次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T10:32:53.833

如果您每 100 次插入提交一次，那么第 56 次插入之后的回滚也会撤消之前的所有 55 次插入。

您可以在每次插入后提交，但要分批插入非常多的行，这很慢，因此不推荐。

**解决方案是使用保存点。**

设置保存点相对较快。可以在每次插入后完成。设置保存点不会将任何数据写入数据库 - 您仍然需要稍后提交 - 但仅在最后一个保存点之前进行回滚。

因此，在您的示例中，您每 100 行（或其他）提交一次（并且肯定在最后一行之后），并且在每一行之后设置一个保存点。当出现错误并且您回滚操作时，只有错误的插入被撤消，其他的不会被触及。

有关描述，请参见例如 java.sql.Connection.setSavepoint、java.sql.Savepoint 或[此处](https://forum.hibernate.org/viewtopic.php?f=1&t=1008379&view=next)。

# java - 搜索时匹配索引字段之间的前缀

> ID：12197136
> 
> 赞同：0
> 
> 时间：2012-08-30T12:43:41.767
> 
> 标签：java, search, lucene

鉴于以下示例文档：

```
FIELD_A: [1_aa] [1_cc]
FIELD_B: [2_xx] [1_bb] 
```

查询会发现类似：

```
find 'aa' in FIELD_A and 'xx' in FIELD_B 
```

查询应该匹配前缀（例如：）`FIELD_A`，所以上面的查询不会期望结果。`FIELD_B``1_`

这有意义吗？这在 Lucene 中是否可行，还是有更好的方法来构建索引？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:32:32.220

我会为每个前缀创建单独的文档。然后使用连词查询（两个字段都`BooleanQuery`带有`Occur.MUST`）。

例如文档`1_`：

`标题：“1_”

FIELD_A：[aa] [cc]

FIELD_B：[bb]`

和文件`2_`：

`标题：“2_”

FIELD_B：[xx]`

希望这能回答你的问题。

# android - 如何解析内部 json 对象数组

> ID：12197138
> 
> 赞同：1
> 
> 时间：2012-08-30T12:43:44.687
> 
> 标签：android, parsing, json

我正在使用 ESPN 体育 API。任何人都可以帮助我如何解析这个吗？

我正在粘贴我的代码，我只能解析名称和 id——请帮助如何解析内部对象项。

```
public class BaseballActivity extends ListActivity{

private static String url = "http://api.espn.com/v1/sports/baseball?apikey=h29yphwtf7893hktfbn7cd5g";

private static final String TAG_SPORTS = "sports";
private static final String TAG_ID = "id";
private static final String TAG_TIMESTAMP = "timestamp";
private static final String TAG_NAME = "name";
private static final String TAG_NEWS = "news";
private static final String TAG_HEADLINES = "headlines";
private static final String TAG_LINKS = "links";
private static final String TAG_API = "api";
private static final String TAG_SPORTS1 = "sports";
private static final String TAG_HREF = "href";

JSONArray sports = null;

@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    // HashMap for ListView

    ArrayList<HashMap<String, String>> sportsList = new ArrayList<HashMap<String, String>>();

    // creating Json parser instance
    JSONParser jParser = new JSONParser();

    // getting Json String from url

    JSONObject json = jParser.getJSONFromUrl(url);

    try{
        // Getting Array of Contacts
                    sports = json.getJSONArray(TAG_SPORTS);

                    // looping through All Contacts
                    for(int i = 0; i < sports.length(); i++){
                        JSONObject c = sports.getJSONObject(i);

            //String news = c.getString(TAG_NEWS);
           // String headlines = c.getString(TAG_HEADLINES);
            String name = c.getString(TAG_NAME);
           // String timestamp = c.getString(TAG_TIMESTAMP);
            String id = c.getString(TAG_ID);

         //   JSONObject links = c.getJSONObject(TAG_LINKS);
          //  JSONObject api = c.getJSONObject(TAG_API);
          //  JSONObject sports = c.getJSONObject(TAG_SPORTS1);

         //   String href = c.getString(TAG_HREF);

            HashMap<String, String> map = new HashMap<String, String>();

         //  map.put(TAG_TIMESTAMP, timestamp);
            map.put(TAG_NAME, name);
           // map.put(TAG_NEWS, news);
           // map.put(TAG_HEADLINES, headlines);
            map.put(TAG_ID, id);
         //   map.put(TAG_HREF, href);
            sportsList.add(map);
         }
    }
        catch (JSONException e) {
            e.printStackTrace();    

        }

    ListAdapter adapter = new SimpleAdapter(this, sportsList,
            R.layout.list_item,
            new String[]{TAG_NAME,TAG_ID} , new int[] {
            R.id.id,R.id.name});

   setListAdapter(adapter);   
 }
} 
```

这是我正在使用的链接

[示例链接](http://api.espn.com/v1/sports/baseball?apikey=h29yphwtf7893hktfbn7cd5g)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T12:46:18.990

我建议您使用[gson](https://sites.google.com/site/gson/)。对我来说，使用它更容易......

**编辑：（一些示例代码）**

1.  下载 gson-2.2.2.jar 将其添加到您的依赖项中

2.  创建一个基类（当您使用多个请求时）

    ```
    public abstract class RequestBase {

    public String ToJson(){
        Gson gson = new Gson();
        return gson.toJson(this);
    }

    public abstract String getUrl();

    protected String getBaseUrl(){
        return //Your URL;
    }   
    } 
    ```

3.  制作一个将执行您的请求的课程..

4.  为请求和响应创建类。然后你可以用 getter 和 setter 输入它们：

    公共类 SomeRequest 扩展 RequestBase { @SerializedName("Parameter1") private int Parameter1;

    ```
    public void setParameter1(int Parameter1) {
        this.Parameter1= Parameter1;
    }

    public int getParameter1() {
        return Parameter1;
    }

    @Override
    public String getUrl() {
        return this.getBaseUrl() +"YOUR/OWN/URL" + Parameter1;
    }
    } 
    ```

和

```
public class SomeResponse {
@SerializedName("responseParameter1")
private int responseParameter1;

@SerializedName("responseParameter2")
private String responseParameter2;

public void setResponseParameter1(int responseParameter1) {
    this.responseParameter1= responseParameter1;
}

public int getResponseParameter1() {
    return responseParameter1;
}

public void setResponseParameter2(String responseParameter2) {
    this.responseParameter2= responseParameter2;
}

public String getResponseParameter1() {
    return responseParameter2;
}
} 
```

# database - 具有地理距离计算的多地点实体查询解决方案

> ID：12197143
> 
> 赞同：0
> 
> 时间：2012-08-30T12:44:04.357
> 
> 标签：database, geospatial

在我的项目中，我们有一个名为 Trip 的实体。这次旅行有两点：起点和终点。开始和结束是带有一些附加属性的地理坐标，例如地址 atc。

我需要的是查询满足开始和结束搜索条件的所有行程。

喜欢

```
select from trips where start near 16,16 and finish near 18,20 where type = type 
```

所以我的问题是：哪个数据库可以提供这样的功能？

**我试过的**

我探索了支持地理索引但不支持此用例的 mongodb。当前的解决方案将这些点存储为单独的文档，这些文档具有对旅行的引用。我们对开始和结束运行两个单独的查询，然后提取其相关行程的 ID，然后选择在开始和结束中都找到的行程 ID，最后返回行程集合。

在一个小样本上它工作得很好，但在一个更大的样本上它会变慢，就像用我的右手挠我的左耳一样。

所以我正在寻找更好的解决方案。

我知道 neo4j 及其空间插件，但我什至无法让它在 Windows 上运行。它会支持我们的用例吗？

还是有更好的解决方案？最好使用用 php 编写的对象映射器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:49:59.973

就像 edze 已经说过 Postgres (PostGIS) 或 SQLite(SpatiaLite) 是你要找的

```
SELECT
  *
FROM
  trips 
WHERE
  ST_Distance(ST_StartPoint(way), ST_GeomFromText('POINT(16 16)',4326) < 5
  AND ST_Distance(ST_EndPoint(way), ST_GeomFromText('POINT(18 20)',4326) < 5
  AND type = 'type' 
```

# java - Hibernate - 时间格式注解

> ID：12197145
> 
> 赞同：2
> 
> 时间：2012-08-30T12:44:11.253
> 
> 标签：java, hibernate, jodatime, time-format

我在 DB（mysql）中有一个列类型格式**时间，**例如 12:30:00 我用于 Hibernate 域中的列下面的代码

```
private LocalTime timeStart;  

@Type(type="org.joda.time.contrib.hibernate.PersistentLocalTimeAsTime")
@Column(name="time_start")
public LocalTime getTimeStart(){
      return timeStart;
} 
```

如果我打印我有**12:00:00.000**的值我 可以直接使用模式 hh:mm 而不进行字符串转换，如果是的话如何？天津...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:55:35.160

您需要使用[DateTimeFormat](http://joda-time.sourceforge.net/apidocs/org/joda/time/format/DateTimeFormat.html)实例来格式化来自[Joda Time](http://joda-time.sourceforge.net/)的日期对象：

```
DateTimeFormat.forPattern("hh:mm").print( timeStart ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T15:01:22.297

```
public LocalTime getTimeStart(){
      return timeStart;
}   

public String getTimeStartAsString(){
      return timeStart == null ? "" : timeStart.toString("hh:mm");
} 
```

# objective-c - Objective-C 字符串处理问题

> ID：12197151
> 
> 赞同：2
> 
> 时间：2012-08-30T12:44:34.993
> 
> 标签：objective-c, json, nsstring, nsarray

我正在尝试从 JSON 响应中读取如下内容

```
{ 
"URL": 
  { 
     "target": "www.google.com", 
    "0": [ 92, 15 ], 
    "1": [ 92, 16 ], 
    "2": [ 74, 15 ], 
    "4": [ 5, 16 ] 
  } 
} 
```

使用 SBJSON 我设法获得了“目标”字段，

```
testString = [[result objectForKey:@"URL"] objectForKey:@"target"]; 
```

当我执行 NSLOG 时，它显示 www.google.com

但这段代码不适用于其他密钥对。

```
testString = [[result objectForKey:@"URL"] objectForKey:@"0"]; 
```

当我尝试打印 testString 时，它给了我一个错误。

在控制台中，我打印了值，它们是，

```
(lldb) po testString
(NSString *) $4 = 0x0864b190 <__NSArrayM 0x864b190>(
65,
27
) 
```

如何提取这些 65 和 27 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T12:49:55.760

做这个：

```
if([result objectForKey:@"URL"] objectForKey:@"0"] isKindofClass:[NSArray class])
{
   NSArray *arritems = [[result objectForKey:@"URL"] objectForKey:@"0"];
   NSMutableArray *values = [NSMutableArray array];
   for( id *item in arritems)
   {
      if([item is isKindOfClass:[NSString class]])
      {
         NSString * valueStr = item; 
         [values addObject:valueStr];
       }
      else if([item is isKindOfClass:[NSDecimalNumber class]])
      {
        NSDecimalNumber * valueNum = item; 
        [values addObject:valueNum];
       }
   } 
   NSLog(@"%@",values);
} 
```

键值 1 、 2 、 3 的相同逻辑重复

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T12:51:26.067

那是一个对象数组。尝试：

```
NSArray * array = [[result objectForKey:@"URL"] objectForKey:@"0"];
id a = [array objectAtIndex:0]; // 65
id b = [array objectAtIndex:1]; // 27

// now determine the type of objects in the array, and use them appropriately:
if ([a isKindOfClass:[NSString class]]) {
  NSString * string = a;
  ...use appropriately
}
else if ([a isKindOfClass:[NSDecimalNumber class]]) {
  NSDecimalNumber * number = a;
  ...use appropriately
}
...
else {
  assert(0 && "type not supported");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T12:52:36.213

```
NSArray *data = [[result objectForKey:@"URL"] objectForKey:@"0"]; 
```

然后你的物品在`[data objectAtIndex:0]`并且`[data objectAtIndex:1]`

# vim - 如果 vim 仍然选择了错误的语法高亮，我该怎么办？

> ID：12197153
> 
> 赞同：1
> 
> 时间：2012-08-30T12:44:39.147
> 
> 标签：vim, syntax-highlighting, vim-syntax-highlighting

我在一个始终将 cpp 文件 (*.cc) 识别为`tcl`文件的系统 (linux) 上。我不知道那是什么文件类型，但我想覆盖它。如果我手动选择正确的语法突出显示`:set ft=cpp`。但是，我在自动设置时遇到了麻烦，我不想使用该`modeline`选项。我自己的`.vimrc`不会干扰（如果我重命名它，结果相同）。

来自 vim 帮助 ( `:help ftplugin-override`)

```
 *ftplugin-overrule*
If a global filetype plugin does not do exactly what you want, there are three
ways to change this:

1\. Add a few settings.
   You must create a new filetype plugin in a directory early in
   'runtimepath'.  For Unix, for example you could use this file: 
        vim ~/.vim/ftplugin/fortran.vim
  You can set those settings and mappings that you would like to add.  Note
   that the global plugin will be loaded after this, it may overrule the 
   settings that you do here.  If this is the case, you need to use one of the 
   following two methods. 
```

我之前在另一台机器上使用过这个选项，并且有效。我试过了

```
<file> .vim/ftplugin/tcl.vim
set filetype=cpp
"au BufRead,BufNewFile *     set filetype=cpp 
```

第一行正确设置了`filetype`（`:set ft?`返回*cpp*），但是语法高亮和我说的**不**一样`:set ft=cpp`。它仍然是`tcl`语法突出显示。第二行什么都不做。

```
2\. Make a copy of the plugin and change it. 
   You must put the copy in a directory early in 'runtimepath'.  For Unix, for 
   example, you could do this: 
        cp $VIMRUNTIME/ftplugin/fortran.vim ~/.vim/ftplugin/fortran.vim
  Then you can edit the copied file to your liking.  Since the b:did_ftplugin
   variable will be set, the global plugin will not be loaded.
   A disadvantage of this method is that when the distributed plugin gets
   improved, you will have to copy and modify it again. 
```

`$VIMRUNTIME`我的目录中似乎没有`/usr/share/vim/vim72/ftplugin/`名为`tcl.vim`.

```
3\. Overrule the settings after loading the global plugin.
   You must create a new filetype plugin in a directory from the end of
   'runtimepath'.  For Unix, for example, you could use this file: 
        vim ~/.vim/after/ftplugin/fortran.vim
  In this file you can change just those settings that you want to change. 
```

效果和1一样。还有什么我可以尝试的吗？提前非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T13:11:52.653

`cpp` *是*`*.cc`和文件的默认文件类型`*.cpp`。

文件类型`tcl`仅为、`*.tcl`、`*.tk`和`*.itcl`.`*.itk``*.jacl`

我看不出为什么 Vim`tcl`在加载`*.cc`文件时会默认为，但您可以检查这些文件是否已安装：

```
/usr/share/vim/vim7x/ftplugin/cpp.vim
/usr/share/vim/vim7x/indent/cpp.vim
/usr/share/vim/vim7x/syntax/cpp.vim 
```

如果在以下位置进行了正确的检查：

```
/usr/shhare/vim/vim7x/filetype.vim 
```

你是唯一一个在这台机器上工作的人吗？你使用模型线吗？

# pdf - 使用 Ghostscript 从 PDF 中提取文本 - 未知设备：txtwrite

> ID：12197156
> 
> 赞同：3
> 
> 时间：2012-08-30T12:44:48.927
> 
> 标签：pdf, text, extract, ghostscript

我正在尝试从 PDF 中提取文本。我正在使用 Ghostscript，但是当我运行下面的命令时

`gs -dBATCH -dNOPAUSE -sDEVICE=txtwrite mypdf.pdf`

发生错误。下面这个。

```
Unknown device: txtwrite
Unrecoverable error: undefined in .uninstallpagedevice
Operand stack:
             defaultdevice 
```

有什么想法吗？txtwrite 不是默认的 ghostscript 设备吗？

这是的输出`gs -v`

```
GPL Ghostscript 8.70 (2009-07-31) 
```

和那个操作系统版本`CentOS release 5.8 (Final)`。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-30T18:26:16.353

如果我没记错的话，txtwrite 设备是在 9.05 中引入 Ghostscript 的（当前版本是 9.06）。8.70 真的太老了，*太老*了，不能包括这个设备。

升级到更新的版本。

# xml - Web 服务架构/信息流

> ID：12197159
> 
> 赞同：0
> 
> 时间：2012-08-30T12:45:02.033
> 
> 标签：xml, web-services, soap

我刚刚开始学习 Web 服务。根据我所经历的一切，这些是我在非常高的层次上的理解：

1\. 服务提供者/服务器创建 WebService 并创建服务描述 (WSDL)，该服务描述 (WSDL)**发布**在 url/registry 上。

2.Service Requestor/Client在registry/url中**搜索**Web Service，获取包含**绑定**信息的WSDL

3\. 服务请求者使用此信息通过**调用**Web 服务的 SOAP/HTTP 与服务提供者交互。

我想知道这是否是网络服务的基本架构？如果不是，那是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:00:54.947

但是，您的理解几乎是正确的：

> 1\. 服务提供者/服务器创建 WebService 并创建服务描述 (WSDL)，该服务描述 (WSDL) 发布在 url/registry 上。

更好的方法是首先创建 WSDL，然后从中生成 Web 服务和客户端。当您处理异构平台（PHP、Java 和 .NET 是最好的示例）时，它会有所帮助，因为当您从服务生成 WSDL 时，这些平台中的每一个都有自己的处理方式。相信我这个:)

> 3\. 服务请求者使用此信息通过调用 Web 服务的 SOAP/HTTP 与服务提供者交互。

如果我们谈论的是 SOAP Web 服务，那么确实如此，但也有越来越多使用的 REST Web 服务，所以也看看它们：

*   [维基百科](http://en.wikipedia.org/wiki/Representational_state_transfer)
*   [堆栈溢出](https://stackoverflow.com/questions/209905/rest-and-soap)

# asp.net-mvc - 个性化asp.net MVC路由尺

> ID：12197164
> 
> 赞同：0
> 
> 时间：2012-08-30T12:45:09.803
> 
> 标签：asp.net-mvc, routes, action, maproute

我不完全了解如何在 asp.net mvc 中使用路由。我将视图和控制器组织在 2 个主要文件夹中：前台和后台。现在我想在后台以这种方式构建 url 的操作：frontoffice/controller/action/parameters 文件夹frontoffice中的操作以经典方式：controller/action/parameter

我写了这些规则，但它们不正确

```
routes.MapRoute(
    name: "Backoffice",
    url: "Backoffice/{controller}/{action}/{id}",
    defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
);

routes.MapRoute(
    name: "Frontoffice",
    url: "{controller}/{action}/{id}",
    defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
); 
```

这样，frontoffice 中的所有操作都使用“backoffice”构建 url。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T13:03:38.817

文件夹在 ASP.NET MVC 中无关紧要。

不管你把东西放在哪个文件夹中，这与路由引擎要在哪里寻找它都不对应。

这是你如何做到的：

约定是将您的控制器放在名为*Controller*的文件夹中，但这只是约定，我认为它不会影响路由（尽管它可能会）。

确保您的控制器`Controller`附加了名称，并且继承自基本控制器类或`IController`. 例如：

```
public class MyController : Controller 
```

其次，您的路由是针对 URL 的。

```
routes.MapRoute(
    "Backoffice",
    "backoffice/{controller}/{action}/{id}" 
```

要到达那条路线，您需要两件事，这两件事*都与您的目录结构无关*：

*   有一个派生自`Controller`或实现的控制器`IController`
*   适当地调用该控制器：`/backoffice/home/list/1`

如果您希望您的控制器基于文件夹结构，那么您可能需要使用该`namespace`参数，并确保您的命名空间与目录结构匹配。

您将路由更改为[如下所示](http://msdn.microsoft.com/en-us/library/dd492682%28v=vs.108%29)：

```
routes.MapRoute(
    "backoffice",
    "backoffice/{controller}/{action}/{id}",
    new[] { "MyProject.Backoffice.Controllers" }
); 
```

那么你的目录结构应该是：

```
MyProject 
  |
  - FrontOffice

  - BackOffice
    | 
    - Controllers
      |
      - MyController.cs 
```

您的控制器的命名空间应该是：

```
namespace MyProject.Backoffice.Controllers
{
    public class MyController 
```

# android - 如何绕过 ICS 和 Jellybean 中不一致的 DatePicker 小部件

> ID：12197171
> 
> 赞同：2
> 
> 时间：2012-08-30T12:45:25.807
> 
> 标签：android, xml, android-layout, android-widget, datepicker

我在 Android 中使用 Datepicker。我在 Jellybean 中得到了一个完全 Bizzare 的 UI。

![在此处输入图像描述](../Images/c5e2db8340e8c3475f8bf741f3fe0da4.png)

这是布局代码：

```
 <?xml version="1.0" encoding="utf-8"?>
    <ScrollView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/scrollView1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/RelativeLayout01"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <TableRow
        android:id="@+id/tableRow1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_margin="10dp" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="@string/stores"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <Spinner
            android:id="@+id/spinner_sales_store"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1" />
    </TableRow>

    <TableRow
        android:id="@+id/tableRow2"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_margin="10dp" >

        <TextView
            android:id="@+id/textView2"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="@string/products"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <Spinner
            android:id="@+id/spinner_sales_product"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1" />
    </TableRow>

    <TableRow
        android:id="@+id/tableRow3"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_margin="10dp" >

        <TextView
            android:id="@+id/textView3"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="@string/quantities"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <Spinner
            android:id="@+id/spinner_sales_quantity"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1" />
    </TableRow>

    <TableRow
        android:id="@+id/tableRow4"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_margin="10dp" >

        <TextView
            android:id="@+id/textView4"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Price"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <TextView
            android:id="@+id/textView_sales_price"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="------"
            android:textAppearance="?android:attr/textAppearanceMedium" />

    </TableRow>

    <TableRow
        android:id="@+id/tableRow5"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_margin="10dp" >

        <TextView
            android:id="@+id/textView5"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="No of Items"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <EditText
            android:id="@+id/txt_sales_num"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1" />

    </TableRow>

    <TableRow
        android:id="@+id/tableRow6a"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_margin="5dp" >

        <TextView
            android:id="@+id/textView6a"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Order Date"
            android:textAppearance="?android:attr/textAppearanceMedium" />

    </TableRow>
    <TableRow
        android:id="@+id/tableRow6b"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_margin="5dp" >
        <android.widget.DatePicker
            android:id="@+id/dpicker_sales_Order_date"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" />
    </TableRow> 

    <TableRow
        android:id="@+id/tableRow7a"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_margin="2dp">

        <TextView
            android:id="@+id/textView7"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Issue Date"
            android:textAppearance="?android:attr/textAppearanceMedium" />
    </TableRow> 

    <TableRow
        android:id="@+id/tableRow7b"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_margin="5dp"  >  
        <android.widget.DatePicker
            android:id="@+id/dpicker_sales_Issue_date"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="right" />
    </TableRow> 

    <TableRow
        android:id="@+id/tableRow8"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center_horizontal">

        <Button
            android:id="@+id/btn_sales_save"
            style="@style/ButtonStyle_menu"
            android:layout_height="wrap_content"
            android:layout_width="wrap_content"        
            android:background="@drawable/custom_button"
            android:text="@string/save"
            android:onClick="saveClicked_Sales" />

    </TableRow>

</TableLayout>

</ScrollView> 
```

您是否遇到过此类问题？有没有办法像 GingerBread 一样只显示 UI？

Activity 中没有代码。只是xml编码。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-02T22:37:06.663

如果您不想为它腾出空间，请添加`android:calendarViewShown="false"`到您的元素以抑制日历。`<DatePicker>`

# php - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册以获取正确的语法

> ID：12197174
> 
> 赞同：1
> 
> 时间：2012-08-30T12:45:31.270
> 
> 标签：php, mysql, database

```
 <?php

include ("apps/controller/database.php"); include ("header.php");
//Connect to the DB $database->connect(); //Check the url has been set
if ($_SERVER['REQUEST_METHOD'] == 'POST') {

$url = isset($_POST['url']) ? $database->escape($_POST['url']) : false;
//$url = isset($_POST['url']) ? $database->escape($_POST['url']) : '';
//This is optional ;)
$password = isset($_POST['password']) ? $database->escape($_POST['password']) : '';
//Okay, now we've figured out if they've set the url, let's add it to the DB
if (isset($url)) {
    $id = md5(uniqid());
    $res = $database->query("INSERT INTO urls (url,pass,key) VALUES('".$url."','".$password."','".$id."')");
    echo '<br /><br /><div id="both" class="types both"><a href="http://localhost/view.php?id=' .
        $id . '">http://localhost/view.php?id=' . $id . '</a></div>';
}
//Close the DB
$database->close();
}else
{
    echo '<br /><br /><div id="err" class="notification error"><a class="close" href="#" alt="close" title="Close this notification"> </a> You cannot view this URL directly. Please create a url.</div>';
}

$database->close(); 
```

我的MYSQL结构是：id、url、views、keys

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T12:46:57.813

`key`是一个[MySQL 保留关键字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)，如果你想使用它作为字段名，你需要用反引号将它引用。

```
INSERT INTO urls (url,pass,`key`)... 
```

# mysql - cakephp v2 - 使用名称字段查找重复项

> ID：12197177
> 
> 赞同：0
> 
> 时间：2012-08-30T12:45:40.210
> 
> 标签：mysql, cakephp

我缺乏 Sql 技能，非常感谢您的帮助。提取字段相同的所有记录的最有效方法是什么？

例如，我的表名称是“游戏”，并且与表“控制台”有关联

如何提取具有相同（重复）“名称”的所有游戏记录、保留关联并能够访问所有字段。

基本上将其修改为仅显示重复项：

```
$this->set('games', $this->Game->find('all', array('order' => array('Game.name' => 'asc')))); 
```

有没有一种简单的方法可以使用 cake 来做到这一点，或者我将如何使用 query() 通过 sql 来做到这一点？

非常感谢提前！

问候，阿什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:26:16.693

尝试使用 Konerak 查询，但它只在小表上有效，在我的测试库上，它有 2k 条记录，它在 sql 客户端上崩溃并在 php 上出现内存错误（我使用非索引字段进行测试）。如果它适合你：

```
$options = array();
$options['joins'][0]['table'] = 'games';
$options['joins'][0]['alias'] = 'Game2';
$options['joins'][0]['conditions'] = array(1 => 1);
$options['conditions'] = 'Game.name = Game2.name';
$options['conditions']['NOT'] = 'Game.id = Game2.id';
$options['order'] = 'Game.name ASC';

//$this->Game->contain();
$this->set('games', $this->Game->find('all', $options)); 
```

/*

该解决方案使用 2 个查询，但我设法对其进行了很好的测试：

```
$options = array();
$options['fields'] = 'Game.name';
$options['group'] = 'Game.name HAVING COUNT(*) > 1';

// get all the names > 1
//$this->Game->contain();
$regs = $this->Game->find('all', $options);

// make a nice array with them
$names = array();
foreach ($regs as $reg) {
$names[] = $reg['Game']['name'];
}

// and search for only those games
//$this->Game->contain();
$this->set('games', $this->Game->find('all', array(
                                     'conditions' => array('Game.name' => $names), 
                                     'order' => 'name ASC'))); 
```

让我知道这是否对您不起作用以及您遇到了什么问题。

编辑。我评论了这些`contain`台词。似乎你想要所有的结构，所以无论如何你都不需要它们。

编辑2。消除字段名称可能存在的歧义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T14:03:05.147

我不确定 cake 是否有内置的方式来表示这一点，但你可以用这个 MySQL 方法来做到这一点。

```
$this->set('games', $this->Game->query('SELECT name, COUNT(*) as count FROM games GROUP BY name HAVING count > 1'); 
```

您可以在选择中包含您想要的任何字段。

* * *

更新

这将是 CakePHP 的做法，结果的格式更好一些：

```
$this->set('games', $this->Game->find('all',array('fields'=>array('name','COUNT(*) as count'), 'group'=>'name', 'having'=>'count > 1'))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-03T07:06:30.100

```
public function admin_duplicate_account() {
    $this->User->unBindModel(array('hasOne' => array('Admin')));
    if ($this->request->is('post') || $this->request->is('put')) {
        // pr($this->request->data); exit;
        if ($this->request->data['User']['email'] == 1) {
            $arr_having = array();
            $arr_having['fields'] = 'User.email';
            $arr_having['group'] = 'User.email HAVING COUNT(*) > 1';

            $regs = $this->User->find('all', $arr_having, array('conditions' => array('User.role' => array('U', 'P'), 'User.user_status' => array('active', 'lead', 'inactive'))));
            $names = array();
            foreach ($regs as $reg) {

                if ($reg['User']['email']) {
                    $names[] = $reg['User']['email'];
                }
            }

            $this->set('allusers', $this->User->find('all', array(
                        'conditions' => array('User.email' => $names, 'User.role' => array('U', 'P'), 'User.user_status' => array('active', 'lead', 'inactive')))));
        }

        if ($this->request->data['User']['first_name'] == 1) {
            $arr_having = array();
            $arr_having['fields'] = 'PersonalInformation.first_name';
            $arr_having['group'] = 'PersonalInformation.first_name HAVING COUNT(*) > 1';

            $regs = $this->User->find('all', $arr_having, array('conditions' => array('User.role' => array('U', 'P'), 'User.user_status' => array('active', 'lead', 'inactive'))));

            //pr($regs); exit;
            $names = array();
            foreach ($regs as $reg) {

                if ($reg['PersonalInformation']['first_name']) {
                    $names[] = $reg['PersonalInformation']['first_name'];
                }
                //$names[] = $reg['PersonalInformation']['first_name'];
            }
            //pr($names); 
            $data = $this->User->find('all', array(
                'conditions' => array('PersonalInformation.first_name' => $names, 'User.role' => array('U', 'P'), 'User.user_status' => array('active', 'lead', 'inactive'))));
            //pr($data); exit;

            $this->set('allusers', $data);
        }

        if ($this->request->data['User']['last_name'] == 1) {

            $arr_having = array();
            $arr_having['fields'] = 'PersonalInformation.last_name';
            $arr_having['group'] = 'PersonalInformation.last_name HAVING COUNT(*) > 1';

            $regs = $this->User->find('all', $arr_having, array('conditions' => array('User.role' => array('U', 'P'), 'User.user_status' => array('active', 'lead', 'inactive'))));

            //pr($regs); exit;
            $names = array();
            foreach ($regs as $reg) {

                if ($reg['PersonalInformation']['last_name']) {
                    $names[] = $reg['PersonalInformation']['last_name'];
                }
                //$names[] = $reg['PersonalInformation']['first_name'];
            }
            //pr($names); 
            $data = $this->User->find('all', array(
                'conditions' => array('PersonalInformation.last_name' => $names, 'User.role' => array('U', 'P'), 'User.user_status' => array('active', 'lead', 'inactive'))));
            //pr($data); exit;

            $this->set('allusers', $data);
        }

        if ($this->request->data['User']['primary_phone'] == 1) {

            $arr_having = array();
            $arr_having['fields'] = 'PersonalInformation.primary_phone';
            $arr_having['group'] = 'PersonalInformation.primary_phone HAVING COUNT(*) > 1';

            $regs = $this->User->find('all', $arr_having, array('conditions' => array('User.role' => array('U', 'P'), 'User.user_status' => array('active', 'lead', 'inactive'))));

            //pr($regs); exit;
            $names = array();
            foreach ($regs as $reg) {

                if ($reg['PersonalInformation']['primary_phone']) {
                    $names[] = $reg['PersonalInformation']['primary_phone'];
                }

            }
            //pr($names); 
            $data = $this->User->find('all', array(
                'conditions' => array('PersonalInformation.primary_phone' => $names, 'User.role' => array('U', 'P'), 'User.user_status' => array('active', 'lead', 'inactive'))));
            //pr($data); exit;

            $this->set('allusers', $data);
        }
        if ($this->request->data['User']['dob'] == 1) {

            $arr_having = array();
            $arr_having['fields'] = 'PersonalInformation.dob';
            $arr_having['group'] = 'PersonalInformation.dob HAVING COUNT(*) > 1';

            $regs = $this->User->find('all', $arr_having, array('conditions' => array('User.role' => array('U', 'P'), 'User.user_status' => array('active', 'lead', 'inactive'))));

            //pr($regs); exit;
            $names = array();
            foreach ($regs as $reg) {

                if ($reg['PersonalInformation']['dob']) {
                    $names[] = $reg['PersonalInformation']['dob'];
                }
            }
            //pr($names); 
            $data = $this->User->find('all', array(
                'conditions' => array('PersonalInformation.dob' => $names, 'User.role' => array('U', 'P'), 'User.user_status' => array('active', 'lead', 'inactive'))));
            //pr($data); exit;

            $this->set('allusers', $data);
        }
    } else {

        $this->set('allusers', $this->User->find('all', array(
                    'conditions' => array('User.role' => array('U', 'P'), 'User.user_status' => array('active', 'lead', 'inactive')))));
    }

    $this->layout = 'admin';
} 
```

# android - 如何在 TaskManagers 中注册活动？

> ID：12197178
> 
> 赞同：1
> 
> 时间：2012-08-30T12:45:39.673
> 
> 标签：android, service, android-activity

我使用此代码从服务动态创建活动：

显现：

```
<activity android:name="ServiceDialog" android:label="" android:theme="@android:style/Theme.Dialog" /> 
```

活动类：

```
public class ServiceDialog extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        Intent intent=getIntent();
        String text = "";
        if(intent.hasExtra("text")) text = intent.getStringExtra("text");

        AlertDialog.Builder alert = new AlertDialog.Builder(this);
        alert.setTitle("Alert");
        alert.setIcon(android.R.drawable.ic_dialog_info);
        alert.setMessage(text);
        alert.setPositiveButton(android.R.string.ok,
                new OnClickListener() {
                    @Override
                    public void onClick(DialogInterface dialog, int which) {
                        ServiceDialog.this.finish();
                    }
                });
        alert.setOnCancelListener(new OnCancelListener() {
            @Override
            public void onCancel(DialogInterface arg0) {
                ServiceDialog.this.finish();
            }
        });
        alert.show();
    }

} 
```

活动创建：

```
Intent intent = new Intent("android.intent.action.MAIN");
intent.setClass(this, ServiceDialog.class);
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
intent.putExtra("text", "Hello!");
startActivity(intent); 
```

但我有一个问题 - 此活动未显示在任务管理器中（如果我按下“主页”按钮，则无法重新打开该活动）。我能做些什么来修复它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T12:55:03.843

请改用此代码来开始您的活动。

```
Intent intent = new Intent(Intent.ACTION_MAIN);
intent.putExtra("text", "Hello!");
intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
intent.setComponent(new ComponentName("com.package.address","com.package.address.MainActivity"));
startActivity(intent); 
```

# java - Java 并发时间性能：Executors、ThreadGroup 还是 Runnable？

> ID：12197181
> 
> 赞同：0
> 
> 时间：2012-08-30T12:45:47.257
> 
> 标签：java, multithreading, performance

我开始为 Java 中已经存在的项目（非多线程项目）开发一些多线程平台，我需要性能增益，从而减少整个项目中复杂计算的时间。

我一直在使用 Executors，但与 ThreadGroup 或纯 Runnable 相比，我真的不知道它是否是性能提升的最佳解决方案。

那么，应该使用哪一个呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T12:49:11.343

如果您将线程池重用于多个计算，您只会从线程池中获得性能提升（即，您启动一​​个有 10 个线程的池并执行 10 个任务 100 次，而不是每次启动 10 个线程 100 次）。他们仍然需要初始开销来启动，你无法逃避这部分。所以这里有一个例子：

```
ExecutorService exec = Executors.newFixedThreadPool(10);

for(int i = 0; i < 10; i++) {
    exec.submit(new Task(i));
}    

// later

for(int i = 0; i < 10; i++) {
    exec.submit(new Task(i));
}    

exec.shutdown(); // etc. 
```

在这种情况下，我只支付启动 10 个线程一次的开销，在开始时。

使用纯线程：

```
List<Thread> threads = new ArrayList<Thread>();
for(int i = 0; i < 10; i++) {
    Thread t = new Thread(new Task(i));
    threads.add(t);       
    t.start();   
}  

for(Thread t: threads) {
    t.join();
}

// later I need more work

threads = new ArrayList<Thread>();
for(int i = 0; i < 10; i++) {
    Thread t = new Thread(new Task(i));
    threads.add(t);        
    t.start();  
}  

for(Thread t: threads) {
    t.join();
} 
```

在这种情况下，我支付了两次启动 10 个线程的开销，这是对线程的不好使用。当然，如果你只需要执行一次这些任务，不会有任何性能差异，只是使用执行器更容易。

我不明白你所说的纯`Runnable`（可能是纯线程？）的意思，因为线程池（执行程序）也适用于`Runnable`s.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T12:49:35.190

`ThreadGroup`是一种组织线程的方式，很少使用。

`Executors`采取“纯” `Runnable`，所以我假设您的意思是`Executors`与分叉自己的线程进行比较？这两种解决方案在性能增益方面是相似的，但这些`ExecutorService`类非常易于使用。它们允许您提交一系列`Runnable`并行执行的类，具体取决于您为池提供的线程数。

真正的诀窍是弄清楚将您的工作划分为可以并行执行的作业 - 在您分叉的线程中或通过线程池。

一个常见的代码模式`Executors`：

```
// create a thread pool with 10 workers
ExecutorService threadPool = Executors.newFixedThreadPool(10);
// or you can create an open-ended thread pool
// ExecutorService threadPool = Executors.newCachedThreadPool();
// submit my jobs which are classes that implement Runnable
for (MyRunnable myRunnable : myRunnables) {
   threadPool.submit(myRunnable);
}
// once we have submitted all jobs to the thread pool, it should be shutdown
threadPool.shutdown(); 
```

# c# - 如何编写和使用/配置渲染通用集合（并使用属性）的 log4net 对象渲染器？

> ID：12197188
> 
> 赞同：1
> 
> 时间：2012-08-30T12:46:19.803
> 
> 标签：c#, generics, logging, log4net, log4net-configuration

我有几个通用集合，比如说，

```
IList<MyClass>
IList<MyOtherClass> 
```

**1）**如何为此编写 log4net IObjectRenderer？到目前为止，我得到的是：

```
public class ListOfMyClassRenderer : IObjectRenderer
{
    public void RenderObject(RendererMap rendererMap, object obj, TextWriter writer)
    {
        try
        {
                var myList = obj as List<MyClass>;
                int no = 1;
                foreach (MyClass entry in myList)
                {
                    writer.Write("Entry {0}: PropertyA={1} PropertyB={2}\n",
                            no++,
                            entry.PropertyA,
                            entry.PropertyB);
                }
        }
        catch (NullReferenceException ex)
        {
            writer.Write(SystemInfo.NullText);
        }
    }
} 
```

**2)**我将如何在我的 Log4Net.config 文件中配置它？我有：

```
<renderer renderingClass="MyNamespace.ListOfMyClassRenderer" renderedClass="System.Collections.IList<MyClass>" /> 
```

**3)**最后一个问题。如果我想将每个条目写入 log4net 属性，我该怎么做？我应该使用 RendererMap 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T13:13:00.440

以下链接是**[更好的堆栈溢出答案](https://stackoverflow.com/questions/6844163/how-to-configure-log4net-custom-object-renderer-for-generic-objects)**。保持我的问题的完整性：

**1)**这可以通过制作 IList 的渲染器并询问它使用什么泛型来完成。我们将无法为每个泛型创建一个渲染器类，但可以。

```
class MyListRenderer : IObjectRenderer
{
    public void RenderObject(RendererMap rendererMap, object obj, TextWriter writer)
    {
        var myList = obj as IList<MyClass>;
        if (myList != null) {
            try
            {
                int no = 1;
                foreach (MyClass entry in myList)
                {
                    writer.Write("Entry {0}: PropertyA={1} PropertyB={2}\n",
                            no++,
                            entry.PropertyA,
                            entry.PropertyB);
                }
            }
            catch (NullReferenceException ex)
            {
                writer.Write(SystemInfo.NullText);
            }
        }
        else
        {
            new DefaultRenderer().RenderObject(rendererMap, obj, writer);
        }
    }
} 
```

请注意，如果其他一切都失败了，我们是如何使用默认渲染器的。这将保留默认的 IList 呈现。可能已经扩展了 DefaultRenderer() 但它是密封的。

**2）**这可以通过使用来配置

```
<renderer renderingClass="MyNamespace.MyListRenderer" renderedClass="System.Collections.IList" /> 
```

**3)**似乎无法使用对象渲染器设置 log4net 属性。

# java - 在 poi 事件中获取单元格背景颜色

> ID：12197190
> 
> 赞同：0
> 
> 时间：2012-08-30T12:46:26.660
> 
> 标签：java, excel, apache-poi

我用 POI 事件导入了一个非常大的 excel。我得到了所有的内容，但没有单元格的背景颜色！

我尝试了 ExtendedFormatRecords （如此[处](https://stackoverflow.com/questions/5415288/retrieving-cell-style-informationspecifically-color-using-poi-event-api)所述），但我无法确定哪个是具有行号和列号信息的前一个单元格！

就我而言，我需要 NumberRecords 的颜色！

这是我尝试的方法：

```
 switch (record.getSid()) {
    case BOFRecord.sid:
        break;
    case BoundSheetRecord.sid:
        BoundSheetRecord bsr = (BoundSheetRecord) record;
        System.out.println("New sheet named: " + bsr.getSheetname());
        break;
    case RowRecord.sid:
        break;
    case NumberRecord.sid: // Contains a numeric cell value
        NumberRecord numrec = (NumberRecord) record;
        row = numrec.getRow();
        col = numrec.getColumn();
        //Do something
        break;
    case ExtendedFormatRecord.sid:
        ExtendedFormatRecord efr = (ExtendedFormatRecord) record;
        if (previousSid == NumberRecord.sid) {
            // row = previousRecord.getRow();
            // col = previousRecord.getColumn();
            // System.out.println("row: " + row + " column: " + col);
            System.out.println("ExtendedFormat "+efr.getFillForeground() + "");
        } else {
            System.out.println("ops! not that");
        }
        break;
        //other cases
        ...
    }//end switch
    previousSid = record.getSid();
    if (previousRecord != record) {
        previousRecord = null;
    } 
```

谁能帮我！？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T07:11:04.200

在我们深入细节之前，我认为您应该查看两段代码。第一个是 Apache POI 的一部分，在处理 Excel 文件时作为 EventUserModel - [FormatTrackingHSSFListener](http://svn.apache.org/repos/asf/poi/trunk/src/java/org/apache/poi/hssf/eventusermodel/FormatTrackingHSSFListener.java)的一部分处理跟踪格式和样式。其次，Apache Tika 的一部分，是使用它在事件处理中对单元格进行动态格式化的示例 - [ExcelExtractor](http://svn.apache.org/repos/asf/tika/trunk/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ExcelExtractor.java)

你想做的应该是可能的，但它需要一些工作。幸运的是，Excel 中的格式和样式信息是工作簿信息的一部分，而不是工作表信息的一部分，所以它是第一位的。您需要做的是在您第一次访问这些记录时缓存它们，以便在单元格经过时可以使用它们。

其次，您应该看一下 POI UserModel 代码，看看它是如何与记录一起处理颜色和格式的。虽然您不能使用这些类，但您很可能可以从它们中借用一些关键代码片段，供您自己的类实现相同的功能。

您要做的是使用 FormatTrackingHSSFListener 获取可用的 ExtendedFormatRecords，然后查找遇到的每个单元格的记录。在 XFR 上，您会发现各种与颜色相关的细节。有填充前景色和背景色、边框和字体。接下来，当您获得 PaletteRecord 时，保留它，并将其包装在 UserModel HSSFPalette 类中。然后，您可以使用它根据 XFR 的索引获取颜色。您还应该捕获 FontRecords，这样您就可以从 XFR 上的索引中查找它们，并且从 FontRecord 中您可以获得颜色索引，在 HSSFPalette 上查找它就完成了！

最后，如果你确实让它工作了，请考虑将它作为 Apache POI 的增强发送来帮助下一个人！

# git - Git 合并冲突仅在 pom.xml 中的版本标记上

> ID：12197191
> 
> 赞同：21
> 
> 时间：2012-08-30T12:46:30.720
> 
> 标签：git, pom.xml, git-merge, merge-conflict-resolution, git-merge-conflict

`pom.xml`将master合并到分支时，有没有办法避免版本标签中的合并冲突？我有很多 pom 文件，80 个，它们都有相同的版本，与 master 中的不同。`git mergetool`仅仅为了一个版本标签就执行 80 个 pom 文件既费力又费时。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-10-17T00:02:09.693

我总是做的是使用[maven 版本插件](http://www.mojohaus.org/versions-maven-plugin/set-mojo.html)更改模块的版本，然后从另一个分支（使用不同的版本）合并：

```
mvn versions:set -DnewVersion=1.1 -DgenerateBackupPoms=false 
```

这会将所有当前模块（父模块和子模块）的版本更改为您指定为 newVersion 参数的版本。更改版本后，进行新的提交（git commit ...），然后进行合并。我已经使用 Jenkins 任务将所有这些自动化，但以其他方式（例如 sh 脚本）实现它应该不难。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-30T13:19:18.353

你可能有几个选择。没有一个是完美的：-/

1) 你可以使用'git merge -s ours'，但你应该只在你知道你不需要其余的更改时才这样做。

2) 你也可以使用 git rerere，它通过记住你上次所做的来帮助解决冲突。您可以通过设置 rerere.enabled 来全局启用它，使其始终“正常工作”。或者您也可以阅读手册页并手动完成。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-16T07:06:57.210

您还可以使用自定义合并驱动程序，如[pom-merge-driver](https://github.com/agusmba/pom-merge-driver)。根据您的工作流程，您可能希望将 pom 合并为普通文件，但以不同方式处理项目版本：始终采用合并分支版本，或在合并到开发分支时异常...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-10T13:02:26.017

看看[`resolve-maven-version-conflicts.pl`](https://bitbucket.org/jwalton/git-scripts/src/70a9c148ee3d71e7b9427e2760282679b5761f78/resolve-maven-version-conflicts.pl?at=master)。它是专门用于解决 pom 冲突的合并工具。它会忽略双方都是`-SNAPSHOT`版本的任何更改，但留下任何其他冲突以供进一步解决。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-11-11T14:19:02.113

我有同样的问题，我发现的所有解决方案都没有，imo，正确的。最后我写了一个合并驱动程序，它只处理项目/父版本并且只处理它们。没有更改依赖版本，也没有更改 xml 文件的格式。

我在几分钟前发布了它@https [://github.com/cecom/pomutils](https://github.com/cecom/pomutils)。如果您有任何问题，请告诉我。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-10-31T17:16:05.923

就我而言，我有一些未来的发展要合并到发展中：

*   示例：mybranch 中的一些功能
*   pom.xml 中的 mybranch 版本为：3.11.0-SNAPSHOT
*   mybranch 在3.10.0-SNAPSHOT 版本*之前*被分叉

要将新功能合并到开发中并从功能分支强制 pom.xml：

```
git checkout develop 
```

*   pom.xml 中的开发版本仍然是：3.10.0-SNAPSHOT

    git 合并我的分支

所有 pom.xml 都存在冲突 + 最终还有一些其他文件。

获取所有`pom.xml`文件（假设除了版本没有冲突）

```
find -name pom.xml -not -path "**/target*" -exec git co --theirs {} + 
```

在运行 find 命令之前，我必须解决一些其他冲突，例如在我的新分支中删除的子项目。

之后，我所有的 pom.xml 都在新版本中并且编译没有任何问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-12-14T19:10:21.510

由于所有版本都相同，它不应该像通配符 pom.xml 一样简单吗？

```
git checkout --ours *pom.xml 
```

# gwt - 将 GWT Compile 和 selenium 测试集成到一个 Maven 目标中

> ID：12197207
> 
> 赞同：0
> 
> 时间：2012-08-30T12:47:25.027
> 
> 标签：gwt, maven, selenium

我想创建一个单一的 gwt 项目，只需键入“mvn test”即可对硒进行测试。也就是说，我需要插件

1.  编译，
2.  启动 gwt 服务器，
3.  运行硒测试，
4.  关闭 gwt 服务器。

我找不到第 2 步和第 4 步的内容。有人有这方面的经验吗？

谢谢，阿曼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:01:02.237

如果您改用`integration-test`阶段，应该很简单：

1.  `prepare-package`⇒`gwt:compile`
2.  `pre-integration-test`⇒ `jetty:start`（或`tomcat7:start`, 或与其他插件类似）
3.  `integration-test`⇒ 你的硒测试
4.  `post-integration-test`⇒ `jetty:stop`（或其他插件的等价物）

如果您想在 DevMode 中运行 selenium 测试，那么恐怕没有办法做到这一点：没有等效`gwt:run`的方法会分叉该进程并允许它用另一个 mojo 终止（如`jetty:start`+ `jetty:stop`vs. `jetty:run`）

此外，也许您可​​以使用[Arquillian](http://arquillian.org)在您的测试中直接启动服务器，但这并不能解决编译 GWT 模块或启动 DevMode 的问题（这些可以从 Java 代码启动，但不鼓励）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T16:37:18.103

检查[Maven GWT 插件的](http://mojo.codehaus.org/gwt-maven-plugin/)[gwt:test](http://mojo.codehaus.org/gwt-maven-plugin/test-mojo.html)目标

在你的 pom 中：

```
 <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>gwt-maven-plugin</artifactId>
            <version>2.4.0</version>
            <configuration>
                <mode>selenium</mode>
                <selenium>localhost:4444/*firefox"</selenium> 
```

# google-apps-script - 什么是 getAgreedToTerms()？

> ID：12197209
> 
> 赞同：2
> 
> 时间：2012-08-30T12:47:28.100
> 
> 标签：google-apps-script

我对我域的所有用户运行[getAgreedToTerms()](https://developers.google.com/apps-script/class_domainuser#getAgreedToTerms)并且结果不清楚。

1.  对于从未建立过第一次连接的新创建的用户，我有时为 FALSE，有时为 TRUE。
2.  对于日常连接用户，有些是 TRUE，有些是 FALSE。我的域没有激活其他服务，因此用户在第一次连接时从未签署过 TOS。

这个属性到底是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T16:25:21.727

只是关于 TOS 的一些信息，如果您的域设置为“快速发布”和/或新服务设置为“自动”，即使您只有核心服务，该域也可以请求同意。

这是由于在自动新的谷歌服务上，如果谷歌添加了一项服务，它将默认激活。

# iphone - 长按并单击按钮

> ID：12197212
> 
> 赞同：4
> 
> 时间：2012-08-30T12:47:37.260
> 
> 标签：iphone, objective-c, ios, uibutton

如何让按钮单击一次或长按单击事件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T13:17:29.427

检查此代码

```
//Add Long Press Gesture Reconizer
UILongPressGestureRecognizer *longPress = [[UILongPressGestureRecognizer alloc] 
                                      initWithTarget:self action:@selector(handleLongPress:)];
longPress.minimumPressDuration = 3; //seconds
longPress.delegate = self;
[yourButton addGestureRecognizer:longPress];

//Add button touch
UITapGestureRecognizer *tapGesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tapDetected:)];
tapGesture.numberOfTapsRequired = 1;
tapGesture.numberOfTouchesRequired = 1;
[yourButton addGestureRecognizer:tapGesture];
//For touch you can also set selector for button event with Controlevent touchupinside

-(void) handleLongPress : (id)sender
{
   //Long Press done by the user
}

-(void) tapDetected : (id) sender
{
   //Button Tapped by user
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T12:53:31.667

您可以使用 NSTimer 来测量按钮上的“touch down inside”和“touch up inside”事件之间的持续时间。

然后，您将为“长按”定义一个阈值，如果已超过持续时间阈值，则将触摸事件作为“长按”处理。

# ruby-on-rails-3 - 用黄瓜测试动态属性，未定义的方法

> ID：12197213
> 
> 赞同：0
> 
> 时间：2012-08-30T12:47:37.473
> 
> 标签：ruby-on-rails-3, cucumber, dynamic-attributes

我们有一个`Style`具有[动态属性](https://github.com/moiristo/dynamic_attributes)的模型，可以通过用属性键填充一个字段并用值填充下一个字段来保存它。

典型的 params 哈希如下所示：

`{"utf8"=>"✓", "style"=>{"collection_id"=>"48", "program_id"=>"989", "number"=>"454632", "name"=>"t67f", "category_id"=>"19", "field_KEY"=>"VALUE"}, "commit"=>"save", "id"=>"4521"}`

当点击它时，它会按预期工作，并且这对使用 getter( ) 和 setter( ) 方法`"field_KEY" => "VALUE"`创建一个新的动态属性。`field_KEY``field_KEY=`

问题是：如果该过程是用黄瓜模拟的，那么在设置属性之前，有些东西会为哈希中的所有键调用 getter，包括`field_KEY`.

普通属性将返回`nil`新记录，但由于`field_KEY`尚未创建 getter，这会导致

```
`UndefinedMethodError: undefined method 'field_KEY'`. 
```

现在我的问题是：你宁愿追踪`field_KEY`getter 的调用者并弄乱黄瓜，还是应该尝试模拟一个假方法，例如：

```
def check_method(method_name)
    if method_name =~ /^field_/
       nil
    else
       ... # let the Error be raised
end 
```

更好的想法或解决方案非常受欢迎

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:44:26.920

### 问题是：

`field_KEY`来自[pickle](https://github.com/ianwhite/pickle)的调用，因为我包含了步骤

```
And the style's "field_KEY" should be "VALUE" 
```

看起来像这样：

```
Then(/^#{capture_model}'s (\w+) (should(?: not)?) be #{capture_value}$/) do |name, attribute, expectation, expected|
  actual_value  = model(name).send(attribute)
  expectation   = expectation.gsub(' ', '_')

  case expected
  when 'nil', 'true', 'false'
    actual_value.send(expectation, send("be_#{expected}"))
  when /^[+-]?[0-9_]+(\.\d+)?$/
    actual_value.send(expectation, eql(expected.to_f))
  else
    actual_value.to_s.send(expectation, eql(eval(expected)))
  end
end 
```

我仍然不知道为什么到目前为止还没有创建 dynamic_attribute getter。

### 我最终做了什么：

在我看来（同样，它解决了问题；）），黄瓜测试应该是黑盒测试，这就是为什么我选择改变步骤，现在我使用

```
And   the "key1" field should contain "KEY" 
```

它会在页面重新加载后检查该字段是否已填充正确的值。

# c++ - c++中指向int的指针

> ID：12197220
> 
> 赞同：2
> 
> 时间：2012-08-30T12:48:11.700
> 
> 标签：c++, pointers, error-handling

有什么问题：我只是想指向 int 的指针并将该 int 值设为 0。

```
 int* p;int* q;

*p = 0; *q = 0;
cout<<"p = "<<*p<<" q = "<<*q<<endl; 
```

这很烦人

作品：

```
int* p;
   *p = 0;

   cout<<*p<<endl; 
```

崩溃：

```
 int* p;
   int* q;
   *p = 0;
   *q = 0;

   cout<<*p<<endl; 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-30T12:48:47.980

```
WORKS:

int* p;
*p = 0; 
```

**没有！**它似乎有效，但实际上是*未定义的行为*。

声明`int* whatever;`会留下一个未初始化的指针。你不能取消引用它。

要初始化指针并将其指向的值设置为 0（在您的情况下）：

```
int* p = new int(0); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-30T12:59:22.540

要使用指针，该指针必须指向某物。所以有两个步骤：创建指针，并创建它指向的东西。

```
int *p, *q;    // create two pointers
int a;         // create something to point to
p = &a;        // make p point to a
*p = 0;        // set a to 0
q = new int;   // make q point to allocated memory
*q = 0;        // set allocated memory to 0 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T12:50:50.950

你没有为你的指针分配任何内存，所以你得到了未定义的行为。基本上这意味着*任何事情都*可能发生（包括它也会起作用的可能性）。

用于`int something = new int(<initialization_value>);`初始化指针。

# linux - 在处理器的特定内核上运行进程

> ID：12197222
> 
> 赞同：0
> 
> 时间：2012-08-30T12:48:21.000
> 
> 标签：linux, operating-system, multiprocessing

> **可能重复：**
> [CPU 关联性](https://stackoverflow.com/questions/280909/cpu-affinity)

在运行 Linux (fc12) 的 x86 机器上，我可以让进程在多处理器系统的特定内核上运行吗？我知道有一个功能`sched_setaffinity`可以帮助选择处理器，但我想在处理器的特定核心上执行该过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T12:56:28.990

不确定这是否是您需要的，我使用此代码使线程在特定核心上运行。使用 -pthread 编译和链接。

```
#include "pthread.h"
#include "sched.h"

int affinity = 3; //core id
pthread_t mythread;
mythread = pthread_self();
cpu_set_t cpuset;
CPU_ZERO(&cpuset);
CPU_SET(affinity, &cpuset); //lets kernel know only core affinity may run this thread
if (pthread_setaffinity_np(mythread, sizeof(cpu_set_t), &cpuset) <0){
    perror("sched_set_affinity");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T18:42:12.273

AFAIK 你无法区分 CPU 内核和 CPU。就 Linux 而言，核心是成熟的 CPU。例如，如果您有 2 个 CPU，每个 CPU 有 2 个内核，Linux 会认为您有 4 个 CPU。

# java - 如何通过 AJAX 在 Spring MVC 中渲染平铺视图？

> ID：12197230
> 
> 赞同：4
> 
> 时间：2012-08-30T12:48:51.837
> 
> 标签：java, ajax, spring, tiles

我正在使用 Spring 3 MVC 构建一个具有通用布局和经常更改/刷新的“内容”div 的 Web 应用程序。内容标记在它自己的磁贴中，我希望能够通过 AJAX 刷新该磁贴而不刷新整个页面。我知道如何从客户端触发 AJAX 请求并在控制器中处理它。我主要对 Spring 配置（哪些视图、视图解析器等）感到困惑。有人有例子吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T07:50:16.837

基本上，您可以创建一个仅包含您想要的内容而不包含 HTML 骨架的图块视图，并在处理 ajax 请求的控制器中呈现此视图/图块。

假设您有一个页面 foo.jsp。调用时`http://example.com/myapp/foo`，应该呈现以 foo.jsp 作为正文内容的整个 html 页面。调用时`http://example.com/myapp/ajax/foo`，只发送 foo.jsp 而不发送整个 HTML 框架，以便客户端可以通过 ajax 加载并替换页面中的一部分。

您最终将得到两个视图定义，一个将 foo.jsp 嵌入整个页面，另一个仅包含 foo.jsp 本身。app-layout.jsp 将包含带有“body”属性的整个 HTML 框架。

```
<definition name="foo" template="/WEB-INF/layouts/app-layout.jspx">
    <put-attribute name="body">
        <definition template="/WEB-INF/views/foo.jsp">
            <put-attribute name="message" value="hello"/>
        </definition>
    </put-attribute>
</definition>

<definition name="ajax.foo" template="/WEB-INF/views/foo.jsp">
    <put-attribute name="message" value="hello"/>
</definition> 
```

处理 URL 的控制器`/ajax/foo`将返回视图“ajax.foo”，处理 URL 的控制器`/foo`将返回视图“foo”。

```
@Controller
@RequestMapping("/ajax")
public void class AjaxController {
   @RequestMapping("/foo")
   public String foo() {
       return "ajax.foo";
   }
}

@Controller
@RequestMapping("/")
public void class AppController {
   @RequestMapping("/foo")
   public String foo() {
       return "foo";
   }
} 
```

# vim - 如何在 vim 中重新加载文件的属性而不丢失更改

> ID：12197232
> 
> 赞同：4
> 
> 时间：2012-08-30T12:48:56.447
> 
> 标签：vim, vi

有时当我点击 :w 在 VIM 上编辑代码时，我发现该文件没有在源服务器上签出（在 FS 上只读）。

所以我继续 svn|Teamprise Explorer 然后签出文件（使文件可写），但之后当 :w 执行时它给出了相同的消息，似乎 vim 没有检查权限是否已更改。

现在的问题是，如果我点击 :e 文件会重新加载，但我会使用 :w! 不是那么优雅，它可以把你变成一个懒惰的程序员，总是这样做然后与“最新版本”相比。

是否存在一些如何仅重新加载权限？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T13:11:44.130

我不知道如何仅加载权限，但还有其他一些事情可以尝试。

一种是在文件只读时防止修改，使用[此处](http://vim.wikia.com/wiki/Make_buffer_modifiable_state_match_file_readonly_state)的脚本：

```
function UpdateModifiable()
  if !exists("b:setmodifiable")
    let b:setmodifiable = 0
  endif
  if &readonly
    if &modifiable
      setlocal nomodifiable
      let b:setmodifiable = 1
    endif
  else
    if b:setmodifiable
      setlocal modifiable
    endif
  endif
endfunction
autocmd BufReadPost * call UpdateModifiable() 
```

另一种是为您的源代码管理获取或编写插件。我们在工作中使用 perforce，我发现了一个插件，可以让我直接从 vim 菜单中从 perforce 中结帐。此外，如果我尝试编辑一个未检出的文件，vim 会提示我询问是否要这样做。

# jsf - p:selectonemenu 产生一个额外的空选项并且转换器失败

> ID：12197236
> 
> 赞同：0
> 
> 时间：2012-08-30T12:49:13.603
> 
> 标签：jsf, primefaces

我对 p:selectonemenu 有疑问。服务器日志和我的代码如下。问题：我尝试编写一个具有 CRUD 功能的简单应用程序。h:selectonemenu 按预期工作。但是当我切换到 p:selectonemenu 时，我得到了转换器异常。通常我的选项数据包括数据库中的 3 行。我在初始化后打印了选项作为调试目的，我的列表是用正常的元素初始化的。

然而，使用 p:selectmenu，我的列表再次用那里的元素初始化（由 init 函数中的 syso 证明。），但是一个额外的 selectonemenu 选项，null 一个到达转换器。它会引发异常。

我调试了应用程序并在那里看到了额外的空对象。我的转换器用 h:selectonemenu 调用了 3 次，用 p:selectmenu 调用了至少 4 次。

我可能犯了一个错误。但这是我的错误还是其他什么？

玻璃鱼 3.1.2，PM 3.3.1

**服务器日志（h:selectmenu）：**

```
INFO: Hibernate: 
    select
        grup0_.grup_id as grup1_8_,
        grup0_.grup_adi as grup2_8_ 
    from
        Grup grup0_
INFO: Selectonemenu Option@Init :Test Value 1
INFO: Selectonemenu Option@Init :Test Value 2
INFO: Selectonemenu Option@Init :Test Value 3
INFO: Selectonemenu Option@Converter :Test Value 1
INFO: Selectonemenu Option@Converter :Test Value 2
INFO: Selectonemenu Option@Converter :Test Value 3 
```

**服务器日志（p:selectmenu）：**

```
INFO: Hibernate: 
    select
        grup0_.grup_id as grup1_8_,
        grup0_.grup_adi as grup2_8_ 
    from
        Grup grup0_
INFO: Selectonemenu Option@Init :Test Value 1
INFO: Selectonemenu Option@Init :Test Value 2
INFO: Selectonemenu Option@Init :Test Value 3
INFO: Selectonemenu Option@Converter :Test Value 1
INFO: Selectonemenu Option@Converter :Test Value 2
INFO: Selectonemenu Option@Converter :Test Value 3

INFO: Hibernate: 
    select
        grup0_.grup_id as grup1_8_,
        grup0_.grup_adi as grup2_8_ 
    from
        Grup grup0_
INFO: Selectonemenu Option@Init :Test Value 1
INFO: Selectonemenu Option@Init :Test Value 2
INFO: Selectonemenu Option@Init :Test Value 3
INFO: Selectonemenu Option@Converter :Test Value 1
INFO: Selectonemenu Option@Converter :Test Value 2
INFO: Selectonemenu Option@Converter :Test Value 3
**INFO: Selectonemenu Option@Converter :null**
SEVERE: Error Rendering View[/NewFile.xhtml]
javax.faces.convert.ConverterException: getAsString Error
    at converters.GrupConverter.getAsString(GrupConverter.java:60)
    at org.primefaces.util.ComponentUtils.getValueToRender(ComponentUtils.java:76)
    at org.primefaces.component.selectonemenu.SelectOneMenuRenderer.encodeLabel(SelectOneMenuRenderer.java:120)
    at org.primefaces.component.selectonemenu.SelectOneMenuRenderer.encodeMarkup(SelectOneMenuRenderer.java:89)
    at org.primefaces.component.selectonemenu.SelectOneMenuRenderer.encodeEnd(SelectOneMenuRenderer.java:62)
    at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1764)
    at javax.faces.render.Renderer.encodeChildren(Renderer.java:168)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1757)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:402)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)

WARNING: StandardWrapperValve[Faces Servlet]: PWC1406: Servlet.service() for servlet Faces Servlet threw exception
javax.faces.convert.ConverterException: getAsString Error
    at converters.GrupConverter.getAsString(GrupConverter.java:60)
    at org.primefaces.util.ComponentUtils.getValueToRender(ComponentUtils.java:76)
    at org.primefaces.component.selectonemenu.SelectOneMenuRenderer.encodeLabel(SelectOneMenuRenderer.java:120)
    at org.primefaces.component.selectonemenu.SelectOneMenuRenderer.encodeMarkup(SelectOneMenuRenderer.java:89)
    at org.primefaces.component.selectonemenu.SelectOneMenuRenderer.encodeEnd(SelectOneMenuRenderer.java:62)
    at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1764)
    at javax.faces.render.Renderer.encodeChildren(Renderer.java:168)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1757)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:402)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722) 
```

**测试.xhtml**

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
            xmlns:p="http://primefaces.org/ui"

      xmlns:ui="http://java.sun.com/jsf/facelets"> 

<h:head></h:head> 
<body> 
<h:form>
<p:selectOneMenu id="grup" value="#{grupBean.grup}" converter="grupConverter">
                            <f:selectItems value="#{grupBean.grupList}" var="grp" itemLabel="#{grp.grup_adi}" itemValue="#{grp}" />
                        </p:selectOneMenu>
</h:form>

</body> 
</html> 
```

**Grup.java**

```
package model;
import java.io.Serializable;
import java.util.ArrayList;
import java.util.List;

import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;
import javax.persistence.ManyToMany;

@Entity
public class Grup implements Serializable {

    /**
     * 
     */
    private static final long serialVersionUID = 8730335332086520080L;
    @Id
    @GeneratedValue
    private Integer grup_id;
    private String grup_adi;

    @ManyToMany(mappedBy="gruplar")
    private List<Kullanici> kullanicilar = new ArrayList<Kullanici>();

    public Integer getGrup_id() {
        return grup_id;
    }

    public void setGrup_id(Integer grup_id) {
        this.grup_id = grup_id;
    }

    public String getGrup_adi() {
        return grup_adi;
    }

    public void setGrup_adi(String grup_adi) {
        this.grup_adi = grup_adi;
    }

    public List<Kullanici> getKullanicilar() {
        return kullanicilar;
    }

    public void setKullanicilar(List<Kullanici> kullanicilar) {
        this.kullanicilar = kullanicilar;
    }

    @Override
    public int hashCode() {
        final int prime = 31;
        int result = 1;
        result = prime * result + ((grup_id == null) ? 0 : grup_id.hashCode());
        return result;
    }

    @Override
    public boolean equals(Object obj) {
        if (this == obj)
            return true;
        if (obj == null)
            return false;
        if (!(obj instanceof Grup))
            return false;
        Grup other = (Grup) obj;
        if (grup_id == null) {
            if (other.grup_id != null)
                return false;
        } else if (!grup_id.equals(other.grup_id))
            return false;
        return true;
    }

} 
```

**GrupConverter.java**

```
package converters;

import model.Grup;

import javax.faces.application.FacesMessage;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.RequestScoped;
import javax.faces.component.UIComponent;
import javax.faces.context.FacesContext;
import javax.faces.convert.Converter;
import javax.faces.convert.ConverterException;
import javax.faces.convert.FacesConverter;
import javax.persistence.EntityManager;

import util.EntityUtil;

@FacesConverter(value = "grupConverter")
public class GrupConverter implements Converter {

    EntityManager em = EntityUtil.getEntityManager();

    @Override
    public Object getAsObject(FacesContext context, UIComponent component,
            String deger) {

        Grup findGrup = null;
        if (deger == null || deger.isEmpty()) {
            return null;
        }

        try {
            findGrup = em.find(Grup.class, Integer.parseInt(deger));
            // System.out.println(findGrup.);
        } catch (Exception e) {
            throw new ConverterException(new FacesMessage(String.format(
                    "Cannot convert %s to Grup", deger)), e);
        }
        return findGrup;

    }

    @Override
    public String getAsString(FacesContext context, UIComponent component,
            Object deger) {
        String val = null;

        // ....................

        Grup d = (Grup) deger;
        System.out
                .println("Selectonemenu Option@Converter :" + d.getGrup_adi());

        // .....................

        try {
            Grup b = (Grup) deger;
            val = Integer.toString(b.getGrup_id());

        } catch (Exception e) {
            throw new ConverterException(new FacesMessage("getAsString Error"));

        }

        return val;

    }

} 
```

**GrupBean.java**

```
package beans;

import java.io.Serializable;
import java.util.List;

import javax.annotation.PostConstruct;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.RequestScoped;
import javax.faces.bean.ViewScoped;
import javax.persistence.EntityManager;

import model.Birim;
import model.Grup;

import util.EntityUtil;

@ManagedBean
@ViewScoped
public class GrupBean implements Serializable{

private static final long serialVersionUID = 2166603645975073743L;
List<Grup> grupList=null;
List<Birim> birimList;

EntityManager em = EntityUtil.getEntityManager();

private boolean edit;

Grup grup=new Grup();

@PostConstruct 
public void init()
    {
    grupList = em.createQuery("from Grup").getResultList();
    //birimList=em.createQuery("from Birim").getResultList();

     for (Grup grup : grupList) {
     System.out.println("Selectonemenu Option@Init :"+grup.getGrup_adi());

         }

    }

public void add()
    {
    System.out.println("Add");

    em.getTransaction().begin();
    em.persist(grup);
    em.getTransaction().commit();

    System.out.println("End of Add");
    grupList = em.createQuery("from Grup").getResultList();
    edit = false;
    grup = new Grup(); // Reset placeholder.    

    }

public void edit(Grup grup) {
    this.grup = grup;
    //System.out.println("Grup Edit"+grup.anAdi());
    edit = true;
   }

public void save() {
    // dao.update(item);

    System.out.println("save");
    em.getTransaction().begin();
    em.merge(grup);
    em.getTransaction().commit();
    System.out.println("End of save");
    edit = false;
    grupList = em.createQuery("from Grup").getResultList();
    grup = new Grup(); // Reset placeholder.    
}

public void delete(Grup grup) {

    System.out.println("delete");

    em.getTransaction().begin();
    em.remove(grup);
    em.getTransaction().commit();

    System.out.println("End of delete");
    grup = new Grup(); // Reset placeholder.
    edit = false;
    grupList = em.createQuery("from Grup").getResultList();

}

public List<Grup> getGrupList() {
    return grupList;
}

public void setGrupList(List<Grup> grupList) {
    this.grupList = grupList;
}

public Grup getGrup() {
    return grup;
}

public void setGrup(Grup grup) {
    this.grup = grup;
}

public boolean isEdit() {
    return edit;
}

public List<Birim> getBirimList() {
    return birimList;
}

public void setBirimList(List<Birim> birimList) {
    this.birimList = birimList;
}

} 
```

# preg-match - 这场预赛如何运作？

> ID：12197243
> 
> 赞同：0
> 
> 时间：2012-08-30T12:49:41.087
> 
> 标签：preg-match

我正在查看一些具有

```
preg_match('/\[youtube ([[:print:]]+)\]/', $content, $matches) 
```

`$content`可能是一个链接，例如 *http://www.youtube.com/watch?v=some_video*

我可以看到它正在过滤 youtube 视频，但我不明白它是如何做到的。更具体地说，它的作用是`[:print:]`什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:02:04.527

这是一个盒子绘图的实验。

```
/\[youtube ([[:print:]]+)\]/
│ │        │ │          │
│ │        │ │          └─ close the matched string
│ │        │ └──────────── start the character class
│ │        └────────────── open the matched string
│ └─────────────────────── literal square bracket
└───────────────────────── start the regexp 
```

重要的是括号内的部分。这会被您的编程语言匹配以重新用作变量，以便您可以构建替换 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T13:00:01.913

你的答案在这里：[http ://www.php.net/manual/en/function.preg-match-all.php#81559](http://www.php.net/manual/en/function.preg-match-all.php#81559)

“[:print:] - 打印字符，包括空格”

# c# - VSTO Excel 插件不起作用

> ID：12197247
> 
> 赞同：0
> 
> 时间：2012-08-30T12:49:48.940
> 
> 标签：c#, vsto

我已经使用 C#.net 创建了一个 VSTO Excel 插件（myAddin）。我在 excel -> 插件菜单中加载了 Excel 插件（myAddin），并且在我的机器上工作正常。

我已将安装文件和安装程序包文件共享给用户。对于某些用户，它在选择插件后运行代码并且工作正常，没有任何问题。对于一些用户选择插件后它什么都不做。它甚至没有引发任何异常。

当我将日志添加到代码中时，我意识到它没有调用 Addin_startup() 事件。

有什么建议么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T19:45:15.437

查看[此提示](http://exceptionalcode.wordpress.com/2011/07/03/vsto-troubleshooting-quick-tips/)以了解 VSTO 故障排除。

另请查看您的插件是否已禁用。选中[此项](https://stackoverflow.com/questions/10752455/re-enable-vsto-add-in-that-is-disabled-by-the-application-due-to-multiple-errors/10757919#10757919)以启用您的插件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-02T16:10:46.977

我不确定，但我遇到了类似的问题。原因是我在 64 位办公室上安装了 32 位安装程序。您需要单独放置 64 位 office 的注册表项。检查以下链接。可能会有所帮助。 [https://msdn.microsoft.com/en-us/library/bb386106.aspx](https://msdn.microsoft.com/en-us/library/bb386106.aspx)

# c# - 通过 nhibernate 对数据库查询进行单元测试

> ID：12197250
> 
> 赞同：3
> 
> 时间：2012-08-30T12:50:01.833
> 
> 标签：c#, database, unit-testing, nhibernate

我需要为从数据库加载数据的方法创建一个单元测试。我对单元测试和数据库进行了一些研究，大多数文章都告诉你应该模拟数据库。但是，这种方法基本上是从数据库中加载对象，并通过 SQL 执行一些限制。

因此，我要测试的是实际的数据库查询是否成功，因此我认为无法模拟数据库。

我使用 NHibernate 作为我的 ORM，并且正在使用`QueryOver`. 由于数据库处于不一致的状态，我发现对单元测试数据库非常有问题。任何想法/方法将如何进行这样的测试？

这是我想进行单元测试的特定方法：

```
public IEnumerable<IArticlePanel> LoadPanelsApplicableToArticle(ArticleModule.IArticle article, Enums.ARTICLE_PANEL_LOCATION location)
   {
       CS.General_v3.Util.ContractsUtil.RequiresNotNullable(article, "Article must not be null");

       var articleList = Modules.Factories.ArticleFactory.GetAllParentsForAnArticle(article).ToList();
       articleList.Add(article);

       var q = GetQuery();
       q = q.WhereRestrictionOn(x => x.Article).IsInG(articleList.ConvertAll<long>(x => ((IBaseDbObject)x).ID));
       q = q.Where(x => x.Location == location);
       return FindAll(q);
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T12:59:30.993

过去，当我需要对数据库进行单元测试时，我通常使用[SQLite](http://www.sqlite.org/)。您基本上在内存中设置 SQLite 数据库，然后配置您的 NHibernate（依赖注入，或者您想这样做）以连接到 SQLite 而不是您的普通数据库。几乎所有查询都应该能够正确运行。

如果您需要强大的 DateTime 支持，SQLite 可能会让您失望（请参阅 Ayende 的帖子[）](http://ayende.com/blog/2144/unit-testing-database-embedded-vs-in-memory)。在这种情况下，您可以使用任何嵌入式数据库。我建议设置一个 RAMDisk 并将嵌入式数据库放在该磁盘上，因此它仍然在内存中运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T23:05:45.277

我个人使用真实的数据库来进行集成测试。我觉得这是尽可能接近真实的生产场景。我们的开发团队目前没有从 nhibernate 映射生成数据库，因此映射和数据库之间存在一些不一致（例如数据库默认值等）。如果您从 nhibernate SQLLite 生成模式可能是您的正确路径。但是，如果您不是，我个人认为最好针对真实数据库编写这些测试。

我的集成测试将为测试插入必要的数据，并在测试后删除数据。此方法的唯一缺陷是您必须确保在测试结束后删除所有数据，否则可能会影响其他测试。不过，我发现这对我们公司来说是一个可行的解决方案，而且非常有帮助。我们有一个专门用于单元测试的数据库。

以下是我的一项测试的示例：

```
[TestMethod]
public void Test_NHibernate_Query()
{
    //Create the data in the database necessary to test my nhibernate query
    CreateDataForUnitTest();

    IInventoryRepository target = new InventoryRepository(nhibernateSession);

    IList<InventoryView> inventoryRecords = target.GetContainerInventory(productId);

    Assert.AreEqual(1, inventoryRecords.Count);
}

[TestCleanup]
public void CleanUp()
{
    DeleteAll<Order>();
    DeleteAll<Company>();
}

public void DeleteAll<T>() where T : Entity
{
    NHibernate.ISession session = SessionFactory.GetCurrentSession();

    using (NHibernate.ITransaction tran = session.BeginTransaction())
    {
        IList<T> items = session.CreateCriteria<T>()
            .List<T>();

        foreach (T p in items)
        {
            session.Delete(p);
        }

        tran.Commit();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T04:03:27.293

我们使用 NCommon 的 IRepository。然后我们使用 InMemoryRepository 进行单元测试。非常流畅、快速且易于使用。

# c# - 绑定树视图部分刷新

> ID：12197252
> 
> 赞同：1
> 
> 时间：2012-08-30T12:50:07.627
> 
> 标签：c#, wpf, data-binding, treeview

我制作了一个拍摄应用程序来举例说明我的问题：

这是window1.xaml

```
 <Window
        x:Class="TreeViewStepByStep.Window1"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:sys="clr-namespace:System;assembly=mscorlib"
        mc:Ignorable="d"
        Width="400"
        Height="600">
        <Window.Resources />
        <Grid>
            <TreeView
                Margin="0,21,0,0"
                ItemsSource="{Binding Regions}"
                HorizontalAlignment="Left"
                Width="221">

                <TreeView.ItemTemplate>
                    <HierarchicalDataTemplate
                        ItemsSource="{Binding Type}">
                        <TextBlock
                            Text="{Binding Name}" />

                        <HierarchicalDataTemplate.ItemTemplate>
                            <HierarchicalDataTemplate
                                ItemsSource="{Binding Locations}">
                                <TextBlock
                                    Text="{Binding Name}" />

                                <HierarchicalDataTemplate.ItemTemplate>
                                    <DataTemplate>
                                        <TextBlock
                                            Text="{Binding}" />
                                    </DataTemplate>
                                </HierarchicalDataTemplate.ItemTemplate>

                            </HierarchicalDataTemplate>
                        </HierarchicalDataTemplate.ItemTemplate>

                    </HierarchicalDataTemplate>
                </TreeView.ItemTemplate>

            </TreeView>

            <Button
                Content="Populate"
                Height="23"
                HorizontalAlignment="Left"
                Margin="227,21,0,0"
                Name="button2"
                VerticalAlignment="Top"
                Width="96"
                Click="button2_Click" />
            <Button
                Content="Add child"
                Height="23"
                HorizontalAlignment="Left"
                Margin="227,49,0,0"
                Name="button3"
                VerticalAlignment="Top"
                Width="96"
                Click="button3_Click" />
            <Button
                Content="Modify"
                Height="23"
                HorizontalAlignment="Left"
                Margin="227,106,0,0"
                Name="button4"
                VerticalAlignment="Top"
                Width="96"
                Click="button4_Click" />
            <Button
                Content="Add root level"
                Height="23"
                HorizontalAlignment="Left"
                Margin="227,135,0,0"
                Name="button5"
                VerticalAlignment="Top"
                Width="96"
                Click="button5_Click" />
        </Grid>
    </Window> 
```

这是 window1.xaml.cs

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;
    using System.Windows;
    using System.Windows.Controls;
    using System.Windows.Data;
    using System.Windows.Documents;
    using System.Windows.Input;
    using System.Windows.Media;
    using System.Windows.Media.Imaging;
    using System.Windows.Navigation;
    using System.Windows.Shapes;
    using System.Collections.ObjectModel;

    namespace TreeViewStepByStep
    {
        /// <summary>
        /// Interaction logic for Window1.xaml
        /// </summary>
        public partial class Window1 : Window
        {
            Collection<Region> regions;

            public Window1()
            {
                InitializeComponent();
            }

            private void button2_Click(object sender, RoutedEventArgs e)
            {
                Region sms = new Region("São Mateus do Sul")
                {
                    Type =
                    {
                        new Types("Placemarks")
                        {
                            Locations = 
                            { 
                                "Pine trees", 
                                "Barn", 
                                "Phantom city" 
                            }
                        },

                        new Types("Planning")
                        { 
                            Locations = 
                            { 
                                "Geada", 
                                "Por do sol" 
                            }
                        },
                    }
                };

                Region others = new Region("Outros")
                {
                    Type =
                    {
                        new Types("Placemarks")
                        {
                            Locations = 
                            { 
                                "Road", 
                                "Waterfall" 
                            }
                        },
                        new Types("Planning")
                        { 
                            Locations = 
                            { 
                                "Moon" 
                            }
                        },  
                    }
                };

                regions = new Collection<Region>() { sms, others };

                DataContext = new
                {
                    Regions = regions
                };
            }

            private void button3_Click(object sender, RoutedEventArgs e)
            {
                this.regions[1].Type.Add(new Types("New folder")
                                             { 
                                                Locations = 
                                                { 
                                                    "Test" 
                                                }
                                             }
                                        );
            }

            private void button4_Click(object sender, RoutedEventArgs e)
            {
                this.regions[0].Name = "Edited";
            }

            private void button5_Click(object sender, RoutedEventArgs e)
            {
                this.regions.Add(new Region("My new region"));
            }
        }

        public class Region
        {
            public Region(string name)
            {
                Name = name;
                Type = new ObservableCollection<Types>();
            }

            public string Name { get; set; }
            public ObservableCollection<Types> Type { get; set; }
        }

        public class Types
        {
            public Types(string name)
            {
                Name = name;
                Locations = new ObservableCollection<string>();
            }

            public string Name { get; private set; }
            public ObservableCollection<string> Locations { get; set; }
        }

    } 
```

My`TreeView`绑定到层次模型（区域变量）。当我单击“填充”时，它会将 绑定`TreeView`到此变量。当我单击“添加子项”时，它会向绑定变量添加一个子元素，并反映在`TreeView`. 到现在为止还挺好。

当我尝试修改现有元素的名称或尝试添加根级别节点（“修改”和“添加根级别”按钮）时，就会出现问题。这些修改不应该反映在`TreeView`集合上吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T13:05:49.913

正如您现在所拥有的，`Collection`当视图发生更改时不会通知视图。您想使用[ObservableCollection](http://msdn.microsoft.com/en-us/library/ms668604.aspx)而不是 normal `Collection<T>`。被`ObservableCollection`编码为与 UI 一起使用，并确保视图始终通过`CollectionChanged`事件通过这些更改进行更新。您`ObservableCollection`与其他一些人一起使用，但您的 Regions 变量是一个集合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T13:20:55.260

您需要将`Collection`类型更改为`ObservableCollection`并需要`INotifyPropertyChanged`在区域类上实现以在编辑时向 View 发送通知。

C# 窗口类：

```
ObservableCollection<Region> regions; 
```

区域类：

```
public class Region  : INotifyPropertyChanged
    { 
        public Region(string name) 
        { 
            Name = name; Type = new ObservableCollection<Types>(); 
        } 
        private string name;
                public string Name
        {
            get { return name; }
            set 
            { 
                name = value;
                PropertyChanged(this, new PropertyChangedEventArgs("Name"));
            }
        }

        public ObservableCollection<Types> Type { get; set; }

        #region INotifyPropertyChanged Members

        public event PropertyChangedEventHandler PropertyChanged = (s, e) => { };

        #endregion
    } 
```

# javascript - 在页面检查器中启用 javascript 调试器

> ID：12197255
> 
> 赞同：33
> 
> 时间：2012-08-30T12:50:17.617
> 
> 标签：javascript, visual-studio-2012, visual-studio-debugging

Visual Studio 2012 带有非常好的 Page Inspector。我喜欢！但问题是，我还没有找到如何（如果？）我可以打开 JavaScript 调试。有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-30T18:19:53.470

1.  在 IE9 中（仅一次）：工具 > Internet 选项 > 高级选项卡 > 在浏览类别中 > 清除“禁用脚本调试”复选框（两者）> 重新启动 IE。

2.  在 VS 2012 中：运行页面检查器（当 javascript 错误框打开时，单击否！）

3.  从 VS 菜单中选择：DEBUG > Attach to process...

4.  选择“WebBrowserServer.exe”并单击附加

5.  在 Page Inspector 窗口中单击刷新图标。

调试工作得很好，但这是一个条件。不要在代码中插入任何断点（或在之前清除它们 - DEBUG > Delete All Breakpoints）。可能会导致很多问题 - 从挂起和冻结到完全崩溃您的 VS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-12T00:08:23.027

直到这周，我只需要在作为断点的 JavaScript 函数中输入“调试器”就可以在 Visual Studio 2012 中进行 JavaScript 的调试，并且能够在 Visual Studio 窗口中单步执行 JavaScript 代码，就像C# 代码。在过去的 11 个月里，直到 1 周前，我都这样做了。我没有更改默认安装设置。

这是 Rion Williams 在 Asp.Net 论坛中提出的解决方案。[http://forums.asp.net/t/1984115.aspx?Debugging+Javascript+in+MVC 如前所述](http://forums.asp.net/t/1984115.aspx?Debugging+Javascript+in+MVC) ，它使我能够在过去 11 个月中正确地逐步完成我的代码。

# c - 带有 CLONE_FILES 的 clone(2) 泄漏 fcntl 锁？

> ID：12197258
> 
> 赞同：1
> 
> 时间：2012-08-30T12:50:26.743
> 
> 标签：c, linux, clone, fcntl

```
#include <stdio.h>
#include <unistd.h>
#include <fcntl.h>
#include <sys/types.h>
#include <string.h>
#include <stdlib.h>
#include <errno.h>
#define __USE_GNU
#include <sched.h>

void init_lock(struct flock *f)
{
    f->l_type = F_WRLCK;      /* write lock set */
    f->l_whence = SEEK_SET;
    f->l_start = 0;
    f->l_len = 0;
    f->l_pid = getpid();
}

int lock(int fd, struct flock *f)
{
    init_lock(f);
    if(fcntl(fd, F_SETLKW, f) == -1) {
        fprintf(stderr,"fcntl() failed: %s\n", strerror(errno));
        return -1;
    }
    return 0;
}

int unlock(int fd, struct flock *f)
{
f->l_type = F_UNLCK;
if(fcntl(fd, F_SETLK, f) == -1) {
    fprintf(stderr, "fcntl() failed: %s\n", strerror(errno));
    return -1;
}
return 0;
}

int file_op(void *arg)
{
char buff[256];
int fd = (int) arg, n;
struct flock my_lock;

printf("Trying to get lock\n");
if(lock(fd, &my_lock) == -1) {    /* lock acquired by a thread */
    return -1;
}

printf("Got lock: %d\n", getpid());  /* I am printing thread id after lock() */
printf("Enter string to write in file : ");
scanf("%s", buff);

if((n=write(fd, &buff, strlen(buff))) == -1) {
    fprintf(stderr, "write() failed: %s\n", strerror(errno));
}

if(unlock(fd, &my_lock) == -1) {
    return -1;
}
printf("Lock Released: %d\n", getpid());
return 0;
}

int main()
{
char *stack;
int fd, i=0, cid, stacksize;

if((fd = open("sample.txt", O_CREAT | O_WRONLY | O_APPEND, 0644)) == -1) {
    printf("Error in file opening\n");
    exit(1);
}

stacksize = 3*1024*1024;
for(i=0; i<5; i++) {
    stack = malloc(stacksize);
    if((cid = clone(&file_op, stack + stacksize, CLONE_VM | CLONE_FS | CLONE_FILES | CLONE_SIGHAND | CLONE_THREAD, (void *) fd)) == -1) {
        fprintf(stderr,"clone() failed: %s\n", strerror(errno));
        break;
    }
}
sleep(30);
close(fd);
return 0;
} 
```

我希望每个 clone() 都会等待锁定。但是此代码的输出（类似这样）：

```
Trying to get lock
Trying to get lock
Trying to get lock
Got lock: Got lock: 10287
Got lock: Got lock: 10287

Enter string to write in file : Trying to get lock
Enter string to wriGot lock: 10287
Got lock: 10287
Got lock: 10287
Enter string to write in file : Trying to get lock
Got lock: 10287
Got lock: Enter string to write in file : 
```

但是当我从 clone(2) 中删除 CLONE_FILES 字段集时，一切顺利。其他克隆线程将等待 lock()。

输出：

```
Trying to get lock
Got lock: 10311
Trying to get lock
Trying to get lock
Trying to get lock
Trying to get lock 
```

还有其他选择（使用 CLONE_FILES）吗？为什么会出现这种行为？

该领域的初学者。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T13:25:41.267

由`flock`每个进程提供的锁定，而不是每个线程。

来自[http://linux.die.net/man/2/flock](http://linux.die.net/man/2/flock)（强调我的）：

> ***如果另一个进程***持有不兼容的锁，则调用flock() 可能会阻塞。
> 
> 对已锁定文件的后续flock() 调用会将现有锁定转换为新锁定模式。
> 
> 由flock() 创建的锁与打开的文件表条目相关联。

尽管没有明确提到线程，但多个线程共享一个文件表条目，而多个进程则没有。传递`CLONE_FILES`给`clone`会导致您的“进程”共享文件表。

一个解决方案可能是调用`dup`以生成更多文件描述符。从文档中：

> 如果一个进程使用 open(2) （或类似方法）为同一个文件获取多个描述符
> ，这些描述符将由flock() 独立处理。使用这些文件描述符之一锁定文件的尝试可能会被调用进程已通过另一个描述符放置的锁定拒绝。

# python - pytest 参数化装饰器不适用于 **kwargs

> ID：12197263
> 
> 赞同：1
> 
> 时间：2012-08-30T12:50:57.393
> 
> 标签：python, exception, pytest, parameterization

在我的测试代码中，我有以下内容：

```
@pytest.mark.parametrize(("title", "description", 'site'), [
                        ("abc", "this is a proper description","minecraft.net"),
                        ("proper title","short","minecraft.net"),
                        ("proper title", "this is a proper description","bol"),
                        ("","this is a proper description","minecraft.net"),
                        ("proper title","","minecraft.net"),
                        ("proper title","this is a proper description",""),
                        ("proper title","this is a proper description","ftp://myftp.nl")
        ])
@ae_test(loggedin = True)
def test_mod_model_create_validation(title, description,site):
    ... testing code .... 
```

因此，parameterize 函数尝试将我自己的`@ae_test`装饰器返回的函数参数化，如下所示：

```
def ae_test(prob=1.00,loggedin=False,is_admin=False):
    def create_wrapper(func):
        def run_test(*args,**kwargs):
            ... test setup code ...
            func(*args,**kwargs)
            ... test teardown code ... 
```

到目前为止，这对我的所有测试都有效，但是参数化函数抱怨：

```
ValueError: <function run_test at 0x1029b55f0> has no argument 'title' 
```

此错误发生在 pytest/python.py 的第 638 行

作为对第一条评论的回应，这里是完整的堆栈跟踪：

```
==================================== ERRORS ====================================
___________________ ERROR collecting test_content_models.py ____________________
/Library/Python/2.7/site-packages/pytest-2.2.4-py2.7.egg/_pytest/runner.py:120: in __init__
>               self.result = func()
/Library/Python/2.7/site-packages/pytest-2.2.4-py2.7.egg/_pytest/main.py:304: in _memocollect
>       return self._memoizedcall('_collected', lambda: list(self.collect()))
/Library/Python/2.7/site-packages/pytest-2.2.4-py2.7.egg/_pytest/main.py:228: in _memoizedcall
>           res = function()
/Library/Python/2.7/site-packages/pytest-2.2.4-py2.7.egg/_pytest/main.py:304: in <lambda>
>   return self._memoizedcall('_collected', lambda: list(self.collect()))
/Library/Python/2.7/site-packages/pytest-2.2.4-py2.7.egg/_pytest/python.py:207: in collect
>                   res = self.makeitem(name, obj)
/Library/Python/2.7/site-packages/pytest-2.2.4-py2.7.egg/_pytest/python.py:218: in makeitem
>           collector=self, name=name, obj=obj)
/Library/Python/2.7/site-packages/pytest-2.2.4-py2.7.egg/_pytest/main.py:141: in call_matching_hooks
>       return hookmethod.pcall(plugins, **kwargs)
/Library/Python/2.7/site-packages/pytest-2.2.4-py2.7.egg/_pytest/core.py:425: in pcall
>       return self._docall(methods, kwargs)
/Library/Python/2.7/site-packages/pytest-2.2.4-py2.7.egg/_pytest/core.py:432: in _docall
>           res = mc.execute()
/Library/Python/2.7/site-packages/pytest-2.2.4-py2.7.egg/_pytest/core.py:350: in execute
>           res = method(**kwargs)
/Library/Python/2.7/site-packages/pytest-2.2.4-py2.7.egg/_pytest/python.py:103: in pytest_pycollect_makeitem
>               return collector._genfunctions(name, obj)
/Library/Python/2.7/site-packages/pytest-2.2.4-py2.7.egg/_pytest/python.py:232: in _genfunctions
>       gentesthook.pcall(plugins, metafunc=metafunc)
/Library/Python/2.7/site-packages/pytest-2.2.4-py2.7.egg/_pytest/core.py:425: in pcall
>       return self._docall(methods, kwargs)
/Library/Python/2.7/site-packages/pytest-2.2.4-py2.7.egg/_pytest/core.py:432: in _docall
>           res = mc.execute()
/Library/Python/2.7/site-packages/pytest-2.2.4-py2.7.egg/_pytest/core.py:350: in execute
>           res = method(**kwargs)
/Library/Python/2.7/site-packages/pytest-2.2.4-py2.7.egg/_pytest/python.py:37: in pytest_generate_tests
>           metafunc.parametrize(*p.args, **p.kwargs)
/Library/Python/2.7/site-packages/pytest-2.2.4-py2.7.egg/_pytest/python.py:638: in parametrize
>                   raise ValueError("%r has no argument %r" %(self.function, arg))
E                   ValueError: <function run_test at 0x1029b55f0> has no argument 'title'
=========================== 1 error in 0.36 seconds ============================ 
```

但问题实际上归结为`parameterize`寻找一个名为“标题”的论点而没有找到它。那是因为我使用的是 **kw 语法。我期望参数化函数只在其中放一个字典。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T15:54:23.950

您可能最好使用[`decorator.decorator`](http://pypi.python.org/pypi/decorator)装饰器装饰器将装饰器转换`ae_test`为保留签名的装饰器：

```
from decorator import decorator

def ae_test(prob=1.00,loggedin=False,is_admin=False):
    @decorator
    def run_test(func, *args, **kwargs):
        ... test setup code ...
        func(*args,**kwargs)
        ... test teardown code ...
    return run_test 
```

# android - Web 到应用程序的互操作性 - 有什么活生生的例子吗？

> ID：12197272
> 
> 赞同：1
> 
> 时间：2012-08-30T12:51:54.487
> 
> 标签：android, iphone, mobile, android-intent

我读了一篇关于 Web 到应用程序互操作性的有趣[文章。](http://www.techrepublic.com/blog/app-builder/web-to-app-interoperability-launch-your-android-app-from-the-web/1011)它指出：

> Android 和 iOS 允许已安装的应用程序响应来自 Web 的自定义 URI。由于我对 iOS 不太熟悉，我将只介绍 Android 如何允许它工作，以及如何利用这种技术来发挥自己的优势。有几个用例允许您的应用处理自定义 URI。我将介绍的第一个是简单地启动您的应用程序。

基本上，链接（在移动浏览器上单击）可以触发已安装应用程序的特定操作。

我发现它很有趣，并且我意识到 Google Play 市场本身与 market:// 链接的工作方式相同。

*我的问题是：* **您能否在 Android 中提供（其他）实时示例？在 Iphone 中呢？**

我正在寻找这种“Web 到应用程序互操作性”与 Android 和 Iphone 应用程序的良好案例。

*额外的问题：* **您能否建议在 Iphone 中执行此操作的教程或参考？**

非常感谢。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T12:57:05.307

对于额外的问题，请查看[此处](http://mobiledevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html)或[此处](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-working-with-url-schemes/)。

我知道 Spotify 使用它。我相信 Facebook 也是如此。

# excel - 有没有办法将数据从 .csv 导入到活动的 excel 工作表？

> ID：12197274
> 
> 赞同：20
> 
> 时间：2012-08-30T12:52:02.183
> 
> 标签：excel, vba

我有一个名为 SO2PO.csv 的 csv 文件，它的名称总是相同。它具有我导入到名为 PO 数据的 Excel 表中的数据，位于名为 Open Order 的工作簿中。我需要找到一种方法将 SO2PO.csv 中的所有数据导入 Open Order.xlsm 表 PO 数据。

我知道这是可能的，但如何？有人可以指出我正确的方向吗？

或者有没有办法让我可以导入任何放在特定文件夹中的 .csv 文件？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-08-30T13:25:29.237

添加此代码以在 PO 数据表中创建一个 QueryTable 到您的数据源

创建 QueryTable 后，您只需右键单击刷新数据（或在打开时刷新）

```
Sub CSV_Import()
Dim ws As Worksheet, strFile As String

Set ws = ActiveWorkbook.Sheets("PO Data") 'set to current worksheet name

strFile = Application.GetOpenFilename("Text Files (*.csv),*.csv", , "Please select text file...")

With ws.QueryTables.Add(Connection:="TEXT;" & strFile, Destination:=ws.Range("A1"))
     .TextFileParseType = xlDelimited
     .TextFileCommaDelimiter = True
     .Refresh
End With
End Sub 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-10-10T04:18:10.907

如果您要使用查询表，请确保在之后进行清理，剩余的查询表在下游流程中让我有些头疼。

```
' get the file to the data sheet
Set ws = ActiveWorkbook.Sheets("Data")
With ws.QueryTables.Add(Connection:="TEXT;" & "mydata.csv", Destination:=ws.Range("A1"))
    .TextFileParseType = xlDelimited
    .TextFileCommaDelimiter = True
    .Refresh
End With

' delete the querytable if there is one
On Error GoTo nothingtodelete
    Sheets("Data").QueryTables(1).SaveData = False
    Sheets("Data").QueryTables.Item(1).Delete 
nothingtodelete: 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T13:38:19.070

有可能的。

如果没有 vba，您将使用 DATA-Tab 并从文本源导入。

使用 vba，您可以将 csv 作为新工作簿打开：

```
Public Function openSource(fileToOpen As String) As Excel.Workbook
On Error GoTo err_exit

    Dim f As Object
    Dim fs As Object

    Set fs = CreateObject("Scripting.FileSystemObject")
    Set openSource = Nothing

    If fs.fileexists(fileToOpen) Then
        Set f = fs.GetFile(fileToOpen)

        Set openSource = ThisWorkbook.Application.Workbooks.Open( _
            FileName:=f.path, _
            UpdateLinks:=2, _
            ReadOnly:=True, _
            AddToMRu:=False, _
            Notify:=False)

        Windows(openSource.Name).Visible = False
    End If
    Exit Function
err_exit:
    'throwErrMsg "Failed to read File!", "openSource"
    If Not openSource Is Nothing Then
        openSource.Close SaveChanges:=False, RouteWorkbook:=False
    End If
End Function

Dim CSVWorkbook As New Excel.Workbook
Set CSVWorkbook = openSource(c:\SO2PO.csv) 
```

现在您可以像其他任何工作簿一样浏览此工作簿并复制行、列或整个工作表；）希望这会有所帮助。

另一种方法是在 vba 版本中使用从文本导入，但我现在没有示例。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-30T13:43:05.407

有很多方法可以将数据导入 Excel。查询表（由 The_Barman 演示）、SQL、导入向导等。

通常，该方法取决于您需要导入的文件上的数据显示的干净程度，以及您是否确切知道数据的布局方式。例如，如果有空行、混合数据类型、合并单元格等，那么它可能是一场噩梦。

下面是一种较慢的“蛮力”方法，通常首先在 Excel 中打开文件来获取所有数据。当其他方法失败时，这通常是最后要做的事情。

```
Option Explicit

Public Sub ImportData()
Dim CSVFilename As String
Dim writeToFilename As String
Dim writeToSheet As String
Dim readXL As Workbook
Dim readWS As Worksheet
Dim writeXL As Workbook
Dim writeWS As Worksheet
Dim UsedRng As Range

    CSVFilename = Environ$("USERPROFILE") & "\Desktop" & "\SO2PO.csv"
    writeToFilename = Environ$("USERPROFILE") & "\Desktop" & "\Open Order.xlsx"
    writeToSheet = "PO Data"

    Set writeXL = GetObject(writeToFilename)
    Set writeWS = writeXL.Sheets(writeToSheet)
    'writeWS.Parent.Windows(1).Visible = True

    Set readXL = GetObject(CSVFilename)

    With readXL

        Set readWS = readXL.Sheets(1)
        Set UsedRng = RealUsedRange(readWS)
        writeWS.Range(UsedRng.Address).Value = UsedRng.Value

    End With

    'close CSV without saving
    readXL.Close SaveChanges:=False
    Set readWS = Nothing
    Set readXL = Nothing

    'close template with save
    writeXL.Close SaveChanges:=True
    Set writeWS = Nothing
    Set writeXL = Nothing

End Sub

Public Function RealUsedRange(ByVal WS As Worksheet) As Range
'Find used range
    Dim FirstRow        As Long
    Dim LastRow         As Long
    Dim FirstColumn     As Integer
    Dim LastColumn      As Integer

    On Error Resume Next

    With WS

        FirstRow = .Cells.Find(What:="*", After:=.Cells(.Rows.Count, .Columns.Count), LookIn:=xlValues, LookAt:= _
        xlPart, SearchOrder:=xlByRows, SearchDirection:=xlNext).Row

        FirstColumn = .Cells.Find(What:="*", After:=.Cells(.Rows.Count, .Columns.Count), LookIn:=xlValues, LookAt:= _
        xlPart, SearchOrder:=xlByColumns, SearchDirection:=xlNext).Column

        LastRow = .Cells.Find(What:="*", After:=.Range("A1"), LookIn:=xlValues, LookAt:= _
        xlPart, SearchOrder:=xlByRows, SearchDirection:=xlPrevious).Row

        LastColumn = .Cells.Find(What:="*", After:=.Range("A1"), LookIn:=xlValues, LookAt:= _
        xlPart, SearchOrder:=xlByColumns, SearchDirection:=xlPrevious).Column

        Set RealUsedRange = .Range(.Cells(FirstRow, FirstColumn), .Cells(LastRow, LastColumn))

    End With

    On Error GoTo 0

End Function 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-06-29T02:49:20.980

```
Sub demo()
Dim FilePath As String
FilePath = "C:\Users\Tamil\Desktop\padding_values.csv"
Open "C:\Users\Tamil\Desktop\padding_values.csv" For Input As #1
row_number = 0
Do Until EOF(1)
Line Input #1, LineFromFile
LineItems = Split(LineFromFile, ",")
ActiveCell.Offset(row_number, 0).Value = LineItems(2)
ActiveCell.Offset(row_number, 1).Value = LineItems(1)
ActiveCell.Offset(row_number, 2).Value = LineItems(0)
row_number = row_number + 1
Loop
Close #1

End Sub 
```

# javascript - 一次导入javascript库

> ID：12197278
> 
> 赞同：1
> 
> 时间：2012-08-30T12:52:05.427
> 
> 标签：javascript, html, browser, web, browser-cache

我正在构建一个导入 javascript 库（位于内部`<head>`）的网站：

```
<script type="text/javascript" src="@routes.Assets.at("nicedit/nicEdit.js")"></script> 
```

这意味着，
每个页面加载（无论我网站中的哪个页面），都存在这条线。

我想知道现代浏览器是否下载该库一次，然后缓存它，
或者每个页面加载 - javascript 是重新下载库。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T12:57:35.563

一般情况下，如果从同一个url重复请求，大部分浏览器都会缓存一个javascript文件；但是，我对*正常情况*的定义包含在服务器的通常设置方式中。真正的结果取决于服务器发送的[缓存标头](http://www.w3.org/Protocols/rfc2616/rfc2616-sec13.html)，以及 URL 是否更改（从您的问题中不清楚）。

StackOverflow 上有很多关于缓存 JavaScript 的问题。[这包括一些概要。](https://stackoverflow.com/questions/311062/caching-javascript-files)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T13:13:03.293

请尝试配置 http.cacheControl

> http.cacheControl
> 
> 静态文件的 HTTP 响应头控制：以秒为单位设置默认的 max-age，告诉用户的浏览器应该缓存页面多长时间。这只能在 prod 模式下读取，在 dev 模式下缓存被禁用。例如，发送无缓存：
> 
> http.cacheControl=0 默认值：3600 - 将缓存到期设置为一小时。

[信息来源](http://www.playframework.org/documentation/1.2.3/configuration)。

# c# - SQL Server 通知

> ID：12197279
> 
> 赞同：3
> 
> 时间：2012-08-30T12:52:15.257
> 
> 标签：c#, .net, sql, sql-server

我正在构建一个从 SQL Server 提取数据的应用程序，服务器的版本可能从 2005 年到 2012 年不同，但最重要的是 2008 年和 2012 年。

如果我想监听数据库中某些表和行的更改，并发送或获取这些更改并在我的 C# 应用程序中使用它们，那么最好的方法是什么？

我不需要更新数据库中的任何数据，这是另一个已经存在的应用程序的工作。

我只想听变化，或轮询变化，或类似的东西。

根据您的经验，什么是最好的，Service Broker？查询通知？MSMQ？Sql依赖？更改数据跟踪？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T14:26:47.540

我认为您可以使用 SQL Server 公开的性能计数器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T13:00:46.340

考虑将[SQL Server CLR 集成](http://msdn.microsoft.com/en-us/library/ms254963%28v=VS.80%29.aspx)与触发器结合使用。

例如，您可以对您希望的更改进行协议（比如说在您为此目的创建的表中），并且您可以运行一个看门狗进程，该进程以恒定的时间间隔或在某些时间点根据您的需要提取数据。

# list - 表内的 Freemarker 列表

> ID：12197282
> 
> 赞同：0
> 
> 时间：2012-08-30T12:52:22.723
> 
> 标签：list, html-table, freemarker

我正在尝试使用 freemarker 生成一个表。

```
<table class="timeline">
        <tr>
            <#list children as child >
                <td class="timeline-item"><a href="${child.url}">${child.title}</a></td>
                <td><img class="sitelink_arrow" src="images/arrow.png"/></td>
            </#list>
        </tr>
    </table> 
```

这将产生一个错误：

> 期待以下之一： ... ... ... ... ... ... ... ... <_INCLUDE> ...
> ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ...
> ... ... . ... ... ... ... ... ... ... ... ... ... ... "${" ...
> "#{" ...

如果我将此列表放在表格之外，那么它就可以正常工作。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T06:36:44.077

您的代码应如下所示：

如果您也发布代码会更好。也完全错误。

```
[#ftl]
<table id="timelineTable" class="timeline" align="left" width="100%">
    [#if children?? && children?size > 0] 
    [#list children as child]
    <tr>
        <td class="timeline-item">
            <a href="${child.url}">${child.title}</a>
        </td>
        <td>
            <img class="sitelink_arrow" src="images/arrow.png"/>
        </td>
    </tr>
    [/#list]
[#else] 
    No Details Available
[/#if] 
```

# php - 在 php 中执行我自己的 groovy 脚本

> ID：12197284
> 
> 赞同：3
> 
> 时间：2012-08-30T12:52:28.953
> 
> 标签：php, drupal, groovy

嗨，我有这个 groovy 脚本（在 $FRAPID_HOME/bin 中），我想在 Drupal 中调用它：

```
#!/usr/bin/env groovy 

def cli = new CliBuilder(usage: 'frapid-generate-keys projectPath')
def opt = cli.parse(args)

if ( opt.h || opt.arguments().isEmpty() ) {
   cli.usage()
   return
}

def path = "."

println("Generating keys...")
def frapid = new Frapid()
println '---->' + opt.arguments()[0]
println("Keys genarated")
~ 
```

php代码是这样的：

```
function api_manager_generate_keys_form_submit( $form, &$form_state) {

   $output = shell_exec( 'frapid-generate-keys '. $form_state['values']['api_manager_project_root'] );

   drupal_set_message( $output );

} 
```

我的 .bashrc 配置是这样的：

```
export FRAPID_HOME=/home/admin1/frapid
export JAVA_HOME=/usr/lib/jvm/java-7-openjdk-i386
export GROOVY_HOME=/home/admin1/groovy-2.0.1

export CLASSPATH=$FRAPID_HOME/classes:$CLASSPATH
export PATH=$JAVA_HOME/bin:$PATH
export PATH=$GROOVY_HOME/bin:$PATH 
```

当我尝试在 drupal 中执行时，apache 给了我这个错误：

```
sh: 1: frapi-generate-keys: not found 
```

然后我尝试给出绝对路径：

```
$output = shell_exec( '/home/admin1/frapid/bin/frapid-generate-keys '. $form_state['values']['api_manager_project_root'] ); 
```

但仍然错误：

```
/usr/bin/env: groovy: No such file or directory 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T15:15:44.843

好的... Apache 对 PATH 变量有不同的文件配置。对于 ubuntu，文件是 /etc/apache2/envvars，在这里我们可以“导出”我们的变量

# c++ - NodeJS：为什么 nodejs c++ 插件这么慢？

> ID：12197292
> 
> 赞同：3
> 
> 时间：2012-08-30T12:52:42.093
> 
> 标签：c++, node.js, coffeescript, v8, add-on

我正在尝试编写一个非常简单的 nodejs c++ 插件并将其用法与通常的 nodejs 模块用法（编写在 CoffeeScript 上）进行比较。我编写了一个测试，它从插件创建一百万个 AddonClass 对象实例，从模块创建 CoffeeClass。源代码是：

插件.cpp

```
#define BUILDING_NODE_EXTENSION
#include <node.h>
#include "addon_class.hpp"
using namespace v8;
static void InitAll(Handle<Object> target) {
  Addon::Init(target);
}
NODE_MODULE(addon, InitAll) 
```

addon_class.hpp

```
#ifndef _ADDON_CLASS_HPP_
#define _ADDON_CLASS_HPP_

#include <node.h>

class Addon : public node::ObjectWrap {
 public:
  static void Init(v8::Handle<v8::Object> target);
 private:
  Addon(int value) : value_(value) {};
  ~Addon() {};
  static v8::Handle<v8::Value> New(const v8::Arguments& args);
  int value_;
};

#endif 
```

addon_class.cpp

```
#define BUILDING_NODE_EXTENSION
#include <cstdio>
#include <node.h>
#include "addon_class.hpp"
using namespace v8;

Persistent<FunctionTemplate> tpl;

void Addon::Init(Handle<Object> target) {
  Local<FunctionTemplate> t = FunctionTemplate::New(New);
  tpl = Persistent<FunctionTemplate>::New(t);
  tpl->SetClassName(String::NewSymbol("AddonClass"));
  tpl->InstanceTemplate()->SetInternalFieldCount(1);
  target->Set(String::NewSymbol("AddonClass"), tpl->GetFunction());
}

Handle<Value> Addon::New(const Arguments& args) {
  HandleScope scope;
  Addon* obj = new Addon(0);
  if (args[0]->IsNumber()) {
    obj->value_ = args[0]->NumberValue();
  }
  obj->Wrap(args.This());
  return args.This();
} 
```

CoffeeClass.coffee

```
class CoffeeClass
  value: undefined

  constructor: (@value) ->
    if !@value? then @value = 0

exports.CoffeeClass = CoffeeClass 
```

基准咖啡

```
CoffeeClass = (require './CoffeeClass.coffee').CoffeeClass
AddonClass = (require './build/Release/addon.node').AddonClass

N = 1e6

calculateDiff = (d1, d2) ->
  h = parseInt d2.getHours()
  h -= parseInt d1.getHours()
  m = parseInt d2.getMinutes() + h * 60
  m -= parseInt d1.getMinutes()
  s = parseInt d2.getSeconds() + m * 60
  s -= parseInt d1.getSeconds()
  ms = parseInt d2.getMilliseconds() + s * 1000
  ms -= parseInt d1.getMilliseconds()
  return ms

testCreate = (LC) ->
  d1 = new Date()
  for i in [1..N]
    l = new LC
  d2 = new Date()
  console.log LC.name, calculateDiff(d1, d2), "ms"

testCreate(CoffeeClass)
testCreate(AddonClass) 
```

这个基准测试的结果对我来说非常非常奇怪：

```
CoffeeClass 34 ms
AddonClass 487 ms 
```

所以，问题是：为什么这个简单的插件这么慢？而且，更重要的是，是否可以用它做某事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-06T19:57:09.837

您在这里的测试用例是如此之小，以至于 V8 和您的插件之间的接口开销大于已编译的 c++ 的任何性能节省。

插件的一个很好的用途是不那么闲聊，例如对输入参数执行复杂且优化的算法或与复杂的 c++ 数据结构交互。您希望最大限度地减少对插件的调用频率，并最大限度地增加每次调用时它执行的工作。您甚至可以考虑将许多单独的调用批处理到一个数组中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T20:00:29.750

在 V8 C++ 和 JavaScript 之间切换是昂贵的。我想如果你将 for 循环移到 C++ 类和 CoffeeScript 类中，你可能会发现 C++ 的性能优于 CoffeeScript。

# objective-c - UITable View 正在填充整个视图

> ID：12197293
> 
> 赞同：1
> 
> 时间：2012-08-30T12:52:43.117
> 
> 标签：objective-c, ios, uitableview, interface-builder, storyboard

我正在使用情节提要在 XCode 4.3 上开发 iphone 应用程序。

我创建了一个视图，我需要将它分成两部分。顶部将包含一个 UIImageView，底部将包含一个 UItableView。所以我使用故事板界面构建器将两者都添加到视图中，并设置 UIImageView 和 UITableView 的大小和位置。

但是，当我运行应用程序时， UITableView 将占据整个视图（它正在被缩放以填充视图）。我需要它来保持在 IB 中指定的宽度/高度。

为什么 UITableView 会占据整个视图？以及如何使带有 UITableView 的视图成为视图的一小部分而不是填充它？

我希望我很清楚非常感谢您的帮助

**编辑：**

故事板部分的屏幕截图

![截屏](../Images/04040f0ebb8661358a84d7ebc74fb2e8.png)

顶部有一个 UIImageView 和一个“共享”按钮，底部有一个 UITableView UITableView 占据了整个视图并隐藏了其余部分

请求另一个屏幕截图

![在此处输入图像描述](../Images/fab7c6b4d3734f0d8e72c4919d68d545.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:56:32.173

我在这里没有使用故事板，只是一个 xib，但这应该很重要。这是你应该如何设置它：

**UITableView 的自动调整大小：** ![在此处输入图像描述](../Images/eb6b144a07cfc46624acca405816442d.png)

**UIImageView 的自动调整大小：** ![在此处输入图像描述](../Images/af45f7436e9edf9b10f07806f31d5529.png)

注意图像视图的固定上边距，表格视图的固定下边距，以及两者的灵活高度。这将确保 tableview 始终粘在底部并按比例向上扩展，反之亦然。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T13:19:42.590

你会想玩弄你的这个设置`UITableView`

我相信设置已关闭使其调整大小。但我可能错了。

![在此处输入图像描述](../Images/de361d5d3bc34c16ed2c2d90b73de3d9.png)

注意：这是我的 UITableView 在视图控制器中的屏幕截图，它没有填满我的屏幕。在您的情况下，它可能有不同的设置。所以玩弄那里的价值观。

# android - Android 意图过滤器

> ID：12197298
> 
> 赞同：1
> 
> 时间：2012-08-30T12:52:59.337
> 
> 标签：android

我已经编写了以下意图过滤器来使用我的应用程序打开一个文本文件。它似乎有效，但只是有时。例如，如果我通过电子邮件发送文本文件，如果我选择从邮件中打开，我的应用程序不会显示。如果我先选择保存，然后打开，将显示我的应用程序。与投递箱类似的经验，如果我尝试从投递箱打开，我的应用程序将不会被列为能够打开，但如果我从投递箱导出到 sd 并使用文件管理器打开它，我的应用程序将被列出并且作品。

```
<intent-filter> 
      <action android:name="android.intent.action.MAIN"/> 
      <category android:name="android.intent.category.LAUNCHER"/> 
  </intent-filter>  
  <intent-filter>
  <action android:name="android.intent.action.VIEW" />
  <category android:name="android.intent.category.DEFAULT" />
  <category android:name="android.intent.category.BROWSABLE" />
  <data android:scheme="http" android:host="*" android:pathPattern=".*\\.txt" />
      <data android:scheme="https" android:host="*" android:pathPattern=".*\\.txt" />
      <!--  <data android:scheme="content" android:host="*" android:pathPattern=".*\\.txt" /> -->
  <data android:scheme="file" android:host="*" android:mimeType="*/*" android:pathPattern=".*\\.txt" />
   </intent-filter> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:15:23.067

Dropbox 和电子邮件应用程序可能使用内容提供程序并且不匹配`pathPattern`. 通常，内容提供程序不包含文件扩展名，但会使用 mime 类型来指示正在打开的文件类型。如果您打算打开任何`text/plain`文件，而不仅仅是那些具有`.txt`扩展名的文件，那么您最好`pathPattern`完全关闭。

```
<intent-filter>
      <data android:mimeType="text/plain" />
      <action android:name="android.intent.action.VIEW" />
      <category android:name="android.intent.category.DEFAULT" />
</intent-filter> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T13:00:23.257

可能是因为电子邮件应用程序和保管箱使用不同的方案，而不是文件、http 或 https。尝试仅使用 mime type 属性。

**编辑：**根据保管箱论坛：

> 仅供参考，现在最简单的方法是通过使用正确的 mime 类型注册 VIEW 从​​ Dropbox 打开您的应用程序。然后一切都正确移交，保存和观看文件更改以重新上传处理得很好。

您只需要指定 MIME 类型，无需其他任何内容。不过我还没有尝试过，但可能这也适用于电子邮件应用程序，只要 mime 类型匹配。

如果你有兴趣，这里是链接：

[https://forums.dropbox.com/topic.php?id=26035#post-162963](https://forums.dropbox.com/topic.php?id=26035#post-162963)

# iphone - 我们如何用可点击的方向名称制作指南针？

> ID：12197303
> 
> 赞同：0
> 
> 时间：2012-08-30T12:53:08.630
> 
> 标签：iphone, objective-c, uiimageview

我想开发一个基于指南针的项目。具有所有方向名称的指南针，如 N（北）、S、E、W、NE、NW、SE、SW。

我还想对每个方向名称执行操作，这样当我单击 N 时，它将显示另一个视图控制器 (xib)，其中包含有关北的详细信息（关于北方向的说明）。

我已经将指南针实现为`UIImageView`带有指南针图像。

我想让这个 N 成为可点击的并打开另一个 Xib。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T13:17:30.953

将带有 TouchUpEvent 或 UIButton 的 subView 添加到您的 kompas 视图中。然后将仿射旋转应用于 kompas 视图。

```
...
UIButton * btnN = alloc..initWithType...
btnN.frame = CGRectMake(...)
[btnN addTarget:self action:@selector(buttonNEvent)  forControlEvents:UIControlEventTouchUpInside];
[kompasView addSubView:btnN];

kompasView.transform = CATransform3DMakeRotation(ANGLE, 0, 0, 1);

-(void) buttonNEvent:(UIButton) sender
{
//button N click
} 
```

# tooltip - 使用参数对页面中的每个链接使用 dojo tooltipDialog

> ID：12197311
> 
> 赞同：1
> 
> 时间：2012-08-30T12:53:34.190
> 
> 标签：tooltip, dojo, xpages, xpages-extlib

任何人都知道如何使用参数从 extlib 打开工具提示对话框。

在csjs中，我找到网页中的所有链接并将它们绑定到鼠标悬停。使用链接中的一个键我知道单击了哪个链接，我想将此键发送到 toolTipDialog，以便我可以使用它来查找文档并在 tooltipDialog 中显示文档数据。

目前我发现打开工具提示对话框的唯一方法是使用似乎不允许参数的 XSP.openTooltipDialog("tooltipid",'linkid') 。

任何想法如何解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:51:01.140

这个怎么样？

```
require(["dijit/TooltipDialog", "dijit/popup",
   "dojo/on", "dojo/dom", "dojo/_base/lang"],

     function(ready, TooltipDialog, popup, on, dom, lang){

        var myTooltipDialog = new TooltipDialog({
            id: 'myTooltipDialog',
            style: "width: 300px;",
            contentTemplate: "<p>Key is: {key}</p>",
            content: 'empty',
            onMouseLeave: function(){
                popup.close(myTooltipDialog);
            },
            onOpen: function(pos) {
              this.set("content", lang.replace(this.contentTemplate, this.replaceObject));
            }
        });
                                                                      /
        query('a.hasSelectorClass').on('mouseover', function(){     // 
            myTooltipDialog.replaceObject = {                     //
                key : this.innerHTML // (inner text in anchor node)
            }
            popup.open({
                popup: myTooltipDialog,
                around: this // anchor
            });
        });
}); 
```

试试看是否有任何错误（未经测试的代码）:)

# wso2 - wso2 api manager 新的节流层

> ID：12197312
> 
> 赞同：1
> 
> 时间：2012-08-30T12:53:36.907
> 
> 标签：wso2, wso2carbon, wso2-am

我可以定义一个新的限制层，例如：“30 天无限制使用”吗？

```
 <wsp:Policy>
            <throttle:ID throttle:type="ROLE">30-days</throttle:ID>
            <wsp:Policy>
                <throttle:Control>
                    <wsp:Policy>
                        <throttle:MaximumCount> ? </throttle:MaximumCount>
                        <throttle:UnitTime> ? </throttle:UnitTime>

                    </wsp:Policy>
                </throttle:Control>
            </wsp:Policy> 
```

编辑：目标是在 30 天后使某个用户对某个 API 的订阅“过期”......这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T21:03:42.010

您不能使用策略文件中的两个参数***MaximumCount***和***UnitTime来指定您的要求。***到目前为止，您的需求的解决方案是使用 API Publisher 中预定义的***Unlimited***层发布您的 API，并通过在一个月后将API 的生命周期状态从***Published***更改为***Created来手动将其从 API 网关中删除。***

# c# - 基于图块的地图编辑器：滚动：生成新图像时会锁定应用程序一段时间

> ID：12197313
> 
> 赞同：1
> 
> 时间：2012-08-30T12:53:36.697
> 
> 标签：c#, wpf, performance, image

我目前正在开发一个基于图块的地图编辑器，专注于让滚动完全按照我的意愿工作。这就是我遇到一些麻烦的地方。滚动时，会生成图像以在您滚动时显示新内容。这可以正常工作，直到`System.Windows.Controls.Image`在新的一侧生成大约 200 个图像（ ）（简单的地图，不复杂）。

每当在侧面生成大约 1000 张图像（或者更多，如果您滚动得更快..），应用程序将挂起一段时间，具体取决于您滚动的速度等。

这种暂时挂断的原因总是由这条线路引起的。删除这条线完全消除了“滞后”（但显然没有给出想要的结果）：

```
img.Source = it.GetFullSpriteSource(0); 
```

该方法生成一个 ImageSource，如果已经生成，则返回存储在变量中的 ImageSource。问题不在于这种方法，因为下面的场景给出了同样的问题。

```
public static ImageSource yellowimg;
[...]
System.Drawing.Bitmap derp = new System.Drawing.Bitmap(32, 32);
using (System.Drawing.Graphics g = System.Drawing.Graphics.FromImage(derp))
    g.FillRectangle(System.Drawing.Brushes.Yellow, 0, 0, 32, 32);
yellowimg = Utilities.ToImgSource(derp);
[...]
img.Source = yellowimg; 
```

所以问题*可能*在于我分配了 ImageSource。

我正在从这样的位图中生成一个 ImageSource，可能是相关的：

```
public static ImageSource ToImgSource(Bitmap bitmap)
{
    return Imaging.CreateBitmapSourceFromHBitmap(
      bitmap.GetHbitmap(), IntPtr.Zero, Int32Rect.Empty,
      BitmapSizeOptions.FromEmptyOptions());
} 
```

* * *

我也尝试过在单独的线程中生成（后台生成），但这会导致以下错误，尝试从另一个线程读取 ImageSource。

`The calling thread cannot access the object because different thread owns it`

* * *

我可以尝试什么？

请记住，我对 WPF（最近开始）并不先进，而且我对`ImageSource`.

谢谢，

〜Tgys

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T13:49:20.887

Instead of creating an ImageSource from a System.Drawing.Bitmap you should use [WriteableBitmap](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.writeablebitmap.aspx). If you have to draw complicated drawing into the bitmap, you would have to draw into the [DrawingContext](http://msdn.microsoft.com/en-us/library/system.windows.media.drawingcontext.aspx) of a [DrawingVisual](http://msdn.microsoft.com/en-us/library/system.windows.media.drawingvisual.aspx) and render that DrawingVisual into a [RenderTargetBitmap](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.rendertargetbitmap.aspx),

When you create ImageSource objects in a separate thread, you have to call their [Freeze](http://msdn.microsoft.com/en-us/library/ms557735.aspx) method before using them in the UI.

# php - 使用ajax销毁php会话

> ID：12197315
> 
> 赞同：1
> 
> 时间：2012-08-30T12:53:39.210
> 
> 标签：php, jquery, json

我希望这样当有人按下某个链接时，通过使用 ajax 它将运行一个 php 文件来销毁会话，当它成功时，当前页面将从本地存储中删除一个项目，然后页面将重定向到索引页。

目前有以下但它不起作用

**查询**

```
$('#key a').click(function(e) {
                e.preventDefault();
                $.ajax({
                    type:"POST",
                    url:"/assets/inc/sign-out.php",
                    data:'',
                    dataType:'html',
                    context:document.body,
                    global:false,
                    async:false,
                    success:function(data){
                        console.log(data);
                        localStorage.removeItem("logged");
                        window.location.replace('/');
                    }
                });
            }); 
```

**PHP**

```
<?php 
include('config.php');
session_destroy();
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:02:52.767

尝试

```
<?php
// include 'config.php'; - does this config.php contain session related configuration like e.g. the cookie-name?

session_start(); // fetch/re-start current session
session_regenerate_id(true); // assign a new session id and delete old data
$_SESSION=array(); // empty session data
session_write_close(); // superfluous call ;-) 
```

作为你的 php 脚本。

见[http://docs.php.net/session_regenerate_id](http://docs.php.net/session_regenerate_id)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T13:03:58.943

在你的 php 中试试这个：

```
session_start();
session_unset(); 
```

# objective-c - 图像上的轴对称

> ID：12197316
> 
> 赞同：0
> 
> 时间：2012-08-30T12:53:41.860
> 
> 标签：objective-c, ios

如何在 UIImage 上应用轴对称？我在苹果文档等中找不到任何东西。我想我需要使用quartz2d，但我没有更多线索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T14:03:32.447

您可以从其行数据创建图像，只需使用此处描述的方法[从原始 RGBA 数据创建 UIImage反转像素](https://stackoverflow.com/questions/4545237/creating-uiimage-from-raw-rgba-data)

# .net - 在 compactframework 上等待带有消息泵的事件

> ID：12197322
> 
> 赞同：0
> 
> 时间：2012-08-30T12:53:56.370
> 
> 标签：.net, compact-framework

我曾经成功地使用 MsgWaitForMultipleObjects 来等待事件的句柄并同时发送消息。

但是我在 Windows Mobile 上没有该程序。

情况如下：

*   我打开显示一些动画的表单
*   运行线程
*   等到线程完成（当它将事件设置为 Set() 时）

如果不发送消息，我将看不到表单上的动画，例如使用 WaitOne 等待线程，阻塞一切......

如何在 Windows Mobile 上实现相同的功能？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T13:02:12.563

实现您正在寻找的一个简单方法是使用作为[OpenNETCF 框架一部分的 BackgroundWorker 类](http://www.opennetcf.com/Products/SmartDeviceFramework.aspx)

它本质上是来自完整 .NET 框架的 System.ComponentModel.BackgroundWorker 类的功能副本。

执行如下：

1.  在表单加载事件上开始动画
2.  启动后台工作者
3.  等待后台工作者触发完成事件。

下面是一个改编自[MSDN](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx) backgroundworker 类文档的示例，它可能会为您指明正确的方向。

```
 public Form1()
    {
        InitializeComponent();
        InitializeBackgroundWorker();

    }

    // Set up the BackgroundWorker object by  
    // attaching event handlers.  
    private void InitializeBackgroundWorker()
    {
        backgroundWorker1.DoWork += 
            new DoWorkEventHandler(backgroundWorker1_DoWork);
        backgroundWorker1.RunWorkerCompleted += 
            new RunWorkerCompletedEventHandler(
        backgroundWorker1_RunWorkerCompleted);
        backgroundWorker1.ProgressChanged += 
            new ProgressChangedEventHandler(
        backgroundWorker1_ProgressChanged);
    }

    protected override void OnLoad(EventArgs e)
    {

        if (backgroundWorker1.IsBusy != true)
        {
            // Start the asynchronous operation.
            // start your animation here!

            backgroundWorker1.RunWorkerAsync();
        }
    }

    // This event handler is where the time-consuming work is done. 
    private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
    {
        BackgroundWorker worker = sender as BackgroundWorker;

         //this is taken from the msdn example, but you would fill 
         //it in with whatever code is being executed on your bg thread.
        for (int i = 1; i <= 10; i++)
        {
            if (worker.CancellationPending == true)
            {
                e.Cancel = true;
                break;
            }
            else
            {
                // Perform a time consuming operation and report progress.
                System.Threading.Thread.Sleep(500);
                worker.ReportProgress(i * 10);
            }
        }
    }

    // This event handler updates the progress. 
    private void backgroundWorker1_ProgressChanged(object sender, ProgressChangedEventArgs e)
    {
        //modify your animation here if you like?
    }

    // This event handler deals with the results of the background operation. 
    private void backgroundWorker1_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        //your background process is done. tear down your form here..

    } 
```

# javascript - 如何将 JavaScript 包含到页眉 MVC4 中

> ID：12197323
> 
> 赞同：7
> 
> 时间：2012-08-30T12:54:05.457
> 
> 标签：javascript, asp.net-mvc-3, asp.net-mvc-4

> **可能重复：**
> [ASP.Net MVC 3 Razor：在 Head 标记中包含 js 文件](https://stackoverflow.com/questions/4311783/asp-net-mvc-3-razor-include-js-file-in-head-tag)

我不想将大量 JS 放入某些布局中，我需要为某些特定页面执行此操作，我的意思是将一些 JS 包含到它们的标题中。

我已经尝试过，但它没有按应有的方式工作。

```
@{
    Layout = "~/Views/Shared/_LayoutInner.cshtml";
    @Scripts.Render("~/Scripts/farbtastic/farbtastic.js")
    @Styles.Render("~/Scripts/farbtastic/farbtastic.css")
    @Scripts.Render("~/Scripts/jquery.tinycarousel.min.js")
    @Scripts.Render("~/Scripts/jquery-ui-1.8.11.min.js")
}
<script type="text/javascript" charset="utf-8">
    $(document).ready(function () {
        $('#slider1').tinycarousel();
        $("#accordion").accordion();
        $('#picker').farbtastic('#color');
    });
</script> 
```

我试过这样

```
@{
    Layout = "~/Views/Shared/_LayoutInner.cshtml";
  <script type="text/javascript" src="@Url.Content("~/Scripts/farbtastic/farbtastic.js")"></script>
<link href="@Url.Content("~/Scripts/farbtastic/farbtastic.css")" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="@Url.Content("~/Scripts/jquery.tinycarousel.min.js")"></script>
<script type="text/javascript" src="@Url.Content("~/Scripts/jquery-ui-1.8.11.min.js")"></script>
} 
```

而且根本没有成功。

我怎样才能归档它？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-30T13:33:40.697

我敢肯定，您`_LayoutInner.cshtml`应该像这样引用 JS 文件

```
<head>
<link href="@Url.Content("~/Scripts/farbtastic/farbtastic.css")" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="@Url.Content("~/Scripts/jquery-ui-1.8.11.min.js")"></script>
</head> 
```

要实现您的目标，您必须`_LayoutInner.cshtml`像这样在页面标题部分中添加两个命名部分 -

```
<head>
<link href="@Url.Content("~/Scripts/farbtastic/farbtastic.css")" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="@Url.Content("~/Scripts/jquery-ui-1.8.11.min.js")"></script>
 @RenderSection("JavaScript", required: false)
 @RenderSection("CSS", required: false)
</head> 
```

现在在您的其他页面中包含额外的 javascript 或 css 页面使用这些命名部分

```
@section JavaScript
{
   <script type="text/javascript"src="@Url.Content("~/Scripts/farbtastic/farbtastic.js")"></script>
   <script type="text/javascript" src="@Url.Content("~/Scripts/jquery.tinycarousel.min.js")"></script>
}

@section CSS
{
  <link href="@Url.Content("~/Scripts/farbtastic/farbtastic.css")" rel="stylesheet" type="text/css" />
} 
```

是否为 javascript 和 css 包含不同的命名部分取决于您。

希望能帮助到你！

# phonegap-plugins - iOS 版 Phonegap Urbanairship 插件中的重复符号

> ID：12197327
> 
> 赞同：1
> 
> 时间：2012-08-30T12:54:12.433
> 
> 标签：phonegap-plugins, urbanairship.com

我正在使用 UA Phonegap 插件[https://github.com/urbanairship/phonegap-ua-push](https://github.com/urbanairship/phonegap-ua-push)将 UA 集成到我的 Phonegap/iOS 应用程序中。

不幸的是，我无法让它工作。甚至示例项目也无法构建。问题是链接期间出现重复的符号。请注意：我没有包含任何额外的头文件、库等。我只是在尝试构建 iOS 示例项目。

冲突符号似乎植根于`ASI* (ASIHttpRequest, ASIAuthenticationDialog, etc)`已集成到 UA 中的库中。`libUAirship-1.3.2.a`令人惊讶的是，两个 UA 库（和`libUAirshipPush-1.3.2.a`）之间发生了冲突。

链接器输出：`ld: duplicate symbol _OBJC_METACLASS_$_UA_ASIAutorotatingViewController in /Users/b/Downloads/urbanairship-phonegap-ua-push-9b7a89b/ios-sample/Airship/libUAirshipPush-1.3.2.a(UA_ASIAuthenticationDialog.o) and /Users/b/Downloads/urbanairship-phonegap-ua-push-9b7a89b/ios-sample/Airship/libUAirship-1.3.2.a(UA_ASIAuthenticationDialog.o) for architecture i386 clang: error: linker command failed with exit code 1 (use -v to see invocation)`

这怎么可能发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T10:19:29.630

当我在“其他链接器标志”的目标设置中添加标志“-ObjC”时，这个问题出现了。

检查它，我需要另一个库的标志，但如果不是你的情况......

# ruby-on-rails - Rails：如何在连接表中创建新条目

> ID：12197329
> 
> 赞同：2
> 
> 时间：2012-08-30T12:54:16.080
> 
> 标签：ruby-on-rails, many-to-many, model-associations

让我们考虑一个实际的例子：一个有很多评论的产品，由客户撰写。我们通过*评论在**产品*和*客户*之间建立了多对多的关系。

 *```
class Product < ActiveRecord::Base
    has_many :reviews
    has_many :clients, :through => :reviews
end

class Client < ActiveRecord::Base
    has_many :reviews
    has_many :products, :through => :reviews
end

class Reviews < ActiveRecord::Base
    belongs_to :product
    belongs_to :client
end 
```

在这里，我使用`has_many :through`来创建多对多关系，因为*评论*表需要有额外的属性，比如分数，内容，喜欢，...

用户登录我的应用程序，因此我可以通过以下方式获取他的数据：

```
client = Client.find_by_id current_user.id 
```

他去产品页面，所以我可以得到产品数据：

```
product = Product.find_by_id params[:id] 
```

**如何创建产品的客户评论？**

我试过了：

```
review = Review.create :client => client, :product => product, :comment => params[:review][:comment] 
```

但它给了我：*MassAssignSecurity：无法批量分配受保护的属性：产品、客户*

任何想法？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T15:28:46.193

一旦您创建了 Review 对象并显式传递参数，您需要使它们在 Review 模型中可访问。在这种情况下，它必须是外键

```
class Reviews < ActiveRecord::Base

    belongs_to :product
    belongs_to :client

    attr_accessible :client_id, :product_id
end 
```

这应该可行，但这是不好的做法，会导致安全问题。我建议不要让外键可访问并在 Review.create 中显式传递它们，而是建议将 review.create 替换为以下内容：

```
review = Review.new
review.client = client
review.product = product
review.comment = params[:review][:comment]
review.save 
```

这将创建一个新的 Review 对象，避免批量分配。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T13:01:13.460

:client 和 :product 属性是私有的，你必须让它们在每个类设置上都可以访问，`attr_accessible :client`并且`attr_accessible :product`分别像：

```
class Reviews < ActiveRecord::Base
    belongs_to :product
    belongs_to :client

    attr_accessible :client, :product
end 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T13:02:11.563

添加到属性为 :product 和 :client 的模型中

```
attr_accessible :product, :client 
```

[http://api.rubyonrails.org/classes/ActiveModel/MassAssignmentSecurity/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveModel/MassAssignmentSecurity/ClassMethods.html)*

# python - 将 Python PIL 代码转换为 Python OpenCV

> ID：12197332
> 
> 赞同：0
> 
> 时间：2012-08-30T12:54:21.003
> 
> 标签：python, opencv, python-imaging-library

我正在使用 Python 进行一些业余图像分析，特别是 Numpy、PIL 和 OpenCV。但是，我对 PIL 的性能不太满意，所以我想将这些代码部分移植到 OpenCV。如果需要，这也将使以后更容易将代码移植到 C/C++。

无论如何，我在移植部分代码时遇到了一些麻烦，希望在这里得到一些帮助。具体来说，我需要更改的部分是：

**功能：找出图像中像素最多的红、绿、蓝（R、G、B）强度。目前通过直方图完成。输入图像是 Python PIL 图像的形式。**

```
def bgcalcRGB(img):

    hist = img.histogram()

    R=0;G=0;B=0; avgR=0.; avgG=0.; avgB=0.; Rmax=175+15; Rmin=175-15;
    Gmax=160+15; Gmin=160-15; Bmax=150+15; Bmin=150-15;

    for x in range(Rmin,Rmax,1):
        if hist[x] > avgR: avgR = hist[x]; R = x
    for x in range(256+Gmin,Gmax+256,1):
        if hist[x] > avgG: avgG = hist[x]; G = x - 256
    for x in range(256*2+Bmin,Bmax+256*2,1):
        if hist[x] > avgB: avgB = hist[x]; B = x - 256*2
    return (R,G,B) 
```

**功能：作为 RGB 通道的同时阈值。如果某个 RGB 像素在某个范围内（与 R、G 和 B 无关），则其颜色为白色。如果不是，则将其丢弃并涂成黑色。输入图像是 Python PIL 图像。**

```
def mask(low, high):
    return [255 if low <= x <= high else 0 for x in range(0, 256)]

img1 = img.point(mask(val1-uc1,val1+uc1)+mask(val2-uc2,val2+uc2)+mask(val3-uc2,val2+uc2)).convert('L').point([0]*255+[255]).convert('RGB') 
```

所以我需要帮助将上述代码转换为仅使用 OpenCV，或者至少不使用 Python PIL。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T16:44:42.310

你应该试试**[SimpleCV](http://simplecv.org/)**

它基于 Python OpenCV 绑定、scipy、numpy、pygame、PIL。SimpleCV 非常容易学习和实现。

`img = Image("filename.jpg")`将以 BGR 形式加载图像。

要访问图像的 x、y 像素，`color = img[x, y]`

得到 cv2.cv.iplimage =>`img.getBitmap()`

SimpleCV 集成了 scipy 和 numpy 用于快速计算和机器学习模块。它包括 pygame 显示。

要显示图像，`img.show()`

它还包括各种跟踪功能（Lucas Kanade Tracker、CAMShift 等）、关键点匹配功能（SURF、SIFT、ASIFT、STAR、ORB、MSER 等）和许多其他 blob 功能。

使用 SimpleCV 可以轻松完成基本图像处理和图像数据提取。

# sql-server-2008 - 每次运行存储过程时都会附加数据

> ID：12197333
> 
> 赞同：1
> 
> 时间：2012-08-30T12:54:21.377
> 
> 标签：sql-server-2008

我是存储过程的新手。我编写了存储过程以将表从一个数据库复制到另一个数据库。每次执行我的存储过程时，我的数据被添加到目标表中。每次执行时我的行数都在增加。

请帮助解决问题。希望问题在循环中。

我的SP是：

```
--exec mall

alter procedure mall
as
begin
    declare @mallid int
    declare @mallname nvarchar(40)
    declare @mallstatus nvarchar(40)
    declare @malludsuomid nchar(2)
    declare @malludsassetcode nvarchar(6)
    declare @malludsassettype nvarchar(15)
    declare @malludsremarks nvarchar(max)
    declare @malludsdwdb int
    declare @mallsecterr int
    declare @mallassetid int
    declare @secterr int
    declare @Maxmallid int
    declare @mallentityid int

    Select @mallentityid = customtable.Bord_TableId From CRM.dbo.Custom_Tables as customtable With (NoLock) Where Upper(Bord_Caption) = Upper('Mall') And Bord_Deleted Is Null
    DECLARE cur_address CURSOR FOR

            SELECT 
            udsasset.Asset_ID,udsasset.Asset_Name,udsasset.Asset_Status,udsasset.UOM_ID, udsasset.Asset_Code,udsasset.Asset_Type,udsasset.Remarks,udsasset.DW_Key_Source_DB --,crmterr.TPro_SecTerr
        from 
            CMA_UDS.dbo.Dim_Asset as udsasset           

    OPEN  cur_address
    FETCH NEXT FROM cur_address INTO @mallid,@mallname,@mallstatus,@malludsuomid,@malludsassetcode,@malludsassettype,@malludsremarks,@malludsdwdb --,@mallsecterr
    WHILE @@FETCH_STATUS = 0 
    BEGIN 
        if not exists (select crmmall.mall_MallID from CRM.dbo.Mall as crmmall where crmmall.mall_MallID = @mallid)
        begin
            exec @Maxmallid = CRM.dbo.crm_next_id @Table_Id=@mallentityid
            insert into 
                CRM.dbo.Mall
                    (mall_MallID,mall_Name,mall_Status,mall_uds_UOMID,mall_uds_asset_code,mall_uds_asset_type,
                    mall_uds_remarks,mall_uds_dw_db,mall_CreatedBy,mall_CreatedDate,mall_Secterr,mall_AMOSUploaded,mall_asset_id)
            values(@Maxmallid,@mallname,@mallstatus,@malludsuomid,@malludsassetcode,@malludsassettype,@malludsremarks,@malludsdwdb,1,GETDATE(),
                @mallsecterr,GETDATE(),@mallid)
        end
        else
        begin
            update 
                CRM.dbo.Mall 
            set 
                mall_asset_id=@mallid,mall_Name = @mallname,mall_Status=@mallstatus,mall_uds_UOMID =@malludsuomid,mall_uds_asset_code=@malludsassetcode,
                mall_uds_asset_type=@malludsassettype,mall_uds_remarks=@malludsremarks,mall_uds_dw_db=@malludsdwdb,mall_UpdatedBy=1, 
                mall_UpdatedDate=GETDATE(),mall_Secterr=@mallsecterr,mall_AMOSUploaded=GETDATE() 
            where 
                mall_MallID=@mallid
        end
        FETCH NEXT FROM cur_address INTO @mallid,@mallname,@mallstatus,@malludsuomid,@malludsassetcode,@malludsassettype,@malludsremarks,@malludsdwdb--,@mallsecterr
    end
    CLOSE cur_address 
    DEALLOCATE cur_address
End 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T13:02:17.830

为什么要`crm_next_id`作为 in 中的值插入`mall_MallID`，但使用相同的 id 进行比较`@mallid`以查看记录是否已插入？例如，如果您有 id `5`，并且您使用 id 插入一条新记录`150`，那么当您再次运行 SP 时，它不会看到该记录已经插入。下一次运行，它将添加带有 id 的记录`151`，然后`152`，以此类推。您不应该同时使用相同的字段作为自动增量标识和外键引用......

您要么需要`@mallid`在插入新记录时使用相同的记录以使它们匹配，要么在生成新 id 并插入表中后，将原始记录更新`CMA_UDS.dbo.Dim_Asset`为有`Asset_ID`=`@mallid`以便它们正确链接。您使用哪种方法取决于这些 id 的含义以及您在特定应用程序中的限制条件。

# types - 为什么 Dialyzer 告诉我这个有趣的合约有重叠的域？

> ID：12197338
> 
> 赞同：7
> 
> 时间：2012-08-30T12:54:52.977
> 
> 标签：types, erlang, dialyzer

我正在阅读在线书籍“ [learn you some erlang](http://www.learnyousomeerlang.com/content) ”并尝试一些练习来检查我的理解。

**我在类型规范和 Erlang**章节中对 fifo 示例进行了一些修改，试图定义一个“typed_fifo(T)”（所有元素必须是相同类型 T 的 fifo）

我的类型规范是：

> -typed_empty_fifo() :: {fifo, [], []}。
> 
> -typed_nonempty_fifo(A) :: {fifo, nonempty_list(A), list(A)} | {fifo, [],nonempty_list(A) }。
> 
> -typed_fifo(A) :: typed_empty_fifo() | typed_nonempty_fifo(A)。

当我在以下功能规范中使用它时：

> -spec 空 (typed_empty_fifo()) -> true;
> 
> ```
>  (typed_nonempty_fifo(_)) -> false. 
> ```
> 
> 空（{fifo，[]，[]}）-> 真；
> 
> 当 is_list(A), is_list(B) -> false 时为空({fifo, A, B})。

Dialyzer 表示由于域重叠，它将忽略规范。

有人可以告诉我我在哪里犯了错误吗？

我还有一点，在尝试定义类型化的 fifo 之前，我有一个运行良好的版本，An Dialyzer 告诉我没有什么可以阻止使用不正确的列表。令人惊讶的是，我没有找到一种简单的方法（我可以在警卫中使用）来测试列表的正确/不正确字符。

真的很奇怪，因为当我使用 bif length/1 时，它会因为 badarg 的原因而失败！

> 23> L=[1,2|3]。==> [1,2|3]
> 
> 24> is_list(L)。==> 真
> 
> 25> 长度（L）。==> 异常错误：参数错误
> 
> ```
>  in function  length/1
> 
>     called as length([1,2|3]) 
> ```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T19:24:02.343

您的类型和规格没有任何问题。问题是在 Dialyzer 中用于表示类型的数据类型没有保持您提供的精度。具体来说，并集：`{fifo, nonempty_list(A), list(A)} | {fifo, [], nonempty_list(A)}`被“压碎”成`{fifo, list(A), list(A)}`，因为元组具有相同的元数 (3) 和第一个原子元素 ( `fifo`)。Dialyzer 通常会进行过度近似（您也可以[在此处](http://erlang.org/pipermail/erlang-questions/2012-August/068855.html)看到）以使类型分析更有效。您可以放心地忽略此警告。

对于第二个问题，`is_list/1`仅检查作为参数传递的术语的第一个构造函数是否是 cons 单元格。甚至`is_list([1|2])`回报`true`。

如果要确保参数是正确的列表，可以在`case`如下表达式中使用自定义函数：

```
case is_proper_list(L) of
  true -> ...;
  false -> ...
end

is_proper_list([]) -> true;
is_proper_list([_|L]) -> is_proper_list(L);
is_proper_list(_) -> false. 
```

然而，这不能放在守卫中。在警卫中，您可以使用您在下面的评论中建议的那个 ( `length(L) >= 0`)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T13:49:23.990

关于你的第二个问题，正确的工作方式`list`是：

```
1> L = [1,2|[3]].
[1,2,3]
2> is_list(L).
true
3> length(L).
3 
```

请注意，该`[Head|Tail]`符号要求您`Tail`是`list`（不是`int`）。

# concurrency - Cassandra 中的并发写入：是否可能发生冲突？

> ID：12197340
> 
> 赞同：2
> 
> 时间：2012-08-30T12:54:59.293
> 
> 标签：concurrency, cassandra

在并发写入的情况下，Cassandra 是否保证副本的一致性？例如，如果 N=3，W=3 并且有 3 个并发写入者，是否有可能在每个副本上得到 3 个不同的值？

这是 Cassandra 特有的问题，还是规范的 Dynamo 设计也有这个问题，尽管它使用了矢量时钟？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T13:26:02.917

在这种情况下，Cassandra 使用客户端提供的时间戳，以确保每个副本都保持“最新”值。在您的示例中，您写入每个副本，即使副本以不同的顺序接收写入，它们也会使用写入提供的时间戳来决定保留哪个。将具有较旧时间戳的相同密钥写入副本将被忽略。

这种机制不仅需要处理并发写入 - Cassandra 可以在很长一段时间内接收乱序写入（即回复提示到最近关闭的节点）。为了解决这个问题，当 Cassandra 压缩 SSTables 并遇到两个相同的键时，它将使用时间戳来决定保留哪一个。

同样，Cassandra 有一个称为读取修复的功能。在读取时，Cassandra 将比较每个副本给出的时间戳，并将与最新时间戳关联的值返回给客户端。然后它将这个值写回任何过期的副本（这可能会对性能产生影响，因此它进行后续写入的机会是可调整的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T16:52:11.607

只是添加 tom.wilkie 的答案如果您想保证数据的良好一致性并保持最新值，请尝试始终以 LOCAL_QUORUM 或 QUORUM 一致性进行读写。

# java - 为什么我们实际上使用 getter 和 setter？

> ID：12197343
> 
> 赞同：0
> 
> 时间：2012-08-30T12:55:17.040
> 
> 标签：java

> **可能的重复：**
> [Getter 和 Setter 是邪恶的吗？](https://stackoverflow.com/questions/565095/are-getters-and-setters-evil)
> [为什么要使用 getter 和 setter？](https://stackoverflow.com/questions/1568091/why-use-getters-and-setters)

我一直在问自己这个问题，但为什么我们实际上要使用 Getters 和 Setter 方法呢？它们在我们的代码中占用了额外的空间，有人可以解释一下。为了更好地理解，我在下面发布了一些代码。

```
public class Test2
{
   public int _ChangeThis = 0;
} 
```

- - 另一种方式 - -

```
public class Test1
{
    public int _ChangeThis = 0;

    public setChangeThis(int ChangeThis)
    {
        _ChangeThis = ChangeThis;
    } 
```

}

--- 主要代码 ---

```
Test2 testclass = new Test2();

//What is the difference and why do we use the setter? I cannot understand the advantage.
testclass.setChangeThis(1);
testclass._ChangeThis = 1; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T12:57:08.007

Getter 和 Setter 是围绕对象实现的抽象包装器。您可能拥有一个对象的属性，该属性实际上（例如）基于其他字段成员的值计算，但未存储或持久保存在类中，因此 getter 会产生属性本身是类的原生的错觉，而它的实现有很大的不同。此外，没有 setter 的 getter 允许您创建只读属性并保护类的内部成员免受无意和可能的破坏性修改。

这一切都是为了将​​其他应用程序使用的外部表示与内部实现管道分开。这些是基础。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T12:58:20.627

getter 和 setter 方法是访问器方法，这意味着它们通常是用于更改私有类成员的公共接口。您使用 getter 和 setter 方法来定义属性。您可以将 getter 和 setter 方法作为类外部的属性来访问，即使您在类中将它们定义为方法。类之外的那些属性可以具有与类中的属性名称不同的名称。

使用 getter 和 setter 方法有一些优点，例如能够让您创建具有复杂功能的成员，您可以访问类似的属性。它们还允许您创建只读和只写属性。

尽管 getter 和 setter 方法很有用，但您应该注意不要过度使用它们，因为在某些情况下，它们会使代码维护更加困难。此外，它们还提供对您的类实现的访问，例如公共成员。OOP 实践不鼓励直接访问类中的属性。

# php - 排序关联数组codeigniter php

> ID：12197345
> 
> 赞同：0
> 
> 时间：2012-08-30T12:55:23.653
> 
> 标签：php, arrays, codeigniter, sorting

这是我想做的事情：

```
$newArray = array();

foreach($student as $s){
    $newArray[$s->id][$s->grade] = $s;
} 
```

我想按学生的成绩对学生进行排序（更多的是一组而不是排序），但我只想对成绩进行排序，而不是按 id 排序。我本可以不这样做：

```
$newArray[$s->id] = $s->grade 
asort($newArray) 
```

但我需要`$s`. 此外，我想维护与每个学生相关的大量数据。

我怎样才能实现这样的排序？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-30T13:18:49.537

*编辑：*

如果你在一个框架中工作，最好将你的排序回调声明为一个成员函数（当然，在你需要它的同一个类中）：

```
private function sortCB(array $a, array $b)
{//the array type hinting in arguments is optional
    $i = array_keys($a);//but highly recommended 
    $j = array_keys($b);
    if (end($i) === end($j))
    {
        return 0;
    }
    //replace '>' with '<' if you want to sort descending
    return (end($i) > end($j) ? 1 : -1);//this is ascending
} 
```

然后，在需要实际排序的方法中：

```
uasort($theArray,array($this,'sortCB')); 
```

有关更多示例，请参阅[文档](http://php.net/manual/en/function.uasort.php)。我在这个（庞大的）答案的末尾添加了一个完整的类示例

* * *

我已经在[writecodeonline](http://writecodeonline.org/php)上尝试过，这在这类事情上并不是很好，但这确实有效：

```
$foo = array_fill_keys(array('foo','bar','q','Bond'),array());
$i = '256';
foreach($foo as $k=>$v)
{
    $foo[$k][$i] = $k;
    $i = (string)((int)$i%2 === 0 ? ((int)$i/2)+1 : (int)$i*3);
}
function sortCB($a,$b)
{
    $i = array_keys($a);
    $j = array_keys($b);
    if (end($i) === end($j))
    {
        return 0;
    }
    return (end($i) > end($j) ? 1 : -1);
}
uasort($foo,'sortCB');
var_dump($foo); 
```

但由于您使用的是框架，您最好将该函数声明为成员函数`private function sortCB(array $a,array $b)`，并像这样使用它：

```
uasort($foo,array($this, 'sortCB')); 
```

可能有更多关于如何最好地在类上下文中使用此回调函数的信息[here](http://php.net/manual/en/function.uasort.php)

* * *

完整示例 + 用法（经过测试和工作）：

```
class test
{
    public $foo = null;
    public function __construct()
    {
        $this->foo = array_fill_keys(array('foo','bar','q','Bond'),array());
        $i = '256';
        foreach($this->foo as $k=>$v)
        {
            $this->foo[$k][$i] = $k;
            $i = (string)((int)$i%2 === 0 ? ((int)$i/2)+1 : (int)$i*3);
        }
    }
    private function sortCB($a,$b)
    {
        $i = array_keys($a);
        $j = array_keys($b);
        if (end($i) === end($j))
        {
            return 0;
        }
        return (end($i) > end($j) ? 1 : -1);
    }
    public function sortFoo()
    {
        uasort($this->foo,array($this,'sortCB'));
        print_r($this->foo);
        return $this->foo;
    }
}
$bar = new test();
$arr = $bar->sortFoo(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-30T13:02:43.403

您可以执行以下操作：

```
foreach($student as $s){
    $newArray[$s->id] = $s;
}

usort($newArray, function ($a, $b) { return $a->grade - $b->grade; }); 
```

## 编辑

对于不支持匿名函数的更高版本，您可以先定义比较函数：

```
function sortByGrade($a, $b)
{
    return $a->grade - $b->grade;
}

usort($newArray, 'sortByGrade'); 
```

但是，如果您从 db 获取此数据，则在您的 sql 查询中对其进行排序会更容易。如果你使用 ORM，你可以使用它的关联方法。

# java - joda-time: new DateTime(String) vs DateTime.parse(String)

> ID：12197346
> 
> 赞同：8
> 
> 时间：2012-08-30T12:55:25.533
> 
> 标签：java, xml, date, datetime, jodatime

使用 joda-time-2.0 版本库，我想知道，**从 ISO 日期（假定的 XML`xs:dateTime`格式）**构造这些函数中的哪个更好：[`new DateTime(String)`](http://www.joda.org/joda-time/apidocs/org/joda/time/DateTime.html#DateTime%28java.lang.Object%29)与[`DateTime.parse(String)`](http://www.joda.org/joda-time/apidocs/org/joda/time/DateTime.html#parse(java.lang.String)).

因为两者都从相同的值返回不同的结果。例子：

```
new DateTime("2012-08-16T07:22:05Z")
DateTime.parse("2012-08-16T07:22:05Z") 
```

由于 ISOChronology 导致不同。首先说 is`ISOChronology[Europe/Paris]`和 second `ISOChronology[UTC]`，尽管毫秒是相同的。

此外，[这里](https://stackoverflow.com/questions/909022/whats-the-best-way-to-parse-an-xml-datetime-in-java)推荐使用[`ISODateTimeFormat.dateTimeNoMillis()`](http://www.joda.org/joda-time/apidocs/org/joda/time/format/ISODateTimeFormat.html#dateTimeNoMillis%28%29)，给出与使用第一个版本（ ）相同的结果`new`。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-30T19:01:19.463

这两种方法使用两种不同的转换方法：构造函数使用[InstantConverter](http://www.joda.org/joda-time/apidocs/org/joda/time/convert/InstantConverter.html)的实例，在字符串的情况下是[StringConverter](https://github.com/JodaOrg/joda-time/blob/master/src/main/java/org/joda/time/convert/StringConverter.java)并且还不支持从传递的字符串中读取时区，而该`parse`方法使用[DateTimeFormatter](http://www.joda.org/joda-time/apidocs/org/joda/time/format/ISODateTimeFormat.html)知道如何解析时区。

虽然理论上这两种格式都接受 ISO 日期时间格式，但我认为构造函数有问题，因为它总是使用系统时区而不是字符串中指定的时区。这与此构造函数接受的其他可能值不一致，后者确实考虑了带有时区偏移的年表。例如，此构造函数将返回一个`DateTime`具有 UTC 时区的对象：

```
new DateTime(DateTime.parse("2012-08-16T07:22:05Z")) 
```

# python - 使用子进程的 cgi 脚本上的 python errno 24

> ID：12197351
> 
> 赞同：0
> 
> 时间：2012-08-30T12:55:37.783
> 
> 标签：python, cgi, subprocess

我有一个 python cgi 脚本，它通过子进程一遍又一遍地运行应用程序（几千次）。我不断收到同样的错误...

```
Traceback (most recent call last):
  File "/home/linuser/Webpages/cgi/SnpEdit.py", line 413, in <module>
    webpage()
  File "/home/linuser/Webpages/cgi/SnpEdit.py", line 406, in main
    displayOmpResult(form['odfFile'].value)
  File "/home/linuser/Webpages/cgi/SnpEdit.py", line 342, in displayContainerDiv
    makeSection(position,sAoiInput)
  File "/home/linuser/Webpages/cgi/SnpEdit.py", line 360, in displayData
    displayTable(i,j,lAmpAndVars,dOligoSet[key],position)
  File "/home/linuser/Webpages/cgi/SnpEdit.py", line 247, in displayTable
    p = subprocess.Popen(['/usr/bin/pDat',sInputFileLoc,sOutputFileLoc],stdout=fh, stderr=fh)
  File "/usr/lib/python2.6/subprocess.py", line 633, in __init__
    errread, errwrite)
  File "/usr/lib/python2.6/subprocess.py", line 1039, in _execute_child
    errpipe_read, errpipe_write = os.pipe()
OSError: [Errno 24] Too many open files 
```

导致它的功能如下。

```
def displayTable(sData):

    # convert the data to the proper format
    sFormattedData = convertToFormat(sData)

    # write the formatted data to file
    sInputFile = tempfile.mkstemp(prefix='In_')[1]
    fOpen = open(sInputFile,'w')
    fOpen.write(sFormattedData)
    fOpen.close()

    sOutputFileLoc = sInputFile.replace('In_','Out_')

    # run app, requires two files; an input and an output
    # temp file to holds stdout stderr of subprocess
    fh = tempfile.TemporaryFile(mode='w',dir=tempfile.gettempdir())
    p = subprocess.Popen(['/usr/bin/pDat',sInputFileLoc,sOutputFileLoc],stdout=fh, stderr=fh)
    p.communicate()
    fh.close()

    # open output file and print parsed data into a list of dictionaries
    sOutput = open(sOutputFileLoc).read()
    lOutputData = parseOutput(sOutput)

    displayTableHeader(lOutputData)
    displaySimpleTable(lOutputData) 
```

据我所知，我正在正确关闭文件。当我跑...

```
import resource
print resource.getrlimit(resource.RLIMIT_NOFILE) 
```

我得到...

```
(1024, 1024) 
```

我必须增加这个值吗？我读到子进程打开了几个文件描述符。我尝试添加“close_fds = True”，并尝试在创建文件时使用 with 语句，但结果是相同的。我怀疑问题可能出在我正在处理的应用程序 pDat 上，但这个程序是由其他人制作的。它需要两个输入；输入文件和您希望将输出文件写入的位置。我怀疑它可能没有关闭它创建的输出文件。除此之外，我看不出我可能做错了什么。有什么建议么？谢谢。

编辑：我在运行 python 2.6.5 和 apache 2.2.14 的 ubuntu 10.04

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T19:34:14.867

而不是这个...

```
sInputFile = tempfile.mkstemp(prefix='In_')[1]
fOpen = open(sInputFile,'w')
fOpen.write(sFormattedData)
fOpen.close() 
```

我应该这样做...

```
iFileHandle,sInputFile = tempfile.mkstemp(prefix='In_')
fOpen = open(sInputFile,'w')
fOpen.write(sFormattedData)
fOpen.close()
os.close(iFileHandle) 
```

mkstemp 函数对文件进行操作系统级别的句柄，而我没有关闭它们。该解决方案在此处进行了更详细的描述... [http://www.logilab.org/blogentry/17873](http://www.logilab.org/blogentry/17873)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T13:51:57.267

您想添加`close_fds=True`到`popen`通话中（以防万一）。

然后，这里：

```
# open output file and print parsed data into a list of dictionaries
    sOutput = open(sOutputFileLoc).read()
    lOutputData = parseOutput(sOutput) 
```

...我可能记错了，但除非您使用`with`语法，否则我不认为输出文件描述符已关闭。

**更新**：主要问题是*您需要知道哪些文件是打开的*。在 Windows 上，这需要类似 Process Explorer 的东西。在 Linux 中它更简单一些。您只需从命令行调用 CGI，或者确保只有*一个*`ps`CGI 实例正在运行，然后使用命令获取其 pid 。

获得 pid 后，`ls -la`对`/proc/<PID>/fd`目录的内容运行 a。所有打开的文件描述符都将在那里，以及它们指向的文件的名称。知道某某文件被打开了 377 次，这对于找出*该*文件的确切打开位置（但未关闭）大有帮助。

# javascript - 带有参数的Javascript函数具有函数？

> ID：12197352
> 
> 赞同：2
> 
> 时间：2012-08-30T12:55:37.970
> 
> 标签：javascript, node.js

请向我解释这是如何工作的。我是nodejs的新手，他们设置代码的方式对我来说非常复杂，无法正确理解..

我将我不理解的代码分成小片段。您可以在下面找到整个代码。

```
callback(function() {
  results.push(Array.prototype.slice.call(arguments));
  next();
}); 
```

我不明白上面的片段。看起来这个匿名函数成为系列匿名函数的下一个参数？匿名函数参数中的代码会执行吗？

```
function(next) { async(1, next); } 
```

哪个会先执行？系列函数中的异步函数执行还是下一个参数执行？

**在这里，我附上了完整的代码：**

```
function series(callbacks, last) {
  var results = [];
  function next() {
    var callback = callbacks.shift();
    if(callback) {
      callback(function() {
        results.push(Array.prototype.slice.call(arguments));
        next();
      });
    } else {
      last(results);
    }
  }
  next();
}

function async(arg, callback) {
  var delay = Math.floor(Math.random() * 5 + 1) * 100;
  console.log('async with \''+arg+'\', return in '+delay+' ms');
  setTimeout(function() {
    callback(arg*2);
  }, delay);
}

function final(results) {
  console.log('Done', results);
}

series([
  function(next) { async(1, next); },
  function(next) { async(2, next); },
  function(next) { async(3, next); },
  function(next) { async(4, next); },
  function(next) { async(5, next); },
  function(next) { async(6, next); }
], final); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T13:29:06.830

首先，要知道在 JavaScript 中，函数可以作为参数传递给其他函数。这与传递从另一个函数返回的值非常不同。举个简单的例子：

```
function A() {
    alert("In A"); 
}

function B(fn) {
    alert("In B");
    fn(); 
}

B(A);   // alerts "In B", then "In A".

B(A()); // alerts "In A", then "In B", 
        // (then errors because the return value from A is undefined, 
        // and thus cannot be invoked.) 
```

因此，要从头到尾遵循您的代码示例，它是这样的......

1.  `series`是一个函数，它接受一组函数 ( `callbacks`) 和一个函数 ( `last`) 作为参数。它首先被调用。

2.  在`series`中，定义了一个名为 的函数`next`（不要与每个名为 的回调函数的参数混淆`next`）。该函数`next`被调用。

3.  在`next`中，定义了一个名为的变量`callback`。`callbacks`它的值依次是数组中的函数之一。存储在`callback`变量中的函数被匿名函数调用。

4.  在 内`callback`，`async`函数被调用。第 3 步中的相同匿名函数被传递给`async`. 它现在被称为`next`，但这与 中`next`定义的函数没有太大关系`series`。

5.  在 内`async`，完成了一些计算并最终调用匿名函数（通过`setTimeout`）。它`callback`在`async`函数内调用。

6.  在匿名函数中，一些值被推送到`results`数组中，并被`next`调用。这是 中`next`定义的函数`series`。

7.  重复步骤 3 到 6，直到调用完其中的所有函数`callbacks`，然后调用参数`last`( `final`) 中的函数。

像泥一样清澈，对吧？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T13:19:33.170

series 函数采用一系列要执行的函数。这些函数中的每一个都必须接受一个参数，该参数需要是一个函数，一个回调。`series`使用该回调来知道一个函数完成了它的异步工作。

这是一步一步的`series`操作：

1.  获取一个函数列表和一个名为`last`
2.  创建一个`results`数组，我们将在其中存储所有这些函数的结果
3.  选择列表中的第一项并从列表中删除
4.  如果项目不是函数（列表为空）：
    1.  `last`用`results`数组调用
    2.  停止。我们完成了
5.  如果项目是一个函数，调用它并传递一个新的回调，让我们知道它什么时候完成
6.  一旦函数完成其异步工作，它应该使用任意数量的参数调用回调。将这些参数存储在`results`数组中
7.  前往 3

基本上，它是一个递归函数，等待每个步骤之间的过程完成。结果将是您在其`callbacks`列表中传递的每个函数都将在前一个完成工作之后依次调用。

不要气馁。即使对于经验丰富的程序员来说，异步代码也很难。

# tcl - 如何在 tcl 8.4 中创建线程

> ID：12197358
> 
> 赞同：2
> 
> 时间：2012-08-30T12:55:48.157
> 
> 标签：tcl

我是 tcl 的新手。我想在 tcl 中创建一个线程，它应该在后台继续调用自己。

```
#!/usr/bin/env tclsh

set serPort [open "/dev/ttyS0" RDWR]

fconfigure $serPort  -mode 115200,n,8,1 -blocking 0 

while { 1 } {
set data [gets  $chan]
puts $data

} 
```

我想避免使用上面的 while 循环，并为 while 循环内的功能创建一个可重复的线程。基本上，我将 PC 的 COM1 连接到设备并从设备获取串行数据。但是，如果端口上没有数据，即使我使用“eof”命令，它仍然不会脱离循环。这就是我想创建线程的原因。

我打算为此使用 Tcl_CreateThread 但我不明白如何使用它

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T14:05:37.753

不要那样做。相反，使用通常的 Tcl 惯用语来处理非阻塞通道：为“通道可读”事件设置一个处理程序，然后进入事件循环；当设备将数据发送到您打开的端口时，操作系统会将数据传递给您的应用程序并调用回调。

演示该概念的最小程序如下所示：

```
proc my_read_handler ch {
    set data [read $ch]
    if {[eof $ch]} {
        close $ch
        set ::forever done ;# this makes the call to `vwait` below to quit
        return
    }
    # Otherwise process the data here ...
}

set serPort [open "/dev/ttyS0" RDWR]

fconfigure $serPort -mode 115200,n,8,1 -blocking no
fileevent $serPort readable [list my_read_handler $serPort]

vwait ::forever ;# the program enters the event loop here 
```

[在示例中](http://wiki.tcl.tk/_/search?S=fileevent)阅读更多相关信息。

几个观察：

*   EOF 仅在远程端关闭时发生。如果您`close`在您的频道上调用，在这种情况下甚至不会调用“可读”。
*   如果你正在编写一个 Tk 应用程序，它已经有一个事件循环，所以不需要调用`vwait`（此外，强烈建议不要这样做，因为这会重新进入事件循环）：你只需打开你的设备，例如，在用户单击按钮时执行的代码中，在获取的通道上设置可读回调，然后在该回调中执行其余处理（如上所示）。

阅读[本文](http://wiki.tcl.tk/1772)（以及那里的链接）以获取有关面向事件编程的更多信息。还[可以搜索](http://wiki.tcl.tk/_/search?S=event+loop)wiki——它包含大量示例和背景知识。

# webdriver - Java中使用PageFactory的Webdriver PageObject实现

> ID：12197359
> 
> 赞同：0
> 
> 时间：2012-08-30T12:55:50.587
> 
> 标签：webdriver, pageobjects

这是我到目前为止所拥有的：

一个工作的基于 Webdriver 的 Java 类，它登录到应用程序并转到主页：

```
import java.io.File;
import java.io.IOException;
import java.util.concurrent.TimeUnit;

import org.apache.commons.io.FileUtils;
import org.openqa.selenium.By;
import org.openqa.selenium.OutputType;
import org.openqa.selenium.TakesScreenshot;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.firefox.FirefoxDriver;
import org.openqa.selenium.firefox.FirefoxProfile;
import org.testng.AssertJUnit;
import org.testng.annotations.AfterMethod;
import org.testng.annotations.BeforeMethod;
import org.testng.annotations.Test;

public class MLoginFFTest {

    private WebDriver driver;
    private String baseUrl;
    private String fileName = "screenshot.png";

    @BeforeMethod
    public void setUp() throws Exception {
        FirefoxProfile profile = new FirefoxProfile();
        profile.setPreference("network.http.phishy-userpass-length", 255);
        profile.setAssumeUntrustedCertificateIssuer(false);

        driver = new FirefoxDriver(profile);

        baseUrl = "https://a.b.c.d/";
        driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
    }

    @Test
    public void testAccountLogin() throws Exception {
        driver.get(baseUrl + "web/certLogon.jsp");
        driver.findElement(By.name("logonName")).clear();

        AssertJUnit.assertEquals(driver.findElement(By.name("logonName"))
                .getTagName(), "input");

        AssertJUnit.assertEquals(driver.getTitle(), "DA Logon");

        driver.findElement(By.name("logonName")).sendKeys("username");
        driver.findElement(By.name("password")).clear();
        driver.findElement(By.name("password")).sendKeys("password");
        driver.findElement(By.name("submit")).click();
        driver.findElement(By.linkText("Account")).click();

        AssertJUnit.assertEquals(driver.getTitle(), "View Account");

    }

    @AfterMethod
    public void tearDown() throws Exception {

        File screenshot = ((TakesScreenshot) driver)
                .getScreenshotAs(OutputType.FILE);

        try {
            FileUtils.copyFile(screenshot, new File(fileName));
        } catch (IOException e) {
            e.printStackTrace();
        }
        driver.quit();

    }

} 
```

现在我们看到有 2 个页面： 1\. 登录页面，我必须输入用户名和密码，以及主页，一旦身份验证成功，我将被带到哪里。

现在我想使用Pagefactory将它实现为PageObjects：所以我有：

```
package com.example.pageobjects;

import static com.example.setup.SeleniumDriver.getDriver;

import java.util.concurrent.TimeUnit;

import org.openqa.selenium.support.PageFactory;
import org.openqa.selenium.support.ui.ExpectedCondition;
import org.openqa.selenium.support.ui.FluentWait;
import org.openqa.selenium.support.ui.Wait;

public abstract class MPage<T> {

    private static final String BASE_URL = "https://a.b.c.d/";
    private static final int LOAD_TIMEOUT = 30;
    private static final int REFRESH_RATE = 2;

    public T openPage(Class<T> clazz) {
        T page = PageFactory.initElements(getDriver(), clazz);
        getDriver().get(BASE_URL + getPageUrl());
        ExpectedCondition pageLoadCondition = ((MPage) page).getPageLoadCondition();
        waitForPageToLoad(pageLoadCondition);
        return page;
    }

    private void waitForPageToLoad(ExpectedCondition pageLoadCondition) {
        Wait wait = new FluentWait(getDriver())
                .withTimeout(LOAD_TIMEOUT, TimeUnit.SECONDS)
                .pollingEvery(REFRESH_RATE, TimeUnit.SECONDS);

        wait.until(pageLoadCondition);
    }

    /**
     * Provides condition when page can be considered as fully loaded.
     *
     * @return
     */
    protected abstract ExpectedCondition getPageLoadCondition();

    /**
     * Provides page relative URL/
     *
     * @return
     */
    public abstract String getPageUrl();
} 
```

对于登录页面，我不确定我将如何实现它，以及调用这些页面的测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T09:35:51.020

我希望这些链接会有所帮助：

[webdriver中的页面对象](http://www.summa-tech.com/blog/2011/10/10/using-page-objects-with-selenium-and-web-driver-20/)

[使用 jBehave 的页面对象](http://jbehave.org/reference/web/stable/page-objects.html)

我建议让一个类负责之前/之后的方法，并且应该在整个场景之前和之后调用它们。现在你会在登录到你的页面后关闭 webdriver，我猜这不是你想要的行为。您可以简单地为登录页面和主页发生所有点击（现在您的 MLoginFFTest 类登录）的页面提取一个抽象级别。现在，另一个类将简单地从您的 Pages 类中运行方法，如下所示：

```
@Test
public void shouldOpenMainPage(){
   LoginPage loginPage = new LoginPage();
   MainPage mainPage = loginPage.loginCorrectly();
   mainPage.verifyOnMainPage();
   mainPage.doSthElse();
   verifySth(....);
} 
```

所以现在你的文件结构可能像

```
++pages/LoginPage.class
++pages/MainPage.class
++steps/SomeTest.class 
```

希望这可以帮助。

# c# - 如何在 C# 中克隆 RouteCollection？

> ID：12197362
> 
> 赞同：1
> 
> 时间：2012-08-30T12:56:02.640
> 
> 标签：c#, asp.net-mvc, routes

如何在不使用 foreach 的情况下将一个 RouteCollection 中包含的项目转移到 C# 中的另一个？

RouteCollection 继承自 Collection< RouteBase >

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T13:05:53.330

您可以使用`CopyTo`函数将整个集合复制到兼容的一维数组，

此方法使用 Array.Copy 复制元素。

[http://msdn.microsoft.com/en-us/library/ms132408.aspx](http://msdn.microsoft.com/en-us/library/ms132408.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T08:53:23.703

最后我做了：

```
List<RouteBase> originalRoutes = routes.Select(i => i.Clone()).ToList(); 
```

为此，我需要两种扩展方法：

```
public static RouteBase Clone(this RouteBase route)
    {
        if (route.GetType() == typeof(Route))
            return ((Route)route).Clone();
        else
            return null;
    }

    public static Route Clone(this Route route)
    {
        Route cloneRoute = new Route(route.Url, route.RouteHandler);
        cloneRoute.Defaults = route.Defaults;
        cloneRoute.Constraints = route.Constraints;

        return cloneRoute;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-06T09:09:57.087

你可以试试：

```
static void Copy(RouteCollection source, RouteCollection dest)
    {
        Dictionary<string, RouteBase> _namedMap = typeof(RouteCollection).GetField("_namedMap", System.Reflection.BindingFlags.NonPublic | System.Reflection.BindingFlags.Instance).GetValue(source) as Dictionary<string, RouteBase>;

        for (int i = 0; i < source.Count; i++)
        {
            var item = source[i];
            string name = _namedMap.Where(r => object.Equals(item, r.Value)).Select(r => r.Key).FirstOrDefault();
            dest.Add(name, item);
        }
    } 
```

# ios - 关闭视图控制器时更改 UIViews 的位置

> ID：12197364
> 
> 赞同：0
> 
> 时间：2012-08-30T12:56:13.727
> 
> 标签：ios, uiview, uiviewcontroller

我有一个 ViewController 呈现另一个视图控制器。当第二个被解雇时，我在第一个控制器中设置了一个布尔值，isFromSecondView，设置为 true。因此，当我的第一个 ViewController 再次可见时，会调用 viewWillAppear，我可以从那里移动控制器内的一些视图。此方法工作正常，并且 viewWillAppear 方法可以决定它是否来自第二个视图控制器。但是我无法移动控制器内的视图，即使它正在被调用。这种方法是我应该这样做的方式，还是在第二个控制器被解除时有另一种方式来移动视图？

编辑，添加视图移动方法：

```
- (void)moveViews
{
    NSLog(@"moving view");
    [UIView animateWithDuration:0.5
                     animations:^{
                         self.view.center = CGPointMake(160, 250);
                         //self.tableView.center = CGPointMake(160, -100);
                         self.addView.center = CGPointMake(160, 240);
                     }
                     completion:^(BOOL finished){}];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T13:33:57.323

`dismissViewControllerAnimated`有一个可以使用的完成处理程序。这将在控制器完成解除后立即执行您的动画代码。当然，如果您使用它，您需要更改在另一个控制器中执行的处理程序 this。

```
[self dismissViewControllerAnimated:YES completion:^{
    NSLog(@"moving view");
    [UIView animateWithDuration:0.5
                     animations:^{
                         self.view.center = CGPointMake(160, 250);
                         //self.tableView.center = CGPointMake(160, -100);
                         self.addView.center = CGPointMake(160, 240);
                     }
                     completion:^(BOOL finished){}];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-28T16:02:29.163

您可以在需要时使用 viewWillLayoutSubviews（在您的控制器中）来布局您的视图。

例子：

```
- (void)viewWillLayoutSubviews
{
  [super viewWillLayoutSubviews];
  // self.oneView.center = ...
  // self.anotherView.center = ...
} 
```

# android - Android Intent Service

> ID：12197380
> 
> 赞同：1
> 
> 时间：2012-08-30T12:57:06.883
> 
> 标签：android, intentservice

I have a `ListView` where each row represents content that needs to be upload to a server. Each row contains a `Button` that when pressed starts an intent service to begin upload to the server.

When first time I press a `Button`, the intent service starts, but the second time a new intent service does not start ? Should it ? This is the code in `onClickListener` for my `ListView` `Button`.

```
Intent intent = new Intent(VaultActivity.this, Upload.class);
intent.putExtra(FILEPATH, vidoObject.filePath);
intent.putExtra(POSITION, position);
ListActivity.this.startService(intent); 
```

Am I doing anything wrong? Should the second row button not also create a new IntentService to begin upload ?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T13:03:08.217

An IntentService is actually just a work queue:

*   when the first startService call is made the service is started, creating a worker thread and adding the delivered intent to a workqueue
*   the worker thread reads the first intent from the queue and processes it
*   if during processing of the first intent a second intent gets delivered to the service (via a second startService call) that intent gets added to the queue (same for third, fourth etc)
*   the worker keeps running until the work queue is empty, after which the service is stopped

So it may be possible that your second row button starts another service, but only if the first upload was already finished.

If you want to upload two files *simultaneously* you cannot use an IntentService, because it processes one command at a time.

# python - OpenCV Python FAR/FRR 中的人脸识别

> ID：12197383
> 
> 赞同：3
> 
> 时间：2012-08-30T12:57:11.313
> 
> 标签：python, opencv, computer-vision, face-recognition

如何在 OpenCV Python 中进行性能测试以进行检查；

1.  获得识别结果所需的时间
2.  数据库测试用例的错误接受/错误拒绝率。

我正在使用 OpenCV 中的示例特征脸方法（来自 Phillip - [https://github.com/bytefish/facerecognition_guide](https://github.com/bytefish/facerecognition_guide)），我只是对结果感兴趣。如果有人能指出我正确的方向/显示示例，那就太好了。也许有一些我可以使用的功能？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-07T20:32:53.543

# 验证 OpenCV 算法

## 介绍

首先很抱歉花了这么长时间才回复，但是根本没有空闲时间。实际上验证算法是一个非常有趣的话题，而且真的没有那么难。在这篇文章中，我将展示如何验证你的算法（我将使用 FaceRecognizer，因为你已经要求它了）。在我的帖子中，我将一如既往地用一个完整的源代码示例来展示它，因为我认为用代码来解释东西要容易得多。

因此，每当人们告诉我*“我的算法表现不佳”*时，我都会问他们：

*   实际上有什么*不好*？
*   您是否通过查看一个样本来评价这一点？
*   你的图像数据是什么？
*   你如何划分训练数据和测试数据？
*   你的指标是什么？
*   [...]

我希望这篇文章能消除一些困惑，并展示验证算法是多么容易。因为我从尝试计算机视觉和机器学习算法中学到的是：

*   如果没有适当的验证，那就是追逐鬼魂。你真的，真的需要数字来谈论。

这篇文章中的所有代码都在 BSD 许可下，所以请随意将它用于您的项目。

## 验证算法

任何计算机视觉项目最重要的任务之一就是获取图像数据。您需要在生产中获得与您期望的相同的图像数据，因此您在上线时不会有任何不良体验。一个非常实际的例子：如果你想在野外识别人脸，那么在非常受控的场景中拍摄的图像上验证你的算法是没有用的。获取尽可能多的数据，因为*数据为王*。那是为了数据。

一旦你获得了一些数据并编写了算法，就可以对其进行评估。有几种验证策略，但我认为您应该从简单的交叉验证开始，然后从那里继续，有关交叉验证的信息，请参阅：

*   [维基百科的交叉验证](http://en.wikipedia.org/wiki/Cross-validation_%28statistics%29)

我们将使用[scikit-learn](https://github.com/scikit-learn/)一个很棒的开源项目，而不是自己实现它：

*   [https://github.com/scikit-learn/](https://github.com/scikit-learn/)

它有一个非常好的用于验证算法的文档和教程：

*   [http://scikit-learn.org/stable/tutorial/statistical_inference/index.html](http://scikit-learn.org/stable/tutorial/statistical_inference/index.html)

所以计划如下：

*   编写一个函数来读取一些图像数据。
*   将其包装`cv2.FaceRecognizer`成 scikit-learn 估计器。
*   `cv2.FaceRecognizer`使用给定的验证和指标估计我们的性能。
*   利润！

## 正确获取图像数据

首先，我想在要读取的图像数据上写一些文字，因为这方面的问题几乎总是会弹出。为简单起见，我在示例中假设图像（*您要识别的**面孔*、人）在文件夹中给出。每人一个文件夹。所以想象我有一个文件夹（一个数据集） call ，带有 subfolders ，依此类推：*`images``person1``person2`*

 *```
philipp@mango:~/facerec/data/images$ tree -L 2 | head -n 20
.
|-- person1
|   |-- 1.jpg
|   |-- 2.jpg
|   |-- 3.jpg
|   |-- 4.jpg
|-- person2
|   |-- 1.jpg
|   |-- 2.jpg
|   |-- 3.jpg
|   |-- 4.jpg

[...] 
```

AT&T Facedatabase 是已经采用这种文件夹结构的公共可用数据集之一，可在以下网址获得：

*   [http://www.cl.cam.ac.uk/research/dtg/attarchive/facedatabase.html](http://www.cl.cam.ac.uk/research/dtg/attarchive/facedatabase.html)

解压后它看起来像这样（在我的文件系统上它被解压到`/home/philipp/facerec/data/at/`，你的路径不同！）：

```
philipp@mango:~/facerec/data/at$ tree .
.
|-- README
|-- s1
|   |-- 1.pgm
|   |-- 2.pgm
[...]
|   `-- 10.pgm
|-- s2
|   |-- 1.pgm
|   |-- 2.pgm
[...]
|   `-- 10.pgm
|-- s3
|   |-- 1.pgm
|   |-- 2.pgm
[...]
|   `-- 10.pgm

...

40 directories, 401 files 
```

## 把它放在一起

所以首先我们将定义一个`read_images`读取图像数据和标签的方法：

```
import os
import sys
import cv2
import numpy as np

def read_images(path, sz=None):
    """Reads the images in a given folder, resizes images on the fly if size is given.

    Args:
        path: Path to a folder with subfolders representing the subjects (persons).
        sz: A tuple with the size Resizes 

    Returns:
        A list [X,y]

            X: The images, which is a Python list of numpy arrays.
            y: The corresponding labels (the unique number of the subject, person) in a Python list.
    """
    c = 0
    X,y = [], []
    for dirname, dirnames, filenames in os.walk(path):
        for subdirname in dirnames:
            subject_path = os.path.join(dirname, subdirname)
            for filename in os.listdir(subject_path):
                try:
                    im = cv2.imread(os.path.join(subject_path, filename), cv2.IMREAD_GRAYSCALE)
                    # resize to given size (if given)
                    if (sz is not None):
                        im = cv2.resize(im, sz)
                    X.append(np.asarray(im, dtype=np.uint8))
                    y.append(c)
                except IOError, (errno, strerror):
                    print "I/O error({0}): {1}".format(errno, strerror)
                except:
                    print "Unexpected error:", sys.exc_info()[0]
                    raise
            c = c+1
    return [X,y] 
```

然后，读取图像数据变得像调用一样简单：

```
[X,y] = read_images("/path/to/some/folder") 
```

因为某些算法（例如 Eigenfaces、Fisherfaces）要求您的图像大小相同，所以我添加了第二个参数`sz`。通过传递 tuple `sz`，所有图像都被调整大小。因此，以下调用会将所有图像的大小调整`/path/to/some/folder`为`100x100`像素。：

```
[X,y] = read_images("/path/to/some/folder", (100,100)) 
```

scikit-learn 中的所有分类器都是从 a 派生的`BaseEstimator`，它应该有一个`fit`and`predict`方法。该`fit`方法获取样本列表`X`和相应的标签`y`，因此映射到`cv2.FaceRecognizer`. 该`predict`方法还获取样本列表和相应的标签，但这次我们需要返回每个样本的预测：

```
from sklearn.base import BaseEstimator

class FaceRecognizerModel(BaseEstimator):

    def __init__(self):
        self.model = cv2.createEigenFaceRecognizer()

    def fit(self, X, y):
        self.model.train(X,y)

    def predict(self, T):
        return [self.model.predict(T[i]) for i in range(0, T.shape[0])] 
```

然后，您可以在大量验证方法和指标之间进行选择以进行测试`cv2.FaceRecognizer`。[您可以在sklearn.cross_validation](https://github.com/scikit-learn/scikit-learn/blob/master/sklearn/cross_validation.py)中找到可用的交叉验证算法：

*   留一法交叉验证
*   K-Folds 交叉验证
*   分层 K 折交叉验证
*   Leave-One-Label-Out 交叉验证
*   带有替换交叉验证的随机抽样
*   [...]

为了估计识别率，`cv2.FaceRecognizer`我建议使用分层交叉验证。您可能会问为什么有人需要其他交叉验证方法。想象一下，你想用你的算法进行情绪识别。如果您的训练集包含与您一起测试算法的人的图像，会发生什么？您可能会找到与此人最接近的匹配项，但不会找到与情感最匹配的匹配项。在这些情况下，您应该执行与主题无关的交叉验证。

使用 scikit-learn 创建分层 k 折交叉验证迭代器非常简单：

```
from sklearn import cross_validation as cval
# Then we create a 10-fold cross validation iterator:
cv = cval.StratifiedKFold(y, 10) 
```

我们可以选择多种指标。现在我只想知道模型的精度，所以我们导入可调用函数`sklearn.metrics.precision_score`：

```
from sklearn.metrics import precision_score 
```

现在我们只需要创建我们的估计器并传递`estimator`, `X`,和to `y`，它会为我们计算交叉验证分数：`precision_score``cv``sklearn.cross_validation.cross_val_score`

```
# Now we'll create a classifier, note we wrap it up in the 
# FaceRecognizerModel we have defined in this file. This is 
# done, so we can use it in the awesome scikit-learn library:
estimator = FaceRecognizerModel()
# And getting the precision_scores is then as easy as writing:
precision_scores = cval.cross_val_score(estimator, X, y, score_func=precision_score, cv=cv) 
```

有大量可用的指标，请随意选择另一个：

*   [https://github.com/scikit-learn/scikit-learn/blob/master/sklearn/metrics/metrics.py](https://github.com/scikit-learn/scikit-learn/blob/master/sklearn/metrics/metrics.py)

因此，让我们将所有这些都放在一个脚本中！

## 验证.py

```
# Author: Philipp Wagner <bytefish@gmx.de>
# Released to public domain under terms of the BSD Simplified license.
#
# Redistribution and use in source and binary forms, with or without
# modification, are permitted provided that the following conditions are met:
#   * Redistributions of source code must retain the above copyright
#     notice, this list of conditions and the following disclaimer.
#   * Redistributions in binary form must reproduce the above copyright
#     notice, this list of conditions and the following disclaimer in the
#     documentation and/or other materials provided with the distribution.
#   * Neither the name of the organization nor the names of its contributors
#     may be used to endorse or promote products derived from this software
#     without specific prior written permission.
#
#   See <http://www.opensource.org/licenses/bsd-license>

import os
import sys
import cv2
import numpy as np

from sklearn import cross_validation as cval
from sklearn.base import BaseEstimator
from sklearn.metrics import precision_score

def read_images(path, sz=None):
    """Reads the images in a given folder, resizes images on the fly if size is given.

    Args:
        path: Path to a folder with subfolders representing the subjects (persons).
        sz: A tuple with the size Resizes 

    Returns:
        A list [X,y]

            X: The images, which is a Python list of numpy arrays.
            y: The corresponding labels (the unique number of the subject, person) in a Python list.
    """
    c = 0
    X,y = [], []
    for dirname, dirnames, filenames in os.walk(path):
        for subdirname in dirnames:
            subject_path = os.path.join(dirname, subdirname)
            for filename in os.listdir(subject_path):
                try:
                    im = cv2.imread(os.path.join(subject_path, filename), cv2.IMREAD_GRAYSCALE)
                    # resize to given size (if given)
                    if (sz is not None):
                        im = cv2.resize(im, sz)
                    X.append(np.asarray(im, dtype=np.uint8))
                    y.append(c)
                except IOError, (errno, strerror):
                    print "I/O error({0}): {1}".format(errno, strerror)
                except:
                    print "Unexpected error:", sys.exc_info()[0]
                    raise
            c = c+1
    return [X,y]

class FaceRecognizerModel(BaseEstimator):

    def __init__(self):
        self.model = cv2.createFisherFaceRecognizer()

    def fit(self, X, y):
        self.model.train(X,y)

    def predict(self, T):
        return [self.model.predict(T[i]) for i in range(0, T.shape[0])]

if __name__ == "__main__":
    # You'll need at least some images to perform the validation on:
    if len(sys.argv) < 2:
        print "USAGE: facerec_demo.py </path/to/images> [</path/to/store/images/at>]"
        sys.exit()
    # Read the images and corresponding labels into X and y.
    [X,y] = read_images(sys.argv[1])
    # Convert labels to 32bit integers. This is a workaround for 64bit machines,
    # because the labels will truncated else. This is fixed in recent OpenCV
    # revisions already, I just leave it here for people on older revisions.
    #
    # Thanks to Leo Dirac for reporting:
    y = np.asarray(y, dtype=np.int32)
    # Then we create a 10-fold cross validation iterator:
    cv = cval.StratifiedKFold(y, 10)
    # Now we'll create a classifier, note we wrap it up in the 
    # FaceRecognizerModel we have defined in this file. This is 
    # done, so we can use it in the awesome scikit-learn library:
    estimator = FaceRecognizerModel()
    # And getting the precision_scores is then as easy as writing:
    precision_scores = cval.cross_val_score(estimator, X, y, score_func=precision_score, cv=cv)
    # Let's print them:
    print precision_scores 
```

## 运行脚本

上面的脚本将打印出 Fisherfaces 方法的精度分数。您只需要使用图像文件夹调用脚本：

```
philipp@mango:~/src/python$ python validation.py /home/philipp/facerec/data/at

Precision Scores:
[ 1\.          0.85        0.925       0.9625      1\.          0.9625
  0.8875      0.93333333  0.9625      0.925     ] 
```

## 结论

结论是，使用开源项目让您的生活变得非常轻松！示例脚本有很多需要改进的地方。您可能想要添加一些日志记录，例如查看您所在的折叠。但这是评估您想要的任何指标的开始，只需通读 scikit-learn 教程以了解如何做到这一点并使其适应上述脚本。

我鼓励大家使用 OpenCV Python 和 scikit-learn，因为正如您所见，连接这两个伟大的项目真的非常简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T07:03:07.217

要分析时间性能，您可以使用[时间](http://docs.python.org/library/time.html)模块。

```
import time

time_1 = time.time()
result = <execute your code>
time_2 = time.time()
duration = time_2 - time_1 
```

关于您的错误率，这实际上取决于您的用例。但是，我通常会保留一个我期望的结果列表，然后将其与我的分类算法返回的结果列表进行比较。然后可以使用它来计算错误率。

我希望这可以帮助您朝着正确的方向前进。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-05T13:19:39.313

[这篇博客](http://enumap.wordpress.com/2012/11/17/python-opencv-test-various-feature-detectors/)对opencv2中的各种特征检测算法进行了比较。它是泰语的，所以如果您不使用泰语，您可能需要使用谷歌浏览器的翻译功能来阅读它。

作者没有分享他的代码，但也许您正在寻找类似的东西。*

# asp.net - 在没有布局项的 iframe 中加载控制器的视图

> ID：12197386
> 
> 赞同：1
> 
> 时间：2012-08-30T12:57:19.247
> 
> 标签：asp.net, .net, asp.net-mvc-3

我有 2 个单独的解决方案。我想从项目#2 的 iframe 的视图中加载项目#1 的内容之一。问题出在 iframe 内部，它还包括其布局视图中的所有内容（页眉/页脚等）

如何仅加载视图？（同时仍在使用其控制器）在 iframe 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:50:56.173

如果您不需要布局，那么您必须从这些控制器操作中返回部分视图。

前任。

```
return PartialView("ViewName"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-24T08:31:49.410

在您的 _Layout 视图中，您可以使用 IFrame 生成目标链接，例如：-

```
<li>@Html.ActionLink("Contact", "Contact", "Home", null, new {target ="MainiFrame"})</li> 
```

并在您的内容部分（在 _Layout 视图中），例如：-

```
<section class="content-wrapper main-content clear-fix">
                @RenderBody()
                <iframe name="MainiFrame" src="" width="920" height="1000" frameborder="0"></iframe>
            </section> 
```

然后，您希望在 IFrame 中显示的任何视图都可以在该视图的上角编写以下代码。

```
 @model YourProgramName.YourModelClass

    @{
        Layout = null;
        ViewBag.Title = "Your View Title";
    }

@* Rest of your codes and mark ups.......... *@ 
```

告诉您的视图不要使用默认布局，否则您的视图将加载所有 _Layout 元素，如菜单、横幅等。

享受。

# iphone - iOS新窗口以appmode打开

> ID：12197388
> 
> 赞同：0
> 
> 时间：2012-08-30T12:57:24.753
> 
> 标签：iphone, ios, mobile-safari

我有一个非常奇怪的错误。我有一个在 Appmode 下运行的网页（当您在 iOS 上添加到主屏幕时）。我有一个 A 元素可以转移到同一域中的另一个页面（test2.html）。如果我点击它，appmode 就会关闭，并打开一个新的浏览器窗口。

但是，如果我创建一个 location.href = 'test2.html' 它就可以了。现在奇怪的是，在 test2.html 上我只有一个带有 href="test1.html" 的 A 元素，现在它可以工作了。

我有一个论点，如果您在单击任何其他链接之前有时已经完成了 location.href，则每个链接都将在您自己的域中工作。

我的测试用例：

**测试2.html**

```
 <a href="javascript:void();" onclick="transfer();">Test1</a>
        <script>
        function transfer(){
            location.href = "test1.html";
        }
        </script> 
```

**测试1.html**

```
 <a href="test2.html">Test2</a> 
```

您可以更改 Test2 使其与 Test1 类似，只需更改 href 即可。

我真的不知道为什么会这样。为什么在同一域中完成 location.href 后它才起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T10:10:34.180

我遇到了完全相同的问题。现在，我只是通过让我的链接返回 false 来解决它：

```
<a href='#' onclick='doSomething(); return false;'>test</a> 
```

编辑：这似乎是一个更好的答案：[iPhone Safari Web App opens links in new window](https://stackoverflow.com/questions/2898740/iphone-safari-web-app-opens-links-in-new-window)

# java - java System.out.println() 奇怪的行为长字符串

> ID：12197393
> 
> 赞同：6
> 
> 时间：2012-08-30T12:57:39.633
> 
> 标签：java, eclipse, string, println

有人能解释一下为什么这段代码不打印数字吗？

```
 String text = new String("SomeString");
      for (int i=0; i<1500; i++) {
                text = text.concat(i+"");
      }
      System.out.println(text); 
```

结果

```
 SomeString 
```

如果我将运行次数降低到 1000 次，它会起作用，为什么？！而且，如果我不仅添加一个数字，还添加一个字符，它就可以工作。

**好的新更新：**

感谢您的代码示例。我尝试了所有这些，但我发现控制台
实际上显示了数字，但仅以白色字体显示。但是字符串的第一部分 `SomeString`是黑色的。

我使用 jdk1.7.0_06 ！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T13:43:48.103

这是日食错误。固定宽度控制台修复了输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T13:03:57.340

[String.concat()](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#concat%28java.lang.String%29)接受一个`String`参数。

如果您添加“数字和字符”，则您添加的是字符串，因为`+`操作员知道您正在链接字符串和数字数据。

无论如何，代码对我来说运行良好，数字按预期附加到 1499。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T13:03:59.760

您可以尝试几件事。我会给你一个两者的例子。

首先，在 Java 中，您可以简单地将字符串相加。`int`应该自动转换的原语：

```
 String text = new String("SomeString");

  for (int i = 0; i < 1500; i++) {
            text += i;
  }

  System.out.println(text); 
```

其次，如果第一种方法仍然对您不起作用，那么您可以尝试将您的显式转换`int`为`String`这样的：

```
 String text = new String("SomeString");

  for (int i = 0; i < 1500; i++) {
            text += Integer.toString(i);
  }

  System.out.println(text); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T13:05:42.427

更有效地做同样的事情

```
 StringBuilder text = new StringBuilder("SomeString");
  for (int i = 0; i < 1500; i++) {
        text.append(i);
  }
  System.out.println(text); 
```

这两个示例都适用于 Java 6 update 32 和 Java 7 update 3。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T13:11:19.687

哇，这很奇怪。我得到了同样的结果。乍一看，它看起来像是 JVM 中的一个错误，但我尝试从命令行运行该程序，它运行良好。它一定是 Eclipse 控制台中的错误。我发现将控制台更改为固定宽度可以解决显示问题。

我还发现，如果你`i + ""`用`i + ","`它替换它就可以了。似乎 Eclipse 控制台不喜欢长时间连续显示纯数字。

```
 String text = "SomeString";
    for (int i = 0; i < 15000; i++) {
        // text = text.concat(i + "");  // Doesn't display correctly
        // text += i;                   // Doesn't display correctly
        text = text.concat(i + ",");    // Displays correctly
        // text += i + ",";             // Displays correctly
    }
    System.out.println(text); 
```

这个错误让我有些担心。好发现！

**更新：**我尝试打印一长行“xxxxxx”，发现最多可以正确显示 32000 个字符。当该行转到 32001 时，它不会显示。当我输入 "12345" + "xxxxxxxxx..." 时，我仍然可以显示 32000 个 "x" 字符，这意味着行长超过了 32000，所以它与总行长无关。似乎与 String 对象的部分长度有关。

# java - 按行号的子字符串

> ID：12197395
> 
> 赞同：2
> 
> 时间：2012-08-30T12:57:46.547
> 
> 标签：java, string

有没有办法通过字符串行子串？

有点像： String.substring(line_num);

或者我们必须通过计算索引来手动完成？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-30T13:00:33.593

不，那是不可能的。但是，您可以将字符串拆分`\n`，然后获取所需的行：

```
String s = "First line\nSecond line\nThird line\nFourth line";
String[] lines = s.split("\n", -1);
System.out.println(lines[2]); // Third line 
```

如果您不知道平台的行分隔符是什么，请使用`System.getProperty("line.separator")`.

或者，如果您想获得*一系列*行，请使用[`Arrays.copyOfRange()`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#copyOfRange%28T%5B%5D,%20int,%20int%29)：

```
String s = "First line\nSecond line\nThird line\nFourth line";
String[] lines = s.split("\n", -1);
String[] lines2To4 = Arrays.copyOfRange(lines, 1, 4); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T13:02:51.353

```
public String substringLine(String text, int lineNumber){
    String[] textLines = text.split("[\r\n]+");
    return textLines.length < lineNumber ? textLines[lineNumber] : null;
} 
```

这是做你想做的事情的简单方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T13:17:39.070

我不知道这样做的内置方法，但您可以编写一个简单快速的程序，无需不必要的分配即可找到正确的行：

```
public static String substringByLine(String s, int n) {
    int pos = -1, start;
    do {
        pos = s.indexOf('\n', start = pos+1);
        if (pos < 0) {
            pos = s.length();
            break;
        }
    } while (n-- > 0);
    return n <= 0 ? s.substring(start, pos) : null;
} 
```

这是[ideone 的链接](http://ideone.com/aJNgC)。

# java - 线程连接似乎是死锁

> ID：12197399
> 
> 赞同：0
> 
> 时间：2012-08-30T12:58:08.157
> 
> 标签：java, android, multithreading

有人可以对报告的这个错误有所了解：

```
"main" prio=5 tid=1 WAIT
  | group="main" sCount=1 dsCount=0 obj=0x40b97568 self=0x40b5ba68
  | sysTid=29071 nice=0 sched=0/0 cgrp=apps handle=1074202160
  | schedstat=( 2218977000 625819000 2260 ) utm=177 stm=44 core=0
  at java.lang.Object.wait(Native Method)
  - waiting on <0x412f4160> (a java.lang.VMThread) held by tid=12 (Thread-699)
  at java.lang.Object.wait(Object.java:364)
  at java.lang.Thread.join(Thread.java:761)
  at com.pyesmeadow.pendulumclock.PendulumAppView.pause(PendulumAppView.java:419) 
```

这似乎表明它正在等待一个 id 为 12 的线程。查看堆栈跟踪，我对线程 #12 有以下信息：

```
"Thread-699" prio=5 tid=12 NATIVE
  | group="main" sCount=1 dsCount=0 obj=0x41715d38 self=0x678ba008
  | sysTid=29098 nice=0 sched=0/0 cgrp=apps handle=1642643840
  | schedstat=( 12528326000 501640000 3154 ) utm=1206 stm=46 core=0
  #00 pc 0000dc70 /system/lib/libc.so (__futex_syscall3+8)
  #01 pc 0001212c /system/lib/libc.so
  #02 pc 0001a9cf /system/lib/libgui.so
  #03 pc 00021351 /system/lib/libgui.so     (android::SurfaceTextureClient::disconnect(int)+32)
  #04 pc 000213c7 /system/lib/libgui.so     (android::SurfaceTextureClient::~SurfaceTextureClient()+22)
  #05 pc 00021445 /system/lib/libgui.so     (android::SurfaceTextureClient::~SurfaceTextureClient()+4)
  #06 pc 0000ee89 /system/lib/libutils.so (android::RefBase::decStrong(void const*) const+40)
  #07 pc 000497db /system/lib/libandroid_runtime.so (android::sp<android::InputChannel>::~sp()+10)
  #08 pc 000567e1 /system/lib/libandroid_runtime.so
  #09 pc 0001de30 /system/lib/libdvm.so (dvmPlatformInvoke+112)
  #10 pc 0004d083 /system/lib/libdvm.so (dvmCallJNIMethod(unsigned int const*, JValue*, Method const*, Thread*)+394)
  #11 pc 00027260 /system/lib/libdvm.so
  #12 pc 0002bb68 /system/lib/libdvm.so (dvmInterpret(Thread*, Method const*, JValue*)+180)
  #13 pc 0005f7f1 /system/lib/libdvm.so (dvmCallMethodV(Thread*, Method const*, Object*, bool, JValue*, std::__va_list)+272)
  #14 pc 0005f81b /system/lib/libdvm.so (dvmCallMethod(Thread*, Method const*, Object*, JValue*, ...)+20)
  #15 pc 000543d3 /system/lib/libdvm.so
  #16 pc 00012dd0 /system/lib/libc.so (__thread_entry+48)
  #17 pc 00012528 /system/lib/libc.so (pthread_create+172)
  at android.view.Surface.isValid(Native Method)
  at com.pyesmeadow.pendulumclock.PendulumAppView$WorkerThread.run(PendulumAppView.java:169) 
```

基本上，该线程负责更新 UI。它所指的代码行是调用`isValid()`：

```
if( _surfaceHolder.getSurface().isValid() )
{
    // ...
} 
```

回到第一个堆栈转储（上图），问题似乎出现`_workerThread.join()`在此代码中对（_workerThread 是 id 为 #12 的线程）的调用中：

```
public void pause()
{   
    _workerThread.setRunning( false );

    // Wait for the background thread to terminate.

    while( true )
    {
        try
        {
            _workerThread.join();
            break;
        }
        catch( InterruptedException ex )
        {
        }
    }
} 
```

似乎通过调用`join()`工作线程正在发生死锁，但我不知道为什么。

任何帮助，将不胜感激。

韦恩。

****** *** *******更新******* *** ** *** ***********

 *****这是我`run()`在工作线程中的方法的代码：

（请注意，在我的代码的生产版本中，_running\ 是一个**非易失性**布尔值）

```
 public void setRunning( boolean flag )
    {
        _running = flag;
    }

    @Override
    public void run()
    {   
        int previousIndex = 0;

        _timeSwingStarted = new Date();

        while( _running )
        {
            if( _swingPath == null || _swingPath.isEmpty() )
                continue;

            if( Thread.interrupted() )
                break;

            if( _mode == PendulumMode.Swinging )
            {
                Date current = new Date();
                long elapsed = current.getTime() - _timeSwingStarted.getTime();
                int index = (int) Math.floor( ((double) Math.min(elapsed, 2000.0f) / 2000.0f) * (_swingPath.size() - 1) );

                index = Math.max( Math.min( index, _swingPath.size() - 1), 0 );

                if( index == previousIndex )
                    continue;

                // Calculate the position of the pendulum and render it on the display

                _currentPosition = _swingPath.get( index );

                // only render the UI if there is a valid surface to render on

                if( _surfaceHolder.getSurface().isValid() )
                    _theme.render( _currentPosition, _scrollOffsetY, _showFPS );

                // Check whether the direction of the pendulum has changed

                previousIndex = index;

                if( index >= _swingPath.size() - 1 )
                    _timeSwingStarted = new Date();
            }

            //
            // Check whether we should close the app automatically if a
            // specified battery level has been reached.
            //

            if( _closeWhenBatteryLow && isBatteryLevelBelowThreshold() )
            {
                //
                // Schedule a shutdown time and notify the user in case they wish
                // to change their minds by adjusting the app settings.
                //

                if( _shutDownTime == null )
                {
                    _shuttingDownReason = ShutdownReason.BatteryLow;
                    _shutDownTime = Calendar.getInstance();
                    _shutDownTime.add( Calendar.MINUTE, 2 );

                    ((Activity) _context).runOnUiThread( new Runnable() {
                        public void run() {
                            showWarning( getResources().getString( R.string.batteryLowClosingMessage ) );
                        }
                    });
                }
            }

            //
            // Determine whether it's time to shutdown the app, if so the perform
            // some extra checks to ensure that the user hasn't changed their minds
            // since the initial message was displayed.
            //

            if( _shutDownTime != null )
            {
                Calendar now = Calendar.getInstance();

                if( now.after( _shutDownTime ) )
                {
                    if( _shuttingDownReason == ShutdownReason.BatteryLow )
                    {
                        if( _closeWhenBatteryLow && isBatteryLevelBelowThreshold() )
                        {
                            ((Activity) _context).finish();
                        }
                        else
                        {
                            _shuttingDownReason = ShutdownReason.None;
                            _shutDownTime = null;
                        }
                    }
                }
            }

            try
            {
                Thread.sleep( _sleepDuration );
            }
            catch( InterruptedException e )
            {
                /* at least we tried */
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:22:19.380

这条线似乎表明一个问题：

```
_workerThread.setRunning( false ); 
```

您是否在某处轮询布尔标志以查看是否需要停止？在这种情况下应该声明`volatile`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T13:05:05.137

尝试：

```
 while( true ){
        _workerThread.interrupt();
        try
        {
            _workerThread.join();
            break;
        }
        catch( InterruptedException ex )
        {
        }
     } 
```

使用我的线程它可以正常工作..

**编辑：**

Tudor 在我的帖子评论中有你的解决方案。*****

# .net - 将 XML 文件导入单个数据表

> ID：12197401
> 
> 赞同：2
> 
> 时间：2012-08-30T12:58:14.400
> 
> 标签：.net, xml, vb.net

我有一个具有以下结构的 XML 文件：

```
<InterfaceLimits day="2012-08-22" xmlns="http://someurl.com/xml">
  <InterfaceLimitsHourly hour="1">
    <InterfaceLimit>
      <InterfaceLimitName>NAME1</InterfaceLimitName>
      <FlowMW>3684</FlowMW>
      <LimitMW>5100</LimitMW>
    </InterfaceLimit>
    <InterfaceLimit>
      <InterfaceLimitName>NAME2</InterfaceLimitName>
      <FlowMW>3310</FlowMW>
      <LimitMW>5900</LimitMW>
    </InterfaceLimit>
  </InterfaceLimitsHourly>
  <InterfaceLimitsHourly hour="2">
  ... etc.
</InterfaceLimits> 
```

当我将此数据导入 Excel 时，我得到以下漂亮、整洁的*单*表：

```
day        hour  InterfaceLimitName   FlowMW  LimitMW
8/22/2012  1     NAME1                3684    5100
8/22/2012  1     NAME2                3310    5900
... etc. 
```

但是，当我使用以下方法将 XML 文件导入 .NET 中的 DataSet 时，我得到以下*多个*表：

```
 day
0  2012-08-22

   hour
0  1
1  2
2  3
3  4
4  5
5  6
6  7
... etc.

   InterfaceLimitName  FlowMW  LimitMW
0  NAME1               3684    5100
1  NAME2               3310    5900
... etc. 
```

我用来导入文件的代码片段如下：

```
_sourceDS.ReadXml(_downloadFile, XmlReadMode.Auto) 
```

其中 _sourceDS 是一个空的 DataSet，_downloadFile 是一个字符串，其中包含下载的 XML 文件的完整路径。

有什么想法可以（半自动且不提前知道结构）强制导入到 Excel 中的单个表中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:44:30.770

将`DataSet`始终从您的 XML 创建三个表。

您可以尝试将其加载到 a`DataTable`中，但是您必须提供一个模式，虽然我不知道它是否真的可以工作，但它可能不是您想要的。

因此，唯一的解决方案是将您合并`DataSet`到一个`DataTable`.

* * *

结果将如下所示：

## ![在此处输入图像描述](../Images/7af009f3e76e27ffe8fe8e8158d98bf5.png)

当心，一大堆代码（但翻译成 VB.Net 取决于你）：

```
public static DataTable Flatten(DataSet dataSet)
{

    foreach (DataTable table in dataSet.Tables)
        foreach (DataColumn column in table.Columns)
            if (!column.ColumnName.Contains("_Id")) column.ColumnName = table.TableName + "." + column.ColumnName;

    DataTable resultTable = dataSet.Tables[dataSet.Relations[0].ChildTable.TableName];
    foreach (DataRelation relation in dataSet.Relations)
        resultTable = Join(dataSet.Tables[relation.ParentTable.TableName], resultTable, relation.ParentColumns[0].ColumnName, relation.ChildColumns[0].ColumnName);

    return resultTable;
}

public static DataTable Join (DataTable first, DataTable second, string firstJoinColumn, string secondJoinColumn) 
{ 
    return Join(first, second, new DataColumn[]{first.Columns[firstJoinColumn]}, new DataColumn[]{first.Columns[secondJoinColumn]}); 
} 

public static DataTable Join(DataTable first, DataTable second, DataColumn[] firstJoinColumn, DataColumn[] secondJoinColumn)
{
    DataTable table = new DataTable("Join");
    using (DataSet ds = new DataSet())
    {
        ds.Tables.AddRange(new DataTable[] { first.Copy(), second.Copy() });

        DataColumn[] parentcolumns = new DataColumn[firstJoinColumn.Length];
        for (int i = 0; i < parentcolumns.Length; i++)
            parentcolumns[i] = ds.Tables[0].Columns[firstJoinColumn[i].ColumnName];

        DataColumn[] childcolumns = new DataColumn[secondJoinColumn.Length];
        for (int i = 0; i < childcolumns.Length; i++)
            childcolumns[i] = ds.Tables[1].Columns[secondJoinColumn[i].ColumnName];

        DataRelation r = new DataRelation(string.Empty, parentcolumns, childcolumns, false);
        ds.Relations.Add(r);

        for (int i = 0; i < first.Columns.Count; i++)
            table.Columns.Add(first.Columns[i].ColumnName, first.Columns[i].DataType);

        for (int i = 0; i < second.Columns.Count; i++)
            if (!table.Columns.Contains(second.Columns[i].ColumnName))
                table.Columns.Add(second.Columns[i].ColumnName, second.Columns[i].DataType);
            else
                table.Columns.Add(second.Columns[i].ColumnName + "_Second", second.Columns[i].DataType);

        table.BeginLoadData();

        foreach (DataRow firstrow in ds.Tables[0].Rows)
        {
            DataRow[] childrows = firstrow.GetChildRows(r);
            if (childrows != null && childrows.Length > 0)
            {
                object[] parentarray = firstrow.ItemArray;
                foreach (DataRow secondrow in childrows)
                {
                    object[] secondarray = secondrow.ItemArray;
                    object[] joinarray = new object[parentarray.Length + secondarray.Length];
                    Array.Copy(parentarray, 0, joinarray, 0, parentarray.Length);
                    Array.Copy(secondarray, 0, joinarray, parentarray.Length, secondarray.Length);
                    table.LoadDataRow(joinarray, true);
                }
            }
            else
            {
                object[] parentarray = firstrow.ItemArray;
                object[] joinarray = new object[parentarray.Length];
                Array.Copy(parentarray, 0, joinarray, 0, parentarray.Length);
                table.LoadDataRow(joinarray, true);
            }
        }
        table.EndLoadData();
    }
} 
```

资料来源：[RedAnt 科技博客](http://techant.blogspot.de/2008/04/c-flatten-dataset-to-datatable.html)和[weblogs.sqlteam.com](http://weblogs.sqlteam.com/davidm/archive/2004/01/20/748.aspx)

# c# - HTML5 Canvas toDataURL("image/png") 适用于某些绘画，有些则不适用，不知道为什么

> ID：12197407
> 
> 赞同：4
> 
> 时间：2012-08-30T12:58:41.650
> 
> 标签：c#, javascript, asp.net, html, canvas

我正在使用 asp.net 4 (c#)。我在 Html 5 画布上有一个绘图应用程序，能够添加图像和绘制多种颜色。我想将绘制的图像保存到 .png 文件。为此，我构建了一个 WebMethod：

```
[WebMethod(EnableSession = true)]
public static void UploadImage(string imageData,string name)
{
    System.Diagnostics.Debug.WriteLine("here friend!");
} 
```

现在我在页面上有一个按钮，我使用 javaScript 来调用这个方法：

```
function trySend()
{
    var image = document.getElementById("drawCanvas").toDataURL("image/png");
    image = image.replace('data:image/png;base64,', '');
    var name = document.getElementById("userName").value;
    $.ajax(
    {
        type: 'POST',
        url: 'CanvasSave.aspx/UploadImage',
        data: '{ "imageData" : "' + image + '" ' + ', "name" : "' + name + '"}',
        contentType: 'application/json; charset=utf-8',
        dataType: 'json',
        success: function (msg) {
        location.href = '<%= Page.ResolveUrl("~/ShowCards.aspx") %>';
        }
     });
} 
```

问题是，如果我在画布上画一个简单的图画（一些线条或一个小圆圈），它就可以完美地工作。即使我有 1 个“邮票”（即图像），它仍然有效。

如果我画一个“复杂”的图像（不是很复杂！只是用不同颜色的划痕）或添加 2,3 个图章，它就不起作用。WebMethod 根本没有被调用，即使我等了很长时间。

我认为这与图像的大小有关。似乎如果数据的最终大小小于 80 kb（这是我能够保存的图像的最大大小），那么它可以工作，但是如果预期的图像大于这个，我就有问题了。同样，所有问题都在 JS 中，而不是在 C# 代码中。

这是我得到的 JavaScript 错误：

```
 POST http://localhost:53751/CanvasSave.aspx/UploadImage 500 (Internal Server Error) 
jquery.min.js:4
f.support.ajax.f.ajaxTransport.send jquery.min.js:4
f.extend.ajax jquery.min.js:4
trySend Default.aspx:21
onclick 
```

这个问题的原因是什么，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:25:39.780

正如我在评论中所说，我不是 ASP/Windows 人 - 我相信这里的其他人可以澄清，但从我在线阅读的内容来看，您需要在您的服务器上执行以下操作：

```
Add the following to your web.config or mod the settings in the machine.config

<system.web>
  <httpRuntime maxRequestLength="XXXXXX" />
</system.web> 
```

以上应该改变任何请求允许的最大大小，我假设 XXXXX 值需要以字节为单位。现在这是否是唯一要更改的配置设置还有待观察。PHP 有两个关于上传和发布限制的设置需要更改。

**编辑**

为了进行更改`maxJsonLength`，您需要将以下内容添加到服务器上的 web.config 文件中：

```
<system.web.extensions>
  <scripting>
    <webServices>
      <jsonSerialization maxJsonLength="5000000">
      </jsonSerialization>
    </webServices>
  </scripting>
</system.web.extensions> 
```

我无法弄清楚默认值是什么`maxJsonLength`，有人说它是 2097152 个字符，而另一些人说是 102400 个字符......无论哪个，5000000 应该足够了 :)

以下可能有助于找出您的 maxJsonLength 当前是什么：

[对 maxJsonLength 默认值的混淆](https://stackoverflow.com/questions/2119186/confusion-over-maxjsonlength-default-value)

# javascript - Focus() 在任何导航器中都不起作用

> ID：12197409
> 
> 赞同：0
> 
> 时间：2012-08-30T12:58:45.420
> 
> 标签：javascript, ajax, prototypejs

我只是解雇这个：

```
setTimeout(function() { $('nombreAsegurado').focus(); }, 0); 
```

这与下拉菜单有关，当用户点击搜索输入时，会显示一个下拉菜单，然后用户选择一个项目，菜单消失然后我想专注于输入以便用户可以在类别中搜索之前在下拉菜单中选择的。

我正在使用原型框架（我讨厌它）。此输入由 ajax 请求调用，这与问题有关吗？

元素：

```
 <input type="text" value="Ingrese" size="20" maxlength="60" name="nombreAsegurado" id="nombreAsegurado" style="color: #666666;font-family: Verdana,Arial,Helvetica,sans-serif;font-size: 10px;vertical-align:middle;background: url(${self.monitor.basePath}images/input_bg.png) repeat-x scroll 0 0 transparent;border: 1px solid #C4C4C4;padding: 2px 4px;" onclick="if(this.value=='Ingrese Asegurado') this.value=''; this.style.border='1px solid #C4C4C4'; DisplayOptions();" onkeypress="if (event.keyCode==13) buscar_asegurado();" onblur="CloseOptions();"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T15:02:27.210

解决了，我改变了这条线的位置：

```
setTimeout(function() { $('nombreAsegurado').focus(); }, 0); 
```

我把它放在了我的功能的最后。

# sql-server - SQL 中列的行是计数的列之一

> ID：12197412
> 
> 赞同：1
> 
> 时间：2012-08-30T12:59:00.603
> 
> 标签：sql-server, select, count, transpose

下午好，

我试图在这个问题中使用 CASE 将行转换为列：

[行到列 SQL Server 查询](https://stackoverflow.com/questions/7534403/rows-to-columns-sql-server-query)

但是，在我的情况下，我没有包含信息的列，它是数据计数。

我使用此查询获取数据：

```
select MA, SN, count(*) 
from Original
where MA = 'AB'
group by MA 
```

查询结果：

```
MA  SN      COUNT
AB  TEXTA   6
AB  TEXTB   5
AB  TEXTC   3
AB  TEXTD   4 
```

表原件

```
MA  SN      
AB  TEXTA   
AB  TEXTA   
AB  TEXTA   
AB  TEXTA   
AB  TEXTA   
AB  TEXTA   
.
.
.
AB  TEXTD   
AB  TEXTD 
```

表结果：

```
MA      TEXTA   TEXTB   TEXTC   TEXTD
AB      6       5       3       4 
```

这是我当前的查询：

```
select  MA,
        count(*) as 'COUNT2',
    MAX(CASE WHEN SN = 'TEXTA' THEN COUNT2 end) as TEXTA1,
    MAX(CASE WHEN SN = 'TEXTB' THEN COUNT2 end) as TEXTB1,
    MAX(CASE WHEN SN = 'TEXTC' THEN COUNT2 end) as TEXTC1,
    MAX(CASE WHEN SN = 'TEXTD' THEN COUNT2 end) as TEXTD1,

from Original
where MA= 'AB'
group by MA 
```

我在查询中做错了什么？有人可以解释为什么在我发布的问题中它有效但计数无效？谢谢！: )。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T13:17:17.723

**编辑：**您不能`COUNT2`以您想要的方式使用，因为选择列表中后面的列不能引用前面列的别名。所以`COUNT2`在查询中的其他任何地方都没有任何意义，除非您将该部分转换为子查询（或 cte）然后引用它。

因此，使用更新的模式，您需要一个子查询来进行计数是有道理的。基本上将您的第一个查询作为子查询删除到第二个查询（代替`Original`），然后添加一些缺失的`group by`列，然后它就可以工作了：

```
select  MA,
    MAX(CASE WHEN SN = 'TEXTA' THEN COUNT2 end) as TEXTA1,
    MAX(CASE WHEN SN = 'TEXTB' THEN COUNT2 end) as TEXTB1,
    MAX(CASE WHEN SN = 'TEXTC' THEN COUNT2 end) as TEXTC1,
    MAX(CASE WHEN SN = 'TEXTD' THEN COUNT2 end) as TEXTD1
from (
    select MA, SN, count(*) as COUNT2
    from Original
    where MA = 'AB'
    group by MA, SN
) Original
where MA= 'AB'
group by MA 
```

[http://www.sqlfiddle.com/#!3/41c79/7](http://www.sqlfiddle.com/#!3/41c79/7)

# matrix - 用矩阵中的一行转置一列

> ID：12197413
> 
> 赞同：-1
> 
> 时间：2012-08-30T12:59:02.860
> 
> 标签：matrix, transpose

我们有这个 4x4 的矩阵：

> A B C D
> 
> efgh
> 
> 1 2 3 4
> 
> 5 6 7 8

通过**转置矩阵**，我们得到：

> 埃 1 5
> 
> 男朋友 2 6
> 
> CG 3 7
> 
> dh 4 8

我的问题是：

**我们通过“将第 2 列与第 4 行转置”得到什么矩阵？**

我需要了解操作本身，它意味着/意味着什么？我从来没有想过“用一条线换一列”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T13:01:53.613

AFAIK，这意味着您要交换第 2 列和第 4 行，而不是第 1 列与第 1 行和第 2 列与第 2 行等。

代码与全转置基本相同，只是你只有一列/行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T13:08:01.563

[矩阵转置](http://en.wikipedia.org/wiki/Matrix_transposition)是一种数学运算，其中矩阵的行变成了它的列。*从数学的角度来看，只转置M x N*矩阵中的一行并没有真正的好处，但是转置一行的代码与转置整个矩阵没有太大区别。

转置后得到的矩阵是：

```
a b 1 d

e f 2 h

c g 3 7

5 6 4 8 
```

# android - 以这种方式在应用程序上显示图像

> ID：12197414
> 
> 赞同：0
> 
> 时间：2012-08-30T12:59:09.467
> 
> 标签：android, android-activity

我想在我的应用程序上显示图像预览：当用户在列表视图中按下一个项目时（每个项目都是存储在 sd 卡中的图像的路径）图像预览出现，在可用空间中拉伸，就像在这张图片中（图像空间是黑色的，底层应用程序，仍然部分可见，是灰色的）：

![在此处输入图像描述](../Images/7e74da2301234da69d1e62bd0873efdb.png)

当用户按下后图像消失。我想为图像显示做一个活动，但我不知道如何获得图片中的结果......

编辑：

好的，这是我到目前为止所做的：

1）清单：

```
 <activity
        android:name=".ImageDialogActivity" android:theme="@android:style/Theme.Dialog">
 </activity> 
```

2）布局：

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
      android:layout_width="match_parent"
      android:layout_height="match_parent"
   >
    <ImageView android:id="@+id/imageView"
       android:layout_width="match_parent"
       android:layout_height="match_parent"/>
   </LinearLayout> 
```

3）活动onCreate方法：

```
super.onCreate(savedInstanceState);
setContentView(R.layout.image_preview);
String filepath = getIntent().getStringExtra("image_filepath");  
((ImageView)findViewById(R.id.imageView)).setImageBitmap(getBitmap(filepath)); 
```

其中 getBitmap 是一个私有方法，它为我提供来自文件路径的位图。

问题是我无法控制对话框尺寸：对话框的宽度和高度似乎取决于包含的图像...更不用说上/右/左/下边距了...

**已解决（也许）：我以这种方式修改了布局文件：**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="200dp"
android:layout_height="200dp" 
```

>

```
<ImageView android:id="@+id/imageView"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:scaleType="centerInside"/> 
```

将宽度/高度设置为允许获得效果的正方形......我的问题是：它适用于每部手机吗？还是只适合我的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:03:35.667

[您最好的方法是在对话框](http://developer.android.com/guide/topics/ui/dialogs.html#AlertDialog)中显示您的图像

如果您想要更多地控制显示，[请将其设置为主题](https://stackoverflow.com/questions/2422562/how-to-change-theme-for-alertdialog)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T13:05:23.330

如果你想通过创建一个新的来做到这一点`Activity`，你应该将它的布局参数设置为，`wrap_content`这样它就会出现在其他活动的上方，但不完全适合屏幕。此外，通过将其主题设置为`Theme.Dialog`或继承的主题，您的第二个活动将有点暗，您的活动将显示为一个对话框。

`fill_parent`如果您想要显示的确切结果（不知道此解决方案是否可行），您还应该尝试将布局参数添加到并添加边距。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T09:43:31.657

已解决，在主帖中输入的解决方案似乎工作正常！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T13:10:57.527

这是来自创建像 dilog 这样的活动的 api 演示 试试这个

```
public class DialogActivity extends Activity {
/**
 * Initialization of the Activity after it is first created.  Must at least
 * call {@link android.app.Activity#setContentView setContentView()} to
 * describe what is to be displayed in the screen.
 */
@Override
protected void onCreate(Bundle savedInstanceState) {
    // Be sure to call the super class.
    super.onCreate(savedInstanceState);

    requestWindowFeature(Window.FEATURE_LEFT_ICON);

    // See assets/res/any/layout/dialog_activity.xml for this
    // view layout definition, which is being set here as
    // the content of our screen.
    setContentView(R.layout.dialog_activity);

    getWindow().setFeatureDrawableResource(Window.FEATURE_LEFT_ICON, 
            android.R.drawable.ic_dialog_alert);
}
} 
```

# c# - 如何拆分数据集数据表中列的值？

> ID：12197417
> 
> 赞同：1
> 
> 时间：2012-08-30T12:59:12.040
> 
> 标签：c#, asp.net

在我的数据集中，我有很多行，

```
In first row last column has the value is "12356.56@Firefox 1@23423"
In Second row same column has the value is "12356.56@Chrome2.0@23423"
In Third row same column has the value is "3423@Firefox 14.0@sdfsd" 
```

在这里而不是像上面那样显示相同的值..

```
I need to display just "Firefox" if that column has Firefox in UI

I need to display just "Chrome" if that column has Chromein UI 
```

我该怎么做...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:06:41.217

使用这个辅助函数

```
public static string GetBrowser(string str)
{
    str = str.ToUpper();
    if(str.Contains("CHROME"))
    {
        return "Chrome";
    } 
    else if(str.Contains("FIREFOX")) 
    {
        return "Firefox";
    }
    return "Unknown";
} 
```

然后，当您将数据集绑定到 UI 时，使用它来显示值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T13:06:47.830

如果您有要检查的内容列表，可以使用`.Contains`以下方法检查：

```
var myValue = myDS[rowIndex][lastColumn].ToString();
if (myValue.Contains("Firefox"))
    return "Firefox";
else if (myValue.Contains("Chrome"))
    return "Chrome";
else
    return "Unknown"; 
```

演示：http: [//ideone.com/pMVeD](http://ideone.com/pMVeD)

* * *

从您给出的示例中，似乎以下逻辑*可能*有效，但应该针对更广泛的样本值进行测试：

```
var myValue = myDS[rowIndex][lastColumn].ToString();
var parts = myValue.Split('@');
var browser = parts[1].Split(' ','0','1','2','3','4','5','6','7','8','9');
return browser[0]; 
```

演示：http: [//ideone.com/NrY1e](http://ideone.com/NrY1e)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T13:18:46.820

这是代码。这可能会有所帮助。

```
 DataSet ds = new DataSet();
        //DataTable dt = new DataTable();
        ds.Tables.Add("table0");
        DataColumn dc = new DataColumn("browser");
        ds.Tables[0].Columns.Add(dc);
        ds.Tables[0].Rows.Add("12356.56@Firefox1@23423");
        for (int i = 0; i < ds.Tables[0].Rows.Count; i++)
        {
            string str = ds.Tables[0].Rows[i][0].ToString();
            if((str.ToLower().CompareTo("firefox"))!=0)
            {
                ds.Tables[0].Rows[i][0] = "firefox";
            }
        }
        _gridView.DataSource = ds;
        _gridView.DataBind(); 
```

# c# - 我如何反序列化这个 JSON

> ID：12197420
> 
> 赞同：1
> 
> 时间：2012-08-30T12:59:17.847
> 
> 标签：c#, json, asp.net-mvc-3

我有这段代码来反序列化这个 json，但我不断收到这个错误：

> “无法将 System.String 类型的对象转换为 Namespace.Models.Url 类型”

. json结构如下：

> [ { fileUrl: "localhost/ContentManager/get/ovYWB0/81/wallpaper" }, { fileUrl: "localhost/ContentManager/get/AcjwO0/81/wallpaper" }, { fileUrl: "localhost/ContentManager/get/HCR0q0/81 /墙纸” } ]

我映射到的类如下：

> ```
> public class Url
> {
>     public string FileUrl { get; set; }
> }
> 
> public class Response
> {
>     public Url FileUrl { get; set; }
> } 
> ```

反序列化代码如下：

```
var serializer = new JavaScriptSerializer();
IList<MTContribute> data = new List<MTContribute>();

var items = serializer.Deserialize<List<Response>>(json);
foreach (var item in items)
{
    var newData = new MTContribute
    {
        DateCreated = DateTime.Today,
        IsActive = Convert.ToBoolean("True"),
        MTContributeCategoryId = Category.MTContributeCategoryId,
        Url = item.FileUrl.FileUrl
    };

    data.Add(newData);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T13:03:57.007

根据您当前的 json 结构，这应该可以工作

```
var items = serializer.Deserialize<List<Url>>(json); // Url instead of Response 
```

如果这对您不起作用，则必须更改 json 结构以反映`Response`类的结构。

除非我错过了什么，否则这是必要的 json 结构

```
[{ fileUrl:{ fileUrl: "localhost/ContentManager/get/ovYWB0/81/wallpaper" }}] 
```

# mysql - 如何编写这个复杂的查询

> ID：12197430
> 
> 赞同：-3
> 
> 时间：2012-08-30T12:59:30.730
> 
> 标签：mysql

```
 Master Table
nID  Elementtype elementval 
1    volume         5          
1    rating         +          
1    volume         3          
1    rating         -          
2    volume         2          
2    rating         *            
2    volume         4         
2    rating         +          
3    volume         3          
3    rating         + 
```

* * *

```
client      table
  nID       client   
   1        halkins    
   2        narnia
   3        avatar
   4        narnia   
   5        newsco
   6        halkins 
```

如何在客户方面获得三种类型的平均音量和评分总和，例如对于 halkins

```
client     No(sum)       volumeavg      ngve   potve    neutral
 halkins    4                 4          1       1         0 
```

如何在同一个查询中获得其他值基本上是 volumeavg 或者是他们的任何其他方法 体积是体积的平均值，对于 halkins 5+3/2=4

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T13:07:19.500

您需要[加入](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)表格，然后对结果进行*分组*：

```
SELECT   client,
         COUNT(*) AS `No(sum)`,
         AVG(IF(Elementtype='volume', elementval, NULL)) AS volumeavg,
         SUM(Elementtype='rating' AND elementval='-') AS ngve,
         SUM(Elementtype='rating' AND elementval='+') AS potve,
         SUM(Elementtype='rating' AND elementval='*') AS neutral
FROM     Master JOIN client USING (nID)
GROUP BY nID 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/c3075/1/0)上查看。

# .net - 如何更改在 VS.net 2005 中使用 Microsoft.Vsa 命名空间的代码

> ID：12197432
> 
> 赞同：1
> 
> 时间：2012-08-30T12:59:32.553
> 
> 标签：.net, vsta

我的项目（VS 2005）中有一段代码使用`Microsoft.Vsa`命名空间。在编译时显示它已被弃用。在进一步调查中，我发现它在 VS2005 版本中不受支持。任何人都可以帮助我如何修改那段代码以使其适用于 VS 2005 吗？

```
 public class Mobile8ScriptEngine : Microsoft.Vsa.IVsaSite
{
    private const string MODULENAME = "Mobile8ScriptEngine";
    private IVsaEngine Engine;
    private string MyMoniker = "myapp://uk.co.mdo/Mobile8ScriptEngine";
    private byte[] Code = new byte[1024];
    private IVsaItems Items;
    //this method creates the script engine
    public void CreateEngine()
    {
        try
        {
            Engine = new Microsoft.VisualBasic.Vsa.VsaEngine();
            Engine.RootMoniker = MyMoniker;
            Engine.Name = "aisland";
            Engine.RootNamespace = "Mobile8";
            Engine.Site = this;
            Items = Engine.Items;
            //adding the reference items
            IVsaReferenceItem ReferenceItem = (IVsaReferenceItem)Items.CreateItem("Mobile8", Microsoft.Vsa.VsaItemType.Reference, Microsoft.Vsa.VsaItemFlag.None);
            ReferenceItem.AssemblyName = "System.dll";
            ReferenceItem.AssemblyName = "System.Xml.dll";
        }

        catch (Exception ex)
        {
            throw ex;
        }

    }

public string ExecuteVSAScript(string asMsgId, string asRefType, string asRefNo, string asHostMsg, string asMsgTypeScript, string asOutFormat)
    {
        const string PROCNAME = "ExecuteVSAScript";

        LogExceptionMessage lObjExcepLog = new LogExceptionMessage();

        SOURCE = MODULENAME + "." + PROCNAME;
        string lsScriptCode = "", lsOutMsg = null, lsCombinedScript = "", lsScriptFilePath = "";
        int liErrCode = 0;
        StreamReader lobjStreamReader;
        XmlDocument XMLDoc;
        try
        {
            asHostMsg = asHostMsg.ToUpper();
            //loading the host message in the XMLDocument
            XMLDoc = new XmlDocument();

            //              XMLDoc.Load("Mobile8Config.xml");
            //              XmlNode lobjXmlNode= XMLDoc.SelectSingleNode("Configuration/CommonSettings/VSAScriptPath");
            lsScriptFilePath = BUConstants.GetVSAScriptPath();
            //              lsScriptFilePath=lobjXmlNode.InnerText;
            XMLDoc.LoadXml(asHostMsg);

            //VSA script executon

            lobjStreamReader = File.OpenText(lsScriptFilePath + " \\" + asMsgTypeScript);

            lsScriptCode = lobjStreamReader.ReadToEnd();
            lobjStreamReader.Close();
            lsCombinedScript = scScriptStartCode + lsScriptCode + scScriptEndCode;
            Mobile8ScriptEngine lobjVSAEngine = new Mobile8ScriptEngine();
            lobjVSAEngine.CreateEngine();
            lobjVSAEngine.RevokeCache();
            bool lbCompilationStatus = lobjVSAEngine.AddScript(lsCombinedScript);

            if (lbCompilationStatus)
            {
                object[] lobjScriptArgs ={ asRefType, asRefNo, XMLDoc, asOutFormat };

                lobjVSAEngine.StartEngine();

                lsOutMsg = lobjVSAEngine.ShowResult(lobjScriptArgs);

                lobjVSAEngine.Close();
                GC.Collect();
            }
            else//Error: Failed to compile the VSA script
            {
                liErrCode = 1079;
                lObjExcepLog.LogMessage(1, null, liErrCode, scStatusSMSFormatFailed, asMsgId, 5, false, SOURCE);
            }

        }
        catch (System.Data.DataException objDBException)
        {

            throw objDBException;
        }
        catch (System.Runtime.InteropServices.ExternalException objExtException)
        {

            throw objExtException;
        }
        catch (Exception objException)
        {

            throw objException;
        }

        return lsOutMsg;
    }

} 
```

# php - PHP+Imagick：如何将渐变应用到图像的一部分背景？

> ID：12197433
> 
> 赞同：1
> 
> 时间：2012-08-30T12:59:33.367
> 
> 标签：php, imagemagick, alphablending

这似乎是一个重复的问题，但我找不到这种情况。不过可能是错的。

我的问题是，假设我在 150x150 的画布内有一个 100x100 像素的正方形 $square。背景是透明的。

我克隆了正方形，然后裁剪了需要处理的部分（$detail）。

我需要在 $detail 上从上到下应用渐变，以便顶部大约 60% 白色透明到底部 100% 透明。

然后，在 $image 上组合 $detail。

我不能使用转换，只有 php imagick 函数。

提前致谢！将要

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T15:27:35.827

`convert`在最近的版本中有一个特殊的创建操作符用于生成渐变，简称为`gradient:`- 它们被实现为[伪图像格式](http://www.imagemagick.org/www/formats.html#pseudo)。

[`gradient:`](http://www.imagemagick.org/Usage/canvas/#gradient)如果您想要非垂直渐变或透明度，则运算符的使用可能会变得非常复杂，因此请阅读文档。请注意，Image Magick 的底层版本将对您的操作方式产生影响。

您可以使用 IMagick 运算符创建伪格式图像：[`Imagick::newPseudoImage()`](http://uk.php.net/manual/en/imagick.newpseudoimage.php)

一旦你有正确大小的渐变，你可以用你的`$detail`图像来组合它。

一般来说，我使用 IMagick 之类的东西的技巧是先正确使用命令`convert`，然后将其转换为界面。

# r - ggplot2 facet_grid 排列面板

> ID：12197437
> 
> 赞同：12
> 
> 时间：2012-08-30T12:59:57.307
> 
> 标签：r, layout, ggplot2

`ggplot`以下示例在一行中创建了4 个面板“A”、“B”、“C”、“D”。

我想出了如何在一列中绘制这 4 个面板。然而，仍然是一个谜是如何安排 4 个面板，使“A”和“B”在第一行，“C”和“D”放在单独的（第二）行？

这是我的代码：

```
df <- data.frame(
x = rep(rep(1:10, each=10), 2),
y = rep(rep(1:10, 20), 2),
grid = rep(LETTERS[1:4], each=100)
)

ggplot(df, aes(x = x, y = y)) +
geom_point() +
facet_grid(. ~ grid, scales = "free") 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-30T13:13:09.157

使用`facet_wrap`代替`facet_grid`：

```
library(ggplot2)
ggplot(df, aes(x = x, y = y)) +
  geom_point(aes(colour=grid)) +
  facet_wrap(~ grid, scales = "free") 
```

![在此处输入图像描述](../Images/4bc9ec63cfef638eb5734a67e56d52c0.png)

# jquery - 淡入 img 的 onLoad - Caroufredsel

> ID：12197438
> 
> 赞同：2
> 
> 时间：2012-08-30T12:59:57.510
> 
> 标签：jquery, jquery-plugins, caroufredsel

我正在为我拥有的画廊使用 Caroufredsel 插件，并且希望画廊中的图像在页面加载时淡入淡出。

这是画廊的链接：http: [//tamedia.ca/marlowe/collection-aw12.html](http://tamedia.ca/marlowe/collection-aw12.html)

这是我用来启动插件的脚本：

```
$(window).load(function() {
    $("#thumbs").carouFredSel({
        synchronise: ['#images', false, true],
        width: "100%",
        height: 145,
        items: {
            width: 95,
            height: 145,
            visible: 19,
            start: -9
        },
        scroll: {
            items: 1,
            pauseOnHover: true
        },
        auto: 5000,
        debug: true,
        prev: {
            button: "#prev-thumbs",
            key: "left"
        },
        next: {
            button: "#next-thumbs",
            key: "right"
        }
    });

    $('#images').carouFredSel({
        auto: false,
        items: 1,
        scroll: {
            fx: 'fade'
        }
    });

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:05:22.003

为此，请尝试使用 Caroufredsel 的 onCreate() 函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-15T03:45:00.530

```
$(window).load(function() {
    $("#thumbs").carouFredSel({
        onCreate: function {
        /* PUT YOUR ONLOAD CODE HERE */
        }
        synchronise: ['#images', false, true],
        width: "100%",
        height: 145,
        items: {
            width: 95,
            height: 145,
            visible: 19,
            start: -9
        },
        scroll: {
            items: 1,
            pauseOnHover: true
        },
        auto: 5000,
        debug: true,
        prev: {
            button: "#prev-thumbs",
            key: "left"
        },
        next: {
            button: "#next-thumbs",
            key: "right"
        }
    });

    $('#images').carouFredSel({
        auto: false,
        items: 1,
        scroll: {
            fx: 'fade'
        }
    });
}); 
```

# mongodb - 如何刷新已经加载的 mongoose 文档中的数据？

> ID：12197441
> 
> 赞同：10
> 
> 时间：2012-08-30T13:00:03.923
> 
> 标签：mongodb, mongoose

需要明确的是，这个问题涉及从数据库加载数据，而不是更新数据库中的文档。

使用以下架构：

```
new mongoose.Schema
  name: String
  code:
    type: String
    index:
      unique: true
  _contacts: [
    type: mongoose.Schema.Types.ObjectId
    ref: 'Person'
  ] 
```

我已经像这样创建了我的文档：

```
client = new Client code:'test',name:'test competition',contacts:[]
client.save() 
```

在应用程序的其他地方或通过 API 调用，它不能轻易引用上面缓存的版本：

```
Client.findOne(code:'test').exec (err,client) ->
  return if err or not client
  client._contacts.push person.id # person has come from somewhere
  client.save (err) ->
    return err if err 
```

如果我们返回到我们的原始*客户端*对象，我想知道是否有一种方法可以为整个文档或仅针对特定路径刷新该对象。例如;

```
client.refresh '_contacts', (err) ->
  return err if err 
```

还是只维护一个全局引用的对象会更好吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-30T13:23:33.810

最佳实践是只保留一个 Mongoose 模型实例`client`，只要您积极使用它，正是因为它很容易与数据库中的内容不同步。`client`在需要时重新创建对象，`findOne`而不是尝试刷新可能过时的副本。

# blackberry - 如何将当前应用程序中的文件引用到 SD 卡中的文件中

> ID：12197443
> 
> 赞同：0
> 
> 时间：2012-08-30T13:00:08.563
> 
> 标签：blackberry

我当前的应用程序中有一个脚本文件。相同的路径如下所示。

```
 D:\myproj\Example\www\abc.js 
```

在设备中运行我的应用程序时，它会动态地将一个文件下载到我的 SD 卡中。

我需要解析我下载的应用程序并需要在其中设置这个“abc.js”文件路径。

如果我的文件在 SDCard 中，我可以设置路径，但不知道如何引用当前应用程序中的路径。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T18:50:35.997

如果您在 SDCard 上有该文件，则它的完整路径如下：

```
file:///SDCard/myproj/Example/www/abc.js 
```

附加信息：

如果您的文件位于 cod 文件中，那么有一种方法，但它没有记录在案，并且不能保证它适用于所有设备和 RIM OS 版本。

下面的代码显示`document.htm`封装`modulename.cod`在 BlackBerry 浏览器中。

```
BrowserSession session = Browser.getDefaultSession();
session.displayPage("cod://modulename/document.htm" ); 
```

尝试使用`cod://modulename/abc.js`指定 js 文件的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T12:45:24.190

要引用应用程序嵌入文件（在本例中为存储在*images*目录中的图像文件）：

```
 "file:///local/images/embedded_img.png" 
```

# ruby-on-rails - 无法实现 before_save 过滤器（检查不去数据库的数据时）

> ID：12197450
> 
> 赞同：0
> 
> 时间：2012-08-30T13:00:33.350
> 
> 标签：ruby-on-rails, actioncontroller

我需要在 before_save 之前验证用户数据。我只保存 paypal_email，不保存名字和姓氏。

我在模型中添加了 before_save 过滤器：

```
 attr_accessible :paypal_email, :first_name, :last_name
   attr_accessor :first_name
   attr_accessor :last_name

   before_save :verify 
```

并添加了验证方法：

```
 protected
 def verify

require 'httpclient'
require 'xmlsimple'

clnt = HTTPClient.new

header =  {"X-PAYPAL-SECURITY-USERID" => "1111111111",
                "X-PAYPAL-SECURITY-PASSWORD" => "111111",
               "X-PAYPAL-SECURITY-SIGNATURE" => "11111",
               "X-PAYPAL-REQUEST-DATA-FORMAT" => "NV",
               "X-PAYPAL-RESPONSE-DATA-FORMAT" => "XML",
               "X-PAYPAL-APPLICATION-ID" =>  "APP-2J632856DC989803F"
                }
 logger.info(@user.first_name)               
 data = {"emailAddress" => self.paypal_email,
       "firstName"=> self.first_name,
       "lastName" => self.last_name,
       "matchCriteria" => "NAME",         
       "requestEnvelope.errorLanguage" => "en_US"}

 uri = "https://svcs.paypal.com/AdaptiveAccounts/GetVerifiedStatus"
 res = clnt.post(uri, data, header)
 @xml = XmlSimple.xml_in(res.content)

  if res.status == 200
    if @xml['accountStatus']!=nil
      account_status = @xml['accountStatus'][0]
      if account_status == "VERIFIED" 
        redirect_to :back
        flash[:success] = "Your account is verified"
      else 
        redirect_to :back
        flash[:error] = res.content
      end

    else
      redirect_to :back
       flash[:error] = res.content
   end  
   else 
    flash[:error] = "Oops! Can't conntect to PayPal"
  end

 end 
```

**编辑**

```
 def create
     @user = User.new(params[:user])
     if @user.valid?
         @user.save
         flash[:notice] = "success"
     else
         render :new
         flash[:error] = "error"

 end 
```

什么给了我错误：

```
 undefined method `first_name' for nil:NilClass 
```

我的错误在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:03:06.883

由于您在您的模型中，请替换`@user.first_name`为`self.first_name`甚至`first_name`

其他问题

*   第三方服务调用应该存在于后台作业中。

*   点`flash`在模型中是未知的，它属于控制器，也属于`redirect`.

*   redirect_to :back，这不是一个好习惯：有些浏览器不发送引荐来源网址

# android - SQLite for android 中的预加载数据

> ID：12197454
> 
> 赞同：2
> 
> 时间：2012-08-30T13:00:38.467
> 
> 标签：android, sqlite

我是 android 应用程序开发的新手。我正在开发我的第一个应用程序，该应用程序显示所选日期（周一，周二等）所选班级/教师的时间表。我已经完成了 UI。现在我的问题是如何以及在哪里编写整个数据库插入的代码（因为它应该从头开始加载）。由于我是这个领域的新手，任何人都可以详细地帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T13:10:56.443

您要执行的操作的一般步骤如下：

1）创建/将您的数据库转换为 SQLite（Android 使用的数据库）
2）将数据库放在您的`assests`文件夹中
3）编写代码以在您的应用程序第一次运行时将数据库从您的资产文件夹复制到私有数据库文件夹时间。
4) 一旦数据库位于私有文件夹中，根据需要编写代码以访问数据库。

在您的应用程序中使用/导入现有 SQLite 数据库的教程可以在[http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/找到](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)

有很多关于创建数据库助手类的教程（处理创建、读取、更新和删除功能）。可以在[http://www.anotherandroidblog.com/2010/08/04/android-database-tutorial/找到我之前使用和推荐过的一个好方法](http://www.anotherandroidblog.com/2010/08/04/android-database-tutorial/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T13:06:19.597

我认为你需要的是用你的 apk 运送你的数据库。但是，您需要移动数据库文件，因为系统希望其数据库位于私有存储中。[您可以在此处](https://stackoverflow.com/questions/513084/how-to-ship-an-android-application-with-a-database)查看这是如何完成的。

如果碰巧您的数据库文件很大（超过 1MB），请结合[此答案](https://stackoverflow.com/questions/2860157/load-files-bigger-than-1m-from-assets-folder)以实现发货。

# .net - 垃圾收集器和在方法内创建的对象/变量

> ID：12197466
> 
> 赞同：1
> 
> 时间：2012-08-30T13:01:14.457
> 
> 标签：.net, garbage-collection

当我在方法中创建对象/变量时，在方法调用之后，所有对象都将被设置为由 GC 收集，并且所有“原始”变量（int、string、decimal ...）都被销毁，对吗？

所以，如果是的话：

```
public void MyMethod()
{
    // Imagine an class that connects with ftp server
    MyObject o = new MyObject();
    o.Connect(); 
} 
```

如果我在行中有错误`o.Connect()`并且我有一个`try``catch `only to log the error,`MyObject o` 将被 GC 收集？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:05:03.827

垃圾收集器进行“收集”的时间没有固定。存在三个“代”对象，如果对象在收集中存活，则它们会被提升一代。所以是的，如果您在 try/catch 块中“捕获”错误，那么垃圾收集器将释放对象占用的内存。

[您可以在此处](http://msdn.microsoft.com/en-us/library/f144e03t(v=vs.90))了解有关垃圾收集的更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T13:04:05.620

GC 将在对象不再可从范围内的任何对象访问后的某个时间收集对象。它可能无法及时收集，因此如果您希望及时结束连接，则应使用`IDisposable`模式和`using`块。

（注意：CLR GC 行为并不简单，它对何时收集对象提供的保证很少。一般的经验法则是依靠 GC 来回收内存，但要注意其他资源，例如连接，明确地。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T13:25:13.027

让我们逐行看代码

```
public void MyMethod()
{
    MyObject o = new MyObject(); // local object
    o.Connect();
} // object o now goes out of scope and becomes subject for GC 
```

但我想你的问题的本质在于你*是否仍然能够记录错误*。答案是**肯定**的。有两种可能的情况：

*   `o.Connect`是*同步*`}`的，这意味着在所有逻辑执行之前你不会打到最后一行
*   `o.Connect`是*异步*的，让我称之为它`o.ConnectAsync`，这意味着您将`}`直接到达最后一个，而无需等待连接发挥它的魔力。这怎么可能？这是可能的，因为`o.ConnectAsync`将（可能）在单独的线程中执行。的工作线程`o.ConnectAsync`将保留对该`o`对象的引用，因此它不会成为 GC 的主题。只有在异步方法完成后`o`，才能用于 GC。

# java - 类似于 Jackson 中用于数组的 GSON

> ID：12197472
> 
> 赞同：1
> 
> 时间：2012-08-30T13:01:38.930
> 
> 标签：java, json, jackson, gson

我正在尝试将数组或列表（java）转换为 JSON 格式。我已经看到在 GSON 中我们可以执行以下操作：

```
data.add("hello");
data.add(someobject);
String gson = new Gson().toJson(data); 
```

杰克逊有没有类似的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T14:20:01.367

杰克逊有一个等价物：[`ObjectMapper.writeValueAsString`](http://fasterxml.github.com/jackson-databind/javadoc/2.0.2/com/fasterxml/jackson/databind/ObjectMapper.html#writeValueAsString%28java.lang.Object%29).

```
List data = new ArrayList();
ObjectMapper mapper = new ObjectMapper();

data.add("hello");
data.add(someobject);

String json = mapper.writeValueAsString(data); 
```

# ejb - 使用 WebSphere 集群进行负载平衡

> ID：12197473
> 
> 赞同：0
> 
> 时间：2012-08-30T13:01:38.663
> 
> 标签：ejb, websphere, cluster-computing, load-balancing

我有两层系统。WebSphere 应用程序服务器。

第一层称为“Web”，但它是一个常规的 ApplicationServer 集群。第二层称为“App”，是一个常规的 ApplicationServer 集群。

我使用 rmi:iiop: 调用了一些 EJB：但应用程序中的请求分布并不均匀。

我想要负载均衡器的效果。

那可能吗？顺便说一句，我没有权重（默认 == 2 除外），所以我不明白为什么某个 App 服务器会收到大部分请求。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:28:15.473

在这里您可以找到关于此问题的非常好的演示文稿：

[工作负载管理 (WLM) 概述和问题确定](http://www-01.ibm.com/support/docview.wss?uid=swg27012101&aid=1)

您看到的可能是由于将请求发送到服务器的“首选本地”驻留在同一主机名上。

通常这是一个好主意，但您当然可以将其关闭。

# oracle - 使用 BLToolkit 在 Oracle 中输出用户定义类型的参数

> ID：12197476
> 
> 赞同：1
> 
> 时间：2012-08-30T13:02:00.933
> 
> 标签：oracle, orm, user-defined-types, bltoolkit

我一直在尝试使用 BLToolkit 来激活 Oracle 存储过程，该存储过程将用户定义类型作为参数作为输出参数并对其进行更改。

我已经设法在原始类型上做到这一点，并且还通过手动调用 SetSpCommamd 但是我想使用抽象类生成方法，但似乎无法让它工作。

我很确定我写的代码是正确的（适用于原语）。调试时，我发现生成的代码调用的 SetSpCommamd 获得了奇怪的参数，而不是我提供的参数，而不是手动调用该方法时（它获得了我想要的确切参数）。我希望我能看到反射发出的代码，看看那里出了什么问题。

谁能帮我弄清楚为什么这不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T18:41:43.270

发现问题（可能是 BLToolkit 中的错误）。

BLToolkit 不会将 UDT 类按原样传递给过程（相反，它会尝试将其展平或其他东西并传递对象的内部）。我将对象更改为 Struct 而不是 Class 并修复了它。

后来我也把它改回了类，并在 BLToolkits 代码中的“IsScaler()”方法中做了一个补丁。

我会将其报告为错误，希望他们修复它。

# paypal-sandbox - iphone应用程序中Paypal错误589023的解决方案

> ID：12197485
> 
> 赞同：1
> 
> 时间：2012-08-30T13:02:17.640
> 
> 标签：paypal-sandbox

这是 iPhone 应用程序中 Paypal (Sandbox) 错误“589023”的解决方案

-（无效）payWithPayPal{

for (int i=0;i PayPal *payPal=[PayPal getPayPalInst];

```
payPal.shippingEnabled = FALSE;

payPal.dynamicAmountUpdateEnabled = NO;

payPal.feePayer = FEEPAYER_EACHRECEIVER;

PayPalPayment *payment = [[[PayPalPayment alloc] init] autorelease];

payment.recipient = @"UKMCA2010@GMAIL.COM";    

payment.paymentCurrency = @"USD";

payment.description = @"Payment Discription here...";

SampleSingleton *sample=[SampleSingleton sharedInstance];

payment.merchantName =[sample getStrRestaurantName]; 

payment.invoiceData = [[[PayPalInvoiceData alloc] init] autorelease];

payment.invoiceData.invoiceItems = [NSMutableArray array];   

PayPalInvoiceItem *item = [[PayPalInvoiceItem alloc] init];

item.totalPrice=[NSDecimalNumber decimalNumberWithString:[NSString stringWithFormat:@"%.2f", 126.34545]]; // If u give xxx.xx , no need to give the %.2f , u can give directly %f

    item.name = objTempReceived.strItemName;

    item.itemId = @"Item ID";

    [payment.invoiceData.invoiceItems addObject:item];

    [item release];
}

payment.subTotal = [NSDecimalNumber decimalNumberWithString:[NSString stringWithFormat:@"%.2f",126.34545]]; //Total and Subtotal must be equal

payment.invoiceData.totalTax = [NSDecimalNumber decimalNumberWithString:[NSString stringWithFormat:@"%.2f",3.34]];

NSLog(@"Total Tax is :%@",[payment.invoiceData.totalTax stringValue]);

[payPal checkoutWithPayment:payment]; 
```

}

这里总和小计和税只允许在.（点）后两位数字：（234.xx）。因此，通过使用 %.2f 可以完美地工作。

# google-chrome-extension - 在哪里初始化扩展相关数据

> ID：12197491
> 
> 赞同：0
> 
> 时间：2012-08-30T13:02:36.970
> 
> 标签：google-chrome-extension

我是新手，正在尝试编写一些基础扩展。为了使我的扩展工作，我需要初始化一些数据，所以我所做的是在我的内部我`background.js`声明了这样的东西。

```
localStorage["frequency"] = 1; //I want one as Default value. This line is not inside any method, its just the first line of the file background.js 
```

用户可以转到选项页面并使用 GUI 将上述变量更改为任何值。一旦用户在 UI 中更改它，就会更新该值。

现在问题是我的理解 background.js 每次重新启动机器时都会重新加载。所以每次我重新启动机器并打开 Chrome 时，频率值都会变回 1。为了避免这种情况，我需要在哪里初始化这个值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:01:57.767

您可以只使用特定的默认密钥。所以如果`frequency`没有设置你会尝试`default-frequency`。然后仍然在 background.js 中设置或定义默认键。

我喜欢在这样的功能中一步完成

```
function storageGet(key,defaultValue){
    var item = localstorage.getItem(key);
    if(item === null)return defaultValue;
    else return item;
} 
```

（根据[规范](http://dev.w3.org/html5/webstorage/#dom-storage-getitem)，如果未设置任何值，则localstorage 必须返回`null`。）因此，对于您的情况，它看起来像

```
var f = storageGet("frequency",1); 
```

此外，您可能有兴趣查看[chrome.storage API](http://developer.chrome.com/extensions/storage.html)。它的使用类似于 localstorage，但提供了可能对您的扩展有用的附加功能。特别是它支持跨不同的 chrome 浏览器同步用户数据。

**编辑**我更改了关于 apsillers 反对的 if 语句。但是由于规范说它应该为空，我认为检查它而不是未定义是有意义的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T14:17:11.290

这是另一种解决方案：

```
// background.js

initializeDefaultValues();

function initializeDefaultValues() {
    if (localStorage.getItem('default_values_initialized')) {
        return;
    }

    // set default values for your variable here
    localStorage.setItem('frequency', 1);

    localStorage.setItem('default_values_initialized', true);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T13:28:01.073

我认为问题在于您的语法。要获取和设置您的 localStorage 值，请尝试使用：

```
// to set
localStorage.setItem("frequency", 1);

// to get
localStorage.getItem("frequency"); 
```

# scorm - 在 SCORM 2004 中使用CurrentAttemptProgressInfo

> ID：12197492
> 
> 赞同：0
> 
> 时间：2012-08-30T13:02:41.533
> 
> 标签：scorm, scorm2004

我正在处理一组由不再与公司合作的先前开发人员开发的课程。我正在尝试在我们的新 LMS 中调试这些课程。对于几乎所有项目，课程将 controlMode 属性“useCurrentAttemptObjectiveInfo”和“useCurrentAttemptProgressInfo”设置为 false。

例如：

```
 <item identifier="sco_43337avg" identifierref="res-43337avg" isvisible="true">
                <title>Introduction</title>
                <imsss:sequencing>
                    <imsss:controlMode choice="true" choiceExit="true" flow="true" forwardOnly="false" useCurrentAttemptObjectiveInfo="false" useCurrentAttemptProgressInfo="false" />

                    <imsss:sequencingRules>
                     ... 
```

在 SCORM 2004 第 3 版中，内容聚合模型文档说明了有关 useCurrentAttemptProgressInfo 的内容：

> useCurrentAttemptProgressInfo (optional, default value = true) – 指示活动子项的尝试进度信息将仅在规则评估和汇总中使用（或不使用，如果 value = false），如果该信息是在当前尝试期间记录的活动。

这似乎是说，如果“假”，来自当前尝试的进度信息将不会用于规则评估和汇总......这是否意味着将使用来自先前尝试的客观信息？或者这是否意味着不会使用来自活动子项的进度信息？LMS 不会保留先前的尝试信息，是吗？那么为什么这个属性会被设置为“false”呢？

您希望将其设置为“false”的场景是什么？

我应该简单地将这些都设置为“真”吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T12:48:54.710

1.  如果**useCurrentAttemptObjectiveInfo**和**useCurrentAttemptProgressInfo** 设置为 false，则 LMS 将使用上一次尝试的跟踪信息（如果有），除非当前尝试记录了其跟踪信息。
2.  如果**useCurrentAttemptObjectiveInfo**和**useCurrentAttemptProgressInfo** 设置为 true，LMS 将使用当前尝试的跟踪信息，只忽略之前尝试记录的任何跟踪信息。

假设学习者完成了一项活动并记录了该活动的跟踪信息，然后学习者稍后返回相同的活动但没有记录跟踪信息。如果这些 controlMode 元素设置为 false，则 LMS 将使用上一次尝试的跟踪信息，因为当前活动没有跟踪信息。如果它们设置为 true，LMS 将仅基于当前尝试的跟踪信息进行汇总。

# iphone - 一个视图怎么知道他被送回了前面？

> ID：12197497
> 
> 赞同：2
> 
> 时间：2012-08-30T13:02:56.977
> 
> 标签：iphone, xcode

我的问题是当视图回到前面时我不知道如何重新加载一些数据。所以我的情况是这样的。我有一个视图，我从中加载视图 2，然后在视图 2 中更新视图 1 中使用的一些数据。但是当我按下返回视图时，一个不会更新。所以我需要知道当视图重新打开时我应该实现哪个功能。我正在寻找类似的东西：

```
 - (void)viewDidRELoad
    {//do my updating of stuff.. 
```

如果我可以从第二个视图调用一些函数也很好......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T13:04:35.620

你可能正在寻找`- (void)viewWillAppear:(BOOL)animated`

# php - 在 magento 中创建新的类别列表页面

> ID：12197500
> 
> 赞同：-1
> 
> 时间：2012-08-30T13:03:11.923
> 
> 标签：php, magento

我是 magento 的新手。在我的项目中，我只在类别页面中显示每个类别的 10 个产品。现在我想在另一个页面中显示该类别的所有产品。我不知道从哪里开始。有人可以在这里帮助我吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T13:05:22.093

如果您在通过管理员在 CMS 页面中显示列表后，您可以使用以下内容：

```
{{block type="catalog/product_list" 
  category_id="your_category_id" 
  template="catalog/product/list.phtml"}} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T14:35:48.633

如果它与类别页面完全一样，你不能只允许在magento admin中查看所有内容（目录>允许每页所有产品），然后动态创建页面，在你的url末尾附加 ?limit=all ?

# iphone - 如何从 iPhone 向蓝牙 LE 设备发送电子邮件、短信通知？

> ID：12197503
> 
> 赞同：2
> 
> 时间：2012-08-30T13:03:16.027
> 
> 标签：iphone, ios, ios6

我必须使用哪些服务/配置文件将电子邮件、短信通知从 iphone 发送到蓝牙 LE 设备。是否有任何示例代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-18T07:36:21.903

ANCS 将是 iOS 7 中的答案，但我不确定手表设备是否可以获取电话号码、消息内容等。那肯定会通过 ANCS 发送通知。

# bash - 如果最后一行被更改，则在 bash 中每小时更新文件

> ID：12197504
> 
> 赞同：0
> 
> 时间：2012-08-30T13:03:20.660
> 
> 标签：bash, date, scripting, sed, awk

我有一个数据文件，我每小时解析一次日期和值。所以今天我的日期 = 2012 年 8 月 30 日，价值 = 10。然后，我想仅在日期或值更改时才使用此日期和值附加新文件。所以我猜我需要检查新文件的最后一行，如果不同，追加。请帮我设计脚本来做到这一点。我没有可用的 cron，所以我将在无限循环中运行它。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T13:21:33.887

tail -1 为您提供文件的最后一行。

```
#!/bin/bash
# infinite loop
while true
do
my_file=test.txt
# get your date and value from where ever
my_date="30 AUG 2012"
my_value=10

lastval=`tail -1 $my_file | awk -F: '{print $1}'`
if [ "$lastval" != "$my_date" ] ; then
  echo "$my_date:$my_value" >> $my_file
fi

# if the file is updated every hour, check more often than once per hour.
sleep 30m

done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T13:09:59.753

```
current="$(tail -n 1 $DATA_FILE)"         # Last line of data file
previous="$(tail -n 1 $OTHER_FILE)"       # Last line of log file
if [ "$current" != "$previous" ]; then    # If the last lines are different...
  echo "$current" >> $OTHER_FILE          # ... append the current data
fi 
```

# javascript - 替换 html 字符串中的某些“<”和“>”

> ID：12197512
> 
> 赞同：0
> 
> 时间：2012-08-30T13:03:52.407
> 
> 标签：javascript, jquery, regex

```
<table class="sentinelresultitems" style="width: 800px; font-size: 0.5em; margin-top: 30px; margin-left: 50px; margin-right: 50px; display: table;">
    <tbody><tr>
        <td>
            <b>License ID</b>
        </td>
        <td style="text-align: right">
            <b>Product</b>
        </td>
     /tr>
    <tr>
        <td>New</td>
        <td class="quoteproductname" style="text-align: right">Product > name</td>
    </tr>
    <tr>
        <td>New</td><td class="quoteproductname" style="text-align: right">Another < product name
        </td>
    </tr>
    </tbody>
</table> 
```

我试图在 c# 中从上面的 html 字符串生成 PDF。但它崩溃了，因为我无法将产品名称中的`<`and分开`>`，从而导致无效的 html。即使我用`&gt;`etc 替换它们，它们仍然会被解析为`>`.

是否可以用类似的东西替换and直到`<`我在服务器上得到它？之后，我可以对其进行正常的文本替换。否则我显然也会替换所有标签。`>``GT``LT`

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T13:19:04.577

那正是你想要的 ？

```
var replacers = {
    '<': 'GT',
    '>': 'LT'
};
var html = $('.sentinelresultitems').html().replace(/[<>]/g, function(match) {
    return replacers[match];
}); 
```

# language-agnostic - 无需使用乘法 ( * ) 和除法 ( / ) 运算符即可实现相同的输出

> ID：12197521
> 
> 赞同：-2
> 
> 时间：2012-08-30T13:04:15.493
> 
> 标签：language-agnostic, operators

假设有这样的语句：

```
 variable output = (7 * X )/8  //[Here X will be provided by the user]
 //say for example , X=8
 variable output = (7 * 8 )/8 = 7 
```

现在，我必须得到输出变量的值`without using multiplication (*) and division (/) operator.`

任何建议或提示将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:09:21.730

*您可以在for*循环中使用 add 和 minus

即： 7*X 相当于

```
int o = 0;
for( int n = 1; n <= 7; n++ )
  o += X; 
```

并为划分做类似的事情

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T13:15:25.953

这将起作用：

```
int y = x>>3;
int ans = x-y; 
```

# youtube - 获取 Screenr 视频缩略图网址

> ID：12197522
> 
> 赞同：0
> 
> 时间：2012-08-30T13:04:16.797
> 
> 标签：youtube

在 youtube 中，您可以使用视频 ID 获取拇指图像的 url。例如 ：

视频：[http ://www.youtube.com/embed/J6bGnSEwdKY](http://www.youtube.com/embed/J6bGnSEwdKY)

视频的 ID 是 J6bGnSEwdKY

所以你会在[http://img.youtube.com/vi/J6bGnSEwdKY/1.jpg找到 img](http://img.youtube.com/vi/J6bGnSEwdKY/1.jpg)

我想为 screenr casts 使用相同的 url (http://www.screenr.com)

感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T15:15:14.690

我发现它 screenr 提供了一个 API：

[http://www.screenr.com/api/oembed.json?url=http://www.screenr.com/oXs](http://www.screenr.com/api/oembed.json?url=http://www.screenr.com/oXs)

# url - http://www 之后的新 HTML url 前缀

> ID：12197524
> 
> 赞同：0
> 
> 时间：2012-08-30T13:04:32.337
> 
> 标签：url, prefix

我最近注意到一些网站正在为网站实施前缀。

例如：www.data.cityofchicago.org 或 www.mobile.smashingmagazine.com

这样做有什么好处，它是如何实现的？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T13:18:29.800

子域通常用于利用浏览器的同源安全策略。这可以是为了性能，为了安全，或两者兼而有之。同源策略允许开发人员限制从子域访问存储在主主机名上的 cookie。

托管在子域上的媒体文件没有从主主机名托管的 HTTP cookie 标头开销，从而根据 cookie 的大小和请求的媒体文件数量来提高性能。

此外，站点可以链接到子域上的用户生成内容，以提供针对 XSS 攻击的一定程度的保护。由于无法访问 cookie，攻击者可以利用的东西更少。要保护网站，还有很多工作要做，但每一点都有帮助。

子域也可以让您在需要时共享 cookie，因此它们可以让您拥有多个独立的站点，所有站点都共享一个登录名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T13:18:01.920

这称为子域。正如@sam 在评论中所说，使用子域，您可以使用它在一个域上拥有多个站点。例如，stackexchange，包含堆栈溢出的站点网络，许多尚未流行到拥有自己的域名的问答站点，都有一个 stackexchange.com 的子域。看看[Gaming.stackexchange.com](http://gaming.stackexchange.com)和[apple.stackexchange.com](http://apple.stackexchange.com)

一些网站还使用子域将您定向到特定项目，例如特定用户。例如，如果您想访问我的名为“iambigblind”的博客，请访问[iambigblind.blogspot.com](http://iambigblind.blogspot.com)

通常这样做是为了让人们更容易找到某个页面。许多人发现记住子域比记住路径更容易，即使它们只是一个元素。

如果您使用具有 cpanel 的托管服务提供商托管网站，这里有一个教程向您展示如何设置子域：[http ://www.youtube.com/watch?v=lIP_sFESPhQ](http://www.youtube.com/watch?v=lIP_sFESPhQ)

如果您直接与 apache 服务器打交道，您应该研究如何使用虚拟主机：[http ://httpd.apache.org/docs/2.2/vhosts/](http://httpd.apache.org/docs/2.2/vhosts/)

# ruby-on-rails - Rails：如何将客人姓名添加到嵌套表单组件中？

> ID：12197525
> 
> 赞同：0
> 
> 时间：2012-08-30T13:04:31.873
> 
> 标签：ruby-on-rails, forms

这是我关于 SO 的第一个问题。哇！

就像在这个[railscast](http://railscasts.com/episodes/196-nested-model-form-revised)中一样，我能够创建一个调查模型和表单，它接受 Accept_nested_attributes_for 问题，问题模型接受_nested_attributes_for 答案。

如果用户已登录，那么我可以将他们的答案与他们的 user_id 相关联。但是，我想让客人也可以填写此表格。这将是降低参与门槛的好方法。

我希望来宾用户能够将他们的名字添加到表单中，以便其他用户可以区分尚未创建帐户的来宾。为此，我在答案模型中创建了一个 guest_name 字段。

*问题：如果他们在创建新答案后将*他们的名字添加到表单中，我如何将他们的名字与他们的答案相关联？

在surveys_controller.rb 中，我目前正在创建一个名为的变量`@responding_user_id`并将其设置为登录用户的ID，或者如果没有人登录，则将其设置为0：

```
@responding_user_id = (current_user ? current_user.id : 0) 
```

所以在里面`answer.html.erb`，我可以这样做将登录用户的 ID 与他/她的答案相关联：

```
<%= f.hidden_field :user_id, :value => @responding_user_id %> 
```

在调查中，用户会看到多个问题，他们可以通过单击名为 _question_fields.html.erb 的部分中的“添加答案”链接来为任何问题添加一个或多个答案：

```
<%= f.fields_for :answers do |builder| %>
<%= render 'answer_fields', f: builder %>
<% end %>
<%= link_to_add_fields "Add a New Response", f, :answers %> 
```

我想我可以强迫他们在添加答案之前输入他们的名字，然后通过 jQuery 更改隐藏的 user_id 字段，但这不是最佳的用户体验。

我遇到问题的唯一部分是将客人姓名分配给答案的隐藏 user_id 字段。这很困难的原因是隐藏字段的 HTML 是在用户单击“添加答案”时生成的，此时他们可能还没有输入他们的客人姓名。

也许这样做的唯一方法是使用上面提到的 jQuery？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T13:12:59.310

首先，您想在这里存储客人的姓名吗？你只有一个`user_id`领域。所以你必须改变你的模型。

# salesforce - 更新密码后重新注册用户

> ID：12197530
> 
> 赞同：1
> 
> 时间：2012-08-30T13:04:43.483
> 
> 标签：salesforce

我正在使用`oauth2`我的 salesforce 应用程序对用户进行身份验证。但是当用户更新他们的密码时，他们的密码`refresh_token`不再有效。`access_token`当他们在salesforce中更改密码时如何再次获取？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T15:48:09.903

访问令牌应在重置时通过电子邮件发送给用户。如果不是，您需要手动重置它——无法从 Salesforce 访问它。

要重置它，请转到`[Your Name] | Setup | My Personal Information | Reset Security Token`

# .net - 从 odbc 数据库中获取所有表和所有列

> ID：12197532
> 
> 赞同：7
> 
> 时间：2012-08-30T13:04:52.420
> 
> 标签：.net, odbc, db-schema

我想从 OdbcConnection 中获取所有“表”名称，并且对于所有“表”名称，我想接收所有列名。

所以我遇到了`OdbcConnection.GetSchema()`功能。我设法通过简单地使用来获取所有表名`connection.GetSchema("Tables")`。但现在我想获取这些表的列信息。我注意到`connection.GetSchema("Columns")`会给我列信息，但这只是从数据源中的随机/第一个（？）“表”中给出的（使用 Windows CSV 驱动程序），这对我没有多大帮助。

最具挑战性的部分是，它必须与任何（大多数）ODBC 驱动程序一起工作。我不知道将使用哪个底层数据源。

有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-30T13:09:39.937

列架构将返回所有表

```
cn.GetOleDbSchemaTable(OleDbSchemaGuid.Columns,
       new Object[] { null, null, null, null }); 
```

或者对于单个表

```
cn.GetOleDbSchemaTable(OleDbSchemaGuid.Columns,
       new Object[] { null, null, "table1", null }); 
```

相似地，

```
columns = cn.GetSchema("Columns"); 
```

返回所有表中的所有列。

更多信息：[架构限制](http://msdn.microsoft.com/en-us/library/cc716722.aspx)

编辑重新评论

```
 string cs = @"Driver={Microsoft Text Driver (*.txt; *.csv)};DBQ=z:\docs;";
    OdbcConnection cn = new OdbcConnection(cs);
    cn.Open();

    DataTable tables = cn.GetSchema("Tables");
    DataTable columns = cn.GetSchema("Columns");

    foreach (DataRow row in columns.Rows)
    {
        Console.WriteLine(row["COLUMN_NAME"].ToString());
        Console.WriteLine(row["TABLE_NAME"].ToString());
    }
    Console.Read(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-04T15:36:36.160

我知道现在帮助原始海报为时已晚，但如果它可以帮助其他任何人，我制作了一个迷你项目，它遍历所有 ODBC 表并为每个表创建一个类，其中列名作为字符串字段。您可以使用这些类来编写字符串查询。

[链接到项目](https://github.com/shanieMoonlight/Helpers)

# google-chrome - DNS 在 Windows 7 上不起作用

> ID：12197533
> 
> 赞同：0
> 
> 时间：2012-08-30T13:04:55.047
> 
> 标签：google-chrome, dns, ping, wireshark, nslookup

昨天，我的互联网停止工作。我无法通过 IE/Chrome 访问互联网，但 Firefox 仍然可以使用。我已经重置了 Winsock。通过名称 Ping 也不起作用，但使用 ip 仍然有效。对 google.com 之类的东西进行 NSLookup 确实可以提供正确的 IP，我仍然可以使用该 IP 进行浏览。最奇怪的是，Firefox 仍然有效。我检查了我的设置，没有配置代理。我还使用 Wireshark 进行了一些嗅探，当我 ping google.com 时，它确实向 8.8.8.8 发送了一个请求，并获得了具有正确 IP 的有效响应（就像 nslookup 一样）。但是，ping（和 IE/Chrome）仍然说它找不到主机（google.com）。

有谁知道这个问题？我已经搜索了两天，但我似乎无法在互联网上找到答案。我想确保在重新安装 Windows 7 之前我已经尝试了所有方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-19T10:15:59.170

我通过重新安装 Windows 来修复它。

黛博尔

# sql - 案例语句条件不起作用 SQL

> ID：12197534
> 
> 赞同：0
> 
> 时间：2012-08-30T13:04:57.293
> 
> 标签：sql

我对以下案例陈述有疑问。我想我可以通过两种方式做到这一点，但都不适合我。我有两列用于派生数据。

基本上，标准如下：

> 当 erpol.n_pol 为空时，使用 idv.n_pol，否则使用 erpol.n_pol。

如果它们都是空白使用，我想合并它`ks.n_pol`。确定何时使用的另一种方法`ks.n_pol`是前 3 个字母是否`dt.n_pol`是“OAC”，如您所见，我也尝试过。

任何帮助是极大的赞赏！

它现在按原样工作（已`substring`注释掉）我只需要能够添加“如果它们都是空白的，请使用 ks.n_pol ”。

```
 ,dt.i_pol as "Policy_Number"
 , (case
 when erpol.n_pol is null then idv.n_pol
/*when substr(dt.i_pol,1,3)= 'OAC' then ks.n_pol*/
else erpol.n_pol end) as "Policy_Name"
,0 as "Division_Number"
,d_dby as "Disability_Date"
,0 as "Months_Since_Disability_Date"
,0 as "First_Payment_Date"
,0 as "Last_Payment_Date"
,0 as "Last_Benefit_Paidto_Date"
,dys as "Days_Since_Last_Paidto"

from dt 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T13:11:56.813

您可以使用`COALESCE`

例如

```
COALESCE (erpol.n_pol,idv.n_pol, ks.n_pol) 
```

如果存在所有 3 为空的危险，则在末尾添加一个默认值

```
COALESCE (erpol.n_pol,idv.n_pol, ks.n_pol, 'default') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T13:17:06.990

**鉴于在这种特殊情况**下@podiluska 的解决方案要好得多，您的查询将失败，因为只要第一个字段为 NULL，就会选择第一个选项。

我不确定 中的执行顺序`CASE WHEN`，但通常最严格的条件首先出现，所以：

```
(CASE WHEN erpol.n_pol IS NULL AND idv.n_pol IS NULL THEN ks.n_pol
      WHEN erpol.n_pol IS NULL THEN idv.n_pol
      ELSE erpol.n_pol END) 
```

如果您确定这等同于两者`erpol`并且`idv`具有`NULL` `n_pol`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T13:10:56.753

> 它现在按原样工作（已注释掉子字符串）我只需要能够添加“如果它们都是空白的，请使用 ks.n_pol ”。

这应该有效：

```
ISNULL(ISNULL(erpol.n_pol, idv.n_pol), ks.n_pol) 
```

# android - 蓝牙未配对

> ID：12197535
> 
> 赞同：0
> 
> 时间：2012-08-30T13:04:58.537
> 
> 标签：android, bluetooth

我正在尝试通过蓝牙将一个 android 设备与另一个设备配对。但它没有配对，甚至没有得到任何错误。谁能告诉我我在这里做错了什么？

我有`searched for the bluetooth`设备并将**其显示到列表中**。现在我正在**尝试将所选设备名称与我的设备配对**。

**但它没有得到支付，它打开一个对话框以获取密码，然后它被关闭。**任何帮助，将不胜感激。这是我的代码：

```
 @Override
public void onItemClick(AdapterView<?> parent, View view,int position, long id) 
{
Log.i("Log", "ListItem is clicked at :"+position);
posn = position;
String str = (String) listViewDetected.getItemAtPosition(position);
Log.i("Log", "ListItem is :"+str);
bluetoothDevice=arrayListBluetoothDevices.get(position);
Intent intent = new Intent("android.bluetooth.device.action.PAIRING_REQUEST");              intent.putExtra("android.bluetooth.device.extra.DEVICE",bluetoothDevice);       intent.putExtra("android.bluetooth.device.extra.PAIRING_VARIANT",0);
startActivityForResult(intent, 1);
} 
```

我已经在清单文件中声明了权限。

```
 <uses-permission android:name="android.permission.BLUETOOTH_ADMIN" />
    <uses-permission android:name="android.permission.BLUETOOTH" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T12:32:10.403

这里给你一个答案：

您可能会遇到一些蓝牙芯片错误。例如，您尝试与该设备配对一次，但由于某种原因失败，然后芯片将始终拒绝修复 - 尽管它不应该。在我使用不同的蓝牙 Android 手机时发生了很多次......

你可以做什么：重置蓝牙芯片。

重置蓝牙芯片不等于重置手机！虽然Android可能会被重置，但芯片会愉快地继续其正常的生命周期，并且在重启后错误会再次出现。

为确保蓝牙芯片已重置，请取出电池！在平板电脑上，只需清空电池并重新启动。

如果**还是**不行，就恢复出厂设置吧！

蓝牙是一项脆弱的技术，由于其规格的模糊性和广泛性以及芯片制造商的“不关心”态度，容易出现错误......

# wso2 - Wso2 小工具服务器门户自定义

> ID：12197542
> 
> 赞同：1
> 
> 时间：2012-08-30T13:05:08.753
> 
> 标签：wso2

我一直在广泛研究 WSO2 应用程序和小工具服务器。在阅读 Gadget 服务器信息和观看演示文稿的过程中，我发现 GS 的门户端可以设置主题，这很棒，但我一直在寻找定制门户的实际设计，这被证明更加困难。

能够为门户上的选项卡添加布局会很棒，并且能够添加或更改门户的整个标题（除了可以使用 CSS 更改主题之外）。

任何人都对其中任何一个是否可能有任何指示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:58:18.183

上述链接 [1] 将有助于更改每个 WSO2 产品的管理控制台视图的主题。

如果您正在寻找自定义 WSO2 Gadget Server 1.x 的门户视图，使用 GS 1.x 版本是正确的，尽管您可以像 [2] 中更改门户主题，但很难进行更多的 UI 自定义，例如将布局添加到选项卡等。

但是随着名为 User Engagement Server 的新 WSO2 产品的即将发布 [已更名为 WSO2 Gadget Server 产品，具有新的丰富功能集并且已经发布了它的第一个里程碑]，您可以非常轻松地满足您的要求。

谢谢;

[1] [http://wso2.org/library/knowledge-base/2010/11/customize-ui-theming-wso2-carbon-based-products](http://wso2.org/library/knowledge-base/2010/11/customize-ui-theming-wso2-carbon-based-products)

[2] [http://docs.wso2.org/wiki/display/GS140/Changing+Portal+Theme](http://docs.wso2.org/wiki/display/GS140/Changing+Portal+Theme)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T17:11:21.533

我也一直在研究这个，我发现 WSO2 的 Lahiru Gunathilake 的以下文章 [1] 非常有用。希望这可以帮助

[1] [http://wso2.org/library/knowledge-base/2010/11/customize-ui-theming-wso2-carbon-based-products](http://wso2.org/library/knowledge-base/2010/11/customize-ui-theming-wso2-carbon-based-products)

# mongodb - mongodb中是否存在程序

> ID：12197546
> 
> 赞同：0
> 
> 时间：2012-08-30T13:05:25.443
> 
> 标签：mongodb, mongodb-java, mongodb-query

我是 mongodb (java) 的新手。

我需要使用类似于关系数据库中的过程的东西来执行命令列表（关系查询）。

在mongodb中可以吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T13:16:32.390

MongoDB 没有真正意义上的存储过程。它具有服务器端功能，但是这些功能：

*   不要使用分片
*   很慢
*   必须评估（邪恶博士）
*   仅真正设计用于 Map Reduces，以防止您必须在许多地方存放多个通用代码副本。

但是，您可以使用`$where`或`eval`中的实际函数名称来实现它`system.js`。但是这些实际上并没有运行“服务器端”。

在你的应用程序中使用`exec`type 命令来调用 shell 也不是一个好主意。您在 shell 中运行的脚本文件与您自己的应用程序一样多是客户端，所以这毫无意义。

MongoDB 也不允许触发器，但它们在 JIRA 中：[https](https://jira.mongodb.org/browse/SERVER-124) ://jira.mongodb.org/browse/SERVER-124但未安排。您需要在编码中的客户端放置触发器。

> 关系查询

NoSQL 不是关系型的。您可能想了解如何为 MongoDB 设计适当的模式，这是一个起点：[http](http://www.mongodb.org/display/DOCS/Schema+Design) ://www.mongodb.org/display/DOCS/Schema+Design 。这将教你 MongoDB 的精髓以及如何选择正确的结构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T13:08:54.787

您可以创建服务器端 javascript 函数，是的。但我建议不要这样做，因为它会

1.  很慢；
2.  不受版本控制。

阅读更多：[http ://www.mongodb.org/display/DOCS/Server-side+Code+Execution#Server-sideCodeExecution-Storingfunctionsserverside](http://www.mongodb.org/display/DOCS/Server-side+Code+Execution#Server-sideCodeExecution-Storingfunctionsserverside)

# php - Zend Framework 2 上所有模块的项目命名空间

> ID：12197550
> 
> 赞同：1
> 
> 时间：2012-08-30T13:05:50.063
> 
> 标签：php, zend-framework2

我正在构建 ZF2 应用程序。我正在考虑在项目命名空间下完成我的所有模块。例子：

```
ProjectName\ModuleName\Model\ModelName
ProjectName\ModuleName\Controller\ControllerName
ProjectName\ModuleName\Form\FormName
etc... 
```

如果在 ZF2 中是可能的，或者我在想一些在一些大黑客之前不可能的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T13:55:23.957

是的，我认为可能。它称为[PSR-0](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md)，由 ZF2 通过[Composer](http://getcomposer.org/)支持。
这是一个简单的`composer.json`文件：

```
{
    "name": "projectname/modulename",
    "autoload": {
        "psr-0": {
            "ProjectName\ModuleName": "src/"
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T00:36:13.813

这是非常可能和简单的。我自己做。

在您的`application.config.php`注册中，您的模块如下所示：

```
'modules' => array(
    'ProjectName\MyModule'        
), 
```

然后在您的模块中，有一个 PSR-0 目录结构，如 @Florent 所示。为了更简单，作曲家自动加载器非常好。

# php - mysqli 等效于 is_resource()

> ID：12197552
> 
> 赞同：6
> 
> 时间：2012-08-30T13:05:53.337
> 
> 标签：php, mysql, mysqli

我正在*mysql*和*mysqli*中编写数据库包装器。

要通过`fetch_object()`我编写的方法获取数据：

```
public function fetch($mixed)
{
    if (is_resource($mixed))
    {
        return mysql_fetch_object($mixed);
    }
    elseif (!empty($mixed))
    {
        $result = $this->query($mixed);
        return mysql_fetch_object($result);
    }
    elseif (is_resource($this->result))
    {
        return mysql_fetch_object($this->result);
    }

    return false;
} 
```

现在我听说这`is_resource()`对 mysqli 来说不是一个好的解决方案。

我还能如何检查它是*字符串*还是*mysqli_result*？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-30T13:13:34.387

> 我还能如何检查它是字符串还是 mysqli_result？

```
if (is_string($result)) { 
  // Result is a string
}

if ($result instanceof mysqli_result) {
  // Result is a mysqli_result object
} 
```

# javascript - 原型 JS 查找跨度并替换文本

> ID：12197555
> 
> 赞同：0
> 
> 时间：2012-08-30T13:05:54.407
> 
> 标签：javascript, magento, prototypejs

我在这个原型上苦苦挣扎。基本上我使用的是 Magentogo，它使用原型框架，在我的产品页面上有一个尺寸指南的链接，我需要做的是为此创建一个弹出模式，以便用户留在页面上。

```
<span class="widget widget-cms-link"><a href="/size-guide" title="Size Guide">
  <span>Size Guide</span>
 </a>
</span> 
```

我需要做的是找到跨度“widget widget-cms-link”，然后用我可以用来激活模式弹出窗口的按钮替换链接。我可以在 JQuery 中做到这一点，但它与原型冲突。请问有谁有过Prototype的经验吗？

干杯

Ĵ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T13:38:06.883

这会吗？

```
​$$('.widget.widget-cms-link').each(function(el) {
    el.down('a').replace(new Element('button', {
        'class' : 'widget-button'        
    }).observe('click', function() {
        alert('you clicked on me');
    }).update('Your New Button'));
})​;​ 
```

请记住，因为`$$`返回一个`Enumerable`，它可以返回倍数，因此我使用的是`each`. 如果您只想引用一个链接，请给它一个 id 或确保`widget-cms-link`页面上只有一个 s。

[在这里摆弄](http://jsfiddle.net/epoch/LP6p4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T11:45:23.900

如果您比原型更熟悉 jQuery，那么您可以尝试使用 noConflict 模式并运行您的 jQuery 函数。

只需在 jQuery 文件末尾添加 jQuery.noConflict() （或将此代码插入到单独的文件中，并将其包含在主 jQuery 文件之后）。

完成后，你应该可以使用 jQuery 了，只需要记住在`jQuery`你的 jQuery 函数中使用关键字，而不是`$`.

# ruby-on-rails - 在 memcache 中按 Namespace 对数据进行分组

> ID：12197557
> 
> 赞同：0
> 
> 时间：2012-08-30T13:06:06.463
> 
> 标签：ruby-on-rails, memcached, dalli

在我们的一个应用程序中，我们希望使用 dalli 客户端在 Memcache 服务器中存储不同类型的对象。

一种类型的数据是存储在用户注销时需要刷新的 Rails 会话值。另一组数据是我们需要每 15 分钟刷新一次的一些对象。

我们可以使用以下代码将 Rails 会话存储在 Memcache 服务器中 Rails.application.config.session_store ActionDispatch::Session::CacheStore, :expire_after => 20.minutes

但是如果我们尝试在 15 分钟后刷新我们的 Memcache 数据，我的会话也会变得清晰。是否可以根据命名空间分离和清除对象。

问候，

尼迪·萨瓦亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T07:24:50.503

根据从 dalli gem github tracker 收到的响应，无法按命名空间进行分组。

# javascript - 选择选项添加或删除事件

> ID：12197561
> 
> 赞同：1
> 
> 时间：2012-08-30T13:06:22.020
> 
> 标签：javascript, jquery

如何检测是否在 SELECT 中添加或删除了 OPTION？

我知道这一点：[jquery event for when <option>s are added or removed from a <select>](https://stackoverflow.com/questions/8124919/jquery-event-for-when-options-are-added-or-removed-from-a-select)

这个选择框由另一个我无法放入自己的函数调用的 js 控制。

我可以以某种方式检测到该选项已被另一个 js 删除吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:50:37.813

您可以尝试为给定的选择元素调用检查函数，使用超时定期检查。

```
function periodicallyCheckSelect(){
      var jSelect = $(this)
         ,opts = this.options 
         ,prevLen = +jSelect.attr('data-previousLen') || opts.length
         ,isEq = false
         ,isAdded = false
         ,isRemoved = false
         ,state = '';
      isEq = opts.length === prevLen;
      isAdded = opts.length > prevLen;
      isRemoved = opts.length < prevLen;
      state =  isEq ? 'no change' 
               : isAdded ? opts.length-prevLen + ' option(s) added' 
               : prevLen-opts.length+' option(s) removed';
      jSelect.attr('data-previousLen',opts.length);
      log(state+'<br>');
} 
```

这是一个玩弄这个想法的[jsfiddle](http://jsfiddle.net/KooiInc/c8VMh/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T13:48:50.877

How about patching the append function on the element? Example:

```
var obj = document.getElementById('#select');
obj.__appendChild = obj.appendChild;
obj.appendChild = function(){
    console.log('new option added');
    obj.__appendChild.apply(obj, arguments); 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T13:12:41.683

尝试查看[Mutation 事件](https://developer.mozilla.org/en-US/docs/DOM/Mutation_events)

# template-engine - 在dust.js中，什么是流接口？

> ID：12197562
> 
> 赞同：5
> 
> 时间：2012-08-30T13:06:22.463
> 
> 标签：template-engine, dust.js

我一直在使用带有回调接口的dust.js，我对它很满意。现在我想了解更多有关 Streaming Interface 的信息。

我已经在[这里](http://akdubya.github.com/dustjs/)和[这里查看](https://github.com/linkedin/dustjs/wiki/)过文档，但这个概念却让我无法理解。

我想我的问题是：

1.  流媒体模板是什么意思？对我来说，听起来我可以使用它来设置一个对象，当数据被推送到该对象时，它将通过针对模板呈现该数据来做出响应。

2.  在什么情况下我会使用 Streaming 而不是回调接口？

3.  有没有可以帮助我学习的代码示例？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T02:41:43.697

在回调接口中，您只能在灰尘完成渲染整个模板后使用渲染的模板 - 通过提供回调 - 通常将渲染的模板插入到 DOM 中。

在流接口中，您可以更好地控制渲染过程的几乎每个部分：如何将渲染的块放入输出流，何时需要渲染页面的某些部分等。

当您使用回调接口时，回调接口有一个“out”属性，它始终附加到该属性，它最终将作为您提供给它的回调中的第二个参数提供给您。在流接口中，当一个新处理的块可用时，它会发出一个名为“数据”的事件，并将其留给您处理数据。

因此，假设您有一个非常大的模板要渲染，您可以将模板分成块，当完成时，将发出一个“数据”事件，并定义一个处理程序将该块放入 DOM。换句话说，您不必等待整个渲染过程完成才能开始在您的页面上显示内容。

例如，如果您想一次渲染应用程序的多个页面，但只想向用户显示一个页面 - 例如，如果您使用 jquerymobile - 那么您将使用流式接口来帮助获得第一个页面，这可能很有用尽可能快地向用户发送页面 - 同时异步呈现其余部分。希望这可以帮助

# xcode - 需要 Xcode git Beanstalk 身份验证

> ID：12197563
> 
> 赞同：1
> 
> 时间：2012-08-30T13:06:22.590
> 
> 标签：xcode, git, amazon-elastic-beanstalk, beanstalk-svn

从后期 Xcode 4.3.x 到 4.4+ 之后，Beanstalkapp.com 提供的 git 服务不再适用于 Xcode。Xcode 不会列出远程仓库，因此无法推送给它们。我刚刚注意到，当尝试设置一个新的存储库时，它现在显示“需要身份验证”，这比我之前遇到的失败更有帮助。Git 到 beanstalk 从命令行运行得非常好，只是 Xcode 中基于远程的操作失败了。Beanstalk 使用 SSH 密钥对用户进行身份验证，该密钥已根据命令行成功设置并正常工作。它*曾经*在许多版本的 Xcode 中工作。

有没有人对如何解决这个问题有任何想法？我认为这是与 Xcode 中嵌入的 git 的兼容性问题，但没有更多的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T19:58:06.583

我最终通过使用另一个 git 客户端（塔）奇怪地修改了 repo 配置来解决这个问题。推送 URL 语法必须稍微修改，这没有任何意义 a) 为什么它会突然停止工作，b) 为什么需要修改它，c) 为什么我不能在 Xcode 中正确修改它，d) 为什么它从命令行仍然可以正常工作...将其归结为侥幸可能与我的密码或类似的晦涩难懂有关。很抱歉手头没有固定的语法，但它隐藏在配置中的某个地方，我似乎无法弄清楚如何通过 xcode 或塔来获取它。

# c# - C#和VB.Net字符串比较的区别

> ID：12197569
> 
> 赞同：4
> 
> 时间：2012-08-30T13:06:42.620
> 
> 标签：c#, vb.net, string-comparison

我实际上是在尝试回答[这个问题](https://stackoverflow.com/questions/12194855/implementing-string-comparer-in-custom-linq-provider-in-vb)，但由于这涉及到很多问题，而且不太可能很快得到很好的回应，所以我将尝试自己制定实施方案。根本问题似乎是我遵循的 C# 示例没有直接转换为 VB。

在 lambda 中检查字符串比较`BinaryExpression`时，VB 报告`Expression.Method.DeclaringType`方法`Microsoft.VisualBasic.CompilerServices.Operators`名称为`CompareString`. 这显然是 VB 特有的。

表达式只是`x.Content_Type <> ""`在返回时比较并调用 ToString `{(CompareString(x.Content_Type, "", False) != 0)}`- 这看起来很合乎逻辑（CompareString [docs here](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.compilerservices.operators.comparestring.aspx)）。

有人可以向我解释 VB 和 C# 如何（甚至更好地解释为什么）以不同的方式处理字符串比较。

我想如果我能得到答案，我应该能够找到另一个问题的解决方案。

**编辑：** 为了澄清，我正在实现一个自定义 LINQ 提供程序，它正在检查以下`Where`调用：

`Query.Where(function(x) x.Content_Type <> "")`

或 C# 等价物...

`query.Where(x=>x.Content_Type!="");`

据我所知，2应该在功能上相同

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-30T13:28:34.663

`Option Compare`VB.NET从以前版本的 Visual Basic继承了该语句。为此，VB.NET 中的所有字符串比较表达式都被转换为一个帮助函数，该函数可以找出在编写语句的特定源代码文件中选择的选项比较值是什么。

Operators.CompareString(string, string, bool) 方法就是那个辅助函数。最后一个参数名为“TextCompare”，如果 Option Compare Text 有效，VB.NET 编译器自动传递 True，如果 Option Compare Binary 有效，则自动传递 False。

C# 没有这样的东西。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-30T13:32:16.577

反编译`CompareString`给出

```
public static int CompareString(string Left, string Right, bool TextCompare)
{
  if (Left == Right)
    return 0;
  if (Left == null)
    return Right.Length == 0 ? 0 : -1;
  else if (Right == null)
  {
    return Left.Length == 0 ? 0 : 1;
  }
  else
  {
    int num = !TextCompare 
       ? string.CompareOrdinal(Left, Right) 
       : Utils.GetCultureInfo().CompareInfo
              .Compare(Left, Right, CompareOptions.IgnoreCase 
                                  | CompareOptions.IgnoreKanaType 
                                  | CompareOptions.IgnoreWidth);
    if (num == 0)
      return 0;
    return num > 0 ? 1 : -1;
  }
} 
```

从中可以看出，围绕`null`（“`Nothing`在Visual Basic中”，正如副歌所说）处理有自定义逻辑，更重要的是，模式切换参数，它从有效的设置中`TextCompare`获取其值。`Option Compare`

也许显式使用on*方法*`string`而不是比较运算符*会*帮助您。

至于“为什么”，嗯，VB（经典）在文化上始终是一种更“做明智之事”的语言，而不是 C++ / Win32 的“完全按照我告诉你的，仅此而已”的哲学世界。VB.NET 和 C# 更接近，但仍然存在这样的差异。

# php - (.*) 和 (.*?) 之间的区别

> ID：12197574
> 
> 赞同：2
> 
> 时间：2012-08-30T13:06:53.260
> 
> 标签：php, regex

> **可能重复：**
> [正则表达式中的懒惰和贪婪是什么意思？](https://stackoverflow.com/questions/2301285/what-does-lazy-and-greedy-means-in-regexp)

我知道在正则表达式中 *、+ 或 ? 之后的问号 意味着不贪心，但如果我想匹配任何字符，使用 (.*) 或 (.*?) 有什么区别？

谢谢。

编辑：就我而言，我想检查一个 URL。之间有什么区别

```
http://site\.net/(.*?)\.html 
```

和

```
http://site\.net/(.*)\.html 
```

?

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-30T13:09:19.643

`.*`是贪婪的，这意味着它将忽略正则表达式的下一个分隔符，直到它本身没有被满足，除非后面的正则表达式`.*`反对目标字符串的结尾。

`.*?`*是不贪婪的，这意味着如果*满足下一个，它将继续到您的正则表达式的下一个分隔符。即使它本身仍然适用，它也会继续到下一个分隔符。

例子：

`/(.*) dog/`将匹配“我认为你的狗咬了我的狗”，第 1 组将是“我认为你的狗咬了我的”。

`/(.*?) dog/`将匹配“我认为你的狗咬了我的狗”，第 1 组将是“我认为你的”。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-30T13:10:41.377

如果`(.*)`正则表达式中没有任何内容，那么绝对没有区别。但是，如果有*以下*任何内容，那么就会有所不同：

```
"I went to the shops and then I went home"

/(.*) went/  => "[I went to the shops and then I] went"
/(.*?) went/ => "[I] went" 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-30T13:29:04.567

假设你有这个网址：

```
http://example.net/some/wierd/path.html?returnTo=somedoc.html 
```

贪婪将匹配整行：

```
http://example.net/some/wierd/path.html?returnTo=somedoc.html 
```

而非贪婪回报：

```
http://example.net/some/wierd/path.html 
```

[http://refiddle.com/](http://refiddle.com/)非常适合尝试正则表达式

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-30T13:13:03.193

正如您已经知道不贪婪的行为是，我不会再解释了。

这取决于**之后**发生的`(.*?)`事情 - 这就是不贪婪的行为。

有趣的是，这意味着表单中的正则表达式`/(.*?)/`没有多大意义——因为如果你匹配所有的东西，你怎么能偷懒呢？

如果您尝试在例如[Regexr](http://regexr.com?2u0fj)中创建这个正则表达式，它甚至不会编译，因为它是无稽之谈。

只有当你把一些东西放在组后面时，你的正则表达式才会有意义。我不确定是否所有正则引擎都与 Regexr 在这里做同样的事情并拒绝接受该正则表达式。

所以，如果你想匹配任何东西直到某个字符，你必须把那个特定的字符放在**你**的 ungreedy-anything-group 之后。这样，该特定字符之前的所有内容都会匹配。

得出结论；**如果**在组之后没有任何东西，它没有任何区别。

# matlab - fprintf 没有像它显示的那样写入文件 - matlab

> ID：12197579
> 
> 赞同：3
> 
> 时间：2012-08-30T13:07:30.477
> 
> 标签：matlab, file-io, printf

下面的代码在 matlab 命令面板上显示得很好

```
fprintf('%f\n%f\n%f\n',MDR,TER,FAR); 
```

每个变量都显示为新行

但是当我尝试这种方式并通过记事本检查新制作的文本文件时，我看不到任何新行

```
fileID=fopen('my_file.txt','w');
fprintf(fileID,'%f\n%f\n%f\n',MDR,TER,FAR);
fclose(fileID); 
```

可能是什么问题？在文本文件中，所有变量都被写入，没有任何新行或空格

谢谢你

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T13:16:40.787

从文件名中的反斜杠开始，我假设您在 Windows 平台上工作。Unix 和 Windows 使用不同的换行符。Windows 使用`\r\n`作为新行，而 Linux 和 OSX 使用`\n`. 另一方面，Matlab 在命令面板中使用 Unix 新行。

你可能想用它`dlmwrite`来写你的文本文件。这通常比`fprintf`.

例子：

```
dlmwrite('my_file.txt',[MDR;TER;FAR],'newline','pc') 
```

重要的部分是输入`[MDR;TER;FAR]`是一个矩阵。每一行都将在一个新行上，并且列由标准分隔符分隔`,`。

# html - 使用 css 用户选择单击 div 时从 contenteditable 中丢失选定的文本：无；

> ID：12197580
> 
> 赞同：1
> 
> 时间：2012-08-30T13:07:30.303
> 
> 标签：html, css, google-chrome, contenteditable

我正在开发一个 JavaScript 富文本编辑器。我使用的是带有 css 属性的 div 而不是按钮`user-select: none`。这在 Firefox 中运行良好，但**问题出在 Google Chrome**上。

当我用 css 点击 div 时`user-select: none`，我会从 contenteditable div 中丢失选定的文本。Html 和 css 如下所示

```
<div id="editor">
   <div id="controls">
      <div id="button-bold"></div>
   </div>
   <div id="rte" contenteditable></div>
</div> 
```

CSS

```
#button-bold
{
    width: 20px;
    height: 20px;
    padding: 2px;
    float: left;
    border: 1px solid #E7E7E5;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}
#rte {
    width: 100%;
    min-height: 400px;
    margin: 5px;
    outline: none;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-11T16:23:40.783

Use buttons, intead of div or span for making clickable links to change style.

And then use document.execcommand('forecolor',false,'#000000');

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T23:07:01.953

我有类似的设置，以下解决方案在 Chrome 中运行良好： [如何使用 jQuery 禁用文本选择？](https://stackoverflow.com/questions/2700000/how-to-disable-text-selection-using-jquery)

答案是为“selectstart”事件添加一个处理程序。

# asp.net - 在详细信息视图的更新、插入和只读模式下使用相同的配色方案

> ID：12197583
> 
> 赞同：0
> 
> 时间：2012-08-30T13:07:44.480
> 
> 标签：asp.net, insert, detailsview, mode, theming

在 asp.net Detailsview 中有几个预定义的模板，但这些模板会根据详细信息视图模式而变化。就像细节视图有更新模式一样，它会有不同的配色方案（尽管模板是相同的）。问题：我想在更新、插入和只读模式的细节视图中应用相同的配色方案，请帮助一些人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:20:18.227

您可能已经在**DetailsView中给出了****EditRowStyle** ，只需对其进行评论并检查即可。

# android - 布局大小在android中动态增加和减少

> ID：12197584
> 
> 赞同：-1
> 
> 时间：2012-08-30T13:07:47.867
> 
> 标签：android, view, textview

我想动态显示文本，就像![在此处输入图像描述](../Images/f326be2280057aca192474cdc72fa738.png)我想要的是显示一些文本，然后单击按钮“查看>”文本会显示在一个框中。

我尝试的是使用 2 个文本视图作为

```
<LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <RelativeLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:orientation="vertical" >

            <TextView
                android:id="@+id/textView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:layout_marginBottom="10dip"
                android:layout_marginLeft="10dip"
                android:layout_marginRight="10dip"
                android:layout_marginTop="2dip"
                android:text="some text"
                                    />

            <Button
                android:id="@+id/button1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@null"
                android:text="view >>"
                android:textSize="9sp" />

            <TextView
                android:id="@+id/textView2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:layout_marginBottom="10dip"
                android:layout_marginLeft="10dip"
                android:layout_marginRight="10dip"
                android:layout_marginTop="2dip"
                android:text=" yes"
                                  android:textSize="11.0sp"
                android:visibility="invisible" />
        </RelativeLayout> 
```

代码：

```
public void onClick(View v)
 {
        switch(v.getId())
        {
        case R.id.button1:
            tv1.setVisibility(View.VISIBLE);
            break;
        }
} 
```

发生的事情是第二个文本视图在第一个文本视图上显示文本。那么是否可以显示这样的文本？否则应该怎么做才能克服混乱的文本视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T13:25:17.393

你的结果是正常的。实际上，您已经使用了 RelativeLayout 并且将两个文本都放在了同一个位置（带有边距属性）。所以你可以使用 LinearLayout 而不是Relative Layout，或者你可以通过修改margin值来改变第二个textView的位置，或者使用`android:layout_below`.

# ubuntu - 如何配置 /var/lib/dpkg/info/ .shlibs

> ID：12197589
> 
> 赞同：2
> 
> 时间：2012-08-30T13:08:01.513
> 
> 标签：ubuntu, deb

我为 mongo c++ 驱动程序创建了一个 debian 包（参见[https://launchpad.net/~28msec/+archive/utils/+sourcepub/2616490/+listing-archive-extra](https://launchpad.net/~28msec/+archive/utils/+sourcepub/2616490/+listing-archive-extra)）。但是包中缺少一个非常重要的文件。位于 /var/lib/dpkg/info/ 的 shlibs 文件。现在，我疯狂地用谷歌搜索，想知道如何告诉 debian 打包机制来创建这个 shlibs 文件。但我做不到。有人知道这个文件需要如何配置吗？

我检查了其他包。例如在 libarchive 中，执行命令 dh_makeshlibs -v 时，我看到以下内容： rm -f debian/libarchive-dev/DEBIAN/shlibs rm -f debian/libarchive12/DEBIAN/shlibs echo 'libarchive 12 libarchive12' >>debian/libarchive12 /DEBIAN/shlibs echo "# 由 dh_makeshlibs 自动添加">> debian/libarchive12.postinst.debhelper sed "" /usr/share/debhelper/autoscripts/postinst-makeshlibs >> debian/libarchive12.postinst.debhelper echo '# 自动结束添加部分' >> debian/libarchive12.postinst.debhelper echo "# 由 dh_makeshlibs 自动添加"> debian/libarchive12.postrm.debhelper.new sed "" /usr/share/debhelper/autoscripts/postrm-makeshlibs >> debian/libarchive12 .postrm.debhelper。

所有这些命令来自哪里？我没看到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T23:41:14.470

`dh_makeshlibs`debhelper 工具应该会根据`binary-arch`规则为您处理这些问题。您正在使用 debhelper，对吗？

# mysql - Rails：从 tinyint 读取整数

> ID：12197591
> 
> 赞同：4
> 
> 时间：2012-08-30T13:08:03.610
> 
> 标签：mysql, ruby-on-rails, ruby, database, ruby-on-rails-3

我有一个 RoR + MySQL 设置。在数据库中有一个 Tinyint 字段*t*。当我从 Rails 读取*t*的值时，我得到*true*或*false*，因为 Rails 将 Tinyint 字段解释为布尔值。到现在为止还挺好。

如何从 Rails 读取这个字段*t*作为实际整数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T13:30:49.060

[http://apidock.com/rails/ActiveRecord/AttributeMethods/BeforeTypeCast/attributes_before_type_cast](http://apidock.com/rails/ActiveRecord/AttributeMethods/BeforeTypeCast/attributes_before_type_cast)

例如：

```
Model.first.attributes_before_type_cast['your_boolean_field'] 
```

这取决于您的数据库将返回什么值，在 postgesql 中它是 'f' 或 't'

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T19:56:38.137

以@sumskyi 的响应为基础，如果您始终将此字段作为常规整数访问，您可以覆盖模型的内置方法并避免重复运动伤害：

```
class GroceryStore < ActiveRecord::Base
  # rating is a TINYINT column
  # we just redefine the method here to return the value cast how we want it
  def rating
    self.attributes_before_type_cast['rating'].to_i
  end
end 
```

现在，如果你打电话`grocerystore.rating`，你会得到一个整数而不是布尔值。

# javascript - jQuery：具有类但不具有 $(this) 的元素

> ID：12197592
> 
> 赞同：2
> 
> 时间：2012-08-30T13:08:09.257
> 
> 标签：javascript, jquery, jquery-selectors

我有一个带有图片的画廊，鼠标悬停在一张图片上我想对所有其他图片做某事（所以所有图片都有类`.picture`，除了悬停的一个（`$(this)`）。

我尝试将一个类应用于该类的所有图片，`.picture`然后在图片悬停时删除这个添加的类，然后使用添加的类（然后包含正确的图片），但它工作不顺利......

有没有更清洁和更好的方法来做到这一点？

例子：

```
pic 1 -> do sth with this
pic 2 -> do sth with this
pic 3 -> gets hovered, don't do anything with this, exclude it from the selection! 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T13:09:12.283

使用`.not`.

```
$('.picture').not(this); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T13:09:34.397

```
var img = $('.picture');
img.on('hover', function() {
    img.not(this).each(function() {
       /* do Something with $(this); */
    })
}); 
```

# c# - 读取作为单个字节发送的 4 字节数组

> ID：12197598
> 
> 赞同：0
> 
> 时间：2012-08-30T13:08:22.610
> 
> 标签：c#, serial-port, bytearray, byte, binarystream

我正在用 C# 和 .net 2.0 编写这个

我被一个设备作为单个字节发送一个 4 字节数组。

我目前通过以下方式阅读此内容

```
while(m_ReadThreadisRunning)
{       
  if(canRead)
  {
    lock (m_Serialport)
    {
      try
      {
        //Check if data read needs reset
        if(DataRead[3] != 0)
        {
          m_ReadBuffer.Add(DataRead);                       
          DataRead = new byte[4];   
          ReadCounter = 0;
        }

        int ByteRead = m_Serialport.ReadByte();     
        Debug.Log("Byte : " + ByteRead);

        try
        {
          DataRead[ReadCounter] = ConvertIntToByte(ByteRead);
        }
        catch(Exception e)
        {
          Debug.Log("Error when setting element in DataRead");
        }
        finally
        {
          if(ByteRead != 0)
            ReadCounter ++; 
        }
      }
      catch(TimeoutException e)
      {
      }
      catch(Exception e)
      {
          ReadCounter = 0;  
      }
    }
  }
} 
```

问题是多个设备可以同时向我发送信息，这会导致一些数据最终出现在错误的数组中。

发送给我的字节数组总是以十六进制“2f”开头，以校验和结尾。

任何关于我可以做些什么来处理这个问题的建议将不胜感激。

[编辑]

抱歉，我知道我会错过重要信息。所有设备都连接到同一个端口。字节数组按以下顺序排列：- '2f' 'Device id' 'msg' 'Check-sum'。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T12:24:52.603

我将忽略根本问题。

我无法控制硬件，因为这方面是外包的。

他包含一个命令，我可以在其中检查状态，所以当我收到不可靠的数组时，我现在可以轮询所有设备的状态。但是当所有设备都开始向我发送他们的状态时，我更有可能得到混乱的信息。

我只是丢弃不可靠的数据并希望最好。

然而，我已经开始在业余时间构建简单的设备，这样我也可以涵盖项目的硬件部分。

我认为最好的选择是使用某种 HUB 并连接所有设备？

欢迎任何建议或注释。

# mysql - MySQL-从同一个表中获取多条记录

> ID：12197599
> 
> 赞同：0
> 
> 时间：2012-08-30T13:08:30.080
> 
> 标签：mysql

首先，抱歉标题不好。我有点着急，想不出更好的。

现在我有一张这样的桌子 -

```
category_id    name        parent_category_id
______________________________________
1              country     0
2              state       1
3              city        2
4              block       3 
```

我希望结果为 -

```
Name        ParentCategory
___________________________
country     NULL
state       country
city        state
block       city 
```

现在的逻辑是 ParentCategory 是 category_id 等于 parent_category_id 的类别名称。（不确定我是否解释得当）我尝试了很多为此编写查询，但不知道我该怎么做。

非常感激任何的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T13:11:31.140

你想要一个表与自身的 JOIN：

```
SELECT child.name, parent.name FROM tbl AS child
    LEFT JOIN tbl AS parent
    ON (child.parent_category__id = parent.category_id); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T13:11:34.613

```
SELECT 
  child.name AS Name,
  parent.name AS ParentCategory
FROM
  yourTableName AS child
  LEFT JOIN yourTableName AS parent ON parent.category_id=child.parent_category_id 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T13:15:16.157

```
SELECT   c.name  Name,
         p.name  ParentCategory
FROM  t  c
LEFT JOIN t  p 
ON p.category_id=c.parent_category_id; 
```

# [*看到这个 SQLFiddle*](http://sqlfiddle.com/#!2/f2983/8)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-30T13:11:44.930

```
SELECT t1.name, t2.name FROM table as t1 LEFT JOIN table as t2 ON t1.parent_category_id=t2.category_id 
```

# python - 如何在 Python 中使用正则表达式检索值？

> ID：12197600
> 
> 赞同：-3
> 
> 时间：2012-08-30T13:08:36.567
> 
> 标签：python, html, regex, python-3.x, python-2.7

我写了这样的代码：

```
print re.findall(r'(<td width="[0-9]+[%]?" align="(.+)">|<td align="(.+)"> width="[0-9]+[%]?")([ \n\t\r]*)([0-9,]+\.[0-9]+)([ \n\t\r]*)([&]?[a-zA-Z]+[;]?)([ \n\t\r]*)<span class="(.+)">',r.text,re.MULTILINE) 
```

得到这条线：

```
<td width="47%" align="left">556.348&nbsp;<span class="uccResCde"> 
```

我想要值 556.348。如何使用[正则表达式](http://en.wikipedia.org/wiki/Regular_expression)获得它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T13:24:14.647

[HTMLParser 文档](http://docs.python.org/library/htmlparser.html)中的直接剪切和粘贴将从标签中获取数据，但不使用正则表达式。

```
from HTMLParser import HTMLParser

# Create a subclass and override the handler methods
class MyHTMLParser(HTMLParser):
    def handle_starttag(self, tag, attrs):
        print "Encountered a start tag:", tag
    def handle_endtag(self, tag):
        print "Encountered an end tag :", tag
    def handle_data(self, data):
        print "Encountered some data  :", data

# Instantiate the parser and fed it some HTML
parser = MyHTMLParser()
parser.feed('<td width="47%" align="left">556.348&nbsp;<span class="uccResCde">') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T13:12:40.150

这是一个应该解释如何获得匹配组的解决方案。您应该阅读[文档](http://docs.python.org/library/re.html)。

```
import re

text_to_parse= '<td width="47%" align="left">556.348&nbsp;<span class="uccResCde">'
pattern = r'(<td width="[0-9]+[%]?" align="(.+)">|<td align="(.+)"> width="[0-9]+[%]?")([ \n\t\r]*)([0-9,]+\.[0-9]+)([ \n\t\r]*)([&]?[a-zA-Z]+[;]?)([ \n\t\r]*)<span class="(.+)">'
m = re.search(pattern, text_to_parse)
m.group(5) 
```

但是为了解析 HTML，不需要使用正则表达式。相反，使用 HTML 解析器，例如[Beautiful Soup](https://en.wikipedia.org/wiki/Beautiful_Soup)：

```
from bs4 import BeautifulSoup

soup = BeautifulSoup(text_to_parse)
soup.text 
```

# css - PNG背景图像未在IE 8中显示<使用html5？

> ID：12197601
> 
> 赞同：2
> 
> 时间：2012-08-30T13:08:37.040
> 
> 标签：css, html, internet-explorer, internet-explorer-8

我有以下html代码：

```
<section class="first-content-top">
    <img src="images/img-diner.png" />
    <h1>Menu</h1>
</section>
<section class="first-content-middle">
         <article class="menu">
     </article>
</section>
<section class="first-content-bottom"></section> 
```

使用以下类型的 css：

```
.first-content-middle 
{
    background: url("images/bg-black.png") repeat;
    margin: 0 0 0 37px;
    padding: 0 20px;
    width: 595px;
} 
```

但在 IE8 中我仍然看不到背景图像，就像我在 IE9 或 Firefox 中看到的那样：

**这是IE8的图片：**

![这是IE8的图片](../Images/046c670af8d4953abe301fba2bbd01bf.png)

**这是Firefox的图片，应该是这样的：**

![这是Firefox的图片，应该如何](../Images/5c7d4131b5a938f80950d9ffafd1b74c.png)

***我尝试了以下解决方案：***

为了防止这个问题，我在页面头部添加了以下 html5shiv 代码：

```
<!--[if IE]>
<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]--> 
```

在萤火虫中，我检查以确保 section 元素具有`display:block;`属性集。

编辑：将`height`css 属性添加到该部分可修复背景问题。但是截面高度是可变的。那么我该如何解决呢？

有什么建议么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-30T13:27:11.433

您的 png 背景图像必须至少为 4x4 像素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T13:16:04.603

.first-content-middle { background: url("images/bg-black.png") 重复滚动 0 0; 边距：0 0 0 37px；填充：0 20px；宽度：595px；}

从背景中删除透明

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T13:14:01.940

IE7 和 IE8 对 alpha-transparency 具有原生 PNG 支持，但一旦出现不透明度，它就会崩溃。当为不透明度设置任何值时，即使是 100%（即过滤器：alpha(opacity = 100)），IE 用纯黑色填充填充 PNG 的 alpha 透明度。这有时被称为“黑色光环”。可以随时移除 alpha 过滤器以移除填充并恢复 alpha 透明度，但同时支持这两者需要使用更多 IE 的专有过滤器。以下所有示例都应放在 IE-targete 中

```
/* Normal CSS background using an PNG with an alpha transparency */
#demo {
background:url(ie8-logo.png) 0 0 no-repeat;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T13:12:07.567

这可能与您的问题有关。一般IE9及以下不喜欢透明，不透明。

[在使用 PNG 透明和不透明时，ie7 和 ie8 中的盈余而不是透明](https://stackoverflow.com/questions/3951287/problem-with-png-transparent-opacity-on-ie7-and-ie8)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-01T23:45:05.183

您需要在 CSS 中设置部分为 display:block

> 使用 IE，即使使用 shiv，您也需要将 HTML 5 元素声明为块元素。我将此行用于 Internet Explorer，但您可以根据需要修改它。
> 
> ```
> header,nav,article,footer,section,aside,figure,figcaption{display:block} 
> ```
> 
> 来自 Modernizr 文档：“您可能还希望将其中许多元素设置为 display:block;”

来自[IE 没有样式化 HTML5 标签（使用 shiv）](https://stackoverflow.com/questions/6602758/ie-not-styling-html5-tags-with-shiv)

# javascript - jQuery mouseover 淡入淡出效果

> ID：12197605
> 
> 赞同：0
> 
> 时间：2012-08-30T13:08:51.107
> 
> 标签：javascript, jquery, html

我一直在学习如何从 [http://bavotasan.com/2009/creating-a-jquery-mouseover-fade-effect/做一个 Jquery 鼠标悬停效果](http://bavotasan.com/2009/creating-a-jquery-mouseover-fade-effect/)

我如何拥有具有这种效果的三个独立按钮？当我复制它们时，我一直遇到 Div 重叠的问题，我无法将它们彼此分开。对不起，如果我最初的问题令人困惑！这是我的 jsfiddle：http: [//jsfiddle.net/japaneselanguagefriend/EgDqy/](http://jsfiddle.net/japaneselanguagefriend/EgDqy/)

```
<div class="fadehover"><img src="button 1" alt="" class="a" /><img src="button 1 roll" alt="" class="b" /></div>

<div class="fadehover"><img src="button 2" alt="" class="c" /><img src="button 2 roll" alt="" class="d" /></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T13:40:48.223

这是一个应该让你走上正确道路的小提琴：

[http://jsfiddle.net/EgDqy/12/](http://jsfiddle.net/EgDqy/12/)

```
<div class="cell">

<img src="http://www.charlesayoub.com/news/public/uploads/images/895377521.jpeg" alt="" display /> 

<img src="http://static.ddmcdn.com/gif/smart-car-1.jpg" class="fader" alt="" />

</div>

<div class="cell"> 

<img src="http://www.charlesayoub.com/news/public/uploads/images/895377521.jpeg" alt="" /> 

<img src="http://static.ddmcdn.com/gif/smart-car-1.jpg" class="fader" alt="" />

</div>

<div class="cell"> 

<img src="http://www.charlesayoub.com/news/public/uploads/images/895377521.jpeg" alt="" /> 

<img src="http://static.ddmcdn.com/gif/smart-car-1.jpg" class="fader" alt="" />

</div>​

$(".cell").hover(
   function() {
      $(this).find('.fader').fadeOut("slow");
   },
   function() {
      $(this).find('.fader').fadeIn("slow");
   }
);

.cell{ width:100px; display:inline-block; position:relative; }
.cell img { width:100px; position:absolute; top:0; left:0; } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T13:43:06.777

基本上因为 div 的内部元素是绝对定位的，所以 div 没有任何测量值（对此有一个技术词，但我不知道）。您基本上需要明确设置 div 的宽度和高度。您可以在 CSS 中执行此操作，也可以在 javascript/jquery 中动态生成 css。这是一个使用 jquery 的示例。

[http://jsfiddle.net/EgDqy/13/](http://jsfiddle.net/EgDqy/13/)

示例描绘了数千个单词，如果他们看到这个问题，这可能有助于其他人理解问题。点击右边的按钮

[http://jsfiddle.net/EgDqy/16/](http://jsfiddle.net/EgDqy/16/)

# android - 哪个 android 条码扫描器应用程序最适合从手机屏幕扫描二维码？

> ID：12197608
> 
> 赞同：-2
> 
> 时间：2012-08-30T13:08:54.417
> 
> 标签：android, barcode, barcode-scanner

哪些 android 条码扫描器应用程序可以从手机屏幕扫描二维码，如 QR、Data Matrix、aztec 等（代码显示在手机屏幕上）？我查看了 Barcode Scanner、QR Droid 和 QuickMark，但它们要么不支持许多二维码，要么无法从手机屏幕上进行良好的扫描。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:11:39.880

ZXing（读作“斑马线”）是一个开源的、多格式的一维/二维条码图像处理库，用 Java 实现，可移植到其他语言。

从这里[下载 ZXing 。](http://code.google.com/p/zxing/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T13:13:20.887

我会推荐 QR Droid，但正如我所见，所以你不喜欢。不幸的是，我不知道另一个：/ **编辑：**试试[这个](https://play.google.com/store/apps/details?id=com.ScanLife&feature=related_apps#?t=W251bGwsMSwxLDEwOSwiY29tLlNjYW5MaWZlIl0.)。

# c++ - 在 STL 中使用引用计数的数据结构有哪些行为异常？

> ID：12197609
> 
> 赞同：7
> 
> 时间：2012-08-30T13:08:59.437
> 
> 标签：c++, data-structures, stl, garbage-collection, containers

Scott Meyer 在“Effective STL”中说，在决定使用哪种数据结构时要考虑的一件事是容器是否使用引用计数。他说这种方法存在一些行为异常。

其中一些是什么？为什么像“string”和“rope”这样的容器会有异常行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T09:00:47.120

正如其他人所说，典型的例子是`std::string`。除了多线程程序中的锁定性能问题外，引用计数字符串还存在无线程问题。想象一下：

```
string s = "hello";
string t = s;                   // s and t share data
char &c = t[0];                 // copy made here, since t is non-const 
```

问题是非常量`operator[]`必须复制字符串，如果它是共享的，因为返回的引用可以稍后用于修改字符串（您可以将其分配给 non-reference `char`，但`operator[]`不知道它应该表现有什么不同）。另一方面，*const* `operator[]`应该避免复制，因为这将消除引用计数的所有好处（这意味着您在实践中*总是*复制）。

```
const char &get_first(const string &s) {
    return s[0];                // no copy, s is const
}

string s = "hello";
string t = s;                   // s and t share data
const char &c1 = get_first(t);  // no copy made here
const char &c2 = t[0];          // copy made, since t is non-const
// c1 just got invalidated (in fact, it's pointing at s[0], not t[0]).
s[0] = 'X';
printf("%c, %c\n", c1, c2);     // outputs "X, h" 
```

如您所见，这种区别令人困惑，可能会导致非常意外的行为。

这是一篇关于写时复制语义及其对性能影响的旧文章：[http](http://www.gotw.ca/gotw/045.htm) ://www.gotw.ca/gotw/045.htm 。

`std::string`这是在 C++11 标准中不计入引用的动机的提案： [http](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2008/n2534.html) ://www.open-std.org/jtc1/sc22/wg21/docs/papers/2008/n2534.html 。这就是上面例子的基础。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T08:03:56.497

作为一般规则，引用计数会遇到竞争条件、死锁或过度同步等常见的多线程问题，以避免任何一种情况。

然后你会遇到上下文问题，这通常需要类似闭包的行为，即对象可能需要在它们明显超出范围后被捕获，但这可能会被 STL 避免，我不是 STL 专家。

这里有一个讨论，讨论了与智能指针相关的各种巴洛克式边缘情况：[http ://www.velocityreviews.com/forums/t689414-c-primer-4th-edition-reference-counting-smart-pointers.html](http://www.velocityreviews.com/forums/t689414-c-primer-4th-edition-reference-counting-smart-pointers.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T14:32:12.007

作为示例，引用计数字符串可能发生的一个异常，特别是具有“子部分”处理（带有开始/结束切片）的字符串，是“*不幸的锁定*”。

假设您为文件的整个文本分配内存。然后你解析你的文件并使用一些“slice()”、“left()”、“mid()”或等效方法。您可能会结束锁定文件的整个字符串，而其中可能只有很小的一部分包含实际的文本数据（其余部分是已经解析的数字、标点符号或其他）。因此，您最终可能使用了比必要*更多的内存*，同时更容易控制峰值使用量。在这种情况下，如果您使用多线程并在各个线程中密集使用某些字符串，则可能会出现第二个问题：*不必要的内存争用*，字符串的引用计数可能会一直递增/递减，原子性可能会变得 int道路，

但是，只要您知道应用程序中的潜在问题并阻止它们（在这种情况下，只需通过复制它们来“单独”制作字符串），就没有什么反对引用计数的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T08:56:42.980

在第 13 项中，Meyers 详细阐述了多线程和引用字符串的问题。

它在很大程度上取决于确切的实现`std::string`和锁定以及使用模式。 如果在多线程环境中明显无害地使用 a 会因为隐藏锁而导致延迟，
这**可能**是一个问题。`std::string`循环中这种锁和上下文切换的代价可能是巨大的。但它绝不应该导致死锁。
这不一定是个问题。这本书是> 10岁。与此同时，线程实现也得到了改进。例如，Linux-Futex 在大多数情况下表现得更加流畅。

另一点：（我不知道迈耶斯是否也讨论过这个……）
引用计数`std::string`意味着它具有写时复制语义。这通常是一件好事。实际副本被推迟到实际需要时。但这也意味着复制品的价格必须在一个可能难以预测的点上支付。

# asp.net - 不能在 DropDownList 中选择多个项目，但调试器完美地逐步执行代码

> ID：12197610
> 
> 赞同：2
> 
> 时间：2012-08-30T13:09:00.873
> 
> 标签：asp.net, vb.net, data-binding, drop-down-menu

刷新页面时出现主题错误（数据绑定在页面加载时完成）。单步执行页面代码没有发现任何错误，并且堆栈跟踪中没有引用任何页面：

```
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.Web.HttpException: Cannot have multiple items selected in a DropDownList.

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Stack Trace:
[HttpException (0x80004005): Cannot have multiple items selected in a DropDownList.]
   System.Web.UI.WebControls.DropDownList.VerifyMultiSelect() +106
   System.Web.UI.WebControls.ListControl.RenderContents(HtmlTextWriter writer) +161
   System.Web.UI.WebControls.WebControl.Render(HtmlTextWriter writer) +32
   System.Web.UI.Control.RenderControlInternal(HtmlTextWriter writer, ControlAdapter adapter) +27
   System.Web.UI.Control.RenderControl(HtmlTextWriter writer, ControlAdapter adapter) +100
   System.Web.UI.Control.RenderControl(HtmlTextWriter writer) +25
   System.Web.UI.Control.RenderChildrenInternal(HtmlTextWriter writer, ICollection children) +208
   System.Web.UI.Control.RenderChildren(HtmlTextWriter writer) +8
   System.Web.UI.WebControls.WebControl.RenderContents(HtmlTextWriter writer) +10
   System.Web.UI.WebControls.WebControl.Render(HtmlTextWriter writer) +32
   System.Web.UI.Control.RenderControlInternal(HtmlTextWriter writer, ControlAdapter adapter) +27
   System.Web.UI.Control.RenderControl(HtmlTextWriter writer, ControlAdapter adapter) +100
   System.Web.UI.Control.RenderControl(HtmlTextWriter writer) +25
   System.Web.UI.Control.RenderChildrenInternal(HtmlTextWriter writer, ICollection children) +208
   System.Web.UI.Control.RenderChildren(HtmlTextWriter writer) +8
   System.Web.UI.Control.Render(HtmlTextWriter writer) +10
   System.Web.UI.Control.RenderControlInternal(HtmlTextWriter writer, ControlAdapter adapter) +27
   System.Web.UI.Control.RenderControl(HtmlTextWriter writer, ControlAdapter adapter) +100
   System.Web.UI.Control.RenderControl(HtmlTextWriter writer) +25
   System.Web.UI.Control.RenderChildrenInternal(HtmlTextWriter writer, ICollection children) +208
   System.Web.UI.UpdatePanel.RenderChildren(HtmlTextWriter writer) +256
   System.Web.UI.UpdatePanel.Render(HtmlTextWriter writer) +37
   System.Web.UI.Control.RenderControlInternal(HtmlTextWriter writer, ControlAdapter adapter) +27
   System.Web.UI.Control.RenderControl(HtmlTextWriter writer, ControlAdapter adapter) +100
   System.Web.UI.Control.RenderControl(HtmlTextWriter writer) +25
   System.Web.UI.Control.RenderChildrenInternal(HtmlTextWriter writer, ICollection children) +208
   System.Web.UI.Control.RenderChildren(HtmlTextWriter writer) +8
   System.Web.UI.Control.Render(HtmlTextWriter writer) +10
   System.Web.UI.Control.RenderControlInternal(HtmlTextWriter writer, ControlAdapter adapter) +27
   System.Web.UI.Control.RenderControl(HtmlTextWriter writer, ControlAdapter adapter) +100
   System.Web.UI.Control.RenderControl(HtmlTextWriter writer) +25
   System.Web.UI.Control.RenderChildrenInternal(HtmlTextWriter writer, ICollection children) +208
   System.Web.UI.HtmlControls.HtmlForm.RenderChildren(HtmlTextWriter writer) +173
   System.Web.UI.HtmlControls.HtmlContainerControl.Render(HtmlTextWriter writer) +31
   System.Web.UI.HtmlControls.HtmlForm.Render(HtmlTextWriter output) +53
   System.Web.UI.Control.RenderControlInternal(HtmlTextWriter writer, ControlAdapter adapter) +27
   System.Web.UI.Control.RenderControl(HtmlTextWriter writer, ControlAdapter adapter) +100
   System.Web.UI.HtmlControls.HtmlForm.RenderControl(HtmlTextWriter writer) +40
   System.Web.UI.Control.RenderChildrenInternal(HtmlTextWriter writer, ICollection children) +208
   System.Web.UI.Control.RenderChildren(HtmlTextWriter writer) +8
   System.Web.UI.Control.Render(HtmlTextWriter writer) +10
   System.Web.UI.Control.RenderControlInternal(HtmlTextWriter writer, ControlAdapter adapter) +27
   System.Web.UI.Control.RenderControl(HtmlTextWriter writer, ControlAdapter adapter) +100
   System.Web.UI.Control.RenderControl(HtmlTextWriter writer) +25
   System.Web.UI.Control.RenderChildrenInternal(HtmlTextWriter writer, ICollection children) +208
   System.Web.UI.Control.RenderChildren(HtmlTextWriter writer) +8
   System.Web.UI.Page.Render(HtmlTextWriter writer) +29
   System.Web.UI.Control.RenderControlInternal(HtmlTextWriter writer, ControlAdapter adapter) +27
   System.Web.UI.Control.RenderControl(HtmlTextWriter writer, ControlAdapter adapter) +100
   System.Web.UI.Control.RenderControl(HtmlTextWriter writer) +25
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +3060 
```

上次发生这种情况时，我在母版页上有这个图像标签：

```
<img src="<%=Page.ResoveUrl("~/Images/footerLogo.png") %>" /> 
```

修改它以删除`<% %>`( `<img src="/Images/footerLogo.png" />`) 块修复了错误，但这次我在母版页（或链接到相关页面的任何页面）上没有任何此类标签。这是我的代码：

```
Imports MySql.Data
Imports MySql.Data.MySqlClient

Partial Class maintreservation
    Inherits System.Web.UI.Page

    Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

        If Not IsPostBack Then

            getClients()
            getDrivers()
            getVehicles()

            pnlDriven.Visible = False
            pnlSelfDriven.Visible = False

            If Not String.IsNullOrEmpty(Session("resid")) AndAlso Session("resid") IsNot Nothing Then

                getReservation()

            End If

        End If
    End Sub

    Protected Sub getDrivers()
        ddlDriver.ClearSelection()

        Dim db As New Database

        Dim sql As String = "select driverid, drivername from drivers order by drivername"

        Dim dr As MySqlDataReader = db.GetReader(sql)

        If dr.Read Then

            ddlDriver.DataSource = dr
            ddlDriver.DataTextField = "drivername"
            ddlDriver.DataValueField = "driverid"
            ddlDriver.DataBind()

        End If
        dr.Close()

        ddlDriver.Items.Insert(0, New ListItem("Select a Driver", 0))
    End Sub

    Protected Sub getVehicles()
        ddlVehicle.ClearSelection()

        Dim db As New Database

        Dim sql As String = "select veh.vehicleid, veh.licence_plate, veh.model, vm.make from vehicles veh " & _
            "inner join vehicle_manufacturers vm on veh.make = vm.makeid order by veh.make"

        Dim dr As MySqlDataReader = db.GetReader(sql)

        While dr.Read

            ddlVehicle.Items.Add(New ListItem(dr("make") & " " & dr("model") & " " & " (" & dr("licence_plate") & ")", dr("vehicleid")))
        End While
        dr.Close()

        ddlVehicle.Items.Insert(0, New ListItem("Select a Vehicle", 0))
    End Sub

    Protected Sub getClients()
        ddlClient.ClearSelection()

        Dim db As New Database

        Dim sql As String = "select clientid, clientname, contact from clients order by clientname"

        Dim dr As MySqlDataReader = db.GetReader(sql)

        If dr.Read Then

            ddlClient.DataSource = dr
            ddlClient.DataTextField = "clientname"
            ddlClient.DataValueField = "clientid"
            ddlClient.DataBind()

        End If
        dr.Close()

        ddlClient.Items.Insert(0, New ListItem("Select an Agent", 0))
        getClientContact()
    End Sub

    Protected Sub getClientContact()

        Dim db As New Database

        Dim sql As String = "select contact, vat_no from clients where clientid = " & ddlClient.SelectedItem.Value

        Dim dr As MySqlDataReader = db.GetReader(sql)

        If dr.Read Then

            If Not IsDBNull(dr("contact")) Then
                lblClientContact.Text = dr("contact")
            Else
                lblClientContact.Text = ""
            End If
            If Not IsDBNull(dr("vat_no")) Then
                txtVatNo.Text = dr("vat_no")
            Else
                txtVatNo.Text = ""
            End If
        End If
        dr.Close()
    End Sub

    Protected Sub ddlClient_SelectedIndexChanged(ByVal sender As Object, ByVal e As System.EventArgs) Handles ddlClient.SelectedIndexChanged

        getClientContact()

    End Sub

    Protected Sub getReservation()

        Dim db As New Database

        Dim sql As String = _
            "select * from reservations res " & _
            "inner join reservationbody trip on res.reservationid = trip.reservationid " & _
            "inner join vehicles vehicle on trip.vehicleid = vehicle.vehicleid " & _
            "left outer join drivers driver on trip.driverid = driver.driverid " & _
            "where res.reservationid = " & Session("resid")

        Dim dr As MySqlDataReader = db.GetReader(sql)

        If dr.Read Then

            ' GET CLIENT
            ' -------------------------------------------------------------
            ddlClient.ClearSelection()
            ddlClient.Items.FindByValue(dr("clientid")).Selected = True
            getClientContact()

            ' GET VOUCHER
            ' -------------------------------------------------------------
            If IsDBNull("vouchernumber") Then
                txtVoucher.Text = ""
            Else
                txtVoucher.Text = dr("vouchernumber")
            End If

            ' GET DRIVER
            ' -------------------------------------------------------------
            If dr("driverid") = "0" Then
                ' Self Drive
                rblTrips.Items(1).Selected = True

                pnlDriven.Visible = False
                pnlSelfDriven.Visible = True

            Else
                ' Driven
                rblTrips.Items(0).Selected = True

                pnlSelfDriven.Visible = False
                pnlDriven.Visible = True

                ddlDriver.ClearSelection()
                ddlDriver.Items.FindByValue(dr("driverid")).Selected = True
            End If

            ' GET PASSENGER/S
            ' -------------------------------------------------------------
            If IsDBNull(dr("passengers")) Then
                txtPassengers.Text = ""
            Else
                txtPassengers.Text = dr("passengers")
            End If
            If IsDBNull(dr("passengercontact")) Then
                txtPassengerContact.Text = ""
            Else
                txtPassengerContact.Text = dr("passengercontact")
            End If

            ' GET COMMENTS
            ' -------------------------------------------------------------
            If IsDBNull(dr("comments")) Then
                txtComments.Text = ""
            Else
                txtComments.Text = dr("comments")
            End If

            ' GET VEHICLES
            ' -------------------------------------------------------------
            ddlVehicle.ClearSelection()
            ddlDriver.Items.FindByValue(dr("vehicleid")).Selected = True

            ' GET DATES AND TIMES
            ' -------------------------------------------------------------
            txtPickupDate.Text = Left(dr("res_date"), 10) ' USE DATE(trip.res_date) as res_date in the sql statement

            ucTimeIn.Time = dr("time_in")

            ucTimeOut.Time = dr("time_out")

        End If
        dr.Close()
    End Sub

    Protected Sub rblTrips_SelectedIndexChanged(ByVal sender As Object, ByVal e As System.EventArgs) Handles rblTrips.SelectedIndexChanged

        If rblTrips.SelectedItem.Value = "driven" Then

            pnlDriven.Visible = True
            pnlSelfDriven.Visible = False

        Else

            pnlSelfDriven.Visible = True
            pnlDriven.Visible = False

        End If
    End Sub

End Class 
```

如前所述，这段代码执行得很好，所以我真的不知道问题出在哪里。

我试过清理和重建解决方案，但它仍然没有解决任何问题，所以欢迎任何见解！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T13:42:04.777

来自的输入`Cory`让我决定返回并检查每个 DropDownList 是否只指定了 1 个选择，这就是我发现问题的时候。

在`getReservation()`上面：

```
 ' GET DRIVER
        ' -------------------------------------------------------------
        If dr("driverid") = "0" Then
            ' Self Drive
            rblTrips.Items(1).Selected = True

            pnlDriven.Visible = False
            pnlSelfDriven.Visible = True

        Else
            ' Driven
            rblTrips.Items(0).Selected = True

            pnlSelfDriven.Visible = False
            pnlDriven.Visible = True

            ddlDriver.ClearSelection()
            ddlDriver.Items.FindByValue(dr("driverid")).Selected = True
        End If 
```

然后后来：

```
 ' GET VEHICLES
        ' -------------------------------------------------------------
        ddlVehicle.ClearSelection()
        ddlDriver.Items.FindByValue(dr("vehicleid")).Selected = True 
```

这只是糟糕的复制/粘贴，因此对于查看此答案的人，**请确保 100% 确保您只选择 ONCE**

作为旁注，我被告知以下是更好的做法：

```
' Do this:
ddlVehicles.SelectedValue = dr("vehicleid")

' Instead of this:
ddlVehicles.Items.FindByValue(dr("vehicleid").Selected = True 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T13:31:09.303

在渲染任何`ListControl`内容时，如果遇到多个选定项目，则会设置一个标志。如果标志为真，`VerifyMultiSelect`则调用抽象方法。`DropDownList`的实现在`VerifyMultiSelect`遇到多个选定项目时会引发异常，因此您看到此异常的唯一可能原因是您有多个`ListItem`s`Selected`设置为`true`其中一个`DropDownList`s.

我会仔细检查您的 SQL 的结果，以确定是否存在同一个项目中的多个项目的`DropDownList`属性`Selected`设置为`true`. 上面示例中的函数中有三行代码`getReservation()`可以更改此属性。

也许这是你处理的方式`IsPostBack`。该控件存储了一个先前选择的项目`ViewState`，并且您在回发后尝试选择另一个值。

**编辑：** OP 找到了[解决方案](https://stackoverflow.com/a/12198266/74757)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-12T03:44:04.510

在修改别人的旧代码时，我遇到了类似的问题。对我来说，这是一个视图状态问题，只需调用即可解决

```
myDropDown.ClearSelection(); 
```

他们从没有键的枚举中提取下拉数据源，因此使用 FindText 进行选择。如果下拉所选项目已更改，但是他们使用 FindText 重新运行 PostBack 上的语句，而无需先调用

myDropDown.ClearSelection();

根据 Corys 的回复，这意味着两个项目——一个刚刚选择的项目加上一个已经在视图状态中选择的项目——现在被选中，因此引发了一个异常。

不知道它是如何工作的，但直到对代码进行了一些小的更改后才暴露出来。因此，如果有人根据 OPs 的答案努力寻找重复的代码行，那么您可能还需要考虑在回发时查看状态机制。

# html - 在 Javascript 中创建 Outlook Activex 对象

> ID：12197611
> 
> 赞同：1
> 
> 时间：2012-08-30T13:09:09.987
> 
> 标签：html, outlook, activex

我需要在网页中显示 Outlook 中的邮件项目。

我使用对象标记在网页中嵌入 Outlook 视图控件。

它工作正常，但我需要过滤邮箱，使用它的`Filter`属性。

我不熟悉`VbScript`并被困在这里。

我如何过滤内容？

```
<object width="100%" height="500px;" classid="clsid:0006F063-0000-0000-C000-000000000046" id="ViewCtl1">
   <param name="Folder" value="Inbox"></param>
   <param name="Filter" value="????"></param>
</object> 
```

如果我直接在 Outlook 中设置过滤器属性，它可以工作，但我需要一种编程方式来过滤。

请帮我。

谢谢。

# perl - 在perl中获取最顶层路径元素的有效方法

> ID：12197630
> 
> 赞同：3
> 
> 时间：2012-08-30T13:09:59.937
> 
> 标签：perl

有

```
my $path = "//strange/path/"; 
```

需要使用（一个）前导斜杠 = 获取第一个元素，`/strange`或者只有`/`$path 为空或仅包含斜杠。

目前有两种解决方案，例如：

```
use 5.014;
use warnings;
use File::Spec;
my $path = "//strange/path/";

#version with File::Spec
my $v1 = "/" . ([grep {/./} File::Spec->splitdir($path)]->[0] //  "");
say $v1;

#regex
my $v2 = $path;
$v2 =~ s{^/*}{};
$v2 =~ s{/.*}{};
$v2 =~ s{^}{/};
say $v2; 
```

我不喜欢其中任何一个，因为 1.st 使用模块，而第二个中的 3 个正则表达式简直丑陋。

存在更有效|| 最快的|| “更好”的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T13:35:33.283

如果您想要正则表达式，您可以尝试以下“一个正则表达式”解决方案：

```
use 5.014;
use warnings;
while(<DATA>) {
    chomp;
    my $o = my $n = $_;
    $n =~ s:(^/*)([^/]*)?(/*.*):/$2:;
    say "=$o= =$n=";
}
__DATA__

/
//
strange
strange/
strange/path
/strange
/strange/
/strange/path
//strange
//strange/
//strange/path
//strange//
//strange//
//strange//path 
```

但如上所述@Moritz Bunkus 告诉 - 最好使用标准 File::Spec。

# objective-c - ios比较两个图像/路径

> ID：12197632
> 
> 赞同：1
> 
> 时间：2012-08-30T13:10:02.197
> 
> 标签：objective-c, ios, image, path, compare

我正在寻找比较两个图像/路径的东西。在我的应用程序中，用户可以绘制一些线条，例如矩形。绘制完成后，图像将被保存。

现在，如果用户绘制相同的矩形但不完全像第一个，我想比较这两个图像这两个图像的匹配程度。图像将非常简单（矩形、圆形）。

有什么或任何方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:02:27.940

我认为最简单的方法是记住绘图操作所需的状态/参数。

例子：

*   假设您绘制一个矩形 - 最小边界矩形的位置和大小是多少？

*   假设你画了一个圆——最小边界矩形的位置和大小是多少？

*   假设您画一条线 - 最小边界矩形的位置和大小是多少？

然后你有一个指定这些矩形的“形状”数组。这就是您需要比较的全部内容（好吧，对于典型的绘图应用程序，您需要在现实生活中使用更精细的模型，但您可能了解这些参数对于您的任何形状都是什么）。这种设计的好处是它可以作为对象和文档模型的基础或扩展。

评估渲染结果不是很足智多谋，而且相当不准确。渲染结果可能会随着您的实现、操作系统、设备或编译器设置的变化而变化。

# jquery - 单击AnythingSlider转到特定幻灯片

> ID：12197641
> 
> 赞同：0
> 
> 时间：2012-08-30T13:11:07.830
> 
> 标签：jquery, slider, anythingslider

我有一个图像列表，当单击一个图像时，我会访问一个位于fancybox 弹出窗口内的anyslider 幻灯片。

HTML

```
<ul class="threeColGrid">
    <li>
        <div class="slideNumber">1</div>
        <div class="userStep">
            <img src="/upload/smb/support/folder/slide-1/howToStepOneImage.jpg#" onclick="$('a.magnifyStep').trigger('click'); return false;" alt="#" />
                <a class="magnifyStep" href="#userStepPopUp" ></a>
            <p>Downloaded&nbsp;<a title="#" href="/smb/support/how-to" target="_blank">software</a> from the website</p>
        </div>
    </li>
    <li>
        <div class="slideNumber">2</div>
        <div class="userStep">
            <img src="/upload/smb/support/folder/slide-2/howToStepOneImageTwo.jpg#" onclick="$('a.magnifyStep').trigger('click'); return false;" alt="#" />
                <a class="magnifyStep" href="#userStepPopUp" ></a>
            <p>Connect your old device to your PC or laptop using a USB cable</p>
        </div>
    </li>
    <li>
        <div class="slideNumber">3</div>
        <div class="userStep">
            <img src="/upload/smb/support/folder/slide-3/howToStepOneImageThree.jpg#" onclick="$('a.magnifyStep').trigger('click'); return false;" alt="#" />
                <a class="magnifyStep" href="#userStepPopUp" ></a>
            <p>Wait for software to recognise your device</p>
            <ul>
                <li>If your device is locked you may be asked to unlock your device&nbsp;</li>
                <li>If your device has not been registered previously you may need to set up your  options with your old device first</li>
            </ul>
        </div>
    </li>
    <li>
        <div class="slideNumber">4</div>
        <div class="userStep">
            <img src="/upload/smb/support/how-to/folder/slide4/howToStepOneImageFour.jpg#" onclick="$('a.magnifyStep').trigger('click'); return false;" alt="#" />
                <a class="magnifyStep" href="#userStepPopUp" ></a>
            <p>From the device menu select Switch Devices</p>
        </div>
    </li>
    <li>
        <div class="slideNumber">5</div>
        <div class="userStep">
            <img src="/upload/smb/support/how-to/folder/slide5/howToStepOneImageFive.jpg#" onclick="$('a.magnifyStep').trigger('click'); return false;" alt="#" />
                <a class="magnifyStep" href="#userStepPopUp" ></a>
            <p>Select your old device.</p>
        </div>
    </li>
    <li>
        <div class="slideNumber">6</div>
        <div class="userStep">
            <img src="/upload/smb/support/how-to/folder/slide6/howToStepOneImageSix.jpg#" onclick="$('a.magnifyStep').trigger('click'); return false;" alt="#" />
                <a class="magnifyStep" href="#userStepPopUp" ></a>
            <p>Select the data you would like to transfer to the new device and click on next.</p>
        </div>
    </li>
</ul> 
```

jQuery

```
$('#popUpslider').anythingSlider({
    buildArrows: true,
    buildStartStop: false,
    infiniteSlides: false,
    stopAtEnd: true,
    hashTags: true,
    easing: "swing"
}); 
```

这部分工作正常，但是我现在需要在单击其中一个图像时查看特定幻灯片（例如，单击第三个图像将打开 fancybox 窗口并在anythingSlider 中显示第三个幻灯片）。

不幸的是，我无法让这部分工作。我正在使用动态填充滑块并将哈希添加到图像 URL 的末尾的 CMS。有没有办法针对这个散列，使滑块在单击的图像处打开？

提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T15:40:28.890

我没有任何使用 AnySlider 的经验，但是根据[文档](http://css-tricks.com/examples/AnythingSlider/#&panel1-2)，您可以`startPanel`在初始化时使用该选项。因此，如果您希望它打开到第三张幻灯片，请使用`startPanel:3`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T15:39:06.893

直接从[文档](http://css-tricks.com/anythingslider-jquery-plugin/)中提供给您（查找：从静态链接直接链接到幻灯片）。

```
$("#slide-jump").click(function(e){
    $('.anythingSlider').anythingSlider(6);
    e.preventDefault();
}); 
```

[http://css-tricks.com/examples/AnythingSlider/](http://css-tricks.com/examples/AnythingSlider/)

# xml - xsl 模板 - 某些节点出现空的 xmlns 属性

> ID：12197642
> 
> 赞同：0
> 
> 时间：2012-08-30T13:11:11.083
> 
> 标签：xml, templates, xslt, xml-namespaces

我对输出具有空 xmlns 属性的节点的 xsl 模板有疑问。

模板是：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" version="1.0"/>

<xsl:template match="/">
    <X xmlns="a_ns">
        <Y>
            <xsl:value-of select="a/b/b2"/>
        </Y>
        <Z>
            <xsl:copy-of select="a/d/d1/d11"/>
        </Z>
    </X>
</xsl:template> 
```

输入是：

```
<a>
<b>
    <b1>b1_text</b1>
    <b2>b2_text</b2>
</b>
<c>
    <c1>c1_text</c1>
    <c2>c2_text</c2>
</c>
<d>
    <d1>
        <d11>
            <d111 ls="op">d111_text</d111>
            <d112>d112_text</d112>
        </d11>
        <d12>d12_text</d12>
    </d1>
    <d2>d2_text</d2>
    <d3>d3_text</d3>
</d> 
```

一个输出：

```
<?xml version="1.0" encoding="utf-8"?>
<X xmlns="a_ns">
    <Y>b2_text</Y>
    <Z>
       <d11 xmlns="">
           <d111 ls="op">d111_text</d111>
           <d112>d112_text</d112>
       </d11>
    </Z>
</X> 
```

如何修改模板以使 xmlns="" 不再出现？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T13:20:45.540

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="/">
        <X xmlns="a_ns">
            <Y>
                <xsl:value-of select="a/b/b2"/>
            </Y>
            <Z>
                <xsl:apply-templates select="a/d/d1/d11"/>
            </Z>
        </X>
    </xsl:template>

    <xsl:template match="*[ancestor-or-self::d11]">
     <xsl:element name="{name()}" namespace="a_ns">
       <xsl:copy-of select="@*"/>
       <xsl:apply-templates/>
     </xsl:element>
    </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时**：

```
<a>
    <b>
        <b1>b1_text</b1>
        <b2>b2_text</b2>
    </b>
    <c>
        <c1>c1_text</c1>
        <c2>c2_text</c2>
    </c>
    <d>
        <d1>
            <d11>
                <d111 ls="op">d111_text</d111>
                <d112>d112_text</d112>
            </d11>
            <d12>d12_text</d12>
        </d1>
        <d2>d2_text</d2>
        <d3>d3_text</d3>
    </d>
</a> 
```

**产生想要的正确结果**：

```
<X xmlns="a_ns">
   <Y>b2_text</Y>
   <Z>
      <d11>
         <d111 ls="op">d111_text</d111>
         <d112>d112_text</d112>
      </d11>
   </Z>
</X> 
```

**说明**：

`xsl:copy-of`生成由其`select`属性中指定的表达式选择的每个节点的精确副本。因此，它不能用于更改任何复制元素的（默认）命名空间。

在这种情况下被复制的元素属于“无命名空间”。复制的元素仍然属于“无命名空间”这一事实`xmlns=""` 由 XSLT 处理器表达——正确地应该是这样的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T14:38:23.537

要注意的关键是您要更改元素的名称，例如 d11。在输入中，名称为 {}d11 - 即没有命名空间中的 d11，而在输出中您希望将其命名为 {a_ns}d11 - 即命名空间 a_ns 中的 d11。xsl:copy-of 指令完全复制节点，因此它保留名称 {}d11，并且序列化程序必须添加 xmlns="" 声明以确保它保留此名称。要更改名称（特别是名称的命名空间部分），您需要使用 Dimitre 提供的过程来转换节点而不是复制它们。

# xna - 如何在纹理上使用着色器？

> ID：12197647
> 
> 赞同：0
> 
> 时间：2012-08-30T13:11:19.000
> 
> 标签：xna, hlsl, lighting

我想建立一个基于着色器的照明系统。http://stackoverflow.com/editing-help 为此，我需要将某些功能应用于纹理。如何通过 C#/XNA 中的着色器算法传递纹理？我试过这样做：

```
foreach (EffectPass pass in effect.Techniques[0].Passes)
            {
                pass.Apply();
            }
spriteBatch.Draw(shadowmap,
                new Rectangle(0, 0, range * 2, range * 2),
                new Rectangle((int)screenPos.X - range, (int)screenPos.Y - range, 2 * range, 2 * range),
                Color.White); 
```

但它不起作用。我也试过这个：

```
spriteBatch.Begin();

            spriteBatch.Draw(shadowmap,
                new Rectangle(0, 0, range * 2, range * 2),
                new Rectangle((int)screenPos.X - range, (int)screenPos.Y - range, 2 * range, 2 * range),
                Color.White);
            spriteBatch.End();
            graphicsDevice.SetRenderTarget(null);
            effect.Parameters["tex"].SetValue(area);
            foreach (EffectPass pass in effect.Techniques[0].Passes)
            {
                pass.Apply();
            } 
```

但这也无济于事。我需要通过两个/三个算法传递纹理，所以我需要一种将着色器任意应用于纹理的方法。有没有办法做到这一点？

编辑：HLSL 代码是这样的：

```
texture tex;
sampler input  : tex;
float red;
float2 mousepos; 
float4 PixelShaderFunction(float2 coords: TEXCOORD0) : COLOR0
{
    float4 color;
    color=tex2D(input,coords.xy);
    color.r=0.9;
    return color;
}

technique Technique1
{
    pass Pass1
    { 
        PixelShader = compile ps_2_0 PixelShaderFunction();
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T14:08:41.267

您可以将 an[传递](http://msdn.microsoft.com/en-us/library/ff433700.aspx)`Effect`给.[`SpriteBatch.Begin`](http://msdn.microsoft.com/en-us/library/ff433700.aspx)

您也可以`SpriteSortMode.Immediate`在`Apply()`调用`SpriteBatch.Draw`.

（在所有其他模式中，`SpriteBatch`将批处理所有操作 - 设置效果和绘图 - 直到您调用`End`。这会提供更好的性能，但不会让您有机会在精灵之间设置新的效果或状态。）

* * *

如果您直接使用效果（而不是通过`SpriteBatch`），您可以像这样在图形设备上设置纹理：

```
GraphicsDevice.Texture[0] = myTexture; 
```

还有`Apply()`你的效果，设置任何其他图形设备状态，并通过调用其中一种`GraphicsDevice.Draw*()`方法来跟踪它。

* * *

请注意`foreach`循环中的错误。您必须在每次调用后绘制一些东西`Apply()`（即：在循环内）。如果将效果传递给 ，则不需要循环`SpriteBatch.Begin`，因为`SpriteBatch`它将在内部为您处理。

# java - 将请求转发到非 @RequestMapping

> ID：12197656
> 
> 赞同：4
> 
> 时间：2012-08-30T13:11:42.140
> 
> 标签：java, spring, spring-mvc, forwarding

是否可以使用`forward:/`语法将请求重定向到非`@RequestMapping`注释方法。

我想要实现的是一种在内部将请求重定向到无法直接从浏览器访问的路径的方法。

例如，如果用户请求`/image.jpg`，我想将其重定向到一个控制器，该控制器将回答图像，映射到`/img/image.jpg`. 关键是`/img/image.jpg`不能通过浏览器直接访问。

可能吗？我怎样才能实现这种必要性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T16:50:00.530

我认为如果要用于`forward:/`调用资源，则需要创建请求映射路径。但是，您可以通过以下方式实现：

创建最终用户直接浏览器调用无法访问的请求映射路径。在转发路径请求之前，放置一些额外的请求参数，然后由请求映射器检查。

例子 ：

```
@RequestMapping(value = "/direct/browser/call")
public String connections(WebRequest request) throws SQLException {
    //validate request
    request.setAttribute("formButton", isPost, WebRequest.SCOPE_REQUEST);
    return "redirect:/some/value";
}

@RequestMapping(value = "/some/value")
public String connections(WebRequest request) throws SQLException {
    //validate request
    if(request.getParameter("formButton")!=null) { return "/homepage"; }
    // else : do processing
} 
```

您还可以`HTTP GET`在请求映射中限制浏览器调用。例子：

```
@RequestMapping(value = "/some/value", method = RequestMethod.POST) 
```

HTTP 方法：HEAD、PUT、DELETE、TRACE 和 OPTIONS 在您的情况下也很有用。

# eclipse - 导入 Eclipse 时无法识别 Maven Java Web 项目

> ID：12197662
> 
> 赞同：2
> 
> 时间：2012-08-30T13:11:58.580
> 
> 标签：eclipse, jakarta-ee, maven, m2eclipse

一位同事正在尝试将 Java Web 项目项目导入他的 Eclipse 工作区。他安装了 m2e 插件，它可以识别“父”项目和它拥有的 3 个子项目（这也是 Maven 项目）。然而，当项目被导入时，Eclipse 似乎并没有将它们识别为 Java 项目（它没有显示通常的“Java 资源”和“部署描述符”）。在 Project Explorer 中出现的仅有的两件事如下所示：

![截屏](../Images/946139f6273b21005f311449aef74eb8.png)

我使用我的 Eclipse 版本导入了同一个项目，它识别出该项目是一个 Java Web 项目，没有任何问题。他需要做/安装什么才能让它工作吗？他有 Eclipse WTP 和 m2e 插件，所以我看不出他的 Eclipse 安装和我的有什么不同。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T13:11:26.883

事实证明，我们需要在项目属性中启用项目方面。我不确定为什么默认情况下没有启用它，就像它导入到我的 Eclipse 安装时一样，但是启用适当的项目方面解决了我们遇到的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T15:41:31.907

您需要安装[m2eclipse-wtp](https://github.com/sonatype/m2eclipse-wtp) 0.15.x（来自[http://download.jboss.org/jbosstools/updates/m2eclipse-wtp/](http://download.jboss.org/jbosstools/updates/m2eclipse-wtp/)）。它包含必要的配置器，以根据您的 pom.xml 配置正确设置 Java EE 项目所需的项目方面。

请注意 m2eclipse-wtp 正在迁移到 Eclipse 基础并被[m2e-wtp](https://www.eclipse.org/m2e-wtp/)取代。m2e-wtp 0.16.0 将于 2012 年 9 月 28 日发布。在此之前，您可以尝试使用最新的[候选版本](https://www.eclipse.org/m2e-wtp/download/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T13:20:38.350

尝试在 Package Explorer 中选择项目并执行 Maven --> Update Project Configuration

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T18:47:40.010

当我认为我实际上是在使用“包资源管理器”视图时，我在使用“项目资源管理器”视图时遇到过这样的事情。这两个视图将以不同的方式显示您的项目。

# wpf - 如何根据 Grid 的样式设置 Grid 中任何子元素的前景色？

> ID：12197667
> 
> 赞同：14
> 
> 时间：2012-08-30T13:12:06.237
> 
> 标签：wpf, xaml, styles

如何设置网格样式`Foreground`中所有子元素的颜色？`Grid`我知道我以前做过，但我不记得在哪里或如何做。

```
<Style x:Key="MyGridStyle" TargetType="{x:Type Grid}">
    // I want to set the font color here
</Style>

<Grid Style="{StaticResource MyGridStyle}">
    ...
</Grid> 
```

我知道我可以使用

```
<Grid.Resources>
    <Style TargetType="{x:Type TextBlock}">
        <Setter Property="Foreground" Value="Red" />
    </Style>
    <Style TargetType="{x:Type TextBox}">
        <Setter Property="Foreground" Value="Red" />
    </Style>
</Grid.Resources> 
```

但是我想在 中设置这个值`Style`，而不是在`Grid`

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-30T13:13:54.300

想通了，我只需要设置默认样式`<Style.Resources>`

```
<Style x:Key="MyGridStyle" TargetType="{x:Type Grid}">
    <Style.Resources>
        <Style TargetType="{x:Type TextBlock}">
            <Setter Property="Foreground" Value="Red" />
        </Style>
        <Style TargetType="{x:Type TextBox}">
            <Setter Property="Foreground" Value="Red" />
        </Style>
    </Style.Resources>
</Style> 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-08-30T13:16:24.517

怎么样：

```
<Style x:Key="MyGridStyle" TargetType="{x:Type Grid}">
    <Setter Property="TextElement.Foreground" Value="Red"/>
</Style> 
```

# reporting - 连接 Birt Report 与 Google Sql Cloud

> ID：12197672
> 
> 赞同：3
> 
> 时间：2012-08-30T13:12:30.720
> 
> 标签：reporting, google-cloud-sql

我正在创建报告：-

按照我们的指示，使用 Google SQL Cloud 开发报告软件。需要先配置 Google SQL Cloud。

你有什么建议吗？我是新手。但我了解 birt eclipse 报告。我可以为它使用 birt eclipse 报告吗？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T21:38:33.740

以下是将报告工具连接到 Cloud SQL 的文档。我不知道 Birt 的具体情况，但这些说明应该为您指明正确的方向。 [https://developers.google.com/cloud-sql/docs/admin_tools](https://developers.google.com/cloud-sql/docs/admin_tools)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-14T15:52:59.023

出于开发目的：

第 1 步 - 下载连接器 J - [https://dev.mysql.com/downloads/connector/j/](https://dev.mysql.com/downloads/connector/j/)

第 2 步 - 在 Eclipse 中，数据资源管理器 > 数据源（右键单击）> 新数据源 > JDBC 数据源（并命名您的源）> 下一步..

第 3 步 - 在填写表格之前单击“管理驱动程序...”> 添加.. > 选择从第 1 步中提取的 .JAR

第 4 步 - 选择“com.mysql.jdbc.Driver (v5.1)”，URL = jdbc:mysql://:/，用户名：root，密码：您的密码，JNDI 空白

第 5 步 - 测试连接。检查以确保您的数据库允许不安全的连接，并且控制台中允许您连接的 IP。

# regex - perl中用于字符串的正则表达式

> ID：12197673
> 
> 赞同：0
> 
> 时间：2012-08-30T13:12:38.613
> 
> 标签：regex, perl

有没有人知道根据以下标准验证字符串的正则表达式：

*   名称的长度可以在 1 到 255 个字符之间。
*   允许的字符为 a–z、A–Z、0–9、“_”（下划线）、“-”（连字符）和“.” （时期）。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T13:15:24.713

使用这个正则表达式：`/^[\w\-.]{1,255}$/` 说明：[http ://regex101.com/r/tR0lR8](http://regex101.com/r/tR0lR8)

# php - 如何：联系表格自动填写登录用户的电子邮件和用户名

> ID：12197677
> 
> 赞同：0
> 
> 时间：2012-08-30T13:12:48.873
> 
> 标签：php

通常，当我构建表单时，我会包含“电子邮件”和“姓名”字段，当访问者填写它们时，我会得到预期的姓名和电子邮件。

但是现在我只为注册用户建立离线网站，现在联系表格可以看到刚刚登录的用户，我想把这些字段去掉，当你登录时可能会很沮丧，你必须重新填写你的姓名和电子邮件.

是否有可能以某种方式从登录用户中获取电子邮件并将其放入表单中，以便我知道哪个登录用户发送了表单？

*   我使用自己的代码 - 不是 joomla 或 wordpress

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:26:19.420

您只需将联系人字段上的电子邮件地址输入字段的值设置为登录用户的电子邮件地址。如果没有看到你的代码库，我无法告诉你如何做到这一点，但它会是这样的：

```
<input type="text" name="email" value="<?= htmlspecialchars($user->getEmail()) ?>"> 
```

# php - mysql_fetch_array() 期望参数 1 是资源，给定 PHP 的布尔值

> ID：12197679
> 
> 赞同：-2
> 
> 时间：2012-08-30T13:12:54.113
> 
> 标签：php, mysql

大家好，我是新来的，我很难分析这段代码。错误不断出现，我不知道该怎么办。

mysql_fetch_array() 期望参数 1 是资源，给定的布尔值

每次我使用搜索时都会发生这种情况。有任何想法吗？

```
 if(isset($_POST['search']))//if search
    {   
        if(($_POST['year']) && ($_POST['month']) && ($_POST['day']))
        $_SESSION['select']= mysql_query("SELECT * FROM ".$_SESSION['dbtable3']." WHERE eyear = '".$_POST['year']."' AND emonth = '".$_POST['month']."' AND edate = '".$_POST['day']."' ;" or die(mysql_error()));

        else if(($_POST['year']) && ($_POST['month']))
        $_SESSION['select']=mysql_query("SELECT * FROM ".$_SESSION['dbtable3']." WHERE eyear = '".$_POST['year']."' AND emonth = '".$_POST['month']."' ;" or die(mysql_error()));

        else if(isset($_POST['year']))
        $_SESSION['select']= mysql_query("SELECT * FROM ".$_SESSION['dbtable3']." WHERE eyear = '".$_POST['year']."' ;" or die(mysql_error()));

        else if(!$_POST['year'])
        die("FILL IN AT LEAST THE YEAR");

        else
        die("Date not found"); 

        if($_POST['year'])
            while($select2 = mysql_fetch_array($_SESSION['select']))
            {
                $n1 = $select2[0];
                $n2 = $select2[1];
                $n3 = $select2[2]."-".$select2[3]."-".$select2[4];

                echo
                "<tr>
                <td width=\"30px\"> $n1</td>
                <td width=\"30px\"> $n2</td>
                <td width=\"30px\"> $n3</td>
                </tr>";
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T13:14:37.290

你的每一`mysql_query()`行都是错误的。您应该在添加*之前*关闭括号`or die()`。

这就是为什么你得到一个布尔值而不是死于错误的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T13:14:45.773

```
$_SESSION['select']= mysql_query("SELECT * FROM ".$_SESSION['dbtable3']." WHERE eyear = '".$_POST['year']."' AND emonth = '".$_POST['month']."' AND edate = '".$_POST['day']."' ;" or die(mysql_error())); 
```

应该

```
$_SESSION['select']= mysql_query("SELECT * FROM ".$_SESSION['dbtable3']." WHERE eyear = '".$_POST['year']."' AND emonth = '".$_POST['month']."' AND edate = '".$_POST['day']."' ;") or die(mysql_error()); 
```

也就是说，`or die(mysql_error())`应该在*外面* `mysql_query`。

那，或者您正在通过未清理的`POST`参数注入自己的 SQL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T13:15:19.690

是的，错误说明了一切

你用

```
while($select2 = mysql_fetch_array($_SESSION['select'])) 
```

利用

```
$result = mysql_fetch_array($_SESSION['select']));

if($result) {
// go to while
} else {
  mysql_error();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T13:16:05.963

您的查询有问题：

> 对于 SELECT、SHOW、DESCRIBE、EXPLAIN 和其他返回结果集的语句，mysql_query() 成功时返回资源，错误时返回 FALSE。

Alto，您的代码中存在问题：去掉[PDO](http://php.net/manual/en/book.pdo.php)或的`mysql_*`函数，它们已被弃用：`msqli_*`

> 建议的替代品
> 
> 不鼓励使用此扩展程序。相反，应该使用 MySQLi 或 PDO_MySQL 扩展。另请参阅 MySQL：选择 API 指南和相关的常见问题解答以获取更多信息。此功能的替代方案包括：
> 
> *   mysqli_query()
> *   PDO::查询（）

# java - Java 泛型 PECS

> ID：12197685
> 
> 赞同：4
> 
> 时间：2012-08-30T13:13:03.420
> 
> 标签：java, generics, wildcard, pecs

我知道PECS是什么意思。

生产者扩展，消费者超级。

问题是我怎么知道它是消费者还是生产者？

此代码是否也遵循“PECS”

```
public class Tree<T> {

    //List of branches for this tree
    private List<Tree<? super T>> branch = new ArrayList<Tree<? super T>>();
    public Tree(T t){ this.t = t; }
    public void addBranch(Tree< ? super T> src){ branch.add(src); }
    public Tree<? extends T> getBranch(int branchNum){
        return (Tree<? extends T>) branch.get(branchNum);
    }
    private T t;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T13:16:03.683

*   *生产者*是指方法的返回类型。
*   *消费者*是指方法的参数类型。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T13:21:49.737

您可以使用的一个很好的助记符是想象`returns`for`extends`和`accepts`for `super`。

所以 a`Tree<? extends T>`读取`Tree<? returns T>`，这意味着您可以调用该`Tree`return`T`中的方法，但不能调用接受`T`作为参数类型的方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-01-01T19:44:43.437

下面的事情让我的脑海中稍微清晰了一些。希望它可以帮助你。

想象一下某个未知类型 X 的元素列表，并且有一些逻辑将列表作为 X 类型的元素显式扫描（在构建列表之后）。让我们将此逻辑称为 Logic1。

如果您要将该列表扫描为 T 类型的对象，则需要以某种形式**从 T 派生 X。**否则，您将遇到问题。因此，您的签名应该是：

```
void scan(List<? extends T>); 
```

如果要将 T 类型的对象添加到列表中，则需要**T 派生自 X**。否则上面提到的Logic1会有问题。因此，您的签名应该是：

```
void add(List<? super T>); 
```

请注意，我的理解是“扫描”和“添加”实际上都可以从列表中删除条目。我发现 PECS 有点令人困惑。“生产者”和“消费者”来自列表的角度。我不喜欢将列表视为可以执行逻辑的活动事物。我喜欢 SEAS（扫描扩展和添加超级）。只是我的2美分。

# asp.net-mvc - 在 ajax 帖子上保存会话，并在单击后退按钮时检索它

> ID：12197699
> 
> 赞同：0
> 
> 时间：2012-08-30T13:13:50.580
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-ajax

我有一个包含搜索结果和过滤栏的页面。当过滤器更改时，它会执行 ajax 发布，将过滤器保存到会话并返回带有过滤结果的部分视图。

在视图中，我从会话中提取过滤器并使用 htmlhelper 扩展将会话对象转换为 JSON。然后我将 JSON 绑定到填充选定的过滤器。

按下后退按钮时会出现我的问题。会话中更新的过滤器永远不会发送到 htmlhelper 例程，并且过滤器会丢失，直到发生回发。

有没有人遇到过这个问题？我已经尝试过 no-cache 元标记，但它似乎并没有影响它。

```
<META HTTP-EQUIV="CACHE-CONTROL" CONTENT="NO-CACHE"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T15:33:38.300

我尝试了 meta no-cache 标记的所有变体，但最后，我使用 ajax 调用从会话中提取过滤器。唯一需要注意的是，ajax 调用必须具有 cache:false 设置。

# c - 在运行 GDB 时通过 cmd 行设置中断

> ID：12197702
> 
> 赞同：11
> 
> 时间：2012-08-30T13:13:56.600
> 
> 标签：c, gdb

有没有办法在使用 GDB 时通过 cmd 行设置断点。

目前在运行 GDB，我需要设置

```
 (gdb) b fun1
 (gdb) b fun2
 (gdb) b fun3 
```

如果我再次关闭并打开 GDB，我需要设置所有断点:(。有没有办法在 cmd 行本身中为 GDB 设置断点，比如

```
 $> gdb -break fun1 -break fun2 -break fun3 ./myprog 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-30T15:59:05.757

GDB 提供 -ex 选项来设置 GDB 命令，例如从命令行调用 GDB 时的 'break' 'info' 'set print' 'display x'，如下所示

```
 $> gdb -ex 'break main' -ex 'info b' -ex 'set print pretty on' ./myprog 
```

-ex 选项的选项未在[手册页或 GDB 帮助中](http://sourceware.org/bugzilla/show_bug.cgi?id=12756)指定 ：(

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-30T13:16:22.613

将您的命令放在一个文件中，并使用该标志`break`在命令行上将该文件传递给 gdb 。`-x`

来自`man gdb`：

> ```
>  -x file
>            Execute GDB commands from file file. 
> ```

事实证明，有**一个**命令可以类似地传递命令，但在命令行上：both`-ex`和`-eval-command`允许您传递单个命令。它似乎是在版本*7中引入的：它在**gdb 6.3.5*上不可用，但在*7.3.1*中可用。`-ex`并`-eval-command`记录在在线 gdb 文档中以及[此处](http://sourceware.org/gdb/current/onlinedocs/gdb.html#File-Options)的其他命令行参数。

因此，对于您的示例：

```
$> gdb -ex 'break fun1' -ex 'break fun2' -ex 'break fun3' ./myprog 
```

其他答案让我明白了这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T16:28:51.270

您可以使用命令`gdb -ex 'b fun1' -ex 'b fun2'`（或长格式`-eval-command`）。

奇怪的是，它在 中缺失`man gdb`，但它在 中`info gdb`。当然，在来源中！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T15:51:00.120

我不知道你是否可以在gdb之外设置断点，但我知道你可以在gdb内部使用Linux命令，这样你就不必经常退出gdb。gdb 命令是`shell yourcommand`，如果你想运行 ls，只需`shell ls`在 gdb 下输入。

# php - magento 模块设置存储在哪里？

> ID：12197705
> 
> 赞同：2
> 
> 时间：2012-08-30T13:14:01.447
> 
> 标签：php, mysql, magento, magento-1.6

我想知道magento模块设置存储在哪里？它们在数据库中吗？

因为我正在使用暂存服务器，并且由于我们要迁移到新的提供商，所以我想从生产站点转储数据库并从暂存服务器获取源代码。如果不移动登台服务器，我会丢失我的设置吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T13:21:59.907

默认配置将被定义并设置在

```
/app/code/(local|community)/VendorName/ModuleName/etc/config.xml 
```

如果文件夹中还有一个`system.xml`存在，`etc`则意味着将有一些可用的管理配置。然后这些设置将保存在`core_config_data`数据库的表中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T11:43:27.663

是存储在 core_config_data 中的信息，如果您想卸载/重新安装模块（删除 core_resource 中具有模块名称的数据库记录），那么当您下次打开浏览器时，它将重新安装模块等。

# sql - SQL UPDATE 使用复合主键的表中的所有行，除了某些行

> ID：12197712
> 
> 赞同：4
> 
> 时间：2012-08-30T13:14:26.040
> 
> 标签：sql, composite-key, except

我正在为一条 SQL 语句而苦苦挣扎。

我想在具有复合主键的表中更新除某些行之外的所有行。

这就是我现在所做的：

```
UPDATE Products SET Active = 0 
```

_

```
UPDATE Products SET Active = 1
WHERE (Id_A = 1 AND Id_B = 1 AND Id_C = 1) OR
      (Id_A = 1 AND Id_B = 2 AND Id_C = 1) OR
      (Id_A = 5 AND Id_B = 8 AND Id_C = 3) OR
       .
       .
       .
       etc 
```

这行得通，但我不喜欢它。我希望能够一次完成。

有没有办法在 SQL 中做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-30T13:18:16.897

你的意思是这样的：

```
UPDATE Products SET Active = CASE WHEN
      (Id_A = 1 AND Id_B = 1 AND Id_C = 1) OR
      (Id_A = 1 AND Id_B = 2 AND Id_C = 1) OR
      (Id_A = 5 AND Id_B = 8 AND Id_C = 3) OR
       .
       .
       .
       THEN 1 ELSE 0 END 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T13:26:23.463

在某些 SQL 产品中，您可以进一步简化内部的语法`CASE`，将多个`AND`和删除`OR`为简单的`IN`：

```
UPDATE Products 
SET Active = CASE WHEN
      (Id_A, Id_B, Id_C) IN
      ( (1, 1, 5), (1, 2, 1), (5, 8, 3) ... ) 
             THEN 1 ELSE 0 
             END ; 
```

* * *

要考虑的另一件事是，如果表有很多行（如数百万或数十亿）并且只有一小部分设置为`Active=1`，那么完成更新可能会更有效是 2 个语句，类似于您从开始，假设您有一个索引`(Active)`（或部分索引`(Active=1)`）：

```
UPDATE Products SET Active = 0 WHERE Active = 1 ;

UPDATE Products SET Active = 1 WHERE ... ; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T13:21:31.297

您可以在更新语句中使用 case 表达式吗？

就像是

```
UPDATE Products
    set Active = CASE WHEN (Id_A = 1 AND Id_B = 1 AND Id_C = 1) THEN 1 
                      WHEN (Id_A = 1 AND Id_B = 2 AND Id_C = 1) THEN 1                         
                      .
                      .
                      . 
                      ELSE 0 END 
```

# php - 为什么我不能从其他文件访问 symfony 会话变量？

> ID：12197713
> 
> 赞同：0
> 
> 时间：2012-08-30T13:14:26.547
> 
> 标签：php, session, symfony, session-variables

我有一个使用 symfony 框架构建的网络应用程序。

我想合并一个 symfony 应用程序和一个 codeigniter 应用程序，而不用只使用一个框架创建一个新应用程序。因此，如果用户在 symfony 中登录，它也会在 codeigniter 中登录

现在我只是想从另一个 php 文件中访问这个 symfony 应用程序的会话变量，但该`$_SESSION`变量是空的。

（当我在这个新文件中打印它时，当我在 symfony 文件“控制器或视图”中打印它时，它会正确显示会话变量）。

这`newfile.php`与 symfony 应用程序在同一个域中，与 symfony 的 , 位于同一个文件夹`index.php`中`admin.php`。

任何人都可以帮我这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T00:21:04.547

对于 Symfony2 使用“composer”时，解决方案是

```
require_once 'PATH_TO_LIB/vendor/autoload.php';
$symfonySession = new \Symfony\Component\HttpFoundation\Session\Session($app['session.storage']);
$symfonySession->has('someVariable');
... 
```

# javascript - 在 Javascript 中对动态创建的表单字段执行验证

> ID：12197717
> 
> 赞同：0
> 
> 时间：2012-08-30T13:14:42.990
> 
> 标签：javascript, jquery, validation

我正在处理一些使用`.js`文件来处理客户端 javascript 的遗留代码。在表单上，​​用户可以通过单击加号和减号按钮即时创建字段：

![在此处输入图像描述](../Images/a10481d10ccb6a976a59f95b36507771.png)

我正在使用 jquery 执行此操作：

```
$(document).ready(function() 
{  
    var html = "<div class='registration_box01' id='showme'> <div class='title'> <h4>Additional Guest<br /></h4> </div> <div class='content'> <div class='clr'></div> <div class='label01'>*First name:</div> <div class='field01'> <input name='add_fname[]' type='text' size='40' style='min-width:250px;' /> </div> <div class='clr'></div> <div class='label01'>*Last name:</div> <div class='field01'> <input name='add_lname[]' type='text' size='40' style='min-width:250px;' /> </div> <div class='clr'></div> <div class='label01'>*Email:</div> <div class='field01'> <input name='add_email[]' type='text' size='40' style='min-width:250px;'> </div> </div> </div>";
    $(function() {
      $("#inc").click(function() { 
        var num = $(":text[name='qty']").val(function(i, v) { 
                       return Number(v) + 1;
                  }).val();
        $(this).addClass ('c' + num);
        var incrementVar = num;
        $('.additional').append(html);
      }); 

      $("#dec").click(function() {              
        $(":text[name='qty']").val(function(i, v) { 
        $("#showme").remove();
            if(Number(v) > 1){                                              
                return Number(v) - 1; 
            }
            else{    
                return 1;
            }
        });
      });  
    });
}); 
```

我的问题是如何验证 Javascript 中的动态字段？我想我不会反对在 jQuery 中添加一个函数来检查它们。我当前验证表单的功能：

[巴斯宾](http://pastebin.com/0jYr5bwX)

HTML：

```
<form action="register.php" method="post" onsubmit="return validateFrm(this);"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T13:24:51.370

我觉得一个简单的方法是给每个输入一个特定的类。例如，“名字”文本框应该具有“fname-textbox”类。在您的验证功能中，您知道所有“名字”文本框都不应该为空，并且可能至少应该有 2 个字符长（或其他字符）。所以你可以做这样的事情：

```
function validateFrm(form) {
    var isValid = true;
    var $form = $(form);
    $form.find(".fname-textbox").each(function () {
        var $this = $(this);
        var $this_val = $this.val();
        if (isNaN($this_val) && $this_val.length > 1) {
            $(this).removeClass("input-validation-error");  // won't fail if it doesn't have the class already
            // Remove any other indications of error for this field (like a "*" next to it)
        } else {
            isValid = false;
            $(this).addClass("input-validation-error");  // maybe input-validation-error has a red border and red text color?
            // Maybe add another indication of error for this field (like a "*" next to it)
        }
    });
    // And continue the validation for your other fields
    return isValid;
} 
```

# perl - perl 脚本中的 $_ 值

> ID：12197721
> 
> 赞同：0
> 
> 时间：2012-08-30T13:14:54.597
> 
> 标签：perl

我正在尝试验证我的脚本是否正确。基本上，我试图通过使用（ grep { $_ ne $1 } @ProtectSuperGroups）来避免在@ProtectSuperGroups 中重复输入。

但是，我发现 $_ 是打印空白，这让我对此表示怀疑。

```
foreach my $group (@ProtectSuperGroups)
{
    chomp($group);
    chomp($group);

    my @ProtectSuperGroupLines = qx($p4 -ztag group -o $group);

    foreach my $line (@ProtectSuperGroupLines)
    {

        if ($line =~ /\.\.\.\s+Users\d{1,3}\s+(.*)$/) 
        {
            push(@ProtectSuperUsers, "$1");

        }

        if ( ($line =~ /\.\.\.\s+Subgroups\d{1,3}\s+(.*)$/) && ( grep { $_ ne $1 } @ProtectSuperGroups)) 
        {
            push(@ProtectSuperGroups, "$1");
        }

    }
} 
```

打印 $_ 的示例程序也是空白的。

```
my @array = ( "catchme", "if", "you", "can" );
my $element = "catchme";
if (  grep { $_ eq $element } @array )
{
  print "$)\n"; 
  print "Here's what we found\n";
}
else
{
  print "Sorry, \"$element\" not found in \@array\n";
} 
```

您能否添加您的经验并建议我更好的解决方案。基本上我想避免在我的名为@ProtectSuperGroups 的数组中推送重复条目。我的 Perl 版本是 v5.8.8

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T13:26:37.800

```
if (  grep { $_ eq $element } @array ) 
```

内部`grep`,`$_`是块的本地。`$_`外面不受影响。

因此，要使您的示例正常工作，应将其重写：

```
if ( grep { $_ eq $element } @array ) {
  print "$element\n";  # There was a typographical error. You used `$)`
  print "Here's what we found\n";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T13:22:00.453

在第一次拍摄时，我没有看到您的错误，但是如果您想防止重复，您可以将您的条目添加到哈希中并在每次推送之前检查该值是否存在于哈希中

```
my %ProtectSuperGroups;
...
if ( ($line =~ /\.\.\.\s+Subgroups\d{1,3}\s+(.*)$/) && !exists $ProtectSuperGroups{$1} )
{
    push(@ProtectSuperGroups, "$1");
    $ProtectSuperGroups{$1} = 1;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T14:27:26.230

一般来说，如果想避免任何数组中的重复条目（所以想要唯一的元素），你有很多解决方案。他们两个人：

## 使用 List::MoreUtils

```
use List::MoreUtils qw(uniq);
my @unique = uniq @input_array; 
```

以上是直截了当的。

## 使用辅助哈希

```
my %helper;
my @unique = grep { ! $helper{$_}++ } @input_array; 
```

如果元素不存在于辅助哈希中，则它是唯一的，否则只计算它..

# java - 连接池的疑惑

> ID：12197727
> 
> 赞同：0
> 
> 时间：2012-08-30T13:15:12.350
> 
> 标签：java, jboss, connection-pooling

为了运行我的应用程序，我进行了战争并将其部署在 JBoss 中。
在 Jboss 中，数据源配置为最小连接池大小为 5。
我想知道几件事
1）在什么时候建立数据库连接然后池化？当 jboss 启动或当我部署我的应用程序战争并启动 jboss 或当第一个请求进入我的应用程序时，它们会被制作吗？2) 我怎样才能知道在给定时间点使用了多少连接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T13:20:55.760

它在[文档](https://community.jboss.org/wiki/ConfigDataSources)中进行了描述（粗体我的）：

> *   `<min-pool-size>`- 池中维护的最小连接数。除非`<prefill>`为真，否则**池将保持为空，直到第一次使用**时池将被填充到`<min-pool-size>`. 当池大小`<min-pool-size>`由于空闲超时而下降到低于 时，池将被重新填充到`<min-pool-size>`. 默认值为 0。

和：

> *   `<prefill>`- 是否尝试将连接池预填充到最小连接数。

对于连接池大小，请查看：[JBoss ManagedConnectionPool attributes](https://stackoverflow.com/questions/4519528)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T13:21:39.020

在`Jboss start up`您的连接池将被创建的时候

# ruby - 捆绑安装在子目录中

> ID：12197730
> 
> 赞同：1
> 
> 时间：2012-08-30T13:15:16.173
> 
> 标签：ruby, rake, bundle, bundler, sh

我想在 rake 文件的子目录中设置一个运行“bundle install”的 rake 任务。

```
sh "bundle install -somesortofoption #{DIRECTORY}" 
```

如果我这样做，我会收到错误：

```
sh "cd #{DIRECTORY} && bundle install" 
```

如果捆绑器中有一个选项来定义运行安装的路径，有什么想法吗？我一个都看不到？

谢谢

**更新：**

我也试过这个，它在 rake 文件中更改目录：

```
Dir.chdir("#{DIRECTORY}/") do
    sh "bundle install"
end 
```

但是，这似乎不是`bundle install`在此目录中而是在父目录中调用，或者至少使用该父目录中的 Gemfile。唔。

**如果我 cd 到目录，我忘了从命令行说，`bundle install`它工作正常！**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-06T21:22:51.963

我遇到了这个完全相同的问题，`Bundler.with_clean_env`在这个旧的 github 票[https://github.com/carlhuda/bundler/issues/1424](https://github.com/carlhuda/bundler/issues/1424)中进行了一些挖掘之后，这似乎完全符合我们的需要：

```
Bundler.with_clean_env { system "cd #{dir} && bundle install" } 
```

# java - 如何将现有文档中的元素添加到新文档中？

> ID：12197735
> 
> 赞同：0
> 
> 时间：2012-08-30T13:15:22.100
> 
> 标签：java, xml, dom

对于我的情况，我需要从现有 XML 文件中获取一些节点并创建一个新文档并添加现有文件中的所有节点。

如何将现有文档中的元素添加到新文档中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T13:29:48.650

可能的问题是您尝试将节点插入目标文档而不导入它。将节点导入目标文档是通过[Document.importNode](http://docs.oracle.com/javase/6/docs/api/org/w3c/dom/Document.html#importNode%28org.w3c.dom.Node,%20boolean%29)完成的。代码大致如下，当然目标文档中的确切位置应根据您的应用程序进行更改：

```
 NodeList list ...
    for(int i=0; i < list.getLength(); i++){
        Node nodeToImport = list.item(i);
        Node importedNode = targetDocument.importNode(nodeToImport, true);
        targetDocument.getDocumentElement().appendChild(importedNode);
    } 
```

# android - BaseAdapter 的 Android Listview 刷新问题

> ID：12197743
> 
> 赞同：0
> 
> 时间：2012-08-30T13:15:51.623
> 
> 标签：android, android-layout

我正在使用 BaseAdapetr 创建和管理 listView。在每个列表视图项中，我必须显示正在下载背景的图像。成功下载后，将侦听器发送到 UI 以刷新所有列表项的图像。

我在 UI 中尝试了 ListView 的 invalidate() 和 invalidateViews() 函数来引用完整列表，但没有运气。我尝试了 BaseAdapetr 的 notifyDataSetChanged() 并且仍然无法引用列表项。

**刷新所有列表视图项目的方法是什么？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T13:19:56.803

再次为新列表定义一个 BaseAdapter，然后使用`setListAdapter`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T13:23:13.337

当您的数据发生更改时，更新或设置您的列表视图，如下面的代码。您只需在使用以下要在刷新后更新的代码之前更改您的数组列表的值。

```
 adapter = new AlertsDetailAdapter(this,ParseAlertsDetailInfo.InvoiceNumber,ParseAlertsDetailInfo.Supplier,ParseAlertsDetailInfo.Value);
    listview.setAdapter(adapter); 
```

希望它能帮助你解决你的问题

# .htaccess - Mod_Rewrite 错误 310 TOO_MANY_REDIRECTS

> ID：12197749
> 
> 赞同：2
> 
> 时间：2012-08-30T13:16:09.583
> 
> 标签：.htaccess, mod-rewrite

我想在 .htaccess 中使用此代码制作漂亮的 URL（contact.php?id=something to contact/something），但是当我使用它时，我的浏览器显示错误 310 - 重定向过多。

```
Options +FollowSymlinks

RewriteEngine On
RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-d 
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^contact/(.*)$ contact.php?id=$1 [L]

RewriteCond %{QUERY_STRING} ^id=(.*)$
RewriteRule ^contact.php$ /contact/%1? [R,L] 
```

有人可以帮助我，有什么问题吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T15:00:11.953

您的问题是您将contact/重定向到contact.php，然后将contact.php重定向到contact（参见无限循环？）

要解决此问题，您可以在第一条规则中添加另一个无用的参数（另一件事是您应该在最后一条规则中使用 R=301 而不仅仅是 R 标志，这意味着重定向是永久性的，而不是临时的，但这不会导致任何问题）：

```
Options +FollowSymlinks

RewriteEngine On
RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-d 
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^contact/(.*)$ contact.php?id=$1&r=0 [L]

RewriteCond %{QUERY_STRING} ^id=([^\&]*)$
RewriteRule ^contact.php$ /contact/%1? [R=301,L] 
```

# wcf - 如何从 Silverlight 应用程序获取 ClientCredentials？

> ID：12197754
> 
> 赞同：1
> 
> 时间：2012-08-30T13:16:23.317
> 
> 标签：wcf, silverlight, silverlight-5.0

我有一个 Silverlight 5 应用程序，它连接到使用集成安全性（在 IIS 中）保护的 WCF 服务。

在从 WCF 服务（代理）调用方法或函数之前，如何在 WCF 代理中设置 ClientCredentials？

# php - 限制单词的功能，然后显示剩余的文本

> ID：12197756
> 
> 赞同：2
> 
> 时间：2012-08-30T13:16:29.830
> 
> 标签：php, explode, implode

我有一个 div 有一个阅读更多按钮。阅读更多按钮展开文本，展开的文本位于其下方的第二个 div 中。完全卡住了。请帮忙。下面的代码：

```
<?PHP

function limit_words($string, $word_limit){
    $words = explode(" ",$string);
    return implode(" ",array_splice($words,0,$word_limit));
}

$text = "Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem. Nulla consequat massa quis enim. Donec pede justo, fringilla vel, aliquet nec, vulputate eget, arcu. In enim justo, rhoncus ut, imperdiet a, venenatis vitae, justo. Nullam dictum felis eu pede mollis pretium. Integer tincidunt. Cras dapibus. Vivamus elementum semper nisi. Aenean vulputate eleifend tellus.";

?>

<div class="slidewrap">
    <img src="images/slides/image.jpg" alt="Image Title" />
    <h3>Title</h3>
    <p><?PHP echo(limit_words($text,50)); ?></p>
    <p><a href="#" class="readmore"><img src="images/icons/readmore.png" alt="" /></a></p>
    <div class="readmorexpand">
        <p><?PHP echo($leftovertext); ?></p>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T13:17:49.650

试试这个：

```
<?php
function limit_words($string, $word_limit){
    $words = explode(" ",$string);
    return implode(" ",array_splice($words,0,$word_limit));
}

$text = "Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem. Nulla consequat massa quis enim. Donec pede justo, fringilla vel, aliquet nec, vulputate eget, arcu. In enim justo, rhoncus ut, imperdiet a, venenatis vitae, justo. Nullam dictum felis eu pede mollis pretium. Integer tincidunt. Cras dapibus. Vivamus elementum semper nisi. Aenean vulputate eleifend tellus.";

$start = limit_words($text,50);
$end = str_replace($start, '', $text);
?>

<div class="slidewrap">
    <img src="images/slides/image.jpg" alt="Image Title" />
    <h3>Title</h3>
    <p><?php echo $start; ?></p>
    <p><a href="#" onclick="document.getElementById('readmorexpand').style.display = '';" class="readmore"><img src="images/icons/readmore.png" alt="" /></a></p>
    <div class="readmorexpand" id="readmorexpand" style="display:none">
        <p><?php echo $end; ?></p>
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-21T04:36:20.703

上面的代码对我很有用。只是想分享我的代码，我还添加了小代码来检查我是否需要处理字符串。下面的代码将在将字符串处理为 array_splice 之前检查字符串计数，以确保提供的字符串是否需要缩短。

```
 function limit_words($string, $word_limit){
        $words = explode(" ",$string);
        if(count($words)>$word_limit){
           return implode(" ",array_splice($words,0,$word_limit));
        }else{
           return $string;
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T13:25:11.217

您从哪里“获取”剩余文本？

尝试这样的事情：

```
<?PHP

function limit_words($string, $word_limit){
    $words = explode(" ",$string);
    $ar = array();
    $ar[] = implode(" ",array_splice($words,0,$word_limit));
    $ar[] = implode(" ",array_splice($words,$word_limit));
    return $ar;
}

$text = "Lorem ipsum dolor ... snip ...  eleifend tellus.";

/** $ar contains the text split at the 50th "word" */
$ar = limit_words($string, 50)

?>

<div class="slidewrap">
    <img src="images/slides/image.jpg" alt="Image Title" />
    <h3>Title</h3>
    <p><?PHP echo $ar[0]; ?></p>
    <p><a href="#" class="readmore"><img src="images/icons/readmore.png" alt="" /></a></p>
    <div class="readmorexpand">
    <p><?PHP echo $ar[1]; ?></p>
    </div>
</div> 
```

# jquery - 我如何忽略 jquery mobile 绑定的事件

> ID：12197758
> 
> 赞同：1
> 
> 时间：2012-08-30T13:16:33.187
> 
> 标签：jquery, jquery-mobile

我正在使用 jquery 和 jquery mobile 来构建网站。

我有一个屏幕，用户可以在其中输入一些过滤器，当输入发生变化时，会触发一些事件。

问题是输入字段定义为`data-type="search"`：

```
<input placeholder="Filter items..." data-type="search" class="filter" value="" I18N="FILTER_ITEMS" data/> 
```

所以 Jquery mobile 会自动添加一个“X”图标来清除搜索字段。

![搜索栏](../Images/2e091c1ff91d6b3d2329749d9967f4ce.png)

在我的 js 中，我已将更改事件绑定到输入字段，因此一旦用户从该字段中退出，它将触发：

```
$('.textFilter .filter').change(function(){
            FILTER_OBJ.addTextFilters($(this));
 }); 
```

但是当用户单击jquery mobile添加的'X'按钮时也会触发它，那么我怎么知道它何时被'X'按钮触发所以我可以忽略它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T15:47:06.377

`X`与用户手动清空字段相比，单击清除的数据应该没有区别。

这两个动作都会从输入框中清除数据，因此触发更改事件并被同等对待是有意义的。

正如您在原始帖子评论中的回复中指出的那样，您添加的任何用于检查空值的代码都应该有效，无论哪些操作导致输入框被清空。

# c - 将汇编程序反编译为 c

> ID：12197759
> 
> 赞同：3
> 
> 时间：2012-08-30T13:16:38.073
> 
> 标签：c, assembly, decompiling, pic

我面临着在一个超过 10,000 行的汇编程序中发现一个错误，并在未来对其进行维护。它涉及 PIC18 微芯片微控制器的汇编代码。该代码是由一位不再可用的前同事编写的，他没有留下任何文档，而且他的代码的注释也很差。

该代码还使用了许多直接 goto 和 bra 以及相关的（例如 $+0x06），所以我非常害怕编辑它。

我宁愿将他的汇编源代码反编译成“新的”C 代码（或 C++）并从那里开始工作。我想知道：

1.  反编译的汇编器 -> C 代码是否 100% 正常运行？
2.  直接和相对 goto 会发生什么？
3.  是否有任何免费或便宜的工具可用于反编译 PIC18 代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T13:22:28.973

这是我的看法：

1.  不，我希望这是可能的，因为不能保证 C 可以准确地表达特定 CPU 可以在汇编级别执行的所有操作，其方式足够直截了当，可以在反编译器中实现。当然，他们都是都灵完整的，但魔鬼肯定在细节中，在这里。
2.  例如，这是一个特殊的问题。在汇编中当然有可能跳转到例如 C 语句的中间，这使得反转变得复杂。
3.  我不这么认为，不。

有关问题空间的更多信息，请查看[Boomerang 项目的常见问题解答](http://boomerang.sourceforge.net/FAQ.php)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T14:03:05.257

非 mips 图片对编译器非常不友好，使用 C 语言在消耗限制资源方面速度慢且成本高。

gotos 和分支是处理器的工作方式，它们没有错。

我将首先删除相关分支并用标签替换它们，通过比较修改前代码和修改后代码的二进制文件，您应该可以轻松检查您是否添加了新错误。一旦相关分支都使用标签，您就可以添加或删除代码，而不必担心破坏其他内容。

反编译器不工作也不能工作。这就像试图将午餐时吃的炸薯条从肠道中取出并试图恢复原来的马铃薯（当然不带皮，除非它们是带皮的薯条）。原始源代码在成为提供给汇编器的 asm 之前已经经过多次烹调和处理，然后如果您使用对象和链接器，它会再次被烹调（嗯……预热）。在无法恢复的过程中丢失了太多的材料。

很有可能进行静态二进制翻译，并获得 C 语言中的某些内容，但比 asm 更难阅读和维护，尤其是对于带有标志的体系结构。翻译器不会完美地删除所有死代码。每条加法指令都将是加法本身加上检测溢出的代码，如果溢出设置标志，否则清除，如果结果等于 0，则设置标志，否则如果 msbit 设置则清除设置 n 位，否则清除，如果有av 位然后如果有符号溢出则设置 v 位否则清除，一行简单的 asm 变成 10 行 C 代码，除非翻译器可以自动删除该死代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T16:56:14.140

虽然反编译本身在某种程度上是可能的，但它是否适用于您的情况是另一回事，这取决于可用的软件。就我个人而言，我会开始手动破译代码并用 C 粗略地重构代码。当然，这是一项乏味的任务，可能会涉及很多错误和错误，但如果你应该维护代码库，那么尝试制作是显而易见的以后该任务尽可能简单——也许未来的维护者也会欣赏你的工作。

# c# - ASP.NET MVC4 中复杂类的验证失败

> ID：12197763
> 
> 赞同：6
> 
> 时间：2012-08-30T13:16:41.320
> 
> 标签：c#, asp.net, asp.net-mvc

在使用 DataAnnotation 验证 ASP.NET MVC4 中的复杂类时遇到了问题。

让我们有一个以下模型（简化）

```
public class Customer
{
   [Required]
   [StringLength(8, MinimumLength = 3)]        
   public string UserName { get; set; }

   [Required]
   [StringLength(8, MinimumLength = 3)]
   public string DisplayName { get; set; }
}

public class Order
{
    public Customer customer { get; set; }
} 
```

然后我尝试在我的控制器中验证这个模型的一个实例：

```
// CREATE A DUMMY INSTANCE OF THE MODEL 
Customer cust = new Customer();
cust.UserName = "x";
cust.DisplayName = "x";

Order orderModel = new Order();
orderModel.customer = cust;

// VALIDATE MODEL
TryValidateModel(orderModel); // ModelState.IsValid is TRUE (which is incorrect)
TryValidateModel(cust); // ModelState.IsValid is FALSE (whic is correct} 
```

orderModel 的验证应该失败，因为 cust.UserName 只有 1 个字符，但模型需要 3 个字符。同样适用于 cust.DisplayName。但是当我验证一个纯客户类时，它会按预期失败。

知道有什么问题吗？

谢谢

吉里

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T18:30:38.717

DataAnnotations 不会自行挖掘您的对象。你有两个选择：

1--编写自定义验证器来检查子属性

2--创建一个视图模型，其中填充了用数据注释装饰的简单属性

# javascript - 如何使用来自 mozilla 附加组件的页面的 jQuery 方法？

> ID：12197764
> 
> 赞同：2
> 
> 时间：2012-08-30T13:16:47.527
> 
> 标签：javascript, firefox-addon, firefox-addon-sdk

当用户单击附加小部件时，我想在加载的页面上实现这一点：

```
var e = jQuery.Event("keydown", { keyCode: 405 }); 
$("input").trigger(e); 
```

jQuery 已经加载到目标页面中。我试过这个：

```
var widgets = require("widget");
var tabs = require("tabs");
var pageMod = require("page-mod");

var widget = widgets.Widget({
    id: "button-test",
    label: "button-test",
    contentURL: "http://www.mozilla.org/favicon.ico",
    onClick: function() {
        tabs.activeTab.attach({
            contentScript:
                'var e = window.jQuery.Event("keydown", { keyCode: 405 }); $("input").trigger(e);'
        });
    }
}); 
```

我在控制台中收到以下错误：

```
Timestamp: 30/08/2012 14:06:36
Error: An exception occurred.
Traceback (most recent call last):
  File "javascript:var e = window.jQuery.Event("keydown", { keyCode: 405 }); $("input").trigger(e);", line 1, in 
TypeError: window.jQuery is undefined 
```

我需要 postMessage 还是 port.emit()？我也试过 jQuery.event （没有窗口）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T07:55:28.147

> jQuery 已经加载到目标页面中。

是的，网页可以访问它。但是，出于安全原因，您的内容脚本[无法直接访问网页。](https://addons.mozilla.org/en-US/developers/docs/sdk/1.9/dev-guide/guides/content-scripts/accessing-the-dom.html)您*可以*访问 jQuery（以及页面定义的其他 JavaScript 变量），`unsafeWindow.jQuery`但这具有严重的安全隐患 - 不建议使用。在您的情况下，最好将您自己的 jQuery 副本添加到您的扩展并使用您的内容脚本加载它 - 然后您可以确定 jQuery 在那里并且完全按照您的预期执行：

```
var {data} = require("self");
tabs.activeTab.attach({
    contentScriptFile: [data.url("jquery.js"), data.url("contentScript.js")]
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T13:19:46.373

这对我有用：

```
var widgets = require("widget");
var tabs = require("tabs");
var data = require("self").data;

var widget = widgets.Widget({
    id: "div-show",
    label: "Show divs",
    contentURL: "http://www.mozilla.org/favicon.ico",
    onClick: function() {
        tabs.activeTab.attach({
            contentScriptFile:
                [data.url("jquery-1.8.0.min.js")],
            contentScript: [
                "$(window).keydown(function(e){ \
                console.log(e.keyCode);}); $(window).trigger(jQuery.Event('keydown', { keyCode: 405 })) "]

        });
    }
}); 
```

单击小部件图标会生成一个 keydown 事件，然后记录该事件

# ios - 汉化

> ID：12197765
> 
> 赞同：5
> 
> 时间：2012-08-30T13:16:52.997
> 
> 标签：ios, localization

我已经通过 InfoPlist.strings 文件（en.lproj/InfoPlist.strings、de.lproj/InfoPlist.strings 等）在我的 iOS 应用程序中插入了多语言支持。

当我更改 iPhone 上的语言设置并运行应用程序时，我可以看到除繁体中文以外的所有语言的本地化字符串（韩文和日文都可以正常工作）！对于这种语言，我使用 zh.lproj/InfoPlist.strings 文件夹。

我已经仔细检查了捆绑包中是否存在 zh.lproj/InfoPlist.strings 文件。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T11:48:26.177

是的，应该是 zh-Hant.lproj/。

请仔细检查您是否从应该是中文（zh-Hant）的菜单中选择了正确的菜单。简体中文应该是中文（zh-Hans）菜单项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-12T18:40:19.997

通过选择项目下的“信息”选项卡，然后选择所需的语言，可以在 iOS 应用程序中添加多语言支持。对于繁体中文，在finder 中创建一个名为“zh-Hant.lproj”的文件夹。而对于简体中文，创建一个名为“zh-Hans.lproj”的文件夹。

如果您将文件夹名称从“zh.lproj”重命名为“zh-Hant.lproj”，这将在项目中添加本地化并且它会完美运行。

此解决方案也适用于 iOS 8。

# xcode - Xcode 4.5 的临时安装失败

> ID：12197767
> 
> 赞同：2
> 
> 时间：2012-08-30T13:17:00.767
> 
> 标签：xcode, ad-hoc-distribution

如果我使用 Xcode 4.5 DP4 构建它，我有一个应用程序不会使用 adhoc 通过 iTunes 10.6.3 安装。如果我使用 Xcode 4.4.1 构建它，它工作正常。

配置文件和设置似乎一切都很好，我重新检查了所有内容。还有人看到这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T08:51:13.833

如果您绝对确定您的配置文件是有效的并且一切正常，您应该仔细检查目标构建设置的“有效架构”，并确保您已删除 armv6。

Xcode 4.5 放弃了对 armv6 的支持（[Xcode 4.5 发行说明](http://developer.apple.com/library/ios/#releasenotes/DeveloperTools/RN-Xcode/_index.html)，更改 ID 12282156）。如果您包含它，您的 ipa 将无法安装并显示“安装失败”消息。

# c++ - 在 std::unordered_set 上：请求具有默认哈希的类型列表

> ID：12197768
> 
> 赞同：0
> 
> 时间：2012-08-30T13:17:01.407
> 
> 标签：c++, c++11

在哪里可以找到具有默认哈希的类型（内置类型和标准容器）列表？`unordered_set`（所以当我使用那种类型时我不需要写一个。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T13:19:35.793

[您可以在此处](http://en.cppreference.com/w/cpp/utility/hash)找到 C++ 标准中定义的专业化列表。但你不必知道这些，编译器会告诉你是否需要提供自己的哈希函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T13:19:57.397

C++ 标准将包含这样一个列表。而不是挖掘它，这里是一个部分列表：

*   原始类型

*   指针类型；`shared_ptr<T>`和`unique_ptr<T, D>`

*   `std::basic_string<...>`专业。

*   `std::thread:id`

*   `std::type_index`

*   `std::error_code`

最重要的是*，*`pair`和`tuple`不`array`包括在内。标准库中不包含关键的 composer 函数，但您可以随意从 Boost 中获取。*`hash_combine`*

# matlab - 信号中的八度频谱图“频谱图”如何工作？

> ID：12197769
> 
> 赞同：1
> 
> 时间：2012-08-30T13:17:05.290
> 
> 标签：matlab, fft, octave, spectrogram

我正在尝试测试位于 Octave 信号包中的 specgram 函数，但我对 specgram 的输入/输出变量有点困惑。我想做的是能够将频谱图数据放入一个数组中，该数组将显示频率开始和停止时的频率和时间长度。

请参阅下面的示例代码：我试图让数组显示 t1 的长度为 7hz，t2 为 12hz，t3 为 2hz。我该怎么做呢？

我正在使用 ubuntu 12.04 和 octave 3.2.4 以及信号包 1.0.11

```
% combines sig with spectra plot
clear all,clc,tic;
fs=1000;
t1=linspace(0,2*pi,fs/0.1); %need to round off no decimals
t2=linspace(0,2*pi,fs/0.3); %need to round off no decimals
t3=linspace(0,2*pi,fs/0.6); %need to round off no decimals

%Create signal in different arrays
y1=sin(7*t1);
y2=sin(12*t2);
y3=sin(2*t3);

%append arrays to test specgram
yt = [y1 y2 y3];

%plot(yt) %will show combined plot

%Spectrum section
yts=specgram(yt',20,500, 2,1);
plot(yts)
fprintf('\nfinally Done-elapsed time -%4.4fsec- or -%4.4fmins- or -%4.4fhours-\n',toc,toc/60,toc/3600); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-25T19:04:18.940

这是一些可以执行此操作的示例代码。比有人告诉您升级软件并阅读说明要好得多。

```
fs = 100;
t = 0:1/fs:10;
x = [sin(2*pi*7*t), sin(2*pi*12*t), sin(2*pi*2*t)];
specgram(x,256,1000, [],200); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-30T13:50:21.657

**你说你使用的是 Octave 3.2.4，现在最新的是 3.6.2，明显过时了。** [ftp://ftp.gnu.org/gnu/octave/](ftp://ftp.gnu.org/gnu/octave/)

**你说你用的是信号包1.0.11，最新的是1.1.3，有点过时了。** [http://octave.sourceforge.net/signal/index.html](http://octave.sourceforge.net/signal/index.html)

每当处理功能无法正常工作的原因时，请始终获取最新和最好的版本。

**你读过信号包函数specgram的官方octave文档吗？**

[http://octave.sourceforge.net/signal/function/specgram.html](http://octave.sourceforge.net/signal/function/specgram.html)

**在你这样做之后，你是否为 specgram 运行了一些演示？他们为你工作吗？**

[http://octave.sourceforge.net/signal/function/specgram.html](http://octave.sourceforge.net/signal/function/specgram.html)

**以下是八度音阶谱图的来源，它包含有关其工作原理的评论。它可能会阐明如何正确使用它：**

```
## Copyright (C) 2000 Paul Kienzle
##
## This program is free software and may be used for any purpose.  This
## copyright notice must be maintained. Paul Kienzle is not responsible
## for the consequences of using this software.
## usage: [S, f, t] = spectrogram(x, Fs, window, step, maxF, shape, minE)
##
## Generate a spectrogram for the signal. This chops the signal into
## overlapping slices, windows each slice and applies a Fourier
## transform to determine the frequency components at that slice. 
##
## x:      signal to analyse
## Fs:     sampling rate for the signal
## window: analysis window length (default 30 msec)
## step:   time between windows, start to start (default 5 ms)
## maxF:   maximum frequency to display (default 4000 Hz)
##    Alternatively, use [maxF, nF], where nF is the minimum
##    of frequency points to display.  If nF is greater than
##    what it would normally be for the given window size and
##    maximum displayed frequency, the FFT is zero-padded until
##    it at least nF points are displayed on the y axis.
## shape:  window analysis function (default 'hanning')
##    Shape is any function which takes an integer n and returns
##    a vector of length n.  If shape contains %d and ends with
##    ')', as for example '(1:%d)' or 'kaiser(%d,0.5)' do, then 
##    %d is replaced with the desired window length, and the
##    expression is evaluated.
## minE:   noise floor (default -40dB)
##    Any value less than the noise floor is clipped before the
##    spectrogram is displayed.  This limits the dynamic range
##    that your spectrogram must accomodate.  Alternatively,
##    use [minE, maxE], where maxE is the clipping ceiling, also
##    in decibels.
##
## Return values
##    S is the spectrogram in S with linear magnitude normalized to 1.
##    f is the frequency indices corresponding to the rows of S.
##    t is the time indices corresponding to the columns of S.
##    If no return value is requested, the spectrogram is displayed instead.
##
## Global variables
##    spectrogram_{window,step,maxF,nF,shape,minE,maxE} can override
##    the default values with your own.
##
## To make a good spectrogram, generating spectral slices is only half
## the problem.  Before you generate them, you must first choose your
## window size, step size and FFT size.  A wide window shows more
## harmonic detail, a narrow window shows more formant structure.  This
## defines your time-frequency resolution. Step size controls the
## horizontal scale of the spectrogram. Decrease it to stretch, or
## increase it to compress. Certainly, increasing step size will reduce
## time resolution, but decreasing it will not improve it much beyond
## the limits imposed by the window size (you do gain a little bit,
## depending on the shape of your window, as the peak of the window
## slides over peaks in the signal energy).  The range 1-5 msec is good
## for speech. Finally, FFT length controls the vertical scale, with
## larger values stretching the frequency range.  Clearly, padding with
## zeros does not add any information to the spectrum, but it is a
## cheap, easy and good way to interpolate between frequency points, and
## can make for prettier spectrograms.
##
## After you have generated the spectral slices, there are a number of
## decisions for displaying them.  Firstly, the entire frequency range
## does not need to be displayed.  The frequency range of the FFT is
## determined by sampling rate.  If most of your signal is below 4 kHz
## (in speech for example), there is no reason to display up to the
## Nyquist frequency of 10 kHz for a 20 kHz sampling rate.  Next, there
## is the dynamic range of the signal.  Since the information in speech
## is well above the noise floor, it makes sense to eliminate any
## dynamic range at the bottom end.  This is done by taking the max of
## the normalized magnitude and some lower limit such as -40 dB.
## Similarly, there is not much information in the very top of the
## range, so clipping to -3 dB makes sense there. Finally, there is the
## choice of colormap.  A brightness varying colormap such as copper or
## bone gives good shape to the ridges and valleys.  A hue varying
## colormap such as jet or hsv gives an indication of the steepness of
## the slopes.

## TODO: Accept vector of frequencies at which to sample the signal.
## TODO: Consider accepting maxF (values > 0), shape (value is string)
## TODO:    and dynamic range (values <= 0) in any order.
## TODO: Consider defaulting step and maxF so that the spectrogram is
## TODO:    an appropriate size for the screen (eg, 600x100).
## TODO: Consider drawing in frequency/time grid; 
## TODO:    (necessary with automatic sizing as suggested above)
## TODO: Consider using step vs. [nT, nF] rather than maxF vs [maxF, nF]
## TODO: Figure out why exist() is so slow: 50 ms vs 1 ms for lookup. 

function [S_r, f_r, t_r] = spectrogram(x, Fs, window, step, maxF, shape, minE)
global spectrogram_window=30;
global spectrogram_step=5;
global spectrogram_maxF=4000;
global spectrogram_shape="hanning";
global spectrogram_minE=-40;
global spectrogram_maxE=0;
global spectrogram_nF=[];

if nargin < 2 || nargin > 7
    usage ("[S, f, t] = spectrogram(x, fs, window, step, maxF, shape, minE)");
end

if nargin<3 || isempty(window), 
    window=spectrogram_window; 
endif
if nargin<4 || isempty(step), 
    step=spectrogram_step; 
endif
if nargin<5 || isempty(maxF), 
    maxF=spectrogram_maxF; 
endif
if nargin<6 || isempty(shape), 
    shape=spectrogram_shape;
endif
if nargin<7 || isempty(minE), 
    minE=spectrogram_minE; 
endif
if any(minE>0)
    error ("spectrogram clipping range must use values less than 0 dB");
endif
if length(minE)>1,
    maxE=minE(2); 
    minE=minE(1); 
else
    maxE = spectrogram_maxE;
endif
if length(maxF)>1,
    min_nF=maxF(2);
    maxF=maxF(1);
else
    min_nF=spectrogram_nF;
endif

## make sure x is a column vector
if size(x,2) != 1 && size(x,1) != 1
    error ("spectrogram data must be a vector");
end
if size(x,2) != 1, x = x'; end

if (maxF>Fs/2)
    ## warning("spectrogram: cannot display frequencies greater than Fs/2");
    maxF = Fs/2;
endif

step_n = fix(step*Fs/1000);    # one spectral slice every step ms

## generate window from duration and shape function name
win_n = fix(window*Fs/1000);
if shape(length(shape)) == ')' 
    shape = sprintf(shape, win_n);
else
    shape = sprintf("%s(%d)", shape, win_n);
endif
win_vec = eval(strcat(shape,";"));
if size(win_vec,2) != 1, win_vec = win_vec'; endif
if size(win_vec,2) != 1 || size(win_vec,1) != win_n,
    error("spectrogram %s did not return a window of length %d", \
        shape, win_n);
endif

## FFT length from size of window and number of freq. pts requested
fft_n = 2^nextpow2(win_n);    # next highest power of 2
dF = Fs/fft_n;                # freq. step with current fft_n
nF = ceil(maxF(1)/dF);        # freq. pts with current fft_n,maxF
if !isempty(min_nF)           # make sure there are at least n freq. pts
    if min_nF > nF,             # if not enough
    dF = maxF/min_nF;            # figure out what freq. step we need
    fft_n = 2^nextpow2(Fs/dF);   # figure out what fft_n this requires
    dF = Fs/fft_n;               # freq. step with new fft_n
    nF = ceil(maxF/dF);          # freq. pts with new fft_n,maxF
    endif
endif

## build matrix of windowed data slices
offset = 1:step_n:length(x)-win_n;
S = zeros (fft_n, length(offset));
for i=1:length(offset)
    S(1:win_n, i) = x(offset(i):offset(i)+win_n-1) .* win_vec;
endfor

## compute fourier transform
S = fft (S);
S = abs(S(1:nF,:));        # select the desired frequencies
S = S/max(S(:));           # normalize magnitude so that max is 0 dB.
S = max(S, 10^(minE/10));  # clip below minF dB.
S = min(S, 10^(maxE/10));  # clip above maxF dB.

f = [0:nF-1]*Fs/fft_n;
t = offset/Fs;
if nargout==0
    imagesc(f,t,20*log10(flipud(S)));
else
    S_r = S;
    f_r = f;
    t_r = t;
endif

endfunction 
```

**谱图输入：**

```
usage: [S [, f [, t]]] = specgram(x [, n [, Fs [, window [, overlap]]]]) 

x: vector of samples

n: size of fourier transform window, or [] for default=256

Fs: sample rate, or [] for default=2 Hz

 window:shape of the fourier transform window, or [] for default=hanning(n)

 Note:window length can be specified instead, in which case window=hanning(length)

 overlap:overlap with previous window, or [] for default=length(window)/2 
```

**谱图输出：**

```
S is complex output of the FFT, one row per slice

f is the frequency indices corresponding to the rows of S.

t is the time indices corresponding to the columns of S. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-22T20:59:07.987

## 从源代码在 Fedora Linux 中安装 specgram 的演练。

如果您想真正了解 Specgram 的工作原理。您必须从源代码安装它，以便在它运行时在引擎盖下四处寻找。我在 64 位 Fedora 17 机器上演示了这一点。我假设您有一个名为`el`. 我之前安装了 3.6.3，发现 specgram 需要 3.8.0。所以在这个演练中是一个升级的例子。

**创建一个新目录 /home/el/foo3，启动 octave 命令行并测试它：**

```
el@defiant ~/foo3 $ octave
octave:4> [5,5]
ans =

   5   5 
```

**`wegetsignal.m`在 /home/el/foo3 下创建一个使用此代码调用的新文件并运行它：**

```
startfreq=200;
fs=44100;
endfreq=20;
dursec= 10;%duration of signal in seconds
t=(0:dursec*fs)/fs; %Time vector
alpha=log(startfreq/endfreq)/dursec;
sig = exp(-j*2*pi*startfreq/alpha*exp(-alpha*t));
sig=(sig/max(abs(sig))*.8); %normalize signal
specgram(sig,150,400); 
```

**运行：**

```
el@defiant ~/foo3 $ octave wegetsignal.m
GNU Octave, version 3.6.3
warning: X11 DISPLAY environment variable not set
error: `specgram' undefined near line 9 column 1
error: called from:
error:   /home/el/foo3/w.m at line 9, column 1 
```

您收到此错误是因为您尚未安装信号包。

**下载信号包：**

从这里获取 signal-1.3.0.tar.gz：http: [//octave.sourceforge.net/signal/index.html](http://octave.sourceforge.net/signal/index.html)

```
el@defiant ~/foo3 $ wget -O signal-1.3.0.tar.gz http://sourceforge.net/projects/octave/files/Octave%20Forge%20Packages/Individual%20Package%20Releases/signal-1.3.0.tar.gz/download?use_mirror=softlayer-dal&download=

el@defiant ~/foo3 $ ls
signal-1.3.0.tar.gz  wegetsignal.m

el@defiant ~/foo3 $ octave
octave:1> pkg install signal-1.3.0.tar.gz
error: the following dependencies where unsatisfied:
   signal needs octave >= 3.8.0
 signal needs control >= 2.4.5
 signal needs general >= 1.3.2 
```

好的，所以我有 octave 3.6.3，它说我们至少需要 3.8.0 让我们这样做。

**删除我的旧版本的八度：**

```
sudo yum remove octave
Removed:
  octave.x86_64 6:3.6.3-2.fc17 
```

**从源代码下载最新最好的 Octave 3.8.0**

这是我使用的步骤，可能对您有所不同

```
wget ftp://ftp.gnu.org/gnu/octave/octave-3.8.0.tar.bz2
tar -xvf octave-3.8.0.tar.bz2
cd octave-3.8.0 
```

**我需要一些额外的包，我必须一起破解，如果你还没有安装它们，你可能需要这些：**

```
yum install gcc-gfortran
yum-builddep octave
yum install lapack lapack-devel blas blas-devel 
```

**配置制作和安装**

```
./configure
make
sudo make install 
```

**测试一下，打印一个矩阵**

```
octave:1> [5, 5]
ans =

   5   5 
```

**现在安装包specgram**

```
el@defiant ~/foo3 $ octave
octave:1> pkg install signal-1.3.0.tar.gz
error: the following dependencies were unsatisfied:
   signal needs control >= 2.4.5
 signal needs general >= 1.3.2 
```

**我们需要控制和一般**

在这里找到那些：http: [//octave.sourceforge.net/packages.php](http://octave.sourceforge.net/packages.php) 并安装：

```
el@defiant ~/foo3 $ wget -O control-2.6.2.tar.gz "http://downloads.sourceforge.net/project/octave/Octave%20Forge%20Packages/Individual%20Package%20Releases/control-2.6.2.tar.gz?r=http%3A%2F%2Foctave.sourceforge.net%2Fpackages.php&ts=1393090607&use_mirror=hivelocity"

el@defiant ~/foo3 $ wget -O general-1.3.4.tar.gz "http://downloads.sourceforge.net/project/octave/Octave%20Forge%20Packages/Individual%20Package%20Releases/general-1.3.4.tar.gz?r=http%3A%2F%2Foctave.sourceforge.net%2Fpackages.php&ts=1393090783&use_mirror=softlayer-dal"

el@defiant ~/foo3 $ ls
control-2.6.2.tar.gz  octave-3.8.0          signal-1.3.0.tar.gz
general-1.3.4.tar.gz  octave-3.8.0.tar.bz2  wegetsignal.m 
```

您必须将文件移动到八度可以读取它们的位置：

```
sudo cp general-1.3.4.tar.gz /usr/local/share/octave/packages/
sudo cp control-2.6.2.tar.gz /usr/local/share/octave/packages/
sudo cp signal-1.3.0.tar.gz /usr/local/share/octave/packages/ 
```

然后你必须从 octave 交互式 shell 安装它（以 root 身份）：

```
[root@defiant foo3]# octave --no-gui

octave:1> pkg install control
octave:1> pkg install general
octave:1> pkg install signal 
```

他们每人最多需要 2 分钟才能完成。

然后在终端上你必须加载它们。

```
el@defiant ~/foo3 $ octave
octave:1> pkg load signal
octave:2> wegetsignal
doneoctave:3> 
```

它有效：

![在此处输入图像描述](../Images/bc9f5e33a54f080512e4ba7d850309f1.png)

# c# - VS 2012 中的 C# 文件没有语法高亮或智能感知

> ID：12197771
> 
> 赞同：14
> 
> 时间：2012-08-30T13:17:09.557
> 
> 标签：c#, visual-studio, visual-studio-2012

我刚刚从 MSDN (11.0.50727.1) 安装了 RTM 版本的 VS2012 Premium。我已经创建了一个 C# ASP.NET MVC 4 应用程序和一个 C# 控制台应用程序，但是对于以下文件类型，我都没有提供语法高亮或 Intellisense：

*   CS
*   cshtml

但是所有其他文件类型似乎都可以正常工作，包括：

*   html
*   js
*   XML
*   CSS
*   配置

我在 Windows 7 上运行，在 VMWare Fusion 5 中虚拟化，在 Mac OSX Lion 上。我还在同一个 VM 中安装了 VS 2010，它已经并且仍然运行良好。

我试过运行 devenv.exe /setup 没有成功。

我尝试了工具 > 导入和导出设置 > 重置，但没有成功。

任何人有任何想法如何让这个工作？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-30T13:42:06.070

我发现我还安装了 Visual Studio 2012 Web Express RC。当我卸载它时，C# 智能感知和语法突出显示神奇地开始工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-25T21:16:02.303

我发现我必须跑

```
devenv /resetuserdata 
```

我选择不从以前的版本导入。我不得不重新输入我所有的 TFS 连接，但现在我的 app.config 在 VS2012 中是彩色的。

# ant - ant下无法运行HsqlDb

> ID：12197773
> 
> 赞同：0
> 
> 时间：2012-08-30T13:17:16.397
> 
> 标签：ant, hsqldb

我想运行 JasperReport，所以根据它的文档，我尝试在我的 Windows 7 上运行 HSqlDB 数据库，如下所示：-

```
C:\jasperreports-4.7.0\demo\hsqldb>ant 
```

但它会引发以下问题：-

```
Buildfile: C:\jasperreports-4.7.0\demo\hsqldb\build.xml

runServer:
     [java] [Server@2cc7d960]: [Thread[HSQLDB Server @2cc7d960,5,main]]: run()/o
penServerSocket(): [Server@2cc7d960]: [Thread[main,5,main]]: checkRunning(false)
 entered
     [java]
     [java] java.net.BindException: Address already in use: JVM_Bind
     [java]     at java.net.DualStackPlainSocketImpl.bind0(Native Method)
     [java]     at java.net.DualStackPlainSocketImpl.socketBind(DualStackPlainSo
cketImpl.java:96)[Server@2cc7d960]: [Thread[main,5,main]]: checkRunning(false) e
xited
     [java]     at java.net.AbstractPlainSocketImpl.bind(AbstractPlainSocketImpl
.java:376)
     [java]     at java.net.PlainSocketImpl.bind(PlainSocketImpl.java:175)
     [java]
     [java] [Server@2cc7d960]: Startup sequence initiated from main() method
at java.net.ServerSocket.bind(ServerSocket.java:376)
     [java]
     [java]     at java.net.ServerSocket.<init>(ServerSocket.java:237)
     [java] [Server@2cc7d960]: Loaded properties from [C:\jasperreports-4.7.0\de
mo\hsqldb\server.properties]    at java.net.ServerSocket.<init>(ServerSocket.jav
a:128)
     [java]
     [java] [Server@2cc7d960]: Initiating startup sequence...
     [java]     at org.hsqldb.HsqlSocketFactory.createServerSocket(Unknown Sourc
e)
     [java] [Server@2cc7d960]: Initiating shutdown sequence...  at org.hsqldb.Se
rver.openServerSocket(Unknown Source)
     [java]
     [java]     at org.hsqldb.Server.run(Unknown Source)
     [java] [Server@2cc7d960]: Shutdown sequence completed in 4 ms.
     [java]     at org.hsqldb.Server.access$000(Unknown Source)
     [java] [Server@2cc7d960]: 2012-08-30 16:07:54.637 SHUTDOWN : System.exit()
is called next  at org.hsqldb.Server$ServerThread.run(Unknown Source)
     [java]

BUILD SUCCESSFUL
Total time: 1 second 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T01:37:05.330

`java.net.BindException: Address already in use: JVM_Bind`表明其他一些进程已经在使用您希望 hsqldb 服务器侦听的端口。`netstat -an`应该给您一个网络连接列表，您可以查看该列表以查看该端口是否确实在使用；`netstat -abn`还将为您提供与每个连接关联的进程，但运行此命令需要提升。

# javascript - 单击“主页”时，Jquery Revealed nav 不会隐藏

> ID：12197775
> 
> 赞同：0
> 
> 时间：2012-08-30T13:17:21.080
> 
> 标签：javascript, jquery, html, user-interface, navigation

我有一个网站，在主页上有一种介绍导航。选择选项时，会出现一个导航栏。当我点击“主页”时，我需要它再次隐藏。第一段代码工作正常。下半场我遇到了麻烦：

```
//Show navbar on page scroll
$(window).bind('scroll', function() {
  $("nav").fadeIn(1400);
  var navSeen = true;
});

//Hide navbar if #home is clicked
$("#home").click(function(){
   $("nav").fadeOut(1400);
   var navSeen = false;
}); 
```

提前感谢您的帮助！

编辑——文件中的所有 JS：

```
<script type="text/javascript">
$(document).ready(function(){
////////////////////////////////
//Lock Dog in place when scrolling right
var dogLock = $('#dog').position().left;
$(window).scroll(function() {
if(dogLock >= $(window).scrollLeft()) {
    if($('#dog').hasClass('leftLock')) {
        $('#dog').removeClass('leftLock');
    }
} else { 
    if(!$('#dog').hasClass('leftLock')) {
        $('#dog').addClass('leftLock');
    }
}
});
//If the connect tab is open and you click outside, then exit out of it!
var menu_state_ = true;
$('#connect').click( function(e) {
e.preventDefault();
if (menu_state_up){
    menu_state_Down();
} else {
menu_state_Up();
}

return false;
});
$('html').click(function() {
menu_state_Up();
});

function menu_state_Down() {
$("#connect-window").fadeIn(200);
menu_state_up = false;
}
function menu_state_Up() {
$("#connect-window").fadeOut(200);
menu_state_up =true;
}
//Ease into each transition
$(function() { 
$('.link').bind('click',function(event){
var $anchor = $(this);
$('html, body').stop().animate({
    scrollLeft: $($anchor.attr('href')).offset().left - 300
 },600,'easeInOutExpo');
    event.preventDefault();
});
});
//Big Text Plugin
$('.intro').bigtext();

//If the page has scrolled then display the hidden menu
$(window).bind('scroll', function() {
  $("nav").fadeIn(1400);
  var navSeen = true;
});

//Hide navbar if #home is clicked
$("#home").click(function() {
   $("nav").fadeOut(1400);
   var navSeen = false;
});

//////////////////////////////////////////
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T13:17:04.133

我通过将隐藏绑定到主页（隐藏菜单的唯一页面）而不是页面的滚动来解决这个问题。感谢各位的帮助！

# javascript - c# jplayer flash

> ID：12197778
> 
> 赞同：0
> 
> 时间：2012-08-30T13:17:29.150
> 
> 标签：javascript, jquery, flash, sitecore, jplayer

我正在尝试在我的网站上添加一个 Jplayer。我已经从 jplayer.org 下载了它并按照指南进行操作。它在 firefox 和 Chrome 上运行良好，但在 Safari 和 IE 上却不行。我使用 Sitecore 添加我的文件（Mp4 和 ogv）并将它们添加到 Jplayer。

这是我的代码隐藏，我在其中获取要添加到 Jplayer 的文件的 url。

```
var Mp4 = (ImageField)Sitecore.Context.Item.Fields["VideoMp4"];
var Ogv = (ImageField)Sitecore.Context.Item.Fields["VideoOgv"];
urlImageMp4 = MediaManager.GetMediaUrl(Mp4.MediaItem);
urlImageOgv = MediaManager.GetMediaUrl(Ogv.MediaItem); 
```

我在 webconfig 中更改了

```
<setting name="Media.RequestExtension" value=".ashx" /> 
```

至

```
<setting name="Media.RequestExtension" value="" /> 
```

以便 sitecore 的扩展名是正确的。

我在 ascx 文件上有一个 javascript，它获取 url 并将它们保存在全局变量中。

```
<script type="text/javascript">
var urlMp4 = "<%= urlImageMp4 %>";
var urlOgv = "<%= urlImageOgv %>";
</script> 
```

在我的外部 javascript 文件中，我使用这些变量

```
$(document).ready(function () {

$("#jquery_jplayer_2").jPlayer({
    ready: function () {
        $(this).jPlayer("setMedia", {
            m4v: urlMp4,
            mp4: urlMp4,
            ogv: urlOgv
        });
    },

    swfPath: "/resources/js/Jplayer.swf",
    supplied: "mp4, ogv, m4v",
    cssSelectorAncestor: "#jp_interface_2"
})
.bind($.jPlayer.event.play, function () { // pause other instances of player when current one play
    $(this).jPlayer("pauseOthers");
});
}); 
```

我试图将 swfPath 更改为所有可能的内容（资源位于项目的根目录中）。但没有任何效果。我试图添加解决方案：“flash，html”。不能在任何一个浏览器中工作。我安装了最新的闪存，我可以在使用闪存的 IE9 中运行 jplayer.org 上的演示。

在我的网站上，我也有一个 jquery 滑块，但它似乎没有任何问题。

有没有人知道让闪存工作以及为什么当 chrome 工作时 safari 不能工作？

# ruby-on-rails - Ruby on Rails 条件损坏

> ID：12197784
> 
> 赞同：0
> 
> 时间：2012-08-30T13:17:43.887
> 
> 标签：ruby-on-rails, ruby, haml

我有 Ruby on Rails 2.3.x。我有一个学习管理系统的数据库。

用户被赋予一个用户ID，并进行测验。如果用户进行任意数量的测验，我希望显示平均分数。分数在`quiz_results`表中列为 0 和 1 之间的浮点数，因此`* 100`and 也`.round`有`user_id`一行。但如果用户没有参加任何测验，我想`"No quizzes taken"`出现。

这是代码：

```
-if QuizResult.find_by_user_id(@user_id).present?
    ="#{(QuizResult.average('score', :conditions => 'user_id = #{@user.id}') * 100).round}%"
-else
    %em No quizzes taken 
```

问题是无论如何，即使有`quiz_results`条目，`"No quizzes taken"`仍然会出现。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T13:34:20.960

您正在测试是否：

```
QuizResult.find_by_user_id(@user_id) 
```

存在，但我怀疑你的意思是：

```
QuizResult.find_by_user_id(@user.id) 
```

# javascript - 在jquery中部分隐藏iframe

> ID：12197789
> 
> 赞同：0
> 
> 时间：2012-08-30T13:18:05.493
> 
> 标签：javascript, jquery, iframe

我的 main.jsp 页面有两个框架，这里的代码是

```
 <body>
<div><a href="#" onClick="somthingJS();"> hide</a></div>
<table>
<tr>
    <td style="height:100%"><iframe name="leftFrame" id="leftFrame" src="leftnavigation.jsp" height="600" width="200" frameborder="0"></iframe></td>

    <td style="height:100%"><iframe name="mainFrame" id="mainFrame" src="news.jsp"  height="600" width="1000" frameborder="0" scrolling="auto"> </iframe></td>
</tr>       
</tr>   

</table>
</body> 
```

我需要隐藏我的**leftFrame**。在隐藏标签上，onclick 方法做一些事情来隐藏我的 iframe
，但不是所有它必须使用 Jquery 隐藏高达 90% 如何通过单击隐藏来隐藏和显示..

提前致谢.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:24:04.103

如果您想“隐藏最多 90” - 不透明度更改为 20%？然后：在这里
使用jquery`.fadeTo`
是工作代码：http: [//jsfiddle.net/rnAyh/](http://jsfiddle.net/rnAyh/)

如果你想改变你可以检查这个：http: [//jsfiddle.net/rnAyh/1/](http://jsfiddle.net/rnAyh/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T13:21:58.190

只需更改 iframe 的宽度？

```
(function() {
  var toggle = false,
      frames = [document.getElementById('leftFrame'),document.getElementById('mainFrame')];
  window.somethingJS = function() {
    frames[0].setAttribute("width",toggle ? 200 : 20);
    frames[1].setAttribute("width",toggle ? 1000 : 1180);
    toggle = !toggle;
  };
})(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T13:26:03.913

我不确定我是否完全理解你想要做什么，但从标题来看，在我看来你想剪辑一个 iframe。试试 CSS iframe 属性。

```
.iframe-to-crop {
    clip: rect(0px,50px,0px,0px);
} 
```

这将“切断”iframe 右侧的 50 像素。看看[这个](http://www.w3schools.com/cssref/pr_pos_clip.asp)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T13:28:00.747

您可以将左框架的样式更改为`opacity: 0.1`- 只需更改`somethingJS();`为

```
document.getElementById('leftFrame').style.opacity = 0.1; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T14:32:49.427

下面的代码应该找到我的内联评论以进行解释。

```
<html>
    <head>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
        <script> 
           /*
            attr() if element height is needed if set, 
            css() if style element used
            */

            function somethingJS(){
                var iHeight=$('#leftFrame').attr("height");
               iHeight=(!isNaN(iHeight))?600:iHeight;
               $('#leftFrame').attr("height",iHeight-iHeight*(90/100));
            }

        </script>
    </head>
<body>
    <div>
        <!-- In your original code href="#" will create problems in IE , so either attach the event in jquery onload or use the below code -->    
        <a href="javascript:void(0)" onClick="somethingJS()"> hide</a>    
    </div>
<table>
<tr>
    <td style="height:100%"><iframe name="leftFrame" id="leftFrame" src="12197789.html" height="600" width="200" frameborder="1"></iframe></td>

    <td style="height:100%"><iframe name="mainFrame" id="mainFrame" src="12197789.html" height="600" width="1000" frameborder="1" scrolling="auto"> </iframe></td>
</tr>       
</table>
</body>
</html> 
```

# c++ - 函数指针 typedef 的语法是什么？

> ID：12197805
> 
> 赞同：6
> 
> 时间：2012-08-30T13:19:06.990
> 
> 标签：c++, c, function-pointers, typedef

我正在研究一个线程池，为了避免使用长限定符名称，我想使用`typedef`声明。

但这并不像看起来那么容易：

```
typedef unsigned ( __stdcall *start_address )( void * ) task; 
```

当我以这种方式尝试时，我得到了：

```
error C3646: 'task' : unknown override specifier 
```

错误，在玩了一会儿这个声明后，我被卡住了，找不到任何合理的解决方案来声明这种类型的`typedef`.

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-30T13:21:55.510

为函数指针创建`typedef`别名时，别名在函数*名*位置，所以使用：

```
typedef unsigned (__stdcall *task )(void *); 
```

`task`现在是一个类型别名：*指向一个函数的指针，该函数接受一个`void`指针并返回`unsigned`*.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-30T13:48:59.677

由于hmjd的答案已被删除...

在 C++11中，已经开发了一个全新的*别名语法，以使这些事情变得更容易：*

```
using task = unsigned (__stdcall*)(void*); 
```

相当于 to `typedef unsigned (__stdcall* task)(void*);`（注意别名在函数签名中间的位置...）。

它也可以用于模板：

```
template <typename T>
using Vec = std::vector<T>;

int main() {
    Vec<int> x;
} 
```

这种语法比旧的语法好得多（对于模板，实际上使模板别名成为可能），但确实需要一个相当新的编译器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T14:21:34.023

旁注：该`__stdcall`部分可能会在不同的编译器/编译器设置下破坏您的代码（除非该函数也显式声明为`__stdcall`）。我会坚持默认的调用约定，只使用具有良好原因的专有编译器扩展。

# python - 在 Python 2.6 中从 URL 解析 JSON

> ID：12197806
> 
> 赞同：1
> 
> 时间：2012-08-30T13:19:10.147
> 
> 标签：python, json, urllib

我有这个在 Python 2.7 中运行良好但在 2.6 中运行良好的脚本：

```
def main():
   tempfile = '/tmp/tempfile'
   stats_URI="http://x.x.x.x/stats.json"
   hits_ = 0
   advances_ = 0
   requests = 0
   failed = 0

   as_data = urllib.urlopen(stats_URI).read()
   data = json.loads(as_data)

   for x, y in data['hits-seen'].iteritems():
      hits_ += y

   # Total of failed vtop requests
   for x, y in data['vals-failed'].iteritems():
      failed += y

   requests = data['requests']

   advances_ = requests - failed

   f = open(tempfile,'w')

   line1 = "hits: " + str(hits_) + "\n"
   line2 = "advances: " + str(advances_) + "\n"

   f.write(line1)
   f.write(line2)
   f.close()

   return 0 
```

我收到的错误消息说：

```
Traceback (most recent call last):   File "./json.test.py", line 14, in <module>
    main()   File "./json.test.py", line 8, in main
    as_data = urllib.urlopen(stats_URI).read()   File "/usr/lib/python2.6/urllib.py", line 86, in urlopen
    return opener.open(url)   File "/usr/lib/python2.6/urllib.py", line 207, in open
    return getattr(self, name)(url)   File "/usr/lib/python2.6/urllib.py", line 346, in open_http
    h.endheaders()   File "/usr/lib/python2.6/httplib.py", line 908, in endheaders
    self._send_output()   File "/usr/lib/python2.6/httplib.py", line 780, in _send_output
    self.send(msg)   File "/usr/lib/python2.6/httplib.py", line 739, in send
    self.connect()   File "/usr/lib/python2.6/httplib.py", line 720, in connect
    self.timeout)   File "/usr/lib/python2.6/socket.py", line 561, in create_connection
    raise error, msg IOError: [Errno socket error] [Errno 110] Connection timed out 
```

我在这里想念什么？互联网上的搜索没有多大帮助:-(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T13:56:05.823

尝试连接几次怎么样：

```
as_data = get_urldata(stats_URI) #Note this will be None, if it failed to connect after 20 attempts 
```

在哪里

```
def get_urldata(url, t=20):
    '''attempt to read the url t times (by default 20)'''
    for i in xrange(t):
         try:
             return urllib.urlopen(url).read()
         except IOError:
             pass 
```

*也许你应该使用`urllib2`而不是`urllib`，因为这个库可能是一个改进。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T14:20:27.373

问题实际上是 http_proxy 环境变量已设置为无法访问的服务器。我通过使用绕过它

```
urllib.urlopen(stats_URI, proxies={}).read() 
```

从那时起一切都很好。

非常感谢，

S。

# java - 在 Eclipse 插件中使用 SWT

> ID：12197810
> 
> 赞同：0
> 
> 时间：2012-08-30T13:19:21.750
> 
> 标签：java, eclipse, eclipse-plugin, swt

我正在尝试使用 SWT 在 eclipse 插件中创建对话框。我可以创建一个 Shell 和一个 Display 对象，并且代码编译没有问题，但是在调试插件时我看不到任何类型的对话框，尽管在独立应用程序中使用相同的代码时可以完美运行。

这是我在实现 IWorkbenchWindowActionDelegate 的 SampleAction 的 run 方法中编写的示例代码

```
Display display = new Display();
Shell shell = new Shell(display);
shell.open();

while(!shell.isDisposed())
{
    if(!display.readAndDispatch())
    {
        display.sleep();
    }
}

display.dispose(); 
```

我还尝试删除 readAndDispatch 并编写了这段代码，但它仍然不起作用..我什么也没看到

```
 Display display = new Display();
    Shell shell = new Shell(display);
    shell.open();
    MessageDialog dialog = new MessageDialog(shell, "My Title", null,
            "My message", MessageDialog.ERROR, new String[] { "First",
          "Second", "Third" }, 0);
    int result = dialog.open(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T14:43:37.570

这将完成这项工作。无需事先打开新外壳。只需将新的 Shell 传递给`MessageDialog`.

```
MessageDialog dialog = new MessageDialog(new Shell(), "My Title", null,
        "My message", MessageDialog.ERROR, new String[] { "First",
      "Second", "Third" }, 0);
int result = dialog.open(); 
```

您还可以使用`parentShell`您当前所在的 GUI 部分的 并将其传递给对话框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T15:54:45.260

请注意，使用新 shell 作为模态对话框的父级可能会给用户带来不便，因为对话框可能位于主工作台窗口后面，因此用户既看不到对话框，也无法在主工作台窗口中执行任何操作。解决方案是将窗口外壳作为父级传递给对话框。由于您的操作是 IWorkbenchWindowActionDelegate，您应该记录传递给 init 方法的窗口，然后使用 window.getShell() 获取父 shell。

请注意，在编写插件时，您不应该创建显示或运行事件队列（即 readAndDispatch）（除非您想要一个无模式对话框 - 这是一个单独的主题）。

# python - 如何将变量从 PHP 传递到 Python？

> ID：12197815
> 
> 赞同：3
> 
> 时间：2012-08-30T13:19:33.640
> 
> 标签：python, php, variables

我可以将变量从`.php`脚本传递给`Python`，反之亦然吗？

**例如：**

```
//myPHPScript.php 
$hello = 'hello'; 

//myPythonScript.py
print(get the result from $hello variable found in myPHPScript.php) 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-30T13:23:44.450

取决于您如何调用 Python 脚本。`system()`例如，如果你这样做，你可以把它放在参数中：

```
$hello = 'world';

$result = shell_exec('/path/to/python /path/to/your/script.py ' . $hello); 
```

在 Python 中：

```
import sys

who = sys.argv[1]

print "Hello %s" % who 
```

现在`$result`在 PHP 中将包含“Hello world”。

一种性能更高的可能性（并非总是可能但值得考虑）是一种“fastcgi 方法”；您的 Python 脚本实际上一直在运行并接受套接字连接（例如使用 HTTPlib），例如端口 8888。此时您可以使用 cURL 从 PHP 连接到`http://127.0.0.1:8888`并发送以 JSON 编码的结构化数据（因为 Python 有 JSON 解码器；我'我不太确定 PHP 反序列化程序），并通过相同的路径返回信息。

从所有意图和目的来看，Python 脚本现在都是一个 Web 服务。您还可以在同一个 Web 服务接口下部署多个不同的脚本，并根据请求中发送的虚假 URI 选择哪个脚本将回答。

使用这种方法，您需要检查请求之间的状态是否正确隔离，即代表 Peter 请求数据处理不会导致返回属于 Paul 的数据；或者所有正在处理的数据都是不安全的，也就是说，它不需要安全或身份验证。

这种方法的另一个优点是缓存——python 脚本在 PHP 发出的请求之间保持活动状态，并且如果可行的话，可以对已知问题返回相同的答案，而无需重新计算任何内容。有可供插入的 Python 缓存框架。

另一个优点是，您可以通过将 Python 服务部署在不同的机器（不一定可以从更广泛的 Internet 访问）甚至几台不同的机器上轻松扩展此方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T13:26:38.143

一些选项：

*   让 PHP 使用某种格式（例如 JSON 或其他格式）将其变量写入文件，让 python 程序读取文件（但请考虑一下：当多个进程尝试读/写时会发生什么？）
*   让 PHP 将其数据存储在数据库中，并从同一个 db 读取 python 脚本（db 应该处理并发）
*   让一个进程调用另一个进程，通过标准输入/标准输出（规避文件）传递数据
*   使用适合您平台的其他形式的[进程间通信](http://en.wikipedia.org/wiki/Inter-process_communication)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T13:37:39.620

在文件系统的某处打开一个 unix 域套接字。像 /var/run 这样的地方。然后让您的进程像普通文件一样对其进行读写。繁荣。双向通信。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-28T13:57:09.960

对于传递的变量包含空格的情况。

**PHP**：

```
<?php
$who = "my name";
shell_exec("/path/to/python /path/to/script.py \"$who\" "); 
```

**蟒蛇**：

```
import sys
if len(sys.argv) > 1:
    who = sys.argv[1] 
```

# android - Android项目未在eclipse中运行

> ID：12197819
> 
> 赞同：-1
> 
> 时间：2012-08-30T13:19:41.470
> 
> 标签：android, eclipse

我已经多次安装了所有版本的 Eclipse 和 SDK 管理器，但是当我创建新项目并运行它时显示加载 100% 但注意到发生了，但是当使用现有源代码项目构建时它工作正常。谁能帮我解决运行新项目的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T13:23:18.660

请检查 eclipse 工作区文件夹属性并确保它具有完全访问权限。然后清理项目并再次运行。同样在清理时，请确保项目 bin 文件夹中的文件是否被删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T13:28:21.680

[按照 Lars Vogel 页面 - Android 培训](http://www.vogella.com/articles/Android/article.html#installation)上的所有说明进行操作。

# objective-c - setAcceptsTouchEvents 仅在触控板上的手势后才能正常工作

> ID：12197820
> 
> 赞同：5
> 
> 时间：2012-08-30T13:19:41.640
> 
> 标签：objective-c, macos, cocoa, trackpad

我正在尝试用它`setAcceptsTouchEvents:YES`来识别触控板上的自定义触摸事件。只需触摸触控板就不会在`touchesBeganWithEvent`. 但是如果我在触控板上做一个手势，比如捏或滚动`touchesBeganWithEvent`开始就可以正常工作。在其中一个手势之后，即使我只是触摸触控板也能`touchesBeganWithEvent`正常工作。但我需要使用`touchesBeganWithEvent`简单的触摸而不需要做手势。它的方式似乎我必须做一个手势来初始化`setAcceptsTouchEvents:YES`. 我究竟做错了什么？

PS：`setAcceptsTouchEvents:YES`在`initWithFrame`里面，可以看到是在应用启动的时候执行的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T15:57:31.323

我发现这个问题在重新启动 macOS 后消失了，或者在注销并再次登录后消失了。我尝试做任何其他可能使问题停止的事情，例如关闭 macbook 中的所有应用程序，切换桌面，将操作系统置于待机状态然后回来，但唯一使问题消失的是注销或重新启动操作系统。

所以，当问题消失时，我启动我的应用程序并简单地触摸触控板，touchesBeganWithEvent 被调度。然后几个小时后问题再次出现，并且 touchesBeganWithEvent 不再起作用，直到我做一个像捏或滚动这样的手势。如果我关闭我的应用程序并重新开始，我需要再次做手势。

有谁知道为什么会这样？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T14:07:01.127

从[文档](http://developer.apple.com/library/mac/#documentation/cocoa/Reference/ApplicationKit/Classes/NSResponder_Class/Reference/Reference.html#//apple_ref/occ/instm/NSResponder/touchesCancelledWithEvent%3a)：

> 该事件将被发送到按键窗口中触摸下的视图。要获取为此视图（或此视图的后代）开始的触摸集，请发送 [event touchesMatchingPhase:NSTouchPhaseBegan inView:self]。

一些想法：

1.  确保没有拦截触摸事件的后代视图。
2.  在执行触摸事件之前尝试以编程方式使您的窗口成为关键窗口，看看这是否会调用 touchesBeganWithEvent。

# android - XML 绝对布局将图像放在左下角和右下角

> ID：12197822
> 
> 赞同：0
> 
> 时间：2012-08-30T13:19:46.100
> 
> 标签：android, xml, android-layout, view

您好，我想制作一个我正在使用绝对布局的应用程序，并且在该布局中我正在使用两个图像我想将一个图像放在左下角，另一个放在右下角你能帮我如何使用 xml 或使用爪哇

我的代码是

```
 <AbsoluteLayout android:layout_width="fill_parent" android:layout_height="fill_parent" android:padding="10dp" android:layout_marginLeft="60dp"
android:layout_marginBottom="60dp"
android:id="@+id/mainLayout">
 <ImageView android:id="@+id/img1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:src="@drawable/hk1" />
  <ImageView android:id="@+id/imgDel"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/kitty"
         android:layout_gravity="left"
         />
 <ImageView android:id="@+id/imgIcon"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/delete"
        android:layout_gravity="right"
         />

 </AbsoluteLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T13:24:06.973

使用这样的东西

```
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <ImageView
        android:id="@+id/big_image"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:src="@drawable/bigimage"/>
    <ImageView
        android:id="@+id/little_image"
        android:layout_width="50dip"
        android:layout_height="50dip"
        android:layout_alignRight="@id/big_image"
        android:layout_alignBottom="@id/big_image"
        android:src="@drawable/littleimage"/>
</RelativeLayout> 
```

参考[相对布局对齐图像关于右下角](https://stackoverflow.com/questions/4079410/relative-layout-aligning-images-about-right-bottom-corner)

# powershell - Powershell：为什么我需要转义 $args 中的双破折号参数？

> ID：12197823
> 
> 赞同：7
> 
> 时间：2012-08-30T13:19:51.077
> 
> 标签：powershell, command-line

这是一个非常简单的示例脚本：

```
function fun () { "AAA $args ZZZ" }
fun a b c
fun a - b
fun a -- b
fun a '--' b
fun a --- b 
```

我得到的结果是：

```
AAA a b c ZZZ
AAA a - b ZZZ
AAA a b ZZZ
AAA a -- ZZZ
AAA a --- b ZZZ 
```

我显然需要逃避双重破折号。为什么？

我正在为一套脚本编写一个 powershell 包装器，其中一些脚本将特定含义分配给“--”。我怎样才能不加修改地通过它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-30T13:35:25.533

-- 被认为是一个特殊的“end-ofparameters”参数。

来自 Bruce Payette 的 Windows PowerShell in Action：

引号使参数绑定器不会将带引号的字符串视为参数。另一种不太常用的方法是使用特殊的“end-ofparameters”参数，即两个连字符背靠背 (--)。

此序列之后的所有内容都将被视为参数，即使它看起来像参数。例如，使用 -- 你也可以写出字符串 -InputObject 而不使用引号：

```
PS (3) > Write-Output -- -InputObject 
```

将导致 -inputobject 作为输出。

# c# - 将文档直接打印到服务器

> ID：12197827
> 
> 赞同：1
> 
> 时间：2012-08-30T13:19:57.290
> 
> 标签：c#

```
Server Error in '/' Application.
Error: cannot find the default printer.
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.

Exception Details: System.Exception: Error: cannot find the default printer.

Source Error:

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Stack Trace:

[Exception: Error: cannot find the default printer.]
   Vriddhi.Registration.Print() in D:\Jitendra\My Works\Vriddhi2\Code\Vriddhi\Registration.aspx.cs:1018
   Vriddhi.Registration.PrintButtonClick(Object sender, EventArgs e) in D:\Jitendra\My Works\Vriddhi2\Code\Vriddhi\Registration.aspx.cs:1000
   System.Web.UI.WebControls.Button.OnClick(EventArgs e) +118
   System.Web.UI.WebControls.Button.RaisePostBackEvent(String eventArgument) +112
   System.Web.UI.WebControls.Button.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(String eventArgument) +10
   System.Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument) +13
   System.Web.UI.Page.RaisePostBackEvent(NameValueCollection postData) +36
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +5563

Version Information: Microsoft .NET Framework Version:4.0.30319; ASP.NET Version:4.0.30319.1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T13:28:30.327

您的 web 应用程序将在用户帐户下运行，该用户帐户很可能尚未定义默认打印机。最有可能的是，它甚至没有系统中任何打印机的访问权限。

您将需要调整运行应用程序的帐户和打印权限。

# jquery - 如何在硒测试中设置html元素的样式显示？

> ID：12197828
> 
> 赞同：20
> 
> 时间：2012-08-30T13:20:00.110
> 
> 标签：jquery, python, selenium, styles

我得到一个像

```
cv_upload = driver.find_element_by_id('id_cv_upload') 
```

所以我想在python本身中将它的显示设置为内联。**是否可以使用 python 设置显示。** 我试过

```
cv_upload.style.display = "inline" 
```

这向我展示了错误。
**我想到的一种方法**是使用 Jquery 更改显示，然后使用执行它，`driver.execute`但不幸的是我没有得到正确的语法来执行此操作。让我知道如何做到这一点（语法。）谢谢。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-08-30T13:22:45.070

因为你标记了 jQuery - 你可以使用[css()](http://api.jquery.com/css/)函数来设置/获取 css 属性

```
$('#id_cv_upload').css('display','inline'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T05:47:48.740

最后找出设置元素显示的方法。

```
driver.execute_script("document.getElementById('id_cv_upload').style.display='block';") 
```

基本上使用`driver.execute_script`我正在执行一个java脚本来设置元素的样式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-12T17:56:29.923

```
$('#box').css(
{
  background: "#FF0000",
  "box-shadow": "1px 1px 5px 5px red",
  width: "100px",
  height: "100px",
  display: "block"
}
); 
```

[BSI.id().setStyle() 与 jQuery.css() 与原生 DOM](http://jsperf.com/jquery-css-vs-native-dom/13)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-29T20:53:44.080

如果您的元素没有 ID，您可以使用 css 执行相同操作

在蟒蛇中：

```
 driver.execute_script("document.querySelector('yourCSSLocatorGoesHere').style.display='block';") 
```

在 Java 中：

```
 WebDriver driver=new FirefoxDriver();   
    JavascriptExecutor js=(JavascriptExecutor) driver;
  driver.execute_script("document.querySelector('yourCSSLocatorGoesHere').style.display='block';") 
```

# apache - mod_wsgi.so：无法将 mod_wsgi.so 加载到服务器：libpython2.5.so.1.0：无法打开共享对象文件：没有这样的文件或目录

> ID：12197829
> 
> 赞同：5
> 
> 时间：2012-08-30T13:20:13.027
> 
> 标签：apache, mod-wsgi

当我输入：

```
[root@lts5 /]# ldd /usr/lib64/httpd/modules/mod_wsgi.so
    libpython2.5.so.1.0 => /root/epd-5.1.0/lib/libpython2.5.so.1.0 (0x00002b4b53ccf000)
    libpthread.so.0 => /lib64/libpthread.so.0 (0x00002b4b54036000)
    libdl.so.2 => /lib64/libdl.so.2 (0x00002b4b54251000)
    libutil.so.1 => /lib64/libutil.so.1 (0x00002b4b54456000)
    libc.so.6 => /lib64/libc.so.6 (0x00002b4b54659000)
    libm.so.6 => /lib64/libm.so.6 (0x00002b4b549b1000)
    /lib64/ld-linux-x86-64.so.2 (0x0000003d9f600000) 
```

当我输入时，我怎样才能做到这一点：

```
[root@lts5srv1 /]# ldd mod_wsgi.so
ldd: ./mod_wsgi.so: No such file or directory 
```

..显示相同的结果？

事实上，当我尝试重新启动服务器时：

```
[root@lts5srv1 mod_wsgi-2.3]# service httpd restart
Stopping httpd:                                            [FAILED]
Starting httpd: httpd: Syntax error on line 202 of /etc/httpd/conf/httpd.conf: 
Cannot load /etc/httpd/modules/mod_wsgi.so into server: 
libpython2.5.so.1.0: cannot open shared object file: No such file or directory
                                                           [FAILED] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T22:59:47.323

仅当您与 mod_wsgi.so 文件位于同一目录中时，运行“ldd mod_wsgi.so”才有效。

解释你为什么使用这么旧的 mod_wsgi 版本。您是自己从源代码编译 mod_wsgi 还是使用 mod_wsgi 的现有二进制文件？

如果从源代码编译，请使用 mod_wsgi 3.4（最新），当您从源代码构建它时，请执行以下操作：

```
LD_RUN_PATH=/root/epd-5.1.0/lib make 
```

LD_RUN_PATH 会将 Python 库目录的位置嵌入到 mod_wsgi.so 中，因此它可以在运行时找到它，因为您的库不在标准位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-26T08:44:42.533

1.  将以下内容添加到文件的第一行`/etc/ld.so.conf`：

    ```
    /usr/local/lib
    include ld.so.conf.d/*.conf 
    ```

2.  跑`ldconfig`

# javascript - 将函数作为参数传递给javascript中的另一个函数

> ID：12197830
> 
> 赞同：1
> 
> 时间：2012-08-30T13:20:15.183
> 
> 标签：javascript, jquery, closures

我想在 javascript 中创建一个 API 系统（在单个对象内），所有这些都源于 jQuery 的 ajax 函数，但我希望能够传递一个覆盖“成功”函数来触发，如下所示：

```
function Eidos(){

    this.api = function(data, success){
        $.ajax({
            type: 'POST', 
            url: '/api',
            data: data,
            success: function(rData){
                return rData;
            }
        })
    };

    this.refreshInfo = function(id, success){
            log.info('refreshed page id:  '+ id);
            return this.api({'command': 'refresh', 'pageid': id}, success);
    }

}; 
```

在这个例子中，我只想“刷新”信息（拉入新的文本数据或你有什么）。我已经有一个服务器端页面设置。

我会这样称呼它：

```
$('.refresh').click(function(){
        $("#myModal").modal('show');
        var id = $(this).data('ei');
        var api = eidos.refreshInfo(id, function(){
                $("#myModal").modal('hide');
                });
        return false;
    }); 
```

显然这不起作用（顺便说一句，对象已经通过 var eidos = new Eidos(); 创建），但是，Idk 如何实现它。我希望成功：函数在不同页面上表现不同，所以我需要一个覆盖，但我不知道如何在这里工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T13:22:01.047

尝试改变

```
success: function(rData){
   return rData;
} 
```

到

```
success: success 
```

您当前没有调用（甚至没有使用）该`success`参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T13:23:23.917

```
 success: function(rData){
            return rData;
        } 
```

是问题所在。你已经有一个回调函数的参数，所以使用它：

```
 success: function(rData) {
            success(rData);
        } 
```

或者，为了缩短它，将回调函数作为参数直接传递到 jQuery ajax 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T13:22:43.870

您正在进行异步调用，并且您的行为就像它是同步的一样。您不能从异步调用返回并期望它将数据返回到调用它的位置。

```
this.api = function(data, success){
    $.ajax({
        type: 'POST', 
        url: '/api',
        data: data,
        success: function(rData){
            return rData;  //<-- That return is not going to work
        }
    })
}; 
```

如果你想传入一个回调，而不是分配它。

```
this.api = function(data, success){
    $.ajax({
        type: 'POST', 
        url: '/api',
        data: data,
        success: success
        }
    })
}; 
```

或称它为

```
this.api = function(data, success){
    var that = this;
    $.ajax({
        type: 'POST', 
        url: '/api',
        data: data,
        success: function(rData){
            success(); //<-- call it or you can use apply/call
            //success.apply(that,arguments);
            return rData;  //<-- That return is not going to work
        }
    })
}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T13:32:22.517

您没有在`success`任何地方使用回调。

```
this.api = function(data, success){
    $.ajax({
        type: 'POST', 
        url: '/api',
        data: data,
        success: success || function(rData) {
            // some default handler to use if none is passed
        }
    })
}; 
```

允许您的`success: success || function(rData) {`成功参数是可选的；如果没有通过，它将使用您指定的默认处理程序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T13:34:59.430

想到这一点的方法是 JQuery ajax 函数在触发时将 rData 传递给您的函数。rData 将简单地返回 jQuery 内部的封闭范围内的某个地方，您没有任何控制权，因此使用它做某事的地方在该成功函数内。

或者您可以通过另一个事件向外部事物发出信号：

```
//...
    success:function(rData){
        $(someOtherObject).trigger({type:'rDataDelievered', successData:rData});
    }
}

someOtherObject.bind('rDataDelivered', function(e){ doSomething(e.successData); }); 
```

它不是一个频繁使用的功能，但是是的，您可以动态定义一个新事件并使用 jQuery 在任何您想要的东西上触发它。如果您没有传递 rData 对象，`trigger('rDataDelivered')`那么对于一个简单的信号就足够了。但是这里有相当多的冗余。如果没有什么能阻止您，最好在成功功能中使用适当的 ajax 事件来执行此操作。

# android - Android 空白屏幕中的 Adfonic 完整广告

> ID：12197837
> 
> 赞同：2
> 
> 时间：2012-08-30T13:20:50.097
> 
> 标签：android, ads

使用最后一个 Adfonic Sdk 和 Android 指南：http: [//developer.adfonic.com/index.php/Android_SDK](http://developer.adfonic.com/index.php/Android_SDK)

我为我的应用程序（在[http://adfonic.com/sites-and-apps/ad-integration](http://adfonic.com/sites-and-apps/ad-integration)）创建了两个插槽，一个普通的文本链接横幅和一个完整的广告。

当我按照指南在简单案例中进行测试时，我在屏幕上看到了简单的横幅，但没有看到完整的横幅。

我的代码如下：

主要的.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

   <com.adfonic.android.AdfonicView
       xmlns:adfonic="http://schemas.android.com/apk/lib/com.adfonic.android"
       android:id="@+id/adfonicView"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       adfonic:adfonic_adslot_id="AD_SLOT_ID"
       adfonic:language="en"
       adfonic:refresh_ad="true"
       adfonic:refresh_time="30" />

</RelativeLayout> 
```

MainActivity.java

```
public class MainActivity extends Activity {

private final static String TAG = "Testing";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    AdfonicView adView = (AdfonicView) findViewById(R.id.adfonicView);

    adView.setAdListener(new AdListener() {

        @Override
        public void onReceivedAd() {
            Log.d(TAG, "AdListener onReceivedAd()");

        }

        @Override
        public void onPresentScreen() {
            Log.d(TAG, "AdListener onPresentScreen()");

        }

        @Override
        public void onNoFill() {
            Log.d(TAG, "AdListener onNoFill()");

        }

        @Override
        public void onNetworkError() {
            Log.d(TAG, "AdListener onNetworkError()");

        }

        @Override
        public void onLeaveApplication() {
            Log.d(TAG, "AdListener onLeaveApplication()");

        }

        @Override
        public void onInvalidRequest() {
            Log.d(TAG, "AdListener onInvalidRequest()");

        }

        @Override
        public void onInternalError() {
            Log.d(TAG, "AdListener onInternalError()");

        }

        @Override
        public void onDismissScreen() {
            Log.d(TAG, "AdListener onDismissScreen()");

        }

        @Override
        public void onClick() {
            Log.d(TAG, "AdListener onClick()");

        }
    });
}} 
```

在日志中，我使用普通横幅得到回调“onReceivedAd()”和“onPresentScreen()”被触发，但是当全屏广告时，只有“onReceivedAd()”被调用。白屏仍然存在。

横幅请求的响应也显示在日志中，并且在这两种情况下都是正确的。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T10:36:52.020

需要放置一个：

```
@Override
public void onReceivedAd() {

adView.showInterstitial(); // <—show the ad
} 
```

由于广告是插页式的并全屏显示，因此需要强制显示。

让我知道这是否适合您。

# objective-c - EXC_BAD_ACCESS (code=1) Xcode 中的错误

> ID：12197839
> 
> 赞同：5
> 
> 时间：2012-08-30T13:20:54.107
> 
> 标签：objective-c, ios, cocoa-touch, memory-management

我知道这个错误与内存管理有关，但我必须承认我很难过！在目标 c 中编程大约 3 周，所有这些管理内存的东西都令人困惑！基本上发生的事情是我在表格视图中有这个地图视图。单击后退按钮离开地图视图并返回主菜单时，我收到上述错误。这是头文件中的代码

```
#import <UIKit/UIKit.h>
#import <MapKit/MapKit.h>

@interface MapViewController : UIViewController <MKMapViewDelegate> {

    IBOutlet MKMapView* mapView;
    BOOL locate;

}

@property (nonatomic, retain) IBOutlet MKMapView* mapView;

@end 
```

和实施文件

```
#import "MapViewController.h"

@implementation MapViewController

@synthesize mapView;

// Implement viewDidLoad to do additional setup after loading the view, typically from a nib.
- (void)viewDidLoad {
    [super viewDidLoad];

    mapView = [[MKMapView alloc] initWithFrame:self.view.frame];
    mapView.delegate=self;
    mapView.showsUserLocation = YES;

    [self.view addSubview:mapView];

    [self.mapView.userLocation addObserver:self
                                forKeyPath:@"location"
                                   options:(NSKeyValueObservingOptionNew|NSKeyValueObservingOptionOld)
                                   context:nil];
    locate = YES;

}

-(void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context
{

    if (locate == YES) {
    MKCoordinateRegion region;
    region.center = self.mapView.userLocation.coordinate;

    MKCoordinateSpan span;
    span.latitudeDelta  = 0.1; 
    span.longitudeDelta = 0.1;
    region.span = span;

    [self.mapView setRegion:region animated:YES];
        locate = NO;
    }

}

- (void)didReceiveMemoryWarning {
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc that aren't in use.
}
- (void)dealloc {
    [super dealloc];
    [mapView release];
    [self.mapView.userLocation removeObserver:self forKeyPath:@"location"];
    [self.mapView removeFromSuperview];
    self.mapView = nil;
}

@end 
```

任何人都可以为我解释一下吗？:)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-30T13:22:49.033

`[super dealloc];`必须是最后一次调用`dealloc`

在`[mapView release];`mapView 之后也可能已经消失了。

尝试

```
- (void)dealloc {

    [self.mapView.userLocation removeObserver:self forKeyPath:@"location"];
    [self.mapView removeFromSuperview];
    [mapView release];
    self.mapView = nil; 
    [super dealloc];  // at this point self — that is the same object as super — is not existent anymore
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-02T22:00:16.193

此错误也可能是由不兼容的 API 引起的（例如，您为 iOS 6.0 构建，但使用了仅在 iOS >= 8.2 中引入的方法）

# python - 为什么 Scikit GradientBoostingClassifier 不允许我使用最小二乘回归？

> ID：12197841
> 
> 赞同：6
> 
> 时间：2012-08-30T13:20:54.853
> 
> 标签：python, data-mining, scikit-learn

为什么会这样

```
GradientBoostingClassifier(loss='ls') 
```

失败：

```
raise ValueError("``n_classes`` must be 1 for regression")
ValueError: ``n_classes`` must be 1 for regression 
```

它与`loss='deviance'`?

我在 Ubuntu 64 位中使用 scikit-learn-0.11 和 scipy-0.11.0rc1 这发生在对具有二进制类“YES”“NO”的数据集进行分类。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-30T15:02:38.623

这是`GradientBoostingClassifier`. 它不应该公开分类的最小二乘损失函数。请改用“偏差”损失函数。

对造成的不便深表歉意。

PS：如果您真的需要最小二乘损失进行分类，请联系我，我们可以在未来版本中开发此功能。

# scheduler - dhtmlx调度程序高度问题

> ID：12197854
> 
> 赞同：1
> 
> 时间：2012-08-30T13:21:45.667
> 
> 标签：scheduler, dhtmlx

当我第一次使用有效数据调用以下内容时......一切都很好，表格看起来很棒：

```
 <script language = "javascript">  
            scheduler.clearAll();

            scheduler.createTimelineView({ 
                section_autoheight: false, 
                name: "timeline", 
                x_unit: "day", 
                x_date: "%d", 
                x_step: 1, 
                x_size: 30, 
                x_start: 1, 
                y_unit: <?php echo json_encode($json); ?>, 
                y_property: "section_id", 
                render: "tree", 
                fit_events: true, 
                dy: 30, 
                //dx: 150, 
                second_scale:{
                x_unit: "day", 
                x_date: "%M" 
                } 
            });      

            scheduler.config.lightbox.sections = [  
                {name:"description", height:130, map_to:"text", type:"textarea" , focus:true},
                {name:"custom", height:23, type:"timeline", options:null , map_to:"section_id" }, //type should be the same as name of the tab
                {name:"time", height:72, type:"time", map_to:"auto"}
            ];

            scheduler.init('scheduler_here',new Date(<?php echo date("Y"); ?>, <?php echo date("n") - 1; ?>, <?php echo date("j"); ?>),"timeline");

            scheduler.parse(<?php echo json_encode($scheduler); ?>, "json");
        </script> 
```

但是当我再次调用同一个块时，x 轴标题的高度加倍。然后我再次打电话，它使最后一个双数加倍..

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-21T10:55:40.447

如果它仍然对某人有帮助

'scheduler' 是一个全局对象，因此当您多次调用此块时，它会覆盖时间线视图并每次重新初始化调度程序。这不是理想的方法，在您的情况下，它应该是奇怪副作用的原因。

如果您需要此脚本来重新加载事件、时间线部分和更改活动日期，您可以执行以下操作：

1.  将未修改的配置放入页面的静态部分
2.  使用“ [scheduler.serverList](http://docs.dhtmlx.com/scheduler/api__scheduler_serverlist.html) ”方法指定时间线的各个部分
3.  在重新加载的代码中，您只需使用“ [scheduler.updateCollection](http://docs.dhtmlx.com/scheduler/api__scheduler_updatecollection.html) ”更新时间线部分，解析事件，使用“ [scheduler.setCurrentView](http://docs.dhtmlx.com/scheduler/api__scheduler_setcurrentview.html) ”更改活动日期

静态代码：

```
scheduler.createTimelineView({
    section_autoheight: false,
    name: "timeline",
    x_unit: "day",
    x_date: "%d",
    x_step: 1,
    x_size: 30,
    x_start: 1,
    y_unit: scheduler.serverList("timeline", []),
    y_property: "section_id",
    render: "tree",
    fit_events: true,
    dy: 30,
    //dx: 150,
    second_scale:{
        x_unit: "day",
        x_date: "%M"
    }
});
scheduler.config.lightbox.sections = [
    {name:"description", height:130, map_to:"text", type:"textarea" , focus:true},
    {name:"custom", height:23, type:"timeline", options:null , map_to:"section_id" }, //type should be the same as name of the tab
    {name:"time", height:72, type:"time", map_to:"auto"}
];

scheduler.init('scheduler_here',new Date(),"timeline"); 
```

重新加载的代码

```
<script language = "javascript">
    scheduler.clearAll();
    scheduler.updateCollection("timeline", <?php echo json_encode($json); ?>);
    scheduler.parse(<?php echo json_encode($scheduler); ?>, "json");
    scheduler.setCurrentView(new Date(<?php echo date("Y"); ?>, <?php echo date("n") - 1; ?>, <?php echo date("j"); ?>));

</script> 
```

相关文档：

[http://docs.dhtmlx.com/scheduler/api__scheduler_serverlist.html](http://docs.dhtmlx.com/scheduler/api__scheduler_serverlist.html) [http://docs.dhtmlx.com/scheduler/api__scheduler_updatecollection.html](http://docs.dhtmlx.com/scheduler/api__scheduler_updatecollection.html) [http://docs.dhtmlx.com/scheduler/api__scheduler_setcurrentview.html](http://docs.dhtmlx.com/scheduler/api__scheduler_setcurrentview.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T14:41:23.023

```
scheduler.xy.scale_height = 30; 
```

我添加了这行代码；它覆盖了奇怪的高度问题。耶

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-13T08:52:50.333

只需在 scheduler.createTimelineView 中添加属性“section_autoheight : false”。这将解决问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-10T04:51:22.533

否则，您可以指定 dhtmlx 移动调度程序的宽度和高度。如下所示。

dhx.ui ({ view:"window", height:300, width:300, ...
})

链接:: [http://docs.dhtmlx.com/touch/doku.php?id=api:module_baseview](http://docs.dhtmlx.com/touch/doku.php?id=api:module_baseview) 问候，Yuvaraj

# html - 谷歌浏览器（Windows 7）不显示 CSS 层

> ID：12197862
> 
> 赞同：0
> 
> 时间：2012-08-30T13:22:04.913
> 
> 标签：html, css, google-chrome

我正在使用 Google Chrome 开发一个网站，但我无法让 css 层正常工作。因为没有合理的解释为什么我的浏览器没有显示代码应该显示的内容，所以我从这个网站 (http://www.echocho.com/csslayers.htm) 复制粘贴的代码，它也没有显示当我将其复制粘贴到我网站的源代码中时，应该会显示它。当我在线查看它时，它会显示它应该的方式。关于问题是什么的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T13:49:23.180

您的顶部和左侧值无效；他们需要附加单位。您的 z 索引也被翻转；最重要的是需要更高的价值。

```
#background {
    background-repeat:repeat-x;
    position:relative;
    z-index:1;
}

#overlay {
    position:relative;
    top:-50px;
    left:5px;
    z-index:4;
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T13:49:46.533

您需要将该图像设置为 CSS 中的背景，而不是将其作为 div 中的图像，例如：

```
background-image:url("http://www.webdesign.org/img_articles/9244/Gradient-Noise-Final.jpg") repeat-x; 
```

# ruby-on-rails - 如何在 Rails 中以相对方式使用 link_to？

> ID：12197865
> 
> 赞同：1
> 
> 时间：2012-08-30T13:22:16.867
> 
> 标签：ruby-on-rails, erb

我正在使用omniauth-facebook gem 来做一些Facebook 登录的事情。该调用的工作方式是，当调用 /auth/facebook 时，它会执行身份验证过程。当我手动输入 URL 时，所有这些都可以正常工作：`http://localhost:3000/auth/facebook`

但是，当我只获取我的代码时，我的域设置为我的应用程序具有以下 URL：

```
http://railsapps.mydomain.com/app1  
http://railsapps.mydomain.com/app2  
http://railsapps.mydomain.com/app3 
```

等等

现在在我的索引页面中，我有一个链接，它写在我的 .html.erb 文件中，如下所示：

```
<%= link_to "Sign in with Facebook", "/auth/facebook", id: "sign_in" %> 
```

当我在本地运行它并单击链接时，它会正确转到 localhost:3000/auth/facebook，世界上一切都很好。但是，当我使用相同的代码上网并单击此链接时，它会转到：（`http://railsapps.mydomain.com/auth/facebook`这当然不起作用，因为它应该转到`railsapps.mydomain.com/app1/auth/facebook`.

在这方面可以提供的任何帮助将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T16:26:48.093

你应该可以使用这个：

```
<%= link_to "Sign in with Facebook", root_url + "auth/facebook", id: "sign_in" %> 
```

或者如果这不起作用，请尝试 request.host：

```
<%= link_to "Sign in with Facebook", "http://#{request.host}/auth/facebook", id: "sign_in" %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T13:29:19.763

你应该编辑你`default_url_options`的`ApplicationController`：

```
def default_url_options
  if Rails.env.production?
    {:host => "railsapps.mydomain.com/app1"}
  else  
    {}
  end
end 
```

# android - 如何使用 FLAG_REORDER_TO_FRONT 和 FLAG_CLEAR_TOP 启动 Activity

> ID：12197868
> 
> 赞同：8
> 
> 时间：2012-08-30T13:22:19.643
> 
> 标签：android, android-intent, android-activity

我的任务 A、B、C、D 中有四项活动。

活动按A->B->C->D的顺序展开。

这里，

1.  我想从 D 回到活动 A 并恢复该活动。
    所以我使用了意图标志

    ```
    i.setFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT); 
    ```

2.  在 stmt 1 之后不再需要活动 B、C、D 实例。
    我去找标志来完成这个，

    ```
    Intent.FLAG_ACTIVITY_CLEAR_TOP 
    ```

在我使用上述 1 和 2 的应用程序中，我尝试实现类似
- 返回并恢复活动 A 并从堆栈中删除其他活动，
所以我尝试过。

```
 i.setFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);  
    i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); //vise versa 
```

使用上面的代码，两个标志都在这里使用这个参考
（[Android：setFlags 和 addFlags for intent 有什么区别](https://stackoverflow.com/questions/6664189/androidwhat-is-difference-between-setflags-and-addflags-for-intent)）

我无法同时完成这些任务（恢复活动 A 并清除其他）。

实际调用场景是

```
when i use the CLEAR flag the call is like   D->oncreate(A)   and clear BCD
when i use the REORDER flag the call is like   D->onrestart(A). 
```

那么我如何结合这些标志来获得组合动作来恢复 A 并清除其他，或者有任何其他方法可以做到这一点。

这是我的清单

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android" 
package="com.tpv.vptest" 
android:versionCode="1" 
android:versionName="1.0" > 

<uses-sdk 
android:minSdkVersion="8" 
android:targetSdkVersion="15" /> 

<application 
android:icon="@drawable/ic_launcher" 
android:label="@string/app_name" 
android:theme="@style/AppTheme" > 
<activity 
android:name=".NeverStopActivity" 
android:label="@string/title_activity_main" 
android:launchMode="singleInstance"> 
<intent-filter> 
<action android:name="android.intent.action.MAIN" /> 
```

活动 1->2

```
Intent i = new Intent(getApplicationContext(), TopMenuBar.class);
 startActivity(i); 
```

*   您可以在 1 秒内再次执行此操作 - 重试/取消

活动 2->3

```
Intent i = new Intent(getApplicationContext(), 
Activity3.class); 

startActivity(i); 
```

和 3-> 1

```
Intent i = new Intent(getApplicationContext(),
 NeverStopActivity.class);

 i.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
 i.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);

 startActivity(i); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-04T13:01:47.143

您不需要`Intent.FLAG_ACTIVITY_REORDER_TO_FRONT`，请`Intent.FLAG_ACTIVITY_SINGLE_TOP`改用。

因此，这将起作用：

```
i.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);  
i.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP); 
```

或者

```
i.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP); 
```

我建议您阅读[Intent.FLAG_ACTIVITY_CLEAR_TOP](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_CLEAR_TOP)的文档。

* * *

**编辑**

它不适合你的原因是

```
android:launchMode="singleInstance" 
```

在清单中。
您的`NeverStopActivity`活动是在与其他人不同的任务中创建的。`singleInstance`标志的含义在[Tasks 和 Back Stack](http://developer.android.com/guide/components/tasks-and-back-stack.html)中有描述。
我建议你阅读整篇文章。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T15:44:18.590

无需单独调用`setFlags()`，`addFlags()`您可以`setFlags()`同时使用`FLAG_ACTIVITY_CLEAR_TOP`和`FLAG_ACTIVITY_SINGLE_TOP`标志调用：

```
Intent i = new Intent(this, ActivityA.class);
i.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP);
startActivity(i); 
```

# sql-server - access-SQL 传递查询（创建 SP）错误

> ID：12197870
> 
> 赞同：3
> 
> 时间：2012-08-30T13:22:29.127
> 
> 标签：sql-server, ms-access, vba, pass-through

我正在尝试使用 MS Access 2010 在 SQL Server 2012 中使用传递查询创建存储过程。

```
IF NOT EXISTS (SELECT * FROM sys.schemas WHERE name = N'SCHtest') 
EXECUTE sp_executesql N'create schema SCHtest'
GO
CREATE PROCEDURE [SCHtest].[SQLLrtest_2]
AS
BEGIN
INSERT INTO [dbo].[UploadTest] (.....) 
```

在访问我得到这个错误：

```
Run time error '3146':
[Microsoft][ODBC SQL Server Driver][SQL Server]Incorrect syntax nera 'GO'. (#102)
[Microsoft][ODBC SQL Server Driver][SQL Server]'CREATE/ALTER PROCEDURE' must be 
the first statement in a query batch. (#111) 
```

如果我将代码复制粘贴到 SQL Server - 一切正常！

正如错误中所写，如果我删除 IF 语句和 GO，则可以在 Access 和 SQL 中使用。如何在不删除 IF 语句的情况下使其工作？

非常感谢任何帮助！

埃德加拉斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T14:09:22.223

如何设置这样的东西：

```
IF NOT EXISTS (SELECT *
               FROM   sys.schemas
               WHERE  name = N'testx')
  EXECUTE Sp_executesql
    N'create schema testx'

DECLARE @sql VARCHAR(max)

SELECT @sql = '
CREATE PROCEDURE testx
AS
INSERT INTO [dbo].[table_1] (atext) values (''abc'') '

EXEC (@sql)
EXEC Testx 
```

参考：[http ://ask.sqlservercentral.com/questions/4420/alternative-to-go-for-batching-sql-statements.html](http://ask.sqlservercentral.com/questions/4420/alternative-to-go-for-batching-sql-statements.html)

在 MS Access 2010 中测试

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T13:31:51.403

[GO](http://msdn.microsoft.com/en-us/library/ms188037.aspx)不是 TSQL 语句，它是 SSMS 的命令。只要您从 MSAccess 执行查询，您就不能使用`GO`.

因此，您唯一的选择是拆分查询并分别执行它们。已编辑实际上，这不是唯一的选择，请参阅 Remou 的答案
**。**

另外，我认为通过 MSAccess 创建过程不是一个好主意。至少不方便。也许，你最好问一下，你原来的问题是如何解决迫使你通过MSAccess创建程序的？

希望这可以帮助。

# java - JavaFX LineChart 图例样式

> ID：12197877
> 
> 赞同：2
> 
> 时间：2012-08-30T13:22:44.933
> 
> 标签：java, javafx-2

我想更新 LineChart 图例的样式，我在具有相应系列类的节点上使用 setStyle。

```
String color = ....
XYChart.Series<Number, Number> series = new XYChart.Series<Number, Number>();
_chart.getData().add(series);

String seriesClass = null;
for(String styleClass : series.getNode().getStyleClass())
{
    if(styleClass.startsWith("series"))
    {
        seriesClass = styleClass;
        break;
    }
}
if(seriesClass != null)
{
    //
    // Customize the style.
    //
    StringBuilder sb = new StringBuilder();
    sb.append("-fx-stroke: ");
    sb.append(color);
    sb.append("; ");
    sb.append("-fx-background-color: ");
    sb.append(color);
    sb.append(", white;");
    if(doted)
    {
        sb.append("-fx-stroke-dash-array: 10 10");
    }
    _styles.put(seriesClass, sb.toString()); 
}

java.util.Set<javafx.scene.Node> nodes = _chart.lookupAll("." + seriesClass);
for(javafx.scene.Node n : nodes)
{
    n.setStyle(style);
} 
```

问题是这只会影响路径的样式，图例样式不会改变。我已经打印了图表节点子节点，并看到在添加系列调用返回后没有完全创建图例：

```
Legend@18e8627[styleClass=chart-legend]
    Label@1689c98[styleClass=label chart-legend-item]
    Label@100e4ce[styleClass=label chart-legend-item]
    Label@1adcb5e[styleClass=label chart-legend-item]
    Label@102a8fb[styleClass=label chart-legend-item] 
```

稍后，如果我再次打印孩子：

```
Legend@9a095[styleClass=chart-legend]
    Label[id=null, styleClass=label chart-legend-item]
        LabelSkin[id=null, styleClass=label chart-legend-item]
            Region@12acafc[styleClass=chart-legend-item-symbol chart-line-symbol series0 default-color0]
            LabeledText@749a47[styleClass=text]
    Label[id=null, styleClass=label chart-legend-item]
        LabelSkin[id=null, styleClass=label chart-legend-item]
            Region@3ca3a4[styleClass=chart-legend-item-symbol chart-line-symbol series1 default-color1]
            LabeledText@11b9972[styleClass=text]
    Label[id=null, styleClass=label chart-legend-item]
        LabelSkin[id=null, styleClass=label chart-legend-item]
            Region@57f433[styleClass=chart-legend-item-symbol chart-line-symbol series2 default-color2]
            LabeledText@6172b5[styleClass=text]
    Label[id=null, styleClass=label chart-legend-item]
        LabelSkin[id=null, styleClass=label chart-legend-item]
            Region@16458ed[styleClass=chart-legend-item-symbol chart-line-symbol series3 default-color3]
            LabeledText@10a68bd[styleClass=text] 
```

如果我现在更新样式，则图例样式会正确更新。

我怎么知道何时添加了具有设置样式所需的类的 Region 子项，以便我可以在该节点上设置样式？

添加新系列后，还有其他更新传奇风格的想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-01T19:00:09.010

我也遇到了这个问题。提出了一种解决方法，可以检测图例项的创建时间，以便可以向它们添加动态样式。

我在图例的“getChildrenUnmodifiable()”ObservableList 中添加了一个 ListChangeListener，当图例的每个子项被添加时，它又为每个子项添加一个 ListChangeListener。从这个监听器中，我们可以知道新项目何时被添加到图例中（或删除）。这使我们可以进行动态样式更改。

```
for (Node n : lineChart.getChildrenUnmodifiable())
        {
            if (n instanceof Legend)
            {
                final Legend legend = (Legend) n;

                // remove the legend
                legend.getChildrenUnmodifiable().addListener(new ListChangeListener<Object>()
                {
                    @Override
                    public void onChanged(Change<?> arg0)
                    {
                        for (Node node : legend.getChildrenUnmodifiable())
                        {
                            if (node instanceof Label)
                            {
                                final Label label = (Label) node;
                                label.getChildrenUnmodifiable().addListener(new ListChangeListener<Object>()
                                {
                                    @Override
                                    public void onChanged(Change<?> arg0)
                                    {
                                        //make style changes here
                                    }

                                });
                            }
                        }
                    }
                });
            }
        } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-02-09T13:20:37.963

这些都不适合我，所以我找到了另一种解决方案。答案和 Platform.runLater 方法都不是。

```
XYChart.Series<Number,Number> value  //is our serie value.

for(int index = 0; index<value.getData().size(); index++){
    // we're looping for each data point, changing the color of line symbol
    XYChart.Data dataPoint = value.getData().get(index);
    Node lineSymbol = dataPoint.getNode().lookup(".chart-line-symbol");
    lineSymbol.setStyle("-fx-background-color: #0000FF, white;");
}
// and this is for the color of the line
value.getNode().setStyle("-fx-border-style: solid; -fx-stroke: #0000FF; -fx-background-color: #0000FF;"); 
```

对于图例颜色更改：

```
for(Node n : chart.getChildrenUnmodifiable()){
   if(n instanceof Legend){
      for(Legend.LegendItem legendItem : ((Legend)n).getItems()){
        legendItem.getSymbol().setStyle("-fx-background-color: #0000ff, white;");
      }
   }
} 
```

希望这也适用于任何搜索这个的人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-09T14:07:42.760

知道这该死的老了，但也许有人仍然需要一个更顺畅的解决方案。只需使用 Platform.runLater 函数：

```
int index = 2;
Platform.runLater(new Runnable() {
    @Override
    public void run() {
        myChart.lookupAll(".chart-legend-item-symbol").toArray()[index].setStyle("-fx-border-color: rgba(200,0,0,1)");
}}); 
```

# c# - 为什么无法访问网络服务

> ID：12197878
> 
> 赞同：1
> 
> 时间：2012-08-30T13:22:44.710
> 
> 标签：c#, asp.net-mvc-3, wcf

当我尝试从开发服务器访问 Web 服务时，它返回以下错误。当我从本地机器访问相同的服务时，它工作正常。你知道可能是什么原因吗？非常感谢您！

```
System.ServiceModel.ProtocolException: The remote server returned an unexpected response: (405) Method Not Allowed. ---> System.Net.WebException: The remote server returned an error: (405) Method Not Allowed.
   at System.Net.HttpWebRequest.GetResponse()
   at System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelRequest.WaitForReply(TimeSpan timeout)
   --- End of inner exception stack trace ---

Server stack trace:
   at System.ServiceModel.Channels.HttpChannelUtilities.ValidateRequestReplyResponse(HttpWebRequest request, HttpWebResponse response, HttpChannelFactory factory, WebException responseException, ChannelBinding channelBinding)
   at System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelRequest.WaitForReply(TimeSpan timeout)
   at System.ServiceModel.Channels.RequestChannel.Request(Message message, TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)
   at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)

Exception rethrown at [0]:
   at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
   at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)
   at Portal.ExportSvcReference.IExportDataService.AddDataRequest(ExportData request) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T13:37:51.467

405 错误通常是由跨域问题引起的。如果你已经部署了你的服务，但是在 localhost（或另一个部署）上的客户端进行测试，那么一切都不再在同一个 localhost 域下运行，所以你需要启用跨域调用。

可以在此处找到启用跨域脚本的一个很好的示例： [如何避免在 jquery ajax 中使用跨域策略来使用 wcf 服务？](https://stackoverflow.com/questions/5686059/how-to-avoid-cross-domain-policy-in-jquery-ajax-for-consuming-wcf-service)

正如@Monkieboy 所说，如果不查看您的 web.config 文件就很难诊断，但尝试通过添加来更改您正在使用的任何绑定`crossDomainScriptAccessEnabled="true"`，看看是否有帮助。

# angularjs - AngularJS：如何在 ng-include 中制作角度加载脚本？

> ID：12197880
> 
> 赞同：85
> 
> 时间：2012-08-30T13:22:48.563
> 
> 标签：angularjs

嘿，我正在用 Angular 构建一个网页。问题是已经建立了一些没有角度的东西，我也必须包括它们

问题是这样的。

我的 main.html 中有这样的内容：

```
<ngInclude src="partial.html">
</ngInclude> 
```

我的 partial.html 有这样的东西

```
<h2> heading 1 <h2>
<script type="text/javascript" src="static/js/partial.js">
</script> 
```

而我的 partial.js 与 angularjs 无关。nginclude 工作，我可以看到 html，但我根本看不到正在加载的 javascript 文件。我知道如何使用 firebug/chrome-dev-tool，但我什至看不到正在发出的网络请求。我究竟做错了什么？

我知道 angular 对脚本标签有一些特殊的含义。我可以覆盖它吗？

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2013-11-19T13:31:25.773

接受的答案不适用于 1.2.0-rc1+ ( [Github issue](https://github.com/angular/angular.js/issues/3756) )。

[这是endorama](https://gist.github.com/endorama/7369006)创建的快速修复：

```
/*global angular */
(function (ng) {
  'use strict';

  var app = ng.module('ngLoadScript', []);

  app.directive('script', function() {
    return {
      restrict: 'E',
      scope: false,
      link: function(scope, elem, attr) {
        if (attr.type === 'text/javascript-lazy') {
          var code = elem.text();
          var f = new Function(code);
          f();
        }
      }
    };
  });

}(angular)); 
```

只需添加此文件，将`ngLoadScript`模块加载为应用程序依赖项并`type="text/javascript-lazy"`用作脚本的类型，您可以在部分中延迟加载：

```
<script type="text/javascript-lazy">
  console.log("It works!");
</script> 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-08-30T15:37:14.927

简短的回答：AngularJS（“jqlite”）不支持这个。在您的页面上包含 jQuery（在包含 Angular 之前），它应该可以工作。请参阅[https://groups.google.com/d/topic/angular/H4haaMePJU0/discussion](https://groups.google.com/d/topic/angular/H4haaMePJU0/discussion)

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2013-10-31T19:46:55.113

我尝试了 neemzy 的方法，但使用 1.2.0-rc.3 对我不起作用。脚本标签将被插入到 DOM 中，但不会加载 javascript 路径。我怀疑这是因为我试图加载的 javascript 来自不同的域/协议。所以我采取了不同的方法，这就是我想出的，以谷歌地图为例：（[要点](https://gist.github.com/neilsoult/7255583)）

```
angular.module('testApp', []).
    directive('lazyLoad', ['$window', '$q', function ($window, $q) {
        function load_script() {
            var s = document.createElement('script'); // use global document since Angular's $document is weak
            s.src = 'https://maps.googleapis.com/maps/api/js?sensor=false&callback=initialize';
            document.body.appendChild(s);
        }
        function lazyLoadApi(key) {
            var deferred = $q.defer();
            $window.initialize = function () {
                deferred.resolve();
            };
            // thanks to Emil Stenström: http://friendlybit.com/js/lazy-loading-asyncronous-javascript/
            if ($window.attachEvent) {  
                $window.attachEvent('onload', load_script); 
            } else {
                $window.addEventListener('load', load_script, false);
            }
            return deferred.promise;
        }
        return {
            restrict: 'E',
            link: function (scope, element, attrs) { // function content is optional
            // in this example, it shows how and when the promises are resolved
                if ($window.google && $window.google.maps) {
                    console.log('gmaps already loaded');
                } else {
                    lazyLoadApi().then(function () {
                        console.log('promise resolved');
                        if ($window.google && $window.google.maps) {
                            console.log('gmaps loaded');
                        } else {
                            console.log('gmaps not loaded');
                        }
                    }, function () {
                        console.log('promise rejected');
                    });
                }
            }
        };
    }]); 
```

我希望它对某人有帮助。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2017-01-23T02:39:25.237

我使用此方法动态加载脚本文件（在控制器内）。

```
var script = document.createElement('script');
script.type = 'text/javascript';
script.src = "https://maps.googleapis.com/maps/api/js";
document.body.appendChild(script); 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2013-10-29T10:38:03.867

从 1.2.0-rc1 开始，这将不再起作用。有关它的更多信息，请参阅[此问题](https://github.com/angular/angular.js/issues/3756)，我在其中发表了一条评论，描述了一种快速解决方法。我也会在这里分享：

```
// Quick fix : replace the script tag you want to load by a <div load-script></div>.
// Then write a loadScript directive that creates your script tag and appends it to your div.
// Took me one minute.

// This means that in your view, instead of :
<script src="/path/to/my/file.js"></script>

// You'll have :
<div ng-load-script></div>

// And then write a directive like :
angular.module('myModule', []).directive('loadScript', [function() {
    return function(scope, element, attrs) {
        angular.element('<script src="/path/to/my/file.js"></script>').appendTo(element);
    }
}]); 
```

不是有史以来最好的解决方案，但是，嘿，在后续视图中放置脚本标签也不是。就我而言，我必须这样做是为了使用 Facebook/Twitter/等。小部件。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-02-27T07:38:38.383

[ocLazyLoad](https://github.com/ocombe/ocLazyLoad)允许通过路由器（例如 ui-router）在模板/视图中延迟加载脚本。这是一个[片段](https://github.com/ocombe/ocLazyLoad#works-well-with-your-router)

```
$stateProvider.state('parent', {
    url: "/",
    resolve: {
        loadMyService: ['$ocLazyLoad', function($ocLazyLoad) {
             return $ocLazyLoad.load('js/ServiceTest.js');
        }]
    }
})
.state('parent.child', {
    resolve: {
        test: ['loadMyService', '$ServiceTest', function(loadMyService, $ServiceTest) {
            // you can use your service
            $ServiceTest.doSomething();
        }]
    }
}); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-04-12T01:36:37.410

要从 a 动态加载 recaptcha，`ui-view`我使用以下方法：

在`application.js`：

```
 .directive('script', function($parse, $rootScope, $compile) {
    return {
        restrict: 'E',
        terminal: true,
        link: function(scope, element, attr) {
            if (attr.ngSrc) {
                 var domElem = '<script src="'+attr.ngSrc+'" async defer></script>';
                 $(element).append($compile(domElem)(scope));

            }
        }
    };
}); 
```

在`myPartial.client.view.html`：

```
 <script type="application/javascript" ng-src="http://www.google.com/recaptcha/api.js?render=explicit&onload=vcRecaptchaApiLoaded"></script> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-12-22T06:52:30.700

我尝试明确使用 Google reCAPTCHA。这是示例：

```
// put somewhere in your index.html
<script type="text/javascript">
var onloadCallback = function() {
  grecaptcha.render('your-recaptcha-element', {
    'sitekey' : '6Ldcfv8SAAAAAB1DwJTM6T7qcJhVqhqtss_HzS3z'
  });
}; 
```

```
//link function of Angularjs directive
link: function (scope, element, attrs) {
  ...
  var domElem = '<script src="https://www.google.com/recaptcha/api.js?onload=onloadCallback&render=explicit" async defer></script>';
  $('#your-recaptcha-element').append($compile(domElem)(scope));
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-11-17T11:11:38.003

不幸的是，这篇文章中的所有答案都对我不起作用。我不断收到以下错误。

> 无法在“文档”上执行“写入”：除非显式打开，否则无法从异步加载的外部脚本写入文档。

我发现如果您使用一些也调用其他外部 JavaScript 文件并尝试插入 HTML 的 3rd 方小部件（在我的情况下为 demandforce），就会发生这种情况。查看控制台和 JavaScript 代码，我注意到这样的多行：

```
document.write("<script type='text/javascript' "..."'></script>"); 
```

[我使用了来自： https](https://github.com/krux/postscribe) ://github.com/krux/postscribe 的第 3 方 JavaScript 文件（htmlParser.js 和 postscribe.js）。这解决了这篇文章中的问题并同时修复了上述错误。

（在我现在紧迫的最后期限内，这是一种快速而肮脏的方法。但是，我对使用 3rd 方 JavaScript 库感到不舒服。我希望有人能想出一个更干净、更好的方法。）

# excel - 在电子表格中搜索输入字符串

> ID：12197881
> 
> 赞同：2
> 
> 时间：2012-08-30T13:22:54.370
> 
> 标签：excel, openxml, spreadsheet

我正在使用 Open XML SDK 打开一个 Excel 文件 (xlsx)，并且我想查找从外部传递的特定字符串或整数，以检查电子表格中值的重复项。

如何在电子表格的所有单元格中搜索输入字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T16:14:05.970

这里：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;
using DocumentFormat.OpenXml;
using DocumentFormat.OpenXml.Packaging;
using DocumentFormat.OpenXml.Spreadsheet;

namespace ConsoleApplication3
{
    class Program
    {
        static void Main(string[] args)
        {
            using (SpreadsheetDocument document = SpreadsheetDocument.Open(@"C:\Users\user\Desktop\Book1.xlsx", true))
            {
                Sheet sheet = document.WorkbookPart.Workbook.Descendants<Sheet>().First<Sheet>();
                Worksheet worksheet = ((WorksheetPart)document.WorkbookPart.GetPartById(sheet.Id)).Worksheet;
                IEnumerable<Row> allRows = worksheet.GetFirstChild<SheetData>().Descendants<Row>();
                foreach (Row currentRow in allRows)
                {
                    IEnumerable<Cell> allCells = currentRow.Descendants<Cell>();
                    foreach (Cell currentCell in allCells)
                    {
                        CellValue currentCellValue = currentCell.GetFirstChild<CellValue>();
                        string data = null;
                        if (currentCell.DataType != null)
                        {
                            if (currentCell.DataType == CellValues.SharedString) // cell has a cell value that is a string, thus, stored else where
                            {
                                data = document.WorkbookPart.GetPartsOfType<SharedStringTablePart>().FirstOrDefault().SharedStringTable.ElementAt(int.Parse(currentCellValue.Text)).InnerText;
                            }
                        }
                        else
                        {
                            data = currentCellValue.Text;
                        }
                        Console.WriteLine(data);

                        /* 
                            your code here

                                if(data.contains("myText"))
                                    doSomething();

                        */

                    }
                }
            }           
        }
    }
} 
```

# c# - 清除 WebBrowser 控件浏览历史记录

> ID：12197883
> 
> 赞同：4
> 
> 时间：2012-08-30T13:23:01.467
> 
> 标签：c#, webbrowser-control, browser-history

我想在 WebBrowser 完成浏览后清除 WebBrowser 控制历史记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T11:19:29.990

实际上，有两种类型的历史。一个是“已访问”页面列表，另一个是您在 IE 历史用户界面中看到的实际历史。

如果要删除访问过的页面列表，则需要使用 DeleteUrlCacheEntry 删除每个项目。通过使用 FindFirst/NextUrlCacheEntry API 循环，您可以访问创建这些项目的时间和日期，因此仅删除在浏览器会话开始之后和完成之前创建的项目。

对于 FindFirst/NextUrlCacheEntry 和 DeleteUrlCacheEntry 信息，网上有预先编写的代码可以使用，然后您可以轻松创建过滤器来决定在循环这些缓存条目时要删除哪些项目。

让我知道我是否可以提供进一步的帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T01:48:54.810

The history state of the `System.Windows.Forms.WebBrowse` control is internal and cannot be modified directly. All actions are performed via the `GoBack` and `GoForward` methods.

You can prevent your users from going backwards and forwards by setting the `CanGoBack` and `CanGoForward` properties to false. You would also want to modify the `AllowWebBrowserDrop`, `WebBrowserShortcutsEnabled` and `IsWebBroserContextMenuEnabled` properties as well.

Because history is only exposed through these methods, properties and user actions there is no need to clear the internal history state because the user cannot act on it. Note that session history (i.e. the back/forward buttons) is a separate concept from the "browser history" (what you see in the History panel in IE).

Note that it's possible that WebBrowser instances contained within other programs may write to the Windows user IE history files, however I don't know for certain. If they do I doubt there's anything you can do about that.

# javascript - 提交jsp表单后仍保持在同一页面

> ID：12197885
> 
> 赞同：6
> 
> 时间：2012-08-30T13:23:10.033
> 
> 标签：javascript, jsp, servlets

我正在使用 jsp 将数据发布到 servlet，但在发布数据后，我想保持原样的 jsp。简要地说： 1）我在这里有一个带有 2 个文本框的 jsp。我使用 javascript 通过单击按钮将数据从一个复制到另一个。2）我使用相同的按钮将数据发布到数据库。3）我希望同时完成这两个动作，不应该去第三个jsp（servlet post result），但是，应该去我使用的另一个jsp。

我能够分别处理这两件事，但在一起我无法做到。数据在数据库中更新并在第一个文本中显示一个新行（这是我的错，我正在使用重定向方式）或将数据从第一个文本框移动到另一个文本框并且不进行数据发布。请帮我做这件事。下面是我用来做的代码。

复制数据和发布数据的java脚本是：

```
function move(){  

document.getElementById('tgt1').value = document.getElementById('Allocation').value;  
document.getElementById('Allocation').value="";  
document.getElementById("Send").disabled=true;  

}
function invoke(but)  
  {  
   if(but==0)   
    {  
        document.myform.action="Alloc_Insert.do";  
    } 
```

按钮的方法声明如下：

```
<table><tr><center><td><input type="Submit" value="Allocate" id="Send"     onClick="invoke(0);move();" style="width:150px" style="font-size:100%"/></td></center></tr>    </table> 
```

我使用的servlet代码如下。

```
ResultSet rs=null;  
        String Add=request.getParameter("tgt1");  
        String user=(String) session.getAttribute("myusername");  
        Class.forName("oracle.jdbc.driver.OracleDriver").newInstance();Date d1 = new Date();    
        String d1_str = new SimpleDateFormat("yyyy-MM-dd").format(d1);   
        Connection con=DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:XE","system","tiger");  
        PreparedStatement ps=con.prepareStatement("UPDATE SCOPE1 SET ALLOCATED='"+d1_str+"', SPECIALIST='"+user+"' WHERE DBID='"+Add+"'");  
        con.setAutoCommit(true);  
        int i=ps.executeUpdate();  
        if(i==1)  
                           {  
             String redirectURL= "Update_Counts.jsp";  
            response.sendRedirect(redirectURL);  
                        }  
                   else{  

            out.print("retry");  
                  } 
```

我想发布数据以及与复制到第二个文本框中的文本框值相同，因为我将使用它作为我的进一步参考。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T18:20:45.330

正如我在评论中提到的，请考虑对您的 servlet 进行 javascript 异步调用 (AJAX)。

在这种情况下，您的页面不会更改，您可以在后台与服务器进行所有交互。

[这是AJAX教程](https://www.w3schools.com/xml/ajax_intro.asp)

如果您不是经验丰富的 Javascript 程序员，请考虑[这个 JavaScript 教程](http://www.w3schools.com/js/default.asp)

JSP本质上是一个servlet，即它是服务器端代码，但是您可以将javascript嵌入到您的JSP页面中，这将在客户端的浏览器（客户端）上运行，并在后台向服务器发送/接收数据包，无需将整个页面提交给服务器。

[这里是JSP和AJAX结合的例子](http://www.ajaxprojects.com/ajax/tutorialdetails.php?itemid=580)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T12:02:07.383

你可以像这样在你的jsp中调用ajax：

```
function test(tg1){
  context = '${pageContext.request.contextPath}';
  var http_request = getXMLHttpRequest();
            if (!http_request) {
        alert('Giving up :( Cannot create an XMLHTTP instance');
        return false;
    }

    http_request.open("POST", context + "/ServletName?tgt1=" + tg1, true);
    http_request.onreadystatechange = function() {
        if (http_request.readyState == 4) {
            if (http_request.status == 200) {
                var response = http_request.responseText;
                //do something if you have a response from the servlet
            }
        }
    };
    http_request.send(null);
} 
```

在您的 servlet 中，删除您的重定向代码。

```
ResultSet rs=null;  
String Add=request.getParameter("tgt1");  
String user=(String) session.getAttribute("myusername");  
Class.forName("oracle.jdbc.driver.OracleDriver").newInstance();Date d1 = new Date();    
String d1_str = new SimpleDateFormat("yyyy-MM-dd").format(d1);   
Connection con = DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:XE","system","tiger");  
PreparedStatement ps=con.prepareStatement("UPDATE SCOPE1 SET ALLOCATED='"+d1_str+"', SPECIALIST='"+user+"' WHERE DBID='"+Add+"'");  
con.setAutoCommit(true);  
int i=ps.executeUpdate(); 
```

您可以使用 servlet 添加响应`response.getWriter().write("something");`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T11:53:21.107

在您的代码中，我可以看到（部分）2 个 JavaScript 函数`move()`和`invoke(but)`.
第一个将数据从一个 DOM 元素 ('Allocation') 移动到另一个 ('tgt1')。第二个是尝试向服务器/jsp 页面提交数据。

这是正确的，那是你想要做的吗？

顺便说一句：您应该按顺序调用它们，而`move(); invoke(...);`不是其他方式，因为一旦提交表单， move() 将不会运行 - 客户端不会发生任何事情，因为处理离开了页面。

我注意到在你的 move() 函数中，你禁用`document.getElementById("Send").disabled=true;`了恰好是你的提交按钮的 DOM 元素“发送”()。此操作将阻止提交表单，因此您可能应该删除该行。

# .net - 使用 Newtonsoft.Json，如何将 JSON 反序列化为具有包含接口类型的 IEnumerable 属性的类型？

> ID：12197892
> 
> 赞同：2
> 
> 时间：2012-08-30T13:23:22.557
> 
> 标签：.net, json, serialization, json.net

我正在使用一个发送 JSON 的 RESTful Web 服务，我尝试使用`HttpContent.ReadAsAsync<T>`. 我尝试反序列化的类型声明了一个属性，该属性返回一个包含接口类型的 IEnumerable。此代码片段演示了我尝试反序列化为的类型：

```
public class Data
{
    public IEnumerable<IChild> Children { get; set; };
} 
```

问题是 Newtonsoft.Json，底层`HttpContent.ReadAsAsync<T>`不了解如何反序列化 type`IChild`的对象，后者是一个接口。如何向 Newtonsoft.Json 指定如何将 IChild 反序列化为具体类型？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T13:39:30.940

您可以使用自定义`Converter`来告诉 JSON.NET 如何反序列化该接口的类型。下面的代码显示了一个示例。

```
public class StackOverflow_12197892
{
    public class Data
    {
        public IEnumerable<IChild> Children { get; set; }

        public override string ToString()
        {
            return string.Format("Data{{Children=[{0}]}}",
                string.Join(", ", Children.Select(c => string.Format("{0}/{1}", c.Name, c.IsFemale ? "girl" : "boy"))));
        }
    }
    public interface IChild
    {
        string Name { get; }
        bool IsFemale { get; }
    }
    public class Son : IChild
    {
        public Son(string name)
        {
            this.Name = name;
        }

        public string Name { get; private set; }
        public bool IsFemale { get { return false; } }
    }
    public class Daughter : IChild
    {
        public Daughter(string name)
        {
            this.Name = name;
        }

        public string Name { get; private set; }
        public bool IsFemale { get { return true; } }
    }
    class ChildConverter : Newtonsoft.Json.JsonConverter
    {
        public override bool CanConvert(Type objectType)
        {
            return typeof(IChild).IsAssignableFrom(objectType);
        }

        public override object ReadJson(Newtonsoft.Json.JsonReader reader, Type objectType, object existingValue, Newtonsoft.Json.JsonSerializer serializer)
        {
            JObject obj = serializer.Deserialize<JToken>(reader) as JObject;
            if (obj != null)
            {
                bool isFemale = obj["isFemale"].ToObject<bool>();
                string name = obj["name"].ToObject<string>();
                if (isFemale)
                {
                    return new Daughter(name);
                }
                else
                {
                    return new Son(name);
                }
            }
            else
            {
                return null;
            }
        }

        public override void WriteJson(Newtonsoft.Json.JsonWriter writer, object value, Newtonsoft.Json.JsonSerializer serializer)
        {
            throw new NotImplementedException();
        }
    }
    public static void Test()
    {
        Newtonsoft.Json.JsonSerializer serializer = new Newtonsoft.Json.JsonSerializer();
        serializer.Converters.Add(new ChildConverter());
        string json = "{'Children':[{'name':'John',isFemale:false},{'name':'Mary',isFemale:true}]}".Replace('\'', '\"');
        var obj = serializer.Deserialize(new StringReader(json), typeof(Data));
        Console.WriteLine(obj);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-14T09:52:53.223

json.net 提供的开箱即用支持非常简单，您只需在序列化和反序列化时使用以下 JsonSettings：

```
JsonConvert.SerializeObject(graph,Formatting.None, new JsonSerializerSettings()
                                                                                               {
                                                                                                 TypeNameHandling = TypeNameHandling.Objects,
                                                                                               TypeNameAssemblyFormat = System.Runtime.Serialization.Formatters.FormatterAssemblyStyle.Simple
                                                                                           }); 
```

对于反序列化，请使用以下代码：

```
JsonConvert.DeserializeObject(Encoding.UTF8.GetString(bData),type,
                                                       new JsonSerializerSettings()
                                                           {TypeNameHandling = TypeNameHandling.Objects}); 
```

只需记下 JsonSerializerSettings 对象初始化程序，这对您很重要。

# c# - 从集合 A 中获取对象，其中 A 的 ID 存在于 B 对象的集合中

> ID：12197893
> 
> 赞同：0
> 
> 时间：2012-08-30T13:23:24.883
> 
> 标签：c#, linq

我有一个人对象的集合 A，这个人有一个名为“ID”的属性。我还有一个personcountry对象的集合B，personcountry对象有一个属性personId。

现在我想选择集合 A 中的所有人员，集合 B 中有一个带有其 personId 的对象。

所以有了这个数据

```
person (collection A List[Person]) 
person id  name
    1      John
    2      John
    3      John2
    4      Pete
    5      Bill
    6      Samantha 
```

和这个集合 B (List[Country])

```
country id  personid
1             1
1             3
2             5 
```

我想要集合 A 中 id 为 1,3 和 5 的人员记录。

我确实设法使用 intersect 方法使用 2 个整数集合来做到这一点，但是在使用这两个对象集合时我被卡住了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T13:26:35.943

```
 var q = Persons.Where(p => Countries.Any(c => p.Id== c.PersonId)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T13:27:07.693

我会加入

```
var query = (from p in persons
            join pc in personcountry on p.Id equals pc.PersonId
            select p).AsEnumerable(); 
```

# iphone - UIimageView 圆顶角 BezierPath 不起作用？

> ID：12197894
> 
> 赞同：0
> 
> 时间：2012-08-30T13:23:28.923
> 
> 标签：iphone, objective-c, ios, quartz-graphics

我正在尝试将 uiimageview 的顶部两个角变圆，但以下代码仅显示普通图像的圆角。我错过了什么吗？谢谢

```
 UIImageView * imgView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 320, 328)];
imgView.backgroundColor = [UIColor clearColor];
imgView.contentMode = UIViewContentModeScaleAspectFill;
imgView.image = image;
CAShapeLayer * shapeLayer = [CAShapeLayer layer];

shapeLayer.path = [UIBezierPath bezierPathWithRoundedRect:CGRectMake(0, 0, 320, 328) byRoundingCorners:2 cornerRadii:CGSizeMake(20.0, 20.0)].CGPath;

    shapeLayer.frame = CGRectMake(0, 0, 320, 328);

    self.profilePictureView.layer.mask = shapeLayer.mask;

    self.profilePictureView.layer.masksToBounds = YES;
    [cell.contentView addSubview:self.profilePictureView];
    cell.contentView.backgroundColor = [UIColor clearColor]; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T14:39:00.140

这对我有用

```
- (void)viewDidLoad
    {
[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.

//Just to add contrast
[self.view setBackgroundColor:[UIColor blackColor]];

UIImage * image = [UIImage imageNamed:@"logo3w.png"];
UIImageView * imgView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 320, 328)];
imgView.contentMode = UIViewContentModeScaleAspectFill;
imgView.image = image;
// Add the imageView to your view heirarchy, UITableViewCell or otherwise
[self.view addSubview:imgView];

CAShapeLayer * shapeLayer = [CAShapeLayer layer];
//Setting the background color of the masking shape layer to clear color is key
//otherwise it would mask everything 
shapeLayer.backgroundColor = [UIColor clearColor].CGColor;
    shapeLayer.path = [UIBezierPath bezierPathWithRoundedRect:imgView.bounds byRoundingCorners: UIRectCornerTopLeft | UIRectCornerTopRight cornerRadii:CGSizeMake(20.0, 20.0)].CGPath;

imgView.layer.masksToBounds = YES;
imgView.layer.mask = shapeLayer;
//Be sure to set the frame of the maskingLayer to be the bounds of the layer you want to   mask
shapeLayer.frame = imgView.layer.bounds;

//    self.profilePictureView had never been assigned imgView what we want to mask
//    self.profilePictureView.layer.mask = shapeLayer.mask;
//    self.profilePictureView.layer.masksToBounds = YES;

//    [cell.contentView addSubview:self.profilePictureView];
//    cell.contentView.backgroundColor = [UIColor clearColor];
} 
```

让我知道它是否有效或您有更多问题！

# jsf - 在扩展现有 JSF 组件的复合组件中继承组件属性

> ID：12197906
> 
> 赞同：4
> 
> 时间：2012-08-30T13:23:48.567
> 
> 标签：jsf, attributes, composite-component

我希望扩展以下元素：

```
<h:commandButton action="#{menuController.xyz}" value="xyz" 
     image="images/buttons/xyz.png" alt="xyz".....[more attributes]..../> 
```

包括产生按下按钮的代码：

```
<h:commandButton action="#{menuController.xyz}" value="xyz" 
     image="images/buttons/xyz.png" alt="xyz" 
     onmousedown="[some JS here to change image src]"
     .....[more attributes]..../> 
```

我知道最简洁的方法是使用 JSF 组件？所以我创建了以下内容：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:composite="http://java.sun.com/jsf/composite">
    <head>
        <title>Not present in rendered output</title>
    </head>
    <body>
        <composite:interface>
            <composite:attribute name="depressImage" required="false" />
        </composite:interface>

        <composite:implementation>
            <h:commandButton onmousedown="[some JS here to change the img src to the value of #{cc.attrs.depressImage}]" />
        </composite:implementation>
    </body>
</html> 
```

我的问题是，无需输入**所有**可能的属性并映射 EL，有没有办法自动填充它们（例如命令按钮操作和值等）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T14:02:13.570

不幸的是，没有一种巧妙的方法可以以这种方式自动继承它们。你真的必须重新定义它们。对于真正的自定义组件，顺便说一句，您还必须对`.taglib.xml`文件执行相同的操作，因此这不仅是复合组件中的问题，而且在真正的自定义组件中也是如此。标签属性不支持任何形式的继承。

考虑只重新定义您现在绝对需要的那些，并仅按需添加新的。

# html - margin-top to straight bottom of two elements

> ID：12197908
> 
> 赞同：-1
> 
> 时间：2012-08-30T13:23:55.100
> 
> 标签：html, css

In the following simple CSS code, I’m trying to straight the bottom of `h1` with the bottom of `p` (`h1` shouldn’t be under `p` like in my code).

```
<div id="sqrs" style="width:200px; height:200px; border:1px solid BLACK;">
<p style="width:100px; height:100px; background-color:BLUE; float:right;">blue</p>
<h1 style="background-color:YELLOW; margin-top:100px;">yellow</h1>
</div> 
```

`P` style cannot be changed and I don’t know the `height` of `h1` (since it can be `h2`, `h3`…)

I’ve tried `margin-top:100%` (instead `margin-top:100px`) but this is not the solution as well.

Thanks,

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T14:01:17.470

See [http://jsfiddle.net/3sWEt/1/](http://jsfiddle.net/3sWEt/1/)

```
#sqrs{
    width:200px; height:200px; border:1px solid black;
    line-height:100px;
    text-align:right;
}
#sqrs>*{
    text-align:left;
    line-height:normal;
}
#sqrs>p{
    width:100px; height:100px; background-color:blue; float:right;
}
#sqrs>h1{
    background-color:yellow;
    display:inline-block;
    vertical-align:bottom;
} 
```

You can use same `line-height`, `display:inline-block` and `vertical-align:bottom`.

But the problem is that the `<h1>` doesn't expand it's width to cover it's parent's remaining width.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T14:13:51.427

See [http://jsfiddle.net/3sWEt/3/](http://jsfiddle.net/3sWEt/3/)

You can set `position:relative` to a container and `position:absolute` with `bottom:0` to the `<h1>`:

CSS:

```
#sqrs{
    width:200px; height:200px; border:1px solid black;
    overflow:hidden;
}
#sqrs>*{
    height:100px;
}
#sqrs>p{
    width:100px; background-color:blue; float:right;
}
#sqrs>div{
    overflow:hidden;
    position:relative;
}
#sqrs>div>h1{
    background-color:yellow;
    position:absolute;
    bottom:0;
    width:100%;
} 
```

HTML:

```
<div id="sqrs">
    <p>blue</p>
    <div><h1>yellow</h1></div>
</div> 
```

# validation - 当“unsignedInt”字段为零时，KML 不验证

> ID：12197909
> 
> 赞同：0
> 
> 时间：2012-08-30T13:23:59.177
> 
> 标签：validation, schema, kml, zero

考虑这个简单的 KML 示例，它通过`<ExtendedData>`和`<Schema>`元素合并了类型化的自定义数据：

```
<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <Document>
    <name>KML does not validate when an 'unsignedInt' field is zero</name>
    <ExtendedData>
      <SchemaData schemaUrl="#DocumentSchemaId">
        <SimpleData name="UNSIGNED_INT">0</SimpleData>
      </SchemaData>
    </ExtendedData>
    <Schema id="DocumentSchemaId" name="doc">
      <SimpleField name="UNSIGNED_INT" type="xsd:unsignedInt">
        <displayName>Unsigned Int</displayName>
      </SimpleField>
    </Schema>
  </Document>
</kml> 
```

在这种情况下，只`kml:SimpleData`定义了一个字段。它的名称是`UNSIGNED_INT`，分配的类型是`xsd:unsignedInt`。

***问题是这个文档没有***通过这个有信誉[的KML 验证器进行验证](http://www.kmlvalidator.com/ "KML 验证器")。验证器返回的错误是：

```
"kml:SchemaData contains a kml:SimpleData value that does not
correspond to the declared type." 
```

验证器指示此错误的原因是因为感兴趣的字段已被分配一个值`0`：

```
<SimpleData name="UNSIGNED_INT">0</SimpleData> 
```

但是，当值更改为非零无符号整数时，文档*会*验证（如预期的那样）：

```
<SimpleData name="UNSIGNED_INT">42</SimpleData> 
```

***我的问题是***，为什么这个验证器标记`0`为不符合`xsd:unsignedInt`类型的约束？

KML 验证器的处理方式`0`与[XML 模式标准](http://www.w3.org/TR/xmlschema-2/#unsignedInt)必须说明的内容相冲突：`xsd:unsignedInt``xsd:unsignedInt`

> **unsignedInt**具有由十进制数字的有限长度序列 (#x30-#x39) 组成的词法表示。例如：**0、1267896754、100000**。

最后，作为参考，这里列出了所有定义用于 的数据类型`kml:SimpleField`：

*   xsd：字符串
*   xsd:int
*   xsd:unsignedInt
*   xsd：短
*   xsd:unsignedShort
*   xsd：浮动
*   xsd：双
*   xsd：布尔值

（来自[KML 验证器文档](http://service.kmlvalidator.com/ets/ogc-kml/2.2/#Schema-SimpleField)和[OGC KML 2.2 标准，子条款 9.9.4.2.1](http://portal.opengeospatial.org/files/?artifact_id=27810)。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T19:00:47.313

这似乎是 kmlvalidator 的一个错误，我会向他们报告。我使用 Oxygen XML Editor 测试了正常的模式验证，并得到了验证。

# php - 使用 Symfony Validation 组件来验证具有动态属性的对象

> ID：12197912
> 
> 赞同：3
> 
> 时间：2012-08-30T13:24:10.937
> 
> 标签：php, validation, symfony, symfony-2.1

我正在尝试使用外部 yml 规则集（不在 Symfony 项目中）使用 Symfony2 的验证组件（从 2.1 分支开始）验证导入的 csv 文件中的数据：

```
use Symfony\Component\Validator\Validation;

$builder = Validation::createValidatorBuilder();
$builder->addYamlMapping('rules.yml');

$validator = $builder->getValidator();

$row = (object)array('name' => 'foo');

$violations = $validator->validate($row); 
```

这是我的 yml 文件：

```
stdClass:
  properties:
    name:
      - MinLength: 10 
```

现在出现的问题是，Validator 组件似乎无法验证具有动态属性的对象（如`stdClass`或任何其他具有魔术 getter 和 setter 的类）。

当我运行该代码时，我收到一条消息：

```
[Symfony\Component\Validator\Exception\ValidatorException]
Property forename does not exist in class stdClass 
```

这是由于突出显示的行中的[PropertyMetaclass.php](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Validator/Mapping/PropertyMetadata.php#L26)使用`property_exists()`它检查存在显然不起作用，因为它检查的是类而不是对象。

有谁知道如何让验证器处理具有动态属性的对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T11:10:29.050

不幸的是，目前无法根据[官方声明](https://groups.google.com/d/msg/symfony2/RVxWhs8qcg0/8eVqKbDgr6AJ)验证具有动态属性的对象，因此我打开了一个[功能请求](https://github.com/symfony/symfony/issues/5420)。

我现在的解决方法是编写一个非常简单的代码生成器类，将类定义转储到磁盘上的文件中，然后将其用作数据的类文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T15:04:35.820

object 不是 PHP 类型。

在您的 yaml 文件中使用 stdClass 而不是对象

见[http://php.net/manual/en/language.types.object.php](http://php.net/manual/en/language.types.object.php)

# yii - Yii CGridView 动态数据提供者

> ID：12197918
> 
> 赞同：1
> 
> 时间：2012-08-30T13:24:28.957
> 
> 标签：yii

有没有办法使用自定义“dataProvider”选项重新渲染包含 CGridView 的视图？例如我有这样的视图文件

```
<?php $this->widget('bootstrap.widgets.BootGridView',array(
    'id'=>'operations-grid',
    'type'=>'striped bordered',
    'dataProvider'=>$model->search(),       
    'columns'=>array(
        array('name'=>'operationType','value'=>'$data->operationType->name'),
        array(
            'name'=>'creation_date','type'=>'datetime'
        ),
        'ammount_usd:raw:Ammount',
        'comment:text:Comment',
        array(
            'name'=>'currency',
            'value'=>'$data->currency->short',
        ),
        array(
            'name'=>'client',
            'value'=>'$data->client->fio'
        ),
        array(
            'name'=>'organization',
            'value'=>'$data->organization->name'
        ),

        array(
            'class'=>'bootstrap.widgets.BootButtonColumn',
            'header'=>'Action'
        ),
    ),
)); ?> 
```

作为提供者，我有`$model->search()`，但我希望例如，如果一个按钮按下此视图以通过 ajax 重新呈现不同的`dataProvider`. 有没有办法做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T18:22:34.177

您可以通过多种方式做到这一点。其中，您可以让控制器通过 $dataProvider 提供视图，如下所示：

```
$this->widget('bootstrap.widgets.BootGridView',array(
'id'=>'operations-grid',
'type'=>'striped bordered',
'dataProvider'=>$dataProvider, 
```

控制器可以根据到达该请求的参数实例化所需的数据提供者。然后视图只是将这个数据提供者传递给 CGridView，完全忘记了它的精确类型。

如前所述，您可以扩展 CDataProvider（与 CActiveDataProvider 扩展相同的类）以完全自定义它，只要它提供所需的 API。查看它的[文档](http://www.yiiframework.com/doc/api/1.1/CDataProvider)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T15:05:39.493

数据提供者的重点是根据某些输入为您提供某个模型的适当数据。Search() 做得很好，因为您只需要使用要搜索的适当属性来实例化模型类，并且数据提供者将为您提供与该条件匹配的所有数据。

如果你想改变 dataprovider 的输出，你可以使用修改后的 search() 函数来扩展你的模型类。如果您试图将一个完全不同的模型传递给您的数据提供者，我会为它设置一个不同的视图，因为无论如何它都会有不同的列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-21T21:02:10.543

这个关于动态[CGridView](http://www.yiiframework.com/wiki/323/dynamic-parent-and-child-cgridview-on-single-view-using-ajax-to-update-child-gridview-via-controller-after-row-in-parent-gridview-was-clicked)的 wiki应该会给你很多想法。

# python - 为什么递归改变结果？

> ID：12197923
> 
> 赞同：1
> 
> 时间：2012-08-30T13:24:42.060
> 
> 标签：python, tail-recursion, doctest

我正在检查[doctest](http://docs.python.org/library/doctest.html)并将阶乘示例复制到我的编辑器。因为使用递归感觉更像函数式编程，所以我想像这样更改示例；

```
def factorial(n):
    # ... omitted
    if n+1 == n:  # catch a value like 1e300
        raise OverflowError("n too large")

    if n == 0:
        return 1
    else:
        return factorial(n  - 1) * n 
```

在此更改之后，其中一项测试失败了；

```
Failed example:
    factorial(30.0)
Expected:
    265252859812191058636308480000000L
Got:
    2.6525285981219103e+32 
```

这种差异的原因是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T13:26:50.270

尝试使用`factorial(30)`而不是运行`factorial(30.0)`。浮点加法与整数加法不完全一样，所以你会在一段时间后开始看到错误。

考虑：

```
>>> 1e20 + 1 == 1e20 #True 
```

这是因为您没有足够的*精度*（位）来唯一地存储这两个数字。（典型的 python 浮点数有 64 位，这意味着您有 2**64 个独特的组合——在`1.84e19`选项附近。但是，python 浮点数的最大大小`sys.float_info.max`大约`1.8e308`在大多数系统上，因此无法存储每个整数值独一无二——尤其是当您认为浮点数可以容纳的不仅仅是整数值时）

就个人而言，我只是将 n 的值转换为您的阶乘函数内的整数，因为阶乘仅针对整数定义——可能会检查以确保`abs(int(n) - n) < 1e-5`达到该效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T13:26:42.133

您输入的数字是浮点数。由于您没有将其转换为 int，因此您将在输出中得到一个浮点数。

# android - 通过 adb 获取蓝牙 MAC 地址

> ID：12197925
> 
> 赞同：15
> 
> 时间：2012-08-30T13:24:48.300
> 
> 标签：android, bluetooth, adb, mac-address

请帮我找回通过 USB 端口连接的 Galaxy S3 手机的*蓝牙 MAC 地址*。我的设备已植根。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-10T17:00:38.070

运行`netcfg`将显示系统上的所有接口及其 MAC 地址。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2016-10-09T07:35:42.640

`adb shell cat /sys/class/net/wlan0/address`

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2017-05-15T07:36:30.033

我通常会按照以下简单步骤获取Android设备（*通过USB端口连接到我的PC* ）的WiFi接口的**mac地址：**

 *### 1\. 使用以下命令查找设备名称：

```
adb devices 
```

结果通常如下所示：

> ```
> List of devices attached 
> 4e7354af  device
> 1f97033e  device 
> ```

在这种情况下，我们连接了两个设备`4e7354af`，并且`1f97033e`. 让我们处理第一个：`4e7354af`

### 2.获取第一台设备的**mac地址：**

```
adb -s 4e7354af shell "ip addr show wlan0  | grep 'link/ether '| cut -d' ' -f6" 
```

结果将如下所示：

> ```
> 8e:5a:e7:c2:01:9b 
> ```

在上一行中，我们使用命令的`-s`选项`adb`来指定序列号。然后我们调用`shell`命令来表示我们将运行一个**Linux**命令。最后，我们运行命令：`ip addr show wlan0 | grep 'link/ether '| cut -d' ' -f6`这个命令也可以在 Linux 中使用，如果它的接口与`wlan0`.

我通常使用这种方法，因为我有很多设备连接到我的测试环境。祝大家好运。

**注意：**如果你运行这样的命令，`cat /sys/class/net/wlan0/address`你会得到一个错误，比如`cat: /sys/class/net/wlan0/address: Permission denied`由于 Android 的安全策略。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-30T13:39:08.480

蓝牙MAC地址不是在设置中的每部Android手机上都可用吗？

目前我附近有 2 台设备：

在三星 Galaxy S2 上 - 设置 > 关于手机 > 状态

在 HTC Desire - 设置 > 关于手机 > 硬件信息

（必须开启蓝牙）*

# c# - UPS GetRate() 运输服务器错误日志

> ID：12197928
> 
> 赞同：0
> 
> 时间：2012-08-30T13:24:52.057
> 
> 标签：c#, .net, runtime-error, shipping, ups

有人可以帮助将此错误分解为简单的英语吗？我在我们的服务器应用程序日志中看到以下错误，但不确定错误发生在哪里。它所指的库是 .NET Shipping 库[http://dotnetshipping.codeplex.com/releases/view/5241](http://dotnetshipping.codeplex.com/releases/view/5241)。

```
事件类型：错误

事件源：.NET 运行时

描述：
应用程序：w3wp.exe 框架版本：v4.0.30319

说明：进程因未处理的异常而终止。

异常信息：
System.Net.WebException
堆：
在 System.Net.HttpWebRequest.GetResponse()
在 dotNETShipping.ShippingProviders.UPSProvider.GetRates()
在 System.Threading.ExecutionContext.runTryCode(System.Object)
在 System.Runtime.CompilerServices.RuntimeHelpers.ExecuteCodeWithGuaranteedCleanup（TryCode、CleanupCode、System.Object）
在 System.Threading.ExecutionContext.Run（System.Threading.ExecutionContext，System.Threading.ContextCallback，System.Object，布尔）
在 System.Threading.ExecutionContext.Run（System.Threading.ExecutionContext，System.Threading.ContextCallback，System.Object）
在 System.Threading.ThreadHelper.ThreadStart()
有关详细信息，请参阅 http://go.microsoft.com/fwlink/events.asp 上的帮助和支持中心。

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:53:47.650

`The process was terminated due to an unhandled exception.`意味着您触发了一个未被 try/catch 语句捕获的错误。从事件来看，它是在您的 HttpWebRequest 对象中发生的。

尝试将您的语句包装在 try/catch 中，特别是捕获 WebExeception。

IE

```
try
{
    ...
} 
catch (WebException wex)
{
    //add logging statements here. 
}
catch(Exception ex)
{
   //add more logging here 
} 
```

我建议最初倾倒所有关于 Web 异常的信息，然后根据返回的信息纠正问题并将日志记录减少到适当的级别以进行部署。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T15:24:37.073

您正在开发 .Net Shipping Library 吗？上面的异常堆栈跟踪显示异常发生在 dotNETShipping.ShippingProviders.UPSProvider.GetRates() 方法中。如果您只是将库用作第三方库，则需要向库的维护人员报告错误。

# sql - Sql 按两个字段分组

> ID：12197930
> 
> 赞同：1
> 
> 时间：2012-08-30T13:24:57.707
> 
> 标签：sql, pivot

我有两张桌子`Customers`和`CustomerStatusEntries`：

```
CustomerStatusEntries
---------------------------
Id | Branch | CustomerStatus_Value | Customer_Id

CustomerStatus_Value  = ("B" = "Block" , "E" = "Created" etc...) 
```

我需要得到这个输出

![在此处输入图像描述](../Images/f50d035745087833c04853a23ab6e7b9.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T13:31:48.637

```
SELECT Branch AS 'Branch Code',
    SUM(CASE WHEN CustomerStatus_Value = 'E' THEN 1 ELSE 0 END) AS 'Created',
    SUM(CASE WHEN CustomerStatus_Value = 'A' THEN 1 ELSE 0 END) AS 'Active',
    SUM(CASE WHEN CustomerStatus_Value = 'B' THEN 1 ELSE 0 END) AS 'Blocked',
    SUM(CASE WHEN CustomerStatus_Value = 'C' THEN 1 ELSE 0 END) AS 'Cancelled',
    COUNT(CustomerStatus_Value) AS 'All'
FROM CustomerStatusEntries
GROUP BY Id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T13:32:33.270

假设您在示例中显示的列数固定，您可以这样做：

```
SELECT Branch, 
       SUM(CASE WHEN CustomerStatus_Value = 'E' THEN 1 ELSE 0 END) AS Created,
       SUM(CASE WHEN CustomerStatus_Value = 'A' THEN 1 ELSE 0 END) AS Active,
       SUM(CASE WHEN CustomerStatus_Value = 'B' THEN 1 ELSE 0 END) AS Blocked,
       SUM(CASE WHEN CustomerStatus_Value = 'C' THEN 1 ELSE 0 END) AS Cancelled,
       COUNT(*) AS All
    FROM CustomerStatusEntries
    GROUP BY Branch; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T13:32:46.090

您可以使用标准 SQL 执行此操作：

```
select branch_code,
       sum(case when CustomerStatus_Value = 'E' then 1 else 0 end) as Created,
       sum(case when CustomerStatus_Value = 'B' then 1 else 0 end) as Blocked,
       ...
from t
group by branch_code
order by 1 
```

# ruby-on-rails - 无法加载存储模块“数据库”

> ID：12197932
> 
> 赞同：0
> 
> 时间：2012-08-30T13:25:12.060
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我尝试使用回形针将图像存储在数据库中，但它显示错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:49:12.553

回形针的数据库中没有存储，[请参阅 doc](https://github.com/thoughtbot/paperclip#storage)。

# objective-c - 越狱设备中的 InAppPurchase

> ID：12197934
> 
> 赞同：0
> 
> 时间：2012-08-30T13:25:13.790
> 
> 标签：objective-c, in-app-purchase, itunes, sandbox, jailbreak

我们可以从越狱设备上测试 InAppPurchase（沙盒测试）吗？iTunes 更新和 InAppPurchase 测试之间有什么联系吗？（意味着如果我们有旧版本的 iTunes，我们不能测试 InAppPurchase 沙盒测试。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T14:15:43.243

不用担心......它也适用于越狱，只需要从该设备中删除 Appsync

# vb.net - 对象引用未设置为对象 vb.net 的实例

> ID：12197941
> 
> 赞同：-1
> 
> 时间：2012-08-30T13:25:36.273
> 
> 标签：vb.net, winforms, properties, reference

我要做的就是从 vb.net Forms 中的父表单访问我的属性。但它不会让我这样做

```
 Dim formParent1 As formParent

 Private Sub search()
 formParent1.propertyName = 1
 End Sub 
```

但它在 formParent1.propertyname = 1 处给出错误。说“对象引用未设置为对象的实例”。

但我可能不会使用

```
Dim formParent1 as formParent = new formParent() 
```

我怎样才能访问这个属性，我是 VB.net 的新手最好的问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T13:33:56.187

如果我理解正确，该代码位于 formParent 的子表单中。要使用对当前 formParent 的引用，您需要在子窗体中传递对当前 formParent 的引用。

所以在 formParent 中，当你开始执行子表单时，这样写：

```
Dim f as formChild = new formChild(Me)
f.ShowDialog() 
```

在表单子构造函数中保存传递的对全局变量 formParent1 的引用

```
Dim formParent1 as formParent ' this is the global level reference to the parentForm'

Public Sub formChild(ByVal f as formParent)
       formParent1 = f
End Sub 
```

现在您可以在子表单中使用引用 formParent1 而无需初始化另一个 formParent 例如，假设 formParent1 包含一个名为 的公共属性`SearchResult`，当您完成搜索时，您调用：

```
Private Sub searchBtn_Click(sender As Object, e As System.EventArgs) Handles SearchButton.Click
     Dim searchResult as String

     ' Here write the code that executes the search and set the value in searchResult variable

     ' Pass the searchResult variable to the parent form via the global reference.
     formParent1.SearchResult = searchResult
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T13:31:19.950

您只需要在全局变量中保留对表单实例的引用。

创建一个模块 - 在里面放：

```
Private _globalParentForm as parentForm = Nothing

Public ReadOnly Property GlobalParentForm as parentForm
    Get
        If _globalParentForm Is Nothing Then _globalParentForm = New parentForm
        Return _globalParentForm        
    End Get
End Property 
```

然后您可以在搜索表单中访问父表单引用：

```
GlobalParentForm.SearchProperty = searchText 
```

# php - 为什么我的站点总是使用 ErrorController 来处理所有类型的错误，而不管 HTTP 状态代码如何？

> ID：12197946
> 
> 赞同：0
> 
> 时间：2012-08-30T13:25:55.943
> 
> 标签：php, zend-framework

多年来，我们一直在运行 Zend Framework 电子商务网站。它没有 100% 使用 MVC 结构，但我们尝试将其推进到“更好”的编码结构，因为我们在网站上执行新的升级等等。最近，我们也对网站进行了一些重大更改。由于有多个开发人员，这个问题有点难以跟踪，但我写在这里是为了获得任何帮助或建议。

在我们之前的站点上，我们的 ErrorController 用于在出现问题时简单地执行 301 重定向到“pagenotfound”页面，包括 404。这在我们的新站点上继续。我们意识到这不是网站应该做的，所以我们试图改变它——即当我们在 404 时使用正确的 404 代码，等等。刚刚在我们的测试站点上更新 ErrorController 时，我意识到我们站点上的每个操作都以某种方式运行 ErrorController。我怎么知道这个？因为我目前的测试站点ErrorController如下：

```
<?php 
/** @see Zend_Controller_Action */ 
require_once 'Zend/Controller/Action.php'; 

class ErrorController extends Zend_Controller_Action
{  
public function errorAction()
{
    $errors = $this->_getParam('error_handler');

    switch ($errors->type) {
        case Zend_Controller_Plugin_ErrorHandler::EXCEPTION_NO_CONTROLLER:
            case Zend_Controller_Plugin_ErrorHandler::EXCEPTION_NO_ACTION:
                // 404 error -- controller or action not found
                $this->getResponse()->setHttpResponseCode(404);
                $this->view->message = 'Page not found';
                break;
            default:
                // application error
                $this->getResponse()->setHttpResponseCode(500);
                $e = $this->_getParam('error_handler');
                $this->view->message = $e['exception']->getMessage();
                break;
    }
    $this->view->exception = $errors->exception;
    $this->view->request   = $errors->request;
}
} 
```

上面的代码现在在我的测试站点上很好，但是当我转到任何工作页面（查看 Firebug 上的 NET 选项卡）时，我看到的是“500”服务器错误状态代码。这令人惊讶，因为对于工作页面，它甚至不应该加载 ErrorController 对吗？然而，状态代码 500（来自上面的默认开关情况）被发送通过。

我们的站点也使用 IndexController，并且没有其他控制器 - 我们所有的操作都在 IndexController 中。我们有一个特殊的 PagesAction 如下：

```
public function pagesAction() 
{
    $this->view->placeholder('errors')->captureStart();
    //proceed as normal
    if ($this->checkSiteCode()) { //this will be false if we are not on the correct site code (ignore this)
        $this->view->this_includefile = "pages/view";
        $this->getControllerIncludeFile($this->view->this_includefile); //include some special include file for our work
    }
    $this->view->placeholder('errors')->captureEnd();
} 
```

以上是我们引导程序的默认操作，例如，如果您访问 www.mydomain.com/stores/，则将调用上述 pagesAction() 以检查我们的数据库 (CMS) 中是否存在“商店”并适当地加载内容. 内容加载正常，但错误 500 仍然存在（在测试站点上）。因此我的问题是：

1.  以前在旧站点（我们仍然可以通过另一个测试域访问）上，不会发生此问题。因此，某些东西——我们的引导配置或另一个核心文件的一些变化——导致我们的新站点上发生了这种情况。这对我们来说是一个新问题，我只是想找出在哪里寻找。有任何想法吗？但是，我在引导程序中没有看到对“errorcontroller”的任何引用。使用上面的错误占位符是因为我们正在使用一个布局（新站点的新布局），它出于某种原因隐藏了我们想要查看的任何 PHP 控制器错误。因此，我们将其存储在“错误”占位符中，以便从我们的视图中打印。这是一个单独的点，但可能值得注意，因为我们没有在旧网站上这样做。我们现在正在比较的新旧站点之间也有一些引导变化。

2.  我们在这里的主要目标是更新 pagesAction 以在我们的数据库中找不到特定 URL 时抛出 404（并且不重定向到另一个 CMS 管理页面的“pagenotfound”，即 www.mydomain.com/pagenotfound/ 是正常的页）。基本上我在问如何对其进行编码，以便在 pagesAction 意识到特定 URL 不存在时实际调用错误控制器？一旦上面的问题 1 得到解决，我就需要解决这个问题，以便 ErrorController 只能在必要时加载。

**更新**

我们刚刚发现 bootstrap.php 中的以下代码，在删除后不再加载 ErrorController 和 501 错误。

```
$acl = new Zend_Acl();
$registry = Zend_Registry::getInstance();
$registry->set('acl', $acl);  // store whole ACL definition to registry for use in AuthPlugin plugin 
```

然而，上面完全禁用了 $registry，所以我仍在寻找实际导致问题的行，因为有更多的代码可以访问 $registry。我会不断更新这篇文章，但是对于上述问题 1 和 2 的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T07:01:14.217

你说的对。挫败感也是如此（我知道那种感觉，兄弟！）

[无论如何，您可以使用Zend_Http](http://framework.zend.com/manual/en/zend.http.response.html) *定义应该去哪里的错误类型

正如你所看到的，我已经调整了进入我的 ErrorController 的方式来“设置”HTTP 状态代码，它也会改变页面的“标题”信息。例如，在第一次调整中。我正在检查 Routes/Controllers/Actions 如果没有找到然后设置 404 ，记录事件并渲染脚本！

```
class ErrorController extends Zend_Controller_Action {

  public function errorAction() {
    $errors = $this->_getParam('error_handler');

    if (!$errors || !$errors instanceof ArrayObject) {
      $this->view->message = 'You have reached the error page';
      return;
    }

    switch ($errors->type) {
      case Zend_Controller_Plugin_ErrorHandler::EXCEPTION_NO_ROUTE:
      case Zend_Controller_Plugin_ErrorHandler::EXCEPTION_NO_CONTROLLER:
      case Zend_Controller_Plugin_ErrorHandler::EXCEPTION_NO_ACTION:
        // 404 error -- controller or action not found
        $this->getResponse()->setHttpResponseCode(404);
        $priority = Zend_Log::NOTICE;
        $this->view->error_code = $this->getResponse()->getHttpResponseCode();
        $this->view->message = "Page Not Found";
        $this->renderScript('error/error_404.phtml');
        break;
      default:
        // application error
        print_r($this->getResponse());
        $this->getResponse()->setHttpResponseCode(500);
        $priority = Zend_Log::CRIT;
        $this->view->error_code = $this->getResponse()->getHttpResponseCode();
        $this->view->message = 'Application error';
        if ($log = $this->getLog()) {
        $log->log($this->view->message, $priority, $errors->exception);
        $log->log('Request Parameters', $priority, $errors->request->getParams());
        $this->renderScript('error/error_500.phtml');
        }

    // conditionally display exceptions
        if ($this->getInvokeArg('displayExceptions') == true) {
                $this->view->exception = $errors->exception;
        }

        $this->view->request = $errors->request;
        $this->view->error_code = $this->getResponse()->getHttpResponseCode();
        $this->renderScript('error/error_500.phtml');
        break;
    }

    // Log exception, if logger available
    if ($log = $this->getLog()) {
      $log->log($this->view->message, $priority, $errors->exception);
      $log->log('Request Parameters', $priority, $errors->request->getParams());
    }

    // conditionally display exceptions
    if ($this->getInvokeArg('displayExceptions') == true) {
      $this->view->exception = $errors->exception;
    }

    $this->view->request = $errors->request;
  }

  public function getLog() {
    $bootstrap = $this->getInvokeArg('bootstrap');
    if (!$bootstrap->hasResource('Log')) {
      return false;
    }
    $log = $bootstrap->getResource('Log');
    return $log;
  }

} 
```

用它 ：） ：）

享受生活！

快乐编码！:)

# image - 图像中的文本定位有什么好的算法吗？

> ID：12197947
> 
> 赞同：5
> 
> 时间：2012-08-30T13:25:56.740
> 
> 标签：image, algorithm, image-processing, text, localization

我想问你是否知道任何可以检测图像中候选文本的优秀文本本地化算法（用于我的 OCR 项目）

本质上，在“应用”这个算法之后，我希望能够获得带有候选字符的区域（边界框），例如

![在此处输入图像描述](../Images/06dc72f4feebccacfc17d91ae1a60030.png)

我正在尝试找到一些我可能会使用的东西，但即使我找到了一些东西，它也很可能是在一篇极其困难的论文中，需要应用非常高的数学知识。我已经遇到过 MSER（[Maximally Stable Extremal Regions](http://en.wikipedia.org/wiki/Maximally_stable_extremal_regions)）或梯度向量流方法，但它们对我来说都非常困难（虽然我在数学方面了解很多，但我仍然很难弄清楚这些）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T14:07:04.150

这些可能会给你一些指示：

1.  [检测图像上是否存在文本的算法](https://stackoverflow.com/questions/4606274/algorithm-to-detect-presence-of-text-on-image)
2.  [https://stackoverflow.com/questions/850717/what-are-some-popular-ocr-algorithms?rq=1](https://stackoverflow.com/questions/850717/what-are-some-popular-ocr-algorithms?rq=1)
3.  [车牌检测有哪些好的算法？](https://stackoverflow.com/questions/4707607/what-are-good-algorithms-for-vehicle-license-plate-detection?lq=1)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-30T18:43:35.370

您可以使用Opencv3.0“场景文本检测”功能。它基于“用于场景文本检测的类特定极值区域”。它也有示例代码。

*您可以在以下位置找到它们：*

[1] [http://docs.opencv.org/3.0-beta/modules/text/doc/erfilter.html](http://docs.opencv.org/3.0-beta/modules/text/doc/erfilter.html)

[2] [https://github.com/Itseez/opencv_contrib/blob/master/modules/text/samples/textdetection.cpp](https://github.com/Itseez/opencv_contrib/blob/master/modules/text/samples/textdetection.cpp)

**文件：**

[Neumann12] Neumann L., Matas J.: Real-Time Scene Text Localization and Recognition, CVPR 2012。该论文可在线获取[http://cmp.felk.cvut.cz/~neumalu1/neumann-cvpr2012.pdf](http://cmp.felk.cvut.cz/~neumalu1/neumann-cvpr2012.pdf)

[Neumann11] Neumann L., Matas J.: Text Localization in Real-world Images using Efficiently Pruned Exhaustive Search, ICDAR 2011。该论文可在[http://cmp.felk.cvut.cz/~neumalu1/icdar2011_article 在线获取。 pdf](http://cmp.felk.cvut.cz/~neumalu1/icdar2011_article.pdf)

[Gomez13] Gomez L. 和 Karatzas D.: Multi-script Text Extraction from Natural Scenes, ICDAR 2013。该论文可在线获取[http://158.109.8.37/files/GoK2013.pdf](http://158.109.8.37/files/GoK2013.pdf)

[Gomez14] Gomez L. 和 Karatzas D.：多脚本和任意方向场景文本提取的快速分层方法，arXiv:1407.7504 [cs.CV]。该论文可在[http://arxiv.org/abs/1407.7504在线获取](http://arxiv.org/abs/1407.7504)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T09:34:05.423

我不知道任何简单或简单的算法可以做到这一点。但是，我们正在使用名为 Leadtools 的第三方工具包来执行类似的行为。我知道它可以自动找到文本区域并识别它们。有关更多信息，您可以查看包含代码片段的此帮助主题：

[自动区](http://www.leadtools.com/help/leadtools/v175/dh/fo/leadtools.forms.ocr~leadtools.forms.ocr.iocrpage~autozone%28ocrprogresscallback%29.html)

此外，您可以在 OCR 之前对图像进行一些图像处理，因为图像中的颜色会降低 OCR 识别过程的准确性和性能。

# javascript - Jquery按类重复输入字段

> ID：12197950
> 
> 赞同：0
> 
> 时间：2012-08-30T13:26:08.410
> 
> 标签：javascript, ajax, forms, jquery

不太清楚如何安排这个问题。

基本上，我有一个页面，其中包含 4 个表单，全部位于单独的选项卡中（每个部门 3 个，所有表单都打开的管理概述），我想做的是，一旦在 3 个部门表单之一重复输入发生更改，输入到管理表单中的同一字段。

我目前使用的是以下

```
jQuery(".volume").keyup(function(){
        var volume = jQuery(".volume").val();
        jQuery('.volume').val(volume);
        }); 
```

这本身工作得很好，但我想要的是能够有一个像这样的小功能，自动适用于任何输入、文本区域和选择。

谁能建议我如何将这样的东西放在一起？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T13:34:06.437

尝试

```
jQuery("input").keyup(function() {
    var volume = jQuery(this).val();
    jQuery("input[name=" + jQuery(this).attr("name") + "]").val(volume);
}); 
```

# css - 两列等高

> ID：12197954
> 
> 赞同：1
> 
> 时间：2012-08-30T13:26:30.683
> 
> 标签：css, css-float, two-column-layout, equal-heights

使用此标记：

```
<div class="wrapper">
    <article>A</article>
    <article>B</article>
    <article>C</article>
    <article>D</article>
    <article>E</article>
    <article>F</article>
</div> 
```

我该如何设计它：

```
|-------|---------|
|       |         |
|   A   |    B    |
|       |         |
|-------|---------|
|       |         |
|   C   |    D    |
|       |         |
|-------|---------|
|       |         |
|   E   |    F    |
|       |         |
|-------|---------| 
```

这样每一对都应该有相同的高度？高度应该来自内容较长的**文章**，即如果**C**中的内容比**D**长，则**D应该与****C**的高度匹配。

到目前为止我尝试过的是好的旧浮动，但由于它是浮动的，所以它具有取决于内容的可变高度。

我也用谷歌搜索过类似的东西，但我发现的是固定高度的列，它们只是隐藏了额外的内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T13:38:05.537

使用等高功能

```
function equalHeight(group) {
    var tallest = 0;
    group.each(function() {
        var thisHeight = $(this).height();
        if(thisHeight > tallest) {
            tallest = thisHeight;
        }
    });
    group.height(tallest);
}

$(document).ready(function() {
    equalHeight($(".recent-article"));

}); 
```

// HTML

```
<div class="wrapper">
    <article class="recent-article">A</article>
    <article class="recent-article">B</article>
    <article class="recent-article">C</article>
    <article class="recent-article">D</article>
    <article class="recent-article">E</article>
    <article class="recent-article">F</article>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T13:48:11.237

最好你必须为此表。

```
<div class="wrapper">
<table width="100%" cellpadding="0" cellspacing="0" border="0">
    <tr>
        <td>
            <article class="recent-article">A</article>
        </td>
        <td>
            <article class="recent-article">B</article>
        </td>
    </tr>
    <tr>
        <td>
            <article class="recent-article">C</article>
        </td>
        <td>
             <article class="recent-article">D</article>
        </td>
    </tr>
    <tr>
        <td>
            <article class="recent-article">E</article>
        </td>
        <td>
            <article class="recent-article">F</article>
        </td>
    </tr>
    </table> 
```

# c# - 缓存的数据集表行在第一次使用后消失

> ID：12197955
> 
> 赞同：0
> 
> 时间：2012-08-30T13:26:33.937
> 
> 标签：c#, asp.net, caching

我正在缓存一个非常昂贵的查询以在我们的一个类文件中填充 4 个不同的下拉框。我花了太多时间尝试我所知道的一切来让它工作但没有运气。第一次通过时，DataSet 被缓存，一切看起来都很好。如果我刷新页面，代码会通过缓存项的 null 检查，但缓存的 DataSet 中没有行，并且不会填充下拉列表。

据我所知，我正在这样做，就像 MSDN 和其他网站上的所有示例一样。我只是无法让缓存粘住。DataSet 只有 140 行，因此不会因大小而被淘汰。我也尝试将其设置为永不过期，也没有运气。如果有人可以帮助我，我将不胜感激。

我检查了应用程序池设置，他们似乎在回收之前给了足够的时间。奇怪的是，当第一次缓存 DataSet 时，数据就在那里。当我刷新页面时，DataSet 列 Headers 在缓存项中，但没有 Data，因此它通过了 null 检查。我真的在这个问题上摸不着头脑。我能够缓存一个字符串，但由于某种原因，数据集不能超过一个请求。从对 Cached 项设置监视开始，它会一直挂起，直到第二次调用该方法，当该方法启动时，它会清空 DataSet。

我添加了委托 CacheItemRemovedCallback 并且无法触发它，除非我手动删除了缓存项。缓存的对象保留在缓存中，正在消失的是 DataSet 行。如果打开缓存的 DataSet，它有列名，没有行。正因为如此，它正在通过

```
if(cacheItem == null) 
```

查看。我可以毫无问题地缓存一个字符串，它会一直保留在缓存中，直到它过期或者我手动删除它。我真的很茫然。我还有其他方法可以尝试缓存该项目吗？我不认为会话会起作用，查询对于系统来说太昂贵了，无法在会话级别使用它。

```
public DataSet ReturnPhysicianSpecialtyCodes() 
{ 
    string cacheKey = "PhysCodes"; 
    object cacheItem = HttpRuntime.Cache[cacheKey] as DataSet; 
    if(cacheItem == null) 
    { 
        string sqlCommand = 
            "SELECT DISTINCT SPECIALTY_CODE, SPECIALTY " + 
            "FROM   PHARM.PHYSICIAN_SPECIALTY " +
            "ORDER BY SPECIALTY"; 

        cacheItem = OracleHelper.ExecuteDataset(
            this.Connection, 
            CommandType.Text,     
            sqlCommand); 

        HttpRuntime.Cache.Insert( 
            cacheKey, 
            cacheItem, 
            null, 
            Cache.NoAbsoluteExpiration, 
            new TimeSpan(1, 
            0, 0), 
            CacheItemPriority.Default, null); 
        } 
        return (DataSet)cacheItem;            
    }
} 
```

提前感谢大家的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T15:15:37.730

尝试使用其他容器，例如 List。使用 cmd.ExecuteDatareader 填充它并存储在缓存中。奇迹般有效。如果您只需要绑定下拉菜单，则使用数据集是一种不好的做法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T15:16:48.590

我通常这样做我的缓存......

```
public DataSet ReturnPhysicianSpecialtyCodes() {
    HttpContext context = HttpContext.Current;
    string cacheKey = "PhysCodes";
    DataSet cacheItem = (DataSet)context.Cache.Get(cacheKey);
    if(cacheItem == null) {
        string sqlCommand =
            "SELECT DISTINCT SPECIALTY_CODE, SPECIALTY " +
            "FROM PHARM.PHYSICIAN_SPECIALTY " +
            "ORDER BY SPECIALTY";
        cacheItem = OracleHelper.ExecuteDataset(
            this.Connection,
            CommandType.Text,
            sqlCommand);
        context.Cache.Add(
            cacheKey,
            cacheItem,
            null,
            Cache.NoAbsoluteExpiration,
            Cache.NoSlidingExpiration,
            CacheItemPriority.Normal,
            null);
    }
    return (DataSet)cacheItem;
} 
```

并不是说这与您正在做的事情有很大区别，但这对我有用。

# java - Java 命令行界面：使用 '\r' 在不同的行上有多个进度条

> ID：12197963
> 
> 赞同：6
> 
> 时间：2012-08-30T13:26:54.590
> 
> 标签：java, command-line-interface

我正在编写的程序的命令行界面的一部分调用了多个进度条。`\r`我目前可以通过使用类似于以下内容的转义序列来更新控制台中的一行：

```
System.out.printf("\rProcess is %d%% complete", percentageComplete); 
```

但是，回车仅返回到该行的开头。我想要一种返回两行（或更一般地说，任意数量的行）并让它们都/全部更新的方法。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-01-03T22:02:48.600

我已经为命令行进度条编写了一个小项目，它可以做一个衬里或“主/细节” - 请参阅[https://github.com/tomas-langer/cli/tree/master/cli-progress](https://github.com/tomas-langer/cli/tree/master/cli-progress)。它也适用于 Windows - 使用 ANSI 转义序列和 MS Windows 的本机实现（Chalk + Jansi）

如果您想做更多事情，请查看 Chalk 库 ( [https://github.com/tomas-langer/chalk](https://github.com/tomas-langer/chalk) )，该库又使用 Jansi（在之前的帖子中已经提到）。

line up 和 clear line 的 ansi 转义码在 Chalk 库中。要使用它们：

```
import com.github.tomaslanger.chalk.Ansi;
...
System.out.print(Ansi.cursorUp(2)); //move cursor up two lines
System.out.print(Ansi.eraseLine()); //erase current line 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-14T05:46:40.120

不幸的是，没有相当于`\r`向上移动光标的方法。但是，这可以通过 ANSI 转义序列来完成，只要您可以假设您在符合 ANSI 的终端上。

要使用 ANSI 代码打印进度条，您可以这样做

```
System.out.printf(((char) 0x1b) + "[1A\r" + "Item 1: %d ", progress1);
System.out.printf(((char) 0x1b) + "[1B\r" + "Item 2: %d ", progress2); 
```

ANSI 代码的唯一问题是，虽然几乎所有终端都使用 ANSI 代码，[但 Win32 终端却没有](http://en.wikipedia.org/wiki/ANSI_escape_code#Windows_and_DOS)。我还没有测试过它，但是如果你也需要支持内置的 Windows 终端，[这个库](https://github.com/fusesource/jansi)看起来会是一件好事。它包括一个 JNI 库，它将在 Windows 终端上执行相同的操作，并自动决定是使用 JNI 库还是使用 ANSI 代码。它还有一些方法可以使 ANSI 代码更易于使用。

# java - widgetDefaultSelected() 方法从未触发？

> ID：12197964
> 
> 赞同：2
> 
> 时间：2012-08-30T13:27:01.430
> 
> 标签：java, events, radio-button, swt

假设我有两个单选按钮，我想要一个默认选中，并且我想要`SelectionListener`执行一些操作。

当我尝试明显的方法时它不起作用：

```
Button button = new Button(parent, SWT.RADIO) ;
button.setSelection(true) ;

button.addSelectionListener( new SelectionAdapter() {
    public void widgetDefaultSelected(SelectionEvent e){
        doAction() ;
    }
}) ; 
```

`doAction()`永远不会触发...

谁能解释为什么`SelectionEvent`永远不会触发默认选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T14:41:34.640

> 例如，在某些平台上，当用户双击一个项目或在 Text 中键入返回时，默认选择发生在 List 中。在某些平台上，当按下鼠标按钮或键时会发生该事件。在其他情况下，它会在释放鼠标或键时发生。导致此事件的确切键或鼠标手势是特定于平台的。

[JavaDoc](http://help.eclipse.org/helios/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/events/SelectionListener.html#widgetDefaultSelected%28org.eclipse.swt.events.SelectionEvent%29)说明了一切。这是一个依赖于平台的操作，可能会在某些`Control`s 上发生。AFAIK，`Button`with`SWT.CHECK`不是其中之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T14:40:23.430

将您的代码更改为：

```
button.addSelectionListener( new SelectionAdapter() {
    @Override
    public void widgetSelected(SelectionEvent e){
        doAction() ;
    }
}) ; 
```

并避免使用`widgetDefaultSelected()`.

# c# - 将数字 11 格式化为 00000011

> ID：12197965
> 
> 赞同：5
> 
> 时间：2012-08-30T13:27:04.057
> 
> 标签：c#, .net, windows

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-30T13:29:37.630

像这样试试`myNumber.ToString("D8");`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T13:32:02.817

例如，前导零最多 8 个字符

```
string.Format("{0:D8}", value); 
```

或者

```
value.ToString("D8"); 
```

它[在这里解释](http://msdn.microsoft.com/en-us/library/dd260048.aspx)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T13:30:23.360

```
int i = 12;
var text = i.ToString("00000");
//text will be "00012" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T13:35:05.783

```
int foo = 11;
foo.ToString("D8"); 
```

--> 00000011

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-30T13:28:51.073

```
int number = 11;
string padded = number.ToString().PadLeft(8, '0'); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-30T13:33:11.920

尝试这个

```
int number = 11;
string text = number.ToString("00000000"); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-30T13:33:57.233

您将需要使用 String.PadLeft 方法在右侧对齐字符串。如果长度小于您给 PadLeft 的数字之一，则不会更改该值。

```
public string ZeroFill(int number, int length)
    return number.ToString().PadLeft(length, '0');
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-30T13:28:32.617

您可以查看长度并使用该`String.PadLeft()`函数，也可以在数字前面添加足够的 0（无论长度如何），然后使用该`String.Right()`函数获取所需数量的字符。

# python - 参数值正确性

> ID：12197966
> 
> 赞同：1
> 
> 时间：2012-08-30T13:27:05.380
> 
> 标签：python, list

> **可能的重复：**
> [Python 中的“Least Astonishment”：可变默认参数](https://stackoverflow.com/questions/1132941/least-astonishment-in-python-the-mutable-default-argument)

当我阅读以下讲义时：http: [//python.net/~goodger/projects/pycon/2007/idiomatic/handout.html#other-languages-have-variables](http://python.net/~goodger/projects/pycon/2007/idiomatic/handout.html#other-languages-have-variables)

我遇到了以下示例。基本上，它声称：

```
def bad_append(new_item, a_list=[]):
    a_list.append(new_item)
    return a_list 
```

不是将项目附加到列表的最佳方式，因为`a_list`在函数定义时进行评估。

相反，更好的选择是：

```
def good_append(new_item, a_list=None):
    if a_list is None:
        a_list = []
    a_list.append(new_item)
    return a_list 
```

因为它在函数的运行时定义了变量。

来自C背景，这里不是`a_list`局部变量吗？它如何将其值从一个函数调用存储到另一个函数？此外，有人可以详细说明为什么第二个例子比第一个更好吗？在定义中定义函数有什么问题？它似乎没有覆盖原始值或任何东西。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T13:41:31.187

一个简单的答案是该`def`语句创建了一个对象，并且在对象执行时（当`def`行被执行时），一个新的列表对象被创建并附加到对象上（在这种情况下，对象是一个函数）。

在随后的执行中 - 您可能期望生成一个新列表；但实际上，*函数定义第一次运行时*创建的同一个对象仍然存在；并且该对象的所有“成员”保持不变。这就是为什么它不断添加到同一个列表中。

它被认为是坏的原因是因为您可能对参数的期望（在每次执行时，都会生成一个新列表）不是语句所做的。这就是为什么更好的模式是传递`None`或其他一些空白对象。

考虑以下：

```
>>> bad_append('foo')
['foo']
>>> bad_append('bar')
['foo', 'bar']
>>> bad_append('zoo')
['foo', 'bar', 'zoo']
>>> bad_append('bar',[])
['bar']
>>> bad_append('bar') # what?
['foo', 'bar', 'zoo', 'bar'] 
```

正如你所看到的，当我传入一个新列表时，在下一次执行时它不会留下来；而是保留执行*def时构建的原始列表。*

有关更多信息 - 请参阅effbot 的[出色解释](http://effbot.org/zone/default-values.htm)。

# android - 对数据库执行查询时如何修复 SQLException？

> ID：12197978
> 
> 赞同：-3
> 
> 时间：2012-08-30T13:27:35.903
> 
> 标签：android, database, string, sqlite

我是 android 的菜鸟，我试图在我的数据库上运行一个查询以从我的表中返回一个字符串值。通过使用 long 选择我的行 ID，我在一个查询中成功完成了此操作。此处显示：

```
public String getHotness(long l) throws SQLException{
    // TODO Auto-generated method stub
    String[] columns = new String[]{  KEY_ROWID, KEY_NAME, KEY_HOTNESS };
    Cursor c = ourDatabase.query(DATABASE_TABLE, columns, KEY_ROWID + "=" + l, null, null, null, null);
    if (c != null){
        c.moveToFirst();
        String hotness = c.getString(2);
        return hotness;
    }
    c.close();
    return null;
} 
```

但是现在我必须使用字符串查询另一个表，但是当我执行这个查询时，我得到了一个 SQLException。

```
public String getSingleQty(String aCoin) throws SQLException{
    // TODO Auto-generated method stub
    String[] columns = new String[]{ KEY_ROWID, KEY_NAME, KEY_QUANTITY, KEY_OUNCES, KEY_VALUE};     
    Cursor c = ourDatabase.query(DATABASE_TABLE, columns, KEY_NAME + "=" + aCoin, null, null, null, null); //<--this causes exception
    String result = "";

    if (c != null){
        c.moveToFirst();
        result= c.getString(2);
        c.close();
        return result;
    }
    c.close();
    return null; 
```

我不明白为什么会这样。我对两个表都使用了相同的格式。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T13:34:25.717

由于 aCoin 作为字符串传递给查询，因此必须用撇号包裹。更正的代码片段：

```
Cursor c = ourDatabase.query(DATABASE_TABLE, columns, KEY_NAME + "='" + aCoin + "'", null, null, null, null); 
```

或者（如果语法更适合您）尝试这种方式：

```
Cursor c = ourDatabase.query(DATABASE_TABLE, columns, KEY_NAME + "=?", new String[] {aCoin}, null, null, null); 
```

# web - 如何防止登台在搜索引擎中被索引

> ID：12197979
> 
> 赞同：17
> 
> 时间：2012-08-30T13:27:36.690
> 
> 标签：web, search-engine, robots.txt, nofollow

我希望我的登台网站不会被搜索引擎索引（首先是谷歌）。

我听说 Wordpress 擅长这样做，但我想成为技术不可知论者。

robots.txt 是否足够？我们希望保持匿名访问，让客户无需登录即可查看其网站。

我必须在每个页面上添加 nofollow 吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-31T17:27:36.233

我通常反对将登台服务器暴露给公共网络，但如果这是您工作流程的最佳解决方案，您可以考虑以下几点：

**最小方法**

*   为登台服务器创建新域（例如 example-stage.com）
*   添加 robots.txt =>`Disallow: /`
*   在 Google 和 Bing 网站管理员工具中验证域

最小的方法是确保您不会因为到处都有重复的内容而自取其辱。通过注册一个单独的域，用户可以清楚地区分什么是阶段，什么不是。当您需要移动环境时，它也会更干净一些，但这更具操作性。CNAME 也可以使用，但请记住使用 Google 和 Bing 网站管理员工具注册每个 CNAME。这样，您可以在需要时使用域删除工具。

**建议的方法**

*   在请求前添加身份验证（HTTP 或其他）
*   如果不允许，则使用适当的响应代码进行响应（例如 401 Unauthorized）
*   上述基本方法中的所有其他内容

通过添加 robots.txt，它可以防止搜索引擎访问和索引内容。但是，这并不意味着他们不会将 URL 编入索引。如果搜索引擎知道给定的 URL，它可能会将其添加到搜索结果索引中。您有时会在搜索结果中看到这些。标题往往是没有描述的 URL。为了防止这种情况发生，需要告知搜索引擎不要显示内容或 URL。通过在前面添加 Authentication 并且不响应 200 OK 状态代码，这是向引擎发出的强烈信号，不要将这些 URL 添加到其索引中。根据我的经验，我从未在搜索引擎索引中看到过 401 响应代码页。

**首选方法**

*   将临时站点放在 IP 表后面（例如，只能从给定的 IP 范围访问）
*   将 meta 或 x-robots 命令添加到值为 NOINDEX、NOFOLLOW 的每个页面
*   建议方法中的所有其他内容

通过将临时站点放在 IP 过滤器后面，确保只有您的客户能够访问该站点。如果他们想从其他计算机访问它，这可能是一个问题，有时还会导致维护问题，但如果您不想让暂存环境建立索引，这是最好的方法。请注意，您需要确保所有其他请求（例如搜索引擎和非客户端）不会返回任何内容。他们应该收到一个超时响应，并且永远不会提供 200 OK。通过提供其他信息，它可能会被误认为是您不想要的伪装。

此外，为了更加安全，我还会在 NOINDEX、NOFOLLOW 的每个页面中添加一个 meta robots 或 x-robots-header 命令，以防万一 IP 表因错误配置或身份验证失败......这很少见，但它确实发生了当有人出于其他原因触摸配置时。就像 robots.txt 文件一样，如果这些页面级机器人命令被投入生产，你真的可以用这些页面级机器人命令来打自己的脚。因此，只需确保您的开发/登台环境处于完全分离的配置中。否则推出 NOINDEX、NOFOLLOW 或 a`Disallow: /`将对您的生产站点造成灾难性的影响。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-26T22:49:24.627

您可以通过在 apache conf 中全局添加以下设置来禁用此服务器范围，或者可以在 vhost 中使用相同的参数仅对特定 vhost 禁用它。

> 标题集 X-Robots-Tag “noindex, nofollow”

完成此操作后，您可以通过验证返回的 apache 标头来对其进行测试。

```
curl -I staging.mywebsite.com HTTP/1.1 302 Found Date: Sat, 26 Nov 2016 22:36:33 GMT Server: Apache/2.4.18 (Ubuntu) Location: /pages/ X-Robots-Tag: noindex, nofollow Content-Type: text/html; charset=UTF-8 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-03T18:29:41.660

我将此代码添加到我的网站（用 php 编码）：

```
if( $_SERVER['HTTP_HOST'] == 'test.ate.io' ) {
    header("X-Robots-Tag: noindex, nofollow", true);    
} 
```

这样，即使我的 staging 配置文件意外地被推送到我的生产服务器，也不会有任何问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-27T03:51:53.023

TLDR；在您的 Web 根目录中创建一个`robots.txt`文件。该文件应包含一行：

```
Disallow: / 
```

这足以防止 Google 和 Bing 机器人将您的网站编入索引并出现在搜索结果中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-13T08:35:26.037

将以下元标记添加到页面的部分：

```
<meta name="robots" content="noindex"> 
```

要阻止仅 Google 将页面编入索引：

```
<meta name="googlebot" content="noindex"> 
```

# c - C - 获取 IPC 共享内存信息

> ID：12197981
> 
> 赞同：1
> 
> 时间：2012-08-30T13:27:39.003
> 
> 标签：c, memory, ipc, shared, ipcs

我创建了一个程序，通过作为参数传递的 shmid（共享内存 id）显示共享内存段信息。

将数据与命令 ipcs 返回的数据进行比较，很明显我的程序显示了一些关于共享内存段的错误信息。

你能帮我理解为什么吗？

谢谢你。

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <sys/ipc.h>
#include <sys/shm.h>
#include <time.h>
#include <errno.h>

struct shmem_info {
    int id;
    struct shmid_ds data;
};

int *allocate_int(int n) {
    int *mem;

    if((mem=malloc(n*sizeof(int)))==NULL) {
        perror("malloc");
        exit(EXIT_FAILURE);
    }

    return mem;
}

struct shmem_info *allocate_shminfo(int n) {
    struct shmem_info *mem;

    if((mem=malloc(n*sizeof(struct shmem_info)))==NULL) {
        perror("malloc");
        exit(EXIT_FAILURE);
    }

    return mem;
}

int parse_int(char *str) {
    int n;

    n=atoi(str);

    return n;
}

int open_fileRW(char *path) {
    int fd;

    if((fd=open(path,O_RDWR|O_CREAT,0666))==-1) {
        perror("open");
        exit(EXIT_FAILURE);
    }

    return fd;
}

void close_file(int fd) {

    if(close(fd)==-1) {
        perror("close");
        exit(EXIT_FAILURE);
    }
}

struct shmid_ds get_shminfo(int id) {
    struct shmid_ds data;

    errno=0;

    if(shmctl(id,IPC_STAT,&data)==-1) {
        switch(errno) {
            case EACCES:
                fprintf(stderr,"Shmid %d: read acces not allowed\n", id);
                exit(EXIT_FAILURE);

            case EINVAL:
                fprintf(stderr,"Shmid %d: invalid shmid\n", id);
                exit(EXIT_FAILURE);

            default:
                perror("shmctl");
                exit(EXIT_FAILURE);
                break;
        }
    }

    return data;
}

void write_shminfo(int fd, struct shmem_info shmi) {
    ssize_t w, tot=0, size=sizeof(struct shmem_info);

    for(;;) {
        errno=0;

        w=write(fd,&shmi,size-tot);

        if(w==-1 && errno!=EINTR) {
            perror("write");
            exit(EXIT_FAILURE);
        }

        if(w==0) return;

        tot+=w;
    }
}

struct shmem_info read_shminfo(int fd) {
    ssize_t r, tot=0, size=sizeof(struct shmem_info);
    struct shmem_info shmi;

    for(;;) {
        errno=0;

        r=read(fd,&shmi,size-tot);

        if(r==-1 && errno!=EINTR) {
            perror("write");
            exit(EXIT_FAILURE);
        }

        if(r==0) return shmi;

        tot+=r;
    }
}

void print_shminfo(FILE *out, struct shmem_info shmi) {
    fprintf(out,"Shmid: %d\n", shmi.id);
    fprintf(out,"Size of segment (bytes): %d\n", (int)shmi.data.shm_segsz);
    fprintf(out,"PID of creator: %d\n", (int)shmi.data.shm_cpid);
    fprintf(out,"No. of current attaches: %d\n", (int)shmi.data.shm_nattch);
    fprintf(out,"Last attach time: %ld\n", shmi.data.shm_atime);
    fprintf(out,"Last detach time: %ld\n", shmi.data.shm_dtime);
    fprintf(out,"Last change time: %ld\n", shmi.data.shm_ctime);
    fprintf(out,"PID of last shmat/shmdt: %d\n", (int)shmi.data.shm_lpid);
    fprintf(out,"Key supplied to shmget(2): %d\n", (int)shmi.data.shm_perm.__key);
    fprintf(out,"Effective UID of owner: %d\n", (int)shmi.data.shm_perm.uid);
    fprintf(out,"Effective GID of owner: %d\n", (int)shmi.data.shm_perm.gid);
    fprintf(out,"Effective UID of creator: %d\n", (int)shmi.data.shm_perm.cuid);
    fprintf(out,"Effective GID of creator: %d\n", (int)shmi.data.shm_perm.cgid);
    fprintf(out,"Permissions + SHM_DEST and ESHM_LOCKED flag: %hd\n", shmi.data.shm_perm.mode);
    fprintf(out,"Sequence number: %hd\n", shmi.data.shm_perm.__seq);
    fprintf(out,"\n");
}

int main(int argc, char *argv[]) {
    int fd, n, i;
    struct shmem_info *shmi;

    if(argc<2) {
        fprintf(stderr,"Usage: %s <shmid> <shmid> ... <shmid>\n", argv[0]);
        exit(EXIT_FAILURE);
    }

    n=argc-1;

    argv=argv+1;

    shmi=allocate_shminfo(n);

    for(i=0;i<n;i++) {
        shmi[i].id=parse_int(argv[i]);
    }

    for(i=0;i<n;i++) {
        shmi[i].data=get_shminfo(shmi[i].id);
    }

    fd=open_fileRW("shmid_info-log.txt");

    for(i=0;i<n;i++) {
        write_shminfo(fd,shmi[i]);
    }

    for(i=0;i<n;i++) {
        shmi[i]=read_shminfo(fd);
    }

    for(i=0;i<n;i++) {
        print_shminfo(stdout,shmi[i]);
    }

    close_file(fd);

    free(shmi);

    exit(EXIT_SUCCESS);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T15:35:03.487

是你的`read_shminfo`功能有问题。它适用于本地 shmi，而不是处理使用 shmi=allocate_shminfo(n); 分配的 shmi

一种修复方法：

```
void read_shminfo(int fd, struct shmem_info *shmi) {
//    struct shmem_info shmi;
    ssize_t r, tot=0, size=sizeof(struct shmem_info);

    for(;;) {
        errno=0;

        r=read(fd,(void *)&shmi,size-tot);

        if(r==-1 && errno!=EINTR) {
            perror("write");
            exit(EXIT_FAILURE);
        }

        if(r==0)
                return ;

        tot+=r;
    }
} 
```

主要是：

```
for(i=0;i<n;i++) {
    read_shminfo(fd,&shmi[i]);
} 
```

# java - JFileChooser - 设置固定文件名

> ID：12197982
> 
> 赞同：1
> 
> 时间：2012-08-30T13:27:44.133
> 
> 标签：java, swing, file-io, jfilechooser

我正在制作一个类似于带有代码突出显示的文本编辑器的应用程序。

当我尝试保存一些文本时，我希望在 JFileChooser 上显示一个固定的文件名，该文件名在浏览目录时不会更改。

我这样做的原因是因为用户要保存 .java 文件。该文件应该具有给定类的名称。让用户输入名称只会导致错误，这会减慢编译速度并且没有意义。

这就是我的自动取款机：

```
final JFileChooser fc = new JFileChooser();
    fc.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);
    int userSelection = fc.showSaveDialog(null);
    if (userSelection == JFileChooser.APPROVE_OPTION) {
        File f = fc.getSelectedFile();
        String name = f.getAbsolutePath();
        File newFile = new File(name);//the text is written on this file.
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T14:44:24.503

我不知道确切，如果这对你有帮助。但是我遇到了类似的问题并像这样解决了它：

```
final JFileChooser fc = new JFileChooser();
    fc.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);
    int userSelection = fc.showSaveDialog(null);
    if (userSelection == JFileChooser.APPROVE_OPTION) {
        File f = fc.getSelectedFile();
        String name = f.getAbsolutePath();
        File newFile = new File(name + "\\" + yourfilenamehere);//the text is written on this file.
    } 
```

我担心，这听起来太容易了......只需用所需的（固定）文件名替换“yourfilenamehere”。

# jquery - 如果值 > 1000，需要一个 Jquery 函数来更改 Div 内容

> ID：12197984
> 
> 赞同：0
> 
> 时间：2012-08-30T13:27:50.510
> 
> 标签：jquery

对不起，我的 Jquery 很弱！

但这就是我所拥有的......

```
 $(function () {
              if (document.calc.loan.value > 1000)
              {
                  ("#link").value = "<a href='dump'></a>";
              }
              else {
                  ("#link").value = "<a href='dump2'></a>";
              }
     });

<form name=calc method=POST>
<input type=text name=loan id="amount" />
<div id="link"></div>
</form> 
```

因此，如果 Loan Input 在键入时超过 1000，我希望更改 #link 的内容

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T13:28:56.910

只需[`.html()`](http://api.jquery.com/html/)像下面这样使用来修改 div 的内容。

```
 $(function () {
     if (document.calc.loan.value > 1000) 
     {
        $("#link").html("<a href='dump'></a>");
     }
     else {
        $("#link").html("<a href='dump2'></a>");
     }
 }); 
```

你也失踪了`$`。改变`('#link')`->`$('#link')`

我只是注意到你想要他在输入字段中键入。在这种情况下，您需要一个`onkeyup`事件处理程序来检查输入框中输入的值。

```
$(function () {
      $('#amount').on('keyup', function () {
           var amount = parseFloat(this.value);

           if (!isNaN(amount) && amount > 1000) {
             $("#link").html("<a href='dump'></a>");
           } else {
             $("#link").html("<a href='dump2'></a>");
           }
      }); 
}); 
```

**编辑**：从更改`onchange`为`onkeyup`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T13:36:07.167

```
$('#amount').keyup(function() {
  var url = ($(this).val() > 1000) ? 'dump' : 'dump2';
  $('#link').attr('href', url);
}); 
```

这将在值`amount`更改时触发。

# ruby - 如何测量 Rack 或 Sinatra 应用程序的内存使用情况？

> ID：12197985
> 
> 赞同：5
> 
> 时间：2012-08-30T13:27:50.717
> 
> 标签：ruby, memory-management, sinatra, rack

您如何测量 Rack 或 Sinatra 应用程序的内存使用情况？

我知道这可能很大程度上取决于它的部署方式。但是您如何基本了解它使用了多少内存呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T16:08:47.307

如果您正在使用乘客，您可以尝试使用乘客内存统计，它可以为您提供按站点划分的很好的概览，否则您可以通过使用 top、shift-M 并查找 ruby​​ 进程来了解内存使用情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-22T20:31:18.933

尽管有它的名字，但我已经成功地使用[derailed_benchmarks gem](https://github.com/schneems/derailed_benchmarks)在 Padrino（基于 Sinatra 构建）应用程序中动态地对内存使用情况进行基准测试。[文档](https://github.com/schneems/derailed_benchmarks#rack-setup)描述了如何为非 Rails Rack 应用程序执行此操作 - 您只需`DERAILED_APP`在一个[简单的 Rake 任务](https://github.com/schneems/derailed_benchmarks#perfrake)中定义以告诉它如何启动您的应用程序。

它可以在您的本地主机上使用真实服务器（我使用 Unicorn）运行，甚至可以使用您的生产数据库（定义`DATABASE_URL`）运行。如有必要，它还可用于测试任何端点并绕过身份验证。用例包括一段时间内的内存使用（以查找泄漏）和在启动时为给定端点分析 gems/所需的库内存（在启动时使用大量内存）。

例如，该命令`bundle exec derailed exec perf:mem`在启动时为我的应用程序的根目录提供以下输出（此处隐藏 < 3 MiB 使用量）。大约 70 MiB 与 Heroku 的统计数据在我的生产服务器上告诉我的相符。顺便说一句，我的应用程序被称为“padfoot”。

`TOP: 71.75 MiB mechanize: 19.0898 MiB (Also required by: /Users/me/dev/padfoot/lib/parsers/transaction_table_parser.rb, /Users/me/dev/padfoot/lib/scrapers/app_details_scraper.rb, and 4 others) mechanize/pluggable_parsers: 11.1055 MiB mime/types: 10.9766 MiB (Also required by: /Users/me/.rvm/gems/ruby-2.3.1/gems/rest-client-1.8.0/lib/restclient/request, /Users/me/.rvm/gems/ruby-2.3.1/gems/rest-client-1.8.0/lib/restclient/payload) padrino: 13.1016 MiB padrino-core: 8.0273 MiB (Also required by: padrino-cache, padrino-admin) padrino-core/application: 3.3555 MiB sinatra/base: 3.1406 MiB (Also required by: padrino-core/ext/sinatra, sinatra/main) padrino-helpers: 3.707 MiB (Also required by: padrino-cache, padrino-admin) padrino/rendering: 3.3203 MiB (Also required by: /Users/me/dev/padfoot/app/app.rb) /Users/me/dev/padfoot/config/apps.rb: 6.9805 MiB /Users/me/dev/padfoot/app/app.rb: 6.8906 MiB aws-sdk-core/s3: 6.3711 MiB /Users/me/dev/padfoot/lib/scrapers/gps/gps_scraper.rb: 4.25 MiB linguistics/en: 4.1523 MiB /Users/me/dev/padfoot/lib/scrapers/digimap/digimap_scraper.rb: 3.0547 MiB`

# java - 使用 JDOM2 编辑内容 xml 文件

> ID：12197991
> 
> 赞同：0
> 
> 时间：2012-08-30T13:28:03.120
> 
> 标签：java, xml, jdom, jdom-2

我想在接下来的情况下征求你的意见。我有商品的 xml 文件。货物可以没有库存（在这种情况下我使用`<not-in-stock/>`空标签）或有库存（在这种情况下我使用标签而不`<price>value_price</price>`使用标签`<not-in-stock/>`）。

我尝试在 jsp 页面中编辑数据。我只有一个想法：按名称获取元素价格的值，如果值为空，我会更改无库存元素的名称。

如果你知道更好的决定 - 写在这里。

```
ElementFilter filter=new org.jdom2.filter.ElementFilter("price");
List<Element> elements = new ArrayList<Element>();

 for(Element c : root.getDescendants(filter))
 {
   elements.add(c);
 }

 if(!elements.isEmpty()){
 for(Element elementForUpdate : elements){
     elementForUpdate.setName("not-in-stock");
     elementForUpdate.setText(""); //I dont know value for empty-tag <not-in-stock/>
     XMLOutputter output=new XMLOutputter();
     output.output(doc, new FileOutputStream(file));
 }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T15:00:46.427

您需要`<not-in-stock/>`从文档对象中搜索节点，设置/修改文本/名称并保存。

```
 ElementFilter filter=new org.jdom2.filter.ElementFilter("not-in-stock");
 Element searchElement=null;
 for(Element c:root.getDescendants(filter))
 {
   searchElement=c;
   break;
 }
 if(searchElement!=null){
     searchElement.setName("NewName");
     searchElement.setText("Something is diff");
     XMLOutputter output=new XMLOutputter();
     output.output(doc, new FileOutputStream(file));
 } 
```

# canvas - 如何检查像素是否在特定区域内？

> ID：12197992
> 
> 赞同：2
> 
> 时间：2012-08-30T13:28:08.673
> 
> 标签：canvas, html5-canvas

我在画布上绘制了一个复杂的图像，我希望能够任意更改该图像中区域的透明度。我在单独的文件中将这些区域概述为掩码。有没有办法做到这一点？

我在想的是逐个像素地分析画布，如果有问题的像素落入蒙版勾勒的特定区域，请相应地修改它的透明度。但是我不确定如何检查像素是否在该区域内？我可能为每个区域有一个单独的画布元素，只检查相应的像素是否存在。但这听起来很笨拙。有更好的办法吗？优雅的？也许是一些数学魔法？还是我不知道的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T13:31:47.997

如果要检查图像中的像素是黑色还是白色，首先需要使用[getImageData](https://developer.mozilla.org/en-US/docs/HTML/Canvas/Pixel_manipulation_with_canvas)获取数据，然后只需检查正确坐标处的值（4 个字节，因为 RGBA）。

```
var maskCanvas = document.createElement('canvas');
maskCanvas.width = w;
maskCanvas.height = h;
var context = maskCanvas.getContext('2d');
context.drawImage(yourMaskImage, 0, 0);
var pixels = context.getImageData(0, 0, w, h).data; 
```

如果您的图像具有尺寸`(w, h)`，则您的数组的大小将为 ，`w*h*4`并且您将能够在`(x,y)`使用此颜色时获得颜色：

```
var i = 4*(x+w*y); // 
var color = (pixels[i]<<16) + (pixels[i+1]<<8) + (pixels[i+2]); // I don't care about the alpha 
```

当您直接在字节数组上工作时，这非常快（如果您在检查之间保留数组）。

请注意，包含掩码的图像必须来自与您的主页相同的域。

# facebook - Facebook API - 获取用户登录信息

> ID：12197993
> 
> 赞同：0
> 
> 时间：2012-08-30T13:28:15.020
> 
> 标签：facebook, api

我有一个应用程序，其中应用程序权限设置为使用“无（默认）”，这是因为我不希望用户通过验证应用程序的步骤，因为我的应用程序可供公众使用（对于没有Facebook登入）。

但是，我确实希望登录 Facebook 的用户的 Facebook uID 可以自定义页面上的内容。我尝试了 FB.api('/me', callback) 方法，但返回的 name 和 uid 响应都是 'undefined'。

我使用 Javascript SDK。提前感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T15:45:28.973

> 但是，我确实希望登录 Facebook 的用户的 Facebook uID 可以自定义页面上的内容。我尝试了 FB.api('/me', callback) 方法，但返回的 name 和 uid 响应都是 'undefined'。

好吧，那是因为如果没有用户访问令牌，API 无法知道“我”应该是谁——而且由于您不希望用户连接到您的应用程序，因此您将无法获得其中之一。

如果您没有让他们先连接到您的应用程序，您将**无法获取用户的 ID。**

# open-source - 是否有任何特殊的安全问题会影响开源 Web 应用程序？

> ID：12197995
> 
> 赞同：1
> 
> 时间：2012-08-30T13:28:14.597
> 
> 标签：open-source, security

我想开发一个开源网络应用程序。除了适用于闭源 Web 应用程序的常见问题之外，是否存在由开放源代码引入的特殊安全问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T07:48:39.180

不是真的，不。

好的，我将对此进行扩展；）

开源和闭源之间的唯一区别是，每个人都更容易看到开源应用程序的源代码。请注意，我说的*更容易*。有很多封闭源代码被“窃取”或泄露的例子。

当您实现一个应用程序时，您应该假设任何攻击者都可以访问源代码 - 这样您就希望不会依赖“通过默默无闻的安全性”（一件坏事）。

# ssl - 如何在客户端删除网站 SSL 异常消息

> ID：12197998
> 
> 赞同：0
> 
> 时间：2012-08-30T13:28:21.027
> 
> 标签：ssl, openssl

当用户以 gmail 左右的方式访问我的网站时，避免在浏览器级别出现 SSL 异常消息所需的指导。

我的公司从威瑞信购买了 228 位认证的 SSL，并从[http://certlogik.com/ssl-checker/检查了明确的状态](http://certlogik.com/ssl-checker/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T14:11:42.420

为避免浏览器警告，您应该：

*   使用大多数客户端信任的 CA 颁发的证书配置您的服务器。没有绝对列表，因为这可以配置，但是有一组完善的 CA，它们是来自各种操作系统/浏览器的 CA 捆绑程序的一部分（例如，请参见[这个问题](https://security.stackexchange.com/q/11464/2435)）。威瑞信通常是其中之一，所以你应该在那里。

*   确保您的服务器主机名（客户端应该可以看到）与该证书中的名称之一匹配。匹配规则的详细信息在 RFC 2818（第 3.1 节）和 RFC 6125 中；简而言之，如果您的证书有主题备用名称 DNS 条目，那么您服务的主机名必须是其中之一，否则它应该在`CN`主题 DN 中。

*   确保在提供页面时不要混合内容：以任何方式链接到的所有资源（图像、脚本、CSS、iframe 和 Ajax 请求）都应该指向`https://`URI（无论是相对的还是绝对的）。如果其中一些资源托管在不同的服务器上，则它们的证书也必须受到客户端的信任（与前面的两个规则相同）。

# css - IE 在没有背景设置的悬停中不包括边距和填充

> ID：12197999
> 
> 赞同：1
> 
> 时间：2012-08-30T13:28:28.100
> 
> 标签：css, internet-explorer, drop-down-menu, hover, padding

我设计了一个类似于 Suckerfish 模型的纯 CSS 下拉导航菜单，我希望在主导航按钮和下拉的嵌套 ul 之间留一点空间。为此，我在嵌套列表的顶部添加了少量填充。虽然在所有其他浏览器中都能正常运行，但邪恶的 IE 有一个小问题。

下拉菜单（嵌套的 ul）变得可见，因为您将鼠标悬停在包含它的 li 上，或者直接悬停在主导航按钮上，或者悬停在嵌套的 ul 上，它是 ul li 的子级。问题是，没有任何版本的 IE 考虑元素本身的元素部分的填充，其中涉及悬停，因此，只要您将鼠标从主导航按钮向下移动到下拉列表中，它就会放下悬停并且下拉列表消失。

但是，我最近发现 IE 仅在您没有背景设置时才执行此操作。如果我将填充放在嵌套的 ul 上，并设置背景，它就可以正常工作。这是一个haslayout问题吗？我不这么认为，因为我尝试了其他一些方法来触发 haslayout 无济于事。有没有其他方法可以在没有背景的情况下解决这个问题？由于多种原因，我不能拥有一个。

哦，另一个花絮，我试过了，它甚至适用于 rgba(0,0,0,0) 的背景，换句话说，透明背景，这将是完美的，除了仅在支持 rgba 的 IE 版本中（换句话说, 只有 9 及以上，所以 9)。

任何想法都将不胜感激，尽管这不是我一个人的工作，因此我将无法发布任何代码。我想如果有必要我可以打出一个例子，但在我遇到所有这些麻烦之前，我会先看看你们的想法。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-21T19:40:03.143

感谢您提出这个问题，我遇到了完全相同的问题，您添加 rgba(0,0,0,0) 半修复的想法使我找到了一个我认为适用于所有版本的 IE 并且不适用的解决方案影响已经工作的其他浏览器。

我创建了一个 1 像素乘 1 像素的透明 gif（我使用 gif 而不是 png，因此旧版本的 IE 仍然可以使用），然后将其设置为下拉元素的背景。这是我的代码的样子：

```
.nav .drop {
  background: url(../images/1x1.gif);
} 
```

希望对遇到相同问题并遇到此帖子的其他人有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T11:39:56.167

只需将 100% 透明的 PNG 作为背景...