# StackOverflow 问答 10188000-10188999

# javascript - 移动浏览器如何更改 screen.width？

> ID：10188000
> 
> 赞同：0
> 
> 时间：2012-04-17T08:48:40.227
> 
> 标签：javascript, android, mobile

我正在尝试制作一个能够容纳 youtube iframe 嵌入的移动网站。html 具有视口元标记：

```
<meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1"> 
```

我正在尝试添加此功能：如果嵌入的宽度大于 screen.width，则调整嵌入的大小以适合屏幕。

它在 iOS 和 Android 4.0 上运行良好，但我在三星 Galaxy S2（默认浏览器）上使用 Android 2.3.5 时遇到问题。在此设备上，在调整大小事件中，当我提醒 screen.width 时，该事件调用了 2 次：首先发送好的值，然后发送一个坏值（更大）。

有人知道这种行为吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T16:14:21.333

奇怪 - 但由于您知道第一个事件具有“良好值”，您可以设置一个计时器以将它们保持一两秒钟。这样，如果值为 0 继续设置它们并调用，`var t=setTimeout(resetViewportValues,2000);`否则值已经正确设置，所以什么都不做。

在`resetViewportValues()`函数中确保将宽度和高度设置回 0 并且 `clearTimeout(t);`

希望有帮助

# search - BAT 脚本在目录中搜索与输入名称匹配的文件夹

> ID：10188002
> 
> 赞同：1
> 
> 时间：2012-04-17T08:48:44.903
> 
> 标签：search, batch-file, directory, exists

不确定编写 bat 脚本以获取名称输入并搜索目录以查看它是否存在的最佳（或*更好）方法是什么。*

在运行比较之前我需要先将目录列表输出到文件吗？

如果它有所作为，该目录位于存储库中，因此出于我的目的，我将使用“svn list”，但我认为对每个人来说都是一个不错的通用解决方案会很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T11:45:42.893

如果您正在测试目录中的特定名称，那么您通常会执行以下操作：

```
if exist name (echo found it) else (echo not found) 
```

或者如果名称不完整

```
if exist *name* (echo found it) else (echo not found) 
```

如果您正在目录树中的任何位置测试名称，那么我会使用

```
dir /s /a-d *name* >nul && (echo found it) || (echo not found) 
```

如果您正在发出一个生成输出行的命令，并且您想测试名称是否存在于任何一行中，那么 Windows 管道通常可以正常工作，只要输出的大小不是很大并且第二半可以跟上与上半场。

```
yourCommand | find "name" >nul && (echo found it) || (echo not found) 
```

但是如果第二部分比第一部分慢，管道就会变得低效，并且必须缓冲大量数据。在这种情况下，使用临时文件而不是管道肯定会更好。我在临时文件名中加入了一个随机数，以防止使用同一临时目录的多个进程可能发生冲突。

```
set tempFile="%temp%\myTempFileBaseName%random%.txt"
yourCommand >%tempFile%
<%tempFile% find "name" >nul && (echo found it) || (echo not found)
del %tempFile% 
```

我通常使用管道，除非我知道我有性能问题。

# java - openejb 嵌入式容器找不到 persistence.xml

> ID：10188006
> 
> 赞同：6
> 
> 时间：2012-04-17T08:49:10.673
> 
> 标签：java, unit-testing, jakarta-ee, ejb, openejb

我在嵌入式模式下使用 openEjb 来测试一个无状态会话 bean，它有一个注入的 EntityManager。但是，当我运行测试时，它失败了，因为它无法初始化应用程序。当我看到控制台时，我还可以看到与无法找到 persistence.xml 相关的错误

注意：我尝试将 WebContent 以及 META-INF 放在类路径中，但这也无济于事。

**更新：**

使用 openejb + eclipse 时，资源查找有一些很奇怪的地方。

1.  我将 WebContent 添加到源文件夹。我停止收到 persistence.xml 错误，但现在我收到一个错误，提示 openejb 找不到任何托管资源
2.  我将 WebContent 添加到源文件夹，但使用不同的输出文件夹（对源文件夹使用允许输出文件夹），persistence.xml 错误再次开始发生
3.  我将 META-INF 复制到“test”中，这是所有测试的源文件夹，一切运行正常
4.  关于第 1 点和第 2 点，问题似乎是 WEB-INF 也作为 WebContent 的一部分包含在内。如果我排除WEB-INF，那么openejb再次可以在测试中找到persistence.xml并且测试运行正常

老实说，我对正在发生的事情一无所知。

我在下面粘贴所有相关的错误和代码。

**Eclipse 中 JUnit 测试失败导致的错误堆栈**

```
org.apache.openejb.OpenEjbContainer$InvalidApplicationException: org.apache.openejb.config.ValidationFailedException: Module failed validation. AppModule(name=)
    at org.apache.openejb.OpenEjbContainer$Provider.createEJBContainer(OpenEjbContainer.java:273)
    at javax.ejb.embeddable.EJBContainer.createEJBContainer(EJBContainer.java:56)
    at javax.ejb.embeddable.EJBContainer.createEJBContainer(EJBContainer.java:43)
    at com.diycomputerscience.slides.service.SlideServiceTest.setUp(SlideServiceTest.java:45)
    at junit.framework.TestCase.runBare(TestCase.java:128)
    at junit.framework.TestResult$1.protect(TestResult.java:106)
    at junit.framework.TestResult.runProtected(TestResult.java:124)
    at junit.framework.TestResult.run(TestResult.java:109)
    at junit.framework.TestCase.run(TestCase.java:120)
    at junit.framework.TestSuite.runTest(TestSuite.java:230)
    at junit.framework.TestSuite.run(TestSuite.java:225)
    at junit.framework.TestSuite.runTest(TestSuite.java:230)
    at junit.framework.TestSuite.run(TestSuite.java:225)
    at org.eclipse.jdt.internal.junit.runner.junit3.JUnit3TestReference.run(JUnit3TestReference.java:130)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: org.apache.openejb.config.ValidationFailedException: Module failed validation. AppModule(name=)
    at org.apache.openejb.config.ReportValidationResults.deploy(ReportValidationResults.java:82)
    at org.apache.openejb.config.AppInfoBuilder.build(AppInfoBuilder.java:264)
    at org.apache.openejb.config.ConfigurationFactory.configureApplication(ConfigurationFactory.java:696)
    at org.apache.openejb.OpenEjbContainer$Provider.createEJBContainer(OpenEjbContainer.java:267)
    ... 18 more 
```

**我的控制台输出：**

```
Apache OpenEJB 4.0.0-beta-2    build: 20120115-08:26
http://openejb.apache.org/
INFO - openejb.home = /home/user/workspace/wwald/slides
INFO - openejb.base = /home/user/workspace/wwald/slides
INFO - Using 'javax.ejb.embeddable.EJBContainer=true'
INFO - Configuring Service(id=Default Security Service, type=SecurityService, provider-id=Default Security Service)
INFO - Configuring Service(id=Default Transaction Manager, type=TransactionManager, provider-id=Default Transaction Manager)
INFO - Inspecting classpath for applications: 38 urls. Consider adjusting your exclude/include.  Current settings: openejb.deployments.classpath.exclude='', openejb.deployments.classpath.include='.*'
INFO - Found EjbModule in classpath: /home/user/workspace/wwald/slides/build/classes
INFO - Searched 38 classpath urls in 2000 milliseconds.  Average 52 milliseconds per url.
INFO - Beginning load: /home/user/workspace/wwald/slides/build/classes
INFO - Configuring enterprise application: /home/user/workspace/wwald/slides
INFO - Configuring Service(id=Default Stateless Container, type=Container, provider-id=Default Stateless Container)
INFO - Auto-creating a container for bean SlideService: Container(type=STATELESS, id=Default Stateless Container)
INFO - Configuring Service(id=Default Managed Container, type=Container, provider-id=Default Managed Container)
INFO - Auto-creating a container for bean com.diycomputerscience.slides.service.SlideServiceTest: Container(type=MANAGED, id=Default Managed Container)
INFO - Dumping Generated ejb-jar.xml to: /tmp/ejb-jar-5804778531295096416slides.xml
INFO - Dumping Generated openejb-jar.xml to: /tmp/openejb-jar-2921830618491817127slides.xml
ERROR - FAIL ... SlideService:  Missing required persistence.xml for @PersistenceContext ref "em" to unit "entities"
ERROR - Invalid EjbModule(name=slides, path=/home/user/workspace/wwald/slides/build/classes)
INFO - Set the 'openejb.validation.output.level' system property to VERBOSE for increased validation details.
WARN - configureApplication.loadFailed 
```

**无状态会话 Bean：**

```
@Stateless
public class SlideService {
    @PersistenceContext(unitName="entities", type=PersistenceContextType.TRANSACTION)
    private EntityManager em;

    //various business methods not shown for brevity
} 
```

**持久性.xml**

```
<persistence version="1.0"
    xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd">
    <persistence-unit name="entities">
        <provider>org.apache.openjpa.persistence.PersistenceProviderImpl</provider>
        <jta-data-source>myds</jta-data-source>
        <non-jta-data-source>myds</non-jta-data-source>
        <properties>
            <property name="openjpa.jdbc.SynchronizeMappings" value="buildSchema" />
        </properties>
    </persistence-unit>
</persistence> 
```

**JUnit 测试用例：**

```
public class SlideServiceTest extends TestCase {

    private SlideService slideService;

    public SlideServiceTest(String name) {
        super(name);
    }

    protected void setUp() throws Exception {
        super.setUp();

        final Properties p = new Properties();
        p.put("myds", "new://Resource?type=DataSource");
        p.put("myds.JdbcDriver", "org.hsqldb.jdbcDriver");
        p.put("myds.JdbcUrl", "jdbc:hsqldb:mem:slidedb");

        EJBContainer ejbContainer = EJBContainer.createEJBContainer();
        Object oSlideService = ejbContainer.getContext().lookup("java:global/slides/SlideService");
        assertNotNull(oSlideService);
        this.slideService = (SlideService)oSlideService;
    }

    //not showing test methods for brevity, since the code fails in setUp itself
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T15:25:44.800

我收到了同样的异常，问题是两个`persistence.xml`在 OpenEJB 的类路径上。

当我删除其中一个时，问题就解决了。

异常消息在这里对 OpenEJB 的一部分没有帮助，但是如果您调试到`org.apache.openejb.config.Appmodule`'s`hasFailures()`或方法，您可以在调用`hasErrors()`中看到更多有用的信息！`EjbModule.getValidation()`（版本 4.0.0）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-17T13:31:27.743

Maven 为 web 项目创建目录结构，如下所示：

```
src->main-+->java
          +->resources->META-INF
          +->webapp->WEB-INF 
```

要解决您的问题，您应该在目录 [resources] 下创建 dir [META-INF] 并将 persistence.xml 放在那里。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-07T13:19:53.730

这里的主要问题是，在运行 junit 时，JUnit 开始将 WAR 文件视为 JAR 文件，因此尝试在根目录的 META-INF 中找到persistance.xml，而在 WAR 文件中，META-INF 是在 WebContent 文件夹中创建的。我只是在 src 文件夹中创建了一个指向原始 META-INF 的符号链接。瞧……它奏效了。:)

# ruby - Ruby 中的递归。我这样做正确吗？

> ID：10188008
> 
> 赞同：2
> 
> 时间：2012-04-17T08:49:15.810
> 
> 标签：ruby

我只是在学习 Ruby 和一般的编程。我正在开发一个二十一点计划作为我的第一个项目。我有一个方法 start_game 被调用来开始每一手新手。该方法被调用，然后在手结束时再次调用自身。这是正确的方法吗？在我看来，每次调用该方法时它都会无休止地分配内存。我不确定这是否是垃圾收集会处理的事情。我觉得可能有更好的方法来做到这一点，但无法弄清楚。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T09:08:39.757

像这样递归调用方法最终会导致堆栈溢出（如果玩了足够多的牌，不确定这种可能性有多大）。

除非，也就是说，尾调用优化可以防止这种情况发生。这是一种优化形式，可应用于递归方法调用，其中递归调用始终是在通过该方法的任何运行*中要调用的最后一件事。*这基本上将递归调用转换为循环，因此您最终不会每次都添加到堆栈中。

但是，根据这个[问题](https://stackoverflow.com/a/824831/586748)，您不能依赖 Ruby 中的尾调用优化。所以我会稍微重写你的代码，所以`start_game`在一个循环中调用它来测试一些条件以确定它是否应该继续。

# android - 如何制作 ViewPager 循环？

> ID：10188011
> 
> 赞同：10
> 
> 时间：2012-04-17T08:49:31.137
> 
> 标签：android, loops, android-fragments

我有一个带有一些视图的 ViewPager。我想在最后一个右滑后转到第一个。

我试过了

```
@Override
public Fragment getItem(int arg0) {
    int i = arg0 % fragmentList.size();
    return fragmentList.get(i);
}

@Override
public int getCount() {
    return fragmentList.size()+1;
} 
```

但我有一个错误

```
E/AndroidRuntime(22912): java.lang.IllegalStateException: Fragment already added: RubricFragment{4136cd80 #1 id=0x7f06000c android:switcher:2131099660:0} 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-19T00:36:15.853

一种可能性是像这样设置屏幕：

C'ABC A'

C' 看起来就像 C，但是当您滚动到那里时，它会将您切换到真正的 C。A' 看起来就像 A，但是当您滚动到那里时，它会将您切换到真正的 A。

我会通过像这样实现[onPageScrollStateChanged](http://developer.android.com/reference/android/support/v4/view/ViewPager.OnPageChangeListener.html#onPageScrollStateChanged%28int%29)来做到这一点：

```
@Override
public void onPageScrollStateChanged (int state) {
    if (state == ViewPager.SCROLL_STATE_IDLE) {
        int curr = viewPager.getCurrentItem();
        int lastReal = viewPager.getAdapter().getCount() - 2;
        if (curr == 0) {
            viewPager.setCurrentItem(lastReal, false);
        } else if (curr > lastReal) {
            viewPager.setCurrentItem(1, false);
        }
    }
} 
```

请注意，这会调用[setCurrentItem](http://developer.android.com/reference/android/support/v4/view/ViewPager.html#setCurrentItem%28int,%20boolean%29)的替代形式并传递`false`以使跳转立即发生，而不是平滑滚动。

我认为这有两个主要缺点。首先，在到达任一端时，用户必须让滚动稳定下来，然后才能走得更远。其次，这意味着在您的第一页和最后一页中拥有所有视图的第二个副本。根据您的屏幕资源占用程度，这可能会排除这种技术作为可能的解决方案。

另请注意，由于视图寻呼机在滚动完成之前不会让点击进入底层控件，因此最好不要为 A' 和 C' 片段设置点击侦听器等。

**编辑：**现在我自己实现了这个，还有另一个相当大的缺点。当它从 A' 切换到 A 或 C' 切换到 C 时，屏幕会闪烁片刻，至少在我当前的测试设备上是这样。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-03T05:10:39.787

我会在 ViewPager 的末尾创建一个虚拟页面。然后，当用户滚动到虚拟页面时，我使用此代码转到第一页。我知道它远非完美 :D

```
@Override
public void onPageScrolled(int position, float arg1, int arg2) {
    if (position >= NUM_PAGE-1) {
        mViewPager.setCurrentItem(0, true);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-28T16:47:56.127

我的解决方案是基于benkc，但是禁用了首页和末页滚动动画，当页面“滚动”到真实页面时，再次启用滚动动画，这种方案可以解决第一个缺点。

但我的`ViewPager.setCurrentItem(position, false)`结果仍然是滚动动画，所以实现的动画太快而无法看到。

像这样的快速滚动动画，不要介意评论，只是我的代码没有使用这些方法：

```
public class FixedSpeedScroller extends Scroller {
    private int mDuration = 0;

    public FixedSpeedScroller(Context context) {
        super(context);
    }

    @Override
    public void startScroll(int startX, int startY, int dx, int dy, int duration) {
        super.startScroll(startX, startY, dx, dy, mDuration);
    }

    @Override
    public void startScroll(int startX, int startY, int dx, int dy) {
        super.startScroll(startX, startY, dx, dy, mDuration);
    }
} 
```

并使用此方法查看pager的活动

```
private Scroller scroller;
private void setViewPagerScroll(boolean instant) {
    try {
        Field mScroller = null;
        mScroller = ViewPager.class.getDeclaredField("mScroller");
        mScroller.setAccessible(true);
        if (scroller == null) {
            scroller = (Scroller) mScroller.get(mViewPager);
        }
        FixedSpeedScroller fss = new FixedSpeedScroller(mViewPager.getContext());
        mScroller.set(mViewPager, instant ? fss : scroller);

    } catch (NoSuchFieldException | IllegalArgumentException | IllegalAccessException e) {
        e.printStackTrace();
    }
} 
```

并像这样修改 onPageScrollStateChanged，只有第一页或最后一页（我有 5 页）会将动画更改为快速滚动，否则会正常滚动：

```
public void onPageScrollStateChanged(int state) {
    if (state == ViewPager.SCROLL_STATE_IDLE) {
        if (position == 0) {
            setViewPagerScroll(true);
            mViewPager.setCurrentItem(3);

        } else if (position == 4) {
            setViewPagerScroll(true);
            mViewPager.setCurrentItem(1);

        } else {
            setViewPagerScroll(false);
        }
    }
} 
```

FixedSpeedScroller 参考在这里： http: [//blog.csdn.net/ekeuy/article/details/12841409](http://blog.csdn.net/ekeuy/article/details/12841409)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-28T11:45:20.970

这应该可以在没有虚拟页面的情况下完成工作：

```
private boolean isFirstOrLastPage;
private int currentPageIndex = 0;

@Override
public void onPageScrolled(int arg0, float arg1, int arg2) {
    if(currentPageIndex!=arg0){
        isFirstOrLastPage = false;
        return;
    }
    if((arg0==0 || arg0==PAGES.size()-1) && arg1 == 0 && arg2 == 0){
        if(isFirstOrLastPage){
                 //DO SOMETHING
        }else{
            isFirstOrLastPage = true;
        }
    }
}

@Override
public void onPageSelected(int arg0) {
    currentPageIndex = arg0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-29T15:12:48.247

这行得通，接受的答案不好，因为循环发生时存在滞后：

```
 @Override
public int getCount() {
    return Integer.MAX_VALUE;
}

@Override
public CharSequence getPageTitle(int position) {
    String title = mTitleList.get(position % mActualTitleListSize);
    return title;
}

@Override
public Object instantiateItem(ViewGroup container, int position) {
    int virtualPosition = position % mActualTitleListSize;
    return super.instantiateItem(container, virtualPosition);
}

@Override
public void destroyItem(ViewGroup container, int position, Object object) {
    int virtualPosition = position % mActualTitleListSize;
    super.destroyItem(container, virtualPosition, object);
} 
```

答案取自这里：[ViewPager as a circular queue / wrapping](https://stackoverflow.com/questions/7546224/viewpager-as-a-circular-queue-wrapping)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-11-03T13:49:12.843

科特林版本：

初始化变量

```
private var mCurrentPosition = 0
private var mScrollState = 0
private lateinit var mImageViewPager: ViewPager 
```

创建：

```
mImageViewPager = findViewById<View>(R.id.pager) as ViewPager

mImageViewPager.addOnPageChangeListener(object : ViewPager.OnPageChangeListener {

            override fun onPageScrollStateChanged(state: Int) {
                handleScrollState(state)
                mScrollState = state
            }

            override fun onPageScrolled(position: Int, positionOffset: Float, positionOffsetPixels: Int) {

            }
            override fun onPageSelected(position: Int) {
                mCurrentPosition = position
            }

        }) 
```

onCreate 之外的函数：

```
private fun handleScrollState(state: Int) {

        if (state == ViewPager.SCROLL_STATE_IDLE) {

            if (!isScrollStateSettling()){

                val lastPosition: Int = mImageViewPager.getAdapter()?.getCount()!! - 1
                if (mCurrentPosition == 0) {
                    mImageViewPager.setCurrentItem(lastPosition , false)
                } else if (mCurrentPosition == lastPosition) {
                    mImageViewPager.setCurrentItem(0 , false)
                }
            }
        }
    }

private fun isScrollStateSettling(): Boolean {
        return mScrollState == ViewPager.SCROLL_STATE_SETTLING
    } 
```

# c# - 使用 Spring.Net 动态创建对象

> ID：10188014
> 
> 赞同：0
> 
> 时间：2012-04-17T08:49:40.603
> 
> 标签：c#, .net, spring, inversion-of-control, spring.net

*我不是 Spring 或 IoC 方面的专家 - 我想让我的客户端应用程序根据某些条件“选择”接口的不同实现。

我相信 Spring（或其他 IoC 容器）允许这样做，但是所有示例都表明具体类是在某个配置文件中配置的，这不是我所追求的。

我想（以某种方式）允许容器决定从哪个实现中选择（基于一些条件和一组给定的类来选择）。

这可能吗？（我很确定它是）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T08:51:50.833

您可以使用[工厂类](http://www.springframework.net/doc-latest/reference/html/objects.html#objects-factory-class-static-factory-method)（它可以是静态工厂或实例工厂）。

# c# - 如何在 C# .NET 中的自定义形状窗体上投影？

> ID：10188024
> 
> 赞同：1
> 
> 时间：2012-04-17T08:50:07.817
> 
> 标签：c#, .net, winforms, transparency, shadow

我正在创建一个自定义形状的 Windows `Form`( `public class Window : Form`) 并且需要放置一个适当的阴影。该表格是带有圆角的矩形，我正在定义一个合适`GraphicsPath`的形状来获得表格的形状。

以下是应该执行此操作的部分代码：

```
private const int CS_DROPSHADOW = 0x00020000;

public Window()
{
 FormBorderStyle = System.Windows.Forms.FormBorderStyle.None;
 SetStyle(ControlStyles.Opaque | ControlStyles.OptimizedDoubleBuffer, true);
 TransparencyKey = Color.FromArgb(0xFF, 0, 0, 0);
}

protected override CreateParams CreateParams
{
 get
 {
  CreateParams cp = base.CreateParams;
  cp.ClassStyle |= CS_DROPSHADOW;
  return cp;
 }
}

protected override void OnPaint(PaintEventArgs e)
{
 e.Graphics.SmoothingMode = SmoothingMode.HighQuality;

 Pen ps = new Pen(Color.FromArgb(0xFF, 0, 0, 0));
 e.Graphics.FillRectangle(ps.Brush, this.ClientRectangle);

 Pen p1 = new Pen(Color.FromArgb(0xFA, 0xFA, 0xFA));
 Pen p2 = new Pen(Color.FromArgb(0xCD, 0xCD, 0xCD));
 GraphicsPath border =
     RoundedRectangle.Create(new Rectangle(0, 0, Width - 1, Height - 1), 7);
 e.Graphics.SetClip(border); // I'd prefer if this came after the following two
                             // lines, but doing that results in another problem
 e.Graphics.FillPath(p1.Brush, border);
 e.Graphics.DrawPath(p2, border);
 base.OnPaint(e);
 e.Graphics.ResetClip();
} 
```

`RoundedRectangle`课程从这里[开始](http://www.switchonthecode.com/tutorials/csharp-creating-rounded-rectangles-using-a-graphics-path)。

生成的阴影就像形状是完美的矩形一样投射，这在右下角最为明显。如何正确绘制阴影？

**编辑：**我不敢相信我从 2004 年（8 年前）开始在网上找到关于此的讨论，但仍然没有找到解决方案。

# php - 隐藏 div 然后发布表单

> ID：10188026
> 
> 赞同：0
> 
> 时间：2012-04-17T08:50:18.937
> 
> 标签：php, jquery

我仍在处理我的多阶段表单（http://jsfiddle.net/xSkgH/93/），并结合了以下解决方案来协助 ajax 提交：

```
<script type="text/javascript">
$(document).ready(function() {
    $("#postData").click(function() {
        $("#last-step").hide(600);

            $("#task5_booking").submit(function() {
                $.post('resources/process2.php', function(data) {
                    $("#result").html(data);
                });
            });

        return false;
    });
});
</script> 
```

它很好地淡出最后一步，但是在加载内容时，它只是一个包含所有表单字段的数组：

```
<?php
print_r($_POST);
?> 
```

似乎什么都没有发生。div 保持空白。非常感谢任何帮助家伙。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T08:54:47.597

如果您通过 ajax 调用资源，您还应该在调用中传递序列化表单。所以假设`$("#task5_booking")`是你的表单元素

```
$("#task5_booking").submit(function(evt) {
      evt.preventDefault();
      $.post('resources/process2.php', { data: $("#task5_booking").serialize() }, function(data) {
            $("#result").html(data);
      });
}); 
```

当您提交表格时

1.  停止默认事件（提交），否则表单提交将立即停止后续代码，并且 ajax 调用永远不会启动 - 这是使用`preventDefault()`方法完成的；
2.  进行 post 调用，传递使用`serialize()`方法序列化的表单（请参阅[http://api.jquery.com/serialize/](http://api.jquery.com/serialize/)）。

另请注意，正如杰克所指出的，您在小提琴中的表格有 `camperapplicationForm`id 而不是`task5_booking`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T08:55:02.593

我认为你应该删除你的`submit`功能：

```
<script type="text/javascript">
$(document).ready(function() {
    $("#postData").click(function() {
        $("#last-step").hide(600);

        $.post('resources/process2.php', function(data) {
            $("#result").html(data);
        });

        return false;
    });
});
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T09:06:03.363

```
$(document).ready(function() {
    $("#postData").click(function(e) {
        e.preventDefault();
        $("#last-step").hide(600);

            $("#task5_booking").submit(function() {
                $.post('resources/process2.php', $(this).serialize(), function(data) {
                    $("#result").html(data);
                });
            });
    });
}); 
```

# iphone - 为什么有项目和目标的代码签名构建设置，并且哪个优先？

> ID：10188035
> 
> 赞同：0
> 
> 时间：2012-04-17T08:50:48.970
> 
> 标签：iphone, xcode

为什么有项目和目标的代码签名构建设置，并且哪个优先？

我有 2 个目标 - 一个用于 Lite，一个用于 Premium 版本。在创建临时构建时，我很困惑为什么可以在 2 个地方编辑代码签名构建设置并且哪个优先？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T08:55:44.687

我相信目标会优先考虑。如果您在构建设置中从组合视图更改为级别视图，它会突出显示正在使用的视图，这很有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T09:01:50.693

目标构建设置（如果已定义）始终覆盖项目设置。您可以判断这些是否已定义，因为它们是**粗体**。

根据不同目标的用途，它们可能需要一些不同的设置，或者很多。举一个极端的例子，假设您在同一个项目中为您的 iOS 游戏提供基于 Mac OS 的编辑器。这两个目标将具有不同的架构、SDK、搜索路径、内存管理等。

或者，如果您的目标是同一应用程序的 Lite 和 Premium 版本，它们之间几乎不会发生任何变化。

如果您发现自己更改了所有目标中的设置，则应改为更改项目中的该设置。您可以通过选择其中一个粗体构建设置并按删除键来取消目标中的覆盖。此操作无法撤消，因此如果您需要删除它，请确保您知道设置是什么。

在代码签名的情况下，仅在项目中进行代码签名。

如果您最终将您的应用程序的自定义版本授权给另一家公司，您将需要一个具有不同代码签名的新目标，因此如果您需要 XCode 可以做到这一点，那就太好了。

# scala - Scala 将 Option 转换为 Int

> ID：10188037
> 
> 赞同：8
> 
> 时间：2012-04-17T08:50:58.330
> 
> 标签：scala, scala-collections

我看过这些链接

[http://blog.danielwellman.com/2008/03/using-scalas-op.html](http://blog.danielwellman.com/2008/03/using-scalas-op.html)

[http://blog.tmorris.net/scalaoption-cheat-sheet/](http://blog.tmorris.net/scalaoption-cheat-sheet/)

我有一张 [String, Integer] 的地图，当我执行 map.get("X") 时，我得到了一个选项。我想要以下内容。

```
val Int count = map.get(key); 
// If the key is there I would like value if it is not I want 0 
```

我如何在一行中实现这一目标？我需要多次这样做。每次都为此编写一个函数看起来有点低效。我确信我缺少一些智能的单行怪癖，但我真的很喜欢将值转换为单行中的整数:)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-17T08:56:05.713

只需使用 getOrElse 方法：

```
val count: Int = map.getOrElse(key,0); 
```

另请注意，在 Scala 中，您在名称**之后**编写类型，而不是之前。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-17T10:17:18.760

@om-nom-nom（经典网名）有正确答案，但为了提供*另一种方式*™

```
val count = map.get(key) fold(0)(num => num) 
```

在知情用户抨击我之前，“Option 没有折叠！”，[折叠已添加到](http://groups.google.com/group/scala-language/browse_thread/thread/df911c8a8c52439d#)Scala *2.10中的 Option*

getOrElse 在当前情况下当然更好，但是在某些 Some/None 场景中，像这样折叠的 1-liner 可能会很有趣（*@Debiliski 的编辑补充，针对最新的 2.10 快照进行了测试*）：

```
val count = map.get(k).fold(0)(dao.userlog.count(_)) 
```

我想在 2.9.2 及以下我们已经可以做到：

```
val count = map get(k) map ( dao.userlog.count(_) ) getOrElse(0) 
```

也就是说，在 Scala 中，通常有不止一种方法可以做同样的事情：在链接线程中，OP 显示了 10 多种替代方法来实现 Option fold ;-)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-17T16:35:42.770

还有一种方式。

```
import scalaz._, Scalaz._

scala> val m = Map(9 -> 33)
m: scala.collection.immutable.Map[Int,Int] = Map(9 -> 33)

scala> m.get(9).orZero
res3: Int = 33

scala> m.get(8).orZero
res4: Int = 0 
```

# java - Jersey 产生重复的日志消息

> ID：10188040
> 
> 赞同：1
> 
> 时间：2012-04-17T08:51:07.503
> 
> 标签：java, jersey

有谁知道为什么 Jersey 会记录重复的消息？

重复的消息：

```
Apr 18, 2012 9:24:22 AM com.sun.jersey.api.core.PackagesResourceConfig init
INFO: Scanning for root resource and provider classes in the packages:

Apr 18, 2012 9:24:22 AM com.sun.jersey.api.core.ScanningResourceConfig logClasses
INFO: Root resource classes found:

Apr 18, 2012 9:24:22 AM com.sun.jersey.api.core.ScanningResourceConfig init
INFO: No provider classes found.

Apr 18, 2012 9:24:22 AM com.sun.jersey.server.impl.application.WebApplicationImpl _initiate
INFO: Initiating Jersey application, version 'Jersey: 1.9.1 09/14/2011 02:05 PM' 
```

重复的日志消息是否表明我们的代码中有重复的内容？

谢谢

# dialog - 如何自动启动库中包含的活动？

> ID：10188043
> 
> 赞同：0
> 
> 时间：2012-04-17T08:51:12.687
> 
> 标签：dialog, selection, zxing, integrate

我按照[这个博客](http://damianflannery.wordpress.com/2011/06/13/integrate-zxing-barcode-scanner-into-your-android-app-natively-using-eclipse)将 zxing 条码扫描器本地集成到我的 Android 应用程序中。感谢 Zxing 和博客。

但是有一个问题，如果我已经在我的手机中安装了 Zxing 二维码扫描器，当我要启动“com.google.zxing.client.android.SCAN”时使用

```
Intent intent = new Intent("com.google.zxing.client.android.SCAN"); 
```

它会显示一个对话框让我选择要执行的应用程序。（对不起，我此时无权放图片）

当我的手机中没有 Zxing 二维码扫描仪时，它可以正常工作。有人可以告诉我如何让它在没有选择对话框的情况下工作。（当我在Zxing应用下选择自己的应用时，它会报错并强制我的应用下线）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T16:39:28.637

您无法在 Android 上执行此操作。当有多个选项时（或者，当有新选项可用时），平台将始终让用户选择如何处理 Intent。您不能强制用户跳过对话框并强制用户做出选择。

# python - 将字符串转换为变量 [python]

> ID：10188044
> 
> 赞同：1
> 
> 时间：2012-04-17T08:51:16.443
> 
> 标签：python, string, list

在我的程序中，我有一个需要根据变量内容访问的列表列表。

```
string = [
         [arg1, arg2, arg3],
         [arg1, arg2, arg3]
         ]

string2 = [
          [arg1, arg2, arg3],
          [arg1, arg2, arg3]
          ] 
```

但是，这将始终是一个字符串。

```
Class.variable = 'string' # this can be either 'string' or 'string2' 
```

我必须访问列表列表的代码是

```
newVariable = Class.variable[seperateVariable][0] 
```

但是，这会导致错误

```
IndexError: string index out of range 
```

我已经弄清楚这是因为 Class.variable 是一个字符串，而不是一个真正的变量。

解决此问题的最佳扩展方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T08:58:38.827

`Class.variable`如果真的需要是一个字符串（例如因为它是用户输入），我认为你最好使用字典：

```
strings = { "string": [[arg1, arg2, arg3],[arg1, arg2, arg3]], 
            "string2": [[arg1, arg2, arg3],[arg1, arg2, arg3]] } 
```

现在您可以访问`strings[separateVariable][0]`.

（在您的示例中，您试图访问`"string"[separateVariable][0]`失败的足够高的值`separateVariable`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T08:55:31.613

将字符串分配给您的类变量时删除引号。另外请避免与隐式类型或模块的名称冲突

```
Class.variable = string1 
```

当您引用变量时，它实际上被视为字符串而不是变量。因此，变量的实际内容永远不会分配给您的`Class`变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T09:01:50.973

您可以使用内置的 globals() 或 locals() 取决于 'string1' 的定义位置，因此您可以这样做：

```
Class.variable = locals()['string'] 
```

# android - 运行 Android 应用程序时无法打开网络摄像头

> ID：10188045
> 
> 赞同：0
> 
> 时间：2012-04-17T08:51:27.860
> 
> 标签：android, video

当我在计算机上运行我的 android 相机应用程序时，网络摄像头无法正常工作。

这里是代码。清单.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.examples"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="8" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

<uses-permission android:name="android.permission.CAMERA" />
</manifest> 
```

主要的.xml

```
 <?xml version="1.0" encoding="utf-8"?>
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="fill_parent"
              android:layout_height="fill_parent"
              android:orientation="vertical" >
   <FrameLayout
    android:layout_weight="1"
  android:layout_width="fill_parent"
   android:layout_height="fill_parent">

 <SurfaceView
 android:id="@+id/surfaceView1"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 /> 

 </FrameLayout>
    <LinearLayout
   android:layout_width="fill_parent"
      android:layout_height="wrap_content"
  android:orientation="horizontal"
 android:layout_marginTop="300px"
 android:paddingLeft="5px"
 android:paddingTop="5px"
 android:paddingRight="5px">    

 <ImageButton
     android:layout_width="50px"
     android:textColor="#ffffff"
     android:layout_height="50px"
     android:id="@+id/cameraClick "
      />

   </LinearLayout> 

   </RelativeLayout> 
```

文件

```
 package com.examples;

 import java.io.IOException;
 import android.app.Activity;
 import android.hardware.Camera;
 import android.hardware.Camera.PictureCallback;
 import android.hardware.Camera.ShutterCallback;
 import android.os.Bundle;
 import android.view.SurfaceHolder;
 import android.view.SurfaceView;
 import android.view.View;
 import android.view.View.OnClickListener;
 import android.widget.ImageButton;

 public class MainActivity extends Activity implements SurfaceHolder.Callback{

      private Camera camera;
  private ImageButton cameraClick;
  private SurfaceHolder mHolder; 

 /** Called when the activity is first created. */
  @Override
  public void onCreate(Bundle savedInstanceState) {
   super.onCreate(savedInstanceState);
   setContentView(R.layout.main);

   SurfaceView surfaceView = (SurfaceView)findViewById(R.id.surfaceView1);
   mHolder = surfaceView.getHolder();
   mHolder.addCallback(this);
   mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);  

   cameraClick = (ImageButton) findViewById(R.id.cameraClick);
   cameraClick.setOnClickListener( new OnClickListener() {
    public void onClick(View v)
              {
 camera.takePicture(shutterCallback, rawCallback,jpegCallback);
    }
   });  

   }

  // Handles when shutter open
  ShutterCallback shutterCallback = new ShutterCallback()
  {
   public void onShutter()
   {   

   }
  };

  /** Handles data for raw picture */
  PictureCallback rawCallback = new PictureCallback()
  {
   public void onPictureTaken(byte[] data, Camera camera)
   {   

   }
  }; 

  /** Handles data for jpeg picture */
  PictureCallback jpegCallback = new PictureCallback()
 {
   public void onPictureTaken(byte[] data, Camera camera)
 {
    // we do something using return byte[] of taken image.
   }
  };

  @Override
  public void surfaceChanged(SurfaceHolder holder,int format,int width,int height)
 {

   // Set camera preview size,orientation,rotation using parameters 

 Camera.Parameters parameters = camera.getParameters();
    parameters.set("orientation", "portrait");
    camera.setParameters(parameters);
     camera.startPreview();       

  }

  @Override
  public void surfaceCreated(SurfaceHolder holder)
 {
   camera = Camera.open();
     try {
     camera.setPreviewDisplay(holder);
    }
 catch (IOException e)
 {
     e.printStackTrace();
    }

  }

  @Override
  public void surfaceDestroyed(SurfaceHolder holder)
 {
   camera.stopPreview();
     camera.release();
    camera = null; 

  }

 } 
```

当我运行此代码时，网络摄像头无法启动。请帮我解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T07:55:55.670

我很抱歉这个问题。计算机网络摄像头尚未与 Android 模拟器集成。当我执行此代码时，我只是 Android 的新手。所以我不知道这个简单的事情。

# c# - 寻找一行 ia 文本文件

> ID：10188050
> 
> 赞同：1
> 
> 时间：2012-04-17T08:51:59.033
> 
> 标签：c#, streamreader

我需要一些帮助，我正在编写一个读取文本文件的方法，如果发生任何异常，我会在文本文件中附加一行。例如“ ****** ”

所以我需要知道的是如何在不读取文本文件的每一行的情况下检查文本文件中的特定文本行，比如 peek 方法或其他东西。

任何帮助，将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T08:59:03.560

您可以[`File.ReadLines`](http://msdn.microsoft.com/en-us/library/dd383503.aspx)结合使用[`Any`](http://msdn.microsoft.com/en-us/library/bb337697.aspx)：

```
bool isExcFile = System.IO.File.ReadLines(path).Any(l => l == "**"); 
```

> ReadLines 和 ReadAllLines 方法的区别如下： 使用 ReadLines 时，可以在返回整个集合之前开始枚举字符串集合；使用 ReadAllLines 时，必须等待返回整个字符串数组才能访问该数组。因此，当您处理非常大的文件时，ReadLines 会更有效率。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T06:39:17.447

我找到了一个解决方案，我附加到文件的行将始终是文件中的最后一行，所以我创建了一个读取最后一行的方法。见下文：

```
public string ReadLastLine(string path)
        {
            string returnValue = "";
            FileStream fs = new FileStream(path, FileMode.Open);
            for (long pos = fs.Length - 2; pos > 0; --pos)
            {
                fs.Seek(pos, SeekOrigin.Begin);               
                StreamReader ts = new StreamReader(fs);
                returnValue = ts.ReadToEnd();
                int eol = returnValue .IndexOf("\n");
                if (eol >= 0)
                {                    
                    fs.Close();
                    return returnValue .Substring(eol + 1);
                }                
            }
            fs.Close();
            return returnValue ;
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T09:02:17.253

您将需要维护一个单独的文件，其中包含特殊标记所在位置的索引（例如逗号分隔）。然后您只能读取这些索引并使用[Seek](http://msdn.microsoft.com/en-us/library/system.io.stream.seek.aspx)方法跳转到文件流中的那个点。

如果您的文件相对较小，假设 <50MB 这是一个矫枉过正。不仅如此，您还可以考虑维护索引文件。您基本上必须权衡额外 IO 调用（即读取索引文件）的性能与仅从文件流中读取每一行的性能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T09:08:07.680

据我了解，您想要处理一些文件，并在处理后找出哪些文件包含“**”符号，而无需读取文件的每一行。

如果您将“**”附加到文件末尾，您可以执行以下操作：

```
using (StreamReader sr = new StreamReader(File.OpenText(fileName)))
{
    sr.BaseStream.Seek(-3, SeekOrigin.End);
    string endToken = sr.ReadToEnd();
    if (endToken == "**\n")
    {
        // if needed, go back to start of file:
        sr.BaseStream.Seek(0, SeekOrigin.Begin);
            // do something with the file
    }
} 
```

# c# - HttpWebRequest - 按块发送文件并跟踪进度

> ID：10188054
> 
> 赞同：0
> 
> 时间：2012-04-17T08:52:41.873
> 
> 标签：c#, http, sockets, file-upload, httpwebrequest

我有以下代码通过发出 POST 请求将文件上传到服务器：

```
string fileName = @"C:\Console_sk.txt";

HttpWebRequest request = (HttpWebRequest) HttpWebRequest.Create("http://" + Environment.MachineName + ":8000/Upload");
request.Method = "POST";
request.ContentType = "text/plain";
request.AllowWriteStreamBuffering = false;

Stream fileStream = new FileStream(fileName, FileMode.Open);
request.ContentLength = fileStream.Length;

Stream serverStream  = request.GetRequestStream();

byte[] buffer = new byte[4096];
while (true)
{
    int bytesRead = fileStream.Read(buffer, 0, buffer.Length);
    if (bytesRead > 0)
    {
        serverStream.Write(buffer, 0, bytesRead);     
    }
    else
    {
        break;
    }
}

serverStream.Close();
fileStream.Close();

request.GetResponse(); 
```

这将用于上传潜在的大文件，因此我们必须跟踪此上传的进度。

基于[各种来源](http://social.msdn.microsoft.com/Forums/eu/netfxnetcom/thread/6ead3249-c31b-49b5-bded-8ea182b81607)，我认为我的代码将以 4096 字节块上传文件，即将发出多个 POST 请求。但是在使用 Fiddler 跟踪请求时，它显示只发出了一个 POST 请求。另一方面，当我启用[.NET 网络跟踪](http://msdn.microsoft.com/en-us/library/ty48b824.aspx)时，生成的日志显示确实将 4096 字节块写入请求流，并且每次写入操作始终打开套接字。

总的来说，我对网络的理解很差，所以我不太明白它是如何工作的。调用`serverStream.Write`时，提供的块是真的通过网络发送的，还是只是在某个地方缓冲？当`serverStream.Close`被调用时，我可以确定整个文件已经上传了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T08:56:06.853

该类`HttpWebRequest`发送**单个**HTTP 请求。您正在做的是分块写入请求以避免将整个文件加载到内存中。您正在读取文件并以 4KB 的块直接写入请求流。

> 调用 serverStream.Write 时，提供的块是否真的通过网络发送

是的，它被写入网络套接字。

# wpf - WPF 中的 Windows 窗体控件包装无法正常工作

> ID：10188057
> 
> 赞同：1
> 
> 时间：2012-04-17T08:52:56.923
> 
> 标签：wpf, winforms, data-binding, datepicker

我需要包装 Windows 窗体`DateTimePicker`以在我的 WPF 3.5 应用程序中使用它。我已经控制了它：

```
<UserControl><WindowsFormsHost>
<wf:DateTimePicker x:Name="picker" ValueChanged="DateTimePicker_ValueChanged"/>
</WindowsFormsHost></UserControl> 
```

这是支持代码：

```
 bool suppressUpdates;

    public DatePicker()
    {
        InitializeComponent();
    }

    private void DateTimePicker_ValueChanged(object sender, EventArgs e)
    {
        if(!suppressUpdates)
            SetValue(SelectedDateProperty, picker.Value);
    }

    public DateTime SelectedDate
    {
        get {return (DateTime)GetValue(SelectedDateProperty); }
        set
        {
            suppressUpdates = true;
            picker.Value = value;
            SetValue(SelectedDateProperty, value);
            suppressUpdates = false;
        }
    }

    public static readonly DependencyProperty SelectedDateProperty =
    DependencyProperty.Register("SelectedDate", typeof(DateTime),
   typeof(DatePicker), new UIPropertyMetadata(DateTime.Now)); 
```

然后我在 WPF 窗口中使用它：

```
<mui:DatePicker Width="300" SelectedDate="{Binding
Path=TheDate, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/> 
```

它绑定到`INotifyPropertyChanged`启用的视图模型。所有其他控件都很好地绑定到它，但我的 DateTimePicker 没有获得视图模型中指定的日期值。但是，它将其值更改传播回给它。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T09:33:17.573

好的，这很简单。

```
 private void DateTimePicker_ValueChanged(object sender, EventArgs e)
    {
        SetValue(SelectedDateProperty, picker.Value);
    }

    public DateTime SelectedDate
    {
        get { return (DateTime)GetValue(SelectedDateProperty); }
        set { SetValue(SelectedDateProperty, value); }
    }

    public static readonly DependencyProperty SelectedDateProperty =
        DependencyProperty.Register("SelectedDate", typeof(DateTime), typeof(DatePicker), new UIPropertyMetadata(DateTime.Now, textChangedCallback));

    private static void textChangedCallback(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        DatePicker input = (DatePicker)d;
        input.picker.Value = (DateTime)e.NewValue;
    } 
```

# javascript - 使用 JavaScript 模拟点击

> ID：10188058
> 
> 赞同：0
> 
> 时间：2012-04-17T08:53:01.140
> 
> 标签：javascript, dom-events, simulate

我有一个调度程序控件，以及一些可以拖到调度程序中的 div，它们是两个单独的控件，现在我有一个问题，我成功地制作了拖放事件，当我放下时我创建了一个警报以获取坐标下降见下面的img：

![在此处输入图像描述](../Images/f8d78f37a4d65d14c61209fa08d07619.png)

现在我需要做的是模拟一个点击事件，所以当用户进行删除时，会触发一个自动点击事件（触发调度程序的添加新事件功能）......有人知道如何实现这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T08:58:33.980

> 现在我需要做的是模拟一个点击事件，所以当用户进行删除时，会触发一个自动点击事件（触发调度程序的添加新事件功能）......有人知道如何实现这一点吗？

不要试图模拟`click`; 相反，让`click`事件和`drop`事件都调用一个可重用的中心函数。虽然您可能出于正当理由想要模拟`click`事件，但通常这不是您解决此类问题的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T08:57:54.453

在外部定义处理程序。而不是`... ('click', function(event){})`do`var handler = function(event){}; ... ('click', handler)`然后你可以轻松地 do `handler.call(this,event);`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T09:08:38.570

任何类型的 Pub/Sub 系统都会以更松散耦合的方式处理此问题。[对于 jQuery，在https://gist.github.com/661855](https://gist.github.com/661855)上有一个非常小但很好的

如果您使用任何其他框架，您可能会找到适合您的其他框架。

# mysql - SQL 查询 Join with datetime inside

> ID：10188060
> 
> 赞同：0
> 
> 时间：2012-04-17T08:53:06.603
> 
> 标签：mysql, sql

我需要管理一些数据并检索我无法做到的结果。

```
Table1
id int
idcat int (related to the table2)
tt varchar
dt datetime

Table2
idcat int
days int 
```

我需要的是检索不超过与每个（）相关的天数的**所有记录。** `table1``category``idcat`

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T08:59:36.340

```
SELECT * from Table1 a join Table2 b on a.idcat = b.idcat where DATEDIFF(NOW(), dt)<=b.days 
```

应该为您提供每个类别中不超过天数的所有记录

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T09:04:46.963

我不确定我的以下查询是否有效，但这就是需要实现逻辑的方式。我已将我的 SQL Server 查询修改为 MySQL，因此我不确定。

```
SELECT * from Table1 a join Table2 b on a.idcat = b.idcat where DATE_ADD(NOW(), INTERVAL b.days DAY) 
```

您可以使用`DATE_ADD()`功能尝试以下查询。

```
SELECT DATE_ADD('2008-12-15', INTERVAL b.days DAY) 
```

# wpf - 如何使用 ItemsControl 进行分配 ?

> ID：10188062
> 
> 赞同：1
> 
> 时间：2012-04-17T08:53:12.543
> 
> 标签：wpf, mvvm, mvvm-light, wpfdatagrid

我在控件中有一个数据网格（此处：DataGridSelectorControl），我想使用 ItemTemplate 创建它的库。实际上我想做这样的事情：

```
 <DataGrid  x:Name="grd" ItemsSource="{Binding Source={StaticResource theSource}}" AutoGenerateColumns="False"  >
                <DataGrid.Columns>
                <ItemsControl ItemsSource="{Binding DataGridColumnItems}">
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <StackPanel Orientation="Horizontal" />
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                </ItemsControl>
                </DataGrid.Columns>
            </DataGrid> 
```

我想知道有没有办法为 DataGrid.Columns 使用 ItemsControl？我想这样做是因为我想像这样使用这个控件：（我想在创建这个控件的实例时定义 DataGridTextColumns）

```
<control:DataGridSelectorControl Grid.Row="1">
        <control:DataGridSelectorControl.DataGridColumnItems>
                <DataGridTextColumn Header="نام"  Width="20"></DataGridTextColumn>
                <DataGridTextColumn Header="ParentID" Width="20"></DataGridTextColumn>
        </control:DataGridSelectorControl.DataGridColumnItems>
    </control:DataGridSelectorControl> 
```

和 DataGridColumnItems 是一个连接属性：

```
 public static readonly DependencyProperty DataGridTextColumnItemsProperty = DependencyProperty.Register("DataTextColumnItems", typeof(DataGridColumn), typeof(DataGridSelectorControl));
    public DataGridColumn DataGridColumnItems
    {
        get
        {
            return (DataGridColumn)GetValue(DataGridTextColumnItemsProperty);
        }
        set
        {
            SetValue(DataGridTextColumnItemsProperty, value);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T10:46:35.760

DataGrid.Columns 是 ObservableCollection 类型，试试这样的：

```
 public static readonly DependencyProperty DataGridTextColumnItemsProperty=DependencyProperty.Register("DataTextColumnItems", typeof(ObservableCollection<DataGridColumn>), typeof(DataGridSelectorControl)))); 
    public ObservableCollection<DataGridColumn> DataGridColumnItems 
    { 
        get 
        { 
            return (ObservableCollection<DataGridColumn>)GetValue(DataGridTextColumnItemsProperty); 
        } 
        set 
        { 
            SetValue(DataGridTextColumnItemsProperty, value); 
        } 
    }

  <DataGrid  x:Name="grd" ItemsSource="{Binding Source={StaticResource theSource}}" AutoGenerateColumns="False" Columns={Binding DataGridTextColumnItems, RelativeSource={RelativeSource AncestorType=DataGridSelectorControl}}> 
            </DataGrid> 
```

# jar - clojure：解压缩存储为资源的 zip 文件

> ID：10188063
> 
> 赞同：6
> 
> 时间：2012-04-17T08:53:21.277
> 
> 标签：jar, clojure, zip

我一直在努力阅读我的 lein 项目中资源目录的内容。我现在明白（在做错了一段时间之后）使用 clojure.java.io/resource 来提取资源，因为仅使用文件系统在打包为 jar 时不起作用：

```
> (require '[clojure.java.io :as io])
> (def zipzip (.openStream (io/resource "zip.zip"))) 
```

这会返回一个`BufferedInputStream`. 我想要做的是获取这个 zip 文件并将其解压缩到本地目录。我做不出`ZipFile`来，但我可以做一个`ZipInputStream`。不幸的是，虽然我可以`ZipEntries`摆脱这种情况，但我需要`ZipFile`真正阅读`ZipEntry`. 我可以做这个：

```
> (-> zipzip ZipInputStream. .getNextEntry .getName) 
```

这将返回名称，但 api 文档中没有任何内容可以`ZipEntry`使用`ZipInputStream`!

如何将其中的内容写出`ZipInputStream`到本地目录？（当将代码打包到 jar 中时也可以使用！）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-17T09:28:24.533

`ZipInputStream`在获得下一个条目后，您可以简单地阅读。使用条目中的大小信息来读取内容。

```
user=> (import 'java.util.zip.ZipInputStream)
java.util.zip.ZipInputStream
user=> (def zs (ZipInputStream. (io/input-stream "foo.zip")))
#'user/zs
user=> (def ze (.getNextEntry zs))
#'user/ze
user=> (.getName ze)
"foo.txt"
user=> (.getSize ze)
21
user=> (let [bytes (byte-array 21)] (.read zs bytes 0 21) (String. bytes "UTF-8"))
"Das ist ein Test!\r\n\r\n" 
```

# c# - 如何将每个句子的第一个字母大写并让用户有机会将字母更改为更低？

> ID：10188064
> 
> 赞同：0
> 
> 时间：2012-04-17T08:53:27.317
> 
> 标签：c#, console-application, capitalize, sentence

我在标点符号后实现了大写。但是如何实现它，用户可以返回并删除第一个单词或字符，因为他想继续小写？

```
KeyPress(object sender, KeyPressEventArgs e)
{
   if(EndOfSentence())
   {
       e.KeyChar = Char.ToUpper(e.Keychar);
   }
}
//
private bool EndOfSentence()
{
  //return true if end of sentence found
} 
```

例：如果我写这句话。我不能回去把“我”改成“我”！而且我不能将“A”更改为“a”，但我想！如何编码？

此处的示例项目：[http ://www.filefactory.com/file/3ecbn51bhbrv/n/Capi.zip](http://www.filefactory.com/file/3ecbn51bhbrv/n/Capi.zip)

我看到的唯一解决方案是保存当前和上一个键并检查是否按下了退格键或删除键，例如：

```
if (!EndOfSentence())
{
  previousKeyChar = e.KeyChar;
  return;
}
//
if(previousKeyChar.Equals('\b')) return;
else
e.KeyChar = Char.ToUpper(e.KeyChar);
//
//
// And in the EndOfSentence I Check
// if the cursor is at the end of the text
if(textbox1.Text.Length != textbox1.SelectionStart)
  return false; //allow editing in the middle of the text 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T08:56:25.117

There may be better ways, but one is to store the entire sentence in a collection and check against the collection before modifying it again.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T09:05:05.933

或者，您可以尝试将`EndOfSentence`函数更改为仅在输入结束时才返回 true。这样，它应该只大写在输入末尾键入的字符，如果您在文本中间编辑某些内容，它应该保持不变

# c# - RegAsm 的真正作用是什么？文件复制到哪里？

> ID：10188067
> 
> 赞同：8
> 
> 时间：2012-04-17T08:53:37.223
> 
> 标签：c#, dll, regasm, dllregistration, ie-plugins

我们有一个基于 spicIE 的 IE 插件，目的是连接一些外部设备。

为了连接到这些外部设备，另一家公司开发了他们的令牌和 DLL。我们需要一些 ActiveX 和 DLL 来通过令牌进行身份验证。

问题是我们为 IE 开发的插件，最后有一个 install.bat 文件，它运行 RegAsm 并注册 DLL，然后在 IE 中可以查看该插件（或其更改）。

从 IE 运行插件时，我们的代码找不到一些 DLL，需要进行身份验证（将其命名为 x.dll）。注册的DLL复制到哪里？真的是抄的吗？我需要在我的插件的 DLL 所在的文件夹中有 x.dll。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-17T09:02:33.267

简而言之，RegAsm 将您的 .NET 程序集注册为 COM 可查看的。来自 MSDN：一旦注册了一个类，任何 COM 客户端都可以使用它，就好像该类是一个 COM 类一样。该类仅在安装程序集时注册一次。在实际注册之前，不能从 COM 创建程序集中的类实例。

如果我没有在 ActiveX 中看到您的代码，如果我理解正确，您的 ActiveX 依赖于一些 COM DLL，这就是您针对 .NET DLL 运行 RegAsm 的原因。

运行[RegDllView](http://www.nirsoft.net/utils/registered_dll_view.html)以查找已注册内容的详细信息，然后检查您是否确实实例化了实际上已注册的对象。

此外，如果您仍然有问题，请尝试在 VB6/Visual Studio 2010 等中实例化对象或在早期绑定中的等效项，看看您是否有任何问题。检查实例化错误。

# delphi - 将 SQL 登录凭据传递给 Delphi Datasnap 服务器的最有效方法？

> ID：10188071
> 
> 赞同：5
> 
> 时间：2012-04-17T08:54:02.083
> 
> 标签：delphi, datasnap

使用 Delphi XE 使用 Datasnap 构建一个相对简单的数据库应用程序。

由于我的应用程序中的某些安全性是在数据库级别处理的，因此我需要将用户的 SQL 凭据从我的客户端应用程序传递到我的 Datasnap 服务器。

（如果可能，我正在尝试使 Datasnap 服务器无状态，因此请认识到我必须为每次调用都这样做。）

我在客户端使用 ClientDatasets (CDS)，因此我可以使用 OnBeforeGetRecords 将 OwnerData OleVariant 中的数据从客户端上的 CDS 传递到服务器上相应的 TDataSetProvider。但这意味着每个数据模块上的每个 CDS 都必须有一个执行此操作的事件，这看起来很混乱且笨拙。我不禁感到必须有一种方法可以将消息传递到更高级别的服务器。

我真正想要的是在服务器端的 DSServerClass 级别是这样的：

```
Procedure TMyServerContainer.MyServerClassCreateInstance(DSCreateInstanceEventObject: TDSCreateInstanceEventObject); 
begin 
// Server detects request for data from client app 
fUsername := GetUsernameFromClientSomehow; 
fPassword := GetPasswordFromClientSomehow;

// create data modules and initialise
MyDataModule := TMyDataModule.Create(nil); 
MyDataModule.InitialiseWithSQLCredentials(fUsername, fPassword); 
DSCreateInstanceEventObject.ServerClassInstance := MyDataModule; 
End; 
```

身份验证管理器组件可以在这里帮助我吗？还有其他想法吗？还是我坚持使用 OnBeforeGetRecords？

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T12:25:13.960

您可以使用 SQL 凭据作为用户名和密码来连接到 DataSnap 服务器。这些值可以在身份验证管理器中验证和/或简单地转发到底层 SQLConnection 组件以连接到 SQL 服务器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T13:02:53.843

最安全的方法是传递用户安全令牌（加密），然后在服务器端使用集成安全性，在线程中模拟调用用户安全上下文。这样就不会通过网络发送任何用户/密码。不幸的是，虽然 MS/DCE RPC 可以为每个调用（以及构建在 RPC 之上的 DCOM）执行此操作，但 Datasnap 不能（对于 Embarcadero 的人来说，SPNEGO/GSSAPI/SSPI 看起来很复杂，他们喜欢简单、不安全的协议）。否则，通过网络发送凭证的方式要非常小心，除非*得到适当*的保护，否则它们很容易被嗅探。

无论如何，我建议您只发送一次，如果您需要（并且以最受保护的方式），然后将它们保护在服务器端（使用受 Windows 保护的存储设施），然后发送回客户端句柄/会话令牌（绑定到原始 IP），用于后续调用，而不是每次都重新发送凭据。当用户注销或会话超时时，信息将被清除。

# cakephp - Cakephp 模型错误

> ID：10188072
> 
> 赞同：1
> 
> 时间：2012-04-17T08:54:14.383
> 
> 标签：cakephp

在 cakephp 2.1 中创建编辑功能时我遇到了一个奇怪的问题

错误类型：非法偏移类型 [CORE\Cake\Model\Model.php，第 2689 行]

我的 edit.ctp 文件是

```
<?php echo $this->Form->create('Task');?>
<fieldset>
<legend>Edit Task</legend>

<?php
   echo $this->Form->hidden('id');
   echo $this->Form->input('title');
   echo $this->Form->input('done');
?>

</fieldset>
<?php echo $this->Form->end('Save');?> 
```

模型：Task.php

```
 <?php
    class Task extends AppModel {
        var $name = 'Task';
    }
    ?> 
```

控制器：TasksController.php

```
 <?php

        class TasksController extends AppController {
            var $name = 'Tasks';
            var $helpers = array('Html', 'Form');
            function index() {
                $this->set('tasks', $this->Task->find('all'));
            }
            function add() {
                if (!empty($this->data)) {

                $this->Task->create();
                if($this->Task->save($this->data)){
                    $this->Session->setFlash('The Task has been saved');
                    $this->redirect(array('action'=>'index'),null,true);
                }else{
                    $this->Session->setFlash('Task not saved.Try again.');
                }      

            }
        }
        function edit($id = null) {
            if (!$id) {
                $this->Session->setFlash('Invalid Task');
                $this->redirect(array('action' => 'index'), null, true);
            }
            if (empty($this->data)) {
                $this->data = $this->Task->find(array('id' => $id));
            } else {
                if ($this->Task->save($this->data)) {
                    $this->Session->setFlash('The Task has been saved');
                    $this->redirect(array('action' => 'index'), null, true);
                } else {
                    $this->Session->setFlash('The Task could not be saved.Please, try again.');
                }
            }
        }
    }

?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T09:14:39.900

我认为你的`find()`方法是错误的：

```
$this->data = $this->Task->find(array('id' => $id)); 
```

改成

```
$this->data = $this->Task->find('all', array('conditions' => array('id' => $id))); 
```

[http://book.cakephp.org/2.0/en/models/retrieving-your-data.html](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-05T12:26:23.823

为了在表单上预填充数据，您需要执行以下操作：

```
<?php echo $this->Form->create('Task');?>
<fieldset>
<legend>Edit Task</legend>
<?php
echo $this->Form->hidden('id', array('value' => $this->data[0]['Task']['id']));
echo $this->Form->input('title', array('value' => $this->data[0]['Task']['title']));
echo $this->Form->input('done', array('value' => $this->data[0]['Task']['done']));
//var_dump($this->data[0]['Task']['id']);
?>
</fieldset>
<?php echo $this->Form->end('Save');?>
<?php echo $this->Html->link('List All Tasks', array('action'=>'index')); ?><br />
<?php echo $this->Html->link('Add Task', array('action'=>'add')); ?><br />
<?php echo $this->Html->link('List Done Tasks', array('action'=>'index')); ?><br />
<?php echo $this->Html->link('List Pending Tasks', array('action'=>'index')); ?><br /> 
```

# ravendb - RavenDB IIS 身份验证/授权

> ID：10188073
> 
> 赞同：3
> 
> 时间：2012-04-17T08:54:15.480
> 
> 标签：ravendb

我有一个 RavenDB imho 应该可以实现的场景，但我找不到任何可以帮助我实现这一点的信息。

我已将 RavenDB 作为 IIS 应用程序部署到我的常规主机中。我没有专用服务器，所以这几乎是我拥有的所有选项。另一种选择是使用嵌入式 RavenDB 创建 Web 应用程序，我认为这更复杂，我现在想保持简单。将 RavenDB 作为 IIS 应用程序似乎非常方便。

我希望一些用户能够登录到 RavenDB 应用程序并编辑文档。其他用户（匿名）只能读取数据。

我发现应用程序中有 2 个可选捆绑包： Raven.Bundles.Authentication.dll Raven.Bundles.Authorization.dll 不幸的是，该捆绑包的文档不够完整 :(

这是我的目标描述：[http ://www.youtube.com/watch?v=bS4UMp12PZM&feature=player_detailpage#t=899s](http://www.youtube.com/watch?v=bS4UMp12PZM&feature=player_detailpage#t=899s)

所以问题是：

*   如何在 RavenDB 中存储用户信息并根据这些信息进行身份验证？
*   如何授予特定用户对文档集合的编辑权限？
*   如何向某些特定用户授予所有（管理员）权限？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T09:14:58.003

以下是您可以关注的一些资源：

RavenDB 的身份验证选项
[http://www.youtube.com/watch?v=bS4UMp12PZM](http://www.youtube.com/watch?v=bS4UMp12PZM)

授权包
[http://ravendb.net/docs/server/bundles/authorization](http://ravendb.net/docs/server/bundles/authorization)
[http://ravendb.net/docs/server/bundles/authorization-bundle-design](http://ravendb.net/docs/server/bundles/authorization-bundle-design)

**编辑**
对于简单的情况，使用[应用程序用户而不是数据库用户](http://ayende.com/blog/121857/system-users-and-application-users)。
存储`User`实体并根据它对用户进行身份验证。每个用户都应该有一个用户类型属性，该属性说明具有哪些权限。而不是控制用户可以在应用程序级别执行的操作，而不是在数据库级别。

# css - CSS：在 IE7 中重置“正确”属性？

> ID：10188077
> 
> 赞同：2
> 
> 时间：2012-04-17T08:54:25.433
> 
> 标签：css, internet-explorer-7

这是在制作与 IE7 兼容的网站的过程中。

主 css 文件为 div 定义了一个“正确”属性。使用 IE7 中的开发人员工具，我可以通过取消选中该 div 上的“正确”属性来解决显示问题。我了解需要在 ie7 特定样式表中为该 div 指定默认属性。

我读到“自动”是默认值。那（也不是“none”，“0”）与取消选中开发人员工具“样式”面板中的属性具有相同的效果。

我应该如何进行？谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T08:58:25.573

what if you just set it to blank. as in ''

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T10:40:03.690

要在 jquery 中重置样式，您可以这样做

```
$('#myelementid').css('right',''); 
```

你可以试试这个，然后在 chrome 开发工具或 firebug 中检查元素，看看 jquery 如何重置它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T10:42:42.787

该`right`属性的初始值为`auto`。

如果这不起作用，您很可能遇到了特定性问题，即另一个 CSS 规则优先于您正在编辑的规则。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-17T12:37:40.840

解决方法：将“right”属性替换为“margin-right”，使用最近的浏览器提供相同的结果（在这种情况下）。IE7 不再无法正确渲染元素，并且 margin-right 可以正常工作。

# ios - ScrollView 太慢 – 内存管理问题？

> ID：10188079
> 
> 赞同：1
> 
> 时间：2012-04-17T08:54:26.617
> 
> 标签：ios, xcode, memory-management

在我的应用程序中，我使用滚动视图显示 300 张图像 (400 kB)。这需要将近 2 分钟，结果，当我上下滚动时，它并不流畅。

*我怎么解决这个问题？*

**注意：**我注意到在我向下滚动到滚动视图的末尾一次后，它变得平滑。滚动问题仅在第一次出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T08:59:18.657

不要预先加载所有图像。只需加载当前要显示的图像和下一张+最后一张图片。

据我了解，您在加载/显示滚动视图时加载所有图像。由于您有很多图像，因此如果您仅在内存中加载/拥有三个图像，它将更快并节省更多内存。这将是上一个/左显示的图像并且不可见 - 当前显示和可见的图像以及下一个/右图像不可见。

因此，如果您向左移动/滑动，您基本上将滚动视图向左移动并显示已加载的右侧图像。在后台，您将加载下一个右侧图像，同时释放最左侧的图像。

在任何时候，您最多只能加载 4 张图像。

看看 WWDC 2011 的无限滚动视图示例 - 会话 104 高级滚动视图以获得良好的视觉示例和示例代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T09:49:52.563

尝试将其添加到您的加载函数（加载图像的位置）中。如果您使用 while 或 for 循环来加载图像，请将此代码添加到循环中。

```
NSURL *url=//here url for your image   
dispatch_queue_t currentQueue = dispatch_get_current_queue();
dispatch_queue_t dataConvertorQueue = dispatch_queue_create("Fetching images", NULL);
dispatch_async(dataConvertorQueue, ^{
    NSData *data = [NSData dataWithContentsOfURL:url];
    dispatch_async(currentQueue, ^{
       //replace imageView with your imageView outlet
       imageView.image = [[UIImage alloc] initWithData:data]];
    });
});
dispatch_release(dataConvertorQueue); 
```

此代码可帮助您从 url 获取和显示图像，并且它适用于 tableview。它可能不是你想要的，但它会给你一个关于如何去做的想法。希望它会帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T09:16:25.000

我认为[这](http://developer.apple.com/library/ios/#samplecode/PhotoScroller/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010080-Intro-DontLinkElementID_2)将解决您的问题。这个问题可能会给你一些背景信息：

[如何像 uitableviewcell 一样重用/回收自定义元素？](https://stackoverflow.com/questions/4914427/how-to-reuse-recycle-custom-custom-element-like-uitableviewcell-does)

# performance - 平均处理速度越来越慢

> ID：10188084
> 
> 赞同：3
> 
> 时间：2012-04-17T08:54:40.400
> 
> 标签：performance, r, process

我英语说的不好。所以我请求你的耐心和编辑。

我分析了韩国的人口普查数据。我使用“adaboost”作为分析方法，并为每个城市实施了 adaboost。目标变量、自变量、公式、选项、观察次数等，城市之间都一样。没有区别。我做了一个宏，为城市一个一个实现adaboost。在开始分析下一个城市之前，宏会移除除自身之外的所有对象。

我发现随着时间的推移，平均处理速度越来越慢。我的意思是，1-30 号城市的平均所需时间约为 10 分钟，而 80-100 号城市则为 25 分钟。所以我终止了 R 会话并重新打开。我从第 80 个城市重新运行宏，然后将 80-100 个城市的平均时间减少到 10 分钟。

为什么会这样？我怎么解决这个问题？我需要你的帮助。提前致谢。

* * *

r 代码和宏如下。'sgg' 宏变量表示城市代码。目标变量有六个类别。所以我使用'one-others'方法进行多类分类。

```
memory.limit(size=4095)

library(gbm)
library(gtools)

dbset<-strmacro(sgg,sampnum,
 expr=
 {
 setwd("C:\\Users\\Kim\\Desktop\\JQ\\");
 db.sgg<-read.table('sgg.TXT', header=TRUE);
 db.sgg<-subset(db.sgg, AGE>=10)

 N<-nrow(db.sgg);
 if(N>=sampnum)
  {
  db.sgg<-db.sgg[sample(1:N, sampnum),]
  };

 db.sgg$SEX<-factor(letters[db.sgg$SEX])

 ordered(db.sgg$AREA);

 db.sgg$josagu_attri_mod2<-factor(letters[db.sgg$josagu_attri_mod])
 db.sgg$geocheo_type_mod2<-factor(letters[db.sgg$geocheo_type_mod])
 db.sgg$dandok_type_mod2<-factor(letters[db.sgg$dandok_type_mod])

 colnames(db.sgg)[10:15]<-c('FLC3.1','FLC3.3','FLC3.4','FLC3.5','FLC3.6','FLC3.7');
 }
 );

train<-strmacro(i, sgg,
expr={
   res.sgg.i<-gbm(FLC3.i~SEX+AREA+AGE+josagu_attri_mod2+geocheo_type_mod2+dandok_type_mod2,
    data=db.sgg, distribution='adaboost', n.trees=3000,shrinkage = 0.005,
    cv.folds=5, keep.data=TRUE,
    bag.fraction=0.7, interaction.depth=3);
   BI.sgg.i<-gbm.perf(res.sgg.i, method='cv');
   PRED.sgg.i<-predict.gbm(res.sgg.i, db.sgg, BI.sgg.i);
    }
    );

clean<-strmacro(sgg,
    expr={
        rm(BI.sgg.1);rm(BI.sgg.3);rm(BI.sgg.4);rm(BI.sgg.5);rm(BI.sgg.6);rm(BI.sgg.7);
        rm(res.sgg.1);rm(res.sgg.3);rm(res.sgg.4);rm(res.sgg.5);rm(res.sgg.6);rm(res.sgg.7);
        rm(PRED.sgg.1);rm(PRED.sgg.3);rm(PRED.sgg.4);rm(PRED.sgg.5);rm(PRED.sgg.6);rm(PRED.sgg.7);
        rm(db.sgg);
        }
        );

all<-strmacro(sgg,num,
    expr={
      dbset(sgg,num);
      train(1,sgg);train(3,sgg);train(4,sgg);train(5,sgg);train(6,sgg);train(7,sgg);
      clean(sgg);
        }
    );

all(11010,3000)
all(11020,3000)
all(11030,3000) 
```

* * *

数据如下。此数据存储在“11010.txt”中。

```
 C3    mem_num josagu_attri_mod    SEX AGE geocheo_type_mod    dandok_type_mod C97 FLC3    FLC3_1  FLC3_3  FLC3_4  FLC_4   FLC3_6  FLC3_7  AREA
1   3   3   1   14  1   1   49  3   0   0   1   0   0   0   2
1   1   1   2   44  1   1   49  3   0   0   1   0   0   0   2
2   1   1   1   67  1   1   46  6   0   0   0   0   0   1   2
2   2   2   2   60  1   1   46  6   0   0   0   0   0   1   2
3   1   1   2   65  1   1   49  6   0   0   0   0   0   1   2
4   1   1   1   66  1   4   16  6   0   0   0   0   0   1   1
4   2   2   2   61  1   4   16  6   0   0   0   0   0   1   1
5   1   1   2   32  1   6   15  1   1   0   0   0   0   0   1
7   2   2   1   55  1   6   59  5   0   0   0   0   1   0   2
7   4   3   1   23  1   6   59  5   0   0   0   0   1   0   2
7   1   1   2   50  1   6   59  5   0   0   0   0   1   0   2
7   3   3   2   24  1   6   59  5   0   0   0   0   1   0   2
8   1   1   1   68  1   1   46  6   0   0   0   0   0   1   2
8   2   2   2   64  1   1   46  6   0   0   0   0   0   1   2
9   1   1   1   57  1   1   59  5   0   0   0   0   1   0   2
9   2   2   2   55  1   1   59  5   0   0   0   0   1   0   2
9   3   3   2   28  1   1   59  5   0   0   0   0   1   0   2
10  2   3   1   17  1   6   16  4   0   0   0   1   0   0   1
10  1   1   2   41  1   6   16  4   0   0   0   1   0   0   1
12  1   1   2   24  1   6   16  1   1   0   0   0   0   0   1
14  1   1   1   72  2   1   119 6   0   0   0   0   0   1   4
14  2   2   2   72  2   1   119 6   0   0   0   0   0   1   4
17  2   2   1   42  1   4   50  3   0   0   1   0   0   0   2
17  1   1   2   41  1   4   50  3   0   0   1   0   0   0   2
19  1   1   1   36  1   4   50  2   0   1   0   0   0   0   2
19  2   2   2   27  1   4   50  2   0   1   0   0   0   0   2
20  2   2   1   52  1   1   50  5   0   0   0   0   1   0   2
20  3   3   1   21  1   1   50  5   0   0   0   0   1   0   2
20  4   3   1   24  1   1   50  5   0   0   0   0   1   0   2
20  1   1   2   50  1   1   50  5   0   0   0   0   1   0   2
21  1   1   1   38  1   6   59  3   0   0   1   0   0   0   2
21  5   3   1   14  1   6   59  3   0   0   1   0   0   0   2
21  2   2   2   39  1   6   59  3   0   0   1   0   0   0   2
21  3   3   2   13  1   6   59  3   0   0   1   0   0   0   2
22  1   1   1   42  1   4   50  2   0   1   0   0   0   0   2
22  2   2   2   37  1   4   50  2   0   1   0   0   0   0   2
23  1   1   2   70  1   6   50  6   0   0   0   0   0   1   2
24  1   1   2   49  1   4   50  5   0   0   0   0   1   0   2
24  2   3   2   22  1   4   50  5   0   0   0   0   1   0   2
25  1   1   1   67  4   1   66  5   0   0   0   0   1   0   2
25  4   3   1   41  4   1   66  5   0   0   0   0   1   0   2
25  2   2   2   66  4   1   66  5   0   0   0   0   1   0   2
25  3   3   2   43  4   1   66  5   0   0   0   0   1   0   2
27  1   1   1   81  1   1   43  6   0   0   0   0   0   1   2
27  2   2   2   80  1   1   43  6   0   0   0   0   0   1   2
29  1   1   1   48  1   2   43  4   0   0   0   1   0   0   2
29  3   3   1   17  1   2   43  4   0   0   0   1   0   0   2
29  2   2   2   45  1   2   43  4   0   0   0   1   0   0   2
29  4   3   2   15  1   2   43  4   0   0   0   1   0   0   2
32  1   1   1   67  2   1   85  6   0   0   0   0   0   1   3
32  2   2   2   60  2   1   85  6   0   0   0   0   0   1   3
33  1   1   1   30  2   1   82  2   0   1   0   0   0   0   3
33  2   2   2   30  2   1   82  2   0   1   0   0   0   0   3
34  1   1   1   55  2   1   85  5   0   0   0   0   1   0   3
34  2   2   2   48  2   1   85  5   0   0   0   0   1   0   3
34  3   3   2   28  2   1   85  5   0   0   0   0   1   0   3
37  1   1   1   55  2   4   82  5   0   0   0   0   1   0   3
37  3   3   1   21  2   4   82  5   0   0   0   0   1   0   3
37  2   2   2   51  2   4   82  5   0   0   0   0   1   0   3
38  1   1   1   41  2   4   50  2   0   1   0   0   0   0   2
38  2   2   2   32  2   4   50  2   0   1   0   0   0   0   2
40  2   3   1   14  2   1   50  4   0   0   0   1   0   0   2
40  1   1   2   45  2   1   50  4   0   0   0   1   0   0   2
40  3   3   2   15  2   1   50  4   0   0   0   1   0   0   2
41  1   1   1   46  2   4   40  4   0   0   0   1   0   0   2
41  3   3   1   17  2   4   40  4   0   0   0   1   0   0   2
41  2   2   2   44  2   4   40  4   0   0   0   1   0   0   2
41  4   3   2   14  2   4   40  4   0   0   0   1   0   0   2
42  2   3   1   17  2   6   50  5   0   0   0   0   1   0   2
42  1   1   2   41  2   6   50  5   0   0   0   0   1   0   2
42  3   3   2   18  2   6   50  5   0   0   0   0   1   0   2
43  1   1   1   34  2   4   50  2   0   1   0   0   0   0   2
43  2   2   2   35  2   4   50  2   0   1   0   0   0   0   2
44  1   1   1   46  2   1   40  4   0   0   0   1   0   0   2
44  2   2   2   44  2   1   40  4   0   0   0   1   0   0   2
44  3   3   2   13  2   1   40  4   0   0   0   1   0   0   2
45  1   1   1   43  2   1   72  3   0   0   1   0   0   0   3
45  2   2   2   38  2   1   72  3   0   0   1   0   0   0   3
45  3   3   2   12  2   1   72  3   0   0   1   0   0   0   3
46  1   1   1   55  2   4   61  4   0   0   0   1   0   0   2
46  3   3   1   19  2   4   61  4   0   0   0   1   0   0   2
46  2   2   2   54  2   4   61  4   0   0   0   1   0   0   2
46  4   3   2   18  2   4   61  4   0   0   0   1   0   0   2
47  1   1   1   30  2   4   61  1   1   0   0   0   0   0   2
47  2   2   2   30  2   4   61  1   1   0   0   0   0   0   2
48  1   1   1   64  2   4   72  5   0   0   0   0   1   0   3
48  2   2   2   54  2   4   72  5   0   0   0   0   1   0   3
48  3   3   2   23  2   4   72  5   0   0   0   0   1   0   3
49  1   1   1   39  2   4   61  3   0   0   1   0   0   0   2
49  2   2   2   36  2   4   61  3   0   0   1   0   0   0   2
50  1   1   1   63  2   1   72  6   0   0   0   0   0   1   3
50  2   2   2   59  2   1   72  6   0   0   0   0   0   1   3
52  1   1   2   53  2   6   58  5   0   0   0   0   1   0   2
52  2   3   2   26  2   6   58  5   0   0   0   0   1   0   2
53  2   3   1   45  2   1   58  5   0   0   0   0   1   0   2
53  1   1   2   69  2   1   58  5   0   0   0   0   1   0   2
54  1   1   2   55  2   6   58  5   0   0   0   0   1   0   2
54  2   3   2   29  2   6   58  5   0   0   0   0   1   0   2
56  3   3   1   16  2   4   58  4   0   0   0   1   0   0   2
56  1   1   2   45  2   4   58  4   0   0   0   1   0   0   2
56  2   3   2   12  2   4   58  4   0   0   0   1   0   0   2
59  1   1   1   56  2   1   50  5   0   0   0   0   1   0   2
59  3   3   1   29  2   1   50  5   0   0   0   0   1   0   2
59  2   2   2   53  2   1   50  5   0   0   0   0   1   0   2
62  1   1   1   59  2   1   50  5   0   0   0   0   1   0   2
62  2   2   2   54  2   1   50  5   0   0   0   0   1   0   2
62  3   3   2   26  2   1   50  5   0   0   0   0   1   0   2
63  1   1   1   42  2   4   50  3   0   0   1   0   0   0   2
63  3   3   1   10  2   4   50  3   0   0   1   0   0   0   2
63  2   2   2   37  2   4   50  3   0   0   1   0   0   0   2
64  1   1   1   31  2   6   50  2   0   1   0   0   0   0   2
64  2   2   2   33  2   6   50  2   0   1   0   0   0   0   2
65  1   1   1   60  2   1   50  5   0   0   0   0   1   0   2
65  3   3   1   27  2   1   50  5   0   0   0   0   1   0   2
65  2   2   2   57  2   1   50  5   0   0   0   0   1   0   2
66  1   1   1   49  2   1   50  5   0   0   0   0   1   0   2
66  2   2   2   54  2   1   50  5   0   0   0   0   1   0   2
66  3   3   2   25  2   1   50  5   0   0   0   0   1   0   2
67  1   1   1   67  2   1   120 6   0   0   0   0   0   1   4
67  2   2   2   65  2   1   120 6   0   0   0   0   0   1   4
68  1   1   1   49  2   4   98  5   0   0   0   0   1   0   3
68  4   3   1   18  2   4   98  5   0   0   0   0   1   0   3
68  2   2   2   48  2   4   98  5   0   0   0   0   1   0   3
68  3   3   2   20  2   4   98  5   0   0   0   0   1   0   3
70  1   1   1   66  2   1   101 6   0   0   0   0   0   1   4
70  2   2   2   56  2   1   101 6   0   0   0   0   0   1   4
71  1   1   1   37  2   2   101 2   0   1   0   0   0   0   4
71  2   2   2   37  2   2   101 2   0   1   0   0   0   0   4
72  1   1   1   74  1   1   91  5   0   0   0   0   1   0   3
72  3   3   1   41  1   1   91  5   0   0   0   0   1   0   3
72  2   2   2   71  1   1   91  5   0   0   0   0   1   0   3
73  1   1   1   60  1   1   91  5   0   0   0   0   1   0   3
73  3   3   1   27  1   1   91  5   0   0   0   0   1   0   3
73  2   2   2   57  1   1   91  5   0   0   0   0   1   0   3
74  1   1   1   61  2   1   119 5   0   0   0   0   1   0   4
74  4   3   1   30  2   1   119 5   0   0   0   0   1   0   4
74  2   2   2   56  2   1   119 5   0   0   0   0   1   0   4
74  3   3   2   32  2   1   119 5   0   0   0   0   1   0   4
75  2   2   1   72  1   1   99  6   0   0   0   0   0   1   3
75  1   1   2   71  1   1   99  6   0   0   0   0   0   1   3
78  1   1   2   28  1   4   15  1   1   0   0   0   0   0   1
80  1   1   1   68  1   1   92  6   0   0   0   0   0   1   3
80  2   2   2   66  1   1   92  6   0   0   0   0   0   1   3
81  2   3   1   27  1   6   46  5   0   0   0   0   1   0   2
81  3   3   1   29  1   6   46  5   0   0   0   0   1   0   2
81  1   1   2   57  1   6   46  5   0   0   0   0   1   0   2
83  1   1   1   30  1   4   43  2   0   1   0   0   0   0   2
83  2   2   2   30  1   4   43  2   0   1   0   0   0   0   2
84  1   1   2   64  1   4   33  6   0   0   0   0   0   1   2
85  1   1   1   35  1   6   26  2   0   1   0   0   0   0   1
85  2   2   2   33  1   6   26  2   0   1   0   0   0   0   1
88  1   1   1   52  2   1   145 5   0   0   0   0   1   0   5
88  2   2   2   49  2   1   145 5   0   0   0   0   1   0   5
88  3   3   2   25  2   1   145 5   0   0   0   0   1   0   5
89  2   3   1   13  2   1   145 4   0   0   0   1   0   0   5
89  3   3   1   22  2   1   145 4   0   0   0   1   0   0   5
89  1   1   2   47  2   1   145 4   0   0   0   1   0   0   5
90  1   1   1   57  2   1   83  5   0   0   0   0   1   0   3
90  3   3   1   25  2   1   83  5   0   0   0   0   1   0   3
90  4   3   1   23  2   1   83  5   0   0   0   0   1   0   3
90  2   2   2   52  2   1   83  5   0   0   0   0   1   0   3
91  1   1   1   33  2   4   83  2   0   1   0   0   0   0   3
91  2   2   2   32  2   4   83  2   0   1   0   0   0   0   3
92  1   1   1   35  2   1   83  3   0   0   1   0   0   0   3
92  2   2   2   34  2   1   83  3   0   0   1   0   0   0   3
93  1   1   1   35  2   4   83  2   0   1   0   0   0   0   3
93  2   2   2   35  2   4   83  2   0   1   0   0   0   0   3
94  1   1   1   55  2   4   83  5   0   0   0   0   1   0   3
94  2   2   2   53  2   4   83  5   0   0   0   0   1   0   3
94  3   3   2   27  2   4   83  5   0   0   0   0   1   0   3
94  4   3   2   24  2   4   83  5   0   0   0   0   1   0   3
95  1   1   1   49  2   1   83  4   0   0   0   1   0   0   3
95  2   3   1   21  2   1   83  4   0   0   0   1   0   0   3
95  3   3   2   15  2   1   83  4   0   0   0   1   0   0   3
96  1   1   1   35  2   1   83  1   1   0   0   0   0   0   3
96  2   2   2   35  2   1   83  1   1   0   0   0   0   0   3
97  1   1   1   54  2   1   83  4   0   0   0   1   0   0   3
97  4   3   1   13  2   1   83  4   0   0   0   1   0   0   3
97  2   2   2   51  2   1   83  4   0   0   0   1   0   0   3
97  3   3   2   21  2   1   83  4   0   0   0   1   0   0   3
98  1   1   1   49  4   1   85  4   0   0   0   1   0   0   3
98  2   2   2   42  4   1   85  4   0   0   0   1   0   0   3
98  3   3   2   20  4   1   85  4   0   0   0   1   0   0   3
98  4   3   2   17  4   1   85  4   0   0   0   1   0   0   3
99  1   1   1   69  4   1   96  6   0   0   0   0   0   1   3
99  2   2   2   66  4   1   96  6   0   0   0   0   0   1   3
100 1   1   1   69  4   1   96  6   0   0   0   0   0   1   3
100 2   2   2   60  4   1   96  6   0   0   0   0   0   1   3
101 1   1   1   32  4   4   33  1   1   0   0   0   0   0   2
101 2   2   2   32  4   4   33  1   1   0   0   0   0   0   2
103 1   1   1   39  1   6   27  4   0   0   0   1   0   0   1
103 2   2   2   34  1   6   27  4   0   0   0   1   0   0   1
103 3   3   2   13  1   6   27  4   0   0   0   1   0   0   1
105 2   3   1   19  1   6   27  5   0   0   0   0   1   0   1
105 3   3   1   25  1   6   27  5   0   0   0   0   1   0   1
105 1   1   2   49  1   6   27  5   0   0   0   0   1   0   1
106 1   1   1   28  1   6   23  1   1   0   0   0   0   0   1
107 1   1   1   49  2   1   78  5   0   0   0   0   1   0   3
107 3   3   1   18  2   1   78  5   0   0   0   0   1   0   3
107 4   3   1   21  2   1   78  5   0   0   0   0   1   0   3
107 2   2   2   49  2   1   78  5   0   0   0   0   1   0   3
108 1   1   1   33  2   4   78  1   1   0   0   0   0   0   3
108 2   2   2   28  2   4   78  1   1   0   0   0   0   0   3
109 1   1   1   55  2   1   78  5   0   0   0   0   1   0   3
109 3   3   1   21  2   1   78  5   0   0   0   0   1   0   3
109 2   2   2   53  2   1   78  5   0   0   0   0   1   0   3
110 1   1   1   48  2   1   78  4   0   0   0   1   0   0   3
110 2   2   2   45  2   1   78  4   0   0   0   1   0   0   3
110 3   3   2   20  2   1   78  4   0   0   0   1   0   0   3
110 4   3   2   15  2   1   78  4   0   0   0   1   0   0   3
111 1   1   1   37  2   4   78  2   0   1   0   0   0   0   3
111 2   2   2   34  2   4   78  2   0   1   0   0   0   0   3
112 1   1   1   28  4   4   82  2   0   1   0   0   0   0   3
112 2   2   2   30  4   4   82  2   0   1   0   0   0   0   3
113 1   1   1   64  4   1   63  5   0   0   0   0   1   0   2
113 3   3   1   26  4   1   63  5   0   0   0   0   1   0   2
113 2   2   2   55  4   1   63  5   0   0   0   0   1   0   2
113 4   3   2   24  4   1   63  5   0   0   0   0   1   0   2
115 1   1   1   42  4   4   58  3   0   0   1   0   0   0   2
115 4   3   1   10  4   4   58  3   0   0   1   0   0   0   2
115 2   2   2   39  4   4   58  3   0   0   1   0   0   0   2
115 3   3   2   12  4   4   58  3   0   0   1   0   0   0   2
116 1   1   1   56  4   1   63  5   0   0   0   0   1   0   2
116 3   3   1   29  4   1   63  5   0   0   0   0   1   0   2
116 2   2   2   51  4   1   63  5   0   0   0   0   1   0   2
118 1   1   1   75  4   1   70  6   0   0   0   0   0   1   3
118 2   2   2   74  4   1   70  6   0   0   0   0   0   1   3
119 1   1   1   49  1   4   66  4   0   0   0   1   0   0   2
119 3   3   1   18  1   4   66  4   0   0   0   1   0   0   2
119 4   3   1   17  1   4   66  4   0   0   0   1   0   0   2
119 2   2   2   47  1   4   66  4   0   0   0   1   0   0   2
120 2   3   1   32  4   1   56  5   0   0   0   0   1   0   2
120 1   1   2   64  4   1   56  5   0   0   0   0   1   0   2
120 3   3   2   41  4   1   56  5   0   0   0   0   1   0   2
121 1   1   1   44  4   4   56  4   0   0   0   1   0   0   2
121 3   3   1   17  4   4   56  4   0   0   0   1   0   0   2
121 4   3   1   16  4   4   56  4   0   0   0   1   0   0   2
121 2   2   2   42  4   4   56  4   0   0   0   1   0   0   2
123 1   1   1   44  4   4   56  3   0   0   1   0   0   0   2
123 2   2   2   43  4   4   56  3   0   0   1   0   0   0   2
123 3   3   2   11  4   4   56  3   0   0   1   0   0   0   2
123 5   3   2   14  4   4   56  3   0   0   1   0   0   0   2
125 2   3   1   21  1   4   30  5   0   0   0   0   1   0   1
125 1   1   2   48  1   4   30  5   0   0   0   0   1   0   1
126 1   1   1   49  1   4   30  5   0   0   0   0   1   0   1
126 2   2   2   44  1   4   30  5   0   0   0   0   1   0   1
126 3   3   2   25  1   4   30  5   0   0   0   0   1   0   1
127 1   1   1   75  1   6   25  6   0   0   0   0   0   1   1
128 1   1   1   49  2   1   82  3   0   0   1   0   0   0   3
128 3   3   1   12  2   1   82  3   0   0   1   0   0   0   3
128 2   2   2   43  2   1   82  3   0   0   1   0   0   0   3
129 1   1   2   66  2   1   82  6   0   0   0   0   0   1   3
130 1   1   1   36  2   4   82  3   0   0   1   0   0   0   3
130 2   2   2   41  2   4   82  3   0   0   1   0   0   0   3
130 3   3   2   11  2   4   82  3   0   0   1   0   0   0   3
132 1   1   2   64  2   1   82  6   0   0   0   0   0   1   3
133 1   1   1   34  2   1   82  2   0   1   0   0   0   0   3
133 2   2   2   35  2   1   82  2   0   1   0   0   0   0   3
134 1   1   1   37  2   4   82  2   0   1   0   0   0   0   3
134 2   2   2   35  2   4   82  2   0   1   0   0   0   0   3
135 1   1   1   38  2   4   82  2   0   1   0   0   0   0   3
135 2   2   2   37  2   4   82  2   0   1   0   0   0   0   3
136 1   1   1   31  2   6   83  1   1   0   0   0   0   0   3
136 2   2   2   29  2   6   83  1   1   0   0   0   0   0   3
137 2   2   1   47  2   5   30  3   0   0   1   0   0   0   1
137 3   3   1   19  2   5   30  3   0   0   1   0   0   0   1
137 1   1   2   43  2   5   30  3   0   0   1   0   0   0   1
137 4   3   2   10  2   5   30  3   0   0   1   0   0   0   1
138 2   3   1   24  2   5   30  5   0   0   0   0   1   0   1
138 1   1   2   54  2   5   30  5   0   0   0   0   1   0   1
139 1   1   2   44  2   5   30  4   0   0   0   1   0   0   1
139 2   3   2   13  2   5   30  4   0   0   0   1   0   0   1
139 3   3   2   15  2   5   30  4   0   0   0   1   0   0   1
140 1   1   2   55  2   5   30  5   0   0   0   0   1   0   1
140 2   3   2   29  2   5   30  5   0   0   0   0   1   0   1
141 1   1   1   45  2   5   30  4   0   0   0   1   0   0   1
141 2   2   2   43  2   5   30  4   0   0   0   1   0   0   1
141 3   3   2   15  2   5   30  4   0   0   0   1   0   0   1
141 4   3   2   13  2   5   30  4   0   0   0   1   0   0   1
142 1   1   2   52  2   5   30  4   0   0   0   1   0   0   1
142 2   3   2   23  2   5   30  4   0   0   0   1   0   0   1
142 3   3   2   18  2   5   30  4   0   0   0   1   0   0   1
144 1   1   1   52  2   5   30  5   0   0   0   0   1   0   1
144 4   3   1   19  2   5   30  5   0   0   0   0   1   0   1
144 2   2   2   48  2   5   30  5   0   0   0   0   1   0   1
144 3   3   2   22  2   5   30  5   0   0   0   0   1   0   1
145 1   1   1   61  2   4   72  6   0   0   0   0   0   1   3
145 2   2   2   55  2   4   72  6   0   0   0   0   0   1   3
147 1   1   1   32  2   4   85  1   1   0   0   0   0   0   3
147 2   2   2   33  2   4   85  1   1   0   0   0   0   0   3
148 1   1   1   30  2   1   85  1   1   0   0   0   0   0   3
148 2   2   2   35  2   1   85  1   1   0   0   0   0   0   3
149 2   2   1   54  1   1   46  4   0   0   0   1   0   0   2
149 1   1   2   51  1   1   46  4   0   0   0   1   0   0   2
149 3   3   2   20  1   1   46  4   0   0   0   1   0   0   2
149 4   3   2   13  1   1   46  4   0   0   0   1   0   0   2
149 5   3   2   27  1   1   46  4   0   0   0   1   0   0   2
152 1   1   1   72  1   1   99  5   0   0   0   0   1   0   3
152 3   3   1   39  1   1   99  5   0   0   0   0   1   0   3
152 2   2   2   69  1   1   99  5   0   0   0   0   1   0   3
153 1   1   1   28  1   6   49  2   0   1   0   0   0   0   2
153 2   2   2   27  1   6   49  2   0   1   0   0   0   0   2
155 1   1   2   54  1   6   27  5   0   0   0   0   1   0   1
155 2   3   2   29  1   6   27  5   0   0   0   0   1   0   1
156 1   1   1   48  1   1   76  3   0   0   1   0   0   0   3
156 3   3   1   17  1   1   76  3   0   0   1   0   0   0   3
156 2   2   2   43  1   1   76  3   0   0   1   0   0   0   3
158 1   1   1   52  1   4   50  5   0   0   0   0   1   0   2
158 3   3   1   23  1   4   50  5   0   0   0   0   1   0   2
158 2   2   2   47  1   4   50  5   0   0   0   0   1   0   2
158 4   3   2   20  1   4   50  5   0   0   0   0   1   0   2
159 1   1   1   54  1   6   40  5   0   0   0   0   1   0   2
159 3   3   1   30  1   6   40  5   0   0   0   0   1   0   2
159 2   2   2   51  1   6   40  5   0   0   0   0   1   0   2
159 4   3   2   28  1   6   40  5   0   0   0   0   1   0   2
160 1   1   1   35  1   4   36  2   0   1   0   0   0   0   2
160 2   2   2   34  1   4   36  2   0   1   0   0   0   0   2
162 1   1   1   74  1   1   76  6   0   0   0   0   0   1   3
162 2   2   2   74  1   1   76  6   0   0   0   0   0   1   3
163 3   3   1   16  1   4   40  4   0   0   0   1   0   0   2
163 1   1   2   44  1   4   40  4   0   0   0   1   0   0   2
163 2   3   2   20  1   4   40  4   0   0   0   1   0   0   2
165 1   1   1   72  2   1   114 6   0   0   0   0   0   1   4
165 2   2   2   69  2   1   114 6   0   0   0   0   0   1   4
166 1   1   1   59  2   4   114 5   0   0   0   0   1   0   4
166 3   3   1   26  2   4   114 5   0   0   0   0   1   0   4
166 2   2   2   54  2   4   114 5   0   0   0   0   1   0   4
166 4   3   2   28  2   4   114 5   0   0   0   0   1   0   4
168 1   1   1   55  2   1   114 5   0   0   0   0   1   0   4
168 3   3   1   28  2   1   114 5   0   0   0   0   1   0   4
168 2   2   2   49  2   1   114 5   0   0   0   0   1   0   4
168 4   3   2   26  2   1   114 5   0   0   0   0   1   0   4
171 1   1   1   57  2   1   114 5   0   0   0   0   1   0   4
171 3   3   1   26  2   1   114 5   0   0   0   0   1   0   4
171 2   2   2   50  2   1   114 5   0   0   0   0   1   0   4
172 1   1   1   58  2   1   114 5   0   0   0   0   1   0   4
172 3   3   1   22  2   1   114 5   0   0   0   0   1   0   4
172 4   3   1   25  2   1   114 5   0   0   0   0   1   0   4
172 2   2   2   53  2   1   114 5   0   0   0   0   1   0   4
172 5   3   2   27  2   1   114 5   0   0   0   0   1   0   4
173 1   1   1   45  3   4   59  3   0   0   1   0   0   0   2
173 3   3   1   12  3   4   59  3   0   0   1   0   0   0   2
173 2   2   2   33  3   4   59  3   0   0   1   0   0   0   2
174 1   1   2   80  3   1   59  6   0   0   0   0   0   1   2
175 1   1   1   71  3   1   59  5   0   0   0   0   1   0   2
175 2   2   2   67  3   1   59  5   0   0   0   0   1   0   2
175 3   3   2   28  3   1   59  5   0   0   0   0   1   0   2
176 1   1   1   55  3   1   59  4   0   0   0   1   0   0   2
176 3   3   1   25  3   1   59  4   0   0   0   1   0   0   2
176 2   2   2   50  3   1   59  4   0   0   0   1   0   0   2
176 4   3   2   17  3   1   59  4   0   0   0   1   0   0   2
178 2   2   1   60  3   1   59  5   0   0   0   0   1   0   2
178 3   3   1   26  3   1   59  5   0   0   0   0   1   0   2
178 4   3   1   23  3   1   59  5   0   0   0   0   1   0   2
178 1   1   2   50  3   1   59  5   0   0   0   0   1   0   2
179 1   1   1   52  3   1   59  4   0   0   0   1   0   0   2
179 3   3   1   18  3   1   59  4   0   0   0   1   0   0   2
179 2   2   2   43  3   1   59  4   0   0   0   1   0   0   2
179 4   3   2   17  3   1   59  4   0   0   0   1   0   0   2
180 1   1   1   60  3   1   59  5   0   0   0   0   1   0   2
180 3   3   1   27  3   1   59  5   0   0   0   0   1   0   2
180 2   2   2   60  3   1   59  5   0   0   0   0   1   0   2
182 1   1   2   47  4   1   53  3   0   0   1   0   0   0   2
182 2   3   2   10  4   1   53  3   0   0   1   0   0   0   2
184 1   1   1   36  4   4   59  2   0   1   0   0   0   0   2
184 2   2   2   38  4   4   59  2   0   1   0   0   0   0   2
185 1   1   1   43  4   1   59  3   0   0   1   0   0   0   2
185 3   3   1   15  4   1   59  3   0   0   1   0   0   0   2
185 4   3   1   11  4   1   59  3   0   0   1   0   0   0   2
185 2   2   2   41  4   1   59  3   0   0   1   0   0   0   2
186 1   1   1   36  4   1   50  2   0   1   0   0   0   0   2
186 2   2   2   32  4   1   50  2   0   1   0   0   0   0   2
186 5   3   2   10  4   1   50  2   0   1   0   0   0   0   2
187 1   1   2   55  4   1   53  5   0   0   0   0   1   0   2
187 2   3   2   25  4   1   53  5   0   0   0   0   1   0   2
187 3   3   2   27  4   1   53  5   0   0   0   0   1   0   2
188 1   1   1   67  4   1   53  6   0   0   0   0   0   1   2
188 2   2   2   64  4   1   53  6   0   0   0   0   0   1   2
189 1   1   1   69  4   1   50  5   0   0   0   0   1   0   2
189 3   3   1   34  4   1   50  5   0   0   0   0   1   0   2
189 2   2   2   57  4   1   50  5   0   0   0   0   1   0   2
190 1   1   1   62  4   1   50  5   0   0   0   0   1   0   2
190 3   3   1   27  4   1   50  5   0   0   0   0   1   0   2
190 2   2   2   55  4   1   50  5   0   0   0   0   1   0   2
191 1   1   1   38  3   1   54  2   0   1   0   0   0   0   2
191 2   2   2   36  3   1   54  2   0   1   0   0   0   0   2
192 1   1   2   69  3   4   54  6   0   0   0   0   0   1   2
193 1   1   1   58  3   4   54  5   0   0   0   0   1   0   2
193 3   3   1   27  3   4   54  5   0   0   0   0   1   0   2
193 4   3   1   24  3   4   54  5   0   0   0   0   1   0   2
193 2   2   2   50  3   4   54  5   0   0   0   0   1   0   2
194 1   1   1   77  3   1   54  6   0   0   0   0   0   1   2
194 2   2   2   77  3   1   54  6   0   0   0   0   0   1   2
196 1   1   1   63  4   1   73  5   0   0   0   0   1   0   3
196 3   3   1   37  4   1   73  5   0   0   0   0   1   0   3
196 4   3   1   33  4   1   73  5   0   0   0   0   1   0   3
196 2   2   2   62  4   1   73  5   0   0   0   0   1   0   3
197 1   1   1   66  4   1   73  6   0   0   0   0   0   1   3
197 2   2   2   59  4   1   73  6   0   0   0   0   0   1   3
198 1   1   1   52  4   1   73  3   0   0   1   0   0   0   3
198 3   3   1   13  4   1   73  3   0   0   1   0   0   0   3
198 2   2   2   47  4   1   73  3   0   0   1   0   0   0   3
198 4   3   2   12  4   1   73  3   0   0   1   0   0   0   3
199 1   1   1   43  4   4   73  3   0   0   1   0   0   0   3
199 2   2   2   41  4   4   73  3   0   0   1   0   0   0   3
199 3   3   2   11  4   4   73  3   0   0   1   0   0   0   3
200 2   3   1   26  4   1   73  5   0   0   0   0   1   0   3
200 3   3   1   28  4   1   73  5   0   0   0   0   1   0   3
200 1   1   2   53  4   1   73  5   0   0   0   0   1   0   3
201 1   1   1   53  4   1   73  5   0   0   0   0   1   0   3
201 3   3   1   27  4   1   73  5   0   0   0   0   1   0   3
201 2   2   2   50  4   1   73  5   0   0   0   0   1   0   3
202 1   1   1   77  4   1   73  5   0   0   0   0   1   0   3
202 3   3   1   35  4   1   73  5   0   0   0   0   1   0   3
202 2   2   2   60  4   1   73  5   0   0   0   0   1   0   3
204 1   1   1   56  4   1   53  5   0   0   0   0   1   0   2
204 2   2   2   53  4   1   53  5   0   0   0   0   1   0   2
204 3   3   2   22  4   1   53  5   0   0   0   0   1   0   2
205 1   1   1   60  4   4   66  5   0   0   0   0   1   0   2
205 3   3   1   29  4   4   66  5   0   0   0   0   1   0   2
205 4   3   1   27  4   4   66  5   0   0   0   0   1   0   2
205 2   2   2   56  4   4   66  5   0   0   0   0   1   0   2
206 1   1   1   67  4   1   76  6   0   0   0   0   0   1   3
206 2   2   2   67  4   1   76  6   0   0   0   0   0   1   3
208 1   1   1   46  4   1   66  4   0   0   0   1   0   0   2
208 4   3   1   14  4   1   66  4   0   0   0   1   0   0   2
208 2   2   2   45  4   1   66  4   0   0   0   1   0   0   2
208 3   3   2   17  4   1   66  4   0   0   0   1   0   0   2
209 1   1   1   42  4   4   56  2   0   1   0   0   0   0   2
209 3   3   1   10  4   4   56  2   0   1   0   0   0   0   2
209 2   2   2   38  4   4   56  2   0   1   0   0   0   0   2
210 3   3   1   12  4   1   56  3   0   0   1   0   0   0   2
210 1   1   2   40  4   1   56  3   0   0   1   0   0   0   2
210 2   3   2   10  4   1   56  3   0   0   1   0   0   0   2
212 1   1   2   37  1   4   63  2   0   1   0   0   0   0   2
214 1   1   1   63  3   1   40  6   0   0   0   0   0   1   2
215 1   1   1   62  3   1   40  5   0   0   0   0   1   0   2
215 3   3   1   28  3   1   40  5   0   0   0   0   1   0   2
215 2   2   2   57  3   1   40  5   0   0   0   0   1   0   2
216 1   1   2   71  3   1   40  6   0   0   0   0   0   1   2
217 1   1   2   49  4   1   40  5   0   0   0   0   1   0   2
217 2   3   2   24  4   1   40  5   0   0   0   0   1   0   2
218 1   1   1   74  1   1   37  6   0   0   0   0   0   1   2
218 2   2   2   67  1   1   37  6   0   0   0   0   0   1   2
220 1   1   1   51  4   4   66  4   0   0   0   1   0   0   2
220 4   3   1   13  4   4   66  4   0   0   0   1   0   0   2
220 5   3   1   18  4   4   66  4   0   0   0   1   0   0   2
220 2   2   2   49  4   4   66  4   0   0   0   1   0   0   2
220 3   3   2   16  4   4   66  4   0   0   0   1   0   0   2
221 1   1   2   81  1   6   40  6   0   0   0   0   0   1   2
222 1   1   1   45  2   1   85  3   0   0   1   0   0   0   3
222 4   3   1   10  2   1   85  3   0   0   1   0   0   0   3
222 2   2   2   41  2   1   85  3   0   0   1   0   0   0   3
222 3   3   2   15  2   1   85  3   0   0   1   0   0   0   3
223 1   1   2   51  2   1   85  5   0   0   0   0   1   0   3
223 2   3   2   25  2   1   85  5   0   0   0   0   1   0   3
224 2   3   1   12  2   4   85  4   0   0   0   1   0   0   3
224 1   1   2   47  2   4   85  4   0   0   0   1   0   0   3
224 3   3   2   18  2   4   85  4   0   0   0   1   0   0   3
225 1   1   1   68  2   1   85  6   0   0   0   0   0   1   3
225 2   2   2   67  2   1   85  6   0   0   0   0   0   1   3
226 1   1   1   50  2   1   85  4   0   0   0   1   0   0   3
226 4   3   1   17  2   1   85  4   0   0   0   1   0   0   3
226 2   2   2   46  2   1   85  4   0   0   0   1   0   0   3
226 3   3   2   19  2   1   85  4   0   0   0   1   0   0   3
229 2   2   1   67  2   1   85  5   0   0   0   0   1   0   3
229 1   1   2   57  2   1   85  5   0   0   0   0   1   0   3
229 3   3   2   37  2   1   85  5   0   0   0   0   1   0   3
232 1   1   1   54  2   1   86  5   0   0   0   0   1   0   3
232 2   2   2   53  2   1   86  5   0   0   0   0   1   0   3
232 3   3   2   29  2   1   86  5   0   0   0   0   1   0   3
233 1   1   1   57  2   1   86  5   0   0   0   0   1   0   3
233 2   2   2   52  2   1   86  5   0   0   0   0   1   0   3
233 3   3   2   24  2   1   86  5   0   0   0   0   1   0   3
235 1   1   2   51  2   1   86  3   0   0   1   0   0   0   3
236 1   1   1   41  2   4   86  2   0   1   0   0   0   0   3
236 5   3   1   12  2   4   86  2   0   1   0   0   0   0   3
236 2   2   2   39  2   4   86  2   0   1   0   0   0   0   3
236 3   3   2   10  2   4   86  2   0   1   0   0   0   0   3
237 1   1   1   48  2   1   86  4   0   0   0   1   0   0   3
237 2   2   2   48  2   1   86  4   0   0   0   1   0   0   3
237 3   3   2   20  2   1   86  4   0   0   0   1   0   0   3
237 4   3   2   16  2   1   86  4   0   0   0   1   0   0   3
238 1   1   2   53  4   1   50  5   0   0   0   0   1   0   2
238 2   3   2   29  4   1   50  5   0   0   0   0   1   0   2
240 2   3   1   31  4   1   50  5   0   0   0   0   1   0   2
240 1   1   2   61  4   1   50  5   0   0   0   0   1   0   2
241 2   3   1   24  4   1   50  5   0   0   0   0   1   0   2
241 1   1   2   51  4   1   50  5   0   0   0   0   1   0   2
242 1   1   1   39  4   6   50  3   0   0   1   0   0   0   2
242 3   3   1   11  4   6   50  3   0   0   1   0   0   0   2
242 2   2   2   38  4   6   50  3   0   0   1   0   0   0   2
245 1   1   1   48  4   1   50  4   0   0   0   1   0   0   2
245 3   3   1   17  4   1   50  4   0   0   0   1   0   0   2
245 2   2   2   42  4   1   50  4   0   0   0   1   0   0   2
246 1   1   1   58  5   4   50  5   0   0   0   0   1   0   2
246 2   2   2   50  5   4   50  5   0   0   0   0   1   0   2
246 3   3   2   26  5   4   50  5   0   0   0   0   1   0   2
247 2   2   1   43  4   1   46  3   0   0   1   0   0   0   2
247 1   1   2   41  4   1   46  3   0   0   1   0   0   0   2
247 3   3   2   11  4   1   46  3   0   0   1   0   0   0   2
248 1   1   1   40  4   1   70  1   1   0   0   0   0   0   3
248 2   2   2   32  4   1   70  1   1   0   0   0   0   0   3
249 1   1   1   43  4   1   64  4   0   0   0   1   0   0   2
249 3   3   1   16  4   1   64  4   0   0   0   1   0   0   2
249 2   2   2   41  4   1   64  4   0   0   0   1   0   0   2
249 4   3   2   15  4   1   64  4   0   0   0   1   0   0   2
250 2   2   1   32  4   1   54  1   1   0   0   0   0   0   2
250 1   1   2   30  4   1   54  1   1   0   0   0   0   0   2
251 1   1   1   65  1   1   132 6   0   0   0   0   0   1   4
251 2   2   2   62  1   1   132 6   0   0   0   0   0   1   4
254 1   1   1   37  2   4   85  2   0   1   0   0   0   0   3
254 2   2   2   37  2   4   85  2   0   1   0   0   0   0   3
256 1   1   1   50  2   1   85  4   0   0   0   1   0   0   3
256 2   2   2   47  2   1   85  4   0   0   0   1   0   0   3
256 3   3   2   16  2   1   85  4   0   0   0   1   0   0   3
256 4   3   2   14  2   1   85  4   0   0   0   1   0   0   3
257 1   1   1   46  2   4   85  4   0   0   0   1   0   0   3
257 4   3   1   16  2   4   85  4   0   0   0   1   0   0   3
257 2   2   2   44  2   4   85  4   0   0   0   1   0   0   3
257 3   3   2   19  2   4   85  4   0   0   0   1   0   0   3
259 1   1   1   55  2   1   85  5   0   0   0   0   1   0   3
259 2   2   2   53  2   1   85  5   0   0   0   0   1   0   3
259 3   3   2   31  2   1   85  5   0   0   0   0   1   0   3
261 1   1   1   65  2   1   145 6   0   0   0   0   0   1   5
261 2   2   2   62  2   1   145 6   0   0   0   0   0   1   5
262 1   1   1   44  3   1   56  4   0   0   0   1   0   0   2
262 3   3   1   19  3   1   56  4   0   0   0   1   0   0   2
262 2   2   2   42  3   1   56  4   0   0   0   1   0   0   2
262 4   3   2   15  3   1   56  4   0   0   0   1   0   0   2
263 1   1   1   49  3   1   54  5   0   0   0   0   1   0   2
263 4   3   1   22  3   1   54  5   0   0   0   0   1   0   2
263 2   2   2   47  3   1   54  5   0   0   0   0   1   0   2
263 3   3   2   19  3   1   54  5   0   0   0   0   1   0   2
266 1   1   1   54  3   1   56  5   0   0   0   0   1   0   2
266 3   3   1   29  3   1   56  5   0   0   0   0   1   0   2
266 2   2   2   49  3   1   56  5   0   0   0   0   1   0   2
267 1   1   2   63  3   1   42  6   0   0   0   0   0   1   2
268 1   1   1   45  3   1   43  3   0   0   1   0   0   0   2
268 3   3   1   11  3   1   43  3   0   0   1   0   0   0   2
268 2   2   2   36  3   1   43  3   0   0   1   0   0   0   2
268 5   3   2   12  3   1   43  3   0   0   1   0   0   0   2
269 1   1   1   45  3   1   47  3   0   0   1   0   0   0   2
269 2   2   2   42  3   1   47  3   0   0   1   0   0   0   2
269 3   3   2   11  3   1   47  3   0   0   1   0   0   0   2
270 1   1   1   34  2   4   59  2   0   1   0   0   0   0   2
270 2   2   2   34  2   4   59  2   0   1   0   0   0   0   2
271 2   2   1   60  2   1   59  5   0   0   0   0   1   0   2
271 3   3   1   34  2   1   59  5   0   0   0   0   1   0   2
271 1   1   2   57  2   1   59  5   0   0   0   0   1   0   2
272 1   1   1   35  2   1   59  2   0   1   0   0   0   0   2
272 2   2   2   35  2   1   59  2   0   1   0   0   0   0   2
273 1   1   1   35  2   1   59  2   0   1   0   0   0   0   2
273 2   2   2   39  2   1   59  2   0   1   0   0   0   0   2
275 1   1   1   33  2   1   59  2   0   1   0   0   0   0   2
275 2   2   2   29  2   1   59  2   0   1   0   0   0   0   2
276 1   1   1   30  2   4   59  1   1   0   0   0   0   0   2
277 1   1   1   47  2   1   59  4   0   0   0   1   0   0   2
277 2   2   2   48  2   1   59  4   0   0   0   1   0   0   2
277 3   3   2   17  2   1   59  4   0   0   0   1   0   0   2
277 4   3   2   15  2   1   59  4   0   0   0   1   0   0   2
278 1   1   1   78  2   1   84  6   0   0   0   0   0   1   3
278 2   2   2   79  2   1   84  6   0   0   0   0   0   1   3
280 1   1   1   56  2   1   84  5   0   0   0   0   1   0   3
280 2   2   2   53  2   1   84  5   0   0   0   0   1   0   3
280 3   3   2   27  2   1   84  5   0   0   0   0   1   0   3
281 1   1   1   50  2   1   84  4   0   0   0   1   0   0   3
281 4   3   1   17  2   1   84  4   0   0   0   1   0   0   3
281 2   2   2   45  2   1   84  4   0   0   0   1   0   0   3
281 3   3   2   22  2   1   84  4   0   0   0   1   0   0   3
283 1   1   1   51  2   1   84  5   0   0   0   0   1   0   3
283 4   3   1   25  2   1   84  5   0   0   0   0   1   0   3
283 2   2   2   49  2   1   84  5   0   0   0   0   1   0   3
283 3   3   2   27  2   1   84  5   0   0   0   0   1   0   3
285 1   1   1   48  2   1   122 3   0   0   1   0   0   0   4
285 5   3   1   17  2   1   122 3   0   0   1   0   0   0   4
285 2   2   2   41  2   1   122 3   0   0   1   0   0   0   4
285 3   3   2   15  2   1   122 3   0   0   1   0   0   0   4
286 1   1   1   57  2   1   122 5   0   0   0   0   1   0   4
286 4   3   1   25  2   1   122 5   0   0   0   0   1   0   4
286 2   2   2   51  2   1   122 5   0   0   0   0   1   0   4
286 3   3   2   29  2   1   122 5   0   0   0   0   1   0   4
287 1   1   1   43  2   1   122 2   0   1   0   0   0   0   4
287 2   2   2   40  2   1   122 2   0   1   0   0   0   0   4
287 3   3   2   12  2   1   122 2   0   1   0   0   0   0   4
290 1   1   1   46  2   1   102 3   0   0   1   0   0   0   4
290 4   3   1   10  2   1   102 3   0   0   1   0   0   0   4
290 2   2   2   42  2   1   102 3   0   0   1   0   0   0   4
290 3   3   2   15  2   1   102 3   0   0   1   0   0   0   4
291 1   1   1   30  2   4   102 2   0   1   0   0   0   0   4
291 2   2   2   26  2   4   102 2   0   1   0   0   0   0   4
292 1   1   2   61  1   1   59  6   0   0   0   0   0   1   2
295 1   1   1   47  1   4   43  3   0   0   1   0   0   0   2
295 3   3   1   11  1   4   43  3   0   0   1   0   0   0   2
295 2   2   2   43  1   4   43  3   0   0   1   0   0   0   2
297 1   1   1   43  1   4   43  2   0   1   0   0   0   0   2
297 2   2   2   46  1   4   43  2   0   1   0   0   0   0   2
298 1   1   1   40  1   4   56  2   0   1   0   0   0   0   2
298 2   2   2   37  1   4   56  2   0   1   0   0   0   0   2
299 2   3   1   24  1   4   50  5   0   0   0   0   1   0   2
299 1   1   2   60  1   4   50  5   0   0   0   0   1   0   2
300 1   1   1   46  4   4   83  4   0   0   0   1   0   0   3
300 2   2   2   43  4   4   83  4   0   0   0   1   0   0   3
300 3   3   2   13  4   4   83  4   0   0   0   1   0   0   3 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T04:03:48.767

我的理解是 R 被实现为写时复制。

举个例子：

```
X <- 1:1000
y <- x      # no copy made. x & y share the reference
y[1] <- 8   # now a copy is made. 
```

如果 x 正在增长，则副本需要的时间会越来越长，并且脚本会变慢。我对宏变量不太熟悉，但我怀疑这样的事情正在发生。如果您正在使用列表，则每次向列表中添加新元素时，都会重新复制所有内容。

```
y <- list()
y$this <- 1:5
y$that <- 6:10  # now every thing was recopied. 
```

因此最好先分配。它确实有助于性能。

```
y <- vector("list", 2)
y[[1]] <- 1:5
y[[2]] <- 6:10 
```

这些幻灯片真的很棒：[一个链接](http://bioconductor.org/help/course-materials/2010/BioC2010/EfficientRProgramming.pdf)看看！

# python - Python assert 语句触发 SystemError: \loewis\release\python\Objects\longobject.c:270: bad argument to internal function

> ID：10188092
> 
> 赞同：-1
> 
> 时间：2012-04-17T08:55:30.130
> 
> 标签：python, exception, assert, system-error

我在 Python 中有一个断言语句，它触发了以下异常：

```
SystemError: \loewis\release\python\Objects\longobject.c:270: bad argument to internal function 
```

我在 Python 代码中搜索了我正在使用的版本（2.4.2），可以看到这个错误来自 longobject.c 中的以下函数：

```
unsigned long
PyLong_AsUnsignedLong(PyObject *vv) 
```

现在我在 Python 的源代码中搜索了这个函数，但我无法在这个函数和 Python 断言语句之间建立联系。

您知道调用 Python 断言语句时在哪里调用 PyLong_AsUnsignedLong 吗？

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T09:02:37.960

PyLong_AsUnsignedLong 来自[C-API Long Integer Object](http://docs.python.org/c-api/long.html)。它返回表示传递的 Python 对象的 C 无符号 Long。

# javascript - 我的桌子上的 jquery Table sorter 出现问题，我收到了 json 文本墙

> ID：10188095
> 
> 赞同：1
> 
> 时间：2012-04-17T08:55:36.850
> 
> 标签：javascript, jquery, asp.net-mvc, json, asp.net-mvc-3

我在我的项目中使用 MVC3。

我有一堆 DDL、搜索按钮和表格的视图。用户可以选择值，然后点击搜索按钮，表格将显示所有被点击的数据。

这是我的搜索按钮单击的 jquery 代码：

```
 $(function () {
        $('#submitfloat').click(function () {
            var SubjectTypes = $('#SubjectTypes').val();
            var Teams = $('#Teams').val();
            var Companies = $('#Companies').val();
            var Consultants = $('#Consultants').val();
            var PlannedDates = $('#PlannedDates').val();
            var CompletedDates = $('#CompletedDates').val();
            var DateTypes = $('#DateTypes').val();
            var data = {
                Subjectypes: SubjectTypes,
                Companies: Companies,
                Teams: Teams,
                Consultants: Consultants,
                PlannedDates: PlannedDates,
                CompletedDates: CompletedDates,
                DateTypes: DateTypes
            };

                $.post('@Url.Action("Search", "SearchNKI")', data, function (result) {
                    $("#GoalcardSearchResult tbody").html('');
                    result.forEach(function (goalcard) {
                        $("#GoalcardSearchResult tbody").append(
                            $('<tr/>', {
                                click: function () {
                                    // todo: redirect
                                    alert(goalcard.Id);
                                },
                                html: "<td>" + goalcard.Name + "</td><td>" + goalcard.Customer + "</td><td>" + goalcard.PlannedDate + "</td><td>" + goalcard.CompletedDate + "</td>"
                            }));
                    });
                });
                return false;
        });
    }); 
```

这是我的控制器：

```
 [HttpPost]
 public JsonResult Search(SearchQueryViewModel model)
 {
     var goalcard = SearchRep.FindGoalCard(model); // My LINQ

     return Json(goalcard.Select(x => new GoalCardViewModel(x)));
 } 
```

一切正常，但是当我添加我的 Jquery 表排序器时：

```
 <script type="text/javascript">
        $(document).ready(function () {
            $("#GoalcardSearchResult").tablesorter();
        }); 
    </script> 
```

当我单击“搜索”按钮时，我得到了这堵 Json 文本墙：

![][1]

[1]：

我不知道为什么会发生这种情况，当我调试我的搜索按钮单击 jquery 代码时，当我添加 Table Sorter jquery 代码时它甚至没有被执行。有人知道原因是什么吗？

我所知道的是，当我添加表格排序器时，它会阻止我的按钮单击 jquery 代码运行并直接跳转到服务器端并返回 json。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T15:23:18.353

这是一个修改过的表格排序器代码，我让它运行了一些小的改动

# php - What is the resource server?

> ID：10188098
> 
> 赞同：1
> 
> 时间：2012-04-17T08:55:44.403
> 
> 标签：php, codeigniter, oauth-2.0

I am using the fantastic Oauth2 server library from Alex Bilbie. It works perfectly fine but I am not sure how to use the Resource Server. What is that?

[https://github.com/alexbilbie/CodeIgniter-OAuth-2.0-Server/blob/master/libraries/Oauth_resource_server.php](https://github.com/alexbilbie/CodeIgniter-OAuth-2.0-Server/blob/master/libraries/Oauth_resource_server.php)

Thankful for all input!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T18:20:29.693

从规范[草案 25 第 1.1 节](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-25#section-1.1)：

> *资源服务器*：托管受保护资源的服务器，能够使用访问令牌接受和响应受保护资源请求。

因此，资源服务器可以是任何具有需要`OAuth authenticated access`.

# c++ - Ambiguity between 'function1' and 'function2' (C++)

> ID：10188099
> 
> 赞同：1
> 
> 时间：2012-04-17T08:55:44.447
> 
> 标签：c++, implicit-conversion, c++builder-xe, ambiguous-call

Let the source code speak for itself:

```
MLine::MLine(int x1, int y1, int x2, int y2)
{
}

MLine::MLine(double x1, double y1, double x2, double y2)
{
}

void __fastcall TVctDiag2::PrepareArrowTail(int x, int y)
{
    double length_x1;
    double length_y1;
    MLine *line = new MLine(x, y, x - length_x1, y - length_y1);
} 
```

Compiler generates following error:

E2015 Ambiguity between 'MLine::MLine(int,int,int,int) at shapes.h:100' and 'MLine::MLine(double,double,double,double) at shapes.h:110'

I can resolve this problem by following explicit casting:

```
 MLine *line = new MLine((double)x, (double)y, x - length_x1, y - length_y1); 
```

The partial casting is not sufficient:

```
 MLine *line = new MLine((double)x, y, x - length_x1, y - length_y1); 
```

I am quite confused about rules for implicit casting in expressions. Can someone explain this behaviour? What is the data type of expressions 'x - length_x1' and 'y - length_y1'?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T09:05:42.303

> 我对表达式中隐式转换的规则感到很困惑。有人可以解释这种行为吗？

二元运算符（+-*/ 等）作用于相同类型的操作数（并返回与其操作数相同类型的结果）。如果类型不相同，则将提升一个（通常但有时两者兼有），以便两个操作数具有相同的类型。

> 表达式“x - length_x1”和“y - length_y1”的数据类型是什么？

```
X         => int
length_x1 => double 
```

所以种类也不一样。因此将提升一个对象。在这种情况下，X 将被提升为双精度（为什么要查找[提升规则](https://stackoverflow.com/a/245986/14065)）。运算符 - 将被应用，结果是双精度数。

如果我们现在看你的表达：

```
MLine *line = new MLine(x, y, x - length_x1, y - length_y1); 
```

如果我现在用它们的类型替换子表达式：

```
MLine *line = new MLine(<int>, <int>, <double>, <double>); 
```

您现在可以看到编译器的困境。它无法知道选择哪个版本的构造函数（都可以通过应用一轮强制转换来实现）。所以它必须产生一个错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T09:04:46.043

```
MLine *line = new MLine((double)x, y, x - length_x1, y - length_y1); 
```

这不起作用的原因是派生的类型是：

```
MLine(double, int, double, double) 
```

这是因为...

## 晋升

在具有混合操作数的操作中，操作数可能会转换为其他类型。对于浮点类型与整数类型的操作，整数首先转换为浮点类型：

```
float f; int i;
f + i; 
```

`f + i`是类型`float`，因为在加法发生之前，`i`转换为`float`.

这项促销活动导致...

## 歧义

没有完全匹配，并且重载候选是模棱两可的。

从技术上（和简化）来看，C++ 编译器将使用完全匹配，或者从一组重载候选中选择最佳匹配。这些规则很重要（一个衡量标准是所需的转换次数）。

让我推导出一些例子：

```
void foo (int) {}
int main () { foo(5.f); } 
```

-> 有效，因为只有一个候选者，并且 double 可以隐式转换为 int。

```
#include <iostream>
void foo (int) { std::cout << "foo(int)\n"; }
void foo (float) { std::cout << "foo(float)\n"; }
int main () { foo(5.f); } 
```

-> 使用第二个版本，因为它是完全匹配的。

```
#include <iostream>
void foo (int) { std::cout << "foo(int)\n"; }
void foo (float) { std::cout << "foo(float)\n"; }
int main () { foo(5.); } 
```

-> 注意：这一次，我们传递一个`double`. 它不会编译，因为两个重载都需要转换，不是完全匹配，因此候选者是模棱两可的。

多个参数也是一样的：

```
#include <iostream>
void foo (int,int) { std::cout << "foo(int,int)\n"; }
void foo (float,float) { std::cout << "foo(float,float)\n"; }
int main () { 
    foo(5.f, 5.f); // exact match with the (float,float) overload
    foo (5, 5);    // exact match with the (int,int) overload
    foo (5, 5.f);  // No exact match, and candidates are ambiguous
} 
```

# android - Android IllegalStateException 在 (GlobalApp) getApplication() 强制转换时抛出

> ID：10188109
> 
> 赞同：1
> 
> 时间：2012-04-17T08:56:03.640
> 
> 标签：android, exception

我收到以下消息崩溃：

```
04-17 11:18:19.855: W/dalvikvm(368): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
04-17 11:18:19.925: E/AndroidRuntime(368): FATAL EXCEPTION: main
04-17 11:18:19.925: E/AndroidRuntime(368): java.lang.IllegalStateException: Could not execute method of the activity
04-17 11:18:19.925: E/AndroidRuntime(368):  at android.view.View$1.onClick(View.java:2072)
04-17 11:18:19.925: E/AndroidRuntime(368):  at android.view.View.performClick(View.java:2408)
04-17 11:18:19.925: E/AndroidRuntime(368):  at android.view.View$PerformClick.run(View.java:8816)
04-17 11:18:19.925: E/AndroidRuntime(368):  at android.os.Handler.handleCallback(Handler.java:587)
04-17 11:18:19.925: E/AndroidRuntime(368):  at android.os.Handler.dispatchMessage(Handler.java:92)
04-17 11:18:19.925: E/AndroidRuntime(368):  at android.os.Looper.loop(Looper.java:123)
04-17 11:18:19.925: E/AndroidRuntime(368):  at android.app.ActivityThread.main(ActivityThread.java:4627)
04-17 11:18:19.925: E/AndroidRuntime(368):  at java.lang.reflect.Method.invokeNative(Native Method)
04-17 11:18:19.925: E/AndroidRuntime(368):  at java.lang.reflect.Method.invoke(Method.java:521)
04-17 11:18:19.925: E/AndroidRuntime(368):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
04-17 11:18:19.925: E/AndroidRuntime(368):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
04-17 11:18:19.925: E/AndroidRuntime(368):  at dalvik.system.NativeStart.main(Native Method)
04-17 11:18:19.925: E/AndroidRuntime(368): Caused by: java.lang.reflect.InvocationTargetException
04-17 11:18:19.925: E/AndroidRuntime(368):  at com.UturpatShuPepper.LogCat.TheLogCatActivity.onGo(TheLogCatActivity.java:41)
04-17 11:18:19.925: E/AndroidRuntime(368):  at java.lang.reflect.Method.invokeNative(Native Method)
04-17 11:18:19.925: E/AndroidRuntime(368):  at java.lang.reflect.Method.invoke(Method.java:521)
04-17 11:18:19.925: E/AndroidRuntime(368):  at android.view.View$1.onClick(View.java:2067)
04-17 11:18:19.925: E/AndroidRuntime(368):  ... 11 more
04-17 11:18:19.925: E/AndroidRuntime(368): Caused by: java.lang.ClassCastException: android.app.Application
04-17 11:18:19.925: E/AndroidRuntime(368):  ... 15 more 
```

我跟着调试器，看到崩溃发生在下面的代码中，在标记的行中：

```
// Go button pressed
public void onGo(View v) {
    final EditText et = (EditText) findViewById(R.id.filters);
    String filter = "food\\s+[ABC]";
    if(!ValidateText(et, "^\\s*(" + filter + "(\\s+)" + filter + ")?$", "Bad filters")) {
        return;
    }
--->GlobalApp app = (GlobalApp) getApplication(); <--- CRASHES HERE
    for(int i = 0; i &lt; 100; i++) {
       app.addMessage("message number " + i);
    } 
```

根据日志，它是由 ClassCastException 引起的。

我将 GlobalApp 类定义如下：

```
public class GlobalApp extends Application {

private final ArrayList<String> messages = new ArrayList<String>();

public ArrayList<String> getMessages(){
    return messages;
}

public void addMessage(String msg){
    messages.add(msg);
}
} 
```

为什么选错了？正确的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T09:06:56.223

在你的清单中改变这个

```
<application android:icon="@drawable/icon" android:label="@string/app_name"> 
```

有了这个

```
<application android:icon="@drawable/icon" android:label="@string/app_name" android:name=".GlobalApp"> 
```

由于您没有说明操作系统的 android:name 会查找默认的 Application 类。为了将它指向您的 Application 子类，您应该使用 android:name 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T09:08:04.200

您应该将清单中的活动行修改为类似

`<activity android:name="GlobalApp" ...`

# javascript - Using DateTime instead of Date in Google chart CandlestickChart

> ID：10188114
> 
> 赞同：5
> 
> 时间：2012-04-17T08:56:19.110
> 
> 标签：javascript, google-visualization

I'm trying to use datetime instead of date to build chart using the Google-chart API.

Based on the sample from Google ([sample](https://google-developers.appspot.com/chart/interactive/docs/gallery/controls_375962c65645056cc8a1b843d259f20c.frame))

```
 var data = new google.visualization.DataTable();
    data.addColumn('date', 'Date');
    data.addColumn('number', 'Stock low');
    data.addColumn('number', 'Stock open');
    data.addColumn('number', 'Stock close');
    data.addColumn('number', 'Stock high');

 data.addRows([
                  [new Date(2008, 1 ,1), 1000, 1000, 1500, 2000],
                  [new Date(2008, 1 ,2), 500, 1000, 1500, 2500],
                  [new Date(2008, 1 ,3), 1000, 1000, 1500, 2000]
    ]); 
```

I can play with dates, but I want to use date & hours, something like

```
data.addRows([
              [new Date(2008, 1 ,1, 00, 00, 00), 1000, 1000, 1500, 2000],
              [new Date(2008, 1 ,1, 01, 00, 00), 500, 1000, 1500, 2500],
              [new Date(2008, 1 ,1, 02, 00, 00), 1000, 1000, 1500, 2000]

]); 
```

This give me the [following output](http://img15.hostingpics.net/pics/632918chartError.jpg)

Any idea ?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T22:18:39.197

为了澄清马克的答案，改变你的行

```
data.addColumn('date', 'Date'); 
```

至

```
data.addColumn('datetime', 'Time'); 
```

这似乎对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T05:02:03.160

你想要“日期时间”，而不是“日期”。

# android - Trouble recognizing digits in Tesseract - android

> ID：10188116
> 
> 赞同：8
> 
> 时间：2012-04-17T08:56:26.340
> 
> 标签：android, ocr, tesseract

I was hoping someone could tell me why it is my Tesseract has trouble recognizing some images with digits, and if there is something i can do about it. Everything is working according to test, and since it is only digits i need, i thought i could manage with the english pattern untill i had to start with the 7segmented display aswell.

Though i am having a lot of trouble with the appended images, i'd like to know if i should start working on my own recognition algorithms or if I could do my own datasets for Tesseract and then it would work, does anyone know where the limitation lies with Tesseract?

things tried: tried to set psm to one_line, one_word, one_char(and chop up the picture). With one_line and one_word there was no significant change. with one_char it did recognize a bit better, but sometimes, due to big spacing it attached an extra number to it, which then screwed it up, if you look at the attached image ![zero.jpg](../Images/fcd82d2d1a3cf8ffafd8381ab383e351.png) then it resulted in 04. I have also tried to do the binarization myself, this resulted in poorer recognition and was very rescource consuming. I have tried to invert the pictures, this makes no difference at all for tesseract.

I have attached the pictures i'd need, among others, to be processed.

Explaination about the images:

![decodethisimage_seven](../Images/54333900a7500c4f9d659135b0155f87.png) is a image that the tesseract has no trouble recognizing, though it has been made in word for the conveniences of building an app around a working image.

![decodethisimage_eight](../Images/1a3d2942ecee4f6bebfb3b01c869aadf.png) is real life image matching the image_seven. But it cannot recognize this.

![decodethisimage_four2](../Images/0e68da881a84b5231e0c9b991656fa87.png) is another image i'd like it to recognize, and yes i know it cant be skrewed, and i did unskrew(think skrew is the term here=="straighting") it when testing.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T14:56:09.130

Tesseract 不会为您进行分段。Tesseract 将在实际的 tesseract 算法之前对图像进行阈值处理。阈值处理后，图像中可能会保留一些边缘、伪影。

尝试手动将图像修改为黑白颜色，并查看 tesseract 作为输出返回的内容。

尝试阈值（自动）您的图像并查看 tesseract 作为输出返回的内容。阈值的输出可能太糟糕导致 tesseract 给出错误的输出。

由于阈值处理，您的第四张图像可能会失败（您有 3 种颜色：黑色背景、灰色背景和白色字母），并且阈值可能介于（黑色背景、灰色背景）之间。

一般来说，Tesseract 想要漂亮的黑白图像。可能需要对图像进行预处理以获得更好的结果。

对于您的第一张图像（结果为“04”），尝试查看框结果（char + 包含已识别字符的框的坐标）。“0”可能是一个小的人工制品——比如一个 4 x 4 的像素块。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T09:36:22.433

我知道一些可能对您有所帮助的选项：

1.  在图像边框和文本之间添加额外的空间。如果图像中的文本位于边缘，Tesseract 会很糟糕。
2.  复制您的图像。例如，如果您对单词“foobar”执行 OCR，克隆图像并将“foobar foobar foobar foobar foobar”发送到 tesseract，结果会更好。
3.  Google for`font training`和`image binarization`for tesseract。

请记住，移动设备中的内置摄像头大多会产生低质量的图像（模糊、噪点、歪斜等）。OCR 本身就是一个资源消耗过程，如果您在其中添加有价值的图像预处理，低端和中端移动设备设备（可能有 android）可能会面临出乎意料的性能下降甚至资源不足。这对于免费/研究项目来说是可以的，但如果你正在计划一个商业应用程序 - 考虑使用更好的 SDK。

有关详细信息，请查看此问题：[OCR for android](https://stackoverflow.com/questions/9517190/ocr-for-android/9517589#9517589)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T09:55:25.557

你可以试试 javaocr（[http://sourceforge.net/projects/javaocr/](http://sourceforge.net/projects/javaocr/)，是的，我是开发人员）

虽然没有正式发布，但您必须寻找来源（好消息：有工作的 android 示例，包括采样器、离线训练器和识别器应用程序）

如果你只有一种字体，你可以得到很好的结果（我在相同字体的数字上达到了 99.96 的识别率）

PS：它是纯java并且使用不变矩来执行匹配（所以缩放和旋转没有问题）。还有非常有效的二值化。

看看它的实际效果：

[https://play.google.com/store/apps/details?id=de.pribluda.android.ocrcall&feature=search_result#?t=W251bGwsMSwxLDEsImRlLnByaWJsdWRhLmFuZHJvaWQub2NyY2FsbCJd](https://play.google.com/store/apps/details?id=de.pribluda.android.ocrcall&feature=search_result#?t=W251bGwsMSwxLDEsImRlLnByaWJsdWRhLmFuZHJvaWQub2NyY2FsbCJd)

# c++ - inheritance with c++ templates

> ID：10188120
> 
> 赞同：0
> 
> 时间：2012-04-17T08:56:40.090
> 
> 标签：c++, templates, inheritance, compiler-errors, g++

> **Possible Duplicate:**
> [Inheritance and templates in C++ - why are methods invisible?](https://stackoverflow.com/questions/1567730/inheritance-and-templates-in-c-why-are-methods-invisible)
> [Why can't I use variable of parent class that is template class?](https://stackoverflow.com/questions/10171242/why-cant-i-use-variable-of-parent-class-that-is-template-class)

I'm trying to use template with inheritance and try to access public member of parent class from child class. But this is not compiling with g++.

```
template<class T>
class A
{
public:
A<T>* t;
};

template<class E>
class D:public A<E>
{
public:
        D()
        {
                t = 0;
        }
};

int main()
{
        D<int> d;
        return 0;
} 
```

compile error:

```
g++ Test.C Test.C: In constructor D<E>::D():
      Test.C:27: error: 't' was not declared in this scope 
```

# c# - 如何为接受 xml 文件路径作为参数的方法编写单元测试

> ID：10188123
> 
> 赞同：1
> 
> 时间：2012-04-17T08:56:48.983
> 
> 标签：c#, .net, unit-testing, typemock

我知道单元测试应该与任何依赖项隔离。我正在尝试使用 Typemock 为应用程序编写单元测试。问题是类中的方法之一接受几个 Xml 文件路径参数，然后在方法内创建一个 XMLDocument 对象，以便在方法的某处使用。

```
 public bool ValidateXml(String aFilePath, String ruleXmlPath)
 {
     XmlDocument myValidatedXml = new XmlDocument();
     try
     {
         myValidatedXml.Load(aFilePath);
     }
     catch
     {
         return false;
     }

     XmlDocument myRuleXml = new XmlDocument();
     try
     {
         myRuleXml.Load(ruleXmlPath);
     }
     catch
     {
         return false;
     }

     MyClass myObject = new MyClass(myValidatedXml);
     //Do something more with myObject.

     XmlNodeList rules = myRuleXml.SelectNodes("//rule");
     //Do something more with rules object.

     return true;
 } 
```

如何为此编写单元测试而无需指定物理位置？注意：不幸的是，我不允许更改代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T09:16:22.927

AB Kolan's suggestion is fine as a workaround. You could also have a set of test XML files in your test project and pass the paths to those files to your tested method in your tests.

However, let me make a general note that dependencies on file system should be isolated in the same fashoin as the dependencies on a database. In the case like yours I usually load a XML document from a stream or from a byte array that are provided by some kind of FileManager : IFileManager. This file manager encapsulates the file system operations.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T09:04:19.523

您始终可以创建一个临时 Xml 并传递临时文件的路径，然后在执行测试后将其删除。在 NUnit 中，这可以使用`[SetUp]`和`[TearDown]`属性轻松完成。

```
[TestFixture]
public class MyTest 
{
    private string tempPathXML;

    [SetUp]
    public void SetUp()
    {
        //Create XML file 
        // Save it in a temp path
    }

    [TearDown]
    public void TearDown()
    {
        //Delete the temp file
    }

    public void SampleTestForValidateXml()
    {
        //Test using tempPathXML
    }
} 
```

the `Setup` method is executed **before** each test case and the `Teardown` method is executed **after** each test case

**Note:** For MSTest the `[Setup]` and `[TearDown]` attribute can be replaced with `[TestInitialize]` and `[TestCleanup]` respectively. Thanks Cwan !

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T09:19:42.353

You should refactor, so You pass an XmlDocument. Or even better; a wrapper - let's call it XmlDocWrapper -- that encapsulates the XmlDocuments functionality. The wrapper can have an interface - IXmlDocWrapper. If you pass the interface, you can mock it when you want to test your class.

If you do it in this way, you leave the file system out of the equation which is ALWAYS good in unit tests.

# c# - 上一场比赛的正则表达式依赖

> ID：10188124
> 
> 赞同：0
> 
> 时间：2012-04-17T08:57:00.287
> 
> 标签：c#, regex

我正在阅读正则表达式，我正在尝试制作一个匹配日期/月/年格式的日期的表达式。

该表达式将有一些但不多的验证。例如`04/17/2012`，不是有效日期，因为没有第 17 个月。

我正在制作表达式，以便分隔符可以是`/`, `.`，`-`但`.`现在我希望它是组件之间的相同分隔符。有没有办法调整正则表达式，以便如果它匹配`/`日期和月份之间的分隔符（或任何其他），那么它只会匹配`/`月份和年份之间的分隔符（或之前匹配的分隔符）？

这是我现在的表达方式：

```
(0[1-9]|[1-2][0-9]|3[0-1]|[1-9])(/|\.( |)|-)(0[1-9]|1[0-2]|[1-9])(/|\.( |)|-)([0-9]{4}|[0-9]{2}) 
```

我将使用 C# 中的表达式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T08:59:00.130

反向引用`\2`可以解决您的问题：

```
^(19|20)\d\d([- /.])(0[1-9]|1[012])\2(0[1-9]|[12][0-9]|3[01])$ 
```

阅读这篇[文章](http://www.regular-expressions.info/dates.html)了解详情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T09:11:26.883

这是我的答案：

```
([0-2]\d|30|31)(/.-)(0\d|1[0-2])\2\d{4} 
```

使用反向引用 \2 并更喜欢 \d 到 [0-9]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T09:11:34.323

在您的搜索模式中使用反向引用 ( `\1`)，例如 (syntax untested)

```
\d+([-./])\d+\1\d+ 
```

或更详细地说（Python）

```
>>> pat = re.compile(r"""
... \d{2}          # day
... ([-./])        # separator
... \d{2}
... \1             # repeat of first separator
... \d{4}          # year
... """, re.VERBOSE )
>>> mystr
'The date is 17/04/2012'
>>> result = pat.search(mystr)
>>> result.group()
'17/04/2012' 
```

然后`\1`应该匹配`[-./]`为第一个分隔符获得的任何一个。

如果您确实想为生产目的执行此操作，则最好使用通用模式定位日期，然后使用适当的日期解析模块对其进行解析。这是因为日期有很多难以编码成正则表达式的边缘情况。（快速：给我写一个正确允许 29/02/2000，但不允许 29/02/2001 的正则表达式！）

# php - Facebook 元标记 PHP 条件

> ID：10188126
> 
> 赞同：0
> 
> 时间：2012-04-17T08:57:09.327
> 
> 标签：php, facebook, wordpress

我在尝试让这段代码为数组中的每个图像输出一个单独的 og:image 元标记时遇到问题。

```
 <?php    function catch_that_image() {
global $post, $posts;
$first_img = '';
ob_start();
ob_end_clean();
$output = preg_match_all('/<img.+src=[\'"]([^\'"]+)[\'"].*>/i', $post->post_content, $matches);
$first_img = $matches [1] [0];
if(empty($first_img)){
        //Defines a default image
        $first_img = "http://example.com/images/fbthumb.jpg";
    }
return $first_img;
}
 ?> 
```

目前该代码正在返回第一个匹配的 img src 标签，但我希望它将它们全部作为单独的标签返回，以便我可以选择要使用的共享图像。

我知道这一行：

```
 $first_img = $matches [1] [0]; 
```

需要针对每种情况更改为某种类型，但我不确定如何。任何帮助将不胜感激。谢谢！

编辑：

这是我在最后一个建议之后的代码：

```
<?php function catch_that_image() {
global $post, $posts;
$result = preg_match_all('#<img.+src=[\'"]([^\'"]+)[^>]*>#i', $post->post_content, $matches);

return $matches[1]; 
```

}

?>

" />

我还是想不通。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T09:24:09.077

试试这个功能。它将返回一个图像源数组。然后，您可以始终使用数组中的第一个图像作为默认图像。

```
function catch_that_image() {
    global $post, $posts;
    $imgSources = array();
    $result = preg_match_all('#<img.+src=[\'"]([^\'"]+)[^>]*>#i', $post->post_content, $matches);

    foreach($matches[1] as $match) {
        $imgSources[] = $match;
    }

    return $imgSources;
} 
```

或更简单

```
function catch_that_image() {
    global $post, $posts;
    $result = preg_match_all('#<img.+src=[\'"]([^\'"]+)[^>]*>#i', $post->post_content, $matches);

    return $matches[1];
} 
```

使用功能：

```
$imageArray = catch_that_image();
foreach($imageArray as $image) {
    echo '<meta property=​"og:​image" content=​"$image">';
} 
```

# android - 如何获取文本视图高度

> ID：10188128
> 
> 赞同：0
> 
> 时间：2012-04-17T08:57:12.917
> 
> 标签：android, textview

我的布局如下：

```
<LinearLayout
    android:id="@+id/layout"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="center_vertical"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <TextView
        android:id="@+id/info"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

我的代码如下：

```
TextView title = (TextView)findViewById(R.id.title);
title.setText("ABCDE...");
title.setTextSize(20);

TextView info = (TextView)findViewById(R.id.info);
info.setText("abcde...");
info.setTextSize(16);

LinearLayout layout = (LinearLayout)findViewById(R.id.layout); 
```

我想获取 TextView 标题和信息的高度，或者布局的高度。怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T09:01:50.247

您可以尝试 getLineHeight() 方法。如：

```
title.getLineHeight();
info.getLineHeight(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T09:02:23.703

`@Ovveride onWindowFocusChanged method in your activity`

```
 @Override
    public void onWindowFocusChanged(boolean hasFocus) {
        super.onWindowFocusChanged(hasFocus);

        int x = title.getHeight();
        int y = info.getHeight();
        int z = layout.getHeight();  
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T09:02:14.670

使用 View 的 getHeight() 函数。所以在这种情况下，info.getHeight()、layout.getHeight() 等。

# date - How make display several date/time with Ant , like your topic "output timestamp in ant"

> ID：10188129
> 
> 赞同：0
> 
> 时间：2012-04-17T08:57:18.140
> 
> 标签：date, ant, time

In one of your topic, named "output timestamp in ant", i've tested the 2 way explained in order to display several time in the same Ant script.

But, this 2 solutions don't work for me, Ant give me all the time the same date/time.

Anybody can explaine me why ?

I've found a solution (but note very perfet to my mind ) :

```
<tstamp>
    <format property="date.etape1" pattern="dd/MM/yyyy HH:mm:ss" />
</tstamp>
<echo message="${date.etape1} bla bla bla...." />
<tstamp>
    <format property="date.etape2" pattern="dd/MM/yyyy HH:mm:ss" />
</tstamp>
<echo message="${date.etape2} bla bla bla...." /> 
```

If somebody can explain me how make work one of the 2 solutions of the topic "output timestamp in ant", i would be very happy !!!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T09:41:15.627

根据 TSTAMP 来源，它应该可以工作（来源[在这里](http://javasourcecode.org/html/open-source/ant/ant-1.6.3/org/apache/tools/ant/taskdefs/Tstamp.java.html#line.65)） Date 对象总是被实例化。也许表面后面正在进行一些奇怪的任务回收？

我正在尝试使用这个 ant 构建文件

```
<project name="testTStamp" default="xxx" basedir=".">
    <target name="testMe"> 
        <MyTimestamp> </MyTimestamp> 
        <sleep seconds="5"> </sleep> 
        <MyTimestamp> </MyTimestamp> 
    </target> 

    <macrodef name="MyTimestamp"> 
        <sequential > 
            <tstamp> 
                <format property="current.time" pattern="MM/dd/yyyy hh:mm:ss aa"/> 
            </tstamp> 
            <echo message="RUN_TIME: ${current.time}"/> 
        </sequential> 
    </macrodef>

    <target name="default"> 
        <tstamp> 
            <format property="current.time_one" pattern="MM/dd/yyyy hh:mm:ss.SSS aa"/> 
        </tstamp> 
        <echo message="RUN_TIME: ${current.time_one}"/> 
        <sleep seconds="5"> </sleep> 
        <tstamp> 
            <format property="current.time_two" pattern="MM/dd/yyyy hh:mm:ss.SSS aa"/> 
        </tstamp> 
        <echo message="RUN_TIME: ${current.time_two}"/> 
    </target> 

    <target name='xxx' depends='default, testMe' />
</project> 
```

好的，如果在默认目标中，我确实更改了格式属性的名称，它可以工作。所以后面有一些缓存魔法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T16:26:48.487

Ant 中的[属性是不可变的；](http://ant.apache.org/manual/properties.html)它们*不是*变量。

[`<local>`](http://ant.apache.org/manual/Tasks/local.html)但是，您可能可以通过使用该任务来实现您想要的。此任务导致之后在`target`（或`sequential`，或任何其他块）中设置的属性仅在本地指定。

因此，如果您所有的时间戳回声都在单独的目标中，那么它将起作用。在单个目标中，您仍然需要使用多个属性，例如“time_start”、“time_end”等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-15T00:36:06.663

在跟进这个线程时，我读到macrodef 是一种更合适的方法，因为它在每次调用时都会不断实例化，所以没有缓存问题。我已经简化了他们的例子。我包含了我的整个文件，因此您可以将下面的代码保存为 clock.xml 并直接从 ant 运行它。

```
<project name="marktime" basedir=".">
<description>
    logstamp is a simple macrodef for ANT to echo a time stamp out to an open log.
    It is not written to pass back the current time, just simple echo to stdout.
            You are welcome to add which file to output the results to, add blurbs to messages.

</description>

<macrodef name="logstamp">
  <sequential>
  <local name="logtime"/>
  <tstamp>
    <format property="logtime" pattern="yyyy.MM.dd : HH:mm:ss z"/>
  </tstamp>
  <echo  message=" ### Current time now: ${logtime}"/>
  </sequential>
</macrodef>

<target
name="init"
description="boilerplate for all targets">
    <!-- Just run the Macrodef -->
<logstamp/>
<sleep seconds="5"> </sleep> 
<logstamp/>
<sleep seconds="5"> </sleep> 
<logstamp/>
<sleep seconds="5"> </sleep> 
<logstamp/>
<sleep seconds="5"> </sleep> 
<logstamp/>
</target>
</project> 
```

结果如下：

```
C:\desktop\>ant -f clock.xml init
Buildfile: C:\desktop\clock.xml

init:
     [echo]  ### Current time now: 2014.02.14 : 16:41:06 PST
     [echo]  ### Current time now: 2014.02.14 : 16:41:11 PST
     [echo]  ### Current time now: 2014.02.14 : 16:41:16 PST
     [echo]  ### Current time now: 2014.02.14 : 16:41:21 PST
     [echo]  ### Current time now: 2014.02.14 : 16:41:26 PST

BUILD SUCCESSFUL
Total time: 20 seconds 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-19T16:50:44.300

根据 Bee Kay 的回答，此宏通过避免使用“本地”，而是在“宏定义”上使用“属性”来与 ANT 1.7 版一起使用：

```
<project name="echotime" basedir="." default="echotime">
<description>
echotime is a simple macrodef for ANT to echo a time stamp to an open log.
It is not written to pass back the current time, just simple echo to stdout.
</description>

<macrodef name="echotime">
    <attribute name="logtime" default="" />
    <sequential>
        <tstamp>
            <format property="logtime" pattern="yyyy.MM.dd HH:mm:ss z" />
        </tstamp>
        <echo message="Build finished at ${logtime}" />
    </sequential>
</macrodef>

<target name="echotime">
    <echo message="${ant.version}" />
    <echotime />
</target> 
```

结果如下：

```
>ant -buildfile echotime.xml
Buildfile: echotime.xml

echotime:
     [echo] Apache Ant version 1.7.1 compiled on June 27 2008
     [echo] Build finished at 2019.12.19 11:43:29 EST

BUILD SUCCESSFUL
Total time: 0 seconds 
```

# mysql - 在 SQL 查询中计算不同行的条件

> ID：10188131
> 
> 赞同：0
> 
> 时间：2012-04-17T08:57:34.857
> 
> 标签：mysql, sql

我在 MySQL 数据库中有一个带有 ID 列的表。这不是表的键，并且多行可以具有相同的 ID。

我不太了解 SQL，但我已经知道如何获取不同 ID 的数量：

```
SELECT COUNT(DISTINCT ID) FROM mytable; 
```

现在我只想计算在表中出现超过 2 次的那些 ID。

因此，如果 ID 列包含值

```
 3 4 4 5 5 5 6 7 7 7 
```

查询应返回 2。

我不知道该怎么做。我希望有一个人可以帮助我！

顺便说一句，我的表包含大量行。因此，如果有多种可能性，我也很乐意知道哪种解决方案最有效。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T09:01:39.763

试试这个：

```
SELECT COUNT(ID) FROM (
    SELECT ID FROM mytable
    GROUP BY ID
    HAVING COUNT(ID) > 2) p 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T09:04:30.150

```
SELECT 
      COUNT(ids)
FROM 
      (SELECT 
           COUNT(ID)AS ids 
       FROM 
           mytable 
       GROUP BY 
           ID
       HAVING 
           ids>2
       )AS tbl1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T09:06:00.473

```
select count(*) from 
    (select count(id) as cnt,id from mytable group by id) da 
where da.cnt>2 
```

内部查询将为您提供每个 id 有多少元素。外部查询将对此进行过滤。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T09:03:50.257

更新 ：

```
SELECT count(ID) 
FROM (
SELECT ID FROM mytable
GROUP BY ID
HAVING count(ID) > 2
) p 
```

应该做你需要的

# spring - JSP form nested checkboxes

> ID：10188132
> 
> 赞同：1
> 
> 时间：2012-04-17T08:57:36.997
> 
> 标签：spring, jsp

A project was passed onto me a short while ago which uses JSP for the view and spring 3.1 for the controller - both of which I have little experience in and as per usual, there are about 4 comments in the whole thing. Anyway, my issue is this, in replacing a

```
<form:checkboxes path="class.list" items="${items}" delimiter="<br />" /> 
```

With

```
<c:forEach var="item" varStatus="vs" items="${items}">
    <form:checkbox path="class.list" item="${item}" />
    // check if nesting is required, if so create div and nested list point to class.list.children
</c:forEach> 
```

Seems to create additional elements in my class.list which are not selected leading to a break further on.

Any guidance would be greatly appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T04:22:28.757

我建议保留 form:checkboxes 完整，因为它是生成复选框的紧凑方式。如果弹簧表格标签已经到位并且可以工作，我不知道有什么令人信服的理由不使用它。至于为什么您会看到隐藏字段。见这里： [http ://static.springsource.org/spring/docs/2.5.x/reference/view.html](http://static.springsource.org/spring/docs/2.5.x/reference/view.html)

以下是相关部分：您可能不会看到每个复选框后的附加隐藏字段。当 HTML 页面中的复选框未选中时，一旦提交表单，其值将不会作为 HTTP 请求参数的一部分发送到服务器，因此我们需要针对 HTML 中的这种怪癖的解决方法，以便进行 Spring 表单数据绑定去工作。复选框标记遵循现有的 Spring 约定，即为每个复选框包含一个以下划线 ("_") 为前缀的隐藏参数。通过这样做，您实际上是在告诉 Spring“复选框在表单中是可见的，并且我希望表单数据绑定到的对象无论如何都反映复选框的状态”。

希望这可以帮助。

# java - Grails 是否是开发与 Cassandra 协同工作的 Web 应用程序的好选择？

> ID：10188133
> 
> 赞同：2
> 
> 时间：2012-04-17T08:57:43.727
> 
> 标签：java, ruby-on-rails, grails, cassandra

我工作的这家初创公司最近面临着一个艰难的技术决策。我们即将开发一个应该处理大量金融交易的 Web 应用程序。经过长时间的研究，我们发现 Cassandra 最适合我们的需求，并且我们倾向于用 Java 编写后端。

问题是我们不确定前端本身。我们感觉 Grails 在学习曲线和生产力方面对我们有好处，但我们不确定 Cassandra 有多好，而且……总的来说，与我们的 Spring MVC 相比，它是否是一个不错的选择'比较熟悉，Ruby on Rails、PHP 等。

我们非常感谢您对此的意见，当然，如果听到任何关于我们用 Java 编写后端的想法的评论，我们将非常感激（尽管我知道我们没有写太多关于我们的应用程序的内容）。

提前感谢大家！stackoverflow.com 的粉丝 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T19:38:28.050

在正常的 grails 术语中，有一个插件

[https://github.com/wolpert/grails-cassandra](https://github.com/wolpert/grails-cassandra)

现在我没有任何使用 cassandra 的经验，但我已经完成了几个处理大量数据的 grails 应用程序，并且每个应用程序都取得了很好的成功。

最重要的是 PIMS

[http://news.xerox.com/pr/xerox/new-web-based-tool-for-xerox-igen4-production-information-management-system.aspx](http://news.xerox.com/pr/xerox/new-web-based-tool-for-xerox-igen4-production-information-management-system.aspx)

这实际上可能接近您实际在做的事情。它在客户端使用 grails、jquery、jquery-ui，然后有很多 java 后端与 grails/groovy 逻辑混合

它可以毫无问题地处理后端 Java 逻辑的日志。

最难做对的是数据库……但无论你决定使用什么技术，你都会遇到这个问题

# android - Rotate Image to tilt down

> ID：10188135
> 
> 赞同：0
> 
> 时间：2012-04-17T08:57:51.073
> 
> 标签：android, android-animation

I need to add to my translate animation a rotate animation that tilts the left corner down 2 degrees and will be able to stay that way also at the end of the translate. Any idea?

```
<set xmlns:android="http://schemas.android.com/apk/res/android"
android:fillAfter="true" >

<!-- Move Two -->
<translate
    android:fillAfter="true"
    android:fillEnabled="true"
    android:fromXDelta="-350"
    android:toXDelta="-700" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T10:10:48.263

请试试这个

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android"
     android:fillEnabled="true"
     android:fillAfter="true">
     <rotate
         android:fromDegrees="0"
         android:toDegrees="2"
         android:duration="1000"/>
     <translate
         android:fromXDelta="0"
         android:toXDelta="-100" 
         android:duration="1000"/>
</set> 
```

根据您的视图位置更改翻译标签的值

通过 AnimationUtils.loadAnimation() 方法将此动画添加到您的视图中

# monodevelop - 为什么输入 D 代码时 MonoDevelop 2.9.4 会出错？

> ID：10188139
> 
> 赞同：2
> 
> 时间：2012-04-17T08:58:08.553
> 
> 标签：monodevelop, d

C# 项目中的 C# 代码很好。但是，如果我尝试在 D 项目文件中输入任何内容，则会收到以下错误：

```
System.MissingMethodException: Method not found: 'Mono.TextEditor.DocumentLine Mono.TextEditor.TextEditorData.GetLine(Int32)'.
   at MonoDevelop.D.Formatting.DTextEditorIndentation.KeyPress(Key key, Char keyChar, ModifierType modifier)
   at MonoDevelop.Ide.Gui.Content.TextEditorExtension.KeyPress(Key key, Char keyChar, ModifierType modifier)
   at MonoDevelop.Ide.Gui.Content.CompletionTextEditorExtension.KeyPress(Key key, Char keyChar, ModifierType modifier)
   at MonoDevelop.D.DEditorCompletionExtension.KeyPress(Key key, Char keyChar, ModifierType modifier)
   at MonoDevelop.Ide.Gui.Content.TextEditorExtension.KeyPress(Key key, Char keyChar, ModifierType modifier)
   at MonoDevelop.Ide.Gui.Content.TextEditorExtension.KeyPress(Key key, Char keyChar, ModifierType modifier)
   at MonoDevelop.Ide.Gui.Content.TextEditorExtension.KeyPress(Key key, Char keyChar, ModifierType modifier)
   at MonoDevelop.Ide.Gui.Content.TextEditorExtension.KeyPress(Key key, Char keyChar, ModifierType modifier)
   at MonoDevelop.SourceEditor.ExtensibleTextEditor.ExtensionKeyPress(Key key, UInt32 ch, ModifierType state) 
```

也许是一个错误。也许我的设置有误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T20:07:14.313

我有同样的问题。您需要获取 MonoDevelop (2.9.5) 的最新更新，以使 mono-d 正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T12:58:38.827

自 2.8.x 稳定版本以来，MonoDevelop 2.9.x alphas/betas 有许多 API 更改，因此需要移植第三方插件才能正常工作。

# php - 在 Drupal 7 中使用 AJAX 加载数据的最佳方式

> ID：10188145
> 
> 赞同：2
> 
> 时间：2012-04-17T08:58:48.563
> 
> 标签：php, jquery, ajax, drupal, drupal-7

在 Drupal 7 中加载异步数据的最佳方式是什么？

目前我正在用我自己的节点用 jQuery 加载我的数据。我已经建立了一个自己的 menu_hook，它可以在下面使用`/events`，例如，`/events/2012-04-17`这个页面也可以用于正常浏览。我检查是否`$_SERVER['HTTP_X_REQUESTED_WITH']`设置了我以 JSON 字符串返回数据并解析数据。

如果我激活一些缓存技术，我会遇到一些麻烦吗？还是有更好的方法来加载数据？似乎这不适用于 boost，因为我正在杀死脚本，`die()`我还能做什么？

```
function my_module_menu() {
    $items['events'] = array(
        'page callback' => 'event_page',
        'access callback' => TRUE,
        'type' => MENU_LOCAL_TASK,
    );
    $items['events/%date'] = array(
        'page callback' => 'event_page',
        'page arguments' => array(2),
        'access callback' => TRUE,
        'type' => MENU_VISIBLE_IN_BREADCRUMB,
    );
    return $items;
}

function event_page($date=null) {
    $build=array();
    // add some other "controls"
    $build['submit'] = array(
        '#type' => 'submit',
        '#value' => t('Save'),
    );

    if((isset($_SERVER['HTTP_X_REQUESTED_WITH']) && 'XMLHttpRequest' == $_SERVER['HTTP_X_REQUESTED_WITH']) || strpos($_SERVER['REQUEST_URI'], '?json')!==FALSE) {
        header('Cache-Control: no-cache, must-revalidate');
        header('Content-type: application/json', true);
        $json=loadData();
        die(json_encode($json));
    }

    return $build;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T17:24:10.117

您可以改用[drupal_json_output](http://api.drupal.org/api/drupal/includes!common.inc/function/drupal_json_output/7)，这将自动更改标头，因此不需要 exit()。

[另一种选择是使用hook_page_delivery_callback](http://api.drupal.org/api/drupal/includes!ajax.inc/group/ajax_commands/7)结合来自 $_SERVER 的数据更改特定路径上的传递回调，然后使用[ajax_command](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_page_delivery_callback_alter/7)返回页面的有效数组。

第一个选项要容易得多，我自己从未尝试过第二个选项，但对于您的情况来说可能太多了。不幸的是，我不知道这两种技术中的任何一种如何与 boost 一起使用，但希望其中一种能够奏效。

# android - 我自己的应用程序作为 ANDROID 中的锁屏

> ID：10188150
> 
> 赞同：0
> 
> 时间：2012-04-17T08:59:08.473
> 
> 标签：android, lockscreen

> **可能重复：**
> [android锁屏源代码](https://stackoverflow.com/questions/2140964/android-lock-screen-source-code)

我创建了一个应用程序，其中包含 2 个活动。一是设置APassword，二是实现登录。我如何在 Android 中将此应用程序作为 LockScreen 放置？它应该永久运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T09:04:14.337

只是我的一个猜测

1.  禁用返回键
2.  禁用主页键
3.  没有菜单
4.  听设备的启动启动并再次启动您的屏幕
5.  仅在成功登录调用完成（）

对于任务 1,2,3 搜索 stackoverflow 。他们肯定在那里..

在 android 中也有用于制作自己的主屏幕/启动器屏幕的选项。例如 android 中的 go_launcher 应用程序

禁用主页键尝试这个完整的活动代码是

```
package com.lockscreen;

import android.app.Activity;
import android.app.KeyguardManager;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuItem;
import android.view.WindowManager;

public class LockScreenActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    KeyguardManager keyguardManager = (KeyguardManager) getSystemService(Activity.KEYGUARD_SERVICE);
    KeyguardManager.KeyguardLock lock = keyguardManager
            .newKeyguardLock(KEYGUARD_SERVICE);
    lock.disableKeyguard();

}

@Override
public void onBackPressed() {

}

@Override
public void onAttachedToWindow() {
    // TODO Auto-generated method stub
    this.getWindow().setType(WindowManager.LayoutParams.TYPE_KEYGUARD);
    super.onAttachedToWindow();
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {

    menu.add("Exit");
    return super.onCreateOptionsMenu(menu);
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {

    if (item.getTitle().equals("Exit")) {
        finish();
        System.runFinalizersOnExit(true);
        System.exit(0);
    }
    return super.onOptionsItemSelected(item);
}

} 
```

清单需要许可

```
<uses-permission
    android:name="android.permission.DISABLE_KEYGUARD"></uses-permission> 
```

# javascript - 如何在不使用 CSS 大纲属性的情况下设置大纲？

> ID：10188153
> 
> 赞同：1
> 
> 时间：2012-04-17T08:59:15.660
> 
> 标签：javascript, css

我想用 Javascript 和 CSS 设置鼠标悬停元素的轮廓。

在 chrome 中，CSS 大纲属性运行良好，但在 Internet Explorer 中不行（我使用 IE9）。

我测试了 CSS 边框属性，但它减少了实际内容的宽度。

我的目的是在没有 CSS 大纲属性的情况下设置大纲，并且内容的区域没有改变。

该解决方案应支持 IE 7~9，如果还支持 IE6 则最好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T09:02:07.017

`<div>`用透明边框将元素包裹在 a中。在鼠标悬停时为边框着色。

如果您不介意内容宽度减少一个常数，即内容宽度不会在鼠标悬停时改变，您可以将透明边框添加到元素本身（以及鼠标悬停时的颜色）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T09:03:11.540

*我测试了 CSS 边框属性，但它减少了实际内容的宽度。*

是的，您必须调整布局的其余部分以考虑您引入的 x 像素的边界 - 它会从某个地方占用空间，由您设置适当的尺寸、边距和填充来补偿。

# .net-4.0 - 如何在 .NET 中锁定非托管内存

> ID：10188154
> 
> 赞同：0
> 
> 时间：2012-04-17T08:59:17.527
> 
> 标签：.net-4.0, asp.net-4.0, shared-memory

我正在考虑使用 MemoryMappedFile 在多个进程之间共享内存。
虽然一个进程正在读取和写入（以及更多），但我不希望另一个进程访问内存。

如果可能，我该如何实施？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T10:14:40.453

在处理进程间同步时，通常使用诸如[Mutex](http://msdn.microsoft.com/en-us/library/system.threading.mutex.aspx)或[Semaphore之类的同步对象。](http://msdn.microsoft.com/en-us/library/system.threading.semaphore.aspx)[命名互斥锁](http://msdn.microsoft.com/en-us/library/f55ddskf.aspx)可以在进程之间共享并提供您想要的东西，特别是如果您在单独的进程上运行托管和非托管代码。

但是请注意，由具有更高权限的进程创建的互斥锁对于具有较少权限的进程将无法访问。当您在具有某种管理员权限的 Windows 服务上创建互斥锁，然后尝试从作为网络服务启动的 IIS Web 应用程序访问互斥锁时，可能会发生这种情况。

# jquery - 从 cakePHP 控制器中检索 json 数组

> ID：10188157
> 
> 赞同：4
> 
> 时间：2012-04-17T08:59:32.427
> 
> 标签：jquery, ajax, cakephp, controller

我想从 cakePHP 控制器返回一个 JSON 数组。我实际上有一个 jquery 点击事件，它应该发送一个帖子、ajax 或获取对控制器的调用（用 URL 指定），并且该控制器应该只返回数组。这对我来说很有意义，因为我不会创建视图文件，而是将响应发送到控制器，然后我可以设置标头，回显 json 数组并可能退出。

我的输出在控制台上只显示“数组”，并没有回显数组中的任何参数。有任何想法吗？

```
// jQuery code:
$("selector").click(function() {
      $.post("/controller/view/param1/param2/",function(data) {
         console.log(data);
      } 
}

// code in my controller:
public function view($param1 = false, $param2 = false) {
       $array = array("Name" => "John");
       header("Content-type: application/json");
       echo $array;
      exit;
} 
```

编辑：找到解决方案 - **echo $array**必须是**echo json_encode($array)**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T09:03:13.990

```
public function view($param1 = false, $param2 = false) {
       $array = array("Name" => "John");
       header("Content-type: application/json"); // not necessary
       echo json_encode($array);
      exit;
} 
```

# php - 如何使用维基百科 API

> ID：10188162
> 
> 赞同：2
> 
> 时间：2012-04-17T08:59:53.967
> 
> 标签：php, api

我想尝试从 wikipedia 获取网球运动员的描述，而不会刮伤运动员 x 上的 DOM 页面。这是不允许的，而且很无聊。所以，我希望有人可以回答我唯一的问题。

我可以用 Wikipedia API 做什么？我可以轻松获取有关网球运动员收藏的信息吗？或者此 API 不适用于此。如果没有，我需要有人告诉我这个 API 的目的是什么，因为我不理解文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T09:07:10.020

您可以获取这样的文章：

[http://en.wikipedia.org/w/index.php?title=Stackoverflow&printable=yes](http://en.wikipedia.org/w/index.php?title=Stackoverflow&printable=yes)

或使用 API：

[http://en.wikipedia.org/w/api.php?action=query&prop=revisions&titles=Stack%20Overflow&rvprop=content](http://en.wikipedia.org/w/api.php?action=query&prop=revisions&titles=Stack%20Overflow&rvprop=content)

这将为您提供原始文章代码。要获取 html 版本，请使用`action=parse`：

[http://en.wikipedia.org/w/api.php?action=parse&format=json&page=Stack_Overflow](http://en.wikipedia.org/w/api.php?action=parse&format=json&page=Stack_Overflow)

还可以查看文档：[http ://www.mediawiki.org/wiki/API](http://www.mediawiki.org/wiki/API)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T09:16:07.833

看看[Wikipedia API Sandbox](http://en.wikipedia.org/wiki/Special%3aApiSandbox) - 你可以使用它来尝试获取你需要的信息。

要从页面获取信息，您可以使用*parse*操作。

为了获取丹麦网球运动员 Caroline Wozniacki 的信息，我使用了*parse*动作和*json*格式。在我粘贴
的标记为**page**`Caroline_Wozniacki`的字段中，我按下了*Make Request*。

这给了我这个 URL：[http](http://en.wikipedia.org/w/api.php?action=parse&format=json&page=Caroline_Wozniacki)
://en.wikipedia.org/w/api.php?action=parse&format= json&page=Caroline_Wozniacki 这包含带有链接、引用和所有 JSON 格式的页面。

# python - 我的项目有什么错误？

> ID：10188165
> 
> 赞同：0
> 
> 时间：2012-04-17T09:00:02.080
> 
> 标签：python, django, mongodb, pymongo, non-relational-database

我在我的 python(2.7) 项目中使用 mongodb 和 django 框架..当我给 python manage.py runserver 它会工作但是如果我同步 db (python manage.py syncdb) 终端中显示以下错误

```
Creating tables ...  
Traceback (most recent call last):
  File "manage.py", line 14, in <module>
    execute_manager(settings)   
  File "/usr/lib/pymodules/python2.7/django/core/management/__init__.py", line 438, in execute_manager 
    utility.execute()  
  File "/usr/lib/pymodules/python2.7/django/core/management/__init__.py", line 379, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)  
  File "/usr/lib/pymodules/python2.7/django/core/management/base.py", line 191, in run_from_argv
    self.execute(*args, **options.__dict__)  
  File "/usr/lib/pymodules/python2.7/django/core/management/base.py", line 220, in execute
    output = self.handle(*args, **options)
  File "/usr/lib/pymodules/python2.7/django/core/management/base.py", line 351, in handle
    return self.handle_noargs(**options)
  File "/usr/lib/pymodules/python2.7/django/core/management/commands/syncdb.py", line 109, in handle_noargs
    emit_post_sync_signal(created_models, verbosity, interactive, db)
  File "/usr/lib/pymodules/python2.7/django/core/management/sql.py", line 190, in emit_post_sync_signal
    interactive=interactive, db=db)  
  File "/usr/lib/pymodules/python2.7/django/dispatch/dispatcher.py", line 172, in send
    response = receiver(signal=self, sender=sender, **named)  
  File "/usr/lib/pymodules/python2.7/django/contrib/auth/management/__init__.py", line 41, in create_permissions
    "content_type", "codename"  
  File "/usr/lib/pymodules/python2.7/django/db/models/query.py", line 107, in _result_iter
    self._fill_cache()  
  File "/usr/lib/pymodules/python2.7/django/db/models/query.py", line 772, in _fill_cache
    self._result_cache.append(self._iter.next())
  File "/usr/lib/pymodules/python2.7/django/db/models/query.py", line 959, in iterator
    for row in self.query.get_compiler(self.db).results_iter():
  File "/usr/local/lib/python2.7/dist-packages/djangotoolbox/db/basecompiler.py", line 229, in results_iter
    for entity in self.build_query(fields).fetch(low_mark, high_mark):
  File "/usr/local/lib/python2.7/dist-packages/djangotoolbox/db/basecompiler.py", line 290, in build_query
    query.order_by(self._get_ordering())
  File "/usr/local/lib/python2.7/dist-packages/djangotoolbox/db/basecompiler.py", line 339, in _get_ordering
    raise DatabaseError("Ordering can't span tables on non-relational backends (%s)" % order) 
```

和

```
django.db.utils.DatabaseError: Ordering can't span tables on non-relational backends (content_type__app_label) 
```

如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T18:57:13.997

您需要使用 Django-nonrel 而不是 Django。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T09:45:42.577

我已经将 mongoengine 与 django 一起使用，但您需要创建一个类似 mongo_models.py 的文件。在该文件中定义您的 Mongo 文档。然后，您创建表单以匹配每个 Mongo 文档。每个表单都有一个保存方法，用于插入或更新存储在 Mongo 中的内容。Django 表单旨在插入任何数据后端（需要一些技巧）

注意：如果您有可以在文档或模型中描述的非常明确和结构化的数据，那么不要使用 Mongo。它不是为此而设计的，像 PostGreSQL 这样的东西会更好地工作。

*   我将 PostGreSQL 用于关系数据或结构良好的数据，因为它对此有好处。内存占用小，响应好。
*   我使用 Redis 来缓存或在内存队列/列表中操作，因为它非常适合。出色的性能，只要您有足够的内存来应对它。
*   我使用 Mongo 来存储大型 JSON 文档并对其执行 Map 和 reduce（如果需要），因为它非常适合。如果可以加快查找速度，请务必在某些列上使用索引。

不要用圆圈来填充方孔。它不会填满它。

我看到太多帖子有人想用 Mongo 交换关系数据库，因为 Mongo 是一个流行词。不要误会我的意思，Mongo 真的很棒......当你适当地使用它时。我喜欢适当地使用 Mongo

# tsql - T-SQL：错误：8114，严重性：16，状态：5 将数据类型 varchar 转换为浮点数时出错

> ID：10188167
> 
> 赞同：1
> 
> 时间：2012-04-17T09:00:21.817
> 
> 标签：tsql

我正在调试一个大量使用 t-sql 存储过程的 java 应用程序。有时我会收到帖子的标题错误。我想我已经找到了错误发生的地方，但是 T-SQL 不在我的技能范围之内。有人可以确认我是对的并提出解决方案吗？

SQL Server 2005 堆栈跟踪显示以下消息：

```
set @prezzoUnitario2f = funcCtrlConvertToFloat] (@prezzoUnitario2)
IF @prezzoUnitario2f IS NULL OR cast(@prezzoUnitario2f as varchar) = '' OR @prezzoUnitario2f < 0
SET @defaultValue = NULL
IF ((select ISNUMERIC(@valueIn)) = 1) 
```

> 错误：8114，严重性：16，状态：5
> 将数据类型 varchar 转换为浮点数时出错。

这是存储过程调用`funcCtrlConvertToFloat`函数的地方：

```
set @prezzoUnitario2f = [C4].[dbo].[funcCtrlConvertToFloat] (@prezzoUnitario2) --CONVERT(float,replace(@prezzoUnitario2,',','.')) 
```

这是`funcCtrlConvertToFloat`功能：

```
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
ALTER FUNCTION [dbo].[funcCtrlConvertToFloat]
(
@valueIn varchar(100)
)
RETURNS float
AS
BEGIN
DECLARE @defaultValue float
DECLARE @returnValue float
SET @defaultValue = NULL
--SET @valueIn = ISNULL(@valueIn, 0)

IF ((select ISNUMERIC(@valueIn)) = 1)
BEGIN
SET @returnValue = CONVERT(float,replace(@valueIn ,',','.'))
END
ELSE
BEGIN
SET @returnValue = @defaultValue
END

RETURN @returnValue
END 
```

正如我所说，我不是 T-SQL 程序员，所以任何提示将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T09:15:35.453

我想以下应该可以解决您的问题：

```
 ALTER FUNCTION [dbo].[funcCtrlConvertToFloat] (
            @valueIn varchar(100)
    )
    RETURNS float
    AS BEGIN

    -- declare result variable and set a default value
    DECLARE @result float;
    SET @result = NULL;

    -- adjust @valueIn decimal separator
    SET @valueIn = REPLACE(@valueIn, ',', '.');

    -- if @valueIn is numeric set its value to the @result
    IF (ISNUMERIC(@valueIn) = 1)
    BEGIN
            SET @result = CONVERT(FLOAT, @valueIn);
    END

    RETURN @result;
    END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T09:18:58.830

我可以看到您的函数在转换之前检查 @valueIn 是否为数字。很遗憾`t-sql ISNUMERIC() function returns true for varchar values with group digit simbols (i.e. comma)`

例如;

```
SELECT ISNUMERIC('12,345,678') returns true but fails in convertion 
```

在您的函数中，请在检查之前从 @valueIn 中删除分组字符，如下所示

```
--New line to replace grouping char
SELECT @valueIn = REPLACE(@valueIn,',','')

IF ((SELECT ISNUMERIC(@valueIn)) = 1)
---Rest of the function 
```

希望这可以帮助

# objective-c - 如何使用 Cocos2D(iOS) 创建多关卡游戏？

> ID：10188170
> 
> 赞同：3
> 
> 时间：2012-04-17T09:00:49.517
> 
> 标签：objective-c, ios, xcode, cocos2d-iphone

1.  我想知道如何用 cocos2d 创建多层次的游戏。
2.  我知道像《愤怒的小鸟》、《割绳子》这样的大开发商都有自己的关卡编辑器，但其他人如何制作多关卡游戏呢？

**问题：**我如何创建/构建关卡，是否有任何类型的构建器？或者您需要为每个级别创建课程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T12:10:01.103

我正在使用单个场景/图层并从 XML 动态加载关卡数据（地图图像、碰撞、敌人编队定义……）。这取决于您的要求。你的地图是无穷无尽的吗？[在http://www.iuridium.com/?page_id=2](http://www.iuridium.com/?page_id=2)上查找有关我的解决方案的更多信息。此外，这可能会对您有所帮助：http: [//www.levelhelper.org](http://www.levelhelper.org)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T19:32:09.283

我目前正在为即将推出的游戏使用 Levelhelper。它确实有助于并大大减少了开发时间。您无需编写自己的解析器和跟踪错误的 xml 文件，而是获得了一个具有许多功能的漂亮编辑器。如果你没有无尽的关卡，我会推荐它。

# android - 如何在 cocos2d for android 中使用 CCFollow？

> ID：10188177
> 
> 赞同：2
> 
> 时间：2012-04-17T09:01:23.710
> 
> 标签：android, cocos2d-iphone

我想在我的游戏中使用 CCFollow。但我不知道如何使用它。

在周维宽-cocos2d Testbed项目中，CCFollow就是这样使用的

```
CCSprite grossini;
CGSize winSize = CCDirector.sharedDirector().winSize();

grossini.setPosition(CGPoint.ccp(-200, winSize.height/2));

CCMoveBy move = CCMoveBy.action(2, CGPoint.ccp(winSize.width*3,0));
CCMoveBy move_back = move.reverse();
CCSequence seq = CCSequence.actions(move, move_back);
CCRepeatForever rep = CCRepeatForever.action(seq);

grossini.runAction(rep);

this.runAction(CCFollow.action(grossini, CGRect.make(0, 0, (winSize.width*2)-100, winSize.height))); 
```

这是该层的标题

“精灵应该居中，即使它正在移动”

但它不起作用。精灵正在左右移动。

任何人都可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T14:24:56.403

可能是边界问题。尝试更改 runAction 方法：

```
this.runAction(CCFollow.action(grossini)); 
```

# ios - UITableViewController 与 UITableView

> ID：10188179
> 
> 赞同：1
> 
> 时间：2012-04-17T09:01:34.187
> 
> 标签：ios, uitableview

当我尝试这些不同的设置时，我在一个应用程序中有 2 个控制器。

一个是 UITableViewController，我理解的方式是委托和数据源是从超类中提取的。

现在按照这个理论，我现在还有一个 UIViewController，上面有一个 UITableView，在头文件中我已经声明了 Datasource 和 Delegate。

到目前为止，一切都很好：-）

现在这是我不明白的一点：

在实现文件中，我可以使用 tableView 指针链接数据，但我使用的是 Core Data，并且我有这段代码：

```
- (void)controllerWillChangeContent:(NSFetchedResultsController *)controller
  {   
  [self.tableView beginUpdates];
  } 
```

如果我没有设置

```
IBOutlet UITableView *tableView; 
```

当然是合成的:-)

但是，如果我声明这个 tableView，我会收到一条警告，要求在一行上加倍：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath: (NSIndexPath *)indexPath
{
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];
[self configureCell:cell atIndexPath:indexPath];
return cell;
} 
```

因为它还声明了一个tableView。

所以我有两个问题：

1) 如果我设置了 UITableViewDatasource 和 Delegate，为什么还要设置 IBOutlet？

2）如果我给 UITableViewCell 一个不同的指针名称 - 比如 tableView2，为什么我在编辑数据时看不到更改，而只能在重新启动应用程序后看到结果？

MasterViewController，也就是 UITableViewController 没有这个选项。

干杯杰夫

---添加图像----

![在此处输入图像描述](../Images/06aae29ac113113819516641705ea9f9.png)

![在此处输入图像描述](../Images/368eaf4043700147cffe9ae17b3193b5.png)

* * *

要进入编辑模式，我在 viewDidLoad 中有这段代码

```
self.navigationItem.leftBarButtonItem = self.editButtonItem; 
```

我使用此代码来执行需要完成的操作：

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath 
```

{ if (editingStyle == UITableViewCellEditingStyleDelete) { NSManagedObjectContext *context = [self.fetchedResultsController managedObjectContext]; [上下文删除对象：[self.fetchedResultsController objectAtIndexPath:indexPath]]；

```
 NSError *error = nil;
    if (![context save:&error]) {
        // Replace this implementation with code to handle the error appropriately.
        // abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. 
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }
}   
} 
```

现在 + 选项有效，但我仅在重新启动应用程序后才能看到结果。我可以滑动和删除，但它不会在应用程序的同一个实例中实时动画。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T09:16:26.210

您已经声明了一个名为 tableView 的属性，并且可能只是用相同的名称合成了它。

`UITableViewController`还有一个名为 tableView 的属性，但支持 ivar 可能会被称为不同的东西，可能`_tableView`正是因为默认的 tableview 数据源和委托方法通常传入一个名为的参数`tableView`，在方法的范围内，它与您的实例变量发生冲突。

在那个方法里面，是什么`tableView`意思？传入的参数，还是你的 ivar？

在回答您的具体问题时：

1.  当您的视图控制器需要与表视图通信时（例如当您告诉它开始更新时），您需要这些实例的插座。当表格视图需要与您的视图控制器通信时（例如当它要求一个单元格时），数据源和委托连接就在那里。

2.  我不确定你在这里问什么，你可以调用任何你喜欢的表视图的出口，但你还必须更改发送消息的所有内容`self.tableView`。为了一致性，我会像这样合成属性：

    ```
    @synthesize tableView = _tableview; 
    ```

    这首先防止了一个名为`tableView`存在的 ivar。我假设您尚未声明 ivar，并且仅将属性声明为 IBOutlet？：

    ```
    @property (nonatomic) IBOutlet UITableView *tableView; 
    ```

# arrays - 在 GLSL 着色器中使用小型查找表

> ID：10188180
> 
> 赞同：2
> 
> 时间：2012-04-17T09:01:39.303
> 
> 标签：arrays, vector, glsl, lookup

我有一个片段着色器，我想构建一个小型查找表并在其上进行插值。我当前的代码是这样的（抱歉冗长）：

```
float inverse_f(float r)
{

    // Build a lookup table on the radius, as a fixed-size table.
    // We will use a vec3 since we will store the multipled number in the Z coordinate.
    // So to recap: x will be the radius, y will be the f(x) distortion, and Z will be x * y;
    vec3[32] lut;

    // Flame has no overflow bbox so we can safely max out at the image edge, plus some cushion
    float max_r = sqrt((adsk_input1_aspect * adsk_input1_aspect) + 1) + 0.1;
    float incr = max_r / 32;
    float lut_r = 0;
    float f;
    for(int i=0; i < 32; i++) {
        f = distortion_f(lut_r);
        lut[i] = vec3(lut_r, f, lut_r * f);
        lut_r += incr;
    }

    float df;
    float dz;
    float t;

    // Now find the nehgbouring elements
    for(int i=0; i < 32; i++) {
        if(lut[i].z < r) {
            // found!
            df = lut[i+1].y - lut[i].y;
            dz = lut[i+1].z - lut[i].z;
            t = (r - lut[i].z) / dz;
            return df * t;
        }
    }
} 
```

我正在使用#version 120。但是它不起作用（调用此函数的所有迭代都返回相同的值）。所以要么我对数组做错了（它被填充了相同的值），要么for循环的返回不起作用，因为循环以某种我不理解的方式展开。有没有什么东西会引起这种行为（独立于传入的 R 值返回的相同值）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T17:16:45.700

好吧，事实证明我在这里犯了 3 个错误。

首先，我需要找到两个元素在它们之间进行插值，所以条件需要是

```
 lut[i].z > r && lut[i-1].z < r 
```

其次，我在线性插值中犯了一个错误，因为我需要将左元组的初始值添加到结果中。

而且，作为最后的无赖，其中一件制服被命名为错误，因此它默认为 0，从而破坏了计算。最终版本（或多或少）是这样的：

```
float inverse_f(float r)
{

    // Build a lookup table on the radius, as a fixed-size table.
    // We will use a vec3 since we will store the multipled number in the Z coordinate.
    // So to recap: x will be the radius, y will be the f(x) distortion, and Z will be x * y;
    vec3[32] lut;

    // Flame has no overflow bbox so we can safely max out at the image edge, plus some cushion
    float max_r = sqrt((adsk_input1_frameratio * adsk_input1_frameratio) + 1) + 1;
    float incr = max_r / 32;
    float lut_r = 0;
    float f;
    for(int i=0; i < 32; i++) {
        f = distortion_f(lut_r);
        lut[i] = vec3(lut_r, f, lut_r * f);
        lut_r += incr;
    }

    float df;
    float dr;
    float t;

    // Now find the nehgbouring elements
    for(int i=0; i < 32; i++) {
        if(lut[i].z > r && lut[i-1].z < r) {
            // found!
            df = lut[i+1].y - lut[i].y;
            dr = lut[i+1].z - lut[i].z;
            t = (r - lut[i].z) / dr;
            return lut[i].y + (df * t);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T17:55:39.550

代码看起来应该可以工作，但如果查找表是完全统一的（adsk_input1_frameratio 是统一的 var，而失真_f 没有读取任何变化），那么最好在 CPU 上计算 lut 并使其成为统一的设置制服时计算一次的数组。

# c# - GridView中EditButton的OnClick事件

> ID：10188182
> 
> 赞同：0
> 
> 时间：2012-04-17T09:01:40.210
> 
> 标签：c#, asp.net, gridview

我正在使用中的`OnClick`事件`EditButton``GridView`

```
protected void editclick(object sender, EventArgs e)
{
    try
    {
        Button EditButton = (Button)gvUserMaster.FindControl("edit_btn");
        tblAddEdit.Visible = true;
    }
    catch(Exception ex)
    {
    }
} 
```

但我得到了例外：

> 找到具有相同 ID 'lblUserName' 的多个控件。FindControl 要求控件具有唯一的 ID。

我尝试使用 foreach 循环，但这也不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T11:05:23.397

我通过在编辑按钮单击事件上编写编辑函数来解决并获得所选行的行ID。

```
int rindex = (((GridViewRow)(((Button)(sender)).Parent.BindingContainer))).RowIndex;
 Button EditButton = (Button)gvUserMaster.Rows[rindex].FindControl("btnEdit"); 
```

rindex 为您提供 rowindex 和 EditButton 为您提供所选行的 id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T11:30:04.310

使用模板字段添加按钮

```
<asp:TemplateField HeaderText="Edit">
    <ItemTemplate>
        <asp:LinkButton runat="server" ID="lnkEdit" Text="Edit"
            CausesValidation="false" CommandArgument='<%# Container.DataItemIndex %>'
            OnCommand="lnkEdit_Command"></asp:LinkButton>
    </ItemTemplate>
</asp:TemplateField> 
```

在后面的代码中：

```
protected void lnkEdit_Command(object sender, System.Web.UI.WebControls.CommandEventArgs e)
{
    id = e.CommandArgument.ToString();
    --add your code
} 
```

您将在 id 中获得行索引

# c++ - 避免在本地范围内动态分配

> ID：10188189
> 
> 赞同：1
> 
> 时间：2012-04-17T09:01:58.310
> 
> 标签：c++, pointers, dynamic, reference

我的代码中有一个片段：

```
const std::pair<Info, const ElementHandler&>& handle () const {
                    FileHandler fileHandler = FileHandler();
                    std::pair<Info, const ElementHandler&> result = std::pair<Info, const FileHandler&> ( info, fileHandler );
                    return result;
                } 
```

我有以下编译错误：

```
error: cannot declare field ‘std::pair<Synchronizer::Info, Synchronizer::ElementHandler>::second’ to be of abstract type ‘Synchronizer::ElementHandler’ 
```

我如何编写代码来保留这个想法？有可能，还是我需要使用指针和动态分配？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T09:16:26.287

> “避免在本地范围内动态分配”。

如果这是您损坏的代码背后的驱动需求，那么我不会跟风告诉您如何修复它以做您不想要的事情;-)。相反，您必须正确考虑其影响。您必须有一些变量，其范围与调用者的需求相匹配。必须排除局部自动变量——它们在函数返回时被销毁。所以，你可以：

*   使用函数作用域`static`变量或全局变量，但每次调用函数时都是同一个变量，并且可能存在线程安全问题（您的编译器可能支持某些线程特定的关键字，并且 POSIX 具有支持线程的函数- 特定数据 - 但每个线程 1 个对象可能仍然过于受限）
*   为许多变量创建一些带有空间的缓冲区，并控制它们的生命周期并以适合客户端代码的某种方式重用（例如，在知道客户端将按照它们返回的顺序释放它们并且永远不需要超过同时数组大小）
*   让客户端代码担心生命周期（他们可能比你知道的更多）并提供一个你要加载结果的变量（例如`bool load_my_x(X&);`）
    *   这里的一个问题是调用者需要为 FileHandler 分配空间，而不仅仅是 ElementHandler

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T09:08:24.060

1.  `fileHandler`与 一起分配`new`，或者可能作为某种`shared_ptr`。`fileHandler`一旦函数退出，当前对的引用将无效。
2.  按值返回`result`，而不是按引用返回。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T09:10:47.803

无论如何，您都需要使用动态分配。

在您的函数中，您正在创建一个局部变量“fileHandler”并返回对它的引用。一旦函数返回，'fileHandler' 就会超出范围并被破坏，从而使引用无效。

我认为您可以使用智能指针（unique_ptr、shared_ptr、...）很好地解决这个问题。您的智能指针可以指向 ElementHandler，如果 ElementHandler 有一个虚拟析构函数，那么如果该对被删除或超出范围，它就会被正确地析构。

# c# - 通过引用传递的缺点是什么？

> ID：10188191
> 
> 赞同：0
> 
> 时间：2012-04-17T09:02:07.887
> 
> 标签：c#, .net

最近我发现自己越来越养成通过引用传递事物的习惯。我一直被教导通过 ref 传递“通常”是一个坏主意，因为跟踪可能影响您的对象的东西比较棘手，所以我想发布一个问题：**“通过引用传递的缺点是什么？ '**

我最近通过引用传递的一个示例是视图状态中的惰性实例化对象。在我的代码隐藏中，我有一个带有公共属性的私有字段，它使用了一个辅助方法。目前的实现如下：

ASPX 代码隐藏

```
/// <summary>
/// Private field member for MyObject
/// </summary>
private Foobar _myObject = null;

/// <summary>
/// Gets or sets the current object
/// </summary>
public Foobar MyObject
{
    get
    {
        return this.ViewState.GetValue("MyObject", new Foobar(), ref this._myObject);
    }
    set
    {
        this.ViewState.SetValue("MyObject", value, ref this._myObject);
    }
} 
```

这旨在替换`if`针对类中的字段和惰性实例化对象的大量重复分配检查。例如，如果没有辅助类，它将类似于。

```
/// <summary>
/// Private field member for MyObject
/// </summary>
private Foobar _myObject = null;

/// <summary>
/// Gets or sets the current object
/// </summary>
public Foobar MyObject
{
    get
    {
        if (this._myObject != null)
        {
            return this._myObject;
        }

        var viewStateValue = this.ViewState["MyObject"];
        if (viewStateValue == null || !(viewStateValue is Foobar))
        {
            this.ViewState["MyObject"] = new Foobar();
        }

        return this._myObject = (Foobar)this.ViewState["MyObject"];
    }
    set
    {
        this._myObject = value;
        this.ViewState["MyObject"] = value;
    }
} 
```

两个代码片段都实现了相同的目标。第一种方法是集中一切，这是一件好事，但是它是通过引用传递的，在这种情况下我不确定这是一个好主意吗？

非常感谢任何建议和/或经验。

**编辑**`GetValue`and`SetValue`是 ViewState 上的扩展方法 。下面提供了代码。

```
/// <summary>
/// Gets a value from the current view state, if the type is correct and present
/// </summary>
public static T GetValue<T>(this StateBag source, string key, T @default)
{
    // check if the view state object exists, and is of the correct type
    object value = source[key];
    if (value == null || !(value is T))
    {
        return @default;
    }

    // return the object from the view state
    return (T)source[key];
}

/// <summary>
/// Sets the key value within the view state
/// </summary>
public static void SetValue<T>(this StateBag source, string key, T value)
{
    source[key] = value;
}

/// <summary>
/// Gets a value from the reference field helper, or the current view state, if the type is correct and present
/// </summary>
/// <returns>Returns a strongly typed session object, or default value</returns>
public static T GetValue<T>(this StateBag source, string key, T @default, ref T fieldHelper)
{
    return fieldHelper != null ? fieldHelper : fieldHelper = source.GetValue(key, @default);
}

/// <summary>
/// Sets the key value within the view state and the field helper
/// </summary>
/// <param name="value">The value</param>
public static void SetValue<T>(this StateBag source, string key, T value, ref T fieldHelper)
{
    source[key] = value;
    fieldHelper = value;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T10:03:19.533

在这种情况下，只需考虑一些选项。

您可以使用更少的代码行且无需引用来实现相同的结果：

```
get
{
    if (this._myObject == null)
        this._myObject = this.ViewState.GetValue<Foobar>("MyObject", new Foobar());
    return this._myObject;
} 
```

ViewState.GetValue 如果存在则从 ViewState 返回对象，或者设置并返回默认值 (new FooBar())。我认为这是进行惰性属性初始化的非常规范的方法（或者您也可以在 .Net 4.0 中使用 Lazy）。您甚至可以将其压缩为一行：

```
return this._myObject = this._myObject ?? this.ViewState.GetValue("MyObject", new Foobar()) 
```

此外，您可以通过设置私有字段的 Action 而不是通过 ref 传递：

```
this.ViewState.GetValue("MyObject", new Foobar(), newValue => this._myObject = newValue); 
```

我认为这样 ViewState 和 Foobar 的耦合度较低。

而且，您可以传递 () => Foorbar() （或 Lazy），而不是每次都为默认值创建 new Foorbar()，这样它只会在需要时创建一次。

因此，至少对于您的情况，我没有看到任何使用 ref 的充分理由。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T11:58:18.597

感谢 Dave，忍不住尝试了 Lazy<> 类 :-)。

```
public class Foobar
{
}

public class ViewState
{
  private readonly Lazy<Foobar> _foobar = new Lazy<Foobar>();

  public Foobar LazyFoobar
  {
    get { return _foobar.Value; }
  }
}

// Gets or creates the foobar
Foobar lazyFoobar = this.ViewState.LazyFoobar; 
```

为 for 实现一个类`ViewState`将具有以下优点：

1.  这是类型安全的
2.  懒加载容易集成
3.  不需要缓存对象（更稳定）
4.  代码可读
5.  代码很快（没有类型转换）

回答您最初的问题：传递引用允许其他代码替换对象。我们必须相信被调用的函数，它不会将此引用传递给其他对象，并在以后随时替换原始对象。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-17T09:54:06.413

强制通过引用仅对原始对象（如字符串或 int）感兴趣。

如果不使用 ref，则仅在函数中传递值，但指向内存中的不同对象。

如果您使用“ref”或不使用“ref”，那么像类这样的复杂对象总是通过引用传递......这根本没有区别;-)

# profiling - opreport 的“%”列始终显示 0.0000

> ID：10188192
> 
> 赞同：0
> 
> 时间：2012-04-17T09:02:09.150
> 
> 标签：profiling, oprofile

我正在使用 oprofile 来调整我的应用程序的性能。以下是我收集分析数据的方式：

```
platform info: virtual machine (KVM-based), linux kernel 2.6.21, x86 64bit, 

1\. opcontrol --init
2\. opcontrol --no-vmlinux -p library -c 100
3\. opcontrol --status

Separate options: library
vmlinux file: none
Image filter: none
Call-graph depth: 100

4\. opcontrol -s
5\. /*running my application*/
6\. opcontrol -h
7\. opreport -l my_application

20136     0.0000  no-vmlinux               no-vmlinux               /no-vmlinux
1311      0.0000  libcrypto.so.0.9.8       lighttpd                 /opt/ccnsr/lib64/libcrypto.so.0.9.8
455       0.0000  libxml2.so.2.6.26        my_application                     /opt/ccnsr/lib64/libxml2.so.2.6.26
350       0.0000  libc-2.5.90.so           my_application           _int_malloc
195       0.0000  libpython2.4.so.1.0      python                   PyEval_EvalFrame
142       0.0000  libc-2.5.90.so           my_application           vfprintf
79        0.0000  libc-2.5.90.so           my_application           _IO_default_xsputn 
```

opreport 的“%”列总是显示 0.0000！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T16:14:50.520

如果您编写一个主要执行 I/O 的小应用程序，并在挂钟（而不是 CPU）时间上进行采样，并显示独占百分比，您会看到每个百分比都非常接近于零。

原因是程序几乎所有时间都在等待先前启动的 IO 完成。因此，与花费在等待上的时间相比，它在*任何例程中花费的时间几乎为零。*

# javascript - 等待一个变量存在然后在javascript中做一些事情

> ID：10188196
> 
> 赞同：2
> 
> 时间：2012-04-17T09:02:18.240
> 
> 标签：javascript, multithreading, function, callback

我有一个脚本将在加载它必须读取的变量之前执行..

这是我的脚本，将首先执行

```
funcThatWaits(varToWait).ready(function(){
        //callback time!!
    alert("varToBeWait is Ready!!");
}); 
```

这是接下来要加载的脚本

```
var varToWait=null; 
```

我想要的只是创建一个函数，该函数将等待变量存在并在检测到变量已存在时自动执行回调。（这意味着当变量不存在时它会等待）

这可能吗？我的第一个脚本完全复制在 jquery 的 $(document).ready() 函数上，该函数等待 DOM 完全加载......这对于 JS 变量是否可行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T09:13:13.480

如果您的变量来自另一个函数（并且可能来自另一个范围），那么您可以传递一个回调并在第二个函数执行回调时为其提供变量。您无需等待它何时存在，但您将*等到第二个脚本为您提供它*。

```
//in the second script:

var varIWant = 'foo'

function fromSecondScript(callback){
    callback(varIWant);
}

//in the first script:

function fromFirstScript(){
    fromSecondScript(function(theVar){
        //"theVar" in this function scope is "varIWant" from the other scope
    })
} 
```

* * *

另一种方法是预先定义一个加载器脚本来聚合回调并在设置变量后调用它们：

```
var aggregator = (function(){
    var stored = {};

    return {
        //adds a callback to storage
        addCallback : function(varName,callback){
            if(!stored.hasOwnProperty(varName)){
                stored[varName] = [];
            }
            stored[varName].push(callback);
        },
        //executes stored callbacks providing them data
        execute : function(varName,data){
            if(stored.hasOwnProperty(varName)){
                for(var i=0;i<stored[varName].length;i++){
                    stored[varName][i](data)
                }
            }
        }
}());

//in the first script add callbacks. you can add any number of callbacks
aggregator.addCallback('VarExists',function(theVar){
    //do what you want when it exists
});

aggregator.addCallback('VarExists',function(theVar){
    //another callback to execute when var exists
});

//in the second script, execute the callbacks of the given name
aggregator.execute('VarExists',theVarYouWantToShare); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-01T04:51:46.443

## 介绍

我发现的唯一方法是创建一个成熟的跟踪机制。

当前接受的答案可以完成这项工作，但我个人更喜欢隐藏实现细节。

## 准备

我们将创建一个类来跟踪事物。

```
/* ChangeTracker.js */

// Mechanism to keep track of when a variable is set.
class ChangeTracker {
  constructor() {
    this._value = null;            // <- the var we're waiting for
    this._valueAlreadySet = false; // <- used to track first set
    this._singleListeners = [];    // <- used for one-off requests
    this._multiListeners = [];     // <- used for recurring requests
  }

  // Using this, you'll be notified the first time the value changes. If the
  // value has already been set, you'll be notified immediately.
  getOnce(callback) {
    if (this._valueAlreadySet) {
      callback(this._value);
    }
    else {
      this._singleListeners.push(callback);
    }
  }

  // Using this, you'll be notified every time the value changes. If the value
  // has already been set, you'll be notified immediately.
  getEveryChange(callback) {
    this._multiListeners.push(callback);
    if (this._valueAlreadySet) {
      callback(this._value);
    }
  }

  // Sets the value, then notifies those waiting for it.
  setValue(value) {
    this._value = value;
    if (!this._valueAlreadySet) {
      this._valueAlreadySet = true;

      // Notify all one-off listeners.
      const singleListeners = this._singleListeners;
      for (let i = 0; i < singleListeners.length; i++) {
        singleListeners[i](value);
      }

      // Mark for garbage collection.
      this._singleListeners = null;
    }

    // Notify all subscribers.
    for (let i = 0; i < this._multiListeners.length; i++) {
      this._multiListeners[i](value);
    }
  }
} 
```

## 数据源

我们将装载一艘宇宙飞船。它最终会有我们的变量，但它是异步的并且需要很长时间来初始化。

```
/* shipLoader.js */

// We will store a 1GB spaceship in here.
const spaceship = new ChangeTracker();

// Simulate a long loading process:
setTimeout(() => {
  spaceship.setValue({ name: 'Friday', color: 'Lilac' });
}, 6174);

// Player gets into a bigger spaceship:
setTimeout(() => {
  spaceship.setValue({ name: 'The Unshakeable', color: 'Blood red' });
}, 9999); 
```

## 消费者

以下脚本需要该变量。它会要求它，并在第一次设置时继续。请注意，运行顺序无关紧要 - 无论此代码先运行还是宇宙飞船先加载，这都会起作用。

```
/* activateHud.js */

// Receive the value when it's set, then do some processing.
spaceship.getOnce((value) => {
  console.log('Got spaceship:', value);
  // ^-> Got spaceship: { name: 'Friday', color: 'Lilac' }
}); 
```

## 记录器

如果您只关心获取当前值，则上述方法可以正常工作。下面我们有一个记录器，它将跟踪所有未来的变化：

```
/* logger.js */

// Log the value every time it changes.
spaceship.getEveryChange((value) => {
  const date = new Date().toLocaleString();
  console.log(`[${date}] New spaceship loaded:`, value);
  // ^-> New spaceship loaded: { name: 'Friday', color: 'Lilac' }
  //   > New spaceship loaded: { name: 'The Unshakeable', color: 'Blood red' }
}); 
```

## 优化一点

每次设置值时，上面的类都会通知所有`getEveryChange`侦听器，即使它与以前的值完全相同。如果不希望这样做，您可以通过添加`if (this._value === value) return;`到`setValue`类方法来防止这种行为。

# c# - 实现 Postsharp EventInterceptionAspect 以防止事件处理程序被钩住两次

> ID：10188203
> 
> 赞同：1
> 
> 时间：2012-04-17T09:02:33.300
> 
> 标签：c#, event-handling, postsharp

如果您使用相同的订阅多次订阅 .net 事件，那么您的订阅方法将被调用与订阅相同的时间。而且，如果您只取消订阅一次，那么通话只会减一分。这意味着您必须取消订阅的次数与订阅的次数相同，否则您将收到通知。有时你不想这样做。

为了防止一个事件处理程序被钩住两次，我们可以实现如下事件。

```
private EventHandler foo;
public event EventHandler Foo
{
    add
    {
        if( foo == null || !foo.GetInvocationList().Contains(value) )
        {
            foo += value;
        }
    }
    remove
    {
        foo -= value;
    }
} 
```

现在我想实现 Postsharp EventInterceptionAspect 以使这个解决方案通用，这样我就可以应用于`PreventEventHookedTwiceAttribute`每个事件以节省大量代码。但我不知道如何在 add.xml 中检查以下条件的第二部分。我的意思是 foo.GetInvocationList().Contains(value)。我的 PreventEventHookedTwiceAttribute 如下所示。

```
[Serializable]
public class PreventEventHookedTwiceAttribute: EventInterceptionAspect
{
    public override void OnAddHandler(EventInterceptionArgs args)
    {
        if(args.Event == null || secondConditionRequired) // secondConditionRequired means it is required.            
        {
            args.ProceedAddHandler();
        }
    }
} 
```

我不需要重写 OnRemoveHandler，因为这里的默认功能就足够了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T16:17:55.140

这个类可以解决问题。

```
[Serializable]
public class PreventEventHookedTwiceAttribute: EventInterceptionAspect
{
    private readonly object _lockObject = new object();
    readonly List<Delegate> _delegates = new List<Delegate>();

    public override void OnAddHandler(EventInterceptionArgs args)
    {
        lock(_lockObject)
        {
            if(!_delegates.Contains(args.Handler))
            {
                _delegates.Add(args.Handler);
                args.ProceedAddHandler();
            }
        }
    }

    public override void OnRemoveHandler(EventInterceptionArgs args)
    {
        lock(_lockObject)
        {
            if(_delegates.Contains(args.Handler))
            {
                _delegates.Remove(args.Handler);
                args.ProceedRemoveHandler();
            }
        }
    }
} 
```

显示差异的示例用法如下所示。

```
class Program
    {
        private static readonly object _lockObject = new object();
        private static int _counter = 1;

        [PreventEventHookedTwice]
        public static event Action<string> GoodEvent;

        public static event Action<string> BadEvent;

        public static void Handler (string message)
        {
            lock(_lockObject)
            {
                Console.WriteLine(_counter +": "+ message);
                _counter++;
            }
        }

        static void Main(string[] args)
        {
            GoodEvent += Handler;
            GoodEvent += Handler;
            GoodEvent += Handler;
            GoodEvent += Handler;
            GoodEvent += Handler;
            Console.WriteLine("Firing Good Event. Good Event is subscribed 5 times from the same Handler.");
            GoodEvent("Good Event is Invoked.");

            _counter = 1;
            BadEvent += Handler;
            BadEvent += Handler;
            BadEvent += Handler;
            BadEvent += Handler;
            BadEvent += Handler;
            Console.WriteLine("Firing Bad Event. Bad Event is subscribed 5 times from the same Handler.");
            BadEvent("Bad Event is Invoked.");

            _counter = 1;
            GoodEvent -= Handler;
            Console.WriteLine("GoodEvent is unsubscribed just once. Now fire the Event");
            if(GoodEvent!= null)
            {
                GoodEvent("Good Event Fired");
            }
            Console.WriteLine("Event is not received to Handler.");

            BadEvent -= Handler;
            Console.WriteLine("BadEvent is unsubscribed just once. Now fire the Event");
            BadEvent("Good Event Fired");
            Console.WriteLine("Event is fired 4 times. If u subscribe good event 5 times then u have to unscribe it for 5 times, otherwise u will be keep informed.");

            Console.ReadLine();
        }
    } 
```

锋利的岩石。

# c# - 使用 ActionResult 中的字符串返回一个匹配的记录？

> ID：10188208
> 
> 赞同：0
> 
> 时间：2012-04-17T09:02:56.313
> 
> 标签：c#, asp.net-mvc-3, razor

我在使用 MVC3 框架并从我的数据库中提取特定数据时遇到问题：

以下 ActionResult 包含一个名为 searchString 的字符串，并且是一个 Director Name，我想使用搜索字符串来检索与该名称匹配的数据并将其传递给视图，以便它可以显示：

```
 public ActionResult Index(string searchString)
    {
        var director = from d in db.Directors select d;

        director = director.Where(searchString == d.Name);

        return View(director);
    } 
```

董事姓名作为 Director.Name 存储在数据库中。

如何检索名称 == searchString 的主管？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T09:05:12.293

您的查询可能匹配多行：

```
public ActionResult Index(string searchString)
{
    var directors = 
        from d in db.Directors 
        where d.Name == searchString
        select d;
    return View(directors);
} 
```

并且您的视图现在可以被强输入为`IEnumerable<Director>`：

```
@model IEnumerable<Director>
@foreach (var director in Model)
{
    <div>@item.Name</div>
} 
```

如果你只想得到一个导演，你可以使用 FirstOrDefault 方法：

```
var director = 
    (from d in db.Directors 
     where d.Name == searchString
     select d
    ).FirstOrDefault(); 
```

如果没有结果与您的查询匹配，这将返回结果集的第一行或 null。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T09:05:26.900

利用

```
 director = director.Where(d => d.Name == searchString); 
```

# delphi - 从类成员中读取属性

> ID：10188209
> 
> 赞同：0
> 
> 时间：2012-04-17T09:02:59.493
> 
> 标签：delphi, properties, delphi-xe2

为什么下面的简单类型定义不能编译？

```
type
  SomeType = class(TObject)
    ID: Cardinal;
  end;

  AnotherType = class(TObject)
    Some: SomeType;
    property ID: Cardinal read Some.ID;  // E2467
  end; 
```

它给出了[E2467 Record or object type required](http://docwiki.embarcadero.com/RADStudio/en/E2467_Record_or_object_type_required_%28Delphi%29)，*当尝试从不是记录或对象的变量访问属性时会发生这种情况。*

但`Some`它是一个对象，对吧？这是编译器错误（我使用的是最新的 XE2）吗？如果这是预期的行为，那么做我想做的事情的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T09:20:06.677

属性访问器必须是属性所属的同一类的直接数据成员或直接方法。

尝试：

```
 AnotherType = class(TObject)
    function GetId: cardinal;
    property ID: Cardinal read GetId; 
 end; 
```

错误消息几乎说明了一切。“Some.ID”不是记录或对象。它是数据成员的数据成员 - 不同的东西。

# python - 为什么全局变量在 Python 的不同函数中不起作用？

> ID：10188210
> 
> 赞同：1
> 
> 时间：2012-04-17T09:03:03.720
> 
> 标签：python

我是 Python 的初学者。我写了如下代码只是为了练习..请看

```
i=1
def wrte():
 global i
 while i<5:
     print "%s .Line..\n" %i
     i+=1

def appnd():
  j=i
  while i in range(i,j+3):
     print "%s .Line..\n" %i
     i+=1

def Main():
   wrte()
   appnd()

Main() 
```

输出如下

```
 1 .Line..

    2 .Line..

    3 .Line..

    4 .Line..

**Traceback (most recent call last):
  Line 18, in <module>
    Main()
  Line 16, in Main
    appnd()
  Line 9, in appnd
    j=i
UnboundLocalError: local variable 'i' referenced before assignment** 
```

预期结果:: 下一个序列应该像这样附加

```
5\. Line..
6\. Line..
7\. Line.. 
```

请帮我解决这个问题..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T09:06:37.370

您需要在`global`使用该变量的每个函数中进行定义。

```
def appnd():
   global i 
```

注意：如果可能，将全局变量和相关函数移动到一个类中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T09:16:27.887

下一个定义将起作用：

```
def appnd():
  j=i
  while i in range(i,j+3):
     print "%s .Line..\n" %i

# it would print infinitely, but will work 
```

在编译时，Python 会查看函数中使用变量的方式来定义查找它们的范围。在您对它的定义中，`appnd`它看到了 assign for ，`i`因此试图将其作为局部变量来威胁。在我的代码中没有赋值，所以 Python 只是`i`从父作用域获取值——在这种情况下`i`，它既不是局部的也不是全局的，它称为*自由变量*。 [执行模型 - 范围和绑定](http://docs.python.org/reference/executionmodel.html#naming-and-binding)- 强烈推荐阅读。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T09:18:08.877

我想你知道什么时候应该使用 global，否则它不会出现在你的 write 函数中。如果你只读取变量，你可以省略它，我认为你想要在你的 append 函数中，但是你有一个 i+=1 ，所以你修改它。只需将附加更改为：

```
for line in range(i, i + 3):
    print "%s .Line..\n" % line 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T09:13:22.497

您的定义范围是本地的。如果在函数中将变量声明为全局变量，并不意味着它将应用于所有函数。您还必须在 appnd() 函数中将 i 声明为全局。话虽如此，但这并不意味着你的风格是正确的。您宁愿将变量传递给函数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-17T09:07:37.393

添加

```
global i 
```

前

```
j=i 
```

应该解决问题

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-25T09:48:46.390

在**appnd**函数中，您必须创建全局变量**i**。

```
i=1
def wrte():
 global i
 while i<5:
     print "%s .Line..\n" %i
     i+=1

def appnd():
    global i
    j=i
    while i in range(i,j+3):
        print "%s .Line..\n" %i
        i+=1

def Main():
   wrte()
   appnd()

Main() 
```

# sift - 匹配多幅图像时的 SIFT 特征匹配性能

> ID：10188214
> 
> 赞同：2
> 
> 时间：2012-04-17T09:03:16.770
> 
> 标签：sift, kdtree, knn

我有一个图像库，有约 5000 张图像和约 150 个特征。现在我有另一个具有约 300 个特征的图像，我想在我的库中找到 5 个最相似的图像。

蛮力大约需要 300 * 5000 * 150 * 128 次操作，花费太多时间。所以我为我库中每个图像的特征构建了一个 kd-tree，这意味着大约 5000 个 kd-tree。我像其他筛选库一样使用[bbf 搜索](http://en.wikipedia.org/wiki/Best_bin_first)近似最近的邻居。但是性能变得比我的蛮力算法还要慢。为了确保这不是我实现的错，我修改了其他库的匹配算法以蛮力，它们的性能也有所提高。

我的问题是有没有可能将〜5000 kd-trees组合成一棵树？或者是否有其他方法可以在匹配多个图像时提高性能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T04:54:31.150

您可以考虑使用[Locality Sensitive Hashing](http://en.wikipedia.org/wiki/Locality-sensitive_hashing)，如果不是 100% 准确的话，它应该会更快。

# zend-framework - Zend_Form 元素以错误的顺序呈现

> ID：10188218
> 
> 赞同：0
> 
> 时间：2012-04-17T09:03:34.203
> 
> 标签：zend-framework, zend-form, zend-form-element

在我的表单中添加元素后，我让它们以一种奇怪的顺序呈现，在一个复选框之前获得提交按钮。希望能提供有关在哪里检查**快速**修复的提示。

```
class SomeForm extends My_Form {
    public function init() {
        $this->addElements();
        //add a few elements (#1)

        $this->addElements($otherForm->getElements());
        //borrow some elements from another form (#2)

        if ($trueCondition=true) {
            $this->addElements();
            //add one more element which will render at end of form (#3)
        }

        $this->addElements();
        //some more, including submit button (#4)

        parent::init();
        //call My_Form to register custom decorator; culprit?
    }
} 
```

输出：

```
<inputs from addElements() #1 />
<inputs from addElements() #2 />
<inputs from addElements() #4 />   <-
<inputs from addElements() #3 />   <- mixed up order 
```

所有其他使用自定义装饰器的表单都按照添加的顺序呈现元素。我没有发布装饰器，因为它很乱。希望错误出在其他地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T12:38:00.980

我尝试使用此代码重现您的问题：-

```
$formA = new Zend_Form();
$formB = new Zend_Form();
$formA->addElement(new Zend_Form_Element_Text('formA_text1'));
$formA->addElement(new Zend_Form_Element_Text('formA_text2'));
$formB->addElement(new Zend_Form_Element_Text('formB_text1'));
$formB->addElement(new Zend_Form_Element_Text('formB_text2'));

$formA->addElements($formB->getElements());
$formA->addElement(new Zend_Form_Element_Text('formA_text3'));
$formA->addElement(new Zend_Form_Element_Submit('submit'));
echo $formA->render(); 
```

这给了我这个输出（移除了装饰器）

```
<input type="text" name="formA_text1" id="formA_text1" value="">
<input type="text" name="formA_text2" id="formA_text2" value="">
<input type="text" name="formB_text1" id="formB_text1" value="">
<input type="text" name="formB_text2" id="formB_text2" value="">
<input type="text" name="formA_text3" id="formA_text3" value="">
<input type="submit" name="submit" id="submit" value="submit"> 
```

这是你所期待的。重现问题的唯一方法是设置元素的顺序`$formB`

```
$formA = new Zend_Form();
$formB = new Zend_Form();
$formA->addElement(new Zend_Form_Element_Text('formA_text1'));
$formA->addElement(new Zend_Form_Element_Text('formA_text2'));
$formB->addElement(new Zend_Form_Element_Text('formB_text1'));
$formB->addElement(new Zend_Form_Element_Text('formB_text2'));
$formB->getElement('formB_text2')->setOrder(10);
$formA->addElements($formB->getElements());
$formA->addElement(new Zend_Form_Element_Text('formA_text3'));
$formA->addElement(new Zend_Form_Element_Submit('submit'));
echo $formA->render(); 
```

这给了我这个输出

```
<input type="text" name="formA_text1" id="formA_text1" value="">
<input type="text" name="formA_text2" id="formA_text2" value="">
<input type="text" name="formB_text1" id="formB_text1" value="">
<input type="text" name="formA_text3" id="formA_text3" value="">
<input type="submit" name="submit" id="submit" value="submit">
<input type="text" name="formB_text2" id="formB_text2" value=""> 
```

这就是你得到的。因此，在我看来，您必须在`$otherForm`.

# javascript - 将数字转换为年和月的最简单方法

> ID：10188223
> 
> 赞同：1
> 
> 时间：2012-04-17T09:03:52.593
> 
> 标签：javascript

我有一个脚本可以生成一个数字并将其设置为一个文本框。例如，如果数字是 6.3，我希望能够将其转换为 6 年 4 个月。

有没有快速的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T09:06:16.270

```
var n = 6.3;
var y = Math.floor(n);            // whole years
var m = Math.floor(12 * (n - y)); // treat remainder as fraction of a year 
```

我注意到这个月给出了 3，而不是 4。为什么你认为 6.3 应该给出 4 个月？6 年零 4 个月是 6.333333 年。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T09:06:25.533

我真的不确定您是想从输入中创建日期/数字还是只是拆分数字并制作一个字符串？我去了第二个！

```
var number = 6.3;
var splitstring = number.toString().split('.');
var years = splitstring[0];
var months = splitstring[1];
alert(years + ' years,' + months + ' months');​ 
```

[这里的工作示例](http://jsfiddle.net/aaAWK/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T09:06:58.377

```
function getDescription(str)
{
    var description = "";
    var years = 0;
    var months = 0;
    var splits = str.split('.');
    if(splits.length >= 1)
    {
       years = parseInt(splits[0]);
    }
    if(splits.length >= 2)
    {
       months = parseInt(splits[1]);
    }
    return years + ' years' + ' ' + months + ' months';
} 
```

打电话给

```
getDescription('6.3'); 
```

或者

```
getDescription(document.getElementById('my_textbox').value); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T09:10:04.870

```
var num = 8.62;
console.log("%d year/s and %d month/s", ~~num, ~~((num - ~~num)*12)); 
/* 8 year/s and 7 month/s */ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-13T19:48:27.367

```
var n = 6.3
var years = Math.floor(n);
var months = Math.round((n * 12) % 12); 
```

% 表示模数，它返回除法的余数，而 round 将数字四舍五入到最接近的整数。

所以...

*   Math.floor(6.3) 将返回 6 年
*   (6.3 * 12) % 12 将返回 3.6 个月
*   round(3.6) 将返回 4 个月**，这解释了为什么 6.3 年就像 6 年零 4 个月**。

# windows-phone-7 - 以编程方式检查设备中是否有 SD 卡可用于 Windows Phone 'mango'

> ID：10188227
> 
> 赞同：2
> 
> 时间：2012-04-17T09:04:12.180
> 
> 标签：windows-phone-7, sd-card

在我的应用程序中，我想检查 SD 卡是否可用。如果它可用，我想在上面写一个 txt 文件并读取同一个文件

我已经搜索了很多东西，但是没有找到任何东西。

请帮忙

谢谢斯内哈

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T10:44:36.900

Windows Phone 目前不专门支持 SD 卡。有一些带有 SD 卡的手机型号（例如三星和 HTC），但它们不是官方可访问的。Windows Phone 使用专有文件格式，并将内部存储和“sd 卡”存储（有时它不是单独的卡，而是板上的闪存 IC）作为某种“RAID”一起使用。

只要 Windows Phone 不支持存储卡作为硬件规格，就没有办法使用它。;) 也许我们可以推测它们是否会随 Windows Phone vNext（“Apollo”/Windows Phone 8）提供。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T09:11:03.283

知道 SDK 不允许您访问除应用程序隔离存储之外的任何存储，您无法执行所需的操作（甚至不知道 SD 卡是否可用！）

# visual-c++ - 无法使用 cvMatchTemplate 获得结果？

> ID：10188228
> 
> 赞同：0
> 
> 时间：2012-04-17T09:04:13.697
> 
> 标签：visual-c++, opencv

我有两个字符“U”的图像。我使用 cvMatchTemplate 函数比较了它们的相似性。然后，我使用 cvMinMaxLoc 函数来查找像素的最大值和最小值以及它们各自的位置。但是当我比较它们时，它会返回一个带有字符“Q”的最大值，并且最大值和最小值是相同的。我不明白这里有什么问题？？？图像大小相同。我的代码是：

```
#include "cv.h"
#include "cxcore.h"
#include "highgui.h"
#include <iostream>
#include <stdio.h>

using namespace std;
using namespace cv;
int main()
{
    char text[]={'Q','U'};
       IplImage * tmp[2];       
       tmp[0]=cvLoadImage("D:\\Standards\\u.bmp",1);
       tmp[1]=cvLoadImage("D:\\Standards\\q.bmp",1);

       IplImage* src;
IplImage* dst;
IplImage* gray;
IplImage* grayThresh;
IplImage* gray1[1];
IplImage* grayThresh1[1];
int threshold = 120, maxValue = 255;
int thresholdType = CV_THRESH_BINARY;

src = cvLoadImage("D:\\OU.bmp", 1);
gray = cvCreateImage( cvSize(src->width,src->height), IPL_DEPTH_8U, 1 );
cvCvtColor(src, gray, CV_BGR2GRAY );
grayThresh = cvCloneImage( gray );
cvThreshold(gray, grayThresh, threshold, maxValue, thresholdType);

for(int i=0;i<=1;i++){
gray1[i] = cvCreateImage( cvSize(tmp[i]->width,tmp[i]->height), IPL_DEPTH_8U, 1 );
cvCvtColor(tmp[i], gray1[i], CV_BGR2GRAY );
grayThresh1[i] = cvCloneImage( gray1[i] );
cvThreshold(gray1[i], grayThresh1[i], threshold, maxValue, thresholdType);
}
CvPoint     minloc, maxloc;
       double       minval, maxval;

       int iwidth = grayThresh1[0]->width - grayThresh->width + 1;
       int iheight =grayThresh1[0]->height - grayThresh->height + 1;
       IplImage *res=cvCreateImage( cvSize(iwidth,iheight),32,1);

       for(int i=0;i<=1;i++){
     cvMatchTemplate(grayThresh,grayThresh1[i],res,CV_TM_CCORR_NORMED);
     cvMinMaxLoc( res, &minval, &maxval, &minloc, &maxloc, 0 );
     cout<<text[i]<<" maxval="<<maxval<<" minval="<<minval<<endl;}

cvDestroyWindow( "grayThresh" );
cvDestroyWindow( "src" );
cvDestroyWindow( "dst" );
cvDestroyWindow( "grayThresh1" );
cvReleaseImage( &src );     
cvReleaseImage( &grayThresh );
cvReleaseImage( &dst );
for(int i=0;i<=1;i++)
cvReleaseImage( &grayThresh1[i] );
return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T20:18:52.203

你需要改变：

```
IplImage* gray1[1];
IplImage* grayThresh1[1]; 
```

至：

```
IplImage* gray1[2];
IplImage* grayThresh1[2]; 
```

# events - 未使用 Magento 观察者执行的方法

> ID：10188230
> 
> 赞同：1
> 
> 时间：2012-04-17T09:04:14.577
> 
> 标签：events, magento, observer-pattern

我正在尝试在 Magento 中设置事件观察器。我正在观察的事件已被触发，但我的方法似乎无法运行。我的模块已注册，一切都很好。

这是定义观察者的 config.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<config>
    <global>
        <models>
            <technoberglink>
                <class>
                    Technoberg_Link_Model
                </class>
            </technoberglink>
        </models>
    </global>
    <frontend>
        <events>
            <cms_page_render><!-- sales order place after -->
                <observers>
                    <Technoberg_Link_Observer>
                        <type>
                            singleton
                        </type>
                        <class>
                            Technoberg_Link_Model_Observer
                        </class>
                        <method>
                            start_link
                        </method>
                    </Technoberg_Link_Observer>
                </observers>
            </cms_page_render>
        </events>
    </frontend>
</config> 
```

现在我确实知道该事件已被触发，因为如果我将 Technoberg_Link_Model_Observer 的类更改为其他类型，则会记录一些错误，说明找不到该文件。

这是我的 Observer.php 文件

```
class Technoberg_Link_Model_Observer {

function __construct(){

}

public function start_link($e){

    Mage::log("Dummy code executed");
    return $this;

}
} 
```

我不知道为什么我的方法没有执行，所以任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T13:54:52.447

我修好了它。**我检查了所有不是问题的空格。**

***我将事件放在全局下，并将观察者内的标签更改为与我正在使用的类相同的名称***。这解决了问题。所以 XML 将是

```
 <global>
      <events>
        <cms_page_render>
            <observers>
                <Technoberg_Link_Model_Observer> <!-- TAG INSIDE OBSERVER -->
                    <type>singleton</type>
                    <class>Technoberg_Link_Model_Observer</class>
                    <method>start_link</method>
                </Technoberg_Link_Observer>
            </observers>
        </cms_page_render>
      </events>
    </global> 
```

我猜 Magento 在命名约定方面非常严格 =) 感谢您的帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T21:50:37.893

试试下面的 config.xml ......我认为这是一个空格问题......

```
<?xml version="1.0" encoding="UTF-8"?>
<config>
    <global>
        <models>
            <technoberglink>
                <class>Technoberg_Link_Model</class>
            </technoberglink>
        </models>
    </global>
    <frontend>
        <events>
            <cms_page_render>
                <observers>
                    <technoberglink>
                        <type>singleton</type>
                        <class>Technoberg_Link_Model_Observer</class>
                        <method>start_link</method>
                    </technoberglink>
                </observers>
            </cms_page_render>
        </events>
    </frontend>
</config> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T12:00:47.113

```
<events>
            <cms_page_render><!-- sales order place after -->
                <observers>
                    <Technoberg_Link_Observer>
                        <type>
                            singleton
                        </type>
                        <class>
                            Technoberg_Link_Model_Observer
                        </class>
                        <method>
                            start_link
                        </method>
                    </Technoberg_Link_Observer>
                </observers>
            </cms_page_render>
        </events> 
```

将这部分 xml 写入其中

```
<global> </global> 
```

标签不是前端标签

清除缓存并重新加载

# java - Java - 远程文件浏览器

> ID：10188240
> 
> 赞同：2
> 
> 时间：2012-04-17T09:04:44.477
> 
> 标签：java, file

我已经进行了一些搜索，但我没有找到任何相关信息。

我计划为我的服务器用java编写一个完整的远程工具。我已经成功地制作了将文件发送到服务器的部分，但现在我想使用文件浏览器列出并获取所有文件。我知道如何制作本地 jFileChooser，但可以远程制作吗？

我使用套接字连接到我的服务器。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T09:10:54.937

有人实际上已经制作了您正在尝试的东西并将其托管在 sourceforge 上。您也可以获取源代码。检查[vfsjfilechooser](http://vfsjfilechooser.sourceforge.net)

要比较 vjsfilechooser 方法和 JFileChooser API，您可以阅读下面提到的 url。 [http://www.loni.ucla.edu/twiki/bin/view/CCB/VFSBrowserProgrammersGuide?skin=plain&sortcol=1&table=1&up=1](http://www.loni.ucla.edu/twiki/bin/view/CCB/VFSBrowserProgrammersGuide?skin=plain&sortcol=1&table=1&up=1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T09:10:14.403

我不认为您可以将 JFileChooser 配置为远程，但您应该能够根据其代码编写自己的代码，甚至对其进行子类化。

如果您要编写一个外观类似的 Windows 文件选择器，通常被认为更好。

您可以将它基于 VFS 或类似的，以便它可以与任何文件系统一起使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T09:42:24.030

假设它是一个基于 Web 的应用程序，您想从应用程序服务器中选择一个文件。检查这是否真的是一个好选择，因为我可以清楚地了解服务器文件结构。肯定会有安全威胁。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-12T15:27:32.247

```
package learnings;

import com.jcraft.jsch.Channel;
import com.jcraft.jsch.ChannelSftp;
import com.jcraft.jsch.JSch;
import com.jcraft.jsch.JSchException;
import com.jcraft.jsch.Session;
import com.jcraft.jsch.SftpException;
import java.util.Vector;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JFrame;
import javax.swing.JTree;
import javax.swing.tree.DefaultMutableTreeNode;

public class SimpleLinuxGUI {

String sshremotedir = "GiveRemoteDirectoryPath";
public static void cargarRTree(String remotePath, DefaultMutableTreeNode parent) throws SftpException, JSchException { 
//todo: change "/" por remote file.separator
JSch jsch = new JSch();
Session session = null;
session = jsch.getSession(username, hostname, 22);
session.setConfig("StrictHostKeyChecking", "no");
session.setPassword(password);
session.connect();
Channel channel = session.openChannel("sftp");
channel.connect();
ChannelSftp sftpChannel = (ChannelSftp) channel;
Vector<ChannelSftp.LsEntry> list = sftpChannel.ls(remotePath); // List source directory structure.
    System.out.println(list);
//Vector<ChannelSftp.LsEntry> list = sftpChannel
for (ChannelSftp.LsEntry oListItem : list) { // Iterate objects in the list to get file/folder names.       
    DefaultMutableTreeNode node = new DefaultMutableTreeNode(oListItem.getFilename());
    if (!oListItem.getAttrs().isDir()) { // If it is a file (not a directory).
        parent.add(node); // add as a child node
    } else{
        if (!".".equals(oListItem.getFilename()) && !"..".equals(oListItem.getFilename())) {
            parent.add(node); // add as a child node
            cargarRTree(remotePath + "/" + oListItem.getFilename(), node); // call again for the subdirectory
        }
    }
} 
```

}

```
public static void main(String[] args) {
    SimpleLinuxGUI slg = new SimpleLinuxGUI();
    JFrame jf = new JFrame();

    DefaultMutableTreeNode nroot = new DefaultMutableTreeNode(slg.sshremotedir);                
    try {
        cargarRTree(slg.sshremotedir, nroot);
    } catch (SftpException e1) {
// TODO Auto-generated catch block
        e1.printStackTrace();
    }       catch (JSchException ex) { 
        Logger.getLogger(SimpleLinuxGUI.class.getName()).log(Level.SEVERE, null, ex);
    } 
    JTree yourJTree = new JTree(nroot);
    jf.add(yourJTree);
    jf.setSize(640, 480);
    jf.setVisible(true);
} 
```

}

此代码将帮助您获取远程服务器中的文件和目录列表，然后在 GUI 中创建一个 Jtree 和显示。现在您可以通过添加动作侦听器和添加按钮来更改 GUI 以满足您的要求

# ios5 - iOS 推送通知内部企业替代方案 - 是否有必要？

> ID：10188247
> 
> 赞同：0
> 
> 时间：2012-04-17T09:05:17.593
> 
> 标签：ios5, push-notification, apple-push-notifications

对于企业应用程序（即由员工使用并与企业服务器通信），推送通知是否是一种合适的方法，因为它通过 APNS 进行？我也理解不能保证消息被成功接收，也许它应该是一个通知，有东西准备好了。如果没有，是否有任何替代方法，如果有，我应该调查什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T11:06:01.873

这不是一件容易的事，但通过推送通知服务是可能的。例如，我将[http://www.pushwoosh.com/](http://www.pushwoosh.com/)用于我的 iOS 和 Android 应用程序。他们为任何移动平台的推送通知提供了许多有用的解决方案。我希望这些信息可以帮助你。

# opencv - 如何在 Visual C++ 中启用 SSE4.2 指令集？

> ID：10188252
> 
> 赞同：4
> 
> 时间：2012-04-17T09:05:37.493
> 
> 标签：opencv, visual-c++, hammingweight, sse4

我在 Visual C++ 2010 中使用 OpenCV 中的简要描述符来匹配两个图像中的点。

在关于简要描述符[的论文](http://cvlab.epfl.ch/~lepetit/papers/calonder_eccv10.pdf)中写道，可以加快速度：

> “BRIEF 描述符使用汉明距离，这可以在现代 CPU 上以极快的速度完成，这些 CPU 通常提供特定指令来执行 XOR 或位计数操作，就像最新的 SSE 指令集一样。”

启用 SSE4.2 后应该会加快速度。我的问题只是我如何在 Visual C++ 中做到这一点？

另一种方法是选择另一个支持 SSE4 的编译器。例如英特尔的 ICC。这真的有必要吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-17T11:07:07.373

不幸的是，它不是那样工作的。

C/C++ 编译器可能会被告知在项目-> C/C++ -> 代码生成-> 启用增强指令集中使用特定指令集。但它几乎什么都不做，在你的情况下，绝对没有。这是因为某些 CPU 指令不能从 C 语句中轻松访问。一些编译器（如英特尔的）在这方面比其他编译器更好，但是对于你想要实现的目标，没有编译器足够聪明。

你要做的就是找到具体的算法，学习[SSE](http://en.wikipedia.org/wiki/Streaming_SIMD_Extensions)指令并用这些指令手动重写算法。您可以用纯汇编编写，也可以使用[内部](http://msdn.microsoft.com/en-us/library/bb892950.aspx)函数，这些函数可以从 C/C++ 调用，并在编译时发出 SSE 指令。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2021-02-14T20:05:41.663

MSVC 编译器有一个`/arch`选项可以指定您希望程序面向的最低架构。将其设置为 like`/arch:SSE2`将告诉编译器假定 CPU 支持 SSE2 指令，并且只要优化器确定它是合适的，它将自动使用它们。

但是，MSVC 没有`/arch:SSE4`或没有`/arch:SSE42`选项。对标准库实现的一瞥表明`/arch:AVX`或者`/arch:AVX2`也暗示了 SSE4.2。例如，C++20 库函数的 MSVC 实现`std::popcount`将对处理器进行运行时检查，看它是否可以使用 SSE4.2 popcnt 指令。但是，如果您以 AVX 为目标，它会跳过运行时检查并假设处理器支持它。

我认为 gcc 和 clang 确实有启用 SSE4 和 SSE4.2 的特定选项。**更新：** Peter Cordes 在评论中确认：“要专门启用 popcnt，-mpopcnt，或者对于 SSE4.2 -msse4.2，这意味着 popcnt。”

如果您不想依赖优化器和库实现来找到最佳指令，您也可以将内部函数用于内置指令。

# asp.net - System.Runtime.Serialization.SerializationException 消息：找不到程序集 'Lucene.Net

> ID：10188260
> 
> 赞同：1
> 
> 时间：2012-04-17T09:06:10.303
> 
> 标签：asp.net, c#-4.0, serialization

在asp.net网站的Application_Start事件上运行以下代码：</p>

```
public void CheckRebuildTasks()
{
try
{
    var ts = _rebuildRepository.Source.unCompleteRoots();

    if (ts.Any())
    {
        var task = new Task(() =>
        {
            int s = 30;
            string nameList = string.Empty;
            try
            {
                ts.ToList().ForEach(
                    t =>
                    nameList +=
                    string.Format("{0}[{1}]", t.AppName, t.AppContentName));
                _log.Info(string.Format("Sleep {0}s to continue {1}", s, nameList));
                System.Threading.Thread.Sleep(30*1000);
                ts.ToList().ForEach(t =>
                                        {
                                            var appContent =
                                                _appContentRepository.GetBy(
                                                    t.AppName,
                                                    t.
                                                        AppContentName);
                                            this.ClearRebuild(appContent.Name,
                                                                appContent.
                                                                    ContentType);

                                            var si = new SmartIndexer(appContent,
                                                                        _zzkDocumentRepository,
                                                                        _rebuildRepository);
                                            si.Rebuild(t);
                                        });
            }
            catch (Exception exc)
            {
                _log.Error(exc);
            }
        });
        task.LogExceptions("CheckRebuildTasks");
        task.Start();
    }
}
catch (Exception exc)
{
    _log.Error("CheckRebuildTasks", exc);
} 
```

}

windows EventLog消息：</p>

> 发生未处理的异常，进程终止。应用程序 ID：默认域
> 
> 进程 ID：19232
> 
> 异常：System.Runtime.Serialization.SerializationException
> 
> 消息：找不到程序集“Lucene.Net，版本=2.9.4.1，文化=中性，PublicKeyToken=85089178b9ac3181”。
> 
> StackTrace：在 System.Runtime.Serialization.Formatters.Binary.BinaryAssemblyInfo.GetAssembly() 在 System.Runtime.Serialization.Formatters.Binary.ObjectReader.GetType(BinaryAssemblyInfo assemblyInfo, String name) 在 System.Runtime.Serialization.Formatters.Binary。 ObjectMap..ctor(String objectName, String[] memberNames, BinaryTypeEnum[] binaryTypeEnumA, Object[] typeInformationA, Int32[] memberAssemIds, ObjectReader objectReader, Int32 objectId, BinaryAssemblyInfo assemblyInfo, SizedArray assemIdToAssemblyTable) 在 System.Runtime.Serialization.Formatters.Binary ._ *BinaryParser.ReadObjectWithMapTyped(BinaryObjectWithMapTyped 记录) 在 System.Runtime.Serialization.Formatters.Binary。*_BinaryParser.Run()
> 在 System.Runtime.Serialization.Formatters.Binary.ObjectReader.Deserialize(HeaderHandler handler, __BinaryParser serParser, Boolean fCheck, Boolean isCrossAppDomain, IMethodCallMessage methodCallMessage) 在 System.Runtime.Serialization.Formatters.Binary.BinaryFormatter.Deserialize(Stream serializationStream, HeaderHandler handler , Boolean fCheck, Boolean isCrossAppDomain, IMethodCallMessage methodCallMessage) 在 System.AppDomain.Deserialize(Byte[] blob) 在 System.AppDomain.UnmarshalObject(Byte[] blob)

PS：已经参考了Lucene.Net，程序在本地运行良好

# vb6 - 如何关闭我自己的应用程序打开的对话框

> ID：10188265
> 
> 赞同：1
> 
> 时间：2012-04-17T09:06:20.613
> 
> 标签：vb6, dialog

我有一个需要通过自动关闭来响应更新调用的 VB6 应用程序。关闭应用程序不需要用户交互。除了打开系统对话框外，这一切都很好。此对话框可用于打开文件或设置打印机属性。像这样的东西：

[![](../Images/d11868ea3a7d299dd445c62e1edcd7dd.png)](https://i.stack.imgur.com/EsihH.png)
[（来源：[tweakers.net](http://tweakers.net/ext/f/Kjz0R5IvkCNfXRRefrqHFmFc/full.png)）]

“打印设置”窗口仍会正常关闭，但属性对话框是一个系统对话框，在我的程序关闭时不会关闭。结果是应用程序不会关闭，但仍（不可见）处于活动状态。我必须使用任务管理器强制关闭它。

可以使用如下代码检测打开的表单：

```
For Each Form In Forms
    ...
Next Form 
```

这些对话框不会出现在这个打开的表单数组中。有没有办法检测我的应用程序打开的所有系统对话框并以有序的方式关闭它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T14:57:18.770

作为一个巨大的黑客，您可以尝试调用`Sendkeys "{esc}"`直到您的表单获得按键事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T14:58:22.950

另一个选项只是推迟关闭直到对话框关闭（您知道何时显示它以及何时返回，所以一个简单的标志就可以了）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T19:45:44.427

我没有时间设计一个完整的答案，但这里有一些提示。

一种解决方案[可能](http://support.microsoft.com/kb/178893)是

1.  遍历属于您的 VB6 程序的所有顶级窗口
2.  找到每个的 hWnd
3.  使用 PostMessage 向每个人发送[WM_CLOSE 。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632617%28v=vs.85%29.aspx)

Karl Peterson 有一篇[文章](http://visualstudiomagazine.com/articles/2009/11/16/no-such-thing-as-a-windowless-vb-app.aspx?m=1) ，其中包含遍历属于当前线程的所有窗口并确定它们的 hWnd 的代码。

带上你的斧头！:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T12:10:10.460

半回答我自己的问题。我仍在寻找更好的解决方案，但到目前为止这已经成功了。

我使用`EnumWindows`with`IsWindowVisible`来获取**所有**可见窗口的 Hwnd。然后我用来`GetAncestor`从祖先形式（开放形式）中获取 Hwnd。我通过遍历所有表单来检查该祖先 Hwnd 是否属于我自己的应用程序。如果它属于我的应用程序，我会使用 WM_CLOSE by 关闭窗口`PostMessage`。

这可能不是最好的解决方案，因为我需要从所有正在运行的应用程序中遍历所有打开的窗口。如果有人有更好的解决方案，那么我喜欢听听。简单地为我自己的应用程序提供打开窗口的 Hwnd 可能会加快速度。

# c# - 使用 HTML5 音频 API 接收音频字节数组？

> ID：10188267
> 
> 赞同：5
> 
> 时间：2012-04-17T09:06:36.940
> 
> 标签：c#, asp.net, html, streaming, html5-audio

我可以广播或单播 (UDP) 来自麦克风输入的原始 PCM 数据，或以 G711（MuLaw、ALaw）或 Gsm10 编码的数据。该音频被认为是在网页上播放的。不能使用 Flash 和 Silverlight。

我目前正在研究两种解决方案：a) ASP.NET (AJAX) 中的客户端 C# b) HTML5 音频 API

理论上是否可以接收使用 HTML5 Audio API 发送的字节数组，然后在主页上播放它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T09:40:30.657

这里提供了一个示例来向您展示网络音频 API 的工作原理

[http://www.html5rocks.com/en/tutorials/webaudio/intro/](http://www.html5rocks.com/en/tutorials/webaudio/intro/)

请求的响应是字节数组，然后你可以按照网页上的步骤进行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-17T17:47:17.523

在这里，我有一个最佳实践示例：[https](https://www.npmjs.com/package/wasm-ring-buffer) : //www.npmjs.com/package/wasm-ring-buffer，但客户端的 UDP Websocket 仅在 Chrome 打包应用程序中启用。另一种方法是创建一个 Nodejs 网关，通过 TCP 接收数据并将其从 NodeJS 服务器发送到 UDP 服务器。

# html - CSS：背景图像和填充

> ID：10188274
> 
> 赞同：79
> 
> 时间：2012-04-17T09:07:01.613
> 
> 标签：html, css, padding

我想在列表项的右侧添加一个背景图像，并希望从右侧也有一些填充，但我无法做到这一点。请看下面的例子：

HTML：

```
<ul>
    <li>Hello</li>
    <li>Hello world</li>
</ul> 
```

CSS：

```
ul{
    width:100px;  
}

ul li{
    border:1px solid orange;
    background: url("arrow1.gif") no-repeat center right;
}

ul li:hover{
     background:yellow url("arrow1.gif") no-repeat center right;
} 
```

我知道我们可以按像素设置图像位置，但是由于每个 li 都有不同的宽度，我不能这样做。

这是 JSFiddle 链接：http: [//jsfiddle.net/QeGAd/1/](http://jsfiddle.net/QeGAd/1/)

* * *

## 回答 #1

> 赞同：198
> 
> 时间：2015-08-31T11:14:36.487

您可以使用[CSS background-origin](https://developer.mozilla.org/en-US/docs/Web/CSS/background-origin)更精确：

```
background-origin: content-box; 
```

这将使图像尊重盒子的填充。

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2012-04-17T09:08:31.737

您可以使用百分比值：

```
background: yellow url("arrow1.gif") no-repeat 95% 50%; 
```

不是像素完美，但是……</p>

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2016-11-22T13:58:08.293

使用[CSS 背景剪辑](https://developer.mozilla.org/en-US/docs/Web/CSS/background-clip)：

```
background-clip: content-box; 
```

背景将在内容框中绘制。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-12-13T13:28:43.893

使用`background-position: calc(100% - 20px) center`，对于像素完美`calc()`是最好的解决方案。

```
ul {
  width: 100px;
}

ul li {
  border: 1px solid orange;
  background: url("https://placehold.co/200x125/e16d65/FFFFFF/png") no-repeat calc(100% - 10px) center;
}

ul li:hover {
  background-position: calc(100% - 20px) center;
}
```

```
<ul>
  <li>Hello</li>
  <li>Hello world</li>
</ul>
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-04-17T10:07:02.287

您可以通过两种方法实现您的结果：-

***第一种方法***定义**位置值**：-

**HTML**

```
 <ul>
 <li>Hello</li>
 <li>Hello world</li>
 </ul> 
```

**CSS**

```
 ul{
    width:100px;    
}

ul li{
    border:1px solid orange;
    background: url("http://www.adaweb.net/Portals/0/Images/arrow1.gif") no-repeat 90% 5px;
}

ul li:hover{
    background: yellow url("http://www.adaweb.net/Portals/0/Images/arrow1.gif") no-repeat 90% 5px;
} 
```

**第一个演示：-** [http://jsfiddle.net/QeGAd/18/](http://jsfiddle.net/QeGAd/18/)

**CSS 的***第二种方法*****:before:after**选择器**

 ****HTML**

```
<ul>
<li>Hello</li>
<li>Hello world</li> 
```

**CSS**

```
 ul{
    width:100px;    
}

ul li{
    border:1px solid orange;
}

ul li:after {
    content: " ";
    padding-right: 16px;
    background: url("http://www.adaweb.net/Portals/0/Images/arrow1.gif") no-repeat center right;
}

ul li:hover {
    background:yellow;
}

ul li:hover:after {
    content: " ";
    padding-right: 16px;
    background: url("http://www.adaweb.net/Portals/0/Images/arrow1.gif") no-repeat center right;
} 
```

**第二个演示：-** [http://jsfiddle.net/QeGAd/17/](http://jsfiddle.net/QeGAd/17/)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-04-17T09:30:27.560

使像素完美的唯一选择是在 GIF 本身内创建一些透明填充。这样，您实际上可以将其对齐到 LI 的右侧，并且仍然具有您正在寻找的背景填充。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-06-14T12:48:02.900

您可以将填充添加到游览块元素并添加`background-origin`样式，如下所示：

```
.block {
  position: relative;
  display: inline-block;
  padding: 10px 12px;
  border:1px solid #e5e5e5;
  background-size: contain;
  background-position: center;
  background-repeat: no-repeat;
  background-origin: content-box;
  background-image: url(_your_image_);
  height: 14rem;
  width: 10rem;
} 
```

您可以检查几个[https://www.w3schools.com/cssref/css3_pr_background-origin.asp](https://www.w3schools.com/cssref/css3_pr_background-origin.asp)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-17T09:33:23.830

将[方向](http://www.w3schools.com/cssref/pr_text_direction.asp)CSS 属性设置为 rtl 应该适合您。我猜IE6不支持它。

例如

```
<ul style="direction:rtl;">
<li> item </li>
<li> item </li>
</ul> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-08-05T16:56:47.833

添加`box-sizing: content-box`似乎也有效。请注意，您可能需要调整`height`、`width`和`background-size`，以使用此方法进行填充。**

# haskell - 在 Haskell 中使用二进制搜索更快的 `elem`

> ID：10188276
> 
> 赞同：3
> 
> 时间：2012-04-17T09:07:05.880
> 
> 标签：haskell

我有一个`Text`s 列表，它们按排序顺序排列。`elem`在我看来，我可以通过将其实现为二进制搜索而不是线性搜索来编写更快的版本。这样的版本是否已经存在？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-17T09:13:37.650

Haskell 的列表被实现为链表，这意味着对任意`i`-th 元素的访问位于`O(i)`. 在正常使用中，for 列表的二进制搜索版本`elem`会比标准版本花费更多时间（请参阅下面的 @DanielFischer 的评论）。

您可能希望使用不同的容器，例如[Data.Set](http://hackage.haskell.org/packages/archive/containers/latest/doc/html/Data-Set.html)或[Data.Map](http://hackage.haskell.org/packages/archive/containers/latest/doc/html/Data-Map.html)，它们被实现为平衡二叉树，从而为您提供`O(log n)`访问时间（其中`n`是映射/集合中的元素数量）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-17T09:12:00.673

二进制搜索需要随机访问。由于 haskell 列表不提供随机访问（访问中间的元素需要线性时间），所以二分查找没有帮助。

如果您的数据位于`Array`提供随机访问的 中，则二进制搜索将是可行的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T11:48:19.243

> 我有一个文本列表，它们按排序顺序排列。

改变数据结构，你的算法就会很明显（用布鲁克斯的话说）。

Haskell 尤其如此，我们的数据结构通常不是可变数组（这意味着您不会依赖指针黑客攻击）。

如果您使用例如堆或树来存储文本，您将能够轻松实现*O(log(n))* elem。您可以利用它们已排序的事实来提供更快的插入。

# c# - HTML Agility Pack 从输入中剥离自闭合标签

> ID：10188285
> 
> 赞同：6
> 
> 时间：2012-04-17T09:07:37.017
> 
> 标签：c#, asp.net, .net, html-agility-pack

这就是我创建复选框的方式：

```
HtmlInputCheckBox checkbox = new HtmlInputCheckBox();
checkbox.ID = _Data.ControlID;
checkbox.Attributes.Add("class", "checkbox");
checkbox.Attributes.Add("autocomplete", "off");
sReplacementString = element.RenderToString(); 
```

`RenderToString`是执行此操作的扩展：

```
public static string RenderToString(this Control control)
{
    StringBuilder sb = new StringBuilder();
    using (StringWriter writer = new StringWriter(sb))
    {
        using (HtmlTextWriter htmlWriter = new HtmlTextWriter(writer))
        {
            control.RenderControl(htmlWriter);
        }
    }
    return sb.ToString();
} 
```

这会在输入上生成一个带有结束标记的字符串，我可以在调试时看到这一点。

```
<input name="ttWBF_1" type="checkbox" id="ttWBF_1" autocomplete="off" class="checkbox" /> 
```

然后使用 Agility Pack 将其添加到 HTML 中，如下所示：

```
HtmlNode temp = doc.CreateElement("temp");
temp.InnerHtml = sReplacementString;
HtmlNode current = inputNode;

foreach (HtmlNode child in temp.ChildNodes)
{
    inputNode.ParentNode.InsertAfter(child, current);
    current = child;
}
inputNode.ParentNode.RemoveChild(inputNode); 
```

然而，在 HTML 中，复选框的输入标记缺少其自闭合斜线，因此无法通过 WC3 验证。

```
<input name="ttWBF_1" type="checkbox" id="ttWBF_1" autocomplete="off" class="checkbox"> 
```

这发生在我的以相同方式生成的文本框上。看起来他们在使用敏捷包将 HTML 添加到页面时迷路了。

我该如何防止这种情况？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-17T09:23:20.107

尝试设置“OptionWriteEmptyNodes”标志：

```
HtmlDocument doc = new HtmlDocument();
doc.OptionWriteEmptyNodes = true;

// .... 
```

**更新**

由于我的原始答案被拒绝，这是另一种可能的解决方案。

您是否在呈现之前将正确的 DOCTYPE 传递给您的 HTML 文档？看看这个关于如何插入 DOCTYPE 的问题：[Add a doctype to HTML via HTML Agility pack](https://stackoverflow.com/questions/9957525/add-a-doctype-to-html-via-html-agility-pack)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T15:54:33.227

最后，让我痛苦的是，我重新使用正则表达式处理 HTML 以添加丢失的自闭合标签。我想要一个更好的解决方案，因为这是 hacky 而不是未来的证明 - 必须为每个需要更正的标签添加它：

```
sXHTML = Regex.Replace(sXHTML, "<input(.*?)>", "<input $1 />"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-23T18:11:58.773

在创建文档节点时包含此内容，它应该可以解决您的问题：

```
if (HtmlNode.ElementsFlags.ContainsKey("input"))
{   HtmlNode.ElementsFlags["input"] = HtmlElementFlag.Closed;}
else
{   HtmlNode.ElementsFlags.Add("input", HtmlElementFlag.Closed);} 
```

原始答案： [图像标签未使用 HTMLAgilityPack 关闭](https://stackoverflow.com/questions/759355/image-tag-not-closing-with-htmlagilitypack/12096383#12096383)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-05-19T13:54:57.213

您是否尝试忽略敏捷包中的节点？例如，这一行将告诉 html 敏捷包忽略更改此节点。

```
 HtmlNode.ElementsFlags.Remove("meta"); 
```

# sql - SQL Server - 根据最近的日期连接两个表

> ID：10188288
> 
> 赞同：4
> 
> 时间：2012-04-17T09:07:42.673
> 
> 标签：sql, sql-server, database, sql-server-2008

我有两张桌子：

```
 A
---------------
No.    Name
1      J.Smith
2      R.Alan
3\.     D.Williams

       B
----------------------------
ID.    Date        Address    No.(FK from table A) 
1      10/03/01   blah blah   1
2      08/02/05   blah blah   2
3\.     12/01/02   blah blah   3
4\.     03/07/11   blah blah   1
5\.     30/03/09   blah blah   2 
```

我想将两个表连接在一起，根据表 B 中的最近日期省略具有重复名称的行。例如，如果我使用左内连接将表 A 和 B 连接在一起，我将为 J. Smith 获得两行（基于表 B) 中的第 1 行和第 4 行。我想排除日期较旧的日期（表 B 中的第 1 行）。

我怎样才能做到这一点？

编辑：

我需要包括表 B 中的所有列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T09:17:01.423

也许是这样的：

```
;WITH CTE
AS
(
    SELECT
        ROW_NUMBER() OVER(PARTITION BY tblB.[No] ORDER BY tblB.[Date]) AS RowNbr,
        tblB.*
    FROM
        B AS tblB
)
SELECT
    *
FROM
    A AS tblA
    LEFT JOIN CTE
        ON tblA.No=CTE.No
        AND CTE.RowNbr=1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T09:23:14.007

```
WITH [max_dates] AS (
    SELECT [No], MAX([Date]) AS [Date]
    FROM [TableB]
    GROUP BY [No]
)
SELECT [a].[Name], [b].[Date]
FROM [TableA] AS [a]
JOIN [max_dates] AS [b] ON ([a].[No] = [b].[No])
ORDER BY [a].[No] ASC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T09:13:45.623

```
SELECT A.No 
     , A.Name
     , C.Date
     , C.Address
     , C. ...
FROM A 
LEFT JOIN
    ( SELECT Address , ... , No, Date,  ROW_NUMBER() OVER(PARTITION BY No ORDER BY Date DESC) AS row
        FROM B 
    ) C ON A.No = C.No 
WHERE C.row = 1

WHERE COALESCE(C.row, 1) = 1 [if there is no link ,and you'll get Date NULL] 
```

编辑：如果你在 B 中有很多列

```
SELECT A.No 
     , A.Name
     , C.* (also row)
FROM A 
LEFT JOIN
    ( SELECT * ,  ROW_NUMBER() OVER(PARTITION BY No ORDER BY Date DESC) AS row
        FROM B 
    ) C ON A.No = C.No 
WHERE C.row = 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T11:46:29.743

Rory Hunter 很好地使用了 CTE，或者没有它：

```
 SELECT [A].Name, [B].Date
 FROM [A]
     INNER JOIN [B]
         INNER JOIN
         ( -- build a limitation on B
             SELECT No, MaxDate = Max(Date)
             FROM [B]
             GROUP BY No
         ) BLimit
            ON BLimit.No = B.No
            AND BLimit.MaxDate = B.Date
         ON B.No = A.No 
```

BLimit 充当限制器，仅允许每个否 (FK) 的最高日期通过。并且 B 中的所有字段都可以用于查询，因为 B 上的限制仅使用 BLimit。

# c# - 是否可以让 Visual Studio 或 Resharper 以不同的颜色突出显示枚举？

> ID：10188289
> 
> 赞同：7
> 
> 时间：2012-04-17T09:07:47.590
> 
> 标签：c#, visual-studio, resharper

我认为如果代码突出显示具有与类属性不同颜色的枚举属性，代码会更具可读性。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-17T09:20:00.790

对于 VS2010 / VS2013 / VS2015 / VS2017 / VS2019：

1.  工具->选项->环境->字体和颜色：
2.  显示文本编辑器的设置
3.  显示项目：用户类型（枚举）
4.  更改项目前景

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-17T09:20:17.943

您必须在`ReSharper -> Options -> Code Inspection -> Settings`.

然后您可以定义枚举标识符的前景/背景颜色`Tools -> Options -> Environment -> Fonts and Colors`（在“显示项目”列表中选择“ReSharper Enum Identifier”。

注意：这是针对 VS 2010 / ReSharper 6.1。

# python - 将“表视图”对象链接到 Postgres 表

> ID：10188292
> 
> 赞同：2
> 
> 时间：2012-04-17T09:08:02.510
> 
> 标签：python, pyqt, tableview, qt-designer

我昨天发布了一个与此类似的问题，dschulz 友好地回应，将我引向一些在线文章。不幸的是，我仍然在苦苦挣扎，因为任何一个示例代码都是用 C++ 编写的，而我使用的是 Python（尽管我认为我已经设法进行了必要的调整），这些示例对我来说还不够完整，或者代码只是不工作。我是编程新手，所以通过我正在制作的这个软件工作进展非常缓慢。

我在 Quantum GIS 中创建了一个插件，可以执行各种空间分析。单击该插件后，将打开一个 GUI，其中包含与 4 个单独分析相关的 4 个选项卡。在一个选项卡中，我希望有一个表视图，显示我在 Postgres 中的表的查询结果。有一个“计算”按钮，一旦单击该按钮，就会运行查询以使用同一选项卡上的一些输入来更新数据库。在任何时候，我都希望在这个按钮旁边有一个表格视图，显示这个表格中发生的事情。

我一直在使用 QT Designer 来制作 GUI，所以我已经弄清楚如何拖放小部件，如滑块和复选框，这些小部件在更改时会触发事件。我找到了“表格视图”小部件，但不知道如何将其链接到 postgres 数据库中的查询。表视图将是我假设的信号的接收器，但我无法识别似乎在表视图中显示 Postgres 查询的“插槽”。我在成功创建 QSqlQueryModel 时也遇到了麻烦。到目前为止我所拥有的是这个。

```
try:
      db = QSqlDatabase.addDatabase("QPSQL")
      db.setHostName("localhost")
      db.setDatabaseName("database")
      db.setUserName("postgres")
      db.setPassword("password")
      db.open()
  except:
      #This exception does not run so I assume the link to the database worked out.
      QMessageBox.information(None, "Cancel", "Cannot Connect to Database to create table view.")
      return

  try:
      model = QSqlQueryModel()
      model.setQuery("SELECT name, density, deveff FROM susip." +str(filename)+ "_rezoning")          
  except:
      #Here the exception runs, which tells me that something is wrong with the setQuery function
      QMessageBox.information(None, "Cancel", "Cannot connect run query in database to create table view.")
      return

  model.setHeaderData(0, Qt.Horizontal, "Name")
  model.setHeaderData(1, Qt.Horizontal, "Density")
  model.setHeaderData(2, Qt.Horizontal, "DevEff")

  view = QTableView()
  view.setModel(model)
  view.show() 
```

通过单击“计算”按钮运行此操作并注释掉 model.seta 新窗口会短暂闪烁然后消失。但是，即使这确实有效，我也不知道如何让这个表格视图出现在我放置在 gui 中的表格视图小部件中。其次，我不明白查询出了什么问题以及为什么“try”语句失败并给了我提供 QMessageBox 的“except”语句。

我无休止地搜索在线文档，完全迷失了方向。有人可以告诉我我做错了什么吗？

太感谢了，

罗马

# php - 带有 googlemaps V3 api 的 PHP/SQL/XML 不起作用

> ID：10188294
> 
> 赞同：1
> 
> 时间：2012-04-17T09:08:05.387
> 
> 标签：php, javascript, sql, xml, google-maps

我正在尝试将地图添加到我的网页，其中显示从 SQL 数据库加载的标记。我在这里（https://developers.google.com/maps/articles/phpsqlajax_v3#createmap）关注googlemaps api V3教程以了解如何执行此操作。然而，尽管它应该很简单，但我无法让它工作，这非常令人沮丧！

这是我的 PHP 文件，名为“phpsqlajax_genxml.php”

```
<?php
require("phpsqlinfo_dbinfo.php");

function parseToXML($htmlStr)
{
$xmlStr=str_replace('<','&lt;',$htmlStr);
$xmlStr=str_replace('>','&gt;',$xmlStr);
$xmlStr=str_replace('"','&quot;',$xmlStr);
$xmlStr=str_replace("'",'&#39;',$xmlStr);
$xmlStr=str_replace("&",'&amp;',$xmlStr);
return $xmlStr;
}

// Opens a connection to a MySQL server
$connection=mysql_connect (localhost, $username, $password);
if (!$connection) {
die('Not connected : ' . mysql_error());
}

// Set the active MySQL database
$db_selected = mysql_select_db($database, $connection);
if (!$db_selected) {
die ('Can\'t use db : ' . mysql_error());
}

// Select all the rows in the markers table
$query = "SELECT * FROM markers WHERE 1";
$result = mysql_query($query);
if (!$result) {
die('Invalid query: ' . mysql_error());
}

header("Content-type: text/xml");

// Start XML file, echo parent node
echo '<markers>';

// Iterate through the rows, printing XML nodes for each
while ($row = @mysql_fetch_assoc($result)){
// ADD TO XML DOCUMENT NODE
echo '<marker ';
echo 'name="' . parseToXML($row['name']) . '" ';
echo 'address="' . parseToXML($row['address']) . '" ';
echo 'lat="' . $row['lat'] . '" ';
echo 'lng="' . $row['lng'] . '" ';
echo 'type="' . $row['type'] . '" ';
echo '/>';
}

// End XML file
echo '</markers>';

?> 
```

当我在浏览器中访问此页面时，XML 输出在 Chrome 中有效，但在 Safari 中无效。

然后我使用 javascript 来尝试加载地图和标记，但是我得到的只是一个空白页。

```
<!DOCTYPE html >
<head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
<title>PHP/MySQL & Google Maps Example</title>
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=my_api_key&sensor=false"></script>
<script type="text/javascript">
//<![CDATA[

var customIcons = {
  restaurant: {
    icon: 'http://labs.google.com/ridefinder/images/mm_20_blue.png',
    shadow: 'http://labs.google.com/ridefinder/images/mm_20_shadow.png'
  },
  bar: {
    icon: 'http://labs.google.com/ridefinder/images/mm_20_red.png',
    shadow: 'http://labs.google.com/ridefinder/images/mm_20_shadow.png'
  }
};

function load() {
  var map = new google.maps.Map(document.getElementById("map"), {
    center: new google.maps.LatLng(47.6145, -122.3418),
    zoom: 13,
    mapTypeId: 'roadmap'
  });
  var infoWindow = new google.maps.InfoWindow;

  // Change this depending on the name of your PHP file
  downloadUrl("phpsqlajax_genxml.php", function(data) {
    var xml = data.responseXML;
    var markers = xml.documentElement.getElementsByTagName("marker");
    for (var i = 0; i < markers.length; i++) {
      var name = markers[[]i].getAttribute("name");
      var address = markers[[]i].getAttribute("address");
      var type = markers[[]i].getAttribute("type");
      var point = new google.maps.LatLng(
          parseFloat(markers[[]i].getAttribute("lat")),
          parseFloat(markers[[]i].getAttribute("lng")));
      var html = "<b>" + name + "</b> <br/>" + address;
      var icon = customIcons[[]type] || {};
      var marker = new google.maps.Marker({
        map: map,
        position: point,
        icon: icon.icon,
        shadow: icon.shadow
      });
      bindInfoWindow(marker, map, infoWindow, html);
    }
  });
}

function bindInfoWindow(marker, map, infoWindow, html) {
  google.maps.event.addListener(marker, 'click', function() {
    infoWindow.setContent(html);
    infoWindow.open(map, marker);
  });
}

function downloadUrl(url, callback) {
  var request = window.ActiveXObject ?
      new ActiveXObject('Microsoft.XMLHTTP') :
      new XMLHttpRequest;

  request.onreadystatechange = function() {
    if (request.readyState == 4) {
      request.onreadystatechange = doNothing;
      callback(request, request.status);
    }
  };

  request.open('GET', url, true);
  request.send(null);
}

function doNothing() {}

//]]>

</script>

</head>

<body onload="load()">
<div id="map" style="width: 500px; height: 300px"></div>
</body>

</html> 
```

任何帮助表示赞赏！

# c# - 重新序列化 Xps 文档时丢失图像

> ID：10188307
> 
> 赞同：0
> 
> 时间：2012-04-17T09:08:47.570
> 
> 标签：c#, .net, wpf, xps

我遇到了一个问题，我使用此代码将水印应用于 Xps 文档中的每个页面。

```
 private static XpsDocument AddWatermark(string watermark, Package container, XpsDocument xpsOld)
    {
        // Open original XPS document    
        FixedDocumentSequence seqOld = xpsOld.GetFixedDocumentSequence();

        // Create new XPS document
        Uri u = new Uri("pack://TemporaryPackageUri.xps");

        try
        {                
            PackageStore.RemovePackage(u);
        }
        catch { }

        PackageStore.AddPackage(u, container);
        var newdoc = new XpsDocument(container, CompressionOption.Maximum, u.AbsoluteUri);

        XpsDocumentWriter writer = XpsDocument.CreateXpsDocumentWriter(newdoc);

        // Needed for writing multiple pages

        SerializerWriterCollator vxpsd = writer.CreateVisualsCollator();

        int pageno = 1;

        foreach (DocumentReference r in seqOld.References)
        {
            FixedDocument d = r.GetDocument(false);

            // Walk through each page

            foreach (PageContent pc in d.Pages)
            {
                FixedPage fixedPage = pc.GetPageRoot(false);

                double width = fixedPage.Width;
                double height = fixedPage.Height;
                Size sz = new Size(width, height);

                // Convert to WPF Visual

                fixedPage.Measure(sz);
                fixedPage.Arrange(new Rect(new Point(), sz));
                fixedPage.UpdateLayout();

                ContainerVisual newpage = new ContainerVisual();
                newpage.Children.Add(fixedPage);

                if (!string.IsNullOrEmpty(watermark))
                {
                    newpage.Children.Add(CreateWatermark(width, height, watermark + " (" + pageno + ")"));
                }

                pageno++;

                // Write out modified page
                vxpsd.Write(newpage);

            }
        }

        vxpsd.EndBatchWrite();

        container.Flush();

        // this part serializes the doc to a stream so we can get the bytes
        var ms = new MemoryStream();
        var writerx = new XpsSerializerFactory().CreateSerializerWriter(ms);
        writerx.Write(newdoc.GetFixedDocumentSequence());            

        xpsOld.Close();

        return newdoc;
    } 
```

它基本上将 Xps 文档作为参数并遍历每个页面，创建视觉效果并在其上添加对角线水印。

我遇到的问题是它丢失了嵌入原始 Xps 中的图像。

有什么我想念的吗？像我需要复制的一系列嵌入式资源？

任何帮助表示赞赏，我对 Xps 文档不太熟悉。

编辑1：这实际上是导致问题的方法

```
 public static void PrintFlowDocument(PrintQueue printQueue, DocumentPaginator document, string watermark)
    {
        MemoryStream lMemoryStream = new MemoryStream();
        Package package = Package.Open(lMemoryStream, FileMode.Create);
        Uri u = new Uri("pack://TempTemporaryPackageUri.xps");
        PackageStore.AddPackage(u, package);
        XpsDocument doc = new XpsDocument(package, CompressionOption.NotCompressed, "pack://TempTemporaryPackageUri.xps");

        XpsDocumentWriter xpsDocumentWriter = PrintQueue.CreateXpsDocumentWriter(printQueue);
        xpsDocumentWriter.Write(doc.GetFixedDocumentSequence());          

        PackageStore.RemovePackage(u);
    } 
```

这是调用 addwatermark 函数的函数（尽管我已经省略以避免混淆）。我所做的只是创建一个新的 xps 并向其添加文档序列（在添加和缩放水印之后）。

在此之后，嵌入的 XpsImage 是一个 1x1 黑色像素......大概是因为我需要将资源（感谢 Jon）复制到它。

关于我如何完成这个的任何建议？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T13:49:14.253

看起来您跳过了复制所有资源并打印票证。不过，一般来说，您应该尝试修改现有文档，而不是创建一个新的副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T09:22:40.230

添加水印后，您应该添加一个 fixedPage.UpdateLayout() 。

# android - Asmack Conflict(409) - 尝试登录服务器时

> ID：10188308
> 
> 赞同：2
> 
> 时间：2012-04-17T09:08:49.787
> 
> 标签：android, xmpp, smack, asmack

我在尝试连接到 Openfire 服务器时遇到冲突错误（409）。

我检查了服务器，服务器策略设置为“如果有任何相同的新传入连接，则踢最后一个连接”

```
W/System.err(13238): conflict(409)
W/System.err(13238):    at org.jivesoftware.smack.SASLAuthentication.bindResourc
eAndEstablishSession(SASLAuthentication.java:458)
W/System.err(13238):    at org.jivesoftware.smack.SASLAuthentication.authenticat
e(SASLAuthentication.java:349)
W/System.err(13238):    at org.jivesoftware.smack.XMPPConnection.login(XMPPConne
ction.java:230)
W/System.err(13238):    at org.jivesoftware.smack.Connection.login(Connection.ja
va:353) 
```

尝试执行此操作时：

```
ConnectionConfiguration xmppCc = new ConnectionConfiguration("some.domain");
xmppCc.setSendPresence(false);
XMPPConnection xmppConn = new XMPPConnection(xmppCc);
xmppConn.connect();
xmppConn.login(username, password); 
```

执行最后一行（登录）时抛出异常

我在我的活动 onDestroy() 上执行此操作

```
@Override
protected void onDestroy() {
    super.onDestroy();
    Presence presence = new Presence(Presence.Type.unavailable);
    xmppConn.sendPacket(presence);  
    xmppConn.disconnect();
} 
```

任何帮助表示赞赏，谢谢！:D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T12:20:46.787

我不会在 smack 中搜索代码。似乎服务器（听起来像 openfire）没有按照您配置他的方式执行：踢最后一个资源。您可以尝试使用 XMPP 客户端来验证这种情况，该客户端尝试绑定已连接的 fullJID（即裸 ID + 资源）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T12:02:29.237

@GodWin xmpp 通过冲突错误（409）当您使用已被其他任何人使用的用户名创建帐户时。在登录时 Xmpp 没有通过这种类型的异常。因此，如果您创建一个帐户，则使用未在服务器上注册的新凭据。

# css - 悬停、活动、焦点状态是否继承值？

> ID：10188311
> 
> 赞同：7
> 
> 时间：2012-04-17T09:09:02.800
> 
> 标签：css, hyperlink, focus, hover

我只是想知道您是否不更改值，做`hover`，`active`并`focus`自动从标准`a`标签继承设置？

例如：

```
.wrapper .left .main .row .holder .more a,
#content .wrapper .left .main .row .holder .more a:visited
{
    width: 92px;
    min-width: 92px;
    max-width: 92px;
    height: 23px;
    min-height: 23px;
    max-height: 23px;
    display: block;
    margin: 0px auto;
    background: #fff url(../images/more-info-btn.png) top left no-repeat;
}

#content .wrapper .left .main .row .holder .more a:hover {
    width: 92px;
    min-width: 92px;
    max-width: 92px;
    height: 23px;
    min-height: 23px;
    max-height: 23px;  
    display: block;
    margin: 0px auto;
    background: #fff url(../images/more-info-btn.png) bottom left no-repeat;
} 
```

下面会做同样的事情吗？

```
#content .wrapper .left .main .row .holder .more a,
#content .wrapper .left .main .row .holder .more a:visited
{
    width: 92px;
    min-width: 92px;
    max-width: 92px;
    height: 23px;
    min-height: 23px;
    max-height: 23px;
    display: block;
    margin: 0px auto;
    background: #fff url(../images/more-info-btn.png) top left no-repeat;
}

#content .wrapper .left .main .row .holder .more a:hover {
    background: #fff url(../images/more-info-btn.png) bottom left no-repeat;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-17T09:09:57.397

是的，这是正确的，伪状态继承了值。

出于一致性目的，最好只在伪状态规则中声明您正在更改的样式。

`font-size:1.9em`使用以下代码，`padding-top:10px`无论状态如何，文本都将始终为`:hover`：

```
a
{
    color:red;
    font-size:1.9em;
    padding-top:10px;
}

a:hover
{
    color:green;
}​ 
```

[**-- 见示例 --**](http://jsfiddle.net/Curt/x34Qe/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T10:13:38.323

不，因为`a`处于其中一种状态的元素仍然是`a`元素，并且元素不能从自身继承。`a`但是，当元素处于其中一种状态时，作为选择器的任何设置也适用。

因此，当您希望某些属性应用于`a`所有状态的元素时，使用选择器设置它们就足够了`a`。

从技术上讲，由于选择器的差异会影响特异性，因此您问题中的两组规则并不等效。这很重要的情况很少见，并且在应用的其他样式表中会涉及相当特殊的规则。

# jquery - 如何在 javaScript:Jquery 中的客户端保存/持久化和访问数据？

> ID：10188312
> 
> 赞同：0
> 
> 时间：2012-04-17T09:09:09.827
> 
> 标签：jquery, javascript, javascript-framework, jstree

如何在 javaScript:Jquery 中的客户端保存/持久化和访问数据？

我正在使用 Jquery:JavaScript 的 jsTree 组件。

在jstree的bind（）中，选择节点后我想保存“数据”

```
.bind("select_node.jstree", function (event, data) { 
// where & how to save data ?
}

$("#Btn").click(function() {
// I want to access data value on click event
} 
```

我试图在 cookie 中设置数据对象并在 $("#Btn").click(function() {... 但无法访问相同的数据对象

+

我还尝试了 jQuery.data() 即在 bind() 中设置数据，例如......

```
jQuery.data(div, "selectedNode", data); 
```

并尝试在 $("#Btn").click(function(){.... 中访问

```
var selectedNodeData = jQuery.data(div, "selectedNode"); // Can't access 
```

在此问题上的任何帮助或指导将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T09:18:30.587

您的解决方案是网络存储，它是 HTML 5 流行语的一部分，但旧浏览器不支持它，您可以使用[localstorage](http://coding.smashingmagazine.com/2010/10/11/local-storage-and-how-to-use-it/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T09:29:20.000

*要跨多个页面*持久化数据`localStorage`，有`sessionStorage`和`cookies`解决方案。

如果你没有让它工作，那么你有什么问题。我建议您向我们展示您用于 cookie 的代码 :)

*要在单个页面上*共享数据，您可以使用`data()`jQuery。但是通过这种方式，您可以将数据附加到 DOM 元素，而不是无处可去。这是一个示例：

```
$.data( '#myId', 'selectedNode', '#nodeSelected' )
// There, I attach the "selectedNode" key with the "#nodeSelected" value
// to the "#myId" element.

// To retrieve the data later, you have to use:
var el = $.data( '#myId', 'selectedNode' )

// Then, you can use the value like this:
$( el ).on( 'click', fn ) 
```

# iphone - MPMoviePlayerController 上的 Swipegesture 会干扰在 iOS 4.x 中寻找视频

> ID：10188314
> 
> 赞同：0
> 
> 时间：2012-04-17T09:09:25.183
> 
> 标签：iphone, ios, mpmovieplayercontroller, mpmovieplayer, uiswipegesturerecognizer

我正在开发一个 iOS 应用程序，我在其中显示 MPMoviePlayerController 中的视频。用户可以通过滑动 mpmovieplayercontroller 来更改视频。我使用 UISwipeGestureRecognizer 对其进行了管理。在 iOS 5.0 中一切正常，但是当我在 iOS 4.x 上尝试相同的代码时，我遇到了一个问题。快速寻找视频会导致手势代码运行，从而改变视频。

我怎样才能阻止这件事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T09:01:01.713

我限制了手势工作的区域，所以现在 swipeGesture 如果触摸点超过特定值，则不会执行任何操作，因此具有搜索滑块的区域不会受到手势的影响。

这只是一种解决方法，欢迎任何其他更合适的方法！

# java - 我在扩展使用视图的基于 h2 的 Java 应用程序时遇到问题

> ID：10188315
> 
> 赞同：2
> 
> 时间：2012-04-17T09:09:28.553
> 
> 标签：java, performance, hibernate, view, h2

**这里的环境：** 我们为客户编写了一个基于嵌入式 h2 数据库的应用程序，在进行测试之前它已升级到最新版本。该数据库由 29 个表和 26 个视图组成。在 26 个视图中，只有 8 个在 java 中真正“使用”，映射视图休眠到 pojos。其他视图只是为其他视图进行背景计算，例如聚合一些值，然后按某些列分组。在这些视图中进行了大量计算。我们决定不使用 java 进行计算，因为您可以使用自己喜欢的工具（例如 h2 控制台）轻松检查数据库表，查看计算中是否有任何错误。由于这个事实，有很多“CASE WHEN ... END” 一旦该行中的单个列为 NULL，自休眠以来，这些视图中的语句总是返回所有列中具有 NULL 值的整行。我们也无法解决这个问题……然而，由于我们在计算中也有除法，我们需要检查 NULL、0 和 0.0。视图是“堆叠的”，因为有时会在其他地方使用一些中间值。但是总是有一个“堆栈”的 7 个视图“下方”一个最终视图也基于另一个使用 6 个视图的“堆栈”的视图。有些观点是相同的，有些则不同。

**现在，问题来了：** 当在“有趣的”表中向数据库中插入一对（比如 20 条）记录时，一个视图会在大约 400 毫秒。这对我们来说没问题。将数据扩展到大约 500-2000 条记录，特殊视图（交付大约 25 个聚合行）需要一个多小时 (1h) 来交付数据。该机器是具有 8GB RAM（-Xmx2G 和 -Xms1G）CPU 2.66GHz（Intel(R) Core(TM)2 Quad CPU Q8400 @ 2.66GHz）的 Linux 或具有 4GB RAM (-Xmx1G - Xms512m) CPU 未知，但可能是单核/双核@2GHz。

**到目前为止我的分析：** 我跟踪了应用程序的内存使用情况，这似乎不是主要问题。在长时间运行的查询期间查看堆栈跟踪显示，我的堆栈深度（有时）高达 100 级以下（！）我进入休眠 getEntityManager().createQuery(getCriteriaQuery()).getResultList() 的入口点。明显的“耗时”是 org.h2.table.TableFilter/Table/TableView.getBestPlanItem 和 org.h2.table.Plan.calculateCost 以及 org.h2.index.ViewIndex.getCost 。我检查了所有视图中的所有连接是否缺少索引，找到一个，添加了一个，但没有成功。

**我的测试：** 我将所有数据和模式转移到同一台 Linux 机器上的 PostgreSQL (8.1) 中（vanilla 未调整）并在那里运行测试（在进行任何 vaccuum 或 reindex 之前！）结果是压倒性的：大约。6 秒。对于具有相同数据的相同视图，在 h2 上花费了大约 1 小时。

现在我真的不想切换我的数据库，但这将是最终的选择，除非有人有一个好主意......

**备注：** 关于我发现的事情如下：在查看 h2 的 information_schema 中的视图时，我可以看到他正在做相当多的工作来分析视图本身。我的 sql 脚本中的所有视图都在 20 到 120 行之间（大约）。信息模式中的“编译”视图范围从 2KBytes 到 3MBytes（即兆字节），上面的一个接近 400k ...也许这也是问题的一部分...

好的，这就是所有的人。我很乐意提供任何帮助。我愿意切换数据库，因为我们到处都在使用 hibernate 和 CriteriaQuery，所以唯一的工作就是切换 jdbc 连接器，更改视图中的一些代码（已经完成，但必须在生产前检查两次）并安装PostgreSQL 或客户台式机 (irk) 上的 MSDE，这将导致可能发生的其他不需要的错误，因为 MS 更新可能会使 MSDE 损坏或数据库由于任何原因而无法启动......

问候，霍尔格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T15:55:47.927

也许查询/视图对于 H2 来说太复杂而无法优化它们，但是如果不知道细节（重现问题的代码）就很难说。PostgreSQL 的优化器优于 H2 优化器。可能您需要创建其他索引。为了分析这一点，我建议阅读有关[性能优化和索引](http://h2database.com/html/performance.html#storage_and_indexes)的文档。

# git - Git合并移动和重命名的文件

> ID：10188316
> 
> 赞同：1
> 
> 时间：2012-04-17T09:09:30.103
> 
> 标签：git, egit

在一个分支中，我重命名了文件。在其他分支中，我移动了文件。我将主分支与两个分支合并。现在我在 master 分支中有两个文件，并且在合并期间没有冲突。Git应该表现得像那样吗？我希望至少有警告。

编辑：控制台给了我警告。所以这是egit问题。（Egit是eclipse插件）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T09:25:48.093

行为是正常的，因为您在没有`git mv`;的情况下重命名了文件 git 正确检测到文件重命名，但没有提交删除旧文件，因此合并后您现在拥有两个文件。

正确使用`git mv`, 或`mv`后跟`git rm oldfile`会导致合并冲突。

```
Initialized empty Git repository 
$ echo "hello" > hello.txt
$ git add hello.txt && git commit -m "first"
[master (root-commit) 708ec5f] first
 1 file changed, 1 insertion(+)
 create mode 100644 hello.txt
$ git branch mybranch
$ git mv hello.txt hello2.txt
$ git commit -m "renamed"
[master 00c68ed] renamed
 1 file changed, 0 insertions(+), 0 deletions(-)
 rename hello.txt => hello2.txt (100%)
$ 
$ git checkout mybranch
Switched to branch 'mybranch'
$ mkdir test
$ git mv hello.txt test
$ git commit -m "moved"
[mybranch 044e091] moved
 1 file changed, 0 insertions(+), 0 deletions(-)
 rename hello.txt => test/hello.txt (100%)

$ git checkout master
Switched to branch 'master'
$ git merge mybranch
CONFLICT (rename/rename): Rename "hello.txt"->"hello2.txt" in branch "HEAD" rename "hello.txt"->"test/hello.txt" in "mybranch"
Automatic merge failed; fix conflicts and then commit the result. 
```

# mysql - MySQL 使用带有元组的 IN()

> ID：10188317
> 
> 赞同：1
> 
> 时间：2012-04-17T09:09:44.777
> 
> 标签：mysql

我很确定这是不可能的，但只是想仔细检查一下。

显然 IN() 的正常使用是

```
UPDATE cars
SET colour = "Sunburst Red"
WHERE id IN(SELECT id FROM cars WHERE colour LIKE "%Red%") 
```

但是，如果我需要在我的 IN() 中更具体怎么办，例如

```
UPDATE cars
SET colour = "Sunburst Red"
WHERE id, make IN(SELECT id, make FROM cars WHERE colour LIKE "%Red%" AND make like "Honda") 
```

我知道这在很大程度上是一种面向对象风格的做事方式，我非常怀疑 MySQL 可以做到这一点，但只是机会渺茫。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T09:19:05.460

可以在 IN 中使用 touple，您只需要添加大括号

`WHERE (id, make) IN(SELECT id, make FROM cars WHERE colour LIKE "%Red%" AND make like "Honda")`

然而，在子选择中使用同一个表`update`是危险的，并且通常是不允许的。您的查询可以重写为

```
UPDATE cars
SET colour = "Sunburst Red" WHERE `colour` LIKE "%Red%" AND `make` = "Honda" 
```

注意：[查询可能没有以这种方式优化](http://www.mysqlperformanceblog.com/2008/04/04/multi-column-in-clause-unexpected-mysql-issue/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T09:18:49.103

为什么不使用两个 IN 块？

```
UPDATE cars
SET colour = "Sunburst Red"
WHERE id IN(SELECT id FROM cars WHERE colour LIKE "%Red%" AND make like "Honda") 
AND
make IN(SELECT make FROM cars WHERE colour LIKE "%Red%" AND make like "Honda") 
```

好吧，这不是最好的风格，也许不是很快，但是一个快速而肮脏的解决方案：D

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T09:19:05.740

您的更新虽然不需要那么复杂，因为您的子查询在同一张表上。

你必须切换到类似的东西：

```
UPDATE cars
SET colour = "Sunburst Red"
WHERE colour LIKE "%Red%" AND make like "Honda" 
```

您可能想要评估向颜色添加索引并创建字段的影响，但如果它的更新很少使用它可能不值得。

# ios - NSFetchedResultsController 无法在子上下文中获取

> ID：10188319
> 
> 赞同：2
> 
> 时间：2012-04-17T09:09:47.680
> 
> 标签：ios, core-data, nsfetchedresultscontroller, uimanageddocument

我有`UIManagedDocument`一些数据，我使用`NSFetchedResultsController`. 数据会在后台定期更新，并将更改放入`UIManagedDocument.managedObjectContext`（使用 performBlock :)。

当我从文档的主要上下文中显示数据时，一切都按预期工作。但是，一旦我在作为主上下文 ( `child.parentContext = document.managedObjectContext`) 的子上下文的上下文中显示列表，我就看不到任何对象，并且控制台上会打印以下错误：

```
foo[17895:15203] CoreData: error: (NSFetchedResultsController)
                 The fetched object at index 5 has an out of order section name 'E.
                 Objects must be sorted by section name' 
```

这仅在将新对象插入文档联系人后才会发生。当我等待足够长的时间自动保存时，列表显示正常。另外问题是只有当我有一个`sectionNameKeyPath`集合`NSFetchedResultsController`并且只有子上下文时。

这就是我设置获取结果控制器的方式，没什么特别的，所以我看不出我在这里做错了什么：

```
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] initWithEntityName:@"Contact"];
fetchRequest.sortDescriptors = [Contact userDefinedSortDescriptors];
fetchRequest.predicate = [NSPredicate predicateWithFormat:@"hidden == nil || hidden == NO"];

NSFetchedResultsController *fetchedResultsController = 
[[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest
                                    managedObjectContext:_managedObjectContext
                                      sectionNameKeyPath:[Contact userDefinedSectionNameKeyPath]
                                               cacheName:@"ContactList"]; 
```

`[Contact userDefinedSortDescriptors]`并`[Contact userDefinedSectionNameKeyPath]`在运行时解决。排序描述符包含 sectionNameKeyPath 作为第一个条目。既不是也不是`nil`其他有趣的东西。

**编辑**：澄清了一些模糊的部分。具体来说，我不会在文档托管对象上下文中调用 -save:。

**编辑 2**：我将尝试解释 MOC 之间的关系。

有三个托管对象上下文在起作用：

1）`UIManagedDocument.managedObjectContext`通过加载文档创建。

2）有一个后台线程正在运行，它会不时更新对象。这是一个以文档 MOC 作为父级的私有队列 moc：

```
context = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSPrivateQueueConcurrencyType];
context.parentContext = repository.managedObjectContext;

[context performBlock:^{ /* updates */ }];
[context performBlock:^{ [context save:NULL]; }]; 
```

3) 当用户想要进行更改时，将创建一个新的 MOC 作为文档 MOC 的子项。这是一个主队列 MOC。这是用于执行上面显示的提取的上下文。

后台更新是从 NSOperationQueue 完成的，但是对后台 MOC 的所有访问都正确地用`-performBlock:`. 所有其他访问都是从主线程完成的。

**编辑3**：在玩一些设置时，`NSFetchRequest`我发现设置时问题消失了`fetchRequest.includesPendingChanges = NO`。但这不是一个可行的解决方案，因为现在用户看不到任何更新，直到 UIManagedDocument 将更改保存在后台。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T19:38:42.777

我这里有几个危险信号。首先，这个...

*数据会在后台定期更新，并将更改保存到 UIManagedDocument.managedObjectContext（使用 performBlock:)。*

UIManagedDocuments 实现自动保存，我们唯一应该直接调用保存方法的时间是在初始创建时。所有其他“保存”都应通过自动保存界面完成。基本上，那将是调用

```
[document updateChangeCount:UIDocumentChangeDone]; 
```

如果您使用 UndoManager，这将自动完成。因此，如果您直接输入 document.managedContext，您只需调用上述方法通知托管文档更改已完成，其他一切都应自动处理。

其次，我不确定你的意思是什么：

*但是一旦我在子上下文中显示列表，*

子上下文是什么？为什么任意上下文应该看到任何东西？它是 UIManagedDocument 的主要上下文的子上下文，还是父上下文，还是其他什么？

文档很清楚（对于明确的一些定义），但不幸的是，它需要阅读 UIDocument、UIManagedDocument 以及所有 NSManagedOjectContext 内容的完整文档集。

当我终于完全了解正在发生的事情时（具有讽刺意味的是，通过阅读有关 iCloud 的工作原理），我所有与 UIManagedDocument 相关的问题似乎都消失了。

基本上，遵循这些简单的规则：

1.  永远不要直接在 UIManagedDocument 中嵌入的任何上下文中调用任何“保存”方法。

2.  当对象“脏”并且需要保存时，要么向 undo-manager 注册更改，要么直接调用 [doc updateChangeCount:UIDocumentChangeDone]。

3.  如果您想使用子上下文，请继续。在这种情况下，您需要做的就是设置 parentContext 属性，然后在您的子上下文中调用 save:。其他一切都会自动发生。

**编辑** 另一个危险信号是您正在使用不同的上下文运行代码。如果是这种情况，您必须确保从正确的线程运行。NSManagedObjectContext 对象不是线程安全的。因此，必须始终从创建它们的线程访问它们（如果是 NSConfinementConcurrencyType），或者如果是其他两种并发类型之一，则使用 performBlock。

如果您使用多个上下文连续插入/获取，您将有一些问题需要解决。主要是，您必须确保您的更改被传播并计划保存，然后您的获取执行您希望他们执行的操作。

插入完成后，请确保仅使用 UIManagedDocument 的子上下文调用 save。切勿在托管文档上调用 save 或 saveToURL。使用上述方法保存到它。这将确保您正确传播更改。

提取时，您必须决定是否希望您的提取一直沿上下文链向上。NSFetchRequest 上有很多选项（例如 setShouldRefreshRefetchedObjects）。这些选项将决定 fetch 是仅使用其自己的上下文，还是转到后备存储以及许多其他内容。大多数情况下，默认值是您想要的，但是在使用子上下文时，您有更多的责任。

此外，如果您有子上下文，则必须确保使用正确的并发类型创建它们，并且仅在正确的线程/队列中使用它们。否则，您将得到未定义的结果。

**编辑**

针对您最近的问题编辑中的这一声明：

*3) 当用户想要进行更改时，将创建一个新的 MOC 作为文档 MOC 的子项。这是一个主队列 MOC。这是用于执行上面显示的提取的上下文。*

我从来没有这样做过，对我来说，这是另一个危险信号。已经有一个主队列 MOC - document.managedObjectContext。如果您想在主线程中处理文档，请使用它。请记住，CoreData 仍然在线程包含模型上运行，并且实际上每个线程只需要一个 MOC。新的 API 提供了将 MOC 与队列相关联的方法，并有所帮助，但我敢打赌，每个线程有多个 MOC 可能会导致问题。一般来说，我会避免这种情况。

# css - CSS错误jQuery Mobile Themeroller

> ID：10188322
> 
> 赞同：0
> 
> 时间：2012-04-17T09:09:50.050
> 
> 标签：css, jquery-mobile

我使用 jQuery Molbile 的 Themeroller 为我的 jQuery Mobile Web 应用程序创建了一个主题。根据 Aptana studio 3，CSS 包含错误。

```
.ui-overlay {
background: #666;
opacity: .5;
filter: Alpha(Opacity=50);
position: absolute;
width: 100%;
height: 100%;
} 
```

存在语法错误：此行出现意外标记“=”：

```
filter: Alpha(Opacity=50); 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T09:33:58.910

```
// for IE5-7
filter: alpha(opacity=50);

// for IE8
-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";

// for all other browsers including IE9
opacity: .5; 
```

根据您的要求，选择是否要放置该属性。希望能帮助到你

**编辑：**有用的 MSDN[**链接**](http://blogs.msdn.com/b/ie/archive/2010/08/17/ie9-opacity-and-alpha.aspx)显示了 IE9 和其他版本中 CSS 的最佳实践

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T09:11:48.833

那条线是为了在不透明的东西上兼容 IE。你需要它吗？如果不这样做，请删除该行。如果你需要它……你无能为力。

# expression - 计算成员表达式中的 SQL

> ID：10188329
> 
> 赞同：2
> 
> 时间：2012-04-17T09:10:27.450
> 
> 标签：expression, ssas, mdx, member

我需要在我的计算成员表达式中使用从数据库表中选择的值。如何引用立方体外的对象？

例如：我在我的多维数据集中测量了“销售额”。我想创建一个计算成员，它将是从数据库表中选择的“销售额”和一些常数的乘积。

```
CALCULATE;   
CREATE MEMBER CURRENTCUBE.[Measures].MultiSales
 AS [Measures].[Sales] * <and here I need to add constant from database table>, 
VISIBLE = 1; 
```

如何引用数据库表？（此表与多维数据集在同一数据源中）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T15:05:26.073

你不能。您计算中的数据“必须”在多维数据集上。我说必须用引号引起来，因为它取决于您的存储模式。如果您有 ROLAP 存储模式，则数据实际上不会驻留在多维数据集上。但这是一种存储配置。

如果要在计算成员上使用值，请根据您拥有此值的表创建度量值组

# javascript - 通过 javascript 为 taglib 设置属性

> ID：10188338
> 
> 赞同：1
> 
> 时间：2012-04-17T09:10:56.213
> 
> 标签：javascript, grails, attributes, taglib

我有一个案例，我想在从下拉菜单中选择的项目上设置 taglib 的属性。

那么我该怎么做

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T09:27:15.943

Taglib 在服务器端准备 html，制作一个静态字符串，一个 html，将发送到浏览器。Javascript 在客户端，在浏览器中，针对准备好的 html 文档工作。

您可以更新当前文档的模型（HTML DOM），但是无法对已经完成的逻辑进行更改，生成一个 html 并且您已经收到了结果。如果您正在寻找一种快速、简单的工具来操作 HTML DOM，那么看看[jQuery](http://jquery.com)

或者您也可以对服务器进行 ajax 调用，在服务器端呈现 html（使用任何 taglib），并以更新的 html 进行响应。看看[remoteFunction](http://grails.org/doc/latest/ref/Tags/remoteFunction.html)，[remoteLink](http://grails.org/doc/latest/ref/Tags/remoteLink.html)等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T11:09:32.103

使用属性。

```
def doSomething = { attrs, body ->
    def pid = attrs?.param;
    out << 'You gave the following param'+ pid
} 
```

# c# - 访问对象属性而不强制转换为类型

> ID：10188339
> 
> 赞同：6
> 
> 时间：2012-04-17T09:10:56.633
> 
> 标签：c#, linq

我正在使用 LINQ to entity 返回对象列表

```
 var st = personsList.Select(p => new
            {
                ID = p.Id,
                Key = p.Key,
                Name = p.Name,
                Address = p.Address,
                City = p.City,
                PhoneNumber = p.PhoneNumber
            })
            return st.ToList(); 
```

在我获得另一个班级的列表后，我如何访问每个属性？

就像是

```
foreach(object s in St)
{
    string name = s.Name;
} 
```

我没有预定义的类来将对象转换为它。

这可以在不必创建类并将对象转换为该类类型的情况下完成吗？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-17T09:12:50.583

你在使用 C# 4 吗？您可以尝试使用`dynamic`：

```
foreach(dynamic s in St)
{
    string name = s.Name;
} 
```

当然，风险在于，如果您尝试访问对象没有的属性，您只会在运行时发现。

顺便说一句，在这种情况下，实际创建一个具有所有这些属性的类不是更有意义吗？您显然在多个地方都需要它们，并且您将获得类型安全和编译时错误的好处。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-17T09:19:14.623

你可以使用以下

```
foreach(object s in St)
{
   Type type = s.GetType();
   PropertyInfo property = type.GetProperty("Name");
   if(property !=null)
   {
       string name= (string )property.GetValue(s, null);
   }
} 
```

您必须将命名空间 System.Reflection 添加到类

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T09:16:37.553

C# 3.0 具有[`var`](http://msdn.microsoft.com/en-us/library/bb383973.aspx)允许隐式转换的类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T09:17:22.433

编译器正在为您创建一个可以在方法范围内使用的匿名类型。如果您需要传递 LINQ 查询的结果，那么最好创建一个域对象来表示该信息，例如 PersonSummary，并将查询结果分配给它。C# 是强类型的利用这一点。

# glassfish-3 - Glassfish 3 有两种配置

> ID：10188342
> 
> 赞同：18
> 
> 时间：2012-04-17T09:11:04.093
> 
> 标签：glassfish-3

我想在 Glassfish 3.1 中设置 JDBC 领域，我正在关注这个博客[http://blog.gamatam.com/2009/11/jdbc-realm-setup-with-glassfish-v3.html](http://blog.gamatam.com/2009/11/jdbc-realm-setup-with-glassfish-v3.html)

但我注意到在 Glassfish 3.1 中有两个配置，即**default-config**和**server-config**

我只是想尝试使用 glassfish 进行身份验证，但我不知道应该在哪里配置我的领域？

有什么提示吗？

谢谢

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-04-17T09:37:08.160

把它放在*server-config*中。

来自[Glassfish 3.1.1 文档](http://docs.oracle.com/cd/E18930_01/html/821-2426/abdjl.html)：

> default-config 配置是一种特殊的配置，它充当创建命名配置的模板。集群和实例不能引用 default-config 配置。只能复制 default-config 配置来创建配置。

# layout - CSS3：在第二个和第三个之间浮动第一个 div

> ID：10188343
> 
> 赞同：5
> 
> 时间：2012-04-17T09:11:12.130
> 
> 标签：layout, html, css, css-float

应该是一个简单的解决方案：

我有以下顺序的div：

```
<div id="middle"></div>
<div id="right"></div>
<div id="left"></div> 
```

我必须按这个顺序排列它们。使用浮点数，我怎样才能让第一个 div ( `"middle"`) 落在第二个 div 之间。

每个 div 都有一个设定的高度和一个设定的宽度（以 px 为单位）。

我试过`float:left;`在中间做：

> [[中] 右] [左]

然后`float:right;`在顶部集群上：

> [左[[中]右]]]

但它显示为

> [中][左][右]

有什么帮助吗？

**编辑：**这是当前来源：

[http://pastebin.com/sjiw9PLn](http://pastebin.com/sjiw9PLn)

[http://pastebin.com/NMsWk1nZ](http://pastebin.com/NMsWk1nZ)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-17T09:18:00.437

你可以这样写：

```
div{
display:inline-block;
}
#left{
 float:left;
}
#right{
 float:right;
} 
```

检查这个[http://jsfiddle.net/8amez/](http://jsfiddle.net/8amez/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T09:22:30.257

如果您确实能够添加包装器 div 元素，那么这在[JS Fiddle](http://jsfiddle.net/davidThomas/bFL8t/)有效（就您的简单示例而言） ：

```
​#left {
    float: left;
}

​#wrap {
    width: 80%;
    float: right;
}

​#wrap #middle {
    float: left;
}

#wrap #right {
    float: right;
}​ 
```

给定以下 HTML：

```
<div id="wrap">
    <div id="middle">middle</div>
    <div id="right">right</div>
</div>
<div id="left">left</div>​​​​​​​​​​​​​​​​​​ 
```

但请记住，这可能相当脆弱；并且可以通过重新排序标记来更好地实现，或者，如果不能在服务器端或在 HTML 中更改，则使用 JavaScript 移动内容，例如：

```
var middle = document.getElementById('middle'),
    left = document.getElementById('left');

middle.parentNode.insertBefore(middle,left.nextSibling);​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/bFL8t/1/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T09:18:47.067

如果设置了宽度和高度，请使用 css 属性：

```
position:absolute; 
```

和玩：

```
left: 100px; /* width of the div on the left */ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-20T10:50:54.090

很久以后为了乐趣：将所有 3 个 div 都放在另一个旁边，而不是有一个 text-align-center 属性（仅适用于中间 div），并让左右 div 浮动作为回答。

```
.group{
   text-align:center;
}

#left{
 display:inline-block;
   float:left;
}

#right{
   display:inline-block;
   float:right;
}

#middle{
 display:inline-block;

}
```

```
<div class="group">
  <div id="left">[left]</div>
  <div id="middle">[middle]</div>
  <div id="right">[right]</div>
</div>
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-17T09:28:24.260

假设某些抓取工具必须按照这个顺序来抓取依赖于它的代码，为什么不在页面加载后添加一些 JavaScript 来随机播放它们。

# c# - 我不希望表单从上到下逐渐绘制。我希望它一次全部显示

> ID：10188356
> 
> 赞同：0
> 
> 时间：2012-04-17T09:11:57.517
> 
> 标签：c#, .net, winforms, visual-studio

我有一个 Windows 表单，我在我的 c# 代码中添加了许多 LinkLabels。我遇到的问题是，当显示表单时，它会从上到下逐渐淹没在屏幕上。但我希望它突然而快速地出现。我应该怎么办？我什至试过这个但没有帮助：我将可见设置为假。然后用所有标签填写表格。然后叫了节目。

（我 new() 和 show() 我的表单在另一个表单的标签的 MouseEnter 事件中。）

编辑：我也尝试过 DoubleBuffer。没有帮助。我应该注意，我不在乎整个表格是否延迟出现。我只希望它一次出现。因为在我的情况下，一点延迟是不可避免的。原因是从网络中检索数据。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T09:14:23.563

作为猜测尝试`DoubleBuffered = true`在表单上设置。这应该在将整个表单表面绘制到屏幕上之前将其渲染到内存缓冲区。但是，更好的解决方案是找出导致表单呈现如此缓慢的原因。除非 UI 线程中发生大量逻辑，否则表单通常是难以察觉的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T09:15:24.247

您需要描述您的应用程序，一些可能的原因可能是：

*   加载期间的密集数据填充（可以通过需要可视化的控件数量、要加载或在另一个线程中运行的数据数量来减少）

*   视图上的控件太多（只需将它们组织在 TabControl 的不同 TabPages 中。*如果*控件太多，请避免使用它们，因为没有任何用户需要它们都是当代的。

*   最后也是最重要的：是`SuspendLayout`()/ `ResumeLayout`() 在加载的开始和结束时。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T13:03:33.613

一个主意：

也许把你所有的`LinkLabel`s 放在 a 上`Panel`，将`Panel`s设置`Dock`为`Fill`，然后将 s 添加`Panel`到`Form`.

# jquery - rails，使用咖啡脚本出现语法错误

> ID：10188363
> 
> 赞同：8
> 
> 时间：2012-04-17T09:12:19.070
> 
> 标签：jquery, ruby-on-rails, autocomplete, coffeescript

我正在尝试使用 jquery ui 库在 rails 中执行自动完成功能。但是我不断收到语法错误“语法错误：保留字“函数”在线......”

这是我的课程.js.coffee 文件

```
jQuery ->

$(function() {
    function split( val ) {
        return val.split( /,\s*/ );
    }
    function extractLast( term ) {
        return split( term ).pop();
    }

    $( "#lesson_tag_name" )
        // don't navigate away from the field on tab when selecting an item
        .bind( "keydown", function( event ) {
            if ( event.keyCode === $.ui.keyCode.TAB &&
                    $( this ).data( "autocomplete" ).menu.active ) {
                event.preventDefault();
            }
        })
        .autocomplete({
            source: $('#lesson_tag_name').data('autocomplete-source')
            },
            search: function() {
                // custom minLength
                var term = extractLast( this.value );
                if ( term.length < 2 ) {
                    return false;
                }
            },
            focus: function() {
                // prevent value inserted on focus
                return false;
            },
            select: function( event, ui ) {
                var terms = split( this.value );
                // remove the current input
                terms.pop();
                // add the selected item
                terms.push( ui.item.value );
                // add placeholder to get the comma-and-space at the end
                terms.push( "" );
                this.value = terms.join( ", " );
                return false;
            }
        });
}); 
```

我在某处在线阅读，我可以用 -> 替换单词函数 -> 我这样做了，但我停止接收函数错误，但随后我收到其他语法错误，例如“语法错误：在线保留字“var”......”

难道我做错了什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-17T09:15:00.893

只有第一行是咖啡脚本；其余的是普通的javascript。

尝试使用此转换器：

[http://js2coffee.org/](http://js2coffee.org/)

`$(function() {});`变成`$ ->`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-24T18:54:14.160

如果你想在 coffeescript 文件中嵌入 javascript，你可以使用反引号：

```
jQuery ->
  `function abc() { return 123; }  // js syntax here` 
```

见这里：[http ://coffeescriptcookbook.com/chapters/syntax/embedding_javascript](http://coffeescriptcookbook.com/chapters/syntax/embedding_javascript)

不过，这很令人困惑，因此将代码转换为咖啡脚本通常是一个更好的主意，在这种情况下，您可以按照 DanS 的建议使用[js2coffee.org](http://js2coffee.org/)转换器。

# android - 设置对 listView 的响应

> ID：10188364
> 
> 赞同：0
> 
> 时间：2012-04-17T09:12:24.613
> 
> 标签：android, listview, response

我得到了服务器的响应，我存储在列表中。我正在获取整个数据列表。但我希望它设置为将列表中的数据设置为两个不同的 textViews。我该怎么做。我已经解析了数据并得到正确的响应，但只想将数据拆分为两个文本视图

我的代码是

```
myList = new ArrayList<HashMap<String, Object>>();

             mainListView = (ListView) findViewById(R.id.main_listview);

                    /*tv = (TextView) findViewById(R.id.result);
            tv1 = (TextView) findViewById(R.id.result1);
            tv2 = (TextView) findViewById(R.id.result2);*/
            request = new SoapObject(NAMESPACE, METHOD_NAME);
            request.addProperty("FilterCondition", "");
            request.addProperty("UserID", -1);
            request.addProperty("Type", "ALL");
            request.addProperty("PageID", 1);
            request.addProperty("SiteURL", "http://www.xxx.mobi/");
            request.addProperty("SortCondition", "order by name");
            request.addProperty("FilterID", -1);
            request.addProperty("KeyValue", 1);
            request.addProperty("EventFilterType", "");
            SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                    SoapEnvelope.VER11);
            envelope.dotNet = true;
            SoapObject result = null;
            envelope.setOutputSoapObject(request);
            AndroidHttpTransport sab = new AndroidHttpTransport(URL);
            // Category C=new Category();
            sab.debug = true;
            try {
                sab.call(SOAP_ACTION, envelope);
                if (envelope.getResponse() != null) {
                    result = (SoapObject) envelope.bodyIn;
                    String[] values = new String[result.getPropertyCount()];
                    for (int i = 0; i < result.getPropertyCount(); i++) {
                        Log.d("Value", result.getProperty(i).toString());
                        int j = result.getPropertyCount();
                        Log.d("count is", Integer.toString(j));
                    //  tv.setText("ss:" + result);
                        Log.d("status", result.toString());
                    }
                    list = new ArrayList<String>(
                            result.getPropertyCount());
                    String lv_arr[] = new String[result.getPropertyCount()];
                    for (int i1 = 0; i1 < 1; i1++) {
                        Object property = result.getProperty(i1);
                        if (property instanceof SoapObject) 
                        {
                            SoapObject countryObj = (SoapObject) property;
                            SoapObject countryName = (SoapObject) countryObj
                                    .getProperty("diffgram");
                            SoapObject country = (SoapObject) countryName
                                    .getProperty("NewDataSet");
                            SoapObject ss = (SoapObject) country
                                    .getProperty("Table");
                            Log.d("message", ss.getProperty("Name").toString());
                            list.add(ss.getProperty("Name").toString());
                            list.add(ss.getProperty("ShortDescription").toString());
                            list.add(ss.getProperty("IconPath").toString());

                            Log.d("list values", list.toString());

                            /*
                             * JSONObject o = new JSONObject(sr); JSONArray
                             * js=o.getJSONArray("Table"); for(int i4 = 0; i4 <
                             * js.length(); i4++){
                             * 
                             * Log.d("log_tag","_id"+o.getInt("Name")+
                             * ", mall_name"+o.getString("ObjectID")+
                             * ", location"+o.getString("ComponentID"));
                             */
                            /*tv.setText(list.get(0).toString());
                            tv1.setText(list.get(1).toString());
                            tv2.setText(list.get(2).toString());*/

                        }

                        else 
                        {
                            Log.d("response", "null");
                        }
                    }

                //  addDataToList();
                    ArrayList fillMaps = new ArrayList();  
                            for(int i = 0; i < 10; i++){
                                 HashMap<String,Object > map1 = new HashMap<String,Object>();
                            map1.put("icon", R.drawable.ic_launcher);
                            map1.put("Course", list);
                            map1.put("Description", "");
                              fillMaps.add(map1);
                            }

                    SimpleAdapter aa = new SimpleAdapter(this, fillMaps, R.layout.row,
                            new String[] {"Course", "Description", "icon"}, 
                            new int[] {R.id.txt1, R.id.txt2, R.id.img1});
                            mainListView.setAdapter(aa);
                }
            }
            catch (Exception e) {
                e.printStackTrace();
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T10:41:40.397

你需要定制的 listView 吗？（意思是你想每行显示 2 个文本框？）

# c - 在 memcmp 中我们可以使用数组而不是指针吗

> ID：10188365
> 
> 赞同：2
> 
> 时间：2012-04-17T09:12:40.290
> 
> 标签：c

我遇到了以下代码行：

```
 memcmp(mac, (char []){0x01,0x00,0x5E}, 3) 
```

也许它会起作用；以上述方式编码 memcmp 可以吗？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T09:15:37.943

是的，它会起作用，没问题，它与以下内容相同：

```
char arr[] = {0x01,0x00,0x5E};
memcmp(mac, arr, 3); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T10:03:24.893

是的，没关系。像这样匿名声明一个数组，称为“复合文字”。这是在 C 语言中与 C99 标准一起引入的一项功能，适用于所有遵循该标准的编译器。它不适用于 Visual C++ 等非标准编译器。

但是，您应该考虑将其声明为`const char`，这样会更正确，也可能会带来更好的优化，因为`const`可能会使编译器/链接器更容易将数组放置在静态 ROM 中而不是堆栈中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T09:43:44.443

在这种情况下，数组与指针在任何方面都没有真正的区别（关键字“数组到指针衰减”）。

由于 C 允许您以这种方式定义临时数组，因此您可以使用这种表示法来测试在编译时已知在您的`mac`数组中的一堆值。

# java - SOAP (java) 中的 Hello World。如何解决？

> ID：10188366
> 
> 赞同：1
> 
> 时间：2012-04-17T09:12:50.360
> 
> 标签：java, soap

我正在尝试创建一个简单的 SOAP 服务和一个 SOAP 客户端来运行一些性能测试。我是使用 SOAP 的新手，我只是想调整一些我在几个论坛上找到的代码。考虑到这个测试将在嵌入式设备上运行，我宁愿避免使用庞大的框架/库。我宁愿在 java 中编写代码而不使用 XML。

在下面的代码中，我试图调用“sayHello”方法并获得结果。它不完整（缺少参数），但我想修复它以便为我的测试提供一个起点。

你能帮我修复这个示例代码吗？

这是服务类的代码

```
@WebService(name = "Hello", targetNamespace = "http://localhost")
public class Hello
{
    private String message = new String("Hello, ");

    public void Hello()
    {
    }

    public String sayHello(String name)
    {
        return message + name + ".";
    }

} 
```

这是服务器类的代码：

```
public class Server
{
protected Server() throws Exception
{
    System.out.println("Starting Server");
    Object implementor = new Hello();
    String address = "http://localhost:9000/";
    Endpoint.publish(address, implementor);
}

public static void main(String args[]) throws Exception
{
    new Server();
    System.out.println("Server ready...");

    Thread.sleep(5 * 60 * 1000);
    System.out.println("Server exiting");
    System.exit(0);
}
} 
```

这是客户端类的代码，旨在向调用 request() 方法的服务器发送请求：

```
public class Sender
{

.
.
.

    public void request() throws Exception
    {
        // Building the request document
        SOAPMessage reqMsg = MessageFactory.newInstance().createMessage();
        SOAPEnvelope envelope = reqMsg.getSOAPPart().getEnvelope();
        SOAPBody body = envelope.getBody();
        body.addBodyElement(envelope.createName("Hello"));

        // Connecting and calling
        SOAPConnection con = SOAPConnectionFactory.newInstance()
                .createConnection();
        SOAPMessage resMsg = con.call(reqMsg, "http://localhost:9000/");
        con.close();

        // Showing output
        System.out.println("\n\nRequest:");
        reqMsg.writeTo(System.out);
        System.out.println("\n\nResponse:");
        resMsg.writeTo(System.out);
    }

} 
```

客户端的输出如下所示：

```
Request:
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/"><SOAP-ENV:Header/><SOAP-ENV:Body><Hello/></SOAP-ENV:Body></SOAP-ENV:Envelope>

Response:
<?xml version="1.0" ?><S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/"><S:Body><S:Fault xmlns:ns3="http://www.w3.org/2003/05/soap-envelope"><faultcode>S:Client</faultcode><faultstring>Cannot find dispatch method for {}Hello</faultstring></S:Fault></S:Body></S:Envelope> 
```

谢谢！

# windows - 如何从一个游戏场景移动到另一个游戏场景？

> ID：10188370
> 
> 赞同：0
> 
> 时间：2012-04-17T09:13:12.110
> 
> 标签：windows, windows-phone-7, xna

您好，我是 XNA 的新手，现在我正在开发一款游戏。为此，我选择了 Silverlight+XNA 项目。现在我有一个带有一些图像的 GamePage.xaml 和 .cs 文件。现在我想创建第二个场景。如何添加这个新页面并导航到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T09:23:10.090

在游戏中管理多个屏幕的一个好方法是实现屏幕管理器。这实际上将充当中央事件调用者，当您希望它们变得活跃时，您可以将它们插入到其中。

App Hub 上有一个很好的例子。

[XNA 中 AppHub 上的屏幕管理示例](http://create.msdn.com/en-US/education/catalog/sample/game_state_management)

编辑：

如果您希望创建一个标准的 XAML 页面，只需右键单击您的项目并选择添加 -> 新项目...并选择“Windows Phone Portrait/Landscape Page”即可。

要导航到页面，您需要使用 NavigationService 类，如下所示：

```
NavigationService.Navigate(new Uri("NewPage.xaml", UriKind.Relative)); 
```

# wpf - 由 WPF 应用程序管理的 WCF 服务？

> ID：10188372
> 
> 赞同：0
> 
> 时间：2012-04-17T09:13:13.870
> 
> 标签：wpf, wcf, service

我是 WCF 的新手，我在理解某些事情时遇到了一些困难......

我想创建一个 Web 服务，所以我创建了一个 WCF 应用程序服务，我可以通过我的 IIS 服务器托管它，到目前为止一切顺利，对吧？

但是该服务需要一些设置，例如他必须获取数据的 SQL Server 地址。这就是我不明白我应该如何创建一个将控制服务的 WPF 应用程序的地方。

我知道如何创建一个客户端应用程序来使用该服务，但是如何创建一个将安装在服务器上的 WPF 应用程序，并在启动时检索该服务并允许我告诉他我希望他使用的参数。

如果有人能给我整个工作流程，将不胜感激^^

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T09:18:09.283

通常，Web 服务附带一个配置文件（例如应用程序的 app.config 文件）。该文件称为`web.config`. 这是您配置所有内容的地方 - 从服务行为到特定设置（如连接字符串等）。

通常您没有用于 Web 服务的配置工具 - 您编辑`web.config`文件就完成了。

**编辑**
好的，如果你真的想要这样的程序，有*办法*做到这一点。我会尝试以下方法：

该`web.config`文件包含一个称为`appSettings`应用程序设置的部分。这部分可以外包到一个单独的文件中。包含此类文件的行如下所示：

```
<appSettings file="mysettings.config"/> 
```

该文件本身将包含一个普通`appSettings`部分：

```
<appSettings>
    <add key="Info" value="myself" />
</appSettings> 
```

现在您可以拥有一个普通的应用程序来读取 XML 文件`mysettings.config`并能够写入文件的更改版本（请注意，您需要适当的权限来读取/写入文件）。

虽然您不需要在更改`web.config`文件时重新启动 IIS 或 WebService，但我不确定`mysettings.config`文件的更改 - 您可能需要在修改文件后重新启动 WebService。

另一种方法是在服务中创建函数，允许客户端获取/更改设置，并且服务本身将它们存储在某处。

# wpf - 扩展的 WPF 工具包 - 使用 RichTextBoxFormatBar

> ID：10188373
> 
> 赞同：4
> 
> 时间：2012-04-17T09:13:15.357
> 
> 标签：wpf, richtextbox

我一直在尝试使用扩展的 WPF 工具包，以便我可以使用 RichTextBoxFormatBar，但我似乎正在绕圈子。尽管在此处和其他站点上尝试了几个示例，但我仍然收到相同的错误消息：

`The attachable property 'FormatBar' was not found in type 'RichTextBoxFormatBarManager'.`

`The type 'toolkit:RichTextBoxFormatBar' was not found. Verify that you are not missing an assembly reference and that all referenced assemblies have been built.`

我是 WPF 的新手，所以我知道这是我没有接受的东西，而不是一个错误，谁能告诉我我做错了什么并拯救我的理智？

`<UserControl x:Class="TestWPF_Richtextbox.UserControl1" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:toolkit="http://schemas.xceed.com/wpf/xaml/toolkit" mc:Ignorable="d" d:DesignHeight="300" d:DesignWidth="300"> <Grid> <RichTextBox> <toolkit:RichTextBoxFormatBarManager.FormatBar> <toolkit:RichTextBoxFormatBar /> </toolkit:RichTextBoxFormatBarManager.FormatBar> </RichTextBox> </Grid> </UserControl>`

编辑：库和项目都是 .Net 4。WPFToolkit.Extended.dll 的版本是 V.1.6.0.0。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-17T14:18:41.577

我自己愚蠢的错。

当我按照[说明](https://wpftoolkit.codeplex.com/releases/view/84227)下载 DLL 时忘记解锁 DLL ，下载 ExtendedWPFToolkit_Binaries.zip 后，您应该右键单击它，选择“属性”，然后选择“解锁”。

希望这篇文章能帮助其他犯过同样错误的人。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-20T21:56:35.473

我几乎不是菜鸟——但也有同样的问题。坦率地说，我从未听说过解封 .zip 文件。像大多数人一样，我只是浏览了说明，毕竟我知道如何解压缩文件——至少我是这么认为的。

我与扩展工具包 1.9.0 斗争了两个小时，因为我的应用程序可以编译、运行和工作，但是 VS12 设计器无法渲染窗口。然后我看到了上面关于在展开之前解封拉链的帖子。心想“威士忌探戈狐步舞”是这家伙在说什么。但是我很绝望，所以我关闭了VS。删除了我的扩展文件。这次做了解封。然后扩展到相同的位置。重新启动 Visual Studio，令我惊讶的是，设计器现在呈现控件并且不会抱怨 WatermarkTextBox 不在命名空间等。

更仔细地阅读路线真的是一种令人谦卑的体验。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T21:39:38.903

同样的事情也发生在我身上，我最终发现这是因为我有 dll 或解决方案存储在网络上而不是我的本地计算机上。我将两者都移至本地计算机并开始工作。

# jsf-2 - 识别在 JSF Primefaces 的手风琴面板中单击了哪个选项卡

> ID：10188379
> 
> 赞同：1
> 
> 时间：2012-04-17T09:13:41.910
> 
> 标签：jsf-2, tabs, onclick, primefaces, accordion

有什么方法可以知道在 JSF Primefaces 的手风琴面板中单击了列表中的哪个选项卡？

我需要 bean 中的属性。例如：我有`lstofItems<Item>`手风琴面板选项卡。如果我单击一个选项卡，我需要将一个属性`Item clickedItem`设置为该值。我需要它从数据库加载该选项卡的数据。

有什么办法吗？也许使用 PropertyActionListner 或其他东西。我想到了 propertyActionListner，但不知道把它放在哪里。有什么建议吗？？？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T10:12:47.617

风景：

```
<p:accordionPanel>
    <p:ajax event="tabChange" listener="#{myBean.onTabChange}" />
    <!-- Define your tabs here -->
</p:accordionPanel> 
```

托管bean：

```
@ManagedBean
public class MyBean {

    public void onTabChange(TabChangeEvent event) {
        System.out.println(event.getTab().getId());
    }
} 
```

# wpf - WPF Prism如何在区域内有重复的视图

> ID：10188383
> 
> 赞同：6
> 
> 时间：2012-04-17T09:13:54.243
> 
> 标签：wpf, prism

我目前正在使用 Tab 控件并创建了一个区域，因此它将成为我的主机。

我想要做的是两次将相同的视图添加到一个区域..你可能会问为什么？这是因为该应用程序是一个简单的聊天应用程序 - 将有许多视图实例，但每个实例都有不同的信息。

到目前为止我的代码;;

```
 IConversationDetailsPresentationModel convDetailsView1 =
            this.Container.Resolve<IConversationDetailsPresentationModel>();

        IRegionManager manager = this.Container.Resolve<IRegionManager>();

        manager.RegisterViewWithRegion("TabRegion", () => convDetailsView1);

        IConversationDetailsPresentationModel convDetailsView2 =
            this.Container.Resolve<IConversationDetailsPresentationModel>();

        manager.RegisterViewWithRegion("TabRegion", () => convDetailsView2); 
```

我的观点是这样统一的；

```
 this.Container.RegisterType<IConversationDetailsPresentationModel,                   ConversationDetailsPresentationModel>(
            new TransientLifetimeManager());

        this.Container.RegisterType<IConversationDetailsView, ConversationDetailsView>(
            new TransientLifetimeManager()); 
```

还有，我的 XAML

```
<TabControl TabStripPlacement="Left"
            Width="Auto"
            Height="Auto"
            cal:RegionManager.RegionName="TabRegion"
            Name="TabRegion"
            SelectedItem="{Binding SelectedTab}">
    <TabControl.ContentTemplate>
        <DataTemplate>
            <ContentControl cal:RegionManager.RegionName="TabContentRegion">

            </ContentControl>
        </DataTemplate>
    </TabControl.ContentTemplate>
</TabControl> 
```

**编辑：我的实际问题是......是否可以在一个区域内有重复的视图？当我目前尝试它时，我得到一个关于它已经注册的异常。我真正需要的是绕过它或者可能创建一个允许它的区域。**

谢谢你的帮助！！

干杯。圣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T12:32:46.927

试试这个。

```
IRegion TabRegion =  manager.Regions["TabRegion"];

tabRegion.Add(convDetailsView1);
tabRegion.Add(convDetailsView2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-13T16:47:33.517

试试这个解决方案：

```
IRegion TabRegion =  manager.Regions["TabRegion"];
tabRegion.Add(convDetailsView1).AdToRegion("make your region here",convDetailsView2); 
```

# android - 无法实例化 OsmDroid MapView

> ID：10188385
> 
> 赞同：0
> 
> 时间：2012-04-17T09:14:04.277
> 
> 标签：android, eclipse, jar, android-mapview, osmdroid

我正在尝试将 OSMdroid 用于项目，但我完全无法使最简单的代码工作。好吧，几天前我能够显示地图等，现在我什至无法实例化 MapView。我将代码简化为最简单的形式。我与日食一起工作。我下载了 osmdroid-android-3.0.5.jar 和 slf4j-android-1.5.8.jar，并通过在类路径文件中添加行将它们包含在项目中

```
 <classpathentry kind="lib" path="lib/osmdroid-android-3.0.5.jar"/>
<classpathentry kind="lib" path="lib/slf4j-android-1.5.8.jar"/> 
```

或者通过右键单击它们然后构建路径->添加到构建路径（无论如何都给出了相同的结果）

然后我输入了这段代码：

```
import android.app.Activity;
import org.osmdroid.tileprovider.tilesource.TileSourceFactory;
import org.osmdroid.util.GeoPoint;
import org.osmdroid.views.MapController;
import org.osmdroid.views.MapView;

import android.os.Bundle;

public class TestMapActivity extends Activity {
/** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        MapView mv=new MapView(this,256);

    }
} 
```

在模拟器上运行它时出现错误：

```
04-17 09:10:31.181: E/AndroidRuntime(595): FATAL EXCEPTION: main
04-17 09:10:31.181: E/AndroidRuntime(595): java.lang.NoClassDefFoundError:           org.osmdroid.views.MapView
04-17 09:10:31.181: E/AndroidRuntime(595):  at     testmap.sagem.TestMapActivity.onCreate(TestMapActivity.java:17)
04-17 09:10:31.181: E/AndroidRuntime(595):  at android.app.Activity.performCreate(Activity.java:4465)
04-17 09:10:31.181: E/AndroidRuntime(595):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
04-17 09:10:31.181: E/AndroidRuntime(595):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
04-17 09:10:31.181: E/AndroidRuntime(595):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
04-17 09:10:31.181: E/AndroidRuntime(595):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
04-17 09:10:31.181: E/AndroidRuntime(595):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
04-17 09:10:31.181: E/AndroidRuntime(595):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-17 09:10:31.181: E/AndroidRuntime(595):  at android.os.Looper.loop(Looper.java:137)
04-17 09:10:31.181: E/AndroidRuntime(595):  at android.app.ActivityThread.main(ActivityThread.java:4424)
04-17 09:10:31.181: E/AndroidRuntime(595):  at java.lang.reflect.Method.invokeNative(Native Method)
04-17 09:10:31.181: E/AndroidRuntime(595):  at java.lang.reflect.Method.invoke(Method.java:511)
04-17 09:10:31.181: E/AndroidRuntime(595):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-17 09:10:31.181: E/AndroidRuntime(595):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-17 09:10:31.181: E/AndroidRuntime(595):  at dalvik.system.NativeStart.main(Native Method) 
```

当我注释掉“MapView mv=new MapView(this,256);” 它有效，所以我不明白为什么不能实例化地图视图。

对此有任何想法吗？

感谢您的关注。

编辑：AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="testmap.sagem"
android:versionCode="1"
android:versionName="1.0" >
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-sdk android:minSdkVersion="15" />
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".TestMapActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>
</manifest> 
```

main.xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T10:40:45.023

将文件夹名称“lib”更改为“libs”，并将所有 jar 文件放入该文件夹，并将 jar 文件的充电路径放入“libs”文件夹。我不确定，但我认为它会起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T09:23:39.033

尝试使用 3.0.7 并清理项目。让我知道。 [http://code.google.com/p/osmdroid/downloads/list](http://code.google.com/p/osmdroid/downloads/list)

# iphone - 如何在 UIKit 中实现类的深拷贝？

> ID：10188387
> 
> 赞同：2
> 
> 时间：2012-04-17T09:14:15.110
> 
> 标签：iphone, objective-c, ios, deep-copy

我有一个对象 imageView1。我想创建另一个对象来保留 imageView1 的深层副本。像这样，

```
UIImageView *imageView1 = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"background.png"]];
UIImageView *imageView2 = [imageView1 copy]; 
```

我知道它不起作用，因为 UIImageView 不符合 NSCopying。但是我该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T10:43:04.873

要创建 UIImageView 对象的深层副本，您需要使用 NSKeyedArchiver 将其归档，然后使用 NSKeyedUnarchiver 将其取消归档，但这种方法存在问题，因为 UIImage 不符合 NSCoding 协议。您首先需要做的是扩展 UIImage 类以支持 NSCoding。

添加一个名称为`NSCoding`on的新类别`UIImage`并放置以下代码：

**UIImage+NSCoder.h**

```
#import <UIKit/UIKit.h>

@interface UIImage (NSCoding)
- (id)initWithCoder:(NSCoder *)decoder;
- (void)encodeWithCoder:(NSCoder *)encoder;
@end 
```

**UIImage+NSCoder.m**

```
#import "UIImage+NSCoder.h"

@implementation UIImage (NSCoding)
- (id)initWithCoder:(NSCoder *)decoder {
    NSData *pngData = [decoder decodeObjectForKey:@"PNGRepresentation"];
    [self autorelease];
    self = [[UIImage alloc] initWithData:pngData];
    return self;
}
- (void)encodeWithCoder:(NSCoder *)encoder {
    [encoder encodeObject:UIImagePNGRepresentation(self) forKey:@"PNGRepresentation"];
}

@end 
```

然后在 UIImageView 和以下代码中添加一个名称`DeepCopy`为（例如）的新类别：

**UIImageView+DeepCopy.h**

```
#import <UIKit/UIKit.h>

@interface UIImageView (DeepCopy)
-(UIImageView *)deepCopy;
@end 
```

**UIImageView+DeepCopy.m**

```
#import "UIImageView+DeepCopy.h"
#import "UIImage+NSCoder.h"

@implementation UIImageView (DeepCopy)

-(UIImageView *)deepCopy
{
    NSMutableData *data = [[NSMutableData alloc] init];
    NSKeyedArchiver *archiver = [[NSKeyedArchiver alloc] initForWritingWithMutableData:data];
    [archiver encodeObject:self forKey:@"imageViewDeepCopy"];
    [archiver finishEncoding];
    [archiver release];

    NSKeyedUnarchiver *unarchiver = [[NSKeyedUnarchiver alloc] initForReadingWithData:data];
    UIImageView *imgView = [unarchiver decodeObjectForKey:@"imageViewDeepCopy"];
    [unarchiver release];
    [data release];

    return imgView;
}

@end 
```

用法：导入你的 UIImageView+DeepCopy.h

```
UIImageView *imgView1 = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"picture.jpg"]];
UIImageView *imageView2 = [imgView1 deepCopy]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-17T10:45:54.543

**浅复制**
复制对象的一种方法是浅复制。在此过程中，B 与 A 连接到同一内存块。这也称为地址复制。这会导致 A 和 B 之间共享相同的数据，因此修改一个将改变另一个。现在不再从任何地方引用 B 的原始内存块。如果该语言没有自动垃圾回收，则 B 的原始内存块可能已泄漏。浅拷贝的优点是它们的执行速度快，并且不依赖于数据的大小。不是由整体块组成的对象的按位副本是浅副本。

**深拷贝**
另一种方法是深拷贝。这里的数据实际上是复制过来的。结果与浅拷贝给出的结果不同。优点是 A 和 B 不相互依赖，但代价是更慢更昂贵的副本。

![在此处输入图像描述](../Images/cc0e6baba97fbe21a2b9d7c098035521.png)
因此，以下代码段将适用于您进行深度复制。

```
UIImageView *imageView1 = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"background.png"]];
UIImageView *imageView2 = [[UIImageView alloc] initWithImage:imageView1.image]; 
```

# python - 与正在运行的进程通信

> ID：10188389
> 
> 赞同：4
> 
> 时间：2012-04-17T09:14:19.677
> 
> 标签：python, ipc

我们有：

*   基于 Python 的服务器 (A)
*   一个正在运行的命令行应用程序（在同一台 Linux 机器上），它能够读取`stdin`、计算某些内容并将输出提供给`stdout`(B)

如何将输入从（A）发送到`stdin`（B），并等待（B）的答案，即阅读它的最佳（最优雅）方式是`stdout`什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T09:24:19.077

如果您使用`subprocess`标准库中的 Python 模块生成 (B)，则可以将 (B) 设置为 (A) 可读`stdin`和`stdout`可写的字节缓冲区。

```
b = Popen(["b.exe"], stdin=PIPE, stdout=PIPE)
b.stdin.write("OHAI\n")
print(b.stdout.readline()) 
```

对于您给定的示例，它最容易使用`communicate`，因为它可以避免您的死锁：

```
b = Popen(["b.exe"], stdin=PIPE, stdout=PIPE)
b_out = b.communicate("OHAI\n")[0]
print(b_out) 
```

[http://docs.python.org/release/3.1.3/library/subprocess.html](http://docs.python.org/release/3.1.3/library/subprocess.html)

[http://docs.python.org/release/3.1.3/library/subprocess.html#subprocess.Popen.communicate](http://docs.python.org/release/3.1.3/library/subprocess.html#subprocess.Popen.communicate)

如果有很多双向通信，则应注意避免由于缓冲区已满而导致的死锁。如果您的沟通模式出现此类问题，您应该考虑改用`socket`沟通。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T09:44:35.307

正如@Deestan 指出的那样，子流程模块是一个优雅且经过验证的流程。当我们必须从 python 运行命令时，我们经常使用子进程。

我们的主要涉及运行命令，主要是内部构建，并捕获其输出。我们运行这些命令的包装器看起来是这样的。

```
import subprocess
def _run_command( _args, input=[],withShell=False):
    """
    Pass args as array, like ['echo', 'hello']
    Waits for completion and returns
    tuple (returncode, stdout, stderr)
    """
    p = subprocess.Popen(_args, shell = withShell,
                         stdin=subprocess.PIPE, stdout=subprocess.PIPE)
    [p.stdin.write(v) for v in input]
    stdout, stderr = p.communicate()
    return p.returncode, stdout, stderr

_,op,er = _run_command(['cat'],["this","is","for","testing"])
value="".join(op)
print value

_,op,er = _run_command(['ls',"/tmp"])
value="".join(op)
print value 
```

如果您对**B**的输入很少，则 subprocess 是**yes**。

# yii - Yii renderpartial (proccessoutput = true) 避免重复的 js 请求

> ID：10188391
> 
> 赞同：10
> 
> 时间：2012-04-17T09:14:27.030
> 
> 标签：yii, renderpartial, clientscript

我正在创建一个使用 ajaxRequest 的站点，当我单击一个链接时，它将使用 ajaxRequest 加载。当我加载例如 user/login **UserController actionLogin**时，我**会使用 processOUTput 为 true 渲染视图，**因此将生成该视图中所需的 js，但是如果我在该视图中有 clientScriptRegister 和事件，我该如何避免生成 scriptRegistered 两次还是多个取决于 ajaxRequest？我试图`Yii::app()->clientScript->isSCriptRegistered('scriptId')`检查脚本是否已经注册，但似乎如果你使用 ajaxRequest，**结果总是错误**的，因为它只有在渲染完成后才会为真。

控制器代码

```
if (Yii::app()->request->isAjaxRequest)
{
   $this->renderPartial('view',array('model'=>$model),false,true);
} 
```

查看代码

```
if (!Yii::app()->clientScript->isScriptregistered("view-script"))
   Yii::app()->clientScript->registerScript("view-script","
      $('.link').live('click',function(){
         alert('test');
     })
"); 
```

如果我第一次请求控制器，它可以正常工作（警报 1 次）但是如果我再次请求同一个控制器而不刷新我的页面并且只使用 ajaxRequest，如果单击它，警报将输出两次（因为它保持在生成时，即使您已经注册过一次）

如果您在具有 jquery 功能的视图内有**CActiveForm** ，这也是一样的。每次您 renderPartial 时都会调用 corescript yiiactiveform。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-17T09:23:43.423

## 避免两次包含核心脚本

如果您的脚本已经通过较早的请求包含在内，请使用它来避免再次包含它们：

```
// For jQuery core, Yii switches between the human-readable and minified
// versions based on DEBUG status; so make sure to catch both of them
Yii::app()->clientScript->scriptMap['jquery.js'] = false;
Yii::app()->clientScript->scriptMap['jquery.min.js'] = false; 
```

如果您有既要独立呈现又作为 HTML 片段包含在 AJAX 中的视图，您可以将其包装在内部`if (Yii::app()->request->isAjaxRequest)`以覆盖所有基础。

## 避免两次包含 jQuery 脚本（JS 解决方案）

还有可能防止脚本在客户端被包含两次。这不是直接支持的，而且稍微麻烦一些，但实际上它可以正常工作，并且不需要您在服务器端知道客户端发生了什么（即已经包含了哪些脚本）。

`<script>`这个想法是从服务器获取 HTML，然后用正则表达式替换简单地去除标签。重要的一点是您可以检测是否已经加载了 jQuery 核心脚本和插件（因为它们`$`在其上创建或属性）并有条件地执行此操作：

```
function stripExistingScripts(html) {
    var map = {
        "jquery.js": "$",
        "jquery.min.js": "$",
        "jquery-ui.min.js": "$.ui",
        "jquery.yiiactiveform.js": "$.fn.yiiactiveform",
        "jquery.yiigridview.js": "$.fn.yiiGridView",
        "jquery.ba-bbq.js": "$.bbq"
    };

    for (var scriptName in map) {
        var target = map[scriptName];
        if (isDefined(target)) {
            var regexp = new RegExp('<script.*src=".*' +
                                    scriptName.replace('.', '\\.') +
                                    '".*</script>', 'i');
            html = html.replace(regexp, '');
        }
    }

    return html;
} 
```

如果已包含相应的脚本，则将定义文件名和对象的映射；通过此函数传递传入的 HTML，它将检查并删除`<script>`与先前加载的脚本相对应的标签。

辅助函数`isDefined`是这样的：

```
function isDefined(path) {
    var target = window;
    var parts = path.split('.');

    while(parts.length) {
        var branch = parts.shift();
        if (typeof target[branch] === 'undefined') {
            return false;
        }

        target = target[branch];
    }

    return true;
} 
```

## 避免两次附加事件处理程序

您可以简单地使用 Javascript 对象来记住您是否已经附加了处理程序；如果是，请不要再次附加它。例如（查看代码）：

```
Yii::app()->clientScript->registerScript("view-script","
  window.myCustomState = window.myCustomState || {}; // initialize if not exists
  if (!window.myCustomState.liveClickHandlerAttached) {
    window.myCustomState.liveClickHandlerAttached = true;
    $('.link').live('click',function(){
       alert('test');
    })
  }
"); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-06-11T20:10:06.563

最干净的方法是重写 beforeAction()，以避免任何重复的核心脚本：

```
class Controller extends CController {

  protected function beforeAction($action) {
        if( Yii::app()->request->isAjaxRequest ) {
            Yii::app()->clientScript->scriptMap['jquery.js'] = false;
            Yii::app()->clientScript->scriptMap['jquery-2.0.0.js'] = false;
            Yii::app()->clientScript->scriptMap['anything.js'] = false;
        }

        return parent::beforeAction($action);
  }

} 
```

请注意，您必须输入准确的 js 文件名，不包括路径。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-31T09:22:19.993

为了避免两次包含脚本文件，试试这个扩展：[http ://www.yiiframework.com/extension/nlsclientscript/](http://www.yiiframework.com/extension/nlsclientscript/)

为避免两次附加事件处理程序，请参阅 Jons 回答：[https ://stackoverflow.com/a/10188538/729324](https://stackoverflow.com/a/10188538/729324)

# android - Android 中的文本选择监听器（API 级别 7）

> ID：10188392
> 
> 赞同：0
> 
> 时间：2012-04-17T09:14:28.337
> 
> 标签：android, text, selection

我需要一个监听器，每次 EditText 中的选择发生变化时都会调用它。我四处搜索，但找不到任何对 API 级别 7 有用的东西。我正在编写一个文本编辑器，我希望每次用户选择粗体/斜体/下划线文本时都会选中粗体/斜体/下划线按钮。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-11T10:11:28.053

很老的问题，但有人可能仍然需要这个，所以这是我的解决方案：由于文本选择是通过长按文本完成的，我只是使用了以下内容：

```
editText.setOnLongClickListener(new View.OnLongClickListener() {

@Override
public boolean onLongClick(View view) {
        // do whatever you need to do on text selection
    }
}); 
```

这允许对文本选择进行自定义行为，并且不会阻止用户复制/粘贴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T11:57:23.667

更好的方法是扩展 EditText，然后根据您希望如何管理不断变化的文本，您可以覆盖这两种方法之一来制定您的自定义行为。

1.  如果您希望更改选择，那么您可以使用该`onSelectionChanged()`方法并在那里实现您的代码。

2.  如果您想在编辑器中的文本更改时实现某些东西，那么您可以使用`onTextChanged()`.

# python - Django 不在 Internet Explorer 中存储会话 cookie

> ID：10188393
> 
> 赞同：1
> 
> 时间：2012-04-17T09:14:32.530
> 
> 标签：python, django, internet-explorer, web

提供更多背景信息：我们有一个在 domain.com/fb/ 下提供服务的 fb 应用程序，
我们有在 domain.com
下提供服务的普通站点

我们的 fb 应用在 iframe 中为 domain.com/fb/ 提供服务，并可通过以下方式访问：
apps.facebook.com/ourappname/

我目前只有 IE 存在问题，这导致 request.user 成为匿名用户，即使用户已登录（仅在 IE 中），在所有其他浏览器中一切正常。request.user 是匿名的原因是没有设置会话 cookie。我通过检查 IE 中的 cookie 验证了这一点，django-debug-toolbar 也向我展示了这一点。

那么我该如何解决这个问题呢？

P3P 标头设置为：

```
response['P3P'] = 'CP="IDC CURa ADMa OUR IND PHY ONL COM STA"'
return response 
```

它们也是由 apache 本身添加的，所以有点双重只是想确保它有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T12:22:48.863

这是已知的 IE 与 iframe 网站的安全行为。这可能会有所帮助： [Cookie 被阻止/未保存在 Internet Explorer 的 IFRAME 中](https://stackoverflow.com/questions/389456/cookie-blocked-not-saved-in-iframe-in-internet-explorer)

# jquery - 如何让 div 来到屏幕 jquery 的顶部？

> ID：10188394
> 
> 赞同：0
> 
> 时间：2012-04-17T09:14:33.157
> 
> 标签：jquery

我有一个包含几个 div 的页面。

当用户单击某个 div 的按钮时，该 div 位于页面下方的中间位置，因此 div 的顶部更像是页面的顶部。

我如何使用 jquery 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T09:22:33.177

尝试这个

```
$("#button").click(function() {
     $('html, body').animate({
         scrollTop: $("#elementtoScrollToID").offset().top
     }, 2000);
 }); 
```

另请参阅[jQuery 滚动到元素](https://stackoverflow.com/questions/6677035/jquery-scroll-to-element)

# c++ - 在 Visual Studio 2010 中编译单个 C++ 文件

> ID：10188396
> 
> 赞同：2
> 
> 时间：2012-04-17T09:14:39.940
> 
> 标签：c++, visual-studio, compilation

我想使用 Visual Studio 2010 在 c++ 中编译单个文件。我创建了一个新文件，而不是项目，并编写了一些“hello world”代码，我想编译并运行它。怎么做？我在这里和谷歌搜索过，我得到了 F7 或 F5 之类的东西，没有任何效果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T09:26:31.900

您可以按照MSDN 中的[本指南](http://msdn.microsoft.com/en-us/library/ms235639%28v=vs.100%29.aspx)在没有 IDE 的情况下编译独立的 C++ 文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T22:51:08.823

在 Visual Studio 6.0 中，您可以使用 main() 加载单个 CPP 文件并对其进行编译。不记得这是否在 Visual Studio 2008 或 2010 中被删除，但它已经消失了。

过去很容易启动一个新实例，粘贴一些测试代码然后运行它。正如上面其他人所指出的，现在需要创建或使用一个虚拟项目。

不难，只是不如以前方便。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T09:23:34.683

[可能是为了简单的测试，在记事本或Metapad](http://liquidninja.com/metapad/)等编辑器中编辑源文件，并使用以下命令从命令行构建：

**cl /EHsc /W4 /nologo YourSource.cpp**

会很好（比启动 VS2010 IDE、创建新项目等更快）

# visual-c++ - Visual C++ - 看不到哪个外部缺失

> ID：10188398
> 
> 赞同：7
> 
> 时间：2012-04-17T09:14:52.827
> 
> 标签：visual-c++, mfc, linker

我尝试在发布模式下在 Visuas C++ 10 中构建我的多项目应用程序。
我收到下一个链接错误：
2> 所有输出都是最新的。 **2>PidAppLib.lib(ThreadWin32.obj) : error LNK2011: precompiled object not linked in; 图像可能无法运行
2>C:\infinite_memories_svn\projects\sw\NewPidTools\PidWriter\Release\PidLabler.exe : 致命错误 LNK1120: 1 unresolved externals
2>
2>Build FAILED。**

我怎么知道哪个对象未解决？
ThreadWin32.obj 是从 Internet 下载的外部库。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T08:03:36.170

好的。
我已经解决了这个问题。
我有 2 个库，比如说 a.lib 和 b.lib，以及项目，calib 使用 b.lib，所以在 a.lib 的库管理依赖项中我添加了 b.lib，c 使用 a.lib，所以我将它添加到依赖项中。
它在调试中工作，但在发布时我还应该将 b.lib 添加到 c 的依赖项中。奇怪但它解决了问题

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-08-20T13:29:35.147

我在重构的一个大型项目中遇到了这个错误。在重构过程中，我偶尔会编译单个源文件来检查我所做的更改，而无需构建整个项目。根据您的项目配置，这可能会导致 .obj 文件在与您构建项目时通常输出的目录不同的目录中输出。在我的情况下，手动编译的源文件的 .obj 文件在源代码目录而不是中间构建目录中输出。

这样做的一个副作用似乎是，在构建整个项目时，即使其他地方的其他更改意味着它们应该被重新编译（例如需要重新编译预编译头文件的更改），手动编译的源文件也可能不会被重新编译。

我的解决方案是手动删除通过手动编译单个源文件生成的所有 .obj 文件。根据项目配置，对项目执行 Clean 也可能有效。

# date - MongoDB的日期限制查询

> ID：10188400
> 
> 赞同：0
> 
> 时间：2012-04-17T09:14:56.920
> 
> 标签：date, mongodb, talend

我正在寻找从特定日期从 MongoDB 中提取的内容。由于我在 Talend 中使用了一个发送查询的组件，因此我有点受限，因为我不能使用多行代码。

您可以直接在查找方法中进行日期限制吗？

```
db.example.find({ ts: { $gt: lowdate} }); 
```

我希望你们中的任何人都可以弄清楚低日期的地方。

非常感谢！

PS。如果重要的话，mongodb 中的日期格式是“Dec 16, 2011 7:37:06 PM”。

--- 更新 --- 从我的 MongoDB：

，“ty”：“auth”，“ts”：“2011 年 12 月 16 日下午 3:28:01”，

这表明时间戳（ts）的格式是一个字符串。正确的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T09:30:32.427

如果日期以该格式存储为字符串，您将无法进行查询。为了解决这个问题，我建议你用你最喜欢的语言编写一个脚本，扫描所有文档并将这个日期字符串转换为时间戳。您可以覆盖“ts”字段，也可以创建一个新字段，例如“ts_int”。

例如，在 PHP 中你会这样做：

```
<?php
$m = new Mongo();
$c = $m->mydbname->example;

foreach ( $c->find() as $item )
{
    $item['ts_int'] = strtotime( $item['ts'] );
    $c->update( $item );
}
?> 
```

# php - 为什么做一个简单的|| 像 if 序列一样工作？

> ID：10188402
> 
> 赞同：-2
> 
> 时间：2012-04-17T09:15:00.353
> 
> 标签：php, if-statement

在我的上一个项目中，我必须指定一个值，通常我使用以下语句：

```
<?php 
  $true = 1;
  $false = 0;
  $hasAccess = $true ? 1 : 0;
  print $hasAccess;
?> 
```

但这适用于：

```
<?php 
  $true = 1;
  $false = 0;
  $hasAccess = $true || $false;
  print $hasAccess;
?> 
```

为什么？

***更新：***我知道什么是 OR / || 是，以及我对它的期望。但我以前从未见过这种可能性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T09:17:33.197

因为

```
$true ? 1 : 0; 
```

计算结果为`1`，因为`$true`为真，并且

```
$true || $false; 
```

也评估为`1`，出于同样的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T09:18:21.263

因为 0 会自动转换为 (bool)false，而其他任何值 (bool)true。所以你基本上说的是：

`$hasaccess = true OR false;`

另见： http: [//php.net/manual/en/language.types.boolean.php](http://php.net/manual/en/language.types.boolean.php) http://php.net/manual/en/language.operators.logical.php

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T09:25:11.133

一个 || 这是一个 OR 语句返回天气，其中一个语句的计算结果为真。例子：

```
$bool = true || false;
// $bool = true

$bool = false || true;
// $bool = true

$bool = false || false;
// $bool = false

$bool = false || true || false;
// $bool = true

$bool = false || 1;
// $bool = true

$bool = false || 'test';
// $bool = true 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T09:20:56.080

如果表达式的任一侧为真，OR 将返回真。

由于 $true = 1 那么整个表达式为真。

基本上你是在说“如果 $true 是真的，或者 $false 是真的那么 $hasAccess 是真的”

# android - ormlite 支持继承吗？

> ID：10188414
> 
> 赞同：15
> 
> 时间：2012-04-17T09:15:43.503
> 
> 标签：android, inheritance, ormlite

ormlite 是否支持这三种继承策略？

*   每个类层次结构表
*   每个子类的表
*   每个具体类的表

我[在 ORMLite user group 上找到了这个讨论](http://groups.google.com/group/ormlite-dev/browse_thread/thread/53e2c4c4b401030b)，但我不确定它是否能回答我的问题。

特别是我想使用“每个类层次结构表”。如果 ormlite 框架不支持它们，我将创建一个类并忘记继承，但我更喜欢使用继承。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-17T13:57:47.280

[ORMLite](http://ormlite.com/)不自动支持这些，不。我不确定您是否真的阅读了您链接到的线程，因为它非常具体：

> > 我需要的是：如果我将 A 类作为超类，并且我有直接的子类 B 和 C，并且我对 A 类的所有记录/对象运行查询，我确实希望拥有 A、B 和C回来了。
> 
> 是的，ORMLite 不这样做，目前我没有计划支持它。除非我在如何实现这一点上弄错了，否则它的复杂性超出了我所说的“精简版”。Hibernate 支持这种结构的方式是使用外键、多个表和魔术连接。

这个问题给出了一些关于如何使用 ORMLite 来实现继承的想法：

> 1）你可以有A类和一个关联的表——所以它不能是抽象的。然后你可以有 B 和 C 哪个子类 A 并将所有 As 字段分别放在一个单独的表中。然后，您可以为 A 创建一个特殊的 DAO，它还将查询 B 和 C，并将它们添加到 A 的结果中。
> 
> 2）另一种方法是你可以让B类和C类*不是*子类，而是对A有一个外来对象。然后你可以查询所有的As，其中一些是B的A部分和一些C的A部分和有些只是 A。然后您还可以查询 Bs 和 Cs，并使用 A DAO 刷新并获取您无法转换的 A 字段。A 也可以有某种枚举，它表示它是 A、B 还是 C。你也可以做一些魔术，你可以说 getSubClassObject()，如果会查看枚举并查询 B 或 C dao关联对象与 A 对象的正确外键。

# html - 发送请求和接收响应的工具

> ID：10188417
> 
> 赞同：0
> 
> 时间：2012-04-17T09:15:54.327
> 
> 标签：html, browser, http-request

我正在尝试检查一些在 IE 中未正确显示的 html。当我在 IE 和 FF 中查看 html 时，它们都略有不同，这可能是导致问题的原因。

我想获取从服务器返回的 html，因此不想使用浏览器发送请求。谁能告诉我任何这样的工具？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T09:26:39.310

如果您使用的是 linux 或 unix 系统，则可以使用它`curl`来执行此操作。

发送 GET 请求：

```
curl "<< request-url >>" 
```

发送 POST 请求：

```
curl --data "<< post-parameter >>" "<< request-url >>" 
```

您可以使用 -X 选项来定义要发送的 HTTP 方法。

或者您使用的是 Windows，您可以使用网络工具发送 GET/POST 请求，例如

[http://hurl.it/](http://hurl.it/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T09:19:37.363

`curl`会成功的。`curl http://www.google.com`， 例如。

# ajax - 在 Wordpress 页面之外使用插件

> ID：10188419
> 
> 赞同：0
> 
> 时间：2012-04-17T09:16:06.617
> 
> 标签：ajax, wordpress, plugins, lightbox

我正在尝试为 Wordpress 使用 lightbox plus 插件，该插件适用于我的大多数网站。

我有一个 php 页面，jQuery AJAX 函数使用它来检索数据，以便在 wordpress 中对大型结果集进行分页。此页面不是 wordpress 的一部分。

我已经设法让 Wordpress 函数在这个 php 页面中正常工作，方法是使用：

```
 define('WP_USE_THEMES', false);
require('/home/love/public_html/dev/wp-blog-header.php');
require('/home/love/public_html/dev/wp-load.php'); 
```

然而，在这个页面中是一个包含，并且在包含的文件中是一个指向外部工作表的链接，该工作表旨在与一个 lightbox 一起引入：

```
<a class="" rel="lightbox" href="<?php bloginfo('url'); ?>/more-product-info?a=<?php echo $post->ID ?>">
  <div id="moreprodinfo">More Info</div>
  </a> 
```

这种在灯箱中检索信息的方法在我网站的大多数部分都可以正常工作，但它只是不适用于使用 AJAX 检索灯箱页面链接的部分。

我认为这与页面不是 Wordpress 的一部分时插件无法正常工作有关，但是所有 Wordpress 功能都在工作，那么为什么不使用插件呢？我的 cufon 插件也不能在这个 ajax 检索页面上工作。

是不是因为我使用 .html javascript 函数来显示 AJAX 检索到的内容：

```
if(pageType == 'prizeHome'){
 loading_hide();
 $("#tab-prize-home #container").html(msg); 
```

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T09:51:18.180

使用 ajax 加载 html 内容时，这似乎是一个常见问题：

当文档准备好时，您可能会调用 lightbox 和 cufon，这仅在您的 ajax 调用**之前**发生一次。ajax 调用**后，**您必须再次调用 lightbox 和 cufon 。

# jquery - TinyMCE/CKeditor 在初始化时冻结容器 div 的滚动

> ID：10188421
> 
> 赞同：4
> 
> 时间：2012-04-17T09:16:08.393
> 
> 标签：jquery, user-interface, tabs, tinymce, ckeditor

我有 TinyMCE 在包含 jQuery UI 选项卡面板的彩盒模式窗口中初始化通过 AJAX 回调加载的文本区域。正在加载文本区域的面板是可滚动的（overflow-y:auto）。但是，似乎当我在这些新文本区域上初始化 TinyMCE 时，它会向下滚动到列表中较低的文本区域之一，并正确初始化它们，但是您不能再在 Chrome 中滚动容器面板的 div。您仍然可以在 Firefox 和 IE 中滚动面板的 div，但不能在 Chrome 中滚动。

我的 AJAX 调用：

```
function getStuff(id){
        $.ajax({
            type: 'POST',
            url: '/ajax/get_stuff',
            data: {id: id},
            beforeSend:function(){  
                $('#panel').html('Loading...');                                 
            },
            success:function(resp){             
                $('#panel').html(resp); 
                ckInit();
            },
            error:function(){}
        }); 
    } 
```

和初始化函数：

```
function ckInit(){
    var config = {              
             extraPlugins : 'autogrow',
             autoGrow_onStartup : true ,
             removePlugins : 'resize'               
        };
    $("textarea.ck").each(function() {              
        if (typeof(CKEDITOR.instances[this.id]) == 'undefined') {           
            CKEDITOR.replace(this.id, config);
        } else {
            CKEDITOR.instances[this.id].destroy(true);
            CKEDITOR.replace(this.id, config);
        }           
    });
} 
```

如果任何其他信息会有所帮助，请告诉我。而且，提前谢谢！

**更新** 我感觉 Colorbox 与它有关，所以我尝试在主窗口中加载实例，以获得相同的确切结果。容器 div 向下滚动任意量，滚动条冻结。尝试上下移动它不会滚动。

我尝试用 CKeditor 替换 TinyMCE，但奇怪的是，同样的问题。这让我觉得我在初始化它们是错误的，或者什么......

有任何想法吗？

**更新 4/28** 似乎如果我单独初始化文本区域，滚动条不会冻结。但是，当我根据类选择器初始化 textareas 时，如上例所示，它确实如此。

另一个奇怪的行为：如果我来回单击以选择一个编辑器，然后选择另一个，如果我这样做几次，它会解锁滚动条。不知何故，切换当前编辑器几次的行为释放了它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T17:24:16.507

我也遇到了同样的问题，请问你们有没有找到解决方法？

编辑：所以看来它肯定是导致问题的 URL 中的哈希。我对以下解决方案不满意，但它确实有效......

```
$('body').on('click', 'a', function(e){
  if( $(this).attr('href') === '#' ) e.preventDefault(); 
}); 
```

希望对某人有所帮助，但如果有人想出更好的解决方案，请告诉我。

我发现以下文章可能会有所帮助：

[http://cksource.com/forums/viewtopic.php?t=25351](http://cksource.com/forums/viewtopic.php?t=25351)

[https://github.com/cleditor/cleditor/issues/10](https://github.com/cleditor/cleditor/issues/10)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T17:32:42.110

我在 jQuery 模式中加载编辑器时也遇到了这个问题。事实证明，锚点/哈希存在问题。如果显示模式时在 url 中，Chrome 会阻塞。如果您可以在显示模态之前将其删除，它将起作用。

这是在 TinyMCE 的 3.5b2 版上。

# sql - 检查字段的最后 X 个字符是否为数字

> ID：10188422
> 
> 赞同：-1
> 
> 时间：2012-04-17T09:16:22.593
> 
> 标签：sql, sql-server-2008, tsql

实际上有2个问题，2个疑问：

*   我需要找出一个以 long 开头的数字`'541'`事实上`18 chars`在 SO 之后有一个空格：`Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when....'541'....15RandomNumbers in (0,1,2,3,4,5,6,7,8,9).....an unknown printer took a galley of type and scrambled it to make a type specimen book.`
*   第二：检查字符串的最后 18 个字符是否为数字（可能在修剪后）

而已，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T09:50:06.367

“找出以 '541' 开头的数字是 18 个字符长”

```
( text_col NOT LIKE '541%' OR LEN(text_col) = 18 ) 
```

“检查字符串的最后 18 个字符是否为数字（可能在修剪后）”

```
 ( RTRIM(text_col) LIKE '%[0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9]' ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T09:47:17.043

一些数据让你开始

```
declare @tmp table (value nvarchar(30))
insert @tmp values ('ABC123456789123456789'),('ABC12345678912345678A'),('ABC123456789123456D78') 
```

看`RIGHT`和`ISNUMERIC`

```
SELECT t.value, ISNUMERIC(RIGHT(t.value,18)+'.0e0') as [IsNumeric]
FROM @tmp t 
```

给出：

```
value                          IsNumeric
------------------------------ -----------
ABC123456789123456789          1
ABC12345678912345678A          0
ABC123456789123456D78          0 
```

***编辑：***我已经根据反馈修改了我的答案，`Damien_The_Unbeliever`并解决了他提出的问题

# c++ - 可在调试器中浏览的自定义容器

> ID：10188434
> 
> 赞同：3
> 
> 时间：2012-04-17T09:16:44.167
> 
> 标签：c++, visual-studio, visual-studio-2010, debugging

数组和 std::vectors（以及所有标准容器）在 Visual Studio 调试器中是可浏览的（您可以将鼠标指针悬停在它们上面并检查它们的内容）。

有没有办法准备一个自定义容器类，允许以与 std::vector 相同的方式浏览其内部数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T10:24:41.763

尝试查看文件`%VSINSTALLDIR%\Common7\Packages\Debugger\autoexp.dat`。对不同数据类型的扩展规则有可定制的描述。

从这个文件：

> 调试时，Watch 和 Variable 窗口中的 Data Tips 和项目会自动展开以显示它们最重要的元素。扩展遵循此文件中的规则给出的格式。您可以为您的类型添加规则或更改预定义的规则。

[类似的问题](https://stackoverflow.com/questions/7420842/visual-c-debugger-visualizer)

# android - Phonegap：Android 上的文件传输失败

> ID：10188440
> 
> 赞同：4
> 
> 时间：2012-04-17T09:17:19.117
> 
> 标签：android, cordova, upload

我尝试使用 Filetransfer.upload 将文件从我的 android 手机上传到 000webhost。它返回错误代码 1。错误代码 1 是什么意思？任何帮助表示赞赏。谢谢你。

```
function uploadPhoto(imageURI) {

            var options = new FileUploadOptions();
            options.fileKey="file";
            options.fileName=imageURI.substr(imageURI.lastIndexOf('/')+1);
            options.mimeType="image/jpeg";

            var params = new Object();
            params.value1 = "test";
            params.value2 = "param";

            options.params = params;
            options.chunkedMode = false;

            var ft = new FileTransfer();
            ft.upload(imageURI, "http://tom.host88.com/upload1.php", win, fail, options,true);

        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T09:33:53.023

您将在 phonegap-xxx.js 中找到 FileTransferError 对象和错误代码。错误代码 1 是 FILE_NOT_FOUND_ERR。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-25T09:31:52.700

经过一番困惑（我在 phonegap 文档中看到了一些不足）我得到了它的工作，请参阅我的完整代码：

[android phonegap 相机和图像上传](https://stackoverflow.com/questions/14447336/android-phonegap-camera-and-image-uploading)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T09:16:52.123

将文件上传到 asmx 服务时，我遇到了同样的问题，或者说是错误。Cordova 告诉我，我有一个 Http 500 错误代码：1（以及来自 java 的令人困惑的 FileNotFoundException）。我发现我的 asmx 服务没有正确启用 POST，这导致了错误。在 web.config 中试试这个配置：

```
<system.web>
    <webServices>
      <protocols>
        <add name="HttpGet"/>
        <add name="HttpPost"/>
      </protocols>
    </webServices>
  </system.web> 
```

# ninject - Ninject 属性绑定，如何正确做

> ID：10188451
> 
> 赞同：1
> 
> 时间：2012-04-17T09:18:12.573
> 
> 标签：ninject

我已经在测试项目中安装了 Ninject (v4.0.30319) 包进行测试。在下面创建测试代码，不幸的是 ValidateAbuse.Instance.Repository 始终为 Null。为什么 Ninject 不将存储库绑定到 ValidateAbuse.Repository 属性？你们中的一些人可能会建议使用构造函数绑定，但由于代码结构，我不能使用它。下面的代码只是示例，我需要找到一种绑定到属性的方法。

总是失败的测试方法

```
 [TestMethod]
        public void PropertyInjection()
        {
          using (IKernel kernel = new StandardKernel())
          {
              kernel.Bind<ISettingsRepository>().To<SettingsRepository>();
              Assert.IsNotNull(ValidateAbuse.Instance.Repository);
          }
        } 
```

存储库接口

```
public interface ISettingsRepository
{
    List<string> GetIpAbuseList();
    List<string> GetSourceAbuseList();  
} 
```

存储库实现

```
 public class SettingsRepository : ISettingsRepository
    {
        public List<string> GetIpAbuseList()
        {
            return DataAccess.Instance.Abuses.Where(p => p.TypeId == 1).Select(p => p.Source).ToList();
        }

        public List<string> GetSourceAbuseList()
        {
            return DataAccess.Instance.Abuses.Where(p => p.TypeId == 2).Select(p => p.Source).ToList();
        }
    } 
```

我试图绑定存储库的类

```
public class ValidateAbuse 
    {        
        [Inject]
        public ISettingsRepository Repository { get; set; }

        public static ValidateAbuse Instance = new ValidateAbuse();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T10:30:26.177

Ninject 只会在创建该对象的实例时绑定该对象的属性。由于您正在创建 ValidateAbuse 的实例而不是 Ninject 创建它，它不会知道任何关于它的信息，因此无法在创建时设置属性值。

编辑：

您应该从 ValidateAbuse 中删除静态单例，并允许 Ninject 将其作为单例进行管理。

```
kernel.Bind<ValidateAbuse>().ToSelf().InSingletonScope(); 
```

然后，当您要求 Ninject 创建任何需要 ValidateAbuse 实例的类时，它总是会得到相同的实例。

似乎您不完全了解 Ninject 的工作原理或如何实现它，所以我建议您阅读 wiki [https://github.com/ninject/ninject/wiki/How-Injection-Works](https://github.com/ninject/ninject/wiki/How-Injection-Works)并遵循一些更基本的示例在尝试将其连接到现有应用程序之前。

# python - Python - 每x个元素插入换行符

> ID：10188453
> 
> 赞同：3
> 
> 时间：2012-04-17T09:18:21.320
> 
> 标签：python, line-breaks

我已经在 SO 中寻找类似的问题，但似乎这只是针对 Visual Basic 提出的。我想我想做的事情相当简单，但作为一个初学者，我似乎找不到完成它的方法。

我有一个这样的字符串列表：

```
macrolist = ['hans', 'are', 'we', 'the', 'baddies', 'cake', 'or', 'death', 'cake', 'please', 'do', 'you', 'have', 'a', 'flag'] 
```

问题是这是在从每行只有 5 个单词的选项卡式文件中读取之后生成的，然后在其中进行了一些更改（主要是改组）。为了生成输出文件，我可以这样加入列表的元素：

```
'\t'.join(macrolist) 
```

...然后将其写入一个新文件，但这将输出一个仅包含一行制表符空格项目的文本文件。我需要得到一个每行只有 5 个单词的文件，就像原始文件一样，所以我认为，在加入列表之前，我可以每 5 个单词插入一个换行符。我尝试了以下方法，但出现“/：'str'和'int'不支持的操作数类型”的错误：

```
for index in macrolist:
    op = index/5
    if op is int:
        macrolist.append('\n')

print macrolist 
```

我的想法是，如果给定索引是 5 的倍数，则代码可以在之后插入换行符。然后我可以加入列表，输出将符合要求。但是，当然，即使是设计也可能是错误的......有什么想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-17T09:23:19.823

尝试：

```
def chunks(l, n):
    """ Yield successive n-sized chunks from l.
    """
    for i in xrange(0, len(l), n):
        yield l[i:i+n]
chunks(macrolist,5) 
```

然后像这样遍历列表中的列表：

```
for chunk in chunks(macrolist,5):
    print '\t'.join(chunk) 
```

块代码取自[这里](https://stackoverflow.com/questions/312443/how-do-you-split-a-list-into-evenly-sized-chunks-in-python)。我要感谢[Ned Batchelder](https://stackoverflow.com/users/14343/ned-batchelder)提供的代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T10:33:21.197

```
for i, m in enumerate(macrolist, 1):  
    outputfile.write(m + ['\t', '\n'][i % 5 == 0]) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T09:43:36.023

```
>>> [' '.join(macrolist[5 * i: 5 * i + 5]) for i in range(0, len(macrolist) / 5)]
['hans are we the baddies', 'cake or death cake please', 'do you have a flag'] 
```

# c++ - 如何将年龄读成双倍

> ID：10188454
> 
> 赞同：1
> 
> 时间：2012-04-17T09:18:25.813
> 
> 标签：c++

我正在使用“Stroustrup 的 C++ 编程、原理和练习”学习编程。我必须将一个人的年龄读成双倍并以几个月为单位显示。现在我的困惑是当一个人输入一个年龄时，例如：22.5，应该是考虑 22 年零 5 个月或 22 年 6 个月，因为它是 0.5？如何将 22 和 5 与双精度数分开为两个不同的整数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T09:23:10.807

想想看：你问的是*年龄*。所以 22.5 年应该被认为是 22 年零 6 个月。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T09:23:21.847

22.5 年等于 22 年 + 0.5 年。0.5 年 = 6 个月。

这应该适合你：

```
int years = floor(age);         // get the integer part of age -- that's years
double frac = age - years;      // get the fractional part of age
int months = round(12\. * frac); // convert the fractional part into # of months 
```

# c++ - 我们必须删除 QUpdSockets 吗？

> ID：10188456
> 
> 赞同：0
> 
> 时间：2012-04-17T09:18:34.420
> 
> 标签：c++, qt

我正在编写一个使用 QUdpSockets 的应用程序。由于使用 operator new 创建套接字而出现内存问题，我想知道在关闭它后是否需要删除它们。

下面的代码：

```
socket = new QUdpSocket(this);
socket->bind();
connect(socket, SIGNAL(readyRead()), this, SLOT(getResponse()));

socket->close();
delete socket; //Do I have to do this to free the mem? 
```

帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T09:20:41.013

取决于是什么`this`。每当它被摧毁时，`QUdpSocket`意志也会被摧毁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T13:45:57.303

一旦您不再需要套接字，您就可以调用：

```
socket->deleteLater(); 
```

是的，当你不再需要它时最好销毁它。

另一种解决方案是删除“this”，因此套接字也将被删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T13:53:45.687

如果你完成了套接字，你应该删除它。这样你就安全了。也不疼。然而，正如已经指出的那样，“this”将用于销毁套接字（参见[http://doc.qt.io/qt-4.8/qobject.html#QObject](http://doc.qt.io/qt-4.8/qobject.html#QObject)）。

# delphi - 如何循环一个类中的所有属性

> ID：10188459
> 
> 赞同：12
> 
> 时间：2012-04-17T09:18:41.117
> 
> 标签：delphi, class, properties, delphi-xe, rtti

我在我的 Delphi 应用程序中有一个类，我想要一种简单而动态的方法将所有字符串属性重置为 '' 并将所有布尔属性重置为 False 据我在网上看到的，应该可以创建一个循环某种意义上，但我不清楚该怎么做。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-17T10:42:57.123

如果您是 Delphi 2010（及更高版本）用户，则有一个新的 RTTI 单元（rtti.pas）。您可以使用它来获取有关您的类及其属性的运行时信息（默认为公共属性，但您可以使用`{$RTTI}`编译器指令来包含受保护和私有字段信息）。例如，我们有下一个带有 3 个公共字段（1 个布尔字段和 2 个字符串字段（其中一个是只读的））的测试类。

```
 TTest = class(TObject)
      strict private
        FString1 : string;
        FString2 : string;
        FBool : boolean;
      public
        constructor Create();
        procedure PrintValues();

        property String1 : string read FString1 write FString1;
        property String2 : string read FString2;
        property BoolProp : boolean read FBool write FBool;
    end;

constructor TTest.Create();
begin
    FBool := true;
    FString1 := 'test1';
    FString2 := 'test2';
end;

procedure TTest.PrintValues();
begin
    writeln('string1 : ', FString1);
    writeln('string2 : ', FString2);
    writeln('bool: ', BoolToStr(FBool, true));
end; 
```

要枚举对象的所有属性并将其值设置为*默认*值，您可以使用类似下面的代码。首先你必须初始化`TRttiContext`结构（这不是必需的，因为它是一个记录）。然后你应该得到关于你的对象的 rtti 信息，然后你可以循环你的属性并过滤它（跳过只读属性和布尔和搅拌除外）。考虑到字符串的种类很少：tkUString、tkString 和其他（看看`TTypeKind`in `typinfo.pas`）

```
 TObjectReset = record
      strict private
      public
        class procedure ResetObject(obj : TObject);  static;
    end;

{ TObjectReset }

class procedure TObjectReset.ResetObject(obj: TObject);
var ctx : TRttiContext;
    rt : TRttiType;
    prop : TRttiProperty;
    value : TValue;
begin
    ctx := TRttiContext.Create();
    try
        rt := ctx.GetType(obj.ClassType);

        for prop in rt.GetProperties() do begin
            if not prop.IsWritable then continue;

            case prop.PropertyType.TypeKind of
                tkEnumeration : value := false;
                tkUString :      value := '';
                else continue;
            end;
            prop.SetValue(obj, value);
        end;
    finally
        ctx.Free();
    end;
end; 
```

简单的代码测试：

```
var t : TTest;
begin
    t := TTest.Create();
    try
        t.PrintValues();
        writeln('reset values'#13#10);
        TObjectReset.ResetObject(t);
        t.PrintValues();
    finally
        readln;
        t.Free();
    end;
end. 
```

结果是

```
string1 : test1
string2 : test2
bool: True
reset values

string1 :
string2 : test2
bool: False 
```

还要看看*Attributes*，imo最好用一些属性标记属性（你需要重置），并且可能使用默认值，例如：

```
[ResetTo('my initial value')]
property MyValue : string read FValue write FValue; 
```

那么你可以只过滤带有标记的属性`ResetToAttribute`

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-17T10:43:22.110

***请注意，以下代码仅适用于类的已发布属性！此外，传递给下面函数的类的实例必须至少定义发布部分！***

以下是如何使用旧样式 RTTI 将已发布的字符串属性值设置为空字符串并将布尔值设置为 False。

如果您的 Delphi 早于 Delphi 2009，您可能会缺少 tkUString 类型。如果是这样，只需将
其从以下代码中删除：

```
uses
  TypInfo;

procedure ResetPropertyValues(const AObject: TObject);
var
  PropIndex: Integer;
  PropCount: Integer;
  PropList: PPropList;
  PropInfo: PPropInfo;
const
  TypeKinds: TTypeKinds = [tkEnumeration, tkString, tkLString, tkWString,
    tkUString];
begin
  PropCount := GetPropList(AObject.ClassInfo, TypeKinds, nil);
  GetMem(PropList, PropCount * SizeOf(PPropInfo));
  try
    GetPropList(AObject.ClassInfo, TypeKinds, PropList);
    for PropIndex := 0 to PropCount - 1 do
    begin
      PropInfo := PropList^[PropIndex];
      if Assigned(PropInfo^.SetProc) then
      case PropInfo^.PropType^.Kind of
        tkString, tkLString, tkUString, tkWString:
          SetStrProp(AObject, PropInfo, '');
        tkEnumeration:
          if GetTypeData(PropInfo^.PropType^)^.BaseType^ = TypeInfo(Boolean) then
            SetOrdProp(AObject, PropInfo, 0);
      end;
    end;
  finally
    FreeMem(PropList);
  end;
end; 
```

这是一个简单的测试代码（注意必须发布属性；如果类中没有发布的属性，则至少必须有空的发布部分）：

```
type
  TSampleClass = class(TObject)
  private
    FStringProp: string;
    FBooleanProp: Boolean;
  published
    property StringProp: string read FStringProp write FStringProp;
    property BooleanProp: Boolean read FBooleanProp write FBooleanProp;
  end;

procedure TForm1.Button1Click(Sender: TObject);
var
  SampleClass: TSampleClass;
begin
  SampleClass := TSampleClass.Create;
  try
    SampleClass.StringProp := 'This must be cleared';
    SampleClass.BooleanProp := True;
    ResetPropertyValues(SampleClass);
    ShowMessage('StringProp = ' + SampleClass.StringProp + sLineBreak +
      'BooleanProp = ' + BoolToStr(SampleClass.BooleanProp));
  finally
    SampleClass.Free;
  end;
end; 
```

# iphone - 如何测试 shouldAutorotateToInterfaceOrientation？

> ID：10188462
> 
> 赞同：1
> 
> 时间：2012-04-17T09:18:47.643
> 
> 标签：iphone, objective-c, unit-testing, testing, automated-tests

我通过在控制器的 .h 文件中声明它使其可以访问，
但我不喜欢仅出于测试目的而更改方法的可见性。

**有没有其他方法可以使用 Objective-C 调用此方法，**
例如。通过临时从测试类改变方法的可访问性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T09:23:12.147

这是override方法，它会自动调用，不需要调用这个方法，或者如果你还想试试，那就放调试器测试一下。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T10:14:49.510

好的，提醒一下：该方法在苹果类 UIViewController.h 中声明

```
// Override to allow rotation. Default returns YES only for UIInterfaceOrientationPortrait
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation; 
```

所以它是一个公共可访问的方法，你不需要在你的子类 .h 文件中再次声明它

因此，如果您想直接调用它进行测试，只需执行此操作（来自任何引用您的类实例的类）：

```
BOOL rotating = [yourController shouldAutorotateToInterfaceOrientation:1]; 
```

# android - 如何从 ListFragment 显示/隐藏 Activity 视图

> ID：10188466
> 
> 赞同：2
> 
> 时间：2012-04-17T09:19:04.210
> 
> 标签：android, listactivity

我有通过游标加载器获取数据`ListActivity`的经典`ListFragment`设计。`ListFragment`

基本安排有两种可能的结果-

光标为空或有数据。

使用数据`list_row.xml`填充数据库中的项目。

如果为空，我会得到一个没有用户信息的空白屏幕。

我已经设置了一个`TextView <i>"No records found message"</i>`可以从 ListFragment 变为可见或不可见的设置。问题是：

1.  ListFragment 无法访问 ListActivity 上的视图。
2.  如何从 ListFragment 调用以下 ListActivity 方法？

```
    公共无效更新视图（布尔数据）{

        如果（数据）{         
             noRecordsFound.setVisibility(View.GONE);       
        } 别的 {            
             noRecordsFound.setVisibility(View.VISIBLE);
        }
    }   

```

我试图从 中访问`onLoadFinished`，`ListFragment`但这不可访问。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T10:01:22.853

感谢 MH 提供的替代方法，但我遇到了自己问题的答案。虽然我认为 MH 的答案最适合我的情况，但我提供了一个我最初想做的解决方案，以防有人需要将它用于列表视图以外的事情。

好吧，我在 Cursor Loader 中包含了该`if (cursor.getCount() < 1)`块，因此：`onLoadFinished()`

```
@Override
public void onLoadFinished(Loader<Cursor> loader, Cursor cursor) {

    if (cursor.getCount() < 1) {

        TextView noNotes    = (TextView) getActivity().findViewById(R.id.noNotes);
        noNotes.setVisibility(View.GONE);
    }
    adapter.swapCursor(cursor);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T19:13:48.257

根据之前的评论：

我不太了解您的第一个问题，因为视图应该是片段布局的一部分，而不是活动的，对吗？

关于切换“空”消息：为什么不简单地使用[`setEmptyView(...)`](http://developer.android.com/reference/android/widget/AdapterView.html#setEmptyView%28android.view.View%29)of`ListView`或[`setEmptyText(...)`](http://developer.android.com/reference/android/support/v4/app/ListFragment.html#setEmptyText%28java.lang.CharSequence%29)of的内置功能`ListFragment`（在支持库中也可用）？第一个允许您为空消息显示更复杂的视图层次结构，以防您需要

# iphone - 错误：NSArray 在访问全局变量和核心数据时被枚举抛出

> ID：10188467
> 
> 赞同：1
> 
> 时间：2012-04-17T09:19:04.417
> 
> 标签：iphone, objective-c, ios, core-data, enumeration

我有这段代码，当添加另一个对象时，我用它来更新 Core Data 中的一些值：

```
//Create new receipt
        Receipt *receipt = [[Receipt alloc] init];
        receipt.project = self.projectLabel.text;
        receipt.amount = self.amountTextField.text;
        receipt.descriptionNote = self.descriptionTextField.text;
        receipt.business = self.businessNameTextField.text;
        receipt.date = self.dateLabel.text;
        receipt.category = self.categoryLabel.text;
        receipt.paidBy = self.paidByLabel.text;
        receipt.receiptImage1 = self.receiptImage1;
        //Need to set this to 2
        receipt.receiptImage2 = self.receiptImage1;
        receipt.receiptNumber = @"99";

        int count = 0;
        int catCount = 0;

    for (Project *p in appDelegate.projects)
            {
                if ([p.projectName isEqualToString:receipt.project]){
                    double tempValue = [p.totalValue doubleValue];
                    tempValue += [receipt.amount doubleValue];
                    NSString *newTotalValue = [NSString stringWithFormat:@"%.02f", tempValue];
                    NSString *newProjectName = p.projectName;
                    //remove entity from Core Data
                    NSFetchRequest * allProjects = [[NSFetchRequest alloc] init];
                    [allProjects setEntity:[NSEntityDescription entityForName:@"Project" inManagedObjectContext:appDelegate.managedObjectContext]];
                    [allProjects setIncludesPropertyValues:NO]; //only fetch the managedObjectID

                    NSError * error = nil;
                    NSArray * projectsArray = [appDelegate.managedObjectContext executeFetchRequest:allProjects error:&error];

                    //Delete product from Core Data
                    [appDelegate.managedObjectContext deleteObject:[projectsArray objectAtIndex:count]];

                    NSError *saveError = nil;
                    [appDelegate.managedObjectContext save:&saveError];

                    [appDelegate.projects removeObjectAtIndex:count];

                    NSLog(@"Removed project from Core Data");

                    //Insert a new object of type ProductInfo into Core Data
                    NSManagedObject *projectInfo = [NSEntityDescription
                                                    insertNewObjectForEntityForName:@"Project" 
                                                    inManagedObjectContext:appDelegate.managedObjectContext];

                    //Set receipt entities values
                    [projectInfo setValue:newProjectName forKey:@"name"];
                    [projectInfo setValue:newTotalValue forKey:@"totalValue"];

                    if (![appDelegate.managedObjectContext save:&error]) {
                        NSLog(@"Whoops, couldn't save: %@", [error localizedDescription]);
                    }

                    NSLog(@"Added Project to Core Data");

                    Project *tempProject = [[Project alloc] init];
                    tempProject.projectName = [projectInfo valueForKey:@"name"];
                    tempProject.totalValue = [projectInfo valueForKey:@"totalValue"];

                    [appDelegate.projects addObject:tempProject];

                }
                count++;
            }

            for (Category *c in appDelegate.categories){

                if ([c.categoryName isEqualToString:receipt.category]){

                    double tempValue = [c.totalValue doubleValue];
                    tempValue += [receipt.amount doubleValue];
                    NSString *newTotalValue = [NSString stringWithFormat:@"%.02f", tempValue];
                    NSString *newCategoryName = c.categoryName;

                    //remove entity from Core Data
                    NSFetchRequest * allCategories = [[NSFetchRequest alloc] init];
                    [allCategories setEntity:[NSEntityDescription entityForName:@"Category" inManagedObjectContext:appDelegate.managedObjectContext]];
                    [allCategories setIncludesPropertyValues:NO]; //only fetch the managedObjectID

                    NSError * categoriesError = nil;
                    NSArray * categoriesArray = [appDelegate.managedObjectContext executeFetchRequest:allCategories error:&categoriesError];

                    //Delete product from Core Data
                    [appDelegate.managedObjectContext deleteObject:[categoriesArray objectAtIndex:catCount]];
                    NSError *categorySaveError = nil;
                    [appDelegate.managedObjectContext save:&categorySaveError];

                    [appDelegate.categories removeObjectAtIndex:catCount];

                    NSLog(@"Removed category from Core Data");
                    NSError * error = nil;
                    //Insert a new object of type ProductInfo into Core Data
                    NSManagedObject *categoryInfo = [NSEntityDescription
                                                     insertNewObjectForEntityForName:@"Category" 
                                                     inManagedObjectContext:appDelegate.managedObjectContext];

                    //Set receipt entities values
                    [categoryInfo setValue:newCategoryName forKey:@"name"];
                    [categoryInfo setValue:newTotalValue forKey:@"totalValue"];

                    if (![appDelegate.managedObjectContext save:&error]) {
                        NSLog(@"Whoops, couldn't save: %@", [error localizedDescription]);
                    }

                    NSLog(@"Added Category to Core Data");

                    Category *tempCategory = [[Category alloc] init];
                    tempCategory.categoryName = [categoryInfo valueForKey:@"name"];
                    tempCategory.totalValue = [categoryInfo valueForKey:@"totalValue"];

                    [appDelegate.categories addObject:tempCategory];
                }
                catCount++;

            } 
```

此代码给出了错误：

'......在枚举时发生了变异'。

谁能解释为什么？另外，有没有更好的方法来做我想要实现的目标？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T09:30:26.893

您看到的错误是准确的。问题是您在迭代集合时正在改变（更改）集合。基本上，您正在执行以下形式的操作：

```
for (Project *p in appDelegate.projects) {
   ...
   [p addObject: X]
} 
```

这是不允许的。

一个简单的解决方案是创建要添加的对象的新集合，然后将它们添加到循环*之外的原始容器中。*就像是：

```
NSMutableArray *array = [NSMutableArray array];
for (Project *p in appDelegate.projects) {
   ...
   [array addObject:X];
}
[p addObjects:array]; 
```

顺便说一句，您是否在谷歌搜索错误文本“在枚举时发生了变异”？如果您仅通过谷歌搜索没有找到这个常见问题的答案，我会感到惊讶。

此外，在发布错误消息时，发布整行信息会很有帮助，而不仅仅是其中的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T09:28:08.637

`appDelegate.projects`您在此处的 for-each 循环中迭代项目时添加和删除项目：

```
[appDelegate.projects removeObjectAtIndex:count];
// ...
[appDelegate.projects addObject:tempProject]; 
```

和同样的`appDelegate.categories`：

```
[appDelegate.categories removeObjectAtIndex:count];
// ...
[appDelegate.categories addObject:tempProject]; 
```

AFAIK，在这种情况下，您应该使用简单的 for 循环，并使用索引访问数组。

# android - 如何在触摸事件上调整视图大小

> ID：10188478
> 
> 赞同：9
> 
> 时间：2012-04-17T09:19:32.427
> 
> 标签：android, android-canvas, android-imageview

![在此处输入图像描述](../Images/ad516bf9e8f2673274f811812c581173.png)

见下图

我想通过拖动它的角来更改突出显示视图的形状.. 拖动角后的视图不需要是矩形它可以是任何任意形状

如何做到这一点？

现在我已经完成了触摸事件中可移动的 4 个角，但形状没有改变

```
package com.assignment.DragDrop;

import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Point;
import android.graphics.drawable.BitmapDrawable;
import android.graphics.drawable.Drawable;
import android.view.MotionEvent;
import android.view.View;
import android.widget.ImageView;

public class DrawView extends View {

    Point point1,point2,point3,point4;
    private ColorBall[] colorballs = new ColorBall[4]; // array that holds the balls
    private int balID = 0; // variable to know what ball is being dragged
    Paint paint;
    Canvas canvas;
    public DrawView(Context context) {
        super(context);
         paint=new Paint();
        setFocusable(true); //necessary for getting the touch events
        canvas= new Canvas();
        // setting the start point for the balls
        point1 = new Point();
        point1.x = 50;
        point1.y = 20;

        point2 = new Point();
        point2.x = 150;
        point2.y = 20;

        point3 = new Point();
        point3.x = 150;
        point3.y = 120;

        point4 = new Point();
        point4.x = 50;
        point4.y = 120;

        // declare each ball with the ColorBall class
        colorballs[0] = new ColorBall(context,R.drawable.bol_blauw, point1);
        colorballs[1] = new ColorBall(context,R.drawable.bol_blauw, point2);
        colorballs[2] = new ColorBall(context,R.drawable.bol_groen, point3);
        colorballs[3] = new ColorBall(context,R.drawable.bol_geel, point4);

    }

    // the method that draws the balls
    @Override protected void onDraw(Canvas canvas) {
        //canvas.drawColor(0xFFCCCCCC);     //if you want another background color       

        paint.setAntiAlias(true);
        paint.setDither(true);
        paint.setColor(Color.BLACK);
        paint.setStyle(Paint.Style.FILL);
        paint.setStrokeJoin(Paint.Join.ROUND);
       // mPaint.setStrokeCap(Paint.Cap.ROUND);
        paint.setStrokeWidth(5);

          canvas.drawPaint(paint);
          paint.setColor(Color.WHITE);

          canvas.drawRect(point1.x+25, point2.x, point3.x+25, point4.x, paint);
          BitmapDrawable mBitmap;
          mBitmap= new BitmapDrawable();

        //  canvas.drawBitmap(bitmap, left, top, paint)
        // shade_region_between_points();
         // canvas.drawLine(point1.x, point1.y, point2.x, point2.y, paint);
        //  canvas.drawLine(point1.x, point1.y, point4.x, point4.y, paint);

        //  canvas.drawLine(point4.x, point4.y, point3.x, point3.y, paint);
        // canvas.drawLine(point2.x, point2.y, point3.x, point3.y, paint);
          //draw the balls on the canvas
        for (ColorBall ball : colorballs) {
            canvas.drawBitmap(ball.getBitmap(), ball.getX(), ball.getY(), paint);
             // canvas.drawLine(point1.x, point1.y, point2.x, point2.y, paint);

    //  canvas.drawRect(point1.x, point2.x, point3.x, point4.x, paint);

        }
        /*Drawable drawable = getResources().getDrawable(R.drawable.ic_launcher);
        drawable.setBounds( point1.x+25, point2.x, point3.x+25, point4.x);
        drawable.draw(canvas);*/
    }

    // events when touching the screen
    public boolean onTouchEvent(MotionEvent event) {
        int eventaction = event.getAction(); 

        int X = (int)event.getX(); 
        int Y = (int)event.getY(); 

        switch (eventaction ) { 

        case MotionEvent.ACTION_DOWN: // touch down so check if the finger is on a ball
            balID = 0;
            for (ColorBall ball : colorballs) {
                // check if inside the bounds of the ball (circle)
                // get the center for the ball
                int centerX = ball.getX() + 25;
                int centerY = ball.getY() + 25;
                paint.setColor(Color.CYAN);
                // calculate the radius from the touch to the center of the ball
                double radCircle  = Math.sqrt( (double) (((centerX-X)*(centerX-X)) + (centerY-Y)*(centerY-Y)));
                //  canvas.drawLine(point1.x, point1.y, point2.x, point2.y, paint);

                // if the radius is smaller then 23 (radius of a ball is 22), then it must be on the ball
                if (radCircle < 23){

                    balID = ball.getID();
                    canvas.drawRect(point1.x, point2.x, point3.x, point4.x, paint);

                    invalidate(); 
                    break;
                }
                invalidate(); 

                //canvas.drawRect(point1.x, point2.x, point3.x, point4.x, paint);
                // check all the bounds of the ball (square)
                //if (X > ball.getX() && X < ball.getX()+50 && Y > ball.getY() && Y < ball.getY()+50){
                //  balID = ball.getID();
                //  break;
                //}
            }

            break; 

        case MotionEvent.ACTION_MOVE:   // touch drag with the ball
            // move the balls the same as the finger
            if (balID > 0) {
            try {
                colorballs[balID-1].setX(X-25);
                    colorballs[balID-1].setY(Y-25);
                     // canvas.drawLine(point1.x, point1.y, point2.x, point2.y, paint);

            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            paint.setColor(Color.CYAN);
            canvas.drawRect(point1.x, point2.x, point3.x, point4.x, paint);
            invalidate(); 
            }

            break; 

        case MotionEvent.ACTION_UP: 
            // touch drop - just do things here after dropping

            break; 
        } 
        // redraw the canvas
        invalidate(); 
        return true; 

    }

    public void shade_region_between_points()
    {
        canvas.drawRect(point1.x, point2.x, point3.x, point4.x, paint);
    }
} 
```

我从互联网上得到了这个代码。

这将能够在触摸事件上移动角落，但形状不会移动......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T12:55:02.307

以下代码是在触摸底座上绘制矩形。

```
import java.util.ArrayList;

import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Point;
import android.graphics.drawable.BitmapDrawable;
import android.util.AttributeSet;
import android.view.MotionEvent;
import android.view.View;

import com.common.Utils;
import com.example.rectangleoverlay.R;

public class DrawView extends View {

    Point point1, point3;
    Point point2, point4;

    /**
     * point1 and point 3 are of same group and same as point 2 and point4
     */
    int groupId = -1;
    private ArrayList<ColorBall> colorballs = new ArrayList<ColorBall>();
    // array that holds the balls
    private int balID = 0;
    // variable to know what ball is being dragged
    Paint paint;
    Canvas canvas;

    public DrawView(Context context) {
        super(context);
        paint = new Paint();
        setFocusable(true); // necessary for getting the touch events
        canvas = new Canvas();
        // setting the start point for the balls
        point1 = new Point();
        point1.x = 50;
        point1.y = 20;

        point2 = new Point();
        point2.x = 150;
        point2.y = 20;

        point3 = new Point();
        point3.x = 150;
        point3.y = 120;

        point4 = new Point();
        point4.x = 50;
        point4.y = 120;

        // declare each ball with the ColorBall class
        colorballs.add(new ColorBall(context, R.drawable.gray_circle, point1));
        colorballs.add(new ColorBall(context, R.drawable.gray_circle, point2));
        colorballs.add(new ColorBall(context, R.drawable.gray_circle, point3));
        colorballs.add(new ColorBall(context, R.drawable.gray_circle, point4));

    }

    public DrawView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    public DrawView(Context context, AttributeSet attrs) {
        super(context, attrs);
        paint = new Paint();
        setFocusable(true); // necessary for getting the touch events
        canvas = new Canvas();
        // setting the start point for the balls
        point1 = new Point();
        point1.x = 50;
        point1.y = 20;

        point2 = new Point();
        point2.x = 150;
        point2.y = 20;

        point3 = new Point();
        point3.x = 150;
        point3.y = 120;

        point4 = new Point();
        point4.x = 50;
        point4.y = 120;

        // declare each ball with the ColorBall class
        colorballs.add(new ColorBall(context, R.drawable.gray_circle, point1));
        colorballs.add(new ColorBall(context, R.drawable.gray_circle, point2));
        colorballs.add(new ColorBall(context, R.drawable.gray_circle, point3));
        colorballs.add(new ColorBall(context, R.drawable.gray_circle, point4));

    }

    // the method that draws the balls
    @Override
    protected void onDraw(Canvas canvas) {
        // canvas.drawColor(0xFFCCCCCC); //if you want another background color

        paint.setAntiAlias(true);
        paint.setDither(true);
        paint.setColor(Color.parseColor("#55000000"));
        paint.setStyle(Paint.Style.FILL);
        paint.setStrokeJoin(Paint.Join.ROUND);
        // mPaint.setStrokeCap(Paint.Cap.ROUND);
        paint.setStrokeWidth(5);

        canvas.drawPaint(paint);
        paint.setColor(Color.parseColor("#55FFFFFF"));

        if (groupId == 1) {
            canvas.drawRect(point1.x + colorballs.get(0).getWidthOfBall() / 2,
                    point3.y + colorballs.get(2).getWidthOfBall() / 2, point3.x
                            + colorballs.get(2).getWidthOfBall() / 2, point1.y
                            + colorballs.get(0).getWidthOfBall() / 2, paint);
        } else {
            canvas.drawRect(point2.x + colorballs.get(1).getWidthOfBall() / 2,
                    point4.y + colorballs.get(3).getWidthOfBall() / 2, point4.x
                            + colorballs.get(3).getWidthOfBall() / 2, point2.y
                            + colorballs.get(1).getWidthOfBall() / 2, paint);
        }
        BitmapDrawable mBitmap;
        mBitmap = new BitmapDrawable();

        // draw the balls on the canvas
        for (ColorBall ball : colorballs) {
            canvas.drawBitmap(ball.getBitmap(), ball.getX(), ball.getY(),
                    new Paint());

        }
    }

    // events when touching the screen
    public boolean onTouchEvent(MotionEvent event) {
        int eventaction = event.getAction();

        int X = (int) event.getX();
        int Y = (int) event.getY();

        switch (eventaction) {

        case MotionEvent.ACTION_DOWN: // touch down so check if the finger is on
                                        // a ball
            balID = -1;
            groupId = -1;
            for (ColorBall ball : colorballs) {
                // check if inside the bounds of the ball (circle)
                // get the center for the ball
                Utils.logd("Id : " + ball.getID());
                Utils.logd("getX : " + ball.getX() + " getY() : " + ball.getY());
                int centerX = ball.getX() + ball.getWidthOfBall();
                int centerY = ball.getY() + ball.getHeightOfBall();
                paint.setColor(Color.CYAN);
                // calculate the radius from the touch to the center of the ball
                double radCircle = Math
                        .sqrt((double) (((centerX - X) * (centerX - X)) + (centerY - Y)
                                * (centerY - Y)));

                Utils.logd("X : " + X + " Y : " + Y + " centerX : " + centerX
                        + " CenterY : " + centerY + " radCircle : " + radCircle);

                if (radCircle < ball.getWidthOfBall()) {

                    balID = ball.getID();
                    Utils.logd("Selected ball : " + balID);
                    if (balID == 1 || balID == 3) {
                        groupId = 2;
                        canvas.drawRect(point1.x, point3.y, point3.x, point1.y,
                                paint);
                    } else {
                        groupId = 1;
                        canvas.drawRect(point2.x, point4.y, point4.x, point2.y,
                                paint);
                    }
                    invalidate();
                    break;
                }
                invalidate();
            }

            break;

        case MotionEvent.ACTION_MOVE: // touch drag with the ball
            // move the balls the same as the finger
            if (balID > -1) {
                Utils.logd("Moving Ball : " + balID);

                colorballs.get(balID).setX(X);
                colorballs.get(balID).setY(Y);

                paint.setColor(Color.CYAN);

                if (groupId == 1) {
                    colorballs.get(1).setX(colorballs.get(0).getX());
                    colorballs.get(1).setY(colorballs.get(2).getY());
                    colorballs.get(3).setX(colorballs.get(2).getX());
                    colorballs.get(3).setY(colorballs.get(0).getY());
                    canvas.drawRect(point1.x, point3.y, point3.x, point1.y,
                            paint);
                } else {
                    colorballs.get(0).setX(colorballs.get(1).getX());
                    colorballs.get(0).setY(colorballs.get(3).getY());
                    colorballs.get(2).setX(colorballs.get(3).getX());
                    colorballs.get(2).setY(colorballs.get(1).getY());
                    canvas.drawRect(point2.x, point4.y, point4.x, point2.y,
                            paint);
                }

                invalidate();
            }

            break;

        case MotionEvent.ACTION_UP:
            // touch drop - just do things here after dropping

            break;
        }
        // redraw the canvas
        invalidate();
        return true;

    }

    public void shade_region_between_points() {
        canvas.drawRect(point1.x, point3.y, point3.x, point1.y, paint);
    }
} 
```

以下类用于存储对象

```
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Point;

public class ColorBall {

    Bitmap bitmap;
    Context mContext;
    Point point;
    int id;
    static int count = 0;

    public ColorBall(Context context, int resourceId, Point point) {
        this.id = count++;
        bitmap = BitmapFactory.decodeResource(context.getResources(),
                resourceId);
        mContext = context;
        this.point = point;
    }

    public int getWidthOfBall() {
        return bitmap.getWidth();
    }

    public int getHeightOfBall() {
        return bitmap.getHeight();
    }

    public Bitmap getBitmap() {
        return bitmap;
    }

    public int getX() {
        return point.x;
    }

    public int getY() {
        return point.y;
    }

    public int getID() {
        return id;
    }

    public void setX(int x) {
        point.x = x;
    }

    public void setY(int y) {
        point.y = y;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T09:31:55.317

就像我们裁剪图像时它会增加矩形的大小。然后我们可以将我们的视图保存为新的位图。所以你可以从[这个问题](https://stackoverflow.com/questions/5226922/crop-to-fit-image-in-android)中得到帮助。

这解释了与您要求的几乎相同的事情。

**或者**

如果是布局，那么当我们触摸任何视图时，我们可以设置具有新高度和宽度的新 Layout-Param

# windows - windows符号链接目标

> ID：10188485
> 
> 赞同：31
> 
> 时间：2012-04-17T09:19:46.300
> 
> 标签：windows, symlink

假设我设置了一个符号链接：

```
mklink  /D C:\root\Public\mytextfile.txt C:\root\Public\myothertextfile.txt 
```

^(编者注：选项`/D`- 用于创建*目录*符号链接 - 与目标*文件*不一致，如本例所示，这引起了一些混乱。要创建*文件*符号链接，只需省略`/D`.)

有没有办法`mytextfile.txt`使用命令行查看目标是什么？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2014-09-28T03:47:48.867

正如哈里约翰斯顿所说`dir`，命令显示了符号链接的目标

```
2014/07/31  11:22    <DIR>          libs
2014/08/01  13:53             4,997 mobile.iml
2014/07/31  11:22               689 proguard-rules.pro
2014/09/28  10:54    <JUNCTION>     res [\??\C:\Users\_____\mobile\src\main\res] 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2018-03-23T22:32:15.747

为了补充[Paul Verest 的有用答案](https://stackoverflow.com/a/26081425/45375)：

*   虽然`cmd`'`dir`确实显示了链接类型和目标路径，但*提取*该信息并非易事 - 请参阅下面的 PowerShell 替代方案。

*   为了发现当前目录中的所有链接，请使用**`dir /aL`**.

**PowerShell** (PSv5+) 解决方案：

将当前目录中的所有链接及其目标列为完整路径：

```
PS> Get-ChildItem | ? Target | Select-Object FullName, Target

FullName                      Target
--------                      ------
C:\root\public\mytextfile.txt {C:\root\Public\myothertextfile.txt} 
```

确定给定链接的目标：

```
PS> (Get-Item C:\root\Public\mytextfile.txt).Target
C:\root\Public\myothertextfile.txt 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-04-16T12:23:01.440

编写一个批处理文件（get_target.bat）来获取符号链接的目标：

```
@echo off
for /f "tokens=2 delims=[]" %%H in  ('dir /al %1 ^| findstr /i /c:"%2"') do (
    echo %%H
) 
```

例如，要获取 的目标`C:\root\Public\mytextfile.txt`：

```
get_target.bat C:\root\Public\ mytextfile.txt 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-13T14:49:22.933

也许有人对解析目录中所有目录符号链接的 C# 方法感兴趣，类似于 Directory.GetDirectories()。要列出连接或文件符号链接，只需更改正则表达式。

```
static IEnumerable<Symlink> GetAllSymLinks(string workingdir)
{
    Process converter = new Process();
    converter.StartInfo = new ProcessStartInfo("cmd", "/c dir /Al") { RedirectStandardOutput = true, UseShellExecute = false, CreateNoWindow = true, WorkingDirectory = workingdir };
    string output = "";
    converter.OutputDataReceived += (sender, e) =>
    {
        output += e.Data + "\r\n";
    };
    converter.Start();
    converter.BeginOutputReadLine();
    converter.WaitForExit();

    Regex regex = new Regex(@"\n.*\<SYMLINKD\>\s(.*)\s\[(.*)\]\r");

    var matches = regex.Matches(output);
    foreach (Match match in matches)
    {
        var name = match.Groups[1].Value.Trim();
        var target = match.Groups[2].Value.Trim();
        Console.WriteLine("Symlink: " + name + " --> " + target);

        yield return new Symlink() { Name = name, Target = target };
    }
}

class Symlink
{
    public string Name { get; set; }
    public string Target { get; set; }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-02T19:13:07.830

所有功劳[归于@SecurityAndPrivacyGuru](https://stackoverflow.com/users/11187266/securityandprivacyguru)，[cmd]

完整的批处理脚本/函数，读取符号链接{|s in folder}并输出列表及其目标路径

```
@echo off
setlocal enableExtensions enableDelayedExpansion
cd /D "%~dp0"
set br=^

rem br;

set "pafIf=<<pafToSymlink|pafToFolder>>"
set "gIfZsymLink="
for /f "tokens=*" %%q in ('dir "!pafIf!" /al /b') do (
    for /f "tokens=2 delims=[]" %%r in ('dir /al ^| findstr /i /c:"%%q"') do (
        set "gIfZsymLink=!gIfZsymLink!%%~fq>%%r!br!"
    )
)
set "gIfZsymLink=!gIfZsymLink:~0,-1!"
rem echo "!gIfZsymLink!"

for /f "tokens=1,2 delims=>" %%q in ("!gIfZsymLink!") do (
    echo symlink: %%q , filepath: %%r
)

:scIn
rem endlocal
pause
rem exit /b 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-10-06T16:15:14.367

### 命令行选项

超级用户 Julian Knight 的[回答](https://superuser.com/a/444040/659759)列出了一些 Linux 命令的 Windows 等效资源。最相关的命令是`ln.exe`. 以下是下载链接以及如何使用这些实用程序。

*   [http://unxutils.sourceforge.net/](http://unxutils.sourceforge.net/)
*   [http://schinagl.priv.at/nt/ln/ln.html](http://schinagl.priv.at/nt/ln/ln.html)
*   [http://neosmart.net/Symlinks/](http://neosmart.net/Symlinks/)

### 使用 Windows 图形用户界面

或者，如果您想使用 Windows GUI 界面（特别是文件属性窗口）查看符号链接的目标，请安装 Windows[链接外壳扩展](https://schinagl.priv.at/nt/hardlinkshellext/HardLinkShellExt_X64.exe)（直接链接到文件下载）：

超级用户朱利安奈特的[回答](https://superuser.com/a/444040/659759)对我来说效果很好。

> 安装 Windows Link Shell Extension 后，您可以右键单击 Windows 资源管理器中的链接并检查属性。有一个选项卡可让您直接更改链接。

安装了[链接外壳扩展](https://schinagl.priv.at/nt/hardlinkshellext/hardlinkshellext.html)：

*   当您右键单击文件打开“属性”窗口时，它包括一个附加选项卡：“链接属性”，显示符号链接的目标。
*   您还可以编辑此目标字段以更改符号链接的目标。
*   由于该字段是可编辑的，因此目标链接的复制粘贴很容易。
*   就像滚动查看目标文件的整个路径一样！
    （相比之下，“属性”窗口中其他地方的“位置”字段不允许滚动查看您正在检查的文件的完整路径。）

**顺便提一句**

在安装 Link Shell Extension 后不久，WAMP 服务器图标不再出现在系统托盘中（注意到），这意味着虽然 WAMPP 仍在运行（本地网站按预期工作），但无法访问任何 WAMP 功能。
安装导致 WAMPP 托盘图标消失尚不确定，但好消息是重新启动后，WAMPP 像往常一样重新出现在系统托盘中。:-)

# nsis - cpack：如何在安装过程中将程序与文件扩展名关联？

> ID：10188487
> 
> 赞同：1
> 
> 时间：2012-04-17T09:19:53.493
> 
> 标签：nsis, cpack

我正在使用 CPack 和 NSIS 创建一个 Windows 安装程序。在安装过程中，应该询问用户是否要将我的程序与文件扩展名相关联。至少如果您对带有扩展名的文件执行“打开方式...”，则应告知您可以使用我的程序打开它。有人知道怎么做这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T07:59:23.767

转到系统上的 nsis 安装文件夹，然后从示例目录中查看 makensis.nsi。它将 .nsi 与 makensisw.exe 相关联。祝你好运 ;）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-01T07:27:38.580

要使用 NSIS 创建文件关联，我建议使用 Andrei T 提到的 NSIS 插件：[File Association](http://nsis.sourceforge.net/File_Association)和[FileAssoc](http://nsis.sourceforge.net/FileAssoc)。要将它们集成到 CPack 中，您需要包含脚本，在安装步骤中调用宏，在卸载步骤中调用其他宏。例如，这就是我使用“文件关联”插件的方式：

```
# Including
set(CPACK_NSIS_EXTRA_PREINSTALL_COMMANDS
    "!include \\\"${path_to_plugins}\\\\fileassoc.nsh\\\"")

# Create association
set(CPACK_NSIS_EXTRA_INSTALL_COMMANDS
    "\\\${RegisterExtension} '$INSTDIR\\\\myprogram.exe' '.myext' 'my_program_key'")
# my_program_key can be any string that gives some hint what this file type is about. And should not contain strings

# Remove association
set(CPACK_NSIS_EXTRA_UNINSTALL_COMMANDS
    "\\\${UnRegisterExtension} '.myext' 'my_program_key'") 
```

在此实现中，它不是可选步骤。

请注意双重转义。这是必需的，因为 CPack 使用这些字符串创建中间文件，并且如果您只转义一次，则会出现语法错误。

另请注意，所有 CMake 路径都应使用反斜杠。我将它们转换为：

```
get_filename_component(path_to_plugins"${path_to_plugins}" ABSOLUTE)
file(TO_NATIVE_PATH "${path_to_plugins}" path_to_plugins)
string(REPLACE "\\" "\\\\" path_to_plugins"${path_to_plugins}") 
```

# c++ - VS2010 的 std::shared_ptr 和 boost::shared_ptr 的区别

> ID：10188491
> 
> 赞同：1
> 
> 时间：2012-04-17T09:20:01.797
> 
> 标签：c++, visual-studio-2010, boost, shared-ptr

`std::shared_ptr`VS2010和VS2010 有什么区别`boost::shared_ptr`？

实现几乎相同吗？还是有显着差异？

什么是最有效/优化的？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T12:51:10.927

VS2010 的`shared_ptr`实现符合（或至少试图符合）C++11 标准。

`boost::shared_ptr`另一方面，它是在更早的时候开发的，并且是作为 boost 的一部分而不是 C++ 标准库的一部分。我相信两者对于生产使用都足够有效，但是使用 boost 会迫使你......使用 boost ;)。这在某些情况下是完全不能接受的。

# php - 具有不同时区的 time()

> ID：10188492
> 
> 赞同：1
> 
> 时间：2012-04-17T09:20:06.613
> 
> 标签：php

我如何使用 php time() 获取用户的本地时间，或者还有其他方法可以做到这一点？这意味着它将在他们的时区。

我需要用用户的当地时间计算前时间，这是我为前时间函数找到的一个不错的脚本：

```
<?php
function timeago($time)  
    {  
    $periods = array("second", "minute", "hour", "day", "week", "month", "year", "decade");  
    $lengths = array("60","60","24","7","4.35","12","10");  

    $now = time();

    $difference     = $now - $time;  
    $tense         = "ago";  

    for($j = 0; $difference >= $lengths[$j] && $j < count($lengths)-1; $j++)   
        {  
        $difference /= $lengths[$j];  
        }  

    $difference = round($difference);  

    if($difference != 1)   
        {  
        $periods[$j].= "s";  
        }  

    return "$difference $periods[$j] $tense";  
    }  
?>

<?php

$date = strtotime('2012-04-15 07:41:03');
$datep = timeago($date);

echo $datep;
?> 
```

从上面的脚本中，我使用 time() 但它只获取我的服务器时间而不是我身边的本地时间。我怎样才能得到我的当地时间（用户的当地时间）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T09:27:13.427

我不确定在没有客户端向您传递信息的情况下是否总是可以从服务器获取本地时间 - javascript 就是一个很好的例子。我这样做的方式（不是我的想法，在某处阅读）是使用 javascript 设置本地时间 cookie 并让 PHP 读取 cookie，然后使用 date_default_timezone_set() 使用该数据。我认为这是唯一的防弹答案，对我来说效果很好。

编辑：我从[http://php.net/manual/en/function.localtime.php阅读](http://php.net/manual/en/function.localtime.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T09:21:47.533

最好的方法是客户端。使用 Javascript 的[Date](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date)函数，并将它们发送到 PHP。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T09:27:48.257

没有基于服务器的/PHP 方法来获取本地时间。您必须通过 Javascript 从客户端获取它。谷歌“bitbucket timezone detect”并使用它来设置一个“local_timezone”cookie，您可以从 PHP 读取并通过 date_default_timezone_set() 设置

# meteor - 我可以将节点检查器与流星一起使用吗？

> ID：10188494
> 
> 赞同：0
> 
> 时间：2012-04-17T09:20:07.217
> 
> 标签：meteor, node-inspector

我可以将节点检查器与流星一起使用吗？

我尝试了“--debug”选项，并成功连接调试端口。

但是，无法访问我的代码。

> 执行“$DEV_BUNDLE/bin/node”“--debug”“$METEOR”“$@”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T03:51:22.070

您可能已经像我一样反驳了同样的问题：

在 Linux 机器上，Meteor 脚本会产生两个进程：

*   Process1：节点“流星文件”
*   Process2：节点“你的流星文件”

当您运行时`exec "$DEV_BUNDLE/bin/node" "--debug" "$METEOR" "$@"`，它会在调试模式下生成 process1，但 process2 仍以正常模式运行。这就是您看不到文件的原因。

我只是运行常规流星脚本并发`kill -s USR1`送到 process2 然后你可以在节点检查器中看到你的文件

# java - 如何使用另一场战争中的类文件

> ID：10188495
> 
> 赞同：15
> 
> 时间：2012-04-17T09:20:13.337
> 
> 标签：java, maven, maven-plugin, maven-3

我们有两个不同的 Web 应用程序，我们希望将一场战争的少数控制器扩展到另一场战争。

我们正在使用 maven 来构建项目。

将战争包括在内，我们将其依赖性视为

```
<dependency>
            <groupId>com.abc.exchange</groupId>
            <artifactId>employer</artifactId>
            <version>2.3.M2-SNAPSHOT</version>
            <type>war</type>
            <scope>compile</scope>
        </dependency> 
```

它无法构建未找到异常的类。

任何机构都可以帮助我如何实现这一目标吗？

我收到错误 maven build failed ：

```
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.3.2:compile (default-compile) on project agent-war: Compilation failure: Compilation failure:
[ERROR] \projects\trunk_new\agent\src\main\java\com\platform\agent\web\AgentEmployeeController.java:[22,41] cannot find symbol
[ERROR] symbol  : class EmployeeController
[ERROR] location: package com..platform.employer.web 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-17T10:48:31.033

您可以定义 war 插件以生成一个单独的 jar 文件，该文件可通过基于[配置](http://maven.apache.org/plugins/maven-war-plugin/war-mojo.html)的分类器获得：

```
<configuration>
  ..
  <attachClasses>true</attachClasses>
  <archiveClasses>true</archiveClasses>
</configuration> 
```

之后，您可以在其他项目中将其用作单独的依赖项。但最好用它制作一个单独的 jar 模块。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-17T09:50:47.400

您正在做的是使用[WAR 文件覆盖](https://maven.apache.org/plugins/maven-war-plugin/overlays.html)。Maven 确实支持这一点。然而...

WAR 插件在`package`阶段中执行。在此阶段之前执行的任何插件，例如 Java 编译器（在编译阶段运行），都不会看到 WAR 插件提取的任何文件。（如果有帮助，这里是[所有 Maven 阶段的参考列表）](https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#Lifecycle_Reference)

如果您有能力重构您的项目结构，最好的方法是使用您的控制器创建一个普通的 JAR 项目，并让两个 WAR 将此 JAR 作为依赖项拉入。

如果出于某种原因无法执行此操作，则需要执行以下操作：

1.  将 WAR 插件配置`compile`为`generate-resources`在`${project.build.outputDirectory}`.

2.  您还可以使用 Maven 依赖插件的[解包](https://maven.apache.org/plugins/maven-dependency-plugin/unpack-mojo.html)目标将类从依赖 WAR 提取到`${project.build.outputDirectory}`.

但我确实建议如果可能的话将你的控制器重构为一个单独的 JAR，它更容易且更易于维护。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-17T09:22:21.090

将控制器放入一个新的 jar 项目中，并使您的 webprojects 依赖于该控制器。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-07-02T10:19:05.737

将以下插件添加到您的 share maven war 模块（用于同时创建 war 和 jar 工件）：

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-jar-plugin</artifactId>
            <version>2.4</version>
            <executions>
                <execution>
                    <id>make-a-jar</id>
                    <phase>compile</phase>
                    <goals>
                        <goal>jar</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>       
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-install-plugin</artifactId>
            <version>2.4</version>
            <executions>
                <execution>
                    <phase>install</phase>
                    <goals>
                        <goal>install-file</goal>
                    </goals>
                    <configuration>
                        <packaging>jar</packaging>
                        <artifactId>${project.artifactId}</artifactId>
                        <groupId>${project.groupId}</groupId>
                        <version>${project.version}</version>
                        <file>
                            ${project.build.directory}/${project.artifactId}-${project.version}.jar
                        </file>
                    </configuration>
                </execution>
            </executions>
        </plugin> 
```

然后将依赖项添加到您依赖的 Maven 战争模块。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-17T09:25:09.323

Java EE 可见性标准规定，当将它们打包为 EAR 时，来自一场战争的类不应该可供另一场战争中的类使用。大多数容器都会严格执行这一点。

您应该将希望共享的代码放入 JAR 中，并将其作为依赖项包含在您要使用的战争中。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-04-11T06:49:47.793

在战争项目 pom.xml 中包含

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-war-plugin</artifactId>
        <version>2.1.1</version>
        <configuration>
            <attachClasses>true</attachClasses>
        </configuration>
</plugin> 
```

这将在目标文件夹中创建 your-project-0.0.1-SNAPSHOT-clases.jar 以及战争。

在依赖项目 pom.xml 中包含

```
 <dependency>
        <groupId>com.yourproject</groupId>
        <artifactId>you-project</artifactId>
        <version>0.0.1-SNAPSHOT</version>
        <classifier>classes</classifier>
  </dependency> 
```

这对我有用。希望能帮助到你。

编辑：如果我们只想将一些类文件放入 jar 中，则将其添加到 pom.xml

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-jar-plugin</artifactId>
            <version>2.4</version>
                <executions>
                    <execution>
                        <id>make-a-jar</id>
                        <phase>compile</phase>
                        <goals>
                            <goal>jar</goal>
                        </goals>
                            <configuration>
                                <classifier>classifier_name</classifier>
                                <includes>
                                    <include>com/../..</include>
                                </includes>
                            </configuration>
                    </execution>
                </executions>
     </plugin> 
```

在依赖项目 pom.xml 中包含

```
 <dependency>
        <groupId>com.yourproject</groupId>
        <artifactId>you-project</artifactId>
        <version>0.0.1-SNAPSHOT</version>
        <classifier>classifier_name</classifier>
  </dependency> 
```

注意：两个 pom.xml 文件中的分类器名称必须相同

# jpa - 用 proguard 混淆 JPA 实体

> ID：10188500
> 
> 赞同：1
> 
> 时间：2012-04-17T09:20:32.620
> 
> 标签：jpa, proguard

混淆后我得到以下异常：

```
org.hibernate.AnnotationException: No identifier specified for entity: com.ad.ac.c.a
    at org.hibernate.cfg.InheritanceState.determineDefaultAccessType(InheritanceState.java:268)
    at org.hibernate.cfg.InheritanceState.getElementsToProcess(InheritanceState.java:223)
    at org.hibernate.cfg.AnnotationBinder.bindClass(AnnotationBinder.java:686)
    at org.hibernate.cfg.Configuration$MetadataSourceQueue.processAnnotatedClassesQueue(Configuration.java:3977)
    at org.hibernate.cfg.Configuration$MetadataSourceQueue.processMetadata(Configuration.java:3931)
    at org.hibernate.cfg.Configuration.secondPassCompile(Configuration.java:1368)
    at org.hibernate.cfg.Configuration.buildMappings(Configuration.java:1345)
    at org.hibernate.ejb.Ejb3Configuration.buildMappings(Ejb3Configuration.java:1477)
    at org.hibernate.ejb.EventListenerConfigurator.configure(EventListenerConfigurator.java:193)
    at org.hibernate.ejb.Ejb3Configuration.configure(Ejb3Configuration.java:1096)
    at org.hibernate.ejb.Ejb3Configuration.configure(Ejb3Configuration.java:278)
    at org.hibernate.ejb.Ejb3Configuration.configure(Ejb3Configuration.java:362) 
```

我认为这是因为 Proguard 混淆了实体的 getter 和 setter 并更改了属性名称。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-26T11:17:22.670

这是 JPA 正常工作所需的我的 proguard 配置

```
-keepattributes RuntimeVisibleAnnotations
-keep @javax.persistence.* class * {
   *;
} 
```

它将保持未混淆的所有持久性注释类，并且不会删除任何运行时注释。

# android - 打破 Box2D AndEngine 中两个顶点之间的连接

> ID：10188504
> 
> 赞同：1
> 
> 时间：2012-04-17T09:21:01.123
> 
> 标签：android, box2d, andengine

如何在 AndEngine 的 Box2D Extension 中动态破坏旋转关节。我真的很感激正确和解释性的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T19:10:12.863

该方法`createJoint(jointDef)`返回一个 Joint 对象，您以后可以使用它来销毁关节：`mPhysicsWorld.destroyJoint(revoluteJointdef)`
来源：[http ://www.andengine.org/forums/physics-box2d-extension/destroy-revolutejointdef-t5979.html](https://web.archive.org/web/20140830093816/http://www.andengine.org/forums/physics-box2d-extension/destroy-revolutejointdef-t5979.html)

# html - HTML5 的 W3 验证器

> ID：10188506
> 
> 赞同：1
> 
> 时间：2012-04-17T09:21:14.397
> 
> 标签：html

我一直在为我的 XHTML 过渡网页使用 validator.w3.org 服务，并且对它非常满意 - 它很容易向我显示不正确的语法和未闭合的标签。

然而，我们正在用 HTML5 编写我们的新网站 - 所以 Doctype 自然地变成了 . 因此 w3 验证器将页面验证为 HTML5。我已经使用了一段时间，但只是意识到它不会通知我未关闭的标签。例如，如果我使用

```
<div><p>This is my text and I am not closing this P tag</div> 
```

然后 XHTML 验证器将通知我上述问题，但 HTML5 上的验证并没有告诉我上述问题。有什么办法可以解决这个问题吗？

此外，我一直在自由使用如下代码，如果验证为 XHTML，则会显示以下错误，但如果验证为 HTML(5) 则没有任何问题：

```
 Line 266, Column 51: document type does not allow element "h5" here; missing one of  "object", "applet", "map", "iframe", "button", "ins", "del" start-tag

<a href="/outlet/" title="" rel='nofollow'><h5>OUTLET</h5></a> 
```

我认为上面的（在 A 元素中使用 H5）在 HTML5 上是可以的，但是在意识到 HTML 没有被验证为 XHTML 之后，我很困惑！如果我想按照“良好标准”构建网页——我应该遵循什么标准？我肯定想使用 HTML5，但我还想确保我的代码具有正确的结束标记（如上面的 P 标记示例）并且还遵循任何其他“良好标准”。请指教你会怎么做？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T09:45:46.773

在 xhtml 模式下进行验证时，所有内容都必须符合该规范。另一方面，html5 规范允许很大的自由度。对于这种特定情况，[关于标记语法的 html5 规范](http://dev.w3.org/html5/markup/syntax.html)说：

“一个非 void 元素必须有一个结束标记，除非本参考的 HTML 元素部分中该元素的小节表明它的结束标记可以省略。”

[段落元素](http://dev.w3.org/html5/markup/p.html)的规范说可以省略结束标记，如果它紧随其后的是 div 标签，就像在你的例子中一样。

“如果 p 元素后面紧跟着地址、文章、旁白、块引用、目录、div、dl、字段集、页脚、表单、h1、h2、h3、h4、h5、h6，则可以省略 p 元素的结束标记header、hr、menu、nav、ol、p、pre、section、table 或 ul 元素，或者如果父元素中没有更多内容且父元素不是 a 元素。"

如果你想要那种一致性，我认为你必须编写有效的 xhtml。您可以使用一些可以为您检查结束标签的编辑器吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T15:12:41.693

如果您想使用 W3C HTML 验证器将 URL 上的页面验证为 XHTML，并且该页面具有`<!DOCTYPE html>`其 doctype，那么您**必须**使用 XML mime 类型为该页面提供服务，例如`application/xhtml+xml`验证器。

这是一件好事。只有当您使用这种 mime 类型时，浏览器才会将您的 XHTML 视为 XHTML，否则它们会将其视为 HTML，而您所有细心的 XHTML 都将成为标签汤。在 HTML5 中，验证器现在的行为方式与浏览器相同。

否则，您应该了解什么是 HTML 中的“正确结束标签”。`</p>`这意味着在许多情况下可以省略诸如结束标签之类的东西。

# javascript - 使用 knockout.js 时应该如何定义方法？

> ID：10188507
> 
> 赞同：2
> 
> 时间：2012-04-17T09:21:21.907
> 
> 标签：javascript, oop, data-binding, methods, knockout.js

各种在线的面向对象 JavaScript 教程似乎都建议使用传统的函数语法定义方法，例如：

```
function x(y) { ... } 
```

相当于：

```
x = function (y) { ... } 
```

从那以后，我发现了一些差异——例如，函数名称的绑定点。

我正在使用传统的函数语法定义我的方法，但发现我无法在 knockout.js 中创建“提交”绑定。以下绑定不起作用：

```
 <form id="myForm" action="#" method="get" data-bind="submit: x"> 
```

它报告：

```
Message: ReferenceError: x is not defined; 
```

但是，当我使用非传统的“赋值”函数语法时，它*确实有效。*

谁能解释为什么我不能绑定到使用传统语法的方法？

如果有人知道对不同方法语法之间差异的全面讨论，那可能会很有用。这是一个很难搜索的主题（至少当您不确定官方术语时）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T13:19:24.980

您的意思是您在 View Model 对象中编写了第一个变体，如下所示：

```
var ViewModel = { 
    function x(y) { ... }
} 
```

在这种情况下，此函数不是您的视图模型对象的“属性”，它不能通过敲除绑定。

但是如果您将其指定为对象的一部分，则可以绑定它：

```
var ViewModel = { 
    x(y): function { ... }
} 
```

据我了解，这两个变体之间没有区别，您可以在全局范围内定义一个函数（与任何 JS 对象无关）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T12:37:50.407

`function x(y) { ... }`javascript的使用和使用之间有很大的区别`x = function (y) { ... }`

特别是如果您`this.x = function (y) { ... }`在函数内部定义，您实际上会在函数上创建一个公共方法（OO 术语中的类）。

# css - 如何通过 CSS 选择器选择第一个具有类的子节点？

> ID：10188508
> 
> 赞同：1
> 
> 时间：2012-04-17T09:21:23.567
> 
> 标签：css, css-selectors

> **可能的重复：**
> [第一个元素的 CSS 选择器与类](https://stackoverflow.com/questions/2717480/css-selector-for-first-element-with-class)
> [CSS 选择器选择给定类的第一个元素](https://stackoverflow.com/questions/3615518/css-selector-to-select-first-element-of-a-given-class)

我这里有一个 HTML 结构。

```
<div id = "container">
    <p class = "txt">abc</p>
    <p class = "vs">123</p>
    <p class = "txt">abc</p>
    <p class = "txt">abc</p>
    <p class = "vs">456</p>
</div> 
```

如何通过 CSS 选择器选择第一个类为“vs”的 p 以将字体颜色设置为“红色”？我的意思是期望只有 123 是红色的，但 456 和 abc 是黑色的。

提前致谢。

# smartgwt - RecordList 方法不起作用

> ID：10188510
> 
> 赞同：1
> 
> 时间：2012-04-17T09:21:28.157
> 
> 标签：smartgwt

我必须重新排序**Listgrid**记录。我正在使用以下代码，但每次它都会在以下代码行引发异常：

```
rs.removeAt(idx); 
```

例外 ：： -

```
self.removeAt(pos) is not a function 
```

这是代码：

```
TransferImgButton upFirst = new TransferImgButton(TransferImgButton.UP_FIRST);  
upFirst.addClickHandler(new ClickHandler() {  
    public void onClick(ClickEvent event) {  
       ListGridRecord selectedRecord = myList2.getSelectedRecord();  
       if(selectedRecord != null) {  
          int idx = myList2.getRecordIndex(selectedRecord);  
          if(idx > 0) {  
             RecordList rs = myList2.getRecordList();  
             rs.removeAt(idx);  
             rs.addAt(selectedRecord, 0);  
          }  
       }
    }  
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T05:37:32.493

@dhruva，如果您将**DataSource**用于**ListGrid**，那么您应该使用该**DataSource**从**ListGrid**添加或删除数据。就个人而言，我不喜欢在**RecordList**中添加或删除数据，除非存在某些特定条件或情况。您可以尝试以下方法：

```
grid.getDataSource().addData(record);
grid.getDataSource().removeData(record); 
```

或者

```
grid.addData(record);
grid.removeData(record); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T16:14:06.157

听起来像是陈旧的资源。所以，我建议您在测试之前运行 GWT 编译并清除浏览器缓存。

您使用的是哪个 SmartGwt 版本？

使用每晚构建或 2.4 这是[链接](http://www.smartclient.com/builds/SmartGWT/2.x/LGPL/2011-08-08)。

# django - django 自定义模型字段

> ID：10188511
> 
> 赞同：1
> 
> 时间：2012-04-17T09:21:31.557
> 
> 标签：django, django-models

如果我有 2 个相互关联的模型：

```
class Person(models.Model)
    name = models.CharField()

class Project(models.Model):
    person = models.ForeignKey(Person)
    title = models.CharField() 
```

我经常发现自己试图找到与每个人相关的项目数量：

```
person = Person.objects.get(id=1)
no_projects = Project.objects.filter(person=person).count() 
```

有没有办法将此作为自定义字段添加到 Person 模型中，以便我可以调用`person.no_projects`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T09:45:46.797

事实上，该功能（几乎）是内置的。而不是查询项目，您可以只`person.project_set.count()`获取该人的项目计数（并`.all()`获取实际列表）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-17T09:35:50.897

这可以通过向 Person 类添加一个属性来完成。

```
class Person(models.Model)
    name = models.CharField()

    @property
    def no_projects(self):
        return Project.objects.filter(person=self).count() 
```

现在可以这样调用

```
person = Person.objects.get(id=1)
person.no_projects 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T09:36:25.943

您可以使用 property() 来生成动态场。

 `````
class Project(models.Model):
    person = models.ForeignKey(Person)
    title = models.CharField()

    def _get_no_projects(self):
        return Projects.objects.filter(person=self).count()

    no_projects = property(_get_no_projects) 
````  `但是动态字段不能用于查询，因为它们并没有真正将数据存储到数据库中。

仅供参考：[http ://www.b-list.org/weblog/2006/aug/18/django-tips-using-properties-models-and-managers/](http://www.b-list.org/weblog/2006/aug/18/django-tips-using-properties-models-and-managers/)``

# c# - 读取 XML 响应网络服务

> ID：10188517
> 
> 赞同：-1
> 
> 时间：2012-04-17T09:22:32.523
> 
> 标签：c#, webservice-client

我对.Net Web 服务编程很陌生。我在读取从 Web 服务到客户端的 XML 响应时遇到了麻烦。

在我的网络服务端：Service1.asmx.cs 代码：

```
 [WebMethod(Description = "substruction")]
    public double subtract(double i, double j)
    {
        return i - j;
    }

    [WebMethod(Description = "getxml")]
    public XmlDocument GetXML()
    {
        StringBuilder sb = new StringBuilder();
        XmlWriter writer = XmlWriter.Create(sb);

        writer.WriteStartDocument();
        writer.WriteStartElement("People");

        writer.WriteStartElement("Person");
        writer.WriteAttributeString("Name", "Nick");
        writer.WriteEndElement();

        writer.WriteStartElement("Person");
        writer.WriteStartAttribute("Name");
        writer.WriteValue("Kevin");
        writer.WriteEndAttribute();
        writer.WriteEndElement();

        writer.WriteEndElement();
        writer.WriteEndDocument();

        writer.Flush();

        XmlDocument xmlDocument = new XmlDocument();
        xmlDocument.LoadXml(sb.ToString());
        return xmlDocument;

    } 
```

在这里，我创建了两种方法来测试响应。在 GetXML 中，我创建了一个非常简单的 XML 并将一个包 XML 返回给客户端。

在我的客户端：

```
 // Add button click function 
    protected void Button1_Click(object sender, EventArgs e)
    {
        string selectFlag = selectOper.Value;
        localhost.Service1 web = new localhost.Service1(); // Have to be the same name as youre Service1\. 
        if (selectFlag.Equals("+"))
        {
            Result.Text = (web.addition(double.Parse(Num1.Text), double.Parse(Num2.Text))).ToString();
        }
        else if (selectFlag.Equals("-"))
        {
            Result.Text = (web.subtract(double.Parse(Num1.Text), double.Parse(Num2.Text))).ToString();
        }

    }

    protected void Button2_Click(object sender, EventArgs e)
    {

        localhost.Service1 web2 = new localhost.Service1(); // Can u please do not be so silly, use different instance name here. 
        Button clickedButton = (Button)sender;

        XmlDocument xmltest = new XmlDocument();
        xmltest = web2.GetXML(); 
```

您可以看到我试图让 web2.GetXML() 将整个 XML 放入 XmlDoucment。但是，它说错误 1 ​​无法将类型“object”隐式转换为“System.Xml.XmlDocument”。存在显式转换（您是否缺少演员表？） C:\Documents and Settings\qili\My Documents\Downloads\WebService3\WebService2\WebService2\Default.aspx.cs 39 24 WebService2

任何提示，我想我做错了什么。但是 Buttom1_Click 方法工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T09:26:50.323

尝试转换服务的响应：

```
protected void Button2_Click(object sender, EventArgs e)
    {

     localhost.Service1 web2 = new localhost.Service1(); // Can u please do not be so silly, use different instance name here. 
     Button clickedButton = (Button)sender;
     XmlDocument xmltest = new XmlDocument();
     xmltest = (XmlDocument)web2.GetXML();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-02T07:15:25.197

您应该尝试删除服务引用，重新运行服务，然后在客户端上添加服务引用。

# svn - 在 NetBeans 中撤消 Subversion 提交

> ID：10188521
> 
> 赞同：1
> 
> 时间：2012-04-17T09:22:37.900
> 
> 标签：svn, netbeans

我想撤消我在 NetBeans 中的 Subversion 中的最新提交。我发现，我可以用“svn merge HEAD:oldrev”以某种方式做到这一点，但我对“合并更改”NetBeans 对话框感到困惑。我必须在哪里输入旧版本？有人可以帮忙吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T09:26:15.950

您需要的是还原功能。然后输入等于 HEAD-1 的修订。这会将 repo 返回到给定的版本（在这种情况下，是您提交之前的版本）。

行命令应该是“svn merge -rHEAD:your revision”或者你可以试试“svn commit -m”。

# spring - Autowire 注释不适用于不同的包

> ID：10188526
> 
> 赞同：1
> 
> 时间：2012-04-17T09:23:10.840
> 
> 标签：spring, hibernate, struts2, autowired

我一起使用 spring3、struts2 和 hibernate3。我在 com.top 包中有一个 samplemanager.java 文件，在 net.top 包中有另一个 test.java 文件。在这个 test.java 文件中，我尝试使用 @ 使用 samplemanager.java Autowired.But 它抛出空指针异常任何人都可以告诉我一个解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T20:22:31.283

您必须在应用程序上下文文件中为这两个包配置组件扫描：

```
<context:component-scan base-package="com.top.*, net.top.*" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T12:41:46.750

检查您的 samplemanager 类是否已注释，以及您是否在配置文件中扫描类路径以查找带注释的 bean。如果没有注释，则必须在配置文件中定义 bean。

# type-conversion - Mojo 配置的自定义类型转换器？

> ID：10188534
> 
> 赞同：1
> 
> 时间：2012-04-17T09:23:32.267
> 
> 标签：type-conversion, maven-plugin, mojo, custom-type

`LunarDate`我需要在我的 Mojo 对象中使用自定义类型，例如：

```
class MyMojo extends AbstractMojo {

    /** @parameter */
    LunarDate lunarDate;

} 
```

我想`<configuration>`在 pom.xml 的部分中配置参数。

```
<configuration>
     <lunarDate>丁丑年二月初四&lt;/lunarDate>
</configuration> 
```

（类型`LunarDate`只是一个例子来说明问题）

我已经有了类型转换器，但是如何启用它们呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T12:42:36.617

`DefaultBeanConfigurator`负责使用`DefaultConverterLookup`，它直接实例化它而不使用Plexus Container。

我想你可以在构建扩展中复制和修改它，但是通过注册你的副本`@Component(role=BeanConfigurator.class)`可能没有效果；我过去曾尝试从构建扩展中替换标准 Maven 组件，并在 maven-dev 上被告知这是不可能的。

您可以查找默认值`BeanConfigurator`并使用反射来获取其`ConverterLookup converterLookup`字段，然后`registerConverter`使用您的自定义转换器调用，但这会很脆弱。

最好的办法可能是放弃，将 Mojo 参数声明为 type `String`，然后在`execute`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-05-21T16:03:21.740

我可以通过定义一个 ConfigurationConverter 来解决这个问题（我的目标类型是 AnyLicenseInfo）：

```
@NoArgsConstructor @ToString
public class LicenseConverter extends AbstractBasicConverter {
    private static final Class<?> TYPE = AnyLicenseInfo.class;

    @Override
    public boolean canConvert(Class<?> type) { return type.equals(TYPE); }

    @Override
    public Object fromString(String string) throws ComponentConfigurationException {
        Object object = null;

        try {
            object =
                TYPE.cast(LicenseInfoFactory.parseSPDXLicenseString(string));
        } catch (Exception exception) {
            String message =
                "Unable to convert '" + string + "' to " + TYPE.getName();

            throw new ComponentConfigurationException(message, exception);
        }

        return object;
    }
} 
```

使用自定义 ComponentConfigurator 注册它：

```
@Named("license-mojo-component-configurator")
@NoArgsConstructor @ToString @Slf4j
public class LicenseMojoComponentConfigurator extends BasicComponentConfigurator {
    @PostConstruct
    public void init() {
        converterLookup.registerConverter(new LicenseConverter());
    }

    @PreDestroy
    public void destroy() { }
} 
```

然后在@Mogo 注解中指定配置器：

```
@Mojo(name = "generate-license-resources",
      configurator = "license-mojo-component-configurator",
      requiresDependencyResolution = TEST,
      defaultPhase = GENERATE_RESOURCES, requiresProject = true)
@NoArgsConstructor @ToString @Slf4j
public class GenerateLicenseResourcesMojo extends AbstractLicenseMojo { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-28T17:06:45.677

对于较新的 Maven（使用 Maven 3.3.1 测试），您现在可以子类`BasicComponentConfigurator`化以`DefaultConverterLookup`作为成员变量访问：

```
@Component(role = ComponentConfigurator.class, hint = "basic")
public class ExtendedComponentRegistrator 
        extends BasicComponentConfigurator  
        implements Initializable {

    @Override
    public void initialize() throws InitializationException {
        converterLookup.registerConverter(new MyCustomConverter());
    }
} 
```

然后在 pom.xml 中启用丛元数据的生成：

```
<plugin>
  <groupId>org.codehaus.plexus</groupId>
  <artifactId>plexus-component-metadata</artifactId>
  <executions>
    <execution>
      <goals>
        <goal>generate-metadata</goal>
      </goals>
    </execution>
  </executions>
</plugin> 
```

# linux - Tshark - 不能只显示自定义协议的数据

> ID：10188542
> 
> 赞同：5
> 
> 时间：2012-04-17T09:24:07.593
> 
> 标签：linux, networking, tcp, wireshark, tcpdump

我有一个在端口 8888（不，它不是 http）和 TCP 之上运行的自定义协议。我已经将数据包流捕获到 PCAP 文件中。问题是现在我不能只显示它的数据部分。

我尝试过使用以下命令：

```
tshark -r test.pcap -R 'tcp.port==8888 && tcp.len>0' -T fields -e "tcp.data" 
```

但它显示一个空字符串。**tcp.data**字段不是保存TCP数据包的数据吗？

如何只显示我需要的数据？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T11:54:17.137

Wireshark 中有“分析/跟踪 TCP 流”功能。

只需从数据包列表中选择 TCP 数据包，然后“Follow TCP stream”.... Wireshark 就会显示所选连接的 TCP 会话。

编辑：

`tcp.data`不存在。改用`data.data`：

```
tshark -r mon.pcap -R "(tcp.port == 8888) && (tcp.len > 0)" -T  fields -e data.data 
```

如果wireshark 知道使用端口（8888）的协议，那么前一个将不起作用。但以下技巧有效：

```
tshark -r mon.pcap -R "(tcp.port == 8888) && (tcp.len > 0)" -T  fields -d tcp.port==8888,echo -e echo.data 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T12:20:30.427

好的，我已经编写了一个 python 脚本来完成所需的工作。我知道代码可能会更好一些，但它可以工作，这就是我现在所需要的。

```
#!/usr/bin/python
import subprocess
import sys
import binascii

""" Input arguments. """
if len(sys.argv) != 3 and len(sys.argv) != 4 and len(sys.argv)!= 5:
  print "[*] You didn't specify the right command line arguments."
  print "Usage:\n"
  print "\t"+sys.argv[0]+" <pcap> <port> [<src_ip> <dst_ip>]"
  print
  exit(-1)

args = len(sys.argv)
if args == 3:
  pcap = sys.argv[1]
  port = sys.argv[2]
elif args == 4:
  pcap = sys.argv[1]
  port = sys.argv[2]
  srcip = sys.argv[3]
elif args == 5:
  pcap = sys.argv[1]
  port = sys.argv[2]
  srcip = sys.argv[3]
  dstip = sys.argv[4]

""" Use tshark to read pcap file. """
targs = []
targs.append("tshark")
targs.append("-r"+pcap)
f = "-R (tcp.port=="+port+") && (tcp.len>0)"
if args == 4:
  f=f+" && (ip.src == "+srcip+")"
elif args == 5:
  f=f+" && (ip.src == "+srcip+" and ip.dst == "+dstip+")"
targs.append(f)
targs.append("-Tfields")
targs.append("-edata.data")
p = subprocess.Popen(targs, stderr=subprocess.PIPE, stdout=subprocess.PIPE)

while True:
  """ Read a line of output from the tshark output- """
  out = p.stdout.readline()

  """ Print only non-empty lines."""
  if out != '':
    """ Parse the line appropriately and print printable characters. """
    chars = out.split(':')
    for c in chars:
      if c >= '20' and c <= '7e':
    try:
          cc = binascii.unhexlify(c)
    except:
      pass
    sys.stdout.write(cc)
      else:
        sys.stdout.write('.')
    print

  """ When there is no more data, break out of infinite loop."""
  if out == '' and p.poll() != None:
    break

p.stdout.close() 
```

我们可以用三种不同的方式调用脚本：

第一的：

```
python tshark.py temp.pcap 8888 
```

第二：

```
python tshark.py temp.pcap 8888 "10.1.1.2" 
```

第三：

```
python tshark.py temp.pcap 8888 "10.1.1.2" "10.1.1.3" 
```

# javascript - 在视图 + MVC 上向数组添加元素时出错

> ID：10188543
> 
> 赞同：0
> 
> 时间：2012-04-17T09:24:08.983
> 
> 标签：javascript, asp.net-mvc

**Timeline.js + MVC + JavaScript**

我的视图中有以下代码

```
@{           
    var objs = objstudent.Timelines.Where(x => x.StudentID == Sessions.objStudent.StudentID).AsQueryable();
}
<script type="text/javascript">
@{
    @:var data = [];
    foreach(Student.Models.Timeline student in objs)
    {
         @:data.push({start : new Date "@student.MeetingDate", content : "@student.Description" });
    }
} 
```

在这里，我试图在数据数组中添加详细信息，这些详细信息将用于在时间轴中显示详细信息，但是当我在浏览器中检查数据的值时，它显示我未定义。

我试过使用，但问题是一样的。

任何解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T09:29:56.633

永远不要像这样手动构建 javascript 文字。始终使用正确的序列化程序。例如：

```
@{           
    var objs = objstudent.Timelines.Where(x => x.StudentID == Sessions.objStudent.StudentID).AsQueryable();
}
<script type="text/javascript">
    var data = @Html.Raw(
        Json.Encode(
            objs.Select(x => new 
            { 
                start = x.MeetingDate, 
                content = x.Description 
            })
        )
    );
</script> 
```

最终应该是这样的：

```
<script type="text/javascript">
    var data = [
        { "start": "\/Date(1334655137358)\/", "content": "foo" },
        { "start": "\/Date(1334655137358)\/", "content": "bar" },
        ...
    ];
</script> 
```

请注意，日期时间字段是使用`/Date(Ticks)`格式序列化的。您可以使用[各种技术](https://stackoverflow.com/q/206384/29407)将它们转换为本机 javascript 日期。

# ruby-on-rails - 如何使用带有 Rails AJAX 请求的 Quicksand jQuery 插件？

> ID：10188545
> 
> 赞同：0
> 
> 时间：2012-04-17T09:24:15.847
> 
> 标签：ruby-on-rails, ruby-on-rails-3, jquery, quicksand

我正在尝试使用 Quicksand jQuery 插件来装饰 Rails 中 AJAX 调用的响应：

关联：

```
<% Project.services.each_with_index do |service, index| %>
  <%= link_to_function(service, "regatherProjects('#{service}', #{index})", :id => "service_link_#{index}") %>
  <%= " / " if !index.eql?(Project.services.length - 1) %>
<% end %> 
```

JS：

```
function regatherProjects(service_name, service_id) {
  $.get("/index_project_update", { service: service_name }, function(data) {
    $('#home_projects').quicksand($(data), {
      adjustHeight: 'dynamic'
    });
  });
  $('#home_services').find('a').removeClass("on");
  $('#service_link_' + service_id).addClass("on");
}; 
```

控制器：

```
def index_project_update
  if params[:service] && !params[:service].blank?
    @projects = Project.highlighted.where(:service => params[:service])
  else
    @projects = Project.highlighted
  end
end 
```

看法：

```
$("#home_projects").replaceWith("<%= j(render('projects')) %>") 
```

项目：

```
<div id="home_projects">
  <% if @projects.empty? %>
    <p>No projects. <%= link_to_function("View All", "regatherProjects('')") %>.</p>
  <% else %>
   <ul class="all_projects">
     <% @projects.each_with_index do |project, index| %>
       <li data-id="<%= project.customer.name.underscore.downcase %>_<%= project.name.underscore.downcase %>">
       <%= link_to(image_tag(project.project_images.first.image.home), project) %>
       </li>
     <% end %>
   </ul>
  <% end %>
</div> 
```

我**认为**问题在于 AJAX 请求返回的数据（见下文）不是流沙期望的格式，但我不确定如何从响应中推断相关信息。我的 AJAX 请求的响应类似于：

```
$("#home_projects").replaceWith("<some><html><that><i><need>") 
```

所以，问题是它使用上面的代码作为 Quicksand 调用的目标代码，而它应该使用替换 HTML：

```
<some><html><that><i><need> 
```

AJAX 请求工作得很好，但我需要将流沙集成到这里。

我需要：

*   一个更好的方法来做到这一点，或者；
*   一种在上述代码中推断 replaceWith() 的参数以用作流沙的目标代码的方法。

如果我遗漏了您认为需要帮助的任何信息，请询问。

这是我在 Stack Overflow 上提出的第一个问题，所以我有义务为任何误用道歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T08:23:41.580

如果有人遇到类似的问题，以下在 Chrome、Firefox、IE9、IE8 和 IE7 中对我有用。

关联：

```
<% Project.services.each_with_index do |service, index| %>
  <%= link_to_function(service, "regatherProjects('#{service}', #{index})", :id => "service_link_#{index}") %>
  <%= " / " if !index.eql?(Project.services.length - 1) %>
<% end %> 
```

JS：

```
function regatherProjects(service_name, service_id) {
  $.get("/index_project_update.html", { service: service_name }, function(data) {
    $('.all_projects').quicksand($(data).find('li'), {
      adjustHeight: 'dynamic'
    });
  });
  $('#home_services').find('a').removeClass("on");
  $('#service_link_' + service_id).addClass("on");
}; 
```

路线：

```
match '/index_project_update' => 'application#index_project_update', :defaults => { :format => 'html' } 
```

控制器：

```
def index_project_update
  if params[:service] && !params[:service].blank?
    @projects = Project.highlighted.where(:service => params[:service])
  else
    @projects = Project.highlighted
  end
  render :layout => false
end 
```

看法：

```
<%= render('application/index/projects') %> 
```

项目：

```
<div id="home_projects">
  <% if @projects.empty? %>
    <ul class="all_projects">
      <li data-id="project">No projects. <%= link_to_function("View All", "regatherProjects('')") %>.</li>
    </ul>
  <% else %>
    <ul class="all_projects">
      <% @projects.each_with_index do |project, index| %>
         <li data-id="project_<%= project.id %>">
           <%= link_to(image_tag(project.project_images.first.image.home, :alt => (project.customer.name + " - " + project.name), :title => (project.customer.name + " - " + project.name)), project) %>
         </li>
      <% end %>
    </ul>
  <% end %>
</div> 
```

# android - 在 adb 中将设备置于离线状态

> ID：10188547
> 
> 赞同：1
> 
> 时间：2012-04-17T09:24:20.790
> 
> 标签：android, adb, offline

我有桌面应用程序通过 adb 与 Android 设备通信。有时设备进入离线状态，我的程序无法运行。现在我试图通过以编程方式禁用和启用usb端口来解决它，但不幸的是我无法测试它，因为设备仍然处于在线状态......

是否有可能强制执行设备的离线状态？

# linux - 实时监控工具 Cisco(RTMT) 和 Postfix

> ID：10188550
> 
> 赞同：0
> 
> 时间：2012-04-17T09:24:35.377
> 
> 标签：linux, monitoring, postfix-mta, cisco

我正在尝试针对 Ubuntu 中的 Postfix 邮件服务器配置来自 Cisco 的实时监控工具 (RTMT)。我已经在 RTMT 中使用 Postfix 的 IP 地址配置了邮件服务器选项，并创建了一个警报以将电子邮件发送到 RTMT 中的特定地址。这样做的目的是每次警报响起时我都想收到一封电子邮件。我可以使用 mailutils 命令发送邮件，但无法在 RTMT 和 Postfix 之间进行通信。

有任何想法吗？

这是来自 post fix 的 main.cf 文件。

```
# See /usr/share/postfix/main.cf.dist for a commented, more complete version

# Debian specific:  Specifying a file name will cause the first
# line of that file to be used as the name.  The Debian default
# is /etc/mailname.
#myorigin = /etc/mailname

smtpd_banner = $myhostname ESMTP $mail_name (Ubuntu)
biff = no

# appending .domain is the MUA's job.
append_dot_mydomain = no

# Uncomment the next line to generate "delayed mail" warnings
#delay_warning_time = 4h

readme_directory = no

# TLS parameters
smtpd_tls_cert_file = /etc/ssl/certs/ssl-mail.pem
smtpd_tls_key_file = /etc/ssl/private/ssl-mail.key
smtpd_use_tls = yes
smtpd_tls_session_cache_database = btree:${data_directory}/smtpd_scache
smtp_tls_session_cache_database = btree:${data_directory}/smtp_scache

# See /usr/share/doc/postfix/TLS_README.gz in the postfix-doc package for
# information on enabling SSL in the smtp client.

myhostname = nagiosgp3-desktop
alias_maps = hash:/etc/aliases
alias_database = hash:/etc/aliases
myorigin = /etc/mailname
mydestination = zenossfg3.com, nagiosfg3-desktop, localhost.localdomain, localhost
relayhost = 
mynetworks = 127.0.0.0/8 [::ffff:127.0.0.0]/104 [::1]/128
mailbox_size_limit = 0
recipient_delimiter = +
inet_interfaces = all
home_mailbox = Maildir/
smtpd_sasl_auth_enable = yes
smtpd_sasl_type = dovecot
smtpd_sasl_path = private/dovecot-auth
smtpd_sasl_authenticated_header = yes
smtpd_sasl_security_options = noanonymous
smtpd_sasl_local_domain = $myhostname
broken_sasl_auth_clients = yes
smtpd_recipient_restrictions = reject_unknown_sender_domain, reject_unknown_recipient_domain, reject_unauth_pipelining, permit_mynetworks, permit_sasl_authenticated, reject_unauth_destination
smtpd_sender_restrictions = reject_unknown_sender_domain
mailbox_command = /usr/lib/dovecot/deliver -c /etc/dovecot/conf.d/01-dovecot-postfix.conf -n -m "${EXTENSION}"
smtp_use_tls = yes
smtpd_tls_received_header = yes
smtpd_tls_mandatory_protocols = SSLv3, TLSv1
smtpd_tls_mandatory_ciphers = medium
smtpd_tls_auth_only = yes
tls_random_source = dev:/dev/urandom 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T21:11:45.320

使用当前的 Postfix 设置，您应该能够`user@nagiosfg3-desktop`在以`user`. 但我明白这不是你的目标。

`relayhost`借助SMTP 协议，您必须将 Postfix 设置为简单的卫星。如果有，您应该使用您公司的 SMTP 服务器。

正如您提到的 gmail 目的地，您还可以使用[Google SMTP 服务器](https://support.google.com/mail/bin/answer.py?hl=en&answer=13287)作为中继，这要归功于[SASL 身份验证文档](http://www.postfix.org/SASL_README.html#client_sasl)。由于 Google 需要 TLS/SSL 才能连接到其服务，因此也必须使用[此文档：](http://www.postfix.org/TLS_README.html#client_tls)

```
relayhost = [smtp.gmail.com]:587
smtp_sasl_auth_enable = yes
smtp_sasl_password_maps = hash:/etc/postfix/sasl_passwd
smtp_tls_policy_maps = hash:/etc/postfix/tls_policy 
```

在`/etc/postfix/sasl_passwd`中，您将设置您的 gmail 帐户用户名和密码，以便 Google 允许您的 Postfix 将其服务用作中继：

```
[smtp.gmail.com]  username@gmail.com:yourpassword 
```

以及要包含的文件`/etc/postfix/tls_policy`：

```
[smtp.gmail.com]:587  encrypt protocols=TLSv1 ciphers=high 
```

# eclipse - Eclipse RAP 安装

> ID：10188553
> 
> 赞同：1
> 
> 时间：2012-04-17T09:24:46.503
> 
> 标签：eclipse, eclipse-rap

我是 Eclipse RAP 的新手，我看到这个安装 Eclipse Rap 的方法[http://www.vogella.com/articles/EclipseRAP/article.html](http://www.vogella.com/articles/EclipseRAP/article.html) 但是当我单击启动 RAP 应用程序时，我看到了这个错误

```
HTTP 错误 404
访问 /rap 时出现问题。原因：

    代理服务器：/rap

由码头提供支持：//

```

在控制台中，我看到这个是红色的：

> 2012-04-17 10:27:14.890:INFO:org.mortbay.log:通过
> org.mortbay.log.Slf4jLog 记录到 STDERRorg.mortbay.log 2012-04-17 10:27:15.134:INFO::jetty- 6.1.x 2012-04-17 10:27:15.279:INFO::Started SelectChannelConnector@0.0.0.0:51074

我在浏览器中按 F5 但什么也没有，我更改了端口但什么也没有。我不知道问题是什么。我使用 win7 64 位并将 Eclipse 用于 RCP 和 RAP 开发人员：版本：Indigo Service Release 2 Build id：20120216-1857

我在 Debian 系统上安装了 eclipse，现在看到通常的错误我不明白问题出在哪里？

你能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:31:47.887

我遇到了同样的问题，并在以下 Eclipse 社区论坛帖子中找到了帮助：

[http://www.eclipse.org/forums/index.php/m/987645/?srch=SelectChannelConnector#msg_987645](http://www.eclipse.org/forums/index.php/m/987645/?srch=SelectChannelConnector#msg_987645)

据此，“Eclipse for RCP and RAP development”发行版中的 RAP 版本存在一些问题。[相反，我从http://download.eclipse.org/rt/rap/tools/2.0/](http://download.eclipse.org/rt/rap/tools/2.0/)通过“Help -> Install new software...”下载了 Eclipse classic 并手动安装了 RAP Tools 2.0 。安装这些工具并重新启动 Eclipse 后，欢迎页面现在有一个 RAP 链接，我用于安装和激活 RAP 目标平台。

在这个麻烦之后，我的 RAP 项目成功了。您可能仍会收到 404 错误，但现在刷新页面可以正常工作。我希望这些信息对你有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T11:49:56.750

[错误 282756 - [工具] 浏览器过早打开](https://bugs.eclipse.org/bugs/show_bug.cgi?id=282756)

启动器打开的浏览器有时会过早打开，用户会遇到错误页面。如果你不知道你只需要点击刷新按钮，这会让大多数初次使用的用户感到害怕。

=> 解决方法是按下浏览器上的刷新按钮。

# apache - 使用 apache james 发送邮件时出错

> ID：10188555
> 
> 赞同：1
> 
> 时间：2012-04-17T09:24:52.033
> 
> 标签：apache, jakarta-mail, james

我正在使用 apache james 2.3.2。我去了 telnet localhost 4555 并创建了新用户 test....当我发送邮件时，我收到错误错误消息：553 #5.1.8 发件人地址 test@localhost 的域不存在。请求你帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T02:04:39.993

> Let's add a few users before moving on. To do that, telnet to localhost on port 4555 with the command telnet localhost 4555\. You can log in with the root user name and password. After the login, we'll add a few users.

Looks pretty [simple](http://www.ibm.com/developerworks/java/library/j-james1/index.html).

# php - 在查询中包括排序

> ID：10188556
> 
> 赞同：0
> 
> 时间：2012-04-17T09:25:08.390
> 
> 标签：php, mysql, sql, sorting

我最近添加了一个排序字段，现在我想对结果进行排序。我可以用 PHP 或直接在数据库上做。所以我尝试了第二个：

```
SELECT *
FROM constructions
AS whole
INNER JOIN
(
    SELECT DISTINCT construction
    FROM data
    AS results
    WHERE product =2
    AND application =1
    AND requirement =1
)
ON whole.id = results
ORDER BY whole.sorting 
```

我尝试使用内部连接将完整的表与结果集匹配。但我无法让它工作（`#1248 - Every derived table must have its own alias`）。我尝试使用别名，但仍然有问题。也许我不应该使用内部联接`IN()`来代替使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T09:27:19.667

2个明显的语法错误：

```
SELECT *
FROM constructions
AS whole
INNER JOIN
(
    SELECT DISTINCT construction AS results
    FROM data
    WHERE product =2
    AND application =1
    AND requirement =1
) AS a
ON whole.id = a.results
ORDER BY whole.sorting 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T09:27:28.757

尝试获取这样的数据...

```
 SELECT *
    FROM constructions
    where 
    construction
    in
    (
        SELECT DISTINCT construction
        FROM data
        AS results
        WHERE product =2
        AND application =1
        AND requirement =1
    ) 
```

# jsp - 在哪里放置我的 taglib 声明？

> ID：10188559
> 
> 赞同：6
> 
> 时间：2012-04-17T09:25:12.803
> 
> 标签：jsp, jstl

我有一个 JSP，我将开始使用 JSTL taglib。所以我需要声明它，我按行来做

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %> 
```

但是我把这段代码放在哪里呢？在文件的顶部，在所有内容之前，还是在导入之后？有关系吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T09:33:12.880

通常就在文件的顶部。如果您开始使用多个标记库，您还可以将其移动到单独的包含文件以安全输入。例如

/WEB-INF/jspf/taglibs.jspf

```
<%@ page contentType="text/html;charset=utf8"%>
<%@ taglib uri="http://java.sun.com/jstl/core" prefix="c"%> 
```

/WEB-INF/jsp/index.jsp

```
<%@ include file="/WEB-INF/jspf/taglibs.jspf" %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T09:26:58.280

我通常把它放在任何东西之前，甚至在 <%@ page %> 之前。

生成更清晰的 HTML 代码只是一个小技巧，如下所示：

```
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"
%><%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt"
%><%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"
%><html>
...
</html> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-17T09:28:26.080

您将 taglib 声明放在文件顶部，然后放在其他所有内容之前。

# datatables - 当我在我的数据表中应用过滤器时，它看起来没有样式

> ID：10188560
> 
> 赞同：0
> 
> 时间：2012-04-17T09:25:23.850
> 
> 标签：datatables

当我在我的数据表中应用过滤器时，我调用了在表上加载数据的相同函数，但这次它没有样式、查找框、prev-next 出现......这是我的代码：

```
<script type="text/javascript">
        $(document).ready(function() {
            $('#dataTable').dataTable();
        } );             
        // ----este array vendria de una consulta sql----           
        miArray = [[11,22,33,44,55,"22/11/2012",99,86,99,1010,1111],[11,22,33,44,55,"11/06/2011",77,88,99,1010,1111],[11,22,33,44,55,"11/06/2011",77,88,99,1010,1111],[11,22,33,44,55,"11/06/2011",77,88,99,1010,1111],[11,22,33,44,55,"11/06/2011",77,88,99,1010,1111],[11,22,33,44,55,"11/06/2011",77,88,99,1010,1111],[11,22,33,44,55,"11/06/2011",77,88,99,1010,1111],[11,22,33,44,55,"11/06/2011",77,88,99,1010,1111],[11,22,33,44,55,"11/06/2011",77,88,99,1010,1111]];

        function cargar(miArray){
            document.getElementById("divTabla").innerHTML = ""
            var tabla= "<table name='tabla1' id='dataTable'><thead><tr><th>Tipo de documento</th><th>Tipo de documento</th><th>Tipo de documento</th><th>Codigo de documento</th><th>Descripcion de documento</th><th>Fecha de documento</th><th>Codigo de proveedor</th><th>Descripcion de proveedor</th><th>Importe</th><th>Importe IVA</th><th>Total a pagar</th></tr></thead><tbody>"
                for (i=0;i<miArray.length;i++){ 
                        tabla = tabla + '<tr>'
                    for (j=0;j<miArray[i].length;j++){              
                        tabla = tabla +'<td></td>'                      
                    }   
                    tabla = tabla + '</tr>'     
                }
                tabla = tabla +'</tbody></table>'                   
                document.getElementById("divTabla").innerHTML = tabla               
                h=1
                for (i=0;i<miArray.length;i++){
                    for (j=0;j<miArray[i].length;j++){          
                        document.getElementById("dataTable").rows[h].cells[j].innerHTML = miArray[i][j]         
                    }   
                h++ 
                }       
        }
        function filtroP(){
            arrayP = []
            var h=0;
            for (i=0;i<miArray.length;i++){
                if (miArray[i][6]== document.form1.prov.value){
                    arrayP[h]=miArray[i]
                    h++
                }
            }
            alert(arrayP)
            cargar(arrayP); 
        }               
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T03:38:26.007

`cargar`看起来您在设置时将表拆开并读取它`innerHtml`。如果您直接更改表的结构，您可能需要重新调用 Datatables 为新表重新初始化它。

我不完全确定您的代码应该做什么，但考虑使用数据表中`fnFilter`已有的函数来进行过滤。见[http://datatables.net/api#fnFilter](http://datatables.net/api#fnFilter)

您也可能喜欢`fnDeleteRow` [http://datatables.net/api#fnDeleteRow](http://datatables.net/api#fnDeleteRow)

# jsp - JSP中会话变量的文本框值

> ID：10188563
> 
> 赞同：1
> 
> 时间：2012-04-17T09:25:36.640
> 
> 标签：jsp

我有一个包含 HTML 元素的简单 Jsp 页面，如下所示，

```
<tr id="tr-username">
   <td>Username</td>
   <td><input type="text" id="userName"/></td>
</tr> 
```

我想将用户名文本框的值设置为会话变量。怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T09:47:07.630

您不能从呈现的 JSP 直接设置会话变量中的值。一旦提交了您在 jsp 上的表单，然后在 servlet/controller 中，您可以执行以下操作：

```
 String userName = request.getParameter("userName");
   if(userName!=null && !"".equals(userName){ 
         request.getSession().setAttribute("userName",userName);
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T09:33:03.813

您可以将会话变量设置为：

```
<%
   String name = request.getParameter( "textbox name" );
   session.setAttribute( "theName", name );
%> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T09:39:36.307

```
<%
   String userName = request.getParameter("userName");
   if(userName!=null &&
        !"".equals(userName){ 
         session.setAttribute("userName",userName);
   }
%>
<input type="text" id="userName" name="userName"/> 
```

# c++ - GDB 回溯告诉我符号名称而不是源文件

> ID：10188567
> 
> 赞同：1
> 
> 时间：2012-04-17T09:25:53.567
> 
> 标签：c++, gdb

我有一个问题，我似乎无法使用 GDB 进入某些功能。

我正在使用“PImpl idiom”，其中我的 .cpp 文件中有一个内联类，其中包含从公开可见的类中调用的函数，如下所示：

```
// Foo.cpp

class FooImpl
{
public:
    void open()
    {
        // ...
    }
};

Foo::open()
{
    // Impl is a FooImpl*
    impl->open();
} 
```

使用调试器，我似乎无法进入`FooImpl::open()`.

*   我确定调用不是内联的（我正在使用`-fno-inline`并且我可以`call`在程序集中看到指令）；
*   我可以在函数内部设置一个断点，GDB 可以点击该断点并告诉我它的名称和我所在的函数。
*   但是，它不会告诉我源文件（即使它与 Foo::open() 是同一个文件）
*   我无法进入该功能；当我执行时`step`，它只是跳过调用。

`FooImpl::open()`当我在调用内部的断点上时，这就是我的堆栈跟踪的样子：

```
#0  0x080eee52 in macawi::PowerMateInputImpl::open(std::string) ()
#1  0x080ee766 in macawi::PowerMateInput::open (this=0x83cf204)
    at ../../app/hal/interfaces/powermateinput_linux.cpp:126
#2  0x08137455 in macawi::ActorInput::backgroundLoop (this=0x83cf204)
    at ../../app/common/actors/actorinput.cpp:51 
```

谁能告诉我为什么 GDB 不能确定顶部堆栈帧的源位置，即使它与堆栈帧 #1 在同一个文件中？

（作为记录，我使用的是在后台使用 GDB 的图形调试器（Qt Creator），但是当我直接执行 GDB 时，情况相同）。

* * *

编辑：编译命令行如下所示：

```
g++ -c -pipe -g -O0 -fno-inline -ggdb -fPIC -Wall -W  ...(defines, include dirs, object file, source file) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T16:02:24.900

> 谁能告诉我为什么 GDB 无法确定顶部堆栈帧的源位置，即使它与堆栈帧 #1 在同一个文件中

这是一个错误，无论是在 GDB 中还是在 GCC 中。

不幸的是，您还没有告诉我们您使用的是哪个版本的 GCC 和 GDB，所以我们甚至无法开始猜测您可能需要更新到哪些版本。

尝试构建当前的 GDB 和 GCC。如果仍然失败，请编写一个小型复制器并向 GDB 提交错误（如果结果证明是 GCC 错误，GDB 开发人员会告诉您）。

# java - 握手期间恢复缓存会话时出现 SSLException

> ID：10188568
> 
> 赞同：3
> 
> 时间：2012-04-17T09:25:53.817
> 
> 标签：java, session, exception, encryption, handshake

> **可能重复：**
> [SSL 握手警报：自升级到 Java 1.7.0 后出现 unrecognized_name 错误](https://stackoverflow.com/questions/7615645/ssl-handshake-alert-unrecognized-name-error-since-upgrade-to-java-1-7-0)

我的 J2SE 应用程序使用 HttpsUrlConnection 访问安全位置。在我将 JRE 更新到 1.7 之前，它曾经工作得很好。现在我得到“握手期间远程主机关闭连接”SSLException。在 JRE 1.6 和 JRE 1.7 下使用 -Djavax.net.debug=ssl:handshake 运行应用程序后，我的印象是在 1.7 下缓存的客户端会话无法恢复。

**更新**：我已经了解到，在 JRE 1.6 下，我的客户端应用程序使用 SSLv2Hello 封装。但是在 JRE 1.7 下它不会这样做，这很可能是导致异常的原因。我现在的问题是：如何为在 JRE 1.7 上运行的客户端启用 SSLv2Hello 封装？

**更新#2**：SSLv2Hello 在 JRE 7 上通过 System.setProperty("https.protocols", "TLSv1,SSLv2Hello") 完成。然而，这并没有使握手异常消失。事实证明，异常的真正原因是密码套件。在 JRE 6 上，服务器从客户端的选项中选择 SSL_RSA_WITH_RC4_128_MD5，而在 JRE 7 上，它始终使用 TLS_DHE_RSA_WITH_AES_128_CBC_SHA。由于某种原因，服务器无法使用 TLS_DHE_RSA_WITH_AES_128_CBC_SHA 恢复缓存会话。使用 System.setProperty("https.cipherSuites",SuggestedCipherSuites) 修补的问题，其中SuggestedCipherSuites 始终以 SSL_RSA_WITH_RC4_128_MD5 开头。这种方法有什么缺点吗？

**更新#3**：客户端的 SNI 扩展是困扰服务器的问题。[请参阅http://docs.oracle.com/javase/7/docs/technotes/guides/security/enhancements7.html](http://docs.oracle.com/javase/7/docs/technotes/guides/security/enhancements7.html)上的“JSSE 客户端的服务器名称指示 (SNI)”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T06:40:27.387

最后发现问题与 JSSE 客户端 1.7 中的 SNI 扩展有关。解决方案是在访问 https 位置之前禁用发送 SNI 记录：

```
System.setProperty ("jsse.enableSNIExtension", "false"); 
```

非常感谢 eckes 的解决方案（请参阅[SSL 握手警报：unrecognized_name error since upgrade to Java 1.7.0](https://stackoverflow.com/questions/7615645/ssl-handshake-alert-unrecognized-name-error-since-upgrade-to-java-1-7-0)）。

# java - 在 Java 中将拉丁字符转换为普通文本

> ID：10188575
> 
> 赞同：3
> 
> 时间：2012-04-17T09:26:35.457
> 
> 标签：java

我有以下字符。

Ą¢¥ŚŠŞŤŹŽŻąľśšşťźžżÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏÐÑÒÓÔÕÖØÙÚÛÜÝÞßàáâãääåæçèéêêêêìííîïðñòóôõöøùúûüýÿÿ

我需要转换为

AcYSSSTZZZalssstzzzAAAAAAACEEEEIIIIDNOOOOOOUUUUYTSaaaaaaaceeeeiiiionooooooouuuuyty

我正在使用 Java 1.4。

Normalizer.decompose(text, true, 0).replaceAll("\p{InCombiningDiacriticalMarks}+", ""); 仅用变音符号替换字符。

像 ¢¥ÆÐÞßæðøþ 这样的字符没有被转换。

我该怎么做，在 JDK 1.4 中进行转换的有效方法是什么。

请帮忙。

问候， Sridevi

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-17T09:44:19.037

查看[ICU 项目](http://site.icu-project.org/)，尤其是 icu4j 部分。课程将`Transliterator`解决您的问题。

这是一个`Transliterator`将任何脚本转换为拉丁字符并删除任何重音符号和非 ascii 字符的示例：

```
Transliterator accentsConverter = Transliterator.getInstance("Any-Latin; NFD; [:M:] Remove; NFC; [^\\p{ASCII}] Remove"); 
```

该`Any-Latin`部分执行转换，`NFD; [:M:] Remove; NFC`删除重音符号并`[^\\p{ASCII}] Remove`删除任何剩余的非 ascii 字符。

你只需要打电话`accentsConverter.transliterate(yourString)`就可以得到结果。

[您可以在ICU 转换指南](http://userguide.icu-project.org/transforms/general)中阅读有关如何构建转换 ID（的参数`Transliterator.getInstance`）的更多信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T09:30:50.217

> 我该怎么做，在 JDK 1.4 中进行转换的有效方法是什么。

最有效的方法是使用实​​现为数组或`HashMap`. 但是，当然，您需要填充表格。

> 像 ¢¥ÆÐÞßæðøþ 这样的字符没有被转换。

好吧，这些字符都不是真正的罗马字母，也不能翻译成罗马字母……如果不对语义采取令人发指的自由的话。例如：

*   ¢ 和 ¥ 是货币符号，
*   Æ 和 æ 是连字，在某些语言中代表两个字母，而在其他语言中则是一个不同的字母，
*   ß 是双 s 的德语表示。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-17T09:41:30.190

我会做这样的事情；

针对 Java 1.4 更新（删除了泛型）

```
public class StringConverter {

    char[] source = new char[]{'Ą', '¢', '¥', 'Ś'}; // all your chars here...
    char[] target = new char[]{'A', 'c', 'Y', 'S'}; // all your chars here...
    //Build a map
    HashMap map;

    public StringConverter() {
        map = new HashMap();
        for (int i = 0; i < source.length; i++) {
            map.put(new Character(source[i]), new Character(target[i]));
        }
    }

    public String convert(String s) {
        char[] chars = s.toCharArray();
        for (int i = 0; i < chars.length; i++) {
            chars[i] = map.get(chars[i]);
        }
        return new String(chars);
    }

} 
```

# iphone - 使用 UIBezierPath 绘制画笔可以与 uiview 一起使用，但不能与 uiimageview 一起使用？

> ID：10188577
> 
> 赞同：1
> 
> 时间：2012-04-17T09:26:42.453
> 
> 标签：iphone, uiview, uiimageview, uibezierpath

我正在使用以下代码使用 UIBezierPath 制作画笔。

```
.h File
@interface MyLineDrawingView : UIView
{
    UIBezierPath *myPath;
    UIColor *brushPattern;
}

@end

.m File
-(id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) 
    {
        self.backgroundColor=[UIColor colorWithPatternImage:[UIImage imageNamed:@"0010.png"]];
        myPath=[[UIBezierPath alloc]init];
        myPath.lineWidth=30;
        brushPattern=[UIColor redColor]; 
    }
    return self;
}

- (void)drawRect:(CGRect)rect
{
    [brushPattern setStroke];
    [myPath strokeWithBlendMode:kCGBlendModeNormal alpha:1.0];
   // [myPath strokeWithBlendMode:kCGBlendModeSaturation alpha:1.0];

    // Drawing code
    //[myPath stroke];
}

#pragma mark - Touch Methods
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{   
    UITouch *mytouch=[[touches allObjects] objectAtIndex:0];
    [myPath moveToPoint:[mytouch locationInView:self]];   
}

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *mytouch=[[touches allObjects] objectAtIndex:0];
    [myPath addLineToPoint:[mytouch locationInView:self]];
    [self setNeedsDisplay];

} 
```

它与`UIView`. 正如您在上面看到的自定义类继承自`UIVIew`. 但是当我进行子类`UIImageView`化而不是`UIView`我无法绘制任何东西时。Toches 方法被调用，但它在屏幕上什么也没画。有谁知道这有什么问题或我该如何解决？

我想将其更改为`UIImageView`from的原因`UIView`是我想设置图像并更改颜色。当我使用`UIView`和使用

```
self.backgroundColor=[UIColor colorWithPatternImage:[UIImage imageNamed:@"0010.png"]]; 
```

图像不适合查看。整个图像只有一部分是可见的。即使我将内容模式更改为`UIViewContentModeScaleToFill`整个图像也不可见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T09:43:22.843

从 UIImageView 文档：

> UIImageView 类经过优化，可以将其图像绘制到显示器上。UIImageView 不会调用 drawRect: 一个子类。如果您的子类需要自定义绘图代码，建议您使用 UIView 作为基类。

总之，在 UIImageView 子类中不能使用 drawRect。将图像视图添加为子视图或将图像绘制为 drawRect 的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T09:19:18.483

可以使用以下代码完成：

```
@interface Canvas : UIImageView {
    CGPoint location;
}

@property CGPoint location;
.m file
@synthesize location;

- (void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [touches anyObject];   
    self.location = [touch locationInView:self];    
}

- (void) touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [touches anyObject];
    CGPoint currentLocation = [touch locationInView:self];  

    UIGraphicsBeginImageContext(self.frame.size); 
    CGContextRef ctx = UIGraphicsGetCurrentContext();  
    //CGContextSetBlendMode(ctx, kCGBlendModeOverlay);

    [self.image drawInRect:CGRectMake(0, 0, self.frame.size.width, self.frame.size.height)];
    CGContextSetLineCap(ctx, kCGLineCapRound);
    CGContextSetBlendMode(ctx, kCGBlendModeMultiply);
    CGContextSetLineWidth(ctx, 5.0);
    CGContextSetRGBStrokeColor(ctx, 1.0, 0.0, 0.0, 1.0);
    //CGContextSetBlendMode(ctx, kCGBlendModeOverlay);
    CGContextBeginPath(ctx);
    CGContextMoveToPoint(ctx, location.x, location.y);
    CGContextAddLineToPoint(ctx, currentLocation.x, currentLocation.y);
    CGContextStrokePath(ctx);
    self.image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    location = currentLocation;
}

- (void) touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [touches anyObject];
    CGPoint currentLocation = [touch locationInView:self];

    UIGraphicsBeginImageContext(self.frame.size);
    CGContextRef ctx = UIGraphicsGetCurrentContext();  
  //  CGContextSetBlendMode(ctx, kCGBlendModeOverlay);

    [self.image drawInRect:CGRectMake(0, 0, self.frame.size.width, self.frame.size.height)];
    CGContextSetBlendMode(ctx, kCGBlendModeMultiply);
    CGContextSetLineCap(ctx, kCGLineCapRound);
    CGContextSetLineWidth(ctx, 5.0);
    CGContextSetRGBStrokeColor(ctx, 1.0, 0.0, 0.0, 1.0);
    CGContextBeginPath(ctx);
    CGContextMoveToPoint(ctx, location.x, location.y);
    CGContextAddLineToPoint(ctx, currentLocation.x, currentLocation.y);
    CGContextStrokePath(ctx);
    self.image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    location = currentLocation;     
} 
```

# c - 没有足够的存储空间来处理这个命令

> ID：10188580
> 
> 赞同：0
> 
> 时间：2012-04-17T09:26:53.567
> 
> 标签：c, memory-management

我正在递归调用一个函数，它在每次调用中分配 2048 个字节。在开始时，应用程序按要求运行，但后来由于给出错误“没有足够的存储空间来处理此命令”而崩溃. 并且内存分配器返回错误的内存指针，应用程序正在崩溃。任何人都可以在这个问题上帮助我。

```
char* parser(char *data){
   char *string,*ptr,*result;
   int len;

   len=strlen(data);
   ptr=strstr(data,"search");

   if(ptr){
    buf = (char *)GlobalAlloc(GPTR,sizeof(char)*len+1);
    strncpy(buf,data,ptr-data);
    buf[ptr-data]='\0';
    result=parser(buf); 
    GlobalFree(buf);
    return result;
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T09:32:51.093

嗯......这很明显：

不要多次调用该函数，也不要在不再需要时立即释放使用的内存。如果调用完成的分配都需要同时（一旦递归完成），那么你就不走运了，需要：

*   购买更多内存，
*   找出更紧凑的表示，
*   将求解分成更小的步骤。

# php - Javascript 评估 HTML 特殊字符，中断 AJAX 结果中的函数调用

> ID：10188583
> 
> 赞同：1
> 
> 时间：2012-04-17T09:27:13.537
> 
> 标签：php, javascript, ajax, forms

我一直在为我正在构建的站点/工具进行自定义表单完成工作。

我让搜索工作，它在输入字段下方的一个小 div 中显示结果。我想让用户查看结果，单击相应的结果，并允许它使用相应的数据填充表单字段。这在数据中没有特殊字符（即撇号）时有效，但如果它有撇号，则函数调用会中断。我非常了解将特殊字符更改为 HTML 特殊字符：

```
&#39; 
```

而且，我在将数据添加到数据库时已经这样做了。问题是，由于函数调用是通过 AJAX 放入 div 中的，因此 HTML 特殊字符在放入页面时会被“评估”，并成为文字字符。下面是一个函数调用的例子：

```
onclick="popForm('1234', 'Some Name', 'Another Name', 'Someguy's Thing', '5678')" 
```

这是我正在尝试做的所有事情的清单：

1.  用户在字段中输入数据
2.  一个 javascript 函数通过 onkeyup() 捕获输入，并对其进行处理
3.  该函数使用 AJAX 调用 PHP 脚本
4.  PHP 脚本执行搜索，获取结果，并回显一个包含结果的表，以及用于填充字段的 onclick 函数调用。
5.  Javascript 处理来自 AJAX 的结果，并将结果添加到 div 的 innerhtml。
6.  用户单击结果，触发 onclick，使用单引号括起来的字符串参数进行函数调用
7.  函数通过 document.getElementById("fieldname").value=string 将字符串添加到适当的字段中；
8.  用户提交表单

目前，由于函数调用中的文字撇号，我们一直到第 6 步，这是它中断的地方。

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T10:06:56.693

我会认真考虑重写你的逻辑。

1.  不要使用内联 DOM0 事件处理程序——正是由于这种原因，它们很容易出错
2.  返回数据，而不是函数调用 -`eval`不好，mkay？
3.  将适当的事件处理程序（理想情况下使用`element.addEventListener`）绑定到动态创建并附加到适当元素的一流函数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T09:44:10.953

您可以用`preg_replace`“escape_quote”之类的特殊字符串替换php脚本中的所有单引号（在步骤5之前），然后在您的函数中用单引号`popForm`替换“escape_quote”。`.replace`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T09:56:23.147

您需要转义传递给带有撇号的 javascript 函数的数据。

```
onclick="popForm('1234', 'Some Name', 'Another Name', 'Someguy\'s Thing', '5678')" 
```

# less - LESS CSS：选择器替换？

> ID：10188588
> 
> 赞同：3
> 
> 时间：2012-04-17T09:27:22.303
> 
> 标签：less

这是现有的通用 css 规则（**原始文件**）：

```
.caption-top {
  color: red;
} 
```

这是示意性的，因为在现实生活中，我需要`.caption-top`选择器变成别的东西，这取决于上下文。但我想使用一个变量而不是更改所有出现的选择器。例如，在一种情况下，它应该变成`.field-name-field-caption-top`. 所以我这样做了（**包装文件**）：

```
@caption-top:  .field-name-field-caption-top;
@caption-top {
  color: red;
} 
```

这会产生一个 LESS 解析错误。是否有另一种方法来建立替换选择器的规则？因此，对于上面的示例，规则最终将如下所示：

```
.field-name-field-caption-top {
  color: red;
} 
```

**附加信息**

重点是不要触及原始的 css 文件，因为它来自外部并且会被覆盖，而是包装它并告诉 Less 如何用特定主题中使用的类替换现有的类。如果无法实现，那么可接受的解决方案是以自动方式更改原始文件，例如将所有出现的“.caption”替换为“@caption”（我在上面的代码示例中建议）或制作开头的导入等。然后使用包装器 Less 文件（知道主题实现）来指定应该用什么替换哪些类。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T16:23:35.060

您可以使用转义来实现此目的：

```
@selector: '.myclass';

(~'@{selector}') {
    color: red;
} 
```

但是你不能这样做：

```
(~'@{selector}') .another {
    color: red;
} 
```

要实现上述目标，您需要更改变量

```
@selector: '.myclass .another'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-05T13:51:19.377

You need to produce a function of two arguments that generates the desired CSS:

```
.generator(@fieldName, @fieldCaption) {
  .@{fieldName}-@{fieldCaption}-top {
    color: red;
  }
}
.generator(foo, bar); 
```

(Feel free to try this in the [online less compiler](http://leafo.net/lessphp/#demo))

This piece of code produces the desired CSS for elements with name "foo" and caption "bar". You just need to make more calls to the `.generator` function with different arguments to obtain what you need.

If this does not correspond to what you need, please provide one additional example of your desired CSS output.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T13:12:50.813

看起来mixins是你需要的：

```
.caption-top {
    color: red;
}
.field-name-field-caption-top {
    .caption-top
} 
```

您可以定义一个使用或不使用的类，然后您可以在其他选择器中一次又一次地引用它。您甚至可以将它们与新样式结合起来，从而扩展原始 CSS 块的功能：

```
.field-name-field-caption-bottom {
    font-size: 3em;
    .caption-top
} 
```

在编译器中试一试！

# php - 自定义简码始终显示在内容顶部

> ID：10188594
> 
> 赞同：1
> 
> 时间：2012-04-17T09:27:50.300
> 
> 标签：php, wordpress, function, shortcode

我已经创建了一个自定义简码，并且可以获取要输出的信息，但是它没有显示在我将其放置在内容层次结构中的位置 - 它始终打印在帖子/页面的顶部。关于为什么会发生这种情况的任何线索？

在我的functions.php中：

```
function sc_pdf($atts, $content = null) {
   $pdfname = the_field('pdf_title');
   $pdfimage = the_field('pdf_file');
   $pdflink = the_field('pdf_thumbnail');
   return '<p>'.$pdfname.'</p><p>'.$pdfimage.'</p><p>'.$pdflink.'</p>';
}
add_shortcode("peedeef", "sc_pdf"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T10:01:07.783

由于您使用的是 the_field 方法，我假设您使用 ACF 插件。

您应该使用`get_field`而不是`the_field`因为`the_field`将输出指定的字段。

```
function sc_pdf($atts, $content = null) {
   $pdfname = get_field('pdf_title');
   ... etc 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-07T12:36:14.337

***要移动您的简码，请不要使用 echo。*** 如果您在第一个示例中将短代码放在文档中，它将始终浮动到顶部。第二个如果我把它放在底部，它会出现在底部。

我的简码是 [showpod]

**不能放在任何地方的代码**

```
function makepod($atts) {
echo "<div class='podmysqlarray2 showpodholder'><h3 class='widget-title newposts'>Latest Snippets</h3>";
$args = array( 'numberposts' => '6' );
$recent_posts = wp_get_recent_posts( $args );
foreach( $recent_posts as $recent ){
echo '<div class="pod"><li><a href="' . get_permalink($recent["ID"]) . '" title="Look '.esc_attr($recent["post_title"]).'" >' .   $recent["post_title"].'</a> </li> </div>';
}
echo "</div>";
}
add_shortcode('showpod', 'makepod'); 
```

**现在修改后的代码可以放在任何地方：-**

```
function makepod($atts) {
$cat = "<div class='podmysqlarray2 showpodholder'><h3 class='widget-title newposts'>Latest Snippets</h3>";
$args = array( 'numberposts' => '6' );
$recent_posts = wp_get_recent_posts( $args );
foreach( $recent_posts as $recent ){
$cat.= '<div class="pod"><li><a href="' . get_permalink($recent["ID"]) . '" title="Look '.esc_attr($recent["post_title"]).'" >' .   $recent["post_title"].'</a> </li> </div>';
}
$cat .= "</div>";
return $cat;
}
add_shortcode('showpod', 'makepod'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-25T10:18:16.083

始终使用“return”而不是 echo。

您将能够在适当的位置获取数据。

# python - PyOpenGL TypeError：“NoneType”对象不可调用

> ID：10188595
> 
> 赞同：17
> 
> 时间：2012-04-17T09:27:55.643
> 
> 标签：python, pyopengl

我正在尝试学习游戏编程的基础知识，`pygame`并且`pyopengl`为此进行了安装。

我的代码：

```
import sys
import OpenGL

from OpenGL.GL import *     
from OpenGL.GLU import *    
from OpenGL.GLUT import *

def draw():
      glClear(GL_COLOR_BUFFER_BIT)
      glutWireTeapot(0.5)
      glFlush()

glutInit(sys.argv)
glutInitDisplayMode(GLUT_SINGLE | GLUT_RGB)
glutInitWindowSize(250, 250)
glutInitWindowPosition(100, 100)
glutCreateWindow("Python OGL Program")
glutDisplayFunc(draw)
glutMainLoop()

draw() 
```

当我在命令提示符下运行上述代码时，使用

```
python test.py 
```

我收到以下错误。

```
Traceback (most recent call last):
  File "test.py", line 13, in <module>
    glutInit(sys.argv)
  File "C:\Python27\lib\site-packages\pyopengl-3.0.2a5-py2.7.egg\OpenGL\GLUT\special.py", line 324, in glutInit
    _base_glutInit( ctypes.byref(count), holder )
TypeError: 'NoneType' object is not callable 
```

我不明白为什么我会收到这个错误。我打电话`glutinit`的方式不对吗？

我正在使用 Python 2.7.2。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-29T10:59:28.550

我在 Windows 7 64 位上使用 Python 2.7.3 并且遇到了导致与 Noob 相同的症状的问题。

但是上面的 PyOpenGL 重新安装解决方案并没有帮助我。

我尝试了一个远射 - 安装 freeglut - 它有帮助！

[我从这里](http://www.transmissionzero.co.uk/software/freeglut-devel/)使用了 Windows MSVC 2.8.0 二进制包，并相应地将 32 位和 64 位 DLL 放到了我的 32 位 (c:\Windows\SysWOW64) 和 64 位 (C:\Windows\System32) 目录中。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-27T23:04:25.813

我使用 setup.py 安装（具有管理员权限）在**Python 3.2上安装了****PyOpenGL-3.0.2b2**，它出现与 OP 相同的错误。安装脚本没有复制 DLLS 文件夹，因此您必须自己复制整个文件夹**\PyOpenGL-3.0.2b2\OpenGL\DLLS**。 这对我有用，希望对其他人有帮助。

 ***** * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-13T11:39:18.143

在 linux 操作系统中，您应该 在 ubuntu 12.04 中安装**freeglut3 ：**

```
 sudo apt-get install freeglut3 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-23T14:24:48.623

我也发生了同样的问题。我在 windows xp 32 位上使用 Python 2.7。

解决方案：

只需从[http://user.xmission.com/~nate/glut.html](http://user.xmission.com/~nate/glut.html)下载**glut-3.7.6-bin.zip**，解压缩，将**glut32.dll**放在**C:\windows\system32**中就可以了。

 ***** * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-06-29T12:38:49.780

看来必须与 pyOpenGL 一起下载 glut 或 freeglut。最重要的是，在我的 64 位 Win7 系统上，它只有在我将`glut32.dll`文件放入后才起作用`C:\Windows\System`（不是`C:\Windows\System32`- 放入`\System32`不起作用！）

这是 glut 的链接：http: [//user.xmission.com/~nate/glut.html](http://user.xmission.com/~nate/glut.html)

和freeglut：[http ://www.transmissionzero.co.uk/software/freeglut-devel/](http://www.transmissionzero.co.uk/software/freeglut-devel/)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-04-17T09:58:52.040

`glutInit()`需要 2 个参数，首先是一个 int 作为命令行参数的数量，然后是一个列表（参数）。
`glutInit(len(sys.argv),sys.argv)`应该这样做，因为`argc`模块 sys.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-21T11:03:38.010

问题出在我的`PyOpenGL`安装上。之前我使用`easy_install`.

因此，正如@Ferdinand 建议的那样，您的 pyopengl 安装似乎有问题。

我使用`python setup.py install`它进行了全新安装，并且可以正常工作。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-07-11T05:58:06.407

我对 python 2.7 64 位窗口有类似的问题。[从http://www.lfd.uci.edu/~gohlke/pythonlibs/](http://www.lfd.uci.edu/~gohlke/pythonlibs/)安装 pyOpenGL 包。非常感谢 Christopher Gohlke 的维护！！

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-14T08:52:53.317

我只是在 windows-64bits 上使用 python2.7.3，我遇到了问题。我通过使用非官方的 pyopengl 包解决了这个问题。从文章来看，似乎官方包不支持 64 位窗口。 [http://codeyarns.com/2012/04/27/pyopengl-installation-notes-for-windows/](http://codeyarns.com/2012/04/27/pyopengl-installation-notes-for-windows/)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-04-02T19:46:45.763

这似乎是 PyOpenGL win32 安装程序中的一个错误。它应该从源包 (.zip) 中复制 DLLS 目录，但在我的测试中没有这样做。这应该在 PyOpenGL 本身中解决，我将在下一个测试版中这样做。

同时，您可以将 OpenGL/DLLS 目录从 PyOpenGL 3.1.0b2 源 .zip 复制到您的 site-packages/OpenGL 目录中，以安装 GLUT 和 GLE DLL，而无需将它们安装到您的系统目录中。********

# gdb - 如何在 GDB 的帮助下获取程序的整个跟踪列表？

> ID：10188598
> 
> 赞同：0
> 
> 时间：2012-04-17T09:28:13.070
> 
> 标签：gdb, trace

我想获得我的程序“./myprog”的完整跟踪列表 - 我有 GDB 7.0-ubuntu（我的架构的新版本不存在）。我的 GDB 脚本（“./trace_list.gdb”）：

```
gdb -q -x ./trace_list.gdb 

file ./myprog
set print address off
display/x $r0
display/x $r1
display/x $r2
display/x $r3
display/x $r4
display/x $r5
display/x $r6
display/x $r7
display/x $r8
display/x $r9
display/x $r10
display/x $r11
display/x $r12
display/x $sp
display/x $lr
display/x $fps
b *0x323d0
set logging on
run
while 1
x/i $pc
ni
end
quit 
```

它在某些时候效果很好。然后写道：

```
"./trace_list.gdb":26: Error in sourced command file:
Cannot access memory at address 0x6b980000 
```

并且不会进一步执行。

为什么会出现这个错误？我应该怎么做才能获得我的程序的整个跟踪列表？可能我应该使用其他工具吗？我没有任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T03:41:29.460

> 无法访问地址 0x6b980000 处的内存 为什么会出现此错误？

该错误意味着 GDB 试图访问内存`0x6b980000`，但不能（它告诉了你很多 ;-)

很可能你的目标处理器（它是哪个处理器？）缺少硬件单步（或者 GDB 不知道如何使用它），所以为了执行`ni`，GDB 在它认为是下一条指令的地方设置了一个临时断点。如果 GDB 犯了错误，或者如果指令在 GDB 无法写入的内存中（例如内核的一部分），那么您就输了。

> 我应该怎么做才能获得我的程序的整个跟踪列表？

整个跟踪在实践中很少有用——指令太多，单步执行的开销太大。也许您应该放弃这种方法，而改用[分而治之的调试](http://books.google.com/books?id=jynA9ECbBsgC&pg=PA67&source=gbs_toc_r&cad=4#v=onepage&q&f=false)方式？

更新：

> “整个跟踪在实践中很少有用”——即使程序被混淆了？

是的，尤其是在程序被混淆的情况下。

该程序也可以使用反调试技术。制作一个在调试器下表现不同的程序非常简单，您可能会花费数小时查看与实际程序操作无关的整个跟踪：

```
if (running_under_debugger()) {
  compute_one_million_digits_of_pi();
} else {
  do_something_useful();
} 
```

# c# - 缺少网络发送/接收

> ID：10188603
> 
> 赞同：0
> 
> 时间：2012-04-17T09:28:27.540
> 
> 标签：c#, winforms, networking, performancecounter

我在这里关注答案：

[计算带宽](https://stackoverflow.com/questions/442409/c-bandwidth)

并按照他说的执行了一切。我的显示器是这样初始化的：

```
netSentCounter.CategoryName = ".NET CLR Networking";
netSentCounter.CounterName = "Bytes Sent";
netSentCounter.InstanceName = Misc.GetInstanceName();
netSentCounter.ReadOnly = true; 
```

我可以正确地看到`Misc.GetInstanceName()`返回“MyProcessName [id]”。但是，我不断收到实例在指定类别中不存在的异常。

我的理解是，在您实际发送或接收之前，不会创建净发送/接收的类别。

我已经按照答案中的描述添加了 app.config，如下所示：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <system.net>
        <settings>
            <performanceCounters enabled="true" />
        </settings>
    </system.net>
</configuration> 
```

为什么我仍然收到错误消息？

这是我的监控代码：

```
public static class Monitoring
{
    private static PerformanceCounter netSentCounter = new PerformanceCounter();

    //Static constructor
    static Monitoring()
    {
        netSentCounter.CategoryName = ".NET CLR Networking";
        netSentCounter.CounterName = "Bytes Sent";
        netSentCounter.InstanceName = Misc.GetInstanceName();
        netSentCounter.ReadOnly = true;
    }

    /// <summary>
    /// Returns the amount of data sent from the current application in MB
    /// </summary>
    /// <returns></returns>
    public static float getNetSent()
    {
        return (float)netSentCounter.NextValue() / 1048576; //Convert to from Bytes to MB
    }
} 
```

还有我的杂项课：

```
public static class Misc
{

    //Returns an instance name
   internal static string GetInstanceName()
    {
        // Used Reflector to find the correct formatting:
        string assemblyName = GetAssemblyName();
        if ((assemblyName == null) || (assemblyName.Length == 0))
        {
            assemblyName = AppDomain.CurrentDomain.FriendlyName;
        }
        StringBuilder builder = new StringBuilder(assemblyName);
        for (int i = 0; i < builder.Length; i++)
        {
            switch (builder[i])
            {
                case '/':
                case '\\':
                case '#':
                    builder[i] = '_';
                    break;
                case '(':
                    builder[i] = '[';
                    break;

                case ')':
                    builder[i] = ']';
                    break;
            }
        }
        return string.Format(CultureInfo.CurrentCulture,
                             "{0}[{1}]",
                             builder.ToString(),
                             Process.GetCurrentProcess().Id);
    }

    /// <summary>
    /// Returns an assembly name
    /// </summary>
    /// <returns></returns>
    internal static string GetAssemblyName()
    {
        string str = null;
        Assembly entryAssembly = Assembly.GetEntryAssembly();
        if (entryAssembly != null)
        {
            AssemblyName name = entryAssembly.GetName();
            if (name != null)
            {
                str = name.Name;
            }
        }
        return str;
    }
 } 
```

编辑：我已经从 Windows 中打开了资源监视器以查看问题所在。尽管将 app.config 设置为这样做，但计数器并未启动。

这是我看到的（在我的应用程序发送网络活动之前和之后）

![在此处输入图像描述](../Images/b85723e43d712759041e3c23da4894eb.png)

并且名称不是我的方法返回的名称。我的方法返回“SuperScraper [appId]”，而在资源中它被称为“Superscraper.vshost.exe”。

所以我现在有两个问题：

-我的计数器没有在应用程序启动时启动 -名称是不同的

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T16:44:30.560

好的，我终于想通了。列出的“[计算带宽](https://stackoverflow.com/questions/442409/c-bandwidth)”步骤似乎已过时，对 .Net 4 不再有效。

我将解释整个过程，以便您也可以这样做。

首先，您需要将其添加到您的 app.config 中：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <system.net>
        <settings>
            <performanceCounters enabled="true" />
        </settings>
    </system.net>
</configuration> 
```

在 .Net 4.0 之前，这使应用程序在启动时创建计数器（而不是例如，在应用程序发送请求时创建网络计数器）。在 .Net 4.0 中，这告诉它在使用计数器时创建计数器。IE。如果您不设置此项，则不会创建任何计数器。

现在这是我浪费大部分时间的地方。我的假设是错误的，即如果您创建一个与自然创建时具有相同名称的性能计数器，您将获得这些值。然而，所有这一切都是阻止真正的计数器出现。

所以这样做：

```
//In .Net 4.0 the category is called .NET CLR Networking 4.0.0.0 and not .NET CLR Networking
netSentCounter.CategoryName = ".NET CLR Networking 4.0.0.0";
netSentCounter.CounterName = "Bytes Sent";
netSentCounter.InstanceName = Misc.GetInstanceName();
netSentCounter.ReadOnly = false; //<==
netSentCounter.RawValue = 0;     //<== 
```

简单地阻止真正的计数器。

您需要做的是以自然的方式启动它。最好的方法是在应用程序启动时简单地发送一个欺骗请求，然后使用以下命令“监听”性能计数器：

```
//Send spoof request here
netSentCounter.CategoryName = ".NET CLR Networking 4.0.0.0";
netSentCounter.CounterName = "Bytes Sent";
netSentCounter.InstanceName = Misc.GetInstanceName();
netSentCounter.ReadOnly = true; 
```

最后一点。实例名称不再是`ApplicationName[appId]`。现在它是：

`[ApplicationName]`.exe_p `[appId]`_r `[the CLR id hosting your application]`_ad`[ApplicationDomain]`

希望这可以节省一些时间！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T12:52:45.983

好的，我尝试了您的示例。我还遇到了性能监视器中没有显示的计数器，但是在我更改`ReadOnly`和设置`RawValue`属性后它确实出现了：

```
netSentCounter.CategoryName = ".NET CLR Networking";
netSentCounter.CounterName = "Bytes Sent";
netSentCounter.InstanceName = Misc.GetInstanceName();
netSentCounter.ReadOnly = false; //<==
netSentCounter.RawValue = 0;     //<== 
```

就我而言，我发现性能监视器中的实例名称采用以下格式：`myapplicationname_pPID`

因此，在我更改了您的 GetInstanceName 方法行之后

```
return string.Format(CultureInfo.CurrentCulture,
                         "{0}[{1}]",
                         builder.ToString(),
                         Process.GetCurrentProcess().Id); 
```

至

```
return string.Format(CultureInfo.CurrentCulture,
                     "{0}_p{1}",                
                     builder.ToString().ToLower(), //<== dont miss ToLower()
                     Process.GetCurrentProcess().Id); 
```

计数器看起来开始工作了。

这是参考如何[添加和删除计数器实例](http://msdn.microsoft.com/en-us/library/8t39y5k1%28v=vs.71%29.aspx)

还可以考虑`netSentCounter.RemoveInstance()`在使用完后删除（）计数器。

# c# - 客户端 HTTP 处理和 ETag

> ID：10188606
> 
> 赞同：0
> 
> 时间：2012-04-17T09:28:48.137
> 
> 标签：c#, silverlight, caching, rest

我正在开发一个小型 SilverLight 应用程序，它使用 WebClient 请求 REST 服务。根据这个：

[http://msdn.microsoft.com/en-us/library/dd920295(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/dd920295(v=vs.95).aspx)

使用“客户端 HTTP”处理时不应该有缓存......

我正在调用的 REST 服务使用 ETag，因此在没有缓存的情况下，我不希望对我的服务的第二次调用会包含 If-None-Match 标头？

另外，当REST服务返回'304'（NotModified）时，我仍然得到一些数据，表明数据是从缓存中返回的......

REST 服务还将“Vary”标头设置为“Accept”（以便在生成缓存密钥时应考虑 Accept 标头），但似乎这不起作用....

所以我有点迷茫，不管缓存是否存在......似乎它已经到了一半......

有人可以澄清吗？？

TIA

索伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T21:04:11.713

我建议不要在 WCF 服务上使用 ETags。在 IIS 中，服务或包含该服务的目录需要包含一个 HTTP 响应标头，将内容设置为立即过期，这样就不可能在客户端进行缓存。这样，对服务的调用将不会导致来自服务器的 HTTP 304 响应。

# utf-8 - Informix 4GL 在设置 UTF8 时忽略窗口边框

> ID：10188611
> 
> 赞同：1
> 
> 时间：2012-04-17T09:28:56.560
> 
> 标签：utf-8, informix, 4gl

谁能解释一下？有解决办法吗？RHEL/CentOS 上的 Informix 4GL RDS 7.50.UC3

```
$ fglpc test
$ fglgo test

   1 ++++X+++++++++X+++++++++X+++++++++X+++++++++X
   2 ++++X+++++++++X+++++++++X+++++++++X+++++++++X
   3 ++++X+++++++++X+++++++++X+++++++++X+++++++++X
   4 +++┌────────────────────┐+++++++++X+++++++++X
   5 +++│exit?               │+++++++++X+++++++++X
   6 +++│                    │+++++++++X+++++++++X
   7 +++│                    │+++++++++X+++++++++X
   8 +++│                    │+++++++++X+++++++++X
   9 +++└────────────────────┘+++++++++X+++++++++X
  10 ++++X+++++++++X+++++++++X+++++++++X+++++++++X
  11 ++++X+++++++++X+++++++++X+++++++++X+++++++++X
…    
$ export CLIENT_LOCALE=en_US.utf8
$ fglgo test

   1 ++++X+++++++++X+++++++++X+++++++++X+++++++++X
   2 ++++X+++++++++X+++++++++X+++++++++X+++++++++X
   3 ++++X+++++++++X+++++++++X+++++++++X+++++++++X
   4 ++++X+++++++++X+++++++++X+++++++++X+++++++++X
   5 ++++exit?               X+++++++++X+++++++++X
   6 ++++X+++++++++X+++++++++X+++++++++X+++++++++X
   7 ++++X+++++++++X+++++++++X+++++++++X+++++++++X
   8 ++++X+++++++++X+++++++++X+++++++++X+++++++++X
   9 ++++X+++++++++X+++++++++X+++++++++X+++++++++X
  10 ++++X+++++++++X+++++++++X+++++++++X+++++++++X
  11 ++++X+++++++++X+++++++++X+++++++++X+++++++++X
  … 
```

这是代码

```
$ cat test.4gl

main
  define
    i smallint,
    b char(75),
    c char
  let b = "++++X+++++++++X+++++++++X+++++++++X+++++++++X"
  for i = 1 to 24
    display i using "#### ", b clipped at i,1
  end for
  open window test_win at 5,10 with 4 rows, 20 columns
    attributes(border)
  prompt "exit?" for char c
  close window test_win
end main 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T09:35:43.077

糟糕，这是我从 OpenServer 5 上的 4GL 4.0 继承的旧自定义 termcap

```
$ export TERMCAP=/opt/informix/etc/termcap
$ fglgo test
   1 ++++X+++++++++X+++++++++X+++++++++X+++++++++X
   2 ++++X+++++++++X+++++++++X+++++++++X+++++++++X
   3 ++++X+++++++++X+++++++++X+++++++++X+++++++++X
   4 ++++--------------------++++++++++X+++++++++X
   5 +++|exit?               |+++++++++X+++++++++X
   6 +++|                    |+++++++++X+++++++++X
   7 +++|                    |+++++++++X+++++++++X
   8 +++|                    |+++++++++X+++++++++X
   9 ++++--------------------++++++++++X+++++++++X
  10 ++++X+++++++++X+++++++++X+++++++++X+++++++++X
  11 ++++X+++++++++X+++++++++X+++++++++X+++++++++X 
```

哦亲爱的。

```
$ echo $TERM
ansi
$ cat evil-termcap

# Minimal ANSI for Telix.  8 Oct 96
#
lx|ansi-t|Telix in ANSI-BBS mode:\
        :al=\E[L:am:bs:cd=\E[J:ce=\E[K:cl=\E[2J\E[H:cm=\E[%i%d;%dH:co#80:\
        :dc=\E[P:dl=\E[M:do=\E[B:bt=\E[Z:ei=:ho=\E[H:ic=\E[@:im=:li#25:\
        :nd=\E[C:pt:so=\E[7m:se=\E[m:us=\E[4m:ue=\E[m:up=\E[A:\
        :kb=^h:ku=\E[A:kd=\E[B:kl=\E[D:kr=\E[C:eo:\
        :k0=\E[M:k1=\E[N:k2=\E[O:k3=\E[P:k4=\E[Q:k5=\E[R:\
        :k6=\E[S:k7=\E[T:k8=\E[U:k9=\E[V:\
        :kA=\E[W:kB=\E[X:\
        :mb=\E[5m:me=\E[m:\
        :gb=\332\300\277\331\304\263:

#     Ansi Terminal - In Black AND White
#     based on ansi-t,
#     adds scrolling (sf,sr)
#     and INFORMIX capabilities (GS,GE,GV,GH,etc)
#
lb|ansib|Ansi standard crt:\
        :sf=\E[S:sr=\E[T:\
        :GS=\E[12m:GE=\E[10m:GV=\63:GH=D:\
        :GC=E:GL=\64:GR=C:RT=^J:G1=?:G2=Z:G3=@:G4=Y:GU=A:GD=B:\
        :CW=\E[M:NU=\E[N:RF=\E[O:RC=\E[P:\
        :WL=\E[S:WR=\E[T:CL=\E[U:CR=\E[V:\
        :HM=\E[H:EN=\E[F:PU=\E[I:PD=\E[G:\
        :ZA=\E[0%?%p2%t;7%;%?%p3%t;5%;%?%p4%t;4%;m:\
        :tc=ansi-t:

#
#     Ansi Terminal - In Colour
#     based on ansib (b/w) - adds INFORMIX colour handling proglet
li|ansi|Ansi standard crt:\
        :ZA=\E[0m\E[%?%p1%{0}%=%t%{7}%e%p1%{1}%=%t%{3}%e%p1%{2}%=%t%{5}%e%p1%{3}%=%t%{1}%e%p1%{4}%=%t%{6}%e%p1%{5}%=%t%{2}%e%p1%{6}%=%t%{4}%e%p1%{7}%=%t%{0}%;%?%p2%t%Pa%?%ga%{6}%=%t34m%e%ga%{7}%=%t30m%e%ga%{1}%=%t1m\E[33m%e%ga%{2}%=%t30m%e%ga%{5}%=%t37m%{1}%Pa%e37m%;%ga%{40}%+\E[%2d%e40m%{30}%+\E[%2d%;m%?%p3%t\E[5m%;%?%p4%t\E[4m%;:\
        :tc=ansib: 
```

# php - Zend_Form_SubForm 嵌套多层深

> ID：10188612
> 
> 赞同：0
> 
> 时间：2012-04-17T09:28:57.840
> 
> 标签：php, zend-framework

我正在使用 Zend_Form 构建一个表单并尝试将子表单嵌套多个级别。我追求的结果如下：

```
<div id="details">
    <table class="subForm">
        <tr>
            <td>
                <!-- Element -->
            </td>
            <td>
                <!-- Element -->
            </td>
        </tr>
    </table>
</div>
<div id="content">
    <table class="subForm">
        <tr>
            <td>
                <!-- Element -->
            </td>
            <td>
                <!-- Element -->
            </td>
        </tr>
    </table>
</div> 
```

目前，为了做到这一点，我用我的元素和装饰器创建了一个子表单，将它附加到一个带有装饰器（并且没有元素）的子表单上，然后将其附加到一个表单上。

```
// create sub form container decorators
public $subFormContainerDecorators = array(
    array('FormElements'),
    array(array('data' => 'HtmlTag'), array('tag' => 'div', 
                                            'id'  => 'details'))
);

// create sub form decorators
public $subFormDecorators = array(
    array('FormElements'),
    array(array('data' => 'HtmlTag'), array('tag'   => 'table', 
                                            'class' => 'subForm'))
);

// create sub form and attach elements
$details = new Zend_Form_SubForm();
$details->setDecorators($this->subFormDecorators);
$details->addElement($name)
        ->addElement($save);

// create container div
$detailsContainer = new Zend_Form_SubForm();
$detailsContainer->setDecorators($this->subFormContainerDecorators);
$detailsContainer->addSubForm($details, 'details');

// attach subform container to main form
$this->addSubForm($detailsContainer, 'detailsContainer'); 
```

这是我目前似乎可以达到我需要的嵌套级别的唯一方法。但是，这也需要我为每个子表单集的所有容器及其子表单制作装饰器。我看不到任何其他方法可以实现这一点，但我相信会有比这更好的方法。

如果有人可以提供帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T10:02:08.377

您只需将 div HtmlTag 装饰器添加到 $sbFormDecorators 并完全忘记容器。

```
public $subFormDecorators = array(
    array('FormElements'),
    array(array('data' => 'HtmlTag'), array('tag' => 'table', 'class' => 'subForm')),
    array(array('dataContainer' => 'HtmlTag'), array('tag' => 'div', 'id'  => 'details')),
); 
```

# jquery - 奇怪的 jQuery AJAX 行为：XML 作为 #document 而不是对象返回

> ID：10188613
> 
> 赞同：4
> 
> 时间：2012-04-17T09:29:04.190
> 
> 标签：jquery, xml, ajax

我有一个关于 jQuery 的问题，试图获取一个 XML 文档，它`#document`在控制台中返回，而不是我可以操作的对象。为什么是这样？

这是我的 JavaScript 代码：

```
$.get('/ingredients/view_xml/' + ingredientId, function(xml) {
    console.log(xml);
}, 'xml'); 
```

这是 XML：

```
<?xml version="1.0" encoding="UTF-8" ?>
<ingredient>
    <entryId>700</entryId>
    <title>GUINEA FOWL WHOLE FRESH X 1.5KG</title>
    <ingredientUnit>KG</ingredientUnit>
    <ingredientCost>5.03</ingredientCost>
</ingredient> 
```

任何帮助将不胜感激，即使这是我犯的一个 n00b 错误并且现在看不到！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T09:42:30.713

这是预期的行为，请参阅[文档](http://api.jquery.com/jQuery.ajax/)：

> **dataType**
> 默认值：智能猜测（xml、json、脚本或 html）
> 
> 您期望从服务器返回的数据类型。如果没有指定，jQuery 将尝试根据响应的 MIME 类型推断它（XML MIME 类型将产生 XML，在 1.4 中 JSON 将产生一个 JavaScript 对象，在 1.4 中脚本将执行脚本，其他任何内容都将是作为字符串返回）。可用的类型（以及作为第一个参数传递给成功回调的结果）是：
> 
> “xml”：返回一个可以通过 jQuery 处理的 XML 文档。
> [...]

此外，使用[jQuery.parseXML()](http://api.jquery.com/jQuery.parseXML/)解析文档，它只是围绕浏览器的“本机”XML 解析的一个包装器。生成的文档可以使用 DOM 进行遍历和操作，或者更方便的是使用 jQuery。来自文档的示例：

```
var xml = "<rss version='2.0'><channel><title>RSS Title</title></channel></rss>",
    xmlDoc = $.parseXML( xml ),
    $xml = $( xmlDoc ),
    $title = $xml.find( "title" );

/* append "RSS Title" to #someElement */
$( "#someElement" ).append( $title.text() );
// ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T09:36:23.353

我认为那是因为它是一个文档（[`$.parseXML()`](http://api.jquery.com/jQuery.parseXML/)如果您设置了正确的标题，它会被解析并返回一个文档），如果您想在其上使用 jQuery 方法，您应该将它包装在 jQuery 中

```
$.get('/ingredients/view_xml/' + ingredientId, function(xml) {
    console.log($(xml));
}, 'xml'); 
```

# node.js - 客户端+服务器端模板，感觉不对，怎么优化？

> ID：10188618
> 
> 赞同：6
> 
> 时间：2012-04-17T09:29:27.040
> 
> 标签：node.js, express, pug, templating, handlebars.js

在我正在制作的网络应用程序中，我使用经典的 Express+Jade 来呈现客户端页面并公开一些 REST API（比方说：“用户列表 API”）。

这些客户端页面使用提供的 API 来检索“用户列表”并显示它。为了显示它，我在检索数据后使用车把模板库。

对我来说似乎有点脏，使用两个模板引擎，两次解析代码，如何使它更好？

注意：我已经通过在客户端页面中插入一个脚本变量来发送初始数据来优化这个东西。然后，此变量的显示方式与 API 接收的数据相同。该 API 仅用于数据刷新的情况。

**更新：**在服务器和客户端都使用翡翠是个好主意，但如何分开/指定？呈现模板的哪一部分应该在提供页面时完成，客户端将使用哪一部分？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T07:12:00.170

使用Client端+Server端模板非常好用。当我们在构建一些Web应用程序时，我们应该使用ajax来获取一些数据并使用回调函数来处理它。所以我们应该在客户端渲染这些数据。

问题是如何在客户端呈现它们？

现在我们只需要一个客户端jade.js。

关注本文档： [https ://github.com/visionmedia/jade#readme](https://github.com/visionmedia/jade#readme)

**第一的**

```
git clone https://github.com/visionmedia/jade.git 
```

**第二**

```
$ make jade.js ( in fact the project has already compile the file for us )

so we just need to copy this file to the path that we use. 
```

**第三**

```
read my demo below :

<script type='text/javascript' language='javascript' src="lib/jquery-1.8.2.min.js"></script>
<script type='text/javascript' language='javascript' src="lib/jade/jade.js"></script>
<script type='template' id='test'>
ul
  li hello world 
  li #{item}
  li #{item}
  li #{item}
</script>
<script>
  var compileText = $("#test").text();
  console.log( typeof( compileText ) );
  var fn = jade.compile( compileText , { layout : false } );
  var out = fn( {item : "this is item " } );
  console.log( out );
  $("body").append( out );
</script> 
```

现在您可以在正文中看到输出结果

```
hello world
this is item
this is item
this is item 
```

看完这个demo我想你应该知道jade服务器端和客户端是怎么分开的了

也许你现在还有一个问题。如何在 *.jade 中编写一些翡翠模板代码？文档也为我们提供了一种方法。本教程可能会对您有所帮助。

索引.jade

```
!!!5
html
  head
   title hello world
  body
    ul#list

    script#list-template(type='template')
      |- for( var i in data )
      |    li(class='list') \#{ data[i].name }
      |- } 
```

index.js

```
/* you javascript code */
var compileText = $('#list-template').text();
var compile = jade.compile( compileText , { layout : false } );

var data = [{ "name" : "Ben" } , {"name" : "Jack" } , {"name" : "Rose" }];
var outputText = compile( data );

$("#list").append( outputText ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T09:55:52.633

使用[http://github.com/flatiron/plates](http://github.com/flatiron/plates)模板引擎，它可以在客户端和服务器端工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T20:56:03.263

几周前，我为 Handlebars 模板编写了一个 npm 包，以便在客户端和服务器之间共享它们。这是非常基本的，但到目前为止它对我来说效果很好：

[https://github.com/jwietelmann/node-handlebars-precompiler](https://github.com/jwietelmann/node-handlebars-precompiler)

**编辑**：我单独使用“hbs”作为服务器端渲染的包。每当我更新我的 hbs 视图时，预编译器只会将预编译的模板传送到我的公共 javascripts 目录。

# algorithm - alpha-beta剪枝算法需要树数据结构吗？

> ID：10188619
> 
> 赞同：0
> 
> 时间：2012-04-17T09:29:27.393
> 
> 标签：algorithm, artificial-intelligence, minimax, alpha-beta-pruning

alpha-beta剪枝算法如下：

```
function ALPHA-BETA-SEARCH(state) returns an action
      v <- MAX-VALUE(state, -∞, +∞)
      return the action in ACTIONS(state) with value v

function MAX-VALUE(state, α, β) returns a utility value
    if TERMINAL-TEST(state) then 
        return UTILITY(state)
    v <- -∞
    for each a in ACTIONS(state) do
        v <- MAX(v, MIN-VALUE(RESULT(state, a), α, β))
        if v ≥ β then
            return v
        α <- MAX(α, v)
    return v

function MIN-VALUE(state, α, β) returns a utility value
    if TERMINAL-TEST(state) then 
        return UTILITY(state)
    v <- +∞
    for each a in ACTIONS(state) do
        v <- MIN(v, MAX-VALUE(RESULT(state, a), α, β))
        if v ≤ α then 
            return v
        β <- MIN(β, v)
    return v 
```

该算法声明该`ACTIONS`函数将给出给定 中所有可用操作的列表`state`。

让我们以跳棋游戏为例。假设一个棋子，比如说`A`，与另一个棋子，比如说 ，在对角线上`B`。如果`A`can take `B`，那么这是一个（不可避免的，因为如果可以的话，我们必须采取另一个检查器）动作。或者，如果有多个镜头，这些都是动作。这种情况实际上可以用铅笔和纸画出来。更具体地说，可以使用树来表示情况，其中每个节点代表一个状态，到其子节点的边代表来自该状态的可能动作。

我认为您不需要显式存储树数据结构。但是，上面的算法包含以下语句：`return the action in ACTIONS(state) with value v`. 现在，`ACTIONS(state)`将返回某个状态（例如`A`需要播放的位置）的可能动作。

如果我们计算出所有算法，我们将得到一个 value `v`，我们将使用`v`从终端节点传递的值跟随节点。

现在，假设我没有存储来自每个状态的所有可能移动或动作的完整树。当`return the action ACTIONS(state) with the value v`被执行时，我只会得到引导我进入下一个状态的动作，并且我知道其中一个动作会引导我走向最佳路径。但是，如果我没有额外的簿记，例如完整的树，我是否能够将操作与价值相匹配`v`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T09:56:23.747

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T09:39:29.603

我认为有两个问题很重要，可以回答你：

1.  无论如何都会构建树 - 隐含地，每个`ACTIONS(vertex)`操作都可以简单地连接`vertex`到他的每个儿子 - 所以无论如何都没有真正需要额外的树构建。`v`而且，当然，您可以向该树的每个节点添加诸如此类的属性。

2.  不过，如果您不需要也不关心实际的树，一种可能的解决方案是返回`(v, state)`[a tuple] 而不是`v`. 返回值上的所有操作 - 将在 上完成`v`，和现在一样，唯一实际使用`state`的 - 是顶层`ALPHA-BETA-SEARCH()`。当然，它需要较少的优雅`MIN`和`MAX`功能，因为您不仅需要找到值`v`- 还要找到给出该值的顶点。

# android - 我可以在 Android 的 getView() 方法中调用 setContentView() 方法吗？

> ID：10188620
> 
> 赞同：1
> 
> 时间：2012-04-17T09:29:28.483
> 
> 标签：android

我可以`setContentView()`在方法中调用`getView()`方法吗？如果是这样，怎么做？
实际上，我有一个列表，用于显示一些视图，如 TextView、Imageview 和 Button。现在在按钮单击事件上，我想显示一些其他视图。这是我的代码：

```
Button select = (Button)findViewById(R.id.button1);
select.setOnClickListener(new OnClickListener() {
  public void onClick(View arg0) {
     setContentView(R.layout.search);
  }
}); 
```

但它给了我一个语法错误，因为我在 BaseAdapter 类中使用了这个方法。

有没有其他方法可以做到这一点。？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T10:56:39.617

如果您正在扩展基本适配器类，那么您可以在扩展的适配器类中传递您的上下文。然后您可以使用该上下文来设置您的内容视图。

context.setContentView(R.layout.search);

另一种方法是您可以使用广播接收器并将广播从您的适配器类发送到您的活动类，然后您可以更新您的活动。

我没有尝试过第一种方法，但我尝试过第二种方法来改变活动中的观点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T09:53:35.807

在`getView(...)`并创建`row`布局并放置 imageview、textview、Button

```
@Override
    public View getView(int position, View convertView, ViewGroup parent) {

        View v = convertView;

        if (v == null) {
            LayoutInflater vi = (LayoutInflater) CurrentContext
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = vi.inflate(R.layout.row, null);

        }  
   } 
```

看看这个[http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)

# memory-leaks - CCTexture2D 内存泄漏

> ID：10188621
> 
> 赞同：0
> 
> 时间：2012-04-17T09:29:28.630
> 
> 标签：memory-leaks, cocos2d-iphone

任何人都可以回答，我应该改变精灵图像，我用我的功能来做

```
-(void) openKeyWithSprite:(id) sender withSpriteName:(NSString*)spriteName 
```

这会导致内存泄漏还是可以？

在初始化

```
_spriteBonus=[CCSprite spriteWithFile:@"monstr_1_1.png"]; 
```

按计划进行

```
-(void) openKeyWithSprite:(id) sender withSpriteName:(NSString*)spriteName
{
        CCTexture2D* tex = [[CCTextureCache sharedTextureCache] addImage:spriteName];
        [_spriteBonus setTexture: tex];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T15:48:25.710

If you want to create frame animation, use CCAnimate action. For example,

```
id yourAnimation = [CCAnimation animationWithFrames: arrayOfFrames];
id animateAction = [CCAnimate actionWithDuration: animationDuration 
                                       animation: yourAnimation
                            restoreOriginalFrame: YES];
[yourSprite runAction: animateAction]; 
```

if you need to repeat your animation, use CCRepeat of CCRepeatForever action, for example

```
id resultAction = [CCRepeatForever actionWithAction: animateAction];
[yourSprite runAction: resultAction]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T15:51:41.187

您在此处显示的代码应该没问题，并且不会泄漏任何内存。 `setTexture`释放旧的纹理参考并保留新的。

但是，假设您没有使用 ARC:`[CCSprite spriteWithFile:@"monstr_1_1.png"];`在`autorelease`池中，因此请确保将其添加到父`CCNode`级（在退出您创建它的任何函数之前），以便将其保留在内存中。

# android - 如何在Android的同一个Activity中将不同的整数数组传递给同一个图库

> ID：10188623
> 
> 赞同：0
> 
> 时间：2012-04-17T09:29:32.607
> 
> 标签：android, android-emulator

在这里，我需要将图像传递到画廊。
在一个类中，我有 10 个按钮，在这里，当单击 1 个按钮时，我需要将 1 个按钮相关图像传递到图库中，当单击 2 个按钮时，我需要将 2 个按钮相关图像传递到图库中。
我尝试使用下面的代码，但是当单击 1 按钮时，它工作正常意味着图像显示在画廊中，但是当我单击 2,3 ...按钮时，我得到了黑屏。

请任何人建议我如何将不同的数组传递到相同的活动中。

```
 HomeDemo.class:
   public class HomeDemo extends Activity implements OnTouchListener{
Button home1,home2,home3,home4;
ImageButton back;
 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.homedemo);
        home1=(Button)findViewById(R.id.button1);
        home2=(Button)findViewById(R.id.button2);
        home3=(Button)findViewById(R.id.button3);
        home4=(Button)findViewById(R.id.button4);
        home1.setOnTouchListener(this);
        home2.setOnTouchListener(this);
        home3.setOnTouchListener(this);
        home4.setOnTouchListener(this);
 }
public boolean onTouch(View v, MotionEvent event) {
    // TODO Auto-generated method stub
    if(v==home1)
    {
        Intent i=new Intent(HomeDemo.this,Home1.class);
        i.putExtra("k1", 1);
        startActivity(i);
    }
    if(v==home2)
    {
        Intent i=new Intent(HomeDemo.this,Home1.class);
        i.putExtra("k2", 2);
        startActivity(i);
    }
    if(v==home3)
    {
        Intent i=new Intent(HomeDemo.this,Home1.class);
        i.putExtra("k3", 3);
        startActivity(i);
    }
    if(v==home4)
    {
        Intent i=new Intent(HomeDemo.this,Home1.class);
        i.putExtra("k4", 4);
        startActivity(i);
    }

    return false;
}
}

       Home1 .class
       public class Home1 extends Activity implements
          AdapterView.OnItemSelectedListener, ViewSwitcher.ViewFactory{
       private TextSwitcher mSwitcher;
   ImageButton home,sound;
Gallery g;
static int nextbtn = 0;
static int prebtn = 0;
ImageAdapter iadapter;
int galpos;
int countk1=0;
int countk2=0;
int countk3=0;
int countk4=0;

public int ht;
public int wt;

public static int motiongal = 3000; 
RelativeLayout l1,l2;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);

    setContentView(R.layout.home1);

    home=(ImageButton)findViewById(R.id.homeimage);
    home.setOnTouchListener(new OnTouchListener() {

        public boolean onTouch(View v, MotionEvent event) {
            // TODO Auto-generated method stub
            Intent i=new Intent(Home1.this,HomeDemo.class);
            startActivity(i);
            return false;
        }
    });
     sound=(ImageButton)findViewById(R.id.soundimage);
      sound.setOnTouchListener(new OnTouchListener() {

        public boolean onTouch(View v, MotionEvent event) {
            // TODO Auto-generated method stub
            return false;
        }
    });
    DisplayMetrics displaymetrics = new DisplayMetrics();
    getWindowManager().getDefaultDisplay().getMetrics(displaymetrics);
    ht = displaymetrics.heightPixels;
    wt = displaymetrics.widthPixels;
 l1=(RelativeLayout)findViewById(R.id.linear);
 l2=(RelativeLayout)findViewById(R.id.linear1);
 l1.setVisibility(View.INVISIBLE);
 l2.setOnTouchListener(new OnTouchListener() {

    public boolean onTouch(View v, MotionEvent event) {
        // TODO Auto-generated method stub
        l1.setVisibility(View.VISIBLE);
        final Handler handler = new Handler();
        handler.postDelayed(new Runnable() {
          public void run() {
            //Do something after 100ms
              l1.setVisibility(View.INVISIBLE);
          }
        }, 1500);
        return false;
    }
});

    mSwitcher = (TextSwitcher) findViewById(R.id.switcher);
    mSwitcher.setFactory(this);
    mSwitcher.setInAnimation(AnimationUtils.loadAnimation(this,
            android.R.anim.fade_in));
    mSwitcher.setOutAnimation(AnimationUtils.loadAnimation(this,
            android.R.anim.fade_out));
    mSwitcher.startLayoutAnimation();
    try
    {
    g = (Gallery) findViewById(R.id.gallery);
    g.setAdapter(new ImageAdapter(this));
    g.setHorizontalScrollBarEnabled(false);
    Bundle bundle = getIntent().getExtras();
    galpos = bundle.getInt("GALPOS");
     countk1 = getIntent().getIntExtra("k1", 0); 
     countk2 = getIntent().getIntExtra("k2", 0); 
     countk3 = getIntent().getIntExtra("k3", 0); 
     countk4 = getIntent().getIntExtra("k4", 0); 

    g.setSelection(galpos);        
    g.setAnimationDuration(motiongal);

    } catch(Exception e){

  }
    g.setOnItemSelectedListener(this);

    ImageButton nextButton = (ImageButton) findViewById(R.id.nextimage);
    nextButton.setOnClickListener(nextButtonOnClick);

    ImageButton preButton = (ImageButton) findViewById(R.id.preimage);
    preButton.setOnClickListener(preButtonOnClick);

    g.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
            //Toast.makeText(GalleryActivity.this, "" + mTextNames[position] , Toast.LENGTH_SHORT).show();
             if(position==12)
            {
                Intent i=new Intent(Home1.this, HomeDemo.class);
                startActivity(i);
            }
            l1.setVisibility(View.VISIBLE);
            final Handler handler = new Handler();
            handler.postDelayed(new Runnable() {
              public void run() {
                //Do something after 100ms
                  l1.setVisibility(View.INVISIBLE);
              }
            }, 1500);
        }
    });

}

public void onItemSelected(AdapterView<?> parent, View v, int position, long id) {
    mSwitcher.setText(mTextNames[position]);
    nextbtn = position;

}

public OnClickListener nextButtonOnClick = new OnClickListener(){
    public void onClick(View v) {           

        if(nextbtn < (mTextNames.length-1))
        {     
            try
            {               
            mSwitcher.setText(mTextNames[nextbtn+1]);
            mSwitcher.startLayoutAnimation();               
            mSwitcher.getDrawingTime();
            g.setSelection(nextbtn+1);
            Thread.sleep(300);
            g.scheduleLayoutAnimation();
            g.startLayoutAnimation();
            Thread.sleep(300);
            g.setAnimationDuration(motiongal);  

            }
            catch(Exception e)
            {}

        }else
        {
            try
            {               
            mSwitcher.setText(mTextNames[0]);   
            mSwitcher.startLayoutAnimation();               
            mSwitcher.getDrawingTime();
            g.setSelection(0);
            Thread.sleep(300);
            g.scheduleLayoutAnimation();
            g.startLayoutAnimation();
            Thread.sleep(300);
            g.setAnimationDuration(motiongal);                  
            }
            catch(Exception e)
            {}
        }

      } 
};   

public OnClickListener preButtonOnClick = new OnClickListener(){
    public void onClick(View v) {           

        if(nextbtn > 0)
        {
            try
            {               

            mSwitcher.startLayoutAnimation();               
            mSwitcher.getDrawingTime();
            g.setSelection(nextbtn-1);
            Thread.sleep(300);
            g.scheduleLayoutAnimation();
            g.startLayoutAnimation();
            Thread.sleep(300);
            g.setAnimationDuration(motiongal);

            }
            catch(Exception e)
            {}

        }else
        {
            try
            {               
            mSwitcher.setText(mTextNames[mTextNames.length-1]);
            mSwitcher.startLayoutAnimation();               
            mSwitcher.getDrawingTime();
            g.setSelection(mTextNames.length-1);
            Thread.sleep(300);
            g.scheduleLayoutAnimation();
            g.startLayoutAnimation();
            Thread.sleep(300);
            g.setAnimationDuration(motiongal);                  
            }
            catch(Exception e)
            {}

        }

      } 
};    

public void onNothingSelected(AdapterView<?> parent) {
}

public View makeView() {
    TextView i = new TextView(this);
    i.setTextSize(18);

    i.setGravity(1);
    return i;
}

public class ImageAdapter extends BaseAdapter {
    public ImageAdapter(Context c) {
        mContext = c;
    }

    public int getView() {
        // TODO Auto-generated method stub
        return 0;
    }

    public int getCount() {
        return mPhotos.size();
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        ImageView i = new ImageView(mContext);
       if(countk1==1)
       {
        i.setImageResource(mPhotos.get(position));
       }
       if(countk2==1)
       {
        i.setImageResource(mPhotos1.get(position));
       }
       if(countk2==3)
       {
        i.setImageResource(mPhotos1.get(position));
       }
       if(countk2==4)
       {
        i.setImageResource(mPhotos1.get(position));
       }

        i.setScaleType(ImageView.ScaleType.FIT_XY);
        i.setLayoutParams(new Gallery.LayoutParams(
               LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));

        return i;
    }

    private Context mContext;

}

private boolean isScrollingLeft(MotionEvent e1, MotionEvent e2){
      return e2.getX() > e1.getX();
    }

    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY){
      int kEvent;
      if(isScrollingLeft(e1, e2)){ //Check if scrolling left
        kEvent = KeyEvent.KEYCODE_DPAD_LEFT;
      }
      else{ //Otherwise scrolling right
        kEvent = KeyEvent.KEYCODE_DPAD_RIGHT;
      }
      onKeyDown(kEvent, null);
      return true;  
    }

private Integer[] mImageIds = {
         R.drawable.bokstavslottet01,
         R.drawable.bokstavslottet02,
         R.drawable.bokstavslottet03,
         R.drawable.bokstavslottet04,
         R.drawable.bokstavslottet05,
         R.drawable.bokstavslottet06,
         R.drawable.bokstavslottet07,
         R.drawable.bokstavslottet08,
         R.drawable.bokstavslottet09,
         R.drawable.bokstavslottet10,
         R.drawable.bokstavslottet11,
         R.drawable.bokstavslottet12,
         R.drawable.bokstavslottet13
        };

private Integer[] mImageIds1 = {
     R.drawable.i1,
        R.drawable.i2,
        R.drawable.i3,
        R.drawable.i4,
        R.drawable.i5,
        R.drawable.i6,
        R.drawable.i7,
        R.drawable.i8,
        R.drawable.i9,
        R.drawable.i10,
        R.drawable.i11,
        R.drawable.i12,
        R.drawable.i13
    };

private static String[] mTextNames = {
"BOOKSTOVEN1", "BOOKSTOVEN2", "BOOKSTOVEN3", "BOOKSTOVEN4", "BOOKSTOVEN5", "BOOKSTOVEN6", "BOOKSTOVEN7", "BOOKSTOVEN8", "BOOKSTOVEN9", "BOOKSTOVEN10", "BOOKSTOVEN11", "BOOKSTOVEN12", "BOOKSTOVEN13"};

private ArrayList<Integer> mPhotos = new ArrayList<Integer>(Arrays.asList(mImageIds));
private ArrayList<Integer> mPhotos1 = new ArrayList<Integer>(Arrays.asList(mImageIds1));

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T09:36:58.453

将您的活动设置为实现 OnClickListener 而不是 OnTouchListener

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T10:05:54.407

1.我想问你的第一件事是，你在这里提到了 1 个`mPhotos`阵列和剩下的三个`mPhotos1`。如果您在此代码中正确说明了为什么您需要不必要`if`的条件，则可以将 else 放在第一个`if`并提供`mPhotos1`剩余的数组（否则您不需要提供 2、3、4 值）。

1.  下一个是你在这里做错了`if(countk2==1)`。怎么可能比较，因为你只通过额外的`2`。`k2`

    ```
    if(countk1==1)
       {
        i.setImageResource(mPhotos.get(position));
       }
       if(countk2==1)
       {
        i.setImageResource(mPhotos1.get(position));
       }
       if(countk2==3)
       {
        i.setImageResource(mPhotos1.get(position));
       }
       if(countk2==4)
       {
        i.setImageResource(mPhotos1.get(position));
       } 
    ```

2.  然后，我认为您不需要在以下代码中放置具有不同名称的 Extra 值。

在这里，您正在独立接收`k1`, `k2`, `k3`,`k4`值。我觉得你不需要这样做。

```
 countk1 = getIntent().getIntExtra("k1", 0); 
     countk2 = getIntent().getIntExtra("k2", 0); 
     countk3 = getIntent().getIntExtra("k3", 0); 
     countk4 = getIntent().getIntExtra("k4", 0);

if(v==home1)
    {
        Intent i=new Intent(HomeDemo.this,Home1.class);
        i.putExtra("k1", 1);
        startActivity(i);
    }
    if(v==home2)
    {
        Intent i=new Intent(HomeDemo.this,Home1.class);
        i.putExtra("k2", 2);
        startActivity(i);
    }
    if(v==home3)
    {
        Intent i=new Intent(HomeDemo.this,Home1.class);
        i.putExtra("k3", 3);
        startActivity(i);
    }
    if(v==home4)
    {
        Intent i=new Intent(HomeDemo.this,Home1.class);
        i.putExtra("k4", 4);
        startActivity(i);
    } 
```

除了执行上述操作之外，您还可以`putExtra`按照以下代码的意图实现。

```
if(v==home1)
{
    Intent i=new Intent(HomeDemo.this,Home1.class);
    i.putExtra("k", 1);
    startActivity(i);
}
if(v==home2)
{
    Intent i=new Intent(HomeDemo.this,Home1.class);
    i.putExtra("k", 2);
    startActivity(i);
}
if(v==home3)
{
    Intent i=new Intent(HomeDemo.this,Home1.class);
    i.putExtra("k", 3);
    startActivity(i);
}
if(v==home4)
{
    Intent i=new Intent(HomeDemo.this,Home1.class);
    i.putExtra("k", 4);
    startActivity(i);
} 
```

然后你可以收到如下代码，

```
 count = getIntent().getIntExtra("k", 0); 
```

在`Adapter`你可以按照这个，

```
 if(count==1)
   {
    i.setImageResource(mPhotos.get(position));
   }
   else if(count==2)
   {
    i.setImageResource(mPhotos1.get(position));
   }
   else if(count==3)
   {
    i.setImageResource(mPhotos2.get(position));
   }
   if(count==4)
   {
    i.setImageResource(mPhotos3.get(position));
   } 
```

我希望你已经理解了上面的解释。

这里有一些有用的解决方案。

为了接收`Extras` 您还可以执行以下操作，

`getIntent.getIntExtrta("k",0)`不使用`Bundle`.

# crystal-reports - 通过 Crystal Report 中的另一个公式更改公式值

> ID：10188626
> 
> 赞同：1
> 
> 时间：2012-04-17T09:29:44.193
> 
> 标签：crystal-reports, formula

我想通过 Crystal Reports 中的另一个公式更改公式的值。

我有一个问题：我在 DB 中有一个字符串列，例如“汽车”或“门”或..

在报告中，我将所有类别都写在普通文本框中。（如 RadioButtonList）。

并希望如果列是“汽车”，它将检查汽车文本框旁边。（就像一个 RadioButtonList）

我以为我制作了一个名为`main_Categ`的公式，每个类别文本框旁边都有一个公式，我将写在 main_Categ 公式中

```
if the Column = "cars" then CarsFormula="1"
else if the Column = "Doors" then DoorsFormula="1" 
```

等等 。你怎么看 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T09:51:53.073

我认为为每个复选框设置一个公式会更简单。在每个公式中简单地说：`{table.field}='doors'`例如。这将返回真/假。

您的方法似乎引入了不必要的复杂性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T10:08:30.933

每个公式必须自我评估。

创建 2 个公式

汽车公式 `{column} ="cars"`
和
门公式`{column}="doors"`

# java - Android jsoup 选择表格单元格

> ID：10188630
> 
> 赞同：0
> 
> 时间：2012-04-17T09:30:00.743
> 
> 标签：java, android, select, jsoup

嗨，我正在尝试从网站 (http://omhc.nl/site/default.asp?Option=10017&m=1) 获取一些信息。表结构为：

```
<tr>
    <td colspan="4" style="border-bottom: 1px solid rgb(0, 0, 0);" width="100%">donderdag 19 april 2012&nbsp;</td>
</tr>
<tr>
    <td width="5%">&nbsp;</td>
    <td width="25%">17:00 - 22:00&nbsp;</td>
    <td bgcolor="" width="40%">KM</td>
    <td width="6%">Barhoofd&nbsp;</td>
</tr>
<tr>
    <td colspan="4" style="border-bottom: 1px solid rgb(0, 0, 0);" width="100%">vrijdag 20 april 2012&nbsp;</td>
</tr>
<tr>
    <td width="5%">&nbsp;</td>
    <td width="25%">16:30 - 19:30&nbsp;</td>
    <td bgcolor="" width="40%">Ouders/verzorgers van VL</td>
    <td width="6%">Bardienst&nbsp;</td>
</tr>
<tr>
    <td width="5%">&nbsp;</td>
    <td width="25%">16:30 - 19:30&nbsp;</td>
    <td bgcolor="" width="40%">Ouders/verzorgers van AvdN</td>
    <td width="6%">Bardienst&nbsp;</td>
</tr>
<tr>
    <td width="5%">&nbsp;</td>
    <td width="25%">16:30 - 21:00&nbsp;</td>
    <td bgcolor="" width="40%">EdK</td>
    <td width="6%">Barhoofd&nbsp;</td>
</tr>
<tr>
    <td width="5%">&nbsp;</td>
    <td width="25%">21:00 - 23:00&nbsp;</td>
    <td bgcolor="" width="40%">FK</td>
   <td width="6%">Barhoofd&nbsp;</td>
</tr>
<tr>
    <td width="5%">&nbsp;</td>
    <td width="25%">23:00 - 00:00&nbsp;</td>
    <td bgcolor="" width="40%">SW</td>
    <td width="6%">Barhoofd&nbsp;</td>
</tr> 
```

我的代码：

```
package maartenbrakkee.bardienst.omhc;

import java.util.List;

import org.jsoup.Jsoup;
import org.jsoup.nodes.Element;
import org.jsoup.nodes.Document;
import org.jsoup.select.Elements;

import android.app.Activity;
import android.os.Bundle;
import android.text.method.ScrollingMovementMethod;
import android.widget.TextView;

public class BardienstActivity extends Activity {
    TextView tv;
    static final String URL = "http://omhc.nl/site/default.asp?Option=10017&m=1";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        tv = (TextView)findViewById(R.id.tv);
        tv.setSingleLine(false);

        try {
            tv.setMovementMethod(new ScrollingMovementMethod());
            tv.setText(getBarschema());
        } catch (Exception ex) {
            tv.setText("Error");
        }
    }

    protected String getBarschema() throws Exception {
        String result = "";
        Document document = Jsoup.connect(URL).get();

        Elements dagen = document.select("tr:has(td[width=100%]) + tr:has(td[width=40%])");

        // Dag
        String[] dag = new String[dagen.size()];
        int i = 0;
        for (Element dagen1 : dagen) {
            dag[i++] = dagen1.text() + "\n";
        }

        return dag[3];
    }
} 
```

我想获得第[0]天：

```
donderdag 19 april 2012 + "\n" + 17:00 - 22:00 KM Barhoofd 
```

和天[1]：

```
vrijdag 20 april 2012 + "\n" + 16:30 - 19:30  Ouders/verzorgers van VL Bardienst "\n" + 16:30 - 19:30 Ouders/verzorgers van AvdN Bardienst + "\n" + 16:30 - 21:00 EdK Barhoofd + "\n" + 21:00 - 23:00   FK Barhoofd + "\n" 23:00 - 00:00 SW Barhoofd 
```

但我得到的只是一天 [0] 的 17:00 - 22:00 KM Barhoofd。如何选择正确的单元格（从第一个 tr td[width:100%] 到下一个 tr td[width:100%]）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T15:09:44.083

我改变了一点你的方法 getBarSchema 主要是你的选择器：

```
static protected List<String> getBarschema(String URL) throws Exception {

    Document document = Jsoup.connect(URL).get();

    // New Selector
    Elements dagen = document.select("div.content table tr td");

    // List better than array in this case
    List<String> dag = new ArrayList();   

    String line = "";
    for (Element dagen1 : dagen) {                              

        String width = dagen1.attr("width");      
        if(width.equals("100%") && !line.equals("")){
            dag.add(line);
            line ="";
        }    
        line += dagen1.text() + "\n";
    }        
    return dag;
} 
```

# android - FFmpeg 的 avcodec_decode_audio3 返回 -1

> ID：10188631
> 
> 赞同：2
> 
> 时间：2012-04-17T09:30:03.967
> 
> 标签：android, ffmpeg

我在 android 上使用 FFmpeg 来解码 mp3。我在配置时设置了所有解码器启用并正确制作了 .so 文件。这是为配置文件添加参数的 .sh：

```
NDK=~/android-ndk-r5b
PLATFORM=$NDK/platforms/android-8/arch-arm/
PREBUILT=$NDK/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86

function build_one
{
./configure --target-os=linux \
    --prefix=$PREFIX \
    --enable-cross-compile \
    --extra-libs="-lgcc" \
    --arch=arm \
    --cc=$PREBUILT/bin/arm-linux-androideabi-gcc \
    --cross-prefix=$PREBUILT/bin/arm-linux-androideabi- \
    --nm=$PREBUILT/bin/arm-linux-androideabi-nm \
    --sysroot=$PLATFORM \
    --extra-cflags=" -O3 -fpic -DANDROID -DHAVE_SYS_UIO_H=1 -Dipv6mr_interface=ipv6mr_ifindex -fasm -Wno-psabi -fno-short-enums  -fno-strict-aliasing -finline-limit=300 $OPTIMIZE_CFLAGS " \
    --disable-shared \
    --enable-static \
    --extra-ldflags="-Wl,-rpath-link=$PLATFORM/usr/lib -L$PLATFORM/usr/lib  -nostdlib -lc -lm -ldl -llog" \
    --enable-demuxer=mov \
    --enable-demuxer=h264 \
    --disable-ffplay \
    --enable-protocol=file \
    --enable-avformat \
    --enable-avcodec \
    --enable-decoder=rawvideo \
    --enable-decoder=mjpeg \
    --enable-decoder=h263 \
    --enable-decoder=mpeg4 \
    --enable-decoder=h264 \
    --enable-decoder=mp3 \
    --enable-decoder=mp3adu \
    --enable-decoder=mp3adufloat \
    --enable-decoder=mp3float \
    --enable-decoder=mp3on4 \
    --enable-decoder=mp3on4float \
    --enable-parser=h264 \
    --disable-network \
    --enable-zlib \
    --disable-avfilter \
    --disable-avdevice \
    $ADDITIONAL_CONFIGURE_FLAG

make clean
make  -j4 install

$PREBUILT/bin/arm-linux-androideabi-ar d libavcodec/libavcodec.a inverse.o

$PREBUILT/bin/arm-linux-androideabi-ld -rpath-link=$PLATFORM/usr/lib -L$PLATFORM/usr/lib  -soname libffmpeg.so -shared -nostdlib  -z,noexecstack -Bsymbolic --whole-archive --no-undefined -o $PREFIX/libffmpeg.so libavcodec/libavcodec.a libavformat/libavformat.a libavutil/libavutil.a libswscale/libswscale.a -lc -lm -lz -ldl -llog  --warn-once  --dynamic-linker=/system/bin/linker $PREBUILT/lib/gcc/arm-linux-androideabi/4.4.3/libgcc.a
}

#arm v7vfpv3
CPU=armv7-a
OPTIMIZE_CFLAGS="-mfloat-abi=softfp -mfpu=vfpv3-d16 -marm -march=$CPU "
PREFIX=./android/$CPU 
ADDITIONAL_CONFIGURE_FLAG=
build_one 
```

我可以读取文件并获取信息（解码类型\格式类型），然后按照FFmpeg的示例调用avcodec_decode_audio3来解码音频文件，它返回-1，解码失败。有人能告诉我发生了什么吗，谢谢！

```
#include <stdlib.h>
#include <stdio.h>
#include <jni.h>
#include <android/log.h>
#include "libavcodec/avcodec.h"
#include "libavformat/avformat.h"

#define AUDIO_INBUF_SIZE 20480
#define AUDIO_REFILL_THRESH 4096
#define LOG_TAG "FFmpegTest"
#define LOG_LEVEL 10
#define LOGI(level, ...) if (level <= LOG_LEVEL) {__android_log_print(ANDROID_LOG_INFO, LOG_TAG, __VA_ARGS__);}
#define LOGE(level, ...) if (level <= LOG_LEVEL) {__android_log_print(ANDROID_LOG_ERROR, LOG_TAG, __VA_ARGS__);}

char *sourceFileName;
char *resultFileName;
AVFormatContext *gFormatCtx;
int audioStreamIndex;
AVCodec *gCodec;
AVCodecContext *gCodecCtx;
FILE *sourceFile, *resultFile;
int out_size, len;
uint8_t *outbuf;
uint8_t inbuf[AUDIO_INBUF_SIZE + FF_INPUT_BUFFER_PADDING_SIZE];
AVPacket avpkt;

JNIEXPORT void JNICALL Java_roman10_ffmpegTest_VideoBrowser_naDecode(JNIEnv *pEnv, jobject pObj, jstring source_file_name, jstring result_file_name)
{
    LOGI(10, "start decode.");
    /* get source file's name */
    sourceFileName = (char *)(*pEnv)->GetStringUTFChars(pEnv, source_file_name, NULL);
    if (sourceFileName == NULL) {
        LOGE(1, "cannot get the source file name!");
        exit(1);
    }
    LOGI(10, "source file name is %s", sourceFileName);

    avcodec_init();

    av_register_all();

    /* get format somthing of source file to AVFormatContext */
    int lError;
    if ((lError = av_open_input_file(&gFormatCtx, sourceFileName, NULL, 0, NULL)) !=0 ) {
        LOGE(1, "Error open source file: %d", lError);
        exit(1);
    }
    if ((lError = av_find_stream_info(gFormatCtx)) < 0) {
        LOGE(1, "Error find stream information: %d", lError);
        exit(1);
    }
    LOGI(10, "audio format: %s", gFormatCtx->iformat->name);
    LOGI(10, "audio bitrate: %d", gFormatCtx->bit_rate);

    /* ???get audio stream's id and codec of source file??? */
    audioStreamIndex = av_find_best_stream(gFormatCtx, AVMEDIA_TYPE_AUDIO, -1, -1, &gCodec, 0);
    LOGI(10, "audioStreamIndex %d", audioStreamIndex);
    if (audioStreamIndex == AVERROR_STREAM_NOT_FOUND) {
        LOGE(1, "cannot find a audio stream");
        exit(1);
    } else if (audioStreamIndex == AVERROR_DECODER_NOT_FOUND) {
        LOGE(1, "audio stream found, but no decoder is found!");
        exit(1);
    }
    LOGI(10, "audio codec: %s", gCodec->name);

    /* get codec somthing of audio stream to AVCodecContext */
    gCodecCtx = gFormatCtx->streams[audioStreamIndex]->codec;
    if (avcodec_open(gCodecCtx, gCodec) < 0) {
    LOGE(1, "cannot open the audio codec!");
        exit(1);
    }

    /* ???gCodec = avcodec_find_decoder(gCodecCtx->codec_id);
    if (!gCodec) {
    LOGE(1, "codec not found");
        return;
    }

    gCodecCtx= avcodec_alloc_context();

    if (avcodec_open(gCodecCtx, gCodec) < 0) {
    LOGE(1, "could not open codec");
        exit(1);
    }??? */

    outbuf = malloc(AVCODEC_MAX_AUDIO_FRAME_SIZE);

    sourceFile = fopen(sourceFileName, "rb");
    if (!sourceFile) {
    LOGE(1, "could not open %s", sourceFileName);
        exit(1);
    }
    /* get result file's name */
    resultFileName = (char *)(*pEnv)->GetStringUTFChars(pEnv, result_file_name, NULL);
    LOGI(10, "result file name is %s", resultFileName);
    resultFile = fopen(resultFileName, "wb");
    if (!resultFile) {
    LOGE(1, "could not create result file");
        av_free(gCodecCtx);
        exit(1);
    }

    av_init_packet(&avpkt);

    avpkt.data = inbuf;
    avpkt.size = fread(inbuf, 1, AUDIO_INBUF_SIZE, sourceFile);
    LOGI(10, "avpkt.size: %d", avpkt.size);
    /* decode file */
    while (avpkt.size > 0) {
        out_size = AVCODEC_MAX_AUDIO_FRAME_SIZE;
        len = avcodec_decode_audio3(gCodecCtx, (short *)outbuf, &out_size, &avpkt);
        if (len < 0) {
            LOGE(1, "Error while decoding: %d", len);
            exit(1);
        }
        if (out_size > 0) {
            fwrite(outbuf, 1, out_size, resultFile);
        }
        avpkt.size -= len;
        avpkt.data += len;
        if (avpkt.size < AUDIO_REFILL_THRESH) {
            memmove(inbuf, avpkt.data, avpkt.size);
            avpkt.data = inbuf;
            len = fread(avpkt.data + avpkt.size, 1,
                        AUDIO_INBUF_SIZE - avpkt.size, sourceFile);
            if (len > 0)
                avpkt.size += len;
        }
    }

    fclose(resultFile);
    fclose(sourceFile);
    free(outbuf);

    avcodec_close(gCodecCtx);
    av_free(gCodecCtx);

    LOGI(10, "end decode.");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-10T19:42:00.203

首先，avcodec 将许多有用的消息打印到 stdout/stderr，因此请执行以下操作（至少在出现问题时）：

```
static void cb(void*, int, const char* fmt, va_list vl) {
  __android_log_print(ANDROID_LOG_DEBUG, "avlib", fmt, vl);
}
av_log_set_callback(cb); 
```

我想你有“缺少标题”错误。无论如何，在这里您可以找到几乎可以使用的用法示例：（ [答案）使用 ffmpeg API 进行 mp3 解码（缺少标题）](https://stackoverflow.com/a/27880326/956170)

# c++ - 类似统一的东西，但对于 C++ 程序员

> ID：10188636
> 
> 赞同：9
> 
> 时间：2012-04-17T09:30:37.400
> 
> 标签：c++, desktop-application, game-engine

有什么类似于统一的东西，但不同之处在于我可以使用 C++ 而不是 javascript？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T14:22:57.253

有趣的是，我希望学习一点团结，因为我认为这是一些帖子的要求......我发现了这个问题。

我认为 Ogre3D 很棒......它可能是你正在寻找的东西。这是链接 ogre3d.org

我用的是Ogre3D。[http://www.ogre3d.org/](http://www.ogre3d.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T09:40:46.660

Unity 使用 Javascript 有点误解。Unity中使用的所谓Javascript，其实是Javascript的一种方言，它与CLI兼容，与官方的Javascript并不完全相同。此外，您不仅限于在 Unity 中使用 Javascript。您还可以使用 C#，它在某些方面类似于 C++ 和 Java，或者是不太常用的 Boo 脚本。

就个人而言，我建议在 Unity 中使用 C#，因为它非常强大，并且允许通过 P/Invoke 调用本机 C/C++ 函数。这是插件使用的链接：http: [//unity3d.com/support/documentation/Manual/Plugins.html](http://unity3d.com/support/documentation/Manual/Plugins.html)

链接到游戏引擎列表。请花时间阅读并考虑它们： [http ://en.wikipedia.org/wiki/List_of_game_engines](http://en.wikipedia.org/wiki/List_of_game_engines)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T12:35:25.197

如果你想要 Unity 提供的可访问性，C++ 肯定是错误的选择。更好的是解释/脚本语言，例如 Python。它们在 Web 浏览器/许多操作系统中工作时更加灵活。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T09:32:56.877

如果您对定位移动平台感兴趣，那么[Marmalade](http://www.madewithmarmalade.com/)可能是一个不错的选择。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-17T12:24:59.753

[Panda3D](http://www.panda3d.org/)与 Unity 相比，它不是一个想法，但它可以作为 Web 插件工作，跨平台。它缺少 IDE，但它是开源的。

据我所知，Unity 没有必要使用 JavaScript 或 Boo，C# 像脚本语言一样没有错（这对 C++ 来说真的很难）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-03T09:13:45.280

作为一名统一开发人员，我喜欢将 c++ 添加到知识库中，因为所有 AAA 游戏都是由 C++ 制作的，我一直在寻找类似统一但针对 CPP 的东西。唯一好的 cpp 引擎是不真正支持 c++ 的虚幻引擎。该语言是 c++ 的方言，存在很大差异。非常喜欢

*   指针和引用的罕见用法
*   更多语法，如 c# 属性（cpp 没有属性）...

所以你不会学习内存管理。我能找到的最接近的东西是 COCOS2dx，因为整个框架是用纯标准 c++ 编写的，并且已经添加了许多库，如 UI 和 Physics。你可以用它编写自己的引擎和编辑器。

# ruby-on-rails - Haml 中的 iframe src

> ID：10188637
> 
> 赞同：2
> 
> 时间：2012-04-17T09:30:46.027
> 
> 标签：ruby-on-rails, ruby, haml

使用 iframe 时，我总是得到一个空页面。我在*src*中放置了包含用于创建复选框的代码的 Haml 文件的位置：

视图.haml：

```
%iframe{:src => "file:///home/marina/project/app/views/blog_posts/new2.haml"} 
```

新2.haml：

```
%h1 popup
br
%input{:name => "option1", :type => "checkbox", :value => "Milk"}
Milk
%br
%input{:name => "option2", :type => "checkbox", :value => "Butter"}
Butter
%br
%input{:name => "option3", :type => "checkbox", :value => "Cheese"}
Cheese
%br 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T13:40:34.057

尝试 ：

如果文件在同一个地方

```
%iframe{:src => "blog_posts/new2.haml"} 
```

否则建议将其用作：

为 new2 操作创建路由并通过 url 调用 iframe，例如：

```
%iframe{:src => "http://yourdomain.com/new2"} 
```

# ruby-on-rails - Ruby on Rails：运行“rake assets:precompile”时出现分段错误

> ID：10188638
> 
> 赞同：1
> 
> 时间：2012-04-17T09:30:46.523
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rake, segmentation-fault, execjs

两天以来，我再也无法在我的 ruby​​ on rails 项目中编译 javascript 资产了。如果我不运行预编译命令，当 ruby​​ 在运行时编译资产时会发生同样的错误。'rake assets:precompile' 命令由于分段错误而中止：

```
bundle exec rake assets:precompile --trace
** Invoke assets:precompile (first_time)
** Execute assets:precompile
/home/Roseboom/.rvm/rubies/ruby-1.9.3-p125/bin/ruby /home/Roseboom/.rvm/gems/ruby-1.9.3-p125/bin/rake assets:precompile:all RAILS_ENV=production RAILS_GROUPS=assets --trace
** Invoke assets:precompile:all (first_time)
** Execute assets:precompile:all
** Invoke assets:precompile:primary (first_time)
** Invoke assets:environment (first_time)
** Execute assets:environment
** Invoke environment (first_time)
** Execute environment
** Invoke tmp:cache:clear (first_time)
** Execute tmp:cache:clear
** Execute assets:precompile:primary
sh: regel 1: 15071 Segmentatiefout         node /tmp/execjs20120417-15062-69pd5q.js 2>&1
rake aborted!
["ok","(function() {\n\n\n\n}).call(this);\n"]
  (in /home/Roseboom/gitControlled/ror/livescore/app/assets/javascripts/clubs.js.coffee)
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/execjs-1.3.0/lib/execjs/external_runtime.rb:150:in `exec_runtime'
 [.... Remaining stacktrace below this post for the sake of readability ] 
```

在这里，“Segmentatiefout”是荷兰语的“Segmentation fault”。起初，我以为我的项目搞砸了，于是我开始恢复更改以隔离“坏”更改。当这没有帮助时，我在一个我几周没有遇到困难的项目中尝试了“bundle exec rake assets:precompile”，这让我遇到了同样的分段错误。

现在我试图找到这个“execjs20120417-15062-69pd5q.js”文件来删除它。即使在 unix 'find' 命令的帮助下，我也找不到。即使中止，也可能会清除此临时文件。

我尝试的下一件事是重新安装 rake，这对我没有帮助。虽然在运行 'rake assets:precompile' 时发生了同样的错误，但我也尝试重新安装 bundler。这也没有奏效。

接下来的事情有点严格，我在我的系统上重新安装了 ruby​​ 和 rails。不幸的是，根本没有改变。Rails 版本是 3.2.2，重新安装后是 3.2.3。

我尝试的最后一件事是卸载 gem execjs，然后重新安装它，但也没有任何帮助。

将 RAILS_ENV 更改为 development 也不会改变任何内容。

当我清除我的 app/assets/javascripts 文件夹时，我可以预编译，我可以运行我的应用程序（如[Rails assets precompile 神秘错误](https://stackoverflow.com/questions/8839608/rails-assets-precompile-mysterious-error)中所述）。我希望 ruby​​ 能够使用之前成功编译的资产。但是，这意味着我永远无法更改 app/assets/javascripts 的内容，这是不可取的。如果我删除了所有的 .js.coffee 文件，那么剩下的 .js 文件就会出现分段错误。

文件 clubs.js.coffee 是自动生成的，我从未更改过。它是几周前生成的，在两天前之前从未给我带来任何问题。如果我删除它，那么另一个 .coffe 或 .js 文件也会发生同样的错误。clubs.js.coffee 包含：

```
# Place all the behaviors and hooks related to the matching controller here.
# All this logic will automatically be available in application.js.
# You can use CoffeeScript in this file: http://jashkenas.github.com/coffee-script/ 
```

我对此真的没有想法。在此先感谢您的帮助。

完整的堆栈跟踪：

```
bundle exec rake assets:precompile --trace
** Invoke assets:precompile (first_time)
** Execute assets:precompile
/home/Roseboom/.rvm/rubies/ruby-1.9.3-p125/bin/ruby /home/Roseboom/.rvm/gems/ruby-1.9.3-p125/bin/rake assets:precompile:
all RAILS_ENV=production RAILS_GROUPS=assets --trace
** Invoke assets:precompile:all (first_time)
** Execute assets:precompile:all
** Invoke assets:precompile:primary (first_time)
** Invoke assets:environment (first_time)
** Execute assets:environment
** Invoke environment (first_time)
** Execute environment
** Invoke tmp:cache:clear (first_time)
** Execute tmp:cache:clear
** Execute assets:precompile:primary
sh: regel 1: 15936 Segmentatiefout         node /tmp/execjs20120417-15927-1ka3s2r.js 2>&1
rake aborted!
["ok","(function() {\n\n\n\n}).call(this);\n"]
  (in /home/Roseboom/gitControlled/ror/livescore/app/assets/javascripts/clubs.js.coffee)
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/execjs-1.3.0/lib/execjs/external_runtime.rb:150:in `exec_runtime'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/execjs-1.3.0/lib/execjs/external_runtime.rb:27:in `block in exec'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/execjs-1.3.0/lib/execjs/external_runtime.rb:40:in `compile_to_tempfile'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/execjs-1.3.0/lib/execjs/external_runtime.rb:26:in `exec'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/execjs-1.3.0/lib/execjs/external_runtime.rb:18:in `eval'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/execjs-1.3.0/lib/execjs/external_runtime.rb:32:in `call'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/coffee-script-2.2.0/lib/coffee_script.rb:57:in `compile'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/tilt-1.3.3/lib/tilt/coffee.rb:46:in `evaluate'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/tilt-1.3.3/lib/tilt/template.rb:76:in `render'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/sprockets-2.1.2/lib/sprockets/context.rb:177:in `block in evaluate'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/sprockets-2.1.2/lib/sprockets/context.rb:174:in `each'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/sprockets-2.1.2/lib/sprockets/context.rb:174:in `evaluate'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/sprockets-2.1.2/lib/sprockets/processed_asset.rb:12:in `initialize'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/sprockets-2.1.2/lib/sprockets/base.rb:241:in `new'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/sprockets-2.1.2/lib/sprockets/base.rb:241:in `block in build_asset'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/sprockets-2.1.2/lib/sprockets/base.rb:262:in `circular_call_protection'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/sprockets-2.1.2/lib/sprockets/base.rb:240:in `build_asset'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/sprockets-2.1.2/lib/sprockets/index.rb:89:in `block in build_asset'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/sprockets-2.1.2/lib/sprockets/caching.rb:19:in `cache_asset'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/sprockets-2.1.2/lib/sprockets/index.rb:88:in `build_asset'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/sprockets-2.1.2/lib/sprockets/base.rb:163:in `find_asset'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/sprockets-2.1.2/lib/sprockets/index.rb:56:in `find_asset'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/sprockets-2.1.2/lib/sprockets/processed_asset.rb:106:in `block in build_required_assets'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/sprockets-2.1.2/lib/sprockets/processed_asset.rb:100:in `each'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/sprockets-2.1.2/lib/sprockets/processed_asset.rb:100:in `build_required_assets'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/sprockets-2.1.2/lib/sprockets/processed_asset.rb:16:in `initialize'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/sprockets-2.1.2/lib/sprockets/base.rb:241:in `new'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/sprockets-2.1.2/lib/sprockets/base.rb:241:in `block in build_asset'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/sprockets-2.1.2/lib/sprockets/base.rb:262:in `circular_call_protection'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/sprockets-2.1.2/lib/sprockets/base.rb:240:in `build_asset'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/sprockets-2.1.2/lib/sprockets/index.rb:89:in `block in build_asset'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/sprockets-2.1.2/lib/sprockets/caching.rb:19:in `cache_asset'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/sprockets-2.1.2/lib/sprockets/index.rb:88:in `build_asset'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/sprockets-2.1.2/lib/sprockets/base.rb:163:in `find_asset'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/sprockets-2.1.2/lib/sprockets/index.rb:56:in `find_asset'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/sprockets-2.1.2/lib/sprockets/bundled_asset.rb:16:in `initialize'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/sprockets-2.1.2/lib/sprockets/base.rb:244:in `new'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/sprockets-2.1.2/lib/sprockets/base.rb:244:in `build_asset'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/sprockets-2.1.2/lib/sprockets/index.rb:89:in `block in build_asset'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/sprockets-2.1.2/lib/sprockets/caching.rb:19:in `cache_asset'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/sprockets-2.1.2/lib/sprockets/index.rb:88:in `build_asset'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/sprockets-2.1.2/lib/sprockets/base.rb:163:in `find_asset'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/sprockets-2.1.2/lib/sprockets/index.rb:56:in `find_asset'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/actionpack-3.2.3/lib/sprockets/static_compiler.rb:20:in `block in compile'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/sprockets-2.1.2/lib/sprockets/base.rb:212:in `block in each_logical_path'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/sprockets-2.1.2/lib/sprockets/base.rb:200:in `block (2 levels) in each_file'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/sprockets-2.1.2/lib/sprockets/base.rb:190:in `each'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/sprockets-2.1.2/lib/sprockets/base.rb:190:in `each_entry'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/sprockets-2.1.2/lib/sprockets/base.rb:198:in `block in each_file'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/sprockets-2.1.2/lib/sprockets/base.rb:197:in `each'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/sprockets-2.1.2/lib/sprockets/base.rb:197:in `each_file'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/sprockets-2.1.2/lib/sprockets/base.rb:210:in `each_logical_path'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/actionpack-3.2.3/lib/sprockets/static_compiler.rb:18:in `compile'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/actionpack-3.2.3/lib/sprockets/assets.rake:56:in `internal_precompile'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/actionpack-3.2.3/lib/sprockets/assets.rake:70:in `block (3 levels) in <top
 (required)>'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
/home/Roseboom/.rvm/rubies/ruby-1.9.3-p125/lib64/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/actionpack-3.2.3/lib/sprockets/assets.rake:60:in `block (3 levels) in <top
 (required)>'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
/home/Roseboom/.rvm/rubies/ruby-1.9.3-p125/lib64/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block (2 levels) in top_level'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block in top_level'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `block in run'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/bin/rake:33:in `<top     (required)>'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/bin/rake:19:in `load'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/bin/rake:19:in `<main>'
Tasks: TOP => assets:precompile:primary
rake aborted!
Command failed with status (1): [/home/Roseboom/.rvm/rubies/ruby-1.9.3-p125...]
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/file_utils.rb:53:in `block in create_shell_runner'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/file_utils.rb:45:in `call'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/file_utils.rb:45:in `sh'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/file_utils_ext.rb:39:in `sh'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/file_utils.rb:80:in `ruby'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/file_utils_ext.rb:39:in `ruby'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/actionpack-3.2.3/lib/sprockets/assets.rake:12:in `ruby_rake_task'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/actionpack-3.2.3/lib/sprockets/assets.rake:21:in `invoke_or_reboot_rake_task'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/actionpack-3.2.3/lib/sprockets/assets.rake:29:in `block (2 levels) in <top
 (required)>'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
/home/Roseboom/.rvm/rubies/ruby-1.9.3-p125/lib64/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block (2 levels) in top_level'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block in top_level'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `block in run'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/bin/rake:33:in `<top     (required)>'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/bin/rake:19:in `load'
/home/Roseboom/.rvm/gems/ruby-1.9.3-p125/bin/rake:19:in `<main>'
Tasks: TOP => assets:precompile 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T09:39:56.323

尝试将 execjs 更改为 therubyracer gem。在我切换到 ruby​​racer 之前，我在 execjs 上遇到了很多问题。现在一切正常。

```
group :assets do

  gem 'sass'
  gem 'coffee-script'
  gem 'uglifier'
  gem 'therubyracer'

end 
```

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-28T07:42:09.723

就我而言，这是因为我使用了错误的 Ruby 版本。记得仔细检查项目的 Ruby 版本

# c# - 如何检测条形码扫描仪是否连接到 PC

> ID：10188642
> 
> 赞同：0
> 
> 时间：2012-04-17T09:31:04.830
> 
> 标签：c#, windows, barcode-scanner

我正在编写一个应用程序来检测是否有任何条码扫描仪连接到电脑上。我不知道如何查询已安装的设备以检查条形码扫描仪。我正在使用 C# 和 .NET 4.0。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T09:36:52.613

一些条形码扫描仪是通过键盘楔连接的（或者他们的驱动程序将它们报告为键盘） - 我相信没有办法测试这些是否存在。

其他特定的扫描仪可以通过它们的 USB 端口访问，但任何状态查询都必须逐个型号进行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T09:41:08.043

您可能想使用 WMI ...

下面是一些可能有帮助的 CodeProject 链接。

[http://www.codeproject.com/Articles/18268/How-To-Almost-Everything-In-WMI-via-C-Part-3-Hardw](http://www.codeproject.com/Articles/18268/How-To-Almost-Everything-In-WMI-via-C-Part-3-Hardw)

[http://www.codeproject.com/Articles/21503/Hardware-Helper-Library-for-C](http://www.codeproject.com/Articles/21503/Hardware-Helper-Library-for-C)

# json - 如何在 grails 中注册自定义 json 编组器

> ID：10188643
> 
> 赞同：8
> 
> 时间：2012-04-17T09:31:06.277
> 
> 标签：json, grails, groovy

我正在尝试像这样注册一个自定义 json marshaller

```
 JSON.createNamedConfig("dynamic",{ 
            def m = new CustomJSONSerializer()
            JSON.registerObjectMarshaller(Idf, 1, { instance, converter -> m.marshalObject(instance, converter) }) 
            })

and then using it like this

    JSON.use("dynamic"){
            render inventionList as JSON
            } 
```

但我不确定是否正在使用我的自定义序列化程序，因为当我调试控件时`marshalObject`，我的自定义序列化程序永远不会发挥作用

我的自定义序列化程序如下

```
import grails.converters.deep.JSON
import java.beans.PropertyDescriptor
import java.lang.reflect.Field
import java.lang.reflect.Method
import org.codehaus.groovy.grails.web.converters.exceptions.ConverterException
import org.codehaus.groovy.grails.web.converters.marshaller.json.GroovyBeanMarshaller
import org.codehaus.groovy.grails.web.json.JSONWriter

class CustomJSONSerializer extends GroovyBeanMarshaller{
    public boolean supports(Object object) {
        return object instanceof GroovyObject;
    }

    public void marshalObject(Object o, JSON json) throws ConverterException {
        JSONWriter writer = json.getWriter();
        println 'properties '+BeanUtils.getPropertyDescriptors(o.getClass())
        for(PropertyDescriptor property:BeanUtils.getProperyDescriptors(o.getClass())){
                println 'property '+property.getName()
            }
        try {
            writer.object();
            for (PropertyDescriptor property : BeanUtils.getPropertyDescriptors(o.getClass())) {
                String name = property.getName();
                Method readMethod = property.getReadMethod();
                if (readMethod != null && !(name.equals("metaClass")) && readMethod.getName()!='getSpringSecurityService') {
                    Object value = readMethod.invoke(o, (Object[]) null);
                    writer.key(name);
                    json.convertAnother(value);
                }
            }
            for (Field field : o.getClass().getDeclaredFields()) {
                int modifiers = field.getModifiers();
                if (Modifier.isPublic(modifiers) && !(Modifier.isStatic(modifiers) || Modifier.isTransient(modifiers))) {
                    writer.key(field.getName());
                    json.convertAnother(field.get(o));
                }
            }
            writer.endObject();
        }
        catch (ConverterException ce) {
            throw ce;
        }
        catch (Exception e) {
            throw new ConverterException("Error converting Bean with class " + o.getClass().getName(), e);
        }
    }

} 
```

是否可以调试序列化程序？如果不是，那么如何从序列化中排除属性？有一些属性会在序列化过程中引发异常。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-19T11:49:01.430

这就是我在 Bootstrap init 闭包中为自定义 JSON 编组所做的：

```
def init = {servletContext ->
    grailsApplication.domainClasses.each {domainClass ->
        domainClass.metaClass.part = {m ->
            def map = [:]
            if (m.'include') {
                m.'include'.each {
                    map[it] = delegate."${it}"
                }
            } else if (m.'except') {
                m.'except'.addAll excludedProps
                def props = domainClass.persistentProperties.findAll {
                    !(it.name in m.'except')
                }
                props.each {
                    map['id'] = delegate.id
                    map[it.name] = delegate."${it.name}"
                }
            }
            return map
        }

    }
    JSON.registerObjectMarshaller(Date) {
        return it?.format("dd.MM.yyyy")
    }
    JSON.registerObjectMarshaller(User) {
        def returnArray = [:]
        returnArray['username'] = it.username
        returnArray['userRealName'] = it.userRealName 
        returnArray['email'] = it.email
        return returnArray
    }
    JSON.registerObjectMarshaller(Role) {
        def returnArray = [:]
        returnArray['authority'] = it.authority
        return returnArray
    }
     JSON.registerObjectMarshaller(Person) {
        return it.part(except: ['fieldX', 'fieldY'])
    }} 
```

你看到我有日期、使用、人员和角色类的自定义编组器

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-22T09:26:46.493

我在尝试找出编组器注册的正确方法时发现了这篇文章。与 Nils 的回答相比，最大的不同是该解决方案使 BootStrap.groovy 完好无损，这很好。

[http://compiledammit.com/2012/08/16/custom-json-marshalling-in-grails-done-right/](http://compiledammit.com/2012/08/16/custom-json-marshalling-in-grails-done-right/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-20T15:47:00.223

要自定义 Json 序列化，最佳实践是使用 grails 插件，例如：http: [//grails.org/plugin/marshallers](http://grails.org/plugin/marshallers)

# windows-phone-7 - Windows phone 发布线程消息、发布消息

> ID：10188647
> 
> 赞同：1
> 
> 时间：2012-04-17T09:31:49.853
> 
> 标签：windows-phone-7, windows-phone-7.1

WP 是否支持早期 Windows Mobile 中的 PostThreadMessage 或 PostMessage 等 API。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T09:44:50.463

不幸的是，这种类型的 API 调用在 Windows Phone 上不可用！

事实上，您不能调用我们在 Windows Mobile 中使用的任何 Win32 API 调用；您仅限于托管 SDK 允许您执行的操作！

# asp.net - 如何在模块化弹出窗口中在gridview中实现分页？

> ID：10188649
> 
> 赞同：0
> 
> 时间：2012-04-17T09:32:07.537
> 
> 标签：asp.net

我正在使用模块化弹出窗口在弹出窗口中显示 gridview。现在我想实现这个gridview的分页。当我单击页码时，弹出窗口消失。我该如何避免呢？我希望它仅在单击关闭按钮时消失。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T09:40:10.717

我假设您正在使用[`ModalPopupExtender`](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/ModalPopup/ModalPopup.aspx)来自`AjaxControlToolkit`.

如果您要回发，`ModalPopupExtender1.Show()`则始终需要在希望代码隐藏时调用它。

`Page_PreRender`如果您有很多事件并且您不想总是记住这一点，您可以通过使用来简化它：

```
protected void Page_PreRender(object sender, System.EventArgs e)
{
    // change "this" to somewhat appropriate for example your GridView
    // "this" makes sense for example in a UserControl
    if (this.Visible) {
        this.ModalPopupExtender1.Show();
    }
} 
```

# xpath - 谷歌搜索 url 的 xpath 问题没有内容

> ID：10188651
> 
> 赞同：0
> 
> 时间：2012-04-17T09:32:13.777
> 
> 标签：xpath

[http://www.google.com/search?q=youtube](http://www.google.com/search?q=youtube)

试图获取搜索的网址部分 www.youtube.com/

使用这个 xpath 但它没有输出。

```
.//*[@id='rso']/li[1]/div/div[2]/div[1]/cite 
```

我也尝试过使用css路径同样的问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T11:33:53.263

CSS `div[aria-label='Result details']+div>div cite`：。顺便说一句，你的 xpath 对我来说很好。例如，如果您使用 selenium 来检索您的文本，您应该`xpath=.//`在这种情况下编写，因为它通过前面的`//`符号将选择器识别为 xpath。也`//*[@id='rso']/li[1]/div/div[2]/div[1]/cite//text()`将返回三个 textNodes `www.`，`youtube`并且`.com/`

# python - Python，numpy：3维广播

> ID：10188652
> 
> 赞同：0
> 
> 时间：2012-04-17T09:32:16.203
> 
> 标签：python, arrays, math, numpy, broadcast

我是 numpy 广播的新手。我定义了三个 numpy 数组，如下所示：

```
from numpy import *
a=array([10,20]).reshape(2,1)
b=array([100,200,300]).reshape(1,3)
c=arange(1,11).reshape(1,1,10) 
```

a+b 是 (2,1) 与 (1,3) 的总和，因此它应该是可广播的（dim 1 中的 2vs1，dim 2 中的 1vs3，广播规则已满足）。它的确是：

```
>>> a+b
array([[110, 210, 310],
       [120, 220, 320]]) 
```

a+c 是 (2,1) 与 (1,1,10) 的总和，因此它应该是可广播的（在昏暗 1 中为 2vs1，在昏暗 2 中为 1vs1，在昏暗 3 中为 1vs10，广播规则已满足）。它的确是：

```
>>> a+c
array([[[11, 12, 13, 14, 15, 16, 17, 18, 19, 20],
        [21, 22, 23, 24, 25, 26, 27, 28, 29, 30]]]) 
```

b+c 是 (1,3) 与 (1,1,10) 的总和，因此它应该是可广播的（dim 1 中的 1vs1，dim 2 中的 3vs1，dim 3 中的 1vs10。但它似乎不是：

```
>>> b+c
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: shape mismatch: objects cannot be broadcast to a single shape 
```

解释当然很明显......但请帮助我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T09:34:04.583

```
b[:,:,None] + c 
```

返回一个 (1, 3, 10) 数组。您必须定义缺少的轴（第三个）。

你也可以使用

```
b[:,:,newaxis] + c 
```

既然你导入`* from numpy`了，这通常不是一个好主意。

`import numpy as np`更好。这样，您将始终知道方法的来源（如果您导入更多包）：

```
import numpy as np
a = np.array([10,20]).reshape(2,1)
b = np.array([100,200,300]).reshape(1,3)
c = np.arange(1,11).reshape(1,1,10)

print a + b
print a + c
print b[:,:,np.newaxis] + c 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T14:37:17.827

> a+c 是 (2,1) 与 (1,1,10) 的总和，因此它应该是可广播的（在昏暗 1 中为 2vs1，在昏暗 2 中为 1vs1，在昏暗 3 中为 1vs10，广播规则已满足）。它的确是：
> 
> ```
> >>> a+c array([[[11, 12, 13, 14, 15, 16, 17, 18, 19, 20],
>                 [21, 22, 23, 24, 25, 26, 27, 28, 29, 30]]]) 
> ```

不完全是，请注意 a + c 是 (1, 2, 10) 而不是 (2, 1, 10)。

```
>>> from numpy import array, arange, newaxis
>>> a=array([10,20]).reshape(2,1)
>>> b=array([100,200,300]).reshape(1,3)
>>> c=arange(1,11).reshape(1,1,10)
>>> (a + c).shape
(1, 2, 10).shape 
```

当广播具有不同维度的数组时，维度较少的数组在开始时会用 1 填充，[这里有更多信息](http://www.google.com/url?sa=t&rct=j&q=numpy%20broadcasting&source=web&cd=1&ved=0CCwQFjAA&url=http://docs.scipy.org/doc/numpy/user/basics.broadcasting.html&ei=bH-NT8emH4vciQL4qZmgBA&usg=AFQjCNHKTx-GXkrE2KaY6zMcSZs7B9EF0w&cad=rja)，所以`b + c`就像尝试在 (1, 1, 10) 中添加 (1, 1, 3)。@eumiro 的建议，`b[:,:,np.newaxis] + c`可能是将 b 重塑为 (1,3,1) 的最简单方法，这样您就可以得到您所期望的。

# java - 如果使用 spring AuthenticationProcessingFilter 扩展类，则无法在 jpa 中保留实体

> ID：10188657
> 
> 赞同：1
> 
> 时间：2012-04-17T09:32:52.887
> 
> 标签：java, spring, jpa

我有这样的类层次结构

```
public class AccessHistoryJpaDAO extends PaginatedJpaDAO<AccessHistory, Long>
implements AccessHistoryDAO 
```

在 AccessHistoryJpaDAO 中，我实现了在 AccessHistoryDAO 接口中声明的 logIn 方法。

```
public void logIn(AccessHistory entity) throws DAOException
{
    super.save(entity);     
} 
```

然后我扩展了spring的AuthenticationProcessingFilter

公共类 CustomAuthenticatingFilter 扩展了 AuthenticationProcessingFilter

和覆盖的方法

```
@Override
public Authentication attemptAuthentication(HttpServletRequest request)
        throws AuthenticationException 
```

在我打电话的时候用这个方法

```
getAccessHistoryDAO().logIn(entity); 
```

hibernate 不能持久化实体但是当我直接调用

```
getAccessHistoryDAO().save(entity) 
```

上面的方法是持久实体，我试图弄清楚但没有线索，任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T11:46:54.857

它看起来像是 Proxy-AOP 的一个众所周知的问题。

我猜你在方法上有一个`@Transactional`注释。`save`但是只有在从 OTHER spring bean 调用该方法时才考虑这个 Annotation。如果它是从同一个 spring bean ( `this.save()`) 调用的，则不会调用 AOP 代理，因此不会启动 Transaction。

您可以通过至少三种不同的方式处理该问题：

*   在方法上添加附加`@Transactional`注释`logIn`，或
*   使用显式事务管理而不是声明式，
*   使用真正的 AspectJ 而不是 Spring Proxy-AOP（这就是我所做的）

# ruby - rails : rabl gem，自定义类型转换

> ID：10188662
> 
> 赞同：1
> 
> 时间：2012-04-17T09:33:05.057
> 
> 标签：ruby, type-conversion, rabl

我将 Mongo DB 与 Mongoid 一起使用，但同样的事情出现在 Mongo Mapper 中。

我得到以下输出：

```
{
  :a_doc => {
    :id => BSON::ObjectId('4f8d37521e5945f14a0000a3')
  }
} 
```

我想保持这种干净的语法：

```
object @a_doc
attributes :id 
```

而不是写：

```
object @a_doc
attributes :string_id => :id 
```

所以在 rabl 的某个时刻，我想捕捉类型来转换它。知道该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-15T02:52:56.673

这与 rabl 及其 JSON 支持库如何将对象转换为 JSON 有关。[人们报告了 Decimal 和时间戳](https://github.com/nesquena/rabl/issues/188)格式的类似问题。库可能没有正确进行转换

[您可以按照他的回答](https://stackoverflow.com/a/16765688/2284646)建议提供属性阅读器，例如

```
# doc.rb
def api_id
  id.to_s
end 
```

然后你的 rabl 观点：

```
# doc.rabl
object @a_doc
attributes :api_id 
```

# sql-server - 分页和INNER JOIN

> ID：10188667
> 
> 赞同：5
> 
> 时间：2012-04-17T09:33:28.610
> 
> 标签：sql-server, tsql, sql-server-2008-r2, inner-join

我有一种情况，我需要与`INNET JOIN`. 这是我遇到的类似情况：

```
DECLARE @categories AS TABLE(
    CatID INT,
    CategoryName NVARCHAR(100)
);

DECLARE @fooTable AS TABLE(
    ID INT,
    CatID INT,
    Name NVARCHAR(100),
    MinAllow INT,
    Price DECIMAL(18,2)
);

INSERT INTO @categories  VALUES(1, 'Cat1');
INSERT INTO @categories  VALUES(2, 'Cat2');
INSERT INTO @categories  VALUES(3, 'Cat3');
INSERT INTO @categories  VALUES(4, 'Cat4');
INSERT INTO @categories  VALUES(5, 'Cat5');

INSERT INTO @fooTable  VALUES(1, 1, 'Product1', 2, 112.2);
INSERT INTO @fooTable  VALUES(3, 1, 'Product3', 5, 233.32);
INSERT INTO @fooTable  VALUES(6, 1, 'Product6', 4, 12.43);
INSERT INTO @fooTable  VALUES(7, 4, 'Product7', 4, 12.43);
INSERT INTO @fooTable  VALUES(8, 5, 'Product8', 4, 12.43); 
```

这些是我的记录。如您所见，有些分类里面没有任何产品`@fooTable`。作为下一步，我们有以下`SELECT`声明：

```
SELECT * FROM @fooTable ft
INNER JOIN (
    SELECT ROW_NUMBER() OVER (ORDER BY CatID) AS RowNum, * FROM @categories
) AS cat ON (cat.CatID = ft.CatID); 
```

它是一个基本的 JOIN，除了输出还将携带类别的行号。我得到的这个查询的结果如下：

```
ID   CatID   Name          MinAllow    Price     RowNum   CatID    CategoryName
---- ------- ------------- ----------- --------- -------- -------- -------------
1    1       Product1      2           112.20    1        1        Cat1
3    1       Product3      5           233.32    1        1        Cat1
6    1       Product6      4           12.43     1        1        Cat1
7    4       Product7      4           12.43     4        4        Cat4
8    5       Product8      4           12.43     5        5        Cat5 
```

当您查看该`RowNum`列时，您会发现这些值对分页不友好。因此，当我尝试按如下方式对该表进行分页时，我得到了不正确的输出：

```
SELECT * FROM @fooTable ft
INNER JOIN (
    SELECT ROW_NUMBER() OVER (ORDER BY CatID) AS RowNum, * FROM @categories
)AS cat ON (cat.CatID = ft.CatID) AND (cat.RowNum BETWEEN 1 AND 2); 
```

我的实际情况与此类似，但该查询非常复杂，我需要让它与 INNER JOIN 一起使用。我希望我说清楚了。知道我是如何得到这样的工作的吗？

**编辑**

根据我第一次选择查询的上述结果，我应该能够`CatID`在我的第二次查询中检索到 1 和 4 的产品。这就是我的目标。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-17T10:13:06.070

一种解决方案可能是下一种解决方案：

```
SELECT  x.*
FROM
(
        SELECT  ft.*, 
                cat.CategoryName,
                DENSE_RANK() OVER (ORDER BY ft.CatID) AS Rnk
        FROM @fooTable ft
        INNER JOIN @categories cat ON (cat.CatID = ft.CatID)
) AS x
WHERE   x.Rnk BETWEEN 1 AND 2 
```

结果：

```
ID CatID Name     MinAllow Price   CategoryName Rnk
-- ----- -------- -------- ------- ------------ ---
1  1     Product1 2        112.20  Cat1         1
3  1     Product3 5        233.32  Cat1         1
6  1     Product6 4        12.43   Cat1         1
7  4     Product7 4        12.43   Cat4         2 
```

# ios - 使用图形 api 获取用户状态不适用于具有新时间线配置文件的用户

> ID：10188668
> 
> 赞同：0
> 
> 时间：2012-04-17T09:33:34.773
> 
> 标签：ios, facebook-graph-api

我是一名 iOS 开发人员。

我通过图形 api 读取了用户状态，它工作正常。

但现在对于任何拥有时间线配置文件的用户，返回数据都是空的。我应该怎么办？？

我的图形 api 请求的示例：

用户 ID/状态

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T11:00:29.093

我发现问题在于一些用户修改了他们的 Facebook 设置，不允许应用程序获取用户状态。

# scala - 使用电梯作为代理

> ID：10188669
> 
> 赞同：0
> 
> 时间：2012-04-17T09:33:40.360
> 
> 标签：scala, url, proxy, lift

我想禁止从外部完全访问 Solr 核心，并让它仅用于查询。因此，我在端口上的 Jetty servlet 容器（除了主 webapp）内启动带有连接器实例的辅助服务器，这是无法从 WWW 访问的。

当`liftweb`应用程序有传入的 HTTP 请求时，我会使用`RestHelper`：

```
object Dispatcher extends RestHelper {
  serve {
    case List("api", a @ _*) JsonGet _ => JString("API is not implemented yet. rest: " + a)
  }
} 
```

将我的浏览器定位到`http://localhost/api/solr/select?q=region`我得到一个响应`"API is not implemented yet. rest: List(solr, select)"`，所以它似乎有效。现在我想在内部端口（Solr 所在的位置）上进行连接，以便使用`api`URL 的后半部分（即`http://localhost:8080/solr/select?q=region`）传递查询。我正在捕获 URL 的尾随 REST 部分（通过`a @ _*`），但是如何访问 URL 参数？最好将原始字符串（在`api`路径元素之后）传递给 Solr 实例，以防止多余的解析/构建步骤。所以适用于 Solr 的响应：我想避免解析构建 JsonResponse。

这似乎是做一些 HTTP 重定向的一个很好的例子，但是据我所知，我必须打开隐藏的 Solr 端口。

处理这项任务的最有效方法是什么？

**编辑：**

好吧，我错过了之后`JsonGet`的`Req`价值，它包含所有需要的信息。但是有没有办法避免不必要的解析/组合 URL 到隐藏端口和 JSON 响应？

**解决方案：**

这就是我考虑戴夫的建议：

```
import net.liftweb.common.Full
import net.liftweb.http.{JsonResponse, InMemoryResponse}
import net.liftweb.http.provider.HTTPRequest
import net.liftweb.http.rest.RestHelper
import dispatch.{Http, url}

object ApiDispatcher extends RestHelper {
  private val SOLR_PORT = 8080

  serve { "api" :: Nil prefix {
    case JsonGet(path @ List("solr", "select"), r) =>
      val u = localApiUrl(SOLR_PORT, path, r.request)
      Http(url(u) >> { is =>
        val bytes = Stream.continually(is.read).takeWhile(-1 !=).map(_.toByte).toArray
        val headers = ("Content-Length", bytes.length.toString) ::
          ("Content-Type", "application/json; charset=utf-8") :: JsonResponse.headers
        Full(InMemoryResponse(bytes, headers, JsonResponse.cookies, 200))
      })
  }}

  private def localApiUrl(port: Int, path: List[String], r: HTTPRequest) =
    "%s://localhost:%d/%s%s".format(r.scheme, port, path mkString "/", r.queryString.map("?" + _).openOr(""))
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T15:57:53.837

我不确定我是否理解您的问题，但如果您想返回从 solr 收到的 JSON 而不对其进行解析，您可以使用包含 JSON 的 byte[] 表示的 net.liftweb.http.InMemoryResponse。

# jpa - 注释字段和它的getter方法JPA之间的区别

> ID：10188670
> 
> 赞同：3
> 
> 时间：2012-04-17T09:33:43.403
> 
> 标签：jpa, annotations, obfuscation

我试图弄清楚在注释（让我们以@id为例）getter方法和直接相关字段之间是否存在差异，如果我注释该字段，JPA是否使用某种反射来调用相应的getter？因为在我的情况下，我试图混淆我的实体类，所以我正在寻找一种方法来保留业务逻辑，因为 getter 将被重命名为 aaa() 之类的东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-17T09:57:33.203

以下是 JPA2 规范第 2.3.1 节所说的内容：

> 默认情况下，单一访问类型（字段或属性访问）适用于实体层次结构。实体层次结构的默认访问类型由实体类的属性和未明确指定访问类型的映射超类的映射注释的位置确定。访问类型通过访问注释[6] 明确指定，如第 2.3.2 节所述。当注释用于定义默认访问类型时，映射注释在实体类的持久字段或持久属性上的放置将访问类型分别指定为基于字段或基于属性的访问。
> 
> *   当使用基于字段的访问时，实体类的对象/关系映射注解注解实例变量，持久化提供者运行时直接访问实例变量。所有未使用 Transient 注解的非瞬态实例变量都是持久的。
> *   当使用基于属性的访问时，实体类的对象/关系映射注解注解 getter 属性访问器[7]，持久化提供者运行时通过属性访问器方法访问持久化状态。所有未使用 Transient 注释注释的属性都是持久的。
> *   映射注释不得应用于瞬态或瞬态的字段或属性。
> 
> 以这种方式默认访问类型的实体层次结构中的所有此类类必须在它们在字段或属性上的注释放置方面保持一致，以便在层次结构中应用单个一致的默认访问类型。此类类使用的任何可嵌入类都将具有与层次结构的默认访问类型相同的访问类型，除非按如下定义指定访问注释。如果无法确定默认访问类型并且未通过注释或 XML 描述符显式指定访问类型，则会出现错误。在没有明确指定 Access 注释的情况下，将注释放置在实体层次结构中的字段和属性上混合的应用程序的行为是未定义的。

因此，如果您想避免混淆问题，请始终注释字段而不是 getter，或者使用 @Access 注释强制字段访问类型。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-12T08:57:10.940

JPA 允许对持久类的数据进行两种类型的访问。字段访问意味着它将实例变量（字段）映射到数据库中的列，而属性访问意味着使用 getter 来确定将映射到数据库的属性名称。它将使用什么访问类型取决于您将 @Id 注释放在哪里（在 id 字段或 getId() 方法上）。

# c# - 带有快速测试的 C# Lambda 语句

> ID：10188671
> 
> 赞同：1
> 
> 时间：2012-04-17T09:33:45.467
> 
> 标签：c#, sql, linq, linq-to-sql, lambda

我正在尝试设计一个过滤特定位置的 LINQ 查询。在我的 UI 下拉列表中，该下拉列表的第一个条目为“所有站点”。因此，当查询将“所有站点”视为值时，它不应该执行过滤器。这可能没有多大意义，但这就是我过去在 SQL 中的做法。

```
select * from table
where ((location = @loc and @loc is not null) or (@loc is null)) 
```

这就是我试图在 LINQ 中做到这一点的方式。

```
var dataSetB = db.Data
.Where(j => loc != 'All Sites' && j.Location1.Description.Equals(loc)); 
```

问题是，当用户选择“所有站点”时 - 当我期望所有结果未按位置过滤时，不会返回任何结果。

有谁知道如何在一个 LINQ 语句中完成此任务？

示例下拉列表..

```
<All Sites>
<Sydney>
<New York>
<London> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T09:38:55.310

不完全确定这会起作用：

```
var dataSetB = db.Data
  .Where(j => loc != 'All Sites' ? j.Location1.Description.Equals(loc) : true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T09:42:18.307

您的下拉菜单通常不会只有文本，它通常会绑定到文本/值对。因此，您读取的文本条目`New South Wales`将具有相应的`NSW`. 读取的条目`All Sites`的值为`null`。因此，您可以将查询更改为：

```
public object GetMyStuff(string loc)
{
    var dataSetB = db.Data
                     .Where(j => loc == null || j.Location1.Description == loc);
} 
```

表达式中应用了逻辑快捷方式，因此`j.Location1.Description`只有在传递的 loc 值不为空时才会比较 。

`All Sites`使用中性位置值很重要——出于各种原因，您并不想比较文字文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T09:38:44.477

只需使用`OR`运算符将​​您的查询转换为 LINQ：

```
var dataSetB = db.Data
          .Where(j => loc == 'All Sites' 
                      || j.Location1.Description.Equals(loc)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T09:38:59.510

尝试这个

```
var dataSetB = db.Data;
if (loc != 'All Sites')
    dataSetB = dataSetB
                .Where(j => loc != 'All Sites' && j.Location1.Description.Equals(loc)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-17T09:39:03.213

像这样使用`if.. else`：

```
var dataSetB = db.Data;
if(dropdownlist.SelectedIndex != 0)
      dataSetB = dataSetB.Where(j => j.Location1.Description.Equals(loc)); 

//loc should be the dropdown list value 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-17T09:39:36.630

我不知道您是否要将 LINQ 用于“所有站点”案例。

检查下拉值是否==“所有站点”。

如果为真，则使用整个数据集。
如果为 false，则执行 LINQ 查询。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-17T09:40:13.140

如果你想要所有结果，过滤器应该接受所有条目，所以我认为正确的语法是：

```
var dataSetB = db.Data
                .Where(j => loc == 'All Sites' || j.Location1.Description.Equals(loc)); 
```

# c# - 分析 C# .net 代码的 CPU 缓存？

> ID：10188673
> 
> 赞同：5
> 
> 时间：2012-04-17T09:33:46.497
> 
> 标签：c#, .net, profiling, cpu-cache

我见过一些工具，您可以通过这些工具分析 C 和 C++ 的缓存，但该工具 (Valgrind) 是为 Linux 设计的，他们在他们的网站上声明，为 Windows 开发工作量太大）。

C# 开发人员是否可以使用任何工具来分析缓存？

我有 ANTS Performance Profiler，但它不执行缓存分析。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T06:37:55.470

试试英特尔 VTune 放大器。使用此工具，您可以收集有关缓存命中、未命中以及其他一些与缓存和内存相关的计数器的信息。

我还没有尝试将它用于 C# 分析，但它的工作方式应该与原生 C/C++ 相同。

# .net - 如何正确清理 MSMQ 侦听器？

> ID：10188678
> 
> 赞同：3
> 
> 时间：2012-04-17T09:34:11.833
> 
> 标签：.net, msmq

我有使用异步 API 支持从 MSMQ 读取的代码，即使用 BeginReceive()、EndReceive() 和 ReceivedCompleted 事件。基本模式是（取自[MessageQueue.ReceiveCompleted Event](http://msdn.microsoft.com/en-us/library/system.messaging.messagequeue.receivecompleted.aspx) ...

```
void StartListening()
{
   _msgQ.ReceiveCompleted += ReceiveCompletedEventHandler(FooReceiveCompleted);
   _msgQ.BeginReceive();
}

void FooReceiveCompleted(Object source, ReceiveCompletedEventArgs asyncResult)
{
   Message msg = _msgQ.EndReceive();
   // Do stuff with message.

   // Set up listening for next message.
   _msgQ.BeginReceive();
}

void StopListening()
{
   _msgQ.Close();
} 
```

我可以看到的问题是，总是有一个待处理的 BeginReceive() 等待新消息，并且通过阅读 .Net 文档，似乎没有官方/推荐的方式来清理它以停止收听。

如果我在没有要接收的消息的情况下调用 EndReceive()，则调用会阻塞，直到有消息可用。或者，除非 EnableConnectionCache 设置为 false，否则 Close() 似乎不会清理 MSMQ 上的底层句柄（因此也不会清理挂起的侦听器），否则句柄会被缓存并且不会在调用关闭时被清理。我可以这样做，但理想情况下我想使用缓存。

我能看到的唯一其他选项是启用缓存，然后调用静态方法 MessageQueue.ClearConnectionCache() 可能是应用程序域范围，因此会影响与我尝试关闭的队列无关的队列。

附录：附加选项（来自[MessageQueue.Close()](http://msdn.microsoft.com/en-us/library/system.messaging.messagequeue.close.aspx)）...

> 关闭并不总是释放队列的读写句柄，因为它们可能是共享的。您可以采取以下任何步骤来确保 Close 将读取和写入句柄释放到队列：
> 
> 创建具有独占访问权限的 MessageQueue。为此，请调用 MessageQueue(String, Boolean) 或 MessageQueue(String, Boolean, Boolean) 构造函数，并将 sharedModeDenyReceive 参数设置为 true。
> 
> 创建禁用连接缓存的 MessageQueue。为此，请调用 MessageQueue(String, Boolean, Boolean) 构造函数并将 enableConnectionCache 参数设置为 false。
> 
> 禁用连接缓存。为此，请将 EnableConnectionCache 属性设置为 false。

*因此，我对文档 API 的第一印象是，除非不使用缓存或*您对队列具有独占访问权限，否则您无法正确终止队列（使用 BeginReceive/EndReceive 时） 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T16:38:44.977

看看这里[事件驱动的消费者](http://www.ruslanrusu.com/post/21189098575/naked-msmq)。**截至 2018 年 12 月 19 日，此 URL 返回 404。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-19T10:58:33.720

问题的症结在于MSDN 上[MessageQueue.ReceiveCompleted Event](https://msdn.microsoft.com/en-us/library/system.messaging.messagequeue.receivecompleted.aspx)的示例 C#使用了没有参数的 BeginReceive()。这是一个立即返回给调用者的异步调用，但是它会导致一个未完成的异步操作，该操作可能具有很长的生命周期。

当我们尝试在 MessageQueue 上调用 Close() 时，这个未完成的异步操作会阻止 MessageQueue 的正确释放。

一种解决方案是使用 BeginReceive(Timeout); 即使没有消息，这也会导致 ReceiveCompleted 事件触发，此时我们可以测试一个标志以查看是否正在请求关闭并允许清理正常进行。也就是说，关闭消息队列的外部请求必须等待，例如，WaitHandle，ReceiveCompleted 事件将发出信号。因此，该模式在几秒（理想情况下为 1 或 2 秒）的短暂 BeginReceive() 超时下效果最佳。

# php - 数组似乎没有保存数据

> ID：10188679
> 
> 赞同：0
> 
> 时间：2012-04-17T09:34:16.877
> 
> 标签：php, mysql

我有一个重新排列导航项目的系统。

它将新订单存储在一个数组中，然后我使用 for 循环遍历数组并更新数据库。

```
<?php
$apageid = array();
$apagename = array();
$apageorder = array();

$q = "SELECT g.id, g.title, n.order FROM tbl_general g INNER JOIN tbl_navigation n ON n.pageid = g.id WHERE n.type = '$_SESSION[parent]' ORDER BY n.order";
$return = $database->query($q);
while($row=mysql_fetch_assoc($return)){
    $apageid[] = $row['id'];
    $apagename[] = $row['title'];
    $apageorder[] = $row['order'];
}

$count = count($apageid);
$bpageid = array();
$bpageorder = array();
?>
<div class="form-holder">
<?php

//run through each page one at a time and update the order of the menu
mysql_data_seek( $return, 0 ); //reset the pointer to do the same query
$i = 0; //the count for saving the new configuration
while($row=mysql_fetch_assoc($return)){

    $id = $row['id'];
    $title = $row['title'];
    $order = $row['order'];
    ?>
    <div class="form-row">
        <div class="form-label">
            Page Name
        </div>
        <div class="form-field">
            <select class="select-small" name="<?php echo $bpageid[$i]; ?>">
                <?php
                for($j=0; $j<$count; $j++){
                    if($apageid[$j] == $id) {
                        $selected = true;
                    } else {
                        $selected = false;
                    }
                    ?>
                    <option value="<?php echo $apageid[$j]; ?>" <? echo ($selected == true) ? 'selected="selected"' : ''; ?>><?php echo $apagename[$j]; ?></option>
                    <?php
                }
                ?>
            </select>
            <select class="select-small" name="<?php echo $bpageorder[$i]; ?>">
                <?php
                for($k=0; $k<$count; $k++){
                    if($apageorder[$k] == $order) {
                        $selected = true;
                    } else {
                        $selected = false;
                    }
                    ?>
                    <option value="<?php echo $apageorder[$k]; ?>" <? echo ($selected == true) ? 'selected="selected"' : ''; ?>><?php echo $apageorder[$k]; ?></option>
                    <?php
                }
                ?>
            </select>
        </div>
    </div>
    <?php
    $i++;
}
?> 
```

第一段代码是您可以重新排序项目的菜单。

最初它会加载当前选择并允许您更改排序。

```
function reorderChildren($pageid, $pageorder){
    global $database;

    $count = count($pageid);
    //run through each page one at a time and update the order of the menu
    for($i=0; $i<$count; $i++){
        //set a few variables
        $pid = $pageid[$i];
        $porder = $pageorder[$i];
        echo "pid = $pid porder = $porder";
        $q = "UPDATE tbl_navigation SET order = '$porder' WHERE pageid = '$pid' AND type = '$_SESSION[parent]'";
        $database->query($q);
    }
    return 0;
} 
```

然后信息最终被传递到这里，问题似乎是永远不会执行 for 循环。

谁能明白为什么会这样？

这不是使用的命名，我已经检查过它们。

我是否正确地将信息存储在数组中？

我可以说清楚，它`$bpageid`是`$bpageorder`传递信息的数组。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T14:26:20.840

是一个简单的修复！问题是选择名称需要只是 name="bpageid[]" 而不是我上面列出的。愚蠢的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T09:42:05.300

`$bpageid = array();`在第一个 while 循环之后，您刚刚在顶部初始化。没有分配任何值

之后你使用

```
<select class="select-small" name="<?php echo $bpageid[$i]; ?>"> 
```

但没有值，`$bpageid[$i]`因此此选择框的名称为空白。

可能有问题。检查此项并按要求执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T10:06:42.867

您可以尝试从 select 元素的选项构造一个 json，将其存储到隐藏字段或将 ajax 请求发送到 php 脚本进行处理，可以从“权重”值 1、2、3 等进行排序......用 php 排序并循环显示

# asp.net - 使用 WinForms 和 ASP .NET 简化全球化方法

> ID：10188683
> 
> 赞同：0
> 
> 时间：2012-04-17T09:34:33.353
> 
> 标签：asp.net, winforms, globalization, cultureinfo, satellite-assembly

II 是全球化的新手，需要制定多语言解决方案。

我进行了很多搜索，但没有找到一种简化的方法来实现以下目标：

*   使用中性和特定于文化的资源文件创建附属程序集。
*   在 WinForms 应用程序中使用上述程序集
*   在 ASP .NET 应用程序中使用相同的程序集

在 WinForms 中，[这篇](http://www.codeproject.com/Articles/5447/NET-Localization-using-Resource-file)文章很有帮助，[这里](https://stackoverflow.com/questions/1892433/net-globalization-satellite-dlls)是清理部署目录的好方法。

不过，我还没有找到在 ASP .NET 中使用这些附属程序集的方法。

# html - PSD 到 HTML 和 CSS

> ID：10188685
> 
> 赞同：-8
> 
> 时间：2012-04-17T09:34:44.800
> 
> 标签：html, css

我正在将一个 psd 文件转换为 HTML 和 CSS，但我遇到了背景问题。设计的背景有一个黑色的图层蒙版。这就是我做噩梦的原因。

关于如何在 HTML 和 CSS 中实现它的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T10:24:45.940

尝试简单：

```
body { background:#000; } 
```

# java - 'public Boolean isBikeTyreFlat()' 是有效的 JavaBeans 方法签名吗？

> ID：10188686
> 
> 赞同：2
> 
> 时间：2012-04-17T09:34:47.533
> 
> 标签：java, object, boolean, return

这个方法签名有效吗？

```
public Boolean isBikeTyreFlat(){} 
```

请注意，我试图在这里返回一个 Object 而不是原语。

谢谢 ：）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-17T09:39:02.877

在 JavaBeans 中，getter 方法`boolean`可以是`getXXX()`或`isXXX()`。由于`Boolean`不是原始类型，因此 a`getXXX()`是必需的。`isXXX()`仅适用于布尔原始类型（感谢@Kemoda）。

请参阅[JavaBeans 规范的第 8.3.2 节](http://download.oracle.com/otndocs/jcp/7224-javabeans-1.01-fr-spec-oth-JSpec/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T10:14:17.560

在严格的 JavaBeans 中，这是一个有效的名称（参见@TheEliteGentleman 的答案）。

但是，请确保您没有做这样的事情：

```
public class BikeTyre {
    private boolean flat;
    public Boolean isBikeTyreFlat() {
        return flat;
    }
} 
```

不建议这样做，因为您的字段名称与方法名称不匹配。一些框架允许向 Java Bean 的内部字段和 getter/setter 添加注解；不匹配可能会混淆这些框架。另请注意，将类名添加到您的字段是不好的做法；你的方法应该只是`isFlat()`.

当然，这是完全有效的：

```
public class Unicycle {
    private boolean bikeTyreFlat;
    public Boolean isBikeTyreFlat() {
        return bikeTyreFlat;
    }
} 
```

但话又说回来，你真的在​​为独轮车建模吗？;-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T18:01:15.470

我不得不不同意[这个答案](https://stackoverflow.com/a/10189265/953327)。我有同样的问题并写了一个快速测试。

给定 JavaBean 为：

```
package example;

public class FooBean {

    private Boolean published;

    public void setPublished(Boolean published) {
        this.published = published;
    }

    public Boolean isPublished() {
        return published;
    }

} 
```

和一个看起来像这样的 Main 类：

```
package example;

import java.beans.BeanInfo;
import java.beans.IntrospectionException;
import java.beans.Introspector;
import java.beans.PropertyDescriptor;

public class Main {

    /**
     * @param args
     */
    public static void main(String[] args) {

        BeanInfo beanInfo = null;
        try {
            beanInfo = Introspector.getBeanInfo(FooBean.class);
        } catch (IntrospectionException e) {
            e.printStackTrace();
        }
        PropertyDescriptor[] propertyDescriptors = beanInfo.getPropertyDescriptors();

        for(PropertyDescriptor descriptor : propertyDescriptors){
            System.out.println("descriptor: " + descriptor);
            System.out.println("descriptor.getName(): " + descriptor.getName());
            System.out.println("descriptor.getReadMethod(): " + descriptor.getReadMethod());
        }

    }

} 
```

运行主类的结果是：

```
descriptor: java.beans.PropertyDescriptor@1e746992
descriptor.getName(): class
descriptor.getReadMethod(): public final native java.lang.Class java.lang.Object.getClass()
descriptor: java.beans.PropertyDescriptor@c994fbad
descriptor.getName(): published
descriptor.getReadMethod(): null 
```

如果我变成`FooBean.java`这样：

```
package example;

public class FooBean {

    private boolean published;

    public void setPublished(boolean published) {
        this.published = published;
    }

    public boolean isPublished() {
        return published;
    }

} 
```

然后得到的输出是：

```
descriptor: java.beans.PropertyDescriptor@18072768
descriptor.getName(): class
descriptor.getReadMethod(): public final native java.lang.Class java.lang.Object.getClass()
descriptor: java.beans.PropertyDescriptor@1e2ff4ad
descriptor.getName(): published
descriptor.getReadMethod(): public boolean example.FooBean.isPublished() 
```

这告诉我，要使其成为有效的 JavaBeans 签名，必须将类型声明为原始布尔值。

**编辑** 经过进一步测试，似乎只有声明的 isXxx() 方法的返回类型必须是布尔值，JavaBeans 才能识别它：

```
package example;

public class FooBean {

    private Boolean published;

    public void setPublished(Boolean published) {
        this.published = published;
    }

    public boolean isPublished() {
        return published;
    }

} 
```

结果：

```
descriptor: java.beans.PropertyDescriptor@1e746992
descriptor.getName(): class
descriptor.getReadMethod(): public final native java.lang.Class java.lang.Object.getClass()
descriptor: java.beans.PropertyDescriptor@f96377e5
descriptor.getName(): published
descriptor.getReadMethod(): public boolean example.FooBean.isPublished() 
```

# android - 刷新 TabHost 的一个 TAB

> ID：10188689
> 
> 赞同：-1
> 
> 时间：2012-04-17T09:35:10.097
> 
> 标签：android, tabs, refresh

刷新当前选项卡的最佳方法是什么，以便再次调用 onCreate 并且 TabHost 的 TAB 菜单保持不变。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T09:38:46.153

创建一个包含所有操作的`onCreate()`方法，然后在 onCreate() 和 TAB 更改中调用该方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T11:58:47.450

Android中有一种方法可以初始化选项卡。在单击任何选项卡时，将启动与其相关的活动，并且将设置活动的视图。您的 tabHost 不会受到影响。将遵循android的生命周期。因此，当您单击其他选项卡时，前一个选项卡会进入暂停状态。所以在 onResume() 中处理所有事情。

```
TabHost tabHost = getTabHost();

TabSpec spec1 ;
TabSpec spec2 ;
TabSpec spec3 ;

spec1 = tabHost.newTabSpec("spec1").setIndicator("spec1").setContent(new Intent (mainActivity.this, spec1.class ));
spec2 = tabHost.newTabSpec("spec2").setIndicator("spec2").setContent(new Intent (mainActivity.this, spec2.class ));
spec3 = tabHost.newTabSpec("spec3").setIndicator("spec3").setContent(new Intent (mainActivity.this, spec3.class ));

tabHost.addTab(spec1);
tabHost.addTab(spec3);
tabHost.addTab(spec2);
tabHost.setup(); 
```

添加日志以验证它。

# jquery - jQuery $.post 和 cakePHP 控制器给出 400 错误请求

> ID：10188690
> 
> 赞同：0
> 
> 时间：2012-04-17T09:35:10.570
> 
> 标签：jquery, ajax, cakephp, post

我正在尝试使用 $.post() 从 cakePHP 控制器中检索 json 数组。我想我不需要视图文件，因为我会将 autorender 设置为 false，并且我期望一个 json 数组。当我使用 $.ajax 和 $.get 时，我设法得到了响应，但是使用 $.post 我得到了 400 错误请求。

我的代码：

```
$.post("controller/action",{id: "1"}, function(data) {
      console.log(data);
});

public function action() {
      $this->autoRender = false;
      $array = $_POST;
      header("Content-type: application/json");
      echo json_encode($array);
      exit;
} 
```

关于如何更好地做到这一点的任何帮助或提示？如前所述 $.get，$.ajax 确实有效，但数据回调不返回任何内容（但 firebug 显示响应数组）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T09:44:18.520

我看到的一个错误是，没有迹象表明期望 json 输出。

```
$.post("controller/action",{id: "1"}, function(data) {
      console.log(data);
},"json"); 
```

# javascript - 如何使用 Jquery/Javascript 在运行 Windows 的 PC 上实现触摸功能？

> ID：10188694
> 
> 赞同：3
> 
> 时间：2012-04-17T09:35:34.323
> 
> 标签：javascript, jquery, touch, touchscreen

我已经使用这些代码在我的网站上实现了触摸功能，它适用于 iPad/iPhone。

```
// registering touch events
function initTouchEvents() {

    // if a device is a touch device
    if (window.Touch) {
        document.addEventListener("touchstart", touchHandler, true);
        document.addEventListener("touchmove", touchHandler, true);
        document.addEventListener("touchend", touchHandler, true);
        document.addEventListener("touchcancel", touchHandler, true);
    }
}

// making items sortable in touch screen devices
function touchHandler(event) {

    var touches = event.changedTouches,
                    first = touches[0],
                    type = "";

    switch (event.type) {
        case "touchstart": type = "mousedown"; break;
        case "touchmove": type = "mousemove"; break;
        case "touchend": type = "mouseup"; break;
        default: return;
    }
    var simulatedEvent = document.createEvent("MouseEvent");
    simulatedEvent.initMouseEvent(type, true, true, window, 1, first.screenX, first.screenY,
                                  first.clientX, first.clientY, false, false, false, false, 0/*left*/, null);

    first.target.dispatchEvent(simulatedEvent);

    if (event.type == "touchmove") {

        event.preventDefault();
    }
} 
```

但是当我在触摸屏 PC 上测试我的网站时，它没有运行，我发现它`window.Touch`只能运行在 iPhone/iPad 上。而且我还尝试了各种其他事件，例如`typeof(window.ontouchstart != 'undefined')`，`('ontouchstart' in window || typeof TouchEvent != "undefined")`但它没有检测到它是触摸屏，也没有注册触摸移动的事件。

我在这里要问的是 javascript 中的一个事件，它可以检测所有触摸设备（即 IOS/Android/Windows/OSX）并运行注册事件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T09:45:06.387

Phantom Limb 让桌面浏览器模拟触摸事件

[https://github.com/brian-c/phantom-limb](https://github.com/brian-c/phantom-limb)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T09:39:40.207

我认为 chrome 在控制台设置中有“模拟触摸事件”。试着检查一下。

按`CTRL`+ `SHIFT`+`I`或只是 do `F12`，然后单击右下角的齿轮图标。然后检查“模拟触摸事件”。我认为这应该触发触摸事件。

# iphone - 在 iPhone 中验证电子邮件

> ID：10188698
> 
> 赞同：3
> 
> 时间：2012-04-17T09:36:03.627
> 
> 标签：iphone, ios, xcode

我实现了以下代码。它接受任何类型的邮件 ID。示例：abc@xyz.com。但我想接受完美的邮件ID。示例：abc@gmail.com,abc@yahoo.com。任何人都可以指导如何做到这一点。

```
- (BOOL) validateEmail: (NSString *) candidate {
    NSString *emailRegex = @"[A-Z0-9a-z._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,4}"; 
    NSPredicate *emailTest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", emailRegex]; 

    return [emailTest evaluateWithObject:candidate];
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T09:41:29.707

**编辑：添加了域名检查**

下面也将检查域名和扩展名，请随时在此代码中添加您所需的名称。

```
 - (BOOL)isValidEmail:(NSString *)inputText
        {
            NSString *emailRegex = @"[A-Z0-9a-z][A-Z0-9a-z._%+-]*@[A-Za-z0-9][A-Za-z0-9.-]*\\.[A-Za-z]{2,6}"; 
            NSPredicate *emailTest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", emailRegex]; 
            NSRange dotRange;
            NSRange atRange;

            BOOL isValidDomain = NO;
            BOOL isValidSite = NO;

            if([emailTest evaluateWithObject:inputText]) 
            {
                dotRange = [inputText rangeOfString:@"." options:NSBackwardsSearch range:NSMakeRange(0, [inputText length])];
                int indexOfDot = dotRange.location;

                if(dotRange.location != NSNotFound) 
                {
                    NSString *topLevelDomain = [inputText substringFromIndex:indexOfDot];
                    topLevelDomain = [topLevelDomain lowercaseString];
                    NSSet *TLD;
                    TLD = [NSSet setWithObjects:@".aero", @".asia", @".biz", @".cat", @".com", @".coop", @".edu", @".gov", @".info", @".int", @".jobs", @".mil", @".mobi", @".museum", @".name", @".net", @".org", @".pro", @".tel", @".travel", @".ac", @".ad", @".ae", @".af", @".ag", @".ai", @".al", @".am", @".an", @".ao", @".aq", @".ar", @".as", @".at", @".au", @".aw", @".ax", @".az", @".ba", @".bb", @".bd", @".be", @".bf", @".bg", @".bh", @".bi", @".bj", @".bm", @".bn", @".bo", @".br", @".bs", @".bt", @".bv", @".bw", @".by", @".bz", @".ca", @".cc", @".cd", @".cf", @".cg", @".ch", @".ci", @".ck", @".cl", @".cm", @".cn", @".co", @".cr", @".cu", @".cv", @".cx", @".cy", @".cz", @".de", @".dj", @".dk", @".dm", @".do", @".dz", @".ec", @".ee", @".eg", @".er", @".es", @".et", @".eu", @".fi", @".fj", @".fk", @".fm", @".fo", @".fr", @".ga", @".gb", @".gd", @".ge", @".gf", @".gg", @".gh", @".gi", @".gl", @".gm", @".gn", @".gp", @".gq", @".gr", @".gs", @".gt", @".gu", @".gw", @".gy", @".hk", @".hm", @".hn", @".hr", @".ht", @".hu", @".id", @".ie", @" No", @".il", @".im", @".in", @".io", @".iq", @".ir", @".is", @".it", @".je", @".jm", @".jo", @".jp", @".ke", @".kg", @".kh", @".ki", @".km", @".kn", @".kp", @".kr", @".kw", @".ky", @".kz", @".la", @".lb", @".lc", @".li", @".lk", @".lr", @".ls", @".lt", @".lu", @".lv", @".ly", @".ma", @".mc", @".md", @".me", @".mg", @".mh", @".mk", @".ml", @".mm", @".mn", @".mo", @".mp", @".mq", @".mr", @".ms", @".mt", @".mu", @".mv", @".mw", @".mx", @".my", @".mz", @".na", @".nc", @".ne", @".nf", @".ng", @".ni", @".nl", @".no", @".np", @".nr", @".nu", @".nz", @".om", @".pa", @".pe", @".pf", @".pg", @".ph", @".pk", @".pl", @".pm", @".pn", @".pr", @".ps", @".pt", @".pw", @".py", @".qa", @".re", @".ro", @".rs", @".ru", @".rw", @".sa", @".sb", @".sc", @".sd", @".se", @".sg", @".sh", @".si", @".sj", @".sk", @".sl", @".sm", @".sn", @".so", @".sr", @".st", @".su", @".sv", @".sy", @".sz", @".tc", @".td", @".tf", @".tg", @".th", @".tj", @".tk", @".tl", @".tm", @".tn", @".to", @".tp", @".tr", @".tt", @".tv", @".tw", @".tz", @".ua", @".ug", @".uk", @".us", @".uy", @".uz", @".va", @".vc", @".ve", @".vg", @".vi", @".vn", @".vu", @".wf", @".ws", @".ye", @".yt", @".za", @".zm", @".zw", nil];
                    if(topLevelDomain != nil && ([TLD containsObject:topLevelDomain])) 
                    {
                        isValidDomain = YES;
                    }
                }
                atRange = [inputText rangeOfString:@"@" options:NSBackwardsSearch range:NSMakeRange(0, [inputText length])];
                int indexOfAt = atRange.location;

                if(atRange.location != NSNotFound)
                {
                    NSString *topLevelSite = [inputText substringWithRange:NSMakeRange(indexOfAt, indexOfDot - indexOfAt)];
                    topLevelSite = [topLevelSite lowercaseString];
                    NSSet *TLS;
//Add your required domain names to the set below
                    TLS = [NSSet setWithObjects:@"@google", @"@yahoo", nil];
                    if(topLevelSite != nil && ([TLS containsObject:topLevelSite])) 
                    {
                        isValidSite = YES;
                    }
                }

            }
            return (isValidDomain && isValidSite);
        } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T09:50:01.327

试试这个代码：

```
- (BOOL) validateEmail: (NSString *) candidate {
    NSString *emailRegex = @"[A-Z0-9a-z._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,4}"; 
    NSPredicate *emailTest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", emailRegex]; 

    BOOL result = [emailTest evaluateWithObject:candidate];
    if(result)
    {
        NSSet *domains= [NSSet setWithObjects:@"yahoo.com",@"yahoo.co.in",@"yahoo.co.au",@"yahoo.co.nz",@"gmail.com",@"rediffmail.com",.........., nil];
        NSArray *arrayObjects = [domains allObjects];
        BOOL results = NO;
              for(int i = 0;i<[arrayObjects count];i++)
              {
                  if([emailTest rangeOfString:[arrayObjects objectAtIndex:i]].location != NSNotFound)
                  {
                      results = YES;
                      break;
                  }
              }
          return results;
    }
    else
    {
        return NO;
    } 
    return [emailTest evaluateWithObject:candidate];
} 
```

希望这很好。

如果您需要更多帮助，请告诉我。

# android - Android 选项卡视图 - 无法创建选项卡内容，因为找不到带有 id 的视图

> ID：10188701
> 
> 赞同：3
> 
> 时间：2012-04-17T09:36:12.103
> 
> 标签：android, tabview

我正在尝试创建一个选项卡视图，它将按 Id 切换到不同的内容视图。这是我的`tab activity`：

```
public class TabViews extends TabActivity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.tabviews);
    TabHost tabHost = getTabHost();

    LayoutInflater.from(this).inflate(R.layout.tabviews, tabHost.getTabContentView(), true);

    tabHost.addTab(tabHost.newTabSpec("apples")
            .setIndicator("Apples")
            .setContent(R.id.apples));
    tabHost.addTab(tabHost.newTabSpec("events")
            .setIndicator("Events")
            .setContent(R.id.events));
    tabHost.addTab(tabHost.newTabSpec("attend")
            .setIndicator("Attending")
            .setContent(R.id.attend));
}
} 
```

这是 tabviews xml 布局。

```
<?xml version="1.0" encoding="utf-8"?>

<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent">

<TextView android:id="@+id/view1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:text="test"/>   

<TextView android:id="@+id/view2"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:text="test"/>

<TextView android:id="@+id/view3"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:text="test"/>

</FrameLayout> 
```

我有其他三个 xml 布局，事件和苹果，我可以通过创建一个新的意图来访问`startActivity`它们`Intent`。

这是我的 R.java 类：

```
public final class R {
public static final class attr {
}
public static final class drawable {
    public static final int bdgdefault=0x7f020000;
    public static final int logo=0x7f020001;
    public static final int black_0=0x7f020002;
    public static final int black_1=0x7f020003;
    public static final int black_2=0x7f020004;
    public static final int black_3=0x7f020005;
    public static final int black_4=0x7f020006;
    public static final int blue_0=0x7f020007;
    public static final int blue_1=0x7f020008;
    public static final int blue_2=0x7f020009;
    public static final int blue_3=0x7f02000a;
    public static final int blue_4=0x7f02000b;
    public static final int brown_0=0x7f02000c;
    public static final int brown_1=0x7f02000d;
    public static final int brown_2=0x7f02000e;
    public static final int brown_3=0x7f02000f;
    public static final int brown_4=0x7f020010;
    public static final int btn_black=0x7f020011;
    public static final int btn_black_1=0x7f020012;
    public static final int btn_black_off=0x7f020013;
    public static final int btn_dropdown_down=0x7f020014;
    public static final int btn_dropdown_left_only=0x7f020015;
    public static final int btn_dropdown_left_right_collapsed=0x7f020016;
    public static final int btn_dropdown_neither=0x7f020017;
    public static final int btn_dropdown_neither_up_down=0x7f020018;
    public static final int btn_dropdown_right_only=0x7f020019;
    public static final int btn_dropdown_up=0x7f02001a;
    public static final int btn_dropdown_up_down=0x7f02001b;
    public static final int btn_white=0x7f02001c;
    public static final int button=0x7f02001d;
    public static final int grac=0x7f02001e;
    public static final int ic_launcher=0x7f02001f;
    public static final int ic_menu_jitsu=0x7f020020;
    public static final int ic_menu_jiu=0x7f020021;
    public static final int ic_menu_name=0x7f020022;
    public static final int mainlogo=0x7f020023;
    public static final int purple_0=0x7f020024;
    public static final int purple_1=0x7f020025;
    public static final int purple_2=0x7f020026;
    public static final int purple_3=0x7f020027;
    public static final int purple_4=0x7f020028;
    public static final int red_0=0x7f020029;
    public static final int red_1=0x7f02002a;
    public static final int mylogo=0x7f02002b;
    public static final int spinner_press=0x7f02002c;
    public static final int spinner_select=0x7f02002d;
    public static final int white_0=0x7f02002e;
    public static final int white_1=0x7f02002f;
    public static final int white_2=0x7f020030;
    public static final int white_3=0x7f020031;
    public static final int white_4=0x7f020032;
}
public static final class id {
    public static final int amattendees=0x7f060006;
    public static final int attend=0x7f060013;
    public static final int attendam=0x7f060000;
    public static final int attendboth=0x7f060002;
    public static final int attendpm=0x7f060001;
    public static final int back=0x7f06000f;
    public static final int bdg=0x7f06000b;
    public static final int bdgBackground=0x7f060009;
    public static final int btn_login=0x7f06001b;
    public static final int btn_newuser=0x7f06001c;
    public static final int description=0x7f060011;
    public static final int details=0x7f06000c;
    public static final int emailaddress=0x7f060019;
    public static final int events=0x7f06000e;
    public static final int grouplogo=0x7f060012;
    public static final int mainlogo=0x7f060018;
    public static final int nearestvenue=0x7f060016;
    public static final int notattending=0x7f060003;
    public static final int password=0x7f06001a;
    public static final int playbutton=0x7f060014;
    public static final int pmattendees=0x7f060007;
    public static final int progressBar=0x7f06000d;
    public static final int qrdecode=0x7f060015;
    public static final int rewarddate=0x7f060010;
    public static final int textView1=0x7f060017;
    public static final int title=0x7f060008;
    public static final int tv_am=0x7f060004;
    public static final int tv_pm=0x7f060005;
    public static final int view1=0x7f06001d;
    public static final int view2=0x7f06001e;
    public static final int view3=0x7f06001f;
    public static final int wv_qr=0x7f06000a;
}
public static final class layout {
    public static final int attend=0x7f030000;
    public static final int apples=0x7f030001;
    public static final int events=0x7f030002;
    public static final int list_items_attendees=0x7f030003;
    public static final int main=0x7f030004;
    public static final int tabviews=0x7f030005;
}
public static final class string {
    public static final int AM=0x7f040009;
    public static final int Login=0x7f040002;
    public static final int Update=0x7f04000a;
    public static final int am=0x7f04000d;
    public static final int amattendees=0x7f040011;
    public static final int app_name=0x7f040001;
    public static final int attend_both=0x7f04000f;
    public static final int attend_pm=0x7f04000e;
    public static final int back=0x7f040005;
    public static final int badge_details=0x7f040006;
    public static final int email_text=0x7f040007;
    public static final int empty=0x7f04000c;
    public static final int events=0x7f040004;
    public static final int hello=0x7f040000;
    public static final int new_user=0x7f040003;
    public static final int not_attending=0x7f040010;
    public static final int password_text=0x7f040008;
    public static final int pmattendees=0x7f040012;
    public static final int qrdecode=0x7f04000b;
}
public static final class style {
    public static final int ButtonText=0x7f050000;
}
} 
```

这是我收到的错误：

```
04-17 10:14:48.608: E/AndroidRuntime(11307):java.lang.RuntimeException: Unable to start activity ComponentInfo{org.jujitsu.app.com/org.jujitsu.app.com.TabViews}:java.lang.RuntimeException: Could not create tab content because could not find view with id 2131099659 
```

更多的：

```
04-17 10:14:48.608: E/AndroidRuntime(11307):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1816)
04-17 10:14:48.608: E/AndroidRuntime(11307):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1837)
04-17 10:14:48.608: E/AndroidRuntime(11307):    at android.app.ActivityThread.access$1500(ActivityThread.java:132) 
04-17 10:14:48.608: E/AndroidRuntime(11307):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1033)
04-17 10:14:48.608: E/AndroidRuntime(11307):    at android.os.Handler.dispatchMessage(Handler.java:99) 
04-17 10:14:48.608: E/AndroidRuntime(11307):    at android.os.Looper.loop(Looper.java:143)
04-17 10:14:48.608: E/AndroidRuntime(11307):    at android.app.ActivityThread.main(ActivityThread.java:4196) 
04-17 10:14:48.608: E/AndroidRuntime(11307):    at java.lang.reflect.Method.invokeNative(Native Method) 
04-17 10:14:48.608: E/AndroidRuntime(11307):    at java.lang.reflect.Method.invoke(Method.java:507) 
04-17 10:14:48.608: E/AndroidRuntime(11307):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-17 10:14:48.608: E/AndroidRuntime(11307):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597) 
04-17 10:14:48.608: E/AndroidRuntime(11307):    at dalvik.system.NativeStart.main(Native Method) 
04-17 10:14:48.608: E/AndroidRuntime(11307): Caused by: java.lang.RuntimeException: Could not create tab content because could not find view with id 2131099659
04-17 10:14:48.608: E/AndroidRuntime(11307):    at android.widget.TabHost$ViewIdContentStrategy.<init>(TabHost.java:595)
04-17 10:14:48.608: E/AndroidRuntime(11307):    at android.widget.TabHost$ViewIdContentStrategy.<init>(TabHost.java:586)
04-17 10:14:48.608: E/AndroidRuntime(11307):    at android.widget.TabHost$TabSpec.setContent(TabHost.java:441) 
04-17 10:14:48.608: E/AndroidRuntime(11307):    at org.jujitsu.app.com.TabViews.onCreate(TabViews.java:26) 
04-17 10:14:48.608: E/AndroidRuntime(11307):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1093)
04-17 10:14:48.608: E/AndroidRuntime(11307):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1780)
04-17 10:14:48.608: E/AndroidRuntime(11307):    ... 11 more 
```

不知道我做错了什么。我对此有点陌生。

更新：好的..我的意思是..我想使用标签更改活动。这是我的做法。答案是通过 Intent 设置内容，而不是使用 tabHost.addTab(tabHost.newTabSpec("tab2") .setIndicator("Something") .setContent(new Intent(this, myActivity.class)));

谢谢所有帮助过的人。这让我考虑了更多的选择。

干杯，乔。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T09:51:40.390

你的 xml 应该有类似的东西，

```
 <TabHost
          xmlns:android="http://schemas.android.com/apk/res/android"
          android:id="@android:id/tabhost"
          android:layout_width="fill_parent"
          android:layout_height="fill_parent"
          >

    <FrameLayout  
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <TextView android:id="@+id/view1"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:text="test"/>   

    <TextView android:id="@+id/view2"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:text="test"/>

    <TextView android:id="@+id/view3"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:text="test"/>

    </FrameLayout>
    </TabHost> 
```

示例： [http](http://www.androidhive.info/2011/08/android-tab-layout-tutorial/) ://www.androidhive.info/2011/08/android-tab-layout-tutorial/ http://www.codeproject.com/Articles/107693/Tabbed-Applications-in-Android

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T09:47:08.333

您应该在您`TabHost`的`TabWidget`xml 布局中查看[Tab Layout example](http://developer.android.com/resources/tutorials/views/hello-tabwidget.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T09:54:29.000

您需要在 xml 中添加 tabwidget .... 结帐，这是如何使用选项卡小部件：

tabscroll.xml

```
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="match_parent"
    android:layout_height="match_parent">
    <LinearLayout
        android:orientation="vertical"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:padding="5dp">
        <HorizontalScrollView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:scrollbars="none">
            <TabWidget
                android:id="@android:id/tabs"
                android:layout_width="match_parent"
                android:layout_height="wrap_content" />
        </HorizontalScrollView>
        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:padding="5dp" />
    </LinearLayout>
</TabHost>

    public class Tabs5 extends TabActivity implements TabHost.TabContentFactory {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.tabs_scroll);

        final TabHost tabHost = getTabHost();

        for (int i=1; i <= 30; i++) {
            String name = "Tab " + i;
            tabHost.addTab(tabHost.newTabSpec(name)
                    .setIndicator(name)
                    .setContent(this));
        }
    }

    /** {@inheritDoc} */
    public View createTabContent(String tag) {
        final TextView tv = new TextView(this);
        tv.setText("Content for tab with tag " + tag);
        return tv;
    }
} 
```

礼貌： http: [//developer.android.com/resources/samples/ApiDemos/res/layout/tabs_scroll.html](http://developer.android.com/resources/samples/ApiDemos/res/layout/tabs_scroll.html)和 [http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/ api/view/Tabs5.html](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/view/Tabs5.html)

# xml - 将 XML 存储到 oracle 表父子表的有效方法是什么

> ID：10188702
> 
> 赞同：2
> 
> 时间：2012-04-17T09:36:21.113
> 
> 标签：xml, oracle

将 XML 存储到 Oracle 表父子表的有效方法是什么

我的表是 order_header 和 order_item。针对一个标题可以有许多项目。

我的 XML 的结构是

```
<ROWSET>
 <ROW>
  <CODE>1000385</CODE>
  <ORDER_ITEMS>
   <ORDER_ITEM>
    <ES_ORDER_HEADER__CODE>1000385</ES_ORDER_HEADER__CODE>
    <QUANTITY_SHIPPED>0</QUANTITY_SHIPPED>
    <ITEM_NUMBER>1</ITEM_NUMBER>
   </ORDER_ITEM>
   <ORDER_ITEM>
    <ES_ORDER_HEADER__CODE>1000385</ES_ORDER_HEADER__CODE>
    <QUANTITY_SHIPPED>0</QUANTITY_SHIPPED>
    <ITEM_NUMBER>2</ITEM_NUMBER>
   </ORDER_ITEM>
  </ORDER_ITEMS>
 </ROW>
</ROWSET> 
```

在第 1 步中，我生成了这个 XML。现在的要求是在两个表中保存相同的xml。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T08:12:07.247

我的这篇博文描述了如何仅在 SQL 中执行此操作（阅读：最有效的方式）：

[http://rwijk.blogspot.com/2010/03/shredding-xml-into-multiple-tables-in.html](http://rwijk.blogspot.com/2010/03/shredding-xml-into-multiple-tables-in.html)

问候，
罗布。

# python - 如何跳过附加到列表类型的dict值中的重复值

> ID：10188710
> 
> 赞同：0
> 
> 时间：2012-04-17T09:36:44.593
> 
> 标签：python, dictionary

其实我有这种类型的字典

```
d={'a':{'s':'100100.sss','s1':'100200.ss2','s2':'100200.333'},
  'b':{'t':'100100.yyy','u':'100100.rrr','i':'1001500ttt'},'c':{'f':'g','y':'o'}} 
```

从这里我正在创建这种类型的字典

```
temp={'a':['100100','100200','100200'],'b':['100100',100100'],'c'=[]} 
```

为此，我正在使用这样的代码

```
temp={}
for k,v in d.items():
    temp[k]=[]
    for key,val in v.items():
    templist=val.split(".")
    if templist[0].isdigit():
            if templist[0] not in a.values():
                temp[k].append(templist[0])
            else:
                continue 
```

其实我想要这种类型的字典

```
temp={'a':['100100','100200'],'b':['100100'],'c'=[]} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T09:40:29.030

```
d={'a':{'s':'100100.sss','s1':'100200.ss2','s2':'100200.333'},
  'b':{'t':'100100.yyy','u':'100100.rrr'}}

temp = dict([(k, list(set([x.split('.')[0] for x in v.values()]))) \
       for k,v in d.items()]) 
```

解释一下它的作用。它遍历 中的所有项目`d`，给出键/值对。每个值都是字典，您忽略其中的键，因此它会迭代值。这些是通过拆分传递的。结果列表转换为`set`，这使值唯一，然后返回列表（不确定您是否真的需要该步骤）。最后，键值对列表被转换回字典。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T09:41:50.233

```
temp = {}
for k,v in d.items():
    for key,val in v.items():
        fn = val.split('.')[0]
        if fn.isdigit():
            temp.setdefault(k, set()).add(fn)
print dict((k, list(v)) for k, v in temp.items()) 
```

印刷

```
{'a': ['100100', '100200'], 'b': ['100100']} 
```

或作为单行：

```
dict((k, list(set(e.split('.')[0] for e in v.values() if e.split('.')[0].isdigit()))) for k,v in d.items()) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T09:42:35.557

仅适用于 Python`2.7+`和`3+`

```
>>> d = {'a': {'s': '100100.sss', 's1': '100200.ss2', 's2': '100200.333'},
         'b': {'t': '100100.yyy', 'u': '100100.rrr'}}
>>> {k:{el.split('.')[0] for el in v.itervalues()} for k,v in d.iteritems()}
{'a': set(['100100', '100200']), 'b': set(['100100'])} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T09:56:19.553

这是在 IDLE 中解决的问题的解决方案。输出被人为地破坏以避免滚动。

```
{k: list(set([i.split('.')[0] for i in v.values()])) for k, v in d.iteritems()}

{'a': ['100100', '100200'], 
 'b': ['100100']}{'a': ['100100', '100200'], 
 'c': ['g', 'o'], 
 'b': ['100100', '1001500ttt']} 
```

# import - 如何将包从 Java 项目导入 OSGi Bundle 项目？

> ID：10188712
> 
> 赞同：0
> 
> 时间：2012-04-17T09:36:51.537
> 
> 标签：import, osgi, bundle

我有一个大型 Java EE 应用程序和一个简单的 OSGi Bundle 应用程序。我需要在我的包中使用来自这个 Java EE 应用程序的 Java 类。我怎样才能做到这一点？

我尝试将 Java EE 应用程序包含在我的 Bundle 的 Java 构建路径中作为“必需项目”，但它不适用于我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T12:38:38.153

查看 bndtools（或 maven bundle 插件）。使用 bnd 包含来自其他项目的类是微不足道的。

因此，在 bndtools 中，您只需在构建路径中添加 Java EE 应用程序，然后将 Private-Package 指令与您希望包含在包中的包名称一起使用，允许使用通配符。

您还可以创建一个包含所有共享类的包的项目。然后将此捆绑包添加到 Java EE 应用程序中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T10:19:12.077

假设您需要 Java EE 类作为库，您可以将它们打包为包中的 jar 并使用 Bundle-ClassPath 指令。

# javascript - 如何构建以使 Ember 使用更少/不使用变形标签？

> ID：10188720
> 
> 赞同：0
> 
> 时间：2012-04-17T09:37:19.617
> 
> 标签：javascript

我正在使用 Ember.js/Handlebars 循环浏览一个集合。遇到 ember 问题，在生成的输出中用脚本变形和 ember Div 包装它。

```
 <script type="text/x-handlebars">
                    {{#each App.PersonController}}
                      {{#view App.view contentBinding="this"}}
                         {{#with content}}
                         {{title}}
                        {{/with}}
                      {{/view}}
                    {{/each}}
                </script> 
```

**这是它的样子：**

```
 <div id="ember304" class="ember-view">
 <script id="metamorph-0-start" type="text/x-placeholder"></script>
 <script id="metamorph-2-start" type="text/x-placeholder"></script>
 <div id="ember511" class="ember-view" aria-hidden="false"> 
    <script id="metamorph-23-start" type="text/x-placeholder"></script> 
    <script id="metamorph-24-start" type="text/x-placeholder"></script>
         Mr
    <script id="metamorph-24-end" type="text/x-placeholder"></script>
    <script id="metamorph-23-end" type="text/x-placeholder"></script> 
</div>
</div> 
```

我该如何构建它，以便 ember 使用更少的 no metamorph 标签？这样我的css就不会坏了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T00:05:48.557

尝试使用集合视图 [http://emberjs.com/api/classes/Ember.CollectionView.html](http://emberjs.com/api/classes/Ember.CollectionView.html)

您可以在不使用脚本标签的情况下遍历列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T21:29:41.623

以防万一你还没有解决这个问题......

你的 CSS 到底有什么问题？

关于您提到的事情的一些一般要点：

变形标签：

Ember 需要使用 metamorph 标签来支持绑定。也就是说，它不应该影响除 :first-child 伪选择器之外的任何 CSS。他们特别选择了脚本标签，因为它们对布局的影响最小。

Ember div：

您可以控制视图使用的标签，以及它使用的 CSS 类，如下所示

```
window.AppView = Em.View.extend({
    tagName: 'tr',
    classNames: ['cssClass']
}); 
```

希望这可以帮助您，或者其他偶然发现这个问题的人正在寻找其他东西（就像我一样）。

# android - VideoView 显示在线流

> ID：10188727
> 
> 赞同：1
> 
> 时间：2012-04-17T09:37:36.567
> 
> 标签：android, android-emulator, android-video-player

我正在尝试编写一个应用程序。我需要做活动来观看在线流。现在尝试使用 youtube。我得到了错误：/

这是我的代码：

```
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    Log.d(TAG, "Starting Video View");

    setContentView(R.layout.video_views);

    this.Url = getIntent().getStringExtra("Url");
    Log.d(TAG, "Stream Address: " + Url);

    video_view = (VideoView) findViewById(R.id.video_views);
    Uri uri = Uri.parse(Url);

    video_view.setVideoURI(uri);
    video_view.requestFocus();
    video_view.start();

} 
```

这是错误：

```
04-17 09:16:07.151: D/MediaPlayer(26908): Couldn't open file on client side, trying server side
04-17 09:16:30.250: E/MediaPlayer(26908): error (1, -2147483648)
04-17 09:16:30.250: E/MediaPlayer(26908): Error (1,-2147483648)
04-17 09:16:30.250: D/VideoView(26908): Error: 1,-2147483648 
```

网址是 100% 正确的，我无法在浏览器中打开它。有任何想法吗？我试图只在模拟器上打开，这可能是问题的根源吗？

# iphone - 在对象数组中使用数据

> ID：10188728
> 
> 赞同：1
> 
> 时间：2012-04-17T09:37:38.353
> 
> 标签：iphone, objective-c, ios, xcode, nsarray

我有一个名为 [self.places objectAtIndex:indexPath.row] 的数组；我正在尝试输出到表格中。数组中充满了对象，但我想使用对象内部的数据将它们分配给对象的最佳方法是什么？数组里面的数据如下：

```
<Place:eXMSFqDg7B> {
    Location = "<PFGeoPoint: 0x6887480>";
    addressline1 = "address line 1";
    addressline2 = "address line 2";
    agerestrictions = "18+";
    email = "test@aol.com";
    image = "<PFFile: 0x6887af0>";
    name = "Rain NightClub";
    phone = 0123456789;
    postcode = BT11TG;
    type = Club;
}
2012-04-17 00:29:59.501 ClubsNIparse[3517:f803] <Place:95KvPCrSY1> {
    Location = "<PFGeoPoint: 0x6888330>";
    addressline1 = "address line 1";
    addressline2 = "address line 2";
    agerestrictions = "18+";
    email = "test@aol.com";
    image = "<PFFile: 0x6888950>";
    name = "Box NightClub";
    phone = 0123456789;
    postcode = BT11TG;
    type = Club;
}
2012-04-17 00:29:59.502 ClubsNIparse[3517:f803] <Place:6AxpfrY0DZ> {
    Location = "<PFGeoPoint: 0x6889260>";
    addressline1 = "address line 1";
    addressline2 = "address line 2";
    agerestrictions = "18+";
    email = "test@aol.com";
    image = "<PFFile: 0x6889880>";
    name = Laverys;
    phone = 0123456789;
    postcode = BT11TG;
    type = Club;
} 
```

谢谢。

编辑 - -

正如建议的那样，创建了一个 NSObject 并分别设置字段但收到此错误：2012-04-17 11:09:08.363 ClubsNIparse[4906:f803] -[PFObject Location]: unrecognized selector sent to instance 0x6b4e4a0 2012-04-17 11 ：09：08.364 ClubsNIparse [4906：f803] ***由于未捕获的异常'NSInvalidArgumentException'而终止应用程序，原因：'-[PFObject Location]：无法识别的选择器发送到实例0x6b4e4a0'***第一次抛出调用堆栈：（0x19d5052 0x1f89d0a 0x19d6ced 0x193bf0034144x 0xc01e0f 0xc02589 0xbeddfd 0xbfc851 0xba7301 0x19d6e72 0x1a992d 0x1b3827 0x139fa7 0x13bea6 0x1c730c 0xb79530 0x19a99ce 0x1940670 0x190c4f6 0x190bdb4 0x190bccb 0x251f879 0x251f93e 0xb68a9b 0x2722 0x2695）终止叫做抛出exceptionCurrent

我的代码如下：

Place.h (NSObject)

```
@interface Place : NSObject
{
    NSString * Location;
    NSString * addressline1;
    NSString * addressline2;
    NSString * agerestrictions;
    NSData * image;
    NSString * email;
    NSString * name;
    NSString * phone;
    NSString * postcode;
    NSString * type;

}

@property (nonatomic, retain) NSString * Location;
@property (nonatomic, retain) NSData * image;
@property (nonatomic, retain) NSString * addressline1;
@property (nonatomic, retain) NSString * addressline2;
@property (nonatomic, retain) NSString * agerestrictions;
@property (nonatomic, retain) NSString * email;
@property (nonatomic, retain) NSString * name;
@property (nonatomic, retain) NSString * phone;
@property (nonatomic, retain) NSString * postcode;
@property (nonatomic, retain) NSString * type;

-(NSComparisonResult) compareWithAnotherPerson:(Place*) p;

@end 
```

地点.m

```
#import "Place.h"

@implementation Place

@synthesize name,addressline1,addressline2,email,phone,postcode,type,agerestrictions;
@synthesize Location,image;

-(void) dealloc
{

    self.name = nil;
    self.addressline1 = nil;
    self.addressline2 = nil;
    self.email = nil;
    self.phone = nil;
    self.postcode = nil;
    self.type = nil;
    self.agerestrictions = nil;
    self.Location = nil;
    self.image = nil;

    [super dealloc];

}

-(NSComparisonResult) compareWithAnotherPerson:(Place*) p
{
    return [[self name] compare:[p name]];
}

@end 
```

TableView.h（我想列出数据的地方）

```
#import <UIKit/UIKit.h>
#import <Parse/Parse.h>

@class Place;

@interface NearbyViewController : UITableViewController
{
    NSArray * places;
}

@property (nonatomic,retain) NSArray * places;

@end 
```

表视图.m

```
#import "NearbyViewController.h"
#import <Parse/Parse.h>
#import "Place.h"

@implementation NearbyViewController

@synthesize places;

- (void)didReceiveMemoryWarning
{
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc that aren't in use.
}

#pragma mark - View lifecycle

- (void)viewDidLoad
{
    self.title = @"Nearby";
    PFGeoPoint *userGeoPoint = [PFGeoPoint geoPointWithLatitude:37.856965 longitude:-122.483826];
    PFQuery *query = [PFQuery queryWithClassName:@"Place"];
    //[query whereKey:@"Location" nearGeoPoint:userGeoPoint withinMiles:10.0];
    [query whereKey:@"Location" nearGeoPoint:userGeoPoint];

    NSArray *placeObjects = [query findObjects];

    self.places = placeObjects;
    NSLog(@"%i",[self.places count]);

    UIColor *background = [[UIColor alloc] initWithPatternImage:[UIImage imageNamed:@"background_texture.png"]];
    // self.tableView st
    self.view.backgroundColor = background;

    [background release];

    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    return [self.places count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }
    Place*p = [self.places objectAtIndex:indexPath.row];
    NSLog(@"%@",[self.places objectAtIndex:indexPath.row]);
    cell.textLabel.text = [NSString stringWithFormat:@"%@",p.name];
    cell.textLabel.textColor = [UIColor whiteColor];
    NSLog(@"%@",p);
    return cell;
}

/*
 // Override to support conditional editing of the table view.
 - (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
 {
 // Return NO if you do not want the specified item to be editable.
 return YES;
 }
 */

/*
 // Override to support editing the table view.
 - (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
 {
 if (editingStyle == UITableViewCellEditingStyleDelete) {
 // Delete the row from the data source
 [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
 }   
 else if (editingStyle == UITableViewCellEditingStyleInsert) {
 // Create a new instance of the appropriate class, insert it into the array, and add a new row to the table view
 }   
 }
 */

/*
 // Override to support rearranging the table view.
 - (void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath *)fromIndexPath toIndexPath:(NSIndexPath *)toIndexPath
 {
 }
 */

/*
 // Override to support conditional rearranging of the table view.
 - (BOOL)tableView:(UITableView *)tableView canMoveRowAtIndexPath:(NSIndexPath *)indexPath
 {
 // Return NO if you do not want the item to be re-orderable.
 return YES;
 }
 */

#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Navigation logic may go here. Create and push another view controller.
    /*
     <#DetailViewController#> *detailViewController = [[<#DetailViewController#> alloc] initWithNibName:@"<#Nib name#>" bundle:nil];
     // ...
     // Pass the selected object to the new view controller.
     [self.navigationController pushViewController:detailViewController animated:YES];
     [detailViewController release];
     */
}

@end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-17T10:12:50.903

您可以将其与以下一起使用

```
NSString* strAddress = [[self.places objectAtIndex:indexPath.row]valueForKey:@"addressline1"]; 
```

给出**indexPath.row**后，使用**valueForKey:**方法从对象中检索值。为所有价值去做，你会得到它。

要在 tableview 中打印，请在**CellForRowAtIndexPath中编写上述代码**

```
 NSString* strAddress = [[self.places objectAtIndex:indexPath.row]valueForKey:@"addressline1"];
 cell.textLabel.text = strAddress; 
```

使用此代码，所有 address1 数据都将显示在 tableview 行内

# wordpress - Pregreplace youtube 嵌入图像

> ID：10188731
> 
> 赞同：0
> 
> 时间：2012-04-17T09:37:50.390
> 
> 标签：wordpress, youtube, preg-replace, preg-match

我正在尝试做一些非常奇怪的事情，我有一些运气，但遇到了一些障碍。我基本上已经完成了它的第一部分，现在我只需要全面翻译它。这与 WordPress 有关，但它是与特定于 WP 的一般概念问题，所以我决定在这里问它。

基本上，我想要做的是解析一个变量，并用其他东西替换一些代码，如果它存在（对于 WP 用户，我试图通过 the_content() 来解析，一个替换位基于一些条件）。

我正在解析一个名为`$content`. 里面的某个地方`$content`将是一个标准的 YouTube 嵌入代码`<iframe src="http://www.youtube.com/embed/xxxxxxxxx" frameborder="0" width="560" height="315"></iframe>`等。我的目标是获取 xxxxxx 值，然后用锚替换整个`<iframe>`值`<img>`。

我有正则表达式来获取 YouTube 视频 ID，并且可以毫无问题地回显图像。我用了：

```
if (preg_match('(/embed/([a-z0-9A-Z]+))', $content, $output) > 0) {
        echo("<img src='http://img.youtube.com/vi/".$output[1]."/0.jpg' alt=' ' />");
    } 
```

它返回在 中找到的 YouTube 视频的缩略图`$content`。我无法将此正则表达式转换为 a `preg_replace`，以便我可以将`<iframe>`in 更改为 an `<img src='http://img.youtube.com/vi/xxxxxxxxx/0.jpg />`。这可能吗？

如果有人能指出我正确的方向，我会很高兴。

谢谢！

特雷

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T09:57:48.390

我讨厌这么快就这样做。但是，我似乎已经解决了我的问题。

来到这里并输入它并清除我的思绪似乎在这里和那里都有帮助。

我能够用这段代码完成它（我敢肯定这很丑）：

```
 $the_id = preg_match('(/embed/([a-z0-9A-Z]+))', $content, $output);
        $replacement = "<img src='http://img.youtube.com/vi/".$output[1]."/0.jpg' alt=' ' />";

        $content = preg_replace("/<iframe.*?<\/iframe>/si", $replacement, $content);
        echo $content; 
```

# symfony - 如何使用 Symfony2 处理用户身份验证、权限和用户角色？

> ID：10188732
> 
> 赞同：1
> 
> 时间：2012-04-17T09:37:54.850
> 
> 标签：symfony

我最近学习了 Symfony2，并用它创建了一个小应用程序。到目前为止它工作正常。

我创建了一个用户模块，我在其中注册用户。然后该用户可以登录以访问该应用程序。我也使用 SESSION 将用户对象从一个页面传送到另一个页面。我还没有进行任何类型的身份验证来检查用户会话是否处于活动状态，这就是当我手动输入 url 时它会将我带到页面而不检查我是否已登录的原因。

另外我希望有不同的用户具有不同的访问角色。i,e 我不想将所有访问权限授予所有用户。一些用户应该具有有限的访问权限。

谁能告诉我：

1.  做这个的最好方式是什么。
2.  除非用户登录，否则如何将输入的每个 url 重定向到登录页面
3.  我也想有一些关于相同的教程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T09:53:13.493

FOSUserBundle 对于与用户管理相关的一切都非常有用，而且它也很受欢迎，你应该看看它：[https ://github.com/FriendsOfSymfony/FOSUserBundle](https://github.com/FriendsOfSymfony/FOSUserBundle)

在此处查看文档：[https ://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/index.md](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/index.md)

# jsf - jsf-api.jar和jsf-impl.jar在执行过程中是如何相互连接的？

> ID：10188733
> 
> 赞同：0
> 
> 时间：2012-04-17T09:37:55.833
> 
> 标签：jsf, mojarra

我试图了解整个 JSF 规范（jsf-api.jar）如何转换为 jsf-impl.jar（JSF Mojarra 实现）。为了满足我的需要，我必须对 JSF Mojarra 的源代码进行一些更改。但是当我尝试进行更改时，编辑器会抛出很多错误。我知道，我错过了理解 jsf 规范如何在技术上实现的基本点？例如，如果我尝试显式地实现一类规范，我如何将其链接到整个实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T21:42:42.467

JSF API 是从 JSR 发布的公共 API。实现文件是 API 的基本实现。这些文件通常通过 META-INF.services/ 等几种不同的机制作为服务加载。如果您想了解更多详细信息，您应该阅读 JSR for implementationers。

# asp.net - asp.net entityframework 4 - 将 SQL 服务器迁移到 mysql

> ID：10188735
> 
> 赞同：1
> 
> 时间：2012-04-17T09:38:12.003
> 
> 标签：asp.net, mysql, sql-server-2008, entity-framework-4

对此有何建议？

我在 sql server 2008 中构建了一个数据库（只有表，没有 sp 和触发器）表确实使用标识列。在我的 asp.net 应用程序中，我从数据库生成了一个 EF 模型。我使用 linq 与我的实体交谈。网站工作出色。

我想要尝试的（如果我说的是疯狂的话，请阻止我）是从实体模型生成一个新的 MySql 数据库，并将我的应用程序配置为使用它，但仍然使用相同的 linq 逻辑。

这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T10:12:44.190

如果你尝试它，不要忘记在开始使用 MySql 之前备份你的旧 EDMX 文件。EDMX 文件由三个部分组成，其中一个部分完全取决于您使用的数据库服务器的类型。当您从模型生成数据库时，EDMX 文件的两个部分被完全替换（包括依赖于数据库的部分），因此一旦您尝试[从模型生成 MySql 数据库，](http://dev.mysql.com/doc/refman/5.5/en/connector-net-tutorials-efmodel-ddl.html)您到 SQL Server 的映射将丢失（由映射到 MySql 数据库替换） .

# java - 启用我的 jstl fmt 消息

> ID：10188736
> 
> 赞同：0
> 
> 时间：2012-04-17T09:38:13.343
> 
> 标签：java, properties, jstl, message

我的类路径中有一个属性文件，其中包含以下项目

```
PI20=Fältet "Ankomstdatum tom" har datumformatet åååå-mm-dd eller ååååmmdd. # AF Sök
PI61=Sökresultatet är exporterat. # AF Sök
PI3000=Rapporter och uppdragshandlingar till Varumärkeseneheten finns på << 1 >>. Rapporter och uppdragshandlingar till Designeneheten finns på << 2 >>. # AF Registrera uppdrag 
```

在我的 JSP 中，我这样做

```
<%@ taglib uri="http://java.sun.com/jstl/fmt" prefix="fmt"%>
<fmt:setBundle basename="messages.properties"/>
<fmt:message key="PI61"/> 
```

但我的消息没有出现。如何根据 fmt 标签的用途启用我的消息？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T09:43:38.537

您不应包含`.properties`在[`basename`](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/fmt/setBundle.html); 并假设它`messages.properties`位于类路径的根目录。

# php - 需要在 Joomla 页面中声明 !doctype 吗？

> ID：10188745
> 
> 赞同：0
> 
> 时间：2012-04-17T09:38:47.243
> 
> 标签：php, html, joomla

我在 Joomla 1.7 中运行我的网站。现在我只是从 Joomla（文章）中调用 php 和 html 页面，我不使用 Joomla 模板设计。我想知道的是，是否有必要在我在 Joomla 中使用的所有 php 和 html 页面中包含 !doctypes 如下所示，还是 Joomla 会自动将它们添加到所有网页中？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T09:42:51.290

我认为您在 joomla 应用程序中使用了模板。此模板有一个主要布局，其中应包括`DOCTYPE`. 如果您创建一篇文章，这应该在您的布局中呈现，因此您不需要在`DOCTYPE`那里添加。

我希望我理解你的问题是正确的，但你甚至可以测试它，如果 joomla 没有`DOCTYPE`自己添加添加它。

# sql - SQL - 显示范围之间的报价

> ID：10188751
> 
> 赞同：0
> 
> 时间：2012-04-17T09:38:59.327
> 
> 标签：sql, tsql, sql-server-2008-r2

我目前正在围绕优惠构建一个 SQL 查询。

基本上，报价有开始和结束日期。

场景1：用户只指定一个日期。

解决方案 1：显示当天或之后开始的所有优惠。

场景 2：用户只指定一个 TO 日期。

解决方案 2：显示在给定日期或之前结束的所有报价。

场景 3：用户指定要搜索的 TO 和 FROM 日期。

解决方案3的问题如下。

报价 - 从 01-01-2012 到 03-03-2012

搜索 - 从 01-01-2012 到 02-02-2012

报价应在查询中返回，因为它介于两个搜索值之间。

我当前的查询如下，但它没有按要求工作。

```
CREATE PROCEDURE [dbo].[GetAllOffers]
    @retailer_id        BIGINT,
    @opt_in             BIGINT,
    @use_once           BIGINT,
    @from_date          DATETIME,
    @to_date            DATETIME
AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from interfering with SELECT statements.
    SET NOCOUNT ON;

    SELECT      retr.Name,
                reco.Headline,
                reco.isOptIn,
                reco.isUseOnce,
                reco.DateValidFrom,
                reco.DateExpires,
                reco.Id                     AS OfferId

    FROM        RetailerCoupon              reco

    INNER JOIN  Retailer                    retr
    ON          reco.RetailerId             = retr.Id

    WHERE       (reco.RetailerId            = @retailer_id
    OR          @retailer_id                IS NULL)
    AND         (reco.isOptIn               = @opt_in
    OR          @opt_in                     IS NULL)
    AND         (reco.isUseOnce             = @use_once
    OR          @use_once                   IS NULL)
    AND         (reco.DateValidFrom         >= @from_date
    OR          @from_date                  IS NULL)
    AND         (reco.DateExpires           <= @to_date
    OR          @to_date                    IS NULL)

    ORDER BY    retr.Name   

END
GO 
```

请注意场景 1 和 2 包含在其 3 上方的查询中，这会导致问题。

史蒂文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T11:46:10.933

我仍在测试并尝试改进它，但这是否符合您的需求：

一些测试数据

```
declare @tmp table (offer nvarchar(30), startTime datetime, endTime datetime)
insert @tmp values ('Offer_1','2012-04-01','2012-04-10'),('Offer_2','2012-04-05','2012-04-15'),('Offer_3','2012-04-10','2012-04-20'),('Offer_!!!','2012-01-01','2012-03-03') 
```

`Offer_!!!`是你上面的例子

```
select  * 
from    @tmp 
where   
    -- Scenario1
    (@from_date <= startTime AND @to_date IS NULL)
OR  -- Scenario2
    (@from_date IS NULL AND @to_date <= endTime)
OR  -- Scenario3
    ((@from_date BETWEEN startTime AND endTime)
        AND
        (@to_date BETWEEN startTime AND endTime)) 
```

给出：

```
-- Scenario 1
EXEC GetAllOffers @from_date = '2012-04-01'
    ,   @to_Date = null

offer                          startTime               endTime
------------------------------ ----------------------- -----------------------
Offer_1                        2012-04-01 00:00:00.000 2012-04-10 00:00:00.000
Offer_2                        2012-04-05 00:00:00.000 2012-04-15 00:00:00.000
Offer_3                        2012-04-10 00:00:00.000 2012-04-20 00:00:00.000

-- Scenario 2
EXEC GetAllOffers @from_date = null
    ,   @to_Date = '2012-01-09'

offer                          startTime               endTime
------------------------------ ----------------------- -----------------------
Offer_1                        2012-04-01 00:00:00.000 2012-04-10 00:00:00.000
Offer_2                        2012-04-05 00:00:00.000 2012-04-15 00:00:00.000
Offer_3                        2012-04-10 00:00:00.000 2012-04-20 00:00:00.000
Offer_!!!                      2012-01-01 00:00:00.000 2012-03-03 00:00:00.000

-- Scenario 3
EXEC GetAllOffers @from_date = '2012-01-01'
    ,   @to_Date = '2012-02-02'

offer                          startTime               endTime
------------------------------ ----------------------- -----------------------
Offer_!!!                      2012-01-01 00:00:00.000 2012-03-03 00:00:00.000 
```

在我看来，您的要求中有一些非常大的漏洞，但这似乎可以满足您在场景中的要求

# android - 如何实例化 com.android.server.ViewServer

> ID：10188757
> 
> 赞同：0
> 
> 时间：2012-04-17T09:39:11.450
> 
> 标签：android, reflection

在 Android 操作系统中，我使用反射来获取`IWindowManager`：

```
Class tempClass = Class.forName("android.os.ServiceManager");
Method method = tempClass.getMethod("getService", String.class);
IBinder binder = (IBinder) method.invoke(null,new Object[] { "window" });
IWindowManager mIWM = IWindowManager.Stub.asInterface(binder); 
```

并使用反射得到`ViewServer`：

```
Class mViewServer = Class.forName("com.android.server.ViewServer"); 
```

但是使用下面的代码会抛出`java.lang.IllegalArgumentException`：

```
Constructor ct = mViewServer.getDeclaredConstructor(Class.forName("com.android.server.WindowManagerService"));
ct.setAccessible(true);
Object mVSObject = ct.newInstance(mIWM); 
```

构造`ViewServer`函数是：

```
ViewServer(WindowManagerService windowManager) {
    ...
} 
```

谁能帮帮我，非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-15T12:46:53.613

试试这个代码

```
Class<?> serviceManagerClass = Class.forName("android.os.ServiceManager");
        Class[] cArg = new Class[1];
        cArg[0] = String.class;
        Method getServiceMethod = serviceManagerClass.getDeclaredMethod("getService", cArg);
        getServiceMethod.setAccessible(true);
        IBinder wmbinder =  (IBinder) getServiceMethod.invoke(null, Context.WINDOW_SERVICE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T10:05:40.973

我使用 android 4.0 源代码，并且`ViewServer`只有一个构造函数：

```
ViewServer(WindowManagerService windowManager, int port) {
        mWindowManager = windowManager;
        mPort = port;
    } 
```

但你的代码：

```
Constructor ct = mViewServer.getDeclaredConstructor(Class.forName("com.android.server.WindowManagerService")); 
```

没有`NoSuchMethodException`投掷，所以可能有这个`Constructor`，

你可以试试这个：输入convert并传递这个参数

```
(WindowManagerService)mIWM 
```

如果也不起作用，建议使用此方法打印`ViewServer`所有内容：`Constructors`

```
class.getDeclaredConstructors(); 
```

以确保`Constructors`你的论点已经存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-27T15:51:01.213

要使用 ViewServer，您需要将类 ViewServer.java 添加到您的项目中并在 onCreate 、 onResume 和 onDestroy 中实例化它，这里是一个示例：

```
public class ViewServerActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    ViewServer.get(this).addWindow(this);
}

@Override
protected void onResume() {
    super.onResume();
    ViewServer.get(this).setFocusedWindow(this);

}

@Override
protected void onDestroy() {

    super.onDestroy();
    ViewServer.get(this).removeWindow(this);
} 
```

}

这是 ViewServer.java [ViewServer.java类的 url](https://android.googlesource.com/platform/frameworks/base/+/master/services/java/com/android/server/wm/ViewServer.java)

# java - 如何实现插入排序？

> ID：10188760
> 
> 赞同：0
> 
> 时间：2012-04-17T09:39:24.977
> 
> 标签：java, list, sorting

好的，我的目标是能够对每行单个条目的文本文件进行排序。我坚持到我必须创建插入类的地步。我如何传递单个链接列表（我自己的实现，而不是 Java 的）以及我还需要作为参数传递什么？到目前为止，这是我的代码。PS 我使用我自己的链表实现的原因是因为我想知道这件事是如何工作的，以及使用链表完成的各种操作是如何工作的。

任何帮助将不胜感激。

主要的：

```
 import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.DataInputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileWriter;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.Scanner;

public class Sort
{
    public static void main(String[] args) throws Exception
    {
        Scanner kb = new Scanner (System.in) ;
        File outputFile ;
        EntriesList list = new EntriesList () ;
        String line ;
        String entry ;
        String command ;
        String textContent ;

         // Create the new text file. If exists, it will continue to the next commands
        do
        {
            outputFile = new File("Entries.txt") ;

                if(!outputFile.exists())
                {
                    outputFile.createNewFile ();                    
                    System.out.println("The file was created as Entries.txt");
                    System.out.println("");
                }

        }while (!outputFile.exists()) ;

        // Define which file to stream in from          
        FileInputStream fileIn = new FileInputStream("Entries.txt") ;
        DataInputStream input = new DataInputStream (fileIn) ;
        BufferedReader br = new BufferedReader (new InputStreamReader (input)) ;

        try
        {               
            // Read each line of the file               
            while ((line = br.readLine()) != null)
            {
                     entry = line;
                     list.insert(entry) ;
            }       
            input.close() ;
        }catch (Exception e){
            System.err.println("Error. Could not read the file") ;
        }

        //Welcome message + entry counter
        System.out.println("Welcome. \nYou about to sort " + list.count("Entries.txt") + " entries. \nPlease use the following commands [Add -add new entry, View -view entries before sorting, -i -Insertion Sort, -s -Selection Sort, -m -Merge Sort, Exit]: " );
        System. out.println ("") ;          
        command = kb.next() ;

        // User Input
        do
        {
            if (command.equalsIgnoreCase("Add"))
            {
                System.out.println("Enter String value:") ;
                entry = kb.next() ;
                textContent = entry ;
                System.out.println("Entry added successfully") ;

                try
                {
                    //the "true" argument sets the FileWriter to append mode so that is does not overwrite the first time
                    BufferedWriter out = new BufferedWriter(new FileWriter("Entries.txt", true));
                    out.write(textContent) ;
                    out.newLine() ;
                    out.close() ;
                }catch(IOException e)
                {
                    System.out.println("Could not write to file") ;
                    System.exit(0) ;
                }

                System.out.println ("Enter command:") ;
                command = kb.next() ;

                list.insert(entry) ;
            }

            else if (command.equalsIgnoreCase("View"))
            {
                if (!list.isEmpty())
                {
                    list.printList();
                    System.out.println ("Enter command:") ;
                    command = kb.next() ;
                }
                else
                {
                    System.out.println("File is empty. Please enter records first.");
                    System.out.println ("Enter ADD command:") ;
                    command = kb.next();
                }
            }
            else if (command.equalsIgnoreCase("Exit"))
            {
                System.exit(0) ;
            }
            else 
            {
                System.out.println("Unknown command. Please use ADD, VIEW or EXIT") ;
                command = kb.next() ;
            }
        }while (!command.equalsIgnoreCase("Exit")) ;
    }
} 
```

列表实现：

```
 import java.io.BufferedInputStream;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.InputStream;

public class EntriesList 
{
    private Entries head;
    private int listCount ;

    //LinkList constructor
    public EntriesList()
    {
            head = new Entries (null) ;
            listCount = 0 ;            
    }

    //Returns true if list is empty
    public boolean isEmpty() 
    {
            return head == null;
    }

    //Inserts a new Entry at the end of the list
    public void insert(String entryIn) 
    {
            Entries temp = new Entries (entryIn) ;
            Entries current = head ;

            // Go to the end of the list
            while (current.getNext() != null)
            {
                current = current.getNext() ;
            }

            // Last Entries's next reference is set to the noew node 
            current.setNext(temp) ;
            listCount++ ;
    }

    //Return the size of the list
    public int size()
    {
        return listCount ;
    }

        //Prints list data
    public void printList()
    {
            Entries currentEntry = head;
            while(currentEntry != null)
            {
                currentEntry.printLink();
                currentEntry = currentEntry.nextEntry;
            }
            System.out.println("");
    }

 // Count the lines in the text file
    public int count(String filename) throws IOException 
    {
        InputStream is = new BufferedInputStream(new FileInputStream(filename));
        try 
        {
            byte[] c = new byte[1024] ;
            int count = 0 ;
            int readChars = 0 ;
            while ((readChars = is.read(c)) != -1) 
            {
                for (int i = 0 ; i < readChars ; ++i)
                {
                    if (c[i] == '\n')
                        ++count ;
                }
            }
            return count ;
        } finally
        {
            is.close() ;
        }
    }
} 
```

条目（链接）创建者：

```
public class Entries
{
    public String entry ;
    public Entries nextEntry;

    // Empty Link Constructor
    public Entries ()
    {

    }

    //Link constructor
    public Entries(String entryIn) 
    {
        entry = entryIn ;
        nextEntry = null ;
    }

    public String getEntry () 
    {
        return entry ;
    }

    public void setEntry (String entryIn)
    {
        entry = entryIn ;
    }

    public Entries getNext () 
    {
        return nextEntry ;
    }

    public void setNext (Entries nextEntryIn)
    {
        nextEntry = nextEntryIn ;
    }

    //Print Link data
    public void printLink()
    {
            System.out.println("") ;
            System.out.print(getEntry() +"\n");
            System.out.println("") ;
    }
} 
```

还有万能的插入排序类：

```
public class Insertion 
{
    public String Sort (EntriesList list)
    {

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T09:44:18.147

这篇文章似乎在问两个不同的问题。所以我已经分别回答了他们。

**编辑：**刚刚注意到您的链表类有问题。你必须先解决这个问题，然后看看我对你问题的回答。

您的实现不正确，因为您没有在链表中存储对下一个链接的引用。`Entries`应该存储对下一个元素的引用。我推荐阅读[这篇文章。](http://en.wikipedia.org/wiki/Linked_list)

如果您查看该页面上的图表...

![单链表](../Images/54b6b1343f5bf08d0e296be2c615d139.png)

每个链接（或您所称的条目）都有一个指向其邻居的链接。

**实现插入排序**

我假设您想按其中的条目按字母顺序对链接列表进行排序。如果是这种情况，您只需在插入排序中换出整数比较，您将在教科书/网络上看到以进行字母比较。

看一下[按字母顺序比较字符串，](https://stackoverflow.com/questions/6203411/comparing-strings-by-their-alphabetical-order)这是一个类似的问题，它告诉您如何进行字母比较。

昨晚我还在 Scala 中为整数编写了一个插入排序类，[您](http://www.achurch.me/2012/04/16/insertion-sort-scala-implementation/)可能会发现它很有用。

**遍历链表**

要传递您的链接列表，您只需传递`head`链接。然后，您可以通过调用列表的元素来遍历`next`链表。

例如..

```
while(link < null){
  link.next
} 
```

假设`link`等于链表的头部，上面的循环将继续获取链表中的下一个元素，直到为空（应该代表链表的结尾）

# android - 如何在自己的适配器中获取arraylist的位置

> ID：10188767
> 
> 赞同：-1
> 
> 时间：2012-04-17T09:39:56.437
> 
> 标签：android, listview, arraylist, adapter

我想将数组列表（项目）的位置设置到我自己的列表视图适配器中。

```
 holder.txtViewTitle.setText(title.get(position)); 
```

但我得到了错误。请检查以下代码。

我也得到了 setImageResource 的错误。

```
 holder.imgViewLogo.setImageResource(images[position]); 
```

谢谢。

```
public class LazyAdapter extends BaseAdapter{

private activites context;
private ArrayList<String> title;
private String[] images;
private LayoutInflater inflater;

public LazyAdapter(activites activites,String[] img ,ArrayList<String> items) {  
    super();  

    this.context = activites;  
    this.title = items;  
    this.images = img; 

}  

@Override  
public int getCount() {  
    // TODO Auto-generated method stub  
    return title.size();  
}  

@Override  
public Object getItem(int position) {  
    // TODO Auto-generated method stub  
    return null;  
}  

@Override  
public long getItemId(int position) {  
    // TODO Auto-generated method stub  
    return 0;  
}  

public static class ViewHolder  
{  
    ImageView imgViewLogo;  
    TextView txtViewTitle;  

}  

@Override  
public View getView(int position, View convertView, ViewGroup parent) {  
    // TODO Auto-generated method stub  

    ViewHolder holder;  
    if(convertView==null)  
    {  
        holder = new ViewHolder();  
        convertView = inflater.inflate(R.layout.activity_listitem, null);  

        holder.imgViewLogo = (ImageView) convertView.findViewById(R.id.activity_list_logo);  
        holder.txtViewTitle = (TextView) convertView.findViewById(R.id.activity_list_title);  

        convertView.setTag(holder);  
    }  
    else  
        holder=(ViewHolder)convertView.getTag();  

    holder.imgViewLogo.setImageResource(images[position]);  
    holder.txtViewTitle.setText(title.get(position));  

    return convertView;  
}   

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T09:53:56.557

这是我认为的问题：

```
 private String[] images; 
```

你应该声明它：

```
 private Integer[] images; 
```

希望这会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T11:13:41.653

```
public class LazyAdapter extends BaseAdapter{

private activites context;
private ArrayList<String> title;
private String[] images;
private LayoutInflater inflater;
 Bitmap myBitmap;

public LazyAdapter(activites activites,String[] img ,ArrayList<String> items) {  
    super();  

    this.context = activites;  
    this.title = items;  
    this.images = img; 

}  

@Override  
public int getCount() {  
    // TODO Auto-generated method stub  
    return title.size();  
}  

@Override  
public Object getItem(int position) {  
    // TODO Auto-generated method stub  
    return null;  
}  

@Override  
public long getItemId(int position) {  
    // TODO Auto-generated method stub  
    return 0;  
}  

public static class ViewHolder  
{  
    ImageView imgViewLogo;  
    TextView txtViewTitle;  

}  

@Override  
public View getView(int position, View convertView, ViewGroup parent) {  
    // TODO Auto-generated method stub  
 try {
                      url = new URL(images[position]);
                      connection = (HttpURLConnection) url
                                    .openConnection();

                        connection.setDoInput(true);

                            connection.connect();
                             connection.setReadTimeout(120000);
                             InputStream     input = connection.getInputStream();
                             myBitmap = BitmapFactory.decodeStream(input);

                            } catch (IOException e) {
                        e.printStackTrace();
                        return null;
                    }
    ViewHolder holder;  
    if(convertView==null)  
    {  
        holder = new ViewHolder();  
        convertView = inflater.inflate(R.layout.activity_listitem, null);  

        holder.imgViewLogo = (ImageView) convertView.findViewById(R.id.activity_list_logo);  
        holder.txtViewTitle = (TextView) convertView.findViewById(R.id.activity_list_title);  

        convertView.setTag(holder);  
    }  
    else  
        holder=(ViewHolder)convertView.getTag();  

    holder.imgViewLogo.setImageBitmap(myBitmap);  
    holder.txtViewTitle.setText(title.get(position));  

    return convertView;  
}   

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T11:39:42.907

以下覆盖方法中的小修正。试试这个，让我知道

```
@Override  
public int getCount() {  
    // TODO Auto-generated method stub  
    return title.size();  
}  

@Override  
public Object getItem(int position) {  
    // TODO Auto-generated method stub  
    return position;  
}  
@Override  
public long getItemId(int position) {  
    // TODO Auto-generated method stub  
    return position;  
} 
```

# python - 使用 oauth2.0 导入 Google 联系人

> ID：10188768
> 
> 赞同：8
> 
> 时间：2012-04-17T09:40:01.403
> 
> 标签：python, google-api, oauth-2.0, contacts, google-api-python-client

**存在哪些使用 python 和oauth2.0**导入谷歌联系人的可能方法？

我们成功获得了凭据，并且我们的应用程序请求访问联系人，但是在获得凭据后我找不到发现联系人 api 的方法。

所以像：

```
 from apiclient.discover import build
 import httplib2
 http = httplib2.Http()
 #Authorization
 service = build("contacts", "v3", http=http) 
```

给我们`UnknownApiNameOrVersion`例外。看起来联系人 API 不在 apiclient 支持的 API 列表中。

我正在寻找替代方法。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-04T16:31:50.703

[Google Contacts API](https://developers.google.com/google-apps/contacts/v3/)不能与库一起使用，因为`google-api-python-client`它是[Google Data API](https://developers.google.com/gdata/docs/2.0/reference)，而`google-api-python-client`旨在与[基于发现的 API](https://developers.google.com/discovery/v1/getting_started#background)一起使用。

[无需经历@NikolayFominyh](https://stackoverflow.com/users/656804/nikolay-fominyh)描述的所有麻烦，您可以在`gdata-python-client`.

要获取有效令牌，请按照 Google Developers[博客文章](http://googleappsdeveloper.blogspot.com/2011/09/python-oauth-20-google-data-apis.html)中的说明深入了解该过程。

## 首先，创建一个令牌对象：

```
import gdata.gauth

CLIENT_ID = 'bogus.id'  # Provided in the APIs console
CLIENT_SECRET = 'SeCr3Tv4lu3'  # Provided in the APIs console
SCOPE = 'https://www.google.com/m8/feeds'
USER_AGENT = 'dummy-sample'

auth_token = gdata.gauth.OAuth2Token(
    client_id=CLIENT_ID, client_secret=CLIENT_SECRET,
    scope=SCOPE, user_agent=USER_AGENT) 
```

## 然后，使用此令牌授权您的应用程序：

```
APPLICATION_REDIRECT_URI = 'http://www.example.com/oauth2callback'
authorize_url = auth_token.generate_authorize_url(
    redirect_uri=APPLICATION_REDIRECT_URI) 
```

生成 this 后`authorize_url`，您（或您的应用程序的用户）将需要访问它并接受 OAuth 2.0 提示。如果这是在 Web 应用程序中，您可以简单地重定向，否则您需要在浏览器中访问该链接。

## 授权后，将代码换成token：

```
import atom.http_core

redirect_url = 'http://www.example.com/oauth2callback?code=SOME-RETURNED-VALUE'
url = atom.http_core.ParseUri(redirect_url)
auth_token.get_access_token(url.query) 
```

在您访问浏览器的情况下，您需要将重定向到的 URL 复制到变量`redirect_url`.

如果您在 Web 应用程序中，您将能够指定路径的处理程序`/oauth2callback`（例如），并且可以简单地检索查询参数`code`以交换令牌的代码。例如，如果使用`WebOb`：

```
redirect_url = atom.http_core.Uri.parse_uri(self.request.uri) 
```

## 最后用这个令牌授权你的客户：

```
import gdata.contacts.service

client = gdata.contacts.service.ContactsService(source='appname')
auth_token.authorize(client) 
```

## 更新（原始答案后 12 个月以上）：

或者，您可以使用我在[博客文章](http://blog.bossylobster.com/2012/12/bridging-oauth-20-objects-between-gdata.html)`google-api-python-client`中描述的支持。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T21:35:53.980

最终解决方案相对容易。

**步骤 1** 获取 oauth2.0 令牌。它在官方文档中有很好的记录： [http ://code.google.com/p/google-api-python-client/wiki/OAuth2](http://code.google.com/p/google-api-python-client/wiki/OAuth2)

**第 2 步** 现在我们有令牌，但无法发现联系人 API。但是你会发现，在 oauth2.0 Playground 中你可以导入联系人。 [https://code.google.com/oauthplayground/](https://code.google.com/oauthplayground/)

您可以发现，您在凭据中具有访问令牌，在步骤 1 中获得。要访问联系人 api，您必须在参数之后添加到标题`'Authorization':'OAuth %s' % access_token`

**第 3 步** 现在您必须将令牌传递给谷歌库令牌，该令牌将与 oauth1.0 令牌兼容。可以通过以下代码完成：

```
from atom.http import ProxiedHttpClient #Google contacts use this client
class OAuth2Token(object):
    def __init__(self, access_token):
        self.access_token=access_token

    def perform_request(self, *args, **kwargs):
        url = 'http://www.google.com/m8/feeds/contacts/default/full'
        http = ProxiedHttpClient()
        return http.request(
            'GET',
            url,
            headers={
                'Authorization':'OAuth %s' % self.access_token
            }
        )
google = gdata.contacts.service.ContactsService(source='appname')
google.current_token = OAuth2Token(oauth2creds.access_token)
feed = google.GetContactsFeed() 
```

# .net - 在 Linq to SQL 中是否提供 Unpivot（非 Pivot）功能？如何？

> ID：10188774
> 
> 赞同：6
> 
> 时间：2012-04-17T09:40:24.060
> 
> 标签：.net, linq, linq-to-sql, pivot, unpivot

我看过一些帖子可以让您获取数据透视结果但不会取消数据透视，需要知道是否有任何干净的方法可以实现？如果不是任何解决方法也可以吗？

执行此操作以在 Management Studio 中查看 unpivot 结果

```
CREATE TABLE [dbo].[Payment](
    [PaymentId] [int] NOT NULL,
    [EmployeeId] [int] NOT NULL,
    [RegularHours] [decimal](18, 0) NULL,
    [OvertimeHOurs] [decimal](18, 0) NULL
) ON [PRIMARY]

go

insert into payment values (1, 1, 40,  10)
insert into payment values (1, 2, 20,  0)

go

select * from payment 

select * from payment unpivot ([hours] for [paytype] in ([RegularHours], [OvertimeHOurs]))a 
```

第一个 Select 语句的输出

```
PaymentId   EmployeeId  RegularHours                            OvertimeHOurs
----------- ----------- --------------------------------------- 
1           1           40                                      10
1           2           20                                      0

(2 row(s) affected) 
```

第二个 Select 语句的输出&这就是我要找的

```
PaymentId   EmployeeId  hours                                   paytype
----------- ----------- ----------------------------------------------------- 
1           1           40                                      RegularHours
1           1           10                                      OvertimeHOurs
1           2           20                                      RegularHours
1           2           0                                       OvertimeHOurs

(4 row(s) affected) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-17T10:18:13.643

好的，我看不出有一种方法可以将它翻译成 SQL，下面是我想出的方法，但这都是执行的托管代码。

或者...您可以简单地在 SQL 中创建一个视图。

```
var payments = Payments.Select (p => new {
                            OvertimeHOurs = new {
                                    p.PaymentId,
                                    p.EmployeeId,
                                    Hours = p.OvertimeHOurs,
                                    PayType = "OvertimeHOurs"
                                    },
                            RegularHours = new {
                                    p.PaymentId,
                                    p.EmployeeId,
                                    Hours = p.RegularHours,
                                    PayType = "RegularHours"
                                    }
                            }
                );
var result = payments.Select(a => a.OvertimeHOurs).Union(payments.Select (p => p.RegularHours));
result.Dump(); // LINQPad Method 
```

生成的 SQL 是

```
-- Region Parameters
DECLARE @p0 NVarChar(1000) = 'OvertimeHOurs'
DECLARE @p1 NVarChar(1000) = 'RegularHours'
-- EndRegion
SELECT [t4].[PaymentId], [t4].[EmployeeId], [t4].[OvertimeHOurs] AS [Hours], [t4].[value] AS [PayType]
FROM (
    SELECT [t1].[PaymentId], [t1].[EmployeeId], [t1].[OvertimeHOurs], [t1].[value]
    FROM (
        SELECT [t0].[PaymentId], [t0].[EmployeeId], [t0].[OvertimeHOurs], @p0 AS [value]
        FROM [payment] AS [t0]
        ) AS [t1]
    UNION
    SELECT [t3].[PaymentId], [t3].[EmployeeId], [t3].[RegularHours], [t3].[value]
    FROM (
        SELECT [t2].[PaymentId], [t2].[EmployeeId], [t2].[RegularHours], @p1 AS [value]
        FROM [payment] AS [t2]
        ) AS [t3]
    ) AS [t4] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T10:30:49.303

```
var result = new List<UnpivotedDbRecord>();
Payments.ForEach(r =>
                    {
                        result.Add(new UnpivotedDbRecord
                                        {
                                            EmployeeId = r.EmployeeId,
                                            PaymentId = r.PaymentId,
                                            PaymentType = "Regular",
                                            Hours = r.RegularHours
                                        });
                        result.Add(new UnpivotedDbRecord
                                        {
                                            EmployeeId = r.EmployeeId,
                                            PaymentId = r.PaymentId,
                                            PaymentType = "Overtime",
                                            Hours = r.OvertimeHours
                                        });
                    }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-05-09T18:14:59.217

对于 500 种支付类型，您将需要使用反射来提取要取消透视的字段，这可能会很慢，但如果您不处理大量数据则很有效。因此，您将无法将 unpivot 操作转换为 SQL，您必须在 LINQ to Objects 中完成转换后的数据。（理论上你可以编写一个代码生成器来创建查询，但我不确定 SQL 转换处理 500 列的效果如何，或者数据库引擎处理 500 个元素的联合的效果如何。）

所以这里是答案的类型 - 该`ShallowCopy`方法用于避免为每个支付类型设置枢轴（平面）数据：

```
public class UnpivotData {
    public int PaymentId { get; set; }
    public int EmployeeId { get; set; }
    public string PayType { get; set; }
    public decimal Hours { get; set; }

    public UnpivotData ShallowCopy() => (UnpivotData)this.MemberwiseClone();
} 
```

现在，取消透视数据的扩展方法很简单 - 提取透视数据，然后为每个支付类型返回一个新对象。此方法采用一个字符串数组作为数据透视数据的名称，并采用一个 lambda 谓词来选择用于支付类型的字段名称。

```
public static class IEnumerableExt {
    public static IEnumerable<UnpivotData> Unpivot<T>(this IEnumerable<T> src, string[] pivotFieldNames, string unPivotName, string unPivotValue, Func<string, bool> unpivotFieldNameFn) {
        var srcPIs = typeof(T).GetProperties();
        var srcPivotPIs = srcPIs.Where(pi => pivotFieldNames.Contains(pi.Name));
        var srcUnpivotPIs = srcPIs.Where(pi => unpivotFieldNameFn(pi.Name)).ToList();
        var ansPIs = typeof(UnpivotData).GetProperties();
        var ansPivotPIs = ansPIs.Where(pi => pivotFieldNames.Contains(pi.Name));
        var srcAnsPivotPIs = srcPivotPIs.Zip(ansPivotPIs, (spi, api) => new { spi, api }).ToList();
        var unPivotNamePI = ansPIs.First(pi => pi.Name == unPivotName);
        var unPivotValuePI = ansPIs.First(pi => pi.Name == unPivotValue);

        foreach (var d in src) {
            var ansbase = new UnpivotData();
            foreach (var sapi in srcAnsPivotPIs)
                sapi.api.SetValue(ansbase, sapi.spi.GetValue(d));

            foreach (var spi in srcUnpivotPIs) {
                var ans = ansbase.ShallowCopy();
                unPivotNamePI.SetValue(ans, spi.Name);
                unPivotValuePI.SetValue(ans, spi.GetValue(d));

                yield return ans;
            }
        }
    }
} 
```

现在，您可以使用该`Unpivot`方法取消旋转任意数量的支付类型：

```
var result = payments.AsEnumerable().Unpivot(new[] { "PaymentId", "EmployeeId" }, "PayType", "Hours", fn => fn.EndsWith("Hours")); 
```

# mysql - 根据计数标准在 MySQL 中选择行时出错

> ID：10188778
> 
> 赞同：1
> 
> 时间：2012-04-17T09:40:34.530
> 
> 标签：mysql, select, count, group-by

我在 MySQL 数据库中有一个表，我想从中选择唯一数量的行。我当前的表有 3 列，名为 user_id、image_id 和 is_like。我需要列出 user-id 计数等于 221 的所有用户。例如，对于特定用户 19，在 user_id 列中，19 的计数必须为 221。我编写了以下代码，但它给了我一个错误的答案：

```
SELECT * FROM `votes` WHERE COUNT(userid)=221 GROUP BY userid 
```

它给了我一个错误

> 1111 - 组功能的使用无效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T09:43:41.507

您的查询应该是

```
SELECT * FROM `votes` GROUP BY userid HAVING COUNT(userid) = 221 
```

你需要使用`HAVING`，而不是`WHERE`。

该`WHERE`子句过滤选择了哪些行。然后对行进行分组，然后`userid`为函数聚合数字（列中）`COUNT`。

`HAVING`就像，只有在计算完值`WHERE`之后才会发生。`COUNT`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T09:45:14.497

我认为您正在寻找的是 HAVING 子句。你可以用谷歌搜索！

# ruby - 将 Kerberos 从 Windows 检索到 Linux

> ID：10188780
> 
> 赞同：1
> 
> 时间：2012-04-17T09:40:36.760
> 
> 标签：ruby, windows, linux, file-permissions

我想制作一个允许用户浏览目录并从 Windows 共享下载文件的 Intranet 应用程序。

Intranet 应用程序目前是 Rails，但本质上是托管在 Ubuntu 上（即不是 Windows）

Intranet 应用程序有一个登录名，所以我知道当前用户的用户名是一个字符串，例如“paul”。这将与 Windows 框上的用户名相同。

有没有办法结合使用 Windows 中设置的文件权限和 Linux 上托管的 Web 应用程序中的用户名来列出和访问文件？

我在想 WinBind 或 SMBClient 中可能有一些东西（我对此知之甚少）或类似的东西？我认为关键问题与能够从 Linux 访问 Windows 文件权限（包括组和成员资格）有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T13:51:48.843

FWIW - 我使用 Windows 实用程序[AccessChk](http://technet.microsoft.com/en-us/sysinternals/bb664922)并在 Windows 机器上构建了一个简单的 Web 服务，该服务接受用户名参数并以 JSON 格式返回可读文件树，然后我可以从 Intranet Rails 应用程序轻松访问。

不是很棒，但适用于 Intranet。

# sql-server - ACOS 函数的 SQL 2012 错误

> ID：10188781
> 
> 赞同：3
> 
> 时间：2012-04-17T09:40:36.957
> 
> 标签：sql-server, sql-server-2012

我在 SQL Server 2012 ACOS 函数中遇到了这个错误：

```
declare @lat1 decimal(12,10), @lon1 decimal(12,10), @lat2 decimal(12,10), @lon2 decimal(12,10)
declare @dist float

select @lat1=51.1790825000, @lon1= 4.1590020000, @lat2= 51.1790825000, @lon2= 4.1590020000  
set @dist = SIN(RADIANS(@lat1)) * SIN(RADIANS(@lat2)) + COS(RADIANS(@lat1)) * COS(RADIANS(@lat2)) * COS(RADIANS(@lon1 - @lon2))

print @dist
print ACOS(1)
print ACOS(@dist) 
```

最后一个打印函数给出“发生了无效的浮点操作”。这在 SQL Server 2008 中运行良好

弗拉德

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T14:48:00.513

看起来您正在尝试计算地球上两点之间的距离。让您的生活更轻松并使用内置的地理类型。

```
DECLARE @lat1 DECIMAL(12, 10) ,
    @lon1 DECIMAL(12, 10) ,
    @lat2 DECIMAL(12, 10) ,
    @lon2 DECIMAL(12, 10)
DECLARE @dist FLOAT

SELECT  @lat1 = 51.1790825000 ,
        @lon1 = 4.1590020000 ,
        @lat2 = 51.1790825000 ,
        @lon2 = 4.1590020000

DECLARE @p1 GEOGRAPHY = GEOGRAPHY::Point(@lat1, @lon1, 4326) ,
    @p2 GEOGRAPHY = GEOGRAPHY::Point(@lat2, @lon2, 4326)

SELECT  @dist = @p1.STDistance(@p2) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T11:24:25.953

acos() 函数的浮点值参数必须在 -1 到 1 范围之间。因此

```
FUNCTION [dbo].[Calculate_Distance]  
(  
@Lat1 float, @Long1 float, @Lat2 float, @Long2 float  
)  
RETURNS float  
AS  
BEGIN  

    DECLARE @acosValue float     
    DECLARE @R float  
    SET @R = 3958.7558657440545 -- mi       
    DECLARE @Distance float  
    Set @acosValue= cos( radians(@Lat1) ) * cos( radians( @Lat2 ) ) * cos( radians( @Long2 ) - radians(@Long1) ) + sin( radians(@Lat1) ) * sin( radians( @Lat2 ) ) ;
    IF @acosValue>1.0 
    Begin
    Set @acosValue=1.0;
     End
    IF @acosValue<-1.0 
    Begin
    Set @acosValue=-1.0;
     End

    SET @Distance = acos(@acosValue)
     * @R;  

    RETURN @Distance  

END 
GO 
```

尝试这个

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T12:38:17.890

利用

```
print ACOS(CASE WHEN @dist > 1 THEN 1 ELSE @dist END) 
```

`@dist`是一种`float`数据类型，实际上略多于`1`由于舍入问题，如下所示。

```
SELECT CAST(@dist AS BINARY(8)) AS [@dist], 
       CAST(CAST(1 AS FLOAT) AS BINARY(8)) AS [1] 
```

退货

```
@dist              1
------------------ ------------------
0x010000000000F03F 0x000000000000F03F 
```

`010000000000F03F`在此处插入[IEEE 转换器](http://babbage.cs.qc.cuny.edu/IEEE-754/)表明这大致`1.0000000000000002220446049250313080847263`可以从下面验证（返回`Y`）

```
SELECT 
     CASE WHEN @dist between 1.0000000000000002220446049250313080847 AND 
                             1.0000000000000002220446049250313080848 
     THEN 'Y' ELSE 'N' END 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-31T16:43:48.547

正如其他答案所述，您有一个浮点问题，它会根据不同的 CPU 架构以不同的方式呈现。但是，有一个简单的单线可以解决您的问题：

`declare @dist float`需要更改为`declare @dist decimal(12, 10)`.

# asp-classic - ASP 页中的响应缓冲区限制超出错误

> ID：10188794
> 
> 赞同：2
> 
> 时间：2012-04-17T09:41:39.393
> 
> 标签：asp-classic, buffer

错误：响应对象错误“ASP 0251：80004005”

超出响应缓冲区限制

ASP 页的执行导致响应缓冲区超出其配置的限制。

我使用此代码来解决此问题，但问题没有解决

```
<% Response.Buffer=False %>
<%
do while not objrs.eof
response.flush
objrs.movenext
loop
%> 
```

请帮我解决这个问题

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T11:36:55.263

如果设置`Response.Buffer`为 false 没有帮助，那么您通过一次调用`Response.Write`.

缓冲从未真正关闭。每次调用`Response.Write`都会将写入的内容放在 ASP 的缓冲区中。每次调用 .ASP 后，`Response.Buffer = False`ASP 都会自动刷新缓冲区`Response.Write`。

因此，即使传递给的字符串超过缓冲区大小`Response.Buffer = False`，仍然可能出现“缓冲区超出”错误。`Response.Write`

如果您拥有服务器，那么我建议您打开缓冲区，而是增加 IIS 管理器中的 ASP“响应缓冲限制”。OTH 如果您使用的是托管服务，则将任何通过其发送的大数据`Response.Write`分成较小的块，例如 128KB 到 1MB 之间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T10:14:38.850

不能组合`response.buffer = false`和`response.flush`。使用`response.buffer = false`并且`response.write`应该可以完美运行。

# javascript - 如果对象为空，则有条件地在视图中显示元素

> ID：10188795
> 
> 赞同：1
> 
> 时间：2012-04-17T09:41:43.677
> 
> 标签：javascript, jquery, ruby-on-rails, css, ruby-on-rails-3

下面是我的视图模板的一部分。

```
%ul.property_list
%li.lastminute
  %span.icon
  %h5 #{house.lastminute}
  %h6 #{house.lastminute_conditions}
 %li.guest
  %span.icon
  %h5 #{house.guests} 
```

有些房子有最后一刻的销售，有些则没有。如果`lastminute`属性已填充，我想显示该`%li.lastminute`块。如果`lastminute`属性为空，`%li.lastminute`则不显示。如何以及最好的方法是什么？视图中的条件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T09:44:16.727

尝试

```
%h5 #{house.lastminute} if house.lastminute.present? 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T09:51:55.790

```
%ul.property_list
%li.lastminute
  %span.icon
  - if house.lastminute
    %h5 #{house.lastminute}
  %h6 #{house.lastminute_conditions}
 %li.guest
  %span.icon
  %h5 #{house.guests} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T10:47:37.697

是的，您必须在表示层（视图）中有一个条件。它也不错，因为您想在表示逻辑中更改什么（用户如何看待它）。

但我希望有一个辅助方法来处理您的登录

1 - 干净

2 - 如果你的条件逻辑变得更复杂，它会更容易管理

我首选的解决方案是使用辅助方法

在您的帮助模块中

```
def lastminute?(lastminute)
  lastminute.nil?
end 
```

在你看来

```
- if lastminute?(house.lastminute)
  %li.lastminute
    %span.icon
    %h5 #{house.lastminute}
    %h6 #{house.lastminute_conditions} 
```

:D

# java - java - 文件读取器/写入器崩溃且无法正常工作

> ID：10188801
> 
> 赞同：0
> 
> 时间：2012-04-17T09:42:22.493
> 
> 标签：java, bufferedreader, bufferedwriter

我正在为读/写文件的人制作一个程序。我创建了它并对其进行了测试，但是当我告诉它名称时它崩溃了。代码：

```
import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.DataInputStream;
import java.io.FileInputStream;
import java.io.FileWriter;
import java.io.InputStreamReader;
import java.util.Scanner;

public class Main {
public static void main(String[] args) throws Exception {

    Scanner scanner = new Scanner(System.in);

    print("Enter a name for the bell: ");
    String bellname = scanner.nextLine();

    FileInputStream fs = new FileInputStream("normbells.txt");
    DataInputStream in = new DataInputStream(fs);
    BufferedReader br = new BufferedReader(new InputStreamReader(in));

    FileWriter fr = new FileWriter("normbells.txt");
    BufferedWriter bw = new BufferedWriter(fr);
    String line;

    while((line = br.readLine()) != null) {
        int index = line.indexOf(":");

        if(index == -1) {}else{
            String name = line.substring(0, index);

            if(bellname.equals(name)) {
                print("This bell name is already taken!");
                line = null;
                return;
            }

            print("Enter a time for the bell (24-hour format, please): ");

            String time = scanner.nextLine();

            String toWrite = name + ":" + time;

            boolean hasFoundNull = false;
            String currentString;

            while(hasFoundNull == false) {
                currentString = br.readLine();

                if(currentString == null) {
                    hasFoundNull = true;
                    bw.write(toWrite);
                }else{}
            }
        }
    }
}

public static void print(String args) {
    System.out.println(args);
}
} 
```

这是输出：输入铃声的名称：Durp

这是文件内容：实际上，文件是空的。它出于某种原因擦掉了它。这是它最初的内容：Durp:21:00

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T10:04:44.143

`FileWriter`也有构造函数`FileWriter(String, boolean)`，其中布尔标志表示“附加”。如果您不指定它，它将为 false，并且在写入之前清除文件。

所以，更换

```
fr = new FileWriter("normbells.txt"); 
```

和

```
fr = new FileWriter("normbells.txt", true); 
```

也许它会起作用。

# python - 如何在 GtkTextView 中插入 UTF8 文字？

> ID：10188807
> 
> 赞同：2
> 
> 时间：2012-04-17T09:42:46.883
> 
> 标签：python, c, utf-8, gtk

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T09:47:40.417

You need to UTF-8 encode it, since GTK+'s encoding is UTF-8.

Thus:

```
const char bullet_utf8[] = "\xe2\x80\xa2";
gtk_text_buffer_insert_at_cursor(textBuffer, bullet_utf8, strlen(bullet_utf8)); 
```

You can see the UTF-8 encoding of this character [here, for instance](http://www.fileformat.info/info/unicode/char/2022/index.htm).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T03:25:43.637

> How can I translate u'\u2022' from Python to C?

If you are using c++ compiler to build it, and the compiler have spec c++0x or c++11 (you can specify with `g++ -std=c++0x`), you can write the code like following.

```
gtk_text_buffer_insert_at_cursor(textbuffer, u8"\u2022", -1); 
```

# c# - NHibernate 查询，使用 OfType 和子查询

> ID：10188810
> 
> 赞同：0
> 
> 时间：2012-04-17T09:43:10.900
> 
> 标签：c#, nhibernate

我正在尝试编写一个 NHibernate 查询来确定指定的记录是否与请求的来源相关。在这种情况下，指定的记录是客户，如果客户有任何来自指定来源的订单，则该客户是相关的。

我已经尝试过了，但以下查询失败并显示`QuerySyntaxException`.

```
bool IsRelevant = Session.Query<Order>().Where
(
    ThisOrder => ThisOrder.Customer.ID == ThisCustomer.ID
    &&
    ThisOrder.Items.OfType<SourceOrderItem>().Where
    (
        I => I.Source.ID == Source.ID
    ).Count() > 0
).Count() > 0; 
```

我认为问题的至少一部分是它`SourceOrderItem`的子类型，`OrderItem`并且订单可能包含不属于该类型的项目，因此查询需要额外的过滤以仅查看类型正确的项目。

例外：

```
Exception of type 'Antlr.Runtime.NoViableAltException' was thrown. [.Count[Domain.Order](.Where[Domain.Order](NHibernate.Linq.NhQueryable`1[Domain.Order], Quote((R, ) => (AndAlso(Equal(R.Customer.ID, p1), GreaterThan(.Count[Domain.SourceOrderItem](.Where[Domain.SourceOrderItem](.OfType[Domain.SourceOrderItem](R.Items, ), (I, ) => (Equal(I.Source.ID, p2)), ), ), p3)))), ), )] 
```

使用 Nhibernate 版本 3.1.0.4000

将 this 更改为使用`Any`而不是`Where().Count > 0`导致尝试运行查询的 SQL 异常

```
DECLARE @p0 int
DECLARE @p1 int
DECLARE @p2 int

SET @p0 = 1
SET @p1 = 1
SET @p2 = 1

select TOP (@p0) 
  request0_.ID as ID24_, 
  request0_.Date as Date24_, 
  request0_.Delivery as Delivery24_, 
  request0_.PO as PO24_, 
  request0_.Discount as Discount24_, 
  request0_.Notes as Notes24_, 
  request0_.PaymentType as PaymentT7_24_, 
  request0_.Transport as Transport24_, 
  request0_.Customer_id as Customer9_24_, 
  request0_.Site_id as Site10_24_, 
  request0_.CreatedBy_id as CreatedBy11_24_, 
  request0_1_.OrderNumber as OrderNum2_25_, 
  request0_2_.Revision as Revision26_, 
  request0_2_.ExpiryDate as ExpiryDate26_, 
  case 
    when request0_1_.Request_id is not null then 1 
    when request0_2_.Request_id is not null then 2 
    when request0_.ID is not null then 0 
  end as clazz_ 
from [Request] request0_ 
  left outer join [Order] request0_1_ on request0_.ID=request0_1_.Request_id 
  left outer join [Quote] request0_2_ on request0_.ID=request0_2_.Request_id 
where 
  request0_.Site_id=@p1 
  and 
  (exists 
    (select 
      items1_.ID 
     from 
       [RequestItem] items1_ 
     where request0_.ID=items1_.Request_id 
       and case 
         when items1_2_.ChargeableRequestItem_id is not null then 2 
         when items1_3_.ChargeableRequestItem_id is not null then 3 
         when items1_1_.RequestItem_id is not null then 1 
         when items1_4_.RequestItem_id is not null then 4 
         when items1_.ID is not null then 0 
       end=3 
       and items1_3_.Source_id=@p2)) 
```

这似乎从语句中丢失了很多，因为没有声明第二个 case 语句下面的表。

现在我已经通过自己编写 SQL 来解决这个问题。

```
bool IsRelevant = ((Int32)Session.CreateSQLQuery(
    "Select COUNT(*) as IsRelevant From Request\r\n" +
    "Where\r\n" +
    "   Request.Site_Id = :p0\r\n" +
    "   And Request.ID in \r\n" +
    "(\r\n" +
    "Select Request_ID From RequestItem Where ID in\r\n" +
    "   (   \r\n" +
    "   Select SourceOrderItem.ChargeableRequestItem_id\r\n" +
    "   From SourceOrderItem\r\n" +
    "   Where SourceOrderItem.Source_id = :p1\r\n" +
    "   )\r\n" +
    ")"
    ).SetParameter("p0", S.ID).SetParameter("p1", Source.ID).UniqueResult()) > 0; 
```

虽然我仍然更喜欢 NHibernate 解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T10:14:08.543

可以通过拆分 Nhibernate 查询来做到这一点，例如

```
var Items = Session.Query<SourceOrderItem>().Where(I=> I.Source.ID == Source.ID).ToList();
foreach(var Item in Items)
{
    IsRelevant = Session.Query<Order>().Any(R => R.Customer.ID == C.ID && R.Items.Any(I => I.ID == Item.ID));
    if (IsRelevant)
        break;
} 
```

# css - 使用 ScoutApp 主题化 Sencha 项目

> ID：10188815
> 
> 赞同：1
> 
> 时间：2012-04-17T09:43:23.887
> 
> 标签：css, extjs, sass, compass-sass, scout-sass

我第一次尝试使用 Scout/Compass GUI 对我的煎茶项目进行主题化，因为我不熟悉 ruby​​ 和命令行。
我已经安装了 Scout，然后我创建了一个新的 scss 文件形式，将其复制为默认文件并重命名它。
之后，我修改了 index.html 以包含新的 css 文件。
还有一个任务要完成：编译我的主题

请看下图： ![在此处输入图像描述](../Images/85b340af191218644bb88a0c84e08c4c.png)

运行后我得到以下日志： ![在此处输入图像描述](../Images/bb8998ba2cc8a495aa142efed26004fd.png)

我没有认识到错误。
请帮助我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T10:19:59.747

**输入文件夹**是**C:\wamp\www\sencha-touch-2.0.0-gpl\resources\sass**

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-18T23:56:43.567

它不能与 Sencha Touch 或 Ext JS 一起使用。这两个项目都需要额外的框架 SASS 文件，该`config.rb`文件包含在每个项目的文件中。据我所知，Scout 创建了自己的`config.rb`文件，然后使用它来编译您的项目。因为您不能在生成的文件中包含框架 SASS 文件，所以您不能使用 Scout。

# silverlight - 如何使 ContentControl 水平拉伸

> ID：10188822
> 
> 赞同：2
> 
> 时间：2012-04-17T09:43:48.943
> 
> 标签：silverlight, layout

我已将 Horizo​​ntalAlignment 属性设置为拉伸，但它没有帮助。

**我需要那个内容控件，因为在我的真实代码中，DataGrid 是通过棱镜注入到内容控件中的。**

XAML：

```
<ContentControl HorizontalAlignment="Stretch">
    <Grid>
        <Controls:DataGrid ItemsSource="{Binding Persons}"></Controls:DataGrid>
    </Grid>
</ContentControl> 
```

后面的代码：

```
 public partial class MainPage : UserControl
{
    public List<Person> Persons { get; set; }

    public MainPage()
    {
        Persons = new List<Person>();
        Persons.Add(new Person { Name = "A",Age = 5});
        Persons.Add(new Person { Name = "A", Age = 5 });
        Persons.Add(new Person { Name = "A", Age = 5 });

        InitializeComponent();
        DataContext = this;
    }
}

public class Person
{
    public string Name { get; set; }
    public int Age { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-17T09:46:17.210

您是否尝试将`HorizontalContentAlignment`属性设置为`Stretch`

# php - 我的 LAMP 服务器上暂时没有读取特定的 PHP 脚本，而其他的工作正常

> ID：10188826
> 
> 赞同：1
> 
> 时间：2012-04-17T09:44:13.870
> 
> 标签：php, apache

我有一个非常奇怪的问题。我正在使用在 Ubuntu 上运行的标准 LAMP 服务器。服务器托管了许多不同的 PHP 脚本。时不时地，一个特定的 PHP 脚本没有被读取（即，当我在浏览器中输入它的地址时，什么也没有发生）。大约 10 分钟后，脚本被读取，一切看起来都很正常。

***奇怪***的是，当我第一次遇到这个问题时，我将脚本更改为：

```
die('The file is read'); 
```

即便如此，脚本也没​​有被处理——似乎 Apache（或其他东西）拒绝加载它。发生这种情况时，我可以毫无问题地访问所有其他脚本（因此这不是我的服务器或其他什么停机时间）。正如我之前提到的，一段时间后（*大约 10 分钟*）我可以很好地进入脚本（*直到下一次发生*）。

可能是 Apache 出于某种原因阻止了特定脚本（*可能是某种频率上限？*）。`die`一个简单的脚本（其中只有一个调用）可能无法响应，而所有其他脚本都可以正常工作，是否还有另一个原因？

我已经处理这种情况一段时间了，问了很多其他人，但仍然没有找到答案或解决方案。

任何和所有的帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T13:38:57.263

如果 Apache 做了一些有趣的事情，它通常至少会登录到 error_log 中。您可能必须增加常规日志记录（使用[LogLevel](http://httpd.apache.org/docs/current/mod/core.html#loglevel)）才能显示它。

# jquery - 这个 jQuery $.getJSON YQL 请求有什么问题？

> ID：10188831
> 
> 赞同：0
> 
> 时间：2012-04-17T09:44:19.830
> 
> 标签：jquery, json, yql

我想通过 YQL 请求 JSON 数据..

这个 url 代表我想要显示的 json 对象：

```
http://localhost:8387/nscalemc/rest/mon/resourcestatus.json 
```

所以我将网址更改为：

```
var yqlUrl = "http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20html%20where%20url%3D%27http%3A%2F%2Flocalhost%3A8387%2Fnscalemc%2Frest%2Fmon%2Fresourcestatus.json%27%0A&format=json&callback=?" 
```

最后是 getJSON() 调用：

```
$.getJSON(yqlUrl, function(data) {alert("data");}); 
```

请求返回空...

![在此处输入图像描述](../Images/f4efa24cd2328dbfb57cb056557d837c.png)

有什么办法可以解决这个问题吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T09:50:51.160

您的 YQL 查询似乎返回 0 个结果，因此实际上没有任何问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T09:51:00.550

网络无法访问*您的* `localhost`. 想一想：`localhost`指向 127.0.0.1，这是程序正在运行的机器的地址。对于您的浏览器，这是您的机器；在 Yahoo API 服务器的情况下，它是*他们的*机器。所以它不能工作。

# iphone - UIView上的两个UITapGestureRecognizer

> ID：10188834
> 
> 赞同：6
> 
> 时间：2012-04-17T09:44:26.273
> 
> 标签：iphone, objective-c, ios

我想添加到我的`UIViewController`：

```
UITapGestureRecognizer *tapGesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTapGesture:)];
tapGesture.numberOfTapsRequired = 2;
[self.view addGestureRecognizer:tapGesture];
[tapGesture release];

UITapGestureRecognizer *tapGesture2 = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTapGesture2:)];
tapGesture2.numberOfTapsRequired = 1;
[self.view addGestureRecognizer:tapGesture2];
[tapGesture2 release]; 
```

问题是如果用户点击两次调用这两种方法，我希望如果用户双击只有第一个（handleTapGesture）会被调用，如果他点击一次它只会调用第二个（handleTapGesture2）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-17T09:55:10.747

用这个..

```
UITapGestureRecognizer *tapGesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTapGesture)];
tapGesture.numberOfTapsRequired = 2;
[self.view addGestureRecognizer:tapGesture];
[tapGesture release];

UITapGestureRecognizer *tapGesture2 = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTapGesture2)];
tapGesture2.numberOfTapsRequired = 1;

[tapGesture2 requireGestureRecognizerToFail: tapGesture];

[self.view addGestureRecognizer:tapGesture2];
[tapGesture2 release]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T09:53:54.467

您可以使用我在[此处](https://github.com/AalokParikh/pinch-and-uiguesture)`requireGestureRecognizerToFail:`发布的代码在此使用 的方法`viewcontroller.m`将解决您的问题

# java - 正则表达式变音符号

> ID：10188835
> 
> 赞同：5
> 
> 时间：2012-04-17T09:44:29.173
> 
> 标签：java, regex

我有以下正则表达式：

```
String regExpression = "^[a-zA-Z0-9+,. '-]{1,"+maxCharacters+"}$"; 
```

这对我来说很好，除了它不允许任何 UTF-8 变音符号（Ă ă Â â Î î Ș ș Ț ț）。

除了它已经做的之外，我只需要我当前的正则表达式来接受其中的变音符号。

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-17T09:54:26.720

您需要查看[POSIX 字符类](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)来捕捉它们。可悲的是，Java Regex 不支持特定于语言的 POSIX 类，但可能适合`\p{Graph} A visible character: [\p{Alnum}\p{Punct}]`或 `\p{Print} A printable character: [\p{Graph}\x20]`将适合。

索林建议的最合适的可能是`\p{L}`（信）。

```
import java.util.regex.Pattern;

public class Regexer {

    public static void main(String[] args) {
        int maxCharacters = 100;
        String data = "Ă ă Â â Î î Ș ș Ț ț";
        String pattern = "^[\\p{L}0-9+,. '-]{1," + maxCharacters + "}$";

        Pattern p = Pattern.compile(pattern);

        if (p.matcher(data).matches()) {
            System.out.println("Hit");
        } else {
            System.out.println("No");
        }

    }
} 
```

这对我有用。

# c# - SelectionIndexChanged 触发两次

> ID：10188836
> 
> 赞同：1
> 
> 时间：2012-04-17T09:44:29.247
> 
> 标签：c#, windows-phone-7, binding, listbox

我想知道为什么当我单击列表中的某个项目时，我的选择索引更改会触发两次。

这是我在 selectionindexchanged 中使用的代码

```
 private void listBoxFolders_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        // Taking the name of the folder to pass in the parameters
        if ((Folder)listBoxFolders.SelectedItem != null)
        {
            folderTmp = (Folder)listBoxFolders.SelectedItem;
        }

        // Connection to the webservice to get the subfolders and also the files
        WebClient wc = new WebClient();
        wc.DownloadStringCompleted += new DownloadStringCompletedEventHandler(wc_DownloadStringCompleted2);
        wc.DownloadStringAsync(new Uri("http://clients.uicentric.net/IISHostedCalcService/FilesService.svc/GetFoldersAndFiles?selectedFolder=" + folderTmp.Name));
    } 
```

这是在其中触发两次的方法：

```
 public void wc_DownloadStringCompleted2(object sender, DownloadStringCompletedEventArgs e)
    {
        if (e.Error == null)
        {
            XDocument xdoc = XDocument.Parse(e.Result, LoadOptions.None);
            XNamespace aNamespace = XNamespace.Get("http://schemas.datacontract.org/2004/07/System.IO");

            try
            {

                // Retrieving the subfolders
                var folders = from query in xdoc.Descendants(aNamespace.GetName("DirectoryInfo"))
                              select new Folder
                              {
                                  Name = (string)query.Element("OriginalPath"),
                              };

                _lFolders = new ObservableCollection<Folder>();

                foreach (Folder f in folders)
                {
                    LFolders.Add(f);
                }

                listBoxFolders.ItemsSource = LFolders;
                listBoxFolders.DisplayMemberPath = "Name";

                // Retrieving the files
                var files = from query in xdoc.Descendants(aNamespace.GetName("FileInfo"))
                            select new File
                         {
                             Name = (string)query.Element("OriginalPath"),
                         };

                _lFiles = new ObservableCollection<File>();

                foreach (File f in files)
                {

                    LFiles.Add(f);
                }

                listBoxFiles.ItemsSource = LFiles;
                listBoxFiles.DisplayMemberPath = "Name";
                listBoxFiles.SelectionChanged += new SelectionChangedEventHandler(listBoxFiles_SelectionChanged);

            }
            catch { }

        }

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T09:59:26.230

您正在根据选择更改事件重新加载列表框的项目源。由于重新加载操作，索引被更改为其默认值，即 -1 。这可能一定是你的问题。而不是使用选择更改事件去 Tap 事件。

# slf4j - 使用 SLF4J 在所有日志行上打印日期

> ID：10188839
> 
> 赞同：3
> 
> 时间：2012-04-17T09:44:38.287
> 
> 标签：slf4j

在我的项目中，日期显示在某些行上，但我希望日期显示在所有行上，任何人都可以帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T13:34:57.823

SLF4J 是 API。您需要配置用于执行此操作的日志记录后端。典型的例子是 log4j 或 logback。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T19:27:15.923

Slf4j 是 API。您需要使用日志记录框架。这就是使用 slf4j-log4j.jar 的方法

在您的 log4j.properties 中，使用类似这样的配置。

```
log4j.logger.com.myapp=INFO, stdout
log4j.additivity.com.myapp=false

log4j.appender.stdout=org.apache.log4j.ConsoleAppender  
log4j.appender.stdout.Threshold=INFO  
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout  
log4j.appender.stdout.layout.ConversionPattern=%d{ABSOLUTE} [%t] %5p %c{1}:%L - %m%n 
```

这里假设您的应用程序类位于 com.myapp.* 中，并且日志记录输出被定向到标准输出。

***%d*** appender 对应于日期。

您可以查看[log4j 模式布局文档中使用的其他附加程序的含义](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/PatternLayout.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-06T12:08:03.827

如果您使用 log4j 作为后端登录。[像这样](http://www.mkyong.com/logging/log4j-log4j-properties-examples/)配置 log4j.properties 文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-19T11:05:56.857

正如大家所说，SL4J 是一个 API，因此您需要**指定实现**来帮助您。所以如果你选择 logback 作为实现，你可以简单地改变你的**logback.xml**如下：

在您的文件中找到`<pattern>`并添加 %d{yyyy-MM-dd} 以求其值。所以如果你有：

```
 <pattern>%-5level - %msg%n</pattern> 
```

你会用这个改变它：

```
 <pattern>%d{yyyy-MM-dd} %-5level - %msg%n</pattern> 
```

您可以使用 HH,mm 和 ss 添加时间：*%d{yyyy-MM-dd HH:mm:ss}*

# jquery - jQuery 动画在 Windows 上的 Safari 中不流畅

> ID：10188843
> 
> 赞同：0
> 
> 时间：2012-04-17T09:44:49.887
> 
> 标签：jquery, windows-7, safari, jquery-animate

我有一个 jQuery 动画，可以在除 Safari 之外的所有浏览器中流畅呈现（仅在 Windows 7 上测试）。

重要的是它将支持 Safari。任何人都知道为什么会这样？

顺便说一句，这不是我第一次遇到这个问题。

这是我正在使用的代码：

```
setInterval(function() {
  nextObstacle = createObstacle();
  animateLoops(nextObstacle,direction);
  direction = (direction == '+=3') ? ('-=8') : ('+=3');
}, 2000);

function animateLoops(o,direction) {
  o.animate ({
    'top': '+=1',
    'left': direction,
    'height': '+=5',
    'width': '+=5'
  }, 100, 'linear', function() {
    if (o.outerWidth()<200)   // keep moving
      animateLoops(o,direction);         
    else {  // check success
      o.fadeOut();
    }
  });
}

<style>
#game-div {
  width:590px;
  height:700px;
  background: url(images/background-1604.png);
  position:relative;
  /* cursor: url(images/plane-1604.png), auto;*/
}

.loop {
  position:absolute;
  top:230px;
  left:270px;
  width: 30px;
  height:30px;
}
</style> 
```

你可以在这里看到它：[http ://www.israelinsidethemovie.com/plane-game/](http://www.israelinsidethemovie.com/plane-game/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T10:56:23.507

我已经在 Windows XP 上的 Safari 5.1.4 和 5.1.1 上测试了您的页面，并且可以确认与其他浏览器相比，它在 Safari 中的流畅度要低得多。

我使用 jquery 灯箱，与其他浏览器相比，它们在 Windows Safari 中也很生涩。

我已经使用了 colorbox 和 fancybox，它们在 Safari 中都很生涩。

所以我的结论 - Windows Safari 在 jquery 中存在动画问题。抱歉没有解决方案。

希望在 Mac 上的 safari 中一切正常（根据 Tats_innit 评论）——这比 Windows 更重要

# wix - 如何检查环境变量是否存在？

> ID：10188845
> 
> 赞同：11
> 
> 时间：2012-04-17T09:44:50.980
> 
> 标签：wix, environment-variables, conditional-compilation

/的[文档](http://wix.sourceforge.net/manual-wix2/preprocessor.htm)有点混乱。对于，它指出：`if``ifdef``<?if [expression] ?>`

> *   变量可用于检查是否存在
>     ...
> *   如果变量不存在，评估将失败并引发错误。

事实证明，如果你只是去：`<?if $(env.MY_VAR) ?>`并且`MY_VAR`没有定义，编译将失败。如何检查是否存在？

通常，这是使用 的地方`ifdef`，但这些在 Wix 中也很奇怪。他们不使用`$(var.Variable)`语法，而是使用`<?ifdef Variable?>`，这意味着无法以这种方式检查*环境变量。*

我需要做什么才能获得相当于普通 c 预处理器的功能：

```
#ifdef MY_ENVIRONMENT_VARIABLE 
```

在维克斯？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-17T10:44:48.097

在节中引用环境变量的正确方法`ifdef`是：

```
<?ifdef env.MY_VAR?>
  ...
<?endif?> 
```

这按预期工作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-10-28T11:30:21.363

```
<Condition Message="Missing Environment Variable Message Goes Here"><![CDATA[%envvargoeshere]]></Condition> 
```

将上述元素放在 wxs 文件的 Package 元素中。如果环境变量不存在，安装将在运行时（安装时）失败并显示一条好消息。

# c# - 是否可以在同一个 dll 中有子命名空间？

> ID：10188846
> 
> 赞同：0
> 
> 时间：2012-04-17T09:44:55.937
> 
> 标签：c#, dll, namespaces

我正在创建一个 dll 项目。在这个项目中，我有一个主命名空间，例如 myClasses。在这个项目中，我创建了一个新文件夹 myClasses2，因此我有了第二个命名空间 myClasses.myClasses2。当我创建 dll 时，我得到了 myClasses.dll。

在其他项目中，例如在 WPF 项目中，我添加了对此 dll 的引用，我可以执行“使用 myClasses”，但不能执行“使用 myClasses.myClasses2”，因此我无法使用第二组类.

有什么方法可以在一个 dll 中拥有两个命名空间？我想避免有两个单独的 dll，一个用于 myClasses，另一个用于 myClasses2。

EDIT1：谢谢大家。问题是这些课程不是公开的。添加新类时我使用默认值。当我将类设置为公共并再次生成时，我可以使用第二个命名空间。

谢谢。

# android - 权限拒绝：无法访问 SurfaceFlinger

> ID：10188847
> 
> 赞同：0
> 
> 时间：2012-04-17T09:44:57.017
> 
> 标签：android

我包括了许可：

```
<uses-permission android:name="android.permission.ACCESS_SURFACE_FLINGER"/> 
```

但它仍然给出了错误。

有人帮助我，如何访问`SurfaceFlinger`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T09:52:46.347

请张贴日志。还有你想达到什么目的？也许有一种更简单的方法可以做到这一点。

还有这个：

> 使用与手机资源库签名的相同系统密钥签名的应用程序只能访问表面抛掷器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T19:51:45.747

**SurfaceFlinger**只能由系统进程或在**shell** UID下运行的应用程序访问。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T09:51:03.137

**通过将ACCESS_SURFACE_FLINGER**添加到清单文件，允许应用程序使用 SurfaceFlinger 的低级功能。

# .net - 可用的 IP 地址呈现给用户

> ID：10188848
> 
> 赞同：0
> 
> 时间：2012-04-17T09:44:57.630
> 
> 标签：.net, networking, network-programming, usability

我正在编写一个服务器/客户端分布式工具。用户必须在某些时候输入网络地址。我想通过告诉我亲爱的用户来帮助他们确定当前的 IP 地址。

**[更新]**客户端和服务器在同一个网络中运行。（或者用户可以访问管理员）**[/更新]**

当我打电话时，`Dns.GetHostAddresses(Dns.GetHostName())`我得到了一堆完全正确但没有真正帮助的条目。*我可以通过哪种启发式方法选择最合适的条目来呈现给用户？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T09:59:41.017

如果我理解你的问题是正确的，你可以比较`IPAddress.AddressFamily`过滤`AddressFamily.InterNetwork`下

```
if (ip.AddressFamily == AddressFamily.InterNetwork) 
```

这是完整的代码

```
IPHostEntry host = Dns.GetHostEntry(Dns.GetHostName());
foreach (IPAddress ip in host.AddressList)
{
    if (ip.AddressFamily == AddressFamily.InterNetwork)
    {
        // Local ip address
    }
} 
```

`AddressFamily.InterNetwork`是针对 IPv4 地址的值。如果是 IPv6，您可以使用`AddressFamily.InterNetworkV6`. 如需完整列表，[请查看此链接](http://msdn.microsoft.com/en-us/library/system.net.sockets.addressfamily%28v=vs.100%29.aspx)。

# ruby-on-rails - 在 Rails 3.1 中选择标签

> ID：10188849
> 
> 赞同：1
> 
> 时间：2012-04-17T09:45:01.603
> 
> 标签：ruby-on-rails, select, ruby-on-rails-3.1

我对选择标签有一个大问题。在我看来，我有以下代码：

```
 <%= select 'lw', Logicalwarehouse.all %> 
```

在我的控制器中：

```
....
@logical_wh = Logicalwarehouse.find(params['lw'])
    @project.logicalwarehouses << @logical_wh
    respond_to do |format|
      if @project.update_attributes(params[:project])
        flash[:notice] = 'Project was successfully updated.'
        format.html { redirect_to(@project) }
        format.xml  { head :ok }
      else
        format.html { render :action => "edit" }
        format.xml  { render :xml => @project.errors, :status => :unprocessable_entity }
      end
    end
... 
```

或者，我想在我的视图中使用下拉菜单，让我在所有`Logicalwarehouse`对象之间进行选择，这些对象将返回`lw`变量内的选定对象，返回到控制器。我的视野有问题`select`。Rails 返回一个错误，它有错误数量的参数`(2 for 3)`，有什么建议吗？谢谢你们

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T09:54:37.813

我不知道具有您的逻辑仓库描述的属性的名称。我假设它是`name`：

```
<%= select "lw", "id", Logicalwarehouse.all.map{|lw| [ lw.name, lw.id ] } %> 
```

**UPD：** 所选`id`内容将通过 提供`params[:lw][:id]`。

# c# - C# XML REST API 响应 => 对象

> ID：10188850
> 
> 赞同：1
> 
> 时间：2012-04-17T09:45:05.440
> 
> 标签：c#, xml, xml-serialization

我正在查询一个返回 XML 响应的 API，所以我一直在研究[Controlling XML Serialization Using Attributes](http://msdn.microsoft.com/en-us/library/2baksw0z%28VS.80%29.aspx)。

API 响应如下所示： ![在此处输入图像描述](../Images/f83a92dd16180bad8404e255b8033c34.png) 我要做的是获取所有 CampaignDTO 元素 (0..*) 并将它们放在一个列表中。怎么可能做到这一点？由于最后的 Totalcount 元素，我一直遇到错误。

```
public class Campaign
    {
        #region CTor
        public Campaign()
        {
        }
        #endregion

        #region Properties

        [XmlElement(ElementName = "Id_campaign")]
        public string ID_Campaign { get; set; }
        [XmlElement(ElementName = "Campaignname")]
        public string ElementName { get; set; }
        [XmlElement(ElementName = "Websiteurl")]
        public string WebsiteUrl { get; set; }
        [XmlElement(ElementName = "Privacypolicyurl")]
        public string PrivacyPolicyUrl { get; set; }
        [XmlElement(ElementName = "Termsurl")]
        public string TermsUrl { get; set; }
        [XmlElement(ElementName = "Pricepageurl")]
        public string PricepageUrl { get; set; }
        [XmlElement(ElementName = "Maxcredit")]
        public Int32 MaxCredit { get; set; }
        [XmlElement(ElementName = "Fk_id_currency")]
        public string FK_ID_Currency { get; set; }
        [XmlElement(ElementName = "Maxscans")]
        public short MaxScans { get; set; }
        [XmlElement(ElementName = "Startdate")]
        public DateTime Startdate { get; set; }
        [XmlElement(ElementName = "Enddate")]
        public DateTime Enddate { get; set; }
        [XmlElement(ElementName = "Starthour")]
        public short Starthour { get; set; }
        [XmlElement(ElementName = "Endhour")]
        public short Endhour { get; set; }
        [XmlElement(ElementName = "Pmam")]
        public string PMAM { get; set; }
        [XmlElement(ElementName = "Language")]
        public string Language { get; set; }
        [XmlElement(ElementName = "Fk_id_merchantapp")]
        public string FK_ID_MerchantApp { get; set; }
        [XmlElement(ElementName = "Campaigntype")]
        public string CampaignType { get; set; }
        [XmlElement(ElementName = "Createtimestamp")]
        public DateTime CreateTimestamp { get; set; }
        [XmlElement(ElementName = "Lastupdate")]
        public DateTime LastUpdate { get; set; }
        [XmlElement(ElementName = "Lastupdateby")]
        public string LastUpdateBy { get; set; }
        [XmlElement(ElementName = "Status")]
        public short Status { get; set; }

        #endregion
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T13:57:04.973

必须正确定义xml对应的对象模型。基于上面的示例 xml，我想出了下面的模型

```
[XmlRoot("CampaignListXml")]
public class CampaignList
{
    [XmlElement]
    public Allcampaign Allcampaign;

    [XmlElement]
    public int TotalCount;
}

public class Allcampaign
{
    [XmlElement("CompaignDTO", typeof(Campaign))]
    public Campaign[] CampaignArray;
}

public class Campaign
{
    #region CTor
    public Campaign()
    {
    }
    #endregion

    #region Properties

    [XmlElement(ElementName = "Id_campaign")]
    public string ID_Campaign { get; set; }
    [XmlElement(ElementName = "Campaignname")]
    public string ElementName { get; set; }
    [XmlElement(ElementName = "Websiteurl")]
    public string WebsiteUrl { get; set; }
    [XmlElement(ElementName = "Privacypolicyurl")]
    public string PrivacyPolicyUrl { get; set; }
    [XmlElement(ElementName = "Termsurl")]
    public string TermsUrl { get; set; }
    [XmlElement(ElementName = "Pricepageurl")]
    public string PricepageUrl { get; set; }
    [XmlElement(ElementName = "Maxcredit")]
    public Int32 MaxCredit { get; set; }
    [XmlElement(ElementName = "Fk_id_currency")]
    public string FK_ID_Currency { get; set; }
    [XmlElement(ElementName = "Maxscans")]
    public short MaxScans { get; set; }
    [XmlElement(ElementName = "Startdate")]
    public DateTime Startdate { get; set; }
    [XmlElement(ElementName = "Enddate")]
    public DateTime Enddate { get; set; }
    [XmlElement(ElementName = "Starthour")]
    public short Starthour { get; set; }
    [XmlElement(ElementName = "Endhour")]
    public short Endhour { get; set; }
    [XmlElement(ElementName = "Pmam")]
    public string PMAM { get; set; }
    [XmlElement(ElementName = "Language")]
    public string Language { get; set; }
    [XmlElement(ElementName = "Fk_id_merchantapp")]
    public string FK_ID_MerchantApp { get; set; }
    [XmlElement(ElementName = "Campaigntype")]
    public string CampaignType { get; set; }
    [XmlElement(ElementName = "Createtimestamp")]
    public DateTime CreateTimestamp { get; set; }
    [XmlElement(ElementName = "Lastupdate")]
    public DateTime LastUpdate { get; set; }
    [XmlElement(ElementName = "Lastupdateby")]
    public string LastUpdateBy { get; set; }
    [XmlElement(ElementName = "Status")]
    public short Status { get; set; }

    #endregion
} 
```

现在您可以从 xml 构造对象，如下所示

```
using (StringReader reader = new StringReader(xml))
{
    XmlSerializer serializer = new XmlSerializer(typeof(CampaignList));
    CampaignList x1 = serializer.Deserialize(reader) as CampaignList;
    Compaign[] compaignArray = x1.Allcompaign.CompaignArray; //This will have all the compaign list
} 
```

希望这可以帮助。

# mapreduce - Hbase Map/reduce-如何访问表的各个列？

> ID：10188854
> 
> 赞同：0
> 
> 时间：2012-04-17T09:45:27.787
> 
> 标签：mapreduce, hbase

我有一个名为 User 的表，它有两列，一列称为`visitorId`，另一列称为`friend`字符串列表。我想检查是否`VisitorId`在好友列表中。谁能指导我如何访问地图函数中的表格列？我无法想象数据是如何从 hbase 中的 map 函数输出的。我的代码如下：

```
ublic class MapReduce {

static class Mapper1 extends TableMapper<ImmutableBytesWritable, Text> {

    private int numRecords = 0;
    private static final IntWritable one = new IntWritable(1);       
    private final IntWritable ONE = new IntWritable(1);
    private Text text = new Text();

    @Override
    public void map(ImmutableBytesWritable row, Result values, Context context) throws IOException {

        //What should i do here??
        ImmutableBytesWritable userKey = new ImmutableBytesWritable(row.get(), 0, Bytes.SIZEOF_INT);

        context.write(userkey,One);     
    }

            //context.write(text, ONE);
        } catch (InterruptedException e) {
            throw new IOException(e);
        }

    }
}

public static void main(String[] args) throws Exception {
    Configuration conf = HBaseConfiguration.create();
    Job job = new Job(conf, "CheckVisitor");
    job.setJarByClass(MapReduce.class);
    Scan scan = new Scan();
    Filter f = new RowFilter(CompareOp.EQUAL,new SubstringComparator("mId2"));
    scan.setFilter(f);
    scan.addFamily(Bytes.toBytes("visitor"));
    scan.addFamily(Bytes.toBytes("friend"));
    TableMapReduceUtil.initTableMapperJob("User", scan, Mapper1.class, ImmutableBytesWritable.class,Text.class, job);

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T18:35:24.160

所以**结果值**实例将包含来自扫描仪的整行。要从结果中获取适当的列，我会执行以下操作：-

VisitorIdVal = value.getColumnLatest(Bytes.toBytes(columnFamily1), Bytes.toBytes("VisitorId"))

friendlistVal = value.getColumnLatest(Bytes.toBytes(columnFamily2), Bytes.toBytes("friendlist"))

这里的 VisitorIdVal 和friendlistVal 的类型是*keyValue* [http://archive.cloudera.com/cdh/3/hbase/apidocs/org/apache/hadoop/hbase/KeyValue.html](http://archive.cloudera.com/cdh/3/hbase/apidocs/org/apache/hadoop/hbase/KeyValue.html)，要获取它们的值，你可以做一个*字节。 toString(VisitorIdVal.getValue())* 从列中提取值后，您可以在“friendlist”中检查“VisitorId”

# android - Coverflow：如何在 XML 中指定小部件以及如何进行无限循环？

> ID：10188857
> 
> 赞同：0
> 
> 时间：2012-04-17T09:45:36.320
> 
> 标签：android, xml, loops, gallery, coverflow

Coverflow 是图库小部件。基于这个 url > [http://www.inter-fuser.com/2010/02/android-coverflow-widget-v2.html](http://www.inter-fuser.com/2010/02/android-coverflow-widget-v2.html) 我为我的项目实现了coverflow作为主菜单UI，但我遇到了问题。问题是我真的不知道如何在 XML 中指定 CoverFlow。因为我想在该活动上添加图像和文本视图。有人有什么主意吗？所有的工作都是在代码上完成的，而我希望它像往常一样分离为 XML。

而且，有没有人知道如何在coverflow上进行无限循环？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T10:16:44.370

这真的很简单。在您的 XML 文件中提供这样的小部件，

```
<com.example.coverflow.CoverFlow
    android:id="@+id/coverflow"
   android:layout_width="fill_parent"
   android:layout_height="wrap_content"
/> 
```

请注意，**com.example.coverFlow**是指项目的包名称，**CoverFlow**是指用于 Coverflow 的自定义类。

现在在您的 onCreate() 中，您可以像这样初始化 CoverFlow，

```
CoverFlow coverFlow = new CoverFlow(this); 
```

而不是这个，用下面的行替换它，

```
CoverFlow  coverFlow =  (CoverFlow) findViewById(R.id.coverflow); 
```

# regex - 正则表达式提取方括号之间的文本

> ID：10188858
> 
> 赞同：-1
> 
> 时间：2012-04-17T09:45:37.903
> 
> 标签：regex

我想从方括号之间提取文本，我正在使用`[(.*?)]`，但它不能完全工作。

> 4 月 17 日 13:01:34 10.11.26.83 2012-04-17 00:30:52.222 -0700 ABCD XYZ ALER SOME_TEXT 99.99.182.1 49923 99.99.83.74 80 阻止策略全局拒绝无 [ **type="SOME TEXT" pattern=" some-random-pattern" token="/function()"** ] GET 99.99.83.74/index.html/function() HTTP "-" "Wget/1.12 (linux-gnu)" 99.99.182.1 49923 "-" "- "

我想提取**粗体**文本。执行此操作的正则表达式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T10:39:13.480

@rprakash：

**模式的解剖**

```
<!--
\[(.*?)\]

Match the character “[” literally «\[»  
Match the regular expression below and capture its match into backreference number 1 «(.*?)»  
   Match any single character that is not a line break character «.*?»  
      Between zero and unlimited times, as few times as possible, expanding as needed (lazy) «*?»  
Match the character “]” literally «\]»  
--> 
```

在使用**REGEX时，使用****否定字符类**而不是**点**运算符总是安全的。

它可能`\[[^\]]+\]`就像波西米亚人所说的那样，或者使用起来可能更安全`\[(?#if grouping required)([^\]\[]+)\]`。

为了在这个主题中建立更好的立足点，[请访问这里](http://www.regexbuddy.com/library.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T09:54:35.590

试试这个：

```
\[[^\]]+\] 
```

`[^\]]`是“除 ] 以外的任何字符”的字符类

# jquery - 同一页面中的更多小部件 (js)

> ID：10188860
> 
> 赞同：1
> 
> 时间：2012-04-17T09:45:42.217
> 
> 标签：jquery, ajax, widget

我创建了一个显示动态小部件的 js 库，它工作正常，但是当我想在同一页面上显示 2 个小部件时，问题就开始了。事实上，我只会显示第二个小部件，而我看不到第一个

第一个小部件

```
<script type="text/javascript">
wgppn_cat = 2;
wgppn_lines = 4;
wgppn_width = '400px';
wgppn_bgcolor = '#00C000';
</script>
<script src="wgppn.js" type="text/javascript"></script> 
```

第二个小部件

```
<script type="text/javascript">
wgppn_cat = 5;
wgppn_lines = 4;
wgppn_width = '400px';
wgppn_bgcolor = '#FF0000';
</script>
<script src="wgppn.js" type="text/javascript"></script> 
```

这是我的 js 库 wgppn.js

```
 var wgppn_lines; 
    var wgppn_width; 
    var wgppn_bgcolor;
    var wgppn_cat;

    wgppn_width = typeof wgppn_width == 'string' ? wgppn_width : '300px';
          wgppn_lines = typeof wgppn_lines == 'number' ? wgppn_lines : 3;
    wgppn_bgcolor = typeof wgppn_bgcolor == 'string' ? wgppn_bgcolor : '#003366';
    wgppn_cat = typeof wgppn_cat == 'number' ? wgppn_cat : 0;

    var script_tag = document.createElement('link');
          script_tag.setAttribute("type","text/css");
          script_tag.setAttribute("rel","stylesheet");
          script_tag.setAttribute("href","style.css");
          (document.getElementsByTagName("head")[0] || document.documentElement).appendChild(script_tag);

    var script_tag1 = document.createElement('script');
    script_tag1.setAttribute("type","text/javascript");
    script_tag1.setAttribute("src","jquery-latest.pack.js");    
    (document.getElementsByTagName("head")[0] || document.documentElement).appendChild(script_tag1);

    var script_tag3 = document.createElement('div');
    script_tag3.setAttribute("id",'box');   
    (document.getElementsByTagName("body")[0] || document.documentElement).appendChild(script_tag3);

    var myRequest = CreateXmlHttpReq(myHandler);
    var url = window.location.href;
    myRequest.open("GET",url,true);
    myRequest.send(null);

    function CreateXmlHttpReq(handler) {
                var xmlhttp = null;
                try {
                     xmlhttp = new XMLHttpRequest();
                    }
                catch(e) {
                             try {
                                    xmlhttp = new ActiveXObject("Msxml2.XMLHTTP");
                                 } 
                            catch(e) {
                                    xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
                                     }
                                 }
              xmlhttp.onreadystatechange = handler;
              return xmlhttp;
    }

    function myHandler() {
        if (myRequest.readyState == 1) {
            var wHTML = ""; 
           wHTML += ('<div style="text-align:center;margin-top:180px;">');          
           wHTML += ('<img src="loader.gif" border="0" width="66" height="66"/>');
           wHTML += ('</div>');
           document.getElementById('box').innerHTML = wHTML;
        }       
        if (myRequest.readyState == 4 && myRequest.status == 200) {
        loadcontent(wgppn_lines,wgppn_width,wgppn_bgcolor,wgppn_cat);

        }
    }

function loadcontent(wgppn_lines,wgppn_width,wgppn_bgcolor,wgppn_cat) {

    $(document).ready(function($) {

         var url = "data.asp?ln=" + wgppn_lines + "&cat=" + wgppn_cat
                    $.ajax({     
                            url: url,     
                            dataType: 'json', 
                            scriptCharset: 'utf-8' , 
                            contentType: 'application/x-www-form-urlencoded',
                            success: processJSON
                    });

            $('#box').css("width",wgppn_width);            

            });

    }

    function processJSON(result) { 

            var wHTML = ""; 
            wHTML += ('<div class="titolo_box" style="background-color:' + wgppn_bgcolor + '"></div>');
            wHTML += ('<ul>');  
            jQuery.each(result.news, function(i,val){

                wHTML += ('<li>');  
                wHTML += ('<div class="titolo_triplo">');
                wHTML += ('<img class="img3" src="' + val.pic + '" border="0" width="40" height="40"/>');
                wHTML += ('<a href="' + val.url + '" target="_blank" title="' + val.title + '">' + val.title + '</a>');           
                wHTML += ('</div>');    
                wHTML += ('<div class="strillo_triplo">');
                wHTML += ('<a href="' + val.url + '" target="_blank"  title="' + val.title + '">' + val.strillo + '</a>');            
                wHTML += ('</div>');                                      
                wHTML += ('</li>'); 
            }); 
            wHTML += ('</ul>');
            document.getElementById('box').innerHTML = wHTML;
    } 
```

# c++ - #pragma AVRT_CODE_BEGIN - 这是什么意思？

> ID：10188865
> 
> 赞同：3
> 
> 时间：2012-04-17T09:45:59.540
> 
> 标签：c++, visual-studio, visual-c++

我维护了一些代码，例如：

```
#pragma AVRT_CODE_BEGIN   
//some code
#pragma AVRT_CODE_END 
```

我无法理解它们，
我用谷歌搜索了它，但除了代码示例外一无所获：[点击我](http://read.pudn.com/downloads95/sourcecode/zip/388072/wmvv9_dec/slimc/sp2/scrunch/wmv2/decoder_c9/c/msmton.c__.htm)
你知道 AVRT_CODE_BEGIN 和 AVRT_CODE_END 是什么意思吗？
请告诉我。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-11T02:31:31.620

有编译器指令可以将代码发送到特定的链接器段，而不是默认的链接器段，用于使用 AVRT 库进行音频处理。它似乎是 Microsoft 的内部功能。这些段的存在可能是为了优化或安全。我发现这个头文件显示了含义：

[ftp://ns432777.ip-37-59-27.eu/Program%20Files%20%28x86%29/Windows%20Kits/8.0/Include/um/baseaudioprocessingobject.h](ftp://ns432777.ip-37-59-27.eu/Program%20Files%20%28x86%29/Windows%20Kits/8.0/Include/um/baseaudioprocessingobject.h)

```
// These are copied out of the old AvRt.h file.
#define AVRT_CODE_BEGIN   code_seg( push, "RT_CODE" )
#define AVRT_DATA_BEGIN   data_seg( push, "RT_DATA" )
#define AVRT_BSS_BEGIN    bss_seg( push, "RT_BSS" )
#define AVRT_CONST_BEGIN  const_seg( push, "RT_CONST" )
#define AVRT_VTABLES_BEGIN AVRT_CONST_BEGIN
#define AVRT_CODE_END   code_seg( pop )
#define AVRT_DATA_END   data_seg( pop )
#define AVRT_BSS_END    bss_seg( pop )
#define AVRT_CONST_END  const_seg( pop )
#define AVRT_VTABLES_END AVRT_CONST_END
#define AVRT_DATA __declspec(allocate("RT_DATA"))
#define AVRT_BSS __declspec(allocate("RT_BSS"))
#define AVRT_CONST __declspec(allocate("RT_CONST")) 
```

# java - 如何使用 ClassLoader 加载 txt 文件？

> ID：10188866
> 
> 赞同：1
> 
> 时间：2012-04-17T09:46:06.150
> 
> 标签：java, resources, classloader

我有以下代码：

```
 public class App {
   public static void main(String[] args) {
     System.out.println(App.class.getClassLoader().getResource("test.properties"));
     System.out.println(App.class.getClassLoader().getResource("test.txt"));
     System.out.println(App.class.getClassLoader().getResourceAsStream("test.properties"));
     System.out.println(App.class.getClassLoader().getResourceAsStream("test.txt"));
     System.out.println(App.class.getResourceAsStream("test.properties"));
     System.out.println(App.class.getResourceAsStream("test.txt"));
   }
 } 
```

此代码提供以下输出：

```
file:/C:/../test.properties 
null 
java.io.BufferedInputStream@18e2b22 
null 
java.io.BufferedInputStream@1cb1c5fa 
null 
```

为什么 ClassLoader 拒绝加载 .txt 文件？

更新：

**我确定我的两个文件都在类路径中。类路径设置为 /src 并且两个文件都在此目录中。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T09:49:34.543

很可能您的 txt 文件不在类路径中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T09:54:24.170

您需要确保您想要加载的任何文件`ClassLoader`都包含在您的`classpath`. 通常，像这样的资源存储在`/src/main/resources`其中，然后包含在类路径中。

如果您使用的是 Eclipse，您可以在资源管理器中右键单击项目，然后在其中`Properties -> Java Build Path -> Source (Tab) -> Add Folder... (Button)`添加文件夹结构。

# sql-server-2008 - 用于重建索引的 SQL 脚本 - 关键字“组”附近的语法不正确

> ID：10188871
> 
> 赞同：0
> 
> 时间：2012-04-17T09:46:41.133
> 
> 标签：sql-server-2008

我有一个相当基本的 SQL 脚本来重建数据库中各种模式下的所有表索引。该脚本似乎适用于我拥有的 183 个索引，但返回错误消息

```
(183 row(s) affected)
Msg 156, Level 15, State 1, Line 1
Incorrect syntax near the keyword 'Group' 
```

谁能解释原因并提供解决方案？

```
USE RedGateMonitor;
GO
declare @db varchar(150)

declare @tmp TABLE(recnum int IDENTITY (1,1), tableschema varchar(150), tablename varchar(150))
insert @tmp (tableschema, tablename)
SELECT TABLE_SCHEMA, TABLE_NAME FROM information_schema.tables where TABLE_TYPE = 'BASE TABLE'
ORDER By TABLE_SCHEMA
declare @X int, @table varchar(150), @cmd varchar(500), @schema varchar(150)
set @X = 1

While @X <= (select count(*) from @tmp) BEGIN
set @db = 'RedGateMonitor'
set @table = (select tablename from @tmp where recnum = @X)
set @schema = (select tableschema from @tmp where recnum = @X)

set @cmd = 'ALTER INDEX ALL ON ' + @db + '.' + @schema + '.' + @table +  ' REBUILD'
EXECUTE(@cmd)

set @X = @X + 1

END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T11:39:12.710

我同意米奇的两个评论：

(1) 您应该为此使用现有的解决方案，而不是重新发明轮子。

(2) 如果您不打算遵循标识符的基本规则（例如，不使用保留字命名模式或表），则需要正确转义它们。一个快速的解决方法是：

```
set @cmd = 'ALTER INDEX ALL ON ' + quotename(@db) 
  + '.' + quotename(@schema) 
  + '.' + Quotename(@table) +  ' REBUILD;'; 
```

一个稍微好一点的修复方法如下，不需要#temp 表或循环：

```
DECLARE @sql NVARCHAR(MAX) = N'';

SELECT @sql += N'ALTER INDEX ALL ON ' + QUOTENAME(@db) 
  + '.' + QUOTENAME(SCHEMA_NAME([schema_id])
  + '.' + QUOTENAME(name) + ' REBUILD;';

EXEC sp_executesql; 
```

但我认为您不需要重建 Red Gate 数据库中所有表的所有索引。像 Ola 之类的脚本将帮助您更有效地确定哪些索引要重建、哪些要重新组织以及哪些要不理会。

# java - 如何在休眠中调用程序？

> ID：10188873
> 
> 赞同：2
> 
> 时间：2012-04-17T09:46:45.180
> 
> 标签：java, hibernate, stored-procedures, stack-overflow

我第一次尝试在休眠中调用过程，例如-

```
 Session session = HibernateUtil.getFirstFactory().getCurrentSession();
        session.beginTransaction();
        Query q = getSession().getNamedQuery("select");
        q.setInteger("locationid", locId);
        cDbInsts = (List<SpCustsitesettings>) q.list(); 
```

我的 hbm 文件 SpCustsitesettings.hbm.xml 是 -

```
<hibernate-mapping>
<class name="glb.chatmeter.db.SpCustsitesettings">
    <id name="cmcustLocId" type="int">
        <column name="CMCustLocID"/>
    </id>
    <property name="cpid" type="string">
        <column name="CPID">
        </column>
    </property>
</class>
<sql-query name="select" callable="true">
    <return alias="select" class="glb.chatmeter.db.SpCustsitesettings">
        <return-property name="cmcustLocId" column="CMCustLocID" />
        <return-property name="cpid" column="CPID" />
    </return>
    <query-param name="locationid" type="int" />
{call select(:locationid)}
</sql-query> 
```

我已经在配置文件中添加了这个 -

```
<mapping resource="xml/SpCustsitesettings.hbm.xml"/> 
```

但是当我去执行显示异常的查询时 -

```
java.lang.StackOverflowError
    at gnu.xml.pipeline.ValidationConsumer$ChildrenRecognizer.patchNext(ValidationConsumer.java:1570)
    at gnu.xml.pipeline.ValidationConsumer$ChildrenRecognizer.patchNext(ValidationConsumer.java:1591)
    at gnu.xml.pipeline.ValidationConsumer$ChildrenRecognizer.patchNext(ValidationConsumer.java:1580)
    at gnu.xml.pipeline.ValidationConsumer$ChildrenRecognizer.patchNext(ValidationConsumer.java:1580)
    at gnu.xml.pipeline.ValidationConsumer$ChildrenRecognizer.patchNext(ValidationConsumer.java:1591)
............................................................................. 
```

程序将关闭。这是我的程序-

```
 CREATE DEFINER=`root`@`%` PROCEDURE `select`(IN locationid INT)
BEGIN
    SELECT cmcustLocId, cpid FROM `custsitesettings` WHERE `CMCustLocID` = locationid;
END 
```

我没有关注的问题是什么，任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T10:09:38.523

问题在于您的映射文件`SpCustsitesettings.hbm.xml`。

改变

```
<hibernate-mapping>
.....

  <sql-query name="select" callable="true">
      <return alias="select" class="glb.chatmeter.db.SpCustsitesettings">
        <return-property name="cmcustLocId" column="CMCustLocID" />
         <return-property name="cpid" column="CPID" />
     </return>
     <query-param name="locationid" type="int" />
    {call select(:locationid)}
  </sql-query>
</hibernate-mapping> 
```

至

```
<sql-query name="select" callable="true">
    <return alias="select" class="glb.chatmeter.db.SpCustsitesettings">
        <return-property name="cmcustLocId" column="CMCustLocID" />
        <return-property name="cpid" column="CPID" />
    </return>
    <query-param name="locationid" type="int" />
    <![CDATA[CALL select(:locationid)]]>
</sql-query> 
```

# android-keypad - Android自定义键盘实现

> ID：10188875
> 
> 赞同：1
> 
> 时间：2012-04-17T09:46:50.517
> 
> 标签：android-keypad

我正在开发 Android 自定义键盘。我在执行此操作时导入`android.view.inputmethod.InputMethodSubtype`了我的代码，我收到一条错误消息，例如无法解决导入的错误消息。是否有任何我需要安装的 Eclipse 插件，据我所知，Android 版本 1.6 以上将支持 IMF。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-09-27T22:57:15.653

这个问题很老，但我正在回答它，因为它可能会帮助另一个看到这个问题的用户。

OP 询问是否有任何 Eclipse 插件可以安装以解决该问题，但现在我们有了 Android Studio。

对于那些想要实现[Android 自定义键盘](https://android.googlesource.com/platform/development/+/master/samples/SoftKeyboard)的人：首先，下载 Android 自定义键盘的谷歌示例项目开始。

有三个重要功能可以决定您想要哪一个：1) 主题（自定义布局）、2) 子类型和 3) 表情符号。

对于主题/布局：创建布局文件。请参见下面的示例代码：

```
<com.domain.keyboard.android.LatinKeyboardView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/keyboard"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:background="@drawable/kb_bg_9"
    android:keyBackground="@drawable/key_bg_fill_white"
    android:keyPreviewLayout="@layout/key_preview_layout"
    android:keyPreviewOffset="@dimen/keyPreviewOffset"
    android:keyTextColor="@color/white"
    android:popupLayout="@layout/keyboard_popup_layout" /> 
```

并在中使用以下代码`SoftKeyboard.java`：

```
@Override
public View onCreateInputView() {

    // Set custom theme to input view.
    int themeLayout = sharedPreferences.getInt(THEME_KEY, R.layout.input_1);
    mInputView = (LatinKeyboardView) getLayoutInflater().inflate(
            themeLayout, null);
    mInputView.setOnKeyboardActionListener(this);

    // Close popup keyboard when screen is touched, if it's showing
    mInputView.setOnTouchListener(new View.OnTouchListener() {
        @Override
        public boolean onTouch(View view, MotionEvent motionEvent) {
            if (motionEvent.getAction() == MotionEvent.ACTION_DOWN) {
                mInputView.closing();
            }
            return false;
        }
    });

    // Apply the selected keyboard to the input view.
    setLatinKeyboard(getSelectedSubtype());

    return mInputView;
} 
```

对于子类型：创建副本`qwerty.xml`并对其进行编辑以替换键。`LatinKeyboard`创建另一个in`SoftKeyboard.java`和 use `if`or `switch`logic的实例。

```
private LatinKeyboard getSelectedSubtype() {
    final InputMethodSubtype subtype = mInputMethodManager.getCurrentInputMethodSubtype();
    String s = subtype.getLocale();
    switch (s) {
        case "ps_AF":
            mActiveKeyboard = mPashtoKeyboard;
            mCurKeyboard = mPashtoKeyboard;
            break;
        case "fa_AF":
            mCurKeyboard = mFarsiKeyboard;
            break;
        default:
            mCurKeyboard = mQwertyKeyboard;
    }

    return mCurKeyboard;
} 
```

并编辑`methods.xml`以添加子类型：

```
<input-method xmlns:android="http://schemas.android.com/apk/res/android"
    android:settingsActivity="com.sunzala.afghankeyboard.android.ImePreferences"
    android:supportsSwitchingToNextInputMethod="true">
    <subtype
        android:imeSubtypeLocale="en_US"
        android:imeSubtypeMode="keyboard"
        android:label="@string/label_subtype_generic" />
    <subtype
        android:imeSubtypeLocale="ps_AF"
        android:imeSubtypeMode="keyboard"
        android:label="@string/label_subtype_generic" />
    <subtype
        android:imeSubtypeLocale="fa_AF"
        android:imeSubtypeMode="keyboard"
        android:label="@string/label_subtype_generic" />
</input-method> 
```

对于表情符号：查找库并将其与键盘集成。表情符号将通过按键显示。

```
if (primaryCode == -10000) {
    showEmoticons();
} 
```

`-10000`键码在哪里。

# asp.net-mvc - 在 ASP.NET MVC 3 的 post Action 中获取 Url

> ID：10188877
> 
> 赞同：0
> 
> 时间：2012-04-17T09:46:57.250
> 
> 标签：asp.net-mvc, asp.net-mvc-3, url, razor, http-post

当我提交表单时，我有 2 个索引操作发布和获取，发布操作返回：

```
return RedirectToAction("Index"); 
```

**编辑：**

我的get Index Action可以获取一些参数来支持搜索和过滤返回的List。像这样：

```
public ActionResult Index(string search = "", long searchItem = 0, long RC = 0, long Page = 1) 
```

我使用了分页列表，并且有一个`DropDownList`显示每页中的行数，我编写了一个 jquery 脚本来更改此下拉表单。提交时，当表单提交时，`RedirectTAction` 我丢失了以下代码：

```
[HttpPost]
public ActionResult Index(FormCollection collection, string search = "") {

    long RowCount = 0;
    long.TryParse(string.Format("{0}", collection["RowCount"]), out RowCount);

//More implement

return RedirectToAction("Index", new { RC = RowCount, search = search, searchItem = Id }); 
```

那么有没有办法在 Post Action 中获取 Url 或 url 参数？在这种情况下你有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T10:03:24.543

您可以在重定向之前捕获 RouteValueDictionary 中的所有查询字符串参数：

```
var query = new RouteValueDictionary(
    Request
        .QueryString
        .Keys
        .OfType<string>()
        .ToDictionary(key => key, key => (object)Request.QueryString[key])
);
return RedirectToAction("Index", query); 
```

这只会保留查询字符串参数。如果要添加路由值和 POST 值，可以将它们连接到结果中。

# jquery - jquery 插件中的 $(this).each(function() 返回 DOM[] 对象而不是 this 对象

> ID：10188882
> 
> 赞同：1
> 
> 时间：2012-04-17T09:47:18.550
> 
> 标签：jquery

这是我的插件的代码..

```
$.fn.slide = function(settings) {

return $(this).each(function() {
    setInterval(function() { $.slider(opt.direction , opt.slideSpeed,this) }
}

jQuery.slider = function(direction,slideSpeed,elm) {
        console.log(elm) - > shows DOMWindow[] window as object 
    }

}

script.js   
$('#container').slide({
    slideAnimationTimeInterval : 6000,
    slideSpeed : 700,

}); 
```

console.log(elm) - > 将 DOMWindow[] 窗口显示为对象，但我需要#container 对象，我怎样才能得到它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T09:48:45.943

嵌套函数时，您需要保存`this`在另一个变量中，如下所示：

```
return $(this).each(function() {
    var self = this;
    setInterval(function() { $.slider(opt.direction , opt.slideSpeed, self); }
} 
```

`this`是函数的上下文，默认是全局对象`window`。jQuery 在调用函数时将其设置为更有用的东西（例如 中的元素`.each()`）。但是，当您的区间函数被调用时，`this`将再次解除绑定 (=> `this === window`)。通过将其保存在自定义变量中，它会保存在函数的闭包中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T09:48:51.347

只需将其转换为 jQuery 对象：

```
var $elm = $( elm ); 
```

# url - Typo3：使用typoscript修改base-url

> ID：10188883
> 
> 赞同：0
> 
> 时间：2012-04-17T09:47:19.100
> 
> 标签：url, typo3, typoscript, subdirectory

我正在试用 TYPO3 的介绍包。为此，我在我的计算机上使用 Xampp。

我已经将它安装在一个子目录中，但由于它使用“real-url”，我需要修改生成的链接，而不是`http://localhost/about-typo3/`我得到`http://localhost/subfolder/about-typo3/`

我相信它必须通过“typo-script”完成，从我在互联网上阅读的内容来看，这条线应该可以完成这项工作：

```
config.baseURL = http://localhost/subfolder/ 
```

但我不知道我应该把它放在哪里。我尝试了不同的位置，但没有明显的效果。

所以我想知道的是：我是否走上了我需要做的事情的好道路，如果是，我现在应该尝试什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T06:48:45.053

这是 4.6 介绍包中的一个错误。4.7 将附带正确的版本，因此您可能只想继续尝试 4.7RC2（[预览版](https://typo3.org/download/#c2391)）的介绍包。

现在，只需`Template`在左侧的模块菜单中选择。然后使用下拉菜单选择`Constant Editor`。现在选择`HOME`中间页面树中的页面。现在使用第二个下拉菜单选择`CONFIG`。修改最上面的设置`Absolute URI prefix`。输入您的完整域，不带最后一个斜杠 (/)。这意味着从浏览器复制您当前的 URL 并剥离`/typo3/backend.php`. 现在使用顶部工具栏中的小保存图标进行保存。这也将使您的所有缓存无效（因为您更改了最顶层的模板）。无需安装额外的扩展或手动执行此操作。

或者，您可以修复实际的错误。转到模板模块并选择文件夹`TypoScript Templates / page_configuration`。现在选择`Info/Modify`而不是`Constant Editor`直接在表格上方`page.config`。单击左侧的铅笔`Setup`。找到线`absRefPrefix = {$config.absRefPrefix}/`。这应该在`62`(4.7RC2) 附近。从该行中删除最后一个斜杠 (/) 并保存。因为您不在最顶层的模板上，所以您需要清除缓存。在屏幕的右上角，您可以找到黄色的闪光灯图标。单击它并选择`Clear all caches`（红色闪烁）。现在再次访问您的网站。

关于`(config.)baseURL`. 这更像是一种 hack，因为它只是告诉浏览器表现得好像网站在另一个地方一样。正确的方法是首先创建正确的链接。你应该`(config.)absRefPrefix`改用。要使其在自动模式下工作，它必须完全为空 ( `config.absRefPrefix =`)。不要再使用`baseURL`了。下一个介绍包将没有此设置。

另一个注意事项：如果使用`config.absRefPrefix`，则必须**包含**最后一个斜杠 (/)。您不必在上面（在常量中）这样做的唯一原因是因为它在模板中是硬编码的，因此也阻止了自动检测工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T15:06:17.803

如果您使用不同的主机，您可以在根模板中使用打字条件：

```
# Default:
config.baseURL = http://www.example.com/

[globalString = ENV:HTTP_HOST=sub1.example.com]
config.baseURL = http://sub1.example.com/
[global]

[globalString = ENV:HTTP_HOST=sub2.example.com]
config.baseURL = http://sub2.example.com/
[global] 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-17T10:42:28.190

如果您使用的是介绍包。有用于设置基本 url 的常量

转到“模板”和“常量编辑器..您可以找到“基本 URL [config.domain] 的域名”.. 用于设置基本 URL

您也可以将 config.baseURL = [http://localhost/subfolder/](http://localhost/subfolder/) 放在“信息修改”设置字段上

希望能帮助你..对不起我的英语不好

# selection - 关系代数中选择条件内的函数

> ID：10188888
> 
> 赞同：0
> 
> 时间：2012-04-17T09:47:41.473
> 
> 标签：selection, conditional-statements, relational-algebra

是否可以在关系代数的选择条件中使用用户定义的函数？

**前任：**

可以`<selection condition>`是：距离（x1，x2，y2，y2）< r

in `σ<selection condition>(R)`，其中 distance 是一个操作属性值的函数：x1、x2、y1 和 y2。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T19:50:43.077

是的。

你也可以写“a = b + c”，对吧（提示：这在语义上与调用函数 plus(b,c) 相同）？那么如果允许调用 PLUS 函数，还有什么合理的理由可以排除其他一些（比如你的距离）？

好吧，包含非确定性函数（WHERE x = RANDOM()）有点荒谬，但即使在那里，也不清楚为什么必须将其删除......

从技术上讲，RA 中的选择条件（我的意思是 RESTRICT 运算符的选择条件“参数”）就像支持它的编程语言中的 lambda，而 lambda 实际上可以是任意函数。

在实现方面，有效地排除了某些类型的表达式，即具有副作用更新的表达式（如 ++ 增量等），但如果您只是在纸上编写代数表达式，则不必担心。

# java - hbase 连接被拒绝

> ID：10188889
> 
> 赞同：15
> 
> 时间：2012-04-17T09:47:42.873
> 
> 标签：java, linux, jakarta-ee, hadoop, hbase

我是*HBase*和*Hadoop*新手。我已经完全设置好 HBase 并完美启动。现在，当我尝试使用 Java 客户端从*p1*连接到 HBase（HBase 设置在*p2*上）时，它会抛出一个奇怪的异常。

```
12/04/17 14:36:37 INFO zookeeper.ZooKeeper: Initiating client connection, connectString=192.168.15.20:2181 sessionTimeout=180000 watcher=hconnection
12/04/17 14:36:38 INFO zookeeper.ClientCnxn: Opening socket connection to server /192.168.15.20:2181
12/04/17 14:36:38 WARN zookeeper.ClientCnxn: Session 0x0 for server null, unexpected error, closing socket connection and attempting reconnect
java.net.ConnectException: Connection refused
    at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
    at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:567)
    at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1119)
12/04/17 14:36:39 INFO zookeeper.ClientCnxn: Opening socket connection to server hbase.local/192.168.15.20:2181
12/04/17 14:36:39 WARN zookeeper.ClientCnxn: Session 0x0 for server null, unexpected error, closing socket connection and attempting reconnect
java.net.ConnectException: Connection refused
    at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
    at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:567)
    at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1119)
12/04/17 14:36:41 INFO zookeeper.ClientCnxn: Opening socket connection to server hbase.local/192.168.15.20:2181
12/04/17 14:36:41 WARN zookeeper.ClientCnxn: Session 0x0 for server null, unexpected error, closing socket connection and attempting reconnect
java.net.ConnectException: Connection refused
    at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
    at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:567)
    at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1119)
12/04/17 14:36:43 INFO zookeeper.ClientCnxn: Opening socket connection to server hbase.local/192.168.15.20:2181
12/04/17 14:36:43 WARN zookeeper.ClientCnxn: Session 0x0 for server null, unexpected error, closing socket connection and attempting reconnect
java.net.ConnectException: Connection refused
    at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
    at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:567)
    at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1119)
12/04/17 14:36:44 INFO zookeeper.ClientCnxn: Opening socket connection to server hbase.local/192.168.15.20:2181
12/04/17 14:36:44 WARN zookeeper.ClientCnxn: Session 0x0 for server null, unexpected error, closing socket connection and attempting reconnect
java.net.ConnectException: Connection refused
    at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
    at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:567)
    at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1119)
12/04/17 14:36:45 INFO zookeeper.ClientCnxn: Opening socket connection to server hbase.local/192.168.15.20:2181
12/04/17 14:36:45 WARN zookeeper.ClientCnxn: Session 0x0 for server null, unexpected error, closing socket connection and attempting reconnect
java.net.ConnectException: Connection refused
    at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
    at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:567)
    at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1119)
12/04/17 14:36:47 INFO zookeeper.ClientCnxn: Opening socket connection to server hbase.local/192.168.15.20:2181
12/04/17 14:36:47 WARN zookeeper.ClientCnxn: Session 0x0 for server null, unexpected error, closing socket connection and attempting reconnect
java.net.ConnectException: Connection refused
    at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
    at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:567)
    at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1119)
12/04/17 14:36:48 INFO zookeeper.ClientCnxn: Opening socket connection to server hbase.local/192.168.15.20:2181
12/04/17 14:36:48 WARN zookeeper.ClientCnxn: Session 0x0 for server null, unexpected error, closing socket connection and attempting reconnect
java.net.ConnectException: Connection refused
    at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
    at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:567)
    at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1119)
12/04/17 14:36:49 INFO zookeeper.ClientCnxn: Opening socket connection to server hbase.local/192.168.15.20:2181
12/04/17 14:36:49 INFO zookeeper.ZooKeeper: Session: 0x0 closed
org.apache.hadoop.hbase.ZooKeeperConnectionException: HBase is able to connect to ZooKeeper but the connection closes immediately. This could be a sign that the server has too many connections (30 is the default). Consider inspecting your ZK server logs for that error and then make sure you are reusing HBaseConfiguration as often as you can. See HTable's javadoc for more information.
    at org.apache.hadoop.hbase.zookeeper.ZooKeeperWatcher.<init>(ZooKeeperWatcher.java:155)
    at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.getZooKeeperWatcher(HConnectionManager.java:1002)
    at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.setupZookeeperTrackers(HConnectionManager.java:304)
    at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.<init>(HConnectionManager.java:295)
    at org.apache.hadoop.hbase.client.HConnectionManager.getConnection(HConnectionManager.java:157)
    at org.apache.hadoop.hbase.client.HBaseAdmin.<init>(HBaseAdmin.java:90)
    at org.apache.hadoop.hbase.client.HBaseAdmin.checkHBaseAvailable(HBaseAdmin.java:1258)
    at HBaseDemo.main(HBaseDemo.java:55)
Caused by: org.apache.zookeeper.KeeperException$ConnectionLossException: KeeperErrorCode = ConnectionLoss for /hbase
    at org.apache.zookeeper.KeeperException.create(KeeperException.java:90)
    at org.apache.zookeeper.KeeperException.create(KeeperException.java:42)
    at org.apache.zookeeper.ZooKeeper.exists(ZooKeeper.java:809)
    at org.apache.zookeeper.ZooKeeper.exists(ZooKeeper.java:837)
    at org.apache.hadoop.hbase.zookeeper.ZKUtil.createAndFailSilent(ZKUtil.java:903)
    at org.apache.hadoop.hbase.zookeeper.ZooKeeperWatcher.<init>(ZooKeeperWatcher.java:133)
    ... 7 more
12/04/17 14:36:49 INFO zookeeper.ClientCnxn: EventThread shut down
Execution script exiting 
```

* * *

```
/04/17 17:41:35 INFO zookeeper.ZooKeeper: Client environment:user.name=xyz
12/04/17 17:41:35 INFO zookeeper.ZooKeeper: Client environment:user.home=/home/xyz
12/04/17 17:41:35 INFO zookeeper.ZooKeeper: Client environment:user.dir=/opt/xyz/hbase-sample
12/04/17 17:41:35 INFO zookeeper.ZooKeeper: Initiating client connection, connectString=192.168.15.169:2181 sessionTimeout=180000 watcher=hconnection
12/04/17 17:41:35 INFO zookeeper.ClientCnxn: Opening socket connection to server /192.168.15.169:2181
12/04/17 17:41:35 INFO zookeeper.ClientCnxn: Socket connection established to hbase.xyz.com/192.168.15.169:2181, initiating session
12/04/17 17:41:35 INFO zookeeper.ClientCnxn: Session establishment complete on server hbase.xyz.com/192.168.15.169:2181, sessionid = 0x136c00d59ac0009, negotiated timeout = 180000
12/04/17 17:41:36 INFO client.HConnectionManager$HConnectionImplementation: getMaster attempt 0 of 1 failed; no more retrying.
java.net.ConnectException: Connection refused
at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:567)
at org.apache.hadoop.net.SocketIOWithTimeout.connect(SocketIOWithTimeout.java:206)
at org.apache.hadoop.net.NetUtils.connect(NetUtils.java:604)
at org.apache.hadoop.hbase.ipc.HBaseClient$Connection.setupIOstreams(HBaseClient.java:328)
at org.apache.hadoop.hbase.ipc.HBaseClient.getConnection(HBaseClient.java:883)
at org.apache.hadoop.hbase.ipc.HBaseClient.call(HBaseClient.java:750)
at org.apache.hadoop.hbase.ipc.HBaseRPC$Invoker.invoke(HBaseRPC.java:257)
at $Proxy4.getProtocolVersion(Unknown Source)
at org.apache.hadoop.hbase.ipc.HBaseRPC.getProxy(HBaseRPC.java:419)
at org.apache.hadoop.hbase.ipc.HBaseRPC.getProxy(HBaseRPC.java:393)
at org.apache.hadoop.hbase.ipc.HBaseRPC.getProxy(HBaseRPC.java:444)
at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.getMaster(HConnectionManager.java:360)
at org.apache.hadoop.hbase.client.HBaseAdmin.<init>(HBaseAdmin.java:94)
at org.apache.hadoop.hbase.client.HBaseAdmin.checkHBaseAvailable(HBaseAdmin.java:1258)
at HBaseDemo.main(HBaseDemo.java:55)
HBase is not running!
Execution script exiting 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T05:28:26.983

我找到了解决方案。

只需从我*的*`/etc/hosts`. 现在我的 localhost 条目就像*192.169.19.50* [这是我的 hbase IP] = localhost 而不是 127.0.0.1 localhost。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-05-08T16:12:19.600

此处接受的答案可能有效，但仅作为副作用。

问题是 HBase 正在打开一个在 localhost（即，在环回上）而不是在面向外部的接口上侦听的端口。删除 /etc/hosts 中的 localhost 条目会强制 HBase 绑定到外部接口——但这只是因为它找不到 localhost。当某些守护进程想要合法地单独监听或连接到 localhost（通过 lo）时，这可能会成为一个问题。

您可以通过使用 telnet 通过 localhost 或分配给机器的 IP 连接到端口 60000 来测试您是否有此问题。您很可能能够通过 localhost 进行连接（因为这是 HBase 绑定的地方），而不是 IP。

最好在 HBase conf 中使用您的机器名称。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-04-28T18:33:59.857

假设你已经为你的 HBase 实例化了配置，设置 hbase master、zookeeper quorum 和 znode parent。有点像这样-

```
import org.apache.hadoop.hbase.HBaseConfiguration;

public class CLASS_NAME{
    Configuration configuration = new HBaseConfiguration.Create();
    configuration.set(hbase master, "");
    configuration.set(zookeeper quorum, "");
    configuration.set(znode parent, "");  
} 
```

# c# - 在 Asp.Net 中使用自定义成员资格

> ID：10188895
> 
> 赞同：0
> 
> 时间：2012-04-17T09:48:21.547
> 
> 标签：c#, asp.net, asp.net-membership

我`Asp.Net/C#`在我的应用程序中使用，我正在使用`Asp.Net`内置的成员资格框架。`aspnet_regsql`服务的安装已正确安装在我的数据库中。`aspnet_users`但是该表包含有关用户的基本信息，如何添加有关用户的其他信息。我应该修改表本身还是应该使用另一个表并将其与表链接。`aspnet_users`效果`Membership.ValidateUser(username,password)`也很好，但我有一个要求登录是基于用户代码的。我怎样才能实现这一点，是否可以通过内置的会员资格. 任何建议都非常受欢迎。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T09:53:40.060

您可以使用`ProfileProvider`（[参考](http://msdn.microsoft.com/en-us/library/system.web.profile.profileprovider.aspx)）。

更多信息在这里：http: [//msdn.microsoft.com/en-us/library/2y3fs9xs.aspx](http://msdn.microsoft.com/en-us/library/2y3fs9xs.aspx)

在这里：[如何分配配置文件值？](https://stackoverflow.com/questions/426609/how-to-assign-profile-values)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T09:54:34.793

请改用 ASP.NET [`Profile-Provider`](http://msdn.microsoft.com/en-us/library/014bec1k.aspx)。

[http://www.4guysfromrolla.com/articles/101106-1.aspx](http://www.4guysfromrolla.com/articles/101106-1.aspx)

您可以存储任何类型的附加信息，甚至是二进制（图像）。我[`SqlProfileProvide`](http://msdn.microsoft.com/en-us/library/system.web.profile.sqlprofileprovider.aspx)在我当前的应用程序中使用了我自己来让用户自己选择他的起始页。

因此，我只需要将其添加到`web.config`：

```
<profile defaultProvider="AspNetSqlProfileProvider">
  <providers>
    <clear/>
    <add name="AspNetSqlProfileProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="RM2ConnectionString" applicationName="/ERP"/>
  </providers>
  <properties>
    <add name="Startpage"/>
  </properties>
</profile> 
```

我可以在代码隐藏中编写这个属性：

```
if(User.Identity.IsAuthenticated)
{
    HttpContext.Current.Profile.SetPropertyValue("Startpage", startPage); //startPage is a String
    HttpContext.Current.Profile.Save();
} 
```

并按以下方式阅读：

```
if(User.Identity.IsAuthenticated)
{
    Dim user = Membership.GetUser();
    Dim startPage = HttpContext.Current.Profile.GetPropertyValue("Startpage") as String;
} 
```

您可以存储任何您想要的东西，请参阅上面的链接了解更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T09:56:42.493

您可以通过继承来创建自定义成员资格提供程序`System.Web.Security.MembershipProvider`- 这样您就可以实现所需的任何附加功能。然后，您可以将用户详细信息存储在您自己的表结构等中。然后您将 web.config 指向您的自定义提供程序以使用它。

有用的链接：

*   [http://msdn.microsoft.com/en-us/library/f1kyba5e.aspx](http://msdn.microsoft.com/en-us/library/f1kyba5e.aspx)
*   [http://www.asp.net/web-forms/videos/how-do-i/how-do-i-create-a-custom-membership-provider](http://www.asp.net/web-forms/videos/how-do-i/how-do-i-create-a-custom-membership-provider)
*   [http://www.devx.com/asp/Article/29256](http://www.devx.com/asp/Article/29256)

# java - jsf - 在 faces-config 中注册 SessionListener

> ID：10188896
> 
> 赞同：3
> 
> 时间：2012-04-17T09:48:22.533
> 
> 标签：java, jsf, listener, faces-config

我创建了一个`SessionListener`，但它不起作用，因为我不知道如何在`faces-config.xml`. 我尝试了以下方法：

**会话监听器**

```
public class SessionListener implements HttpSessionListener {

@Override
public void sessionCreated(HttpSessionEvent arg0) {

    HttpServletRequest request = (HttpServletRequest) FacesContext.getCurrentInstance().getExternalContext().getRequest();
    String param = request.getParameter("language");

    IDAdminLanguage idl = (IDAdminLanguage) JSFUtils.resolve("#{languageBean}");

    if (param != null && param.length() > 0) {
        idl.setLanguage(param);
    } else {
        idl.setLanguage("de");
    }   
}

@Override
public void sessionDestroyed(HttpSessionEvent arg0) { } 
```

}

**面孔配置**

```
<listener>
   <listener-class>ch.idadmin.util.SessionListener</listener-class>
</listener> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T09:51:08.113

Yuu 需要在`web.xml`（而不是在 faces-config.xml 中）添加该配置

```
<web-app ...>
        <listener>
        <listener-class>ch.idadmin.util.SessionListener</listener-class>
    </listener>
</web-app> 
```

# asp.net - 瑞士法郎货币显示不正确

> ID：10188897
> 
> 赞同：1
> 
> 时间：2012-04-17T09:48:26.100
> 
> 标签：asp.net, xslt, currency, aspdotnetstorefront, currency-formatting

我有一个使用 aspdotnetstorefront 构建的电子商务网站。语言环境设置为

> de_DE

货币是瑞士法郎，它显示如下：

```
139,00 (CHF) 
```

当收到收据通知时，我遇到了一个问题，价格如下所示：（错误的应该是**139,00 (CHF)**

> 1.390.000,00

货币的显示规范设置为：

```
#,###.00 
```

我的 XML 包（受影响的行）如下所示：

```
<xsl:value-of select="receipt:FormatCurrencyWithoutCurrencyCode(Price)" disable-output-escaping="yes" /> 
```

**FormatCurrencyWithoutCurrencyCode：**

```
#region FormatCurrencyWithoutCurrencyCode
    /// <summary>
    /// Format the currency value into it's localized currency pattern
    /// </summary>
    /// <param name="sCurrencyValue">The currency value</param>
    /// <returns>The formatted currency string</returns>
    public virtual string FormatCurrencyWithoutCurrencyCode(string sCurrencyValue)
    {
        return FormatCurrencyWithoutCurrencyCode(sCurrencyValue, ThisCustomer.CurrencySetting);
    }

    /// <summary>
    /// Format the currency value into it's localized currency pattern
    /// </summary>
    /// <param name="sCurrencyValue">The currency value</param>
    /// <param name="sTargetCurrency">The target currency to base on</param>
    /// <returns>The formatted currency string</returns>
    public virtual string FormatCurrencyWithoutCurrencyCode(string sCurrencyValue, string sTargetCurrency)
    {
        InputValidator iv = new InputValidator("FormatCurrencyWithoutCurrencyCode");
        decimal value = iv.ValidateDecimal("CurrencyValue", sCurrencyValue);
        string targetCurrency = iv.ValidateString("TargetCurrency", sTargetCurrency);

        decimal amt = Currency.Convert(value, Localization.GetPrimaryCurrency(), targetCurrency);

        String tmpS = String.Empty;
        // get currency specs for display control:
        String DisplaySpec = Currency.GetDisplaySpec(targetCurrency);
        String DisplayLocaleFormat = Currency.GetDisplayLocaleFormat(targetCurrency);

        if (DisplaySpec.Length != 0 && Currency.NumPublishedCurrencies() > 1)
        {
            tmpS = amt.ToString(DisplaySpec);
        }
        else if (DisplayLocaleFormat.Length != 0)
        {
            CultureInfo formatter = new CultureInfo(DisplayLocaleFormat);

            // for debugging purposes
            if (CommonLogic.QueryStringUSInt("dec") > 0)
            {
                int decimalPlaces = CommonLogic.QueryStringUSInt("dec");
                formatter.NumberFormat.CurrencyDecimalDigits = decimalPlaces;
            }

            tmpS = amt.ToString("C", formatter);
            if (tmpS.StartsWith("("))
            {
                tmpS = "-" + tmpS.Replace("(", "").Replace(")", "");
            }
        }
        else
        {
            tmpS = Localization.CurrencyStringForDisplayWithoutExchangeRate(amt, false); // use some generic default!
        }

        return tmpS;
    }

    #endregion 
```

# java - Java文件上传 - 输入流问题

> ID：10188898
> 
> 赞同：0
> 
> 时间：2012-04-17T09:48:32.730
> 
> 标签：java, file-upload

当我读取相同的输入流时，我必须从 jsp 页面上传一些文件。我正在检查它的真实性，它是否是一个有效的文件，因为我正在使用[`jmimemagic`](http://1.%09http://sourceforge.net/projects/jmimemagic/) 它，它以输入流作为参数，现在当我尝试上传它时，它只上传 1 个字节的数据？

我觉得输入流有问题，请问有什么解决方案吗？

```
 //For checking the file type
InputStream loIns = aoFileStream.getInputStreamToReadFile();
            byte[] fileArray = IOUtils.toByteArray(loIns);
            mimeType = Magic.getMagicMatch(fileArray, true).getMimeType();
            if(!loAllowedFileTypesMimeList.contains(mimeType)){
                return false;
            }else{
                String lsFileName = aoFileStream.getFileName();
                String lsFileExt = lsFileName.substring(lsFileName.lastIndexOf(".") + 1);
                if(loAllowedFileTypesList.contains(lsFileExt.toLowerCase())){
                    return true;
                }
                return false;
            } 

// For uploading the content
File loOutputFile = new File(asFilePathToUpload);
            if(!loOutputFile.exists()){
                FileOutputStream loOutput = new FileOutputStream(loOutputFile);
                while (liEnd != -1) {
                    liEnd = inputStreamToReadFile.read();
                    loOutput.write(liEnd);
                }
                inputStreamToReadFile.close();
                loOutput.close();
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T10:38:55.227

在

```
 byte[] fileArray = IOUtils.toByteArray(loIns); 
```

你已经用尽了你的输入流，所以当你想把它写入一个文件时，你应该使用的内容，而`fileArray`不是你的`loIns`：

```
FileUtils.writeByteArrayToFile(loOutput, fileArray); 
```

FileUtils 由 apache-commons 提供

# android - JSON 对象解析错误

> ID：10188899
> 
> 赞同：1
> 
> 时间：2012-04-17T09:48:33.963
> 
> 标签：android, json, parsing

我有以下字符串作为 HTTPResponse。它是 JSON 格式。

```
 [
    {
       "From":"en",
       "OriginalTextSentenceLengths":[
          5
       ],
       "TranslatedText":"Hallo",
       "TranslatedTextSentenceLengths":[
          5
       ]
    },
    {
       "From":"en",
       "OriginalTextSentenceLengths":[
          8
       ],
       "TranslatedText":"Frage",
       "TranslatedTextSentenceLengths":[
          5
       ]
   },
   {
       "From":"en",
       "OriginalTextSentenceLengths":[
          6
       ],
       "TranslatedText":"Antwort",
       "TranslatedTextSentenceLengths":[
          7
       ]
  }
] 
```

所以这个字符串我解析如下以获得“翻译文本数组”

```
 String resp = "[{\"From\":\"en\",\"OriginalTextSentenceLengths\":[5],\"TranslatedText\":\"Hallo\",\"TranslatedTextSentenceLengths\":[5]},{\"From\":\"en\",\"OriginalTextSentenceLengths\":[8],\"TranslatedText\":\"Frage\",\"TranslatedTextSentenceLengths\":[5]},{\"From\":\"en\",\"OriginalTextSentenceLengths\":[6],\"TranslatedText\":\"Antwort\",\"TranslatedTextSentenceLengths\":[7]}]";

    String[] stringArray = null;
    try {
    JSONArray finalResult=null;
    JSONTokener tokener = new JSONTokener(resp); 

        finalResult = new JSONArray(tokener);
        stringArray = new String[finalResult.length()];

    for(int i=0;i<finalResult.length();i++){
        JSONObject e = finalResult.getJSONObject(i);
        Log.v("TAG",e.getString("TranslatedText"));
        stringArray[i]=e.getString("TranslatedText");
    }        

    }catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

我正在从 JSON 对象中获取提取的“翻译文本”数组（Hallo、Frage、Antwort）......

但是，当我通过直接向 JSONTokener 提供与输入相同的字符串来执行相同的过程时，即在获得如下 HttpResponse 之后，我**在 finalResult = new JSONArray(tokener) 行处得到 JSON 异常......**

**org.json.JSONException：在字符 0 处输入结束**

```
String resp = getHttpResponse(uri);
String[] stringArray = null;
    try {
    JSONArray finalResult=null;
    JSONTokener tokener = new JSONTokener(resp); 

        finalResult = new JSONArray(tokener);
        stringArray = new String[finalResult.length()];

    for(int i=0;i<finalResult.length();i++){
        JSONObject e = finalResult.getJSONObject(i);
        Log.v("TAG",e.getString("TranslatedText"));
        stringArray[i]=e.getString("TranslatedText");
    }

    }catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

我已经努力了 2 天来解决此错误，但无法解决。所以我将其发布在这里...请帮助

**编辑：**

我正在添加 getHttpResponse 的实现

```
 public static String getHttpResponse(URI uri) {
    Log.d("APP_TAG", "Going to make a get request");
    StringBuilder response = new StringBuilder();
    try {
        HttpGet get = new HttpGet();
        get.setURI(uri);
        //DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpParams httpParameters = new BasicHttpParams(); 
        int timeoutConnection = 30000; 
        HttpConnectionParams.setConnectionTimeout(httpParameters, timeoutConnection); 
        int timeoutSocket = 30000; 
        HttpConnectionParams.setSoTimeout(httpParameters, timeoutSocket); 

        DefaultHttpClient httpClient = new DefaultHttpClient(httpParameters); 

        Log.v("TAG","1");
        HttpResponse httpResponse = httpClient.execute(get);
        Log.v("TAG","2");
        if (httpResponse.getStatusLine().getStatusCode() == 200) {
            Log.d("demo", "HTTP Get succeeded");

            HttpEntity messageEntity = httpResponse.getEntity();
            InputStream is = messageEntity.getContent();
            BufferedReader br = new BufferedReader(new InputStreamReader(is));
            String line;
            while ((line = br.readLine()) != null) {
                response.append(line);
            }
        }
    } catch (Exception e) {
        Log.e("demo", e.getMessage());
    }
    Log.d("demo", "Done with HTTP getting");
    return response.toString();
} 
```

我给 getHttpResponse 的 uri 如下

```
 String[] texts = {"hello","question","answer"};
   final String params = "appId=" +   URLEncoder.encode("78280AF4DFA1CE1676AFE86340C690023A5AC139","UTF-8")                 
            + "&from=" + URLEncoder.encode("en","UTF-8")                 
            + "&to=" + URLEncoder.encode("de","UTF-8")                 
            + "&texts=" +   URLEncoder.encode(buildStringArrayParam(texts),"UTF-8");                

     final URL url = new  URL("http://api.microsofttranslator.com/V2/Ajax.svc/TranslateArray?" + params);       

     URI myURI = java.net.URI.create(url.toString()); 
     String resp = getHttpResponse(myURI); 
```

这个响应字符串是我要解析的......

这是用于 buildStringArrayParam(texts)

```
StringBuilder targetString = new StringBuilder("[\""); 
    String value;
    for(Object obj : values) {
        if(obj!=null) {
            value = obj.toString();
            if(value.length()!=0) {
                if(targetString.length()>2)
                    targetString.append(",\"");
                targetString.append(value);
                targetString.append("\"");
            }
        }
    }
    targetString.append("]");
    return targetString.toString(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T11:51:19.760

啊哈哈...微软。

至少在这种情况下，他们在开始时使用（不正确的？）`FEFF FEFF`UTF-16[字节顺序标记](http://en.wikipedia.org/wiki/Byte_order_mark)来提供 API 响应，这会破坏大多数客户端。

就像[这里的 PHP 人已经发现](https://stackoverflow.com/questions/6967190/decoding-the-json-output-from-microsoft-translator-api-with-php/7128250#7128250)一样，您只需从响应中删除前两个字节。例如在您的代码中：

```
JSONTokener tokener = new JSONTokener(resp.substring(2)); 
```

恐怕越无害的`trim()`也行不通。

真的很难找到，因为`FEFF`的正式名称是“零宽度不间断空格”，所以它是完全不可见的，除非您将字符串视为 char 数组或注意到当您使用左/右移动穿过字符串时文本光标如何停止方向键...

请注意，您不应该对收到的任何其他 HTTP 响应执行此操作，这仅适用于此 Microsoft API（也可能是其他 API）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T10:29:23.833

[Try GSON](http://www.javacodegeeks.com/2011/01/android-json-parsing-gson-tutorial.html)

And try to change your code design, hope it will help you.

And retrieve content from url -

```
public static String getContent(String url) throws Exception {
    return(new Scanner(new URL(url).openConnection().getInputStream()).useDelimiter("/z").next());
} 
```

Have fun...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T10:01:32.583

尝试使用这个：

```
HttpPost request = new HttpPost(URL);
HttpResponse response = httpClient.execute(request);

HttpEntity httpEntity = response.getEntity();
InputStream content = httpEntity.getContent();

BufferedReader reader = new BufferedReader(new InputStreamReader(content,"iso-8859-1"),8);
String resp = reader.readLine(); 
```

现在“resp”将保存可以解析的字符串......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T10:46:16.373

```
After getting the HTTP Response you have to do this thing, you cant use Httpresponse directly.

HttpResponse response= null;
response = http.execute(get);
HttpEntity entity = response.getEntity();
String xmlstring = EntityUtils.toString(entity);
message = xmlstring; 
```

# android-3.0-honeycomb - 来自 SD 和可绘制不同尺寸的 Android 图像

> ID：10188902
> 
> 赞同：2
> 
> 时间：2012-04-17T09:48:41.320
> 
> 标签：android-3.0-honeycomb, android

我为平板电脑构建了一个应用程序，并使用了 SD 卡中的一些图片和可绘制文件夹中的一些图片。

问题是，如果我使用来自 SD 的图像并在我的应用程序中显示它们，我可以使用具有原始屏幕分辨率/大小的图像来全屏显示（1280x720），但是当我使用来自可绘制文件夹的相同图像时，我必须将其放大 1.5全屏显示 (1920x1080) 的时间更大。这不是一个大问题，只是好奇为什么会这样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T22:45:20.920

重新发布较早的评论，但现在作为答案（根据要求）：

这听起来是与不同 dpi 选项相关的典型问题。四个广义密度 、、`lpi`和具有3:4:6:8 的缩放比例，作为基线。听起来您的平板电脑具有密度，这可以解释 1.5 倍增因子，因为.`mdpi``hdpi``xhdpi``mdpi``hdpi``6/4=1.5`

有关更多详细信息，请阅读[支持多个屏幕的文章](http://developer.android.com/guide/practices/screens_support.html)。

# java - 启动后的 Android 应用程序

> ID：10188905
> 
> 赞同：6
> 
> 时间：2012-04-17T09:48:50.350
> 
> 标签：java, android

我做了一个 android 应用程序，它在启动完成后启动。它适用于 android 2.3.3 和 Android 3.1 但是当我强制关闭在 android 3.1 中运行的应用程序并且我再次重新启动时，应用程序在启动后没有出现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T09:52:42.603

我用这段代码来做，它对我有用：

```
public class AutoStarter extends BroadcastReceiver {
    public void onReceive(Context context, Intent intent)
    {
      if("android.intent.action.BOOT_COMPLETED".equals(intent.getAction()))
      {
         Intent serviceLauncher = new Intent(context, your.class);
         context.startService(serviceLauncher);
      }
    }
} 
```

为了测试，你可以在你的 cmd 中使用它

adb shell am 广播 -a android.intent.action.BOOT_COMPLETED

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T11:12:56.003

> 当我强制关闭在 android 3.1 中运行的应用程序并再次重新启动时，应用程序在启动后没有出现？

正确的。在 Android 3.1+ 上，以下类型的应用程序不会自动运行：

*   新安装的应用程序
*   用户“强制停止”的应用程序

这些应用程序必须首先由用户手动启动（例如，启动您的一个活动），然后才能`Intents`再次接收任何广播。

# nhibernate - SharpArch.Data.NHibernate.Repository.SaveOrUpdate() 不保存

> ID：10188907
> 
> 赞同：0
> 
> 时间：2012-04-17T09:48:51.533
> 
> 标签：nhibernate, fluent-nhibernate, s#arp-architecture

我有这个填充数据库的代码，但是完成后，数据库仍然是空的。只有 hibernate_unique_key 表中的数字更高。

接下来有趣的是，在调试过程中，实例有 id，保存后，但不像 1,2,3 ......但非常高，如 60083、60084 ......等。（这似乎不正常，因为有只有几行用于保存）。

在此之前，引用等有一些问题，但现在没有错误消息或异常。

代码在那里：

```
using System;
using NHibernate.Cfg;
using SharpArch.Data.NHibernate;
using LaboratorniMetody.Data.NHibernateMaps;
using SharpArch.Core.PersistenceSupport;
using LaboratorniMetody.Core;

namespace LaboratorniMetody.FillSchema
{
    class Program
    {
        private static Configuration configuration;

        static void Main(string[] args)
        {
            configuration = NHibernateSession.Init(new SimpleSessionStorage(), new String[] { "LaboratorniMetody.Data" },
                                            new AutoPersistenceModelGenerator().Generate(),
                                            "../../../../app/LaboratorniMetody.Web/NHibernate.config");

            IRepository<Laboratory> LaboratoryRepository = new Repository<Laboratory>();
            Laboratory Laboratory1 = new Laboratory() { Name = "Hematologie" };//Method
            Laboratory l = LaboratoryRepository.SaveOrUpdate(Laboratory1);
            Laboratory Laboratory2 = new Laboratory() { Name = "Patologie" };//Method
            LaboratoryRepository.SaveOrUpdate(Laboratory2);
            Laboratory Laboratory3 = new Laboratory() { Name = "Laboratoře" };//Method
            LaboratoryRepository.SaveOrUpdate(Laboratory3);
        }
    }
} 
```

我使用 NUnit 从 Project.Core 类中生成的 DB 模式。

你有什么想法我应该在哪里找到问题吗？我有 2 个非常相似的项目，可以正常工作。我从其中一个复制了这段代码，实际上没有什么不同（除了数据库模型等等。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T11:28:22.650

您需要在事务中进行更改并在之后提交事务。

```
using(var tx = NHibernateSession.Current.BeginTransaction())
{
   IRepository<Laboratory> LaboratoryRepository = new Repository<Laboratory>();
   Laboratory Laboratory1 = new Laboratory() { Name = "Hematologie" };//Method
   Laboratory l = LaboratoryRepository.SaveOrUpdate(Laboratory1);
   Laboratory Laboratory2 = new Laboratory() { Name = "Patologie" };//Method
   LaboratoryRepository.SaveOrUpdate(Laboratory2);
   Laboratory Laboratory3 = new Laboratory() { Name = "Laboratoře" };//Method
   LaboratoryRepository.SaveOrUpdate(Laboratory3);

   tx.Commit();
} 
```

我建议查看 SharpArchContrib 项目 wiki，其中有一些关于在 Windows 应用程序/服务中使用 SharpArch 以及如何从那里使用 Transaction 属性的示例。

[https://github.com/sharparchitecture/Sharp-Architecture-Contrib/wiki/](https://github.com/sharparchitecture/Sharp-Architecture-Contrib/wiki/)

# wpf - 绑定密钥 to a value In WPF, is it possible to bind the key in "{StaticResource key}"to a variable. For example. I have a variable ExecutionState with the states 问问题 问问题 2012-04-17T09:48:54.623 1587 次 This question shows research effort; it is useful and clear 4 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. In WPF, is it possible to bind the key in "{StaticResource key}"to a variable. For example. I have a variable ExecutionState with the states Active and Completed. In my ResourceDictionary I have   Instead of having <textblock style="{StaticResource Active}">I Would like to have something like <textblock style="{StaticResource {Binding ExecutionState}}">Thus if the state changes the text color changes. Is something like this even possible? I can achieve the wanted functionality using triggers, but I have to reuse it at several places and I don't want to clutter my code. I am using MVVM also. thanx Given your problem description I figure you bind your ParentObject directly to your components instead of binding a reference to the ParentObject. The serialization/deserialization of session scoped objects (which all pages, components and models in effect are) creates these 'new' instances (even though they are deserialized copies of the original parent object). While you have not shown much code, I suspect you do something like this: public MyPage() { Object parentObject = ((MyApplication)Application.get()).getParentObject(); add(new Label("timer", new PropertyModel(parentObject, "time"))); } This binds the parent object to the property model, and that binds the parent object to the page (through the label component). What you should do instead is: public MyPage() { add(new Label("timer", new PropertyModel(this, "application.parentObject.time"))); } This binds the page to itself, and instructs the property model to retrieve the application dynamically, and from the application the parent object, and from that the time. This way you don't bind your objects to the page hierarchy, but retrieve them dynamically. Another option is to use a LoadableDetachableModel that retrieves the parent object from the application, and detaches it after rendering the page. public class ParentObjectModel extends LoadableDetachableModel <parentobject>{ @Override public ParentObject load() { return ((MyApplication)Application.get()).getParentObject(); } } See the Wicket wiki for more information on Models. wpfxamldata-bindingmvvmstaticresource 4 2 回答 2 This answer is useful 0 不，这是不可能的。绑定只能在 DependencyProperty 上设置。StaticResource 不是 DependencyObject，因此没有 DependencyProperty。您应该使用触发器或开发自己的附加行为。 于 2012-04-17T10:57:37.107 回答 This answer is useful 0 没有直接的方法可以实现。创建一个附加属性并指定要绑定的属性名称。在属性更改回调函数中更新控件样式。 <textblock dep:customstyle.stylename="{Binding ExecutionState}" text="Thiru">public static class CustomStyle { static FrameworkPropertyMetadata _styleMetadata = new FrameworkPropertyMetadata( string.Empty, FrameworkPropertyMetadataOptions.AffectsRender, StyleNamePropertyChangeCallBack); public static readonly DependencyProperty StyleNameProperty = DependencyProperty.RegisterAttached("StyleName", typeof (String), typeof (CustomStyle), _styleMetadata); public static void SetStyleName(UIElement element, string value) { element.SetValue(StyleNameProperty, value); } public static Boolean GetStyleName(UIElement element) { return (Boolean)element.GetValue(StyleNameProperty); } public static void StyleNamePropertyChangeCallBack(DependencyObject d, DependencyPropertyChangedEventArgs e) { FrameworkElement ctrl = d as FrameworkElement; if (ctrl.IsLoaded) { string styleName = Convert.ToString(e.NewValue); if (!string.IsNullOrEmpty(styleName)) { ctrl.Style = ctrl.TryFindResource(styleName) as Style; } } } } 于 2012-04-17T11:17:12.883 回答 Related 9 python - 如何创建多维列表 1 android - jQuery Ui 地图更改标记位置 0 mysql - 在列中组合值然后在 mysql 中分解它的优点/缺点 1 java - Intellij中如何使用Maven导入依赖 1 sql - 用于从不同表中获取人员属性的 SQL 查询 1 android - Sencha Architect -- 部署 3 javascript - 文本验证 2 java - 尝试创建查询时出现 MismatchedTokenException 1 php - 在 php 中安装应用程序时禁用错误报告 3 opencv - OpenCV 错误：断言失败（size.width>0 && size.height>0） Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</textblock></parentobject></textblock></textblock>

> ID：10188909
> 
> 赞同：4
> 
> 时间：
> 
> 标签：wpf, xaml, data-binding, mvvm, staticresource

In WPF, is it possible to bind the key in "{StaticResource key}"to a variable.

For example. I have a variable **ExecutionState** with the states **Active** and **Completed**.

In my ResourceDictionary I have

```
<Style TargetType="{x:Type TextBlock}" x:Key="Active">
        <Setter Property="Foreground" Value="Yellow"/>
    </Style>
    <Style TargetType="{x:Type TextBlock}" x:Key="Completed">
        <Setter Property="Foreground" Value="Green"/>
    </Style> 
```

Instead of having

```
<TextBlock Style="{StaticResource Active}"/> 
```

I Would like to have something like

```
<TextBlock Style="{StaticResource {Binding ExecutionState}}"/> 
```

Thus if the state changes the text color changes. Is something like this even possible? I can achieve the wanted functionality using triggers, but I have to reuse it at several places and I don't want to clutter my code. I am using MVVM also.

thanx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T10:57:37.107

不，这是不可能的。绑定只能在 DependencyProperty 上设置。StaticResource 不是 DependencyObject，因此没有 DependencyProperty。您应该使用触发器或开发自己的附加行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T11:17:12.883

没有直接的方法可以实现。创建一个附加属性并指定要绑定的属性名称。在属性更改回调函数中更新控件样式。

```
<TextBlock  dep:CustomStyle.StyleName="{Binding ExecutionState}"    Text="Thiru"        />

public static  class CustomStyle
{
    static FrameworkPropertyMetadata _styleMetadata = new FrameworkPropertyMetadata(
                                     string.Empty, FrameworkPropertyMetadataOptions.AffectsRender, StyleNamePropertyChangeCallBack);

    public static readonly DependencyProperty StyleNameProperty =
        DependencyProperty.RegisterAttached("StyleName", typeof (String), typeof (CustomStyle), _styleMetadata);

    public static void SetStyleName(UIElement element, string value)
    {
        element.SetValue(StyleNameProperty, value);
    }
    public static Boolean GetStyleName(UIElement element)
    {
        return (Boolean)element.GetValue(StyleNameProperty);
    }

    public static void StyleNamePropertyChangeCallBack(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {

        FrameworkElement ctrl = d as FrameworkElement;

        if (ctrl.IsLoaded)
        {

            string styleName = Convert.ToString(e.NewValue);
            if (!string.IsNullOrEmpty(styleName))
            {
                ctrl.Style = ctrl.TryFindResource(styleName) as Style;
            }
        }
    }
} 
```

# jsf - 在新选项卡中重定向到外部 URL 并同时在支持 bean 中执行操作

> ID：10188912
> 
> 赞同：3
> 
> 时间：2012-04-17T09:49:05.837
> 
> 标签：jsf, redirect, external

我正在一个 jsf 应用程序中工作，该应用程序在某个时间需要在新选项卡中打开一个外部页面，使第一页保持活动状态。我需要找到一种方法来使应用程序执行，只需单击一下按钮：

1.  在新选项卡中重定向到外部 URL
2.  在原始页面中禁用按钮本身的操作

我试过使用 an`<outputLink />`但它没有 action 属性。我试过使用 a`<commandLink />`但它无法重定向到外面。我还尝试了在支持 bean 中编码的`<commandLink />`with和重定向：`target="_blank"`

```
<h:commandLink onclick="submit();" target="_blank" action="#{myBean.execute}" disabled="#{myBean.linkDisabled}" value="external link" /> 
```

并且，在支持 bean 中：

```
public String execute() {
    linkDisabled = true;

    try{
        ExternalContext externalContext = FacesContext.getCurrentInstance().getExternalContext();
        externalContext.redirect(Constants.EXTERNAL_URL);
    } catch(Exception e){
        throw new FacesException("Redirection failed");
    }

    return THIS_PAGE;
} 
```

页面在新选项卡中打开，但它是当前页面，而不是带有 URL 的页面，`Constants.EXTERNAL_URL`并且该按钮仍处于启用状态。不显示错误消息。有什么建议吗？

在此先感谢，安德里亚

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-17T12:06:47.080

你的问题令人困惑。您正在混合“链接”和“按钮”。您基本上需要通过 JavaScript 禁用客户端中的元素，因为响应不会返回到当前浏览器窗口/选项卡，而是返回到不同的浏览器窗口/选项卡。在 JavaScript 中，禁用按钮很容易，但链接却不行。为简单起见，我假设您的意思是并且可以使用 a`<h:commandButton>`并且这是当前表单中的唯一按钮。

要解决您的问题，您需要删除`onclick="submit()"`（因为它会干扰默认行为）并且您需要删除导航结果（这无关紧要，但在某些 JSF 实现中您永远不知道）并且您需要通过 JS 禁用按钮客户端。

所有的代码都应该是这样的：

```
<h:form target="_blank">
    <h:commandButton
        value="external" 
        action="#{myBean.execute}" 
        onclick="setTimeout('document.getElementById(\'' + this.id + '\').disabled=true;', 50);" />
</h:form> 
```

和

```
public void execute() throws IOException {
    FacesContext.getCurrentInstance().getExternalContext().redirect(Constants.EXTERNAL_URL);
} 
```

这`setTimeout()`是必要的，因为在发送表单数据之前按钮被禁用，这将导致按钮自己的 name=value 对不会作为请求参数发送，因此 JSF 不会调用任何操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T10:00:47.207

为什么不使用 action="someaction" 并将其映射到 faces-config.xml 以转到另一个页面？

# datetime - JavaME Date String to Long

> ID：10188915
> 
> 赞同：0
> 
> 时间：2012-04-17T09:49:23.707
> 
> 标签：datetime, blackberry, java-me

Im using SQLite and trying to get my date into a blackberry datetime field.

in the DB its stored as string in format:

`yyyy-MM-dd HH:mm`

e.g. : 2012-02-01 15:45

But the field wants it as a Long.

`date - The initial date value for this field. This is the number of milliseconds since midnight on January 1, 1970\. To create an empty date field, set this parameter to Long.MIN_VALUE. This method will then remove the date value from this field, setting it to null.`

And then convert it back again.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T10:11:05.793

检查以下代码：

```
// conversion - string to long
long dateLong = HttpDateParser.parse("2012-04-17 16:09");

// conversion - long to string
Date dateObject = new Date(dateLong);        
String dateStr = (new SimpleDateFormat("yyyy-MM-dd HH:mm")).format(dateObject); 
```

# c++ - 使用 Qt/C++ 的排序算法 - 对结构的 QList 进行排序

> ID：10188920
> 
> 赞同：6
> 
> 时间：2012-04-17T09:49:52.340
> 
> 标签：c++, algorithm, qt, sorting

我想知道它们是否是 stl 或 Qt 中的某种算法，它对双精度数组进行排序并返回原始列表中已排序项目的索引。例如。L = 1 , 2 , 5 , 3 L_sort = 1 , 2 , 3 , 5 索引 = 1, 2 , 4, 3

这样我以后就可以计算 AnotherList[Indices] （相对于原始列表 L，两个列表中的顺序相同）。

最后，我想到了创建一个 QList，每个 MyStruct 包含两个成员，一个与 L 中的元素具有相同类型的 LType，另一个与 AnotherList 中的元素具有相同类型的 AnotherType。然后对 LType 类型的成员进行排序。但是我有这个想法，我不知道如何在 Qt 中进行。

谢谢并恭祝安康

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-17T10:39:07.840

您可以成对存储带有索引的数据...首先按值排序，然后按索引排序...

```
QList<QPair<LType,int> > array;
for (int i = 0; i < 100; i++)
{
    LType x = ...
    array.append(qMakePair(x,i));
}

// Ordering ascending
qSort(array.begin(), array.end(), QPairFirstComparer());

.....

// Restoring start order
qSort(array.begin(), array.end(), QPairSecondComparer()); 
```

你只需要这些类：

```
struct QPairFirstComparer
{
    template<typename T1, typename T2>
    bool operator()(const QPair<T1,T2> & a, const QPair<T1,T2> & b) const
    {
        return a.first < b.first;
    }
};

struct QPairSecondComparer
{
    template<typename T1, typename T2>
    bool operator()(const QPair<T1,T2> & a, const QPair<T1,T2> & b) const
    {
        return a.second < b.second;
    }
}; 
```

# ant - 从 build.xml ant 动态添加 jars

> ID：10188922
> 
> 赞同：0
> 
> 时间：2012-04-17T09:49:57.540
> 
> 标签：ant, weblogic-10.x, ant-contrib

我创建了一个 jar 文件，并将依赖项（即`wlclient.jar`，`wljmxclient.jar`）添加到清单文件的 Class-Path 属性中。我收到错误消息说“不支持的协议：t3”，但是如果我将这些 jar 放在`C:\apache-ant-1.8.3\lib`文件夹中，则执行时不会出错。

我是蚂蚁新手，请帮忙。

下面给出了创建 jar 文件的 ant 任务。

```
<jar destfile="projectpoc.jar" basedir="bin" excludes="**/Test.class">
        <manifest>
          <attribute name="Class-Path" 
            value=" lib/mysql-connector.jar lib/log4j-1.2.14.jar lib/ojdbc6.jar lib/wlclient.jar lib/wljmxclient.jar " />
        </manifest>
</jar> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T00:02:02.213

我建议使用[manifestclasspath](http://ant.apache.org/manual/Tasks/manifestclasspath.html) ANT 任务。它将正确解析相对于 jar 文件的路径。

请参阅以下答案：[Ant + Class-path Issue](https://stackoverflow.com/questions/3468655/ant-class-path-issue/3481539#3481539)

# php - 如何安装 php_zip

> ID：10188923
> 
> 赞同：0
> 
> 时间：2012-04-17T09:49:57.973
> 
> 标签：php, php-5.2

根据 php 手册，我已经在 php.ini 文件中启用了 php_zip.dll，并在 php 安装文件夹的 ext 文件夹中检查了 php_zip.dll。它出现在那里。但是在使用 zip 代码时，它会显示如下错误：

```
Fatal error: Class 'ZipArchive' not found in C:\inetpub\wwwroot\projectname\bulkdownload.php on line 9 
```

以下是批量下载.php的代码

```
<?php

function zipFilesAndDownload($file_names,$archive_file_name,$file_path)
{
$zip = new ZipArchive();
    //create the file and throw the error if unsuccessful
    if ($zip->open($archive_file_name, ZIPARCHIVE::CREATE )!==TRUE) {
        exit("cannot open <$archive_file_name>\n");
    }
    //add each files of $file_name array to archive
    foreach($file_names as $files)
    {
        $zip->addFile($file_path.$files,$files);
    }
    $zip->close();
    //then send the headers to foce download the zip file
    header("Content-type: application/zip"); 
    header("Content-Disposition: attachment; filename=$archive_file_name"); 
    header("Pragma: no-cache"); 
    header("Expires: 0"); 
    readfile("$archive_file_name"); 
    exit;
}

$file_array = $_GET['voice'];
$file_names = explode(';', $file_array);
$archive_file_name = "voicefile.zip";
$file_path = "d:/temp_file/voice/";

zipFilesAndDownload($file_names,$archive_file_name,$file_path);

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T12:31:23.323

运行 phpinfo()。在“zlib”标题上方，查看是否有“zip”标题。如果不是，则 zip 模块未正确安装。如果是这样，请检查它是否已“启用”。

# ruby-on-rails - Rails I18n 中的惰性查找是一种不好的做法吗？

> ID：10188926
> 
> 赞同：10
> 
> 时间：2012-04-17T09:50:04.540
> 
> 标签：ruby-on-rails, internationalization, rails-i18n

在 Rails 视图中使用较短的 i18n 键（例如`t '.submit_button'`）使它们更易于键入，但它真的好吗？当您稍后决定重构您的视图和局部时，您必须记住更新相应的本地化条目。按业务含义命名它们并始终指定完整的键名不是更健壮吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T11:12:59.777

嗯，我用的是混合物。;-)

对于“yes”、“no”、“submit”、“cancel”之类的东西，我倾向于使用名为“defaults”的命名空间，所以我总是像`t 'defaults.cancel'`. 这也可以解决您上面提到的“submit_button”问题。对于我的具体观点，我决定使用惰性查找功能。

如果您想要特定视图的 I18n 键，您必须决定最适合您的：

*   如果您不介意在 yaml 文件中搜索 I18n 密钥并在更改视图时更改它们，请执行此操作。优点是您`I18n.t`在视图中为每次调用它保存一些字符。

*   但是，如果您经常更改视图名称（不知道为什么必须这样做:)），那么您可能会更好地使用您描述的方式。

正如我已经说过的，我更喜欢第一种选择，因为它对我来说更方便。

# android - 在 Surface 视图中使用 Gif 图像？

> ID：10188927
> 
> 赞同：0
> 
> 时间：2012-04-17T09:50:05.720
> 
> 标签：android, surfaceview, gif

我正在开发一个 android 应用程序，其中我使用带有以下代码的 gif 图像

```
private static byte[] streamToBytes(InputStream is) {
    ByteArrayOutputStream os = new ByteArrayOutputStream(1024);
    byte[] buffer = new byte[1024];
    int len;
    try {
        while ((len = is.read(buffer)) >= 0) {
            os.write(buffer, 0, len);
        }
    } catch (java.io.IOException e) {
    }
    return os.toByteArray();
} 
```

// 在类的构造函数中

```
is = this.context.getResources().openRawResource(R.drawable.fondo_juego_nexus);

            if (DECODE_STREAM) {
                  System.out.println("in if DECODE_STREAM");
                mMovie = Movie.decodeStream(is);
            } 

            else {
                byte[] array = streamToBytes(is);
                System.out.println("in else  DECODE_STREAM");
                mMovie = Movie.decodeByteArray(array, 0, array.length);
           }

// In On Draw 

  long now = android.os.SystemClock.uptimeMillis();

        if (mMovieStart == 0) {   // first time
            mMovieStart = now;
        }
        if (mMovie != null) {
            System.out.println("in if (mMovie != null)  " + mMovie.duration());
            int dur = mMovie.duration();
            if (dur == 0) 
            {
                dur = 1000;
                System.out.println("in if movie if");
            }
            System.out.println("duration is  "+ dur);
            int relTime = (int)((now - mMovieStart) % dur);
            mMovie.setTime(relTime);
            System.out.println("in if displaying syd");
            mMovie.draw(canvas,120,100);

        } 
```

并通过 ontouch 我退出活动，例如

```
else if(_y<=60 &&  _x<=60)
         {

             sp.play(mySound1, volume, volume, 0, 0, 1);
             sp.release();
            playr.stop();
             tme.cancel();
             act.finish();

} 
```

但是，当我使用上述方法退出活动并返回上一个活动，然后再次回到我使用 gif 图像的活动时，它不会出现在设备 Galaxy s2、2.3.3 上，但在相同大小的 2.2 模拟器上很好

这种方法有什么问题吗？或者我可以用什么方法来显示 gif 图像

我应该怎么做才能消除这个错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T06:43:43.433

我得到了我的问题的解决方案，我不知道它有多好，但它对我有用，我之前在构造函数中使用这个代码

```
 if (DECODE_STREAM) {
                mMovie = Movie.decodeStream(is);
            } else {
                byte[] array = streamToBytes(is);
                mMovie = Movie.decodeByteArray(array, 0, array.length);
            }   

        } 
```

第一次工作正常，但我认为第二次内存不足是由于隐式运行的垃圾收集器太多，而且我的图像初始化也一次又一次地运行，这是导致性能不佳的原因游戏，我所做的是我只是手动添加了垃圾收集器

```
System.gc(); 
```

并在此之后初始化所有图像并放置以下代码

```
if (DECODE_STREAM) {
                mMovie = Movie.decodeStream(is);
            } else {
                byte[] array = streamToBytes(is);
                mMovie = Movie.decodeByteArray(array, 0, array.length);
            }   

        } 
```

在此之后避免了垃圾收集器的隐式运行

现在 gif 图像工作正常

# javascript - Javascript JSON 比较

> ID：10188931
> 
> 赞同：0
> 
> 时间：2012-04-17T09:50:23.077
> 
> 标签：javascript, jquery, json, compare

我正在尝试构建一个从服务器获取数据并将其显示给用户的 webapp。脚本每 10 秒从服务器获取一次数据，如果数据发生变化，它会提醒用户。这是我现在使用的代码，但它每 10 秒提醒一次数据是否已更改。

那么我需要如何更改我的 scipt 以使其比较旧 JSON 和新 JSON 并查看它们是否不同，以及它们是否在更新显示给用户的数据之前显示警报？

```
$('#ListPage').bind('pageinit', function(event) {
    getList1();
});
setInterval ( "getList1()", 10000 );
var old = "";

function getEmployeeList1() {
    $.getJSON(serviceURL + 'getemployees.php?' + formArray, function(data) {
        if(data != old){ // data from the server is not same as old
            $('#nollalista li').remove();
            keikka = data.key;
            $.each(keikka, function(index, lista) {
                $('#nollalista').append('<li><a href="employeedetails.html?id=' + lista.IND + '">' +
                        '<h4>' + lista.OSO + '</h4>' +
                        '<p>' + lista.AIKA + '</p>' +'</a></li>');
            });
            $('#nollalista').listview('refresh');

            if(old != "")
                alert("New data!");        
            old = data;
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-17T09:54:16.597

一个非常简单（但有点蹩脚）的解决方案是比较字符串表示：

```
if(JSON.stringify(a) != JSON.stringify(b)) { ... } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T10:26:37.860

您的代码每 10 秒发出一次警报，因为您的比较

```
 if(data != old){ // data from the server is not same as old 
```

每次都返回真。

您可以使用此库来比较 javascript [https://github.com/prettycode/Object.identical.js](https://github.com/prettycode/Object.identical.js)中的 json 并将比较修改为

```
 if(!Object.identical(data,old)){ // data from the server is not same as old 
```

用法：

```
var a = { x: "a", y: "b" },
b = { x: "a", y: "b" },
c = { y: "b", x: "a" },
d = { x: "Chris", y: "Prettycode.org", developerYears: [1994, 2011] },
e = { y: "Prettycode.org", developerYears: [1994, 2011], x: "Chris" };
f = { y: "Prettycode.org", developerYears: [2011, 1994], x: "Chris" };
console.log(Object.identical(a, b)); // true (same properties and same property values)
console.log(Object.identical(a, c)); // true (object property order does not matter, simple)
console.log(Object.identical(d, e)); // true (object property order does not matter, complex)
console.log(Object.identical(d, f)); // false (arrays are, by definition, ordered) 
```

# jquery - 新的 AjaxUpload 由其他按钮启动

> ID：10188932
> 
> 赞同：1
> 
> 时间：2012-04-17T09:50:23.810
> 
> 标签：jquery, file-upload

我正在使用`valums.com/ajax-upload`插件。问题是它在我选择一个文件后立即开始上传，我想通过单击其他按钮开始上传，因此用户可以根据需要更改值。

HTML：

```
<div id="upload" ><span>Upload File<span></div>
<input type="button" name="submit" id="submit" value="Submit" />
<span id="status" ></span><ul id="files" ></ul> 
```

jQuery：

```
$(function(){
    var btnUpload = $('#upload');
    var status = $('#status');
    new AjaxUpload(btnUpload, {
        action: 'upload-file.php',
        name: 'uploadfile',  
        autoSubmit: false,
        onSubmit: function(file, ext){
            // if (! (ext && /^(pdf)$/.test(ext))){ 
            if (!(ext && /^(jpg|png|jpeg|gif|pdf)$/.test(ext))) { 
                // extension is not allowed 
                status.text('Only JPG, PNG or GIF files are allowed');
                return false;
            }

            upload.setData({'example_key': 'value'});
        },
        onComplete: function(file, response) {
            //On completion clear the status
            status.text('');

            //Add uploaded file to list
            if (response === "success") {
                $('<li></li>').appendTo('#files').html('<img src="./uploads/'+file+'" alt="" /><br />'+file).addClass('success');
            } 
            else {
                $('<li></li>').appendTo('#files').text(file).addClass('error');
            }
        }
    });

    $("#submit").click(); ////dont know how to do it.
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T10:54:23.243

```
uploader = new AjaxUpload(...);
uploader.submit(); 
```

# c# - 带有文本过滤的 RichTextBox

> ID：10188933
> 
> 赞同：0
> 
> 时间：2012-04-17T09:50:33.683
> 
> 标签：c#, winforms, visual-studio-2008, filter, richtextbox

我怎样才能在`richTextBox`过滤器（例如连接`combobox`）中实现只负责显示包含所选单词（过滤器）的行？

我不是在谈论删除其他行 - 只是“隐藏”。

可能吗？

最终我可以使用另一种类型控件，但如果不需要，我想使用richTextBox。

我现在想，以某种结构存储数据，并基于这种使用的结构进行过滤。但不知道这是否是有效的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T09:59:16.517

尝试做这样的事情

```
 public string[] RtbFullText;

    private void button7_Click(object sender, EventArgs e)
    {
        RtbFullText = richTextBox1.Text.Split('\n');
    }

    private void button8_Click(object sender, EventArgs e)
    {
        //Filter
        richTextBox1.Text = "";
        foreach (string _s in RtbFullText)
        {
            if (_s.Contains("Filter"))
                richTextBox1.Text += _s + "\n";
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T13:01:20.530

天哪，我做到了，使用这个类：

```
 public class ListWithRTB : IList
    {
        private List<string> _contents = new List<string>();
        private int _count;
        string lastsearch = "";

        public ListWithRTB()
        {
            _count = 0;
        }

        public object rtb;

        private void UpdateRtb(string search)
        {
            lastsearch = search;
            if (rtb is RichTextBox)
            {
                ((RichTextBox)rtb).Text = "";
                List<string> help_contents;
                if (search != "")
                    help_contents = _contents.Where(s => s.Contains(search)).ToList();
                else
                    help_contents = _contents;
                for (int i = 0; i < help_contents.Count; i++)
                {
                    ((RichTextBox)rtb).Text += help_contents[i] + "\n";
                }
            }
        }

        public void Filter(string search)
        {
            UpdateRtb(search);
        }

        public int Add(object value)
        {
            if (_count < _contents.Count + 1)
            {
                _contents.Add((string)value);
                _count++;
                UpdateRtb(lastsearch);
                return (_count);
            }
            else
            {
                return -1;
            }
        }

        public void RemoveAt(int index)
        {
            _contents.RemoveAt(index);
            _count--;
            UpdateRtb(lastsearch);
        }

        public void Clear()
        {
            _contents.Clear();
            UpdateRtb(lastsearch);
            _count = 0;
        }

        public bool Contains(object value)
        {
            return _contents.Contains((string)value);
        }

        public int IndexOf(object value)
        {
            return _contents.IndexOf((string)value);
        }

        public void Insert(int index, object value)
        {
            _contents.Insert(index,(string) value);
            _count++;
        }

        public bool IsFixedSize
        {
            get
            {
                return false;
            }
        }

        public bool IsReadOnly
        {
            get
            {
                return false;
            }
        }

        public void Remove(object value)
        {
            RemoveAt(IndexOf(value));
        }

        public object this[int index]
        {
            get
            {
                return _contents[index];
            }
            set
            {
                _contents[index] = value.ToString();
            }
        }

        public void CopyTo(Array array, int index)
        {
            int j = index;
            for (int i = 0; i < Count; i++)
            {
                array.SetValue(_contents[i], j);
                j++;
            }
        }

        public int Count
        {
            get
            {
                return _count;
            }
        }

        public bool IsSynchronized
        {
            get
            {
                return false;
            }
        }

        public object SyncRoot
        {
            get
            {
                return this;
            }
        }

        public IEnumerator GetEnumerator()
        {
            throw new Exception("The method or operation is not implemented.");
        }

        public void PrintContents()
        {
            Console.WriteLine("List has a capacity of {0} and currently has {1} elements.", _contents.Count, _count);
            Console.Write("List contents:");
            for (int i = 0; i < Count; i++)
            {
                Console.Write(" {0}", _contents[i]);
            }
            Console.WriteLine();
        }

    } 
```

这就是你如何使用它

```
ListWithRTB _mlrtb = new ListWithRTB();

    private void button1_Click(object sender, EventArgs e)
    {
        _mlrtb.rtb = richTextBox1;
        _mlrtb.Add("Filter");
        _mlrtb.Add("123");
        _mlrtb.Add("111 Filter");
    }

    private void button2_Click(object sender, EventArgs e)
    {
        _mlrtb.Filter("Filter");
    }

    private void button3_Click(object sender, EventArgs e)
    {
        _mlrtb.Filter("");
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T11:32:42.960

所以你可以这样做

```
public class NewRichTextBox : RichTextBox
{
    public string[] TotalText;
    private bool filter = false;
    protected override void OnTextChanged(EventArgs e)
    {
        base.OnTextChanged(e);
        if (!filter)
            TotalText = Text.Split('\n');
    }
    public void Filter(string sf)
    {
        filter = true;
        Text = "";
        foreach (string _s in TotalText)
        {
            if (_s.Contains(sf))
                Text += _s + "\n";
        }
        filter = false;
    }
}

    public Form1()
    {
        InitializeComponent();
        NewRichTextBox myrtb = new NewRichTextBox();
        myrtb.Name = "NRTB";
        Controls.Add(myrtb);
    }

    private void button1_Click(object sender, EventArgs e)
    {
        NewRichTextBox mtrb = (NewRichTextBox)Controls.Find("NRTB", false)[0];
        mtrb.Filter("Filter");
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-30T09:40:37.013

```
 private void Button_Click(object sender, RoutedEventArgs e)
    {
        if (!string.IsNullOrEmpty(SearchableString) && !string.IsNullOrEmpty(FullRichtxt))
        {
            var SplitedTxt = FullRichtxt.Split('\n').ToList<string>();
            List<string> filterlist = SplitedTxt.Where(x => x.Contains(contx.SearchableString)).ToList<string>();
            string FilterString=string.Empty;
            foreach(string str in filterlist)
            {
                FilterString+=str+"\n";
            }
           (RichTextBox1 as  RichTextBox).AppendText(FilterString);
        }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-28T04:48:52.483

我知道这是一个非常古老的问题，但是我遇到了同样的问题并实现了它，它也保留了任何 RTF 格式。

```
 /// <summary>
    /// This Control allows to filter the content of the RichTextBox by either manually
    /// calling <c>ApplyFilter(string)</c> with the search string or specifying a TextBox Control
    /// as a filter reference. 
    /// 
    /// Matching lines will be retained, other will be deleted.
    /// 
    /// Retains RTF formatting and when removing the filter restores the original content.
    /// 
    /// Ideal for a Debug Console.
    /// 
    /// </summary>
    public class RichFilterableTextBox : RichTextBox
    {
        private Timer timer;
        private string OriginalRTF = null;
        private TextBox _filterReference;
        private int _interval = 2000;

        public TextBox FilterReference
        {
            get => _filterReference;
            set
            {
                //if we had already a filter reference
                if (_filterReference != null)
                {
                    //we should remove the event
                    _filterReference.TextChanged -= FilterChanged;
                }

                _filterReference = value;

                //if our new filter reference is not null we need to register our event
                if (_filterReference != null)
                    _filterReference.TextChanged += FilterChanged;
            }
        }

        /// <summary>
        /// After the filter has been entered into the FilerReference TextBox 
        /// this will auto apply the filter once the interval has been passed.
        /// </summary>
        public int Interval
        {
            get => _interval;
            set
            {
                _interval = value;
                timer.Interval = Interval;
            }
        }
        public RichFilterableTextBox()
        {
            timer = new Timer();
            timer.Interval = Interval;
            timer.Tick += TimerIntervalTrigger;
        }

        public void SetFilterControl(TextBox textbox)
        {
            this.FilterReference = textbox;
        }

        public void ApplyFilter(string searchstring)
        {
            int startIndex = 0;
            int offset = 0;

            //check each line
            foreach (var line in this.Lines)
            {
                offset = 0;
                SelectionStart = startIndex + offset;
                SelectionLength = line.Length + 1;

                //if our line contains our search string/filter
                if (line.Contains(searchstring))
                {
                    //we apply an offset based on the line length
                    offset = line.Length;
                }
                else
                {
                    //otherwise delete the line
                    SelectedText = "";
                }

                //move the start index forward based on the current selected text
                startIndex += this.SelectedText.Length;
            }
        }

        private void FilterChanged(object sender, EventArgs e)
        {
            //take snapshot of original
            if (OriginalRTF == null)
            {
                OriginalRTF = this.Rtf;
            }
            else
            {
                //restore original
                Rtf = OriginalRTF;
                OriginalRTF = null;
            }

            timer.Stop();
            timer.Start();
        }
        private void TimerIntervalTrigger(object sender, EventArgs e)
        {
            //stop the timer to avoid multiple triggers
            timer.Stop();

            //apply the filter
            ApplyFilter(FilterReference.Text);
        }
        protected override void Dispose(bool disposing)
        {
            timer.Stop();
            timer.Dispose();

            base.Dispose(disposing);
        }
    } 
```

此控件既可以单独使用，也可以通过调用 `ApplyFilter(string searchString)`具有所需搜索字符串的方法进行过滤。或者它可以连接到`TextBox` 您可以输入短语的位置。在设置的计时器间隔后，它将自动触发过滤。

我在运行时将其用作日志显示，我还将颜色代码应用于严重性，我的目标是保留格式并能够快速搜索/过滤。我附上了几张截图：

[![调试控制台示例](../Images/4db7c5ee3cabc854ccdee36a6cd3730b.png)](https://i.stack.imgur.com/FlNhk.jpg)

[![应用过滤器](../Images/d6ca5b6a651fe7c320b8d92b437950a7.png)](https://i.stack.imgur.com/5iylm.jpg)

仍有改进的空间，我希望这可以用作起始代码库。

# postgresql - PostgreSQL 全文搜索标题不包含足够的上下文

> ID：10188937
> 
> 赞同：5
> 
> 时间：2012-04-17T09:50:51.943
> 
> 标签：postgresql, full-text-search

我正在使用 PostgreSQL 的全文搜索功能在客户站点上实现搜索功能。我正在使用该`ts_headline`函数来获取搜索词出现的上下文，但客户对显示的词的选择不满意。特别是，标题似乎始终以搜索词开头，而客户希望它早一些词开始。

有什么方法可以将 PostgreSQL 配置为具有此行为，或修改 ts_headline 调用以获得所需的结果？

**编辑**：很抱歉首先没有包含一些示例 SQL。

```
SELECT
    ts_headline('english', "text", plainto_tsquery('"endpoints"'))
FROM "Page"
WHERE to_tsvector("text") @@ plainto_tsquery('"endpoints"') 
ORDER BY ts_rank(to_tsvector("text"), plainto_tsquery('"endpoints"')) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T11:42:31.967

使用 MaxFragments 选项，您可能会得到更好的结果。同样，您可以使用 MinWords 和 MaxWords，例如

```
SELECT
    ts_headline('english', "text", plainto_tsquery('"endpoints"'), 'MaxFragments=0, MinWords=5, MaxWords=9')
FROM "Page"
WHERE
    to_tsvector("text") @@ plainto_tsquery('"endpoints"') 
ORDER BY
    ts_rank(to_tsvector("text"), plainto_tsquery('"endpoints"')) 
```

您可能需要进行实验。

[请](http://www.postgresql.org/docs/current/interactive/textsearch-controls.html)参阅和http://www.postgresql.org/docs/current/interactive/textsearch-controls.html `MinWords`_`MaxWords``MaxFragments`

# android - 如何从android中的视频文件中获取帧

> ID：10188938
> 
> 赞同：12
> 
> 时间：2012-04-17T09:50:52.533
> 
> 标签：android, android-mediaplayer

[MediaMetadataRetriever.getFrameAtTime()](http://developer.android.com/reference/android/media/MediaMetadataRetriever.html#getFrameAtTime%28long,%20int%29)总是在调用时返回相同的帧。看看我的代码

```
private ArrayList<Bitmap> getFrames(String path){
    try {
        ArrayList<Bitmap> bArray = new ArrayList<Bitmap>();
        bArray.clear();
        MediaMetadataRetriever mRetriever = new MediaMetadataRetriever();
        mRetriever.setDataSource(getDataSource(path));

        for (int i = 3000; i <60000; i=i+5000) {
            bArray.add(mRetriever.getFrameAtTime(i, MediaMetadataRetriever.OPTION_CLOSEST_SYNC));

        }

        return bArray;
    } catch (Exception e) {
        // TODO: handle exception

        return null;

    }
} 
```

此方法总是返回相同的帧

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-23T15:06:49.300

我不知道你的视频有多长，但是用 long var 作为 time for 的时间`getTimeAtFrame`必须用**MICRO**秒表示

例如：1 秒的视频有 1000000 USSeconds，如果使用很短的时间（像你一样），你必须非常幸运地只检索到你的视频有的第一帧！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-12T17:49:04.360

您将不得不使用 FFMPEG 之类的东西来获取帧。

您将不得不使用 NDK，并为 Android 编译 FFMPEG；不幸的是，这不会很容易。

几个起点：

[http://ffmpeg.org/](http://ffmpeg.org/)

[用于 android 的 ffmpeg（使用教程：“ffmpeg 和 Android.mk”）](https://stackoverflow.com/questions/2645041/ffmpeg-for-a-android-using-tutorial-ffmpeg-and-android-mk)

祝你好运！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-08-24T09:32:26.340

Léon Pelletier 是对的。问题是[MediaMetadataRetriever.getFrameAtTime()](http://developer.android.com/reference/android/media/MediaMetadataRetriever.html#getFrameAtTime%28long,%20int%29)只能在**第二级**从视频中提取关键帧。例如，如果一个视频大约有 4 秒，那么您只能获得 4 或 5 个不同的帧。要获取所有视频帧，请参阅[MediaCodec](https://developer.android.com/reference/android/media/MediaCodec.html)。

# jquery-mobile - WebWorks UI 结构：全部在一个 HTML 中，还是单独的文件？

> ID：10188941
> 
> 赞同：1
> 
> 时间：2012-04-17T09:51:07.723
> 
> 标签：jquery-mobile, blackberry-webworks

设计 WebWorks 应用程序页面结构的正确方法是什么？我也在使用 jQuery-mobile。

A：如果所有页面都在一个 HTML 中，每个页面都是：

```
<div data-role="page">...</div> 
```

B: 页面是否应该在不同的 HTML 文件中分开并相互链接？

我目前正在使用方法 A，但是从一个页面转换到另一个页面时应用程序很慢。我怀疑原因之一是包含所有页面的单个 HTML 的大小。

我遇到的另一个问题是，按下手机上的物理“后退”按钮会退出应用程序，这是我怀疑我将所有页面都放在一个 HTML 中的方法的另一个原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T10:54:34.600

一个非常自以为是的答案：您使用了错误的框架。jQuery Mobile 非常臃肿，我发现即使在最近的 iOS 设备上它的性能也很差，更不用说黑莓的性能不是很好的操作系统了。

如果您继续沿用 jQuery Mobile 路线，我仍然建议您将所有页面放在一个 HTML 文件中，尤其是因为在单独的 HTML 页面之间移动时，WebWorks 上的用户体验有点欠佳。例如，当您点击指向不同 HTML 文件的链接时，您会看到非常明显的“白色闪烁”，尤其是在较旧/功能较弱的设备上（尽管您可以通过`rim:loadingScreen`在配置中为元素设置背景颜色来缓解这种情况.xml）。由您决定这是否比 jQuery Mobile 中的缓慢过渡更好或更差。

至于后退按钮，您可以通过将事件处理程序附加到后退键来覆盖默认行为（不要忘记`blackberry.system.event`在 config.xml 中启用该功能）：

```
blackberry.system.event.onHardwareKey(blackberry.system.event.KEY_BACK, function() {
  // Back key pressed, go back to previous screen
} 
```

但是，如果您仍然对替代解决方案持开放态度，我强烈建议您尝试一下 bbUI.js ( [https://github.com/tneil/bbUI.js](https://github.com/tneil/bbUI.js) ) - 这是一个半官方框架，看起来更多BB 上的主页比 jQuery Mobile 更好，并且针对平台进行了更好的优化（例如，允许您仅加载您当时正在显示的特定页面所需的脚本，解决一些 WebWorks/BB 特定的问题等。 ) - 将它与 Zepto ( [http://zeptojs.com/](http://zeptojs.com/) ) 结合起来，Zepto 是一个非常快速的 jQuery 替代品，你最终会得到一个比基于 jQuery Mobile 的应用程序慢得多的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T16:06:47.610

您可以使用最适合您项目的方式。对于大型应用程序，可能值得拥有一个“index.html”，然后链接到其他几个页面。也可以使编辑代码更容易。

# android - Android - 如何逐像素绘制图像？

> ID：10188944
> 
> 赞同：0
> 
> 时间：2012-04-17T09:51:15.913
> 
> 标签：android, opengl-es

我需要在opengl es中绘制图像，但是，我需要逐个像素地绘制。我尝试处理点，但我不知道如何计算要绘制的位置。我有一个 FloatBuffer，从 1 个像素到另一个像素的距离是多少？1.0 到 1.0 空间很大。

# c++ - C++ 中的模糊定义

> ID：10188951
> 
> 赞同：0
> 
> 时间：2012-04-17T09:51:38.003
> 
> 标签：c++, call, ambiguous

我不知道为什么 f 的调用是模棱两可的：/我知道这三个声明都可以，但在这种情况下这不起作用..

```
#include <iostream>

using namespace std;
void f(int);
void f(int &);
void f(const int &);

void f(int a);

void f(int &a);

   void f(const int &a);

int main()
{
    int i=1;
    const int ic=2;
    int &ri=i;
    const int & rc=ic;

    f(i);
    f(ic);
    f(ri);
    f(rc);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T09:54:21.323

> 我知道这三个声明都可以

如何？所有参数都可以转换为`int`. 歧义很明显。

你认为`int x = rc;`不会编译？

我认为您的困惑源于`void f(int);`. 由于参数是**按值**传递的，因此可以在 new 中复制的任何内容都`int`与此重载匹配。

# android - 以编程方式启动启动器选择 / Android

> ID：10188954
> 
> 赞同：1
> 
> 时间：2012-04-17T09:51:48.283
> 
> 标签：android, dialog, android-launcher, kiosk-mode

我正在开发一个在 KIOSK 模式下有效运行的工业应用程序——即用户不能退出它。

为了实现这一点，我只是将应用程序变成了启动器/主屏幕替代品。这非常有效，到目前为止似乎是一种防止人们外出的方法。

我唯一的问题是，如果我不小心，我们最终会遇到无法返回正常启动器应用程序的砖块设备。

我正在寻找的是一种以编程方式呈现 Android 启动器选择对话框的方法。

当您第一次启动启动器时，Android 似乎会自行执行此操作，但我无法找到以编程方式执行此操作的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T11:11:09.340

> 我正在寻找的是一种以编程方式呈现 Android 启动器选择对话框的方法。

`Intent.createChooser()`返回一个`Intent`将为给定的`Intent`. 因此，创建一个`Intent`for `ACTION_MAIN`and `CATEGORY_HOME`，将其包装在 中`Intent.createChooser()`，然后调用`startActivity()`结果`Intent`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-17T10:01:23.490

如果我正确理解了这个问题，您是否不想让用户在他不想要的情况下退出您的应用程序？

我会这样做：

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    return true;  
} 
```

现在，该活动将忽略按钮单击。现在您只需为出口创建一个菜单点。

# php - 我可以在 PHP 中创建线程吗？

> ID：10188961
> 
> 赞同：3
> 
> 时间：2012-04-17T09:52:16.837
> 
> 标签：php, multithreading

> **可能重复：**
> [PHP 有线程吗？](https://stackoverflow.com/questions/209774/does-php-have-threading)

我发现了这个： http: [//php.net/manual/en/function.pcntl-fork.php](http://php.net/manual/en/function.pcntl-fork.php)

但我不知道这些是线程还是进程，我很困惑。他们使用这两个词。

如果您有其他解决方案，这就是我需要线程的目的：我想使用 Web 套接字创建一个实时游戏，并且我想在后台运行一个进程，它为每个游戏生成一个线程（或房间）按需提供。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T09:53:55.437

`pcntl_fork`创建一个新进程。虽然文档中使用了“线程”一词，但“进程”更为突出：

> pcntl_fork() 函数创建一个子进程，该子进程与父进程的区别仅在于它的 PID 和 PPID。

PHP 不支持多线程（并且它不能假设 Web 服务器本身通常是多线程的）。

最后，为每个事物生成一个线程是一种幼稚的缩放方法，它不会超出某个不太晚的点。我建议研究替代架构。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T09:53:51.700

这只是 C fork() 函数的包装。它创建进程，而不是线程。PHP 不支持多线程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T10:05:59.460

*** PHP 不支持多线程。

# ajax - 将带有ajax请求的变量发送到div？

> ID：10188963
> 
> 赞同：0
> 
> 时间：2012-04-17T09:52:26.863
> 
> 标签：ajax

我有一个页面，我点击一个链接，它会在页面中加载一个 div。

```
<a href="#albums">load the div</a>

<div id="albums"></div> 
```

问题是我想用链接发送一些变量，就像这样。

```
<a href="#albums?album_id=13&user_id=1">load the div</a>

But then I get this error:
Syntax error, unrecognized expression: ?album_id=13&userId=1 
```

那么如何将变量发送到 div 呢？任何输入表示赞赏，谢谢。

更新！ajax 请求看起来像这样。

```
 if (href != '#') {
                $.ajax({
                    url: href,
                    data: settings.data,
                    type: settings.method,
                    success: function (data, textStatus) {
                        var firstPage = insertPages(data, settings.animation);
                        if (firstPage) {

                            if (settings.method == 'GET' && jQTSettings.cacheGetRequests === true && settings.$referrer) {
                                settings.$referrer.attr('href', '#' + firstPage.attr('id'));
                            }
                            if (settings.callback) {
                                settings.callback(true);
                            }
                        }
                    },
                    error: function (data) {
                        if (settings.$referrer) {
                            settings.$referrer.unselect();
                        }
                        if (settings.callback) {
                            settings.callback(false);
                        }
                    }
                });
            } else if (settings.$referrer) {
                settings.$referrer.unselect();
            }
        } 
```

# python - SQLite - 计算移动平均线

> ID：10188965
> 
> 赞同：4
> 
> 时间：2012-04-17T09:52:42.270
> 
> 标签：python, sql, sqlite, pysqlite, moving-average

我在使用 pysqlite 的 sqlite 中有一个表：

```
create table t
(
    id integer primary key not null,
    time datetime not null,
    price decimal(5,2)
) 
```

我如何从这个数据中计算[移动平均值](http://en.wikipedia.org/wiki/Moving_average)，窗口**X**秒大，使用 sql 语句？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T12:35:12.743

据我了解您的问题，您不想要最后 N 个项目的平均值，但在最后 x 秒内，我是否正确？

好吧，这为您提供了过去 720 秒记录的所有价格的列表：

```
>>> cur.execute("SELECT price FROM t WHERE datetime(time) > datetime('now','-720 seconds')").fetchall() 
```

当然，您可以将其提供给 AVG-SQL-Function，以获得该窗口中的平均价格：

```
>>> cur.execute("SELECT AVG(price) FROM t WHERE datetime(time) > datetime('now','-720 seconds')").fetchall() 
```

您还可以使用其他时间单位，甚至将它们链接起来。例如，要获得最后一个半小时的平均价格，请执行以下操作：

```
>>> cur.execute("SELECT AVG(price) FROM t WHERE datetime(time) > datetime('now','-30 minutes','-1 hour')").fetchall() 
```

编辑：可以在[这里找到 SQLite 日期时间参考](http://www.sqlite.org/lang_datefunc.html "SQLite 日期/时间")

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T10:09:43.783

`x`窗口单位大的移动平均线由下式给出`i`：

```
(x[i] + x[i+1] + ... + x[i+x-1]) / x 
```

要计算它，您需要创建一个[`queue`](http://docs.python.org/library/queue.html#queue-objects)大小为 LIFO 的堆栈（您可以将其实现为 a ）`x`，并计算其总和。然后，您可以通过添加新值并从旧总和中减去旧值来更新总和；您可以通过从堆栈中弹出第一个元素来从数据库中获取新元素和旧元素。

那有意义吗？

# actionscript - 我的 AS3 预加载器加载到 100% 但主要内容为空白？

> ID：10188968
> 
> 赞同：0
> 
> 时间：2012-04-17T09:52:49.680
> 
> 标签：actionscript, preloader

我有一个使用以下方法的预加载器：

编译器设置：

- 框架二主要

如果loadedBytes == totalBytes，我只会发送垃圾邮件

我不能再使用“传统”的预加载方式，因为 GZip 破坏了它。

但是，当我在预加载器上单击“播放”时，仅在一个合作伙伴网站上。“主要”部分未显示。换句话说，就像这部分不存在：

```
if (loadedBytes == totalBytes)
{
    nextFrame()
    stop();
    var main:Object = new mainClass();
addChild(main as DisplayObject);
} 
```

什么会导致 SWF 文件加载第二帧，但不显示它？

请记住，在 MainClass 中，我检查阶段是否可用。

```
if (stage)
{
    init();
}
else
{
    addEventListener(Event.ADDED_TO_FRAME, init, false, 0, true);
} 
```

到目前为止，SWF 在其他任何地方都可以使用（4 个人对此没有任何问题）。

有任何想法吗？

# wpf - WPF DependencyProperty 绑定已更改

> ID：10188969
> 
> 赞同：0
> 
> 时间：2012-04-17T09:52:53.687
> 
> 标签：wpf, binding, dependency-properties

简单的问题，但我在网上找不到任何答案：

我有`DependencyProperty`一个自定义控件，想知道何时有人绑定它。有什么办法吗？

我首先想到使用 a `PropertyChangedCallback`，但并非在所有情况下都有效。例如，如果 my 的默认值为`DependencyProperty`0，并且绑定的值也是 0，则`PropertyChangedCallback`不会触发。

非常感谢，

安托万

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T11:41:49.117

我发现`CoerceValueCallback`即使值没有改变，也会多次调用。

即使我没有设置 a`Binding`也会调用它，但至少在我设置一个时也会调用它。

我想我现在会使用它，并检查是否有`Binding`with `BindingOperations`。

如果你有更好的想法，我会很高兴学习它！

谢谢 ：）

# c++ - 为什么 boost::program_options 接受切碎的单词？

> ID：10188973
> 
> 赞同：3
> 
> 时间：2012-04-17T09:53:38.253
> 
> 标签：c++, boost, boost-program-options

我有以下程序：

```
#include <boost/program_options.hpp>

bool check_options(int argc, char** argv)
{
    using namespace boost::program_options;
    variables_map vm;

    // Command line options
    std::string cfg_file_name;
    options_description cmd_line("Allowed options");
    cmd_line.add_options()
        ("help", "produce this help message")
        ;

    store(parse_command_line(argc, argv, cmd_line), vm);
    notify(vm);    
    if(vm.count("help")) 
    {
        std::cout << cmd_line << std::endl;
        return false;
    }
    return true;
}

int main(int argc, char** argv)
{
    if(!check_options(argc, argv))
        return 1;
    return 0;
} 
```

当我运行它时，`./myprg --help`我得到了我期望的结果：

```
Allowed options:
  --help                produce this help message 
```

但是，即使我运行：`./myprg --h`or `./myprg --he`or ，我也会得到相同的结果`./myprg --hel`。那些最后的选项不应该引发错误吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T11:04:55.000

似乎接受部分匹配是`default_style`for `boost::option`。

根据 Boost 网站[http://lists.boost.org/boost-users/2007/02/25861.php的回答](http://lists.boost.org/boost-users/2007/02/25861.php)

通过将额外参数传递给`parse_command_line`.

由 OP 编辑​​：实际上，`parse_command_line`我不得不使用更通用的`command_line_parser`（允许更改样式），因此用`store(...`这个替换该行：

```
store(command_line_parser(argc, argv).options(cmd_line).style(command_line_style::default_style & ~command_line_style::allow_guessing).run(), vm); 
```

# android - 如何在android中更改设备方向？

> ID：10188975
> 
> 赞同：0
> 
> 时间：2012-04-17T09:53:44.007
> 
> 标签：android, orientation, device

我正在使用安卓手机来开发自助服务终端系统。方便使用纵向模式作为标准，如果我根据需要旋转它，它将与传感器一起切换到横向。我的问题是这个设备编程布局会在运行时做很多并排的效果，因为它总是会切换到纵向，然后记住传感器方向并切换回横向。这意味着纵向模式的实现对我的开发来说不是很舒服。现在我在开发工具中看到了显示设备配置的配置应用程序：

```
orientation=1 
```

我的问题是：我必须编辑哪个文件才能将设备方向更改为标准横向，以便上述应用程序向我显示横向。（手机已root）

我想将全局从手机纵向模式更改为平板电脑横向模式，而不仅仅是单个应用程序！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T10:00:57.737

您需要做的是编辑您的`AndroidManifest.xml`文件并为您的活动指定方向，以及自己处理方向更改：

```
<activity android:name="MyActivity"
          android:label="@string/app_name"
          ...
          android:configChanges="orientation|keyboardHidden"
          ...
          android:screenOrientation="landscape"> 
```

然后，无论设备方向如何，您的活动都将始终以横向模式运行。

**编辑：**如果您想以编程方式启用/禁用自动旋转，那么您可以使用以下代码：

```
public static void setAutoOrientationEnabled(ContentResolver resolver, boolean enabled)
{
    Settings.System.putInt(resolver, Settings.System.ACCELEROMETER_ROTATION, enabled ? 1 : 0);
} 
```

但是请注意，这将影响设备上运行的所有应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T10:22:17.317

嗨，这是你要找的吗？这将使应用程序方向保持横向。

`setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-23T23:44:05.363

该线程已有 5 年历史-我正在回答以帮助稍后到达这里的人。我想这里的每个答案都在谈论特定于应用程序的方向更改。以下是更改整个设备方向时应考虑的事项

运行时：在 /system/build.prop 添加：-

```
# Makes portrait only
persist.panel.orientation=90 
```

要添加到构建树中：添加相同的

```
device/<vendor>/<processor>/system.prop 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T10:04:50.477

如果您想将方向保持为横向，请将其添加到您的 Manifest.xml 中：

```
<activity android:name="MyActivity" android:screenOrientation="landscape"></activity> 
```

# javascript - 使用功能继承时 setTimeout 不起作用

> ID：10188976
> 
> 赞同：0
> 
> 时间：2012-04-17T09:53:45.883
> 
> 标签：javascript, html, oop

在阅读了 Douglas Crockford 的“JavaScript: The Good Parts”之后，我尝试实现这样的计时器。它有私有变量（秒、小时、分钟）和三个公共方法：开始、停止和继续：

```
var timer = function() {
            var that = {};
            var seconds = 0;
            var hours = 0;
            var minutes = 0;
            var myTimer;

            that.getTime = function() {
                var time = hours + " : " + minutes + " : " + seconds;
                return time;
            }
            that.start = function() {
                seconds += 1;           
                if(seconds >= 60) {
                    seconds -= 60;
                    minutes += 1;
                }
                if(minutes == 60)
                    hours += 1;
                document.getElementById('hours').innerHTML = hours;
                document.getElementById('minutes').innerHTML = minutes;
                document.getElementById('seconds').innerHTML = seconds; 
                myTimer = setTimeout(function() {
                    start();
                }, 1000);
            };

            that.stop = function() {
                clearTimeout(myTimer);
            }
            that.reset = function() {
                seconds = 0;
                hours = 0;
                minutes = 0;
                clearTimeout(myTimer);
                document.getElementById('hours').innerHTML = hours;
                document.getElementById('minutes').innerHTML = minutes;
                document.getElementById('seconds').innerHTML = seconds;
            }
            return that;
        }; 
```

然后，我开始了它：

```
<body onload="var t = timer();t.start();">

    <h1>Digital Clock</h1>
    <div id="wrap">
        <div>
            <ul>
                <li id="hours"></li>
                <li> : </li>
                <li id="minutes"></li>
                <li> : </li>
                <li id="seconds"></li>
            </ul>
        </div>
    </div>
    <br/>
</body> 
```

谁能告诉我我犯了什么错误？

**更新**：最后，我发现了问题。当您在另一个函数（例如内部函数）中使用一个函数时，“this”绑定到**global**，而不是外部函数。因此，在语句 start() 中，js 将尝试在全局对象中查找函数。当然，没有这样的功能。在这里，我找到了两个解决方案：

1.  用“那个”

    myTimer = setTimeout(function() { that.start(); }, 1000);

2.  保存上下文：

    var timerInstance = 这个；

    myTimer = setTimeout(function() { timerInstance.start(); }, 1000);

希望这会帮助你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T10:01:00.970

这是一个包含您修改的代码的 jsFiddle：http: [//jsfiddle.net/6YWLJ/](http://jsfiddle.net/6YWLJ/)

我用“this”替换了“that”（“this”代表你的计时器），而不是“var timer”，我使用了“window.timer”

稍后编辑：这是一个更正代码的版本，所以它就像一个计时器（你的代码中有一些错误）[http://jsfiddle.net/6YWLJ/2/](http://jsfiddle.net/6YWLJ/2/)

# java - Java - 远程控制台

> ID：10188983
> 
> 赞同：0
> 
> 时间：2012-04-17T09:53:57.353
> 
> 标签：java, console

对于我用 java 编码的服务器，我想添加一个控制台。我使用套接字连接到我的服务器。这是我为控制台编写的代码：

在我的服务器上：

```
public class ServerConsole
{   
    public String exec(String[] cmd)
    {
        try
        {
            Process child = Runtime.getRuntime().exec(cmd);

            InputStream in = child.getInputStream();
            StringBuffer buffer = new StringBuffer();
            int c;
            while ((c = in.read()) != -1)
            {
                buffer.append((char)c);
            }
            in.close();

            return buffer.toString();
        }
        catch (Exception e) {}

        return "FAILED";
    }
} 
```

该类执行给定的命令并返回一个字符串，其中包含执行后控制台的内容。

我这样称呼这个方法：

```
String cmd_data_cmd = inputStream.readUTF();
String[] dataCmd = cmd_data_cmd.split("#");
OSCmd osCmd = new OSCmd();
outputStream.writeUTF(osCmd.exec(dataCmd)); 
```

其中 inputStream 是我与套接字一起使用的流。它运作良好！

现在，在客户端，我做到了：

```
String[] cmd = cmd_input.getText().split(" ");
String new_cmd = "";
for (String part : cmd)
    new_cmd += (new_cmd.equals("") ? "": "#") + part;

this.outputSocket.writeUTF(new_cmd);
DataInputStream result_input = new DataInputStream(this.input);
String tmp = result_input.readUTF();
System.out.println(tmp); 
```

这应该返回我在控制台中显示的结果，但实际上，没有任何反应。当我启动那部分代码时，它就会冻结。

知道怎么做吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T13:06:07.200

这是解决方案：

```
String[] cmd_exec = {};
String os_name = System.getProperty("os.name").toLowerCase();
if (os_name.indexOf("win") >= 0)
    cmd_exec = new String[]{"cmd.exe", "/c", cmd};
else if (os_name.indexOf("mac") >= 0)
    cmd_exec = new String[]{"/usr/bin/open", "-a", cmd};
else if (os_name.indexOf("nix") >= 0 || os_name.indexOf("nux") >= 0)
    cmd_exec = new String[]{"/bin/bash", cmd};
else if (os_name.indexOf("sunos") >= 0)
    cmd_exec = new String[]{"/bin/bash", cmd};

Process child = Runtime.getRuntime().exec(cmd_exec);

String line;
while ((line = stdInput.readLine()) != null)
{
    buffer.append("\t" + new String(line.getBytes("UTF-8"), "UTF-8") + "\n");
}
stdInput.close();
while ((line = stdError.readLine()) != null)
{
    buffer.append("\t" + new String(line.getBytes("UTF-8"), "UTF-8") + "\n");
}
stdError.close();

child.destroy(); 
```

希望这对其他人有帮助。

# java - 带有 EXT JS 错误的 Spring MVC：DispatcherServlet noHandlerFound

> ID：10188984
> 
> 赞同：0
> 
> 时间：2012-04-17T09:53:59.077
> 
> 标签：java, spring, tomcat, spring-mvc, extjs

我试图让一个简单的 EXT JS 表单出现在我的 tomcat 上，但我收到以下错误：

```
17-Apr-2012 10:46:09 org.springframework.web.servlet.DispatcherServlet noHandlerFound
WARNING: No mapping found for HTTP request with URI [/helloworld/service/web/js  /restful.css] in DispatcherServlet with name 'rest'
17-Apr-2012 10:46:09 org.springframework.web.servlet.DispatcherServlet noHandlerFound
WARNING: No mapping found for HTTP request with URI [/helloworld/service/web/js/restful.js] in DispatcherServlet with name 'rest' 
```

web.xml

```
<!DOCTYPE web-app PUBLIC
 "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN"
 "http://java.sun.com/dtd/web-app_2_3.dtd" >

<web-app>
<display-name>Archetype Created Web Application</display-name>

<context-param>
<param-name>contextConfigLocation</param-name>
<param-value>
classpath:/application-context.xml
</param-value>
</context-param>

<!-- This listener will load other application context file in addition to 
        rest-servlet.xml -->
<listener>
<listener-class>
org.springframework.web.context.ContextLoaderListener
</listener-class>
</listener>

<servlet>
<servlet-name>rest</servlet-name>
<servlet-class>
org.springframework.web.servlet.DispatcherServlet
</servlet-class>
<load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
<servlet-name>rest</servlet-name>
<url-pattern>/service/*</url-pattern>
</servlet-mapping>

</web-app> 
```

休息-servlet.xml

```
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:mvc="http://www.springframework.org/schema/mvc" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="
    http://www.springframework.org/schema/beans     
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/context 
    http://www.springframework.org/schema/context/spring-context-3.0.xsd
    http://www.springframework.org/schema/mvc
    http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd">

<context:component-scan base-package="com.fexco.helloworld.web" />

<mvc:annotation-driven />

   <bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter">
          <property name="messageConverters">
                 <list>
                       <ref bean="jsonConverter" />
                 </list>
          </property>
   </bean>

   <bean id="jsonConverter" class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter">
          <property name="supportedMediaTypes" value="application/json" />
   </bean>

   <bean
    class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix">
        <value>/</value>
    </property>
    <property name="suffix">
        <value>.jsp</value>
    </property>
</bean> 
```

我从 index.jsp 调用 restful.css 和 restful.js 类

```
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>

<%@ page contentType="text/html; charset=ISO-8859-1"%>

<html>

<head>
<link rel="stylesheet" type="text/css" href="/webapp/js/restful.css" />
<script type="text/javascript" src="/webapp/js/restful.js"></script>
</head>

<body>
<h1>This is used to display EXT objects</h1>
</body>

</html> 
```

目录结构

![这是我的目录的结构](../Images/087fb458260714112d46d50e728b6f1d.png)

我似乎无法解决此错误，我的 index.jsp 正常显示在页面上，但没有出现 EXT 表单，我在网上查看了类似的问题，目前所有解决方案都在我的解决方案中，所以这不是相同的错误。

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T10:11:18.450

目前，您通过相对路径引用静态文件 (`.js`和)。`.css`这没有任何意义，因为这些文件的位置不依赖于正在显示的页面的位置。

您需要改用绝对路径。您可以使用`<c:url>`构建包含应用程序上下文路径的绝对路径（因此，无论您的应用程序部署在何处，它们都是正确的）：

```
<link rel="stylesheet" type="text/css" href="<c:url value = '/js/restful.css' />" />
<script type="text/javascript" src="<c:url value = '/js/restful.js' />"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T10:17:47.013

试试这个..

```
<link rel="stylesheet" type="text/css" href="/js/restful.css" />
<script type="text/javascript" src="/js/restful.js"></script> 
```

# java - 唯一 JMSMessageID 的最大大小

> ID：10188987
> 
> 赞同：0
> 
> 时间：2012-04-17T09:54:03.123
> 
> 标签：java, jakarta-ee, jms, weblogic-10.x

我在我的应用程序中使用 JMS 来满足我的要求之一。我想将每个消息的唯一 ID（实际上是 MDB）存储在数据库中，通过该数据库我使用以下代码获取唯一 ID：

```
@Override
public void onMessage(Message msg) {
        try {
            id = msg.getJMSMessageID();             
        } catch (JMSException e1) {
        } 
} 
```

从上面的代码我有消息唯一 ID，但我想知道任何消息的最大大小可能是什么，因此我需要相应地配置数据库。

我正在使用 Weblogic 服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T10:26:20.663

JMS 消息 ID 的最大长度由 JMS 提供者定义。

您至少需要查阅您的提供者文档，以确定您的数据库列的适当大小。对于更便携的解决方案，您应该将其设置为相当大的值 - 这样您就不会依赖任何供应商的 JMS 实现来规定列的大小。

我想说，对于最便携的解决方案，如果可以避免的话，根本不应该存储 JMS 消息 ID。您始终可以为消息生成自己的 ID 并将其存储起来，这样您就可以为自己的目的定义正确的列长度。

# ios - 如何在 iOS 5 中使用 HTML 标签发送图像而不是作为附件

> ID：10188996
> 
> 赞同：0
> 
> 时间：2012-04-17T09:54:33.467
> 
> 标签：ios, email, ios5, ios4

我正在尝试在 HTML 中附加图像并通过基于 iOS 5 的 iPhone 中的邮件发送。我正在使用以下代码：

```
UIImage *emailImage = [UIImage imageNamed:@"icon.png"];
NSData *imageData = UIImageJPEGRepresentation(emailImage, 0.6);
NSString *imageStr = [imageData base64EncodingWithLineLength:[imageData length]];
NSString *htmlStr = [NSString stringWithFormat:@"<img src='data:image/jpegbase64,%@'>",imageStr];
text=[text stringByAppendingString:htmlStr]; 
```

它在 iOS 4 中运行完美，但在 iOS 5 中却没有。背后的原因是什么以及如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T14:20:23.933

你不是少了一个分号吗？例如，

```
NSString *htmlStr = [NSString stringWithFormat:@"<img src='data:image/jpeg;base64,%@'>",imageStr]; 
```

当您说它适用于 iOS 4 但不适用于 iOS 5 时，您是什么意思？它在 iOS 4 邮件中显示正常，但在 iOS 5 邮件中不显示？或者，由于某种原因，生成邮件的应用程序在 iOS5 中以某种方式失败？您能否更具体地了解 iOS 4 和 5 之间的行为差​​异？