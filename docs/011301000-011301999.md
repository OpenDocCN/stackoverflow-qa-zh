# StackOverflow 问答 11301000-11301999

# ruby-on-rails - 为什么在检查依赖项时使用 GemSpec + GemFile？

> ID：11301000
> 
> 赞同：13
> 
> 时间：2012-07-02T20:52:19.150
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, gem

每当开发 gems 时，我看不出为什么不直接检查 Gemfile 的依赖关系的任何原因。

确实，为什么要使用`.gemspec`文件来列出它们？有真正的好处吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-02T21:02:16.260

那是因为`Gemfile`它不是来自 Rubygems 的文件，而是来自 Bundler 的文件。因此 Rubygem 开发人员必须扩展他们使用的文件才能支持 Gemfile。由于已经存在该`.gemspec`文件，因此没有正当理由应该这样做。（有足够的宝石在没有 a 的情况下表现良好`Gemfile`）

实际上，[建议](http://yehudakatz.com/2010/12/16/clarifying-the-roles-of-the-gemspec-and-gemfile/)使用这个作为`Gemfile`gems 的唯一内容：

```
source 'https://rubygems.org'
gemspec 
```

它将指示 bundler 使用该`.gemspec`文件作为 gems 的权威来源。

# http - 是否有必要将查询字符串附加到 img 标签中的图像和 css 中的图像以刷新缓存的项目？

> ID：11301003
> 
> 赞同：12
> 
> 时间：2012-07-02T20:52:35.687
> 
> 标签：http, http-caching

我知道一种常见的做法是为 css、javascript 和图像文件设置一个过期时间，然后确保所有浏览器通过附加查询字符串（或更改文件名）这样的查询字符串（或更改文件名）在文件更改后立即获取最新内容

从此`<link rel="stylesheet" type="text/css" href="base.css">`：

对此：

```
<link rel="stylesheet" type="text/css" href="base.css?v=1234"> 
```

或者：

```
<link rel="stylesheet" type="text/css" href="base_1234.css"> 
```

但是在 css 文件中引用的图像呢？

```
// Inside base.css 
background: url(/img/logo.png)

// Is this necessary(?):
background: url(/img/logo.png?v=1234) 
```

还是会`/img/logo.png`在base.css更改文件名时重新加载`base.css?v=1234`或`base_1234.css`自动？

另外，`src`for `img`-tags 中的图像呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-11T23:53:56.893

浏览器在确定绝对路径后发出这些请求，因此如果您以这种方式“缓存清除”静态资产，则无论在何处调用，您都需要单独为每个文件执行此操作。但是，您可以通过在后端将其设置为变量来使其更轻松。

您可以将字符串附加为变量，您只需在后端的一个位置进行更新，可能与 LESS 或 SASS 之类的 CSS 预处理器一起获取所有图像。

或者通过将版本添加到基本 url (site.com/folder/styles.css => site.com/v123/folder/styles.css) 来使用相对路径。这可以添加到您的应用程序中现有的静态资产基础 url 变量中，然后在服务器上您可以使用 UrlRewrite 去除版本。这样，从您的 CSS 中相对引用的所有图像也会自动获取版本，具有相同的“缓存破坏”效果。

您可以更加聪明，并将变量自动设置为构建过程的一部分，作为版本控制系统的最后一次提交哈希 - 这也将使未来的调试更容易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T23:02:13.100

根据我的经验，css 的缓存破坏不是递归的。因此，需要在 css 中引用的图像末尾的查询字符串来破坏缓存。

为了确保所有图像都是新鲜的，您可能还需要使用查询字符串版本 (img.png?v=1234) 缓存半身像。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-13T08:16:43.843

Chrome 似乎是浏览器中最糟糕的一个，因为它没有更新它的缓存（*可能是由于它使用了新的预测缓存方法*），而做到这一点的方法确实是使用**querystring**。

本[**网站**](http://www.ajaymatharu.com/how-to-prevent-image-from-caching-in-javascript/)更进一步，使用附加到所有标签的简单 JavaScript`Date().getTime();`方法（***带或不带 jQuery ）。***`img`

> 另一种解决方案是编写一个 javascript 代码，这样浏览器就不会从缓存中获取图像并每次都加载它。

上面的好处是，为了查询字符串，不需要单独的图像文件重命名，因为 JavaScript 一次性处理了这个。

虽然它确实使用单行 JavaScript 来完成此操作，但它不像跟踪`img`大型 CSS 文件中的每个元素那样需要大量维护，这可能需要时间并增加文件大小。

# sql - 透视表值函数

> ID：11301005
> 
> 赞同：3
> 
> 时间：2012-07-02T20:52:44.163
> 
> 标签：sql, sql-server

我有一个返回两列的 TVF：“测量”（名称）和“分数”，该测量的数字分数：

```
dbo.ScoringFunction(param1, param2, ..., paramN)
Measure   Score
-------   -----
measure1  10
measure2  5
...       ...
measureN  15 
```

我正在针对包含其参数的大量行运行此函数：

```
Name   Param1   Param2   ...   ParamN
----   ------   ------         ------
Daniel 12       5              6
etc. 
```

我正在尝试找到一种方法来在确定这些分数的参数旁边显示度量及其分数：

```
Name   Param1   Param2   ...   ParamN   measure1   measure2   ...   measureN
----   ------   ------         ------   --------   --------         --------
Daniel 12       5              6        10         5                15
etc. 
```

到目前为止，我已经尝试使用数据透视表，但这很棘手，因为被透视的数据包含在 TVF 而不是静态表中。我也尝试过使用 CROSS APPLY，但是一旦我有了数据（测量和分数），我仍然无法将其转换为格式良好的行。

如果有人有任何想法，他们将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T08:57:38.587

在不改变太多（希望如此）的情况下，我会*在函数中*进行旋转，然后在 CROSS APPLY 中使用该函数并拉出列。因此，如果您的功能是这样的：

```
CREATE FUNCTION dbo.ScoringFunction (*parameters*)
RETURNS TABLE
RETURN (

SELECT Measure, Score
FROM …

) 
```

然后我会像这样重写它：

```
CREATE FUNCTION dbo.ScoringFunction (*parameters*)
RETURNS TABLE
RETURN (

**WITH originalSelect AS (**
  SELECT Measure, Score
  FROM …
**)
SELECT
  *measure1*,
  *measure2*,
  …
FROM originalSelect
PIVOT (
  MAX(Score) FOR Measure IN (*measure1*, *measure2*, …)
) p**

) 
```

并在最终查询中使用它，如下所示：

```
SELECT
  t.Name,
  t.*param1*,
  t.*param2*,
  …
  x.*measure1*,
  x.*measure2*,
  …
FROM atable t
CROSS APPLY dbo.ScoringFunction (t.*param1*, t.*param2*, …) x 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T23:31:07.390

如果你创建一个看起来像这样的函数：

```
CREATE FUNCTION [dbo].[fGetSpecificMeasures]
(
    @HeightScore INT
    , @WeightScore INT
    , @TvScore INT
)
RETURNS TABLE
RETURN
(
    SELECT
        Final.Height AS tv_height_score
        , Final.[Weight] AS tv_weight_score
        , Final.TV AS tv_score
    FROM
    (
        SELECT measure, score FROM ScoringRubric WHERE measure = 'Height' AND @HeightScore BETWEEN bottom_of_range AND top_of_range
            UNION ALL
        SELECT measure, score FROM ScoringRubric WHERE measure = 'Weight' AND @WeightScore BETWEEN bottom_of_range AND top_of_range
            UNION ALL
        SELECT measure, score FROM ScoringRubric WHERE measure = 'TV' AND @TvScore BETWEEN bottom_of_range AND top_of_range
    ) Base
    PIVOT
    (
        MAX(score) 
        FOR measure
        IN
        (
            [Height]
            , [Weight]
            , [TV]
        )
    ) Final
);
GO 
```

一个看起来像这样的：

```
CREATE FUNCTION [dbo].[fGetMeasureScore]
(
    @Measure VARCHAR(50)
    , @Value INT
)
RETURNS TABLE
RETURN
(
    SELECT
        score
    FROM ScoringRubric
    WHERE measure = @Measure
        AND @Value BETWEEN bottom_of_range AND top_of_range
);
GO 
```

然后，您可以使用以下任一方式获取数据：

```
DECLARE @User VARCHAR(50) = 'Daniel'

SELECT
    UserProfile.*
    , HeightScore.score AS tv_height_score
    , WeightScore.score AS tv_weight_score
    , TvScore.score AS tv_score
FROM UserProfile
INNER JOIN ScoringRubric HeightScore
    ON HeightScore.measure = 'Height'
    AND UserProfile.height BETWEEN HeightScore.bottom_of_range AND HeightScore.top_of_range
INNER JOIN ScoringRubric WeightScore
    ON WeightScore.measure = 'Weight'
    AND UserProfile.[weight] BETWEEN WeightScore.bottom_of_range AND WeightScore.top_of_range
INNER JOIN ScoringRubric TvScore
    ON TvScore.measure = 'TV'
    AND UserProfile.TV BETWEEN TvScore.bottom_of_range AND TvScore.top_of_range
WHERE UserProfile.name = @User

SELECT
    *
FROM UserProfile
CROSS APPLY dbo.fGetSpecificMeasures(height, [weight], TV)
WHERE name = @User

SELECT
    UP.*
    , HeightScore.score AS tv_height_score
    , WeightScore.score AS tv_weight_score
    , TvScore.score AS tv_score
FROM UserProfile UP
CROSS APPLY fGetMeasureScore('Height', UP.height) HeightScore
CROSS APPLY fGetMeasureScore('Weight', UP.[weight]) WeightScore
CROSS APPLY fGetMeasureScore('TV', UP.TV) TvScore
WHERE UP.name = @User 
```

我真的不知道您会发现哪一个最适合您的用途。如果您有任何问题，请告诉我。

至于你原来的问题，如果这是功能：

```
CREATE FUNCTION [dbo].[fGetMeasureScoresOriginal]
(
    @HeightScore INT
    , @WeightScore INT
    , @TvScore INT
)
RETURNS TABLE
RETURN
(
    SELECT measure, score FROM ScoringRubric WHERE measure = 'Height' AND @HeightScore BETWEEN bottom_of_range AND top_of_range
        UNION ALL
    SELECT measure, score FROM ScoringRubric WHERE measure = 'Weight' AND @WeightScore BETWEEN bottom_of_range AND top_of_range
        UNION ALL
    SELECT measure, score FROM ScoringRubric WHERE measure = 'TV' AND @TvScore BETWEEN bottom_of_range AND top_of_range
)
GO 
```

然后你可以像这样编写查询和数据透视：

```
SELECT
    Final.name
    , Final.OriginalHeight AS height
    , Final.OriginalWeight AS [weight]
    , Final.OriginalTv AS TV
    , Final.Height AS tv_height_score
    , Final.[Weight] AS tv_weight_score
    , Final.TV AS tv_score
FROM
(
    SELECT
        UP.name
        , UP.height AS OriginalHeight
        , UP.[weight] AS OriginalWeight
        , UP.TV AS OriginalTv
        , Measures.measure
        , Measures.score
    FROM UserProfile UP
    CROSS APPLY dbo.fGetMeasureScoresOriginal(UP.height, UP.[weight], UP.TV) Measures
    WHERE UP.name = @User
) Base
PIVOT
(
    MAX(score)
    FOR measure
    IN
    (
        [Height]
        , [Weight]
        , [TV]
    )
) Final 
```

**编辑**：刚刚意识到我没有回答原来的问题。现在添加。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T06:18:30.970

如果您想旋转一组静态行，您可以使用我[在此处](https://stackoverflow.com/questions/10704428/how-to-write-a-query-using-self-join-on-a-table-with-huge-data/10737836#10737836)描述的技术。

重新发布示例，因此它将是不同的表，但我认为该技术也可以应用于您的情况。

```
SELECT
  Customers.CustID,
  MAX(CASE WHEN CF.FieldID = 1 THEN CF.FieldValue ELSE NULL END) AS Field1,
  MAX(CASE WHEN CF.FieldID = 2 THEN CF.FieldValue ELSE NULL END) AS Field2,
  MAX(CASE WHEN CF.FieldID = 3 THEN CF.FieldValue ELSE NULL END) AS Field3,
  MAX(CASE WHEN CF.FieldID = 4 THEN CF.FieldValue ELSE NULL END) AS Field4
  -- Add more...

  FROM Customers 

  LEFT OUTER JOIN CustomFields CF
  ON CF.ID = Customers.CustID

  WHERE Customers.CustName like 'C%'

  GROUP BY Customers.CustID 
```

# android - 让一个安卓应用适用于多个屏幕

> ID：11301008
> 
> 赞同：0
> 
> 时间：2012-07-02T20:52:49.873
> 
> 标签：android

如果我使用 android 2.3.3 制作一个 android 应用程序并在完成后让它适用于其他设备，这是个好主意吗？因为我还没有为多种屏幕尺寸开发应用程序。会不会更费时间？我必须采取哪些预防措施？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T21:08:45.383

开始此类研究的最佳地点是 Google 的 Android 开发网站，该网站有大量有用的指南和资源。这里有两个链接可以帮助您解决问题：

[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

[http://developer.android.com/training/multiscreen/screensizes.html](http://developer.android.com/training/multiscreen/screensizes.html)

另一个讨论布局。开发指南有一堆小教程教你如何使用以及许多视图之间的区别。

[http://developer.android.com/guide/topics/ui/declaring-layout.html](http://developer.android.com/guide/topics/ui/declaring-layout.html)

总的来说，你绝对应该在开始编码时考虑到多种屏幕尺寸，尽管这伴随着良好的 android 编码实践。通常，熟悉以`android:layout_`例如开头的 xml 属性`android:layout_width`以及`android:layout_weight`需要管理图像资源文件夹的方式。根据我的经验，一旦您对 Android 上的布局工作方式感到满意，确保它们在多个屏幕上工作就很容易了。在深入了解之前对它有一个基本的了解，将为您节省很多头痛和以后的重新编码。不要害怕制作简单的应用程序来测试您正在学习的不同布局技术。祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T20:56:24.437

我认为您应该从自己的角度进行更多研究，但这里有一个链接可以帮助您入门。

[http://developer.android.com/training/basics/supporting-devices/screens.html](http://developer.android.com/training/basics/supporting-devices/screens.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T21:01:49.317

首先确定您愿意支持的最低 SDK 版本（`minSdkVersion="8"`例如）。

其次，针对 Android 4.1 构建您的应用程序并设置您的`targetSdkVersion="16"`. 这样做将允许您在较新的设备上使用一些更漂亮的 UI 功能（即 Holo 主题）。

第三，在运行 SDK 8 到 16 的设备上使用模拟器广泛测试您的应用程序。如果您从较新的 API 进行任何方法调用，请确保您阻止旧设备调用这些方法（因为它们将无法被识别并且会使您的应用程序崩溃在运行时）。此时，您可以针对不同的屏幕尺寸（即手机和平板电脑）优化您的应用程序。

# ruby-on-rails - 在 rails 中手动编辑 schema.rb 是否安全？

> ID：11301009
> 
> 赞同：7
> 
> 时间：2012-07-02T20:52:55.860
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, schema, database-migration

我遇到了一个问题，我在一个 rails 项目的两个分支上工作，每个项目都有一个迁移来添加一个列。当时，`rake db:migrate:reset`导致一个问题，我完全依靠我`schema.rb`来正确表示我的数据库的状态。有一次，我遇到了一个问题，分支 A 添加的列进入了分支 B 的架构。由于`migrate:reset`不是一个选项，我求助于手动编辑架构文件。我提交了这个更改，基本上从分支 A 中删除了我在分支 B 的 schema.rb 中不需要的列。

在我将分支 A 合并到 master 之后出现问题。当我尝试将分支 B 重新设置为 master 时，我仍然在 B 中提交以删除模式文件中的列（现在已变得相关，因为它在 master 中）。Git 没有发现冲突并自动合并它。在我的 rebase 结束时，我发现我的架构与我在 master 中的架构不一致。

我的解决方法是再次编辑架构文件并将先前删除的列手动添加回架构文件。我的问题是：这被认为是非常规的吗？危险的？哈基？

现在它涉及一列，但如果这涉及多列删除/添加（危险？）解决方案可能会导致更多问题和 db/schema.rb 不一致。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-03T02:49:06.837

通常认为编辑`schema.rb`文件是一种不好的做法。

根据[Rails 迁移指南](http://guides.rubyonrails.org/migrations.html)：

> 迁移虽然可能很强大，但并不是您的数据库模式的权威来源。该角色属于 db/schema.rb 或 Active Record 通过检查数据库生成的 SQL 文件。它们不是为编辑而设计的，它们只是代表数据库的当前状态。

`schema.rb`*每次运行新迁移时*都会更新：

> 请注意，运行 db:migrate 还会调用 db:schema:dump 任务，该任务将更新您的 db/schema.rb 文件以匹配您的数据库结构。

我建议只花一些时间整理一下，让`schema.rb`文件回到正轨，并纠正到最新的迁移集。

# c++ - 没有虚拟对象时应该使用私有继承吗？

> ID：11301011
> 
> 赞同：1
> 
> 时间：2012-07-02T20:52:58.657
> 
> 标签：c++, inheritance, private, encapsulation

在 C++ 中，如果我有一个类`Base`是私有基类`Derived`但`Base`没有虚函数，那么用类中的封装代替继承会更干净`Encapsulate`吗？我想在这种情况下继承的唯一好处是可以在派生类中直接访问基类，而不是通过`memberVariable`。一种或另一种做法被认为更好，还是更多的是个人风格问题？

```
class Base {
  public:
    void privateWork();
    // No virtual member functions here.
};

class Derived : Base {
  public:
    void doSomething() {
      privateWork();
    }
};

class Encapsulate {
    Base memberVariable;

  public:
    void doSomething() {
      memberVariable.privateWork()
    }
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T20:55:34.260

如果没有`virtual`函数，则不应在 OO 中使用继承。请注意，这并不意味着一定不能使用它，在少数（有限的）情况下，您可能需要（ab）将继承用于 OO 以外的其他目的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T06:30:02.357

请记住，继承模型“Liskov 替换”：当且仅当您可以将 Foo 变量传递给期望 Bar 的每个函数时，Foo 才是 Bar。私有继承不会对此建模。它对组合进行建模（Foo 是根据 Bar 实现的）。

现在，您几乎应该总是使用第二个版本，因为它更简单并且更好地表达了意图：对于不了解它的人来说，它不会令人困惑。

但是，有时，私有继承很方便：

```
class FooCollection : std::vector<Foo>
{
public:
    FooCollection(size_t n) : std::vector<Foo>(n) {};

    using std::vector<Foo>::begin;
    using std::vector<Foo>::end;
    using std::vector<Foo>::operator[];
}; 
```

这允许您重用 的某些功能，`vector`而无需手动转发 begin、end 和`operator[]`.

在这种情况下，您根本没有多态性：这不是继承，这是组合是伪装；您无法将 a`FooCollection`用作向量。特别是，您不需要虚拟析构函数。

# c# - 在多个目录上运行网页

> ID：11301012
> 
> 赞同：0
> 
> 时间：2012-07-02T20:53:01.547
> 
> 标签：c#, asp.net

我编写了一个网页，它读取输入文件并输出仪表板。每个月都会有一个新的输入文件（与其他文件一起存储在它自己的子目录中），我希望能够归档旧文件并将它们显示在下拉菜单中作为显示选项。我可以读取主目录并获取所有目录的列表，但我不知道如何使用所选目录作为参数运行网页。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T00:39:46.373

我通过将下拉列表放入 Web 代码中解决了这个问题，以便它在页面加载时显示并且仪表板的 html 被隐藏。当进行选择时，表格被填充并可见。这只是意味着我的表格顶部总是有一个下拉列表，但我认为这是一件好事。

# django - 如何访问 ndb 查询对象客户端中的项目？

> ID：11301017
> 
> 赞同：0
> 
> 时间：2012-07-02T20:53:13.120
> 
> 标签：django, google-app-engine, webapp2

我正在使用 appengine、django 和 webapp2，并且正在发送一个查询对象客户端，这样

```
{{ exercise_steps }} 
```

返回

```
Query(kind='ExStep') 
```

和

```
{{ exercise_steps.count }} 
```

返回 4

我正在尝试将变量 exercise_steps 放入一些 javascript 代码中，并且需要遍历 javascript（不是 django）循环中的项目，但我似乎无法访问这些项目。

我试过 {{ exercise_steps|0 }}, {{ exercise_steps[0] }}, {{ exercise_steps.0 }} 但它什么也没返回。我知道我可以使用 django 循环来做到这一点，但是有没有一种方法可以使用类似的方法通过 javascript 循环访问查询中的对象

```
for (var i = 0; i < {{exercise_steps.count}}; i++) {
    console.log({{ exercise_steps.i.location }})
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T22:20:57.143

您不能混合客户端代码和模板代码......当 javascript 运行时，您的 python 代码已经执行。您没有将 python 对象发送到 javascript - 它是在生成 HTML 时执行的。

您需要在 JS 中重新创建数组，或者让 ajax 调用从 python 返回一个数组。

```
var steps = [
    {% for step in exercise_steps %}
         {{ step.location }}{% if not forloop.last %},{% endif %}
    {% endfor %}]; // now your python iterable is a JS array. 
```

# python - 如何使“挖掘社交网络”中的介绍性社交网络代码起作用？

> ID：11301022
> 
> 赞同：1
> 
> 时间：2012-07-02T20:53:42.323
> 
> 标签：python

我从以下位置输入了所有代码：[https ://github.com/ptwobrussell/Mining-the-Social-Web/blob/master/python_code/introduction__retweet_visualization.py](https://github.com/ptwobrussell/Mining-the-Social-Web/blob/master/python_code/introduction__retweet_visualization.py)

但是，我得到的只是“退出代码 0”并且没有任何输出。如何创建作为此代码目标的转推图？

```
# =*= coding: utf-8 -*-

import sys
import os 
import json
import re
import webbrowser
import codecs
import twitter
import networkx as nx

# Your query
Q = sys.argv[0]

# An HTLML page that we'll inject Protovis consumable data into
HTML_TEMPLATE =         '~/PyCharmProjects/twitter_movements/web_code/protovis/twitter_retweet_graph.html'
OUT = os.path.basename(HTML_TEMPLATE)
OUT_DIR = 'out'

# Writes out a dOT language file that can be converted into
# an image by Graphbiz
def write_dot_output(g, out_file):

    out_file += ".dot"

    if not os.path.isdir(OUT_DIR):
        os.mkdir(OUT_DIR)

    try:
        nx.drawing.write_dot(g, os.path.join(OUT_DIR, out_file))
        print >> sys.stderr, 'Data file written to: %s' % os.path. join(os.getcwd(), OUT_DIR, out_file)
    except (ImportError, UnicodeEncodeError):

        # The next block helps to fix a UnicodeEncodeError that occurs in write_dot.

        dot = ['"%s" -> "%s" [tweet_id+%s]' % (n1, n2, g[n1][n2]['tweet_id'])
               for (n1, n2) in g.edges()]
        f = codecs.open(os.path.join(os.getcwd(), OUT_DIR, out_file), 'w', encoding='utf-8')
        f.write('''strict digraph {
    %s
    }''' % (';\n'.join(dot), ))
        f.close()

        print >> sys.stderr, 'Data file written to: %s' % f.name

        return f.name

# Writes out an HTML page that can be opened in the browser
# that displays a graph
def write_protovis_output(g, out_file):
nodes = g.nodes()
indexed_nodes = {}

idx = 0
for n in nodes:
    indexed_nodes.update([(n, idx,)])
    idx += 1

links = []
for n1, n2 in g.edges():
    links.append({'source' : indexed_nodes[n2],
                  'target' : indexed_nodes[n1]})

    json_data = json.dumps({"nodes" : [{"nodeName" : n} for n in nodes], "links" : links}, indent=4)
    html = open(HTML_TEMPLATE).read() % (json_data,)
    if not os.path.isdir(OUT_DIR):
        os.mkdir(OUT_DIR)
    f = open(os.path.join(os.getcwd(), OUT_DIR, out_file + ".html"), 'w')
    f.write(html)
    f.close()

    print >> sys.stderr, 'Data file written to: %s' % f.name

    return f.name

# Given a tweet, pull out any retweet origins in it and return as a list
def get_rt_origins(tweet):
    # Regex adapted from
    # http://stackoverflow.com/questions/655903/python-regular-expression-for-retweets
    rt_patterns = re.compile(r"(RT|via)((?:\b\W*@\w+)+)", re.IGNORECASE)
    rt_origins = []

    try:
        rt_origins += [mention.strip() for mention in rt_patterns.findall(tweet)[0][1].split()]
    except IndexError, e:
        pass

    return [rto.strip("@") for rto in rt_origins]

# Get some search results for a query
twitter_search = twitter.Twitter(domain="search.twitter.com")
search_results = []
for page in range(1,6):
    search_results.append(twitter_search.search(q=Q, rpp=100, page=page))

# Build up a graph data structure
    g = nx.DiGraph()

    all_tweets = [tweet for page in search_results for tweet in page['results']]
    for tweet in all_tweets:
        rt_origins = get_rt_origins(tweet['text'])
        if not rt_origins:
            continue
        for rt_origin in rt_origins:
            g.add_edge(rt_origin, tweet['from_user'], {'tweet_id': tweet['id']})

# Print out some stats
print >> sys.stderr, "Number nodes:", g.number_of_nodes()
print >> sys.stderr, "Num edges:", g.number_of_edges()
print >> sys.stderr, "Num connected components:", len(nx.connected_components(g.to_undirected()))
print >> sys.stderr, "Node degrees:", sorted(nx.degree(g))

# Write Graphviz output
write_dot_output(g, OUT)

# Write Protovis output and open in browser
protovis_output = write_protovis_output(g, OUT)
webbrowser.open('file://' + protovis_output) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T20:57:52.567

使用 sys.stdout 而不是 sys.stderr，您应该可以正确看到输出

```
# Print out some stats
print >> sys.stdout, "Number nodes:", g.number_of_nodes()
print >> sys.stdout, "Num edges:", g.number_of_edges()
print >> sys.stdout, "Num connected components:", len(nx.connected_components(g.to_undirected()))
print >> sys.stdout, "Node degrees:", sorted(nx.degree(g)) 
```

在此代码中的每个地方，您都试图写入标准错误而不是标准输出。

或者通过将 stderr 重定向到 stdout 来运行这个程序

```
python filename 2>&1 
```

# jquery - 如果 elem SlideDown .. 然后 slideUp jquery

> ID：11301032
> 
> 赞同：0
> 
> 时间：2012-07-02T20:54:33.567
> 
> 标签：jquery, slidedown, slideup

我有这个 jquery 代码

```
$(document).ready(function(){
  $(".C_bmiShowTableWord").click(function () {
    $(".C_bmiShowTable").slideDown();
  });
}); 
```

如果我点击`C_bmiShowTableWord`它会向下滑动`C_bmiShowTable`

`C_bmiShowTableWord`如果我单击并且`C_bmiShowTable`已经向下滑动，我想制作它，然后向上滑动.. 反之^_^

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T20:55:48.960

```
$(document).ready(function(){
  $(".C_bmiShowTableWord").click(function () {
    $(".C_bmiShowTable").slideToggle();
  });
}); 
```

只需使用[slideToggle](http://api.jquery.com/slideToggle/)代替。

# c# - 使用 Facebook 图形 API 以 REVERSE 时间顺序检索状态评论

> ID：11301034
> 
> 赞同：1
> 
> 时间：2012-07-02T20:54:40.230
> 
> 标签：c#, facebook, facebook-graph-api

我正在尝试以反向时间顺序从 Facebook 的 Graph API 中检索状态评论，即最新的评论应该在最前面。我不确定这是否可能。

我知道 Facebook 默认按时间降序排列帖子，默认情况下评论按时间升序（最旧的在顶部）。默认情况下，我指的是 Facebook.com 以及从 API 中检索它们的方式。

使用 Graph API，我可以按降序检索状态，但注释按升序返回。我想从 API 中以相反的顺序获取评论，而不必在我的程序中对它们进行排序。原因是程序被限制为它将下载的评论数，因此设置 limit=xx 实际上会检索前 xx 条评论，而不是最新的 xx 条评论。这对我没有好处，因为如果一个状态有 500 条评论，并且 xx=100，它总是会检索到相同的评论集（前 100 条要发布）。

我能找到的 Html 请求的最佳参数是“order_by”，它查找时间/日期参数（updated_time），但这实际上不起作用，因为它已经按 updated_time 排序（但升序）。如果可能，我想指定 order_by 降序 updated_time。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T15:20:38.730

使用 API 没有直接的方法来执行此操作，但实现此工作的一种方法是检索状态的所有注释，将它们分配给一个数组，然后以相反的顺序循环遍历结果。

下面的示例从 Guinness Ireland 页面获取最后的状态更新，并将所有消息分配到一个数组中。一旦我们有了这个数组，我们就可以用循环输出结果。

**示例：**
$data = file_get_contents('https://graph.facebook.com/GuinnessIreland/statuses?limit=1&access_token=' . $ACCESS_TOKEN);

$comments = json_decode($data);
$messages = ($comments->data[0]->comments->data);

for ($counter = count($messages); $counter >= 0; $counter = $counter - 1) {
      echo $messageArray[$counter]->message;
      echo $messageArray[$counter]->created_time;
}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T07:18:45.340

您可以通过此 url 使用 get 请求获取评论。您将获得 json 响应。

[https://graph.facebook.com/](https://graph.facebook.com/) "StatusID"/comments?limit=500&access_token="accessToken"

StatusID=132343454_54346345 用户ID statusid accessToken=用户访问令牌。

你会得到 JSon 响应。获取所有详细信息，例如评论的用户、commentid、消息……您将获得 JSON 响应。解析它们。通过在 JSON 页面底部的“page”对象中连接“next”字符串中的 url，检查下一页上的评论。享受。

# javascript - 防止按钮永久消失

> ID：11301035
> 
> 赞同：2
> 
> 时间：2012-07-02T20:54:45.367
> 
> 标签：javascript, jquery

在下面的代码中，当我单击“投票”时，会显示投票结果屏幕，但是当我单击“返回投票”时，投票会重新显示，但“显示选项”按钮不再可见。单击“返回投票”时，是否有办法防止隐藏此按钮。

这是小提琴：http: [//jsfiddle.net/E2gku/2/](http://jsfiddle.net/E2gku/2/)

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

<script type="text/javascript" charset="utf-8" src="http://static.polldaddy.com/p/5968383.js"></script>
<noscript><a href="http://polldaddy.com/poll/5968383/">This is a test question ?</a></noscript>

<style>
.pds-pd-link {
display: none !important;
}
.pds-box {
    width: 200px !important;
}
.pds-input-label{
    width: auto! important;
}
.PDS_Poll{
    margin-bottom:15px;
}

</style>
<script type="text/javascript">

$(document).ready(function() {

    $('.pds-question').append('<input type="button" class="showanswer" value="Show Options"/>');

        $('.pds-vote').css('display' , 'none');
        $('.pds-answer').css('display' , 'none');
        $('.pds-vote-button').css('display' , 'none');
        $('.pds-view-results').css('display' , 'none'); 

    $('.showanswer').on('click', function () {

            $('.pds-vote').show();
             $('.pds-answer').show();
             $('.pds-vote-button').show();
             $('.pds-view-results').show();

        $('.showanswer').hide();
        $('.pds-question').append('<input type="button" class="hideanswer" value="Hide Options"/>');

        $('.hideanswer').on('click', function () {
                $('.pds-vote').hide();
                 $('.pds-answer').hide();
                 $('.pds-vote-button').hide();
                 $('.pds-view-results').hide();
                $('.showanswer').show();
                 $('.hideanswer').hide();
        });

});

});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T22:52:45.873

当用户单击返回问题时，您可以使用事件委托重新附加按钮：

```
$('body').on('click', '.pds-return-poll', function() {
    setTimeout(function(){
        $('.pds-question').append('<input type="button" class="showhideanswer" value="Hide Options"/>');
    }, 10);
}); 
```

我也干了你的代码，只是一点点：

```
$(document).ready(function() {
    $('.pds-answer, .pds-vote').css('display' , 'none');
    $('.pds-question').append('<input type="button" class="showhideanswer" value="Show Options"/>');

    $('body').on('click', '.pds-return-poll', function() {
        setTimeout(function(){
            $('.pds-question').append('<input type="button" class="showhideanswer" value="Hide Options"/>');
        }, 10);
    }).on('click', '.showhideanswer', function() {
        $('.pds-answer, .pds-vote').toggle();
        if (this.value == 'Show Options')
            $(this).val('Hide Options');
        else
            $(this).val('Show Options');
    });
}); 
```

[**JSF**](http://jsfiddle.net/ult_combo/E2gku/8/)中。

超时是因为您的默认函数优先，因此将此超时解释为延迟对象。

显然，随着按钮是动态添加的，它还需要事件委托，就像我上面的代码一样（或者重新绑定事件处理程序，你可以选择）。

​<strong>edit：修复了 Firefox 中的一个错误。

**编辑2：**再干一点。选择器现在只使用一次，所以我放弃了选择器缓存，因为`$(document).ready`' 选择器不能在`showhideanswer`'`click`处理程序中重复使用，因为出于某种原因，您的插件开发人员决定在您转到结果页面并返回投票页面，而不是重新使用相同的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T21:58:56.387

Polldaddy 不会隐藏您的按钮，而是会替换`.innerHTML`of`#PDI_container5968383`并因此完全删除您的新按钮。看看`PDV_go5968383()`PD 脚本中的函数：

```
function PDV_go5968383(){
    /* other code */
    // PDV_html5968383 is prepared HTML for the container
    _$("PDI_container5968383").innerHTML = PDV_html5968383;
    /* other code */
} 
```

这将删除您添加的所有内容。您可以在 PD 容器之外添加按钮并使用 CSS 定位它们。这将防止它们被删除。

# cordova - 用于 Phonegap 错误的 Google Anlytics 插件

> ID：11301037
> 
> 赞同：1
> 
> 时间：2012-07-02T20:54:49.813
> 
> 标签：cordova, google-analytics

我按照[这个](https://stackoverflow.com/questions/8097015/step-by-set-to-get-google-analytics-working-in-phonegap-1-2-0-on-ios-phonegapal)很棒的分步指南在我的 Cordova 项目中实现了 GA 插件。我运行该应用程序，然后单击“测试分析​​”链接（根据指南添加），分析成功。问题是大约 5 秒后，我收到了这个错误：

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-
[GoogleAnalyticsPlugin hitDispatched:]: unrecognized selector sent to instance 0x869e2c0' 
```

有人可以帮助解决这个问题吗？

我正在使用 xcode 4.3.3、Cordova 1.6.1。

提前谢谢你！

# html - 删除重复副本（html 扩展与非 html）

> ID：11301039
> 
> 赞同：0
> 
> 时间：2012-07-02T20:54:56.450
> 
> 标签：html, .htaccess, redirect

有没有办法让第一个 URL 重定向到第二个 URL？

[http://www.example.com/podcast/episode.html](http://www.example.com/podcast/episode.html)
[http://www.example.com/podcast/episode](http://www.example.com/podcast/episode)

有没有办法强制 .html 扩展名重定向到 URL 的非 html 版本，以免显示为同一页面的重复副本。

我目前的 htaccess 代码是：

```
 RewriteEngine On
    RewriteBase /

    #removing trailing slash

    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)/$ $1 [R=301,L]

    #non www to www

    RewriteCond %{HTTP_HOST} !^www\.
    RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L]

    #shtml

    AddType text/html .html
    AddHandler server-parsed .html

    #html

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^([^\.]+)$ $1.html [NC,L]

    #index redirect

    RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /index\.html\ HTTP/ 
    RewriteRule ^index\.html$ http://example.com/ [R=301,L] 
```

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T21:07:24.777

不完全确定我是否理解这个问题，但是如果您希望以 .html 结尾的任何内容都重定向到没有 .html 的相同 URL，这应该可以解决问题：

```
RewriteRule ^/(.*)\.html$ /$1 [R=301,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-11T13:12:06.897

这就是您如何仅将 html 重定向到非 html 的方法。

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ (/[^\ ]+)\.html\  [NC]
RewriteRule ^ %1 [L,R=301] 
```

# asp.net - 实体框架存储库模式架构

> ID：11301041
> 
> 赞同：0
> 
> 时间：2012-07-02T20:55:01.777
> 
> 标签：asp.net, vb.net, entity-framework, repository-pattern

学习实现实体框架。我有一个通用存储库。我想实现一个业务层。我知道如何为此进行编码，但我有点不确定在哪里执行此操作。

1.  我是否为每个实体创建一个业务层类？

例如，数据库有提供者、代理机构和联系人。我有一个通用存储库。我应该创建 ProviderManager、AgencyManager 和 ContactManager 吗？

1.  除了业务层之外，我是否需要每个实体的显式存储库？

例如，我需要一个显式的 ProviderRepository 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-10T17:42:08.103

> 我是否为每个实体创建一个业务层类？

不，这不是真的必要。业务可以使用多个存储库实体来执行业务操作。例如 CheckOutOrder 类可能包括支付、运输、库存等类型的存储库操作。它是业务层，它应该不知道持久存储是如何表示您的数据的。

解决您的第二个问题，存储库模式是您放在数据访问层上的一个抽象层（例如 ORM，如 ADO.NET/EF/NHibernate）IMO，如果您真的想使用存储库模式，请记住您正在引入一个额外的层。

您的存储库层可能如下所示：

```
IRespository<T>
RespositoryBase<T> : IRepository<T> 
```

此外，如果您想保持其通用性，那也没关系。但请确保您的通用函数保留在基类中。您想要在所有存储库中重用通用代码。现在您可以为每个实体创建一个专用类。

```
ProviderRepository : RepositoryBase<ProviderEntity> 
```

您还可以为每种类型的存储库引入抽象来表示实体特定的方法。

```
ProviderRepository : RepositoryBase<ProviderEntity>

ProviderRepository : RepositoryBase<ProviderEntity>, IProviderRepository 
```

实际的实现可能会有所不同，但这只是一个演示，只是为了给你一个先机。您会在 Internet 上找到大量的存储库模式实现。但我建议先了解它并保持简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-10T15:52:31.553

您可以使用 nuget 包 T4Scaffolding 为 EF 模型类轻松生成存储库。您可以根据以下给出的链接启动新的类项目并实现此存储库。然后在您的业务类中引用它。此存储库包括每个模型类的基本 CRUD 操作。有关更多详细信息[http://thedatafarm.com/data-access/using-t4scaffolding-to-create-dbcontext-and-repository-from-domain-classes/](http://thedatafarm.com/data-access/using-t4scaffolding-to-create-dbcontext-and-repository-from-domain-classes/)

# html - CSS：不透明度导致轻微的背景颜色变化

> ID：11301044
> 
> 赞同：0
> 
> 时间：2012-07-02T20:55:17.513
> 
> 标签：html, css, opacity, background-color

我为正文设置了特定的背景颜色。然后，我想使用另一个具有相同背景颜色但 opacity: .95 的 div 作为页面底部动画内容的掩码。这导致掩蔽 div 的颜色看起来略有不同。有没有办法解决？

[请参阅此处](http://i.stack.imgur.com/bHdI7.png)的屏幕截图和下面的示例 CSS。我在 Lion 上使用 Chrome 20。

```
body
{
    background: #3f3c45;  
}

#bottommask
{
    background: #3f3c45;
    opacity: .95;
} 
```

更新：请检查[这个小提琴](http://jsfiddle.net/dtailed/c6V8V/)演示这个问题

* * *

**更新的解决方案**：似乎至少在 Chrome 中，使用 -webkit-backface-visibility: hidden; 在面具 div 上解决了这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T21:02:23.657

这是从下方计算 5% 色彩增益的效果的问题。

三种方式：

*   计算，或
*   Firebug 颜色选择器的试验/错误，或
*   制作屏幕截图并采样透明颜色，然后将采样颜色应用于非 alpha 背景。

对于纹身部位，我已更改为稍微不同的颜色，以考虑不透明度的颜色变化。

```
body {
    background: #8d918f;
} 
```

![在此处输入图像描述](../Images/a97ac2ff96a6feb5812daebfd9f7932e.png)

# vba - 无法在 vba 脚本中保存工作表

> ID：11301045
> 
> 赞同：0
> 
> 时间：2012-07-02T20:55:32.417
> 
> 标签：vba, excel

我正在遍历目录中的所有 .xls 文档，并在每个文件组件“ThisWorkbook”中更改一行

一切正常，代码打开文件，我可以在运行时看到“test”行已插入 ThisWorkbook。但是保存不起作用。保存功能是否仅适用于工作表？如何保存组件中的更改？

```
 excelfile = Dir(path & "*.xls")
  Do While excelfile <> ""
    If excelfile <> "merni.xlsm" Then
        Set wbResults = Workbooks.Open(Filename:=path & excelfile)
        wbResults.Unprotect Password:=""
        DoEvents
        Set codeModule = wbResults.VBProject.VBComponents("ThisWorkbook").codeModule
        With codeModule.InsertLines(3, "test")
        End With
        wbResults.Save
        wbResults.Close
    End If
    excelfile = Dir
  Loop 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T21:33:19.843

这段代码对我有用

```
Sub AddTest()

    Dim wb As Workbook
    Dim cm As CodeModule

    Set wb = Workbooks.Open("C:\Users\dick\Book3.xls")
    Set cm = wb.VBProject.VBComponents.Item("ThisWorkbook").CodeModule
    cm.InsertLines 3, "test"
    wb.Save
    wb.Close

End Sub 
```

但是有了这条线

```
 With cm.InsertLines(3, "test"): End With 
```

它不会编译事件。InsertLines 是一种方法，不返回对象，所以我很确定您不能将它与 With 块一起使用。

# android - 搜索短信收件箱

> ID：11301046
> 
> 赞同：1
> 
> 时间：2012-07-02T20:55:33.013
> 
> 标签：android, sms, inbox

如何搜索短信收件箱并显示来自特殊号码的最新消息。例如搜索“999999999”并显示从该号码收到的最后一条消息。有什么办法吗？

我已使用此代码返回我的收件箱中的邮件计数

```
TextView view;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

  view = (TextView) findViewById(R.id.textView1);

  final Uri SMS_INBOX = Uri.parse("content://sms/inbox");
  Cursor c = getContentResolver().query(SMS_INBOX, null, null, null, null);
  int unreadMessagesCount = c.getCount();
  c.deactivate();

  view.setText(String.valueOf(unreadMessagesCount)); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T21:53:01.273

如果您只想要特定号码发送的最后一条消息，请使用：

```
final Uri SMS_INBOX = Uri.parse("content://sms/inbox");
Cursor cursor = getContentResolver().query(SMS_INBOX, null, "address = ?", 
        new String[] {"9999999999"}, "date desc limit 1");
if(cursor.moveToFirst()) {
    // Do something 
    Log.v("Example", cursor.getString(cursor.getColumnIndex("body")));
}
cursor.close(); 
```

[android中与SMS关联的数据库列有多少](https://stackoverflow.com/q/4022088/1267661)？是 SMS 中不同列的一个很好的参考。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T21:06:27.880

尝试：

```
final Uri SMS_INBOX = Uri.parse("content://sms/inbox");
Cursor c = getContentResolver().query(SMS_INBOX,null,null, null,"DATE desc");
if(c.moveToFirst()){
        for(int i=0;i<c.getCount();i++){
          String  body= c.getString(c.getColumnIndexOrThrow("body")).toString();
          String number=c.getString(c.getColumnIndexOrThrow("address")).toString();
          if(number=="999999999")
           {
            //get message body here
                    break;
           }
           else
            c.moveToNext();
         }
  }
 c.close(); 
```

# c++ - 仅专门化模板函数实现的一部分

> ID：11301048
> 
> 赞同：1
> 
> 时间：2012-07-02T20:55:34.580
> 
> 标签：c++, templates, boost, runtime, compile-time

我想知道是否有可能部分专门化模板化方法的行为，以防模板参数之一属于某种类型。

```
template<class T>
void Foo(T& parameter)
{
    /* some generic - all types - stuff */

    If(T is int) // this is pseudo-code, typeinfo? Boost?
    {
        /* some specific int processing which might not compile with other types */
    }

    /* again some common stuff */
} 
```

欢迎任何建议。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T21:01:37.850

如果您只想专门化函数的一部分，那么您只需使用专门的实现来分解出函数的一部分：

```
template<class T>
void Bar(T &t) {}

void Bar(int &i) {
    /* some specific int processing which might not compile with other types */
}

template<class T>
void Foo(T &t) {
    /* some generic - all types - stuff */

    Bar(t);

    /* again some common stuff */
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T21:00:07.500

当然：

```
// helper funciton
template <class T>
void my_helper_function(T& v)
{
  // nothing specific
}

void my_helper_function(int& v)
{
  // int-specific operations
}

// generic version
template <class T>
void Foo(T& v)
{
  /* some generic - all types - stuff */

  my_helper_function(v);

  /* again some common stuff */
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T20:56:57.300

是的，您可以提供模板函数的*特*化（只是不提供*部分*特化）。对于成员函数，您需要在包含模板的类之后的命名空间级别定义特化。

如果您的意思是只应该专门化部分函数，​​您不能直接这样做，但是您可以创建另一个实现该部分逻辑的模板化函数，专门化它并从您的模板中调用它。编译器将使用`Foo`模板的单一版本和`FooImplDetail`函数的适当版本。

# spring-batch - Spring Batch Writing 作为复杂的 XML 输出

> ID：11301049
> 
> 赞同：2
> 
> 时间：2012-07-02T20:55:42.967
> 
> 标签：spring-batch

我是 Spring Batch 的新手，我必须设计一个从数据库读取数据并将数据写入多个 XML 的任务，输出格式如下

```
 <Records xmlns"somevalue" ...>
  <Version>1.0</Version>
  <SequenceNo>1</SeqeunceNo>
  <Date>12/12/2012 12:12:12 PM<Date>
  <RecordCount>100</RecordCount><!--This is total number of Update and Insert txns-->
  <SenderEmail>asds@asds.com</SenderEmail>
  <Transaction type="Update">
    <TxnNo>1</TxnNo>
    <Details>
      <MoreDetails>
      </MoreDetails>
    </Details>
  </Transaction>
  <Transaction type="Insert">
    <TxnNo>2</TxnNo>
    <Details>
      <MoreDetails>
      </MoreDetails>
    </Details>
  </Transaction>
  <Transaction type="Update">
  </Transaction>
  <Transaction type="Update">
  </Transaction>
</Records> 
```

请建议我应该使用什么解组器以及如何开始。最终稍后我必须将其转换为多线程以进行优化和性能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T09:13:20.990

无需编写自己的作家。Spring 包含一个 MultiResourceItemWriter 将您的项目写入多个 xml。我正在使用 jaxb2Marshaller 编写复杂的 XML。

```
<bean id="multiItemWriter" class="org.springframework.batch.item.file.MultiResourceItemWriter"> 
    <property name="resource" value="file:data/output/output.xml"/> 
    <!-- <property name="resourceSuffixCreator" ref="resourceSuffixCreator"/> --> 
    <property name="saveState" value="true"/> 
    <property name="itemCountLimitPerResource" value="10"/> 
    <property name="delegate" ref="itemWriter" />
</bean>

<bean id="itemWriter" class="org.springframework.batch.item.xml.StaxEventItemWriter">
    <!-- <property name="resource" value="file:data/output/output.xml" /> -->
    <property name="marshaller" ref="customVrdbMarshaller" />
    <property name="rootTagName" value="recordings" />
    <property name="overwriteOutput" value="true" />
</bean>

<bean id="customVrdbMarshaller" class="org.springframework.oxm.jaxb.Jaxb2Marshaller">
    <property name="classesToBeBound">
        <list>
            <value>your.model.model.Albums</value>
        </list>
    </property>
</bean> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T09:11:28.990

您应该编写一个编写 XML 文件的 Writer。选择一个库并在 Writer 中使用它。

小心为未来的多线程优化编写线程安全代码。

Spring Batch 示例中的一个示例：[XML 处理](https://github.com/spring-projects/spring-batch/tree/master/spring-batch-samples)

# php - 使用 PHP 将单个 MySQL 表转换为多维 JSON

> ID：11301050
> 
> 赞同：0
> 
> 时间：2012-07-02T20:55:47.913
> 
> 标签：php, mysql, json

我的数据库中有一个名为`timeline_entries`. 此表包含以下字段： `id`, `headline`, `text`, `startDate`, `type`, `media`, `caption`, `credit`。该`id`字段用于通过 CMS 引用单个条目。

我已经研究出如何将数据导出为 JSON 并保存到文件中，但我正在努力寻找一种将其格式化为以下结构的方法；

```
 {
"timeline":
{
    "headline":"value",
    "type":"default",
    "startDate":"value",
    "text":"value",
    "asset":
               {
                   "media":"value",
                   "credit":"value",
                   "caption":"value"
               },
    "date": [
        {
            "startDate":"value",
            "type":"",
            "headline":"value",
            "text":"value",
            "asset":
               {
                   "media":"value",
                   "credit":"value",
                   "caption":"value"
               }
        },
        {
            "startDate":"value",
            "type":"",
            "headline":"value",
            "text":"value",
            "asset":
               {
                   "media":"value",
                   "credit":"value",
                   "caption":"value"
               }
        },
        {
            "startDate":"value",
            "type":"",
            "headline":"value",
            "text":"value",
            "asset":
            {
                "media":"value",
                "credit":"value",
                "caption":"value"
            }
        },
    ]
}
    } 
```

（请忽略粗制滥造的缩进，我还在习惯这个！）

我不得不用“值”替换实际数据，因为有些数据很长。

如您所见，第一组数据的格式需要与其余数据稍有不同，其余数据集放置在“日期”中，然后是`media`,`caption`和`credit`字段需要构造为“资产”的子集。

将有更多的数据行，而不仅仅是四行左右，所以我不能硬编码任何东西。

谁能帮我格式化一下？如果可能的话，我希望数据库端尽可能简单，但如果必须，可以更改它。也许我完全错了？任何帮助将非常感激。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T23:35:50.540

除了美观之外，JSON 的格式化一点都不重要，你有没有想过只使用 php [json_encode](http://php.net/manual/en/function.json-encode.php)方法并完成它？

# jquery - uplodify 一个一个上传文件

> ID：11301053
> 
> 赞同：0
> 
> 时间：2012-07-02T20:55:59.900
> 
> 标签：jquery, asp.net

我使用 uplodify 3.1 在 asp.net 中上传多个文件。它允许选择多个文件并上传它们。但我的问题是我必须为每个项目单击上传按钮。（aoto 属性设置为 false）这是我的代码：

```
<head>
<script src="Scripts/jquery.js" type="text/javascript"></script>
    <script src="Scripts/jquery.uploadify-3.1.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(window).load(
    function () {
        $("#<%=FileUpload1.ClientID%>").uploadify({
            'swf': 'Scripts/uploadify.swf',
            'uploader': 'Upload.ashx',
            'fileTypeDesc': 'Image Files',
            'fileTypeExts': '*.jpg;*.jpeg;*.gif;*.png',
            'multi': true,
            'formData': { 'galerisi': '<%=Session["galeriId"]%>' },
            'auto': false,
            'buttonImage': 'Styles/images/btnYorumEkle.png',
            'buttonText': 'Dosya seç'

        });
    }
);
    </script>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <div style="float: left;">
            <asp:FileUpload ID="FileUpload1" runat="server" />
        </div>
        <div style="left: 136px; position: absolute; top: 18px;">
            <a class="blueButton" href="javascript:$('#<%=FileUpload1.ClientID%>').uploadify('upload')">
                Yükle</a>
        </div>
        <div style="left: 205px; position: absolute; top: 18px;">
            <a class="blueButton" href="javascript:$('#<%=FileUpload1.ClientID%>').fileUploadClearQueue()">
                Temizle</a>
        </div>
    </div>
    </form>
</body> 
```

以及 ashx 文件中的代码：

```
<%@ WebHandler Language="C#" Class="Upload" %>

using System;
using System.Web;
using System.IO;

using System.Collections.Generic;
using System.Web.SessionState;
public class Upload : IHttpHandler, System.Web.SessionState.IRequiresSessionState
{

    galeriIslemleri galeriler = new galeriIslemleri();
    Tools tollar = new Tools();

    public void ProcessRequest(HttpContext context)
    {

        context.Response.ContentType = "text/plain";
        context.Response.Expires = -1;

        try
        {
                string galeriKlasoru = context.Request["galerisi"].ToString();

                var db = Tools.DBBaglanti();
                HttpPostedFile postedFile = context.Request.Files["Filedata"];

                string savepath = "";
                string tempPath = "";
                tempPath = "images/galeriler/" + galeriKlasoru;

                savepath = context.Server.MapPath(tempPath);

                string filename = postedFile.FileName;
                if (!Directory.Exists(savepath))
                    Directory.CreateDirectory(savepath);

                postedFile.SaveAs(savepath + @"\" + filename);
                context.Response.Write(tempPath + "/" + filename);
                context.Response.StatusCode = 200;

                galeriResimleri resimler = new galeriResimleri();
                resimler.galeriId = Convert.ToInt32(galeriKlasoru);
                resimler.resim = filename;
                db.galeriResimleris.InsertOnSubmit(resimler);
                db.SubmitChanges();

        }
        catch (Exception ex)
        {
            context.Response.Write("Error: " + ex.Message);
        }

    }

    public bool IsReusable
    {
        get
        {
            return false;
        }
    }
} 
```

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T21:02:04.867

参考：[http ://www.uploadify.com/documentation/uploadify/upload/](http://www.uploadify.com/documentation/uploadify/upload/)

似乎如果 Auto 设置为 false，那么您必须传递星号“*”作为 fileid 才能上传队列中的所有文件。例如：

```
<a class="blueButton" href="javascript:$('#%=FileUpload1.ClientID%>').uploadify('upload','*')">Yükle</a> 
```

# android - onEditorAction() 中的 null keyevent 和 actionid = 0 (Jelly Bean / Nexus 7)

> ID：11301061
> 
> 赞同：24
> 
> 时间：2012-07-02T20:56:31.600
> 
> 标签：android, android-edittext, android-4.2-jelly-bean

我有一个编辑文本，它在我的应用程序中用作搜索框。在我的 Nexus 7 上的 Jelly Bean 中，当我在我正在收听的文本框中输入一些内容并点击输入 KeyEvent = null 和 ActionId = 0 传递给 onEditorAction() 方法。有人遇到过这种情况么？我想这可能是一个错误。

在下面的第二个 if 语句中，我得到一个空指针，因为 actionId = 0 和 KeyEvent = null;

```
// Search field logic.
@Override
public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
    Log.d(TAG, "onEditorAction");
    if (event != null && event.getAction() != KeyEvent.ACTION_DOWN)
        return false;
    if (actionId == EditorInfo.IME_ACTION_SEARCH
            || event.getKeyCode() == KeyEvent.KEYCODE_ENTER) {
              .....Do some stuff();
     }
} 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-07-04T14:56:38.780

最终添加了对 KeyEvent 的空检查。感谢 commonsware 指出这发生在 3.0+ 上。似乎更像是一种解决方法而不是解决方案，但它确实有效。

```
// Search field logic.
@Override
public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
    Log.d(TAG, "onEditorAction");
    if (event != null && event.getAction() != KeyEvent.ACTION_DOWN) {
        return false;
    } else if (actionId == EditorInfo.IME_ACTION_SEARCH
        || event == null
        || event.getKeyCode() == KeyEvent.KEYCODE_ENTER) {
              .....Do some stuff();
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-04-20T19:29:03.277

我发现我的“类似错误的行为”是由于`imeActionLabel`事情复杂化。我之所以使用它，是因为在[Text Fields Guide](http://developer.android.com/guide/topics/ui/controls/text.html)中提到它是一种自定义返回键标签的方法。这是我在 Lollipop 中的测试结果，

**案例1：**默认，返回键符号=右尖括号

```
<EditText
    android:singleLine="true"
    android:inputType="textUri"/> 
```

onEditorAction 被调用一次。

*   KeyEvent = null，actionId = 5 =`EditorInfo.IME_ACTION_NEXT`
    *   如果返回 true，光标*保持*在 EditText 中，键盘*打开*
    *   如果返回false，光标*移动*到下一个可聚焦的，必要时*打开*键盘

**案例2** `imeOptions`：，返回键符号=复选标记

```
<EditText
    android:singleLine="true"
    android:inputType="textUri"
    android:imeOptions="actionDone"/> 
```

onEditorAction 被调用一次。

*   KeyEvent = null，actionId = 6 =`EditorInfo.IME_ACTION_DONE`
    *   如果返回 true，光标*保持*在 EditText 中，键盘*打开*
    *   如果返回 false，光标*停留*在 EditText 中，键盘*关闭*

**案例3** `imeActionLabel`：，返回键符号=“URdone”

```
<EditText
    android:singleLine="true"
    android:inputType="textUri"
    android:imeOptions="actionDone"
    android:imeActionLabel="URdone"/> 
```

onEditorAction 可以多次调用。

*   KeyEvent = null，actionId = 0

    *   如果返回 true，光标*保持*在 EditText，键盘*打开*，onEditorAction 不会被第二次调用
    *   如果返回 false，onEditorAction 被称为 SECOND 时间：
*   KeyEvent = `KeyEvent.ACTION_DOWN`, actionId = 0

    *   如果返回false，光标*移动*到下一个可聚焦，必要时*打开*键盘，onEditorAction 不会被第三次调用
    *   如果返回 true，则 onEditorAction 被调用第三次：
*   KeyEvent = `KeyEvent.ACTION_UP`, actionId = 0

    *   如果返回 true，光标*保持*在 EditText 中，键盘*打开*
    *   如果返回false，光标*移动*到下一个可聚焦的，必要时*打开*键盘

笔记：

我不确定 actionId = 0 是否来自`EditorInfo.IME_ACTION_UNSPECIFIED`或`EditorInfo.IME_NULL`。

如果下一个焦点是不可编辑的，则返回键符号变为左箭头。

您也可以使用`setOnFocusChangeListener`to override `onFocusChange`，它将根据上述游标行为调用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-07-15T18:11:58.007

旁边`KeyEvent.ACTION_UP`我们还需要捕捉`KeyEvent.ACTION_DOWN`。除非`KeyEvent.ACTION_UP`永远不会被传递给`EditText`所以我们的`onEditorAction`不会工作。例子：

```
@Override
public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
    final boolean isEnterEvent = event != null
            && event.getKeyCode() == KeyEvent.KEYCODE_ENTER;
    final boolean isEnterUpEvent = isEnterEvent && event.getAction() == KeyEvent.ACTION_UP;
    final boolean isEnterDownEvent = isEnterEvent && event.getAction() == KeyEvent.ACTION_DOWN;

    if (actionId == EditorInfo.IME_ACTION_DONE || isEnterUpEvent ) {
        // Do your action here
        performLogin();
        return true;
    } else if (isEnterDownEvent) {
        // Capture this event to receive ACTION_UP
        return true;
    } else {
        // We do not care on other actions
        return false;
    }
} 
```

您必须根据以下内容替换`EditorInfo.IME_ACTION_DONE`为正确的版本`EditorInfo.IME_ACTION_``android:imeOptions="actionNext"`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-30T11:05:12.680

值得注意的是，单击 Enter 可以获得多个事件（取决于 android 版本）。一种用于 KeyDown (KeyEvent.ACTION_DOWN)，一种用于 KeyUp (KeyEvent.ACTION_UP)。当我忘记检查我是否不小心启动了两个服务器调用以执行相同的操作时。

```
searchBox.setOnEditorActionListener(new OnEditorActionListener() {
// enter key in search box triggers search
@Override
public boolean onEditorAction(TextView v, int actionId,
        KeyEvent event) {
    if ((event != null && event.getAction() == KeyEvent.ACTION_UP) || event==null) {
        onSearchButtonClicked();
    }
    return true;
}
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-03-23T10:27:01.360

如果您自定义返回键，您不会发现真相。您需要在布局中设置***imeActionLabel***和***imeActionId***。如：

```
imeActionLabel="xxxx"
imeActionId = "6" 
```

在您的 java 代码中：

```
@Override
public boolean onEditorAction(TextView v, int actionId,  KeyEvent event) {
if (actionId == EditorInfo.IME_ACTION_DONE) {
     doSomeThing();
     return true;
   }

    return false;
} 
```

它会正常工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-03-13T14:47:08.240

默认情况下，任何输入事件的操作 ID 都设置为 0。

从[Android 文档](https://developer.android.com/reference/android/widget/TextView.OnEditorActionListener)：

> actionId int：动作的标识符。这将是您提供的标识符，或者 EditorInfo#IME_NULL 如果由于按下回车键而被调用。

所以处理输入键事件的正确方法是：

```
@Override
public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
    if (actionId == EditorInfo.IME_NULL) {
        // Handle return key here
        return true;
    }
    return false;
} 
```

# emacs - 如何将 DISPLAY 名称放在 GNU EMACS 的框架标题中

> ID：11301062
> 
> 赞同：1
> 
> 时间：2012-07-02T20:56:38.953
> 
> 标签：emacs

我通过 VNC 在 Windoze PC 上的多台显示器上使用 GNU EMACS。

（目前 5 - 4 大，我平板电脑上的 1 个小显示器。两个垂直 1200x1920，两个水平 1920x1200，加上小。）

我目前这样做的方式是在每台显示器上运行一个单独的 VNC。然后我打开一个 emacs，并使用 make-frame-other-display 在另一个 VNC 窗口中打开 emacs 的框架。

让事情变得更复杂 - 我在最新的 Ubuntu 系统上运行 VNC，但我在其他构建工具所在的非常过时的机器上运行 emacs。即 VNC 显示器与 emacs 不是同一台机器的本地显示。

我不是 xhost+，而是在每个 VNC 中打开一个 xterm，然后通过 ssh 连接到运行 emacs 的机器。这将创建 localhost:16.0 形式的 DISPLAYS。然后，我使用这些 localhost DISPLAY 使用 make-frame-on-display。

这变得令人困惑。

如果我在 xterm 窗口中留下“echo $DISPLAY”会有所帮助。或更改 xterm 的标题。

我想类似地更改 EMACS 框架的标题，以反映每个框架的当前显示。但是做

```
(defvar frame-title-specific-ag "emacs"
 "title element from frame-title-format that is specific to a particular emacs instance; andy glew")
(setq frame-title-format
  (list
    "frame=%F "
    (format "%s" frame-title-specific-ag)
    " " 'system-name
    " DISPLAY="
    (getenv "DISPLAY")
    " %b"
    " " (format "pid:%d" (emacs-pid))
    " user:"(user-login-name))
  ) 
```

只获取整个 emacs 的 DISPLAY 变量。

问：有没有办法找出与任何特定帧相关的显示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T21:07:25.697

要获取当前帧的显示名称，请使用

```
(frame-parameter nil 'display) 
```

或替换`nil`为特定框架以获取其显示的名称而不是当前的。例如，使用它来显示标题中的显示：

```
(setq frame-title-format
      '("DISPLAY=" (:eval (frame-parameter nil 'display)))) 
```

请注意，此表单被完全引用很重要，因此使用的列表有一个`:eval`告诉 Emacs 在呈现帧标题时运行代码。没有它，你可能会想写这样的东西：

```
(setq frame-title-format
      (list "DISPLAY=" (frame-parameter nil 'display))) 
```

但这不起作用。问题是当这个表单被评估时，函数调用会立即发生，结果是一个包含特定字符串的列表，该字符串是发生此评估的任何帧的名称，并且字符串不会神奇地改变。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-03T06:00:08.810

Eli Barzilay 向我们指出

```
(frame-parameter nil 'display) 
```

这是那里的90％。

下面将与当前选定的框架关联的显示放在其框架标题中。

```
(setq frame-title-format
  '(
     "DISPLAY="
     (:eval (frame-parameter nil 'display))
    )
  ) 
```

Glew：这会将当前选定帧的显示，在创建帧时（例如，通过 make-frame-on-display）放在标题中。由于这可能是一个不同的框架，在一个完全不同的显示中，它并不总是想要的。

unquoted, un-:eval'ed, 将当前选定帧的显示，在 setq 评估时，放在标题中。这甚至比想要的还要少。

这是我最终得到的结果：

我如上所述设置了默认的框架标题格式。但我并没有真正使用它，因为我挂钩了以下内容：

```
(defun ag-set-frame-title (frame)
  "set frame-title to glew preference, optional arg FRAME / default nil (currently selected frame)"
  (interactive)
  ;; TBD: make-variable-frame-local is deprecated in more recent versions of emacs
  ;; than the antiquated version at my work. use modify-frame-parameters instead
  (let (x)
    (setq x
      (concat
    (or frame-title-specific-ag "emacs")
    " " system-name
    " DISPLAY=" (frame-parameter frame 'display)
    " " (format "pid:%d" (emacs-pid))
    " user:" (user-login-name)
    ;;" " (buffer-name)
    )
      )
    (modify-frame-parameters frame (list (cons 'title x)))
    )
  )

;; TBD: this old emacs does not have modern hooks
(setq after-make-frame-functions '(ag-set-frame-title)) 
```

为了更好的衡量：

```
(defun ag-fix-frame-titles ()
  "run ag-set-frame-title on frame-lits"
  (interactive)
  (mapc 'ag-set-frame-title (frame-list))
  )
(ag-fix-frame-titles) 
```

注意：对于每个注释字符串，此处描述的修复可能仅在旧版本的 emacs 上需要，例如 21.4.1。@EliBarzilay 说他使用的任何版本的 emacs 都不需要。

伙计们，减去你想要的所有分数。真相。

# c# - C# 中的正则表达式模式

> ID：11301064
> 
> 赞同：-3
> 
> 时间：2012-07-02T20:57:06.133
> 
> 标签：c#, regex

> **可能重复：**
> [使用 C# 正则表达式删除 HTML 标记 C#](https://stackoverflow.com/questions/787932/using-c-sharp-regular-expressions-to-remove-html-tags)
> [中的正则表达式模式](https://stackoverflow.com/questions/11300729/regex-pattern-in-c-sharp)

我有这种输入如何将其转换为 C#

```
Input = <!--EVENT-GALLERY-VIEW WIDTH=500 --> 
Output = "<widget:EventList id=\"EventList1\" Width=\"500\" runat=\"server\" />"

Input = <!--EVENT-GALLERY-VIEW WIDTH=500 CATEGORY=SPORTS --> 
Output = <widget:EventList id=\"EventList1\" Width=\"500\" runat=\"server\" Category=\"Sport\" />" 
```

以下代码适用于第一种情况，但不适用于第二种情况**How can i Alter var pattern = @"(\w*)(\s*))*(\s*)(-->)";**

```
static void Main(string[] args)
        {
            var result = "<!--EVENT-GALLERY-VIEW WIDTH=500 -->";
            var pattern = @"(<!--)(\s*)(EVENT-GALLERY-VIEW)(\s*)((WIDTH)(=)(?<value>\w*)(\s*))*(\s*)(-->)|(<!--)(\s*)(EVENT-GALLERY-VIEW)(\s*)((WIDTH)(=)(?<value>\w*)(\s*))*(\s*)(-->)";
            var replaceTag = "<widget:EventList id=\"EventList@@id\" Width=\"@@value\" runat=\"server\" />";

            result = RegexReplaceWithUniqueTag(result, pattern, replaceTag);
        }

        static string RegexReplaceWithUniqueTag(string result, string pattern, string replaceTag)
        {
            Regex regex = new Regex(pattern);
            MatchCollection mc = regex.Matches(result);
            for (int i = mc.Count - 1; i >= 0; i--)
            {
                string newreplaceTag = replaceTag;
                newreplaceTag = newreplaceTag.Replace("@@id", i.ToString(CultureInfo.InvariantCulture));
                if (mc[i].Groups["value"] != null)
                    newreplaceTag = newreplaceTag.Replace("@@value", mc[i].Groups["value"].Value);
                result = result.Remove(mc[i].Index, mc[i].Length);
                result = result.Insert(mc[i].Index, newreplaceTag);
            }
            return result;
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T21:11:09.923

您可以使用`?`(0 或 1) 运算符将语句标记为可选，如下所示：

`(CATEGORY=(?<category>\w*))?`

这将找到 0 或 1 次出现`CATEGORY=[WORD]`。

您可能会发现其他一些有用的正则表达式运算符是：

`+`（1个或更多）
`*`（0个或更多）

[您可以在此处](http://msdn.microsoft.com/en-us/library/az24scfc.aspx)和[此处](http://en.wikipedia.org/wiki/Regular_expression)找到有关正则表达式字符的更多信息。

# http - 将多个 S3 文件请求到一个请求中

> ID：11301067
> 
> 赞同：1
> 
> 时间：2012-07-02T20:57:14.797
> 
> 标签：http, amazon-s3, request, cdn, minify

有没有办法在一个请求中从 S3（或任何 CDN）获取多个文件？

例如，我在 S3 上有四个文件：

*   example.com/cdn/one.js
*   example.com/cdn/two.js
*   example.com/cdn/three.js
*   example.com/cdn/four.js

我希望能够一次请求它们的任意组合。我目前必须分别包含它们：

```
<script src="example.com/cdn/one.js" />
<script src="example.com/cdn/two.js" /> 
```

但我想将它们作为一个请求包括在内：

```
example.com/cdn/code.js?one&two 
```

我考虑过将所需的组合组合到单个文件中，但是组合太多了，不切实际。我也考虑过将它们全部合并到一个文件中，但这会大得离谱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T17:12:21.907

首先：您的问题更像是一个 JS 问题，而不是与 S3 / CDN 相关的问题。并回答您的问题：*您不能在一个 http 请求中“组合”它们。*

如果你不想连接和缩小它们，你应该看看[**RequireJS**](http://requirejs.org/)，它可以处理你的脚本的加载——它是异步的，不会阻止浏览器渲染。

这是一篇关于异步加载的非常棒的文章：[**css-tricks.com - Thinking Async**](http://css-tricks.com/thinking-async/)，它将为您提供更好的洞察力。

**评论后编辑：**

实际上，您可以使用 PHP 即时连接和缩小您的 JS 文件，但这会给您的服务器带来额外的负载，并且您将失去从 CDN 获得的好处……另一种方法是使用构建系统，它包含在投入生产之前的一切。

有关此主题的更多信息，请查看以下链接：

*   [PHP5 - 缩小](https://github.com/mrclay/minify)
*   [PHP5 - 资产](https://github.com/kriswallsmith/assetic/)
*   [如何将 JavaScript 文件连接到一个文件中？](https://stackoverflow.com/a/301784/799155)

要在您的开发系统（如果它是 Mac）上进行即时小型化，您可能需要尝试[CodeKit](http://incident57.com/codekit/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T14:51:19.307

这是您可以做到的一种方法（假设您只使用 one&two&three 并注意 file=one&file=two&file=3）：

```
function getJs() {
  var url = window.location.toString();
  var query = url.split("?");
  var params = query.split("&");

  // iterate through array of params and write JS
  for (i=0; i<params.length; i++) {
    var name = params[i] + ".js";
    document.write("<script defer language='javascript' type='text/javascript' src='" + name + "'><\/sc" + "ript>");
  }
} 
```

这应该在页面加载后加载。然后在你的 HTML 中。我没有测试过这个，但我认为应该是你要找的。

# android - 使用 proguard 的未定义符号

> ID：11301068
> 
> 赞同：1
> 
> 时间：2012-07-02T20:57:17.127
> 
> 标签：android, proguard

我正在尝试使用 proguard，但在 ant 版本输出中出现了未定义的符号。

```
 [javac] D:\Java\CookTales\ICDB\src\org\BJ\Food4All\Activities\RecipeBook\Sel
ectContactsListViewAdapter.java:56: cannot find symbol
    [javac] symbol  : variable AppLanguageEnum
    [javac] location: class org.BJ.Food4All.Activities.RecipeBook.SelectContacts
ListViewAdapter
    [javac]                     if( CookTales.Instance().GetApplicationLanguage(
) == AppLanguageEnum.HEBREW )
    [javac] 
```

还为我的android应用程序的应用程序类的所有公共成员重复。

这是proguard的config.txt：

```
-target 1.6
-printusage unused.txt
-optimizationpasses 2
-printmapping mapping.txt
# -overloadaggressively
-dontusemixedcaseclassnames
-dontskipnonpubliclibraryclasses
-dontpreverify
-verbose
-dump class_files.txt
-printseeds seeds.txt

# The -optimizations option disables some arithmetic simplifications that Dalvik 1.0 and 1.5 can't handle.
-optimizations !code/simplification/arithmetic

# Keep classes which are entry points.
-keep public class * extends android.app.Activity
-keep public class * extends android.app.Service
-keep public class * extends android.content.BroadcastReceiver
-keep public class * extends android.content.ContentProvider
-keep public class * extends android.app.Application

-keep public class * extends View {
    public <init>(android.content.Context);
    public <init>(android.content.Context, android.util.AttributeSet);
    public <init>(android.content.Context, android.util.AttributeSet, int);
    public void set*(...);
}

# Also keep - Enumerations. Keep the special static methods that are required in
# enumeration classes.
-keepclassmembers enum  * {
    public static **[] values();
    public static ** valueOf(java.lang.String);
}

-keepclassmembers class * extends android.app.Application {
    static public CookTales Instance();
}

# Keep names - Native method names. Keep all native class/method names.
-keepclasseswithmembers,allowshrinking class * {
    native <methods>;
}

# Remove - System method calls. Remove all invocations of System
# methods without side effects whose return values are not used.
-assumenosideeffects public class java.lang.System {
    public static long currentTimeMillis();
    static java.lang.Class getCallerClass();
    public static int identityHashCode(java.lang.Object);
    public static java.lang.SecurityManager getSecurityManager();
    public static java.util.Properties getProperties();
    public static java.lang.String getProperty(java.lang.String);
    public static java.lang.String getenv(java.lang.String);
    public static java.lang.String mapLibraryName(java.lang.String);
    public static java.lang.String getProperty(java.lang.String,java.lang.String);
}

# Remove - Math method calls. Remove all invocations of Math
# methods without side effects whose return values are not used.
-assumenosideeffects public class java.lang.Math {
    public static double sin(double);
    public static double cos(double);
    public static double tan(double);
    public static double asin(double);
    public static double acos(double);
    public static double atan(double);
    public static double toRadians(double);
    public static double toDegrees(double);
    public static double exp(double);
    public static double log(double);
    public static double log10(double);
    public static double sqrt(double);
    public static double cbrt(double);
    public static double IEEEremainder(double,double);
    public static double ceil(double);
    public static double floor(double);
    public static double rint(double);
    public static double atan2(double,double);
    public static double pow(double,double);
    public static int round(float);
    public static long round(double);
    public static double random();
    public static int abs(int);
    public static long abs(long);
    public static float abs(float);
    public static double abs(double);
    public static int max(int,int);
    public static long max(long,long);
    public static float max(float,float);
    public static double max(double,double);
    public static int min(int,int);
    public static long min(long,long);
    public static float min(float,float);
    public static double min(double,double);
    public static double ulp(double);
    public static float ulp(float);
    public static double signum(double);
    public static float signum(float);
    public static double sinh(double);
    public static double cosh(double);
    public static double tanh(double);
    public static double hypot(double,double);
    public static double expm1(double);
    public static double log1p(double);
}

# Remove - Number method calls. Remove all invocations of Number
# methods without side effects whose return values are not used.
-assumenosideeffects public class java.lang.* extends java.lang.Number {
    public static java.lang.String toString(byte);
    public static java.lang.Byte valueOf(byte);
    public static byte parseByte(java.lang.String);
    public static byte parseByte(java.lang.String,int);
    public static java.lang.Byte valueOf(java.lang.String,int);
    public static java.lang.Byte valueOf(java.lang.String);
    public static java.lang.Byte decode(java.lang.String);
    public int compareTo(java.lang.Byte);
    public static java.lang.String toString(short);
    public static short parseShort(java.lang.String);
    public static short parseShort(java.lang.String,int);
    public static java.lang.Short valueOf(java.lang.String,int);
    public static java.lang.Short valueOf(java.lang.String);
    public static java.lang.Short valueOf(short);
    public static java.lang.Short decode(java.lang.String);
    public static short reverseBytes(short);
    public int compareTo(java.lang.Short);
    public static java.lang.String toString(int,int);
    public static java.lang.String toHexString(int);
    public static java.lang.String toOctalString(int);
    public static java.lang.String toBinaryString(int);
    public static java.lang.String toString(int);
    public static int parseInt(java.lang.String,int);
    public static int parseInt(java.lang.String);
    public static java.lang.Integer valueOf(java.lang.String,int);
    public static java.lang.Integer valueOf(java.lang.String);
    public static java.lang.Integer valueOf(int);
    public static java.lang.Integer getInteger(java.lang.String);
    public static java.lang.Integer getInteger(java.lang.String,int);
    public static java.lang.Integer getInteger(java.lang.String,java.lang.Integer);
    public static java.lang.Integer decode(java.lang.String);
    public static int highestOneBit(int);
    public static int lowestOneBit(int);
    public static int numberOfLeadingZeros(int);
    public static int numberOfTrailingZeros(int);
    public static int bitCount(int);
    public static int rotateLeft(int,int);
    public static int rotateRight(int,int);
    public static int reverse(int);
    public static int signum(int);
    public static int reverseBytes(int);
    public int compareTo(java.lang.Integer);
    public static java.lang.String toString(long,int);
    public static java.lang.String toHexString(long);
    public static java.lang.String toOctalString(long);
    public static java.lang.String toBinaryString(long);
    public static java.lang.String toString(long);
    public static long parseLong(java.lang.String,int);
    public static long parseLong(java.lang.String);
    public static java.lang.Long valueOf(java.lang.String,int);
    public static java.lang.Long valueOf(java.lang.String);
    public static java.lang.Long valueOf(long);
    public static java.lang.Long decode(java.lang.String);
    public static java.lang.Long getLong(java.lang.String);
    public static java.lang.Long getLong(java.lang.String,long);
    public static java.lang.Long getLong(java.lang.String,java.lang.Long);
    public static long highestOneBit(long);
    public static long lowestOneBit(long);
    public static int numberOfLeadingZeros(long);
    public static int numberOfTrailingZeros(long);
    public static int bitCount(long);
    public static long rotateLeft(long,int);
    public static long rotateRight(long,int);
    public static long reverse(long);
    public static int signum(long);
    public static long reverseBytes(long);
    public int compareTo(java.lang.Long);
    public static java.lang.String toString(float);
    public static java.lang.String toHexString(float);
    public static java.lang.Float valueOf(java.lang.String);
    public static java.lang.Float valueOf(float);
    public static float parseFloat(java.lang.String);
    public static boolean isNaN(float);
    public static boolean isInfinite(float);
    public static int floatToIntBits(float);
    public static int floatToRawIntBits(float);
    public static float intBitsToFloat(int);
    public static int compare(float,float);
    public boolean isNaN();
    public boolean isInfinite();
    public int compareTo(java.lang.Float);
    public static java.lang.String toString(double);
    public static java.lang.String toHexString(double);
    public static java.lang.Double valueOf(java.lang.String);
    public static java.lang.Double valueOf(double);
    public static double parseDouble(java.lang.String);
    public static boolean isNaN(double);
    public static boolean isInfinite(double);
    public static long doubleToLongBits(double);
    public static long doubleToRawLongBits(double);
    public static double longBitsToDouble(long);
    public static int compare(double,double);
    public boolean isNaN();
    public boolean isInfinite();
    public int compareTo(java.lang.Double);
    public <init>(byte);
    public <init>(short);
    public <init>(int);
    public <init>(long);
    public <init>(float);
    public <init>(double);
    public <init>(java.lang.String);
    public byte byteValue();
    public short shortValue();
    public int intValue();
    public long longValue();
    public float floatValue();
    public double doubleValue();
    public int compareTo(java.lang.Object);
    public boolean equals(java.lang.Object);
    public int hashCode();
    public java.lang.String toString();
}

# Remove - String method calls. Remove all invocations of String
# methods without side effects whose return values are not used.
-assumenosideeffects public class java.lang.String {
    public <init>();
    public <init>(byte[]);
    public <init>(byte[],int);
    public <init>(byte[],int,int);
    public <init>(byte[],int,int,int);
    public <init>(byte[],int,int,java.lang.String);
    public <init>(byte[],java.lang.String);
    public <init>(char[]);
    public <init>(char[],int,int);
    public <init>(java.lang.String);
    public <init>(java.lang.StringBuffer);
    public static java.lang.String copyValueOf(char[]);
    public static java.lang.String copyValueOf(char[],int,int);
    public static java.lang.String valueOf(boolean);
    public static java.lang.String valueOf(char);
    public static java.lang.String valueOf(char[]);
    public static java.lang.String valueOf(char[],int,int);
    public static java.lang.String valueOf(double);
    public static java.lang.String valueOf(float);
    public static java.lang.String valueOf(int);
    public static java.lang.String valueOf(java.lang.Object);
    public static java.lang.String valueOf(long);
    public boolean contentEquals(java.lang.StringBuffer);
    public boolean endsWith(java.lang.String);
    public boolean equalsIgnoreCase(java.lang.String);
    public boolean equals(java.lang.Object);
    public boolean matches(java.lang.String);
    public boolean regionMatches(boolean,int,java.lang.String,int,int);
    public boolean regionMatches(int,java.lang.String,int,int);
    public boolean startsWith(java.lang.String);
    public boolean startsWith(java.lang.String,int);
    public byte[] getBytes();
    public byte[] getBytes(java.lang.String);
    public char charAt(int);
    public char[] toCharArray();
    public int compareToIgnoreCase(java.lang.String);
    public int compareTo(java.lang.Object);
    public int compareTo(java.lang.String);
    public int hashCode();
    public int indexOf(int);
    public int indexOf(int,int);
    public int indexOf(java.lang.String);
    public int indexOf(java.lang.String,int);
    public int lastIndexOf(int);
    public int lastIndexOf(int,int);
    public int lastIndexOf(java.lang.String);
    public int lastIndexOf(java.lang.String,int);
    public int length();
    public java.lang.CharSequence subSequence(int,int);
    public java.lang.String concat(java.lang.String);
    public java.lang.String replaceAll(java.lang.String,java.lang.String);
    public java.lang.String replace(char,char);
    public java.lang.String replaceFirst(java.lang.String,java.lang.String);
    public java.lang.String[] split(java.lang.String);
    public java.lang.String[] split(java.lang.String,int);
    public java.lang.String substring(int);
    public java.lang.String substring(int,int);
    public java.lang.String toLowerCase();
    public java.lang.String toLowerCase(java.util.Locale);
    public java.lang.String toString();
    public java.lang.String toUpperCase();
    public java.lang.String toUpperCase(java.util.Locale);
    public java.lang.String trim();
}

# Remove - StringBuffer method calls. Remove all invocations of StringBuffer
# methods without side effects whose return values are not used.
-assumenosideeffects public class java.lang.StringBuffer {
    public <init>();
    public <init>(int);
    public <init>(java.lang.String);
    public <init>(java.lang.CharSequence);
    public java.lang.String toString();
    public char charAt(int);
    public int capacity();
    public int codePointAt(int);
    public int codePointBefore(int);
    public int indexOf(java.lang.String,int);
    public int lastIndexOf(java.lang.String);
    public int lastIndexOf(java.lang.String,int);
    public int length();
    public java.lang.String substring(int);
    public java.lang.String substring(int,int);
}

# Remove - StringBuilder method calls. Remove all invocations of StringBuilder
# methods without side effects whose return values are not used.
-assumenosideeffects public class java.lang.StringBuilder {
    public <init>();
    public <init>(int);
    public <init>(java.lang.String);
    public <init>(java.lang.CharSequence);
    public java.lang.String toString();
    public char charAt(int);
    public int capacity();
    public int codePointAt(int);
    public int codePointBefore(int);
    public int indexOf(java.lang.String,int);
    public int lastIndexOf(java.lang.String);
    public int lastIndexOf(java.lang.String,int);
    public int length();
    public java.lang.String substring(int);
    public java.lang.String substring(int,int);
}

-libraryjars ..\libs\easyfacebookandroidsdk_2.3.jar
-libraryjars ..\libs\acra-4.2.3.jar
-libraryjars ..\libs\FlurryAgent.jar
-libraryjars ..\libs\PayPal_MPL.jar
-libraryjars ..\libs\ksoap2-android-assembly-2.6.0-jar-with-dependencies.jar
-libraryjars ..\libs\proguard.jar

-keep class org.BJ.Food4All.CookTales.FontTypes
-keepAttributes **

-keepclasseswithmembers class * {
    public <init>(android.content.Context, android.util.AttributeSet);
}

-keepclasseswithmembers class * {
    public <init>(android.content.Context, android.util.AttributeSet, int);
}

-keepclassmembers class * extends android.content.Context {
   public void *(android.view.View);
   public void *(android.view.MenuItem);
}

-keepclassmembers class * implements android.os.Parcelable {
    static android.os.Parcelable$Creator CREATOR;
}

-keepclassmembers class **.R$* {
    public static <fields>;
}

-dontskipnonpubliclibraryclassmembers

#ACRA specifics
# we need line numbers in our stack traces otherwise they are pretty useless
-renamesourcefileattribute SourceFile
-keepattributes SourceFile,LineNumberTable

# ACRA needs "annotations" so add this... 
-keepattributes *Annotation*

# keep this class so that logging will show 'ACRA' and not a obfuscated name like 'a'.
# Note: if you are removing log messages elsewhere in this file then this isn't necessary
-keep class org.acra.ACRA {
        *;
}

# keep this around for some enums that ACRA needs
-keep class org.acra.ReportingInteractionMode {
   *;
}

# keep this otherwise it is removed by ProGuard
-keep public class org.acra.ErrorReporter
{
public void addCustomData(java.lang.String,java.lang.String);
}

# keep this otherwise it is removed by ProGuard
-keep public class org.acra.ErrorReporter
{
public org.acra.ErrorReporter$ReportsSenderWorker handleSilentException(java.lang.Throwable);
}

-keep public class org.BJ.Food4All.** {
  public protected *;
} 
```

谢谢

# ibm-mq - Websphere MQ 7.1 自动启动

> ID：11301070
> 
> 赞同：4
> 
> 时间：2012-07-02T20:57:20.433
> 
> 标签：ibm-mq

在系统启动期间自动启动 Websphere MQ v7.1 队列管理器的最佳方式是什么？我看到它有一个[SupportPac](http://www-01.ibm.com/support/docview.wss?uid=swg24016554)，只是想确保这是正确的。我们有 MQ 在 64 位 Linux 上运行。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T21:01:21.960

是的，[SupportPac MSL1](http://ibm.co/SupptPacMSL1)是适用于 Linux 的正确版本。

其他一些 UNIX 风格可以按原样或修改后使用此 SupportPac。对于 Windows，指定要自动启动的 QMgr，WMQ 服务将启动它。

* * *

**2017 年 9 月 26 日更新**
响应 byteborg 的评论，我检查了一下，似乎 IBM 出于某种原因删除了 SupportPac MSL1，即使是从撤销的 SupportPac 列表中也是如此。

碰巧这周我在[MQTC](http://mqtechconference.com)，很多来自 Hursley Lab 的 IBM 员工都在这里，所以我会要求恢复它或将它放在 Github 上。如果他们能够做到这一点，那么实现这一目标的内部审查过程将是广泛的，因此不会很快发生。如果这不起作用，我会考虑自己获得托管它的许可。敬请关注。

* * *

**2017 年 10 月 1 日更新**
在 MQTC 期间，IBM Hursley 实验室的 MQ 架构师 Mark Taylor 解释了 MSL1 的删除。根据马克的说法，基本上，“它没有用”。相反，IBM 以 MQDev 博客文章的形式提供了指导，*[使用 systemd 在 Linux 上管理队列管理器启动和关闭](https://www.ibm.com/developerworks/community/blogs/messaging/entry/mq_linux_systemd?lang=en)*。这篇文章的内容与标题内容差不多，并描述了如何使用 systemd 来启动/停止 MQ。有关详细信息，请参阅该帖子。

# ios - 难以提取 iphone 配置文件

> ID：11301071
> 
> 赞同：0
> 
> 时间：2012-07-02T20:57:20.443
> 
> 标签：ios, pem

我最近在我的 iPhone 上安装了一个配置文件，该配置文件采用 .pem 文件的形式。安装证书后，我想知道如何确定配置文件在 iOS 文件系统上的确切位置。我已经安装了 iFile，所以如果有人知道 iPhone 上的配置文件安装在哪里，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-15T23:04:37.950

去`var/mobile/Library/ConfigurationProfiles/PublicInfo`。在那里你会找到你的证书。

# glib - GLib 和 GObject 到底是什么？

> ID：11301074
> 
> 赞同：39
> 
> 时间：2012-07-02T20:57:29.317
> 
> 标签：glib, pygobject, gobject

我一直在研究[python-mpdor](https://github.com/fmoralesc/python-mpdor)的源代码，它提到它是

> 基于 gobject，便于事件处理（在高级客户端类中）。

*有人可以简单*地向我解释一下究竟是什么`Glib`，`GObject`它们如何相互作用，以及它在事件处理中扮演什么角色。

我尝试搜索`Glib`，`GObject`但没有找到任何基本解释。我发现的所有解释都是非常技术性的，技术性我的意思是不适合初学者。

另外，有人可以指出一些关于和的*初学者*教程/文章。`Glib``GObject`

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-07-02T23:31:09.760

GLib 和 GOBject 是构建 GTK+ GUI 工具包的 2 个独立的 C 库（除其他外）。

由于 C 是一种低级语言，GLib 提供了许多基本功能，例如类似于 Python 内置的那些实用程序（文件输入/输出、字符串操作、内存管理、线程等）。

由于 C 不是面向对象的语言，GObject 提供了一个基于 C 的对象系统，其中包括属性和继承（同样，已经内置到 Python 中）。在 Python 中，您很少直接使用 GLib（因为 Python 内置了大部分功能），但 GObject 依赖于 GLib。

所有基于 GObject 的库都旨在支持与其他语言（如 Python）的语言绑定。

就您的问题而言，GObject 提供了一个称为“信号”的事件系统。任何从 GObject 派生的对象都可以“发出”信号来发送事件发生的通知。`MPDProtocolClient`in 类`python-mpdor`是从 GObject 派生的，因此它可以发出信号。应用程序将功能“连接”到这些信号。F

例如，README 显示了这个例子：

```
import gobject
import mpdor

def notify(client, vol):
    print "mpd volume is at ", vol + "%"

client = mpdor.client.Client()
client.connect("mixer-change", notify)
gobject.MainLoop().run() 
```

在这种情况下，命名的函数`notify`“连接”到`"mixer-change"`信号，这意味着只要客户端“发出”该信号，就会调用该函数。`gobject.MainLoop().run()`调用进入“主[事件循环](http://en.wikipedia.org/wiki/Event-driven_programming)”（基本上是无限循环），这是事件驱动编程中的标准概念。

您可能找不到很多 GObject/Python 教程，但是，如果您学习一点 Python/GTK+ 基础知识，那么您可能会掌握事件循环、信号和信号回调的概念。（看起来 python-mpdor 使用的是 GTK+ 2，它是 PyGTK，而不是较新的 GTK+ 3，它是 PyGObject）。

祝你好运。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-08-20T23:13:24.953

GObject 是 COM - 组件对象模型的实现。这意味着您可以调用此对象的“方法”——在头文件和链接中没有“包含”方法声明的信号。最初它被创建为一个为不同 PL 创建语言绑定的系统，但它也被用作插件系统的基础

# node.js - 为什么 Google Maps Marker 和 InfoWindow 没有居中？

> ID：11301077
> 
> 赞同：1
> 
> 时间：2012-07-02T20:57:50.420
> 
> 标签：node.js, google-maps-api-3, express, pug

我用这段代码制作地图

```
var map;
var myOptions = {
    center: new google.maps.LatLng(-31.403759,-64.174232),
    zoom: 12,
    panControl: true,
    zoomControl: true,
    mapTypeControl: true,
    scaleControl: true,
    streetViewControl: true,
    overviewMapControl: true,
    mapTypeId: google.maps.MapTypeId.ROADMAP 
};

function iniciar() {
    map = new google.maps.Map(document.getElementById("map"),myOptions);
}

function marcar(lat, lng) {
    var contentString = '<div id="content">'+
        '<div id="siteNotice">'+
        '</div>'+
        '<h1 id="firstHeading" class="firstHeading">Uluru</h1>'+
        '<div id="bodyContent">'+
        '<p><b>Uluru</b>, also referred to as <b>Ayers Rock</b>, is a large ' +
        'sandstone rock formation in the southern part of the '+
        'Northern Territory, central Australia. It lies 335 km (208 mi) '+
        'south west of the nearest large town, Alice Springs; 450 km '+
        '(280 mi) by road. Kata Tjuta and Uluru are the two major '+
        'features of the Uluru - Kata Tjuta National Park. Uluru is '+
        'sacred to the Pitjantjatjara and Yankunytjatjara, the '+
        'Aboriginal people of the area. It has many springs, waterholes, '+
        'rock caves and ancient paintings. Uluru is listed as a World '+
        'Heritage Site.</p>'+
        '<p>Attribution: Uluru, <a href="http://en.wikipedia.org/w/index.php?title=Uluru&oldid=297882194">'+
        'http://en.wikipedia.org/w/index.php?title=Uluru</a> (last visited June 22, 2009).</p>'+
        '</div>'+
        '</div>';
    var infowindow = new google.maps.InfoWindow({
        content: contentString
    });
    var location=new google.maps.LatLng(lat,lng);
    var marker = new google.maps.Marker({
        position: location, 
        map: maps
    });
    google.maps.event.addListener(marker, 'click', function() {
        infowindow.open(map,marker);
    });
} 
```

当我尝试单击标记时，它们会被取消校准，因此当我单击标记的中心时不会发生任何事情。但是向下几厘米时，会出现一个光标，就像标记在那个点上一样。

所以地图没有居中，标记出现在真实坐标处，但我必须单击距离标记向下 2 厘米才能单击标记...

这是为什么？？有没有其他人发生过这种情况？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T06:04:14.357

问题是身体......在我的CSS中我放了

```
body{
zoom:0.9;
margin:0;
padding:0;
width:100%;
} 
```

缩放影响谷歌地图删除缩放校准标记....谢谢大家！我希望这个问题能解决任何其他类似的问题

对不起我的英语不好！埃杰杰

# jqgrid - jqGrid排列数组

> ID：11301079
> 
> 赞同：3
> 
> 时间：2012-07-02T20:58:07.203
> 
> 标签：jqgrid

在 jqGrid 中，我尝试使用排列数组来保存列的重新排序状态。例如。基本列状态是`perm = [0,1,2,3,4]`第 3 列是隐藏的，第 0 列是复选框。现在我有一个自定义上下文菜单，我用它最终给了我一个 perm 数组，`[0,1,3,2,4]` 我在文档中读到了 perm 数组需要以 1 开头，对吗？当我尝试使用 jqgrid 的“remapColumns”函数并传递 perm 数组时，它工作正常。但是，如果我尝试多次隐藏和显示列，列顺序就会变得混乱。请帮助我理解排列数组的这些索引代表什么？它们是可见列的列索引吗？隐藏列应该是数组的一部分吗？如果柱子冻结了怎么办？在我见过的一些例子中`perm = [0:1, 1:3, 2:2, 3:1]` 正确的方法是什么？我在用`grid.jqGrid("remapColumns", perm, true);`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-24T07:56:07.223

尝试使用函数的最后一个参数

```
grid.jqGrid("remapColumns", [0,1,3,2,4], true, false); 
```

排列，updateCells，keepHeader

[维基：方法](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3amethods)

# mysql - SQL：计算输出列上出现的次数并根据出现次数计算一些百分比

> ID：11301083
> 
> 赞同：0
> 
> 时间：2012-07-02T20:58:42.057
> 
> 标签：mysql, sql

我的 sql 查询获取固件的错误修复验证列表，例如 def-456 是一张票，要求我在产品上测试固件测试。def-456 有几个记录结果的子任务。结果记录为:id: abc-123、abc-124、abc-125等（如下表所示）。这些对应的 id 有“通过”或“失败”的结果。我需要计算两个值----> 1.尝试次数：在以下示例中，尝试次数为 3/5，有 3 次通过和 2 次失败（即通过/通过+失败），这里我可以使用计数() 方法但不知道如何附加“/5”和 2\. 第一次尝试成功率：在以下示例中，abc-123 失败但 abc-124 通过，abc-125 失败但 abc-126 通过和 abc-127顺利通过，表示我的成功率为：1 out 3（即 1/3），如何在 sql 中显示这些值？这有点棘手，我无法找到逻辑。

这是我的 def-456 数据：

```
 value | id| 
    --------------
    fail | abc-123  
    pass | abc-124   
    fail | abc-125   
    pass | abc-126   
    pass | abc-127 
```

这是我要显示的o/p：

```
id   |   value | attempts| %for attempts  | 1st attempt
----------------------------------------------------
abc-123    fail |   3/5  | 60%              | 1/3
abc-124    pass |   3/5  | 60%              | 1/3
abc-125    fail |   3/5  | 60%              | 1/3
abc-126    pass |   3/5  | 60%              | 1/3
abc-127    pass |   3/5  | 60%              | 1/3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T23:17:54.573

我相信这是你需要的：

```
SELECT
    a.id,
    a.resolution,
    b.*
FROM 
    Table1 a
CROSS JOIN
    (
        SELECT
            CONCAT(SUM(aa.resolution = 'pass'), '/', COUNT(*)) AS attempts,
            CONCAT((SUM(aa.resolution = 'pass') / COUNT(*)) * 100, '%') AS percent_attempts,
            CONCAT(SUM(bb.mindate IS NOT NULL AND resolution = 'pass'), '/', SUM(resolution = 'pass')) AS first_attempt 
        FROM
            Table1 aa
        LEFT JOIN 
            (
                SELECT 
                    MIN(`date`) AS mindate 
                FROM 
                    Table1
            ) bb ON aa.`date` = bb.mindate
    ) b 
```

[SQLFiddle 链接](http://sqlfiddle.com/#!2/02a26/39/0)

# html - Google Docs API 中的“转到”和“返回”？

> ID：11301087
> 
> 赞同：0
> 
> 时间：2012-07-02T20:58:57.400
> 
> 标签：html, google-docs-api, presentation

如何使用 Google Docs List API v3 在 Google Docs 演示文稿中设置页面、转到下一页或转到上一页？，可以做到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T21:06:00.643

不，使用 API 无法做到这一点。

# java - Java 中关于列表的引用和副本

> ID：11301101
> 
> 赞同：-1
> 
> 时间：2012-07-02T21:00:13.537
> 
> 标签：java, list, reference, copy

假设我在 this -> Iterable allNodes 中有一个名为“Node”的对象列表。

假设我遍历了 allNodes 中的所有节点并将它们添加到自己的列表中，如下所示：

```
Iterable<Node> allNodes = dataManager.getAllNodes();
List<Node> copyOfAllNodes;
for(Node node : allNodes) {
    copyOfAllNodes.add(node);
} 
```

副本会成为参考还是不会影响原始列表的副本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T21:02:32.187

它将成为一个参考。当你执行：

```
copyAllNodes.add(node) 
```

您将`node`作为对象插入到`copyAllNodes`.

如果你想要一个对象的副本，你还有其他方法。其中一种方法可能是`close`，基本上是实现`Cloneable`接口和暴露`clone`方法以复制对象，因此您可以执行以下操作：

```
copyAllNodes.add(node.clone) 
```

这将是一个您可以修改的副本，而不会对复制的对象产生任何影响。*最好记住默认的克隆方法只是对象的浅拷贝*。

从[文档](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html#clone%28%29)：

> 类 Object 的方法 clone 执行特定的克隆操作。首先，如果该对象的类没有实现接口 Cloneable，则抛出 CloneNotSupportedException。请注意，所有数组都被认为实现了接口 Cloneable。否则，此方法会创建此对象的类的新实例，并使用此对象的相应字段的内容来初始化其所有字段，就像通过赋值一样；字段的内容本身不会被克隆。因此，此方法执行此对象的“浅拷贝”，而不是“深拷贝”操作。

# asp.net - 如果我在处理过程中关闭浏览器，asp.net 生命周期会继续吗？

> ID：11301104
> 
> 赞同：9
> 
> 时间：2012-07-02T21:00:29.333
> 
> 标签：asp.net

我有一个 ASP.NET 网页，它连接到许多数据库并使用许多文件。我不清楚如果最终用户在完成加载之前关闭网页会发生什么，即 ASP.NET 生命周期结束还是服务器仍会尝试生成页面并将其返回给客户端？我对生命周期有合理的了解，但我找不到任何关于此的文档。

我正在尝试查找潜在的内存泄漏。我正在尝试确定是否所有代码都将运行，即是否将处理连接等。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-02T21:09:10.750

代码仍然会运行。`IsClientConnected`如果您在循环中执行流式输出等操作，对象上有一个属性`HttpRequest`可以指示客户端是否仍处于连接状态。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-02T21:11:28.860

一旦生成了对页面的请求，它将进入生命周期的卸载。它不知道客户端不在那里，直到它发送有关卸载的信息。

一个独特的方面是动态编译部分。你可以在这里阅读：http: [//msdn.microsoft.com/en-us/library/ms366723](http://msdn.microsoft.com/en-us/library/ms366723)

有关 ASP.NET 生命周期的更多信息，请查看此处：http: [//msdn.microsoft.com/en-us/library/ms178472.aspx#general_page_lifecycle_stages](http://msdn.microsoft.com/en-us/library/ms178472.aspx#general_page_lifecycle_stages)

所以基本上，请求一个页面，ASP.NET 使用动态编译基本上创建页面，然后它尝试将页面发送到客户端。所有代码都将按照您在代码中指定的方式运行，无论客户端是否存在。

这是一个非常简化的答案，但这是基础知识。您的代码已编译，请求生成响应，然后发送响应。除非您明确告诉它，否则它不会分段发送。

编辑：感谢 Chris Lively 对更改措辞的建议。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-02T21:40:01.220

您提到跟踪潜在的内存泄漏和“连接”一词。我猜你的意思是数据库连接。

您应该始终将所有连接和命令包装在`using`子句中。这将保证连接/命令被正确处理，无论是否发生错误、客户端断开连接等。

这里有很多例子，但归结为：

```
using (SqlConnection conn = new SqlConnection(connStr)) {
  using (SqlCommand cmd = new SqlCommand(conn)) {
     // do something here.
  }
} 
```

如果由于某种原因，您的代码不允许您这样做，那么我建议您接下来要做的就是重组它，因为您做错了。一个常见的问题是，有些人会在页面执行的顶部创建一个连接对象，然后在页面的整个生命周期中重新使用它。这保证会导致问题，包括但不限于：连接池错误、内存丢失、随机查询问题、应用程序的完全冲洗……

不要担心在代码中需要它们时建立（和丢弃）连接的性能。Windows 使用闪电般快速的连接池，即使您的应用程序发出已完成的信号，也会根据需要保持连接。

另请注意：每次使用非托管类时都应使用此模式。那些总是执行`IDisposable`。

# c# - 在类上使用 DisplayAttribute

> ID：11301107
> 
> 赞同：8
> 
> 时间：2012-07-02T21:00:51.947
> 
> 标签：c#, .net, asp.net-mvc

正如我们可以用来`System.ComponentModel.DataAnnotations.DisplayAttribute`为属性设置标签一样，我想将它用于类，但在类上是不允许的。

```
using System.ComponentModel.DataAnnotations;

[Display(Name = "A person")]
public class Person
{
    [Display(Name = "A name")]
    public string Name { get; set; }
} 
```

有人知道解决方法吗？

编辑：我想在强类型视图上使用它。当我创建一个新的强类型视图时，类名是用 HTML 硬编码的，如下所示：

```
@model Models.Person
<fieldset>
    <legend>Person</legend>
    <div class="display-label">
        @Html.LabelFor(model => model.Name)
    </div>
</fieldset> 
```

我想做一些类似于`Name`财产的事情。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T21:08:08.317

`DisplayName`属性 (from ) 执行类似的`System.ComponentModel`功能并且可以应用于类。

[MSDN](http://msdn.microsoft.com/en-us/library/system.componentmodel.displaynameattribute.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T21:25:51.997

我真的不知道是否有另一种方法可以做到这一点，但我通常不`hard code`这样做，我使用在视图中创建一个变量，然后我在需要的地方调用。在你的情况下，我会做的更优雅一点

```
@{
    var viewName = typeof(Foo).Name;
}

@model Models.Person
<fieldset>
<legend>@viewName</legend>
<div class="display-label">
    @Html.LabelFor(model => model.Name)
</div>
</fieldset> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-10T15:43:20.240

使用装饰器模式，只需将 DisplayAttribute 包装为您自己的自定义属性，专门用于类。

```
using System;
using System.ComponentModel.DataAnnotations;

namespace YourNameSpaceHere.Support
{
    [AttributeUsage(AttributeTargets.Class)]
    public class DisplayForClassAttribute : Attribute
    {
        protected readonly DisplayAttribute Attribute;

        public DisplayForClassAttribute()
        {
            this.Attribute = new DisplayAttribute();
        }

        public string ShortName
        {
            get { return this.Attribute.ShortName; }
            set { this.Attribute.ShortName = value; }
        }

        public string Name
        {
            get { return this.Attribute.Name; }
            set { this.Attribute.Name = value; }
        }

        public string Description
        {
            get { return this.Attribute.Description; }
            set { this.Attribute.Description = value; }
        }

        public string Prompt
        {
            get { return this.Attribute.Prompt; }
            set { this.Attribute.Prompt = value; }
        }

        public string GroupName
        {
            get { return this.Attribute.GroupName; }
            set { this.Attribute.GroupName = value; }
        }

        public Type ResourceType
        {
            get { return this.Attribute.ResourceType; }
            set { this.Attribute.ResourceType = value; }
        }

        public bool AutoGenerateField
        {
            get { return this.Attribute.AutoGenerateField; }
            set { this.Attribute.AutoGenerateField = value; }
        }

        public bool AutoGenerateFilter
        {
            get { return this.Attribute.AutoGenerateFilter; }
            set { this.Attribute.AutoGenerateFilter = value; }
        }

        public int Order
        {
            get { return this.Attribute.Order; }
            set { this.Attribute.Order = value; }
        }

        public string GetShortName()
        {
            return this.Attribute.GetShortName();
        }

        public string GetName()
        {
            return this.Attribute.GetName();
        }

        public string GetDescription()
        {
            return this.Attribute.GetDescription();
        }

        public string GetPrompt()
        {
            return this.Attribute.GetPrompt();
        }

        public string GetGroupName()
        {
            return this.Attribute.GetGroupName();
        }

        public bool? GetAutoGenerateField()
        {
            return this.Attribute.GetAutoGenerateField();
        }

        public bool? GetAutoGenerateFilter()
        {
            return this.Attribute.GetAutoGenerateFilter();
        }

        public int? GetOrder()
        {
            return this.Attribute.GetOrder();
         }  
     }
 } 
```

用法如下：

```
[DisplayForClass(Name = "Approval Matrix")]
public class ApprovalMatrixViewModel
{
} 
```

# javascript - 模拟数组对象

> ID：11301111
> 
> 赞同：1
> 
> 时间：2012-07-02T21:01:26.433
> 
> 标签：javascript

来自面向对象的 JavaScript 书的问题：**想象 Array() 不存在，并且数组文字符号也不存在。创建一个名为 MyArray() 的构造函数，其行为尽可能接近 Array()。**

我认为测试我的技能将是一个很好的挑战。这是我想出的，但它不起作用并且非常不完整..我有点难过：

```
function MyArray(){

// PRIVATE FIELDS -----------------------

var initialData = arguments;
var storage;

// PRIVATE METHODS ----------------------

function refresh(){ //this doesn't work :(
    for(var i = 0; i < storage.length; i++){
        this[i] = storage[i]
    }
};

function initialize(){
    storage = initialData;
    refresh();
}

function count(){
    var result = 0;
    for(var item in this){
        //console.log(item, parseInt(item), typeof item);
        if(typeof item == 'number'){
            result++;
        }
    }
    return result;
};

initialize();

// PUBLIC FIELDS -------------------------

this.length = count();

// PUBLIC METHODS ------------------------

//todo:
this.push = function(item){
    refresh();
}

this.pop = function(){}

this.join = function(){}

this.toString = function(){}

}

var c = new MyArray(32,132,11);

console.log(c, c.length); 
```

这不适用于任何生产代码或任何项目.. 只是为了尝试更多地学习 JavaScript。任何人都可以尝试帮助我使用此代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T09:32:39.627

问题是您可以使用 arguments 对象。它不是使用 Array() 创建的数组，因此您不会违反练习规则。这是您需要做的：

```
this.length = 0;
for (var i in arguments) {
   this[this.length] = arguments[i];
   this.length++;
} 
```

我忘了提到 ANY 对象是一个关联数组，因此在练习中应用关联数组并不是错误的事情，因为我们不使用 Array() 对象本身。

致问题的作者：在您的示例中，您使用：**this["i"] = storage[i]**等于**this.i = storage[i]**。尝试删除引号并像**这样使用它[i] = storage[i]**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T21:04:42.313

```
for(var item in this){
    if(typeof item == 'number') 
```

属性名称始终是一个字符串。您需要检查它是否是从 0 到 MaxArrayLength 的数字的字符串表示形式。你可以例如做

```
for (var i=0; i<4294967296; i++)
    if (i in this)
         result = i; 
```

您可能还对[这些](http://javascriptweblog.wordpress.com/2010/07/12/understanding-javascript-arrays) [文章](http://javascript.about.com/od/problemsolving/a/notarrays.htm)或[Array 行为的官方规范](http://ecma-international.org/ecma-262/5.1/#sec-15.4)感兴趣。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-19T18:10:36.203

我目前正在浏览这本书，我可能应该尝试一些更新的东西，但它还没有过时，而且校长仍然是健全的......嗯，他们在我看来。

无论如何，我选择了一个稍微不同的解决方案，尽管我确实从操作中获得了他如何处理字符串的灵感。我认为这个练习的挑战不是要创建更多的数组，否则……这是一个疯狂的挑战，尤其是对于刚接触该语言的人来说。

```
var MyArray = function () {
    var args = arguments;
    var length = 0;
    for each(var item in args) {
        this[length++] = item;
     }
    this.toString = function () {
    var result = args[0];
    for (var i = 1; i < args.length; i++) {
        result += ',' + args[i];
    }
    return result;
    }
  this.length = length;
  this.push = function (push) {
      var newLength = args.length++;
      args[newLength] = push;
      this[newLength] = push;
      return ++length;
  }
  this.pop = function () {
      delete args[--args.length];
      delete this[args.length];
      length--;
      return args;
  }
  this.join = function(joiner){
      if(typeof arguments[0] === "undefined"){
          joiner = ',';
      }
      var result = args[0];
      for (var i = 1; i < args.length; i++) {
          result += joiner + args[i];
      }
      return result;
  }
}
var a = new MyArray(1, 2, 3, 'test');
console.log(a.toString());
console.log(a[a.length - 1]);
console.log(a.push('boo'));
console.log(a.toString());
console.log(a.pop());
console.log(a.toString());
console.log(a.join(','));
a.join(' isn\'t '); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-19T06:44:03.197

我的解决方案是：

```
 function MyArray() {
    this.length = 0;

    for(i = 0; i < arguments.length; i++) {
        this[this.length] = arguments[i];
        this.length++;
    }
    this.toString = function(joiner = ',') {
        let str = this[0] ? this[0] : '';
        for(i=1;i<this.length; i++) {
            str+= joiner + this[i];
        }
        return str;
    };
    this.push = function(value) {
        this[this.length++] = value;
        return this.length;
    };
    this.pop = function() {
        let value = this[this.length -1];
        delete this[--this.length]
        return value;
    };
    this.join = function(joiner) {
        return this.toString(joiner);
    }
} 
```

# matlab - Matlab中二维插值的函数形式

> ID：11301112
> 
> 赞同：2
> 
> 时间：2012-07-02T21:01:28.777
> 
> 标签：matlab, interpolation

我需要从二维数据数组构造一个插值函数。我需要返回实际函数的原因是，我需要能够将函数作为表达式的一部分进行评估，我需要进行数值积分。

出于这个原因，“interp2”并没有削减它：它不返回一个函数。

我可以使用“TriScatteredInterp”，但这是重量级的：我的网格是等距的（而且很大）；所以我不需要德劳内三角化。

有没有其他选择？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T11:53:13.220

（为“迟到”的答案道歉，但如果现有答案对他们没有帮助，我有一些建议可能会帮助其他人）

从您的问题中不清楚结果函数需要多准确（或“大”有多大），但您可以采用的一种方法是使用最小二乘或卡尔曼滤波器回归您拥有的数据点 -基于方法。您需要使用许多候选函数形式来执行此操作，然后选择“最佳”的形式，例如使用 MAE 或 MSE 等度量。

当然，这需要对底层函数的形式有所了解，但你的问题是不清楚你是否有这种信息。

另一种可行的方法（并且不需要知道底层函数可能是什么）是使用模糊变换（F 变换）来生成提供表面局部近似的线段。

这样做的方法是：

1.  定义一个包含输入数据的 x 和 y 域的 2D Universe
2.  创建此 Universe 的 2D 模糊分区 - 选择可提供所需精度的分区大小
3.  使用输入数据应用离散 F 变换以在 3D 模糊空间中生成模糊数据点
4.  将逆 F 变换作为函数句柄（连同模糊数据点）传递给您的积分函数

如果您不熟悉 F 变换，那么我不久前发布了一篇关于如何将 F 变换用作一维情况下的通用逼近器的博客：http: [//iainism-blogism.blogspot.co.uk /2012/01/fuzzy-wuzzy-was.html](http://iainism-blogism.blogspot.co.uk/2012/01/fuzzy-wuzzy-was.html)

为了了解该方法背后的数学原理并将其扩展到多维案例，俄斯特拉维亚大学发表了一篇博士论文，解释了其在各种工程问题中的应用，并提供了一个如何构建二维宇宙案例的示例：[http://irafm.osu.cz/f/PhD_theses/Stepnicka.pdf](http://irafm.osu.cz/f/PhD_theses/Stepnicka.pdf)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T15:13:30.223

如果你想要一个函数句柄，为什么不定义 f=@(xi,yi)interp2(X,Y,Z,xi,yi) ？它可能有点慢，但我认为它应该工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T22:15:07.313

如果我理解正确，您想要执行二维数据的*面/线积分。*有办法做到这一点，但可能不是你想要的方式。我有完全相同的问题，这很烦人！我解决它的唯一方法是使用[`Surface Fitting Tool (sftool)`](http://www.mathworks.co.uk/help/toolbox/curvefit/sftool.html)创建一个*表面*然后整合它。

在您使用该工具（它也有一个 GUI）创建您的拟合后，它将生成一个`sftool`对象，然后您可以使用它集成到（2-D）中[`quad2d`](https://mathworks.co.uk/help/techdoc/ref/quad2d.html)

我还尝试了您的使用方法`interp2`并得到了结果（类似于`sfobject`），但我不知道如何对数据进行数值积分（线/面）。创建`sfobject`然后集成它要快得多。

这是我第一次做这样的事情，所以我使用数值计算的线积分来确认它。根据斯托克定理，面积分和线积分应该是一样的，结果是一样的。

我在数学堆栈交换中问[了这个](https://math.stackexchange.com/questions/112988/evaluating-a-line-integral-of-a-vector-field-numerically)问题，想做二维数据的线积分，最后做了表面积分，然后用线积分确认答案！

# python - IOError: [Errno 2] 没有这样的文件或目录

> ID：11301115
> 
> 赞同：2
> 
> 时间：2012-07-02T21:01:39.150
> 
> 标签：python, shutil

我有一个非常简单的代码，但由于某种原因，我得到 Err no 2 这是代码：

```
import os, shutil

src=r"C:/Documents and Settings/user/Desktop/FilesPy"
des=r"C:/Documents and Settings/user/Desktop/tryPy/Output"
srcFile=r"C:/Documents and Settings/user/Desktop/tryPy/Input/FilesToCopy.txt"

srcFile=open(srcFile,'a+')

for line in srcFile:
    name=line.rstrip()
    pathS=os.path.join(src,name)
    pathD=os.path.join(des,name)
    if os.path.exists(pathS):
        shutil.copy(pathS,des)

    else:
        print 'false' + path 
```

但我得到的是：

```
IOError: [Errno 2] No such file or directory: 'C:/Documents and Settings/user/Desktop/tryPy/Output\\blatwo.docx' 
```

我真的不知道该怎么办尝试重新搜索整个网络没有得到答案请帮助我。

谢谢 ：）

***编辑：*** 这是在 Eclipse 上运行的完整跟踪：

```
pydev debugger
Traceback (most recent call last):
  File "D:\EasyEclipse-for-Python-1.3.1\plugins\org.python.pydev.debug_1.3.13\pysrc\pydevd.py", line 803, in <module>
    debugger.run(setup['file'], None, None)
  File "D:\EasyEclipse-for-Python-1.3.1\plugins\org.python.pydev.debug_1.3.13\pysrc\pydevd.py", line 655, in run
    execfile(file, globals, locals) #execute the script
  File "D:\Python\CopyChosenFiles\Copy of CopyFiles.py", line 16, in <module>
    shutil.copy2(pathS,pathD)
  File "C:\Python27\Lib\shutil.py", line 128, in copy2
    copyfile(src, dst)
  File "C:\Python27\Lib\shutil.py", line 83, in copyfile
    with open(dst, 'rb') as fdst:
IOError: [Errno 2] No such file or directory: 'C:/Documents and Settings/user/Desktop/tryPy/Output\\blatwo.docx'
Exception AttributeError: "'NoneType' object has no attribute 'print_exc'" in <function _remove at 0x00AC52B0> ignored 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T02:12:24.933

用这个替换变量赋值：

```
src = os.path.join('C:', 'Documents and Settings', 'user', 'Desktop', 'FilesPy')
des = os.path.join('C:', 'Documents and Settings', 'user', 'Desktop', 'tryPy', 'Output')
srcFile = os.path.join('C:', 'Documents and Settings', 'user', 'Desktop', 'tryPy', 'Input', 'FilesToCopy.txt') 
```

或者，在路径中使用反斜杠，因为您使用的是 Windows...

```
src = r"C:\Documents and Settings\user\Desktop\FilesPy"
des = r"C:\Documents and Settings\user\Desktop\tryPy\Output"
srcFile = r"C:\Documents and Settings\user\Desktop\tryPy\Input\FilesToCopy.txt" 
```

# php - Codeigniter Follow System：选择所有状态类型

> ID：11301116
> 
> 赞同：0
> 
> 时间：2012-07-02T21:01:41.117
> 
> 标签：php, codeigniter

我有这个跟踪系统，可以让你跟踪某些类型的状态。当您关注某人时，它会将您的用户 ID 与朋友的 ID 一起放入好友表中。最后，它添加了您想要遵循的状态类型。因此，假设用户只想关注我的状态而不是照片，那么状态的类型将 = 1。statuses 表中也有类型，所以这个查询可以正常工作，但是如果类型等于零，我希望它选择所有状态类型，那么我该怎么做呢？

```
$this->db->select('statuses.type,statuses.text,statuses.media_url,statuses.user_id,statuses.id,users.name,users.username,users.avatar');
$this->db->from('statuses');
$this->db->join('friends', 'friends.type = statuses.type AND friends.friend_id = statuses.user_id OR friends.user_id = statuses.user_id');
$this->db->join('users', 'users.id = statuses.user_id');
$this->db->where('friends.user_id', $user_id);
$this->db->where('friends.confirmed', 1); 
```

Friends.type 等于 1 时，会在状态表中选择 statuses types = to 1。如果 type = 2 或 3 对于其他类型的状态（例如照片或视频），这将起作用。就像我说的，如果friends.type = 0，我只需要一种选择所有状态类型的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T21:15:52.920

也许这个？：

```
$this->db->join('friends', '(friends.type = 0 OR friends.type = statuses.type) AND (friends.friend_id = statuses.user_id OR friends.user_id = statuses.user_id)'); 
```

# javascript - jsdom document.createWindow() 为非空文档返回空

> ID：11301119
> 
> 赞同：4
> 
> 时间：2012-07-02T21:02:10.023
> 
> 标签：javascript, node.js, jsdom

我正在尝试遵循“**创建类似浏览器的 BOM/DOM/Window ”部分下**[https://github.com/tmpvar/jsdom](https://github.com/tmpvar/jsdom)上非常简短的设置说明。不幸的是，在第 3 行（.createWindow 步骤）之后，我执行了 console.log(window) 并打印了一个空对象。那里至少应该有 window.document，但没有。似乎 document.createWindow 的行为与 jsdom.createWindow 相同。

 **到目前为止，这是我的代码：

```
var jsdom = require('jsdom').jsdom;

document = jsdom("<html><head></head><body>hello world</body></html>");
window = document.createWindow();

console.log(window); // output: {}

console.log(window.document.innerHTML); // error, cannot read innerHTML on undefined 
```

那么，我做错了什么愚蠢的事情？

FYI 文档已正确创建。打印它会输出一个非常大的对象。

我正在使用 Mac。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T13:49:12.993

```
var jsdom = require('jsdom').jsdom;
document = jsdom('<!doctype html><html><body>hello jsdom</body></html>');
window = document.createWindow();
console.log(window);
var txt = window.document.body.innerHTML;
console.log(txt); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T18:54:06.463

问题是由于 Contextify 的安装错误。我习惯于在 Windows 或 *NIX 和 Mac 上进行开发，由于 *NIX 终端，假设我会使用 Make 之类的东西。通过使用命令行工具安装 Xcode 解决了问题，其中安装了 Make，解决了 Contexify 的安装错误，从而解决了整体问题。**

# java - Youtube gdata java api ParseException

> ID：11301121
> 
> 赞同：2
> 
> 时间：2012-07-02T21:02:14.937
> 
> 标签：java, youtube, gdata, parseexception

我正在尝试使用 youtube gdata api for java 进行一些搜索，但我遇到了一些错误。

我设置了最大值。结果到 20 并开始进行测试搜索，偶尔没有结果返回。

然后我开始一一搜索，我注意到一些单一的搜索结果有问题，当我设置最大值时。结果到了20个，连一个结果有问题都没有结果。

堆栈跟踪是：

```
Haz 29, 2012 2:45:40 PM com.wattalist.gdata.youtube.GdataYoutube Search
SEVERE: null
com.google.gdata.util.ParseException: [Line 1, Column 101152, element yt:state] Invalid value for attribute : 'name'
at com.google.gdata.util.XmlParser.throwParseException(XmlParser.java:739)
at com.google.gdata.util.XmlParser.parse(XmlParser.java:702)
at com.google.gdata.util.XmlParser.parse(XmlParser.java:585)
at com.google.gdata.data.BaseFeed.parseAtom(BaseFeed.java:867)
at com.google.gdata.wireformats.input.AtomDataParser.parse(AtomDataParser.java:68)
at com.google.gdata.wireformats.input.AtomDataParser.parse(AtomDataParser.java:39)
at com.google.gdata.wireformats.input.CharacterParser.parse(CharacterParser.java:100)
at com.google.gdata.wireformats.input.XmlInputParser.parse(XmlInputParser.java:52)
at com.google.gdata.wireformats.input.AtomDualParser.parse(AtomDualParser.java:66)
at com.google.gdata.wireformats.input.AtomDualParser.parse(AtomDualParser.java:34)
at com.google.gdata.client.Service.parseResponseData(Service.java:2165)
at com.google.gdata.client.Service.parseResponseData(Service.java:2098)
at com.google.gdata.client.Service.getFeed(Service.java:1136)
at com.google.gdata.client.Service.getFeed(Service.java:1077)
at com.google.gdata.client.GoogleService.getFeed(GoogleService.java:676)
at com.google.gdata.client.Service.query(Service.java:1237)
at com.google.gdata.client.Service.query(Service.java:1178)
at com.wattalist.gdata.youtube.GdataYoutube.Search(GdataYoutube.java:47)
at com.wattalist.servlets.PlayerAjaxServlet.writeSearchResults(PlayerAjaxServlet.java:137)
at com.wattalist.servlets.PlayerAjaxServlet.doPost(PlayerAjaxServlet.java:108)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:405)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:964)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:515)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:722)
Caused by: com.google.gdata.util.ParseException: Invalid value for attribute : 'name'
at com.google.gdata.data.AttributeHelper.consumeEnum(AttributeHelper.java:592)
at com.google.gdata.data.youtube.YtPublicationState.consumeAttributes(YtPublicationState.java:184)
at com.google.gdata.data.AbstractExtension$AttributesHandler.processEndElement(AbstractExtension.java:263)
at com.google.gdata.util.XmlParser.endElement(XmlParser.java:1013)
at org.xml.sax.helpers.ParserAdapter.endElement(ParserAdapter.java:650)
at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.endElement(AbstractSAXParser.java:598)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanEndElement(XMLDocumentFragmentScannerImpl.java:1741)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2898)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:607)
at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:116)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:488)
at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:835)
at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:764)
at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:123)
at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1210)
at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:568)
at org.xml.sax.helpers.ParserAdapter.parse(ParserAdapter.java:429)
at com.google.gdata.util.XmlParser.parse(XmlParser.java:694)
... 39 more 
```

我对此进行了一些研究，我注意到在旧版本的 gdata youtbe api 中存在此问题，但可以通过以下解决方法解决：

> 临时解决方法是复制 com.google.gdata.data.youtube.YtPublicationState 的源并添加如下所示的受限类型。然后在类路径中将其添加到更高的位置。公共静态枚举状态{

```
/**
 * The video has not been completely defined yet, but it's been stored
 * already.
 * Either the video data or the description is missing.
 */
INCOMPLETE,

/** The video has just been uploaded and is not yet publicly available. */
PROCESSING,

/** The video has been rejected. */
REJECTED,

/** The video was not successfully processed. */
FAILED,

/** Video was removed by the owner. */
DELETED,

RESTRICTED,
; 
```

}

但我使用的是最新版本的 gdata-src.java-1.47.1 版本。我有罐子：

gdata-core-1.0.jar

gdata-youtube-2.0.jar

gdata-youtube-meta-2.0.jar

gdata-client-1.0.jar

gdata-client-meta-1.0.jar

gdata-media-1.0.jar

番石榴-11.0.2.jar jsr305.jar

邮件.jar

我检查了源代码中的 YtPublicationState 并且枚举状态具有 RESTRICTED 元素。

但我仍然得到例外。

我得到异常的源代码是：

```
public VideoFeed Search(String criteria, int maxResults, int startIndex)
{
    try
    {
        YouTubeQuery youtubeQuery = new YouTubeQuery(new URL("http://gdata.youtube.com/feeds/api/videos"));

        youtubeQuery.setFullTextQuery(criteria);
        youtubeQuery.setMaxResults(_maxResults);
        youtubeQuery.setStartIndex(_startIndex);

        VideoFeed videoFeed = _youtubeService.query(youtubeQuery, VideoFeed.class);

        return videoFeed;
    } catch (IOException ex)
    {
        Logger.getLogger(GdataYoutube.class.getName()).log(Level.SEVERE, null, ex);
    } catch (ServiceException ex)
    {
        Logger.getLogger(GdataYoutube.class.getName()).log(Level.SEVERE, null, ex);
    }

    return null;
} 
```

任何人都知道如何修复它或任何替代方法？（我想一一获得结果并在服务器上自行消除损坏的结果，但它会产生很多通信开销。）

# php - APC、磁盘命中和需要/包含

> ID：11301124
> 
> 赞同：2
> 
> 时间：2012-07-02T21:02:18.870
> 
> 标签：php, apc

很简单的问题，但我实际上无法确定。PHP 如何处理已经被 APC 缓存的文件的 requires/includes 行为？我的理解是，这个缓存主要保存 PHP 编译已经缓存的文件，但我不清楚它是否也保存了查找/获取文件所需的磁盘命中；所以，是吗？或者 PHP 是否会命中磁盘，即使操作码已经被缓存，唯一的区别是它不会再次执行编译过程？

我想认为 requires/includes 神奇地知道文件已缓存，因此由于 APC 直接从内存中获取它，但我刚刚意识到我没有理由假设这是这种情况，因此我问。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T21:06:59.010

我认为你关于这个主题的问题在 APC 手册中有解释，但它有点隐藏。您必须阅读[配置](http://php.net/manual/en/apc.configuration.php)部分才能找到它。尤其是查看[apc.stat](http://php.net/manual/en/apc.configuration.php#ini.apc.stat)配置选项，它说明了这一点：

> ...这默认为打开，强制 APC 统计（检查）每个请求的脚本以确定它是否已被修改。如果它已被修改，它将重新编译并缓存新版本。如果此设置关闭，APC 将不会检查
> ...
> 对于包含/必需的文件，此选项也适用，但请注意，对于相对路径包含（在 Unix 上任何不以 / 开头的路径）APC 必须按顺序检查唯一标识文件。如果您使用绝对路径包括 APC 可以跳过统计信息并使用该绝对路径作为文件的唯一标识符。

**因此，如果您通过文件的绝对路径包含/要求，**那么看起来 APC 正在以与原始脚本大致相同的方式缓存所需/包含的文件。如果您使用的是相对路径（很多人都这样做），则需要磁盘命中才能找到完整的文件名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T11:31:10.623

实际上，APC为 *once 变体（include_once、require_once）执行 OPEN 系统调用**。**您可以使用 strace 轻松检查这一点。

这是因为 *once 的代码略有不同，在调用 compile_filename 之前调用 zend_stream_open （被 apc 覆盖）：

[https://github.com/php/php-src/blob/master/Zend/zend_execute.h](https://github.com/php/php-src/blob/master/Zend/zend_execute.h)

错误跟踪器中也有一个未解决的问题： [https ://bugs.php.net/bug.php?id=59372](https://bugs.php.net/bug.php?id=59372)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T03:58:52.770

APC 覆盖 Zend 引擎中的 zend_compile_file 函数，它负责定位和打开实际文件；多亏了这一点，如果文件已经被缓存，它能够在磁盘命中发生之前“劫持”它们。

因此，是的，如果缓存了文件，则从内存中提供文件。

来源：[APC Technotes](http://svn.php.net/viewvc/pecl/apc/branches/APC_4_0/TECHNOTES.txt?view=markup)和 Zend Engine 源代码，特别是[zend_language_scanner.c](https://github.com/php/php-src/blob/master/Zend/zend_language_scanner.c)

# java - JFrame 的 getFocusOwner() 没有帮助

> ID：11301130
> 
> 赞同：5
> 
> 时间：2012-07-02T21:02:41.037
> 
> 标签：java, swing

我正在使用 Swing 程序并且遇到了一些麻烦。该程序有两个窗口（都是 JFrames）。主窗口很好，应该与这个问题无关。

我遇到问题的窗口包含一个带有 JPanel 的 JScrollPane，并且有一个 JMenuBar。JPanel 上有一堆 JTextComponents（一些 JTextFields，一些 JTextAreas）。

我想要做的是有一个附加到 JMenuItem 的 ActionListener 找到具有焦点的 JTextComponent。

我在[focused component reference](https://stackoverflow.com/questions/11203385/focused-component-reference)和[How to find out which object current has focus](https://stackoverflow.com/questions/720208/in-swing-how-can-i-find-out-what-object-currently-has-focus)中看到了之前的帖子。我的问题是调用特定窗口的`getFocusOwner()`方法仅返回 JFrame 的`JRootPane`，这完全没有帮助。所讨论的 JScrollPane 和 JPanel 都可以根据它们的`isFocusable()`方法获得焦点。即使我在单击菜单项之前将文本实际输入到其中一个 JTextComponents 中，也会发生这种情况。当我打开菜单和所有内容时，光标仍然在文本字段中闪烁。对于它的价值，`getMostRecentFocusOwner()`也只需返回 JRootPane。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T22:48:26.643

如果您使用 TextActions，则该操作*知道*哪个 JTextComponent 具有焦点。我已经修改了我在[此处](http://www.java-forums.org/javax-swing/7900-textaction-example.html)找到的一些代码，以表明即使 TextActions 来自一个 JTextArea，它们仍然会自动处理任何和所有具有焦点的文本组件：

```
import java.awt.GridLayout;
import javax.swing.*;

public class TextActionExample {
  public static void main(String[] args) {

    // Create a text area.
    JTextArea ta = new JTextArea(15, 30);
    ta.setLineWrap(true);

    // Add all actions to the menu (split into two menus to make it more
    // usable).
    Action[] actions = ta.getActions();
    JMenuBar menubar = new JMenuBar();
    JMenu actionmenu = new JMenu("Actions");
    menubar.add(actionmenu);

    JMenu firstHalf = new JMenu("1st Half");
    JMenu secondHalf = new JMenu("2nd Half");
    actionmenu.add(firstHalf);
    actionmenu.add(secondHalf);

    int mid = actions.length / 2;
    for (int i = 0; i < mid; i++) {
      firstHalf.add(actions[i]);
    }
    for (int i = mid; i < actions.length; i++) {
      secondHalf.add(actions[i]);
    }

    JTextField textField = new JTextField(20);
    JPanel textFieldPanel = new JPanel();
    textFieldPanel.add(textField);

    JPanel mainPanel = new JPanel(new GridLayout(1, 0, 5, 5));
    mainPanel.add(new JScrollPane(ta));
    mainPanel.add(new JScrollPane(new JTextArea(15, 30)));
    mainPanel.add(textFieldPanel);

    // Show it . . .
    JFrame f = new JFrame();
    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    f.getContentPane().add(mainPanel);
    f.setJMenuBar(menubar);
    f.pack();
    f.setVisible(true);
  }
} 
```

这是非常有趣的东西，我必须了解更多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T21:48:32.290

我想我已经解决了这个问题，因为当你点击一个菜单项时你会失去焦点，我们只需要等待焦点返回到组件，然后再检查谁有焦点，我使用摇摆计时器完成了这个等待 100ms 然后执行它的方法来检查哪个组件有焦点：

```
import java.awt.EventQueue;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.TimerTask;
import javax.swing.*;

public class JavaApplication180 extends JFrame {

    private JTextField[] JTextFields;
    private JMenuBar menuBar;
    private JMenu menu;
    private JMenuItem item;

    public JavaApplication180() {
        initComponents();

        createAndShowUI();
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new JavaApplication180();
            }
        });
    }

    private void createAndShowUI() {
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        getContentPane().setLayout(new GridLayout(2, 2, 10, 10));
        setJMenuBar(menuBar);
        addComponentsToPane();

        pack();
        setVisible(true);
    }

    private void initComponents() {
        JTextFields = new JTextField[4];

        menuBar = new JMenuBar();
        item = new JMenuItem("Who has focus?");
        item.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent ae) {
                TimerTask tt = new TimerTask() {

                    @Override
                    public void run() {
                        JOptionPane.showMessageDialog(null, getMostRecentFocusOwner().getName());
                    }
                };
                new java.util.Timer().schedule(tt, 100);
            }
        });

        menu = new JMenu("File");
        menu.add(item);
        menuBar.add(menu);
    }

    private void addComponentsToPane() {
        for (int i = 0; i < JTextFields.length; i++) {
            JTextFields[i] = new JTextField();
            JTextFields[i].setText(String.valueOf(i));
            JTextFields[i].setName(String.valueOf(i));
            getContentPane().add(JTextFields[i]);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-08T11:20:43.220

我可能为时已晚，但我只是在我的 JFrame 构造函数中执行了以下操作。

```
this.rootPane.setFocusable(false); 
```

现在

```
getFocusOwner() 
```

将返回当前的 JTextComponent 而不是 rootPane。然后，我在附加到我的 JMenuItem 的 ActionListener 中使用此代码来选择其中的文本。

```
if (getFocusOwner() instanceof JTextField)
{
    ((JTextField) getMostRecentFocusOwner()).selectAll();
} 
```

应该注意的是，如果您有 JScrollPane 等，您可能必须在 rootPane 和文本字段之间的所有组件上使用 setFocusable(false)。

希望这可以帮助其他有同样问题的人！

资料来源：个人经历

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T21:20:11.900

当我需要这个时，我写了一个焦点监听器。我有一个带有两列 JTextField 的 JPanel，焦点侦听器跟踪用户上次使用的列。我使用户能够通过单击按钮在最后一个焦点列中输入一些文本。您将只对所有文本字段使用 FocusListener 的一个实例，并有一个引用最近关注的组件的字段。然后，您的菜单操作可以查询该字段以确定要使用的文本字段。

请参阅[http://docs.oracle.com/javase/tutorial/uiswing/events/focuslistener.html](http://docs.oracle.com/javase/tutorial/uiswing/events/focuslistener.html)

# bash - 对于文件传递参数中的每一行 - 批处理脚本

> ID：11301132
> 
> 赞同：-1
> 
> 时间：2012-07-02T21:03:05.433
> 
> 标签：bash, scripting, batch-file

我正在尝试将一系列 bash 脚本转换为批处理文件。我对脚本的一部分有以下问题，该部分执行以下操作：

连接到网络共享，为每个具有特定根名称的文件夹找到最新版本，将里面的 .zip 复制到本地位置。它应该在一个目录中找到的所有文件夹中循环这个方法，这里是这个的 bash 版本：

```
for f in /xxx/xxx/xxx.xxx.game_android*
do
        cd $f
        ls | sed 's/_//g' | sed 's/test.sh//g' | sed 's/plist.txt//g' | sed 's/^...//' > $dir/res/temp_list.txt
        sort $dir/res/temp_list.txt > $dir/res/temp_list_sorted.txt
        rm $dir/res/temp_list.txt
        export atom=`tail -n1 $dir/res/temp_list_sorted.txt`
        export final=`ls | grep "$atom"`
        rm $dir/res/temp_list_sorted.txt
        cd $final
        echo "Copying atom: $atom"
        cp *.zip $dir/res/sb5-games/
        echo "Copying File: $f"
done 
```

这很好用，但是在尝试将其转换为批处理时，我遇到了很多问题。我能够安装 GnuWin32 CoreUtils、Sed 和 Grep，因此我能够使用所有相同的工具，但循环遍历目录中所有文件夹的实际过程不起作用。

我的问题：我将使用什么格式的 FOR 命令来遍历带有通配符的目录中的所有文件夹，那么我将如何在每个文件夹上执行我需要的一系列命令？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T02:31:03.987

`WhateverDirectory`您可以在批处理文件中使用以下构造遍历所有文件夹：

```
FOR /F "tokens=*" %%F IN ('DIR /AD /B WhateverDirectory' ) DO (
  PUSHD "WhateverDirectory\%%F"
  ECHO You are now in subdir %%F of WhateverDirectory
  ECHO and can do your stuff here
  ECHO etcetera
  POPD
) 
```

一个好的批处理指南是[http://www.ss64.com/nt/](http://www.ss64.com/nt/)或 checkout[什么是好的 Windows 批处理脚本参考指南？](https://stackoverflow.com/q/18254/1380680)

# sql - 将文件存储在 SQL Server 与 Amazon S3 之类的东西

> ID：11301136
> 
> 赞同：3
> 
> 时间：2012-07-02T21:03:19.490
> 
> 标签：sql, sql-server-2008, amazon-ec2, amazon-web-services

将文件作为字节数组存储在 SQL 表中和使用 Amazon S3 之类的东西来存储它们之间的优点/缺点是什么？S3 的优势是什么，所以我应该使用它而不是 SQL？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T21:06:47.303

在数据库中存储文件的优点：

*   事务一致性
*   安全性（假设您需要它并且您的数据库无论如何都不是开放的）

在数据库中存储文件的缺点：

*   更大的数据库文件 + 备份（如果您托管在其他人的存储上，这可能会很昂贵）
*   更难调试（你不能在 Management Studio 中说“SELECT doc FROM table”并弹出 Word）
*   更难将文档呈现给用户（并允许他们上传） - 您必须构建一个应用程序来获取文件并将其存储在数据库中，然后拉取文件，而不是仅仅提供文件系统上文件的链接从数据库中将其呈现给用户。
*   通常，数据库文件存储和 I/O 的收费要比平面文件存储高得多

# ruby-on-rails - Ruby on rails 从 link_to 标记传递超链接的值

> ID：11301137
> 
> 赞同：0
> 
> 时间：2012-07-02T21:03:26.667
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

在我看来，我有以下代码：

```
<%= form_for :command_selected, :method => "get", :url => {:action => "command_domain_selected"} do |f| %>

<a> <%= link_to "Make Deployment",  {:controller=>"authorization",  :action => 'command_domain_selected',:id=>'make_deployment'}, :remote=> true %><br /></a>

 <%= f.radio_button :domain, '1dev' %> <%= label :domain, '1dev'%><br />
 <%= f.radio_button :domain, '2dev' %> <%= label :domain, '2dev'%><br />

<script type=text/javascript>
$('a').click(function(){     $('form').submit();     return false; }); 
</script>

<%end%> 
```

当我点击`Make Deployment`上面代码中的“”链接时，只有`selected radio button`被作为参数传递给`command_domain_selected`控制器​​中的操作。请让我知道如何传递值`hyperlink`。谢谢

我也添加了以下代码：

```
<%= link_to 'Make Deployment', "#", :onclick=>"$('.search_form').submit()" , :id => 'make_deployment'%> 
```

但是传递的参数只是单选按钮值而不是超链接值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T21:58:16.443

我和尤里在一起。使用表单（方法 get ，它将全部放在 URL 中）。然后，如果您大惊小怪，只需将按钮设置为看起来像一个链接！

否则，如果您必须继续丑陋，请添加一个带有您要提交的额外参数的 hidden_​​field。它没有传递超链接参数，因为这与表单无关（与提交按钮不同）

# python - 如何检查变量是否为具有 python 2 和 3 兼容性的字符串

> ID：11301138
> 
> 赞同：182
> 
> 时间：2012-07-02T21:03:29.020
> 
> 标签：python, string, python-3.x, python-2.x

我知道我可以使用：`isinstance(x, str)`在 python-3.x 中，但我还需要检查某些内容是否是 python-2.x 中的字符串。会`isinstance(x, str)`在 python-2.x 中按预期工作吗？还是我需要检查版本并使用`isinstance(x, basestr)`？

具体来说，在 python-2.x 中：

```
>>>isinstance(u"test", str)
False 
```

而python-3.x没有`u"foo"`

* * *

## 回答 #1

> 赞同：216
> 
> 时间：2012-07-02T21:23:46.460

如果您正在编写与 2.x 和 3.x 兼容的代码，您可能需要使用[6 个](http://packages.python.org/six/#six.string_types)：

```
from six import string_types
isinstance(s, string_types) 
```

* * *

## 回答 #2

> 赞同：121
> 
> 时间：2014-03-27T06:35:05.343

我发现的最简洁的方法不依赖于像六个这样的包，是：

```
try:
  basestring
except NameError:
  basestring = str 
```

然后，假设您一直在以最通用的方式检查 Python 2 中的字符串，

```
isinstance(s, basestring) 
```

现在也适用于 Python 3+。

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2015-11-13T18:40:17.710

怎么样，在所有情况下都有效？

```
isinstance(x, ("".__class__, u"".__class__)) 
```

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2012-07-02T22:01:44.517

这是@Lev Levitsky 的答案，稍微改写了一下。

```
try:
    isinstance("", basestring)
    def isstr(s):
        return isinstance(s, basestring)
except NameError:
    def isstr(s):
        return isinstance(s, str) 
```

`try`/测试完成一次，然后`except`定义一个始终有效且尽可能快的函数。

编辑：实际上，我们甚至不需要调用`isinstance()`; 我们只需要评估`basestring`，看看我们是否得到`NameError`：

```
try:
    basestring  # attempt to evaluate basestring
    def isstr(s):
        return isinstance(s, basestring)
except NameError:
    def isstr(s):
        return isinstance(s, str) 
```

不过，我认为调用 to 更容易`isinstance()`。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2017-10-09T08:22:07.597

该[`future`库](http://python-future.org/compatible_idioms.html#unicode)添加（到 Python 2）**兼容名称**，因此您可以**继续编写 Python 3**。您可以简单地执行以下操作：

```
from builtins import str
isinstance(x, str) 
```

* * *

**要安装它**，只需执行`pip install future`.

需要*注意*的是，它只支持`python>=2.6`, `>=3.3`，但它比`six`, 更现代，只有在使用时才[推荐`python 2.5`](https://docs.python.org/3/howto/pyporting.html#drop-support-for-python-2-6-and-older)

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2012-07-02T21:09:39.580

也许使用类似的解决方法

```
def isstr(s):
    try:
        return isinstance(s, basestring)
    except NameError:
        return isinstance(s, str) 
```

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2013-02-28T05:35:08.730

您可以通过调用来获取对象的类`object.__class__`，因此为了检查对象是否为默认字符串类型：

```
 isinstance(object,"".__class__) 
```

您可以将以下内容放在代码的顶部，以便用引号括起来的字符串在 python 2 中是 unicode：

```
 from __future__ import unicode_literals 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-03-19T06:47:41.380

您可以在代码开头尝试此操作：

```
from __future__ import print_function
import sys
if sys.version[0] == "2":
    py3 = False
else:
    py3 = True
if py3: 
    basstring = str
else:
    basstring = basestring 
```

稍后在代码中：

```
anystring = "test"
# anystring = 1
if isinstance(anystring, basstring):
    print("This is a string")
else:
    print("No string") 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-10-07T23:05:41.897

当心！在python 2中，`str`和`bytes`本质上是一样的。如果您试图区分两者，这可能会导致错误。

```
>>> size = 5    
>>> byte_arr = bytes(size)
>>> isinstance(byte_arr, bytes)
True
>>> isinstance(byte_arr, str)
True 
```

* * *

## 回答 #10

> 赞同：-5
> 
> 时间：2016-06-08T18:42:34.900

类型（字符串）== str

如果是字符串则返回 true，否则返回 false

# kml - 嵌入式 Google 地球插件不再工作

> ID：11301140
> 
> 赞同：0
> 
> 时间：2012-07-02T21:03:36.030
> 
> 标签：kml, google-earth-plugin

我真的希望有人能帮助我。我刚刚注意到，我网站的谷歌地球嵌入式插件（在 Safari、Chrome 或 Firefox 中）都不再工作了，您现在只能看到空白区域和显示“信息暂时不可用”的小文本。

我不知道他们为什么不再工作。什么都没有改变。

此处示例：http: [//www.grandcanyonvirtualtour.com/_tours/phantom_ranch.html](http://www.grandcanyonvirtualtour.com/_tours/phantom_ranch.html)

任何建议都非常感谢！

请注意，我不是编码员——我是一名摄影师，正在学习如何将照片整合到地图中，所以如果有任何问题是基本的，我深表歉意。

谢谢，萨拉

我在 MacBook Pro 2.4 GHz Intel Core i7 上；操作系统 10.7.4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T10:41:44.553

根据[此处](http://www.gmodules.com/ig/creator?synd=open&url=http://dl.google.com/developers/maps/embedkmlgadget.xml)生成的代码，您的嵌入式 Google 地球小工具应位于一个`script`元素中，例如：

```
<script src="//www.gmodules.com/ig/ifr?url=http://dl.google.com/developers/maps/embedkmlgadget.xml&amp;up_kml_url=http%3A%2F%2Fwww.grandcanyonvirtualtour.com%2F_kml%2Fgrand_canyon_fly_thru_tour.kmz&amp;up_view_mode=earth&amp;up_earth_2d_fallback=0&amp;up_earth_fly_from_space=1&amp;up_earth_show_nav_controls=1&amp;up_earth_show_buildings=1&amp;up_earth_show_terrain=1&amp;up_earth_show_roads=1&amp;up_earth_show_borders=1&amp;up_earth_sphere=earth&amp;up_maps_zoom_out=0&amp;up_maps_default_type=map&amp;synd=open&amp;w=500&amp;h=400&amp;title=Embedded+KML+Viewer&amp;border=%23ffffff%7C3px%2C1px+solid+%23999999&amp;output=js"></script> 
```

但是，查看您链接到的网站，小工具 URL 位于 iframe 中，例如：

```
<iframe src="http://www.gmodules.com/..." 
```

也许这是你的问题？

# java - Math.max 和 Math.min 是否改变了它们所应用的值？

> ID：11301147
> 
> 赞同：1
> 
> 时间：2012-07-02T21:03:56.547
> 
> 标签：java

我一直在阅读我的一位讲师设置的一些代码，他写了类似“让我们为一个值设置最大值和最小值”之类的内容。

然后他写道（我在这里解释价值观）

```
int x = 5;
x = Math.min(x, 0);
x = Math.max(x, 10); 
```

然后他继续他的代码，好像 x 仍然等于 5，而当我通过我的计算机运行这段代码时，max 和 min 函数总是将 x 的值更改为 0，然后是 10。

**这听起来像是他的一个错误吗？他应该在继续之前恢复 x 吗？或者这个函数是否以其他方式工作，具体取决于它在不改变原始变量的情况下实际设置最大值和最小值的情况？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T21:07:29.507

你说的对; 他大概是这个意思：

```
int x = 5;
x = Math.max(x, 0);
x = Math.min(x, 10); 
```

使 x 保持在 0 到 10 之间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T21:06:18.257

这是他的错误。当您分配一个变量时，`=`它会将其设置为该值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T21:05:56.790

是的。这是他的错误。

# css - 制作一个空的 DIV 高度和其容器的宽度

> ID：11301151
> 
> 赞同：2
> 
> 时间：2012-07-02T21:04:40.330
> 
> 标签：css, html, background-color

我的 HTML 当前包含一个随视口延伸的背景图像。在其中，我计划放置一个`div`延伸到视口的高度和宽度，并且具有 50% 不透明度的黑色背景颜色。

我已将其设置`div`为 100% 的宽度和高度。没有拉伸，`div`我不知道为什么！

HTML：

```
<!DOCTYPE HTML>
<html lang="en"> 
    <head>
        <title>Tester</title>   
        <meta charset="UTF-8"/> 
        <style type="text/css"> 
            html { 
                background: url(http://cjpstudio.com/wp-content/uploads/2011/12/cityrock1.jpg) no-repeat center center fixed; 
                -webkit-background-size: cover;
                -moz-background-size: cover;
                -o-background-size: cover;
                background-size: cover;
            }

            #background-color   {
                width: 100%;
                height: 100%;
                background-color: #000000;
            }       
        </style>
    </head> 
    <body>  
        <div id="background-color"> 
        </div>  
    </body> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T21:09:54.900

作为替代方案`width`，`height`您可以使用`position`：

```
#background-color {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(0,0,0,0.5);
} 
```

这将或可能允许用户滚动将移动`#background-color`元素的页面，以避免用户移动图像的可能性，`position: fixed`而是使用。

如果该`#background-color`元素有一个祖先元素，`position`则`static`该元素将相对于该祖先元素定位，而不是相对于页面/文档 (for `position: absolute`) 或视口 (for `position: fixed`)。

尽管如果这是为了阻止用户与您网站的内容进行交互，那么它当然注定要失败。

* * *

**针对 OP 的评论进行了**编辑，如下：****

 **> 你能解释一下为什么吗？我不明白如何/是如何`div`获得填充窗口的指令。我以为我完全理解`position`了……我想不是。无论如何，解释将非常有帮助。

当然，这不是什么解释，这只是通过使用`absolute`or定位元素`fixed`，然后将其轴定位在视口的两侧，`0px`从`top`，`0px`从`left`侧面，`0px`从`right`侧面和`0px`从`bottom`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T21:12:23.480

在 html 和 body 标签上设置 100% 的宽度和（最小）高度。还要注意@black 而不是黑色。

如果你想要一个完整的页面块。将元素设置为固定为您现在拥有的 100% 宽度和高度可能会更好（如其他评论中所述）

固定效果更好，因为它将元素与窗口元素匹配。Absolute 会将元素与最近的祖先相匹配，具有相对、绝对或固定定位。从 IE7 开始支持固定。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-17T06:14:20.240

基本上，在这种情况下，您需要绝对位置，我只需编辑您的代码，让您完全按照自己的意愿行事：

```
html {
  background: url(http://chrisjepson.com/wp-content/uploads/2017/06/PrideBus2017_CJP2043-web-700x485.jpg) no-repeat center center fixed;
  -webkit-background-size: cover;
  -moz-background-size: cover;
  -o-background-size: cover;
  background-size: cover;
}

#background-color {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: #000000;
  opacity: .5;
}
```

```
<!DOCTYPE HTML>
<html>

<head>
  <title>Tester</title>
</head>

<body>
  <div id="background-color"></div>
</body>

</html>
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T21:12:57.097

背景不会显示，因为该 div 中没有内容。如果您希望 div 覆盖页面而没有任何内容，这似乎对我有用

```
#background-color   {
            position:absolute;
            top:0;
            left:0;
            width:100%;
            height: 100%;
            background-color: @black;
            } 
```

希望这对你有用:)**

# php - mysql真正的转义字符串和Cookies

> ID：11301153
> 
> 赞同：0
> 
> 时间：2012-07-02T21:04:44.237
> 
> 标签：php, mysql, sql, sanitization, mysql-real-escape-string

有什么理由这是不好的形式吗？页面上唯一的用户输入数据是

```
// Set username and password from cookies
    $username = mysql_real_escape_string($_COOKIE["username"]);
    $password = mysql_real_escape_string($_COOKIE['password']); 
```

我对消毒的想法真的很陌生。有什么理由这是一种糟糕的做事方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T21:05:50.350

**永远不要**将用户的数据存储在 cookie 中！

这是我的建议：

*   将用户 ID 存储在 cookie 中
*   生成特殊令牌和哈希+盐并将它们存储在 cookie 中
*   将所有内容存储在数据库中
*   在每次页面加载时从 cookie 中获取数据并尝试在数据库中搜索它们
*   如果找不到，则注销用户
*   在每次页面加载时更改令牌

# python - python、libsvn 和 cant 文件 python 导入

> ID：11301155
> 
> 赞同：0
> 
> 时间：2012-07-02T21:04:52.910
> 
> 标签：python, libsvm

我已经安装了 libsvm-3.12 并放入：

*   /home/ubuntu/libsvm-3.12

在我的 pythonpath 中，我有以下内容：

```
echo $PYTHONPATH
/home/ubuntu/libsvm-3.12/python:/home/ubuntu/libsvm-3.12:$PYTHONPATH 
```

这在家庭中的 .bashrc 和 /etc/enviroments 中

我重新启动了机器。

从python我得到：

```
>>> import svmulti
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named svmulti 
```

我如何让python知道lib在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T21:19:12.743

通过`make`in 进行安装，`.../libsvm-3.12/python,`我认为您还想要：

```
>>> import svmutil 
```

不是：

```
>>> import svmulti 
```

# objective-c - iOS 钥匙串问题。由于 SecItemCopyMatching() 的结果，SecKeyRef 始终为 null

> ID：11301158
> 
> 赞同：3
> 
> 时间：2012-07-02T21:05:31.267
> 
> 标签：objective-c, ios, keychain

SecKeyRef 始终为空，即使我没有从任何状态中得到任何错误。我最初认为这是一个弧线问题，但演员表看起来还不错。任何帮助，将不胜感激。

```
+ (SecKeyRef)addPublicKey:(NSString *)key withTag:(NSString *)tag
    {
        // This will be base64 encoded, decode it.
        NSData *d_key = [key dataUsingEncoding:NSUTF8StringEncoding];

        if (d_key == nil) return (FALSE);

        NSData *d_tag = [NSData dataWithBytes:[tag UTF8String] length:[tag length]];

        // Delete any old lingering key with the same tag
        NSMutableDictionary *publicKey = [[NSMutableDictionary alloc] init];
        [publicKey setObject:(__bridge id) kSecClassKey forKey:(__bridge id)kSecClass];
        [publicKey setObject:(__bridge id) kSecAttrKeyTypeRSA forKey:(__bridge id)kSecAttrKeyType];
        [publicKey setObject:d_tag forKey:(__bridge id)kSecAttrApplicationTag];
        SecItemDelete((__bridge CFDictionaryRef)publicKey);

        CFTypeRef persistKey = nil;

        // Add persistent version of the key to system keychain
        [publicKey setObject:d_key forKey:(__bridge id)kSecValueData];
        [publicKey setObject:(__bridge id) kSecAttrKeyClassPublic forKey:(__bridge id)kSecAttrKeyClass];
        [publicKey setObject:[NSNumber numberWithBool:YES] forKey:(__bridge id)kSecReturnPersistentRef];

        OSStatus secStatus = SecItemAdd((__bridge CFDictionaryRef)publicKey, &persistKey);

        NSLog(@"OSStatus = %ld", secStatus);  // Always returns no error = 0

        if (persistKey != nil) CFRelease(persistKey);

        if ((secStatus != noErr) && (secStatus != errSecDuplicateItem)) {
            return nil;
        }

        // Now fetch the SecKeyRef version of the key
        SecKeyRef keyRef;

        [publicKey removeObjectForKey:(__bridge id)kSecValueData];
        [publicKey removeObjectForKey:(__bridge id)kSecReturnPersistentRef];
        [publicKey setObject:[NSNumber numberWithBool:YES] forKey:(__bridge id)kSecReturnRef];
        [publicKey setObject:(__bridge id)kSecAttrKeyTypeRSA forKey:(__bridge id)kSecAttrKeyType];

        secStatus = SecItemCopyMatching((__bridge CFDictionaryRef)publicKey, (CFTypeRef *)&keyRef);

        NSLog(@"secStatus = %ld", secStatus); // Always returns no error = 0

        return keyRef; // Always null!
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T20:57:02.573

我正在做类似的事情，并遇到了这篇文章。我试过你的代码，它对我来说很好，所以我认为它是正确的。我怀疑关键数据有误。我尝试通过这种方法提供错误的关键数据，它给了我一个空引用，就像你说的那样。我正在使用这个从模数和指数构建公钥（ASN.1 DER） -

[https://github.com/meinside/iphonelib/blob/master/security/CryptoUtil.m#L67](https://github.com/meinside/iphonelib/blob/master/security/CryptoUtil.m#L67)

请注意，有几个待处理的拉取请求。

我想也许你应该尝试一个 .cer 文件或使用 openssl 生成一个 rsa 密钥，并使用 CryptoUtil 的模数和指数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-08T19:42:07.633

我意识到这是一个老问题，但我有同样的问题，所以我会在这里添加我的发现。也许它会帮助某人。

首先，在您的情况下，您似乎没有在解码 RSA 密钥。您有注释来解码 base64 编码的密钥，但是您只需将其转换为 NSData 对象。您必须对 RSA 密钥进行 base64 解码。

其次，确保从密钥字符串中去除标题和任何新行。

然后 base64 解码字符串并将其转换为 NSData 以用于 kSecValueData。

就我而言，我正在将密钥转换为 NSData，然后对其进行解码……不确定这是否是解码器的问题，但我一直得到一个空的 secKeyRef。我的解码器仅在我解码密钥字符串然后转换为 NSData 时才有效。

那一条信息让我有一段时间的退缩。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-06-13T15:36:23.967

我也遇到了这个问题，最后可以通过以正确的格式（ASN.1 DER 格式）发送输入数据（关键参数）来解决它。尽管没有错误和状态代码 0，但以下方法没有产生任何密钥，就像@reedjsmith 提到的那样 - 当数据以任何其他格式（普通 base64 编码数据）或使用 PKCS#1 填充以外的任何内容生成的密钥数据时。

*   (SecKeyRef)addPublicKey:(NSString *)key withTag:(NSString *)tag

# c++ - 可以将“this”动态转换为返回值吗？

> ID：11301161
> 
> 赞同：4
> 
> 时间：2012-07-02T21:05:42.160
> 
> 标签：c++, templates, design-patterns, this, dynamic-cast

这更像是一个设计问题。

我有一个模板类，我想根据模板类型向它添加额外的方法。为了实践 DRY 原则，我提出了这种模式（有意省略了定义）：

```
template <class T>
class BaseVector: public boost::array<T, 3>
{
protected:
    BaseVector<T>(const T x, const T y, const T z);
public:
    bool operator == (const Vector<T> &other) const;
    Vector<T> operator + (const Vector<T> &other) const;    
    Vector<T> operator - (const Vector<T> &other) const;
    Vector<T> &operator += (const Vector<T> &other)
    {
        (*this)[0] += other[0];
        (*this)[1] += other[1];
        (*this)[2] += other[2];

        return *dynamic_cast<Vector<T> * const>(this);
    }

    virtual ~BaseVector<T>()
    {
    }
}

template <class T>
class Vector : public BaseVector<T>
{
public:
    Vector<T>(const T x, const T y, const T z)
    : BaseVector<T>(x, y, z)
    {
    }
};

template <>
class Vector<double> : public BaseVector<double>
{
public:
    Vector<double>(const double x, const double y, const double z);
    Vector<double>(const Vector<int> &other);
    double norm() const;
}; 
```

我打算 BaseVector 只不过是一个实现细节。这行得通，但我担心`operator+=`. 我的问题是：`this`指针的动态转换是代码气味吗？有没有更好的方法来实现我想要做的事情（避免代码重复和用户代码中不必要的强制转换）？或者我是安全的，因为 BaseVector 构造函数是私有的？

## 编辑：

抱歉，是的，我有虚拟 dtor，但我忘了粘贴它，没有它代码无法编译。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T21:54:41.553

我建议您考虑一种替代方法（请注意，在下面的示例中，我已将代码简化为演示替代方法所需的最低限度）。

首先，考虑奇怪重复的模板参数（CRTP）：

```
template <typename T, typename DerivedVector>
struct BaseVector
{
    DerivedVector& operator+=(DerivedVector const& other)
    {
        return static_cast<DerivedVector&>(*this);
    }
};

template <typename T>
struct Vector : BaseVector<T, Vector<T>>
{
}; 
```

由于您总是知道派生类型是什么，因此 a`static_cast`就足够了。If`Vector<T>`是唯一的基类，`BaseVector<T>`并且如果您保证`T`参数始终相同，那么严格来说，CRTP 参数是不必要的：您始终知道派生类型是什么，因此 a`static_cast`是安全的。

或者，考虑运算符不必是成员函数，因此您可以声明非成员运算符函数模板：

```
template <typename T, typename DerivedVector>
struct BaseVector
{
};

template <typename T>
struct Vector : BaseVector<T, Vector<T>>
{
};

template <typename T>
Vector<T>& operator+=(Vector<T>& self, Vector<T> const& other)
{
    return self;
} 
```

虽然后者更适合操作员，但它不适用于普通的非操作员成员函数，因此 CRTP 方法更适合那些。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-02T21:13:37.003

是的，从技术角度来看是可以的。但是，为了使`dynamic_cast`您的基类能够工作，您的基类需要是多态的。因此，您至少需要将析构函数（纯）虚拟化。

我还想添加它而不是：

```
// potential null dereference
return *dynamic_cast<Vector<T> * const>(this); 
```

写起来更安全：

```
// potential std::bad_cast exception
return dynamic_cast<Vector<T> & const>(*this); 
```

要回答您的原始问题：

> 有没有更好的方法来实现我想要做的事情（避免代码重复和用户代码中不必要的强制转换）？

是的。如果您想了解更多信息，请阅读*静态多态性*、*奇怪重复的模板模式*和*基于策略的类设计。*

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-02T21:13:05.647

你的方法都不是`virtual`. 如果没有任何虚方法，编译器将不会添加任何运行时类型信息。没有 RTTI，`dynamic_cast`将无法工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-02T21:19:08.253

我认为实现这一点的更好方法是[pimpl idiom](http://c2.com/cgi/wiki?PimplIdiom)。正如您所说， BaseVector 只是一个实现细节。因此，您班级的客户应该不知道它（这使您可以自由更改它）。

在这种情况下，这将需要`Vector` *包含*一个 BaseVector 而不是从它继承。然后它会定义自己的算术赋值运算符，然后转发给 BaseVector。

这并不违反 DRY，因为仍然只有一个版本的实现细节，它们位于`BaseVector`. 重复界面非常好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-15T17:32:19.570

这是一个老问题，但我最近不得不解决同样的问题，然后碰巧偶然发现了这个问题，所以我想我会回答。

我使用了一个类型包装器，以便让专业化“从自身派生”：

```
template <class T>
struct type_wrapper;

template <class T>
struct unwrap_type
{
    typedef T type;
};

template <class T>
struct unwrap_type<type_wrapper<T>>
{
    typedef T type;
};

template <class WrappedT>
class Vector: public boost::array<typename unwrap_type<WrappedT>::type, 3>
{
    typedef typename unwrap_type<WrappedT>::type T;
protected:
    Vector(const T x, const T y, const T z);
public:
    bool operator == (const Vector &other) const;
    Vector<T> operator + (const Vector &other) const;    
    Vector<T> operator - (const Vector &other) const;
    Vector<T> &operator += (const Vector &other)
    {
        (*this)[0] += other[0];
        (*this)[1] += other[1];
        (*this)[2] += other[2];

        return static_cast<Vector<T> &>(*this);
    }
}

template <>
class Vector<double> : public Vector<type_wrapper<double>>
{
public:
    Vector(const double x, const double y, const double z);
    Vector(const Vector<int> &other);
    double norm() const;
}; 
```

这样，您就不需要任何多余的类——除了类型包装器和元函数，它们是可重用的。

# shell - 从终端打开 Chrome 并打开开发者控制台

> ID：11301163
> 
> 赞同：22
> 
> 时间：2012-07-02T21:05:46.040
> 
> 标签：shell, google-chrome, console, terminal, command-line-arguments

我可以使用 命令行从命令行运行 Google Chrome `$ google-chrome`，但是我可以传递什么标志来在开发者控制台已经打开的情况下打开它，最好是打开到控制台选项卡？

我检查了 google-chrome 的手册页，但它指出

> Google Chrome 有数百个未记录的命令行标志，可以根据开发人员的心血来潮添加和删除。

我希望那些无证标志之一能做我想要的。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2017-01-03T21:26:14.557

您正在寻找的标志是[--auto-open-devtools-for-tabs](http://peter.sh/experiments/chromium-command-line-switches/#auto-open-devtools-for-tabs)。请注意，您应该在此设置生效之前**退出 Chrome 。**

这至少从 Chrome 55.0.2883.87 m（初始发布的最新版本）开始就有效

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-03T23:29:18.440

一位 Google 员工维护着这个自动更新的[Chromium 标志](http://peter.sh/experiments/chromium-command-line-switches/)列表。似乎没有在打开开发者控制台的情况下打开 Chrome 的标志。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T07:13:41.407

你到底想通过什么来实现？如果你正在尝试运行某种自动化测试，你应该试试 PhantomJS。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-27T16:26:30.367

似乎没有这样的选择。我在 Chrome 产品论坛 [https://productforums.google.com/forum/#!category-topic/chrome/give-feature-feedback-and-suggestions/mac/Stable/3HYIAl8_ndc添加了一个功能请求](https://productforums.google.com/forum/#!category-topic/chrome/give-feature-feedback-and-suggestions/mac/Stable/3HYIAl8_ndc)

# iframe - 防止 iframe 在表单提交时从外部重定向

> ID：11301171
> 
> 赞同：1
> 
> 时间：2012-07-02T21:06:15.400
> 
> 标签：iframe, onclick, submit

我的登录表单位于我网站上的 iframe 中，并在正确提交后自动将人们发送到所需的欢迎页面。

但是，如果输入的密码不正确，iframe 会转到一个外部 url，说密码不正确，再试一次 - 或者类似的话。

我需要的是不正确的提交，以某种方式阻止 iframe 加载外部 url 并强制它在 iframe 中加载我自己的页面。

我想知道各种可能的方法，但几乎没有编码知识。

1 选项可能是在提交时（或之后），它会激活主页上的一些代码，告诉它在 iframe 中加载我自己的页面。理论上，在正确提交时，欢迎页面在 iframe 有机会重新加载之前已经加载。

另一种选择可能是在提交时，链接到提交按钮（onclick 或类似）的一些代码在有机会从外部加载之前重新加载到框架中的页面或我选择的页面 - 再次正确提交到欢迎页面在有机会重新加载之前。

这听起来可能吗？

当前代码是...

```
<form action="http://www.othersite.com/action=login&amp;base=" method="post" style="margin: 0">
<div class="border" style="padding: 12px; width: 80%; margin: 0">
<h3 class="font">Login</h3>
<label class="font2" style="display: block" for="username">Email</label>
<input class="font2" name="username" tabindex="1" id="username" style="width: 100%; color: black">
<label class="font2" style="display: block" for="password">Password</label>
<input class="font2" type="password" name="password" tabindex="2" id="password" style="width: 100%">
<div style="padding-top: 0px">
<br> 
    <input type="submit" value="Sign in" class="font3 button" tabindex="3">
    </div>

</div>
</form> 
```

谢谢，汤姆

# javascript - 如何根据访问者的动作加载巨大画廊照片的一部分？

> ID：11301181
> 
> 赞同：0
> 
> 时间：2012-07-02T21:07:03.823
> 
> 标签：javascript, jquery, xml

在*data.js*文件中，我的画廊照片的路径如下所示。

```
var PMalbum = [
    {
        src: "images/moleskineh.jpg",
        caption: "'moleskineh' - By Amir K (childofwar @ flickr)"
    },
    {
        src: "images/888.jpg",
        caption: "'888' - By doug.siefken (siefken @ flickr)"
    }
]; 
```

我有数百张照片，画廊加载太慢。我想只显示一个*x*数量的照片，如果访问者点击“显示更多”或者他在页面底部，那么脚本将显示更多照片。

我之前有一个这样的案例，但是有一个 XML 文件，我解决了它。问题是我怎么能用这个*js*文件来做呢？我的选择是什么？

# ruby-on-rails-3 - 基于多个复选框选择的 rails OR 查询

> ID：11301182
> 
> 赞同：1
> 
> 时间：2012-07-02T21:07:13.467
> 
> 标签：ruby-on-rails-3, activerecord, arel

这似乎应该是一个常见问题，但我无法找到答案。基本上我想要一个包含 10 个左右复选框的表单，我用`check_box_tag`. 提交表单后，我想生成一个查询，该查询返回与任何选中的选择匹配的所有记录。因此，选中的选项数量会有所不同。

所以，例如，如果我有

```
class Book < ActiveRecord::Base
  belongs_to :author
end 
```

我想生成类似的东西

`Book.where("author_id = ? or author_id = ?", params[authors[0]], params[authors[1]])`如果选中了两个框，等等。

感谢您的任何见解。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T21:16:44.997

这对你有用吗？

```
Book.where(author_id: [array_of_author_ids]) 
```

您需要先从 params 收集 author_ids

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T22:04:31.293

我最近不得不做类似的事情，这就是我实现这一目标的方式。这很聪明（至少我是这么认为的。:)）

我创建了一个查询模型，它在 JSON 中序列化查询列（文本字段）。我使用表单从带有选择字段的用户那里获取查询数据。

```
class BookQuery < ActiveRecord::Base
  has_many :books

  # loop through each foreign key of the Book table and create a hash with empty selection
  def self.empty_query
    q = {}
    Book.column_names.each do |column_name|
      next unless column_name.ends_with?("_id")
      q.merge column_name => []
    end
  end
end 
```

下面我以作者为例： <%= form_for @book_query do |f| %> <% for author in Author.all %> <%= check_box_tag "book_query[query][author_ids][]", author.id, false%> <%= author.name %> <% end %> <% = f.submit "保存查询" %> <% end %>

提交此表单时，您最终会得到如下参数： 提交表单时，它会生成此参数：

```
Parameters: {"utf8"=>"✓", "authenticity_token"=>"XXXXXXXXXXX", "book_query"=>{"query"=>{"author_ids"=>["2", "3"]}}, "commit"=>"Save Query"} 
```

现在在 BookQuery 控制器的 create 操作中，您可以执行 create 函数始终执行的操作：

```
def create
  @book_query = BookQuery.build(params[:book_query])
  if @book_query.save
    flash[:success] = "Book query successfully saved."
    redirect_to ...
  else
    flash[:error] = "Failed to save book query."
    render :new
  end
end 
```

但默认情况下，rails 将数据序列化为哈希类型：

```
1.9.3p194 :015 > pp BookQuery.find(9).query
BookQuery Load (0.7ms)  SELECT "book_queries".* FROM "book_queries" WHERE "book_queries"."id" = $1 LIMIT 1  [["id", 9]]
"--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nauthor_ids:\n- '2'\n- '3'\n"
=> "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nauthor_ids:\n- '2'\n- '3'\n" 
```

在 BookQuery 模型中，添加以下内容：

```
serialize :query, JSON 
```

但是 rail 会将 ID 更改为字符串：

```
1.9.3p194 :018 > query = JSON.parse(BookQuery.find(10).query)
BookQuery Load (0.5ms)  SELECT "book_queries".* FROM "book_queries" WHERE "book_queries"."id" = $1 LIMIT 1  [["id", 10]]
=> {"author_ids"=>["2", "3"]} 
1.9.3p194 :019 > query["author_ids"]
=> ["2", "3"] 
```

然后我所做的是覆盖 BookQuery 模型中的属性访问器：

必须完成以下操作，因为哈希返回字符串，而不是整数中的 id。

```
def query=(query)
  query.each_pair do |k, v|
    if query[k].first.present?
      query[k].map!(&:to_i)
    else
      query.except!(k)
    end
  end
  write_attribute(:query, query)
end

# just want to avoid getting nil query's
def query
  read_attribute(:query) || {}
end 
```

要使用此查询查找书籍，您只需将此函数添加到您的 Book 模型：

```
def self.find_by_book_query(book_query, options = {})
  options[:conditions] = book_query.query
  find(:all, options)
end 
```

现在，您将获得一个基于模型定义 Book 的可自定义查询字符串，并且一切都像 Rails 方式一样工作。:)

# ruby-on-rails - github推送源主

> ID：11301183
> 
> 赞同：-4
> 
> 时间：2012-07-02T21:07:15.197
> 
> 标签：ruby-on-rails, git, github

> **可能重复：**
> [Git 非快进被拒绝](https://stackoverflow.com/questions/5667476/git-non-fast-forward-rejected)

![](../Images/3a29973986f89fd63fd199b88fe46025.png)

如何修复此错误？以前没有发生

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T21:12:40.287

好吧，消息告诉你该做什么：git pull，（获取并合并更改），然后再次 git push。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T21:11:54.927

`git pull origin master`将抓取遥控器的更改并将它们与您的合并。

`git rebase origin/master`将在远程的任何更改之上重播您不在远程中的本地更改。在您执行 a 之后`git fetch origin`，拉动会自动执行 fetch 步骤。了解[git](http://git-scm.com/book/en/Git-Branching-Rebasing)中的变基。

发生的事情是其他人（或您在另一台机器上）也使用一组不同的提交推送到原始存储库。在你有这些提交之前，它不会让你推送，除非你包含`--force`. 除非你不得不这样做，否则不要这样做。

# r - 使用包“预测”版本 3.22 auto.arima

> ID：11301184
> 
> 赞同：-4
> 
> 时间：2012-07-02T21:07:17.287
> 
> 标签：r, prediction, forecasting

我使用了自动 ARIMA 并得到了这样的结果：

```
Series: JMB 
ARIMA(5,1,4)(2,0,2)[96] with drift         

Coefficients:
         ar1     ar2      ar3     ar4      ar5      ma1      ma2     ma3      ma4
      1.3100  0.2710  -1.0215  0.5572  -0.1527  -0.8652  -0.6309  0.7686  -0.2520
s.e.  0.1384  0.1974   0.0752  0.1208   0.0334   0.1389   0.1371  0.0960   0.0797
        sar1    sar2     sma1     sma2   drift
      0.5959  0.4010  -0.4792  -0.4338  0.0005
s.e.  0.0382  0.0381   0.0388   0.0363  0.0183

sigma^2 estimated as 0.01521:  log likelihood=9835.91
AIC=-19636.59   AICc=-19636.56   BIC=-19522.77
> plot(forecast(fit,h=96), xlim=c(120,155) )
Warning message:
In sqrt(z[[2]] * object$sigma2) : NaNs produced and can not use plot (...) funktion. 
```

除了警告之外，残差也太大了。

可能是 Auto Arima 创建了一个错误的模型，我该如何改进这个模型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T23:15:20.187

当季节性周期较大时，季节性 ARIMA 模型效果不佳。您的季节性周期为 96，这比我用于这些类型的模型的要大得多。有关此问题，请参阅[我的博客文章。](http://robjhyndman.com/researchtips/longseasonality/)

其他几个小点：

*   如果您收到警告，则表明存在值得调查的问题。在这种情况下，NaN 来自哪里？
*   你说残差“太大”。你有什么理由这么主张？只有当它们包含应该建模的结构时，它们才会太大。
*   请在提问时提供最少的可重复示例，并在发布前检查格式。

# css - ul 列表布局取决于窗口宽度

> ID：11301186
> 
> 赞同：1
> 
> 时间：2012-07-02T21:07:24.637
> 
> 标签：css, page-layout

我看到[这个页面](http://css3clickchart.com/)，当你改变窗口宽度时，布局会随着简单的动画而改变。有谁知道这个插件的名字，所以我可以找一些教程？我试图查看源代码，但找不到任何有用的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T21:12:12.633

我不认为它是一个插件——它可能使用了[媒体查询](http://css-tricks.com/css-media-queries/)，这是 CSS3 的一部分。

# scala - 为什么 Scala 的类型推断器会因这组涉及参数化类型的隐式参数而失败？

> ID：11301191
> 
> 赞同：2
> 
> 时间：2012-07-02T21:07:31.360
> 
> 标签：scala, type-inference, implicit, type-erasure

我想定义一个使用 type 参数化的方法，该方法的`T`行为取决于可以找到 type 的隐式参数`Box[T]`。以下代码将此方法定义为`foo`. `foo[Int]`当使用or调用时`foo[String]`，它将没有问题返回`1`或`"two"`按预期返回。

事情变得奇怪的地方是方法栏。它被定义为返回一个`Int`，而不是`foo[Int]`我只是`foo`。我希望编译器会推断出它`T`必须是 type `Int`。它没有这样做，而是失败了：

```
bash $ scalac Code.scala 
Types.scala:15: error: ambiguous implicit values:
 both value one in object Main of type => Main.Box[Int]
 and value two in object Main of type => Main.Box[java.lang.String]
 match expected type Main.Box[T]
 def bar: Int = foo
             ^
one error found 
```

是什么导致了这个错误？替换`foo`为`foo[Int]`编译很好。没有类型的更简单的情况`Box[T]`也可以正常编译。该示例也在下面，并使用`argle`and`bargle`代替`foo`and `bar`。

```
object Main extends Application {

  case class Box[T](value: T)

  implicit val one = Box(1)
  implicit val two = Box("two")

  def foo[T](implicit x: Box[T]): T = {
    x.value
  }

  // does not compile:
  // def bar: Int = foo

  // does compile
  def bar: Int = foo[Int]

  println(bar)
  // prints 1

  // the simpler situation where there is no Box type

  implicit val three = 3
  implicit val four = "four"

  def argle[T](implicit x: T): T = x
  def bargle: String = argle

  println(bargle)
  // prints "four"

} 
```

这个片段中发生了什么导致这种行为？隐式参数、类型推断和擦除之间的交互会导致问题吗？有没有办法修改此代码以使该行`def foo: Int = bar`正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T18:02:47.923

这可能与[SI-3346](https://issues.scala-lang.org/browse/SI-3346)相关，尽管它有隐式转换的隐式参数，在这里你有一个隐式的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T02:59:29.490

其他人将不得不解释为什么类型推断机制无法处理这种情况，但如果您正在寻找清理代码，您可能会这样做：

```
object Test extends App {

  case class Box[T](value: T)

  implicit val one: Box[Int] = Box(1)
  implicit val two: Box[String] = Box("two")

  def foo[T : Box]: T = implicitly[Box[T]].value  
  val bar = foo[Int]  
} 
```

注意：

1.  我从中删除了类型注释，`bar`因此您实际上只是指示了一次类型（只是在与您想要的不同的位置）
2.  我正在使用`App`而不是弃用`Application`
3.  使用类型签名中*绑定的上下文*`foo`

# node.js - Mongoose.js：是否可以更改 ObjectId 的名称？

> ID：11301193
> 
> 赞同：5
> 
> 时间：2012-07-02T21:07:41.047
> 
> 标签：node.js, mongodb, mongoose

关于 mongoose 中的 mongo ObjectId 的一些问题

1) ObjectId 字段可以不是命名为 _id 吗？以及如何做到这一点？当我在我的代码中这样做时：

```
MySchema = new mongoose.Schema({
    id  : mongoose.Schema.ObjectId
}); 
```

它没有任何改变。

2）如果我有名为 _id 的 objectId 字段，是否可以从请求中返回该字段的另一个名称（例如只是“id” - 在网络响应中发送它）；

3）问题只是为了理解：为什么 ObjectId _id 字段不能通过“id”属性访问而不是“_id”？

谢谢，亚历克斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T01:28:09.610

“_id”元素是 mongodb 架构的一部分，它保证集合中的每个文档都可以唯一标识。如果您使用分片来允许跨不同机器的唯一标识符，这一点尤其重要。因此这是一个设计选择，所以没有办法摆脱它:)

_id 的默认值生成如下：

*   时间戳
*   机器主机名的哈希
*   生成过程的pid
*   增量

但是你可以使用任何你想要的值，只要它是唯一的。

如果您更容易考虑必须存在的东西的_id，但您真的不在乎:) 只需让系统自动生成它并使用您自己的标识符。

因此，如果您仍想创建自己的“id”，请执行以下操作：

```
db.mySchema.ensureIndex({"id": 1}, {"unique" : true}) 
```

但请确保它确实是独一无二的，并且不会与您使用的 API 冲突。

2) 在将其作为 Web 响应发送之前，在应用程序端重命名它。

3）我认为这是因为您使用的 API。也许作者发现返回 id 而不是 _id 更合乎逻辑？老实说从未尝试过猫鼬:)

# iphone - 调整 UITextView 中的文本大小

> ID：11301196
> 
> 赞同：0
> 
> 时间：2012-07-02T21:07:53.560
> 
> 标签：iphone, objective-c, ios, ipad

如何调整 UITextView 中文本的大小，使其不会截断文本？我有一个 UITextView 设置在特定高度，我希望该 UITextView 中的文本适合该高度。在 UITextField 中有一个 adjustSizeToWidth，但在 UITextView 中没有

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T21:14:10.127

```
CGRect frame = textView.frame;
frame.size.height = textView.contentSize.height;
textView.frame = frame; 
```

来源：[https ://stackoverflow.com/a/2487402/253008](https://stackoverflow.com/a/2487402/253008)

编辑：

您可以使用

```
-(CGSize)sizeWithFont:(UIFont *)font constrainedToSize:(CGSize)size 
```

检查 UITextView 中文本的宽度，然后当它达到您设置的宽度时，您可以开始降低字体大小

# sql-server-2008-r2 - 您可以在存储过程中使用 Try Catch 来“做”某事吗？

> ID：11301204
> 
> 赞同：-1
> 
> 时间：2012-07-02T21:08:53.200
> 
> 标签：sql-server-2008-r2

我已经链接了需要更新的服务器。

```
BEGIN TRY

delete [SDNY-PAND\BarCode].Barcodes.dbo.barcodes
where Plant_Location <> 'Jefferson,  GA123'

-- bla bla bla

END TRY
BEGIN CATCH

--print ' in error now'

set @strBody = 'It appears that the server that holds the barcode data
        is currently unavailable.  Please validate that it is plugged in
        and turned on for IS' 
set @MailTo = 'ThatGroup@work'  
set @ESubject = 'Message from Barcode Server Update Process' 
EXEC msdb.dbo.sp_send_dbmail
        @recipients =@MailTo,
        @body = @strBody,
        @body_format ='TEXT',
        @subject = @ESubject,
        @profile_name ='ColossusMain'

END CATCH 
```

请问这个过程还是有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T21:35:41.720

顺便说一句，您可以比这更好地检查链接服务器的状态。[有一个名为sp_testlinkedserver](http://msdn.microsoft.com/en-us/library/ms189809.aspx)的内置过程。如果链接服务器无法访问，这将引发错误，从而阻止您尝试任何删除等并将您发送到 CATCH。如果由于删除而导致进一步的错误，例如 CATCH 也会被调用，但 ERROR_MESSAGE() 会有所不同......

```
BEGIN TRY
  EXEC sp_testlinkedserver N'SDNY-PAND\BarCode';

  DELETE [SDNY-PAND\BarCode].Barcodes.dbo.barcodes
    WHERE Plant_Location <> 'Jefferson,  GA123';

  -- bla bla bla
END TRY
BEGIN CATCH
  SET @strBody = N'It appears...'
    + CHAR(13) + CHAR(10) + ERROR_MESSAGE();
  -- ...
  EXEC msdb.dbo.sp_send_dbmail ...;
END CATCH 
```

如果服务器无法访问，则错误消息将类似于：

> 链接服务器“SDNY-PAND\BarCode”的 OLE DB 提供程序“SQLNCLI11”返回消息“登录超时已过期”。
> 链接服务器“SDNY-PAND\BarCode”的 OLE DB 提供程序“SQLNCLI11”返回消息“与 SQL Server 建立连接时发生网络相关或特定于实例的错误。找不到或无法访问服务器。检查实例名称是否是正确的，并且如果 SQL Server 配置为允许远程连接。有关详细信息，请参阅 SQL Server 联机丛书。"。
> SQL Server 网络接口：查找指定的服务器/实例时出错 [xFFFFFFFF]。

# java - 来自java源的工件提取器

> ID：11301207
> 
> 赞同：1
> 
> 时间：2012-07-02T21:09:08.287
> 
> 标签：java, c++, parsing

您是否知道可以解析 Java 源代码（例如来自 jar 文件或定义的类路径）的 C++ 库（开源或免费用于非商业用途）？我想提取类、类成员、方法、方法调用以及这些工件之间的关系。

我花了一整天的时间在谷歌上搜索解决方案。要么我瞎了，要么看不懂！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T23:36:18.160

您无法从*jar*文件中获取源代码，因为它实际上是一组（二进制）类文件。假设您的意思是可能已用于生成 jar 文件的源代码，那么就有一个不错的答案。

如果您想要一个开源解决方案，您可以尝试[ANTLR](http://antlr.org)，它具有[Java 1.5 语法](http://www.antlr.org/grammar/1152141644268/Java.g)，AFAIK 将构建 AST。从中您可以“提取”您想要的项目的树，或者至少是感兴趣的子树的行号；从那里，您可以提取所需的代码。

我相信 ANTLR 可以配置为生成基于 C++ 的解析器。

要捕获这些之间的*关系*，您需要全名和类型解析，这样您就知道标识符实际引用了哪个定义。为此，ANTLR 只是一个解析器并不能解决问题。你需要[在解析后过上生活](http://www.semanticdesigns.com/Products/DMS/LifeAfterParsing.html)。

一个替代方案可能是 Java 编译器。它提供了某种 API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-02T03:57:12.107

有许多可用于 Java 的反编译器。这些不一定基于 C++，但它们可以将 Java 类和库转换回源代码。

示例：[JD Core](http://jd.benow.ca/)、DJ Java 反编译器。[更多的](https://www.google.com/webhp?sourceid=chrome-instant&ion=1&espv=2&es_th=1&ie=UTF-8#q=java%20decompiler&es_th=1)

# java - 以 UTF-8 序列化 DOM 文档

> ID：11301210
> 
> 赞同：1
> 
> 时间：2012-07-02T21:09:25.727
> 
> 标签：java, dom, utf-8, utf-16

我一直在尝试摆脱代码中的所有 com.sun.org.apache.xml.internal 包，用稳定的替代品替换它们。

这是我已替换的一种方法...

```
import com.sun.org.apache.xml.internal.serialize.LineSeparator;
import com.sun.org.apache.xml.internal.serialize.OutputFormat;
import com.sun.org.apache.xml.internal.serialize.XMLSerializer;
...
...

    /**
     * @param source
     * @param target
     * @throws IOException
     */
    protected static void serialize( Document source, Writer target ) throws IOException
    {
        OutputFormat outputFormat = new OutputFormat( (Document) source );
        outputFormat.setLineSeparator( LineSeparator.Windows );
        // format.setIndenting(true);

        outputFormat.setLineWidth( 0 );
        outputFormat.setPreserveSpace( true );

        XMLSerializer serializer = new XMLSerializer( target, outputFormat );
        serializer.asDOMSerializer();
        serializer.serialize( source );
    } // end serialize 
```

这是我发现的另一种选择...

```
/**
 * @param source
 * @param target
 * @throws IOException
 * @throws IllegalAccessException 
 * @throws InstantiationException 
 * @throws ClassNotFoundException 
 * @throws ClassCastException 
 */
protected static void serialize( Document source, Writer target ) throws Exception
{
    DOMImplementationRegistry registry = DOMImplementationRegistry.newInstance();
    DOMImplementationLS impl = (DOMImplementationLS) registry.getDOMImplementation( "LS" );
    LSSerializer writer = impl.createLSSerializer();
    target.write( writer.writeToString(source) );
} // end serialize 
```

但是，它显示了正在生成的 xml 的差异。

它创建

```
<?xml version="1.0" encoding="UTF-16"?> 
```

如何修改它以创建 UTF-8？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T21:41:17.130

我认为你必须使用`LSOutput`：

```
LSOutput domOutput = impl.createLSOutput();
domOutput.setEncoding(StandardCharsets.UTF_8.name());
domOutput.setCharacterStream(stringWriter); 
```

有关更多详细信息，请参见此处的响应：

[更改 com.sun.org.apache.xml.internal.serialize.XMLSerializer & com.sun.org.apache.xml.internal.serialize.OutputFormat](https://stackoverflow.com/questions/9315480/change-the-com-sun-org-apache-xml-internal-serialize-xmlserializer-com-sun-org)

# jquery - 在点击页面加载时更改

> ID：11301211
> 
> 赞同：2
> 
> 时间：2012-07-02T21:09:26.553
> 
> 标签：jquery, function, click, fadein, pageload

我发现这个 jquery 脚本用于在按下/单击按钮时延迟和淡入列表项（效果很好）；请问如何将其更改为在页面加载而不是单击时运行？

```
<script>        
function fadeItem() {
    $('#thisimage ul li:hidden:first').delay(25).fadeIn(fadeItem);
}

$('button').click(fadeItem);
$('#thisimage li').hide();
</script> 
```

我的列表项在#thisimage div 中

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T21:11:05.663

删除`$('button').click(fadeItem)`并添加：

```
$(document).ready(function(){
  fadeItem();
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T21:11:11.343

更改`$('button').click(fadeItem)`为

```
$(function(){ fadeItem() }); 
```

看到这个：[http ://api.jquery.com/ready/](http://api.jquery.com/ready/)

# c++ - STL 按排序顺序存储数字

> ID：11301213
> 
> 赞同：1
> 
> 时间：2012-07-02T21:09:30.720
> 
> 标签：c++, stl

这是在 C++ 中用于对可能包含重复项的整数进行排序插入的理想 STL 容器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T21:11:31.920

如果我理解你可能是一个 std::multiset 它会存储重复但是当你遍历容器时你会得到它们的排序顺序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T21:31:19.200

`std::multiset` is probably the expected answer.

If the domain is relatively small (especially compared to the number of incidences), then counting sort can be used to good effect however. You would use `std::vector<int>` with the size of the domain. Then the value becomes the index, and the count becomes the number of incidences.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T21:17:58.583

两个明显的选择是 heap/`priority_queue`或`multiset`. 堆只会让您在任何时候访问最大的元素，而`multiset`它将按排序顺序存储项目（带有重复项），允许您迭代它们。

随着有关您的具体问题的更多信息，可以提供更精确的答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T22:56:07.313

如果查找和插入以该幅度交错，我宁愿建议一个简单的向量并在查找周期开始时对其进行排序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-03T10:28:17.043

我向您推荐以下内容：

1.  `std::multiset`在`<set>`标题中找到
2.  `std::priority_queue`在`<queue>`标题中找到

您还可以将数据存储到 a 中`std::vector/std::deque/std::list`，然后使用在标题`std::sort`中找到的函数对它们进行排序。`<algorithm>`

# vb.net - 如何从.net中的win32弹出窗口中检测和获取文本

> ID：11301219
> 
> 赞同：0
> 
> 时间：2012-07-02T21:09:48.083
> 
> 标签：vb.net, api

我查看了几个尝试在 stackoverflow 上列出的示例，但我没有找到任何列出如何为 .NET 编码执行此操作的内容。我还需要它来检测弹出窗口，一旦找到弹出窗口，然后拉窗口的标题和弹出窗口内的文本。

我尝试使用帖子： [how-can-i-change-text-on-a-win32-window](https://stackoverflow.com/questions/2668731/how-can-i-change-text-on-a-win32-window)

但我没有运气试图找到如何“获取文本”只是如何查看弹出窗口是否存在。我试图从中获取文本的窗口是标准的 Windows 错误窗口 (#32770)，也就是 WIN32 关键弹出窗口（带有红色 X 的窗口）。我知道错误窗口的标题总是“TLP2011”

我只需要能够阅读标题、文本，然后单击错误按钮上的“确定”即可。

原因？有一个我运行 IT 的软件，为了减少呼入电话成本，我想编写一个程序，在错误弹出时检测错误，然后一旦检测到错误，关闭错误窗口并告诉用户错误将被自动修复。（我的新程序必须能够从错误窗口中读取文本，以确定如何自动修复错误，这样该错误就不会再次出现）

----------已编辑以显示最新发现------------

感谢 GX 发布以下链接[如何在我的 C# 应用程序中获得类似于 Spy++ 的功能？](https://stackoverflow.com/questions/1967604/how-can-i-get-functionality-similar-to-spy-in-my-c-sharp-app)

现在我已经确定我需要以下内容：

```
Dim pProcess() As Process = Process.GetProcessesByName("TLP2011")

    For Each p As Process In pProcess
        For Each threadInfo As ProcessThread In p.Threads

            ' uncomment to dump thread handles
            'Console.WriteLine("\tthread {0:x}", threadInfo.Id);
            Dim windows As IntPtr() = GetWindowHandlesForThread(threadInfo.Id)
            If windows IsNot Nothing AndAlso windows.Length > 0 Then
                For Each hWnd As IntPtr In windows
                    Console.WriteLine(vbTab & "window {0:x} text:{1} caption:{2}", hWnd.ToInt32(), GetText(hWnd), GetEditText(hWnd))
                Next
            End If
        Next
    Next 
```

现在这列出了实际程序本身的所有内容。每一段文字和一切。任何人都知道只挑出弹出框的技巧吗？

以下是显示内容的示例

```
window 3d21aa text:Select Package caption:
window 551176 text: caption:
window e8147c text:Do Not Auto Show  caption:Do Not Auto Show 
window 8e21c6 text:&Select All caption:&Select All
window 2300e10 text:&Help caption:&Help
window 762164 text:Cancel caption:Cancel
window 330f0e text:OK caption:OK
window e8147c text:Do Not Auto Show  caption:Do Not Auto Show 
window 8e21c6 text:&Select All caption:&Select All
window 2300e10 text:&Help caption:&Help
window 762164 text:Cancel caption:Cancel
window 330f0e text:OK caption:OK
window 10f20a6 text: caption:
window 5f122ce text: caption:
window 1824e2 text: caption:
window 1824e2 text: caption:
window 5f122ce text: caption:
window 1824e2 text: caption:
window 1824e2 text: caption:
window 6e1be4 text: caption:
window 342162 text: caption:
window 1c1b92 text: caption:
window 65105a text: caption:Admin
window 291f72 text: caption:
window 375104e text: caption:
window 375104e text: caption:
window 1c1b92 text: caption:
window 65105a text: caption:Admin
window 291f72 text: caption:
window 375104e text: caption:
window 375104e text: caption:
window 242308 text:Form Filter caption:
window 9ee294e text: caption:
window 8ff0f54 text: caption:All Status
window 468273c text: caption:
window 1d110c text: caption:
window 1d110c text: caption:
window 8ff0f54 text: caption:All Status
window 468273c text: caption:
window 1d110c text: caption:
window 1d110c text: caption:
window b90bea text:cbEngine caption:
window 5b17b0 text: caption:
window ee24c6 text: caption:
window ee24c6 text: caption:
window fc1ae0 text: caption:
window 141cfc text:TLP2011 caption:
window d51928 text:OK caption:OK
window 2c1223c text: caption:
window 100f08 text:Access violation at address 6CABC667 in module 'tlpcore.dll'. Write of address F8FFFF86\. caption:Access violation at address 6CABC667 in module 'tlpcore.dll'. Write of address F8FFFF86.
window b2a214e text: caption: 
```

有谁知道更好的方法来尝试找到错误框？我不认为搜索“TLP2011”然后使用接下来的 3 行来尝试确定 msgbox 文本是一种非常“可靠”的方法。有谁知道如何将它单挑出来？

----增加了更多的想法----

每隔 10 秒对所有不同的线程进行一次检查似乎会给系统带来巨大的消耗。这真的是最合乎逻辑的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-12T04:44:24.083

加埃塔诺的回答是正确的

```
static void Main(string[] args)
{
    foreach (Process procesInfo in Process.GetProcesses())
    {
        Console.WriteLine("process {0} {1:x}", procesInfo.ProcessName, procesInfo.Id);
        foreach (ProcessThread threadInfo in procesInfo.Threads)
        {
            // uncomment to dump thread handles
            //Console.WriteLine("\tthread {0:x}", threadInfo.Id);
            IntPtr[] windows = GetWindowHandlesForThread(threadInfo.Id);
            if (windows != null && windows.Length > 0)
                foreach (IntPtr hWnd in windows)
                    Console.WriteLine("\twindow {0:x} text:{1} caption:{2}",
                        hWnd.ToInt32(), GetText(hWnd), GetEditText(hWnd));
        }
    }
    Console.ReadLine();
}

private static IntPtr[] GetWindowHandlesForThread(int threadHandle)
{
    _results.Clear();
    EnumWindows(WindowEnum, threadHandle);
    return _results.ToArray();
}

// enum windows

private delegate int EnumWindowsProc(IntPtr hwnd, int lParam);

[DllImport("user32.Dll")]
private static extern int EnumWindows(EnumWindowsProc x, int y);
[DllImport("user32")]
private static extern bool EnumChildWindows(IntPtr window, EnumWindowsProc callback, int lParam);
[DllImport("user32.dll")]
public static extern int GetWindowThreadProcessId(IntPtr handle, out int processId);

private static List<IntPtr> _results = new List<IntPtr>();

private static int WindowEnum(IntPtr hWnd, int lParam)
{
    int processID = 0;
    int threadID = GetWindowThreadProcessId(hWnd, out processID);
    if (threadID == lParam)
    {
        _results.Add(hWnd);
        EnumChildWindows(hWnd, WindowEnum, threadID);
    }
    return 1;
}

// get window text

[DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true)]
static extern int GetWindowText(IntPtr hWnd, StringBuilder lpString, int nMaxCount);
[DllImport("user32.dll", SetLastError = true, CharSet = CharSet.Auto)]
static extern int GetWindowTextLength(IntPtr hWnd);

private static string GetText(IntPtr hWnd)
{
    int length = GetWindowTextLength(hWnd);
    StringBuilder sb = new StringBuilder(length + 1);
    GetWindowText(hWnd, sb, sb.Capacity);
    return sb.ToString();
}

// get richedit text 

public const int GWL_ID = -12;
public const int WM_GETTEXT = 0x000D;

[DllImport("User32.dll")]
public static extern int GetWindowLong(IntPtr hWnd, int index);
[DllImport("User32.dll")]
public static extern IntPtr SendDlgItemMessage(IntPtr hWnd, int IDDlgItem, int uMsg, int nMaxCount, StringBuilder lpString);
[DllImport("User32.dll")]
public static extern IntPtr GetParent(IntPtr hWnd);

private static StringBuilder GetEditText(IntPtr hWnd)
{
    Int32 dwID = GetWindowLong(hWnd, GWL_ID);
    IntPtr hWndParent = GetParent(hWnd);
    StringBuilder title = new StringBuilder(128);
    SendDlgItemMessage(hWndParent, dwID, WM_GETTEXT, 128, title);
    return title;
} 
```

# php - 创建带有验证的完美表单

> ID：11301222
> 
> 赞同：1
> 
> 时间：2012-07-02T21:09:56.537
> 
> 标签：php, forms, validation, session

在我的网站上，我有很多表格和字段，我有一个运行良好但非常痛苦的系统，并且启动和运行起来非常痛苦。

这就是我的系统所做的，一旦您发送表单，所有信息都会发送到拥有所有数据并对其进行验证的类。它还像这样存储字段的值`$_SESSION['userUpdate']['firstName'][1] = $firstName;`

如果出现错误，它会创建一个像这样`$_SESSION['userUpdate']['firstName'][0] = 1;`的会话变量 1 表示该字段为空。如果没有错误，会话变量将为 0。

如果在验证过程中没有发现错误，则将数据发送到数据库。

之后，表单页面重新加载：

```
header( 'HTTP/1.1 303 See Other' );
header( 'Location: '.curPageURL().'' ); 
```

我使用它是为了在重新加载页面时无法重新发送数据。这就是我使用所有这些会话变量的原因。

然后使用很多 it/else if/else 检查会话变量的值和输出错误，并使用之前输入的数据填充表单。

让我向您展示一个名字字段的示例。

这是 HTML 代码：

```
<label for="firstName" class="block">First Name</label>
<span>Your first name goes here.</span><?php echo $text_first_name ?>
<input type="text" id="firstName" class="mediaText" name="firstName" value="<?php echo $first_name2; ?>" onchange="needToConfirm=true" <?php echo $style_first_name ?> /> 
```

这是类的验证过程：

```
$_SESSION['ui']['first_name'][1] = $this->first_name; 
if (isset($this->first_name)) 
    {
        if($this->first_name == NULL)
        {
            $_SESSION['ui']['first_name'][0] = 1;
        }
        else if(minRange(3, $this->first_name)) 
        {   
            $_SESSION['ui']['first_name'][0] = 2; 
        }
        else
        {
            array_push($set, "FirstName = '".$db->sql_escape($this->first_name)."'");
        }
    } 
```

这是处理最终错误的 php 代码：

```
$error_bg = "style=\"background:#EE5C42\"";

//FIRST NAME
if($_SESSION['ui']['first_name'][0] == 1)
{
    $style_first_name = $error_bg;
    $first_name2 = $_SESSION['ui']['first_name'][1];
}
else if($_SESSION['ui']['first_name'][0] == 2)
{
    $style_first_name = $error_bg;
    $first_name2 = $_SESSION['ui']['first_name'][1];
    $text_first_name = "<span class=\"errorText\">Your first name must consist of at least 3 characters.</span>";
}
else
{
    $first_name2 = $userdetails["FirstName"];
} 
```

在页面的末尾有一个小功能可以取消设置会话变量。

我想知道有什么方法可以让这个更简单、更容易启动和运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T21:35:30.027

如果您要寻求代码优化建议，我会这样做：

```
// so you have bunch of error codes
$possible_errors = array(
  '0' => '', // No error
  '1' => '', // Error, but no error message
  '2' => 'Your %s must consists of at least 3 characters',
  ...
);

// then you have form fields stored in session
// fields in session should be named like the keys in $userdetails
// 'formName' => array('FirstName' => array(0, 'German'), 'LastName' => array('1', ''))
$errors = $values = array();
foreach ($_SESSION['formName'] as $field => $element) {
    if ($element[0] > 0) { // Has error
        $error_code = $element[0];
        $error_message = $possible_errors[$error_code];
        if (!empty($error_message)) {
            $errors[$field] = sprintf($error_message, $field);
        }
    } else {
        $values[$field] = $userdetails[$field];
    }
}

// in here you end up with two arrays:
//   - $errors Error messages keyed by field name
//   - $values Values keyed by field name
// You use them like this
<label for="firstName" class="block">First Name</label>
<span>Your first name goes here.</span><?php if (array_key_exists('FirstName', $errors)) echo $errors['FirstName']; ?>
<input type="text" id="firstName" class="mediaText" name="firstName" 
  value="<?php echo $values['FirstName']; ?>"
  onchange="needToConfirm=true"
  <?php if(array_key_exists('FirstName', $errors)):?>style="background:#EE5C42"<?php endif;?> /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T23:30:16.407

我建议使用非常好的[Bassistance jQuery Validate 插件](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)添加一些客户端验证。

# jquery - 使用 jquery 将 html 表转换为 excel

> ID：11301223
> 
> 赞同：2
> 
> 时间：2012-07-02T21:09:57.090
> 
> 标签：jquery, excel, hidden, cells

我有这个有效的 jquery 函数，除了我需要添加一些东西。我在表格上有一个过滤器设置来隐藏列。当我隐藏列并单击导出时，它无论如何都会使用所有字段。我如何只导出未隐藏的表列？

```
var write_to_excel = (function() {
    var uri = 'data:application/vnd.ms-excel;base64,',
        template = '<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head><!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--></head><body><table>{table}</table></body></html>',
        base64 = function(s) {
            return window.btoa(unescape(encodeURIComponent(s)))
        },
        format = function(s, c) {
            return s.replace(/{(\w+)}/g, function(m, p) {
                return c[p];
            })
        }
        return function(table, name) {
            if (!table.nodeType) table = document.getElementById(table) var ctx = {
                worksheet: name || 'Worksheet',
                table: table.innerHTML
            }
            window.location.href = uri + base64(format(template, ctx))
        }
})()​ 
```

我想我需要类似的东西。

```
if($(table).display.style!="none") 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T22:35:25.160

最简单的方法是在将表传递给格式函数之前从表中删除列。由于您无论如何都要丢弃页面以导航到数据 URI，因此保留隐藏的列并不重要。

删除隐藏列的方式取决于首先如何隐藏这些列。如果只是将 display:none 应用于隐藏的 TD，则可以通过对代码进行此更改来实现。

```
 return function(table, name) {
        if (!table.nodeType)
            table = document.getElementById(table);

        $(table).find(':not(:visible)').remove();

        var ctx = {
            worksheet: name || 'Worksheet',
            table: table.innerHTML
        };

        window.location.href = uri + base64(format(template, ctx));
    }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T16:47:19.507

或者您可以使用简单的 jQuery 将表格中的内容导出为 Excel 格式，使用*window.open()*方法。这也将以更简单的方式解决*display:none*问题:)

```
window.open(MIMEtype,replace); 
```

**MIMEtype**：可选。您正在写入的文档类型。默认值为“文本/html”。

**替换**：可选。如果设置，新文档的历史条目会从打开此文档的文档继承历史条目。

下面的 jQuery 代码会将表格数据导出到 Excel。

```
$("#btnExport").click(function(e) {
    window.open('data:application/vnd.ms-excel,' + $('#dvData').html());
    e.preventDefault();
}); 
```

如果您的表格 HTML 包含特殊字符，则在将 html 发送到 excel 之前，必须对其进行编码。

```
$("#btnExport").click(function(e) {
    window.open('data:application/vnd.ms-excel,' + encodeURIComponent($('#dvData').html()));
    e.preventDefault();
});​ 
```

jsFiddle 示例 - [http://jsfiddle.net/jquerybyexample/xhYcD/](http://jsfiddle.net/jquerybyexample/xhYcD/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-10T07:20:34.293

```
$("#btnExport").click(function(e) {

  window.open('data:application/vnd.ms-excel,' + encodeURIComponent($('#export').html()));

}); 
```

# wpf - WPF 在窗口的可视化树中打印多个元素

> ID：11301224
> 
> 赞同：1
> 
> 时间：2012-07-02T21:10:16.663
> 
> 标签：wpf, printing

我有一个 WPF 窗口，其中包含三个项目控件以及 3 个按钮。有什么方法可以使用 PrintVisual() 来打印两个项目控件，而没有按钮？

我的第一个想法是动态创建一个 StackPanel 并添加我想要打印的控件，但是如果不先分离它们我就无法做到这一点，这似乎有问题。

我想使用 PrintVisual，因为它很简单。（不幸的是，我不能在这个应用程序上花费太多时间）。

***请原谅缺少提供的源代码，但我对 WPF 比较陌生，目前我的表单被过度编码。我想我只是好奇是否有一个简单的解决方案。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T15:54:03.850

如果您只关心打印页面的一部分。将要打印的两个项目控件放置在 Grid 元素中。给它一个名字

```
<Grid x:Name="printGrid">
    ....
</Grid> 
```

然后你可以调用 PrintDialog.PrintVisual 像

```
PrintDialog printDialog = new PrintDialog();
printDialog.PrintVisual(printGrid,"The Description"); 
```

如果您无法设法仅将这些控件分组到它们自己的网格中，您可以通过在代码中创建一个容器并将现有的命名 itemsControls 添加到它们来手动完成。然后你可以 PrintVisual 容器。

# c# - C# - 通过控制台应用程序访问 Javascript 修改的 HTML

> ID：11301226
> 
> 赞同：0
> 
> 时间：2012-07-02T21:10:31.793
> 
> 标签：c#, javascript, html, browser

在页面上的 JavaScript 修改页面后，我试图访问页面的 HTML。根据我在网上找到的内容，这是我目前一直在尝试的。

```
using System; 
using System.Windows.Forms;
using System.IO; 

namespace WebBrowserDemo 
{ 
    class Program 
    {
    public const string TestUrl = @"http://www.theverge.com/2012/7/2/3126604/android-jelly-bean-updates-htc-samsung-google-pdk"; 

    [STAThread] 
    static void Main(string[] args) 
    { 
        WebBrowser wb = new WebBrowser(); 
        wb.DocumentCompleted += new WebBrowserDocumentCompletedEventHandler(wb_DocumentCompleted); 
        wb.Navigate(TestUrl); 

        while (wb.ReadyState != WebBrowserReadyState.Complete) 
        { 
            Application.DoEvents(); 
        } 

        Console.WriteLine("\nPress any key to continue..."); 
        Console.ReadKey(true); 
    } 

    static void wb_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e) 
    { 
        WebBrowser wb = (WebBrowser)sender; 

        HtmlElement document = wb.Document.GetElementsByTagName("html")[0];

        using (StreamWriter sw = new StreamWriter("OuterHTML.txt"))
        {
            sw.WriteLine(document.OuterHtml);
        }

        var abc = wb.Document.InvokeScript("eval", new object[] { "window.scrollTo(0, document.body.scrollHeight);" });

        Console.WriteLine();
        document = wb.Document.GetElementsByTagName("html")[0];

        using (StreamWriter sw = new StreamWriter("OuterHTML2.txt"))
        {
            sw.WriteLine(document.OuterHtml);
        }

    } 
} 
} 
```

最终目标是滚动到页面底部激活任何 JS 以加载文章的评论。虽然目前我从脚本运行前后返回的 html 是相同的。

有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T22:57:52.517

您应该使用[WebBrowser 控件来](http://msdn.microsoft.com/en-us/library/aa752040%28v=vs.85%29.aspx)完成。

这基本上是 IE 的组件化版本。将页面加载到控件中。您甚至可能不需要显示该页面。您可以注册一个将在页面完全加载时调用的事件处理程序。没有明确的方法可以确定脚本何时“完成” - 脚本是开放式的，可以根据需要运行。所以你必须建立一个启发式的“等待期”，然后在等待期过去后检查 HTML。

顺便说一句，这正是[IECapt](http://iecapt.sourceforge.net/)所做的。

# javascript - 向 d3.js 缩进树图添加切换框

> ID：11301234
> 
> 赞同：1
> 
> 时间：2012-07-02T21:11:11.717
> 
> 标签：javascript, d3.js

是否可以在这个 d3.js 缩进树图中的行中添加一个复选框？[http://bl.ocks.org/1093025](http://bl.ocks.org/1093025)![在此处输入图像描述](../Images/453637445a9d38e83bc101c8ba5e94e9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T21:49:56.453

There is no built in checkbox for svg, so you will need to create your own using svg elements that do exist.

I created a [JSFiddle](http://jsfiddle.net/brantolsen/X2hbX/) that uses the `circle` element to do this. To do this, I took the example you linked and added the following:

```
// Add checkbox
nodeEnter.append("svg:circle")
.attr("r", 5)
.attr("fill", "white")
.on("click", function(d) {
    if (d.selected) {
        d.selected = false;
        d3.select(this).attr("fill", "white");
    } else {
        d.selected = true;
        d3.select(this).attr("fill", "black");
    }
}); 
```

To access the list of selected nodes, add the following function and call it

```
function printSelectedNodes() {
  var nodes = tree.nodes(root);

  var selected = [];
  nodes.forEach(function(n, i) {
    if (n.selected) {
      selected.push(n.name);
    }
  });
  console.log(selected);
} 
```

# file-upload - 为什么我不能将上传的文件附加到电子邮件中？

> ID：11301236
> 
> 赞同：7
> 
> 时间：2012-07-02T21:11:30.050
> 
> 标签：file-upload, coldfusion, email-attachments, cfmail

我有一个带有文件输入的表单：

```
<input type="file" id="uploadFile" name="uploadFile" /> 
```

[我使用JQuery 表单插件](http://malsup.com/jquery/form/)的 ajaxForm 方法提交表单。

然后，在处理帖子的代码中，我读取并处理了文件。我使用 cfspreadsheet 直接从文件输入字段读取文件：

```
<cfspreadsheet 
  action="read" 
  src="#form.uploadFile#" 
  sheet="1" 
  query="spreadsheetData" 
  headerRow="1" 
  excludeHeaderRow="true"
> 
```

这一切正常。

我决定也将电子表格通过电子邮件发送给管理员。我想我可以简单地使用包含以下 cfmailparam 标记的 cfmail 标记来完成此操作：

```
<cfmail to="myEmailAddress@email.com" 
        from="fromEmail@email.com" 
        subject="Upload File" type="HTML">
    <cfmailparam file="#form.uploadFile#" />
    File processed successfully
</cfmail> 
```

但是，这无法正常工作 - 未发送电子邮件。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-03T13:20:28.620

Leigh 的解决方案运行良好，您可能已经在代码中实现了。我想我会投入 0.02 美分来说明为什么这是一个问题。

当您上传文件时，该文件将放置在*临时*文件夹位置。如果您对文件不做任何操作以将其放入最终目的地，则该文件将被删除 - 可能在您的请求结束时。

同时 cfmailparam 实际上并没有在运行时附加文件。它将它留给后台处理程序进程来执行此操作。如果您查看 ColdFusion 安装的“mail/spool”目录，您将看到一个扩展名为 .cfmail 的文件。如果您在交付前无法“抓住”一个，请检查您无法交付的文件夹 - 那里肯定会有一些闲逛。

.cfmail 文件用作发送邮件的假脱机服务的指令。它有一个主题，从，到，服务器地址，正文等。

如果您附加一个文件，您将在该文件的底部看到如下所示的内容：

```
file:  D:\jrun\temp\blah.tmp
file-type:  application/octet-stream;   name="I am the file you uploaded.tmp"
file-disposition:  attachment
remove:  false 
```

在运行时，CF 会抓取这个文件并按照 Leigh 的建议进行操作 - 将其作为带有 mailpart（base64 编码）的二进制文件放入消息的主体中。因此，当后台处理程序服务开始尝试打开并附加此文件时，该文件早已不复存在，因为请求已经结束。我还认为该文件在此临时目录中以“.tmp”扩展名存在 - 这显然不是您想要附加的（但这可能是 CF 的先前版本）。

要修复它，首先使用带有“上传”操作的 cffile 将文件放入磁盘上的真实（而不是临时）文件夹中。然后使用 cfmailparam 附加文件。注意：设置为 yes 的“remove”属性将导致 CF 在成功发送邮件后删除文件 - 我相信这是您正在寻找的效果。

# xcode - 无法使用 XCode 创建快照

> ID：11301239
> 
> 赞同：2
> 
> 时间：2012-07-02T21:11:37.050
> 
> 标签：xcode, snapshot

我无法在 XCode 中为我的特定项目拍摄更多快照。如果我尝试创建快照，它会在状态栏中显示“正在创建快照 ..”并一直持续下去。然后我强制退出 Xcode，重新启动并尝试再次创建快照。这次它立即给出错误消息'..remove file manual .. ...lock'。所以我然后使用终端中的 rm 命令删除显示的文件。然后我再次尝试创建快照并继续相同的循环。

我该如何解决这个问题？

我已经为这个项目拍摄快照很长时间了，有一天我不得不删除所有旧快照，因为我突然意识到它们占用了 12+ GB！即使现在我尝试为这个项目创建一个快照，它也会在几分钟内达到 3 GB，然后我强制退出它。（我很确定这在一段时间以前一直可以完美运行，并且没有占用千兆字节的空间。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T01:15:04.340

由于您将此问题标记为 git，我怀疑 git 是您问题的原因。如果项目位于 git 存储库中，我发现 Xcode 快照不起作用。如果您需要拍摄快照，解决方法是将 .git 文件夹暂时移出项目，拍摄快照，然后将 .git 文件夹移回。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T10:38:31.003

我也有同样的问题，这就是我解决它的方法：

我在 Xcode -> Organizer -> Repositories 中注意到我的整个 ~/username 文件夹显示为存储库。我尝试在 Xcode 中删除它，但它一直返回。以前，在我安装 Xcode 4 和使用 Xcode 3 之前，我已经安装了 GIT 并将 opdenkamp/xbmc 克隆到我的主文件夹。由于缺乏对 GIT 使用的了解，我将整个文件夹设为存储库，每次尝试在 Xcode 中创建项目的快照时，它都会创建 ~/username（或其他一些进程）的快照，即永远在 ~/Library/Developer/Xcode/Snapshots/ 中创建一个多 GB 文件。事实上，我会“强制退出”Xcode 来停止这个过程。

所以我删除了 Xcode 中的存储库，我很 Xcode 然后在终端中我从我的主目录中键入 ~/username

```
sudo rm -r .git 
```

如果有要保留的存储库（这对我来说不是问题）可能不是一个好主意，但是现在制作 xcode 项目的快照需要一秒钟并生成一个与 Xcode 项目顺序相同的文件，而不是现在在多 GB 球场

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-31T19:50:39.210

最简单的解决方法是确保在 Xcode 的首选项（源代码管理选项卡）中选中“启用源代码管理”

# web-services - 用于个人 Git 服务器存储库的 Web API（如 github REST API）以启用“git log”？

> ID：11301244
> 
> 赞同：12
> 
> 时间：2012-07-02T21:12:04.073
> 
> 标签：web-services, git, github, github-api, git-log

**我可能最终会为我自己的 repo 服务器重新发明部分[github REST API 。](http://developer.github.com/v3/repos/contents/)但也许已经有一些服务器脚本可以做到这一点？或者，也许您有其他建议？**

**这是我的用例：**

我正在开发一个 Firefox 扩展，它将显示一个

```
git log -- <path> 
```

我总是可以编写一个小的服务器脚本来实现完善的[JGit](http://www.eclipse.org/jgit/)并在那里执行“git log”命令。但是，FF 扩展取决于该服务器脚本；（

我想知道，是否存在类似于“not-github”-repos 的[github REST API](http://developer.github.com/v3/repos/contents/)之类的东西，作为我的小服务器脚本更标准？

我还考虑了一个[Git JS 客户端](https://stackoverflow.com/questions/3411302/javascript-git-client)，例如[Git.JS](https://github.com/danlucraft/git.js)（显然是唯一的 JS 客户端；与 node.js 一起使用；不幸的是，该项目不再活跃，也没有文档。）。但是，我不需要完整的客户。我只想从远程主存储库中检索一些只读信息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-16T19:54:05.160

尽管我参加聚会迟到了，但我注意到一些可能有助于答案。

[Orion Git API](http://wiki.eclipse.org/Orion/Server_API/Git_API) Orion 是一个 Eclipse 项目

来自 github 上 Hulu 的[RESTFul Git](https://github.com/hulu/restfulgit)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-28T13:48:03.713

如果您还没有尝试过，[GitBlit](http://gitblit.com/)是一个非常酷的选择。我在几个 Windows 专用服务器上进行了多个安装，我使用 REST API 将它们组合在一起。我在 Windows 中使用“GO：单栈解决方案”在 5 分钟内启动并运行了它。

> Gitblit GO 是一个基于 Jetty 的集成单栈解决方案。
> 
> 您不需要 Apache httpd、Perl、Git 或 Gitweb。如果您想使用其中的部分或全部，您仍然可以；Gitblit 和街区里的其他孩子玩得很好。
> 
> 如果您想在不到 5 分钟的时间内从零到 Git，您应该下载此文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T15:19:36.497

我会说你肯定需要自己实现某种服务器端代码。

您可以选择任何您喜欢的服务器端语言。我相信`ruby`或`python`会正常工作。`git log`比根据给定的参数创建具有一页嵌入输出的简单网站。

我相信，所有其他选择都不适合你。由于 git 的分布式特性，您无法远程访问 git 存储库的历史记录——您只能读取本地存储库的历史记录。

通过您的扩展阅读该网页并解析输出将为您提供所需的内容。

# python - 最简单的python网络消息传递

> ID：11301250
> 
> 赞同：4
> 
> 时间：2012-07-02T21:12:15.930
> 
> 标签：python, networking, interprocess

我有一个 Python 中的机器控制系统，目前看起来大致像这样

```
goal = GoalState()
while True:
    current = get_current_state()
    move_toward_goal(current,goal) 
```

现在，我正在尝试添加通过网络控制机器的能力。我想写的代码是这样的：

```
goal = GoalState()
while True:
    if message_over_network():
        goal = new_goal_from_message()
    current = get_current_state()
    move_toward_goal(current,goal) 
```

将这种网络功能添加到我的应用程序中的最简单和最 Pythonic 的方法是什么？套接字可以工作，以为它们不是特别感觉 Pythonic。我看过 XMLRPC 和 Twisted，但两者似乎都需要对代码进行重大修改。我还查看了 ØMQ，但感觉就像我添加了一个外部依赖项，它没有提供任何我在套接字中没有的东西。

我不反对使用我上面提到的任何系统，因为我认为失败可能是我的误解。我只是对处理这个简单、常见问题的惯用方式感到好奇。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T22:31:20.327

您至少需要决定两个问题：

1.  如何交换消息？
2.  以什么格式？

关于 1\. TCP 套接字是最低级别的，您需要处理低级别的事情，例如识别消息边界。此外，TCP 连接可以为您提供可靠的传递，但前提是连接未重置（例如由于临时网络故障）。如果您希望您的应用程序在 TCP 连接重置时正常恢复，您需要实现某种形式的消息确认以跟踪需要通过新连接重新发送的内容。OMQ 为您提供比普通 TCP 连接更高级别的抽象。您不需要处理字节流，而是处理整个消息。它仍然不能为您提供可靠的传递，消息可能会丢失，但它提供了几种可用于确保可靠传递的通信模式。0MQ 也是高性能的，IMO 是一个不错的选择。

关于 2，如果不需要与其他语言的互操作性，Pickle 是一个非常方便和 Pythonic 的选择。如果需要互操作性，您可以考虑 JSON，或者，如果性能是一个问题，则可以考虑二进制格式，例如 Google 协议缓冲区。最后一个选择需要最多的工作（您需要在 .idl 文件中定义消息格式），这绝对不会让人觉得 Pythonic。

看看在普通套接字上交换消息（任何可序列化的 Python 对象）的样子：

```
def send(sockfd, message):
    string_message = cPickle.dumps(message)
    write_int(sockfd, len(string_message))
    write(sockfd, string_message)

def write_int(sockfd, integer):
    integer_buf = struct.pack('>i', integer)       
    write(sockfd, integer_buf)

def write(sockfd, data):
    data_len = len(data)
    offset = 0
    while offset != data_len:
        offset += sockfd.send(data[offset:]) 
```

不错，但正如您所见，必须处理消息长度的序列化是相当低的水平。

并收到这样的消息：

```
def receive(self):
    message_size = read_int(self.sockfd)
    if message_size == None:
        return None
    data = read(self.sockfd, message_size)
    if data == None:
        return None
    message = cPickle.loads(data)
    return message

def read_int(sockfd):
    int_size = struct.calcsize('>i')
    intbuf = read(sockfd, int_size)
    if intbuf == None:
        return None
    return struct.unpack('>i', intbuf)[0]

def read(sockfd, size):
    data = ""
    while len(data) != size:
        newdata = sockfd.recv(size - len(data))
        if len(newdata) == 0:
           return None
        data = data + newdata
    return data 
```

但这并不能优雅地处理错误（没有尝试确定哪些消息已成功传递）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T22:44:58.797

如果您熟悉套接字，我会考虑`SocketServer.UDPServer`（请参阅[http://docs.python.org/library/socketserver.html#socketserver-udpserver-example](http://docs.python.org/library/socketserver.html#socketserver-udpserver-example)）。UDP 绝对是最简单的消息传递系统，但显然，您必须处理某些消息可能会丢失、重复或乱序传递的事实。如果您的协议非常简单，则相对容易处理。优点是您不需要任何额外的线程，也不需要外部依赖项。如果您的应用程序没有会话的概念，它也可能是一个很好的选择。

开始可能会很好，但是您的问题中没有包含更多需要考虑的细节。我也不会担心套接字不是非常 Pythonic 的事实。最后，无论如何你都会使用套接字，有人会为你包装它们，你将被迫学习框架，在最好的情况下，这可能会超出你的要求。

（请注意，我的观点非常有偏见，因为我喜欢处理原始套接字。）

# php - 在 xmlHTTPrequest send() 之后从 PHP $_POST 访问 ArrayBuffer

> ID：11301254
> 
> 赞同：3
> 
> 时间：2012-07-02T21:12:34.413
> 
> 标签：php, ajax, arraybuffer, xmlhttprequest-level2

我正在关注 XMLHttpRequest 2 的教程：

[https://developer.mozilla.org/en/DOM/XMLHttpRequest/Sending_and_Receiving_Binary_Data](https://developer.mozilla.org/en/DOM/XMLHttpRequest/Sending_and_Receiving_Binary_Data) 和 [http://www.html5rocks.com/en/tutorials/file/xhr2/#toc-send-arraybuffer](http://www.html5rocks.com/en/tutorials/file/xhr2/#toc-send-arraybuffer)

它们是客户端的绝佳教程，这是我脚本的工作摘录：

```
var imagebuffer = new ArrayBuffer(size);  // create the readonly memory buffer
var imagedata= new Uint8Array(imagebuffer); // create a view to manipulate data 
```

// 用 imagedata 做一些很酷的事情

```
var exchange=new XMLHttpRequest();
exchange.open("POST",url,true);
exchange.send(arraybuffer); 
```

到目前为止一切顺利，我可以从客户端和服务器控制面板看到大量数据正在传输。

这是我的问题：如何在服务器上使用 PHP 访问 ArrayBuffer？我习惯了 $_POST 超全局需要从 HTML 表单传递的参数，因此它可以作为数组访问，但我找不到任何关于如何访问这个二进制数组并将其粘贴到我的 MySQL 数据库中的参考。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T15:23:28.023

好的 - 我已经想通了。我的服务器端 PHP 打开：

```
$data = file_get_contents('php://input');
$mysql_blob = base64_encode($data); 
```

它现在的格式可以作为 BLOB 格式插入（例如）到 MySQL 中。

奇迹般有效！

# analytics - 除了 lefttronic.com 之外，还有哪些分析仪表板选项？

> ID：11301256
> 
> 赞同：0
> 
> 时间：2012-07-02T21:12:41.683
> 
> 标签：analytics, dashboard

我们有来自几个不同服务的分析，需要一个地方将所有数据组合在一个显示中。除了leftronic.com，还有人有其他服务的经验吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T02:51:11.100

有很多选择。试试 InfoCaptor，它是免费的[https://my.infocaptor.com](https://my.infocaptor.com)

庞大的可视化库并连接到社交分析和数据库

PS：我是开发者

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-02T21:19:19.117

我们使用过 Leftronic 并对产品非常满意，但后来因为 UI 更加优雅而转向[Geckoboard 。](http://www.geckoboard.com/)您可能还想结帐[Boardrd](http://boarrd.com/)。

# android - 如何以编程方式设置通知音量？

> ID：11301257
> 
> 赞同：5
> 
> 时间：2012-07-02T21:12:43.837
> 
> 标签：android, notifications, android-audiomanager

我的主要活动中有这种方法

```
private void beep()
{
    AudioManager manager = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
    manager.setStreamVolume(AudioManager.STREAM_NOTIFICATION, 0,
            AudioManager.FLAG_SHOW_UI + AudioManager.FLAG_PLAY_SOUND);
    Uri notification = RingtoneManager
            .getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);
    Ringtone r = RingtoneManager.getRingtone(getApplicationContext(),
            notification);
    r.play();
} 
```

据我了解，通知音量应由 STREAM_NOTIFICATION 调节。但是，尽管 setStreamVolume 方法中的音量编号相同，但通知总是以相同的音量播放。这是为什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-04T18:42:35.850

我走了另一条路。这不是我的问题的完全答案，而是适当的答案。当我在 STREAM_MUSIC 中播放通知时，一切都很好。所以通知与我作为参数传递给函数的音量完全一致

```
private void beep(int volume)
{
    AudioManager manager = (AudioManager)getSystemService(Context.AUDIO_SERVICE);
    manager.setStreamVolume(AudioManager.STREAM_MUSIC, volume, 0);

    Uri notification = RingtoneManager
            .getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);

    MediaPlayer player = MediaPlayer.create(getApplicationContext(), notification);
    player.start();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T23:01:10.423

首先，我希望您意识到您正在尝试一个接一个地播放两个通知，因此可能存在冲突。`AudioManager.FLAG_PLAY_SOUND`并且`r.play()`都会尝试播放声音。通常，通过 UI 或通过播放新音量的哔声为用户提供一种类型的信息就足够了。我建议您删除其中一个标志。如果你不需要，就给它0。

来到主要问题，我不确定您是否可以将音量级别设置为 0。尝试将 1 设置为

```
manager.setStreamVolume(AudioManager.STREAM_NOTIFICATION, 1, AudioManager.FLAG_SHOW_UI); 
```

如果要静音，可以尝试使用[setStreamMute](http://developer.android.com/reference/android/media/AudioManager.html#setStreamMute%28int,%20boolean%29)，相当于将音量设置为 0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-28T16:02:03.450

就我而言，最终这似乎奏效了。它会使您的音频音量相对于流当前音量，但它对我的需要很有用。

```
MediaPlayer player = MediaPlayer.create(getApplicationContext(), notificationUri);
player.setVolume(toneLevel, toneLevel); 
```

toneLevel 介于 0.0 - 1.0 之间，因此您甚至不需要找到流的范围..

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-07-26T05:08:53.697

编写如下函数，或复制并粘贴以下内容，

```
public void ringtone() {
    try {
        Uri notification = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);
        Ringtone r = RingtoneManager.getRingtone(getApplicationContext(), notification);
        r.play();
    } catch (Exception e) {}
} 
```

并`ringtone()`在您想要发出哔声通知时拨打电话。

# javascript - 优化 SQL 连接？

> ID：11301263
> 
> 赞同：1
> 
> 时间：2012-07-02T21:13:25.820
> 
> 标签：javascript, sql, database-connection

我正在用 HTML 和 Javascript 构建一个多页 Web 项目，该项目不断地从 SQL 数据库读取和写入。我可以连接到数据库并使用这种类型的连接成功运行我的项目。

```
var connection = new ActiveXObject("ADODB.Connection") ;
var connectionstring="Data Source=<server>;Initial Catalog=<catalog>;User ID=<user>;   
Password=<password>;Provider=SQLOLEDB";
connection.Open(connectionstring);
var rs = new ActiveXObject("ADODB.Recordset");

rs.Open("SELECT * FROM table", connection);
rs.MoveFirst
while(!rs.eof)
{
   document.write(rs.fields(1));
   rs.movenext;
}

rs.close;
connection.close; 
```

效果很好，运行良好。但是，前 5 行（从 var connection = 到 var rs =）导致整个浏览器在建立连接时冻结几秒钟。我需要加快速度，因为我在整个项目中不断地连接到数据库。有没有更有效的连接 SQL 数据库的方法？还是我的电脑坏了，这应该运行得更快？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T21:16:12.053

Javascript 通常在浏览器中以单线程运行 - 这意味着如果某些事情需要时间，则在长时间运行的进程完成运行之前不会再运行 javascript。

处理这个问题的正常方法是使用服务器端语言在*服务器端进行数据库交互，而不是在客户端。*

考虑在服务器端编写数据访问逻辑，返回某种结构化对象（XML 和[JSON](http://www.json.org/)表示法很流行）并使用[AJAX](http://en.wikipedia.org/wiki/Ajax_%28programming%29)检索和显示数据。

# jquery - 如何设置 jquery 以排除函数中的类？

> ID：11301265
> 
> 赞同：1
> 
> 时间：2012-07-02T21:13:34.460
> 
> 标签：jquery, slider

我基本上只了解如何阅读一些 JavaScript 并进行修改。

我正在使用我购买的脚本 grid-slider，但代码编写者目前是 mia，所以希望这里有人可以帮助我。

基本上，它是一个滑块，可以选择像正常一样打开链接或在同一页面的面板中打开链接。我希望在面板中打开一些链接，在父窗口中打开其他链接。

在我看来，执行此操作所需要做的就是激活面板显示功能（我已经完成了），然后设置一个排除功能以从该功能中排除具有特定类的某些`ul`s 或s。`li`我已经阅读了 .not 选择器，但我不知道如何使其适用于此代码：

```
else {
    if (this._displayOverlay) {
        if ($item.find(">.content").size() > 0) {
            $item.data("type", "static");
        }
        else {
            var contentType = this.getContentType($link);
            var url = $link.attr("href");
            $item.data({type:contentType, url:(typeof url != "undefined") ?  url : ""});
        }
        $item.css("cursor", "pointer").bind("click", {elem:this, i:i}, this.openOverlay);
    }
    $link.data("text", $item.find(">div:first").html());
    $img = $link.find(">img");                      
} 
```

任何人都可以根据这个来提供帮助吗？[**这里**](http://codecanyon.net/item/jquery-grid-style-slider/full_screen_preview/1204040)有一个代码演示的链接。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T07:42:41.757

参考 jQuery 文档[.not()](http://api.jquery.com/not/)方法从匹配元素的子集构造一个新的 jQuery 对象。因此，您可以将 .not() 应用到要排除的地方，在这种情况下是您的类，到事件，例如排除要绑定的类（'click'）：

```
$item.css("cursor", "pointer").not('.myexcludedcalss').bind("click", {elem:this, i:i}, this.openOverlay); 
```

（就像上面评论中提到的那样）

# .net - TeamCity 并行运行 Nunit 测试

> ID：11301272
> 
> 赞同：0
> 
> 时间：2012-07-02T21:14:02.387
> 
> 标签：.net, nunit, continuous-integration, teamcity, ncover

所以我在想，必须有更好的方法通过 teamcity 为 .net 项目运行 NUnit 测试。目前该项目的构建大约需要 10 分钟，测试步骤需要 30 分钟左右。

我正在考虑将 Nunit 测试分成 3 组，分别分配给不同的代理。然后确保他们在开始之前对初始构建有构建依赖关系。

这是我想到的最好的方法，我还应该考虑其他方法吗？
附带说明一下，是否可以在最后结合所有 Nunit 测试以从在 3 台不同机器上构建的测试中获得一份报告？我认为这是不可能的，除非有人想到了一个聪明的黑客。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-09-13T14:30:57.177

NUnit 用户现在可以`Parallelizable`在不同位置使用该属性来使 NUnit 能够并行运行测试。

例子：

```
[Parallelizable(ParallelScope.All)]
[TestFixture]
public class LengthOfStayRestServiceAsyncTests
{
    [Test]
    public void Test1()
    {
        Assert.That(true, Is.True);
    }
} 
```

或者更好的是，将其粘贴在您的测试项目`Properties\AssemblyInfo.cs`文件中：

```
[assembly: Parallelizable(ParallelScope.Fixtures)] 
```

来源：
[https ://github.com/nunit/docs/wiki/Parallelizable-Attribute](https://github.com/nunit/docs/wiki/Parallelizable-Attribute)
[https://templecoding.com/blog/2016/02/29/running-tests-in-parallel-with-nunit3](https://templecoding.com/blog/2016/02/29/running-tests-in-parallel-with-nunit3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T23:13:45.917

对于并行运行的 Nunit 测试，请查看[http://www.nunit.org/index.php?p=pnunit&r=2.5](http://www.nunit.org/index.php?p=pnunit&r=2.5)上的 PnUnit，对于可以配置为使用 Log4Net 进行 Nunit 的报告，请参见此处的示例：[http://www .softwarefrontier.com/2007/09/using-log4net-with-nunit.html](http://www.softwarefrontier.com/2007/09/using-log4net-with-nunit.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T15:38:45.343

我们设置了一个递归 MSBuild 脚本来同时运行单元测试 dll，它看起来像这样：

```
 <Target Name="UnitTestDll">
    <Message Text="Testing $(NUnitFile)" />
    <ItemGroup>
      <ThisDll Include="$(NUnitFile)"/>
    </ItemGroup>
    <NUnit ToolPath="$(NUnitFolder)" Assemblies="@(ThisDll)" OutputXmlFile="$(TestResultsDir)\%(ThisDll.FileName)-test-results.xml" ExcludeCategory="Integration,IntegrationTest,IntegrationsTest,IntegrationTests,IntegrationsTests,Integration Test,Integration Tests,Integrations Tests,Approval Tests" ContinueOnError="true" />
  </Target>

  <Target Name="UnitTest" DependsOnTargets="Clean;CompileAndPackage">
      <Message Text="Run all tests in Solution $(SolutionFileName)" />
      <CreateItem Include="$(SolutionFolder)**\bin\$(configuration)\**\*.Tests.dll" Exclude="$(SolutionFolder)\NuGet**;$(SolutionFolder)**\obj\**\*.Tests.dll;$(SolutionFolder)**\pnunit.tests.dll">
        <Output TaskParameter="Include" ItemName="NUnitFiles" />
      </CreateItem>
    <ItemGroup>
      <TempProjects Include="$(MSBuildProjectFile)">
        <Properties>NUnitFile=%(NUnitFiles.Identity)</Properties>
      </TempProjects>
    </ItemGroup>
    <RemoveDir Directories="$(TestResultsDir)" Condition = "Exists('$(TestResultsDir)')"/>
    <MakeDir Directories="$(TestResultsDir)"/>

    <MSBuild Projects="@(TempProjects)" BuildInParallel="true" Targets="UnitTestDll" />
  </Target> 
```

你显然仍然需要你的编译目标（或者在我们的例子中是 CompileAndPackage）来实际构建测试 dll。

这也会为本地开发人员弄乱您的 NUnit 结果，但是已经遇到了这个问题，我们编写了一个工具来帮助解决这个问题：[https ://github.com/15below/NUnitMerger](https://github.com/15below/NUnitMerger)

# c++ - 如何跟踪通话统计信息？C++

> ID：11301275
> 
> 赞同：0
> 
> 时间：2012-07-02T21:14:19.720
> 
> 标签：c++, class, static, statistics

我正在开发一个向用户提供统计数据的项目。我创建了一个名为 Dog 的类，它有几个功能。说话、呼呼、奔跑、取物等。

我想要一个函数来吐出每个函数被调用了多少次。我也对构造函数调用和析构函数调用感兴趣。

我有一个定义所有函数的头文件，然后是一个单独的 .cc 文件来实现它们。我的问题是，有没有办法跟踪每个函数被调用的次数？

我有一个名为 print 的函数，它将获取“统计信息”，然后将它们输出到标准输出。我正在考虑使用静态整数作为类本身的一部分，声明几个整数来跟踪这些事情。我知道编译器将创建整数的副本并将其初始化为最小值，然后我将在 .cc 函数中递增整数。

我还考虑过将静态整数作为 .cc 中的全局变量。哪种方式更容易？还是有更好的方法来做到这一点？

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T21:21:46.943

使用静态成员变量是要走的路。但是，编译器不会“创建整数的副本并将其初始化为最小值”；您必须为 .cc 文件中的每一个提供一个定义，并在那里将其初始化为 0。（如果您使用的是 C++11，情况会有所不同，但基本思想是相同的。）

没有理由使用静态全局变量而不是静态成员。

富.h：

```
class Foo {
  static int countCtor_;
  static int countDtor_;
  static int countprint_:
  Foo();
  ~Foo();
  static void print();
}; 
```

foo.cc：

```
#include <iostream>
#include "foo.h"

int Foo::countCtor_ = 0;
int Foo::countDtor_ = 0;
int Foo::countprint_ = 0;

Foo::Foo() {
  ++countCtor_;
  // Something here
}
Foo::~Foo() {
  ++countDtor_;
  // Something here
}
void Foo::print() {
  ++countprint_;
  std::cout << "Ctor:  " << countCtor_ << "\n"
            << "Dtor:  " << countDtor_ << "\n"
            << "print: " << countprint_ << "\n";
} 
```

但是，如果你有很多函数，所涉及的重复有点烦人——当你的意思是 ++countBaz_ 时，很容易意外地执行 ++countBar_ （特别是如果你复制和粘贴样板文件），所以你可能想要一些东西有点花哨，例如静态映射和递增计数[__FUNC__]的宏，因此您可以在每个函数中使用完全相同的行。像这样：

富.h：

```
#include <map>
class Foo {
  static std::map<const char*, int> counts_;
  Foo();
  ~Foo();
  void print();
}; 
```

foo.cc：

```
#include <iostream>
#include "foo.h"

std::map<const char *, int> Foo::counts_;

#define INC_COUNT_() do { ++counts_[__FUNC__]; } while (0)

Foo::Foo() {
  INC_COUNT_();
  // Something here
}
Foo::~Foo() {
  INC_COUNT_();
  // Something here
}
void Foo::print() {
  INC_COUNT_();
  for (std::map<const char *, int>::const_iterator it = counts_.begin(); 
       it != counts_.end(); ++it) {
    std::cout << it->first << ": " << it->second << "\n";
  }
} 
```

在上面的示例代码中，__FUNC__ 是一个占位符。不幸的是，没有可以使用的符合标准的值来代替它。大多数编译器都有一些 __func__、__FUNC__、__FUNCTION__、__FUNCSIG__ 和 __PRETTY_FUNCTION__ 的子集。但是，这些都不是 C++03 中的标准。C++11 确实将 __func__ 标准化，但只是作为“实现定义的字符串”，不能保证它是有用的，甚至是唯一的。最重要的是，不同编译器的值会有所不同。此外，其中一些可能是宏而不是标识符，以使事情变得更有趣。

如果你想要真正可移植的代码，在 C++11 中，你可以使用类似 string(__func__) + ":" + STRINGIZE(__LINE__) 的东西——这有点难看，但至少每个函数都有一个唯一的名称。而在 C++03 中，没有等价物。如果您只需要“足够便携”，请查阅您使用的每个编译器的文档，或者依赖 autoconf 之类的东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T21:18:14.713

您是否有任何理由不能使用标准分析工具来为您计算这些调用？像[gprof](http://www.cs.utah.edu/dept/old/texinfo/as/gprof_toc.html)的东西？

否则静态整数将是要走的路。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-02T21:30:07.020

Assuming you want these statistics tracked all the time in your program, you could use an `unordered_map` of your function names:

```
std::unordered_map<const char *, unsigned> stats;

void foo () {
    // use __FUNCDNAME__ for MSVC
    ++stats[__PRETTY_FUNCTION__];
    //...
} 
```

The use of compiler specific function name specifiers is purposefully there to get the decorated function names. This is so that overloaded function names get counted as separate functions.

This technique allows you to add new functions easily without thinking about anything else, but there is a small additional cost if there are hash collisions (which can be remedied somewhat by sizing the `stats` map to be larger). There is no hash computed on the string, since the key is a pointer type, it just uses the pointer value itself as the hash.

If this is just one-off code for profiling, then you should first try to use the code profiling tools available on your platform.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-02T21:16:43.663

您可以将`static`本地变量放在方法本身中，这看起来更简洁，因为这些变量在逻辑上没有连接到类，因此没有理由让它们成为成员。

另外，你可以有一个宏来简化工作。我通常不建议使用宏，但这似乎是一个合适的用途：

```
#define DEFINE_COUNTER \
   static int noCalls = 0; \
   noCalls++;

void foo()
{
   DEFINE_COUNTER
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-02T21:21:41.157

使用实现观察者模式或方法调用拦截的库。你可以从[这个列表](http://en.wikipedia.org/wiki/Observer_pattern#C.2B.2B)中选择一个，或者使用[维生素之](http://unseenstudios.com/karlgluck/2010/07/vitamin-a-cpp-method-call-interceptor-library/)类的东西。

# html - HTML5 getUserMedia 可以访问 USB 密钥文件吗？

> ID：11301277
> 
> 赞同：0
> 
> 时间：2012-07-02T21:14:22.247
> 
> 标签：html

HTML5 getUserMedia 可以访问相机，但是可以用来访问U盘吗？我可以在 web 应用程序中访问 USB 驱动器文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T11:23:53.793

getUserMedia的[W3C 规范将可访问的本地设备定义为](http://dev.w3.org/2011/webrtc/editor/getusermedia.html)

> “本地设备（摄像机、麦克风、网络摄像头）”。

所以不，usb 硬盘不是这个 API 的一部分。

您可能想查看相对较新的文件 API (HTML5)：[https ://developer.mozilla.org/en-US/docs/Using_files_from_web_applications](https://developer.mozilla.org/en-US/docs/Using_files_from_web_applications)

# cassandra - 如何读取可能/可能不存在的复合列，获取其值以更新它并将其保存回来？

> ID：11301278
> 
> 赞同：2
> 
> 时间：2012-07-02T21:14:34.897
> 
> 标签：cassandra, hector

我有一个复合列***（Int32Type，BytesType，AsciiType）***，我需要读取它的值（基于标准），修改它并将其保存回来（类似于手动计数器列）。

我正在查询的复合列可能存在，也可能不存在。

在赫克托耳中最好的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T13:43:44.017

我不能保证以下解决方案是最好的，但它具有创建复合列等基本功能。它基本上进行读取和写入，基本上内联到“我需要读取它的值（基于标准），修改它并将其保存回来（类似于手动计数器列）。” . 但我认为有了这个示例代码，它应该能够作为一个基础，并在这里和那里改进，使其成为最好的。:-) 有空时会彻底测试。话虽如此，以下是我的建议。

```
package com.hector.dataTypes;

import java.util.Iterator;

import me.prettyprint.cassandra.serializers.ByteBufferSerializer;
import me.prettyprint.cassandra.serializers.CompositeSerializer;
import me.prettyprint.cassandra.serializers.IntegerSerializer;
import me.prettyprint.cassandra.serializers.StringSerializer;
import me.prettyprint.cassandra.service.CassandraHostConfigurator;
import me.prettyprint.cassandra.service.ColumnSliceIterator;
import me.prettyprint.cassandra.service.ThriftCluster;
import me.prettyprint.hector.api.Cluster;
import me.prettyprint.hector.api.Keyspace;
import me.prettyprint.hector.api.beans.AbstractComposite.ComponentEquality;
import me.prettyprint.hector.api.beans.ColumnSlice;
import me.prettyprint.hector.api.beans.Composite;
import me.prettyprint.hector.api.beans.HColumn;
import me.prettyprint.hector.api.ddl.ColumnFamilyDefinition;
import me.prettyprint.hector.api.ddl.ColumnType;
import me.prettyprint.hector.api.ddl.ComparatorType;
import me.prettyprint.hector.api.exceptions.HectorException;
import me.prettyprint.hector.api.factory.HFactory;
import me.prettyprint.hector.api.mutation.Mutator;
import me.prettyprint.hector.api.query.QueryResult;
import me.prettyprint.hector.api.query.SliceQuery;

import org.apache.cassandra.db.marshal.Int32Type;
import org.apache.cassandra.utils.ByteBufferUtil;

import com.google.common.base.Joiner;

/**
 *
 * @author jasonw
 *
 */
public class CompositeExample
{
    private String m_node;
    private String m_keyspace;
    private String m_column_family;
    private ThriftCluster m_cassandraCluster;
    private CassandraHostConfigurator m_cassandraHostConfigurator;
    private Mutator<String> mutator;
    private SliceQuery<String, Composite, String> sliceQuery;

    public CompositeExample(String p_node, String p_keyspace, String p_column_family, String p_cluster)
    {
        m_node = p_node;
        m_keyspace = p_keyspace;
        m_column_family = p_column_family;
        m_cassandraHostConfigurator = new CassandraHostConfigurator(m_node);
        m_cassandraCluster = new ThriftCluster(p_cluster, m_cassandraHostConfigurator);
        Cluster cluster = HFactory.getOrCreateCluster(p_cluster, m_cassandraHostConfigurator);
        Keyspace keyspace = HFactory.createKeyspace(m_keyspace, cluster);
        mutator = HFactory.createMutator(keyspace, StringSerializer.get());
        sliceQuery = HFactory.createSliceQuery(keyspace, StringSerializer.get(), CompositeSerializer.get(), StringSerializer.get());
    }

    public boolean createCompositeColumn(String... p_new_columns)
    {
        try
        {
            ColumnFamilyDefinition cfDef = HFactory.createColumnFamilyDefinition(m_keyspace, m_column_family, ComparatorType.COMPOSITETYPE);
            cfDef.setColumnType(ColumnType.STANDARD);
            cfDef.setComparatorTypeAlias("(".concat(Joiner.on(",").join(p_new_columns)).concat(")"));
            cfDef.setKeyValidationClass("UTF8Type");
            cfDef.setDefaultValidationClass("UTF8Type");
            m_cassandraCluster.addColumnFamily(cfDef, true);           
            return true;
        }
        catch (HectorException e)
        {
            e.printStackTrace();
        }

        return false;

    }

    public boolean saveColumn(String p_field_one, String p_field_two, String p_field_three)
    {

        try
        {
            Composite c = new Composite();
            c.addComponent(Int32Type.instance.fromString(p_field_one), ByteBufferSerializer.get());
            c.addComponent(ByteBufferUtil.bytes(p_field_two), ByteBufferSerializer.get());
            c.addComponent(p_field_three, StringSerializer.get());
            HColumn<Composite, String> col = HFactory.createColumn(c, "composite_value", CompositeSerializer.get(), StringSerializer.get());
            mutator.addInsertion("key", m_column_family, col);
            mutator.execute();                   
            return true;

        }
        catch (HectorException e)
        {
            e.printStackTrace();           
        }

        return false;

    }

    public boolean readColumn(String p_key, int p_column_number, ComponentEquality p_equality, int p_value)
    {
        if (p_column_number < 0 || p_column_number > 2)
        {
            return false;
        }

        try
        {
            sliceQuery.setColumnFamily(m_column_family);
            sliceQuery.setKey(p_key);       

            Composite start = new Composite();
            start.addComponent(0, p_value, p_equality);
            Composite end = new Composite();
            end.addComponent(0, p_value, ComponentEquality.GREATER_THAN_EQUAL);         
            sliceQuery.setRange(start, end, false, 1000);

            QueryResult<ColumnSlice<Composite, String>> qr = sliceQuery.execute();

            System.out.println("size = " + qr.get().getColumns().size());

            Iterator<HColumn<Composite, String>> iter = qr.get().getColumns().iterator();

            while (iter.hasNext())
            {
                HColumn<Composite, String> column = iter.next();
                System.out.print(column.getName().get(0, IntegerSerializer.get()));
                System.out.print(":");
                System.out.print(column.getName().get(1, StringSerializer.get()));
                System.out.print(":");
                System.out.print(column.getName().get(2, StringSerializer.get()));
                System.out.println("=" + column.getValue());
            }

            return true;
        }
        catch (HectorException e)
        {
            e.printStackTrace();
        }
        catch (Exception why)
        {
            why.printStackTrace();
        }

        return false;

    }

    public static void main(String[] args)
    {
        boolean isSuccess = false;
        String node_ip = "192.168.0.1";
        String keyspace_name = "mykeyspace";
        String column_family_name = "compositecf";
        String cluster_name = "Test Cluster";

        CompositeExample test1 = new CompositeExample(node_ip, keyspace_name, column_family_name, cluster_name);

        isSuccess = test1.createCompositeColumn("Int32Type", "BytesType", "AsciiType");       
        if (!isSuccess)
        {
            System.err.println("failed to create cf");
            System.exit(-1);
        }

        isSuccess = test1.saveColumn("1027", "blablabla", "this is ascii field");
        if (!isSuccess)
        {
            System.err.println("failed to write");
            System.exit(-1);
        }

        isSuccess = test1.readColumn("key", 0, ComponentEquality.EQUAL, 1027);
        if (!isSuccess)
        {
            System.err.println("failed to read");
            System.exit(-1);
        }

    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T13:56:54.320

```
Composite col = new Composite(yourInt, yourBytes, yourString);

ColumnSlice<Composite, valueType> result = HFactory.createSliceQuery(keyspace, keySerializer, compositeSerializer, intSerializer)    
                                                   .setColumnFamily(columnFamily)
                                                   .setKey(key)
                                                   .setRange(col, col, false, 1)
                                                   .execute()
                                                   .get();

if (result.getColumns().isEmpty()) {
      // do whatever you need to do if there's no value
} else {
      int value = result.getColumns().get(0).getValue();
      int newValue = //some modification to value
      Mutator<keyType> mutator = HFactory.createMutator(keyspace, keySerializer);
      HColumn<Composite, int> column = HFactory.createColumn(col, newValue, CompositeSerializer, intSerializer);
      mutator.addInsertion(key, columnFamily, column);
      mutator.execute();
} 
```

# linux - 运行 bibtex2html 时无法执行二进制文件错误

> ID：11301279
> 
> 赞同：1
> 
> 时间：2012-07-02T21:14:38.610
> 
> 标签：linux, bibtex

我正在为一个我不熟悉的机器上的朋友做一个项目，我遇到了一些错误。

我正在运行一个名为 bibtex2html 的程序，该程序用于生成 HTML 参考页面。当我运行程序时，它给了我一个“无法执行二进制文件”错误。

从我的初步研究来看，这个问题似乎有很多原因，我不确定要开始。

到目前为止我所做的：

```
uname -a -> 
Linux baseline 2.6.38-15-generic-pae #60-Ubuntu SMP Tue May 22 11:48:17 UTC 2012 i686 i686 i386 GNU/Linux

file ~/bibtex2html/bibtex2html -> ~/bibtex2html/bibtex2html: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), dynamically linked (uses shared libs), for GNU/Linux 2.6.15, stripped 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T03:28:19.363

您正确地进行了所有研究，现在您只需要解释它。它是一个 64 位可执行文件 ( `x86-64`)，而您使用的是 32 位内核 ( `i686`)。您需要找到或编译 32 位版本的 bibtex2html。

# jquery - 动态创建的下拉菜单 - 向上/向下箭头键不起作用

> ID：11301280
> 
> 赞同：0
> 
> 时间：2012-07-02T21:14:41.170
> 
> 标签：jquery, dynamic, drop-down-menu, event-handling

我在 jsfiddle ( [http://jsfiddle.net/E7MSN/56/](http://jsfiddle.net/E7MSN/56/) ) 中创建了这段代码，它适用于静态列表，但在我的情况下，我也有一个关于检索不同 ul/li 的 keyup 事件的查询，具体取决于我在搜索框中输入的内容。

似乎发生的情况是，每次我按下向上或向下键时，都会触发 keyup 事件并向服务器发出新查询（PHP 脚本返回 ul 和 li）。然后，具有“选定”类的元素被重置为第一个列表项，而不是像 jsfiddle 示例中那样按箭头键时上下移动。

我尝试使用 .change 作为文本框，但这似乎也不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T21:21:51.837

我使用了 switch 语句，并添加了一个默认情况来处理它，而不是把它放在函数的顶部。问题解决了！

# android - Google api key 非法操作

> ID：11301284
> 
> 赞同：1
> 
> 时间：2012-07-02T21:15:12.620
> 
> 标签：android, google-maps, google-maps-api-3

我正在尝试获取谷歌地图的 api 密钥，但我尝试了这一行，但出现了这个错误

```
C:\Program Files\Java\jdk1.7.0\bin>keytool androiddebugkey -keystore C:\Users\KHALED\.android -storepass android -keypass android
Illegal option:  androiddebugkey
Key and Certificate Management Tool
Commands:
 -certreq            Generates a certificate request
 -changealias        Changes an entry's alias
 -delete             Deletes an entry
 -exportcert         Exports certificate
 -genkeypair         Generates a key pair
 -genseckey          Generates a secret key
 -gencert            Generates certificate from a certificate request
 -importcert         Imports a certificate or a certificate chain
 -importkeystore     Imports one or all entries from another keystore
 -keypasswd          Changes the key password of an entry
 -list               Lists entries in a keystore
 -printcert          Prints the content of a certificate
 -printcertreq       Prints the content of a certificate request
 -printcrl           Prints the content of a CRL file
 -storepasswd        Changes the store password of a keystore
Use "keytool -command_name -help" for usage of command_name 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T21:25:42.067

我认为您需要添加

```
-list -alias 
```

在命令行中的“keytool”和“androiddebugkey”之间 - 即：

```
keytool -list -alias androiddebugkey -keystore C:\Users\KHALED\.android\debug.keystore -storepass android -keypass android 
```

# android - 如何更改 CustomAdapter 中的视图属性？

> ID：11301285
> 
> 赞同：0
> 
> 时间：2012-07-02T21:15:15.707
> 
> 标签：android, android-listview, custom-adapter

我有 CustomAdapter 扩展 ArrayAdapter，在其中我在 LinearLayout 中设置了一些视图 - 一行，像这样（适配器）：

```
public View getView(int position, View convertView, ViewGroup parent) {
    . . .
    ImageView statePic = (ImageView) view.findViewById(R.id.state);
    statePic.setImageResource(R.drawable.light_green);
    return view;
} 
```

这工作正常。但现在我想在我的列表中的项目上绑定一个上下文菜单，所以我有这样的东西（主要活动 - listActivity）：

```
public boolean onContextItemSelected(MenuItem item) {
    AdapterContextMenuInfo info = (AdapterContextMenuInfo) item.getMenuInfo();

    switch(item.getItemId()){
    case CM_START:
        View view = getListAdapter().getView(info.position, null, null);
        ImageView statePic = (ImageView)view.findViewById(R.id.state);
        // I'm sure this view is the right one

        statePic.setImageResource(R.drawable.light_grey);
        view.invalidate();
        view.refreshDrawableState();
        return true;

    case CM_STOP:
        return true;
    }
    return super.onContextItemSelected(item);
} 
```

我想用这个片段实现的是更改该项目中的图像，但这不起作用（视图没有用新值刷新）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T22:02:35.483

您应该使用 AdapterContextMenuInfo 类的 targetView 属性：

```
...
ImageView statePic = (ImageView) info.targetView.findViewById(R.id.state);
... 
```

# iphone - 滚动时将子视图（行）快速添加到 UIScrollView

> ID：11301286
> 
> 赞同：0
> 
> 时间：2012-07-02T21:15:17.593
> 
> 标签：iphone, ios, uitableview, uiscrollview

我有很多行（~100）的 UIScrollView，我实现了 dequeueReusableRow 方法来快速分配和添加我的子视图（行）。一切工作正常，但如果我用减速滚动非常快，一些视图只有在以后才按时添加到 scrollView 中。

```
- (UIView *)dequeueReusableRow
{
    UIView *view = [reusableRows anyObject];

    if(view) 
    {
        [[view retain] autorelease];
        [reusableRows removeObject:view];
    }else{
        view = [[UIView alloc] init....
    }

    return view;
}

- (void)addVisibleRows
{
    UIView *row = [self dequeueReusableRow];
    row.frame = ....
    [scrollView addSubview:row]
}

- (void)scrollViewDidScroll:(UIScrollView *)scrollView
{
    [self addVisibleRows];
    [self removeInvisibleRows];
} 
```

请不要建议我使用 UITableView，因为手风琴的结构看起来像：

```
section
- section
-- section
--- row
- section
section
- row 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T21:19:06.283

dequeueReusableRow 不是 UIScrollViewController 的一部分，所以我认为 dequeueReusableRow 是您自己实现的。如果是这样，您可以显示该代码吗？我们很可能可以帮助解决任何效率低下的问题。

此外，如果您的滚动视图包含行，为什么不使用 UITableView 来为您完成大部分工作？我知道您要求不要提出它-您能解释一下为什么需要使用 ScrollView 以便我们可以更好地为您提供帮助吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T21:54:42.553

从该代码段很难分辨。一些更多的细节将不胜感激。

同时有一个小建议：打电话`removeInvisibleRows`之前`addVisibleRows`

# c++ - 从 C++ 中读取文件，划分输入

> ID：11301288
> 
> 赞同：2
> 
> 时间：2012-07-02T21:15:36.410
> 
> 标签：c++, file-io, get, getline

```
Number of Copies
Movie Title
Movie Actor
Movie Actor
Movie Director
Movie Producer
Movie Production Co.
Number of Copies
Movie Title
Movie Actor
Movie Actor
Movie Director
Movie Producer
Movie Production Co.

Customer1 ID
Customer2 ID 
Customer3 ID 
Customer4 ID 
```

我有一个关于 C++ 的文件 I/O 问题。如果我有一个看起来像这样的输入文件，我可以使用哪些命令来停止将 getlines() 从顶部插入变量，以便开始将 getlines() 从底部插入变量？在伪代码中我可以想象它会像

```
while (the next line isn't "\n"), keep adding to the movie database. 
```

然后

```
while (!fin.eof()), start adding to the customer database 
```

但我不知道如何写第一个while条件。我的书只教我们如何使用 get 和 getline 进行文件 I/O ......显然是这样的

```
while (fin.get() != "\n") 
```

由于操作数类型而不起作用。抱歉，如果我的问题措辞不当，这就是我想到的解决方法。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T21:24:07.057

您可以使用[`std::getline(std::istream&, std::string&)`](http://en.cppreference.com/w/cpp/string/basic_string/getline)获取一行并将其保存在[`std::string`](http://en.cppreference.com/w/cpp/string/basic_string). `std::string`提供了一种[`empty`](http://en.cppreference.com/w/cpp/string/basic_string/empty)检查字符串是否为空的方法。

`std::getline`不会提取分隔符，因此您应该很容易检查一行是否为空。

（提取提示：为了从您的行中提取子字符串，您可以使用[`std::istringstream`](http://en.cppreference.com/w/cpp/io/basic_istringstream).）

# linux - 计算机之间的Linux文件同步

> ID：11301289
> 
> 赞同：6
> 
> 时间：2012-07-02T21:15:39.737
> 
> 标签：linux, synchronization, remote-access, data-synchronization

我正在寻找一种软件，它允许我在我的 linux 机器之间同步特定文件夹中的文件。我搜索了很多主题，我发现的是 Unison。它看起来相当不错，但它不再处于开发阶段，并且不允许我查看文件更改历史记录。所以问题是 - 什么是最好的 linux 文件同步器，即：

1.  （必需）将仅同步选定的文件夹
2.  （必需）将在给定时间（例如每小时）同步计算机
3.  （必需）将是智能的 - 会记住删除的内容和时间，并会询问我是否也想在远程机器上删除它。
4.  （可选）将跟踪更改并允许查看更改历史记录
5.  （可选）将是多平台的

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T21:17:25.790

[Rsync](http://en.wikipedia.org/wiki/Rsync)可能是事实。

我看到 Unison 是基于 Rsync 的——不确定单独的 Rsync 是否可以达到上面的第 3 点。

此外，请参阅[这篇文章](http://www.ibm.com/developerworks/aix/library/au-rsyncfamily/index.html)，了解有关 rsync 的详细信息，包括可用的 GUI。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-06-24T07:59:46.410

虽然我同意 Rsync 对 linux 用户来说是事实上的瑞士刀，但我发现其他 2 个项目更有趣，特别是对于我在不同位置有 2 个工作站和笔记本电脑的用例，所有 3 台机器都用于工作，所以我在这里感到痛苦。我发现了一个非常好的项目，名为： [https ://syncthing.net/](https://syncthing.net/)

我在具有 vpn 访问权限的公共服务器上运行它，我的机器始终处于连接状态并且它可以正常工作。它具有用于监视目的的 gui（基本，但有足够的可用信息）

第二个是付费的，但内置了类似的功能： [https ://www.resilio.com/](https://www.resilio.com/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-18T14:34:17.230

Osync 可能是您正在寻找的东西（参见[http://www.netpower.fr/osync](http://www.netpower.fr/osync)） Osync 实际上是基于 rsync 的，但可以毫无问题地处理上面的第 3 个问题。第 4 点，通过添加 --verbose 参数可以或多或少地跟踪修改的文件，该参数将记录文件更新。实际上，只有数字 5 行不通。Osync 可以在大多数 Unix 风格上运行，但不能在 Windows 上运行。

# mysql - 如何使用一个查询获取包含子列表的列表？

> ID：11301290
> 
> 赞同：2
> 
> 时间：2012-07-02T21:15:43.130
> 
> 标签：mysql, sql, sqlite

我想打印一个数据库表中的项目列表，以及每个项目的相关子项目的小列表（最多 10 个项目）。

例如，我有这两个表：

```
ITEMS

id: integer
name: string

SUBITEMS

id: integer
name: string
item_id: integer 
```

因此，一个项目可以有许多子项目。

我想打印这样的东西：

```
Item 1
this item has: subitem 1, subitem 2, subitem 3

Item 2
this item has: subitem 4, subitem 5, subitem 6

Item 3
this item has: subitem 2, subitem 4, subitem 7 
```

这如何在 SQL 中完成？这甚至可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T21:24:28.027

如果是 MySQL 那么

```
select i.*, group_concat(si.name) as subitems
from items i
left join subitems si on si.item_id = i.id
group by i.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T21:20:59.497

您需要它直接从 SQL 打印出来吗？

典型的查询看起来像

```
SELECT i.item_id,si,item_id FROM Items i
         INNER JOIN Subitems si on i.item_id = si.item_id
         ORDER BY i.item_id 
```

不过，您通常会使用应用程序层进行打印。如果你*真的*需要像你展示的那样的行，你可以用游标做一些事情，但是如果你想要那个精确的输出，直接查询会看起来很时髦。

查看MySQL的[http://dev.mysql.com/doc/refman/5.5/en/group-by-functions.html#function_group-concat](http://dev.mysql.com/doc/refman/5.5/en/group-by-functions.html#function_group-concat)

SQLite 似乎支持类似的操作： [http ://www.sqlite.org/lang_aggfunc.html](http://www.sqlite.org/lang_aggfunc.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T21:59:11.877

感谢 Parahat，我们对如何做到这一点有了明确的答案：

```
SELECT i.name, GROUP_CONCAT(si.name) AS subitems
FROM items i
LEFT JOIN subitems si ON si.item_id = i.id
GROUP BY i.id 
```

这样我们就有了一个无限的子项目列表，它被全局变量 group_concat_max_len 截断。

但是有一种更好的方法可以将其限制为我的问题的初始最大值 10：

```
SELECT i.name,
       SUBSTRING_INDEX(GROUP_CONCAT(si.name), ', ', 10) AS subitems
FROM items i
LEFT JOIN subitems si ON si.item_id = i.id
GROUP BY i.id 
```

不过，这只适用于 MySQL。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-02T21:23:14.483

您需要使用 group by 子句：

你需要

```
select * from tblsubitems
          group by(item_id); 
```

[有关sqlite](http://www.sqlite.org/lang_select.html#resultset)和[mysql](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)的更多信息

# android - 谁能指出我的 Android 弹出窗口的示例实现？

> ID：11301294
> 
> 赞同：-4
> 
> 时间：2012-07-02T21:15:57.757
> 
> 标签：android, popup

这个问题说明了一切。参考资料看起来有点粗略。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T21:30:04.380

你的意思是像一个[AlertDialog](http://developer.android.com/guide/topics/ui/dialogs.html#AlertDialog)？

文档有一些非常简单的示例代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T00:18:24.950

我想你想要这样的[样本](http://www.londatiga.net/it/how-to-create-quickaction-dialog-in-android/)

所有这些示例都有一个扩展 PopupWindows 类的 QuickAction。

如果这是您的要求，请让我现在。

# python - 在 Python 中准确测量对象大小 - Sys.GetSizeOf 不起作用

> ID：11301295
> 
> 赞同：11
> 
> 时间：2012-07-02T21:16:10.200
> 
> 标签：python, memory, slots

我试图准确/明确地找到 Python 中两个不同类之间的大小差异。它们都是新的样式类，除了一个没有定义**插槽**。我已经尝试了许多测试来确定它们的大小差异，但它们最终在内存使用方面总是相同的。

到目前为止，我已经尝试了 sys.GetSizeOf(obj) 和 heapy 的 heap() 函数，没有任何积极的结果。测试代码如下：

```
import sys
from guppy import hpy

class test3(object):
    def __init__(self):
        self.one = 1
        self.two = "two variable"

class test4(object):
    __slots__ = ('one', 'two')
    def __init__(self):
        self.one = 1
        self.two = "two variable"

test3_obj = test3()
print "Sizeof test3_obj", sys.getsizeof(test3_obj)

test4_obj = test4()
print "Sizeof test4_obj", sys.getsizeof(test4_obj)

arr_test3 = []
arr_test4 = []

for i in range(3000):
    arr_test3.append(test3())
    arr_test4.append(test4())

h = hpy()
print h.heap() 
```

输出：

> ```
> Sizeof test3_obj 32
> Sizeof test4_obj 32
> 
> Partition of a set of 34717 objects. Total size = 2589028 bytes.
>  Index  Count   %     Size   % Cumulative  % Kind (class / dict of class)
>      0  11896  34   765040  30    765040  30 str
>      1   3001   9   420140  16   1185180  46 dict of __main__.test3
>      2   5573  16   225240   9   1410420  54 tuple
>      3    348   1   167376   6   1577796  61 dict (no owner)
>      4   1567   5   106556   4   1684352  65 types.CodeType
>      5     68   0   105136   4   1789488  69 dict of module
>      6    183   1    97428   4   1886916  73 dict of type
>      7   3001   9    96032   4   1982948  77 __main__.test3
>      8   3001   9    96032   4   2078980  80 __main__.test4
>      9    203   1    90360   3   2169340  84 type
> <99 more rows. Type e.g. '_.more' to view.> 
> ```

这就是 Python 2.6.0 的全部内容。我还尝试覆盖类的**sizeof**方法，以尝试通过对各个 sizeof 求和来确定大小，但这并没有产生任何不同的结果：

```
class test4(object):
    __slots__ = ('one', 'two')
    def __init__(self):
        self.one = 1
        self.two = "two variable"
    def __sizeof__(self):
        return super(test4, self).__sizeof__() + self.one.__sizeof__() + self.two.__sizeof__() 
```

覆盖**sizeof**方法的结果：

> ```
> Sizeof test3_obj 80
> Sizeof test4_obj 80 
> ```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T21:24:47.473

`sys.getsizeof`返回一个比人们想象的更专业、更没用的数字。事实上，如果你将属性数增加到六个，你的 test3_obj 仍然是 32，但 test4_obj 会跳转到 48 个字节。这是因为 getsizeof 正在返回实现类型的 PyObject 结构的大小，对于 test3_obj 不包括保存属性的字典，但对于 test4_obj，属性不存储在字典中，它们存储在插槽中，所以它们被计入大小。

但是定义的类比没有定义的类`__slots__`占用更少的内存，正是因为没有字典来保存属性。

为什么要覆盖`__sizeof__`？你真正想要完成什么？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-09-26T17:24:38.150

正如其他人所说，`sys.getsizeof`仅返回代表您的数据的对象结构的大小。因此，例如，如果您有一个不断向其中添加元素的动态数组，`sys.getsizeof(my_array)`则只会显示基础`DynamicArray`对象的大小，而不是其元素占用的不断增长的内存大小。

[`pympler.asizeof.asizeof()`](https://pympler.readthedocs.io/en/stable/library/asizeof.html#pympler.asizeof.asizeof)给出对象的大致完整尺寸，对您来说可能更准确。

```
from pympler import asizeof
asizeof.asizeof(my_object)  # should give you the full object size 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T08:04:36.613

首先在你的操作系统的内存管理器中检查 Pyton 进程的大小，没有很多对象。

其次制作许多一种对象并再次检查大小。

第三制作许多其他类型的对象并检查大小。

重复几次，如果每个步骤的大小保持大致相同，您就有了可比较的东西。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-06-17T15:08:15.273

以下功能已在 Python 3.6、64 位系统中测试。它对我非常有用。（我从网上找到它并根据我的风格对其进行了调整，并添加了“**插槽**”功能。我无法再次找到原始来源。）

```
def getSize(obj, seen: Optional[Set[int]] = None) -> int:
  """Recursively finds size of objects. Needs: import sys """
  seen = set() if seen is None else seen

  if id(obj) in seen: return 0  # to handle self-referential objects
  seen.add(id(obj))

  size = sys.getsizeof(obj, 0) # pypy3 always returns default (necessary)
  if isinstance(obj, dict):
    size += sum(getSize(v, seen) + getSize(k, seen) for k, v in obj.items())
  elif hasattr(obj, '__dict__'):
    size += getSize(obj.__dict__, seen)
  elif hasattr(obj, '__slots__'): # in case slots are in use
    slotList = [getattr(C, "__slots__", []) for C in obj.__class__.__mro__]
    slotList = [[slot] if isinstance(slot, str) else slot for slot in slotList]
    size += sum(getSize(getattr(obj, a, None), seen) for slot in slotList for a in slot)
  elif hasattr(obj, '__iter__') and not isinstance(obj, (str, bytes, bytearray)):
    size += sum(getSize(i, seen) for i in obj)
  return size 
```

现在对于以下类的对象，

```
class test3(object):
    def __init__(self):
        self.one = 1
        self.two = "two variable"

class test4(object):
    __slots__ = ('one', 'two')
    def __init__(self):
        self.one = 1
        self.two = "two variable" 
```

得到以下结果，

```
In [21]: t3 = test3()

In [22]: getSize(t3)
Out[22]: 361

In [23]: t4 = test4()

In [25]: getSize(t4)
Out[25]: 145 
```

欢迎提出改进功能的反馈。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-13T19:02:28.670

您可能希望使用不同的实现来获取内存中对象的大小：

```
>>> import sys, array
>>> sizeof = lambda obj: sum(map(sys.getsizeof, explore(obj, set())))
>>> def explore(obj, memo):
    loc = id(obj)
    if loc not in memo:
        memo.add(loc)
        yield obj
        if isinstance(obj, memoryview):
            yield from explore(obj.obj, memo)
        elif not isinstance(obj, (range, str, bytes, bytearray, array.array)):
            # Handle instances with slots.
            try:
                slots = obj.__slots__
            except AttributeError:
                pass
            else:
                for name in slots:
                    try:
                        attr = getattr(obj, name)
                    except AttributeError:
                        pass
                    else:
                        yield from explore(attr, memo)
            # Handle instances with dict.
            try:
                attrs = obj.__dict__
            except AttributeError:
                pass
            else:
                yield from explore(attrs, memo)
            # Handle dicts or iterables.
            for name in 'keys', 'values', '__iter__':
                try:
                    attr = getattr(obj, name)
                except AttributeError:
                    pass
                else:
                    for item in attr():
                        yield from explore(item, memo)

>>> class Test1:
    def __init__(self):
        self.one = 1
        self.two = 'two variable'

>>> class Test2:
    __slots__ = 'one', 'two'
    def __init__(self):
        self.one = 1
        self.two = 'two variable'

>>> print('sizeof(Test1()) ==', sizeof(Test1()))
sizeof(Test1()) == 361
>>> print('sizeof(Test2()) ==', sizeof(Test2()))
sizeof(Test2()) == 145
>>> array_test1, array_test2 = [], []
>>> for _ in range(3000):
    array_test1.append(Test1())
    array_test2.append(Test2())

>>> print('sizeof(array_test1) ==', sizeof(array_test1))
sizeof(array_test1) == 530929
>>> print('sizeof(array_test2) ==', sizeof(array_test2))
sizeof(array_test2) == 194825
>>> 
```

如果您想得到答案，请确保您没有为此代码提供任何无限迭代器。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-07-21T22:27:37.290

我遇到了类似的问题，最后写了自己的帮手来做脏活。[在这里](https://stackoverflow.com/a/38515297/714098)查看

# android - 安卓图像控制

> ID：11301298
> 
> 赞同：1
> 
> 时间：2012-07-02T21:16:25.427
> 
> 标签：android, android-image

我有一个大问题。我想为 android 创建一个控件，在该控件中，用户可以看到图像，并且重叠该图像的是较小的图标/图像，它们相对于背景图像定位。

可以选择较小的图标。

我真的不知道该怎么办。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T21:40:27.973

您可以通过将干净的图像作为背景来做到这一点，如下所示：![美国地图](../Images/a968a349e252fc74469d07944b754398.png)

然后您可以`TextViews`在其中`RelativeLayout`包含名称，例如，`textView`您可以将可点击的属性设置为您的方法。像这样的东西：

```
<TextView
        android:id="@+id/nevada"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignTop="@+id/Oregon"
        android:layout_marginRight="50dp"
        android:layout_marginTop="21dp"
        android:layout_toLeftOf="@+id/Cali"
        android:clickable="true"
        android:onClick="showState"
        android:text="@string/Nevada"
        android:textColor="@color/contact_map_text_color" /> 
```

并且在您的身上，`activity/fragment`您将拥有将由 调用的方法`View`，在示例情况下：“showState”

*编辑：*它可能不是最好的方法，但它确实有效

# c# - 使用 Xml 编写代码

> ID：11301305
> 
> 赞同：0
> 
> 时间：2012-07-02T21:17:01.450
> 
> 标签：c#, c++, xml

这似乎是一个奇怪的问题，但请听我说完。当我找到一个 xml 文件时，我正在查看 NeoAxis 引擎的文件，该文件似乎是存储在字符串中的代码行。

由于引擎是封闭源代码，我看不到它是如何工作的，但对于所有有经验的开发人员来说，这可能是如何工作的？

如果 XML 被加载到代码中，则字符串将被存储为字符串。但是有什么方法可以在诸如 c++ 或 c# 之类的语言中使用字符串作为程序中的语句？

我不知道我是否允许向您展示这个 XML 文件，但这些语句的前缀是一个字母和一个冒号。像这样：`"M:Class.DoSomething();".`

如果我能了解这是如何完成的，它将对很多事情都非常有用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T21:22:30.140

是的，只需将内置的代码编译器与您的字符串源代码一起使用：

```
CSharpCodeProvider codeProvider = new CSharpCodeProvider();
ICodeCompiler icc = codeProvider.CreateCompiler();

System.CodeDom.Compiler.CompilerParameters parameters = new CompilerParameters();
parameters.GenerateExecutable = true;
parameters.OutputAssembly = Output;
CompilerResults results = icc.CompileAssemblyFromSource(parameters,SourceString); 
```

[您可以在此处](http://support.microsoft.com/kb/304655)或[此处](http://www.codeproject.com/Articles/12499/Run-Time-Code-Generation-I-Compile-C-Code-using-Mi)阅读有关它的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T07:12:06.097

XML 可用于存储任何内容，包括程序文本片段。XML 的使用者可以通过多种方式使用这些片段。它可能能够解释性地执行它们，或者它可能只是使用它们来构建一个完整的程序，然后以通常的方式编译和执行。

您发布的代码片段中的分号表明它可能不是 XPath，但除此之外它可能是。在 XML 文档中存储 XPath 表达式是很常见的做法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T21:22:42.027

该`M:Class.DoSomething()`语法看起来很像它可能来自编译器生成的 XML 文档文件。

参见例如[http://msdn.microsoft.com/en-us/library/aa288481(v=VS.71).aspx](http://msdn.microsoft.com/en-us/library/aa288481(v=VS.71).aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T21:27:07.740

如果您真的想知道这对 .NET 是如何工作的，那么您可以查看 Rick Strahl 关于[.NET 中的动态代码执行](http://www.west-wind.com/presentations/DynamicCode/DynamicCode.htm)的优秀教程。现在有点老了，但原则仍然适用

# regex - 我该如何处理这个正则表达式问题？

> ID：11301306
> 
> 赞同：2
> 
> 时间：2012-07-02T21:17:01.810
> 
> 标签：regex, delphi, parsing, extract

我需要从一个隐藏的 HTML 字段中提取一个值，有点想通了，但我现在卡住了。

我的正则表达式看起来像：

```
<input type="hidden" name="form_id" value=".*" 
```

但这会从 HTML 中提取整个字符串。

字符串看起来像：

```
<input type="hidden" name="form_id" value="123"/> 
```

我需要从字符串中提取“值”，它总是在变化，但“名称”总是一样的。有没有办法在不做其他表达式的情况下提取它？我很感激任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T22:51:15.560

```
(?<=<[^<>]+?name="form_id"[^<>]+value=")(.*)(?=") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T21:27:31.507

我只是把这个放在一起。基本上，您想否定请求中的任何结尾 >。所以你可能想做一些这样的事情：

```
<[^>]*hidden[^>]*value="(.*)"[^>]*> 
```

然后阅读第一个捕获组（[Delphi 指令](http://www.regular-expressions.info/delphi.html)）。尽管它确实假定了“隐藏”和“值”的位置顺序，但这使它尽可能地保持通用性。

为了在不考虑顺序的情况下找到值，您可以使用建议的稍微干净的前瞻：

```
 ^(?=.*name="form_id").*value="([^"]*)".*$ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-25T07:11:51.403

`<[a-zA-Z"= _^>]*value="(\d*)"/>`
我已经为您的示例进行了测试。
如果您只想提取输入标签，您可以编写：

```
<input[a-zA-Z"= _^>]*value="(\d*)"/> 
```

# ios - UITableView/UIScrollView 如何自动知道 ContentSize 何时发生变化？

> ID：11301307
> 
> 赞同：24
> 
> 时间：2012-07-02T21:17:02.530
> 
> 标签：ios, uitableview, uiscrollview

是否有一种自动方式来了解 UITableView/UIScrollView 中的 ContentSize 变化？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-07-03T07:05:28.500

答案其实很简单，使用 KVO（Key Value Observing）；

```
- (id)initWithFrame:(CGRect)frame tableView:(UITableView *)tableView
{
    // ....
    [self.tableView addObserver:self forKeyPath:@"contentSize" options:NSKeyValueObservingOptionNew | NSKeyValueObservingOptionOld | NSKeyValueObservingOptionPrior context:NULL];
    // ....
}

- (void) observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context 
{
    if ([keyPath isEqualToString:@"contentSize"]) 
    {
        // Do something
    }
} 
```

不过，我不确定这些标志。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-08-24T10:40:04.883

对于那些不喜欢 KVO 的人：

```
- (void)setContentSize:(CGSize)contentSize {
    [super setContentSize:contentSize];
    // Do something.
} 
```

是的，只是`super`用来访问父方法。这假设你继承 UIScrollview/TableView/CollectionView

# iphone - 我的应用程序启动后如何自动播放音乐？

> ID：11301315
> 
> 赞同：3
> 
> 时间：2012-07-02T21:17:56.050
> 
> 标签：iphone, ios, xcode, audio

我需要一些关于我最近启动的应用程序的帮助。我是编码的一个非常重要的初学者，所以请帮助我，这将意味着很多。用户进入我的应用程序后，我需要播放一段音乐，我遵循了其他 youtube 教程，但它们仅适用于较旧的 Xcode 版本，因此非常感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T01:50:40.953

把它放在你身上怎么样，`application didFinishLaunching`但一定要在你的.h和.m中实例化它。

这样的事情应该可以解决您的问题：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

    NSString* resourcePath = [[NSBundle mainBundle] resourcePath];
    resourcePath = [resourcePath stringByAppendingString:@"/YOURMUSICNAME.wav"];
    NSLog(@"Path to play: %@", resourcePath);
    NSError* err;

    //Initialize our player pointing to the path to our resource
    player = [[AVAudioPlayer alloc] initWithContentsOfURL:
                 [NSURL fileURLWithPath:resourcePath] error:&err];

    if( err ){
        //bail!
        NSLog(@"Failed with reason: %@", [err localizedDescription]);
    }
    else{
        //set our delegate and begin playback
        player.delegate = self;
        [player play];
        player.numberOfLoops = -1;
        player.currentTime = 0;
        player.volume = 1.0;
    }
} 
```

然后，如果你想停止它：

```
[player stop]; 
```

或暂停：

```
[player pause]; 
```

并将其导入您的头文件中：

```
#import <AVFoundation/AVFoundation.h> 
```

**编辑：**

您当然应该在标题中声明它，然后合成它。

//.h 并添加**粗体**部分：

@interface ViewController : UIViewController < **AVAudioPlayerDelegate** > {

```
AVAudioPlayer *player;
}
@property (nonatomic, retain) AVAudioPlayer *player; 
```

//.m

```
@synthesize player; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T21:21:45.327

您可以使用`AVAudioPlayer`. 使用起来非常简单：

```
NSURL *path = [[NSURL alloc] initFileURLWithPath:[DataPersister getQualifiedPathForFileInDirectory:DataPersisterPathBundle fileName:@"music.mp3"]];
NSError *outError;

AVAudioPlayer *musicSound = [[AVAudioPlayer alloc] initWithContentsOfURL:path error:&outError];
[musicSound play];
[path release]; 
```

记得导入

```
#import <AVFoundation/AVFoundation.h> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T09:38:40.700

```
NSURL *url = [NSURL fileURLWithPath:[NSString stringWithFormat:@"%@/MUSIC.mp3", [[NSBundle mainBundle] resourcePath]]];
NSError *error;
audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:&error];
audioPlayer.numberOfLoops = -1;
[audioPlayer play];
audioPlayer.volume = 1.0;
audioPlayer.currentTime = 2; 
```

使用这个 at`- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions`方法肯定会播放音乐

快乐编码 ;)

# unity3d - 平滑的相机旋转

> ID：11301316
> 
> 赞同：2
> 
> 时间：2012-07-02T21:17:57.863
> 
> 标签：unity3d, unityscript

好的，我是 javascript 和 Unity 的新手，所以这显然是一个非常菜鸟的初学者问题。基本上我已经创建了一个放在我的相机上的脚本。然后，当我在游戏中选择一个模型时，它成为相机脚本的目标，我试图让相机顺利转向它。下面是我正在尝试的

在更新功能中，我使用 raycast 在鼠标单击时捕捉一个单位。这成为脚本中的目标变量。它将 bool 设置为 true，然后在 moveto 函数中跟随目标。但如果我在设备上按住鼠标左键，它似乎只会移动相机。我试图选择一个单元，然后让相机平稳地旋转到该单元。关于这个菜鸟错误的任何想法？

```
#pragma strict
var speed = 5.0;
var freeMovementTurnSpeed = 10.0;
var freeMovementForwardSpeed = 10.0;
var freeMovementVerticalSpeed = 10.0;
var maxHeight = 30;
var minHeight = 2;

var target : Transform;

var distance = 10.0;

var maxDistance = 50;
var minDistance = 10;

var xSpeed = 250.0;
var ySpeed = 120.0;

var yMinLimit = -20;
var yMaxLimit = 80;

private var x = 0.0;
private var y = 0.0;

// The distance in the x-z plane to the target
var followDistance = 30.0;
var maxDistanceDelta = 0.2;
var damping = 3.0;
var followTarget = false;
var smoothRotation ;
function Start () {
    var angles = transform.eulerAngles;
    x = angles.y;
    y = angles.x;

    if(target){
        transform.LookAt(target);
    }
    // Make the rigid body not change rotation
    if (rigidbody)
        rigidbody.freezeRotation = true;
}

function LateUpdate () {
    if(target){
        if(followTarget){
            moveTo();
        }
        else{
            targetSelectedMovement();
        }
    }
    else {
        freeMovement();
    }

}

function moveTo(){

    //transform.LookAt (target);

    var currentDistance = Vector3.Distance(transform.position,target.position);

    //if (currentDistance<40){
        //followTarget = false;
    //}
    //else{

        smoothRotation = Quaternion.LookRotation(target.position - transform.position);
        transform.rotation = Quaternion.Slerp(transform.rotation, smoothRotation, Time.deltaTime * damping);
        print(target);
        //transform.position = Vector3.MoveTowards(transform.position,target.position,maxDistanceDelta);
    //}

}

function freeMovement(){
    var zPos = Input.GetAxis("Vertical") * Time.deltaTime * freeMovementForwardSpeed;
    var xPos = Input.GetAxis("Horizontal") * Time.deltaTime * freeMovementTurnSpeed;
    var strafePos = Input.GetAxis("Strafe")* Time.deltaTime * freeMovementForwardSpeed;
    var vertPos = Input.GetAxis("GainVertical")* Time.deltaTime * freeMovementVerticalSpeed;

    if (Input.GetButton("Fire2")) {
        x += Input.GetAxis("Mouse X") * xSpeed * 0.02;
        y -= Input.GetAxis("Mouse Y") * ySpeed * 0.02;

        y = ClampAngle(y, yMinLimit, yMaxLimit);

        var rotation2 = Quaternion.Euler(y, x, 0);
        transform.rotation = rotation2;
    }
    else {
        transform.Rotate(0, Input.GetAxis("Horizontal")*freeMovementTurnSpeed*Time.deltaTime, 0,Space.World);
    }
    if (vertPos > 0 && transform.position.y  > maxHeight){
        vertPos = 0;
    }
    else if(vertPos < 0 && transform.position.y < minHeight){
        vertPos = 0;
    }

    print(transform.position.y);
    transform.Translate(strafePos,vertPos,zPos);

}
function targetSelectedMovement() {
    if(Input.GetKey("a") || Input.GetKey("d") ){

        x += (-Input.GetAxis("Horizontal")) * xSpeed * 0.02;
        var rotation = Quaternion.Euler(y, x, 0);
        var currentDistance = Vector3.Distance(transform.position,target.position);

        var position = rotation * Vector3(0.0, 0.0, -currentDistance) + target.position;

        transform.rotation = rotation;
        transform.position = position;
    }

    var zPos = Input.GetAxis("Vertical") * Time.deltaTime * speed;
    currentDistance = Vector3.Distance(transform.position,target.position);
    if(currentDistance < maxDistance && zPos < 0){
        transform.Translate(0, 0, zPos);
    }
    else if(currentDistance > minDistance && zPos > 0){
        transform.Translate(0, 0, zPos);
    }
    if (Input.GetButton("Fire2")) {
        x += Input.GetAxis("Mouse X") * xSpeed * 0.02;
        y -= Input.GetAxis("Mouse Y") * ySpeed * 0.02;

        y = ClampAngle(y, yMinLimit, yMaxLimit);

        var rotation2 = Quaternion.Euler(y, x, 0);
        var currentDistance2 = Vector3.Distance(transform.position,target.position);

        var position2 = rotation2 * Vector3(0.0, 0.0, -currentDistance2) + target.position;

        transform.rotation = rotation2;
        transform.position = position2;
    }
}

static function ClampAngle (angle : float, min : float, max : float) {
    if (angle < -360)
        angle += 360;
    if (angle > 360)
        angle -= 360;
    return Mathf.Clamp (angle, min, max);
}

function Update () {

    var hit : RaycastHit;

    if (Input.GetButton("Fire1")) {

        var ray : Ray = Camera.main.ScreenPointToRay (Input.mousePosition);
        // Cast a ray forward from our position for the specified distance
        if (Physics.Raycast(ray, hit))
        {
            // Add a specified force to the Rigidbody component to the other GameObject
            if(hit.collider.tag == "Unit"){
                print("Selected " + hit.collider.gameObject.name);
                target = hit.collider.gameObject.transform;
                //transform.LookAt(target);
                followTarget = true;
            }
            else {
                target = null;
            }

        }

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T20:14:54.760

:)

答案来自我上面的评论：

“当我上我的开发机器时，我必须看看，但同时尝试用 Input.GetButtonDown("Fire1") 替换 Input.GetButton("Fire1")。就像一个测试，因为查看你的代码什么都没有跳出来。只要按住按钮，GetButton 就为真，过去我遇到过当鼠标移离对象时它错误触发的问题。

# java - 如何在 android 布局上正确分配 4 个按钮

> ID：11301319
> 
> 赞同：0
> 
> 时间：2012-07-02T21:18:03.413
> 
> 标签：java, android, xml, layout

我试图将 4 个图像按钮分配到 android 布局的 4 个可能的屏幕角（无论 res）。我希望图像背景是静态的（即 50x50 倾角），并且我还希望在背景中全屏显示 android.gesture.GestureOverlayView 层。我很难弄清楚这一点，而且我对 droid dev 非常陌生。使用 Eclipse+AVD 2.1.1

非常感谢！！

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#6495ED"
    android:gravity="fill"
    android:launchMode="singleInstance"
    android:orientation="vertical" >

    <!-- ICON -->
    <ImageView
        android:id="@+id/icon"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <TableLayout
        android:id="@+id/tableLayout2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="0"
        android:stretchColumns="*">

        <TableRow
            android:id="@+id/tableRow5"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

       <!-- SETTINGS -->
            <Button
                android:id="@+id/button1"
                android:layout_width="50dip"
                android:layout_height="50dip"
                android:layout_gravity="left"
                android:layout_weight="1"
                android:background="@drawable/options"
                android:clickable="true"
                android:minHeight="50dp"
                android:minWidth="50dp"
                android:visibility="visible" />

        <!-- LIST -->
            <Button
                android:id="@+id/button4"
                android:layout_width="0dip"
                android:layout_height="50dip"
                android:layout_gravity="right"
                android:layout_weight="1"
                android:background="@drawable/list"
                android:clickable="true"
                android:maxHeight="50dp"
                android:maxWidth="50dp"
                android:visibility="visible" />
        </TableRow>

   <!-- GESTURE (GOES FULL SCREEN ON BACKGROUND -->
   <android.gesture.GestureOverlayView
        android:id="@+id/gestureOverlayView1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >
   </android.gesture.GestureOverlayView>

        <TableRow>
    <!-- SEARCH -->
        <Button
            android:id="@+id/button2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="left"
            android:background="@drawable/find"
            android:clickable="true"
            android:maxHeight="50dp"
            android:maxWidth="50dp"
            android:visibility="visible" />

    <!-- CLOSE -->
        <Button
            android:id="@+id/button3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="right"
            android:background="@drawable/close"
            android:gravity="right|top" 
            android:clickable="true"
            android:Height="50dp"
            android:Width="50dp"
            android:visibility="visible" />

        </TableRow>

    </TableLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T21:29:39.063

相对布局是关键：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/Frame"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" android:background="#6495ED">

    <android.gesture.GestureOverlayView
        android:id="@+id/gestureOverlayView1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
    </android.gesture.GestureOverlayView>

    <ImageButton
        android:id="@+id/imageButton1"
        android:layout_width="50dp"
        android:layout_height="50dp"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:background="#F00" />

    <ImageButton
        android:id="@+id/imageButton2"
        android:layout_width="50dp"
        android:layout_height="50dp"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:background="#F00" />

    <ImageButton
        android:id="@+id/imageButton3"
        android:layout_width="50dp"
        android:layout_height="50dp"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:background="#F00" />

    <ImageButton
        android:id="@+id/imageButton4"
        android:layout_width="50dp"
        android:layout_height="50dp"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:background="#F00" />

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T21:42:57.987

使用`Relative`布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/RelativeLayout"
    android:layout_width="fill_parent"
    android:background="#6495ED"    
    android:layout_height="fill_parent"    
    tools:ignore="HardcodedText" >   

<ImageView
    android:id="@+id/icon"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" />

<android.gesture.GestureOverlayView
    android:id="@+id/gestureOverlayView1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
</android.gesture.GestureOverlayView>    

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button1" />

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_alignParentRight="true"
        android:text="Button2" />  

    <Button
        android:id="@+id/button3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:text="Button3" />

    <Button
        android:id="@+id/button4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentBottom="true"
        android:text="Button4" />

</RelativeLayout> 
```

![在此处输入图像描述](../Images/49e19a7d2264cf17c525ca65181b9540.png)

# ruby-on-rails - 用于报告指标的 Rails 对象结构

> ID：11301329
> 
> 赞同：2
> 
> 时间：2012-07-02T21:18:38.857
> 
> 标签：ruby-on-rails, database, ruby-on-rails-3, ruby-on-rails-3.1

我最近就这个主题问了几个问题，我想我正在设法缩小我需要做的事情。

我正在尝试在 Rails 应用程序中创建一些“指标”（引用，因为这些不应与与应用程序性能相关的指标混淆；这些是基于应用程序数据生成的指标）；在我看来，基本上我希望能够使用类似于以下内容的东西：

```
@metric(@customer,'total_profit','01-01-2011','31-12-2011').result 
```

这将给出给定客户 2011 年的总利润。

当然，我可以使用自定义方法创建度量模型`result`，但我对创建自定义度量（例如，total_profit、total_revenue 等）的最佳方式感到困惑，因为它们易于扩展，以便可以在每个用户的基础上添加自定义指标。

我最初的想法是尝试将每个自定义指标的公式存储在一个带有和模型的结构中`operand`，但这很快就变得非常混乱和冗长，并且在添加每个指标方面证明是非常困难的。`operation``operation_type`

我现在的想法是，也许我可以创建一个自定义指标帮助器方法来保存我的每个指标（因此我可以对每个指标进行硬编码，并将变量传递给每个方法），但这会有多大的可扩展性？这个选项看起来不太像rails-esque。

任何人都可以提出解决此问题的更好选择吗？

编辑：下面的答案是一个很好的答案，因为它使事情变得非常简单-尽管我担心它可能充满危险，因为它使用 eval （因此永远不可能使用用户代码）。是否有另一种选择来执行此操作（我之前的选项，其中操作数等被分解成块，使用了`constantize`和的组合`get_instance_variable`- 有没有办法可以使用这些来使字符串的执行更安全）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T09:26:57.197

这个问题在很大程度上得到了一些讨论：[Rails - Scalable computing model](https://stackoverflow.com/questions/11326904/rails-scalable-calculation-model)。

对于遇到这种情况的任何人，解决方案本质上是确保一个操作始终有两个操作数，但操作数可以是属性，也可以是先前计算的结果（即它可以是度量本身），因此高度可扩展。这避免了评估任何东西的需要，从而避免了由此带来的潜在安全漏洞。

# php - 如果无法访问 /var/log/apache，在哪里查看 PHP 错误日志

> ID：11301330
> 
> 赞同：3
> 
> 时间：2012-07-02T21:18:38.967
> 
> 标签：php, access-denied, error-log

我的网络主机正在为我们的网络服务器运行 ubuntu 10.04。我正在尝试查看我通常会在其中看到的 PHP 错误输出，`/var/log/apache2/error_log...`但我无法访问`/var/log/apache2/`. 我收到一个 HTML 500 错误，通常我会检查 PHP 错误日志。有谁知道如何在无需访问的情况下检查日志`/var/log/apache2/`？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T21:36:05.363

尝试使用 php 脚本中的函数 ini_set 将错误日志设置到可以访问它的其他位置，例如，

ini_set('error_log','/home/username/error.log');

# cakephp - CakePHP 循环计数

> ID：11301332
> 
> 赞同：0
> 
> 时间：2012-07-02T21:18:44.293
> 
> 标签：cakephp, loops, count, items

我扩展了 CakePHP 博客教程，并为我的帖子添加了类别。Posts 模型属于类别模型。在我的帖子视图中，我正在循环抛出我的类别表以列出视图中菜单的类别，这工作正常：

```
/* gets the category names for the menu */
$this->set('category', $this->Post->Category->find('all')); 
```

现在我正在尝试将帖子计数添加到每个菜单（类别）项目。到目前为止，我得到了这个：

```
/* gets the category count for category 2*/
$this->set('category_2_count', $this->Post->find('count', array(
'conditions' => array('Category.id =' => '2')))); 
```

问题是我显然不能再在我的视图中使用循环了。有了这个，我必须得到每个类别 + 每个计数，这似乎很不雅。有没有办法查询类别名称和计数并为视图获取一个数组？

有任何想法吗？我是 Cake 的新手，非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T21:53:44.430

试试这个：

```
$stats = $this->Category->Post->find('all', array(
    'fields' => array(
        'Category.*',
        'COUNT(Post.id) AS cnt'
    ),
    'group' => 'Category.id'
)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T18:12:17.727

在您的控制器中：

```
$this->set('category', $this->Post->Category->find('all', array(
    'fields' => array(
        '*',
        '(SELECT COUNT(*) FROM posts WHERE category_id = Category.id) AS `post_count`'
    )
))); 
```

在您看来：

```
foreach ($category as $c) {
    echo $c['Category']['name']; // category name
    echo $c[0]['post_count']; // post count
} 
```

# php - 是否执行了代码点火器约定？

> ID：11301333
> 
> 赞同：1
> 
> 时间：2012-07-02T21:18:44.973
> 
> 标签：php, codeigniter, cakephp, naming-conventions, codeigniter-2

我是代码点火器的新手，来自坚实的**CakePHP**背景。用户指南涵盖了在命名控制器、模型、视图以及类 + 函数时要遵循的某些约定，但它们实际上是否在任何地方强制执行？您手动加载视图和模型，并且控制器可以被路由到。那么是否有任何真正的理由遵循约定？我个人认为他们只是让我所有的文件和底层代码看起来很*丑陋*，而 id 只是覆盖它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T21:31:19.303

不，CodeIgniter 永远不会对您强制执行任何操作，除非它是安全或功能要求。

# transactions - JTA 是否跨多个线程工作？

> ID：11301334
> 
> 赞同：4
> 
> 时间：2012-07-02T21:18:48.140
> 
> 标签：transactions, jta, distributed-transactions, xa, atomikos

从 JTA 规范中，我了解到它仅适用于（或支持）分布式事务，用于调用线程。这是否意味着事务不能跨越多个线程？还是取决于实施？

是否有任何 JTA 实现支持跨线程的 XA？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T08:48:53.883

您可以在初始线程中使用 TransactionManager 的[getTransaction()并在另一个线程中使用](http://docs.oracle.com/javaee/6/api/javax/transaction/TransactionManager.html#getTransaction%28%29)[resume()](http://docs.oracle.com/javaee/6/api/javax/transaction/TransactionManager.html#resume%28javax.transaction.Transaction%29)将同一事务跨越多个线程，或者使用[suspend()](http://docs.oracle.com/javaee/6/api/javax/transaction/TransactionManager.html#suspend%28%29) / [resume()](http://docs.oracle.com/javaee/6/api/javax/transaction/TransactionManager.html#resume%28javax.transaction.Transaction%29)将事务移动到另一个线程。

是否支持此功能取决于特定的事务管理器实现。很有可能会支持这一点，因为当需要在多个 bean 之间传递相同的事务（可能在不同的工作管理器上运行）时需要这些特性，或者如果应用服务器需要跨多个 VM 跨越事务正在集群中运行（在这种情况下，您可能需要真正深入研究特定的事务管理器实现或让应用服务器完成其家庭工作）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-03T10:07:41.757

不，如果您使用 JTA 实现，则不能使用 getTransaction()。例外是：JTA EntityManager 不能使用 getTransaction()。

# database - 下面的建模是否需要一个独立于 Rails 内部提供的数据库？

> ID：11301337
> 
> 赞同：0
> 
> 时间：2012-07-02T21:19:05.270
> 
> 标签：database, ruby-on-rails-3, postgresql, railstutorial.org

我最近完成了 Hartl 的 Rails 教程，并设计了一个我想尝试构建的小应用程序。我想了解我是否需要学习并将单独的数据库（例如 PostgreSQL）集成到我的 Rails 模型中，以便对涉及基于彼此共享质量匹配用户的功能进行建模。

例如，如果 user`a`和 user`z`都表示他们`like chinese food`as 和`like spicy meatballs`，则他们将彼此“匹配”，其中任何一个用户都可以发起“友谊请求”。但是，如果`a`要喜欢所描述的食物，但用户`b` `like spicy meatballs`和`like tapas`,`a`和`b`不会相互匹配（因为他们只喜欢 1 个共同点.. 或其他一些愚蠢的匹配逻辑:)）。当然，实际模型可能比这稍微复杂一些，其中可能存在“音乐”或“运动”等其他因素，其中匹配过程会认为某些品质优越，并在匹配过程中比其他因素更重视它们.

我的问题是——

*   Rails 是否足以处理上述稍微复杂的数据库，用户在其中输入他们的信息，然后“黑盒”模型会吐出匹配项？是否有任何资源可以让我了解更多关于 Rails 中的数据库的信息？
*   如果不是，您会建议我了解更多关于哪种类型的数据库？PostgreSQL 会是一个好的候选者吗？

谢谢！

编辑 - 为澄清起见，我的问题源于[本教程本部分中](http://ruby.railstutorial.org/chapters/modeling-users#top)讨论的主题，其中提到了如何使用 Rails 可以使人们“几乎不必考虑 Rails 如何存储数据”。我想知道当数据库需要自己执行某种类型的工作（例如匹配）时，这种情况是否仍然存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T22:10:18.307

哇哇哇。首先，rails 不是数据库。模型是数据库的反映，是一种将记录视为实例变量的结构化方式。所以是的，你需要一个数据库。建议您从 SQLite 开始，因为它既美观又小巧，并且数据在您的应用程序中以文件的形式存在。然后稍后升级 MySQL（注意：这是一般建议，不知道您接下来可能会做什么项目）。

资源：我强烈推荐 Railscasts.com 从这个开始，然后一路向上： [http ://railscasts.com/episodes/310-getting-started-with-rails](http://railscasts.com/episodes/310-getting-started-with-rails)

# javascript - Reddit 提交 API 500 错误

> ID：11301342
> 
> 赞同：1
> 
> 时间：2012-07-02T21:19:32.037
> 
> 标签：javascript, reddit

我正在尝试使用 reddit API 发布帖子，但服务器返回 500 错误。

例如，我尝试使用我的 cookie 集发布到此 URL：

```
http://www.reddit.com/api/submit?title=testtitle&sr=compsci&uh=<modhash_goes_here>&text=testtext&kind=self 
```

我的 Chrome 开发工具打印以下错误：

```
POST <my long URL goes here> 500 (Internal Server Error) 
```

我在 StackOverflow 上的某处读到您需要 modhash*和*cookie，所以这就是我正在使用的。我尝试不使用 modhash，并尝试使用 Apigee 上列出的多余的“r=subreddit”参数。都没有帮助。

为什么我会收到 500 错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T01:12:08.827

您不应该在 URL 中发布数据；您在 POST 对象中设置数据，然后在 POST 中设置 .... 这是有道理的，因为您 POST 诸如密码之类的东西。例如（使用 jQuery）：

```
$.post('http://www.reddit.com/api/vote',
        {
          'id' : 't3_' + id,
          'dir': dir,
          'uh' : mod_hash
        },
        function(data) {
            var err = false;
            for (var i in data) {
                if (data.hasOwnProperty(i)) {
                    err = true;
                    break;
                }
            }

            // No error!
            callback(err);
        }); 
```

URL 恰好适用于一些 reddit API 调用，因为它们在 GET 和 POST 上实现了它们。

# java - 如何提高 Tesseract 中 OCR 文本的准确性？

> ID：11301343
> 
> 赞同：3
> 
> 时间：2012-07-02T21:19:35.353
> 
> 标签：java, android, android-ndk, ocr, tesseract

我使用 Google 的 Tesseract API 创建了一个用于识别文本的基本应用程序，并将其与我的相机应用程序集成。它工作正常，但唯一的问题是准确性，因为有时文本被识别为随机字符集，我猜准确性约为 50%。

此外，当它尝试扫描图像中的四个以上单词时，应用程序会崩溃。

```
String ocrText = baseApi.getUTF8Text();
baseApi.end(); 
```

`baseApi`Tesseract API 类的对象在哪里。

我是否需要使用不同的数据结构来保存已识别的文本，或者是否有其他原因导致四个以上的单词无法识别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T14:02:14.407

Tesseract API 类提供了一个[isValidWord](http://zdenop.github.com/tesseract-doc/group___advanced_a_p_i.html#ga2c06caf08c9a8aa97a08a2de2f6200df)方法来检查字符串是否为有效单词。您可以使用它来检查识别的字符。这将提高输出的准确性。

我正在使用 Tess4j 进行开发，它是 tesseract-ocr 的 Java JNA 包装器，在检查后它给出了相当好的结果。

不准确的结果可能是由于文本大小，检查[一下](http://code.google.com/p/tesseract-ocr/wiki/FAQ)。它说“精度下降到 10pt x 300dpi 以下，迅速低于 8pt x 300dpi。”

此外，不能检测到超过 4 个单词取决于很多因素，测试图像的类型（具有多少特征）、图像的大小、平台等。

# php - 如何将文本列表转换为带有 key=value 的 PHP 关联数组？

> ID：11301345
> 
> 赞同：0
> 
> 时间：2012-07-02T21:19:41.493
> 
> 标签：php

我在文本文件中有一个列表：

```
 Alabama    
 Alaska     
 Alberta    
 ... 
```

我想要一个这样的 PHP 数组：

```
 array('Alabama' => 'Alabama', 'Alaska' => 'Alaska', ...) 
```

我怎么会有这个数组？（我是 PHP 和一般计算的初学者）。非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T21:27:42.790

您可以使用[`file()`](http://php.net/file)将整个文件读取到数组中，并使用[`array_combine()`](http://php.net/array_combine)来分配数组键。

```
$arr = file('file.txt', FILE_SKIP_EMPTY_LINES | FILE_IGNORE_NEW_LINES);
$arr = array_combine($arr, $arr); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T21:23:46.223

```
// read the file as an array of lines
$lines = file('./myFile.txt', FILE_IGNORE_NEW_LINES | FILE_SKIP_EMPTY_LINES);

// fill the array
$arr = array();
foreach($lines as $line) {
    $arr[$line] = $line;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-02T21:37:31.093

您实际上可以将文件读入数组。

```
$states=require('path/to/states.php'); 
```

然后在 states.php 文件中

```
return array(
   'Alabama' => 'Alabama',
   'Alaska' => 'Alaska'
   // and so on.
); 
```

您必须格式化您的列表，但这应该很容易使用带有正则表达式的文本编辑器。

# html - 用于表格的 Perl HTML 解析器

> ID：11301348
> 
> 赞同：0
> 
> 时间：2012-07-02T21:20:06.843
> 
> 标签：html, perl, parsing, html-parsing

HTML 有很多不同的解析器，很难选择正确的解析器。

我的任务是读取**url**并找到`<table>`具有特定**id**的内容，然后解析`<tr>`该表的所有行以获取内容（文本），以及标签内的`<a>`链接和`<img>`图像。`<td>`

我还需要检查每个行元素的**类**以将数据分类到类别。

我最好的选择是什么，我应该使用哪个库和什么方法来快速获得结果？

* * *

*我要解析的部分 HTML 代码示例：*

```
<table id="t1">
  <tr class="r1">
    <td class="c1"><a href="..."><img height="50" src="..." width="50" /></a></td>
    <td class="c2">
      <div class="d1">
        <ul class="u1">
          <li class="l1"><a href="..." rel='...'>text here</a></li>
          <li class="l2"><a href="..." rel='...'>text here</a></li>
        </ul>
      </div>
      <div class="d2">
        <a href="...">text here</a>
      </div>
    </td>
    <td class="c3">
      <div ...>...</div>
      <div class="d2">
        <a href="...">text here</a>
      </div>
    </td>
    <td class="c4">text here</td>
    <td class="c5">text here</td>
  </tr>
  ...
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T22:07:08.820

使用[Web::Query](http://p3rl.org/Web%3a%3aQuery)。使用它的方法`find`and`text`和`attr`。

```
use List::Gen qw(mapn);
use Web::Query 'wq';

sub classify {
    my ($l) = @_; my %r;
    mapn { push @{ $r{$_[0]} }, $_[1] } 2, @$l; return %r;
};

my $w = wq('file:///tmp/so11301348.html');
my %rows = classify $w
    # find a <table> with specific id
    ->find('table#t1')
    # parse all <tr> rows of this table for content (text)
    # check class for each row element to sort data to categories
    ->find('tr')->map(sub {
        my (undef, $tr) = @_;
        return $tr->attr('class') => $tr->text;
    });
# (
#     '' => [
#         ' ... '
#     ],
#     r1 => [
#         'text heretext heretext here...text heretext heretext here'
#     ]
# )

my $links_images = $w
# but also <a> links and <img> images within <td> tags
->find('td a, td img')
->map(sub {
    my (undef, $e) = @_;
    return $e->attr('src')
        ? [img => $e->attr('src') => $e->attr('alt')]
        : [a => $e->attr('href') => $e->text];
});
# [
#     ['a',   '...', ''],
#     ['img', '...', ''],
#     ['a',   '...', 'text here'],
#     ['a',   '...', 'text here'],
#     ['a',   '...', 'text here'],
#     ['a',   '...', 'text here']
# ] 
```

# php - 为什么我对 Magento Block 的 getTemplateFile 方法的调用返回 null？

> ID：11301351
> 
> 赞同：4
> 
> 时间：2012-07-02T21:20:23.387
> 
> 标签：php, oop, magento

当我在索引控制器中使用以下代码时

```
<?php
class Nofrills_Booklayout_IndexController  extends Mage_Core_Controller_Front_Action
{
    public function indexAction()
    {
        $block = new Mage_Core_Block_Template();        
        $block->setTemplate('helloworld.phtml');
        var_dump($block->getTemplateFile());
    }
} 
```

我期待这样的结果

```
string 'frontend/base/default/template/helloworld.phtml' (length=47) 
```

但是，在我的系统上，我得到

```
null 
```

我的系统有什么问题，它正在返回`null`调用

```
<code>getTemplateFile</code> 
```

**或者**我如何自己调试这个？

发生在 Magento 1.7.0.1 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T21:21:40.297

我对此进行了调查，但无法在新安装的 1.7.0.1 版本上重现该问题。这意味着您的系统配置有所不同。可能是文件权限问题，可能是一些更改的 Magento 代码，可能是我没有考虑的问题。

这意味着要弄清楚发生了什么，唯一的方法是通过 Magento 如何确定模板路径的漫长而艰难的调试过程。在正常系统操作下，这**永远不会**返回 null。出于某种原因，在您的系统上是这样。我将在下面概述此类调用的正常调用堆栈。希望这将为您提供使系统运行所需的信息。

此外，在我们进入调用堆栈之前，您的继承链和/或模板块方法可能已经被弄乱了。该`null`值是`Varien_Object`调用 a 的魔法设置器但未设置任何值时返回的值。检查您的`Mage_Core_Block_Template`课程是否仍然具有它的`getTemplateFile`方法，并且

```
class Mage_Core_Block_Template extends Mage_Core_Block_Abstract

abstract class Mage_Core_Block_Abstract extends Varien_Object 
```

请记住，下面的文件路径假定没有人在系统上的某个位置放置类覆盖或重写

该`getTemplatefile`方法定义在

```
#File: app/code/core/Mage/Core/Block/Template.php
public function getTemplateFile()
{
    $params = array('_relative'=>true);
    $area = $this->getArea();
    if ($area) {
        $params['_area'] = $area;
    }
    $templateName = Mage::getDesign()->getTemplateFilename($this->getTemplate(), $params);
    return $templateName;
} 
```

您可以看到这是`getTemplateFilename`设计包对象的包装器。

```
#File: app/code/core/Mage/Core/Model/Design/Package.php
public function getTemplateFilename($file, array $params=array())
{
    $params['_type'] = 'template';
    return $this->getFilename($file, $params);
} 
```

这反过来又是一个包装器`getFilename`

```
#File: app/code/core/Mage/Core/Model/Design/Package.php
public function getFilename($file, array $params)
{
    Varien_Profiler::start(__METHOD__);
    $this->updateParamDefaults($params);
    $result = $this->_fallback($file, $params, array(
        array(),
        array('_theme' => $this->getFallbackTheme()),
        array('_theme' => self::DEFAULT_THEME),
    ));
    Varien_Profiler::stop(__METHOD__);
    return $result;
} 
```

这反过来又是一个呼吁`_fallback`

```
#File: app/code/core/Mage/Core/Model/Design/Package.php
protected function _fallback($file, array &$params, array $fallbackScheme = array(array()))
{
    if ($this->_shouldFallback) {
        foreach ($fallbackScheme as $try) {
            $params = array_merge($params, $try);
            $filename = $this->validateFile($file, $params);
            if ($filename) {
                return $filename;
            }
        }
        $params['_package'] = self::BASE_PACKAGE;
        $params['_theme']   = self::DEFAULT_THEME;
    }
    return $this->_renderFilename($file, $params);
} 
```

这`_fallback method also calls the `validateFile` and `_renderFilename` methods.`

 ````
#File: app/code/core/Mage/Core/Model/Design/Package.php    
public function validateFile($file, array $params)
{
    $fileName = $this->_renderFilename($file, $params);
    $testFile = (empty($params['_relative']) ? '' : Mage::getBaseDir('design') . DS) . $fileName;
    if (!file_exists($testFile)) {
        return false;
    }
    return $fileName;
}

...

protected function _renderFilename($file, array $params)
{
    switch ($params['_type']) {
        case 'skin':
            $dir = $this->getSkinBaseDir($params);
            break;

        case 'locale':
            $dir = $this->getLocaleBasedir($params);
            break;

        default:
            $dir = $this->getBaseDir($params);
            break;
    }
    return $dir . DS . $file;
} 
```` 

`Somewhere along this path your null`正在被插入到混合中。

（如果您最终找到答案，请告诉我们）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T12:03:51.700

正如[Vinai](https://stackoverflow.com/users/485589/vinai)在他[对 OP 的原始评论中](https://stackoverflow.com/questions/11301351/why-is-my-call-to-a-magento-blocks-gettemplatefile-method-returning-null#comment-14879112)指出的那样，这个问题需要一个 tarball 来解决。

`Mage_Core_Block_Abstract` *必须*加载的类定义，否则将输出有关`include()`或非对象操作的错误，或者可能根本没有输出，具体取决于开发人员模式。

应该注意的是，直到[Magento 1.4.1.0](https://github.com/LokeyCoding/magento-mirror/blob/1.4.1.0/app/code/core/Mage/Core/Block/Template.php#L112)[`getTemplateFile()`才定义](https://github.com/LokeyCoding/magento-mirror/blob/1.4.0.1/app/code/core/Mage/Core/Block/Template.php#L223)。最有可能的问题是or的版本不正确，无论是在本地或社区代码池中修改后出现，还是报告的 Magento 版本不正确。有用的输出如下：`Mage_Core_Block_Template``Mage_Core_Model_Design_Package`

```
public function indexAction()
{
    ini_set('display_errors',1);
    Mage::setIsDeveloperMode(true);

    $block = new Mage_Core_Block_Template();
    $block->setTemplate('helloworld.phtml');
    $debug = new ReflectionClass($block);

    echo Mage::getVersion();

    Zend_Debug::dump($debug->getFileName());
    Zend_Debug::dump($debug->getMethods());
} 
```

# aptana3 - 如何在 FireFox 中删除 Aptana 上下文菜单？

> ID：11301352
> 
> 赞同：1
> 
> 时间：2012-07-02T21:20:44.150
> 
> 标签：aptana3

我已经安装了 Aptana Sstudio 3。几个小时后，我将其卸载。从那以后，我在 FireFox 中有一个指向 Aptana Studio 的上下文菜单。如何删除该上下文菜单？

谢谢。

PS：这真的很烦人。我希望一个程序在卸载时会删除自身的所有痕迹，并且不会在系统中留下各种残留的垃圾。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T07:55:50.520

右击FF。转到配置编辑器并从列表中删除 Aptana。

# git - 为什么 git reset --hard 不把我的本地文件改回原来的状态？

> ID：11301359
> 
> 赞同：6
> 
> 时间：2012-07-02T21:21:18.507
> 
> 标签：git, revert

我搞砸了，实际上将一个 git repo 推送到了另一个我的 repos 的 url。我正在尝试撤消此操作，但遇到了麻烦，而且我之前没有使用过“git reset”。

假设最后一次良好提交的哈希是 12345。我尝试这样做`git reset --hard 12345`似乎成功而没有错误，但由于某种原因它没有更改我的本地文件。我的本地工作目录仍然包含所有意外推送的文件。我该如何恢复它们？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-02T21:25:04.610

这些是未跟踪的文件吗？您可以通过以下方式删除这些：

`git clean -f -d`

# ios - 没有 AppStore 的 iOS 应用部署

> ID：11301361
> 
> 赞同：24
> 
> 时间：2012-07-02T21:21:37.047
> 
> 标签：ios, deployment, app-store, mdm

我正在我的公司开发一个应用程序。我们想将这个应用程序分发给我们的客户，但不使用 Apple 的 AppStore，这可能吗？

我听说过 MDM（移动设备管理器），但我不确定它是否能满足这一需求？

我还听说过内部部署的企业开发人员许可证，但如果我理解正确，这意味着该应用程序只能在我的公司内部部署，而不能部署给我们的客户，对吗？

感谢您的澄清。

塞布

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-02T22:20:55.660

如果您想在没有 App Store 的情况下向客户提供应用程序，您可以选择，但没有一个很棒。

二进制的无线分发有很多选择，这真的不是复杂的部分。您拥有 MDM 解决方案、HockeyKit、TestFlight、手动服务器操作 - 所有这些都相当简单且有据可查。

事情变得令人讨厌的地方在于签约。如果你绝对不想参与 App Store 环境（没有应用商店，没有批量购买计划），你只有两个现实的选择：

*   Ad Hoc - 仅限于 100 个设备。设备必须明确添加到规定中。
*   企业 - 没有设备限制，设备不需要明确添加到配置中。实际上，这些构建*将在任何设备上运行*；需要注意的是，法律上不允许您将这些构建分发给公司以外的任何人。

如果您打算为其他公司及其员工开发应用程序，那么您唯一可行的选择是使用附加到该公司开发帐户的签名证书来签署最终版本。企业签名路线是一个非常好的方法，如果您可以让公司签署所有文书工作以获得他们自己的开发者帐户，由他们拥有。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-07-06T16:36:02.120

对于现有的 iOS 设备，您实际上只有 4 个选择：

1) 每次 iOS 开发人员注册时，Ad Hoc 分发到最多 100 台设备（包括通过清单文件和 SSL 进行的无线 Ad Hoc。）

2) 企业分发，用于分发给具有 D&B 评级的公司的员工。

3) Apple 的 iTunes 应用商店（如果您的应用已获得 Apple 批准）。（这包括 B2B 程序和受帐户/密码保护的应用程序。）（现在还包括多达 1000 人使用 Apple 新的 Testflight 服务。）

4)**无限制**地分发给拥有自己的个人、公司或企业 iOS/Apple 开发者注册的其他人。该发行版可以是带有源代码或预编译库的 Xcode 项目，也可以是客户可以使用自己的开发人员证书（重新）进行代码设计的 ipa 或存档文件。对于每位客户的价格远高于 99 美元的应用程序，此年度开发人员计划注册的费用可能只是客户的一点额外费用（如果获得适当的法律授权，甚至可以作为年度付费服务处理。）

4 b.) 附加更新：截至 Apple 发布 Xcode 7（2015 年底），任何只有免费 Apple ID 的人都可以在他们的 Mac 上使用 Xcode 7 将可构建 Xcode 项目中的应用程序直接安装到他们自己的系留 iOS 设备上这样，无需向 Apple 支付 99 美元即可注册。看到[这个](https://stackoverflow.com/questions/30735942/install-app-on-ios-without-apple-developer-program-xcode-7)答案。

这实质上允许无限制地分发给任何可以物理访问当前 Mac 并且知道如何运行 Xcode 的人。

选项 (1)、(2) 和 (4) 不需要经过 App Store 批准。没有其他选项可将应用程序分发到库存 OS iOS 设备。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T21:35:45.360

你可以看看[https://testflightapp.com/](https://testflightapp.com/)。对于只需要一个应用程序进行开发阶段测试的客户和用于约定的应用程序（时间有限，单位数量有限），我们经常使用它。

Testflight 对于开发人员和最终用户都非常易于使用，但它不太适合将在大量设备上使用的应用程序，因为安装到的所有设备都需要在您的配置文件中插槽数量有限。

**编辑** testfligt 方法不再有效。您现在可以使用集成到 itunesconnect 中的 TestFlight。或者，您可以在使用他们的分发系统时集成[crashlytics.com 。](http://crashlytics.com)它工作得很好

# php - php 如何将 ?page=1 替换为 1

> ID：11301364
> 
> 赞同：0
> 
> 时间：2012-07-02T21:21:43.163
> 
> 标签：php, url, replace

我只是想知道其他网站如何替换那里的变量。

示例： [http ://www.example.com/page.php?page=1](http://www.example.com/page.php?page=1)

替换： [http ://www.example.com/page/1](http://www.example.com/page/1)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T21:27:21.187

确实，正如 ssx 所说的那样。

您需要网站根目录中的 .htaccess 文件，其中一些内容看起来像这样（我使用这个）

```
RewriteEngine On 

RewriteRule ^([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/([\(\)\|a-zA-Z0-9_-]+)/([0-9]+)/?$   /index.php?ext=$1&cat=$2&name=$3&urlID=$4 [L]
RewriteRule ^([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/([\(\)\|a-zA-Z0-9_-]+)/?$     /index.php?ext=$1&cat=$2&name=$3 [L]
RewriteRule ^([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/p=([0-9]+)/?$     /index.php?ext=$1&cat=$2&p=$3 [L]
RewriteRule ^([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/?$    /index.php?ext=$1&cat=$2 [L]
RewriteRule ^([a-zA-Z0-9_-]+)/?$     /index.php?ext=$1 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T21:25:42.373

我想说看看我不久前提供给其他人的答案。我会在这里再次输入或复制并粘贴它，但链接要容易得多。

[PHP 动态数据库页面重写 URL](https://stackoverflow.com/questions/11022509/php-dynamic-db-page-rewrite-url/11022705#11022705)

# math - GLSL：将转换从曲面细分评估着色器移动到顶点着色器

> ID：11301369
> 
> 赞同：1
> 
> 时间：2012-07-02T21:21:58.827
> 
> 标签：math, opengl, glsl

我正在使用 tessellation-shaders 在 glsl 中工作，并且正在尝试进行置换贴图。它正在工作，但我想将矩阵转换代码从曲面细分评估着色器移动到顶点着色器。为什么我想在顶点着色器中有这个是因为我不想对每个子三角形顶点进行这个计算，我希望顶点在顶点着色器的屏幕空间中，这样我就可以决定每个三角形应该是多少在细分控制着色器中细分。

不工作的版本“几乎”工作，渲染三角形时存在一些问题。

我真的很感激即使是最小的暗示可能是错误的。

* * *

## 这个（坏的）版本有效（位置和法线在镶嵌评估着色器中转换）

```
// vertex shader
void main_(void)
{
    gl_Position     = VertexPosition;
    VertexTexCoord1 = VertexTexCoord;
    VertexNormal1   = VertexNormal;
}

// tessellation evaluation shader
void main_()
{
    VertexTexCoord3     =    interpolate(VertexTexCoord2);
    vec3 normal         =    interpolate(VertexNormal2);
    vec4 pos            =    interpolate(gl_in[0].gl_Position, gl_in[1].gl_Position, gl_in[2].gl_Position);

    vec4 movement       =    vec4(normal * (texture2D(heigthMap,VertexTexCoord3).r), 0.0);

    gl_Position         =    mvpMatrix * (pos + movement);
} 
```

* * *

## 此版本不起作用（位置和法线在顶点着色器中进行转换）

```
// vertex shader
void main(void)
{
    gl_Position     = mvpMatrix * VertexPosition;
    VertexTexCoord1 = VertexTexCoord;
    VertexNormal1   = mat3(mvpMatrix) * VertexNormal;
}

// tessellation evaluation shader
void main()
{
    VertexTexCoord3     =    interpolate(VertexTexCoord2);
    vec3 normal         =    interpolate(VertexNormal2);
    vec4 pos            =    interpolate(gl_in[0].gl_Position, gl_in[1].gl_Position, gl_in[2].gl_Position);

    vec4 movement       =    vec4(normal * (texture2D(heigthMap,VertexTexCoord3).r), 0.0);

    gl_Position         =    (pos + movement);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T21:28:31.023

在“非工作”版本中，镶嵌着色器的最后一行似乎不正确。您忘记了在源变量中您将“运动”乘以 mvpMatrix。

我会尝试使用这个：

```
// tessellation evaluation shader
void main()
{
    VertexTexCoord3     =    interpolate(VertexTexCoord2);
    vec3 normal         =    interpolate(VertexNormal2);
    vec4 pos            =    interpolate(gl_in[0].gl_Position, gl_in[1].gl_Position, gl_in[2].gl_Position);

    vec4 movement       =    vec4(normal * (texture2D(heigthMap,VertexTexCoord3).r), 0.0);

    /// This multiplication by mvpMatrix is inevitable
    gl_Position         =    (pos + mvpMatrix * movement);
} 
```

对不起，如果我混合了阶段的顺序，但上面的代码（两个版本）绝对是不等价的。

# unzip - 确定文件压缩类型

> ID：11301371
> 
> 赞同：2
> 
> 时间：2012-07-02T21:22:05.413
> 
> 标签：unzip, compression

在几个月前切换到 Mac 之前，我将大量文件从 PC 备份到 S3。几个月后，我现在尝试打开这些文件，发现这些文件都是由我使用的 S3 GUI 工具压缩的，所以我无法打开它们。

我不记得我用来上传文件的程序和命令行中的标准解压缩命令不起作用，例如，

> 解压
> 
> bunzip2
> 
> 焦油-zxvf

如何确定文件的压缩类型是什么？或者，我可以尝试哪些其他解压技术？

PS - 我知道文件没有损坏，因为我在最初上传到 S3 时测试了下载并打开它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T21:30:13.603

您可以使用 Universal Extractor（开源）来确定压缩类型。这是一个链接： http: [//legroom.net/software/uniextract/](http://legroom.net/software/uniextract/)

小缺点是它首先查找扩展名，但我设法自己更改了未知文件的扩展名，它几乎总是有效，例如 .rar 或 .exe 等。

* * *

编辑：

我找到了一大堆存档程序，也许其中一个可以工作？大得离谱：

[http://www.maximumcompression.com/data/summary_mf.php](http://www.maximumcompression.com/data/summary_mf.php) http://www.maximumcompression.com/index.html

# formtastic - 如何在 formtastic 1.2.4 字段上指定自定义类？

> ID：11301373
> 
> 赞同：1
> 
> 时间：2012-07-02T21:22:09.147
> 
> 标签：formtastic

我有这个自定义表单生成器，它调用：

```
basic_input_helper(:text_field, :date, :date_value, options.merge!({:html_options => {:class => "datepicker"}})) if options[:response_class] == "date" 
```

第四个参数是选项（`html`选项，如果我正确阅读了代码），我希望该行添加`class="datepicker"`到我的输入字段中，但我得到：

```
<input id="r_3_date_value" name="r[3][date_value]" size="30" type="text" value="2012-07-02" /> 
```

完全没有`class`属性。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:22:33.313

您必须使用密钥`:input_html`而不是`:html_options`

```
basic_input_helper(:text_field, :date, :date_value, options.merge!({:input_html => {:class => "datepicker"}})) if options[:response_class] == "date" 
```

代码是[这样评估的（github上的源代码）](https://github.com/justinfrench/formtastic/blob/1.2.4/lib/formtastic.rb#L646)，您可以在第 647 行看到对输入 html 的评估

# javascript - 通过 css 和 javascript 隐藏和显示 asp.net 单选按钮

> ID：11301378
> 
> 赞同：0
> 
> 时间：2012-07-02T21:22:41.267
> 
> 标签：javascript, asp.net, css

所以我试图根据列表框的选择隐藏和显示一些内容。我在页面加载时使用 css 隐藏一些内容，然后在选择某些内容时显示它。大部分都有效，但无法弄清楚为什么这些单选按钮不会显示。

这是单选按钮和标签...

```
 <br /><!--View/Send By-->
        <asp:Label ID="lblViewSend" runat="server" Text="View/Send as" style="display:none;"></asp:Label>
        <asp:RadioButton ID="rdViewPrint" Text="View/Print" runat="server" OnClick="javascript:disableFields();" GroupName="viewSend" Checked="True" style="display:none; margin-left:10px;" />
        <asp:RadioButton ID="rdEmail" Text="Email" runat="server" OnClick="javascript:emailFields();" GroupName="viewSend" style="display:none; margin-left:10px;" />
        <asp:RadioButton ID="rdFax" Text="Fax" runat="server" OnClick="javascript:faxFields();" GroupName="viewSend" style="display:none; margin-left:10px;" /> 
```

在列表框中选择项目时显示它们的javascript...

```
function lbSelected() {
             var sel = document.getElementById('<%=lbPatientVisits.ClientID%>');
             var listlength = sel.options.length;

             document.getElementById('<%=lblViewSend.ClientID%>').style.display = "inherit";
             document.getElementById('<%=rdViewPrint.ClientID%>').style.display = "inherit";
             document.getElementById('<%=rdEmail.ClientID%>').style.display = "inherit";
             document.getElementById('<%=rdFax.ClientID%>').style.display = "inherit";
//...plus more code that functions correctly...
    } 
```

该标签将在页面上出现，但单选按钮不会。我也尝试了这个作为一个小变化，它也没有这样工作......

```
var rbtn = document.getElementById('<%=rdViewPrint.ClientID%>');
         rbtn.style.display = 'inherit'; 
```

我错过或忽略了什么？该代码似乎适用于常规按钮和标签，但不适用于单选框？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T21:34:29.100

这是一个使用 jquery 的完整示例：

```
<script type="text/javascript" src="Scripts/jquery-1.7.2.min.js"></script>
<script type="text/javascript">
    $(function () {
        $("#name").click(function () {
            $("#<%=this.myRadio.ClientID %>").toggle();
        });
    });
</script>

    <asp:RadioButtonList runat="server" ID="myRadio">
        <asp:ListItem Text="text1" />
        <asp:ListItem Text="text2" />
    </asp:RadioButtonList>
    <input type="button" id="name" value="click me" /> 
```

# html - How to have a horizontal line at the middle of a html heading with CSS?

> ID：11301380
> 
> 赞同：2
> 
> 时间：2012-07-02T21:23:01.617
> 
> 标签：html, css

Ok I now use an image to do it, but I want to do it via CSS(no absolut or relative positioning, I'm looking to make it responsive).

Example here: [http://teothemes.com/wp/services/](http://teothemes.com/wp/services/). The heading is 'Services', right above the 3 content areas...I'd like to achieve the same effect with only CSS. I tried some things but it didn't work.

Thank you.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T21:42:02.653

Here's how I'd do it -> [http://tinkerbin.com/QN9efWHd](http://tinkerbin.com/QN9efWHd)

*   CSS3 background-image
*   span with background covering the background image.

the HTML...

```
<p>
    <span>Services or Something</span>
</p> 
```

... for the CSS...

```
p {
    background: linear-gradient (to bottom,  rgba(145,37,37,0) 49%,
                rgba(145,37,37,1) 51%, rgba(145,37,37,1) 52%,
                rgba(145,37,37,0) 54%);
    text-align: center;
}

span {
    display: inline-block;
    padding: 0 10px;
    background: #fff;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T21:35:18.560

Here's my go at it... Only thing is the `spans` have a set width.

**HTML**

```
​&lt;div id="hr">
    <span></span>
    asdf
    <span></span>
</div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

**CSS**

```
#hr span {
    width:200px;
    border-bottom:1px solid #ccc;
    display: inline-block;
    margin-bottom:5px;
} 
```

[**DEMO**](http://jsfiddle.net/7W7Ee/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-02T22:22:26.673

Using one floated span with a border:

```
<div class="heading">
     <span></span>
     <h3>Heading<h3>
</div>

.heading {
    width: 100%;
    text-align: center;
    line-height: 100%;    
}

.heading span {
    float: left;
    margin: 20px 0 -8px;
    border: 1px solid;
    width: 100%;
}

.heading h3 {
    display: inline;
    padding: 0px 0px 0 20px;  
    width: auto;
    margin: auto;
} 
```

The negative base margin on the span may need to be adjusted for different heading sizes. , The background colour of the heading should match the background of the overall container.

[JS Fiddle demo](http://jsfiddle.net/QVUKJ/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-17T21:29:02.833

I was looking at a bunch of solutions to this issue, and I really wanted something simple. Why not just use the `:before` and `:after` to embed some content into the heading you want to have a horizontal-rule/line in. In my CSS below I chose an EM DASH ([unicode `\2014`](http://www.fileformat.info/info/unicode/char/2014/index.htm)) for the heading's horizontal line. When making a larger horizontal line, and depending on your font, you need to take away letter spacing from multiple EM DASHes. Lastly you can add some padding to the head & tail of the *EM DASH* so that it doesn't press up against your heading text.

Here's some CSS, heading-1 is very simple, heading-2 has a longer line (see in action [https://jsfiddle.net/pyxkh3jz/](https://jsfiddle.net/pyxkh3jz/)):

```
h1:before, h1:after {
    content:"\2014";
}
h2:before, h2:after {
    /* two dashes */
    content:"\2014\2014";
    /* depending on your font adjust this */
    letter-spacing: -6px;
}
/* add some padding so heading text isn't touching lines */
h2:before {
    padding-right: 15px;
}
h2:after {
    padding-left: 15px;
} 
```

Haven't checked browser compatibility here; but this isn't radical CSS so it should work for some or most of you. The lines and their length fit my use case.

This idea can probably be improved upon by other keeners...have at it!

# sql - 自动删除并重新创建当前索引

> ID：11301383
> 
> 赞同：5
> 
> 时间：2012-07-02T21:23:14.383
> 
> 标签：sql, sql-server-2008, etl

我正在努力提供一种方法来允许批量更新我们的表（每次更新超过 1M 新行或更新行），并且有兴趣删除当前索引并在更新后重新创建它们。

我想知道是否有人有一个脚本来提供这些操作的松散耦合，以便如果索引随时间变化，更新过程不会改变。

看起来这是社区可能已经解决的问题之一。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-02T22:02:38.850

我有用于查询系统表以捕获所有非聚集索引并禁用然后在完成后重建的脚本。以下适用于标准版，如果您使用的是企业版，我会添加该`ONLINE`选项。

**禁用**

```
DECLARE @sql AS VARCHAR(MAX);
SET @sql = '';
SELECT 
    @sql = @sql + 'ALTER INDEX [' + i.name + '] ON [' + o.name + '] DISABLE; '
FROM sys.indexes AS i
JOIN sys.objects AS o ON i.object_id = o.object_id
WHERE i.type_desc = 'NONCLUSTERED'
AND o.type_desc = 'USER_TABLE'

EXEC (@sql) 
```

**重建**

```
DECLARE @sql AS VARCHAR(MAX);
SET @sql = '';
SELECT 
    @sql = @sql + 'ALTER INDEX [' + i.name + '] ON [' + o.name + '] REBUILD WITH (FILLFACTOR = 80); '
FROM sys.indexes AS i
JOIN sys.objects AS o ON i.object_id = o.object_id
WHERE i.type_desc = 'NONCLUSTERED'
AND o.type_desc = 'USER_TABLE'

EXEC (@sql); 
```

我喜欢这种方法，因为它非常可定制，因为您可以根据条件排除/包含某些表以及避免光标。您还可以将 更改`EXEC`为 a`PRINT`并查看将执行并手动运行它的代码。

**排除表的条件**

```
AND o.name NOT IN ('tblTest','tblTest1'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-02T22:07:28.860

```
EXEC sp_MSforEachTable 'ALTER INDEX ALL ON ? DISABLE' 
```

和

```
EXEC sp_MSforEachTable 'ALTER INDEX ALL ON ? REBUILD' 
```

如果您想对所有表和每个索引执行此操作，您只需要这样做。

# windows - 从 cmd 登录到 Bash 并在一行中运行命令

> ID：11301386
> 
> 赞同：2
> 
> 时间：2012-07-02T21:23:33.593
> 
> 标签：windows, bash, cygwin, scp, cmd

我正在开发 TIBCO 应用程序，需要能够从外部命令资源运行 scp 命令。

无论如何，问题归结为能够登录 bash.exe 然后在同一行中运行我的 scp 命令。

它在我运行时工作（来自 cmd.exe）

```
c:\cygwin\bin\bash.exe --login 
```

（我进入bash）

然后我可以很好地运行我的 scp 语句

```
scp account@server:~mysourcedirectory/targetfilename* /cygdrive/c/targetfolder 
```

我想在同一行做这两件事，但它不起作用，又名

```
 c:\cygwin\bin\bash.exe --login -c scp account@server:~mysourcedirectory/targetfilename* /cygdrive/c/targetfolder 
```

将失败。我做错了什么，如何一次性运行此命令？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T22:03:43.377

您必须引用该命令。

```
c:\cygwin\bin\bash.exe --login -c "scp account@server:~mysourcedirectory/targetfilename* /cygdrive/c/targetfolder" 
```

在 gnu/linux 的 wine 中使用 cmd 进行了测试。单引号不起作用，我不知道cmd的所有引用规则。但以上确实奏效了。

# python - python 正则表达式第一个/最短匹配

> ID：11301387
> 
> 赞同：44
> 
> 时间：2012-07-02T21:23:36.843
> 
> 标签：python, regex

试图编写一个可以找到所有模式的正则表达式

```
p = "q=http://.*\.doc" in 

text = "q=http://11111.doc,q=http://22222.doc" 
```

当我最终完成文字时，

我明白了整个事情，即`q=http://11111.doc,q=http://22222.doc`

但不是`q=http://11111.doc`和`q=http://22222.doc`

我如何解决它？

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-07-02T21:25:17.993

那是因为`*`它是一个贪婪的量词，试图尽可能多地匹配。让它`*?`：

```
q=http://.*?\.doc 
```

更多信息可以在*正则表达式 HOWTO*中找到： [贪婪与非贪婪](https://docs.python.org/3/howto/regex.html#greedy-versus-non-greedy)

# mpi - MPI、MPICH 和 OPENMPI 到底是什么？在这种情况下，“实施”是什么意思？

> ID：11301388
> 
> 赞同：3
> 
> 时间：2012-07-02T21:23:40.370
> 
> 标签：mpi, openmpi, mpich

对于那些在该领域工作了很长时间的人来说，我的问题可能看起来很愚蠢，但我感谢您耐心地为我详细说明。

当他们说 MPICH 是 MPI 的“实现”时，这是什么意思？

以下类比是否正确（？）：如果我们将 MPI 视为 FORTRAN 编译器的一组标准，那么 MPICH 和 OPEMPI 是 FORTRAN 编译器的不同版本，例如 Intel.Fortran、Compaq.Fortran、GNU.Fortran 和很快。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T22:14:09.893

MPI 是一个标准：它概述了分布式系统中消息传递的特定模型。然而，它只给出了一系列要求：它实际上并不包含任何代码，也没有具体说明这些要求需要如何满足。例如，看一下官方 MPI 2.2 规范的摘录（截至今天）：

> 一个有效的 MPI 实现可以保证点对点通信的某些一般属性，这将在本节中描述。
> 
> **Order** Messages are non-overtaking：如果一个发送者连续向同一个目的地发送两条消息，并且都匹配相同的接收，那么如果第一个消息仍然处于未决状态，则此操作无法接收第二个消息。

然后继续解释此要求背后的基本原理并提供示例，但对要求本身只字未提。

MPI 实现是一个满足 MPI 规范中所有要求的库 - 就像上面的要求一样。但是，该标准绝对不包含关于可以/不能/应该使用什么语言结构、操作系统调用、第 3 方库等的要求。有时，它会向实施者提供*建议*，如下所示：

> *给实施者的建议。*实现可以保留使用该数据类型的活动通信的引用计数，以便决定何时释放它。此外，可以实现派生数据类型的构造函数，以便它们保留指向其数据类型参数的指针，而不是复制它们。在这种情况下，需要跟踪活动的数据类型定义引用，以便了解何时可以释放数据类型对象。*（对实施者的建议结束。）*

然而，这些仍然是模糊的，非常与语言无关，并且只有建议：实现可以忽略这些建议中的每一个，并且仍然符合标准。

所以是的，本质上它类似于编译器的各种实现。如果一个程序获取一种语言的有效源代码，并生成二进制代码，该二进制代码执行语言规范中规定的在给定原始源代码的情况下应该执行的所有操作，那么它就是该语言的合规编译器。同样，如果您可以使用库以不违反 MPI 规范的任何规则的方式传递消息，那么这就是有效的 MPI 实现。

# facebook-apps - 时间轴应用仅在当前喜欢页面时出现

> ID：11301390
> 
> 赞同：0
> 
> 时间：2012-07-02T21:23:43.520
> 
> 标签：facebook-apps, facebook-timeline

这是自时间线更改以来我创建的第一个 Facebook 应用程序。除了将应用程序添加到我页面的时间线“收藏夹”（？）（靠近“关于”部分顶部的框）之外，一切似乎都在工作。此应用程序的大部分流量将来自在我们页面上看到应用程序选项卡的访问者。

我正在尝试使用以下 URL 添加它：http: [//www.facebook.com/dialog/pagetab?app_id= MYAPPID&redirect_uri=MYAPPURL](http://www.facebook.com/dialog/pagetab?app_id=MYAPPID&redirect_uri=MYAPPURL)

然后我选择页面，然后单击“添加页面选项卡”。

这很好用——然后我可以交换它的位置、查看应用程序、编辑设置等。

我设置了我想要的标签，然后注销并直接访问我的 Facebook 页面，以像访问者一样查看应用标签。该应用程序不再存在。重新登录，一切都很好，重新登录，它就消失了。看来，如果您还没有喜欢该页面，则无法看到该应用程序。如果你喜欢这个页面，你可以看到它。我希望不喜欢该页面的人也可以查看该应用程序，因为该应用程序有自己的扇形门。

我也禁用了沙盒模式，所以我不确定还需要做什么。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T22:23:48.050

您在评论中提到该应用仅限美国用户使用：

因为您的应用程序受到限制，它不会显示给已注销的浏览器 - 这是预期的，因为除非用户已登录，否则无法确定他们的位置和年龄以检查您设置的限制

如果您必须让已注销的用户可以看到应用，请移除 API 级别的限制并使用传入的详细信息`signed_request`来显示或隐藏应用的内容

{edit}我错过了对您问题的编辑{/edit} - 也可能是您现有的 signed_request 处理代码对于已注销的用户失败

# amazon-s3 - 如何使用 Amazon S3 对域进行建模

> ID：11301393
> 
> 赞同：1
> 
> 时间：2012-07-02T21:23:47.367
> 
> 标签：amazon-s3, domain-driven-design

假设我有一个**插图**实体，它是一个聚合根。该实体包含有关艺术品的一些数据，并保留在 SQL 数据库中，而艺术品本身则保留在 Amazon S3 上。此外，我想保存一些按比例缩小或缩略图版本的艺术品，因此我引入了一个与插图具有多对一关系的**Blob实体，用于表示各种版本的艺术品的二进制数据。**

现在我想知道我应该如何设计 Blob 的持久性。Amazon S3 是一种数据库（请不要在这里点燃*什么是**真正**的数据库*；）），与 SQL 不同，我认为它应该像这样抽象，这意味着通过**Repository**。所以我会有一个 BlobRepository 来存储艺术品数据。另一方面——在这个域中，Blob 绝对不是聚合根——它总是被用作插图聚合的一部分。所以它不应该有自己的存储库。

所以也许 Amazon S3 不应该被视为一种持久性技术，而应该被视为一种通用的外部服务，仅次于 EmailSender、CurrencyConverter 等？如果是这样，我应该在哪里注入此服务？进到插图实体方法、插图存储库、应用服务层？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T18:23:35.050

首先，在处理 DDD 时，没有多对一或任何 RDBMS 概念，因为在 DDD 中，数据库不存在，所有内容都被发送到存储库。如果您使用的是 ORM，请知道 ORM 实体不是域实体，它们是持久性对象。

话虽如此，我认为插图存储库应该抽象RDBMS**和**S3。这些是持久性实现细节，repo 应该处理它们。基本上，repo 将收到插图 AR，它将部分保存在 RDBMS 中，部分保存为 S3 中的 blob。

所以Domain不知道也不应该知道Amazon S3，也许明天你会想要使用Azure Db，Domain为什么要关心它呢？处理它是存储库的责任。

# java - 调用 Web 服务时出现 javax.xml.ws.soap.SOAPFaultException

> ID：11301395
> 
> 赞同：0
> 
> 时间：2012-07-02T21:23:54.063
> 
> 标签：java, cxf, webservice-client

我使用来自以下 WSDL 的 Apache CXF 2.x 在 eclipse 中创建了一个 Web 服务客户端：

[https://test.timbrado.com.mx/cfdi/wstimbrado.asmx?WSDL](https://test.timbrado.com.mx/cfdi/wstimbrado.asmx?WSDL)

在进行 Web 服务调用时，我收到以下错误堆栈跟踪（服务器无法处理请求 ---> 对未建立为对象实例的对象的引用）：

```
javax.xml.ws.soap.SOAPFaultException: El servidor no puede procesar la solicitud. ---> Referencia a objeto no establecida como instancia de un objeto.
 [java]     at com.sun.xml.internal.ws.fault.SOAP11Fault.getProtocolException(Unknown Source)
 [java]     at com.sun.xml.internal.ws.fault.SOAPFaultBuilder.createException(Unknown Source)
 [java]     at com.sun.xml.internal.ws.client.sei.SyncMethodHandler.invoke(Unknown Source)
 [java]     at com.sun.xml.internal.ws.client.sei.SyncMethodHandler.invoke(Unknown Source)
 [java]     at com.sun.xml.internal.ws.client.sei.SEIStub.invoke(Unknown Source)
 [java]     at $Proxy34.generaTimbre(Unknown Source)
 [java]     at com.vital.fevital.funciones.FacturaElectronica.timbrarWebService(FacturaElectronica.java:1258)
 [java]     at facturaVital.factura.servlet.FacturaVenta.generaFactura(FacturaVenta.java:1128)
 [java]     at facturaVital.factura.servlet.FacturaVenta.doPost(FacturaVenta.java:127)
 [java]     at facturaVital.factura.servlet.FacturaVenta.doGet(FacturaVenta.java:86)
 [java]     at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
 [java]     at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
 [java]     at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:306)
 [java]     at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
 [java]     at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
 [java]     at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161)
 [java]     at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
 [java]     at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
 [java]     at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:541)
 [java]     at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
 [java]     at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:383)
 [java]     at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:243)
 [java]     at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:188)
 [java]     at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:288)
 [java]     at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
 [java]     at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
 [java]     at java.lang.Thread.run(Unknown Source) 
```

我这样做的电话是这样的：

```
ObjectFactory of = new ObjectFactory();
    AuthenticationHeader ah = of.createAuthenticationHeader();
    ah.setUserName(cfdi.getUsuarioPAC());
    ah.setPassword(cfdi.getPasswordPAC());
    JAXBElement<AuthenticationHeader> jah = of.createAuthenticationHeader(ah);

    ServicioTimbradoPruebas stp = new ServicioTimbradoPruebas();
    ServicioTimbradoPruebasSoap stpSoap = stp.getServicioTimbradoPruebasSoap();

    try{
        WSBindingProvider bp = (WSBindingProvider)stpSoap;
        Header hdr = Headers.create((JAXBRIContext) JAXBContext.newInstance(AuthenticationHeader.class),jah);
        bp.setOutboundHeaders(hdr);
    }catch(Exception ex){
        ex.printStackTrace();
        error = "Error en webservice ";
    }
    byte [] xmlBytes = cfdi.getXml().getBytes("UTF-8");
    String result = stpSoap.generaTimbre(xmlBytes); 
```

我在以下行中得到它的错误：

```
String result = stpSoap.generaTimbre(xmlBytes); 
```

在我能够进行 Web 服务调用之前，但现在我无法做到这一点，并且出现以下错误。关于如何解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T21:54:02.993

我想这不会是一个很大的答案，但无论如何：

该服务严重f * *** up。

例如

```
<cfdi:xmlBytes>cdi:246460475753</cfdi:xmlBytes> 
```

在

```
<cfdi:GeneraTimbre> 
```

根据 WSDL 合同是可选的：

```
 <s:element name="GeneraTimbre">
        <s:complexType>
           <s:sequence>
              <s:element minOccurs="0" maxOccurs="1" name="xmlBytes" type="s:base64Binary"/>
           </s:sequence>
        </s:complexType>
     </s:element> 
```

（注意**minOccurs="0"**！）然而，当你发送没有**可选**部分的消息时，你会得到一个 soapfault：

```
 <soap:Body>
      <soap:Fault>
         <faultcode>soap:MustUnderstand</faultcode>
         <faultstring>No se entendió el encabezado SOAP Security.</faultstring>
      </soap:Fault>
   </soap:Body> 
```

正如我在开始时所说，这不会是一个太多的答案，可能只是一个建议：尽量远离写得这么糟糕的服务。*（我的猜测是他们试图实现 ws-sec，但没有 ws-policy 框架，这**是可以做到**的，但对于服务消费者如何正确使用它几乎没有帮助或根本没有帮助）*

# php - 带有 CakePHP 的 REST api

> ID：11301396
> 
> 赞同：0
> 
> 时间：2012-07-02T21:23:57.873
> 
> 标签：php, api, cakephp, rest

我正在尝试使用 CakePHP 创建一个 RESTful api，它将在将 POST 请求发送到 /users.json 时添加一个用户。创建用户后，客户端将被重定向到具有用户 JSON 表示的页面。我为控制器提供的代码是：

```
class UsersController extends AppController {

    public $components = array('RequestHandler');

    public function view($id) {
        $user = $this->User->findById($id);
        $this->set(array(
            'user' => $user['User'],
            '_serialize' => 'user'
        ));
    }

    public function add() {
        if ($this->User->save($this->data)) {
            $this->redirect(array('action' => 'view', 1)); //using 1 just to test
        } else {
            print_r($this->User->validationErrors);
            $this->set(array(
            'errors' => $this->User->validationErrors,
            '_serialize' => array('errors')
        ));
        }
    }
} 
```

我已将 Router::mapResources('users') 和 Router::parseExtensions('json') 添加到 routes.php。但是，当我使用 Chrome 的 REST 控制台插件发送发布请求时，我收到“{errors:[]}”的响应，并且没有创建新用户。当我使用 curl 时，会创建一个用户，但之后我没有得到用户的 json 表示。知道发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-20T04:28:05.487

如果您还没有完成，请在创建后重试`app/View/user/json/index.ctp` 使用以下内容：

```
<?php
return json_encode(compact());
?> 
```

# php - 使用 mysql_real_escape_string 时出现更多斜线

> ID：11301397
> 
> 赞同：1
> 
> 时间：2012-07-02T21:24:05.877
> 
> 标签：php, mysql, arrays, mysql-real-escape-string

我对`mysql_real_escape_string()`功能有点困惑，

我在下面有这个数组并用`mysql_real_escape_string()`函数过滤它，

```
$postFields = array('company', 'type');
$postArray = array();
foreach($postFields as $postVal){
    $_POST[$postVal] = array_map("mysql_real_escape_string", $_POST[$postVal]);
    $postArray[$postVal] = $_POST[$postVal];
} 
```

所以结果是这样的，

```
Array
(
    [type] => Array
        (
            [0] => CD
        )

    [code] => Array
        (
            [0] => \\\'\\\' OR \\\'\\\'
        )
) 
```

但是当我想像这样单独使用它时，

```
echo mysql_real_escape_string($postArray['company'][0]); 
```

我越来越多的斜线，像这样，

```
\\\\\\\'\\\\\\\' OR \\\\\\\'\\\\\\\' 
```

任何原因，或者我只是做错了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T21:37:35.430

在您提供的代码中，您将字符串转义两次：

```
$postFields = array('company', 'type');
$postArray = array();
foreach($postFields as $postVal){
    $_POST[$postVal] = array_map("mysql_real_escape_string", $_POST[$postVal]);
    $postArray[$postVal] = $_POST[$postVal];
}
echo mysql_real_escape_string($postArray['company'][0]); 
```

每次转义字符串时，所有反斜杠都会转义为两个反斜杠。注意每个字符串只转义一次。

# joomla2.5 - Joomla 2.5 超级管理员不能编辑前端

> ID：11301399
> 
> 赞同：0
> 
> 时间：2012-07-02T21:24:07.197
> 
> 标签：joomla2.5

我用超级管理员用户登录前端（后端用户参数只有超级管理员框提示），但是文章附近没有显示任何小的编辑图标。后端某处是否有可能阻止前端版本的技巧？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T19:26:29.330

这是我为解决问题所做的。

我替换了自定义模板 /templates/templatename/html/com_content/article 中的文件夹“article”

我从安装附带的 Joomla 模板之一复制/粘贴了原始“文章”文件（我使用了 beez5）该文件夹中有两个文件（上面给出的路径），它们包括：default.php index.html

# php - 像 facebook 这样的公共个人资料的 URL 重定向

> ID：11301403
> 
> 赞同：1
> 
> 时间：2012-07-02T21:24:28.317
> 
> 标签：php, url, redirect

我正在为我的公司建立一个网站，该网站在某种程度上类似于 facebook 或其他社交网站，并且用户将拥有一个公开的个人资料页面。我找不到，或者我可能不知道在哪里寻找，关于如何在不为每个用户创建特定页面的情况下创建公共页面的任何信息，我想做一些像 facebook 在你输入时所做的事情facebook url 之后的用户名（例如[http://www.facebook.com/ANYUSERNAME](http://www.facebook.com/ANYUSERNAME)），然后您进入个人资料页面，有人可以帮我出主意吗？开发服务器是使用 IIS 7.5 和 PHP 的 windows 2008，但生产服务器将是 mandriva 或任何其他带有 apache 和 php 的 linux 发行版。提前对每个人表示感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T21:29:18.213

动态 URL 是在 Apache 中的大多数基于 Unix/Linux 的系统上通过一个名为“mod_rewrite”的插件完成的。但是，您正在运行 Windows。IIS 有一个 Microsoft 的重写插件。

[http://www.iis.net/download/URLRewrite](http://www.iis.net/download/URLRewrite)

本质上，行为最终是您为特定文件夹或其他事物设置规则。如果页面实际上不存在于磁盘上，或者不以 .php 结尾，则运行规则集。如果它与规则匹配，则将其作为查询字符串或代码页的其他变量传递给真实页面。如果不存在，则抛出 404。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T21:31:07.250

您将需要`mod_rewrite`（对于[IIS](https://stackoverflow.com/questions/60857/mod-rewrite-equivalent-for-iis-7-0)）并实现[前端控制器](http://en.wikipedia.org/wiki/Front_Controller_pattern)模式（通常在 中`index.php`）。

然后，前端控制器将检查 URL 的第一段（在您的示例中它将是`ANYUSERNAME`），如果该路由不存在，您可以假定它是用户个人资料页面。然后，您可以选择将用户重定向到特定的个人资料页面（类似于`/profile/USER`），或者直接显示。

# internet-explorer-7 - :hover 上的弹出窗口适用于 IE7？

> ID：11301404
> 
> 赞同：0
> 
> 时间：2012-07-02T21:24:31.637
> 
> 标签：internet-explorer-7, hover, yui, hidden

[http://jsfiddle.net/9LuS2/](http://jsfiddle.net/9LuS2/)

此代码似乎适用于现代浏览器 + IE8。但是在 IE7（打开 IE，按 F12 并执行 IE7 模式）中，小提琴根本不起作用，在我正在处理的实际页面中它不起作用，但是如果你点击它，它会出现，但是然后就不会走了。

使用 DIV 进行悬停事件的最佳方法是什么，这可以追溯到 IE7。

我需要使用JS吗？

如果是这样，有人可以建议纯 JS 或 YUI lib，因为我不能在这个项目中使用 jquery。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T14:59:05.057

Yes, old IEs don't like `.test:hover .test_hidden` (selectors for inner elements of `:hover`).

If JS is an option, you can use the [hover event](http://yuilibrary.com/yui/docs/api/modules/event-hover.html) in YUI:

```
​YUI().use('node', 'event-hover', function (Y) {
    var outer = Y.one('.test');
    var inner = Y.one('.test_inner');

    function showInnerDiv() {
        inner.removeClass('test_inner_hidden');
    }
    function hideInnerDiv() {
        inner.addClass('test_inner_hidden');
    }

    outer.on('hover', showInnerDiv, hideInnerDiv);
});​​​​​​ 
```

# android - Eclipse Android 调试未启动 - 无错误、无日志、无

> ID：11301415
> 
> 赞同：1
> 
> 时间：2012-07-02T21:25:08.427
> 
> 标签：android, eclipse, debugging

我在 SO 上找不到这个问题的答案，所以我想我会提交一个问题/答案。我不确定这是否是特定于版本的，所以以防万一我正在运行 Eclipse 3.7.2 和 ADT 18.0.0.v201203301601-306762 为 ICS 开发。我花了一大半早上的时间来尝试调试我的应用程序。我会走到小绿虫那里，然后单击我的项目。启动指示器从底部开始，一直填充到 100%，然后什么也没有。没有错误，没有日志输出，没有 logcat 消息，控制台下没有任何内容。在大多数情况下，没有输出指示出现问题。它只是没有启动。我一直在 HTC 设备和用于调试的模拟器之间切换——主要是在发布之前使用该设备进行测试。所以我想我会插入 HTC 并再试一次。插上，logcat 开始滚动，点击调试，同样的事情。没有输出，没有日志，什么都没有。它只是没有启动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T21:25:10.597

回答。我最终决定（虽然这可能是我做的第一件事，但是因为没有错误或日志输出，我认为这是一些奇特的事情。）检查调试配置。事实证明，在“目标”选项卡下，部署模式以某种方式切换为“自动”。但是，我最近删除了一个虚拟设备。这会导致自动启动，但没有为启动选择任何设备。因此，发射是自动化的，没有终点。对我来说，这种事情似乎应该有某种错误消息，例如“您尚未选择设备”或“请选择设备”，这就是为什么我立即怀疑一个更严重的问题 - 但是嘿，我只是一个开发人员。无论如何，显然，我所要做的就是将其设置回手动模式，瞧，她' 又开始了。有些人可能认为这很简单，而另一些更疯狂的倾向于扭曲现实的人可能最终会遇到与我相同的问题。所以，同情疯狂/扭曲的现实类型——这就是答案:)

# standards - 这个模棱两可的代词在 RFC 4880 的文本中代表什么？

> ID：11301425
> 
> 赞同：4
> 
> 时间：2012-07-02T21:26:01.090
> 
> 标签：standards, definition, rfc, openpgp

[RFC 4880 sec 5.1](https://www.rfc-editor.org/rfc/rfc4880#section-5.1)中的“ **this** ”是什么意思？

> 上述公式中的值“m”是从会话密钥导出的，如下所示。首先，会话密钥以单字节算法标识符为前缀，该标识符指定用于加密以下对称加密数据包的对称加密算法。然后附加两个八位字节的校验和，它等于前面的会话密钥八位字节的总和，不包括算法标识符，模 65536。然后按照 PKCS#1 块编码 EME-PKCS1-v1_5 中的描述**对该**值进行编码[RFC3447] 的第 7.2.1 节形成上述公式中使用的“m”值。有关 OpenPGP 使用 PKCS#1 的说明，请参阅本文档的第 13.1 节。

是 2 个八位字节的校验和吗？是整个“一个八位字节前缀+会话密钥+校验和”吗？

# spring - 是 java.lang.NoClassDefFoundError: org/apache/ibatis/session/SqlSessionFactory 与 mybatis 和 Spring

> ID：11301428
> 
> 赞同：9
> 
> 时间：2012-07-02T21:26:22.077
> 
> 标签：spring, spring-aop, mybatis, spring-jdbc

我是 Mybatis 的新手，试图用 Spring 实现 mybatis，但在启动 tomcat 时出现以下运行时错误。

这是我的`pom.xml`

```
<dependency>
    <groupId>c3p0</groupId>
    <artifactId>c3p0</artifactId>
    <version>0.9.1.2</version>
</dependency>
<dependency>
    <groupId>org.mybatis</groupId>
    <artifactId>mybatis-spring</artifactId>
    <version>1.0.0</version>
</dependency> 
```

和应用上下文：

```
<bean id="sqlSessionFactory" class="org.mybatis.spring.SqlSessionFactoryBean">
    <property name="dataSource" ref="uactivityDS"/>
    <property name="configLocation" value="classpath:mybatis-config.xml"/>
</bean> 
```

错误是：

```
the resource [applicationContext.xml]: Initialization of bean failed; nested exception is java.lang.NoClassDefFoundError: org/apache/ibatis/session/SqlSessionFactory 
```

但是，该`mybatis-spring-1.0.0.jar`文件存在于 中`war/web-inf/lib`。

知道在这种情况下发生了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T03:25:39.243

如果您查看 mybatis-spring-1.0.0.jar 的[pom.xml](http://mybatis.googlecode.com/svn/sub-projects/mybatis-spring/tags/mybatis-spring-1.0.0/pom.xml)，它具有 mybatis 3.0.4 的编译时依赖项，其中包含类 org/apache/ibatis/session/SqlSessionFactory。

所以包括那个jar以及pom.xml中提到的其他jar，你应该很好。

# javascript - 如何在用户单击时确定条形图（Highchart）中条形的值？

> ID：11301429
> 
> 赞同：0
> 
> 时间：2012-07-02T21:26:22.580
> 
> 标签：javascript, html, ruby-on-rails, ruby

目前我有一个根据我的数据库中的数据呈现的 Highchart。我目前还有一个表格，当我手动传入“A”或“C”之类的值时，该表格会呈现正确的值，但我希望该表格在用户单击时根据 onClick 事件呈现我的Highchart中的酒吧。

对于下面的每个对应值，例如@a_sum，我有一个名为@a 的数组，其中包含将传递到图表中的字符串值。

我在谷歌上搜索了一下，运气不好。我想知道当用户单击该特定栏时如何获得 char 中栏的值。

任何帮助将不胜感激。

```
<script type="text/javascript" charset="utf-8">
var chart1; // globally available
$(document).ready(function () {
    var chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container',
            type: 'bar'
        },
        title : {
            text: "Most Effective Referral Sources"
        },
        xAxis: {
            categories: ['A', 'B', 'C', 'D', 'E', 'F',  'G', 'H', 'I', 'J', 'K', 'L']
        },
        yAxis: {   
        },
        legend: {
            layout: 'vertical',
            floating: true,
            backgroundColor: '#FFFFFF',
            align: 'right',
            verticalAlign: 'top',
            y: 60,
            x: -60
        },
        tooltip: {
            formatter: function() {
                return '<b>'+ this.series.name +'</b><br/>'+
                    this.x +': '+ this.y;
            }
        },
        plotOptions: {
        },
        series: [{
            data: [<%= @a_sum %>, <%= @b_sum %>, <%= @c_sum %>, <%= @d_sum %>,  <%= @e_sum %>, <%= @f_sum %>, <%= @g_sum %>, <%= @h_sum %>, <%= @i_sum %>, <%= @j_sum %>,  <%= @k_sum %>, <%= @l_sum %>]
        }]
    });
});

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T05:41:23.050

看起来你想要的（如果我理解你的问题是正确的）是在上面的 plotOptions 中实现事件： [http ://www.highcharts.com/ref/#plotOptions-column-point-events--click](http://www.highcharts.com/ref/#plotOptions-column-point-events--click)

```
plotOptions: {
    column: {
         point: {
             events: {
         click: function() {
                     // use this to trigger showing/hiding the specific table you need
                     console.log(this)
                 }
             }
         }
    }
} 
```

例如，这是我得到的控制台日志示例：

```
Lc
_high: 417
...
series: c
...
x: 20
y: 33
__proto__: Object 
```

使用this.series，您应该能够获取单击其列的系列的参数，然后调用您的“enableTableForDataSeries”函数来启用特定的数据系列。

# scala - 仅使用不可变集合创建 Iterables 的 Map

> ID：11301431
> 
> 赞同：3
> 
> 时间：2012-07-02T21:26:24.670
> 
> 标签：scala

我有一个 iterable `val pairs: Iterable[Pair[Key, Value]]`，它有一些 key=>value 对。

现在，我想`Map[Key, Iterable[Value]]`为每个键创建一个 ，它具有`Iterable`给定键 in 的所有值的一个`pairs`。（我实际上不需要 a `Seq`，任何`Iterable`都可以）。

我可以使用 mutable`Map`和/或使用 mutable来做到这一点`ListBuffer`。

但是，每个人都告诉我，“正确的”scala 没有使用可变集合。那么，是否可以仅使用不可变集合来执行此操作？（例如，使用`map`,`foldLeft`等）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T21:47:01.563

我找到了一个非常简单的方法来做到这一点

```
pairs.groupBy{_._1}.mapValues{_.map{_._2}} 
```

就是这样。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-02T21:46:02.827

你可以用*非循环*可变数据结构做的任何事情，你也可以用不可变数据结构做。诀窍很简单：

```
loop -> recursion or fold
mutating operation -> new-copy-with-change-made operation 
```

因此，例如，在您的情况下，您可能`Iterable`每次都在循环并添加一个值。如果我们应用我们得心应手的技巧，我们

```
def mkMap[K,V](data: Iterable[(K,V)]): Map[K, Iterable[V]] = {
  @annotation.tailrec def mkMapInner(
    data: Iterator[(K,V)],
    map: Map[K,Vector[V]] = Map.empty[K,Vector[V]]
  ): Map[K,Vector[V]] = {
    if (data.hasNext) {
      val (k,v) = data.next
      mkMapInner(data, map + (k -> map.get(k).map(_ :+ v).getOrElse(Vector(v))))
    }
    else map
  }
  mkMapInner(data.iterator)
} 
```

在这里，我选择通过声明递归内部方法来实现循环替换（使用 @annotation.tailrec 检查递归是否优化为 while 循环，因此它不会破坏堆栈）

让我们测试一下：

```
val pairs = Iterable((1,"flounder"),(2,"salmon"),(1,"halibut"))
scala> mkMap(pairs)
res2: Map[Int,Iterable[java.lang.String]] = 
      Map(1 -> Vector(flounder, halibut), 2 -> Vector(salmon)) 
```

现在，事实证明 Scala 的集合库也包含一些有用的东西：

```
scala> pairs.groupBy(_._1).mapValues{ _.map{_._2 } } 
```

作为`groupBy`关键方法，其余的将它产生的内容清理成你想要的形式。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-02T22:11:30.893

[作为记录，你可以用fold](http://en.wikipedia.org/wiki/Fold_%28higher-order_function%29)把它写得很干净。我将假设您`Pair`是标准库（又名`Tuple2`）中的那个：

```
pairs.foldLeft(Map.empty[Key, Seq[Value]]) {
  case (m, (k, v)) => m.updated(k, m.getOrElse(k, Seq.empty) :+ v)
} 
```

当然，在这种情况下，这种`groupBy`方法更方便。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T02:43:17.580

```
val ps = collection.mutable.ListBuffer(1 -> 2, 3 -> 4, 1 -> 5)

ps.groupBy(_._1).mapValues(_ map (_._2))
  // = Map(1 -> ListBuffer(2, 5), 3 -> ListBuffer(4)) 
```

这在输出映射中给出了一个**可变的。** `ListBuffer`如果您希望您的输出是不可变的（不确定这是否完全符合您的要求），请使用`collection.breakOut`：

```
ps.groupBy(_._1).mapValues(_.map(_._2)(collection.breakOut))
   // = Map(1 -> Vector(2, 5), 3 -> Vector(4)) 
```

似乎`Vector`是 的默认值`breakOut`，但可以肯定的是，您可以在左侧指定返回类型：`val myMap: Map[Int,Vector[Int]] = ...`.

更多关于breakOut的信息在[这里](https://stackoverflow.com/questions/1715681/scala-2-8-breakout)。

作为一种方法：

```
def immutableGroup[A,B](xs: Traversable[(A,B)]): Map[A,Vector[B]] =
  xs.groupBy(_._1).mapValues(_.map(_._2)(collection.breakOut)) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-03T04:39:03.383

我经常执行此功能，以至于我有一个隐式的书面调用`groupByKey`，它正是这样做的：

```
class EnrichedWithGroupByKey[A, Repr <: Traversable[A]](self: TraversableLike[A, Repr]) {
  def groupByKey[T, U, That](implicit ev: A <:< (T, U), bf: CanBuildFrom[Repr, U, That]): Map[T, That] =
    self.groupBy(_._1).map { case (k, vs) => k -> (bf(self.asInstanceOf[Repr]) ++= vs.map(_._2)).result }
}
implicit def enrichWithGroupByKey[A, Repr <: Traversable[A]](self: TraversableLike[A, Repr]) = new EnrichedWithGroupByKey[A, Repr](self) 
```

你像这样使用它：

```
scala> List(("a", 1), ("b", 2), ("b", 3), ("a", 4)).groupByKey
res0: Map[java.lang.String,List[Int]] = Map(a -> List(1, 4), b -> List(2, 3)) 
```

请注意，我使用`.map { case (k, vs) => k -> ... }`而不是`mapValues`因为`mapValues`创建了一个**视图**，而不是立即执行地图。如果您计划多次访问这些值，您将希望避免使用视图方法，因为这意味着`.map(_._2)`每次都重新计算。

# css - 无法在 MVC3 应用程序中使用我的样式锚标签

> ID：11301432
> 
> 赞同：3
> 
> 时间：2012-07-02T21:26:30.940
> 
> 标签：css, asp.net-mvc, anchor, tabbing

我有一个 MVC 应用程序，它需要漂亮的圆形按钮并在 IE7 上工作。我找到了一些代码来设置锚标签的样式，以使它们看起来像漂亮的按钮。

不幸的是，它们似乎完全不在 Tab 键顺序（我无法通过按 Tab 导航到这些控件）。在某些屏幕上，我可以通过将 tabindex 添加到表单上的所有控件来解决此问题，但不幸的是，不可能在所有屏幕上都这样做（例如，我有时会使用部分视图）。

请注意，在 FireFox 中，控件的选项卡也不起作用。

我的“按钮”是这样放置的：

```
<a class="btn green" id="Submit">Save</a> 
```

有一些javascript，它为这个类添加了一些和标签以允许它具有圆角，因此锚标签被转换为：

```
<a class="btn green" id="Submit"><i></i><span><i></i><span></span>Save</span></a> 
```

并且它们使用以下 css 进行样式设置：

```
 .btn { display: block; position: relative; background: #aaa; padding: 5px; float: left; color: #fff; text-decoration: none; cursor: pointer; }
    .btn * { font-style: normal; background-image: url(images/btn2.png); background-repeat: no-repeat; display: block; position: relative; }
    .btn i { background-position: top left; position: absolute; margin-bottom: -5px;  top: 0; left: 0; width: 5px; height: 5px; }
    .btn span { background-position: bottom left; left: -5px; padding: 0 0 5px 10px; margin-bottom: -5px; }
    .btn span i { background-position: bottom right; margin-bottom: 0; position: absolute; left: 100%; width: 10px; height: 100%; top: 0; }
    .btn span span { background-position: top right; position: absolute; right: -10px; margin-left: 10px; top: -5px; height: 0; }
    a.btn {color: #333;text-decoration: none; font-weight:bold; font-family: Arial; font-size: 12px; }
    * html .btn span,
    * html .btn i { float: left; width: auto; background-image: none; cursor: pointer; }

    .btn.green { background: rgb(175,211,86);  }
    .btn:hover { background-color: #FFF; }
    .btn:focus { background-color: #FFF; }
    .btnFocus  { background-color: #FFF !important; }
    .btn:active { background-color: #444; }
    .btn[class] {  background-image: url(images/shade.png); background-position: bottom; }

    * html .btn { border: 3px double #aaa; }
    * html .btn.green { border-color: #9d4; }

    * html .btn:hover { border-color: #a00; } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T23:51:04.163

啊，刚刚想通了。

如果我们在锚标签中添加一个 href 属性，它就可以正常工作

```
<a class="btn green" id="Submit" href="#">Save</a> 
```

很抱歉给大家添麻烦了。

# ios - 与 ios5 (ARC) 兼容的可定制 UISwitch

> ID：11301433
> 
> 赞同：0
> 
> 时间：2012-07-02T21:27:02.323
> 
> 标签：ios, uiimage, customization, uiswitch

我需要在 UISwitch 上使用自定义“旋钮”图像。我认为使用默认 SDK 是不可能的。有谁知道我会如何处理这个或任何可以做到这一点的第三方库？我找到了一些，但它们都很旧，不能与 ARC 一起使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T21:34:55.110

通常要做这样的事情你会继承 UIControl。我敢肯定有很多这种特定控件类型的实现。我找到了一个你可以[在这里](http://www.hollance.com/2010/12/mhrotaryknob-a-rotary-knob-control-for-ios/)使用的。页面上有一个github链接。

顺便说一句，如果你发现一个你想使用的类没有启用弧，你可以尝试自己转换它（尽管这会使下载更新变得更加困难），或者更常见地将`-fno-objc-arc`编译器标志添加到任何文件不兼容弧，它将排除它们（但您仍然可以使用它们）。更多信息在[这里](https://stackoverflow.com/questions/6646052/how-can-i-disable-arc-for-a-single-file-in-a-project)。

# javascript - 返回数组中最大值的索引

> ID：11301438
> 
> 赞同：175
> 
> 时间：2012-07-02T21:27:20.893
> 
> 标签：javascript, arrays, max

我有这个：

```
var arr = [0, 21, 22, 7]; 
```

将最高值的索引返回到另一个变量的最佳方法是什么？

* * *

## 回答 #1

> 赞同：206
> 
> 时间：2012-07-02T21:29:58.167

这可能是最好的方法，因为它可靠并且适用于旧浏览器：

```
function indexOfMax(arr) {
    if (arr.length === 0) {
        return -1;
    }

    var max = arr[0];
    var maxIndex = 0;

    for (var i = 1; i < arr.length; i++) {
        if (arr[i] > max) {
            maxIndex = i;
            max = arr[i];
        }
    }

    return maxIndex;
} 
```

还有这个单行：

```
let i = arr.indexOf(Math.max(...arr)); 
```

但是，它会根据需要执行两倍的比较，并且会`RangeError`在大型数组上抛出 a。我会坚持这个功能。

* * *

## 回答 #2

> 赞同：107
> 
> 时间：2015-06-15T17:04:07.053

在一行中，可能更快`arr.indexOf(Math.max.apply(Math, arr))`：

```
var a = [0, 21, 22, 7];
var indexOfMaxValue = a.reduce((iMax, x, i, arr) => x > arr[iMax] ? i : iMax, 0);

document.write("indexOfMaxValue = " + indexOfMaxValue); // prints "indexOfMaxValue = 2"
```

在哪里：

*   `iMax`- 迄今为止最好的索引（迄今为止最大元素的索引，在第一次迭代时`iMax = 0`，因为第二个参数`reduce()`是`0`，在我们的例子中我们不能省略第二个参数`reduce()`）
*   `x`- 数组中当前测试的元素
*   `i`- 当前测试的指数
*   `arr`- 我们的数组 ( `[0, 21, 22, 7]`)

关于`reduce()`方法（来自 David Flanagan 的“JavaScript：权威指南”）：

> reduce() 接受两个参数。第一个是执行归约操作的函数。此归约函数的任务是以某种方式将两个值组合或归约为一个值，并返回该归约值。
> 
> 与 reduce() 一起使用的函数不同于与 forEach() 和 map() 一起使用的函数。熟悉的值、索引和数组值作为第二个、第三个和第四个参数传递。第一个参数是到目前为止减少的累积结果。在第一次调用该函数时，第一个参数是您作为第二个参数传递给 reduce() 的初始值。在随后的调用中，它是前一次调用函数返回的值。
> 
> 当您调用没有初始值的 reduce() 时，它使用数组的第一个元素作为初始值。这意味着对归约函数的第一次调用将第一个和第二个数组元素作为它的第一个和第二个参数。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-08-10T07:44:09.030

### 使用 max 的另一种解决方案`reduce`：

```
[1,2,5,0,4].reduce((a,b,i) => a[0] < b ? [b,i] : a, [Number.MIN_VALUE,-1])
//[5,2] 
```

`[5e-324, -1]`如果数组为空，则返回。如果您只想要索引，请放在`[1]`后面。

### 最小通过（更改为`>`和`MAX_VALUE`）：

```
[1,2,5,0,4].reduce((a,b,i) => a[0] > b ? [b,i] : a, [Number.MAX_VALUE,-1])
//[0, 3] 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-07-02T21:31:14.610

除非我弄错了，否则我会说这是编写自己的函数。

```
function findIndexOfGreatest(array) {
  var greatest;
  var indexOfGreatest;
  for (var i = 0; i < array.length; i++) {
    if (!greatest || array[i] > greatest) {
      greatest = array[i];
      indexOfGreatest = i;
    }
  }
  return indexOfGreatest;
} 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-02-20T17:12:44.730

如果你使用下划线，你可以使用这个漂亮的短单线：

```
_.indexOf(arr, _.max(arr)) 
```

它将首先找到数组中最大项的值，在本例中为 22。然后它将返回 22 在数组中的位置的索引，在本例中为 2。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2020-09-18T10:47:17.337

为了完成@VFDan 的工作，我对 3 种方法进行了基准测试：接受的方法（自定义循环）、reduce 和 find(max(arr)) 在 10000 个浮点数的数组上。

## chromimum 85 linux 上的结果（越高越好）：

*   自定义循环：100%
*   减少：94.36%
*   指数（最大值）：70%

## Firefox 80 linux 上的结果（越高越好）：

*   自定义循环：100%
*   减少：96.39%
*   指数（最大值）：31.16%

## 结论：

如果您需要快速运行代码，请不要使用 indexOf(max)。reduce 可以，但如果您需要最佳性能，请使用自定义循环。

您可以使用此链接在其他浏览器上运行此基准测试： [https ://jsben.ch/wkd4c](https://jsben.ch/wkd4c)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-03-29T06:05:31.667

```
 var arr=[0,6,7,7,7];
 var largest=[0];
 //find the largest num;
 for(var i=0;i<arr.length;i++){
   var comp=(arr[i]-largest[0])>0;
      if(comp){
	  largest =[];
	  largest.push(arr[i]);
	  }
 }
 alert(largest )//7

 //find the index of 'arr'
 var arrIndex=[];
 for(var i=0;i<arr.length;i++){
    var comp=arr[i]-largest[0]==0;
	if(comp){
	arrIndex.push(i);
	}
 }
 alert(arrIndex);//[2,3,4]
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-06-06T18:13:38.713

```
function findIndicesOf(haystack, needle)
{
    var indices = [];

    var j = 0;
    for (var i = 0; i < haystack.length; ++i) {
        if (haystack[i] == needle)
            indices[j++] = i;
    }
    return indices;
} 
```

传递`array`到`haystack`和`Math.max(...array)`到`needle`。这将给出数组的*所有*最大元素，并且更具扩展性（例如，您还需要找到最小值）

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-10-31T18:26:34.440

编辑：几年前，我给出了一个粗暴、太具体、太复杂的答案。所以我正在编辑它。我喜欢上面的功能性答案，因为它们的简洁因素而不是它们的可读性；但如果我更熟悉 javascript，那么我可能也会喜欢它们。

伪代码：

跟踪包含最大值的索引。假设索引 0 最初是最大的。与当前指数进行比较。如有必要，使用最大值更新索引。

代码：

```
var mountains = [3, 1, 5, 9, 4];

function largestIndex(array){
  var counter = 1;
  var max = 0;

  for(counter; counter < array.length; counter++){
    if(array[max] < array[counter]){
        max = counter;
    }
  }
  return max;
}

console.log("index with largest value is: " +largestIndex(mountains));
// index with largest value is: 3 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-12-06T16:32:14.850

如果您创建数组的副本并对其进行降序排序，则副本的第一个元素将是最大的。比你可以在原始数组中找到它的索引。

```
var sorted = [...arr].sort((a,b) => b - a)
arr.indexOf(sorted[0]) 
```

复制的时间复杂度为 O(n)，排序的时间复杂度为 O(n*log(n))，indexOf 的时间复杂度为 O(n)。

如果你需要做得更快，Ry 的答案是 O(n)。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-11-10T15:39:58.990

从 @traxium 解决方案的“减少”版本修改的小修改考虑了空数组：

```
function indexOfMaxElement(array) {
    return array.reduce((iMax, x, i, arr) => 
        arr[iMax] === undefined ? i :
        x > arr[iMax]           ? i : iMax
        , -1            // return -1 if empty
    );
} 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2014-04-29T10:12:28.997

此函数的稳定版本如下所示：

```
// not defined for empty array
function max_index(elements) {
    var i = 1;
    var mi = 0;
    while (i < elements.length) {
        if (!(elements[i] < elements[mi]))
            mi = i;
        i += 1;
    }
    return mi;
} 
```

# c++ - 如何在不复制和保留 std::string 对象的情况下获得 C++ std::string char 数据的所有权？

> ID：11301446
> 
> 赞同：16
> 
> 时间：2012-07-02T21:28:05.363
> 
> 标签：c++, string, c++11, buffer, iostream

如何在不复制和保留源 std::string 对象的情况下获得 std::string char 数据的所有权？（我想在不同类型之间使用移动语义。）

我使用 C++11 [Clang](http://en.wikipedia.org/wiki/Clang)编译器和[Boost](http://en.wikipedia.org/wiki/Boost_%28C%2B%2B_libraries%29)。

基本上我想做与此等效的事情：

```
{
    std::string s(“Possibly very long user string”);
    const char* mine = s.c_str();

    // 'mine' will be passed along,
    pass(mine);

    //Made-up call
    s.release_data();

    // 's' should not release data, but it should properly destroy itself otherwise.
} 
```

为了澄清，我确实需要摆脱 std::string: 进一步的道路。该代码同时处理字符串和二进制数据，并且应该以相同的格式处理它。我确实想要来自 std::string 的数据，因为它来自另一个与 std::string 一起工作的代码层。

为了更深入地了解我想要这样做的地方：例如，我有一个异步套接字包装器，它应该能够从用户那里获取 std::string 和二进制数据进行写入。两个“API”写入版本（采用 std::string 或行二进制数据）在内部解析为相同的（二进制）写入。我需要避免任何复制，因为字符串可能很长。

```
WriteId     write( std::unique_ptr< std::string > strToWrite )
{

    // Convert std::string data to contiguous byte storage
    // that will be further passed along to other
    // functions (also with the moving semantics).
    // strToWrite.c_str() would be a solution to my problem
    // if I could tell strToWrite to simply give up its
    // ownership. Is there a way?

    unique_ptr<std::vector<char> > dataToWrite= ??

    //
    scheduleWrite( dataToWrite );
}

void scheduledWrite( std::unique_ptr< std::vecor<char> > data)
{
    …
} 
```

此示例中的 std::unique_ptr 用于说明所有权转移：具有相同语义的任何其他方法对我来说都可以。

我想知道这种特定情况的解决方案（使用 std::string char 缓冲区）以及字符串、流和类似的一般问题的此类问题：在字符串、流、std 容器和缓冲区类型之间移动缓冲区的技巧。

在不复制的情况下在不同的 API/类型之间传递缓冲区数据时，我还将感谢 C++ 设计方法和特定技术的提示和链接。我提到但没有使用流，因为我在那个主题上摇摆不定。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-02T21:29:40.640

> 如何在不复制和保留源 std::string 对象的情况下获得 std::string char 数据的所有权？（我想在不同类型之间使用移动语义）

你不能安全地做到这一点。

对于特定的实现，在某些情况下，您可以做一些可怕的事情，例如使用别名来修改字符串中的私有成员变量，以欺骗字符串认为它不再拥有缓冲区。但即使你愿意尝试这个，它也不会总是奏效。例如，考虑小字符串优化，其中字符串没有指向保存数据的某个外部缓冲区的指针，数据位于字符串对象本身内部。

* * *

如果您想避免复制，可以考虑将接口更改为 scheduleWrite。一种可能性是：

```
template<typename Container>
void scheduledWrite(Container data)
{
    // requires data[i], data.size(), and &data[n] == &data[0] + n for n [0,size)
    …
}

// move resources from object owned by a unique_ptr
WriteId write( std::unique_ptr< std::vector<char> > vecToWrite)
{
    scheduleWrite(std::move(*vecToWrite));
}

WriteId write( std::unique_ptr< std::string > strToWrite)
{
    scheduleWrite(std::move(*strToWrite));
}

// move resources from object passed by value (callers also have to take care to avoid copies)
WriteId write(std::string strToWrite)
{
    scheduleWrite(std::move(strToWrite));
}

// assume ownership of raw pointer
// requires data to have been allocated with new char[]
WriteId write(char const *data,size_t size) // you could also accept an allocator or deallocation function and make ptr_adapter deal with it
{
    struct ptr_adapter {
        std::unique_ptr<char const []> ptr;
        size_t m_size;
        char const &operator[] (size_t i) { return ptr[i]; }
        size_t size() { return m_size; }
    };

    scheduleWrite(ptr_adapter{data,size});
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T22:30:07.847

此类使用移动语义和 shared_ptr 获取字符串的所有权：

```
struct charbuffer
{
  charbuffer()
  {}

  charbuffer(size_t n, char c)
  : _data(std::make_shared<std::string>(n, c))
  {}

  explicit charbuffer(std::string&& str)
  : _data(std::make_shared<std::string>(str))
  {}

  charbuffer(const charbuffer& other)
  : _data(other._data)
  {}

  charbuffer(charbuffer&& other)
  {
    swap(other);
  }

  charbuffer& operator=(charbuffer other)
  {
    swap(other);
    return *this;
  }

  void swap(charbuffer& other)
  {
    using std::swap;
    swap(_data, other._data);
  }

  char& operator[](int i)
  { 
    return (*_data)[i];
  } 

  char operator[](int i) const
  { 
    return (*_data)[i];
  } 

  size_t size() const
  {
    return _data->size();
  }

  bool valid() const
  { 
    return _data;
  }

private:
  std::shared_ptr<std::string> _data;

}; 
```

示例用法：

```
std::string s("possibly very long user string");

charbuffer cb(std::move(s)); // s is empty now

// use charbuffer... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T22:24:16.250

您可以使用多态性来解决此问题。基本类型是统一数据缓冲区实现的接口。然后你会有两个派生类。一个`std::string`用作源，另一个使用您自己的数据表示。

```
struct MyData {
    virtual void * data () = 0;
    virtual const void * data () const = 0;
    virtual unsigned len () const = 0;
    virtual ~MyData () {}
};

struct MyStringData : public MyData {
    std::string data_src_;
    //...
};

struct MyBufferData : public MyData {
    MyBuffer data_src_;
    //...
}; 
```

# ember.js - emberjs 绑定

> ID：11301447
> 
> 赞同：6
> 
> 时间：2012-07-02T21:28:21.990
> 
> 标签：ember.js

我在绑定 emberjs 时遇到问题。我已将 ember 文本字段绑定到控制器内的变量。当我写入文本字段时，绑定变量会正确更新。

现在我想通过 JS 更改变量（以及文本字段中的文本）。当我这样做时，什么也没有发生。

```
App = Ember.Application.create({});

App.FormInfo = Em.TextField.extend({
    insertNewline: function(){
        App.AController.clear();
    }
});

App.AController = Em.ArrayController.create({
    content: [],
    name: '',
    clear: function(){ //I want this function to clear the text field and set name to an empty string
        this.name = '';
        console.log(this.name);//expected empty string; actual user input
    }
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script src="http://cloud.github.com/downloads/emberjs/ember.js/ember-0.9.5.min.js"></script>
<script type="text/x-handlebars">
    {{view App.FormInfo placeholder="Name" valueBinding="App.AController.name"}}
</script>
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-02T21:32:27.763

你需要`set`像这样使用

`this.set('name', '');`

而不是你在做什么。

`this.name = '';`

KVO/Binding 的东西只有在你使用兼容的方法时才会发生；这就是为什么这些方法首先存在的原因。

[这是一个工作小提琴。](http://jsfiddle.net/QBvbE/)

# sql-server - 触发特定值？

> ID：11301450
> 
> 赞同：0
> 
> 时间：2012-07-02T21:28:38.993
> 
> 标签：sql-server, triggers

我已经在 Stack 上阅读了一些问题/答案，但找不到任何我需要的东西。
假设我有下表：

```
col0  col1  col2  col3  col4
----  ----  ----  ----  ----
8     1     a     b     c
8     2     a     b     c
8     3     a     b     c
9     1     a     b     c
9     2     a     b     c 
```

我的软件可以：

```
INSERT INTO testtable ([col0],[col1],[col2],[col3],[col4]) 
  VALUES ('8','4','a','b','c') 
```

如何创建像这样的伪代码触发器：

```
On insert when col1 = '4'
  delete existing rows where col0 is the same (8 in this case)
   ** except for the new row I've just added ** 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T21:33:40.573

试试这个（在测试服务器上）：

```
DELETE FROM TESTTABLE T1
    JOIN INSERTED T2
        ON T1.COL1 = T2.COL1
        AND T1.COL0 = T2.COL0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T21:40:37.960

在代替触发器中执行此操作听起来更合适。如果目标是我假设的：当插入新行时 col0 = 8，您想删除所有其他具有相同键的行，是吗？

```
CREATE TRIGGER dbo.testtable_instead_insert
ON dbo.testtable
INSTEAD OF INSERT
AS
BEGIN
  SET NOCOUNT ON;

  DELETE t 
    FROM dbo.testtable AS t
    INNER JOIN inserted AS i
    ON t.col0 = i.col0
    WHERE i.col1 = '4';

  INSERT dbo.testtable(col0,col1,col2,col3,col4)
    SELECT col0,col1,col2,col3,col4
      FROM inserted;
END
GO 
```

问题是如果插入尝试添加具有相同 col0 值的多行，您希望遵循什么规则？想象一下插入语句是：

```
INSERT dbo.testtable ([col0],[col1],[col2],[col3],[col4]) 
SELECT '8','4','a','b','c'
UNION ALL 
SELECT '8','3','c','d','e'; 
```

# android - 视图是否在 ListView 滚动时重新生成？

> ID：11301453
> 
> 赞同：0
> 
> 时间：2012-07-02T21:29:02.917
> 
> 标签：android, listview

我有一个绑定到 ListView 的自定义 baseadapter。我正在从自定义类加载对象列表。

当数据更改时，我正在更改某些行的布局以创建标题（是的，我知道我仍然需要修复一些逻辑，但它可以工作）。

我的问题是，当我将列表视图滚动到原来可见的内容之外时，应用程序崩溃并在 HeaderHolder 上出现 ClassCastException 错误（如果我在 catch 处理程序中设置了断点，我会看到该错误）。我认为这是由于视图被破坏和重新创建，不确定。有人可以证实这一点吗？

```
public class MyCustomBaseAdapter extends BaseAdapter {
 private static ArrayList<Appointment> searchArrayList;

 private LayoutInflater mInflater;

 public MyCustomBaseAdapter(Context context, ArrayList<Appointment> results) {
  searchArrayList = results;
  mInflater = LayoutInflater.from(context);
 }

 public int getCount() {
  return searchArrayList.size();
 }

 public Object getItem(int position) {
  return searchArrayList.get(position);
 }

 public long getItemId(int position) {
  return position;
 }

 public String lastDate = null;
 public String thisItemDate = null;

 public View getView(int position, View convertView, ViewGroup parent) 
 {
     try
     {
         thisItemDate = searchArrayList.get(position).GetDTStart().toString().substring(0,10);
         if(!thisItemDate.equals(lastDate))
         {
             HeaderHolder holder;
             if (convertView == null) 
             {
                 convertView = mInflater.inflate(R.layout.calendar_item_header, null);

                 holder = new HeaderHolder();

                 holder.txtHeader = (TextView) convertView.findViewById(R.id.header);

                 convertView.setTag(holder);
                 convertView.setPadding(2,2,2,2);
             } 
             else 
             {
                 holder = (HeaderHolder) convertView.getTag();
             }

             holder.txtHeader.setText(thisItemDate);

             lastDate = thisItemDate;
             return convertView;                 
         }
     }
     catch (Exception e)
     {  //Catch exception if any
        System.err.println("Error: " + e.getMessage());
     }

     ViewHolder holder;
     if (convertView == null) 
     {
         convertView = mInflater.inflate(R.layout.calendar_item, null);

         holder = new ViewHolder();
         holder.txtAttendee = (TextView) convertView.findViewById(R.id.attendee);
         holder.txtSummary = (TextView) convertView.findViewById(R.id.summary);
         holder.txtStarts = (TextView) convertView.findViewById(R.id.starts);
         holder.txtEnds = (TextView) convertView.findViewById(R.id.ends);

         convertView.setTag(holder);
         convertView.setPadding(4, 4, 4, 16);
     } 
     else 
     {
         holder = (ViewHolder) convertView.getTag();
     }

     holder.txtAttendee.setText(searchArrayList.get(position).GetAttendee());
     holder.txtSummary.setText(">" + searchArrayList.get(position).GetSummary());
     String st = searchArrayList.get(position).GetDTStart().toString();
     String en = searchArrayList.get(position).GetDTEnd().toString();

     holder.txtStarts.setText(st.substring(0,16));
     holder.txtEnds.setText(en.substring(0,16));

     return convertView;         
 }

 static class ViewHolder 
 {
     TextView txtAttendee;
     TextView txtSummary;
     TextView txtStarts;
     TextView txtEnds;
 }

 static class HeaderHolder
 {
     TextView txtHeader; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T21:34:24.873

You must tell ListView through your Adapter the amount of view types it internally creates / updates and what view type to find at which list position. This is done through the methods:

*   [int getViewTypeCount()](http://developer.android.com/reference/android/widget/Adapter.html#getViewTypeCount%28%29)
*   [int getItemViewType(int)](http://developer.android.com/reference/android/widget/Adapter.html#getItemViewType%28int%29)

EDIT: Your implementation is a bit complicated. You should redesign your adapter to explicitly *include* the section titles as data items of your internal list data structure.

One way for doing that would be to back the adapter with an ArrayList<Object> instead of ArrayList<Appointment>. That way you can have both Appointment objects *and* section title strings in the same list.

Both methods getView and getItemViewType need to fetch the ArrayList item at the requested position and check the item object for its type:

```
public int getItemViewType(int position) {
    Object item = getItem(position);

    if(item instanceof Appointment) {
        return 0;
    } else {
        // It's a section title:
        return 1;
    }
} 
```

You would proceed similarly in your getView method:

```
public View getView(int position, View convertView, ViewGroup parent) {
    Object item = getItem(position);

    if(convertView == null) {
        // Create item view for first time

        if(item instanceof Appointment) {
            convertView = ... // inflate appointment list view item layout
        } else {
            convertView = ... // inflate title section list view item layout
        }
    }

    // Update list view item view according to type:
    if(item instanceof Appointment) {
        Appointment a = (Appointment) item;
        // Retrieve TextViews etc from convertView, cache it as Tag in a ViewHolder
        // and update these views based on Appointment a
    } else {
        // Item is a section header string:
        String label = (String) item;
        // Retrieve label TextView from convertView... etc...
    }

    return convertView;
} 
```

There is actually nothing more to it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T18:25:09.760

好吧，我快到了......它工作正常，但有一个例外：当我向下滚动到列表视图的底部时，条目开始乱序。使用调试器，我已经验证了 arraylist 的加载顺序完全正确，并且日期标签在它们应该在的位置。但是，一旦我开始滚动，事情就会变得乱七八糟（例如，listview 条目四处移动，标签向上和/或向下移动。我认为问题是由于我得到了一个空指针异常（在 catch 块中）它右边的注释）。但我不确定为什么会发生这种情况，只有当列表滚动到足以使某些元素弹出而其他元素需要进入视野时。

```
public class MyCustomBaseAdapter extends BaseAdapter {
 //private static ArrayList<Appointment> searchArrayList;
 private static ArrayList<Object> searchArrayList;

 private LayoutInflater mInflater;

 //public MyCustomBaseAdapter(Context context, ArrayList<Appointment> results) {
 public MyCustomBaseAdapter(Context context, ArrayList<Object> results) {

  searchArrayList = results;
  mInflater = LayoutInflater.from(context);
 }

 public int getCount() {
  return searchArrayList.size();
 }

 public Object getItem(int position) {
  return searchArrayList.get(position);
 }

 public long getItemId(int position) {
  return position;
 }

 // One way for doing that would be to back the adapter with an ArrayList<Object> instead of ArrayList<Appointment>. 
 // That way you can have both Appointment objects and section title strings in the same list.
 // Both methods getView and getItemViewType need to fetch the ArrayList item at the requested position and check the item object for its type:

public int getItemViewType(int position) {
    Object item = getItem(position);

    if(item instanceof Appointment) {
        return 0;
    } else {
        // It's a section title:
        return 1;
    }
}

public View getView(int position, View convertView, ViewGroup parent) 
{
    Object item = getItem(position);

    if(convertView == null) 
    {
        // Create item view for first time
        if(item instanceof Appointment) 
        {   // inflate appointment list view item layout
            convertView = mInflater.inflate(R.layout.calendar_item, null);
        } 
        else 
        {   // inflate title section list view item layout
            convertView = mInflater.inflate(R.layout.calendar_item_header, null); 
        }
    }

    // Update list view item view according to type:
    if(item instanceof Appointment) 
    {
        Appointment a = (Appointment) item;
        // Retrieve TextViews etc from convertView, cache it as Tag in a ViewHolder
        // and update these views based on Appointment a
        ViewHolder holder;

        holder = new ViewHolder();
        holder.txtAttendee = (TextView) convertView.findViewById(R.id.attendee);
        holder.txtSummary = (TextView) convertView.findViewById(R.id.summary);
        holder.txtStarts = (TextView) convertView.findViewById(R.id.starts);
        holder.txtEnds = (TextView) convertView.findViewById(R.id.ends);
        holder.txtCategories = (TextView) convertView.findViewById(R.id.categories);

        convertView.setTag(holder);
        convertView.setPadding(4, 4, 4, 16);

        try
        {
            holder.txtAttendee.setText(a.GetAttendee());
            holder.txtSummary.setText(">" + a.GetSummary());
            String st = a.GetDTStart().toString();
            String en = a.GetDTEnd().toString();

            holder.txtStarts.setText(st.substring(0,16));
            holder.txtEnds.setText(en.substring(0,16)); 

            String cat = a.GetCategories();
            holder.txtCategories.setText(cat);

        }
        catch (Exception e)
        {
            String err = e.getMessage();  // here's the error location

        }
    } 
    else 
    {
        // Item is a section header string:
        String label = (String) item;
        // Retrieve label TextView from convertView... etc...
        HeaderHolder holder;

        holder = new HeaderHolder();

        holder.txtHeader = (TextView) convertView.findViewById(R.id.header);

        convertView.setTag(holder);
        convertView.setPadding(2,2,2,2);
        convertView.setClickable(false);
        convertView.setFocusable(false);

        try
        {
            holder.txtHeader.setText(" " + label);
        }
        catch (Exception e)
        {

        }
    }

    return convertView;
}

 static class ViewHolder 
 {
     TextView txtAttendee;
     TextView txtSummary;
     TextView txtStarts;
     TextView txtEnds;
     TextView txtCategories;
 }

 static class HeaderHolder
 {
     TextView txtHeader;

 } 
```

# java - derby / openjdk-6重复类定义错误

> ID：11301455
> 
> 赞同：0
> 
> 时间：2012-07-02T21:29:10.350
> 
> 标签：java, derby, openjdk

尝试通过 openjpa 连接到 derby 服务器时出现以下异常： `attempted duplicate class definition for name: "sun/security/pkcs11/SunPKCS11"`。查看一些谷歌搜索结果，Mac 上的 java 似乎存在已知问题，但我使用的是 ubuntu 和 openjdk-6。我真的不知道从哪里开始解决这个问题。任何人有任何想法出了什么问题？

`java -version`输出：

```
java version "1.6.0_24"
OpenJDK Runtime Environment (IcedTea6 1.11.1) (6b24-1.11.1-4ubuntu3)
OpenJDK 64-Bit Server VM (build 20.0-b12, mixed mode) 
```

错误堆栈跟踪（冗长...）

```
Exception in thread "main" <openjpa-2.2.0-r422266:1244990 nonfatal general error> org.apache.openjpa.persistence.PersistenceException: There were errors initializing your configuration: java.lang.LinkageError: loader (instance of  sun/misc/Launcher$ExtClassLoader): attempted  duplicate class definition for name: "sun/security/pkcs11/SunPKCS11"
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:634)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:277)
    at java.net.URLClassLoader.access$000(URLClassLoader.java:73)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:212)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:314)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
    at sun.security.jca.ProviderConfig$3.run(ProviderConfig.java:253)
    at sun.security.jca.ProviderConfig$3.run(ProviderConfig.java:244)
    at java.security.AccessController.doPrivileged(Native Method)
    at sun.security.jca.ProviderConfig.doLoadProvider(ProviderConfig.java:244)
    at sun.security.jca.ProviderConfig.getProvider(ProviderConfig.java:224)
    at sun.security.jca.ProviderList.loadAll(ProviderList.java:281)
    at sun.security.jca.ProviderList.removeInvalid(ProviderList.java:298)
    at sun.security.jca.Providers.getFullProviderList(Providers.java:170)
    at java.security.Security.getProviders(Security.java:457)
    at java.security.Security.getProviders(Security.java:607)
    at java.security.Security.getProviders(Security.java:552)
    at org.apache.derby.client.am.EncryptionManager.<init>(Unknown Source)
    at org.apache.derby.jdbc.ClientBaseDataSource.<clinit>(Unknown Source)
    at org.apache.derby.jdbc.ClientDriver.tokenizeURLProperties(Unknown Source)
    at org.apache.derby.jdbc.ClientDriver.connect(Unknown Source)
    at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38)
    at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582)
    at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556)
    at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545)
    at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388)
    at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044)
    at org.apache.openjpa.jdbc.schema.DBCPDriverDataSource.getDBCPConnection(DBCPDriverDataSource.java:74)
    at org.apache.openjpa.jdbc.schema.AutoDriverDataSource.getConnection(AutoDriverDataSource.java:42)
    at org.apache.openjpa.jdbc.schema.SimpleDriverDataSource.getConnection(SimpleDriverDataSource.java:75)
    at org.apache.openjpa.lib.jdbc.DelegatingDataSource.getConnection(DelegatingDataSource.java:118)
    at org.apache.openjpa.lib.jdbc.DecoratingDataSource.getConnection(DecoratingDataSource.java:93)
    at org.apache.openjpa.jdbc.schema.DataSourceFactory.installDBDictionary(DataSourceFactory.java:233)
    at org.apache.openjpa.jdbc.conf.JDBCConfigurationImpl.getConnectionFactory(JDBCConfigurationImpl.java:733)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.apache.openjpa.lib.conf.ConfigurationImpl.instantiateAll(ConfigurationImpl.java:295)
    at org.apache.openjpa.conf.OpenJPAConfigurationImpl.instantiateAll(OpenJPAConfigurationImpl.java:1671)
    at org.apache.openjpa.kernel.AbstractBrokerFactory.makeReadOnly(AbstractBrokerFactory.java:646)
    at org.apache.openjpa.kernel.AbstractBrokerFactory.newBroker(AbstractBrokerFactory.java:203)
    at org.apache.openjpa.kernel.DelegatingBrokerFactory.newBroker(DelegatingBrokerFactory.java:156)
    at org.apache.openjpa.persistence.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:227)
    at org.apache.openjpa.persistence.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:154)
    at org.apache.openjpa.persistence.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:60)
    at org.dynamosoftware.jpatest.App.main(App.java:15) 
```

# android - Android 层列表精灵表

> ID：11301457
> 
> 赞同：0
> 
> 时间：2012-07-02T21:29:18.363
> 
> 标签：android, list, sprite, layer

我创建了一个带有 4 个不同图标的精灵表（包含多个图像的单个图像）。我想创建一个图层列表，使用图像的不同部分来制作单个图像，例如：

```
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:drawable="@drawable/spritesheet"/>
    <item android:drawable="@drawable/spritesheet"/>
    <item android:drawable="@drawable/spritesheet"/>
    <item android:drawable="@drawable/spritesheet"/>
</layer-list> 
```

例如，精灵表看起来像这样：

![精灵表](../Images/70539026c063ba5151c6b626700154f8.png)

我希望最终结果看起来像这样：

![在此处输入图像描述](../Images/70ca7e05d4e4aecebca34ab63ebfae87.png)

[我已经尝试了这里](http://developer.android.com/guide/topics/resources/drawable-resource.html#LayerList)可用的不同选项， 但是我找不到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T13:30:30.840

你为什么不只使用图片的部分？

@drawable/layers.xml，例如：

```
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
   <item android:drawable="@drawable/part1"/>
   <item android:drawable="@drawable/part2"/>
   <item android:drawable="@drawable/part3"/>
   <item android:drawable="@drawable/part4"/>
</layer-list> 
```

如果需要完整的图片，您可以使用第五张（完整的）图片，或者从 RelativeLayout 中的部分创建它，因此它仍然是应用程序的轻量级。

# factory-bot - 未定义的方法“FactoryGirl”——从 2.0.2 升级到 3.4.2

> ID：11301462
> 
> 赞同：5
> 
> 时间：2012-07-02T21:29:54.707
> 
> 标签：factory-bot

我正在从 factory_girl（2.0.2 到 3.4.2）和 factory_girl_rails（1.1.0 -> 3.4.0）升级过程中，我的 rspec 测试遇到了工厂女孩的问题。

我想我已经成功地改变了我的工厂来处理新的语法，并删除了额外的 require 语句，这些语句带来了相同文件的多个副本。我的服务器现在启动了，所以我知道 factory.rb 文件被正确解析了。

现在，当我运行我的 rspec 测试时，我收到了这个错误：

NoMethodError：未定义的方法“FactoryGirl”用于#

```
it 'can be created' do
  course = FactoryGirl(:course)
  ….
end 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-02T21:32:28.390

With Factory Girl 3.4.2, you will need to explicitly use the create method.

```
course = FactoryGirl.create(:course) 
```

# editor - 如何在 Notepad++ 中使用 vim 快捷方式

> ID：11301463
> 
> 赞同：0
> 
> 时间：2012-07-02T21:29:55.687
> 
> 标签：editor, notepad++

我必须使用 Notepad++ 而不是 Windows 版本的 vim，因为我确信 Notepad++ 不会在行尾插入奇数字符。我正在编辑我的开发箱，所以我必须从 Windows 进行编辑，但是很多编辑器正在向我的文件中添加奇怪的字符。我喜欢使用 vim 快捷键，因为它们很高效。有没有办法在 Notepad++ 中使用 Vim 快捷方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T11:27:54.150

我怀疑您只看到 Windows 和 Unix 之间行尾标记的差异。

因此，要解决您看到的问题，只需配置您的编辑器以使用正确的行尾标记。

# objective-c - General tutorial on OS X audio programming

> ID：11301467
> 
> 赞同：2
> 
> 时间：2012-07-02T21:30:06.270
> 
> 标签：objective-c, macos, core-audio, audiounit

I would like to do some fairly simple audio programming on OS X (using Lion and Xcode 4.3) -- synthesizing tones with given frequencies, mainly. Trouble is, Apple's documentation on the subject is way too high-level for my current knowledge of the subject. I've searched for weeks now for something that will get me started, to no avail.

Does anyone know of some Core Audio basic tutorial, or even some sample code, that will help me do fairly simple Core Audio tasks so that I can progress to understanding the Apple documentation?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T00:00:12.820

我建议这本书[学习核心音频](http://www.informit.com/store/product.aspx?isbn=0321636848)在该站点上也有本书的示例代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T03:02:32.563

如果您希望相当容易地合成音频，您将需要使用 3rd 方库。两种可能的解决方案是 FMOD 和 SuperCollider。

两者之间的优缺点实际上是 supercollider 作为服务器运行，您可以从应用程序作为客户端连接，而 FMOD 被编译成应用程序并使用核心音频来合成声音。如果您打算分发此应用程序，FMOD 显然是您的选择。SuperCollider 也有它自己的语言，你必须学习基础知识才能开始定制你的声音合成。以下是一些链接：

**FMOD：**

[FMOD 下载（附带一堆示例代码）](http://www.fmod.org/fmod-downloads.html)

**超级对撞机：**

[SC 服务器下载](http://supercollider.sourceforge.net/)

[正弦波发生器示例应用程序](http://www.audiosynth.com/sinewavedemo.html)

[SC 脚本和示例的重要来源](http://sccode.org/)

# mysql - Extract path in MYSQL

> ID：11301473
> 
> 赞同：0
> 
> 时间：2012-07-02T21:30:38.130
> 
> 标签：mysql

How do I retrieve this: `123` from this: `123?arg=value#ancor`, in MYSQL; in other words, removing queries and removing anchors from the URL path.

Example scenario:

```
table1:
+----+------+
| id | path |
+----+------+
|  1 |  100 |
|  2 |  200 |
|  3 |  300 |
+----+------+

table2:
+----+----------------+
| id |           path |
+----+----------------+
|  1 |     100#anchor |
|  2 |  200?arg=value |
|  3 |      other/300 |
+----+----------------+

SELECT * FROM table1
INNER JOIN table2
ON table1.path = revised_path(table2.path)

result:
+----+------+----+---------------+
| id | path | id |          path |
+----+------+----+---------------+
|  1 |  100 |  1 |    100#anchor |
|  2 |  200 |  2 | 200?arg=value |
+----+------+----+---------------+ 
```

UPDATE: Path will always be numeric, but can be any length.

UPDATE 2: revised_path() is a temporary replacement for the solution I'm looking for.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T22:02:35.350

据我了解，您需要检查路径是否匹配，但由于一个包含在其他数据中，您应该检查表一中的路径（id）是否包含在表二中的路径中，我会这样做

```
SELECT table_1.id as t1_id,table_1.path as t1_path,
table_2.id as t2_id, table_2.path as t2_path
FROM table_1
INNER JOIN table_2
WHERE INSTR(table_2.path,table_1.path) > 0 
```

编辑：

这应该为您提供您要求的输出：

```
SELECT table_1.id as t1_id,table_1.path as t1_path,
table_2.id as t2_id, table_2.path as t2_path
FROM table_1
INNER JOIN table_2
where table_1.path = cast(table_2.path as unsigned) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T21:54:22.443

所以看起来路径是 URL 的一部分。所以 PHP 函数 parse_url 可以解决问题。

```
$sql = "SELECT * FROM table1 INNER JOIN table2 ON table1.path = revised_path(table2.path)";
$result = mysql_query($sql);
while ($data = mysql_fetch_object)) {
    $path = parse_url($data->path);
}

// more code to diplay $path etc... 
```

[parse_url](http://us2.php.net/manual/en/function.parse-url.php)上的 PHP 文档

# ruby-on-rails - Can't get pjax to work on Rails

> ID：11301480
> 
> 赞同：0
> 
> 时间：2012-07-02T21:31:17.437
> 
> 标签：ruby-on-rails, ruby, pjax

I'm trying to get [pjax](https://github.com/defunkt/jquery-pjax/) to work on a Rails app but none of the links are being annotated with pjax. I think pjax isn't really being loaded. I'm using pjax_rails and am basically following the [railscast](http://railscasts.com/episodes/294-playing-with-pjax) instructions but using `//= require jquery.pjax` instead of just `pjax`. I'm also using it with bootstrap which *may* cause an issue but I'm not sure. My other thought is that is that the pjax javascript isn't being loaded and I need to run something like `$('a').pjax('[data-pjax-container]')`

To be clear the main problem is that pjax isn't being loaded client side and thus when I make requests the X-PJAX header is not being set.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T01:07:05.333

终于让它工作了。第一个问题是我不知道资产管道已关闭，因此未包含 pjax javascript 文件。相反，我使用了 pjax rack gem 并将其转储到公共目录中。然后我创建了一个新的 javascript 文件，`$('a').pjax('[data-pjax-container]')`它可以工作了！虽然我不确定为什么当所有文档似乎都指向它应该已经存在的事实时我需要手动调用该 javascript。

# chef-infra - 使用 chef-solo 安装 Java 时出现 SSLError

> ID：11301486
> 
> 赞同：1
> 
> 时间：2012-07-02T21:31:43.863
> 
> 标签：chef-infra

我正在尝试使用 Chef-solo 安装 Java，但遇到以下证书错误。我尝试了一些其他解决方案来下载证书并将它们放置在某些位置，但没有成功。如何去发现什么是错的？

```
sudo chef-solo -r https://github.com/opscode-cookbooks/java.git
/usr/lib/ruby/1.8/net/http.rb:586:in `connect': SSL_connect returned=1 errno=0   state=SSLv3 read server certificate B: certificate verify failed (OpenSSL::SSL::SSLError)
    from /usr/lib/ruby/1.8/net/http.rb:586:in `connect'
    from /usr/lib/ruby/1.8/net/http.rb:553:in `do_start'
    from /usr/lib/ruby/1.8/net/http.rb:542:in `start'
    from /usr/lib/ruby/1.8/open-uri.rb:242:in `open_http'
    from /usr/lib/ruby/1.8/open-uri.rb:616:in `buffer_open'
    from /usr/lib/ruby/1.8/open-uri.rb:164:in `open_loop'
    from /usr/lib/ruby/1.8/open-uri.rb:162:in `catch'
    from /usr/lib/ruby/1.8/open-uri.rb:162:in `open_loop'
    from /usr/lib/ruby/1.8/open-uri.rb:132:in `open_uri'
    from /usr/lib/ruby/1.8/open-uri.rb:518:in `open'
    from /usr/lib/ruby/1.8/open-uri.rb:30:in `open'
    from /usr/lib64/ruby/gems/1.8/gems/chef-10.12.0/bin/../lib/chef/application/solo.rb:178:in `reconfigure'
    from /usr/lib64/ruby/gems/1.8/gems/chef-10.12.0/bin/../lib/chef/application/solo.rb:177:in `open'
    from /usr/lib64/ruby/gems/1.8/gems/chef-10.12.0/bin/../lib/chef/application/solo.rb:177:in `reconfigure'
    from /usr/lib64/ruby/gems/1.8/gems/chef-10.12.0/bin/../lib/chef/application.rb:68:in `run'
    from /usr/lib64/ruby/gems/1.8/gems/chef-10.12.0/bin/chef-solo:25
    from /usr/bin/chef-solo:19:in `load'
    from /usr/bin/chef-solo:19 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-27T14:37:47.493

似乎是 Chef 中的一个已知问题。看：

*   [https://tickets.opscode.com/browse/CHEF-4138](https://tickets.opscode.com/browse/CHEF-4138)

# memory - CLR GC 堆如何映射到本机堆？

> ID：11301491
> 
> 赞同：2
> 
> 时间：2012-07-02T21:31:53.397
> 
> 标签：memory, garbage-collection, clr, heap-memory, windbg

例如，如果我看到其中一些堆非常大，我的下一个问题将是谁（本机或托管代码）使用它们。如何确定 CLR 用于其目的的本机堆 (!heap -s)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T16:34:49.740

CLR 使用 VirtualAlloc 分配要用作托管堆的内存段。您可以使用 !sos.eeheap -gc 检查这些段。!sos.dumpheap -stat 将显示托管堆正在使用多少内存，以及哪些类型的对象正在消耗内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T09:06:38.983

CLR 不使用任何本机堆。使用 SOS 和 !DumpHeap 查看托管堆。

这是查找谁在使用本机堆的[链接](http://blogs.msdn.com/b/ntdebugging/archive/2012/04/26/troubleshooting-memory-leaks-with-just-a-dump.aspx)。

我使用[DebugDiag 1.1](http://msdn.microsoft.com/en-us/library/ff420662.aspx)获得了一些很好的结果，用于查找谁在使用哪个本机堆。

编辑：虽然**VirtualAlloc**用于为本机堆分配内存，但 !CLRUsage 显示还使用了本机堆。但是我不知道目的。

```
0:000> !CLRUsage
Native Heap for mscorwks: 0x07e60000
Number of GC Heaps: 1
------------------------------
GC Heap Size  0xbc7dd4(12,352,980)
Total Commit Size  00e22000 (14 MB)
Total Reserved Size  0225e000 (34 MB)
Initial reservation type: All at once
Initial Allocation Size: 2000000 (33,554,432) (32 MB)
Reserved Memory Size: 3000000 (50,331,648) (48 MB)
Reserved Memory Limit Size: 3000000 (50,331,648) (48 MB) 
```

# postgresql - playframework-1.x heroku postgres

> ID：11301492
> 
> 赞同：0
> 
> 时间：2012-07-02T21:32:03.923
> 
> 标签：postgresql, heroku, playframework-1.x

I just tried to deployed a play 1.2.4 app to heroku. The App works great locally, but on heroku i just got some strange errors, as soon as i try to save some data.

```
2012-07-02T21:26:04+00:00 app[web.1]: Internal Server Error (500) for request POST /players/save
2012-07-02T21:26:04+00:00 app[web.1]: 
2012-07-02T21:26:04+00:00 app[web.1]: Oops: UnexpectedException
2012-07-02T21:26:04+00:00 app[web.1]: An unexpected error occured caused by exception UnexpectedException: Unexpected Error
2012-07-02T21:26:04+00:00 app[web.1]: 
2012-07-02T21:26:04+00:00 app[web.1]: play.exceptions.UnexpectedException: Unexpected Error
2012-07-02T21:26:04+00:00 app[web.1]:   at play.data.validation.ValidationPlugin.beforeActionInvocation(ValidationPlugin.java:59)
2012-07-02T21:26:04+00:00 app[web.1]:   at play.plugins.PluginCollection.beforeActionInvocation(PluginCollection.java:594)
2012-07-02T21:26:04+00:00 app[web.1]:   at play.mvc.ActionInvoker.invoke(ActionInvoker.java:134)
2012-07-02T21:26:04+00:00 app[web.1]:   at Invocation.HTTP Request(Play!)
2012-07-02T21:26:04+00:00 app[web.1]: Caused by: play.exceptions.UnexpectedException: Unexpected Error
2012-07-02T21:26:04+00:00 app[web.1]:   at play.db.jpa.JPAPlugin.bind(JPAPlugin.java:84)
2012-07-02T21:26:04+00:00 app[web.1]:   at play.plugins.PluginCollection.bind(PluginCollection.java:534)
2012-07-02T21:26:04+00:00 app[web.1]:   at play.data.binding.Binder.bind(Binder.java:111)
2012-07-02T21:26:04+00:00 app[web.1]:   at play.mvc.ActionInvoker.getActionMethodArgs(ActionInvoker.java:642)
2012-07-02T21:26:04+00:00 app[web.1]:   at play.data.validation.ValidationPlugin$Validator.validateAction(ValidationPlugin.java:96)
2012-07-02T21:26:04+00:00 app[web.1]:   at play.data.validation.ValidationPlugin.beforeActionInvocation(ValidationPlugin.java:51)
2012-07-02T21:26:04+00:00 app[web.1]:   ... 3 more
2012-07-02T21:26:04+00:00 app[web.1]: Caused by: javax.persistence.PersistenceException: org.hibernate.exception.SQLGrammarException: could not execute query
2012-07-02T21:26:04+00:00 app[web.1]:   at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1214)
2012-07-02T21:26:04+00:00 app[web.1]:   at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1147)
2012-07-02T21:26:04+00:00 app[web.1]:   at org.hibernate.ejb.QueryImpl.getSingleResult(QueryImpl.java:307)
2012-07-02T21:26:04+00:00 app[web.1]:   at play.db.jpa.JPAPlugin.bind(JPAPlugin.java:79)
2012-07-02T21:26:04+00:00 app[web.1]:   ... 8 more
2012-07-02T21:26:04+00:00 app[web.1]: Caused by: org.hibernate.exception.SQLGrammarException: could not execute query
2012-07-02T21:26:04+00:00 app[web.1]:   at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:92)
2012-07-02T21:26:04+00:00 app[web.1]:   at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66)
2012-07-02T21:26:04+00:00 app[web.1]:   at org.hibernate.loader.Loader.doList(Loader.java:2536)
2012-07-02T21:26:04+00:00 app[web.1]:   at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2276)
2012-07-02T21:26:04+00:00 app[web.1]:   at org.hibernate.loader.Loader.list(Loader.java:2271)
2012-07-02T21:26:04+00:00 app[web.1]:   at org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:452)
2012-07-02T21:26:04+00:00 app[web.1]:   at org.hibernate.hql.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:363)
2012-07-02T21:26:04+00:00 app[web.1]:   at org.hibernate.engine.query.HQLQueryPlan.performList(HQLQueryPlan.java:196)
2012-07-02T21:26:04+00:00 app[web.1]:   at org.hibernate.impl.SessionImpl.list(SessionImpl.java:1268)
2012-07-02T21:26:04+00:00 app[web.1]:   at org.hibernate.impl.QueryImpl.list(QueryImpl.java:102)
2012-07-02T21:26:04+00:00 app[web.1]:   at org.hibernate.ejb.QueryImpl.getSingleResult(QueryImpl.java:274)
2012-07-02T21:26:04+00:00 app[web.1]:   ... 9 more
2012-07-02T21:26:04+00:00 app[web.1]: Caused by: org.postgresql.util.PSQLException: ERROR: operator does not exist: bigint = bytea
2012-07-02T21:26:04+00:00 app[web.1]:   Hint: No operator matches the given name and argument type(s). You might need to add explicit type casts.
2012-07-02T21:26:04+00:00 app[web.1]:   Position: 130
2012-07-02T21:26:04+00:00 app[web.1]:   at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2102)
2012-07-02T21:26:04+00:00 app[web.1]:   at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:1835)
2012-07-02T21:26:04+00:00 app[web.1]:   at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:257)
2012-07-02T21:26:04+00:00 app[web.1]:   at org.postgresql.jdbc2.AbstractJdbc2Statement.execute(AbstractJdbc2Statement.java:500)
2012-07-02T21:26:04+00:00 app[web.1]:   at org.postgresql.jdbc2.AbstractJdbc2Statement.executeWithFlags(AbstractJdbc2Statement.java:388)
2012-07-02T21:26:04+00:00 app[web.1]:   at org.postgresql.jdbc2.AbstractJdbc2Statement.executeQuery(AbstractJdbc2Statement.java:273)
2012-07-02T21:26:04+00:00 app[web.1]:   at org.hibernate.jdbc.AbstractBatcher.getResultSet(AbstractBatcher.java:208)
2012-07-02T21:26:04+00:00 app[web.1]:   at org.hibernate.loader.Loader.getResultSet(Loader.java:1953)
2012-07-02T21:26:04+00:00 app[web.1]:   at org.hibernate.loader.Loader.doQuery(Loader.java:802)
2012-07-02T21:26:04+00:00 app[web.1]:   at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:274)
2012-07-02T21:26:04+00:00 app[web.1]:   at org.hibernate.loader.Loader.doList(Loader.java:2533)
2012-07-02T21:26:04+00:00 app[web.1]:   ... 17 more

```

The App is public accessable here: [https://github.com/phaus/kickster](https://github.com/phaus/kickster)

I also tried to use db evolutions first. It did not work neither. I found several pages for

> Caused by: org.postgresql.util.PSQLException: ERROR: operator does not exist: bigint = bytea

but i looks, like the problem is within the Play Framework?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T14:00:30.077

这是 Play 1.2.5 中已修复的 Play Framework 错误。

# c# - 循环每个键？

> ID：11301494
> 
> 赞同：0
> 
> 时间：2012-07-02T21:32:16.360
> 
> 标签：c#, xna

我有这个代码：

```
if (ks.IsKeyDown(Keys.F11))
{
    if (rndKey == 11)
    {
        rightButton();
    }
    else
    {
    wrongButton();
    }
pressed = true;
} 
```

现在的问题是：每个键我都需要这个。我可以用 Keys.Blabla 以某种方式循环这个吗？我是 C# 和 XNA 的新手，所以......是的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T21:41:06.700

上面的答案将遍历所有奇怪的键，如果你只想要功能键可能是这样的：

```
for(int i = 1; i <= 12; ++i)
{
     string key = "F" + i.toString();
     Key k = Enum.Parse(typeof(Key), key);

     if(ks.isKeyDown(k))
     {
         if (rndKey == i)
         {
               rightButton();
         }
         else
         {
               wrongButton();
         }
     }
} 
```

没有编译器，所以可能需要一些调整。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T21:44:05.663

我想你可以这样做：

```
foreach (Keys k in Keyboard.GetState(PlayerIndex.One).GetPressedKeys()) {   
    switch (k) {
        case Keys.F11:
            if (rndKey == 11) { rightbutton(); } else { wrongbutton(); }
            break;
        case Keys.F12:
            if (rndKey == 12) { rightbutton(); } else { wrongbutton(); }
            break;
        default:
            wrongbutton();
            break;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T22:06:30.013

这应该足以满足您的需求。不需要循环或其他任何东西，因为无论如何你都会生成一个随机密钥：

```
ArrayList keys  = new ArrayList(Enum.GetValues(typeof(Keys)));
Keys randomKey = (Keys)keys[new Random().Next(keys.Count)];

if (ks.IsKeyDown(randomKey))
{
    rightButton();
}
else { wrongButton(); } 
```

# objective-c - 如何使用 UILabel 在我的号码中获取逗号，即 24,532,664？

> ID：11301498
> 
> 赞同：3
> 
> 时间：2012-07-02T21:32:47.053
> 
> 标签：objective-c, cocoa-touch, uilabel

如何设置显示以显示逗号：24,532,664 而不是 24532664？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-02T21:36:21.947

使用[NSNumberFormatter](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DataFormatting/Articles/dfNumberFormatting10_4.html#//apple_ref/doc/uid/TP40002368-SW1)。

**清单 1**

```
NSNumberFormatter *numberFormatter = [[NSNumberFormatter alloc] init];
[numberFormatter setNumberStyle:NSNumberFormatterDecimalStyle];
NSNumber *myNumber = [NSNumber numberWithInteger:122344];
NSString *formattedNumberString = [numberFormatter stringFromNumber:myNumber];
[numberFormatter release];  // if you aren't using ARC.
NSLog(@"formattedNumberString: %@", formattedNumberString);
// Output for locale en_US: "formattedNumberString: formattedNumberString: 122,344" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T21:48:26.143

您可以使用`-[NSString initWithFormat:locale:]`.

```
NSLocale *locale = [NSLocale currentLocale]; // always use the user's locale
NSString *string = [[NSString alloc] initWithFormat:@"%d" locale:locale, 24532664]; 
```

如果逗号是强制性的，您可以选择特定的语言环境 ( `en_US`)，以便始终获得相同的结果。但是，如果该字符串是要显示给用户的，那不是一个好主意。

```
NSLocale *locale = [[NSLocale alloc] initWithLocaleIdentifier:@"en_US"]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T21:37:55.547

为此，您需要使用 NSNumberFormatter。

例如[，格式化数字以显示逗号和/或美元符号](https://stackoverflow.com/questions/5406366/formatting-a-number-to-show-commas-and-or-dollar-sign)

之后别忘了清理！！！

# javascript - Aptana 3 中的 ExtJS 4 代码辅助

> ID：11301499
> 
> 赞同：6
> 
> 时间：2012-07-02T21:32:50.837
> 
> 标签：javascript, extjs, extjs4, aptana, aptana3

我开始使用 ExtJS 4 框架在 Web 应用程序开发项目中生成图表报告。我正在为 ExtJS 4 寻找最新的代码帮助，以使我免于过多的输入。我试图找到一个很久，但看起来它们都已经过时了。

如果有人目前使用 ExtJS 4 代码协助 Aptana（或其他一些 IDE）。请帮我一把。谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T04:45:02.807

伟大的！最后找到这个回答我的问题的[线程。](http://aptanastudio.tenderapp.com/discussions/suggestions/342-aptana-support-for-extjs-40)下载[extjs4.1.beta-v0.1.sdocml](http://www.thekuroko.com/aptana-sdocml-code-hinting-support/)可以将代码提示添加到您的 ExtJS 4 Aptana 项目中。

有很多关于将 Spket 插件添加到 Eclipse/Aptana 以支持 ExtJS 的说明。但这对我来说从来没有用过……不确定是否有人使用它并解决了问题。

**更新**：我现在使用[WebStorm](http://www.jetbrains.com/webstorm/)进行 ExtJS 4 开发，它有很好的 ExtJS 支持。实际上，项目中包含的所有 js 文件都可以在 WebStorm 中识别，从而列出代码提示。

# java - Java/Swing - Tooltip rectangle

> ID：11301503
> 
> 赞同：4
> 
> 时间：2012-07-02T21:33:02.007
> 
> 标签：java, macos, swing, tooltip, paint

I'm currently developing a java/swing project, and i'm stuck in the customization process.
I've extended [JToolTip](http://docs.oracle.com/javase/7/docs/api/javax/swing/JToolTip.html) and overrided the paint() method to draw my own tooltip, but i can't manage to remove the background around the tooltip.

Here's the `paint()` override:

```
/* (non-Javadoc)
 * @see javax.swing.JComponent#paint(java.awt.Graphics)
 */
@Override
public void paint(Graphics g) {     
    String text = getComponent().getToolTipText();

    if (text != null && text.trim().length() > 0) {
        // set the parent to not be opaque
        Component parent = this.getParent();
        if (parent != null) {
            if (parent instanceof JComponent) {
                JComponent jparent = (JComponent) parent;
                if (jparent.isOpaque()) {
                    jparent.setOpaque(false);
                }
            }
        }

        // create a round rectangle
        Shape round = new RoundRectangle2D.Float(4, 4, this.getWidth() - 1 - 8, this.getHeight() - 1 - 8, 8, 8);

        // draw the background
        Graphics2D g2 = (Graphics2D) g.create();
        g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
        g2.setColor(getBackground());
        g2.fill(round);

        // draw the left triangle
        Point p1 = new Point(4, 10);
        Point p2 = new Point(4, 20);
        Point p3 = new Point(0, 15);
        int[] xs = {p1.x, p2.x, p3.x};
        int[] ys = {p1.y, p2.y, p3.y};
        Polygon triangle = new Polygon(xs, ys, xs.length);
        g2.fillPolygon(triangle);

        // draw the text
        int cHeight = getComponent().getHeight();
        FontMetrics fm = g2.getFontMetrics();
        g2.setColor(getForeground());
        if (cHeight > getHeight())
            g2.drawString(text, 10, (getHeight() + fm.getAscent()) / 2);
        else
            g2.drawString(text, 10, (cHeight + fm.getAscent()) / 2);

        g2.dispose();
    }
} 
```

Here's the (white) background i want to remove:
![enter image description here](../Images/71781892512941625f11a499602b8482.png)

I'm running java 1.7.0_05 under OSX.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T14:07:51.493

这可能是因为您在调用*super.paint***后将**父级设置为不透明。另外，您是否在 JToolTip 上调用了 setOpaque ？最后，您可以在*addNotify*中执行所有操作，而不是在每次绘制时执行代码：

 **```
public void addNotify() {
    super.addNotify();
    setOpaque(false);
    Component parent = this.getParent();
    if (parent != null) {
        if (parent instanceof JComponent) {
            JComponent jparent = (JComponent) parent;
            jparent.setOpaque(false);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-03T15:17:36.740

存在一个问题，即所有组件默认情况下都具有矩形形状 - 如果您想为工具提示构建自己的`shape`，则必须设置它：

```
Shape circle = new Ellipse2D.Float(-1.0f,-1.0f, 36.0f, 36.0f);
tooltip.setShape(circle); 
```**

# python - strange newlines being inserted in python file write

> ID：11301513
> 
> 赞同：0
> 
> 时间：2012-07-02T21:33:43.280
> 
> 标签：python, file, fwrite

Does anyone have any idea or know of any situation where python inserts newline characters strangely.

This is my piece of code

```
 if ((sentAnalyze) and len(OpString)!=0):
    if data[8]!= '':
        if (data[8] == 'p'):
            OpString = "1 " + OpString
        elif (data[8] == 'n'):
            OpString = "-1 " + OpString
        elif (data[8] == 'neu'):
            OpString = "0 " + OpString
        print "writing :", OpString
        fw.write(OpString + "\n") 
```

When I try looking at the print commands and the file write commands, there is a an extra new line inserted in the file for certain line numbers.

this entire if block is in a while loop and the print command prints the lines properly.

and yeah I am opening the file in `w+` mode.

Function (partially written here) to compute the OpString

```
 for word,tag in simplified_tokens:
                tok = word + "/" + tag
                if tok in self.wordtoPosition:
                    OpString = OpString+ " " + str(self.wordtoPosition[tok]) + ":1" #+ str(1.0 / self.uniqPOSHash[tok])
return OpString 
```

And the data looks like

```
1981:1 503:1 21:1 58:1 159:1 1:1 87:1 412:1 105:1 478:1 1154:1 1023:1 1192:1 53:1 37:1 36:1 598:1 19:1 4:1 162:1 14:1 131:1 2:1 489:1 411:1 3:1 165:1 370:1

-17:1 614:1 6:1 631:1 59:1 1:1 0:1 1183:1 10:1 22:1 15:1 67:1 55:1 3:1 175:1 9:1 43:1 866:1 48:1 30:1 0:1 484:1 2:1 1106:1 109:1 
```

Notice the extra newline between. Only happening at certain places.

repr(OpString) shows

```
'1981:1 503:1 21:1 58:1 159:1 1:1 87:1 412:1 105:1 478:1 1154:1 1023:1 1192:1 53:1 37:1 36:1 598:1 19:1 4:1 162:1 14:1 131:1 2:1 489:1 411:1 3:1 165:1 370:1'
'-17:1 614:1 6:1 631:1 59:1 1:1 0:1 1183:1 10:1 22:1 15:1 67:1 55:1 3:1 175:1 9:1 43:1 866:1 48:1 30:1 0:1 484:1 2:1 1106:1 109:1' 
```

Note. Removing "\n" will still add a line when I am writing to the file for certain lines. That is weird

Another Interesting Observation. In the above approach, I am reading from a file and writing into a different file. sO i have 2 file handles open. fr for file read and fw for file write. If I just have fr open, build the entire OpString variable, close fr and then write it using fw, I do not get weird new lines. Very interesting!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T21:35:14.930

我们真的必须看看你正在使用的*输入数据..与此同时，你能试试吗*

```
fw.write(Opstring.strip() + '\n') 
```

`strip()`在为`write`.

我怀疑至少你的一些`OpString`s 已经有一个尾随换行符。

这不是一种*修复*，而是一种*诊断*。一旦确定这是问题的根源，那么更好的方法是在原点/阅读时消除差事换行符。

*更新*：

更好的是，做一个

```
 Opstring = Opstring.strip() 
```

在您`if`根据@kindall 的有用评论输入 -statement之前

# c++ - Can a standard-compliant compiler reject code containing dynamic_cast downcast from non-polymorphic type?

> ID：11301514
> 
> 赞同：15
> 
> 时间：2012-07-02T21:33:48.943
> 
> 标签：c++, polymorphism, virtual, language-lawyer, dynamic-cast

This question is inspired by comments [here](https://stackoverflow.com/questions/11301161/is-it-ok-to-dynamic-cast-this-as-a-return-value).

Consider the following code snippet:

```
struct X {}; // no virtual members
struct Y : X {}; // may or may not have virtual members, doesn't matter

Y* func(X* x) { return dynamic_cast<Y*>(x); } 
```

Several people suggested that their compiler would reject the body of `func`.

However, it appears to me that whether this is defined by the Standard depends on the run-time value of `x`. From section 5.2.7 (`[expr.dynamic.cast]`):

> 1.  The result of the expression `dynamic_cast<T>(v)` is the result of converting the expression `v` to type `T`. `T` shall be a pointer or reference to a complete class type, or "pointer to *cv* `void`." The `dynamic_cast` operator shall not cast away constness.
>     
>     
> 2.  If `T` is a pointer type, `v` shall be a prvalue of a pointer to complete class type, and the result is a prvalue of type `T`. If `T` is an lvalue reference type, `v` shall be an lvalue of a complete class type, and the result is an lvalue of the type referred to by `T`. If `T` is an rvalue reference type, `v` shall be an expression having a complete class type, and the result is an xvalue of the type referred to by `T`.
>     
>     
> 3.  If the type of `v` is the same as `T`, or it is the same as `T` except that the class object type in `T` is more cv-qualified than the class object type in `v`, the result is `v` (converted if necessary).
>     
>     
> 4.  **If the value of `v` is a null pointer value in the pointer case, the result is the null pointer value of type `T`.**
>     
>     
> 5.  If T is "pointer to *cv1* `B`" and `v` has type 'pointer to *cv2* `D`" such that `B` is a base class of `D`, the result is a pointer to the unique `B` subobject of the `D` object pointed to by `v`. Similarly, if T is "reference to *cv1* `B`" and `v` has type *cv2* `D` such that `B` is a base class of `D`, the result is the unique `B` subobject of the `D` object referred to by `v`. The result is an lvalue if `T` is an lvalue reference, or an xvalue if `T` is an rvalue reference. In both the pointer and reference cases, the program is ill-formed if *cv2* has greater cv-qualification than *cv1* or if `B` is an inaccessible or ambiguous base class of `D`.
>     
>     
> 6.  **Otherwise, `v` shall be a pointer to or an lvalue of a polymorphic type.**
>     
>     
> 7.  If `T` is "pointer to *cv* `void`," then the result is a pointer to the most derived object pointed to by `v`. Otherwise, a run-time check is applied to see if the object pointed or referred to by `v` can be converted to the type pointed or referred to by `T`.) The most derived object pointed or referred to by `v` can contain other `B` objects as base classes, but these are ignored.
>     
>     
> 8.  If `C` is the class type to which `T` points or refers, the run-time check logically executes as follows:
>     
>     
>     *   If, in the most derived object pointed (referred) to by `v`, `v` points (refers) to a `public` base class subobject of a `C` object, and if only one object of type `C` is derived from the subobject pointed (referred) to by `v` the result points (refers) to that `C` object.
>         
>         
>     *   Otherwise, if `v` points (refers) to a `public` base class subobject of the most derived object, and the type of the most derived object has a base class, of type `C`, that is unambiguous and `public`, the result points (refers) to the `C` subobject of the most derived object.
>         
>         
>     *   Otherwise, the run-time check *fails*.
>         
>         
> 9.  The value of a failed cast to pointer type is the null pointer value of the required result type. A failed cast to reference type throws `std::bad_cast`.

The way I read this, the requirement of a polymorphic type only applies if none of the above conditions are met, and one of those conditions depends on the runtime value.

Of course, in a few cases the compiler can positively determine that the input cannot properly be NULL (for example, when it is the `this` pointer), but I still think the compiler cannot reject the code unless it can determine that the statement will be reached (normally a run-time question).

A warning diagnostic is of course valuable here, but is it Standard-compliant for the compiler to reject this code with an error?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T21:46:01.220

一个很好的观点。

注意C++03中5.2.7/3和5.2.7/4的写法如下

> **3**如果**v**的类型与所需的结果类型相同（为方便起见，在本说明中将其称为**R**），或者它与**R相同，只是****R**中的类对象类型比**v**中的类对象类型，结果为**v**（必要时进行转换）。
> 
> **4**如果在指针情况下**v**的值是空指针值，则结果是**R**类型的空指针值。

对 5.2.7/3 中引入的类型的引用`R`似乎暗示 5.2.7/4 旨在成为 5.2.7/3 的子条款。换句话说，似乎 5.2.7/4 仅适用于 5.2.7/3 中描述的条件，即类型相同时。

但是，C++11 中的措辞不同，不再涉及`R`，这不再暗示 5.2.7/3 和 5.2.7/4 之间有任何特殊关系。不知道是不是故意改的。。。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T21:58:01.960

我相信该措辞的意图是一些转换可以在编译时完成，例如向上转换或`dynamic_cast<Y*>((X*)0)`，但其他转换需要运行时检查（在这种情况下需要多态类型。）

如果您的代码片段格式正确，则需要运行时检查以查看它是否为空指针值，这与运行时检查只应针对多态情况发生的想法相矛盾。

请参阅[DR 665](http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_defects.html#665)，其中阐明了某些强制转换在编译时格式错误，而不是推迟到运行时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T23:29:21.963

对我来说，这似乎很明确。我认为当您错误地解释需求枚举是“else if .. else if ..”类型的事情时，就会出现混淆。

第 (1) 点和 (2) 点仅根据 cv-qualification 和 lvalue-rvalue-prvalue-- 等定义了允许的静态输入和输出类型。所以这很简单，适用于所有情况。

第 (3) 点非常清楚，如果输入和输出类型相同（除了添加 cv 限定符），那么转换是微不足道的（没有，或者只是添加了 cv 限定符）。

第（4）点明确要求如果输入指针为空，则输出指针也为空。这一点需要作为一个要求提出，而不是拒绝或接受强制转换（通过静态分析），而是强调一个事实，即如果从输入指针到输出指针的转换通常需要偏移到实际的指针值（因为它可以，在多继承类层次结构下），那么如果输入指针为空，则不得应用该偏移量，以保持指针的“空性”。这只是意味着在执行动态转换时，会检查指针是否为空，如果为空，则结果指针也必须具有空值。

第 (5) 点简单地指出，如果它是向上转型（从派生到基础），则转型是静态解决的（相当于`static_cast<T>(v)`）。这主要是为了处理向上转换格式良好的情况（如脚注所示），但是如果要转到 v 指向的最衍生对象，则可能存在格式错误的转换（例如，如果 v 实际指向具有多个基类的派生对象，其中类 T 出现不止一次）。换句话说，这意味着，如果它是向上转换的，那么就静态地进行，没有运行时机制（因此，避免了不应该发生的潜在故障）。在这种情况下，编译器应该拒绝强制转换，就像它是`static_cast<T>(v)`.

在第（6）点中，显然，“否则”直接指第（5）点（当然也指第（3）点的微不足道的情况）。含义（连同第（7）点），如果演员表不是向上转换（而不是身份转换（第（3）点）），那么它是向下转换，应该在运行时解决，明确要求（v的）类型是多态类型（具有虚函数）。

您的代码应该被符合标准的编译器拒绝。对我来说，毫无疑问。因为，强制转换是向下强制转换，并且 v 的类型不是多态的。它不符合标准规定的要求。空指针子句（第 (4) 点）实际上与它是否被接受的代码无关，它只与在强制转换中保留空指针值有关（否则，某些实现可能会使 (愚蠢) 选择仍然应用强制转换的指针偏移量，即使值为 null)。

当然，当基类型不是多态时，他们可以做出不同的选择，并允许转换表现为从基到派生的静态转换（即，没有运行时检查），但我认为这会中断动态转换的语义，这显然是在说“我想要对这个转换进行运行时检查”，否则你不会使用动态转换！

# php - PHP header not redirecting, but there is no output in front of it

> ID：11301515
> 
> 赞同：0
> 
> 时间：2012-07-02T21:33:56.237
> 
> 标签：php, mysql, forms, redirect, header

I have a php page that allows the user to input some data, and tries to put them into a database. However, my header is not working. It runs the query, but stops at the header, and displays a blank page. Can someone help me out?

```
<?php   
if(isset($_POST['submit'])) {
    $user_id = $_POST['user_id'];
    $user_vcode = $_POST['user_vcode'];
    $send_data = true;

    if(empty($user_id) || empty($user_vcode)){
        $send_data = false;
    }

    if($send_data){
        require("../../db.php");
        $account_id = $_COOKIE['account_id'];
        $query = "INSERT INTO api (key_id, key_vcode, owner_id) VALUES ('$user_id', '$user_vcode', '$account_id')";
        $result = mysqli_query($dbc, $query) or die("Failed querying database");
        mysqli_close($dbc);
        header("Location: http://www.google.com");
        die();
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T23:27:11.977

文件末尾的空格可能会很痛苦。检查最后一个标签后是否有任何尾随回车或空格`?>`。

# nginx - Nginx server_name 不适用于重写子目录。

> ID：11301521
> 
> 赞同：0
> 
> 时间：2012-07-02T21:34:37.450
> 
> 标签：nginx, dns, rewrite, server-name

我正在尝试使用 nginx 将我的主页（www.domain.com）重定向到子目录（www.domain.com/store）。我有重定向工作，但每当我使用域名时，它都会将我重定向到 IP 地址（www.IP.com/store）。这是我的服务器 nginx 配置。预先感谢您的任何帮助！

```
 server {
    listen       80 default_server;
    server_name *.domain.com;

    location  / {
        index  index.php index.html index.htm;
    }
    location = / {
        rewrite ^/store permanent;
    }

    root   /usr/local/www/nginx; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T23:50:32.987

你错过了一个空间。 `rewrite ^/store permanent;`将尝试在 uri 路径的开头匹配“/store”（感谢 ^），如果匹配，它将重写为“永久”。由于这是 inside `location = /`，它永远不会成功。相反，您需要：

```
rewrite ^ /store permanent; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T17:42:10.387

嗯，我不能把这个放在你的帖子里，所以我想我应该把它放在这里。这是stackoverflow的好习惯吗？我尝试了“curl -l”，它只是返回了没有重定向时得到的“未找到”。但我使用了“curl -liL domain.com”，结果就是这样。

```
HTTP/1.1 301 Moved Permanently
Server: nginx/1.2.1
Date: Thu, 05 Jul 2012 17:30:01 GMT
Content-Type: text/html
Content-Length: 184
Location: http://domain.com/store
Connection: keep-alive

HTTP/1.1 301 Moved Permanently
Server: nginx/1.2.1
Date: Thu, 05 Jul 2012 17:30:01 GMT
Content-Type: text/html
Content-Length: 184
Location: http://domain.com/store/
Connection: keep-alive

HTTP/1.1 301 Moved Permanently
Server: nginx/1.2.1
Date: Thu, 05 Jul 2012 17:30:01 GMT
Content-Type: text/html
Transfer-Encoding: chunked
Connection: keep-alive
X-Powered-By: PHP/5.4.4
Expires: Mon, 26 Jul 1997 05:00:00 GMT
Last-Modified: Thu, 05 Jul 2012 17:30:01 GMT
Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Pragma: no-cache
P3P: CP="NON CURa ADMa DEVa TAIa CONi OUR DELa BUS IND PHY ONL UNI PUR COM NAV DEM STA"
Set-Cookie: xid_1f463=9cc017ff6c74884850d5bdfba1bfd5ae; path=/store; domain=IP; httponly
Location: http://IP/store/?xid_1f463=9cc017ff6c74884850d5bdfba1bfd5ae

HTTP/1.1 302 Found
Server: nginx/1.2.1
Date: Thu, 05 Jul 2012 17:30:01 GMT
Content-Type: text/html
Transfer-Encoding: chunked
Connection: keep-alive
X-Powered-By: PHP/5.4.4
Expires: Mon, 26 Jul 1997 05:00:00 GMT
Last-Modified: Thu, 05 Jul 2012 17:30:01 GMT
Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Pragma: no-cache
P3P: CP="NON CURa ADMa DEVa TAIa CONi OUR DELa BUS IND PHY ONL UNI PUR COM NAV DEM STA"
Set-Cookie: xid_1f463=9cc017ff6c74884850d5bdfba1bfd5ae; path=/store; domain=IP; httponly
Location: http://IP/store/?xid_1f463=9cc017ff6c74884850d5bdfba1bfd5ae

HTTP/1.1 301 Moved Permanently
Server: nginx/1.2.1
Date: Thu, 05 Jul 2012 17:30:01 GMT
Content-Type: text/html
Transfer-Encoding: chunked
Connection: keep-alive
X-Powered-By: PHP/5.4.4
Expires: Mon, 26 Jul 1997 05:00:00 GMT
Last-Modified: Thu, 05 Jul 2012 17:30:01 GMT
Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Pragma: no-cache
P3P: CP="NON CURa ADMa DEVa TAIa CONi OUR DELa BUS IND PHY ONL UNI PUR COM NAV DEM STA"
Set-Cookie: xid_1f463=9cc017ff6c74884850d5bdfba1bfd5ae; path=/store; domain=IP; httponly
Location: /store/home.php

HTTP/1.1 200 OK
Server: nginx/1.2.1
Date: Thu, 05 Jul 2012 17:30:02 GMT
Content-Type: text/html; charset=UTF-8
Transfer-Encoding: chunked
Connection: keep-alive
X-Powered-By: PHP/5.4.4
Expires: Mon, 26 Jul 1997 05:00:00 GMT
Last-Modified: Thu, 05 Jul 2012 17:30:01 GMT
Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Pragma: no-cache
P3P: CP="NON CURa ADMa DEVa TAIa CONi OUR DELa BUS IND PHY ONL UNI PUR COM NAV DEM STA"
Set-Cookie: xid_1f463=e7d9abf146153d7a49e3f08bda47c008; path=/store; domain=IP; httponly
Set-Cookie: RefererCookie=deleted; expires=Thu, 01-Jan-1970 00:00:01 GMT; path=/store; domain=IP; httponly
Set-Cookie: store_language=en; expires=Fri, 05-Jul-2013 17:30:01 GMT; path=/store; domain=IP 
```

# java - 使用带有签名、加密和编码的 JAXB

> ID：11301522
> 
> 赞同：6
> 
> 时间：2012-07-02T21:34:38.617
> 
> 标签：java, xml, jaxb, pki

最近，我们的任务是为我们的产品制定 XML 通信规范。我的一些同事对 JAXB 用于编组和解组 XML 文档有很高的评价。我花了一些时间玩弄它，我明白它们来自哪里。它使简单的 XML 文档变得简单。

现在把它提升一个档次。我希望在我们的通信模型中为在我之后使用它的人“内置”签名验证中看到的一件事。我遇到的一个问题是，要验证签名，我需要将相应的 XML 视为字节。所以让我们举这个例子......

```
<topLevel>
    <sensitiveData encoding="UTF8">
        <creditCard>
            <number>1234-1234-1234-1234</number>
            <expDate>Oct 2020</expDate>
        </creditCard>
    </sensitiveData>
    <signatureOfSensitiveData algorithm="SHA1WithRSA">VGhpc0lzQVNpZ25hdHVyZQ==</signatureOfSensitiveData>
</topLevel> 
```

编辑：我实际上并没有传递信用卡数据。这里只是一个例子。

如果我能获得`byte[]`“sensitiveData”标签内所有内容的（由编码确定）表示，那就太好了。我什至不介意为此再次调用“unmarshall” `byte[]`。

这也为我们打开了其他大门。我们实际上可以在元素中引入“压缩”和“加密”属性。如果我们可以将它们视为一个`byte[]`，我们就可以对它们进行膨胀和解密，然后将它们传递给再次解组。

旁注：我认为如果您对 XML 进行 base64 编码然后将其包含在一个元素中，这将有效。但这会迫使我们对甚至简单的文档进行 base64 处理，并在我们的消息中引入一些不必要的膨胀。

有什么解决方案的想法吗？我希望我只是缺少 JAXB 中的一些基本内容，并且在我得到它之后会轻而易举。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-02-17T18:56:12.380

您可以使用支持 WS-Security 的 JAX-WS 框架。JAX-WS 依赖于 JAXB，但增加了支持 SOAP 协议的通信部分，WS-Security 是 SOAP/XML 中 XML 签名、加密和其他安全特性的标准。WS-Security 依赖于评论中提到的 XML 签名和加密标准。

此类框架的示例（非详尽列表）：Apache CXF、Glassfish Metro 等。[更多信息](https://en.wikipedia.org/wiki/List_of_web_service_frameworks)。

# php - 将 javascript 值传输到 php 变量

> ID：11301530
> 
> 赞同：2
> 
> 时间：2012-07-02T21:35:16.367
> 
> 标签：php, javascript, jquery, codeigniter

将以下输出值转换为 php 变量的最佳方法是什么？

```
$(document).getUrlParam("id"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T21:37:28.823

通过一个ajax帖子。

```
$.ajax({
 type: 'POST',
 url: url,
 data: data,
 success: success,
 dataType: dataType
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T21:37:31.097

您应该使用 JSON 格式从 javascript 到 PHP 发送和接收数据。例如

```
 function sendData(){

  //with jquery, you can use `.post()`, `.get()` or for more control `.ajax()`
  $.post(
      //URL to send the data
       url,
      //data being sent, transformed to JSON
      {dataSent: JSON.stringify(clientSideData)},
      //Do something after sendind the data to server
      function(dataReceived){
         //transform data from json format to javascript object
         var dataLog = jQuery.parseJSON(dataReceived);

         //Do stuff

      }
   )
  } 
```

PHP：

```
 //Receive data from POST
 var phpVar = json_decode($_POST['dataSent'])

 //send data back to javascript
 echo json_encode(phpVar) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T23:25:47.997

虽然所有这些答案都会将 javascript 的价值转化为 PHP 脚本，但我想知道您是否需要 javascript。

从我从简短的谷歌中可以看出，getUrlParam 插件对于获取然后分解 URL 很有用。您是否查看过[$_SERVER](http://www.php.net/manual/en/reserved.variables.server.php)提供的变量？我相信你能在那里找到合适的东西。

# php - 如何在 jquery tmpl 中操作模板内的 html 标签？

> ID：11301535
> 
> 赞同：0
> 
> 时间：2012-07-02T21:35:33.857
> 
> 标签：php, jquery, jquery-plugins

我有一个问题，我无法从 jquery 模板外部访问以操作 html 代码。这是结果：[]

我有这个模板：

```
<script id="tmpl" type="text/x-jquery-tmpl">
<select id="country">
<?php
$query = 'SELECT country_id, country_name FROM countries';
$results = $wpdb->get_results($query, OBJECT);
foreach($results as $result)
{
echo '<option value="'.$result->country_id.'">'.$result->country_name.'</option>';
}
?>
</select>
<span value="${countryHelpers(user.country)}" />
</script> 
```

在模板之外我有这段代码 javascript

```
<script type="text/javascript">
function countryHelpers(country) 
{
$("#country option[value='"+country+"']").attr("selected",function(){return "selected";});
} 
```

我如何将 attr “选中”

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T21:42:53.453

你可以试试这个：

```
function countryHelpers(country) 
{
    $("#country option").filter(function() {
      return $(this).text() === country
    }).attr('selected', true);
} 
```

编辑：有一个类似的问题：[在基于节点值的下拉菜单中选择一个选项？](https://stackoverflow.com/questions/3110994/selecting-an-option-in-a-dropdown-menu-based-on-node-value)

# regex - 涉及 unicode 的 Django 正则表达式混淆

> ID：11301541
> 
> 赞同：0
> 
> 时间：2012-07-02T21:36:03.163
> 
> 标签：regex, django, beautifulsoup

我们正在尝试通过 Django 使用 BeautifulSoup 进行一些文本提取。我们有一个奇怪的错误，我们已经追溯到以下我们不理解的错误。

如果我们在标准 Python 提示符下发出以下命令：

```
import re
print re.match("&#([0-9]+)[^0-9]","&#x00bb;") 
```

`None`正如预期的那样，我们得到 的输出。但是，当我们将此代码放入 sgmllib.py（Django 最终通过我们的网站通过一长串调用调用）时，Python*确实*成功地匹配了它，并返回了一个对象。在我们看来，好像 Django 以某种方式忽略`x`了上面的字符串。我认为这必须与 unicode 设置有关，等等，但我们似乎无法弄清楚为什么 Django 的运行方式与我们自己在普通 Python 2.6 会话中运行此代码时不同。

为什么上面的正则表达式在正常运行时*不*匹配，但在 Django 尝试时匹配？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T09:24:03.973

'x' 是您正在测试的字符串的一部分。如果您不在正则表达式中考虑它，那么它将不匹配。Python 工作正常。如果 Django 的行为不同，我会感到惊讶，但也许其他地方存在错误。如果添加 'x' 在 Django 中给你带来问题，你可以试试这个：

```
>>> rc = re.match("&#[xX]?([0-9]+)","&#x00bb;")
>>> rc.group(1)
'00' 
```

# php - 如何重定向到带有 $number 的链接

> ID：11301544
> 
> 赞同：-1
> 
> 时间：2012-07-02T21:36:08.227
> 
> 标签：php, redirect, header

我想重定向访问者如下

```
<?php

$page2_id = 2;          
header("Location:./index.php?page=$page2_id");

?> 
```

地址栏上的页面是正确的，但是页面没有出现，我收到了这个错误

> Firefox 检测到服务器正在以永远不会完成的方式重定向对该地址的请求。

以下重定向也不起作用！

```
<?php

header("Location:./index.php?page=26");

?> 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T21:38:15.840

尝试删除点后`Location:`

```
$page2_id = 2; 
header("Location:/index.php?page=$page2_id"); 
```

# listview - jQuery mobile：如何从列表视图加载详细信息页面

> ID：11301551
> 
> 赞同：0
> 
> 时间：2012-07-02T21:36:48.293
> 
> 标签：listview, jquery-mobile

我正在使用单页概念 jquery mobile。然后我像这样创建一个动态列表视图：

```
var resultitems = '<ul data-role="listview">';
for (i = 0; i < 10; i++) {
if (msg.hotspots[i] != null) {
resultitems += '<li><a href="acura.html"><img src="' + msg.hotspots[i].imageURL + '" />' + msg.hotspots[i].title + '</a></li>';
}
}
resultitems += '</ul>';
$('#results').html(resultitems);
$('#results').trigger("create"); 
```

如您所见，我现在有一个指向 acura.html 的超链接。但我想要的是激活一个子页面#detailpage 并在列表视图中加载单击项目的 Id 的详细信息。将项目ID添加到链接没有问题，我只是不知道链接应该是什么样的以及如何从页面#detailpage读取ID。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T21:43:51.870

您的要求基本上是如何在 jQuery mobile 中将数据数据从一个页面传递到另一个页面，在您的情况下，您想要做的基本上是附加项目的 id，然后在`acura.html`基于此的做某事的 pageshow 事件中。

这里已经有一些关于 SO 的问题可以解决这个问题（传递数据）例如，您可能想看看这个 [How to pass button text to another page?](https://stackoverflow.com/q/10702952/384985)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T19:06:15.373

我现在所做的不是通过 href 属性加载详细信息页面，而是通过超链接的 onclick 方法使用 javascript 更改 location.hash 值。这似乎可以确保目标详细信息页面始终可以读取实际的查询字符串参数。

# java - 处理：发送和接收自定义事件

> ID：11301554
> 
> 赞同：2
> 
> 时间：2012-07-02T21:37:04.347
> 
> 标签：java, events, processing

是否可以在类似于 as3 的处理中创建简单的自定义事件？

```
dispatch(new Event("HEY"));
myObject.addEventListener("HEY",callBack); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-04T11:36:33.727

不，您需要自己实现观察者模式。这是一个关于如何在 Java 中执行此操作的小示例：[Stackoverflow：在 Java 中创建自定义事件](https://stackoverflow.com/questions/6270132/create-a-custom-event-in-java)

# android - 四个按钮在屏幕区域居中

> ID：11301556
> 
> 赞同：2
> 
> 时间：2012-07-02T21:37:11.627
> 
> 标签：android, android-layout

我想做这样的事情：

*   按钮 1 居中在屏幕的左上角
*   右上角的按钮 2
*   左下角按钮 3
*   和右下角的三个或四个按钮。

我是新人所以不能发图。我尝试了不同的布局，但结果为零。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T21:45:47.383

你想要的是一个RelativeLayout：http: [//developer.android.com/reference/android/widget/RelativeLayout.html](http://developer.android.com/reference/android/widget/RelativeLayout.html)

类似于以下内容：

```
<RelativeLayout>
    <Button android:layout_alignParentTop="true" android:layout_alignParentLeft="true" />
    <Button android:layout_alignParentTop="true" android:layout_alignParentRight="true" />
    <Button android:layout_alignParentBottom="true" android:layout_alignParentLeft="true" />
</RelativeLayout> 
```

从那你应该能够弄清楚其余的。我建议阅读 RelativeLayout 及其对齐参数

编辑-在评论中解释后，尝试以下操作：

```
<LinearLayout android:orientation="vertical">
    <LinearLayout android:orientation="horizontal" android:layout_weight=".5">
        <LinearLayout android:layout_weight=".5">
            <Button android:layout_gravity="center" />
        </LinearLayout>
        <LinearLayout android:layout_weight=".5">
            <Button android:layout_gravity="center" />
        </LinearLayout>
    </LinearLayout> 
    <LinearLayout android:orientation="horizontal" android:layout_weight=".5">
        <LinearLayout android:layout_weight=".5">
            <Button android:layout_gravity="center" />
        </LinearLayout>
        <LinearLayout android:layout_weight=".5">
            <Button android:layout_gravity="center" />
        </LinearLayout>
    </LinearLayout>        
</LinearLayout> 
```

这将用 4 个相同大小的“块”填充您的屏幕，并在每个块的中心直接放置一个按钮。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T19:13:51.680

经过一些工作，我使用 TableLayout 和一些 LinearLayouts 完成了它。

```
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/TableLayout1"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:weightSum="4" >

<TableRow
    android:id="@+id/tableRow1"
    android:layout_width="0dip"
    android:layout_height="wrap_content"
    android:layout_weight="2"
    android:gravity="center" >

    <LinearLayout
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:gravity="center"
        android:orientation="vertical" >

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Button 1" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:gravity="center"
        android:orientation="vertical" >

        <Button
            android:id="@+id/button2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Button 2" />
    </LinearLayout>
</TableRow>

<TableRow
    android:id="@+id/tableRow2"
    android:layout_width="0dip"
    android:layout_height="wrap_content"
    android:layout_weight="2"
    android:gravity="center" >

    <LinearLayout
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:gravity="center"
        android:orientation="vertical" >

        <Button
            android:id="@+id/button3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Button 3" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="1.0"
        android:gravity="center"
        android:orientation="vertical" >

        <Button
            android:id="@+id/button4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Button 4" />
    </LinearLayout>
</TableRow> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T21:46:02.213

5分钟前有一个关于这个的问题。

[如何在 android 布局上正确分配 4 个按钮](https://stackoverflow.com/questions/11301319/how-to-properly-distribute-4-buttons-on-an-android-layout)

我不想粗鲁，但你应该更加努力。

# c# - DataGridView 自定义排序 - 如何比较数据类型？

> ID：11301559
> 
> 赞同：0
> 
> 时间：2012-07-02T21:37:22.647
> 
> 标签：c#, .net, .net-3.5, datagridview

我有一个 DataGridView，我需要使用自定义排序器（派生自 System.Collections.IComparer）。那工作得很好，但我注意到我的比较并没有完全正确，因为它最终会对单元格进行字符串比较，而不管它们的底层数据类型如何。(所以, 1, 10, 2) 而不是 (1, 2, 10)。

如何编写一个比较函数来适当地比较列而不考虑它们的数据类型？

```
public int compare(object x, object y)
{
    DataGridViewRow dr1 = (DataGridViewRow)x;
    DataGridViewRow dr2 = (DataGridViewRow)y;

    object cell1 = dr1.Cells["SomeName"].Value;
    object cell2 = dr2.Cells["SomeName"].Value;

    //Compare cell1 and cell 2 based on the data type in
    //dr1.Cells["SomeName"].ValueType.
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T01:28:36.007

对于这个问题的任何解决方案，似乎都有几个基本部分。

1.  确保您正在比较相似的类型。
2.  确保您可以比较该类型的实例。

这里有一些想法可以帮助您入门。为了清楚起见，我省略了一些错误检查。

认为：

```
Type type1 = dr1.Cells["SomeName"].ValueType;
Type type2 = dr2.Cells["SomeName"].ValueType; 
```

然后看看你是否可以将一个值强制转换为另一个类型：

```
if (type1 != type2)
{
    TypeConverter tc1 = TypeDescriptor.GetConverter(type1);
    TypeConverter tc2 = TypeDescriptor.GetConverter(type2);

    if (tc1.CanConvertFrom(type2))
    {
        cell2 = tc1.ConvertFrom(cell2);
        type2 = type1;
    }
    else if (tc1.CanConvertTo(type2))
    { 
        cell1 = tc1.ConvertTo(cell1, type2);
        type1 = type2;
    }
    else if (tc2.CanConvertFrom(type1))
    {
        cell1 = tc2.ConvertFrom(cell1);
        type1 = type2;
    }
    else if (tc2.CanConvertTo(type1))
    { 
        cell2 = tc2.ConvertTo(cell2, type1);
        type2 = type1;
    }
    else // fallback to string comparison
    {
        cell1 = tc1.ConvertToString(cell1);        
        type1 = cell1.GetType();

        cell2 = tc2.ConvertToString(cell2);        
        type2 = cell2.GetType();
    }
    // cell1 and cell2 should be the same type now
} 
```

现在您有了类似类型的实例，您需要找到一种方法来比较它们。

如果您使用的是 C# 4，那么 dynamic 关键字可能是您的朋友：

```
dynamic c1 = cell1;
try 
{
    int compareResult = c1.CompareTo(cell2);
}
catch(Exception)
{
    // type1 doesn't implement an IComparable-like interface
} 
```

如果您不使用 C# 4，您可以查看这些值是否实现`IComparable`：

```
if (cell1 is IComparable)
{
   int compareResult = ((IComparable)cell1).CompareTo(cell2);
} 
```

或者它实现了一个泛型`IComparable<T>`，在这种情况下可能需要使用一些反射技巧：

```
Type genericComparableType = typeof(IComparable<>);
Type typedComparableType = genericComparableType.MakeGenericType(new Type[] { type1 });
if (typedComparableType.IsInstanceOfType(cell1))
{
    MethodInfo compareTo = typedComparableType.GetMethod("CompareTo", new Type[] { type1 });
    int compareResult = (int)compareTo.Invoke(cell1, new object[] { cell2 });
} 
```

最后，您可以`Comparer<T>.Default`再次使用一些反射来查看是否可行：

```
Type genericComparerType = typeof(Comparer<>);
Type typedComparerType = genericComparerType.MakeGenericType(new Type[] { type1 });
PropertyInfo defaultProperty = typedComparerType.GetProperty("Default", BindingFlags.Static | BindingFlags.Public);

object defaultComparer = defaultProperty.GetValue(null, null);
MethodInfo compare = defaultComparer.GetType().GetMethod("Compare", new Type[] { type1, type1 });
int compareResult = (int)compare.Invoke(defaultComparer, new object[] { cell1, cell2 }); 
```

如果这些都不起作用，那么您将不得不回退到字符串比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T00:27:16.333

转换为适当的类型

```
Int32 i1 = Int32.Parse(cell1.Tostring());

Int32 i2 = Int32.Parse(cell2.Tostring());

return i1.Compare(i2); 
```

# objective-c - UIImage 到 CIImage - 大小减半？

> ID：11301560
> 
> 赞同：13
> 
> 时间：2012-07-02T21:37:25.993
> 
> 标签：objective-c, ios, xcode, uiimage, core-image

我正在从 UIImage 创建一个 CIImage，如下所示：

```
CIImage* someCIImage = [CIImage imageWithCGImage:someUIImage.CGImage]; 
```

`someCIImage.extent.size.width/height`与比较`someUIImage.size.width/height`，我发现有时 CIImage 的尺寸是双倍大小，有时它与 UIImage 的大小相同。

看起来如果 UIImage 稍大，CIImage 的大小是两倍，而如果 UIImage 稍小，情况并非如此。

有没有人见过这个/知道这是为什么？当我试图从加载的 UIImage 中绘制 CIImage 时，这给我带来了真正的麻烦。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-08-24T22:33:20.280

`size`与显示器上点之间的距离有关，因此视网膜显示器上的点数增加了一倍。`size`不代表您假设**的**像素数。

# javascript - 提交表格到其他页面

> ID：11301564
> 
> 赞同：0
> 
> 时间：2012-07-02T21:37:35.110
> 
> 标签：javascript, jquery, forms

我需要帮助将数据表单#send_form 提交到另一个页面中的#f_from。

```
<script type="text/javascript">
function post_form() {
    $('#send_form').action = "form01.html";
    $('#send_form').submit();
    return false;    
}
</script>

<form id='send_form' action='form01.html' method='POST' onsubmit="post_form();">
<input type="text" name="f_in01" value="User" />
<input type="text" name="f_in02" value="12345" />
<input type="submit" />
</form> 
```

form01.html

```
<script type="text/javascript">
function f_res()
{
    var res01=document.f_form.f_in01.value;
    var res02=document.f_form.f_in02.value;
    var result = res01 + " " + res02;
    document.f_form.f_out01.value=result;
}
</script>

<form id="f_form" onSubmit="f_res();return false;">
<input type="text" name="f_in01" /><br>
<input type="text" name="f_in02" /><br>
<br>
<input type="submit" onClick="f_res();" value="Enter w/Sub" /><br>
<input type="text" name="f_out01" />
</form> 
```

现在它不起作用。数据未在 page01.html 中发布

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T22:07:02.943

Amin is right, but in jQuery, when an event handler returns false, it amounts to the same as `e.preventDefault(); e.stopPropagation()`. Essentially, you cancel the event. Try returning true, instead of false.

If you don't want the page to change, you'll have to look at AJAX to post the form data.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T22:28:31.040

您需要 AJAX 来解决这个问题，例如：

```
 $('#button').click(function(){
    $.ajax({
    type:"POST", //php method
    url:'process.php',//where to send data...
    cache:'false',//IE FIX
    data: data, //what will data contain (no SHIT Sherloc...)

    //check is data sent successfuly to process.php
    //success:function(response){
    //alert(response)
    //}

    success: function(){ //on success do something...

    $('.success').delay(2000).fadeIn(1000);

    //alert('THX for your mail!');
    } //end sucess 
    }).error(function(){ //if sucess FAILS!!
    alert('An error occured!!');
    $('.thx').hide();
    });
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T21:40:43.777

你有没有尝试过

```
$('#send_form').attr('action', "form01.html"); 
```

代替

```
$('#send_form').action = "form01.html"; 
```

看看[这个小提琴](http://jsfiddle.net/gaURk/)

# sql-server - 检索“包含”其他行的行？

> ID：11301566
> 
> 赞同：0
> 
> 时间：2012-07-02T21:37:53.543
> 
> 标签：sql-server, entity-framework, c#-4.0, stored-procedures, ef-code-first

我是动手设计数据库的新手，我不想先使用 Linq to Entities 代码等新功能，而是自己实现较低级别的东西。

如果我有一个类 Foo，它可以包含任何其他数量的 Foo，它可能看起来像这样：

```
class Foo
{
  int FooId;
  List<Foo> containedFoos;

...
} 
```

假设 Foo 表看起来像

```
FooId, FooName, ContainingFooId (Foreign key to same table) 
```

如果我首先使用代码并检索我所有的 Foos，它们的 containsFoos 列表将自动为我填充。

我的问题是，这是否在应用程序方面完成（只需直接`select`从 Foo 表中执行，并在 C# 中编写逻辑以构造 Foo，找到所有包含的Foo，构建列表等）

或者，SQL Server 有没有办法以更有用的方式返回数据？例如以某种方式将每个 Foo 及其包含的项目一起返回？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T07:58:58.567

不，SQL Server 不会返回这样的数据。您必须创建对象并手动填充它们以模仿 Code First 填充对象的方式。

仅这个原因就使 EF 从项目开始就非常有吸引力（对我而言）。它节省了大量时间。

# php - 查找逗号分隔的关键字列表

> ID：11301572
> 
> 赞同：1
> 
> 时间：2012-07-02T21:38:36.233
> 
> 标签：php, mysql, sql

当我运行我的代码时，我无法检索我所定位的条目，因为通过查询运行的关键字与数据库中的关键字不同。

关键词：

```
$keywords = 'spaghetti,macaroni,hamburger'; 
```

询问：

```
mysql_query("SELECT * FROM ---- WHERE keywords LIKE '%$keywords%' ORDER BY id DESC LIMIT 1"); 
```

我的目标是使用这些关键字的条目：

```
food, restaurant, hamburger, spaghetti, taco,pie 
```

因为我已经连续工作了 12 个小时，所以我可能在这里遗漏了一些简单的东西。但是，我为解决此问题而尝试做的任何事情都没有运气。

从我的角度来看，查询应该返回目标条目，因为有 2 个匹配的关键字。

我应该做些什么不同的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T21:39:41.990

您需要分解关键字并对`LIKE`每个关键字进行单独比较

```
SELECT * FROM mytable
WHERE keywords LIKE '%spaghetti%' OR keywords LIKE '%macaroni%'
-- ... 
```

你可以做这样的事情

```
<?php

$keywords = 'spaghetti,macaroni,hamburger';

$query = "SELECT * FROM mytable WHERE 1=1";

$keywords = explode(',', $keywords);

if (count($keywords)) {
    $query .= sprintf(
        " AND (%s)",
        implode(' OR ', array_map(function($word){
            return "keywords LIKE '%{$word}%'";
        }, $keywords))
    );
}

echo $query;

// SELECT * FROM mytable WHERE 1=1 AND (keywords LIKE '%spaghetti%' OR keywords LIKE '%macaroni%' OR keywords LIKE '%hamburger%') 
```

* * *

正如您从评论中看到的那样，有更好的方法来处理这个问题，但我假设这个基本问题正在寻找一个简单的答案。

我没有进行任何输入清理，也没有添加任何其他故障保险。像这样构建查询不是很可靠，您应该继续学习 PHP/MySQL 以避免将来出现常见的陷阱。但是，我相信目前更高级的方法有点遥不可及。如果其他人想提供他们认为 OP 可以掌握的更好技术，无论如何，去吧:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T21:47:02.043

```
$like = array();
$keywords = explode(',' , $keywords);
foreach($keywords as $keyword) {
  $like[] = "`keywords` LIKE '%$keyword%'";
}
$like = implode(' OR ', $like);
$query = "SELECT * FROM `table` WHERE $like ORDER BY id DESC LIMIT 1"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-02T21:52:50.913

将多个值作为 CSV 存储在列中是一种常见的 SQL 反模式。它很难使用，甚至更难优化：

[如何修复 Doom 的逗号分隔列表](http://gtowey.blogspot.com/2009/12/how-to-fix-comma-separated-list-of-doom.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-02T21:43:43.777

试试这个，它可能比使用多个`or`子句更快

```
Select * from mytable
where keywords REGEXP 'spaghetti|macaroni|hamburger' 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-02T21:46:30.827

你必须使用`LIKE`分离的作品，你可以试试这个：

```
$keywords = 'spaghetti,macaroni,hamburger';

$arrayWords = explode(',', $keywords);

$like = '';

foreach($arrayWords as $word)
    $like .= empty($like) ? " keywords LIKE '%$word%' " : " OR keywords LIKE '%$word%' ";

mysql_query("SELECT * FROM ---- WHERE $like ORDER BY id DESC LIMIT 1"); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-02T21:46:38.690

```
mysql_query("SELECT * FROM ---- WHERE keywords LIKE '%". implode("%' OR keywords LIKE '%", explode(",", $keywords)) ."%' ORDER BY id DESC LIMIT 1"); 
```

# c# - RoutedEventHandler 未正确添加到指定元素

> ID：11301575
> 
> 赞同：2
> 
> 时间：2012-07-02T21:39:23.653
> 
> 标签：c#, wpf, routed-events

我正在尝试使用以下代码行添加`RoutedEventHandler`到所有`TextBoxes`直通代码：

```
this.AddHandler(TextBox.GotFocusEvent, new RoutedEventHandler(textBox_GotFocus)); 
```

上面的代码将处理程序绑定到 Window 上的所有表单控件，而不是单独的 TextBoxes。请问有人可以

1.  解释为什么会这样
2.  以及如何正确地做。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T23:10:29.100

可能不完全是您所追求的，因为它仍会在每个 UIElement 上触发。但是，您可以执行以下操作以获得所需的“最终结果”。

```
 public void textBox_GotFocus(object sender, RoutedEventArgs e)
    {
        var textBox = e.Source as TextBox;

        if (textBox == null)
            return;

        //what ever you wanted to do
    } 
```

# netbeans - 如何在没有来自 JDE 数据库的主键表的情况下在 netbeans 中创建实体表？

> ID：11301583
> 
> 赞同：1
> 
> 时间：2012-07-02T21:40:11.333
> 
> 标签：netbeans, primary-key, entities, jdedwards

我们在 AS400 DB2 数据库上有一个 JDE (JD Edwards) 系统。有一个 Showcase 服务器运行查询以创建多个表 (.dbf)。这些查询在白天和晚上的不同时间运行，以生成包含来自 JD Edwards 的最新信息的表格，并将生成的文件保存在多个文件夹中。此外，还有其他运行计划任务的服务器。这些计划任务也在白天和晚上的不同时间运行，以将数据从 Showcase 加载到 Oracle 数据库。因此，大约有 180 个任务日夜运行，以保持 Oracle 数据库的更新，从而在支持和监控系统方面付出了巨大的努力。最后还有一个 Netbeans 平台应用程序，它使用 Oracle 数据库向用户显示信息。现在，为了摆脱 Showcase 和 Scheduled 任务，我直接从 Netbeans 创建了到 JDE 数据库的连接。我的问题是：什么样的Netbeans应用项目最适合这个系统？我尝试创建一个 CRUD 表单 JSF，但 JDE 表没有主键，所以我无法从数据库创建实体类。

# jquery - jQuery如果每个都有值那么

> ID：11301585
> 
> 赞同：0
> 
> 时间：2012-07-02T21:40:23.383
> 
> 标签：jquery

我将如何编写它，以便如果跨度表示 Newbie，那么它是一种颜色，如果跨度表示 Club Staff，那么它有另一种颜色？

```
<span class="usertitle">Newbie</span>
<span class="usertitle">Club Staff</span>​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T21:42:55.617

你可以试试`:contains`选择器：

```
$(".usertitle:contains('Newbie')") 
```

或`each`方法：

```
$(".usertitle").each(function(){
 if ( $.trim($(this).text()) == 'Newbie' ) {
     // $(this).css('color', 'blue')
 }
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T21:45:08.753

```
$(document).ready(function() {
    $('.usertitle').each(function() {
        if ($(this).html() == "Newbie") $(this).css("color","blue");
        else if ($(this).html() == "Club Staff") $(this).css("color", "red");
    });
}); 
```

[http://jsfiddle.net/TgFfm/](http://jsfiddle.net/TgFfm/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T21:47:26.053

如果您真的想从内容中工作：

```
$(".usertitle").each(function() {
    var $this = $(this);
    var color;
    switch ($.trim($this.text())) {
        case "Newbie":
            color = "green"; // For instance
            break;
        case "Club Staff":
            color = "red";   // For instance
            break;
    }
    if (color) {
        $this.css("color", color);
    }
}); 
```

~~请注意使用`$.trim`，这里的其他答案奇怪地缺少它，因为您的标记可能在您的跨度中的单词的任一侧包含空格。~~您在编辑中更新的标记不会。但我仍然会使用`$.trim`，因为它成本不高，而且让事情变得不那么精致。

（或者，当然，而不是`css`, 使用`addClass`这样您就可以通过样式表控制演示文稿。）

但如果可能的话，我真的会尝试找到一种从内容以外的东西来工作的方法。

或者更紧凑和声明性的：

```
var colors = {
    "Newbie":     "green",
    "Club Staff": "red"
};

$(".usertitle").each(function() {
    var $this = $(this);
    var color = colors[$.trim($this.text())];
    if (color) {
        $this.css("color", color);
    }
}); 
```

同样，或者而不是`css`，使用`classes`表格而不是`colors`表格并使用`addClass`，因此您可以通过样式表控制表示，例如：

```
var classes = {
    "Newbie":     "newbie",
    "Club Staff": "club-staff"
};

$(".usertitle").each(function() {
    var $this = $(this);
    var cls = classes[$.trim($this.text())];
    if (cls) {
        $this.addClass(cls);
    }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-02T21:49:31.793

我会使用 CSS 类和`addClass()`

```
$('.usertitle').each(function(){
  var t = $(this),
      text = $.trim(t.text())
  t.addClass(
    text === 'Newbie' && 'green' ||
    text === 'Club Staff' && 'red' ||
    !text && 'default'
  )
}) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-02T21:50:49.277

**js区分大小写**：

```
$('span.usertitle:contains('Newbie')').addClass('newbieColor');
$('span.usertitle:contains('Club Staff')').addClass('clubStaffColor'); 
```

[**演示**](http://jsfiddle.net/ricardolohmann/bjkcj/)

**js不区分大小写**：

```
$('span.usertitle').html(function() {
    var text = $(this).text().toLowerCase();
    if(text === 'newbie') {
        $(this).addClass('newbieColor');
    } else if(text === 'club staff') {
        $(this).addClass('clubStaffColor');
    }
}); 
```

[**演示**](http://jsfiddle.net/ricardolohmann/bjkcj/1/)

**CSS**：

```
.newbieColor {
    color: yellow;
}

.clubStaffColor {
    color: red
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-02T21:43:06.730

```
$('.usertitle').each(function(){
  var text = $.trim($(this).text());
   if(text == "Newbie"){
     // one color
   }
   else if( text == "Club Staff"){
     // another color
   }
}); 
```

# android - 新的 NDK 插件有什么作用？

> ID：11301589
> 
> 赞同：3
> 
> 时间：2012-07-02T21:40:49.597
> 
> 标签：android, eclipse, android-ndk

我在 Eclipse 上安装了最后一个 ADT 版本，并且有一些 NDK 插件（https://dl-ssl.google.com/android/eclipse/）。有人知道是做什么的吗？它是否允许 Eclipse 编译本机代码？你如何使用它？我在那里找不到任何文档。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T21:21:35.853

NDK 是一个工具集，可让您使用 C 和 C++ 等语言的本机代码编写部分 android 应用程序。许多开发人员可能不需要它来进行 android 开发，但是，对于访问某些库和优化性能，它可能很有用。
[在此处查看描述：](http://developer.android.com/tools/sdk/ndk/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T04:42:30.963

[本页](http://tools.android.com/recent/usingthendkplugin)介绍如何使用 NDK 插件构建原生应用程序

# visual-studio-2010 - 如何下载 DB2 Data Server Provider 9.7 for .Net？

> ID：11301593
> 
> 赞同：3
> 
> 时间：2012-07-02T21:41:16.513
> 
> 标签：visual-studio-2010, entity-framework-4.1, db2, dataprovider

很长一段时间以来，我已经成功地将 Entity Framework 4.1 与我的 Sql Server 一起使用。

该公司现在正在与使用 DB2 iSeries 5.4 的公司集成。我需要弄清楚如何集成实体框架。

据我所知，我需要下载 DB Data Server Provider 9.7，然后应用最新的补丁才能使其与 VS2010 和 EF4 一起使用。

麻烦的是，我找不到任何地方下载 9.7！我可以找到 9.5 的下载区，但 9.7 没有。我现在已经搜索了 6 个小时。

谁能给我一个链接，我可以用它来下载我需要的东西来让它工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T14:57:49.627

您应该能够从[Data Server Client Packages by version](http://www-01.ibm.com/support/docview.wss?rs=4020&uid=swg27016878)页面获取它们。

# vim - Vim - 插件中“vim: fdm=syntax ...”行的含义

> ID：11301598
> 
> 赞同：1
> 
> 时间：2012-07-02T21:42:17.893
> 
> 标签：vim

我看到一些脚本包含以下行

```
vim: fdm=syntax:et:ts=4:sw=4:sts=4 
```

最初，我认为它在打开文件时会覆盖用户的现有设置。但是，当我在我的文件中使用包含它时，它并没有按我预期的方式工作。所以我现在想知道它到底是做什么的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T22:02:13.970

这就是所谓的模式行命令 ( `:help modeline`)。设置由冒号分隔。所以这是设置 fdm=syntax, et, ts=4, sw=4, and sts=4。`:help fdm`您可以通过键入,`:help et`等找出其中的每一个。

# android - 单击该项目时如何更改项目列表视图的文本视图颜色？

> ID：11301599
> 
> 赞同：0
> 
> 时间：2012-07-02T21:42:38.113
> 
> 标签：android, listview, onclick, textview

我有一个 ListView，每个项目都有一个 TextView。

我想更改项目 TextView 颜色，例如，当用户单击该项目时。

有什么想法、例子或教程吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T21:51:14.137

使用[状态列表](http://developer.android.com/guide/topics/resources/color-list-resource.html)。

例如，在您的可绘制文件夹中创建一个名为 bg_states.xml 的文件：

```
<?xml version="1.0" encoding="utf-8"?> 
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item
    android:state_selected="true"
   android:drawable="@color/blue" ></item>
<item
    android:state_pressed="true"
   android:drawable="@color/blue" ></item>
<item 
    android:drawable="@color/black" /> 
</selector> 
```

并将其定义为 TextView 的背景：

```
<TextView
   android:layout_width="wrap_content"
   android:layout_height="wrap_content"
   android:background="@drawable/bg_states" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T21:44:52.090

试试看

```
v.setBackgroundColor(R.Color.Red); 
```

在你的`onClick`方法中

# c - VS2012 上 getenv/putenv 的内存损坏

> ID：11301601
> 
> 赞同：0
> 
> 时间：2012-07-02T21:42:47.307
> 
> 标签：c, environment-variables, visual-studio-2012

尝试运行在 VS2012 中编译的以下代码时，我似乎遇到了内存损坏。

它在 VS2010 及以前的版本中运行良好：

```
char *var1 = getenv("var1");  // Value for var1 is correct here

char var2S[MAXSTRING];

sprintf(var2S, "VAR2=%s/a/%s/b", var1, getValue());  //Var2 looks correct

static const char *env_string = strdup(const_cast<char *>(var2S));

putenv((char *)env_string); // Value for var1 is corrupt after this call 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T05:38:50.350

`getenv()`返回指向环境的进程全局副本的指针。来自 MSDN：

> getenv 和 _putenv 使用全局变量 _environ 指向的环境副本来访问环境

所以`var1`点在那组数据中。一旦调用`putenv()`，该全局数据将被修改，并且`var1`指针指向已更改的内存。您需要将数据`var1`点复制到您自己的缓冲区中以修改环境，或`var1 = getenv("var1")`再次调用以“刷新”指针。

请注意，在[您的回答](https://stackoverflow.com/a/11301602/12711)中，您表示 using 可以`getenv_s()`为您解决问题。这是因为将环境字符串复制到您提供的缓冲区中，而不是返回一个可能会在以后更改的全局状态`getenv_s()`的指针。`_environ`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T21:42:47.760

对 getenv、putenv 或 strdup 的 [deprecated] 调用中的任何一个都存在问题。

更改为 getenv_s 和 putenv_s，消除了对 strdup 的需求并解决了问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T21:49:52.540

Hello getenv() 在静态内存上工作，2 个调用一个接一个覆盖第一个调用内存。因此在您自己分配的变量中检索结果：

```
char a[512];
char b[512];

strcpy(a, getenv("a"));
strcpy(b, getenv("b"));
printf("a=[%s]\n", a);
printf("b=[%s]\n", b); 
```

# activerecord - Rails 和 ActiveRecord 中的一个“有一个”子属性如何下单？

> ID：11301604
> 
> 赞同：0
> 
> 时间：2012-07-02T21:42:53.840
> 
> 标签：activerecord, ruby-on-rails-3.2

我正在尝试按组织主要地址的状态进行排序。

我有一个具有属性状态的地址模型

和一个拥有一个：main_address 的组织，如：：addressable，class_name：'Address'

所以我正在尝试做这样的事情（不工作）Organization.all.order_by(:main_address.state)

我无法弄清楚语法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T20:29:13.437

`Organization.joins(:main_address).order('addresses.state')`应该做你想做的。

# c# - 将控件添加到类并存储到会话不会检索所有控件属性

> ID：11301611
> 
> 赞同：0
> 
> 时间：2012-07-02T21:43:19.817
> 
> 标签：c#, asp.net

我动态创建了几个仪表控件，将它们存储到一个类中，然后将它们添加到列表和会话变量中以供稍后检索。当我尝试从会话状态加载仪表时，未设置某些控制属性，例如“gauge.Gauge.Value”引发了“System.NullReferenceException”类型的异常。我的课看起来像这样：

```
public BoldGauge(ASPxGaugeControl gauge, string gaugeValue, string gaugeDataType, float gaugeMinValue, float gaugeMaxValue)
    {
        Gauge = gauge; // new ASPxGaugeControl(); 
        GaugeValue = gaugeValue; 
        GaugeDataType = gaugeDataType; 
        GaugeMinValue = gaugeMinValue; 
        GaugeMaxValue = gaugeMaxValue; 
    }

    public ASPxGaugeControl Gauge { get; set; }
    public string GaugeValue { get; set; } 
    public string GaugeDataType { get; set; } 
    public float GaugeMinValue { get; set; }
    public float GaugeMaxValue { get; set; } 
} 
```

下面是我声明控件的方式，在底部，您可以看到我将它们添加到列表的位置、列表和会话。任何想法为什么会发生这种情况？我需要做一些特别的事情来在会话中存储控件吗？

```
ASPxDockPanel dockPanel = CreateDockPanel(layoutName, tableCellId, controlType, controlData, controlName);
            ASPxGaugeControl boldGaugeControl = new ASPxGaugeControl();

            string dockZonePanelId = "dockPanel" + tableCellId[tableCellId.Length - 1] + layoutName.Replace(".xml", "");
            //boldGaugeControl.ID = "gaugeControl" + dockZonePanelId;

            boldGaugeControl.ID = "gaugeControl" +gaugeVal; 
            boldGaugeControl.ClientInstanceName = "gaugeControl" +gaugeVal; // +gaugeVal;// dockZonePanelId  + layoutName.Replace(".xml", "");
            boldGaugeControl.EnableClientSideAPI = true;

            // Creates a new instance of the CircularGauge class and adds it
            // to the gauge control's Gauges collection.
            CircularGauge circularGauge = (CircularGauge)boldGaugeControl.AddGauge(GaugeType.Circular);

            // Adds the default elements (a scale, background layer, needle and spindle cap).
            circularGauge.AddDefaultElements();

            // Changes the background layer's paint style.
            ArcScaleBackgroundLayer background = circularGauge.BackgroundLayers[0];
            background.ShapeType = BackgroundLayerShapeType.CircularFull_Style2;

            // Customizes the scale's settings.
            ArcScaleComponent scale = circularGauge.Scales[0];
            scale.MinValue = minimumGaugeValue;
            scale.MaxValue = maximumGaugeValue;
            scale.Value = value;
            scale.MajorTickCount = 6;
            scale.MajorTickmark.FormatString = "{0:F0}";
            scale.MajorTickmark.ShapeType = TickmarkShapeType.Circular_Style1_2;
            scale.MajorTickmark.ShapeOffset = -9;
            scale.MajorTickmark.AllowTickOverlap = true;
            scale.MinorTickCount = 3;
            scale.MinorTickmark.ShapeType = TickmarkShapeType.Circular_Style2_1;
            scale.AppearanceTickmarkText.TextBrush = new SolidBrushObject(Color.Gray);

            // Changes the needle's paint style.
            ArcScaleNeedleComponent needle = circularGauge.Needles[0];
            needle.ShapeType = NeedleShapeType.CircularFull_Style3;

            // Adds the gauge control to the Page.
            boldGaugeControl.Width = 150;
            boldGaugeControl.Height = 150;
            boldGaugeControl.AutoLayout = true;
            boldGaugeControl.ControlStyle.BackColor = Color.Black;
            boldGaugeControl.EnableClientSideAPI = true;
            boldGaugeControl.ClientIDMode = ClientIDMode.Static;
            boldGaugeControl.Value = "25";

            dockPanel.Controls.Add(boldGaugeControl);

            BoldGauge gauge = new BoldGauge(boldGaugeControl, gaugeValue, controlData, minimumGaugeValue, maximumGaugeValue);

            boldGauges.Add(gauge);
            Session.Add("GaugesList", boldGauges); 
```

我尝试在此调用中检索它们，它确实获取了值，但并非所有属性都是

```
protected void UpdateGauges()
    {

        List<BoldGauge> boldGauges = (List<BoldGauge>)Session["GaugesList"];

        if (boldGauges != null)
        {
            foreach (BoldGauge gauge in boldGauges)
            {
                ArcScaleComponent scale = GetGaugeScale(gauge.Gauge, 0, 0);
                scale.BeginUpdate();
                float newValue = new Random().Next(100);
                scale.Value = newValue;
                scale.EndUpdate();
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T22:13:19.470

行为是半预期的——只是不要那样做。

在会话状态中存储不可序列化的对象通常不是一个好主意。它主要在进程内提供程序的情况下工作，并且在使用 SQL 提供程序时完全失败。

此外，当从会话状态中取出下一个请求时，存储期望页面对象存在的控件将不起作用，因为旧页面（或父控件）对象与先前的请求一起被破坏。由于其父级已销毁，该控件也可能已自行取消初始化。

# html - 图片上的链接显示了小人工制品

> ID：11301612
> 
> 赞同：0
> 
> 时间：2012-07-02T21:43:20.780
> 
> 标签：html, anchor, image

我在一些图片上有几个链接。代码非常简单如下：

```
<div id="socialnetworkbuttons">
    <a href="http://www.facebook.com/">
        <img src="images/facebook-button.png" alt="Facebook" />
    </a>
    <a href="https://twitter.com/" alt="Twitter">
        <img src="images/twitter-button.png" />
    </a>
</div> 
```

我有一个 reset.css ：

```
html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, img, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
b, u, i, center,
dl, dt, dd, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td,
article, aside, canvas, details, embed, 
figure, figcaption, footer, header, hgroup, 
menu, nav, output, ruby, section, summary,
time, mark, audio, video {
    margin: 0;
    padding: 0;
    border: 0;
    font-size: 100%;
    font: inherit;
    vertical-align: baseline;
}

article, aside, details, figcaption, figure, 
footer, header, hgroup, menu, nav, section {
    display: block;
}
body {
    line-height: 1;
}
ol, ul {
    list-style: none;
}
blockquote, q {
    quotes: none;
}
blockquote:before, blockquote:after,
q:before, q:after {
    content: '';
    content: none;
}
table {
    border-collapse: collapse;
    border-spacing: 0;
} 
```

和其他CSS：

```
#socialnetworkbuttons {
    display:inline-block;
    float:left;
} 
```

结果如下所示：

![在此处输入图像描述](../Images/8185dd72fbe9d8d694b2f7260efc03d0.png)

如您所见，底部是一个小的紫色省略号人工制品，它是指向 facebook 的链接。我确定我在这里错过了一些非常简单和明显的东西，但是我该如何摆脱呢？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T21:58:25.703

看起来 A 中有多余的空格。试试：

```
<div id="socialnetworkbuttons"><a
     href="http://www.facebook.com/"><img
        src="images/facebook-button.png" alt="Facebook" /></a><a
     href="https://twitter.com/" alt="Twitter"><img
        src="images/twitter-button.png" /></a>
</div> 
```

我在 Firefox 或 Chrome 上没有省略号。

# mono - 如何在 Mono 2.10.9 上运行 NuGet？

> ID：11301613
> 
> 赞同：9
> 
> 时间：2012-07-02T21:43:27.473
> 
> 标签：mono, nuget

我试图让 NuGet 在 Mono 2.10.9 (Mac) 上运行，但没有运气。

我想从 NuGet 存储库安装 Nancy：

```
mono --runtime=v4.0 /usr/local/bin/NuGet.exe install Nancy -Version 0.11.0 
```

但是，最终得到此错误消息：

```
Missing method System.Security.Cryptography.CryptoConfig::get_AllowOnlyFipsAlgorithms() in assembly /Library/Frameworks/Mono.framework/Versions/2.10.9/lib/mono/4.0/mscorlib.dll, referenced in assembly /usr/local/bin/NuGet.exe
Method not found: 'System.Security.Cryptography.CryptoConfig.get_AllowOnlyFipsAlgorithms'. 
```

我可以毫无问题地列出存储库。

```
mono --runtime=v4.0 /usr/local/bin/NuGet.exe list Nancy 
```

我试图将 Microsoft.Build.dll 添加到与 NuGet.exe 相同的路径（来自站点的提示。我不记得在哪里）。

我最终得到这个错误：

```
Invalid type Microsoft.Build.Evaluation.Project for instance field NuGet.Common.MSBuildProjectSystem:<Project>k__BackingField
Could not load type 'NuGet.Common.MSBuildProjectSystem' from assembly 'NuGet, Version=2.0.30619.9000, Culture=neutral, PublicKeyToken=null'. 
```

关于如何让 NuGet.exe 在 Mono (Mac) 上运行的任何建议？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T02:17:52.187

恐怕您安装的 Mono 版本无法做到这一点。该特定版本（2.10.9）不包括静态属性：

```
System.Security.Cryptography.CryptoConfig.AllowOnlyFipsAlgorithms 
```

这似乎是 NuGet.exe“安装”功能所必需的。“list”命令可能有效，因为它不使用加密程序集（在 .NET 程序集中延迟加载，仅在执行代码需要它们时）。

积极的一点是，在 Mono 的 github 版本中，CryptoConfig 类似乎已使用此属性进行了更新，如您在此处看到的：

[当前单声道 CryptoConfig.cs 源，在主分支上](https://github.com/mono/mono/blob/master/mcs/class/corlib/System.Security.Cryptography/CryptoConfig.cs)

这表明更改应该已包含在 2.10.9 版本中：

[Mono 的 CryptoConfig.cs 的更改历史](https://github.com/mono/mono/commits/master/mcs/class/corlib/System.Security.Cryptography/CryptoConfig.cs)

AllowOnlyFipsAlgorithms 属性是在 2011 年 5 月 2 日添加的，一年前，但它不在当前的稳定版本中！！！这很奇怪……

您可以尝试下载 alpha 版本（Mono 2.11.2），看看它对您有什么帮助。

PS 我查看了 2.11.2 alpha 版本的源代码，看起来这个属性包含在这个版本中，所以试一试。希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T02:11:46.897

你需要几个步骤，

1.  安装所有单声道程序集（以便获得 WindowsBase）。
2.  导入证书。
3.  获取 Microsoft.Build.dll。

然后你应该能够运行 NuGet。我在这里记录了更多细节，

[http://www.lextm.com/2013/01/how-to-use-nuget-on-mono-part-i.html](http://www.lextm.com/2013/01/how-to-use-nuget-on-mono-part-i.html)

# java - SSL_read 第二次失败

> ID：11301614
> 
> 赞同：0
> 
> 时间：2012-07-02T21:43:29.803
> 
> 标签：java, openssl, ssl

我有一个openssl 客户端在说ssl。客户端之前正在与 openssl 服务器通信，一切都很好而且很花哨。我们现在正在用 java 重写服务器，我们看到了以下情况。

1) 连接到服务器 WORKS

2）握手工作

3) 第一个请求 WORKS

4) 第一反应有效

5）第二次请求工作

6）第二次响应失败

7) 第三次请求有效

8) 第三次响应失败

第二个响应是大约 130 字节加密和（应该）大约 100 字节未加密。客户端成功地从 tcp 套接字读取了所有这 130 个字节，但是在将它抛出 SSL_read（如第一个响应）之后，它只输出 1 个字节。调用 SSL_get_error 后没有错误...仅成功返回 1 个字节。之后我直接调用 SSL_pending 并返回 0。

第三个响应现在返回 -1 SSL_ERROR_SSL“解密失败或坏记录 mac”

我是 openssl 的新手，我已经与这个问题斗争了几个小时。任何想法将不胜感激

更新：相关代码

```
...
BIO* bio = BIO_new_mem_buff(sbuf, bufoutlen);
BIO_set_mem_close(bio,BIO_NOCLOSE);
ssl->rbio=bio;
int len = SSL_read(ssl, bufout, sbuflen); //<<return 1 even though buf has 130bytes
printf("pending=%d\n",SSL_pending(ssl)); //<<returns 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T23:37:08.207

你在依赖你不能依赖的东西。Java 可能会以不同的方式将响应缓冲到其 SSL 层，这将导致接收到不同长度的 SSL 消息。您不能依赖任何通过 SSL 或 TCP 读取的长度，它们是字节流协议，在 SSL 的情况下至少在 API 级别。您必须循环阅读，直到拥有所需的一切。

# jquery - 选择子项时如何突出显示父项

> ID：11301615
> 
> 赞同：0
> 
> 时间：2012-07-02T21:43:33.293
> 
> 标签：jquery, wordpress

我对 javascript 和 jQuery 很陌生，我似乎无法自己解决这个问题。

这段代码在一个空白的 wordpress “starter”模板中，可以在这里看到：http: [//jsfiddle.net/AyStc/13/](http://jsfiddle.net/AyStc/13/)

（注意：我添加了那些讨厌的颜色来对比白色背景。它们不是网站上的颜色！）

我很难弄清楚这两件事：

1.  使其在光标移动到其下方的子项时父项的背景保持蓝色。

2.  当有人单击子项并转到该页面时，父项文本保持突出显示，以指示用户在站点的哪个部分。

我一直在阅读 jQuery 中的 .closest() ，但我似乎无法让它像这样工作。

任何指导表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T22:01:11.597

一种方法是找到父母，然后得到孩子，然后过滤掉你需要的孩子。就像是：

```
$("#navi ul.menu li").hover(function() {
    $(this).find('ul.sub-menu')
        .stop(true, true).delay(50).animate({ "height": "show", "opacity": "show" }, 500 ).parent().children('a:first').css('background-color','blue');
}, function(){
    $(this).find('ul.sub-menu')
        .stop(true, true).delay(50).animate({ "height": "hide", "opacity": "hide" }, 200 ).parent().children('a:first').css('background-color','yellow');
}); 
```

或者， .prev('a') 做同样的事情，如果你知道父 X 总是在子菜单之前。

# java - 基于异常自定义 Try/Catch 代码模板

> ID：11301622
> 
> 赞同：5
> 
> 时间：2012-07-02T21:44:41.653
> 
> 标签：java, eclipse, templates, eclipse-templates

有谁知道是否有办法根据异常在 catch 块中自动生成不同的代码？

Eclipse 函数 'Surround with try/catch' 生成一个 try/catch 块，其中仅包括转储堆栈跟踪。

我在代码中做了很多类似的事情，所以我的大多数异常都可能归结为三种左右不同的类型。我想为每一个有不同的 catch 块代码，并有基于异常的 eclipse 自动格式。

例如：如果我的代码生成 RemoteConnectionException 我想向用户显示一个对话框以重新连接。如果它生成 RemoteContentException 我想记录它。

（这些都是我编的。）

提前致谢

更新：我一直在四处寻找并有两个潜在的解决方案。

1）我发现了一个叫做快速代码插件的东西，它可能会做我正在寻找的东西。 [http://fast-code.sourceforge.net/index.htm](http://fast-code.sourceforge.net/index.htm)

2) 对于专门处理异常，我可能只编写一个通用异常处理程序并修改 catch 块代码以将异常传递给它，而不是打印堆栈跟踪。然后 java 代码将根据异常类型确定要采取的操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T22:44:48.247

模板有其局限性。但是，您的问题可以通过 Aspect 非常优雅地解决。( [http://www.eclipse.org/aspectj/](http://www.eclipse.org/aspectj/) ) 只需为您需要的每种“模板案例”创建一个新注释并使用环绕建议。

*Ps：不要使用 printStackTrace() 来 syserr/sysout。有这么多生产级的轻量级日志框架.... pleeeaseee... 不要滥用可怜的小 System.out/err :)*

编辑：

日志记录/基准测试建议的一些示例。*（注意：我使用 spring AOP 进行切面，使用 lombok 轻松访问日志框架。这里的`getCurrentUser()`代码并不真正相关，只是为了从 Spring Security 获取当前用户）*

```
package com.XXXXXXXX.aspects;

import lombok.extern.slf4j.Slf4j;
import org.aspectj.lang.ProceedingJoinPoint;
import org.aspectj.lang.annotation.Around;
import org.aspectj.lang.annotation.Aspect;
import org.aspectj.lang.annotation.Pointcut;
import org.springframework.security.core.context.SecurityContextHolder;
import org.springframework.security.core.userdetails.UserDetails;
import org.springframework.stereotype.Component;

@Component
@Aspect
@Slf4j
public class LoggerAspect {

    private final static String DOMAIN = "XXXXXXXX";

    private static String getCurrentUser() {
        String username = "Unknown";
        try {
            Object principal = SecurityContextHolder.getContext().
                    getAuthentication().
                    getPrincipal();
            if (principal instanceof UserDetails) {
                username = ((UserDetails) principal).getUsername();
            } else {
                username = principal.toString();
            }
        } catch (Exception e) {
        }
        return username;
    }

    @Pointcut("within(com.XXXXXXXX.services..*)")
    public void inServiceLayer() {
    }

    @Pointcut("execution(* getMatcherInfo(..)) || execution(* resetCounter(..))")
    public void notToAdvise() {
    }

    @Around("com.XXXXXXXX.aspects.LoggerAspect.inServiceLayer() && !com.XXXXXXXX.aspects.LoggerAspect.notToAdvise()")
    public Object doLogging(ProceedingJoinPoint pjp)
            throws Throwable {
        long start = System.nanoTime();
        StringBuilder sb = new StringBuilder(DOMAIN);
        sb.append('/').
                append(getCurrentUser()).
                append(" accessing ").
                append(pjp.getSignature().
                getDeclaringTypeName()).
                append('.').
                append(pjp.getSignature().
                getName());
        log.trace("START: " + sb.toString());
        Object retVal = pjp.proceed(pjp.getArgs());
        long duration = System.nanoTime() - start;
        log.trace("STOP: " + duration / 1000000 + " msec. " + sb.toString());
        return retVal;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T22:29:31.350

我不确定eclipse中是否有这样的选项。我已经使用带有 try/catch 选项的环绕选项已经有一段时间了，它总是在异常 e 的 catch 块中转储默认的 e.printStackTrace() 行。

# regex - 十六进制的正则表达式值

> ID：11301623
> 
> 赞同：1
> 
> 时间：2012-07-02T21:44:46.433
> 
> 标签：regex

我正在学习正则表达式并试图了解如果正则表达式以十六进制值表示时将匹配什么值。

例如，如果我有`^[\\x00-\\xff]{16}`，这是否意味着它将匹配 0-255 的任何值，长度为 16 位？

我上网查了一下，好像没找到例子。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T21:49:52.120

十六进制值是指被匹配的字符串字符的*字符代码*。例如，`'A'`在 ASCII 或 UTF-8 中是 65，或者`x41`.

`^[\x00-\xff]{16}`意味着匹配，锚定在字符串的开头，正好匹配 16 个字符，其数值在 0 到 255 之间。如果您的正则表达式引擎不是多字节字符集感知的，那将意味着*任何*字符，所以在那个case 它几乎与 相同`^.{16}`，除了在许多正则表达式引擎`.`中不会匹配换行符，除非打开特定选项（`/s`在 Perl 和 Perl 兼容的正则表达式中）。

# iphone - iPhone 上的核心图 - 轴旁边的额外白线

> ID：11301626
> 
> 赞同：1
> 
> 时间：2012-07-02T21:44:50.160
> 
> 标签：iphone, ios, core-plot

我正在使用 Core Plot 在 iOS 应用程序中进行一些绘图。我正在配置轴，并且在 X 下方和 Y 轴左侧出现奇怪的白线，如下图所示：

![在此处输入图像描述](../Images/d1a35afcc2120183180b32a9a5cd9ee6.png)

我的图表设置代码如下：

```
// 1 - Create the graph
CPTGraph *graph = [[CPTXYGraph alloc] initWithFrame:self.barHostView.bounds];
graph.plotAreaFrame.masksToBorder = NO;
self.barHostView.hostedGraph = graph;    
// 2 - Configure the graph    
[graph applyTheme:[CPTTheme themeNamed:kCPTPlainBlackTheme]];    
graph.paddingBottom = 30.0f;      
graph.paddingLeft  = 30.0f;
graph.paddingTop    = -1.0f;
graph.paddingRight  = -5.0f;
// 3 - Set up styles
CPTMutableTextStyle *titleStyle = [CPTMutableTextStyle textStyle];
titleStyle.color = [CPTColor whiteColor];
titleStyle.fontName = @"Helvetica-Bold";
titleStyle.fontSize = 16.0f;
// 4 - Set up title
graph.title = [NSString stringWithFormat:@"Usage on %@", self.turnout];
graph.titleTextStyle = titleStyle;
graph.titlePlotAreaFrameAnchor = CPTRectAnchorTop;
graph.titleDisplacement = CGPointMake(0.0f, -16.0f);

// 5 - Set up plot space
CGFloat xMin = -1.5f;
CGFloat xMax = [self.points count] + 2;
CGFloat yMin = 0.0f;
self.yMax = [[self greatestFlowValue] floatValue] * 1.4;

CPTXYPlotSpace *plotSpace = (CPTXYPlotSpace *) graph.defaultPlotSpace;

plotSpace.xRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(xMin) length:CPTDecimalFromFloat(xMax)];
plotSpace.yRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(yMin) length:CPTDecimalFromFloat(self.yMax)];

CPTMutablePlotRange *yRange = [plotSpace.yRange mutableCopy];
[yRange expandRangeByFactor:CPTDecimalFromCGFloat(1.65f)];        
plotSpace.yRange = yRange; 
```

我或多或少地从教程中复制了它，然后对其进行了修改。在演练中，他们在轴上没有标签——他们在屏幕的左侧和底部设置了标签。

谁能解释导致这些额外行的原因以及我如何禁用它们？它们只出现在我的条形图上......我有其他使用散点图的图表没有任何类似的结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T21:37:26.133

看起来您的 plotAreaFrame 上有边框（由主题设置），请在应用主题后尝试将其删除：

```
graph.plotAreaFrame.borderLineStyle = nil; 
```

# java - 字符串部分匹配

> ID：11301635
> 
> 赞同：0
> 
> 时间：2012-07-02T21:45:47.463
> 
> 标签：java, string, partial, matching

> **可能重复：**
> [Java 中的相似性字符串比较](https://stackoverflow.com/questions/955110/similarity-string-comparison-in-java)

**大家好**

我正在尝试使用**Java**找到两个字符串之间的部分匹配，当然，stackoverflow 上有很多问题和答案，但是，这些都不能满足我的要求。我有两个字符串（句子），例如“强大的 Java 编程”和“强大的编程技能”。现在我想测量这两个句子之间的相似度，例如**25%**而不仅仅是*部分匹配*= **ture**或**false**。

**谢谢**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T21:49:08.987

您可以使用[Levenshtein distance](http://en.wikipedia.org/wiki/Levenshtein_distance)或[Jaro-Winkler](http://en.wikipedia.org/wiki/Jaro%E2%80%93Winkler_distance)等字符串距离确定算法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T21:49:23.353

只需使用 String API 和您自己的算法。像这样的东西：

```
public static double similarity(String a, String b) {
  double count = 0;
  String[] words = a.split();
  for(String word : words) {
    if(b.indexOf(word) != -1) {
      count++;
    }
  }
  return count / words.length;
} 
```

**问题**是这不太正确——你想更好地查看 B 中的单词。我只是想让你大致了解你可能想要拥有的方法和结构。你还想清理你的输入——把它全部小写，删除标点符号，谁知道呢。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T21:51:29.560

你可以看看这个库：[SimMetrics](http://sourceforge.net/projects/simmetrics/)。

> SimMetrics 是一个相似度度量库，例如从编辑距离（Levenshtein、Gotoh、Jaro 等）到其他度量（例如 Soundex、Chapman）。

# php - Codeigniter UPS API 集成 - 交货日期

> ID：11301638
> 
> 赞同：2
> 
> 时间：2012-07-02T21:46:02.047
> 
> 标签：php, api, codeigniter, ups

我正在使用 codeigniter 框架，并且已将 UPS 费率集成到我的站点中。最近我想添加预期的交货日期，但我注意到 UPS API 正在返回*除*UPS Ground（代码 03）之外的所有东西的交货日期。

我不知道我遗漏了什么或做错了什么，但我知道其他网站提供了 UPS 陆运的估算

我正在使用这个 UPS 库：[http ://codeigniter.com/wiki/UPS_Rate_Tool/](http://codeigniter.com/wiki/UPS_Rate_Tool/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T16:49:46.797

我直接联系了 UPS 以获得答案。事实证明，他们只提供有保证的服务的交货日期，而 UPS Ground 并没有得到保证，因此当您请求费率时，将没有交货日期的数据。

由于无法保证 UPS Ground，您只能获得估计的发货日期，这必须使用单独的 UPS api 完成：'Time in Transit API' Xpath – /TimeInTransitResponse/TransitResponse/ServiceSummary/EstimatedArrival/Arrival/Date

希望这可以节省我的时间和困惑！

# jquery - jQuery blur 检查 web 服务是否匹配并返回数据以设置多个文本框

> ID：11301642
> 
> 赞同：0
> 
> 时间：2012-07-02T21:46:16.853
> 
> 标签：jquery, asp.net, web-services

我有一个文本框，我是用户在其中输入供应商名称。在模糊中，我想检查一个网络服务以查看供应商是否存在，如果存在，我想从网络服务返回供应商 ID 并使用它来填充另一个文本框。

该网络服务工作正常，因为我在其他地方使用它很好（使用类似的代码来执行自动完成）它以 JSON 格式返回数据，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
-<ArrayOfSuppliers xmlns="http://tempuri.org/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 
  -<Suppliers> 
       <SupplierID>1</SupplierID> 
       <SupplierName>Supplier 1</SupplierName> 
   </Suppliers> 
 </ArrayOfSuppliers> 
```

下面的代码是一团糟，不会按原样工作。我希望它有助于解释我正在尝试做的事情，并且你也可以帮助我理解我做错了什么以及数据是如何返回和使用的。

作为起点，我收到“响应”未定义的错误。我明白为什么，但我不明白我需要做什么来解决它。

```
 $(document).ready(function () {
    $("[id$=txtSupplier]").blur(function () {

        $.ajax({
             type: "POST",
             url: "http://localhost:52350/FabRouting/Webservice/SupplierList.asmx/GetSuppliers",
             data: "{ 'SupplierSearch': '" + $("[id$=txtSupplier]").val() + "' }",
             contentType: "application/json; charset=utf-8",
             dataType: "json",
             dataFilter: function (data) { return data; },
             success: function (data) {
                response($.map(data.d, function (item) {
                   return {
                   value: item.SupplierName,
                   id: item.SupplierID
                 }
                 }))
                 },
             error: function(e){
                 $("[id$=lblSupplier]").html("Unavailable");              
             }
         });
        }
        );
    }); 
```

在我完成这项工作后，我仍然需要知道如何获取返回的内容并设置一个文本框，但如果我能让这段代码发挥作用，我可能可以通过我的方式来解决这个问题。

**编辑**

我有一些使用此代码的自动完成功能：

```
$(document).ready(function () {
$(".cRejectedOnSDRR").autocomplete({
    source: function (request, response) {
        $.ajax({
            url: "http://localhost:52350/FabRouting/Webservice/ReportList.asmx/GetReports",
            data: "{ 'ReportNumberSearch': '" + request.term + "' }",
            dataType: "json",
            type: "POST",
            contentType: "application/json; charset=utf-8",
            dataFilter: function (data) { return data; },
            success: function (data) {
                response($.map(data.d, function (item) {
                    return {
                        value: item.ReportNumber,
                        id: item.SDRRID
                    }
                }))
            },
            error: function (XMLHttpRequest, textStatus, errorThrown) {
                alert(textStatus);
            }
        });
    },
    minLength: 1,
    select: function (event, ui) {
        $("[id$=lblRejectedOnSDRRID]").html(ui.item.id);
    },
}); 
```

});

并试图以此为基础来做我在顶部提到的模糊处理。我不太了解如何简单地获取和使用从 Web 服务返回的数据，因此我试图对自动完成代码进行逆向工程以帮助自己理解它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T21:59:56.627

对于初学者，您需要通过使用`[ScriptService]`属性装饰它来激活 Web 服务上的 JSON，因为现在它返回 XML，而不是 JSON：

```
[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[ScriptService]
public class SupplierList: System.Web.Services.WebService
{
    public Suppliers[] GetSuppliers(string supplierSearch)
    {
        ...
    }
} 
```

然后您应该使用该`JSON.stringify`方法而不是您在客户端上构建参数时所做的字符串连接，`data`这将确保请求参数的正确 JSON 编码：

```
data: JSON.stringify({ supplierSearch: $("[id$=txtSupplier]").val() }, 
```

然后在您`success`正在使用的回调中，`data.d`这对于启用 JSON 的 Web 服务来说很好，因为它们使用该`.d`属性，但是您似乎`response`在您的内部调用了一些 javascript 函数`$.map`，因为您在上下文中显然不存在于您的上下文中AJAX 请求成功回调。我想这是一些非常糟糕的复制粘贴，没有理解代码意味着什么，来自一些使用此功能但在您的场景中没有任何意义的 jQuery UI 自动完成插件示例。

所以，是的，您现在收到的错误消息非常有意义。您尚未定义该`response`函数，但您正在尝试调用它。

如果你想使用 jQuery 自动完成插件，那不是正确的使用方式。您不应该订阅任何模糊事件。您应该阅读[文档](http://jqueryui.com/demos/autocomplete/#remote)以获取示例。但我什至不确定你想要达到什么目的。

因此，如果您想将此插件与您的 Web 服务连接，可以尝试以下方法：

```
$(document).ready(function () {
    $('[id$=txtSupplier]').autocomplete({
        source: function(request, response) {
            $.ajax({
                url: 'http://localhost:52350/FabRouting/Webservice/SupplierList.asmx/GetSuppliers',
                data: JSON.stringify({ supplierSearch: request.term },
                contentType: 'application/json; charset=utf-8',
                success: function(data) {
                    response($.map(data.d, function(item) {
                        return {
                            label: item.SupplierID,
                            value: item.SupplierName
                        }
                    }));
                }
            });
        },
        minLength: 2
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T21:58:22.580

就像在[这里](https://stackoverflow.com/a/511027/66580)完成一样：

```
var SupplierID = $(data).find("SupplierID").text(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T21:58:28.033

Majid 是对的，除非您将 XML 序列化为 JSON，否则这将不起作用，但我认为您的错误不是因为这个。你看过[GenericHandlers](http://msdn.microsoft.com/en-us/library/bb398986.aspx)吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T01:42:33.850

好吧，我终于想通了。我很确定我走错了路，但我不知道自己做错了什么，也不知道如何访问从 Web 服务返回的数据。Darin 很有帮助，它让我更加努力地编写代码而不是放弃。我认为他没有完全理解我想要做什么，但确实理解我正在尝试使用我不理解的代码:) 我确实在我的最终结果中使用了他的 stringify 建议，但没有它它就可以工作好吧......他只是提到这是一个比我假设的用于此目的的代码更好的选择。

我终于开始找出正确的语法 - 又名：data.d.SupplierID，但即使这似乎适用于网络上的其他人，它仍然不会返回我正在寻找的内容。我终于遇到了正在使用索引的人——又名：data.d[0].SupplierID，它终于开始为我工作了。我想知道索引有一段时间，但不明白如何处理它。

这是最终的工作代码：

```
 $(document).ready(function () {
    $("[id$=txtSupplier]").blur(function () {

        $.ajax({
            type: "POST",
            url: "http://localhost:52350/FabRouting/Webservice/SupplierList.asmx/CheckSupplier",
            data: JSON.stringify({ SupplierSearch: $("[id$=txtSupplier]").val() }),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function(data){
                if (data.d.length == 0) {
                    $("[id$=lblSupplierID]").html("0");
                }
                else {
                    $("[id$=lblSupplierID]").html(data.d[0].SupplierID);
                }
            },
             error: function(e){
                 $("[id$=lblSupplierID]").html("0");
             }
         });
        }
        );
    }); 
```

我添加了 if 语句来检查空值，因为当没有找到结果时它不会导致错误，所以我无法在错误函数中处理它。我假设这是设计使然，因为返回 null 的 SQL 查询不一定是错误，只是我需要处理的事情。如果有人有更好（或正确）的方法来处理这个问题，请告诉我。

# c# - 如何以编程方式更改网站级别的 SessionState 设置

> ID：11301644
> 
> 赞同：0
> 
> 时间：2012-07-02T21:46:28.203
> 
> 标签：c#, iis-7

我尝试使用以下代码将 SessionState 设置更改为 InProc

```
string configPath = "/Default Web site";
System.Configuration.Configuration config =System.Web.Configuration.WebConfigurationManager.OpenWebConfiguration( configPath);
System.Web.Configuration.SessionStateSection sessionSection = ( (System.Web.Configuration.SessionStateSection)config.GetSection( "system.web/sessionState" ) );
sessionSection.Mode = SessionStateMode.InProc;
sessionSection.AllowCustomSqlDatabase = false;
sessionSection.RegenerateExpiredSessionId = false;
sessionSection.Cookieless = System.Web.HttpCookieMode.UseCookies;
config.Save( ); 
```

但它不起作用。它不会抛出错误，但我看不到网站配置的任何变化。当我查看配置属性时，我发现没有配置文件路径，并且 hasFile 设置为 false。

为了在 C# 中修改此属性，我该怎么做？

# matlab - 在 libsvm 中为 SVR 找到好的 C 和 gamma 参数

> ID：11301646
> 
> 赞同：1
> 
> 时间：2012-07-02T21:46:33.570
> 
> 标签：matlab, machine-learning, svm, libsvm

大家好，我在 libsvm 中使用 SVR 时遇到了困难。我正在按照所有步骤使用 grid.py 找到最佳 C 和 gamma 参数，但准确率仍然很低，大约为 0.1。但是当我尝试使用交叉验证时，准确度是 0.99。我仍在寻找提高准确率的方法。因为我使用的是 svr，所以我在这里谈论的准确度是平方相关系数值。我的数据包含 30 x 5 个预测变量和 30 x 1 个预测值（数据标签）。任何建议将不胜感激。

我试过的：

寻找最佳`C`和`g`价值：

```
tools/grid.py train.txt.scale 
```

我得到了：`C = 16`，`g = 0.008`

`C`使用最佳值和值运行 30 倍交叉验证（我想使用留一交叉验证）`g`：

```
svm-train -v 30 -c 16 -g 0.008 train.txt 
```

我有：

交叉验证均方误差 = 6.62503 交叉验证平方相关系数 = 0.38175

但是`svmpredict`，我得到了 0.103281159524459 的准确度。

这似乎是 libsvm 中查找最佳值`C`和`g`值的常用方法。我真的不知道是否有希望将这个精度提高到 0.8 或更高。

# facebook-opengraph - Open Graph 可以国际化单位，例如米和英尺之间的单位吗？

> ID：11301649
> 
> 赞同：0
> 
> 时间：2012-07-02T21:46:44.210
> 
> 标签：facebook-opengraph

对于社交运行应用程序，如果开发人员要提供元标记，例如：

```
<meta content='16.69' property='myapp:distance'> 
```

以公里为单位，美国观众能否以英里为单位接收这些信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T21:56:49.433

[您可以使用此处描述的方法（ https://developers.facebook.com/docs/opengraph/internationalization/](https://developers.facebook.com/docs/opengraph/internationalization/) ）试试运气——并为不同的语言环境提供不同的数据。

但我想你也应该提供一个单位；我有一种强烈的感觉，否则它可能会彻底破坏 Facebook 对您数据的理解……</p>

# escaping - 如何在 YAML 中转义指示符（即 : 或 - ）

> ID：11301650
> 
> 赞同：330
> 
> 时间：2012-07-02T21:46:49.797
> 
> 标签：escaping, yaml, delimiter

在配置文件中，我有一个希望为其分配 URL 的键。问题是 YAML 将 : 和 - 字符解释为创建映射或列表，因此该行存在问题

```
url: http://www.example-site.com/ 
```

（都是因为 http 后面的冒号和中间的连字符）

有没有明确的方法来逃避 ':' 和 '-' ？或者将整个内容放在单引号中并收工是否可行？

* * *

## 回答 #1

> 赞同：316
> 
> 时间：2012-07-02T21:49:51.697

引号：

```
"url: http://www.example-site.com/" 
```

为了澄清，我的意思是“引用价值”，最初认为整个事情就是价值。如果`http://www.example-site.com/`是值，只需像这样引用它：

```
url: "http://www.example-site.com/" 
```

* * *

## 回答 #2

> 赞同：254
> 
> 时间：2014-03-18T15:00:08.737

对于长的多行文本来说，还有什么更有效，甚至更好的是，将您的文本缩进到下一行，在竖线或大于号之后：

```
text: >
    Op dit plein stond het hoofdkantoor van de NIROM: Nederlands Indische 
    Radio Omroep 
```

管道保留换行符，gt 符号将所有以下行变成一个长字符串。

* * *

## 回答 #3

> 赞同：76
> 
> 时间：2015-10-15T12:51:26.257

根据 YAML 规范， the`:`和 the`-`都不是问题。`:`只是一个键分隔符，后面有一个空格，并且`-`只是一个数组指示符，位于行首，后面有一个空格。

但是如果你的 YAML 实现有问题，你可能有很多选择：

```
- url: 'http://www.example-site.com/'
- url: "http://www.example-site.com/"
- url:
    http://www.example-site.com/
- url: >-
    http://www.example-site.com/
- url: |-
    http://www.example-site.com/ 
```

[然而，在“ plain style](http://yaml.org/spec/1.2/spec.html#id2788859) ”中显然没有任何形式的转义。

* * *

## 回答 #4

> 赞同：33
> 
> 时间：2013-10-13T05:17:49.460

引号，但我更喜欢它们的价值：

```
url: "http://www.example.com/" 
```

将它们放在整条线上看起来可能会导致问题。

* * *

## 回答 #5

> 赞同：25
> 
> 时间：2013-09-30T03:56:58.747

与 Jekyll 中使用的 YAML 解析器一起使用的另一种方法：

```
title: My Life&#58; A Memoir 
```

另一方面，不带空格的冒号似乎不会打扰 Jekyll 的 YAML 解析器。破折号也不行。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2018-10-11T10:32:24.830

如果您使用`@ConfigurationProperties`Spring Boot 2 来使用包含冒号的键注入映射，那么您需要在引号内使用方括号进行额外级别的转义，因为 spring 只允许字母数字和“-”字符，去除其余字符。您的新密钥将如下所示：

```
"[8.11.32.120:8000]": GoogleMapsKeyforThisDomain 
```

请参阅[此](https://github.com/spring-projects/spring-boot/issues/11386)github 问题以供参考。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2019-07-04T12:12:42.803

我来这里是为了让我的 Azure DevOps 命令行任务正常工作。对我有用的是使用管道 ( `|`) 字符。使用`>`无效。

例子：

```
steps:
- task: CmdLine@2
  inputs:
    script: |
      echo "Selecting Mono version..."
      /bin/bash -c "sudo $AGENT_HOMEDIRECTORY/scripts/select-xamarin-sdk.sh 5_18_1"
      echo "Selecting Xcode version..."
      /bin/bash -c "echo '##vso[task.setvariable variable=MD_APPLE_SDK_ROOT;]'/Applications/Xcode_10.2.1.app;sudo xcode-select --switch /Applications/Xcode_10.2.1.app/Contents/Developer" 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-11-22T22:21:25.193

GitHub 操作抱怨

```
curl -L -H "Authorization: token ${{ secrets.TOKEN }}"  https://example.com/try.txt 
```

但是冒号后没有空格也没关系，比如

```
curl -L -H "Authorization:token ${{ secrets.TOKEN }}"  https://example.com/try.txt 
```

# c#-4.0 - 包含在派生类中创建的通用实例的基类？

> ID：11301651
> 
> 赞同：1
> 
> 时间：2012-07-02T21:46:58.443
> 
> 标签：c#-4.0

我试图弄清楚这是否可能。

我有一个类，BaseGameEntity，我目前从中派生 NormalDrop 和 OtherDrop，每个都有一个 StateMachine< T > 的实例，其中 T 分别是 NormalDrop 和 OtherDrop。

从这里可以调用适用于这些下降的相关状态。

我想要做的是将另一层放入 Drop 类中，该类派生自 BaseGameEntity ，然后其他形式的 drop 派生自该类。

在 Drop 中，我想要一个 StateMachine< T >，其中“T”变为 NormalDrop 或 OtherDrop，具体取决于使用它作为其基类的内容。

这真的可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T21:53:05.813

是的，您可以使用[奇怪的重复模板模式](http://en.wikipedia.org/wiki/Curiously_recurring_template_pattern)：

```
public class Drop<T> where T : Drop<T> { ... }
public class NormalDrop : Drop<NormalDrop> { ... }
public class OtherDrop : Drop<OtherDrop> { ... } 
```

那么在 Drop 基类中 T 总是 NormalDrop 或 OtherDrop。

这种模式通常不被认为是对开发人员友好的，因为乍一看它令人困惑，并且可能有更好的方法来构建代码（尽管可能并非总是如此）。Eric Lippert 在这里写了一篇关于这种模式及其一些缺点的非常好的博客[文章](http://blogs.msdn.com/b/ericlippert/archive/2011/02/03/curiouser-and-curiouser.aspx)。

# common-lisp - 如何将列表传递给 cl-mustache？

> ID：11301654
> 
> 赞同：2
> 
> 时间：2012-07-02T21:47:17.893
> 
> 标签：common-lisp, mustache

我正在尝试使用[CL-MUSTACHE](https://github.com/kanru/cl-mustache)。[按照README](https://github.com/kanru/cl-mustache/blob/master/README.rst)文件中的示例，渲染原子变量可以正常工作：

```
> (mustache:mustache-render-to-string "{{year}}-{{month}}-{{day}}" 
                                      '((:year . "2012")
                                        (:month . "07")
                                        (:day . "02")))
"2012-07-02" 
```

但是，我无法弄清楚如何传递一个列表来多次呈现一个部分。[README](https://github.com/kanru/cl-mustache/blob/master/README.rst)文件没有示例，我尝试过的方法也不起作用。例如：

```
(mustache:mustache-render-to-string "{{#dates}}{{year}}-{{month}}-{{day}}
{{/dates}}" 
                                    '((:dates . (((:year . "2012")
                                                  (:month . "07")
                                                  (:day . "02"))
                                                 ((:year . "2013")
                                                  (:month . "08")
                                                  (:day . "03"))))))
"--
" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T22:10:06.557

我没有它要检查，但从文档中，似乎数组被视为 CL 数组，所以你可以试试这个看看它是否有效：

```
(mustache:mustache-render-to-string "{{#dates}}{{year}}-{{month}}-{{day}}{{/dates}}" 
                                    '((:dates . #( ((:year . "2012")
                                                    (:month . "07")
                                                    (:day . "02"))
                                                   ((:year . "2013")
                                                    (:month . "08")
                                                    (:day . "03")))))) 
```

（即参数列表的数组）。

# go - 适用于 Google Drive SDK v2 的 Go 客户端

> ID：11301659
> 
> 赞同：2
> 
> 时间：2012-07-02T21:48:00.347
> 
> 标签：go, google-drive-api, google-api-go-client

[https://developers.google.com/drive/v2/reference/files/list](https://developers.google.com/drive/v2/reference/files/list)

是否有使用该`code.google.com/p/google-api-go-client/drive/v2`包的 Go 示例。它还有其他位置吗？或者只是还没有发布？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T22:08:10.427

它尚未发布，但您可以自己构建客户端，如果您安装了以下库：

```
go get code.google.com/p/google-api-go-client/drive/v1
cd $GOPATH/src/code.google.com/p/google-api-go-client
go run google-api-go-generator/gen.go -api=drive:v2
go install ./drive/v2 
```

我将立即提交补丁以添加它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T21:57:25.377

该软件包在那里，但无法从该 URL 访问：

您可以从以下位置浏览代码

[http://code.google.com/p/google-api-go-client/source/browse/](http://code.google.com/p/google-api-go-client/source/browse/)

并下载并安装在你的 GOPATH 中

# regex - RegEx 使用通配符验证 IP 地址

> ID：11301670
> 
> 赞同：2
> 
> 时间：2012-07-02T21:49:18.507
> 
> 标签：regex, validation

我似乎无法获得正确的正则表达式来验证 IP 地址，包括对通配符 (*) 的支持，这只能在末尾出现。例如：

**有效的**

```
1.2.*
1.2.3.*
1.2.3.4 
```

**无效**

```
1
1.2
1.2*
1.2.3
1.2.3*
1.*.3.4 
```

我已经接近（并在这里找到了一些类似的问题/答案），但无法让所有场景都通过/失败。谁能帮我吗？顺便说一句 - 验证八位位组是 0-255 不是必需的，但会很酷。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T21:58:40.597

像这样的东西：

```
^((((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?))|(((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}\*)|(((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){2}\*)|(((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){1}\*))$ 
```

第二版：

```
^((((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?))|(((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){1,3}\*))$ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T00:07:08.570

全部在一条线上：

```
^\*|(?:25[0-5]|2[0-4][0-9]|[01]?[0-9]{1,2}\.(?:\*|(?:25[0-5]|2[0-4][0-9]|[01]?[0-9]{1,2}\.(?:\*|(?:25[0-5]|2[0-4][0-9]|[01]?[0-9]{1,2}\.(?:\*|(?:25[0-5]|2[0-4][0-9]|[01]?[0-9]{1,2})))))))$ 
```

分解：

```
^\*|                                           # Treat '*' by itself as valid or
(?:25[0-5]|2[0-4][0-9]|[01]?[0-9]{1,2}\.       # Basic octet pattern plus...
(?:\*|(?:25[0-5]|2[0-4][0-9]|[01]?[0-9]{1,2}\. # Wildcard, or 2nd octet plus...
(?:\*|(?:25[0-5]|2[0-4][0-9]|[01]?[0-9]{1,2}\. # Wildcard, or 3rd octet plus...
(?:\*|(?:25[0-5]|2[0-4][0-9]|[01]?[0-9]{1,2}   # Wildcard or last octet
)))))))$                                       # Close up shop 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T21:55:34.830

最多匹配 3 个部分，然后是通配符或常规 IP：

```
^((\d{1,3}\.){1,3}\*|(\d{1,3}\.){3}\d{1,3})$ 
```

或者，如果您还想验证数字，请将`\d{1,3}`s 更改为`(1?\d?\d|2[0-4]\d|25[0-5])`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T22:02:54.220

正则表达式：

```
\b((?:(?:\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])\.){3}(?\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])|(?\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])\.){0,3}\*))\b 
```

如果您将整个字符串验证为 IP 地址，则替换`\b`为`^`（开始）和`$`（结束），否则它将在字符串中查找匹配项。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-02T22:13:54.897

```
^(?:(?:[0-1]\d\d|2[0-4]\d|25[0-5])|(?:\d{1,2}))(?:(?:(?:\.(?:(?:[0-1]\d\d|2[0-4]\d|25[0-5])|(?:\d{1,2})))){3}|(?:\.(?:(?:[0-1]\d\d|2[0-4]\d|25[0-5])|(?:\d{1,2}))){0,2}\.\*)$ 
```

这是一个简短的 ruby​​ 脚本，用于显示构造和验证结果：

```
#!/usr/bin/env ruby

octet2 = /(?:\d{1,2})/
octet3 = /(?:[0-1]\d\d|2[0-4]\d|25[0-5])/
octet = /(?:#{octet3}|#{octet2})/
dot_octet = /(?:\.#{octet})/

trailing_wild_ip = /^#{octet}(?:(?:#{dot_octet}){3}|#{dot_octet}{0,2}\.\*)$/

%w{
1.2.*
1.2.3.*
1.2.3.4
1
1.2
1.2*
1.2.3
1.2.3*
1.*.3.4
}.
  map {|ip| [ip, ip.match(trailing_wild_ip) ? 'valid' : 'invalid' ] }.
  each {|ip,match| puts "#{ip} => #{match}" }

# output:
1.2.* => valid
1.2.3.* => valid
1.2.3.4 => valid
1 => invalid
1.2 => invalid
1.2* => invalid
1.2.3 => invalid
1.2.3* => invalid
1.*.3.4 => invalid 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-02T22:36:38.743

又好又短

```
^((\d+\.){3}\d+|(\d+\.){1,3}\*)$ 
```

使用正则表达式修饰符，让 ^ 和 $ 在行开始/结束处匹配

# apache2 - 无法从远程计算机访问浏览器上的 Apache2 HTTPD 服务器

> ID：11301674
> 
> 赞同：2
> 
> 时间：2012-07-02T21:49:44.677
> 
> 标签：apache2, apache

我在 Apache2 上部署了一个网站。Apache2 服务器设置在 VM 上。当我尝试使用浏览器从远程机器（我的笔记本电脑）访问该站点时，我收到连接超时错误。当我尝试访问部署在同一 VM 上的 Tomcat 上的东西时，它工作正常。但是 Apache 给出了一个问题。

请让我知道我错过了什么。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T21:56:42.463

1）检查httpd进程是否正在运行

```
ps -ef | grep httpd |grep -v grep 
```

2）确保您在端口 80 上广播

```
netstat -atn |grep :80 
```

3) 在您的 conf (/etc/httpd/conf.d/*.conf) 文件中验证您将 Apache 绑定到端口 80

```
<virtualhost *:80> 
```

或者

```
<virtualhost xxx.xxx.xxx.xxx:80> 
```

您的 Tomcat 进程可能绑定到端口 80 并且套接字不可用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-02T08:21:43.370

在 centos 上运行以下命令：

1.  iptables -I INPUT 4 -p tcp -m state --state NEW -m tcp --dport 80 -j ACCEPT

2.  /etc/init.d/iptables 保存

# linux - 如何绕过 libc 直接调用 fork()？

> ID：11301681
> 
> 赞同：2
> 
> 时间：2012-07-02T21:50:26.130
> 
> 标签：linux, posix, fork

我安装了一个 SIGSEV 和 SIGABRT 信号处理程序，它派生了一个子进程： 1\. 使用 SIGSTOP 停止其父进程。2\. 在父进程上调用 gdb 以收集崩溃诊断信息。

问题是，由于 ptmalloc 安装了 pthread_atfork 处理程序， [fork 在 glibc 上不是异步信号安全的。](http://sourceware.org/bugzilla/show_bug.cgi?id=4737)现在我的信号处理程序有可能冻结，因为 fork() 尝试分配内存，这反过来可能会抓住一个已经锁定的互斥锁。

我想通过直接调用 fork 系统调用、绕过任何 libc 包装器并因此绕过任何 atfork 处理程序来解决这个问题。我怎么做？以下代码适用于 Linux，但似乎不适用于 OS X。它总是返回子 PID，从不为 0，还是应该这样做？我也不确定我是否正确捕获了返回值，因为定义是`int syscall(...)`但是 fork 返回一个整数类型`pid_t`。

```
pid = syscall(SYS_fork); 
```

我的应用程序可以在许多平台上运行，包括 Linux 和 OS X。

编辑：修复错字：s/线程安全/异步信号安全/。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T05:18:52.740

在 Linux 上，如果您只想在软件核心转储信号上自动触发调试器，您可以将核心转储管道转换为一些脚本，根据[core(5)](http://www.kernel.org/doc/man-pages/online/pages/man5/core.5.html)，您只需`coredump_filter` 使用`|` (管道字符后跟命令) .

这个技巧避免了任何额外的编程（除了你为此编写的脚本）

# facebook - Facebook 上的友好网址 分享

> ID：11301683
> 
> 赞同：0
> 
> 时间：2012-07-02T21:50:33.680
> 
> 标签：facebook, web-applications, web, facebook-sharer

我正在为我的网站使用 Facebook Share，基本上它运行良好，但只是有点皱纹。每当用户在 Facebook 上分享时，它都会在他/她的墙上分享 URL。但我想像所有新闻报纸一样添加一些描述。CNN 和纽约时报。当用户分享内容时，URL 会出现在墙上，但会有文章的标题或更大字体的内容，能够引起人们的注意。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T22:02:00.007

您必须使用 Facebook API 创建对话框并发布到用户供稿，

**直接 URL 示例：**

```
https://www.facebook.com/dialog/feed?
  app_id=APP_ID&
  link=https://YOUR_DOMAIN&
  picture=http://YOUR_DOMAIN/image.jpg&
  name=Facebook%20Dialogs&
  caption=API%20Dialogs&
  description=Using%20Dialogs%20to%20interact%20with%20users.&
  redirect_uri=http://YOUR_DOMAIN/response 
```

**一个 Javascript 示例：**

```
function postToFeed() {
    // calling the API ...
    var obj = {
        method: 'feed',
        link: 'https://developers.facebook.com/docs/reference/dialogs/',
        picture: 'http://fbrell.com/f8.jpg',
        name: 'Facebook Dialogs',
        caption: 'Reference Documentation',
        description: 'Using Dialogs to interact with users.'
    };

    function callback(response) {
        alert("Post ID: " + response['post_id']);
    }

    FB.ui(obj, callback);
} 
```

文档：[https ://developers.facebook.com/docs/reference/dialogs/feed/](https://developers.facebook.com/docs/reference/dialogs/feed/)

# c# - Mono for Android - 无法构建绑定项目

> ID：11301686
> 
> 赞同：1
> 
> 时间：2012-07-02T21:51:01.667
> 
> 标签：c#, visual-studio, mono, xamarin.android

我们从这里使用 Facebook 绑定项目：[https ://github.com/xamarin/monodroid-samples/tree/master/Facebook](https://github.com/xamarin/monodroid-samples/tree/master/Facebook)

麻烦的是，我的 PC 不会构建项目（Windows 7、Visual Studio 2010）——基本上没有创建 C# 类（没有生成 *.cs 文件或任何东西）。也没有报告错误。

我同事的 Windows 机器工作得很好，而且我们似乎安装了相同版本的所有东西。我尝试重新安装 Java、Android SDK 和 Mono for Android，但没有成功。其他人有这个问题吗？

我也在我的 Mac 上试过，效果很好。

我的电脑信息

*   Java 6 更新 31
*   Java SE 开发工具包 6 更新 31
*   视窗 7 64 位
*   安卓 SDK 工具 1.16
*   适用于 Android 4.2.3 的单声道
*   视觉工作室 2010
*   MonoDevelop 3.0.3.2
*   使用 Xamarin Mono for Android Installer 3.0.0.0

# c# - MonoTouch.Dialog：在搜索上启用 ScopeButton 会删除搜索事件

> ID：11301691
> 
> 赞同：1
> 
> 时间：2012-07-02T21:51:51.713
> 
> 标签：c#, ios, mono, xamarin.ios, monotouch.dialog

我不确定这是否是一个错误。

在 MonoTouch.Dialog 中启用 ScopeButton 并连接 Index Change 事件：

```
 UISearchBar sb = TableView.TableHeaderView as UISearchBar;
        sb.ScopeButtonTitles = new string[] { "Full Text".t(), "Titles".t() };
        sb.ShowsScopeBar = true;
        sb.SizeToFit();
        sb.SelectedScopeButtonIndexChanged += (sender, e) => {
            CreateRoot(sb.Text);
        }; 
```

然后覆盖搜索功能：

```
 public override void FinishSearch()
    {
        //do nothing, leave the UI 
    }

    public override void OnSearchTextChanged(string text)
    {
        CreateRoot(text);
    }

    public override void SearchButtonClicked(string text)
    {
         //Do nothing, leave the UI
    } 
```

结果是 OnSearchTextChanged 永远不会触发。

如果您删除后续行，它会触发并正常工作。

```
//Remove to re-enable SearchButtonClicked
sb.SelectedScopeButtonIndexChanged += (sender, e) => {
CreateRoot(sb.Text);
}; 
```

注意：如果您通过子视图访问 SearchBar 的 UISegment 控件，它可以正常工作

```
 foreach (UIView v in sb.Subviews)
    {
        var seg = v as UISegmentedControl;
        if(seg!=null)
        {
            CreateRoot("Some text");
        };
        break;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T19:04:57.887

这已在最新版本的 MOnotouch.dialog 中得到修复

# c++ - 带有 OpenGL 和 C++ 的 2D 平台游戏相机

> ID：11301693
> 
> 赞同：1
> 
> 时间：2012-07-02T21:52:02.043
> 
> 标签：c++, opengl, camera, glut

我正在尝试使用 OpenGl 和 C++ 过剩来制作 2D 平台游戏。您可以使用左右箭头键移动您的播放器并使用空间跳跃。我通过文本文件将所有平台加载到游戏中并打印到屏幕上。这一切都很好。我遇到的问题是相机。当按下右箭头键时，我让玩家 x 位置增加。问题是，当这种情况发生时，我也无法让实际的相机移动。这让我觉得我应该使用 glTranslatef 将所有平台向左平移，而不是移动播放器。这对我来说似乎有点奇怪，我只是想知道这是否应该这样做。所以我想最后一个问题是，我应该翻译整个场景还是移动玩家？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T22:03:26.493

实际上，当您在 OpenGL 中“移动相机”时，由于实际上没有相机，因此内部所做的就是将场景中的所有内容都向相反方向移动。

至于解决方案，如果您使用的是 glut，您可以使用

```
gluLookAt(x,  y,  z,
          ex, ey, ez,
          0,  1,  0) 
```

其中 (x, y, z) 是您希望相机所在的坐标，(ex, ey, ez) 是您希望相机查看的方向矢量（参考 (x, y, z) 坐标) 和 (0, 1, 0) 是向上向量。此函数执行所有必要的矩阵变换。更多信息[在这里](http://pyopengl.sourceforge.net/documentation/manual/gluLookAt.3G.html)

如果您不使用 glut，而仅使用原始 OpenGL，则相同的链接还解释了您必须使用的等效 opengl 调用来实现与 gluLookAt 完全相同的效果

所以当你想移动相机时（可能只有左右，因为它是一个平台游戏）你只需要改变 x 值

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T21:54:15.627

`glTranslate`通过与玩家相反的方向移动相机以跟随玩家。

您应该将相机视为类似于玩家和其他可移动物品的游戏对象，而将关卡视为具有固定位置的静态对象。这使得放置游戏内物品和其他东西变得更加容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-28T07:25:49.367

我使用以下方法得到了这个工作..

```
gl.PushMatrix()
gl.Translatef((1280/2)-float32((player.Body.Position().X)), 0, 0.0)

//Rest of drawing Code Code

gl.PopMatrix() 
```

这是使用 OpenGL + Chipmunk Physics（在 GoLang 中，但应该适用，因为这些只是 c 绑定）。在这种情况下，1280 是屏幕宽度。

# android - 单选列表项不填充

> ID：11301700
> 
> 赞同：0
> 
> 时间：2012-07-02T21:53:04.553
> 
> 标签：android, listview, layout, radio-button

我正在构建一个底部带有按钮的单一选择列表，但我似乎无法在实际列表中显示文本。基本上，这是一个简单的实现，如下所示：

```
public class SetPrefsActivity extends ListActivity{ 
@Override
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.radiolist);
    ArrayList<Hall> listItems = new ArrayList<Hall>();
    ArrayAdapter<Hall> ar = new ArrayAdapter<Hall>(this, android.R.layout.simple_list_item_single_choice, listItems);
    setListAdapter(ar);
    ListView lv = getListView();
    lv.setTextFilterEnabled(true);

    lv.setOnItemClickListener(new OnItemClickListener()
    { ... //stuff});

    ...

    //((ArrayAdapter<Hall>)getListAdapter()).add(stuff)
    ...
} 
```

radiolist 的 Xml 是：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ListView
    android:id="@android:id/list"
    android:layout_weight="1"
    android:layout_width="0dp"
    android:layout_height="0dp"
    android:drawSelectorOnTop="false"
    />
    <Button
    android:id="@+id/theButton"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Click to go to next Activity"
    />
</LinearLayout> 
```

我看到的是列表应该去的黑色区域，然后是它下面的按钮。在我添加之前：`setContentView(R.layout.radiolist);`它显示了填充列表就好了。如何让它显示在此布局中？

对不起，我刚刚进入安卓！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T21:54:48.957

除了改变你的宽度，你应该添加：`android:cacheColorHint="#00000000"`

这是一个可能有帮助的链接：[http ://android-developers.blogspot.com/2009/01/why-is-my-list-black-android.html](http://android-developers.blogspot.com/2009/01/why-is-my-list-black-android.html)

否则，当您滚动时，您会在滚动列表时看到黑框和其他不需要的结果。

# regex - 搜索“word<>”并替换为“word=word1”

> ID：11301703
> 
> 赞同：0
> 
> 时间：2012-07-02T21:53:34.900
> 
> 标签：regex, notepad++

我有一个包含以下信息的文件：

```
dog<>
cat<>
cow<>
bird<>
tiger<>
lion<>
puma<> 
```

是否有可能在记事本++中运行搜索和替换，这会产生如下内容：

```
dog=dog1
cat=cat1
cow=cow1
bird=bird1
tiger=tiger1
lion=lion1
puma=puma1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T21:57:25.250

寻找：

```
^(.+)<>$ 
```

用。。。来代替

```
\1=\11 
```

# linux - 从属模式下类似于 mplayer 的命令行音频播放器

> ID：11301706
> 
> 赞同：0
> 
> 时间：2012-07-02T21:54:07.657
> 
> 标签：linux, audio, command-line, mplayer

我正在寻找可以通过命令行或 STDIN 控制的音频播放器。

我一直在从属模式下使用 Mplayer，但是它在计算音频文件的持续时间方面存在一些错误，导致它无法使用。

有任何想法吗？理想情况下，我希望能够通过 STDIN 将命令传递给播放器，并能够从播放器获取有关其在音频文件中的当前位置的信息。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T16:01:34.667

您可以将 MPD (http://mpd.wikia.com/wiki/Music_Player_Daemon_Wiki) 与 MPC 客户端一起使用。

例如：

```
% mpc status 
36 Crazyfists - At the End of August
[playing] #1/24   0:06/3:58 (2%)
volume: 79%   repeat: off   random: off   single: off   consume: off 
```

# java - 数据库重新启动后尝试重新连接 jdbc 池数据源

> ID：11301707
> 
> 赞同：20
> 
> 时间：2012-07-02T21:54:08.107
> 
> 标签：java, tomcat, datasource, jdbc-pool

我有一个带有 Java 后端的 Web 应用程序，它使用[Tomcat jdbc-pool](http://people.apache.org/~fhanik/tomcat/jdbc-pool.html)进行数据库连接。这工作正常。

但是，我试图在将其导出到其他位置之前对其进行万无一失，最近发生了一种情况，有人重新启动了 SQL Server 数据库服务，但没有重新启动 Tomcat 服务。这导致了 SQLException：`java.sql.SQLException: I/O Error: Connection reset by peer: socket write error`直到我重新启动 Tomcat，强制 jdbc-pool 数据源重新连接。

我在 Tomcat jdbc-pool 文档中寻找某种配置来告诉数据源尝试重新连接，但我找不到任何东西。

有谁知道这是否有某种配置，或者我应该在每次请求之前检查这个条件吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-02T22:48:00.017

不是 100% 确定这是否是您的问题，但在[http://www.tomcatexpert.com/blog/2010/04/01/configuring-jdbc-pool-high-concurrency](http://www.tomcatexpert.com/blog/2010/04/01/configuring-jdbc-pool-high-concurrency)上，它说您可以`testOnBorrow`使用`validationQuery`.

```
<Resource type="javax.sql.DataSource"
            ...
            testOnBorrow="true"
            validationQuery="SELECT 1"
            removeAbandoned="true"
            /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-20T23:17:52.933

在检查相同的问题时，我遇到了这篇文章，其中包含所有应用服务器的自动连接配置。

以下是我在tomcat中用于自动连接的配置供参考。

```
 <Resource auth="Container"
driverClassName="oracle.jdbc.OracleDriver"
initialSize="5"
maxActive="120"
maxIdle="5"
maxWait="5000"
name="jdbc/oracle/myds"
password="secret"
poolPreparedStatements="true"
type="javax.sql.DataSource"
url="jdbc:oracle:thin:@DBHOSTNAME:1521/ServiceName"
username="testuser"
validationQuery="select 1 from tab"
testOnBorrow="true"/> 
```

所有应用程序服务器的完整自动连接配置可以[在 Java 应用程序服务器中的数据源自动](http://www.techpaste.com/2016/04/jndi-autoreconnect-java-application-servers/)重新连接中找到。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-30T00:05:59.600

只是为了补充纳坦考克斯的答案

参考 - [http://tomcat.apache.org/tomcat-8.0-doc/jdbc-pool.html#Common_Attributes](http://tomcat.apache.org/tomcat-8.0-doc/jdbc-pool.html#Common_Attributes)

```
<Resource type="javax.sql.DataSource"
        ...
        testOnBorrow="true"
        validationQuery="SELECT 1"
        removeAbandoned="true"
        /> 
```

与 Geronimo 相比，我仍然想使用 validationQuery

**数据库验证查询说明**

**hsqldb** -`select 1 from INFORMATION_SCHEMA.SYSTEM_USERS`

**甲骨文**——`select 1 from dual`

**DB2** -`select 1 from sysibm.sysdummy1`

**mysql** -`select 1`

**微软 SQL Server** -`select 1`

**PostgreSQL** -`select 1`

**入口**——`select 1`

**德比**-`values 1`

**H2** -`select 1`

**火鸟**-`select 1 from rdb$database`

参考 - [DBCP - 不同数据库的validationQuery](https://stackoverflow.com/questions/10684244/dbcp-validationquery-for-different-databases)

# c# - （消费）可互换的 WCF 和 JAX-WS 服务

> ID：11301709
> 
> 赞同：0
> 
> 时间：2012-07-02T21:54:14.177
> 
> 标签：c#, .net, wcf, jax-ws

我有 N 个“客户”，每个客户都必须为我的 .Net 应用程序实现一个 Web 服务才能使用。我不想为每个客户端添加服务引用，因为它们可以随时更改，以及 URL，因此我将 URL 存储在数据库中，并根据我要访问的客户端动态创建端点。

我想知道我是否必须强迫我的客户编写相同类型的服务（WCF 或 JAX-WS），或者我仍然可以连接到一个或另一个**而不**编写某种条件逻辑。

```
ie. If JAX-WS then "do this" ELSE IF WCF "do other stuff" 
```

我还想知道添加 WS-*(wshttpbinding) 安全性是否会增加这两种技术的互操作性（或可互换性）的复杂性。

对这种方法的任何评论将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T15:35:45.333

无需使用 if-else 即可实现这一点，所有客户端/实现（.NET 和 Java）都必须使用相同的合同（WSDL），这应该不是一个大问题。

对于 WS-*，仅使用 .NET 非常容易，但很难（并非不可能）让它从 .NET 工作到 Java，所以我通常最终使用带有基本身份验证（用户名/密码）或证书的 SSL 进行 basicHttp。这比从 .NET 到 Java 的 wsHttpBinding 要容易得多。

就像 Cheeso 所说，从 WSDL 开始，即在 .NET 中创建客户端和服务，这将为您提供 WSDL，然后获取该 WSDL 并使用它来实现 Java 客户端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T15:32:20.183

首先从 WSDL 开始。如果你不知道这意味着什么，请谷歌它。

这并不能保证互操作性，但它会让你在这条道路上走得很远。

至于添加 WS-*，是的，这引入了额外级别的互操作挑战。

# c++ - std:list 迭代器在解构期间访问时将遍历空列表，std:vector 不会

> ID：11301711
> 
> 赞同：0
> 
> 时间：2012-07-02T21:54:16.237
> 
> 标签：c++, stl

我有一个私人会员

```
std::list<MyClass*> myclass_list; 
```

这是其他类的一部分。

当我关闭控制台应用程序时，将调用 OtherClass 的空析构函数。问题是，在析构函数调用期间 - OtherClass 中的某些方法想要迭代 myclass_list - 例如

```
for(std::list<MyClass*>::iterator it = myclass_list.begin(); it != myclass_list.end(); ++it) {      
    // do stuff
} 
```

现在，即使 myclass_list 是空的（并且在其生命周期内从未为其分配/添加单个变量） - for 循环将至少迭代一次 - 基本上访问不存在的 MyClass 对象。

当我从 std::list 切换到 std::vector 时，这一切都消失了。

1.  此处列表的 STL (VS2010) 有什么问题？我如何检查无效列表（！= 0 或 !vector 不起作用，没有重载运算符）。
2.  我认为它适用于向量，因为它使用连续内存，因此循环永远不会被执行。

编辑：好的，我认为问题可能在于访问无效的 Otherclass 对象，该对象当前调用了析构函数。Otherclass 是一个全局对象。

工作流程 ~OtherClass -> 删除 someMemberObject -> ~someMemberObject -> otherclass->CheckMyClassList(someMemberObject) -> 崩溃

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T22:14:55.153

成员变量的析构函数以声明的相反顺序调用。

所以，如果任何成员变量的析构函数需要访问其他成员变量，那么使用的变量应该在*之前*声明：

```
class OtherClass
{
    std::list<MyClass*> myclass_list;
    someMemberObject member;
}; 
```

如果变量以相反的顺序定义，那么当`~someMemberObject()`被调用时，`myclass_list`析构函数就会被调用，任何使用它都会导致未定义的行为。

# html - Git web 开发工作流程，提交链接到缩小的 css 和 js？

> ID：11301712
> 
> 赞同：0
> 
> 时间：2012-07-02T21:54:21.370
> 
> 标签：html, git, minify

我已经阅读了关于实现 git hooks 以在提交后缩小 css 和 js 源文件（因为不应提交缩小的资产），但是在 HTML 页面中提交指向这些文件的实际链接时，最佳做法是什么？

我能想到的唯一选择是：

Git 提交带有缩小源文件链接的 HTML 页面，但在存储库中没有缩小源文件：

```
<link href="/assets/css/application.min.css" rel="stylesheet">
<script src="/assets/js/application.min.js"></script> 
```

Git 提交带有开发源文件链接的 HTML 页面，并在部署后更改为缩小：

```
<link href="/assets/css/application.css" rel="stylesheet">
<script src="/assets/js/application.js"></script> 
```

我确信有一个简单而有效的工作流程可以实现我不知道的这一点。提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T22:04:58.550

对于这样的事情，我更喜欢将它放在一个示例配置文件中并提交它。在开发和部署期间，该示例配置文件被复制到其正确的名称，并根据需要进行修改以满足需求。这样，您就不会对特定部署环境的跟踪文件进行不必要的修改。

例子：

```
# config.conf.sample
main_css = application.min.css
main_js = application.min.js 
```

在开发过程中，我们只需将 config.conf.sample 复制到 config.conf 并相应地修改条目：

```
# config.conf
main_css = application.css
main_js = application.js 
```

在部署期间，由于条目与我们想要的匹配，一个简单的副本就足够了。

此设置也适用于您不想将包含数据库连接密码的配置文件提交到存储库的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T12:25:24.727

我已经决定了在 HTML 页面中提交指向缩小源文件的链接的路线，但在存储库中没有缩小源文件。这意味着当我在开发版本上工作时，我依靠中间工具（例如 CodeKit）来自动缩小源文件，但到目前为止，这是一个对我来说运行良好的工作流程。

# c - 与 Doxygen 的 typedef 的同一行文档

> ID：11301715
> 
> 赞同：1
> 
> 时间：2012-07-02T21:54:39.997
> 
> 标签：c, doxygen

我有一个 C 头文件，其中包含很多 typedef 和`#defines`. 我希望能够让 Doxygen 接受同一行的评论，如下所示：

```
typedef uint32_t   U_NUM_LOGPLTNTRY;        //!< Number of U_LOGPLTENTRY
typedef uint32_t   U_NUM_RECTL;             //!< Number of U_RECTL 
```

和这个：

```
#define U_SRCCOPY     0xcc0020  //!< info for srccopy
#define U_SRCPAINT    0xee0086  //!< info for srcpaint 
```

但是，这两种形式都不起作用。对于 typedef，注释应用于以下行。对于`#define`s，评论消失在以太中。如果在 a`//!`之前有一行，`#define`则该注释与以下 相关联`#define`。但是我*真的*不想把所有的评论都抵消一行！

是否有 Doxygen 语法可以做到这一点？我正在使用在 Windows 上运行的 Doxygen 1.8.1.1。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T23:16:29.893

这对我有用。我的猜测是，问题是由您向我们展示的片段**上方的某些东西引起的。**如果 . 的正上方有一个 Doxygen 注释块`typedef`，Doxygen 可能会将其与内联注释相关联，`typdef`而不是内联注释。看看周围的 Doxygen 评论，确保没有发生这样的事情。

您也可以尝试将 typedef 自己放在标头中，看看 Doxygen 是否正确处理它们。如果是这样，那么问题很可能出在受影响的 typedef 上方的文件中。

此外，Doxygen 是否在命令行上产生任何有用的输出？如果没有，请尝试在您的`.doxyfile`:

*   `QUIET=NO`
*   `WARNINGS=YES`
*   `WARN_IF_DOC_ERROR=YES`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T15:45:38.783

我还没有仔细研究真正的包含文件，这个文件很大，但是在一个小的测试文件中，这种格式正确地关联了组描述和每行描述：

```
/** \defgroup ABC Description of ABC group
  More information on the ABC group.
  And yet more.
  @{
*/
typedef uint32_t   U_ONE_NAME;        //!< One name
typedef uint32_t   U_TWO_NAME;        //!< Two name
/** @} */ 
```

原始文件有一个“组描述”行，如：

```
//! Describe the next few lines 
```

在作为逻辑组的行之前。这种格式不正确——它只将描述与下一行相关联，也许其中太多最终导致了移位问题。

# excel - excel VBA在邮件合并过程中提示时自动选 择是

> ID：11301716
> 
> 赞同：3
> 
> 时间：2012-07-02T21:54:40.573
> 
> 标签：excel, vba, alert, blocking, mailmerge

我希望系统对我的用户尽可能自动化。现在，我有在用户单击按钮时运行的代码。该代码获取数据的目的是通过邮件合并将其应用于 Word 文档。

一切都按预期工作，除了总是弹出一条消息说

> 打开此文档将运行以下 SQL 命令：
> 
> 选择 * FROM 'TAGS$'
> 
> 数据库中的数据将被放置在文档中。你想继续吗？

我需要尽可能简单地保持这一点，而不会冒着用户选择“否”的风险，因为他们感到困惑。VBA 如何自动继续并接受数据放置，就像他们选择“是”一样？

我尝试仅使用以下代码来阻止警报，希望它会默认为“是”并继续，但它不起作用。

```
Application.DisplayAlerts = False 
```

这就是我所拥有的

```
Sub RunMailMerge()

    Application.ScreenUpdating = False

    Dim wdOutputName, wdInputName As String
    wdOutputName = ThisWorkbook.Path & "\nametags - " _
        & Format(Date, "d mmm yyyy")
    wdInputName = ThisWorkbook.Path & "\nametags.docx"

    ' open the mail merge layout file
    Dim wdDoc As Object
    Set wdDoc = GetObject(wdInputName, "Word.document")
    wdDoc.Application.Visible = True

    With wdDoc.MailMerge
         .MainDocumentType = wdFormLetters
         .Destination = wdSendToNewDocument
         .SuppressBlankLines = True
         .Execute Pause:=False
    End With

    'Application.ScreenUpdating = True

    'show and save output file
    wdDoc.Application.Visible = True
    wdDoc.Application.ActiveDocument.SaveAs wdOutputName

    ' cleanup
    wdDoc.Close SaveChanges:=False
    'activedoc.Close
    Set wdDoc = Nothing

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T23:19:07.630

尝试在 Word 中设置 DisplayAlerts 属性（如果这是警报的来源）：

```
Dim tmp as Long

tmp = wdDoc.Application.DisplayAlerts 

wdDoc.Application.DisplayAlerts = wdAlertsNone
'do the action which causes the prompt
wdDoc.Application.DisplayAlerts = tmp 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-08T16:04:56.790

[http://support.microsoft.com/kb/825765](http://support.microsoft.com/kb/825765)

> 词 2013

HKEY_CURRENT_USER\Software\Microsoft\Office\15.0\Word\Options

"SQLSecurityCheck"=dword:00000000

```
Start Registry Editor.
Locate and then click the following registry key:

HKEY_CURRENT_USER\Software\Microsoft\Office\15.0\Word\Options
On the Edit menu, point to New, and then click DWORD Value.
Under Name, type:

SQLSecurityCheck
Double-click SQLSecurityCheck.
In the Value data box, type:

00000000
Click OK. 
```

> 词 2010

HKEY_CURRENT_USER\Software\Microsoft\Office\14.0\Word\Options

"SQLSecurityCheck"=dword:00000000

```
Start Registry Editor.
Locate and then click the following registry key:
HKEY_CURRENT_USER\Software\Microsoft\Office\14.0\Word\Options
On the Edit menu, point to New, and then click DWORD Value.
Under Name, type:
SQLSecurityCheck
Double-click SQLSecurityCheck.
In the Value data box, type:
00000000
Click OK. 
```

> 词 2007

HKEY_CURRENT_USER\Software\Microsoft\Office\12.0\Word\Options

"SQLSecurityCheck"=dword:00000000

```
Start Registry Editor.
Locate and then click the following registry key:
HKEY_CURRENT_USER\Software\Microsoft\Office\12.0\Word\Options
On the Edit menu, point to New, and then click DWORD Value.
Under Name, type:
SQLSecurityCheck
Double-click SQLSecurityCheck.
In the Value data box, type:
00000000
Click OK. 
```

> 词 2003

HKEY_CURRENT_USER\Software\Microsoft\Office\11.0\Word\Options

"SQLSecurityCheck"=dword:00000000

```
Start Registry Editor.
Locate and then click the following registry key:
HKEY_CURRENT_USER\Software\Microsoft\Office\11.0\Word\Options
Click Edit, point to New, and then click DWORD Value.
Under Name, type:
SQLSecurityCheck
Double-click SQLSecurityCheck.
In the Value data box, type:
00000000
Click OK. 
```

> Word 2002 服务包 3

HKEY_CURRENT_USER\Software\Microsoft\Office\10.0\Word\Options

"SQLSecurityCheck"=dword:00000000

为此，请按照下列步骤操作：

```
Start Registry Editor.
Locate and then click the following registry key:
HKEY_CURRENT_USER\Software\Microsoft\Office\10.0\Word\Options
Click Edit, point to New, and then click DWORD Value.
Under Name, type:
SQLSecurityCheck
Double-click SQLSecurityCheck.
In the Value data box, type:
00000000
Click OK. 
```

# bash - 使用 net use 从批处理文件在 Mac 上挂载共享

> ID：11301721
> 
> 赞同：0
> 
> 时间：2012-07-02T21:55:21.447
> 
> 标签：bash, scripting, batch-file

我在一个混合环境中，并负责通过使用他们已经创建的批处理脚本为他们的 Windows 登录安装 Mac 用户的共享。

我有两个主要问题。

1.  尝试在 Mac 上的脚本中读取 NETLOGON 共享

2.  试图将这些脚本中的 net use 命令转换为 mac 可以使用的东西。

我大部分时间都花在将整个 net use 命令转换为可用于 mac 的部分上。

我开始：

```
IFS='
'

arr=($(grep '\\' /Users/tjguidry/Desktop/tjguidry.bat | tr "[A-Z]" "[a-z]")) 
```

预期的数组是这样的（基于我已经拥有的文件）：

```
net use n: \\domain\dfs1\share1 /persistent:no
net use r: \\domain\dfs1\share2 /persistent:no
rem net use o: \\domain\dfs1\share3 /persistent:no
rem net use p: "\\domain\dfs1\share4" /persistent:no 
```

grep 命令在终端中单独执行它应该做的事情但是当我输出数组时，\domain 中的第一个斜杠被切断，并且对于以字母“a”开头的某些共享（即 \domain\dfs1\admin）它切断输出中的“\ a”。所以我得到：

```
net use n: \domain\dfs1\share1 /persistent:no
net use r: \domain\dfs1\share2 /persistent:no
rem net use o: \domain\dfs1hare3 /persistent:no
rem net use p: "\domain\dfs1hare4" /persistent:no 
```

无论我如何尝试逃避斜线，我似乎也无法切断“\\”来尝试摆脱字符串的第一个放置。

理想情况下，我想将输出转换为类似 smb://domain/dfs1/share1 的东西，以便 mac 能够安装它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T14:02:46.937

这似乎可以正确处理文件输入：

```
IFS='
'
arr=($(grep '\\' /Users/tjguidry/Desktop/tjguidry.bat | tr "[A-Z]" "[a-z]" | sed s:\"::g | sed s:\\\\:\/:g | sed 's|/persistent:no||g' | sed 's|net use [a-z]: ||g') ) 
```

# java - 在 JFrame 中使用线程

> ID：11301724
> 
> 赞同：0
> 
> 时间：2012-07-02T21:56:02.883
> 
> 标签：java, multithreading, swing, jframe

我有一个包含面板的 mainFrame。只要应用程序正在运行，我希望在此面板中更改标签图像的线程...

当我创建实现可运行的面板，然后在大型机中创建此面板的一个实例时，应用程序进入无限循环......我的代码如下：

```
public mainFrame()
{
     BanerPanel baner = new BanerPanel();
     baner.run();
}

public class Banner_Panel extends JPanel implements Runnable {

    public Banner_Panel() {
        initComponents();
        imgPath = 2;
        imgLbl = new JLabel(new ImageIcon(getClass().getResource("/Photos/banner_4-01.png")));
        add(imgLbl);
        //run();
    }
    @Override
    public void run() {
        while(true)
        {
            try {
            while (true) {
                Thread.sleep(3000);
                switch(imgPath)
                {
                    case 1:
                        imgLbl.setIcon(new ImageIcon(getClass().getResource("/Photos/banner_4-01.png")));
                        imgPath = 2;
                        break;
                    case 2:
                        imgLbl.setIcon(new ImageIcon(getClass().getResource("/Photos/banner_1-01.png")));
                        imgPath = 3;
                        break;
                    case 3:
                        imgLbl.setIcon(new ImageIcon(getClass().getResource("/Photos/banner_2-01.png")));
                        imgPath = 4;
                        break;
                    case 4:
                        imgLbl.setIcon(new ImageIcon(getClass().getResource("/Photos/banner_3-01.png")));    
                        imgPath = 1;
                        break;
                }

            }
            } catch (InterruptedException iex) {}
        }
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-02T21:57:53.753

*   不要调用`JLabel#setIcon(...)`后台线程，因为这必须在 Swing 事件线程或 EDT 上调用。相反，为什么不简单地使用我们的 Swing Timer？
*   此外，无需不断地从磁盘读取映像。取而代之的是，一次读取图像并将 ImageIcons 放在一个数组中，或者`ArrayList<ImageIcon>`简单地遍历 Swing Timer 中的图标。
*   您的代码实际上不使用后台线程，因为您`run()`直接在 Runnable 对象上调用，该对象根本不执行任何线程。请阅读[线程教程](http://docs.oracle.com/javase/tutorial/essential/concurrency/runthread.html)以了解如何使用 Runnables 和线程（提示您调用`start()`线程）。

例如

```
// LABEL_SWAP_TIMER_DELAY a constant int = 3000
javax.swing.Timer myTimer = new javax.swing.Timer(LABEL_SWAP_TIMER_DELAY, 
      new ActionListener(){
  private int timerCounter = 0;

  actionPerformed(ActionEvent e) {
    // iconArray is an array of ImageIcons that holds your four icons.
    imgLbl.setIcon(iconArray[timerCounter]);
    timerCounter++;
    timerCounter %= iconArray.length;
  }
});
myTimer.start(); 
```

更多信息，请查看[Swing Timer 教程](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)。

# javascript - 居中可拖动的增长 div

> ID：11301725
> 
> 赞同：0
> 
> 时间：2012-07-02T21:56:11.307
> 
> 标签：javascript, jquery, draggable, centering

我有一个可以拖动和缩放的 div。它可能比窗口大也可能不比窗口大，我正在尝试编写一个函数，当 div 的宽度或高度发生变化时（通过缩放函数），它将保持它以相对于窗口的当前中心为中心。为此，我需要将其顶部和左侧（或它的边距，但更喜欢顶部和左侧位置）更改为与其当前顶部和左侧位置相关的数字。我只是无法理解函数的逻辑，它将使其保持在当前位置的中心。要完全居中，我只需将其顶部和左侧更改为 div 大小的 (-) 一半，但要使其围绕当前中心居中，我该怎么办！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T22:56:43.727

根据您增加 div 宽度/高度大小的方式，您只需更改 div 的边距以反映大小变化的一小部分。您还可以考虑以类似方式更改左/上绝对值。

例如，使用 jQuery 动画：

```
$("#draggable").animate({
    height: '+=60',
    width: '+=60',
    marginLeft: '-=30',
    marginTop: '-=30'
},1000); 
```

**例子：**

[http://jsbin.com/ikabih/2/edit](http://jsbin.com/ikabih/2/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T00:34:09.343

在朋友的帮助下得到它。。

```
function changeZoom(amount)
{   
    var oldWidth = $('#zoom').width(), oldHeight = $('#zoom').height();
    if(oldWidth == amount){return false}
    var xPercent = (($('#viewer').width() / 2) + Math.abs($('#zoom').position().left)) / oldWidth,
    yPercent = (($('#viewer').height() / 2) + Math.abs($('#zoom').position().top)) / oldHeight;

    var newLeft = (amount * xPercent) - ($('#viewer').width() / 2),
    newTop = (amount * yPercent) - ($('#viewer').height() / 2);

    newLeft = 0 - newLeft;
    newTop = 0 - newTop; 
```

}

# scala - 如何在任何对象上使用 applyDynamic

> ID：11301726
> 
> 赞同：1
> 
> 时间：2012-07-02T21:56:35.627
> 
> 标签：scala, dynamic

我正在考虑使用新的动态类型，但发现一个明显的用例没有很好地实现。我正在尝试为面向对象的数据库创建方便的包装器。它存在转换和可用性问题，因为它序列化和反序列化对象（它的方法返回对象）。

第一个问题：我的数据库的 get 方法反序列化了 A 类型的对象。虽然 A 有一个方法 a()，而且我可能知道在给定的时刻，我有一个 A，但我不能调用 a()，因为 java只看到对象。如果“基础”对象实际上具有该方法，动态机制是否会为我尝试，还是我必须自己在 applyDynamic 中处理它？我在 REPL 中尝试过，似乎对我没有这样做。如果我必须自己检查，最简单的方法是什么（是否使用 scala 的新反射）来检查该对象是否具有方法“方法名”，如果是则调用它。

被这个[https://stackoverflow.com/a/11056410/703862](https://stackoverflow.com/a/11056410/703862)吓到了， 我回退到 java 的反射，它很容易完成方法调用部分。

我想出了这个：

```
 scala> import java.lang.reflect.Method
 import java.lang.reflect.Method

 scala> class DynTest3 extends Dynamic {
 | def pee():String = "yuppie"
 |   def execSucced(method: Method, args: Any*):Boolean = return try{method.invoke(args); true} catch { case e: Exception => false }
 | def applyDynamic(methodName : String)(args: Any*){
 |     val succed = classOf[DynTest3].getDeclaredMethods.filter(m => m.getName() == methodName).exists(m => execSucced(m))
 | if (!succed)
 | throw new java.lang.NoSuchMethodException
 | }
 | }
 defined class DynTest3 
```

但：

```
 scala> val y: Object = new DynTest3
 y: Object = DynTest3@74c74b55

 scala> y.asInstanceOf[Dynamic].pee()
 <console>:11: error: value applyDynamic is not a member of Dynamic
          y.asInstanceOf[Dynamic].pee() 
```

所以基本上，这不起作用，即使我转换为动态。投射到动态已经会使整个事情变得无用，因为我想使用户免于投射。但也许可以创建一个隐式转换 any2Dynamic ...

有什么提示吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T08:11:51.423

`Dynamic`在 Scala 中是一个简单的编译时重写方案。详细信息在[SIP-17: Type Dynamic](https://docs.google.com/document/d/1XaNgZ06AR7bXJA9-jHrAiBVUwqReqG4-av6beoLaf3U/edit)中提供，在这里我将尝试用不同的语言来解释它们。

与在 C# 中`dynamic`引入元对象、绑定器和调用站点缓存的整个基础架构 + 实现了一个 mini-C# 编译器不同，该编译器在运行时为重载提供服务，在 Scala 中，我们决定采用最简单的方法。

我已经提到了编译时重写，现在是时候详细说明了。有几条规则，但让我们看一下最重要的一条。

*如果我们无法编译 foo.bar(arg1 ... argN)，并且 foo 有一个静态类型，它是 Dynamic 的子类型，那么将调用重写为 foo.applyDynamic("bar")(arg1 .. argN)。重写后的表达式将像往常一样进行类型检查，就好像它是由程序员手动编写的一样。*

在您的情况下`y.asInstanceOf[Dynamic].pee()`，调用的接收方 y.asInstanceOf[Dynamic] 绝对是动态子类型的静态类型，因此会触发重写。重写的结果是`y.asInstanceOf[Dynamic].applyDynamic("pee")()`。但是，当 Scala 尝试对该表达式进行类型检查时，它会失败，因为 Dynamic 只是一个空的标记特征，它没有定义任何方法。

为了解决这个问题，您将转换为 Dynamic 子类型并具有 applyDynamic 成员的东西（或者您不转换，但让您的 API 返回的不是对象，而是那个东西）。您可以自己编写这些东西，也可以使用 DynamicProxy（子类化以包含您的自定义逻辑），我希望它会包含在 2.10.0-M5 中。

# php - PHP Logic - 如何处理得分关系？

> ID：11301729
> 
> 赞同：1
> 
> 时间：2012-07-02T21:56:53.383
> 
> 标签：php, logic

我正在尝试根据分数分配奖品。**当涉及到TIE**时，我的逻辑有问题。任何人都可以给我处理 3 人或更多人之间的关系的**逻辑指针吗？**

**更新：** 目标是——

1.  将绑定的人组成一个数组（只有他们）
2.  知道这些人处于什么位置。

我有几个示例阶段，您可以浏览一下：

**示例 1** - 使用 0 条关系

```
<?php
function give_prize($a, $b) {return;}

$prize = array(500, 250, 75);

$user = array(
    'user1' => 650,
    'user2' => 500,
    'user3' => 200,
    'user4' => 100,
);

$prize_count = count($prize);

for ($i = 0; $i < $prize_count; $i++) {
    give_prize($user[$i], $prize[$i]);
} 
```

**示例 2** - 适用于 1 个领带（这是一个好方法吗？）

```
<?php   
for ($i = 0; $i < $prize_count; $i++) {

    if (isset($user[$i+1])) {
        if ($user[$i] == $user[$i++]) {
            // My Tie breaker code
        }
    }
} 
```

**但是在 3 或 4 人的领带中，我会怎么做？如果检查，我应该遵循上述并做更多的事情吗？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T22:05:22.330

我会首先按分数对用户进行分组，然后按降序对这些组进行排序。一旦完成，无论您有什么规则，分配奖品都会更容易。

```
$usersByScore = array();
foreach ($user as $name => $score) {
    $usersByScore[$score][] = $name;
}
krsort($usersByScore); 
```

例如，这将输入`$user`

```
$user = array(
    'user1' => 500,
    'user2' => 400,
    'user3' => 750,
    'user4' => 500,
); 
```

进入`$usersByScore`：

```
$usersByScore = array(
    750 => array('user3'),
    500 => array('user1', 'user4'),
    400 => array('user2'),
); 
```

现在您可以随意发放奖品。

# java - Box.net v2 API 有一个 java 客户端库

> ID：11301730
> 
> 赞同：0
> 
> 时间：2012-07-02T21:57:04.303
> 
> 标签：java, box-api

我一直在寻找一些可以更轻松地在 java 中管理 box v2 api 的库，我发现了这个

[https://github.com/box/box-java-sdk](https://github.com/box/box-java-sdk)

但不确定它是否使用 v2 box.net api。有些人知道java中的库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T22:28:27.793

该库是由第三方基于**v1** API 构建的。如果有 v2 的开发版本，我们将在此处发布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T17:26:51.173

Temboo SDK（以 Java 和其他几种语言提供）目前支持 Box v2 API，并且不断更新以支持新的 Box API 版本。看看[https://live.temboo.com/library/Library/Box/](https://live.temboo.com/library/Library/Box/)

SDK 是一个开放下载，可以在[https://www.temboo.com/download](https://www.temboo.com/download)找到。但是，您需要一个（免费）Temboo 帐户才能使用它进行任何操作。

（全面披露：我在 Temboo 工作）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-20T14:24:50.227

试试 V2 box.net java api 库：[https ://github.com/box/box-java-sdk-v2](https://github.com/box/box-java-sdk-v2)

# c# - WPF - 数据绑定问题

> ID：11301731
> 
> 赞同：1
> 
> 时间：2012-07-02T21:57:19.977
> 
> 标签：c#, wpf

我已成功将控件绑定到页面上的属性。我绑定的属性返回一个类。绑定有效，但如果我将属性设置为类的新实例，则 UI 不会更新。

谁能指出解决这个问题的正确方向，我已经尝试实现 INotifyPropertyChanged 但这不起作用。

代码如下..

XAML - 非常基本，只是试图将标签绑定到属性。

```
<Grid>
        <Label Content="{Binding StudentName}"></Label>
        <Button Width="100" Height="75" Click="Button_Click" ></Button>
</Grid> 
```

C＃

```
this.DataContext = parentWindow.SelectedStudent; 
```

父窗口C#注意父窗口实现INotifyPropertyChanged

```
public event PropertyChangedEventHandler PropertyChanged;

public UCStudent SelectedStudent
{
            get
            {
                if (_selectedStudent == null)
                {
                    _selectedStudent = new UCStudent();
                }

                return _selectedStudent;
            }

            set
            {
                if (_selectedStudent != value)
                {
                    _selectedStudent = value;
                    OnPropertyChanged("SelectedStudent");
                }
            }
 }

 protected void OnPropertyChanged(string name)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null)
        {
            handler(this, new PropertyChangedEventArgs(name));
        }
    } 
```

问题是当我将 SelectedStudent 属性设置为新选择的学生时，绑定不会更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T22:51:10.473

虽然我的方法使用泛型和表达式，所以我可以强烈键入我的属性更改，但概念是相同的。在我使用表达式的地方，您使用字符串。如果 PropertyChanged 为空，您将想要返回。否则，在*不*首先声明新的事件处理程序的情况下触发事件。

```
public event PropertyChangedEventHandler PropertyChanged;

    protected void NotifyPropertyChanged<T>(Expression<Func<T>> expression)
    {
        if (this.PropertyChanged == null) { return; }

        string propertyName = GetPropertyName(expression);

        PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    } 
```

这种方法允许视图模型强类型通知。

```
this.NotifyPropertyChanged(() => this.SelectedApplication); 
```

# r - ggplot2：在分面条形图中删除未使用的因子，但在分面之间没有不同的条形宽度

> ID：11301738
> 
> 赞同：18
> 
> 时间：2012-07-02T21:57:54.740
> 
> 标签：r, ggplot2

```
df <- structure(list(ID = structure(c(1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 
2L, 2L, 2L, 3L, 3L, 3L, 3L, 3L, 3L, 4L, 4L, 4L, 4L, 4L, 4L, 5L, 
5L, 5L, 5L, 5L, 5L, 6L, 6L, 6L, 6L, 6L, 6L, 7L, 7L, 7L), .Label = c("1", 
"2", "3", "4", "5", "6", "7"), class = "factor"), TYPE = structure(c(1L, 
2L, 3L, 4L, 5L, 1L, 2L, 3L, 4L, 5L, 6L, 1L, 2L, 3L, 4L, 5L, 6L, 
1L, 2L, 3L, 4L, 5L, 6L, 1L, 2L, 3L, 4L, 5L, 6L, 1L, 2L, 3L, 4L, 
5L, 6L, 1L, 2L, 3L), .Label = c("1", "2", "3", "4", "5", "6", 
"7", "8"), class = "factor"), TIME = structure(c(2L, 2L, 2L, 
2L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 
2L, 2L, 2L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 
1L, 1L, 1L), .Label = c("1", "5", "15"), class = "factor"), VAL = c(0.937377670081332, 
0.522220720537007, 0.278690102742985, 0.967633064137772, 0.116124767344445, 
0.0544306698720902, 0.470229141646996, 0.62017166428268, 0.195459847105667, 
0.732876230962574, 0.996336271753535, 0.983087373664603, 0.666449476964772, 
0.291554537601769, 0.167933790013194, 0.860138458199799, 0.172361251665279, 
0.833266809117049, 0.620465772924945, 0.786503327777609, 0.761877260869369, 
0.425386636285111, 0.612077651312575, 0.178726130630821, 0.528709076810628, 
0.492527724476531, 0.472576208412647, 0.0702785139437765, 0.696220921119675, 
0.230852259788662, 0.359884874196723, 0.518227979075164, 0.259466265095398, 
0.149970305617899, 0.00682218233123422, 0.463400925742462, 0.924704828299582, 
0.229068386601284)), .Names = c("ID", "TYPE", "TIME", "VAL"), row.names = c(NA, 
-38L), class = "data.frame") 
```

如果我创建以下情节：

```
ggplot(df, aes(x=ID, y=VAL, fill=TYPE)) +
  facet_wrap(~ TIME, ncol=1) +
  geom_bar(position="stack") +
  coord_flip() 
```

![阴谋](../Images/5962ebc2bc7139b824489c8b060d21ce.png)

然后，我决定理想情况下我希望禁止在没有任何数据的方面显示任何因素。我已经引用了各种问题和答案，这些问题和答案说该`scale="free"`方法是要走的路（而不是`drop=TRUE`会丢弃与 中未使用的值相对应的空方面`TIME`），所以接下来：

```
ggplot(df, aes(x=ID, y=VAL, fill=TYPE)) +
  facet_wrap(~TIME, ncol=1, scale="free") +
  geom_bar(position="stack") +
  coord_flip() 
```

![阴谋](../Images/7d0de4696133ef5f822524096457d27a.png)

我的问题是如何防止对具有 4 个条形的刻面与具有 3 个条形的刻面发生条形的重新缩放。在这个人为的例子中效果很微妙，我的实际数据更糟。理想的输出将在垂直轴上具有 ID 因子 1、4 和 6 的底部刻面，条形的宽度与顶部刻面的宽度相同，因此刻面的整体垂直尺寸会减小。

*如果你能帮助我解释为什么计数而不是数值是堆叠的，那么奖励积分（现在已修复）*

**赏金更新：**

正如我在后续[问题](https://stackoverflow.com/questions/11606441/ggplot2-gridextra-how-to-ensure-geom-bar-in-different-size-plot-grobs-result)中提到的，看起来更好的解决方案可能涉及使用`ggplot_build`和`ggplot_table`修改 gtable 对象。我很确定我可以在给定时间的情况下解决这个问题，但我希望赏金可能会激励其他人帮助我。Koshke 已经发布了一些这样的[例子](https://stackoverflow.com/questions/10328888/ggplot2-title-padding-how-to-tweak)。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-02T22:40:49.037

这个怎么样：

```
df$w <- 0.9
df$w[df$TIME == 5] <- 0.9 * 3/4
ggplot(df, aes(x=ID, y=VAL, fill=TYPE)) +
   facet_wrap(~TIME, ncol=1, scale="free") +
   geom_bar(position="stack",aes(width = w),stat = "identity") +
   coord_flip() 
```

![在此处输入图像描述](../Images/7549f7298efd6ee6f789ad36c37a5b96.png)

不确定我是否掌握了算术，但你明白了。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-24T07:55:16.363

如果您对垂直条没问题， facet_grid 可以完美运行：

```
ggplot(df, aes(x=ID, y=VAL, fill=TYPE)) +
  facet_grid(.~TIME, scale="free_x", space = "free_x") +
  geom_bar(position="stack") 
```

![在此处输入图像描述](../Images/c6e4fed63aaa77eead2c270fb8abebb1.png)

更进一步，您可以旋转图表的所有元素。现在，如果您将头转动 90°，您就会得到您想要的 :-)

```
ggplot(df, aes(x=ID, y=VAL, fill=TYPE)) +
  facet_grid(.~TIME, scale="free_x", space = "free_x") +
  geom_bar(position="stack") +
  opts(legend.text = theme_text(angle=90),
       legend.title = theme_text(angle=90),
       strip.text.x = theme_text(angle=90),
       axis.text.x = theme_text(angle=90),
       axis.text.y = theme_text(angle=90),
       axis.title.x = theme_text(angle=90)
       ) 
```

![在此处输入图像描述](../Images/0dcb0e044597c20011fb8f402d9b4363.png)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-10-29T17:20:38.550

自最初的问题以来已有五年多的时间，因此认为它应该提供一个更新和更清洁的版本。这大致遵循此处给出的建议：http: [//ggplot2.tidyverse.org/reference/facet_grid.html](http://ggplot2.tidyverse.org/reference/facet_grid.html)

两个关键参数是`space="free_y"`允许每个面板的高度与比例尺的长度成比例，`scales="free_y"`并且允许比例尺针对每一列而变化。

`coord_flip()`允许水平绘制条形图，并且作为个人喜好，刻面的标签在`theme`选项中旋转。

```
ggplot(df, aes(x=ID, y=VAL, fill=TYPE)) +
  geom_bar(stat="identity") +
  coord_flip() +
  facet_grid(TIME~., scales = "free_y", space = "free_y") +
  theme(strip.text.y = element_text(angle = 0)) 
```

[![在此处输入图像描述](../Images/2c12321fed5b93f7b0f15d2c8078d37d.png)](https://i.stack.imgur.com/IETiS.png)

# java - Opengl多种混合颜色的纹理

> ID：11301741
> 
> 赞同：0
> 
> 时间：2012-07-02T21:58:00.433
> 
> 标签：java, opengl, lwjgl

**为什么纹理的颜色是混合的？我该如何解决？**

这就是我绘制和初始化的方式：

```
private void initGL_3D() {
    int width = Display.getWidth();
    int height = Display.getHeight();
    glLoadIdentity(); // Reset The Projection Matrix
    GLU.gluPerspective(45.0f, ((float) width / (float) height), 0.1f, 100.0f); // Calculate The Aspect Ratio Of The Window
    glMatrixMode(GL_MODELVIEW); // Select The Modelview Matrix

    glLoadIdentity(); // Reset The Modelview Matrix

    glShadeModel(GL_SMOOTH); // Enables Smooth Shading

    glClearDepth(1.0f); // Depth Buffer Setup
    glEnable(GL_DEPTH_TEST); // Enables Depth Testing
    glDepthFunc(GL_LEQUAL); // The Type Of Depth Test To Do
    glHint(GL_PERSPECTIVE_CORRECTION_HINT, GL_NICEST); // Really Nice Perspective Calculations
}

private void initGL_2D() {
    int width = Display.getWidth();
    int height = Display.getHeight();

    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glOrtho(0.0f, width, height, 0.0f, 1, -1);

    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();

    glDisable(GL_DEPTH_TEST);

    // Enable transparency
    glEnable(GL_BLEND);
    glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
}

private void renderGL() {
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    int width = Display.getWidth();
    int height = Display.getHeight();

    glEnable(GL_TEXTURE_2D);

    glViewport(0, 0, width, height); // Reset The Current Viewport\
    glMatrixMode(GL_PROJECTION); // Select The Projection Matrix
    if (game){
        glClearColor(0.0f, 0.0f, 0.0f, 0.0f); // Black Background
        initGL_3D();
        renderGL_3D();
    }
    initGL_2D();
    renderGL_2D();
}

private void renderGL_3D() {
    glLoadIdentity();

    glTranslatef(0, 0f, -3f);

    glRotatef(rotationX, 1.0f,0.0f,0.0f);

    glRotatef(rotationY/4, 0.0f,1.0f,0.0f);

    glActiveTexture(GL_TEXTURE0);
    glBindTexture(GL_TEXTURE_2D, texture1.getTextureID());

    glActiveTexture(GL_TEXTURE1);
    glBindTexture(GL_TEXTURE_2D, texture2.getTextureID());

    glBegin(GL_TRIANGLES);
    glMultiTexCoord2f(GL_TEXTURE0, 0, 0);
    glVertex3f(0, 0, 0);

    glMultiTexCoord2f(GL_TEXTURE0, 1, 0);
    glVertex3f(1, 0, 0);

    glMultiTexCoord2f(GL_TEXTURE0, 0, 1);
    glVertex3f(0, 1, 0);

    glMultiTexCoord2f(GL_TEXTURE1, 1, 1);
    glVertex3f(1, 1, 0);

    glMultiTexCoord2f(GL_TEXTURE1, 1, 0);
    glVertex3f(1, 0, 0);

    glMultiTexCoord2f(GL_TEXTURE1, 0, 1);
    glVertex3f(0, 1, 0);
    glEnd();
}

private void renderGL_2D() {
    if (mainMenu) {
    gui.setBackground(0);
    glLoadIdentity();
    for (Button button : gui.buttons) {
        float posX;
        float posY;

        if (button.posX == "center") {
            posX = Display.getWidth()/2-button.width/2;
        } else {
            posX = Integer.parseInt(button.posX);
        }

        if (button.posY == "center") {
            posY = Display.getHeight()/2-button.height/2;
        } else {
            posY = Integer.parseInt(button.posY);
        }

        if(guiMouseX > posX && guiMouseY > posY && guiMouseX < posX + button.width && guiMouseY < posY + button.height){
            button.textureOver.bind();
            button.mouseOver.run();
            if (Mouse.isButtonDown(0)) {
                button.mouseDown.run();
            }
        } else {
            button.texture.bind();
        }

        float imageWidth = button.texture.getImageWidth();
        float textureWidth = button.width/imageWidth;
        float imageHeight = button.texture.getImageHeight();
        float textureHeight = button.height/imageHeight;

        glBegin(GL_QUADS);
        glTexCoord2f(0, 0);
        glVertex2f(posX, posY);
        glTexCoord2f(textureWidth, 0);
        glVertex2f(posX + button.width, posY);
        glTexCoord2f(textureWidth, textureHeight);
        glVertex2f(posX + button.width, posY + button.height);
        glTexCoord2f(0, textureHeight);
        glVertex2f(posX, posY + button.height);
        glEnd();
    }
    }
} 
```

一切都画得很好，但唯一的问题是纹理颜色混合在一起！

这是我运行应用程序时纹理的外观 ![在此处输入图像描述](../Images/1c96163c2933855f34b1561d36282e0a.png)

这些是具有正常颜色的纹理

![在此处输入图像描述](../Images/725a1623fc1591370b38cc30b2ea7a93.png)

和

![在此处输入图像描述](../Images/aa83310ce0968fd951811e77e9400523.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T22:20:11.277

因为您从“renderGL”内部调用“renderGL_3D”。此函数绘制两个三角形，一个使用纹理 0，另一个使用纹理 1。

左下角三角形的第 0 阶段 texcoords 全部为零。这使它对绿色纹理的左上角进行采样，因此它也是绿色的。因为你已经混合了，第二个白色纹理混合在上面，使它全部变成绿色。

要对此进行测试，请尝试将白色纹理的左上角像素设为洋红色或其他一些易于区分的颜色。现在左下角的三角形应该是一个肮脏的洋红色（由于过滤而混合了一些绿色）。

至于您的解决方案，您需要禁用多纹理混合（不是 GL_BLEND - 它将光栅化器提供的最终颜色混合到帧缓冲区中）。你可以这样做

```
 glActiveTexture(GL_TEXTURE0);
    glTexEnvi(GL_TEXTURE_2D, GL_TEXTURE_ENV_MODE, GL_REPLACE); 
```

和纹理单元 1 相同

```
 glActiveTexture(GL_TEXTURE1);
    glTexEnvi(GL_TEXTURE_2D, GL_TEXTURE_ENV_MODE, GL_REPLACE); 
```

这应该有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-28T12:20:51.233

如果你想对三角形进行多重纹理处理，那么有两个问题：

在第一个三角形上，您只为纹理 1 设置纹理坐标（也应该为纹理 2 设置），

在第二个三角形上，您只为纹理 2 设置纹理坐标（也应该为纹理 1）。

第二个问题是你应该使用 glActiveTextureARB 而不是 glActiveTexture(GL_TEXTURE0)：

```
 //glActiveTexture(GL_TEXTURE0);
 glActiveTextureARB(GL_TEXTURE0_ARB );
 glBindTexture(GL_TEXTURE_2D, texture1.getTextureID());

 //glActiveTexture(GL_TEXTURE1);
 glActiveTextureARB(GL_TEXTURE1_ARB );
 glBindTexture(GL_TEXTURE_2D, texture2.getTextureID()); 
```

这是多重纹理的正确方法。

如果你想要两个具有两种不同纹理的三角形：

*   要么使用 atlas 纹理并将 UV 设置为指向正确的坐标
*   跳过多重纹理，设置第一个纹理，绘制三角形，设置第二个纹理，绘制三角形。

# wpf - 使用匿名类型将数据加载到数据网格中

> ID：11301743
> 
> 赞同：0
> 
> 时间：2012-07-02T21:58:05.833
> 
> 标签：wpf, silverlight, linq, entity-framework

这是正在发生的事情。如果我将以下内容绑定到数据网格

```
var myQ = myDataContext.MyEntity1.Where(e1 => e1.ID == aNum);
datagrid1.ItemSource = myQ 
```

我可以看到数据网格中的数据。

但如果我这样做

```
var myQ = myDataContext.MyEntity1.Join(myDataContext.MyEntity2, e1=>e1.ID, e2 =>e2.ID, (e1,e2) =>new {e1.something, e2.something};
datagrid1.ItemSource = myQ; 
```

数据网格无法加载数据。为什么？与异步有什么关系？那为什么 .Where 工作而 .Join 不会呢？我应该调用什么来更新数据网格以加载它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T02:02:36.173

我可以建议一种差异方法吗？

```
var myQ =  (from a in myDataContext.E1
            join b in myDataContext.E2 on a.id equals b.id
            select new {a.something, b.something}).ToList();
datagrid1.ItemSource = myQ; 
```

希望能帮助到你！

**编辑**

```
var myQ =  (from a in myDataContext.E1
            join b in myDataContext.E2 on a.id equals b.id
            select a).ToList();
datagrid1.ItemSource = myQ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T22:42:59.447

如果您还没有使用过这个工具，我建议您使用[LinqPad](http://www.linqpad.net/)。它将帮助您准确查看 Linq 语句的输出，您还可以查看 Linq 查询生成的精确 SQL。使用它可以快速轻松地测试您的 Linq。

希望这可以帮助。祝你好运！

# google-calendar-api - Google Calendar API 事件插入始终返回 404“未找到”错误

> ID：11301748
> 
> 赞同：22
> 
> 时间：2012-07-02T21:58:23.753
> 
> 标签：google-calendar-api

我从这里尝试了日历插入示例：[https](https://developers.google.com/google-apps/calendar/v3/reference/events/insert#examples) ://developers.google.com/google-apps/calendar/v3/reference/events/insert#examples 无论我使用哪个属性，我总是得到 404“未找到”错误。任何人都可以对此有所了解吗？非常感谢！！！

```
POST https://www.googleapis.com/calendar/v3/calendars/test/events?sendNotifications=false&fields=start&key={YOUR_API_KEY}

Content-Type:  application/json
Authorization:  Bearer ya29.AHES6ZQaT3-Tj_bviwaY9Xi3gDspuBbCtEKtidnZkTXuWpI
X-JavaScript-User-Agent:  Google APIs Explorer

{
 "end": {
  "date": "2012-07-11"
 },
 "start": {
  "date": "2012-07-09"
 }
} 
```

响应：404 未找到

```
{
 "error": {
  "errors": [
   {
    "domain": "global",
    "reason": "notFound",
    "message": "Not Found"
   }
  ],
  "code": 404,
  "message": "Not Found"
 }
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-02T22:22:20.213

我相信它告诉您找不到日历“测试”资源。您是否创建了一个名为“测试”的日历？如果您将“测试”替换为“主要”（您的主日历），那么资源管理器应该可以工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-13T12:36:10.810

致 JuanPablo，Re 非主日历：

在**非主日历**的情况下，您必须使用*id*（以电子邮件地址的形式）作为*calendarId*。

示例：假设您有一个名为“test”的日历。你得到它的*id*是这样的

```
GET https://www.googleapis.com/calendar/v3/users/me/calendarList?key={YOUR_API_KEY}
->
{
 "kind": "calendar#calendarList",
...
 "items": [
  {

   "kind": "calendar#calendarListEntry",
   "etag": ...,
   "id": "123example123example123xxx@group.calendar.google.com",
   "summary": "test",
   "description": "Testing calendar for development of Calendar related applications",
...
   }
  }
 ]
} 
```

您的 POST 将如下所示

```
POST https://www.googleapis.com/calendar/v3/calendars/123example123example123xxx@group.calendar.google.com/events?sendNotifications=false&fields=start&key={YOUR_API_KEY} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-02T01:34:10.933

可能有两个问题：a）。您的日历 ID 不正确。您可以通过以下步骤找到它-

1.  在谷歌日历界面，找到左侧的“我的日历”区域。
2.  将鼠标悬停在您需要的日历上，然后单击向下箭头。
3.  将出现一个菜单。点击“日历设置”。
4.  在屏幕的“日历地址”部分，您将看到您的日历 ID。它通常是您的邮件 ID 或主邮件。

b) 未经授权使用的每日限制可能已超过。通过 [https://www.googleapis.com/calendar/v3/calendars/primary12/events?alt=json](https://www.googleapis.com/calendar/v3/calendars/primary12/events?alt=json) primary12 检查它是您的日历名称

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-09-25T06:27:27.250

在获取特定事件时，我也遇到了与 s=inserting 事件相同的问题。但我有一个替代方案，只需指定 CalendarList asa = service.CalendarList.List().Execute(); 在执行您获得的代码之前。我不知道指定此代码后它运行的原因。如果您找到正确的方法，请在此处更新它，因为它会消耗更多的配额计数。

# objective-c - 使 inputAccessoryView 看起来像默认键盘

> ID：11301761
> 
> 赞同：0
> 
> 时间：2012-07-02T21:59:17.710
> 
> 标签：objective-c, ios, uikeyboard

我创建了一个带有数字的 inputAccessoryView，一切正常。我希望它看起来像 iOS 默认键盘一样。最好的方法是什么？我在网上到处寻找要使用的颜色，但找不到任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T22:19:03.523

获得所需颜色的一种方法是在键盘可见时捕获屏幕。然后，您可以使用您选择的工具查看屏幕截图，以获取各个像素的颜色。

# php - 从 XML 站点地图生成器中删除 php 扩展

> ID：11301763
> 
> 赞同：1
> 
> 时间：2012-07-02T21:59:34.110
> 
> 标签：php, mysql, xml, sitemap

我的开发人员外出度假，我正试图弄清楚如何从我的 XML 站点地图生成器中删除 php 扩展。

这是需要更改的代码：

```
 //remaining main pages:
$pages=array();
$query="SELECT DISTINCT strona FROM `sites_table`";
if($result=$GLOBALS['mysql']->query($query))
{
    $i=0;
    while($row=$result->fetch_assoc())
    {
        if($row['site']!="/index.php")
        {
            $pageName=substr($row['site'],1);
            array_push($pages,$pageName);
            write(insertIntoTemplate($pageName,"0.8","hourly"));
        }
    }
    $result->free();
}
else 
    echo $dbErrorMsg; 
```

MySQL 查询只打印网站数组，例如：news.php、sports.php、political.php 等。

我只需要删除这个 .php 扩展名；）我已经使用特殊的 .htaccess 文件做到了，但现在我只需要通知 Google 我正在使用非 .php 网站。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T22:07:29.827

看起来您应该能够更改线路：

```
$pageName=substr($row['site'],1); 
```

到：

```
$pageName=substr($row['site'],1, -4); 
```

注意：此代码所做的只是删除最后四个字符 - 如果存在预期扩展名的地方、不遵循 .php 模型的项目等，这可能会破坏站点的其他部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T22:29:07.873

这应该对您有用，只要您可以将所有出现的 .php 替换为空字符串。这没有考虑到您的应用程序中可能存在的任何边缘情况，如果您不确定自己，您需要与您的开发人员交谈以确定这一点。

```
//remaining main pages:
$pages=array();
$query="SELECT DISTINCT strona FROM `sites_table`";
if($result=$GLOBALS['mysql']->query($query))
{
    $i=0;
    while($row=$result->fetch_assoc())
    {
        if($row['site']!="/index.php")
        {
            //do a string replace of all occurrences of .php 
            $pageName=substr(str_replace('.php','',$row['site']),1);
            array_push($pages,$pageName);
            write(insertIntoTemplate($pageName,"0.8","hourly"));
        }
    }
    $result->free();
}
else 
    echo $dbErrorMsg; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T09:02:47.040

似乎 $pageName 也用于其他一些页面，所以我就是这样做的，现在没有错误：

```
 //do a string replace of all occurrences of .php 
            $pageName=substr($row['site'],1);
            array_push($pages,$pageName);
            $pageName2=substr(str_replace('.php','',$row['site']),1);
            array_push($pages,$pageName);
            write(insertIntoTemplate($pageName2,"0.8","hourly")); 
```

# jquery - jquery 悬停和单击事件返回多个对象

> ID：11301764
> 
> 赞同：0
> 
> 时间：2012-07-02T21:59:39.680
> 
> 标签：jquery, events, iteration, stoppropagation

我有同一个类的各种元素。

我想为所有元素设置事件，但我只想从第一个元素中收集信息，如下所示：

```
elements[i].before = css($(elements[i].handle).first()); 
```

当我将鼠标悬停在元素上时，它会给我每个元素的警报...太好了！...但是 css() 函数正在返回所有 3 个元素 css，即使我使用的是 first()... css 函数是：

```
function css(a){
        var sheets = document.styleSheets, o = {};
        for(var i in sheets) {
            var rules = sheets[i].rules || sheets[i].cssRules;
            for(var r in rules) {
                if(a.is(rules[r].selectorText)) {
                    o = $.extend(o, css2json(rules[r].style), css2json(a.attr('style')));
                }
            }
        }
        return o;
    }

    function css2json(css){
        var s = {};
        if(!css) return s;
        if(css instanceof CSSStyleDeclaration) {
            for(var i in css) {
                if((css[i]).toLowerCase) {
                    s[(css[i]).toLowerCase()] = (css[css[i]]);
                }
            }
        } else if(typeof css == "string") {
            css = css.split("; ");          
            for (var i in css) {
                var l = css[i].split(": ");
                s[l[0].toLowerCase()] = (l[1]);
            };
        }
        return s;
    } 
```

我努力了：

```
if(event.target != this){
    return true;
}
event.stopPropagation(); 
```

无济于事......这里的完整来源：

```
 var options = [
        '#content',
        'h5'              
    ];
    var elements = [];
    var current_item = '';

            for(a in options){
                elements[a] = {
                    'handle':  options[a], 
                    'before': '',
                    'after': ''
                };

                $(elements[a].handle).attr('index', a);

                $(elements[a].handle).hover(
                    function(event){ 
                        if(event.target != this){
                            return true;
                        }
                        event.stopPropagation();
                        var i = get_index(this); 
                        elements[i].before = css($(elements[i].handle).first());
                        $(this).css({
                            border: '1px dashed red',
                            padding: '5px'
                        });
                    },
                    function(){
                        var i = get_index(this); 
                        $(this).css(elements[i].before);
                    }
                );

                $(elements[a].handle).click(
                    function(){
                        if(event.target != this){
                            return true;
                        }
                        event.stopPropagation();
                        var i = get_index(this); 
                        alert(i);
                        $('#current_item').val(options[i]);     
                    }
                );
            } 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T22:02:23.157

查看

.first() [http://api.jquery.com/first/](http://api.jquery.com/first/)

和

:first [http://api.jquery.com/first-selector/](http://api.jquery.com/first-selector/)

取决于你的需要。

# vsto - 如何访问 Outlook 中的检查器窗口功能区？

> ID：11301768
> 
> 赞同：5
> 
> 时间：2012-07-02T22:00:21.230
> 
> 标签：vsto, outlook-addin, outlook-2010

我是 Outlook 编程的新手，所以第一步（稍后更高级）是以下任务：

*   创建一个新的功能区（Ribbon1）选项卡（应在资源管理器和新检查器中显示）
*   选择（探索）或打开（检查器）邮件时，功能区选项卡应显示邮件的主题（如测试所述）

* * *

Explorer 部分很容易上手，但我在为新检查员执行上述操作时遇到问题

我尝试了各种方法，但似乎都没有奏效：

*   我已经尝试在 NewInspector 中引用 Globals.Ribbons[inspector].Ribbon1 但这始终为空

*   我已经尝试在 NewInspector 中订阅 Activate 事件并从那里执行它，但是在那里 Application.ActiveInspector() 为空，如果我从 NewInspector 事件中存储检查器的全局副本，它在第一个上不起作用新检查员（仅在第二个之后以及在阅读邮件时。而不是在撰写邮件时）

*   我尝试使用功能区加载事件，但这只是第一次发生

*   我尝试使用 Globals.Ribbons.Ribbon1 成员，但这只是第一次工作

（我发现了很多 NewInspector 的样本，但似乎没有人想修改这个功能区以外的功能区[https://stackoverflow.com/questions/7852017/outlook-2007-ribbon-object-reference-not-set- to-an-instance-of-an-object](https://stackoverflow.com/questions/7852017/outlook-2007-ribbon-object-reference-not-set-to-an-instance-of-an-object)并且没有答案）

这快把我逼疯了……真的没有办法做这么简单的任务吗！？

示例代码供参考

```
 void InspectorsNewInspector(Outlook.Inspector inspector)
    {
        AddInspectorEventHandlers(inspector);
    }

    private void AddInspectorEventHandlers(Outlook.Inspector inspector)
    {
        if (inspector == null)
        {
            return;
        }

        Ribbon1 ribbon1 = Globals.Ribbons[inspector].Ribbon1; //This always return null!!!

        ((Outlook.InspectorEvents_10_Event)inspector).Activate += InspectorActivate;
        ((Outlook.InspectorEvents_10_Event)inspector).Close += InspectorClose;

        _openInspectors.Add(inspector);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-09T17:54:40.430

我今天遇到了同样的问题并想出了一个解决方法。我基本上一直在尝试访问我刚刚创建`Ribbon`的。`MailItem`

为了解决这个问题，我遍历了每个功能区`Globals.Ribbons`（不使用检查器索引器，因为这会给你一个空引用）。对于每个`Ribbon`对象，我检查它的上下文类型是`Inspector`. 然后我可以对 进行相等性检查`Inspector.CurrentItem`以确定它们的引用是否相等。如果它们相等，我知道使用它`Ribbon`

这是一个片段

```
Outlook.MailItem mail = (Outlook.MailItem)this.Application.CreateItem(Outlook.OlItemType.olMailItem);
Outlook.Inspector currentInspector = (Outlook.Inspector)mail.GetInspector;

Ribbon2 currentRibbon = null;
foreach (Ribbon2 ribbon in Globals.Ribbons)
{
    var ribbonInspector = (Outlook.Inspector)ribbon.Context;
    if (ribbonInspector.CurrentItem.Equals(currentInspector.CurrentItem))
    {
        currentRibbon = (Ribbon2)ribbon;
        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T18:59:25.000

在“NewInspector”事件期间，您的自定义功能区未加载。如果您调试代码，您将看到它仅在“NewInspector”事件之后才进入自定义功能区设计器。您可以做的是在自定义功能区加载事件期间实现您需要的内容。那是

```
private void MyRibbon_Load(object sender, RibbonUIEventArgs e){} 
```

在这里，您可以获得当前活动的检查器。从那里你可以得到你需要的物品。

前任 ：

```
 Inspector inspector = Globals.WPTAddIn.Application.ActiveInspector();
        if (inspector != null)
        {
            if (inspector.CurrentItem != null)
            {
                if (inspector.CurrentItem is MeetingItem)
                {
                    MeetingItem meetingItem = (MeetingItem)inspector.CurrentItem;}}} 
```

# android - mHttpClient.execute(httppost) 具有极长的响应 3g/4g .. 但不是 wifi。ICS 更新后

> ID：11301770
> 
> 赞同：1
> 
> 时间：2012-07-02T22:00:49.180
> 
> 标签：android

我拿不到这个。有一个运行良好的应用程序。然后我将我的 Razr Droid 更新为 ICS，情况发生了变化。

使用 Drupal 服务模块运行 Drupal 服务器。当我通过 wifi 连接时，一切正常。但是，当我通过 3g/4g 连接时，httpclient.execute() 方法需要 3-4 分钟而不是几秒钟。我将以下示例代码放在一起重新创建了问题。我应该通过 4g 添加到服务器的浏览器连接工作正常。所以我认为这不是一个简单的无线连接问题。

```
public class DrupalTestActivity extends Activity {

    private Context mCtx;
public static long mSESSION_LIFETIME = 200000; // seconds.
final static String URL =   "www.myDrupalServer.com";
final static String ENDPOINT = "rest/";
String mResponse = null;
String cookie;
TextView textView;

public class DoLogin extends AsyncTask<Void, Void, String> {

    @Override
    protected String doInBackground(Void... params) {
        cookie = getCookie(mCtx);
        return cookie;
    }

    @Override
    protected void onPostExecute(String result) {
        super.onPostExecute(result);
        textView.setText(mResponse);
    }

}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.mCtx = this;
    setContentView(R.layout.main);
    textView = (TextView) findViewById(R.id.textView);
    DoLogin task = new DoLogin();
    task.execute();
}

protected String getCookie(Context ctx) {
    SharedPreferences settings = PreferenceManager
            .getDefaultSharedPreferences(mCtx);
    Long timestamp = settings.getLong("sessionid_timestamp", 0);
    Long currenttime = new Date().getTime() / 100;
    String cookie = settings.getString("cookie", null);
    if (cookie == null || (currenttime - timestamp) >= mSESSION_LIFETIME) {
        JSONObject mUserAccount = UserAccount.getJSONUserAccount(ctx);
        userLogin(mUserAccount);
        return getCookie(ctx);
    } else {
        Log.d("COOKIE", cookie);
        return cookie;
    }
}

public String userLogin(JSONObject mUserAccount) {
    String uri = URL + ENDPOINT + "user/login";
    HttpPost httppost = new HttpPost(uri);
    httppost.setHeader("Content-type", "application/json");
    StringEntity se;
    try {
        HttpClient mHttpClient = new DefaultHttpClient();
        HttpParams mHttpParams = new BasicHttpParams();
        HttpConnectionParams.setConnectionTimeout(mHttpParams, 10000);
        HttpConnectionParams.setSoTimeout(mHttpParams, 10000);

        se = new StringEntity(mUserAccount.toString());
        se.setContentEncoding(new BasicHeader(HTTP.CONTENT_TYPE,
                "application/json"));
        httppost.setEntity(se);
                    Log.d("STATUS", "CALLING DRUPAL");
        HttpResponse response = mHttpClient.execute(httppost);
                    Log.d("STATUS", "LOGIN COMPLETE");
        mResponse = EntityUtils.toString(response.getEntity());
        // save the sessid and session_name
        JSONObject obj = new JSONObject(mResponse);
        SharedPreferences settings = PreferenceManager
                .getDefaultSharedPreferences(mCtx);
        SharedPreferences.Editor editor = settings.edit();
        editor.putString("cookie", obj.getString("session_name") + "="
                + obj.getString("sessid"));
        editor.putLong("sessionid_timestamp",
                new Date().getTime() / 100);
        editor.commit();
    } catch (UnsupportedEncodingException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return mResponse;
    }
} 
```

这是类UserAccount，但我真的不认为它是相关的..

```
public class UserAccount {

    private String USER = "tester";
    private String PASSWORD = "passtest";
    private static Context mCtx;

    public UserAccount(Context Ctx, String Username, String Password) {
        mCtx = Ctx;
    }

    public void save(Context mCtx) {
        // TODO This would really work better if we just passed in the Account
        // Object
        Map<String, String> mMap = new HashMap<String, String>();
        mMap.put("username", USER);
        mMap.put("password", PASSWORD);
        SharedPreferences settings = PreferenceManager
                .getDefaultSharedPreferences(mCtx);
        SharedPreferences.Editor editor = settings.edit();
        Iterator<?> iter = mMap.entrySet().iterator();
        while (iter.hasNext()) {
            @SuppressWarnings("rawtypes")
            Map.Entry mEntry = (Map.Entry) iter.next();
            editor.putString(mEntry.getKey().toString(), mEntry.getValue()
                    .toString());
        }
        editor.commit();
    }

    public static JSONObject getJSONUserAccount(Context ctx) {
        SharedPreferences accountSettings = PreferenceManager
                .getDefaultSharedPreferences(ctx);
        String nUsername = accountSettings.getString("username", "tester");
        String nPassword = accountSettings.getString("password", "dweeber");
        JSONObject JSONUser = new JSONObject();
        try {
            JSONUser.put("password", nPassword);
            JSONUser.put("username", nUsername);
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        return JSONUser;
    }

} 
```

wifi 连接的 LogCat 输出。

```
07-02 16:49:32.812: I/System.out(12001): debugger has settled (1401)
07-02 16:49:33.319: D/dalvikvm(12001): threadid=1: still suspended after undo (sc=1 dc=1)
07-02 16:49:36.921: D/STATUS(12001): CALLING DRUPAL
07-02 16:49:37.749: D/libc(12001): Forward DNS query to netd(h=www.seinetest.com.php5-22.dfw1-1.websitetestlink.com s=^)
07-02 16:49:43.046: D/STATUS(12001): LOGIN COMPLETE 
```

时间是十几秒左右。。

3g/4g 上的 LogCat 输出

```
07-02 16:52:36.171: I/System.out(12759): debugger has settled (1362)
07-02 16:52:36.687: D/dalvikvm(12759): threadid=1: still suspended after undo (sc=1 dc=1)
07-02 16:52:46.171: D/STATUS(12759): CALLING DRUPAL
07-02 16:52:47.265: D/libc(12759): Forward DNS query to netd(h=www.seinetest.com.php5-22.dfw1-1.websitetestlink.com s=^)
07-02 16:53:17.569: W/IInputConnectionWrapper(12759): getExtractedText on inactive InputConnection
07-02 16:53:17.593: W/IInputConnectionWrapper(12759): getExtractedText on inactive InputConnection
07-02 16:54:38.593: W/IInputConnectionWrapper(12759): getExtractedText on inactive InputConnection
07-02 16:54:38.616: W/IInputConnectionWrapper(12759): getExtractedText on inactive InputConnection
07-02 16:56:08.921: D/STATUS(12759): LOGIN COMPLETE 
```

更长的登录时间！！

显然，getExtractedText 是新事物，但它是原因还是结果？我在这里搜索了 IInputConnectionWrapper getExtractedText 并且有一个问题有人问它的意义是什么。它被关闭并标记为一个坏问题。:(

其他详细信息是 Verizon 运营商服务器托管在 Rackspace 云服务器电话 Verizon Droid Razr，Android 4.0.4

我真的希望我能在这里得到一些指导，否则我几个月的工作就泡汤了。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T18:03:41.567

我想我终于想通了。我做了一些研究和一些测试。
电话 Droid Razr，ICS 4.0.4 Verizone 无线。

我调查了我的三个服务器和谷歌。我所有的测试服务器都位于同一个云（RackSpace）上响应时间如下。Google：42ms 我的服务器#1 100ms 我的服务器#2 96 我的服务器#3 - 没有注册域名的测试服务器运行为 www.seinetest.blah.blah.websitetestlink.com。Rackspace 会自动执行此操作，直到在服务器上注册了一个域名。响应时间 14445 毫秒。

所有四个站点的桌面浏览器时间均不显着。所以问题必须出在电话里..或者是吗？

升级到 ICS 后，响应时间出现了巨大的差异。我确实在上述链接中发现了一些数据，表明其他手机在 ICS 通过代理时遇到问题。我打电话给 Rackspace，并向我保证我的注册域名服务器和服务器 #3 之间的唯一区别是 DNS 指针指向的位置......没有代理！

几乎没有其他尝试，我用域名和 WALLAH 注册了服务器#3！ICS 电话的响应时间与注册域名的其他服务器相同。鉴于这一切都发生在 ICS 升级中，我倾向于认为这是我将报告的 ICS 错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T19:42:11.590

如果您没有更改任何代码，并且这发生在从 Gingerbread 升级后，您可能真的需要考虑在非 ICS 设备上进行测试。由于 Ice Cream Sandwich 添加了“高效网络使用”功能，因此在 wifi/3G/4G 上出现了一些非常随机的连接问题。您可以在 Google 代码上看到很多此类问题（[http://code.google.com/p/android/issues/list?can=2&q=3g+ics&colspec=ID+Type+Status+Owner+Summary+ Stars&cells=tiles](http://code.google.com/p/android/issues/list?can=2&q=3g+ics&colspec=ID+Type+Status+Owner+Summary+Stars&cells=tiles)）和这里更切题的东西：[http](http://androidcommunity.com/signal-issues-arrive-after-android-4-0-4-ice-cream-sandwich-update-20120405/) ://androidcommunity.com/signal-issues-arrive-after-android-4-0-4-ice-cream-sandwich-update-20120405/ 无论如何，很奇怪，但让人想起我看到的一个不相关的设备跳转到 ICS 的问题。

# joomla - 在注册时对 Joomla 用户类型进行编程

> ID：11301771
> 
> 赞同：2
> 
> 时间：2012-07-02T22:00:57.040
> 
> 标签：joomla, registration, joomla-extensions, usertype

我正在构建一个具有自己的注册表单的组件。它的大部分属性都运行良好，但我无法在 J1.6 或 J2.5 中设置用户的用户类型或用户组。我对平台并不完全了解，我首先为我尝试了一些东西。这是我在模型类中的一段代码

```
 // Prepare the data for the user object. Data comes from controller
    $data['name']       = $data['companyName'];
    $data['username']   = MyCompHelper::getCreatedUserName($data['type']);//for system created username based on the type from form 
    $data['email']      = $data['email1'];

    $data['password']   = (!empty($data['password1'])) ? $data['password1'] : '';
    $data['usertype']       = $params->get('new_usertype',2); 
```

然后我将数据绑定到用户对象并保存它，但用户没有分配给任何组。所以我想我应该纠正这个

```
$data['usertype']       = $params->get('new_usertype',2); 
```

部分，但哪种方式，我写什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T08:50:15.533

在 Joomla 1.6`usertype`中已弃用。改为使用`groups`。
您可以通过调用找到“默认组”：

```
$conf = JComponentHelper::getParams('com_users');
$defUserGroup = $conf->get('new_usertype', 2); 
```

然后将其用作：

```
$inst = JUser::getInstance();
$inst->set('groups', array($defUserGroup)); 
```

# php - 填写数据中缺失的天数

> ID：11301772
> 
> 赞同：2
> 
> 时间：2012-07-02T22:01:05.510
> 
> 标签：php, time

我有一个看起来像这样的数组：

```
$data = array(
    array('timestamp' => 1312776000, 'something' => 100), // data for 08.08.2011
    array('timestamp' => 1312862400, 'something' => 120), // data for 09.08.2011
    //  ????????                                          // data for 10.08.2011
    array('timestamp' => 1313035200, 'something' => 160), // data for 11.08.2011
    array('timestamp' => 1313121600, 'something' => 180), // data for 12.08.2011
    array('timestamp' => 1313208000, 'something' => 200), // data for 13.08.2011
    //  ????????                                          // data for 14.08.2011
    //  ????????                                          // data for 15.08.2011
    //  ????????                                          // data for 16.08.2011
    //  ????????                                          // data for 17.08.2011
    array('timestamp' => 1313640000, 'something' => 300), // data for 18.08.2011
); 
```

如何识别“洞”并用“某物”=> 0 的子数组填充它们？如您所见，“漏洞”可能非常大，这就是为什么我自己无法解决这个问题 - 我的算法只能填充微小的“漏洞”（如 10.08.2011，但不能填充 14.08.2011 -> 17.08。 2011）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T22:37:50.910

要考虑的另一种方法：

```
$previous_d = false;
for($di=0; isset($data[$di]); $di++) {
    $d = $data[$di];
    if($previous_d && ($d['timestamp']-$previous_d['timestamp'])>86400) {
        $new_d = array('timestamp'=>$previous_d['timestamp']+86400,'something'=>0);
        array_splice($data,$di,0,array($new_d));
        $di--;
    }
    $previous_d = $d;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T22:23:42.100

您的数据似乎已排序，我猜您每天需要一个值。我采取了编写新输出数组的惰性方法，但您可以将值附加到现有数组，然后在最后按时间戳排序。

我会做这样的事情：

```
$outArray = array();
$lastTime = $data[0]['timestamp'] - 86400;
foreach($data as $values) {
    $dayDelta = ($values['timestamp'] - $lastTime)/86400;
    if ( $dayDelta != 1) {
        for ($i = $dayDelta-1; $i--; $i>0) {
            $pastDate = $values['timestamp'] - $i * 86400;
            $outArray[] = array('timestamp'=>$pastDate, 'something'=>0);
        }
    }
    $outArray[]=$values;
    $lastTime = $values['timestamp'];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T22:40:22.627

可以这样做：

```
$new = array();
$prev = reset($data);
while ($record = reset($data)) {
    while ($prev['timestamp'] < $record['timestamp']-86400) {
        $prev['timestamp'] += 86400;
        $prev['something'] = 0;
        $new[] = $prev;
    }
    $new[] = $record;
    $prev = $record;
    unset($data[key($data)]);
}
$data = $new;

echo '<pre>';
var_export($data);
echo '</pre>'; 
```

# objective-c - NSView 消息何时显示，何时不显示？

> ID：11301773
> 
> 赞同：0
> 
> 时间：2012-07-02T22:01:06.130
> 
> 标签：objective-c, nstimer, nsview

是否有某种委托方法在显示 NSView 时发送消息？当 NSView 显示在屏幕上时，我需要运行一个 NSTimer，如果它不是，我需要使其无效，这样它就不会一直在后台不必要地运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T22:07:42.243

Depending on how you've implemented your code, you could subclass NSView and create your own delegate protocol that sends out proper messages for various NSView events like [`setHidden`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSView_Class/Reference/NSView.html#//apple_ref/occ/instm/NSView/setHidden%3a) or ["`removeFromSuperview`"](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSView_Class/Reference/NSView.html#//apple_ref/occ/instm/NSView/removeFromSuperview).

If you're embedding this view into a single NSWindow object, you could subclass NSWindow and then throw your custom delegate protocol methods for "`close`" or "`performClose:`". Of course, in this case, there's actually already a ["`NSWindowDelegate`" protocol](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSWindowDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/NSWindowDelegate) defined for you.

# c - 在多线程应用程序中用 C 语言制作目录树

> ID：11301776
> 
> 赞同：0
> 
> 时间：2012-07-02T22:01:17.210
> 
> 标签：c, multithreading, parallel-processing

我的问题是对先前[在此处](https://stackoverflow.com/questions/675039/how-can-i-create-directory-tree-in-c-linux)提出的问题的扩展。

我需要创建一个目录树，它可能更早存在也可能不存在，而且多个线程可以尝试创建这样的目录结构。引用的问题解决了单线程的问题。该函数是线程安全的还是有任何特定的方法可以做到这一点。我正在使用`C`，操作系统是 Ubuntu。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T22:06:16.517

In libc, mkdir can set the error value `EEXIST` which means 'that directory already exists'. Thanks [Jonathan Leffler](https://stackoverflow.com/users/15168/jonathan-leffler) "errno is thread-safe as long as you tell the compilation to make things thread-safe".

Creating directories is monotonic - you are always adding new ones, not removing them. So you can create a directory tree (attempting to create each directory at each level) and if some other thread got there first, it's not a problem, keep going.

If I were you, I would have each thread create its entire path recursively, ignoring errors. When it is complete building its path, it should then test whether the directory exists. If it does not exist, *that* is a problem (as the sequence of `mkdir` operations that you used to create the required path will be synchronous within the thread). If it does exist, congratulations.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T22:07:34.850

The O/S will take care of multiple threads trying to create the same directory at 'the same time'. At most one will succeed; the other's will fail, probably with EISDIR (or maybe EEXIST) as the error.

The code in the cross-referenced question won't recover from the EISDIR error. However, if you spot that `errno` is the relevant error when you check the return code, you can decide to try again.

# r - r 用未知的列数将数据从长到宽重塑

> ID：11301778
> 
> 赞同：5
> 
> 时间：2012-07-02T22:01:42.050
> 
> 标签：r, reshape

我确定这是微不足道的，但我找不到该怎么做。

我有一个数据框，其中有个人，每个人都可以有几个属性，并且每个属性都以多种方式分类。目前它是长形的，记录看起来像（以示意图的形式，实际上它有点复杂）：

```
IndividualID Property PropClass 
1            X         A 
1            Y         B 
2            X         A 
3            Y         B
3            W         C
3            Z         A 
```

我想要的是每个单独的 ID 有一行，带有单独的 ID，然后是该个人在原始文件中的每个属性和 PropClass 的列对，所以在这种情况下：

```
 IndividualID  Prop1   PropClass1 Prop2  PropClass2  Prop3  PropClass3
 1             X       A          Y      B           NA     NA
 2             X       A          NA     NA          NA     NA
 3             Y       B          W      C           Z      A 
```

因此，Prop 和 PropClass 变量的数量必须与原始数据集中任何个人 ID 的最大行数一样多（不大，大约 5），并且个人在原始数据集中的行数少于该最大数，对那个人没有任何意义的额外列中包含 NA。个人的 Prop 和 PropClass 变量的顺序无关紧要（尽管它也可能是长格式文件上的原始顺序）。

显然，如果您为每个可能的 Prop 值设置一对 Prop 和 propClass 列，则很容易做到这一点（例如，使用 reshape），但是 Prop 的可能值有数百个，因此文件变得庞大且无用。我不敢相信没有一种简单的方法可以做我想做的事，但是尽管在我看来是刻苦的搜索，但我还是没有找到它。请告诉我我是个白痴，如果是这样，我该如何治愈我的白痴。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T22:18:45.617

可能有一种更有效的方法可以做到这一点，但我现在想不出。对于需要转换为宽格式的两个变量，我认为您可能需要将它们分别转换，然后将两者合并在一起。不过，我很想被证明是错误的。为此，我创建了两个新变量，它们为每个新 ID 生成列序列。这将允许他们轻松地填充 NA。使用新列，很容易将它们转换为正确的格式并将它们合并在一起。

```
library(plyr)
library(reshape2)

#Assumes your data is read into a variable named x
x <- ddply(x, "IndividualID", transform, 
      castPropClass = paste0("PropClass", seq(length(PropClass))),
      castProp = paste0("Prop", seq(length(Property))))

#Use these two new variables to cast into wide format. Wrap in merge to join together:
merge(dcast(IndividualID ~ castPropClass, value.var = "PropClass", data = x),
      dcast(IndividualID ~ castProp,      value.var = "Property",  data = x))
#Gives you this:
  IndividualID PropClass1 PropClass2 PropClass3 Prop1 Prop2 Prop3
1            1          A          B       <NA>     X     Y  <NA>
2            2          A       <NA>       <NA>     X  <NA>  <NA>
3            3          B          C          A     Y     W     Z 
```

这显然没有正确的列“顺序”，但数据本身是正确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T22:41:52.817

这样的事情可以接受吗？

```
test.dt<-data.frame(id=(c(1,1,2,3,3,3)), property=(c("X","Y","X","Y","W","Z")), property.clss=(c("A","B","A","B","C","A")))
library(reshape)
m<-melt(data=test.dt, id.vars="id", measure.vars=c("property.clss"))
m
n<-melt(data=test.dt, id.vars="id", measure.vars=c("property"))
n
c1<-data.frame(cast(m, id~value))
colnames(c1)<-c("id", paste("property",colnames(c1)[colnames(c1)!="id"],sep=""))
c1
c2<-data.frame(cast(n,id~value))
colnames(c2)<-c("id", paste("property.clss",(colnames(c2)[colnames(c2)!="id"]),sep=""))
c2
merge(c1,c2,by="id") 
```

# objective-c - 平移/滑动视图，如相机锁定屏幕

> ID：11301782
> 
> 赞同：2
> 
> 时间：2012-07-02T22:01:45.930
> 
> 标签：objective-c, ios, animation, uiview, uigesturerecognizer

每个人都知道相机锁屏中的可拖动视图

![在此处输入图像描述](../Images/cebd9f5eddc787cb39cfbebdeda208b2.png)

我想要类似的东西。我的布局看起来像这样

![在此处输入图像描述](../Images/89d767d31e8a371dc04dd47d9bcc6c10.png)

*   这个子视图应该可以从底部拖动，并且应该在 cetrain 高度上保持打开状态。
*   同样，当快速向上滑动时，它应该在向上拖动子视图但在最大位置之前停止时自行打开，如果向上滑动然后向下滑动，它应该向下滑动
*   它也会自行下降
*   点击时它应该自行向上/向下滑动

您可以在锁定屏幕上看到这种行为非常好（高度停止除外）。我尝试了不同的方法，例如`UIPanGestureRecognizer`然后设置最大值，但后来我无法滑动。

UIKit 中是否有预先打包的内容，或者让我自己做。如果不是，那么这种行为的好方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T00:23:28.800

这是计划：您将继承 UIView。您将添加一些属性并覆盖一些方法。这个想法是让手指通过 touchesBegan 和 touchesMoved 来决定运动。当手指在 touchesEnded 中抬起时，您可以将视图设置为合适的静止位置。在我提供的代码示例中，这将完全展开或完全缩回，但如果您愿意，您可以随时将其缩回。

听起来你想要应用一点惯性。这稍微复杂一些，因为您必须自己添加一个额外的动画 - 但同样，您只需要插入正确的动画（例如，使用计时功能让它动画超过结束点然后重新插入）并拥有它在用户完成移动后触发。如果您想变得花哨，您可以跟踪滑动的速度并根据此速度/动量触发动画。

以下是一个代码示例，可帮助动画进出抽屉。它没有您所描述的幻想，但它应该为您提供一个基础，以弄清楚如何以及在何处引入这种行为。

你的类需要一些属性/变量：一个“当前点”、一个原点、一个天花板（视图应该停止向上拖动的点，或者它停留在“out”的位置，以及一个地板（最大 y 偏移，或者它不会低于的坐标）。

```
-(void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

    UITouch *touch = [touches anyObject];
    CGPoint startPt = [touch locationInView:self];
    self.currentPoint = startPt;

}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {

    CGPoint activePoint = [[touches anyObject] locationInView:self];

    //new position
    CGPoint newPoint = CGPointMake(self.center.x,
                                   self.center.y + (activePoint.y - currentPoint.y));

    if (newPoint.y > self.draggingFloor) {
        //too low
        newPoint.y = self.draggingFloor;

    } else if (newPoint.y < self.draggingCeiling) {
        //too high
        newPoint.y = self.draggingCeiling;
    }

    self.center = newPoint;

}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {

    //The user isn't touching. Now we can adjust to drawer to a "better" position.
    //The 150f here is going to depend on how far the view should be dragged before it opens.
    CGFloat median = pullDrawerYOrigin + 150.0f;
    CGFloat position = self.center.y;

    if (position <= median) {
        //We're closer to open than closed. So open all the way. 
        [self animateDrawerToPositionYesForOpen:YES];
    }

    else if (position >= median)  {
        //close
        [self animateDrawerToPositionYesForOpen:NO];
    }

}

- (CGFloat) draggingFloor {

    //Don't drag any lower than this.
    if (!__draggingFloor) {
        __draggingFloor = pullDrawerYOrigin + (self.bounds.size.height *.5);
    }

    return __draggingFloor;
}

- (CGFloat) draggingCeiling {

    //Don't drag any higher than this.
    if (!__draggingCeiling) {
        __draggingCeiling = self.superview.bounds.size.height + (self.bounds.size.height * .05);
    }

    return __draggingCeiling;

}
- (void) animateDrawerToPositionYesForOpen:(BOOL)position {

    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationCurve:UIViewAnimationCurveEaseOut];
    [UIView setAnimationDuration:.2];

    CGPoint myCenter = self.center;

    if (position == YES) {
        myCenter.y = self.draggingCeiling;
    }

    else if (position == NO) {
        myCenter.y = self.draggingFloor;
    }

    self.center = myCenter;

    [UIView commitAnimations];

} 
```

# twitter - Twitter 上最新图片的时间线

> ID：11301783
> 
> 赞同：0
> 
> 时间：2012-07-02T22:01:51.777
> 
> 标签：twitter

我的最终目标是让用户选择一个趋势主题或输入他们自己的主题，并且该趋势的最新图像看起来都[像这样](http://vanilla-masonry.desandro.com/demos/images.html)可爱。

我的第一个障碍是选择图像。使用[此 API](http://dev.datasift.com/docs/targets/twitter)，我设法将其缩减为带有图像的给定主题标签的推文*，*如下所示：

```
twitter.text CONTAINS "sammich" AND
links.domain IN "twitpic.com, yfrog.com, flickr.com" 
```

问题是能够自己选择和打印图像。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T22:05:57.830

因此，您将编译您构建的过滤器并通过他们的 REST 流端点运行它，该端点提供与该过滤器匹配的推文流？

看起来[他们的流 API](http://dev.datasift.com/docs/rest-api/stream)本身并没有提供媒体实体的 URL，这很奇怪，因为 twitter 自己的 API 提供：[https](https://dev.twitter.com/docs/tweet-entities) : //dev.twitter.com/docs/tweet-entities - 我会联系 Datasift 并看看是否有提供此功能的未记录资源，或者他们是否计划添加它。

没有它，我会在每条推文返回的“文本”上运行一个正则表达式，并从你提到的任何域中提取 url。此时，只要*链接*URL 和图像*源*URL 之间存在已知模式（例如，twitpic 链接是[http://twitpic.com/a3x0m8](http://twitpic.com/a3x0m8) **，**图像源是[https://twitpic.com/show/](https://twitpic.com/) **large** /a3x0m8) 你应该能够将一个转换为另一个。

# xslt - 使用 XSL 和字符串到代码点操作字符实体

> ID：11301784
> 
> 赞同：0
> 
> 时间：2012-07-02T22:01:57.750
> 
> 标签：xslt, character-encoding

我对 XSL 比较陌生。我需要以特定方式处理特殊字符（BasicLatin 代码块之外的任何内容）。我知道实体代码和文字字符基本上是相同的，但是我需要在一个不这样看的文本编辑器中工作（这不在我的控制范围内）。因此，保留文字字符不是一种选择。如果可能的话，我想在我的 XSL 中而不是通过 Perl 或其他机制来处理这个问题。这是我所拥有的：

```
<p>This is a story&#x2014;a long story.</p> 
```

这是我想要的结果：

```
<p>This is a story<0x2014>a long story.</p> 
```

我一直在尝试通过正则表达式来做到这一点，比如：

```
<xsl:value-of select="replace(., '(\P{IsBasicLatin})', 'concat('&lt;0x', string-to-codepoints($1), '&gt;'))"/> 
```

但是我收到一个错误，即在数字文字之后需要一个分隔符。我无法找到任何我理解的有关该错误的文档。这与我尝试使用函数作为替换的一部分有关吗？XSL 允许这样的事情吗？如果没有，任何建议都将受到欢迎。我确实查看了此处提供的答案：[convert character if codepoint within given range](https://stackoverflow.com/questions/10798974/convert-character-if-codepoint-within-given-range)，这似乎相关但对我不起作用（第一个消除了我的特殊字符，第二个给了我非常奇怪的输出。）

任何帮助，将不胜感激。我想我错过了一些关于函数或代码点的东西，但我自己已经碰到了一些障碍。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T07:08:13.557

您尝试生成的输出不是格式良好的 XML，因此 XSLT 不愿意让您生成它。您确定要生成任何 XML 解析器都不会接受的输出吗？

代码中的实际问题是对 concat 的调用周围的单引号。您编写的表达式是字符串文字 'concat(' 后跟运算符 <，然后是整数文字零，然后是名称 x，这不是有效的 XPath 语法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-15T01:23:07.060

> 我不确定回答我自己的问题是否符合规定，但我终于找到了一个部分解决方案，类似于我给出的链接中的第一个答案。

```
<xsl:analyze-string select="." regex="\P{{IsBasicLatin}}"> 
  <xsl:matching-substring> 
    <xsl:text>&lt;0x</xsl:text>

    <xsl:value-of select="string-to-codepoints(regex-group(0))"/>

    <xsl:text>&gt;</xsl:text>
  </xsl:matching-substring> 
  <xsl:non-matching-substring> 

    <xsl:copy-of select="."/> 
  </xsl:non-matching-substring> 
</xsl:analyze-string> 
```

# asp.net-mvc - 如何在 ServiceStack.MVC 身份验证中覆盖登录 URL？

> ID：11301790
> 
> 赞同：1
> 
> 时间：2012-07-02T22:02:33.900
> 
> 标签：asp.net-mvc, authentication, servicestack

如何覆盖登录网址？

你能把它作为属性添加到 AuthenticateAttribute 中吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-03-24T09:17:25.060

不确定它是否是新的，但查看了代码，它实际上只是 AuthFeature 构造函数的可选第三个参数，所以你可以：

```
//htmlRedirect is optional 3rd param of AuthFeature constructor, here passing "~/signin"
Plugins.Add(new AuthFeature(() => new AuthUserSession(), new IAuthProvider[] { new CredentialsAuthProvider(), }, "~/signin")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T10:01:03.357

使用 ServiceStacks 的身份验证机制时，您可以从其中一个继承，`ServiceStackController`或者`ServiceStackController<T>`后者又继承前者。

登录 URL 由 的`LoginRedirectUrl`属性决定`ServiceStackController`。

```
public virtual string LoginRedirectUrl
{
    get { return "/login?redirect={0}"; }
} 
```

由于它是虚拟的，您可以简单地在您自己的控制器中覆盖它。或者更好的是，创建自己的抽象基础控制器，继承自`ServiceStackController`. 然后让你所有的控制器继承那个。您现在有一个点可以控制登录 URL 等内容。

```
public abstract class MyControllerBase : ServiceStackController
{
    public override string LoginRedirectUrl
    {
        get { return "/letslogin?redirectTo={0}"; }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T22:04:13.570

在 System.Web.Security.FormsAuthentication 命名空间中：

```
FormsAuthentication.LoginUrl 
```

如果要覆盖 Web.config 值，只需实现自己的授权属性：

```
[AttributeUsage(AttributeTargets.Class | AttributeTargets.Method, AllowMultiple = true, Inherited = true)]
public class CustomAuthorize: AuthorizeAttribute{
    public override void OnAuthorization(AuthorizationContext filterContext) {
        //If the request does not provide authentication, then perform a redirect
        if (!filterContext.HttpContext.Request.IsAuthenticated) {
            var loginUrl = FormsAuthentication.LoginUrl; //Change your URL here if needed.

            filterContext.Result = new RedirectResult(loginUrl);
        } else {
            //Since the request was authenticated, perform the default authorization check.
            base.OnAuthorization(filterContext);
        }
    }
} 
```

# android - G+ Android UI 动画

> ID：11301791
> 
> 赞同：6
> 
> 时间：2012-07-02T22:02:34.500
> 
> 标签：android, android-layout, android-animation, google-plus

有人可以解释流网格中最新的 google plus android 应用程序中使用的 ui（控件/动画）吗？我知道那些日子使用 g+ 的人并不多，但最新的 android ui 真的很好。

谢谢。

# eclipse - 如何在 Eclipse 4.2 (Juno) 中解锁工具栏

> ID：11301795
> 
> 赞同：44
> 
> 时间：2012-07-02T22:02:54.290
> 
> 标签：eclipse, toolbar, eclipse-juno

我从 Eclipse Indigo (3.7) 迁移到 Juno (4.2)。在 Juno 中，所有工具栏似乎都被永久锁定。有没有办法解锁它们，以便它们可以移动或重新排列？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-10-25T18:08:21.407

试试 Windows - 首选项 - 外观

见印刷品：

[![在此处输入图像描述](../Images/6413df6b4ba8afd240bb0b8121e1f881.png)](https://i.stack.imgur.com/bot6L.png)

然后在搜索框中键入主题（或转到常规->外观->主题）并选择窗口 7。重新启动，您将能够移动工具栏中的图标/组（但不能摆脱任何）

完成后，您将被要求重新启动/我去了经典主题，然后重新启动。

希望能帮助到你

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-09-25T13:53:20.453

*我之前发布了这个作为对我的问题的评论，但有人建议它应该是一个答案，所以我们开始吧：*

已**正式确认**在 Eclipse Juno中移动工具栏（或任何修剪元素）的能力已被**破坏。**这是[**Bug #340695**](https://bugs.eclipse.org/bugs/show_bug.cgi?id=340695)的链接，供有兴趣跟踪此问题的每个人使用。预计会在 Milestone 版本 4.2.2 中进行修复。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-20T22:50:04.760

将主题更改为 Windows 7 对我来说很好。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-07-03T13:24:59.177

我认为今天这是不可能的。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-07-19T21:31:30.117

部分解决方法：http: [//blog.redfin.com/devblog/2012/07/hide_eclipse_juno_toolbar.html](http://blog.redfin.com/devblog/2012/07/hide_eclipse_juno_toolbar.html)

使用帮助 > 欢迎，然后使用窗口/显示工具栏。此时，您应该能够移动最小化的窗口工具栏（之前是“快速视图”）。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-14T14:13:46.360

好伤心。我尝试更改为 Windows 7 Classic 主题，因为我无法移动工具栏按钮。更糟糕的是，当调试透视图在遇到第一个断点时自动打开时，Java 透视图按钮仍然按下，但再次按下它又变回了 Java 透视图。现在，在 Windows 7 Classic 中，编辑器选项卡看起来像在 Indigo 中（我个人更喜欢它的外观和感觉），但现在菜单栏不见了，所有透视选择器按钮也不见了。菜单热键（例如“Alt-W p”进入 Window-Preferences）似乎不起作用。如果我不想重新安装，我现在可能不得不摆弄一些配置文件来找到主题设置。嗯，谢谢...

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-11-12T15:03:53.187

对于 Eclipse Kepler，我再次[报告了该错误](https://bugs.eclipse.org/bugs/show_bug.cgi?id=421539)（对之前列出的错误的修复似乎没有产生任何影响），并列出了一个解决方法。

更改 org.eclipse.platform 插件的 CSS 以使用`../images/`而不是`./`在所有图像 URL 中使用应该会导致它开始工作。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-08-27T19:38:27.330

显然，这在 v4.3/Kepler 中仍然存在问题。多亏了上述附件，我找到了解决此问题的方法（使用主题 Windows 经典）。

谢谢各位！M。

# javascript - Ember.js - 如何使用 Ember.Router 将集合正确绑定到视图？

> ID：11301798
> 
> 赞同：4
> 
> 时间：2012-07-02T22:02:57.527
> 
> 标签：javascript, ember.js, url-routing, ember-old-router

我以前曾使用过`Ember.StateManager`，现在我正在做一些测试，然后才最终切换到`Ember.Router`，但我不明白如何正确绑定我的控制器中的集合中的视图数据。

我有一个非常简单的测试结构，它在*导航方面*`Ember.Router`工作得很好，但是在数据绑定方面它没有按预期工作，我承认我现在迷路了。至于我的数据，我有一个简单的 ASP.NET MVC4 Web API，它运行一个运行良好的 REST 服务（我已经用 Fiddler 进行了测试，一切都很好）。使用 EF4.* 存储在 SQL 中，没有问题。

 *至于客户端应用程序，在我的`contacts.index`路线中，我尝试将其绑定到`connectOutlets`（我应该以不同的方法执行此操作吗？），但我的代码似乎无法正常工作，因为我的视图从未被绑定。

我之前尝试过的，在路由`connectOutlets`方法中：`contacts.index`

1

```
router.get('applicationController').connectOutlet('contact'); 
```

2

```
router.get('applicationController').connectOutlet(
    'contact',
    router.get('contactController').findAll()
); 
```

我也尝试过使用该`enter`方法

```
this.setPath('view.contacts',  router.get('contactController').content); 
```

我试图直接在视图中绑定它，例如：

```
App.ContactView = Ember.View.extend({
    templateName: 'contact-table'
    contactsBinding: 'App.ContactController.content'
}); 
```

这是我的代码的当前版本：

```
var App = null;

$(function () {

    App = Ember.Application.create();

    App.ApplicationController = ...
    App.ApplicationView = ...

    App.HomeController = ...
    App.HomeView = ...

    App.NavbarController = ...
    App.NavbarView = ...

    App.ContactModel = Ember.Object.extend({
        id: null,
        firstName: null,
        lastName: null,
        email: null,
        fullName: function () {
            return '%@ %@'.fmt(this.firstName, this.lastName)
        }.property('firstName', 'lastName')
    });

    App.ContactController = Ember.ArrayController.extend({
        content: [],
        resourceUrl: '/api/contact/%@',
        isLoaded: null,

        findAll: function () {
            _self = this;
            $.ajax({
                url: this.resourceUrl.fmt(''),
                type: 'GET',
                contentType: 'application/json; charset=utf-8',
                success: function (data) {
                    $(data).each(function () {
                        _self.pushObject(App.ContactModel.create({
                            id: this.Id,
                            firstName: this.FirstName,
                            lastNaem: this.LastName,
                            email: this.Email
                        }));
                    });
                    alert(_self.get('content').length);
                    // this alerts 6 which is the same number of
                    // records in my database, and if I inspect
                    // the content collection in chrome, I see my data
                    // that means the problem is not the ajax call
                },
                error: function (xhr, text, error) {
                    alert(text);
                }
            });
        },
        find: function (id) {
            // GET implementation
        },
        update: function (id, contact) {
            // PUT implementation
        },
        add: function (contact) {
            // POST implementation
        },
        remove: function(id) {
            // DELETE implementation
        }
    });

    App.ContactView = Ember.View.extend({
        templateName: 'contact-table'
    });
    App.ContactListItemView = Ember.View.extend({
        templateName: 'contact-table-row'
    });

    App.Router = Ember.Router.extend({
        enableLogging: true,
        location: 'hash',

        root: Ember.Route.extend({
            // actions
            gotoHome: Ember.Route.transitionTo('home'),
            gotoContacts: Ember.Route.transitionTo('contacts.index'),

            // routes
            home: Ember.Route.extend({
                route: '/',
                connectOutlets: function (router, context) {
                    router.get('applicationController').connectOutlet('home');
                }
            }),
            contacts: Ember.Route.extend({
                route: '/contacts',
                index: Ember.Route.extend({
                    _self: this,
                    route: '/',
                    connectOutlets: function (router, context) {
                        router.get('contactController').findAll();
                        router.get('applicationController').connectOutlet('contact');
                        router.get('contactView').set('contacts', router.get('contactController').content);
                        // if I inspect the content collection here, it's empty, ALWAYS
                        // but if I access the same route, the controller will alert 
                        // the number of items in my content collection
                    }
                })
            })
        })
    });
    App.initialize();
}); 
```

以下是相关模板：

```
<script type="text/x-handlebars" data-template-name="contact-table">
    <table>
        <thead>
            <tr>
                <th>Name</th>
                <th>Email</th>
            </tr>
        </thead>
        <tbody>
            {{#if contacts}}
                {{#each contact in contacts}}
                    {{view App.ContactListItemView contactBinding="contact"}}
                {{/each}}
            {{else}}
                <tr>
                    <td colspan="2">
                    You have no contacts <br />
                    :( 
                    <td>
                </tr>
            {{/if}}
        </tbody>
    </table>
</script>

<script type="text/x-handlebars" data-template-name="contact-table-row">
    <tr>
        <td>
            {{contact.fullName}}
        </td>
        <td>
            e-mail: {{contact.email}}
        </td>
    </tr>
</script> 
```

作为测试，我还尝试`content`在我的控制器中手动填充集合，如下所示，但同样，当我导航到该路线时它是空的：

```
App.ContactController =  Ember.ArrayController.extend({
    content: [],
    init: function() {
        this._super();
        this.pushObject(
            App.ContactModel.create({ ... })
        );
    }
}) 
```

对，如果你能读到现在，这是我的问题：如何使用 Ember.Router 正确地将集合绑定到视图？

我已经看到了一些示例，以及 SO 中的其他问题，但我还没有看到任何对我有用的东西（请随时指出其他**带有 binding**的示例）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T23:01:33.480

绑定不起作用，因为“数组正在变异，但属性本身没有改变”。[https://stackoverflow.com/a/10355003/603636](https://stackoverflow.com/a/10355003/603636)

使用 App.initialize 和 Ember.Router，视图和控制器现在可以自动连接。由于您已经可以访问它，因此几乎没有理由将视图中的联系人手动绑定到控制器的内容。

更改视图的模板以包括：

```
{{#if controller.isLoaded}} // set this true in your ajax success function
  {{#each contact in controller}}
    {{view App.ContactListItemView contactBinding="contact"}}
  {/each}}
{{else}}
  <tr>
    <td colspan="2">
       You have no contacts <br />
       :( 
    <td>
  </tr>
{{/if}} 
```*

# android - 在 GCM 的“internalRegister”方法中启动了哪个服务？

> ID：11301799
> 
> 赞同：0
> 
> 时间：2012-07-02T22:03:06.143
> 
> 标签：android, android-c2dm, google-cloud-messaging

下面是类`internalRegister`方法的代码`GCMRegistrar`

```
static void internalRegister(Context context, String... senderIds) {
        if (senderIds == null || senderIds.length == 0 ) {
            throw new IllegalArgumentException("No senderIds");
        }
        StringBuilder builder = new StringBuilder(senderIds[0]);
        for (int i = 1; i < senderIds.length; i++) {
            builder.append(',').append(senderIds[i]);
        }
        String senders = builder.toString();
        Log.v(TAG, "Registering app "  + context.getPackageName() +
                " of senders " + senders);
        Intent intent = new Intent(GCMConstants.INTENT_TO_GCM_REGISTRATION);
        intent.setPackage(GSF_PACKAGE);
        intent.putExtra(GCMConstants.EXTRA_APPLICATION_PENDING_INTENT,
                PendingIntent.getBroadcast(context, 0, new Intent(), 0));
        intent.putExtra(GCMConstants.EXTRA_SENDER, senders);
        context.startService(intent);
    } 
```

在最后一行代码中，它启动了一个应该联系 GCM 服务器的服务。GSM 服务器反过来发`com.google.android.c2dm.intent.REGISTRATION`回广播。**这是哪个服务？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T22:35:41.290

从 2.2 开始，意图 com.google.android.c2dm.intent.REGISTRATION 是 Android 操作系统的一部分。在过去，我们为此目的调用 startService 以便将我们的设备注册到 Google C2DM 服务器。您也可以使用 GCM 做同样的事情，而无需使用 GCM 客户端库。

看到这个迁移指南，你就会明白我的意思：http: [//developer.android.com/guide/google/gcm/c2dm.html](http://developer.android.com/guide/google/gcm/c2dm.html)

对我来说，我完全跳过了 GCM 库，直接使用 com.google.android.c2dm.intent.REGISTRATION 意图进行注册。

# backbone.js - 在咖啡脚本中，这两种创建主干模型、视图等的方式有什么区别

> ID：11301806
> 
> 赞同：3
> 
> 时间：2012-07-02T22:04:47.917
> 
> 标签：backbone.js, coffeescript

我目前正在研究咖啡脚本，因为它的语法比纯 JavaScript 更容易编写/理解。但是我发现使用主干和咖啡脚本的教程显示创建模型的方法如下：

```
class User extends Backbone.Model
  initialize: ->
    alert 'start' 
```

这看起来很不错，但是当使用`extends`它时编译相当奇怪......我知道这是咖啡脚本使类在 javascript 中工作的方式。

```
(function() {
  var User,
    __hasProp = {}.hasOwnProperty,
    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

    User = (function(_super) {

    __extends(User, _super);

    function User() {
      return User.__super__.constructor.apply(this, arguments);
    }

    User.prototype.initialize = function() {
      return alert('start');
    };

    return User;

  })(Backbone.Model);

}).call(this); 
```

但如果你使用：

```
User = Backbone.Model.extend
    initialize: ->
        alert 'start' 
```

编译得更好（更像是我写它的方式）：

```
(function() {
  var User;

  User = Backbone.Model.extend({
    initialize: function() {
      return alert('start');
    }
  });

}).call(this); 
```

谁能向我解释创建模型类的方式的差异，以及为什么第一种方法在教程中更频繁地使用，而第二种方法的编译更像我在纯 JavaScript 中创建模型的方式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T23:25:00.567

这两种方法在功能上是等效的，它们的工作方式没有显着差异。当然，存在一些实现差异，但最终结果是相同的。

真正的区别，以及为什么您会从 coffeescript`extends`关键字看到更大的代码生成，是当您调用 时`Backbone.Model.extend`，您调用的是与 CoffeeScript 生成的相同代码的 Backbone 版本。它被封装在 Backbone 的`extend`方法中，但在工作方式和原因上大体相似。

The only reason you see the CoffeeScript `extends` used everywhere, is because you're looking at CoffeeScript examples. Honestly, that's it. There's no benefit to doing it one way or the other. It's just that CoffeeScript says you should use the `extends` keyword so people do it that way.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T22:31:58.290

我没有使用 Backbone 的经验，但我认为它的`Backbone.Model.extend`存在只是为了避免 CoffeeScript 编译成这样冗长而复杂的东西。但是由于 CoffeeScript 提供了一个“extends”关键字，所以您可以使用一种漂亮而干净的 OOP 方式，并且仍然可以得到可读的代码。

# python - 生成人类观看时间的更优雅版本

> ID：11301808
> 
> 赞同：2
> 
> 时间：2012-07-02T22:05:11.590
> 
> 标签：python, time

我目前正在生成给定秒数的时间量。这是我很快想到的。它工作得很好，但它很丑陋。

想不出任何技巧来使它更优雅（不让它变得复杂或依赖这个和那个），但也许这里有人有一些技巧。

谢谢！

```
def humanizeTime(seconds):
  if seconds < 60:
    return "%d seconds" % int(round(seconds))
  else:
    minutes = seconds / 60.0
    if minutes < 60:
      return "%d minutes %d seconds" % divmod(seconds, 60)
    else:
      hours = minutes / 60.0
      if hours < 24:
        return "%d hours %d minutes" % divmod(minutes, 60)
      else:
        days = hours / 24.0
        if days < 7:
          return "%d days" % int(round(days))
        else:
          weeks = days / 7.0
          if weeks < 4:
            return "%d weeks" % int(round(weeks))
          else:
            months = days / 30.0
            if months < 12:
              return "%d months" % int(round(months))
            else:
              return "%d years" % int(round(days / 365.0)) 
```

**编辑：**

如果有一个好的库可以用适当的语法计算我上面的内容（同样，永远不会超过 2 个字段），我肯定会加入。

然后我又找不到任何这样做的，因为任何可以计算它的库仍然需要我编写这样的代码（或下面显示的一些答案）以最多显示 2 个字段。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T22:45:49.860

## 免责声明

这个答案是表达 OP 显示的代码的更*Pythonic方式的示例。*这只是一个使用高阶函数的有趣编码练习，绝不是建议的，甚至不是**理智**的选择来处理真实的时间间隔。

请记住，现实生活中的时间和日历计算既不容易也不容易，最好使用经过良好测试和成熟的库来解决这个问题。

* * *

也就是说，这是一种方法，显然更优雅：

```
# A function to generate the divisions list
def divisions(l, v):
    l.append(l[-1] * v)
    return l

# A function to reduce the divisions list
def reduction(l, v):
    q, r = divmod(l[-1], v)
    l[-1] = q
    l.append(r)
    return l

TIME_STEPS = (60, 60, 24, 7, 30, 12)
DIVISIONS = reduce(divisions, TIME_STEPS, [1])[1:]
DIVISIONS.reverse()

# The "seconds" variable holds the time interval in seconds
seconds = 6000
fragments = reduce(reduction, DIVISIONS, [seconds])

# Fragments is a list: [years, months, weeks, days, hours, minutes, seconds]
# In this example: [0, 0, 0, 0, 1, 40, 0]

# And here's the readability part
NAMES = ("years", "months", "weeks", "days", "hours", "minutes", "seconds")
readable = " ".join("%d %s" % (v, n) for v, n in zip(fragments, NAMES) if v > 0)

# Final result: readable = "1 hours 40 minutes" 
```

请注意，大多数列表在缩减期间都发生了变化，这有点可疑。在相当纯的函数式编程语言中，我可能会因为写这个而被活活烧死。但是，由于 Python**不是**一种函数式编程语言，它还不错。

另请注意，显示的代码的一半是计算`DIVISIONS`列表，它总是相同的，因此可以手动预先计算。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T22:13:32.997

我认为这很好用，因为`hh:mm:ss`格式更具可读性。

```
>>> import datetime
>>> str(datetime.timedelta(seconds=1000))
'0:16:40' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T03:30:19.100

类似以下内容的情况如何：

```
> import datetime
> import re
>
> def get_duration(sec):
...    return re.sub(r'(\d+):(\d\d):(\d\d)', r'\1 hrs, \2 mins, \3 secs',
...                  str(datetime.timedelta(seconds=sec)))
...
> get_duration(0)
'0 hrs, 00 mins, 00 secs'
> get_duration(86401)
'1 day, 0 hrs, 00 mins, 01 secs'
> get_duration(691200)
' 8 days, 0 hrs, 00 mins, 00 secs' 
```

它不能处理几个月、几周等。再说一次，要正确处理过去几周的任何事情*需要做很多工作。*我认为这`datetime.timedelta`会让你在没有很多明确的数学或其他丑陋的情况下获得一个体面的解决方案。

话虽如此，请查看[此答案](https://stackoverflow.com/a/6574453/41747)所建议的[`dateutil`模块](http://labix.org/python-dateutil/)。我已经在各种嵌入式设备中编写了一堆时间例程，如果没有极端的挑衅，我什至**不会**考虑再写一个。

# objective-c - Search TableView with UISearchBar

> ID：11301809
> 
> 赞同：1
> 
> 时间：2012-07-02T22:05:16.997
> 
> 标签：objective-c, xcode

I have a search bar added in the user interface. The Searchbar is already set, and works, but I can't figure out how to make it search content in the UITableView. Can I just remove the items that do not start with the characters typed in the search bar??

```
- (void)searchBarSearchButtonClicked:(UISearchBar *)searchBar {
if (searchBar.text.length < 1) {
    return;
}
else {
    // Do search stuff here

}} 
```

This code works, the else function is called. But I don't know how to do it. I don't want to create a whole new array just for that.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T23:13:06.057

我给你一个更好的。此示例将根据用户类型进行搜索。如果您的数据非常庞大，您可能希望按照`- (void)searchBarSearchButtonClicked:(UISearchBar *)searchBar`您最初的计划来实施它。不幸的是，您需要第二个数组，但很容易在表格中围绕它编写代码：

```
-(void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText {
    if(searchText.length == 0)
    {
        isFiltered = FALSE;
    }
    else
    {

        isFiltered = true;
        if (filteredTableData == nil)
            filteredTableData = [[NSMutableArray alloc] init];
        else 
            [filteredTableData removeAllObjects];

        for (NSString* string in self.masterSiteList)
        {
            NSRange nameRange = [string rangeOfString:searchText options:(NSCaseInsensitiveSearch|NSDiacriticInsensitiveSearch)];
            if(nameRange.location != NSNotFound)
            {
                [filteredTableData addObject:string];
            }
        }
    }
    [self.tableView reloadData];
} 
```

然后更新您的委托方法以在var 设置为 YES`filteredTableData`时显示数组的数据而不是常规数组。`isFiltered`

# html - MAC giving me path as c:\fakepath in Chrome & Safari. Working properly in FF

> ID：11301813
> 
> 赞同：-1
> 
> 时间：2012-07-02T22:06:09.360
> 
> 标签：html, jsf-2, cross-browser, filepath, undefined-behavior

Below is what I have in jsf 2.0

```
<tr>
    <th width="19%" align="left"><h:outputLabel value="Photo" /></th>
    <th width="2%">:</th>
    <td width="19%"><h:inputText value="#{PersonalInformationDataBean.photo}" size="80" id="photo" readonly="true"/> 
    <input type="file" name="pathPhoto" onchange="alert('you changed me...'+window.document.patentForm.pathPhoto.value);window.document.patentForm.photo.value=window.document.patentForm.pathPhoto.value"/></td>
</tr> 
```

When I click on button `Choose File` and select some file, I get different path.

## Chrome & Safari

I get path name as `C:\fakepath\jobs_dubizzle.rtf`. I always get output as `C:\fakepath\FileName` irrespective of any location.

## Mozilla Firefox

It gives me full path perfectly.

**Any idea why I am getting like this? (Different behavior across browsers.) And how to overcome? I need full path of that file so that I can use same path for storing the path in MySQL data.**

* * *

## Update 1

What I wanted to do is when I submit the form, I want that file to get uploaded in mysql data. Right now I would be selecting images. To upload images, I would be using code as provided **[here](http://www.roseindia.net/jdbc/save_image.shtml)**.

As you see, I would be needing full path for statement below.

```
File image = new File("C:/image.jpg"); 
```

That is why, I was curious to get full path of the selected file.

Any idea to get this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T02:03:29.517

在 Web 应用程序中，您不希望依赖于在服务器上查找文件。您可以做的最好的事情是存储在应用程序的根目录并像这样检索：

```
ExternalContext external = FacesContext.getCurrentInstance().getExternalContext();
ServletContext servletContext = (ServletContext) external.getContext();
InputStream is = servletContext.getResourceAsStream("image.jpg"); 
```

* * *

但**理想情况下**，如果您使用 JSF 并拥有 Servlet 3.0 容器，我建议您使用[BalusC](https://stackoverflow.com/users/157882/balusc)在他的博客中编写的文件上传，可以在[这里](http://balusc.blogspot.com/2009/12/uploading-files-with-jsf-20-and-servlet.html)找到。

如果您没有 Servlet 3.0，那么您可以使用[Core JavaServer Faces](http://horstmann.com/corejsf/)教科书中编写的文件上传示例。您可以从作者的站点下载源代码，它位于 ch13 目录中。

当您使用上述任何组件提交表单时，您可以做任何您想做的事情，例如在操作方法中保存到数据库。

或者，如果您可以使用 PrimeFaces 之类的库，它们有一个不错的文件上传组件，您可以开箱即用。

# java - PDFBox：处理非常大的 PDF。

> ID：11301818
> 
> 赞同：10
> 
> 时间：2012-07-02T22:06:48.087
> 
> 标签：java, pdfbox

我正在处理一些非常大的 PDF，有些超过 7GB。PDF 有多达 20,000 页和许多全页彩色图像。我想使用 PDFBox 来处理 PDF，但由于我尝试打开 PDF 时出现 OutOfMemoryError 的大小。

我正在使用 Intellij、java 6 在 Windows 7 上使用版本 pdfbox-app-1.6.0。

首先，我尝试编写一个简单的程序，该程序仅在 PDDocument 中打开 PDF 并将每个页面处理到另一个 PDDocument：http: [//ideone.com/arKhB](http://ideone.com/arKhB)

接下来我尝试使用 PDFBox [CopyDoc](http://pdfbox.apache.org/apidocs/org/apache/pdfbox/examples/persistence/CopyDoc.html)示例。

这两个示例都内存不足。

我假设这是因为 PDFBox 试图将整个文档读入内存。有没有办法让它一次只打开一页？我知道这会是较慢的处理，但目前我无法处理任何事情。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2016-08-09T20:09:32.390

在 2.0.* 版本中，像这样打开 PDF：

```
PDDocument doc = PDDocument.load(file, MemoryUsageSetting.setupTempFileOnly()); 
```

这会将缓冲内存使用设置为仅使用大小不受限制的临时文件（无主内存）。

17.4.2018 更新：[FAQ](https://pdfbox.apache.org/2.0/faq.html)中描述了更多节省内存的技巧。尚未描述但自 2.0.9 以来处于活动状态`PDFRenderer.setSubsamplingAllowed(true)`，在进行渲染时会进行二次采样（跳过像素行/行）。这为包含大量图像文件的 PDF 文件节省了空间。

# r - How to remove column duplicates according to entry in another column (within a dataset)

> ID：11301820
> 
> 赞同：1
> 
> 时间：2012-07-02T22:07:05.637
> 
> 标签：r, duplicates, duplicate-removal, duplicate-data

I have a dataset that looks like:

```
 ColA  ColB   ColC  ColD  ColE
    rs778   C   Can     +   C/T
    rs778   C   Pro     +   C/T
    rs779   P   Can     +   A/G
    rs779   P   Can     -   A/G 
```

I want to remove duplicate entries in Column A based on column C. Said another way, if two entries in Column A are the same, I want the row that stays to be determined by the entry in Column C. If the entries in Column C are the same, then the row that stays should be determined by Column D. If "Can" > "Pro" and "+" > "-", then the final output I'm looking for would look like this:

```
 ColA   ColB ColC   ColD ColE
    rs778   C   Can     +   C/T
    rs779   P   Can     +   A/G 
```

I removed completely duplicated data using:

```
data2 <- data[!duplicated(data[-2]),] 
```

And am hoping my solution lies in some modification of this I have yet to discover. Thanks for your help!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T23:24:33.587

这是一个可以满足您需要的解决方案，但可能不是最优雅的方法。

```
data = read.table(header=TRUE, stringsAsFactors=FALSE,
                  text="ColA  ColB   ColC  ColD  ColE
                        rs778   C   Can     +   C/T
                        rs778   C   Pro     +   C/T
                        rs779   P   Can     +   A/G
                        rs779   P   Can     -   A/G")

# Convert ColC and ColD to factors, controlling sort order with levels arg.
# "Can" will sort before "Pro", and "+" will sort before "-".
data$ColC = factor(data$ColC, levels=c("Can", "Pro"))
data$ColD = factor(data$ColD, levels=c("+", "-"))

# Sort rows.
data = data[order(data$ColA, data$ColC, data$ColD), ]

# Works because prefered ColA duplicate sorts highest.
data2 = data[!duplicated(data$ColA), ]

data2
#    ColA ColB ColC ColD ColE
# 1 rs778    C  Can    +  C/T
# 3 rs779    P  Can    +  A/G 
```

# java - IndexOutOfBounds with array

> ID：11301825
> 
> 赞同：0
> 
> 时间：2012-07-02T22:07:37.610
> 
> 标签：java, android

Each time I try to run this method

```
private void resetOdds() {
    mOdds[1] = 0.10;
    mOdds[2] = 0.25;
    mOdds[3] = 0.35;
    mOdds[4] = 0.30;
} 
```

I get an IndexOutOfBounds error. I don't know why, as I supply enough items in the array to change:

```
private final double[]      mOdds           = { 0.10, 0.25, 0.30, 0.35 }; 
```

Does anyone know why I'm getting this error?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T22:09:15.453

您的索引减少了一个；它应该从 0 开始：

```
mOdds[0] = 0.10;
mOdds[1] = 0.25;
mOdds[2] = 0.35;
mOdds[3] = 0.30; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T22:42:44.150

在 Java 中，数组索引从 0 开始。

因此，要访问第 k 个元素，您需要为数组提供第 (k-1) 个索引。

此外，如果您的数组大小为 n，则意味着您的索引从 0 运行到 n-1。

最后，这解决了您的问题：

```
private void resetOdds() {

mOdds[0] = 0.10;
mOdds[1] = 0.25;
mOdds[2] = 0.35;
mOdds[3] = 0.30;

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T22:09:20.233

将代码更改为：

```
private void resetOdds() {

mOdds[0] = 0.10;
mOdds[1] = 0.25;
mOdds[2] = 0.35;
mOdds[3] = 0.30; 
```

数组在 Java 中基于零。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-02T22:09:59.417

```
private void resetOdds() {

mOdds[0] = 0.10;
mOdds[1] = 0.25;
mOdds[2] = 0.35;
mOdds[3] = 0.30;

} 
```

从 0 开始索引。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-02T22:10:05.377

数组是基于 0 的。尝试：

```
private void resetOdds() {

mOdds[0] = 0.10;
mOdds[1] = 0.25;
mOdds[2] = 0.35;
mOdds[3] = 0.30; 
```

否则，当你去寻找“4”时，由于没有第 5 个元素，你会得到错误。

# springboard - iOS without Springboard: Terminating since there is no system event server

> ID：11301828
> 
> 赞同：11
> 
> 时间：2012-07-02T22:07:43.880
> 
> 标签：springboard

I'm attempting to create a simple ("Hello World") application using IB vs Springboard. Once I added a button with its connection to an action routine, I get the following:

> Terminating since there is no system event server. (Run the EventPump or pass the argument "-RegisterForSystemEvents" if you want to run without SpringBoard.

Can someone please clarify this?

1) What's an 'EventPump' and how is it implemented?
2) Where do I pass the 'RegisterForSystemEvents'?

I searched through the Apple library & googled; but I haven't found any basic documentation on this.

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-27T13:11:00.897

您混淆了 SpringBoard 和情节提要。您的情节提要很好，但您需要重新启动设备（或退出并重新启动模拟器），因为 SpringBoard（处理主屏幕的进程）已经死亡。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-31T11:26:24.603

李，我也面临同样的问题，然后我关闭模拟器并重新打开它。下次对我来说效果很好。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-08T17:58:59.820

这不会回答您的问题，但可能会帮助有同样问题的人。

它对我有用的是删除 iPhone 模拟器中的应用程序，强制退出模拟器并在 Xcode 中再次运行。

这发生在我将项目从 Xcode 4.5 Dev Preview 切换到 Xcode 4.3.3 时。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T07:04:42.813

当我在 Xcode 4.5 和 4.2.1 之间切换时，它也发生在我身上。我刚刚关闭了 Xcode 4.5 并再次运行了该项目。有效。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-25T06:01:53.433

退出模拟器并再次运行。如果您同时安装了 XCode 4.5 和 XCode 4.3.3 或更早版本，请确保退出 XCode 和模拟器以在单个版本上运行，即新旧版本。仅仅是因为使用模拟器（XCode 4.5）启动了旧 xcode 项目的应用程序。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-24T18:08:37.080

添加一个用例场景，因为 Javawag 的响应也帮助了我。

我遇到了同样的错误消息，问题是我在两个版本的 xcode 和两个版本的模拟器之间切换。我运行了 iOS 6 模拟器，切换到需要 iOS 5 模拟器的旧版 xcode，并收到提到的奇怪错误消息。我只是退出了 iOS 6 模拟器，让旧的 xcode 启动正确的模拟器，然后一切又恢复了。

# java - How can I update an "x" variable with a Key Listener?

> ID：11301829
> 
> 赞同：3
> 
> 时间：2012-07-02T22:07:45.003
> 
> 标签：java, swing, graphics

What I'm trying to do is practice some swing coding. I created a rectangle from scratch and gave it an x and y position on the frame. What I've been trying to do is use a key listener to update the x variable to move it left and right.

Here I created a class which implements an Action Listener:

```
 public class Board extends JPanel implements ActionListener { 
```

I added "x" and "y" variables:

```
int x, y;
int dx;
int HEIGHT, WIDTH;
private final int DELAY = 50; 
```

Next are some additional functions:

```
 public Board() {

    setBackground(Color.BLACK);
    setFocusable(true);
    setDoubleBuffered(true);
    addKeyListener(new TAdapter());

    x = 15;
    y = 150;
    dx = 5;    //This is what I want to use to update the x variable if possible.

    HEIGHT = 15;
    WIDTH = 15;

} 
```

This is where I created the square with said "x" and "y" variables:

```
public void paint(Graphics g) {
    super.paint(g);

    int red = 103;
    int green = 10;
    int blue = 100;
    Color square = new Color(red, green, blue);

    g.setColor(square);
    g.fillRect(x, y, WIDTH, HEIGHT);

    Toolkit.getDefaultToolkit().sync();
} 
```

Ok, now onto what I'm trying to accomplish.

I created a "move" method that will be fed into the Action Performed method and then I created a Key Adapter method that handles the Key Events:

```
 public void move() {
        x += dx;
    }

    public void actionPerformed(ActionEvent e) {
    move();
    repaint();
}

private class TAdapter extends KeyAdapter {

    public void KeyPressed(KeyEvent e) {
        int key = e.getKeyCode();

        if (key == KeyEvent.VK_LEFT) {
            dx = 1;
        }

        if (key == KeyEvent.VK_RIGHT) {
            dx = -1;
        }
    }   
} 
```

Here's a screenshot of what I'm getting:

![black window with small purple square in the left side](../Images/6569a90475570a6dbf1a55486963f284.png)

Everything manifests through another class, but all that does is initialize the various JFrame components (size, visibility, etc.) and starts the program.

When I run the program I cannot get the x variable to update. Can someone let me know what I need to add?

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T23:14:30.347

我认为你的问题是你的 actionPerformed 方法没有被调用，所以你的 move() 方法也没有被调用。您没有向任何内容添加 ActionListener，因此根本不会调用它。我会像这样在 keyPressed 中调用 move() 和 repaint()

```
if( key == KeyEvent.VK_LEFT ) {
    dx = 1;
    move();
    repaint();
}

if( key == KeyEvent.VK_RIGHT ) {
    dx = -1;
    move();
    repaint();
} 
```

我很确定这会奏效。我还想指出您的代码中的两件事。首先，keyPressed 有一个小写的 k，而不是一个大写的。其次，你使用 dx 和按钮的方式，如果你按下左按钮，方块会向右移动；它会朝相反的方向发展。此外，就像 dann.dev 在他的评论中提到的那样，至少阅读那本书的第一章。它为您提供了有关视频游戏中的双缓冲、多线程的提示，并提供了一个可以使用的不错的循环。

# javascript - trouble passing variables to jade using coffeescript and express.js

> ID：11301834
> 
> 赞同：1
> 
> 时间：2012-07-02T22:08:29.427
> 
> 标签：javascript, node.js, express, pug

I'm new to node and express and working on the front end of an app that uses jade as a templating language. There is something I'm still having trouble wrapping my brain around and exhaustive googling and searching here haven't dug up the answer.

My app structure:

```
 myapp/
    | - app.coffee
    | - config.coffee
    | - assets/ 
            | - scripts
                    my coffeescript files   (test.coffee)           
            | - stylesheets
                    my sass files
    | - public/ 
            | - images
            | - scripts
                    my coffeescript compiled as js (test.js)
            | - css
                    my sass files compiled as css
    | - views/ 
            | - jade files, layouts, partials etc 
```

Currently I'm able to pass variables to jade if I define them in app.coffee, for example if I do:

```
 app.get '/', (req, res) ->
      res.render 'landing',
        testvar: 'a test string' 
```

Then I can put:

```
 p #{testvar} 
```

Into landing.jade and it will render as:

```
 <p>a test string</p> 
```

That's all well and good. But what if I want to define a variable or object in one of my other coffeescript files located in assets, and then have it rendered by jade? What is the best way to go about this? Is this possible? I've looked into express-expose, but it seems this isn't quite what I'm looking for, or maybe I'm not understanding it correctly.

What I'm trying to avoid is dirtying up my app.coffee file with a bunch of object/variables, I'd rather just define them in my assets coffee files, then include them when I define the route with app.get. It's worth mentioning that the compiled coffee files are included in my layout.jade file at the top of the page using a classic script tag:

```
 script(src='scripts/test.js') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T22:20:53.903

```
app.locals.use (req, res) ->
  res.locals.script = (s) ->
    "<script type=\"text/javascript\" src=\"#{s}\"></script>" 
```

# android - Widget.Holo.Light.Button.Borderless 不公开？

> ID：11301835
> 
> 赞同：1
> 
> 时间：2012-07-02T22:08:32.943
> 
> 标签：android, android-theme

我不断收到一条错误消息，说它`@android:style/Widget.Holo.Light.Button.Borderless`不是公开的，因此不能在我的应用程序中使用。但是等效的非轻型版本`@android:style/Widget.Holo.Button.Borderless`没有出现此类错误并且可以使用。我做错了什么，还是这是一个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T22:38:14.190

`@android:style`在许多情况下，直接引用（或）资源是不安全的`@android:drawable`，因为 Android 开发团队通常不能保证这些主题在不同的 SDK 版本中保持一致。如果 eclipse 给你一个错误，说有问题，最好将源代码中的主题复制并粘贴到你的项目中，然后从那里引用它们。这样你就知道它总是有效的，无论如何。

# jquery - FadeOut div when scrolling horizontally

> ID：11301836
> 
> 赞同：0
> 
> 时间：2012-07-02T22:08:36.110
> 
> 标签：jquery, scroll, fadein, fadeout

I want to slowly fade out a div using JQuery when I start scrolling horizontally, and then Fade back in when I go back to 0 in the horizontal axis. So I have this:

```
 <div id="hider">Content</div> 
```

And then the script:

```
 $(function() {
    $(document).scroll(function() {
    if($('body').scrollLeft() == 0)
    $("#hider").fadeIn();
    else 
    $("#hider").fadeOut();
    });
    }); 
```

and on the CSS

I have:

```
 #hider {
position: absolute;
left: 34px;
display: none;
    } 
```

I saw this solution in a similar thread, but I can't get it to work.The div #hider just keeps blinking on and off as I scroll and never stops blinking

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T22:12:28.807

您选择的是标签而不是 id：

这样做：添加`#`这样的：

```
$("#hider").fadeIn(); 
```

看到这个：[http](http://api.jquery.com/fadeIn/) ://api.jquery.com/fadeIn/ 和 [http://api.jquery.com/fadeOut/](http://api.jquery.com/fadeOut/)

请参阅[此](https://stackoverflow.com/q/5367731/235710)内容以了解您要执行的操作。

# z-index - Box-shadow overflow issue

> ID：11301837
> 
> 赞同：0
> 
> 时间：2012-07-02T22:08:45.613
> 
> 标签：z-index, css

I have two boxes, title and content. I am using box-shadow on these to make them more good looking. Right now, both shadows are visible one on top of the other. But i want the title shadow not to float over the content box.

If i add **position: relative** to the title box, the content shadow stops floating over the title (this is exactly what i want to do, but the other way around). However, trying the opposite doesn't work. Z-index also doesnt seem to be working.

Fiddle: [http://jsfiddle.net/JR93S/24/](http://jsfiddle.net/JR93S/24/)

```
h2 {
    width: 300px;
    margin: 20px 0px 0px 20px;
    padding: 5px 11px 5px 11px;

    border-radius: 3px;

    color: #333;
    background-color: #CCF;

    box-shadow: 0px 0px 10px 10px rgba(0,0,0,0.5);
}

div {
    width: 300px;
    height: 300px;
    margin: 0px 0px 0px 20px;
    padding: 10px 10px 10px 10px;

    border: 1px solid #999;

    border-radius: 3px;

    box-shadow: 0px 0px 10px 10px rgba(0,0,0,0.5);
}

<h2>title</h2>
<div>some stuff here</div> 
```

Any ideas? Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T22:11:16.563

您可以只使用`inset`box-shadows 来避免重叠。

在这里，[http://jsfiddle.net/JR93S/25/](http://jsfiddle.net/JR93S/25/)

**编辑**

我想这就是你想要的效果。

[http://jsfiddle.net/JR93S/31/](http://jsfiddle.net/JR93S/31/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T23:16:38.487

好的，诀窍是添加...

```
background-color: #FFF; 
```

...到 div。现在 z-index 工作。

# iphone - loading another nib into a viewController

> ID：11301838
> 
> 赞同：0
> 
> 时间：2012-07-02T22:08:47.607
> 
> 标签：iphone, ios, xib, nib

I have a ViewController that includes its own .nib file, I am wanting to load another .nib into this ViewController that will be a menu of sorts... however I am just not sure how to do this and was hoping for some help.

Before I show you the code I will explaine what I have done.

*   I have a UIViewController with a Nib that is my main view.
*   I have created another nib which is going to be a menu that appears as a subview to the main view
*   I have changed this nibs class to the UIViewController of the main view so that it can see all of the same IBActions and outlets.
*   I have then run the code below trying to load the seperate nib as a subview however when I run it the subview of the other nib is not showing up....

    ```
     jumpBarPortraitNib = [[UIView alloc] initWithFrame:CGRectMake(0.0, 50.0, 320.0, 367.0)];

        // add jumpbar container to view
        [self.view insertSubview:jumpBarPortraitNib belowSubview:actionTabBar]; 
    ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T22:44:22.740

这里显然有些混乱。

笔尖只是一个包含（*）对象的存档，包括（通常）一个或多个视图对象（`UIView`在您的情况下）。您不会“将笔尖加载为子视图”。您实例化 nib，可能将其交给 a`UIViewController`以拥有和管理它，并将 nib 中引用的视图添加到您的视图层次结构中。

您对第一行代码所做的就是创建一个`UIView`具有给定帧大小的通用实例，并将其插入到任何 [self view] 中。即使您将视图错误地命名为 nib，您所写的内容也没有实际引用nib *。*

对于您正在做的事情，我可能会走以下两条路线之一：

1.  在原始 nib 中添加视图作为单独的顶级视图，并将其连接到`IBOutlet`. `UIViewController`然后，您可以从设置为 nib 文件所有者的公共实例中轻松显示菜单。
2.  有一个单独的`UIViewController`实例来管理菜单视图，你将使用它来实例化笔尖的内容，`-initWithNibName:`就像@Aaron 提到的那样。（请注意，您不需要在外部设置框架；框架将作为视图的属性存档在 nib 中。）

*：不是真的，但你可以这样想。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T22:42:26.320

您需要使用 initWithNibName，然后在以下行设置框架：

```
UIViewController * jumpVC = [[UIViewController alloc] initWithNibName:@"jumpBarPortrait" bundle:nil];
jumpVC.view.frame = //your frame 
```

# flash - Good AS2 Encryption

> ID：11301839
> 
> 赞同：1
> 
> 时间：2012-07-02T22:09:07.563
> 
> 标签：flash, actionscript-2

I would like to know what Flash AS2 encrypter is the best, I need one that can encrypt it good enough for **most** people to not be able to unencrypt it. It doesn't matter how expensive it is, money isn't an object. I need this for ActionScript **2**, not 3\. Thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T04:47:27.550

[SWFEncrypt](http://www.amayeta.com/software/swfencrypt/)非常好，因为它可以加密 SWF，混淆代码中的例程，并且通常很难将其反编译为可理解的代码。显然它并不完美，但它可能需要太长时间和太多的努力才能从 SWF 中获得任何可以理解的东西。

# javascript - 如何在溢出隐藏的 div 中滚动到某个当前不可见的元素？

> ID：11301841
> 
> 赞同：17
> 
> 时间：2012-07-02T22:09:17.587
> 
> 标签：javascript, jquery, scroll

我有一个溢出隐藏 div 中的元素列表。所以并不是所有的元素都是可见的。现在，如果一个元素被激活，它应该在 div 中可见。

如何使用 jQuery 滚动到活动元素？

最后一个元素具有活动类只是一种方便。它将被动态切换。

```
 var scrollToEl = $("div.element.active");
 console.log(zoomToEl);
```

```
 #main,
 #sidebar {
   height: 200px;
 }
 #wrapper {
   width: 190px;
   float: left;
   background: grey;
   overflow: auto;
   overflow-x: hidden;
 }
 #sidebar div.element {
   height: 150px;
   width: 150px;
   background-color: green;
   margin-bottom: 10px;
 }
 #sidebar div.element.active {
   background-color: red;
 }
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div id="main">
  <div id="wrapper" class="sidebar">
    <div id="sidebar">
      <div class="element" data-slide-id="0">a
      </div>
      <div class="element" data-slide-id="1">b
      </div>
      <div class="element" data-slide-id="2">c
      </div>
      <div class="element" data-slide-id="3">d
      </div>
      <div class="element" data-slide-id="4">e
      </div>
      <div class="element" data-slide-id="5">f
      </div>
      <div class="element" data-slide-id="6">g
      </div>
      <div class="element active" data-slide-id="7">h
      </div>
    </div>
  </div>
</div>
```

应该变得可见的元素：

```
var scrollToEl = $("div.element.active"); 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-02T22:13:05.343

您可以将[`scrollTop`](http://api.jquery.com/scrollTop/)包装器 div 的`top`设置[`position`](http://api.jquery.com/position/)为活动元素的 。

```
$("#wrapper").scrollTop($("#wrapper").scrollTop() + $("div.element.active").position().top); 
```

[**演示**](http://jsfiddle.net/yuFk5/250/)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-07-02T22:11:27.403

也许你正在寻找[`scrollIntoView`](https://developer.mozilla.org/en/DOM/element.scrollIntoView)方法。

```
scrollToEl[0].scrollIntoView(); 
```

**演示：http:** [//jsfiddle.net/yuFk5/14/](http://jsfiddle.net/yuFk5/14/)

# javascript - 付款对话框 USD vs Credits

> ID：11301844
> 
> 赞同：2
> 
> 时间：2012-07-02T22:09:30.403
> 
> 标签：javascript, facebook-credits

按照新发布的 API 传递

dev_purchase_params: {'oscif': true}

与 FB.ui 付款对话框的其他正常参数一起导致一些不一致的行为。我想知道我是否做错了什么。

如果我有足够的积分余额来支付一个项目，那么付款对话框将显示项目的积分价格（即购买 XYZ - 价格：10 个积分）。但是如果我没有足够的积分，那么它会以美元（或用户设置为默认货币的任何货币）显示。例如，如果该商品售价 10 美元（100 积分）而我只有 50 积分余额，那么它将显示“购买 XYZ - 价格：10 美元”以及付款选项等。

有没有办法总是显示美元（或当地货币）？否则，我们的游戏内店面与付款对话框有点不一致。如果我们以当地货币价格为所有东西定价，但弹出支付对话框询问积分，这会使最终用户感到困惑。

# sql - SQL UPDATE 语句将多行合并为一列

> ID：11301846
> 
> 赞同：1
> 
> 时间：2012-07-02T22:09:36.327
> 
> 标签：sql, sql-server, sql-server-2005

我正在处理航空公司数据，所以我有这样的查询

```
SELECT Invoices.PNR, Segments.Depart, Segments.Arrival, Segments.DepartDateTime
FROM Invoices AS i INNER JOIN Segments AS s
ON i.Invoice_ID = s.Invoice_ID`
WHERE PNR = 'AAAAAA' 
```

这返回

```
PNR    Depart Arrival DepartDateTime
AAAAAA DFW    MCI     7/2/2012 7:30 AM
AAAAAA MCI    LAX     7/2/2012 11:30 AM
AAAAAA LAX    DFW     7/4/2012 2:30 PM 
```

我在 Invoices 中有一个名为 routing 的列，我想显示 'DFW-MCI-LAX-DFW' 这是否可以使用仅 SQL 的方法？这些段按顺序列出，因此 DFW-MCI 首先是 MCI-LAX，然后是 LAX-DFW。

编辑：如果我可以用 DFW-MCI-MCI-LAX-LAX-DFW 更新数据库，那是完全可以接受的。我可以去掉视图层上的重复条目。

我可以很容易地在 ColdFusion 中编写它，但是循环和数以千计的数据库更新需要很长时间。我也可以对每 100 条记录进行一次大规模更新，但我想完全避免使用 SQL 以外的任何东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T22:47:32.997

以下是更新值的方法，假设这是一次更新（如果不是，则每次`Segments`有任何更改时都必须运行它）：

```
;WITH x AS 
(
  SELECT Invoice_ID, Routing = STUFF
  (
    (SELECT '-' + Depart + '-' + Arrival
      FROM dbo.Segments
      ORDER BY DepartDateTime
      FOR XML PATH(''), 
      TYPE).value(N'./text()[1]', N'varchar(max)'), 1, 1, '')
  FROM dbo.Segments
  GROUP BY Invoice_ID
)
UPDATE i SET Routing = x.Routing
  FROM dbo.Invoices AS i
  INNER JOIN x ON i.Invoice_ID = x.Invoice_ID; 
```

`Invoices`更新后的内容：

| PNR | 发票_ID | 路由 |
| --- | --- | --- |
| AAAAAA | 1 | DFW-MCIMCI-LAXLAX-DFW |

*   示例[db<>fiddle](https://dbfiddle.uk/?rdbms=sqlserver_2017&fiddle=43393f842f4618db1afa6e6c97e8b176)

如果您使用的是 SQL Server 2017 或更高版本，使用以下命令会容易得多`STRING_AGG()`：

```
;WITH cte(rt, id) AS
(
  SELECT STRING_AGG(CONCAT_WS('-', Depart, Arrival), '')
         WITHIN GROUP (ORDER BY DepartDateTime), Invoice_ID
  FROM dbo.Segments GROUP BY Invoice_ID
)
UPDATE i SET i.Routing = cte.rt
FROM dbo.Invoices AS i 
INNER JOIN cte ON i.Invoice_ID = cte.id; 
```

*   示例[db<>fiddle](https://dbfiddle.uk/?rdbms=sqlserver_2017&fiddle=c40b2b902752a7bef01d915baddaf55e)

# iphone - 有没有办法在不知道表名的情况下加载 sqlite 表？

> ID：11301847
> 
> 赞同：0
> 
> 时间：2012-07-02T22:09:38.273
> 
> 标签：iphone, objective-c, xcode, sqlite

我的应用程序允许用户将数据保存到 sqlite 文件。为了确保唯一的表名，我只想在用户按下“保存”时创建一个具有（日期/时间）格式名称的表。有没有办法在我的 sqlite 文件中加载所有表而不明确说明所有表的名称？

我有一个 sqlite 文件中的食物列表。sqlite 文件包含一堆关于其中每个食物的信息。用户可以通过浏览 sqlite 文件并将项目添加到他们的列表来创建自己的配方。列表中的每个项目都由表格视图中的一个单元格表示。配方完成后，我希望用户能够保存它，并让系统自动将此配方添加为不同表格视图中的单元格。这样，当有人选择单元格时，整个配方会显示在下一个表格视图中（不仅仅是配方名称作为单元格标题）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T22:47:15.253

我认为您没有正确使用 SQLite 数据库。

听起来您正在为每个用户数据项使用一个表。

数据库的优势在于将多个用户、多个项目或多个其他的数据存储到几个表中，然后稍后仅检索特定用户或项目的数据。表应该添加、更新或删除行，但一般来说，表不应该作为单独的数据元素创建和销毁。

我怀疑你不理解的是连接的概念。

您所描述的设计可能如下所示：

```
User
---------------
ID
First_Name
Last_Name
Email_Address

Ingredient
---------------
ID
Name
Description

Recipe
---------------
ID
User_ID
Name
Description
Serving_size
Ingredients_ID
Date_Created

Recipe_Ingredients
---------------------
ID
Ingredient_ID
Quantity
Unit_of_measure

So to get to get a list of recipes for John Doe (this query assumes you can only have one John Doe), you'd do:

select * from Recipe r
where r.User_ID = (select ID from User where First_Name = 'John' and Last_Name='Doe') 
```

或获取包含成分的食谱列表：

```
 select * from Recipe r
    join Recipe_Ingredients ri on r.Ingredients_ID = ri.ID
    join Ingredient i on ri.Ingredient_ID = i.ID
    where r.User_ID = (select ID from User where First_Name = 'John' and Last_Name='Doe') 
```

使用这样的设计，每当用户添加新配方时，您只需将行添加到配方和 recipe_ingredients 表中。或者，当他们添加新成分时，您在成分表中添加一行。

这是[SQL 连接教程](http://www.w3schools.com/sql/sql_join.asp)的链接。

# android - 在多个膨胀布局中获取对同一视图的引用

> ID：11301852
> 
> 赞同：1
> 
> 时间：2012-07-02T22:10:11.297
> 
> 标签：android, layout, view, reference, inflate

我试图找到这个问题的答案，并且我认为我的代码可以按我的意愿工作，但是......它不是。

问题：我有一个“父”LinearLayout，我向其中添加了几个嵌套的膨胀“子”LinearLayout。这行得通。每个 CHILD 布局都有两个视图，一个自定义 ChipView 和一个 TextView。在我为每个孩子充气后，我希望能够在我的活动期间“随时”修改每个孩子的 ChipView 和 TextView。

我创建了一个简单的项目来玩，但我只能设法访问 FIRST INFLATED 子布局的 ChipView 和 TextView。所有后续的都正确插入到 Parent 但显然我无法获得变量来引用它们。

我之前通过在运行时创建 ChipView 来做到这一点，它完美地工作，但我想要一种更优雅的方法，使用我可以单独控制的 XML。

在我的活动中，我有一个按钮可以创建子项，还有一个按钮应该调用当前 ChipView 中的方法（即最后一次充气或我单击的那个）。

活动：

```
public class SandboxActivity extends Activity {
    private Button okbtn;
    private Button add;
    private EditText count;
    private ChipsView chips;
    private LinearLayout pots;
    private TextView amount;
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.test);

       okbtn = (Button) findViewById(R.id.ok); //calls the method in customviews
       add = (Button) findViewById(R.id.add);  //adds a child
       count = (EditText) findViewById(R.id.count); //the value to call methods with
       pots = (LinearLayout) findViewById(R.id.pots); //the PARENT layout

       add.setOnClickListener(new Button.OnClickListener() {

        public void onClick(View v) {
            LinearLayout ll = (LinearLayout) getLayoutInflater().inflate(R.layout.pottemplate, pots);
            chips = (ChipsView) ll.findViewById(R.id.chips);
            amount = (TextView) ll.findViewById(R.id.amount);

               //this should allow me to set the activity.chips variable to the last clicked custom view
            chips.setOnClickListener(new View.OnClickListener() {
                public void onClick(View v) {
                    chips = (ChipsView) v;
                }
            });         
            }

        });

        okbtn.setOnClickListener(new Button.OnClickListener() {

            public void onClick(View v) {
                chips.setCount(Double.parseDouble(count.getText().toString()));         
            }

        });

    }
} 
```

膨胀的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >
    <com.ded.sandbox.ChipsView xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="100dp"
        android:layout_height="fill_parent"
        android:layout_weight="2"
        android:id="@+id/chips">    

    </com.ded.sandbox.ChipsView>

    <TextView
        android:id="@+id/amount"
        android:layout_width="100dp"
        android:layout_height="wrap_content"
        android:text="TextView" android:gravity="center_horizontal" android:textSize="12dp" android:textStyle="bold"/>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-16T16:23:40.447

```
View oneHappyRow = mInflater.inflate(R.layout.one_happy_hour_row,null);
TextView dayOfWeekTextView = (TextView) oneHappyRow.findViewById(R.id.dayOfWeekTextView);
TextView hoursOfDayTextView = (TextView) oneHappyRow.findViewById(R.id.hoursOfDayTextView); 
```

在此处获取每个膨胀布局、设置文本等的参考，然后：

```
this.addView(oneHappyRow); 
```

在我的案例中，该类扩展了 LinearLayout。

每个参考现在都在工作，您不会总是得到最后一个参考。

# perl - Perl 将图像转换为 base64

> ID：11301854
> 
> 赞同：6
> 
> 时间：2012-07-02T22:10:19.310
> 
> 标签：perl

我正在使用一项服务将图片发送到服务器，他们要求在发送之前将图像转换为 base64 格式。我用以下代码尝试了 MIME::Base64：

```
use MIME::Base64 ();

open (IMAGE, "C:\\wamp\\www\\image.png") or die "$!";

$base64_string = IMAGE;
$encoded = encode_base64($base64_string);
print "Encode $encoded"; 
```

并收到此错误消息

`Undefined subroutine &mqin::encode_base64 called at line 6.`

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-02T22:14:09.897

当您指定一个空的导入列表时，如下所示：

```
use MIME::Base64 (); 
```

你没有进口。这意味着函数名`encode_base64`不会被导入调用者的命名空间。您可以允许导入发生，也可以通过在调用它时显式引用它所在的包来完全限定函数名称。

要导入，将该行更改为：

```
use MIME::Base64; 
```

`()`括号指定 MIME::Base64 不向您的命名空间导出任何内容。默认行为（没有括号）是导出`encode_base64`和`decode_base64`. 通过在导入列表中使用空括号，您将覆盖导入这两个函数名称的方便默认行为。如果您真的不希望这些函数污染您的`main`命名空间，您可以保留原始`use MIME::Base64 ()`行，然后完全限定您的子例程调用：

```
$encoded = MIME::Base64::encode_base64($base64_string); 
```

但是通过从您的`use`行中删除括号来处理默认导出列表会容易得多，并且可能令人满意。

或者，您可以准确指定要导入的内容：

```
use MIME::Base64 ('encode_base64'); 
```

这将只导入`encode_base64`函数，但不会导入`decode_base64`，从而最大限度地减少命名空间污染。

**更新**您也没有阅读该文件。这一行：

```
$base64_string = IMAGE; 
```

...应该像这样更新：

```
$raw_string = do{ local $/ = undef; <IMAGE>; };
$encoded = encode_base64( $raw_string ); 
```

如果你有效果，这个问题会更详细地被发现`use strict 'subs'`。问题是 " `IMAGE`" 本身只是一个简单的词，Perl 认为它是一个子例程调用。尖括号“ `<>`”是从文件句柄中读取的常用方法。" `local $/ = undef`" 部分只是确保您对整个文件进行 slurp 的一种方式，而不仅仅是在第一个对 Perl 看起来像 "\n" 的序列之前。

**Update2：**正如 MOB 指出的那样，您要么需要转义路径中的反斜杠，要么使用正斜杠。Perl 不介意，即使在 Win32 上也是如此。当然，既然你是在你的 上使用的明智的一步`or die $!`，`open`你已经发现了这个错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-07T16:30:40.003

一个简短的 Base64 编码器程序：

```
# to_base64.pl
use MIME::Base64 qw(encode_base64);

open (IMAGE, $ARGV[0]) || die "$!";
binmode(IMAGE);
local $/;
my $file_contents = <IMAGE>;
close IMAGE;
open (B64, ">$ARGV[0].b64") || die $!;
print B64 encode_base64($file_contents);
close B64;
print "output file is $ARGV[0].b64\n"; 
```

将此命令行与它一起使用：

```
perl to_base64.pl image_file.jpg 
```

它写入一个名为的文件`image_file.jpg.b64`，其中包含 Base64 编码的输入文件。

要解码 Base64，您可以使用以下脚本：

```
# decode_base64.pl
use MIME::Base64 qw(decode_base64);

open (B64, $ARGV[0]) || die "$!";
local $/;
my $base64_string = <B64>;
close B64;
my $filename;
if ($ARGV[0] =~ /.\.b64$/i) {
    $filename = substr($ARGV[0], 0, length($ARGV[0]) - 4);
}
else {
    $filename = "$ARGV[0].bin";
}
open (IMAGE, ">$filename") || die $!;
binmode(IMAGE);
print IMAGE decode_base64($base64_string);
close IMAGE;
print "output file is $filename\n"; 
```

使用以下命令行调用它：

```
perl decode_base64.pl my_base64_file.b64 
```

如果作为参数提供给此脚本的文件名以`.b64`这些尾随 4 个字符结尾，则将被删除：`image_file.jpg.b64`=> `image_file.jpg`。否则，脚本将添加`.bin`到输入文件名以获取输出文件名。

# sql - 自联接 ... 现有列中值的新合成列

> ID：11301861
> 
> 赞同：0
> 
> 时间：2012-07-02T22:11:15.003
> 
> 标签：sql, self-join, full-outer-join

我以前做过一次，但不记得是怎么做到的……我已经为此苦苦挣扎了，现在正在寻求帮助。

我有一个包含两列的表：Uuid 和 ProcessId ProcessId 列当前有两个值：ValueA 和 ValueB

我想做一个自连接（完全外连接？），如下表：

```
        第1234章
        第1234章
        第2345章
        第3456章

```

我将得到如下结果：

```
        Uuid 值A 值B
        1234 好的 好的
        第2345章
        3456 OK 丢失

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T22:32:59.793

尝试这个：

```
SELECT Uuid, 
   CASE WHEN U.ValueA>0 THEN 'OK' ELSE 'Missing' END AS ValueA,
   CASE WHEN U.ValueB>0 THEN 'OK' ELSE 'Missing' END AS ValueB
FROM 
 (SELECT T.Uuid, 
     (SELECT COUNT(*) FROM MyTable AS M WHERE T.Uuid=M.UserID AND ValueField='ValueA') AS ValueA, 
     (SELECT COUNT(*) FROM MyTable AS M WHERE T.Uuid=M.UserID AND ValueField='ValueB') AS ValueB
  FROM (SELECT DISTINCT Uuid FROM MyTable) AS T
  GROUP BY Uuid) AS U
ORDER BY Uuid 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T15:25:15.620

根据索引、表大小和优化器，使用一对自连接可能是最快的：

```
select TableU.Uuid, 
    if(count(TableA.ProcessId) > 0, 'OK', 'Missing') as ValueA, 
    if(count(TableB.ProcessId) > 0, 'OK', 'Missing') as ValueB 
from Table11301861 as TableU
left join Table11301861 as TableA on TableA.ProcessId = 'ValueA' and TableA.Uuid = TableU.Uuid
left join Table11301861 as TableB on TableB.ProcessId = 'ValueB' and TableB.Uuid = TableU.Uuid
group by TableU.Uuid 
```

# python - 通过子进程将python的文件类对象传递给ffmpeg

> ID：11301863
> 
> 赞同：4
> 
> 时间：2012-07-02T22:11:24.890
> 
> 标签：python, django, ffmpeg, celery

我有一个 django FileField，我用它在 Amazon s3 服务器上存储 wav 文件。我已经设置了 celery 任务来读取该文件并将其转换为 mp3 并将其存储到另一个 FileField。我面临的问题是我无法将输入文件传递给 ffmpeg，因为该文件不是硬盘驱动器上的物理文件。为了规避这种情况，我使用标准输入将文件的输入流与 django 的文件字段一起提供。这是示例：

```
output_file = NamedTemporaryFile(suffix='.mp3')
subprocess.call(['ffmpeg', '-y', '-i', '-', output_file.name], stdin=recording_wav) 
```

其中recording_wav 文件是：，它实际上存储在amazon s3 服务器上。上述子进程调用的错误是：

```
AttributeError: 'cStringIO.StringO' object has no attribute 'fileno' 
```

我怎样才能做到这一点？在此先感谢您的帮助。

**编辑：**

完整追溯：

```
[2012-07-03 04:09:50,336: ERROR/MainProcess] Task api.tasks.convert_audio[b7ab4192-2bff-4ea4-9421-b664c8d6ae2e] raised exception: AttributeError("'cStringIO.StringO' object has no attribute 'fileno'",)
Traceback (most recent call last):
  File "/home/tejinder/envs/tmai/local/lib/python2.7/site-packages/celery/execute/trace.py", line 181, in trace_task
    R = retval = fun(*args, **kwargs)
  File "/home/tejinder/projects/tmai/../tmai/apps/api/tasks.py", line 56, in convert_audio
    subprocess.Popen(['ffmpeg', '-y', '-i', '-', output_file.name], stdin=recording_wav)
  File "/usr/lib/python2.7/subprocess.py", line 672, in __init__
    errread, errwrite) = self._get_handles(stdin, stdout, stderr)
  File "/usr/lib/python2.7/subprocess.py", line 1043, in _get_handles
    p2cread = stdin.fileno()
  File "/home/tejinder/envs/tmai/local/lib/python2.7/site-packages/django/core/files/utils.py", line 12, in <lambda>
    fileno = property(lambda self: self.file.fileno)
  File "/home/tejinder/envs/tmai/local/lib/python2.7/site-packages/django/core/files/utils.py", line 12, in <lambda>
    fileno = property(lambda self: self.file.fileno)
AttributeError: 'cStringIO.StringO' object has no attribute 'fileno' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T16:48:48.217

用于[`subprocess.Popen.communicate`](http://docs.python.org/library/subprocess.html?highlight=popen.communicate#subprocess.Popen.communicate)将输入传递给您的子流程：

```
command = ['ffmpeg', '-y', '-i', '-', output_file.name]
process = subprocess.Popen(command, stdin=subprocess.PIPE)
process.communicate(recording_wav) 
```

为了获得更多乐趣，您可以使用 ffmpeg 的输出来避免使用 NamedTemporaryFile：

```
command = ['ffmpeg', '-y', '-i', '-', '-f', 'mp3', '-']
process = subprocess.Popen(command, stdin=subprocess.PIPE)
recording_mp3, errordata = process.communicate(recording_wav) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T22:39:33.327

您需要创建一个管道，将管道的读取端传递给子进程，并将数据转储到写入端。

# c++ - 在 Visual Studio 2010 中链接 libavformat

> ID：11301864
> 
> 赞同：2
> 
> 时间：2012-07-02T22:11:27.250
> 
> 标签：c++, visual-studio-2010, visual-c++, ffmpeg, libavformat

我正在尝试围绕 libavformat 构建一些视频阅读代码。[在这里](http://ffmpeg.zeranoe.com/builds/)获得编译好的 DLL 和`.lib`文件后，我去构建我的代码，即使我已经链接到提供的文件中，链接器也找不到任何 libavformat 符号 。`.lib`

检查`libavformat.lib`显示`dumpbin -headers`它使用下划线前缀导出所需的函数。例如，当我想调用`avformat_open_input`时，.lib 文件给出了`_avformat_open_input`.

为什么会这样，为什么我不能链接预编译的 dll？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-23T09:23:30.733

您需要执行以下所有任务才能`libav`使用`MSVC++`. 首先转到[Zeranoe](http://ffmpeg.zeranoe.com/builds/)

1.  下载版本，从文件夹`Shared`中复制所有文件并将它们粘贴到将生成的输出目录中。`.dll``bin``exe`
2.  下载版本，从文件夹`Developer`中复制所有文件并将它们粘贴到您的主 c++ 文件所在的位置（例如，文件在哪里，所以您必须将文件放入）`.lib``lib``Folder-1\Folder-2``Folder-1``.sln``.lib``Folder-2`
3.  从`Developer`您在步骤 2 中下载的版本中复制文件夹中的所有目录`include`并将它们粘贴到 Folder-2 中（请参阅步骤 2 中有关 Folder-2 的详细信息）
4.  下载[inttypes.h](http://code.google.com/p/msinttypes/source/browse/trunk/inttypes.h)和[stdint.h](http://code.google.com/p/msinttypes/source/browse/trunk/stdint.h)，将其保存在此位置`C:\Program Files\Microsoft Visual Studio 10.0\VC\include\`文件夹中。
5.  要包含头文件，请使用以下语法

你必须使用它`extern`，因为`libav`它是一个`C`库。

```
extern "C" {
    #include "libavcodec/avcodec.h"
    #include "libavdevice/avdevice.h"
    #include "libavfilter/avfilter.h"
    #include "libavformat/avformat.h"
    #include "libavutil/avutil.h"
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T22:30:04.860

获取 32 位库，你应该没问题 :) 你的应用程序平台必须匹配使用的库（反之亦然）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T08:00:10.937

将其编译为 .lib 静态库怎么样？

# java - 我如何构建多线程代码以更好地在 java 中重用代码？

> ID：11301867
> 
> 赞同：1
> 
> 时间：2012-07-02T22:11:31.380
> 
> 标签：java, multithreading, code-reuse, code-structure

我正在用 Java 构建一个多线程项目，我有实体和 DAO 包来包装数据库表并操作它们。我有包含 Runnables 的处理包。到目前为止，我实现 Runnables 的方式是这样的：

```
Class Thread1 implements Runnable{
  Thread t;
   parameters
  ...

  public Thread1(){
    t = new Thread(this,"Thread1");
    ....
    t.start();
  }

  public int method1(){
  ...
  return x;
  }

  public double method2(){
  ...
  return y;
  }

  public void run(){
    // some processing using DAO methods
    ....
    method1();
    ... 
    method2();
    ...
  }

} 
```

代码以这种方式工作，但我需要在`run()`方法中使用相同的处理作为`Thread2`类处理的一部分。我构建代码的方式不允许重用代码。解决这个问题的更好结构是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T22:17:54.290

您可以：

1.  创建`Thread1`和`Thread2`扩展相同的抽象基类，并将共享逻辑移至父级（继承）。
2.  创建两个类都实现并包含公共方法的公共接口，然后创建一个单独的实现类`Runnable`，并`run()`在那里实现（组合）。

您应该始终支持组合而不是继承，因此第二个选项通常更好，因为它还为您提供了在运行时更改行为的灵活性。

例如：先创建一个共享接口

```
public interface SharedTask {
    public void method1();
    public void method2();
} 
```

让两个类都实现它： `public class Thread1 implements SharedTask`和`public class Thread2 implements SharedTask`.

```
public class Worker implements Runnable {

    public Worker (SharedTask task) {
        this.task = task;
        ...
    }

    public void run() {
        task.method1();
        task.method2();
    }
} 
```

在您的代码的其他地方： `new Worker().start();`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T23:03:05.617

您几乎从不想自己创建和启动线程。只需实现 Runnable（或者，如果您愿意，也可以实现 Callable）。然后将它们提交给一个[ExecutorService](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html)，它提供了各种很酷的选项来确定它正在运行的线程数（以及一个很好的中心位置，如果你的需求发生变化，将来可以改变它），连接到 CompletionService 等等......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T22:19:26.173

在深入了解多线程的精巧细节之前：很可能您的所有 DAO 调用都将在一个数据库连接上运行，因此（几乎）在一个数据库线程上运行。（特别是如果使用一些 ORM 框架，但是一个简单的数据源池会给你同样的效果）你绝对可以摆脱这个问题，但这意味着你必须使用具有两阶段提交的 XA 资源来保持 ACID 兼容。这**是**一项很大的工作，因此除非您准备好这样做，否则考虑应用服务器端多线程的细微差别是没有意义的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T22:15:22.523

创建一个抽象类，`Runnable`在其 run 方法中使用您想要的代码实现 - 然后根据您的 run 方法中的相同功能多次扩展该类。

# git - 是否可以在 Tower 的远程仓库中提交远程更改？

> ID：11301869
> 
> 赞同：0
> 
> 时间：2012-07-02T22:12:10.543
> 
> 标签：git, git-tower

![本地回购](../Images/b469f83a019566af0ae1d363e879c608.png) ![远程回购](../Images/fb4777053e5eefcd65fd6068abe195ae.png)

我真的很喜欢 Tower 中的提交工作流程。但是，出于各种原因，我需要在远程服务器上进行开发。是否可以使用 tower 以某种方式在该服务器上进行提交？

正如您在图像上看到的那样，无论我选择什么，我都只会获得本地更改。（在名为 Dev 的遥控器上，正在进行许多其他更改）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T08:09:17.350

在 Git 中，远程存储库是“裸露的”，这意味着它们没有工作目录。因此，无法在远程存储库中进行版本控制的更改。

更改只能在您的本地存储库中进行和提交。

# css - HTML 和 CSS：做什么 和 标签代表什么？

> ID：11301870
> 
> 赞同：8
> 
> 时间：2012-07-02T22:12:11.447
> 
> 标签：css, html

在以下几行 CSS 代码中：

```
.sf-menu li:hover ul, .sf-menu li.sfHover ul {top: 40px!important; } 
```

HTML 标签`<ul>`和`<li>`含义是什么？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-02T22:13:59.803

它来自同名的 HTML 元素。

UL - 无序列表（有序或编号的列表将是 OL）
LI - 列表项

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-02T22:14:20.680

`ul`代表无序列表。

`li`代表列表项。

它们是“项目符号”列表的 HTML 标记，而不是“编号”列表（由`ol`for 有序列表指定）。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-02T22:13:18.660

它们的目标是页面中`<ul>`的`<li>`元素。

在 CSS 中，一个 id 以 为前缀`#`，一个类以 为前缀`.`，一个元素根本没有前缀。

因此，选择器`.sf-menu li:hover ul`将应用于任何`<ul>`元素，在`<li>`您当前指向的元素内，在带有`class="sf-menu"`.

选择器`.sf-menu li.sfHover ul`将应用于任何`<ul>`元素，在带有 的`<li>`元素`class="sfHover"`内，在带有 的元素内`class="sf-menu"`。

# php - 通过表单将多行插入数据库

> ID：11301871
> 
> 赞同：0
> 
> 时间：2012-07-02T22:12:15.143
> 
> 标签：php, mysql

在 php 中，我可以使用以下命令将多行添加到我的数据库中

```
$sql = 'INSERT INTO 'tablename' ('column1', 'column2') VALUES
    ('data1', 'data2'),
    ('data3', 'data4'),
    ('data5', 'data6'),
    ('data7', 'data8');
'; 
```

但我不知道如何创建一个允许我将多行添加到数据库中的表单。

过去，当我只想一次添加一行时，我可以在我的表单中执行类似的操作。

```
<input type="text" name="name" value=""> 
```

以及我的php中的以下内容

```
$_POST['name'] 
```

但是当您要插入多行时，这不起作用。有人可以在这里指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T22:18:01.497

你可以使用php数组，所以你这样做

```
<input type="text" name="name[]" value=""> 
```

请注意名称后添加的方括号。您可以在表单中有多个 this 实例，然后在 php 中将其引用为：

```
$_POST['name'][$i] 
```

其中 $i 是索引数组中值的变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-02-11T22:52:00.237

@HexAndBugs 的答案是错误地引用了查询中的表名和列。反引号应替换这些单引号。也就是说，即使语法得到纠正，查询仍然不安全且不稳定。像这样的条目`Seamus O'Brien`会导致脚本失败，更不用说查询容易受到更险恶的注入攻击。任何人都不应出于任何原因使用该答案。

这是一个完整的解决方案，假设您的表单仅包含名称字段：

```
<input type="text" name="name[]">
<input type="text" name="name[]">
...repeat as many times as you like inside the form 
```

因为提交的目的是将数据写入数据库，所以 POST 是合适的方法。（只有在打算从数据库中获取/读取数据时才应使用 GET。）

在您的提交接收脚本中，使用以下代码段：

1.  检查是否有包含`name`数据的提交。
2.  为了稳定性/安全性，使用带有绑定参数和迭代执行的准备好的语句。我不会包括清理步骤，因为我不知道您的要求，但建议这样做，以便您的数据库数据保持干净。

代码：

```
if (!empty($_POST['name'])) {
    $conn = new mysqli("localhost", "root", "", "yourDB");  //apply your credentials
    $stmt = $conn->prepare("INSERT INTO `tableName` (`name`) VALUES (?)");
    $stmt->bind_param('s', $name);
    foreach ($_POST['name'] as $name) {
        // to sanitize the name string, perform that action here
        // to disqualify an entry, perform a conditional continue to avoid the execute call
        $stmt->execute();
    }
} 
```

# facebook - 如何使用 ssl 在本地主机上测试 Facebook-Connect

> ID：11301875
> 
> 赞同：0
> 
> 时间：2012-07-02T22:12:35.103
> 
> 标签：facebook, ssl, oauth, omniauth

我有一个使用 facebook connect 来启用用户注册/登录的 rails 应用程序（使用设计和omniauth）。在阅读了几篇关于 Firesheep 的文章后，我决定为我的整个应用强制使用 ssl 通信。

我按照本教程强制我的 rails 3.0.x 应用程序只能通过 ssl 进行通信：[http ://www.simonecarletti.com/blog/2011/05/configuring-rails-3-https-ssl/](http://www.simonecarletti.com/blog/2011/05/configuring-rails-3-https-ssl/)

我遵循本教程，以便我可以在 locahost:3001 上使用 webrick 在本地测试应用程序：http: [//blog.readypulse.com/2012/01/19/setup-webrick-to-serve-ssl-https-as-以及非 ssl-http-traffic-side-by-side/](http://blog.readypulse.com/2012/01/19/setup-webrick-to-serve-ssl-https-as-well-as-non-ssl-http-traffic-side-by-side/)

到现在为止还挺好。我的应用程序在运行时强制 ssl 通信`localhost:3000`。尝试与 facebook connect 通信时出现我的问题

如果我将我的 facebook 开发应用程序的网站 url 更改为`https://localhost:3001`，fb graph 会响应 `{ "error": { "message": "Invalid redirect_uri: Given URL is not allowed by the Application configuration.", "type": "OAuthException", "code": 191 } }`

但是，如果我将站点 url 更改为`http:localhost:3001`我的服务器会收到一条错误消息，指出在加载页面时连接已重置。我的浏览器 URL 栏显示它尝试加载的 url 是`localhost:3001/auth/facebook/callback?code=MYCODEHERE`，如果我只是在该 URL 前面添加“https://”并重新加载，页面将按预期加载。

也许我的问题源于我对 SSL 的非常基本的了解。但是，如果有人可以向我解释如何设置 facebook 开发应用程序以支持我通过 ssl 对 facebook connect 进行本地测试，我将不胜感激？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T22:14:17.130

您需要设置一个指向您的本地主机 ( ) 的子域或通过您的文件`whatever IN A 127.0.0.1`创建所述子域。`/etc/hosts`

在这两种情况下，您都可以使用`http://yoursubdomain.yourdomain/auth/....`为`yourdomain`facebook 应用程序注册的域。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T05:01:19.713

好的。得到它的工作。这是我所做的，以便我可以在 localhost:3001 上通过 ssl 测试 fb 和 twitter 注册/登录。

首先，我将我的应用程序的 FB 网站网址设置为`http://localhost:3001`. 然后我修改了omniauth初始化器如下：

```
if RAILS_ENV == "production"
  full_host = 'https://www.mydomain.com'
  Rails.application.config.middleware.use OmniAuth::Builder do
    provider :facebook, 'myfbappid', 'myfbsecret', {:scope => 'email, publish_stream'}
    provider :twitter, 'mytwitterappid', 'mytwittersecret'
  end
  Twitter.configure do |config|
    config.consumer_key = 'myconsumerkey'
    config.consumer_secret = 'myconsumersecret'
    config.oauth_token =    'myoauthtoken'
    config.oauth_token_secret = 'myoauthtokensecret'
  end
elsif RAILS_ENV == "development"
  full_host = 'https://localhost:3001'
  Rails.application.config.middleware.use OmniAuth::Builder do
    provider :facebook, 'myfbdevappid', 'myfbdefappsecret', {:scope => 'email, publish_stream'}
    provider :twitter, 'mytwitterdevappid', 'mytwitterdevappsecret'
  end
  Twitter.configure do |config|
    config.consumer_key = 'mytwitterconsumerkey'
    config.consumer_secret = 'mytwitterconsumersecret'
    config.oauth_token =    'mytwitteroauthtoken'
    config.oauth_token_secret = 'mytwitteroathtokensecret'
  end
end
OmniAuth.config.full_host = full_host 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-14T17:51:36.193

您可以使用[https://ngrok.com/](https://ngrok.com/)获取指向本地主机的安全 url

# c++ - 使用 ncurses 捕获控制台应用程序上的鼠标点击

> ID：11301883
> 
> 赞同：13
> 
> 时间：2012-07-02T22:13:23.020
> 
> 标签：c++, unix, mouseevent, ncurses, curses

我正在为 unix 平台制作控制台应用程序，并且正在使用 curses（或 ncurses）库来处理键盘和鼠标输入。问题是我发现很少有关于如何准确使用它的文档，除了[这个页面](http://www.mkssoftware.com/docs/man3/curs_mouse.3.asp)和[这个](http://www.mkssoftware.com/docs/man3/curs_mouse.3.asp)，它们没有非常详细的示例。我设法捕获了左键单击，但我无法让它在右键单击时工作，因为终端模拟器的选项菜单出现在光标位置，但应用程序未处理该事件。如何避免这种情况并在应用程序中捕获事件？

我有以下用于配置鼠标事件的行：

```
// Set up mouse event throwing
mousemask(BUTTON1_PRESSED | BUTTON2_PRESSED, NULL); 
```

在处理输入的方法中，我有以下内容：

```
int c = getch();
MEVENT event;
switch(c)
{
    case KEY_UP:
        ... do stuff
        break;
    case KEY_DOWN:
        ... do stuff
        break;
    case KEY_MOUSE:
        if(getmouse(&event) == OK)
        {
            if(event.bstate & BUTTON1_PRESSED) // This works for left-click
            {
                ... do stuff
            }
            else if(event.bstate & BUTTON2_PRESSED) // This doesn't capture right-click
            {
                ... do other stuff
            }
            else
                fprintf(stderr, "Event: %i", event.bstate); // Doesn't print anything on right-click
        }
        break;
    default:
        return;
} 
```

我也尝试过`mousemask()`使用`ALL_MOUSE_EVENTS`掩码进行配置，但它仍然没有在最后一个`else`子句上打印任何事件，所以我认为事件根本没有触发。对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-14T22:18:34.560

对于其他来到这里试图弄清楚为什么他/她**无法**使用 Ncurses 捕获鼠标事件的人，很可能这是您需要的行：

```
keypad(window, TRUE); 
```

没有这个，我没有得到任何鼠标事件`getch()`。

我见过的所有教程/示例都缺少它，这就是为什么我花了很多时间来弄清楚我的代码出了什么问题 - 也许这个答案会帮助其他人比我更快地找到解决方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-04T10:24:48.187

鼠标右键是按钮 3，而不是按钮 2。按钮 2 是中间的按钮。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-01-19T12:00:38.837

最初的问题是关于终端仿真器（以及菜单激活干扰将鼠标单击传递给应用程序）。这可以通过一些特定于终端的文档（甚至一些教程）来解决。其他答案忽略了这一点，而是集中在 ncurses 应用程序接收（并理解）xterm 协议鼠标事件中的问题。

后一个问题记录在[手册页](https://invisible-island.net/ncurses/man/curs_mouse.3x.html#h2-BUGS)中：

> 鼠标事件在**`xterm`**其位关闭的窗口中将无法正确检测 [**`keypad`**](https://invisible-island.net/ncurses/man/curs_inopts.3x.html#h3-keypad) ，因为它们被解释为各种功能键。您的 terminfo 描述应该 **`kmous`** 设置为 `"\E[M"` （xterm 鼠标点击响应的开头）。允许其他值**`kmous`**，但在相同的假设下，即它是响应的开始。

[不是新的，在1995 年](https://github.com/ThomasDickey/ncurses-snapshots/blob/07b42b9996d3024d11b3e1b0e77401af0fda1dbb/man/curs_mouse.3x#L132)首次提到：

> **xterm 下的鼠标事件将无法在其键盘**位关闭的窗口中正确检测到。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T14:33:42.180

我正在使用您的代码，但我无法得到任何反应。甚至鼠标左键也不起作用。

这是你的完整代码吗？

```
#include <ncurses.h> 

int main(int argc, char **argv){ 

while(1) 
{ 

    mousemask( ALL_MOUSE_EVENTS, NULL); 
        int c = getch(); 
        MEVENT event; 
        switch(c) 
        { 
            case KEY_UP: 
                printf("keyup"); 
                break; 
            case KEY_DOWN: 
                printf("keydown"); 
                break; 
            case KEY_MOUSE: 
                if(getmouse(&event) == OK) 
                { 
                    if(event.bstate & BUTTON1_PRESSED) // This works for left-click 
                    { 
                        printf("button1"); 
                    } 
                    else if(event.bstate & BUTTON2_PRESSED) // This doesn't capture right-click 
                    { 
                        printf("button2"); 
                    } 
                    else 
                        printf("Event: %i", event.bstate); // Doesn't print anything on right-click 
                } 
                break; 
        } 
} 
return 0; 
} 
```

# php - preg_replace 有什么问题吗？

> ID：11301889
> 
> 赞同：-1
> 
> 时间：2012-07-02T22:14:02.757
> 
> 标签：php, preg-replace

在设法使用 preg_match_all 之后，我想用matchedText替换匹配的文本，但它似乎不起作用。看看我的代码，我做错了什么？

```
 <?php
    $tweets = getTweets($profile->twitter_id);

    for($i=0;$i<4;$i++):
        // finds matches
        $num_matches = preg_match_all('/@\w+/', $tweets[$i]->description, $matches);

        if($num_matches):
            echo $num_matches.'<br />';
            for($c=0;$c<$num_matches;$c++):

                $subject = $tweets[$i]->description;
                $pattern = array();
                $pattern[$c] = $matches[0][$c];
                $replacement = array();
                $replacement[$c] = '<a href="https://twitter.com/#!/">'.$matches[0][$c].'</a>';

            endfor;
                echo preg_replace($pattern, $replacement, $subject).'<br /><br />';

        else:
            echo auto_link($tweets[$i]->description).'<br /><br />';
        endif;
    endfor;
?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T22:17:48.510

您需要在循环之外定义`$pattern`and `$replacement`，否则它们将在每次迭代时重新初始化为空数组：

```
$pattern = array(); $replacement = array();
for($c=0;$c<$num_matches;$c++): 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T22:17:45.323

也许，您的`preg_replace`-ing 不使用模式：`$matches[0][$c]`包含一个字符串，而不是带有分隔符的模式。再说一次，我可能错了。查看匹配的内容以及替换的内容可能会有所帮助

*Nips*，我不敢相信我也忽略了循环内的数组声明......当然，这是你应该解决的第一件事！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T21:21:20.243

谢谢大家的回答，但是我停止使用 preg_replace，而是使用了 str_replace。它工作正常。这是我的最终代码。

```
 <?php
        $tweets = getTweets($profile->twitter_id);

        for($i=0;$i<4;$i++):
            // first, explode the description to eliminate the username in the description
            $tweet_des = $tweets[$i]->description;
            $tweet_no_username_des = explode(':',$tweet_des,2); // added a limit parameter, ensuring only the username will be excluded
            $new_tweet_description = $tweet_no_username_des[1].'<br />';

            // the date the tweet is published
            echo $date_pub = $tweets[$i]->pubDate;

            // using preg_match_all to find matches, texts having '@' as the first letter
            $num_matches = preg_match_all('/@\w+/', $tweets[$i]->description, $matches);
            if($num_matches):   // if match(es) are found
                $search_arr = array();  // declared an array to contain the search parameter for str_replace
                $replace_arr = array(); // declared an array to contain the replace parameter for str_replace
                for($c=0;$c<$num_matches;$c++):
                    $search_arr[$c] = $matches[0][$c];
                    $name_links[$c] = explode('@',$search_arr[$c]);
                    $not_link_name = $name_links[$c][1];
                    $replace_arr[$c] = '<a href="http://twitter.com/#!/'.$not_link_name.'" target="_blank">'.$matches[0][$c].'</a>';
                endfor;
                echo auto_link(str_replace($search_arr, $replace_arr, $new_tweet_description)).'<br />';
            else:
                echo auto_link($new_tweet_description).'<br />';
            endif;
        endfor;
    ?> 
```

最初我的问题是找到以“@”开头的文本，并将其链接到 Twitter 中的相应帐户。请随时批评我的代码，但我认为它仍然存在错误。:)

# .net - 与大型数据库的集成测试

> ID：11301890
> 
> 赞同：0
> 
> 时间：2012-07-02T22:14:05.853
> 
> 标签：.net, sql-server, database, testing, integration-testing

我有一个想要添加一些自动化集成测试的现有应用程序。这是一个 .Net/SQL Server 应用程序，所有数据访问都通过存储过程进行管理。存储过程可能包含也可能不包含业务逻辑。构建我们的测试库似乎最有效的是在报告和解决错误时添加测试。因此，每个测试都将依赖于一组非常具体的数据，这些数据可能分布在多个数据库中的多个表中。如果数据库很小，我们可以简单地在每个测试运行之前启动包含每个测试的测试数据的数据库副本，并在测试完成后删除数据库。然而，总的来说，这些数据库太大而无法全部复制和存储。每个测试实际使用的数据子集将是可管理的。总共有8个数据库。最小的是 200 MB，最大的是 10 GB，其他 6 个介于两者之间。

获得正确的子集似乎是这个过程的关键。我对 SSIS 没有太多经验，但我很确定我们可以创建一个预定义的包来打包测试所需的数据子集。这种方法的问题是我们的应用程序涵盖了许多不同的功能领域，构建涵盖任何给定测试所需的所有场景的包似乎令人生畏。

另一个看起来很理想的选择（无论如何从表面上看）是创建一个日志框架，可以记录存储过程使用的所有数据（我们的一些存储过程具有来自多个表的多个选择语句）。因此，当我们准备好为测试用例创建数据时，我们可以简单地打开日志记录并针对完整/完整的数据库集运行测试逻辑。然后记录所有数据库/表在运行期间访问的记录的日志，并从日志中创建较小的测试特定数据库。该日志可能是实际数据，也可能是我们用来获取实际数据的一系列选择语句。这是不是太高了？

有关如何处理这种情况的任何建议都会有所帮助。

# wpf - 集合的 WPF 对象绑定

> ID：11301893
> 
> 赞同：1
> 
> 时间：2012-07-02T22:14:14.303
> 
> 标签：wpf, listview, binding, taskbar

我有一个使用 WPF 开发的任务栏应用程序，我只是不知道如何使用 Objectbinding 将我的对象集合绑定到 TrayPopUp。

这是我的收藏课。它是在启动时创建的，并通过反序列化 xml 文件（使用 fillCollectionFromXml 方法）填充对象：

```
public class OrdreCollection
{
    // Fields
    private ObservableCollection<Ordre> _ordreList = new ObservableCollection<Ordre>();

    // Properties
    public ObservableCollection<Ordre> OrdreList
    {
        get
        {
            if (_ordreList == null)
            {
                return new ObservableCollection<Ordre>();
            }
            return _ordreList;
        }

        set
        {
            _ordreList = value;
        }
    }

    //Methods

    public void fillCollectionFromXml(String filepath)
    {            
        XmlSerializer xs = new XmlSerializer(typeof(ObservableCollection<Ordre>));
        using (StreamReader rd = new StreamReader(filepath))
        {
            OrdreList = xs.Deserialize(rd) as ObservableCollection<Ordre>;
        }
    }

    public void createXmlFromCollection(OrdreCollection oCol, String filepath)
    {
        XmlSerializer xs = new XmlSerializer(typeof(ObservableCollection<Ordre>));
        using (StreamWriter wr = new StreamWriter(filepath))
        {
            xs.Serialize(wr, OrdreList);
        }
    }

    //public OrdreCollection getOrdrer(String filepath)
    //{
    //    OrdreCollection Ordrer = new OrdreCollection();
    //    Ordrer.fillCollectionFromXml("@../../Data/Ordrer.xml");

    //    return Ordrer;
    //}
}
} 
```

基类：

```
[Serializable]
public class Ordre : INotifyPropertyChanged
{
    // INotifyPropertyChanged Member
    public event PropertyChangedEventHandler PropertyChanged;
    void Notify(string propName) {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(propName));
    }

    // Fields
    private DateTime ordreDato = DateTime.Today;
    private int ordreReference = 561978;
    private String bestiltAf;
    private List<OrdreItem> ordreItem;

    //Constructors

    public Ordre() { }

    public Ordre(DateTime ordredato, int ordrereference, String bestiltAf, List<OrdreItem> ordreItem)
    {
        this.Ordredato = ordredato;
        this.Ordrereference = ordrereference;
        this.BestiltAf = bestiltAf;
        this.OrdreItem = ordreItem;
    }

    //Properties

    public DateTime Ordredato
    {
        get { return ordreDato; }
        set { 
            ordreDato = value;
            Notify("OrdreDato");
        }
    }

    public int Ordrereference
    {
        get { return ordreReference; }
        set { 
            ordreReference = value;
            Notify("Ordrereference");
        }
    }

    public String BestiltAf
    {
        get { return bestiltAf; }
        set { 
            bestiltAf = value;
            Notify("BestiltAf");
        }
    }

    public List<OrdreItem> OrdreItem
    {
        get { return ordreItem; }
        set {
            ordreItem = value;
            Notify("OrdreItem");
        }
    }

    //Methods

    public void addItem(OrdreItem item)
    {
        OrdreItem.Add(item);
    }
}

[Serializable]
public class OrdreItem : INotifyPropertyChanged
{
    // INotifyPropertyChanged Member
    public event PropertyChangedEventHandler PropertyChanged;
    void Notify(string propName)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(propName));
    }

    // Fields
    private String produktKode;
    private String produktNavn;
    private DateTime kalibreringsDato;
    private DateTime leveringsDato;
    private int antal;

    // Constructors
    public OrdreItem() { }
    public OrdreItem(String produktKode, String produktNavn, DateTime kalibreringsDato, DateTime leveringsDato, int antal)
    {
        this.produktKode = produktKode;
        this.produktNavn = produktNavn;
        this.kalibreringsDato = kalibreringsDato;
        this.leveringsDato = leveringsDato;
        this.antal = antal;
    }

    //Properties
    public String ProduktKode
    {
        get { return produktKode; }
        set {
            produktKode = value;
            Notify("ProduktKode");
        }
    }

    public String ProduktNavn
    {
        get { return produktNavn; }
        set {
            produktNavn = value;
            Notify("ProduktNavn");
        }
    }

    public DateTime KalibreringsDato
    {
        get { return kalibreringsDato; }
        set { 
            kalibreringsDato = value;
            Notify("KalibreringsDato");
        }
    }

    public DateTime LeveringsDato
    {
        get { return leveringsDato; }
        set { 
            leveringsDato = value;
            Notify("LeveringsDato");
        }
    }

    public int Antal
    {
        get { return antal; }
        set {
            antal = value;
            Notify("Antal");
        }
    }
} 
```

这是我的 XAML：

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:tb="clr-namespace:Hardcodet.Wpf.TaskbarNotification;assembly=Hardcodet.Wpf.TaskbarNotification"
                    xmlns:local="clr-namespace:WpfApplication1.Models"
                    x:Class="WpfApplication1.Resources"
                    x:ClassModifier="public"
                    >
    <!-- Globaly declared OrdreCollection. Contains a list of orders.-->
    <local:OrdreCollection x:Key="OrdreList"></local:OrdreCollection>

    <!-- Globally declared notify icon -->
    <tb:TaskbarIcon x:Key="MyNotifyIcon" 
                    IconSource="/Icons/ge256x256new.ico" 
                    ToolTipText="GE Ordre Management"
                    PopupActivation="LeftOrDoubleClick"
                    DataContext=" "
                    >
    <!--
    We can use arbitrary UI elements as ToolTips.
    Let's use a semi-transparent border.
    -->

        <!-- Set a simple popup  -->
        <tb:TaskbarIcon.TrayPopup>
            <Border
                Background="White"
                BorderBrush="Orange"
                BorderThickness="2"
                CornerRadius="4" Margin="0" Padding="10">
                <GroupBox Header="Bestillinger" Height="Auto" Name="BestillingGroupBox" Width="445" HorizontalAlignment="Left" VerticalAlignment="Top" Padding="10">
                    <Grid>
                        <!--<ListBox ItemsSource="{Binding}" DisplayMemberPath="ordreDato"/>-->
                        <ListView IsSynchronizedWithCurrentItem="True" ItemsSource="{Binding OrdreList}">
                            <ListView.View>
                                <GridView>
                                    <GridViewColumn Header="Ordredato" DisplayMemberBinding="{Binding Path=Ordredato}" />
                                    <GridViewColumn Header="Navn" DisplayMemberBinding="{Binding Path=BestiltAf}" />
                                    <GridViewColumn Header="Ordrenummer" DisplayMemberBinding="{Binding Path=Ordrereference}" />
                                </GridView>
                            </ListView.View>
                        </ListView>
                    </Grid>
                    <!--<Grid>
                        <Grid.DataContext>
                            <XmlDataProvider Source="@../../Data/employees.xml" />
                        </Grid.DataContext>
                        <Grid.Resources>
                            <HierarchicalDataTemplate x:Key="OrdreTemplate" DataType="Ordre">
                                <Border Background="White" BorderBrush="Orange" BorderThickness="2" CornerRadius="4" Margin="0" Padding="10" Width="400">
                                <TextBlock>
                                <TextBlock FontWeight="bold">Antal: </TextBlock>
                                <TextBlock Text="{Binding XPath=Antal}" />
                                <TextBlock FontWeight="bold">Produkt: </TextBlock>
                                <TextBlock Text="{Binding XPath=Produkt}" />
                                <LineBreak></LineBreak>
                                <TextBlock FontWeight="bold">Dato:</TextBlock>
                                <TextBlock Text="{Binding XPath=Dato}" />
                                <LineBreak></LineBreak>
                                <TextBlock FontWeight="bold">Bestilt af:</TextBlock>
                                <TextBlock Text="{Binding XPath=BestiltAf}" />
                                <LineBreak></LineBreak>
                                <TextBlock FontWeight="bold">Leveringsdato:</TextBlock>
                                <TextBlock Text="{Binding XPath=TilLevering}" />
                                <LineBreak></LineBreak>
                                <TextBlock FontWeight="bold">Ordrenr.:</TextBlock>
                                <TextBlock Text="{Binding XPath=OrdreNr}" />                            
                            </TextBlock>
                                </Border>
                            </HierarchicalDataTemplate>
                        </Grid.Resources>

                        <ListBox                         
                        Name="treeView" 
                        ItemsSource="{Binding Path=.,XPath=/Ordrer/Ordre}"
                        ItemTemplate="{StaticResource OrdreTemplate}" Background="white"
                        BorderBrush="Black"
                        BorderThickness="1"
                        Padding="4" />
                    </Grid>-->
                </GroupBox>
            </Border>
        </tb:TaskbarIcon.TrayPopup>
    </tb:TaskbarIcon>
</ResourceDictionary> 
```

问题在于 TrayPopup。我想在列表视图/列表框中显示我的 OrderCollecion 中所有订单的值。我希望我的问题是可以理解的，并且我的代码不会太乱。当我用 XmlDataProvider 填充列表框时，我可以让它工作，但不能用 ObjectdataProvider 或直接从集合中填充。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T22:37:40.880

找到了我的问题的答案。不得不使用 CollectionViewSource。

```
<CollectionViewSource 
          Source="{Binding Source={x:Static Application.Current}, Path=OrdreItems}"   
          x:Key="ordreDataView" /> 
```

# javascript - 在小部件加载 jquery 后嵌入 jquery 脚本

> ID：11301896
> 
> 赞同：2
> 
> 时间：2012-07-02T22:14:22.273
> 
> 标签：javascript, jquery, widget

[https://stackoverflow.com/a/6065421](https://stackoverflow.com/a/6065421)有助于了解如何确认 jquery 已加载。我的小部件将需要一个使用 jquery 编写的类。我可以在嵌入使用 jquery 构建的其他类方面提供一些帮助吗？谢谢你，

下面是来自上述链接的片段，在最后部分添加了我的代码，如代码注释中所述：

```
 (function(window, document, version, callback) {
    var j, d;
    var loaded = false;
    if (!(j = window.jQuery) || version > j.fn.jquery || callback(j, loaded)) {
        var script = document.createElement("script");
        script.type = "text/javascript";
        script.src = "/media/jquery.js";
        script.onload = script.onreadystatechange = function() {
            if (!loaded && (!(d = this.readyState) || d == "loaded" || d == "complete")) {
                callback((j = window.jQuery).noConflict(1), loaded = true);
                j(script).remove();
            }
        };
        document.documentElement.childNodes[0].appendChild(script)
    }
})(window, document, "1.3", function($, jquery_loaded) { //my code added below
    var script_tag = document.createElement('script');
script_tag.setAttribute("type","text/javascript");
script_tag.setAttribute("src", "http://mysite.com/widget/slides.jquery.js");
(document.getElementsByTagName("head")[0] || document.documentElement).appendChild(script_tag);

$('#slides').slides({}); //this line gives an error.
}); 
```

现在，我正在根据提供给该问题的响应尝试以下操作（引发错误的行带有注释）：

```
//this function is called after jquery being embedded has been confirmed. {mysite} placeholder is nonexistent in actual code.
function main() {
jQuery(document).ready(function($) {
    var css_link = $("<link>", {
        rel: "stylesheet",
        type: "text/css",
        href: "http://mysite/widget/widget.css"
    });
    css_link.appendTo('head');

    $('#crf_widget').after('<div id="crf_widget_container"></div>');

    /******* Load HTML *******/
    var jsonp_url = "http://mysite/widget.php?callback=?";
    $.getJSON(jsonp_url, function(data) {
        $('#crf_widget_container').html(data);

        $('#category_sel').change(function(){
            alert(this.value);
        });

        $.getScript("http://mysite/widget/slides.jquery.js", function(data, textStatus, jqxhr) {
            alert(1); //fires ok
            $('#slides').slides({}); //errors
        });
    });
});
}

error 1: $ is undefined .../slides.jquery.js?_=1341349267810 Line 22
error 2: $("#slides").slides is not a function .../widget.js?1341349266628 Line 61 
```

$('#slides').slides({}); 当我测试小部件的工作原理时工作。然而，当把它变成一个小部件时，上面的错误就是我所面临的。

有更多建议的人吗？

等了几个星期后，我刚刚从我需要的 jquery 类中获取代码，并在 jquery 的负载得到确认后将其放入正文中。我宁愿在加载 jquery 后导入 jquery 类，但我想不通。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T02:24:29.780

由于您已经加载了 jQuery，因此使用该[`$.getScript()`函数](http://api.jquery.com/jQuery.getScript/)获取`slides.jquery.js`文件可能会更容易 - 如下所示：

```
<!-- language: lang-js -->
(function(window, document, version, callback) {
    var j, d, loaded = false;
    if (!(j = window.jQuery) || version > j.fn.jquery || callback(j, loaded)) {
        var script = document.createElement("script");
        script.type = "text/javascript";
        script.src = "/media/jquery.js";
        script.onload = script.onreadystatechange = function() {
            if (!loaded && (!(d = this.readyState) || d == "loaded" || d == "complete")) {
                callback((j = window.jQuery).noConflict(1), loaded = true);
                j(script).remove();
            }
        };
        document.documentElement.childNodes[0].appendChild(script)
    }
})(window, document, "1.3", function($, jquery_loaded) { //my code added below
    // use $.getScript
    $.getScript("http://mysite.com/widget/slides.jquery.js", function(data, textStatus, jqxhr) {
        $('#slides').slides({});
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T20:35:32.767

等了几个星期后，我刚刚从我需要的 jquery 类中获取代码，并在 jquery 的负载得到确认后将其放入正文中。我宁愿在加载 jquery 后导入 jquery 类，但我想不通。

# c++ - 为什么我的 SIFT 实施只能找到平坦区域？

> ID：11301897
> 
> 赞同：5
> 
> 时间：2012-07-02T22:14:24.163
> 
> 标签：c++, computer-vision, sift

我正在尝试编写 SIFT 的实现，就像练习一样。但是，我遇到了我还没有弄清楚的问题。据我所知，我得到的结果与 SIFT 相反：它会发现图像中无趣的平坦区域。我正在使用 VXL。

无论如何，我对SIFT早期阶段的理解如下：

1.  建立一个高斯金字塔

2.  使用这个金字塔，得到一个高斯差金字塔

3.  查找所有局部极值以获得潜在关键点

4.  没关系，因为我没有走到这一步。

我有我的代码的[粘贴箱](http://pastebin.com/JmpURcEC)，如果有人愿意提供帮助，我将永远感激不尽。到目前为止，[这](https://i.imgur.com/qz8eu.png)就是我的算法吐出的内容，在每个检测到的“关键点”的位置都有一个洋红色像素。

最后，标准免责声明，如果我做错了什么或违反了某些行为规则，我深表歉意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T12:44:02.113

您可以查看 sift 的 opencv 实现是否具有相同的行为： [http ://docs.opencv.org/modules/nonfree/doc/feature_detection.html#sift](http://docs.opencv.org/modules/nonfree/doc/feature_detection.html#sift)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-08T18:49:48.200

对于任何有这个问题的人：我相信那是因为你弄错了模糊常数。我也犯了错误。

```
BLUR_i+1_oct(j) = BLUR_i_oct(j)*BLUR_STEP_CONSTANT;
BLUR_0_oct(j+1) = 2*BLUR_0_oct(j); 
```

例如 sigma = 1.5，模糊应该是：

```
1 -> 1.5 -> 1.5^2 -> 1.5^3 -> 1.5^4
2 -> 2*1.5 -> ... 
```

# shell - 用于安装最新稳定版 CherryPy 的 Shell 脚本

> ID：11301904
> 
> 赞同：0
> 
> 时间：2012-07-02T22:15:11.573
> 
> 标签：shell, cherrypy

我正在尝试编写一个 shell 脚本来安装 CherryPy 的最新稳定版本，而无需对版本号进行硬编码。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T07:19:47.413

为什么不使用`easy_install`或`pip`从[Cheeseshop](http://pypi.python.org/pypi/CherryPy/3.2.2)获取它？那应该会自动安装最新的稳定版本。

如果您需要围绕调用`pip`或的包装器`easy_install`（例如，因为您要安装到*virtualenv*或某些非全局路径等），请编写一个 ity-bitty shell 脚本以正确进行调用。这应该很简单。

# microsoft-metro - 在 Windows Metro 应用程序中修改 DOM 时出现 HierarchyRequestError

> ID：11301907
> 
> 赞同：8
> 
> 时间：2012-07-02T22:15:18.773
> 
> 标签：microsoft-metro, winjs

我正在使用 Javascript 和 HTML 构建一个 Windows Metro 应用程序，它崩溃并出现`HierarchyRequestError`：

```
Exception was thrown but not handled in user code at line 11, column 9 in ms-appx://21706d2f-b81e-47ef-9ebb-37de36c7a258/js/default.js
0x800a139e - JavaScript runtime error: HierarchyRequestError 
```

在引发错误的那一行，我正在做一些简单的 DOM 操作，并尝试将我创建的节点插入到文档中：

```
function insertData(hnode) {
    document.querySelector('#datanode').appendChild(hnode);
} 
```

为什么会因为这样的错误而失败？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-02T22:15:19.787

`HierarchyRequestError`当您尝试`undefined`在 DOM 中插入 或其他一些无效值时，会抛出A 。

在问题的函数中，`hnode`可能是`undefined`，例如，因为`insertData()`被调用时没有参数。

要调试这样的情况并找出`insertData()`问题所在，可以使用 Visual Studio 中的条件断点。如果设置断点，请右键单击它并选择*"Condition..."*。像这样的条件`hnode === undefined`可以用来打破有趣的情况。

# python - LOAD DATA INFILE 不会加载我的所有数据

> ID：11301910
> 
> 赞同：4
> 
> 时间：2012-07-02T22:15:42.607
> 
> 标签：python, mysql, csv

我需要读取 1048 行 csv 数据。数据如下所示：

```
\N,Olenevka,Оленевка,2596
\N,Urzuf,Урзуф,2904
\N,Lebedyn,ЛЕБЕДИН,27695
\N,Staryy Dobrotvor,Staryy Dobrotvor,6436 
```

这是表格：

```
+------------+------------------+------+-----+---------+----------------+
| Field      | Type             | Null | Key | Default | Extra          |
+------------+------------------+------+-----+---------+----------------+
| city_id    | int(10) unsigned | NO   | PRI | NULL    | auto_increment |
| name       | text             | YES  |     | NULL    |                |
| alt_name   | text             | YES  |     | NULL    |                |
| population | int(10) unsigned | NO   |     | NULL    |                |
+------------+------------------+------+-----+---------+----------------+ 
```

这是代码：

```
db.query(""" 
    LOAD DATA INFILE '%s' 
    INTO TABLE %s 
    CHARACTER SET utf8
    FIELDS TERMINATED BY ',' 
    (@skip, name, alt_name, population) 
    """ % (temp_file, table))

class Database(object):
    def __init__(self, database):
        self.database = database
    def query(self, cmd):
        return subprocess.call(['mysql -u root -e "%s" %s' % (cmd, self.database)], shell=True) 
```

当我从 python 发出命令时，它只读取 1025 行。但是，如果我从 mysql 提示符下发出相同的命令，我就会得到它们。

这是运行代码后 SELECT * 的最后一行：

```
|    1023 | Alchevs’k        | Алчевск                             |     116000 |
|    1024 | Yakymivka        | Якимівка                            |      12353 |
|    1025 | Okhtyrka         | Охтирка                             |      49818 |
|    1026 | Adzhamka         | А                                   |          0 |
+---------+------------------+-------------------------------------+------------+ 
```

最后一行仅被部分读取。这是文件的其余部分。

```
\N,Okhtyrka,Охтирка,49818
\N,Adzhamka,Аджамка,3859
\N,Malynivka,Малинівка,7502
\N,Mykhaylivka,Mykhaylivka,3352
\N,Kopashnovo,Копашново,3010
\N,Narkevychi,Наркевичі,1631
\N,Kirove,Кірове,3291
\N,Orikhove,Оріхове,3000
\N,Krasni Okny,Красні Окни,5461
\N,Pavlivka,Pavlovka,738
\N,Kuchurhan,Кучурган,3183
\N,Smyga,Смыга,2800
\N,Tayirove,Таїрове,1849
\N,Teplodar,Теплодар,8502
\N,Komsomolsk,Комсомольськ,51740
\N,Славутич,Славутич,25000
\N,Розгирче,Розгирче,566
\N,Orzhiv,Оржів,4125
\N,Shkil’ne,Шкільне,2127
\N,Denyshi,Деныши,1164
\N,Chetfalva,Четфалва,755
\N,Stepove,Степовое,1549
\N,Scholkine,,11677
\N,Yuzhnoukrains'k,Южноукраїнськ,39430 
```

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T17:56:30.683

尝试在每行末尾添加一个反斜杠，如下所示：

```
db.query("""\
    LOAD DATA INFILE '%s' \
    INTO TABLE %s \
    CHARACTER SET utf8 \
    FIELDS TERMINATED BY ',' \
    (null, name, alt_name, population) \
    """ % (temp_file, table)) 
```

如果这不起作用，请尝试从“subprocess.call”调用中禁用 shell 处理。

例如：

> 壳=假

# html - 如何创建一个 TD 向左对齐且其兄弟向右对齐的表？

> ID：11301917
> 
> 赞同：0
> 
> 时间：2012-07-02T22:18:08.080
> 
> 标签：html, css

我想在 HTML 中创建一个只有一行 (tr) 和两列 (td) 的表。

第一个 td，我希望其内容与左侧对齐，第二个 td，我希望其内容与右侧对齐。我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T22:21:21.900

```
tr td{text-align:right}
tr td:first-child{text-align:left} 
```

但是您也可以使用 th 和 td 而不是 2 td。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T22:32:41.927

显然有几种方法可以做到这一点，但在 CSS3 中，您有两种选择，我认为它们更具体地满足您的要求。

相邻兄弟选择器

```
td { text-align: left; }
td + td { text-align: right; } 
```

和通用兄弟组合器

```
td { text-align: left; }
td ~ td { text-align: right; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T22:20:46.057

只需`text-align`在 CSS 中设置属性。第一个是不必要的，因为默认情况下应该保留它。

```
​&lt;table style="width:200px;">
<tr>
    <td style="text-align: left;">a</td>
    <td style="text-align: right;">b</td>
</tr>
</table>​​​​​​​​​​​​​​​​​ 
```

# c# - 命名空间冲突

> ID：11301918
> 
> 赞同：0
> 
> 时间：2012-07-02T22:18:16.363
> 
> 标签：c#, asp.net

我有：

```
using System.Diagnostics;
using System.Reflection;

namespace Site
{
    public abstract class General
    {

        private static string _version;

        public static string Version { get { return _version; } }

        static General()
        {
            Assembly assembly = Assembly.GetExecutingAssembly();
            FileVersionInfo fileVersionInfo = FileVersionInfo.GetVersionInfo(assembly.Location);
            _version = fileVersionInfo.ProductVersion;
        }

    }
} 
```

代码运行良好，我可以在任何需要访问的地方获取版本`Site.General.Version`。现在我正在尝试使用内联标记`<% = Site.General.Version %>`，但我收到一条错误消息`System.ComponentModel.ISite`，说不包含定义或“常规”....我认为由于*interface* `ISite`存在命名空间冲突。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T22:22:34.910

我强烈建议更改命名空间或类的名称。你*有时*可以让它工作，但这会回来咬你。并且编译器错误非常无用，这尤其糟糕，因为这会在重构时咬住你，重构的时间通常与编写代码的时间不同。我从经验中说 - 坏主意。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T22:23:44.647

尝试将此添加到您的 aspx 顶部

```
 <%@ Import Namespace="Site" %> 
```

并像这样更改您的代码

```
 <%= General.Version %> 
```

**编辑**

这是对 web.config 上的所有页面执行此操作的语法

```
<system.web>
      <pages>
           <namespaces>
                <add namespace="Site" />
           </namespaces>
      </pages>
</system.web> 
```

# google-app-engine - 如果 index=False，我还能查找 get_by_id()

> ID：11301922
> 
> 赞同：0
> 
> 时间：2012-07-02T22:18:38.337
> 
> 标签：google-app-engine, indexing, google-cloud-datastore

在谷歌的数据存储中，我试图通过设置 index=False 来节省一些写入，并通过仅使用 get_by_id() 来提高读取效率。我有一个我只能仰望的实体`get_by_id()`。我知道如果我有：

```
class Comments(db.Model)
     content = db.StringProperty(required=True, indexed=False)
     userID = db.StringProperty(required = True)
     time_created = db.DateTime(autoCreate = True) 
```

它将花费更少的写入和更少的空间，但我仍然可以执行 get_by_id() 查询还是 ID 是索引？

PS我知道这是另一个问题，但是对于像这样的简单模型，ndb.Model 会更好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T23:24:36.830

db.get_by_id 和 get.by_key_name 只是 db.get(key) 的便捷包装器，它们只是为您创建密钥。这种类型的访问不查看属性或其索引。

您将始终能够通过密钥检索实体（如果存在；-）。

# java - SnakeYAML：似乎不起作用

> ID：11301923
> 
> 赞同：0
> 
> 时间：2012-07-02T22:18:38.913
> 
> 标签：java, yaml, snakeyaml

我正在关注提到的教程 - [http://code.google.com/p/snakeyaml/wiki/Documentation#Tutorial](http://code.google.com/p/snakeyaml/wiki/Documentation#Tutorial)

我的代码看起来像

```
public class Utilities {
    private static final String YAML_PATH = "/problems/src/main/resources/input.yaml";

    public static Map<String, Object> getMapFromYaml() {
        Yaml yaml = new Yaml();
        Map<String, Object> map = (Map<String, Object>) yaml.load(YAML_PATH);
        System.out.println(map);
        return map;
    }

    public static void main(String args[]) {
        getMapFromYaml();
    }
} 
```

我的`YAML`文件看起来像

```
sorting
  01: [10, 9, 8, 7, 6, 5, 4, 3, 2, 1, 0] 
```

当我运行我的程序时，我看到

```
Exception in thread "main" java.lang.ClassCastException: java.lang.String cannot be cast to java.util.Map
    at com.ds.utilities.Utilities.getMapFromYaml(Utilities.java:19)
    at com.ds.utilities.Utilities.main(Utilities.java:25)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)

Process finished with exit code 1 
```

我该如何解决这个问题以使其正常工作？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-07-03T16:19:18.620

它运作良好

```
public class RuntimeInput {
    private final Map<String, Object> RUNTIME_INPUT;

    private static final String SORTING = "sorting";
    private static final String YAML_PATH = "/src/main/resources/input.yaml";

    public RuntimeInput() {
        RUNTIME_INPUT = getMapFromYaml();
    }

    public static Map<String, Object> getMapFromYaml() {
        Yaml yaml = new Yaml();
        Reader reader = null;
        Map<String, Object> map = null;
        try {
            reader = new FileReader(YAML_PATH);
            map = (Map<String, Object>) yaml.load(reader);
        } catch (final FileNotFoundException fnfe) {
            System.err.println("We had a problem reading the YAML from the file because we couldn't find the file." + fnfe);
        } finally {
            if (null != reader) {
                try {
                    reader.close();
                } catch (final IOException ioe) {
                    System.err.println("We got the following exception trying to clean up the reader: " + ioe);
                }
            }
        }
        return map;
    }

    public Map<String, Object> getSortingDataInput() {
        return (Map<String, Object>) RUNTIME_INPUT.get(SORTING);
    }

    public static void main(String args[]) {
        RuntimeInput runtimeInput = new RuntimeInput();
        System.out.println(Arrays.asList(runtimeInput.getSortingDataInput()));
    }
} 
```

# c - 如何在数组中找到 4 个 XOR 等于 0 的数字？

> ID：11301924
> 
> 赞同：-2
> 
> 时间：2012-07-02T22:18:42.603
> 
> 标签：c, algorithm

`A[]`给定一个大小为`n<=100000`和的数组`0<=A[i]<=2^64`，并且 的每两个相邻元素`A[]`在其二进制表示中恰好有一个不同的数字。现在我们必须检查数组中是否存在任何`4`元素，例如和。`A[i1],A[i2],A[i3] and A[i4]``1<=i1<i2<i3<i4<=n``A[i1] xor A[i2] xor A[i3] xor A[i4] = 0`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T22:27:56.193

**提示：** 在这些规则下，两个数字异或可以为零吗？为什么或者为什么不？这两个数字相互之间会是什么样子？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-03T20:26:39.943

由于两个相邻的数字相差一个二进制位，因此将两个相邻的数字异或的结果非常可预测：

`x`表示其值无关紧要的位，但与对应的`x`下方/上方相同。

```
 xxxxxxxxxxxxx1xxxxxxxxxxxx
xor:    xxxxxxxxxxxxx0xxxxxxxxxxxx
__________________________________
        00000000000001000000000000 
```

对于您描述的集合中的任何两个相邻数字都是如此。

如果你能找到另一对相邻的数字，它们相差相同的位，它们也会异或到相同的值：`00000000000001000000000000`

最后，对这两个值进行异或运算肯定会给你一个零的最终答案。

* * *

所以你想要的算法看起来像：

*   识别数字与其后继位之间的不同位（位 0-63）
*   找到另一对也与步骤 1 中标识的相同位不同的数字。

这些是你的 4 个价值观。

请注意，如果 N > 64，那么根据[鸽巢原理](http://en.wikipedia.org/wiki/Pigeonhole_principle)，必须有这样的解决方案。
如果`N <= 64`，*可能*有这种形式的解，也可能有另一种形式的解，我这里就不描述了。

*还有其他约束也可以找到 4 个异或 0 的数字。
但这可能是搜索解决方案的最简单方法。
但是，无法以这种方式找到解决方案并不能保证**没有**解决方案。*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-02T22:30:29.073

**提示：**查看异或的真值表：

```
A | B | Output
- + - + - - - 
0 | 0 | 0
0 | 1 | 1
1 | 0 | 1
1 | 1 | 0 
```

现在，什么二进制数与 10101 异或为 0？

这些是要查找的数字类型。

编辑：一旦你发现这些数字之间的关系是什么，你似乎从你对@abelenky 的回答的评论中得到了，你必须看看问题的其他部分。由于每个相邻元素在其二进制表示中都有一个不同的数字，这对于我们正在寻找的两个相邻元素的可能性意味着什么？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-05T21:12:05.860

这是来自 CodeChef 目前正在进行的算法竞赛的一个问题。问题的链接是[http://www.codechef.com/JULY12/problems/GRAYSC](http://www.codechef.com/JULY12/problems/GRAYSC)。所以这是不公平手段的使用，应该删除问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-03T10:49:36.610

**提示：**如果您完全卡住，请尝试 O(n^4) 解决方案：

```
for i = 0 to N-3
  for j = i+1 to N-2
    for k = j+1 to N-1
      for l = k+1 to N
         if a[i] XOR a[j] XOR a[k] XOR a[l] is equal to 0 then
           print a[i], a[j], a[k], a[l] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-03T02:03:43.713

仔细观察两个相邻数字的异或的所有可能值，总共有多少**不同的**值是可能的？一旦你弄清楚了这一点，你就会得到答案。

# ruby-on-rails - 在 Ruby/Rails 中使用全局列表

> ID：11301930
> 
> 赞同：0
> 
> 时间：2012-07-02T22:19:22.217
> 
> 标签：ruby-on-rails, ruby

我需要能够访问整个 Rails 项目中的列表。为简单起见，这是我放入的列表`environment.rb`

```
FOODS = ['CHEESE', 'EGGS', 'ORANGES'] 
```

我希望每个文件都可以访问这个常量，但同时我担心某些文件可能会通过做一些只有它特别需要的事情来搞乱所有其他文件的列表，例如：`FOODS.push("TEMPORARY_FOOD")`

使此列表全局可访问的正确方法是什么？我应该使用`.freeze`，还是应该使用其他方法而不是`environment.rb`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T22:27:42.340

按照惯例，红宝石常量并不意味着要修改。使用`.freeze`很好，但请记住，它不会阻止重新定义常量，

```
FOODS = ['ANOTHER', 'ARRAY'] 
```

如果您在`environment.rb`. 将常量初始化放在 config/initializers 文件中的更好位置 - 除非您在 environment.rb 中需要它 - 使升级 environment.rb（Rails 升级更容易）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T06:28:17.410

如果只有视图文件需要 FOODS 数组，你可以把它放在 application_helper 文件中。如果模型也需要它，您可以将它与其他数组合并：

食物 + [“香蕉”]

（还有一百万种方法可以做到这一点）。

# vb.net - 在 Visual Basic 中将实数转换为十进制

> ID：11301935
> 
> 赞同：1
> 
> 时间：2012-07-02T22:19:51.767
> 
> 标签：vb.net, algorithm

你们能帮忙解决这个问题吗？我需要将存储为 (xy) 的实数转换为 Visual Basic 中的十进制值，反之亦然。

该过程的任何伪代码/代码/答案都会很棒，干杯！马丁

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T22:25:32.887

```
Dim realNumber = 123.456
Dim decimalValue = Convert.ToDecimal(realNumber)
realNumber = Decimal.ToDouble(decimalValue) 
```

*   [`Convert.ToDecimal`方法（双）](http://msdn.microsoft.com/en-us/library/a69w9ca0.aspx)
*   [`Decimal.ToDouble`方法](http://msdn.microsoft.com/en-us/library/system.decimal.todouble.aspx)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-12-12T22:44:26.850

' 只需调用 .... REAL_to_DOUBLE(1112573452) 或 REAL_to_DOUBLE(4742453279273779200)

```
 Public Function REAL_to_DOUBLE(ByVal i3264 As Long) 
            Dim sBit As Integer = 1
            Dim expBits As Integer = 8 'for 32 bits, 11 for 64 bits
            Dim expAux As Integer = 127 'for 32 bts, 1023 for 64 bits
            Dim nBits As Integer = 32 ' for 23 bits, 64 for 64 bits
            Dim dec As Double = 1

            Dim hexstring As String = Hex(i3264)

            If hexstring.Length > 8 Then
                expBits = 11
                nBits = 64
                expAux = 1023
            End If

            Dim bin_ As String
            If nBits = 32 Then
                bin_ = Convert.ToString(Convert.ToInt32(hexstring, 16), 2).PadLeft(nBits, "0"c)
            Else
                bin_ = Convert.ToString(Convert.ToInt64(hexstring, 16), 2).PadLeft(nBits, "0"c)
            End If
            Dim _sinal As Integer = -1
            If (bin_.Substring(0, 1)) = "0" Then _sinal = 1

            Dim _e As String = bin_.Substring(1, expBits).PadLeft(expBits, "0"c)
            Dim a As Integer = Convert.ToInt32(_e, 2)
            Dim exp_ As Integer = a - expAux

            Dim matissa As String = bin_.Substring(expBits + 1, bin_.Length - (expBits + 1))

            Dim length As Integer = Len(matissa)
            Dim ps As Long = 2
            For x As Integer = 0 To length
                Dim temp As Integer = Val(Mid(matissa, x + 1, 1))

                If temp = 1 Then
                    dec += temp / ps
                End If
                ps *= 2
            Next

            dec = _sinal * 2 ^ (a - expAux) * dec

            Return dec
        End Function 
```

# google-app-engine - 如何根据查询构建自定义 DatastoreInputReader？

> ID：11301937
> 
> 赞同：3
> 
> 时间：2012-07-02T22:19:58.973
> 
> 标签：google-app-engine, mapreduce

我将如何构建一个基于查询的 DataStoreInputReader（而不是读取该类型的每个实体）。基本原理是最小化读取（因为查询被索引到子集）和处理时间。

1.  **首先，这是个好主意吗？**或者使用查询支持的自定义数据存储输入读取器会实际节省时间和处理，还是查询本身会取消 mapreduce 并行性或增加其他开销？

2.  **二、怎么办？**我一直在阅读 *input_readers.py* 并且不清楚如何对 AbstractDataStoreInputReader 进行子类化来执行此操作。也许有人可以解释实现这样的过程的过程，因为阅读代码并不清楚（并且文档已过时或不存在）。

对于那些可以指向显示自定义数据存储输入读取器实现的工作代码（github 或其他）的人来说，布朗尼点数。

这对于使 AppEngine MapReduce 更易于开发人员访问或更友好 ;-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T06:10:33.180

[http://code.google.com/p/appengine-mapreduce/source/browse/trunk/python/src/mapreduce/input_readers.py](http://code.google.com/p/appengine-mapreduce/source/browse/trunk/python/src/mapreduce/input_readers.py) DatastoreInputReader 现在确实支持过滤器！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T20:04:20.800

从文档[DatastoreInputReader](https://developers.google.com/appengine/docs/python/dataprocessing/readers_writers#DatastoreInputReader)：

> 此阅读器不进行过滤：您需要在映射器中进行任何所需的过滤。

# internet-explorer - iframe youtube 无法在 ie9 上播放

> ID：11301939
> 
> 赞同：0
> 
> 时间：2012-07-02T22:20:15.497
> 
> 标签：internet-explorer, youtube

我在 Internet Explorer 9 64 位中播放 youtube 视频时遇到问题？

在 chrome 和 firefox 上运行良好

我读过 adobe 在 ie6 64 位上不受支持，但那是一年多前的事了，有什么设置可以让它在 ie9 64 位上工作吗？

我在这个网站上尝试了测试

[http://www.nvtgroup.co.uk/Seasons-Greetings.html](http://www.nvtgroup.co.uk/Seasons-Greetings.html)

许多其他网站也不行

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T10:32:31.943

请参阅此[Adob​​e 测试页面](http://helpx.adobe.com/flash-player/kb/flash-player-64-bit-operating.html)。

它将显示当前系统和插件信息（图像只是一个示例）：

> Flash 播放器信息
> 
> 如果您的浏览器上安装了 Flash Player，以下框会显示 Flash Player 的版本和您的操作系统。如果未安装 Flash Player，则会显示错误消息。
> 
> ![在此处输入图像描述](../Images/894003fc7183da6e0e86726f7afe8d54.png)

# java - 在 java 中跨表单处理数据并使用多个表单

> ID：11301943
> 
> 赞同：0
> 
> 时间：2012-07-02T22:20:38.847
> 
> 标签：java, forms, user-interface

我正在尝试用 java 制作一个基于统计的小型游戏，但正在努力如何使用多种形式以及我的“英雄”类。

到目前为止，我有 5 个课程 MainMenu、PlayerCreationscreen、GameWindow、Person、Statgame。

在 statgame 类中，它制作了一个主菜单和一个人，但我不知道从那里去哪里。

```
public class StatGame {
    /**
     * @param args
     * @return 
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub
        mainMenu main = new mainMenu();
        Person hero = new Person();
    }
} 
```

这就是制作主菜单和英雄的统计游戏的代码。

```
@Override
public void actionPerformed(ActionEvent e) {
    String command = e.getActionCommand();
    if(command.equals("New")){
        playerCreationWindow playerMakeWindow = new playerCreationWindow();
        this.setVisible(false); 
```

这是当我单击新建时在主菜单上发生的代码，但之后我无法使用我制作的人而无需在其他类中重新制作它，因此它会丢失我对它所做的任何事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T22:34:16.517

您可以尝试做的一件事是通过构造函数或使用 setter 将 Person 对象传递给您的其他类。

# java - 从 Jtable 导出 XML 文件

> ID：11301950
> 
> 赞同：-4
> 
> 时间：2012-07-02T22:21:19.207
> 
> 标签：java, xml, swing, jtable

我想`XML`从`JTable`. 我也想`HTML`从同一个导出文件`JTable`

谢谢 ，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T00:43:55.873

你的问题缺乏足够的细节来做任何事情，而不仅仅是概述一个简单的方法。a 查看的数据`JTable`存储在它的`TableModel`. 假设您的模型看起来像[这里](https://stackoverflow.com/a/9134371/230513)显示的模型。

```
private Map<String, String> data = System.getenv(); 
```

您可以编写一个 XML 表示来`stdout`喜欢这样

```
Map<String, String> data = System.getenv();
XMLEncoder e = new XMLEncoder(new BufferedOutputStream(System.out));
e.writeObject(data);
e.close(); 
```

API 展示了[`XMLEncoder`](http://docs.oracle.com/javase/6/docs/api/java/beans/XMLEncoder.html)如何写入文件。反之，`XMLDecoder`也可以用来逆转这个过程。有关更多信息，请参阅[*JavaBeans 组件的长期持久性：XML 模式*](http://java.sun.com/products/jfc/tsc/articles/persistence3/)。

# scrollto - ScrolltoPage 或页面加载上的元素，iscroll4

> ID：11301951
> 
> 赞同：0
> 
> 时间：2012-07-02T22:21:21.247
> 
> 标签：scrollto, pageload, iscroll4

所以滚动页面或元素或位置非常简单。但是有谁知道如何让它在页面加载时自动工作？

我试过添加一个：

```
 $(document).ready(function() {
    $("#start2").trigger('click');
    }); 
```

链接到scrolltopage div，但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T21:26:12.003

nevermind got it added

```
 <body
        onload="myScroll.scrollToElement('li:nth-child(3)', 0)" ;=""> 
```

with this in the html

```
 <div id="start2" onclick="myScroll.scrollToElement('li:nth-child(3)', 0);"/> 
```

now anyone think it's possible to add an anchor to this so that the position changes dependent on the previous page?

# iphone - 从远程服务器更新 UITableView

> ID：11301954
> 
> 赞同：0
> 
> 时间：2012-07-02T22:21:55.083
> 
> 标签：iphone, objective-c, xcode, uitableview

这是我在这里的第一个问题，我想问一下，在将应用程序发布到 App Store 之后，是否有办法从远程服务器更新 UITableView 内容（行）。

我正在做一个应用程序，它有一个 UITableView 充满了一些人，当你点击其中一个人时，它会向你显示他们的传记、youtube 频道、twitter 和 facebook 页面。

我只是想找到一种不时将更多人添加到列表中的方法，但不知道如何在不更改 TableViewController.m 的情况下做到这一点

我不想要的是：每次我必须向 UITableView 添加一些东西时都必须更新应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T22:27:27.627

当然这是可能的。很多应用程序都是这样做的。像 Apple 的 Mail 应用程序，还有第三方应用程序。你可以使用很多不同的方法，如果没有关于你的问题的更精确的信息，很难说出什么是适合你的。以下是一些一般性建议：

您可以在服务器上设置一个简单的 RSS 提要或纯 XML 文件，并不时从那里轮询您的列表。

或者，您可以使用带有简单后端的基本 (SQL) 数据库，您可以在其中修改数据。然后，您可以从此数据库下载您的内容。

下载过程必须在单独的线程上运行，因此您不会阻塞主线程。如果您使用`NSURLConnection`它会自动为您完成。下载完成后，您将更新表格视图。

**编辑：**

您必须将问题分解成小块并一一解决（[分而治](http://en.wikipedia.org/wiki/Divide_and_conquer_algorithm)之）。

首先了解如何使用`NSURLConnection`下载文本文件并将其内容记录到控制台。这应该不是很困难，只需阅读[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/URLLoadingSystem.html#//apple_ref/doc/uid/10000165i)并在没有成功时提出更具体的问题。

然后决定使用什么格式（RSS、plist、plain XML、JSON、其他......）并尝试下载和解析这样的文件。Plist 文件将是最容易解析的，但可能更难在您的服务器上手动编辑。还有可用的[XML](http://www.raywenderlich.com/553/how-to-chose-the-best-xml-parser-for-your-iphone-project)和[JSON](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)解析器。

根据数据的复杂性，您可能希望实现一些模型类并将下载的信息传递给它们。如果这是您想要做的，请考虑在用户关闭您的应用程序时使用 Core Data 在本地保存您的对象。您也可以使用 . 将下载的文件保存到磁盘[`NSFileManager`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsfilemanager_Class/Reference/Reference.html)。

最后一步是使用现在本地存储在手机上的数据填充您的表格视图。这应该不是很困难，并且有很多关于此的教程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T22:27:38.013

Whatever object in your app that you've designated as answering to your table's ["`UITableViewDataSource`" protocol](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITableViewDataSource_Protocol/Reference/Reference.html) is tasked with delivering data to the table view. What kind of data is delivered though, is up to you and your implementation.

The object that responds to the UITableViewDataSource protocol has to fulfill the required methods ([number of rows in section](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UITableViewDataSource_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UITableViewDataSource/tableView%3anumberOfRowsInSection%3a), cell for row at index path, etc.). So if you want to provide additional data from some remote server, you can definitely do that, but you also should make sure to be able to handle failure cases like when the server is unreachable (no WiFi or Cell service).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T22:26:13.147

你如何填充 TableView？你在哪里有信息？因为如果它在代码中，那是一个坏主意，也是一个糟糕的设计。

我建议从网络服务获取填写表格的信息，这样您就可以发送任意数量的人，而无需更新应用程序。

# php - POST 请求，限制为本地主机

> ID：11301955
> 
> 赞同：0
> 
> 时间：2012-07-02T22:22:08.673
> 
> 标签：php, html, forms, post

我正在开发一个音乐网络应用程序。我正在添加一个功能，其中每首歌曲旁边都有一个按钮，可以将其从数据库中删除。该页面将通过将参数 songId 发送到将处理它的 PHP 页面来完成此操作。现在，我想阻止人们从远程服务器向该 PHP 页面发送 POST 请求。我可以检查哪些条件来限制 POST 请求仅来自我的音乐网络应用程序或本地主机。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T22:26:03.553

```
if($_SERVER['REMOTE_ADDR'] != '127.0.0.1' && $_SERVER['REMOTE_ADDR'] != '::1') {
    exit('access denied');
} 
```

但是，这不会保护您免受[CSRF](http://en.wikipedia.org/wiki/CSRF)的侵害。为了防止恶意网站在提交时（可能通过 JavaScript 自动）创建一个 POST 到您的应用程序的表单，您需要通过攻击者网站无法知道的秘密令牌实施适当的 CSRF 保护。

# objective-c - 如何在 iPhone 应用程序中使用 .NET Web 服务？

> ID：11301959
> 
> 赞同：-2
> 
> 时间：2012-07-02T22:22:24.630
> 
> 标签：objective-c, ios, web-services, nsurlconnection, nsxmlparser

我正在创建一个需要与 .Net Web 服务交互的 iPhone 应用程序。我对此做了一些研究，但这个网站上的很多讨论都已经过时了。所以我认为最好再问一次这个问题，看看你们中是否有人可以帮助我解决这个问题。

根据我在其他讨论中阅读的内容，我可以使用 NSURLConnection 或 NSXMLParser 来发送和接收数据。人们建议我也可以使用 JSON。我刚刚开始学习网络服务。我只是在返回字符串的 Web 服务上测试一些基本的 Web 方法。没什么复杂的。实现此功能的最佳方法是什么？

谢谢！

更新 - 抱歉，在发布问题之前我应该​​做更多的研究。现在，由于我了解了如何在 .net 上使用 Web 服务，我觉得我提出的问题很愚蠢，并且完全理解反对票。对不起！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T22:58:02.647

我认为您应该使用 JSON 格式。解析速度更快，下载更轻松。此外，在实施难度上也没有区别。为了解析客户端大小（您的应用程序）上的数据，我建议使用 JSONKit 库 - 据我所知，它是最快的。网上有几个速度测试可用。喜欢[这个](http://www.cocoanetics.com/2011/03/json-versus-plist-the-ultimate-showdown/)。NSURLConnection 也非常有用。您可以获取响应代码、获取数据等。在获取该数据后，JSON 显然很有用。

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T22:52:31.910

服务器方法的响应有多简单并不重要。使用 JSON 或 XML 之类的序列化格式的想法是，您可以保证消息 recd. 客户端是可接受且可解析的消息。

Web 服务允许使用 JSON 作为其序列化格式。一旦你这样做了，你就可以使用 Cocoa 内置的 JSON 解析器来解析响应。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T03:19:50.660

您可以在您的案例中使用的一个有用提示如下：

```
+ (NSString*)stringFromURL:(NSString*)urlString
{
    return [NSString stringWithContentsOfURL:[NSURL URLWithString:urlString] encoding:NSUTF8StringEncoding error:nil];
} 
```

您可以使用该行从服务器获取数据，然后解析它（如果它是 XML 数据）。我通常不使用 XML 解析。相反，我只是在请求 URL 中使用查询字符串并获得一个数据字符串，即我正在寻找的特定值。

当我这样做时，您可以使用以下方法将从该方法获得的字符串转换为整数或双精度数或许多其他类型：

```
int returnedInt = [[self stringFromURL:@"URL"] intValue];
double returnedDouble = [[self stringFromURL:@"URL"] doubleValue]; 
```

希望这至少有一点帮助！如果没有，也许它会帮助其他人。

# c# - 如何从具有后期生成内容的网页发回信息？

> ID：11301962
> 
> 赞同：0
> 
> 时间：2012-07-02T22:22:36.180
> 
> 标签：c#, html, html-lists

好的，所以我对 html 和网络非常陌生。现在，我正在尝试动态生成列表项，然后将它们发送回 Web 服务器，这样我就知道这个人想要获取什么。

这是生成列表项的代码：

```
foreach (var item in dataList) {
    MyDataList.InnerHtml += "<li><a runat='server' onclick='li_Click' id='" + item.Name + "-button'></a></li>";
} 
```

再往下我有我的点击事件。

```
protected void li_Click(object sender, EventArgs e) {
    //How do I determine here which item was actually clicked?
} 
```

我的问题是如何确定单击了哪个列表项？

顺便说一句，后面运行的代码是 C#。

**编辑 1**

```
LinkButton link = new LinkButton();
link.ID = "all-button";
link.Text = "All";
link.Click += new EventHandler(link_Click);
MyDataList.Controls.Add(link); 
```

然后在下面我有我的 link_Click 事件，它似乎永远不会遇到断点。

```
void link_Click(object sender, EventArgs e) {
    if (sender != null) {
        if (sender.GetType() == typeof(LinkButton)) {
            LinkButton button = (LinkButton)sender;
            if (button.ID == "all-button") {

            }
        }
    }
} 
```

我知道这必须是可能的，我只是无法弄清楚我错过了什么。

**编辑 2**

好吧好吧我想我知道问题是什么。我试图在另一个列表中添加第二个列表。这导致整个事情出现问题。它现在正在工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T22:36:32.400

这是一个使用链接按钮的示例。

代码背后：

```
for (int i = 0; i < 10 ; i++)
{
    LinkButton link = new LinkButton() { ID = "link_" + i };
    link.Text = "Link " + i;
    link.Click+=new EventHandler(link_Click);
    this.Form.Controls.Add(link);
}

protected void link_Click(object sender, EventArgs e)
{
    //Every time a link is clicked it will get here in the server side
} 
```

祝你好运！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-02T22:25:14.287

你可以很容易地做到这一点

```
onclick='li_Click(this)' 
```

编辑：-
在编辑内容之后，
您必须在 pageLoad() 中创建服务器端的所有控件才能在服务器端获取点击事件..还需要更多客户端脚本..
我认为你会更好调用 javascript 函数，然后使用 $.get 或 $.post 将数据发送回服务器

# doctrine-orm - 侦听器“SoftDeleteableListener”未添加到 EventManager

> ID：11301965
> 
> 赞同：15
> 
> 时间：2012-07-02T22:23:00.510
> 
> 标签：doctrine-orm, soft-delete, symfony-2.1

我按照[这个例子](https://github.com/l3pp4rd/DoctrineExtensions/blob/master/doc/softdeleteable.md)来测试`softdeletable`我运行 Symfony 2.1.0-DEV 的项目的扩展。

我配置了我的 config.yml，如下所示：

```
orm:
    auto_generate_proxy_classes: %kernel.debug%
    auto_mapping: true
    filters:
          softdeleteable:
            class: Gedmo\SoftDeleteable\Filter\SoftDeleteableFilter
            enabled: true
    mappings:
        translatable:
            type: annotation
            alias: Gedmo
            prefix: Gedmo\Translatable\Entity
            # make sure vendor library location is correct
            dir: "%kernel.root_dir%/../vendor/gedmo/doctrine-extensions/lib/Gedmo/Translatable/Entity"
        loggable:
            type: annotation
            alias: Gedmo
            prefix: Gedmo\Loggable\Entity
            dir: "%kernel.root_dir%/../vendor/gedmo/doctrine-extensions/lib/Gedmo/Loggable/Entity"
        tree:
            type: annotation
            alias: Gedmo
            prefix: Gedmo\Tree\Entity
            dir: "%kernel.root_dir%/../vendor/gedmo/doctrine-extensions/lib/Gedmo/Tree/Entity" 
```

我的控制器动作：

```
/**
 * @Route("/del", name="del_article")
 */
public function delAction() {
    $em = $this->getDoctrine()->getEntityManager();

    $article = $em->find('Article', 3);
    $em->remove($article);
            $em->flush();
    die('ok');
} 
```

当我运行代码时，它总是显示异常：`Listener "SoftDeleteableListener" was not added to the EventManager!`

经过一段时间的调试，我发现该类`SoftDeleteableFilter`具有功能`getListener()`：

```
protected function getListener()
{
    if ($this->listener === null) {
        $em = $this->getEntityManager();
        $evm = $em->getEventManager();

        foreach ($evm->getListeners() as $listeners) {
            foreach ($listeners as $listener) {
                if ($listener instanceof SoftDeleteableListener) {
                    $this->listener = $listener;

                    break 2;
                }
            }
        }

        if ($this->listener === null) {
            throw new \RuntimeException('Listener "SoftDeleteableListener" was not added to the EventManager!');
        }
    }

    return $this->listener;
} 
```

然而`$listeners`属性没有`SoftDeleteableListener`项目，但它有其他侦听器，例如

*   Gedmo\Tree\TreeListener
*   Gedmo\Sortable\SortableListener
*   Gedmo\Sluggable\SluggableListener
*   Gedmo\Loggable\LoggableListener
*   Gedmo\Timestampable\TimestampableListener
*   Gedmo\Translatable\TranslatableListener

它们是从 loadClassMetadata 生成的。我认为它可能从我的学说扩展.yml 服务侦听器生成：

```
services:
    extension.listener:
        class: Infinitz\UserBundle\Listener\DoctrineExtensionListener
        calls:
            - [ setContainer, [ @service_container ] ]
        tags:
            - { name: kernel.event_listener, event: kernel.request, method: onLateKernelRequest, priority: -10 }
            - { name: kernel.event_listener, event: kernel.request, method: onKernelRequest }
    gedmo.listener.tree:
        class: Gedmo\Tree\TreeListener
        tags:
            - { name: doctrine.event_subscriber, connection: default }
        calls:
            - [ setAnnotationReader, [ @annotation_reader ] ]

    gedmo.listener.translatable:
        class: Gedmo\Translatable\TranslatableListener
        tags:
            - { name: doctrine.event_subscriber, connection: default }
        calls:
            - [ setAnnotationReader, [ @annotation_reader ] ]
            - [ setDefaultLocale, [ %locale% ] ]
            - [ setTranslationFallback, [ false ] ]

    gedmo.listener.timestampable:
        class: Gedmo\Timestampable\TimestampableListener
        tags:
            - { name: doctrine.event_subscriber, connection: default }
        calls:
            - [ setAnnotationReader, [ @annotation_reader ] ]

    gedmo.listener.sluggable:
        class: Gedmo\Sluggable\SluggableListener
        tags:
            - { name: doctrine.event_subscriber, connection: default }
        calls:
            - [ setAnnotationReader, [ @annotation_reader ] ]

    gedmo.listener.sortable:
        class: Gedmo\Sortable\SortableListener
        tags:
            - { name: doctrine.event_subscriber, connection: default }
        calls:
            - [ setAnnotationReader, [ @annotation_reader ] ]

    gedmo.listener.loggable:
        class: Gedmo\Loggable\LoggableListener
        tags:
            - { name: doctrine.event_subscriber, connection: default }
        calls:
            - [ setAnnotationReader, [ @annotation_reader ] ] 
```

所以我尝试添加以下内容：

```
gedmo.listener.softdeleteable:
    class: Gedmo\SoftDeleteable\SoftDeleteableListener
    tags:
        - { name: doctrine.event_subscriber, connection: default }
    calls:
        - [ setAnnotationReader, [ @annotation_reader ] ] 
```

但它仍然显示`Listener "SoftDeleteableListener" was not added to the EventManager!`

我需要在哪个 SoftDeleteableListener 实例中添加监听器？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-25T08:10:52.677

由于答案不清楚，无法解决问题。

要将 softdeletable 行为添加到您的项目中，请将以下行添加到您的 config.yml

```
orm
  ..
  filters:
    softdeleteable:
      class: Gedmo\SoftDeleteable\Filter\SoftDeleteableFilter
      enabled: true

services:
  ..
  gedmo.listener.softdeleteable:
    class: Gedmo\SoftDeleteable\SoftDeleteableListener
    tags:
        - { name: doctrine.event_subscriber, connection: default }
    calls:
        - [ setAnnotationReader, [ '@annotation_reader' ] ] 
```

顺便说一句，可以找到对我有帮助的更完整的讨论：[https ://github.com/Atlantic18/DoctrineExtensions/issues/380](https://github.com/Atlantic18/DoctrineExtensions/issues/380)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-03-05T16:57:39.877

请参阅：[https ://github.com/stof/StofDoctrineExtensionsBundle/blob/master/Resources/doc/index.rst#activate-the-extensions-you-want](https://github.com/stof/StofDoctrineExtensionsBundle/blob/master/Resources/doc/index.rst#activate-the-extensions-you-want)

将以下内容添加到您的 config.yml 以激活 softdelete 侦听器：

```
# app/config.yml
stof_doctrine_extensions:
    default_locale: %locale%
    orm:
        default:
            softdeleteable: true 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-05-13T10:41:46.907

如果你在 api-platform 这是我的`config/packages/doctrine.yml`

```
doctrine:
    dbal:
        url: '%env(resolve:DATABASE_URL)%'

        # IMPORTANT: You MUST configure your server version,
        # either here or in the DATABASE_URL env var (see .env file)
        server_version: '12'
    orm:
        auto_generate_proxy_classes: true
        naming_strategy: doctrine.orm.naming_strategy.underscore_number_aware
        auto_mapping: true
        mappings:
            App:
                is_bundle: false
                type: annotation
                dir: '%kernel.project_dir%/src/Entity'
                prefix: 'App\Entity'
                alias: App
        filters:
            softdeleteable:
                class: Gedmo\SoftDeleteable\Filter\SoftDeleteableFilter
                enabled: true 
```

之后将新服务添加到`config.services.yml`

```
services:   
    ..........
    ..........
    gedmo.listener.softdeleteable:
        class: Gedmo\SoftDeleteable\SoftDeleteableListener
        tags:
            - { name: doctrine.event_subscriber, connection: default }
        calls:
            - [ setAnnotationReader, [ '@annotation_reader' ] ] 
```

最后将注解添加到`entity`

```
use Gedmo\Mapping\Annotation as Gedmo;

/**
* @ApiResource()
* @ORM\Entity(repositoryClass=StoreRepository::class)
* @ORM\Table(name="trn_stores")
* @Gedmo\SoftDeleteable(fieldName="deletedAt")
*/
class Store ... 
```

就是这样

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T21:43:34.240

抱歉我的粗心，因为我在文件底部的 config.yml 文件中覆盖了我的配置：

```
services:
    gedmo.listener.softdeleteable:
        class:        Gedmo\SoftDeleteable\SoftDeleteableListener 
```

并且没有正确配置.....现在问题已解决。

# ios - iCarousel viewForItemAtIndex 使用自定义 UIView 重新使用加载的第一个图像

> ID：11301967
> 
> 赞同：1
> 
> 时间：2012-07-02T22:23:31.337
> 
> 标签：ios, uiview, uiimageview, icarousel

使用带有 UIImageViews 的 iCarousel 没有任何问题，一切都很好。

但是，我想用图像添加一些额外的绘图，所以我做了一个 UIView 的快速子类，它包含一个图像并有一个自定义的绘图例程。很简单。但是，在***viewForItemAtIndex***内部，当我设置图像属性时，它不会在视觉上更新。相反，它会重复代表可见图像的 n 个图像，从而重复最初加载的对象。

例如，我有 26 张图片，a - z。5 在启动时可见，a - e。如果没有'setNeedsReload'，当我滚动视图时，我会重复获取图像 a - e，而不是 a - z。

我发现如果我在 setImage 属性中添加“ ***setNeedsDisplay*** ”，它将正常工作。但是，存在巨大的性能损失。

我的问题有两个：

1.  我错过了什么吗？
2.  我是否应该只扩展 UIImageView 并在 'processImage' 样式方法中进行自定义绘图，就像尼克在 FXImage 中所做的那样？

谢谢，

```
/// GroupImageView.m

- (void)setImage:(UIImage *)newImage {
    image = newImage;
    [self setNeedsDisplay];
}

// override of the drawRect routine.
- (void)drawRect:(CGRect)rect {

    //  only draw if we have an image to draw
    if (image) {
        CGContextRef context = UIGraphicsGetCurrentContext();

        // blah blah, fancy drawing crap
        CGContextRotateCTM (context, radians((rand() % 5 + 2)));
        CGContextTranslateCTM(context, -0.5f * insetRect.size.width, -0.5f * insetRect.size.height);
        CGContextFillRect(context,insetRect);
        // etc

        [image drawInRect:insetRect blendMode:kCGBlendModeNormal alpha:[self alpha]];

        // etc
    } 
} 
```

* * *

```
- (UIView *)carousel:(iCarousel *)carousel viewForItemAtIndex:(NSUInteger)index reusingView:(UIView *)view {

    if (view == nil) {
        view = [[GroupImageView alloc] initWithImage:[UIImage imageNamed:@"Loading.png"]];
    }
    CGImageRef ref = [group posterImage];
    UIImage* coverImage;
    if (ref) {
        coverImage = [UIImage imageWithCGImage:ref scale:1/scaleFactor orientation:UIImageOrientationUp];
    }
    else {
        coverImage = [UIImage imageNamed:@"Sunflower.png"];
    }

    [(GroupImageView*)view setImage:coverImage];
    return view;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T09:24:28.937

UIImageView 不使用 drawRect 来绘制图像，因为 drawRect 使用 Core Graphics 进行绘制，而 Core Graphics 不是硬件加速的。

使用 drawRect 绘制其内容的 UIView 子类将比 UIImageView 慢 100 倍，这就是您遇到性能问题的原因。

FXImageView 通过在后台线程上进行绘图并使用 NSOperationQueue 来确保图像根据需要按顺序更新来解决这个问题。

分叉 FXImageView 并修改 processImage 方法来进行绘图并不是一个坏主意 - 它肯定会比从头开始重新创建 FXImageView 的排队和缓存行为更少工作。请注意，您还需要修改缓存键逻辑，因为 FXImageView 的缓存基于它使用的特定绘图属性。

我可能会考虑更新 FXImageView 以包含自定义绘图块属性 - 这似乎是有用的东西。

# windows - 内存映射文件和 Win 服务 - 找不到服务器创建的文件

> ID：11301978
> 
> 赞同：0
> 
> 时间：2012-07-02T22:24:51.667
> 
> 标签：windows, service, memory-mapped-files

我正在尝试使用 Windows 服务创建一个内存映射文件，以便它可以保存许多其他 Windows 应用程序可以使用的静态数据。

我的问题是，当我启动服务时 - 服务可以轻松读取和写入内存映射文件。但是，Windows 应用程序不能。他们得到一个文件未找到错误。

使用同一个类来读取和写入内存映射文件，在两个 Windows 应用程序中我没有问题。所以，我相信内存映射文件的使用是正确的，但还有别的东西——可能在我缺少的 Windows 服务领域。

我曾尝试添加访问控制，但这无济于事。仍然，找不到文件。

诚然，我对 Windows 服务不是很有经验。我试图创建简单的文件来写入我的异常，但它们也不是从服务中创建的。至于帐户，我使用的是我自己的 Windows 帐户（我有有限的本地管理员权限）。

我没有使用网络服务帐户，因为我需要使用嵌入在我的用户帐户中的凭据来访问数据库。

任何想法都会很棒，因为此时我已经开始转动我的轮子了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-02T18:16:36.370

您可能需要在 MMF 名称前加上 @"Global\"。我相信较新版本的 Windows 在与其他应用程序不同的会话下运行服务。

我看到了对以下文章的引用：[Session 0 Isolation on Services and Drivers in Windows 的影响](http://msdn.microsoft.com/en-us/library/windows/hardware/gg463353.aspx)

您可能还需要修改本地安全策略“创建全局对象”，具体取决于您运行 Windows 应用程序的用户帐户。

# maven - Maven校验和输出到文本文件

> ID：11301983
> 
> 赞同：1
> 
> 时间：2012-07-02T22:25:26.787
> 
> 标签：maven

我目前有一个使用 Nexus 存储库的 maven 项目。我想知道是否有一种方法可以在 Maven 从 Nexus 存储库下载 jars/sha1/etc 时，是否可以将校验和输出到某种文本文件？

最终目标是进行可验证的一致性检查。我想得到它，所以有一个来自 Nexus 的日志文件，其中包含所有校验和，然后我可以使用本地存储库中的所有校验和创建另一个日志文件，然后交叉检查这两个日志文件以验证它们是相同的。我意识到 maven 目前正在做类似的事情，但我想要一种方法来证明它们在审计方面是相同的。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T07:22:30.720

如果校验和错误，您可以通过 settings.xml 文件中的 checkSumPolicy 打开错误而不是警告。

```
 <repositories>
        <repository>
          <id>codehausSnapshots</id>
          <name>Codehaus Snapshots</name>
          <releases>
            ..
            <checksumPolicy>fail</checksumPolicy>
          </releases>
          <snapshots>
            ...
            <checksumPolicy>fail</checksumPolicy>
          </snapshots>
          <url>http://snapshots.maven.codehaus.org/maven2</url>
          <layout>default</layout>
        </repository>
      </repositories> 
```

另一方面，重要的是配置nexus，以免在下载过程中重新计算新的校验和。

另一方面，如果您想创建带有校验和的文件，您可以检查旨在为项目创建此类文件的[maven-checksum-plugin 。](http://nicoulaj.github.com/maven-checksum-plugin/index.html)

# json - Github API 创建提交

> ID：11301989
> 
> 赞同：7
> 
> 时间：2012-07-02T22:26:05.757
> 
> 标签：json, api, http, github, commit

我需要有关 Github API 的帮助，

我需要通过 api 提交新版本的文件，我试图通过发送 post 请求来实现这一点

```
https://api.github.com/repos/:username/:repo:/git/commits/ 
```

有数据

```
{
    "login": "username",
    "token": "auth_token",
    "parent_commit": "sha",
    "message": "commit message.",
    "content": {
        "path": "full/path",
        "mode": "edit",
        "data": "new content"
    }
} 
```

但结果失败 - 未找到。

有谁知道在哪里发送这个请求以及这种格式是否正确？

（格式的灵感来自 - [http://swanson.github.com/blog/2011/07/23/digging-around-the-github-api-take-2.html](http://swanson.github.com/blog/2011/07/23/digging-around-the-github-api-take-2.html)）

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-07T06:15:29.257

请注意，自 2013 年 5 月以来，您有一个[可用的 CRUD API](https://github.com/blog/1498-file-crud-and-repository-statistics-now-available-in-the-api)：

这包括一个[文件更新 API](https://developer.github.com/v3/repos/contents/#create-or-update-a-file)

```
{
  "message": "my commit message",
  "committer": {
    "name": "Scott Chacon",
    "email": "schacon@gmail.com"
  },
  "content": "bXkgdXBkYXRlZCBmaWxlIGNvbnRlbnRz",
  "sha": "329688480d39049927147c162b9d2deaf885005f"
} 
```

（内容为更新后的文件内容，Base64 编码。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-18T10:01:57.547

这个我也很疑惑！

提交新内容实际上是一个多步骤的过程，使用它们的低级和强大的 API。

这是我分享一个解决方案[的要点。](https://gist.github.com/2935203)请注意，有些东西是硬编码的，例如分支名称“master”。

请随时分叉和改进要点，或者如果您在运行此程序时遇到问题，请告诉我。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-09-22T20:16:22.837

> 提交新内容实际上是一个多步骤的过程，使用它们的低级和强大的 API

实际上，从 2021 年 9 月（9 年后）开始，它不是，而是使用 GraphQL [GitHub API v4](https://docs.github.com/en/graphql)（而不是[GitHub API v3](http://GitHub%20API%20v3)）

看：

> ## [用于创作提交的更简单的 API](https://github.blog/changelog/2021-09-13-a-simpler-api-for-authoring-commits/)：
> 
> 新的 GraphQL 突变[`createCommitOnBranch`](https://docs.github.com/en/graphql/reference/mutations#createcommitonbranch)使在存储库的分支中添加、更新和删除文件变得更加容易。
> 
> [与现有的Git 数据库 REST API](https://docs.github.com/en/rest/reference/git)相比，这个新的 API 提供了一种更简单的方式来提交更改。
> 使用新的`createCommitOnBranch`突变，您无需在创建提交之前手动创建 blob 和树。这允许您在单个 API 调用中添加、更新或删除多个文件。
> 
> 使用新 API 编写的提交会自动进行 GPG 签名，并在 GitHub UI中[标记为已验证。](https://docs.github.com/en/github/authenticating-to-github/managing-commit-signature-verification/about-commit-signature-verification)GitHub 应用程序可以使用突变直接或[代表用户](https://docs.github.com/en/developers/apps/building-github-apps/identifying-and-authorizing-users-for-github-apps#user-to-server-requests)创作提交。

```
$ curl https://api.github.com/graphql \ 
       -s -H "Authorization: bearer $TOKEN"
       --data @- <<GRAPHQL | jq \
         '.data.createCommitOnBranch.commit.url[0:56]'
{
  "query": "mutation (\$input: CreateCommitOnBranchInput!) {
    createCommitOnBranch(input: \$input) { commit { url } } }",

  "variables": {
    "input": {
      "branch": {
        "repositoryNameWithOwner": "demo-githubs/test",
        "branchName": "main"
      },
      "message": {"headline": "Hello from GraphQL!" },
      "fileChanges": {
        "additions": [{
            "path": "GraphQL.md",
            "contents": "`echo 'Hello, GraphQL! | base64`"
        }],
        "deletions": [{ "path": "REST.txt" }]
      },
      "expectedHeadOid": "git rev-parse HEAD"
}}} 
```

[![图形](../Images/cd7e4d66987062fab71fe8fbf94408ec.png)](https://i.stack.imgur.com/1ield.gif)

# javascript - Google Maps API V3 信息窗口错误：“信息窗口未定义”

> ID：11301990
> 
> 赞同：1
> 
> 时间：2012-07-02T22:26:06.693
> 
> 标签：javascript, google-maps, google-maps-api-3, google-maps-markers

我的字典中有一个 Google Maps API 标记列表，名为`markerList`. 所有这些都被放置在地图上。然后我创建一个我所有的数组`infowindow`。然后我需要`addListener`为它们中的每一个设置，以便在地图上单击标记时，它会调用`infowindow.open`正确的地图和信息窗口。

不幸的是，当我单击标记时，我在 firebug 控制台中收到以下错误：

```
infowindow is not defined

infowindow.open(map,infowindowList[window]); 
```

这是我的代码：

```
 var infowindowList = {};

 for (var aMarker in markerList){
     infowindowList[aMarker] = new google.maps.InfoWindow({
          content: "This is a test!",
          size: new google.maps.Size(50,50)
     });

     console.log(infowindowList[aMarker]);
 }

 console.log("Done creating infowindowList...\n...Adding listeners");

 for (var window in infowindowList){
      google.maps.event.addListener(markerList[window], 'click', function() {
          // infowindow.open(map,infowindowList[window]); // wrong, see Edit
              infowindowList[window].open(map,markerList[window]);
      });
      console.log("added listener for window: ", infowindowList[window]);

 } 
```

~~**我认为**这是因为在`google.maps.event.addListener(markerList[window]...`函数中，我将要在单击时运行的函数注册为`infowindow.open(map,infowindowList[window])`，但是该值 ,`window`是函数的本地值，因此当我单击标记时，该函数不起作用，因为它不知道是什么`window`。那是对的吗？~~

编辑：正如 geocodezip 指出的那样，`infowindow`不存在。所以我把它改成了`infowindowList[window].open(map,markerList[window]);`，也把最后一个参数改成了 ，`markerlist[window]`因为它应该是一个作为参数的标记，而不是另一个信息窗口。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T22:54:50.393

您收到错误“未定义信息窗口”，因为未定义信息窗口变量。它当然没有在您发布的代码中定义。

通常它是全局定义的，因此有一个信息窗口（v2 默认行为），但在这种情况下，您仍然必须定义并创建它（通常在 onload 函数中）。

[工作示例](http://www.geocodezip.com/v3_MW_example_map1.html)

# c++ - 我想以 Order(1) 或 (nlogn) 的顺序生成序列 1,3,8,22,60 ,164 的第 n 项

> ID：11301992
> 
> 赞同：0
> 
> 时间：2012-07-02T22:26:20.993
> 
> 标签：c++, sequences, exponentiation

这个序列满足 a(n+2) = 2 a(n+1) + 2 a(n)。

还有a(n)=[(1+sqrt(3))^(n+2)-(1-sqrt(3))^(n+2)]/(4sqrt(3))。

我正在使用 C++，n 可以在 1 到 10^9 之间变化。我需要模 (10^9)+7 的答案，但这里的速度非常重要

对于 > 10^7 的数字，我的公式 1 代码很慢

```
#include <iostream>
#define big unsigned long long int
#include<stdlib.h>
int ans[100000001]={0};

big m  =1000000007;
using namespace std;
int main()
{
    //cout << "Hello world!" << endl;
    big t,n;
    cin>>t;
    big a,b,c;
    a=1;
    b=3;
    c=8;
    ans[0]=0;
    ans[1]=1;
    ans[2]=3;
    ans[3]=8;
    for(big i=3;i<=100000000;i++)
        {
            ans[i]=(((((ans[i-2])+(ans[i-1])))%m)<<1)%m;

        }

//    while(t--)
//    {
//        int f=0;
//        cin>>n;
//        if(n==1){
//        cout<<1<<endl;f++;}
//        if(n==2){
//        cout<<3<<endl;
//        f++;
//        }
//        if(!f){
//        a=1;
//        b=3;
//        c=8;
//        for(big i=3;i<=n;i++)
//        {
//            c=(((((a)+(b
//                         )))%m)<<1)%m;
//            a=b%m ;
//            b=c%m;
//        }
//        cout<<ans[n]<<endl;
//        }
//    }
while(t--)
{
    cin>>n;
    if(n<=100000000)
    cout<<ans[n]<<endl;
    else
    cout<<rand()%m;
}
    return 0;
} 
```

我想要一个更快的方法。如何使用第二个公式计算第 n 项。是否有任何技巧可以快速计算小数的模幂？你对更快地生成这个序列有什么建议吗？

请帮忙

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-02T22:33:14.967

您可以使用矩阵方法以 O(log n) 步计算具有线性递归关系的序列值。在这种情况下，递归矩阵是

```
2 2
1 0 
```

`n`然后通过`n`将该矩阵的 -th 次方与两个初始值相乘来获得序列的-th 项。

重复立即转化为

```
|x_n    |   |2 2|   |x_(n-1)|
|x_(n-1)| = |1 0| * |x_(n-2)| 
```

因此

```
|x_(n+1)|   |2 2|^n   |x_1|
|x_n    | = |1 0|   * |x_0|. 
```

在这种情况下，初始条件给出，`x_1 = 1, x_2 = 3`导致`x_0 = 0.5`，一个非整数值，因此计算应该是

```
|x_(n+1)|   |2 2|^(n-1)   |x_2|
|x_n    | = |1 0|       * |x_1|. 
```

要获得模某个数字的值，请计算该数字模的矩阵的幂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T22:41:29.427

我不想破坏探索算法谜题的乐趣，所以我只是给你一个开始的提示：你所拥有的基本上是一个斐波那契数列，其中包含一些令人困惑的元素。

# postgresql - 使用 php 进行 Postgresql 文本搜索

> ID：11301993
> 
> 赞同：1
> 
> 时间：2012-07-02T22:26:27.827
> 
> 标签：postgresql

我是 postgresql 和 php 的新手，但我希望实现全文搜索并且在查询文本搜索的基本查询时遇到问题，我想在屏幕上打印结果，因为它会在 postgres 本身中显示，帮助会很大.

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T13:17:51.680

您的问题中有很多概念，让我们来看看：

首先你需要[创建表](http://www.postgresql.org/docs/8.4/static/sql-createtable.html)：

```
CREATE TABLE person (
  id SERIAL PRIMARY KEY,
  fullname TEXT NOT NULL,
  dob DATE,
  bio TEXT NOT NULL
); 
```

插入一些测试数据：

```
INSERT INTO person (fullname, dob, bio) VALUES
('Steve Jobs', '1955-02-24', 'Steven Paul "Steve" Jobs...'),
('Tutankhamun', NULL, 'Tutankhamun (alternately spelled...'); 
```

为了使搜索更快，您应该在您计划搜索的列上创建一个全文索引：

```
CREATE INDEX person_fts ON person USING gin(to_tsvector('english', bio)); 
```

在您的 PHP 脚本中，您必须[连接到 PostgreSQL](http://php.net/manual/en/function.pg-connect.php)：

```
$dbconn = pg_connect("dbname=mary"); 
```

[现在您可以使用pg_query()](http://www.php.net/manual/en/function.pg-query.php)进行全文搜索：

```
$words = "steve jobs";
$sql = "SELECT * FROM person WHERE to_tsvector(bio) @@ to_tsquery('$words')";
$query = pg_query($dbconn, $sql);
if(!$query)
  die("An error occured.\n"); 
```

如果您想返回您在 psql 中看到的所有内容，则将记录呈现到[TABLE](http://www.w3schools.com/html/html_tables.asp)：

```
echo "<table>";
while($row = pg_fetch_row($result)) {
  echo "<tr>";
  foreach($row as $cell)
    echo "<td>{$cell}</td>";
  echo "</tr>";
}
echo "</table>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-22T21:38:40.677

```
<?php
$conn = pg_connect('host=localhost port=5432 dbname=test user=lamb password=bar');

$search = 'some words';

$result = pg_query($conn, "SELECT id, text FROM some_table WHERE text ILIKE '%$search%'");
?>

<table>
  <tr>
    <th>ID</th>
    <th>Text</th>
  </tr>
  <?php foreach($array = pg_fetch_all_columns($result) as $value): ?>
  <tr>
    <td><?php echo $value[0]; ?></td>
    <td><?php echo $value[1]; ?></td>
  </tr>
  <?php endforeach; ?>
</table> 
```

# android - Android apk 构建的条件资源包含/排除

> ID：11301994
> 
> 赞同：8
> 
> 时间：2012-07-02T22:26:38.207
> 
> 标签：android, android-resources, apk

我一直回到这个问题，因为似乎没有一个干净的解决方案。有没有人有一个很好的策略来从 Android 的子项目中排除资源？

我有两种情况：

1 - 基础库项目有 en、es 等的本地化文件。

--子项目1使用所有本地化，一切都很好

--子项目 2 仅本地化为英语，但最终的 .apk 将由于父资源而进行部分本地化（尽管 ADT19 左右添加了 Lint 规则来警告/防止您这样做）。

我现在唯一的解决方案是有一个单独的本地化父库，并且只将它包含在子项目 1 中。如果你有很多库项目，这将是一个很大的痛苦。

2 - 排除特定于构建的资源。我有一些仅适用于我的应用程序的特定于 Nook 的构建所需的图像，这些图像由标志触发。条件代码效果很好，但总是包含资源。

我不想为我的每一个应用程序创建另一个子项目。有没有办法设置构建/编译标志来修剪特定的图像资源，这样它们就不会进入最终的.apk？

第二个问题可能是我特有的，但我很惊讶我找不到关于第一点的任何好的讨论。没有其他开发人员只本地化一些应用程序吗？还是大多数人只是忽略了这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T22:47:42.607

> 1 - 基础库项目有 en、es 等的本地化文件。

你有两个项目使用这个库，其中只有一个需要所有的翻译。因此，这些翻译可能在使用库并需要翻译的项目中，而不是在库本身中。这与任何其他项目自定义库资源（例如，替换图标、替换布局）没有什么不同。

现在，一旦您开始进行更复杂的混合（例如，两个项目需要翻译而第三个不需要），您就会开始遇到问题。

> 排除特定于构建的资源。我有一些仅适用于我的应用程序的特定于 Nook 的构建所需的图像，这些图像由标志触发。条件代码效果很好，但总是包含资源。

[Xav 和我在这个问题上](http://code.google.com/p/android/issues/detail?id=30895)聊了一点条件资源。他的重点是调试与生产（资源相当于`BuildConfig.DEBUG`），但听起来更灵活的东西是可能的。

这两件事都可以通过自定义发布构建脚本来处理。在正常的调试版本中，您将不理会它；在生产构建中，在编译、签名和压缩对齐之前，让 Ant 脚本处理项目的副本，修剪掉不需要的目录。

# recursion - 在 Clojure 中将结果累积到向量中的最佳方法？（纯函数式代码看起来丑陋而冗长）

> ID：11301998
> 
> 赞同：23
> 
> 时间：2012-07-02T22:26:56.127
> 
> 标签：recursion, clojure, functional-programming, lisp

...也许使用可变数据的命令式编程已经深入我的大脑，但我发现在 Clojure 中构建数据向量的代码冗长、笨拙且令人费解。肯定有更好的办法！

在 Ruby 中，我可能会编写如下代码：

```
results = []
a_collection.each do |x|
  x.nested_collection.each do |y|
    next if some_condition_holds
    results << y
  end
end 
```

在 Clojure 中，我不知道有比使用递归函数更好的方法，也许像下面的（可怕的）代码：

```
; NEWBIE ALERT! NEWBIE ALERT!
(loop [results   []
       remaining a_collection]
  (if (empty? remaining)
      results
      (recur
        (loop [results results
               nested  (nested_collection (first remaining))]
           (if (empty? nested)
               results
               (if (some_condition_holds)
                   (recur results (rest nested))
                   (recur (conj results (first nested)) (rest nested))))) 
        (rest remaining)))) 
```

如果没有可变数据和迭代循环，您需要使用递归来构建集合。每个这样的递归函数都需要一个`(empty?)`保护子句，等等。整个事情是如此重复，让我想尖叫。

在简单的情况下，`map`就足够了，但我正在考虑存在多个嵌套级别的情况，并且在每个级别上，可能存在需要跳过迭代的条件。

在 Common Lisp 中，我可能会使用`loop`宏或`mapcan`. Clojure没有类似的东西`mapcan`吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-03T00:01:50.600

按照我认为选项看起来有多好的降序排列：

```
(for [x coll,
      y (nested-collection x)
      :when (not (some-condition-holds y))]
  y) 
```

或者，如果您宁愿使用函数构建它，`map`而`mapcat`不是使用`for`语法：

```
(mapcat (fn [x]
          (remove some-condition-holds
                  (nested-collection x)))
        coll) 
```

如果你真的热衷于它，你也可以用偏函数应用和组合来构建它：

```
(mapcat (comp (partial remove some-condition-holds)
              nested-collection)
        coll) 
```

这第三种风格在 Clojure 中读起来不太好，尽管在其他一些语言中的等效代码非常好。例如，在 Haskell 中：

```
coll >>= (filter (not . someConditionHolds) . nestedCollection) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-03T00:59:13.853

```
(mapcat (fn [y] (filter condition y)) x) 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-03T05:20:24.197

其他人已经提供了有关如何使用 FP 概念（例如使用高阶函数）解决特定问题的答案。如果您分析导致您现有代码的思维过程，并将其与其他人提供的 FP 解决方案进行比较，您会发现每当您想到 - “有一个变量来存储处理后的结果” - 它都会导致命令式 OR一步一步的解决方案，因此您的 Clojure 代码主要是必要的，因为您认为将结果存储为“向量变量”。这种思维不允许你应用基于“表达评估”和“通过组合解决问题”的FP概念

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-02T22:41:46.047

高阶函数确实可以帮助它变得更漂亮，尽管它确实需要一段时间来适应序列的思考和序列的转换。

有很多方法可以写这个：

```
user> (into [] a_colletion)
[0 1 2 3 4 5 6 7 8 9]

user> (vec a_colletion)
[0 1 2 3 4 5 6 7 8 9]

user> (for [x a_colletion :when (even? x)] x) 
(0 2 4 6 8) 
```

一个更复杂的例子可能看起来像这样：

```
(flatten (for [x (map extract-from-nested-collection a_collection)
                 :when (test-conditions? x)]
            x)) 
```

做一个嵌套集合

```
user> (def a_collection (map #(reductions + (range %)) (range 1 5)))
#'user/a_collection 
user> a_collection
((0) (0 1) (0 1 3) (0 1 3 6)) 
```

从 a_collection 的每个元素中检索嵌套集合并跳过其中一些：

```
user> (map #(filter pos? %) a_collection)
(() (1) (1 3) (1 3 6)) 
```

将嵌套集合附加在一起

```
user> (flatten (map #(filter pos? %) a_collection))
(1 1 3 1 3 6) 
```

从展平的集合中过滤一些大于 3 的东西，然后将它们中的每一个平方

```
user> (for [x (flatten (map #(filter pos? %) a_collection))
              :when (<= x 3)]
           (* x x))
(1 1 9 1 9)
user> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-03T08:01:29.657

如果您想遵循惯用的功能样式并产生惰性序列，[amalloy 的答案可能是最好的。](https://stackoverflow.com/a/11302808/214010)

如果您真的对命令式构造向量（而不是惰性序列）感兴趣，我可能会使用 atom 和 doseq 如下所示：

```
(let [v (atom [])]
  (doseq [x (range 5)
          y (range 5)]
    (if (> y x)
      (swap! v conj (str x y))))
  @v)

=> ["01" "02" "03" "04" "12" "13" "14" "23" "24" "34"] 
```

如您所见，这最终在结构上与 Ruby 代码非常相似。

也可以使用 reduce 来做到这一点，但是当只有一个输入序列时这是最合适的，例如：

```
(reduce
  (fn [v x] 
    (if (even? x)
      (conj v x)
      v))
  []
  (range 20))

=> [0 2 4 6 8 10 12 14 16 18] 
```

# php - Symfony2 Formbuilder自动转义？

> ID：11301999
> 
> 赞同：5
> 
> 时间：2012-07-02T22:26:56.037
> 
> 标签：php, symfony, twig

`&nbsp;`在我的一些选择中，我有一个硬空格 ( )。不知何故，在某个地方，他们正在逃脱。我试过了：

```
{% autoescape false %}
    {{ form_widget(foobar) }}
{% endautoescape %} 
```

也

```
{{ form_widget(foobar)|raw }} 
```

以及以下在 Twig 下`config.yml`

```
autoescape: false 
```

然而，选择字段仍然呈现为`&nbsp;Choice Text Here`而不是`Choice Text Here`，并且在源代码中它们被编码为`&amp;nbsp;Choice Text Here`

在控制器中我有：

```
$form   ->add('foo', 'choice', array(
            'label' => 'Foo Label',
            'choices'  => $fooChoices,
            'required' => true));
$form = $form->getForm();
$foobar = $form->createView(); 
```

如果`print_r` `$fooChoices`我得到：

```
Array ( [1] =>  60# FooBar [5] =>  60# BatBar [11] =>  60# DooWop ) 
```

这向我展示了正确的`&nbsp;`（注意 60 年代前面的双倍空格）。在 FormBuilder 和渲染之间的某个地方，它被转义了。

表单生成器中是否有内置转义？

我推断的是，通过`$form->createView()`数据呈现表单视图的点仍然是未转义的。但是，当它通过 form_widget 到达 Twig 时，它已经被逃脱了。这样做`form_widget(foobar)|raw`表明了这一点。

**编辑：我添加了一个解决方法作为答案，但我仍然有兴趣接受一个解释如何防止完全发生初始转义的答案。**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-25T21:36:43.553

我在无线电标签上遇到了同样的问题。这解决了它。

```
{% for child in form %}

  {% autoescape false %}
    {{ child.vars.label }}
  {% endautoescape %}

  {{ form_widget(child) }}

{% endfor %} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-03T17:36:55.660

我最终创建了一个 Twig 扩展来解码编码的 HTML 并将其添加为服务：

**Vendor/Bundle/Extensions/Twig 中的扩展**

```
namespace Vendor\Bundle\Extensions\Twig;

class HTMLDecodeTwigExtension extends \Twig_Extension 
{

    public function getFilters()
    {
        return array(
            'htmldecode' => new \Twig_Filter_Method($this, 'htmldecode', array(
                'is_safe' => array('html'))
            ),
        );
    }

    // your custom function
    public function htmldecode($string)
    {
        return html_entity_decode($string);
    }

    // Name for Service
    public function getName()
    {
        return 'html_decode_twig_extension';
    }
} 
```

**在 Vendor/Bundle/Resources/config/services.yml 中注册服务**

```
vendor_bundle.htmldecode:
    class:  Vendor\Bundle\Extensions\Twig\HTMLDecodeTwigExtension
    tags:
      - { name: twig.extension } 
```

**用法：**

```
{{ form_widget(foobar)|htmldecode }} 
```

我仍然不知道在哪里执行转义，因为它只对数据本身执行（我尝试创建一个数据事件来修改表单的数据），但这至少给了我正在寻找的最终结果为了。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-02-09T23:08:20.900

你真正应该做的是覆盖 form_label 模板

```
{% block form_label %}
{% spaceless %}
    {% if label is not sameas(false) %}
        {% if not compound %}
            {% set label_attr = label_attr|merge({'for': id}) %}
        {% endif %}
        {% if required %}
            {% set label_attr = label_attr|merge({'class': (label_attr.class|default('') ~ ' required')|trim}) %}
        {% endif %}
        {% if label is empty %}
            {% set label = name|humanize %}
        {% endif %}
        {% autoescape false %}<label{% for attrname, attrvalue in label_attr %} {{ attrname }}="{{ attrvalue }}"{% endfor %}>{{ label|trans({}, translation_domain) }}</label>{% endautoescape %}
    {% endif %}
{% endspaceless %}
{% endblock form_label %} 
```

请注意添加了自动转义部分。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T13:47:34.150

可能不是最好的解决方案，但是在您的表单构造函数中这样做呢（我们强制`&nbsp;`成为空格字符）：

```
public function __construct() {

    foreach ($this->fooChoices as $key => $fooChoice) {

        $this->fooChoices[$key] = html_entity_decode($fooChoice, ENT_NOQUOTES, 'UTF-8');
    }
} 
```