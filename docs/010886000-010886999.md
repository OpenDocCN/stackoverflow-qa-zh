# StackOverflow 问答 10886000-10886999

# git - Git和日志顺序

> ID：10886001
> 
> 赞同：9
> 
> 时间：2012-06-04T18:09:09.737
> 
> 标签：git

我试图从“git log”输出创建一个线性顺序，但我所有的尝试都失败了。我需要做的是将提交映射到包含该提交的下一个版本。我不能跑

```
git tag --contains <commit> 
```

对于每个提交，因为我们的存储库包含非常大量的提交（超过 300,000）。

首先我尝试使用

```
git log --pretty=format:"%ct%H" | sort --key=1,10 
```

根据提交时间获得线性顺序。但是，这似乎不能产生 100% 准确的结果。这引出了我的第一个问题：

Q1) 当提交被推送到主存储库时，git 如何存储提交时间？它是否以 UTC 格式存储每个提交的当前机器时间？

我还查看了“git help log”，文档指出，默认情况下，git log 按时间顺序列出提交。在我的项目中，我检查了我是否引入了任何错误，但据我所知，代码是正确的，并且 git log 给出的时间顺序不是线性顺序。最后，我的问题是？

Q2) 鉴于 git 不存储修订号，如何从“git log”中获得线性顺序？

谢谢 ：）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-26T17:12:04.407

### #1：当提交被推送到主存储库时，git 如何存储提交时间？它是否以 UTC 格式存储每个提交的当前机器时间？

来自[`man git-commit`](https://www.kernel.org/pub/software/scm/git/docs/git-commit.html#_date_formats)：

> Git 内部格式
> 为 [unix timestamp] [timezone offset]，其中 [unix timestamp] 是自 UNIX 纪元以来的秒数。[时区偏移] 是与 UTC 的正偏移或负偏移。

基于此，git 内部使用的时间格式是[UNIX 纪元时间](http://en.wikipedia.org/wiki/Unix_time)，包括机器的 UTC 偏移量。

### #2：鉴于 git 不存储修订号，如何从“git log”中获得线性顺序？

您使用的方法 ( `git log --pretty=format:"%ct%H"`) 将从*所有*已合并到当前分支的分支中提取数据。

这使得“线性顺序”有些困难。考虑以下 [[来源：git-scm.org](http://git-scm.com/book/en/Git-Branching-Branching-Workflows) ]：

![多个分支，预合并](../Images/046e92aa3007133332438e8e4c67c29a.png)

所以，这里我们正在处理几个“主题分支”。然后我们决定保留一些 (`dumbidea`和`iss91v2`)，丢弃其他 ( `iss91`)。所以我们丢弃`C5`and `C6`，保留其他提交，我们的合并后历史看起来像这样 [[来源：git-scm.org](http://git-scm.com/book/en/Git-Branching-Branching-Workflows) ]：

![合并后](../Images/6fa7421510fb078f76978594cbe22234.png)

（箭头指向*;**是* 提交和的子*级*）。`children` *`parents``C14`*`C13``C11`**

 **所以现在我们有一个单一的`HEAD`提交，为了争论，我们假设我们将作为 a`RELEASE1`或其他东西发布。所以，对于这个问题：我们现在如何才能拥有这段历史，提取一个**线性**的、按时间顺序正确的提交列表？

简单的答案：我不相信你可以 - 或者，如果你这样做，我不相信它会是你想要的。

您*可以*按时间对提交进行线性排序：

```
git log --pretty=format:"%ct %H" | sort --key=1,10 
```

这将为您提供对应于以下内容的列表：

```
C1
C2
... snip ...
C13
C14 
```

但是请注意，这*实际上不是线性历史！*这是因为我们将一些同时创建*的*分支合并在一起。我们无法提取`C14`（我们的`HEAD`）父母的线性历史，因为没有一个 - 它是两个分支的孩子，而不是单个提交的孩子，这不是线性关系。

所以，你争辩说，也许我可以只得到一个分支的线性历史？`C14 -> C13 ... C3 -> C1`， 例如？

这也至少非常困难并且（更有可能）是不可能的。

当我们有多个分支加入（3 路或更多路合并）时，这个问题会更加复杂。[这个问题](https://stackoverflow.com/questions/4629358/git-show-only-history-of-one-branch-in-git-log)更详细地说明了您无法提取“单个分支”历史的原因 - 当您查看合并提交的父级时，您如何确定哪个是“单个分支”以及哪个是“加入”分支吗？

* * *

说了这么多，例如，如果您以图形格式检查这个小存储库的日志：（我确实剪掉了一些没用的提交）

```
 zsh% git log --graph --all --format=format:'%C(blue)%h%C(reset) - %C(green)(%cr)%C(reset)                %C(yellow)%d%C(reset)' --abbrev-commit --date=relative
* 3cf5f06 - (8 weeks ago)  (origin/master, origin/HEAD, master)
* a3a3205 - (4 months ago) 
* c033bf9 - (4 months ago)  (origin/svg)
* ccee435 - (4 months ago) 
*   f08bc1e - (4 months ago) 
|\  
| * 48c4406 - (5 months ago) 
* | 203eeaa - (4 months ago) 
* | 5fb0ea9 - (5 months ago) 
|/  
* 39bccb8 - (5 months ago) 
```

请注意，这段历史*是*按时间顺序排列的；不过，树枝还没有被“压扁”成一个，所以看起来有点时髦。这些提交中的每一个都包含在当前`HEAD`( `master`, `origin/master`) 中。这很明显，因为历史中的两个分支都已合并在一起（合并在`f08bc1e`）。

### #3：我需要做的是将提交映射到包含该提交的下一个版本

如果您对*单个提交*感兴趣，[这个问题](https://stackoverflow.com/questions/1419623/git-how-to-list-branches-that-contain-a-given-commit)，或者[您的版本是否被标记](https://stackoverflow.com/questions/9018632/whats-the-best-way-to-find-if-a-given-git-commit-is-in-a-tagged-release)会有所帮助。

阅读这个问题，您*可能*希望将*每个提交*映射到一个版本；这是很多工作，我对此无能为力 - 不过，我认为您不需要检查每个提交，因为分支将被合并，并且如果线性分支的头部在发布中，线性父母也将是。除非你做过樱桃采摘或类似的事情。

如果您按时间排序，然后检查所有比您的最旧版本更早的提交，记录该提交 ID（如果它包含在最旧版本中，然后是第二旧版本等），并在找到包含它的版本时从列表中删除该提交, 你最多必须检查`number of releases`* `number of commits`; 在最坏的情况下，任何版本都没有提交。最好的情况是，发布包含比自身更早的每个提交，即`300,000`检查。仍然很多，但是（在我幼稚的头脑中）是可行的。

（为冗长的回复道歉）。**

# python - Python“列表”对象不可调用

> ID：10886003
> 
> 赞同：3
> 
> 时间：2012-06-04T18:09:27.110
> 
> 标签：python, pyscripter

我尝试在 Pyscripter 中运行以下代码，但它一直返回错误“'list' object is not callable”。我通过 Python shell 运行代码，它运行得非常好。我不太明白为什么它在 Pyscripter 中不起作用。另外，我使用的是 Python 2.7。

```
import itertools
print list(itertools.permutations([1,2,3,4], 2)) 
```

即使在 Pyscripter 中创建一个简单的列表也会返回相同的错误。

```
list() 
```

提前致谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-04T18:11:28.573

几乎可以肯定你已经将名单反弹到一个列表实例：

```
>>> import itertools
>>> print list(itertools.permutations([1,2,3,4], 2))
[(1, 2), (1, 3), (1, 4), (2, 1), (2, 3), (2, 4), (3, 1), (3, 2), (3, 4), (4, 1), (4, 2), (4, 3)]
>>> 
>>> list = [2,3,4]
>>> list(itertools.permutations([1,2,3,4], 2))
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: 'list' object is not callable 
```

不要调用列表`list`或字符串`str`等。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-04T18:14:06.950

您在之前的某个地方创建了一个列表并将其命名为`list`。这是一个坏主意。该名称`list`在 Python 中没有特殊处理。当您启动解释器时，`list`命名列表类型，但如果您随后命名其他内容`list`，则`list`不再是列表类型的名称，因为名称一次只能引用一件事。

因此，当您编写`list()`期望创建一个新列表（即实例化列表类型）时，Python 会做它一直做的事情：它查找 name `list`，然后尝试将`()`（即`__call__`）应用于具有该名称的任何内容。由于`list`now 引用*了其他一些 list*`'list' objects are not callable` ，因此正如错误消息所说，这将失败， as 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-15T14:09:20.740

单词**list**和**str**是 Python 中的关键字。这就是脚本出现错误的原因。您可以尝试以下方法：

```
import itertools

print(list(itertools.permutations([1,2,3,4], 2)))

List = [1,2,3,4,5,6]
print(list(itertools.permutations(List, 2))) 
```

干杯！！

# javascript - raphael.js 中的拖动约束和缩放

> ID：10886005
> 
> 赞同：2
> 
> 时间：2012-06-04T18:09:30.450
> 
> 标签：javascript, jquery, raphael

使用 PAN 使用 Raphael.js 2.0 获得基本的缩放/平移效果没有问题：

```
set = ( // set of elements, contained in a rectangle)
var start = function () {
        set.oBB = set.getBBox();
},
move = function (dx, dy) {
        var bb = set.getBBox();
                set.translate(set.oBB.x - bb.x + dx, set.oBB.y - bb.y + dy);
},
up = function() { // do stuff };
set.drag(move, start, up); 
```

和缩放：

```
//before 
paper.setViewBox(0,0, 500,500, false);
//after
paper.setViewBox(0,0, 200, 200, false); 
```

但我有两个大问题。这是针对拉斐尔创建的 svg 对象而不是图像...

*   首先，缩放后平移不是“平滑”：我拖动一点，矩形移动了很多。我走得越远，运动就越糟糕。缩放后可以以某种方式缩放拖动吗？
*   其次，我该如何安排，以便平移缩放的矩形不会让我将其移出视口？在 jquery 中，我可以使用约束来执行此操作，并且我尝试使用上面的 set.translate 函数来包含约束，但我无处可去......

任何建议将不胜感激，或者在 Raphael.js 中已经存在用于执行此操作的库？我查看了 raphael-spz，它似乎没有解决我上面的任何一个问题。

我想要的基本上是这个[http://dannyvankooten.com/demo/draggable-image-map-with-zoom/](http://dannyvankooten.com/demo/draggable-image-map-with-zoom/)但对于 Raphael。他正在使用 jquery ui draggable ... 我似乎无法在 Raphael 工作。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T19:22:05.357

因为您已经缩放了视图框，所以您可能还需要缩放拖动值，为了计算边界，您可以与视口进行比较，例如，

```
move = function (dx, dy) {
        var bb = set.getBBox(),
            //Move relative to viewport scale
            x = dx/scale,
            y = dy/scale,
            //Lower bounds
            xf = Math.max(0, set.oBB.x - bb.x + x),
            yf = Math.max(0, set.oBB.y - bb.y + y);
         //upper bounds
         xf = Math.min(viewBoxWidth, xf + bb.width) - bb.width;
         yf = Math.min(viewBoxHeight, yf + bb.height) - bb.height;

         set.translate(xf, yf);
} 
```

`scale`是您的视图框相对于您的纸张不同的因素。IE（`200/500)`

# .net - Matlab .net互操作类层次结构问题

> ID：10886008
> 
> 赞同：1
> 
> 时间：2012-06-04T18:09:36.017
> 
> 标签：.net, matlab, types

由于 matlab 是弱类型语言，而 C# 是强类型语言，所以它们的互操作并不像我想要的那样自然，因此我遇到了一些麻烦，希望在这里能得到一些建议。

就我而言，我想在 matlab 中调用一个 .NET 库。那个 .NET 库有很多 OO 结构。我的意图是我现在不想从 C# 库方面更改任何内容。我只是将相关程序集添加到matlab中。

例如，在我的 .net 库中，我有

```
class A
{
     method1 //not static method
}

class B : A
{
     ...
} 
```

在我的matlab 代码中，我检索了B 类的一个对象，例如**b**，然后我想调用这个对象的A 类的method1。我的自然编码行为将调用：***b.method1(val);*** .

但是，Matlab 会给我以下错误，这让我很不高兴： **错误：没有为 B 类找到匹配签名的方法“method1”**

我可能会发布一些关于这个问题的研究：

1.  我没有在 matlab 端进行任何 OO 编程，所有这些 OO 类仅驻留在 dll 中。而且我也不想更改 dll 部分的任何内容。

2.  我看到一些帖子可以通过子类的类调用超类的方法：**func@superclass(val)**。但是，我认为它不适用于我的情况。

3.  我在 github 上的 mongo-matlab 之间看到了另一个关于驱动程序的帖子。我没有看它的细节，它可能会给我我的答案，但我希望在我深入那个代码部分之前能得到一些建议。

谢谢

# android - App Engine 几个用于 Databastore 的数据库

> ID：10886013
> 
> 赞同：0
> 
> 时间：2012-06-04T18:09:58.920
> 
> 标签：android, sql, google-app-engine

我正在考虑使用 Google App Engine。

对于我的项目，我需要存储在不同数据库中的多个数据。到目前为止，我一直在阅读 AppEngine 仅提供一个数据库来存储和跟踪用户。

我的问题是我需要有多个数据库来存储相同的数据，但只存储与其标准相关的数据。

AppEngine 是解决这个问题的方法吗？顺便说一下，它是一个我将使用的 android 应用程序。还是我应该有自己的服务器？如果是这样，我需要实施什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T18:28:55.073

你能解释一下，为什么你需要一个以上的数据库。您可以使用命名空间来创建多租户环境。 [https://developers.google.com/appengine/docs/python/multitenancy/multitenancy](https://developers.google.com/appengine/docs/python/multitenancy/multitenancy)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T19:20:23.650

您定义的每个实体（请参阅[https://developers.google.com/appengine/docs/python/datastore/entities](https://developers.google.com/appengine/docs/python/datastore/entities)）在概念上就像一个表——实体的字段相当于表中的列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T19:37:46.863

因此，在阅读了@Moishe 在他的回答中提供的链接中的文档后，我找到了答案。

我只是想我会在这里发布一个答案，以便将来节省一些时间。

这是一个名为 employees 的类，它接受 App 引擎的 Datastore 参数。

```
//Class name Employee
class Employee(db.Model):

//Employee information we want to enter into the Employee entity.
first_name = db.StringProperty()
last_name = db.StringProperty()
hire_date = db.DateProperty()
attended_hr_training = db.BooleanProperty()

//Set employees information to the Database Model to be inserted into the Datastore.
employee = Employee(first_name='Antonio',
                last_name='Salieri')

employee.hire_date = datetime.datetime.now().date()
employee.attended_hr_training = True

//Like committ..this initiates the insertion of the information you put into the database store mode. This works sorta like androids bundle or SharedPreference you put the information into the datastore and then committ it or save it. 

employee.put() 
```

# jquery - 从jquery mobile中的按钮中删除圆角

> ID：10886014
> 
> 赞同：1
> 
> 时间：2012-06-04T18:10:00.700
> 
> 标签：jquery, jquery-mobile

我在单/多页 jquerymobile 页面模板中有以下按钮标记。

```
<a href="#" data-role="button" data-icon="arrow-r" data-iconpos="right" >About Us</a> 
```

我需要使用 jquerymobile 文档中给出的按钮选项禁用此按钮的圆角。

我已经尝试`$('a').buttonMarkup({ corners: "false" })`过每个事件，例如 pagebeforecreate、pageinit、pagecreate 和 mobileinit

我从来没有让它工作，并且一直在努力让它工作很长时间。我现在不想使用数据属性 data-corners="false" 。

请提出任何想法

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T09:42:55.867

这应该工作：`$('a').buttonMarkup({ corners: false })`注意“假”不应该是一个字符串。

无论如何，如果您想将其设为默认行为，您可以尝试以下操作：

```
$(document).bind('mobileinit', function(){
    $.fn.buttonMarkup.defaults.corners=false;
}); 
```

`data-corners="false"`这应该与每个按钮上的相同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T18:52:44.890

您可以在您的 css 中覆盖 JqueryMobile css

正常jqm

```
.ui-btn-corner-all {
    -moz-border-radius:                 1em /*{global-radii-buttons}*/;
    -webkit-border-radius:              1em /*{global-radii-buttons}*/;
    border-radius:                      13px /*{global-radii-buttons}*/;
} 
```

在你的 CSS 中添加

```
.ui-btn-corner-all{-moz-border-radius:0;-webkit-border-radius: 0;border-radius: 0;} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T06:45:49.037

```
$(function(){
    $('body *').removeClass('ui-btn-corner-all');
}); 
```

使 jquery 选择器更加优化。把它当作一个想法。

# list - Backbone.js - 如何为嵌套列表建模

> ID：10886015
> 
> 赞同：1
> 
> 时间：2012-06-04T18:10:05.783
> 
> 标签：list, model, backbone.js

我正在尝试在 Backbone 中对多级嵌套列表进行建模，并想知道如何最好地使用 Collections/Models 对其进行建模。

我目前有（在咖啡脚本中）

我的收藏

```
class App.Collections.List extends Backbone.Collection
   model: App.Model.ListItem 
```

我的模特

```
class App.Model.ListItem extends Backbone.Model
   defaults: 
     name: "foo"
     bar:  "bar"
     children: new App.Collections.List # This doesnt work because I need to load Models before Collections
     parent: this # initialized by param hash 
```

我目前使用新的 App.Collection.List（ListItem 模型的）初始化视图，它给出了深度 1 的列表。当我单击 ListItem 时，我希望它执行 HTTP GET，它可以填充它的子项，并且等等等等。目前我有 3 个级别的深度，但它可能会变得更深。

我应该使用 SuperModel [1] 还是 Backbone-relational [2] 之类的东西？

[1] [http://pathable.github.com/supermodel/](http://pathable.github.com/supermodel/)

[2] [https://github.com/PaulUithol/Backbone-relational](https://github.com/PaulUithol/Backbone-relational)

# jboss - 部署期间的 JBoss java.io.IOException

> ID：10886019
> 
> 赞同：3
> 
> 时间：2012-06-04T18:10:30.983
> 
> 标签：jboss, manifest, jboss7.x, ioexception

我正在 JBossAS 7.1.1 上构建 JBoss 应用程序服务器模块。在尝试修改清单文件中的类路径时，我遇到了这个错误：

```
12:30:53,097 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-4) JBAS015876: Starting deployment of "MyDeployableProject.war"
12:30:53,141 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-1) MSC00001: Failed to start service jboss.deployment.unit."MyDeployableProject.war".STRUCTURE: org.jboss.msc.service.StartException in service jboss.deployment.unit."MyDeployableProject.war".STRUCTURE: Failed to process phase STRUCTURE of deployment "MyDeployableProject.war"
    at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:119) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [classes.jar:1.6.0_31]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [classes.jar:1.6.0_31]
    at java.lang.Thread.run(Thread.java:680) [classes.jar:1.6.0_31]
Caused by: org.jboss.as.server.deployment.DeploymentUnitProcessingException: Failed to get manifest for deployment "/opt/server/bin/jboss-as-7.1.1.Final/standalone/deployments/MyDeployableProject.war"
    at org.jboss.as.server.deployment.module.ManifestAttachmentProcessor.deploy(ManifestAttachmentProcessor.java:73) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:113) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    ... 5 more
Caused by: java.io.IOException: invalid header field
    at java.util.jar.Attributes.read(Attributes.java:393) [classes.jar:1.6.0_31]
    at java.util.jar.Manifest.read(Manifest.java:182) [classes.jar:1.6.0_31]
    at java.util.jar.Manifest.<init>(Manifest.java:52) [classes.jar:1.6.0_31]
    at org.jboss.vfs.VFSUtils.readManifest(VFSUtils.java:216)
    at org.jboss.vfs.VFSUtils.getManifest(VFSUtils.java:199)
    at org.jboss.as.server.deployment.module.ManifestAttachmentProcessor.deploy(ManifestAttachmentProcessor.java:69) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    ... 6 more 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-04T18:10:31.140

事实证明，一个小错误`MANIFEST.MF`导致了这个问题。该文件是：

```
Manifest-Version: 1.0
Class-Path: 
```

事实证明，该错误是由于`Class-Path:`. 这（只有一个空间不同）是有效的：

```
Manifest-Version: 1.0
Class-Path: 
```

希望这会阻止其他人怀疑。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-26T20:13:55.320

此外，你可以有一些东西：

```
Manifest-Version: 1.0
Dependencies: org.slf4j,org.apache.commons.logging
**,org.joda.time**
Built-By: Pablo
Build-Jdk: 1.6.0_30
Created-By: Apache Maven
Archiver-Version: Plexus Archiver 
```

代替

```
Manifest-Version: 1.0
Dependencies: org.slf4j,org.apache.commons.logging,org.joda.time
Built-By: Pablo
Build-Jdk: 1.6.0_30
Created-By: Apache Maven
Archiver-Version: Plexus Archiver 
```

在这种情况下，请查看 pom.xml

 `````
<plugin>
                <artifactId>maven-war-plugin</artifactId>
                <version>2.2</version>
                <configuration>
                    <failOnMissingWebXml>false</failOnMissingWebXml>
                    <archive>
                        <manifestEntries>
<!-- IMPORTANT: All dependencies in te same line -->                            <Dependencies>org.slf4j,org.apache.commons.logging,org.joda.time</Dependencies>
                        </manifestEntries>

                    </archive>
                </configuration>
            </plugin> 
`````

# javascript - 某些 HTML 字符实体仅在 Firefox 中是巨大的

> ID：10886023
> 
> 赞同：7
> 
> 时间：2012-06-04T18:10:43.807
> 
> 标签：javascript, html, css, icons

出于某种原因，在我的 Firefox 12.0 for Mac OS X 中，我的 ⟩ ( `&rang;`) 字符比应有的大得多。在 Chrome 和 Safari 上，它们看起来正是我想要的样子。

我`AddDefaultCharset utf-8`的`.htaccess`和`<meta charset="utf-8">`我的`<head>`（因为我将这些文件交付给的组可能不使用我的`.htaccess`）。

另外，根据 Adob​​e 的浏览器实验室，IE 7 和 8 只显示一个方框……有没有人可以让这些浏览器支持该字符？这会让事情变得更容易（因为颜色会发生变化，所以图像非常不方便，并且图像不会褪色）。

演示：[http ://cameronspear.com/demos/rang/](http://cameronspear.com/demos/rang/)

这是我在 Chrome 中看到并期望看到的：

![铬合金](../Images/5594c866c9febac530538c0d58c00310.png)

这是我的 Firefox 显示的内容：

![火狐](../Images/4aaf017d4b07d08cc32b6da312716ef4.png)

这是IE8浏览器实验室的截图：

![IE8](../Images/2bd86b04fe817e4f798034c3221f0fca.png)

**TL;DR：**我希望所有这些屏幕截图看起来都像第一个使用⟩ aka`&rang;`字符的屏幕截图。甚至可以接受使用 JavaScript。

谢谢。

[编辑] 我应该指定我拥有`&rang;`角色并不重要，因为我能够使用 CSS 更改其颜色并使其在多个浏览器中看起来相同。

* * *

# 解决方案

我只是想准确地分享我为后代所做的一切。

感谢 Pointy 的提示和资源，我使用“[如何制作自己的图标 webfont](http://www.webdesignerdepot.com/2012/01/how-to-make-your-own-icon-webfont/) ”中描述的模板和方法使用Inkscape[创建了自己的](http://inkscape.org/)[SVG](http://cameronspear.com/demos/rang/fonts/myicons.svg "下载我的 SVG 文件")。我将一个大尖括号映射到.`X``x`

我遇到的一件事是我的角度需要接触基线，并且只有大约 72% 到盒子顶部才能适合“内联”，所以大写的 X 是我原来的太高的，小写的 x 是内联的越多。

[然后我使用http://www.freefontconverter.com/](http://www.fontsquirrel.com/fontface/generator)将我的 SVG 转换为[TTF](http://cameronspear.com/demos/rang/fonts/myicons.ttf "下载我的 TTF 文件") ，并使用[http://www.fontsquirrel.com/fontface/generator](http://www.freefontconverter.com/)转换为网络字体

......就是这样。

演示 ( [http://cameronspear.com/demos/rang/](http://cameronspear.com/demos/rang/) ) 仍在进行中。您可以看到它在所有浏览器中看起来都是一致的，并且 onclick 旋转动画非常接近该点，等等。

**[更新]**我发现了一个名为[IcoMoon](http://icomoon.io/)的很棒的资源，它有助于为 Web 制作字体和组织字体，它接受常规的 svg 矢量，因此你可以在 Illustrator 中制作它而不会与 Inkscape 混淆，因为 IcoMoon 处理键盘映射和其他东西。您只能导出您使用的图标，因此您只需加载 3 或 4 个图标（如果您只需要）而不是整个字体。

它已成为一种无价的资源，我建议其他想要进入 Icon Fonts 的人检查一下。[您可以从CSS-Trick 的第 113 期截屏视频](http://css-tricks.com/video-screencasts/113-creating-and-using-a-custom-icon-font/)中了解有关整个过程的更多信息。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T18:18:05.070

你可以使用图像吗？它们将在所有浏览器中提供一致的外观。在许多情况下，图像比字符符号更可取。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T18:40:47.867

制作图标字体很容易，我可以做到，尽管（对我来说）这个过程有点神秘。我怀疑有很多真正的图形艺术家在这方面做得更好，而且肯定有很多人比我更了解技术细节。

[这](http://www.webdesignerdepot.com/2012/01/how-to-make-your-own-icon-webfont/)是关于该主题的非常详尽的博客文章。（不是 mny 博客。）它没有很好描述的主要是 Inkscape“艺术板”区域与字体中每个字形的垂直定位之间的关系。它进入了一些细节，但我一直无法弄清楚。

因此，我所做的只是在一边制作一个 1024 像素的方形画板。然后我在 Inkscape 中设置了一个网格，以便将艺术板划分为 16x16 网格。这使得（在某种程度上）很容易设计能够以 16px 字体大小很好地呈现的字符。（当然，如果需要，您可以针对不同的字体大小；但是，16x16 适合需要非常小的东西。）然后，我只是确保当我将字形放在页面上时，它们在没有填充的 1em x 1em 框（或 16px x 16px；但是你想在 CSS 中这样做）。我使用`<i>`标签，并给它们`display: inline-block`. 这给了我很大的灵活性，而且通常效果很好。

Inkscape SVG 字体工具，委婉地说，非常原始。这实际上是某人夏季项目的结果。它可以工作，但仅此而已。 **经常保存。**

现在生成字体文件的过程有点疯狂。我使用字体松鼠。我上传了从 Inksccape 保存的 .svg，然后要求提供 EOT、WOFF 和 TTF。令人惊讶的是，它有效。

如果你只需要一些字形，这是一个非常好的方法，因为你需要下载一个很小的字体文件，它会被浏览器缓存。但是，存在一些可访问性问题，并且这种做法具有足够的争议性，以至于社区中一些更狂热的成员可能会认为您这样做是野蛮人 :-)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-04T19:58:33.537

这是字体问题。为了最大限度地提高正确渲染稀有字符（大多数字体中不存在的字符）的几率，请指定包含它的最大字体列表。

页面现在刚刚`font-family: Arial,sans-serif`设置了`span`包含括号的元素。由于 Arial 不包含它，因此每个浏览器都将使用自己的`sans-serif`. 如果它映射到的地图不包含括号，聪明的浏览器会尝试一些聪明的事情，比如扫描系统中的其他字体，但这可能仍然会导致它缺少任何字形。

还有一个问题。通常，您使用实体引用`&rang;`而不是角色本身并不重要，但在这里确实如此。在 HTML 4.01 中， `&rang;`表示 U+232A；在 HTML5 草案中，这意味着 U+27E9。IE 在这里遵循 HTML 4.01，而 Firefox 使用 HTML5 定义。所以最好使用你真正想要的字符，无论是在 UTF-8 编码中，还是作为字符引用`&#x232a;`。

如果您可以检查例如[U+232A 的字体覆盖率](http://www.fileformat.info/info/unicode/char/232a/fontsupport.htm)并按优先顺序编写字体。但是您应该检查所有字体是否都给出了可接受的显示。例如，如果使用 Cambria Math，则默认行高会非常大，因此您可能希望`line-height`明确设置为一些合理的值，例如 1.3。

最后——也许应该首先问这个问题——你真的要使用右角括号还是数学右角括号？它们是括号，与左尖括号配对使用，而不是箭头符号。

更多信息：[在 HTML 中使用特殊字符的指南](http://www.cs.tut.fi/~jkorpela/html/characters.html)。

# tfs - 分布式环境中的 BuildAgent 工作目录

> ID：10886025
> 
> 赞同：1
> 
> 时间：2012-06-04T18:10:50.857
> 
> 标签：tfs, msbuild

我有一个构建控制器在同一台机器上运行 2 个代理（代理 1、代理 2）。我在同一 AD 内的另一台机器上安装了另一个构建代理 (Agent3)。

现在，当涉及到 Agent3 时，我收到错误消息，即 Agent3 无法访问 \buildagentmachine\Build 上的共享。

Agent1 和 Agent2 具有工作目录：D:\Builds\$(BuildAgentId)\$(BuildDefinitionPath)（其中 D:\Builds 是构建控制器上通过网络共享的本地文件夹）。

Agent3 的工作目录是：$(SystemDrive)\Builds\$(BuildAgentId)\$(BuildDefinitionPath) 在其本地硬盘上。

现在有趣的是：在构建控制器计算机上，我在 D:\Builds 下获得以下文件夹：

*   1
*   2
*   3
*   项目名

看起来 Agent3 将其所有内容直接放在 \controller\Builds 下，这意味着为代理启用了写访问权限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T05:18:15.837

如果错误与访问共享有关，那么当构建尝试将构建输出复制到构建丢弃共享时，您确定它没有出错吗？确保将构建代理 3 配置为运行的用户帐户与用于构建代理 1 和 2 的用户帐户相同。您可以在构建代理计算机上的 TFS 管理控制台中检查这一点。

# asp.net - .NET ASP 网页继承

> ID：10886027
> 
> 赞同：1
> 
> 时间：2012-06-04T18:11:03.630
> 
> 标签：asp.net, c#-4.0, inheritance, web, abstraction

我是 .NET 的新手，理想情况下想要制作几个抽象层来制作一个相当复杂的网站。作为第一层处理登录、身份验证等，另一层处理内置应用程序（它们的外观、预定义功能、数据库连接），而较低级别将是特定的应用程序实现细节。

这有利于统一性，因为一旦开销抽象层处理了它们的职责，所有应用程序都将从一个地方继承，从而使所有较小的应用程序更易于维护和快速开发。

唯一的问题是我不能 100% 确定从哪里开始 .NET ASP 网页继承。我尝试了谷歌和搜索，但我可能找不到正确的东西。我希望有这方面经验的人可以将我引向资源，以使这种网页继承/抽象更容易！

我正在使用 Visual Studio 2010。

编辑：我还想在我的问题中添加目的：另一个人正在创建网站的基础，它将处理身份验证、门户、UI 外观等

我想制作一个使用他们的网站框架的应用程序库，并在其上添加每个应用程序必须满足的标准、功能库、任何不适用于门户网站的附加 UI 覆盖等。

第三层将直接从上述应用程序基础框架（抽象）继承，并根据制定的指南进一步指定。

我很感激到目前为止的反馈！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T18:24:15.067

在 ASP.NET 中，您有 4 种常用方法来重用代码/抽象来为您的应用程序提供服务

1.  第一种方法是使用一个基本页面，它将继承标准的 asp.net 页面并共享所有页面的通用逻辑，如此[处所述](http://www.4guysfromrolla.com/articles/041305-1.aspx#postadlink)
2.  第二种方法是使用[母版页](http://www.asp.net/web-forms/tutorials/master-pages)：母版页为在整个应用程序中使用它的所有页面定义了一个通用设计（html / css - wise）。它也可以被使用它的页面以编程方式访问，因此共享一个共同的逻辑
3.  第三种方法是使用[http 模块](http://msdn.microsoft.com/en-us/library/bb398986.aspx)：http 模块基本上是一个类，它负责处理 HTTP 请求，然后由服务器上的预期页面代码处理，它允许您添加任何您想要应用程序的通用逻辑使用（如认证/授权处理、从数据库获取相关用户信息等）
4.  [Global.asax](http://sandblogaspnet.blogspot.co.il/2008/03/methods-in-globalasax.html)：包含应用程序/会话范围的事件处理程序，它允许您在一次处理这些事件（从应用程序开始到用户会话结束的所有事情）

如果您想构建少量应用程序，共享通用行为，则使用模块和基本页面是首选方式。当然，如果您希望它们也共享相同的设计，也可以使用母版页。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T18:21:05.150

That's quite a broad question. Welcome to ASP.NET!

I would suggest researching these topics:

*   Web page inheritance -> [Master Pages](http://msdn.microsoft.com/en-us/library/wtxbf3hh.aspx),
*   Skinning -> [App_Themes](http://msdn.microsoft.com/en-us/library/ykzx33wh.aspx),
*   separation of responsibilities -> [MVP design pattern](http://msdn.microsoft.com/en-ca/magazine/cc188690.aspx) for the Web Forms platform, or MVC if you have a choice.
*   Login, roles -> [Membership](http://msdn.microsoft.com/en-us/library/yh26yfzy.aspx)

# c# - 谁能解释 VDPROJ 文件的主要特征？

> ID：10886029
> 
> 赞同：18
> 
> 时间：2012-06-04T18:11:13.977
> 
> 标签：c#, .net, visual-studio, configuration, vdproj

我确定 MSDN 上一定有一些文档，但我找不到。它看起来像 JSON 的一些子集/变体。真的，这个问题源于一直困扰我的事情：所有的`8:`s 和`3:`s 是什么意思？这是某种版本号吗？也许是打字方案？我见过的每个 VDPROJ 摘录都充满了这些“八冒号”和“三冒号”前缀，但这并不是搜索引擎真正适合的问题。

```
"DeployProject"
{
"VSVersion" = "3:800"
"ProjectType" = "8:{978C614F-708E-4E1A-B201-565925725DBA}"
"IsWebType" = "8:FALSE"
"ProjectName" = "8:ProjectNameRedacted"
"LanguageId" = "3:1033"
"CodePage" = "3:1252"
"UILanguageId" = "3:1033"
"SccProjectName" = "8:"
"SccLocalPath" = "8:"
"SccAuxPath" = "8:"
"SccProvider" = "8:"
    "Hierarchy"
    {
        "Entry"
        {
        "MsmKey" = "8:_02F97BB7BD104F1AAA1C97C854D5DC99"
        "OwnerKey" = "8:_UNDEFINED"
        "MsmSig" = "8:_UNDEFINED"
        }
... 
```

如果有人只是想斥责我可怜的 Google-fu，那也没关系。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-06-13T23:12:45.850

作为@R。Matveev 指出，前缀数字很可能表示属性中存储的数据类型。这在将文件反序列化为对象结构时很有用。

我怀疑 Visual Studio 用来读取/写入文件的源代码是否曾经开源，所以难怪网络搜索什么也没返回。

我能找到的最好的是这个关于 OLE 自动化数据类型的页面，它可能不是实际的常量，但数据类型似乎与 *.vdproj 文件中的值匹配。

[2.2.7 VARIANT 类型常量](https://msdn.microsoft.com/en-us/library/cc237865.aspx)

```
typedef  enum tagVARENUM
 {
   VT_EMPTY = 0x0000,
   VT_NULL = 0x0001,
   VT_I2 = 0x0002,
   VT_I4 = 0x0003, // 4-byte signed integer
   VT_R4 = 0x0004,
   VT_R8 = 0x0005,
   VT_CY = 0x0006,
   VT_DATE = 0x0007,
   VT_BSTR = 0x0008, // BSTR (string data)
   VT_DISPATCH = 0x0009,
   VT_ERROR = 0x000A,
   VT_BOOL = 0x000B, // Boolean value
   VT_VARIANT = 0x000C,
   VT_UNKNOWN = 0x000D
   ...
 } VARENUM; 
```

# google-analytics - 分析是否应该用于现场统计？

> ID：10886030
> 
> 赞同：0
> 
> 时间：2012-06-04T18:11:20.213
> 
> 标签：google-analytics, analytics, google-analytics-api

我拥有一个视频流媒体网站，目前我对每个视频都有一个简单的计数器。我想显示更多功能齐全的视频统计信息。我最初的想法是将每次点击记录到我服务器上的数据库中，但后来我意识到 Google Analytics (GA) 已经拥有我需要的所有数据，以及大量的聚合工具。

以下是我认为使用 GA API 的优缺点：

## 优点

*   更轻松
*   多种查看数据的方式

## 缺点

*   更少的定制（问题不大）
*   在站点上显示数据的延迟（取决于 api 调用的频率）

获取数据的延迟是一个很大的问题，因为我想列出“今天观看次数最多的视频”，可能还有“过去一小时内观看次数最多的视频”。

最好使用 GA 还是自制解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T18:19:15.853

Analytics 尽可能为您提供大量自定义，以您的案例为例，使用 javascript，跟踪下载作为自定义事件，您可以将 id 和数字数据关联到这些事件。

似乎非常合适。

参考：[https ://developers.google.com/analytics/devguides/collection/gajs/eventTrackerGuide](https://developers.google.com/analytics/devguides/collection/gajs/eventTrackerGuide)

即使是自己实现这些工具的专用部分也会很昂贵，并且可能无法达到相同的质量水平。

# android - 谷歌地图上的街景？

> ID：10886031
> 
> 赞同：2
> 
> 时间：2012-06-04T18:11:24.417
> 
> 标签：android, google-maps

我尝试为我的应用程序的用户提供 3 种显示模式：

交通视图（每张印刷地图上的标准视图）卫星视图（空中）和街景（3D，与臭名昭著的谷歌汽车一样）

我可以设置“标准”交通视图

```
 mapView.setSatellite(false);
            mapView.setTraffic(true); 
```

卫星视图

```
 mapView.setSatellite(true); 
```

但

```
 mapView.setStreetView(true); 
```

没有做任何事情，即使我可以通过 maps.google.com 在位置检查 StreetView 并且对 mapView.isStreetView() 的后续检查返回 TRUE。

谁能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T10:34:11.920

`setStreetView(true)`应加载显示街景数据可用的街道的图块集。但是，它不会实际显示 StreetView 本身——那是一个单独的应用程序。[您可以通过使用特定`Intent`结构](http://developer.android.com/guide/appendix/g-app-intents.html)为给定位置启动 StreetView（对于拥有它的设备）。但是，您目前无法将 StreetView 嵌入到您自己的应用中。

# c# - ArgumentNullException 未处理，出乎意料

> ID：10886033
> 
> 赞同：2
> 
> 时间：2012-06-04T18:11:27.067
> 
> 标签：c#

我一直在断断续续地做一个项目，但是我已经两个月没有碰它了，今天我回到它，由于错误而无法运行它。

```
IEnumerable<MediaTitle> query = mediaTitleCollection.OfType<FilmMedia>(); 
```

调试器在此行停止并给出标题中描述的错误以及

> 值不能为空。参数名称：来源

它非常令人沮丧，因为代码之前是 100% 工作的，现在它被这个错误所支配。我试图清理解决方案，但运气不佳。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T18:13:01.047

`mediaTitleCollection`如果集合（在本例中为 ）为**null ，则**[Enumerable.OfType](http://msdn.microsoft.com/en-us/library/bb360913.aspx)将引发异常。

> 它非常令人沮丧，因为代码之前是 100% 工作的，现在它被这个错误所支配。我试图清理解决方案，但运气不佳。

您应该调试您的应用程序，并寻找`mediaTitleCollection`应该设置的位置。它当前被设置为 null 或未正确初始化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T18:20:55.760

异常消息中指向的“来源”是什么？！它是 FileMedia 的一个领域吗？您是否从数据库等数据源加载值？

# python - Python中的并行启动进程串行执行？

> ID：10886036
> 
> 赞同：2
> 
> 时间：2012-06-04T18:11:34.523
> 
> 标签：python, parallel-processing, python-3.x, multiprocessing

我对 Python 的多处理库有一个理解问题/问题：
为什么不同的进程（几乎）同时启动至少似乎是串行执行而不是并行执行？

任务是控制大量粒子的宇宙（一个粒子是一组 x/y/z 坐标和一个质量），并在利用多处理器环境的同时对它们执行各种分析。特别是对于下面显示的示例，我想计算所有粒子的质量中心。
因为该任务明确说要使用多个处理器，所以我没有使用线程库，因为有这个 GIL-thingy 将执行限制在一个处理器上。
这是我的代码：

```
from multiprocessing import Process, Lock, Array, Value
from random import random
import math
from time import time

def exercise2(noOfParticles, noOfProcs):
    startingTime = time()
    particles = []
    processes = []
    centerCoords = Array('d',[0,0,0])
    totalMass = Value('d',0)
    lock = Lock()

    #create all particles
    for i in range(noOfParticles):
        p = Particle()
        particles.append(p)

    for i in range(noOfProcs):
        #determine the number of particles every process needs to analyse
        particlesPerProcess = math.ceil(noOfParticles / noOfProcs)
        #create noOfProcs Processes, each with a different set of particles        
        p = Process(target=processBatch, args=(
            particles[i*particlesPerProcess:(i+1)*particlesPerProcess],
            centerCoords, #handle to shared memory
            totalMass, #handle to shared memory
            lock, #handle to lock
            'batch'+str(i)), #also pass name of process for easier logging
            name='batch'+str(i))
        processes.append(p)
        print('created proc:',i)

    #start all processes
    for p in processes:
        p.start() #here, the program waits for the started process to terminate. why?

    #wait for all processes to finish
    for p in processes:
        p.join()

    #normalize the coordinates
    centerCoords[0] /= totalMass.value
    centerCoords[1] /= totalMass.value
    centerCoords[2] /= totalMass.value

    print(centerCoords[:])
    print('total time used', time() - startingTime, ' seconds')

class Particle():
    """a particle is a very simple physical object, having a set of x/y/z coordinates and a mass.
    All values are randomly set at initialization of the object"""

    def __init__(self):
        self.x = random() * 1000
        self.y = random() * 1000
        self.z = random() * 1000
        self.m = random() * 10

    def printProperties(self):
        attrs = vars(self)
        print ('\n'.join("%s: %s" % item for item in attrs.items()))

def processBatch(particles,centerCoords,totalMass,lock,name):
    """calculates the mass-weighted sum of all coordinates of all particles as well as the sum of all masses.
    Writes the results into the shared memory centerCoords and totalMass, using lock"""

    print(name,' started')
    mass = 0
    centerX = 0
    centerY = 0
    centerZ = 0

    for p in particles:
        centerX += p.m*p.x
        centerY += p.m*p.y
        centerZ += p.m*p.z
        mass += p.m

    with lock:
        centerCoords[0] += centerX
        centerCoords[1] += centerY
        centerCoords[2] += centerZ
        totalMass.value += mass

    print(name,' ended')

if __name__ == '__main__':
    exercise2(2**16,6) 
```

现在我希望所有进程大约在同一时间启动并并行执行。但是当我查看程序的输出时，这看起来好像进程正在串行执行：

```
created proc: 0
created proc: 1
created proc: 2
created proc: 3
created proc: 4
created proc: 5
batch0  started
batch0  ended
batch1  started
batch1  ended
batch2  started
batch2  ended
batch3  started
batch3  ended
batch4  started
batch4  ended
batch5  started
batch5  ended
[499.72234074100135, 497.26586187539453, 498.9208784328791]
total time used 4.7220001220703125  seconds 
```

此外，当使用 Eclipse 调试器单步执行程序时，我可以看到程序总是等待一个进程终止，然后在标有以“为什么？”结尾的注释的行开始下一个进程。当然，这可能只是调试器，但是当我查看正常运行中产生的输出时，这正是上图所示。

*   这些进程是否并行执行而我只是因为标准输出的一些共享问题而看不到它？
*   如果进程是串行执行的：为什么？我怎样才能让它们并行运行？

非常感谢您对理解这一点的任何帮助。

我在具有双核 Intel 处理器的 Windows 7 机器上使用 Python 3.2.3 从 PyDev 和命令行执行了上述代码。

* * *

编辑：
由于程序的输出，我误解了这个问题：进程实际上是并行运行的，但是腌制大量数据并将其发送到子进程的开销需要很长时间，以至于完全扭曲了画面。
将粒子（即数据）的创建移至子进程，以便它们不必首先被腌制，从而消除了所有问题，并导致程序的有用的并行执行。
因此，为了解决这个任务，我必须将粒子保存在共享内存中，这样它们就不必传递给子进程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T18:53:39.653

我在我的系统（Python 2.6.5）上运行了您的代码，它几乎立即返回结果，这让我认为您的任务规模可能太小，以至于进程在下一个开始之前完成（请注意，启动进程较慢比旋转线程）。我质疑`total time used 4.7220001220703125 seconds`您的结果，因为这比我的系统运行相同代码所花费的时间长约 40 倍。我将粒子数放大到`2**20`，得到以下结果：

```
('created proc:', 0)
('created proc:', 1)
('created proc:', 2)
('created proc:', 3)
('created proc:', 4)
('created proc:', 5)
('batch0', ' started')
('batch1', ' started')
('batch2', ' started')
('batch3', ' started')
('batch4', ' started')
('batch5', ' started')
('batch0', ' ended')
('batch1', ' ended')
('batch2', ' ended')
('batch3', ' ended')
('batch5', ' ended')
('batch4', ' ended')
[500.12090773656854, 499.92759577086059, 499.97075039983588]
('total time used', 5.1031057834625244, ' seconds') 
```

这更符合我的预期。如果你增加任务大小，你会得到什么？

# javascript - 如何在 jQuery 中获取 POST 变量

> ID：10886039
> 
> 赞同：0
> 
> 时间：2012-06-04T18:11:38.300
> 
> 标签：javascript, jquery, python, ajax

> **可能重复：**
> [如何使用 JQuery 获取 GET 和 POST 变量？](https://stackoverflow.com/questions/439463/how-to-get-get-and-post-variables-with-jquery)

我有以下 HTML：

```
<form action='.' method='post'>{% csrf_token %}
    <div class="parameters">
        Show
            <select name="earnings_filter">
                <option value="all">Total earnings</option>
                <option value="hd">HD earnings</option>
                <option value="sd">SD earnings</option>
            </select>
        <input type="submit" name="submit" class="submit float-right" value="submit" id="submit_financials"/>
    </div>
</form> 
```

我需要对此进行 ajax 调用，我正在触发它：

```
$("#submit_financials").live('click', function(){
    ...
}); 
```

有没有办法获取在 POST 中提交的变量，例如选择了哪个选项（我需要获取大约 10 个其他变量）。还是我需要使用 jQuery 选择器来获取每个选择器的值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T18:18:37.457

```
$("#submit_financials").live('click', function(){
    $.ajax({
      url: '', // script url to send
      method: 'POST', // method of sending
      data: $('form').has(this).serialize(),  // .serialize() make query string with form inputs name and value
      dataType:'json',  // expected data format returned from server, you may have something else
      success: function(response) {
          // response contains data returned from server
      }
    });
}); 
```

如果您使用 jQuery > 1.7 替换它会更好，如果可能的话会`live()`更好。`.on()`所以你可以写

```
$("#container").on('click', '#submit_financials', function(){
    $.ajax({
      url: '', // script url to send
      method: 'POST', // method of sending
      data: $('form').has(this).serialize(),  // .serialize() make query string with form inputs name and value
      dataType:'json',  // expected data format returned from server, you may have something else
      success: function(response) {
          // response contains data returned from server
      }
    });
}); 
```

这里`#container`指向`#submit_financials`在页面加载时属于 DOM 的持有者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T18:17:13.533

如果所有值都在表单的输入元素中......

```
$("#formId").serialize() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T18:17:21.840

您可以`serialize`表单并发送到服务器页面

```
$.post("yourServerPage.php", $("form").serialize(),function(data){
  //Do whatever with the result from ajax server page.
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T18:14:42.200

如何创建几个隐藏类型的输入值

```
<input type="hidden" id="sample_id" value="SOMETHING" /> 
```

给他们 id 并使用以下方法访问里面的数据：

```
$('#sample_id').val() 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-04T18:28:57.470

不幸的是，POST 变量在从客户端到服务器的请求中进行通信，但它们不会自动包含在从服务器返回客户端的响应中。这是将它们与 GET 变量区分开来的原因之一。

如果您的数据不是太长，您可能希望改用 GET 方法。然后，您可以使用类似以下问题中列出的函数检索变量：[如何在 JavaScript 中获取查询字符串值？](https://stackoverflow.com/questions/901115/get-query-string-values-in-javascript)

或者，如果您可以访问服务器端代码，则可以在返回的 HTML 中包含这些变量；然而，这完全是另一个问题:)

# twitter - Twitter API 查找用户关注的两个方向

> ID：10886044
> 
> 赞同：1
> 
> 时间：2012-06-04T18:11:50.337
> 
> 标签：twitter

有没有一种快速的方法可以找到我关注的用户列表，他们也关注了我？只是想获得一个更像“朋友”方面的列表。

谢谢

# c++ - 更改数组的最后 5 个字符

> ID：10886052
> 
> 赞同：0
> 
> 时间：2012-06-04T18:12:52.083
> 
> 标签：c++

我有一个加密文件的程序，但在末尾添加了扩展名“.safe”。所以最终结果类似于“file.txt.safe”

当我去解密文件时，用户再次输入文件名：“file.txt.safe”，它保存为一个字符。现在我想删除“.safe”并将文件重命名为其原始名称。

我尝试了以下方法，但似乎没有任何反应，也没有错误。

```
Decrypt (myFile); //decrypts myFile

char * tmp = myFile;
char * newFile;
newFile = strstr (tmp,".safe");  //search tmp for ".safe"
strncpy (newFile,"",5);   //replace .safe with ""

rename (myFile, newFile); 
```

我确定我遗漏了一些明显的东西，但如果这种方法不起作用，我正在寻找任何简单的方法。

**编辑添加：（** *版主从发布者对 K-ballo 的回复中复制）*

谢谢大家。我采用了 std::string 方法，发现它可以工作：

```
Decrypt(myFile); 
string str = myFile; 
size_t pos = str.find(".safe"); 
str.replace(pos,5,""); 
rename(myFile, str.c_str()); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T18:17:14.490

对于您想要做的事情，只需将`strncpy`行更改为此即可：

```
*newFile = '\0'; 
```

如果文件名包含早期的*.safe*（如在*file.safest.txt.safe*中），或者它根本不包含子字符串*.safe*，这仍然会有问题。您最好从数组的末尾进行搜索，并确保您确实找到了一些东西。

这似乎是一种更好的方法（尽管在*C++*中使用 会更好`std::string`）：

```
char* filename = ...;
size_t filename_length = strlen( filename );
int safe_ext_pos = filename_length - 5; // 5 == length of ".safe"
if( safe_ext_pos > 0 && strcmp( ".safe", filename + safe_ext_pos ) == 0 )
    filename[ safe_ext_pos ] = '\0'; 
```

这是`std::string`代码的版本：

```
std::string filename = ...;
int safe_ext_pos = filename.length() - 5; // 5 == length of ".safe"
if( safe_ext_pos > 0 && filename.compare( safe_ext_pos, 5, ".safe" ) == 0 )
    filename.erase( safe_ext_pos ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T19:45:46.203

你应该注意：

```
my.safe.file.txt.safe 
```

您应该确保它实际上位于字符串的末尾，而不是仅仅搜索 '.safe' 并将其删除或截断第一个文件名：

```
std::string myfile = ...
Decrypt(myFile);

const std::string extension_to_remove = ".safe";
if (decryption is successful &&
    myfile.size() >= extension_to_remove.size() &&
    myfile.substr(myfile.size()-5) == extension_to_remove)
{
  std::string newFile = myfile.substr(0, myfile.size()-5);
  rename(myFile, newFile);
} 
```

* * *

还有关于文件扩展名的说明。对于软件来说，使用文件名中的特殊格式来识别文件类型确实是一种非常糟糕的做法。*人类可以使用特殊的命名约定来组织他们的文件，但是软件应该基本上忘记它，除非可能是为了让它人类很容易使用他们想要的约定。

因此，您用于解密文件的代码不应执行此任务。相反，您的解密代码应该使用一个文件来解密和一个包含输出的文件。然后，您用于根据加密文件名计算输出文件名的代码应该存在于其他地方，例如在用户告诉您输出文件名的用户界面中。您的代码将删除“.safe”（如果存在）并提供修改后的名称作为默认输出文件名，以供用户确认。

```
void perform_decryption(std::string const &encrypted, std::string const &decrypted) {
    Decrypt(encrypted);
    if (decryption is successful && encrypted!=decrypted)
        rename(encrypted, decrypted);
}

std::string default_decrypted_name(std::string const &filename) {
    const std::string extension_to_remove = ".safe";
    if (filename.size() >= extension_to_remove.size() &&
        filename.substr(filename.size()-extension_to_remove.size()) == extension_to_remove)
    {
      return filename.substr(0, filename.size()-extension_to_remove.size());
    }
    return filename + ".decrypted";
} 
```

[* 以下是一些反对文件扩展名的原因：]

*   [文件扩展名不是唯一的，在某些情况下会导致无法确定文件类型的冲突。（事实上​​他们甚至不能执行他们的预期目的真的应该足够了......）]
*   [它降低了文件名组织的可用性。当“myfile.txt”重命名为“myfile.txt.old”时，它不再被视为文本文件。]
*   [这会导致安全问题，因为当隐藏真实类型元数据时，虚假类型元数据可能会被误认为是真实类型元数据。]
*   [[和更多...](http://arstechnica.com/apple/2005/04/macosx-10-4/11/)]

# java - Apache HTTP 客户端 socks 代理

> ID：10886053
> 
> 赞同：1
> 
> 时间：2012-06-04T18:12:52.107
> 
> 标签：java, apache, http, client, socks

我目前正在一个 Web 请求项目中工作，并且正在使用 Apache Http 客户端库。我尝试使用经过 mozilla firefox 测试的工作 Socks v4/5 连接到服务器（例如[http://www.google.com](http://www.google.com)），但问题是我从未得到响应。只有不同的错误...

这是一个代码片段：

```
//HttpClient
DefaultHttpClient http = new DefaultHttpClient();
//A class defined by me
Proxy proxy = bla bla;
HttpHost host = new HttpHost(proxy.getIP(), proxy.getPort());
if (proxy.getUsername() != null) {
   http.getCredentialsProvider().setCredentials(
                            new AuthScope(proxy.getIP(), proxy.getPort()),
                            new UsernamePasswordCredentials(proxy.getUsername(), proxy.getPassword()));
}
http.getParams().setParameter(ConnRoutePNames.DEFAULT_PROXY, host); 
```

谁能告诉通过 SOCKS 代理启动通信的正确方法？谢谢！

注意：上面的代码与 HTTP 代理完美配合。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T17:45:25.383

Http 代理和 socks 代理有非常不同的协议（[http://en.wikipedia.org/wiki/SOCKS#Comparison](http://en.wikipedia.org/wiki/SOCKS#Comparison)）。对于您的问题：您可以通过本机 Java 套接字（[如何配置 HTTPClient 以针对 SOCKS 代理进行身份验证？](https://stackoverflow.com/questions/1388822/how-can-i-configure-httpclient-to-authenticate-against-a-socks-proxy)）或通过 DefaultClientConnectionOperator 创建自己的实现，这是很好的指南（[http://4devops.blogspot.com/2011 /10/httphttps-over-socks-proxy-with-java.html](http://4devops.blogspot.com/2011/10/httphttps-over-socks-proxy-with-java.html) )

# c++ - 类型“GLchar”无法解析

> ID：10886056
> 
> 赞同：1
> 
> 时间：2012-06-04T18:13:01.523
> 
> 标签：c++, eclipse, opengl, freeglut, glew

我正在使用 Eclipse、MinGW，并且我已经编译了 freeglut 和 glew，并将它们的库、DLL 和头文件复制到了正确的位置（MinGW/include/GL、MinGW/lib、Windows/SysWOW64）。我还在 MinGW C++ 链接器下链接了 Eclipse 中的库（freeglut64、opengl32、glew32、glu32）。这是我的代码...

```
--CharGame.cpp--
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <GL/glew.h>
#include <GL/freeglut.h>
#include "CharGame.h"
#define WINDOW_TITLE "CharGame"

int CurrentWidth = 800,
    CurrentHeight = 600,
    WindowHandle = 0;
unsigned FrameCount = 0;
GLuint VertexShaderId,
    FragmentShaderId,
    ProgramId,
    VaoId,
    VboId,
    ColorBufferId;

int main(int argc, char* argv[]) {
    Initialize(argc, argv);
    glutMainLoop();
    exit(EXIT_SUCCESS);
}
const GLchar* VertexShader =
{
    "#version 400\n"\

    "layout(location=0) in vec4 in_Position;\n"\
    "layout(location=1) in vec4 in_Color;\n"\
    "out vec4 ex_Color;\n"\

    "void main(void)\n"\
    "{\n"\
    "   gl_Position = in_Position;\n"\
    "   ex_Color = in_Color;\n"\
    "}\n"
};
const GLchar* FragmentShader =
{
    "#version 400\n"\

    "in vec4 ex_Color;\n"\
    "out vec4 out_Color;\n"\

    "void main(void)\n"\
    "{\n"\
    "   out_Color = ex_Color;\n"\
    "}\n"
};

void Initialize(int argc, char* argv[]) {
    glutInit(&argc, argv);
    glutInitContextVersion(4, 0);
    glutInitContextFlags(GLUT_FORWARD_COMPATIBLE);
    glutInitContextProfile(GLUT_CORE_PROFILE);
    glutSetOption(GLUT_ACTION_ON_WINDOW_CLOSE, GLUT_ACTION_GLUTMAINLOOP_RETURNS);
    glutInitWindowSize(CurrentWidth, CurrentHeight);
    glutInitDisplayMode(GLUT_DEPTH | GLUT_DOUBLE | GLUT_RGBA);
    WindowHandle = glutCreateWindow(WINDOW_TITLE);
    if (WindowHandle < 1) {
        fprintf(stderr, "Error: Could not create a render window.\n");
        exit(EXIT_FAILURE);
    }
    glutReshapeFunc(Resize);
    glutDisplayFunc(Render);
    glutIdleFunc(Idle);
    glutTimerFunc(0, Timer, 0);

    fprintf(stdout, "Info: OpenGL Version: %s\n", glGetString(GL_VERSION));
    glClearColor(0.0f, 0.0f, 0.0f, 0.0f);

}

void Resize(int width, int height) {
    CurrentHeight = height;
    CurrentWidth = width;
    glViewport(0, 0, CurrentWidth, CurrentHeight);
}

void Render(void) {
    ++FrameCount;
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    glDrawArrays(GL_TRIANGLES, 0, 3);

    glutSwapBuffers();
    glutPostRedisplay();
}

void Idle(void) {
    glutPostRedisplay();
}

void Timer(int value) {
    if (0 != value) {
        char* TempString = (char*) malloc(512 + strlen(WINDOW_TITLE));
        sprintf(TempString, "%s: %d Frames Per Second @ %d x %d", WINDOW_TITLE, FrameCount*4, CurrentWidth, CurrentHeight);
        glutSetWindowTitle(TempString);
        free(TempString);
    }
    FrameCount = 0;
    glutTimerFunc(250, Timer, 1);
}
--End CharGame.cpp--

--CharGame.h--
#ifndef CHARGAME_H_
#define CHARGAME_H_

void Initialize(int, char*[]);
void InitWindow(int, char*[]);
void Resize(int,int);
void Render(void);
void Timer(int);
void Idle(void);

#endif
--End CharGame.h-- 
```

我相信我所做的一切都是正确的，但是，Eclipse 在 VertexShader 和 FragmentShader 上抛出错误“无法解析类型 'GLchar'”。我是否在代码中犯了错误或错过了所需的步骤？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T18:14:43.637

您没有以正确的方式声明字符串常量。那里不需要花括号。并注意字符串之间的空行 - 删除它们（见下文）或在那里添加“\”。

在“glew.h”之前包含“GL/GL.h”文件，这也可能有帮助。

将其与普通字符一起使用：

```
const char* VertexShader =
"#version 400\n"\
"layout(location=0) in vec4 in_Position;\n"\
"layout(location=1) in vec4 in_Color;\n"\
"out vec4 ex_Color;\n"\
"void main(void)\n"\
"{\n"\
"   gl_Position = in_Position;\n"\
"   ex_Color = in_Color;\n"\
"}\n";

const char* FragmentShader =
"#version 400\n"\
"in vec4 ex_Color;\n"\
"out vec4 out_Color;\n"\
"void main(void)\n"\
"{\n"\
"   out_Color = ex_Color;\n"\
"}\n"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T18:41:45.970

这只是在扩展我对另一个答案的评论：

```
const char* VertexShader =
R"(#version 400
layout(location=0) in vec4 in_Position;
layout(location=1) in vec4 in_Color;
out vec4 ex_Color;
void main(void)
{
   gl_Position = in_Position;
   ex_Color = in_Color;
}
)"; 
```

# gwt - GWT 正在进行意外事件调用

> ID：10886057
> 
> 赞同：0
> 
> 时间：2012-06-04T18:13:03.790
> 
> 标签：gwt

我的代码如下：我看到在运行应用程序时，即使未单击 adminLink，也会调用 loadWidget 方法。这不是我想要的，但我不确定是什么导致了这个问题。请指教

```
public class LoginModule implements EntryPoint {
    LoginPopup loginPopup;

      private class LoginPopup extends PopupPanel {

            public LoginPopup() {
              super(true);      
            }    

            public void loadWidget(){
                System.out.println("I am called 1");

                CommonUi cUi = new CommonUi();
                  //#342 moved code to common area
                  FormPanel loginForm = cUi.getLoginFormUi();
                  setWidget(loginForm);
            }
     }

    @Override
    public void onModuleLoad() {
        //#251 improved login popup ui.
        final Anchor adminLink = new Anchor("User Login");
    //  final Label adminLink = new Label("User Login");
        adminLink.addClickHandler(new ClickHandler() {
              public void onClick(ClickEvent event) {
                // Instantiate the popup and show it.
                loginPopup =   new LoginPopup();
                loginPopup.loadWidget();
                loginPopup.showRelativeTo(adminLink);
                loginPopup.show();
              }
            });

        if(RootPanel.get("admin") !=null)
            RootPanel.get("admin").add(adminLink);

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T18:23:39.037

运行开发模式，在 Java IDE 中的该方法中设置断点，然后查看当前堆栈，哪些代码正在调用该方法。如果这是您的应用程序中唯一的代码，那么这似乎只能从 onClick 处理程序中调用，因此需要弄清楚为什么调用它。

# java - 在android中处理套接字终止

> ID：10886066
> 
> 赞同：0
> 
> 时间：2012-06-04T18:14:01.467
> 
> 标签：java, android, multithreading, sockets

我使用以下代码连接到设备。

使用这个套接字代码我可以执行所有任务，但是现在我需要在服务器关闭时执行一些功能。我找不到合适的方法，请帮忙。

**编辑**

我想检测服务器何时与该客户端断开连接，这意味着在进行交易后服务器将断开连接，以便我可以禁用按钮，

```
void sendRequest(){

  try {
      this.clientSocket=new Socket("192.168.1.11",2000);
        this.os=new DataOutputStream(this.clientSocket.getOutputStream());
        this.in=new DataInputStream(this.clientSocket.getInputStream());

           sendFirtCommand();   
           Client t=new Client();
        t.start();

        }catch(Exception e){
            e.printStackTrace();

        }       
          }// end of the sendRequest 
```

我的线程代码

```
private class Client extends Thread{
  int time;
  public void run(){
    try{
        while(true){

            //if(in.read()==-1) break;

            int size =in.available();
            if(size>0){

            byte data[]=new byte[size];
            in.readFully(data);
            String str=new String(data);

            // System.out.println(data);
            //char c[]=str.toCharArray();
            str=toHex(data);
            System.out.println(str);
        /*
            if(str.equalsIgnoreCase("050D00E7F0E1000101581D4A1D01FF")){
            System.out.println("Start Left 3"); 

            }

            */

             if(str.equalsIgnoreCase("050d00e7f0e1000101601d4a1d01ff")){
                stopAll();
                handler.post(new Runnable() {
                    @Override
                    public void run() {
                        enableAll();
                    }
                });
            }
         } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T14:57:38.100

如果有帮助，试试这个

```
try{
        while(true){
             if(str.equalsIgnoreCase("050d00e7f0e1000101601d4a1d01ff")){
                stopAll();
                handler.post(new Runnable() {
                    @Override
                    public void run() {
                        enableAll();
                    }
                });
            }
         }
   }catch(IOException e)
   {
     handler.post(new Runnable() {
                    @Override
                    public void run() {
                        enableAll();
                    }
                });
   } 
```

您发布的代码中似乎没有异常处理，如果我遗漏了什么，请告诉我......

# java - char 数组到 int 数组

> ID：10886068
> 
> 赞同：13
> 
> 时间：2012-06-04T18:14:03.737
> 
> 标签：java

我正在尝试将字符串转换为整数数组，以便可以对它们执行数学运算。我在使用以下代码时遇到问题：

```
String raw = "1233983543587325318";

char[] list = new char[raw.length()];
list = raw.toCharArray();
int[] num = new int[raw.length()];

for (int i = 0; i < raw.length(); i++){
    num[i] = (int[])list[i];
}

System.out.println(num); 
```

这给了我一个“不可转换的类型”错误，需要： int[] found: char 我还尝试了其他一些方法，例如 Character.getNumericValue 并直接分配它，无需任何修改。在这些情况下，它总是输出相同的垃圾“[I@41ed8741”，无论我使用什么转换方法或（！）字符串的实际值是什么。它与unicode转换有关吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-04T18:24:28.467

您的解决方案存在许多问题。首先是循环条件`i > raw.length()`错误 - 你的循环永远不会执行 - 条件应该是`i < raw.length()`

二是演员阵容。您正在尝试转换为整数数组。事实上，由于结果是 char 你不必强制转换为 int - 转换将自动完成。但转换后的数字并不是你想象的那样。它不是您期望的整数值，但实际上是字符的 ASCII 值。所以你需要减去零的 ASCII 值来得到你期望的整数值。

第三个是您尝试打印结果整数数组的方式。您需要遍历数组的每个元素并将其打印出来。

```
 String raw = "1233983543587325318";

    int[] num = new int[raw.length()];

    for (int i = 0; i < raw.length(); i++){
        num[i] = raw.charAt(i) - '0';
    }

    for (int i : num) {
        System.out.println(i);
    } 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-06-05T19:32:05.643

Java 8 中的两种方式：

```
String raw = "1233983543587325318";

final int[] ints1 = raw.chars()
    .map(x -> x - '0')
    .toArray();

System.out.println(Arrays.toString(ints1));

final int[] ints2 = Stream.of(raw.split(""))
    .mapToInt(Integer::parseInt)
    .toArray();

System.out.println(Arrays.toString(ints2)); 
```

第二种解决方案可能效率很低，因为它使用正则表达式并为每个数字创建字符串实例。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-04T18:18:36.393

每个人都正确识别了代码中的无效转换。您根本不需要该转换：Java 将隐式转换`char`为：`int`

```
String raw = "1233983543587325318";

char[] list = raw.toCharArray();
int[] num = new int[raw.length()];

for (int i = 0; i < raw.length(); i++) {
    num[i] = Character.digit(list[i], 10);
}

System.out.println(Arrays.toString(num)); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-04T18:16:57.660

您不应该将每个元素转换为整数数组`int[]`，而是转换为整数`int`：

```
for (int i = 0; i > raw.length(); i++)
{
   num[i] = (int)list[i];
}

System.out.println(num); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-04T18:15:55.507

这一行：

```
num[i] = (int[])list[i]; 
```

应该：

```
num[i] = (int)list[i]; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-04T18:17:31.123

您不能`list[i]`转换为`int[]`，而是转换为`int`。数组的每个索引只是一个 int，而不是一个 int 数组。

所以应该只是

```
num[i] = (int)list[i]; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-19T20:29:48.770

供日后参考。即使使用强制转换，char 到 int 的转换也不是隐式的。你必须做这样的事情：

```
 String raw = "1233983543587325318";

    char[] list = raw.toCharArray();
    int[] num = new int[list.length];

    for (int i = 0; i < list.length; i++){
        num[i] = list[i] - '0';
    }
    System.out.println(Arrays.toString(num)); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-04T18:16:16.290

此处的此类：http: [//docs.oracle.com/javase/7/docs/api/java/lang/Integer.html](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html)应该可以帮助您。它可以解析字符串中的整数。这比使用数组要容易一些。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-06-04T18:23:16.453

关于转换问题，每个人都是正确的。看起来您实际上尝试了正确的版本，但输出是乱码。这是因为`system.out.println(num)`在这种情况下不会做你想做的事:)`system.out.println(java.util.Arrays.toString(num))`改为使用，并查看[这个线程](https://stackoverflow.com/questions/409784/simplest-way-to-print-an-array-in-java)以获取更多详细信息。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-12-23T21:13:06.640

```
String raw = "1233983543587325318";
char[] c = raw.toCharArray();
int[] a = new int[raw.length()];

for (int i = 0; i < raw.length(); i++) {
   a[i] = (int)c[i] - 48;
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-09-11T05:45:25.277

你可以这样试试

```
String raw = "1233983543587325318";

char[] list = new char[raw.length()];
list = raw.toCharArray();
int[] num = new int[raw.length()];

for (int i = 0; i < raw.length(); i++) {
    num[i] = Integer.parseInt(String.valueOf(list[i]));
}

for (int i: num) {
    System.out.print(i);
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-06-29T11:17:27.173

简单而现代的解决方案

```
int[] result = new int[raw.length()]; 
Arrays.setAll(result, i -> Character.getNumericValue(raw.charAt(i))); 
```

# asp.net-mvc - MVC3 (Razor) Json 获取Controller中的反序列化数据

> ID：10886074
> 
> 赞同：1
> 
> 时间：2012-06-04T18:14:26.390
> 
> 标签：asp.net-mvc, json, razor, stringify, jsonserializer

我再次需要 Asp.Net MVC（Razor View Engine）的帮助。在我的视图（索引）中，我有

```
@model IEnumerable<Movie> 
```

我想将模型传递给控制器​​：我以这种方式对模型进行字符串化：

```
<script type="text/javascript">
function postData(){
var urlact='@Url.Action("createDoc")';
var model ='@Html.Raw(Json.Encode(Model));

$.ajax({
    data: JSON.stringify(model),
    type:"POST",
    url:urlact, 
    datatype:"json",
    contentType:"application/json; charset=utf-8"
});
}
</script> 
```

一切似乎都有效，因为我知道字符串化数据是：

```
'[{"ID":1,"Title":"The Lord of the Rings: The Fellowship of the Ring","ReleaseDate":"\/Date(1007938800000)\/","Genre":"Fantasy","Price":93000000.00},{"ID":2,"Title":"The Lord of the Rings: The Two Towers","ReleaseDate":"\/Date(1039042800000)\/","Genre":"Fantasy","Price":94000000.00},{"ID":3,"Title":"The Lord of the Rings: The Return of the King","ReleaseDate":"\/Date(1070233200000)\/","Genre":"Fantasy","Price":94000000.00}]'; 
```

问题是：在控制器中，methodName *“createDoc”*（如脚本中声明的）我无法访问字符串化数据。根据网上建立的一些样本，我的方法是这样的：

```
[HttpPost]
    public ActionResult createDoc(IEnumerable<Movie> movies)
    {
        //...using movies list
        return View();
    } 
```

为什么我无法访问字符串化数据？我该怎么做，是否有一些方法可以调用来反序列化 Controller 方法中的模型？另外，我可以使用 serialize() 方法而不是 stringify() 方法吗？如果是这样，视图和控制器方面的语法是什么？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T18:56:44.503

您已经在 J​​avaScript 变量中获得了字符串化数据`model`。您只需要调用`JSON.stringify`不是字符串的对象。

如果您想在不修改的情况下将数据发布到您的操作`model`中，只需在`model`没有的情况下传入， `JSON.stringify`ModelBinder 将负责`IEnumerable<Movie>`为您反序列化它。

如果你想`model`用作字符串以外的东西，你需要调用`JSON.parse`字符串。换句话说：

```
var model = JSON.parse('@Html.Raw(Json.Encode(Model))'); 
```

然后，你会想保持你的`JSON.stringify`电话。

最后，`stringify`是浏览器特定对象的方法`JSON`，而`serialize`ASP.NET MVC 特定`Json`对象的方法。两个不同的世界，同一个名字。

# .net - 如何在 wcf 的对象中使用列表对象

> ID：10886076
> 
> 赞同：0
> 
> 时间：2012-06-04T18:14:29.813
> 
> 标签：.net, wcf

我有 wcf 服务，我在下面提到了三个类，其中我使用前两个类从客户端获取对象。在**StudentsInformation**类上，我必须传递一个列表，即其中包含名称、标记、 avg等..我试图作为列表传递..我想根据主题的数量进行数据库更新，以及如何在WebcLient中检查......（即如何在列表中传递数据）你能帮我吗..有了这个

```
 [DataContract(Name = "StudentsInformation")]
    public class StudentsInformation
    {
        [DataMember]
        public int ID { get; set; }
        [DataMember]
        public string Name { get; set; }
        [DataMember]
        public string Total { get; set; }
        [DataMember]
        public List<Subjects> Subjectslist { get; set; }
    }

 [DataContract(Name = "Subjects")]
    public class Subjects
    {
        [DataMember]
        public string SubjName { get; set; }
        [DataMember]
        public int Mark { get; set; }
        [DataMember]
        public int Avg { get; set; }
    }

[DataContract(Name = "ReturnList")]
public class ReturnList
{
    [DataMember]
    public int TotalMark { get; set; }
    [DataMember]
    public int StudenID { get; set; }
    [DataMember]
    public int Rank { get; set; }
} 
```

在 svc cs 我有

```
 public List<ReturnList> GetStudentdetails(StudentsInformation objStudentsInfo)
        {
            string StudentName = objStudentsInfo.Name;
            int StudentID = objStudentsInfo.ID;
            List<ReturnList> data = new List<ReturnList>();
            //loop with objStudentsInfo.Subjectslist and calls DB
            return data;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T19:40:20.357

在 WCF 服务中在返回值或参数中使用 List<> 是完全有效的，但您可能错误地使用了客户端代理（[例如](https://stackoverflow.com/questions/1592085/calling-client-side-wcf-service-with-type-listof-t)）

# ms-access - 更改备忘录输入框的样式

> ID：10886095
> 
> 赞同：2
> 
> 时间：2012-06-04T18:15:47.340
> 
> 标签：ms-access, vba, user-input

我是 Microsoft Access 的初学者，尝试创建数据库，其中一个字段是备注字段。我想请求该字段的用户输入；但是，标准输入框只有一行供用户输入数据，虽然您可以使用它来添加大量文本，但这并不令人愉快。

我想要一个接受备忘录的输入框，以便用户输入一段文本时，他可以在提交时看到整个段落。

我将如何使用输入框而不是表单来做到这一点？这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T19:39:47.830

我猜您正在将数据直接输入到表中。如果是这样，您只需将鼠标悬停在两行之间的一条线上，直到出现双箭头并单击并拖动。关闭表格时，它会询问您是否要保存更改。如果您说是，那么之后每次打开时它都会显示相同。这将为您提供每个字段的更多查看区域。但是，我确实同意 HansUp，这最好通过表格来控制。这是一张每行有更多空间的桌子的快照。

![在此处输入图像描述](../Images/b7110afa659872e671d56c231e488574.png)

查询结果也可以这样做。

# php - 我是 CakePHP 的新手。该站点菜单是否合理且传统？

> ID：10886097
> 
> 赞同：1
> 
> 时间：2012-06-04T18:15:53.867
> 
> 标签：php, cakephp, cakephp-2.0, cakephp-model

我需要一些反馈来确保我没有完全错过 CakePHP/MVC 的要点。

我正在用 CakePHP 设计一个 mini-cms——本质上是一个相册。我希望在每一页上都有一个标准的样板下拉菜单。自然，当用户删除和添加相册时，菜单需要是动态的。

`View::actionRequest()`我的目标：构建与（即，不是视图回调控制器，而是让控制器在渲染之前将设置变量推送到视图类）相反方向移动的东西。我的理解是这`View::requestAction()`不是很优雅，而是很慢。

这是包含菜单关键字的表格的模型。`app/Model/ModelItem.php`

```
class MenuItem extends AppModel {
    public function buildMainMenu() {
        return $this->find('all');
    }
} 
```

因为我到处都想要它，所以我把电话放在`AppController`

```
class AppController extends Controller {
    public function beforeFilter() {
        $this->loadModel('MenuItem');
        $this->set('mainMenuItems',$this->MenuItem->buildMainMenu());
    }
} 
```

这是一个元素，它被转储到我的 CSS 的默认布局顶部 - 元素文件：`app/View/Element/navigation.ctp` - 布局：`app/View/Element/Layout/default.ctp`

```
<ul id="navigation">
    <?php
    foreach($mainMenuItems as $item) {
        echo "<li>".$item['MenuItem']['name']."</li>";
    }
    ?>
</ul> 
```

最后，我得到了一个可爱的、列表中所有项目的项目符号列表。我完全把这件事搞砸了吗？难道我都错了吗？我不知道。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T19:31:40.553

我认为您的方法没有任何问题。不过，这里有一些注释，完全可选：

*   我会将获取代码的菜单从`beforeFilter()`移至[`beforeRender()`](http://book.cakephp.org/2.0/en/controllers.html#Controller%3a%3abeforeRender). 没有理由这么早做，您可能会在需要菜单之前抛出异常，或者您可能会将用户重定向到另一个页面。此外，您可以在此处获得有关请求的更多信息，因此您可以执行诸如突出显示菜单中的当前页面/项目/用户之类的操作。
*   将元素渲染代码移动到某种 MenuHelper 中，这将使您的布局更清晰（例如`$this->Menu->render()`在布局中）。您还可以使用 HtmlHelper 通过 cake 渲染您的项目，并让 cake 负责标记的正确性。
*   如果您将渲染移到帮助程序中，请为整个事物实施某种缓存方案，以加快速度 - 如果有必要的话。缓存是否可能，或者您是否应该在控制器或助手中进行缓存完全取决于您和您的应用程序:)

我想总体建议是尝试将部分功能与应用程序的其余部分隔离开来；它更易于阅读、维护和修改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T15:50:03.077

当您在布局/视图中输出菜单时，我会将其打包成一个元素并使用请求操作来获取数据：

/app/View/Elements/main_menu.ctp：

```
$mainMenuItems = $this->requestAction('/menu_items/buildMainMenu');

<ul id="navigation">
    <?php
    foreach($mainMenuItems as $item) {
        echo "<li>".$item['MenuItem']['name']."</li>";
    }
    ?>
</ul> 
```

并将其包含在您的布局/视图中：

```
echo $this->Element('main_menu'); 
```

这样，如果您有一个不需要菜单的视图/布局（例如 Ajax），您就不会浪费数据库查询。

# ios - 裁剪 AVCaptureSession 预览

> ID：10886102
> 
> 赞同：2
> 
> 时间：2012-06-04T18:16:01.210
> 
> 标签：ios, preview, crop, avcapturesession

我正在显示 320x320 捕获窗口的视频预览，并使用 videoGravity 让它填充正方形：

```
captureVideoPreviewLayer.videoGravity = AVLayerVideoGravityResizeAspectFill; 
```

然后，我从会话中抓取一张照片质量的图像并从 0、0 开始对其进行裁剪。我遇到的问题是保存的图像显示在帧的顶部（但不是左侧）比预览更多。我想基本上只看到框架的顶部，似乎我看到了中间部分，希望我能正确解释自己。

如果有帮助，这里是代码片段：

```
AVCaptureVideoPreviewLayer *captureVideoPreviewLayer = [[AVCaptureVideoPreviewLayer alloc] initWithSession:session];
captureVideoPreviewLayer.frame = _cameraView.bounds;
[_cameraView.layer addSublayer:captureVideoPreviewLayer];
captureVideoPreviewLayer.videoGravity = AVLayerVideoGravityResizeAspectFill;

AVCaptureDevice *device = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo]; 
```

提前感谢您的帮助。

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T09:34:33.933

我不知道如何做到这一点，所以我决定通过更改裁剪区域而不是预览区域来修复它。

# java - 我需要能够在eclipse中找到行号和方法名

> ID：10886103
> 
> 赞同：3
> 
> 时间：2012-06-04T18:16:02.690
> 
> 标签：java, c++, c, eclipse

我正在尝试查找光标所在的当前函数的行号和函数名称。我需要将此信息传递给另一个函数以供以后处理。

这里还有一些细节。编辑器将是 CEditor。我有一个将使用这些数据的插件。我只需要显示当前函数和它开始的行号。因此，如果函数 XYZ 从第 5 行开始，并且用户在第 8 行输入函数。我需要获取 XYZ 和第 5 行。

我正在用 Java 编程，但用户将用 C/C++ 编写。

抱歉，我刚刚注意到我错过了很多细节。我正在构建需要用户光标当前所在方法的 Eclipse 插件。仅当他们使用 CDT 插件中的 CEditor 时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T13:05:17.293

CDT（C 开发工具）API 的文档在[这里。](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.cdt.doc.isv/guide/dom/index.html)CDT 支持“DOM”（文档对象模型），您可以通过它了解正在编辑的文档。基本上，您需要获取`ITranslationUnit`已编辑文档的对象，然后调用`getElementAtLine()`以获取`ICElement`描述给定行号处代码的对象。`ICElement`是描述各种 C 语言元素的子类的大层次结构的根。

您可以`ITranslationUnit`通过调用轻松获取`CoreModelUtil.findTranslationUnit()`，它只需将 a`IFile`作为参数。

# c - 如何设置我的代码/VS10 以识别 .c 文件中的 CUDA 函数调用？

> ID：10886104
> 
> 赞同：1
> 
> 时间：2012-06-04T18:16:14.143
> 
> 标签：c, visual-studio-2010, build, compiler-errors, cuda

基本上，我让编译器编译我的 .cu 文件，并且（我认为）在这些 .cu 文件中有完整的操作，但是当我尝试调用它们（`kernel<<<1,1>>>(void)`）时，编译器会由于 CUDA 语法而注册语法错误。此外，像 cudaMalloc 这样的调用在 c 文件中也会失败。

这里有三个非常短的文件，所以我可以告诉你哪里出错了。

```
//kernel.cu    
#include "kernel.h"
#include <cuda.h>
#include <cuda_runtime_api.h>

__global__ int kernel(void){     
    return 5;
} 
```

和

```
//kernel.h
#ifndef _KERNEL_h_
#define _KERNEL_h_

extern "C" int kernel(void);

#endif 
```

和

```
//main.c
#include "kernel.h"
#include <cuda.h>
#include <cuda_runtime_api.h>

int main() {
   int* device_a;

   cudaMalloc( (void**)&device_a, sizeof(int) );

   kernel<<<1,1>>>();
} 
```

我从一些 SDK 示例中获得了头文件。另外，我使用 CUDA 4.2 设置了我的构建配置，因此为什么 .cu 文件可以编译。如果我犯了任何偶然的语法错误，那是因为我为了发布而简化了它，而不是它实际上在源代码中，尽管请提及它以防万一。

kernel.cu 编译良好。

kernel.h 在“extern...”行有一个错误：“error C2059: syntax error: 'string'”。（这可能是因为我是从一个 c++ 示例中获取的吗？）

main.c 有一个错误：“错误 C2065：‘内核’：未声明的标识符”

和：“错误 C2059：语法错误：'<'”

但是当我注释掉内核调用时，它只是 cudaMalloc，我得到：“错误 LNK2019：未解析的外部符号 _cudaMalloc@8 在函数 _main 中引用”

和：“致命错误 LNK1120：1 个未解决的外部问题”

是 Visual Studio 2010 的东西，还是我不包括的东西？从 SDK 示例中，我无法判断我做错了什么，除此之外，我认为他们找到了一种不使用三方括号的方法（CTRL+F 没有找到任何方法）。任何帮助表示赞赏。先感谢您！

编辑：在查看了更多示例之后，他们确实使用三括号语法就好了。

编辑：**对于那些使用 this 作为参考**，`__global__`函数只能返回 void。如果您像我一样尝试返回任何其他内容，您将收到编译器错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T18:25:50.347

1.  将调用 CUDA 内核的函数放在**.cu**文件中。

2.  设置 VS2010 以使用 CUDA 编译器编译 CU 文件，而不是内置编译器（使用位于 CUDA SDK 中的 CUDA 规则文件（Cuda.props、Cuda.xml、Cuda.targets））。

3.  我建议将内核放在具有不同扩展名的文件中（例如**.curnel**文件），这样它们就不会被直接编译（仅在调用时）。

4.  我建议将调用 CUDA 内核的函数声明放在**.cuh**文件中。

# django - 如何从 Django 中的子对象中选择基类（使用模型继承）

> ID：10886106
> 
> 赞同：0
> 
> 时间：2012-06-04T18:16:25.343
> 
> 标签：django, django-models, django-inheritance

我有一个基本模型和一个从它继承的模型，在设置上与此类似：

```
class Archive(models.Model):
    pub_date = models.DateField()

class ArchiveB(Archive):
    another_date = models.DateField() 
```

如何从子类访问基类？例如：

```
archiveb_instance = ArchiveB.objects.get(pk=5) 
base_instance = archiveb_instance.archive #This doesn't work. 
```

根据文档，它只是在孩子中自动创建的一对一关系，所以我认为它会让我倒退。我想要这个的原因是因为我有第三个非存档模型，它具有存档的外键。我想要存档的外键，因为这样第三个模型可以与任何存档相关，而不仅仅是特定的存档类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T18:49:19.103

我想你可能正在寻找`archiveb_instance.archive_ptr`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T18:22:00.283

它们共享相同的 PK，因此只需将其分配给`_id`附加的字段。

# python - 在python中使用部分键在dict中添加列

> ID：10886111
> 
> 赞同：0
> 
> 时间：2012-06-04T18:16:41.957
> 
> 标签：python, dictionary, key

设置字典：

```
rr = range(1,11)
ft =[('sd:jan:'+ str(x), 'News') for x in rr]    
fd = dict(ft)

 fd
    {'sd:jan:1': 'News',
     'sd:jan:10': 'News',
     'sd:jan:2': 'News',
     'sd:jan:3': 'News',
     'sd:jan:4': 'News',
     'sd:jan:5': 'News',
     'sd:jan:6': 'News',
     'sd:jan:7': 'News',
     'sd:jan:8': 'News',
     'sd:jan:9': 'News'}

fd.keys()

['sd:jan:10',
 'sd:jan:2',
 'sd:jan:3',
 'sd:jan:1',
 'sd:jan:6',
 'sd:jan:7',
 'sd:jan:4',
 'sd:jan:5',
 'sd:jan:8',
 'sd:jan:9'] 
```

如何在键中添加“jan”的所有值？

编辑：我为“jan”的部分键添加值（1+2+3+4+5+6+...+10）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T18:23:24.120

如果你可以避免它，你不应该将数字转换为字符串，如果你想稍后将它们作为数字做一些事情。这个怎么样：

```
rr = range(1,11)
ft =[(('sd','jan',x), 'News') for x in rr]    
fd = dict(ft)

tot = sum(val
   for (key, subkey, val) in fd
   if subkey == 'jan')

>>>tot
55 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T18:28:34.090

如何使用[生成器表达式](http://www.python.org/dev/peps/pep-0289/)：

```
sum(int(i.split(':')[-1]) for i in fd.keys()) 
```

给出：

```
55 
```

按 拆分每个条目`:`，获取最后一个字段，转换为 int 并将它们相加。

In case you'd needed to examine the numbers, or wanted them for some reason later you could easily collect them in a list using [list comprehension](http://docs.python.org/tutorial/datastructures.html#list-comprehensions):

```
[int(i.split(':')[-1]) for i in fd.keys()] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T18:22:58.927

```
len([i for i in fd if i[3:6] == 'jan']) 
```

创建列表推导，通过 'jan' 子字符串 ( `[3:6]`) 对其进行过滤。使用 计算结果列表`len`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T18:24:26.930

```
for key in fd:
if 'jan' in key:
    total=total+int(key.split(':')[-1]) 
```

# .net - 能否制作富文本框显示控件图片？

> ID：10886122
> 
> 赞同：0
> 
> 时间：2012-06-04T18:17:23.337
> 
> 标签：.net, unicode, fonts, richtextbox

我正在尝试在富文本框中显示[控件图片。](http://www.alanwood.net/unicode/control_pictures.html)我需要文本框保持等宽。

当我将所述字符复制粘贴到 Visual Studio 中时，它们看起来是等宽的并且很好。但是在富文本框中显示时，它们只是正方形。我的 IDE 和文本框都在使用 Consolas。

我在我的 IDE 中看到了这一点（最后两个字符是等效的）：

```
richtextbox.Text = new string(new[] {'→', '␣', '␂', '\u2402'}); 
```

但我的文本框显示前两个字符，然后是两个框：

![→␣␂␂](../Images/a12b20536554aa31bc7f3401e792b4cd.png)

我怎样才能得到完整的人物图片来显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T18:38:37.467

Windows 中很少有字体包含大量来自 Unicode 字符集的古怪字符。当我将您的一个控制字符粘贴到 Word 中时，它会将其转换为 Arial Unicode MS 字体，这似乎是字体中不可用的字符的备份。

在插入字符之前，尝试将 Rich Edit 中的字体设置为 Arial Unicode MS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T19:25:39.607

根据给定的要求，您可以使用的唯一字体似乎是[Everson Mono](http://www.evertype.com/emono/)。例如，根据[Fileformat.info 上的字体覆盖信息](http://www.fileformat.info/info/unicode/char/2402/fontsupport.htm)，字符 U+2402 仅包含在少数字体中，而 Everson Mono（连同 Everson Mono Oblique）似乎是其中唯一的等宽字体。

使用混合字体，例如它涵盖的所有字符的Consolas 和一些其他等宽字体通常不会起作用：它会破坏文本的等宽属性。（相同字体大小的不同等宽字体不需要具有相同的提前宽度，而且它们大多没有。）

# xml - XSLT 论坛：显示来自成员关于主题回复的其他数据

> ID：10886125
> 
> 赞同：0
> 
> 时间：2012-06-04T18:17:27.977
> 
> 标签：xml, xslt

我正在使用 XSLT 和 Symphony 构建一个论坛，但在获取主题回复中成员用户名旁边显示的其他成员数据（例如角色/等级、头像）时遇到问题。

现在让我向您展示两个 XML 文档，然后我将解释我如何使用它们以及我遇到问题的地方。它看起来很长，但它只是让你有一个清晰的画面。

这就是主题回复的 XML 的样子。一个包含两个对标题为“测试主题”的主题的回复的示例。这里的重要一点是`author/item`：

```
<topic-replies>
<section id="10" handle="topic-replies">Topic Replies</section>
    <entry id="66">
        <parent-forum>
            <item id="7" handle="general" section-handle="forums" section-name="Forums">General</item>
        </parent-forum>
        <parent-topic>
            <item id="62" handle="test-topic" section-handle="forum-topics" section-name="Forum Topics">Test Topic</item>
        </parent-topic>
        <body><p>Testing post...</p></body>
        <date-added time="14:44" weekday="4">2012-05-03</date-added>
        <author>
            <item id="1" handle="admin" section-handle="members" section-name="Members">Admin</item>
        </author>
    </entry>
    <entry id="67">
        <parent-forum>
            <item id="7" handle="general" section-handle="forums" section-name="Forums">General</item>
        </parent-forum>
        <parent-topic>
            <item id="62" handle="test-topic" section-handle="forum-topics" section-name="Forum Topics">Test Topic</item>
        </parent-topic>
        <body><p>And here's a reply...?</p></body>
        <date-added time="22:56" weekday="5">2012-05-04</date-added>
        <author>
            <item id="1" handle="test-user-1" section-handle="members" section-name="Members">Test User 1</item>
        </author>
    </entry>
</topic-replies> 
```

这是注册成员的 XML：

```
<user-list>
    <section id="1" handle="members">Members</section>
    <entry id="1">
        <username handle="admin">Admin</username>
        <email>admin@email.com</email>
        <role id="2">
            <name handle="administrator">Administrator</name>
        </role>
    </entry>
    <entry id="2">
        <username handle="test-user-1">Test User 1</username>
        <email>test.user.1@email.com</email>
        <role id="4">
            <name handle="user">User</name>
        </role>
    </entry>
</user-list> 
```

当我基于`topic-replies`XML 编写 XSLT 代码时，我只能获取作者的用户名。如果我想要更多数据，我将不得不从`user-list`. 考虑到这些变量，我就是这样做的：

```
<xsl:variable name="user-list" select="/data/user-list/entry"/>
<xsl:variable name="reply-author" select="/data/topic-replies/entry/author/item"/>

<xsl:template match="topic-replies/entry">
    <ul class="profile">
        <xsl:for-each select="$user-list">
            <xsl:if test="username = $reply-author">
                <li><a class="{role/name/@handle}" href="{$root}/user/{username/@handle}"><xsl:value-of select="username"/></a></li>
                <li><xsl:value-of select="role/name"/></li>
            </xsl:if>
        </xsl:for-each>
    </ul>
</xsl:template> 
```

它可以工作，除了在每个回复中它会获取所有参与讨论的作者，而不是只显示指定的作者。输出是这样的：

```
Test Topic

  Testing post...

    Admin
    Administrator

Re: Test Topic

  And here's a reply...?

    Admin
    Administrator
    Test Usuer 1
    User 
```

**我的问题是，如何从模板中获取数据`user-list`并将其插入到`topic-replies`模板中？**

我想我可能需要使用键，但这将是我第一次使用它们，我真的想不出它背后的逻辑。现在，我真的一点头绪都没有。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T02:30:27.133

发生这种情况的原因是您的`user-list`和`reply-author`变量包含用户列表中的所有条目和主题回复中的所有项目。

不要重复列表中的每个用户，而是尝试仅使用项目作者的用户条目：

```
<xsl:template match="topic-replies/entry">
    <xsl:variable name="authorEntry" select="$user-list[username/@handle = current()/author/item/@handle]"/>
    <ul class="profile">
        <li>
            <a class="{$authorEntry/role/name/@handle}" href="{$root}/user/{$authorEntry/username/@handle}">
                <xsl:value-of select="$authorEntry/username"/>
            </a>
        </li>
        <li>
            <xsl:value-of select="$authorEntry/role/name"/>
        </li>
    </ul>
</xsl:template> 
```

这是一个完整的示例供参考：

**XML 输入**

```
<data>
    <topic-replies>
        <section id="10" handle="topic-replies">Topic Replies</section>
        <entry id="66">
            <parent-forum>
                <item id="7" handle="general" section-handle="forums" section-name="Forums">General</item>
            </parent-forum>
            <parent-topic>
                <item id="62" handle="test-topic" section-handle="forum-topics" section-name="Forum Topics">Test Topic</item>
            </parent-topic>
            <body><p>Testing post...</p></body>
            <date-added time="14:44" weekday="4">2012-05-03</date-added>
            <author>
                <item id="1" handle="admin" section-handle="members" section-name="Members">Admin</item>
            </author>
        </entry>
        <entry id="67">
            <parent-forum>
                <item id="7" handle="general" section-handle="forums" section-name="Forums">General</item>
            </parent-forum>
            <parent-topic>
                <item id="62" handle="test-topic" section-handle="forum-topics" section-name="Forum Topics">Test Topic</item>
            </parent-topic>
            <body><p>And here's a reply...?</p></body>
            <date-added time="22:56" weekday="5">2012-05-04</date-added>
            <author>
                <item id="1" handle="test-user-1" section-handle="members" section-name="Members">Test User 1</item>
            </author>
        </entry>
    </topic-replies>
    <user-list>
        <section id="1" handle="members">Members</section>
        <entry id="1">
            <username handle="admin">Admin</username>
            <email>admin@email.com</email>
            <role id="2">
                <name handle="administrator">Administrator</name>
            </role>
        </entry>
        <entry id="2">
            <username handle="test-user-1">Test User 1</username>
            <email>test.user.1@email.com</email>
            <role id="4">
                <name handle="user">User</name>
            </role>
        </entry>
    </user-list>    
</data> 
```

**XSLT 1.0**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:variable name="root" select="'rootVariable'"/>
    <xsl:variable name="user-list" select="/data/user-list/entry"/>

    <xsl:template match="node()|@*">
        <xsl:apply-templates select="node()|@*"/>
    </xsl:template>

    <xsl:template match="/">
        <html>
            <xsl:apply-templates/>
        </html>
    </xsl:template>

    <xsl:template match="topic-replies/entry">
        <xsl:variable name="authorEntry" select="$user-list[username/@handle = current()/author/item/@handle]"/>
        <ul class="profile">
            <li>
                <a class="{$authorEntry/role/name/@handle}" href="{$root}/user/{$authorEntry/username/@handle}">
                    <xsl:value-of select="$authorEntry/username"/>
                </a>
            </li>
            <li>
                <xsl:value-of select="$authorEntry/role/name"/>
            </li>
        </ul>
    </xsl:template>

</xsl:stylesheet> 
```

**HTML 输出**

```
<html>
   <ul class="profile">
      <li><a class="administrator" href="rootVariable/user/admin">Admin</a></li>
      <li>Administrator</li>
   </ul>
   <ul class="profile">
      <li><a class="user" href="rootVariable/user/test-user-1">Test User 1</a></li>
      <li>User</li>
   </ul>
</html> 
```

# jackrabbit - Access jackrabbit repository through Apache Sling

> ID：10886129
> 
> 赞同：0
> 
> 时间：2012-06-04T18:17:34.920
> 
> 标签：jackrabbit, sling

I followed Apache Sling [tutorials](http://sling.apache.org/site/discover-sling-in-15-minutes.html) using its [Launchpad](http://www.apache.org/dyn/closer.cgi/sling/org.apache.sling.launchpad-6-standalone.jar). As I understood, it uses a built in jackrabbit repository within the Launchpad. Is there a way to access a standalone jackrabbit repository using Sling API without using its launchpad?

Thanks.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T12:28:53.973

嵌入式存储库由 org.apache.sling.jcr.jackrabbit.server 捆绑包提供，因此如果此捆绑包及其所需的捆绑包处于活动状态，您应该获得相应的 SlingRepository 服务，该服务由嵌入式 Jackrabbit 存储库提供支持。

# c# - 在我的情况下，这个 Lambda OrderBy 似乎是多余的 - 是吗？

> ID：10886131
> 
> 赞同：0
> 
> 时间：2012-06-04T18:17:44.323
> 
> 标签：c#, generics, lambda, arraylist

我不想有任何不必要的代码，但我也想“安全”。经验观察表明，下面的 OrderBy 什么都不做 - List 已经正确排序。我可以依靠这种情况，并删除该 OrderBy 行吗？

```
HashSet<int> hashSet = new HashSet<int>();
List<int> listInts = new List<int>();
using (var file = new System.IO.StreamReader(selectedFile)) {
    string line;
    int lineNum = 0;
    int Offset = (int)numericUpDownLinesOfContext.Value;
    while ((line = file.ReadLine()) != null)     {
        lineNum++;
        if (line.Contains(PlatypusToSearchFor)) {
            // This adds the lines before and after that will provide the desired context
            // (N lines from the log file before and after the searched for value)
            hashSet.UnionWith(Enumerable.Range(lineNum - Offset, Offset * 2 + 1));
        }
    }
    // Remove any negative numbers, as well as 0, that might have been added 
    // (0, -1, -2, or -3 are all possibilities, but the first line is #1)
    listInts = hashSet.Where(i => i >= 1).ToList();
    // They seem to be ordered correctly already, but this is just in case:
    listInts = listInts.OrderBy(i => i).ToList();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T18:19:49.903

不，您不应该删除`OrderBy`. `HashSet`不保证任何特定的顺序。你可能在测试中很幸运，但你不能保证它会按照你期望的方式排序。

从`HashSet`(http://msdn.microsoft.com/en-us/library/bb359438.aspx) 上的 MSDN 文档：

> 集合是不包含重复元素且**其元素没有特定顺序的集合**。

（重点补充）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T18:25:51.423

如前所述`HashSet`，没有任何特定的顺序。如果你需要这种行为，你可以使用 a[`SortedSet`](http://msdn.microsoft.com/en-us/library/dd412070.aspx)代替，然后你就不需要`OrderBy`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-04T18:27:11.227

`UnionWith`操作不会保留顺序。但是，您也不必使用该`OrderBy`行，因为 .NET 提供[了一个`SortedSet<T>`](http://msdn.microsoft.com/en-us/library/dd412070.aspx)公开集合操作和自动排序行为的[类。](http://msdn.microsoft.com/en-us/library/dd412070.aspx)

# javascript - 带有手动切换的 CSS 移动媒体样式

> ID：10886132
> 
> 赞同：2
> 
> 时间：2012-06-04T18:17:58.617
> 
> 标签：javascript, css, toggle, media

因此，我正在尝试同时构建网站的移动版和桌面版（如果有人感兴趣，请使用 MediaWiki 引擎）。由于我在移动设备构建方面没有太多经验，因此我一直在寻找一些好的移动开发实践。最后，我觉得媒体查询对我需要做的事情有好处，主要是因为在不同的域（如 m.foo.com 与 foo.com）上双重发布对于此任务是不可能的。

CSS 媒体查询的缺点似乎是，手机用户显然无法随时查看桌面格式的网站（使用手机访问时，Google 或 YouTube 就是一个很好的例子）。

有什么方法可以让我在使用媒体查询开发的桌面和移动样式表之间自由切换？对于移动设备下载来说，使用 javascript 会不会太笨重？

我很感激任何建议。谢谢！

编辑：为了澄清，是的，我想单击移动样式上的链接或按钮以切换到桌面样式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T18:34:48.650

我 90% 确定**仅使用 CSS 是不可能的，**但可以使用**PHP 或 Javascript**轻松完成。使用 javascript 不应该太笨重。

一些例子

[PHP 风格切换器](http://robballou.com/switcher/v1/index.php)。

[Javascript 样式切换器](http://www.inetsolution.com/turnleft/post/CSS-Style-Switcher-A-quick-and-dirty-how-to.aspx)

[Jquery 风格切换器](http://www.cssnewbie.com/example/stylesheet-switcher/)

# java - 已安装的应用程序列表在 android 的列表中不显示图标

> ID：10886136
> 
> 赞同：0
> 
> 时间：2012-06-04T18:18:11.073
> 
> 标签：java, android

我正在尝试获取我的 android 设备中所有已安装应用程序的列表。这是我在启动器应用程序中的代码：

```
package com.powergroupbd.appfilter;

import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;

import android.app.Activity;
import android.content.pm.PackageInfo;
import android.content.pm.PackageManager;
import android.graphics.drawable.Drawable;
import android.os.Bundle;
import android.util.Log;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class ApplicationFilterActivity extends Activity {
    /** Called when the activity is first created. */

    ListView appfilter;
    // ArrayAdapter<Applications> adapter;
    PackageManager pck;
    private ArrayList<Applications> results = new ArrayList<Applications>();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        appfilter = (ListView) findViewById(R.id.lvApp);

        PackageManager packageManager = this.getPackageManager();
        List<PackageInfo> applist = packageManager.getInstalledPackages(0);
        Iterator<PackageInfo> it = applist.iterator();
        while (it.hasNext()) {
            PackageInfo pk = (PackageInfo) it.next();
            // if(PackageManager.PERMISSION_GRANTED==packageManager.checkPermission(Manifest.permission.ACCESS_FINE_LOCATION,
            // pk.packageName) &&
            // PackageManager.PERMISSION_GRANTED==packageManager.checkPermission(Manifest.permission.ACCESS_COARSE_LOCATION,
            // pk.packageName)) //checking if the package is having INTERNET
            // permission
            // {
            results.add(get(pk.applicationInfo.loadIcon(getPackageManager()), ""+pk.applicationInfo.loadLabel(packageManager)));
            Log.i("AppName", ""+pk.applicationInfo.loadLabel(packageManager));

            // }
        }

        // Collections.sort(results, new Comparator<Applications>() {
        // @Override
        // public int compare(Applications c1, Applications c2) {
        // return c1.getAppname().compareToIgnoreCase(c2.getAppname());
        // }
        // });

        appfilter.setAdapter(new ArrayAdapter<Applications>(this,
                android.R.layout.simple_list_item_1, results));
    }

    private Applications get(Drawable icon, String appname) {
        return new Applications(icon, appname);
    }
} 
```

我的自定义适配器类在这里：

```
package com.powergroupbd.appfilter;

import java.util.List;

import android.app.Activity;
import android.graphics.Color;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ImageView;
import android.widget.TextView;

public class Customarrayadapter extends ArrayAdapter<Applications> {

    private final List<Applications> list;
    private final Activity context;

    public Customarrayadapter(Activity context, List<Applications> list) {
        super(context, R.layout.row, list);
        this.context = context;
        this.list = list;
    }

    static class ViewHolder {

        protected ImageView icon;
        protected TextView appame;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View view = null;
        if (convertView == null) {
            LayoutInflater inflator = context.getLayoutInflater();
            view = inflator.inflate(R.layout.row, null);
            final ViewHolder viewHolder = new ViewHolder();
            viewHolder.icon = (ImageView) view.findViewById(R.id.ivIcon);
            viewHolder.appame = (TextView) view.findViewById(R.id.tvAppName);
            viewHolder.appame.setTextColor(Color.WHITE);

            view.setTag(viewHolder);
        } else {
            view = convertView;

        }

        ViewHolder holder = (ViewHolder) view.getTag();
        holder.icon.setImageDrawable(list.get(position).getIcon());
        holder.appame.setText(list.get(position).getAppname());

                return view;
    }
} 
```

这是我的应用程序类：

```
package com.powergroupbd.appfilter;

import android.graphics.drawable.Drawable;

public class Applications {

    private Drawable icon;
    private String appname;

    public Applications(Drawable icon, String appname) {

        this.icon = icon;
        this.appname = appname;

    }

    public Drawable getIcon() {
        return icon;
    }

    public void setIcon(Drawable icon) {
        this.icon = icon;
    }

    public String getAppname() {
        return appname;
    }

    public void setAppname(String appname) {
        this.appname = appname;
    }

} 
```

最后清单是：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.powergroupbd.appfilter"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".ApplicationFilterActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

如果我运行该程序，那么它只显示一些垃圾字符串值列表（com.powergroupbd.appfilter.Applications@44297...），没有任何图标。

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T18:44:31.337

您需要为 Applications 类覆盖它

因此，将其添加到您的`Applications.java`文件中：

```
public String toString(){
    return appname;
} 
```

这将使 toString 调用返回应用程序实例的名称，而不是内存地址。您可以在此方法中将您喜欢的任何信息添加到返回的字符串中。

**编辑：**

改变这一行：

```
appfilter.setAdapter(new ArrayAdapter<Applications>(this, android.R.layout.simple_list_item_1, results)); 
```

对此：

```
appfilter.setAdapter(new Customarrayadapter(this, results)); //<-- also you should camelCase the name of your adapter class. 
```

# java - 升级到 Hibernate4 和 @ElementCollection 导致无法查找现有数据

> ID：10886138
> 
> 赞同：4
> 
> 时间：2012-06-04T18:18:29.850
> 
> 标签：java, sql, hibernate, h2

我们有一个具有权限的模型类`User`，`List<String>`如下所示：

```
@LazyCollection(LazyCollectionOption.FALSE)
@CollectionOfElements
@Column()
private List<String> permissions = Collections.emptyList(); 
```

它生成了一个 SQL 表，其中包含如下条目：

![H4升级前的用户权限](../Images/2fb6ae98c7d4faefe9aea08a868665c4.png)

我们最近升级到了 Hibernate 4，随着`@CollectionOfElements`注解从弃用变为完全删除，我们认为这是转移到 的好时机`@ElementCollection`，如下所示：

```
@LazyCollection(LazyCollectionOption.FALSE)
@ElementCollection // << CHANGED
@Column()
private List<String> permissions = Collections.emptyList(); 
```

但是，在启动时，我们无法使用我们的*管理*帐户登录。好奇的是，我们使用 H2 的 JAR 检查了数据库，发现表已被更改：

![之后的用户权限](../Images/f3189c2b8ad945408eb95c925ca2443d.png)

**我的问题：**

1.  是否有从旧`@CollectionOfElements`到新的 DDL/模式更改的完整列表`@ElementCollection`？
2.  是否有推荐的做法或我可以为这些属性提供的附加注释，以确保向后兼容性？（我可以指定特定的名称映射方案或列名吗？）
3.  最后，我假设所有`Collection`类型都会受到此更改的影响 - `Sets`,`Maps`等。我只是想确保我们在升级过程中不会留下任何数据或不遗余力。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T18:53:49.600

第一个问题：

我一个都不知道。但是 JPA 规范是免费提供的，它描述了默认的表和列名是什么。

第二个问题：

```
@ElementCollection
@CollectionTable(name = "USER_PERMISSIONS"
                 joinColumns = @JoinColumn(name = "USER_ID"))
@Column(name = "ELEMENT")
private List<String> permissions = Collections.emptyList(); 
```

我个人总是指定表名和列名。它避免了这种意外，让我总是可以选择我想要的名字，并且是自我记录的。而且我也更喜欢自己创建数据库模式和 DDL。这可确保正确创建所有必需的索引、约束、注释等。

第三个问题：是的，收藏的性质无关紧要。请参阅第二个问题的答案以避免此类问题。

# asp.net-mvc - ScriptBundle not including other script depending on the ordering

> ID：10886147
> 
> 赞同：0
> 
> 时间：2012-06-04T18:19:20.567
> 
> 标签：asp.net-mvc

I'm trying to combine all scripts into one.. I have two folders, the main folder 'scripts' and the other 'scripts/other'.

When I try:

```
BundleTable.Bundles.Add(new ScriptBundle("~/scripts/all").Include("~/Scripts/*.js", "~/Scripts/other/*.js")); 
```

scripts from 'scripts/other' are not included. but when I invert the order:

```
BundleTable.Bundles.Add(new ScriptBundle("~/scripts/all").Include("~/Scripts/other/*.js", "~/Scripts/*.js")); 
```

it works!! Someone can tell me why?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T23:07:15.553

您可以尝试`IncludeDirectory`直接调用这些方法并查看是否看到相同的问题吗？

```
ScriptBundle("~/scripts/all").IncludeDirectory("~/Scripts", "*.js").IncludeDirectory("~/Scripts/other", "*.js")); 
```

如果这可行，那么我们可能在这里有一个错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T21:48:17.010

我不知道发生了什么，但这是 System.Web.Optimization.Bundle 中的代码：

```
// System.Web.Optimization.Bundle
public Bundle Include(params string[] virtualPaths)
{
    for (int i = 0; i < virtualPaths.Length; i++)
    {
        string text = virtualPaths[i];
        Exception ex = Bundle.ValidateVirtualPath(text, "virtualPaths");
        if (ex != null)
        {
            throw ex;
        }
        if (text.Contains('*'))
        {
            int num = text.LastIndexOf('/');
            string text2 = text.Substring(0, num);
            if (text2.Contains('*'))
            {
                throw new     ArgumentException(string.Format(CultureInfo.CurrentCulture,     OptimizationResources.InvalidPattern, new object[]
                {
                text
            }), "virtualPaths");
        }
        string text3 = "";
        if (num < text.Length - 1)
        {
            text3 = text.Substring(num + 1);
        }
        PatternType patternType = PatternHelper.GetPatternType(text3);
        ex = PatternHelper.ValidatePattern(patternType, text3, "virtualPaths");
        if (ex != null)
        {
            throw ex;
        }
        this.IncludeDirectory(text2, text3);
    }
    else
    {
        this.IncludeFile(text);
    }
}
return this;
} 
```

# xslt-1.0 - 使用 xsl:for-each 访问谓词中的当前节点

> ID：10886150
> 
> 赞同：2
> 
> 时间：2012-06-04T18:19:31.283
> 
> 标签：xslt-1.0, xpath-1.0

我一直在寻找如何访问当前节点，同时使用`xsL:for-each`. 这是我的 XML：

```
<events>
    <event>
        <date>
            <year>2012</year>
            <month>July</month>
        </date>
        <description>...</description>
    </event>
    <!-- more events -->
</events> 
```

我试图实现的是这样的 HTML 表示：

```
<h2>2012</h2>
<dl>
    <dt>July</dt>
    <dd>One of these for every event with year=2012 and month=July</dd>

    <dt>August</dt>
    <!-- ... -->
</dl>
<h2>2013</h2>
<!-- ... --> 
```

我正在使用 XPath 表达式来获取所有不同的年份，然后遍历它们，调用`year`带有参数`$year`和`$events`. 获得价值`$year`很容易，但我正在努力寻找正确的事件。以下将不起作用，可能是因为`.`在第二个谓词中指的是`event`正在测试的谓词。但是如何访问`year`那里？

```
<xsl:template match="events">
<xsl:for-each select="event[not(date/year=preceding-sibling::event/date/year)]/date/year">
<xsl:call-template name="year">
    <xsl:with-param name="year" select="." />
    <xsl:with-param name="events" select="event[date/year=.]" />
</xsl:call-template>
</xsl:for-each>
</xsl:template> 
```

提前谢谢了！

PS：必须使用 XPath 和 XSLT 1.0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T03:24:14.217

**这种转变**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kYear" match="year" use="."/>

 <xsl:key name="kEventByMonthYear" match="event"
  use="string(date)"/>

 <xsl:key name="kMonthByMonthYear" match="month"
  use="string(..)"/>

 <xsl:key name="kMonthByYear" match="month"
 use="../year"/>

 <xsl:template match="/*">
  <xsl:for-each select=
    "*/date/year
            [generate-id() = generate-id(key('kYear', .)[1])]
    ">
   <h2><xsl:value-of select="."/></h2>
   <dl>
      <xsl:apply-templates select=
      "key('kMonthByYear', current())
           [generate-id()
           =
            generate-id(key('kMonthByMonthYear',
                             string(..)
                         )[1]
                     )
            ]"/>
      </dl>
  </xsl:for-each>
 </xsl:template>

 <xsl:template match="month">
    <dt><xsl:value-of select="."/></dt>

    <xsl:for-each select=
    "key('kEventByMonthYear', string(current()/..))">
     <dd><xsl:value-of select="description"/></dd>
    </xsl:for-each>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于以下 XML 文档时：**

```
<events>
    <event>
        <date>
            <year>2012</year>
            <month>January</month>
        </date>
        <description>Jan1</description>
    </event>
    <event>
        <date>
            <year>2012</year>
            <month>January</month>
        </date>
        <description>Jan2</description>
    </event>
    <event>
        <date>
            <year>2012</year>
            <month>March</month>
        </date>
        <description>Mar1</description>
    </event>
    <event>
        <date>
            <year>2012</year>
            <month>March</month>
        </date>
        <description>Mar2</description>
    </event>
    <event>
        <date>
            <year>2012</year>
            <month>March</month>
        </date>
        <description>Mar3</description>
    </event>
    <event>
        <date>
            <year>2012</year>
            <month>July</month>
        </date>
        <description>Jul1</description>
    </event>
    <event>
        <date>
            <year>2012</year>
            <month>July</month>
        </date>
        <description>Jul2</description>
    </event>
    <event>
        <date>
            <year>2012</year>
            <month>September</month>
        </date>
        <description>Sep1</description>
    </event>
    <event>
        <date>
            <year>2012</year>
            <month>October</month>
        </date>
        <description>Oct1</description>
    </event>
    <event>
        <date>
            <year>2012</year>
            <month>October</month>
        </date>
        <description>Oct2</description>
    </event>
    <event>
        <date>
            <year>2012</year>
            <month>November</month>
        </date>
        <description>Nov1</description>
    </event>
    <event>
        <date>
            <year>2012</year>
            <month>November</month>
        </date>
        <description>Nov2</description>
    </event>
    <event>
        <date>
            <year>2012</year>
            <month>December</month>
        </date>
        <description>Dec1</description>
    </event>
    <event>
        <date>
            <year>2012</year>
            <month>December</month>
        </date>
        <description>Dec2</description>
    </event>
    <event>
        <date>
            <year>2012</year>
            <month>December</month>
        </date>
        <description>Dec3</description>
    </event>
    <event>
        <date>
            <year>2013</year>
            <month>January</month>
        </date>
        <description>Jan1</description>
    </event>
    <event>
        <date>
            <year>2013</year>
            <month>January</month>
        </date>
        <description>Jan2</description>
    </event>
</events> 
```

**产生想要的正确结果：**

```
<h2>2012</h2>
<dl>
   <dt>January</dt>
   <dd>Jan1</dd>
   <dd>Jan2</dd>
   <dt>March</dt>
   <dd>Mar1</dd>
   <dd>Mar2</dd>
   <dd>Mar3</dd>
   <dt>July</dt>
   <dd>Jul1</dd>
   <dd>Jul2</dd>
   <dt>September</dt>
   <dd>Sep1</dd>
   <dt>October</dt>
   <dd>Oct1</dd>
   <dd>Oct2</dd>
   <dt>November</dt>
   <dd>Nov1</dd>
   <dd>Nov2</dd>
   <dt>December</dt>
   <dd>Dec1</dd>
   <dd>Dec2</dd>
   <dd>Dec3</dd>
</dl>
<h2>2013</h2>
<dl>
   <dt>January</dt>
   <dd>Jan1</dd>
   <dd>Jan2</dd>
</dl> 
```

**说明**：

正确使用**[Muenchian 方法进行分组](http://www.jenitennison.com/xslt/grouping/muenchian.html)**——使用复合分组键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T05:28:59.070

@Dimitre Novatchev 的回答更为详尽，但我发现了另一种我想分享的可能性。它不依赖于`key`s，因此更“对新手友好”。另一方面，它也没有解决原来的“访问迭代的当前节点”问题：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:transform version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:template match="events">
        <xsl:for-each select="event[not(date/year=preceding-sibling::event/date/year)]/date/year">
            <xsl:call-template name="year">
                <xsl:with-param name="year" select="." />
            </xsl:call-template>
        </xsl:for-each>
    </xsl:template>

    <xsl:template name="year">
        <xsl:param name="year" />

        <h2><xsl:value-of select="$year" /></h2>

        <dl class="dl-horizontal">
        <xsl:for-each select="//event[date/year=$year][not(date/month=preceding-sibling::event[date/year=$year]/date/month)]/date/month">
            <xsl:call-template name="month">
                <xsl:with-param name="month" select="." />
                <xsl:with-param name="year" select="$year" />
            </xsl:call-template>
        </xsl:for-each>
        </dl>
    </xsl:template>

    <xsl:template name="month">
        <xsl:param name="month" />
        <xsl:param name="year" />

        <dt><xsl:value-of select="$month" /></dt>

        <xsl:for-each select="//event[date/year=$year][date/month=$month]">
            <xsl:call-template name="event">
                <xsl:with-param name="event" select="." />
            </xsl:call-template>
        </xsl:for-each>
    </xsl:template>

    <xsl:template name="event">
        <xsl:param name="event" />

        <dd><xsl:copy-of select="description/node()" /></dd>
    </xsl:template>

</xsl:transform> 
```

# ruby-on-rails - Rails - grouped_collection_select

> ID：10886151
> 
> 赞同：2
> 
> 时间：2012-06-04T18:19:39.607
> 
> 标签：ruby-on-rails, ruby, forms

我正在尝试使用以下内容获取 grouped_collection_select

```
class User
  has_many :pages, :through => pages_users
end

class Page
  has_many :users, :through => pages_users
  # name - String
  # type - String
end

class PagesUser < ActiveRecord::Base
  belongs_to :page 
  belongs_to :user
end 
```

我希望下拉列表按类型分组，下面有名称。我在城市/国家/大陆看到的示例并没有我想要的那么有用。这样做的最佳方法是什么？我想我想要类似...

```
<%= grouped_collection_select(:user, :page_id, user.pages, :type, :name, ) %> 
```

但这显然是不正确的。

有什么想法吗？

编辑以通过 pages_users 表显示实际关系。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T16:01:27.960

这就是我最终得到的......

```
<%= select_tag 'page_id', grouped_options_for_select(Page.for_select) %> 
```

Page.for_select 看起来像...

```
def for_select
  {
    'Type 1'   => type1.map { |p| [p.name, p.id] },
    'Type 2' => type2.map { |p| [p.name, p.id] }
  }
end 
```

希望这对其他人有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T18:28:52.010

将其视为简单的一对一关系，

```
class User
  has_many :pages
end

class Page
  # name - String
  # type - String
end

<%= grouped_collection_select(:user, :page_id, user.pages.map(&:type), :pages_by_type, :name, :id, :name ) %> 
```

为此，您需要一种机制来查找给定类型的所有页面。

# c++ - 在 C++ 中，有没有办法锁定对象本身？

> ID：10886154
> 
> 赞同：4
> 
> 时间：2012-06-04T18:20:02.407
> 
> 标签：c++, multithreading, synchronization, mutex

我有一个我想跨多个线程同步的 stl 映射。目前我有...

功能 A（修改地图）

```
void Modify(std::string value)
{
    pthread_mutex_lock(&map_mutex);

    my_map[value] = value;

    pthread_mutex_unlock(&map_mutex);
} 
```

功能 B（读取地图）

```
std::string Read(std::string key)
{
    std::string value;

    pthread_mutex_lock(&map_mutex);

    std::map<std::string, std::string>::iterator it = my_map.find(key);

    pthread_mutex_unlock(&map_mutex);

    if(it != my_map.end())
    {
        return it->second;
    }
    else
    {
        return "DNE";
    }
} 
```

由于互斥锁，这在所有线程之间是同步的。但是，我必须在函数 B 中锁定互斥锁，即使它根本没有修改映射。有没有办法将 my_map 对象本身锁定在函数 A 中，而不是将其锁定在函数 B 中，同时保持线程同步。这样，函数 B 的所有实例/调用都可以继续自由运行，只要函数 A 没有运行？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T20:04:47.460

您不仅想锁定容器，还想锁定对容器的访问，即任何迭代器或指向它的指针。您需要将这些访问移动到代码的锁定区域。

```
std::string Read(std::string key)
{
    std::string value = "DNE";

    pthread_mutex_lock(&map_mutex);

    std::map<std::string, std::string>::iterator it = my_map.find(key);
    if(it != my_map.end())
    {
        value = it->second;
    }

    pthread_mutex_unlock(&map_mutex);

    return value;
} 
```

从对象本身内部确实没有实际的方法可以做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T19:54:11.823

警告：我没有编译或测试过这些，但我过去做过类似的事情。

第一步是用类控制互斥锁，如下所示：

```
class Lock {
    public:
        Lock(Mutex& mutex) {
            pthread_mutex_lock(mutex);
        }
        ~Lock(Mutex& mutex) {
            pthread_mutex_unlock(mutex);
        }
}; 
```

这可以让您避免各种问题，例如，如果您的地图抛出异常。

然后你的修改变成：

```
void Modify(std::string value)
{
    Lock(map_mutex);    

    my_map[value] = value;
} 
```

创建一个引用计数锁类：

```
class RefCntLock {
    private:
        static int count;
        static Lock* lock;

    public:
        RefCountLock(Mutex& mutex) {

             // probably want to check that the mutex matches prior instances.
             if( !lock ) {
                  lock = new Lock(mutex);
                  count++;
             }
        }
        ~RefCountLock() {
             --count;
             if( count == 0 ) {
                 delete lock;
                 lock = NULL;
             }
        }
}; 
```

（注意：很容易将其概括为处理多个互斥锁。）

在你的`read`，使用 RefCntLock 类：

```
std::string Read(std::string key)
{
    {
        RefCntLock(&map_mutex);

        std::map<std::string, std::string>::iterator it = my_map.find(key);
    }

    if(it != my_map.end())
    {
        return it->second;
    }
    else
    {
        return "DNE";
    }
} 
```

这意味着每次写入都会获得一个锁，但所有读取都共享一个锁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-24T19:24:55.077

在即将发布的 C++17 标准中，您可以使用`std::shared_mutex`和`std::shared_lock`允许多个读者独占读访问，并`std::unique_lock`实现独占写访问。

```
std::shared_mutex map_lock;

void Modify(std::string value)
{
    auto write_lock = std::unique_lock(map_lock);
    my_map[value] = value;
}

std::string Read(std::string key)
{    
    auto read_lock = std::shared_lock(map_lock);
    auto it = my_map.find(key);
    return (it != my_map.end()) ? it->second : "DNE";    
} 
```

# ruby-on-rails - Rails uploading multiple photos onto Amazon S3

> ID：10886155
> 
> 赞同：0
> 
> 时间：2012-06-04T18:20:09.100
> 
> 标签：ruby-on-rails, ruby-on-rails-3, paperclip

I currently use the Paperclip gem to attach photos onto certain models in my project. However, I have a blog model where I use multiple photos per instance of the blog.

I'm looking for a solution where I can just upload photos into a folder on Amazon S3 and refer to these photos later using the HTML anchor tags. I don't want to attach the photos to any model.

Any suggestions?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T18:41:27.893

我自己没有这样做，但我会在这里寻找解决方案[http://amazon.rubyforge.org/](http://amazon.rubyforge.org/)我相信回形针在幕后使用它。

# javascript - Load a DOM and Execute javascript, server side, with .Net

> ID：10886161
> 
> 赞同：9
> 
> 时间：2012-06-04T18:20:53.080
> 
> 标签：javascript, .net, jint, envjs, jurassic

I would like to load a DOM using a document (in string form) or a URL, and then Execute javascript functions (including jquery selectors) against it. This would be totally server side, in process, no client/browser.

Basically I need to load the dom and then use jquery selectors and text() & type val() functions to extract strings from it. I don't really need to manipulate the dom.

I have looked at .Net javascript engines such as Jurassic and Jint, but neither support loading a DOM, and so therefore can't do what I need.

I would be willing to consider non .Net solutions (node.js, ruby, etc) if they exist, but would really prefer .Net.

**edit** The below is a good answer, but currently I'm trying a different route, I'm attempting to port envjs to jurassic. If I can get that working I think it will do what I want, stay tuned....

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-04T19:00:58.767

答案取决于你想要做什么。如果您的目标基本上是一个完整的 Web 浏览器模拟或“无头浏览器”，那么有许多解决方案，但没有一个（据我所知）完全存在于 .NET 中。要模仿浏览器，您需要一个 javascript 引擎和一个 DOM。您已经确定了一些引擎；我发现侏罗纪是最强大和最快的。google chrome V8引擎也很受欢迎；[Neosis Javascript.NET](https://github.com/JavascriptNet/Javascript.Net)项目为其提供了一个 .NET 包装器。它不是纯 .NET，因为您有一个非 .NET 依赖项，但它集成得很干净，使用起来并不麻烦。

但正如您所指出的，您仍然需要一个 DOM。在纯 C# 中有[XBrowser](https://github.com/axefrog/XBrowser)，但它看起来有点陈旧。整个浏览器 DOM 也有基于 javascript 的表示形式，例如[jsdom](https://github.com/tmpvar/jsdom)。您可能可以在侏罗纪中运行 jsdom，在没有浏览器的情况下为您提供 DOM 模拟，全部在 C# 中（虽然可能非常慢！）它肯定会在 V8 中运行得很好。如果您在 .NET 领域之外，还有其他得到更好支持的解决方案。[这个问题](https://stackoverflow.com/questions/2463735/net-equivalent-of-htmlunit)讨论了 HtmlUnit。然后是用于自动化实际 Web 浏览器的[Selenium 。](http://seleniumhq.org/)

另外，请记住，围绕这些工具所做的很多工作都是为了测试。虽然这并不意味着您不能将它们用于其他用途，但它们可能无法很好地执行或集成在内联生产代码中的任何稳定用途。如果您尝试基本上进行实时 HTML 操作，那么混合了许多除了测试之外未被广泛使用的技术的解决方案可能是一个糟糕的选择。

如果您的需求实际上是 HTML 操作，并且它并不真正需要使用 Javascript，但您正在更多地考虑 JS 中可用的此类工具的丰富性，那么我会考虑为此目的设计的 C# 工具。例如[HTML Agility Pack](http://html-agility-pack.net/)或我自己的项目[CsQuery](http://www.github.com/jamietre/csquery)，它是一个 C# jQuery 端口。

如果您基本上是在尝试获取一些为客户端编写的代码，但在服务器上运行它——例如用于复杂/加速的网络抓取——我会使用这些术语进行搜索。例如[这个问题](https://stackoverflow.com/questions/7842507/when-web-scraping-with-node-js-can-i-run-all-javascripts-on-the-page-i-e-si)讨论了这个问题，答案包括[PhantomJS](http://phantomjs.org/)，一个无头 webkit 浏览器堆栈，以及我已经提到的一些测试工具。对于网络抓取，我想你可以在没有它的情况下生活在 .NET 中，这可能是唯一合理的答案。

# android - Keep connection between activities using DefaultHttpClient

> ID：10886167
> 
> 赞同：0
> 
> 时间：2012-06-04T18:21:10.083
> 
> 标签：android, android-activity, httpclient, keep-alive

I'm developing an app that sends requests to SAP, I’ve been wrestling to keep the connection alive while I’m in the app.

I got three activities: *main*, *connection* and *list*.

When I start the app goes to *main*, after I tap on connection to establish a connection between SAP and the device and it connects successfully.

The issue that I have is when I press the return button to *main* and go to *list* activity, I cannot retrieve the data because I have lost my DefaultHttpClient that had the connection.

```
public String logInToSAP(String PIP, int PPort, String PSchema, String PUser, String PPassword) {
    String result = "";

    //      HttpHost targetHost = new HttpHost(PIP, PPort, PSchema);
    HttpHost targetHost = new HttpHost(PIP, PPort, PSchema);

    //          DefaultHttpClient httpclient = new DefaultHttpClient();
    httpclient.getCredentialsProvider().setCredentials(new AuthScope(targetHost.getHostName(), 
            targetHost.getPort()), new UsernamePasswordCredentials(PUser, PPassword));

    // Create AuthCache instance
    AuthCache authCache = new BasicAuthCache();

    // Generate BASIC scheme object and add it to the local auth cache
    BasicScheme basicAuth = new BasicScheme();
    authCache.put(targetHost, basicAuth);

    // Add AuthCache to the execution context
    BasicHttpContext localcontext = new BasicHttpContext();
    localcontext.setAttribute(ClientContext.AUTH_SCHEME_PREF, authCache);

    HttpGet request = new HttpGet("/sap/z_conn");

    ResponseHandler<String> handler = new BasicResponseHandler();
    try {
        result = httpclient.execute(targetHost, request, handler);
    } catch (ClientProtocolException e) {
        e.printStackTrace();
        Toast.makeText(this, "Wrong Connection Parameters", Toast.LENGTH_SHORT).show();         
        result = "Wrong Connection Parameters";
    } catch (IOException e) {
        e.printStackTrace();            
        Toast.makeText(this, "IOException", Toast.LENGTH_SHORT).show();
        result = "IOException";
    }
    return result;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T20:31:05.880

您可以扩展 Application 对象并将 DefaultHttpClient 放在那里。

如何扩展和使用 Application 对象：

[如何在Android中声明全局变量？](https://stackoverflow.com/questions/708012/android-how-to-declare-global-variables/708317#708317)

# php - How to show an Alert via ajaxSubmit?

> ID：10886168
> 
> 赞同：1
> 
> 时间：2012-06-04T18:21:12.877
> 
> 标签：php, ajax

I'm trying to display an Alert message through ajaxSubmit as successful as in the example code below:

```
submitHandler: function( form ){ 
                var dados = $( form ).serialize(); 
                $.ajaxSubmit({  
                    type: "POST",   
                    url: "...",  
                    data: dados,  
                    complete: function( data )  
                    {  
                       // $("#cargo").resetForm();
                        alert("Alert Message"); 
                        $("#txtNome").focus();
                            $("#txtNome")
                            .hide()
                            .show("slow");
                            document.getElementById("cargo").reset();

                    } 
                }); 
                return false;  
            } 
```

But every time the form data is saved, but no Alert message is shown! Can anyone help me?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T18:29:57.243

检查此代码。这是工作。

```
jQuery('#formId').validate({
    submitHandler: function(form) {
          jQuery("#formId").ajaxSubmit({
            success: function(data)     {
                             alert("hello");
                            jQuery('#element').html(data);
                        },
            data: {ajax:'true', tab:'true'}
        }); 
    }
}); 
```

以这种格式放置您的代码。

# apache-camel - Timer 组件如何轮询？

> ID：10886173
> 
> 赞同：1
> 
> 时间：2012-06-04T18:21:38.757
> 
> 标签：apache-camel

假设我有以下时间组件：

```
from("timer://foo?period=1000").setBody(constant("select * from customer")).to("jdbc:testdb").to("beanRef:processResult"); 
```

计时器组件如何在这里工作？它是每 1 秒从数据库读取一次还是等待 bean 完成处理？

如果 bean 仍在处理较早的结果，并且计时器将继续轮询数据库，那么它将产生瓶颈。有什么办法可以避免吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T04:56:18.833

好的，更新：查看源码，定时器组件依赖于java TimerTask 实现。您的问题已经在这里得到解答：[Java 的 Timer 任务是否保证不会同时运行？](https://stackoverflow.com/questions/1237804/is-javas-timer-task-guarenteed-not-to-run-concurrently)

简短的回答：一个线程执行触发器和连接到它的路由，所以不会有并发执行。

也就是说，您可能想稍微控制一下执行。建议使用 Timer Tasks（以及因此的 Camel 计时器）在计时器的周期和最大任务执行时间之间留出余量。

您可以在两者之间使用 SEDA 组件（具有 concurrentConsumers=[num threads]）来细粒度控制工作队列的执行。计时器将立即完成它的任务，而真正的路线可以继续处理。

```
from("timer://foo?period=1000")
    .to("seda:startRoute");

from("seda:startRoute")
    .setBody(constant("select * from customer"))
    .to("jdbc:testdb").to("beanRef:processResult"); 
```

每个事件都会堆积得越来越少，因此随着时间的推移，您可能需要调整路由，以便 period > avg route exec time。

您可以在单例 bean 或静态类中添加共享布尔变量：

```
public static synchronized boolean  isRunning(){
    return running;
}

public static synchronized void setRunning(boolean isRunning){
    running = isRunning;
} 
```

变量应该告诉天气路线是否正在运行，并过滤在变量为真时发生的计时器事件。只需连接一些处理器/bean 调用来处理这个问题。

# github - How can I give access to a private GitHub repository?

> ID：10886174
> 
> 赞同：84
> 
> 时间：2012-06-04T18:21:43.453
> 
> 标签：github

I have a private git repository and I would like to extend its access to a member of my team. Will I be able to do it through the Github website? I have the username of my member.

I have tried to do this by going through the admin page of the repository but there isn't such an option as I am not the owner.

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-12-03T12:15:17.743

如果您是所有者，这很简单：

*   转到您的存储库并单击`Settings`按钮。
*   在左侧菜单中单击`Collaborators`
*   然后添加他们的名字。

然后合作者应该访问这个示例 repo 链接[https://github.com/user/repo/invitations](https://github.com/user/repo/invitations)

来源：[Github 文档](https://help.github.com/articles/how-do-i-add-a-collaborator)。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2020-03-01T12:18:01.393

这是一个简单的 3 步过程：
1）转到您的私人仓库并单击***设置***
2）在屏幕左侧单击***管理访问权限***
3）然后单击***邀请协作者***

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2020-11-04T15:20:54.710

这是一个**简单的 3 步**过程：

1.  转到您的私人仓库并单击`settings`
2.  点击屏幕左侧`Manage access`
3.  然后点击`Invite Collaborator`

> 受邀用户需要先登录 Github，然后才能点击电子邮件中的邀请链接，否则他们会收到`404`错误消息。

下面是如何执行此操作的屏幕截图：

[![在此处输入图像描述](../Images/f591dcbc0c753fe7134f1f9fb1824947.png)](https://i.stack.imgur.com/OjlLO.png)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-08-20T20:33:25.847

**两个步骤：**
1\. 登录并在“人员”下的右栏中单击“邀请某人”。输入并选择个人 github id。
2\. 然后它会为您提供“邀请用户名到某些团队”的选项，此时您只需检查要将它们添加到哪些团队，然后单击“发送邀请”

**或者：**
1\. 获取人员的 github id（不是他们的电子邮件）
2\. 导航到您想要将用户添加到的存储库
3\. 单击右侧栏中的“设置”（不是顶部的变速箱设置）
4\. 单击合作者在左栏
5\. 选择存储库名称
6\. 在“邀请或添加用户到团队”的地方添加人员 github id
7\. 然后将通过电子邮件发送邀请。

请让我知道这对您有何帮助！

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2020-09-09T06:42:51.093

这是一个简单的 3 步过程：

1.  转到您的私人仓库并单击设置
2.  在屏幕左侧单击管理访问权限
3.  然后点击邀请合作者

这也是 - 受邀用户需要先登录到 Github，然后才能单击其电子邮件中的邀请链接，否则他们将收到 404 错误。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-04T18:58:50.143

可以通过[Github 组织](https://github.com/blog/674-introducing-organizations)。您必须创建一个新帐户。

[https://github.com/organizations/new](https://github.com/organizations/new)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-02-12T04:01:43.133

它在 2021 年开始工作，

虽然回购必须先设为私有，然后点击
`settings => Manage access => Invite Collaborator`

获得 repo 访问权限的用户必须导航到 repo 并且可以对主分支进行更改。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2014-07-08T02:56:17.833

您的团队成员必须使用 SSH 访问存储库，为此他们必须将 ssh 密钥映射到 github 帐户。如果他们将他们的 ssh 密钥映射到 github 帐户并且存储库具有他们想要访问的公共权限，这将起作用。

# ajax - 如何为每个 jquery 选项卡处理不同的 json 数据？

> ID：10886176
> 
> 赞同：3
> 
> 时间：2012-06-04T18:21:51.207
> 
> 标签：ajax, jquery-ui, jquery, jquery-tabs

我有三个 3 (jquery) 选项卡：

*   概述
*   价钱
*   目的地信息

这些选项卡中的每一个都有完全不同的数据。我可以在 href 中指定一个 URL 来进行 AJAX 调用。但是，**如何处理为每个选项卡接收到的数据（以便我可以根据上下文呈现它们）？**

我应该使用[加载](http://docs.jquery.com/UI/Tabs#event-load)事件来操作数据吗？如果是这样，如何在**加载事件**中获取返回的 json 数据的句柄？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T18:30:11.973

我对 jQuery UI 几乎没有经验，但我知道您可以从 AJAX 请求中获取 JSON 格式的数据（[此处](http://api.jquery.com/jQuery.ajax/)）：

```
$.ajax({
  url: "http://example.com/page.html",
  dataType: "json",
}).done(function ( data ) {
  // Do some stuff with the data
}); 
```

或者你可以使用[jQuery.getJSON](http://api.jquery.com/jQuery.getJSON/)。然后总是有[jQuery.parseJSON](http://api.jquery.com/jQuery.parseJSON/)。

编辑：据我所知，这是你将得到的最好的：

```
$(window).load(function(){
    $(function() {
        $( "#tabs" ).tabs({
            ajaxOptions: {
                error: function( xhr, status, index, anchor ) {
                    $( anchor.hash ).html(
                        "Couldn't load this tab. We'll try to fix this as soon as possible. " +
                        "If this wouldn't be a demo." );
                },
                success: function( jsonObject, status ) {
                        // Code
                },
                dataType: "json"
            }
        });
    });
}); 
```

有了这个，json 将需要包含您正在使用的选项卡。这将是一个相当不优雅的解决方案，因为您必须打开从 json 返回的选项卡值。似乎选项卡 API 并不适合任何人自己处理显示过程。我看到了其他三个选项：自己重做选项卡 API；破解 API 来做你的事；或做类似的事情`get_tab_contents.php?tabid=someid&json=somepath`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T18:29:22.690

也许我读错了，但是....您可以在 AJAX 响应中使用带有某种标志的开关。

```
/* 
  Your AJAX response could be something like:
  data.type = destination, overview, pricing etc
  data.content = The actual content you are expecting
*/
var data=/* Your ajax call */
switch(data.type)
{
 case 'destination':
      /* Handle the rest of the data object*/
      $('div').html(data.content);
      break;
 case 'overview':
      break;
 case 'pricing':
      break;
} 
```

# php - 替代在 PHP 中返回？

> ID：10886177
> 
> 赞同：-1
> 
> 时间：2012-06-04T18:21:55.123
> 
> 标签：php, return

我想一个接一个地运行两个循环，但似乎`return`第一个循环中的语句结束了脚本：

```
// this runs
for ($i = 0; $i < 3; $i++) {
    try {
        foo();
        return true;
    } catch (Exception $e) {
        try {
            bar();
        } catch (Exception $e) {
            return false;
        }
    }
}

// this doesn't
for ($i = 0; $i < 3; $i++) {
    try {
        foo();
        return true;
    } catch (Exception $e) {
        try {
            bar();
        } catch (Exception $e) {
            return false;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T18:24:50.607

您不能`return`在循环中使用，它适用于函数/类方法。

您应该替换`return false`为[`break`](http://php.net/manual/en/control-structures.break.php)，循环等效项，并`return true`替换为[`continue`](http://php.net/manual/en/control-structures.continue.php)。但是，正如 John Conde 所注意到的，您可以[`continue`](http://php.net/manual/en/control-structures.continue.php)在此示例中省略。

```
function         loop
---------------------------
return true;     continue;
return false;    break; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T18:23:11.727

删除`return true`并替换它。

或者，使用`continue`. 它将从下一次迭代重新开始循环。

**更新**

替换`return false`为`break`您的评论中提到的

# c# - 如何选择在 Microsoft Unity 中注册的类型的实现

> ID：10886180
> 
> 赞同：1
> 
> 时间：2012-06-04T18:22:00.753
> 
> 标签：c#, asp.net, unity-container

假设我有一个名为 IPumaServices 的接口，并且我有两个实现它的类：POSiXmlServices 和 TaXmlServices。

现在我有了另一个名为 IPumaNotification 的接口，实现它的类称为 PumaNotification。PumaNotification 的构造函数接收 IPumaServices 实现。

我的问题：在 Unity 中，如何注册一个在构造函数中注入 POSiXmlServices 和另一个注入 TaXmlServices 的 PumaNotification 实现？

这就是我到目前为止所拥有的。

```
using (_unityContainer = new UnityContainer())
            {
              _unityContainer
              .RegisterType<IPumaServices, POSiXmlServices>("POSiXml")
              .RegisterType<IPumaServices, TaXmlServices>("TaXml")
              .RegisterType<IPumaNotification, PumaNotification>();
            } 
```

我不知道如何使它符合我上面的要求。

我无法在线研究这个问题，因为我不确定如何描述我面临的问题。

我很感激任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T18:29:25.570

您可以在构造函数中指定解析的参数，从而解析您想要的实例：

```
using (_unityContainer = new UnityContainer())
        {
          _unityContainer
          .RegisterType<IPumaServices, POSiXmlServices>("POSiXml")
          .RegisterType<IPumaServices, TaXmlServices>("TaXml")
          .RegisterType<IPumaNotification, PumaNotification>(
              new InjectionConstructor(                        // Explicitly specify a constructor
                 new ResolvedParameter<IPumaServices>("TaXml") // Resolve parameter of type 
              );
        } 
```

如果您想注册两个`IPumaServices`，您可以适当地命名每个，并在使用时按名称解析它们。

# css - CSS 边框呈锯齿状，带有不同大小/颜色的边框

> ID：10886181
> 
> 赞同：5
> 
> 时间：2012-06-04T18:22:02.453
> 
> 标签：css, border, pixels

似乎当您有一个具有不同大小/颜色边框的元素时，您会看到一条非常奇怪的锯齿线。我以前从未注意到这一点，但是当我注意到这个（并不是真的想说“小故障”）奇怪的事件时，正在查看 Vimeo 的超级热门新设计。

因此，如果您有一个 div 挂出，样式如下所示，您会注意到像素步进（几乎就像它设置为插入，而不是实心...）

```
div {
    height            : 25px;
    width             : 50px;
    background        : #eee;
    border-style      : solid;
    border-color      : green;
    border-left-color : black;
    border-width      : 3px 3px 3px 15px;
} 
```

有人注意到这一点/知道为什么会发生吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T18:30:05.257

发生这种情况的原因是因为它在盒子周围创建了一个“框架”。

想象一个木制相框，你不是用四块长方形的木头来制作一个框架，而是用四块梯形的木头把它们放在一起。当您在一侧设置较大的宽度时，它会沿对角线将其向内渲染到框的角落。

它看起来很糟糕的原因是边界之间的抗锯齿从来都不是很好。

**选择**

`div:before{border-left: 15px solid #000;}`如果您不想像那样裁剪边框，您可以这样做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T18:32:12.720

这不是“故障”——这是边界的工作方式。它们对角线连接。

如果您更进一步并创建一个`<div>`没有高度和宽度，但有一个大边框，您可以看到结果 - [http://jsfiddle.net/mFzrA/](http://jsfiddle.net/mFzrA/)

顺便说一句 - 这是用于创建纯 CSS 三角形和气泡的技术。您只需使 3 个边框透明，第 4 个边框为您提供一个漂亮的三角形。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-28T13:41:49.077

我只是想建议在边框上使用具有较大边框宽度的 box-shadow 以避免“锯齿线”。对我有用，希望它有帮助:)

```
div {
    height            : 25px;
    width             : 50px;
    background        : #eee;
    border-style      : solid;
    border-color      : green;
    border-width      : 3px 3px 3px 0px;
    box-shadow:-15px 0px black;
} 
```

# mysql - Django：DoesNotExist：匹配的查询不存在

> ID：10886185
> 
> 赞同：0
> 
> 时间：2012-06-04T18:22:25.003
> 
> 标签：mysql, django, django-models, dumpdata

我正在将 django (v1.1) 项目从 mysql 移动到 postgresql （有趣！），目前我正在传输所有数据。我尝试使用 manage.py dumpdata 选项，但我们使用的服务器相当旧并且需要很长时间（它似乎想将所有内容加载到内存中）。我想出了一个小脚本来处理每个应用程序，然后处理它下面的每个模型，简化版本如下所示：

```
 def dumpJson(model, outfile):  
    try:
            data = serializers.serialize("json", model.objects.all(),indent=4)                
    except model.DoesNotExist:
            print model.__name__ , "Does not Exist (not Object)"
    except ObjectDoesNotExist:
            print model.__name__ , "Issue with the data, not sure what...."

            data = serializers.serialize("json", model.objects.all(),indent=4)
            data = data.decode("unicode_escape").encode("utf8")
            out = open(outfile, "w")
            out.write(data)
            out.close()        

def main():
    for app in get_apps():               
            for model in get_models(app):  
                    print " -- Dumping:", model.__name__
                    outfile = "json_dumps/" + model.__name__ + ".json"                        
                    dumpJson(model, outfile) 
```

但是，如果我删除 try catch 语句，我会收到以下错误：\

```
 -- Dumping: Institution
  Traceback (most recent call last):
  ...(nasty stacktrace)....      
  unity.trip.models.DoesNotExist: USNWRData matching query does not exist. 
```

我的模型定义如下：

```
class USNWRData(models.Model):
    rank = models.PositiveIntegerField(blank=True, null=False)
    name = models.CharField(max_length=255, blank=True, null=False)
    state = models.CharField(max_length=10, blank=True, null=False)
    public = models.BooleanField(blank=True, null=False)
    type = models.ForeignKey(USNWRType)

class Institution(models.Model):
    name = models.CharField(max_length=200)
    parent_institution = models.ForeignKey('self', blank=True, null=True)
    location = models.ForeignKey(Location, blank=True, null=True,related_name='old_location')
    type = models.ForeignKey(InstitutionType, blank=True, null=False )
    usnwr = models.ForeignKey(USNWRData, blank=True, null=True)
    locationnrm = models.ForeignKey(LocationNrm, blank=False, null=True) 
```

据我了解，此错误的原因是某种数据不匹配或缺少外键。鉴于上述模型，问题似乎是什么？我有点麻烦，原作者早就不在了。任何帮助将非常感激！

编辑：全栈交易是：

```
 -- Dumping: Institution
 Traceback (most recent call last):
 File "custom_dump.py", line 38, in <module>
    main()
 File "custom_dump.py", line 34, in main
    dumpJson(model, outfile)
 File "custom_dump.py", line 16, in dumpJson
    data = serializers.serialize("json", model.objects.all(),indent=4)
 File "/usr/local/lib64/python2.5/site-packages/django/core/serializers/__init__.py", line 91, in serialize
    s.serialize(queryset, **options)
 File "/usr/local/lib64/python2.5/site-packages/django/core/serializers/base.py", line 48, in serialize
    self.handle_fk_field(obj, field)
 File "/usr/local/lib64/python2.5/site-packages/django/core/serializers/python.py", line 48, in handle_fk_field
    related = getattr(obj, field.name)
 File "/usr/local/lib64/python2.5/site-packages/django/db/models/fields/related.py", line 315, in __get__
    rel_obj = QuerySet(self.field.rel.to).using(db).get(**params)
 File "/usr/local/lib64/python2.5/site-packages/django/db/models/query.py", line 349, in get % self.model._meta.object_name)
unity.trip.models.DoesNotExist: USNWRData matching query does not exist. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T20:08:03.137

我发现 Django 固定装置除了用于小型数据集（例如 100 条 Foo OptionList 项的记录）或测试固定装置之外，对于任何其他目的都毫无用处。我会通过将 MySQL 表导出到 CSV 来解决您的问题。

另外，你可以看看这个：

[http://wiki.postgresql.org/wiki/Converting_from_other_Databases_to_PostgreSQL#MySQL](http://wiki.postgresql.org/wiki/Converting_from_other_Databases_to_PostgreSQL#MySQL)

# optimization - remove redundant css rules from dynamic website

> ID：10886189
> 
> 赞同：4
> 
> 时间：2012-06-04T18:22:40.813
> 
> 标签：optimization, css, css-selectors, minify

I'm trying to reduce the size of my CSS file. It is from a template which is very CSS & JS heavy. Even with CSSMin the CSS file size is 250kb.

Whilst I use alot of the CSS - I know I dont use it all. So I'm trying to work out which styles can be removed. I'm aware of Dust-Me selector - but that only takes a static look at the website. With HTML5 and CSS3 - websites are now very dynamic, and most of my CSS occurs from dynamic events, or 'responsive' events i.e. Bootstrap.

**Question:** Is there a tool which 'records' all my CSS use on a website for a perioid of time, so I can go and click/hover/move over each element and interact with my site. Then at the end let me know which styles were & were not used?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T17:59:43.023

我认为有两种工具可以帮助您。

[helium](https://github.com/geuis/helium-css)是一个 javascript 工具，可以发现任何未使用的 css 规则。

[csscss](http://zmoazeni.github.io/csscss/)是一个源代码分析器，它将报告任何重复。我有偏见，因为我写 csscss 正是因为我找不到任何这样做的东西。但很多人似乎觉得它很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T18:29:57.100

CSS Usage 是 Firefox 的一个很好的扩展。它告诉页面中当前使用了哪些 css。

链接：[https ://addons.mozilla.org/en-us/firefox/addon/css-usage/](https://addons.mozilla.org/en-us/firefox/addon/css-usage/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T18:30:31.473

**250kb**对于 CSS 文件来说真的是一个很大的数字。
模板通常在一个文件中包含所有页面所需的所有 CSS。
我会建议：

> 不要*剪切*你的 CSS 代码，它们可能在某个时间点需要。

相反，我建议将您的 CSS 文件分解为多个小文件以用于不同的页面样式，例如*登录页面使用不同的 CSS、**主页*使用不同的 CSS 文件等。
阅读您自己的`CSS`代码并`HTML`努力找出*其中的重要部分CSS 代码用于哪个 HTML 部分*。

**更新：**
您可以尝试[Removed Unused CSS - CSS optimizer](http://unused-css.com/)。
我个人没有使用它只是希望它对你有用。

# javascript - Check if a div does NOT exist with javascript

> ID：10886190
> 
> 赞同：92
> 
> 时间：2012-06-04T18:22:50.707
> 
> 标签：javascript, html, if-statement

Checking if a div exists is fairly simple

```
if(document.getif(document.getElementById('if')){

} 
```

But how can I check if a div with the given id does not exist?

* * *

## 回答 #1

> 赞同：152
> 
> 时间：2012-06-04T18:27:52.927

```
var myElem = document.getElementById('myElementId');
if (myElem === null) alert('does not exist!'); 
```

* * *

## 回答 #2

> 赞同：78
> 
> 时间：2012-06-04T18:27:04.120

```
if (!document.getElementById("given-id")) {
//It does not exist
} 
```

如果元素不存在，则该语句`document.getElementById("given-id")`返回，并且是假的，这意味着在 if 语句中评估时它会转换为假。（[其他虚假值](https://developer.mozilla.org/en-US/docs/Glossary/Falsy)）`null``given-id``null`

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-04-29T10:36:15.170

检查我的 JavaScript 和 JQuery 代码：

JavaScript：

```
if (!document.getElementById('MyElementId')){
    alert('Does not exist!');
} 
```

查询：

```
if (!$("#MyElementId").length){
    alert('Does not exist!');
} 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-06-04T18:25:12.303

尝试获取带有 ID 的元素并检查返回值是否为 null：

```
document.getElementById('some_nonexistent_id') === null 
```

如果你使用 jQuery，你可以这样做：

```
$('#some_nonexistent_id').length === 0 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-06-04T18:24:59.427

`getElementById``null`如果没有这样的元素，则返回。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-02-06T23:01:35.917

还有一个更好的解决方案。你甚至不需要检查元素是否返回`null`。你可以简单地这样做：

```
if (document.getElementById('elementId')) {
  console.log('exists')
} 
```

`exists`只有当元素实际存在于 DOM 中时，该代码才会记录到控制台。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-08-29T14:08:11.753

这适用于：

```
 var element = document.getElementById('myElem');
 if (typeof (element) != undefined && typeof (element) != null && typeof (element) != 'undefined') {
     console.log('element exists');
 }
 else{
     console.log('element NOT exists');
 } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-10-23T17:25:48.667

所有这些答案都**没有**考虑到您专门询问了**DIV**元素。

```
document.querySelector("div#the-div-id") 
```

@see [https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelector](https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelector)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-01-23T11:46:13.840

我在下面做并检查是否`id`存在，如果存在则执行函数。

```
var divIDVar = $('#divID').length;
if (divIDVar === 0){ 
    console.log('No DIV Exist'); 
} else{  
    FNCsomefunction(); 
} 
```

# c - 在 double (*foo)[2] 中，[2] 代表什么

> ID：10886192
> 
> 赞同：3
> 
> 时间：2012-06-04T18:22:58.223
> 
> 标签：c, primitive, primitive-types

代表`double (*foo)[2]`什么`[2]`？以及如何将这样的数组转换为 C 中的 float* 数组？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-04T18:24:15.450

```
double (*foo)[2] 
```

`foo`是一个指向两个`double`元素的数组的指针。

例如：

```
double bla[2];
double (*foo)[2] = &bla; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T18:42:05.010

要回答问题的第二部分，您将无法将其转换为浮点数组。您将需要声明一个新的浮点数组并显式转换每个成员。

例如，

```
float bar[] = {(float)(*foo)[0], (float)(*foo)[1]}; 
```

此外，为了补充第一部分的答案，我发现这个[链接](http://ieng9.ucsd.edu/~cs30x/rt_lt.rule.html)和他所谓的左右规则对于弄清楚一个令人困惑的声明意味着什么非常宝贵。

# javascript - 如何缩小包含用“。”分隔的函数名称的 JavaScript 文件？

> ID：10886195
> 
> 赞同：-2
> 
> 时间：2012-06-04T18:23:09.893
> 
> 标签：javascript, minify

我在 Windows 操作系统上压缩了 100 个 Javascript 文件，其中几乎有一半遇到了问题。事实证明，minfiying 压缩器无法正确压缩具有点分隔功能的 js 文件。对于 YUI 压缩器，它会在这种情况发生时删除文件的内容，而对于 Ajaxminifier，它只是忽略点并取其前面的函数名。

有问题的函数示例：

```
function window.onload() {}

Error Message: :missing ( before function parameters 
```

使用 YUI 压缩器作为 MSBuild 任务和命令行都产生相同的结果。

命令行示例：

```
java -jar yuicompressor.jar --type js --charset utf-8 -o D:\foo.js D:\foo-min.js 
```

* * *

使用 Ajax Minifier 示例：

命令行：

```
AjaxMin.exe -o D:\foo.js D:\foo-min.js 
```

* * *

但是，一种解决方案是重写函数，并且缩小过程效果很好示例：

```
window.onload = function() {} 
```

但这不是我们现在的选择。有谁知道这个问题并能够提供解决方案？

* * *

谢谢。是的，我确实继承了这些文件，但我还不确定为什么要这样写。我不相信有任何处理器可以将其转换为正确的 JS。我知道 Web 应用程序只能在 IE 上运行，这可能是它起作用的原因。在 Firefox 等上，情况可能并非如此。我希望得到这个改变

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T18:25:35.073

这是因为你试图缩小无效的 javascript。函数中不能有点。

我认为您正在尝试命名空间。如果你是，你最好做类似的事情：

```
var myVar = {
    foo: function () { /* do something */ }
}

myVar.foo(); 
```

# jquery-ui - 停止使用 ajax 预加载内容的第一个 jquery ui 选项卡

> ID：10886201
> 
> 赞同：1
> 
> 时间：2012-06-04T18:23:26.557
> 
> 标签：jquery-ui, jquery, jquery-ui-tabs

我目前使用 jquery ui 创建一个在页面加载时隐藏的对话框窗口。用户通过单击按钮打开对话框。打开后，对话框有几个选项卡（使用 jquery ui 选项卡创建），每个选项卡都显示用户可能需要访问的表单。实际的表单是使用 ajaxOptions 加载的。

有没有办法阻止 jquery 在页面加载时预加载我的第一个 ui 选项卡？相反，我希望仅在用户单击按钮打开对话框时才加载第一个选项卡的内容。

```
 $( "#pref_tabs" ).tabs({
    ajaxOptions: {
        success: function(xhr, status, index, anchor) {
           //function to handle successful loading
        },
        error: function( xhr, status, index, anchor ) {
            $( anchor.hash ).html(
                "Couldn't load this form. We'll try to fix this as soon as possible. ");
        },
    }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T18:27:17.810

在您的选项卡选项中添加一个附加选项，以默认不选择任何选项卡。

```
$(sel).tabs({
    selected: -1,
    ajaxOptions: {...
}); 
```

# php - PHP 函数的多个参数

> ID：10886203
> 
> 赞同：0
> 
> 时间：2012-06-04T18:23:35.650
> 
> 标签：php, conditional

从此跟进： [将特定的类/ID应用于菜单上的当前页面（PHP）](https://stackoverflow.com/questions/10884624/apply-a-specific-class-id-to-current-page-on-menu-php)

这是我正在使用的代码：

```
 <div id="bottoni" style="float:right;margin-top:30px;margin-right:30px">

            <?php
            // funzione per ottenere la class 'current' per la pagina che si sta visitando
            function get_current($name) {
                if (strpos($_SERVER['REQUEST_URI'], $name) !== false)
                    echo 'id="current"';
            }
            ?>

            <a <?php get_current('biografia') ?> href="<?php echo esc_url( home_url( '/' ) ); ?>biografia/"><img style="width:120px;margin-right:25px" src="http://robertocavosi.com/beta/wp-content/themes/robertocavosi/images/bottone_robertocavosi.jpg"></a>
            <a <?php get_current('attore') ?> <?php get_current('regista') ?> <?php get_current('autore') ?> <?php get_current('riconoscimenti') ?> <?php get_current('pubblicazioni') ?> <?php get_current('insegnamento') ?> id="tooltipclick"><img style="width:120px;margin-right:25px;cursor:pointer" src="http://robertocavosi.com/beta/wp-content/themes/robertocavosi/images/bottone_curriculum.jpg"></a>
            <a <?php get_current('gallery') ?> href="<?php echo esc_url( home_url( '/' ) ); ?>gallery/"><img style="width:120px;margin-right:25px;border:0" src="http://robertocavosi.com/beta/wp-content/themes/robertocavosi/images/bottone_gallery.jpg"></a>
            <a <?php get_current('itinera') ?> href="<?php echo esc_url( home_url( '/' ) ); ?>itinera/"><img style="width:120px;margin-right:25px;border:0" src="http://robertocavosi.com/beta/wp-content/themes/robertocavosi/images/bottone_itinera.jpg"></a>
            <a <?php get_current('contatti') ?> href="<?php echo esc_url( home_url( '/' ) ); ?>contatti/"><img style="width:120px;border:0" src="http://robertocavosi.com/beta/wp-content/themes/robertocavosi/images/bottone_contatti.jpg"></a>
        </div> 
```

我想在一个“电话”中指定所有这些：

```
 <?php get_current('attore') ?> <?php get_current('regista') ?> <?php get_current('autore') ?> <?php get_current('riconoscimenti') ?> <?php get_current('pubblicazioni') ?> <?php get_current('insegnamento') ?> 
```

我试过：

```
 <?php get_current('attore', 'regista', 'autore', 'riconoscimenti', 'pubblicazioni', 'insegnamento') ?> 
```

但它不起作用...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T18:26:54.013

如果函数被设计为接受多个参数，你不能期望只传递一个函数多个参数并让它工作。

相反，将您的参数放在一个数组中并在循环中调用该函数：

```
<?php
$args = array('attore', 'regista', 'autore', 'riconoscimenti', 'pubblicazioni', 'insegnamento');
foreach ($args as $arg) { get_current($arg); }
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T18:28:58.047

您可以使用[func_get_args](http://php.net/manual/en/function.func-get-args.php)执行此操作：

```
<?php
// funzione per ottenere la class 'current' per la pagina che si sta visitando
function get_current() {
    foreach(func_get_args() as $arg) {
        if (strpos($_SERVER['REQUEST_URI'], $arg) !== false) {
            echo 'id="current"';
            break;
        }
    }
}
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T18:33:32.457

像这样使用`func_get_args()`：

```
<?php
function get_current() {
  foreach (func_get_args() as $arg) {
    if (strpos($_SERVER['REQUEST_URI'], $arg) !== false)
      echo 'id="current"';
  }
} 
```

然后您可以从 HTML 调用该函数：

```
<a <?php get_current('attore', 'regista', 'autore') ?> id="tooltipclick"><img src="http://robertocavosi.com/beta/wp-content/themes/robertocavosi/images/bottone_curriculum.jpg"></a> 
```

# xcode - xcode 4.xx Project Navigator - 使用真实文件夹

> ID：10886204
> 
> 赞同：2
> 
> 时间：2012-06-04T18:23:35.900
> 
> 标签：xcode, directory, project-navigator

有没有办法让 xcode 在项目导航器中使用真实的文件夹层次结构？我发现这些伪文件夹有点烦人，因为它们没有反映磁盘上的项目。或者至少让 xcode-made-folders 的颜色与真正的文件夹不同？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T18:36:12.883

不是真的，虽然它们*的*颜色不同。

您有组（黄色）——*可以引用*目录，但不会自动更新以反映磁盘上的内容。组还可以表示与目录或其内容结构无关的组。

您还有一个参考（蓝色）。这会自动更新，但其*内容*不是一流的项目项目。

就个人而言，我只是构建项目，以便它们可以（重新）从磁盘上的表示轻松（例如删除文件夹）或在另一个 IDE 中构建。很多时候，*可以*（不必要地）在 Xcode 中定义的细节被移到 xcodeproject 之外。一旦您弄清楚如何构建程序/源/目标，在项目导航器中同步表示就像拖放一样简单。

**编辑：**我指的是项目导航器。您所说的“项目组织者”是指项目导航器还是组织者的某些部分，我不确定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T08:56:33.937

***使文件夹结构模仿您的 Project Navigator 组结构：***

对于此过程，与往常一样，**在执行此操作之前备份整个项目文件夹**（Finder 中的压缩存档很好）。

您想要为添加到项目或由项目创建的新文件轻松设置，但如果您在所需的组中已经有很多文件，但在您想要的磁盘文件夹中没有很多文件，则可能会一团糟。

如果您在 Project Navigator 中选中一个组，请将注意力转移到 Utilities 窗格 > File Inspector > Identity。关键领域是处理路径。弹出窗口将为您提供指向组文件默认位置的各种相对路径，而完整路径将始终为您提供。在一个新项目中，您会发现创建的所有组都分配了相同的位置。

现在这里的关键是弹出窗口下方的小窗口图标按钮（最右边）。如果单击它，您可以为该组中的文件选择一个（文件夹）位置。如果您在该组中已有文件，则它们*不会*被移动到新位置，而是会在 Project Navigator 中变为红色，因为磁盘上的文件不在为该组新分配的路径中，而是将它们移动到您刚刚分配的文件夹中为该组设置应该可以修复您的备份。

（提示：小箭头按钮是“在 Finder 中显示”的快捷方式）

现在，当您制作“新文件...”时，在选择您想要的文件类型（下一步）后，然后配置适用于该类型的任何设置（下一步），您会看到一张表格，询问将文件放在哪里新文件。如果您在开始此过程之前在 Project Navigator 中选择了该组，它将已被选为工作表底部“组”弹出窗口中的项目，并且与该组关联的文件夹将在文件浏览器中选择. 如果您决定要将它放在不同的组中（我一直这样做，因为在我到达这一点之前我不会在 Project Navigator 中选择正确的组），只需在底部的 Group 弹出窗口中更改它，然后文件浏览器将更改为与您刚刚选择的组关联的文件夹。

如果您稍后在 Project Navigator 中创建组的子组，它将默认为父组的路径。如果在设置父组的路径时已经存在子组，则任何现有子组的路径都*不会*随父组移动。

避免重复文件：如果要将现有文件移动到另一个组（已经分配了路径）并将文件移动到磁盘上的组文件夹中，此时您可以选择。您可以继续从 Project Navigator 中删除它们，确保只删除对它们的引用并继续下一步，或者作为一个选项，您可以在 Project Navigator 中将它们实际移动到您希望它们所在的组（这个不会更改文件的磁盘位置 - 与组关联的文件夹仅适用于组的新文件）并将它们用作仍然需要从 Finder 中拖入的内容的指南。如果您要移动大量现有文件，这可能会派上用场，稍后您会看到。

现在，在 Finder 中，手动将一些文件移动到它们最终应该位于的文件夹中（与新组关联的文件夹）。如果您在 Project Navigator 中移动它们（而不是删除它们），它们将变为红色，因为实际文件不在它们所在的位置，但这可以作为指南（特别是如果您要移动大量文件）对于仍然需要正确设置的内容。

现在，您可以将它们从 Finder 拖放到与您放置文件的文件夹关联的组中。在出现的对话框中，是否选中复选框以进行复制（如有必要）都没有关系，因为它们已经到位，但确保您有“添加到目标”复选框很重要（ es) 检查。

如果您从旧组中删除了文件（仅删除参考），您可以进入 Finder 中旧组的文件夹并将文件从那里拖到 Project Navigator 中的新组中，您需要确保选中 Copy if necessary，但这是最终在磁盘上出现重复文件的地方......在旧组的文件夹和新组的文件夹中。这就是为什么您要先在 Finder 中将它们移动到新位置，然后再将它们拖到 Project Navigator 中的新组中。

如果您将 Project Navigator 中的红色文件留在正确的组中，则在将相同的文件添加到组中之后（不需要复制到组，因为它们已经在正确的位置），您最终会得到新的（黑色）引用文件以及对相同文件的红色损坏引用。此时，您可以从组中删除红色文件，而不会询问您是要删除文件还是仅删除参考。将红色文件留在新组中，直到您在 Project Navigator 中与它们一起显示正确的（黑色）文件，这有助于确保您将所有文件放回 Project Navigator。

如果您只是在几个/几个文件中移动，那么一旦您将项目导航器和 Finder 中的文件移动到正确的位置，您可以在项目导航器中选择每个红色引用并选择该特定文件的路径（与将文件夹分配给组的方式相同）。但是，如果您要移动一堆文件，这可能需要很长时间（一次只能分配一个），因此最好从 Finder 中将它们放入。

还有一个需要注意的问题……最好不要管“支持文件”组中的所有内容，以及 MainMenu.xib，因为根据构建设置，这些都应该位于特定位置。

请记住：**始终确保首先进行备份**（如果您正在移动大量文件，事情可能会失控）......仅仅拥有快照可能无济于事，因为恢复到快照不会移动您的文件在磁盘上回到原来的位置。

# mysql - MySQL 存储过程条件语句

> ID：10886207
> 
> 赞同：2
> 
> 时间：2012-06-04T18:23:54.387
> 
> 标签：mysql, conditional, stored-functions

任何人都可以帮助我如何在 MySQL 存储过程上有一个条件语句？

我有这个作为示例查询，

如果我的存储过程参数`isFirstTask = true`，那么我将使用`LEFT JOIN`，否则我将使用`INNER JOIN`

```
SELECT *
FROM jobdetails jd
INNER JOIN taskslogs tl ON jd.jobID = tl.jobid; 
```

问题是如何在不重复整个查询的情况下仅替换一个单词而将其更改`INNER JOIN`为`LEFT JOIN`。假设我的查询是批量的。可能吗？请给点主意。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T18:26:19.963

```
SELECT *
FROM jobdetails jd
      LEFT JOIN taskslogs tl ON jd.jobID=tl.jobid
WHERE IF(isFirstTask = TRUE, TRUE, tl.jobid IS NOT NULL); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T18:26:28.127

您可以将查询构建为存储过程中的字符串。在构建查询时，检查参数的值并决定使用哪个 JOIN。希望这可以帮助。

# java - jMockit 对私有类的访问

> ID：10886208
> 
> 赞同：1
> 
> 时间：2012-06-04T18:23:57.010
> 
> 标签：java, private, inner-classes, jmockit

我有一个公共课程，里面有一个私人课程：

```
public class Out
{
    private class In
    {
        public String afterLogic;

        public In(String parameter)
        {
            this.afterLogic = parameter+"!";
        }
    }
} 
```

并想用 jMockit 测试 In 类。这些方面的东西：

```
@Test
public void OutInTest()
{
    Out outer = new Out();
    Object ob = Deencapsulation.newInnerInstance("In", outer); //LINE X
 } 
```

问题是，在 LINE X 中，当尝试将 ob 转换为 In 时，无法识别 In 类。

知道如何解决这个问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T18:54:35.113

类中唯一的构造函数`In`接受一个`String`参数。因此，您需要传递参数值：

```
Object ob = Deencapsulation.newInnerInstance("In", outer, "test"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T18:52:17.220

正如评论中所建议的，一种方法是将内部类的访问修饰符从私有更改为公共。第二种方式（如果你不想让你的内部类公开），你可以测试外部类的公共方法，它实际上是调用内部类方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T18:53:20.997

将内部类的范围更改为默认值，然后确保测试在同一个包中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T19:02:57.113

有两种方法，首先是在其他帖子中提到的将范围更改为公共。我支持的第二个是，完全避免测试私有类。因为测试应该针对类的可测试代码或方法编写，而不是针对默认行为。

# java - CSV文件，二进制格式更快？最快的搜索？

> ID：10886214
> 
> 赞同：2
> 
> 时间：2012-06-04T18:24:20.317
> 
> 标签：java, sorting, file-io

如果我有一个 CSV 文件，将文件保存为位置文本或将其转换为其他格式会更快吗？（用于搜索）

**在搜索 CSV 文件方面，检索特定行（按键）的最快方法是什么？不是指对文件进行排序抱歉，我的意思是在文件中查找任意键。**

一些更新：

1.  该文件将是只读的
2.  该文件可以被读取并保存在内存中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T18:42:12.570

有几件事情需要考虑：

*   你存储什么样的数据？将其转换为二进制格式真的有意义吗？二进制格式会占用更少的空间（读取文件所需的时间取决于大小）吗？

*   您是否在系统运行时对同一个文件有多个查询，或者您是否必须在每次有人查询时加载文件？

*   您需要在不同系统之间高效传输文件吗？

所有这些因素对于决策都非常重要。常见的情况是您只需要加载一次文件，然后执行多次查询。在这种情况下，存储数据的格式并不重要，因为无论如何它都会存储在内存中。花更多时间思考处理查询的良好数据结构。

另一个常见的情况是，您无法保持主应用程序运行，因此您无法将文件保存在内存中。在这种情况下，摆脱文件并使用数据库。您可以使用的任何数据库很可能比您想出的任何数据库都快。然而，在系统之间传输数据库并不容易。

不过，文件格式很可能不是要考虑的真正问题。我已经阅读了很多非常长的 CSV 文件，并且大多数情况下，与我之后需要处理的数据相比，读取文件所花费的时间可以忽略不计。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T18:47:25.327

将其“转换”（即导入）到具有可搜索列上的索引和具有最高基数的列上的主键的数据库表（或最好是规范化表）中 - 无需重新发明轮子......你'将为自己节省很多问题 - 事务管理，并发......真的 - 如果它将在生产中，您希望将其保留为 csv 格式的机会几乎为零。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T18:26:40.550

如果您有太多数据并且非常生产级别，那么使用[Apache Lucene](http://lucene.apache.org/core/)

如果它的小数据集或关于学习的，那么阅读[后缀树](http://en.wikipedia.org/wiki/Suffix_tree)并[尝试](http://en.wikipedia.org/wiki/Trie)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-14T14:57:45.760

如果文件太大而无法保存在内存中，那么只需将密钥保存在内存中即可。一些行数也可以保留在内存中，当需要额外的行时，将最近最少访问的行分页。对文件使用 fseeks（由键指示）来查找文件本身中的行。然后将该行加载到内存中，以防可能需要该行上的其他条目。

# xna - XNA 绘制一系列正方形

> ID：10886221
> 
> 赞同：0
> 
> 时间：2012-06-04T18:24:46.753
> 
> 标签：xna

我正在尝试在 XNA 中绘制一系列正方形。我正在查看所有关于 TriangleStrips 和 DynamicVertexBuffers 的文章。但是，不确定从哪里开始。

**当前步骤** 我可以使用 VertexPositionColor、TriangleList 和索引绘制 1 个正方形。现在我想画一系列不同颜色的正方形。

**最终目标** 要记住的是，我最终希望能够绘制多少个这样的方格。如果我们假设宽度为 5px，在 1920x1080 的屏幕上，我们可以计算出正方形的数量为 (1920 * 1080) / 25 = 82944。

任何关于如何实现这一点的指示都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T18:43:41.983

通常，您可以像绘制第一个正方形一样绘制更多正方形。但是，性能会有很大损失。

相反，您可以将所有三角形添加到一个顶点缓冲区/索引缓冲区。您已经能够将两个三角形绘制为三角形列表。您应该能够轻松调整此例程以绘制两个以上的三角形。只需将相应的顶点和索引添加到缓冲区并修改绘图调用。

如果需要同一位置的顶点颜色不同，则需要在缓冲区中添加两个顶点。

这样，性能损失很小，因为你只用一个绘制调用绘制所有东西。虽然三角形的数量对于大多数显卡来说应该没有问题，但一些较小或较旧的显卡可能会遇到麻烦。如果是这样，你应该考虑改变你的绘图策略。也许甚至没有必要画那么多三角形。但是你可以考虑一下，如果结果性能太低......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T20:20:36.820

如果您不关心 3D，只关心 2D - 您可以使用[SpriteBatch](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.graphics.spritebatch.aspx)在屏幕上绘制正方形/矩形。这将为您处理所有顶点/索引缓冲区管理的批处理。

# c++ - 在 C++ 中检查打开的 UDP 端口

> ID：10886228
> 
> 赞同：5
> 
> 时间：2012-06-04T18:25:08.840
> 
> 标签：c++, network-programming, udp, port, port-scanning

如何使用本机 C++ 检查远程 UDP 端口是否打开？由于 UDP 是无连接的，因此调用`connect()`没有帮助。我无法尝试绑定它，因为它不是本地的。`nmap`也不能说明。（但是`netstat`可以找到，但我认为它会查看有关打开端口/文件的内部信息）。反正有检测吗？如果我在网络级别向下一层，是否可以通过 C++ 发送 ICMP 消息来检查端口不可达状态？我的意思是，这是否会提供有关端口状态的足够信息？

平台是Linux。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T19:05:59.017

我假设您正在尝试确定远程计算机上的 UDP 端口是否正在通过防火墙和/或是否有应用程序在其上运行。

您无法可靠地确定这一点。最接近的方法是尝试向该地址和端口发送一系列小数据报，间隔约 1 秒，持续约 10 秒。

如果没有防火墙阻止端口并且没有应用程序正在运行，那么远程系统可能会发回`ICMP_UNREACH_PORT`（端口不可达）。如果没有阻止防火墙并且远程系统已关闭，则路由器可能会发回`ICMP_UNREACH_HOST`或`ICMP_UNREACH_NET`. 如果防火墙阻止了您，它可能会发回`ICMP_UNREACH_FILTER_PROHIB`，但大多数防火墙不会发回任何东西。

因为大多数防火墙会阻止这种 ICMP 反馈，所以找回其中任何一个的可能性非常小。即使确实返回了 ICMP 消息，除非您以 root 身份运行，否则 linux 通常不会让您看到它。某些操作系统会将 ICMP 错误报告为`sendto()`同一地址/端口的下一个失败，这就是您需要多次重复该消息的原因。但有些没有，在这种情况下，您必须打开特定的 ICMP 端口并解析任何返回消息。

即使您确实以某种方式收到 ICMP 消息，也要了解它们是不可靠的。例如，`ICMP_UNREACH_PORT`即使应用程序不仅在侦听，而且还在主动向您发送数据，您也可以得到。（这种情况很少见，但我见过。）

如果应用程序正在给定端口上运行，并且如果您知道该应用程序是什么，并且如果您知道如何制作将导致该应用程序响应您的消息，那么这样做并获得响应是表明该端口的最佳指示开了。但是没有响应意味着什么：也许端口被阻塞，也许应用程序没有运行，或者它只是不喜欢你的消息。

底线：不，不是真的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T18:54:17.873

没有万无一失的方法可以检查远程端口是否准备好接收您的 UDP 数据报。由于 UDP 是无连接的，因此您可以判断远程主机是否正在回答对您有意义的内容。可能有一些方法可以获得提示（就像端口扫描仪所做的那样），但这不是我在生产代码中所依赖的。

# php - PHP中的爆炸数组值

> ID：10886233
> 
> 赞同：0
> 
> 时间：2012-06-04T18:25:19.137
> 
> 标签：php, arrays

我正在编写一个使用代理连接到服务器的脚本，遍历列表直到找到一个工作代理。

代理列表如下：

```
127.0.0.1:8080
127.0.0.1:8080
127.0.0.1:8080
127.0.0.1:8080
127.0.0.1:8080
127.0.0.1:8080
127.0.0.1:8080 
```

当然，它不是一遍又一遍地使用相同的IP和端口。现在，最初我只是打算`file()`将它们全部放入一个数组中，但这显然会留下一个包含整行值的数组。

理想情况下，我想要的是一个数组

```
"127.0.0.1" => 8080,
"127.0.0.1" => 8080,
"127.0.0.1" => 8080,
"127.0.0.1" => 8080,
"127.0.0.1" => 8080,
"127.0.0.1" => 8080,
"127.0.0.1" => 8080,
"127.0.0.1" => 8080, 
```

但我不确定最简单（也是最有效）的方法。有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T18:28:59.713

循环文件并进行一些解析：

```
$path = './file.txt';

$proxies = array();
foreach(file($path, FILE_SKIP_EMPTY_LINES) as $line) {
  $proxy = trim($line);
  list($ip, $port) = explode(':', $proxy);

  $proxies[$ip] = $port;
}

var_dump($proxies); 
```

应该注意，您的“预期”示例是无效的数组表示法，因为每个元素的键都是相同的。但我只是假设您要进行格式化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T18:35:10.350

使用以下代码

```
<?php

$data = "127.0.0.1:8080
    127.0.0.1:8080
    127.0.0.1:8080
    127.0.0.1:8080
    127.0.0.1:8080
    127.0.0.1:8080
    127.0.0.1:8080";

    $urls = explode("\n",$data);

    $new_data = array();
    foreach($urls as $url){
        if($url!=""){
            $url_parts = explode(":",$url);
            $new_data[] = array($url_parts[0]=>$url_parts[1]);
        }
    }

    print_r($new_data);

?> 
```

# wpf - 如何实现 wpf 键绑定

> ID：10886234
> 
> 赞同：0
> 
> 时间：2012-06-04T18:25:23.677
> 
> 标签：wpf, key-bindings, routedevent

我希望能够允许用户在运行时更改热键。

有没有人有一个具体的例子来说明如何在代码隐藏 C# 中绑定一个键来完成这个？

我假设我必须使用 RoutedCommand 进行键绑定。假设我想用热键按下 UI 上的按钮。

例如... 让用户按 F5 以单击应用程序上的 btnGo。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T18:41:56.560

命令的工作方式与您的想法有些不同。当您按下按钮时，它不会触发对应用程序中按钮的点击。相反，您定义了一个命令（在这种情况下，您可以有一个名为“Go”的命令），然后您可以将此命令分配给应用程序中的各种元素（菜单项、按钮等）。所有这些项都会触发该命令并该命令具有执行代码的“已执行”功能。

如果将 CommandBindings 添加到主窗口，则可以使用热键全局触发这些命令。您可以通过以下代码轻松地将命令绑定放置在 XAML 中：

```
<Window.CommandBindings>
    <CommandBinding Command="local:MyCommands.Go" CanExecute="GoCanExecute" Executed="Go" />
</Window.CommandBindings> 
```

要创建自己的命令，您可以在代码中创建“RoutedUICommand”并设置默认成员（默认名称、默认键绑定等）。您很可能希望使其成为类的静态属性。

然后，如果您想更改或添加此命令的键绑定，您只需访问此静态属性并修改 InputGestures 集合。您可以清除它，添加新的键绑定，并根据需要更改它们。

# objective-c - NSURLConnection 委托

> ID：10886237
> 
> 赞同：0
> 
> 时间：2012-06-04T18:25:46.343
> 
> 标签：objective-c, ios, nsurlconnection

修改...

该应用程序的关键是与数据库服务器进行通信。从服务器到应用程序的响应都是 XML 格式的。有几个屏幕。例如，屏幕 1 列出了用户的信息，屏幕 2 列出了用户过去的交易，允许新的交易，等等。

这是我的 AppDelegate 中的一些代码：

```
StartViewController *svc = [[StartViewController alloc] init];
TradeViewController *tvc = [[TradeViewController alloc] init];
CashViewController *cvc = [[CashViewController alloc] init];
ComViewController *covc = [[ComViewController alloc] init];
PrefsViewController *pvc = [[PrefsViewController alloc] init];

NSMutableArray *tabBarViewControllers = [[NSMutableArray alloc] initWithCapacity:5];
UITabBarController *tabBarController = [[UITabBarController alloc] init];

UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:svc];
[tabBarViewControllers addObject:navigationController];
navigationController = nil;

navigationController = [[UINavigationController alloc] initWithRootViewController:tvc];
[tabBarViewControllers addObject:navigationController];
navigationController = nil;

navigationController = [[UINavigationController alloc] initWithRootViewController:cvc];
[tabBarViewControllers addObject:navigationController];
navigationController = nil;

navigationController = [[UINavigationController alloc] initWithRootViewController:covc];
[tabBarViewControllers addObject:navigationController];
navigationController = nil;

navigationController = [[UINavigationController alloc] initWithRootViewController:pvc];
[tabBarViewControllers addObject:navigationController];
navigationController = nil;

[tabBarController setViewControllers:tabBarViewControllers];

[[self window] setRootViewController:tabBarController];

self.window.backgroundColor = [UIColor whiteColor];
[self.window makeKeyAndVisible]; 
```

试图坚持 MVC 风格，我有一个单例类来完成所有的“处理”。

现在是我如何撞墙的示例……用户可以在屏幕 5 上更改他们的电子邮件地址。在文本字段中输入新的电子邮件地址，然后单击保存按钮。然后该按钮从单例类中调用一个方法，该方法将新的电子邮件地址发送到服务器并（通过 URL）并接收确认更改的 XML 响应。

以下是我的问题： 1\. 在进行单例类方法调用之前，我从视图控制器启动微调器 - 但不知道应用程序到服务器的发送/接收何时完成，如何让微调器在正确的时间停止？我不能从单例类中获得它，我试过了。据我所知，它必须来自 VC 内部，或者有没有办法从我的单例类中更改 VC 输出？

1.  单例类 NSURLConnection 正在处理我的所有通信。从简单的电子邮件更改一直到更新事务表的所有内容。这对我来说似乎是错误的，并且很难跟踪谁在打电话。同样，我将按照我对 MVC 的解释进行说明。我认为为每个 VC 设置一个 NSURLConnection 并在这些类中进行一些处理会容易得多。但是，这不是 MVC(ish)。

2.  我的单例类中有近 100 个变量、数组等...... 这对我来说似乎也是错误的，但我想不出任何其他方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T18:31:35.390

> 如何在 NSURLConnection 委托 (connectionDidFinishLoading) 中区分正在进行哪个 URL 调用？

每个委托方法（例如`-connectionDidFinishLoading:`）都有一个`connection`参数，告诉您哪个连接发送了消息。给定的连接一次只能加载一个 URL，因此 URL 和连接之间存在一对一的对应关系。

> 下载完成后，如何在“connectionDidFinishLoading”之外进行判断？

该方法会*告诉*您连接何时完成。您可以将这些信息存储在对您的应用程序有用的地方。

**更新：**根据您添加的内容，您的“处理”类是您应用的模型。应用程序的其余部分不应该关心每个事务都涉及到服务器的消息——这只是模型的业务。此外，模型没有理由必须是单个对象（更不用说单例了）——它可以是一组协同工作的对象。

因此，您可能有一个类（我们称其为处理器），它表示应用程序与模型的接口（有些人甚至称其为“模型控制器”）。Processor 的一个实例可能会创建一个本地数据库来存储应用程序的当前本地状态。您可能还有一个 Transaction 类，它表示与服务器的单个事务。事务可以创建一个请求，将其发送到服务器，获取响应，更新数据库，并告诉处理器事务已完成。或者，也许当应用程序的其他部分（如您的视图控制器之一）要求处理器处理新事务时，处理器将请求对象传递给它创建的事务，以便事务可以直接更新请求者。

如果不知道您打算在哪里使用它，很难说出您的应用程序的最佳计划是什么，但通常的指导方针是：

*   把你的问题分解成更容易解决的部分

*   限制每个类的职责范围

*   如果某些事情看起来很复杂，那可能是

将你的模型分成几个类也会更容易测试。您可以想象为 Transaction 类编写一组单元测试是多么容易。处理器也是如此——如果服务器事务属于不同的类，则更容易测试处理器是否在做正确的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T18:30:10.930

如果您有多个 NSURLConnections 用于同一个委托，请考虑使用全局（好吧，我们说是一个实例变量）NSMutableDictionary 实例，您可以根据调用的 NSURLConnection 来存储数据。例如，您可以使用转换为 NSString 的连接的内存地址（类似于

```
[NSString stringWithFormat:@"%p", connection] 
```

应该做的伎俩）。

此外，在`connectionDidFinishLoading:`and`connection:didFailLoadWithError:`方法中，删除与 NSURLConnections 对应的键。因此，如果连接完成，您可以从“外部”告诉它：只需检查它是否在字典中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T18:39:45.940

如果您通过网络连接下载任何数据，我建议您使用[ASIHttpRequest](http://allseeing-i.com/ASIHTTPRequest/)。这将允许您异步下载文件，这意味着您的界面在下载过程中不会冻结。

如果使用`ASIHttpRequest`，还可以设置`didFinishSelector`。通过这样做，您可以控制在特定 URL 完成加载时调用哪个方法。

看看这个：

```
NSURL *url = [NSURL URLWithString:@"http://allseeing-i.com"];
ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];

[request setDelegate:self];
[request startAsynchronous];
[request setDidFinishSelector:@selector(requestDone:)]; 
```

然后：

```
- (void)requestDone:(ASIHTTPRequest *)request
{
   // Use when fetching text data
   NSString *responseString = [request responseString];

   // Use when fetching binary data
   NSData *responseData = [request responseData];

   // If you want, you can get the url of the request like this
   NSURL *url = [request url];
} 
```

至于你问题的第二部分，如果该`requestDone:`方法没有被调用，你就知道下载没有完成。

如果您想通过多次下载来做一些更复杂的事情，也`ASIHttpRequest`可以提供队列功能。看看[这里](http://allseeing-i.com/ASIHTTPRequest/How-to-use)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-04T18:55:20.660

我建议继承 NSURLConnection。只需添加两个属性：一个 NSInteger `tag`, 和一个 BOOL, `isFinished`。这样，您可以`#define`为每个不同的请求添加标签，然后在您的委托方法中通过标签来识别它们。在`connectionDidFinishLoading`中，您可以将`isFinished`BOOL 设置为 YES，然后您可以在其他方法中检查连接是否完成。

* * *

这是我自己的 NSURLConnection 子类 TTURLConnection：

**TTURLConnection.h：**

```
#import <Foundation/Foundation.h>

@interface TTURLConnection : NSURLConnection <NSURLConnectionDelegate>

@property (nonatomic) NSInteger tag;
@property (nonatomic) BOOL isLocked;

- (id)initWithRequest:(NSURLRequest *)request delegate:(id)delegate startImmediately:
    (BOOL)startImmediately tag:(NSInteger)tagParam;

@end 
```

**TTURLConnection.m：**

```
#import "TTURLConnection.h"

@implementation TTURLConnection

@synthesize tag;

- (id)initWithRequest:(NSURLRequest *)request delegate:(id)delegate startImmediately:
    (BOOL)startImmediately tag:(NSInteger)tagParam {
    self = [super initWithRequest:request delegate:delegate 
        startImmediately:startImmediately];

    if(self) {
        self.tag = tagParam;
    }

    return self;
}

@end 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-04T19:08:17.953

希望这会帮助你。

```
- (void)connectionDidFinishLoading:(NSURLConnection*)connection
{   
    NSString *urlString = [[[connection originalRequest] URL] absoluteString];
    if ([urlString caseInsensitiveCompare:@"http://www.apple.com"] == NSOrderedSame) {
        //Do Task#1
    }
    else if ([urlString caseInsensitiveCompare:@"http://www.google.com"] == NSOrderedSame)
    {
        //Do Task#2
    }
} 
```

# c++ - 尝试使用 gcc 工具链构建 Boost

> ID：10886246
> 
> 赞同：4
> 
> 时间：2012-06-04T18:26:25.607
> 
> 标签：c++, qt, gcc, boost, mingw

出于某种原因，当我尝试使用 toolset=gcc 运行 b2 时，我得到以下信息。

```
C:\boost_1_49_0>.\b2.exe toolset=gcc
C:/boost_1_49_0/tools/build/v2/tools\gcc.jam:129: in gcc.init from module gcc
error: toolset gcc initialization:
error: no command provided, default command 'g++' not found
error: initialized from
C:/boost_1_49_0/tools/build/v2/build\toolset.jam:38: in toolset.using from modul
e toolset
C:/boost_1_49_0/tools/build/v2\build-system.jam:481: in process-explicit-toolset
-requests from module build-system
C:/boost_1_49_0/tools/build/v2\build-system.jam:562: in load from module build-s
ystem
C:\boost_1_49_0\tools\build\v2/kernel\modules.jam:283: in import from module mod
ules
C:\boost_1_49_0\tools\build\v2\kernel\bootstrap.jam:142: in boost-build from mod
ule
C:\boost_1_49_0\boost-build.jam:17: in module scope from module 
```

我究竟做错了什么？

编辑：我必须将 C:\MinGW\bin 添加到我的 Path 环境变量中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T18:41:24.533

您应该在可以访问 mingw/cygwin bin 目录的命令行中运行此命令。我的意思是当您键入 g++ 时，它可以工作并且不会返回未找到的命令。如果您使用的是 mingw 或 cygwin，它们有专用的命令行，其中 g++（bin 目录）路径在环境变量中注册。当然，您可以使用 Eclipse 在 windows 下编译您的 c++ 应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T18:34:50.507

您正在 Windows 机器（Cygwin、MinGW）上使用 gcc 工具集构建 Boost？这里的主要问题是 Boost 构建系统找不到您的编译器。确保 g++ 在您的路径中。

# django - 使用 django 中的 FileField 通过管理员上传

> ID：10886251
> 
> 赞同：0
> 
> 时间：2012-06-04T18:26:40.503
> 
> 标签：django, django-models, django-admin

我有一件很奇怪的事情。我在win7 Django 1.4上。我有以下 media_root/url 设置：

```
MEDIA_ROOT = 'c:\project\uploads'
MEDIA_URL = '/media/' 
```

我的 url.py 包括：

```
 urlpatterns += patterns('', 
    (r'^media/(?P<path>.*)$', 'django.views.static.serve', { 
    'document_root': settings.MEDIA_ROOT})) 
```

我有一个该领域的模型：

```
 file = models.FileField(upload_to=MEDIA_ROOT, blank = True) 
```

现在，我正在通过管理站点上传文件，文件已成功上传。但是，当通过管理员访问文件时，我看到文件的链接是：

```
http://127.0.0.1:8000/media/c:\project\uploads\[filename] 
```

我不知道我做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T21:10:24.893

我认为你的模型是错误的：

```
file = models.FileField(upload_to=MEDIA_ROOT, blank = True) 
```

**upload_to**期望添加到 MEDIA_ROOT 的相对路径，因此现在它期望文件位于 MEDIA_ROOT/MEDIA_ROOT，这没有任何意义。

尝试类似：

file = models.FileField(upload_to='files', blank = True)

**文档：**

> FileField.upload_to 本地文件系统路径，将附加到您的 MEDIA_ROOT 设置以确定 url 属性的值。

# c - char *str 为 null 和 str[0] == '\0' 有什么区别

> ID：10886254
> 
> 赞同：0
> 
> 时间：2012-06-04T18:26:50.143
> 
> 标签：c, string, pointers, char

我有一个指针`char *str;`

对于特定情况，`if (!str)`不是 NULL 而是`str[0] == '\0'`，这如何以及何时可能？

**编辑：0** 感谢所有回复。基本上我需要将此字符串作为源参数传递，`strlcpy()`其中存在下垂故障，因为这是一个空字符串。看来我需要这样的检查：`if (!str || str[0] == '\0')`而不是传递给 strlcpy()。听起来对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T18:28:30.750

`str[0] == '\0'`用于表示一个**空字符串**——长度为 0 的字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T18:29:44.110

`\0`是空字节或空终止符。因此，它被视为空值。C 字符串以空值结尾。也就是说，第一次看到空字节时，字符串被认为是完整的。如果不`\0`存在其他任何东西，它就是`NULL`。

如果您有超出此字节的信息（这对字符串来说是不好的做法），您可以尝试检查`str+1`哪些将提前通过空字节。无论如何，`str+1`等等很可能是垃圾数据并导致无效的内存访问（导致您的程序崩溃）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T18:31:12.753

当`NULL`str 中的有效（非）指针指向包含单个`\0`字符的内存地址时，这是可能的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-04T18:31:46.450

```
char *str = ""; 
```

then`str`是一个指向空字符串的指针，它不是`NULL`but `*str == str[0] == 0`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-04T18:32:42.563

`str`在内存中保存一个地址 - a 的地址`char`。

`(!str)`只有当 str 的值不是时才会返回 false `NULL`。换句话说，当 str 没有引用 address`NULL`时，这是一个不可用的内存地址。

`*str`包含一个`char`. 当*str 指向的字符*为`NULL`时，则`(str[0] == '\0')`返回 true：str 指向的是空字符串。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-04T18:34:30.287

您正在处理两件事：

首先， char *str 是一个指针。如果它为 NULL，则它没有指向有效内存，并且您不能将其取消引用为`str[0]`或`*char`。

其次，`str[0]`== '\0'`表示你有一个指向有效内存的指针，str所指向的内存中字符串的第一个位置是'\0'，一个字符串终止符。

# java - 是否有用于 Jarque-Bera 测试的 java 库？

> ID：10886266
> 
> 赞同：2
> 
> 时间：2012-06-04T18:28:17.083
> 
> 标签：java, statistics

我目前正在寻找一个可以用来进行 jarque-bera 统计测试的开源 java 库。

该库应包含样本大小在 8 到 250 之间变化的测试临界值。

有人知道这样的图书馆吗？非常感谢所有帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T08:32:37.340

好的，对于那些和我有同样问题的人。我通过创建自己的实现完成了这个问题：

1.  自己计算峰度和偏度
2.  自己计算 JB 检验统计量。

如果有必要，我可以在这里提供代码。

大多数其他可能的库需要集成（R 相关项目）或者是商业的（算数）。

# grails - 如何配置 db-reverse-engineer 插件

> ID：10886269
> 
> 赞同：3
> 
> 时间：2012-06-04T18:28:30.817
> 
> 标签：grails, configuration, groovy, grails-plugin

我是一个 Grails 菜鸟，试图为我的第一个项目配置 db-reverse-engineer 插件。 [该插件的文档](http://grails-plugins.github.com/grails-db-reverse-engineer/docs/manual/guide/single.html#2%20Configuration)表明我需要对其进行配置，但我没有看到我应该在哪里编辑配置。

我的项目中是否有需要编辑的配置文件？我在 ./grails-app/conf 文件夹中搜索了 grails.plugin（此插件配置的前缀），但一无所获。SO 或 Google 搜索如何配置 grails 插件也返回 void。我知道这是一个蹩脚的问题，但我该如何配置这个插件呢？是否有我需要使用的 UI，或者是否有文件可以编辑？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T19:11:33.497

您需要在`grails-app/conf/DataSource.groovy`. 特别是，您需要提供 JDBC URL、数据库方言以及数据库的用户名和密码。

您还必须`db-reverse-engineer`向`grails-app/conf/Config.groovy`. 该文件将已经存在。只需在末尾附加新属性即可。

最后，运行逆向工程脚本来生成你的域类：

```
grails db-reverse-engineer 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T19:11:56.680

正确的地方是文件`grails-app/conf/Config.groovy`。

只需在底部添加您需要的内容。

# c - 使用两种不同的状态同步两个进程

> ID：10886272
> 
> 赞同：5
> 
> 时间：2012-06-04T18:28:45.603
> 
> 标签：c, linux, shared-memory

我正在尝试找出一种方法来同步两个共享数据的进程。

基本上我有两个使用共享内存链接的进程。我需要进程 A 在共享内存区域中设置一些数据，然后进程 B 读取该数据并对其进行操作。

我期待的事件顺序是：

1.  B块等待数据可用信号
2.  A 写入数据
3.  可用的信号数据
4.  B 读取数据
5.  B 块等待数据不可用信号
6.  A 信号数据不可用
7.  一切又回到了起点。

换句话说，B 将阻塞直到它得到一个“1”信号，获取数据，然后再次阻塞，直到该信号变为“0”。

我已经设法使用纯共享内存来模拟它，但是我要么使用消耗 100% CPU 时间的 while 循环阻塞，要么我使用带有 nanosleep 的 while 循环，它有时会错过一些信号。

我尝试过使用信号量，但我只能找到一种等待零而不是一的方法，并且尝试使用两个信号量只是没有用。我不认为信号量是要走的路。

将有许多进程都访问同一个共享内存区域，并且当共享内存被修改时需要通知所有进程。

它基本上是在尝试模拟硬件数据和控制总线，其中事件是边缘触发而不是电平触发。这是我感兴趣的状态之间的转换，而不是状态本身。

那么，有什么想法或想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T18:36:35.483

Linux 有自己的[**`eventfd(2)`**](http://www.kernel.org/doc/man-pages/online/pages/man2/eventfd.2.html)工具，您可以将其合并到您的正常`poll`/`select`循环中。您可以`eventfd`按照通常的方式通过 UNIX 套接字将文件描述符从一个进程传递到另一个进程，或者仅使用`fork(2)`.

### 编辑0：

重新阅读问题后，我认为您的选项之一是信号和进程组：在同一进程组 ( ) 下启动您的“侦听”进程，然后用对or的否定参数向[`setpgid(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/setpgid.2.html)它们发出信号。同样，Linux 提供轮询和避免慢信号蹦床。`pid`[`kill(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/kill.2.html)[`sigqueue(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/sigqueue.2.html)[`signalfd(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/signalfd.2.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T18:36:31.863

如果涉及 2 个进程，您可以使用文件、共享内存甚至网络来传递标志或信号。但是如果进程比较多，修改内核可能会有一些合适的解决方案。您的问题中有一个共享内存，对吗？！现在如何传递信号？！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T21:07:47.800

在 linux 中，所有 POSIX 控制结构（互斥体、条件、读写锁、信号量）都有一个选项，如果它们驻留在共享内存中，它们也可以在进程之间使用。对于您描述的经典互斥锁/条件对的过程，似乎很适合这项工作。`..._init`查看这些结构的函数手册页。

Linux 有其他适当的实用程序，例如“futex”，可以更有效地处理这个问题。但这些可能不是开始的正确工具。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T11:41:34.040

1 个单读和单写
**1 个单读和单写** 这可以使用信号量来实现。在posix semaphore api中，您有 sem_wait() ，它将一直等到信号量计数的值为零，一旦使用来自其他进程的 sem_post 递增，等待将完成。

在这种情况下，您必须使用 2 个信号量进行同步。

**进程 1（阅读器）**
sem_wait(sem1);
.......
sem_post(sem2);

**进程 2(writer)**
sem_wait(sem2);
.......
sem_post(sem1);

这样就可以在共享内存中实现同步。

# android - Android：如果没有可用的互联网连接，如何关闭应用程序？

> ID：10886273
> 
> 赞同：0
> 
> 时间：2012-06-04T18:28:48.677
> 
> 标签：android

我正在 Android 上开发一款游戏，它需要连接互联网才能玩。我知道如何检查连接是否可用，但我不确定如果连接不可用该怎么办。

我的想法是向用户显示一个“无可用连接”对话框，其下方有一个“退出”按钮，以便他可以从对话框中关闭应用程序并修复他的连接。我将使用系统执行此操作。退出（0）命令。

但是，我在很多地方都读过我不应该使用该命令或关闭我的应用程序，而是让操作系统来处理这个问题。

但是如何在不使用 System.exit(0) 的情况下解决这种情况？

我相信 DrawSomething 游戏还会检查 Internet 连接并为您提供“退出”按钮以防万一您没有。不确定他们使用什么方法来关闭应用程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T18:29:51.533

> 但是如何在不使用 System.exit(0) 的情况下解决这种情况？

在您的第一个活动中检查 Internet 连接，`finish()`如果没有 Internet 连接（或者更准确地说，在用户单击您的确认对话框之后），则调用以摆脱该活动。

# forms - 提交表单时，Grails 在控制器上给我 404

> ID：10886278
> 
> 赞同：1
> 
> 时间：2012-06-04T18:28:59.330
> 
> 标签：forms, grails

我有一个基本的控制器，就像这样：

```
class BookingController {

    def periodCheck(){

    }

    def periodInput(){

    } 
```

两者`booking/periodCheck.gsp`和`booking/periodInput.gsp`都已创建，如果我直接输入 URL ，**它们就可以工作。**

但是，我有一个表单`periodInput.gsp`应该向 发送一些数据`periodCheck`，每次发送表单时，我都会收到 404 错误，说`The requested resource (/hoteledison/booking/periodCheck) is not available`. 表单定义如下：

```
<g:form action="periodCheck">
        <!-- here would go the fields -->
        <g:actionSubmit class="btn" value="Comprobar" />
</g:form> 
```

我究竟做错了什么？我也尝试`allowedMethods`在控制器中定义，但这没有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T19:06:44.600

好的，根据[这篇博文](http://www.augusttechgroup.com/tim/blog/2009/06/16/ohms-law-and-grails-form-submissions/)`actionSubmit`，使用和是有区别的`submitButton`。对于像我这样的表格，只需一个动作，我应该使用后者。

现在它正在工作。

# php - php 5.2.17 的意外 T_FUNCTION 但在 localhost 和 php 5.3.10 上很好

> ID：10886282
> 
> 赞同：3
> 
> 时间：2012-06-04T18:29:16.393
> 
> 标签：php, wordpress

将我的 Wordpress 文件上传到运行 php 版本 5.2.17 的服务器后，我收到了一个意外的 T_FUNCTION php 错误。

该主题在 localhost（使用 MAMP）上运行良好，并且在我自己的运行 php 版本 5.3.10 的服务器上也没有错误。

可能有什么问题或可以采取什么措施来解决此错误？

这是导致错误的行：

```
add_action('init', function() use($name, $args) { 
```

整个functions.php文件看起来像这样：

```
<?php 

/* Add Post Type */
function add_post_type($name, $args = array() ) {   
    if ( !isset($name) ) return;

    $name = strtolower(str_replace(' ', '_', $name));

    add_action('init', function() use($name, $args) {   
        $args = array_merge(
            array(
                'label' => 'Members ' . ucwords($name) . '',
                'labels' => array('add_new_item' => "Add New $name"),
                'singular_name' => $name,
                'public' => true,
                'supports' => array('title', 'editor', 'comments'),
            ),
            $args
        );

        register_post_type( $name, $args);
    });
}

add_post_type('Netherlands', array(
    'supports' => array('title', 'editor', 'thumbnail', 'comments')
));

add_post_type('Belgium', array(
    'supports' => array('title', 'editor', 'thumbnail', 'comments')
));

    add_post_type('Germany', array(
    'supports' => array('title', 'editor', 'thumbnail', 'comments')
));

    add_post_type('France', array(
    'supports' => array('title', 'editor', 'thumbnail', 'comments')
));

    add_post_type('United-Kingdom', array(
    'supports' => array('title', 'editor', 'thumbnail', 'comments')
));

    add_post_type('Ireland', array(
    'supports' => array('title', 'editor', 'thumbnail', 'comments')
));

    add_post_type('Spain', array(
    'supports' => array('title', 'editor', 'thumbnail', 'comments')
));

    add_post_type('Portugal', array(
    'supports' => array('title', 'editor', 'thumbnail', 'comments')
));

    add_post_type('Italy', array(
    'supports' => array('title', 'editor', 'thumbnail', 'comments')
)); 
```

我真的是 php 新手，只将它用于 Wordpress 主题。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T18:30:23.847

低于 5.3 的 PHP 不能有匿名**函数**

重新编写您的代码，使其不涉及匿名函数，并且它应该可以在您的旧服务器上运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T18:37:52.437

`add_action()`的第二个参数是[回调](http://us.php.net/manual/en/language.types.callable.php)类型。

在 5.3 之前，这通常是一个表示函数的字符串：

```
add_action('init', 'myFunction');

function myFunction() { echo 'init'; } 
```

[`create_function`](http://php.net/create_function)在处理对象时，可以使用诸如和其他语法之类的替代方法。

从 5.3 开始，允许使用匿名函数：

```
add_action('init', function() { echo 'init'; }); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-04T18:35:49.180

PHP 5.3.0 提供的匿名函数

# visual-studio-2010 - tfs 内部版本号 - 入门

> ID：10886286
> 
> 赞同：1
> 
> 时间：2012-06-04T18:29:35.717
> 
> 标签：visual-studio-2010, tfs, tfsbuild

我有 Visual Studio 2010 和 Visual Studio 2010 团队资源管理器。签入代码后，我可以查看变更集编号（查看历史记录）。我通常会在修复某些内容后立即在错误日志系统中输入变更集编号。现在我在哪里/如何获得内部版本号？这是 TFS 管理员的事情吗？我从哪里开始？我是否需要使用 MSBuild 而不是使用 Visual Studio GUI？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T19:43:25.377

创建[构建定义](http://msdn.microsoft.com/en-us/library/gg413265.aspx)时，默认情况下 TFS 使用以下格式标记每个构建：`$(BuildDefinitionName)_$(Date:yyyyMMdd)$(Rev:.r)`

默认模板的内部版本号可以在
`[build defintion]`> `Process`> `Basic`>下自定义`Build Number Format`

但是，您可能需要查看[Versioned TFS 2010 Build](http://versionedtfsbuild.codeplex.com/)以更好地控制内部版本号格式和程序集的自动版本控制（通过 AssemblyInfo.cs）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T07:24:54.750

看来您根本没有设置 TFS 构建。
尽管这需要一些时间来掌握一个概念并根据您自己的需求定制解决方案，但这绝对值得投资（或者，反过来，不使用 TFS 构建会使对 TFS 的整个投资变得不值得）。

[这](http://www.theabsentmindedcoder.com/2010/02/creating-my-first-tfs-2010-build.html)可能是一个不错的起点，那里有很多有用的资源，我建议您深呼吸并立即投入其中。您总是可以返回更具体的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T03:42:49.687

通过gui：

右键单击构建>查看构建>选项卡以“完成”

构建定义 > 所有质量过滤器 > 所有日期过滤器 > 今天

双击感兴趣的构建：

您应该在最顶部看到内部版本号和变更集。

=========

当您提交时，您应该使用对话框将您的提交与工作项相关联 - 这样您就不必手动设置任何内容。

要在 msbuild 中获取这些详细信息，可以使用以下方法检索数据：

```
 <Exec Condition=" '$(IsInTeamBuild)'=='True'" Command="&quot;$(TfsTask)&quot; history ../ /r /noprompt /stopafter:1 /version:W > &quot;$(TemporaryFolder)\grab-changeset.txt&quot;" />
    <Exec Condition=" '$(IsInTeamBuild)'=='True'" Command="&quot;$(TfsTask)&quot; properties &quot;$(MyMSBuildStartupDirectory)\all-companies-run-after-update.js&quot; > &quot;$(TemporaryFolder)\grab-properties.txt&quot;" /> 
```

我们使用上面的提取：build#, branch, revision#

# uibutton - 将 UILongPressGestureRecognizer 添加到 UIScrollView 内的多个按钮

> ID：10886288
> 
> 赞同：1
> 
> 时间：2012-06-04T18:29:45.690
> 
> 标签：uibutton

我有 5-10 个不同的按钮`UIScrollView`。

我想`UILongPressGestureRecognizer`在我的`UIScrollView`.

```
-(IBAction)CheckIfUserWantsToDoSomething:(id)sender {
    HoldTimer = [NSTimer scheduledTimerWithTimeInterval:1.2 target:self selector:@selector(DoAction:) userInfo:nil repeats:NO];
}

-(void)DoAction:(id)sender {
    [HoldTimer invalidate];

    //My Code...
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T01:42:41.930

你可以得到所有的`UIScrollView`'s `subviews`，并像这样过滤掉`UIButton`'s ：

```
for (UIButton *button in myScrollView.superview.subviews) {
    if ([button isKindOfClass[UIButton Class]]) {

    }
} 
```

然后您可以创建并将您的添加`UILongPressGestureRecognizer`到这些按钮。

```
UILongPressGestureRecognizer *holdRecognizer = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(DoAction:)];
[holdRecognizer setMinimumPressDuration:2];

[button addGestureRecognizer:holdRecognizer]; 
```

# c# - 在窗口电话应用程序开发中将字符串值从一个页面传递到另一个页面

> ID：10886294
> 
> 赞同：0
> 
> 时间：2012-06-04T18:29:59.407
> 
> 标签：c#, windows-phone-7

我有 2 页。Basket_start.xml 和 Basket_main.xml。我希望很少有值从 Basket_start 传递到 Basket_main。我选择创建一个页面实例方法来传递值。我在起始页访问主页的代码片段如下

"

```
 Basket_main page2Instance = e.Content as Basket_main;
           if (page2Instance != null)
           {
               page2Instance.team1_name = textBox1.Text;  // entered some string
               page2Instance.team2_name = textBox2.Text;  // entered some string 
               page2Instance.period_cnt = int.Parse(textBox3.Text);
               page2Instance.base_time = long.Parse(textBox4.Text);
               page2Instance.foul_cnt = int.Parse(textBox5.Text);
           } 
```

"

当我使用以下代码片段访问主页中的值时

```
"textBox7.Text = string.Format("{0}", team1_name);// displaying the value read from start page
 textBox8.Text = string.Format("{0}", team2_name);" 
```

我面临“未处理 NullReferenceException”。但我可以从上述方法访问其他值，如 int, long。有人可以建议我解决这个问题的方法吗？

# android - 在 actionlistener 上检查 imageview 资源而不是 imageview 的 id

> ID：10886304
> 
> 赞同：0
> 
> 时间：2012-06-04T18:30:26.153
> 
> 标签：android, image, button, imageview

我有 16 个 imageview，每个都设置为 onBtnClick 作为侦听器，在此方法中它检查 imageview id 是否对应于特定 id，我需要更改它以便检查 imageview 内的图像资源，例如

```
public void onBtnClicked(View v)
{

  if( v.getId() == R.id.img1 )
  {
      Intent guess = new Intent(this, com.Logo_Master.Guesslogo.class);
      guess.putExtra("image","img1");
      startActivity(guess);
  }
} 
```

需要是这样的：

```
public void onBtnClicked(View v)
{

  if( v.getId() == R.drawable.img1 )
  {
      Intent guess = new Intent(this, com.Logo_Master.Guesslogo.class);
      guess.putExtra("image","img1");
      startActivity(guess);
  }
} 
```

或类似的东西......所以它检查图像视图内的图像而不是图像视图......

谢谢你。

/*编辑*/

```
Random random = new Random( System.currentTimeMillis() );
    List<Integer> generated = new ArrayList<Integer>();
    for (int i = 0; i < imageViews.length; i++) {

        int v = imageViews[i];
        int next = random.nextInt( 16 );
        if ( !generated.contains( next ) ) {
            generated.add( next );
            ImageView iv = (ImageView) findViewById( v );
            iv.setImageResource( images[next] );
            Object tag = (Object) new Integer(getImageName(this, String.valueOf(images[next])));
            iv.setTag(tag);
        }
        else {
            i--;
        }
    }

public static int getImageId(Context context, String imageName) {
return context.getResources().getIdentifier("id/" + imageName + "guess", null, context.getPackageName());
}

public static int getImageName(Context context, String imageName) 
{
return context.getResources().getIdentifier("drawable/" + imageName + "guess", null,     context.getPackageName());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T18:41:16.100

您可以使用标签来实现这一点：

创建 ImageView（在代码或 XML 中）时，定义一个标签：

```
android:tag = "tag" 
```

或者

```
Object tag = (Object) new Integer(R.drawable.img1);
imageView.setTag(tag); 
```

然后在需要之前通过以下方式检索标签：

```
Object tag = imageView.getTag();
int drawableId = Integer.parseInt(tag.toString());
if( drawableId == R.drawable.img1 ) {
      ....
} 
```

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T13:38:38.073

无法直接使用 imageView 执行此操作。然而，没有什么能阻止您继承 imageView 并添加所需的功能。例如：

```
import android.content.Context;
import android.util.AttributeSet;
import android.widget.ImageButton;

public class MyImageButton extends ImageButton {

private static final String ANDROID_NAME_SPACE = "http://schemas.android.com/apk/res/android";
private int mDrawableResId = -1;

public MyImageButton(Context context) {
    super(context);
    // TODO Auto-generated constructor stub
}

public MyImageButton(Context context, AttributeSet attrs) {
    super(context, attrs);
    mDrawableResId = attrs.getAttributeResourceValue(ANDROID_NAME_SPACE, "src", -1);
}

public MyImageButton(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    mDrawableResId = attrs.getAttributeResourceValue(ANDROID_NAME_SPACE, "src", -1);
}
@Override
public void setImageResource(int resId){
    super.setImageResource(resId);
    mDrawableResId = resId;
}

public int getDrawableResId(){
    return mDrawableResId;
}
} 
```

这捕获了直接和从 XML 设置可绘制对象。

（免责声明：我从未尝试过，但是它应该完全符合您的要求。上面的示例在模拟器中确实有效。如果有人对这种方法有任何意见，我很想听听他们的意见。）

# php - 使用 jquery ajax 将 JSON 发送到 PHP

> ID：10886305
> 
> 赞同：1
> 
> 时间：2012-06-04T18:30:26.380
> 
> 标签：php, jquery, json

我正在使用 jQuery 将一个相当简单的对象编译发送到一个 php 脚本`.ajax`。我想从 PHP 脚本中的每个对象中提取一个值。javascript是：

```
var obj = [{id:1, name:"val1"}, {id:2, name:"val2"},{id:3, name:"val3"}];

$.ajax({
            type: "GET",
            url: "call.php",
            contentType: "application/json",
            data: {type: "stream", q: JSON.stringify(obj)},
            success: function(response){
                        alert(response);
                     }
          }); 
```

call.php 文件写成：

```
if($_GET['type']=='stream'){
    $obj = json_decode($_GET['q']);

    for($i=0;$obj[$i];$i++){
    echo $obj[$i]->{'name'}." ";
    }
} 
```

然而，这返回 0，我根本不知道为什么。

其次，尝试`type:"POST"`在 javascript 和`$_POST`php 中使用，但完全失败了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T18:33:10.567

```
 data: {type: "stream", q: JSON.stringify(obj)}, 
```

而不是这种用途

```
 data: {type: "stream", q: obj}, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T18:59:05.540

您缺少`dataType: 'json'`ajax 选项。`contentType`选项仅适用于正在发送的数据。

添加dataType后，试试这个：

```
echo $_GET['q']; 
```

它应该只返回您发送的 json 字符串。如果不需要在控制台中查看请求以解决问题

# c++ - minGW CPP G++ 正确编译命令

> ID：10886306
> 
> 赞同：3
> 
> 时间：2012-06-04T18:30:26.607
> 
> 标签：c++, g++

我安装了以下内容：MINGW32_NT-6.1 i686 Msys

我正在使用命令行。编写了“典型的”HelloWorld.cpp 程序。

如果我编译： `cpp HelloWorld.cpp -o HelloWorld.exe` 编译很好。(18k) 但执行失败：16 位 MS-DOS 子系统。NTVDM CPU 错误

如果我编译：`g++ HelloWorld.cpp -o HelloWorld.exe` 编译很好。(48k) 执行良好。

我无法确定执行编译的最佳方式以及这些方法之间的区别。有什么建议么？还是好的参考？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T18:32:32.220

“cpp”是“C PreProcessor”，而不是编译器。所以你只是在 HelloWorld.exe 中得到了一些奇怪的东西

执行“type HelloWorld.exe”，看看它给出了什么。它甚至不应该是一个二进制文件——只是一个长文本文件，所有“#includes”和“#defines”都被替换了。

对于您的问题-第二种方法是“正确的”，因为您实际上调用了编译器/链接器并生成了有效的可执行文件。第一个“方式”是一个有效的命令，但它几乎与编译和链接无关。

# javascript - 不允许负值

> ID：10886313
> 
> 赞同：2
> 
> 时间：2012-06-04T18:30:55.110
> 
> 标签：javascript, jquery

防止用户在输入文本元素中输入负值的最佳方法是什么？

目前我正在检查模糊的字段值，但我希望有人有更好的解决方案。

```
$(".payment").blur(function() {
    var payment = getAmount($(this).val());
    if(!isNaN(payment) && amount >= 0) {
        $(this)
            .css("color", "black")
            .val(currency(payment));
    } else {
        if(amount < 0) showMessage("Negative amounts are not allowed", "error");
        $(this).css("color", "red");
    }
});

function getAmount(strAmount) {
    var amount = new String(strAmount).replace(/\$/g, "").replace(/,/g, "");
    return parseFloat(amount);
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-04T18:38:03.673

您可以使用 jQuery`.keypress()`并阻止 - 键的默认操作。示例：http: [//jsfiddle.net/5cgXg/](http://jsfiddle.net/5cgXg/)

```
 $("#target").keypress(function(event) {
  if ( event.which == 45 || event.which == 189 ) {
      event.preventDefault();
   }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T18:38:24.043

这应该可以解决问题：

```
$(".payment").keydown(function(event) {
    if (event.keyCode == 45 ) { event.preventDefault(); }   
}); 
```

当检测到“-”（45）的字符代码时，这将防止 keydown 事件注册。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-04T18:49:47.013

假设您可能不想使用键码（`e.which`等`e.keyCode`），这里还有一个选项：

```
$('#a').blur(
    function(){
        var v = $(this).val(),
            t = parseInt(v,10),
            b = isNaN(t);
        if (b){
            $(this).val('');
        }
        else {
            $(this).val(Math.abs(t));
        }
    });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/wHgH5/)。

参考：

*   [`isNaN()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/isNaN).
*   [`Math.abs()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Math/abs).
*   [`parseInt()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/parseInt).

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-04T18:39:30.587

您可以使用 jQuery 的[keypress](http://api.jquery.com/keypress/)或[keydown](http://api.jquery.com/keydown/)事件来测试每个键上的输入。

如果您还有其他需要验证的字段，请考虑使用 jQuery[验证](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)插件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-04T18:43:58.690

感谢所有的答案。

这是我最终得到的结果：

```
$("input.payment").keypress(function(e) {
    validateNumeric(e);
});

function validateNumeric(evt) {
   var theEvent = evt || window.event;
   var key = theEvent.keyCode || theEvent.which;
   key = String.fromCharCode( key );
   var regex = /[0-9]|\./;
   if( !regex.test(key) ) {
      theEvent.returnValue = false;
      if(theEvent.preventDefault) theEvent.preventDefault();
   }
} 
```

# c# - C# 解决方案可以有多种形式，但在编译时选择一种作为主要形式吗？

> ID：10886315
> 
> 赞同：2
> 
> 时间：2012-06-04T18:30:59.890
> 
> 标签：c#, winforms, user-interface

基本上，这个程序我想有一个通用的后端，但是有了它，我可以用不同的 GUI 编译它来控制程序。我知道我可以制作多个表单，但是有没有办法告诉解决方案进行编译，并说 Form1 是 GUI，然后再编译它并告诉它`Form2`是 GUI（并且不包含`Form1`在编译的程序）。

`Form1`对于具有更多功能的管理员来说，这`Form2`将更多，而对于功能远低于`Form1`. 这可能吗，还是我只需要制定一个新的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T18:41:46.000

是的，您可以使用[条件编译](http://msdn.microsoft.com/en-us/library/4y6tbswk%28v=vs.100%29.aspx)并从编译中完全排除代码。所以你可以做类似的事情：

```
#if USER_GUI

public class BasicForm : Form
{
  // ...
}

#endif 
```

和

```
#if ADMIN_GUI

public class AdvancedForm : Form
{
  // ...
}

#endif 
```

然后在启动 GUI 时有类似`#ifdef`的调用适当的构造函数

```
public static void Main(string[] args)
{
    // ...

    #if USER_GUI
    var form = new UserForm()
    #endif

    #if ADMIN_GUI
    var form = new AdvancedForm()
    #endif

    Application.Run(form);
} 
```

编译时，可以在 Project -> Properties -> Build -> Conditional compilation symbols 中使用适当的变量设置项目属性，并添加 USER_GUI 或 ADMIN_GUI

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T18:34:04.267

我想到了预处理器条件。

[http://msdn.microsoft.com/en-us/library/4y6tbswk(VS.71).aspx](http://msdn.microsoft.com/en-us/library/4y6tbswk(VS.71).aspx)

```
Form form;
#if USE_FORM_1
form = new Form1();
#else
form = new Form2();
#endif 
```

编译一次，`USE_FORM_1`定义一次，一次不定义。

注意：我有点想知道这是否应该编译到应用程序中。您也可以编译一次，并使用`app.config`设置来说明默认表单应该是什么。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-04T18:33:55.203

有几种方法可以实现这一点。这里有一对

如果您让用户先登录，那么您可以检查角色，然后

1.  显示角色特定表单
2.  拥有一个带有隐藏角色特定控件的表单

这是假设因为您提到了不同的角色。不知道你是怎么做的。

如果您首先让用户登录，那么登录自实际上是您在应用程序启动时运行的默认表单。从那里您可以创建新实例`AdminForm`或`StandardUserForm`仅加载一个表单在表单上切换面板，一个具有管理功能，另一个没有。

# nsstring - UITextField 没有设置 NSString

> ID：10886316
> 
> 赞同：-1
> 
> 时间：2012-06-04T18:31:06.810
> 
> 标签：nsstring, uitextfield, uipickerview

我在 popOver 中有一个 pickerView。当用户从 pickerView 中选择一行时，它应该被存储到 UITextField ( `subject`)

我遇到麻烦的方法是：

```
- (void) viewWithPickerController:(ViewWithPickerController*) viewWithPickerController didSelectValue:(NSString*) value
{   NSLog(@"selected value is: %@",value);
    subject.text = [NSString stringWithFormat:@"%@",value];
    NSLog(@"subject is: %@",subject.text);

} 
```

其中 value 是 pickerView 的行：它记录了正确的值，但没有将其设置为 textField `subject`，这似乎为空。

我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T18:34:02.323

您需要确保您的 " `subject`" IBOutlet 已设置。

如果您在实例化 XIB / 视图控制器之前执行此选择器视图方法，则可以解释为什么`subject`是 nil 对象。

否则您将如何实例化“ `subject`”？

# overlay - 使用 Avisynth 在视频上叠加多个图像

> ID：10886317
> 
> 赞同：2
> 
> 时间：2012-06-04T18:31:08.057
> 
> 标签：overlay, avisynth

我已经阅读了很多关于如何在 AviSynth 中叠加图像的教程，但想知道是否有一种方法可以在视频的特定时间位置放置多个图像。我已经能够使用透明的 png 徽标渲染视频，但没有找到任何教程如何将不同的图像放置在不同的帧位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T21:18:44.203

我相信您必须从帧速率中找出时间位置。例如，下面的示例将显示 101 - 200 帧（第 4 到第 8 秒）之间的叠加图像：

```
AviSource("sample.avi", false).AssumeFPS(25).ConvertToRGB
img = ImageSource("sample.png")

Trim(0, 100) + Trim(101, 200).Overlay(img, 20, 30, opacity = 0.5) + Trim(201, 0) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-10T12:02:07.483

谢谢！

根据您的输入编解码器，您可能需要将 AviSource("sample.avi", false).AssumeFPS(25).ConvertToRGB 替换为 DirectShowSource("sample.avi")

如果你用错了，你可能会在 AVISource 无法找到fourcc mjpg 的解压器这一行得到一个错误

# sql-server - 存储时间和星期几

> ID：10886321
> 
> 赞同：1
> 
> 时间：2012-06-04T18:31:25.513
> 
> 标签：sql-server, database, database-design

**挑战：** 我有一个要求，我必须实现重复性事件。我正在存储事件将再次发生的星期几、时间和日期范围。

**可能的解决方案：** 将时间和星期几存储为字符串和枚举。存储当前并设置当天的时间和日期？

**问题**：存储时间和星期几的最佳做法是什么？

EDT：我正在使用 SQL Server 数据库

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T19:28:12.983

另一种选择是让计算列代表您所追求的部分。

```
CREATE TABLE dbo.foo
(
  bar DATETIME,
  bar_day_of_week AS DATEPART(WEEKDAY, bar),
  bar_time AS CONVERT(TIME, bar)
);

INSERT dbo.foo(bar) SELECT GETDATE();

SELECT bar, bar_day_of_week, bar_time FROM dbo.foo; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T18:37:48.723

这种最佳方法可能取决于您使用的数据库。但是，有两种通用的方法，都很合理。

第一种是以数据库的本机格式存储日期和时间。大多数数据库都具有从日期时间类型中提取星期几和时间的功能。您将使用这些函数编写查询。通常，您会将这些存储为一个字段，但有时您可能希望将日期和时间部分分开。

二是要有日历表。日历表将以日期或 dateid 作为键，然后包含您想了解的列。星期几将是一个明显的列。

在某些情况下，日历表是首选解决方案。例如，如果您要将应用程序国际化，那么能够从表中获取星期几可以更容易地获取字符串英语、希腊语、中文、俄语、斯瓦希里语或任何您喜欢的语言。或者，如果您想跟踪特定的假期，那么日历表也可以存储此信息。或者，如果您的业务运行在一个奇怪的财务日历上（例如 5-4-4），那么日历表是一个不错的选择。

无论哪种情况，您都不需要在表中存储多余的日期信息。您应该从内置函数或通过在参考表中查找所需内容来派生它。

# android - 广播接收器未在 BOOT_COMPLETET 事件中启动

> ID：10886324
> 
> 赞同：0
> 
> 时间：2012-06-04T18:31:45.280
> 
> 标签：android, broadcast

我正在尝试在系统启动后启动我的 BroadcastReceiver-Class “SimChangeReceiver”。因此，这个类正在监听一个 intent.action.BOOT_COMPLETED 事件。

```
public class SimChangeReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
        if("android.intent.action.BOOT_COMPLETED".equals(intent.getAction())){
            ... do something ... 
```

启动后，logCat 会出现一个条目：

```
06-04 20:09:08.070: V/OtaStartupReceiver(399): onReceive: intent action=android.intent.action.BOOT_COMPLETED  mOtaspMode=-1 
```

但是，我的“SimChangeReceiver”类从未进入。

我的清单文件的摘录：

```
 <uses-permission android:name="android.permission.READ_PHONE_STATE" />

        <receiver android:name=".simchange.SimChangeReceiver" >
        <intent-filter android:priority="999" >
            <action android:name="android.intent.action.BOOT_COMPLETED" />
        </intent-filter>
    </receiver> 
```

我想我只有这个问题，因为我的应用程序在 Android 4.0.2 系统上运行。但我不确定......自 4.xx 版以来是否存在已知问题？在我在 2.xx 版本上测试它之前。

有没有人看到我没看到的东西？

# python - 如何模拟从 getattr 返回的函数？

> ID：10886333
> 
> 赞同：3
> 
> 时间：2012-06-04T18:32:15.140
> 
> 标签：python, mox

我有一门课，它做类似的事情：

```
class MyClass(object):
    def __init__(self, delegate_to):
        self._delegate_to = delegate_to

    def __getattr__(self, item):
        return getattr(self._delegate_to, item) 
```

但是当我尝试做类似的事情时：

```
my_mock = self.mox.CreateMock(MyClass)
my_mock.f().AndReturn(None) 
```

mox 错误：

```
UnknownMethodCallError: Method called is not a member of the object: f 
```

如何模拟委托调用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T19:12:17.837

哈克，但尝试：

```
class MyMock(MyClass):
    def f():
        pass 
```

然后在测试中：

```
my_mock = self.mox.CreateMock(MyMock)
my_mock.f().AndReturn(None) 
```

# codeblocks - AVR、CodeBlocks 和 Proteus 中的 CPU 频率

> ID：10886336
> 
> 赞同：0
> 
> 时间：2012-06-04T18:32:28.930
> 
> 标签：codeblocks, avr, atmega

好吧，我使用 Code::Blocks 作为 IDE，并使用 Win AVR 作为编译器。F_CPU 选择为 8000000UL。我正在为 Atmega32 编写代码。但是当我在 Proteus 设计套件 (ISIS) 中运行我的书面代码（*.hex 文件）时，*_delay_ms(1000)*不会延迟 1 秒。不知道是写还是错，我在编辑组件中选择了*CKSEL保险丝*为*（0100）Int.RC 8MHz 。*怎么了？请....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-07T03:44:33.360

使用 PWM 进行伺服控制我发现即使使用内部 8Mhz 的设置，Proteus 实际上也是用 1Mhz 的时钟模拟的。如果您更改`F_CPU`为，`1000000UL`您会发现延迟会正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T15:49:31.127

您是否尝试将编译器优化设置为 -O0 以外的其他值？来自关于*延迟** 函数的[avr-libc 文档。](http://www.nongnu.org/avr-libc/user-manual/group__util__delay.html)

 *> 为了使这些函数按预期工作，必须启用编译器优化，并且延迟时间必须是编译时已知常量的表达式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T14:08:21.107

它只是 proteus 模拟滞后。在真实设备上，您的延迟功能将正常工作。为了模拟时间延迟，最好的选择是使用 avr studio 程序。*

# apache - IE6 的 mod_rewrite 到网络服务器上的静态页面

> ID：10886338
> 
> 赞同：1
> 
> 时间：2012-06-04T18:32:41.643
> 
> 标签：apache, mod-rewrite

我们的新网站无法在 IE6 中运行，老实说，我们不会让它在我们的流量中占不到 1%。我想提供一个存在于网络服务器上的页面，当用户在 IE6 中访问该站点时将提供该页面。实现这一目标的最佳方法是什么？如果有人也可以提供代码片段，那就太好了。

我能够通过使用以下方法使重定向工作： RewriteCond %{HTTP_USER_AGENT} MSIE\ 6 RewriteRule ^(.*)$ /general/notsupported.html [L,R]

但是，我还想屏蔽 url，所以如果有人进入 www.example.com/uri/querystring，它会留在那里，但会提供一个页面，上面写着“对不起”ie6 不受支持。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T18:35:53.953

这样的事情应该这样做：

```
RewriteEngine on
RewriteCond %{HTTP_USER_AGENT} whatever_the_ie6_user_agent_string_is
RewriteRule .* /path/to/your/static/page [R] 
```

# mysql - 从 MySQL 表中的值中修剪空格

> ID：10886341
> 
> 赞同：14
> 
> 时间：2012-06-04T18:32:45.873
> 
> 标签：mysql, sql, sql-update, trim

我想通过修剪所有前导和尾随空格来更新表中的所有值。我尝试了以下查询，但都没有奏效。

我知道可以将 TRIM 与 SELECT 一起使用，但是如何将它与 UPDATE 一起使用？

```
UPDATES teams SET name = TRIM(name)
UPDATES teams SET name = TRIM(LEADING ' ' TRAILING ' ' FROM name) 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-04T18:35:50.427

您不必这样做`SELECT`。

试试这个 -

```
UPDATE teams SET name = TRIM(name)
WHERE 1 = 1; 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-06-04T18:40:18.473

```
UPDATE teams SET name = TRIM(name) 
```

这应该可行，它在 MySQL 的语义上是正确的。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-05-11T06:50:49.163

如果字段包含换行符，则

```
UPDATE Tablename SET colname= TRIM(TRAILING '\r' FROM colname) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-10-16T20:03:12.247

这解决了我在 TRIM 选项不起作用时遇到的一个奇怪问题：

```
UPDATE
    teams
SET
    name    = TRIM(BOTH UNHEX('C2A0') FROM name) 
```

# google-maps - 绘制路线并避开障碍物

> ID：10886351
> 
> 赞同：-1
> 
> 时间：2012-06-04T18:33:35.310
> 
> 标签：google-maps, bing-maps

我有几个坐标（纬度，经度）我想画一条路线但没有经过槽形建筑物我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T19:36:37.520

[https://developers.google.com/maps/documentation/javascript/directions#Waypoints](https://developers.google.com/maps/documentation/javascript/directions#Waypoints)

方向不穿过建筑物，它们沿着道路；并且您可以通过将它们指定为航点来通过已知坐标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T17:48:06.443

我从来没有听说过任何路由服务让你穿过建筑物——它们都遵循公共道路网络。这是 Bing 地图路由 API 的 SDK：

[http://bingmapsportal.com/ISDK/AjaxV7#RESTServices2](http://bingmapsportal.com/ISDK/AjaxV7#RESTServices2)

要在两个 lat/lng 之间进行路由，只需使用 URL 请求中编号的 wp.x 变量设置航点的值。例如，在 (52,-0.5) 和 (51,0) 之间路由如下：

[http://dev.virtualearth.net/REST/v1/Routes?wp.0=52;-0.5&wp.1=51;0&routePathOutput=Points&output=json&jsonp=RouteCallback](http://dev.virtualearth.net/REST/v1/Routes?wp.0=52;-0.5&wp.1=51;0&routePathOutput=Points&output=json&jsonp=RouteCallback)

# ruby - 为什么我在此代码中收到 SystemStackError？

> ID：10886352
> 
> 赞同：1
> 
> 时间：2012-06-04T18:33:39.717
> 
> 标签：ruby, string, class, ruby-1.9

```
class X
  class << self
    def attr_string arg
      eval("def #{arg}; return #{arg.to_s}; end")
    end
  end
end 
```

是我正在使用的代码。我试图把它变成一个类宏，比如 attr_accessor。当我打电话

```
foo = 50
X.attr_string :foo
X.foo 
```

我得到一个`SystemStackError`. 为什么是这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T18:43:15.720

```
class X
  def attr_string arg
    (class << self; self; end).class_eval do
      define_method arg do
        arg
      end
    end
  end
end 
```

或小清洁工

```
class X
  def self.attr_string arg
    self.class.instance_eval do
      define_method(arg) { arg.to_s }
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T18:44:30.247

无限递归就可以了。

选项1（使用类变量）：

```
@@foo = 50

class X
  def X.attr_string arg
    eval("def X.#{arg.to_s}; return @@#{arg.to_s}; end")
  end
end
X.attr_string :foo
X.foo 
```

选项2（在定义方法时指定值）：

```
class X
  def X.attr_string arg, val
    eval("def X.#{arg.to_s}; #{val}; end")
  end
end
X.attr_string :foo, 50
X.foo 
```

我想`return foo`尝试无限地再次运行 foo 方法。但是，即使您将变量命名为 foo1 并返回 foo1，它也不会发现 foo1 作为类变量，因为它已经失去了作用域。

您可以尝试将值包装在 lambda 中或编组 foo 对象。如果你有运气，请把结果发布给所有人。

有趣的问题！

# nhibernate - 如何将 QueryOver<> 代码转换为将 Query<> 与 NHibernate 3.3 一起使用

> ID：10886359
> 
> 赞同：0
> 
> 时间：2012-06-04T18:34:04.023
> 
> 标签：nhibernate, linq-to-nhibernate

我有一个 A 类，它有一个 B 类列表......所以，使用 QueryOver 我有：

```
ClassB lb = null;  
var result = session.QueryOver<ClassA>
        .JoinAlias(x => x.ListB, () => lb, JoinType.LeftOuterJoin)
        .Where(() => lb.Property == 1)
        .List<ClassA>(); 
```

如何使用 Nhibernate Query<> 做到这一点？

谢谢

保罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T21:00:45.293

假设你想要做的是得到一个`ClassA`至少有一个`ClassB`的列表`Property == 1`：

```
var result = session.Query<ClassA>()
                    .Where(a => a.ListB.Any(b => b.Property == 1))
                    .ToList(); 
```

不过，这不会是外部连接。您可以通过添加`|| !a.ListB.Any()`.

# javascript - 带有热点的PNG图像？

> ID：10886362
> 
> 赞同：0
> 
> 时间：2012-06-04T18:34:17.870
> 
> 标签：javascript, sencha-touch, sencha-touch-2

我有几个全屏 png，我想在图像上创建区域，这样当用户单击其中一个区域时，特定的 png 会溶解以替换当前图像。我正在创建一种幻灯片放映，但我可能有 3 或 4 个活动区域会导致出现不同的图像。

![在此处输入图像描述](../Images/d8f33edfbd093928bae5f603cb346916.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T17:46:31.387

执行此操作的技术没有太大变化：使用图像映射或在图像上放置透明元素并给它们一个点击事件。

# javascript - 使用 JPlayer Circle Player 创建播放列表

> ID：10886373
> 
> 赞同：1
> 
> 时间：2012-06-04T18:34:59.180
> 
> 标签：javascript, jquery, jquery-plugins, jplayer

我知道这并不是专门为此而设计的，但有谁知道我如何让[JPlayer Circle Player](http://jplayer.org/)播放播放列表中的歌曲？我希望它在播放完歌曲后播放歌曲并循环播放整个播放列表（如果可能的话）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T18:46:07.187

我会将播放列表存储在一个 json 对象中，该对象包含您要在服务器上播放的歌曲列表。然后当一首歌结束时，jPlayer 对象有一个结束函数，您可以覆盖它，然后使用播放列表中的下一首歌曲再次调用播放事件。

播放功能的文档：http: [//jplayer.org/latest/developer-guide/#jPlayer-play](http://jplayer.org/latest/developer-guide/#jPlayer-play)

# css - 将鼠标悬停在另一张图像上时淡入和淡出图像

> ID：10886374
> 
> 赞同：0
> 
> 时间：2012-06-04T18:35:02.353
> 
> 标签：css

我有两张图片。我希望第二张图像在我“鼠标悬停”第一张图像时淡入，而当我从第一张图像“鼠标移出”时淡出。

如何使用 css3 完成此操作？

我提前感谢您的回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T18:46:22.087

其实我不知道如何使用 CSS3 做到这一点，但使用 JQuery：

```
$('#image1').mouseover(function() {
  $('#image2').fadeIn();
});

$('#image1').mouseout(function() {
  $('#image2').fadeOut();
}); 
```

这是一些图像的基本解决方案，但您可以根据需要动态执行此操作。

# c# - 从一个类调用一个字符串方法到另一个类

> ID：10886375
> 
> 赞同：1
> 
> 时间：2012-06-04T18:35:02.410
> 
> 标签：c#, string, class

我有这个基于硬币和纸牌游戏的任务，非常简单。我们得到了一些完整的和一些不完整的文件。我想做的是从另一个类（hand.cs）中的一个类（card.cs）调用一个方法（实际上是一个字符串）。

这是 card.cs 中的字符串方法：

```
public string ToString(bool shortFormat, bool displaySuit)
    {
        string returnString;

        // Describe the FaceValue.
        FaceValue faceValue = GetFaceValue();
        string faceValueAsString = faceValue.ToString();
        if (shortFormat) {
            if (faceValue <= FaceValue.Ten) {
                faceValueAsString = (faceValue - FaceValue.Two + 2).ToString();
            } else {
                faceValueAsString = faceValueAsString.Substring(0, 1);
            }
        }

        returnString = faceValueAsString;

        // Describe the Suit.
        if (displaySuit) {
            string suit = GetSuit().ToString();
            if (shortFormat) {
                suit = suit.Substring(0, 1);
                returnString += suit;
            } else {
                returnString += " of " + suit;
            }
        }

        return returnString;
    } 
```

并来自 hand.cs（仅限 ToString 字符串/方法，此文件中还有其他函数用于处理创建手牌（列出名为牌的牌）并向其添加牌。）

```
/// <summary>
    /// Outputs the hand of cards.
    /// See the ToString method in the Card class for a description of 
    /// the two parameters: shortFormat and displaySuit.
    /// Pre: true
    /// Post: Displayed the hand of cards.
    /// </summary>
    public void DisplayHand(bool shortFormat, bool displaySuit) {

        //
        //**************** CODE NEEDS TO BE ADDED**********************
        // Should be able to call the ToString method in the Card class,
        // as part of this.
        //

    } // end DisplayHand 
```

它们是我为作业获得的未经编辑的文件。我想知道的是如何使用`TwoString(shortFormat, displaySuit)`in `DisplayHand(shortFormat, displaySuit)`。在某个阶段，我有一个单独的列表来放入字符串值，但它后来被删除，试图将文件恢复为原始文件。我不太确定这将如何在游戏的后期使用，但我想我是否可以让它与列表一起运行，然后将列表更改为字符串或数组，或者以后可以很容易地完成的任何事情。一旦我知道如何调用这个字符串，我应该能够修改我必须调用的所有其他字符串和整数的代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T18:41:29.090

你需要`Card`打电话`ToString`。我假设你会这样做：

```
foreach (Card card in this.Cards) { ... } // Loop through cards in this hand. 
```

如果没有看到代码，我无法确切地告诉你。

一旦你有一个`Card`（在`card`变量中），`ToString`像这样调用：

```
string str = card.ToString(true, true); 
```

# git - 如何仅在 git 中列出最多 n 级的文件？

> ID：10886384
> 
> 赞同：1
> 
> 时间：2012-06-04T18:35:25.073
> 
> 标签：git

我想列出当前在 git 存储库中跟踪的文件。

所以，我愿意`git ls-files`。但是，这样做会给我整个列表，包括所有子目录、它们的子目录等等。

我不想要这个。有没有办法可以指定`ls-files`命令输出的深度？

假设我有一个 git repo：

```
mainrepo/
   sub-dir1
       subdir1.1
          subdir1.1.1
   sub-dir2 
```

我只想深入 1 层。这意味着我只希望 ls-files 输出

```
sub-dir1
sub-dir2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T19:15:41.423

一种有点基本的方法是将每一行剥离到（并包括）一个可选`/`字符，并从中获得独特的行：

```
$ git ls-files | cut -f1 -d/ | uniq 
```

（请注意，我还不能亲自对此进行测试，因为我在 Windows 上使用有限的 Bash shell。）

# html - HTML5 视频标签未播放

> ID：10886395
> 
> 赞同：1
> 
> 时间：2012-06-04T18:36:22.283
> 
> 标签：html

我正在尝试利用 HTML5 视频标签在页面加载时自动播放 mov 或 mp4 视频。但是，页面加载时视频未播放。这是我的代码：

```
<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="utf-8" />
<title>Bropocalypse</title>
<style>
body {background:#000000;
margin:100px;}

p {font-size:36px;
text-align:right;
margin:20px 0px;}

a:link, a:hover, a:visited {color:#FF0000;
text-decoration:none;}

.trailer {width:700px;
height:100%;
margin:0 auto;}
</style>
</head>
<body>
<div class="trailer">
    <video width="700" height="400" src="trailer.mp4" poster="trailer.mp4" controls="controls" autoplay="autoplay" type="video/mp4; codecs='avc1.42E01E, mp4a.40.2'">
    <p>If you are reading this, it is because your browser does not support the HTML5 video element.</p>
    </video>
<p><a href="about.php"><img src="images/skip.png" alt="SKIP >>" /></a></p>
</div>
</body>
</html> 
```

该页面可以在这里找到：[http](http://www.tcnj.edu/~moore56/game-design/bropocalypse/) ://www.tcnj.edu/~moore56/game-design/bropocalypse/ 。请让我知道您可能有的任何建议或问题。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T18:44:58.137

首先，尝试对 HTML5 内容使用 HTML5 文档类型，而不是 XHTML 1.0 文档类型。

我测试了您的代码，但它对我不起作用，但是，当我用测试 .m4v 视频（从[这里](http://shapeshed.com/examples/HTML5-video-element/)）替换视频时，它立即在我的 Chrome 浏览器上运行，所以问题似乎不在于 HTML代码。

另请注意，您使用文本/纯内容类型提供视频文件，这是不对的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T20:47:08.973

是的，正如eis所说，如果您手动重命名视频格式，它在您的机器上运行良好，但编解码器不匹配，导致视频无法在浏览器中播放。此外，您应该放置一个回放格式和一个对象标签以将视频嵌入到您的浏览器中......

# objective-c - UITableView 仅在调用键盘后填充

> ID：10886401
> 
> 赞同：1
> 
> 时间：2012-06-04T18:37:08.383
> 
> 标签：objective-c, ios, uitableview, uikeyboard

我是一个完整的`iOS`初学者。

我有一个`UITableView`and`UITextView`作为 a 的子视图`UIScrollView`。

`.xib`加载后，`UITableView`应该在的地方什么也没有出现。

只有在点击后才能编辑`UITextView`，从而调用键盘。将`UITableView`出现填充。

我试过打电话 `[self.tableView reloadData];` 但无济于事。

我知道这是一个非常模糊的问题，我只是希望这可能是一个微不足道的问题。

**非常感谢。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T18:40:50.953

设置 tableview.datasource = self; 在 viewDidLoad 中。如果这不能解决问题，请检查您的数据源是否在 numberOfRowsInSection 方法中返回 0 行。

如果您可以发布您的代码，它会有所帮助。

# asp.net - RequiredFieldValidator 未验证

> ID：10886402
> 
> 赞同：1
> 
> 时间：2012-06-04T18:37:18.350
> 
> 标签：asp.net, validation, requiredfieldvalidator

我在带有必填字段验证器的 ASP.NET 页面上有一个控件。唯一的问题是，当我通过页面按钮更改页面时，它不会导致验证。代码如下，谁能看看有什么问题？

```
<asp:Label ID="lblD_Year" runat="server" BorderStyle="None" 
                       Text="Fiscal Year" CssClass="h2"></asp:Label>&nbsp;&nbsp;&nbsp;
                <asp:DropDownList ID="ddlD_Year" runat="server" Width="100px" TabIndex="8" 
                    AutoPostBack="True" CssClass="box" CausesValidation="True">
                    <asp:ListItem Value="0" Selected="True">Select Year</asp:ListItem>
                </asp:DropDownList>                               

                <asp:RequiredFieldValidator ID="rfvD_Year" runat="server" 
                    ControlToValidate="ddlD_Year" Display="Dynamic" ErrorMessage="*" 
                    Font-Bold="True" ForeColor="Red" InitialValue="Select Year" 
                    SetFocusOnError="True"></asp:RequiredFieldValidator> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T18:49:59.057

设置验证器的初始值`InitialValue="-1"`或您认为为空的任何值（如果选择）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T18:40:25.837

**设置初始值=“0”**

```
<asp:RequiredFieldValidator ID="rfvD_Year" runat="server" 
                    ControlToValidate="ddlD_Year" Display="Dynamic" ErrorMessage="*" 
                    Font-Bold="True" ForeColor="Red" InitialValue="0" 
                    SetFocusOnError="True"></asp:RequiredFieldValidator> 
```

# jquery - 使用 jQuery 截断推文，同时保持链接不变

> ID：10886405
> 
> 赞同：0
> 
> 时间：2012-06-04T18:37:29.113
> 
> 标签：jquery, twitter, tweets

我正在使用[Tweet](http://tweet.seaofclouds.com/)来回显推文，并且我想将推文截断到字符限制，但可能保持链接完整（如果它们被截断）。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T18:45:12.730

您可以尝试在推文中搜索这些链接（抓取 和 之间的所有内容`<a>`）`</a>`，提取它们，将推文截断为“X 个字符减去 ExtractedLinkLength”之类的东西，然后将链接添加到截断推文的末尾。不确定代码，但这应该作为一个理论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T19:02:23.487

[这个插件](http://henrik.nyh.se/2008/02/jquery-html-truncate)为我做了，这是我的推文功能的样子：

```
$("#tweet").tweet({
        username:'adamzwakk',
        count: 1,
        template: "{text} {time}"
    }).bind("loaded", function() {
        var ul = $(this).find(".tweet_list");
        ul.find('.tweet_text').truncate({
            max_length: 100,
            more: '',
            less: ''
        });
    }); 
```

# javascript - 带有非现实世界地图的 Leaflet.js！坐标

> ID：10886406
> 
> 赞同：2
> 
> 时间：2012-06-04T18:37:31.883
> 
> 标签：javascript, mapping, leaflet

我正在使用传单 JS 创建 Day Z（游戏）的地图，并希望能够使用游戏中的坐标系在地图上绘制项目，请参阅 [http://dayz.ollieb.net](http://dayz.ollieb.net)

在游戏中，左上角的坐标是 000 000，然后是 001, 001，其中 10 的单位代表一个网格，所以 010, 010 将是左上角的“网格”（类似于法令调查）。

如何创建一种方法来转换提供的坐标系（点或纬度）以这种方式工作。基本上他们只需要从 000、000（左上角）到 145、130（右下角）。目前我在使用 lat/long 时遇到问题，因为它会弯曲以补偿投影，并且点 (x/y) 似乎每台计算机都会发生变化！

我怎样才能获得一个游戏点并在那个时候在地图上创建一个标记？大概我需要告诉 Leaflet.js 地图左上角和右下角的“数字”是什么？

抱歉，缺乏理解，我已经阅读了所有文档，但看不到任何类似的内容！

在此处查看示例： [http ://dabrothas.net/sei/daisy/index.asp?mode=mark&z=3&x=-109.2294921875&y=73.49222029152183](http://dabrothas.net/sei/daisy/index.asp?mode=mark&z=3&x=-109.2294921875&y=73.49222029152183)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T19:25:19.103

我是传单作者。

查看以下问题以获取有关设置非世界 CRS 的代码示例：[https://github.com/Leaflet/Leaflet/issues/210](https://github.com/Leaflet/Leaflet/issues/210) [https://github.com/Leaflet/Leaflet/pull/676](https://github.com/Leaflet/Leaflet/pull/676)

我计划对 0.4 版本的投影逻辑进行一些重构，以使这些事情更容易、更自然，敬请期待！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T02:19:35.663

如果网格坐标系恰好出现在赤道下方零度经度处，则可以使网格坐标系与具有几乎正方形特性的球体上的扇区非常相似。对于所有意图，超过 15 英里的距离，纵向线将非常接近平行。

从这里开始，将网格坐标在宽度和高度上缩放到大约 $t$ 秒，然后设置一个规范化方法，可以提供它似乎需要的 Leaflet LatLng 坐标。由于您停留在一个半球，西北部的纬度/经度为 0 度，因此您的纬度将始终为负。希望这能让你思考...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-10T20:16:08.650

Leaflet 0.8-dev 已经足够先进，可以完全自定义坐标系，这是一个在米刻度上完美运行的示例，使用线性 CRC，即使使用比例小部件：

[https://gist.github.com/MarZab/7e3b1522ebc383f448a0](https://gist.github.com/MarZab/7e3b1522ebc383f448a0)

# php - 解析我无法识别为 Object 或 Array 或 Json 的字符串

> ID：10886407
> 
> 赞同：2
> 
> 时间：2012-06-04T18:37:36.093
> 
> 标签：php, arrays, parsing, object

我收到一个响应请求的数组。当我在上面做 print_r 时，这就是我得到的`Array( [receiver] => {:email=>"email@domain.com"})`。

我无法理解如何访问“：email”的值。

请帮忙。

**编辑：**

这是响应的 var_dump。

```
array ( 'receiver' => '{:email=>"email@domain.com"}' ) 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T18:41:13.917

使用正则表达式获取电子邮件。

```
$arr = array('recebodor' => '{:email=>"someone@example.com"}');

$email = preg_replace('/{:email=>"([^"]+)"}/', '$1', $arr['recebodor']);
echo $email; // someone@example.com 
```

**解释：**

```
{:email=>    Match with the "{:email=>" in the string
"([^"]+)"    Get any character within double quotes
}            Match with the last "}"
$1           Replace all text with the text found inside parentheses 
```

# iphone - SmallSocket 导致应用程序在 iPhone 上崩溃

> ID：10886412
> 
> 赞同：0
> 
> 时间：2012-06-04T18:38:03.897
> 
> 标签：iphone, ios, sockets

我正在尝试使用 SmallSockets 库来创建 TCP 套接字连接。目前，我正在使用一个按钮来简单地测试我从 iPhone 到服务器的连接。这是我的代码的样子：

```
-(IBAction)btnConnect:(id)sender
{
    bool loopConnection = true;
    while(loopConnection == true)
    {
        Socket *socket;
        int port = 11005;
        NSString *host = @"199.5.83.63";

        socket = [Socket socket];

        @try
        {
            NSMutableData *data;
            [socket connectToHostName:host port:port];
            [socket readData:data];
            //  [socket writeString:@"Hello World!"];

            //** Connection was successful **//
            [socket retain]; // Must retain if want to use out of this action block.
        }
        @catch (NSException* exception) 
        {
            NSString *errMsg = [NSString stringWithFormat:@"%@",[exception reason]];
            NSLog(errMsg);
            socket = nil;
        }
    }
} 
```

当我按下按钮时，我的应用程序冻结。它冻结了以下函数（它是 SmallSockets 库的一部分）：

```
- (int)readData:(NSMutableData*)data
//
// Append any available data from the socket to the supplied buffer.
// Returns number of bytes received.  (May be 0)
//
{
    ssize_t count;

    // data must not be null ptr

    if ( data == NULL )
    [NSException raise:SOCKET_EX_INVALID_BUFFER 
                    format:SOCKET_EX_INVALID_BUFFER];

    // Socket must be created and connected

    if ( socketfd == SOCKET_INVALID_DESCRIPTOR )
        [NSException raise:SOCKET_EX_BAD_SOCKET_DESCRIPTOR 
                    format:SOCKET_EX_BAD_SOCKET_DESCRIPTOR];

    if ( !connected )
        [NSException raise:SOCKET_EX_NOT_CONNECTED 
                    format:SOCKET_EX_NOT_CONNECTED];

    // Request a read of as much as we can.  Should return immediately if no data.

    count = recv(socketfd, readBuffer, readBufferSize, 0);

    if ( count > 0 )
    {
        // Got some data, append it to user's buffer

        [data appendBytes:readBuffer length:count];
    }
    else if ( count == 0 )
    {
        // Other side has disconnected, so close down our socket

        [self close];
    }
    else if ( count < 0 )
    {
        // recv() returned an error. 

        if ( errno == EAGAIN )
        {
            // No data available to read (and socket is non-blocking)
            count = 0;
        }
        else
            [NSException raise:SOCKET_EX_RECV_FAILED 
                        format:SOCKET_EX_RECV_FAILED_F, strerror(errno)];
    }

    return count;
} 
```

应用卡在行：[data appendBytes:readBuffer length:count]; 然后它在同一行显示：线程 1:EXC_BAD_ACCESS (code=1, address=0x5d18c48b)。我在输出中看到的都是绿色字母的 (lldb)。一旦客户端连接，服务器就会向客户端发送一个 4 字节的数据包。

如果有人能解释为什么我的应用程序在这里崩溃，我会非常感激。我已经敲了几个小时的头，试图找出问题所在。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T22:48:33.083

我不知道这是否是正确的答案，但我要做的第一件事就是立即保留套接字。如果套接字有问题，请在异常处理程序中释放它。

# c - 获取数字的位数

> ID：10886413
> 
> 赞同：1
> 
> 时间：2012-06-04T18:38:03.890
> 
> 标签：c

我有一个这样的数字：`int num = 36729;`我想获得组成数字的位数（在本例中为 5 位）。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-04T18:39:20.243

使用这个公式：

```
if(num)
  return floor(log10(abs((double) num)) + 1);

return 1; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T18:39:16.570

```
int digits = 0;
while (num > 0) {
  ++digits;
  num = num / 10;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T20:46:38.547

```
int unsigned_digit_count(unsigned val) {
    int count = 0;
    do {
        count++;
        val /= 10;
    } while (val);
    return count;
}

int digit_count(int val) {
    if (val < 0) {
        return 1+unsigned_digit_count(-val); // extra digit for the '-'
    } else {
        return unsigned_digit_count(val);
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-11-17T14:19:39.873

1.  任何基数的整数 n 的位数可以通过除法得到，直到你完成：

```
unsigned int number_of_digits = 0;
do {
    ++number_of_digits; 
    n /= base;
} while (n); 
```

2.  不一定是最有效的，但使用 C++ 时最短且最易读的一种： `std::to_string(num).length()`

3.  还有一种更好的方法：

```
#include<cmath>
...
int size = trunc(log10(num)) + 1
... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-04T19:55:11.700

效率低下，但出奇的优雅……

```
#include <stdio.h>
#include <string.h>

int main(void)
{
    // code to get value
    char str[50];
    sprintf(str, "%d", value);

    printf("The %d has %d digits.\n", value, strlen(str));

    return 0;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-04T19:39:46.620

对于除 0 以外的任何输入，计算输入绝对值的以 10 为底的对数，取该结果的底并加 1：

```
int dig;
...
if (input == 0)
  dig = 1;
else
  dig = (int) floor(log10(abs((double) input))) + 1; 
```

0 是一种特殊情况，必须单独处理。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-04T18:38:47.370

提示：使用`/`and`%`运算符。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-04T19:05:50.447

```
int findcount(int num) 
{ 
    int count = 0; 
    if(num != 0){
      while(num) { 
          num /= 10; 
          count ++; 
      } 
      return count ; 
    }
    else
      return 1;
} 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2012-06-04T19:55:06.643

你不能这样做吗？

```
 int num = 36729;
    num.ToString().Length 
```

# c# - 如何自动格式化粘贴到富文本框中的文本？

> ID：10886414
> 
> 赞同：1
> 
> 时间：2012-06-04T18:38:06.697
> 
> 标签：c#, fonts, textbox, formatting, richtextbox

我有一个笔记程序，用于在工作时记录案例，但是当我从其他窗口复制和粘贴数据时，它会将其粘贴到网站的格式中。是否有用于富文本框（和一般文本框）的设置，它将删除任何格式并仅将文本放入文本框中？如果不能，我是否必须使用查看剪贴板内容并将字符串发送到特定字体/大小等的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T18:45:21.867

您应该能够通过指定[TextDataFormat](http://msdn.microsoft.com/en-us/library/system.windows.forms.textdataformat.aspx)并将其设置为`Text`：

```
var stringToPasteIn = Clipboard.GetText(TextDataFormat.Text); 
```

或者让它`RichTextBox`使用它的[DataFormats](http://msdn.microsoft.com/en-us/library/23kah9ca.aspx)选项自动为您完成：

```
DataFormats.Format myFormat = DataFormats.GetFormat(DataFormats.Text);
richTextBox1.Paste(myFormat); 
```

# javascript - 使用经纬度代码脚本生成谷歌地图

> ID：10886416
> 
> 赞同：3
> 
> 时间：2012-06-04T18:38:14.600
> 
> 标签：javascript, jquery, google-maps

我需要生成带有标记的谷歌地图。

我有纬度和经度代码。

周围有很多脚本，但是使用我拥有的纬度和经度代码在我的网页上显示地图的最快方法是什么？

这是当前代码： - 没有显示地图

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
    <html>
    <head>
    <title></title>

    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js"></script>
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>

    <script>
    $(document).ready(function (){
         var myLatlng = new google.maps.LatLng(-25.363882,131.044922);
         var myOptions = {
             zoom: 4,
             center: myLatlng,
             mapTypeId: google.maps.MapTypeId.ROADMAP
             }
          map = new google.maps.Map($('#map'), myOptions);
          var marker = new google.maps.Marker({
              position: myLatlng, 
              map: map,
          title:"Fast marker"
         });
    }) 
    </script>

    </head>
    <body>

    <div id="map"></div>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T18:45:01.123

**标记**

```
<script language=javascript src='http://maps.google.com/maps/api/js?sensor=false'></script>
<div id="map"></div> 
```

**Javascript**

```
function initialize(){
     var myLatlng = new google.maps.LatLng(-25.363882,131.044922);
     var myOptions = {
         zoom: 4,
         center: myLatlng,
         mapTypeId: google.maps.MapTypeId.ROADMAP
         }
      map = new google.maps.Map(document.getElementById("map"), myOptions);
      var marker = new google.maps.Marker({
          position: myLatlng, 
          map: map,
      title:"Fast marker"
     });
} 

google.maps.event.addDomListener(window,'load', initialize); 
```

**jQuery**

```
$(document).ready(function (){
     var myLatlng = new google.maps.LatLng(-25.363882,131.044922);
     var myOptions = {
         zoom: 4,
         center: myLatlng,
         mapTypeId: google.maps.MapTypeId.ROADMAP
         }
      map = new google.maps.Map($('#map'), myOptions);
      var marker = new google.maps.Marker({
          position: myLatlng, 
          map: map,
      title:"Fast marker"
     });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-01T17:55:43.467

该代码正在向地图 div 添加一些不可见的内容。要查看它，我们需要添加 CSS：

```
#map { width: 500px; height: 400px; } 
```

# cordova - 我可以在不将谷歌域列入白名单的情况下在 PhoneGap 中使用谷歌地图 API 吗？

> ID：10886420
> 
> 赞同：0
> 
> 时间：2012-06-04T18:38:39.927
> 
> 标签：cordova

有没有办法在 PhoneGap 应用程序中使用 Google Maps API 而无需将域列入白名单，例如：

```
<key>ExternalHosts</key>
<array>
<string>maps.google.com</string>
<string>maps.gstatic.com</string>
<string>maps.googleapis.com</string>
</array> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T01:26:21.650

不会。如果您使用的是 Google Maps JavaScript API，那么它将尝试通过 webview 与 Google 服务器通信，从而向 Google 服务器发出请求。然后，您*必须*将域列入白名单。

另一种方法是使用本地地图 phonegap 插件（例如 MapKit），它会在您的应用程序中创建一个 MapView 并可能绕过白名单限制。

# objective-c - 如果我使用属性，我还需要分配我的对象吗

> ID：10886421
> 
> 赞同：2
> 
> 时间：2012-06-04T18:38:41.177
> 
> 标签：objective-c, memory-management, properties

一个简单的问题，我似乎找不到快速的帖子；

如果我有一个对象，可以说：

```
 NSString *myString_;
 @property(readwrite, retain)NSString* myString;
 @synthesize myString = myString_; 
```

当我合成它时，它会为对象分配内存吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T18:41:05.673

不，您将分配和初始化一个对象，然后将属性设置为它，ala：

```
self.myString = [[NSString alloc] initWithString: @"Hello Miek"]; 
```

或者您将拥有一个已分配和保留的字符串，您将把新属性设置为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T19:06:30.103

@synthesize 所做的只是为您的属性生成访问器（setter 和 getter）并创建一个具有相同名称的实例变量。使用等号的附加步骤：

```
@synthesize mystring = _string; 
```

...为您重命名实例变量为 _string （或您选择的任何名称，下划线只是一个苹果约定）。这是一种很好的做法，因为让实例变量与访问器共享相同的名称可能会出现问题。拥有下划线可以让您区分两者。

这基本上是生成的（假设 ARC 为 ON）：

```
// getter
- (NSString*)mystring
{
    return _string;
} 
```

和

```
// setter
- (void)setMyString:(NString*)myString
{
    _myString = myString;
} 
```

您可以在 init 方法中初始化您的属性（使用 self.propertyName）：

```
-(id)init
{
    self.myString = @"Something"; // or use an alloc init method in the class   
} 
```

或者您可以通过像这样覆盖 getter 来延迟初始化它：

```
- (NSString*)myString
{
    if (!_myString) {  // same as saying if nil and therefore doesn't exist yet
        _myString = @"Something";
    }
    return _myString;
} 
```

另请注意，您不需要单独声明变量（即不需要 NSString* mystring）。声明属性时，只需使用强或弱代替保留。

您应该直接访问实例变量的唯一地方是访问器，这允许您通过单个网关控制对其的所有操作。在类中使用访问器（即 self.mystring）的开销是非常小的。当然，您不必这样做，但这是一种很好的做法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T19:54:23.273

回答您的问题：不，属性和综合调用不会分配任何内存。你必须这样做。如果你不这样做， myString 实际上在构造时指向 nil 。但是不要使用 Michael 的示例，因为它会泄漏内存。

利用

```
self.myString = @"Hello Miek"; 
```

@ 字面量实际上相当于调用 [NSString stringWithString:] 类方法，该方法返回一个自动释放（当然也是分配的）对象。或者你可以使用这个

```
NSString *aString = [[NSString alloc] initWithString: @"string...."];
self.myString = aString;
[aString release]; 
```

另请注意，您应该将属性声明为副本，而不是为 NSStrings 保留。在你的 dealloc 中，你也必须释放 myString。

最后，Patrick 的回答并非 100% 正确，因为保留属性的合成设置器如下所示：

```
-(void) setMyString: (NSString*) string {
    [myString release];
    myString = [string retain];
 } 
```

最后一点与帕特里克的回答有关，不建议在 init 方法中使用设置器。所以而不是

```
self.myString = @"xyz"; 
```

建议直接访问 iVar：

```
//or _myString, if you synthesized it that way of course
myString = @"xyz";
[myString retain]; 
```

干杯（长答案，我手上有一点时间；）

# javascript - 如何舍入对象数组中的某些值？

> ID：10886425
> 
> 赞同：0
> 
> 时间：2012-06-04T18:38:54.537
> 
> 标签：javascript, arrays

```
 Array = [ {name:apples, price:3.99, tax:0.20}, 
           {name:oranges, price:1.40, tax:0.15},
           {name:bananas, price:0.99, tax:0.10}, 
         ] 
```

我如何在所有“价格”值（而不是名称，出于性能目的）上运行 toFixed() 以便我想出这个：

```
 Array = [ {name:apples, price:4, tax:0.20}, 
           {name:oranges, price:1, tax:0.15},
           {name:bananas, price:1, tax:0.10}, 
         ] 
```

我必须通过循环路线吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T18:42:18.340

只需遍历数组（顺便说一句：永远不要`Array`用作变量名）：

```
for (var i=0; i<arr.length; i++)
    arr[i].roundedPrice = Math.round(arr[i].price); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T18:45:49.150

这里：

```
array.forEach(function ( elem ) {
    elem.price = Math.round( elem.price );
}); 
```

**现场演示：http:** [//jsfiddle.net/apSdV/](http://jsfiddle.net/apSdV/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T18:42:30.440

```
for (var ixFruit = 0; ixFruit < fruits.length; ++ixFruit)
    fruits[ixFruit].price = fruits[ixFruit].price.toFixed(); 
```

这看起来非常简单，不知道你会如何让它更简单。

# apache-flex - 用于存储 LOW 和 HIGH 分辨率图像的 FLEX AIR 项目目录结构

> ID：10886431
> 
> 赞同：1
> 
> 时间：2012-06-04T18:39:24.527
> 
> 标签：apache-flex, flex4.5

任何想法对于需要存储低分辨率和高分辨率图像的 Flex AIR 项目应该遵循什么目录结构，以便在将应用程序加载到 MOBILE 和高分辨率图像时使用低分辨率图像在平板电脑中加载应用程序时使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T07:18:42.717

这是我的做法：

```
<fx:Declarations>
    <s:MultiDPIBitmapSource id="BACK"
        source160dpi="@Embed('assets/icons/low-res/back.png')"
        source240dpi="@Embed('assets/icons/mid-res/back.png')"
        source320dpi="@Embed('assets/icons/high-res/back.png')"/>
</fx:Declarations>

<s:states>
    <s:State name="portrait"/>
    <s:State name="landscape"/>
</s:states> 

<s:navigationContent>
    <s:Button icon="{BACK}" label.landscape="Back" click="navigator.popView()"/>
</s:navigationContent> 
```

请参阅文档[在移动应用程序中支持多种屏幕尺寸和 DPI 值](http://help.adobe.com/en_US/flex/mobileapps/WS19f279b149e7481c682e5a9412cf5976c17-8000.html)

# javascript - 如何使用 json2.js 指向一个充满 json 值的 url 并 eval 解析它？

> ID：10886438
> 
> 赞同：0
> 
> 时间：2012-06-04T18:39:37.033
> 
> 标签：javascript, json, parsing, function, url

如何使用 json2 dot js 将其解析为 eval 对象？

有一个网址 http://blah.com/json.data 我想从这样的按钮调用

`<input type="button" value"Go" onclick="go()" />`

从 Go javascript 函数中，我想在页面上点击只有这种类型的数据内容（它没有 html）的 blah url：userdetails.attribute.name=LastName userdetails.attribute.value=Smith userdetails.attribute。 name=GivenName userdetails.attribute.value=Michael

我如何使用该`eval()`函数将所有数据从那个 blah url 扔到一个 var object1 中，以便我可以做这样的事情：

`document.getElementById("lname").innerHTML = object1.blah[1].LastName;`

在此先感谢...我是 json2 的新手，但想开始使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T19:03:18.563

使用[jQuery](http://api.jquery.com/jQuery.ajax/)：

```
$.get({
  url: "/json.data",
  dataType: "json",
  success: function (result) {
    $("#lname").text(result.blah[1].LastName);
  }
}); 
```

如果您的数据实际上是您在示例中发布的格式（这不是有效的 JSON），您可能需要手动解析它。您可以告诉 jQuery 向您发送纯文本，而不是通过将`dataType`设置设置为`text`.

# json - 通过访问 JSON 文件永久删除列表中的项目

> ID：10886439
> 
> 赞同：0
> 
> 时间：2012-06-04T18:39:40.543
> 
> 标签：json, listview, sencha-touch, extjs, sencha-touch-2

当用户点击删除按钮时，我正在尝试删除项目列表。

我从商店中删除了该项目，并且该项目已从列表中成功删除，但是，当我重新运行该应用程序时，所有项目都存在。

为了永久删除项目，我倾向于认为我必须删除 JSON 文件中的项目，如何获取列表的 JSON 字符串并对其进行修改。

我正在使用以下代码删除该项目：

```
 var store = Ext.getStore('mylist');          
         store.removeAt(index);
         this.getList().refresh(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T22:00:40.623

如果您正在使用本地存储，那么您只需要将`store.sync()`更改传播到存储。

# c# - XSD 的 XML 验证得到无效的子元素错误，我不知道为什么？

> ID：10886446
> 
> 赞同：4
> 
> 时间：2012-06-04T18:40:19.130
> 
> 标签：c#, xml, xsd

使用以下我总是得到一个无效的子元素错误。我是 XML 新手，我一直在网上寻找并试图解决这个问题，但没有运气。我有另一个 XSD 正在验证提交给我的应用程序的 XML，它工作得很好，但它使用的是属性而不是元素。无法使用 XSD 中的元素来验证通过我无法控制的第 3 方应用程序提交的 XML。

XSD

```
 ```
<?xml version="1.0" encoding="Windows-1252"?>
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified"     xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="SCCAParticipationList">
    <xs:complexType>
      <xs:sequence>
        <xs:element maxOccurs="unbounded" name="Entry">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="Address" type="xs:string" minOccurs="0" />
              <xs:element name="CarModel" type="xs:string" minOccurs="0" />
              <xs:element name="CarNo" type="xs:string" minOccurs="0" />
              <xs:element name="TotalTm" type="xs:string" minOccurs="0" />
              <xs:element name="BestTm" type="xs:string" minOccurs="0" />
              <xs:element name="Region" type="xs:string" minOccurs="0" />
              <xs:element name="MemberNo" type="xs:string" minOccurs="1" />
              <xs:element name="FirstName" type="xs:string" minOccurs="1" />
              <xs:element name="LastName" type="xs:string" minOccurs="1" />
              <xs:element name="Class" type="xs:string" minOccurs="1" />
              <xs:element name="Pos" type="xs:string" minOccurs="1" />
              <xs:element name="UniqueID" type="xs:string" minOccurs="0" />
            </xs:sequence>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema> 
``` 
```

`XML

```
 ```
<?xml version="1.0"?>
<SCCAParticipationList>
  <Entry>
    <MemberNo>3333333</MemberNo>
    <FirstName>Test</FirstName>
    <LastName>Person</LastName>
    <Class>stt</Class>
    <Pos>13</Pos>
    <CarModel>Mazda Miata</CarModel>
    <Address>123 Test Dr ,The Woodlands TX,55555,US</Address>
  </Entry>
  <Entry>
    <MemberNo>2222222</MemberNo>
    <FirstName>John</FirstName>
    <LastName>Doe</LastName>
    <Class>sio</Class>
    <Pos>3T</Pos>
    <CarModel>Subaru Impreza</CarModel>
    <Address>111 Test Circle ,Austin TX,77777,US</Address>
  </Entry>
</SCCAParticipationList> 
``` 
```

`C＃`

```
 `protected Boolean VerifyXmlwElements(string strSchemaPath, string strXml)
        {
            try
            {

                byte[] byteArray = Encoding.ASCII.GetBytes(strXml);
                MemoryStream stream = new MemoryStream(byteArray);
                XmlTextReader xmlr = new XmlTextReader(stream);
                XmlValidatingReader xmlvread = new XmlValidatingReader(xmlr);
                xmlvread.Schemas.Add(null, strSchemaPath);

```
 xmlvread.ValidationEventHandler += new ValidationEventHandler(ValidationCallBack);

            while (xmlvread.Read()) { }

            xmlvread.Close();

            if (intErrCount > 0)
            {
                intErrCount--;
                throw new Exception(strErrMessage);
            }
            strErrMessage = "XML validation succeeded!\r\n";
            return true;
        }
        catch (Exception ex)
        {
            intErrCount++;
            strErrMessage = "Invalid XML - " + ex.Message + intErrCount.ToString() + " Error(s)\r\n";
            return false;
        }
    }

    private void ValidationCallBack(Object sender, ValidationEventArgs args)
    {
        if (args.Message.ToLower().Contains("attribute is not declared"))
        {
            return;
        }
        intErrCount++;
        return;
    } 
```` 
```

* * *

 ``## 回答 #1

> 赞同：9
> 
> 时间：2012-06-04T18:50:44.093

至少有一个问题是您对 Entry 子元素的排序不正确。序列标签中定义的元素必须以相同的顺序出现在相应的 XML 文档中。

根据您的架构验证您的示例 XML 后，这是我看到的唯一问题。

编辑：

如果您无法控制输入文件的元素顺序并且它不一致并且每个条目的每个子元素最多只能出现一次，您可能希望使用[所有](http://www.w3schools.com/schema/el_all.asp)元素而不是序列。```

# oracle - 如何生成 Oracle 模式的整个 DDL（可编写脚本）？

> ID：10886450
> 
> 赞同：53
> 
> 时间：2012-06-04T18:40:35.293
> 
> 标签：oracle, schema, ddl

谁能告诉我如何为 Oracle 模式中的所有表、视图、索引、包、过程、函数、触发器、类型、序列、同义词、授权等生成 DDL？理想情况下，我也想复制行，但这并不重要。

我想在某种计划的作业上执行此操作，而不是每次都手动执行，因此排除了使用 SQL Developer 中的向导。

理想情况下，由于我将在多个相互具有授权和同义词的模式上运行它，我希望有一种方法可以在输出中进行查找/替换，以便模式名称与我的新模式的名称相匹配。成为。

谢谢！

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-06-04T18:52:59.850

您可以通过 SQL*Plus 和 dbms_metadata 包将模式输出到文件。然后通过 sed 将架构名称替换为另一个名称。这适用于 Oracle 10 及更高版本。

```
sqlplus<<EOF
set long 100000
set head off
set echo off
set pagesize 0
set verify off
set feedback off
spool schema.out

select dbms_metadata.get_ddl(object_type, object_name, owner)
from
(
    --Convert DBA_OBJECTS.OBJECT_TYPE to DBMS_METADATA object type:
    select
        owner,
        --Java object names may need to be converted with DBMS_JAVA.LONGNAME.
        --That code is not included since many database don't have Java installed.
        object_name,
        decode(object_type,
            'DATABASE LINK',      'DB_LINK',
            'JOB',                'PROCOBJ',
            'RULE SET',           'PROCOBJ',
            'RULE',               'PROCOBJ',
            'EVALUATION CONTEXT', 'PROCOBJ',
            'CREDENTIAL',         'PROCOBJ',
            'CHAIN',              'PROCOBJ',
            'PROGRAM',            'PROCOBJ',
            'PACKAGE',            'PACKAGE_SPEC',
            'PACKAGE BODY',       'PACKAGE_BODY',
            'TYPE',               'TYPE_SPEC',
            'TYPE BODY',          'TYPE_BODY',
            'MATERIALIZED VIEW',  'MATERIALIZED_VIEW',
            'QUEUE',              'AQ_QUEUE',
            'JAVA CLASS',         'JAVA_CLASS',
            'JAVA TYPE',          'JAVA_TYPE',
            'JAVA SOURCE',        'JAVA_SOURCE',
            'JAVA RESOURCE',      'JAVA_RESOURCE',
            'XML SCHEMA',         'XMLSCHEMA',
            object_type
        ) object_type
    from dba_objects 
    where owner in ('OWNER1')
        --These objects are included with other object types.
        and object_type not in ('INDEX PARTITION','INDEX SUBPARTITION',
           'LOB','LOB PARTITION','TABLE PARTITION','TABLE SUBPARTITION')
        --Ignore system-generated types that support collection processing.
        and not (object_type = 'TYPE' and object_name like 'SYS_PLSQL_%')
        --Exclude nested tables, their DDL is part of their parent table.
        and (owner, object_name) not in (select owner, table_name from dba_nested_tables)
        --Exclude overflow segments, their DDL is part of their parent table.
        and (owner, object_name) not in (select owner, table_name from dba_tables where iot_type = 'IOT_OVERFLOW')
)
order by owner, object_type, object_name;

spool off
quit
EOF

cat schema.out|sed 's/OWNER1/MYOWNER/g'>schema.out.change.sql 
```

将所有内容放在脚本中并通过 cron（调度程序）运行它。使用高级功能时，导出对象可能会很棘手。如果您需要在上述代码中添加更多异常，请不要感到惊讶。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-12-05T10:41:09.413

如果要为每个对象单独生成 ddl，

查询是：

**--为所有用户对象生成 DDL**

**--1。适用于所有桌子**

```
SELECT DBMS_METADATA.GET_DDL('TABLE', TABLE_NAME) FROM USER_TABLES; 
```

**--2。适用于所有指数**

```
SELECT DBMS_METADATA.GET_DDL('INDEX', INDEX_NAME) FROM USER_INDEXES WHERE INDEX_TYPE ='NORMAL'; 
```

**--3。适用于所有视图**

```
SELECT DBMS_METADATA.GET_DDL('VIEW', VIEW_NAME) FROM USER_VIEWS; 
```

或者

```
SELECT TEXT FROM USER_VIEWS 
```

**--4。适用于所有物化视图**

```
SELECT QUERY FROM USER_MVIEWS 
```

**--5。所有功能**

```
SELECT DBMS_METADATA.GET_DDL('FUNCTION', OBJECT_NAME) FROM USER_PROCEDURES WHERE OBJECT_TYPE = 'FUNCTION' 
```

==================================================== ==============================================

**GET_DDL**函数不支持某些对象类型，如 LOB、MATERIALIZED VIEW、TABLE PARTITION

因此，用于生成 DDL 的合并查询将是：

```
SELECT OBJECT_TYPE, OBJECT_NAME,DBMS_METADATA.GET_DDL(OBJECT_TYPE, OBJECT_NAME, OWNER)
  FROM ALL_OBJECTS 
  WHERE (OWNER = 'XYZ') AND OBJECT_TYPE NOT IN('LOB','MATERIALIZED VIEW', 'TABLE PARTITION') ORDER BY OBJECT_TYPE, OBJECT_NAME; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-11-12T14:48:51.870

PACKAGE 的 get_ddl 过程将返回规范和正文，因此最好更改 all_objects 上的查询，以便在选择时不返回包正文。

到目前为止，我将查询更改为：

```
SELECT DBMS_METADATA.GET_DDL(REPLACE(object_type, ' ', '_'), object_name, owner)
FROM all_OBJECTS
WHERE (OWNER = 'OWNER1')
and object_type not like '%PARTITION'
and object_type not like '%BODY'
order by object_type, object_name; 
```

尽管根据您获得的对象类型可能需要进行其他更改...

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-09-29T05:07:01.860

首先导出架构元数据：

```
expdp dumpfile=filename logfile=logname directory=dir_name schemas=schema_name 
```

然后使用`sqlfile`选项导入（它不会导入数据，只会将模式 DDL 写入该文件）

```
impdp dumpfile=filename logfile=logname directory=dir_name sqlfile=ddl.sql 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-06-24T12:36:23.873

PACKAGE_BODY等对象有问题：

```
SELECT DBMS_METADATA.get_ddl(object_Type, object_name, owner) FROM ALL_OBJECTS WHERE OWNER = 'WEBSERVICE';

ORA-31600 invalid input value PACKAGE BODY parameter OBJECT_TYPE in function GET_DDL
ORA-06512: на  "SYS.DBMS_METADATA", line 4018
ORA-06512: на  "SYS.DBMS_METADATA", line 5843
ORA-06512: на  line 1
31600\. 00000 -  "invalid input value %s for parameter %s in function %s"
*Cause:    A NULL or invalid value was supplied for the parameter.
*Action:   Correct the input value and try the call again.

SELECT DBMS_METADATA.GET_DDL(REPLACE(object_type,' ','_'), object_name, owner)
  FROM all_OBJECTS 
  WHERE (OWNER = 'OWNER1'); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-11-19T06:53:52.357

要为整个**SCHEMA**即**USER**生成 DDL 脚本，您可以使用**dbms_metadata.get_ddl**。

[在Tim Hall](https://oracle-base.com/dba/script?category=script_creation&file=user_ddl.sql)创建的**SQL*Plus**中执行以下脚本：

出现提示时提供**用户名。**

```
set long 20000 longchunksize 20000 pagesize 0 linesize 1000 feedback off verify off trimspool on
column ddl format a1000

begin
   dbms_metadata.set_transform_param (dbms_metadata.session_transform, 'SQLTERMINATOR', true);
   dbms_metadata.set_transform_param (dbms_metadata.session_transform, 'PRETTY', true);
end;
/

variable v_username VARCHAR2(30);

exec:v_username := upper('&1');

select dbms_metadata.get_ddl('USER', u.username) AS ddl
from   dba_users u
where  u.username = :v_username
union all
select dbms_metadata.get_granted_ddl('TABLESPACE_QUOTA', tq.username) AS ddl
from   dba_ts_quotas tq
where  tq.username = :v_username
and    rownum = 1
union all
select dbms_metadata.get_granted_ddl('ROLE_GRANT', rp.grantee) AS ddl
from   dba_role_privs rp
where  rp.grantee = :v_username
and    rownum = 1
union all
select dbms_metadata.get_granted_ddl('SYSTEM_GRANT', sp.grantee) AS ddl
from   dba_sys_privs sp
where  sp.grantee = :v_username
and    rownum = 1
union all
select dbms_metadata.get_granted_ddl('OBJECT_GRANT', tp.grantee) AS ddl
from   dba_tab_privs tp
where  tp.grantee = :v_username
and    rownum = 1
union all
select dbms_metadata.get_granted_ddl('DEFAULT_ROLE', rp.grantee) AS ddl
from   dba_role_privs rp
where  rp.grantee = :v_username
and    rp.default_role = 'YES'
and    rownum = 1
union all
select to_clob('/* Start profile creation script in case they are missing') AS ddl
from   dba_users u
where  u.username = :v_username
and    u.profile <> 'DEFAULT'
and    rownum = 1
union all
select dbms_metadata.get_ddl('PROFILE', u.profile) AS ddl
from   dba_users u
where  u.username = :v_username
and    u.profile <> 'DEFAULT'
union all
select to_clob('End profile creation script */') AS ddl
from   dba_users u
where  u.username = :v_username
and    u.profile <> 'DEFAULT'
and    rownum = 1
/

set linesize 80 pagesize 14 feedback on trimspool on verify on 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2019-03-09T19:59:25.527

此查询的输出非常干净（[此处](https://www.oracle-scripts.net/generate-user-ddl/)为原始）

```
clear screen
accept uname prompt 'Enter User Name : '
accept outfile prompt  ' Output filename : '

spool &&outfile..gen

SET LONG 20000 LONGCHUNKSIZE 20000 PAGESIZE 0 LINESIZE 1000 FEEDBACK OFF VERIFY OFF TRIMSPOOL ON

BEGIN
   DBMS_METADATA.set_transform_param (DBMS_METADATA.session_transform, 'SQLTERMINATOR', true);
   DBMS_METADATA.set_transform_param (DBMS_METADATA.session_transform, 'PRETTY', true);
END;
/

SELECT dbms_metadata.get_ddl('USER','&&uname') FROM dual;
SELECT DBMS_METADATA.GET_GRANTED_DDL('SYSTEM_GRANT','&&uname') from dual;
SELECT DBMS_METADATA.GET_GRANTED_DDL('ROLE_GRANT','&&uname') from dual;
SELECT DBMS_METADATA.GET_GRANTED_DDL('OBJECT_GRANT','&&uname') from dual;

spool off 
```

# java - 使用 http://www.hibernate.org/dtd 的休眠问题

> ID：10886453
> 
> 赞同：3
> 
> 时间：2012-06-04T18:40:43.807
> 
> 标签：java, eclipse, hibernate

我目前在我的休眠配置文件中使用[http://hibernate.sourceforge.net](http://hibernate.sourceforge.net)作为我的命名空间，这给了我这些警告：

> 已识别过时的休眠命名空间 [http://hibernate.sourceforge.net/](http://hibernate.sourceforge.net/)。请改用命名空间 [http://www.hibernate.org/dtd/](http://www.hibernate.org/dtd/)。请参考 Hibernate 3.6 迁移指南！

因此，我尝试将 hibernate.cfg.xml 和所有其他 *.hbm.xml 文件切换为使用[http://www.hibernate.org/dtd](http://www.hibernate.org/dtd)。但是，当我尝试在 eclipse 中使用休眠工具生成代码时，我收到以下错误消息（代码生成与其他命名空间一起工作）：

> org.hibernate.HibernateException：无法解析配置：C:\dev\workspace\DataLoad\hibernate.cfg.xml 无法解析配置：C:\dev\workspace\DataLoad\hibernate.cfg.xml
> org.dom4j.DocumentException： www.hibernate.org 嵌套异常：www.hibernate.org www.hibernate.org 嵌套异常：www.hibernate.org org.dom4j.DocumentException：www.hibernate.org 嵌套异常：www.hibernate.org www.hibernate.org嵌套异常：www.hibernate.org

这是我的 hibernate.cfg.xml：

```
<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE hibernate-configuration PUBLIC
        "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
        "http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd">

<hibernate-configuration>
    <session-factory>
        <!-- Database connection settings -->
        <property name="connection.driver_class">
            com.mysql.jdbc.Driver
        </property>
        <property name="connection.url">
            jdbc:mysql://localhost:3306/findata?tcpKeepAlive=true
        </property>
        <property name="connection.username">root</property>
        <property name="connection.password">xxxxxxxx</property>

        <property name="connection.pool_size">2</property>
        <property name="show_sql">true</property>
        <property name="dialect">
            org.hibernate.dialect.MySQLDialect
        </property>
        <property name="current_session_context_class">thread</property>
        <property name="cache.provider_class">
            org.hibernate.cache.NoCacheProvider
        </property>

        <mapping resource="conf/Alert.hbm.xml" />
        <mapping resource="conf/Entity.hbm.xml" />
        <mapping resource="conf/FactData.hbm.xml" />
        <mapping resource="conf/TimeEvent.hbm.xml" />
        <mapping resource="conf/User.hbm.xml" />
        <mapping resource="conf/AlertTarget.hbm.xml" />
        <mapping resource="conf/LogAlert.hbm.xml" />
        <mapping resource="conf/RepeatType.hbm.xml" />
        <mapping resource="conf/Schedule.hbm.xml" />
        <mapping resource="conf/Task.hbm.xml" />
        <mapping resource="conf/JobQueue.hbm.xml" />
        <mapping resource="conf/LogTask.hbm.xml" />
        <mapping resource="conf/Exclude.hbm.xml" />
        <mapping resource="conf/LogNotification.hbm.xml" />
        <mapping resource="conf/Job.hbm.xml" />
        <mapping resource="conf/Metric.hbm.xml" />
        <mapping resource="conf/EntityGroup.hbm.xml" />
        <mapping resource="conf/ExtractSingle.hbm.xml" />
    </session-factory>
</hibernate-configuration> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-10T09:28:15.057

上次我们在解析休眠 cfg 文件时也遇到了一些问题。根本原因是休眠站点无法访问。经过一番谷歌搜索和调试 org.hibernate.util.DTDEntityResolver 类后，我意识到还有另一种方法，如何指定 DTD URL：

```
<!DOCTYPE hibernate-configuration SYSTEM
    "classpath://org/hibernate/hibernate-configuration-3.0.dtd"> 
```

这意味着 hibernate 将从类路径加载 DTD - 它通常包含在 org/hibernate 目录的 hibernate jar 中。

但是，我们使用的是 hibernate 3.5.6——我不知道这种方法在新版本中是否仍然有效——试试看。这样做的好处是您完全独立于互联网连接、代理等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-10T22:31:49.520

检查此迁移指南：[https ://community.jboss.org/wiki/HibernateCoreMigrationGuide36](https://community.jboss.org/wiki/HibernateCoreMigrationGuide36)

您必须将 dtd 网址更改为[http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd](http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd)

# c - 具有开始值和结束值的数据集图

> ID：10886457
> 
> 赞同：0
> 
> 时间：2012-06-04T18:40:56.343
> 
> 标签：c, excel, plot, gnuplot

我正在尝试提出一种策略，以编程方式绘制具有具有起始值和结束值的各个元素的数据集。举个例子，磁盘利用率的数据集将显示带有分配块的碎片磁盘，这些块将具有指示给定分配的起始地址和结束地址的条。

gnuplot/excel 是否提供内置绘图等设施？

问候，

![在此处输入图像描述](../Images/eac58b6188efcf2bb13d1363c07145e3.png)

# java - 使用期货地图，我如何通知（）其中的单个元素？

> ID：10886460
> 
> 赞同：0
> 
> 时间：2012-06-04T18:41:12.327
> 
> 标签：java, concurrency, notify, future

我正在尝试保存一个静态的期货列表，并在稍后取消（）或通知（）正在进行的期货。与这些 Futures 相关联的 Callable 类在其中有一个 wait() ，因此必须由外部源通知每个类以继续。但是，我对 notify() 的调用似乎被忽略了，因为可调用对象永远不会超过它们的等待语句。具有 Futures 列表的类看起来像这样：

```
private static Map <String, Future<Object>> results = new HashMap <String, Future<Object>>();

ExecutorService taskExecutor;

public void doStuff() {
    taskExecutor = Executors.newCachedThreadPool();

    // loop inifinitely - external processes will modify the conditions within
    while(!shutItDown) {

        if (<condition1>) {
            // condition 1 dictates the kick-off of a new callable
            Future<Object> future = taskExecutor.submit(new MyCallable(id));
            results.put(id, future);
        }
        else if (<condition2>) {
            // condition 2 represents a callable in a wait status needs
            // to be notified
            Future<Object> future = results.get(uid);
            if (future != null) {
                synchronized(future) {
                    future.notify();  // this doesn't have the desired effect!
                }
            }
        }
    }

} 
```

Callable 类现在只是一个模型，看起来类似于：

```
public class MyCallable implements Callable<Object> {

private String id;

public MyCallable(String id) {
    this.id = id;
}

@Override
public Object call() throws Exception {     

    try {

        // do some work here, then wait on outside notification

        synchronized(this) {
            this.wait();  // never gets past here!!!
        }

        // do some other work here, once this has been notified
    } 
    catch (InterruptedException e) {
        e.printStackTrace();
    }

    return null;
} 
```

调用了 notify() 方法，但似乎没有效果。Future 的对象引用似乎是有效的（即局部变量“future”与存储在静态列表中的 future 的引用相匹配）。

我可能在这里遗漏了一些基本的并发概念，但我预计当满足条件 2 时，我的 Callable 将继续通过 wait() 调用。

请注意，如果我使用 cancel() 而不是 notify()，它会中断我的 runnable 并导致如我所料的 InterruptedException。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T18:44:08.240

您需要*完全相同的*`notify`对象。在您的情况下，您正在通知对象但正在等待对象。不幸的是，我不知道有什么简单的方法可以让您的对象看到它的包裹，因此无需等待它。*`Future``MyCallable``MyCallable``Future``wait()`*

 *一种解决方案是将锁定对象传递给您的`MyCallable`构造函数，然后将其与关联的`Future`. 就像是：

```
 private static Map <String, FutureLock> results =
        new HashMap <String, FutureLock>();
  ...
  Object lock = new Object();
  Future<Object> future = taskExecutor.submit(new MyCallable(id, lock));
  results.put(id, new FutureLock(future, lock));
  ...

  public class FutureLock {
      private Future<Object> future;
      private Object lock;
      public FutureLock(Future<Object> future, Object lock) {
         this.future = future;
         this.lock = lock;
      }
      public void notify() {
         synchronized (lock) {
            lock.notify();
         }
      }
      public Object get() throws Exception {
         return future.get();
      }
  }

  public class MyCallable {
     private Object lock;
     public MyCallable(String id, Object lock) {
         this.lock = lock;
         ...
     }
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T18:50:08.900

您似乎想要实现的目标（尽管我可能错了）类似于[SettableFuture](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/util/concurrent/SettableFuture.html)。

不确定您是否需要将 Callable 的计算能力转换为 Executor，但 SettableFuture 应该像创建它并在您准备好时设置一样简单，而其他线程坐在那里等待另一个线程设置。

似乎有两条路线可以解决问题。

*一个是执行者。*

```
Executor e = Executors.newSingleThreadExecutor();
Future f = null; 
```

**线程 1：**

```
f = e.submit(new Callable(){
  public Object call(){
    return new Object();
  }
}); 
```

**线程 2：**

```
f.get(); //will suspend Thread 2 until the Executor submits the callable 
```

*另一种情况是 SettableFuture*

```
final SettableFuture f = new SettableFuture(); 
```

**线程 1：**

```
f.set(new Object()); 
```

**线程 2：**

```
f.get(); //will suspend Thread 2 until Thread 1 set's the Future. 
```

两者都将实现相同类型的等待机制，不同之处在于第一个示例中的线程 1 将提交给单独的线程以创建对象。线程 2 仍将等待，直到另一个线程完成操作。第二个示例将让线程 2 等待线程 1 完成并设置 Future。*

# php - PHP 抽象层 - 从名称中获取类

> ID：10886470
> 
> 赞同：0
> 
> 时间：2012-06-04T18:41:38.060
> 
> 标签：php, sql, database

我正在用 PHP 编写一个简单的数据库抽象层。我目前正在研究查询构建器，即构建 SQL“代码”的类。

有没有更好的方法来做这样的事情？

```
if($dbengine == "MySQL")
{
    MySQLQueryBuilder::buildInsert($table, $data);
}
else if($dbengine == "PgSQL")
{
    PgSQLQueryBuilder::buildInsert($table, $data);
}
// And so on... 
```

我在想类似的事情：

```
$querybuilder = get_class_from_name($dbengine . "QueryBuilder");
$querybuilder::buildInsert($table, $data); 
```

关于我如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T18:47:52.273

如果你希望它是静态的，你可以这样做：

```
$statement = call_user_func(array($dbengine . 'QueryBuilder', 'buildInsert'), $table, $data); 
```

但我同意 Niko 的评论，拥有 builder 的实例会更好看。

**更新：**

按照 Niko 建议的方式，您可以这样做：

```
$className = $dbengine . 'QueryBuilder';
$builder = new $className();
$statement = $builder->buildInsert($table, $data); 
```

所以根本`if`不需要，代码看起来更短更干净......

# amazon-ec2 - 用于作业服务器的 Amazon Auto Scaling API

> ID：10886471
> 
> 赞同：9
> 
> 时间：2012-06-04T18:41:39.830
> 
> 标签：amazon-ec2, amazon-web-services, autoscaling

我已经阅读了几乎整个文档，甚至超出了 AWS AS API 以了解所有 AS 内容。

但是我仍然想知道（我还没有实际使用过 API，因为我想先从某人那里找到这个）我的场景是否适用于 AS。

假设我在一个 AS 组中设置了一堆工作服务器，每个服务器都在从事一项工作，然后突然到了（我不知道，AVG CPU 大于或在另一种情况下小于 80%）的时候来扩大或缩小规模。

我主要担心的是失去一份正在进行的工作。也许用一个例子可以更好地解释这一点：

*   我启动了 5 个作业服务器，上面有 5 个作业
*   一个作业完成并在 Amazon API 中触发缩减触发器
*   亚马逊开始缩小它们的规模
*   我失去了一个实际上正在运行作业的作业服务器（完成 90% 必须重新开始）

考虑到这一点，我最好只使用 Amazon Spot Instance/EC2 API 并管理我自己的扩展，还是我在 Amazon API 如何判断服务器终止方面缺少一些东西？

老实说，我宁愿缩放到 SQS 等待量而不是服务器上的一些健康数据：

*   每等待 100 条消息，集群容量增加 20%

但这对于 AS 似乎也不太可行。

那么 AWS AS API 不是正确的解决方案，还是我错过了一些关于它如何工作的重要信息？

谢谢，

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-07T08:35:35.653

经过一番搜索，我发现有两种公认的方式来管理 AS API 或 AS 的一般工作：

一种方法是直接从 worker 内部操纵服务器的健康状况。这是相当多的站点所做的并且它是有效的，当您的工作人员检测到系统中没有更多的工作或冗余时，它会将其所在的服务器标记为不健康。这样，AS API 就会出现并在一段时间后自动将其删除。

因此，使用这种方法，您将在一段时间内根据您的 SQS 队列大小制定扩展策略（例如，每 5 分钟 SQS 消息超过 100 个添加 2 个服务器；每 10 分钟 SQS 消息超过 500 个双倍网络容量50%）。缩减将由代码而不是活动策略来处理。

此方法也适用于零集群，因此您可以在不使用集群时将集群一直关闭到没有服务器，使其非常具有成本效益。

好处：

*   易于设置
*   使用 AWS API 函数
*   可能是最快的设置
*   使用 AWS 托管 API 为您管理集群大小

缺点：

*   不使用完整的 AWS API 很难管理，即在创建新服务器时，如果不执行所有 instanceid 的完整 API 命令返回，您将无法取回它的 instanceid。在其他情况下，如果您想要对集群进行自我控制，AWS AS API 会妨碍您并让生活变得更加艰难
*   依靠亚马逊知道什么最适合您的钱包。您依靠 Amazon API 来正确扩展，这对许多人来说是一个优势，但对某些人来说是个劣势。
*   worker 必须容纳一些服务器池代码，这意味着 worker 不是通用的，不能在不更改配置的情况下立即移动到另一个集群。

考虑到这一点，还有第二种选择，DIY。您使用 EC2 Spot Instance 和 on Demand Instance API 根据您的自定义规则创建自己的 AS API。这很容易解释：

*   你有一个 cli 脚本，当运行开始时，比如 10 个服务器
*   您有一个 cronjob，当检测到满足某些条件时，服务器会停机或更多

好处：

*   轻松干净地管理您的终端
*   可以做普通工人
*   服务器池可以开始管理多个集群
*   您可以制定规则以及从 AWS 上的指标获取数据并使用它们进行比较和时间范围来了解事情是否应该改变的事情并不十分复杂。

缺点：

*   很难获得多区域（对 SQS 来说还不错，因为 SQS 是单区域）
*   难以处理区域容量和工作量的错误
*   您必须依靠自己的服务器正常运行时间和自己的代码来确保 cronjob 正常运行，并按应有的方式配置服务器，并在应该的时候将它们分解。

因此，对于最终用户来说，这似乎是一场更舒适的战斗。我个人仍在考虑这两者，并创建了一个小型自托管服务器池，它可以为我工作，但同时我很想尝试让它在 AWS 自己的 API 上工作。

希望这对人们有所帮助，

编辑：请注意，使用这两种方法中的任何一种，您仍然需要一个函数来预测您应该如何出价，因此您需要在您的现货类型（EC2 类型）上调用出价历史 API 并计算出价方式。

另一个编辑：在系统中自动检测冗余的另一种方法是检查 SQS 队列的空响应指标。这是您的工作人员 ping 队列但未收到响应的次数。如果您在工作期间在应用程序中使用排他锁，这将非常有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T17:31:04.577

我刚刚遇到了同样的问题，我和一个亚马逊人谈了谈，他和我谈了终止保护。事实上，如果一个实例激活了终止保护，它**是无法**终止的。当触发缩减时，应用程序将从自动缩放组中删除，但不会终止。要终止它，您必须禁用终止保护，然后终止它（例如，您可以在工作结束时执行此操作）。

总而言之，您要做的是：

*   在您的 AMI 中添加启动脚本以激活终止保护
*   保持您的自动缩放规则（放大和缩小）
*   在正在运行的实例上，一旦终止实例是安全的（作业结束，...），停用终止保护并终止实例

您可以使用 AWS API 完成所有这些工作。

# android - Android 应用程序 - 为 iPhone 开发如何？

> ID：10886474
> 
> 赞同：3
> 
> 时间：2012-06-04T18:41:55.110
> 
> 标签：android, iphone, mobile

我们是一些来自瑞典的学生，我们在一个学校项目中开发了一个 Android 应用程序。该应用程序已被许多对我们的想法非常感兴趣的重要人士（对我们而言）注意到，但认为有必要开发一个 iPhone 应用程序以使其获得成功的机会很小。问题是我们只学习了Java，不到一年。我们必须“随时随地”学习 Android。我们真的不知道如何将这个相当先进的 Android 应用程序变成 iPhone 应用程序。

我们已经探索了使用某种框架的可能性，其中一个引起我们注意的是“PhoneGap”。但我们不知道它是否足够先进以满足我们的目的。在 Android 版本中，我们有一个客户端（电话），它依次联系一个 TCP 服务器，该服务器又联系一个 MySQL 服务器以获取所需的信息。然后将信息发送回应用程序并进行处理。我们得到的数据几乎总是被放入某种列表中，填满我们的视图。

PhoneGap 可以处理这样的对象吗？它能否计算出我们取回的数据并动态添加到客户端？PhoneGap 甚至“安全”吗？或者你会推荐一个完全不同的方向——比如“真正地”学习为 iPhone 编程？对于一群熟悉面向对象编程并为另一个平台编写移动应用程序的人来说，这将是多么耗时？

希望有人有时间阅读所有这些内容，我们将非常感谢我们能得到的任何帮助！提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T18:51:06.143

**PhoneGap 是要走的路**，它是一个简单的框架，可以获取您的应用程序（必须用 HTML/Javascript 开发）并添加它自己的层，这样您就可以从您的 Web 应用程序调用硬件功能，例如相机、加速度计、联系人、照片等...（完整列表可在[PhoneGap Docs](http://docs.phonegap.com/)上找到）

首先，为了能够使用PhoneGap 瞄准PhoneGap 支持的所有不同操作系统，您需要将您的应用程序转换为WebApp。

因为您已经学习了 Java 和 Android，所以请下载 PhoneGap zip 文件，并使用`\lib\android`它开始开发。

请记住阅读`readme.md`以了解首先要做什么。

关于安全性，这很容易，因为 PhoneGap 将您的 Web 应用程序转换为本机应用程序，因此，您在本机应用程序中拥有的所有安全性都将在 PhoneGap 的输出中实现。

* * *

关于 TCP 通信，我在网上没有看到任何关于它的内容，但是，你可以使用 web socket 来做同样的事情吗，如果可以，它会为你省去一些麻烦，如果没有，你可以在[PhoneGap中搜索一个插件插件](https://github.com/purplecabbage/phonegap-plugins)区，看看他们如何跨设备开发插件并开发您自己的... javascript 比 Java 或 Android 更容易学习；）

* * *

**如何开始**

PhoneGap 是一个 JavaScript 框架。首先，您应该开发您的 Web 应用程序，例如从[jQuery Mobile](http://jquerymobile.com/)开始，让您的应用程序在 Web 浏览器中运行，将其上传到主机（或本地主机，只要它也可以从您的网络访问）并在您的移动设备上查看它设备。

如果您需要访问手机的核心功能（例如，根据接收到的数据添加手机联系人），您无法通过 Web 应用程序访问此功能，则需要使用[PhoneGap API](http://docs.phonegap.com/)，[对于此示例](http://docs.phonegap.com/en/1.7.0/cordova_contacts_contacts.md.html#contacts.create)有就像是：

```
var myContact = navigator.contacts.create({"displayName": "Test User"}); 
```

您还可以在**[PhoneGap Wiki](http://wiki.phonegap.com/w/page/35501397/Tutorials)**上找到一些教程，以及在**[Getting Started](http://wiki.phonegap.com/w/page/21138550/Getting-Started)**上找到更多。

**注意：** [**PluralSight**](http://www.pluralsight-training.net/microsoft)也有一个很好的使用 jQuery Mobile 的[PhoneGap 视频教程](http://www.pluralsight-training.net/microsoft/courses/TableOfContents?courseName=phone-gap-intro)，但他们的目标是 Windows Phone 7 应用程序而不是 Android 应用程序，但这是一个很好的起点，WP7 和 Android 之间的变化仅在[PhoneGap Build](https://build.phonegap.com/)部分， 就这样。

该课程需要 2 小时 06 小时，并且使用免费帐户，您可以免费观看 2 小时的视频，所以...这是一个很好的开始 :)

# java - 如何在 Android 中可靠地拍照？

> ID：10886477
> 
> 赞同：0
> 
> 时间：2012-06-04T18:42:01.413
> 
> 标签：java, android, android-camera

我正在尝试在 Android 应用程序中拍照，将其转换为 JPEG，然后将其上传到网络服务。到目前为止，我得到了以下信息：

```
private static final int CAMERA_REQUEST = 1888;
private void TakePhoto() {
    Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
    startActivityForResult(cameraIntent, CAMERA_REQUEST);
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    switch (requestCode) {
        case CAMERA_REQUEST:
            Bitmap photo = (Bitmap) data.getExtras().get("data");

            ByteArrayOutputStream bos = new ByteArrayOutputStream();
            photo.compress(Bitmap.CompressFormat.JPEG, 90, bos);
            byte [] bitmapData = bos.toByteArray();

            char [] dataAsChar = new String(bitmapData ).toCharArray();

            URL url = new URL("http://www.foo.com/bar);
            URLConnection conn = url.openConnection();
            conn.setDoOutput(true);
            conn.setRequestProperty("Content-Type", "application/octet-stream");

            OutputStreamWriter wr = new OutputStreamWriter(conn.getOutputStream());
            wr.write(dataAsChar);
            wr.flush();

            // Get the response
            BufferedReader rd = new BufferedReader(new InputStreamReader(conn.getInputStream()));
            String line;
            while ((line = rd.readLine()) != null) {
                // Process line...
            }
            wr.close();
            rd.close();

            break;
    }
} 
```

它本身似乎工作，例如不会崩溃。我进入 Bitmap`photo`变量。然后我使用 ByteArrayOutputStream 压缩它，它变成大约 5103 字节（在缓冲区中）。然后我将其转换为 char 数组（以便可以发送），char 数组变为 4758 个元素。不知道为什么会这样（可能是这条线`char [] dataAsChar = new String(data).toCharArray();`）。当然，一旦图像转移到另一边，它就会损坏。

我在这里想念什么？

编辑。根据@digitalJoel 的建议，我放弃了 OutputStreamWriter 并替换为

```
OutputStream os = conn.getOutputStream();
os.write(data); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T18:48:43.833

`new String(bitmapData ).toCharArray()`对我来说似乎是一个非常糟糕的主意。我认为您不能期望 JPEG 中的所有字节都被塞入一个字符串中而不会发生一些损坏。那么，为什么不直接将字节写入 OutputStream 而不是将其包装在 OutputStreamWriter 中呢？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T18:52:29.450

当您创建从中获取 char 数组的 String 时，您没有指定编码方法。Android 的默认字符串编码方法可以将多个原始字节转换为单个逻辑字符吗？

即使不是，这种事情就是为什么（正如@digitaljoel 所说）构建一个字符串只是为了获得一个字符数组并不是最好的主意。

# google-apps-script - 流面板的行为类似于 Google Script GUI Builder 中的垂直面板

> ID：10886479
> 
> 赞同：0
> 
> 时间：2012-06-04T18:42:10.267
> 
> 标签：google-apps-script

当我在 Google Apps Script GUI Builder 的流程面板中并排放置两个元素（按钮等）时，它们会重新排列在一个列中。

换句话说，流面板的行为类似于垂直面板，而不是流面板。

在相关说明中，GUI Builder 中的小部件列表包括垂直面板，但不包括水平面板。

因此，我不能并排放置项目，除非使用绝对放置（我想这不会针对不同的窗口大小进行适当调整）。

这是一个错误吗？它正在修复吗？有解决方法吗？

（作为参考，我正在研究 James Ferreira 的“Google Script”一书第 3 章中的示例。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T21:45:58.120

首先要检查的是元素的宽度。我承认我几乎从不使用 GUI Builder。并不是说它不起作用，这不是我编写代码的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T10:20:18.940

我无法复制您所说的内容，它按预期工作。正如詹姆斯所说，项目宽度当然必须适合面板。![来自 GUI 构建器的屏幕截图](../Images/cd3911bd2d4ccaba17b9db636492c96e.png)

# python - 如果我的机器上还安装了 python2.6 和 python3.1，如何从 python2.5 导入邮箱模块？

> ID：10886484
> 
> 赞同：1
> 
> 时间：2012-06-04T18:42:32.013
> 
> 标签：python, importerror, python-2.5

我对 python 和模块的导入有一个小问题：我想使用 python2.5 中的邮箱模块，但问题是我还在我的机器上安装了 python2.6 和 python3.1，当程序到达引发以下错误的行`import mailbox`（它只是错误的最后一部分）：
`File "/usr/lib/python2.6/mailbox.py", line 19, in import email.message ImportError: No module named message`

如何强制应用从 /usr/lib/python2.5 导入邮箱模块？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T19:50:44.533

我在windows下工作，我不知道它是否在linux下工作。

您可以使用 .pth 文件，您可以将这些文件放在可以从中导入模块的地方。如果 message.py 在名为 /usr/lib/python2.5/message.py 的路径中，则可以使用此 pth 文件：

消息.pth

```
/usr/lib/python2.5 
```

将它放在可以导入的地方，例如 /usr/lib/python2.6 或 /usr/lib/python3.1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T19:45:17.127

使用适当的可执行文件运行它。

```
python2.5 somescript.py 
```

# python - 有没有人在 Sublime Text 2 中提出了一个修复行延续（Python 风格）？

> ID：10886490
> 
> 赞同：7
> 
> 时间：2012-06-04T18:42:59.047
> 
> 标签：python, sublimetext, sublimetext2

我指的问题是 Python 中列表和其他东西在两行时的缩进行为。我正在寻找的结果是让 Sublime 像这个例子一样自动缩进，使代码更漂亮一点：

```
def testmethod(argument1, argument2,
               argument3, argument4):
    pass 
```

但是在 Sublime 中，当您在第 1 行后按 Enter 键，然后键入剩余的参数时，会发生这种情况：

```
def testmethod(argument1, argument2,
    argument3, argument4):
    pass 
```

显然，这不是很可读（并且不符合 PEP 8 样式约定）。我用谷歌搜索了一些未解决的线程，没有解决方案。在 Mac 上运行最新版本的 Sublime Text 2。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T06:40:31.260

这可以（部分）通过添加：

```
"indent_to_bracket": true 
```

到您的`Packages/User/Preferences.sublime-settings`文件（linux）。但不幸的是，它目前似乎只适用于`()`，而不适用`{}[]`。

# android - Android，从活动堆栈中清除X数量的活动

> ID：10886494
> 
> 赞同：1
> 
> 时间：2012-06-04T18:43:09.667
> 
> 标签：android, android-activity, stack, activity-finish

如何从活动堆栈中只清除可变数量的活动？

假设我要清除 3 个活动，我不会`android:noHistory`在清单中使用，我不会使用方法来清除整个堆栈

也许我可以`finish(); finish(); finish();`在某种情况下打电话，但这似乎不对。

有没有已知的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T18:45:34.677

您可以在要完成的课程中注册一个`BroadcastReceiver`，然后在您想要完成它们时发送广播。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T19:12:48.373

凌乱，但您可以使用 getParent()。例如：

```
this.getParent().getparent().finish(); 
this.getParent().finish(); 
this.finish(); 
```

如果您想对 x 数量的活动执行此操作，则可以使用循环和变量来追溯 x 数量的父母。

# php - .htaccess 用于 gzip 编码和缓存，但 YSlow 在两者上都报告了“F”

> ID：10886495
> 
> 赞同：1
> 
> 时间：2012-06-04T18:43:10.203
> 
> 标签：php, apache, caching, compression, gzip

我是 gzip 压缩和缓存等优化技术的新手。在网上进行了一些研究后，我意识到这可以通过基于一些 apache 处理程序的 .htaccess 来实现。我曾询问我的虚拟主机以了解 mod_deflate 和 mod_headers 库是否存在且可用

我什至通过萤火虫检查。它显示请求标头“Accept-Encoding gzip,deflate”，但响应字段中没有“Content-encoding”。有人可以帮我解决哪里出错了吗？

以下是 .htaccess 文件的代码

```
 Options -Indexes
            Options +FollowSymlinks
            RewriteEngine on

            RewriteBase /
            RewriteCond %{REQUEST_FILENAME} !-f
            RewriteCond %{REQUEST_FILENAME} !-d
            RewriteRule . /index.php [L]

            <IfModule mod_deflate.c>
            AddOutputFilterByType DEFLATE application/x-javascript
            AddOutputFilterByType DEFLATE text/css text/html text/plain text/xml
            DeflateCompressionLevel 9
            </IfModule>

            # ----------------------------------------------------------------------
            # Expires headers (for better cache control)
            # ----------------------------------------------------------------------

            # These are pretty far-future expires headers.
            # They assume you control versioning with filename-based cache busting
            # Additionally, consider that outdated proxies may miscache
            # www.stevesouders.com/blog/2008/08/23/revving-filenames-dont-use-querystring/

            # If you don't use filenames to version, lower the CSS and JS to something like
            # "access plus 1 week" or so.

            <IfModule mod_expires.c>
              ExpiresActive on

            # Perhaps better to whitelist expires rules? Perhaps.
              ExpiresDefault "access plus 1 month"

            # cache.appcache needs re-requests in FF 3.6 (thanks Remy ~Introducing HTML5)
              ExpiresByType text/cache-manifest "access plus 0 seconds"

            # Your document html
              ExpiresByType text/html "access plus 0 seconds"

            # Data
              ExpiresByType text/xml "access plus 0 seconds"
              ExpiresByType application/xml "access plus 0 seconds"
              ExpiresByType application/json "access plus 0 seconds"

            # Feed
              ExpiresByType application/rss+xml "access plus 1 hour"
              ExpiresByType application/atom+xml "access plus 1 hour"

            # Favicon (cannot be renamed)
              ExpiresByType image/x-icon "access plus 1 week"

            # Media: images, video, audio
              ExpiresByType image/gif "access plus 1 month"
              ExpiresByType image/png "access plus 1 month"
              ExpiresByType image/jpg "access plus 1 month"
              ExpiresByType image/jpeg "access plus 1 month"
              ExpiresByType video/ogg "access plus 1 month"
              ExpiresByType audio/ogg "access plus 1 month"
              ExpiresByType video/mp4 "access plus 1 month"
              ExpiresByType video/webm "access plus 1 month"

            # HTC files (css3pie)
              ExpiresByType text/x-component "access plus 1 month"

            # Webfonts
              ExpiresByType application/x-font-ttf "access plus 1 month"
              ExpiresByType font/opentype "access plus 1 month"
              ExpiresByType application/x-font-woff "access plus 1 month"
              ExpiresByType image/svg+xml "access plus 1 month"
              ExpiresByType application/vnd.ms-fontobject "access plus 1 month"

            # CSS and JavaScript
              ExpiresByType text/css "access plus 1 year"
              ExpiresByType application/javascript "access plus 1 year"

            </IfModule> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T18:40:14.727

您确定您的主机提供商启用了这两个模块吗？您是否检查过托管在同一提供商中的另一个网站？有时小型主机提供商会关闭共享计划上的 mod_deflate 以节省一些 CPU，从而增加共享。

尝试 curl 您网站上的任何 js 资源，例如：

```
curl -I "http://yslow.org/yslow-bookmarklet.js" -H "Accept-Encoding: gzip, deflate" 
```

你应该得到类似的东西：

```
HTTP/1.1 200 OK
Server: nginx/1.0.13
Date: Wed, 06 Jun 2012 18:31:25 GMT
Content-Type: application/x-javascript
Last-Modified: Fri, 25 May 2012 16:11:28 GMT
Connection: keep-alive
Expires: Thu, 07 Jun 2012 18:31:25 GMT
Cache-Control: max-age=86400
Content-Encoding: gzip 
```

寻找以`Content-Encoding`确保**mod_deflate**是 ON`Expires`以及**mod_expires**`Cache-Control`。

# python - 是否可以使用 python 创建 .mobi 文件？如果是这样，如何？

> ID：10886499
> 
> 赞同：12
> 
> 时间：2012-06-04T18:43:36.663
> 
> 标签：python, kindle

我希望能够使用 python 创建 .mobi 文件，但经过一个小时的搜索后我还没有找到任何关于它的信息。我不想使用 Calibre 或类似的软件，只是普通的 python。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-05T07:59:27.240

如果您不想使用，我建议您看一下[这个 repo](https://github.com/mhl/guardian-for-kindle)`calibre`（它很棒并且有 CLI）。虽然[此脚本](https://github.com/mhl/guardian-for-kindle/blob/master/make-guardian-ebook.py)已创建用于`.mobi`为 Guardian 创建一个，但您可以根据自己的喜好对其进行修改。

# ios - iOS - 如何重新初始化表格视图单元格

> ID：10886509
> 
> 赞同：1
> 
> 时间：2012-06-04T18:44:26.127
> 
> 标签：ios, xcode, uitableview, tableview

我在我的应用程序中设置了一个`UITableViewController`，但数据在初始布局后大约 5 秒发生了变化。

加载数据后如何重新初始化表格视图？

本质上，我需要剥离表视图并重新开始。有必要再次循环以下函数：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

我怀疑这真的很容易，我只是没有看到......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T18:46:22.180

调用`reloadData`你的 tableview。在您的`UITableViewController`实例或子类中，只需调用

```
[self.tableView reloadData]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T18:46:36.470

称呼：

```
[tableview reloadData]; 
```

该函数将调用该表视图的所有数据源函数

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T18:46:47.983

很简单，在您的 UITableViewController 中，只需在 tableview 上调用 reloaddata。

```
[self.tableView reloadData]; 
```

如果您使用 CoreData 数据库作为数据源，您还可以设置 NSFetchedResultsController，它会观察上下文并在发生更改时自动更新表。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-04T18:47:46.190

这将重新加载您用来填充表格单元格的数据：

```
[[self tableView] reloadData]; 
```

# asp.net-mvc - Jquery Mobile / Telerik 全球化错误

> ID：10886510
> 
> 赞同：1
> 
> 时间：2012-06-04T18:44:26.290
> 
> 标签：asp.net-mvc, asp.net-mvc-3, jquery-mobile, telerik, telerik-mvc

我有一个使用 Telerik MVC 和 JqueryMobile 的 Asp.net MVC 3 项目。为了使全球化能够对诸如 MVC 网格之类的项目正常工作，我在主布局页面中使用以下内容启用了全球化：

@(Html.Telerik().ScriptRegistrar().Globalization(true).DefaultGroup(group => group.Combined(true).Compress(true)))

如果我直接使用 MVC Grid 调用我的页面，这很好用，例如 mycontroller/GridPage ，但是如果我尝试通过 JqueryMobile 对话框调用相同的操作，我会收到以下消息：

> 0x800a01b6 - JavaScript 运行时错误：对象不支持属性或方法“加载”

我用来通过 JqueryMobile 调用的链接是：

```
@Html.ActionLink("My Grid", "GridPage ", "mycontroller", new { data_rel = "dialog", data_theme = "b", data_transition = "flip" }) 
```

删除 Globalization 属性会停止错误，但也会停止 Globalization

有人可以建议我如何克服这个错误吗？

谢谢

标记

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T17:44:33.830

好吧，我想出了一个解决方法，虽然我不是很喜欢它。我认为当我们像这样动态地将 HTML 添加到 DOM 时，它会清除 jQuery.telerik 对象，只留下 CultureInfo。为了解决这个问题，您需要在加载原始页面时/在动态 HTML 中“注册”所有 Telerik 控件。

例如，如果您有一个带有 2 个名为 txtPrice 和 txtQuantity 的文本框的弹出窗口，那么在任何可以显示此弹出窗口的页面中，您都需要声明 2 个名为 txtPrice 和 txtQuantity 的 Telerik 控件。声明后，您可以将它们从 DOM 中删除。当弹出窗口被添加到 DOM 时，它将看到具有该名称的控件已经定义，并且一切都会正常工作。考虑到关闭全球化时一切正常，这确实是一个奇怪的错误。

# orientdb - OrientDB 的索引方案是什么？

> ID：10886513
> 
> 赞同：0
> 
> 时间：2012-06-04T18:44:32.320
> 
> 标签：orientdb

就像问题说的那样。您是否需要将文档添加到明确的索引中？还是自动二级索引？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T09:32:35.007

有两种索引：

*   自动，根据架构创建并自动填充。这与 RDBMS 提供的非常接近
*   手动，使用 Java API、HTTP REST 协议或使用“索引：”作为前缀而不是类名的普通 SQL 手动创建和填充。

有关更多信息，请查看：[http ://code.google.com/p/orient/wiki/Indexes](http://code.google.com/p/orient/wiki/Indexes)

# servlets - 使用正则表达式进行过滤器映射

> ID：10886516
> 
> 赞同：3
> 
> 时间：2012-06-04T18:44:41.060
> 
> 标签：servlets, servlet-filters, url-pattern

我知道我不能对过滤器映射的 url 模式使用正则表达式，但我想知道是否有可能以某种方式使用类似的东西映射过滤器`/foo/.+/*`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T00:05:54.973

不可以。通配符匹配`<url-pattern>`仅支持前缀（`/folder/*`）或后缀（`*.extension`）匹配。

如果您希望尽可能使用 Apache HTTPD 进行更细粒度的匹配`mod_rewrite`，请改用[Tuckey 的 UrlRewriteFilter](http://code.google.com/p/urlrewritefilter/)或[OCPSoft Rewrite](http://ocpsoft.org/rewrite/)。它们通过 XML 配置支持`mod_rewrite`-like 表达式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T04:48:22.583

不，Servlet 中的 URL 模式不支持正则表达式。它们只能是以下三种类型：

*   `Exact Pattern`例如，`/folder/abc.html`，`/folder/abc`
*   `Directory Pattern`例如，`/folder/abc/*`
*   `Extension Pattern`对于 Ex `*.js`,`*.reports`等

# android - MediaPlayer 准备失败 IOException

> ID：10886517
> 
> 赞同：1
> 
> 时间：2012-06-04T18:44:55.720
> 
> 标签：android, media-player, prepare

我的问题是有太多的 MediaPlayers 会导致 IOException preparefailed: status= 0x1 记录吗？

我的程序运行的方式是我为每个要播放的视频使用一个单独的媒体播放器实例。在运行结束时，我停止 videoPlayer，释放它，然后将其设置为 null；有时这没关系，但有时当我在视频之间移动太快时，我得到一个 IO 异常并且视频无法播放。我还有一个 mediaPlayer 在服务中播放一些背景音乐。

基本上，每次文件结束播放时，我的视频活动都会收到一个新呼叫。这可能是错误吗？我应该尝试用不同的文件重用同一个媒体播放器吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:40:39.913

我找到了自己的答案。我不知道这是否是一个好方法，但是：

```
if(videoFile != null)
        {
            Log.i("INITPLAYER", videoFile);
            afd = getAssets().openFd(videoFile);

            instructionVideoPlayer = new MediaPlayer();

            instructionVideoPlayer.setDataSource(afd.getFileDescriptor(), afd.getStartOffset(), afd.getDeclaredLength());

            instructionVideoPlayer.setDisplay(holder);

            instructionVideoPlayer.prepare();

            instructionVideoPlayer.setOnCompletionListener(instructionVideoComplete);
            instructionVideoPlayer.setOnPreparedListener(this);
        }
        else
            Log.i("VideoPlayer", "noVideoFile");

    } catch (IllegalArgumentException e) {
        e.printStackTrace();
    } catch (IllegalStateException e) {
        e.printStackTrace();
    } catch (IOException e) {
        Log.i(this.toString(), "IOEXception");
        e.printStackTrace();

//Here is the fix:
        instructionVideoPlayer.release();
        instructionVideoPlayer = null;
        initPlayer();
// reinit after prepare failed. although this can bring in an infinte loop if video file does not exits
    } catch (Exception e)
    {
        Log.i("InitPlayer", e.getClass().toString());
        e.printStackTrace();
    } 
```

# php - 获取没有星期五的月份中的第几天

> ID：10886519
> 
> 赞同：3
> 
> 时间：2012-06-04T18:44:58.753
> 
> 标签：php, date

我需要得到一个月的天数，但没有例如星期五。

```
$num = cal_days_in_month(CAL_GREGORIAN, $month, 2012); 
```

在这里我可以得到总天数，但我需要从计数中减去星期五。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T19:51:33.853

[我在这里](http://markmail.org/message/ogwedc3yaxtth54r)找到了一个方便的功能：

```
function num_days ($day, $month, $year) { 
    $day_array = array("Mon" => "Monday", "Tue" => "Tuesday", "Wed" => "Wednesday", "Thu" => "Thursday", "Fri" => "Friday", "Sat" => "Saturday", "Sun" => "Sunday");

    $month_array = array(1 => "Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec");

    /* * Check our arguments are valid. */

    /* * $day must be either a full day string or the 3 letter abbreviation. */ 
    if (!(in_array($day, $day_array) || array_key_exists($day, $day_array))) { 
        return 0; 
    }

    /* * $month must be either a full month name or its 3 letter abrreviation */ 
    if (($mth = array_search(substr($month,0,3), $month_array)) <= 0) { 
        return 0; 
    }

    /* * Now fetch the previous $day of $month+1 in $year; * this will give us the last $day of $month. */

    /* * Calculate the timestamp of the 01/$mth+1/$year. */ 

    $time = mktime(0,0,0,$mth+1,1,$year);
    $str = strtotime("last $day", $time);

    /* * Return nth day of month. */ 

    $date = date("j", $str);

    /* * If the difference between $date1 and $date2 is 28 then * there are 5 occurences of $day in $month/$year, otherwise * there are just 4\. */ 

    if ($date <= 28) { 
        return 4; 
    } else { 
        return 5; 
    } 
} 
```

用法：

`echo date('t', strtotime("$month 2012")) - num_days('Friday', $month, 2012);`

提供`$month`的是月份的全名（不是数字）。

# grails - 用于在页面内调用控制器的 Grails 按钮

> ID：10886522
> 
> 赞同：2
> 
> 时间：2012-06-04T18:45:17.763
> 
> 标签：grails, button

我的 gsp 有一个按钮，我没有提交表单。单击按钮时，我想在控制器中调用一个动作，同时我在该按钮上附加了一个 jQuery 代码。即使在控制器中调用了一个动作之后，也希望它保持在同一个视图中（而不是重定向到与动作相关的页面）。

对按钮有什么建议吗？g:link，输入按钮似乎不合适。

我要调用的动作是“myAction”，具有“myAction”的控制器是“myController”。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T20:18:00.953

g:remoteLink 是解决您问题的最佳方案，伙计，您在操作成功后调用调用 jquery 或 javascript 函数，这里 addedCart 是 javascript 函数，操作后它会成功执行

```
 <g:remoteLink action="remoteCart" onSuccess="addedCart()" id="${product.id}">
        <img src="<g:resource dir="images" file="cart.gif"/> " rel="#mies1"/>
    </g:remoteLink> 
```

参考：[grails 文档](http://grails.org/doc/latest/ref/Tags/remoteLink.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T18:49:24.007

jQuery .get() 函数（参见[此处](http://api.jquery.com/jQuery.get/)）将调用抽象 URL。如果您正在调用 JavaScript 函数，请添加对 .get() 或类似函数的调用（jQuery 中有许多用于调用 URL 的选项）。

# php - 使用正则表达式防止 SQL 注入？

> ID：10886525
> 
> 赞同：0
> 
> 时间：2012-06-04T18:45:26.423
> 
> 标签：php, mysql, sql, sql-injection

> **可能重复：**
> [在 PHP 中防止 SQL 注入的最佳方法](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)

我想问你我是否需要使用下面代码中的其他东西：

```
 if(isset($_POST['submit'])) {
         $username = $_POST['username'];
         $password = $_POST['password'];
         $validate = '/^[a-z]+[a-z0-9]*[.-_]*$/i';
               if ((preg_match($validate , $username)==true) && (preg_match($validate ,                                                                                     $password)==true)) {

                        some query...   
               } else {
                        echo "You've used some characters that aren't allowed.";
               }
       }else {
               echo 'Not logged!';  
       } 
```

这个正则表达式能很好地让我免于 SQL 注入吗？或者你能给我任何其他建议来让我的登录表单足够好！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T18:47:01.793

如果您的驱动程序仍然是较旧的驱动程序，则使用`mysql_real_escape_string`，或者如果您使用较新的 pdo 驱动程序或`mysqli_real_escape_string`来自 mysqli，则使用带有参数绑定的准备好的语句。

[http://php.net/manual/en/function.mysql-real-escape-string.php](http://php.net/manual/en/function.mysql-real-escape-string.php)

[http://php.net/manual/en/pdo.prepared-statements.php](http://php.net/manual/en/pdo.prepared-statements.php)

[http://php.net/manual/en/mysqli.real-escape-string.php](http://php.net/manual/en/mysqli.real-escape-string.php)

# c# - 动态添加行 我在asp.net中有下表：

> ID：10886528
> 
> 赞同：2
> 
> 时间：
> 
> 标签：c#, asp.net, html-table

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T19:08:15.517

可以使用 asp.net 表控件：

[表格控制](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.table.aspx)

例如。在 C# 代码中添加一行：

```
TableRow row = new TableRow();
                TableCell cell = new TableCell();
                cell.Controls.Add(new TextBox());
                row.Cells.Add(cell);
                table.Rows.Add(row); 
```

在您的 .aspx 页面中：

```
<asp:Table ID="table" runat="server" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T05:43:23.310

使用 Kapils 答案，但从复选框中删除 jquery 代码。使用 jquery 附加到 onclick 事件。代替复选框详细信息中的 onclick="otherDocsClicked(this)" ，为复选框添加一个类，例如。chkDoSomething 然后执行以下操作。

```
$(".chkDoSomething").live('change',function(){
     //your code goes here.
 } 
```

然后你应该能够像 Kapil 建议的那样在 c# 中添加行，并且你的 jquery 应该仍然触发

| <span">Documents:</span"> |

# c# - 给定两个字典，你如何用另一个中的项目覆盖匹配的项目，而其余项目保持不变

> ID：10886529
> 
> 赞同：0
> 
> 时间：2012-06-04T18:45:43.777
> 
> 标签：c#, .net, c#-4.0, .net-4.0

这是起始代码：

```
Dictionary<string,object> dest=...;
IDictionary<string,object> source=...;

// Overwrite in dest all of the items that appear in source with their new values
// in source. Any new items in source that do not appear in dest should be added.
// Any existing items in dest, that are not in source should retain their current 
// values.
... 
```

我显然`foreach`可以通过循环遍历源代码中的所有项目来做到这一点，但是在 C# 4.0（可能是 LINQ）中是否有一些速记方法可以做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T18:48:22.133

`foreach`是相当小的。为什么要把事情复杂化？

```
foreach(var src in source)
{
    dest[src.Key] = src.Value;
} 
```

* * *

如果你要经常重复这个，你可以写一个扩展方法：

```
public static void MergeWith<TKey, TValue>(this Dictionary<TKey,TValue> dest, IDictionary<TKey, TValue> source)
{
    foreach(var src in source)
    {
        dest[src.Key] = src.Value;
    }
}

//usage:
dest.MergeWith(source); 
```

* * *

至于“使用 LINQ”，*查询*部分意味着 LINQ 方法应该没有副作用。*对于我们这些不希望*由此产生副作用的人来说，产生副作用常常会让人感到困惑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T18:57:49.873

这个相当难看，但它可以完成工作：

```
source.All(kv => { dest[kv.Key] = kv.Value; return true; }); 
```

# magento - magento 布局 - 内容块结构和位置

> ID：10886532
> 
> 赞同：0
> 
> 时间：2012-06-04T18:45:55.440
> 
> 标签：magento, layout

这是一个magento的新手问题。

有什么方法可以查看每个 magento 主题的内容块，例如在 Joomla！在网址末尾键入“？tp = 1”时，您可以在哪里看到布局？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T19:02:55.723

Magento 中有一个功能可以让您查看布局的结构，包括模板文件名（即 .phtml）和相关的块类型。

此功能很容易在管理区域中启用：

1.  登录管理区域并转到系统 > 配置 > 开发人员。
2.  更改屏幕左上角的“当前配置范围”设置。
3.  页面重新加载后，您应该会看到一个标题为“调试”的选项卡。在此之下，您可以选择显示模板和块的提示。将两者都更改为是并访问前端。

# spring - 如何使用 Spring 验证在 UI 上显示类级别验证错误

> ID：10886536
> 
> 赞同：0
> 
> 时间：2012-06-04T18:46:08.253
> 
> 标签：spring, spring-mvc

我正在使用休眠验证（JSR 303）验证我的 bean。我的所有验证都在工作，我能够使用以下代码在 UI 上成功显示它们

```
<spring:bind path="lastName">
  <c:if test="${status.error}">
    <li>${status.errorMessage}</li>
</c:if>
</spring:bind> 
```

我面临一个适用于班级级别的验证问题

```
@EqualAttributes(message = "{validation.checkPwd.equals}", value =
{ "pwd", "checkPwd" })
public class RegisterForm
{
  //bean class
} 
```

我不确定如何在 UI 上显示与此验证相关的错误消息，因为我很困惑我应该绑定哪个字段

任何人都可以引导我走向正确的道路吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T18:53:24.700

```
<spring:bind path="registerForm"> 
```

或“命令”，或您用来绑定对象的任何名称。

# php - PHP：嵌套数组的foreach循环内的foreach循环

> ID：10886537
> 
> 赞同：1
> 
> 时间：2012-06-04T18:46:09.963
> 
> 标签：php

我使用嵌套数组向用户报告表单错误，因为表单有不同的组，我想这样显示错误：

```
 echo "<ul>\n";
        foreach ($errors as $error) {
            if (is_array($error)) {
                echo "Item ".$i." error(s):\n";
                echo "<ul>\n";
                foreach ($error as $itemError) {
                    echo "<li>".$ItemError."</li>\n";
                }
                echo "</ul>\n";
            } else {
                echo "<li>".$error."</li>\n";
            }
            $i++;
        }
        echo "</ul>"; 
```

嵌套数组被识别但是嵌套数组中的项目不显示，所以我得到一个空的子列表回显。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T18:49:31.133

检查变量的大小写：`$itemError`/`$ItemError`

# jsf - JDeveloper 11.1.1.6 安装后 commandLink submitForm 错误

> ID：10886538
> 
> 赞同：0
> 
> 时间：2012-06-04T18:46:11.950
> 
> 标签：jsf, jdeveloper, oracle-adf

我安装了 JDeveloper 11.1.1.6 并打开了一个最初在 11.1.1.5 中创建的简单测试项目。现在，当单击 JSF commandLink (h:commandLink) 时，我在 Web 浏览器控制台中收到以下错误：

未捕获的 ReferenceError：未定义 submitForm

我的 web.xml 包含以下条目：

```
 <servlet>
    <servlet-name>resources</servlet-name>
    <servlet-class>org.apache.myfaces.trinidad.webapp.ResourceServlet</servlet-class>
  </servlet>
  ...
  <servlet-mapping>
    <servlet-name>resources</servlet-name>
    <url-pattern>/adf/*</url-pattern>
  </servlet-mapping> 
```

集成 Weblogic 的版本为 10.3.5。

此应用程序中没有引用外部或自定义 JavaScript。

有没有人经历过这种行为并找到了解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T05:45:04.413

OTN 上的 JDeveloper 论坛上提供的解决方案：[https ://forums.oracle.com/forums/thread.jspa?messageID=10389015](https://forums.oracle.com/forums/thread.jspa?messageID=10389015)

简而言之：使用 af:commandLink

坦率

# php - 为什么从 cron 作业调用 PHP_SAPI 不等于“cli”？

> ID：10886539
> 
> 赞同：24
> 
> 时间：2012-06-04T18:46:13.083
> 
> 标签：php, linux, cron, cgi

这是我的 cron 工作中的一行...

```
*/5 * * * * php /home/user/public_html/index.php --uri=minion --task=emailassets 
```

当我的脚本从此 cron 作业运行时，PHP 常量**PHP_SAPI**等于“cgi-fcgi”。为什么**PHP_SAPI**不等于 'cli'？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2020-01-16T06:45:36.037

From [php.net manual](https://www.php.net/manual/en/function.php-sapi-name.php):

The `php_sapi_name()` function is extremely useful when you want to determine the type of interface. There is, however, one more gotcha you need to be aware of while designing your application or deploying it to an unknown server.

Whenever something depends on the type of interface, make sure your check is conclusive. Especially when you want to distinguish the command line interface (CLI) from the common gateway interface (CGI).

Note, that the **php-cgi** binary can be called from the command line, from a shell script or as a Cron Job as well! If so, the `php_sapi_name()` will always return the same value (i.e. "`cgi-fcgi`") instead of "`cli`" which you could expect.

Do not always expect */usr/bin/php* to be a link to **php-cli** binary.

Luckily the contents of the `$_SERVER` and the `$_ENV` superglobal arrays depends on whether the **php-cgi** binary is called from the command line interface (by a shell script, by the Cron Job, etc.) or by some HTTP server (i.e. Lighttpd).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-26T18:14:01.953

所有的功劳都归功于@mopsyd，但由于唯一的答案没有提供解决方案，我想在这里发布这个，以便它易于阅读，而不必查看评论。

**tl;dr：您安装了 cPanel，它用 Perl 脚本替换 PHP 二进制文件。**

**使用 /usr/local/bin/php 而不是 /usr/bin/php。**

你可以这样测试：

```
$ diff /usr/bin/php /usr/local/bin/php
2c2
< # cpanel - php-cgi                                 Copyright 2018 cPanel, L.L.C.
---
> # cpanel - php-cli                                 Copyright 2018 cPanel, L.L.C.
7c7
< package ea_php_cli::cgi;
---
> package ea_php_cli::cli;
19c19
< my $bin = "php-cgi";
---
> my $bin = "php"; 
```

如您所见，/usr/bin/php 用于 CGI 请求，/usr/local/bin/php 用于 CLI 命令。

# arrays - Arduino：如何在一行中将值存储在 char 数组中，然后清除/清空 char 数组？

> ID：10886542
> 
> 赞同：1
> 
> 时间：2012-06-04T18:46:22.333
> 
> 标签：arrays, serial-port, char, arduino

我正在尝试编写代码来存储来自串行终端的 { 和 } 之间的命令文本。到目前为止，我有：

```
byte index = 0; // Index into array; where to store the character
char cmdArr[10];

boolean startOfLine = false;
boolean endOfLine = false;

void setup()
{
  Serial.begin(38400);
}

void serialEvent()
{
  while (Serial.available())
  {
    char cmd = (char)Serial.read();

    if (cmd == '{')
    { 
      startOfLine = true;
    }

    if (cmd == '}')
    { 
      endOfLine = true;
      //cmdArr[index] = '\0'; //null terminate the C string; I'm not sure if this is needed
    }

    if (startOfLine && cmd != '{'  && cmd != '}')
    {
      cmdArr[index++] = cmd;
    }

    if (startOfLine && endOfLine)
    {
      int i;

      for (i = 0; i < 10; i++)
      {
        //Do something with the command
      }

      startOfLine = false;
      endOfLine = false;
      break;
    }
  }
}

void loop()
{ 
} 
```

我能够遍历 cmdArr 以打印出数组值。例如，现在命令存储如下： char cmdArr[10] = {'p', 'h', 'c', '\0'}; 是否可以存储 char cmdArr[10] = {"phc"}; 之类的命令？另外，我将如何清除/清空该命令以准备下一个命令？

**似乎正在运行的新代码。我求助于使用字符串，因为它似乎是最简单的方法：**

```
String cmdData; //Store the complete command on one line to send to sensor board.

boolean startOfLine = false;
boolean endOfLine = false;

void setup()
{
  Serial.begin(38400);
  Serial3.begin(38400);
}

void serialEvent()
{
  while (Serial.available())
  {
    char cmd = (char)Serial.read();

    if (cmd == '{')
    { 
      startOfLine = true;
    }

    if (cmd == '}')
    { 
      endOfLine = true;
    }

    if (startOfLine && cmd != '{'  && cmd != '}')
    {
      //Serial.print("Send command");
      cmdData += cmd;
    }

    if (startOfLine && endOfLine)
    { 
      startOfLine = false;
      endOfLine = false;

      cmdData += '\r';

      Serial3.print(cmdData);

      cmdData = "";
    }
  }
}

void serialEvent3()
{
  char cmd3 = (char)Serial3.read();
  Serial.print(cmd3);
}

void loop()
{ 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T21:50:07.930

cmdArr 是一个连续的内存块。从某种意义上说，数据已经作为“phc\0”存储在那里。您应该能够使用 cmdArr 作为指针，以便能够将数据打印为字符串，而不是一个一个地访问字符（不过，您也可以使用指针一个一个地访问字符）。在您的解决方案中，我认为您不需要清除数组。将索引设置为 0 并确保在编写所有字符时使用 \0 终止字符串（您已经在执行的操作）就足够了。C 中的字符串以零结尾。如果要在循环中一一处理内容，如果遇到零，则需要退出循环。

# mysql - MySQL IF NOT EXISTS / IFNULL SELECT 其他列

> ID：10886543
> 
> 赞同：0
> 
> 时间：2012-06-04T18:46:25.363
> 
> 标签：mysql, select, if-statement, exists, ifnull

我想检查是否存在列（mysql）。如果没有，mysql 应该从肯定存在的列中获取值。我的查询看起来像这样，但它不起作用：

```
IF NOT EXISTS (SELECT `en` FROM `HP_strings` 
               WHERE `name`='copyright' AND `group`='system')
THEN
    SELECT `default` FROM `HP_strings` 
    WHERE `name`='copyright' AND `group`='system'; 
```

我也试过

```
IFNULL((SELECT `en` FROM `HP_strings` 
        WHERE `name`='copyright' AND `group`='system'),
(SELECT `default` FROM `HP_strings` 
 WHERE `name`='copyright' AND `group`='system')); 
```

结果相同（错误）

编辑：“en”不存在。我想知道，如果它存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T19:06:29.227

要检查 MySQL 中的表结构，您必须查询`information_schema`数据库。为此，您的 db 用户必须有权访问该系统数据库（普通用户不应该拥有）。

我不知道您要做什么，但您可能应该重新考虑您的数据库结构，这样就不需要检查表中是否存在列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T18:55:14.840

尝试这个：

```
SELECT `default` FROM `HP_strings` where isnull(`en`) and `name`='copyright' 
AND `group`='system' 
```

**编辑：（根据您的评论）**

您可以从 DB 模式检查表中是否确实存在列，如下所示……但我认为您不能像您打算的那样在查询中进行操作。

```
SELECT *  FROM information_schema.COLUMNS  
WHERE TABLE_SCHEMA = 'db_name'  
AND TABLE_NAME = 'table_name'  
AND COLUMN_NAME = 'column_name' 
```

# windows - 如何在 Windows 上引用特定硬盘驱动器？

> ID：10886546
> 
> 赞同：1
> 
> 时间：2012-06-04T18:46:34.300
> 
> 标签：windows, eclipse, git, portability, egit

我正在尝试在我的便携式 Eclipse 应用程序上配置 EGit。然后我还需要在我的 USB 驱动器上安装 PortableGit。

之后，我尝试从 Eclipse 的首选项中引用系统设置。我可以管理它的方法是将其设置为 'G:\programs\PortableGit-1.7.10-preview20120409\etc\gitconfig'

问题是当我在不同的系统上使用它时，我的 USB 可能不在 G: 中。

也许还有另一种方法可以通过 UUID 或其他方式确定 Windows 的驱动器名称，有人知道吗？

或者我会使用相对路径。假设 Eclipse 在 'G:\programs\eclipse-SDK-3.7.2-win32\eclipse\eclipse.exe' 中，它应该与 '..\..\PortableGit-1.7.10-preview20120409\etc\gitconfig' 一起使用， 对？但事实证明并非如此。它将自己设置为完整路径。

我很迷失在这里。为什么不像/media/USBdrive那么简单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T23:56:11.153

您可以使用设置 PATH 的脚本从驱动器启动 Eclipse，以便 git 可执行文件在其中。然后 Eclipse 会在启动时找到 Git 并从中推断出 $prefix 。

# android - 带有 wrap_content 的 onMeasure 采用的参数不是 Integer.MIN_VALUE

> ID：10886549
> 
> 赞同：0
> 
> 时间：2012-06-04T18:46:39.450
> 
> 标签：android, android-layout

在我的xml中，我为宽度和高度指定了wrap_content，但是当我覆盖onMeasure函数时，传递给它的宽度和高度是-2147483348，奇怪的是300> Integer.MIN_VALUE，这是有原因的吗？如果我里面没有任何东西，为什么它不是 integer.MIN_VALUE 或 0。顺便说一句，这是我正在制作的自定义视图，所以我相信我必须执行 setMeasuredDimension。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T18:52:52.773

的参数`onMeasure`不是可用的宽度和高度，而是可用宽度和高度的编码以及关于应该如何使用这些值的标志。您使用类解码它们[`View.MeasureSpec`](http://developer.android.com/reference/android/view/View.MeasureSpec.html)：

```
protected void onMeasure(int widthSpec, int heightSpec) {
    final int widthMode = MeasureSpec.getMode(widthSpec);
    final int widthSize = MeasureSpec.getSize(widthSpec);
    // etc.
} 
```

模式将是`AT_MOST`、`EXACTLY`或之一`UNSPECIFIED`。请参阅文档以了解您应该如何使用它。特别是，如果模式不是，则在调用`UNSPECIFIED`时*不得*使用大于该维度大小的值`setMeasuredDimension`。

# javascript - 绘制正方形 1 英里 x 1 英里

> ID：10886555
> 
> 赞同：0
> 
> 时间：2012-06-04T18:47:12.973
> 
> 标签：javascript, google-maps, google-maps-api-3

我正在使用 Google Maps API V3 绘制 1 英里乘 1 英里的正方形。

**问题：**从[API 参考](https://developers.google.com/maps/documentation/javascript/reference#RectangleOptions)中，该`bounds`属性可用于定义矩形对象的大小，但根据 LatLng 坐标。给定一个特定点的 LatLng，我们如何绘制一个 1 英里乘 1 英里或 1 公里乘 1 公里的矩形？

**更新：**我想做的是将一个州划分为 10 英里乘 10 英里的正方形。它不需要非常精确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T18:57:15.750

您应该记住，地球表面是弯曲的；不可能真正将其划分为正方形。构成谷歌地图的方块底部比顶部长。这将使您的地图更加复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T18:53:50.067

您可以将英里或公里转换为纬度或经度的差异。该网页提供了 javascript 代码。 [http://www.movable-type.co.uk/scripts/latlong.html](http://www.movable-type.co.uk/scripts/latlong.html)

或者，更简单：一个纬度在地球上的任何地方几乎是 69 英里，所以 10 英里将是 ~0.1449 度。“经度”度数因您所在的纬度而异。你应该计算它：

以英里为单位的一度距离 = (PI/180) * 3,963 * cos(纬度)

只要您保持矩形相对较小，地球是一个球体的事实就不应该有很大的不同。土木工程师通常将他们的工作基于平面地球理论，因为在大多数情况下它已经足够好了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T20:54:00.687

下面的链接让你计算纬度/经度给定的径向和距离已知点 [http://williams.best.vwh.net/gccalc.htm](http://williams.best.vwh.net/gccalc.htm)，我相信它是上述链接的简化版本

假设您拥有的纬度和经度是中心，您可以找到矩形的角，半径为 45,135,225,315，距离为 5 英里。

希望这可以帮助。

# javascript - 如何显示输入按钮并关闭当前窗口

> ID：10886556
> 
> 赞同：0
> 
> 时间：2012-06-04T18:47:13.977
> 
> 标签：javascript, ajax

我有一个使用 ajax 的服务调用，我想如果 ajax 调用一切顺利，以在我的页面上启用或显示一个输入（可能在一个 div 中？），单击它会关闭当前窗口。使用javascript执行此操作的最佳方法是什么？

这是我的 javascript 类的功能：

```
MyFunction.prototype.init = function(param1, param2) {

    this.MyParams = new Hash();
    this.MyParams.set("param1", param1);
    this.MyParams.set("param2", param2);

    new Ajax.Request('MyService.asmx/MyServiceFunction', {
        method: 'post',
        onSuccess: //how can i do what i mentioned here?,
        onFailure: failureFunc,
        onException: ajaxError,
        parameters: this.MyParams
    });
} 
```

任何帮助将非常感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T18:57:54.960

在这`onSuccess`部分你必须把这样的东西：

```
OnSuccess: function() {
   $('div_to_show').show();
} 
```

在 HTML 部分中，您将拥有以下内容：

```
<div id="div_to_show">
   <input type="button" name="close" id="close" value="close" onclick="javascript:window.close();" />
</div> 
```

当然，您必须在文档加载时隐藏 div。

# android - 使用 Roboguice 注入没有默认构造函数的依赖项

> ID：10886558
> 
> 赞同：1
> 
> 时间：2012-06-04T18:47:27.823
> 
> 标签：android, roboguice

如果我有一个带有单个构造函数的类，我怎样才能让 Roboguice 将它注入到活动中？

要注入的服务：

```
public FlightManager(Context context){
    //do something with the context
} 
```

活动：

```
public class recordFlight extends RoboActivity {

    @InjectResource FlightManager manager;

  //whatever code here
} 
```

唯一的依赖是上下文，我收集到的应该毫无问题地注入。此外，我所有的其他用法，例如带有默认构造函数的类的@InjectView 和@Inject 似乎都很好，但是上面的用法甚至没有给我一个堆栈跟踪就杀死了应用程序。

有任何想法吗？

谢谢

乔恩

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T18:55:22.587

使用 @Inject 注释标记构造函数：

```
@Inject
public FlightManager(Context context){
    //do something with the context
} 
```

然后像这样注入 FlightManager：

```
public class recordFlight extends RoboActivity {

    @Inject FlightManager manager;

    //whatever code here
} 
```

@InjectResource 在这里不是必需的，因为它是您要注入的常规 Java 类，而不是 Android 资源。

# c# - 将简单 json 绑定到 MVC 表单集合

> ID：10886559
> 
> 赞同：0
> 
> 时间：2012-06-04T18:47:46.037
> 
> 标签：c#, json, asp.net-mvc-3, data-binding, knockout.js

我正在尝试将一个简单的 json 对象（只是键值对）绑定到 MVC 表单集合或类似的东西

JavaScript：

```
function CMSModel() { 
    var self = this;

    self.Enable = ko.observable(true);
    self.CMSAddress = ko.observable();
    self.CMSAddressExtension = ko.observable();
    self.Username = ko.observable();
    self.Password = ko.observable();
    self.Protocol = ko.observable();
    self.Port = ko.observable();
    self.Interval = ko.observable();
    self.Area = "CMS";

    self.SubmitCMS = function () {

        //Validate numbers

        $.ajax({
            url: "/config/@Model.Model/" + self.Area,
            contentType: "application/json",
            type: "POST",
            success: function (result) {
                alert(result);
            },
            error: function (result) {
                alert(result);
            },
            data: ko.toJSON(self)

        });
    }
 } 
```

这就是我在 MVC 方面想要的：

```
 public ActionResult CMS(FormCollection fc)
    {
        return View();
    } 
```

杰森：

```
{"CMSAddress":"asdf","CMSAddressExtension":"asf","Username":"asdf","Password":"asdf","Protocol":"HTTP","Port":"123","Interval":"123","Area":"CMS"} 
```

我试图弄清楚如何将一个简单的 json 键值对自动绑定到表单集合。我不想创建一个对象来绑定 json，因为我需要更灵活地根据其他一些信息动态创建它们。

想我怎么能做到这一点？

任何事情都非常感谢，

马修

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T19:35:02.153

看来您需要创建一个自定义活页夹，它会自动将数据绑定到 IDictionary。

粘合剂

```
public class DictionaryModelBinder : DefaultModelBinder
{
    public override object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        //get the posted JSON
        var request = controllerContext.HttpContext.Request;
        var jsonStringData = new StreamReader(request.InputStream).ReadToEnd();
        //use newtonsoft.json to deserialise the json into IDictionary
        return JsonConvert.DeserializeObject<IDictionary<string,string>>(jsonStringData);
    }
} 
```

您应该在 Global 中为 IDictionary<> 类型注册活页夹。还有其他方法可以注册活页夹。

```
protected void Application_Start()
{
    ...other logic
    ModelBinders.Binders.Add(typeof(IDictionary<string, string>), 
                              new DictionaryModelBinder());
    ...other logic
} 
```

最后，您应该能够使用 IDictionary<>。这将绑定到您将从 ajax 传递的所有属性

```
 public ActionResult YourAction(IDictionary<string, string> values)
    {
        ... your logic here
    } 
```

# javascript - Javascript - 按类获取跨度？

> ID：10886565
> 
> 赞同：3
> 
> 时间：2012-06-04T18:48:08.997
> 
> 标签：javascript, html

> **可能重复：**
> [如何在 JavaScript 中按类获取元素？](https://stackoverflow.com/questions/3808808/how-to-get-element-by-class-in-javascript)

我需要从跨度内部获取文本。跨度没有 ID。它只有一个类。这个类只有一个跨度。有谁知道我如何在 javascript 中获取这个 span 元素？谢谢！

```
<span class="galleria-current">1</span> 
```

这与如何在 JavaScript 中按类获取元素略有不同[？](https://stackoverflow.com/questions/3808808/how-to-get-element-by-class-in-javascript)这是问更通用的“获取一个带有类的元素”，以防跨度有更简单的方法，加上这个问题是关于替换文本，而在这种情况下我想*获得*innerHTML。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-04T18:50:22.087

是的，您可以使用`document.getElementsByClassName()`.

这将返回具有该类名的所有元素的数组。所以第一个可以像这样访问：

`var span = document.getElementsByClassName("galleria-current")[0]`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-04T18:51:50.340

```
function getFirstSpanWithClass(cssClass) {
    var elements = document.getElementsByTagName('span');
    for (var i = 0; i < elements.length; i++) {
        if((' ' + elements[i].className + ' ').indexOf(' ' + cssClass + ' ') > -1) {
            return elements[i];
        }
    }
}

var span = getFirstSpanWithClass('galleria-current'); // should return your span element.
if (span){
    // in case there is a span on the page, write its innerHTML to console
    console.log(span.innerHTML);
} 
```

以及一个将为您提供所有这些的示例：

```
function getSpansWithClass(cssClass) {
    var elements = document.getElementsByTagName('span');
    var out = [];
    for (var i = 0; i < elements.length; i++) {
        if((' ' + elements[i].className + ' ').indexOf(' ' + cssClass + ' ') > -1) {
            out.push(elements[i]);
        }
    }
    return out;
} 
```

# javascript - 使用 Javascript 创建变量数组（动态，下拉）

> ID：10886567
> 
> 赞同：0
> 
> 时间：2012-06-04T18:48:14.313
> 
> 标签：javascript, arrays, menu

我已经搜索了一段时间（这里和谷歌），似乎找不到我在找的东西。（对不起，如果我错过了它，这是一个烦人/多余的问题。）

我正在研究基于先前选择的变量将具有大量下拉列表的表单。我试图想出一种比创建单个字段然后根据选择隐藏/显示更简单的方法。最终，我的目标是创建一个具有 3-5 级菜单的“树”。（客户在做，不是我的。）

逻辑是什么样子的：
变量：type, offer1, offer2, insert1, insert2, insert3,...
其中 [type] 确定 [offer1,2] 每个最多有 3 个变量 [insert1,2,3...]

因此，如果用户选择类型 A：Offer1 = Array A (Insert1 = ArrayA1, Insert2 = ArrayA2, Insert3 = null) 和 Offer2 = Array B (Insert4 = ArrayB4, Insert5 = null); 等等等等。

到目前为止，我发现的一切似乎都只处理第一层，而 JS 并不是我的强项。任何指向正确方向的人都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T17:57:08.253

万一其他人遇到这个问题，我发现这个使用 JQuery 的解决方案：http: [//www.appelsiini.net/projects/chained](http://www.appelsiini.net/projects/chained)

# sql-server - 如何像在 T-SQL 中一样在 PL/SQL 中声明和使用变量？

> ID：10886568
> 
> 赞同：34
> 
> 时间：2012-06-04T18:48:15.670
> 
> 标签：sql-server, oracle, tsql, plsql, oracle-sqldeveloper

在 Sql Server 中，我经常在测试存储过程的主体时，将主体复制到 SSMS 中，在页面顶部声明变量，将它们设置为一些示例值，然后按原样执行主体。

例如，如果我的 proc 是

```
CREATE PROC MySampleProc
    @Name   VARCHAR(20)
AS
    SELECT @Name 
```

然后我的测试 sql 将是

```
DECLARE @Name VARCHAR(20)
SET     @Name = 'Tom'

    SELECT @Name 
```

与此等效的 Oracle PL/SQL 是什么？

这是我想出的最接近的，但我得到“PLS-00428：此 SELECT 语句中应有一个 INTO 子句”

```
DECLARE
   myname varchar2(20);
BEGIN
     myname := 'Tom';

     select myname from DUAL;
END; 
```

这是我真正想做的一个更好的例子：

```
DECLARE
   myname varchar2(20);
BEGIN
     myname := 'Tom';

     SELECT *
     FROM   Customers
     WHERE  Name = myname;
END; 
```

但同样，它需要一个“INTO”，而我真的只想将记录打印在屏幕上，而不是存储在另一个表中......

解决：

感谢@Allan，我已经让它运行得很好。Oracle SQL Developer 显然会记住您提供给它的参数值。然而，PL/SQL Developer 不想与此有任何关系......

![在此处输入图像描述](../Images/21a45dde574f8f6ba05a297055749db7.png)

如果您“以脚本方式运行”，它将遵循您的默认设置，但它只会以 ASCI 文本的形式返回结果，而不是在网格/电子表格中

![在此处输入图像描述](../Images/5c8c3d765f499a1046ad1807d95c2862.png)

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-04T19:53:10.733

**修订答案**

如果您不是从另一个程序调用此代码，则可以选择跳过 PL/SQL 并使用绑定变量在 SQL 中严格执行：

```
var myname varchar2(20);

exec :myname := 'Tom';

SELECT *
FROM   Customers
WHERE  Name = :myname; 
```

在许多工具（例如 Toad 和 SQL Developer）中，省略`var`and`exec`语句会导致程序提示您输入值。

* * *

**原始答案**

T-SQL 和 PL/SQL 之间的一个很大区别是 Oracle 不允许您隐式返回查询结果。结果总是必须以某种方式显式返回。最简单的方法是使用`DBMS_OUTPUT`（大致相当于`print`）输出变量：

```
DECLARE
   myname varchar2(20);
BEGIN
     myname := 'Tom';

     dbms_output.print_line(myname);
END; 
```

但是，如果您尝试返回结果集，这并不是很有帮助。在这种情况下，您可能想要返回一个集合或一个引用。但是，使用这些解决方案中的任何一个都需要将您的代码包装在一个函数或过程中，并从能够使用结果的东西中运行该函数/过程。以这种方式工作的函数可能如下所示：

```
CREATE FUNCTION my_function (myname in varchar2)
     my_refcursor out sys_refcursor
BEGIN
     open my_refcursor for
     SELECT *
     FROM   Customers
     WHERE  Name = myname;

     return my_refcursor;
END my_function; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-04T20:26:53.540

在 Oracle PL/SQL 中，如果您正在运行可能返回多行的查询，则需要一个游标来遍历结果。最简单的方法是使用 for 循环，例如：

```
declare
  myname varchar2(20) := 'tom';
begin
  for result_cursor in (select * from mytable where first_name = myname) loop
    dbms_output.put_line(result_cursor.first_name);
    dbms_output.put_line(result_cursor.other_field);
  end loop;
end; 
```

如果您有一个只返回一行的查询，那么您可以使用以下`select...into...`语法，例如：

```
declare 
  myname varchar2(20);
begin
  select first_name into myname 
    from mytable 
    where person_id = 123;
end; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T19:02:14.290

变量没有定义，而是声明。

这可能与[pl/sql 块中的声明变量重复](https://stackoverflow.com/questions/8469301/declare-variables-in-a-pl-sql-block)

但你可以看这里：

[http://docs.oracle.com/cd/B19306_01/appdev.102/b14261/fundamentals.htm#i27306](http://docs.oracle.com/cd/B19306_01/appdev.102/b14261/fundamentals.htm#i27306)

[http://docs.oracle.com/cd/B19306_01/appdev.102/b14261/overview.htm](http://docs.oracle.com/cd/B19306_01/appdev.102/b14261/overview.htm)

更新：

请参阅此处：[如何从执行动态 SQL 的 Oracle PL/SQL 匿名块返回结果集/游标？](https://stackoverflow.com/questions/2153053/how-to-return-a-resultset-cursor-from-a-oracle-pl-sql-anonymous-block-that-exe)

# php - php。字典数据结构，（整数，字符串）作为键

> ID：10886569
> 
> 赞同：1
> 
> 时间：2012-06-04T18:48:16.207
> 
> 标签：php

在 python 字典中可以使用元组作为键。所以我可以将下一个组合用作关键组合：`(integer, string)`. 我想在 PHP 中做同样的事情。标准[PHP 数组](http://us2.php.net/manual/en/language.types.array.php)只能使用字符串或整数。[SplObjectStorage](http://www.php.net/manual/en/class.splobjectstorage.php)仅使用对象作为键。

如何在 PHP 中获得相同的功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T18:52:20.490

简单的答案是你不能。功能等效但应该很简单：

```
$array["$int,$str"] 
```

或者也许是一个多维数组：

```
$array[$int][$str] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T18:55:57.610

PHP 没有任何元组数据类型，但您可以轻松制作一个包装器，将 int 和字符串组合成仅字符串表示：

```
function t($num, $str) { // t for tuple
  return $num . ', ' . $str;
}

$array[t(15, "hello")] = $random_data; 
```

# html - DB 不会从 Chrome 中使用 file:/// 的链接打开

> ID：10886571
> 
> 赞同：2
> 
> 时间：2012-06-04T18:48:18.590
> 
> 标签：html, file-uri

有问题的链接代码：

```
<a href="file:///G:\Fileshare\General\PO_Database\PO.mdb">Purchase Order Database</a> 
```

在 IE 中打开就好了......为什么不能在 FF 或 Chrome 中打开？有解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T19:30:37.980

**此问题是由 Chrome 和 Firefox 中的默认安全设置引起的。**

为了让 Chrome 在下载后自动打开 *.mdb 文件，请执行以下步骤：

1）第一次，告诉浏览器你要保留文件

![告诉 Chrome 保留文件类型](../Images/86e5fac9487fbfc5696e2005a5a41b88.png)

2）告诉浏览器你想从现在开始自动打开文件

![告诉 Chrome 自动打开文件类型](../Images/4f9842306c074b306d4349f42343675d.png)

3) 在第 2 步之后，您会在 Chrome 设置中看到“清除自动打开设置”的新按钮

![清除 Chrome 中的自动打开设置按钮](../Images/77f2a3c9b1716c3e81f60befc671d9ba.png)

4) 将文件扩展名与 Microsoft Access 程序相关联

![将文件扩展名与程序相关联](../Images/f275b48191532c15295629bb8a8dacbb.png)

# salesforce - 批量更新案例状态 - Salesforce

> ID：10886573
> 
> 赞同：0
> 
> 时间：2012-06-04T18:48:22.130
> 
> 标签：salesforce

我正在寻找一种方法来批量更新案例状态并留下成功消息或带有失败案例 ID 的失败消息。我目前有更新或案例的验证规则和触发器。但我需要在错误消息中至少显示第一个失败的案例 ID。

有没有办法将变量放入验证规则错误消息中？还是它的明确字符串？

我目前使用验证规则，但我无法在错误消息中显示失败的情况，因为我无法在错误消息中放入变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T19:55:30.320

检查此链接它可能对您有帮助[http://appexchange.salesforce.com/listingDetail?listingId=a0N30000003IleFEAS](http://appexchange.salesforce.com/listingDetail?listingId=a0N30000003IleFEAS)

在这种情况下，您需要使用 before 触发器，并比较更新前后的选定案例列表。

或者您可以创建一个自定义按钮并将其添加到页面并运行所需的 javascript 以检查之前和之后发生的变化。

像这样的东西：

```
{!REQUIRESCRIPT("/soap/ajax/13.0/connection.js")} 

var idArray = {!GETRECORDIDS($ObjectType.Case)}; 
var err = []; 
var caseObj; 

for (i=0; i< idArray.length ; i++){ 
    caseObj = new sforce.SObject("Case"); 
    caseObj.Id = idArray[i]; 
    caseObj.Status = *** //change status here;
    var result = sforce.connection.update([caseObj]); 

    if (result[0].success=='false') { 
        err.push("\n"+result[0].errors.message + " Case ID "+idArray[i]); 
    } 

} 

if(err.length >0) 
{     
    alert(" The following cases have failed to change status: \n\n" +err); 
} 

location.reload(true); 
```

# python-3.x - Python 3.2 拆分列表中的字符串值

> ID：10886575
> 
> 赞同：-1
> 
> 时间：2012-06-04T18:48:30.170
> 
> 标签：python-3.x

我有一个如下列表：

```
rawinput = ['corp\\asre', 'corp\\banjar', 'corp\\bicknk', 'corp\\daniele'] 
```

我希望能够做到

```
users = []
users = rawinput.split(",")
print(users) 
```

我如何在 Python 3.2 中做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T18:57:20.517

你有什么，

`rawinput = ['corp\\asre', 'corp\\banjar', 'corp\\bicknk', 'corp\\daniele']`

已经是一个字符串列表。您可以将其作为列表进行迭代。你不需要拆分任何东西。

如果你有这样的事情，

`rawinput = "corp\\asre, corp\\banjar, corp\\bicknk, corp\\daniele"`

`rawinput.split(',')`将返回上述列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T18:08:15.157

`split()`应用于字符串，作为回报，它会为您提供一个 list[]，其中包含子字符串作为按父字符串顺序排列的元素。

在你的情况下：

```
input = "corp\\asre, corp\\banjar, corp\\bicknk, corp\\daniele"
input.split(',') 
```

将返回 `['corp\\asre', 'corp\\banjar', 'corp\\bicknk', 'corp\\daniele']`

# c# - C#如何做运行时泛型？

> ID：10886577
> 
> 赞同：1
> 
> 时间：2012-06-04T18:48:40.623
> 
> 标签：c#, java, generics, runtime

Java 让我恼火的一件事是泛型类型参数的编译时翻译的糟糕实现。

我可以观察并理解 C# 实现要好得多，但我对它的工作原理感到困惑。

本质上，你怎么能说：

```
T t = new T() 
```

如果您不知道 T 的类型，因此不知道构造函数参数要求？

我可以看到

```
Class<T> cl = T.class 
```

或者

```
T[] tarr = new T[0] 
```

但是如果您不知道构建它的要求，我看不出如何真正创建 T 的新实例？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T18:50:52.120

只有`new T();`当 T 被限制为具有普通的、无参数的公共构造函数时，您才能这样做，例如：

```
public class Foo<T> where T : new() {
    private myT = new T();
} 
```

此外，无法指定是否存在任何其他类型的构造函数。这是不可能的：

```
// Doesn't work
public class Foo<T> where T : new(String, Int) {
    private myT = new T("Foo", 5);
} 
```

对于您的其他观点，这是您在运行时获取 T 类型的方式：

```
var tType = typeof(T); 
```

并且创建一个数组`T`实际上并不会创建任何实例（除非`T`是值类型，在这种情况下，它会创建该类型的默认值）：

```
// Space for 32 T's, but nothing in the array.
// If T is a value type, like an int for instance, 
// each one would have the default value (0 for int, for example)
var arrayOfT = new T[32]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T18:51:12.410

实际上，您要求编译器强制`T`使用无参数构造函数，以便他知道您可以`new T()`。例如：

```
class Test<T>
{
    T Create()
    {
        return new T();
    }
} 
```

它不会编译，因为编译器不能确定它`T`不是一个抽象类并且它有一个默认的构造函数。为了使它起作用，你必须在 T 的真实类型上添加一个约束：

```
class Test<T> where T : new() 
```

现在编译器将强制`T`成为具有默认构造函数的非抽象类。例如，此代码无效，因为给定类型是抽象的：

```
abstract class AnotherTest
{
    public void Test()
    {
        Test<Derived> test = new Test<Derived>();
    }
} 
```

同样，如果您尝试使用没有默认构造函数的类，编译器将发出错误：

```
class AnotherTest
{
    public AnotherTest(string someParameter)
    {
    }

    public void Test()
    {
        Test<Derived> test = new Test<Derived>();
    }
} 
```

对于数组，它有点不同。实际上，您只需要求编译器为给定数量的插槽保留内存，您不会为该对象分配内存（在引用类型的情况下，它只会放在`null`每个插槽中）。

**MSDN 上的参考资料**

*   [泛型简介](http://msdn.microsoft.com/en-us/library/0x6a29h6.aspx)
*   [泛型类型约束](http://msdn.microsoft.com/en-us/library/bb384067.aspx)
*   [`new`约束_](http://msdn.microsoft.com/en-us/library/sd2w2ew5.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-04T18:51:40.713

你不能说`new T()`除非你使用约束来约束你的泛型类型有一个无参数的构造函数`where T : new()`——参见[类型参数的约束](http://msdn.microsoft.com/en-us/library/d5x73970.aspx)。

并且没有“构造函数参数要求”，因为唯一支持的构造函数是无参数构造函数。比如说，你不能使用`new T(false)`——形式的约束`where T : new(bool)`是不允许的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T21:17:57.347

`new T()`只是一个语法糖`Activator.CreateInstance<T>()`

# python - 在 Python 中编辑文本文件时出现奇怪的错误

> ID：10886581
> 
> 赞同：0
> 
> 时间：2012-06-04T18:49:09.483
> 
> 标签：python, text, file-io

我正在使用一个文本文件来存储我正在制作的神经网络的权重，但是我在编辑存储在这个文本字段中的权重时遇到了严重的问题。本质上，我正在制作一个非常常规格式的文件：Word + \t + Weight + \n，然后我使用以下代码运行此文本文件并获取部分：

```
with open(Neuron_File, 'r+') as Original_Neurons:
            for Neuron in Original_Neurons:
                Word_Stem = re.sub(r'^([a-z-]*)([\t]?)([0-9.]*)(\n)$', r'\1', Neuron)
                Weight = float(re.sub(r'^([a-z-]*)([\t]?)([0-9.]*)(\n)$', r'\3', Neuron)) 
```

这是可行的，但是我希望能够更改权重的值，并将其写回到同一个地方的同一个文本文件中。我已经成功地创建了一个以我想要的方式修改的新文件，但是我在将它写回原始文件时遇到了一个奇怪的问题。我正在使用以下代码：

```
def Replace(New_File, Old_File):
    for line in open(New_File):
        open(Old_File, 'w').write(str(line)) 
```

但是由于某种原因，这个函数只是在文件中的某个点中断。前 80% 传输正常，但随后它在一行中间看似随机的点切断文件。有任何想法吗？我知道还有其他关于类似主题的问题，但它们似乎都不适用于我的情况，而且我找不到像我遇到的那样的另一个错误。

***问题是可导航的，但我的主要兴趣是这个错误的根源是什么。我从来没有见过这样的东西，这让我很感兴趣，因为我不知道发生了什么，希望这里有人能有更多的想法。***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T18:57:01.823

```
with open('input.txt') as in_file:
    with open('output.txt', 'w') as out_file:
        for line in in_file.readlines():
            word, weight = line.split()[:2]
            out_file.write('%s\t%s' % (word, float(weight) * 2)) 
```

with-block 自动关闭打开的文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T18:51:52.720

您需要关闭正在编写的文件的文件句柄。

```
def Replace(New_File, Old_File):
    Old_File_Handle = open(Old_File, 'w')
    for line in open(New_File):
        Old_File_Handle.write(str(line))
    Old_File_Handle.close() 
```

或者，使用[with 语句](https://stackoverflow.com/questions/1369526/what-is-the-python-keyword-with-used-for)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T19:02:34.900

或者，您可以使用 shelve 之类的东西[来](http://docs.python.org/library/shelve.html)为您处理这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T19:24:17.057

```
def Replace(New_File, Old_File):
    for line in open(New_File):
        # next line REWRITES outfile EVERY TIME!!!
        open(Old_File, 'w').write(str(line)) 
```

结果：`Old_File`将仅包含最后一个`line`

正确实现：

```
def Replace(New_File, Old_File):
    # open files
    inp = open(New_File)
    out = open(Old_File, 'w')
    for line in inp:
        out.write(line)
    # close files
    out.close()
    inp.close() 
```

# tsql - 使用变量会导致更新运行非常缓慢

> ID：10886583
> 
> 赞同：4
> 
> 时间：2012-06-04T18:49:20.413
> 
> 标签：tsql

我有以下查询。

```
 UPDATE t
  SET    UnitsSold = sub.UnitsSold,
  FROM   dbo.table1 t
         JOIN (SELECT s.CustomerKey,
                      s.WeekKey,
                      s.ProductKey,
                      Sum(s.UnitsSold)          AS [UnitsSold],
               FROM   dbo.table2 s
               WHERE  WeekKey >= 335
               GROUP  BY s.WeekKey,
                         s.CustomerKey,
                         s.ProductKey) AS sub
           ON sub.WeekKey = t.WeekKey
              AND sub.CustomerKey = t.CustomerKey
              AND sub.ProductKey = t.ProductKey 
```

它像冠军一样奔跑。大约2秒。然后尝试通过以下方式使其动态化。

```
 DECLARE @StartWeekKey AS INT 
        SET @StartWeekKey = 335

  UPDATE t
  SET    UnitsSold = sub.UnitsSold,
  FROM   dbo.table1 t
         JOIN (SELECT s.CustomerKey,
                      s.WeekKey,
                      s.ProductKey,
                      Sum(s.UnitsSold)          AS [UnitsSold],
               FROM   dbo.table2 s
               WHERE  WeekKey >= @StartWeekKey
               GROUP  BY s.WeekKey,
                         s.CustomerKey,
                         s.ProductKey) AS sub
           ON sub.WeekKey = t.WeekKey
              AND sub.CustomerKey = t.CustomerKey
              AND sub.ProductKey = t.ProductKey 
```

突然间，它超级慢。

有什么好主意吗？

编辑：Probalby 应该提到这一点，但这包含在存储过程中。

将@StartWeekKey 作为参数添加到过程中，它会在几秒钟内恢复运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T18:59:22.473

这个问题似乎已经被问过好几次了，一般的答案是它与统计有关。

尝试：

```
UPDATE STATISTICS table_or_indexed_view_name 
```

让您的统计数据保持最新状态，看看是否有所作为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T19:03:39.493

当不同的参数有*非常*不同的分布时，这并不是闻所未闻的，因此有不同的好计划。可能发生的情况是查询针对给定值执行，然后该计划被缓存并不适当地重新用于不同的值。

如果是这种情况（只是猜测 - 我无法运行您的查询来检查！）然后尝试添加：

```
OPTION (OPTIMIZE FOR (@StartWeekKey UNKNOWN)) 
```

到查询结束。

* * *

另一个想法：`WeekKey`实际上是一个`int`？这是某种质量类型转换问题吗？

* * *

我无法检查这些；如果我偏离了轨道，请告诉我，以便我可以删除无用的答案。

# c - 输入太长时如何限制C中的scanf函数打印错误？

> ID：10886594
> 
> 赞同：4
> 
> 时间：2012-06-04T18:50:18.773
> 
> 标签：c, string, input, scanf

我想限制 scanf 函数，因此当我输入例如`char* array <String...>`超过 30 个字符的 a 时，它不会得到它并且我的输出将是错误的。

我得到了使用 [^n] 或类似的提示，但我不明白该怎么做？我知道我可以使用`scanf("%30s"..)`，但我不希望输入有效而只是错误。

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-04T19:08:28.100

如果您必须使用`scanf`，那么我相信您能做的最好的事情就是使用宽度说明符`"%31s"`，如您已经提到的：，然后使用`strlen`检查输入的长度，并丢弃字符串并在以下情况下报告错误输入长于您的限制。

或者可能通过在格式字符串中`strlen`另外使用一个来跳过，例如.`%n``"%31s%n"`

使用类似`%[^\n]`代替的格式字符串`%s`只是指示函数继续读取直到换行符，沿途消耗其他空白字符。如果您想允许输入包含空白字符，这很有用。

查看 scanf 的文档（[这里](http://linux.die.net/man/3/scanf)是手册页的副本）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T18:57:02.120

您可以使用`fgets`和`sscanf`。您可以阅读比字符多`fgets`一点的内容`30`，然后检查您没有得到比`30`字符多一点的内容。

或者，如果您真的想将`scanf`它与`30`类似`%32s`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-04T19:14:34.533

看看这个页面[http://linux.die.net/man/3/sscanf](http://linux.die.net/man/3/sscanf)并寻找*%n*格式说明符。我还建议查看 sscanf 函数的返回值，它会告诉您格式化参数的数量以及是否存在错误。

我使用*%n*格式说明符来帮助解析参数字符串：

```
 ret = sscanf(line, "%d %d %s %d %d %n", &iLoad, &iScreen, &filename, &stage, &bitmapType, &offset); 
```

由前面的参数格式化的字符数存储在变量*offset*中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-04T19:01:15.673

您可以在循环中使用 getchar 并计算传入的字符。

```
 int iCharCount = 0;

  ch = getchar();
  while( ch != EOF ) {
      iCharCount++;
      if(30 < iCharCount)
      {
        printf("You have attempted to enter more than 30 characters.\n");
        printf("Aborting.");
        break;
      }
      printf( "%c", ch );
      ch = getchar();
   } 
```

这是一个粗略的例子。如果由我决定，我会分配一个最大大小的字符数组，读入整行，然后使用字符串实用程序对其进行计数、编辑等等。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-04T18:56:41.453

那么在C中你可以这样做：

```
#include <string.h>

...

if(strlen(array_ptr) > 0) error(); 
```

显然，您需要一个更大的缓冲区来实际首先获取它的输入，然后检查它的长度，因此该数组可以是例如 512 字节。当您将字符串复制到其中时，您需要检查最后是否得到 0。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-18T17:29:40.253

`sscanf`，对于这种事情非常好，但是小心`scanf`也可以在这里解决问题。您需要确保正确限制用户可以输入的字符数，因此 %31s 意味着最多 30 个字符 +`\0`空终止符 (31)。

您要防止的是缓冲区溢出攻击，这可能是破坏草率编写的 c 程序的极其有效的方法。这是 Aleph One 在 BO 上的一篇优秀文章：http: [//insecure.org/stf/smashstack.html](http://insecure.org/stf/smashstack.html)

# r - R中的图像函数

> ID：10886596
> 
> 赞同：4
> 
> 时间：2012-06-04T18:50:22.587
> 
> 标签：r

我正在尝试为编程初学者做一些有点复杂的事情。我有一个 16x16 的矩阵，我想`image()`在 R 中将值绘制为热图。当总和（行索引 + 列索引）<= 15 时，如何将“0”（零）绘制为蓝色？那可能吗？

示例矩阵：

```
x <-  c(3045, 893, 692, 830, 617, 155, 246, 657, 105, 60, 18, 7, 7, 4, 2, 11234, 
2985, 2242, 2471, 1575, 366, 503, 1283, 170, 79, 32, 6, 4, 1, 3, 19475, 4756, 
3233, 3251, 1810, 409, 575, 1210, 139, 41, 11, 4, 2, 0, 0, 20830, 4739, 2990, 
2531, 1346, 298, 325, 612, 60, 17, 1, 0, 1, 0, 0, 15304, 3196, 1885, 1440, 610, 
117, 115, 185, 14, 2, 0, 0, 0, 0, 0, 8026, 1535, 806, 539, 223, 33, 37, 39, 0, 
0, 0, 0, 0, 0, 0, 3300, 562, 286, 141, 45, 14, 5, 12, 0, 0, 0, 0, 0, 0, 0, 1067, 
160, 65, 40, 14, 1, 2, 0, 0, 0, 0, 0, 0, 0, 0, 277, 47, 6, 2, 1, 0, 1, 0, 0, 0, 
0, 0, 0, 0, 0, 72, 6, 1, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 11, 5, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0)

xmat <- matrix(x, ncol = 12)
xmat <- cbind(xmat, rep(0,16), rep(0,16), rep(0,16), rep(0,16))
xmat <- rbind(xmat, rep(0,16))
dimnames(xmat) = list(0:15, 0:15)
xmat 
```

谢谢！维托

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T04:12:15.310

将符合标准的案例绘制为蓝色。

```
xmat.new <- xmat
xmat.new[!((row(xmat) + col(xmat) <= 15) & xmat==0)] <- NA
image(xmat.new,col="blue") 
```

正常绘制不符合标准的案例。注意`add=TRUE`

```
xmat.new <- xmat
xmat.new[((row(xmat) + col(xmat) <= 15) & xmat==0)] <- NA
image(xmat.new,add=TRUE) 
```

结果：

![在此处输入图像描述](../Images/6d20f539b3e0000443e591cac7f7c45d.png)

编辑包括@Marek 的建议以简化陈述。

# java - 关于 JButton 和 ImageIcon

> ID：10886604
> 
> 赞同：2
> 
> 时间：2012-06-04T18:51:00.350
> 
> 标签：java, swing, jbutton, embedded-resource, imageicon

我目前正在看一本关于java的书，我目前正在研究swing图形用户界面组件。当我这样做的时候，我偶然发现了一个代码示例，作者正在以一种非常不寻常的方式在 JButton 上设置图像，如下所示：

```
Icon bug1 = new ImageIcon( getClass().getResource( "bug1.gif" ) ); 
```

为了使上述工作正常，您需要将图像与 .class 文件放在同一文件夹中。有人可以向我解释他为什么要使用这个特定的代码（据我所知，它必须是反射代码，但话又说回来，我对这个不是特别确定），如果我有一种方法可以做到同样的事情，没有把事情弄得像他那样复杂？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T19:02:14.087

只有当你不理解它们时，事情才会变得复杂。一旦你理解了上面的代码是做什么的，它就会变得非常简单。

`getClass()`返回当前对象的 Class 对象 ( `this`)。`getResource()`使用上面的相对路径调用，在类路径中查找名为 bug1.gif 的文件，并在与被调用的 Class 对象相同的包中。因此它会在与包含上述代码的类相同的包中查找 bug1.gif。`getResource()`返回一个 URL。构造函数将`ImageIcon`URL 作为参数，从该 URL 加载图像字节，并从这些字节构造一个 ImageIcon。

所以整个事情只是从类路径中可用的文件创建一个 ImageIcon，与调用此代码的类在同一个包中。这是有道理的：您将给定类使用的图像与该类放在同一个包中，然后发布一个包含类和应用程序图像的 jar。

通过阅读所有这些方法的 javadoc，您会自己弄清楚这一切。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T18:59:24.910

`Class#getResource(String)`从类路径返回资源的 URL。这是加载存储在应用程序 JAR 文件中的资源的一种便捷方式。如果图像位于 HDD 上的某个位置，您可以使用以下命令加载它：

```
new ImageIcon(new File("/path/to/the/image").toURI().toURL()); 
```

它创建`File`对象，并将其路径作为 URL（看起来像`file:///path/to/the/image`）。

或者更简单，就像`ImageIcon`使用文件名的构造函数一样：

```
new ImageIcon("/path/to/the/image"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-04T18:59:25.413

Java 的 Swing 可以非常快速地克服复杂性，我认为他实际上是为了简单而使用此代码。

如果图像路径是相对路径（示例中的路径是），则图像必须位于与程序的已编译字节码 .class 文件相同的位置。如果图像在其他任何地方，您的程序根本找不到它。

像这样的相对路径非常有用，尤其是当您想将完成的项目编译成 JAR 文件时。您的图像将与您的所有 .CLASS 文件一起包含在 JAR 中。您将能够下载您的编译程序并运行它，并且您的图像将在您的 GUI 中就如您所期望的那样。

# php - 将表单提交更改为 PDF 或图像文件

> ID：10886618
> 
> 赞同：-3
> 
> 时间：2012-06-04T18:52:18.183
> 
> 标签：php, html, image, forms, pdf

我有一个 HTML/PHP 表单，需要转换为 PDF 或图像文件，并希望在提交时将其存储到 SQL 数据库中。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T18:56:27.273

您可以通过表单上的“action”属性将其发送到 php 脚本，并在服务器上生成 pdf 文件。然后您可以将 pdf 位置保存在数据库中，或者将整个 pdf 保存为 BLOB 类型。

一些参考：

[http://php.net/manual/en/book.pdf.php](http://php.net/manual/en/book.pdf.php)

[http://dev.mysql.com/doc/refman/5.5/en/blob.html](http://dev.mysql.com/doc/refman/5.5/en/blob.html)

# jquery - 触发colorbox时指定colorbox的href属性

> ID：10886622
> 
> 赞同：2
> 
> 时间：2012-06-04T18:52:30.370
> 
> 标签：jquery, colorbox

是否可以在单击触发颜色框的实际按钮时为颜色框指定目标 URL。

目前我的文档绑定功能中有这个：

```
$(function () {
    $(".button").colorbox({ width: "50%", height: "50%%", iframe: true, href: "/abc", opacity: 0.6 });
}); 
```

但是，href 属性取决于我第一次将颜色框绑定到按钮时不知道的下拉列表的值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T19:08:25.130

如[Colorbox Docs中所述](http://www.jacklmoore.com/colorbox)

你可以设置回调“onOpen”（也可能是“onLoad”），它应该在colorbox开始加载目标中指定的内容之前触发，让你有机会修改它

```
$(function () {
    $(".button").colorbox({ 
        width: "50%", 
        height: "50%%", 
        iframe: true, 
        href: "/abc", 
        opacity: 0.6,
        onOpen: function(){
          // modify target here
        }
    });
}); 
```

**更新** 可能更简单的解决方案 - colorbox 允许使用函数而不是静态值

```
$(function () {
    $(".button").colorbox({ 
        width: "50%", 
        height: "50%", 
        iframe: true, 
        href: function(){
            // Since I can't see your markup I can't provide exact solution
            // but if your .button elm is an anchor then use
            var url = $(this).attr('href');
            // if you are obtaining the url from diff. elm, grab it from there
            // such as $('#your_element).attr('href') 
            return url;
        }, 
        opacity: 0.6
    });
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-05T05:28:31.030

你可以这样... 这种方法绕过插件的自动 onClick 处理。在确定要使用的 href 值之后，您可以在自己的事件中调用插件。

在下面的代码片段中，var **myHref**是静态的，但*您可以编写一些 js*来从您的数据源设置它。

顺便说一句，我认为您在 height 属性上有错字-重复的 % 符号？

```
<script>
        $(document).ready(function(){
            $('.button').click( function() {
                var myHref = "/someHREF";
                $.colorbox({
                    width: "50%", 
                    height: "50%", 
                    iframe: true, 
                    href: myHref, 
                    opacity: 0.6
                });             
            });
        });             
</script> 
```

# c++ - C++ 数组大小初始化

> ID：10886627
> 
> 赞同：2
> 
> 时间：2012-06-04T18:52:48.570
> 
> 标签：c++, arrays, memory-management

我正在尝试定义一个类。这就是我所拥有的：

```
enum Tile {
GRASS, DIRT, TREE 
};

class Board {
public:
    int toShow;
    int toStore;
    Tile* shown;
    Board (int tsh, int tst);
    ~Board();
};

Board::Board (int tsh, int tst) {
    toShow = tsh;
    toStore = tst;
    shown = new Tile[toStore][toStore]; //ERROR!
}

Board::~Board () {
    delete [] shown;
} 
```

但是，我在指示的行上收到以下错误——只有分配数组的第一个维度可以具有动态大小。

我想要做的不是硬编码，而是将参数 toShow 传递给构造函数并创建一个二维数组，该数组只包含我想要显示的元素。

但是，我的理解是，当构造函数被调用，并且显示被初始化时，它的大小会被初始化为toStore的当前值。然后即使 toStore 发生变化，内存已经分配给显示的数组，因此大小不应该改变。但是，编译器不喜欢这样。

我如何理解这一点是否存在真正的误解？有没有人有一个修复程序可以做我想做的事情，而不必对数组的大小进行硬编码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T19:08:32.457

使用 C++ 的容器，这就是它们的用途。

```
class Board {
public:
    int toShow;
    int toStore;
    std::vector<std::vector<Tile> > shown;
    Board (int tsh, int tst) : 
      toShow(tsh), toStore(tst), 
      shown(tst, std::vector<Tile>(tst))
    {
    };
};

...

    Board board(4, 5);
    board.shown[1][3] = DIRT; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T19:14:37.273

您可以使用一维数组。您应该知道，二维数组被视为一维数组，当您需要可变大小时，可以使用此模式。例如 ：

```
int arr1[ 3 ][ 4 ] ;
int arr2[ 3 * 4 ] ; 
```

它们是相同的，并且可以通过不同的符号访问它们的成员：

```
int x = arr1[ 1 ][ 2 ] ;
int x = arr2[ 1 * 4 + 2 ] ; 
```

当然 arr1 可以看作是一个 3 行 x 4 列矩阵和 3 列 x 4 行矩阵。使用这种类型的多维数组，您可以通过单个指针访问它们，但您必须了解其内部结构。它们是一维数组，它们被视为 2 维或 3 维。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T19:28:06.347

让我告诉你当我需要一个 3D 数组时我做了什么。这可能有点过头了，但它很酷并且可能会有所帮助，尽管这是一种完全不同的方式来做你想做的事。

我需要表示一个 3D 单元格框。只有一部分细胞被标记并且是有意义的。有两种选择可以做到这一点。第一个，声明一个具有最大可能大小的静态 3D 数组，如果盒子的一个或多个维度小于静态数组中的相应维度，则使用其中的一部分。

第二种方法是动态分配和解除分配数组。使用 2D 阵列非常费劲，更不用说 3D 了。

阵列解决方案定义了一个 3D 阵列，其中感兴趣的单元格具有特殊值。大多数分配的内存是不必要的。

我双向倾倒。相反，我转向了 STL 地图。我定义了一个名为 Cell 的结构体，它有 3 个成员变量 x、y、z 表示坐标。构造函数`Cell(x, y, z)`用于轻松创建这样的 Cell。我定义了`operator <`它以使其可订购。然后我定义了一个`map<Cell, Data>`. 只需通过以下方式将坐标为 x、y、z 的标记单元格添加到地图

`my_map[Cell(x, y, z)] = my_data;`

这样我就不需要维护 3D 数组内存管理，而且实际上只创建了所需的单元格。

检查坐标 x0、y0、z0 处的调用是否存在（或标记）是通过以下方式完成的：

```
map<Cell, Data>::iterator it = my_map.find(Cell(x0, y0, z0));
if (it != my_map.end()) { ... 
```

在坐标 x0、y0、z0 处引用单元格的数据是通过以下方式完成的： `my_map[Cell(x0, y0, z0)]...`

这种方法可能看起来很奇怪，但它是健壮的，关于内存的自我管理，并且安全 - 没有边界溢出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T18:57:29.753

首先，如果你想引用一个二维数组，你必须声明一个指向指针的指针：

```
Tile **shown; 
```

然后，查看错误消息。这是正确的，可以理解的英语。它说明了错误是什么。`Only the first dimension of an allocated array can have dynamic size.`意思是——猜猜看，只有分配数组的第一个维度可以具有动态大小。就是这样。如果您希望您的矩阵具有多个动态维度，请使用 C 样式`malloc()`来维护指向指针的指针，或者，对于 C++ 来说，使用`vector`, 甚至更好地为此目的而制作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-04T19:09:33.030

了解一点 C 和 C++ 中内存分配的工作原理是很好的。

```
char x[10]; 
```

编译器将分配十个字节并记住起始地址，也许它在`0x12`（在现实生活中可能更大的数字。）

```
x[3] = 'a'; 
```

`x[3]`现在编译器通过获取 的起始地址来查找`x`，即`0x12`，并添加`3*sizeof(char)`，从而带来`0x15`。所以`x[3]`住在`0x15`.

这个简单的加法运算就是如何访问数组内的内存。对于二维数组，数学只是稍微复杂一些。

```
char xy[20][30]; 
```

从某个地方开始分配 600 个字节，也许是`0x2000`. 现在访问

```
xy[4][3]; 
```

需要一些数学... `xy[0][0], xy[0][1], xy[0][2]...`将占用前 30 个字节。然后`xy[1][0], xy[1][1], ...`将占用字节31到60。它的乘法： `xy[a][b]`将位于地址`xy`，加上a * 20，加上b。

这只有在编译器知道第一个维度有多长的情况下才有可能——您会注意到编译器需要知道数字“20”才能进行此数学运算。

现在函数调用。编译器很少关心你是否调用

```
foo(int* x); 
```

或者

```
foo(int[] x); 
```

因为在任何一种情况下它都是一个字节数组，你传递起始地址，编译器可以做额外的事情来找到它所在的位置`x[3]`或任何东西。但是在二维数组的情况下，编译器需要知道`20`上面示例中的幻数。所以

```
foo(int[][] xy) {
    xy[3][4] = 5;     //compiler has NO idea where this lives 
                      //because it doesn't know the row dimension of xy!
} 
```

但是如果你指定

```
foo(int[][30] xy) 
```

编译器知道该做什么。由于某些原因，我不记得将它作为双指针传递通常被认为是更好的做法，但这就是技术层面的情况。

# c# - 动态实例化一个类c#

> ID：10886628
> 
> 赞同：1
> 
> 时间：2012-06-04T18:52:48.763
> 
> 标签：c#, asp.net-mvc-3

我正在开发 ASP.Net MVC 中的即插即用框架，我可以将模块定义为与主项目分开的项目。因此，开发人员可以根据需要创建任意数量的模块。

我需要的是能够更新任何此类模块的设置。为此，在主项目中，我为一些常用设置定义了一个基类，并且每个模块都有自己的自定义设置。当对模块进行任何编辑时，我必须在主项目中实例化该模块的实例。但是，主项目不知道任何模块。

我如何实现这一目标？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T18:57:48.963

根据您的需要，您必须创建一个依赖于接口的解决方案。

本质上，该应用程序公开了一个 API dll，其接口名为 IModule。IModule 有一种称为 Run() 的方法。您的主应用程序将加载模块的程序集，寻找实现 IModule 的东西，创建其中一个对象并在其上调用 Run()。

这是一篇旧文章，描述了如何托管沙箱以在其中运行模块。 [http://msdn.microsoft.com/en-us/magazine/cc163701.aspx](http://msdn.microsoft.com/en-us/magazine/cc163701.aspx)

```
namespace MyApplication.Api 
{
    public interface IModule
    { 
       void Run();
    }
} 
```

开发人员会创建这样的东西

```
public class MyObject : MarshalByRefObject, IModule
{
    public void Run()
    {
        // do something here    
    }
} 
```

该应用程序将使用某种反射加载它。

```
public void LoadModule()
{
     var asm = System.Reflection.Assembly.Load(/* Get the developer module name from somewhere*/);
     var types = asm.GetExportedTypes();
     foreach(var t in types)
     {
         foreach(var i = t.GetInterfaces())
         {
             if(i == typeof(IModule))
             {
                 var iModule = System.Activator.CreateInstance(t);
                 iModule.Run();
             }
         }
     }
} 
```

最好在另一个 appDomain 中运行代码，但这会增加很多复杂性。

```
public void LoadModuleInAppDomain()
{
    // Spin up a new AppDomain

    // Load the assembly into the app domain

    // Get the object

    // Call the Run Method

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T18:59:57.590

您可以使用依赖注入并将这些模块注入到您的应用程序的组合根目录中。根据配置，您可以使用代码或 xml（配置文件）。您可以根据您的实际需要进行自动接线、后期绑定等。

您还可以在每个模块上都有初始化程序，因此每当您注册一个模块时，它应该初始化您注册的模块并注入依赖项等。

# java - intellij 引入了常量是私有的而不是公共的

> ID：10886642
> 
> 赞同：13
> 
> 时间：2012-06-04T18:54:06.603
> 
> 标签：java, intellij-idea, refactoring, keyboard-shortcuts

在 Intellij IDEA 11.1.2 中，当使用重构快捷方式来引入常量时，它总是使**public static final**常量，而我通常更喜欢默认为**private**。在旧版本的 Intellij 中，我很确定我可以选择将**private**设置为默认值。有谁知道是否仍然存在将 Introduce Constant 重构选项默认为**private**的选项，而不必事后去声明并将**public**编辑为**private**？谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-08-24T16:27:08.693

我有同样的问题并解决了它（想法12）。

要默认引入私有常量，请执行以下操作：

*   禁用[就地模式](https://www.jetbrains.com/idea/help/general.html#in_place_refactorings) （文件->设置->编辑器->常规->取消选中“启用就地模式”）
*   尝试引入一些东西（你会看到一个重构对话框）。在该对话框中选择“私人”
*   启用就地模式
*   享受私有常量

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-04T18:55:49.303

啊，没关系，我明白了。您必须再次按 command-alt-C 才能获得旧对话框。嗯。捷径越来越长......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-25T10:49:55.937

我知道这个线程已经很老了，但是到目前为止，有一种比接受的答案更容易获得所需结果的方法：

您可以简单地按下快捷方式两次引入一个常量以获取重构对话框并在那里选择一次私有。

从现在开始，按下快捷键总是会引入一个私有常量。

然后可以使用相同的过程切换回公共。无需每次都点击设置。

# android - 将 onSavedInstance 用于其他类而不是预先给定的方法

> ID：10886644
> 
> 赞同：2
> 
> 时间：2012-06-04T18:54:13.843
> 
> 标签：android

如何在我的 onSavedInstance 中添加项目，例如完全不同的类，例如其中包含多个项目的哈希图。

我们将如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T20:27:59.843

您可以将任何[Serializable](http://developer.android.com/reference/java/io/Serializable.html)对象放入包中：http: [//developer.android.com/reference/android/os/Bundle.html#putSerializable(java.lang.String, java.io.Serializable)](http://developer.android.com/reference/android/os/Bundle.html#putSerializable%28java.lang.String,%20java.io.Serializable%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T20:31:05.153

`HashMap`implements `Serializable`，所以只要你的 key 和 value 类型也是可序列化的，你就可以把你的整个地图放在 Bundle 中。

# ruby-on-rails - 如何拦截来自 Rails 记录器的信息？

> ID：10886646
> 
> 赞同：0
> 
> 时间：2012-06-04T18:54:24.473
> 
> 标签：ruby-on-rails, ruby, logging

我目前在工作中使用 Rails v2.3.5，我对语言和框架都很陌生。我需要做的是在每次用户请求网页时捕获某些信息（用户的 IP 地址、访问的 URL、访问的日期和时间以及页面呈现的时间）并将其存储在数据库中。

我注意到所有这些信息都包含在默认的 Rails 日志文件中，但我试图避免必须解析日志文件来收集这些信息。我想要的是某种方式来连接记录器并拦截此信息，或者扩展记录器并使用我的扩展版本而不是默认的 Rails 版本（ActiveSupport::BufferedLogger）。

也许其他不需要日志的解决方案？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T19:39:09.913

您可能需要的是`before_filter`ApplicationController 中的一个块来执行您需要执行的任何操作。从那里您可以创建您需要的任何数据库记录。例如：

```
class ApplicationController < ActionController::Base
  before_filter :log_user_info

protected
  def log_user_info
    # Activate a custom logging method on a model
    UserActivity.log!(
      # ... User parameters
    )
  end
end 
```

连接到记录器可能是个坏主意，因为这是获取该信息的间接方式。不过，出于历史原因，您可能需要从中提取数据。

# javascript - 谷歌地方搜索位置偏差

> ID：10886651
> 
> 赞同：2
> 
> 时间：2012-06-04T18:55:06.360
> 
> 标签：javascript, google-maps, google-maps-api-3, geolocation

我正在使用 Google Places 搜索，我希望在 GCC 国家（阿联酋、沙特阿拉伯、阿曼、科威特和巴林）上使用“位置偏差”。

我想实现以下 [https://developers.google.com/maps/documentation/places/autocomplete#location_biasing](https://developers.google.com/maps/documentation/places/autocomplete#location_biasing)

我想在一个文本框上提供谷歌地方搜索，用户只能看到来自阿联酋、沙特阿拉伯、阿曼、科威特和巴林这些国家的结果？

谢谢，

* * *

我可以使用“componentRestrictions”参数在一个国家/地区“位置偏差”，如下面的代码片段所示

```
var mapOptions = {
          //bounds : defaultBounds,  
          center: new google.maps.LatLng(25.2644444, 55.31166669999993),
          zoom: 13,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };

        map = new google.maps.Map(document.getElementById('map_canvas'),
          mapOptions);

        var input = document.getElementById('searchTextField');        
        var InputOptions = {
            types: ['(cities)'],
            **componentRestrictions: { country: 'AE' } // I want multiple counteries here**
        };                
        var autocomplete = new google.maps.places.Autocomplete(input, InputOptions); 
```

但我希望在我上面提到的多个柜台上进行位置偏差。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-01-17T21:21:20.227

自 2017 年 1 月起，您现在可以在地方自动完成中为多个国家/地区创建过滤器。

> 您现在可以将自动完成预测限制为仅来自多个国家/地区的显示。您可以通过在 AutocompleteOptions 的 componentRestrictions 字段中指定最多 5 个国家来做到这一点。

[https://developers.google.com/maps/documentation/javascript/releases](https://developers.google.com/maps/documentation/javascript/releases)

[https://developers.google.com/maps/documentation/javascript/3.exp/reference#ComponentRestrictions](https://developers.google.com/maps/documentation/javascript/3.exp/reference#ComponentRestrictions)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T19:00:49.873

你到底想做什么？

如果我猜对了，您只想对这些国家之一（阿联酋、沙特阿拉伯、阿曼、科威特和巴林）进行地理编码？

```
 function geocodeAddress() {
    var address = "Oman";
    geocoder.geocode( { 'address': address}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        position: results[0].geometry.location // gives you the location
        });
      } else {
        alert("Error: " + status);
      }
    });
  } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T07:48:46.537

我认为这是不可能的（目前）。仅在几周前才将结果限制在*一个国家/地区作为功能添加。*您最好的选择是通过地图边界来限制结果，如[Places Library 网站](https://developers.google.com/maps/documentation/javascript/places)中的此示例所示：

```
var defaultBounds = new google.maps.LatLngBounds(
  new google.maps.LatLng(-33.8902, 151.1759),
  new google.maps.LatLng(-33.8474, 151.2631)); 

var input = document.getElementById('searchTextField');
var options = {
  bounds: defaultBounds,
  types: ['establishment']
};

autocomplete = new google.maps.places.Autocomplete(input, options); 
```

找到最适合您所需区域的界限。

# css - webkit 转换阻止链接

> ID：10886656
> 
> 赞同：12
> 
> 时间：2012-06-04T18:55:24.420
> 
> 标签：css, webkit, css-transitions, css-transforms

我一直在使用转换和转换来创建没有 Javascript 的动画 UI 组件并真正享受结果，但我遇到了一个令人不安的问题，这似乎是 webkit 浏览器所独有的。

**在我旋转的一个元素上，一个跨越元素宽度 100% 的锚点只能在元素的右侧 50% 处访问。**

这个问题在 Firefox 中使用 -moz-transform 不存在，但在 Chrome 和 Safari 中使用 -webkit-transform 可以 100% 重现。

这是代码：

```
<!doctype html>
<html>
<head>
<title>webkit spincard test bed</title>
<style type="text/css">
    #card-lists{
width:100%;
float:left;
}
#card-lists ul{
list-style:none;
}
#card-lists ul li{
width:230px;
height:236px;
}
.non-mobile #card-lists ul.card-list li .flipcard-container:hover .flipcard,
.non-mobile #card-lists ul.card-list li .flipcard-container.hover .flipcard{
    -moz-transform: rotateY(180deg);
    -webkit-transform: rotateY(180deg);
    -moz-transform-style: preserve-3d;
    -moz-transition: all 0s linear 0s;
    -webkit-transform-style: preserve-3d;
    -webkit-transition: all 0s linear 0s;
}
.non-mobile #card-lists ul.card-list li .flipcard{
    -moz-transform: rotateY(0deg);
    -moz-transition: all 0s linear 0s;
    -webkit-transform: rotateY(0deg);
    -webkit-transition: all 0s linear 0s;
    width:230px;
    height:236px;
}
.face {
    position: absolute;
    width: 100%;
    height: 100%;
    -moz-backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
}
.face.back {
background-color: #125672;
    -moz-transform: rotateY(180deg);
    -webkit-transform: rotateY(180deg);
}
.face.front {
    background-color:#000;
}
</style>
</head>
<body class="non-mobile">
<div id="card-lists">
<ul class="card-list" id="cardes-list-total">
    <li>
    <div class="flipcard-container">
        <div class="flipcard">
            <div class="front face">
                <a href="#">
                <div style="width:100%; height:100%;">
                </div>
                </a>
            </div>
            <div class="back face">
                <a href="#">
                <div style="width:100%; height:100%;">
                </div>
                </a>
            </div>
        </div>
    </div>
    </li>
</ul>
</div>
</body>
</html> 
```

任何人都可以提供任何帮助将不胜感激，因为我已经在这个问题上花费了过多的时间。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-05T16:00:56.680

在梳理了webkit Bugzilla之后，我发现有人遇到了同样的问题并找到了解决方法。

```
.face.back {
    background-color: #125672;
    -moz-transform: rotateY(180deg);
    -webkit-transform: rotateY(180deg);
} 
```

变成：

```
.face.back {
    background-color: #125672;
    -moz-transform: rotateY(180deg);
    -webkit-transform: rotateY(180deg) translateZ(1px);
} 
```

将 translateZ 添加到变换使元素的左侧可点击。

这是该错误的链接：[https ://bugs.webkit.org/show_bug.cgi?id=54371](https://bugs.webkit.org/show_bug.cgi?id=54371)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-07T20:10:44.503

我在下面使用了这段代码

```
<style>    
.outer div {
        float: left;
        -webkit-perspective: 200px;
        -webkit-transform-style: preserve-3d;
    }
.outer a {
        -webkit-transition: all 1.0s ease-in-out;
        background:#0F6;
        width:100px;
        height:100px;
        display:block;
        -webkit-transform: rotateY(45deg);
    }
.outer div:hover a {
        -webkit-transform: none;
    }
</style>

<div class="outer">
    <div>
        <a href="http://www.google.com/"></a>
    </div>
</div> 
```

这个解决方案在 chrome 中对我有用。[http://jsfiddle.net/jaxweb/7qtLD/7/](http://jsfiddle.net/jaxweb/7qtLD/7/)

# jmeter - JMeter 流量的网络设置 | 互联网还是局域网？

> ID：10886657
> 
> 赞同：2
> 
> 时间：2012-06-04T18:55:24.683
> 
> 标签：jmeter, load-testing, stress-testing

我将使用 Apache JMeter 在网页上执行负载和压力测试，但我不太确定适当的网络设置。通过本地网络或互联网连接两台机器，服务器与网页和运行 JMeter 的客户端是否更好。使用互联网会更接近真实场景，但使用本地网络，连接会更加稳定，并且您有更多带宽同时处理更多请求。我非常感谢意见！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T17:08:52.077

这实际上是负载测试的两种风格或方法，两者都是有效的。

第一个你可以称之为实验室测试。您将可能影响吞吐量/响应的因素的数量降至最低。次并真正将测试重点放在系统本身上。

第二个是更现实的场景，您试图通过在系统上线时通过尽可能多的实际网络层路由请求来获得尽可能多的覆盖范围。

方法 1 的好处是您简化了测试，这使得理解和发现任何问题*变得*更加容易。问题是您缺乏完整的覆盖范围。

方法 2 的好处是它不仅更现实，而且还提供了更高的置信度——尤其是。通过更高容量的测试，您可能会发现交换机或防火墙存在问题，并且只有通过此类测试才能识别此类问题。问题是它会使发现任何问题变得更加困难。

所以，简而言之，你真的想做这两种类型。您可能会发现从外到内从完整的端到端测试开始会更容易，然后只有在发现需要隔离/调查问题时才进行更集中的测试。这样，您就有机会减少设置工作量，同时仍能从测试中获得最大收益。

注意：外在意味着，您的测试台应该位于 LAN 之外（假设这是实时流量的流动方式）。如今，使用基于云的硬件很容易设置。

另请注意：如果您运行测试的机器在这两种情况下都是相同的，那么通过互联网路由流量（从您的 LAN 中然后再次返回）可能不会告诉您任何有用的信息，并且实际上可能导致您的结果中有误报（更不用说您公司的网络问题了！）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T07:36:30.870

恕我直言，您应该使用您的局域网。

几乎每个用户的 dl/ul 速度都会略有不同，所以我建议你先用你的 LAN 做一个正常的性能测试，当你完成后，你可以从外面做一些运行，只是为了看看差异。

请记住，您主要是在应用程序所在的硬件上测试应用程序的效率。（您未来用户的）网络速度是您无法以任何方式影响的因素。

# amazon-ec2 - 如果需要更多资源，AWS EC2 如何扩展？

> ID：10886658
> 
> 赞同：0
> 
> 时间：2012-06-04T18:55:38.717
> 
> 标签：amazon-ec2, amazon-web-services

我在 Ubuntu 上启动了一个运行 Apache 和 MySQL 服务器的**t1.micro实例。**基本上，我使用它来托管我的照片共享应用程序，该应用程序在访问者方面可能会有巨大的随机峰值。

AWS 是怎么做的？

实例是否会自动升级到适当的马力以满足需求和不断增长的存储需求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T19:13:35.057

不，您必须手动使您的实例更强大，首先确保它处于停止状态（这需要 EBS 卷，否则您将丢失数据），然后转到 AWS 控制台，右键单击您的实例并选择“更改”实例类型'。

如果您对更自动化的方法感兴趣，我建议您使用具有自动扩展策略的弹性负载均衡器。借助 Auto-scaling，Amazon 将根据您提供的设定点启动或关闭新实例（即 CPU 使用率在 10 分钟内达到 80%）。

# ruby-on-rails - NoMethodError 未定义方法“保存”为 nil:NilClass

> ID：10886664
> 
> 赞同：0
> 
> 时间：2012-06-04T18:56:09.217
> 
> 标签：ruby-on-rails, rspec

我需要做什么来解决这个问题？我是 ruby​​ on rails 的新手。

运行 rspec 时出错

```
1) remember token should have a nonblank remember token
 Failure/Error: before { @user.save }
 NoMethodError:
   undefined method `save' for nil:NilClass
 # ./spec/models/user_spec.rb:125:in `block (2 levels) in <top (required)>' 
```

user_spec.rb

```
require 'spec_helper'
describe User do

 before do
@user = User.new(name: "Example User", email: "user@example.com",
password: "foobar", password_confirmation: "foobar")
end
.
.
.
it { should respond_to(:remember_token) }
.
.  
.
describe "with a password that's too short" do
    before { @user.password = @user.password_confirmation = "a" * 5 }
    it { should be_invalid }
  end
  describe "return value of authenticate method" do
    before { @user.save }
    let(:found_user) { User.find_by_email(@user.email) }
    describe "with valid password" do
      it { should == found_user.authenticate(@user.password) }
    end
    describe "with invalid password" do
      let(:user_for_invalid_password) { found_user.authenticate("invalid") }
      it { should_not == user_for_invalid_password }
      specify { user_for_invalid_password.should be_false }
    end
  end
end
describe "remember token" do
  before { @user.save }
  it "should have a nonblank remember token" do
    subject.remember_token.should_not be_blank

  end
end 
```

用户.rb

```
class User < ActiveRecord::Base
      attr_accessible :name, :email, :password, :password_confirmation

      has_secure_password
      before_save { |user| user.email = email.downcase }
      before_save :create_remember_token

      validates :name, presence: true, length: { maximum: 50 }
      VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
      validates :email, presence: true, format: { with: VALID_EMAIL_REGEX },
      uniqueness: { case_sensitive: false }
      validates :password, length: { minimum: 6 }
      validates :password_confirmation, presence: true

      private
      def create_remember_token
        self.remember_token = SecureRandom.urlsafe_base64
      end
    end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T19:00:46.600

看起来像这段代码

```
describe "remember token" do 
```

在街区外

```
describe User do
  ...
end 
```

如果您将其移动到块内，那么它将具有创建 @user 对象的 before 操作触发（然后您将其保存在您自己的 before 块中）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T21:08:43.670

将找不到 @user 变量，因此

你应该在里面移动描述“记住令牌”->

```
describe User do

  //current definitions

  describe "remember token" do
    before { @user.save }
     it "should have a nonblank remember token" do
       subject.remember_token.should_not be_blank
     end
  end
end 
```

# c# - 如何解决 SSH.NET 中的“错误数据包长度”错误？

> ID：10886665
> 
> 赞同：5
> 
> 时间：2012-06-04T18:56:17.580
> 
> 标签：c#, .net, ssh, sftp

我正在尝试使用[SSH.NET](http://sshnet.codeplex.com/)通过 SFTP 上传文件。 `SFTPClient.Connect()`引发 SshConnectionException 并显示消息“错误的数据包长度 1302334341”。这是我的代码：

```
static void Main()
{
try
{
 SftpClient sftp = new SftpClient(server, 22, userID, password);
 sftp.Connect();
}
catch(Exception e)
{
 Console.WriteLine(e.Message);
}
} 
```

我在另一个[讨论](http://sshnet.codeplex.com/discussions/271671)中看到这可能与加密有关。我正在使用 AES，并且我有一个主机密钥。不过，我不明白如何输入加密。基于那个讨论，我正在玩这个：

```
ConnectionInfo connectionInfo = new PasswordConnectionInfo(server, 22, userID, password);
connectionInfo.Encryptions.Clear();
connectionInfo.Encryptions.Add("aes","ssh-rsa 2048 11:22:34:d4:56:d6:78:90:01:22:6b:46:34:54:55:8a") 
```

我知道这不是传递给 Encryptions.Add() 的正确参数集，但我对使用这个库有点迷失；你能帮我弄清楚如何正确设置加密（假设这是问题）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-02T17:20:10.920

解决了，在[这个讨论](http://sshnet.codeplex.com/discussions/358307)中。我需要使用删除加密

```
foreach (var d in connectionInfo.Encryptions.Where(p => p.Key != "aes128-cbc").ToList()) 
{
 connectionInfo.Encryptions.Remove(d.Key); 
} 
```

替换我打算使用的任何加密

# javascript - 带有可选 optgroup 的 jQuery 多选小部件

> ID：10886666
> 
> 赞同：1
> 
> 时间：2012-06-04T18:56:22.890
> 
> 标签：javascript, jquery, multi-select

我正在寻找一个如下所示的 jQuery 小部件：![例子](../Images/f56d6eab6c800e545820cfdd6921bd8e.png)

它允许您拥有多个组，例如：

```
Group 1
- Sub 1 1
- Sub 1 2
- Sub 1 3
Group 2
- Sub 2 1
Group 3
- Sub 3 1
- Sub 3 2 
```

例如，单击 Group 1 将选择其中的所有内容，然后再次单击它将取消选择。而且您应该能够折叠组以获得更好的导航。如图所示（左侧的小箭头）

那里有这样的小部件吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T19:59:26.257

我放在一起的这个小jsfiddle应该做你想做的事：

[http://jsfiddle.net/RdaCy/](http://jsfiddle.net/RdaCy/)

要添加更多组/子组，只需相应地更改 id 编号 :)，如果您希望我更改任何方面，或者如果您需要进一步的帮助，请告诉我 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T20:16:00.380

jQuery：

```
$(document).ready ( function () 
{
    $('.parent').click(function () {
        var set = false;
        if ($(this).is(':checked'))
            set = true;
        $(this).parent().find('ul li').each( function () {
            var Input = $(this).find('input');
            Input.attr('checked', set);
        });     
    });
    $('span').click(function () {
        if ($(this).text() == '-')
            $(this).html('+');
        else
            $(this).html('-');
        $(this).parent().find('ul li').each( function () {
            $(this).slideToggle();
        });
    });
}); 
```

的HTML：

```
<ul>
   <li>
      <span>-</span><input type="checkbox" value="a" class="parent" /> a
      <ul>
         <li><input type="checkbox" value="a1" /> a1</li>
         <li><input type="checkbox" value="a2" /> a2</li>
      </ul>
   </li>
   <li>
      <span>-</span><input type="checkbox" value="b" class="parent" /> b
      <ul>
         <li><input type="checkbox" value="b1" /> b1</li>
         <li><input type="checkbox" value="b2" /> b2</li>
      </ul>
   </li>
</ul> 
```

干杯

编辑：添加崩溃。

# android - 如何在 BackStack 上反转片段动画？

> ID：10886669
> 
> 赞同：116
> 
> 时间：2012-06-04T18:56:35.613
> 
> 标签：android, android-fragments, android-animation, back-stack

我认为在使用以下代码使用片段时按下后退按钮时系统会在后台堆栈上反转动画：

```
FragmentManager fm = getFragmentManager();
FragmentTransaction ft = fm.beginTransaction();
ft.setCustomAnimations(R.anim.slide_in, R.anim.hyperspace_out);
ft.replace(R.id.viewContainer, new class(), "layout").addToBackStack(null).commit(); 
```

* * *

## 回答 #1

> 赞同：272
> 
> 时间：2012-06-04T18:56:36.547

根据[自定义动画的android文档](http://developer.android.com/reference/android/app/FragmentTransaction.html#setCustomAnimations(int,%20int,%20int,%20int))：

改变：

```
ft.setCustomAnimations(R.anim.slide_in, R.anim.hyperspace_out); 
```

到：

```
ft.setCustomAnimations(R.anim.slide_in, R.anim.hyperspace_out, R.anim.hyperspace_in, R.anim.slide_out ); 
```

现在后台动画 - 反向！

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2015-10-12T07:54:49.283

使用正确的动画我使用了以下动画，它的工作就像一个魅力

**slide_in_left.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android"
    android:duration="@android:integer/config_mediumAnimTime" >
    <objectAnimator
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:duration="500"
        android:propertyName="x"
        android:valueFrom="1000"
        android:valueTo="0"
        android:valueType="floatType" />
</set> 
```

**slide_in_right.xml**

```
 <?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android"
    android:duration="@android:integer/config_mediumAnimTime" >

    <objectAnimator
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:duration="500"
        android:propertyName="x"
        android:valueFrom="0"
        android:valueTo="1000"
        android:valueType="floatType" />

</set> 
```

**slide_out_left.xml**

```
 <set xmlns:android="http://schemas.android.com/apk/res/android"
    android:duration="@android:integer/config_mediumAnimTime" >

    <objectAnimator
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:duration="500"
        android:propertyName="x"
        android:valueFrom="0"
        android:valueTo="-1000"
        android:valueType="floatType" />

</set> 
```

**slide_out_right.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android"
    android:duration="@android:integer/config_mediumAnimTime" >

    <objectAnimator
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:duration="500"
        android:propertyName="x"
        android:valueFrom="-1000"
        android:valueTo="0"
        android:valueType="floatType" />

</set> 
```

然后在添加片段时使用以下

```
setCustomAnimations(R.anim.slide_in_left, R.anim.slide_out_left,
                                R.anim.slide_out_right, R.anim.slide_in_right) 
```

它会 100% 工作

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2017-08-11T04:08:03.547

就我而言

```
fragmentTransaction.setCustomAnimations(android.R.anim.slide_in_left, android.R.anim.slide_out_right, 
                       R.anim.slide_in_right, R.anim.slide_out_left); 
```

将创造完美的动画。

**slide_in_right**

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android">
    <translate android:fromXDelta="50%p" android:toXDelta="0"
               android:duration="@android:integer/config_mediumAnimTime"/>
    <alpha android:fromAlpha="0.0" android:toAlpha="1.0"
           android:duration="@android:integer/config_mediumAnimTime" />
</set> 
```

**slide_out_left**

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android">
    <translate android:fromXDelta="0" android:toXDelta="-50%p"
               android:duration="@android:integer/config_mediumAnimTime"/>
    <alpha android:fromAlpha="1.0" android:toAlpha="0.0"
           android:duration="@android:integer/config_mediumAnimTime" />
</set> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-04-14T07:47:00.093

```
.setCustomAnimations(R.animator.fragment_fade_in,
        R.animator.fragment_fade_out,
        R.animator.fragment_fade_p_in,
        R.animator.fragment_fade_p_out) 
```

将以上内容替换为：

```
mFragmentManager.beginTransaction()
    .setCustomAnimations(R.animator.fragment_fade_in,
            R.animator.fragment_fade_out,
            R.animator.fragment_fade_p_in,
            R.animator.fragment_fade_p_out)
    .replace(R.id.main_container, FragmentPlayerInfo.getInstance(data))
    .addToBackStack(FragmentPlayerInfo.TAG)
    .commit(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-09-16T10:58:34.683

正如 Fragment Transaction 类中提到的那样。

```
/**
     * Set specific animation resources to run for the fragments that are
     * entering and exiting in this transaction. The <code>popEnter</code>
     * and <code>popExit</code> animations will be played for enter/exit
     * operations specifically when popping the back stack.
     *
     * @param enter An animation or animator resource ID used for the enter animation on the
     *              view of the fragment being added or attached.
     * @param exit An animation or animator resource ID used for the exit animation on the
     *             view of the fragment being removed or detached.
     * @param popEnter An animation or animator resource ID used for the enter animation on the
     *                 view of the fragment being readded or reattached caused by
     *                 {@link FragmentManager#popBackStack()} or similar methods.
     * @param popExit An animation or animator resource ID used for the enter animation on the
     *                view of the fragment being removed or detached caused by
     *                {@link FragmentManager#popBackStack()} or similar methods.
     */
    @NonNull
    public abstract FragmentTransaction setCustomAnimations(@AnimatorRes @AnimRes int enter,
            @AnimatorRes @AnimRes int exit, @AnimatorRes @AnimRes int popEnter,
            @AnimatorRes @AnimRes int popExit); 
```

所以最后你可以使用这样的方法

```
 mFragmentManager.beginTransaction()
                        .replace(R.id.container, fragment)
                        .setCustomAnimations(R.anim.slide_left,//enter
                                             R.anim.slide_out_left,//exit
                                             R.anim.slide_right,//popEnter
                                             R.anim.slide_out_right)//popExit
                        .addToBackStack(fragment.toString())
                        .commit(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-03-12T23:25:22.683

这对我有用！这段代码片段！如果要在活动中使用此代码，请在开头删除`getActivity()`！

```
getActivity().getSupportFragmentManager()
        .beginTransaction()
        .setCustomAnimations(android.R.anim.slide_in_left, android.R.anim.fade_out,android.R.anim.slide_in_left, android.R.anim.fade_out)
        .replace(R.id.fragment_container, new YourFragment)
        .addToBackStack(null)
        .commit(); 
```

祝你好运！！

# java - 变量和方法以及动作监听器

> ID：10886670
> 
> 赞同：0
> 
> 时间：2012-06-04T18:56:36.400
> 
> 标签：java

我有这个（部分伪）代码

```
class a {
  void b()
  {
    int d = 0;
    JButton c = new JButton();
    c.addActionListener(new ActionListener() {
      @Override
      public void actionPerformed(ActionEvent e)
      {
        d = 1;
      }
    });
  }
} 
```

但是，它不起作用，eclipse 建议将最终标识符添加到 d，但这使得值无法更改。抱歉，如果这是一个愚蠢的问题，但很难为 Google 提出这样的问题......我也不能在高于方法 b 的杠杆上声明变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T19:01:45.993

您可能希望将 d 的声明移到方法之外。

```
class a {
  int d = 0;

  method b() {
    JButton c = new JButton();
    c.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent e) {
      d = 1;
    }
  }

} 
```

..并格式化您的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T19:02:35.867

这是因为代码：

```
c.addActionListener(new ActionListener()
          {
             public void actionPerformed(ActionEvent e)
             {
                d = 1;
             }
          });//a little corrected here 
```

实际上创建了一个新的嵌套类和`overrides`方法`actionPerformed(ActionEvent e)`。由于它不是同一类的一部分，因此*安全*java 不允许该嵌套类方法访问除声明之外的*局部变量。*`final`

# javascript - jquery mobile+过滤列表搜索条件

> ID：10886672
> 
> 赞同：0
> 
> 时间：2012-06-04T18:56:36.613
> 
> 标签：javascript, jquery-mobile, cordova

在我的主页上，有一个可供选择的几个标准的列表（预算最大值，预算最小值......），我希望通过单击“研究”按钮将返回到与答案相对应的链接列表在另一个页面中使用 jquery mobile (javascript) 进行研究。拜托，你有什么例子我该怎么做，请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T19:01:42.693

这是一个[使用 jQuery Mobile 的分页搜索结果](http://www.raymondcamden.com/index.cfm/2011/2/25/jQuery-Mobile-Example--Paged-Search-Results)示例。

一种更简单的方法是使用[filter bar](http://jquerymobile.com/test/docs/lists/lists-search.html)，但这不会为您提供您正在寻找的高级搜索选项。

# c++ - winsock 和 QTcpServer 之间的套接字交换

> ID：10886679
> 
> 赞同：0
> 
> 时间：2012-06-04T18:57:00.113
> 
> 标签：c++, qt, sockets, tcp

我用winsock2.h找到了这个套接字代码[http://www.tidytutorials.com/2009/12/c-winsock-example-using-client-server.html](http://www.tidytutorials.com/2009/12/c-winsock-example-using-client-server.html)这是我的客户的代码。

```
int hsock;
int * p_int ;
hsock = socket(AF_INET, SOCK_STREAM, 0);
///

char buffer[1024];
int buffer_len = 1024;
int bytecount;

int c;
memset(buffer, '\0', buffer_len);

for(char* p=buffer ; (c=getch())!=13 ; p++){
    printf("%c", c);
    *p = c;
}

if( (bytecount=send(hsock, buffer, strlen(buffer),0))==SOCKET_ERROR){ 
```

服务器的代码是用 Qt QTcpServer 类完成的：

```
void FortuneThread::run()
   {
   QTcpSocket tcpSocket;
   if (!tcpSocket.setSocketDescriptor(socketDescriptor)) {
       emit error(tcpSocket.error());
       cout<<"socket error"<<endl;
       return;
    }

    char buffer[1024];
    int buffer_len = 1024;
    memset(buffer, 0, buffer_len);
    strcat(buffer, " SERVER ECHO");

    QByteArray block;
    QDataStream out(&block, QIODevice::WriteOnly);
    out.setVersion(QDataStream::Qt_4_0);
    out << &socketDescriptor;
    out << buffer;
    out << strlen(buffer);
    out << 0;

    tcpSocket.write(block); 
```

上面的服务器代码是我尝试将服务器数据与客户端数据匹配失败。怎么了？泰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T02:34:17.113

我没有使用过 Qt 套接字，因此不能对服务器端代码做出太多贡献。但是，我假设既然它来自样本，它应该是正确的。

您的客户端代码 OTOH 未与服务器建立连接。对于 TCP 套接字，您需要

1.  创建套接字 - 你正在这样做
2.  使用 connect() 连接到对等套接字 -*这是缺失的*
3.  使用 send() 发送数据 - 你也在这样做

注意您如何指定端口号。如果你在 Windows 上，它使用小端，而网络字节顺序是大端。Sockets 库提供了 htons() 和 ntohs() 来在两者之间进行转换。确保您传递给 connect() 的端口号（通过 sockaddr_in* 参数）与用于创建 Qt 服务器的字节顺序相同。这也与 IP 地址相关，但问题不大，因为通常使用 inet_addr("xx.xx.xx.xx") 以正确的字节顺序将字符串转换为 IPv4 DWORD。

最后，请注意，您可能无法在服务器上一次 read() 中收到您发送的所有内容。服务器必须进行缓冲，直到遇到消息结束标记（或读取预设长度的消息）。

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T02:10:22.453

这是有效的方法：（混乱）

```
void FortuneThread::run()
{

QTcpSocket tcpSocket;
if (!tcpSocket.setSocketDescriptor(socketDescriptor)) {
    emit error(tcpSocket.error());
    cout<<"socket error"<<endl;
    return;
}
//in part
tcpSocket.waitForReadyRead(10000);
int joj = tcpSocket.bytesAvailable();
char inbuffer[1024];
tcpSocket.read(inbuffer,1024);
string instring;
instring = inbuffer;
instring.resize(joj);
cout<<instring<<endl;

//out part
char buffer[1024];
int buffer_len = 1024;
int bytecount;

memset(buffer, '\0', buffer_len);

string outstring = "hey client!";
    int TempNumOne=outstring.size();

    for (int a=0;a<TempNumOne;a++)
    {
        buffer[a]=outstring[a];
    }

QByteArray block;
block = buffer;

tcpSocket.write(block);
tcpSocket.disconnectFromHost();
tcpSocket.waitForDisconnected();
} 
```

# javascript - Backbone.js 事件处理程序不起作用

> ID：10886681
> 
> 赞同：2
> 
> 时间：2012-06-04T18:57:01.330
> 
> 标签：javascript, backbone.js, event-handling

[我正在尝试这里](http://arturadib.com/hello-backbonejs/docs/1.html)给出的主干.js 示例，然后尝试自己编写一些代码。

由于某种原因，我附加到事件“click p”的事件处理程序不起作用。为什么单击段落标签时不执行“突出显示”功能？

```
var ItemView = Backbone.View.extend({
    tagName : 'p',

    events: {
        'click p': 'highlight'
    },

    initialize: function(){
        console.log("An object of ItemView was created");
        _.bindAll(this, 'render', 'highlight');

        this.render();   
    },

    render: function(){
        this.$el.text(this.model.get('content'));
        $('body').append(this.$el);
        return this;
    },

    highlight: function(){
        console.log('clicked');
    }

}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T19:08:46.970

此*事件*针对您的*根*`<p>`元素内的任何元素。它不是针对您的*根*元素，即使您的*根*元素是一个元素。***`<p>`***

 ***尝试：

```
events: {
  'click': 'highlight'
} 
```

*以根*元素为目标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T21:00:23.340

嗯...在您的渲染中，您将所有正文内容替换为 this.$el。我认为当您替换所有内容时，您已经有效地“解开”了事件哈希。所以在你完成追加之后，像这样调用 this.delegateEvents() ：

```
render: function(){
    this.$el.text(this.model.get('content'));
    $('body').append(this.$el);
    this.delegateEvents();
    return this;
} 
```

这应该允许您单击段落标签。***

# validation - Zend_Validate_Between 在另一个值上

> ID：10886693
> 
> 赞同：0
> 
> 时间：2012-06-04T18:57:33.863
> 
> 标签：validation, zend-form

根据另一个表单元素的值验证数字范围的最佳方法是什么？如果用户选择“百分比”作为折扣类型，则折扣金额应该在 0 到 100 之间，而不是 140！问题似乎是传入另一个表单元素值。

此外，我还查看了其他资源，其中一个涉及类似的主题，但可能并不完全相关。 [如何根据另一个字段的值验证 Zend_Form 的一个字段？](https://stackoverflow.com/questions/7585232/how-to-validate-a-field-of-zend-form-based-on-the-value-of-another-field)

表单.php

```
$isValid = new Application_Model_Validate();
$discount = $this->createElement('text', 'discount')
                 ->setLabel('Discount Amount') 
                 ->setDescription("Enter an amount in the format \"200.00\" ")
                 ->setRequired(true)
                 ->setDecorators(array('Description', 'ViewHelper', 'Errors',
                           array('HTMLTag', array('tag' => 'dd')),
                           array('Label', array('tag' => 'dt'))));

$discount->addValidators(array(array('Float')), $isValid->isValid(new Zend_Validate_Between(array('min' => '0', 'max' => '100')), $discountType));
$this->addElement($discount); 
```

Application_Model_Validate.php

```
Require_once 'Zend/Validate/Abstract.php';

class Application_Model_Validate extends Zend_Validate_Abstract
{
/*
 *  Validation failure message key
 */
const INVALID_PERCENTAGE = 'InvalidPercentage';

/*
 * Validation failure message template definitions
 */
protected $_messageTemplates = array(
  self::INVALID_PERCENTAGE => 'Please enter a percentage greater than 0 and up to 100.' 
);

protected $_percentageOption;
protected $_percentageValue;

/*
 * Defined by Zend_Validate_Interface
 * Validate the percentage parameters
 */
public function isValid($value, $context = null)
{
    $this->_setValue($value);

     /*
     * If context key is valid, return true
     */

    if(is_array($context))
    {
       if (isset($context['percentage']) && ($value))
        {
           return true;                
        }
    }

    $this->_error(self::INVALID_PERCENTAGE);
    return false;

 } 
```

如果您需要更多信息，请说。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T21:46:44.943

我稍微修改了您的代码并添加了一个下拉框：

形式：

```
$this->addElement('select', 'discounttype');
$this->getElement('discounttype')
    ->addMultiOptions(
        array('percentage' => 'percentage', 'other' => 'other')
);

$discount = $this->createElement('text', 'discount')
         ->setLabel('Discount Amount') 
         ->setRequired(true);

$discount->addValidators(
    array('Float', new Application_Model_Validate(0, 140))
);
$this->addElement($discount); 
```

验证器：

```
<?php

class Application_Model_Validate extends Zend_Validate_Between
{
    public function isValid($value, $context = null)
    {
        $this->_setValue($value);

        if ($context['discounttype'] == 'percentage') {
            $this->setMax(100);
        }

        return parent::isValid($value, $context);
    }
} 
```

现在，如果您使用 验证控制器中的表单，`$form->isValid($this->getRequest()->getParams())`如果在下拉框中选择“百分比”，它将采用 0 到 100 之间的输入，否则将采用 0 到 140 之间的输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T01:05:59.930

另一种解决方案：

```
//controller validation
$discountValidate = new Application_Model_Validate();
$discountValidate->_checkDiscount($data['discountType'], $data['discount']);

if ($discountValidate->isValid())
{
    //do
}

else
{
     $element = $form->getElement('discount');
     $element->addError($discountValidate->getError());
} 
```

# visual-studio-2008 - Ankh Tortoise SVN 挂钩？

> ID：10886694
> 
> 赞同：0
> 
> 时间：2012-06-04T18:57:40.027
> 
> 标签：visual-studio-2008, svn, tortoisesvn, ankhsvn

基本上，我希望将 Visual Studio 中的客户端预提交钩子与 Ankh SVN 完全集成。有一个问题已经对该主题有一些指导：[AnkhSVN client side pre-commit hook](https://stackoverflow.com/questions/9888667/ankhsvn-client-side-pre-commit-hook)

我的设置如下：

*   Visual Studio Basic 2008 - 版本 9.0.30729.4462 QFE

*   AnkhSVN - 2.3.11266

*   TortoiseSVN - 1.7.7

现在，如果通过 Tortoise 的文件夹选项在 Visual Studio 之外调用我的客户端预提交钩子，它就可以工作。但是，当我执行 SVN 提交时，我无法从*Visual Studio 内部调用/处理源代码控制下的任何文件......*

这是我的问题：我如何告诉 Ankh 使用我在 Tortoise 配置中定义的任何预提交钩子？是否有我应该查看的选项/屏幕？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T14:06:37.447

AnkhSVN 还没有实现客户端钩子（还没有？）。这是仅在 TortoiseSVN 中可用的功能。

但是有一个未解决的问题： [http ://ankhsvn.open.collab.net/issues/show_bug.cgi?id=453](http://ankhsvn.open.collab.net/issues/show_bug.cgi?id=453)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T17:03:36.273

Tortoise Client Side Hooks 仅在您使用 Tortoise 时可用，这就是我不喜欢实现它们的原因——太特定于客户端。如果您使用 Subversion 命令行客户端或内置 IDE 客户端（如用于 VisualStudio 的 AnkhSVN 或用于 Eclipse 的 Subversive 和 Subclipse），它们将不起作用。

# jquery - 带有 inlineNav 的 jqGrid：有没有办法强制重新启用“添加”按钮？

> ID：10886699
> 
> 赞同：2
> 
> 时间：2012-06-04T18:58:08.503
> 
> 标签：jquery, jqgrid

我正在使用带有`inlineNav`选项的 jqGrid 4.3.2。网格上的所有编辑都是在本地使用`loadonce: true`和完成的`clientArray`。当用户完成编辑时，他们单击表单上的保存按钮，整个网格被发布到服务器。在大多数情况下，这很好用，但我遇到了一个奇怪的问题。如果用户添加一个新行，然后在按 Enter 确认编辑或取消选择新添加的行之前单击保存按钮，则即使`saveRow`在发布和重新加载之前调用之后，内联导航器上的添加按钮仍保持禁用状态。我在通话后尝试过`resetSelection`，但这些都不起作用。我的保存代码：`restoreRow``saveRow`

```
$("#submitButton").click(function () {
    $("#theGrid").jqGrid('saveRow', $("#selectedRowId").val(), false, 'clientArray');
    if (!ValidateGridData())
        return false;
    var rowData = $("#theGrid").jqGrid('getRowData');
    var dataToSend = JSON.stringify(rowData);
    $.ajax({
        url: '@Url.Action("UpdateGridData")',
        type: 'POST',
        contentType: 'application/json; charset=utf-8',
        data: dataToSend,
        dataType: 'json',
        async: false,
        success: function (data, textStatus, jqXHR) {
            $("#theGrid").jqGrid('setGridParam', { datatype: 'json' });
            $("#theGrid").trigger('reloadGrid');
        },
        error: function (jqXHR, textStatus, errorThrown) {
            alert('Error saving data: ' + textStatus + " " + errorThrown);
        }
    });
    return true;
}); 
```

有没有办法让内联导航器相信新行已保存并且用户可以添加更多行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T20:09:34.437

通过[inlineNav](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:inline_editing#inlinenav)方法添加到导航器中的按钮具有由网格 id 和相应后缀构成的 id：

*   添加：gridId +“_iladd”（例如“list_iladd”）
*   编辑：gridId +“_iledit”（例如“list_iledit”）
*   保存：gridId +“_ilsave”（例如“list_ilsave”）
*   取消：gridId +“_ilcancel”（例如“list_ilcancel”）

要启用该按钮，您应该删除`'ui-state-disabled'`CSS 类：

```
var gridId = "list";
$("#" + gridId + "list_iladd").removeClass('ui-state-disabled'); 
```

要禁用按钮，可以`.addClass('ui-state-disabled')`改为使用。

此外，我不建议您直接使用任何内联编辑方法`saveRow`。在这种情况下，您可能不会遇到您尝试解决的问题。查看[答案](https://stackoverflow.com/a/10396691/315935)中的代码。它定义`editingRowId`和`myEditParam`为

```
var $grid = jQuery("#list"),
    editingRowId,
    myEditParam = {
        keys: true,
        oneditfunc: function (id) { editingRowId = id; },
        afterrestorefunc: function (id) { editingRowId = undefined; }
    }; 
```

然后`inlineNav`与`myEditParam`参数一起使用：

```
$grid.jqGrid('inlineNav', '#pager',
    { edit: true, add: true, editParams: myEditParam,
        addParams: {addRowParams: myEditParam } }); 
```

在这种情况下，您可以确保`editingRowId`获取当前编辑行的 ID，或者`undefined`如果没有行正在编辑。因此，您可以使用`$(gridIdSelector + "_iledit").click();`而不是[editRow](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:inline_editing#editrow)来编辑当前选定的行。同样，如果需要，您可以使用[setSelection](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:methods)并模拟单击任何其他内联编辑导航器按钮。

**更新**：如果您需要，您仍然可以组合`saveRow`inside of 的调用`onSelectRow`，但您可以首先使用变量`editingRowId`和秒使用`myEditParam`，这对于您使用的所有编辑方式*都很常见：*

```
onSelectRow: function (id) {
    var $this = $(this);
    if (editingRowId !== id) {
        if (editingRowId) {
            // save or restore currently editing row
            $this.jqGrid("saveRow", editingRowId, myEditParam);
            // or $this.jqGrid("restoreRow", editingRowId, myEditParam);
        }
        $this.jqGrid("editRow", editingRowId, myEditParam);
    }
} 
```

如果您需要其他一些内联编辑方法选项，您可以在`myEditParam`. 您会发现将其用作在大多数内联编辑示例中找到的变量`editingRowId`要好得多。`lastSel`

# ruby-on-rails-3.2 - 保存嵌套的 ActiveResource 时如何指定前缀参数？

> ID：10886700
> 
> 赞同：5
> 
> 时间：2012-06-04T18:58:20.700
> 
> 标签：ruby-on-rails-3.2, activeresource, ruby-1.9.3

我有一个嵌套的 ActiveResource 模型（即它在另一个模型的命名空间内）。试图跟`save`注加注：

```
ActiveResource::MissingPrefixParam: client_id prefix_option is missing 
```

如何提供所需的前缀？

这是我的课：

```
class Foo::Bar < ActiveResource::Base
  self.site = "http://www.example.com"
  self.prefix = "/clients/:client_id"
  self.element_name = "policy"
  self.collection_name = "policies"
end 
```

这是我的保存尝试：

```
bar = Foo::Bar.new :client_id => 123
bar.valid? # => true
bar.client_id # => 123
bar.save # => ActiveResource::MissingPrefixParam... 
```

我一次又一次地寻找对此的解释，但我只找到相同的说明：

`When a GET is requested for a nested resource and you don’t provide the prefix_param an ActiveResource::MissingPrefixParam will be raised.`

我正在尝试访问我们服务器的 API 端点`http://www.example.com/clients/[client_id]/policies`，但我显然无法提供`client_id`，所以我的应用程序请求`http://www.example.com/clients//policies`

服务器日志告诉我：`ActionController::RoutingError (No route matches "/clients//policies/" with {:method=>:post})`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T15:11:40.580

如果您创建一个方法`prefix_options`，它将工作，该方法提供一个包含所需的哈希`client_id prefix_option`，如下所示：

```
def prefix_options
  { :client_id => client_id }
end 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-05T06:19:23.357

我假设您想为特定客户创建新策略。您应该发布政策详细信息的路径应该是：

```
client_policies_path(@client.id) 
```

如果您使用的是表单，则可以像这样使用 form_for：

```
form_for [@client, @policy] do 
```

由PolicyController 中的操作创建的位置`@client`，如下所示：`@policy``#new`

```
def new
  @client = Client.new(params[:client_id])
  @policy = @client.policies.build
  # ...
end 
```

# php - 因为随机顺序没有重复的数字

> ID：10886704
> 
> 赞同：1
> 
> 时间：2012-06-04T18:58:52.407
> 
> 标签：php, random, for-loop

在不重复任何数字的情况下进行随机“for”的最佳方法是什么？

```
for ($i = 1; $i <= 10; $i++) {
    echo $i;
} 
```

我想了一些方法，但是有很多代码太复杂了。有一个标准功能可以做我愿意做的事情吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T19:00:51.960

```
$numbers = range(1,10);
shuffle($numbers);
foreach($numbers as $i) {
    // do stuff
} 
```

这将为您提供数字 1 到 10，而不会以随机顺序重复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T19:01:08.493

```
$range = range(1,10);
shuffle($range);
foreach ($range as $i) {
    echo $i;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T19:02:23.497

创建一个包含一系列数字的数组，然后随机播放：

```
$array = range(1, 10);
shuffle($array);
for ($i=0,$c=count($array); $i<$c; $i++) {
    echo $array[$i] . "\n";
} 
```

# javascript - JavaScript 网络可视化？

> ID：10886705
> 
> 赞同：6
> 
> 时间：2012-06-04T18:59:03.670
> 
> 标签：javascript, html, visualization

我正在寻找一个可视化网络的库。

我只需要添加一些节点（节点上有文本），在它们之间添加边，（边是定向的并且上面有文本）。我不想手动设置任何东西的位置。

我想要简单的 API：

```
var node1 = X.addNode(1, "Hello"),
    node2 = X.addNode(2, "World");
X.addEdge(node1, node2, "helloworld"); 
```

我已经搜索了几个小时，照顾了 arborjs、sigma.js、d3.js、JavaScript InfoVis Toolkit，但没有一个让我满意。

还有什么我可以尝试的吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-04T19:03:23.283

查看[VivaGraphJS](https://github.com/anvaka/VivaGraphJS)。
VivaGraphJS 的Amazon 可视化[示例](http://www.yasiv.com/amazon#/Search?q=graph%20drawing&category=Books&lang=US)。

布局配置[示例](http://www.yasiv.com/graphs#Bai/bfwa398)，使用 WebGL 作为渲染器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T20:47:09.393

我们生产[mxGraph](http://www.jgraph.com/mxgraph.html)，但请注意这是一个商业库，不是开源的。我不确定您列出的开源库失败的确切原因，但可以肯定的是，形成图形、设置几何图形和标签都是相当简单的函数调用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T11:44:47.773

检查 sigma.js 的这个页面
[http://sigmajs.org/examples/a_plugin_example.html](http://sigmajs.org/examples/a_plugin_example.html)
，你会看到他们是如何进行随机或圆形布局的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-27T10:58:04.840

sigma.js 有什么问题？该图书馆的网站有一个非常简单的示例来绘制节点和边：

```
var sigRoot = document.getElementById('sig');
var sigInst = sigma.init(sigRoot);
sigInst.addNode('hello',{
label: 'Hello',
color: '#ff0000'
}).addNode('world',{
label: 'World !',
color: '#00ff00'
}).addEdge('hello_world','hello','world').draw(); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-08-04T14:08:25.997

我发现这个 javascript 库很有帮助。查看网络示例页面：

[visjs](http://visjs.org/network_examples.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-26T16:24:08.737

试试[cne-tnetwork](https://github.com/telefonicaid/cne-tnetwork)。它是用于创建和绘制网络图的 javascript 可视化库。它基于 SVG 并兼容 HTML 5。它在 github 上公开可用，在 GNU Afferro 许可下获得许可。[您可以在库的自述文件](https://github.com/telefonicaid/cne-tnetwork/blob/master/README.md)中找到如何使用它。它具有拖动节点的模式。节点之间的链接可以是单向的、双向的，甚至可以是连接多个元素的“总线”。使用 CSS，您可以自定义所有样式（节点、链接、箭头、总线...）。

# jquery - 将变量传递给警报

> ID：10886707
> 
> 赞同：0
> 
> 时间：2012-06-04T18:59:13.013
> 
> 标签：jquery

当输入正确的字符串时，`foo`我`.guess`试图从中提取值`.clicks`并将其传递给警报。当我使用当前代码（如下）加载页面时，警报显示为`Correct! You guessed it in clicks.`. 为什么`clicks`变量没有被传递？

谢谢

jQuery：

```
$('.guess').keyup(function() { 
    if ($('.guess').val() == "foo") {
        var clicks = $('.clicks').val();
        alert('Correct! You guessed it in ' + clicks + ' clicks.');
        location.reload();
    }
}); 
```

HTML：

```
<div class="bar">
    <h2 class="clicks">0</h2>
    <input type="text" class="guess" />
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T19:01:03.260

[`.val()`](http://api.jquery.com/val/)主要用于获取表单输入元素的值。

我想你想使用`$(".clicks").text()`, OR `$(".clicks").html()`, 这将返回`"0"`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T19:01:13.660

```
$('.guess').keyup(function() { 
    if ($('.guess').val() == "foo") {
        var clicks = $('.clicks').text(); // .text() instead of .val()
        alert('Correct! You guessed it in ' + clicks + ' clicks.');
        location.reload();
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T19:01:38.713

```
$('.guess').keyup(function() { 
    if ($.trim( this.value ) == "foo") {
        var clicks = $('.clicks').text();
        alert('Correct! You guessed it in ' + clicks + ' clicks.');
        location.reload();
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T19:02:18.237

**工作演示**点击这里:) [http://jsfiddle.net/QSrWs/](http://jsfiddle.net/QSrWs/)

请使用api：`.text()`

这将帮助您了解区别：[val() 和 text() 之间的区别](https://stackoverflow.com/questions/807867/what-is-the-difference-between-jquerys-functions-val-and-text)

> Val() 适用于输入元素（或任何具有 value 属性的元素？），而 text() 不适用于输入元素。Val() 获取输入元素的值——与类型无关。Text() 获取所有匹配元素的 innerText（不是 HTML）：

希望这可以帮助，

**代码**

```
$('.guess').keyup(function() { 
    if ($('.guess').val() == "foo") {
        var clicks = $('.clicks').text();//$('.clicks').val();
        alert('Correct! You guessed it in ' + clicks + ' clicks.');
        location.reload();
    }
});​ 
```

# ssas - ID 应该在用户层次结构中吗？

> ID：10886713
> 
> 赞同：1
> 
> 时间：2012-06-04T18:59:36.733
> 
> 标签：ssas, ssas-2008

我已经看到这在不同的实现中是双向的。在有 6 个级别的层次结构中，最底层是 ID（示例 ProductID），但有一个唯一的产品名称。如果产品名称是“人类”标识符，我倾向于认为 ID 不需要在层次结构中。

将其从层次结构中取出是否安全？

**更新：** 要清楚 - 产品维度在每条记录上都有 ProdID 和 ProdName。事实表的联接在 ProdID 上。该层次结构同时具有 ProdID 和 ProdName，其中 ProdID 为最低级别。我可以不只是从层次结构中删除 ProdID 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T13:20:15.027

根据 ID 构建层次结构并将属性的“NameColumn”属性更改为 Name，这样您就可以看到用户友好的名称，但一切都是由 ID 计算的

# unix - Unix one-liner to extract substring from all files in a directory and subdirectories

> ID：10886714
> 
> 赞同：1
> 
> 时间：2012-06-04T18:59:47.083
> 
> 标签：unix

I'm looking for a UNIX one-liner that will output to a file all occurrences of NSLocalizedString (from that word to the end of the line) in all files in the current directory and all subdirectories. I've googled, but haven't found a solution.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T19:08:18.890

```
find . -type f -exec fgrep NSLocalizedString {} \+ | \
    sed -e 's/^.*\(NSLocalizedString.*\)$/\1/' > ../your_output_file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T19:07:14.580

`find <directory> -type f -print | xargs grep NSLocalizedString | tee <outputfile>` should do what you're looking for, if I understand the question right...

# c++ - WTS连接会话

> ID：10886716
> 
> 赞同：2
> 
> 时间：2012-06-04T18:59:51.233
> 
> 标签：c++, winapi, wtsapi32

我正在尝试使用此功能连接到特定的用户会话。我已经尝试了所有方法，但该功能总是失败，因为`ERROR_ACCESS_DENIED`5 (0x5) Access is denied 或`ERROR_CTX_WINSTATION_ACCESS_DENIED`7045 (0x1B85) The requested session access is denied. 甚至像这样硬编码会话 ID 和密码

```
WTSConnectSession(2, 1 ,TEXT("test1"),false); 
```

有没有比使用此功能更好的方法来启动用户会话。我正在尝试实现快速用户切换，这是难题中的最后一块是登录用户会话。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T19:10:15.443

确定您使用`TargetLogonId`“远程桌面用户”组中的用户名（由参数指定）连接吗？

您可以使用

```
net localgroup "Remote Desktop users" 
```

另一种选择是启用安全审计和分析安全事件日志。它会告诉你确切的根本原因`ERROR_CTX_WINSTATION_ACCESS_DENIED`

# c# - StretchBlt 偶尔会在不应该反转图像时反转图像

> ID：10886722
> 
> 赞同：1
> 
> 时间：2012-06-04T19:00:13.630
> 
> 标签：c#

我在使用 StretchBlt（或 BitBlt）将图像从 PictureBox 复制到位图以用于创建 AVI 文件时遇到问题。我相信 AVI 文件是一个不重要的方面——我可以在另一个 PictureBox 上显示位图并查看问题。

问题是偶尔（不经常）单个图像被翻转（镜像跨 X 轴，而不是 Y 轴）。我不确定这是否是我尚未发现提及的 StretchBlt 的已知问题，或者我做错了什么。
请注意，这不是由于 StretchBlt 的预期功能“如果源和目标高度或宽度的符号不同，则它会创建镜像”。

更新：我更改了一些东西以强制源/目标大小相同，并且使用具有相同行为的 BitBlt。

我已经包含了一些代码（c#），希望是所有重要的部分。

单步执行代码，我可以看到单个图像发生这种情况，该图像具有与前一个图像和下一个图像（以及下一个，下一个）完全相同的信息传递给 StretchBlt（除了要复制到的 hdc），所有这些都是美好的。它不经常发生，我看不出有什么原因。或者一种检测它发生的方法（所以我可以把它翻转回来）。我有一个不使用 StretchBlt 的解决方法，但它的速度要慢得多，并且确实会降低性能。

另一个可能有用的位：这个翻转的图像在正常使用中很少见（100 帧中少于 1 个）。但是当在 IDE 中运行时，逐个图像地逐个执行，它会非常频繁地发生（可能是十分之一）。

任何想法可能导致这种情况或我可能做错了什么？或其他快速复制位图的方法，包括调整大小。注意：位图的大小确实不同（不能使用 BitBlt），但差别不大。

谢谢！

凯特

```
// --- Import statement
[DllImport("GDI32.DLL", CharSet = CharSet.Auto, SetLastError = true, ExactSpelling = true)]
    public static extern bool StretchBlt( 
IntPtr hdcDest, int nXDest, int nYDest, int nDestWidth, int nDestHeight,
IntPtr hdcSrc, int nXSrc, int nYSrc, int nSrcWidth, int nSrcHeight, Int32 dwRop );

// --- A small class for creating/storing Bitmap and Graphics objects, which get reused
public class CAviImageInfo
  {
    private Bitmap    mAviBitmap = null;
    private Graphics  mAviGraphics = null;

    public CAviImageInfo(int width, int height )
    {
      mAviBitmap = new Bitmap(width, height);
      mAviGraphics = Graphics.FromImage(mAviBitmap);
    }
    ~CAviImageInfo()
    {
      mAviGraphics.Dispose();
      mAviGraphics = null;
    }
    public Bitmap AviBitmap
    { get { return mAviBitmap; } }
    public Graphics AviGraphics
    { get { return mAviGraphics;  } }
}  

// --- Two PictureBoxs placed on form at design time (one is just to watch for these mirrored images):
PictureBox mMainPictureBox; // --- Displays the images to be copied
PictureBox DebugPictureBox;

//  --- The following done one time:
Graphics  mMainPictureBoxGraphics = mMainPictureBox.CreateGraphics();
IntPtr    mMainPictureBoxHdc      = mMainPictureBoxGraphics.GetHdc();

// --- Method that does the copying.  Called each time image on panel is updated.
Public void UpdateAviRecording()
{
  // --- Gets unused Bitmap and Graphics objects (these are reused)
  CAviImageInfo aviImageInfo = GetUnusedAviImageInfo();

  IntPtr destinationHdc = aviImageInfo.AviGraphics.GetHdc();

  StretchBlt(
    destinationHdc, 
    0, 0, aviImageInfo.AviBitmap.Width, aviImageInfo.AviBitmap.Height,
    mMainPictureBoxHdc, 
    0, 0, mMainPictureBox.Width, mMainPictureBox.Height, SRCCOPY);

  // --- Show the copied Bitmap on the debug PictureBox 
  // --- (normally would pass it to be written to avi file)
  DebugPictureBox.Image = aviImageInfo.AviBitmap;
  DebugPictureBox.Refresh();

  aviImageInfo.AviGraphics.ReleaseHdc(destinationHdc);      
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-04-06T15:37:21.783

这只是一个建议。不知道行不行。。

在对 StretchBlt 的调用中使用图像的 Math.Abs​​() 设置宽度和高度。这可能会防止可能的内存损坏和**符号反转**（如 GSerg 所述）。..

```
StretchBlt(
    destinationHdc, 
    0, 0, Math.Abs(aviImageInfo.AviBitmap.Width), 
Math.Abs(aviImageInfo.AviBitmap.Height),
    mMainPictureBoxHdc, 
    0, 0, Math.Abs(mMainPictureBox.Width), 
Math.Abs(mMainPictureBox.Height), SRCCOPY); 
```

# sql - SQL Server 中哪个运行得更快... MIN 或 MAX？

> ID：10886724
> 
> 赞同：-1
> 
> 时间：2012-06-04T19:00:16.597
> 
> 标签：sql

SQL Server 中哪个运行得更快... MIN 或 MAX？

这将帮助我优化查询。

谢谢！

**请投票结束这个问题。**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T19:02:00.493

我相当肯定两者都不会更快。您可以根据自己的数据轻松衡量这一点。

除了：

*   他们给出不同的结果。你不能只用一个换另一个。
*   即使结果稍微快一点，这也是一种微优化。

如果要优化查询，请添加适当的索引，并确保您的查询能够有效地使用索引。检查执行计划。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T19:02:49.617

两者的执行时间相同。没有例外。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T19:03:38.047

创建索引是您的解决方案。

# javascript - 从 url 中删除最后一个元素

> ID：10886727
> 
> 赞同：25
> 
> 时间：2012-06-04T19:00:31.490
> 
> 标签：javascript, jquery

我需要从跨度中删除网址的最后一部分..

我有

```
<span st_url="http://localhost:8888/careers/php-web-developer-2"
st_title="PHP Web Developer 2" class="st_facebook_large" displaytext="facebook"
st_processed="yes"></span></span> 
```

我需要把它拿走`st_url`并从中移除`php-web-developer-2`，所以它只是`http://localhost:8888/careers/`.

但我不知道该怎么做。`php-web-developer-2`不会总是那样，但它不会有任何`/`东西。它将始终是一个`-`分隔的字符串。

任何帮助！？？？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-19T05:43:47.310

**就这么简单：**

```
var to = url.lastIndexOf('/');
to = to == -1 ? url.length : to + 1;
url = url.substring(0, to); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-04T19:02:42.207

```
$('span').attr('st_url', function(i, url) {
    var str = url.substr(url.lastIndexOf('/') + 1) + '$';
    return url.replace( new RegExp(str), '' );
}); 
```

**[演示](http://jsfiddle.net/LNW4V/229/)**

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-06-04T19:13:06.150

用这个。

```
$('span').attr('st_url', function(i, url) {
    var to = url.lastIndexOf('/') +1;

    x =  url.substring(0,to);
    alert(x);
})​ 
```

可以看[Demo](http://jsfiddle.net/crwM4/1/)

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2019-09-18T15:54:28.370

这是一个稍微简单的方法：

```
url = url.slice(0, url.lastIndexOf('/')); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-06-04T19:11:30.957

您可以使用正则表达式来解析“最后一段 url”：

```
var url="http://localhost:8888/careers/php-web-developer";

var baseurl=url.replace(
    new RegExp("(.*/)[^/]+$"),
    "$1") ); 
```

RegExp 的事情基本上是说：“匹配任何东西，然后是斜杠，然后是所有非斜杠，直到字符串的末尾”。

replace 函数获取匹配的部分，并将其替换为字符串的“任何内容，然后是斜线”部分。

[RegexBuddy](http://www.regular-expressions.info/javascript.html)有大量关于这一切的信息。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-04T19:09:56.050

你可以在这里看到它的工作：http: [//jsfiddle.net/xKxLR/](http://jsfiddle.net/xKxLR/)

```
var url = "http://localhost:8888/careers/php-web-developer-2";
var regex = new RegExp('/[^/]*$');
console.log(url.replace(regex, '/')); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-04T19:03:15.710

首先，您需要解析标签。接下来尝试提取 st_url 值，这是您的 url。然后从提取的 url 的最后一个字符开始循环并省略它们，直到看到“/”。这就是你应该如何提取你想要的东西。记住这一点并尝试编写代码。

# python - 在 python exe 中将图像文件夹放在哪里？

> ID：10886732
> 
> 赞同：3
> 
> 时间：2012-06-04T19:00:56.247
> 
> 标签：python, pygame, py2exe

我已经将我设计的python游戏转换为exe。运行 exe 本身会导致它闪烁然后关闭，这意味着发生了错误。从命令提示符运行它也会导致错误，但记录它：

```
Cannot load image: Playfield.png
Couldn't open images\Playfield.png 
```

这告诉我该`load_image`块失败了。我之前没有`images`目录时遇到过这种情况。

我试图将`images`文件夹移动到`dist`目录。这是显示的错误：

```
Traceback (most recent call last):
    File "Table_Wars.py", line 728, in <module>
    File "Table_Wars.py", line 51, in main
    File "Table_Wars.py", line 236, in __init__
    File "pygame\__init__.pyc", line 70, in __getattr__
NotImplementedError: font module not available
(ImportError: DLL load failed: The specified module could not be found.) 
```

这是我第一次使用 py2exe，所以我不太确定发生了什么。原始 python 文件本身 Table_Wars.py 按预期运行。

如果有帮助，整个 Table_Wars 文件夹的位置位于我的桌面上名为 Games 的文件夹中 (C:\Users\Oventoaster\Desktop\Games\Table_Wars)。我正在运行 Windows 7 32 位操作系统。

根据要求，这是我生成的 output.txt：

```
Folder PATH listing for volume OS
Volume serial number is 7659-4C9C
C:\USERS\OVENTOASTER\DESKTOP\GAMES\TABLE_WARS
build
   bdist.win32
       winexe
           bundle-2.7
           collect-2.7
              ctypes
              distutils
              email
                 mime
              encodings
              logging
              multiprocessing
                 dummy
              pygame
                 threads
              unittest
              xml
                  parsers
           temp
dist
images 
```

这是我用来转换文件的 setup.py：

```
from distutils.core import setup
import py2exe

setup(console=['Table_Wars.py']) 
```

编辑：我试图使用完整的 py2exe 示例。这将创建 exe，但给出相同的`Cannot load image`错误。尝试将`images`文件夹放在与 exe 相同的文件夹中会创建一个`Runtime Error: The application requested the runtime to terminate it in an unusual way.`

Slace Diamond 建议的代码的缩短形式可防止 py2exe 找到`Table_Wars.py`：

从命令：

```
running py2exe
*** searching for required modules ***
error: Table_Wars.py: No such file or directory. 
```

`setup`并且`Table_Wars`在同一个目录中。如果有帮助，我输入 python.exe 和 setup.py 的完整路径。

编辑：我似乎越来越近了。我把`images`目录放在里面`self.extra_datas`，现在我得到了：

`Fatal Python error: (segmentation fault)` `This application has requested the runtime to terminate it in an unusual way. Please contact the application's suppourt team for more information`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T19:44:47.827

当您使用 py2exe（和 py2app ）构建可分发包时，包环境的一部分是指向文件的本地资源位置。在您的普通未打包版本中，您指的是相对的“图像/”位置。对于打包版本，您需要配置您`setup.py`的资源以将资源包含在其自己的位置。

有关如何设置`data_files`软件包选项的非常具体的信息，请参阅此文档：http: [//www.py2exe.org/index.cgi/data_files](http://www.py2exe.org/index.cgi/data_files)

该页面有多个示例来显示非常简单的路径，以及用于查找数据和`data_files`为您构建列表的辅助函数。

这是一个简单片段的示例：

```
from distutils.core import setup
import py2exe

Mydata_files = [('images', ['c:/path/to/image/image.png'])]

setup(
    console=['trypyglet.py.py']
    data_files = Mydata_files
    options={
                "py2exe":{
                        "unbuffered": True,
                        "optimize": 2,
                        "excludes": ["email"]
                }
        }
) 
```

这与您要实现的目标非常匹配。就是说“image.png”源文件应该放在包内资源位置根目录的“images”目录中。此资源根目录将是您的 python 脚本中的当前目录，因此您可以继续将其称为相对子目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T05:34:40.937

看起来您已经通过将文件夹移动到 dist 来解决图像问题。另一方面，缺少字体模块是pygame 和 py2exe 之间的一个[已知问题。](https://stackoverflow.com/questions/6376194/font-module-error-when-using-py2exe)Py2exe 不会复制一些必要的 DLL，因此您必须重写 py2exe 的`isSystemDLL`方法，强制它包含与音频和字体相关的 DLL。

如果 Table_Wars.py 是您项目中的唯一模块，请尝试使用以下命令运行此脚本`python setup.py py2exe`：

```
from os.path import basename
from distutils.core import setup

import py2exe

origIsSystemDLL = py2exe.build_exe.isSystemDLL
def isSystemDLL(pathname):
    if basename(pathname).lower() in ("libogg-0.dll", "sdl_ttf.dll"):
        return 0
    return origIsSystemDLL(pathname)
py2exe.build_exe.isSystemDLL = isSystemDLL

setup(windows=[{"script": "Table_Wars.py"}],
      options={"py2exe": {"dist_dir": "dist"}}) 
```

您还可以尝试pygame wiki 上的[示例 py2exe 设置文件。](http://pygame.org/wiki/Pygame2exe)如果它们都不起作用，请将错误消息添加到您的问题中。

* * *

我尝试在示例项目上运行 py2exe，当我使用默认的 pygame 字体时，它也会中断。如果您使用的是默认字体，请尝试将 ttf 文件放在项目的根目录以及 dist 文件夹中。您还必须更改`pygame.Font`脚本中的调用：

```
font = pygame.font.Font("SomeFont.ttf", 28) 
```

# django - 在 django 中为视频、音频和图像文件生成 url

> ID：10886739
> 
> 赞同：0
> 
> 时间：2012-06-04T19:01:18.707
> 
> 标签：django, file, media

我正在开发一个网站，用户可以上传他们的图片，音频和视频。所有用户都可以看到其他用户上传的文件。现在我不希望任何用户下载其他用户上传的文件。我怎样才能安全地显示文件网页不允许任何用户下载任何文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T20:00:13.193

你不能让它不可下载，因为网络浏览器*必须*下载它来呈现页面，一旦它已经被下载，最终用户可以做任何他们喜欢的事情。

您唯一能做的就是将它完全封装在 Flash 控件中（即电影实际上是一个 SWF 文件），但这*仍然*不能阻止人们下载它；它只会使他们下载的内容变得不那么有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T19:08:28.153

我建议通过视图管理媒体请求。

```
@login_required
def getmedia(request, media_id):
    media = get_object_or_404(Media, pk=media_id)
    if media.owner != request.user:
        #Handle user not owning the media
        HttpResposeRedirect("/404")
    # Handle users owning the media 
```

# xcode - 无法续订即将到期的企业分发配置文件

> ID：10886740
> 
> 赞同：3
> 
> 时间：2012-06-04T19:01:19.750
> 
> 标签：xcode, profile, enterprise, provisioning

在 Organizer Library 上，我们有 Provisioning Profiles 的列表。在这里，我有一个即将到期（2 天）的企业分发配置文件，它旁边有一个“续订”按钮。当我单击按钮时，我收到下一条错误消息：

> ***给定的配置文件没有关联的设备并且无法更新。** 请在尝试更新“企业”或创建新的配置文件之前将设备添加到您的配置文件中。*

我试图通过右键单击它们并选择“将设备添加到临时门户”来将随机设备添加到配置文件中，但它似乎不起作用。它只是将设备添加到 Developer iOS Provisioning Portal Devices 列表中。但是与此设备关联的配置文件不是我的分发配置文件，它的名称是：

> iOS 团队配置文件：* Xcode：iOS 通配符 AppID

而且我无法通过 ADP 修改它来更改配置文件。但我认为这不是答案。现在，问题是我有大约 1000 个用户，我不想创建一个新的配置文件来重新编译我的应用程序，然后让他们再次下载它们。

**有没有什么方法可以让我轻松更新此个人资料？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T06:10:53.517

您收到的错误可能会误导“给定的配置文件没有关联的设备，无法更新。”使用企业配置文件，您只需要为开发人员配置文件添加设备，而不是为分发添加设备。这就是为什么您在分发时没有设备限制的原因。我认为过期的个人资料不会影响当前使用您的应用程序的现有用户，但无论如何您最终都必须更新您的个人资料。我的建议是删除并重新创建它。

# c# - 根据外部参数验证文本框

> ID：10886741
> 
> 赞同：1
> 
> 时间：2012-06-04T19:01:20.797
> 
> 标签：c#, wpf, validation, xaml

我有一个窗口，有 8 行代表 8 个输出通道，在每个通道中我可以有时间步长。所以我在每个通道前面都有一个文本框来设置时间步长值的上限和下限。我现在要做的是编写一个验证器来检查用户输入是否在这些限制之内。我不确定如何执行此操作，因为当调用验证器时，它不知道从哪个通道调用它的时间步长，而且我认为不可能将额外信息传递给验证器。

**编辑：**

```
public class NumberValidator : ValidationRule
{
    public override ValidationResult Validate (object value, System.Globalization.CultureInfo cultureInfo)
    {
        double number = 0;
        try
        {
            number = Convert.ToDouble(value.ToString());  // Check for numeric value
        }
        catch (Exception)
        {
            return new ValidationResult(false, "Value must be numeric");
        }
        if (number == 0)                    // Check for non-zero value
        {
            return new ValidationResult(false, "Value must be non-zero");
        }
        return new ValidationResult(true, null);
    }
} 
```

这就是您通常使用验证器的方式，您将输入与某个常量值进行比较。我的问题是，而不是比较**数字**等于零。我想将**数字**与另一个对象的属性进行比较，但我不确定如何将这个另一个对象传递给验证器。

# perl - 使用 powershell 中的 perl 就地编辑文件

> ID：10886743
> 
> 赞同：2
> 
> 时间：2012-06-04T19:01:22.340
> 
> 标签：perl, powershell

我在一个目录中有一个文件 files.txt 的列表。我想通过每个文件运行文本替换。

```
$f = (get-content files.txt)
Foreach ($i in $f) { perl -pi -we "s/(\d{0,4})- /$1 - /g" $i } 
```

但是 perl 不喜欢在没有备份的情况下这样做。

> 没有备份就无法进行就地编辑。

所以我将 .bak 添加到 -i：

```
$f = (get-content files.txt)
Foreach ($i in $f) { perl -pi.bak -we "s/(\d{0,4})- /$1 - /g" $i } 
```

现在它抱怨：

> 无法打开 perl 脚本“.bak”：没有这样的文件或目录

我错过了什么？

更新：

我更喜欢的是一种完全没有外壳的方法。我可以`$^I`以某种方式在 perl 中执行此循环吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T22:34:41.163

```
my $qfn = 'files.txt';
open(my $fh, '<', $qfn)
   or die("Can't open file list \"$qfn\": $!\n");

local @ARGV = <$fh>;
local $^I = '.bak';
local $_;
while (<>) {
   s/(\d{0,4})- /$1 - /g;
   print;
} 
```

* * *

`\d`不使用 /a 时匹配超过 0-9，所以你可能想要

```
 s/(\d{0,4})- /$1 - /ag;
   -or-
 s/([0-9]{0,4})- /$1 - /g; 
```

请注意，上述内容并不能阻止 5 位数字按照您的需要进行匹配。为此，请使用：

```
 s/(?<![0-9])([0-9]{0,4})- /$1 - /g; 
```

现在，当您知道`\K`.

```
 s/(?<![0-9])[0-9]{0,4}\K- / - /g; 
```

最后，我们也可以摆脱重复`-`。

```
 s/(?<![0-9])[0-9]{0,4}\K(?=- )/ /g; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T09:55:27.890

ikegami 完全正确。在 powershell -i.bak 被解释为 -i .bak。解决方案是强制 powershell 将其作为单个参数传递。

像 perl '-pi.bak' -we .... # 用单引号将它们括起来。

# linq - LINQ 中的外连接语句

> ID：10886744
> 
> 赞同：0
> 
> 时间：2012-06-04T19:01:29.517
> 
> 标签：linq, linq-to-sql

我正在尝试在 LINQ 中创建外连接语句，但运气不佳。我知道执行外部连接需要两个步骤：

(1)将join转换为group join with into

(2) 如果连接的结果集为空，则在组上使用 DefaultIfEmpty() 生成您期望的空值。

我一直以这段代码为例：

```
var query = (from p in dc.GetTable<Person>()
join pa in dc.GetTable<PersonAddress>() on p.Id equals pa.PersonId into tempAddresses
from addresses in tempAddresses.DefaultIfEmpty()
select new { p.FirstName, p.LastName, addresses.State }); 
```

所以我试着这样做：

```
var outerJoin =

    from h in resultHours         
    join u in results on h.Key equals u.Key into outer
    from dictionary in outer.DefaultIfEmpty()
    select new { 
```

问题是智能感知无法识别 select new {} 语句中的任何内容。我试过你。和 h.，甚至是字典。

我可能遇到的问题是我正在尝试外部加入两个字典。它似乎不喜欢那样，虽然这是我被告知我需要做的。我显然做错了什么或不理解某事。

我需要将字典 results.Unit 与字典 resultHours.Hours 一起加入，因为我的输出在某些条件下缺少 unitId 字段。进行外部连接应该可以解决这个问题。

这是结果的代码：

```
var results = 

    (from v in VDimUnit     
        join vf in VFactEnergyAllocation on v.UnitKey equals vf.UnitKey
        join vd in VDimGadsEvent on vf.GadsEventKey equals vd.GadsEventKey
        join vt in VDimTime on vf.TimeKey equals vt.TimeKey 
    where typeCodes.Contains(vd.GadsEventTypeCode)
    && vt.YearNum >= (year - 3) && vt.YearNum <= year       
    group vf by new {v.PlantId, v.PhysicalUnitId, v.NetDependableCapacity, v.NetMaximumCapacity, 
    vt.MonthNum} into groupItem     
    select new {groupItem.Key.PlantId, groupItem.Key.PhysicalUnitId, groupItem.Key.NetMaximumCapacity,
    groupItem.Key.MonthNum, PO_HRS = groupItem.Sum(
    x=> (float)x.AllocatedEnergyMwh / groupItem.Key.NetDependableCapacity),
            UO_HRS = groupItem.Sum(x=> (float)x.AllocatedEnergyMwh / groupItem.Key.NetDependableCapacity),
        Unit = groupItem.Count(), groupItem.Key}).ToDictionary(x=> x.Key, x=> x); 
```

这是 resultHours 的代码：

```
var resultHours = 

    (from vt in VDimTime
        join vf in VFactEnergyAllocation on vt.TimeKey equals vf.TimeKey         
        join vd in VDimGadsEvent on vf.GadsEventKey equals vd.GadsEventKey
        join v in VDimUnit on vf.UnitKey equals v.UnitKey       

    group vt by new {v.PlantId, v.PhysicalUnitId, v.NetDependableCapacity, v.NetMaximumCapacity, 
        vt.MonthNum} into groupItem
    select new {groupItem.Key.PlantId, groupItem.Key.PhysicalUnitId, groupItem.Key.NetMaximumCapacity,
        Hours = groupItem.Count(), groupItem.Key}).ToDictionary(x=> x.Key.ToString(), x=> x.Hours); 
```

这就是我目前的输出方式。在我弄清楚如何进行外部连接后它会改变。

```
var finalResults = 

    (from r in results
    orderby r.Key.MonthNum, r.Key.PlantId, r.Key.PhysicalUnitId
    select new {Site = r.Key.PlantId, Unit = r.Key.PhysicalUnitId, r.Key.MonthNum, Numerator = r.Value.PO_HRS, Denominator = 
        resultHours[r.Key.ToString()], Weight = r.Key.NetMaximumCapacity, Data_Indicator = DATA_INDICATOR, 
        Budgeted = budgetedPlannedOutageHrs, Industry_Benchmark = INDUSTRY_BENCHMARK, Comments = comments, 
        Executive_Comments = executiveComments, Fleet_Exec_Comments = fleetExecComments}); 
```

我不知所措。我发现的 LINQ 外连接示例显然不适用于连接字典。

# android - 禁用通知托盘

> ID：10886762
> 
> 赞同：0
> 
> 时间：2012-06-04T19:02:47.940
> 
> 标签：android

先说一点背景。我正在为在 Android 平台上运行的企业设备开发一个应用程序。它不会在 Play 商店中分发，因此对公众不可用。这些设备归公司所有，其唯一目的是运行此应用程序。所以访问主屏幕/通知/应用程序历史/应用程序抽屉是不必要的，实际上我们希望将用户体验直接集中在这个应用程序上。

我面临的当前问题是阻止访问通知托盘。简单地使应用程序全屏并不是解决方案。我们确实需要查看状态栏。这是向用户提供网络、gps 和电池状态信息的最简单方法。

到目前为止，我的研究只找到了一种解决方案，即全屏显示（同样，这不是解决此问题的方法，我需要显示状态栏）。我知道有许多锁屏应用程序可以做到这一点，所以一定有办法。我只是还没有找到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T19:09:19.937

我不确定，但可能您不能只从应用程序级别锁定通知栏。Android 应用程序与操作系统和其他应用程序隔离，因此无法锁定操作系统功能。

我想到的解决方案是让应用程序全屏并创建自己的状态栏，其中包含电池电量、当前时间和网络状态。这并不难。

另一种解决方案是准备您自己的 Android 发行版 :)

此外，您可能希望覆盖所有按钮（主页、返回、搜索），以便用户无法离开您的应用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T19:13:22.017

很可能在 Stock 设备上是不可能的，您必须 root 并可能安装您自己的操作系统版本以允许这种行为。该系统是故意禁止应用程序具有此类行为的。操作系统的创建者将公众视为用户，他们希望防止应用程序能够将用户“锁定”在设备的某些部分之外。

像@Jacek 状态这样更简单的解决方案是全屏显示并制作您自己的视图以从通知栏中显示您想要的任何信息，AFAIK 有公共 API 可以访问所有这些信息。

# javascript - 有什么方法可以指定我想在 JS anon 函数中使用哪个“this”，类似于 Java 的做法？

> ID：10886764
> 
> 赞同：0
> 
> 时间：2012-06-04T19:02:50.310
> 
> 标签：javascript, bind, anonymous-function

我遇到过几次这个问题，我想知道是否可以在不必在父对象的上下文中将 anon 函数绑定到“this”的情况下解决它。

这是我的情况：

我有一个类似数组的对象，我们称之为“numline”，它实现了一个“each”方法。它包含在对象的另一个实例中，我们称之为“numtank”。当前代码如下所示：

```
function Numtank(numline) {
    this.numline = numline;
};
Numtank.prototype.charForElem(elem) {
    return "Number: " + elem;
}
Numtank.prototype.toString() {
    var str = "";
    this.numline.each(function(elem) {
        str += this.charForElem(elem); //But 'this' is called in the contex of the 'numline' instance, which dosen't (and shouldn't) have the charForElem class. 
    });

    return str;
}

var tank = new Numtank(arbatraryNumline);
tank.toString(); //Uncaught ReferenceError: charFromElem is not defined in numline 
```

当我问“类似于 Java 的做法”时，我的意思是 Java 如何允许您将类名添加到“this”以指定要使用的“this”。

有没有办法绕过这个而不必将匿名函数绑定到这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T19:07:21.150

通常所做的是保存一个名为`self`. 这是最常见的做法。

```
Numtank.prototype.toString() {
  var self = this, str = "";
  this.numline.each(function(elem) {
    str += self.charForElem(elem);
  });
  return str;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T19:04:41.007

您可以将 的副本保存`this`在另一个变量中。

```
var oldThis = this; 
```

该变量将对那些嵌套的回调函数可见。

# iphone - 每分钟 iOS 录音大小

> ID：10886765
> 
> 赞同：0
> 
> 时间：2012-06-04T19:02:52.277
> 
> 标签：iphone, ipad, size, voice, recording

一个非常高级的问题。我正在研究一次可以录制 2-3 小时录音的应用程序的可能性。

有谁知道低（语音质量）级别录音的每 MB 速率的近似分钟？现在我知道这可能取决于很多因素，但我只是在寻找一个近似数字，看看这在 2-3 小时内有多可行。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-01T04:29:50.657

以下是 iPhone 支持的少数编码的结果。持续时间 10 秒的音频文件大小（以 KB 为单位）。kAudioFormatMPEG4AAC : 164, kAudioFormatAppleLossless : 430, kAudioFormatAppleIMA4 : 475, kAudioFormatULaw : 889, kAudioFormatALaw : 889, 其中 kAudioFormatMPEG4AAC 的尺寸最小

我从网站上得到这个答案。仅供参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T19:29:17.743

在单通道的 CD 质量（每秒 44.1k 样本）下，您可以在 1 小时内获得 158.76 M 样本。将其乘以样本大小（例如 16 位整数），您将获得每个通道每小时 317.52 MB。这是最坏的情况，我敢打赌您可以实施压缩以减小物理尺寸。

请参阅[如何使用 ipad 录制语音等问题](https://stackoverflow.com/questions/5578598/how-to-record-voice-with-an-ipad)

# reporting-services - SSRS 2008 R2 数据驱动订阅中的最后一个记录永远存在

> ID：10886769
> 
> 赞同：1
> 
> 时间：2012-06-04T19:03:00.310
> 
> 标签：reporting-services, ssrs-2008

我正在运行 SSRS 2008 R2 并在报告上有数据驱动订阅。数据驱动查询中返回 44 行，因此 44 个报表将发布到 SharePoint 文档库。

当我开始订阅时，43 份报告在 3 分钟内交付。最后一个需要20分钟。最后一个参数没有什么特别之处。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T21:30:21.650

我想通了。找到 ReportServer.dbo.Notifications.ProcessAfter 列。这导致了“问题”，这可能不是真正的问题。不知道为什么报表服务器代码将这个字段设置到这么远的未来，但是在对我的报表参数进行了一些调整之后，这个问题就消失了。

# jquery - JavaScript 的 IE 条件

> ID：10886770
> 
> 赞同：1
> 
> 时间：2012-06-04T19:03:10.607
> 
> 标签：jquery, internet-explorer, scale, opacity

我遇到了 IE 对动态不透明度和使用 jQuery 缩放的支持的问题`.animate()`。我想更改 IE 存在问题的这些特定行，同时仍将它们保留为 Chrome 和 Firefox 中的“原始”方式。

我有一个在标签`<!-- [if IE]>`周围使用 qrapped的解决方案`<script>`。我的问题是我想在 .JS 文件的各个位置使用特定于行的 IE 条件。

是否有解决此问题的方法，或者我是否需要创建 .JS 文件的 IE 版本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T19:13:03.777

您总是可以使用 jQuery 进行浏览器相关检查...

```
if ($.browser.msie) {
   //IE
} else {
   //NOT IE
} 
```

# javascript - 加载时不可靠地检索图像中的属性

> ID：10886771
> 
> 赞同：4
> 
> 时间：2012-06-04T19:03:12.493
> 
> 标签：javascript, jquery, html, css, image

好奇的问题。我有一组图像，其中包含一些我想在 div 中使用的属性（作为标题）。使用每个，我想获取图像的宽度（和一些其他属性），以正确对齐动态生成的 div（作为图像的标题）。

```
img = $('img') 
img.each(function(index){
    var width = $(this).width();
    console.log(width);
    // other properties
    $('<div class="caption">Some text</div>').insertAfter($(this));

$(this).next().css({
  'width': width
  // other properties
}); 
```

但是，有时 $(this).width() 得到正确的值，其他时候得到 0。当在方向栏中按下返回时表现特别好，但当我按下 Ctrl+R 时却没有，但仅在 Chrome 中。它在所有浏览器中的工作方式都不一样，所以很乱。我认为 Jquery 试图在加载图像之前检索 width()，所以我将代码包装在 document.ready(function(){}) 而不是 (function(){})() 但它不起作用无论哪种方式。

可能会发生什么？作为参考，这些是应用于图像的样式：

```
display: block;
padding: 4px;
line-height: 1;
max-width: 100%;
margin-left: auto;
margin-right: auto; 
```

所以我想得到计算的宽度（据我所知，它应该由.css（）检索，但在这种情况下，不一致）。

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T19:16:34.137

jQuery 不会等待`$(document).ready()`.
请尝试[这里](http://www.jquery4u.com/dom-modification/types-document-ready/#.T80IZ7AZd9U)`$(window).load()`的示例 5 中提到的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T19:16:36.413

当您运行该代码时，图像很可能并未完全加载。尝试确保首先完成图像加载。

```
function imgDone(){
    var width = $(this).width();
    console.log(width);
    // other properties
    $('<div class="caption">Some text</div>').insertAfter($(this));
}
$('img').each(function(index){
    if (this.complete || this.readyState = 4)
        imgDone.apply(this);
    else
        $(this).load(function(){
            imgDone.apply(this);
        });
}); 
```

# php - 将 fsockopen 与代理一起使用

> ID：10886778
> 
> 赞同：4
> 
> 时间：2012-06-04T19:03:37.393
> 
> 标签：php, proxy, fsockopen, whois

我有一个简单的 whois 脚本

```
 if($conn = fsockopen ($whois_server, 43)) {
        fputs($conn, $domain."\r\n");
        while(!feof($conn)) {
            $output .= fgets($conn, 128);
        }
        fclose($conn);
        return $output;
    } 
```

$whois_server = whois.afilias.info；//信息域的whois服务器

但我想通过代理运行。所以我需要连接到代理 -> 然后连接到 whois 服务器 -> 然后发出请求。像这样的东西？

```
$fp = fsockopen($ip,$port);

fputs($fp, "CONNECT $whois_server:43\r\n $domain\r\n"); 
```

但这不起作用，我不知道我是否正确建立了第二个连接。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T13:18:55.290

将您的请求发送到代理应该做您喜欢的事情：

```
<?php
    $proxy = "1.2.3.4"; // proxy 
    $port = 8080; // proxy port

    $fp = fsockopen($proxy,$port); // connect to proxy
    fputs($fp, "CONNECT $whois_server:43\r\n $domain\r\n");

    $data="";
    while (!feof($fp)) $data.=fgets($fp,1024);
    fclose($fp);
    var_dump($data);
?> 
```

我建议您将 CURL 与以下内容结合使用，而不是这样做：

```
curl_setopt($ch, CURLOPT_PROXY, 1.2.3.4); 
```

# php - ajax 检查用户名 onblur

> ID：10886782
> 
> 赞同：0
> 
> 时间：2012-06-04T19:03:43.417
> 
> 标签：php, javascript, mysql, ajax

这是案例伙计们，**我试图在 ajax 的帮助下检查 onblur 事件上的用户名，它正在检查 mysql 数据库中的用户名可用性。**

这是ajax脚本=>

```
document.getElementById("r_username").onblur = function(){
        var http = false;
        var error = document.getElementById("error_username");
        var numLetter = /^[a-zA-Z-0-9]+$/;
        if (this.value==""){
            error.innerHTML = "Empty Field !!!";
            error.style.display = "inline";
        } else {
            if (this.value.match(numLetter)){
                if (window.XMLHttpRequest){
                    http = new XMLHttpRequest();
                } else {
                    http = new ActiveXObject("Microsoft.XMLHTTP");
                }
                if (http){
                    http.open("POST","./config/AjaxUsernameEmail.php",true);
                    http.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
                    http.onreadystatechange = function(){
                        if (http.readyState==4 && http.status==200){

                        }
                    };
                    http.send("r_username=" + document.getElementById("r_username").value);
                }
                error.innerHTML = "";
                error.style.display = "none";
            } else {
                error.innerHTML = "Invalid Number !!!";
                error.style.display = "inline";
            }
        }
    }; 
```

ajax 工作成功，.php 文件也在下面=>

```
class Checking{
private $con,$query,$flag;
public function __construct($con,$query){
    $this->con   = $con;
    $this->query = $query;
}
public function func(){
    if (mysqli_connect_errno()==0){
        if ($result = mysqli_query($this->con,$this->query)){
            if ($data = mysqli_fetch_assoc($result)){
                return $this->flag = true;
            } else {
                return $this->flag = false;
            }
        }
    }
}
}

if (isset($_POST['r_username'])){
    $check = new Checking($connection,"SELECT username FROM users WHERE username='" . $_POST['r_username'] . "'");

} else {
    header("Location: http://" . $mysql->host . "/index.php");
} 
```

一切正常，但问题是，我想以某种方式连接这些文件，我的意思是我想知道 .js 文件中何时用户名在数据库中匹配，何时不匹配，因为我想在其中执行更多操作。 js 文件，但我不能设置“标志”（这将帮助我的变量）。有任何想法吗 ？谢谢 ：）））

更详细地说，.js 文件在registration.php 文件中，你怎么能看到家伙.js 文件是用ajax AjaxUsernameEmail.php 文件调用的，所以我想以某种方式知道用户名何时匹配，何时不匹配，因为我希望在 registration.php 文件中在匹配期间执行更多操作（通知）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T19:12:49.690

对于 ajax 请求，您必须不是`return`该值，而是`print`它`echo`。尝试

```
if ($data = mysqli_fetch_assoc($result)){
   echo $this->flag = true; exit;
} else {
   echo $this->flag = false; exit;
} 
```

评价反应：

```
if ( http.readyState == 4 && http.status == 200 ) {
  switch ( http.responseText ) {
    case 1: //user name taken, diplay error message
    break;
    case 0: //user name available, no action required
    break;

  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T19:20:17.980

代码可能更像这样：

```
$return = 'fail';

class Checking {

    public function __construct($con, $query)
    {
        $this->con = $con;
        $this->query = $query;
        self::func()
    }

    public function func()
    {
        $result = 'ok';
        if (mysqli_connect_errno()==0){
            if ($result = mysqli_query($this->con,$this->query)){
                $result = mysqli_num_rows($result) > 0? 'user_exists' : 'user_doesnt_exist';
            }
        }
        return $result;
    }

}

if( $_POST['r_username'] ){
    $desired = mysqli_real_escape_string($_POST['r_username']);
    $return = new Checking($connection,"SELECT username FROM users WHERE username='$desired'");
}
echo $return; 
```

此外，您应该担心转义用户输入，并且可能希望查看[jQuery](http://jquery.com)以获取您的 ajax 内容。

客户端的检查应该是这样的：

```
if (http.readyState==4 && http.status==200){
    switch (http.responseText){
        case 'fail':
            //the username was not provided
        break;
        case 'user_exists':
            //the username already exists
        break;
        case 'user_doesnt_exist':
            //the username was not found on the database, continue
        break;

    }
} 
```

# c# - 为每个国家开发一个模块略有不同的解决方案

> ID：10886783
> 
> 赞同：0
> 
> 时间：2012-06-04T19:03:45.717
> 
> 标签：c#, design-patterns, software-design

目前我正在开发两个非常相似的解决方案（第一个针对 A 国，第二个针对 B 国）。我正在使用 wpf、c#、mvvm、sql 服务器。

每个解决方案中的一些模块都是相同的，其中一些是部分不同的（例如，一些类有额外的字段或方法），还有一些是完全不同的（例如 VAT 模块）。对我来说，开发完全独立的解决方案并不是最好的解决方案（时间成本）。

所以，我正在考虑创建两个解决方案（A 和 B），它们只包含我准备用户界面的主屏幕。然后，在第三个解决方案（C）中，我将拥有项目（=模块）并将它们从 A 或 B 链接起来。

如果两个版本的模块相同 - 没问题。如果它完全不同 - 好的，我必须独立开发它。但是，问题是如何设计略有不同的模块？

我是否应该使用抽象工厂设计模式并将所有相同的内容放入 AbstractProduct 中，并在 ConcreteProducts 中放入其他字段/方法？对于 WPF 表单，我不能使用这种模式——我必须为每个版本开发一个表单。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T19:11:11.003

你真正想要使用的是依赖注入。

首先，您创建一个接口，然后让您的具体实现为每个国家/地区实现此接口。

```
interface ISolution
{
....
}

class CountryA : ISolution{
...
}

class CountryB : ISolution{
...
} 
```

然后将这些接口注册到组合根的实现映射。

```
private static IContainer ConfigureDependencies() {
            return new Container(x =>{
                x.For<ISolution>().Use<CountryA>();

            });
        } 
```

然后你要求容器给你一个 ISolution 的实例。它将为您提供正确的 impl。

您可以对 CountryB 执行相同的操作。

你可以有自动连接或后期绑定，更动态的东西。你可以切换impls。

看看结构图的例子。

# git - 更新 SVN 存储库的 git 镜像

> ID：10886784
> 
> 赞同：11
> 
> 时间：2012-06-04T19:03:59.560
> 
> 标签：git, git-svn

我通过执行以下操作创建了 SVN 存储库的 git 镜像：

*   在 github 上创建一个新的 repo
*   mkdir 镜像 && cd 镜像
*   git svn init [svn 网址]
*   git svn 获取 -rHEAD
*   git 远程添加源 [github url]
*   git svn 变基
*   git push 起源大师

这很好用，我可以简单地更新它：

*   git svn 变基
*   git push 起源大师

但是，如果我移动到另一台计算机并想要更新它，我尝试了：

*   git 克隆 [github 网址]
*   git svn init [svn 网址]
*   git svn 获取 -rHEAD
*   git 远程添加源 [github url]
*   git svn 变基

但在这里我得到：

“无法从工作树历史中确定上游 SVN 信息”

谁能解释这样做的正确方法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-03T17:13:35.487

我有同样的需求，最终在这里找到了一个例子：

[http://rip747.wordpress.com/2009/06/17/reviving-a-git-svn-clone/](http://rip747.wordpress.com/2009/06/17/reviving-a-git-svn-clone/)

要在您的问题的上下文中回答：

```
git clone [github url]
cd repo
git svn init [svn url]
git update-ref refs/remotes/git-svn refs/remotes/origin/master
git svn rebase 
```

# powershell - 从 Add-WindowsFeature cmdlet 清除 PowerShell 覆盖

> ID：10886786
> 
> 赞同：2
> 
> 时间：2012-06-04T19:04:12.550
> 
> 标签：powershell, powershell-2.0, cmdlets

我最近注意到，在创建使用Windows Server 2008 R2 上的[ServerManager 模块中的](http://technet.microsoft.com/en-us/magazine/ff476071.aspx)[Add-WindowsFeature](http://technet.microsoft.com/en-us/library/ee662309.aspx) cmdlet 的powershell 脚本时，在整个脚本完成之前不会清除水蓝色覆盖层。例如，下面是使用命令安装 IIS 的脚本的屏幕截图：`Add-WindowsFeature Web-Server`

![Add-WindowsFeature Web-Server 覆盖](../Images/6e4331090e68a3826583f671055c308d.png)

正在收集数据... 开始安装... 覆盖始终位于控制台历史记录的顶部，并且在整个脚本完成之前不会消失。有没有办法让控制台重新绘制自己或禁用覆盖？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T20:30:11.210

这只是服务器管理器 cmdlet 内部调用的 Write-Progress 的结果。如果你想让它保持沉默 - 只需将你的 $ProgressPreference 更改为“SilentlyContinue”。

您可以通过自己使用 Write-Progress 来模拟这一点：

```
for ($i = 0; $i -lt 100; $i++) { 
    Write-Progress -Activity "Counting: $i" -Status "$i" -PercentComplete $i
    sleep 1 
} 
```

HTH 巴特克

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T18:28:36.797

我找到了一个有趣的方法来解决这个问题。在使用 write-progress 时，您可以简单地实现一个辅助循环，该循环除了在末尾添加一个 -completed 开关之外什么都不做。

```
for ($i = 1; $i -le 100; $i++ )
{write-progress -activity "Search in Progress" -status "$i% Complete:" -percentcomplete $i;} 
```

上面的代码当然是你的功能循环，它显示进度并实际做某事。

```
for ($i = 1; $i -le 100; $i++ ) {
write-progress -activity "Finishing" -status "$i% Complete:" -percentcomplete $i -Completed;} 
```

运行这个不执行任何操作的确切代码段，并且因为您使用 -completed 开关使进度对话框覆盖消失。不完全是一个简洁的解决方案，但仍然可以满足我的需求。

# java - Linux从java jar写入文件

> ID：10886787
> 
> 赞同：0
> 
> 时间：2012-06-04T19:04:17.310
> 
> 标签：java, javascript, linux

我正在从 Java jar 可执行文件写入文本文件。jar 生成正确的文件，但文件的权限设置为 root，因此我的其他 Javascript 无法读取该文件。当我尝试通过 ajax 读取文件时，它返回“Permission Denied”。在 Java 中创建文件时如何解决此问题？我目前正在运行 Java 1.6。

当我在 Eclipse 中运行应用程序时，我没有遇到这个问题。一旦我将它移植到 jar 权限更改为 root 访问。

我正在运行罐子

```
exec('java -jar writeToFile.jar'); 
```

写入文件是标准的

```
public void writeContents(String fp,String contents){
    try{
        BufferedWriter write = new BufferedWriter(new FileWriter(fp));
        write.write(contents);
        write.close();
    }catch(Exception e){
        System.out.println("Failed to write to file " + fp + " error: " + e.toString());
        e.printStackTrace();
    }
} 
```

写入文件工作正常，它创建文件正确的目录和所需的数据，在 eclipse 中运行它和通过 jar 运行它之间的唯一区别是文件权限。jar 将文件设置为 root。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-04T19:09:59.437

我不确定，但是使用[Files](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#setAttribute%28java.nio.file.Path,%20java.lang.String,%20java.lang.Object,%20java.nio.file.LinkOption...%29)类，您可以在文件中读取和写入属性。可能有一些必须设置的操作系统的特定属性。

如果您也想操作它，还有一个 setOwner 方法。

# java - SWT 如何打印滚动合成的内容？

> ID：10886789
> 
> 赞同：2
> 
> 时间：2012-06-04T19:04:38.283
> 
> 标签：java, eclipse, cross-platform, swt

有谁知道我将如何打印滚动合成的内容？

每当我打印到 GC 上时，它只会复制滚动合成的当前可见区域。我想要的是能够复制滚动合成的全部内容。

例如，下面的代码在一个小窗口内创建了一个巨大的按钮。当我打印下面的 gc 时，它只会输出滚动复合的小可视区域。是否可以打印滚动合成中的所有内容？

```
Shell shell = new Shell(getDisplay());
shell.setLayout(new FillLayout());
shell.setSize(200, 200);
shell.setLocation(20, 20);

ScrolledComposite sc = new ScrolledComposite(shell, SWT.H_SCROLL| SWT.V_SCROLL);
sc.setMinSize(availWidth, availHeight + 30);

Button b = new Button(sc, SWT.PUSH);
b.setText("Button");
b.setSize(availWidth, availHeight);
sc.setContent(b);

Image image = new Image(getDisplay(), availWidth, availHeight);
GC imageGC = new GC(image);
sc.print(imageGC); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T09:52:04.697

**`Note >>>`**

请参阅下面的[@CryptDemon](https://stackoverflow.com/users/1332225/cryptdemon)评论。尽管已知该解决方案适用于 Windows 7 和 eclipse 3.7.x 版本。

* * *

对的，这是可能的。**您面临的问题是由于为滚动窗口**生成 Windows 绘制事件的方式（我假设是 Windows 操作系统，因为我只有那个！！）。

在任何给定时刻（根据您的代码），您的可见尺寸`scrolled composite`都**小于**实际尺寸。`print()`现在，当您调用`scrolled composite`then 时，只有其中的一部分（当时可用/可见）被打印出来。像这样：

![边框是为了清晰](../Images/c267d1545f7ec54c4936443366a5551d.png)

**解决方案**是在您的`Composite`内部创建一个固定`scrolled composite`并调用 print 。

**`Code:`**

```
import org.eclipse.swt.SWT;
import org.eclipse.swt.custom.ScrolledComposite;
import org.eclipse.swt.events.SelectionAdapter;
import org.eclipse.swt.events.SelectionEvent;
import org.eclipse.swt.graphics.GC;
import org.eclipse.swt.graphics.Image;
import org.eclipse.swt.graphics.ImageData;
import org.eclipse.swt.graphics.ImageLoader;
import org.eclipse.swt.layout.FillLayout;
import org.eclipse.swt.layout.GridLayout;
import org.eclipse.swt.widgets.Button;
import org.eclipse.swt.widgets.Composite;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Shell;

public class Scrolled 
{
    public static void main(String[] args)
    {
        final Display display = new Display();

        Shell shell = new Shell(display);
        shell.setLayout(new FillLayout());
        shell.setSize(200, 200);
        shell.setLocation(20, 20);

        final ScrolledComposite sc = new ScrolledComposite(shell, SWT.BORDER  | SWT.V_SCROLL | SWT.H_SCROLL);
        sc.setLayout(new GridLayout(1,true));

        final Composite innerComposite = new Composite(sc, SWT.NONE);
        innerComposite.setSize(400, 400);
        innerComposite.setLayout(new GridLayout(1, true));

        for(int i = 0; i < 10; i++)
        {
                Button b = new Button(innerComposite, SWT.PUSH);
                b.setText("Text");
                b.addSelectionListener(new SelectionAdapter() {
                    public void widgetSelected(SelectionEvent e) 
                    {
                        Image image = new Image(display, innerComposite.getBounds().width, innerComposite.getBounds().height);
                        ImageLoader loader = new ImageLoader();

                        GC gc = new GC(image);
                        sc.print(gc);
                        gc.dispose();

                        loader.data = new ImageData[]{image.getImageData()};
                        loader.save("c:/temp/out.png", SWT.IMAGE_PNG);
                    }
                });
        }

        sc.setMinSize(innerComposite.computeSize(SWT.DEFAULT, SWT.DEFAULT));
        sc.setContent(innerComposite);
        sc.setExpandHorizontal(true);
        sc.setExpandVertical(true);

        shell.open();
        while (!shell.isDisposed()) {
                if (!display.readAndDispatch())
                        display.sleep();
        }
        display.dispose();
    }
} 
```

**`Output:`**

![在此处输入图像描述](../Images/a5c7648b8293fcd0a4285df9cd5d27aa.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-29T02:24:18.987

SWT（GTK3 似乎修复了这个错误），但是在我们的项目中，我们打算继续使用 SWT（GTK2），我们的解决方案是创建一个临时外壳并将控制重新设置为临时外壳

```
import org.eclipse.swt.SWT;
import org.eclipse.swt.custom.ScrolledComposite;
import org.eclipse.swt.events.SelectionAdapter;
import org.eclipse.swt.events.SelectionEvent;
import org.eclipse.swt.graphics.GC;
import org.eclipse.swt.graphics.Image;
import org.eclipse.swt.graphics.ImageData;
import org.eclipse.swt.graphics.ImageLoader;
import org.eclipse.swt.layout.FillLayout;
import org.eclipse.swt.layout.GridLayout;
import org.eclipse.swt.widgets.Button;
import org.eclipse.swt.widgets.Composite;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Shell;

public class Scrolled {
    public static void main(String[] args) {
        final Display display = new Display();

        Shell shell = new Shell(display);
        shell.setLayout(new FillLayout());
        shell.setSize(200, 200);
        shell.setLocation(20, 20);

        final ScrolledComposite sc = new ScrolledComposite(shell, SWT.BORDER | SWT.V_SCROLL | SWT.H_SCROLL);
        sc.setLayout(new GridLayout(1, true));

        final Composite innerComposite = new Composite(sc, SWT.NONE);
        innerComposite.setSize(400, 400);
        innerComposite.setLayout(new GridLayout(1, true));

        for (int i = 0; i < 10; i++) {
            Button b = new Button(innerComposite, SWT.PUSH);
            b.setText("Text");
            b.addSelectionListener(new SelectionAdapter() {
                public void widgetSelected(SelectionEvent e) {
                    Image image = new Image(display, innerComposite.getBounds().width,
                            innerComposite.getBounds().height);
                    ImageLoader loader = new ImageLoader();

                    GC gc = new GC(image);

                    // Create a temp shell and reparent it+
                    Shell newShell = new Shell(shell);
                    newShell.setLayout(new FillLayout());
                    Composite oldParent = sc.getParent();
                    oldParent.setRedraw(false);
                    sc.setParent(newShell);
                    newShell.open();
                    sc.print(gc);
                    sc.setParent(oldParent);
                    oldParent.setRedraw(true);

                    gc.dispose();
                    newShell.dispose();

                    loader.data = new ImageData[] { image.getImageData() };
                    loader.save("./out.png", SWT.IMAGE_PNG);
                }
            });
        }

        sc.setMinSize(innerComposite.computeSize(SWT.DEFAULT, SWT.DEFAULT));
        sc.setContent(innerComposite);
        sc.setExpandHorizontal(true);
        sc.setExpandVertical(true);

        shell.open();
        while (!shell.isDisposed()) {
            if (!display.readAndDispatch())
                display.sleep();
        }
        display.dispose();
    }
} 
```

# java-ee-6 - 自定义标记文件代码辅助不在 Eclipse 中工作，但在 IntelliJIDEA 中工作

> ID：10886793
> 
> 赞同：0
> 
> 时间：2012-06-04T19:04:48.737
> 
> 标签：java-ee-6

我是 JavaEE 的新手，但很难学习它。

我注意到一件事不起作用，那就是 Eclipse 中自定义标记文件中的代码辅助。在 IntelliJIDEA 当前版本中同样工作。下面的两个屏幕截图。

有人帮我在 Eclipse Indigo Service Release 2 中启用 Code Assist。

***已编辑***

当我键入 ${user.}（即 EL）时，NetBeans 和 Esclipse 不显示自定义类的代码帮助。只有 IntelliJIDEA 支持。

**蚀**

![蚀](../Images/872b4be284cddf5926baf3dbd1940eb9.png)

**IntelliJIDEA**

![IntelliJIDEA](../Images/846ffb016c8969db4095dae65b82c4c0.png)

**JAR 文件**

![罐子文件](../Images/1ea3708927d85f79e9d2bd79ced1a5ac.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T19:13:52.703

1）尝试窗口/首选项/Web/JSP文件/编辑器/内容辅助。

确保选中 HTML 和 XML 标记建议复选框。

2）你能把它指定为一个标签库而不是一个标签导入吗？

```
<%@ tablib prefix="user" uri="/WEB-INF/tags/User.tld" %> 
```

3) 你在类路径中有正确的库吗？ [为 JSP 文件启用内容辅助](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.wst.sse.doc.user/topics/tsrcedt023.html)

在 Java™ 构建类路径中定义正确的文件对于内容辅助在 JSP 文件中正常工作至关重要。链接构建器还必须能够正确解析 JSP 和 HTML 文件中指向 servlet 或 Java bean 的链接。要为 JSP 文件启用内容辅助：

要确定构建路径是否正确，请从项目的弹出菜单中选择“属性”。选择 Java Build Path，然后选择 Libraries 页面。您应该看到以下文件：

```
 j2ee.jar
    rt.jar
    servlet.jar
    webcontainer.jar 
```

如果它们不存在，请将它们添加为外部 JAR 文件。您可能拥有这些文件的自己的版本，具体取决于您正在开发的 JDK 或 Servlet API 的级别。如果您的 Web 应用程序引用了其他 JAR，您可以将它们放在构建路径中，如下所示：

```
Use the Add JARs button on the Library page.
You must ensure that the JAR file is available to the server by properly
    configuring the server.
Add the JARs to the WEB-INF/lib directory.
    They will be automatically added to the build path and deployed to the
    server in as part of the project WAR. 
```

# asp.net-mvc-2 - knockout.js 将表单加载到 viewModel

> ID：10886795
> 
> 赞同：2
> 
> 时间：2012-06-04T19:05:06.470
> 
> 标签：asp.net-mvc-2, data-binding, knockout.js

我目前正在成功地使用 knockout.js 来处理我的应用程序中的所有数据绑定。但是，在每个页面加载时，在我的 document.ready 中，我正在执行一个初始异步数据加载，如下所示：

```
$(document).ready() {
  getData()
}); 
```

但是，是否可以改为将数据加载到表单中（使用 ASP.NET MVC2），然后根据数据绑定标签将数据反向加载到视图模型中？

我觉得这行不通，我只是想确认我没有做任何不当的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T20:27:02.910

'value' 绑定最初将元素的值设置为视图模型中的值，所以不是。但是，您可能会将“值”绑定的代码复制到您自己的处理程序中，该处理程序最初会根据控件上的值设置模型值。下载 knout 的[调试版本](http://cloud.github.com/downloads/SteveSanderson/knockout/knockout-2.1.0.debug.js)，并`ko.bindingHandlers['value'] = {`在第 2182 行查找。复制此绑定处理程序声明并将 'value' 更改为其他内容，然后在 init 末尾添加对 valueUpdateHandler() 的调用：

```
ko.bindingHandlers['myvalue'] = {
    'init': function (element, valueAccessor, allBindingsAccessor) {
        // skipping code
        valueUpdateHandler(); // update model with control values
    },
    'update': function (element, valueAccessor) {
        // skipping code
    }
}; 
```

现在，当您使用 myvalue 绑定时，您的模型将在最初绑定时使用控制值进行更新：

```
<input type="text" data-bind="myvalue: name"></input> 
```

或者，您可以调用原始值而不是复制所有代码，只需在 init 之后添加 valueUpdateHandler 中的代码：

```
ko.bindingHandlers['myvalue'] = {
    'init': function (element, valueAccessor, allBindingsAccessor) {
        // call existing value init code
        ko.bindingHandlers['value'].init(element, valueAccessor, allBindingsAccessor);

        // valueUpdateHandler() code
        var modelValue = valueAccessor();
        var elementValue = ko.selectExtensions.readValue(element);
        ko.jsonExpressionRewriting.writeValueToProperty(modelValue, allBindingsAccessor, 'value', elementValue, /* checkIfDifferent: */ true);
    },
    'update': function (element, valueAccessor) {
        // call existing value update code
        ko.bindingHandlers['value'].update(element, valueAccessor);
    }
}; 
```

如果您不想使用 AJAX，您始终可以通过将模型序列化为 JSON（剃刀语法）将值导入 javascript：

```
<script type="text/javascript">
var model = @(new HtmlString(new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(Model)));
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T09:31:31.467

这里有一个工作示例（不是我的），有几种不同的方法可以实现这一点：

[http://jsfiddle.net/rniemeyer/5Z2SC/](http://jsfiddle.net/rniemeyer/5Z2SC/)

# c# - 获取RegistryKey的相对路径

> ID：10886799
> 
> 赞同：2
> 
> 时间：2012-06-04T19:05:30.327
> 
> 标签：c#, registry

我有一个指向例如“HKCU\Software\Test”的 System.Win32.RegistryKey 对象。.Name 属性填充了绝对路径。有没有办法只获取当前（相对）键名？

在上面的示例中，我正在寻找路径的“测试”部分。我正在寻找与 System.IO.Path.GetDirectoryName 等效的注册表，而无需手动解析路径。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T19:07:39.280

你可以打电话`System.IO.Path.GetDirectoryName`。

这些`Path.*`函数（除了`GetFullPath()`）是纯字符串操作函数，即使使用非文件系统路径也能正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T19:07:33.057

您可以简单地使用`System.IO.Path.GetDirectoryName(string)`which 适用于注册表路径。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-24T18:39:45.860

该问题要求相对值（只是测试）而不是绝对完整路径。该`GetDirectoryName`方法返回绝对路径。您要使用的方法是：

```
System.IO.Path.GetFileNameWithoutExtension(subkey.Name); 
```

看到这个[链接](http://msdn.microsoft.com/en-us/library/system.io.path.getfilenamewithoutextension.aspx)

# javascript - 使用 JavaScript 在 URL 哈希中插入特殊字符

> ID：10886802
> 
> 赞同：-1
> 
> 时间：2012-06-04T19:05:58.737
> 
> 标签：javascript, url, yui, special-characters

我想在我的 URL 中添加哈希。例如

```
http://somesite.com/somesubdomain#p1=1&p2=2&p3=3 
```

当我尝试这样做时，我得到的只是：

```
http://somesite.com/somesubdomain#p1=1%23p2=2%23p3=3 
```

所以，简而言之，如何在我的 URL 哈希中添加特殊字符。

**编辑：**

我正在使用 YUI 浏览器历史管理器。

```
var hash = "p1=1&p2=2&p3=3"
YAHOO.util.History.navigate("state",hash); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T19:24:25.240

您应该在 YUI 中执行此操作的方式类似于：

```
YAHOO.util.History.navigate('p1','1');
YAHOO.util.History.navigate('p2','2');
YAHOO.util.History.navigate('p3','3'); 
```

如果您希望浏览器 URL 字符串为`http://somesite.com/somesubdomain#p1=1&p2=2&p3=3`

文档中的[日历示例演示了这一点。](http://developer.yahoo.com/yui/examples/history/history-multiple_clean.html)

# facebook - 如何在 JavaScript SDK 中设置 Facebook 访问（从服务器）

> ID：10886812
> 
> 赞同：5
> 
> 时间：2012-06-04T19:06:47.493
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

如果我使用服务器端流程对用户进行身份验证并获取访问令牌，我如何在 JavaScript SDK 中设置该访问令牌并使用它从客户端进行调用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T20:28:53.870

用户完成服务器端身份验证流程后，用户已获得您的应用程序的授权，您需要做的就是使用[FB.getLoginStatus](http://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/)方法：

```
FB.getLoginStatus(function(response) {
    if (response.status === "connected") {
        console.log("authResponse: ", response.authResponse);
        FB.api("me", function(response2) {
            console.log("Hey there " + response2.name);
        });
    }
    else if (response.status === "not_authorized") {
        // user is logged in to facebook but hasn't authorized your app, should not happen if he went through the server side authentication
    }
    else {
        // user is logged out of facebook, also should not happen
    }
} 
```

如您所见，您可以简单地使用 js sdk 来查询图形，无需手动获取令牌，但如果您仍然需要它，`authResponse`则应具有以下格式：

```
authResponse: {
    accessToken: "aaaaaaa",
    expiresIn: "bbbbbb",
    signedRequest: "cccccc",
    userID: "dddddd"
} 
```

* * *

# 编辑

如果用户登录到 facebook 并允许并与您的应用程序交互，那么是的，`getLoginStatus`应该返回一个有效的访问令牌。
在少数情况下情况并非如此，其中一种是令牌已过期。

正如它在[处理无效和过期的访问令牌](http://developers.facebook.com/docs/authentication/access-token-expiration/)中所述：

> **使用 Javascript SDK 实现身份验证的桌面 Web 和移动 Web 应用程序**
> 
> 调用 FB.getLoginStatus() 或确保 status: true 在您调用 FB.init() 时设置意味着下次用户登陆您的应用程序并登录 Facebook 时，您将通过这些调用传递 authResponse 对象将包含一个新的、有效的访问令牌。
> 
> 在这种情况下，它只是用户使用您的应用程序的行为，它隐式地生成了一个新的访问令牌。

# iphone - iOS：tableView 的静态 sectionHeaderView

> ID：10886813
> 
> 赞同：0
> 
> 时间：2012-06-04T19:06:53.080
> 
> 标签：iphone, ios, xcode, ipad, uitableview

**背景：**我已经实现了一个标准的 tableView，它有 4 个部分。每个部分都包含标题的自定义视图。正常情况下，当下面的 header 滚动到 tableView 的顶部时，前一个 header 会被推开。

**问题：**是否有可能防止这种“被推出”的行为。我想要一些类似于“堆叠”行为的东西。这是因为我希望用户能够全面了解可用的标头。例如，如果滚动到最低的单元格，则会看到 tableView 顶部的所有标题。

**附加信息：**请不要用hacks回答，例如，跟踪tableView的移动，在需要时手动添加标题视图，然后调整tableView的大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T19:54:54.507

如果不使用您描述的方法，这是不可能的。至少不是内置的表格视图。

一个原因是它不能扩展到任意内容。如果让部分标题堆积起来，当整个屏幕充满标题时会发生什么？当只剩下几个像素来显示内容时，用户如何能够舒适地看到第 6 或第 7 部分下的内容并与之交互，因为屏幕的其余部分被用户明显所在的部分的标题占据不感兴趣。

您可能想重新考虑您的 UI。要么使用标准部分标题，要么制作一些很酷的轻量标签，自定义口琴控件或完全不同的东西。甚至可能是层次结构，具体取决于您要呈现的内容量。

# android - 配置 Eclipse 以使用签名密钥库

> ID：10886814
> 
> 赞同：49
> 
> 时间：2012-06-04T19:06:59.313
> 
> 标签：android, keystore

我终于为我的应用程序创建了一个“最终”密钥库。由于我的应用正在使用谷歌地图，我认为我必须更新所有布局以使用该应用产生的新 API 密钥。

现在我完全了解导出已签名 APK 以供发布的要求，但之后呢？我的想法是，对于进一步的开发和测试，如果我可以将 Eclipse 配置为使用我的最终密钥库而不是调试密钥库，那将是最简单的……但我发现没有办法做到这一点？它只允许我配置一个“替代”调试密钥，但我想这不一样​​。

对不起，如果我在这里完全误解了某些东西，我太困惑了。

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-06-04T19:18:57.433

您可以通过转到 Preferences -> Android -> Build 并在“Custom debug keystore”选项中输入文件名，在 Eclipse 中配置自定义密钥库以用于调试构建（单击运行时发生的构建...） .

**但是**，需要注意的是，它必须遵循与传统调试密钥库相同的规则，主要是：

1.  密钥库密码必须是“android”
2.  它必须包含一个名为“androiddebugkey”的键
3.  该密钥的密码必须是“android”

因此，虽然可以使用与导出相同的密钥库在调试中签署您的应用程序，但它要求您的生产密钥库看起来像一个调试存储，这使得如果有人在文件中持有它会降低安全性（这会更容易检查和猜测密码）。

高温高压

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2012-12-24T07:39:24.497

我能够使用我的 Google Play 发布密钥库作为我的自定义调试密钥库来帮助调试应用内购买功能。毫无疑问，这同样适用于调试谷歌地图的东西。

正如[Devunwired 提到](https://stackoverflow.com/a/10886988/1134080)的，有一些警告。但我的解决方案是这样的：

1.  将您的发布密钥复制到某处。
2.  [按照此处的说明](http://blog.blundellapps.com/tut-change-alias-passwords-of-your-android-keystore/)更改密钥库密码/密钥密码和密钥别名（另外，按照 Devunwired 的建议使其看起来像调试密钥库）。
3.  将 Eclipse 的 Preferences > Android > Build > Custom keystore 设置更改为在步骤 1 中创建的副本的路径。
4.  完毕！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-02-19T10:09:11.740

为了让 Eclipse 在您部署时自动为您签名，您需要设置一个行为类似于调试密钥库的密钥库。这意味着必须有一个“androiddebugkey”，并且密钥和密钥库密码都必须是“android”。因此，我建议以下内容：

1.  复制您的密钥库，我将我的复制到一个名为 iap.keystore 的文件中
2.  在路径上使用 keytool 打开终端/命令窗口（对我来说，路径是 D:\NVPACK\jdk1.6.0_45\bin\keytool.exe）或`keystore`在下面的命令中使用完整路径
3.  将您的密钥库密码更改为“android”：
    *   `keytool -storepasswd -keystore iap.keystore`
    *   按照提示输入您的旧密钥库密码
    *   按照提示输入`android`新密码
    *   按照提示确认`android`密码
4.  将您的密钥重命名为`androiddebugkey`（**在下一个命令中****替换为您当前的密钥名称）`Old_Key_Store_Name`**
    *   `keytool -changealias -keystore iap.keystore -alias Old_Key_Store_Name -destalias androiddebugkey`
    *   按照提示输入您的密钥库密码（现在是`andorid`）
    *   按照提示输入您的`Old_Key_Store_Name`密码（这是您之前设置的密钥密码）
5.  更改您的密码`androiddebugkey`
    *   `keytool -keypasswd -keystore iap.keystore -alias androiddebugkey`
    *   按照提示输入您的密钥库密码（现在是`andorid`）
    *   按照提示输入您的`androiddebugkey`密码（这是您之前设置的密钥密码）
    *   按照提示输入`android`新的密钥密码
    *   按照提示确认`android`为密钥密码
6.  您现在有一个密钥库（带有密钥），Eclipse 可以使用它来自动签署构建器。
7.  加载 Eclipse。
8.  窗口 -> 首选项 -> Android -> 构建
9.  按照“自定义调试密钥库”浏览到我们之前创建的 iap.keystore 文件
10.  好的

现在，当您启动/调试项目时，它将使用我们刚刚设置的密钥库来签署您的项目。这将允许 IAP 之类的东西起作用。

**注意：**这很方便，但当然，如果有人掌握了您的 iap.keystore，他们将能够通过使用“android”作为密钥库/密钥密码来以您的身份进行签名。希望这显然来自上面列出的步骤，但请花点时间了解这对您自己（或您的公司）意味着什么。然后根据此决定风险是否可以接受，以及是否需要执行任何额外措施以确保此文件的安全性。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-04-21T07:15:56.553

我们设置自定义密钥库以用于我们的调试构建。Eclipse 转到 Preferences -> Android -> Build 并在“自定义调试密钥库”中输入文件名。

当我们为 Eclipse 海关创建密钥库时很重要：

密钥库密码必须是“android” 它必须包含一个名为“androiddebugkey”的密钥 该密钥的密码必须是“android” 因此，虽然可以使用与导出相同的密钥库在调试中签署您的应用程序，但它需要您的生产keystore 看起来像一个调试存储，如果有人得到文件，这会降低安全性（检查和猜测密码会更容易）。

如果我们想更改密钥库密码： $ keytool -storepasswd -keystore my.keystore

如果我们想更改密钥库别名密码： $ keytool -keypasswd -keystore my.keystore -alias my_name

如果我们想更改密钥库别名： $ keytool -changealias -keystore my.keystore -alias my_name -destalias my_new_name

Vkj ![在此处输入图像描述](../Images/978d036a9ccfc2e86ce4cdbbcb556524.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-11T23:39:55.833

前段时间我们办公室也有同样的问题。由于我们经常需要这个，所以我们编写了一个简单的脚本来轻松将发布密钥库转换为调试密钥库。

该脚本可在[https://github.com/IntellexApps/key2debug上找到](https://github.com/IntellexApps/key2debug)

我们现在使用它有一段时间了，所以应该很稳定。

干杯！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-16T07:31:29.490

这里有在调试密钥库中转换常规密钥库的说明： [https ://stackoverflow.com/a/15754187/917362](https://stackoverflow.com/a/15754187/917362)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-06-04T15:17:50.893

您可以使用 Google Developers Console (console.developers.google.com) 为同一个 Google API 密钥输入调试和发布 SHA1。

这样，您将拥有相同的 API 密钥，并且不再需要在 AndroidManifest.xml 中更改它。

# javascript - 自定义几何体和面法线问题

> ID：10886818
> 
> 赞同：2
> 
> 时间：2012-06-04T19:07:28.340
> 
> 标签：javascript, three.js

我对 ThreeJS 很陌生，我有一个小问题（可能是错误的用法）。我正在尝试创建自定义几何体并自己定义面法线。

我在一个方向创建一个法线，另一个在相反方向创建一个法线，因为我的网格不是 2 面的，我希望只能看到其中一个面，但是我可以看到它们两个……知道我是什么做错了吗？

谢谢！

```
<body>

    <script src="../build/Three.js"></script>

    <script src="js/Stats.js"></script>

    <script>
        var container, stats;

        var camera, scene, renderer;

            container = document.createElement( 'div' );
            document.body.appendChild( container );

            scene = new THREE.Scene();

            camera = new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 1, 2000 );
            camera.up.x = 0;
            camera.up.y = 0;
            camera.up.z = 1;

            camera.position.x = 300;
            camera.position.y = -1000;
            camera.position.z = 1000;

            camera.lookAt(new THREE.Vector3(300, 250, 0));
            scene.add( camera );

            var light, geometry, material;

            scene.add( new THREE.AmbientLight( 0x404040 ) );

            light = new THREE.DirectionalLight( 0xffffff );
            light.position.set( 0, 1, 0 );
            scene.add( light );

            material = new THREE.MeshBasicMaterial( { color: 0xFFFF00, wireframe: false, transparent: false, opacity: 1 } );

            geometry = new THREE.Geometry();
            geometry.vertices.push(new THREE.Vector3(0,0,0));
            geometry.vertices.push(new THREE.Vector3(600,0,0));
            geometry.vertices.push(new THREE.Vector3(0,-500,0));
            geometry.vertices.push(new THREE.Vector3(600,-500,0));
            var face;

            face = new THREE.Face3(0,2,1);
            face.normal.set(0,0,-1);
            geometry.faces.push(face);
            face = new THREE.Face3(2,3,1);
            face.normal.set(0,0,1);
            geometry.faces.push(face);

            geometry.computeCentroids();
            //geometry.computeFaceNormals();
            //geometry.computeTangents();

            var mesh = new THREE.Mesh(geometry, material);

            scene.add(mesh);

            renderer = new THREE.WebGLRenderer( { antialias: true } );
            renderer.setSize( window.innerWidth, window.innerHeight );

            container.appendChild( renderer.domElement );

            renderer.render( scene, camera );

    </script>

</body> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T19:32:50.540

`WebGLRenderer`使用您创建面的顶点顺序而不是法线来定义方向。尝试这样做：

```
face = new THREE.Face3(2,1,3); 
```

# java - 如何让android只在一只耳朵里发出哔哔声？

> ID：10886822
> 
> 赞同：3
> 
> 时间：2012-06-04T19:07:34.597
> 
> 标签：java, android, beep

我还是 android 的新手，目前我正在做一个项目，我必须指导一个人使用音频信号。我真正想做的是只在一只耳朵里发出哔哔声，告诉这个人要么左转，要么右转。当直接指挥时，两只耳朵都会发出哔哔声。

我在这里找到了一些关于如何在 android 上生成哔声的示例。

下面是一个如何生成任意哔声的示例： [Playing an absolute tone with Android](https://stackoverflow.com/questions/2413426/playing-an-arbitrary-tone-with-android)

我想要的只是只在一只耳朵上播放它，然后在两只耳朵的播放之间切换。有人知道如何做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T19:40:12.303

您可以制作三个不同的立体声声音剪辑，其中左、右和两个声道都有声音，然后使用 SoundPool 播放它们

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T19:34:38.480

查看文档，您可以使用 AudioFormat 控制输出。不确定这是否可以为您提供所需的精度。

```
final AudioTrack audioTrack = new AudioTrack(AudioManager.STREAM_MUSIC,
                sampleRate, AudioFormat.CHANNEL_CONFIGURATION_MONO,
                AudioFormat.ENCODING_PCM_16BIT, numSamples,
                AudioTrack.MODE_STATIC); 
```

更改为左声道输出：

```
final AudioTrack audioTrack = new AudioTrack(AudioManager.STREAM_MUSIC,
                sampleRate, AudioFormat.CHANNEL_OUT_FRONT_LEFT,
                AudioFormat.ENCODING_PCM_16BIT, numSamples,
                AudioTrack.MODE_STATIC); 
```

文档：http: [//developer.android.com/reference/android/media/AudioFormat.html](http://developer.android.com/reference/android/media/AudioFormat.html)

# c - 关于 gcc 编译的 x86_64 代码和 C 代码优化

> ID：10886823
> 
> 赞同：5
> 
> 时间：2012-06-04T19:07:36.410
> 
> 标签：c, optimization, gcc, x86, x86-64

我编译了以下 C 代码：

```
typedef struct {
    long x, y, z;
} Foo;

long Bar(Foo *f, long i)
{
    return f[i].x + f[i].y + f[i].z;
} 
```

用命令`gcc -S -O3 test.c`。这是输出中的 Bar 函数：

```
 .section    __TEXT,__text,regular,pure_instructions
    .globl  _Bar
    .align  4, 0x90
_Bar:
Leh_func_begin1:
    pushq   %rbp
Ltmp0:
    movq    %rsp, %rbp
Ltmp1:
    leaq    (%rsi,%rsi,2), %rcx
    movq    8(%rdi,%rcx,8), %rax
    addq    (%rdi,%rcx,8), %rax
    addq    16(%rdi,%rcx,8), %rax
    popq    %rbp
    ret
Leh_func_end1: 
```

我对这个汇编代码有几个问题：

1.  如果函数主体中既不使用也不使用“ `pushq %rbp`”、“ `movq %rsp, %rbp`”和“ ”的目的是什么？`popq %rbp``rbp``rsp`
2.  为什么`rsi`并`rdi`自动包含 C 函数的参数（`i`和`f`，分别）而不从堆栈中读取它们？
3.  我尝试将 Foo 的大小增加到 88 字节（11`long`秒）并且`leaq`指令变成了`imulq`. 将我的结构设计为具有“更圆”的大小以避免乘法指令（以优化数组访问）是否有意义？该`leaq`指令被替换为：

    ```
    imulq   $88, %rsi, %rcx 
    ```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T19:16:40.313

1.  该函数只是使用这些指令构建自己的堆栈帧。他们并没有什么不寻常的地方。但是，您应该注意，由于此函数的大小很小，在代码中使用它时可能会被内联。但是，编译器总是需要生成函数的“正常”版本。另外，@ouah 在他的回答中说了什么。

2.  这是因为这就是 AMD64 ABI 指定应将参数传递给函数的方式。

    > 如果类是 INTEGER，则使用序列 %rdi、%rsi、%rdx、%rcx、%r8 和 %r9 的下一个可用寄存器。

    第 20 页，AMD64 ABI 草案 0.99.5 – 2010 年 9 月 3 日

3.  这与结构大小没有*直接*关系，而是 - 函数必须访问的绝对地址。如果结构的大小是 24 字节，`f`是包含结构的数组的地址，并且`i`是必须访问数组的索引，那么每个结构的字节偏移量是`i*24`。在这种情况下，乘以 24 是通过`lea`和 SIB 寻址的组合来实现的。第一`lea`条指令简单地计算`i*3`，然后每个后续指令都使用它`i*3`并将其进一步乘以 8，因此以所需的绝对字节偏移量访问数组，然后使用立即位移来访问各个结构成员（`(%rdi,%rcx,8)`.`8(%rdi,%rcx,8)`和`16(%rdi,%rcx,8)`）。`lea`如果您将结构的大小设置为 88 字节，则根本无法通过组合和任何类型的寻址来快速完成这样的事情。编译器只是假设一个简单`imull`的在计算`i*88`方面比一系列的移位、加法、`lea`s 或其他任何东西更有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T19:12:27.227

> 1.  What is the purpose of pushq %rbp, movq %rsp, %rbp, and popq %rbp, if neither rbp nor rsp is used in the body of the function?

To keep track of the frames when you use a debugger. Add `-fomit-frame-pointer` to optimize (note that it should be enabled at `-O3` but in a lot of `gcc` versions I used it is not).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T19:26:17.650

```
3\. I tried increasing the size of Foo to 88 bytes (11 longs) and the leaq instruction became an imulq. Would it make sense to design my structs to have "rounder" sizes to avoid the multiply instructions (in order to optimize array access)? 
```

leaq 调用（本质上和在这个 cae 中）计算 k*a+b，其中“k”是 1、2、4 或 8，“a”和“b”是寄存器。如果“a”和“b”相同，则可以用于 1、2、3、4、5、8 和 9 长的结构。

像 16 longs 这样的大型结构*可以*通过计算“k”的偏移量和加倍来优化，但我不知道编译器是否会这样做；你将不得不测试。

# javascript - 悬停时更改图像

> ID：10886828
> 
> 赞同：9
> 
> 时间：2012-06-04T19:08:04.577
> 
> 标签：javascript, jquery, html, css

我需要一个由图像组成的菜单，当有人将鼠标悬停在它周围时，图像应该会发生变化。

## HTML

```
<div id="menu" >  
    <a href="#" id="home"><img  src="images/about.png" alt="logo" /></a>
</div> 
```

## CSS

```
#menu {
        margin-left    : 353px;
        margin-top     : -70px;
        padding-bottom : 16px;
}

#home {
        background     : transparent url(images/about.png);
        z-index        : 1;
}

#home:hover {
        background     : url(images/aboutR.png);
        z-index        : 2;
} 
```

我面临的问题是，当我将**鼠标悬停**在菜单项周围时，悬停时要显示的图像显示在旧图像**的背面。**此外，显示的悬停背景图像的宽度和高度都**非常小**。请帮忙。谢谢

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-04T20:47:33.587

如前所述，不需要 JS 解决方案。

另一种方法是加载两个图像并在`:hover`事件中隐藏/显示它们。像这样的东西：

**HTML：**

```
<a id="home"><img class="image_on" src="images/about.png" alt="logo" /><img class="image_off" src="images/aboutR.png" alt="logo" /></a> 
```

**CSS：**

```

.image_off, #home:hover .image_on{
   显示：无
}
.image_on, #home:hover .image_off{
   显示：块
}

```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-06-04T19:38:11.457

这是一个 js/jquery 解决方案

```
//should go inside your <head> tag
function onHover()
{
    $("#menuImg").attr('src', 'images/aboutR.png');
}

function offHover()
{
    $("#menuImg").attr('src', 'images/about.png');
} 
```

html:

```
<div id="menu" >  
  <a href="#" id="home">
    <img id="menuImg" src="images/about.png" alt="logo" onmouseover="onHover();" 
      onmouseout="offHover();" />
  </a>
</div> 
```

这是一个[工作示例](http://jsfiddle.net/5JGRJ/)。快乐编码:)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-04T19:48:19.813

将此代码放在结束正文标记之前，

```
<script  type='text/javascript'>
$(document).ready(function(){
    $(".home").hover(
        function() {$(this).attr("src","images/aboutR.png");},
        function() {$(this).attr("src","images/about.png");
    });
});
</script> 
```

将班级主页放在`img`标签中。完毕。完美运行。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-04T19:38:36.317

这有效：

```
<html>
<head>
<title>Example</title>
<style type="text/css">
#menu {
    width: 400px;
    height: 142px;
    margin-left: 353px;
    margin-top: -70px;
    padding-bottom: 16px;
}

#menu:hover {
    background: url(lPr4mOr.png);
    background-repeat: no-repeat;
}
</style>
</head>
<body>
    <div id="menu">
        <a href="#" id="home"><img src="lPr4m.png" alt="logo" /></a>
    </div>
</body>
</html> 
```

（为方便制作页面，图像名称已更改。）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-04T19:12:29.627

您调用`<img src="images/about.png" alt="logo" />`了两次，一次在 html 中，一次在 css 中。我建议删除 html 并严格使用 css 背景图片。您也不需要 z-index。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-04T19:12:48.373

删除`img`标签，并将`#home`（和任何其他菜单项）的宽度和高度设置为图像的宽度和高度。

此外，将内容设置为`alt`图像的任何内容（出于可访问性目的），然后设置`text-indent`属性使其移出页面。

目前，当您悬停时，它正在更改背景图像，但`img`标签位于顶部，并且始终如此。

**HTML**

```
<div id="menu" >  
  <a href="#" id="home">Home</a>
</div> 
```

**CSS**

```
#menu{
  margin-left: 353px;
  margin-top: -70px;
  padding-bottom: 16px;
}
#home{
  background:transparent url(images/about.png);
  width: 400px;
  height: 142px;
  z-index:1;
  text-indent: -9999em;
}
#home:hover{
  background:url(images/aboutR.png);
  z-index:2;
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-06-04T19:13:16.440

你可以做 a:hover img{display:none} 这将摆脱 img, idk 关于尺寸问题 bc 你没有指定尺寸。如果我是你，我要么放弃 img 元素，将其用作元素的背景图像，然后在 :hover 上更改它。或者如果您想要 img 元素，请按照与上述相同的原则使用 clip 属性

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-06-04T20:18:12.773

您需要在使用`position`规则时使用`z-index`规则。尝试添加`position:relative`您使用`z-index`的 .

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-06-04T21:22:08.647

你只是想做一个简单的图像翻转吗？没有看到一个可行的例子，我无法确切地知道你想要做什么，但是图像翻转很容易用 CSS sprites 做，不需要 jquery，这使得网站更加防弹。它还使您的网站响应更快，因为默认和过度状态图像是相同的图像，不需要预加载代码。

如果您需要映射图像（而不是完全换出），这可以通过背景图像、容器 div 和 png-24 图形来完成（使 png-24s 在 IE6 中工作所需的 JavaScript，但谁在乎支持 IE6反正？）。

在不使用 javascript 的情况下更改导航图像的一个好方法是使用 background-position 属性，如下所示：

```
 // define your container element
    #nav-home {  
         margin: 20px 5px;  
         height: 15px; 
         width: 40px;
          }

    // use a descendant selector to style the <a> tag
    #nav-home a { 
         background-image: url("/images/buttons-nav.gif"); 
         display: block; // THIS IS VERY IMPORTANT!!
         background-position: 0 0;  // the first number is horizontal placement, the second is vertical placement. at 0 0 it is positioned from the top left corner
         height: 15px; 
         }

    // this is where you change the position of the background for the hover state
    #nav-home a:hover { 
         background-position: -20px 0; //this moved it 20px to the right 
         } 
```

您的 html 代码如下所示：

```
 <div id="nav-home"><a href="/yourlink/"><img src="/images/transparent.gif" alt="home" height="100%" width="100%;"></a>
    <!-- uses a 1px transparent gif to "hold" the place of the actual clicked item --> 
```

您的图像实际上将包含开启和关闭状态，如下所示：[http](http://www.w3schools.com/css/img_navsprites_hover.gif) ://www.w3schools.com/css/img_navsprites_hover.gif然后您所做的就是将图像移动到一侧以显示 :hover 状态。（代码示例位于[http://www.w3schools.com/css/tryit.asp?filename=trycss_sprites_hover_nav](http://www.w3schools.com/css/tryit.asp?filename=trycss_sprites_hover_nav)）。您基本上是在制作一个带有容器 div 的窗口，然后只显示实际背景图像的一部分。

另外，不要在除标签之外的任何东西上使用 :hover ，因为并非所有浏览器都支持在块级元素上使用 :hover 。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-08-27T04:49:47.200

现在是简单的方法：

```
<img id=logo src=img1.png onmouseover=logo.src='img2.png' onmouseout=logo.src='img1.png'> 
```

此 HTML 将在鼠标悬停时将图像更改为新图片，并在鼠标移出时将其转回第一张图片。

# jquery - 无法在容器内使 JqGrid 页脚保持静态

> ID：10886829
> 
> 赞同：0
> 
> 时间：2012-06-04T19:08:11.193
> 
> 标签：jquery, ajax, jqgrid

我有一个包含很多列的 jqGrid，当我在 Jqgrid 隐藏页脚中的按钮水平滚动容器时，我希望将页脚设为静态，这样我就可以滚动并仍然能够看到按钮的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T20:46:59.053

试试[答案](https://stackoverflow.com/a/8460480/315935)中[的演示](http://www.ok-soft-gmbh.com/jqGrid/CreateContextmenuFromNavigatorButtons3.htm)（另请参阅[这个](https://stackoverflow.com/a/8460116/315935)和[这个](https://stackoverflow.com/a/8491939/315935)）。它显示了如何生成包含与导航器按钮中包含的相同信息的**上下文菜单。**我个人对你的方法进行了修改，发现非常实用。用户*根本不需要滚动*。用户只需单击鼠标右键即可执行相同的操作。在具有许多行的长网格或具有许多列的网格（如您的情况）的情况下非常实用。

# c# - 找出 httpwebrequest POST 的结果

> ID：10886830
> 
> 赞同：0
> 
> 时间：2012-06-04T19:08:11.457
> 
> 标签：c#, asp.net, httpwebrequest, http-post, httprequest

请参考以下代码。如何测试/调试以下代码是否正常工作。它运行并且没有编译/运行时错误。

下面代码的最终结果是在页面中设置一个控件，以保存下面代码中的 POST 数据。然而我还没有走到那一步。

```
 protected override void OnInit(EventArgs e)
{

    ASCIIEncoding encoding = new ASCIIEncoding();
    string postData = "http://s.com/is/image/scom/2Peel";
    byte[] data = encoding.GetBytes(postData);

    // Prepare web request...
    HttpWebRequest myRequest = (HttpWebRequest)WebRequest.Create("http://m.com/Confirm.aspx?ID=175");
    myRequest.Method = "POST";
    myRequest.ContentType = "application/x-www-form-urlencoded";
    myRequest.ContentLength = data.Length;
    Stream newStream = myRequest.GetRequestStream();
    // Send the data.
    newStream.Write(data, 0, data.Length);
    newStream.Close();

} 
```

**更新 1：**我尝试使用以下代码找出响应，但页面根本没有加载。

```
HttpWebResponse response = (HttpWebResponse)myRequest.GetResponse();

Console.WriteLine("Content length is {0}", response.ContentLength);
Console.WriteLine("Content type is {0}", response.ContentType); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T19:24:15.767

使用HttpWebRequest 对象（您将其命名为“myRequest”）的[GetResponse方法。](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.getresponse.aspx)

# python - Django 数据库中的子类

> ID：10886833
> 
> 赞同：1
> 
> 时间：2012-06-04T19:08:18.593
> 
> 标签：python, django

如果我有

```
class Foo(models.Model):
    widgets = models.ForeignKey('widgets.Widget', related_name='widgets') 
```

我想将 Widget 的子类 XWidget 保存到数据库中。这可以吗，即使 Foo.widgets 属于 Widget 父类而不是 XWidget？

在阅读 Foo.widgets 时，如果我想查找所有 XWidgets 是一个过滤器的好方法吗？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T19:55:35.503

是的，您可以将子类保存到引用其父级的外键，因为`XWidget` *is-a* `Widget`。但是，它不会反过来工作。例如，如果你的外键是'widgets.XWidget'，你不能保存a `Widget`。

# iphone - 检查 UIView 是否处于 UIScrollView 可见状态

> ID：10886840
> 
> 赞同：25
> 
> 时间：2012-06-04T19:08:32.967
> 
> 标签：iphone, objective-c, ios, ipad

检查当前 UIScrollView 的 contentView 上是否可见 UIView 的最简单和最优雅的方法是什么？有两种方法，一种是涉及到 UIScrollView 的 contentOffset.y 位置，另一种是转换 rect 区域？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-07-23T09:48:22.083

如果您正在尝试确定视图是否已在屏幕上滚动，请尝试以下操作：

```
 CGRect thePosition =  myView.frame;
    CGRect container = CGRectMake(scrollView.contentOffset.x, scrollView.contentOffset.y, scrollView.frame.size.width, scrollView.frame.size.height);
    if(CGRectIntersectsRect(thePosition, container))
    {
        // This view has been scrolled on screen
    } 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2018-12-21T14:44:56.130

**Swift 5：**如果您想触发一个事件来检查整个 UIView 在滚动视图中是否可见：

```
extension ViewController: UIScrollViewDelegate {

    func scrollViewDidScroll(_ scrollView: UIScrollView) {
        if scrollView.bounds.contains(targetView.frame) {
            // entire UIView is visible in scroll view
        }
    }

} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-06-04T19:25:49.023

在您的滚动视图委托中实现`scrollViewDidScroll:`并手动计算哪些视图是可见的（例如，通过检查是否`CGRectIntersectsRect(scrollView.bounds, subview.frame)`返回 true。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-10-23T21:39:14.430

为 Swift 3 更新

```
var rect1: CGRect!
// initialize rect1 to the relevant subview
if rect1.frame.intersects(CGRect(origin: scrollView.contentOffset, size: scrollView.frame.size)) {
        // the view is visible
    } 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-04T19:25:10.163

我认为你的想法是正确的。如果是我，我会这样做：

```
//scrollView is the main scroll view
//mainview is scrollview.superview
//view is the view inside the scroll view

CGRect viewRect = view.frame;
CGRect mainRect = mainView.frame;

if(CGRectIntersectsRect(mainRect, viewRect))
{
    //view is visible
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-02-10T15:20:15.730

José 的解决方案对我来说不太奏效，它会在我的视图出现在屏幕上之前检测到它。如果 José 的简单解决方案不适合您，以下相交代码在我的 tableview 中完美运行。

```
 func scrollViewDidScroll(_ scrollView: UIScrollView) {
        let viewFrame = scrollView.convert(targetView.bounds, from: targetView)
        if viewFrame.intersects(scrollView.bounds) {
            // targetView is visible 
        }
        else {
            // targetView is not visible
        }
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-11-19T00:36:00.937

考虑插图的解决方案

```
public extension UIScrollView {

    /// Returns `adjustedContentInset` on iOS >= 11 and `contentInset` on iOS < 11.
    var fullContentInsets: UIEdgeInsets {
        if #available(iOS 11.0, *) {
            return adjustedContentInset
        } else {
            return contentInset
        }
    }

    /// Visible content frame. Equal to bounds without insets.
    var visibleContentFrame: CGRect {
        bounds.inset(by: fullContentInsets)
    }
}

if scrollView.visibleContentFrame.contains(view) {
    // View is fully visible even if there are overlaying views
} 
```

# python - Sphinx 和 argparse - 自动记录命令行脚本？

> ID：10886841
> 
> 赞同：28
> 
> 时间：2012-06-04T19:08:33.937
> 
> 标签：python, python-sphinx, argparse

我正在构建一个 Python 包，并使用 Sphinx 创建文档。除了我的包代码之外，我还包含了许多使用 argparse 的命令行 Python 脚本。我想知道是否有办法让 Sphinx 自动记录这些脚本？最终目标将是一个漂亮打印的脚本列表，以及相关的帮助打印、参数和选项。需要明确的是，我正在寻找一种预先存在的方法来做到这一点，而不是自己实现这一点的方法。

这不像我通常在 SO 上提出的那样具体问题，如果有更合适的 SE 网站发布此问题，请告诉我。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-09-05T10:54:24.003

使用 sphinx-argparse 扩展：

[http://sphinx-argparse.readthedocs.org/en/latest/](http://sphinx-argparse.readthedocs.org/en/latest/)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-06-05T08:19:09.473

您可以使用[`sphinxcontrib.programoutput`](http://packages.python.org/sphinxcontrib-programoutput/)在文档中包含来自命令行的帮助消息。

这不是特定于`argparse`但可用于将任何脚本打印帮助消息记录到命令行。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-08-09T02:37:55.293

您可以使用[`sphinxcontrib.autoprogram`](https://pythonhosted.org/sphinxcontrib-autoprogram/). `pip install sphinxcontrib-autoprogram`, 然后放

```
extensions += ['sphinxcontrib.autoprogram'] 
```

在你的`conf.py`. 要通过使用 argparse对象（可以是 Python 表达式，如函数）`cli.py`导入来记录命令，请使用`cli``parser``parser``get_parser()`

```
.. autoprogram:: cli:parser
   :prog: cli.py 
```

# java - java jframe和ImagePanel之间的差距

> ID：10886843
> 
> 赞同：1
> 
> 时间：2012-06-04T19:08:38.970
> 
> 标签：java, swing, jframe, jpanel, gaps-in-visuals

![图像](../Images/4b30dd3c65853deda4c5ec717f4c69ad.png)我有一个添加三个对象的 JLayeredPane，问题是 backgroundImage 当应用程序运行时，jframe 和顶部的背景图像之间存在间隙，我设置为（0,0）无论我改变什么间隙仍然那里（我想消除差距）。如果我复制 backgroundImage 类并将其放在另一个文件/类中，则间隙不存在。谁能帮忙？

```
public class NavigationMenu extends JPanel {

private ArrayList<String> Menu = new ArrayList();
private int MenuSize;
private int MenuChannel = 0;
private Font realFont;
private static Dimension screenSize = new Dimension(new ScreenDimensions().getScreenWidth(), new ScreenDimensions().getScreenHeight());
private static final int MENU_HEIGHT = (int)(new ScreenDimensions().getScreenHeight()*0.1);
private static final int MENU_WIDTH = new ScreenDimensions().getScreenWidth();
private static final int MENU_CENTER = (new ScreenDimensions().getScreenHeight() / 2) - (MENU_HEIGHT / 2);

public NavigationMenu() {

    //Add Menu Channels
    setPreferredSize(screenSize);
    setBounds(0,0,MENU_WIDTH,screenSize.height);
    this.Menu.add("MOVIES");
    this.Menu.add("MUSIC");
    this.Menu.add("PICTURES");
    this.Menu.add("VIDEOS");
    this.Menu.add("TV SHOWS");
    this.Menu.add("WEATHER");
    this.Menu.add("RADIO");
    this.Menu.add("SETTINGS");
    this.MenuSize = Menu.size() - 1;

    JLayeredPane pfinal = new JLayeredPane();
    JPanel _menuText = new menuText();
    JPanel _backgroundImage = new backgroundImage("Backgrounds/curtains.png");
    JPanel _bar = new bar();

    pfinal.setPreferredSize(screenSize);
    pfinal.setBounds(0,0,MENU_WIDTH,screenSize.height);

    pfinal.add(_backgroundImage, new Integer(1));
    pfinal.add(_bar, new Integer(2));
    pfinal.add(_menuText, new Integer(3));

    add(pfinal);
}

public class bar extends JPanel {
    public bar() {
        setBounds(0,MENU_CENTER,MENU_WIDTH, MENU_HEIGHT);
        setOpaque(false);
    }
    @Override
    protected void paintComponent(Graphics g) {
        Graphics2D g2d = (Graphics2D)g;
        g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
        g2d.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC_OVER, 0.8f));
        g2d.setColor(Color.BLACK);
        g2d.fillRect(0,0,screenSize.width,MENU_HEIGHT);
    }
}

public class menuText extends JPanel {

    public menuText() {
        setBounds(0,MENU_CENTER,MENU_WIDTH,MENU_HEIGHT);
        setOpaque(false);
        setFocusable(true);
        requestFocusInWindow();

        try {
            realFont = new RealFont(((int)(MENU_HEIGHT * 0.80))).getRealFont();
        } catch (Exception e) {
            System.out.println(e.toString());
        }
        addKeyListener(new KeyAdapter() {
            @Override
            public void keyPressed(KeyEvent e) {
                //JOptionPane.showMessageDialog(null, "OK");
                int keyCode = e.getKeyCode();
                    switch (KeyEvent.getKeyText(keyCode)) {
                        case "Up":
                            //JOptionPane.showMessageDialog(null, "Up");
                            if(MenuChannel < MenuSize) {
                                MenuChannel++; 
                                repaint();
                            } else {
                                MenuChannel = 0; //reset
                                repaint();
                            }
                        break;
                        case "Down":
                            if(MenuChannel == 0) {
                                MenuChannel = MenuSize + 1;
                                MenuChannel--;
                                repaint();
                            } else {
                                MenuChannel--;
                                repaint();
                            }   
                        break;
                    }
            }
        });
    }

    @Override
    protected void paintComponent(Graphics g) {
        Graphics2D g2d = (Graphics2D)g;
        String MenuString = Menu.get(MenuChannel);
        g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
        //g2d.setBackground(Color.PINK);
        //g2d.fillRect(0,0,getWidth(),getHeight());
        g2d.setColor(Color.WHITE);
        g2d.setFont(realFont);
        FontRenderContext context = g2d.getFontRenderContext();
        java.awt.geom.Rectangle2D rect = realFont.getStringBounds(MenuString, context);
        int textHeight = (int)rect.getHeight();
        int textWidth = (int)rect.getWidth();
        int panelHeight = getHeight();
        int panelWidth = getWidth();
        int x = (panelWidth - textWidth) / 2;
        int y = (panelHeight - textHeight) / 2;
        //System.out.println("f:"+ fontMetrics.gettH:" + textHeight + "\ntW:" + textWidth + "\npH:" + panelHeight + "\npW:" + panelWidth);
        g2d.drawString(MenuString,x,(float)-rect.getY()+2);
    }
}

public class backgroundImage extends JPanel {

    private Image icon;
    private int screenWidth = new ScreenDimensions().getScreenWidth();
    private int screenHeight = new ScreenDimensions().getScreenHeight();

    public backgroundImage(String background) {
        icon = new ImageIcon(background).getImage();
        Dimension size = new Dimension(screenWidth,screenHeight);
        setPreferredSize(size);
        setMinimumSize(size);
        setMaximumSize(size);
        setSize(size);
        setLayout(null);

    }

    @Override
    protected void paintComponent(Graphics g) {
        g.drawImage(icon,0,0,screenSize.width,screenSize.height,null);
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T01:12:29.757

将 NavigationMenu 的布局更改为 BorderLayout

# android - 与 Android API 库交互？

> ID：10886845
> 
> 赞同：0
> 
> 时间：2012-06-04T19:08:45.387
> 
> 标签：android, api

我是一般编程的初学者（尤其是 Java！），所以我无法弄清楚如何与非官方的 Android API 库进行交互，如下所示：

[http://code.google.com/p/android-market-api/](http://code.google.com/p/android-market-api/)

示例代码片段之一说“有关更多信息，请参阅 AppsResponse 类定义”。但是，我该怎么做呢？提供了两个 .jar，其中一个对应于 Android Market API。使用 WinRAR 提取后（顺便说一句，我在 Windows 上），我深入几个文件夹并找到一堆 .class 文件。我如何打开它来阅读，并弄清楚如何与 API 交互？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T19:14:12.727

你可以从源头上看吗？

[http://code.google.com/p/android-market-api/source/browse/trunk/AndroidMarketApi/src/com/gc/android/market/api/model/Market.java](http://code.google.com/p/android-market-api/source/browse/trunk/AndroidMarketApi/src/com/gc/android/market/api/model/Market.java)

# image - 无法在 Corona 中下载图像

> ID：10886847
> 
> 赞同：0
> 
> 时间：2012-06-04T19:08:47.143
> 
> 标签：image, coronasdk

我使用 Corona SDK。我解析 json 并在侦听器函数中尝试使用来自 json 的链接加载图像，但它显示网络错误。看来我不能并行运行网络方法？

由于某种原因，即使默认的电晕演示代码也不起作用：

```
local function networkListener2( event )
if ( event.isError ) then
    print ( "Network error - download failed" )
else
    event.target.alpha = 0
    transition.to( event.target, { alpha = 1.0 } )
end

print ( "RESPONSE: " .. event.response )
end

myImage2 = display.loadRemoteImage( 
"http://developer.anscamobile.com/demo/hello.png", 
"GET", 
networkListener2, 
"helloCopy2.png", 
system.TemporaryDirectory, 
60, 280 ) 
```

它无法在android模拟器上运行。

# javascript - 具有多个数组数据参数的 jQuery AJAX

> ID：10886848
> 
> 赞同：6
> 
> 时间：2012-06-04T19:08:47.273
> 
> 标签：javascript, jquery, ajax

我已经成功发布了一个数组，但我不知道如何在 AJAX 帖子中发送多个数组。这是我的一个数组的代码：

```
var a = new Array();
// fill array
var a_post = {};
a_post['array1[]'] = a;

$.ajax({
    url: "submitOrder.php",
    data: a_post,
    type: 'post',
    success: function(data) {
        alert(data);
    }
}); 
```

在 submitOrder.php 我有：

```
$array1= $_POST['array1'];

foreach ($array1 as $a => $b)
echo "$array1[$a] <br />"; 
```

这工作正常。但是，当我尝试向该字段添加第二个数组`b_post`时`data:`，它不起作用。我尝试`data: {a_post, b_post},`了一些变体，但我无法让它正常工作。当我这样做时，我将如何`submitOrder.php`在发布后加载而不是显示数据警报？

**更新**

使用 Nicolas 的建议，我可以将数据字段更改为：

```
data: {'array1':JSON.stringify(a), 'array2':JSON.stringify(b)}, 
```

但是，我还需要添加用户输入的其余表单数据。我可以获取此数据，`$(this).serialize()`但如果我尝试将其添加到该`data`字段中，它将不起作用。如何将此数据添加到上述行？

谢谢。

**解决方案**

最终以我最初希望的方式工作（在 Nicolas 的帮助下）：

```
var formData = $(this).serializeArray();
var a_string = JSON.stringify(a);
formData.push({name: 'array1', value: a_string});
var b_string = JSON.stringify(b);
formData.push({name: 'array2', value: b_string});

$.ajax({
    url: "submitOrder.php",
    data: formData,
    type: 'post',
    success: function(data) {
        alert(data);
    }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T19:16:07.450

数据应该以这种方式封装

```
data: {'first_array':JSON.stringify(array1),'second_array':JSON.stringify(array2)} 
```

然后在 PHP 中：

```
$array1 = json_decode($_POST['first_array']);
$array2 = json_decode($_POST['second_array']); 
```

您也可以添加其余的输入。

```
data: {'first_array':JSON.stringify(array1),'second_array':JSON.stringify(array2),'input1':$(input[name="input1"]).val()} 
```

只需重复您要发送的所有输入。

```
'input1':$(input[name="input1"]).val(),'input2':$(input[name="input2"]).val(),... etc 
```

# c# - 如何一个元素左对齐，另一个元素右对齐？

> ID：10886856
> 
> 赞同：0
> 
> 时间：2012-06-04T19:09:22.653
> 
> 标签：c#, windows-phone-7

在我的`Windows Phone 7`应用程序中，我想要一个`TextBlock`后跟一个`CheckBox`. 从左到右。

我正在以**编程**方式执行此操作，并且可以使用以下代码执行此操作：

```
StackPanel ControlStackPanel = new StackPanel();
ControlStackPanel.Orientation = System.Windows.Controls.Orientation.Horizontal;

TextBlock ControlTextBlock = new TextBlock();
ControlTextBlock.Text = @"ControlNameGoesHere";

CheckBox ControlCheckBox = new CheckBox();
ControlCheckBox.Margin = new Thickness(0, 0, 0, 0);
ControlCheckBox.HorizontalAlignment = System.Windows.HorizontalAlignment.Right;

ControlStackPanel.Children.Add(ControlTextBlock);
ControlStackPanel.Children.Add(ControlCheckBox); 
```

但是，**我实际上希望`TextBlock`元素与屏幕*左侧*对齐，并且`CheckBox`元素与屏幕*右侧*对齐。我怎样才能做到这一点？**

我需要以编程方式添加网格吗？我不想在 XAML 中执行此操作的原因是添加这些堆栈面板将是一个迭代过程，如果我以编程方式执行所有操作，它只会更好地与我的代码配合使用。

我用谷歌搜索了很多东西，但运气不佳。

非常感谢！布雷特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T19:19:54.617

内容控件一次只有一个对齐方式。其中的所有控件都根据它的水平对齐方式对齐。您可能希望在较大的外部容器中拥有两个具有不同对齐方式的内容控件。

```
Grid
  StackPanel left
     Control
  StackPanel right
     Control 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T20:22:35.757

尝试将您的控件放入 Grid 的列中。ControlTextBox 应该进入 Grid 的第一列，ControlCheckBox - 进入第二列。这是一些代码：

```
TextBlock ControlTextBlock = new TextBlock();
ControlTextBlock.Text = @"ControlNameGoesHere";
ControlTextBlock.SetValue(Grid.ColumnProperty, 0);
ControlTextBlock.VerticalAlignment = System.Windows.VerticalAlignment.Top;

CheckBox ControlCheckBox = new CheckBox();
ControlCheckBox.Margin = new Thickness(0, 0, 0, 0);
ControlCheckBox.SetValue(Grid.ColumnProperty, 1);
ControlCheckBox.VerticalAlignment = System.Windows.VerticalAlignment.Top;

ColumnDefinition FirstColumn = new ColumnDefinition();
FirstColumn.Width = System.Windows.GridLength.Auto;
ColumnDefinition SecondColumn = new ColumnDefinition();
SecondColumn.Width = System.Windows.GridLength.Auto;

Grid ContentGrid = new Grid();
ContentGrid.ColumnDefinitions.Add(FirstColumn);
ContentGrid.ColumnDefinitions.Add(SecondColumn);
ContentGrid.Children.Add(ControlTextBlock);
ContentGrid.Children.Add(ControlCheckBox); 
```

# javascript - 收到ajax响应时通知更新

> ID：10886857
> 
> 赞同：0
> 
> 时间：2012-06-04T19:09:27.370
> 
> 标签：javascript, jquery, ajax, ejs

我有更新通知的方法，更新时返回通知的数量和 json 类型的通知内容

```
{
    "friend_request": 4,
    "request": [{
        "user_id": "1",
        "picture": "/home/sepdau/",
        "name": "Le Chanh"},
    {
        "user_id": "2",
        "picture": "",
        "name": "Yii PHP"},
    {
        "user_id": "4",
        "picture": "13366396884.jpg",
        "name": "Minh Le"},
    {
        "user_id": "11",
        "picture": "",
        "name": "Thang Phan"}]
}​ 
```

当我收到我更新通知成功的数量

```
function updateNotification(){        
    $.ajax({
        url: '/nevergiveup/index.php/site/updatenotification',
        type: "post",
        dataType: "json",
        success: function(data){            
            if(data.friend_request>0){
                $(".zingcounter").text(data.friend_request); //update number of nofitcation
                // load the template file, then render it with data
                var html = new EJS({url: '/nevergiveup/jstemplates/friend_request.ejs'}).render(data);
                //$("#frlist").append(html);
                //$(html).replaceAll('#replacehere');
                $('#replacehere').replaceWith(html); // update content of notification
            } 
            setTimeout(updateNotification,10000);
        },
        error: function(){
            setTimeout(updateNotification,10000);
        }
    });       
} 
```

我使用 EJS 构建内容模板
我有一个`<div id="replacehere">`替换我的内容在这里
我`$('#replacehere').replaceWith(html);`用来替换但是当我看到 json 数据接收后 10 秒内的第一次请求
有一个新的内容并且通知的数量已经改变但内容没有改变时它成功。
收到新内容时如何更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T19:23:47.250

猜你只需要使用

```
$('#replacehere').html(html); 
```

否则它将删除#replacehere div ...并且第二个请求将找不到将内容放入...

# c# - Kinect 平滑鼠标移动

> ID：10886858
> 
> 赞同：0
> 
> 时间：2012-06-04T19:09:28.737
> 
> 标签：c#, mouse, kinect, smoothing

我正在开发一个项目，以使用由 kinect 使用深度图像跟踪的指尖移动鼠标光标。我一直在进行跟踪，但问题在于以平滑的方式移动鼠标。在我的程序中，当我移动鼠标时，它不会以平滑的方式移动，而是会从一个像素跳到另一个像素。我的问题是，有没有办法使用骨骼跟踪的平滑参数之类的东西来平滑光标的移动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T17:55:16.177

你可以使用一些东西。

您可以使用库 Coding4Fun.Kinect.Wpf 中包含的方法；称为scaleTo()

> var scaledHandRight = ElgatoElegido.Joints[JointType.HandRight].ScaleTo(1366, 768, 0.5f, 0.4f); <

并帮助平滑参数骨架识别。

> ```
>  var parameters = new TransformSmoothParameters
>         {
>             Smoothing = 0.3f,
>             Correction = 0.0f,
>             Prediction = 0.0f,
>             JitterRadius = 1.0f,
>             MaxDeviationRadius = 0.5f
>         }; 
> ```

```
 newSensor.SkeletonStream.Enable(parameters); 
```

<

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T19:18:25.797

我认为问题在于您仅在 kinect 深度事件触发时才移动鼠标（当您获得有关人手指的新信息时）。

Windows 中没有任何功能，但是，您可以创建一个。尝试使用被跟踪手指的 dy/dx 实现 P（简单）、PD（稍微难一点）或 PID（再难一点）控制器。这样，即使在 kinect 的深度事件之间，鼠标也会以一定的速度移动，并且应该看起来更平滑地移动。

# perl - HTTP::Proxy：如何替换整个 html 页面

> ID：10886862
> 
> 赞同：0
> 
> 时间：2012-06-04T19:09:41.267
> 
> 标签：perl, http-proxy

我正在尝试对某些特定域使用 HTTP::Proxy to server 403 错误。我已经设法修改了标题，但代理继续为原始页面提供服务。

这是我正在使用的代码：

```
package Filters::Filter403;

use strict;
use warnings;
use HTTP::Proxy::HeaderFilter::simple;
use HTTP::Proxy::BodyFilter::simple;

our $header = HTTP::Proxy::HeaderFilter::simple->new (
    sub {
        $_[2]->code( 403 );
        $_[2]->message ( 'Forbidden' );
    }
);

our $body = HTTP::Proxy::BodyFilter::simple->new (
    sub {       
        $_[1] = \<<'HTML';
<!DOCTYPE html>
<html><head><title>403 Forbidden</title><style type="text/css">
body { padding: 40pt; }
body, h1, h2, p { color: #333; font-family: Arial, sans-serif; margin: 0; }
div { width: 200px; background: #eee; padding: 2em; }
</style></head><body><div><h1>403</h1><h2>Forbidden</h2></div></body></html>
HTML
    }
);

1; 
```

这是我调用这两个过滤器的主脚本中的代码，因此您可以更好地查看：

```
use HTTP::Proxy qw(:log);
use Getopt::Long;

use FindBin qw($Bin);
use lib $Bin;

use Filters;
use HTTP::Proxy::BodyFilter::complete;

my $port = 3128;
my $fail_at;
my $outputfile = '/var/log/cvmfs-test/webproxy.output';
my $errorfile = '/var/log/cvmfs-test/webproxy.error';

my $ret = GetOptions ( "port=i" => \$port,
                       "fail=s" => \$fail_at );

my @fail_at = split(/,/, $fail_at);

# Opening file for log
open (LOG, '>>', $outputfile);

my $proxy = HTTP::Proxy->new;
$proxy->port( $port );
$proxy->logfh( *LOG );
$proxy->logmask( ALL );

if ($fail_at[0] ne 'all') {
    foreach my $url (@fail_at) {
        $proxy->push_filter(
            host => $url,
            response => HTTP::Proxy::BodyFilter::complete->new,
            response => $Filters::Filter403::header,
            response => $Filters::Filter403::body
        );
    }
}
else {
    $proxy->push_filter (
        response => HTTP::Proxy::BodyFilter::complete->new(),
        response => $Filters::Filter403::header,
        response => $Filters::Filter403::body
    );
}

my $pid = fork();

# Command for the forked process
if ( defined($pid) and $pid == 0 ) {
    open (my $errfh, '>', $errorfile);
    STDOUT->fdopen( \*$errfh, 'w' ) || die "Couldn't set STDERR to $errorfile: $!\n";
    $proxy->start;
}

# Command for the main script
unless ($pid == 0) {
    print "Proxy HTTP started on port $port with PID $pid.\n";
    print "You can read its output in $outputfile.\n";
}

exit 0; 
```

你能帮我么？我尝试了 Daxim 解决方案，我也尝试使用`$ { $_[1] }`文档似乎建议，但它不起作用。

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T09:17:53.340

我找到了解决方案。问题是之后的每个过滤器`HTTP::Proxy::BodyFilter::complete->new`都是用空数据执行的。我发现加载一个沉重的页面，我的代码被添加了多次。

这是工作过滤器：

```
our $body = HTTP::Proxy::BodyFilter::simple->new (
    sub {
        my ( $self, $dataref, $message, $protocol, $buffer ) = @_;
        unless (defined ($buffer)){
            my $html = 
                    '<!DOCTYPE html>'.
                    '<html><head><title>403 Forbidden</title><style type="text/css">'.
                    'body { padding: 40pt; }'.
                    'body, h1, h2, p { color: #333; font-family: Arial, sans-serif; margin: 0; }'.
                    'div { width: 200px; background: #eee; padding: 2em; }'.
                    '</style></head><body><div><h1>403</h1><h2>Forbidden</h2></div></body></html>';

            $$dataref = $html;
        }
    }
); 
```

这样，过滤器不会做任何事情，除非 $buffer 是 undef，即当接收到整个响应时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T20:19:03.110

请参阅[HTTP::Proxy::BodyFilter::complete](http://p3rl.org/HTTP%3a%3aProxy%3a%3aBodyFilter%3a%3acomplete)。

```
$proxy->push_filter(
    response => HTTP::Proxy::BodyFilter::complete->new,
    response => HTTP::Proxy::BodyFilter::simple->new(sub {
        $_[1] = \<<'HTML';
<!DOCTYPE html>
<html><head><title>403 Forbidden</title><style type="text/css">
body { padding: 40pt; }
body, h1, h2, p { color: #333; font-family: Arial, sans-serif; margin: 0; }
div { width: 200px; background: #eee; padding: 2em; }
</style></head><body><div><h1>403</h1><h2>Forbidden</h2></div></body></html>
HTML
    }),
); 
```

# sql - 如何在结果集中包含列而不将其包含在 group by 子句中或对其执行任何聚合？

> ID：10886863
> 
> 赞同：0
> 
> 时间：2012-06-04T19:09:55.903
> 
> 标签：sql

给定一个包含 City、EmpName 和 Salary 的列表，按 city 和 EmpName 排序，如何输出每个 EmpName 和 Salary 以及每个城市的总 Salary？

这是我得到的：

按省从表组中选择 EmpName, sum(Salary)；

但它给了我错误，因为我没有在 group by 子句中包含 EmpName 和/或没有对其执行任何聚合。我怎样才能达到预期的效果？有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T19:15:51.250

如果您想要的是每个员工在城市的工资总和，那么您有两种选择。第一个应该适用于几乎任何数据库：

```
select EmpName, tcity.CitySalary
from t join
     (select City, sum(Salary) as CitySalary
      from t
      group by city
     ) tcity
     on tcity.city = t.city 
```

第二种方法是使用窗口函数。值得注意的是，这在 mysql 上不起作用：

```
select EmptName, sum(salary) over (partition by city)
from t 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T19:19:09.790

```
SELECT t.City, t.EmpName, t.Salary, x.city_salary
FROM   table t,
       (SELECT City, SUM(Salary) as city_salary
        FROM   table
        GROUP BY City) x
WHERE x.city = t.city; 
```

# gwt - 任何延迟代码执行直到页面打开的方法

> ID：10886870
> 
> 赞同：0
> 
> 时间：2012-06-04T19:10:34.817
> 
> 标签：gwt

嗨，我们有一个托管在谷歌应用引擎上的 gwt 应用。

在绑定到入口点类（使用根面板 id）的页面之一中，我们调用 rpc 服务来获取一些数据。

我观察到的问题是，即使在加载主页时，绑定到另一个页面的入口模块类也会被实例化，因此该服务被称为不必要的。

任何选项可以推迟此行为直到页面打开？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T20:09:02.183

您可以在 onLoad 方法中而不是在构造函数中加载页面的数据，以便在小部件附加到 DOM 之前不会加载数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T20:54:31.790

如下所示移动子句下的代码解决了这个问题

```
if(RootPanel.get("login") !=null){
            //moved here
        } 
```

# javascript - aspx 会看不到 javascript 所做的更改吗？

> ID：10886874
> 
> 赞同：0
> 
> 时间：2012-06-04T19:11:07.663
> 
> 标签：javascript, asp.net

我正在使用 javascript 更改跨度的内容。我可以看到它已经随着视图源而改变。

当我尝试立即获取 ac# 函数中的内容时，它仍然具有旧值。

我的猜测是，asp 只是看到它发送给客户端的 html，而 javascript 正在更改 asp 看不到的客户端 html？

这是我对如何解释它的唯一猜测。这是正确的吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T19:19:11.770

除非您要更改的内容支持将值发布回服务器，否则您的更改将被丢弃。 `<span>`' 不会被 POST 到服务器。

但是，如果您更改 INPUT 的值，则服务器将能够在嵌套页面提交 POST 上看到这些新值，前提是它们是`runat=server`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T19:14:30.407

ASPX 是**服务器端**。Javascript 是**客户端**。除非您回调网络服务或类似的东西，否则两者不会混合使用。

您的`<span>`更改仅在客户端上，服务器不知道。如果您希望将交互传回服务器，请将 AJAX 作为一种解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T19:19:01.943

添加`runat="server"`到您的跨度。这将导致它被视图状态拾取，并且新值将在回发期间可用。

编辑：根据 jrummel 和 mikemanne 的测试，即使用`runat=server`.

如果您希望该值在服务器上始终可用，我建议使用输入（如其他人建议的那样）而不是跨度。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-04T19:16:59.503

是的，你的猜测是正确的！

Javascript 只看到客户端，而 ASP.NET 只看到服务器端。如果您在客户端进行了一些更改，并且希望服务器端知道该更改，则可以使用**AJAX**。

有关详细信息，请参阅[Ajax](http://api.jquery.com/category/ajax/)。

在 .NET 中，您可以使用 WebService、Controller 或 Page 来接收 ajax 调用。

# drupal-7 - 用于响应式幻灯片的 Drupal 动态模块

> ID：10886877
> 
> 赞同：0
> 
> 时间：2012-06-04T19:11:12.003
> 
> 标签：drupal-7, twitter-bootstrap, responsive-design, drupal-theming

我目前正在研究 drupal 响应式主题。为此，我正在创建自己的自定义主题。

为了使它具有响应性，我使用了 twitter bootstrap。我已经为幻灯片使用了轮播插件，该插件在 html 中运行良好。

幻灯片中的图像是静态的，我在那里硬编码了路径。但是在 drupal 中，我想像在 wordpress 或 joomla 模块中那样动态选择图像。

可能吗？如果不是，是否有任何用于 drupal 的幻灯片模块可以解决我的问题？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T21:18:37.130

FlexSlider 是一个很好的模块。不幸的是，它不像 Views Slideshow 那样可配置，但是 Views Slideshow 需要破解才能使其响应，因为它直接在 DOM 中插入宽度/高度属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-15T07:27:24.733

如果我理解正确，请尝试将“img-fluid”类添加到图像中，并且不要为任何容器设置宽度

# html - contenteditable 单击元素周围的任意位置，它在 Chrome 中被选中

> ID：10886882
> 
> 赞同：1
> 
> 时间：2012-06-04T19:12:07.397
> 
> 标签：html, google-chrome, contenteditable

在 Chrome 中我有一个简单`contenteditable="true" span`的 ，如果用户点击它周围的任何地方，光标就会出现，他/她可以开始编辑。这很烦人的 b/c 我只希望光标在用户点击跨度本身时出现，而不是在它之外。

示例：http: [//jsbin.com/oyamab/edit#javascript,html,live](http://jsbin.com/oyamab/edit#javascript,html,live)

下面的html...

```
<body>
  <span id="hello" contenteditable="true">Hello World</span>
</body> 
```

If you visit that link in Chrome, click anywhere in the rendered html box (the far right column in jsbin), and you can start editing. In Firefox on the other hand, you have to click on the actual span to edit it (yay!).

Do I need to just accept this as a Chrome thing, or is there a hack around it? Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T23:44:28.070

我强烈怀疑这只是 WebKit 的事情。您可以通过使跨度内容仅在单击时可编辑来解决它

演示：http: [//jsfiddle.net/timdown/nV4gp/](http://jsfiddle.net/timdown/nV4gp/)

HTML：

```
<body>
  <span id="hello">Hello World</span>
</body> 
```

JS：

```
document.getElementById("hello").onclick = function(evt) {
    if (!this.isContentEditable) {
        this.contentEditable = "true";
        this.focus();
    }
}; 
```

# haskell - 缓存已知“答案”的功能替代方案

> ID：10886889
> 
> 赞同：2
> 
> 时间：2012-06-04T19:12:34.653
> 
> 标签：haskell, caching

我认为形成这个问题的最好方法是举一个例子……所以，我决定问这个问题的真正原因是因为[Project Euler 上的问题 55](http://projecteuler.net/problem=55)。在这个问题中，它要求找到低于 10,000 的 Lychrel 数。在命令式语言中，我会得到导致最终回文的数字列表，并将这些数字推送到我的函数之外的列表中。然后我会检查每个传入的号码，看看它是否是该列表的一部分，如果是，只需停止测试并得出该号码不是 Lychrel 号码的结论。我会对非 lychrel 数字及其前面的数字做同样的事情。

我以前做过，效果很好。然而，在 Haskell 中实际实现这一点似乎很麻烦，而不向我的函数添加一堆额外的参数来保存前辈，以及一个绝对父函数来保存我需要存储的所有数字。

我只是想知道这里是否缺少某种工具，或者是否有任何标准可以做到这一点？我读过 Haskell 的那种“自然缓存”（例如，如果我想将奇数定义为`odds = filter odd [1..]`，我可以随时引用它，但是当我需要动态地将元素添加到列表。

关于如何解决这个问题的任何建议？

谢谢。

PS：我不是要对 Project Euler 问题的答案，我只是想更好地了解 Haskell！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T19:23:02.557

我相信你正在寻找[memoizing](http://en.wikipedia.org/wiki/Memoization)。有很多方法可以做到这一点。一种相当简单的方法是使用[MemoTrie](http://hackage.haskell.org/package/MemoTrie)包。或者，如果您知道您的输入域是一组有界数字（例如 [0,10000）），您可以创建一个数组，其中值是您的计算结果，然后您可以使用输入索引到数组中。Array 方法对您不起作用，因为即使您的输入数字低于 10,000，后续迭代也可能会增长到大于 10,000。

也就是说，当我在 Haskell 中解决问题 55 时，我并没有费心做任何记忆。事实证明，它的速度足以在所有输入数字上运行（最多）50 次迭代。事实上，现在在我的机器上运行它需要 0.2 秒才能完成。

# php - 使用 facebook API 运行长代码

> ID：10886897
> 
> 赞同：0
> 
> 时间：2012-06-04T19:12:50.393
> 
> 标签：php, python, facebook, api

我正在尝试制作一个应用程序，该应用程序可以为应用程序用户拥有的所有朋友执行操作。问题是我还没有找到可以开发这样的应用程序的平台。起初我尝试使用 PHP，我使用了 heroku 并且我的代码有效，但是因为我有很多朋友，循环超过 30 秒并且请求超时并且操作在操作中间停止。我不介意使用任何平台，我只想让它工作！Python、C++、PHP。他们都对我很好。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T21:32:51.070

让我们从您可以更改超时设置开始，具体取决于设置限制的位置，可以在 php 上，如[set_time_limit 函数文档](http://php.net/manual/en/function.set-time-limit.php)所述：

> 设置允许脚本运行的秒数。如果达到此值，脚本将返回致命错误。默认限制为 30 秒，如果存在，则为 php.ini 中定义的 max_execution_time 值。

但也可以在服务器本身上设置。
另一个问题是路由上的路由器也有自己的超时限制，所以根据我的经验，最长约 60 秒。

至于你想做什么，问题不在于你使用哪种语言/技术，而是你向 facebook 发出大量 http 请求这需要一些时间，我相信这是你的瓶颈，如果是这种情况，那么您可以通过选择 php 以外的其他东西来改进（尽管您可以使用[NIO](http://en.wikipedia.org/wiki/New_I/O)，这应该可以提高 IO 性能）。

话虽如此，php 并不总是最好的解决方案，这取决于手头的任务。
Java 或任何其他编译语言应该比脚本语言（php、python）执行得更好，如果您使用 C++，您将超越所有这些语言，但是您会觉得用 C++ 编写您的应用程序很舒服吗？

选择您最“熟悉”的语言/技术，如果您有选择余地，请从您的应用程序中找出您需要什么，然后研究哪种语言/技术更适合您的需要。

* * *

# 编辑

上次我检查的最大朋友数限制为 5000。
如果您需要为每个用户朋友运行一个图形请求，那么无论超时如何，如果不让用户等待太久，您根本无法做到这一点。

在我看来，您有两个选择：

1.  让客户端异步，你可以使用 web sockets、comet，甚至每 x 秒发出一个 ajax 请求来获取计算数据。
    这样您就无需担心超时，用户可以快速开始获取内容。

2.  使用 javascript api 发出图形请求，这样您就可以完全避免超时，另外还可以减少服务器的大量网络连接。
    如果您需要您的服务器进行计算，则此选项可能对您不可用，例如，如果您依赖数据库中的数据。

As for the "no facebook SDK for C++" issue, though I don't think it's even relevant, it's not a problem.
All facebook SDKs are simply wrappers for https request, so implementing your own SDK is not that hard, though I hate thinking about doing it with C++, but then again I hate thinking about doing anything with C++.

# eigen - 将 MPFR (mpreal) 与 Eigen3 一起使用

> ID：10886898
> 
> 赞同：3
> 
> 时间：2012-06-04T19:12:53.647
> 
> 标签：eigen, mpfr

我在 Eigen3 网站上看到 MPFR 多精度数据类型有一个“不受支持”的模块。有谁知道这有多可靠？

我的主要目标不仅是使用mpreal，而且是复杂的<mpreal>。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-06T10:01:14.487

到目前为止，它对我来说效果很好，并且尽我所能给出正确的结果。

但是，当您尝试做复杂时，您会遇到问题，因为其他人指出，复杂仅适用于内置数据类型。目前我不知道如何产生任意精度的复数。

# php - 是否有另一种方法可以在 PHP 中编写字符串文字（不带 ' 或 "）？

> ID：10886899
> 
> 赞同：14
> 
> 时间：2012-06-04T19:13:02.093
> 
> 标签：php, string, symbols

我可以在 PHP 中使用什么来代替`'`周围的正常符号和（不带 ' 或 ") 符号？

例子：

```
echo("Hello, World!") 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-04T19:14:17.133

封装字符串有 4 种方式，单引号`'`、双引号`"`、[heredoc](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)和[nowdoc](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.nowdoc)。

在此处阅读[完整的 php.net 文章](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)。

### 赫雷多克

> 第三种分隔字符串的方法是 heredoc 语法：<<<。在此运算符之后，提供一个标识符，然后是一个换行符。字符串本身紧随其后，然后再次使用相同的标识符来关闭引号。

[http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)

```
$str = <<<EOD
Example of string
spanning multiple lines
using heredoc syntax.
EOD; 
```

* * *

### 诺多克

> Nowdocs 是单引号字符串，就像 heredocs 是双引号字符串。nowdoc 的指定与heredoc 类似，但在nowdoc 内部不进行解析。该构造非常适合嵌入 PHP 代码或其他大型文本块而无需转义。它与 SGML 结构有一些共同的特征，因为它声明了一个不用于解析的文本块。
> 
> nowdoc 使用与 heredocs 相同的 <<< 序列来标识，但后面的标识符用单引号括起来，例如 <<<'EOT'。heredoc 标识符的所有规则也适用于 nowdoc 标识符，尤其是那些关于结束标识符外观的规则。

[http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.nowdoc](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.nowdoc)

```
$str = <<<'EOD'
Example of string
spanning multiple lines
using nowdoc syntax.
EOD; 
```

* * *

### 逃跑

如果要在单引号或双引号字符串中使用文字单引号或双引号，则必须对其进行转义：

```
$str = '\''; // single quote
$str = "\""; // double quote 
```

正如 Herbert 所指出的，您不必在双引号字符串中转义单引号，也不必在单引号字符串中转义双引号。

* * *

如果您必须大规模添加引号，请使用[addlashes()](http://php.net/manual/en/function.addslashes.php)函数：

```
$str = "Is your name O'reilly?";
echo addslashes($str); // Is your name O\'reilly? 
```

# jquery - 用跨度、瓶颈模拟文本选择

> ID：10886903
> 
> 赞同：0
> 
> 时间：2012-06-04T19:13:10.067
> 
> 标签：jquery, dom

我有文字。

单词包含在跨度中（跨度 ID 为 1,2,3...N）：

`<span id="79" class="p">თაობის<div class="p" style="width: 9px; left: -9px; "></div></span> <span id="80" class="p">განადგურების<div class="p" style="width: 10px; left: -10px; "></div></span>`

我通过以下方式模拟文本选择：

我需要通过更改跨度的背景颜色并使用背景填充的 div 填充跨度之间的间隙来模拟文本选择。

当跨度计数足够大时，在 Internet Explorer 中，运行“选定文本跨度”并计算放置 div（带背景颜色）之间的间隙空间的 javascript 代码需要很长时间（Internet Explorer 在跨度总量为 500 的情况）。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-04T20:52:15.540

我真的不明白“模拟文本选择”是什么意思

你可以看看这个例子[http://jsfiddle.net/fullpipe/DpP7w/embedded/result/](http://jsfiddle.net/fullpipe/DpP7w/embedded/result/)

如果您建议您的代码，将很容易为您提供帮助

大量时间花在文本生成上

# java - Java -Xmx1028m 在 Mac OS X 中不起作用

> ID：10886905
> 
> 赞同：0
> 
> 时间：2012-06-04T19:13:18.163
> 
> 标签：java, macos, unix

我正在尝试使用命令“java -Xmx1028m”

它只是在我按 Enter 后给我可用命令的列表，它不会改变 java 的最大内存大小。请帮忙！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T19:15:59.890

一般而言，这并不是*要*更改 Java 的最大堆大小——而是要为*command**的调用`java`*设置它。

所以你通常会运行：

```
java -Xmx1028M com.foo.SomeApplication 
```

（或可执行的 jar 文件，可能添加额外的选项等）。

我不知道有任何方法可以更改 Java 的*默认*最大堆大小 - 但这样做会假定所有应用程序无论如何都有相同的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T19:16:38.450

-Xmx 本身不是一个“命令”，您可以只给 java 并永久生效。您需要将其添加到您希望拥有更大堆的文件的执行中。

```
java -jar myApp.jar -Xmx1024m 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T19:23:08.027

java命令的用法是（调用错误的总是先显示）：

```
localhost:~ arne$ java 
Usage: java [-options] class [args...]
           (to execute a class)
   or  java [-options] -jar jarfile [args...]
           (to execute a jar file) 
```

如果没有类参数而不是 -jar 选项，它就无法工作。尝试`java -Xmx1028m Test.class`并接受该选项，但`ClassNotFoundException`被抛出。

你怎么知道*“它不会改变最大内存大小”*？我敢肯定，如果您通过正确的课程或罐子，它会的。

# javascript - 如何维护页面之间的 WebSockets 连接？

> ID：10886910
> 
> 赞同：34
> 
> 时间：2012-06-04T19:13:36.243
> 
> 标签：javascript, html, websocket

在我的一个脚本中，我有以下代码：

```
var webSocket = window.WebSocket || window.MozWebSocket;
window.ws = new webSocket('ws://64.121.210.140:2585/consoleappsample', 'my-protocol'); 
```

哪个工作正常。但是，当用户更改页面时，我必须重新建立连接。我相信这会导致我的代码出现问题，因为如果客户端将数据发送到服务器然后更改页面，则可能无法接收到数据并且正在发生竞争条件。

我试图把它`window.ws`放在全局范围内，但它似乎并没有解决问题。有什么方法可以让 WebSockets 连接在页面之间保持不变，这样就不需要不断地重新建立连接？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-04T19:27:29.543

您提到的全局范围始终与 JavaScript 上下文相关，并且为每个窗口创建一个上下文（并在文档从内存中卸载时销毁）。因此，您的努力是无用的：如果用户更改页面，您将无法保持连接打开。当然，您可以将您的 webapp 作为“单页”应用程序，其中所有数据都使用 XMLHttpRequest / ajax / WebSocket 加载。因此，离开页面意味着离开/关闭应用程序，并且关闭套接字是有意义的。

另一种旧方法是将您的页面放在一个框架中，用户只在框架中导航（即使它占用了整个窗口的大小）。这样，您可以在最顶部的窗口中创建您的 WebSocket，该窗口永远不会更改（这也意味着位置栏中显示的 URL 将始终相同）。

话虽如此，我同意@dystroy：您的应用程序应该始终能够处理这种情况 - 用户可能会遇到一些网络问题并暂时失去连接，即使它没有离开页面。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-06-04T22:09:52.147

您可以尝试在 Shared WebWorker 中创建 WebSocket 连接，该连接允许来自同一域的多个页面共享执行上下文。但是，尚不清楚 Shared Workers 是否在页面重新加载或替换时持续存在：[Do Shared Web Workers 在单个页面重新加载时持续存在，链接导航](https://stackoverflow.com/questions/9336774/do-shared-web-workers-persist-across-a-single-page-reload-link-navigation/9337749#comment11795892_9337749)

此外，Shared WebWorkers 目前对[浏览器的支持有限](http://caniuse.com/#feat=sharedworkers) （webkit 和 Opera）。

**更新**：

由于单个共享网络工作者可以服务多个页面，因此实现比普通网络工作者稍微复杂一些。

这是一个使用 WebSockets 并且可以在

首先是 HTML：

```
<!DOCTYPE html>
<html>
<body>
<script>
    var worker = new SharedWorker("shared.js");
    worker.port.addEventListener("message", function(e) {
        console.log("Got message: " + e.data);
    }, false);
    worker.port.start();
    worker.port.postMessage("start");
</script>
</body>
</html> 
```

实现共享工作者的Javascript `shared.js`：

```
var ws = null
var url = "ws://" + location.hostname + ":6080"
self.addEventListener("connect", function(e) {
    var port = e.ports[0]
    port.addEventListener("message", function(e) {
        if (e.data === "start") {
            if (ws === null) {
                ws = new WebSocket(url);
                port.postMessage("started connection to " + url);
            } else {
                port.postMessage("reusing connection to " + url);
            }
        }
    }, false);
    port.start();
}, false); 
```

我已经验证这在 Chrome 52 中有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-08T17:10:22.930

不幸的是，在 SPA 应用程序中不更改站点的最干净的解决方案是仅使用一个 ServiceWorker 获得的，因为它在后台完成工作（也关闭选项卡）并且它还解决了多个选项卡的问题。我说“不幸的是”，因为它们仍然与大多数浏览器不兼容。

我自己找到的唯一解决方案包括在服务器端对套接字通道进行分组，并创建一个队列以保存因更改页面而丢失的消息。在这种情况下，您有一种虚拟通道。

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2019-02-15T18:52:25.703

您可以在 localstorage 中记录与 websocket 服务器的对话，该对话会在页面加载时持续存在。

# xtk - XTK 中的 HTML5 文件 api 支持

> ID：10886911
> 
> 赞同：0
> 
> 时间：2012-06-04T19:13:39.013
> 
> 标签：xtk

是否有从本地文件系统读取文件（图像或颜色表）的方法或计划？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T19:58:50.247

是的，有（因为提交[https://github.com/xtk/X/commit/f7f7e8c362dfcbb573394ff1668e0fe1e8e16f09](https://github.com/xtk/X/commit/f7f7e8c362dfcbb573394ff1668e0fe1e8e16f09)）！

查看以下 JSFiddle [http://jsfiddle.net/haehn/TaeEF/](http://jsfiddle.net/haehn/TaeEF/)

或 XTK 沙盒上的大版本

[http://sandbox.goxtk.com/fileapi_test/](http://sandbox.goxtk.com/fileapi_test/)

您最多可以选择

*   1 卷
*   1 个标签图
*   1个色表
*   1 目
*   1个曲率文件
*   1个trk文件

立即在文件对话框中。可以多次选择文件 - 限制仅限于每个文件对话框。

# html - 表格单元格中的垂直对齐和浮动 div

> ID：10886912
> 
> 赞同：4
> 
> 时间：2012-06-04T19:13:39.210
> 
> 标签：html, css, vertical-alignment, css-tables

我有以下（示例）html代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
  <head>
    <title>TH-Alignment</title>
    <style type="text/css">
        th {
            border: 1px solid #333;
            vertical-align: middle;
        }
        div.sb {
            float: right;
            width: 4px;
            height: 26px;
            background-color: #999;
        }
    </style>
  </head>
  <body>
    <table cellspacing="0" cellpadding="0">
        <colgroup>
            <col width="120" />
            <col width="120" />
        </colgroup>
        <thead>
            <tr>
                <th>
                    <div class="sb"></div>
                    <div>Heading 1</div>
                </th>
                <th>
                    <div>Heading 2</div>
                </th>
            </tr>
        </thead>
    </table>
  </body>
</html> 
```

第二列中的 div 垂直居中，第一列中的 div 不是（始终位于表格单元格的顶部）。为什么第一列中的浮动 div 会影响表格单元格中另一个 div 的垂直对齐方式？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T12:22:48.607

如果您扩大 的高度`th`，您会注意到元素仍然垂直对齐到中间。

请参阅此[小提琴示例](http://jsfiddle.net/zuul/CP5Wx/)！

这里的问题是`line-height`.

由于您在 first 上有多个元素`th`，并且其中一个元素已`height`定义，所有元素都对齐到中间`th`但在它们之间，它们对齐到其 current 的高度`line-height`，这是未定义和由`font-size`或父元素定义计算。

由于您的浮动元素具有`height`of `26px`，因此它会向下增长，但是文本`line-height`未定义的元素因此`height`等于`font-size`内部文本提供的元素，因此永远不会到达其浮动兄弟的中间。

**要解决此问题，您需要使用：**

```
line-height: 26px; 
```

*将 a 设置为浮动元素的`line-height`相等`height`，从而将文本与浮动元素的中间对齐并解决垂直对齐的视觉方面问题。*

* * *

**使用该**工作解决方案****查看此**[小提琴示例](http://jsfiddle.net/zuul/CP5Wx/1/)！**

 ***** * *

**注意：** 一个元素并没有像您怀疑的那样影响另一个元素，它们只是没有足够的声明来使它们之间保持一致！

默认情况下，文本和图像与 对齐`baseline`，如果没有`line-height`给出，则`baseline`是`font-size`。****

# xcode - 何时使用 awakeFromNib 、 initWithWindow 、 windowDidLoad 方法？

> ID：10886913
> 
> 赞同：4
> 
> 时间：2012-06-04T19:13:49.607
> 
> 标签：xcode, macos, cocoa

当我们必须使用这些方法时，你能解释一下吗？以及在什么样的情况下我们应该使用哪种方法？现在我测试哪个有效并使用它（是的，我是初学者）.. 谢谢。我正在为 MAC 开发。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-04T20:53:45.290

首先，你永远不应该自己调用 awakeFromNib 和 windowDidLoad。你可以在你的自定义类中实现它们，然后 Cocoa 会在适当的时候调用它们。

awakeFromNib 适用于从 nib 存档加载的所有对象，而不仅仅是窗口和窗口控制器。这是一个进行设置的好地方——它是安全的（您可以保证对象已完全加载，已从其 init 调用返回，并且已设置所有出口），但还很早。

windowDidLoad（和 windowWillLoad）适用于所有窗口，无论是从 nib 存档加载还是动态创建。但它不是在窗口上调用的，而是在窗口的控制器上调用的。（通常你不是在创建你自己的 NSWindow 子类，而是你在创建你自己的 NSWindowController 子类。）如果你有依赖于正在加载的窗口的设置代码，你应该把它放在这里（但实际上在简单的情况下，因为一旦您尝试访问 window 属性，它就会被创建）。

initWithWindow: 是你自己称呼的东西，但刚入门的 Cocoa 程序员可能永远不想这样做。

您可能应该阅读 Xcode 附带的一些指南。如果您想要基于文档的应用程序，请从“Mac 的基于文档的应用程序编程指南”开始。如果你想要一个单窗口实用应用程序，你仍然需要了解 MVC 等，所以你实际上可能想先构建一个基于文档的应用程序来学习你的方法。

此外，如果您想了解事件的顺序，请尽可能覆盖每条消息，并添加类似 NSLog(@"%s", __FUNCTION__);​​ 的内容。你的系统日志将揭示一切。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-03T06:24:56.027

`initWithWindow`在您的窗口从 NIB 取消归档后，NIB 取消归档会被调用。这是初始化窗口控制器的地方。一旦整个取消归档过程完成 - 意味着您的窗口控制器和 UIView 元素已准备好 -`awakeFromNib`被调用。在此之前，要么您没有 windowController，要么整个归档过程未完成。

当你`[label setStingValue]`在`awakeFromNib`你的窗口控制器中做准备时，你的视图对象和相关的上下文也准备好了。

# sencha-touch-2 - 如何在列表中隐藏titleBar？

> ID：10886915
> 
> 赞同：1
> 
> 时间：2012-06-04T19:13:56.413
> 
> 标签：sencha-touch-2

默认列表没有titleBar，但是当我以这种方式创建列表时，它有一个空的titleBar

```
Ext.define('Application.view.RecipeList', {
    extend: 'Ext.List',
    xtype: 'recipelist',
    requires: ['Application.store.Recipes'],
    id:'list',   
    config: {             
        grouped: true,
        itemTpl: '{title}',
        store: 'Recipes',
        onItemDisclosure: true
    }
}); 
```

有人可以帮我理解如何隐藏titleBar吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T19:53:37.720

空栏实际上是您的导航栏。

如果你想隐藏它，你只需要`navigationBar`在`false`你的`mainpanel`

**更新**

```
config: {
    navigationBar: false, 
    items: [{
        xtype: 'recipelist',
    }]
} 
```

**更新**

这是在导航栏中添加搜索栏的方法

```
this.getMain().getNavigationBar().add({
    xtype: 'searchfield',
    itemId:'contact_search',
    placeHolder: 'Search....',
    listeners: {
        scope: this,
        clearicontap: this.onSearchClearIconTap,
        keyup: this.onSearchKeyUp
    }
}); 
```

但是，当您切换到详细信息卡时，您需要隐藏它，但我会让您弄清楚如何做到这一点。

# ruby-on-rails - 动作控制器异常：使用 GET 而不是 DELETE

> ID：10886917
> 
> 赞同：0
> 
> 时间：2012-06-04T19:13:59.427
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routes

我的 routes.rb 文件有以下内容：

```
Hchq::Application.routes.draw do
  resources :users
  resources :sessions, only: [:new, :create, :destroy]

  match '/signup',  to: 'users#new'
  match '/signin',  to: 'sessions#new'
  match '/signout', to: 'sessions#destroy', via: :delete
end 
```

当我跑步时，`rake routes`我得到：

```
 users GET    /users(.:format)          users#index
            POST   /users(.:format)          users#create
   new_user GET    /users/new(.:format)      users#new
  edit_user GET    /users/:id/edit(.:format) users#edit
       user GET    /users/:id(.:format)      users#show
            PUT    /users/:id(.:format)      users#update
            DELETE /users/:id(.:format)      users#destroy
   sessions POST   /sessions(.:format)       sessions#create
new_session GET    /sessions/new(.:format)   sessions#new
    session DELETE /sessions/:id(.:format)   sessions#destroy
     signup        /signup(.:format)         users#new
     signin        /signin(.:format)         sessions#new
    signout DELETE /signout(.:format)        sessions#destroy 
```

然而，当我去时，`http://localhost:3000/signout`我得到以下信息：

![路由错误：动作控制器异常](../Images/e42d4d637a20b1d14f54fd0c661a8326.png)

在日志中我得到：`ActionController::RoutingError (No route matches [GET] "/signout"):`

哪个，我不应该在 /signout 路由上使用 [DELETE] 而不是 [GET] 吗？如果是这样，我该如何更改？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T19:19:49.547

通过直接从浏览器导航到该地址，您实际上是在执行 GET 请求。默认情况下，当用户输入 URL 并要求它呈现页面时，浏览器会提交 GET 请求。

您应该在视图中插入一个链接，并使用该方法作为选项`#link_to`传递，如下所示：`DELETE`

```
link_to "Signout", signout_path, :method => :delete 
```

# android - 图像梯度丢失降级

> ID：10886921
> 
> 赞同：0
> 
> 时间：2012-06-04T19:14:24.823
> 
> 标签：android, image, gradient

我有一张图片：

![背景降级](../Images/41b5d24105fff00c1d5bcc465e8f9649.png)

但在应用程序中它看起来像这样：

![安卓背景](../Images/a8f9f6d8a5e3be8a9e897c7a2274b6d2.png)

意识到它失去了多么可耻，为什么会发生这种情况？以及如何修复它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T21:37:40.737

我在[这里找到了解决方案](https://stackoverflow.com/questions/8417608/awful-background-image-quality-in-android/8417703#8417703)

[这](http://www.curious-creature.org/2010/12/08/bitmap-quality-banding-and-dithering/)是[Sergey Glotov](https://stackoverflow.com/users/436938/sergey-glotov)指出的关于这个主题的好文章

# html - 将页面分成两半（顶部和底部）

> ID：10886927
> 
> 赞同：9
> 
> 时间：2012-06-04T19:14:36.867
> 
> 标签：html

我想将一个页面分成两半（不是作为一列），而是作为一行（顶部和底部），并提供两种颜色，一种用于顶部，一种用于底部。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-04T19:20:45.093

## [dabblet.com 上的演示](http://dabblet.com/gist/2870276)

**html:**

```
<div id="top">top</div>
<div id="bottom">bottom</div> 
```

**CSS：**

```
#top,
#bottom {
    position: fixed;
    left: 0;
    right: 0;
    height: 50%;
}

#top {
    top: 0;
    background-color: orange;
}

#bottom {
    bottom: 0;
    background-color: green;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-04T19:29:14.497

**演示：** [Jsfiddle](http://jsfiddle.net/vznAr/)

**HTML**

```
<body>
<div style="height:100%">
<div class="topdiv">top div</div>
<div class="bottomdiv">bottom div</div>
</div> 
```

**CSS**

```
body {margin:0;padding:0;height:100%;}
div.topdiv {clear:both;position:fixed;top:0;height:50%;width:100%;background-color:#990000;color:#FFFFFF;font-size:16px;text-align:center;}
div.bottomdiv {clear:both;position:fixed;bottom:0;height:50%;width:100%;background-color:#009900;color:#FFFFFF;font-size:16px;text-align:center;}​ 
```

# jquery - 来自 Google CDN 的 HTTPS 友好的 jQuery CSS 主题

> ID：10886929
> 
> 赞同：0
> 
> 时间：2012-06-04T19:15:04.230
> 
> 标签：jquery, css, jquery-ui, https, google-cdn

只是想获得谷歌托管的 jquery css 主题的 https 友好版本，即

[http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css](http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css)

加载 [https://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css](https://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css)有效，但存在一些图标本身不是从 https 提供的问题。即：

> [https://mysite.com](https://mysite.com)上的页面运行来自[http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css](http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css)的不安全内容 。[https://mysite.com/](https://mysite.com/)上的页面显示来自[http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/images/ui-bg_flat_75_ffffff_40x100.png](http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/images/ui-bg_flat_75_ffffff_40x100.png)的不安全内容 。[https://mysite.com/](https://mysite.com/)上的页面显示来自[http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/images/ui-icons_222222_256x240.png](http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/images/ui-icons_222222_256x240.png)的不安全内容 。[https://mysite.com/](https://mysite.com/)上的页面显示来自[http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/images/ui-bg_flat_0_aaaaaa_40x100.png](http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/images/ui-bg_flat_0_aaaaaa_40x100.png)的不安全内容 . [https://mysite.com/](https://mysite.com/)上的页面显示来自[http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/images/ui-bg_highlight-soft_75_cccccc_1x100.png](http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/images/ui-bg_highlight-soft_75_cccccc_1x100.png)的不安全内容 。[https://mysite.com/](https://mysite.com/)上的页面显示来自[http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/images/ui-icons_222222_256x240.png](http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/images/ui-icons_222222_256x240.png)的不安全内容 。

我希望它从谷歌托管。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-04T19:21:48.680

你*对此*无能为力。因为`jquery-ui.css`from `https://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css`内部只使用*图像*`http://...`。

尝试[协议相对 URL](http://www.google.com/search?q=protocol%20relative%20URL)（由[RFC 3986 的第 4.2 节](https://www.rfc-editor.org/rfc/rfc3986#section-4.2)）：

```
<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css"  
type="text/javascript"></script> 
```

# php - 将 JSON 结果 stdClass Object() 解码为格式化的 HTML

> ID：10886931
> 
> 赞同：0
> 
> 时间：2012-06-04T19:15:08.380
> 
> 标签：php, html, json, stdclass

如何将 JSON 解码为 html 列表，并能够将其转换为“div”或 DOM 元素，或者我是否遗漏了什么？

```
stdClass Object ( 
[msc] => 26771010150 
[number] => 2677410930 
[status] => OK 
[msc_mcc] => 652 
[imsi] => 652010151221139 
[mcc] => 652 
[operator_country] => Botswana 
[msc_operator_name] => Mascom Wireless (Pty) Ltd. 
[msc_operator_country] => Botswana 
[msc_mnc] => 01 [mnc] => 01 
[id] => 928692391 
[msc_location] => 
[operator_name] => Mascom Wireless (Pty) Ltd. 
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T19:16:45.760

无论您在哪里解码 php 中的 json，而不是使用

```
json_decode($json,true) 
```

它将返回您可以在 html 中轻松使用的关联数组。

# perl - “未初始化值”误报

> ID：10886932
> 
> 赞同：1
> 
> 时间：2012-06-04T19:15:13.107
> 
> 标签：perl, embedded

我认为 PERL（CentOS 内核 2.6.18-308.8.1.el5 上的 5.8.8）给了我一个误报的“未初始化变量”警告。我所有的搜索都出现了合法的未初始化值问题。也许我的也是，如果是这样的话，那么对正在发生的事情（以及如何正确地做我想做的事情）的解释会很棒。我还查看了许多关于 hex() 和正确函数参数习语的参考资料，我认为我做的都是正确的。

我的脚本读取 2 个文本文件：一个包含 32 位硬件地址，另一个包含从该地址读回的 32 位数据。每个文件中的值总是 8 个十六进制数字长，并且两个文件都是 100% 匹配的（地址文件中的第 1 行对应于数据文件中的第 1 行）。当数据值为非零时，一切都很好，但是当数据值为 0 时，我收到警告：

```
Use of uninitialized value in string eq at ../VMetro_Parser.pl line 248.
Use of uninitialized value in hex at ../VMetro_Parser.pl line 250. 
```

相关代码：

```
sub ppReg_TX_Mode_Reg {
    my( $data ) = @_; # first arg should be the Data field
    my $ret = "\t";
    if( $data eq "00000000" ) { print "TX_Mode_Reg got 0 input\n"; } #LINE 248
    #croak( "data not defined!" ) unless defined $data;
    my( $hex ) = hex($data); #LINE 250

    $ret .= sprintf( "Clear INTs: %02X   ",         (($hex >> 25) & 0x7F) ); 
```

产生预期行为的输入：

```
Address: 90000004
Data: 00000004 
```

PERL 脚本的输出：

```
90000004 00000004 ->  Wr TX00 Mode_Reg
    Clear INTs: 00 
```

产生意外“未初始化值”警告的输入：

```
Address: 90000004
Data: 00000000 
```

PERL 脚本的输出：

```
90000004 00000000 ->  Wr TX00 Mode_Reg
TX_Mode_Reg got 0 input
    Clear INTs: 00 
```

显然，它正在识别作为字符串“00000000”传入的参数，但它也认为它是 undef（如果我取消注释，就会触发 croak 行）。是什么赋予了？

一件有趣的事情是，还有其他数据为 0 的实例，但没有引发任何警告。其他 0 数据由不同的函数处理，并发生在引发警告的行之后，但处理是相同的（除了上面代码中明显的调试操作，只是因为警告而添加的）。

例如

```
sub ppReg_RX_Master_Mode_Reg {
    my( $data ) = @_; # first arg should be the Data field
    my $ret = "\t";
    my( $hex ) = hex($data); 
```

不抛出任何警告。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T18:56:14.807

正如预期的那样，问题出在我的代码上，而不是 Perl :) 我正在使用调度表来调用我的处理函数。**Dispatch Table 定义中的拼写错误导致在 Perl 处理表的声明时调用该函数。**

违规代码：

```
# 'Dispatch table' is a hash for functions
my %regPPFn = (
        TX_Version_Reg  =>  \&ppReg_TX_Version_Reg,
        TX_Mode_Reg =>  \&ppReg_TX_Mode_Reg,
        TX_Run_Reg  =>  \&ppReg_TX_Run_Reg,
        ...
        # Note: GCs are mostly TXs, so mostly call the TX fn()s
        GC_Version_Reg  =>  \&ppReg_TX_Version_Reg,
        GC_Mode_Reg =>  &ppReg_TX_Mode_Reg,
        GC_DMA =>   \&ppReg_GC_DMA,
        GC__Reg =>  \&ppReg_GC__Reg,
        "" => sub { print "Dispatch table NULL lookup\n" }
        ); # Array of pointers to register Pretty Print functions 
```

您可以看到 *GC_Mode_Reg* 的函数引用在 & 号之前缺少反斜杠。

```
GC_Mode_Reg =>  &ppReg_TX_Mode_Reg, 
```

应该

```
GC_Mode_Reg =>  \&ppReg_TX_Mode_Reg, 
```

使用 Data::Dumper 是让我走上正轨的第一步，它向我展示了我的函数在“可能被调用”之前被调用过一次。使用 $| = 1 也帮助我相信了输出文本的顺序；我曾认为在我的打印语句之前出现的警告消息是由于缓冲造成的。

由于该解决方案与最初的假设/问题标题相差甚远，因此请告诉我您是否以及如何认为我应该编辑此问题。我犹豫要不要改变它，因为遇到同样问题的其他人可能会像我一样在错误的地方寻找。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T19:40:11.603

这不太可能是 Perl 的问题。

请记住，警告发送到 STDERR，而您的输出将发送到 STDOUT。两者不一定同步，因此您不能将警告与同一记录的输出联系起来。

`print`使用and`die`代替`croak`以正确顺序显示警告可能会有所帮助。

我建议您将子程序更改为

```
sub ppReg_TX_Mode_Reg {
  my ($data) = @_;
  do { warn 'Undefined $data parameter'; return; } unless defined $data;

  . . .
} 
```

这样代码就不会针对无效数据执行。

您的问题可能出在从文件记录中提取数据的代码中。您是否正确处理空行？如果您需要帮助，请显示这部分代码。

# java - 排序字符串对象

> ID：10886934
> 
> 赞同：1
> 
> 时间：2012-06-04T19:15:30.390
> 
> 标签：java, collections, sorting

我只是想看看是否有一种简单的方法可以对 String 对象列表进行排序。我现在面临的问题是 Collections.sort(...) 方法对我不起作用。

这是我的原始列表，出于我的要求，已对其进行了排序：

```
 List<String> values = new ArrayList<String>();

    values.add("section_1");
    values.add("section_2");
    values.add("section_3");
    values.add("section_4");
    values.add("section_5");
    values.add("section_6");
    values.add("section_7");
    values.add("section_8");
    values.add("section_9");
    values.add("section_10");
    values.add("section_11");
    values.add("section_12");
    values.add("section_13"); 
```

在执行 Collections.sort(values) 之后，顺序现在被破坏了：

```
section_1
section_10
section_11 
section_12
section_13
section_2
section_3
section_4
section_5
section_6
section_7
section_8
section_9 
```

这种行为是因为 Collections.sort(...) 中使用的字典顺序吗？有没有更简单的方法可以让这种工作按我想要的方式工作？

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-04T19:17:55.867

> 这种行为是因为 Collections.sort(...) 中使用的字典顺序吗？

绝对地。您已根据自然顺序对字符串进行了排序。

> 有没有更简单的方法可以让这种工作按我想要的方式工作？

创建一个类实现`Comparator<String>`来表达您要使用的比较，并将其作为第二个参数传递给[`Collections.sort`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#sort%28java.util.List,%20java.util.Comparator%29). 您必须自己编写逻辑（或找到第三方库来这样做）。我认为标准库中没有任何东西可以做到这一点。（您需要考虑区分大小写以及可能的各种其他事情。）

当然，如果您可以将*数据*更改为`section_01`等`section_02`，这意味着您可以只使用自然排序顺序......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T19:19:30.857

您需要使用自定义比较器来提取字符串的数字部分，将它们转换为整数实例，然后比较这些整数：

```
public class SectionComparator implements Comparator<String>() {
    @Override
    public int compare(String s1, String s2) {
        Integer i1 = Integer.valueOf(s1.substring(s1.indexOf('_') + 1));
        Integer i2 = Integer.valueOf(s1.substring(s2.indexOf('_') + 1));
        return i1.compareTo(i2),
    }
} 
```

但是除了使用字符串来表示部分，您还可以使用`Section`对象，它具有数字属性、`toString()`方法和使用数字属性的自然排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T19:24:14.210

另见[这篇](https://stackoverflow.com/questions/104599/sort-on-a-string-that-may-contain-a-number)文章

你需要使用[Alphanum 算法](http://www.davekoelle.com/alphanum.html)

其他人之前建议实施 Comparator。[这是一个实现](http://www.davekoelle.com/files/AlphanumComparator.java)

祝你好运！

# .net - TinyMCE 在部分回发后呈现不可编辑

> ID：10886936
> 
> 赞同：1
> 
> 时间：2012-06-04T19:15:39.207
> 
> 标签：.net, tinymce, updatepanel

我最近在更新面板中集成了 tinymce。

它在除 Firefox 之外的所有主要浏览器中都能很好地工作（用 Firefox 12、13b7 和最新的 nightly 15a01 测试）。我还用 Firefox 10 进行了测试，它做同样的事情，只是不适用于 Firefox 4

我正在使用 TinyMCE 3.5.2

这是我的工作流程：

TinyMCE 第一次正确加载，我可以编辑内容。但是，当我进行部分回发时，我可以看到它已成功加载（我可以看到文本出现了一两秒钟），然后它消失了，tinymce 变得无法使用。这意味着我不能点击它，不能集中注意力。但是，我可以手动修改 DOM 并查看文本。

我的更新面板包含一个用户控件，其中 tinymce 在页面加载时使用以下内容加载：

```
WebHelper.RegisterRichTextEditorInsideStartupScriptNoLoading(Page)
ScriptManager.RegisterStartupScript(upanel, upanel.GetType(), upanel.UniqueID, "tinymce.init();", True) 
```

其中 upanel 是我的 UpdatePanel id，并且指向 tinymce 的链接是使用网络帮助程序添加的

有任何想法吗？它在 IE 9、Chrome、Windows 和 MAC 上的 Safari 中运行良好。

我发现了这个：[https](https://bugzilla.mozilla.org/show_bug.cgi?id=737784) ://bugzilla.mozilla.org/show_bug.cgi?id=737784 这看起来像我的问题，但找不到任何解决方案。

谢谢

# android - Android中AutoCompleteTextView的内置单词列表

> ID：10886939
> 
> 赞同：1
> 
> 时间：2012-06-04T19:15:47.653
> 
> 标签：android, dictionary, word

我想在类似于字典的应用程序中制作 AutoCompleteTextView。我发现了很多单词列表，最容易访问的是 /usr/share/dict 中的 dicts。问题是这些单词列表的大小（大约 1MB）。由于我没有特定的需求，字典中的常规单词就足够了，我希望有一种机制可以使用常规 Android 系统中可能提供的单词列表。

问题是：有没有办法使用 Android 操作系统的内置单词列表，或者我应该在我的应用程序中捆绑一个 1MB 的额外单词列表文件？

# save - 从强类型视图中保存模型

> ID：10886941
> 
> 赞同：0
> 
> 时间：2012-06-04T19:15:50.207
> 
> 标签：save, asp.net-mvc-3-areas, strongly-typed-view

想象一下，您已将模型发送到视图...您正试图在编辑此模型后对其进行保存。如果您没有写出所有字段（例如标识对象），它们会以某种方式重置为零或空（如果它是字符串）。我所做的是写出一个隐藏字段，以便当我尝试保存这个对象时，我能够识别它是哪个对象......

这是好形式吗？还是我错过了一步？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T19:25:41.963

如果你已经在文件头的视图中指定了你的模型类型，并且你正在使用`Html.BeginForm`辅助方法，我很确定它已经为你发送了 id。

编辑：我测试了它，它是正确的。Html.BeginForm 方法创建了输出

```
<form action="/Product/Edit/1" method="post"> 
```

这就是它发送 id 的原因。

这是我用来测试它的控制器：

```
using System.Web.Mvc;
using MvcApplication2.Models;

namespace MvcApplication2.Controllers
{
    public class ProductController : Controller
    {
       public ActionResult Edit(int id)
        {            
            return View(new Product { Id = 1, Name = "Test"});
        }

        [HttpPost]
        public ActionResult Edit(Product product)
        {
            return Edit(product.Id);
        }

    }
} 
```

和视图：

```
@model MvcApplication2.Models.Product

@using (Html.BeginForm()) {
    <fieldset>
        <legend>Product</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.Name)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Name)
            @Html.ValidationMessageFor(model => model.Name)
        </div>

        <p>
            <input type="submit" value="Save" />
        </p>
    </fieldset>
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T19:20:13.527

这可以。只要他们不会编辑对象身份，您就可以使用 id 作为隐藏输入。

如果您懒得写出所有字段，我还建议您查看 automapper。

# gnuplot - 使用“带图像”时，gnuplot 抽动消失

> ID：10886943
> 
> 赞同：8
> 
> 时间：2012-06-04T19:15:53.527
> 
> 标签：gnuplot

我有一个简单的脚本：

```
set term postscript portrait color
set output 'output.ps'
plot 'data_file' using 1:2:3 with image, 'data_file2' using 1:2 with lines 
```

问题是该`with image`命令使抽动在两个轴上都消失了，除非我删除该命令，否则我无法让 gnuplot 显示它们，因为我正在绘制一个`cbrange`（第三列是范围）

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-22T16:31:49.757

pm3d 与“plot ... with image”不同，因此解决方法可能不是最佳解决方案。看来，当您使用“带图像”选项时，gnuplot 会自动将抽动设置为背景，所以

```
set tics front 
```

应该解决问题（至少在我的情况下是这样）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T12:48:21.080

我通过设置`set pm3d map`和使用`splot`而不是绘图来解决这个问题。第二个图（这是一个二维图）需要一个虚拟`Z`值，所以我重复了一个列。

最后，工作代码如下所示：

```
set term postscript portrait color
set output 'output.ps'
set pm3d map
splot 'data_file' using 1:2:3 with image, 'data_file2' using 1:2:2 with lines 
```

# c++ - Xcode中多个图像之间的交集

> ID：10886944
> 
> 赞同：1
> 
> 时间：2012-06-04T19:15:56.257
> 
> 标签：c++, iphone, xcode, image

嘿伙计们，我一直在制作一个游戏，其中用户按下一个按钮，每次按下该按钮时，屏幕都会添加一个新的 UIImageView（每次都相同）。这些 UIImageView 可以通过 UITouch 功能单独拖动。但我希望他们也能检测到十字路口！我想知道哪两个 UIImageViews 相交，所以我可以更改相交的两个 UIImageViews 的图像 URL。

```
-(IBAction)ClTouched:(id)sender {

imgView2 = [[UIImageView alloc] initWithFrame:CGRectMake(120, 20, 80, 80)];
imgView2.backgroundColor = [UIColor clearColor];
imgView2.userInteractionEnabled = TRUE;
imgView2.image = [UIImage imageNamed:@"Cl.png"];

[self.view addSubview:imgView2]; 
```

}

// 用触摸移动图像你可以 - (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event { imgView.userInteractionEnabled = TRUE;

```
// get touch event
UITouch *touch = [[event allTouches] anyObject];
CGPoint touchLocation = [touch locationInView:self.view];

if ([self.view.subviews containsObject:[touch view]]) {
    [touch view].center = touchLocation;
}

if (CGRectIntersectsRect(imgView.frame, imgView2.frame)) {
    naam.text = @"INTERSECTION";
} 
```

}

我希望这是足够的信息来帮助我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T19:55:27.417

**我的方法**

我在我创建的游戏中遇到了类似的问题，目标以不同的颜色和属性出现在屏幕上。我接近它的方法是使用 NSMutableDictionary 并存储每个作为按钮的目标，然后在我停止使用它们时将它们删除。

**创建图像**

每次用户按下该按钮时，我都会创建一个新的 UIImageView，然后将其存储在包含每个 UIImageView 的字典中。我会用“1”或“2”之类的唯一键存储它们。这样，您可以将数字保存为图像中的标签，然后稍后获取数字，这实际上是 UIImageView 的键。换句话说，UIImageView 的标签与存储在字典中的键值相同。

**碰撞**

我也遇到过这个问题，我想出了一个解决方案。

```
-(BOOL) checkIfFrame:(CGRect)frameOne collidesWithFrame:(CGRect)frameTwo {
    return (CGRectIntersectsRect(frameOne, frameTwo));
} 
```

`frameA`如果与 碰撞，此方法返回 TRUE 或 FALSE 语句`frameB`。

**NSMutableDictionary 使用示例**

```
NSMutableDictionary * imageViewsDictionary;
int lastImageViewNumber = 0;

-(IBAction *) addNewImageView {
    UIImageView * newImageView;

    newImageView.image = [UIImage imageNamed:@""]; //Your Image
    newImageView.frame = CGRectMake:(0, 0, 0, 0); //Your Frame
    newImageView.tag = lastImageViewNumber;

    NSString * currentKey = [NSString stringWithFormat:@"%d", lastImageViewNumber];
    [imageViewsDictionary setObject:newImageView forKey:currentKey];

    [self.view addSubview:newImageView];

    lastImageViewNumber ++;
}

-(void) removeImageView:(id)sender {
    UIImageView * imageView = (UIImageView *)sender;

    [imageView removeFromSuperview];

    NSString * key = [NSString stringWithFormat:@"%d", imageView.tag];
    [imageViewsDictionary removeObjectForKey:key];

    lastImageViewNumber --;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T19:22:40.387

您将使用`CGRectIntersectsRect()`查看是否有任何 UIImageView 与另一个相交。下面的例子..

**编辑：后来意识到您已经实现了该`CGRectIntersectsRect()`方法。如果您有一组可以访问的所有其他图像，在拖动要比较的图像时，您可以执行以下操作**

```
 for(UIImageView *image in yourArrayOfImages) {

         if(CGRectIntersectsRect(self.frame,[image frame])) {

              NSLog(@"self overlaps %@",image);
              //Now you know self is overlapping `image`, change the URL.

          }

    } 
```

由于您有多个这些图像，因此您必须对所有图像进行 for 循环，并使用上述方法来确定哪些图像相交。

# python - IPython 的神奇 %paste 是如何工作的？

> ID：10886946
> 
> 赞同：101
> 
> 时间：2012-06-04T19:16:04.153
> 
> 标签：python, ipython

我想将已经缩进的 Python 代码/整个函数和类复制到 IPython 中。每次我尝试缩进都搞砸了，我收到以下错误消息：

`IndentationError: unindent does not match any outer indentation level (<ipython-input-23-354f8c8be51b>, line 12)`

`If you want to paste code into IPython, try the %paste and %cpaste magic functions.`

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2012-06-04T19:16:04.293

您不能直接复制到 IPython。这是步骤：

1.  将要复制到 IPython 中的行复制到剪贴板
2.  进入`%paste`IPython
3.  按回车
4.  利润！

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2014-08-05T01:06:45.630

步骤说明：

*   首先，将目标行复制到剪贴板中。

*   在 iPython 提示符中输入：

    *   如果在 Tkinter 上：输入`%paste`
    *   否则：输入`%cpaste`
*   粘贴 (Ctrl-V) 并按 Enter。

*   然后输入`--`并回车。

例如：

```
In [1]: %cpaste
Pasting code; enter '--' alone on the line to stop or use Ctrl-D.
:for l in "Hello World":
:    print l,
:--
H e l l o   W o r l d 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2016-07-17T09:05:45.040

从**Ipython 5 开始**，您不需要任何魔法命令，只需粘贴即可

![ipython5](../Images/a091a4fa1d9b13b8eb19637bbf8410f7.png)

> 感谢`prompt_toolkit`，`IPython`现在支持：
> 
> *   键入时突出显示语法
> *   真正的多行编辑（上下箭头键在行间移动）
> *   多行粘贴而不破坏缩进或立即执行代码
> *   更好的代码完成界面（我们计划进一步改进） 可选的鼠标支持

更多关于[这里](https://blog.jupyter.org/release-of-ipython-5-0-8ce60b8d2e8e)

升级`ipython`到最新版本

```
pip install ipython --upgrade 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-09-05T16:47:19.220

`%paste` 需要`Tkinter`. 如果您在 ubuntu 中，则可以通过以下方式安装它

```
sudo apt-get install python-tk 
```

如果你在 Python3

```
sudo apt-get install python3-tk 
```

然后重新启动 ipython 并使用`%paste`从剪贴板粘贴。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-02-22T08:26:30.223

评论中丢失了一个有用的答案，因此想重述它，并为另一个有用的 IPython 魔术函数添加参考。

首先重申@EOL所说的，解决OP问题的一种方法是通过首先运行并进行粘贴来关闭自动缩进`%autoindent`（当然，如果您正在使用，则不需要`%paste`）。

现在要向此处已有的内容添加更多信息，IPython 中另一种有用的模式是`%doctest_mode`允许您从文档字符串中复制粘贴示例和测试片段。这对于执行您可以在文档和在线论坛中找到的交互式 python 会话输出也很有用，而无需先删除提示字符串。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-01-26T06:14:22.053

对于使用 Python 3 的 ubuntu 用户。

适用于`python-tk`Python 2。

要`%paste`在 Python 3 上运行，请安装`python3-tk`包：

```
sudo apt-get install python3-tk 
```

# node.js - mongoose 和 express - 如何将两个函数组合成一个输出

> ID：10886950
> 
> 赞同：0
> 
> 时间：2012-06-04T19:16:24.783
> 
> 标签：node.js, mongoose, express

我正在尝试为我的网站制作搜索表单，其中包含两个单独的输入，一个用于标题关键字，另一个用于帖子正文。我不知道如何将这两个变量（标题的 asd 和正文的 asdd）传递给函数，这就是我的 app.js 文件：

```
app.get('/search', function(req, res) {
    postdb.findByTitle(asd, function(error, article) {
        res.render('search.jade',
        { locals: {
            title: article.title,
            articles:article
        }
        });
    });
}); 
```

这是查找功能（检查粗体部分）：

```
PostDB.prototype.findByTitle = function(**asd asdd**, callback) {
    this.getCollection(function(error, article_collection) {
      if( error ) callback(error)
      else {
        article_collection.find({**title: asd, body:asdd**}).toArray(function(error, results) {
          if( error ) callback(error)
          else callback(null, results)
        });
      }
    });
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T04:32:39.903

将几个带有 url 的查询字符串参数传递给 /search。

例如：

```
 /search?title=asd&body=asdd; 
```

然后使用 req 对象获取它们并传递给您的函数：

```
app.get('/search', function(req, res) {
    var title = req.query.title
       ,body = req.query.body;

    postdb.findByTitle(title, body, function(error, article) {
        res.render('search.jade',
        { locals: {
            title: article.title,
            articles:article
        }
        });
    });
}); 
```

# javascript - 防止 XSS 漏洞

> ID：10886951
> 
> 赞同：0
> 
> 时间：2012-06-04T19:16:27.973
> 
> 标签：javascript, html, security, xss

> **可能重复：**
> [在客户端清理/重写 HTML](https://stackoverflow.com/questions/295566/sanitize-rewrite-html-on-the-client-side)

我正在开发一个从 JSON 文件中解析数据的 HTML5 和 JQuery 网站。

我对如何防止该项目的 XSS 缺陷以及我应该做些什么来优化 HTML5 和 Javascript 以使 XSS 没有任何问题有疑问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T15:28:10.507

XSS 是一个仅发生在动态生成页面的网站上的缺陷。具有静态页面的网站不易受到 XSS 攻击。

XSS 缺陷分为三种类型。

*   持久 - 用户输入由存储在 Web 应用程序中的恶意软件代码组成，随后在每个请求中呈现以读取该代码以及数据片段。
*   非持久性 - 用户输入包含在服务器对请求的响应中返回的恶意代码，它不会存储在 Web 应用程序中，因此它特定于该请求。
*   基于 DOM - 这不涉及 Web 服务器，它位于 Web 浏览器的本地。我想这就是你要找的。

查看[此](http://projects.webappsec.org/w/page/13246920/Cross%20Site%20Scripting)链接以获得有关 XSS 的良好解释。为避免 XSS，您必须执行输入验证。

# java - 如何将 arraylist 对象 (int , string, boolean "false") 更改为 (int,String,boolean"true") 并将其返回到数组列表？

> ID：10886953
> 
> 赞同：0
> 
> 时间：2012-06-04T19:16:36.320
> 
> 标签：java, arraylist, call

我对编程很陌生，我正在研究一个库接口，以更好地熟悉 java 的某些方面。我想要做的是调用一个`checkOutBook();`方法，用户在其中输入书籍 isbn，一个 if 语句迭代抛出 arraylist 寻找那个 isbn。如果它在那里，我会得到索引来尝试调用 book 对象以将布尔值更改为 false 以表明该书不可用。但我不知道该怎么做。找了几天了。

```
public void checkout() {
    // TODO Auto-generated method stub
    int q =  l.getReturnB();
    if (Cat.cat.contains(q)){

        book r = Cat.cat.get(q);
        book b = new book(b.getIsbn(),b.getTitle(),b.c); // c = the         boolean value which is true. 
        r(b.getIsbn(),b.getTitle(),false);
        Cat.cat.add(r);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T19:25:12.067

您可以在书本类中有一个名为 checkOut 的方法，它将书本的布尔值更改为 false。在 if 语句中调用该方法。

```
if(Cat.cat.contains(q))
{

book r = Cat.cat.get(q);
r.checkOut();

} 
```

# jquery - 当模态层（或选项卡更改）出现在动画顶部时停止 jQuery 动画

> ID：10886956
> 
> 赞同：2
> 
> 时间：2012-06-04T19:16:40.213
> 
> 标签：jquery, jquery-plugins

我正在使用图像序列编写一个 jQuery 动画插件。`pause`当动画`modal layer`顶部打开或选项卡更改时，我需要动画。不知道在哪里绑定动画停止..

这就是我在做什么..

[http://designs.phases.dk/flip/](http://designs.phases.dk/flip/)

加载所有图像后动画开始..现在如果您单击“打开弹出窗口”链接，则会出现模态层..但动画仍在继续..试图找到一种方法来阻止它..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T19:38:46.573

您可以触发“暂停”链接的点击事件来暂停动画。

```
$('.fancybox').click(function(){
      $('.pause').trigger('click');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T20:11:17.723

只是其他版本 - 在模型加载时 - 使用 parent.$("#pause").trigger('click');

# javascript - Javascript 历史记录不起作用

> ID：10886958
> 
> 赞同：-2
> 
> 时间：2012-06-04T19:16:41.563
> 
> 标签：javascript

```
document.addEventListener('DOMContentLoaded', function () {
  displayRecentUrls("recentUrls");
});

function displayRecentUrls(divName) {
    var popup = document.getElementById(divName);
    var ul = document.createElement("ul");
    popup.appendChild(ul);
    var microsecondsPerWeek = 1000 * 60 * 60 * 24 * 7;
    var oneWeekAgo = (new Date).getTime() - microsecondsPerWeek;
    history.search({
      'text': '',              
      'startTime': oneWeekAgo  
    },
    function(historyItems) {
      for (var i = 0; i < historyItems.length; ++i) {
        var url = historyItems[i].url;
        var li = document.createElement("li");
        ul.appendChild(li);
        var a = document.createElement("a");
        a.href = url;
        a.appendChild(document.createTextNode(url));
        li.appendChild(a);
      }

    });
} 
```

我写了上面的代码来生成一周的浏览历史。这没用。我是 Javascript 新手，所以我可能犯了一个愚蠢的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T19:24:33.960

据我所知，您无法获取浏览器历史记录。但是，您可以做的是查看用户是否访问过某些 URL。这是一个[例子](http://www.dicabrio.com/javascript/steal-history.php)。

如果您只想返回一页，`document.referrer`则为您提供用户来自的页面。

# google-maps - javascript v3 的 api 密钥、每日限制、免费与定价模型

> ID：10886959
> 
> 赞同：1
> 
> 时间：2012-06-04T19:16:42.687
> 
> 标签：google-maps

我有大约 300 个使用谷歌地图的域。每个都有一个单独的 API 密钥。其中一个给了我一个错误，说不正确的密钥，然后跟进我现在了解到 v3 没有密钥并且 API 限制为每天 25k 个地图。

这是每个帐户还是每个网站 25k？

谢谢迈克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T19:24:13.907

Google API 的某些部分需要 API 密钥，而其他部分在使用 JavaScript API 时不需要。对于不需要密钥的部分，除非您使用 API 密钥，否则限制是每个客户端 IP。否则，我相信使用限制是每个密钥的，所以如果每个网站都有不同的密钥，那么你应该没问题。

[https://developers.google.com/maps/faq#usagelimits](https://developers.google.com/maps/faq#usagelimits)

# java - 使用 BigInteger 将负数解释为无符号数

> ID：10886962
> 
> 赞同：4
> 
> 时间：2012-06-04T19:16:54.837
> 
> 标签：java, biginteger, unsigned

是否可以使用 Java 将负数解析为无符号值`BigInteger`？

因此，例如，我将解释`-1`为`FFFFFFFFFFFFFFFF`.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-04T19:23:56.747

尝试使用构造函数

```
public BigInteger(int signum, byte[] magnitude) 
```

第一个参数应设置为 1 以指定您要创建一个正数。字节数组是您在 BIG ENDIAN ORDER 中解析的数字。如果您将第一个参数设置为 1，它应该被解释为一个无符号数。唯一的技巧是将您的数字放入一个字节数组中，但这应该不会太难。

编辑：看起来你必须在这里做一些手动位算术。如果我正确理解您的问题，您需要将 String 解释为 Long，然后将其解释为 unsigned 并将其存储在 BigInteger 类中。我会这样做。

```
public BigInteger getValue(String numberString)
{
   Long longValue = Long.valueOf(numberString);
   byte [] numberAsArray = new byte[8];  
   for(int i = 0; i < 8; i++)
   {  
      numberAsArray[7 - i] = (byte)((longValue >>> (i * 8)) & 0xFF);
   }
   return new BigInteger(1, numberAsArray);
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-04T20:20:59.503

如果您正在考虑二进制补码，则必须指定工作位长度。Java long 有 64 位，但 BigInteger 是无界的。

你可以这样做：

```
// Two's complement reference: 2^n . 
// In this case, 2^64 (so as to emulate a unsigned long)
private static final BigInteger TWO_COMPL_REF = BigInteger.ONE.shiftLeft(64);

public static BigInteger parseBigIntegerPositive(String num) {
    BigInteger b = new BigInteger(num);
    if (b.compareTo(BigInteger.ZERO) < 0)
        b = b.add(TWO_COMPL_REF);
    return b;
}

public static void main(String[] args) {
    System.out.println(parseBigIntegerPositive("-1").toString(16));
} 
```

但这隐含地意味着您正在使用 0 - 2^64-1 范围内的 BigIntegers。

或者，更一般地说：

```
public static BigInteger parseBigIntegerPositive(String num,int bitlen) {
    BigInteger b = new BigInteger(num);
    if (b.compareTo(BigInteger.ZERO) < 0)
        b = b.add(BigInteger.ONE.shiftLeft(bitlen));
    return b;
} 
```

为了使它更加万无一失，您可以添加一些检查，例如

```
public static BigInteger parseBigIntegerPositive(String num, int bitlen) {
    if (bitlen < 1)
        throw new RuntimeException("Bad bit length:" + bitlen);
    BigInteger bref = BigInteger.ONE.shiftLeft(bitlen);
    BigInteger b = new BigInteger(num);
    if (b.compareTo(BigInteger.ZERO) < 0)
        b = b.add(bref);
    if (b.compareTo(bref) >= 0 || b.compareTo(BigInteger.ZERO) < 0 )
        throw new RuntimeException("Out of range: " + num);
    return b;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-05-22T15:41:15.463

该问题有两个答案，具体取决于 OP 是否希望答案与以下内容有关：

1.  读取/解析 a`String`并将解释的值存储为正数`BigInteger`。
2.  将负数作为正十六进制数输出`BigInteger`到 a 。`String`

## 爪哇`BigInteger`

首先，重要的是要了解`BigInteger`实际上将数字存储为两个单独的值：

*   指示数字为的标志：
    *   签
    *   零
    *   积极的
*   一个整数数组，其中包含按大端顺序排列的数字的正值。

这意味着***-1***存储为***{signed, 1}***。

其次，同样重要的是要了解，`BigInteger`根据用于存储的特定位数，将 a 显示为具有特定位数的十六进制与数字值无关，而与数字表示有关。

也就是说，对于二进制补码 32 位值（即`int`），以下表示都表示内存中存储的相同值：

*   ***-1***
*   ***4_294_967_295***
*   ***噗噗噗***

虽然不能这样说`BigInteger`：

*   ***-1***（存储为*{negative, 1}*）
*   ***4_294_967_295***（存储为*{positive, 4_294_967_295}*）
*   ***ffffffff***（存储为*{positive, 4_294_967_295}*）

## 读取/解析 a`String`并将解释值存储为正数`BigInteger`

要读取`String`可能包含负数的 a 并将其`BigInteger`作为具有特定位数的正数存储在 a 中，请使用以下代码：

```
BigInteger number = new BigInteger("-1");
int bits = 64;

BigInteger maxValue = BigInteger.valueOf(number).shiftLeft(bits);

number = number.mod(maxValue); 
```

例如，使用 16 位的值 -1`BigInteger`将存储为：

*   *{正，65535}*（十六进制的ffff）

## 将 [负]`BigInteger`转换为正十六进制`String`

要将 a`BigInteger`作为调整为特定位数的十六进制数输出，请使用以下代码：

```
BigInteger number = new BigInteger("-1");
int bits = 64;

BigInteger maxValue = BigInteger.valueOf(number).shiftLeft(bits);
number = number.mod(maxValue);

String outString String.format("%0" + (bits + 3)/4 + "X", number); 
```

## 表现

如果您担心上面的代码使用除法来获得结果，那么下面的代码将对可以在范围内表示的数字执行相同的操作（即可以使用指定的位数存储）：

```
BigInteger number = new BigInteger("-1");
int bits = 64;

if (number.signum() < 0) {
    number = BigInteger.valueOf(1).shiftLeft(bits).add(number);
}

String outStr = String.format("%0" + (bits + 3)/4 + "X", number); 
```

请注意，上面显示的代码不处理超出预期位范围的数字。

例如 1_000_000 和 -1_000_000 作为 16 位数字将被转换为字符串：

*   F4240
*   -E4240

预期值应该在哪里（取模版本实际返回）：

*   4240
*   BDC0

## 完整的解决方案

以下代码将上述所有内容组合成一种方法：

```
public String AsAFixedBitsNumber(BigInteger number, int bits) {
    BigInteger maxValue = BigInteger.valueOf(1).shiftLeft(bits);

    if (maxValue.negate().compareTo(number) >= 0 || maxValue.compareTo(number) <= 0) {
        number = number.mod(maxValue);
    } else if (number.signum() < 0) {
        number = maxValue.add(number);
    }

    return String.format("%0" + (bits + 3)/4 + "X", number);
} 
```

## 缓冲到 [ `BigInteger`] 十六进制表示

作为相关问题的额外奖励答案：“如何转换`byte[]`为十六进制字符串 [使用`BigInteger`]？”

以下代码将 a 转换`byte[]`为 hex `String`：

```
byte[] buffer = new byte[]{1, 2, 3};
String hex = String.format("%0" + buffer.length*2 + "X", new BigInteger(1, buffer)); 
```

请注意，将 signum 参数设置为 1 非常重要，这样才能`BigInteger`理解数组中的值将被解析为“无符号”。

另请注意，此方法会创建两个临时缓冲区来创建字符串`Character[]`，如果您正在处理非常大的数组，最好将数组直接解析为 a 。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-04T19:25:55.263

您始终可以手动进行补码。如果数字小于 0，则将所有位取反并加一。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-04T19:42:23.523

一个 Liner（但是不要忘记考虑源的 endiness 问题，可以使用 ByteBuffer.byteOrder 处理）：

```
new BigInteger(1, ByteBuffer.allocate(Long.SIZE/Byte.SIZE).putLong(Long.parseLong("-1")).array()); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-09-17T23:54:51.880

要击败`new BigInteger(long)`' 将参数解释为以二进制补码编码的方式，您可以首先以避免使用`long`' 符号位的方式转换数字的高 63 位，然后“添加”最后一位：

```
BigInteger unsigned(long value) {
    return BigInteger
        .valueOf(value >>> 1).shiftLeft(1) // the upper 63 bits
        .or(BigInteger.valueOf(value & 1L)); // plus the lowest bit
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-04T19:29:39.113

是你什么吗？

```
public static void main(String[] args) {

    BigInteger bg =  BigInteger.valueOf(-1);        
    System.out.println(Integer.toHexString(bg.intValue()));
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-03-06T21:24:27.747

您可以使用此实用程序转换为无符号整数。由于 BigInteger 的大小不受限制，因此必须指定一个大小来确定要在翻译中保留多少符号扩展：

```
public static BigInteger toPositive(BigInteger num, int sizeInBytes) {
    return num.andNot(BigInteger.valueOf(-1).shiftLeft(sizeInBytes * 8));
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-09-28T19:53:11.337

简单的解决方案来自@Ahmet Karakaya，但应该针对更大的数字进行修复：

```
BigInteger bg =  BigInteger.valueOf(-1);
System.out.println(Long.toHexString(bg.intValue())); 
```

结果：`ffffffffffffffff`

或者简单地说：

```
System.out.println(Long.toHexString(-1)) 
```

# android - 为什么我的 SimpleOnGestureListener 不起作用？

> ID：10886963
> 
> 赞同：0
> 
> 时间：2012-06-04T19:16:56.490
> 
> 标签：android, gesture, swipe, swipe-gesture, onfling

我正在使用自己的 GestureDetector 类来检测 left|right onFling 事件。我在代码中看到的一切看起来都不错，但什么也没发生……？

我需要在我的片段中打开|关闭导航视图的切换按钮之外的附加功能。切换调用我的 AnimationLayout 类中的方法，如下所示：

```
public void toggleSidebar()
{
if (mContent.getAnimation() != null)
{
return;
}

if (mOpened)
{
/* opened, make close animation */
mAnimation = new TranslateAnimation(0, -mSidebarWidth, 0, 0);
mAnimation.setAnimationListener(mCloseListener);
} else
{
/* not opened, make open animation */
mAnimation = new TranslateAnimation(0, mSidebarWidth, 0, 0);
mAnimation.setAnimationListener(mOpenListener);
}
mAnimation.setDuration(DURATION);
mAnimation.setFillAfter(true);
mAnimation.setFillEnabled(true);
mContent.startAnimation(mAnimation);
} 
```

和...

```
public void openSidebar()
    {
    if (!mOpened)
    {
    toggleSidebar();
    }
    }

    public void closeSidebar()
    {
    if (mOpened)
    {
    toggleSidebar();
    }
    } 
```

在我的主要活动中 onFling() 调用切换子：

```
public static AnimationLayout mLayout;

    // these constants are used for onFling
    private static final int SWIPE_MIN_DISTANCE = 120;
    private static final int SWIPE_MAX_OFF_PATH = 250;
    private static final int SWIPE_THRESHOLD_VELOCITY = 200;
    private GestureDetector gestureDetector;

@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        mLayout = (AnimationLayout) findViewById(R.id.animation_layout);
        gestureDetector = new GestureDetector(this.getApplicationContext(), new MyGestureDetector());
        // Set the touch listener for the main view to be our custom gesture
        // listener
        mLayout.setOnTouchListener(new View.OnTouchListener() {
            public boolean onTouch(View v, MotionEvent event) {
                if (gestureDetector.onTouchEvent(event)) {
                    return true;
                }
                return false;
            }
        });
    }
      class MyGestureDetector extends SimpleOnGestureListener {
        @Override
        public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {

            if (Math.abs(e1.getY() - e2.getY()) > SWIPE_MAX_OFF_PATH) {
                return false;
            }
            // right to left swipe
            if (e1.getX() - e2.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
                Toast.makeText(getApplicationContext(), "right_left", Toast.LENGTH_LONG).show();
                Log.i("MyGestureDetector", "R2L!");
                mLayout.closeSidebar();
                // left to right swipe
            } else if (e2.getX() - e1.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
                Toast.makeText(getApplicationContext(), "left_right", Toast.LENGTH_LONG).show();
                Log.i("MyGestureDetector", "L2R!");
                mLayout.openSidebar();
            }

            return false;
        }

        // Return true from onDown for the onFling event to register
        @Override
        public boolean onDown(MotionEvent e) {
            return true;
        }
    } 
```

此按钮工作正常：

```
...
case R.id.navToggleBtn : {
                mLayout.toggleSidebar();
            }
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T19:49:35.213

我认为一个原因是手势 `onFling`在你的代码中不满足的条件下工作我已经实现了一个 OntouchListener 试试这个

```
yourView.setOnTouchListner(onThumbTouch );

    OnTouchListener onThumbTouch = new OnTouchListener()
        {
            float previouspoint = 0 ;
            float startPoint=0;
            @Override
            public boolean onTouch(View v, MotionEvent event) 
            {   
                switch(v.getId())
                {
                case R.id.tvDetailsalaujairiyat: // Give your R.id.sample ...
                {
                    switch(event.getAction())
                    {
                    case MotionEvent.ACTION_DOWN:
                    {          
                        startPoint=event.getX();
                        System.out.println("Action down,..."+event.getX());
                    }
                    break;
                    case MotionEvent.ACTION_MOVE:
                    {       

                    }break;
                    case MotionEvent.ACTION_CANCEL:
                    {                           

                        previouspoint=event.getX();
                        if(previouspoint > startPoint){
                            //Right side swape

                        }else{
                        // Left side swape
                        }

                    }break;

                    }
                    break;
                }
                }
                return true;
            }
        }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T20:06:47.280

正如他在上面建议的那样，我感谢@Devunwired：

> 如果布局包含也可触摸的子级，则它们可能会从其父级（您的布局）窃取事件。

所以我补充说：

```
View swipeView = (View) findViewById(R.id.animation_layout_content);
swipeView .setOnTouchListener(new View.OnTouchListener() {...}); 
```

现在效果很好。

# php - 电子邮件跟踪 - 区分书签和电子邮件点击

> ID：10886966
> 
> 赞同：0
> 
> 时间：2012-06-04T19:17:10.337
> 
> 标签：php, email, tracking, thunderbird

如果我在电子邮件中添加带有查询变量的链接，例如...

```
http://www.mywebpage.com/?email=person@email.com&page_visited=some_id 
```

为了帮助我跟踪电子邮件“点击次数”并监控谁通过我开始的电子邮件活动访问我的网站，有没有办法区分使用鼠标光标的实际点击与点击一次后将页面添加为书签的人，并且只是简单通过浏览器书签再次访问该页面。

所以我需要监控是否有人点击或通过书签再次访问该页面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T19:20:53.960

当用户通过电子邮件链接访问您的网站时，将他们重定向到具有不同 URL 的另一个页面。这样，书签版本将与电子邮件版本不同。

例子：

电子邮件链接：

```
http://www.mywebpage.com/?email=person@email.com&page_visited=some_id 
```

将用户转发到：

```
http://www.mywebpage.com/?page_visited=some_id 
```

这是被添加书签的页面。现在，您可以通过过滤“电子邮件”参数来区分访问类型。

# python - 不挂在对齐点上的 scipy.interpolate.griddata 的替代品

> ID：10886971
> 
> 赞同：2
> 
> 时间：2012-06-04T19:17:43.200
> 
> 标签：python, scipy, interpolation

我有一个点数据集，我试图在网格上插值。这些点以网格方式对齐，缺少一些点，如下所示：![在此处输入图像描述](../Images/6591c58d31c045c6d4958d26c08b3cf8.png)

更复杂的是，其他输入点集可能无法在网格上对齐，因此我尝试使用`scipy.interpolate.griddata`将这些值插入到常规网格中。但是，有时我的底层网格与输入点数据集的采样率完全对齐并`griddata`挂起。根据[这个问题](https://stackoverflow.com/a/5623980/42897) `scipy.interpolate.griddata`，如果样本出现在完全对齐的 3 个点上，这对我来说有时会发生。

是否有将点数据插值到 Python 中的常规网格的高性能替代方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T05:52:19.623

我的解决方案是随机扰动每个输入点的 x 和 y 坐标，随机因子介于`1e-6 * grid_cell_size`. `1e-6`根据经验，我选择比 32 位浮点数中的最小 delta 差大几个数量级，但又足够小，以至于它引入的误差仍然被插值方案引入的误差所掩盖。

我仍然对其他想法持开放态度，但这样我可以`scipy`通过引入一个非常小的数值误差来使用股票插值函数。

# algorithm - 线段相交的简单算法（伪代码）

> ID：10886975
> 
> 赞同：2
> 
> 时间：2012-06-04T19:17:55.540
> 
> 标签：algorithm, pseudocode

我正在尝试解决这个问题，但我被困在如何使这项工作上。我将发布问题，然后解释我在其中的位置。

> 给定一组总大小为 n 的水平线段和垂直线，我们要计算与每条垂直线相交的水平线段的数量。该算法的复杂度应该是 O(n*logn)，并且应该通过排序来实现，然后是线性扫描。水平线段由两个 x 坐标和一个 y 坐标指定，而垂直线由单个 x 坐标指定。输出是一个数字数组 count[l]，每个垂直线 l 一个。

对于排序，我想我会按照最早完成的行（即最小的第二个 x 坐标，或者在垂直线的情况下，只是它的一个 x 坐标）对整个集合进行排序，这样我就有一个线性进展所有的行。我只是对如何进行排序后的线性扫描感到困惑。如果有人有任何提示、提示或指南，我将不胜感激！

PS：这是期中练习，虽然不一定是作业，但我还是会这样标记。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T19:31:15.110

这个问题可以写成其他方式：

Foreach 水平线段 (x1,x2)，找到与其相交的所有垂直线。您可以通过对获得一组位置 x 的垂直线进行排序来做到这一点。

现在，运行二分查找并在 x 的集合中定位 x1，我们称其位置为 p1。对 x2, p2 执行相同的操作。给定段的交叉点数等于 p2-p1。

对所有水平段执行此操作。

对垂直段进行排序将花费 O(klog(k))。每次搜索都在 O(log(k)) 中完成，并且对每个段进行两次：O(mlog(k))。其中 k 是垂直线的数量，m 是水平线段的数量。n = m+k > m,k 因此，整体复杂度为 O(nlogn)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T00:25:03.043

首先，您放置水平线段的所有起点/终点。和垂直线的 x 坐标一起。

其次，对它们进行排序。我们称之为排序列表`L`。

三、成像有一条垂直扫描线，从你点列表的最左边开始，`L`向右移动。

每当扫描线碰到一个点，它要么是水平线段的起点，要么是水平线段的终点，要么是垂直线。

移动扫描线时可以做两件事：

1）保留扫描线当前相交的水平线段集合（只要它是水平线段的起点/终点，将其添加到集合中/从集合中删除）

2）只要它是一条垂直线，您就知道垂直线与您在 1）中维护的集合中的所有水平线段相交

所以，排序是 O(nlogn); 在排序列表中移动扫描线`L`是 O(n)

总而言之，它是 O(nlogn)

# javascript - 在 brunch.io 项目中使用外部小胡子部分

> ID：10886977
> 
> 赞同：1
> 
> 时间：2012-06-04T19:18:08.113
> 
> 标签：javascript, backbone.js, mustache, partials, brunch

我正在开发一个使用 brunch.io 和 mustache 进行模板的项目。我想将小胡子部分添加到主索引（用作“外壳”）以加载我的内容。我在他们自己的 .mustache 文件中创建了小胡子部分，然后在索引页面上添加了标签（即： {{> somePartial}} ）但我似乎缺少的是如何让部分呈现......这就是什么我需要帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T07:21:18.797

我在早午餐应用程序中使用 Mustache 的 Handlebars.js 实现，它非常简单：只需通过`Handlebars.registerPartial()`.

# html - IOS Safari元素我有一个层次下拉菜单，它通过使用空格字符在视觉上区分层次结构示例 <select><option value="1">Top Level Item</option> <option value="2">   Lower Level Item</option> <option value="3">   Another Lower Lev ID：10886992 赞同：1 时间：2012-06-04T19:19:04.913 标签：html, css, ios, mobile-safari 回答 #1 赞同：11 时间：2012-11-30T14:09:32.460 您可以尝试使用零宽度连接器/零宽度非连接器实体开始您的层次结构分隔器：&zwj;或&zwnj; 回答 #2 赞同：0 时间：2012-06-04T19:40:46.073 唯一的选择是使用 HTML/CSS 替换<SELECT>. 请参阅：jQuery 选择框替换 回答 #3 赞同：0 时间：2013-12-13T00:40:56.890 这似乎可以很好地满足我的需求，但它并不完全完美——在桌面上，顶部有一条不可选择的线。 <select> <optgroup> <option value='1'>Top Level Item</option> <option value='2'>&zwj;&nbsp;&zwj;&nbsp;&zwj;&nbsp;Lower Level Item</option> <option value='3'>&zwj;&nbsp;&zwj;&nbsp;&zwj;&nbsp;Another Lower Level Item</option> <option value='4'>Another Top Level Item</option> </optgroup> </select></option></select>

# php - 如何从 mysql_num_rows 返回空行？

> ID：10886996
> 
> 赞同：0
> 
> 时间：2012-06-04T19:19:27.637
> 
> 标签：php, mysql, json

我有以下 mysql 查询，它以 JSON 格式返回数据。检查是否有 0 条记录并返回该事实的最佳方法是什么？

```
$row_num = mysql_num_rows($rslt);
$data = array();
while ( $row = mysql_fetch_row($result) )
{
    $data[] = $row;     
}   
echo json_encode( $data ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T19:21:27.387

```
$row_num = mysql_num_rows($rslt);
$data = array();
while ( $row = mysql_fetch_row($result) )
{
    $data[] = $row;     
}   
if(!$data){
   echo "This is the government. We have removed your database!";
} else {
    echo json_encode( $data );
} 
```

# ruby-on-rails - 如何修改rails 3项目中的gem文件

> ID：10886999
> 
> 赞同：1
> 
> 时间：2012-06-04T19:19:45.227
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在使用带有 bundler 的 rails 3，我使用 bundler 安装了一个 gem，现在我需要通过修改 gem 的控制器来稍微修改 gem 的流程，我应该怎么做，我确定有一个命令在本地安装文件以便我可以修改它，我试图通过创建另一个具有相同名称但听起来不起作用的控制器来覆盖控制器。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-04T19:39:32.107

在 github 上 fork 它，进行更改并将您的 gemfile 指向分叉的 repo，如下所示：

```
gem "contact-us", :git => "git://github.com/eqbal/contact-us.git" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T19:32:22.263

您应该能够制作一个控制器，从 gem 控制器继承并覆盖您认为合适的方法行为

```
class MyController < ContactUs::ContactsController
  def create
    # my code that changes the behavior
  end
end 
```

然后你可能不得不告诉你的路线去你的控制器

```
resources :contacts,
  :controller => 'my_controller' 
```