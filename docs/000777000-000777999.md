# StackOverflow 问答 000777000-000777999

# vb.net - 如何在泛型类中拥有动态 URL

> ID：777000
> 
> 赞同：0
> 
> 时间：2009-04-22T12:35:23.347
> 
> 标签：vb.net, nunit, watin

我需要有一个最好来自测试类的动态 URL。任何人都可以帮助我格式化此设计模式以处理来自测试的动态链接。而不是一个常量 HomePageURL。

```
Namespace TestDesign
Public Class HomePage
    Inherits IE
    Public Const HomePageURL As String = "testlink"

    Public Sub New()
        MyBase.New(HomePageURL)
    End Sub

    Public Sub New(ByVal instance As IE)
        MyBase.New(instance.InternetExplorer)
    End Sub

    Public ReadOnly Property UserIDField() As TextField
        Get
            Return TextField(Find.ById(New Regex("txtuserName")))
        End Get
    End Property
    Public ReadOnly Property PasswordField() As TextField
        Get
            Return TextField(Find.ById(New Regex("txtPassword")))
        End Get
    End Property
    Public ReadOnly Property ContinueButton() As Button
        Get
            Return Button(Find.ById(New Regex("Submit")))
        End Get
    End Property
    Public ReadOnly Property LogoutLink() As Link
        Get
            Return Link(Find.ById(New Regex("lnkLogout")))
        End Get
    End Property

    Friend Sub Login(ByVal username As String, ByVal password As String)
        UserIDField.TypeText(username)
        PasswordField.TypeText(password)
        ContinueButton.Click()
    End Sub

    Friend Sub Logout()
        LogoutLink.Click()
    End Sub

End Class 
```

结束命名空间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-05T23:25:56.890

我将如何解决这个问题是将基本 url 放入应用程序配置中，然后构建一个 URLs 类来构造它们，这里是一个示例：

在应用程序配置中

`<appSettings> <add key="TestServerUri" value="http://www.apple.com"/> </appSettings>`

在类文件中

```
 public static Uri AppleHome

    {
        get
        {
            return new Uri(ConfigurationManager.AppSettings["TestServerUri"]);
        }
    }

    public static Uri Iphone = new Uri(AppleHome, @"/iphone/"); 
```

# activemq - 只有最新消息出现在活动 mq 中？

> ID：777001
> 
> 赞同：1
> 
> 时间：2009-04-22T12:35:52.380
> 
> 标签：activemq, mule

我通过[Mule向](https://www.mulesoft.com/de/resources/esb/what-mule-esb)[Active MQ](http://activemq.apache.org/)队列发送消息。

我想要这样，只有最新的消息保留在队列中，而不是任何以前的消息。

*如何做到这一点？*

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-22T12:42:40.320

set the queue size to be 1, the default eviction policy, which is oldestMessageEvictionStrategy, should kick out the previous message and put in the newest one. You can also set other policies for priorities, such as OldestMessageWithLowestPriorityEvictionStrategy or mess around with the TTL settings on your messages.

You may also get some warnings about full queue though, so be prepared to handle that.

# pysvn - 编译 pysvn (win64)

> ID：777004
> 
> 赞同：3
> 
> 时间：2009-04-22T12:36:33.407
> 
> 标签：pysvn

我已经尝试找到 pysvn 的 64 位版本有一段时间了。作者说他无法为我编译它，因为他没有 64 位系统可供测试。

所以我从[http://pysvn.barrys-emacs.org/source_kits/pysvn-1.7.0.tar.gz](http://pysvn.barrys-emacs.org/source_kits/pysvn-1.7.0.tar.gz)和 Collabnet 的 collabnet-subversion-1.6.1_src.zip 源文件下载了源代码。我反向移植了 python 脚本，以便它们支持 python 2.5，打开 Visual Studio，我只是不知道从哪里开始......我不知道太多的 3rd 方库和环境设置。

有没有人从头开始在 Windows 中编译 pysvn 并可以帮助我解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-08-28T06:48:57.640

最后，我最终围绕 svn ( [sliksvn](http://www.sliksvn.com/en/home/) ) 的命令行版本制作了一个包装器。

*好的：*

*   如果您需要发送带有换行符或特殊字符的文本，svn.exe 可以返回 xml 并接受文件作为输入。
*   一切都适用于每个 32 位和 64 位版本的 python。

*坏处：*

*   错误处理不是那么有趣，因为 svn.exe 除了返回 1 之外没有其他错误代码。
*   比pysvn慢一点
*   我还没有找到让用户交互输入用户名和密码的方法，所以我使用 TortoiseSvn。

# .net - 可以使用哪些工具来帮助清理和支持草率的 .NET 代码库

> ID：777008
> 
> 赞同：2
> 
> 时间：2009-04-22T12:37:30.973
> 
> 标签：.net, coding-style

我不希望这是主观的，但如果答案可以通过建议或方向稍微调味，我将不胜感激:)

在过去的几年里，我的工作一直是开发并现在维护/扩展一个相当大的应用程序。该应用程序是我们部门运行的首批 .NET 项目之一，对于几乎整个开发团队来说，这是一个巨大的学习曲线。由于这对几乎每个人来说都是一种新体验，我们已经制定了一些丑陋的代码——实际上“一些”更像是“可能有几十万行”。

我们的团队现在在很大程度上已经成熟，我们意识到我们的错误使应用程序变得麻木，并且保持其当前状态几乎与它所取代的神秘 VB6 应用程序一样困难。值得庆幸的是，决策者意识到我们需要纠正我们的错误，但是我们落后于 8 球，我们的许多开发人员要么从事预定的功能增强（我们的业务线中必不可少的邪恶），要么从事副项目。

我们正在使用 .NET 2.0、VS2005（希望迁移到 2008）、TFS 2005（很快迁移到 2008）

*   有哪些工具可以帮助我们执行编码标准（我正在审查 Juval Lowy 的 C# 标准并将它们转录为 VB.NET）

*   有哪些工具可以帮助我们识别设计不佳的组件？

*   有哪些工具可以帮助我们映射当前混乱的命名空间？

当我想到它们时，我可能会用更多的问题来扩展它，或者当反应引发突触时。

**新** - 是否有任何工具可以直接针对 TFS 来帮助分析我们的代码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-22T12:41:30.540

首先要做的是确保您有足够的单元测试覆盖率。如果你有这个，你可以重构和重新编码，同时仍然确保你的应用程序仍然有效。

代码标准——你看过[FxCop](http://msdn.microsoft.com/en-us/library/bb429476.aspx)或类似的东西吗？

还有[StyleCop](http://code.msdn.microsoft.com/sourceanalysis) - 只有 C#

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-22T12:42:22.817

获取[ReSharper](http://www.jetbrains.com/resharper/)！它有代码清理工具，可以提供极大的帮助——包括违反编码标准的通知。

我也同意 ChrisF 的建议，即您实施单元测试以确保更改不会破坏该应用程序。Resharper 可以帮助解决这个问题，它有一个内置工具，可以直接在 Visual Studio 中运行单个或多个单元测试。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-22T12:44:53.107

*   要检查编码标准，您可以使用[FxCop](http://msdn.microsoft.com/en-us/library/bb429476.aspx)
*   要了解您的设计，请查看[ndepend](http://www.ndepend.com/)
*   一般来说，像[resharper](http://www.jetbrains.com/resharper/)这样强大的重构工具会帮助你

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-22T13:01:14.410

Resharper 放下手。

并使背景颜色设置为亮粉色。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-22T13:40:32.317

由于您提到您正在使用 VS Team System，并且很快将迁移到 VS 2008，因此请务必查看内置代码分析 (FxCop) 和代码指标。您也可以将 NDepend 用于您的代码指标。要记住的一件事是，内置代码分析使用的规则与 FxCop 的独立版本[略有不同。](http://geekswithblogs.net/sdorman/archive/2008/01/18/fxcop-rules.aspx)FxCop（或内置代码分析）也会产生很多“噪音”，并且一些规则对于面向公众 (API) 的代码比对非面向公众的代码更重要。

StyleCop 对源代码样式问题很有用，尽管它会产生很多“噪音”，并且某些规则不如其他规则重要。（例如代码“布局”规则说私有方法应该在公共方法之后，等等。就代码格式而言，要记住的最重要的事情是它应该是一致的。）

为了映射当前的命名空间，您可以使用内置的类图，尽管我认为 NDepend 可能会更好地为您提供更全面的图片。

据我所知，没有工具可以直接针对 TFS 存储库工作。您需要在本地签出代码，运行工具，然后重新签入。

您还提到您正在查看 IDesign 代码样式文档。您还应该查看[框架设计指南](https://rads.stackoverflow.com/amzn/click/com/0321545613)，这是 IDesign 的基础。IDesign 指南很好，但我并不同意所有这些。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-22T13:42:18.447

正如许多人所说，Resharper 有助于大幅减少一些冗余和一般的不良做法。我刚刚下载了另一个工具[CloneDetective](http://clonedetectivevs.codeplex.com/)，它可以帮助识别重复代码。两者加在一起看起来就像一个强者。但我还没有审查克隆侦探。

# css - 文本未显示为超链接 - CSS 问题？

> ID：777011
> 
> 赞同：1
> 
> 时间：2009-04-22T12:38:01.877
> 
> 标签：css, xhtml

我无法确定为什么无法滚动此文本并且无法单击超链接（全部在页面正文中）。我不确定这是 CSS 问题还是其他类型的问题。

XHTML 是有效的，但 CSS 并不完全有效。想知道我是否可以在不完全修复每个 CSS 元素的情况下进行修复。

[http://www.writershore.com/ltlaw](http://www.writershore.com/ltlaw)

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-22T13:09:17.603

您的样式的 z-index`div.main`设置为 -1。因此，它位于其他一些 div*下。*只需将其设置为更高的值，一切都应该很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-22T13:05:52.667

首先，您的网站似乎没有 100% 验证[XHTML](http://validator.w3.org/check?uri=http%3A%2F%2Fwww.writershore.com%2Fltlaw%2F&charset=(detect+automatically)&doctype=Inline&group=0.)。

此外，您的网站在 IE 上无法正常运行，因此您的 XHTML 和/或 CSS 和/或 JavaScript 肯定有问题。

现在您可以做的是尝试删除对所有 CSS 文件的引用，看看它是否有效。如果它仍然不起作用，请删除您的 JavaScript 引用并查看它是否有效。

事实上，在这一步，你想知道错误来自哪里，因为如果我把你的“a href”标签放在一个空文件中，它就可以工作，所以你的 XHTML 看起来是正确的。

我解决此类问题的方法是将问题简化为简单的表达。我的意思是，删除所有可能对我的问题产生影响的外部因素。

我希望这将有所帮助。

让我知道你的结果。

# wcf - 从 DataContract.Namespace 解析 CLR 类型？

> ID：777012
> 
> 赞同：0
> 
> 时间：2009-04-22T12:38:03.390
> 
> 标签：wcf, clr, namespaces, datacontract

我是 WCF 的新手白带。

我有一个命名空间：http: [//schemas.datacontract.org/2004/07/System/ArgumentException](http://schemas.datacontract.org/2004/07/System/ArgumentException)。

我正在寻找该字符串并将其转换为 CLR 类型，以便最终得到 typeof(ArgumentException)。

这可能吗？:)

谢谢你，迈克尔D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-22T14:27:28.400

查看 Activator.CreateInstance()。这是它的用法示例：

```
dim obj as Object = Activator.CreateInstance("ArgumentException") 
```

在您的情况下，您可以从命名空间中解析类型名称并将其作为参数传递给 CreateInstance()。

[http://msdn.microsoft.com/en-us/library/system.activator.createinstance.aspx](http://msdn.microsoft.com/en-us/library/system.activator.createinstance.aspx)

# html - 为什么 xhtml 不验证

> ID：777013
> 
> 赞同：0
> 
> 时间：2009-04-22T12:39:03.073
> 
> 标签：html, xhtml

我不明白为什么此表单无法验证。它声称我没有关闭`input`标签，并且我有一个`input`未打开的结束标签。

有问题的页面是[http://squareownz.org/dunkyp/index.py](http://squareownz.org/dunkyp/index.py)

[http://validator.w3.org/check?uri=http%3A%2F%2Fsquareownz.org%2Fdunkyp%2Findex.py](http://validator.w3.org/check?uri=http%3A%2F%2Fsquareownz.org%2Fdunkyp%2Findex.py)

但是，此页面不同意该代码有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-22T12:41:56.127

你应该使用`<input />`而不是`<input></input>`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-22T12:42:07.920

您不能关闭输入标签，您需要自行关闭它们：

```
<input type="text" name="title" value=""></input> 
```

->

```
<input type="text" name="title" value="" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-22T12:42:11.413

尝试将您的输入标签改造成

```
<input />
instead of
<input></input> 
```

我想就是这样

编辑：该死的人在这里反应很快我看到我的解决方案已经被建议了。

# java - 在 NetBeans 中使用 CheckStyle 并配置 CheckStyle 规则

> ID：777015
> 
> 赞同：4
> 
> 时间：2009-04-22T12:39:56.847
> 
> 标签：java, netbeans, checkstyle

我正在使用 NetBeans 6.5。对于 CheckStyle，我已经下载并安装了`nbcheckstyle.nbm`插件。我可以在这个插件中使用 CheckStyle。

我想配置要检查的规则。我不能这样做，因为它是一个`.nbm`文件。关于如何配置规则的任何建议？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-22T18:51:08.500

在“选项”对话框中指定“配置文件”。

这可以在[屏幕截图](http://www.sickboy.cz/checkstyle/screenshots.html)中看到。（设置为 netbeans_checks.xml）。

# linux - 如何在 bash 中启用命令行开关的制表符补全？

> ID：777017
> 
> 赞同：13
> 
> 时间：2009-04-22T12:40:10.980
> 
> 标签：linux, bash, command-line

使用`bash`，我可以使用 TAB 完成命令。通常，它还应该完成命令行开关：例如，当我输入：

```
java - 
```

它应该向我展示可能性。它不是。如何启用此预览？

又见[惊喜！shell 建议使用命令行开关](https://stackoverflow.com/questions/776071)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-22T12:43:21.287

看看[Extended Bash Completion](http://www.hypexr.org/bash_tutorial.php#completion)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-22T12:44:24.200

您需要`bash_completion`安装，然后添加`. /etc/bash_completion`到您的`.bashrc`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-22T12:43:39.117

相关：[惊喜！shell 建议使用命令行开关](https://stackoverflow.com/questions/776071/surprise-the-shell-suggests-command-line-switches)

在该问题的答案中，有几个文档链接。你可能会在那里找到你要找的东西。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-22T12:49:15.110

根据您使用的 Linux 风格，您可能需要添加一个包。对于 Fedora 和相关发行版，您需要添加单独的包`bash-completion`才能使其工作。如果其他发行版将此打包为可选的第二个包，您需要在包之外添加它，我不会感到惊讶`bash`。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-01-31T09:33:43.633

如果您想创建自己的自定义完成，可以查看这篇文章： [https ://stackoverflow.com/a/21476506/2649637](https://stackoverflow.com/a/21476506/2649637)

# asp.net - 有没有办法在 ASP.NET 页面中画线 (x,y)-(x2,y2)？

> ID：777018
> 
> 赞同：1
> 
> 时间：2009-04-22T12:40:14.600
> 
> 标签：asp.net, drawing, gantt-chart

当然不是动画，但很适合在视觉上显示数据，例如甘特图等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-22T12:45:51.420

为什么不使用 javascript 图形库来绘制图形和图表？

查看这些[flot 示例](http://people.iola.dk/olau/flot/examples/graph-types.html)- 也许[flot](http://code.google.com/p/flot/)是您需要的

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-22T12:46:01.777

我不确定我是否理解您的问题，但如果您想动态绘制图像，您可以使用 GDI+ 和[System.Drawing](http://msdn.microsoft.com/en-us/library/system.drawing.aspx)命名空间。看[这里](http://www.geekpedia.com/tutorial123_Working-with-GDIplus-in-ASP.NET.html)的例子。

编辑：对不起，我没有看到甘特标签。看看下面的[控件](http://www.codeproject.com/KB/webforms/EventCalendarControl.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-22T12:44:58.303

您可以使用 Graphics 类创建图像，然后将文件输出到文件系统，并将某种图像控件链接到该图像。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-22T13:19:11.807

ASP.NET 3.5 中有一个新的 Chart 控件，它具有许多功能和选项，也许您会喜欢它。[您可以在此处](http://weblogs.asp.net/dwahlin/archive/2008/11/25/getting-started-with-the-asp-net-3-5-chart-control.aspx)阅读快速评论。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-22T13:33:54.097

[Walter Zorn javascript 库](http://www.walterzorn.com/jsgraphics/jsgraphics_e.htm)可能是您的答案。

# svn - Subversion：从包含用户名的每个签入中生成完整的差异

> ID：777039
> 
> 赞同：0
> 
> 时间：2009-04-22T12:43:39.287
> 
> 标签：svn, diff

我有一位教授不太了解源代码控制。他要求我们使用注释来确定每一行代码的编写者。大部分课程使用电子邮件作为版本控制，使用 Visual C++ 作为语言，这会导致混乱的注释、插入符号和生成的代码。我的小组正在使用 subversion 和 C#，我更愿意从存储库中获取历史记录，而不是在每一行都用注释将代码弄得乱七八糟。

我需要一种方法来生成所有签入的可查看历史记录，以显示每个用户修改了多少源。

像这样的格式会很好

```
Andy
/trunk/doc/file.txt (57%)
/trunk/project/app.h (100%)

Brian
/trunk/doc/file.txt (43%)
/trunk/project/app.cpp (60%)

Jeff
/trunk/project/app.cpp (40%) 
```

我该怎么办？BASH 是否有足够的能力来做到这一点，还是我应该使用 python？（我会在 linux 系统上生成差异）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-22T12:50:18.507

在我看来，您想要类似[`svn blame`](http://svnbook.red-bean.com/en/1.0/re02.html).

如果你想要百分比，你可能需要一些后期处理。而且您还必须担心修改数到最后一个触及线的人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-22T12:52:11.530

要回答您问题的第二部分，如果您了解 Python（或类似的），您会找到可以为您处理 SVN 集成的库。这将比通过 bash 与 SVN 交谈并尝试询问 SVN 可执行文件的输出更简单。

例如参见[Pysvn](http://pysvn.tigris.org/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-22T13:53:12.273

它还没有准备好使用解决方案，但我把它留给你:)

对于每个文件，即类似于：

```
for i in `ls -1`; do svn blame...; done 
```

跑：

```
svn blame full_svn_path_to_file |tr -s '\040' |tr '\040' ';'|cut -d \; -f 3|sort -u 
```

这为您提供了更改文件 full_svn_path_to_file 的唯一用户列表。

使用此列表和`wc`命令`for`，您可以尝试计算百分比...

祝你好运！

# c# - System.Security.SecurityException: That assembly does not allow partially trusted callers

> ID：777041
> 
> 赞同：4
> 
> 时间：2009-04-22T12:44:36.557
> 
> 标签：c#

i am creating pdf by using itextsharp.dll, local it is working fine. but server am facing below error .i have added assemblyinfo.cs ..but same error is coming.Specifically, I modified the AssemblyInfo.cs file by adding these references and attribute:

using System.Security; using System.Security.Permissions; [assembly: AllowPartiallyTrustedCallers]

in my form the pdf throws an error at myDocument.. It never go to read it n throws the below error...

```
 Document myDocument = new Document(PageSize.A4, 70, 70, 70, 70); 
```

still am getting the error in server .. can anyone help me out

Server Error in '/' Application. Security Exception Description: The application attempted to perform an operation not allowed by the security policy. To grant this application the required permission please contact your system administrator or change the application's trust level in the configuration file.

Exception Details: System.Security.SecurityException: That assembly does not allow partially trusted callers.

Source Error:

Line 216: HttpContext.Current.Response.End(); Line 217:
Line 218: } Line 219: protected void droplist_SelectedIndexChanged(object sender, EventArgs e) Line 220: {

Source File: d:\hosting\bookgroupadmin\agent\checkbeforprintconf.aspx.cs Line: 218

Stack Trace:

[SecurityException: That assembly does not allow partially trusted callers.] finalgroup_checkbeforprintconf.btn_Click(Object sender, EventArgs e) in d:\hosting\bookgroupadmin\agent\checkbeforprintconf.aspx.cs:218 System.Web.UI.WebControls.Button.OnClick(EventArgs e) +105 System.Web.UI.WebControls.Button.RaisePostBackEvent(String eventArgument) +107 System.Web.UI.WebControls.Button.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(String eventArgument) +7 System.Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument) +11 System.Web.UI.Page.RaisePostBackEvent(NameValueCollection postData) +33 System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +7350 System.Web.UI.Page.ProcessRequest(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +213 System.Web.UI.Page.ProcessRequest() +86 System.Web.UI.Page.ProcessRequestWithNoAssert(HttpContext context) +18 System.Web.UI.Page.ProcessRequest(HttpContext context) +49 ASP.checkbeforprintconf_aspx.ProcessRequest(HttpContext context) in App_Web_ovcuievo.18.cs:0 System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +358 System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +64

Version Information: Microsoft .NET Framework Version:2.0.50727.1433; ASP.NET Version:2.0.50727.1433

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-11-04T19:11:31.653

不过，最好的一点是它可以在中等信任模式下运行——一旦进行了微小的更改以允许部分信任的调用者。要进行此更改，请下载 iTextSharp 源代码分发 ( [http://sourceforge.net/projects/itextsharp/files/](http://sourceforge.net/projects/itextsharp/files/) ) 修改 AssemblyInfo.cs 文件以添加部分受信任的调用者属性。

```
[assembly: AllowPartiallyTrustedCallers()] 
```

重建 iTextSharp 程序集，进入中等信任环境应该很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-22T13:13:10.543

您使用的库很可能不支持中等信任环境（大多数共享托管公司）。引发错误的可能不是您的代码，而是第三方 - 确保他们确实支持这一点。

如果堆栈跟踪以您编写的部分代码结束，那么请提供此代码，目前尚不清楚究竟是什么没有权限运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-01-15T18:29:15.197

我遇到了同样的问题，它通过创建另一个文件夹解决了，将所有内容移动到该文件夹​​并将应用程序路径更改为新文件夹。我不能说它是如何解决的。但它对我有用。我相信这是由于 IIS 中的一些缓存问题造成的。

希望这对你们有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-10T10:40:12.227

我也遇到了这种类型的问题，并按照以下链接的说明解决。它非常有帮助，它节省了我 3 天的辛勤工作。你可以试试这个

[https://www.aspsnippets.com/Articles/ASPNet-iTextSharp-SystemSecuritySecurityException-That-assembly-does-not-allow-partially-trusted-callers.aspx](https://www.aspsnippets.com/Articles/ASPNet-iTextSharp-SystemSecuritySecurityException-That-assembly-does-not-allow-partially-trusted-callers.aspx)

我没有提到的最后 2 步 1\. 从您的项目中删除 iTextsharp 的旧参考。2\. 在您的项目中添加新的 iTextsharp dll 引用。这是你做的。然后发布您的项目。不要使用旧的发布代码直接将新的 itextsharp.dll 粘贴到您的服务器中。

# c# - 合并的 ObservableCollection

> ID：777048
> 
> 赞同：13
> 
> 时间：2009-04-22T12:46:45.910
> 
> 标签：c#, wpf, collections, merge, observablecollection

我有两个 ObservableCollections，我需要将它们一起显示在一个 ListView 控件中。为此，我创建了 MergedCollection，它将这两个集合呈现为一个 ObservableCollection。这样，我可以将 ListView.ItemsSource 设置为我的合并集合，并列出两个集合。添加工作正常，但是当我尝试删除项目时，会显示未处理的异常：

```
An unhandled exception of type 'System.InvalidOperationException' occurred in PresentationFramework.dll
Additional information: Added item does not appear at given index '2'. 
```

MergedCollection 的代码如下：

```
public class MergedCollection : IEnumerable, INotifyCollectionChanged
{
    ObservableCollection<NetworkNode> nodes;
    ObservableCollection<NodeConnection> connections;

    public MergedCollection(ObservableCollection<NetworkNode> nodes, ObservableCollection<NodeConnection> connections)
    {
        this.nodes = nodes;
        this.connections = connections;

        this.nodes.CollectionChanged += new NotifyCollectionChangedEventHandler(NetworkNodes_CollectionChanged);
        this.connections.CollectionChanged += new NotifyCollectionChangedEventHandler(Connections_CollectionChanged);
    }

    void NetworkNodes_CollectionChanged(object sender, NotifyCollectionChangedEventArgs e)
    {
        CollectionChanged(this, e);
    }

    void Connections_CollectionChanged(object sender, NotifyCollectionChangedEventArgs e)
    {
        CollectionChanged(this, e);
    }

    #region IEnumerable Members

    public IEnumerator GetEnumerator()
    {
        for (int i = 0; i < connections.Count; i++)
        {
            yield return connections[i];
        }

        for (int i = 0; i < nodes.Count; i++)
        {
            yield return nodes[i];
        }
    }

    #endregion

    #region INotifyCollectionChanged Members

    public event NotifyCollectionChangedEventHandler CollectionChanged;

    #endregion
} 
```

问候

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2009-04-22T12:54:10.417

有什么理由不能使用[CompositeCollection](http://msdn.microsoft.com/en-us/library/system.windows.data.compositecollection.aspx)吗？

引发异常的原因是您没有将内部集合的索引转换为外部集合。您只是将完全相同的事件参数传递给外部事件 (on `MergedCollection`)，这就是 WPF 找不到索引告诉它找到它们的项目的原因。

你使用`CompositeCollection`这样的：

```
<ListBox>
  <ListBox.Resources>
    <CollectionViewSource x:Key="DogCollection" Source="{Binding Dogs}"/>
    <CollectionViewSource x:Key="CatCollection" Source="{Binding Cats}"/>
  </ListBox.Resources>
  <ListBox.ItemsSource>
    <CompositeCollection>
      <CollectionContainer Collection="{Binding Source={StaticResource DogCollection}}"/>
      <CollectionContainer Collection="{Binding Source={StaticResource CatCollection}}"/>
    </CompositeCollection>
   </ListBox.ItemsSource>
   <!-- ... -->
</ListBox> 
```

有关详细信息，请参阅[此答案](https://stackoverflow.com/a/19271605/2640276)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-22T13:14:13.770

您必须偏移通知事件的索引。

假设您从索引 2 处的第一个集合中删除了一个项目。集合更改事件在索引 2 处触发。

如果您从索引 2 处的第二个集合中删除一个项目，则使用相同的索引 (2) 触发该事件，但该项目实际上是在第一个集合中的所有项目之后枚举的。

# wpf - WPF 视觉展示 VS Adob e Director

> ID：777054
> 
> 赞同：0
> 
> 时间：2009-04-22T12:48:45.063
> 
> 标签：wpf, adobe

我们有一个小争论...

这里有一个老开发团队使用 Adob​​e Director 技术制作了一个信息亭应用程序。

几个月前，决定将应用程序迁移到新的 WPF 技术。一个新的开发团队诞生了，在这些日子里，我们能够看到新的 WPF 应用程序的流程。

我们从“老”团队得到的第一印象是，因为它是关于矢量图形的—— *“它永远不会和我们优秀的旧 Adob​​e Director 应用程序一样”*（这是基于位图的）

那么，这是真的吗？渐变不能是相同的渐变吗？Hexa 定义的颜色看起来是否不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-22T12:58:03.387

听起来老的开发团队有偏见。我会说矢量图像几乎总是更好，因为它们可以更好地缩放。您可以缩放矢量图像并使其保持干净和清晰。

光栅图像的主要优点是它们占用的磁盘空间更少（当然取决于分辨率）。

# ide - 多个IDE项目文件

> ID：777055
> 
> 赞同：0
> 
> 时间：2009-04-22T12:48:45.093
> 
> 标签：ide, cross-compiling, project-files

我们目前在一个同时使用 Visual Studio 和 Code::Blocks 的团队中工作，有没有办法在这些项目文件之间复制更改？那么如果一个人向项目文件中添加一个文件，它也会在另一个 IDE 的项目文件中得到调整？

请注意：我们希望我们的项目能够在多个 IDE、平台和编译器上运行。因此，也欢迎通用解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-22T13:05:37.877

我假设您使用的是VCS？如果是这样，我的直觉是编写一个脚本来同步您的项目文件（基于修改日期？）并在提交中更改任何项目文件时将其作为签入挂钩运行。

[http://wordaligned.org/articles/a-subversion-pre-commit-hook](http://wordaligned.org/articles/a-subversion-pre-commit-hook)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T02:01:04.407

嗯，这听起来正是创建[CMake](http://www.cmake.org/)来解决的问题类型。肯定有一个学习曲线，我主要将其归咎于晦涩的文档，但 CMake 现在已用于许多开源项目，例如 KDE、OGRE 和许多其他项目，因此有很多使用示例。[这里](http://www.cmake.org/cmake/help/cmake_tutorial.html)还有一个基本教程。

CMake 使用它自己的语法（虽然在我看来仍然比 autotools 更容易但相当复杂），它与项目文件生成器一起使用，它支持 make、visual studio、codeblocks、eclipse 和可能的其他工具。它还有一个安装程序生成器，可以制作 NSIS 安装程序、Mac OS X 包和 debian/red hat 包（还有可能是其他包），我觉得它们非常有用。

# c# - 从序列号池中为客户端分配序列号

> ID：777058
> 
> 赞同：0
> 
> 时间：2009-04-22T12:49:32.893
> 
> 标签：c#, asp.net, design-patterns, locking, license-key

我有一个许可证密钥/序列号的 sql server 表。表结构类似于；

```
[
RecordId int,
LicenceKey string,
Status int (available, locked, used, expired etc.)
AssignedTo int (customerId)
....
] 
```

通过我的 ASP.NET 应用程序，当用户决定单击接受按钮购买许可证时，我需要为用户保留许可证密钥。我的方法是，从 KeysTable 中选择前 1 个许可证密钥，其中状态 = 可用更新密钥表设置状态 = 锁定，然后将密钥返回给应用程序。

我担心的是，如果两个 asp.net 线程访问相同的记录并返回相同的许可证密钥。您认为完成此类作业的最佳做法是什么？这类问题是否有众所周知的方法或模式？如果我需要，在哪里使用 lock() 语句？

我正在使用 Sql Server 2005、用于数据访问的存储过程、DataLayer、BusinessLayer 和 Asp.Net GUI。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-22T13:21:48.963

在这种情况下，可能不需要使用显式锁或事务。

[`OUTPUT`](http://msdn.microsoft.com/en-us/library/ms177564.aspx)在您的存储过程中，您可以使用语句中的子句在单个原子操作中更新表并检索许可证密钥[`UPDATE`](http://msdn.microsoft.com/en-us/library/ms177523.aspx)。

像这样的东西：

```
UPDATE TOP (1) KeysTable
SET Status = 'locked'
OUTPUT INSERTED.LicenseKey
-- if you want more than one column...
-- OUTPUT INSERTED.RecordID, INSERTED.LicenseKey
-- if you want all columns...
-- OUTPUT INSERTED.*
WHERE Status = 'available' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-22T12:55:06.123

为了实现您所说的，您需要使用可序列化的事务。为此，请遵循以下模式：

```
SET TRANSACTION ISOLATION LEVEL SERIALIZABLE
GO
BEGIN TRANSACTION

--Execute select
--Execute update

COMMIT TRANSACTION 
```

但是，为什么你有一个包含所有可能的许可证密钥的表？为什么没有密钥生成算法，然后在用户购买时创建一个新密钥？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-22T12:54:45.643

我认为您实际上应该在您查询它的同一个存储过程中将密钥标记为不可用，因为否则总会有某种竞争条件。恕我直言，手动锁定表不是一个好习惯。

如果您有一个两阶段的过程（例如预订机票），您可以引入在指定时间段（例如 30 分钟）内保留密钥的概念，这样当您查询新密钥时，您可以在同时。

编辑：如果您可以保证只有一个进程会更改数据库，那么锁定业务逻辑可能会起作用，但最好在数据库级别进行，最好在单个存储过程中进行。要正确执行此操作，您必须设置事务级别并使用数据库中的事务，正如@Adam Robinson 在他的回答中所建议的那样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-22T13:03:39.287

除了事务之外，您还可以尝试使用锁（在 SQL 中）来验证一次只有一个线程可以访问。

我相信应用程序锁在这里可能会有所帮助。

# jquery - jQuery $("#field") is null?

> ID：777062
> 
> 赞同：17
> 
> 时间：2009-04-22T12:50:14.763
> 
> 标签：jquery, css-selectors

I have a selectbox with month periods in it.

Here is my code:

```
$(function(){ 
                        $("#ppsub_ppterm_id").change(function(){ 
                                        var term = this.options[this.selectedIndex].text; 
                                        if(term == "Eenmalig"){ 
                                                $(".idealtd").show(); 
                                        }else{ 
                                                $(".idealtd").hide(); 
                                                //$("#ppsub_amount option:selected").val('anders'); 
                                        } 
                        }); 
        }); 
<select name="ppsub_ppterm_id" class="ppsub_ppterm_id" 
id="ppsub_ppterm_id" style="width: 100px; font-size: 11px;"> 
                                                <option value="M">Maand</option> 
                                                <option value="K">Kwartaal</option> 
                                                <option value="H">Halfjaar</option> 
                                                <option value="J">Jaar</option> 
                                                <option selected value="E">Eenmalig</option> 
                                        </select> 
```

But when i load my page i staight away get an error:

$("#ppsub_ppterm_id") is null

Line 17

Any ideas?

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2009-04-22T12:55:11.913

Sounds like JQuery isn't loading properly. Which source/version are you using?

Alternatively, it could be namespace collision, so try using `jQuery` explicitly instead of `$`. If that works, you may like to use [noConflict](http://docs.jquery.com/Core/jQuery.noConflict) to ensure the other code that's using `$` doesn't break.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-10-12T23:08:34.490

例如 jQuery 的 chane '$'：

$("#myId") -> jQuery("#myId")

有用

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-22T12:54:17.547

Even if jQuery couldn't find the element, it wouldn't be null - it would be an empty jQuery object.

Are you sure jQuery is loaded? Is it possible that another JavaScript library you're using is causing conflicts?

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-22T13:16:59.427

您将“ppsub_ppterm_id”作为类、名称、id 等...

您需要选择一个并选择它。ID、NAME、CLASS 不需要都具有相同的值。

你可能把 jQuery 搞糊涂了。

```
<a id="ppsub_ppterm_id"> = $("#ppsub_ppterm_id")

<a class="ppsub_ppterm_id"> = $(".ppsub_ppterm_id")

<a name="ppsub_ppterm_id">  = $("*[name=ppsub_ppterm_id]") 
```

选择一种方法并坚持下去，但要去掉所有那些多余的属性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-22T12:53:18.920

Make sure you're running your jQuery code after the document is loaded:

```
$(document).ready(function() { /* put your stuff here */ }); 
```

Also make sure you have no other controls with the id "ppsub_ppterm_id" on your HTML page.

Those are the first things I would check.

# iphone - What is the most efficient way of moving an UIImageView?

> ID：777069
> 
> 赞同：0
> 
> 时间：2009-04-22T12:52:13.497
> 
> 标签：iphone

Currently I am doing it like this:

```
CGRect frameRect = myUIImageView.frame;
CGPoint rectPoint = frameRect.origin;
CGFloat newXPos = rectPoint.x + 10.5f;
landscape.frame = CGRectMake(newXPos, 0.0f, myUIImageView.frame.size.width, landscape.frame.size.height); 
```

it feel that there is a more efficient solution. Maybe by using the center point?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-22T21:28:50.133

是的，您可以移动中心，但代码效率并不高。您可以优化 CGPoint 并直接分配回矩形：

```
CGRect frameRect = myUIImageView.frame; 
frameRect.origin.x += 10.5f;
landscape.frame = frameRect; 
```

就此而言，您可以直接调整框架，但优化器可能会为您执行此操作。

你具体对什么不满意？这似乎不是一个好的优化目标。如果您的应用程序的显示更新缓慢，我怀疑您做错了什么。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-04-22T21:33:09.420

我把我的“移动东西”放在一个动画块中，让 iPhone 来做移动。

# asp.net-mvc - Add form values to Ajax.ActionLink

> ID：777070
> 
> 赞同：2
> 
> 时间：2009-04-22T12:52:17.567
> 
> 标签：asp.net-mvc, ajax

How is it possible to get values from a Html form to an Ajax.ActionLink method like the example below. Instead of "id=Model.DinnerID" I need to get the values of two textboxes that is in a Html form block?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-23T06:06:28.877

用文本框的 id 设置 id（像这样：{id="textboxId"}）

# visual-studio-2008 - Using these 2 build options in Visual Studio

> ID：777085
> 
> 赞同：0
> 
> 时间：2009-04-22T12:56:03.517
> 
> 标签：visual-studio-2008

When I debug a project and there is an error in my code (e.g. a method returns something and when I consume that method, I don't put the returned data into a variable) the popup asking me to run the last successful build comes up.

How exactly do I configure this? Also, in what scenario does the Visual Studio build order come in handy? I once built a solution, and it couldn't build one project because a dependent project was not built beforehand. I guess this one possible scenario? Any others?

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-22T13:00:31.853

假设您的解决方案包含多个项目（这是唯一必要的），您需要设置项目依赖项，以便在调试主应用程序时，所有子项目都以正确的顺序构建。

右键单击项目并选择“项目依赖项”。

# python - 存储评论数据的最快方法python

> ID：777090
> 
> 赞同：1
> 
> 时间：2009-04-22T12:56:55.573
> 
> 标签：python, xml, json

嗨，我有一个在服务器上运行的小型评论留言框类型 cgi 进程，目前当有人发表评论时，我只需将该评论格式化为 html 即

`<p class="title">$title</p> <p class="comment">$comment</p>`

并存储在一个平面文件中。在我自己的简单规范中重新实现 xml 或 json 中的存储还是坚持使用简单的 html 路由，是否会更快且 LOC 较低且可接受？

我不想为此使用关系数据库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-22T13:04:24.993

如果平面文件足够快，那么就使用它，因为它非常简单且易于访问。存储为 XML 和 JSON 但仍使用平面文件在性能上可能非常相似。

您可能需要考虑（如果您只是将其排除在问题之外，请忽略这一点）清理/过滤文本，以便用户无法通过例如在评论文本中输入“</p>”来破坏您的 HTML。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-22T13:19:06.643

XML 是一种很好的、​​干净的方式来存储这种类型的数据。在 Python 中，您可以使用[lxml](http://codespeak.net/lxml/tutorial.html)来创建/更新文件：

```
from lxml import etree

P_XML = 'xml_file_path.xml'

def save_comment(title_text, comment_text):
  comment = etree.Element('comment')
  title = etree.SubElement(comment, 'title')
  title.text = title_text
  comment.text = comment_text
  f = open(P_XML, 'a')
  f.write(etree.tostring(comment, pretty_print=True))
  f.close()

save_comment("FIRST!", "FIRST COMMENT!!!")
save_comment("Awesome", "I love this site!") 
```

这是一个简单的开始，但您可以做更多的事情（即为每条评论设置一个 ID，使用 lxml 解析器读取 XML 并添加到其中，而不仅仅是附加文件）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-22T14:08:08.493

平面文件是最快的持久化形式。时期。没有格式化、编码、索引、锁定或任何东西。

JSON（和 YAML）会带来一些开销。他们会更慢。有一些格式必须完成。

XML 比 JSON/YAML 产生更多的开销。还是会慢一些。必须进行大量格式化。

开销越多，它就会越慢。

这些都与清理评论输入无关，以便它显示为有效的 HTML。在将文本保存到文件之前，您应该使用[cgi.escape转义注释中的任何类似 HTML 的字符序列。](http://docs.python.org/library/cgi.html#cgi.escape)

# asp.net-mvc - 具有多个形式的视图

> ID：777098
> 
> 赞同：0
> 
> 时间：2009-04-22T12:58:18.207
> 
> 标签：asp.net-mvc

我想创建一个包含两个带有提交按钮的表单的视图。

在提交表单 ajax 更新应该发生。

那么 Html herlper 类将如何帮助我呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-24T21:35:31.133

如果您指的是 Html.BeginForm()，它具有重载，您可以在其中指定动作和控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-14T17:27:35.807

使用 .post 和 jQuery：

```
<script type="text/javascript">
    $(document).ready(function() {
        $("#OneForm").submit(function() {
            var f = $("#OneForm");
            var action = f.attr("action");
            var serializedForm = f.serialize();
            $.post(action, serializedForm, function(data) {
            });
            return false;
        });

        $("#TwoForm").submit(function() {
            var f = $("#TwoForm");
            var action = f.attr("action");
            var serializedForm = f.serialize();
            $.post(action, serializedForm, function(data) {
            });
            return false;
        });

    });
</script>

<% 
    using (Html.BeginForm<OneController>
    (p => p.ActionOne(), FormMethod.Post, 
    new { id = "OneForm", name = "OneForm" }))
    { 
%>
<!-- yout first form here with its submit button -->
<%=Html.AntiForgeryToken() %>
<%
    }
%>

<% 
    using (Html.BeginForm<TwoController>
    (p => p.ActionTwo(), FormMethod.Post, 
    new { id = "TwoForm", name = "TwoForm" }))
    { 
%>
<!-- yout second form here with its own submit button -->
<%=Html.AntiForgeryToken() %>
<%
    }
%> 
```

# sql-server - 在 SQL Server 2008 中如何确保该表不被篡改？

> ID：777100
> 
> 赞同：0
> 
> 时间：2009-04-22T12:58:29.860
> 
> 标签：sql-server, security

我需要简单但可靠的机制来确保该表在 SQL Server 2008 中未被篡改。假设黑客只能访问和控制其中一个服务器（应用程序或数据库），但不能同时访问两者。任何链接或建议将不胜感激。

澄清。这里的“篡改”是指在将行插入表后更新/删除行的能力。要保护的表是一种业务事务日志。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-22T13:06:10.280

您最好花时间确保黑客根本无法进入，因为一旦您开始做出上述悲观假设，那么您就可以确定黑客*会*进入两台服务器。

您可以通过触发器创建一个审计系统，只要有人对您的数据库服务器上的一个表/表执行插入/更新/删除操作，就可以创建一个完整的日志，但这并不能阻止获得 SA 访问权限的黑客只是对您的审计表进行核对或主数据库。

专注于安全性，放置良好的代码以防止 SQL 注入攻击，确保您在应用程序中使用 SQL 登录帐户仅具有他们需要的权限，确保您的数据库位于 DMZ 后面且不可公开访问，适当的防火墙和端口安全确保只有面向 Web/Public 的服务端口是开放的。

如果这是针对生产环境并且超出您的专业知识范围，那么安全公司也会分析您的应用程序是否存在任何漏洞

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-22T13:57:18.737

如果您的唯一目的是能够验证业务事务日志表的内容，则可以将哈希值（MD5 或 SHA）存储在应用服务器上的 XML 文件中。当应用程序向数据库添加事务时，向 XML 文件添加一个哈希值。然后，您可以通过确保...来审核表中的数据。

*   文件中的元素个数和表中的行数匹配
*   对于表中的每一行，计算的散列值（无论您如何定义）与该行存储在文件中的值相匹配

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-22T14:03:29.283

如果您真的想超越顶部，我建议您执行以下操作：

*   禁止对表进行任何直接写访问。根本不允许更新，插入是通过存储过程执行的。
*   部分日志数据是字段的 MD5 校验和（不包括记录 ID）。
*   写入日志后，将记录 ID 和校验和发送到外部日志服务器。通过 TCP 广播执行此操作。这样，即使入侵者知道数据将发送到外部机器，他们也不知道是哪一台（或多少台）。日志服务器只记录记录 ID 和校验和，不允许更新或修改。接收到重复的 ID 应该会引发警报。您可能还想验证记录 ID 是否以单调递增的顺序接收，但这可能会在高吞吐量环境中导致问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-22T13:05:19.703

在数据库上放置一个 DDL 触发器以监视对数据库的任何更改。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-22T13:07:52.537

访问日志呢？您可能会看到您的用户是否更改了数据库中的某些内容或 Web 应用程序用户是否这样做了。再说一遍，您如何区分来自 Web 应用程序用户的正常活动和异常活动？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-22T13:10:50.237

确保您的服务器已正确锁定显然是您应该做的第一件事。

捕获错误编辑的一种可能的解决方案是，您可以对一行中的所有字段计算某种校验和，并将其作为长而难以理解的字符串存储在该行中；如果存储过程执行了插入/更新命令，它可以在每次插入/更新时重新计算校验和。如果有人直接编辑数据，即通过 Access 或 Management Studio 并直接编辑字段，则校验和将关闭，并且在下一次访问时您可以检测到并采取行动。

当然，如果有人可以访问 SP，那么有动机的黑客只会复制逻辑（或者只是使用 SP），但它可能会阻止并捕获由非恶意但不小心犯下的草率直接编辑错误编辑他们不应该的数据。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-22T19:31:04.643

首先，如果你使用存储的procs和nodynamic sql，你可以在proc级别而不是表级别设置权限。这可以保护您免于让黑客做任何事情，除了应用程序允许的事情。除了 dbas 之外，没有人可以访问生产中的表。

接下来，设置审计表以记录对数据的所有更改以及更改发生时间和更改者。如果有人进行未经授权的更改，这可以用来轻松取回数据。

第三，确保你有一个良好的备份计划，每 15 分钟备份一次事务日志。确保您的 dbas 已练习从备份恢复。

第四，在 sql server 2008 中，您可以使用 ddl 触发器，它会告诉您谁更改了表的结构而不是数据。

# xml - flex xml appendchild

> ID：777101
> 
> 赞同：0
> 
> 时间：2009-04-22T12:58:58.487
> 
> 标签：xml, flex3, air

在我的 flex 项目中，我使用 XML 来填充 TextFlow：

```
TextFilter.importToFlow(XML(str), TextFilter.PLAIN_TEXT_FORMAT); 
```

我想在文本流中添加 html 链接。为此，我在 xml 中添加了 html 标记，但出现解析器错误（格式错误的 xml）。

```
var fixed:String;
fixed = fixed.replace(link, "<a href='event:xyz' >"+link+"</a>");

XML:
<TextFlow xmlns="http://ns.adobe.com/textLayout/2008"/>
added link as <a href='event:xyz' >link</a>
</TextFlow> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-22T13:14:17.123

尝试将您的 TextFilter.PLAIN_TEXT_FORMAT 更改为 TextFilter.TEXT_LAYOUT_FORMAT。

# xcode - GLFW 库的 Xcode 项目设置

> ID：777111
> 
> 赞同：2
> 
> 时间：2009-04-22T13:02:34.577
> 
> 标签：xcode, opengl, glfw

我正在做一项任务，即使用 C 和 OpenGL/GLFW 模拟宇宙的开始。

我对 C 和 Xcode 都很陌生，这根本没有帮助。我已经克服了我愚蠢的编译问题，并且代码找到了 GL/glfw.h ok。当我编译并运行时，我收到“可视化 [项目名称] 已退出，状态为 5”。

我不太确定这意味着什么，但如果我尝试从命令行运行代码，我会收到以下错误：

```
ADAM:Debug adam$ ./Visualisation 
dyld: Library not loaded: @executable_path/libglfw.dylib
Referenced from: /Users/adam/Documents/Programming/C/Visualisation/build/Debug/./Visualisation
Reason: image not found
Trace/BPT trap 
```

我将 libglfw.dylib 添加到项目中的方式与添加 libglfw.a 的方式相同，以查看是否修复了它，不，它没有。

我无法弄清楚 @executable_path 的设置位置或设置的位置，但在库搜索路径中项目的构建设置中是“$(SRCROOT)/../../../../glfw/ lib/macosx”，这是该库所在的位置。

我检查了该库是否是可执行的，我是否需要在其他地方设置该库路径？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T14:35:38.037

我有同样的问题，我在带有 Osx Lion 10.7.4 的 Macbookpro 上使用 Xcode 4.3.2。

1 - 安装 GLFW 库，请访问[http://www.glfw.org/](http://www.glfw.org/)。
3 - 确保您已在*构建阶段***OpenGL**和**Cocoa**框架下添加了带有库选项的*链接二进制文件。* 2 -使用项目导航器在您的 Xcode 项目中导入**libglfw.a 。** 4 - 现在在您的项目导航器中，在**Products**目录中右键单击 your_app_name 文件并选择在 finder 中显示，复制其中的**libglfw.dylib**。

 ******** * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-22T17:43:15.527

我想说的第一件事是你需要阅读 Xcode 手册，这个问题在那里得到了回答（你可能还有其他问题也会在那里得到回答）。

要查找手册，请启动 Xcode 并从“帮助”菜单中选择“Xcode Workspace Guide”。

为了回答这个问题，应用程序在与应用程序的可执行文件相同的目录中寻找库。如果我理解你在做什么，你已经做了一个命令行应用程序，包含 Visualization 的目录也应该包含 libglfw.dylib。@executable_path 是 /path/to/Visualisation。

如果这是具有 GUI 界面的典型应用程序，则路径可能是 /path/to/VisualisationApplication.app/Contents/MacOS/Visualisation。

# iphone - 为什么 CALayer 的 visibleRect 方法总是为我的 UIImageView 提供相同的宽度，即使我将它移出屏幕的一半？

> ID：777112
> 
> 赞同：0
> 
> 时间：2009-04-22T13:02:39.273
> 
> 标签：iphone, calayer

我从一个方法内的 UIImageView 获得了 visibleRect，该方法被多次调用以将该视图向右移动。一旦它部分离开屏幕，我预计 visibleRect 会变小。但事实并非如此。

```
-(IBAction)moveToRight:(id)sender {
    CGRect frameRect = myUIImageView.frame; //that's an image I use in background of other views
    CALayer *myLayer = [myUIImageView layer];
    CGRect visRect = [myLayer visibleRect];

    NSLog(@"%f, %f", visRect.origin.x, visRect.size.width); //width is always 300.0

    CGPoint rectPoint = frameRect.origin;
    CGFloat newXPos = rectPoint.x + 10.5f;
    myUIImageView.frame = CGRectMake(newXPos, 0.0f, myUIImageView.frame.size.width, myUIImageView.frame.size.height);
} 
```

当我需要视图的真正可见矩形时，我必须考虑一些特别的事情吗？实际上我认为它总是会被超级视图剪裁，因此该方法返回真正的可见矩形尺寸。

但是当我将 UIImageView 逐步向右移动时，它仍然保持在 300.0 宽度。即使它的一部分从窗口中消失。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-22T13:05:14.900

唯一改变可见矩形的剪辑来自包含滚动层。

# scripting - SSIS脚本组件存储所有行

> ID：777116
> 
> 赞同：2
> 
> 时间：2009-04-22T13:03:52.313
> 
> 标签：scripting, ssis, asynchronous, components

我有一个 SSIS 脚本组件，它从输入中获取行。

输入中的一行是一个布尔值，用于标识该行是 A 类型还是 B 类型。

如何让脚本将所有输入行加载到正确的行集合中。

此外，有关如何使用行集合然后输出它们的任何指南也很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-01-29T19:53:45.413

您可以使用 Jamie Thomson 在他的博客条目中所做的事情：

[http://consultingblogs.emc.com/jamiethomson/archive/2005/09/05/SSIS-Nugget_3A00_-Multiple-outputs-from-a-synchronous-script-transform.aspx](http://consultingblogs.emc.com/jamiethomson/archive/2005/09/05/SSIS-Nugget_3A00_-Multiple-outputs-from-a-synchronous-script-transform.aspx)

他使用脚本组件并根据条件将输出拆分为多个输出流。他在他的帖子中非常简洁地解释了如何配置组件以及如何将正确的行发送到正确的输出流。希望这就是你要找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-22T13:12:07.270

由于脚本组件使用的是 VB，所以它类似于

```
If Column(type) = True Then
  CollectionA.Add(row)
Else
  CollectionB.Add(row)
End If 
```

但是，您可能需要考虑使用 DataTable，因为它更接近地代表您要存储的内容。

当所有行都通过组件时，您可以绑定一个事件。当该事件执行时，您可以将数据从 DataTables 移动到数据流中存在的一些变量中。如果您将这些变量键入为表值，我相信您可以在数据流中使用这些变量。

您最好的选择可能是将整个操作放入控制流中的一个单独的 DataFlow 组件中，因为这听起来好像您可能正在更改输出的行数，而您最好的选择可能是使用多个 DataFlow 组件。

# asp.net - 在 VB 中声明一个 nvarchar/在 SQL 查询中匹配一个 nvarchar

> ID：777118
> 
> 赞同：0
> 
> 时间：2009-04-22T13:04:24.307
> 
> 标签：asp.net, sql, vb.net, nvarchar

我正在开发一个使用 VB 的 ASP.NET 应用程序。我在 VB 文件中使用 SQLReader/SQLCommand/SQLConnection 来尝试提取数据值。

我很困惑地发现查询没有返回任何值的原因，这里有人向我展示了如何对查询进行故障排除以验证正在返回的东西，但事实并非如此。

我与一位同事交谈，他问它是否匹配，因为我正在输入一个字符串，并且数据库的 Text 字段是一个 nvarchar。如何在 VB 中声明变量，以便在作为查询参数输入时，它可以匹配？

它看起来匹配的数据类型只是基本的东西，比如“2”、“2a”、“1a”等等。

如果没有办法只声明 nvarchar，有没有人建议我如何解决这个问题？

谢谢一堆。

旁注：这是这个问题的某种延续：[SQL Reader say no values exist, query appears fine](https://stackoverflow.com/questions/768052/sql-reader-saying-no-values-exist-query-seems-fine)

编辑：感谢所有帮助。我按照你们所说的进行了设置，但现在我收到一个错误消息“不存在从对象类型 System.Data.SqlClient.SqlParameter 到已知托管提供程序本机类型的映射。”

我将参数作为表单范围的变量，如下所示：

```
Private travelParameter As New SqlParameter("@trip", SqlDbType.NVarChar) 
```

然后在主窗体中，

```
travelQuery.CommandText = "SELECT [StartLoc], [EndLoc],[TravelTime], [AvgSpeed], [Distance]  FROM [TravelTimes] WHERE [TripNum] = @trip"

travelQuery.Parameters.AddWithValue("@trip", travelParameter) 
```

稍后，将调用这样的函数。

```
FillWithTime("2", travelReader, time, newCell) 
```

定义为：

```
Private Sub FillWithTime(ByVal TripNum As Char, ByRef travelReader As SqlDataReader, ByRef TimeData() As Object, ByRef Cell As System.Web.UI.WebControls.TableCell)

    travelParameter.Value = TripNum
    travelReader = travelQuery.ExecuteReader()
    If (travelReader.Read()) Then

        travelReader.GetValues(TimeData)

        'stuff
    End If

End Sub 
```

再次感谢。

PS - Adam 和 Cerebus，如果可以的话，我会接受这两个答案。他们俩真的为我带来了这个想法，非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-22T13:13:41.477

您在 .NET 中的数据类型应该是`string`. 您只需要确保您的参数实例正在使用`NVarChar`（如果是 a `DbParameter`，那么就是`DBType.String`。如果是 a `SqlDbParameter`，那么就是`SqlDbType.NVarChar`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-22T13:15:40.037

SqlDbType`nvarchar`映射到 .NET 字符串数据类型。就个人而言，我喜欢通过使它们尽可能具体来创建 SqlParameters：

```
'This overload of the constructor takes the Parameter name, ...
' its SqlDbType and size.
Dim param as New SqlParameter("@trip", SqlDbType.NVarChar, 2)
param.Value = "1a"
travelQuery.CommandParameters.Add(param) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-22T13:38:57.190

就.net而言，它只是文本编码。

找出它是什么编码，可能是UTF8

byte[] barr = String.GetBytes(string)

System.Text.Encoding.UTF8.GetString(字节[])

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-22T13:09:09.710

该字符串应该可以工作，因为它的长度小于数据库中 nvarchar 的字段大小。

# delphi - 如何获取自定义属性的属性类型名称？

> ID：777125
> 
> 赞同：3
> 
> 时间：2009-04-22T13:06:05.553
> 
> 标签：delphi, rtti

在 Delphi 2007 中，我为我的项目添加了一个新的字符串类型：

```
type
  String40 = string; 
```

此属性用于类中：

```
type
  TPerson = class
  private
    FFirstName = String40;
  published
    FirstName: string40 read FFirstName write FFirstName;
  end; 
```

在运行时，我想使用 RTTI 获取属性 FirstName 的名称。我希望它是 String40：

```
var
  MyPropInfo: TPropInfo;
  PropTypeName: string;
  MyPerson: TPerson;
begin
  MyPerson := TPerson.Create;
  MyPropInfo := GetPropInfo(MyPerson, 'FirstName')^;
  PropTypeName := MyPropInfo.PropType^.Name; 
```

但是，在此示例中，PropTypeName 是“字符串”。我需要做什么才能获得正确的属性类型名称“String40”？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-22T13:22:55.417

这适用于Delphi5

```
type
  String40 = type string; 
```

至于您的其余代码，要使 RTTI 可用，您应该

*   从 TPersistent 继承 TPerson 或
*   为 TPerson 使用 {$M+} 编译器指令
*   发布 Firstname 属性

* * *

**编辑：**如果你编译并运行这段代码会发生什么？

```
program Project1;

uses
  Classes,
  typInfo,
  Dialogs,
  Forms;

{$R *.RES}

type
  String40 = type string;
  TPerson = class(TPersistent)
  private
    FFirstName: String40;
  published
    property FirstName: string40 read FFirstName write FFirstName;
  end;

var
  MyPropInfo: TPropInfo;
  PropTypeName: string;
  MyPerson: TPerson;

begin
  Application.Initialize;
  MyPerson := TPerson.Create;
  MyPropInfo := GetPropInfo(MyPerson, 'FirstName')^;
  PropTypeName := MyPropInfo.PropType^.Name;
  ShowMessage(PropTypeName);
end. 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-22T13:27:18.060

你需要做两件事：

1.  使属性发布。
2.  使用类型关键字。

然后你会得到：

```
type
  String40 = type string;
  TPerson = class
  private
    FFirstName : String40;
  published
    property FirstName: string40 read FFirstName write FFirstName;
  end;

var
  MyPropInfo: PPropInfo;
  PropTypeName: string;
  MyPerson: TPerson;
begin
  MyPerson := TPerson.Create;
  try
    MyPerson.FirstName := 'My first name';
    MyPropInfo := GetPropInfo(MyPerson, 'FirstName');
    if MyPropInfo<>nil then begin
      PropTypeName := MyPropInfo^.PropType^.Name;
      Memo1.Lines.Add(PropTypeName);
    end;
  finally
    MyPerson.FRee;
  end;
end; 
```

在 D2009 中测试。

# iphone - 为什么我必须导入 Quartz Framework，而不是 Core Graphics Framework？

> ID：777127
> 
> 赞同：1
> 
> 时间：2009-04-22T13:06:26.893
> 
> 标签：iphone, quartz-graphics

我有一个 ViewController 类，我在其中使用了一些 CG____ 结构。核心图形没有导入。所以我认为这很好，并尝试在不导入 Quartz 框架的情况下开始使用 CALayer。它没有用，我确实要导入它。

我想我错过了为什么我必须导入这个，而不是另一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-22T14:44:21.137

结构完全在标题中定义，因此您只需要`#import`正确的标题即可使用它们。

要调用类上的函数或方法，需要在头文件中定义方法并在编译时链接。导入框架或库会通知链接器要链接到哪些框架/库。

注意：最好只链接到您需要的框架，因为添加额外的框架会增加加载器必须做的工作量。

# asp.net - asp.net 将 iso-8859 文件转换为 utf-8

> ID：777144
> 
> 赞同：1
> 
> 时间：2009-04-22T13:10:55.667
> 
> 标签：asp.net, file, character-encoding

我需要将 CSV 文件从 iso 转换为 UTF-8 以将重音保留在数据库中。

当我尝试将它们翻译成 UTF-8 时，不会保留法语口音（é、è、ê 等），而是将它们更改为“？”。

我难住了。

我使用以下函数进行翻译：

```
public static string iso8859ToUnicode(string src) {

        Encoding iso = Encoding.GetEncoding("iso8859-1");

        Encoding unicode = Encoding.UTF8;        

        byte[] isoBytes = iso.GetBytes(src);

        byte[] unibytes = Encoding.Convert(iso,unicode,isoBytes);

        char[] unichars = new char[iso.GetCharCount(unibytes,0,unibytes.Length)];

        unicode.GetChars(unibytes,0,unibytes.Length,unichars,0);

        return new string(unichars);

    } 
```

但它似乎效果不佳。帮助？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-22T13:24:43.650

我强烈怀疑您的原始字符串没有正确的值。我的猜测是您已经从文件中读取它，就好像它是 UTF-8 一样。

要在两种编码之间进行转换，您首先不应该使用字符串 - 您应该基本上加载文件的*字节*并以这种方式调用`Encoding.Convert()`。或者，使用 ISO-Latin-1 加载文件并将其保存为 UTF-8。例如：

```
public static void ConvertLatin1ToUtf8(string inputFile, string outputFile)
{
    Encoding latin1 = Encoding.GetEncoding(28591);
    string text = File.ReadAllText(inputFile, latin1);
    File.WriteAllText(outputFile, text, Encoding.UTF8);
} 
```

或者

```
public static void ConvertLatin1ToUtf8(string inputFile, string outputFile)
{
    Encoding latin1 = Encoding.GetEncoding(28591);
    byte[] latinBytes = File.ReadAllBytes(inputFile);
    byte[] utf8Bytes = Encoding.Convert(latin1, Encoding.UTF8, latinBytes);
    File.WriteAllBytes(outputFile, utf8Bytes);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-22T13:14:07.937

当您声明新字符串或将数据存储在 char 数组中时，您可能会丢失编码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-22T13:23:02.267

而不是`GetChars()`方法，你不能只是调用

```
unicode.GetString(unibytes); 
```

# web - 有哪些工具可以对 PSD 进行切片？

> ID：777153
> 
> 赞同：11
> 
> 时间：2009-04-22T13:12:58.670
> 
> 标签：web, slice, psd

我经常对以 PSD 格式提供的网页设计进行切片。作为站点构建者，我不需要创建图形——我只需要重新排列图层、隐藏图层并显示其他图层、选择颜色、宽度、高度等。有什么工具可以完成这项工作？

我知道 Adob​​e Photoshop，但对于不想绘图并拥有许多花哨功能但*可靠*地打开 PSD （不幸的是，GIMP 在这一点上大多失败）并将其切片以构建的站点构建者来说，它是一个非常昂贵的工具网站模板。我知道有很多图像查看器可以打开 PSD 文件，但这些应用程序不是我要找的——我还没有找到一个允许我处理图层的应用程序。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-22T13:17:15.573

Paint.NET 随着时间的推移越来越好。您可以使用插件打开 PSD 文件。

插件： http: [//psdplugin.codeplex.com/](http://psdplugin.codeplex.com/)

油漆网 [http://www.getpaint.net/](http://www.getpaint.net/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-22T13:23:28.723

Adobe Imageready 曾经与 Photoshop 一起用于切片。被烟花取代了

Adobe 对其所有产品都有免费试用版；）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-22T13:27:41.600

尝试查看 Photoshop Elements。[http://www.adobe.com/products/photoshopelwin/](http://www.adobe.com/products/photoshopelwin/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-22T14:33:11.613

看看 Paint Shop Pro ( [http://www.corel.com/servlet/Satellite/us/en/Product/1184951547051](http://www.corel.com/servlet/Satellite/us/en/Product/1184951547051) ) - 据我所知，它可以很好地处理 PSD，而且它的竞争价格约为 80 美元

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-03-09T04:04:58.837

我意识到这是一个旧线程，但想稍微更新一下：

任何考虑基于此线程获取 Photoshop Elements 的人都应该知道 Elements（至少 v. 10.0）不支持图层组，这可能会限制您正确切片 psd 文件的能力。

Pixelmator (v.1.6.7) 是 Photoshop 的另一种常见“精简版”替代品，支持组，但有其他问题，例如处理文本图层。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-22T13:25:29.687

我认为更实惠的 Fireworks 也可以工作，但根据我的经验，按照设计师的意图打开 PSD 的唯一可靠方法是使用 Photoshop。使用其他程序会导致细微差别。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-12-07T20:45:42.717

我知道这个问题已经很老了，但我想发布这个答案，希望它能帮助其他人寻找答案。这是我在寻找解决方案时出现的热门帖子之一。

* * *

Adobe 有一个名为 Creative Cloud Extract 的免费网络应用程序，可让您以只读方式访问 PSD。[单击此处](https://helpx.adobe.com/creative-cloud/help/extract-css-images-psd-files.html)以了解有关您可以做什么以及如何使用它的更多信息。如果您还没有 Adob​​e ID，则只需注册一个免费的 Adob​​e ID。

> Creative Cloud Extract 是 Creative Cloud Assets 中的一项免费新功能，可帮助您直接在浏览器中探索 PSD，包括图层和图层合成。它特别有利于网页设计师和开发人员，他们可以共享 PSD、解锁设计信息和下载可用于生产的资产。使用 Extract，您可以在浏览器中对 PSD 文件执行以下操作：
> 
> *   复制文本和 CSS
> *   获取颜色、渐变和字体信息
> *   测量元素之间的距离
> *   保存优化的图像资源以供生产

我认为这是在使用 Adob​​e 的一种付费产品之外查看 PSD 的最可靠方法。正如其他人所提到的，第三方程序可能无法正确打开 PSD 文件。由于它是 Adob​​e 的官方产品，而且 Adob​​e 在创建 Extract 时考虑到了开发人员，因此我可以合理地确定它将与从 Photoshop 创建的任何 PSD 完全兼容。

* * *

一个更好的选择是[Brackets](http://brackets.io/)，一个开源代码编辑器。最新版本实际上带有内置于编辑器中的 Extract 的预览版。我发现的最酷的功能之一是您可以打开一个 PSD，并在输入 CSS 代码时，它会根据当前选择的图层为您提供提示。您还可以选择带有图像的图层或一组图层，一旦您在预期图像路径的位置（例如img 元素的 src 属性）。

# phpbb - phpbb 相关会话问题/cookie

> ID：777163
> 
> 赞同：0
> 
> 时间：2009-04-22T13:15:38.650
> 
> 标签：phpbb

我有一个用户不时被抛出，试图在 phpbb3 论坛上发布一篇文章。所有其他用户都很好。我认为他们的 cookie 存在一些问题，但她在任何其他论坛上都没有任何问题。有什么想法吗？我只是告诉她尝试不同的浏览器来测试它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-22T13:33:33.130

你能详细解释一下你所说的“被抛弃”是什么意思吗？我有用户报告他们无缘无故地退出，但这是在 phpBB2 上*。*

由于这只发生在 1 或 2 个用户身上，我只是得出结论，他们可能正在运行某种间谍软件删除程序，并且他们可能正在删除自己的浏览器 cookie，而不知道这些 cookie 的实际作用。当有成千上万的其他用户根本没有任何问题时，一个错误会重复发生在完全相同的用户身上是没有意义的。

但话又说回来，我最近确实遇到了一个问题，其中一个 phpBB2 的表自发地被清除并在其名称后附加了一个下划线，这会阻止人们在大约一周内创建任何新主题。我仍然无法解释这是怎么发生的。

编辑：为了响应有关代理和 IP 更改的新信息，您应该查看[此支持线程](http://www.phpbb.com/community/viewtopic.php?f=1&t=767295)：

> *也许 vbulettin 和其他董事会拒绝我的浏览器，因为我的网络在您在线时不断更改 IP（这可能是这背后的原因）。*
> 
> ### 回答：
> 
> IP 地址是 sessionhash 的一部分，因此快速更改的 IP 地址将使您的会话无效并让您退出“如果” bbuserid 和 bbpassword 在地址更改发生时无法建立新的经过身份验证的会话。

所以看起来如果他们在登录时检查了“记住我的登录名/密码”，他们应该没有问题。phpBB3 中还应该有一个管理选项来禁用 IP 绑定。

否则，他们将不得不选择一个不会频繁更改其 IP 地址的代理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-09-27T09:33:52.737

在 phpBB 安全设置中，您可以更改验证的 IP 地址的数量。尤其是 AOL 因每次都从不同的代理发送请求而臭名昭著。只需降低安全性以允许更改 IP 地址的最后两个数字。

# sql - 我可以使用通配符在 SQLite 中搜索多个表列吗？

> ID：777171
> 
> 赞同：1
> 
> 时间：2009-04-22T13:18:33.587
> 
> 标签：sql, sqlite

我有一个表，联系人，有十几列左右。我想识别至少一列包含正则表达式的每一行。我想知道是否有可能做这样的事情：

```
select * from contacts where * like '%re%'; 
```

而不是这个：

```
select * from contacts where last_name like '%re%' or first_name like '%re%' or ... ; 
```

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-22T16:36:18.200

```
select * from contacts where concat(last_name, ' ', first_name) like '%re%' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-22T13:21:25.033

我不认为这是可能的。也许您可以在表上放置一个触发器来更新单个非规范化列？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-15T05:52:32.120

**您可以像这样使用在两列中进行搜索。**

```
String query = "select * from SomeTable
            where (column1 like ? and column2 like ?) and column3 like ?";
String[] params = {"%" + param1 + "%", "%" + param2 + "%", "%" + param3 + "%"};
Cursor c = db.rawQuery(query, params); 
```

# c# - Web 服务客户端上的连接关闭

> ID：777176
> 
> 赞同：1
> 
> 时间：2009-04-22T13:19:58.170
> 
> 标签：c#, web-services

我有一个 .Net 3.5 应用程序，其 Web 服务继承自 System.ServiceModel.ClientBase<>，在对 Web 服务方法进行 300-400 次调用后，出现以下异常：

```
System.ServiceModel.CommunicationException: The underlying connection was closed: A connection that was expected to be kept alive was closed by the server. ---> System.Net.WebException: The underlying connection was closed: A connection that was expected to be kept alive was closed by the server. ---> System.IO.IOException: Unable to read data from the transport connection: An existing connection was forcibly closed by the remote host. ---> System.Net.Sockets.SocketException: An existing connection was forcibly closed by the remote host
at System.Net.Sockets.Socket.Receive(Byte[] buffer, Int32 offset, Int32 size, SocketFlags socketFlags)
at System.Net.Sockets.NetworkStream.Read(Byte[] buffer, Int32 offset, Int32 size)
--- End of inner exception stack trace ---
at System.Net.Sockets.NetworkStream.Read(Byte[] buffer, Int32 offset, Int32 size)
at System.Net.FixedSizeReader.ReadPacket(Byte[] buffer, Int32 offset, Int32 count)
at System.Net.Security._SslStream.StartFrameHeader(Byte[] buffer, Int32 offset, Int32 count, AsyncProtocolRequest asyncRequest)
at System.Net.Security._SslStream.StartReading(Byte[] buffer, Int32 offset, Int32 count, AsyncProtocolRequest asyncRequest)
at System.Net.Security._SslStream.ProcessRead(Byte[] buffer, Int32 offset, Int32 count, AsyncProtocolRequest asyncRequest)
at System.Net.TlsStream.Read(Byte[] buffer, Int32 offset, Int32 size)
at System.Net.PooledStream.Read(Byte[] buffer, Int32 offset, Int32 size)
at System.Net.Connection.SyncRead(HttpWebRequest request, Boolean userRetrievedStream, Boolean probeRead)
--- End of inner exception stack trace ---
at System.Net.HttpWebRequest.GetResponse()
at System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelRequest.WaitForReply(TimeSpan timeout)
--- End of inner exception stack trace ---

Server stack trace: 
at System.ServiceModel.Channels.HttpChannelUtilities.ProcessGetResponseWebException(WebException webException, HttpWebRequest request, HttpAbortReason abortReason)
at System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelRequest.WaitForReply(TimeSpan timeout)
at System.ServiceModel.Channels.RequestChannel.Request(Message message, TimeSpan timeout)
at System.ServiceModel.Dispatcher.RequestChannelBinder.Request(Message message, TimeSpan timeout)
at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)
at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs)
at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)
at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message) 
```

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-22T19:26:28.883

连接已被服务器关闭。如果您不知道导致服务器断开连接的原因（可能是因为它崩溃了），那么您实际上什么也做不了，只能捕获异常并重试，可能会在短暂的延迟后重试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-07T07:18:54.840

如果您还没有，您可以做很多事情：

*   有机会查看服务器上的服务日志文件或事件日志。

*   启用 WCF 跟踪日志记录 - 请参阅[http://msdn.microsoft.com/en-us/library/ms732023(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms732023(v=vs.100).aspx)

*   正确处理 Web 服务错误 - 请参阅[https://codereview.stackexchange.com/questions/18319/recommended-method-to-use-a-wcf-service-client-and-handling-its-exceptions](https://codereview.stackexchange.com/questions/18319/recommended-method-to-use-a-wcf-service-client-and-handling-its-exceptions)

# asp.net-mvc - ASP.NET MVC - IsPostBack 还在这里吗？

> ID：777179
> 
> 赞同：19
> 
> 时间：2009-04-22T13:20:40.667
> 
> 标签：asp.net-mvc, webforms

我知道，我知道，我知道。我完全同意，我不应该在 MVC 中做网络表单。但是，签署我的薪水支票的人现在不会批准我们的网站完全转换为 MVC。因此，我正在逐页采取增量步骤来转换它们，同时在 MVC 中添加新功能。

所以我的问题是如何从控制器访问 IsPostBack 属性？

**编辑：** 为了进一步澄清，我的 mvc 母版页上有一个 webform 用户控件，可以启动回发。我正在尝试识别这些回发与 mvc 帖子。在这一点上，我想我将只检查“__viewstate”键的请求表单键，如果找到它，则将其视为回发。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2011-04-14T08:03:44.017

如果有人仍然感兴趣，您可以从 MVC 操作方法内部测试 POST，如下所示：

```
if (Request.HttpMethod=="POST") { 

} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-04-22T13:39:49.370

没有 IsPostBack —— 一切都是 POST 或 GET（或其他 HTTP 动词）。您可以使用 AcceptVerbsAttribute 限制您的操作允许的 HTTP 动词，即，您永远不会看到来自不允许的动词的请求。例如，以下仅允许 POST。

```
 [AcceptVerbs( HttpVerbs.Post )]
  [ValidateAntiForgeryToken]
  public ActionResult Update( int id )
  {
  } 
```

如果您需要相同的操作名称同时执行 GET/POST 并且它们实际上执行不同的操作，您可以给它们单独的签名或使用 ActionNameAttribute 为其中一个操作设置别名，以便方法可以具有不同的名称。

```
 [AcceptVerbs( HttpVerbs.Get)]
  public ActionResult List()
  {
  }

  [AcceptVerbs( HttpVerbs.Post )]
  [ValidateAntiForgeryToken]
  public ActionResult List( string filter, int page, int limit )
  {
  } 
```

或者

```
 [ActionName( "List" )]
  [AcceptVerbs( HttpVerbs.Get)]
  public ActionResult ListDisplay()
  {
  }

  [AcceptVerbs( HttpVerbs.Post )]
  [ValidateAntiForgeryToken]
  public ActionResult List()
  {
  } 
```

**编辑**：请注意，我已将防伪令牌验证添加到 POST 操作中。您确实应该使用它来[防止跨站点脚本攻击](http://haacked.com/archive/2009/04/02/anatomy-of-csrf-attack.aspx)。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-10-14T15:22:08.733

您可以在 Razor 中使用这段代码

```
@if(IsPost)
{
//dosomething
}
else
{
//do some other thing
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-12-10T18:13:11.323

我经常使用这个方法（在我的 BaseController 类上声明）

```
 protected bool IsPostBack()
 {
     bool isPost = string.Compare(Request.HttpMethod, "POST", 
        StringComparison.CurrentCultureIgnoreCase) == 0;
     if (Request.UrlReferrer == null) return false;

     bool isSameUrl = string.Compare(Request.Url.AbsolutePath, 
        Request.UrlReferrer.AbsolutePath, 
        StringComparison.CurrentCultureIgnoreCase) == 0;

     return isPost && isSameUrl;
 } 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-04-22T13:33:05.097

控制器不继承自 System.Web.UI.Page。没有 isPostback 属性。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-02-05T14:23:16.667

*对于 Asp.net Core 2.x，您可以在HttpRequest*上创建扩展方法。基于@ibirite 答案可能是这样的：

```
using System;
using System.Linq;
using Microsoft.AspNetCore.Http;
using Microsoft.AspNetCore.Http.Extensions;

namespace MyApp
{
    public static class HttpRequestExtensions
    {
        public static bool IsPostBack(this HttpRequest request)
        {
            var currentUrl = UriHelper.BuildAbsolute(request.Scheme, request.Host, request.PathBase, request.Path, request.QueryString);
            var referrer = request.Headers["Referer"].FirstOrDefault();

            bool isPost = string.Compare(request.Method, "POST",
               StringComparison.CurrentCultureIgnoreCase) == 0;
            if (referrer == null) return false;

            bool isSameUrl = string.Compare(currentUrl,
               referrer,
               StringComparison.CurrentCultureIgnoreCase) == 0;

            return isPost && isSameUrl;
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-22T13:45:37.487

您为什么要尝试从控制器中获取该值？不确定这是否会对您有所帮助，但您仍然可以使用传统的 Request 对象来获取表单提交的信息......

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-22T13:47:49.587

我不确定我是否正确理解了您的问题，但是在控制器上，您将有一个处理来自浏览器的初始 GET 的操作和一个处理 POST 的第二个操作。

```
 [AcceptVerbs(HttpVerbs.Post)]
 public ActionResult Create(MyModel model)
 {...}

 public ActionResult Create()
 {...} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-04-22T20:04:12.177

我肯定会看看 Scott Hanselman 的这篇博文，他在 MVC 应用程序中放置了一个 aspx 页面。

[http://www.hanselman.com/blog/PlugInHybridsASPNETWebFormsAndASPMVCAndASPNETDynamicDataSideBySide.aspx](http://www.hanselman.com/blog/PlugInHybridsASPNETWebFormsAndASPMVCAndASPNETDynamicDataSideBySide.aspx)

您的控制器将无权访问 ViewState 属性。即使您确实想处理 __VIEWSTATE 的问题，您也必须做一些工作才能在 mvc 控制器中将其转换为可用的形式。祝你好运，想出一个转换策略，不管结果如何，很多人都会有兴趣知道你在这个过程中会遇到什么样的问题。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-04-22T13:34:35.907

MVC 框架不支持 Web 表单中使用的经典回发和视图状态。所以，不，您无权访问 IsPostBack。

我对您的建议是有两个分支：一个用于当前站点，您将在其中添加已知错误的补丁程序，另一个用于从头开始构建新站点。新功能应该在这个中实现。我假设您的大部分代码库都可以在新站点中重用。

新站点准备就绪后，将其投入生产。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-09-05T22:40:25.807

如果您在 MVC 页面中有多个表单，您可以在表单中添加一个具有有意义 ID 的隐藏输入，并测试它是否具有值。这样您就不需要有两个单独的处理程序（一个用于获取，一个用于发布）。

所以在页面和表单内部：

```
 <input type="hidden" id="testForm" name="testForm" value="1"/> 
```

在控制器中：

```
if (Request.Form["testForm"] != null)
        { 
        // ACTIONS FOR THE POSTED FORM
        } 
```

希望能帮助到你！

# c# - 使用 ResourceReader 创建资源的 HybridDictionary

> ID：777180
> 
> 赞同：3
> 
> 时间：2009-04-22T13:20:47.717
> 
> 标签：c#, linq, collections

我正在使用 ResourceReader 来读取嵌入式 resx 资源，并且我想将它存储在成员变量中的类级别。我想将它存储为 HybridDictionary 但看不到一种简单的方法。

班级成员

```
private IEnumerable<DictionaryEntry> dictionary; 
```

类初始化

```
Assembly asm = Assembly.GetExecutingAssembly();
Stream resourceStream = asm.GetManifestResourceStream("MagicBeans");

using (ResourceReader r = new ResourceReader(resourceStream))
{
    IEnumerable<DictionaryEntry> dictionary = r.OfType<DictionaryEntry>();
} 
```

特性

```
public string Something { get { return dictionary["Something"].Value;  }} 
public string ThatThing { get { return dictionary["ThatThing"].Value;  }} 
```

但是，它`IEnumerable<DictionaryEntry>`并没有按照我喜欢的方式工作，我目前正在考虑做一些 LINQ 喜欢的事情；`.First(x => x.Key=="Something").Value`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-22T15:12:50.100

IEnumerable 不支持按键访问（代码中的 dictionary["something"] 部分），以访问数据的方式需要您的 dictionary 属性是一个 IDictionary 类。就像是：

```
private IDictionary<string, object> dictionary; 
```

然后，您需要解析从程序集中提取的数据以填充字典：

```
Assembly asm = Assembly.GetExecutingAssembly();
Stream resourceStream = asm.GetManifestResourceStream("MagicBeans");

dictionary = new Dictionary<string, object>();

using (ResourceReader r = new ResourceReader(resourceStream))
{
    foreach(DictionaryEntry entry in r.OfType<DictionaryEntry>())
    {
       dictionary.Add(entry.Key.ToString(), entry.Value);
    }
} 
```

最后，属性不需要 Value 调用：

```
public string Something { get { return dictionary["Something"];  }} 
public string ThatThing { get { return dictionary["ThatThing"];  }} 
```

如果字典中不存在该键，这些属性将引发异常，因此您可能需要先检查一下。

您的 LINQ 解决方案也应该可以工作，但代价是每次请求属性时都要枚举列表以找到正确的条目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-01T16:24:41.003

要将资源转换为字典，可以使用以下命令：

```
using (var reader = new ResourceReader(resource))
{
  var dictionary = reader
    .Cast<DictionaryEntry>()
    .Aggregate(new Dictionary<string, object>(), (d, e) => { d.Add(e.Key.ToString(), e.Value); return d; });

  Console.WriteLine(dictionary["Foo"]);
} 
```

# workflow - CRM自定义工作流动态变量问题

> ID：777187
> 
> 赞同：1
> 
> 时间：2009-04-22T13:22:03.003
> 
> 标签：workflow, dynamics-crm

我编写了一些自定义工作流活动，并在浏览器中使用了几个动态变量来填充输入属性，例如**{dynVar1} / {dynVar2} / {dynVar3}**，但在发布后将其更改为**{dynVar1}{dynVar1}**。如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-18T14:28:11.350

Rollup2 中有一个修复：

*   当您在自定义工作流活动的工作流中单击**设置属性时，将删除静态文本。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-24T01:07:27.653

不确定我是否完全理解您的意图。您是否使用 / 作为分隔符？
考虑转义字符，例如 / 或将其替换为另一个问题较少的字符，如管道 | 或使用 xml 作为输入字符串。

# c++ - How long can template compilation really take?

> ID：777188
> 
> 赞同：6
> 
> 时间：2009-04-22T13:22:03.923
> 
> 标签：c++, templates, compilation

Template metaprogramming can be used for computing things like factorial at compile time instead of during runtime. I've heard that some programming contests have introduced limitations on compilation time exactly to weed out template metaprogramming abuse.

Is there any innocent looking example of using templates that takes some really-really long time (like several hours) to compile?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-22T13:47:42.363

模板机制是图灵完备的。这意味着至少在理论上，任何可以完成的计算都可以在编译时以这种方式完成（在实践中，您可能会很快遇到模板深度等方面的硬限制，但这取决于编译器）。

您是否愿意这样做是一个单独的问题。您可以使用昂贵的算法轻松匹配“编译时间”的标准。但也有更实用的代码，例如[实现 FFT 的](http://www.oonumerics.org/blitz/examples/fft.html)代码；给一个足够大的数据集，这将需要一段时间......

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-22T13:28:11.460

我听说国际信息学奥林匹克竞赛（一个这样的编程竞赛）在参赛者使用类似[这样](http://en.wikipedia.org/wiki/Template_metaprogramming#Compile-time_code_optimization)的技术创建了一个 7 维向量后首次引入了编译时间限制。他的代码不得不在一夜之间编译，这太糟糕了。我认为这发生在 90 年代后期的某个时间。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-22T14:40:06.450

试试这个（我使用 Visual Studio 2005）

```
template <int M, int N>
struct Ack 
{
    enum { value = Ack<M - 1, Ack<M, N - 1>::value >::value };
};

template <int M>
struct Ack<M, 0> 
{
    enum { value = Ack<M - 1, 0>::value };
};

template <>
struct Ack<0, 0> 
{
    enum { value = 1 };
};

template <int N>
struct Ack<0, N> 
{
    enum { value = N + 1 };
};

void main()
{
    printf("Result: %d\n",  Ack<150, 150>::value);
} 
```

这可能看起来很可怕，我只是想写一个相当于这个可爱的 lisp 函数

```
(defun ack(m, n)
cond ((= m 0) (+ n 1))
     ((= n 0) ack(- m 1) n)
     (t (ack (- m 1) (ack m (-n 1))) )
) 
```

我们老师说这是费马函数，但我不确定...

# c# - wcf 保证异步调用

> ID：777196
> 
> 赞同：1
> 
> 时间：2009-04-22T13:24:28.627
> 
> 标签：c#, .net, wcf

有没有办法配置 WCF 来保证异步调用（远程 - 在不同的机器上）？即在 WCF 时代之前您将使用一些 MQ 消息传递机制来实现的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-22T13:32:33.210

重新澄清（评论）-您可以将 MSMQ 用作 WCF 通道；-p 使用[`NetMsmqBinding`](http://msdn.microsoft.com/en-us/library/system.servicemodel.netmsmqbinding.aspx)和相关的绑定。

例如，请参见[此处](http://bloggingabout.net/blogs/dennis/archive/2008/02/28/wcf-and-msmq.aspx)- 或者对于 MSDN 文档，请参见[此处](http://msdn.microsoft.com/en-us/library/ms732355.aspx)。

* * *

好吧，您可以在 IDE（或`svcutil /async`）中启用“生成异步操作”按钮 - 并使用异步方法。实际上，同步方法通常在内部调用异步方法并阻止回复。

您是否看到了一些具体问题？

# java - 使用 DisplayTag 库框架通过 Struts2 进行分页

> ID：777199
> 
> 赞同：1
> 
> 时间：2009-04-22T13:25:36.783
> 
> 标签：java, struts2

我想为我的应用程序的某些类应用分页，其中我使用的是 spring、struts2 和 hibernate。在这里，我从welcome.jsp 文件中调用动作类。它有以下代码：

```
<s:form action="marketing/allCountry.action">  
         <s:submit value="Click"></s:submit>  
         </s:form> 
```

现在我`allCountry.action`的java类有以下代码：

```
public String executeAction() throws Exception {
        try {
            countryList = new ArrayList<Country>();
            countryList = this.countrySecurityProcessor.findByAll(0, null, null, null, null, false, false, null, null, null, null, 0);
            System.out.println("countryList = "+countryList);
            return ActionSupport.SUCCESS;

        } catch (Exception ex) {
            return ActionSupport.ERROR;
        }
} 
```

它正确地获取数据，我通过打印 countryList 对象确认。但现在我从 重定向`SUCCESS`到`country.jsp`。的代码`country.jsp`是：

```
<display:table list="countryList" requestURI="CountryAllAction" pagesize="3">
    <display:column property="id" title="ID" />
    <display:column property="name" />
</display:table> 
```

现在在执行我的应用程序时，我遇到了运行时错误，例如：

> javax.servlet.ServletException：javax.servlet.ServletException：异常：[.LookupUtil] 在对象类型“java.lang.String”中查找属性“id”时出错。原因：未知属性 'id'

此类错误的解决方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-22T16:27:12.247

您需要在您的操作中为您的 countryList 设置一个吸气剂。

```
List<Country> countryList = new ArrayList<Country>();

public String executeAction() throws Exception {
  try {
     countryList = this.countrySecurityProcessor.findByAll(0, null, null, null, null, false, false, null, null, null, null, 0);
     System.out.println("countryList = "+countryList);
     return ActionSupport.SUCCESS;

  } catch (Exception ex) {
     return ActionSupport.ERROR;
  }

}

public List<Country> getCountryList() {
  return countryList;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-22T16:22:31.227

我对 Struts2 不熟悉，但似乎 DisplayTag 在任何范围内都找不到您的 countryList。

我没有看到您将 countryList 放入 from 或 request 中。如果我不正确，您可能需要指定表单名称，例如 `<display:table list="${yourStrutsFormName.countryList}" ...`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-23T07:16:26.197

您需要使 DisplayTag 可以使用“countryList”，例如通过执行以下操作：

```
   request.setAttribute("countryList", countryList);

```

在你的行动中（除非有更聪明的 Struts2 方法来做到这一点）。我认为您可以通过实现[ServletRequestAware来掌握您的操作中的请求](http://struts.apache.org/2.0.6/struts2-core/apidocs/org/apache/struts2/interceptor/ServletRequestAware.html)

您还需要确保您的 Country 类具有 id 和 name 属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-07-01T11:05:24.143

使用以下代码。而不是列表属性使用名称属性。

```
<display:table name="countryList" requestURI="CountryAllAction" pagesize="3">
 <display:column property="id" title="ID" />
 <display:column property="name" />
</display:table> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-08-25T06:56:49.687

你不需要做任何事情，只需在显示标签名称中使用列表变量，即

```
<display:table name="yourListnameinaction">

</display> 
```

# php - PHP IDE with vi key bindings

> ID：777200
> 
> 赞同：7
> 
> 时间：2009-04-22T13:26:01.590
> 
> 标签：php, vim, ide

At the moment I'm using eclipse with viplugin. I also know about netbeans and its vi plugin. I find both of these IDEs don't really fit my tastes though. Too slow, bad remote editing support. I don't really have time at the moment to set up and try a vim based ide either.

So, what other PHP IDE is available that supports vi key bindings? I'm willing to pay for a commercial one if necessary.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-22T14:36:20.407

我个人将[netbeans](http://www.netbeans.org/downloads/index.html)与[jvi 插件](http://jvi.sourceforge.net/)一起使用。这个 vi 插件的 vi 仿真近乎完美，此外，您还获得了非常出色（且增长迅速）的 Netbeans Ide。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-22T14:24:20.170

我也很好奇为什么 VIM 不适合你。如果你有理由排除它，那很公平 - 但如果没有，那么我鼓励你再考虑一下。

我是一名 PHP 程序员，我目前使用 VIM 作为我的 IDE。

*   快（非常！）
*   VI 键绑定为标准配置，无需设置
*   远程文件编辑的各种选项

是的，你仍然可以获得全能补全、文件浏览器、智能自动缩进、跨平台等等。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2010-12-29T12:37:56.980

我相信 JetBrains 的 PHPStorm（付费）有一个插件可以让编辑器模拟 Vim。该 IDE 构建在许多 JetBrain IDE（如 IntelliJ IDEA、WebStorm、PyCharm、RubyMine）的通用基础之上，并且在它们之间共享插件。

此外，我希望 IDE 非常好，因为我有他们的一些产品，而且我对它们非常满意（JetBrains 做的很好）。
我不再做 PHP，所以不能谈论 PHPStorm 本身，但如果你负担得起的话，我建议你试一试。

[http://www.jetbrains.com/phpstorm/](http://www.jetbrains.com/phpstorm/)

[http://plugins.intellij.net/plugin/?webide&id=164](http://plugins.intellij.net/plugin/?webide&id=164)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-22T13:44:32.073

查看来自[ActiveState的](http://www.activestate.com/)[Komodo Edit](http://www.activestate.com/komodo-edit)（免费）。还有[Komodo IDE](http://www.activestate.com/komodo-ide)，但价格约为 250 美元。它支持一堆动态语言（JavaScript、Perl、PHP、Python 等）并具有 Vi 和 Emacs 键绑定。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-22T13:39:49.950

Visual Studio 有一个可用的 vi 模拟器 ( [http://www.viemu.com](http://www.viemu.com) )。

不过，我不确定 Visual Studio 作为 PHP 的 IDE 效果如何。但总的来说，它是一个很好的 IDE。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-04-20T12:41:56.767

你可以试试[vimmate](http://vimmate.rubyforge.org/)。我今天要去。

# ajax - Assert that no values are selected from dropdown list with selenium IDE

> ID：777204
> 
> 赞同：1
> 
> 时间：2009-04-22T13:27:16.873
> 
> 标签：ajax, selenium

I have this scenario: simple `HTML` form that is being processed with Ajax with clear (reset that form) button. I want to test clear function, hence the question: What is the right way to check that no values are selected from `drop-down` list with Selenium IDE?

I've tried `assertSelectedValue` command but didn't find a way to specify the unselected value. So I switched to `assertValue` command which works smooth with input fields and checkboxes. But is it right to use it for dropdown lists? Even though test passes with specified `dropdown` list id as a target and blank field as a value, I still can't get rid of a feeling something is wrong.

Any clarification is much appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-18T11:56:18.960

可能有点迟了，但是通常在选择选项时选择了一个属性=“选择”的属性。这在使用多选组合框时尤其适用，其中也无法选择任何选项。

因此，要测试是否未选择任何选项，请执行以下操作：

```
verifyElementNotPresent   
xpath=//select[@id="xxx"]/option[@selected="selected"] 
```

如果未选择任何选项，则输出为真，否则为假。

对于报告，您可以使用`storeElementNotPresent`. 代替`verifyElementNotPresent`，您也可以使用`assertElementNotPresent`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-02-01T20:14:55.157

晚了几个月，但如果其他人需要这个：

```
assertNotSomethingSelected | "locator" | | 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-08-23T16:16:01.043

另一个可能的答案。

您有以下代码片段：

```
<选择>
  <option value="0"></option>
  <option value="1">沃尔沃</option>
  <option value="2">萨博</option>
  <option value="3">奔驰</option>
  <option value="4">奥迪</option>
</选择>

```

并且您想检查汽车的名称而不是选项的值。

你会想要使用：

```
断言选择标签 | “定位器” | | 

```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-09-03T13:19:11.183

好像我迟到了几个月，但如果你还在考虑这个：

我不确定您的下拉列表中的代码是哪个。但是任何 html 下拉菜单总是选择一个值。

例如这个html：

```
<select>
  <option>Please select a value</option>
  <option>Volvo</option>
  <option>Saab</option>
  <option>Mercedes</option>
  <option>Audi</option>
</select> 
```

你的测试将是：

```
assertSelectedValue | "locator" | Please select a value | 
```

如果您的选择有一个空的第一个选项，您可以将最后一列留空：

```
<select>
  <option></option>
  <option>Volvo</option>
  <option>Saab</option>
  <option>Mercedes</option>
  <option>Audi</option>
</select> 
```

你的测试将是：

```
assertSelectedValue | "locator" |  | 
```

# php - Zend 框架中的日历

> ID：777206
> 
> 赞同：1
> 
> 时间：2009-04-22T13:27:35.657
> 
> 标签：php, mysql, zend-framework

我希望使用 Zend 框架创建一个自定义日历，我希望它能够列出未来几年一个月中的所有日子，然后如果有事件，则在日期上有不同的 bg 颜色。然而，我首先努力创建它，因为它需要进入布局视图，而不是一个动作，那么逻辑在哪里呢？我也不清楚 mkdate() 的逻辑如何工作。

有人可以直接指出我吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-29T13:34:49.413

这是一个使用 Zend_Date 和 Zend_Locale 的简单 Calendar 类，您可以将其用作起点：

[www.arietis-software.com/index.php/2009/05/26/a-php-calendar-class-based-on-zend_date/](http://www.arietis-software.com/index.php/2009/05/26/a-php-calendar-class-based-on-zend_date/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-29T16:32:18.297

我已经创建并嵌入了一个日历，类似于您所描述的原因。我的方法是将日历实现为[视图助手](http://framework.zend.com/manual/en/zend.view.helpers.html#zend.view.helpers.custom)。

助手被调用`My_View_Helper_Calendar`并且必须包含一个名为的公共方法`calendar`，我返回了助手的一个实例，如下所示：

```
public function calendar()
{
    // Calls to private methods here
    return $this;
} 
```

如前所述，我在视图助手中设置了一些私有方法来构建日历，并有另一个名为的公共方法`toHtml`将日历呈现为 HTML。

这样，从视图文件的上下文中调用帮助程序就像这样简单：

```
<?= $this->calendar()->toHtml(); ?> 
```

希望这可以帮助您走上正轨。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-09-14T15:29:38.880

我遇到了类似的问题，所以我为 Zend 框架创建了一个日历。它使用 Zend_Date 和 Zend_Locale 以及一个视图脚本进行渲染。更多信息可以在[http://www.spiffyjr.me找到](http://www.spiffyjr.me)

# .net - 如何使用删除按钮从 datagridview 中删除行？

> ID：777208
> 
> 赞同：3
> 
> 时间：2009-04-22T13:27:57.513
> 
> 标签：.net, winforms, datagridview

我有一个带有 BindingSource 的 DataGridView，将它绑定到一个 DataTable。我在我的表单上放了一个删除按钮，我希望它在单击时删除当前选定的行，如下所示：

```
 if (dgvResourceSettings.CurrentRow != null && !dgvResourceSettings.CurrentRow.IsNewRow)
    {
        bindingSource.RemoveCurrent();
    } 
```

问题是新行在我的数据网格视图上可见。如果用户选择该行，然后单击“删除”按钮，则会删除最后一个数据行，即新行上方的数据行。这样做的原因是当 datagridview 失去焦点时，它会将当前行更改为最后一个数据行（如果当前行是新行）。我可以通过简单地关闭 datagridview 来验证这一点。

所以我想知道处理这个的正常方法是什么？我知道用户可以只选择行并按 DEL 键，但我也想给他们一个删除按钮。

谢谢。

更新：从答案/评论看来，这种行为是正常的，所以很难有一个删除按钮和新行。我选择删除新行并使用添加和删除按钮。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-22T13:35:02.957

我有一个删除按钮列，`DataGrid`每行都有一个按钮，将其`Tag`设置为适当的项目。然后单击处理程序检索标记值并删除该项目。这避免了选择事件等的任何问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-22T13:46:15.753

来源必须是这样的：“当 datagridview 失去焦点时，它会将当前行更改为最后一个数据行”。这不是正常情况，您必须做一些事情（keybd 事件？）才能实现。

我在网格下制作了删除按钮，它们运行良好。

**编辑：**经过澄清，这是关于“新行”的特殊地位，它是一种虚拟的。我有点明白这背后的原因，假设离开网格时选择没有移回。CurrentRow 将为空。在您的情况下，这可以，但通常不会。

一个想法：跟踪当前属性（BindingSource）并在没有当前行的情况下禁用删除按钮。检查当新行（一半）填充时它是如何工作的。

否则，杰夫的想法看起来也不错。或查看 BFree[对此问题](https://stackoverflow.com/questions/768170/datagridview-repeatedly-recreating-columns/768219#768219)的回答。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-24T11:01:45.197

解决方案是使用“SelectedRows”-Property：

```
if (this.dataGridView1.SelectedRows.Count > 0)
  {
    foreach (DataGridViewRow dgvrCurrent in dataGridView1.SelectedRows)
  {
    if (dgvrCurrent == dataGridView1.CurrentRow)
      {
        dataGridView1.CurrentCell = null;
      }

    // Delete Row Here
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-24T10:39:53.317

我对 DataGridView 所做的其中一件事是将数据库中的 ID 列包含在隐藏列中。我在 datagridview 中还有一个 Button 列，如果单击该按钮，它会获取该行的 RowID 并将其发送到数据库类。

# sql-server - SQL全文搜索不起作用？

> ID：777217
> 
> 赞同：0
> 
> 时间：2009-04-22T13:29:50.970
> 
> 标签：sql-server, full-text-search

当我执行以下 sql 时，没有任何反应：

```
select * from docs
where freetext(*, 'my search string') 
```

我知道“我的搜索字符串”在表格的一个字段中。

表格文档已添加到我的目录中。要搜索的字段包含 html 内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-22T13:34:38.807

确保您的目录是最新的。必须使用增量更新或完全填充来更新全文目录。SQL Server 2005 也有自动更新目录，但默认情况下它们没有设置为这个，这对性能有严重的影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-22T13:38:52.430

您是否为全文搜索启用了数据库表/列？

请参阅[有关 freetect 的文章中的示例，包括有关如何启用全文搜索的示例](http://www.sitepoint.com/blogs/2006/12/06/sql-server-full-text-search-protips-part-2-contains-vs-freetext/)

# .net - 窗口滑入和滑出桌面

> ID：777229
> 
> 赞同：0
> 
> 时间：2009-04-22T13:34:11.257
> 
> 标签：.net, winforms

使用 .NET（如果我必须使用 pInvoke 或托管 C++，那也很好），我正在尝试创建一个可以停靠或对齐到桌面右侧的窗口（就像小工具区域一样的矩形条，但是一个真正的窗口）。

其次，我想要一个类似图钉的东西，它可以让窗口滑入和滑出（就像 VS 中的 Windows 一样）但在桌面上。

关于如何开始的任何指示？这个问题有多复杂？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-22T13:43:42.200

请在此处参考此问题： [如何使我的 Windows 窗体应用程序对齐屏幕边缘？](https://stackoverflow.com/questions/589268/how-to-make-my-windows-form-app-snap-to-screen-edges)

至于图钉，应该直接将按钮放在窗口被卡到边缘的情况下出现的其中一个角落。

滑动可以通过监听mouser over、mouse out 事件来实现。启动计时器并为窗口设置动画。

一点都不难：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-22T13:42:36.277

在非常高的级别上，您需要做的就是操纵窗口的位置和宽度。

对于停靠：当有人开始拖动窗口时，如果 Location.X 接近于零，将其设置为零并停止拖动。

对于图钉，当他们单击按钮打开或关闭窗口时，操作窗口的宽度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-22T13:56:44.807

刚刚发现这个 [http://msdn.microsoft.com/en-us/library/bb776821.aspx](http://msdn.microsoft.com/en-us/library/bb776821.aspx) 看起来还有很多工作，但可能是获得我想要的效果的正确方法谢谢大家

# c# - 在 F# 代码中使用 C# 中定义的扩展方法

> ID：777247
> 
> 赞同：12
> 
> 时间：2009-04-22T13:40:07.950
> 
> 标签：c#, f#, extension-methods

我为 C# 库中的各种类定义了一系列扩展方法。我目前正在编写一些 F# 代码，而不是重写该代码，我只想在我的 F# 代码中使用我现有的扩展方法。

我添加了对库的引用并使用 open 语句导入命名空间，但扩展方法不会出现在 F# 中

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-04-22T13:41:23.703

### 更新：

在当前版本的 F# 中，您可以简单地通过添加来使用扩展方法

```
open TheNamespaceOfExtensionMethod 
```

到您的源文件（就像您在 C# 中使用`using`指令一样）并简单地调用扩展方法，就好像它是一个普通的实例方法一样。

顺便说一句，您总是可以像普通静态方法一样直接调用它们，并将对象引用作为第一个参数传递，而不需要任何指令。扩展方法只是一个在底层装饰的静态方法`ExtensionAttribute`。

### 原始答案（在 F# 2010 beta 之前；不再正确，正如 Dykam 指出的那样）：

我不认为 F# 支持扩展方法。您始终可以像普通静态方法一样直接调用它们，并将对象引用作为第一个参数传递。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-04-23T12:51:13.193

F# 的下一个版本将支持能够“导入”C#/VB 扩展方法。

也可以看看

[C# 中的 F# 扩展方法](https://stackoverflow.com/questions/702256/f-extensions-in-c)

有关该主题的更多详细信息。

# java - 如何使用java程序将命名空间添加到xml文件

> ID：777250
> 
> 赞同：1
> 
> 时间：2009-04-22T13:40:17.687
> 
> 标签：java, xml

我想使用 java 程序将命名空间添加到 xml 文件。那么如何使用java将命名空间添加到xml文件

谢谢巴皮

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T21:11:09.437

惠特JDom

在根元素中向 xmlns 添加一个 URI

```
Namespace ns = Namespace.getNamespace("yourURI");
Element root = new Element("someName", ns); 
```

添加任何命名空间

```
Namespace ns = Namespace.getNamespace("someName", "someValue");
Element yourElement = new Element("someName", ns);
root.addChild(yourElement);
Document doc = new Document(root); 
```

# sql-server - QA 机器的 SQL Server 许可

> ID：777258
> 
> 赞同：-1
> 
> 时间：2009-04-22T13:42:20.037
> 
> 标签：sql-server, ssis, licensing

我目前正在研究一些基础架构成本计算，并且在为 QA 服务器的 SQL Server 许可找到最佳解决方案时遇到了一些麻烦。

我们正在使用 SSIS 开发 ETL 解决方案。我们的解决方案本身没有数据库，但使用 SSIS 对运行中的文本文件运行验证和转换。因为我们需要测试人员能够单独进行测试（即每个人都需要在自己的服务器上进行测试），所以我们希望设置虚拟机，并将包安装到他们自己的 SQL Server 实例中。

我遇到的问题是这种情况似乎没有一个好的许可解决方案。开发人员可以通过他们的 MSDN 许可证使用开发人员版，但对于 QA，看起来我们实际上需要完整的企业版许可证（我们正在使用标准中不可用的 SSIS 功能）。

是否有我缺少的 SKU 可以解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-22T14:07:12.940

AFAIK，只要它是内部的，您就可以将开发版用于 QA，并且不能从 Internet 访问数据库，而只能从 Intranet 访问数据库

来自[MS 网站](http://www.microsoft.com/sqlserver/2005/en/us/editions.aspx)

> 开发人员版旨在使开发人员能够在 SQL Server 2005 之上构建任何类型的应用程序。它包括企业版（win32、x64、IA64）的所有功能，但具有禁止生产部署的特殊**开发**和 **测试许可协议。**

当您说“我们正在使用标准版中没有的 SSIS 功能”时，您是什么意思？

# c - 如何知道线程内存使用情况？

> ID：777259
> 
> 赞同：3
> 
> 时间：2009-04-22T13:42:29.990
> 
> 标签：c, pthreads, memory-management

*是否有可能知道给定的phtread*线程正在使用多少内存？我对类似 VmRSS 的信息感兴趣。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-22T13:51:23.790

每个线程消耗一个固定大小的堆栈，并在线程启动时创建。它通常是 512 K / 1M 但它只是启动时的虚拟大小。

但是，对于动态分配的数据 (malloc)，它是进程范围的信息，而不是每个线程的信息。请注意，一些替代 malloc 实现（如 tcmalloc）可以提供更高级的统计信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-22T15:13:50.270

此外，操作系统本身可能会在单独的线程中释放内存，以加快对 free() 函数的调用，从而使收集正确的统计数据更加复杂

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-22T15:32:30.957

根据我自己使用 pthread 库的经验，如果使用默认属性创建线程，则其堆栈大小为 10 MB。它可能是特定于平台的。

如果您对减小堆栈大小感兴趣，可以使用 pthread_attr_setstacksize()。为了估计堆栈大小的正确值，您可以使用名为“checkstack.pl”的脚本。它包含在 Linux 内核源代码中（在“脚本”目录下）。

另见[http://www.kegel.com/stackcheck](http://www.kegel.com/stackcheck)

# c++ - 在发布版本中使用 assert() 时避免未使用的变量警告

> ID：777261
> 
> 赞同：69
> 
> 时间：2009-04-22T13:43:02.577
> 
> 标签：c++, warnings, assertions

有时，局部变量仅用于在 assert() 中检查它，就像这样 -

```
int Result = Func();
assert( Result == 1 ); 
```

在 Release 构建中编译代码时，assert()s 通常被禁用，因此此代码可能会产生关于 Result 已设置但从未读取的警告。

一个可能的解决方法是 -

```
int Result = Func();
if ( Result == 1 )
{
    assert( 0 );
} 
```

但是它需要太多的输入，看起来并不容易，并且会导致总是检查条件（是的，编译器可能会优化检查，但仍然如此）。

我正在寻找一种替代方式来表达这个assert()，这种方式不会引起警告，但仍然易于使用并避免改变assert() 的语义。

（在此代码区域中使用#pragma 禁用警告不是一种选择，降低警告级别以使其消失也不是一种选择......）。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2009-04-22T14:02:20.923

我们使用宏来明确指示何时未使用某些内容：

```
#define _unused(x) ((void)(x)) 
```

然后在您的示例中，您将拥有：

```
int Result = Func();
assert( Result == 1 );
_unused( Result ); // make production build happy 
```

这样（a）生产构建成功，并且（b）在代码中很明显该变量是*设计*未使用的，而不是只是被遗忘了。这在不使用函数的参数时特别有用。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2009-06-12T09:25:23.900

我无法给出比这更好的答案，解决这个问题，还有更多：

[愚蠢的 C++ 技巧：断言中的冒险](http://web.archive.org/web/20201129200055/http://cnicholson.net/2009/02/stupid-c-tricks-adventures-in-assert/)

```
#ifdef NDEBUG
#define ASSERT(x) do { (void)sizeof(x);} while (0)
#else
#include <assert.h>
#define ASSERT(x) assert(x)
#endif 
```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2018-12-20T08:39:37.387

从 C++17 开始，变量可以用属性修饰。

```
[[maybe_unused]] int Result = Func();
assert( Result == 1 ); 
```

有关详细信息，请参阅[https://en.cppreference.com/w/cpp/language/attributes/maybe_unused](https://en.cppreference.com/w/cpp/language/attributes/maybe_unused)。

这比`(void)Result`技巧要好，因为您直接装饰变量声明，而不是事后添加一些东西。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2009-04-22T15:53:18.770

您可以创建另一个宏来避免使用临时变量：

```
#ifndef NDEBUG
#define Verify(x) assert(x)
#else
#define Verify(x) ((void)(x))
#endif

// asserts that Func()==1 in debug mode, or calls Func() and ignores return
// value in release mode (any braindead compiler can optimize away the comparison
// whose result isn't used, and the cast to void suppresses the warning)
Verify(Func() == 1); 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2009-04-22T14:25:59.870

```
int Result = Func();
assert( Result == 1 ); 
```

这种情况意味着在发布模式下，你真的想要：

```
Func(); 
```

但是`Func`是非无效的，即它返回一个结果，即它是一个**查询**。

据推测，除了返回结果之外，还`Func`修改了一些东西（否则，为什么要调用它而不使用它的结果？），即它是一个**命令**。

根据**命令-查询分离原则**（1），`Func`不应该同时是一个命令和一个查询。换句话说，查询不应该有副作用，命令的“结果”应该由对对象状态的可用查询来表示。

```
Cloth c;
c.Wash(); // Wash is void
assert(c.IsClean()); 
```

优于

```
Cloth c;
bool is_clean = c.Wash(); // Wash returns a bool
assert(is_clean); 
```

前者不会给你任何警告，后者会。

所以，简而言之，我的回答是：不要写这样的代码 :)

**更新 (1)：**您要求提供有关**Command-Query Separation Principle**的参考资料。[维基百科](http://en.wikipedia.org/wiki/Command-Query_Separation)信息量很大。我在Bertrand Meyer的《[面向对象的软件构建》第二版](http://archive.eiffel.com/doc/oosc/page.html)中读到了这种设计技术。

**更新 (2)：** j_random_hacker 评论“OTOH，以前返回值的每个“命令”函数 f() 现在必须设置一些变量 last_call_to_f_succeeded 或类似变量”。这仅适用于在其合约中不承诺任何内容的函数，即可能“成功”或不“成功”的函数，或类似概念。使用**契约式设计**，相关数量的函数将具有**后置条件**，因此在“Empty()”之后，对象将为“IsEmpty()”，在“Encode()”之后，消息字符串将为“IsEncoded()”，其中无需检查。以同样的方式，并且有点对称，您不会在每次调用过程“X()”之前调用特殊函数“IsXFeasible()”；

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-04-22T14:30:40.530

你可以使用：

```
Check( Func() == 1 ); 
```

并根据需要实现您的 Check( bool ) 函数。它可以使用断言，或者抛出特定异常，写入日志文件或控制台，在调试和发布中具有不同的实现，或者所有的组合。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-10-10T16:07:26.430

使用 C++17，我们可以做到：

```
[[maybe_unused]] int Result = Func(); 
```

尽管与断言替换相比，它涉及一些额外的输入。看到[这个答案](https://stackoverflow.com/questions/1486904/how-do-i-best-silence-a-warning-about-unused-variables?rq=1)。

注意：添加这个是因为它是“c++ 断言未使用的变量”的第一个谷歌点击。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-04-22T13:56:59.267

您应该在返回值之前移动函数内部的断言。您知道返回值不是未引用的局部变量。

另外，无论如何，在函数内部更有意义，因为它创建了一个自包含单元，该单元具有其 OWN 前置和后置条件。

很有可能，如果函数返回一个值，那么无论如何您都应该在发布模式下对该返回值进行某种错误检查。所以它不应该是一个未引用的变量。

**编辑，但在这种情况下，后置条件应该是 X（见评论）：**

我强烈不同意这一点，应该能够从输入参数中确定后置条件，如果它是成员函数，则可以确定任何对象状态。如果一个全局变量修改了函数的输出，那么函数应该被重构。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-04-23T11:44:51.993

大多数答案建议`static_cast<void>(expression)`在构建中使用技巧`Release`来抑制警告，但如果您的意图是真正进行检查，这实际上是次优的`Debug`。相关断言宏的目标是：

1.  `Debug`在模式下执行检查
2.  `Release`在模式下什么都不做
3.  在所有情况下都不发出警告

问题是void-cast方法无法达到第二个目标。虽然没有警告，但您传递给断言宏的表达式仍将被*评估*。例如，如果您只是进行变量检查，那可能没什么大不了的。但是如果你在你的断言检查中调用一些函数`ASSERT(fetchSomeData() == data);`（这在我的经验中很常见）怎么办？该`fetchSomeData()`函数仍将被调用。它可能快速而简单，也可能不是。

您真正需要的不仅是警告抑制，而且可能更重要的是 -**不评估**仅调试检查表达式。这可以通过我从专门的[Assert](https://github.com/gpakosz/Assert)库中获取的一个简单技巧来实现：

```
void myAssertion(bool checkSuccessful)
{
   if (!checkSuccessful)
    {
      // debug break, log or what not
    }
}

#define DONT_EVALUATE(expression)                                    \
   {                                                                 \
      true ? static_cast<void>(0) : static_cast<void>((expression)); \
   }

#ifdef DEBUG
#  define ASSERT(expression) myAssertion((expression))
#else
#  define ASSERT(expression) DONT_EVALUATE((expression))
#endif // DEBUG

int main()
{
  int a = 0;
  ASSERT(a == 1);
  ASSERT(performAHeavyVerification());

  return 0;
} 
```

所有的魔法都在`DONT_EVALUATE`宏中。很明显，至少*从逻辑上讲*，在它内部永远不需要对表达式的求值。为了加强这一点，C++ 标准保证只评估条件运算符的一个分支。这是报价：

> 5.16 条件运算符 [expr.cond]
> 
> *逻辑或表达式？表达式：赋值表达式*
> 
> 条件表达式从右到左分组。第一个表达式根据上下文转换为布尔值。它被评估，如果为真，则条件表达式的结果是第二个表达式的值，否则是第三个表达式的值。仅评估这些表达式之一。

我已经在 GCC 4.9.0、clang 3.8.0、VS2013 Update 4、VS2015 Update 4 中测试了这种方法，警告级别最苛刻。在所有情况下都没有警告，并且检查表达式永远不会在`Release`构建中评估（实际上整个事情已经完全优化了）。请记住，使用这种方法，如果将具有副作用的表达式放在断言宏中，您将很快遇到麻烦，尽管这首先是一种非常糟糕的做法。

此外，我希望静态分析器可能会使用这种方法警告“表达式的结果始终是恒定的”（或类似的东西）。我已经使用 clang、VS2013、VS2015 静态分析工具对此进行了测试，并且没有收到此类警告。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2017-02-04T13:34:35.383

最简单的事情是仅在断言存在时才声明/分配这些变量。*如果断言不会*受到影响，则该`NDEBUG`宏是专门定义的（我认为这样做是因为这是一种禁用调试的便捷方法），因此@Jardel 答案的调整副本应该可以工作（参见@AdamPeterson 的评论）回答）：*`-DNDEBUG`*

 *```
#ifndef NDEBUG
int Result =
#endif
Func();
assert(Result == 1); 
```

或者，如果这不符合您的口味，则可以使用各种变体，例如：

```
#ifndef NDEBUG
int Result = Func();
assert(Result == 1);
#else
Func();
#endif 
```

一般来说，对于这些东西，要小心，不同的翻译单元不可能用不同的`NDEBUG`宏状态来构建——尤其是 re. 公共头文件中的断言或其他条件内容。危险在于，您或您的库的用户可能会意外地实例化与在库的已编译部分中使用的定义不同的内联函数定义，从而悄悄地违反[一个定义规则](https://en.wikipedia.org/wiki/One_Definition_Rule)并使运行时行为未定义。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-04-22T13:50:43.870

这是对断言的错误使用，恕我直言。Assert 并不意味着作为错误报告工具，它意味着断言先决条件。如果 Result 没有在其他地方使用，则它不是前提条件。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2012-08-27T22:55:13.583

当然，您使用宏来控制您的断言定义，例如“_ASSERT”。所以，你可以这样做：

```
#ifdef _ASSERT 
int Result =
#endif /*_ASSERT */
Func();
assert(Result == 1); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-04-22T14:12:42.943

```
int Result = Func();
assert( Result == 1 );
Result; 
```

这将使编译器停止抱怨未使用 Result。

但是您应该考虑使用在运行时做一些有用的事情的 assert 版本，例如将描述性错误记录到可以从生产环境中检索的文件中。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-04-22T15:42:54.210

我会使用以下内容：

```
#ifdef _DEBUG
#define ASSERT(FUNC, CHECK) assert(FUNC == CHECK)
#else
#define ASSERT(FUNC, CHECK)
#endif

...

ASSERT(Func(), 1); 
```

这样，对于发布构建，编译器甚至不需要为断言生成任何代码。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2014-10-05T19:41:19.847

如果此代码在函数内部，则执行并返回结果：

```
bool bigPicture() {

   //Check the results
   bool success = 1 != Func();
   assert(success == NO, "Bad times");

   //Success is given, so...
   actOnIt();

   //and
   return success;
} 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2018-02-19T03:36:38.113

```
// Value is always computed.  We also call assert(value) if assertions are
// enabled.  Value is discarded either way.  You do not get a warning either
// way.  This is useful when (a) a function has a side effect (b) the function
// returns true on success, and (c) failure seems unlikely, but we still want
// to check sometimes.
template < class T >
void assertTrue(T const &value)
{
  assert(value);
}

template < class T >
void assertFalse(T const &value)
{ 
  assert(!value);
} 
```

# wpf - 这个图像平移算法有什么问题？

> ID：777262
> 
> 赞同：0
> 
> 时间：2009-04-22T13:43:38.253
> 
> 标签：wpf, image, zooming, pan

针对[这个](https://stackoverflow.com/questions/741956/wpf-pan-zoom-image)关于 WPF 中缩放和平移的问题，我建议使用 ScaleTransform 并在 MouseMove 事件中更新 RenderTransform 原点。这可行，但我对平移运动与鼠标不完全匹配的事实不满意。我可以看到这个算法的问题是什么，但正确的实现仍然让我望而却步。

```
private void image_MouseMove(object sender, MouseEventArgs e)
{
    if (image.IsMouseCaptured)
    {
        Vector v = start - e.GetPosition(image);
        // this calculates the deltas relative to the original size of the image
        // but does not take into account the transformed size, but transforming the
        // size like image.ActualWidth * scaleTransform.ScaleX does not help
        double deltax = v.X / image.ActualWidth;
        double deltay = v.Y / image.ActualHeight;

        image.RenderTransformOrigin = new Point(orgin.X + deltax, orgin.Y + deltay);
    }
} 
```

关于如何使这种方法起作用的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-22T16:17:27.043

很奇怪，它对你不起作用。我正在使用类似的方式进行平移。但我**确实**将增量除以 scaleTransform.ScaleX。

另一个区别是我向 TransformGroup 添加了一个 TranslateTransform 并修改了平移的 X 和 Y，而不是使用 RenderTransformOrigin。

# wcf - 验证连接到 Web 服务的客户端

> ID：777266
> 
> 赞同：0
> 
> 时间：2009-04-22T13:45:17.830
> 
> 标签：wcf, web-services

我有一个 WCF 网络服务。此 Web 服务应仅允许某些客户端应用程序（使用 Silverlight、Flex、ClickOnce 等技术构建）执行其功能。为了实现这一点，我使用以下代码开始了每个公开可见的方法：

if (IsClientValid(...) == false) 返回；

我的问题是，我应该检查什么？我考虑过将唯一标识符作为字符串参数传递，然后将该参数传递给 IsClientValid 方法。但是，我知道有人可以使用 Fiddler 之类的工具来嗅出该参数值并将其用于自己的应用程序中。如何唯一标识我的客户端应用程序，以便只有它们才能使用我的 WCF Web 服务？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-22T15:12:30.443

根据你想走多远，你可以做很多事情。在我开发的一个应用程序中，我们做了以下事情：

*   消息安全 - 要加密您的消息，客户端必须提供凭据 (userNameAuthentication)，服务器提供 serviceCertificate 用于消息加密。

*   自定义加密的 Soap 标头用于在初始登录后为每条消息提供客户详细信息。此标头使用从客户端应用程序获取的值和在初始调用中从服务器检索的值的组合进行加密。

*   所有客户端传出消息都附有加密的标头，服务器在收到该标头后提取/解密，并且基础服务验证是否存在所需的值。

*   除此之外，一组加密的标头存储在服务器端，以防止使用嗅探的标头进行重放攻击。

如果您认为可以使用其中的一些，我可以提供其他资源/链接来说明如何实现其中的一些。

编辑：假设客户端应用程序在您的控制之下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-22T17:25:15.803

查看*客户端证书身份验证*。基本思想是除非客户端发送有效证书，否则 https 连接将失败，您可以在其中确定什么是有效的。

# sql - 是否有理由不在 SQL 中将布尔值存储为位数据类型？

> ID：777269
> 
> 赞同：35
> 
> 时间：2009-04-22T13:46:03.303
> 
> 标签：sql, tsql

是否有理由不在 SQL 中将布尔值存储为没有 NULL 的位数据类型？我看到它们通常存储为没有约束的整数，以将值限制为 0 和 1，以及作为带有 T/F、True/False、yes/no 等内容的字符串，同样没有约束。将它们存储为位而不用担心额外的约束不是更好吗？我在这里想念什么？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2009-04-22T13:49:54.917

我总是坚持使用最小的数据类型来存储它。

*   SQLServer: 位
*   Oracle：NUMBER(1)（或 PL/SQL 中的 BOOLEAN）
*   MySQL：TINYINT（iirc BOOLEAN 自动映射到此）

编辑：Oracle 的 BOOLEAN 只是 PL/SQL，而不是表定义。更新答案以反映这一点。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2009-04-22T13:50:11.407

通常会发生的情况是，有人想在是和否中添加可能，如果你有一点，那么现在你必须将所有代码更改为 tinyint

如果你一开始就有tinyint，那么你不会......相信我这比你想象的要多

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-04-22T13:51:11.123

> 我看到它们通常存储为没有约束的整数，以将值限制为 0 和 1，以及作为带有 T/F、True/False、yes/no 等内容的字符串，同样没有约束。将它们存储为位而不用担心额外的约束不是更好吗？

是的！

> 我在这里想念什么？

实际上应该是“我在这里没有错过什么？” 答案是：**常识**。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-04-22T18:51:34.520

不这样做的一些原因包括：

并非所有数据库都有位数据类型，因此您可以使用 int 来使用不同的后端

在某些数据库中，您不能索引位字段。

通常你所拥有的并不是真正的真/假，是/否，没有其他可能性。例如，您可能有一个状态位字段，表示打开或关闭之类的东西。但后来你意识到你也需要取消作为一种状态。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-04-22T13:50:19.393

当我想要数据库中的布尔值时，我总是使用位数据类型。在 SQL 中，它们可以为 NULL。但是在运行程序时，您必须考虑 bool（例如在 C# 中）是一种值类型，在这种情况下不能为 NULL。您必须与 System.DBNull 值进行比较。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-04-22T13:51:00.483

我们总是将数据存储为一点点，它很小，更重要的是，它就是为这种情况而设计的。

我们曾经有过最终用户将直接使用数据的时候，对他们来说，是/否或是/否更具可读性。在这种情况下，我们只是创建了一个反映更友好数据显示的视图。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2009-04-22T13:51:41.230

BIT 是通常用于存储 BOOLEAN 值的数据类型。仅仅是因为如果 BIT 为 1 则为真，为 0 则为假。就是这么简单。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2010-01-07T09:36:40.290

如果您有两个以上的状态，请使用 Enum。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-04-22T13:48:53.907

一个原因是人们不了解位或认为 y/n 更易于格式化。另一个原因是有时你会想：嗯，也许随着时间的推移，这将不仅仅是一个布尔字段。你把它做成 int 以防万一。

你没有错过任何东西:)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-04-22T14:07:09.367

我认为第三种规范化形式会声明您应该有一个存储值 True 和 False 的表，并引用它。确保你对你的约会也这样做！

但是谁完全坚持3NF呢？;)

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2009-04-22T14:33:23.033

我用的有点多。但有时我希望能够返回 false - 或许多 true 值（如错误消息）。因此，如果我使用 int 而不是 boolean，我可以执行以下操作：

0 = 错误 1 ​​= 密码不正确 2 = 用户名不存在。3 = 帐户被锁定 - 多次尝试失败。4 = 帐户已禁用。

等等。

# ruby-on-rails - 在 rails remote_function 的 URL 中转义 HTML 实体

> ID：777271
> 
> 赞同：1
> 
> 时间：2009-04-22T13:46:09.717
> 
> 标签：ruby-on-rails, ruby, ajax

使用以下代码动态加载我页面中的某些内容：

```
javascript_tag( remote_function( :update => agenda_dom_id, :url => agenda_items_url(options), :method => :get ) ) 
```

当它在浏览器中输出时，它是这样的：

```
new Ajax.Updater('agenda', 'http://localhost:3000/agenda_items?company=43841&amp;history=true', {asynchronous:true, evalScripts:true, method:'get'}) 
```

URL 中的 & 字符被替换为`&amp;`，因此请求的第二个参数被丢弃。

我进行了不同的测试，看起来 Rails 在检测到代码在脚本标记中时就尝试进行 HTML 实体转换。并且尝试硬编码链接或 javascript 标签并没有改变任何东西。

以前有人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-10-19T13:36:13.730

伙计们，这只是 url_for 在视图中的默认行为......来吧，传递 :escape => false 以及 URL 参数并享受未转义的东西:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-22T14:16:59.517

所有 javascript 字符都被转义（参见 remote_function 的源代码）。这有一些后果。但是，在您的情况下，我没有看到任何问题，我有类似的情况可以正常工作。

你能描述一下你遇到的问题吗？

PS。我已经发布了我的灯塔票，因为我有一个需要插入 javascript 的案例：[https ://rails.lighthouseapp.com/projects/8994/tickets/2500-remote_function-does-not-allow-dynamically-generation-of-网址#ticket-2500-2](https://rails.lighthouseapp.com/projects/8994/tickets/2500-remote_function-does-not-allow-dynamically-generation-of-url#ticket-2500-2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-22T14:45:00.167

问题在于生成的 URL：

```
http://localhost:3000/agenda_items?company=43841&amp;history=true 
```

由于`history`& 字符被替换为 ，因此无法正确发送参数`&amp;`。

有趣的是，当我尝试使用 a`link_to_remote`而不是 the时，`remote_link`或者当我`remote_function`直接在页面上（而不是在脚本标签中）输出时，它会按预期工作，并且不会使用其 HTML 实体转义 & 字符。

我在 Rails 2.1.1 和 Firefox 上。也许它已在最新版本的 Rails 中得到修复，但现在切换不是一个选项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-04T23:22:34.693

使用 :with 选项（它必须是一个有效的查询字符串并且不像 :url 那样转义），就像这样

```
url, query_string = agenda_items_url(options).split('?')
javascript_tag( remote_function( :update => agenda_dom_id, :url => url, :with => query_string, :method => :get ) ) 
```

我假设agenda_items_url 是您自己的辅助函数，它输出完整的url 而没有先转义它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-23T10:50:48.270

我在 Rails 2.3.2 上，当 & 被 & 替换时我没有任何问题 & amp;

如果您需要在您的情况下解决此问题，您可以修补 remote_ 函数更新并添加一个 :escape_ url 选项并将其设置为 false。将下面的代码放在你的 rails 环境中的某个地方，它会被加载。

```
module ActionView
class Base
    def remote_function(options)
  javascript_options = options_for_ajax(options)

  update = ''
  if options[:update] && options[:update].is_a?(Hash)
    update  = []
    update << "success:'#{options[:update][:success]}'" if options[:update][:success]
    update << "failure:'#{options[:update][:failure]}'" if options[:update][:failure]
    update  = '{' + update.join(',') + '}'
  elsif options[:update]
    update << "'#{options[:update]}'"
  end

  function = update.empty? ?
    "new Ajax.Request(" :
    "new Ajax.Updater(#{update}, "

  url_options = options[:url]
  url_options = url_options.merge(:escape => false) if url_options.is_a?(Hash)
  function << (options[:escape_url] == false ? "'#{url_for(url_options)}'" : "'#{escape_javascript(url_for(url_options))}'") ## Add this line to the rails core
  function << ", #{javascript_options})"

  function = "#{options[:before]}; #{function}" if options[:before]
  function = "#{function}; #{options[:after]}"  if options[:after]
  function = "if (#{options[:condition]}) { #{function}; }" if options[:condition]
  function = "if (confirm('#{escape_javascript(options[:confirm])}')) { #{function}; }" if options[:confirm]

  return function
end 
end 
```

结尾

# .net - 评估和检测软件质量的工具 (.net)

> ID：777273
> 
> 赞同：2
> 
> 时间：2009-04-22T13:46:25.330
> 
> 标签：.net, build-process, nant

您在构建过程中运行哪些工具/库来评估和维护质量？

作为我的 CI（巡航控制）构建的一部分，我运行：
[Simian](http://www.redhillconsulting.com.au/products/simian/)
[Nunit](http://www.nunit.org/index.php)
[Ncover](http://www.ncover.com/)
[Ndepend](http://www.ndepend.com/)
[FxCop](http://msdn.microsoft.com/en-us/library/bb429476.aspx)
as part of [Nant](http://nant.sourceforge.net/)

我正在寻找工具来检测复杂性、指标等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-22T13:48:58.227

[蚂蚁探查器](http://www.red-gate.com/products/ants_profiler/index.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-22T14:04:29.343

作为常规构建的一部分，我唯一运行的是 Nunit，以及一些简单的调整来处理版本维护。

我的观点是，其他工具*在尝试解决特定问题时*很有用，但你不应该把所有时间都花在担心任意数字、“痛苦区域”等问题上。

不要误会我的意思——我经常使用其他工具（或它们的变体，例如 dotTrace）——但更多的是“按需”（代码覆盖率是我最常用的）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-23T04:29:03.493

我今天刚刚在 SO 上听说了[StyleCop](http://code.msdn.microsoft.com/sourceanalysis)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-23T07:41:04.890

为什么不使用一些[NDepend 的 CQLinq 规则](http://www.ndepend.com/Features.aspx#CQL)来解决质量的所有方面（度量、结构、覆盖范围、演变、副作用、死代码、命名一致性……）。[请参阅此处](http://www.ndepend.com/DefaultRules/webframe.html)提出的大约 200 条默认 CQLinq 规则的列表。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-23T10:01:05.630

[我昨天](http://www.1bot.com/features.html)看到的一个

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-03T18:08:40.523

还有[dotProfiler](http://www.jetbrains.com/profiler/)，您可以在 Visual Studio Team Suite 中使用 buitin metric

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-16T19:27:16.080

上勾拳。

它使用以下内容来分析代码：

*   NUnit 或 MbUnit
*   无盖
*   依赖

UppercuT 使用 NAnt 来构建，它是非常容易使用的构建框架！

[http://code.google.com/p/uppercut/](http://code.google.com/p/uppercut/)

这里有一些很好的解释：[Uppercut](http://ferventcoder.com/category/uppercut.aspx)

# ide - SAS 语言的最佳非 SAS IDE 是什么？

> ID：777280
> 
> 赞同：15
> 
> 时间：2009-04-22T13:47:38.230
> 
> 标签：ide, sas

我正在研究将在 UNIX 下运行的 SAS 代码。理想情况下，IDE 将具有：

*   智能代码格式化（不需要自动完成）。
*   通过 SFTP/SSH/SCP 将代码传输到服务器的能力。
*   能够通过 ssh 和 -e 在服务器上执行代码
*   能够将日志拉回并进行格式化。

想法？

我正在查看用于 SAS 的 MultiEdit Lite（它似乎具有功能，但实际上看起来很糟糕……太糟糕了，它让人分心）。还有其他人吗？Eclipse 可以充当 SAS IDE 吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-07T10:41:22.127

我还没有尝试过，但它看起来像使用 myEclipse 以及来自 anixma 的**[插件 SLink](http://sourceforge.net/project/showfiles.php?group_id=254574&package_id=312831)**，将为列出的所有内容提供支持，包括远程 UNIX 服务器上代码的 SSH 执行以及本地执行（如果你有 sas）。 exe已经安装。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-12-21T21:58:26.707

SlickEdit inc 的 VSick 可以做到这一点——甚至更多。

它不是免费的，但它很强大。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-22T22:47:48.743

如果您使用 emacs（或 XEmacs），那么您可以查看[ESS](http://ess.r-project.org/)。我没有对其进行太多测试，但它可能会满足您的需求。具体见[这里](http://ess.r-project.org/Manual/ess.html#ESS-for-SAS)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-07-22T11:47:47.083

Ultraedit 或 EditPlus。两者都具有出色的 FTP、项目管理和与版本控制的联系。语法高亮和工具创建也在那里，加上优秀的 serah/rep[lace 功能。

# oracle - 将 Informix ESQLC 迁移到 Oracle Pro*C

> ID：777284
> 
> 赞同：1
> 
> 时间：2009-04-22T13:48:21.193
> 
> 标签：oracle, informix, embedded-sql

目前负责将 Informix ESQLC 文件迁移到 Oracle Pro*C 并且有几个问题。首先，我们在嵌入式 ESQLC 代码中使用了很多专有的 Informix 函数，例如`rstrdate()`、`rtoday()`和`rjulmdy()`。

有关如何在 Oracle Pro*C 中转换这些的任何指示？

我正在努力理解的另一件事是 Oracle 日期数据类型。在 Informix 中，对于处理 Informix 表的日期的任何主变量，我们在嵌入式 sql C 代码中使用 long 类型。

但是在 Oracle 中，我的印象是日期的来回通信时间不长，而是 char？或者我们仍然可以将主机变量指定为 long 类型吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-22T19:52:41.363

谷歌搜索“Oracle OCI 日期”会出现诸如 之类的函数`OCIDateTimeFromText()`，`OCIDateSysdate()`并且可能`OCIDateTimeToArray()`对应于您命名的 ESQL/C 函数。有一种`OCIDate`类型可能比 Informix DATE（ESQL/C 中的 int4 或 long）更接近于 ESQL/C `dtime_t`（它可能包括时间组件），但它很可能是您应该在翻译中使用的类型过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-05T14:02:59.913

为了补充以上内容，我创建了一个复制 Informix 专有函数 rtoday() 的方法：

```
 int rtoday(long *today) {
  EXEC SQL BEGIN DECLARE SECTION;
      time_t t;
  EXEC SQL END DECLARE SECTION;

  EXEC SQL WHENEVER SQLERROR DO sql_error("Oracle error\n");
  EXEC SQL CONNECT :"user/pass@dbname";
  EXEC SQL SELECT (new_time(sysdate,'EDT','GMT') - to_date('31-dec-1899','dd-mon-yyyy')) INTO :t FROM DUAL;

  printf( "C   Time = %d\n", time(NULL) );
  printf( "SQL Time = %d\n", t );

  *today=t;
} 
```

# iphone - 为什么我不能设置 UIImageVies 的边界矩形宽度？

> ID：777301
> 
> 赞同：0
> 
> 时间：2009-04-22T13:50:30.313
> 
> 标签：iphone, quartz-graphics

当我尝试这个

```
myUIImageView.bounds.size.width = 50.0f; 
```

然后我收到一个错误：分配中的左值无效

但是当我这样做时，它会编译。虽然这是很多额外的工作

```
CGRect newRect = myUIImageView.bounds;
newRect.size.width = 50.0f;
myUIImageView.bounds = newRect; 
```

虽然编译，但什么都不会发生。我的 UIImageView 的框架是 300 宽，并填充了正好 300 像素宽度的图像。它非常适合。所以现在我想拉伸那个图像（只是为了好玩），所以我必须使边界矩形的宽度更小。让我们说50.0。但不幸的是，图像并没有像预期的那样分层。只是什么都没有发生。在这段代码下面的两行，我移动了图像。这样可行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-22T14:37:51.573

`-[UIView bounds]`返回一个`CGRect`包含视图边界的 x、y、宽度和高度值的新值。更改这个新的值`CGRect`不会有任何效果，GCC 意识到了这一点。

为了更改宽度，您必须从视图中获取边界，将它们存储在某处，更改存储的宽度值`CGRect`并使用通知视图其新边界`-[UIView setBounds:]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-22T13:56:37.053

属性 size 和 orign 是只读的。

bounds 不是只读的。

这就是为什么你可以改变界限，但不能改变大小

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-22T14:11:41.900

这有效（对我来说）；

```
CGRect frame = myUIImageView.frame;
frame.size.width = 50.0;
myUIImageView.frame = frame; 
```

试试那个。。

# xml - 在 XML 中包装任意 XML

> ID：777302
> 
> 赞同：7
> 
> 时间：2009-04-22T13:50:40.907
> 
> 标签：xml, xml-serialization

我需要在包装 XML 文档中嵌入任意（语法上有效的）XML 文档。嵌入的文档被视为纯文本，在解析包装文档时它们不需要是可解析的。

我知道“ [CDATA 技巧](http://eai.ittoolbox.com/groups/technical-functional/seebeyond-l/xml-within-xml-possible-788127)”，但如果内部 XML 文档本身包含 CDATA 段，我就不能使用它，并且我需要能够嵌入*任何*有效的 XML 文档。任何有关完成此操作或解决 CDATA 限制的建议都将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-22T14:02:42.483

您需要正确转义文本。您没有说您使用的是什么语言，但一般来说：您构建一个 DOM，创建一个包含“内部”XML 的 Text 节点，然后序列化该 DOM。序列化程序将为您处理转义。

这里的关键点是**使用序列化**程序来生成输出。不要简单地编写字符串，因为几乎可以保证您生成的东西不是格式良好的 XML。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2010-04-22T05:29:25.063

您可以通过简单地将文档（没有其 <`?xml`声明）添加为某个父级的子级来完成此操作。SOAP 就是这样做的——它有一个`<Body>`元素可以包含任何想要发送的 xml 消息。

SOAP 以这种方式定义 XSD：

```
<xs:element name="Body" type="tns:Body" />
  <xs:complexType name="Body">
    <xs:sequence>
      <xs:any namespace="##any" minOccurs="0" 
          maxOccurs="unbounded" processContents="lax" />
    </xs:sequence>
    <xs:anyAttribute namespace="##any" processContents="lax">
    </xs:anyAttribute>
  </xs:complexType> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-22T14:10:48.703

当您转义内部 CDATA 的结束尖括号时，大多数 XML 解析器不会抱怨您的 XML 格式正确。使用此“解决方法”，您应该能够嵌套多个 CDATA 部分。

就像是：

```
<?xml version="1.0"?>
<SomeData>
<![CDATA[
<SomeMoreData>
<![CDATA[
yeah, this trick rocks! ...
]]&gt;
</SomeMoreData>
]]>
</SomeData> 
```

请注意，内部 CDATA 的结尾 ">" 转义为`&gt;`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-22T15:28:33.230

考虑使用[XInclude](http://en.wikipedia.org/wiki/XInclude)而不是尝试将 XML 文档嵌入到另一个文档中。XInclude parse="text" 属性将强制将 XML 视为文本，而不是标记。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-22T15:40:23.013

一种简单的解决方案是您可以拥有相邻的 CDATA 部分。`<![CDATA[A]]><![CDATA[B]]>`是一样的`<![CDATA[AB]]>`。因此，您可以`<![CDATA[]]]]><![CDATA[>]]>`将`]]>`关闭标签分成两个`CDATA`部分。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-22T14:11:54.787

这不就是[角色实体](http://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references)的用途吗？

# security - 保护 Clickonce 免受 URL 劫持的选项

> ID：777305
> 
> 赞同：0
> 
> 时间：2009-04-22T13:51:00.827
> 
> 标签：security, clickonce

有哪些机制可以保护为启动 ClickOnce 应用程序而创建的清单 url（仅限在线）。例如[http://www.myworld.com/myapp/OnlineClkOns.application?param1=4579087786575](http://www.myworld.com/myapp/OnlineClkOns.application?param1=4579087786575) 选项我必须即时生成此 URL，并且还要在应用程序中进行检查以确保不超过一个应用程序实例正在运行.

这个解决方案虽然不是很优雅，但确实涵盖了安全方面。想听听是否有更好的选择来限制（人类）网址劫持。谢谢

更新：我不希望任何用户简单地复制 url 并在其他地方使用它。该 URL 只能通过经过身份验证的站点访问。我正在尝试评估 .net 3.5 中的客户端应用程序服务，它允许智能客户端使用基于表单的身份验证，尽管这并不能完全解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-30T11:12:08.987

尝试将 https 协议与第三方解决方案构建器一起使用。[你可以在](http://en.wikipedia.org/wiki/HTTP_Secure)这里阅读更多

# sql-server - 将 SSIS 用作 Reporting Services 的数据源

> ID：777306
> 
> 赞同：2
> 
> 时间：2009-04-22T13:51:03.900
> 
> 标签：sql-server, reporting-services, ssis

我正在运行 SQL Server 2008 SP1（**64 位**）

*   SQL 服务器
*   集成服务
*   报告服务

在 Windows 2003 Server（64 位）上。

我正在尝试让 Reporting Services 使用集成服务包作为数据源。我创建了一个非常简单的包，它可以简单地读取文本文件并将其加载到 DataReaderDestination 中。

我已经编辑了 rsreportserver.config 文件，如此处所述：http: [//msdn.microsoft.com/en-us/library/ms345250.aspx](http://msdn.microsoft.com/en-us/library/ms345250.aspx)

现在，我可以在远程计算机上的 Business Intelligence Design Studio 中设计并成功预览报表。但是，当我发布报告（并将 SSIS 包和源文件复制到服务器）时，当我尝试运行报告时，我得到：

```
An error occurred during client rendering.
An error has occurred during report processing.
Query execution failed for dataset 'DataSet1'.
The package failed to execute. 
```

如果我打开日志记录。很明显，包被调用但失败了：

```
OnPreValidate,LLPEDIA014,LLPDEV\testuser,TestPackage2,{3449E63D-6CF5-416A-9E16-B02F78994AFB},{227463EE-5D0C-4871-A9A6-5EFE7DFF48FD},22/04/2009 14:22:30,22/04/2009 14:22:30,0,0x,(null)
OnPreValidate,LLPEDIA014,LLPDEV\testuser,TestPackage2,{3449E63D-6CF5-416A-9E16-B02F78994AFB},{227463EE-5D0C-4871-A9A6-5EFE7DFF48FD},22/04/2009 14:22:30,22/04/2009 14:22:30,0,0x,(null)
PackageStart,LLPEDIA014,LLPDEV\testuser,TestPackage2,{3449E63D-6CF5-416A-9E16-B02F78994AFB},{227463EE-5D0C-4871-A9A6-5EFE7DFF48FD},22/04/2009 14:22:30,22/04/2009 14:22:30,0,0x,Beginning of package execution.

Diagnostic,LLPEDIA014,LLPDEV\testuser,TestPackage2,{3449E63D-6CF5-416A-9E16-B02F78994AFB},{227463EE-5D0C-4871-A9A6-5EFE7DFF48FD},22/04/2009 14:22:30,22/04/2009 14:22:30,0,0x,Based on the system configuration, the maximum concurrent executables are set to 4.

OnPreExecute,LLPEDIA014,LLPDEV\sqlAdmin,TestPackage2,{3449E63D-6CF5-416A-9E16-B02F78994AFB},{227463EE-5D0C-4871-A9A6-5EFE7DFF48FD},22/04/2009 14:22:30,22/04/2009 14:22:30,0,0x,(null)
OnError,LLPEDIA014,LLPDEV\sqlAdmin,TestPackage2,{3449E63D-6CF5-416A-9E16-B02F78994AFB},{227463EE-5D0C-4871-A9A6-5EFE7DFF48FD},22/04/2009 14:22:30,22/04/2009 14:22:30,-1073450954,0x,component "DataReaderDest" (1) failed initialization and returned error code 0x8007000E.

OnError,LLPEDIA014,LLPDEV\sqlAdmin,TestPackage2,{3449E63D-6CF5-416A-9E16-B02F78994AFB},{227463EE-5D0C-4871-A9A6-5EFE7DFF48FD},22/04/2009 14:22:31,22/04/2009 14:22:31,-1073594105,0x,There were errors during task validation.

OnWarning,LLPEDIA014,LLPDEV\sqlAdmin,TestPackage2,{3449E63D-6CF5-416A-9E16-B02F78994AFB},{227463EE-5D0C-4871-A9A6-5EFE7DFF48FD},22/04/2009 14:22:31,22/04/2009 14:22:31,-2147381246,0x,SSIS Warning Code DTS_W_MAXIMUMERRORCOUNTREACHED.  The Execution method succeeded, but the number of errors raised (3) reached the maximum allowed (1); resulting in failure. This occurs when the number of errors reaches the number specified in MaximumErrorCount. Change the MaximumErrorCount or fix the errors.

OnPostExecute,LLPEDIA014,LLPDEV\sqlAdmin,TestPackage2,{3449E63D-6CF5-416A-9E16-B02F78994AFB},{227463EE-5D0C-4871-A9A6-5EFE7DFF48FD},22/04/2009 14:22:31,22/04/2009 14:22:31,0,0x,(null)
PackageEnd,LLPEDIA014,LLPDEV\testuser,TestPackage2,{3449E63D-6CF5-416A-9E16-B02F78994AFB},{227463EE-5D0C-4871-A9A6-5EFE7DFF48FD},22/04/2009 14:22:31,22/04/2009 14:22:31,1,0x,End of package execution. 
```

有没有人遇到过类似的问题或得到这个工作？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-24T07:17:07.967

这有点摸不着头脑，但 Reporting Services 在哪个服务帐户下运行？

当用作数据源时，SSIS 包在 SSRS 服务的安全上下文中执行。由于包非常简单并且在验证过程中失败，这表明一些相当基本的东西是错误的。

Reporting Services 安装可以选择使用低安全性执行帐户配置，在该帐户下运行报告。设置好后，我不确定 SSIS 包是在服务帐户下运行还是在执行帐户下运行。

安全问题也会导致程序包在设计器中成功运行（在您的安全上下文下），但在部署时不会。

测试这一点的最简单方法是将 SSRS 服务帐户（和执行帐户，如果已配置）更改为已知运行 SSIS 包的帐户 - 就像您自己的一样。如果这不可能，您可能需要考虑将保存源文本文件的文件夹的权限授予服务/执行帐户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-06-17T03:47:30.667

我为 SQL Server 2008 x64 安装了 SP2，它解决了这个问题。

# c# - 获取“窗口关闭后无法设置可见性或调用 Show 或 ShowDialog。” 在主窗口 .ctor 和 Loaded 之后

> ID：777309
> 
> 赞同：0
> 
> 时间：2009-04-22T13:51:13.900
> 
> 标签：c#, wpf

大家好，我遇到了一个棘手的问题。

对于此窗口：

```
<Window x:Class="Host.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        WindowStyle="ToolWindow" Top="-5000" Left="-5000" Width="0" Height="0"
        ShowInTaskbar="False"
        Loaded="Window_Loaded"
        /> 
```

“窗口关闭后无法设置可见性或调用 Show 或 ShowDialog。” 在 .ctor 和 Window_Loaded 之间引发异常。这仅在独立运行时发生，而不是与 VS 一起运行。.ctor 如下：

```
 public MainWindow()
    {
        InitializeComponent();
        MessageBox.Show("1");
    } 
```

当 MessageBox 不存在时不会发生异常，如果它不存在，应用程序会在启动后立即关闭，但它仍然没有进入 Window_Loaded 处理程序。它不会从我的代码中抛出任何异常，它来自尝试从 PresentationFramework.dll 调用 Window.VerifyCanShow() 的应用程序。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-22T14:29:36.723

从您发布的异常中，不知何故窗口正在关闭。我无法从您发布的代码中看出。

关闭窗口后，您必须重新分配它以再次“显示”它。不过，您可以隐藏它，然后再次显示它而不会出现任何问题。我相信这是有充分理由的，但如果我知道的话，我就该死。无论如何，这就是异常在大喊大叫的原因。

可能是您的左右位置与您的宽度和高度（0 像素）相结合，使其接近（-5000 像素）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-22T15:00:26.650

我怀疑你的`Main`方法可能有问题。它通常在`Program.cs`. 发布它，以便我们看看那里是否有任何问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-22T15:02:21.343

不，整个问题是我真的非常非常愚蠢。当我打开 VS 时，我的单例代码看到 VShost.exe 正在运行，并杀死了该应用程序。

# language-agnostic - 在线支付处理器：WinForms、LicenseKey

> ID：777312
> 
> 赞同：1
> 
> 时间：2009-04-22T13:51:49.763
> 
> 标签：language-agnostic

我看过多个关于在线支付处理器 (OPP) 的主题，但没有一个是关于许可证文件生成的，而且在 OPP 的网站上很难找到。

我想通过网站销售桌面应用程序。当用户选择购买产品时，他将通过电子邮件（或通过电子邮件正文）获得许可证文件。然后可以将该许可证文件导入应用程序中。

我正在考虑在购买过程中对他要求的一些属性进行私有/公共 rsa 加密（fe 公司名称、客户数量等）。

我似乎找不到允许我这样做的 OPP。我愿意更改我的安全实现，但许可证需要基于许多用户给定的属性，因为某些属性会限制应用程序的使用。（*fe客户数量：他支付10个，所以应用程序只允许10个*）

它还需要是全球性的。

任何人 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-22T14:02:42.110

查看 ayende 的博客和他的 Rhino 许可组件（它是开源的）

*   [Ayende 的帖子](http://ayende.com/Blog/archive/2009/02/04/a-customer-service-story.aspx)
*   [Rhino 许可组件](https://rhino-tools.svn.sourceforge.net/svnroot/rhino-tools/trunk/licensing/)

他已经在生产产品[NHibernate Profiler](http://nhprof.com/)中使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-22T14:27:19.163

如果您要使用“在线支付处理器”的服务，那么您将受到他们支持的限制。

Rodrigo 帖子的重点是，如果您有自定义许可要求，那么您需要自己构建。创建一个网站来做到这一点不是火箭科学。只需查看他提供的链接即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-22T21:24:15.120

支付处理商只将钱从客户转移给您，他们不许可您的产品。如果您想在客户在线购买您的产品时自动生成许可证密钥，您有以下几种选择：

1.  自行处理付款交易；接受您网站上的信用卡号码或其他任何内容，将它们传递给支付处理器，如果通过，生成许可证密钥并将其发送给您的“它有效！”中的客户。页。

2.  大多数支付处理器都有库存功能，可以在有人购买商品时向您发送电子邮件。构建服务，或手动检查，并将许可证密钥发送给电子邮件中标识的联系人。请注意，这很容易受到向您发送虚假电子邮件的黑客的攻击。

3.  我所知道的所有支付处理器都有一个报告 API，您可以通过网页或以编程方式连接到列出交易的报告 API。定期查找已完成的交易并向联系人发送许可证密钥。

4.  当客户付款时，大多数支付处理器都会返回一个授权号，就像您在纸质信用卡收据上获得的一样。告诉客户在您的应用程序中输入此号码，并让您的应用程序报告此号码以及您想要跟踪的任何机器属性。从支付处理器获取授权号码，当您的应用与这些号码之一连接时，将有关如何运行的信息返回给应用。请注意，授权号不是唯一的，您必须为应用程序的每个实例添加一些唯一的 ID。

# winapi - 检测 Windows 弹出窗口

> ID：777316
> 
> 赞同：1
> 
> 时间：2009-04-22T13:52:55.940
> 
> 标签：winapi

我正在尝试屏幕抓取一个窗口。我正在检查我是否正在使用 GetForegroundWindow() 抓取前景窗口，因此理论上，不应在窗口顶部绘制任何内容。

然后我调用 GetDC(GetDesktop()) 并将我的窗口占据的屏幕区域复制到位图。

如果我改为调用 GetDC(myWindowHandle) 我没有得到标题栏或边框（或者我在这里遗漏了什么？）

我的问题是我现在正确地抓取了我的应用程序打开的任何菜单，但我还抓取了在我的应用程序上绘制的弹出窗口（IM 客户端和 Tweetdeck）。

我找到了函数 AnyPopup()，它在有弹出窗口时返回 true，但表示这是为了向后兼容 16 位版本的 Windows，通常没有用。是否有一种简单的方法来检测弹出窗口（及其位置），或者我是否必须循环浏览所有窗口并依次枚举它们的所有子窗口以测试它们是否位于我的前景窗口之上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-22T19:26:28.820

当您调用 GetDC 时，您将获得客户区的 DC。要获取整个窗口（包括非客户区标题栏和边框）的 DC，请使用带有[DCX_WINDOW](http://msdn.microsoft.com/en-us/library/dd144873(VS.85).aspx)标志的 GetDCEx。

此外，请查看[PrintWindow](http://msdn.microsoft.com/en-us/library/dd162869.aspx)功能，它可以让您拍摄窗口的快照，即使它被遮挡或部分不在屏幕上 - 它并不完美，但效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-22T19:20:02.923

GetForegroundWindow() 返回当前接收用户输入的窗口，它不一定需要在所有其他窗口之上。可以使用 SetWindowPos() 函数将窗口设置为“最顶层”，即使它没有焦点，它也会使其位于其他窗口的顶部（我认为这就是弹出窗口的意思）。

`HWND_TOPMOST`您可以通过调用 SetWindowPos()作为第二个参数，使其成为最顶层的窗口，从而强制您的窗口位于这些窗口之上。由于窗口具有输入焦点，因此它应该最终位于所有最顶层窗口的顶部。

如果窗口不是您自己的窗口，您必须确保在抓取屏幕后将其恢复到原始状态。要确定窗口是否在一开始就位于最顶层，请调用 GetWindowLongPtr(myWindowHandle, `GWL_EXSTYLE`) 并查看是否`WS_EX_TOPMOST`设置了样式。

# iphone - 当用户返回表格视图时如何执行单元格取消选择？

> ID：777321
> 
> 赞同：0
> 
> 时间：2009-04-22T13:53:55.890
> 
> 标签：iphone, cocoa-touch

我正在使用 UITableView 显示单元格列表，当用户选择一个单元格时，使用以下代码会出现一个新视图：

```
- (void) tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
     [self.navigationController pushViewController: detailsViewController animated: TRUE];
} 
```

通过使用上面的代码，视图可以正确显示，但是当我返回根表视图时，单元格仍然处于选中状态。我注意到，在许多 sdk 示例中，当根视图弹出包时，单元格被取消选择（带有漂亮的动画），但我在任何示例中都找不到实现此功能的代码。我知道我可以使用：

```
[tableView deselectRowAtIndexPath:indexPath animated: YES]; 
```

实现这一点，但我很好奇这些示例如何在不使用任何代码的情况下做到这一点。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-22T14:04:02.747

`UITableViewController`当您调用等时会自动为您处理此`super`问题`viewDidAppear:`。因此，实现此目的的最简单方法是子类化 UITableViewController。如果你不能（例如因为表格只是更复杂视图的一部分），那么你必须在`viewDidAppear:`方法中自己做。（您也应该闪烁滚动条）。

# javascript - 使用 CSS 样式溢出时如何访问显示在 DIV 中的实际文本：隐藏？

> ID：777340
> 
> 赞同：7
> 
> 时间：2009-04-22T13:57:36.363
> 
> 标签：javascript, css, text, html, overflow

我的页面上有以下内容 DIV，它显示动态文本：

```
<div id="someContent">
</div> 
```

它使用以下 CSS 来截断额外的文本：

```
#someContent {
    height: 200px;
    width: 200px;
    overflow: hidden;
} 
```

如果我将此文本加载到 DIV 中：

> *“Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Praesent aliquam, justo convallis luctus rut​​rum, erat nulla balloon diam, at nonummy quam ante ac quam. Maecenas urna purus, 发酵 id, molestie in, commodo porttitor, felis. Nam blandit quam ut "*

... CSS 仅导致以下文本显示在 DIV 中：

> *“Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Praesent aliquam, justo convallis luctus rut​​rum, erat nulla balloon diam, at nonummy quam ante ac quam. Maecenas urna purus, 发酵 id, molestie in, commodo porttitor, felis. Nam blandit quam ut lacus. Quisque ornare risus quis ligula. Phasellus tristique purus a augue"*

这按预期工作。

但是，我想知道是否有某种方法可以使用 JavaScript 访问显示的文本。当我尝试访问`innerHTML`DIV 的属性时，它会返回最初加载到 DIV 中的整个文本。

```
<script type="text/javascript">
    alert(document.getElementById("mainArticleContent").innerHTML);
</script> 
```

我的最终目标是用省略号（“...”）替换*修剪后的内容中的最后一个单词。*我想我可以在 JavaScript 中做到这一点，这样它就会显示在所有浏览器中，而不仅仅是 IE，就像 CSS property 一样`text-overflow: hidden`。

有任何想法吗？这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-22T14:07:37.887

我认为您要求做的事情不可能使用 javascript。

或者，为什么不在服务器端截断特定字符数的文本？根据您选择的字体，您可能无法控制页面上显示的 div 的大小，但它应该可以解决您的问题。

编辑：

看一下[这个](http://www.quirksmode.org/css/textoverflow.html)以获得自动 CSS 省略号。有一些注意事项，它看起来非常特定于浏览器，但这是做你想做的另一种方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-22T14:37:55.363

这是使用 jQuery 的快速思考：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript">
$(function(){
    var innerText = $('#someContent').text();
    var textArray = innerText.split('');
    var formatted = '';
    for(var i in textArray) {
        formatted += '<span>' + textArray[i] + '</span>';
    }
    var heightOfContainer = $('#someContent').height();
    $('#someContent').html(formatted);
    var clipped = '';
    $('#someContent span').each(function(){
        if ($(this).position().top < heightOfContainer) {
            clipped += $(this).text();
        } else {
            return false;
        }
    });
    clipped += '...';
    $('#someContent').html(clipped);
});
</script> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-22T14:16:19.143

该站点解释了一种可能对获取显示的文本部分有用的技术。我不确定这种方法有多准确，但我怀疑它会让你非常接近你想要的： [http ://www.ruzee.com/blog/2007/08/ellipsis-or-truncate-with -dots-via-javascript](http://www.ruzee.com/blog/2007/08/ellipsis-or-truncate-with-dots-via-javascript)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-22T14:17:55.520

没有简单的方法可以做到这一点。您必须根据 div 大小、字体大小、字体类型和 div 内的文本偏移量来计算在 DIV 中可以看到多少文本。请记住，您可以使用负偏移量来显示文本的不同部分。

您应该能够根据所有这些数字计算出 DIV 可以容纳多少文本的算法，但是由于换行，这有点棘手。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-08-08T13:21:13.797

无需使用 Javascript 即可获得省略号。您可以简单地使用 CSS`text-overflow`属性并将其值设置为“省略号”。您可以在[此处查看文档](https://www.w3schools.com/cssref/css3_pr_text-overflow.asp)。

如果您想在多行之后拥有它，请[告知本指南](http://dev.mobify.com/blog/multiline-ellipsis-in-pure-css/)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-22T14:18:45.330

您可以根据客户端的字符数进行相同的截断。将截断的部分存储在其他 DOM 元素中（或者如果您不介意这种事情，也可以使用您自己的属性）。让整个事情在 body.onLoad() 上启动。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-30T22:46:51.413

如果这只是为了显示目的，那么您可以简单地在容器的右下角有一个绝对定位的 div，其中包含“...”，因此在文本的顶部。

# html - wxPython 中的 HTML 电子邮件查看器

> ID：777342
> 
> 赞同：0
> 
> 时间：2009-04-22T13:58:17.267
> 
> 标签：html, wxpython

我有一个 wxPython 应用程序，它发送带有 HTML 和嵌入图像的多部分电子邮件。作为发送过程的一部分，每封电子邮件都按原样（RFC822 格式）存储以供将来参考。
我的问题是：您会建议如何从应用程序本身显示这些电子邮件？

(Xubuntu 8.10)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-04T09:28:42.793

如果您不介意在用户系统上打开默认电子邮件客户端，您可以使用桌面模块来执行此操作（[http://pypi.python.org/pypi/desktop](http://pypi.python.org/pypi/desktop)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-18T06:57:46.367

另一种解决方案：[嵌入式 WebKit](http://wxwebkit.kosoftworks.com)（准备就绪时）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-05-14T15:27:04.190

另一个解决方案：[wxWebconnect](http://www.kirix.com/labs/wxwebconnect.html)（还没有为 Linux 准备好）

# php - 使用 PHP 为特定服务调用 SOAP 方法

> ID：777346
> 
> 赞同：2
> 
> 时间：2009-04-22T13:59:39.387
> 
> 标签：php, soap

很抱歉不得不这样做，但我没有得到运行这个特定网络服务的人的爱。我以前从未使用过 SOAP。

[这是我试图调用的方法](https://cwi.rezexchange.com:9991/Service.asmx?op=CwiRateDetails)

这是我认为应该工作的代码

```
 public function soapTest(){

            echo "start <br />";
            use_soap_error_handler(true);
            $client = new SoapClient("https://cwi.rezexchange.com:9991/?wsdl");

                // here's the problem. What goes in the parenthesis?
            $result = $client->CwiRateDetails(????);

            echo($result);
            echo "<br /> end";

        } 
```

现在我猜这告诉我括号应该包含什么。

```
POST /Service.asmx HTTP/1.1
Host: cwi.rezexchange.com
Content-Type: text/xml; charset=utf-8
Content-Length: length
SOAPAction: "http://hotelconcepts.com/CwiRateDetails"

<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <CwiRateDetails xmlns="http://hotelconcepts.com/">
      <PropertyCode>string</PropertyCode>
      <DateFrom>dateTime</DateFrom>
      <DateTo>dateTime</DateTo>
      <RatePlan>string</RatePlan>
      <RoomType>string</RoomType>
      <PromotionalRates>boolean</PromotionalRates>
    </CwiRateDetails>
  </soap:Body>
</soap:Envelope> 
```

我的猜测是这样的

```
$result = $client->CwiRateDetails($PCode, $DateFrom, $DateTo, $RatePlan, $RoomType, false); 
```

应该管用。但我不知道日期格式是什么，或者房间类型是什么，或者如何参考房价计划。

现在。在我和他们一起通过电子邮件发疯之前，我认为他们需要给我更多的信息是错误的吗？或者是否有某种 SOAP 技巧可以用来从某个地方获取这些信息？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-22T14:06:51.740

尝试

```
$result = $client->CwiRateDetails(array(
    'PropertyCode'     => ...,
    'DateFrom'         => ...,
    'DateTo'           => ...,
    'RatePlan'         => ...,
    'RoomType'         => ...,
    'PromotionalRates' => ...,
)); 
```

您必须根据 XML Schema 规范序列化您的日期时间值`DateFrom`和`DateTo`布尔值：`PromotionalRates`

*   [布尔值](http://www.w3.org/TR/xmlschema-2/#boolean)：`true`=`'true'`或`1`和`false`=`'false'`或`0`
*   [dateTime](http://www.w3.org/TR/xmlschema-2/#dateTime) : `YYYY-MM-DD`T `hh:mm:ss`Z 表示 UTC 或`YYYY-MM-DD`T`hh:mm:ss(+/-)hh:mm`表示本地时间，包括时区信息；时区信息是可选的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-22T14:05:23.537

日期格式实际上是 dateTime（它是一种 SOAP 格式类型）。我确信互联网上有一个将 time() （或其他）转换为 SOAP::dateTime 字段的示例。

您需要连接的信息都在那里..也许您应该先阅读网络服务？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-22T14:04:36.677

通常它是关联数组，其中键是您在描述中找到的字段，即 CwiRateDetails 的 PropertyCode、DateFrom、DateTo 等

所以它会像

```
$client->CwiRateDetails(array("PropertyCode"=>"sdsd","DateFrom"=>"",......)) 
```

您可以在此页面上查看每个方法的详细信息：[https](https://cwi.rezexchange.com:9991/) ://cwi.rezexchange.com:9991/只需单击程序名称，您将看到它的参数和响应。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-22T14:06:09.667

你没有错，海事组织。必须有其他 SOAP 调用来派生您需要的信息。你看过[列表费率类型](https://cwi.rezexchange.com:9991/Service.asmx?op=CwiListRateTypes)吗？[这里](https://cwi.rezexchange.com:9991/)的方法列表怎么样？

# asp.net - 如何将数据脚手架添加到现有的 ASP.NET 网站？

> ID：777351
> 
> 赞同：0
> 
> 时间：2009-04-22T14:00:22.613
> 
> 标签：asp.net, dynamic-data

我已将动态数据内容添加到我们现有的网站中，并且将其添加到页面并设置 GridView 以使用它。不过，我想我想启动并运行完整的脚手架功能，这样我就不必为所有表格编写所有布局。不幸的是，我无法让它工作。

我已将代码添加到 Application_start() 以注册数据上下文并设置路由。我已尝试使用“{table}/ListDetails.aspx”和“{table}/{action}.aspx”两个版本，但只收到 HTTP 404 错误。我也将 ScaffoldAllTables 设置为 true。

我在这里错过了一两步吗？

这是我的应用程序启动代码：

```
protected void Application_Start(Object sender, EventArgs e)
        {

            RegisterRoutes(RouteTable.Routes);

        }

public static void RegisterRoutes(RouteCollection routes)
        {
            MetaModel model = new MetaModel();

            model.RegisterContext(typeof(ESLinqDataContext), new ContextConfiguration() { ScaffoldAllTables = true });

            routes.Add(new DynamicDataRoute("{table}/ListDetails.aspx")
            {
                Action = PageAction.List,
                ViewName = "ListDetails",
                Model = model
            });

            routes.Add(new DynamicDataRoute("{table}/ListDetails.aspx")
            {
                Action = PageAction.Details,
                ViewName = "ListDetails",
                Model = model
            });
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-22T17:31:18.270

我需要添加

```
<add name="UrlRoutingModule" type="System.Web.Routing.UrlRoutingModule, System.Web.Routing, Version=3.5.0.0, Culture=neutral, publicKeyToken=31BF3856AD364E35" /> 
```

到我的 web.config 的 httmodules 部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-22T14:05:59.870

你有没有在你的 global.asax 中添加这个

```
model.RegisterContext(typeof(AdventureWorksLT_DataModel.AdventureWorksLT_DataEntities), 
new ContextConfiguration() { ScaffoldAllTables = true }); 
```

[http://msdn.microsoft.com/en-us/library/cc488469.aspx](http://msdn.microsoft.com/en-us/library/cc488469.aspx)有一步一步的演练..看看你是否错过了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-22T14:09:43.153

你能显示你的 Application_start() 代码吗？您使用的是哪个版本的 IIS？

可以在 Scott Hanselman 的网站上找到向现有网站添加动态数据的一个很好的解释：[http ://www.hanselman.com/blog/PlugInHybridsASPNETWebFormsAndASPMVCAndASPNETDynamicDataSideBySide.aspx](http://www.hanselman.com/blog/PlugInHybridsASPNETWebFormsAndASPMVCAndASPNETDynamicDataSideBySide.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-23T10:35:49.897

看：

[演练：将动态数据添加到现有网站](http://msdn.microsoft.com/en-us/library/cc668188.aspx)

[Scott Hunter：如何将动态数据添加到现有网站](http://blogs.msdn.com/scothu/archive/2008/06/23/how-to-add-dynamic-data-to-an-existing-web-site.aspx)

让 DD 在现有网站上工作的所有要求都在那里。

# java - Quercus 是 Java 环境中 PHP 的可行替代品吗？

> ID：777356
> 
> 赞同：14
> 
> 时间：2009-04-22T14:01:36.963
> 
> 标签：java, php, quercus

对于遇到这个问题但不知道[Quercus](http://www.caucho.com/resin-3.0/quercus/)是什么的人来说 - 它是用 Java 完成的 PHP 实现。

对于我目前正在进行的一个项目，我们通过 cgi over servlet 提供 php 页面（我知道它很笨重，但它是支持遗留代码的必要条件）。我很高兴发现 Quercus 项目，因为它看起来像是将我们的项目转移到更纯 Java 环境的有希望的途径。

我有几个关于 Quercus 的问题：

*   您在运输产品中使用过 Quercus 吗？
*   支持多少 php API？
*   你在使用它时遇到了什么问题？
*   您是否能够使其与 Jetty 一起使用？你听说过它与 Jetty 一起工作吗？（我想不通）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-22T18:36:01.297

我已经使用 WordPress 对其进行了测试，其性能几乎是常规 Apache/PHP 下默认 WordPress 安装的两倍。这仍然不是那么好。

我们确实注意到虽然 Quercus 在 PHP 中支持 curl 命令，但它并不支持所有 curl 选项。所以自动插件下载不起作用。这没什么大不了的，您可以随时下载插件并手动安装它们。但这是一个危险信号，因为我们不知道还有什么办法。这也意味着 Facebook 的 PHP 库不能正常工作（很可能）。

如果您执行大量数据库连接和调用，您应该会看到该区域的性能大幅提升，因为将使用数据库连接池。

如果您正在编写代码，我会说这是一个非常可行的选择。支持的 PHP 已经足够多，如果您发现某些东西不起作用，您可以使用受支持的不同 PHP 命令，或者只使用 Java 命令。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-22T18:23:38.317

我做了一些评估 Quercus 的工作，它看起来很有希望，但不适用于我正在从事的项目，因为它是基于 Symfony 的，并且 Quercus 没有很好地处理 Symfony 的反射性质。

我确实尝试让一些开源 PHP 项目使用它，并发现它有一个相当完整的基于 PHP5 的 API。

你应该能够让它与 Jetty 一起工作。我能够让它与Tomcat一起工作。

您真的可以将其视为 Java 应用程序中 JSP 的替代品。它的工作方式与 JSP 的工作方式相似，因为您将 PHP 编译为 Java 代码，就像您将 JSP 编译为 Java 代码一样。

我相信使用 Jetty 的最大缺点是无法预编译 PHP 代码。

但是，即使您没有将 PHP 与 Java 混合使用，也有很多优点。如果您将两者混合使用，您将拥有更多优势。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-27T16:30:24.260

请参阅有关开发人员如何设法使用[Quercus 在 Google App Engine 上运行 PHP 的链接](http://www.webdigi.co.uk/blog/2009/run-php-on-the-google-app-engine/)

注意：GAE 中不正式支持 PHP，但使用 Quercus，您现在可以运行它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-18T13:16:13.910

PHP性能只有专业版的quercus才会好。因为专业版把PHP代码编译成java字节码。所以会更快。

但是开源版本仍然使用 PHP 解释器，如[http://en.wikipedia.org/wiki/Resin_Server中所述](http://en.wikipedia.org/wiki/Resin_Server)

开源版本似乎没有性能提升。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-22T14:48:22.297

好吧，如果您检查 Quercus 页面底部的版权，您会看到它更新到 06 年，所以我不保证任何 PHP 5.x 支持。

但是为什么你甚至想要这样的双重开销呢？您也可以从 php 运行 java :)

# html - 如何将按钮中的文本替换为 html 中的上传输入字段？

> ID：777360
> 
> 赞同：2
> 
> 时间：2009-04-22T14:02:36.773
> 
> 标签：html, forms, file-upload

在 HTML 中，您可以在表单中定义用于上传文件的输入字段。此输入字段附加了一个按钮，该按钮会弹出一个文件选择器对话框。如何设置此按钮的文本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-22T14:08:39.660

它涉及一些技巧，因为浏览器并不真正希望您这样做。这是关于如何更改浏览按钮的外观和文本的一个很好的教程：[点击这里](http://www.quirksmode.org/dom/inputfile.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-22T14:07:02.300

如果没有一些漂亮的 CSS/JavaScript 或使用 Flash，您无法直接更改它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-22T14:25:20.760

或者你只是放弃并使用像[SWFUpload](http://swfupload.org/)这样的好东西。当您完全替换上传时，为什么要使用所有伪造的覆盖。

# python - Python反射 - 我可以用它来获取方法定义的源代码吗

> ID：777371
> 
> 赞同：12
> 
> 时间：2009-04-22T14:05:23.803
> 
> 标签：python, reflection

**重复..**

*   [如何获取python函数的代码？](https://stackoverflow.com/questions/427453/how-can-i-get-the-code-of-python-function)
*   [打印定义 lambda 函数的代码](https://stackoverflow.com/questions/334851/print-the-code-which-defined-a-lambda-function)
*   [Python：如何让 Python 写下它在内存中的函数代码？](https://stackoverflow.com/questions/399991/python-how-do-you-get-python-to-write-down-the-code-of-a-function-it-has-in-memo)

* * *

我有一个成功运行的方法定义，但想在运行时修改它。

例如：如果我有一个方法

```
def sayHello():
    print "Hello" 
```

type(sayHello) 给了我答案“类型函数”。我能得到这个函数对象的源代码字符串吗？它被认为是一个安全问题吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2009-04-22T15:37:27.107

使用检查模块：

```
import inspect
import mymodule
print inspect.getsource(mymodule.sayHello) 
```

该函数必须在您导入的模块中定义。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-04-15T14:28:37.897

要获取类实例上的方法的来源，请执行以下操作：

```
import inspect
myobj = MyModel()
print inspect.getsource(myobj.my_method) 
```

阅读更多：[https ://docs.python.org/2/library/inspect.html#inspect.getsource](https://docs.python.org/2/library/inspect.html#inspect.getsource)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-22T14:09:07.820

`sayHello.func_code.co_code`返回一个我认为包含该方法的编译代码的字符串。由于 Python 在内部将代码编译为虚拟机字节码，因此可能就剩下这些了。

不过，您可以拆卸它：

```
import dis

def sayHello():
  print "hello"

dis.dis(sayHello) 
```

这打印：

```
   1 0 LOAD_CONST 1 ('你好')
               3 PRINT_ITEM
               4 PRINT_NEWLINE
               5 LOAD_CONST 0（无）
               8 RETURN_VALUE

```

看看[Decompyle](http://www.crazy-compilers.com/decompyle/)的反编译器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-22T14:10:02.637

没有内置函数来获取函数的源代码，但是，如果您可以访问源代码（它将位于 Python/lib 目录中），则可以构建自己的函数。

# spring - 弹簧连接池

> ID：777372
> 
> 赞同：7
> 
> 时间：2009-04-22T14:05:34.927
> 
> 标签：spring, connection-pooling

有人可以告诉我或指向我解释如何在 Spring 中使用连接池的文档/教程吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-22T22:53:43.143

Spring 不支持内置池。您应该使用上面提到的第三方池。DBCP 和[c3p0](http://sourceforge.net/projects/c3p0/)都像 spring 的魅力一样工作。您需要做的就是在您的 context.xml 中定义数据源时，只需使用 DBCP 来定义它。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2010-01-11T10:29:18.860

您可以使用来自 jdbc 驱动程序的池化数据源。例如，在 oracles 库中有一个：

```
<bean id="dataSource"
    class="oracle.jdbc.pool.OracleConnectionPoolDataSource">
    <property name="URL" value="jdbc:oracle:thin:@wherever:1234:whatever" />
    <property name="user" value="theuser" />
    <property name="password" value="thepassword" />
</bean> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-22T15:38:41.987

AFAIK Spring 不包含池化数据源...如果您需要 J2SE 应用程序中的连接池，您可以使用 Apache DBCP。对于容器托管的应用程序，您应该在容器中配置一个 DataSource 并从您的应用程序中使用它。

# javascript - window.opener 在不同的域上工作吗？

> ID：777386
> 
> 赞同：1
> 
> 时间：2009-04-22T14:07:57.667
> 
> 标签：javascript, iis

`window.opener`如果子窗口与父窗口位于不同的域中，会起作用吗？

如果它在 IIS7 上是同一个域，但在不同的应用程序/虚拟目录上呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-22T14:36:18.160

它不适用于父窗口以外的另一个域中的子窗口。返回的错误是权限被拒绝。这是一个安全问题，这是设计使然。

如果子窗口和父窗口在同一个域中（即使它们在不同的虚拟目录或应用程序上运行）它工作正常。

# iphone - iPhone - UIToolbar 在弹出的前一个视图中消失

> ID：777387
> 
> 赞同：0
> 
> 时间：2009-04-22T14:08:04.640
> 
> 标签：iphone, uiviewcontroller, uitoolbar

我在我的应用程序中使用导航栏和工具栏。其中一个屏幕使用透明的工具栏和导航栏，当用户点击屏幕时会显示。一切都很好，除非我从这个视图控制器做一个 popViewController。

我以前的vc中的工具栏不再可见（当vc弹出然后它消失时，我只能看到它一秒钟）

有什么想法可能导致这种情况吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-22T21:20:29.810

标签栏可能已添加到由您的子视图控制器控制的视图中，因此当弹出视图控制器时，它会使用工具栏。

如果您希望它在导航栏更改视图时保留，您应该将工具栏添加到您的窗口。

# java - 如何使用 inputstream java 的 markSupported 功能

> ID：777391
> 
> 赞同：6
> 
> 时间：2009-04-22T14:08:26.213
> 
> 标签：java, tcp, network-programming

我打算使用 markSupported 功能检查第一个字节以检查格式然后重置它，请告诉我应该使用哪个流在 java 中进行基于 tcp 的通信。对于像 datainputstream 这样的大多数流不提供此功能。请给我一些使用标记和重置的指示。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-22T14:11:08.813

您可以使用 a[`BufferedInputStream`](http://java.sun.com/javase/6/docs/api/java/io/BufferedInputStream.html)周围的任何其他流。只要您在标记后不尝试读取超出缓冲区大小的内容，就可以保证支持标记/重置。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-04-22T14:23:10.080

看一下[PushbackInputStream](http://java.sun.com/j2se/1.4.2/docs/api/java/io/PushbackInputStream.html)，它看起来像是为了做你想做的事而设计的。

它将包装现有的输入流并允许您读取一个字节，然后将其放回原处。来自 Javadoc：

> PushbackInputStream 将功能添加到另一个输入流，即“推回”或“未读”一个字节的能力。这在代码片段可以方便地读取由特定字节值分隔的不确定数量的数据字节的情况下很有用；读取终止字节后，代码片段可以“取消读取”它，以便对输入流的下一次读取操作将重新读取被推回的字节。例如，表示构成标识符的字符的字节可能会以表示运算符字符的字节结尾；一个只读取标识符的方法可以读取，直到它看到运算符，然后将运算符推回以重新读取。

# sql-server - 为什么在不指定长度的情况下将文本转换为 varchar 会将文本截断为 30 个字符？

> ID：777394
> 
> 赞同：3
> 
> 时间：2009-04-22T14:08:51.937
> 
> 标签：sql-server, text, casting, varchar

我正在搜索 MS-SQL Server 2005 数据库以确保某个文本字段的长度始终是 8 的倍数。当我运行以下查询时，我得到几行长度为 30。但是当我调查这些记录时，我发现它们比这更长。

```
select distinct len(cast(textfield as varchar)) from tablename
```

但是，如果我将 varchar 的长度指定为更长的长度（如以下查询中所示），则它可以正常工作。

```
select distinct len(cast(textfield as varchar(1000))) from tablename
```

任何人都知道为什么它默认为 30，如果这是一个可配置的设置？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-22T14:17:49.827

[为什么使用 CAST 时 VARCHAR 的默认长度是 30？](https://stackoverflow.com/questions/359257/why-is-the-default-length-for-varchar-30-when-using-cast)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-22T14:44:09.717

当有许多不同的行需要适合该列时，就会发生强制转换。数据库引擎，因为它并不完美，不想去检查查询可能返回的所有可能行的长度以找出设置最大值的长度，所以它不检查任何行 -它只需要默认值 30，这是一个任意粗略的猜测，因为它不知道更好。

可以说，将默认值设置为 256 或任何 VARCHAR 的最大长度可能是明智的，但我想最重要的是，这是一个有用的提醒，它真的不知道你想要多长时间除非你告诉它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-22T14:10:57.067

这是一个任意数字，据我所知是不可配置的。我想不出您不想指定长度的情况。

# asp.net - ASP.NET 部署

> ID：777396
> 
> 赞同：5
> 
> 时间：2009-04-22T14:09:18.257
> 
> 标签：asp.net

我在 Visual Studio 2008 中开发了一个 ASP.NET 网站。现在我想将它部署在其他机器上。我怎样才能做到这一点？？就像我们为 Windows 应用程序制作安装包一样，我们可以为 ASP.NET 网站做什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-22T14:15:56.307

考虑使用 Microsoft 的[Web 部署工具](http://learn.iis.net/page.aspx/346/web-deployment-tool/)。它专门用于帮助将 Web 应用程序和这些 Web 应用程序的更新部署到生产 IIS 6 和 7 Web 服务器，并且它比 MSI（Windows Installer）、恕我直言做得更好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-22T14:21:06.370

你应该先预编译它。

[http://msdn.microsoft.com/en-us/library/ms227972.aspx](http://msdn.microsoft.com/en-us/library/ms227972.aspx)

我使用 web 部署项目，预编译和上传。

像这样[http://weblogs.asp.net/scottgu/archive/2008/01/28/vs-2008-web-deployment-project-support-released.aspx](http://weblogs.asp.net/scottgu/archive/2008/01/28/vs-2008-web-deployment-project-support-released.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-22T14:12:04.490

您可以创建一个 MSI（Microsoft 安装程序）文件，该文件将在另一台机器上创建结构。几天前，我在一个非常相似的问题中讨论了这个问题。

编辑：请参阅此链接[ASP.NET Application Deployment Question](https://stackoverflow.com/questions/761725/asp-net-application-deployment-question/761727)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-22T14:15:12.953

Xcopy

“Xcopy 样式的文件传输简化了 ASP.NET 站点的部署和维护，因为您无需创建注册表项，也无需注册任何组件。Microsoft .NET 应用程序是自描述的，通常没有依赖关系。通过程序集版本控制，您可以甚至可以在不停止 Web 服务器的情况下复制应用程序使用的 DLL 的新副本。”

如果您需要将操作移交给在多台机器上部署的操作，则上述创建 MSI 的选项也很好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-22T14:13:08.247

基本上，您将文件上传到服务器，确保：

目标文件夹配置为 ASP.Net 应用程序文件夹 web.config 文件未配置为用于调试 数据库也已上传，和/或应用程序可访问

（无论如何我就是这样做的。可能存在更好的解决方案，但它有效。）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-22T14:21:39.083

您可以使用 Web 部署项目。如何在[这里](http://weblogs.asp.net/scottgu/archive/2005/11/06/429723.aspx)解释。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-22T14:26:57.557

[VS 2008 Web 部署项目](http://weblogs.asp.net/scottgu/archive/2008/01/28/vs-2008-web-deployment-project-support-released.aspx)

# .net - 人们在开始使用 LINQ 时犯的最大错误是什么？

> ID：777400
> 
> 赞同：42
> 
> 时间：2009-04-22T14:09:37.083
> 
> 标签：.net, linq

人们第一次开始使用 LINQ 时的基本误解是什么？

例如，当它真的是另一回事时，他们是否认为这是一回事？

而且，是否有一些最佳实践可以避免这些错误？

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2009-04-22T14:11:54.490

它应该用于一切。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2009-04-22T14:15:51.843

未能理解（或存在！）之间的差异：

```
.First()
.FirstOrDefault()
.Single()
.SingleOrDefault() 
```

不理解[延期执行](http://blogs.msdn.com/charlie/archive/2007/12/09/deferred-execution.aspx)。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2009-04-22T14:21:47.337

它仅指 LINQ to SQL

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2009-04-22T14:14:28.227

人们在使用 LINQ 时犯的最大错误与人们尝试使用位于他们没有任何良好基础的技术之上的任何类型的技术时相同。

如果您无法理解正确/有效的数据库查询，那么您将搞砸 LINQ。

如果您不能理解 ADO.NET 和数据访问的基本原理，您可能会搞砸。

人们认为使用 LINQ 可以让他们顺其自然，但事实并非如此。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2009-04-22T14:29:50.907

我在 LINQ to SQL 中看到的一个基本问题是不理解**DataContext**。它是一个工作单元对象，应该为每个工作单元重新创建。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2009-04-22T14:28:34.997

想到的事情是

*   它必须更慢，最好使用纯 C#
*   尝试在简单的 C# 更具可读性/可管理性的地方使用它

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2009-04-22T14:12:23.117

可能，人们可能有的误解之一是 LINQ 查询的编写方式，尤其是 LINQ2SQL，对性能没有影响。如果您打算编写具有高性能的代码，则应该始终知道后台发生了什么，否则您最终可能会遇到有趣的超时，OOM异常，堆栈溢出等... =)

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2009-04-22T14:13:58.930

这是一个，[涉及字符串的 LINQ to SQL 查询导致 SQL Server 过程缓存膨胀](http://blogs.lessthandot.com/index.php/DataMgmt/DataDesign/linq-to-sql-queries-involving-strings-ca) 人们需要注意这一点

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2009-04-22T14:22:14.497

LINQ 作为一种语言非常简单明了，并不出人意料，尤其是在您熟悉函数式编程的情况下。

[Deferred Execution](http://www.google.com/search?q=linq+deferred+execution)的概念可能是最大的问题，也是最好的功能之一。当您使用返回 IQueryable 的 LINQ 时，重要的是要记住您并没有执行您刚刚编写的任何代码。直到您调用产生其他结果的方法之一才会执行查询。

此外，就 LINQ to SQL 提供程序而言，我发现的最大问题是[性能成本](http://jdconley.com/blog/archive/2007/11/28/linq-to-sql-surprise-performance-hit.aspx)。事实证明，构建每次运行 LINQ 查询时都会产生的 SQL 查询会消耗大量 CPU 成本，除非您预编译高流量查询。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2009-04-22T14:32:06.673

我完全同意亚当·罗宾逊的观点，事实上，最大的错误是人们停留在美的语法上，没有深入到技术事实中，就影响或架构观点而言。

有时人们认为它是一回事，而实际上它是另一回事.. 重要的是要注意 Linq 是一种“技术”并且可以通过多种方式实现，它们中的每一种都可能以不同的方式影响性能和设计（例如)，基本语法保持不变，但底层内容可能会发生变化。

实际上，从伟大且不断发展的实现开始，没有完整的最佳实践列表，最佳实践可以从以下内容开始：

1.  了解将使用哪种实现（Linq2Sql、Linq2Objects、Linq2CSV、Linq2Excel、Linq2LDAP、Linq2JSON、Linq2Xml、Linq2Xsd 等）
2.  然后尝试了解所选实现中的基本技术特性

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2009-04-30T14:30:50.980

就我自己而言，知道一个序列何时会被缓冲或流式传输是很重要的。

用大量数据填充缓冲区会消耗大量内存。如果可能，一旦数据减少，就应该进行诸如反转、计数、排序等操作。在连接中，左侧序列是流式传输的，右侧是缓冲的。当大小有显着差异时，将较小的放在右侧。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2009-04-22T14:36:38.737

在没有主键的表上使用 linq2sql（并且没有在设计器中定义主键）。

特别是如果他们正在做的是更新，它不会更新任何东西，您也不会收到任何错误。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2009-04-22T15:58:03.517

很多人认为 LINQ 是他们可以在代码中使用的“神奇 SQL”。它看起来像 SQL，但完全不同。了解它的区别以及它*真正*在做什么将防止很多挫折。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2009-04-22T14:19:13.520

我认为理解查询执行的点通常是一个错误（即认为它是在查询点而不是在第一次访问数据的点），以及仅仅因为它编译它就会运行的信念。

这参考了 Linq to SQL。

一个很棒的 Linq 工具是Joe [Albahari](http://www.linqpad.net/)的 LinqPad，它让我可以更快地学习 Linq。如果你没有它，就得到它！而且我什至没有受委托；）

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2012-11-12T07:02:36.037

了解从 Linq2SQL/Entities 到 Linq2Objects 的位置。了解在数据库引擎中与在您的应用程序中执行和未执行的内容。了解您何时使用内存对象与您使用的底层 Linq 提供程序，然后知道如何在需要执行查询后处理时有意地从 Linq2SQL 转换到 Linq2Objects，而您的 C#/.NET 函数不支持您的提供者。

# objective-c - 在 Objective-C 中包含头文件的成本

> ID：777405
> 
> 赞同：9
> 
> 时间：2009-04-22T14:10:29.453
> 
> 标签：objective-c, import, header, dependencies, header-files

这似乎是一个非常愚蠢的问题，但是`#import`在 Objective-C 中包含（实际上是调用）头文件的成本是多少？我厌倦了在不同位置不断包含相同的标题，因此我决定简单地创建一个`GlobalReferences.h`包含几个常用标题的文件。

如果甚至不使用对其他文件的引用，是否有任何可观的成本？我的直觉告诉我“不”，因为链接器似乎只是在使用时知道其他文件`#import`，但我不确定是否需要对 iPhone 开发采取特殊考虑，这是我的项目所关注的。有什么想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-22T14:19:00.573

`#import`链接器对ed 文件一无所知。事实上，Objective-C 编译器也对它们一无所知，它们是由预处理器预处理出来的。预处理器有效地将标头的内容插入到您将它们包含在源文件中的位置。实际的 Objective-C 编译器将不得不处理额外的函数原型和类接口定义，即使它们没有被使用。虽然这通常不是一项冗长的任务，但它会增加编译时间。应用程序的最终大小和性能应该不受影响。

要查看原始源代码的样子（包括所有头文件和扩展宏等）：

```
gcc -E your-source-file.m 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-22T14:46:25.797

导入/包含比您需要的更多的头文件会增加编译时间。[您可以使用预编译的头文件](http://developer.apple.com/documentation/DeveloperTools/Conceptual/XcodeBuildSystem/800-Reducing_Build_Times/bs_speed_up_build.html)来减轻一些痛苦。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-22T14:39:10.617

最大的缺点是编译时间。如果在每个源文件中都导入了所有头文件，那么每次更改头文件时都必须重新构建*整个项目。*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-22T14:50:07.533

我的印象是它不会太受欢迎： [http ://en.wikipedia.org/wiki/Objective-C#.23import](http://en.wikipedia.org/wiki/Objective-C#.23import)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-28T22:26:05.960

> 在 Objective-C 中包含（实际上是调用#import）头文件的成本是多少？

编译器可能会不必要地读取这些文件。编辑`#import`后，对于每个可见的翻译（例如文件），都需要解析、编译等附加文件`.m`——使您的构建和链接时间更长。长 10 倍也就**不足为奇**了。

> 我厌倦了在不同的位置不断包含相同的标头，因此我决定简单地创建一个包含几个常用标头的 GlobalReferences.h 文件。

通常，这是一个非常糟糕的方法。常见的问题是，每当 GlobalReferences.h 包含的任何文件发生更改时，您的整个项目和所有中间依赖项都需要重新构建、重新链接等。

我的偏好是将程序分成存在这种相互依赖关系的小库或包（例如，StoreKit.framework 是一个小包/库）——但是将这些库/框架/包填充到标头中并不能解决任何问题。此外，前向声明和将数据存储在类延续中或`@implementation`可以显着减少依赖关系（因为您可以将包含的库/标题本地化为仅必要的翻译）。

最后，在惰性包含之后进行清理非常耗时，尤其是当有很多并且您一直等到项目的构建时间慢得无法忍受时。基本上，你必须回去挑选不必要的依赖关系，重建，重复（几天）。

> 如果甚至不使用对其他文件的引用，是否有任何可观的成本？

绝对地。你的项目越大，惰性包含变得越糟糕。大型项目中的一些惰性包含可能会在大多数已编译文件中添加数万或数十万行，并可能触发对许多源代码的频繁重新编译。这大大增加了构建过程的复杂性——CPU 需求上升，RAM 使用率上升，磁盘 IO 上升......随着代码库/项目复杂性的增加，这再次成为一个更大的问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-22T17:56:27.320

继续做吧。除非您包含的标头很大并且您没有使用预编译的标头，否则您不应该看到任何差异。正如其他人所说，`#import`是一个预处理器指令。这没有运行时后果，在许多情况下也没有显着的编译时间后果。

# java - File.toURL() 已弃用？

> ID：777423
> 
> 赞同：19
> 
> 时间：2009-04-22T14:15:02.780
> 
> 标签：java, url, io

为什么`java.io.File.toURL()`不推荐使用该功能？我需要传递一个`Toolkit.createImage()`接受 URL 对象的 URL。Javadoc 建议我使用`File.toURI().toURL()`. 然而：

`C:\Documents and settings\Administrator\...`

变成：

`C:\Documents%20and%20settings\Administrator\...`

这显然是一个无效的文件位置。我发现 File.toURL() 可以创建没有转义的 URL，但是它已被弃用。虽然它有效，但我害怕使用已弃用的功能。什么是不被弃用的方法可以做同样的事情？

编辑：现在我的代码看起来像：

```
spriteImage1 = tkit.createImage(new File("./images/sprite1.png").getCanonicalFile().toURL()); 
```

编辑：我需要从我的 .jar 文件之外的文件夹创建一个图像。我需要一个相对位置（“./images/sprite1.png”）。当我尝试为它提供相对路径时，方法 createImage(String) 会引发异常。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2011-05-26T21:02:08.903

利用：

```
URL url2 = file.toURI().toURL(); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-04-22T14:19:39.727

它没有按照[这个错误](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6179468)正确处理特殊字符。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2009-04-22T14:23:43.417

不是更容易使用[`Toolkit.createImage(File.getPath());`](http://java.sun.com/javase/6/docs/api/java/awt/Toolkit.html#createImage(java.lang.String))吗？

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-04-22T14:24:38.890

为什么不直接使用[带有字符串](http://java.sun.com/javase/6/docs/api/java/awt/Toolkit.html#createImage(java.lang.String))`createImage`文件名的函数呢？

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-04-25T14:34:21.593

我认为这个问题的正确答案是这个链接中公开的答案[http://www.jguru.com/faq/view.jsp?EID=1280051](http://www.jguru.com/faq/view.jsp?EID=1280051)

如上面的链接所示，正确的方法是：

```
// Supposing f is the referenced file in code and we want to
// get an URL instance without deprecation warnings.
URL externalForm = f.toURI().toURL(); 
```

MalformedURLException 没有任何问题，因为问题是关于方法 file.toURL() 的弃用。

希望这会有所帮助。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-22T14:26:08.573

您可以考虑使用[ImageIO](http://java.sun.com/javase/6/docs/api/javax/imageio/ImageIO.html#read(java.io.File))作为替代方案。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-02-07T17:22:33.100

我认为您必须以这种方式编写网址

> C:/文档和设置/管理员/...

不在这

> C:\文档和设置\管理员...

# c# - wsdl s：时间类型在 C# 中不起作用

> ID：777428
> 
> 赞同：0
> 
> 时间：2009-04-22T14:15:52.280
> 
> 标签：c#, visual-studio-2008, soap, wsdl, types

我正在向外部 Web 服务发送 SOAP 请求。有几个字段组成请求，其中一个定义为：时间类型。

我想将此时间字段设置为一个值，但 c# 只接受日期时间类型，而不仅仅是时间。

```
...
soapClient soapService = new soapClient();
sendTime soapRequest = new sendTime();

soapRequest.TimeOfArrival = Convert.ToDateTime("09:00:00");
... 
```

所以我必须进行转换，因为 TimeOfArrival 字段设置为 s:time 并且出于某种原因 c# 要求 as:time 的格式为 datetime。

如果我只是执行以下操作：

```
soapRequest.TimeOfArrival = "09:00:00"; 
```

我收到错误“无法将类型“字符串”隐式转换为“System.DateTime”

那么如何将字段设置为仅一次？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-22T14:21:49.880

如果您使用 VS2k8 从 WSDL 链接构造 SOAP 接口，那么 soapRequest.TimeOfArrival 将是正确的 C# 类型以匹配 SOAP 类型。

如果 C# 没有完全匹配的类型，那么它将使用最合适的类型，我相信，在内部进行任何适当的调整。在此基础上，您的第一段代码是正确的方法。

# macos - Mac OS X (Intel) 上的 EFI 控制台

> ID：777437
> 
> 赞同：10
> 
> 时间：2009-04-22T14:17:13.820
> 
> 标签：macos, firmware

根据ADC文档：

> 您可以通过在启动时按住 Command-Option-OF 来访问 Open Firmware。

然而，实际上这不适用于当前的硬件。有谁知道是否有办法（通过触发键等）进入现代架构（即英特尔）Mac 上的 EFI 控制台？

编辑：我正在尝试设置（和记录）各种内核调试环境。

在试验 OS X 的引导加载机制时，我得出以下结论：

*   至少有 3 种不同的架构：

    1.  开放固件（PowerPC 硬件）

    2.  EFI，其中 rEFIt 正常工作

    3.  在早期的英特尔机器上使用的过渡（？）EFI [32 位？]，其中 rEFIt 不起作用

我在遇到第 3 种情况后发布了这个问题，这似乎发生在 Core Duo（不是 Core 2 Duo！）机器上：结果是，一旦安装了 rEFIt，rEFIt 菜单确实会在启动时正确显示，但是是无法使用，因为它没有接收到键盘或鼠标输入（没有加载 USB 驱动程序？）并且最终*总是*最终引导到编号最高的引导分区。

因此，在搜索 ADC 文档并寻找在启动时进入固件/EFI 控制台的方法时，我遇到了 ADC 的（有点过时的）声明 [见上文]，并认为询问 SO 可能很有用如果有人知道替代方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-22T22:38:36.487

只有具有 PowerPC 架构的 Mac 具有[Open Firmware](http://en.wikipedia.org/wiki/Open_Firmware)。较新的基于 Intel 的 mac 具有[EFI](http://en.wikipedia.org/wiki/Extensible_Firmware_Interface)。由于这些固件完全不同，它们的功能并不相同。

AFAIK EFI 没有 Open Firmware [Access](http://en.wikipedia.org/wiki/Open_Firmware#Access)的相应功能。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-04-24T11:52:45.433

以下引用来自[MacForensics.pdf](http://www.macosxforensics.com/Downloads/files/MacForensics.pdf)

> Apple 不提供任何直接访问 EFI 的工具。启动时没有可用于输入 EFI 的键序列。但是，有一些实用程序可以访问它。Sourceforge.net 上提供了一个这样的工具 rEFIt。撰写本文时的链接是[http://refit.sourceforge.net/](http://refit.sourceforge.net/)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-23T07:41:15.763

正如已经指出的那样，英特尔 Mac 具有 EFI。[但是，从安装了rEFIT](http://refit.sourceforge.net/)的 CD 启动（下载“6.5M ISO 磁盘映像”，使用磁盘工具刻录到磁盘，然后按住“C”键重新启动），您可以选择一个选项来**启动 EFI shell**（它的我的 Mac 上底行最左边的图标）这可能是你想要的？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-22T14:34:39.847

Refit ( [http://refit.sourceforge.net/](http://refit.sourceforge.net/) ) 是一个“启动菜单和维护工具包”，但我不确定它是否涵盖与 Open Firmware 控制台相同的功能。

# json - JSON 是否有查询语言？

> ID：777455
> 
> 赞同：245
> 
> 时间：2009-04-22T14:21:42.563
> 
> 标签：json, nosql, web-standards, querying, dynamic-queries

是否有（大致）SQL 或类似 XQuery 的语言来查询 JSON？

我正在考虑可以很好地映射到 JSON 的非常小的数据集，在其中很容易回答诸如“Y > 3 时 X 的所有值是多少”之类的查询，或者执行通常的 SUM / COUNT 类型操作。

作为完全虚构的示例，如下所示：

```
[{"x": 2, "y": 0}}, {"x": 3, "y": 1}, {"x": 4, "y": 1}]

SUM(X) WHERE Y > 0     (would equate to 7)
LIST(X) WHERE Y > 0    (would equate to [3,4]) 
```

我认为这在客户端和服务器端都可以工作，结果将转换为适当的特定于语言的数据结构（或者可能保存为 JSON）

快速谷歌搜索表明人们已经考虑过它并实现了一些东西（[JAQL](http://www.jaql.org/release/0.1/jaql-overview.html)），但似乎还没有出现标准用法或一组库。虽然每个功能单独实现都相当简单，但如果有人已经做对了，我不想重新发明轮子。

有什么建议么？

编辑：这可能确实是个坏主意，或者 JSON 可能是我所想的过于通用的格式。想要一种查询语言而不是根据需要直接执行 summing/etc 函数的原因是我希望构建根据用户输入动态查询。有点像“我们不需要 SQL，我们可以编写我们需要的函数”的论点。最终，要么失控，要么您最终编写自己的 SQL 版本，因为您将其推得越来越远。（好吧，我知道这是一个有点愚蠢的论点，但你明白了..）

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2009-04-24T18:28:41.613

当然，怎么样：

*   [json 路径](http://goessner.net/articles/JsonPath/)。
*   [json查询](https://www.npmjs.com/package/json-query)

它们似乎都在进行中，但在某种程度上都在起作用。它们在概念上也类似于 XPath 和 XQuery；即使 XML 和 JSON 具有不同的概念模型（分层与对象/结构）。

*编辑*2015 年 9 月：实际上现在有[JSON 指针](https://www.rfc-editor.org/rfc/rfc6901)标准，允许非常简单有效地遍历 JSON 内容。它不仅被正式指定，而且被许多 JSON 库支持。因此，我将其称为实际真正有用的标准，尽管由于其表达能力有限，它本身可能被视为查询语言，也可能不被视为查询语言。

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2009-04-29T14:49:03.643

[我会推荐我正在从事的名为 jLinq 的项目](http://www.hugoware.net/Projects/jLinq)。我正在寻找反馈，所以我很想听听你的想法。

如果允许您编写类似于在 LINQ 中的查询...

```
var results = jLinq.from(records.users)

    //you can join records
    .join(records.locations, "location", "locationId", "id")

    //write queries on the data
    .startsWith("firstname", "j")
    .or("k") //automatically remembers field and command names

    //even query joined items
    .equals("location.state", "TX")

    //and even do custom selections
    .select(function(rec) {
        return {
            fullname : rec.firstname + " " + rec.lastname,
            city : rec.location.city,
            ageInTenYears : (rec.age + 10)
        };
    }); 
```

它也是完全可扩展的！

文档仍在进行中，但您仍然可以在线尝试。

* * *

## 回答 #3

> 赞同：49
> 
> 时间：2011-10-18T18:42:44.523

更新：[XQuery 3.1](https://www.w3.org/TR/xquery-31/)可以查询 XML 或 JSON - 或同时查询两者。[XPath 3.1](https://www.w3.org/TR/xpath-31/)也可以。

该列表正在增长：

*   [JSONiq](http://jsoniq.org)（基于 XQuery）
*   [UNQL](http://www.unqlspec.org/)（如 SQL）
*   [JaQL](https://code.google.com/p/jaql/)（函数式）
*   [JsonPath](http://goessner.net/articles/JsonPath/)（类似 XPath）
*   [Json Query](https://github.com/mmckegg/json-query)（类似于 XPath）
*   [GraphQL](http://graphql.org/)（基于模板，类型化）

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2015-09-06T07:34:04.957

JMESPath 工作起来非常简单而且效果很好：http: [//jmespath.org/](http://jmespath.org/)。它有一个完整的规范和多种语言的库。Amazon 在 AWS 命令​​行界面中使用它，因此它必须非常稳定。

### 语法示例：

```
// Select a single item
people[1].firstName

// Select a slice of an array
people[0:5]

// Select all the first names
people[*].firstName

// Select all first names based on search term
people[?state=='VA'].firstName

// Count how many people are over 35
length(people[?age>`35`])

// Select only the name and age of people over 35
people[?age>`35`].{name: name, age: age}

// Join expressions together to sort and join elements into a string
people[?state == 'WA'].name | sort(@) | join(', ', @) 
```

[您可以在docs](https://jmespath.org/tutorial.html)中使用更多实时示例。

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2018-03-04T01:28:25.450

[jq](http://stedolan.github.io/jq/)是一种**J** SON**查询**语言，主要用于命令行，但绑定到多种编程语言（Java、node.js、php...），甚至可以通过[jq-web](https://github.com/fiatjaf/jq-web)在浏览器中使用。jq 基于 C 的实现通常称为“jq”，基于 Go 的版本称为[“gojq”](https://github.com/itchyny/gojq)。

以下是基于原始问题的一些插图，以这个 JSON 为例：

```
 [{"x": 2, "y": 0}}, {"x": 3, "y": 1}, {"x": 4, "y": 1}] 
```

> SUM(X) 其中 Y > 0（等于 7）

```
map(select(.y > 0)) | add 
```

> LIST(X) WHERE Y > 0（相当于 [3,4]）

```
map(.y > 0) 
```

## jq 语法扩展了 JSON 语法

每个 JSON 表达式都是一个有效的 jq 表达式，`[1, (1+1)]`并且 {"a": (1+1)}` 等表达式说明了 jq 如何扩展 JSON 语法。

一个更有用的例子是 jq 表达式：

```
{a,b} 
```

给定 JSON 值`{"a":1, "b":2, "c": 3}`，其计算结果为`{"a":1, "b":2}`。

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2012-02-17T04:21:41.533

内置[`array.filter()`方法](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/filter)使这些所谓的 javascript 查询库中的大多数都过时了

您可以在委托中放置尽可能多的条件：简单比较、startsWith 等。我还没有测试过，但您也可以嵌套过滤器来查询内部集合。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2009-04-26T02:24:46.563

如果您使用的是 .NET，那么[Json.NET](http://james.newtonking.com/projects/json-net.aspx)支持 JSON 之上的 LINQ 查询。这篇[文章](http://james.newtonking.com/archive/2008/03/02/json-net-2-0-beta-2.aspx)有一些例子。它支持过滤、映射、分组等。

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2012-11-08T19:12:43.147

另一种看待这种情况的方法是使用[mongoDB](http://www.mongodb.org/display/DOCS/Inserting#Inserting-JSON)您可以将 JSON 存储在 mongo 中，然后通过 mongodb 查询语法对其进行查询。

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2013-06-23T00:15:16.560

[ObjectPath](http://adriank.github.io/ObjectPath/)是用于复杂或未知结构的 JSON 文档的简单且轻量级的查询语言。它类似于 XPath 或 JSONPath，但由于嵌入式算术计算、比较机制和内置函数而更强大。

![例子](https://i.stack.imgur.com/G2d5K.png)

Python 版本成熟并用于生产。JS 仍处于测试阶段。

可能在不久的将来，我们将提供一个成熟的 Javascript 版本。我们还想进一步开发它，以便它可以作为 Mongo 查询的更简单替代方案。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2011-08-11T13:03:05.287

好的，这篇文章有点老了，但是......如果你想在 JS 对象上使用原生 JSON（或 JS 对象）进行类似 SQL 的查询，请查看[https://github.com/deitch/searchjs](https://github.com/deitch/searchjs)

它既是一种完全用 JSON 编写的 jsql 语言，又是一种参考实现。你可以说，“我想在一个数组中找到 name==="John" && age===25 的所有对象：

```
{name:"John",age:25,_join:"AND"} 
```

参考实现 searchjs 在浏览器以及节点 npm 包中工作

```
npm install searchjs 
```

它还可以执行复杂连接和否定 (NOT) 之类的操作。它本机忽略大小写。

它还没有进行求和或计数，但在外面做这些可能更容易。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2020-11-21T16:47:02.447

如果你想使用纯 javascript 试试这个：

```
var object = { result: { data: { point1: "x", value: 2 }, foo: { bar: 7 } } },
    path = 'result.data.value',
    getValue = (o, p) => p.split('.').reduce((r, k) => r[k], o);

console.log(getValue(object, path));
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2012-12-03T21:42:54.720

这里有一些简单的 JavaScript 库也可以解决问题：

*   [Dollar Q](https://github.com/furf/dollar-q)是一个不错的轻量级库。它对 jQuery 流行的链接语法有一种熟悉的感觉，并且只有 373 SLOC。
*   [SpahQL](http://angryamoeba.co.uk/spahql-announce/)是一种功能齐全的查询语言，其语法类似于 XPath ( [Homepage](http://danski.github.com/spahql/) , [Github](https://github.com/danski/spahql)
*   [jFunk](http://code.google.com/p/jfunk/)是一种进行中的查询语言，其语法类似于 CSS/jQuery 选择器。它看起来很有希望，但除了最初的提交之外没有任何发展。

*   （2014 年添加）：[jq 命令行工具](https://stedolan.github.io/jq/)语法简洁，但不幸的是它是 ac 库。示例用法：

    `< package.json jq '.dependencies | to_entries | .[] | select(.value | startswith("git")) | .key'`

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2015-09-16T11:57:32.303

在[MongoDB](https://www.mongodb.com/)中，这就是它的工作方式（在 mongo shell 中，存在用于您选择的语言的驱动程序）。

```
db.collection.insert({"x": 2, "y": 0}); // notice the ':' instead of ','
db.collection.insert({"x": 3, "y": 1});
db.collection.insert({"x": 4, "y": 1});

db.collection.aggregate([{$match: {"y": {$gt: 0}}}, 
                         {$group: {_id: "sum", sum: {$sum: "$x"}}}]);
db.collection.aggregate([{$match: {"y": {$gt: 0}}}, 
                         {$group: {_id: "list", list: {$push: "$x"}}}]); 
```

前三个命令将数据插入到您的集合中。（只需启动`mongod`服务器并与`mongo`客户端连接。）

接下来的两个处理数据。[`$match`](http://docs.mongodb.org/manual/reference/operator/aggregation/match/)过滤器，分别[`$group`](http://docs.mongodb.org/manual/reference/operator/aggregation/group/)应用`sum`和`list`。

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2019-04-30T22:23:26.510

查看[https://github.com/niclasko/Cypher.js](https://github.com/niclasko/Cypher.js)（注意：我是作者）

它是 Cypher 图形数据库查询语言和图形数据库的零依赖 Javascript 实现。它在浏览器中运行（用 Firefox、Chrome、IE 测试）。

与问题相关。它可用于查询 JSON 端点：

```
load json from "http://url/endpoint" as l return l limit 10 
```

下面是一个查询复杂 JSON 文档并对其执行分析的示例：

[Cypher.js JSON 查询示例](https://niclasko.github.io/CypherJS/?load%20json%20from%20%22https://raw.githubusercontent.com/niclasko/niclasko.github.io/master/data/week_2018_38.json%22%20as%20l%20with%20collect(l)%20as%20rows%20unwind%20rows%20as%20row%20unwind%20row[%27values%27]%20as%20v%20with%20rows[0].datasource%20as%20datasource,%20row.key[0].en%20as%20series,%20collect(%7Bd:%20v[0],%20v:%20v[1]%7D)%20as%20c,%20stdev(v[1])%20as%20series_std_dev,%20sum(v[1])/count(1)%20as%20series_avg%20unwind%20c%20as%20e%20return%20datasource,%20series,%20tostring(todate(e.d))%20as%20date,%20e.v%20as%20val,%20(e.v-series_avg)/series_std_dev%20as%20val_z_score,%20series_std_dev,%20series_avg)

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2019-06-30T09:53:37.447

你可以使用[`linq.js`](http://neue.cc/reference.htm).

这允许从对象数据集中使用聚合和选择，作为其他结构数据。

```
var data = [{ x: 2, y: 0 }, { x: 3, y: 1 }, { x: 4, y: 1 }];

// SUM(X) WHERE Y > 0     -> 7
console.log(Enumerable.From(data).Where("$.y > 0").Sum("$.x"));

// LIST(X) WHERE Y > 0    -> [3, 4]
console.log(Enumerable.From(data).Where("$.y > 0").Select("$.x").ToArray());
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/linq.js/2.2.0.2/linq.js"></script>
```

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2013-01-27T14:49:01.803

据我所知，SpahQL 是其中最有前途和经过深思熟虑的。我强烈建议检查一下。

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2014-01-02T10:55:16.103

我刚刚完成了客户端 JS-lib (defiant.js) 的可发布版本，它可以满足您的需求。使用 defiant.js，您可以使用您熟悉的 XPath 表达式查询 JSON 结构（没有 JSONPath 中的新语法表达式）。

它是如何工作的示例（在浏览器中查看它[http://defiantjs.com/defiant.js/demo/sum.avg.htm](http://defiantjs.com/defiant.js/demo/sum.avg.htm)）：

```
var data = [
       { "x": 2, "y": 0 },
       { "x": 3, "y": 1 },
       { "x": 4, "y": 1 },
       { "x": 2, "y": 1 }
    ],
    res = JSON.search( data, '//*[ y > 0 ]' );

console.log( res.sum('x') );
// 9
console.log( res.avg('x') );
// 3
console.log( res.min('x') );
// 2
console.log( res.max('x') );
// 4 
```

如您所见，DefiantJS 使用搜索函数扩展了全局对象 JSON，返回的数组通过聚合函数传递。DefiantJS 包含一些其他功能，但这些功能超出了本主题的范围。任何人，您都可以使用客户端 XPath Evaluator 测试该库。我认为不熟悉 XPath 的人会发现这个评估器很有用。
[http://defiantjs.com/#xpath_evaluator](http://defiantjs.com/#xpath_evaluator)

有关 defiant.js 的更多信息
[http://defiantjs.com/](http://defiantjs.com/)
[https://github.com/hbi99/defiant.js](https://github.com/hbi99/defiant.js)

我希望你觉得它有用......问候

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2015-04-30T02:06:18.137

1.  Google 有一个名为**lovefield**的项目；刚刚发现它，它看起来很有趣，尽管它比仅仅添加下划线或 lodash 更复杂。

    [https://github.com/google/lovefield](https://github.com/google/lovefield)

> Lovefield 是一个用纯 JavaScript 编写的关系查询引擎。它还提供了在浏览器端持久化数据的帮助，例如使用 IndexedDB 在本地存储数据。它提供**类似 SQL 的语法**并且可以跨浏览器工作（目前支持 Chrome 37+、Firefox 31+、IE 10+ 和 Safari 5.1+...

* * *

2.  这个领域最近另一个有趣的条目叫做**jinqJs**。

    [http://www.jinqjs.com/](http://www.jinqjs.com/)

    简要回顾一下[示例](http://www.jinqjs.com/Examples)，它看起来很有希望，而且[API 文档](http://www.jinqjs.com/Help)似乎写得很好。

* * *

```
function isChild(row) {
  return (row.Age < 18 ? 'Yes' : 'No');
}

var people = [
  {Name: 'Jane', Age: 20, Location: 'Smithtown'},
  {Name: 'Ken', Age: 57, Location: 'Islip'},
  {Name: 'Tom', Age: 10, Location: 'Islip'}
];

var result = new jinqJs()
  .from(people)
  .orderBy('Age')
  .select([{field: 'Name'}, 
     {field: 'Age', text: 'Your Age'}, 
     {text: 'Is Child', value: isChild}]); 
```

* * *

> jinqJs 是一个小型、简单、轻量级和可扩展的 JavaScript 库，没有依赖项。jinqJs 提供了一种简单的方法来对返回 JSON 响应的 javaScript 数组、集合和 Web 服务执行类似 SQL 的查询。jinqJs 类似于 Microsoft 的 .Net Lambda 表达式，它提供了类似的功能来使用类似 SQL 的语法和谓词功能来查询集合。jinqJs 的目的是为熟悉 LINQ 查询的程序员提供类似 SQL 的体验。

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2020-03-07T18:37:08.480

PythonQL 提供了一种嵌入式语法，恕我直言，这是对 SQL 的改进，主要是因为 `group`, `window`, `where`,`let`等可以自由混合。

```
$ cat x.py
#coding: pythonql
data = [{"x": 2, "y": 0}, {"x": 3, "y": 1}, {"x": 4, "y": 1}]
q = [x match {'x': as x, 'y': as y} in data where y > 0]
print(sum(q))
print(list(q))

q = [x match {'x': as x, 'y': as y} as d in data where d['y'] > 0]
print(sum(q)) 
```

此代码显示您的问题的两个不同答案，具体取决于您处理整个结构或仅处理值的需要。执行会给你预期的结果。

```
$ python x.py
7
[3, 4]
7 
```

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2009-04-22T14:42:02.403

我将支持仅使用您自己的 javascript 的概念，但对于更复杂的东西，您可能会查看[dojo data](http://www.dojotoolkit.org/book/dojo-book-0-9/part-3-programmatic-dijit-and-dojo/data-retrieval-dojo-data-0)。没用过，但看起来它为您提供了您正在寻找的大致那种查询界面。

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2009-04-24T21:11:24.437

当前的 Jaql 实现针对使用 Hadoop 集群的大型数据处理，因此它可能超出您的需要。但是，它可以在没有 Hadoop 集群的情况下轻松运行（但仍然需要 Hadoop 代码及其依赖项才能编译，大部分都包含在内）。可以嵌入到 Javascript 和浏览器中的 Jaql 的小型实现将是该项目的一个很好的补充。

您上面的示例很容易用 jaql 编写：

```
$data = [{"x": 2, "y": 0}, {"x": 3, "y": 1}, {"x": 4, "y": 1}];

$data -> filter $.y > 0 -> transform $.x -> sum(); // 7

$data -> filter $.y > 0 -> transform $.x; // [3,4] 
```

当然，还有更多。例如：

```
// Compute multiple aggregates and change nesting structure:
$data -> group by $y = $.y into { $y, s:sum($[*].x), n:count($), xs:$[*].x}; 
    // [{ "y": 0, "s": 2, "n": 1, "xs": [2]   },
    //  { "y": 1, "s": 7, "n": 2, "xs": [3,4] }]

// Join multiple data sets:
$more = [{ "y": 0, "z": 5 }, { "y": 1, "z": 6 }];
join $data, $more where $data.y == $more.y into {$data, $more};
    // [{ "data": { "x": 2, "y": 0 }, "more": { "y": 0, "z": 5 }},
    //  { "data": { "x": 3, "y": 1 }, "more": { "y": 1, "z": 6 }},
    //  { "data": { "x": 4, "y": 1 }, "more": { "y": 1, "z": 6 }}] 
```

Jaql 可以在[http://code.google.com/p/jaql/下载/讨论](http://code.google.com/p/jaql/)

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2014-05-24T20:13:32.757

您还可以使用[Underscore.js](http://underscorejs.org/)，它基本上是一个瑞士刀库来操作集合。使用[`_.filter`](http://underscorejs.org/#filter), [`_.pluck`](http://underscorejs.org/#pluck)，[`_.reduce`](http://underscorejs.org/#reduce)您可以执行类似 SQL 的查询。

```
var data = [{"x": 2, "y": 0}, {"x": 3, "y": 1}, {"x": 4, "y": 1}];

var posData = _.filter(data, function(elt) { return elt.y > 0; });
// [{"x": 3, "y": 1}, {"x": 4, "y": 1}]

var values = _.pluck(posData, "x");
// [3, 4]

var sum = _.reduce(values, function(a, b) { return a+b; });
// 7 
```

Underscore.js 适用于客户端和服务器端，是一个值得注意的库。

您还可以使用[Lo-Dash](http://lodash.com/)，它是 Underscore.js 的一个分支，具有更好的性能。

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2015-06-12T11:28:17.590

只要有可能，我会将所有查询转移到服务器上的后端（转移到 SQL DB 或其他本机数据库类型）。原因是查询会更快、更优化。

我知道 JSON 可以是独立的，并且可能有 +/- 用于查询语言，但如果您将数据从后端检索到浏览器，我看不到优势，就像大多数 JSON 用例一样。在后端查询和过滤以获取所需的尽可能小的数据。

如果出于某种原因您需要在前端查询（主要是在浏览器中），那么我建议只使用 array.filter （为什么要发明其他东西？）。

也就是说，我认为更有用的是 json 的转换 API……它们更有用，因为一旦你有了数据，你可能想以多种方式显示它。但是，同样，您可以在服务器上执行大部分操作（这可能比在客户端上更容易扩展）——如果您使用的是服务器<-->客户端模型。

只值我的 2 便士！

# python - 没有 HTML 转义的 Django 表单值

> ID：777458
> 
> 赞同：4
> 
> 时间：2009-04-22T14:22:14.120
> 
> 标签：python, django-forms, currency, symbols

我需要设置 Django forms.ChoiceField 来显示货币符号。由于 django 表单转义了所有 HTML ASCII 字符，我无法获得 $ ( **€** ) 或 £ ( **£** ) 以显示货币符号。

```
<select id="id_currency" name="currency">
    <option value="&amp;#36;">&#36;</option>
    <option value="&amp;pound;">&pound;</option>
    <option value="&amp;euro;">&euro;</option>
</select> 
```

您能否建议任何方法来显示实际的 HTML 货币字符，至少对于选项的值部分？

```
<select name="currency" id="id_currency">
    <option value="&amp;#36;">$</option>
    <option value="&amp;pound;">£</option>
    <option value="&amp;euro;">€&lt;/option>
</select> 
```

**更新：** 请注意我使用**Django 0.96**，因为我的应用程序在 Google App Engine 上运行。
上面的***<SELECT>***是使用 Django Forms 呈现的。

```
currencies = (('&#36;', '&#36;'), 
              ('&pound;', '&pound;'), 
              ('&euro;', '&euro;'))    
currency = forms.ChoiceField(choices=currencies, required=False) 
```

谢谢，
***阿伦。***

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-22T14:36:34.633

您可以在模板中使用“ [safe ”或在视图中使用“](http://docs.djangoproject.com/en/dev/topics/templates/#how-to-turn-it-off) [mark_safe](http://docs.djangoproject.com/en/dev/howto/custom-template-tags/#filters-and-auto-escaping) ”，在模板中关闭自动转义，或者在表单中使用 Unicode 字符而不是 HTML 实体。

**使用`mark_safe`**

```
from django.utils.safestring import mark_safe

currencies = ((mark_safe('&#36;'), mark_safe('&#36;')), 
              (mark_safe('&pound;'), mark_safe('&pound;')), 
              (mark_safe('&euro;'), mark_safe('&euro;'))) 
```

**使用`autoescape off`**

作为模板中的替代方案，您可以[关闭代码块的转义](http://docs.djangoproject.com/en/dev/topics/templates/#for-template-blocks)。标签之间的所有`{% autoescape off %}`内容`{% endautoescape %}` 都不会被转义。

**使用 Unicode 字符**

当没有其他工作时，请尝试以下操作。在包含您的货币元组的文件中，将以下行作为第一行或第二行：

```
# coding=utf-8 
```

然后在您的货币元组中放入实际的 unicode 字符：

```
currencies = (('$', '$'), 
              ('£', '£'), 
              ('€', '€')) 
```

# c# - 如何在 .net 中的另一台计算机上运行进程

> ID：777466
> 
> 赞同：2
> 
> 时间：2009-04-22T14:24:00.280
> 
> 标签：c#, windows-services, parallel-processing, appdomain

假设我有一个名为“MyService”的 Windows 服务和一个名为“MyEXE”的可执行文件，位于我网络上的几台计算机上。

是否可以（从“MyService”中）在不同/同一台计算机上启动多个“MyEXE”实例，让它执行一些任务并将真/假结果返回给“MyService”中的回调方法？

像这样的东西

```
class MyService : ServiceBase
{
    delegate void UpdateCallBack(int id, bool updated)
    void CheckForUpdates()
    {
        bool updatesExist = someService.GetCurrentVersion() != currentVersion;
        if(updatesExist)
        {
            UpdatePC("C:\Program Files\MyApp.exe", 1, UpdateComplete);
            UpdatePC("\\somepc\Program Files\MyApp.exe", 1, UpdateComplete);
            UpdatePC("\\mypc\Program Files\MyApp.exe", 1, UpdateComplete);
        }
    }

    void UpdatePC(string filePath, int id, UpdateCallBack callback)
    {
       //This is where I am kind of lost 
       SomeEXERunner runner = new SomeEXERunner();
       runner.Run(filePath,"-u",id,callback);
    }

    void UpdateComplete(int id, bool updated)
    {
       //do something
       if(!updated)
          EmailService.NotifyAdmin("PC Not updated", id);
    }
} 
```

也许我弄错了整个架构！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-22T14:31:00.997

您可以做的一件事是在单独的进程中从 Sysinternals运行 PsExec 工具 ( [http://technet.microsoft.com/en-us/sysinternals/bb897553.aspx](http://technet.microsoft.com/en-us/sysinternals/bb897553.aspx) )，将结果通过管道传输到文件，然后将其解析为图成功/失败。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-22T14:51:26.220

你可以像 Ian 所说的那样使用 PSexec，但我认为 WMI 是一个更好的方法，例如[http://www.codeproject.com/KB/cs/EverythingInWmi02.aspx](http://www.codeproject.com/KB/cs/EverythingInWmi02.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-03-06T04:34:02.880

一种解决方案是使用 psexec，另一种是......[做 psexec 所做](http://www.ntkernel.com/w&p.php?id=15)的事情：

*   将服务 exe 作为资源嵌入到您的应用中
*   将资源复制到 \\remotesystem\admin$
*   使用 SCM 在 \\remotesystem 上启动此 exe 作为服务
*   连接请求服务来完成工作
*   从 SCM 卸载服务

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-03-06T04:42:57.683

另请参阅任务管理器 API。您现在安排一个任务运行一次 + 1 秒，等等。它是基于 COM 的，因此非常适合 .NET。

与 psexec 不同，这不会在目标机器上安装任何东西。

# c# - 检查 SuspendLayout

> ID：777467
> 
> 赞同：18
> 
> 时间：2009-04-22T14:24:14.087
> 
> 标签：c#, .net, windows, winforms

C# 中有没有办法检查对象是否被挂起？我有一个 TreeView，我需要知道它是否仍处于挂起状态。

```
 myTreeView.BeginUpdate();
 myTreeView.SuspendLayout();

 // Do Stuff.

 myTreeView.EndUpdate();
 myTreeView.ResumeLayout(); 
```

因为我在递归函数中有这段代码，所以我想知道 TreeView 是否已经被挂起。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-04-22T17:50:41.077

根据 verminity 的回答，您确实有一个选择：

使用以下类

```
public class SuspendAwareTreeView : TreeView    
{
    public readonly T RealControl;
    private int suspendCount;

    public bool IsSuspended 
    { 
        get { return suspendCount > 0; }
    }

    public Suspendable(T real) { this.RealControl = real; }

    public void SuspendLayout() 
    { 
        this.suspendCount++;
        this.RealControl.SuspendLayout();
    }

    public void ResumeLayout() 
    { 
        this.RealControl.ResumeLayout();
        this.suspendCount--;
    }
} 
```

然后将此类用于内部需要暂停它的所有内容。

显然，如果您将类传递给只需要一个控件的东西，或者如果您控制之外的其他东西设置了它，那么这显然是行不通的。

如果是这种情况，您将被迫采用各种不太令人愉快的解决方案：

*   编写一个新的用户控件，它包装 TreeView 并推迟对其的所有调用，但保持挂起状态。
    *   生成的实例不再是会导致问题的“is-a TreeView”。
    *   维护工作量可能很高。
    *   如果由于某种原因树视图决定暂停自身，这将中断。
    *   新版本的运行时不太可能破坏任何东西，您根本不会毫不费力地获得新功能。
*   实现一个全新的 TreeViewEx 来公开这个状态
    *   生成的实例不再是会导致问题的“is-a TreeView”。
    *   维护工作量可能很高
    *   因为你有完全的控制权，所以永远不会中断，虽然可以与原来的不同
    *   新版本的运行时不太可能破坏任何东西，如果不付出大量努力（可能违反法律/ EULA），您根本不会获得新功能。
*   违反封装
    *   没有改变类型系统，其他一切都继续工作。
    *   运行时更改的维护工作量可能很高
    *   如果运行时在它们下面发生变化，应用程序将中断

对于您的需求**，当且仅当**您控制运行时版本时，这完全在（即受控的公司环境）上运行，以下**邪恶**但有效的黑客攻击是合适的。只要您在升级的任何时候进行测试，它就可以毫不费力地继续工作。

```
public class ControlInvader
{
  private static readonly System.Reflection.FieldInfo layoutSuspendCount = 
      typeof(Control).GetField("layoutSuspendCount",
          System.Reflection.BindingFlags.Instance | 
          System.Reflection.BindingFlags.NonPublic);

  private readonly Control control;        

  public bool IsSuspended 
  {
    get 
    {
      return 0 != (byte)layoutSuspendCount.GetValue(this.control);
    }
  }

  public Suspendable(Control control) { this.control = control; }     
} 
```

将此附加到您的 TreeView，然后您可以随时检查该值。

重申一下，对于底层运行时的版本不受严格控制并且您可以处理可能的重大努力来解决重大更改的环境，这是完全不合适的*。*您最好包含一个静态初始化程序，该初始化程序检查该字段是否实际存在并且是正确的类型，如果不存在则中止。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2010-03-24T16:41:01.827

好吧，这是一个迟到的答案，但在内部，控件正在跟踪计数，并且只会在最外面的恢复语句中恢复。那么为什么你首先关心它，你只需确保你调用了暂停并在 finally 块中恢复它：

```
void Recursive(Control c)
{
  c.SuspendLayout();
  try
  {
    if (existCondition) return;
    // do stuff
    Recursive(c);
  }
  finally
  {
    c.ResumeLayout(true);
  }
} 
```

这是有效的，因为以下是 Control 在内部按以下顺序对您的呼叫做出反应的方式：

```
c.SuspendLayout() // 1st call suspends layout
c.SuspendLayout() // 2nd and subsequent call only increase the count and does nothing.
....
c.ResumeLayout(true) // this decrease the count to 1 and does NOT actually resumes layout.
c.ResumeLayout(true) // this set the count to 0 and REALLY resumes layout. 
```

高温高压

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-22T14:50:06.333

快速查看 System.Windows.Forms.Control 中的 SuspendLayout 方法的[Reflector](http://www.red-gate.com/products/reflector/)显示以下内容：

```
public void SuspendLayout()
{
    this.layoutSuspendCount = (byte) (this.layoutSuspendCount + 1);
    if (this.layoutSuspendCount == 1)
    {
        this.OnLayoutSuspended();
    }
} 
```

由于它没有设置任何公共标志，并且 OnLayoutSuspended() 方法是内部的，因此似乎无法找出控件何时暂停。

您可以使用新的 Suspend 和 ResumeLayout 方法创建树视图的子类，但由于基本方法不是虚拟的，因此很难保证在所有情况下都会调用它们。

# sql - 如何选择如何在sql中填写#temptable？

> ID：777475
> 
> 赞同：2
> 
> 时间：2009-04-22T14:27:00.397
> 
> 标签：sql, sql-server

好的，我有一个对你来说可能是一个非常简单的问题 Sql 大师在那里......

给定某种布尔值 T，我想用数据集 A（如果 T 为真）或数据集 B（如果 T 为假）填充临时表。我认为这将是如何做到这一点：

```
DECLARE @foo INT
SET @foo = null

IF (@foo is null)
    BEGIN
        SELECT 'foo was null' INTO #TempTable
    END
ELSE
    BEGIN
        SELECT 'foo not null' INTO #TempTable
    END 
```

但这不起作用。我收到一条错误消息，显示“数据库中已经有一个名为 '#TempTable' 的对象”。

显然 Sql 在评估条件之前尝试在每种情况下创建表......？这对我来说似乎很奇怪，但好吧......但是做这样的事情的正确方法是什么？

**编辑：我在 Sql Server 中，但我怀疑这是一个更普遍的问题......但如果我错了，请告诉我。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-22T14:35:01.237

为什么不使用基于集合的解决方案，而不是程序解决方案：

```
SELECT CASE WHEN @foo is null 
            THEN 'foo was null'
            ELSE 'foo not null'
       END                      AS result
INTO  #TempTable 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-22T14:30:45.537

您需要先创建临时表（应该做一次）：

```
CREATE TABLE #TempTable TABLE (
        message VARCHAR(50)
) 
```

，然后发出：

```
DECLARE @foo INT
SET @foo = null

IF (@foo is null)
    BEGIN
        INSERT
        INTO    #TempTable
        SELECT 'foo was null'
    END
ELSE
    BEGIN
        INSERT
        INTO    #TempTable
        SELECT 'foo not null'
    END 
```

可能您想要的不是 a `TEMPORARY TABLE`，而是 a `TABLE VARIABLE`（仅在会话期间存在，并且不会保留在数据库模式中）：

```
DECLARE @foo INT
DECLARE @TempTable TABLE (
        message VARCHAR(50)
        )
SET @foo = null

IF (@foo is null)
    BEGIN
        INSERT
        INTO    @TempTable
        SELECT 'foo was null'
    END
ELSE
    BEGIN
        INSERT
        INTO    @TempTable
        SELECT 'foo not null'
    END 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-22T14:33:14.220

SQL 遇到了这个问题，因为解析步骤注意到有两个`SELECT INTO`语句。即使您的逻辑会规定临时表只会创建一次，解析器仍然会抱怨它。

解决此问题的一种方法是在 s 之后使用`GO`语句`SELECT INTO`，但这不适用于条件逻辑。

否则，只需单独创建表并插入其中，如下所示：

```
CREATE TABLE #TempTable (result varchar(50))

IF @foo is null
BEGIN
   insert into #TempTable values ('foo was null')
END
ELSE
BEGIN
   insert into #TempTable values('foo was not null')
END 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-22T14:31:04.333

该表已经创建，您必须先将其删除，然后再将其插入。

编辑：正如你所说，这不是数据库中已经存在表的问题，你可以尝试这样做 -

```
IF EXISTS (SELECT * FROM sysobjects WHERE object_id = OBJECT_ID(N'#TempTable')
    DROP TABLE #TempTable

CREATE TABLE #TempTable (Col1 INT, ...)

IF TRUE
BEGIN
    INSERT INTO #TempTable
    SELECT VAL1
END
ELSE
BEGIN
    INSERT INTO #TempTable
    SELECT VAL2
END 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-22T15:33:27.897

阅读[什么是延迟名称解析以及为什么需要关注？](http://blogs.lessthandot.com/index.php/DataMgmt/DataDesign/what-is-deferred-name-resolution-and-why)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-22T14:31:44.690

看看这是否有帮助...[链接](http://bytes.com/groups/ms-sql/479687-insert-into-temp-table-based-if-condition)

您必须在选择语句之外创建临时表，然后插入其中。例如，

CREATE TABLE #tmp_table AS SELECT * FROM PRODUCTS WHERE 1 = 2

IF @condition = 0 BEGIN INSERT #tmp_table SELECT * FROM products .... END ELSE ....

# c# - C# 中的 double(C++) 是什么？

> ID：777485
> 
> 赞同：2
> 
> 时间：2009-04-22T14:30:05.583
> 
> 标签：c#, c++, types, double

C#中的`double`类型（C++）是什么？

```
double experience; 
```

起初，我以为是`UInt32`，但不是。如何在 C# 中声明它？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-04-22T14:35:47.490

这是一个取决于您使用的特定 C++ 编译器实现的问题。根据 C++ 标准，双精度类型可以是 4 字节或 8 字节。大多数编译器确实使用 8 个字节。这是最接近的表示

*   4 个字节：浮点数
*   8 个字节：双

参考：http: [//msdn.microsoft.com/en-us/library/cc953fe1.aspx](http://msdn.microsoft.com/en-us/library/cc953fe1.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-22T14:32:32.833

它只是`double`或`Double`。更具体`double`的是`System.Double`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-22T14:32:10.463

C# 中的 Double 是 Double。

双变量1 = 0.123；

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-22T14:33:00.303

不知道问题是什么。C# 中的A与 C++`double`中的 a 相同`double`。`double`不是我所知道的任何主流语言中的整数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-22T14:33:30.897

我不太记得 C++，但`double`C# 中有一个类型。

但是，如果您只想要更大的整数，请查看`long`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-22T14:32:29.823

C# 也有 double 类型。

```
double experience; 
```

应该在 C# 中编译和工作得很好。

# php - 数据库错误：[mysqli.mysqli]：用户已经有超过 'max_user_connections' 的活动连接

> ID：777492
> 
> 赞同：0
> 
> 时间：2009-04-22T14:31:27.093
> 
> 标签：php, mysql, database, mysqli

我有一个每天只有大约 100 人访问的网站，但以用户身份登录时收到以下错误消息：

```
Warning: mysqli::mysqli() [mysqli.mysqli]: (42000/1203): User mexautos_Juan already has more than 'max_user_connections' active connections in /home/mexautos/public_html/kiubbo/data/model.php on line 26

Warning: mysqli::query() [mysqli.query]: Couldn't fetch mysqli in /home/mexautos/public_html/kiubbo/data/model.php on line 87
Query failed 
```

我刷新了几次页面，现在没问题，但是由于我没有那么多用户，我怀疑错误在我的代码中，我应该在哪里寻找它？

谢谢

编辑：这是模型文件：

```
<?php
/* 

    Model is the base class from which the other
    model classes will be derived. It offers basic
    functionality to access databases

*/ 
require_once($_SERVER['DOCUMENT_ROOT'].'/config.php'); 
require_once(SITE_ROOT.'includes/exceptions.php'); 

class Model {

    private $created;
    private $modified;

    static function getConnection()
    {
        /* 

            Connect to the database and return a
            connection or null on failure

        */

        $db = new mysqli (DB_HOST, DB_USER, DB_PASS, DB_NAME);
        if(!$db) {
            echo mysql_error();
            throw new Exception('Could not connect to database', EX_NO_DATABASE_CONNECTION);
        }

        return $db;

    }

    static function execSQL($query)
    {
    /*
            Execute a SQL query on the database
            passing the tablename and the sql query.
            Returns the resultset
    */

        $db = null;
        $results = null;
        //echo "query is $query";

        try
        {
            $db = Model::getConnection();
            $results = $db->query($query);
            if(!$results) {
                throw new Exception('Query failed', EX_QUERY_FAILED );
            }
        }
        catch(Exception $e)
        {
            /*  errors are handled higher in the
                    object hierarchy
            */

            throw $e;
        }

        Model::closeConnection($db);

        return $results;
    }

    static function execSQl2($query)
    {
    /*
            Execute a SQL query on the database
            passing the tablename and the sql query.
            Returns the LAST_INSERT_ID
    */

        $db = null;
        $lastid = null;
        //echo "query is $query";

        try
        {
            $db = Model::getConnection();
            $results = $db->query($query);
            if(!$results) {
                throw new Exception('Query failed', EX_QUERY_FAILED );
            }
            $lastid = $db->insert_id;
        }
        catch(Exception $e)
        {
            /*  errors are handled higher in the
                    object hierarchy
            */

            throw $e;
        }

        Model::closeConnection($db);

        return $lastid;
    }

    function delete($table, $id, $conditions = '')
    {
        $query = "delete from $table where id = $id";
        try
        {
            $db = Model::getConnection();
            $results = Model::execSQL($query);
            if(!$results){
                throw new Exception('Could not delete this object', EX_DELETE_ERROR);
            }
            return $results->num_rows;
        }

        catch(Exception $e)
        {
            throw $e;
        }
    }

    static function closeConnection($db)
    {
        $db->close();
    }

    function getCreated()
    {
        return $this->created;
    }

    function setCreated($value)
    {
        $this->created = $value;
    }

    function getModified()
    {
        return $this->modified;
    }

    function setModified($value)
    {
        $this->modified = $value;
    }

}

?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-22T20:59:02.373

在您的网站上打开数据库连接的每一次点击都使用相同的数据库用户名和密码。您的数据库设置限制了每个用户的连接数，并且您正在超过该最大值。

查看这个 MySQL 手册页： [http ://dev.mysql.com/doc/refman/5.0/en/user-resources.html](http://dev.mysql.com/doc/refman/5.0/en/user-resources.html)

您的模型类不是那么好，因为它似乎在每个单独的查询上打开和关闭数据库连接。这是对资源的非常糟糕的使用，因为打开和关闭连接的成本很高。我会在您的模型对象上编写一个名为 $db->close() 的析构函数，并更改 getConnection() 以打开一次连接，然后每次都返回它。这意味着将您的模型类转换为非静态用法，但在数据库上这样做会容易得多。

无论如何，您的班级正在执行所有连接和断开连接，MySQL 有连接备份，并且在您达到最大用户限制之前它们没有足够快地清除。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-22T14:37:33.507

查看处理数据库连接的代码。你在用游泳池吗？您正在使用其中一种 PHP 数据库抽象框架吗？

您是否在每个数据库访问中处理连接？如果是这样，您正在寻找没有明确释放/关闭数据库连接的代码。（如果你这样做，我建议看这样一篇文章：http: [//www.devshed.com/c/a/PHP/Database-Abstraction-With-PHP/](http://www.devshed.com/c/a/PHP/Database-Abstraction-With-PHP/)）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-22T22:24:16.973

这应该可以解决您的问题，但我没有测试它。区别：如果`getConnection()`第一次调用，则建立并存储连接。其余时间，使用已经建立的连接。

我删除了 closeConnection 中的操作，因为这会使第一个更改无用。尽管从 execSQL 中删除 closeConnection 调用会更好。

通常（据我所知），当脚本终止时数据库连接会自动关闭（只要 mysqli 不支持持久性）。但最好在所有数据库内容完成后手动调用（工作）closeConnection。

```
<?php
class Model {

    private $created;
    private $modified;

    private static $db = false;

    static function getConnection()
    {
        /* 

            Connect to the database and return a
            connection or null on failure

        */

        if (self::$db === false) {
            self::$db = new mysqli (DB_HOST, DB_USER, DB_PASS, DB_NAME);
        }

        if(!self::$db) {
            echo mysql_error();
            throw new Exception('Could not connect to database', EX_NO_DATABASE_CONNECTION);
        }

        return self::$db;
    }

    static function closeConnection()
    {
        // self::$db->close();
    }

    // moar functions (...)
}

?> 
```

并且...我建议使用现有的数据库访问抽象层来避免将来出现此类问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-23T02:19:13.383

这里有两个问题；一个加剧另一个。

@zombat 发现了更大的问题：您不需要为每个查询连接和断开连接。尽管 MySQL 具有快速的设置和拆卸周期，但它会浪费其他资源。在代码的设置步骤中打开一次连接，然后对每个查询重复使用该连接，直到页面结束，这样更有意义。我建议为 mysqli 对象使用实例变量。

（如果您有一个结构，其中有多个数据库并且哪个依赖于对象，那么您需要增强您的数据库处理程序以跟踪它打开了哪些数据库连接，因此它只打开它需要的那些。但这是一个大多数人不需要做的更高级的主题。）

这里出现的“其他资源”是 MySQL 连接。如果 mysqli 正在创建持久连接，它实际上不会关闭与 MySQL 的连接（事实上，它还应该重新使用连接，这样你甚至不会遇到这个问题，但我离题了）。MySQL 超时此类连接的默认值为几个小时，因此您可能会遇到该限制。如果您看到数百个“睡眠”线程，`SHOW PROCESSLIST`那么这就是正在发生的事情。要更改的参数是`wait_timeout`。也`max_connections`可能太低了。

但我建议您先修复您的数据库处理程序。

# sql - 如何告诉表 sql 2005 上的最后更新/插入活动

> ID：777495
> 
> 赞同：0
> 
> 时间：2009-04-22T14:31:47.017
> 
> 标签：sql, sql-server-2005, metadata

我试图找出对我们的 sql 2005 db 中的特定表进行最后一次插入/更新的时间。数据没有时间戳，所以我不能这么说。那里有任何 dmv 可以帮助我吗？

谢谢，惠普

**重复**：[如何查找最近作用于某个表的 sql 更新操作 (SQL Server 2005)](https://stackoverflow.com/questions/301060/how-to-find-recent-sql-update-operations-acting-upon-a-certain-table-sql-server)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-20T00:24:49.803

我找到了一个可以帮助你的链接：

来自 blog.sqlauthority.com 的[上次更新时间](http://blog.sqlauthority.com/2009/05/09/sql-server-find-last-date-time-updated-for-any-table/)

该帖子的一部分包含以下代码：其中“AdventureWorks”是目录名称，“test”是表名称

```
SELECT OBJECT_NAME(OBJECT_ID) AS DatabaseName, last_user_update,*
FROM sys.dm_db_index_usage_stats
WHERE database_id = DB_ID( 'AdventureWorks')
AND OBJECT_ID=OBJECT_ID('test') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-23T10:25:28.873

这段代码：

```
SELECT OBJECT_NAME(OBJECT_ID) AS DatabaseName, last_user_update,*
FROM sys.dm_db_index_usage_stats
WHERE database_id = DB_ID( 'AdventureWorks')
AND OBJECT_ID=OBJECT_ID('test') 
```

工作正常，但是如果您查看源表： sys.dm_db_index_usage_stats 您会意识到必须对该表进行索引才能使它们显示在此处。您可能认为肯定所有表都已编入索引，我们为数据仓库拍摄快照，并且不需要对这些表进行索引，但是我们确实希望向人们展示上次更新的时间。

如果您在没有索引的 SQL 中创建表并更新它/添加数据，则会出现此 sys.dm_db_index_usage_stats 更新。我们使用 SSIS 更新我们的表，并且在 sys.dm_db_index_usage_stats 中我们的表没有条目。

# iphone - 如何在 UIImageView 中拉伸或压缩图像？

> ID：777499
> 
> 赞同：1
> 
> 时间：2009-04-22T14:32:30.663
> 
> 标签：iphone, cocoa-touch, uikit

苹果说，我所要做的就是修改边界矩形。然后边界矩形内的内容将被拉伸或插入框架矩形。

但是当我将另一个宽度更小的 CGRect 分配给我的边界矩形时，什么也没有发生。UIImageView 看起来完全一样。没有编译错误。我想这不是要走的路...

你是怎样做的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-22T21:18:23.917

更改框架将拉伸或压缩图像。如果没有，我怀疑您有错误，我们需要查看您的代码以提供进一步帮助。

如果要缩放图像，请参阅[此问题](https://stackoverflow.com/questions/603907/uiimage-resize-then-crop/605385#605385)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-04-22T14:42:42.620

如果您使用的是 uiview，则需要将 beginAnimations:context: 发送到 uiview ( [http://developer.apple.com/iPhone/library/documentation/UIKit/Reference/UIView_Class/UIView/UIView.html#//apple_ref /doc/uid/TP40006816-CH3-SW14](http://developer.apple.com/iPhone/library/documentation/UIKit/Reference/UIView_Class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816-CH3-SW14) )

编辑：尝试将 CGAffineTransform 应用于视图。我认为函数是 CGAffineTransformMakeScale()。您必须仔细检查文档。

# git - 使用 master 分支和第二个分支名称 MASTER 解析 git repo

> ID：777509
> 
> 赞同：1
> 
> 时间：2009-04-22T14:33:27.277
> 
> 标签：git

从本地分支切换回来时，我不小心签出了一个新分支 MASTER，并将其推送到原点。现在 repo 有 master 和 MASTER 作为分支。如何安全地重命名 MASTER 并将其变基为 master？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-22T16:00:04.697

真的没必要改名。只需将 MASTER 中的新更改合并或 rebase 到 master 上，然后删除 MASTER 分支。

*   `git merge master MASTER`将向 中添加合并提交`master`，以及单个提交的历史记录。

*   如果您想进行变基，请使用`git rebase master MASTER`.

在其中任何一个之后，运行`git branch -d MASTER`以删除您的本地 MASTER 分支。要删除远程分支，请运行`git push origin :MASTER`（[通过此页面](http://github.com/guides/remove-a-remote-branch)）。并确保之后将其全部推向原点。

**编辑**如果您确实想重命名它，例如如果您维护到主题分支的链接，请删除远程分支，使用本地重命名并将其`git branch -M MASTER foobar`推送到远程。

# iphone - 什么是 iphone 开发最大和最常去的论坛/板？

> ID：777514
> 
> 赞同：2
> 
> 时间：2009-04-22T14:34:33.750
> 
> 标签：iphone

我刚刚注册了该计划，它正在等待中。我知道有一个供注册 iphone 开发人员使用的绝密苹果论坛，但我想知道是否还有其他好的？

我觉得我的问题太复杂了，需要更多的讨论，不能仅仅在评论中完成。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-22T21:15:15.783

你找到了。欢迎来到最大、响应速度最快的 iPhone 编程论坛。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-22T14:44:52.040

如果你能避免它，我不会使用苹果 iphone 论坛。它真的很慢。今天早上我在 SO 上找到答案的运气更好，然后在 iphone 板上找到了超过 3 天的答案

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-22T18:15:49.473

我推荐[Google 上的 iPhoneSDK 组](http://groups.google.com/group/iphonesdk?hl=en)。专家经常光顾它。

[Apple 的会员专用论坛](http://developer.apple.com/iphone/discussionForum.action)确实有一些有用的东西，特别是如果您想了解开发人员不愿在其他地方讨论的 Beta 产品。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-23T12:11:01.933

[http://www.iphonedevsdk.com/forum/](http://www.iphonedevsdk.com/forum/)似乎很受欢迎。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-22T14:39:00.993

一个绝密的苹果论坛..我是一名 iPhone 开发人员，我从来没有听说过，也许我不是那么好:(

无论如何，苹果支持讨论论坛就足够了（没有什么可与 Stackoverflow 相比）；[http://discussions.apple.com/forum.jspa?forumID=727&start=0](http://discussions.apple.com/forum.jspa?forumID=727&start=0)

我想看看人们阅读其他论坛的内容。当我在 Google 中输入问题时，我通常会在某个博客上结束。

# asp.net - ASP.NET MVC 中的 ASP.NET AJAX 与 jQuery

> ID：777523
> 
> 赞同：33
> 
> 时间：2009-04-22T14:35:59.313
> 
> 标签：asp.net, jquery, asp.net-mvc, ajax

在 ASP.NET MVC 中使用哪一个更好？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2009-04-22T22:37:03.840

我个人更喜欢 jQuery，原因如下：-

1.  插件社区更加多样化，吸引了来自广泛背景的开发人员（不仅仅是 MS 堆栈）。对于 MS-AJAX，您目前几乎受限于 UI 小部件的客户端 AJAX 控制工具包。
2.  我发现 jQuery API 比 MS AJAX 提供的更适用于常见的客户端任务
3.  鉴于 MVC 中缺乏 WebForms 的烟雾和镜像，有时您需要对 DOM 进行严格控制才能执行某些操作，jQuery 提供的 CSS 选择器引擎确实可以帮助您做到这一点。

就 MS AJAX 在 MVC 中为您提供的功能而言，它可以为您提供一种快速“AJAXify”表单和链接的方法，但就我而言，添加 90kb 的 javascript 来做到这一点当 jQuery 中的等价调用（例如 $.get、$.post、$(element).load）相对容易使用时，这并不值得。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2009-04-22T14:49:40.063

就个人而言，尽管 HtmlHelper 支持 ASP.NET Ajax，但我发现 jQuery ajax 与[JQuery 表单插件](http://malsup.com/jquery/form/)结合是在 ASP.NET MVC 中进行 ajax 表单发布的最佳方式。

例如，在 html 产品列表页面上使用 jquery 调用，每个产品都有一个表单，允许将项目添加到购物篮中，一行 jquery 代码可以“ajaxify”页面上的所有表单

```
$(".productListItem form").ajaxForm({ target: '#extraInfoSection' }); 
```

结合控制器基类上用于检查标头的简单“IsAjaxRequest”属性：

```
Request.Headers["X-Requested-With"] == "XMLHttpRequest" 
```

以及控制器中的一些逻辑以返回正确的响应类型：

```
return IsAjaxRequest ? (ActionResult) View("BasketPartial", basket) : new RedirectBackToReferrerActionResult(); 
```

即使关闭了 javascript 并且不涉及 ASP.NET Ajax，您也有一个表单。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-04-22T19:39:27.337

我建议您阅读 Dave Ward 的博客[Encosia](http://www.encosia.com)，而不是提出建议，该博客有一系列关于 MS Ajax/更新面板与 jQuery 帖子机制的帖子。Dave 坚持认为 jQuery 的性能非常优越，因为它[在与服务器之间的传输中减少了大约 100K](http://encosia.com/2008/03/27/using-jquery-to-consume-aspnet-json-web-services/)。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-04-22T14:40:16.590

JQuery 是纯粹的客户端库。Asp.Net Ajax 包括客户端和服务器端功能。恕我直言，比较并不公平。按照微软的计划，它们可能会相互补充。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-22T14:46:25.280

有一个用于 MVC 的 ASP.NET AJAX 变体——与 AjaxHelper 和扩展一起使用。这与 jQuery 配合得很好。我有在同一页面上同时使用两者的实例；使用 MVC AJAX 更新基于单击按钮的 DIV 并使用 jQuery 获取 JSON 数据以用于同一页面上的不同操作。标准 ASP.NET AJAX（UpdatePanels 等）应该在 WebForms 世界中使用，而不是在 MVC 中。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-22T14:39:30.617

我想提一下微软支持 JQuery，他们将在即将发布的 Visual Studio 版本中支持它。欲了解更多信息，请访问[http://live.visitmix.com/](http://live.visitmix.com/)。ASP.NET AJAX 和 jQuery 没有太多重叠，因此您希望同时使用两者。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-22T14:53:10.443

首先，请记住 ASP.NET MVC 不支持，或者更好的是，它没有回发概念。

1.  asp.net ajax 它基于 post-back 的服务器端机制，它的使命是让 ajax 功能更容易集成到服务器端模式
2.  jQuery，作为其他框架（例如 Extjs）实现了纯客户端 ajax

仍然可以在 asp.net mvc 中使用 asp.net 服务器控件，asp.net ajax 它就是其中之一，但它被认为是为了分离关注点（视图）和 REST 风格而制作的。尽可能，所以考虑到这一点，最终的想法是：

1.  使用 ASP.NET Web 窗体 ASP.NET AJAX 是正确的选择
2.  使用 ASP.NET MVC 最好尝试去客户端，所以 jQuery（或其他）更好

对不起我的英语不好

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-04-22T15:04:22.147

将 ASP.NET AJAX 与 Web 窗体结合使用，将 jQuery 与 ASP.NET MVC 结合使用

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-04-27T12:34:31.517

您可能会看到的另一种选择是 Ajax.NET，[http](http://www.ajaxpro.info/) ://www.ajaxpro.info/ 。我认为它比用于 WebForms 的 ASP.NET AJAX 更好。它也可以在 MVC 下运行。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-04-30T03:03:16.110

首先，您可以使用任何一种，只要您在谈论 Microsoft Ajax 时，您只是指客户端库。您可以使用 MS Ajax 客户端库和大多数工具包扩展程序，而无需任何服务器端控件。我使用 Web 表单和 Microsoft Ajax 构建了一个相当大的应用程序，然后将其转换为 MVC/jquery。我发现我使用的 MS Ajax 库中的功能越来越少。插件有很多可用的东西，以至于它甚至使 ajax 工具包过时了。

如果您正在谈论使用更新面板等的 MS Ajax，那么我会说不，您不能在 MVC 中使用它们。事实上，根本不要使用它们！更新面板是模拟 ajax，页面仍然经历其生命周期，几乎违背了使用 ajax 的目的。

# python - Python中高效的任意大小整数打包

> ID：777525
> 
> 赞同：14
> 
> 时间：2009-04-22T14:36:12.933
> 
> 标签：python, byte

struct.pack() 函数允许将最多 64 位的整数转换为字节字符串。打包更大整数的最有效方法是什么？我宁愿不添加对像 PyCrypto（提供 num_to_bytes()）这样的非标准模块的依赖。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2018-11-02T13:40:54.520

遇到了同样的问题。从 python 3.2 开始，您可以使用[`int.to_bytes`](https://docs.python.org/3/library/stdtypes.html#int.to_bytes)：

```
>>> (2**100).to_bytes(16, byteorder='big')
b'\x00\x00\x00\x10\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00' 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-22T15:18:32.300

你的意思*是*这样的：

```
def num_to_bytes(num):
    bytes = []
    num = abs(num) # Because I am unsure about negatives...
    while num > 0:
        bytes.append(chr(num % 256))
        num >>= 8
    return ''.join(reversed(bytes))

def bytes_to_num(bytes):
    num = 0
    for byte in bytes:
        num <<= 8
        num += ord(byte)
    return num

for n in (1, 16, 256, 257, 1234567890987654321):
    print n,
    print num_to_bytes(n).encode('hex'),
    print bytes_to_num(num_to_bytes(n)) 
```

返回：

```
1 01 1
16 10 16
256 0100 256
257 0101 257
1234567890987654321 112210f4b16c1cb1 1234567890987654321 
```

我只是不确定如何处理底片......我对位旋转不太熟悉。

**编辑：**另一种解决方案（通过我的测试，它的运行速度提高了大约 30%）：

```
def num_to_bytes(num):
    num = hex(num)[2:].rstrip('L')
    if len(num) % 2:
        return ('0%s' % num).decode('hex')
    return num.decode('hex')

def bytes_to_num(bytes):
    return int(bytes.encode('hex'), 16) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-22T14:52:01.430

假设发布者想要将一个大整数打包为二进制字符串，即不使用数字中的每个数字存储一个字节。这样做的一种方法似乎是：

```
import marshal

a = 47L
print marshal.dumps(a) 
```

这打印：

```
'l\x01\x00\x00\x00/\x00' 
```

我不能说我现在理解如何解释这些位......

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-22T15:12:39.447

我认为您的意思是您只想使用表示数字所需的字节数？例如，如果数字是：

*   255 或更少，您只使用 1 个字节
*   65535 或更少 2 个字节
*   16777215 或更少 3 个字节
*   等等等等

在 Psion PDA 上，他们通常有一些打包方案，您可以在其中读取第一个字节，检测它是否设置了最高位，然后读取另一个字节（如果有）。这样，您只需继续读取字节，直到您读取“完整”数字。如果您处理的大多数数字都相当小，那么该系统运行良好，因为您通常每个数字只使用一两个字节。

另一种方法是用一个（或多个）字节表示使用的总字节数，但此时它基本上是 Python 中的一个字符串。即它是一个base-256 数字的字符串。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-22T16:17:09.213

这有点 hacky，但你可以通过十六进制字符串表示，然后使用十六进制编解码器进行二进制：

```
>>> a = 2**60
>>> a
1152921504606846976L
>>> hex(a)
'0x1000000000000000L'
>>> hex(a).rstrip("L")[2:].decode('hex')
'\x10\x00\x00\x00\x00\x00\x00\x00'       # 8bytes, as expected.

>>> int(_.encode('hex'), 16)
1152921504606846976L 
```

它有点中断，因为十六进制编解码器需要偶数位数，因此您需要为此进行填充，并且您需要设置一个标志来处理负数。这是一个通用的包/解包：

```
def pack(num):
    if num <0:
       num = (abs(num) << 1) | 1    # Hack - encode sign as lowest bit.
    else:
       num = num << 1
    hexval = hex(num).rstrip("L")[2:]
    if len(hexval)%2 ==1: hexval = '0' + hexval
    return hexval.decode('hex')

def unpack(s):
    val = int(s.encode('hex'), 16)
    sign = -1 if (val & 1) else 1
    return sign * (val>>1)

for i in [10,4534,23467, 93485093485, 2**50, 2**60-1, -1, -20, -2**60]:
    assert unpack(pack(i)) == i 
```

尽管需要对填充等进行所有摆弄，但我不确定它是否比手动解决方案好得多。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-22T14:46:59.147

正如 S.Lott 在评论中所建议的那样，只需将数字转换为字符串并打包该字符串。例如，

```
x = 2 ** 12345
struct.pack("40s", str(x)) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-01-11T07:19:48.890

这概括了[Claudio 的先前答案](https://stackoverflow.com/a/53119672/832230)。它尝试使用最佳字节长度。它还支持无符号和有符号整数。

```
def int_to_bytes(i: int, *, signed: bool = False) -> bytes:
    length = (i.bit_length() + 7 + signed) // 8
    return i.to_bytes(length, byteorder='big', signed=signed)

def bytes_to_int(b: bytes, *, signed: bool = False) -> int:
    return int.from_bytes(b, byteorder='big', signed=signed)

# Test unsigned:
for i in range(1025):
    assert i == bytes_to_int(int_to_bytes(i))

# Test signed:
for i in range(-1024, 1025):
    assert i == bytes_to_int(int_to_bytes(i, signed=True), signed=True) 
```

# version-control - 用于小型家庭项目的 vista home 上的单用户最简单的版本控制

> ID：777531
> 
> 赞同：1
> 
> 时间：2009-04-22T14:36:57.660
> 
> 标签：version-control, version

我对 VSS 非常满意，我想在家中为我的小项目使用免费的版本控制。我刚刚下载了 TortoiseSVN，对我来说它不是很直观。我不必阅读冗长的手册。我只想下载并启动并运行。你有什么建议吗？

我尝试下载 SourceGear Vault 但它不会安装，因为我没有安装超过 IIS5.0。我正在使用 vista home premimun edition 并且只安装了 VS express。

请帮忙..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-22T14:38:34.533

坚持使用 Subversion，但请阅读[Subversion 红皮书](http://svnbook.red-bean.com/)（在线免费）。您不需要阅读太多内容 - 当然，您使用的越多，您就会越了解它。

Subversion比 VSS 好得多……你会很高兴你切换了*。*当然有很多替代品（Git、Mercurial 等），但我认为 Subversion 更容易上手——尤其是使用 Tortoise 和 Visual Studio 插件。（诚​​然，只有 Visual Studio 的 Express 版本，您将无法使用这些插件......）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-22T14:51:41.943

TortoiseSVN 只是将您的 Windows 资源管理器转换为 SVN 扩展。您可以在磁盘驱动器中创建与存储库中的文件夹直接对应的文件夹。一旦你习惯了它就没有那么难了。我的新手团队在收到它的一周内就开始使用它，所以我认为你会毫无问题地拿起它。您只需在 Windows 中创建一个文件夹，右键单击它然后创建存储库，然后输入您的路径。然后你可以直接更新、提交等......

或者，如果你使用 eclipse，你可以获得 SubClipse。它是一个将 Eclipse 工作区连接到 SVN 存储库的插件。（真正的用户友好）

链接： [http ://subclipse.tigris.org/](http://subclipse.tigris.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-22T14:38:59.683

我打算推荐 TortoiseSVN，然后是 SourceGear。我认为没有比这更容易的了。

# delphi - Delphi 2009 中的错误？-> *.res 在项目搜索路径中找不到（在 Delphi 2006 中工作）

> ID：777533
> 
> 赞同：6
> 
> 时间：2009-04-22T14:37:40.653
> 
> 标签：delphi, delphi-2009

我从 Delphi 2006 迁移到 Delphi 2009 时遇到问题。使用 JVCL 的项目抱怨缺少 jvconsts.res。该文件肯定在那里。项目搜索路径包括文件所在的目录。（注意：我的全局搜索路径中没有 JVCL 以使其更便携）

但是应该找到该文件，正如[Delphi Help](http://docs.embarcadero.com/products/rad_studio/delphiAndcpp2009/HelpUpdate2/EN/html/devcommon/compdirsresourcefile_xml.html)所说：

> “...链接器在项目|选项对话框的目录/条件页面的搜索路径输入框中指定的目录中搜索 .res 文件 [...]”

这不是 JVCL 问题：一个简约的程序显示了这一点：

想象一下这个目录结构：

```
C:\Test\ResTest.dpr
C:\Test\Res\Test.res 
```

这是 RestTest.dpr：

```
program ResTest;

{$R test.res} // not found even if "c:\Test\Res" is in project search path

begin
end. 
```

这在 Delphi 2006 中编译得很好，但在 Delphi 2009 中编译得不好。经过一番搜索后，我找到了一种告诉 Delphi 文件在哪里的方法：使用命令行编译器的 gobal 搜索路径或 -R 参数。

在我写这篇文章时，我更接近真正的问题：在 Delphi 2006 中，.cfg-File 包含以下行：

```
-I"c:\Test\Res"
-U"c:\Test\Res"
-R"c:\Test\Res" 
```

基本上，它将项目搜索路径中的值复制到 3 个命令行选项中，因此它确保 -R 参数具有正确的值。

在 Delphi 2009 中（我将编译器输出的详细程度设置为“debug”），我从 IDE 获得了生成的命令行：

如果目录 (c:\Test\Res) 包含在项目搜索路径中：

```
dcc32.exe --no-config -M -Q -ID:\Sources\Temp\1\Res;"c:\program files\codegear\rad studio\6.0\Lib" -LE"C:\Users\Public\Documents\RAD Studio\6.0\Bpl" -LN"C:\Users\Public\Documents\RAD Studio\6.0\Dcp" -O"c:\program files\codegear\rad studio\6.0\Lib" -R"c:\program files\codegear\rad studio\6.0\Lib" -UD:\Sources\Temp\1\Res;"c:\program files\codegear\rad studio\6.0\Lib" -K00400000   ResTest.dpr 
```

如果目录包含在全局搜索路径中

```
dcc32.exe --no-config -M -Q -ID:\Sources\Temp\1\Res;"c:\program files\codegear\rad studio\6.0\Lib";D:\Sources\Temp\1\Res -LE"C:\Users\Public\Documents\RAD Studio\6.0\Bpl" -LN"C:\Users\Public\Documents\RAD Studio\6.0\Dcp" -O"c:\program files\codegear\rad studio\6.0\Lib";D:\Sources\Temp\1\Res -R"c:\program files\codegear\rad studio\6.0\Lib";D:\Sources\Temp\1\Res -UD:\Sources\Temp\1\Res;"c:\program files\codegear\rad studio\6.0\Lib";D:\Sources\Temp\1\Res -K00400000   ResTest.dpr 
```

也许在这里很难看到：区别在于 -R 参数：

```
Local Search Path -> -R"c:\program files\codegear\rad studio\6.0\Lib"
Global Search Path -> -R"c:\program files\codegear\rad studio\6.0\Lib";D:\Sources\Temp\1\Res 
```

所以难怪它为什么不起作用。在 Delphi 2009 中，本地搜索路径未附加到 -R 参数。

我会说，这显然是一个错误，但为什么似乎没有其他人有这个问题？我可以在我们使用的所有机器上重现它。也许该错误仅存在于德文版的 Delphi 2009 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-22T15:29:07.283

一种解决方法是将其放入您的代码中：

```
{$R res\test.res} 
```

这适用于我的带有 Delphi 2009 的系统，包括 IDE 和命令行编译器。

请注意，我同意他们破坏了现有功能，您是否向 Quality Portal 添加了报告？如果没有，请执行：ttps://quality.embarcadero.com（这曾经是搜索引擎索引[http://qc.embarcadero.com](http://qc.embarcadero.com)但已关闭；[https](https://quality.embarcadero.com) ://quality.embarcadero.com需要一个免费帐户进行搜索）。

# com - 如何让 tlbimp 不为引用类型自动生成程序集？

> ID：777538
> 
> 赞同：0
> 
> 时间：2009-04-22T14:38:38.967
> 
> 标签：com, interop, tlbimp

我想使用 .NET SDK 中包含的 tlbimp.exe 工具从类型库创建互操作程序集。

我的问题是源类型库正在引用另一个我没有可用的库中的类型。如何让 tlbimp 不为引用类型自动生成程序集？

我收到以下错误：

```
解决对类型库“GridEX20”的引用。
自动将“GridEX20”导入“C:\tmp\GridEX20.dll”。
TlbImp：错误 TI0000：System.Runtime.InteropServices.COMException - 加载类型库/DLL 时出错。（来自 HRESULT 的异常：0x80029C4A (TYPE_E_CANTLOADLIBRARY)）

```

使用[进程监视器](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)我得出的结论是找到了 GridEX20 库，但它引用了另一个未找到的库，并且当找不到该库时 tlbimp 报告错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-27T15:53:53.217

您可以尝试 /strictref 选项，但我认为它不会帮助您。

我建议您使用 Dependency Walker 检查 GridEX20.dll（对于 VS2005，它位于 C:\Program Files\Microsoft Visual Studio 8\Common7\Tools\Bin 中，但我认为它已不再发布 - 您可以找到[这里](http://www.dependencywalker.com/)有一个版本）。

这应该告诉您 dll 依赖于哪些程序集 - 这至少可以确认您的初始假设是否正确。

# perl - 如何在 Perl 中读取外部命令的错误输出？

> ID：777543
> 
> 赞同：16
> 
> 时间：2009-04-22T14:39:25.093
> 
> 标签：perl, backticks

作为一个更大的 Perl 程序的一部分，我正在检查`diff`文件夹中输入文件命令的输出与参考文件，其中空白输出（匹配）是通过结果，而来自 diff 的任何输出都是失败结果。

问题是，如果目标文件夹缺少预期文件的数量，则异常 diff throws 不会作为输出出现，从而创建错误传递。

输出示例：

```
diff: /testfolder/Test-02/test-output.2: No such file or directory 
```

测试 01：通过

测试 02：通过

代码如下：

```
$command = "(diff call on 2 files)";
my @output = `$command`;
print "Test-02: ";
$toPrint = "PASS";
foreach my $x (@output) {
    if ($x =~ /./) {
        $toPrint = "FAIL";
    }
} 
```

如果调用有任何输出，这是一项快速的黑客工作`diff`。有没有办法检查调用的命令引发的异常`backticks`？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2009-04-22T19:30:09.827

perlfaq8中有答案[：How can I capture STDERR from an external command？](http://faq.perl.org/perlfaq8.html#How_can_I_capture_ST)

* * *

运行外部命令的三种基本方式：

```
system $cmd;        # using system()
$output = `$cmd`;       # using backticks (``)
open (PIPE, "cmd |");   # using open() 
```

使用 system()，STDOUT 和 STDERR 都将与脚本的 STDOUT 和 STDERR 放在同一个位置，除非 system() 命令重定向它们。反引号和 open() 仅读取命令的 STDOUT。

您还可以使用 IPC::Open3 中的 open3() 函数。Benjamin Goldberg 提供了一些示例代码：

要捕获程序的 STDOUT，但丢弃其 STDERR：

```
use IPC::Open3;
use File::Spec;
use Symbol qw(gensym);
open(NULL, ">", File::Spec->devnull);
my $pid = open3(gensym, \*PH, ">&NULL", "cmd");
while( <PH> ) { }
waitpid($pid, 0); 
```

要捕获程序的 STDERR，但丢弃其 STDOUT：

```
use IPC::Open3;
use File::Spec;
use Symbol qw(gensym);
open(NULL, ">", File::Spec->devnull);
my $pid = open3(gensym, ">&NULL", \*PH, "cmd");
while( <PH> ) { }
waitpid($pid, 0); 
```

捕获程序的 STDERR，并让它的 STDOUT 转到我们自己的 STDERR：

```
use IPC::Open3;
use Symbol qw(gensym);
my $pid = open3(gensym, ">&STDERR", \*PH, "cmd");
while( <PH> ) { }
waitpid($pid, 0); 
```

要分别读取命令的 STDOUT 和 STDERR，可以将它们重定向到临时文件，让命令运行，然后读取临时文件：

```
use IPC::Open3;
use Symbol qw(gensym);
use IO::File;
local *CATCHOUT = IO::File->new_tmpfile;
local *CATCHERR = IO::File->new_tmpfile;
my $pid = open3(gensym, ">&CATCHOUT", ">&CATCHERR", "cmd");
waitpid($pid, 0);
seek $_, 0, 0 for \*CATCHOUT, \*CATCHERR;
while( <CATCHOUT> ) {}
while( <CATCHERR> ) {} 
```

但是*两者都不*是临时文件的真正需要......以下应该也可以工作，没有死锁：

```
use IPC::Open3;
use Symbol qw(gensym);
use IO::File;
local *CATCHERR = IO::File->new_tmpfile;
my $pid = open3(gensym, \*CATCHOUT, ">&CATCHERR", "cmd");
while( <CATCHOUT> ) {}
waitpid($pid, 0);
seek CATCHERR, 0, 0;
while( <CATCHERR> ) {} 
```

而且它也会更快，因为我们可以立即开始处理程序的标准输出，而不是等待程序完成。

使用其中任何一个，您可以在调用之前更改文件描述符：

```
open(STDOUT, ">logfile");
system("ls"); 
```

或者您可以使用 Bourne shell 文件描述符重定向：

```
$output = `$cmd 2>some_file`;
open (PIPE, "cmd 2>some_file |"); 
```

您还可以使用文件描述符重定向使 STDERR 成为 STDOUT 的副本：

```
$output = `$cmd 2>&1`;
open (PIPE, "cmd 2>&1 |"); 
```

请注意，您不能简单地在 Perl 程序中打开 STDERR 作为 STDOUT 的副本，并避免调用 shell 进行重定向。这不起作用：

```
open(STDERR, ">&STDOUT");
$alloutput = `cmd args`;  # stderr still escapes 
```

这失败了，因为 open() 使 STDERR 转到 open() 时 STDOUT 所在的位置。然后反引号使 STDOUT 转到一个字符串，但不要更改 STDERR（它仍然转到旧的 STDOUT）。

请注意，您必须在反引号中使用 Bourne shell (sh(1)) 重定向语法，而不是 csh(1)！[关于为什么 Perl 的 system() 和反引号和管道打开都使用 Bourne shell 的详细信息，请参见 http://www.cpan.org/](http://www.cpan.org/misc/olddoc/FMTEYEWTK.tgz)的“远超你想知道”集合中的 vs/csh.whynot 文章[杂项/olddoc/FMTEYEWTK.tgz](http://www.cpan.org/misc/olddoc/FMTEYEWTK.tgz)。一起捕获命令的 STDERR 和 STDOUT：

```
$output = `cmd 2>&1`;                       # either with backticks
$pid = open(PH, "cmd 2>&1 |");              # or with an open pipe
while (<PH>) { }                            #    plus a read 
```

要捕获命令的 STDOUT 但丢弃其 STDERR：

```
$output = `cmd 2>/dev/null`;                # either with backticks
$pid = open(PH, "cmd 2>/dev/null |");       # or with an open pipe
while (<PH>) { }                            #    plus a read 
```

要捕获命令的 STDERR 但丢弃其 STDOUT：

```
$output = `cmd 2>&1 1>/dev/null`;           # either with backticks
$pid = open(PH, "cmd 2>&1 1>/dev/null |");  # or with an open pipe
while (<PH>) { }                            #    plus a read 
```

交换命令的 STDOUT 和 STDERR 以捕获 STDERR 但将其 STDOUT 留给我们的旧 STDERR：

```
$output = `cmd 3>&1 1>&2 2>&3 3>&-`;        # either with backticks
$pid = open(PH, "cmd 3>&1 1>&2 2>&3 3>&-|");# or with an open pipe
while (<PH>) { }                            #    plus a read 
```

要分别读取命令的 STDOUT 和 STDERR，最简单的方法是将它们分别重定向到文件，然后在程序完成时从这些文件中读取：

```
system("program args 1>program.stdout 2>program.stderr"); 
```

在所有这些示例中，排序都很重要。这是因为 shell 严格按照从左到右的顺序处理文件描述符重定向。

```
system("prog args 1>tmpfile 2>&1");
system("prog args 2>&1 1>tmpfile"); 
```

第一个命令将标准输出和标准错误都发送到临时文件。第二个命令在那里只发送旧的标准输出，旧的标准错误显示在旧的标准输出上。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2009-04-22T14:43:30.450

程序本身不能抛出“异常”，但它们可以返回非零错误代码。您可以检查使用反引号或`system()`在 Perl 中使用 $?运行的程序的错误代码：

```
$toPrint = "FAIL" if $?; 
```

（在测试循环之前添加这一行`@output`。）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-22T14:42:53.637

检查[perlvar](http://perldoc.perl.org/perlvar.html)以获取[$？](http://perldoc.perl.org/perlvar.html#$?). 如果设置为 0，则没有信号，程序的返回码也为零。这可能就是你想要的。

在这种情况下，您甚至可以只使用[system](http://perldoc.perl.org/functions/system.html)并检查其返回值是否为零，同时将 stdout 和 stderr 重定向到 /dev/null。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-04-22T16:13:29.690

假设差异错误最终出现在 STDERR 上，如果您希望能够检查或记录错误，我推荐 CPAN 模块 Capture::Tiny：

```
use Capture::Tiny 'capture';
my ($out, $err) = capture { system($command) }; 
```

这就像反引号，但分别为您提供 STDOUT 和 STDERR。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-22T14:50:27.033

[在perldoc 站点上](http://perldoc.perl.org/perlop.html#Quote-and-Quote-like-Operators)有一系列有趣的方法来处理反引号括起来的命令的输出。您必须向下滚动或搜索“qx/STRING/”（不带引号）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-22T15:20:35.900

您还可以使用 'diff -d' 的输出进行运行，这将使您的代码更易于阅读。

```
foreach (`diff -d $args`){
  if (/^Only in/){
     do_whatever();
  }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-22T15:23:49.467

你也可以：

```
my @output = `$command 2>\&1`; 
```

# c# - 在 App_Code 的类中使用 const 是否比在 webforms asp.net 应用程序的 config.web 中使用 appSettings 更快/更快？

> ID：777545
> 
> 赞同：3
> 
> 时间：2009-04-22T14:40:02.970
> 
> 标签：c#, .net, asp.net, web-config

我想知道访问我的全局变量的最快方法……它们只会在 beta 测试阶段发生变化。在我们上线之前。从那时起，他们永远不会改变。

我认为从 web.config 获取内容会产生开销，而且编写 App.HostUrl 而不是 ConfigurationManager.AppSettings["HostUrl"].ToString()

应用程序.cs

```
public class App {
    public const string HostUrl = "http://www.{domain}.co.uk";
    public const string iHostUrl = "http://img.{domain}.co.uk";
} 
```

或者

网络配置

```
<appSettings>
<add key="HostUrl" value="http://www.{domain}.co.uk" />
<add key="iHostUrl" value="http://img.{domain}.co.uk" />
<appSettings> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-22T14:43:22.603

Web.config 无论如何都会被您的应用程序解析，因此在实践中没有与之相关的额外开销。不管有没有appsettings，文件还是会被打开、读取和解析。

您应该担心应用程序中的实际性能瓶颈，而不是它*在*启动时所做的事情。不将设置存储在 web.config 中不会显着提高性能。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-22T14:43:50.090

const 会更快，但这会限制我们的部署选项。作为替代方案，你为什么不创建一个静态变量并将 appsetting 放在你的 Application_Start 中（在 global.asax 中）。

```
public class App {
    public static string HostUrl;
    public static string iHostUrl;
} 
```

在 Global.asax.cs 中：

```
void Application_Start(object sender, EventArgs e)
{
    App.HostUrl = ConfigurationManager.AppSettings["HostUrl"].ToString();
    App.iHostUrl = ConfigurationManager.AppSettings["iHostUrl"].ToString();
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-22T14:47:12.750

我将具有常量的类用于真正恒定的事物（即查找表中永远不会改变的值的主键）。您在示例中的内容看起来实际上可能会在测试环境和生产环境之间发生变化，这正是我认为放入某种 .config 文件中的内容。然后，这些文件可以保存在您部署到的每个环境的源代码控制/配置管理系统中。

至于不得不做'ConfigurationManager.AppSettings [“HostUri”]'的丑陋，你总是可以用你的app_code或外部库中的一个类中的getter将它们包装到静态属性中，这样你就可以说'App.HostUrl'。

就性能而言，我相当确定当应用程序初始化和/或第一次从配置系统中调用这些值时，配置中的值会缓存在内存中，因此性能差异可能可以忽略不计。

# c# - 如何在 C# 中确定进程的所有者？

> ID：777548
> 
> 赞同：51
> 
> 时间：2009-04-22T14:40:53.953
> 
> 标签：c#, .net, process

我正在寻找一个名为“MyApp.exe”的进程，并且我想确保我获得了某个特定用户拥有的进程。

我使用以下代码来获取进程列表：

```
Process[] processes = Process.GetProcessesByName("MyApp"); 
```

这给了我一个进程列表，但是 Process 类中似乎没有办法确定谁拥有该进程？关于我如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2009-04-22T14:44:43.473

您可以使用 WMI 让用户拥有某个进程。要使用 WMI，您需要添加对`System.Management.dll`项目的引用。

**按进程 ID：**

```
public string GetProcessOwner(int processId)
{
    string query = "Select * From Win32_Process Where ProcessID = " + processId;
    ManagementObjectSearcher searcher = new ManagementObjectSearcher(query);
    ManagementObjectCollection processList = searcher.Get();

    foreach (ManagementObject obj in processList)
    {
        string[] argList = new string[] { string.Empty, string.Empty };
        int returnVal = Convert.ToInt32(obj.InvokeMethod("GetOwner", argList));
        if (returnVal == 0)
        {
            // return DOMAIN\user
            return argList[1] + "\\" + argList[0];
        }
    }

    return "NO OWNER";
} 
```

**按进程名称**（仅查找第一个进程，相应调整）：

```
public string GetProcessOwner(string processName)
{
    string query = "Select * from Win32_Process Where Name = \"" + processName + "\"";
    ManagementObjectSearcher searcher = new ManagementObjectSearcher(query);
    ManagementObjectCollection processList = searcher.Get();

    foreach (ManagementObject obj in processList)
    {
        string[] argList = new string[] { string.Empty, string.Empty };
        int returnVal = Convert.ToInt32(obj.InvokeMethod("GetOwner", argList));
        if (returnVal == 0)
        {
            // return DOMAIN\user
            string owner = argList[1] + "\\" + argList[0];
            return owner;       
        }
    }

    return "NO OWNER";
} 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2016-07-30T16:41:12.827

由于 WMI 并不总是一种检索信息的快速方法，因此这里是本机 P/Invoke 的执行方式：

返回值是`null`不成功的时候。为了获取在 SYSTEM 用户下运行的进程的名称，您需要以管理员身份执行此代码。

```
private static string GetProcessUser(Process process)
{
    IntPtr processHandle = IntPtr.Zero;
    try
    {
        OpenProcessToken(process.Handle, 8, out processHandle);
        WindowsIdentity wi = new WindowsIdentity(processHandle);
        string user = wi.Name;
        return user.Contains(@"\") ? user.Substring(user.IndexOf(@"\") + 1) : user;
    }
    catch
    {
        return null;
    }
    finally
    {
        if (processHandle != IntPtr.Zero)
        {
            CloseHandle(processHandle);
        }
    }
}

[DllImport("advapi32.dll", SetLastError = true)]
private static extern bool OpenProcessToken(IntPtr ProcessHandle, uint DesiredAccess, out IntPtr TokenHandle);
[DllImport("kernel32.dll", SetLastError = true)]
[return: MarshalAs(UnmanagedType.Bool)]
private static extern bool CloseHandle(IntPtr hObject); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-05T22:34:09.333

这是非 C# 扬声器的 VB 版本：

```
Function GetProcessOwner(ProcessName As String) As String
    Dim query = "Select * from Win32_Process Where Name = """ + ProcessName + """"
    Dim searcher = New ManagementObjectSearcher(query)
    Dim processList = searcher.Get()

    For Each obj As ManagementObject In processList
      Dim argList As String() = {String.Empty, String.Empty}
      Dim returnVal = Convert.ToInt32(obj.InvokeMethod("GetOwner", argList))
      If returnVal = 0 Then
        ' return DOMAIN\user
        Dim owner = argList(1) + "\\" + argList(0)
        Return owner
      End If
    Next

    Return "NO OWNER"
  End Function

  Function GetProcessOwner(processId As Integer) As String
    Dim query = "Select * From Win32_Process Where ProcessID = " & processId
    Dim searcher = New ManagementObjectSearcher(query)
    Dim processList = searcher.Get()

    For Each obj As ManagementObject In processList
      Dim argList As String() = {String.Empty, String.Empty}
      Dim returnVal = Convert.ToInt32(obj.InvokeMethod("GetOwner", argList))
      If returnVal = 0 Then
        ' return DOMAIN\user
        Return argList(1) + "\\" + argList(0)
      End If
    Next

    Return "NO OWNER"
  End Function 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-04-22T14:47:37.150

不幸的是，没有获得流程所有者的本地 .Net 方式。

看看这些以获得潜在的解决方案：

*   [http://msmvps.com/blogs/siva/archive/2006/10/02/Getting-Windows-Process-Owner-Name.aspx](http://msmvps.com/blogs/siva/archive/2006/10/02/Getting-Windows-Process-Owner-Name.aspx)
*   [http://www.codeproject.com/KB/cs/processownersid.aspx](http://www.codeproject.com/KB/cs/processownersid.aspx)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-07-23T08:00:35.607

```
 var myApp = Process.GetProcessesByName("MyApp").FirstOrDefault();
    if (myApp != null)
    {
        string username = GetUsername(myApp.SessionId);
    } 
```

GetUsername方法的实现在这里：[https ://stackoverflow.com/a/35810391/10412686](https://stackoverflow.com/a/35810391/10412686)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-29T08:29:40.247

添加对您的项目的引用：

```
System.Management 
```

然后将以下方法添加到您的项目中：

```
 public string GetProcessOwner(int processId)
    {
        string MethodResult = null;
        try
        {
            StringBuilder sb = new StringBuilder();

            sb.Append(" SELECT ");
            sb.Append("     * ");
            sb.Append(" FROM ");
            sb.Append("     WIN32_PROCESS");
            sb.Append(" WHERE ");
            sb.Append("     ProcessId = " + processId);

            string Query = sb.ToString();

            ManagementObjectCollection Processes = new ManagementObjectSearcher(Query).Get();

            foreach (ManagementObject Process in Processes)
            {
                string[] Args = new string[] { "", "" };

                int ReturnCode = Convert.ToInt32(Process.InvokeMethod("GetOwner", Args));

                switch(ReturnCode)
                {
                    case 0:
                        MethodResult = Args[1] + "\\" + Args[0];
                        break;

                    default:
                        MethodResult = "None";
                        break;

                }

            }

        }
        catch //(Exception ex)
        {
            //ex.HandleException();
        }
        return MethodResult;
    } 
```

然后添加这个方法：

```
 public DataTable GetProcessTable()
    {
        DataTable MethodResult = null;
        try
        {
            List<Process> Processes = Process.GetProcesses().ToList<Process>();

            DataTable dt = new DataTable();
            dt.Columns.Add("Name", typeof(string));
            dt.Columns["Name"].ReadOnly = true;

            dt.Columns.Add("Id", typeof(string));
            dt.Columns["Id"].ReadOnly = true;

            dt.Columns.Add("Owner", typeof(string));
            dt.Columns["Owner"].ReadOnly = true;

            foreach (Process p in Processes)
            {
                DataRow r = dt.NewRow();

                bool Match = false;

                r["Id"] = p.Id.ToString();
                r["Name"] = p.ProcessName;
                r["Owner"] = GetProcessOwner(p.Id);

                dt.Rows.Add(r);

            }

            MethodResult = dt;

        }
        catch //(Exception ex)
        {
            //ex.HandleException();
        }
        return MethodResult;
    } 
```

调用 GetProcessTable() 会为您提供所有正在运行的进程以及它们的 Id 和 Name 的 DataTable，这很方便，因为它可以用作 DataGridView 的 Datasource 参数。

如果您需要向表格添加更多字段，请告诉我。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-08-28T12:48:06.857

WMI 确实是如何从 Process 获取此信息的最糟糕的方法。但是...有时您需要从远程进程中获取该信息，在这种情况下，您很遗憾需要 WMI。因此，如果您必须或想要使用 WMI，我建议您这样做（它比上面的经典 WMI 方法快 60% 以上）：

# 方法：

```
public struct WMIProcessProperties
{
    public string Owner;
    public int ID;
}

public static async Task<Dictionary<Process, WMIProcessProperties>> GetWMIProperties(this IEnumerable<Process> processes)
{
    Dictionary<Process, WMIProcessProperties> result = new Dictionary<Process, WMIProcessProperties>();

    if (processes == null || processes.Count() == 0) { return result; }

    string selectQuery = "SELECT Handle, ProcessID FROM Win32_Process";
    selectQuery += processes.Count() <= 10 ? string.Format(" WHERE ProcessID = {0}", string.Join(" OR ProcessID = ", processes.Select(p => p.Id))) : string.Empty;

    using (CimSession session = await Task.Run(() => CimSession.Create(processes.ElementAt(0).MachineName)))
    {
        List<CimInstance> instances = await Task.Run(() => session.QueryInstances(@"root\cimv2", "WQL", selectQuery).ToList());

        List<Task<WMIProcessProperties>> tasks = new List<Task<WMIProcessProperties>>();

        for (int i = 0; i < instances.Count; i++)
        {
            CimInstance currentInstance = instances[i];

            tasks.Add(Task.Run(() =>
            {
                int id = Convert.ToInt32(currentInstance.CimInstanceProperties["ProcessID"].Value);
                string owner;
                using (CimMethodResult getOwnerResult = session.InvokeMethod(currentInstance, "GetOwner", null))
                {
                     owner = getOwnerResult.OutParameters["User"]?.Value?.ToString();
                }

                currentInstance.Dispose();

                return new WMIProcessProperties { Owner = owner, ID = id };

            }));
        }

        WMIProcessProperties[] wmiProcessProperties = await Task.WhenAll(tasks).ConfigureAwait(false);

        for (int i = 0; i < wmiProcessProperties.Length; i++)
        {
            result.Add(processes.Single(p => p.Id == wmiProcessProperties[i].ID), wmiProcessProperties[i]);
        }
    }

    return result;
} 
```

如果您想查看很少的时间比较，请参阅此[答案](https://stackoverflow.com/a/57692469/7532787)。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-05-11T22:33:47.253

遍历集合以检查权限。大多数情况下，当前用户不是管理员

```
List<Process> processes = Process.GetProcessesByName(Text).ToList();
for (int i = processes.Count - 1; i > -1; i--)
{
    try
    {
        if (processes[i].MainModule?.FileName is null)
            processes.RemoveAt(i);
    }
    catch (Exception)
    {
        processes.RemoveAt(i);
    }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-01-08T20:42:20.550

在[detecting-user-name-from-process-id](https://stackoverflow.com/questions/3172392/detecting-user-name-from-process-id)的帮助下，我编写了这个函数的更好、更快的版本：

```
public static string GetProcessOwnerByID(int processId)
{
  IntPtr processHandle = IntPtr.Zero;
  IntPtr tokenHandle = IntPtr.Zero;
  try
  {
    processHandle = OpenProcess(PROCESS_QUERY_INFORMATION, false, processId);
    if (processHandle == IntPtr.Zero)
      return "NO ACCESS";

    OpenProcessToken(processHandle, TOKEN_QUERY, out tokenHandle);
    using (WindowsIdentity wi = new WindowsIdentity(tokenHandle))
    {
      string user = wi.Name;
      return user.Contains(@"\") ? user.Substring(user.IndexOf(@"\") + 1) : user;
    }
  }
  finally
  {
    if (tokenHandle != IntPtr.Zero) CloseHandle(tokenHandle);
    if (processHandle != IntPtr.Zero) CloseHandle(processHandle);
  }
} 
```

整个文件可以在[GitHub gist上找到](https://gist.github.com/MPrtenjak/efe606738c5bf09d59f06417e1ed024a)

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2016-08-16T20:11:18.053

```
System.Security.Principal.WindowsIdentity.GetCurrent().Name 
```

# silverlight - Silverlight 动态大小的表

> ID：777551
> 
> 赞同：1
> 
> 时间：2009-04-22T14:42:12.483
> 
> 标签：silverlight, xaml

我对 Silverlight 很陌生，所以如果这个问题很明显，我很抱歉，但我想创建类似于 HTML 表的东西，它可以有从 1 到 x 的任意行数。

我需要表格随着添加到它的行数而增长。此外，我希望能够将表格的宽度和高度设置为一个整体，并让每行中的所有文本都可以适当地动态调整大小。

像这样的 XAML 会是什么样子？

干杯，克里斯。

编辑：

感谢您的回复，看来我想要的是所有为存档而提出的建议的混合：

```
 <Grid x:Name="ExampleGrid" Height="150" Width="300" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
  <Grid.RowDefinitions>
      <RowDefinition Height="*"/>
      <RowDefinition Height="*"/>
      <RowDefinition Height="*"/>
  </Grid.RowDefinitions>
  <Viewbox Stretch="Fill"  Grid.Row="0">
    <!-- Two column header -->
    <StackPanel Orientation="Horizontal">
        <TextBlock Text="Text One" Height="Auto" />
        <TextBlock Text="Text One" Height="Auto" />
    </StackPanel>
  </Viewbox>
  <Viewbox Stretch="Fill"  Grid.Row="1">
    <TextBlock Text="Text Two" Height="Auto" />
  </Viewbox>
  <Viewbox Stretch="Fill"  Grid.Row="2">
    <TextBlock Text="Text Three" Height="Auto"/>
  </Viewbox> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-22T14:58:19.370

您可能应该查看**ListBox** （或 DataGrid）

这是 Scott GU 的一个很好的 Silverlight 教程：

[http://weblogs.asp.net/scottgu/pages/silverlight-tutorial-part-5-using-the-listbox-and-databinding-to-display-list-data.aspx](http://weblogs.asp.net/scottgu/pages/silverlight-tutorial-part-5-using-the-listbox-and-databinding-to-display-list-data.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-22T15:32:48.570

您想在 XAML 文件中使用 Grid。这是一个示例：一旦定义了网格，您就可以轻松地删除列和行，就像上一篇文章所说的那样。将对齐设置为 Stretch 将允许 Grid 随浏览器调整大小。

```
<Grid x:Name="grdName"HorizontalAlignment="Stretch" VerticalAlignment="Stretch" > 
```

我发现有点难以弄清楚的一件事是如何更改行或列并将其设置为自动宽度。这是一个例子。

Dim objCol As ColumnDefinition = 无

objCol = grdName.ColumnDefinitions.Item(0) objCol.Width = New GridLength(Double.NaN)

如果要将宽度设置为任何其他值，只需将数字放在 Double.NaN 的位置即可。

哦，所有这些代码都是 VB.net。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-22T15:47:32.903

想到的第一个问题是你什么时候添加行。纯粹是设计时间吗？还是运行时要求？

```
<Grid x:Name="ExampleGrid" Height="20" Width="200">
    <Grid.RowDefinitions>
        <RowDefinition Height="*"/>
        <RowDefinition Height="*"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>
    <TextBlock Text="Text One" Height="Auto" Grid.Row="0"/>
    <TextBlock Text="Text Two" Height="Auto" Grid.Row="1"/>
    <TextBlock Text="Text Three" Height="Auto" Grid.Row="2"/>
</Grid> 
```

这将创建一个三行网格。每个网格获得同等份额的可用空间。（高度中的星表示分割可用空间）

如果您要在运行时添加一行。

```
ExampleGrid.RowDefinitions.Add(new RowDefinition() { Height = new GridLength(1, GridUnitType.Star) });

TextBlock block = new TextBlock() { Text = "Text Four" };
Grid.SetRow(block, 3);

ExampleGrid.Children.Add(block); 
```

问题在于让文本本身按比例放大或缩小以适应可用空间，我不知道该怎么做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-22T14:57:38.170

我自己对 XAML 还很陌生，但我很确定您不需要在 XAML 本身中做任何事情，而是在代码中做任何事情。XAML 被编译为 BAML（二进制），并且您的代码与 BAML 中定义的 .NET 对象一起使用，XAML 本身只是一种人类可读的设计时语言。

您可能想要的是以编程方式添加行定义，这将类似于：

```
Grid g = this.Grid1
g.RowDefinitions.Add(new RowDefinition) 
```

当然，您可以循环继续将 RowDefinitions 添加到 RowDefinitions 集合中，并在将 RowDefinition 添加到网格之前或之后在 RowDefinition 上设置其他属性

# arrays - 检查 vbscript/classic asp 中的任何内容

> ID：777558
> 
> 赞同：3
> 
> 时间：2009-04-22T14:43:16.317
> 
> 标签：arrays, asp-classic, nothing

我需要更新一个旧的经典 asp，我必须调用一个通常返回数组的函数，但在某些情况下可能会返回一个`Nothing`或一个未定义的值。

如何检查结果是否实际返回一个数组？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-22T14:45:05.673

函数后期绑定/有`Variant`返回值吗？如果是，该`IsArray`函数将检查它是否包含数组类型。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-22T14:45:22.193

呃......我可能是错的，但它不只是像

```
If something Is Nothing Then
   'Do something here
Else
   'Do what I used to
End If 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-22T14:45:53.800

我认为 IsNull() 应该可以工作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2011-06-16T10:48:38.393

如果 TypeName(something) = "Empty" Then ...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-13T00:46:49.427

丑陋但实用！

```
Function IsNothingType( ByRef obj )
    If TypeName(obj) = "Nothing" Then
        IsNothingType = True
    Else
        IsNothingType = False
    End If  
End Function 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2010-04-11T20:10:12.713

如果您使用的是 VBScript/WSH，那么您可能想尝试“typeof”函数/方法。它对我有用，而上述方法没有。

# eclipse - 从 Eclipse 迁移到 Visual Studio 2008

> ID：777562
> 
> 赞同：21
> 
> 时间：2009-04-22T14:43:36.863
> 
> 标签：eclipse, visual-studio-2008

在过去 3 年在 Eclipse 中工作并记住了所有出色的快捷键和功能之后，我的新工作让我回到了 Visual Studio。我在 VS 上找到了一些快捷键列表，但我正在寻找将 Eclipse 功能映射到 Visual Studio 的综合指南。有谁知道旨在帮助 Eclipse 用户过渡到 VS 的好教程？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2009-05-20T20:33:01.593

由于缺乏这方面的信息，让我们开始一个社区 wiki 答案。请在此答案中添加有关迁移提示的其他信息。请避免在答案中使用 ReSharper 等 3rd 方插件。

## 快捷键

```
+----------------------+---------------------+---------------------+
|   Command            |   Eclipse shortcut  |   VS.NET shortcut   |
+----------------------+---------------------+---------------------+
|   Delete line        |    Ctrl-D           |    Ctrl-L           |
|   Comment line       |    Ctrl-/           |    Ctrl-K-C         |
|   Uncomment line     |    Ctrl-/           |    Ctrl-K-U         |
|   Toggle editor tabs |    Ctrl-F6          |    Ctrl-F6          |
|   Goto Line          |    Ctrl-L           |    Ctrl-G           |
|   Goto Definition    |    Ctrl-Click or F3 |    F12              |
|   Find next          |    Ctrl-K           |    F3               |
|   Find previous      |    Ctrl-Shift-K     |    Shift-F3         |
|   Go backward        |    Alt-LeftArrow    |    Ctrl-minus       |
|   Go forward         |    Alt-RightArrow   |    Ctrl-Shift-minus |
|   Find usage         |    Ctrl-Shift-G     |    Ctrl-K-R         |
|   Rename             |    Alt-Shift-R      |    Ctrl-R-R         |
|   Refactor           |    Alt-Shift-T      |    none             |
|   Open Type          |    Ctrl-Shift-T     |    Ctrl-,           |
|   Navigate To        |    Ctrl-Shift-R     |    Ctrl-,           |
+----------------------+---------------------+---------------------+ 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-04-22T14:47:24.967

这听起来很轻率，但假设您将使用 C#，最重要的一点是：购买[ReSharper](http://jetbrains.com/resharper)。到那时，您将拥有很多您习惯的东西 - 集成单元测试、查找资源、查找类型（使用 Camel-casing 等）、更好的 Intellisense 等等。

之后，了解最重要的键盘快捷键是 Ctrl-。对于“给我你可以自动为我做的事情的列表”和 Alt-Enter 相同，但用于 ReSharper 建议。

网上有各种 ReSharper 和 VS 快捷键备忘单——我怀疑你可以尽快找到它们：)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2010-08-06T04:30:22.183

我一直在慢慢地定制我的 Visual Studio 2008 来创建一些技巧，就像我使用 Eclipse 时一样。我推荐这两个作为起点：

1.  Rock Scroll - 带有增强滚动条的文本突出显示。非常简洁的工具，可帮助您直观地定位代码中使用变量的位置： [http ://microsoftdev.blogspot.com/2008/05/rock-scroll-visual-studio-plugin.html](http://microsoftdev.blogspot.com/2008/05/rock-scroll-visual-studio-plugin.html)

2.  快速打开文件 - 创建您喜欢的快捷方式，瞧，您可以快速访问项目中的任何文件：http: [//kutny.net/vsopen/](http://kutny.net/vsopen/)

我在这里写过博客：[http ://www.wagnerdanda.me/2010/08/visual-studio-tips-like-eclipse/](http://www.wagnerdanda.me/2010/08/visual-studio-tips-like-eclipse/)

# java - 如何使用 Java 重新填充表单？

> ID：777565
> 
> 赞同：1
> 
> 时间：2009-04-22T14:44:18.873
> 
> 标签：java, servlets

我有一个提交给 servlet 并使用 doPost() 方法处理的表单。提交表单后，用户将被带到另一个带有“后退”按钮（不是浏览器的后退按钮）的页面。如果单击后退按钮，则表单应重新填充原始输入。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-22T14:56:40.030

您有责任保留信息并手动重新填写表格。您可以通过以下两种方式之一执行此操作：

1.  您可以将内容推送到客户端并在必要时将其读回。
2.  或者您可以将该客户端的表单数据保存在服务器空间中。

我更喜欢后者，通过创建一个代表表单数据的模型。处理表单后，您可以为该客户保存一份副本。如果页面重新加载，您可以检查是否存在以前的模型。如果存在，您可以使用该数据来填充您的表单。如果不存在，您可以使用默认模型或空值。

将您的内容收集到一个模型中还有其他优点，这将使您以后受益。例如，如果您对表单进行了更改，并且您在“提交”和“清除”按钮附近有一个“撤消”按钮，您可以轻松地恢复到最后一个已知状态。为了激活“撤消”按钮，您可以轻松地执行以下操作：

```
boolean isDirty = savedModel.equals(currentModel); 
```

并使用布尔值启用/禁用“撤消”按钮，而不是使用大量“if/else”语句来查看值是否已更改。干净多了。

杰奇！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-22T14:54:35.837

如果您使用 javascript:history.back() 您的浏览器应该会自动为您处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-22T14:58:01.070

您必须跟上用户在表单中提交的数据。

您可以将该数据放在 url、请求或会话中。

确保在将它们放回表单时转义任何不安全的字符。

有很多网络框架可以让这类事情更容易做。

[Struts](http://struts.apache.org/)和[Stripes](http://stripesframework.org/)是我想到的两个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-22T14:59:05.483

提交原始表单后，您有几个服务器端选项：

1.  将表单值保留在会话中，并使用“返回”操作调用的表单填充它们；
2.  将表单值作为参数添加到“返回”操作 url，以便它们成为请求的一部分。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-22T15:01:44.027

如果用户提交表单，数据是否被放入数据库？如果是这样，只需查询数据库并重新填充表单...如果不是，请考虑将数据保存到数据库中。

# c# - 在没有 WMI 的情况下查找 USB 驱动器的序列号

> ID：777569
> 
> 赞同：2
> 
> 时间：2009-04-22T14:44:53.723
> 
> 标签：c#

我们如何在c#中不使用WMI找到USB驱动器的序列号？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-22T15:01:46.227

如果您可以使用 WMI，则以下链接看起来是一个不错的起点。[使用 C# 的易失 USB 序列号](http://www.cfdan.com/posts/Retrieving_Non-Volatile_USB_Serial_Number_Using_C_Sharp.cfm)。

您可以实现 WMI 解决方案，因为这看起来是非常简单的代码，并且已经过相当广泛的测试。如果您收到 WMI 错误，您可以优雅地使用非 WMI 调用进入另一个实现。

要在不使用 WMI 的情况下获取序列号，我建议您查看 microsoft 脚本运行时。您可以从 COM 选项卡将其添加到您的项目引用中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-22T15:09:30.437

我不认为 C# 有任何用于此类事情的本机 API，但[这篇博客文章](http://addressof.com/blog/archive/2004/02/14/392.aspx)提出了一种使用互操作的方法。代码在 VB.net 中，但翻译成 c# 应该不会太难希望有帮助。

# c# - ASP 控件的 HTML 模板

> ID：777573
> 
> 赞同：0
> 
> 时间：2009-04-22T14:45:24.860
> 
> 标签：c#, asp.net, html, dynamic

我正在编写一个应用程序，该应用程序要求我的客户可以以他们选择的任何方式来布局他们的输入表单。

我想使用带有占位符的 HTML 模板，然后在运行时将它们替换为特定的 .NET 控件：

```
<table style="width: 100%;">
<tr>
    <td colspan="2">
        <fieldset title="Customers Template" >
            <table style="width:100%;">
                <tr>
                    <td width="140">
                        Policy Number:</td>
                    <td width="150">
                        $$Policy Number$$</td>
                    <td colspan="2" rowspan="3" valign="top">
                        Type 1:<br />
                        $$Type 1$$</td>
                    <td rowspan="3" valign="top">
                        Info:<br />
                        $$Info$$</td>
                    <td rowspan="3" valign="top">
                        Problems:<br />
                        $$Problems$$</td>
                </tr>... 
```

因此，我想在运行时根据要添加的字段的数据类型，用各种 .NET 控件查找并替换我的 $$xxx$$ 文本。

关于解决这个问题的好方法有什么建议吗？

谢谢，马克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-22T14:47:28.117

`<asp:PlaceHolder>`用控件替换您的 $$xxx$$ 块。

在运行时，您可以解析模板

--- 在最简单的情况下，您可以要求模板是有效的 xhtml，然后您可以简单地使用 .NET XML API 来遍历 XmlDocument 的所有 ChildNode。从每个元素构建适当的 ASP.NET 服务器控件。

对于更复杂（和完整的 HTML 解析器），请参阅[http://www.developer.com/net/csharp/article.php/2230091](http://www.developer.com/net/csharp/article.php/2230091)

在您解析时，无论您在哪里看到`<asp:PlaceHolder>`- 将其替换为定义模板的逻辑。

教程：[http ://www.devhood.com/tutorials/tutorial_details.aspx?tutorial_id=752](http://www.devhood.com/tutorials/tutorial_details.aspx?tutorial_id=752)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-23T17:38:08.733

如果您打算只用字符串替换这些占位符，请查看[NVelocity 模板引擎](http://nvelocity.sourceforge.net/)。[在这个答案](https://stackoverflow.com/questions/620265/can-i-set-up-html-email-templates-in-c-on-asp-net/620315#620315)中，我只是展示了如何通过模板创建电子邮件。

但是对于 asp.net 服务器控件，您可以将 html 模板拆分为块，并将它们作为 LiteralControl 添加到您的页面，如下所示：

```
Page.Controls.Add(new LiteralControl(@"<td width='140'>
                        Policy Number:</td>
                    <td width='150'>"));
Page.Controls.Add(textBox1);
Page.Controls.Add(new LiteralControl(@"</td><td colspan='2' rowspan='3' valign='top'>
                        Type 1:<br />")); 
```

# java - 获取应用服务器下的真实（虚拟）主机名

> ID：777575
> 
> 赞同：2
> 
> 时间：2009-04-22T14:45:31.430
> 
> 标签：java, jsp, servlets, jetty

我有一个在 Jetty 下运行的应用程序，我希望该应用程序返回自引用的绝对 URL（在生成 RSS 提要时，客户端必须能够在没有“当前 URL”上下文的情况下工作）。

问题是我事先不知道应用程序将部署在哪个主机名下，而且很可能它将部署在多个主机名映射到同一个 IP 地址的虚拟主机环境中。我尝试使用`HttpServletRequest.getLocalName()`，但它返回解析的主机名 [1] 用于接收请求的 IP 地址（通常是在本地主机文件中设置的），而不是客户端在 URL 中指定的主机名HTTP 请求。

基本上我想得到 CGI 下的环境变量`SERVER_NAME`，但它看起来不像 Java API 提供了这个。任何帮助将不胜感激。

[1] 仅在我幸运的情况下 - 在某些设置中它只返回 IP 地址。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-22T14:53:37.947

用于[`ServletRequest.getServerName()`](http://java.sun.com/j2ee/sdk_1.3/techdocs/api/javax/servlet/ServletRequest.html#getServerName())从“Host”标头中获取虚拟主机名。这相当于 CGI 的`SERVER_NAME`变量。

# php - Replacing HTML attributes using a regex in PHP

> ID：777581
> 
> 赞同：5
> 
> 时间：2009-04-22T14:46:38.243
> 
> 标签：php, html, regex, preg-replace

OK,I know that I should use a DOM parser, but this is to stub out some code that's a proof of concept for a later feature, so I want to quickly get some functionality on a limited set of test code.

I'm trying to strip the width and height attributes of chunks HTML, in other words, replace

```
width="number" height="number" 
```

with a blank string.

The function I'm trying to write looks like this at the moment:

```
function remove_img_dimensions($string,$iphone) {
    $pattern = "width=\"[0-9]*\"";
    $string = preg_replace($pattern, "", $string);

    $pattern = "height=\"[0-9]*\"";
    $string = preg_replace($pattern, "", $string);

    return $string;
} 
```

But that doesn't work.

How do I make that work?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-22T18:31:54.583

PHP is unique among the major languages in that, although regexes are specified in the form of string literals like in Python, Java and C#, you also have to use regex delimiters like in Perl, JavaScript and Ruby.

Be aware, too, that you can use single-quotes instead of double-quotes to reduce the need to escape characters like double-quotes and backslashes. It's a good habit to get into, because the escaping rules for double-quoted strings can be surprising.

Finally, you can combine your two replacements into one by means of a simple alternation:

```
$pattern = '/(width|height)="[0-9]*"/i'; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-22T14:54:21.253

Your pattern needs the start/end pattern character. Like this:

```
$pattern = "/height=\"[0-9]*\"/";
$string = preg_replace($pattern, "", $string); 
```

"/" is the usual character, but most characters would work ("|pattern|","#pattern#",whatever).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-22T15:01:03.233

I think you're missing the parentheses (which can be //, || or various other pairs of characters) that need to surround a regular expression in the string. Try changing your $pattern assignments to this form:

```
$pattern = "/width=\"[0-9]*\"/"; 
```

...if you want to be able to do a case-insensitive comparison, add an 'i' at the end of the string, thus:

```
$pattern = "/width=\"[0-9]*\"/i"; 
```

Hope this helps! David

# windows - 寻找一个好的启用 WebDAV 的 Windows 编辑器

> ID：777586
> 
> 赞同：5
> 
> 时间：2009-04-22T14:47:13.517
> 
> 标签：windows, editor

在我们公司内部，我们使用专有的模板引擎，将其模板存储在 MySQL 数据库中。我们最近为此开发了一个 WebDAV 界面，它允许我们使用标准工具来编辑它们，而不是一个讨厌的`<textarea>`.

标准的操作系统 webdav 客户端虽然不是很好，所以对于 OS/X，我们选择了 Coda，它具有惊人的 WebDAV 支持并为我们节省了大量时间。

虽然我们的一些开发人员使用的是 Windows，但有人知道内置 WebDAV 支持的优秀编辑器吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-22T15:09:03.137

您可以[将 WebDAV URI 挂载为本地驱动器](http://web.archive.org/web/20081220082700/https://www.hss.caltech.edu/help/web/webdav/accessing/windowsxp)，然后使用标准编辑器（如 notepad.exe 或稍微更高级的编辑器（如[Notepad++](http://notepad-plus.sourceforge.net/uk/site.htm) ））访问它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-25T15:57:30.953

我最终使用了[Netdrive](http://www.netdrive.net/)。尽管它有自己的问题（糟糕的、糟糕的多用户支持），但客户端的行为比 Windows 更流畅，并且做了很多内置缓存。

赞成其他两个答案以获得帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-23T00:11:43.020

oXygen XML 编辑器可以[使用](http://www.oxygenxml.com/)[WebDAV](http://www.oxygenxml.com/ftp_webdav.html)。可能值得检查是否也可以使用它编辑非 XML 文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-07-31T19:27:13.007

您可以使用良好的 FTP 客户端（例如处理 SFTP、WebDav 和 Amazon S3 协议的[CrossFTP ）使用您喜欢的编辑器来编辑远程文件。](http://www.crossftp.com)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-26T23:08:56.687

有[Bluefish](http://www.bennewitz.com/bluefish/stable/binaries/win32/)、[gedit](http://ftp.gnome.org/pub/gnome/binaries/win32/gedit/)、[Kate](http://windows.kde.org/download.php)等。它们主要是为 Linux 构建的，但我发布的链接中提供了 Windows 端口。他们都是成熟的编辑器，因为您几乎不会错过任何功能。对于此类问题，进行主要查找的最佳来源是[wikipedia](http://en.wikipedia.org/wiki/Comparison_of_text_editors)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-02T02:58:22.537

Microsoft Expression Web 4 实际上非常适合这一点。截至 2012 年 12 月，它现在是[免费](http://web.archive.org/web/20170514074919/http://www.microsoft.com/en-us/download/details.aspx?id=36179) *的（如啤酒）*但[不受支持](http://web.archive.org/web/20170610051355/http://www.microsoft.com/expression/eng/) *（如开发已停止）*。

我用它来编辑 HTML 和 CSS 文件并通过 WebDAV 发布到我的主机。它可以完成您所期望的一切，语法高亮、自动完成、同步更改等等。

我对它是废弃软件这一事实并不感到非常困扰，它绝对是目前最适合我的需求。[有关维基百科的更多信息](http://en.wikipedia.org/wiki/Microsoft_Expression_Web)

# ms-access - Access VBA代码的版本控制？

> ID：777591
> 
> 赞同：4
> 
> 时间：2009-04-22T14:47:38.133
> 
> 标签：ms-access, version-control, ms-office

> **可能重复：**
> [VBA 文件的版本控制](https://stackoverflow.com/questions/662166/version-control-for-vba-file)

是否存在任何类型的版本控制？如果没有，有没有什么好的解决方案可以用 VBA 集体开发 MS Access 2007 数据库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2010-09-14T14:29:28.850

Microsoft为 Access 2010制作了[源代码控制插件：](http://www.microsoft.com/downloads/en/details.aspx?FamilyID=586912A5-3809-44EF-AC55-43D36ECAB9DE)

> 源代码控制插件允许与 Microsoft Visual SourceSafe 或其他源代码控制系统集成，以允许签入/签出查询、表单、报告、宏、模块和数据。您还可以查看已检出对象的差异。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-22T15:38:58.413

Access 的唯一一个集成 VC 解决方案是 Microsoft Visual Source Safe，但它的设计很差，甚至 Microsoft 内部都避免使用它；）。有人称它为“源销毁系统”，但我个人知道使用它的成功案例。一般来说，由于其局限性，它可能是中小型项目的一个很好的解决方案。

这是一篇关于 VSS 的非常关键的文章： [http ://www.highprogrammer.com/alan/windev/sourcesafe.html](http://www.highprogrammer.com/alan/windev/sourcesafe.html)

另一种选择是设计自己的代码以使用 Application.SaveAsText() 导出 VBA 解决方案 - 它是 Access API 的部分未记录功能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-02-20T18:44:52.483

我使用 Access 应用程序和 Team Foundation Server 源代码管理。您需要切换 Access 期望的源代码控制提供程序；当我们从 VSS 迁移到 TFS 时，我使用了[Sourcecode Control Switcher](http://www.codeproject.com/KB/applications/sccswitcher.aspx)这个工具。切换后，您可以在 Access 中设置源代码控制设置，并从 TFS 构建一个源代码控制连接的 .mdb。它工作得很好。

# xforms - XForms 有后继者吗？

> ID：777593
> 
> 赞同：17
> 
> 时间：2009-04-22T14:47:59.020
> 
> 标签：xforms

我们正在寻找一种具有易于使用（阅读非技术）创作环境的桌面表单技术。几年前，当我最后一次看到这个时，XForms 似乎会成熟到一些真正有用的东西。现在，这项技术似乎很少发生（例如，在 XForms 标记下只有 5 个问题），并且提供的工具不多，尤其是基于桌面的工具。

那么，XForms 死了吗？有更好的东西出现吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-04-27T14:30:52.767

有很多[支持 XForms 的软件](http://en.wikipedia.org/wiki/XForms)。几年前我将它用于一个项目，我对很少的代码完成的工作量印象深刻。W3C 不会向 PHB 宣传他们的技术，因此采用速度肯定会很慢，而其他人则将符合流行语的供应商特定解决方案作为灵丹妙药。开发人员（尤其是那些自认为是“硬核”的人）也对计算机科学中被视为毫无意义的“XML 化”的一切感到耻辱。此外，我认为 HTML 5 的侧轨正在将注意力从 Web 上更有趣的问题上移开。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2010-02-08T22:43:43.223

称其为继任者可能是对它的亵渎，但 HTML5 中的表单正在开发中（这一切都始于“Web Forms 2.0”）。

它并不比 XForms 先进，但回答了“XForms 发生了什么”。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-05-21T05:08:46.020

我们目前正在为一个项目审查 XForms。尽管 Ubiquity 已合并到[backplanejs](https://code.google.com/p/backplanejs/)中，但前面提到了几个小的活跃项目，这似乎垂死了。

[Orbeon](http://www.orbeon.com/)肯定在积极开发和发布新版本，并逐渐添加来自 XForms 2.0 标准的特性。从外部角度来看，它们似乎是最健康的并且是 LGPL/商业的。但是，它们不是纯粹的客户端解决方案，因为有一个服务器组件。

[BetterFORM](http://betterform.de/en/index.html)也在积极开发和发布新版本，他们的解决方案是 XForms 的纯客户端。

有几个看起来很有趣的小项目：[XSLTForms](http://www.agencexml.com/xsltforms)似乎是最活跃的，并且 100% 基于浏览器；有双重许可 LGPL/商业。

在我看来，这是一项伟大的技术，但它也是一项利基技术。将用户界面“外部化”的功能非常有用（尤其是在我公司的应用程序中），但它不会产生与最好的 HTML5 UI 一样好的 UI。

我不知道仅客户端的 XForms 支持是否是应用程序和移动设备时代的最佳方法。我确实知道我希望看到一种产品能够生成与流行的 Javascript 框架（如 extjs）兼容的 UI，以简化将 XForms 包含到现有 UI 中的过程。

如果你需要它，它就在那里，但它看起来永远不会很大。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-28T16:04:56.247

XForms 必须在客户端实现才能公开使用。有两个项目可用于无需插件或安装的免费客户端实现：Ubiquity XForms 和 XSLTForms ( [http://www.agencexml.com/xsltforms](http://www.agencexml.com/xsltforms) )

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-09-24T23:49:09.817

XForms[正式死了](https://www.w3.org/MarkUp/Forms)：

> 表格工作组于 2015-04-08 正式关闭

如果您正在寻找不做大量动态内容的表单，[HTML 5 表单](https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Forms/Data_form_validation)具有一些内置的验证功能。

如果您希望表单能够处理很多动态的、有趣的事情，那么 JavaScript 可能是适合这项工作的工具。

如果需要，您仍然可以使用 XForms。[XSLTForms](http://www.agencexml.com/xsltforms.htm)在底层使用 JavaScript 让您在浏览器中编写 XForms 并让它正常工作。尝试在这里查看源代码：[http](http://www.agencexml.com/xsltforms/spreadsheet.xml) ://www.agencexml.com/xsltforms/spreadsheet.xml 。源是纯 XML。

[eXistdb](http://www.exist-db.org/exist/apps/homepage/index.html)捆绑了 XForms 和其他用于全栈 XML 开发的 XML 内容。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-10-23T11:57:26.460

截至 2014 年，XForms 似乎是一个死标准。

# jsp - 有没有办法使用 servlet 将自定义控件注入 JSP？

> ID：777594
> 
> 赞同：0
> 
> 时间：2009-04-22T14:48:00.033
> 
> 标签：jsp, servlets

我是 JSP 和 Servlet 的新手——我想知道 JSP 是否有任何方法可以将页面的给定区域的生成委托给 servlet，例如自定义控件（AWT 东西等）。

我研究这个的原因是 JSP 页面会很快变得非常混乱。

例子赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-22T15:02:31.607

您可以发出子请求并将子请求的输出发送到客户端，而不是被缓冲。例如`<c:import url="path/to/servlet"/>`（或使用`jsp:include`）。

如果您想在 JSP 页面期间调用一些自定义 Java 代码来生成输出，那么您可能会考虑使用自定义 JSP 标记而不是 servlet。应该有更少的开销，因为标签基本上只是实例化和调用，并且将参数传递给标签的方案更简洁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-06T11:26:57.517

除了`<jsp:include />`（或`<c:import />`，或自定义标签），如果您的目标是使 JSP 更易于维护，请查看 JTPL 模板： http: [//jtpl.sourceforge.net/](http://jtpl.sourceforge.net/) - 旧的，但有用的东西 :)

您还可以考虑使用一些组件 MVC 框架——例如 JSF 的实现。

# iphone - 使用 Quartz 2D / Core Graphics 完成此绘图的最佳方法是什么？

> ID：777595
> 
> 赞同：2
> 
> 时间：2009-04-22T14:48:14.417
> 
> 标签：iphone, objective-c, quartz-graphics

作为我的应用程序中一个视图的背景，我想在其框架内绘制一个相当简单的矩形边框。这本质上是一个矩形渐变：框架周围有一条黑线，在大约 10-20 像素处逐渐变白。不幸的是，据我所知，Core Graphics 不提供矩形渐变（使用`CGGradient`或`CGShading`）。所以我想知道最好的方法是什么。

我想到的两个：

1.  绘制一系列同心矩形，每个矩形颜色较浅，每边插入 1px。我想不出更简单的方法，但我必须自己做所有的梯度计算，而且可能是很多图形操作。
2.  在线性模式下使用`CGGradient`，每边一次。但是为了这个工作，我想我需要先为每一边设置一个梯形剪裁区域，以便渐变在角落处斜接。

似乎*应该*有一种方法可以使用路径抚摸来做到这一点，但似乎没有一种方法可以定义一种在每一侧都有不同方向的模式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-22T15:40:26.460

我会选择选项＃2：

> 在线性模式下使用 CGGradient，每边一次。但是为了这个工作，我想我需要先为每一边设置一个梯形剪裁区域，以便渐变在角落处斜接。

用于创建梯形区域将`NSBezierPath`相当简单，您只需执行四次绘图操作。

这是创建左侧梯形区域的基本代码：

```
NSRect outer = [self bounds];
NSPoint outerPoint[4];
outerPoint[0] = NSMakePoint(0, 0);
outerPoint[1] = NSMakePoint(0, outer.size.height);
outerPoint[2] = NSMakePoint(outer.size.width, outer.size.height);
outerPoint[3] = NSMakePoint(outer.size.width, 0);

NSRect inner = NSInsetRect([self bounds], borderSize, borderSize);
NSPoint innerPoint[4];
innerPoint[0] = inner.origin;
innerPoint[1] = NSMakePoint(inner.origin.x,
                            inner.origin.y + inner.size.height);
innerPoint[2] = NSMakePoint(inner.origin.x + inner.size.width,
                            inner.origin.y + inner.size.height);
innerPoint[3] = NSMakePoint(inner.origin.x + inner.size.width,
                            inner.origin.y);

NSBezierPath leftSidePath = [[NSBezierPath bezierPath] retain];
[leftSidePath moveToPoint:outerPoint[0]];
[leftSidePath lineToPoint:outerPoint[1]];
[leftSidePath lineToPoint:innerPoint[1]];
[leftSidePath lineToPoint:innerPoint[0]];
[leftSidePath lineToPoint:outerPoint[0]];

// ... etc.

[leftSidePath release]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-11-23T16:51:11.033

像这样的东西也可以工作。基本上：而不是使用剪切路径，只需使用混合模式。在本例中，渐变缓存在 CGLayer 中。

```
 CGContextRef ctx = UIGraphicsGetCurrentContext();
 CGColorSpaceRef cspace = CGColorSpaceCreateDeviceRGB();

 CGContextSetRGBFillColor(ctx, 1.0, 1.0, 1.0, 1.0);
 CGContextFillRect(ctx,self.bounds);

 CGFloat w = self.bounds.size.width;
 CGFloat h = self.bounds.size.height;
 CGFloat dh = (w-h)/2;

 CGLayerRef l = CGLayerCreateWithContext(ctx,CGSizeMake(h,48.0f),NULL);
 CGContextRef lctx = CGLayerGetContext(l);

 float comp[] = { .2,.5,1.0,1.0,1.0,1.0,1.0,1.0};
 CGGradientRef gradient = CGGradientCreateWithColorComponents(cspace, comp, NULL, 2);
 CGContextDrawLinearGradient(lctx, gradient,CGPointMake(0,0),CGPointMake(0,48), 0);

 CGContextSaveGState(ctx);
 CGContextSetBlendMode(ctx,kCGBlendModeDarken);
 for(int n=1;n<5;n++)
 {
  CGContextTranslateCTM(ctx,w/2.0,h/2.0);
  CGContextRotateCTM(ctx, M_PI_2);
  CGContextTranslateCTM(ctx,-w/2.0,-h/2.0);
  CGContextDrawLayerAtPoint(ctx,CGPointMake((n%2)*dh,(n%2)*-dh),l);
 }
 CGContextRestoreGState(ctx); 
```

# php - 在 PHP 中对关联数组进行排序

> ID：777597
> 
> 赞同：61
> 
> 时间：2009-04-22T14:48:25.773
> 
> 标签：php, arrays, sorting

我有一个这种格式的数组：

```
Array
(
    [0] => Array
        (
            [text] => tests
            [language] => 
            [advertiserCompetitionScale] => 5
            [avgSearchVolume] => 7480000
            [lastMonthSearchVolume] => 9140000
        )

    [1] => Array
        (
            [text] => personality tests
            [language] => 
            [advertiserCompetitionScale] => 5
            [avgSearchVolume] => 165000
            [lastMonthSearchVolume] => 201000
        )

    [2] => Array
        (
            [text] => online tests
            [language] => 
            [advertiserCompetitionScale] => 5
            [avgSearchVolume] => 246000
            [lastMonthSearchVolume] => 301000
        )

) 
```

如何按`avgSearchVolume`字段的降序对该格式的数组进行排序？是否有内置功能？

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2009-04-22T14:55:08.317

使用[`usort`](http://php.net/usort)并提供您自己的功能来进行订购，例如

```
function cmp($a, $b)
{
    return $b['avgSearchVolume'] - $a['avgSearchVolume'];
}

usort($array, "cmp"); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2009-04-22T19:13:10.740

在 PHP 5.3 之前，这是基于子键排序的最佳函数，无需为每个键创建新函数。

```
function sortBySubkey(&$array, $subkey, $sortType = SORT_ASC) {
    foreach ($array as $subarray) {
        $keys[] = $subarray[$subkey];
    }
    array_multisort($keys, $sortType, $array);
}
sortBySubkey($arr, 'avgSearchVolume'); 
```

使用 PHP 5.3，您可以像现在一样进行类似的函数调用。

```
function getSortVariable($sortType = SORT_ASC) {
    switch($sortType) {
        case SORT_ASC:
            return function ($a, $b) use ($subkey) { return strcmp($a[$subkey], $b[$subkey]); };
    }
}

function sortBySubkey(&$array, $subkey, $sortType = SORT_ASC) {
    $sortFunction = getSortVariable($sortType);
    usort($array, $sortFunction($subkey));
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-04-22T14:54:22.530

您必须将自定义回调函数与[`usort()`](http://de2.php.net/manual/en/function.usort.php).

```
function cmp($a, $b)
{
    if ($a['avgSearchVolume'] == $b['avgSearchVolume']) {
        return 0;
    }
    return ($a['avgSearchVolume'] > $b['avgSearchVolume']) ? -1 : 1;
}
usort($array, 'cmp'); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-02-05T09:36:34.737

```
function querySort ($first_Array,$second_Array) {
    return strcasecmp($first_Array['name'],$second_Array['name']);
}
echo '<pre>';
usort($main, 'querySort');

print_r($main);
die; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-20T05:07:17.560

这是另一种解决方案，您可以添加多个排序选项（参见代码的注释部分）

```
<?php

$arr=Array(
     Array("text" => "tests","language" =>"","advertiserCompetitionScale" => 5,"avgSearchVolume" => 7480000,"lastMonthSearchVolume" => 9140000),
     Array("text" => "personality tests","language" =>"","advertiserCompetitionScale" => 5,"avgSearchVolume" => 165000,"lastMonthSearchVolume"=>201000),
     Array("text" => "online tests","language" =>"","advertiserCompetitionScale" => 5,"avgSearchVolume" => 246000,"lastMonthSearchVolume" =>301000)
     );

$sort = array();
foreach($arr as $k=>$v) {
    $sort['avgSearchVolume'][$k] = $v['avgSearchVolume'];
    //$sort['text'][$k] = $v['text'];
}

array_multisort($sort['avgSearchVolume'], SORT_DESC, $arr);
//array_multisort($sort['avgSearchVolume'], SORT_DESC, $sort['text'], SORT_ASC,$arr);

echo "<pre>";
print_r($arr);

?> 
```

参考： http: [//php.net/manual/en/function.array-multisort.php](http://php.net/manual/en/function.array-multisort.php)

# delphi - 如何判断 Delphi DCU 中定义了哪些类型？

> ID：777602
> 
> 赞同：6
> 
> 时间：2009-04-22T14:50:00.247
> 
> 标签：delphi, dcu

我有一组编译的 Delphi dcu 文件，没有源代码。有没有办法确定该 dcu 中定义了哪些类型？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-22T19:21:03.810

要找出名为*FooUnit*的单元中的内容，请在编辑器中输入以下内容：

```
unit Test;

interface

uses FooUnit;

var
  x: FooUnit. 
```

最后按 Ctrl+Space，IDE 将显示可能的完成值列表，该列表应主要（如果不是唯一）包含类型名称。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-04-22T14:58:07.967

你可以看看[DCU32INT](http://hmelnov.icc.ru/DCU/index.eng.html)，一个 Delphi DCU 反编译器。它会生成一个可读但不可编译的 .int 文件，但如果您只想确定定义的类型，这可能就足够了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-22T14:59:27.073

DCU 格式没有记录，我上次检查过。但是，我发现有一个工具可以为您提供一些名为[DCUtoPAS](http://www.delphipages.com/result.cfm?ID=3166)的基本信息。它在网站上的评价不是很好，但它至少可以为您提取类型。还有[DCU32INT](http://hmelnov.icc.ru/DCU/index.eng.html)，这也可能有所帮助。

否则，您可能只需要使用十六进制编辑器打开文件并四处寻找字符串。

# c# - “根据验证程序，远程证书无效。” 使用 Gmail SMTP 服务器

> ID：777607
> 
> 赞同：262
> 
> 时间：2009-04-22T14:51:18.013
> 
> 标签：c#, email, smtp

我收到此错误：

> 根据验证程序，远程证书无效。

每当我尝试在我的 C# 代码中使用 Gmail 的 SMTP 服务器发送电子邮件时。有人可以指出我解决这个问题的正确方向吗？

以下是堆栈跟踪...

```
at System.Net.Security.SslState.StartSendAuthResetSignal(ProtocolToken message, AsyncProtocolRequest asyncRequest, Exception exception)
at System.Net.Security.SslState.CheckCompletionBeforeNextReceive(ProtocolToken message, AsyncProtocolRequest asyncRequest)
at System.Net.Security.SslState.StartSendBlob(Byte[] incoming, Int32 count, AsyncProtocolRequest asyncRequest)
at System.Net.Security.SslState.ProcessReceivedBlob(Byte[] buffer, Int32 count, AsyncProtocolRequest asyncRequest)
at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
at System.Net.Security.SslState.CheckCompletionBeforeNextReceive(ProtocolToken message, AsyncProtocolRequest asyncRequest)
at System.Net.Security.SslState.StartSendBlob(Byte[] incoming, Int32 count, AsyncProtocolRequest asyncRequest)
at System.Net.Security.SslState.ProcessReceivedBlob(Byte[] buffer, Int32 count, AsyncProtocolRequest asyncRequest)
at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
at System.Net.Security.SslState.CheckCompletionBeforeNextReceive(ProtocolToken message, AsyncProtocolRequest asyncRequest)
at System.Net.Security.SslState.StartSendBlob(Byte[] incoming, Int32 count, AsyncProtocolRequest asyncRequest)
at System.Net.Security.SslState.ProcessReceivedBlob(Byte[] buffer, Int32 count, AsyncProtocolRequest asyncRequest)
at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
at System.Net.Security.SslState.CheckCompletionBeforeNextReceive(ProtocolToken message, AsyncProtocolRequest asyncRequest)
at System.Net.Security.SslState.StartSendBlob(Byte[] incoming, Int32 count, AsyncProtocolRequest asyncRequest)
at System.Net.Security.SslState.ProcessReceivedBlob(Byte[] buffer, Int32 count, AsyncProtocolRequest asyncRequest)
at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
at System.Net.Security.SslState.CheckCompletionBeforeNextReceive(ProtocolToken message, AsyncProtocolRequest asyncRequest)
at System.Net.Security.SslState.StartSendBlob(Byte[] incoming, Int32 count, AsyncProtocolRequest asyncRequest)
at System.Net.Security.SslState.ProcessReceivedBlob(Byte[] buffer, Int32 count, AsyncProtocolRequest asyncRequest)
at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
at System.Net.Security.SslState.CheckCompletionBeforeNextReceive(ProtocolToken message, AsyncProtocolRequest asyncRequest)
at System.Net.Security.SslState.StartSendBlob(Byte[] incoming, Int32 count, AsyncProtocolRequest asyncRequest)
at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
at System.Net.TlsStream.CallProcessAuthentication(Object state)
at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
at System.Net.TlsStream.ProcessAuthentication(LazyAsyncResult result)
at System.Net.TlsStream.Write(Byte[] buffer, Int32 offset, Int32 size)
at System.Net.PooledStream.Write(Byte[] buffer, Int32 offset, Int32 size)
at System.Net.Mail.SmtpConnection.Flush()
at System.Net.Mail.SmtpConnection.GetConnection(String host, Int32 port)
at System.Net.Mail.SmtpTransport.GetConnection(String host, Int32 port)
at System.Net.Mail.SmtpClient.GetConnection()
at System.Net.Mail.SmtpClient.Send(MailMessage message)
at BulkEmail.frmemail.mailsending(String toaddress, String fromaddress, String fromname, String subject, String pwd, String attachements, String mailmessage, String htmlmessage, Int32 i, Int32 j, String replytoaddress) 
```

* * *

## 回答 #1

> 赞同：326
> 
> 时间：2009-09-06T20:00:24.087

> # 警告：不要在生产代码中使用它！

作为一种解决方法，您可以关闭证书验证。只有这样做才能确认由于证书错误而引发错误。

在调用之前调用此方法`smtpclient.Send()`：

```
[Obsolete("Do not use this in Production code!!!",true)]
static void NEVER_EAT_POISON_Disable_CertificateValidation()
{
    // Disabling certificate validation can expose you to a man-in-the-middle attack
    // which may allow your encrypted message to be read by an attacker
    // https://stackoverflow.com/a/14907718/740639
    ServicePointManager.ServerCertificateValidationCallback =
        delegate (
            object s,
            X509Certificate certificate,
            X509Chain chain,
            SslPolicyErrors sslPolicyErrors
        ) {
            return true;
        };
} 
```

* * *

## 回答 #2

> 赞同：72
> 
> 时间：2013-07-26T15:56:40.033

这里的链接解决了我的问题。

[http://brainof-dave.blogspot.com.au/2008/08/remote-certificate-is-invalid-according.html](http://brainof-dave.blogspot.com.au/2008/08/remote-certificate-is-invalid-according.html)

我转到 Web 服务的 url（在有问题的服务器上），单击 IE 中的小安全图标，这会显示证书。然后我单击详细信息选项卡，单击复制到文件按钮，这允许我将证书导出为 .cer 文件。在本地获得证书后，我可以使用以下说明将其导入服务器上的证书存储区。

启动一个新的 MMC。文件 --> 添加/删除管理单元... 单击添加... 选择证书并单击添加。检查“计算机帐户”单选按钮。点击下一步。

在下一个屏幕中选择客户端计算机。单击完成。单击关闭。单击确定。现在将证书安装到受信任的根证书颁发机构证书存储中。这将允许所有用户信任证书。

* * *

## 回答 #3

> 赞同：40
> 
> 时间：2014-10-15T16:15:20.780

聚会有点晚了，但是如果您正在寻找像 Yury 的解决方案，以下代码将帮助您确定问题是否与自签名证书有关，如果是，则忽略自签名错误。如果您愿意，您显然可以检查其他 SSL 错误。

我们使用的代码（由微软提供 - [http://msdn.microsoft.com/en-us/library/office/dd633677(v=exchg.80).aspx](http://msdn.microsoft.com/en-us/library/office/dd633677(v=exchg.80).aspx)）如下：

```
 private static bool CertificateValidationCallBack(
         object sender,
         System.Security.Cryptography.X509Certificates.X509Certificate certificate,
         System.Security.Cryptography.X509Certificates.X509Chain chain,
         System.Net.Security.SslPolicyErrors sslPolicyErrors)
    {
  // If the certificate is a valid, signed certificate, return true.
  if (sslPolicyErrors == System.Net.Security.SslPolicyErrors.None)
  {
    return true;
  }

  // If there are errors in the certificate chain, look at each error to determine the cause.
  if ((sslPolicyErrors & System.Net.Security.SslPolicyErrors.RemoteCertificateChainErrors) != 0)
  {
    if (chain != null && chain.ChainStatus != null)
    {
      foreach (System.Security.Cryptography.X509Certificates.X509ChainStatus status in chain.ChainStatus)
      {
        if ((certificate.Subject == certificate.Issuer) &&
           (status.Status == System.Security.Cryptography.X509Certificates.X509ChainStatusFlags.UntrustedRoot))
        {
          // Self-signed certificates with an untrusted root are valid. 
          continue;
        }
        else
        {
          if (status.Status != System.Security.Cryptography.X509Certificates.X509ChainStatusFlags.NoError)
          {
            // If there are any other errors in the certificate chain, the certificate is invalid,
         // so the method returns false.
            return false;
          }
        }
      }
    }

    // When processing reaches this line, the only errors in the certificate chain are 
// untrusted root errors for self-signed certificates. These certificates are valid
// for default Exchange server installations, so return true.
    return true;
  }
  else
  {
 // In all other cases, return false.
    return false;
  }
} 
```

* * *

## 回答 #4

> 赞同：36
> 
> 时间：2011-10-31T15:50:30.163

您可以通过在证书无效时询问用户是否要继续来改进代码。*你要继续吗？*如下：

```
ServicePointManager.ServerCertificateValidationCallback = 
    new RemoteCertificateValidationCallback(ValidateServerCertificate); 
```

并添加这样的方法：

```
public static bool ValidateServerCertificate(object sender,X509Certificate certificate,X509Chain chain,SslPolicyErrors sslPolicyErrors)
{
    if (sslPolicyErrors == SslPolicyErrors.None)
        return true;
    else
    {
        if (System.Windows.Forms.MessageBox.Show("The server certificate is not valid.\nAccept?", "Certificate Validation", System.Windows.Forms.MessageBoxButtons.YesNo, System.Windows.Forms.MessageBoxIcon.Question) == System.Windows.Forms.DialogResult.Yes)
            return true;
        else
            return false;
    }
} 
```

* * *

## 回答 #5

> 赞同：24
> 
> 时间：2016-02-27T22:23:25.837

我遇到了完全相同的问题，并发现默认情况下，Avast 防病毒软件的**Mail Shield**已激活**“扫描 SSL 连接” 。**确保**将其关闭**。

据我所知，Avast 将**“打开”**邮件，扫描它是否有任何病毒，然后**使用它自己的证书**对其进行签名，这样邮件就不会再由 gmail 的证书签名，从而产生该错误。

**解决方案1：**

*   关闭防病毒软件（或整个邮件屏蔽）的 SSL 扫描。

**解决方案2（应该是最好的安全性）：**

*   以某种方式获取防病毒软件使用的证书（Avast 可以选择导出它）
*   在连接到 gmail 服务器之前，将其导入 imap/pop/smtp 客户端。

* * *

## 回答 #6

> 赞同：18
> 
> 时间：2018-10-05T15:27:28.283

我知道我在这场比赛中已经很晚了，但我还没有在这里看到指向 TLS 流的 system.diagnostics 日志的答案。

在对代码进行任何更改之前，请确保您了解问题所在。这`AuthenticationException`是一个非常通用的例外，它并没有说明太多。要了解幕后情况，请编辑应用程序的 app.config 文件（或创建一个新文件），并确保在该部分中启用了**System.Net**跟踪源`system.diagnostics`，例如：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <system.diagnostics>
    <trace autoflush="true" />
    <sharedListeners>
      <add name="file" initializeData="c:\network.log" type="System.Diagnostics.TextWriterTraceListener" />
    </sharedListeners>
    <sources>
      <source name="System.Net" switchValue="Verbose">
        <listeners>
          <add name="file" />
        </listeners>
      </source>
    </sources>
  </system.diagnostics>
</configuration> 
```

重新运行您的应用程序并检查 c:\network.log 文件。您应该在那里看到有关 TLS (SSL) 连接的详细信息，例如：

```
System.Net Information: 0 : [12764] InitializeSecurityContext(credential = System.Net.SafeFreeCredential_SECURITY, context = f44368:535f958, targetName = localhost, inFlags = ReplayDetect, SequenceDetect, Confidentiality, AllocateMemory, InitManualCredValidation)
System.Net Information: 0 : [12764] InitializeSecurityContext(In-Buffers count=2, Out-Buffer length=0, returned code=OK).
System.Net Information: 0 : [12764] Remote certificate: [Version]
  V3

[Subject]
  CN=test
  Simple Name: test
  DNS Name: example.com

[Issuer]
  CN=Root CA
  Simple Name: Root CA
  DNS Name: Root CA

...

[Signature Algorithm]
  sha256RSA(1.2.840.113549.1.1.11)

[Public Key]
  Algorithm: RSA
  Length: 2048
  Key Blob: ....
System.Net Information: 0 : [12764] SecureChannel#38496415 - Remote certificate has errors:
System.Net Information: 0 : [12764] SecureChannel#38496415 -    Certificate name mismatch.
System.Net Information: 0 : [12764] SecureChannel#38496415 - Remote certificate was verified as invalid by the user.
System.Net Error: 0 : [12764] Exception in AppDomain#10923418::UnhandledExceptionHandler - The remote certificate is invalid according to the validation procedure.. 
```

知道导致问题的原因，您应该能够解决它或至少缩小您的 Google 搜索范围。

* * *

## 回答 #7

> 赞同：15
> 
> 时间：2013-05-30T22:17:38.437

由于 ssl 从 Outlook 发送时出现相同的错误。尝试设置 EnableSSL = false 解决了这个问题。

例子：

```
var smtp = new SmtpClient
                {
                    Host = "smtp.gmail.com",                   
                    Port = 587,
                    EnableSsl = false,
                    DeliveryMethod = SmtpDeliveryMethod.Network,
                    UseDefaultCredentials = false,                   
                    Credentials = new NetworkCredential("xxx@gmail.com", "xxxxx")
                }; 
```

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2012-12-17T22:53:36.340

您确定您使用的是正确的 SMTP 服务器地址吗？

smtp.google.com 和 smtp.gmail.com 都有效，但 SSL 证书颁发给第二个。

* * *

## 回答 #9

> 赞同：9
> 
> 时间：2015-07-09T05:59:18.490

当我尝试`SmtpClient`通过代理服务器（Usergate）发送电子邮件时，我遇到了同样的错误。

验证证书包含服务器地址，该地址不等于代理服务器地址，因此出现错误。我的解决方案：当检查证书时出现错误，接收证书，导出并检查。

```
public static bool RemoteServerCertificateValidationCallback(Object sender, X509Certificate certificate, X509Chain chain, SslPolicyErrors sslPolicyErrors)
    {
        if (sslPolicyErrors == SslPolicyErrors.None)
            return true;

        // if got an cert auth error
        if (sslPolicyErrors != SslPolicyErrors.RemoteCertificateNameMismatch) return false;
        const string sertFileName = "smpthost.cer";

        // check if cert file exists
        if (File.Exists(sertFileName))
        {
            var actualCertificate = X509Certificate.CreateFromCertFile(sertFileName);
            return certificate.Equals(actualCertificate);
        }

        // export and check if cert not exists
        using (var file = File.Create(sertFileName))
        {
            var cert = certificate.Export(X509ContentType.Cert);
            file.Write(cert, 0, cert.Length);
        }
        var createdCertificate = X509Certificate.CreateFromCertFile(sertFileName);
        return certificate.Equals(createdCertificate);
    } 
```

我的电子邮件发件人类的完整代码：

```
public class EmailSender
{
    private readonly SmtpClient _smtpServer;
    private readonly MailAddress _fromAddress;

    public EmailSender()
    {
        ServicePointManager.ServerCertificateValidationCallback = RemoteServerCertificateValidationCallback;
        _smtpServer = new SmtpClient();
    }

    public EmailSender(string smtpHost, int smtpPort, bool enableSsl, string userName, string password, string fromEmail, string fromName) : this()
    {
        _smtpServer.Host = smtpHost;
        _smtpServer.Port = smtpPort;
        _smtpServer.UseDefaultCredentials = false;
        _smtpServer.EnableSsl = enableSsl;
        _smtpServer.Credentials = new NetworkCredential(userName, password);

        _fromAddress = new MailAddress(fromEmail, fromName);
    }

    public bool Send(string address, string mailSubject, string htmlMessageBody,
        string fileName = null)
    {
        return Send(new List<MailAddress> { new MailAddress(address) }, mailSubject, htmlMessageBody, fileName);
    }

    public bool Send(List<MailAddress> addressList, string mailSubject, string htmlMessageBody,
        string fileName = null)
    {
        var mailMessage = new MailMessage();
        try
        {
            if (_fromAddress != null)
                mailMessage.From = _fromAddress;

            foreach (var addr in addressList)
                mailMessage.To.Add(addr);

            mailMessage.SubjectEncoding = Encoding.UTF8;
            mailMessage.Subject = mailSubject;

            mailMessage.Body = htmlMessageBody;
            mailMessage.BodyEncoding = Encoding.UTF8;
            mailMessage.IsBodyHtml = true;

            if ((fileName != null) && (System.IO.File.Exists(fileName)))
            {
                var attach = new Attachment(fileName, MediaTypeNames.Application.Octet);
                attach.ContentDisposition.CreationDate = System.IO.File.GetCreationTime(fileName);
                attach.ContentDisposition.ModificationDate = System.IO.File.GetLastWriteTime(fileName);
                attach.ContentDisposition.ReadDate = System.IO.File.GetLastAccessTime(fileName);
                mailMessage.Attachments.Add(attach);
            }
            _smtpServer.Send(mailMessage);
        }
        catch (Exception e)
        {
            // TODO lor error
            return false;
        }
        return true;
    }

    public static bool RemoteServerCertificateValidationCallback(Object sender, X509Certificate certificate, X509Chain chain, SslPolicyErrors sslPolicyErrors)
{
    if (sslPolicyErrors == SslPolicyErrors.None)
        return true;

    // if got an cert auth error
    if (sslPolicyErrors != SslPolicyErrors.RemoteCertificateNameMismatch) return false;
    const string sertFileName = "smpthost.cer";

    // check if cert file exists
    if (File.Exists(sertFileName))
    {
        var actualCertificate = X509Certificate.CreateFromCertFile(sertFileName);
        return certificate.Equals(actualCertificate);
    }

    // export and check if cert not exists
    using (var file = File.Create(sertFileName))
    {
        var cert = certificate.Export(X509ContentType.Cert);
        file.Write(cert, 0, cert.Length);
    }
    var createdCertificate = X509Certificate.CreateFromCertFile(sertFileName);
    return certificate.Equals(createdCertificate);
} 
```

}

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2015-08-12T00:12:42.110

调用 AuthenticateAsClient 时，我的问题出在 Windows 2003 Server 上。上述解决方案（例如绕过`ServicePointManager.ServerCertificateValidationCallback`）不起作用。

原来这是 Windows 2003 中的一个错误，并且有一个修补程序：

“使用 Cryptography API 的应用程序无法验证 Windows Server 2003 中的 X.509 证书”

[https://support.microsoft.com/en-us/kb/938397](https://support.microsoft.com/en-us/kb/938397)

安装此修补程序解决了我的问题。

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2014-03-06T21:05:25.880

我的问题不是我通过 IP 地址而不是 URL 来引用服务器。我从 CA 购买了一个签名证书，用于在专用网络中使用。在引用服务器时，证书上指定的 URL 确实很重要。一旦我通过证书中的 URL 引用服务器，一切就开始工作了。

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2012-07-19T05:37:08.383

您的网站文件夹需要网络服务安全。特别是 web.config。它使用此帐户访问您的证书注册表。这将不再需要向您的代码添加 hack。

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2014-02-10T08:02:26.063

检查计算机的日期和时间。如果错误，请更新为当前时间或自动设置为从 Internet 获取时间。

因为证书与固定的时间段相关，如果你的时钟是错误的，你很可能会遇到这样的错误。在这种情况下，通过固定时间，问题将得到解决。

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2015-04-09T10:47:39.007

在我们的案例中，问题是由 IIS 服务器证书引起的。证书的主题设置为 DNS 名称，用户试图通过 IP 地址访问网站，因此 .NET 认证验证失败。当用户开始使用 DNS 名称时，问题就消失了。

因此，您必须将您的 Provider URL 更改为[https://CertificateSubject/xxx/xxx.application](https://CertificateSubject/xxx/xxx.application)

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2018-10-08T08:54:43.127

添加这条线对我有用。这实际上信任[这里](https://stackoverflow.com/questions/52697281/smtp-ssl-certificate-issue-c-sharp-why-this-code-works)提到的所有证书。但是，这主要用于故障排除。如果这对您有用，则意味着远程服务器的证书未作为受信任的证书添加到您的计算机中。

```
System.Net.ServicePointManager.ServerCertificateValidationCallback = new System.Net.Security.RemoteCertificateValidationCallback(RemoteServerCertificateValidationCallback); 
```

完整代码是

```
private void sendAMail(String toAddress, String messageBody)
        {
            String msg = "Sending mail to : " + toAddress;

            MailMessage mail = new MailMessage();
            mail.To.Add(toAddress);
            mail.From = new MailAddress("from@mydomain.com");
            mail.Subject = "Subject: Test Mail";
            mail.Body = messageBody;
            mail.IsBodyHtml = true;            

            //Added this line here
            System.Net.ServicePointManager.ServerCertificateValidationCallback = new System.Net.Security.RemoteCertificateValidationCallback(RemoteServerCertificateValidationCallback);
            SmtpClient smtp = new SmtpClient();

            smtp.Host = "myhostname.com";            
            smtp.Credentials = new System.Net.NetworkCredential("sender@sample.com", "");
            smtp.EnableSsl = true;
            smtp.Port = 587;            
            smtp.Send(mail);            
        }

private bool RemoteServerCertificateValidationCallback(object sender, System.Security.Cryptography.X509Certificates.X509Certificate certificate, System.Security.Cryptography.X509Certificates.X509Chain chain, System.Net.Security.SslPolicyErrors sslPolicyErrors)
{
    //Console.WriteLine(certificate);
    return true;
} 
```

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2012-11-05T01:46:10.953

对于那些在使用自签名证书连接到本地站点时遇到同样错误的人，以下博客文章帮助了我。

[http://brainof-dave.blogspot.com.au/2008/08/remote-certificate-is-invalid-according.html](http://brainof-dave.blogspot.com.au/2008/08/remote-certificate-is-invalid-according.html)

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2013-09-13T23:25:56.343

有一篇关于调查此类问题的 MSDN 博客文章：

ASP.NET 疑难解答 - 根据验证程序，远程证书无效：http:
[//blogs.msdn.com/b/jpsanders/archive/2009/09/16/troubleshooting-asp-net-the-remote-certificate- is-invalid-according-to-the-validation-procedure.aspx](http://blogs.msdn.com/b/jpsanders/archive/2009/09/16/troubleshooting-asp-net-the-remote-certificate-is-invalid-according-to-the-validation-procedure.aspx)

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2021-06-07T11:21:40.590

如果您在使用 AWS 开发工具包将文件上传到 S3 时遇到此错误。确保您为 S3 选择了正确的区域。

[![在此处输入图像描述](https://i.stack.imgur.com/eSVEb.png)](https://i.stack.imgur.com/eSVEb.png)

如果您使用了不正确的区域。这将返回这样一个错误，顺便说一句，这并不意味着这个错误。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2014-07-14T12:57:01.020

它解决了我的问题

```
smtpClient.Credentials = new NetworkCredential(sendMail.UserName, sendMail.Password);
smtpClient.EnableSsl = false;//sendMail.EnableSSL; 
```

// 参考 // 问题仅出现在 SMTP 设置中输入用户名和密码时，使用上面的行设置 false SSl 以解决错误。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2018-08-23T21:56:21.810

这是我决定使用的解决方案。

```
 ServicePointManager.ServerCertificateValidationCallback = delegate (object s, X509Certificate certificate, X509Chain chain, SslPolicyErrors sslPolicyErrors)
        {
            string name = certificate.Subject;

            DateTime expirationDate = DateTime.Parse(certificate.GetExpirationDateString());

            if (sslPolicyErrors == SslPolicyErrors.None || (sslPolicyErrors == SslPolicyErrors.RemoteCertificateNameMismatch && name.EndsWith(".acceptabledomain.com") && expirationDate > DateTime.Now))
            {
                return true;
            }
            return false;
        }; 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2020-04-02T14:33:33.740

接受答案中的代码帮助我调试问题。然后我意识到`certificate`参数的 SN 字段与我认为的 SMTP 服务器不同。通过将`Host`SmtpClient 实例的属性设置为证书的 SN 值，我能够解决该问题。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2021-02-15T00:34:00.973

使用我的功能作为诊断证书问题 - 见屏幕

```
 System.Net.ServicePointManager.ServerCertificateValidationCallback = Function(s As Object,
                                                                                          cert As System.Security.Cryptography.X509Certificates.X509Certificate,
                                                                                          chain As System.Security.Cryptography.X509Certificates.X509Chain,
                                                                                          err As System.Net.Security.SslPolicyErrors)
                                                                                     Return True
                                                                                 End Function 
```

[![在此处输入图像描述](https://i.stack.imgur.com/q5cxd.png)](https://i.stack.imgur.com/q5cxd.png)

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2021-06-02T21:37:29.340

还没有看到有人指出明显的问题，如果你想安全地调试 SSL 问题，那么总是使用这种方法：

```
#if DEBUG
    ServicePointManager.ServerCertificateValidationCallback += (sender, cert, chain, sslPolicyErrors) => true;
#endif 
```

即使您确实不小心提交了代码，您仍然可以放心，它不会在发布模式下编译。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2021-11-04T23:14:14.100

在 Amazon Linux EC2 虚拟机上运行 dotnet 核心 Web 应用程序时遇到此错误。事实证明，我们已经有一段时间没有运行`sudo yum update`修补此服务器了，并且安装在机器上的根/中间证书已过期。（具体来说，这个问题是在 2021-09-30 对我们开始的。）

我们运行此命令来更新证书，然后重新启动我们的 dotnet 进程：

`sudo yum update ca-certificates`

AWS 支持进一步向我们指出此支持文章以解决类似问题：[为什么我在我的 EC2 实例上收到 Let's Encrypt 证书的证书过期错误？](https://aws.amazon.com/premiumsupport/knowledge-center/ec2-expired-certificate/)

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2022-02-23T06:41:04.063

下面的代码在 dotnetcore 中为我工作以绕过 ssl 证书

```
using (var httpClientHandler = new HttpClientHandler())
{                  
 httpClientHandler.ServerCertificateCustomValidationCallback = (message, cert, chain, errors) => true;
  using (var client = new HttpClient(httpClientHandler))
  {
  }
} 
```

# wpf - 如何调试 MVVM 中的数据绑定问题？

> ID：777612
> 
> 赞同：3
> 
> 时间：2009-04-22T14:52:18.387
> 
> 标签：wpf, data-binding, xaml, mvvm

我从头开始重建了[Josh Smith 的 CommandSink 示例，我的版本运行没有错误，](http://www.codeproject.com/KB/WPF/VMCommanding.aspx)*只是*我的命令按钮是灰色的。我认为这是因为某些地方设置不正确，因此命令永远不会设置为`CanExecute = true`或在某些时候设置为`CanExecute = false`.

但是由于数据绑定本质上是在 XAML 中进行的，所以我不确定在哪里“在命令上设置断点”，所以我可以看到在什么时间为按钮分配 CanExecute = false 或例如未分配`CanExecute = true`。

本质上，我在视图中有这些命令绑定：

```
<UserControl.CommandBindings>
    <sink:CommandSinkBinding Command="vm:CustomerViewModel.CloseCommand"/>
    <sink:CommandSinkBinding Command="vm:CustomerViewModel.ShowInformationCommand"/>
</UserControl.CommandBindings> 
```

在我的 CustomerViewModel 中，命令定义如下：

```
public static readonly RoutedCommand CloseCommand = new RoutedCommand();

public bool CanBeClosed
{
    get { return _customer.IsOpen; }
}

public void Close()
{
    _customer.IsOpen = false;

    this.OnPropertyChanged("CanBeClosed");
    this.OnPropertyChanged("CanBeApproved");
} 
```

但是由于我现在对 MVVM 的理解是您设置了 M-VM-M，运行您的应用程序和“获取数据绑定并正常工作”的东西。

**我想我正在寻找类似于 ASP.NET**中的“页面循环”之类的东西，以便逐步了解我的命令`CanExecute = true`何时以及何时`CanExecute = false`。

如果数据绑定没有在代码中显式完成，因此无法在经典意义上逐步调试，如何调试这样的 WPF/MVVM 模式？

# 回答：

尽管[Gishu 提到](http://www.beacosta.com/blog/?p=52)的这篇文章总体上对如何调试数据绑定问题很有帮助，并且通常回答了我关于如何做到这一点的问题，但在我的特定情况下它并没有帮助我。

对于它的价值，我通过与 Josh Smith 的原始代码进行逐行比较，发现了该代码的特殊问题，并发现该`CommandSinkBinding.OnCommandSinkChanged`方法中缺少这两行：

```
if (!ConfigureDelayedProcessing(depObj, commandSink))
    ProcessCommandSinkChanged(depObj, commandSink); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-03-29T15:58:26.477

第一点：

要调试 XAML 绑定，您可以将来自 WindowsBase dll 的诊断引用添加到 XAML 文件，然后在绑定到某些属性时添加 PresentationTraceSources.TraceLevel。当你运行它检查输出窗口。

XAML 示例：

```
<TextBlock Text="{Binding someProperty, diagnostics:PresentationTraceSources.TraceLevel=High}"/> 
```

第二点：

您的命令变灰意味着您的绑定有效！没有发生的是命令没有刷新它的状态，这意味着 CanExe() 方法运行并将命令设置为“无法执行状态”，但是它永远不会再次检查它是否可以将其状态切换回“可以exe”。有很多方法可以做到这一点，但基本上当你的 ViewModel 中的某个属性发生变化时，刷新你的命令状态：

例如在 Prism 中可以调用 someCommand.RaiseCanExecuteChanged();

# graph-theory - 如果我对 DAG 进行拓扑排序，我可以删除一半的邻接矩阵吗？

> ID：777613
> 
> 赞同：9
> 
> 时间：2009-04-22T14:52:32.037
> 
> 标签：graph-theory

我想我已经理解了如下所述的特定情况，但是我缺乏进行证明的理论知识，并且找不到任何提及它的来源。如果我的理解是正确的，我可以在我的邻接矩阵上节省一半的空间，如果不是，我可能会有非常奇怪的错误。所以我想确定一下，如果有更扎实背景的人可以审查我的推理，我将不胜感激。

假设我在 n * n 邻接矩阵中表示 n 个顶点的 DAG，这样条目`i,j`是否`1`存在从 vertex`i`到 vertex的边`j`，`0`否则。因为该图是有向图和无环图，所以如果`i,j = 1`，则`j,i = 0`。如果我现在对矩阵中的节点进行排序，使得 i [n]处的节点的拓扑级别等于或大于 i [n-1]处的节点，那么在我看来，邻接矩阵的一半将始终只包含`0`s ，如下例所示：

```
      V 1 V 2 从 V 1 2 3 4 5 6 7 8
      / \ / \
     / \ / \ 到V 1 0 0 0 0 0 0 0 0
    / \ / \ 2 0 0 0 0 0 0 0 0
 e1/ e2\ e3/ e4\ 3 1 0 0 0 0 0 0 0
  / \ / \ 4 1 1 0 0 0 0 0 0
V 3 V 4 V 5 5 0 1 0 0 0 0 0 0
             /|\ / 6 0 0 0 1 0 0 0 0
            / | \ / 7 0 0 0 1 0 0 0 0
           / | \ / 8 0 0 0 1 1 0 0 0
        e5/ e6| e7\ e8/
         / | \ /
       V 6 V 7 V 8

```

也许我是对的，但是有没有正式的方法来检查这个？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-22T15:33:28.850

让我们`adj[i][j]`成为从节点`i`到节点的邻接条目，`j`并且您已经对其进行了排序，使得对于所有节点`i < j`，节点`i`在拓扑层次结构中高于节点`j`。

让我们暂时假设您的假设不正确：我们有一个反例`adj[i][j] == 1`for `i > j`（即，在矩阵表示的右上半部分中的一个）。这意味着必须有一个包含`i`和的循环`j`，因为我们的排序保证节点`j`高于节点`i`但我们已经`adj[i][j] == 1`暗示我们可以“爬上”层次结构。这是一个矛盾，因为我们知道我们有一个 DAG。因此，我们已经证明您的假设是正确的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-04-22T15:17:20.090

仅当您的邻接矩阵是使用按排序顺序的图形*标签构造时，这才是正确的。*举一个反例，构造 B->C->A 的邻接矩阵。

如果您将真实节点的散列保留到其拓扑排序位置并从中构造邻接矩阵，则可以在大矩阵上节省一些空间，因为您在矩阵中使用 O(n) 节省了 O(n²) 空间大小哈希表。

# c - 根据 ip 和子网掩码计算广播地址

> ID：777617
> 
> 赞同：19
> 
> 时间：2009-04-22T14:53:07.120
> 
> 标签：c, ip, broadcast, subnet

我想计算广播地址：

```
IP:     192.168.3.1
Subnet: 255.255.255.0
=       192.168.3.255 
```

在 C.

我知道方法（在反向 IP 和子网之间进行奇特的按位 OR），但我的问题是我来自 MacOSX Cocoa 编程的绿色领域。

我查看了 ipcal 的来源，但无法将其集成到我的代码库中。互联网上的某个地方一定有一个简单的十行代码，我就是找不到。有人可以指出如何在 C 中执行此操作的简短代码示例吗？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2009-04-22T14:55:32.030

只需计算：

```
broadcast = ip | ( ~ subnet ) 
```

（广播 = ip-addr 或反向子网掩码）

广播地址有一个`1`位，而子网掩码有一个`0`位。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-07-17T04:35:52.833

我知道 OP 至少对位级算术有一个模糊的理解，但是在将字符串转换为数字及其逆时迷失了方向。这是一个使用 froh42 计算的工作示例（无论如何测试最少）。

```
jcomeau@aspire:~/rentacoder/jcomeau/freifunk$ cat inet.c; make inet; ./inet 192.168.3.1 255.255.255.0
#include <arpa/inet.h>
#include <stdio.h>
int main(int argc, char **argv) {
    char *host_ip = argc > 1 ? argv[1] : "127.0.0.1";
    char *netmask = argc > 2 ? argv[2] : "255.255.255.255";
    struct in_addr host, mask, broadcast;
    char broadcast_address[INET_ADDRSTRLEN];
    if (inet_pton(AF_INET, host_ip, &host) == 1 &&
        inet_pton(AF_INET, netmask, &mask) == 1)
        broadcast.s_addr = host.s_addr | ~mask.s_addr;
    else {
        fprintf(stderr, "Failed converting strings to numbers\n");
        return 1;
    }
    if (inet_ntop(AF_INET, &broadcast, broadcast_address, INET_ADDRSTRLEN) != NULL)
        printf("Broadcast address of %s with netmask %s is %s\n",
            host_ip, netmask, broadcast_address);
    else {
        fprintf(stderr, "Failed converting number to string\n");
        return 1;
    }
    return 0;
}
cc     inet.c   -o inet
Broadcast address of 192.168.3.1 with netmask 255.255.255.0 is 192.168.3.255 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-22T14:59:26.137

可以吗？

```
unsigned broadcast(unsigned ip,unsigned subnet){
    unsigned int bits = subnet ^ 0xffffffff; 
    unsigned int bcast = ip | bits;

    return bcast;
} 
```

编辑：我认为 ip 和子网都没有“。”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-14T17:39:47.047

以下是如何在 C# 中执行此操作。例如使用 ip 10.28.40.149 和网络掩码 255.255.252.0 返回 10.28.43.255 这是正确的广播地址。感谢[这里的一些代码](http://blogs.msdn.com/b/knom/archive/2008/12/31/ip-address-calculations-with-c-subnetmasks-networks.aspx)

```
private static string GetBroadcastAddress(string ipAddress, string subnetMask) {
        //determines a broadcast address from an ip and subnet
        var ip = IPAddress.Parse(ipAddress);
        var mask = IPAddress.Parse(subnetMask);

        byte[] ipAdressBytes = ip.GetAddressBytes();
        byte[] subnetMaskBytes = mask.GetAddressBytes();

        if (ipAdressBytes.Length != subnetMaskBytes.Length)
            throw new ArgumentException("Lengths of IP address and subnet mask do not match.");

        byte[] broadcastAddress = new byte[ipAdressBytes.Length];
        for (int i = 0; i < broadcastAddress.Length; i++) {
            broadcastAddress[i] = (byte)(ipAdressBytes[i] | (subnetMaskBytes[i] ^ 255));
        }
        return new IPAddress(broadcastAddress).ToString();
    } 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-11-27T09:45:24.440

好的，将来谁会寻找此代码。我今天有时需要这个，这是完整的代码，它可以工作:)只需复制并粘贴它，然后导入所需的 dll。

```
private IPAddress CalculateBroadCastAddress(IPAddress currentIP, IPAddress ipNetMask)
    {
        string[] strCurrentIP = currentIP.ToString().Split('.');
        string[] strIPNetMask = ipNetMask.ToString().Split('.');

        ArrayList arBroadCast = new ArrayList();

        for (int i = 0; i < 4; i++)
        {
            int nrBCOct = int.Parse(strCurrentIP[i]) | (int.Parse(strIPNetMask[i]) ^ 255);
            arBroadCast.Add(nrBCOct.ToString());
        }
        return IPAddress.Parse(arBroadCast[0] + "." + arBroadCast[1] +
               "." + arBroadCast[2] + "." + arBroadCast[3]);
    }

    private IPAddress getIP()
    {
        IPHostEntry host = Dns.GetHostEntry(Dns.GetHostName());
        foreach (IPAddress ip in host.AddressList)
        {
            if (ip.AddressFamily == AddressFamily.InterNetwork)
            {
                return ip;

            }
        }
        return null;
    }

    private IPAddress getSubnetMask()
    {
        NetworkInterface[] Interfaces = NetworkInterface.GetAllNetworkInterfaces();
        IPAddress ip = getIP();
        foreach (NetworkInterface interf in Interfaces)
        {

            UnicastIPAddressInformationCollection UnicastIPInfoCol = interf.GetIPProperties().UnicastAddresses;

            foreach (UnicastIPAddressInformation UnicatIPInfo in UnicastIPInfoCol)
            {
                if (UnicatIPInfo.Address.Equals(ip))
                    return UnicatIPInfo.IPv4Mask;
            }

        }

        return null;

    } 
```

然后就像这样称呼它：

```
IPAddress  broadcastip = CalculateBroadCastAddress(getIP(), getSubnetMask()); 
```

快乐编码:)

# c++ - C ++让boost线程等待1秒

> ID：777620
> 
> 赞同：8
> 
> 时间：2009-04-22T14:54:10.643
> 
> 标签：c++, multithreading, boost

我使用以下方法创建了一个 boost 线程： boost::thread thrd(&connectionThread); 其中 connectionThread 是一个简单的 void 函数。但是，当我尝试让它等待几秒钟时，这很好用，例如使用：

```
boost::xtime xt;

boost::xtime_get(&xt, boost::TIME_UTC);

xt.sec += 1;

boost::thread::sleep(xt); // Sleep for 1 second 
```

程序在 xtime_get 行崩溃。即使手动尝试设置 xt.sec 它也不起作用。我尝试了其他几种方法，但我似乎无法使其工作。有什么我做错了吗？有没有更简单的方法来实现我的目标？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2009-04-28T21:53:29.233

> 有没有更简单的方法

也许是这样的：

```
boost::this_thread::sleep(boost::posix_time::seconds(1)); 
```

 ~~~~```
boost::thread::sleep(boost::posix_time::seconds(1)); 
```~~  ~~* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-22T16:57:18.133

`boost::xtime_get()`看起来像是少数没有在标头中实现的 Boost API 之一，所以这可能类似于没有正确编译 Boost 库。这可能有点像调用约定不匹配之类的。我不知道您可能需要通过哪些步骤来重建库 - 我在 Boost 中使用过的所有东西都只需要标题。

`xtime_get()`如果您只是跟踪例程，即使它处于程序集级别，它也可能会有所帮助。该`xtime`结构非常非常基本，`xtime_get()`除了调用特定于平台的 API 来获取要插入到`xtime`结构中的数字外，实际上并没有做任何事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-22T16:11:59.707

使用该代码（例如，不知道您将其放在哪里），我只能说该`xtime_get`方法返回返回的度量的类型。也就是说，您必须确定，例如以下断言成立：

```
int res = boost::xtime_get(&xt, boost::TIME_UTC);
assert(res == boost::TIME_UTC); 
```

在您的系统中可能并非如此。

但是，再次查看代码，我想到崩溃可能与此调用无关，而是与您在应用程序中执行的其他操作有关。同样，这取决于您在哪里使用此代码。它在`operator()`你的线程内吗？

# javascript - iPhone Safari：在 html 容器内滚动列表

> ID：777621
> 
> 赞同：5
> 
> 时间：2009-04-22T14:54:12.187
> 
> 标签：javascript, iphone, safari

我对这个话题做了很多研究，但还没有找到令人满意的答案：

如何在其他一些 html 内容中制作可滚动列表（iPhone SDK 仪表板列表）？如果我在 html 正文中创建一个列表并尝试滚动整个页面。我知道有这种“双指”滚动，但这不是我想要的。

有什么方法可以防止整个 iPhone Safari 网页滚动，而是让其他列表滚动？喜欢重定向 java 脚本事件？

背景：这个想法是模仿真正的原生应用程序行为，底部有选项卡，正文中有一个选择列表。

感谢任何提示！谢谢，帕特里克

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-23T09:33:53.137

还有另一种可能性，滚动模拟稍微好一点：http: [//cubiq.org/scrolling-div-on-iphone-ipod-touch/5](http://cubiq.org/scrolling-div-on-iphone-ipod-touch/5)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-23T07:46:27.403

好的，在咨询了一些朋友之后，我找到了这个问题的答案：

[http://doctyper.com/archives/200808/fixed-positioning-on-mobile-safari/](http://doctyper.com/archives/200808/fixed-positioning-on-mobile-safari/)

玩得开心。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-09-03T20:05:41.360

[http://cubiq.org/scrolling-div-on-iphone-ipod-touch/5](http://cubiq.org/scrolling-div-on-iphone-ipod-touch/5) 这是一个非常棒的脚本！！它比 doctyper 版本更小，更易于使用，因为它没有太多要重新定位的元素。它还允许用户更容易地触摸包含的元素。甚至更酷的是，当您触摸文本字段并关闭类型面板时，该脚本定位的 div 会立即恢复原位（因为 doctyper 版本只是在类型屏幕缩回后使它们浮出原位）。

很不错的剧本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-05-21T22:27:51.480

一个值得关注的新滚动库：可[滚动性](http://joehewitt.github.com/scrollability/)。

# svn - Subversion 提交失败文件合并：200 OK

> ID：777623
> 
> 赞同：20
> 
> 时间：2009-04-22T14:54:17.930
> 
> 标签：svn, commit

我遇到了最奇怪的问题......每次我提交我都会得到这样的错误：

```
commit failed (details follow): MERGE of '/svn/project/trunk/web/directory/': 200 OK (http://mydomain.com) 
```

那是我修改的文件的目录。

**稍后编辑** 我安装了 web dav SVN，并提交到 HTTP URL。并且有一个提交后挂钩在同一台机器上的目录上执行 svn 更新

有任何想法吗 ？感谢您的帮助。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2009-04-22T15:33:11.907

如果您的 post-commit 失败，您将收到该错误。尝试使用相同的参数从命令行运行它，以确保它正常工作。一两个星期前，当我的 python 脚本出错时，我遇到了这个错误。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-22T15:35:05.570

我在谷歌上找到[了这个](http://ariejan.net/2007/05/21/merge-request-failed-on-pathtofile/)和[这个](http://www.origo.ethz.ch/node/726)......可能有帮助吗？

看起来它与提交后失败有关。但是，它可能实际上已经提交。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-14T15:12:57.627

这是与提交后相关的错误。

调试您的提交后脚本，通常在您的存储库目录中：

.../projectname/svn/hooks/post-commit

过去，由于提交后电子邮件脚本中的语法错误，我收到了类似的错误消息

弗拉维奥

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-09-30T11:33:34.993

当我进行许多更改并准备提交[CodePlex](http://www.codeplex.com/)时，我遇到了同样的问题。我试过在命令行上做，但也失败了。我必须恢复我的项目并将我的更改拆分为一些较小的更改并一一提交。然后就可以了。

但我不知道为什么。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2011-11-02T17:56:49.897

尝试在设置/网络选项下的 Tortoise 中启用代理服务器。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-03-05T11:03:30.413

我最近遇到了这个问题，提到的解决方案并没有解决它。
在我的例子中，我可以使用 Tortoise SVN 提交单个文件，但使用 subclipse 时所有提交都失败了。
该问题是由我的防病毒软件或防火墙卡巴斯基引起的。暂停这个问题解决了。

不幸的是，将 svn 客户端设置为受信任并不能解决问题。我相信这是卡巴斯基 2012 版中的一个潜在错误。（见[这里](http://forum.kaspersky.com/lofiversion/index.php/t222048.html)）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2011-08-19T09:55:35.350

我看到这篇文章可以帮助解决这个问题： [http ://cntrint.blogspot.com/2009/08/subversion-autodeploy-post-commit-hook.html](http://cntrint.blogspot.com/2009/08/subversion-autodeploy-post-commit-hook.html)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2010-11-21T10:31:10.380

您需要将产生错误的directoty 添加到颠覆中。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-12-08T06:35:03.643

以下步骤适用于我

1.  在您的计算机中执行名为“TortoiseSVN Repository Browser”的程序。
2.  提示证书失败，并要求我登录并恢复证书
3.  登录后一切正常

# javascript - 即使在 document.location="" 运行后，如何确保我的 GIF 保持动画效果

> ID：777630
> 
> 赞同：2
> 
> 时间：2009-04-22T14:55:11.407
> 
> 标签：javascript, html, gif, animated-gif

采用以下 HTML：

```
<img src="/any-animated-gif.gf" alt="" />
<br /><br />
<a href="#" onclick="document.location='/anything-that-takes-a-few-seconds-to-load.html';return false;">Click Here</a> 
```

当我单击链接时，图标停止。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-22T15:06:23.190

[http://elliottback.com/wp/animated-gif-stops-javascript-click/](http://elliottback.com/wp/animated-gif-stops-javascript-click/)

根据该链接，在使用 javascript 进行重定向后重新分配图像标签的 src 将使图像保持动画。不知道这在 Firefox 中是如何起作用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-22T15:01:06.477

是的，当浏览器要转到一个新页面时，现有页面的所有执行都会*按设计*停止。如果您希望当前页面继续运行，您需要使用 AJAX 技术。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-22T15:05:43.657

你为什么使用 Documnet.Location 而不是 href？

您无法更改浏览器的行为。一旦加载不同的页面，当前页面将始终停止。

# jta - 什么是好的开源 Java SE JTA TransactionManager 实现？

> ID：777636
> 
> 赞同：25
> 
> 时间：2009-04-22T14:57:37.657
> 
> 标签：jta, java, transactionmanager

基本上，它在锡上写的是什么；我需要一个可在 Java SE 应用程序中使用的 JTA 实现，理想情况下，它不会带来太多的框架负担。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-04-22T15:22:10.017

我推荐[Bitronix](https://github.com/bitronix/btm)。在使用任何其他事务管理器之前，我建议进行彻底的测试。测试，例如在交易的每个阶段杀死各种机器的电源。您希望事务性在发生故障时保护您。令人惊讶的是，有多少事务管理器未能正确实施恢复。

Bitronix 确实需要 JNDI，它通常在 Java EE 容器中为您提供，但它们包含一个简单的嵌入式实现，它将在 Java SE 应用程序中支持 Bitronix。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-04-22T18:45:46.390

从其网页：

“凭借在事务处理领域 20 多年的专业知识， [JBoss Transactions](http://www.jboss.org/jbosstm/) (JBossTS) 是首屈一指的开源事务管理器。

它可以部署在一系列应用服务器、容器中或独立运行。在过去的 20 年中，它已在行业内广泛使用，并推动了包括 OMG 和 Web 服务在内的标准。”

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-05-30T14:56:24.110

试试[Atomikos TransactionsEssentials](http://www.atomikos.com/Main/TransactionsEssentials)。

Atomikos 是“Java EE without Application Server”的发明者，因此如果任何开源 JTA/XA 在 Java SE 中表现出色，那么它一定是 TransactionsEssentials：它从一开始就是为 Java SE 设计的，包括 JDBC 和 JMS 连接器/池，因此您不需要任何应用程序服务器功能。

由于其专注于 Java SE，TransactionsEssentials 对第三方 jar 或平台的依赖也很少。

最好的

盖伊

免责声明：我为 Atomikos 工作，但仍然......

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-11-10T16:27:55.487

引自[http://jotm.ow2.org/](http://jotm.ow2.org/)

JOTM 是一个用 Java 实现的开源事务管理器。它支持多种事务模型和规范，为使用各种中间件平台（J2EE、CORBA、Web 服务、OSGi）的客户端提供事务支持。JOTM 由 OW2 联盟主办。JOTM 使用的许可证是 BSD 风格的许可证。此实现功能齐全且成熟，因为它已在 JOnAS 应用程序服务器项目中使用了数年。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2010-07-14T11:31:10.490

您可以尝试 SimpleJTA：-- [http://simplejta.sourceforge.net/](http://simplejta.sourceforge.net/)

# excel - Excel 工作表项目参考

> ID：777638
> 
> 赞同：1
> 
> 时间：2009-04-22T14:57:52.740
> 
> 标签：excel, interop

我正在以编程方式打开文件夹树下的 excel 工作簿，以使用以下代码检查一些项目引用 -

```
workbook = app.Workbooks.Open(fileName,false,true,Missing,Missing,.....);
foreach(Reference r in workbook.VBProject.References)
{
      //check for a specific reference here
} 
```

这很好用，但我的文件夹结构非常深，其中存储了超过 20,000 个电子表格。有时，根据 excel 文件的大小，对 Workbooks.Open() 的调用需要很长时间（某些文件每次调用超过 5 分钟）。有没有更快更有效的方法来做到这一点？

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-28T15:42:30.373

似乎每当您必须使用 Excel 对象模型时，都会对性能造成影响。我同意之前的海报，如果你想提高性能，你需要直接阅读 Excel 文件。

附带说明一下，由于 Excel 2007 文件（*.xlsm、*.xltm）本质上是 *.zip 文件，因此您需要直接查找和访问 vbaProject.bin 文件。快速浏览指向路径（我更改了扩展名，以便可以浏览文件）：

```
..\Book1.zip\xl\vbaProject.bin 
```

显然，您可以手动挖掘该 bin 文件并找到特定的引用（如上一张海报所建议的那样），但如果您希望遍历项目中的所有引用，则需要使用 API 调用 IStream/存储。这里有一篇关于对 Office BIN 文件进行逆向工程的精彩文章：[http://www.codeproject.com/KB/cs/office2007bin.aspx](http://www.codeproject.com/KB/cs/office2007bin.aspx)。要访问 vbaProject.bin 中的引用，请查找标题为“阅读或更新 vbaProject.bin 部件”的部分。还有一个示例 C# 代码项目演示了如何读取 OLE 容器。我只是在代码示例上达到了顶峰，所以我无法证明它的有效性，但它看起来确实是有序的。

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-23T14:10:58.447

我认为您无法提高 Workbooks.Open 的性能。但是，如果您的主要目的只是检查电子表格是否使用了特定的引用，那么请考虑以二进制模式打开 Excel 文件并搜索 dll 字符串。（提供功能的 dll 的路径，可以是见参考窗口的位置部分）。

这将是非常粗略的方式，但如果 Workbook.Open 性能确实是一个瓶颈，那么您绝对可以尝试一下。

# c# - C#：如何在 for 循环中为许多变量分配一个整数（i）？

> ID：777639
> 
> 赞同：0
> 
> 时间：2009-04-22T14:57:54.380
> 
> 标签：c#, object, integer

假设我们有 5 个字符串变量，我们想在运行时将“Foo”分配给它们。

而不是这个

```
string a1 = "Foo";
string a2 = "Foo";
string a3 = "Foo";
string a4 = "Foo";
string a5 = "Foo"; 
```

我们不能使用这样的东西：

```
for(int i = 0;i < 5;i++)
{
    a+i = "Foo";
} 
```

是否不可能以类似的方式访问它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-22T15:07:03.560

正如其他人所说，数组（或另一个集合）是一种更好的方法。

将数组视为您*始终*通过索引访问的变量的集合。

我想不出任何你想要有一组变量的原因，如你的问题所示。如果您绝对*必须*这样做，并且它们是实例/静态变量，那么如果您真的想要，您可以使用反射来访问它们 - 但是使用数组或其他集合会好得多。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-22T15:03:39.933

```
Label[] labels = new Label[] { label1, label2, label3, label4, label5 };

for (int i = 0; i < labels.Length; i++)
{
    labels[i].Text = "Foo";
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-22T15:00:19.100

您可以按名称访问控件，但是将标签项数组添加到页面然后使用整数访问数组会更简洁。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-22T15:02:31.327

您可以通过迭代标签的父控件：

```
for (int i=0; i<= parent.controls.count(); i++)
{
    if (parent.controls("label" + i)  != null)
    {
         ...
    }
} 
```

高温高压

**编辑：**

在您进行编辑之后，我能看到的唯一方法是将它们添加到列表/数组/字典并遍历它，尽管原理是相同的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-22T15:08:26.287

假设我们在这里讨论的是网络表单，那么您可以使用 FindControl() 方法。

```
private void Button1_Click(object sender, EventArgs MyEventArgs)
{
  // Find control on page.
  TextBox myControl1 = (TextBox) FindControl("Label1");
  if(myControl1!=null)
  {
     string message = myControl1.Text;
  }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-22T15:01:13.280

您可以创建标签数组或数组列表，并将标签放入其中。然后你可以做类似的事情。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-22T15:04:07.483

如果所有标签都具有相同的父级，并且该父级没有包含其他标签控件，则可以执行以下操作：

```
foreach (Control lbl in ParentControl)
{
    if (lbl is TextBox)
    {
        ((Label)lbl).Text = "Foo";
    }
} 
```

# coding-style - 为什么全大写常量被认为是不好的编码风格？

> ID：777641
> 
> 赞同：20
> 
> 时间：2009-04-22T14:58:03.397
> 
> 标签：coding-style

杰夫完成[了他的帖子](https://blog.codinghorror.com/properties-vs-public-variables/)谈论这个，但我不明白这个想法。

那么，为什么你认为这是一种糟糕的编码风格？

**编辑：**

我和你们中的很多人一样，不认为这是一种糟糕的编码风格。但是 Jeff 是比我优秀得多的程序员，如果我错了，他的观点就会点亮我的脑袋，以便得到答案。几年前我一直是[Delphi开发人员，现在正在成为 C# 开发人员，在 Delphi 中这是一种常见的做法。](http://en.wikipedia.org/wiki/CodeGear_Delphi)

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2009-04-22T15:06:47.430

全大写是预处理器宏常量的传统 C 名称。将它们放在与其他任何名称不同的名称空间中非常有用，因为预处理器将替换它找到名称的任何位置，而不管范围之类的东西。

Jeff 使用的常量在语义上是一个无法更改的变量。它遵守所有范围原则和一切，并且在语义上与具有相同值的非常量变量相同。

换句话说，

```
#define max_length 5 
```

是一个问题，因为有人可能会`max_length`在不同的上下文中将其用作变量，通常情况下它是安全的，而

```
const int max_length = 5; 
```

只是一个变量声明。因此，使用有优势

```
#define MAX_LENGTH 5 
```

因为约定是只有预处理器常量是全大写的，所以它不会干扰任何其他用途。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2009-04-22T15:06:34.747

你会发现 Jeff 的许多陈述首先是有争议的，而准确性是次要的问题。*如果他不是偶尔*发炎，他的博客就不会那么受欢迎。（想想《[太空异教徒之死》](http://blog.codinghorror.com/death-to-the-space-infidels/)的最后一行，“也就是说，只有白痴才会使用制表符来格式化他们的代码。”）这确实是主观的。不要把他说的每件事都当作真实的和好的——这不是注定的。如果您不同意，请在评论中踢他的屁股，看看他是否回信。:)

我认为`ALL_CAPS_CONSTANTS`是完美的：它们可以立即识别和熟悉。我工作场所的风格指南的一部分（我们没有那么多）是用大写字母编写所有静态常量。不要出汗；只需使用团队其他成员使用的任何东西。决定`StudlyCaps`vs. `camelCase`vs`SCREAMING_CAPS`可能值得 90 秒的讨论。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2009-04-22T15:08:45.180

尖叫就好。在常数的情况下，它告诉读者

> 不要考虑以后在代码中更改我

但我理解软程序员是否会被冒犯。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2009-04-22T15:07:01.317

坦率地说，我不认为这是不好的编码风格。事实上，即使是官方的 Java 代码风格也将常量全部大写（[http://java.sun.com/docs/codeconv/html/CodeConventions.doc8.html](http://java.sun.com/docs/codeconv/html/CodeConventions.doc8.html)），其他语言约定也是如此。

从理论上讲，它更难阅读——我们人类喜欢使用字母的可变高度来提高阅读速度（我们可以从粗略的单词形状和第一个/最后一个字母中推断出很多信息）。但是，我对简短的全大写短语没有意见。这几乎不是“大喊大叫”（您的编译器并不完全关心您的粗鲁程度），并且清楚地表明名称可能是可变的，而那些则不是。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2009-04-22T15:05:26.547

我不认为这是不好的编码风格。也许是老式的，但还不错。它确实使常量从其他变量中脱颖而出。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2009-04-22T15:05:59.477

对我来说唯一令人信服的理由是风格的一致性。对于像 Java / C++ 这样的非 .NET 语言，全大写常量当然是可以接受的。

对于 C#，标准是使用 PascalCase，如下所述：[C# 常量命名约定？](https://stackoverflow.com/questions/242534/c-naming-convention-for-constants)

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2009-04-22T15:02:00.017

全部大写就像对某人大喊大叫。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2009-04-22T15:02:41.840

它还使代码更难阅读

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2009-04-22T15:03:38.610

Jeff 在评论中对此还有一些话要说：

> > 但是另一方面，我仍然使用全部大写和下划线的原因
> 
> 代码少？这是一个值得认真讨论的事业。
> 
> 但是，您是否称某物为“foo”、“Foo”、“_foo”或“FOO”？嗯。
> 
> 命名约定极具争议性和宗教性。开发人员应该选择他们喜欢的东西，希望不会与“本地惯例”有太大冲突的东西，然后顺其自然。对命名进行大量讨论和绞尽脑汁是不值得的。
> 
> 也就是说，我认为所有大写字母真的很难阅读！

我也将它用于常量，但我也能理解为什么有些人不喜欢它。这有点像用德语或其他语言用小写字母写所有东西。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2009-04-22T15:05:50.880

嗯，有旧的可读性问题。通常情况下的测试更容易阅读。

不过也有例外。像 SQL 这样的语言通常都是大写的（尽管不区分大小写）。

此外，还有其他用途，例如区分“常量”和常规变量，您会在 PHP、Python 等许多语言中看到它们，尽管 Jeff 出于某种原因不喜欢这样，而且它显然违反了 C# 代码风格准则。

所以总的来说，我认为这在任何地方都没有错，但我确实认为应该始终尝试并遵循一般的最佳实践。在罗马时，像罗马人一样行事——在编写 Python 代码时，请遵循[PEP 8](http://www.python.org/dev/peps/pep-0008/) :)

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2009-04-22T15:24:02.537

我将我的大写锁定重新映射到一个 ctrl 键（哇 emacs！）。所以我认为当我必须在按住 shift 键的同时输入 30 个字符的名字时，它的风格很糟糕

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2009-04-22T15:03:06.097

翻转问题，为什么使用全部大写？

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2009-04-22T15:04:02.587

有些人认为全大写是“老派”。考虑以下之间的区别：

`const string ErrorMessage = "Some error message.";`

和

`const string ERROR_MESSAGE = "Some error message.";`

两者都是完全可用的，但是全大写版本很少被新开发人员使用，例如开始使用 .NET 的开发人员。

如果您的团队使用不同的风格，我认为这是一种糟糕的编码风格。除此之外，我真的不在乎。至少当我在某些共享代码中看到所有大写字母时，我可以猜到它是一个常数。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2009-04-22T15:05:30.803

我不认为这**是**错误的。大多数情况下，这是个人选择。对于您的个人编码，做您想做的事。对于您的专业编码，请遵循公司政策。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2009-04-22T15:05:53.987

**就像用粗体写所有东西一样不是一个好主意**

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2009-04-22T15:04:32.990

@ck，

因为它是公约。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2009-04-22T15:04:54.440

我将 ALL_CAPS 用于宏和预处理器符号。所以我的 C99 之前的 C 常量是 ALL_CAPS，但不是我所知道的任何其他语言。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2017-10-25T17:41:34.543

常量和常量可能不同。仅在处理预处理器时使用全大写，例如在 C++ 中，建议避免这种情况并使用 const 变量或 constexpr，它们的命名方式与任何其他变量一样（可能带有一些前缀或其他东西以明确它是一个常数但是...）。

# c# - 我可以混合使用 SqlConnection.BeginTransaction 和 TransactionScope 吗？

> ID：777645
> 
> 赞同：7
> 
> 时间：2009-04-22T14:58:50.507
> 
> 标签：c#, database, transactions

这与[C# 中的嵌套数据库事务](https://stackoverflow.com/questions/772729/nested-database-transactions-in-c)有关。

我想在事务中使用的集合中的对象使用 SqlConnection.BeginTransaction 方法实现自己的事务。

读完这篇[文章后](http://www.devnewsgroups.net/group/microsoft.public.dotnet.framework.adonet/topic63806.aspx)，我不确定我是否也可以混合这些。我正在使用 SQL Server 2005，每个对象都使用来自静态配置类的连接详细信息。

有人有这方面的经验吗？

这是示例代码：

```
using(TransactionScope scope = new TransactionScope())
{
  for (int i=0; i<=1000....) 
  {
    SqlConnection con = new SqlConnection()
    SqlCommand cmd = new SqlCommand("delete from ...", con); 

    try {
       con.Open(); 
       DbTransaction t = con.BeginTransaction();
       cmd.ExecuteNonQuery(); 
       ...
       cmd.CommandText = .... ;
       cmd.ExecuteNonQuery(); 
       t.Commit  ...
    } 
    catch {
       t.Rollback ...
    }
    con.Close()
  }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-23T13:54:14.523

在花了几个小时将 MSDTC 配置为在两台机器上工作之后，我终于可以测试代码了。

它似乎工作（有1个数据库）

上述问题可能对无法访问源代码的人有用，因此无法摆脱“遗留”事务系统，或者如果代码的事务部分没有本地化，或者像我的情况一样，你没有'不想在生产环境中被证明是稳定的复杂代码弄得太多，但您需要引入嵌套事务......

如果您有不同的经历，请告诉我。

# .net - 我们如何创建资源附属程序集

> ID：777646
> 
> 赞同：3
> 
> 时间：2009-04-22T14:59:00.493
> 
> 标签：.net, localization

我有一个程序集，它使用 resx 文件来存储所有显示字符串。我现在想创建一个包含法语版本字符串的附属程序集。

这可以在VS中完成吗？我是否只是创建一个新程序集，正确命名并包含 resx 文件的本地化版本？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-22T15:06:02.567

只需将具有正确命名的新资源文件添加到*现有*项目中，VS 就会创建附属程序集。

命名是*文件名*。*语言环境*.resx。其中*filename*与基本程序集匹配，而*locale*是正常的语言环境命名字符串。例如，“en”表示通用英语，“en-gb”表示英语，“en-us”表示美国（或者，对于大西洋左侧的那些：分别为通用英语、英国英语和美国英语）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T12:25:56.393

转到开始>程序>Visual Studio 2010>Visual Studio 工具>Visual Studio 命令提示符[右击并选择“以管理员身份运行”]

转到 resex 所在的解决方案中的 Exact 目录并键入

c:..\yourAppname[eg]App_localresources>al /t:lib /embed:ucCreditNote.ascx.[culture 扩展，例如。en-US].resx /culture:[文化扩展例如。zh-CN] /out:bts.resources.dll

# keyboard-shortcuts - 锐化热键

> ID：777650
> 
> 赞同：14
> 
> 时间：2009-04-22T14:59:36.327
> 
> 标签：keyboard-shortcuts, resharper, hotkeys

我刚开始使用 resharper，我正在尝试学习所有热键 - 是否有标准安装的所有热键列表？这可能是可打印格式的东西。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2009-04-22T15:01:40.017

见[这里](http://www.jetbrains.com/resharper/documentation/documentation.html)：

*   [ReSharper 4.5 默认键盘映射：Visual Studio 方案](http://www.jetbrains.com/resharper/docs/ReSharper45DefaultKeymap.pdf)
*   [ReSharper 4.5 默认键盘映射：ReSharper 2.x / IDEA 方案](http://www.jetbrains.com/resharper/docs/ReSharper45DefaultKeymap2.pdf)

Resharper 7.0：

*   [ReSharper 7.0 默认键盘映射：Visual Studio 方案](http://www.jetbrains.com/resharper/docs/ReSharper70DefaultKeymap_VS_scheme.pdf)
*   [ReSharper 7.0 默认键盘映射：ReSharper 2.x / IDEA 方案](http://www.jetbrains.com/resharper/docs/ReSharper70DefaultKeymap_IDEA_scheme.pdf)

锐器 8.0：

*   [ReSharper 8.0 默认键盘映射：Visual Studio 方案](http://www.jetbrains.com/resharper/docs/ReSharper80DefaultKeymap_VS_scheme.pdf)
*   [ReSharper 8.0 默认键盘映射：ReSharper 2.x / IDEA 方案](http://www.jetbrains.com/resharper/docs/ReSharper80DefaultKeymap_IDEA_scheme.pdf)

所有文件均为 PDF 格式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2010-10-24T08:48:25.010

除了 JetBrains 官方维护并随每个新版本更新的 PDF 键盘映射外，您还可以查看[Keymaps for ReSharper](http://keymaps.forresharper.org/) - Howard van Rooijen 的 ReSharper 插件，可帮助您学习任一键盘映射中的 R# 快捷键。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-22T15:05:55.857

你打赌。转到此页面： [Resharper 文档](http://www.jetbrains.com/resharper/documentation/documentation.html) ，靠近顶部的是 3 个指向各种键盘映射 PDF 的下载链接 - 我使用 Visual Studio 方案，所以这就是我下载的 PDF。

进一步注意，页面上的主要在线帮助文​​档的链接也是如此。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-22T15:02:57.300

是的，不同键盘布局的列表在[此处以 PDF 格式提供](http://www.jetbrains.com/resharper/documentation/documentation.html)

# c# - 如果我们使用 MSMQ 在应用程序之间进行通信，是否应该安装 MSMQ？

> ID：777651
> 
> 赞同：0
> 
> 时间：2009-04-22T14:59:43.953
> 
> 标签：c#, msmq

如果我们在 C# 中使用 MSMQ，是否应该通过控制面板中的添加/删除程序来安装 MSMQ？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-22T15:01:30.970

是的，为了在 C# 中使用 MSMQ 库，您需要将它安装在运行代码的机器上。

如果您有兴趣在安装项目中安装它，请查看[此问题](https://stackoverflow.com/questions/682511/including-msmq-as-a-prerequisite-for-my-application/684513#684513)。

# model-view-controller - Groovy：如何使用 Id 标签访问对象？

> ID：777671
> 
> 赞同：0
> 
> 时间：2009-04-22T15:02:47.427
> 
> 标签：model-view-controller, groovy

我有以下 Groovy+SwingBuilder 代码。

在一个面板中，我生成复选框，在另一个面板中，我想访问复选框的值。代码看起来基本上是这样的：

```
def optionsmap = [ foo : "value_foo", bar : "value_bar"]

SwingBuilder.build()     
{
   frame(title:'demo1', size:[400,700], visible:true, defaultCloseOperation:WC.EXIT_ON_CLOSE) {                
      gridLayout(rows: 1, cols: 2)

      panel(id:'optionPanel', constraints:java.awt.BorderLayout.CENTER) {                        
         gridLayout(rows: 5, cols: 1)                 
         myGroup = buttonGroup();    
         for (entry in optionsmap)
         {         
           checkBox(id: entry.key,   text: entry.value        )                  
         }            
      }

      panel(constraints:java.awt.BorderLayout.WEST) {   

         button ('Show values', actionPerformed: {           
         for (entry in optionsmap)
         {
            println (entry.key as Class).text            
         }           
       })                
    }
  }  
} 
```

`optionsmap`是一个可以扩展的 (id, text) 对的映射。

当我按下*显示值*时，我收到一条错误消息：

> org.codehaus.groovy.runtime.typehandling.GroovyCastException：无法将具有类“java.lang.String”的对象“foo”转换为类“java.lang.Class”

如何使用来自的复选框 id 在第二个面板中访问我的操作的复选框`optionsmap`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-24T15:08:10.550

从地图中访问变量的解决方案是这样的：

```
 for (entry in optionsmap)
                 {
                      if (variables[entry.key].selected)
                          println variables[entry.key].text
         } 
```

# asp.net - 如何使用 ASP.NET 代码即时编辑 CSS？

> ID：777675
> 
> 赞同：0
> 
> 时间：2009-04-22T15:03:26.003
> 
> 标签：asp.net, css, html

想要编辑诸如 DIV 大小、颜色、定位（绝对）、高度/宽度等内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-22T15:05:09.337

`Response.Write`您可以像使用其他任何方法一样输出 CSS `<%= someValue %>`。

以下是其他一些方法： [http ://cfouquet.blogspot.com/2006/06/making-dynamic-css-content-with-aspnet.html](http://cfouquet.blogspot.com/2006/06/making-dynamic-css-content-with-aspnet.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-22T15:06:11.613

我不确定你想用给出的信息做什么，但要动态添加 css，你可以使用**jQuery**将类添加到具有这些特定规范的元素中。你可以让 jquery 在后台等待让客户端发生某些事情，只需添加具有特定样式的类

**例子：**

```
<style>
 p { margin: 8px; font-size:16px; }
.color { color:blue; }

</style>

<script>
   $(document).ready(function(){
     $("#button1").click(function(){ 
      $("p:last").addClass("color");
   });
</script>

<p>Hello</p>
 <p>and</p>
<p>Goodbye</p> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-23T20:26:07.033

如果“即时”是指用户与页面交互时，那么您将需要使用一些 javascript。我建议学习[jQuery](http://jquery.com)，因为它提供了一种与 DOM 交互的简单有效的方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-23T20:39:02.103

Ryan，如果您想根据用户偏好更改网站的外观，您可能需要查看*主题（了解**皮肤*也可以提供帮助，但首先要掌握主题）。这确实是 ASP.NET 模型中的正确方法，除非您只是希望使某些特定输出适应某些数据条件。

# apache-flex - 在客户端更改 Flex 上基本身份验证的凭据

> ID：777687
> 
> 赞同：0
> 
> 时间：2009-04-22T15:05:06.360
> 
> 标签：apache-flex, authentication, session, basic-authentication, active-script

我想让用户自动重新登录我的 Flex 应用程序，它使用基本身份验证

顺便说一句，我已经注意到这个[StackOverflow question](https://stackoverflow.com/questions/490806/http-basic-authentication-with-httpservice-objects-in-adobe-flex-air)，它是相关的，但没有解决注销客户端的问题。

例如，用户 A 登录后，用户 B 进入浏览器，进入登录屏幕（可能在新选项卡中）并登录。

这应该意味着我在 HTTP 标头中发送了用户 B 的凭据，并且由于这些凭据与用户 A 的不同，服务器会记录这一事实并创建一个新的单独会话。

但是，Flex 的 HTTP 代理会捕获标头并实际上忽略这些新凭据。

Flex 确实提供了一种方法来告诉服务器注销，并且 Flex 登录代码可以在每次发送凭据之前调用它，但这似乎是一个丑陋的解决方法。我希望能够做这个客户端。我也可以为基本身份验证使用非标准标头（因为我也控制服务器端身份验证），但这似乎也是一个丑陋的解决方法。

有什么方法可以简单地从 Flex 代码结束客户端的会话？例如，这可以通过 JavaScript 实现。

有没有办法像在 JavaScript 中那样直接在客户端使用 cookie？

我了解某些限制可能是出于安全考虑，但我所有的通信都是与“家庭”服务器进行的，因此应该可以避免这些限制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-22T21:53:32.960

你在这里问了几个不同的问题。

您实际上不能手动结束基本身份验证“会话”（至少据我所知）；充其量，您可以针对一种可变的 basic-auth 领域进行身份验证，这可能对您有用，也可能对您不起作用，但除此之外，您在浏览器实例的持续时间内会卡在第一个经过身份验证的会话中。通常不是最好的方法，除非您非常确定用户拥有机器，或者可以依赖于在每次会话后关闭浏览器。

那么，这至少留下了两个其他选择。第一种是使用 URLRequest 对象发送您的凭据（您引用的帖子，我写的，显示了如何做到这一点），并让您的 HTTP 响应返回一些表明凭据已被接受的内容——例如，GUID，也许，生成并存储在服务器上的某个会话表（在数据库意义上）中，也许。然后在连续的 HTTP 请求中，您可以在 HTTP 标头中发送该 GUID，或者作为每个 GET 或 POST 请求中的值（例如，类似于 Facebook 处理其 API 客户端的方式），检查该值的及时性服务器，如果一切顺利，继续。然后，要“注销”，您只需发送一个请求以使该 GUID 无效，在服务器上和您的 Flex 应用程序内部执行必要的清理，一切都应该没问题：

另一种方法是直接使用 cookie。不过，cookie 机制实际上主要是在 Flex 中为您处理的，因为浏览器代表您来回传递所有内容。例如，如果您发送带有用户名和密码的 URLRequest，而服务器使用任何类型的 cookie 进行响应，那么您之后发出的每个请求都将打包并发送相同的 cookie，所以在大多数情况下，您需要做的就是解析来自服务器的初始响应（以设置 Flex 应用程序的状态），假设 cookie 持续存在，当需要注销时，发送 URLRequest 以注销，在状态下终止服务器上的 cookie =200 做你的 Flex 应用程序清理，等等。不过，直接访问 cookie 值并不是世界上最简单的事情。

希望这会有所帮助。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-23T06:34:19.293

另请注意[这篇文章](http://verveguy.blogspot.com/2008/07/truth-about-flex-httpservice.html)，其中详细介绍了 Flex 添加到 HTTP 请求中的一些令人难以置信的失真。

# c - 如何在 C 中动态创建和读取结构？

> ID：777689
> 
> 赞同：6
> 
> 时间：2009-04-22T15:05:24.050
> 
> 标签：c, struct

我怎么能做这样的事情（只是一个例子）：

```
any_struct *my_struct = create_struct();
add_struct_member(my_struct, "a", int_member);
add_struct_member(my_struct, "b", float_member); 
```

这样我就可以使用`addressOfMyStruct`此处给定的结构“从外部”（在地址处）加载和使用结构实例？

```
any_struct_instance *instance = instance(my_struct, addressOfMyStruct);
int a = instance_get_member(instance, "a");
float b = instance_get_member(instance, "b"); 
```

我还希望能够以这种方式动态创建结构实例。

我希望很清楚我想要做什么。我知道[C/Invoke](http://cinvoke.nongnu.org/doc/cinvoke_8h.html "C/调用")能够做到这一点，但是是否有一个单独的库可以做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-22T15:17:24.877

实际上演示在 C 中进行这项工作的代码对于 SO 帖子来说有点过于复杂。但是解释基本概念是可行的。

您在这里真正创建的是一个模板化的属性包系统。要保持这种状态，您需要做的一件事是一些关联结构，例如哈希表。我会说使用 std::map 但你提到这是一个仅限 C 的解决方案。为了讨论起见，我只是假设您有某种可用的哈希表。

“create_struct”调用将需要返回一个结构，该结构包含一个指向哈希表的指针，该哈希表`const char*`本质上是一个 size_t。此映射定义了创建结构的新实例所需的内容。

“insance”方法本质上将创建一个新的哈希表，其成员数量与模板哈希表相同。让我们暂时抛开懒惰的评估，并假设您预先创建了所有成员。该方法将需要遍历模板哈希表，为每个条目添加一个成员并分配指定大小的内存块。

instance_get_member 的实现将简单地按名称在地图中进行查找。不过，签名和使用模式将需要更改。C 不支持模板，必须选择可以表示所有数据的通用返回类型。在这种情况下，您需要选择`void*`，因为这就是需要存储内存的方式。

```
void* instance_get_member(any_struct_instance* inst, const char* name); 
```

您可以通过添加一个 envil 宏来模拟模板来使它变得更好

```
#define instance_get_member2(inst, name, type) \
  *((type*)instance_get_member((inst),(name)))
...
int i = instance_get_member2(pInst,"a", int); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-22T15:22:25.990

到目前为止，您已经定义了剩下的问题是有点（在某些部分有点棘手）实现。您只需要跟踪信息：

```
typedef struct {
    fieldType type;
    char      name[NAMEMAX];
    /* anything else */
} meta_struct_field;
typedef struct {
    unsigned          num_fields;
    meta_struct_field *fields;
    /* anything else */
} meta_struct; 
```

然后`create_struct()`分配内存`meta_struct`并将其初始化为 0，然后`add_struct_member()`执行`alloc()`/ `realloc()`on`my_struct.fields`和 increments `my_struct.num_fields`。其余部分以同样的方式进行。

您还需要一个`union`in`meta_struct_field`来保存实例中的实际值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-22T15:28:32.013

我很久以前做过一些。

我这样做的方法是生成包含结构定义的代码，以及用于访问它的所有例程，然后“动态”编译并将其链接到 DLL，然后动态加载该 DLL。

# php - 将 mysql_fetch_object() 的结果传递给函数不起作用

> ID：777692
> 
> 赞同：1
> 
> 时间：2009-04-22T15:05:43.033
> 
> 标签：php, mysql

我有以下问题：

```
public function row2Partner($row){
  echo $row->PartnerID;
}

public function main(){
  $query = "SELECT PartnerID, PartnerName FROM Partner";
  $result = mysql_query($query);
  $this->row2Partner(mysql_fetch_object($result));
} 
```

这给了我 r 中的错误`ow2Partner()`：尝试获取非对象的属性

但是`$row`是一个对象！如果我`$row->PartnerID`在主函数中回显，它会起作用。

有任何想法吗？

谢谢，马丁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-22T15:15:01.810

如果您的结果返回多于一行，则您的对象将是多维的。如果您只想回应第一个，我很确定您可以这样做：

```
public function row2Partner($row){ echo $row[0]->PartnerID; } 
```

如果您只寻找一个结果，我也会将我的查询限制为一个......

```
SELECT PartnerID, PartnerName FROM Partner LIMIT 1 
```

如果您想回显所有行（在多行的情况下）结果，您可以这样做：

```
public function row2Partner($row){ 
    foreach($row as $result) {
        echo $result->PartnerID; 
    }
} 
```

希望有帮助。

**PS** 顺便说一句，在处理 MySQL 结果时，我倾向于使用关联数组——这对我来说更有意义。在这种情况下，您只需这样做：

```
mysql_fetch_assoc($result) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-22T15:15:53.743

您确定 mysql_query() 已成功执行查询，并且实际上返回了一行吗？可能值得检查一下，例如

```
//check query executed ok
if ($result = mysql_query($query)) {
    //check there is actually a row
    if ($row = mysql_fetch_object($result)) {
        $this->row2Partner($row);
    } else {
        //no data
    }
} else {
    //error
    die(mysql_error());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-22T15:16:01.230

我能想到的最好的事情是您可能需要通过引用而不是值传递。将您的函数声明更改为

```
public function row2Partner(&$row) 
```

希望有帮助，大卫

# mysql - 如何在自己的查询中获取一个值的总出现次数？

> ID：777693
> 
> 赞同：3
> 
> 时间：2009-04-22T15:05:43.283
> 
> 标签：mysql

假设我们有这个查询

```
SELECT * FROM table 
```

这就是它的结果。

```
id | user_id
------------
1  | 1
------------
2  | 1
------------
3  | 2
------------
4  | 1 
```

我怎样才能得到一个 user_id 作为另一个字段出现的频率（没有一些主要的 SQL 查询）

```
id | user_id | count
--------------------
1  | 1       | 3
--------------------
2  | 1       | 3
--------------------
3  | 2       | 1
--------------------
4  | 1       | 3 
```

我们目前在代码中有这个值，但是我们正在对这个表进行排序，我希望能够在 SQL 查询中进行排序。

顺便说一句，如果没有一些主要技巧这是不可能的，我们将跳过对该字段的排序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-22T15:09:17.720

我相信你只想在最后添加一个子查询：

```
SELECT
    t.id,
    t.user_id,
    (SELECT COUNT(*) FROM table WHERE user_id = t.user_id) AS `count`
FROM table t; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-22T15:10:03.897

```
SELECT o.id, o.user_id, (
    SELECT COUNT(id) 
    FROM table i 
    WHERE i.user_id = o.user_id 
    GROUP BY i.user_id
) AS `count`
FROM table o 
```

我怀疑这个查询不是性能怪物，但它应该可以工作。

# c# - 另一个数据访问层（c#.net 2.0）

> ID：777694
> 
> 赞同：1
> 
> 时间：2009-04-22T15:05:43.393
> 
> 标签：c#, orm, .net-2.0, data-access-layer

意识到我正在编写另一个代码生成器来为简单的 ORM 层执行 sps/classes/interfaces 等。这次大部分胆量都在SQL中。我有一个通用的 C# DAL 用于调用 sps/获取结果等（花了我一个小时左右，而且很小）。

我认为现在肯定会有更简单的方法......有吗？

我对 SQL 充满信心/胜任并使用存储过程等 - 我不想隐藏 SQL，只是将无聊的重复从用于填充/持久对象的编码中解脱出来。我不喜欢学习模板语言/复杂的应用程序，或产生巨型膨胀软件（或建立在膨胀的 MS 库上）的应用程序。还必须能够从现有数据库开始。

仍然是自己动手的情况吗？真的吗？

.Net 2.0 (Winforms)

编辑：我并不完全反对模板，如果它真的很简单/快速上手的话。理想情况下，解决方案应该是小型的、免费的并且对其他开发人员来说并不可怕。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-22T15:16:24.037

看看[BLToolkit](http://bltoolkit.com/)：

```
[TestFixture]
public class ExecuteObject
{
    public abstract class PersonAccessor : DataAccessor<Person>
    {
        // Here we explicitly specify a stored procedure name.
        //
        [SprocName("Person_SelectByKey")]
        public abstract Person GetByID(int @id);

        // SQL query text.
        //
        [SqlQuery("SELECT * FROM Person WHERE PersonID = @id")]
        public abstract Person GetPersonByID(int @id);

        // Specify action name.
        // Stored procedure name is generated based on convention
        // defined by DataAccessor.GetDefaultSpName method.
        //
        [ActionName("SelectByName")]
        public abstract Person GetPersonByName(string @firstName, string @lastName);

        // By default method name defines an action name
        // which is converted to a stored procedure name.
        // Default conversion rule is ObjectName_MethodName.
        // This method calls the Person_SelectByName stored procedure.
        //
        public abstract Person SelectByName(string @firstName, string @lastName);
    }

    [Test]
    public void Test()
    {
        PersonAccessor pa = DataAccessor.CreateInstance<PersonAccessor>();

        // ExecuteObject.
        //
        Assert.IsNotNull(pa.GetByID        (1));
        Assert.IsNotNull(pa.GetPersonByID  (2));
        Assert.IsNotNull(pa.GetPersonByName("Tester", "Testerson"));
        Assert.IsNotNull(pa.SelectByName   ("Tester", "Testerson"));
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-22T15:11:00.120

不直接回答你的问题。

阅读 Ayende 的这篇精彩文章：[不编写自己的对象关系映射器的 25 个理由](http://ayende.com/Blog/archive/2006/05/12/25ReasonsNotToWriteYourOwnObjectRelationalMapper.aspx)

推荐使用 NHibernate。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-22T15:10:46.017

看看亚音速。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-22T15:10:11.993

我喜欢nHibernate，我非常精通SQL；但是，我喜欢不必为每个表编写至少四个 proc。对于我不知道如何让 nHibernate 做的事情。

您确实有很多代码生成器，但如果您不想学习如何构建模板，并且对构建/社区模板不满意，那么您唯一的其他选择就是自己动手。

# opengl - 多重纹理时OpenGL基元太暗？

> ID：777710
> 
> 赞同：0
> 
> 时间：2009-04-22T15:07:26.587
> 
> 标签：opengl, rendering, primitive, multitexturing

当我在场景的其他地方使用多重纹理时，我无法获得准确的原始颜色。基本上，我尝试在视频纹理上渲染一些线条和多边形（我正在使用 3 阶段多重纹理来创建视频纹理）......无论如何，我知道问题与 alpha 无关......事实上，我知道在我的纹理更新函数中，如果我只是注释掉对纹理级别 1 和 2 的 glBindTexture() 调用，原始颜色很好（所以保留纹理级别 0）......它是否也在尝试对原始颜色进行多纹理处理（即使我显然没有为基元设置纹理坐标）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-22T16:50:35.777

确保在不使用时禁用多重纹理。OpenGL 使用状态机，因此如果您打开纹理，它将一直保持打开状态，直到您明确将其关闭。

仅仅因为你没有设置坐标，并不意味着 OpenGL 会假设你没有使用纹理。

# null - null 有害吗？

> ID：777711
> 
> 赞同：1
> 
> 时间：2009-04-22T15:07:54.137
> 
> 标签：null, database, sql

我今天避开了关于数据库中空值的激烈辩论。

我的观点是 null 是未指定值的极好指标。团队中的其他每个人都有意见，认为零和空字符串是要走的路。

他们是懒惰还是我太严格了？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-22T15:09:21.433

他们很懒惰，不了解数据库中 null 的基本概念。Null 是有用的并且是有目的的。既不应该避免也不应该不恰当地使用它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-22T15:09:45.177

null 表示没有值，而 0 没有，如果你看到一个 0 你不知道它的含义，如果你看到一个 null 你知道它是一个缺失值

我认为空值更清晰，0 和 '' 令人困惑，因为它们没有清楚地显示存储值的意图

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-22T15:10:29.933

当然，如果它未指定，那么 null 是一个很好的指标，零意味着什么，而 null 没有。虽然我不是专家数据库..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-22T15:11:00.667

尽管使用空值需要额外的工作，但我认为非指定字段和设置为空或 0 的字段之间应该存在差异。

还有谁可以说用户故意将值设置为 0 或者他没有设置该字段？

# vb.net - 如何从 .net 中的 am Informix 查询中获取 IfxBlob？

> ID：777712
> 
> 赞同：1
> 
> 时间：2009-04-22T15:07:56.150
> 
> 标签：vb.net, informix

我似乎无法找到一种方法来获取.Net 下列的定位器对象。似乎 Informix 正在自动将 blob 列转换为 Byte[] 并且没有留下改变该行为的方法。

```
IBM.Data.Informix.IfxConnection c = 
           new IBM.Data.Informix.IfxConnection("...");
c.Open();
IBM.Data.Informix.IfxCommand cmd = 
           new IBM.Data.Informix.IfxCommand("SELECT id,data FROM aaa", c);
IBM.Data.Informix.IfxDataReader r = cmd.ExecuteReader();
while (r.Read()) {
    Debug.WriteLine(r.GetValue(1).GetType());
}

c.Close(); 
```

结果：

```
System.Byte[]
System.Byte[]
System.DBNull
System.DBNull 
```

我期望：

```
IBM.Data.Informix.IfxBlob 
```

或类似的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-24T22:10:31.860

我问了一位同事，这是他对我的回应。由于这不是我的杰作，所以我给出了“社区维基”的答案，所以我没有得到赞誉（除了知道在哪里提问）。

* * *

要回答这个问题...以下程序是使用 Common Informix Provider（使用 DRDA 通信协议的 IBM.Data.Informix.dll 编写的...您可以在“IBM Data Server Driver for CLI, ODBC , 和 .NET" 包)。应该能够使用 Legacy Informix Provider（使用 SQLI 通信协议的 IBM.Data.Informix.dll ......您可以在“Informix Client SDK”包中获得它）来完成非常相似的事情。

这是一个示例程序：

```
using System;
using System.Collections.Generic;
using System.Text;
using System.Data;
using IBM.Data.Informix;

namespace InformixClob
{
   class Program
   {
      static void Main(string[] args)
      {
         try
         {
            IfxConnection tConn = new IfxConnection("database=idsdb;server=my-system:9089;uid=informix;pwd=********");
            tConn.Open();

            IfxCommand tCmd = tConn.CreateCommand();
            // create table mytesttab (col1 integer, col2 clob)
            tCmd.CommandText = "select * from mytesttab";
            IfxDataReader tRdr = tCmd.ExecuteReader();
            while (tRdr.Read())
            {
               Console.WriteLine("Col1 is a {0}", tRdr.GetValue(0).GetType());
               Console.WriteLine("Col2(GetValue) is a {0}", tRdr.GetValue(1).GetType());
               Console.WriteLine("Col2(GetIfxValue) is a {0}", tRdr.GetIfxValue(1).GetType());
               Console.WriteLine("Col2(GetIfxClob) is a {0}", tRdr.GetIfxClob(1).GetType());
            }
            tRdr.Close();
            tConn.Close();
         }
         catch (Exception e)
         {
            Console.WriteLine(e.ToString());
         }
         finally
         {
            Console.Write("Press ENTER"); Console.ReadLine();
         }
      }
   }
} 
```

这是它生成的输出：

```
Col1 is a System.Int32
Col2(GetValue) is a System.String
Col2(GetIfxValue) is a IBM.Data.Informix.IfxClob
Col2(GetIfxClob) is a IBM.Data.Informix.IfxClob
Press ENTER 
```

该`IfxDataReader.GetValue(int)`方法将以本机 .NET Framework 数据类型返回列值。要获取作为 Informix 类型返回的列值，您必须通过调用该`GetIfxValue(int)`方法或者如果您可以更具体地通过该`GetIfxClob(int)`方法请求它返回。

# xaml - 在模板化的用户控件中缩放画布

> ID：777719
> 
> 赞同：0
> 
> 时间：2009-04-22T15:09:04.727
> 
> 标签：xaml, silverlight-3.0

我从一个按钮创建了一个模板化的用户控件，以便使用常见的状态等。我没有得到的是如何在模板内缩放画布。我用线条创建了一个小图，但是当我使用它时，它们不会随控件缩放/变换。最有趣的是是否可以使用 xaml 元素绑定（我正在使用 SL3）。

问候马里奥

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-22T15:18:27.917

我会使用网格并将其高度和宽度设置为自动。如果您将项目添加到行和列并且它们都设置为拉伸网格内的东西，则会自动调整大小。不确定这是否是您要问的，但这就是我的想法。

# ruby - 使用 Sinatra 时与数据库对话的最佳方式是什么？

> ID：777724
> 
> 赞同：34
> 
> 时间：2009-04-22T15:09:31.013
> 
> 标签：ruby, database, orm, sinatra

据我了解，与 Rails 不同，Sinatra 框架不提供 ORM。在这种情况下，您如何与 Sinatra 应用程序中的数据库通信？还是 Sinatra 仅适用于不使用数据库的应用程序？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2009-04-24T18:01:53.050

如果您使用的是 Sinatra，我不能高度推荐[DataMapper](http://datamapper.org/)。我有几个 Rails 应用程序，我被 ActiveRecord 卡住了，我一直在诅咒它的缺点和设计缺陷。如果您在 Sinatra 上，DataMapper 是一个非常实用的选择。

```
require "rubygems"
require "sinatra"
require "datamapper"

DataMapper.setup(:default, "sqlite3::memory:")

class Post
  include DataMapper::Resource

  property :id,    Integer, :serial => true
  property :title, String
end

Post.auto_migrate!
first_post = Post.new
first_post.title = "First!"
first_post.save

get "/" do
  Post.get(1).title
end 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2009-04-22T15:24:58.057

如果您喜欢 ActiveRecord，请使用它。或者是其他东西。例如，数据映射器。对于带有 SQLite 的 AR，这有效：

```
require 'rubygems' # may not be needed, depending on platform
require 'sinatra'
require 'active_record'

class Article < ActiveRecord::Base
end

get '/' do
  Article.establish_connection(
    :adapter => "sqlite3",
    :database => "hw.db"
  )
  Article.first.title
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-24T08:18:43.247

如何与数据库通信取决于您，您可以选择 ORM 之一或一些 NoSQL 适配器。有许多可用选项，其中一些是专门为 Sinatra 制作的：

例如，有[Sinatra ActiveRecord Extension](https://github.com/janko-m/sinatra-activerecord)
最初由 Sinatra 的创建者 Blake Mizerany 创建，
它使用 ActiveRecord 辅助方法和 Rake 任务扩展了 Sinatra

另一种选择是[Sinatra Sequel Extension](https://github.com/rtomayko/sinatra-sequel)。
这个小型扩展将数据库配置、迁移和 Sequel 适配器直接添加到 Sinatra。

或者 sinatra-redis，或者 sinatra-mongo，等等。只需搜索您想要的。

但是您也可以自由使用任何独立的库，查看[数据库上的 Sinatra 食谱](http://recipes.sinatrarb.com/p/models)，其中列出了几个如何将流行的数据库映射器与 Sinatra 一起使用的示例。尽管那里提到建议的做法是使用 DataMapper，但我怀疑这只是一种偏好，因为 Sinatra 本身没有任何建议。

# javascript - jQuery/JavaScript 日期表单验证

> ID：777725
> 
> 赞同：0
> 
> 时间：2009-04-22T15:09:44.677
> 
> 标签：javascript, jquery, validation, forms, webforms

我在表单中使用 jQuery 日期选择器日历。提交后，表单通过 url 将参数传递到第三方站点。一切正常，除了一件事。如果随后删除了 datepicker 日历插入到日期字段中的值，或者如果删除了页面加载时表单中的默认日期并提交了表单，则会出现以下错误：

“从字符串“”到类型“日期”的转换无效。”

我的问题的解决方案非常简单，我想验证提交日期的文本字段，如果出于任何原因该字段为空，则发送默认日期（当前日期）。问题是我在 Javascript 方面很糟糕，无法弄清楚如何做到这一点。

这是我的日期字段的表单代码。

```
[var('default_date' = date)]
<input type="text" id="datepicker" name="txtdate" value="[$default_date]" onfocus="if (this.value == '[$default_date]') this.value = '';" onchange="form.BeginDate.value = this.value; form.EndDate.value = this.value;" />
            <input type="hidden" name="BeginDate" value="[$default_date]"/>
            <input type="hidden" name="EndDate" value="[$default_date]"/> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2010-04-24T11:16:40.997

这真的很老，可能已经解决了，但到底是什么。

最简单的方法是在输入的 onchange 事件中添加更多的 javascript。

```
onchange="if( this.value.length > 0 ) { form.BeginDate.value = form.EndDate.value = this.value; } else { form.BeginDate.value = form.EndDate.value = '[$default_date]'; } " /> 
```

当然，它们仍然是与日期验证相关的各种其他问题，但这是检查空白值并根据您当前的代码结构返回默认值的直接方法。

# sql-server - 在 SQL Server 2005 中更改唯一键的影响

> ID：777740
> 
> 赞同：0
> 
> 时间：2009-04-22T15:11:05.767
> 
> 标签：sql-server, unique-key

在 SQL Server 2005 中更改唯一键有什么影响

我有一个表一个主键 ID int 和 4 个字段的复合唯一键。但是由于我的项目的性质，复合键的键（字段）之一不断变化。

有没有人发现经常更改复合键字段有任何问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-22T15:22:52.963

涉及维护，因为所有非集群键都指向集群键或如果您有堆则指向行（没有集群键的表）

由于集群键保存了表的所有数据（本质上是表），只要您对非集群键进行更改，集群键就会被更新，反之亦然

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-22T15:18:04.860

该指数需要进行一些重组。

这是 ACID 中 C 的一部分：当您的 UPDATE 完成时，一切都已完成并除尘。

此外，任何使用数据的索引视图也需要更新，同样是“C”的一部分。

如果它没有集群，那么这就是它。

我不会太担心它，除非它在一秒钟内发生很多次......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-22T15:19:32.627

我肯定会添加一些代码来注意违反唯一约束的情况。你不应该遇到问题，但如果你经常改变它，我会说你冒更大的风险。

# c# - 如何检查每个用户会话的正在运行的进程？

> ID：777744
> 
> 赞同：8
> 
> 时间：2009-04-22T15:11:57.263
> 
> 标签：c#, .net

我有一个 .NET 应用程序，我一次只允许运行一个进程，但是该应用程序不时在 Citrix 机器上使用，因此可以由多个用户在同一台​​机器上运行。

我想检查并确保应用程序在每个用户会话中只运行一次，因为现在如果用户 A 正在运行应用程序，那么用户 B 会收到“应用程序已在使用”消息，并且不应该。

这就是我现在检查正在运行的进程的内容：

```
Process[] p = Process.GetProcessesByName(Process.GetCurrentProcess().ProcessName);
            if (p.Length > 1)
            {
#if !DEBUG
                allowedToOpen &= false;
                errorMessage +=
                    string.Format("{0} is already running.{1}", Constants.AssemblyTitle, Environment.NewLine);
#endif
            } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-22T15:14:48.160

*编辑：*根据[这个 cw question](https://stackoverflow.com/questions/229565/what-is-a-good-pattern-for-using-a-global-mutex-in-c/229567#229567)改进了答案......

您可以使用互斥锁来检查应用程序是否已经运行：

```
using( var mutex = new Mutex( false, AppGuid ) )
{
    try
    {
        try
        {
            if( !mutex.WaitOne( 0, false ) )
            {
                MessageBox.Show( "Another instance is already running." );
                return;
            }
        }
        catch( AbandonedMutexException )
        {
            // Log the fact the mutex was abandoned in another process,
            // it will still get aquired
        }

        Application.Run(new Form1());
    }
    finally
    {
        mutex.ReleaseMutex();
    }
} 
```

重要的是`AppGuid`- 你可以让它取决于用户。

也许你喜欢看这篇文章：[被误解的互斥锁](http://odetocode.com/Blogs/scott/archive/2004/08/20/401.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-22T15:32:49.647

正如 tanascius 已经说过的，您可以使用 Mutex。

> 在运行终端服务的服务器上，命名系统互斥锁可以有两个级别的可见性。如果其名称以前缀“Global\”开头，则互斥锁在所有终端服务器会话中可见。如果其名称以前缀“Local\”开头，则互斥锁仅在创建它的终端服务器会话中可见。

来源：[msdn，互斥类](http://msdn.microsoft.com/en-us/library/system.threading.mutex.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-24T21:55:13.963

只是说明显而易见的 - 虽然`Mutex`通常被认为是更好的解决方案，但您仍然可以解决每个会话单个实例的问题`Mutex`- 也只需测试一下`SessionId`。

```
 private static bool ApplicationIsAlreadyRunning()
    {
        var currentProcess = Process.GetCurrentProcess();
        var processes = Process.GetProcessesByName(currentProcess.ProcessName);

        // test if there's another process running in current session.
        var intTotalRunningInCurrentSession = processes.Count(prc => prc.SessionId == currentProcess.SessionId);

        return intTotalRunningInCurrentSession > 1;
    } 
```

[来源（无 Linq）](https://social.msdn.microsoft.com/Forums/vstudio/en-US/e48515b2-bc1e-4fc6-a909-a9b691213266/determining-current-processes-running-for-a-user-in-terminal-services?forum=netfxbcl)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-12-16T11:11:42.807

如果 Form1 启动了非后台线程，并且 Form1 退出了，那么你就会遇到问题：互斥锁已释放，但进程仍然存在。恕我直言，以下内容更好：

```
static class Program {
    private static Mutex mutex;

    /// <summary>
    /// The main entry point for the application.
    /// </summary>
    [STAThread]
    static void Main() {
        bool createdNew = true;
        mutex = new Mutex(true, @"Global\Test", out createdNew);
        if (createdNew) {
            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);
            Application.Run(new Form1());        
        }
        else {
            MessageBox.Show(
                "Application is already running",
                "Error",
                MessageBoxButtons.OK,
                MessageBoxIcon.Error
            );
        }
    }
} 
```

只要主应用程序域仍在运行，互斥锁就不会被释放。只要应用程序正在运行，它就会一直存在。

# asp.net - 在 asp.net 中，我需要向文本框添加验证器，强制输入为数字

> ID：777748
> 
> 赞同：2
> 
> 时间：2009-04-22T15:12:57.337
> 
> 标签：asp.net, validation

在 asp.net 中，我需要将验证器添加到强制输入为数字的文本框。

这是内置的吗？

我已经在文本框中添加了一个必填字段验证器。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-22T15:15:47.427

您可以使用正则表达式验证器来确保文本是数字

我认为正则表达式是

```
[0-9]* 
```

例如

```
<asp:TextBox ID="tbxNumbers" runat="server" />
<asp:RegularExpressionValidator ID="revNumericValidator" runat="server" 
                ValidationExpression="^[0-9]*$" ControlToValidate="tbxNumbers" ErrorMessage="Must be Numeric" /> 
```

**编辑：** 正如其他两张海报还指出的那样，您也可以`\d`用来表示数字字符

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-22T15:18:42.550

```
<asp:RegularExpressionValidator runat="server"
            ControlToValidate="numbersOnlyTextBox" 
            ErrorMessage="Enter only numeric characters." 
            ValidationExpression="^\\d+$" /> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-22T15:21:12.170

使用范围验证器。

```
<asp:TextBox ID="MyTextBox" MaxLength="4" Width="75" 
   Text="0" runat="server"></asp:TextBox>
<asp:RangeValidator ID="MyRangeValidator"  Display="Static" Type="Integer"
   MaximumValue="9999" MinimumValue="0" EnableClientScript="true" 
   ControlToValidate="MyTextBox" runat="server" SetFocusOnError="true" 
   ErrorMessage="Ooops"></asp:RangeValidator> 
```

这允许您使用带小数位的数字（通过使用 Type="Double" 或 "Currency"）或 Windows 可识别的其他类型的数字。

[有关Range Validator Control](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.rangevalidator.aspx)的更多信息，请查看 MSDN 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-22T15:24:46.030

我认为这里需要进一步澄清要求。我们在谈论什么样的数字？正整数？任何整数？带小数位的数字？数字（1,000）中的逗号怎么样？

我推荐一个 RegularExpressionValidator 来完成你的工作，但是当涉及到你使用哪个 RegEx 时，这些问题会有所不同。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-05-18T02:31:29.633

为了提供更好的用户体验，要添加的另一件事是 AjaxToolkit FilteredTextBox 扩展器，其 FilterType 为“Custom, Numbers”或只是“Numbers”。当您希望能够指定小数点和负数时，第一个选择是。在这种情况下，您还必须使用“-.”之类的内容指定 ValidChars 属性。这将阻止用户输入不会构成有效数字的字符，例如 -123.45 。请注意，它不会阻止用户输入“-”和“。” 在不正确的地方，例如“2-..-3”仍然可以输入。您将需要其他答案中提到的验证器来捕获这些情况。

```
<ajaxToolkit:FilteredTextBoxExtender ID="ftbe" runat="server"
    TargetControlID="numbersOnlyTextBox"         
    FilterType="Custom, Numbers"
    ValidChars="-." /> 
```

或者

```
<ajaxToolkit:FilteredTextBoxExtender ID="ftbe" runat="server"
    TargetControlID="numbersOnlyTextBox"         
    FilterType="Numbers" /> 
```

# asp.net - MembershipUser 构造函数需要可能为空的 dateTime 字段

> ID：777749
> 
> 赞同：0
> 
> 时间：2009-04-22T15:13:21.113
> 
> 标签：asp.net, datetime, null, membership, membershipuser

MemberShipUser 构造函数需要像 lastLoginDate 这样的 dateTime 字段，它在数据存储中可能为 null。

但是，当我从存储中检索数据并为参数传递 null 时，我收到一个错误，即它不能为 null。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-22T15:21:19.377

更新您的查询以返回空值日期 - 可能是当前日期或“1900-01-01”

```
ISNULL(DateField, '1900-01-01') AS DateField 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-22T15:29:10.450

我相信 ASP.NET 标准成员资格提供程序的期望是用户已在您的站点上注册，因此在创建用户记录的同时有效地登录。

如果您要批量加载会员资格，那么我建议将 lastLoginDate 设置为 DateTime.Now，而不是让它为空。

# javascript - Javascript：引用实例化对象的动态创建的 html 元素

> ID：777751
> 
> 赞同：1
> 
> 时间：2009-04-22T15:13:42.033
> 
> 标签：javascript, jquery, json, events, dom

*[（有关进一步的背景，这与上一个问题](https://stackoverflow.com/questions/709882/javascript-namespaces-and-jquery-ajax)的工作相同）*

我正在**使用 jQuery 创建一个基于 JavaScript 的网络聊天系统，**以使生活更轻松。所有的网络聊天 JavaScript 代码都在一个外部 js 文件中，然后由 html 页面引用和实例化。

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>WebchatV3</title>
    <script type="text/javascript" src="/JavaScript/jquery-1.3.2.min.js"></script>
    <script type="text/javascript" src="WebchatV3.js"></script>
    <link rel="stylesheet" href="WebchatV3.css" />
</head>

<body>
    <div id="WebchatSurround">
        <div style="float:right;width:300px;">
            <div id="MembersBox">
                Members
                <ul id="MembersList">
                </ul>
            </div>
            <div id="QuestionsBox">
                Questions
                <div id="QuestionsList">
                </div>
            </div>
        </div>

        <div style="margin-right:310px;" id="ChatBox">
            <div id="ChatData">
                <ul id="ChatDataList"></ul>
            </div>
            <div id="ChatInput">
                <div id="ChatInputCharRemainText">Characters remaining <span id="ChatInputCharRemain"></span></div>
                <input type="text" maxlength="1000" id="ChatInputTextbox" />
            </div>
        </div>
    </div>

    <script type="text/javascript">
        var webchat;
        webchat = new AvonAndSomerset.WebchatV3(123, 'passcode', false);
    </script>
</body>
</html> 
```

在 JavaScript 中，有一些代码可以从 JSON 查询动态创建活动聊天成员列表。此代码创建一系列 html DIV，然后将此 html 注入 html 中的“QuestionsList”DIV。

现在这是问题:)

每个问题中都有带有 JavaScript onclick 事件的元素，允许针对显示的问题采取行动。如何在不对“网络聊天”的引用进行硬编码的情况下创建 onclick 代码 - 有没有一种优雅且可接受的方式？

我最初的想法是在创建“webchat”实例时传递它的实例名称，以便在创建动态 JavaScript 时可以在 JavaScript 中使用它......

**对实例化的“网络聊天”进行硬编码引用的代码示例：**

```
<div id="QuestionsBox">
    Questions
    <div id="QuestionsList">
        <div class="Question">
            <div class="QuestionInnerControls">
                <img src="images/arrow_up.png" alt="" class="ControlIcon" onclick="webchat.Questions.Move(1,1);" >
                <img src="images/arrow_down.png" alt="" class="ControlIcon" onclick="webchat.Questions.Move(1,-1);">
                <img src="images/delete.png" alt="" class="ControlIcon" onclick="webchat.Questions.Delete(1);">
            </div>
            <div class="QuestionInnerText">
                1) <b>Peter Bridger</b>: This is the question text
                <br style="clear: right;">
            </div>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-23T03:52:12.333

虽然我认为实时的想法很可能适合你，但我最初的想法是在代码的初始阶段创建一个模板 div，然后使用 clone(true) 方法创建模板及其方法的动态副本。然后在 javascript“循环”中，每个副本都可以根据需要进行自定义，然后再附加到 DOM 中。

[http://docs.jquery.com/Manipulation/clone#bool](http://docs.jquery.com/Manipulation/clone#bool)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-22T19:35:35.087

您的描述有点深入，我希望我正确地遵循它，但在我看来，您正在尝试将点击事件附加到所有项目以及将在其中创建的所有项目未来。与其在创建时指定 onclick 事件，不如使用 jQuery 1.3+ 中出现的新 jQuery 功能，它允许您为每个匹配 Selector 的元素指定一个事件......甚至未来的元素，如您将要添加的元素通过 json。

```
 $("p").live("click", function(){
  $(this).after("<p>Another paragraph!</p>");
}); 
```

[http://docs.jquery.com/Events/live](http://docs.jquery.com/Events/live)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-24T08:49:45.610

感谢大家的意见，我决定在实例化时传入 Webchat 的实例名称：

```
 var webchat;
            webchat = new AvonAndSomerset.WebchatV3(123, 'passcode', false , 'webchat' ); 
```

然后在 JavaScript 中，我在使用 JavaScript 动态构建 html 时引用传入的引用：

```
onclick="' + this.instanceName + '.popupMemberDetailsShow(' + this.Members.collection[i].memberId + '); 
```

# c++ - 我的工具箱中应该有哪些现代 C++ 库？

> ID：777764
> 
> 赞同：193
> 
> 时间：2009-04-22T15:16:55.783
> 
> 标签：c++

我已经退出 C++ 游戏大约 10 年了，我想重新加入并开始开发商业应用程序。这些天在使用哪些图书馆？

*   用户界面（例如[wxWidgets](http://www.wxwidgets.org/)、[Qt](https://www.qt.io/)）
*   数据库
*   通用（例如[Boost](http://www.boost.org/)、[Loki](http://loki-lib.sourceforge.net/)、 STL）
*   穿线
*   测试
*   网络/套接字

我希望能够跨平台兼容（尽可能开箱即用）。

您依赖哪些库？它们提供了哪些使它们*“不可或缺”*的功能？

请参阅下面的[答案](https://stackoverflow.com/questions/777764/what-modern-c-libraries-should-be-in-my-toolbox/782146#782146)以获取摘要。

* * *

## 回答 #1

> 赞同：204
> 
> 时间：2009-04-23T15:02:47.493

**对商业（或非商业）应用程序免费的跨平台库**

*随意扩展此列表*

* * *

*   一般用途
    *   [促进](http://www.boost.org/)
    *   [洛基](http://loki-lib.sourceforge.net)
    *   [米莉](https://code.google.com/p/mili/)
    *   [POCO](http://pocoproject.org/)
    *   [STL](http://en.wikipedia.org/wiki/Standard_template_library)（当然）
    *   [STXXL](http://stxxl.sourceforge.net/)（超大型数据集的 STL 重新实现）
    *   [Qt](http://www.qt.io/)
    *   [手语](http://stlab.adobe.com/)
    *   [聚策](http://www.juce.com)

* * *

*   声音的
    *   [FMOD](http://www.fmod.org/)
    *   [综合工具包](https://ccrma.stanford.edu/software/stk/)
*   数据库
    *   [SOCI](http://soci.sourceforge.net)
    *   [OTL](http://otl.sourceforge.net/)
    *   [LMDB++](http://lmdbxx.sourceforge.net/)
*   设计
    *   IoC 框架
        *   [皮下注射](https://github.com/ybainier/Hypodermic)
        *   [波可胶囊](http://www.pocomatic.com/docs/whitepapers/pococapsule-cpp/)
        *   [瓦拉鲁](http://wallaroolib.sourceforge.net)
*   文件
    *   [LibreOffice API](http://api.libreoffice.org/)
    *   [波多佛](http://podofo.sourceforge.net/)
*   图形
    *   [快板](http://alleg.sourceforge.net/)
    *   [食人魔](http://www.ogre3d.org/)
    *   [SFML](http://www.sfml-dev.org/)
*   图形用户界面
    *   [FLTK](http://www.fltk.org/)
    *   [GTK](http://www.gtkmm.org/)
    *   [Qt](http://www.qt.io/)
    *   [质量重量](http://qwt.sourceforge.net/)
    *   [wxWidgets](http://www.wxwidgets.org)
    *   [VTK](http://vtk.org)
*   散列
    *   [杂音哈希3](https://code.google.com/p/smhasher/wiki/MurmurHash3)
*   成像
    *   [Boost.GIL](http://www.boost.org/doc/libs/1_38_0/libs/gil/doc/index.html)
    *   [CImg](http://cimg.sourceforge.net)
    *   [魔鬼](http://openil.sourceforge.net/)
    *   [易BMP](http://easybmp.sourceforge.net/)
    *   [免费图片](http://freeimage.sourceforge.net/)
    *   [ITK](http://itk.org)
    *   [开放式CV](http://opencv.willowgarage.com/)
*   日志记录
    *   [升压日志](http://boost-log.sourceforge.net/libs/log/doc/html/index.html)
    *   [日志4cxx](http://logging.apache.org/log4cxx/index.html)
    *   [万神殿](http://www.pantheios.org/)
*   嘲笑
    *   [谷歌模拟](https://code.google.com/p/googlemock/)
    *   [河马模拟](https://www.assembla.com/wiki/show/hippomocks)
    *   [Turtle](http://turtle.sourceforge.net/)（用于 Boost 的 C++ 模拟对象库）
*   多媒体
    *   [开放框架](http://openframeworks.cc)
    *   [煤渣](http://libcinder.org/)
    *   [SDL](http://www.libsdl.org/)
*   联网
    *   [高手](http://www.cs.wustl.edu/%7Eschmidt/ACE.html)
    *   [Boost.Asio](http://www.boost.org/doc/libs/1_37_0/doc/html/boost_asio.html)
    *   [冰](http://www.zeroc.com/)
*   测试
    *   [Boost.Test](http://www.boost.org/doc/libs/1_38_0/libs/test/doc/html/index.html)
    *   [谷歌测试](http://googletest.googlecode.com/)
    *   [单元测试++](http://unittest-cpp.sourceforge.net/)
    *   [文档测试](https://github.com/onqtam/doctest)
*   穿线
    *   [Boost.Thread](http://www.boost.org/doc/libs/1_38_0/doc/html/thread.html)
*   版本控制
    *   [libgit2](http://libgit2.github.com/)
*   网络应用框架
    *   [CppCMS](http://cppcms.com/)
    *   [重量](http://www.webtoolkit.eu/)
*   XML
    *   [Libxml2](http://xmlsoft.org/)
    *   [pugixml](http://pugixml.org/)
    *   [RapidXml](http://rapidxml.sourceforge.net/)
    *   [小XML](http://www.grinninglizard.com/tinyxml/)
    *   [Xerces-C++](http://xerces.apache.org/xerces-c/)

* * *

指向开源 C++ 库的其他列表的链接：

[http://en.cppreference.com/w/cpp/links/libs](http://en.cppreference.com/w/cpp/links/libs)

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2009-04-22T18:24:17.970

很抱歉重复了一些已经写过的东西，但是：

*   用户界面：[Qt](http://qt.nokia.com/)
*   数据库：[SOCI](http://soci.sourceforge.net/)
*   通用：[Boost](http://boost.org)、[Loki](http://loki-lib.sourceforge.net/)、[STLSoft 库](http://www.stlsoft.org/)、[ASL](http://stlab.adobe.com/)
*   线程：[Boost.Thread](http://www.boost.org/doc/libs/1_38_0/doc/html/thread.html)
*   测试：[Boost.Test](http://www.boost.org/doc/libs/1_38_0/libs/test/doc/html/index.html)
*   构建工具：[Boost.Build](http://www.boost.org/doc/tools/build/index.html)，[SCons](http://www.scons.org/)

（至少应该让你开始）

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2009-04-22T17:55:41.940

在 Windows...

ATL 用于 COM 开发 WTL 用于用户界面

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2009-04-28T07:55:56.220

CGAL 是一个优秀的计算几何的 c++ 库

www.cgal.org

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2009-04-22T15:52:55.807

[http://loki-lib.sourceforge.net/](http://loki-lib.sourceforge.net/)也可能是不错的补充。

它是另一个模板库，它引入了类型列表和各种设计模式的实现。

我从未使用过它，但我阅读了 Alexandrescu 的书以更好地理解模板。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2009-04-22T15:33:45.823

CppUnit 用于单元测试和测试驱动开发

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-09-24T11:41:43.913

除了已经列出的所有优秀库之外，我发现 xerces for XML（包括 XSD 验证）和 xalan for XSLT 的组合很有用（xalan 构建在 xerces 之上）。AFAIK QT 或 POCO 都没有 XSLT 功能（除非在我上次使用它们之后添加了它）。

# firefox - Firefox 会话 cookie

> ID：777767
> 
> 赞同：112
> 
> 时间：2009-04-22T15:17:52.567
> 
> 标签：firefox, cookies, session

一般来说，当给定一个没有有效期的 cookie 时，现代浏览器会认为这个 cookie 是一个“会话 cookie”，它们会在浏览会话结束时删除 cookie（通常是在浏览器实例关闭时）。

IE、Opera、Safari 和 Chrome 都支持这种行为。

然而，firefox（3.0.9最新的正确版本）似乎没有遵循这个规则，据我所知，当浏览器关闭或用户注销或重新启动操作系统时，cookie不会过期。

那么，当它们显然无限期地存在时，为什么 Firefox 将这些称为会话 cookie？

有谁知道 Firefox 如何处理会话 cookie 过期？

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2009-07-04T21:40:01.573

这显然是设计使然。查看这个 Bugzilla 错误： [https ://bugzilla.mozilla.org/show_bug.cgi?id=443354](https://bugzilla.mozilla.org/show_bug.cgi?id=443354)

Firefox 有一个功能，您可以关闭 Firefox 并保存所有选项卡，然后您恢复浏览器并且这些选项卡会返回。这称为会话恢复。我没有意识到它还会恢复这些页面的所有会话 cookie！它将它视为您从未关闭过浏览器。

从某种意义上说，如果您的浏览器崩溃，您可以立即回到原来的位置，这是有道理的，但对于习惯于清除会话 cookie 的 Web 开发人员来说，这有点令人不安。我有一些几个月前的旧会话 cookie，它们是由我总是在标签中打开的网站设置的。

要对此进行测试，请关闭浏览器中的所有选项卡，然后关闭浏览器并重新启动它。我*认为*在这种情况下应该清除您网站的会话 cookie。否则你必须关闭会话恢复。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-29T16:35:29.597

两个想法：

1.  您的会话管理器有问题（FF3 中包含的一个或扩展中包含的一个，例如 tabmixplus）
2.  使用 Firebug + FireCookie ( [https://addons.mozilla.org/en-US/firefox/addon/6683](https://addons.mozilla.org/en-US/firefox/addon/6683) ) 调试！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-29T16:30:55.067

这应该有效。我曾经是 cookie 模块测试人员之一，我认为这没有任何设计原因会导致不同的行为（尽管如果您崩溃，会话 cookie*可能*被设计为在您重新启动时继续存在......）

您是否在“首选项”菜单 >“隐私”选项卡 >“显示 Cookie...”按钮中查看 Cookie？

另外，您是否尝试过新的个人资料？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-07-21T11:20:08.637

我不同意上面的meandmycode。

HTTP 规范[https://www.ietf.org/rfc/rfc6265.txt](https://www.ietf.org/rfc/rfc6265.txt) 讨论了客户端应该如何处理带有 Expires 的 Set-Cookie 标头：

> 如果服务器希望用户代理在多个“会话”中保留 cookie（例如，用户代理重新启动），则服务器可以在 Expires 属性中指定到期日期。请注意，如果用户代理的 cookie 存储超过其配额或用户手动删除服务器的 cookie，则用户代理可能会在到期日期之前删除 cookie。

对此的逻辑扩展是，服务器必须要求浏览器在退出时不维护 Cookie 的唯一方法是不设置 Expires 值（即会话 cookie）。如果浏览器不尊重该语义，则它不尊重服务器的响应。

本质上，用户代理决定忽略服务器请求并像设置了 Expires 值一样行事。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-03-30T03:01:19.603

这在共享用户环境中有点令人担忧。如果我设置了一个在会话结束时设置为过期的身份验证 cookie。在浏览器关闭并且另一个用户启动 Firefox 后，这将在 Firefox 中持续存在。Cookie 设置有效期是有原因的！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-01-12T11:28:01.663

我很困惑 Mozilla 多年来一直保持这种状态。

好的..所以我退出FF并关闭PC。第二天 FF 启动并打开最后一组页面（非常方便的功能），但它恢复了会话，我重新登录到没有“保存我的设置”功能的网站。我知道，因为它们是我建立的网站。无论我用 php ini 设置做什么，会话都会恢复。

他们绝对不应该被恢复。页面是的，但 cookie ini 设置为“0”的会话不。

我不明白为什么这没有被标记为安全漏洞。当然我可以在服务器端做一些额外的检查，看看是否应该允许登录，基于上次登录的时间，但它不应该是必需的。

会话不应持续存在。FF 正在操纵 cookie 到期设置。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-09-30T15:21:31.263

就我而言，这是因为即使在 Firefox 设置中禁用了此选项，**固定选项卡也会自动恢复会话。**因此，如果您取消固定选项卡，会话将不会恢复。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-03-31T15:25:46.090

好吧，这让我感到不安。我的系统已设置好，用户可以点击 EXIT，从而销毁所有会话 cookie。但是，如果用户在没有实际选择退出的情况下关闭浏览器，我希望清除会话 cookie。

我实际上使用 Google Chrome、IE 9 对其进行了测试，并且工作正常。但是 Firefox 不愿意终止这个“会话”（由 Firebug 报告）cookie。

**好的。这就是我所做的。我从 FireFox 主菜单中选择了退出，从那时起，它按预期做得很好（不知道为什么）。**

# javascript - 测量仅加载某些页面元素的时间

> ID：777770
> 
> 赞同：3
> 
> 时间：2009-04-22T15:18:24.890
> 
> 标签：javascript, performance, dom-events, client-side

我们使用[Jiffy](http://code.google.com/p/jiffy-web/)的修改版本来测量实际的客户端性能。

我们做的最重要的事情是测量从收到请求到在浏览器中触发页面加载事件之间的时间。

在某些页面上，我们有`iframe`指向我们无法控制的外部站点的元素——它们有时需要很长时间才能加载。目前，我们页面的页面加载事件仅在`iframe`完全加载后才会触发（并且它自己的加载事件会触发）。

我想将这些测量分开 - 在`iframe`加载所有内容（包括.`iframe``iframe`

到目前为止，我设法做到这一点的唯一方法是`iframe`在页面加载事件之后将 DOM 添加到 DOM 中，但这会延迟 iframe 的加载。

有任何想法吗？

编辑：赏金结束，感谢您的帮助和想法！我选择了 Jed 的答案，因为它给了我一个新想法——开始加载 iframe，但“暂停”它们，这样它们就不会影响页面加载（通过临时设置`src="about:blank"`）。我将尝试添加更详细的结果摘要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-01T06:34:17.917

您可以通过以下方式为多个 iframe 实现此目的，而无需动态添加它们：

1.  `src`将所有帧的属性设置为`about:blank`在身体加载之前，
2.  让身体负荷事件触发，
3.  添加一个`onload`处理程序来捕获每个帧的加载时间，然后
4.  将每一帧的属性恢复`src`到其原始值。

我创建了一个`frameTimer`包含两种方法的模块：

1.  `init`需要在`</body>`标记之前立即调用的方法，以及
2.  一种`measure`在页面加载时调用的方法，该方法采用结果回调。

结果对象是这样的哈希：

```
{
    iframes: {
        'http://google.co.jp/': 1241159345061,
        'http://google.com/': 1241159345132,
        'http://google.co.uk/': 1241159345183,
        'http://google.co.kr/': 1241159345439
    },
    document: 1241159342970
} 
```

它为每个加载时间返回整数，但可以轻松更改为仅返回文档正文加载的差异。

这是一个实际的工作示例，带有这个 javascript 文件 ( `frameTimer.js`)：

```
var frameTimer = ( function() {
    var iframes, iframeCount, iframeSrc, results = { iframes: {} };

    return {
        init: function() {
            iframes = document.getElementsByTagName("iframe"),
            iframeCount = iframes.length,
            iframeSrc = [];

            for ( var i = 0; i < iframeCount; i++ ) {
                iframeSrc[i] = iframes[i].src;
                iframes[i].src = "about:blank";
            }
        },

        measure: function( callback ) {
            results.document = +new Date;

            for ( var i = 0; i < iframeCount; i++ ) {
                iframes[i].onload = function() {
                    results.iframes[ this.src ] = +new Date;
                    if (!--iframeCount)
                        callback( results )
                };

                iframes[i].src = iframeSrc[ i ];
            }
        }
    };

})(); 
```

和这个 html 文件 ( `frameTimer.html`):

```
<html>
    <head>
        <script type="text/javascript" src="frameTimer.js"></script>
    </head>
    <body onload="frameTimer.measure( function( x ){ alert( x.toSource() ) } )">
        <iframe src="http://google.com"></iframe>
        <iframe src="http://google.co.jp"></iframe>
        <iframe src="http://google.co.uk"></iframe>
        <iframe src="http://google.co.kr"></iframe>
        <script type="text/javascript">frameTimer.init()</script>
    </body>
</html> 
```

这可以用 jQuery 用更少的代码（并且不那么突兀）来完成，但这是一个非常轻量级且无依赖的尝试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-27T08:23:21.090

我对 jiffy*本身*并不熟悉，但过去我使用粗略的定制函数进行了类似的测量，大致如下（5 分钟从记忆中打字）：

```
<html>
    <head>
        <script>
        var timer = {
            measure:    function(label)
                        {
                            this._timings[label] = new Date();
                        },
            diff:        function(a,b)
                        {
                            return (this._timings[b] - this._timings[a]);
                        },
            _timings: {}
        }
        </script>
    </head>
    <body onload="alert(timer.diff('iframe.start','iframe.done'));">
        <!-- lorem ipsum etc -->
        <script>timer.measure('iframe.start');</script>
        <iframe src="http://www.google.com" onload="timer.measure('iframe.done');"/>
        <!-- lorem ipsum etc -->
    </body>
</html> 
```

从中您可以看到相关部分只是在遇到 iframe 之前立即记下日期戳，然后将事件处理程序添加到 iframe 的 onload 事件（无论 iframe 源的域如何，它都可以工作并且不需要修改内容）进行另一次测量（通常我会使用 addEventListener/attachEvent 添加这些事件，但你明白了）。

这为您提供了 iframe 的时间跨度，您可以从总数中减去，以便合理了解有无 if​​rame 的加载时间。

高温高压

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-03T13:30:24.187

我不确定它是否会帮助你：

作为 jQuery 用户，我在窗口的 onLoad 事件触发之前很久就执行了我的代码。

这是 jQuery 的一项基本功能，允许在加载页面的 DOM 准备好后立即进行处理（请参阅：[jQuery 就绪事件](http://docs.jquery.com/Events/ready#fn)）

然后，我可以将事件处理程序添加到每个可能“稍后”完成加载的元素，包括 iframe。

但是我知道这对于您的情况可能还不够，因为您希望在不加载 iframe 的情况下拥有“一切”的时间。如果您将 iframe 源设置在 jQuery 就绪处理程序之外，我不确定窗口的 onLoad 事件会发生什么。我猜他们会独立加载，但这需要检查。

另一方面......这个准备好的功能显示人们何时会看到您的页面“建立”。图像和内容的加载对于人类感知来说主要是次要的。这就是为什么windows在加载完成之前显示桌面一段时间:-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-03T21:54:06.770

我将建议 OderWat 建议的“domready”事件，但有一个例外：您不需要 jQuery 来实现此事件。在[http://dean.edwards.name/weblog/2006/06/again/](http://dean.edwards.name/weblog/2006/06/again/)它对所有三个（实际上是 4 个）主要浏览器都有很好的解释。

实际上，如果您在特定浏览器上运行测试，则更容易实现此事件以进行跟踪。

希望能帮助到你。

# java - 3D绘图，设置视角，设置视角！

> ID：777771
> 
> 赞同：3
> 
> 时间：2009-04-22T15:18:27.403
> 
> 标签：java, opengl

我需要绘制 3d 投影，并且我正在为 JAVA 使用 opengl 包装器。问题： - 如何在 java opengl 中设置视点（例如，我想让我的程序在屏幕上绘制对象，就像我从 (0,0,0) 看那个对象一样） - 如何设置透视点（3d 中的点往哪里看，例如我想编程在屏幕上绘制对象，因为我从 (0, 0, 0) 到 (1, 1, 3) 看

我熟悉这个问题的数学问题，所以我计算了所有视角的坐标。我只需要opengl java函数或可以在我想要的透视图中绘制这个新坐标的函数。

帮助！！:)))

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-22T15:23:13.273

这个[例子](http://www.java-tips.org/other-api-tips/jogl/how-to-render-a-wireframe-cube.html)对你有帮助吗？您可能正在寻找的功能是[gluLookAt](http://www.opengl.org/documentation/specs/man_pages/hardcopy/GL/html/glu/lookat.html)：

```
gluLookAt( GLdouble eyeX,
       GLdouble eyeY,
       GLdouble eyeZ,
       GLdouble centerX,
       GLdouble centerY,
       GLdouble centerZ,
       GLdouble upX,
       GLdouble upY,
       GLdouble upZ )

PARAMETERS
  eyeX, eyeY, eyeZ
      Specifies the position of the eye point.

  centerX, centerY, centerZ
      Specifies the position of the reference
          point.

  upX, upY, upZ   
          Specifies the direction of the up vector. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-22T15:30:02.633

[Nehe](http://nehe.gamedev.net/lesson.asp?index=01)将他们的大部分教程移植到 Java。第一个可能应该做你需要做的事情让自己开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-22T15:25:53.407

试试这个关于 Java 和 OpenGL 的教程

[Java 个人 OpenGL 教程](http://www.cs.uwm.edu/~grafix2/)

# asp.net - 何时在 XmlDocument 或 XmlTextReader 上使用 XPath？

> ID：777777
> 
> 赞同：1
> 
> 时间：2009-04-22T15:18:52.817
> 
> 标签：asp.net, xml, xpath, xmldocument

什么时候在 XmlDocument 上使用 XPath？

我试图从更高的层次看事情。有没有在 XmlDocument 上使用 XPath 更好的情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-22T15:28:58.033

XPath 和 XmlDocument 不是专有的东西。XPath 是 W3C 定义的一种语言，允许使用类似路径的语法来查询 XML 文档。XmlDocument 是一个 .NET 类，它抽象了很多关于 XML 解析的内容。XmlDocument 具有诸如`SelectNodes`和之类的方法，`SelectSingleNode`它们将 XPath 表达式作为参数并返回结果。

我不明白为什么您似乎认为 XPath 和 XmlDocument 不能一起使用，或者我完全误解了您。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-22T15:28:30.467

当出于某种原因需要 an[`XmlDocument`](http://msdn.microsoft.com/library/system.xml.xmldocument)而不是[`XPathDocument`](http://msdn.microsoft.com/library/system.xml.xpath.xpathdocument)or[`XDocument`](http://msdn.microsoft.com/library/system.xml.linq.xdocument.)时，两者都支持 XPath，在内存模型中重量较轻。

[`XmlReader`](http://msdn.microsoft.com/library/system.xml.xmlreader)对线性阅读文档很有好处，但没有立即支持 XPath，但所有其他三个 API 都支持，但它们对其他功能的支持会有所不同。如果您希望提取数据，请考虑`XPathDocument`（围绕 XPath 设计）或`XDocument`（启用 LINQ to XML 类型方法）而不是`XmlDocument`.

# python - 如何设置模型以在 Python 中将 AutoField 与旧数据库一起使用？

> ID：777778
> 
> 赞同：1
> 
> 时间：2009-04-22T15:18:59.290
> 
> 标签：python, django, oracle, autofield

我有一个以整数集作为主键的旧数据库。它最初是手动管理的，但由于我们想迁移到 django，因此管理工具似乎是正确的起点。我创建了模型并尝试将主键设置为自动字段。它似乎没有记住更新中的旧 id，并且它不会在插入时创建新的 id。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-22T17:31:23.200

*DB*负责管理ID的值。如果要使用 AutoField，则必须更改数据库中的列才能使用它。Django*不*负责管理生成的 ID

# javascript - 有没有办法让浏览器忽略或覆盖 xml-stylesheet 处理指令？

> ID：777784
> 
> 赞同：5
> 
> 时间：2009-04-22T15:20:18.087
> 
> 标签：javascript, xml, xslt, browser, bookmarklet

我正在尝试编写一个书签来帮助一些 QA 测试人员在遇到问题时提交有用的调试信息。目前我可以将 window.location 设置为提供此调试信息的 URL，但此资源是带有 xml-stylesheet 处理指令的 XML 文档。

如果测试人员能够以纯文本形式查看原始 XML 数据，或者 IE 和 Firefox 的默认 XML 呈现，实际上会更方便。

有谁知道使用 Internet Explorer 或 Firefox 禁用或覆盖 XML 文档中提供的 xml-stylesheet 指令的方法？

编辑：我在这个问题上开了一个赏金。要求：

*   仅客户端代码，不允许用户干预
*   需要 IE 和 Firefox 的解决方案（它们可以是不同的解决方案）
*   禁用样式表处理并将其呈现为文本是可以接受的
*   使用自定义 XSL 覆盖样式表处理是可以接受的
*   使用浏览器默认 XML 样式表呈现 XML 是可以接受的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-01T15:07:15.423

**编辑**：太糟糕了，虽然在预览中看起来一切都很好，但可点击的例子似乎把事情搞砸了......也许历史上的布局很好。

我听说，但无法验证 IE，IE 和 Firefox 都支持“view-source：”伪协议。Mac 上的 Firefox 确实理解它，但 Safari 不理解。

以下小书签不会触发[XML](http://www.w3schools.com/xsl/cdcatalog_with_ex1.xml)中指定[的 XSLT 转换](http://www.w3schools.com/xsl/cdcatalog_ex1.xsl)。尽管 Firefox 将使用某些颜色呈现它，但它不会执行通常用于[没有任何 XSLT 的 XML](http://www.w3schools.com/XML/cd_catalog.xml)的默认转换（因此，视图源的结果不会产生 Firefox 通常会显示的可折叠文档树）：

```
javascript:(function(){
  var u = 'http://www.w3schools.com/xsl/cdcatalog_with_ex1.xml';
  var w = window.open();
  w.document.location.href = 'view-source:' + u;
})() 
```

当使用 Ajax 获取文档时，不仅限于使用的`alert` [oneporter](https://stackoverflow.com/questions/777784/is-there-a-way-to-have-browsers-ignore-or-override-xml-stylesheet-processing-inst/800549#800549)，还可以在新窗口中显示它。同样：这不会调用指定的 XSLT 转换：

```
javascript:(function(){
  var u = 'http://www.w3schools.com/xsl/cdcatalog_with_ex1.xml';

  var w = window.open(); /* open right away for popup blockers */

  var x = new XMLHttpRequest();
  x.open('GET', u, true); 
  x.onreadystatechange = function(){
    if(x.readyState == 4){
      w.document.open('text/html');
      /* hack to encode HTML entities */
      var d = document.createElement('div'); 
      var t = document.createTextNode(x.responseText); 
      d.appendChild(t);
      w.document.write('<html><body><pre>' 
          + d.innerHTML + '</pre></body></html>');
      w.document.close();
      w.focus();
    }
  };
  x.send(null); 
})() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-25T09:26:46.697

你不能在两个浏览器中都做“查看源代码”吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-26T19:21:16.370

您可以通过在浏览器中输出内容之前使用中间步骤对 XML 进行预处理来避免处理指令。

**客户端建议**

1.  通过 AJAX 请求检索相关的 XML 文档
2.  *将*XML 解析为 DOM（注意：*DOM*不是DOM）
**   遍历 DOM 并在浏览器中渲染所需的数据*

 ***服务器端建议**

不要直接请求相关的 XML 文档，而是向代理脚本发出请求，该脚本从 XML 内容中删除所有处理指令，或者实际上是所有您不想要的。

代替：

```
window.location = 'http://example.com/document.xml'; 
```

采用：

```
window.location = 'http://example.com/proxy/'; 
```

[http://example.com/proxy/](http://example.com/proxy/)上的脚本将：

1.  加载`document.xml`
2.  使用任何必要的东西从 XML 内容中删除处理指令
3.  输出 XML 内容

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-29T01:45:06.523

只要您不必处理跨域权限，带有 XML 源的简单 ajax 请求/警报框就可以解决问题。您必须在 xmlHttp 声明中添加一些内容以使其与 IE 兼容。

```
<html>
<body>

<script language="JavaScript">
function ajaxFunction()
{

var xmlHttp=new XMLHttpRequest();;

  xmlHttp.onreadystatechange=function()
    {
    if(xmlHttp.readyState==4)
      {
      alert(xmlHttp.responseText);
      }
    }
  xmlHttp.open("GET","YOURFILE.xml",true);
  xmlHttp.send(null);

}
</script>

<a href="#" onclick="JavaScript:ajaxFunction()">Errors</a>

</body>
</html> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-25T00:20:48.647

据我所知，没有办法做你想做的事。问题是，javascript 无法从客户端 xml/xsl 转换读取 xml 的 dom。就 javascript 而言，它是在普通的 html dom 上执行的。

但是，根据 webapp 的类型，可能会有一些希望。您可以使用 ajax 来获取当前 url 的 xml。只要没有发布数据或任何其他随机性，此方法应该可以正常工作。

# javascript - 为什么通过 GetClusteredShapes 方法检索集群规范时，GetClusterShape 返回 null？

> ID：777788
> 
> 赞同：1
> 
> 时间：2009-04-22T15:20:53.810
> 
> 标签：javascript, virtual-earth

假设我有一个名为的虚拟地球形状层`shapeLayer1`（我的创造力显然处于历史最低点）。

当我调用该`GetClusteredShapes`方法时，我得到一组`VEClusterSpecification`对象，这些对象代表我当前可见的每个集群；那里没问题。但是当我调用该`GetClusterShape()`方法时，它返回 null ... null！为什么它会那样做？我使用萤火虫来确认`VEClusterSpecification`应该持有对形状的引用的私有变量确实为空，所以这不是导致问题的方法。

[有些人认为](http://social.msdn.microsoft.com/forums/en-US/vemapcontroldev/thread/58bb9ba5-d620-4c77-bf37-e4c5c8fbc914/#6c14c0be-de69-4ccb-89a1-9c8f72a612ef)这实际上是记录在案的行为

> 如果从 VEShapeLayer.GetClusteredShapes 方法返回了 VEClusterSpecification 对象，则返回**null**

[但是查看VEShape 类](http://msdn.microsoft.com/en-us/library/cc980821.aspx)的当前MSDN 文档，它说：

> 返回是否从 VEShapeLayer.GetClusteredShapes 方法返回了 VEClusterSpecification 对象

这是错误还是功能？是否有任何已知的解决方法或（如果是错误）计划何时修复它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2010-03-12T18:45:35.327

我知道它...我仍在查看代码，但据我所知，他们希望您使用 VEClusteringOptions 回调方法设置自定义内容。这对我不起作用，因为我使用的是自定义信息框，但它可能对其他人有所帮助，使用下面的方法，您可以完全访问集群内的形状。

```
function clusteringCallback(clusters)
{
   for (var i=0; i < clusters.length; ++i)
   {
        var cluster = clusters[i];
        var clusterShape = cluster.GetClusterShape();
        clusterShape.SetCustomIcon("<div class='cluster'><div class='text'>"+cluster.Shapes.length+"</div></div>");
        clusterShape.SetTitle("This is my Cluster #" + i);
        clusterShape.SetDescription("This cluster has " + cluster.Shapes.length + " shapes in it!");
   }
}

function SetClustering() 
{
    var options =  new VEClusteringOptions();
    options.Callback = clusteringCallback;
    shapeLayer.SetClusteringConfiguration(VEClusteringType.Grid, options);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-04-28T13:41:08.213

如果您需要从 clustershape 所属的图层中获取图层 ID，可以这样做：

```
var layerId = clusters[i].Shapes[0].GetShapeLayer().MsnId; 
```

如果您找到其他方式，请通知我们 ;-)

# .net - 搜索 XML-FO 处理器

> ID：777791
> 
> 赞同：2
> 
> 时间：2009-04-22T15:21:38.847
> 
> 标签：.net, xml-formatting

我一直在尝试寻找可以在 .NET 应用程序中使用的免费/开源 XML-FO 处理器，但我没有找到一个。有人知道我可以使用的吗？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-10-26T19:12:57.760

有一个用于 .NET 的免费 XSL-FO 处理器，称为[FO.NET](http://www.codeplex.com/fonet)。

我正在使用它，它可以很好地满足我的需求。

[编辑] 抱歉，刚刚注意到其他人已经对 FO.NET 发表了评论...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-22T15:33:21.987

您可以从 .net调用[apache fop](http://xmlgraphics.apache.org/fop/)

[这个人](http://radio.javaranch.com/balajidl/2006/01/16/1137440142333.html)发布了一些关于让它工作的信息。

我敢肯定，进行更多搜索，您可以获得一些更好/更多的示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-18T21:19:50.017

您可以使用 nfop，它是 Apache 的 fop 的 .NET 端口。

您可以在[http://sourceforge.net/projects/nfop/](http://sourceforge.net/projects/nfop/)找到它。

它的一些限制是：

*   它不支持 FO 2.0
*   它只能在 32 位服务器上运行（因为它需要安装 J# SDK）
*   图像支持并不总是可靠的（不支持 .gif url，但作为文件路径支持）
*   一些填充和边距属性并不总是呈现

作为入门工具，它很棒。它执行您可能期望能够执行的简单格式化。如果您想做书签和目录等精美的 PDf 内容，您可能需要升级到专业的 FO 处理器。

# .net - 智能客户端软件工厂视图激活

> ID：777797
> 
> 赞同：0
> 
> 时间：2009-04-22T15:22:55.567
> 
> 标签：.net, scsf

我在我们的应用程序中使用智能客户端软件工厂

我动态创建了一个工作区，基于此我可以创建 n 个视图。视图是模态对话框，我使用了一些窗口工作区。

但问题是我必须在菜单中实现保存所有功能。

但我不知道哪个视图被激活/聚焦。

如何获得焦点屏幕，如果焦点改变，他们的任何事件都会发生吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-09-11T16:14:28.367

这篇文章可能会对您有所帮助：
[如何：在 SCSF 应用程序中跨多个工作区获取活动视图](http://blogs.southworks.net/mconverti/2008/08/04/how-to-get-the-active-view-across-multiple-workspaces-in-a-scsf-application/)

# tfs - 是否需要在 TFS 构建服务器上安装 Visual Studio？

> ID：777804
> 
> 赞同：14
> 
> 时间：2009-04-22T15:24:24.923
> 
> 标签：tfs, msbuild, tfsbuild

我们最近从 Source Safe 迁移到 Team Foundation Server 2008。我们正在设置一些自动构建，并且在发布单击一次应用程序时遇到了一些问题，这些问题似乎需要在构建服务器上进行额外安装。

我看到一些帖子表明需要安装 Visual Studio IDE。我还看到一些帖子说安装 .Net Framework SDK 可以解决这个问题。我们不想在构建服务器上安装超过我们需要的东西，但我们也不想向我们的服务器团队发出多个请求以在不同时间安装不同的部分。所以，我想知道大多数团队最终安装了什么。

如果这很重要，我们目前还没有专门的构建服务器。我们是一个小团队（6 个开发人员，都是本地的）。构建是在我们的主 TFS 机器上进行的，SQL Server 部分是唯一位于单独服务器上的部分。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-04-22T18:35:00.863

如果您只是使用 Team Foundation Build 编译应用程序，那么 .NET Framework 就可以了 - 但是，一旦您开始想要做任何更高级的事情（例如运行单元测试并将其结果发布到 TFS），那么您将需要咬紧牙关在构建服务器上安装 Visual Studio Team Edition。我通常只是在构建服务器上安装 Team Suite 的副本，以便获得使用各种功能许可的人可以将这些功能作为任何自动构建的一部分运行。

必须将它安装在您的服务器上并不理想，但可以为您提供目前最好的体验。

关于将 TFS 服务器用作构建服务器，不建议大型团队这样做，因为构建往往是 CPU 和 IO 密集型的野兽 - 但是对于像您这样的小型团队并假设您没有太多构建定义可以立即运行，您应该能够摆脱它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-22T15:37:27.000

据此[，](http://msdn.microsoft.com/en-us/library/ms252483(VS.80).aspx)不应该需要 Visual Studio——只需要 .NET Framework。链接中要考虑的另一个注意事项是，他们建议不要在 TFS 盒上进行构建。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-22T15:36:36.643

是的，我在构建服务器上安装了 VS。我按照他们的手册设置 TFS。

# php - 在 PHP 中访问类中对象的成员

> ID：777808
> 
> 赞同：0
> 
> 时间：2009-04-22T15:25:06.373
> 
> 标签：php, class, object

### 我的代码：

```
class Address{
   public var $Street;
}

class Employee{
    public var $ID:
    public var $Name:
    public var $Address;
}

$myEmployee = new Employee();
$myEmployee->Address = new Address(); 
```

我现在如何进入街道？

```
$street = $myEmployee->$Address->Street;
$street = $myEmployee->Address->Street; 
```

两者都在 Eclipse 中给我警告。我在想：

```
$street = $myEmployee['Address']->Street; 
```

它是否正确？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-22T15:33:20.940

```
$myEmployee->Address->Street; 
```

它是有效的，Eclipse 的警告系统对于这样的事情非常奇怪。我通常在这样的情况下关闭它们，让 PHP 为我做错误报告。

此外，eclipse 不支持自动完成您需要做的事情。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-22T15:35:28.673

如前所述，您的建议使用：

```
$street = $myEmployee->Address->Street; 
```

是完全有效的。但是，您的代码中存在一些可能导致问题的错误。首先，公共成员变量要么像这样声明：

```
public $id; 
```

或者这个（已弃用）：

```
var $id; 
```

两者的组合不是有效的 PHP 代码。

此外，行尾有两个冒号 (:)，应该是分号 (;)。

希望有帮助！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-22T15:29:49.467

```
$street = $myEmployee->Address->Street; 
```

应该管用。无论如何，Eclipse 抱怨什么？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-22T15:33:16.773

为什么不在 Employee 类的构造函数中创建地址？我猜你最终会创建多个员工，而不是每次都有两行来创建员工和地址，你可以创建一个员工并陶醉于地址已经存在的舒适感创建并存储在 $myEmployee->Address 中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-22T15:35:34.180

另一种方法是使用访问器和私有数据成员：

```
class Address {
   private $Street;

   public function __construct() {}

   public function setStreet($Street) {
       $this->Street = $Street;
   }

   public function getStreet() {
      return $this->Street;
   }
}

/* ... same for Employee ... */

$myEmployee = new Employee();
$myEmployee->setAddress(new Address());

$street = $myEmployee->getAddress()->getStreet(); 
```

这将为您提供封装，以防您稍后需要更改内部实现。如果您将类成员公开为公共数据成员，那么一旦客户端代码开始使用您的类，您就会被锁定在其中。

这样重构会更容易，而且它也会消除你的警告。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-22T16:59:01.217

缺少 Eclipse 代码补全的原因是代码补全需要类型信息。

在 PHP 中，这可以通过[类型提示](http://ch2.php.net/language.oop5.typehinting)和注释注释来完成。

我不确定您使用的是什么 Eclipse 插件，但如果是 PDT，请查看[代码辅助](http://files.zend.com/help/PDT/code_assist_concept.htm)手册：

一个简单的注释注释是：

您可以在 Employee 上方添加：

```
/**
 * @property Address $Address
 */
class Employee 
.... 
```

# .net - 添加博客文章查看次数的计数器 - BlogEngine.net

> ID：777825
> 
> 赞同：3
> 
> 时间：2009-04-22T15:28:17.053
> 
> 标签：.net, blogengine.net

我正在建立一个新博客并寻找一个可以添加的小部件，该小部件可以为我提供一篇博客文章的总浏览量（如果能找出过去 X 天的浏览量会很好），但没有找不到。

有没有快速设置的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-27T16:11:58.297

鲍勃，

这里有东西给你。我之前创建了它，只是从来没有为它发过帖子。它应该正是您要寻找的。

[热门帖子/热门评论小部件](http://www.spoiledtechie.com/post/Top-Post-and-Top-Comment-Widgets-for-BlogEngineNet.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-22T15:29:47.923

如果它是给*你*看的（即不是屏幕上的计数器，而是你可以单独查看的东西）：[谷歌分析](http://www.google.com/analytics/)，如果你有一个 atom/rss 提要，也许可以使用[feedburner 。](http://feedburner.google.com)

添加谷歌分析只是添加几行脚本（它为您生成）；它提供了*很多*信息（不仅仅是点击次数，而是正确的使用历史、人们用来找到你的引用站点/搜索词、IP 的物理位置等）。它是免费的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-08-22T23:06:58.790

查看 Al Nyveldt 的帖子[最受欢迎的帖子扩展和小部件](http://www.nyveldt.com/blog/post/Most-Popular-Posts-Extension-and-Widget.aspx)。它在计数方面做你想要的。如果您愿意扩展 BlogEngine.NET，您可以相当容易地使用他的扩展生成的文件来显示所有帖子以及它们被查看的次数。如果您想要的话，请记住只允许管理员访问它。

# jquery - jQuery Cycle 插件 上一个/下一个

> ID：777826
> 
> 赞同：5
> 
> 时间：2009-04-22T15:28:22.700
> 
> 标签：jquery, jquery-plugins

只是想知道在使用 jQuery Cycle 插件时，如果对于 next/prev 按钮，可以将其配置为单击 next 按钮向右滑动，单击 prev 向左滑动。

谢谢你的帮助。戴夫

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-04-22T15:31:28.043

确认！

忘记这一点，只是在[这里](http://www.malsup.com/jquery/cycle/scrollhv.html)为其他想知道的人找到答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-22T15:34:42.107

查看[此演示](http://malsup.com/jquery/cycle/pager11.html)以了解循环插件，该插件完全符合您的要求并包含寻呼机。关键是使用“scrollHorz”效果。

# .net - 如何将“GUI”层保留在“业务逻辑”层之外？

> ID：777828
> 
> 赞同：4
> 
> 时间：2009-04-22T15:28:30.810
> 
> 标签：.net, design-patterns, business-objects

我目前有一个项目是“业务对象”项目，我们的目标是在 GUI 和业务对象之间有一个明确的分离。但是，我的项目引用了**System.Windows.Forms**，这对每个人来说都是一个很大的危险信号，即我的项目设计不佳。

我的问题是我正在使用名为“Active Query Builder”的第 3 方控件。它实际上是 GUI 中的“控件”，System.Windows.Forms.Control；但它永远不会显示在任何地方，添加到任何 Form 的 Controls 集合中。它提供了业务对象的大部分核心功能。

无论如何，如果没有对 System.Windows.Forms 的引用 - 我不能使用第 3 方控件并且 BO 被严重破坏了。但有人告诉我，我不能引用 System.Windows.Forms，因为这是不好的编码习惯。

我完全不知道该怎么做。

具有更多设计模式类型经验的人可以提供解决方案吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-22T15:32:35.077

所以你有一个引用 WindowsForms 的库，但不直接使用任何东西？您的 BO 项目没有弄乱任何表格？

我认为你很好，参考是一面红旗，上面写着等等我为什么要这样做。但是只要该层在逻辑上仍然是分开的，那么恕我直言，你可以。

您可以做的一件事是将其抽象到另一个项目中，该项目将处理与查询构建器的交互。因此，您的 BO 项目将与知道如何使用此控件的 Query Builder 项目一起使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-22T15:33:12.453

我在这里可能错了，但 System.Windows.Forms 只是 .NET Framework 的一部分，实际上并不构成 GUI。它可能有许多有用的功能，您可能会使用这些功能但不会显示任何内容。我认为无论谁说不应该使用它，都可能误解了这个原则。

如果您正在开发 n 层应用程序，通常会操作 GUI-业务逻辑-数据存储分离，但 GUI 严格来说是呈现给用户以允许交互的用户界面，而不是促进交互的框架。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-22T15:34:05.447

我只是模糊地熟悉 Active Query Builder，但这不是用于创建 SQL 查询的 GUI 组件吗？我完全不知道这种组件是如何属于业务对象的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-22T15:34:11.420

您可以为控件创建一个包装类，该类使用您需要的方法实现接口。您的业​​务对象可以依赖于该接口，该接口可以由任何东西实现（在这种情况下，它是一个控件）。

它确实引起了一些担忧，即这个“控件”具有与 UI 无关的功能；只是感觉不对。

# javascript - 如果链接页面的内容自上次访问后发生更改，则使用 jQuery 将星号附加到菜单项

> ID：777834
> 
> 赞同：0
> 
> 时间：2009-04-22T15:29:09.203
> 
> 标签：javascript, jquery, cookies, append

我想创建与 Apple 的 Safari 4 Beta Top Sites 页面类似的效果 -

![http://farm4.static.flickr.com/3644/3323438140_10b62d40f4.jpg](https://i.stack.imgur.com/PXqUN.jpg)

当您查看它并且页面的内容自您上次访问以来发生了变化时，它会在右上角显示一个蓝色星号以通知您。

我也想做同样的事情，但只在我的网站内，而不是图像，我想在菜单项的链接上附加一个“*”或其他字符。

我确定您会使用 jQuery Cookie 插件，但我的脚本编写不是那么先进，而且我不知道如何动态更改 cookie 的内容。我解释清楚了吗？我该怎么做？

提前谢谢了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-22T15:58:24.593

服务器端：

每分钟阅读一次网站 f.ex 并保存更改内容的时间戳。将用户的访问时间戳保存到页面

阿贾克斯：

检查网站更新时间戳是否比访问者的时间戳更新，如果是，则使星类可见，当用户单击链接时，使星消失并更新用户时间戳。

--

用 Jquery 显示星星或图像或任何东西在这里都不是什么大问题，它是一个单行器，复杂的问题是检测网站的变化，因为可能会发生微小的变化，但主要内容不会改变。最简单的方法是如果网站提供 rss，那么重要的新内容很可能会通过 rss 发布。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-22T15:34:47.987

你在问一个非常模糊的问题。你有没有尝试过这个？请先尝试，然后在此过程中寻求帮助。

此外，这不是您一定需要 jQuery 的东西。你可以完全在后端完成。但是如果不知道更多细节，很难说哪种解决方案最适合您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-22T15:47:11.563

我想我会建议使用 php 并将缓存页面存储到数据库中（换句话说，用户将拥有一个“fav pages”帐户）然后当用户访问“fav pages”网页时，您将获取所有用户最喜欢的页面并将其与存储在数据库中的内容进行比较。但是对于某些页面（例如，如果它们有日期/时间字符串），很难判断更改是否是用户想要了解的内容。可能您需要创建一个复杂的算法来确定哪些更改是好的更改，哪些更改只是某些网站功能。

# asp.net - ASP.NET 中的业务/域对象

> ID：777841
> 
> 赞同：0
> 
> 时间：2009-04-22T15:31:02.740
> 
> 标签：asp.net, design-patterns, architecture, domain-driven-design, business-objects

只是试图收集有关通过 ASP.NET (2.0+) UI/Presentation 层操作业务/域对象的方法/无效方法的想法。特别是在 ASP.NET 代码直接与业务层对话的经典 ASP.NET LOB 应用程序情况下。我经常遇到这种类型的设计，想知道什么是理想的解决方案（即实现特定的模式），以及在没有实现“模式”的情况下不需要完全重写的最佳实用解决方案是什么。

这是一个示例场景。

作为特定业务/域对象的“编辑/新建”页面的单个 ASP.NET 页面，让我们以“人员”为例。我们想在此页面中编辑姓名和地址信息。当用户进行编辑或输入数据时，在某些情况下表单应该回发以刷新自身。例如，在编辑地址时，他们选择“国家”。之后，州/地区下拉菜单将启用并刷新所选国家/地区的相关信息。这本质上是业务逻辑（根据某些依赖字段限制可用选择），并且此逻辑由业务层处理（请记住，这只是一个示例，

理想情况下，此逻辑仅存储在业务/域对象中（即在 ASP.NET 代码中没有重复的逻辑）。为了实现这一点，我相信业务/域对象需要重新初始化，并根据每个回发的当前 UI 值设置它的状态。

例如：

```
private Person person = null;

protected void Page_Load()
{
    person = PersonRepository.Load(Request.QueryString["id"]);

    if (Page.IsPostBack)
        SetPersonStateFromUI(person);
    else
        SetUIStateFromPerson(person);
}

protected void CountryDropDownList_OnChange()
{
    this.StateRegionDropDownList.Enabled = true;
    this.StateRegionDropDownList.Items.Clear();
    this.StateRegionDropDownList.DataSource = person.AvailableStateRegions;
    this.StateRegionDropDownList.DataBind();
} 
```

我见过的其他选项是将业务对象存储在 SessionState 中，而不是在每次页面加载备份时从存储库（也称为数据库）加载它。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-14T21:00:10.853

这是我不同意的一点：

```
this.StateRegionDropDownList.DataSource = person.AvailableStateRegions; 
```

Person 是一个业务/域对象，但它不是应该处理状态/区域映射的对象（例如），即使那是做出决策的信息所在。

在需要多个变量来做出决定的更复杂的示例中，您通常想要做的是从您尝试结束的域对象开始，并在该对象上调用一个函数，该函数可以获得所有必需的做出商业决策的信息。

所以也许（在 State 类上使用静态函数）：

```
this.StateRegionDropDownList.DataSource = State.GetAvailableStateRegions(person, ipAddress); 
```

由于将 UI 助手关注点从 Person 域对象中分离出来，这种编程风格往往“更易于测试”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-22T15:37:55.140

我会将您的示例放在我的“UI 增强”存储桶中而不是 BL 中，验证条目是否正确是 BL，但在我看来，缓和数据输入是 UI。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-22T15:38:12.253

对于非常简单的事情，我不会打扰定期回发，而是会使用 ajax 方法。例如，如果我需要获取城市列表，我可能有一个页面方法（或 Web 服务），它给定一个状态给我一个城市列表。

如果您的选择取决于多种参数，那么您的做法会很有效。至于在 Session 中存储东西是有好处的。您的实体是否同时对多个可见？如果是这样，当用户 A 和用户 B 都编辑相同的内容时会发生什么。另外，如果您每次加载都是每次都保存到数据库中吗？如果我正在编辑我的姓名，然后选择国家，但现在我的浏览器崩溃了，会发生什么情况。您是否更新了数据库中的名称？

# wpf - WPF 框架源刷新加载的页面

> ID：777843
> 
> 赞同：3
> 
> 时间：2009-04-22T15:31:39.853
> 
> 标签：wpf, frames

我遇到了一个奇怪的场景，框架拒绝刷新其内容。

我可以理解发生了什么，但解决方案并没有出现。

我有一个包含框架（Frame1）和几个按钮的页面。当我单击一个按钮时，一个页面被加载到框架中。这在大多数情况下都非常有效。

```
Private Sub btnIncidents_Click(ByVal sender As Object, ByVal e As System.Windows.RoutedEventArgs) Handles btnIncidents.Click
    Frame1.Source = New System.Uri("/Incident/Incidents.xaml", UriKind.Relative)
End Sub 
```

但是，我有一种情况，我需要选择之前单击的按钮以有效地对 Uri 进行刷新。问题是它根本没有做任何事情，因为 Uri 没有改变。这是有道理的，但这不是我想要的，我需要再次调用它。

我的第一个解决方案是引入 Frame1.Refresh，它最初起到了作用。但是一旦页面被刷新，没有一个按钮可以加载不同的页面。

就好像通过调用 Frame1.Refresh 我破坏了 Frames 导航到其他页面的能力。

我的第二个想法是将 Frame 源设置为 Nothing (Null)，然后将源设置为 URI，但这也不起作用。即 Frame1.Source = 无

有没有其他人遇到过这个或者可能有一些建议？我只需要在不破坏框架的情况下刷新/重新加载框架页面！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-10-05T15:59:44.360

我有类似的问题 - 虽然是 html。解决了它

```
frame.NavigationService.Refresh(); 
```

显然会清除导航历史，但就我而言，我并不在乎。

[从http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/8fc6bd83-2803-4820-a22b-d4d87638c4e2](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/8fc6bd83-2803-4820-a22b-d4d87638c4e2)得到了答案

# java - 正确使用同步单例？

> ID：777849
> 
> 赞同：10
> 
> 时间：2009-04-22T15:33:05.137
> 
> 标签：java, multithreading, singleton, synchronized

所以我正在考虑建立一个业余爱好项目，一种特殊的东西，只是为了复习我的编程/设计。

它基本上是一个多线程网络蜘蛛，更新相同的数据结构 object->int。

因此，为此使用数据库绝对是矫枉过正，而我唯一能想到的就是用于包含我的数据结构的线程安全单例。[http://web.archive.org/web/20121106190537/http://www.ibm.com/developerworks/java/library/j-dcl/index.html](http://web.archive.org/web/20121106190537/http://www.ibm.com/developerworks/java/library/j-dcl/index.html)

我应该研究另一种方法吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2009-04-22T18:42:52.357

双重检查锁定已被证明是不正确且有缺陷的（至少在 Java 中如此）。搜索或查看[Wikipedia 的条目](http://en.wikipedia.org/wiki/Double_checked_locking_pattern)以了解确切原因。

首先是程序的正确性。如果您的代码不是线程安全的（在多线程环境中），那么它就会损坏。在性能优化之前，正确性是第一位的。

为了正确，您必须同步整个`getInstance`方法

```
public static synchronized Singleton getInstance() {
   if (instance==null) ...
} 
```

或静态初始化它

```
private static final Singleton INSTANCE = new Singleton(); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-04-22T15:39:08.257

在网络爬虫中对数据库使用延迟初始化可能不值得。延迟初始化增加了复杂性和持续的速度冲击。一种合理的情况是很有可能永远不需要数据。此外，在交互式应用程序中，它可用于减少启动时间并产生速度*错觉*。

对于像网络爬虫这样的非交互式应用程序，它肯定需要它的数据库立即存在，延迟初始化是不合适的。

另一方面，网络爬虫很容易并行化，并且会从多线程中受益匪浅。用它作为练习来掌握`java.util.concurrent`图书馆将是非常值得的。具体来说，查看[`ConcurrentHashMap`](http://java.sun.com/javase/6/docs/api/java/util/concurrent/ConcurrentHashMap.html)and [`ConcurrentSkipListMap`，](http://java.sun.com/javase/6/docs/api/java/util/concurrent/ConcurrentSkipListMap.html)它将允许多个线程读取和更新共享映射。

当你摆脱惰性初始化时，最简单的单例模式是这样的：

```
class Singleton {

  static final Singleton INSTANCE = new Singleton();

  private Singleton() { }

  ...

} 
```

关键字`final`是这里的关键。即使您为`static`单例提供“getter”而不是允许直接访问字段，但创建单例`final`有助于确保正确性并允许 JIT 编译器进行更积极的优化。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-23T07:20:20.523

试试**Bill Pugh**的按需初始化持有人习语的解决方案。该解决方案是跨不同 Java 编译器和虚拟机的最可移植的解决方案。该解决方案是线程安全的，不需要特殊的语言结构（即易失性和/或同步）。

[](http://en.wikipedia.org/wiki/Singleton_pattern#The_solution_of_Bill_Pugh)[http://en.wikipedia.org/wiki/Singleton_pattern#The_solution_of_Bill_Pugh](http://en.wikipedia.org/wiki/Singleton_pattern#The_solution_of_Bill_Pugh)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-22T15:44:57.933

如果您的生命依赖于几微秒，那么我建议您将资源锁定优化到真正重要的地方。

但在这种情况下，这里的关键字是**爱好项目**！

这意味着，如果您同步了整个**getInstance()**方法，那么在 99.9% 的情况下都可以。我不建议以任何其他方式这样做。

稍后，如果您通过 profiling 证明**getInstance()**同步是您项目的瓶颈，那么您可以继续优化并发性。但我真的怀疑它会给你带来麻烦。

杰奇！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2010-07-07T14:29:31.320

正如 Joshua Bloch 在他的《有效的 java 2nd edition》一书中所说，我也同意单元素枚举类型是实现单例的最佳方式。

```
public enum Singleton {
  INSTANCE;

  public void doSomething() { ... }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-23T18:11:04.817

为什么不创建一个作为依赖注入传递给每个线程的数据结构。这样你就不需要单例了。您仍然需要使线程安全。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-22T15:44:13.567

如果您查看该文章的最底部，您会看到仅使用静态字段的建议。那将是我的倾向：您实际上并不需要惰性实例化（因此您不需要`getInstance()`同时成为访问器和工厂方法）。您只想确保您拥有这些东西中的一件，而且只有一件。如果你真的需要全局访问这样的事情，我会[在最底部使用该代码示例](http://www.ibm.com/developerworks/java/library/j-dcl.html#6)：

```
class Singleton
{
  private Vector v;
  private boolean inUse;
  private static Singleton instance = new Singleton();

  private Singleton()
  {
    v = new Vector();
    inUse = true;
    //...
  }

  public static Singleton getInstance()
  {
    return instance;
  }
} 
```

请注意，Singleton 现在是在安装静态字段期间构建的。这应该有效，并且不会面临潜在的错误同步的线程风险。

综上所述，也许您真正需要的是现代 JDK 中可用的线程安全数据结构之一。[例如，我是ConcurrentHashMap](http://java.sun.com/javase/6/docs/api/java/util/concurrent/ConcurrentHashMap.html)的忠实粉丝：线程安全加上我不必编写代码（FTW！）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-22T15:41:26.007

您引用的文章仅讨论了如何创建单例对象，在这种情况下可能是一个集合，是线程安全的。您还需要一个线程安全的集合，以便集合操作也能按预期工作。确保单例中的基础集合是同步的，可能使用[ConcurrentHashMap](http://java.sun.com/javase/6/docs/api/)。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-04-22T18:45:59.463

查看这篇文章[在 C# 中实现单例模式](http://www.yoda.arachsys.com/csharp/singleton.html)

```
public sealed class Singleton
{
    Singleton()
    {
    }

    public static Singleton Instance
    {
        get
        {
            return Nested.instance;
        }
    }

    class Nested
    {
        // Explicit static constructor to tell C# compiler
        // not to mark type as beforefieldinit
        static Nested()
        {
        }

        internal static readonly Singleton instance = new Singleton();
    }
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-04-22T18:47:36.480

怎么样：

```
public static Singleton getInstance() {
  if (instance == null) {
    synchronize(Singleton.class) {
      if (instance == null) {
         instance = new Singleton();
      }
    }
  }

  return instance;
} 
```

# objective-c - 如何在 Objective-C 中创建分配器类方法？

> ID：777858
> 
> 赞同：1
> 
> 时间：2009-04-22T15:33:50.813
> 
> 标签：objective-c

我有一个具有 bar 属性的 NSFoo 类。我想要一个类方法来获取带有 bar 属性集的 NSFoo 实例。这类似于 NSString stringWithFormat 类方法。所以签名将是：

```
+ (NSFoo *) fooWithBar:(NSString *)theBar; 
```

所以我会这样称呼它：

```
NSFoo *foo = [NSFoo fooWithBar: @"bar"]; 
```

我想这可能是正确的：

```
+ (NSFoo *) fooWithBar:(NSString *)theBar {
  NSFoo *foo = [[NSFoo alloc] init];
  foo.bar = theBar;
  [foo autorelease];
  return foo;  
} 
```

这看起来对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-22T15:38:24.860

是的。看起来不错。你的实现似乎是一种常见的做法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-22T15:48:32.480

是的，您的实现看起来是正确的。因为`-[NSObject autorelease]`returns `self`，你可以把return语句写成`return [foo autorelease]`。如果您要使用自动释放（而不是释放），有些人建议在分配时自动释放对象，因为它使意图明确并将所有内存管理代码保存在一个地方。然后你的方法可以写成：

```
+ (NSFoo *) fooWithBar:(NSString *)theBar {
  NSFoo *foo = [[[NSFoo alloc] init] autorelease];
  foo.bar = theBar;

  return foo;  
} 
```

当然，如果`-[NSFoo initWithBar:]`存在，您可能会将此方法编写为

```
+ (NSFoo *) fooWithBar:(NSString *)theBar {
  NSFoo *foo = [[[NSFoo alloc] initWithBar:theBar] autorelease];

  return foo;  
} 
```

# sql - 事件表的基于集合的计算，事件除外

> ID：777861
> 
> 赞同：0
> 
> 时间：2009-04-22T15:34:27.707
> 
> 标签：sql, sql-server, tsql, sql-server-2000, set-based

我有一个表，其中包含更改维护服务状态的事件。这是一个数据样本：

```
id  date    event
234 2009-04-22 10:00:00 Service Request
234 2009-04-22 10:02:00 Service Approbation
234 2009-04-22 10:03:00 Service Asignation
234 2009-04-22 10:40:00 Service Fulfilled
... 
```

在报告中，我需要显示在每个项目上花费的时间

```
id  time
234 40 minutes
235 37 minutes
... 
```

基本上，我正在做这样的 DATEDIFF：

```
SELECT ...
, DATEDIFF(SECOND, 
(SELECT TOP 1 date FROM event_table ev WHERE ev.item = itm.id AND event = 1 ORDER BY date ), 
(SELECT TOP 1 date  FROM event_table ev WHERE ev.item = itm.id AND event = 4 ORDER BY date DESC)
        ), ...
FROM item_table itm
WHERE ... 
```

现在我必须实现一个新的状态。延迟和重新激活服务，但在计算花费在该服务上的总时间时不必考虑这些时间。

```
id  date    event
234 2009-04-22 10:00:00 Service Request
234 2009-04-22 10:02:00 Service Approbation
234 2009-04-22 10:03:00 Service Asignation
234 2009-04-22 10:07:00 Service Delayed           -- new state
234 2009-04-22 10:37:00 Service Reactivated       -- new state
234 2009-04-22 10:40:00 Service Fulfilled
... 
```

报告

```
id  time
234 10 minutes  -- Substract 30 minutes between Delay and Reactivation
235 26 minutes
... 
```

对于任何项目，延迟和重新激活都可能发生多次。

我知道我可以用光标来做到这一点，但对我来说这似乎很老套，有没有办法在基于集合的方法上计算这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-22T15:47:28.830

我这样做的方法是首先找到整个工作的持续时间，减去所有延迟的持续时间......

查找延迟持续时间的代码：

```
SELECT
   [delay_start].event_id,
   SUM(DATEDIFF(second, [delay_start].date, [delay_finish].date))
FROM
   event_table AS [delay_start]
INNER JOIN
   event_table AS [delay_finish]
      ON  [delay_finish].event_id = [delay_start].event_id
      AND [delay_finish].date = (
                                 SELECT
                                    MIN(date)
                                 FROM
                                    event_table
                                 WHERE
                                    event_id = [delay_start].event_id
                                    AND date > [delay_start].date
                                    AND event = 'Service Reactivated'
                                )
WHERE
   [delay_start].event = 'Service Delayed'
   AND [delay_finish].event = 'Service Reactivated'
GROUP BY
   [delay_start].event_id 
```

**编辑**：纠正了几个错别字...

# .net - wsFederationHttpBinding，将自定义用户身份传递给 STS

> ID：777871
> 
> 赞同：2
> 
> 时间：2009-04-22T15:35:48.873
> 
> 标签：.net, wcf, wcf-security

我正在尝试实现以下场景：

1.  客户将其凭证传递给 STS。
2.  STS 应用自定义 AuthorizationPolicy 来确定可供特定用户使用的声明集并颁发安全令牌。
3.  客户端将令牌传递给业务服务，业务服务根据他们从令牌中获得的声明集来确定用户的权限。

看起来第一步是主要问题。正如[MSDN](http://msdn.microsoft.com/en-us/library/ms731376.aspx)建议的那样，wsFederationHttpBinding 的消息元素没有 clientCredentialsType。因此，每当我的 AuthorizationPolicy 检查 evaluationContext.Properties["Identities"] 时，它都会在其中看到 WindowsIdentity。我想针对自定义存储（DB）对用户进行身份验证。

有没有办法用 wsFederationHttpBinding 来完成它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-24T12:16:57.047

嗯，这就是答案

STS 配置：

```
<behaviors>
     <serviceBehaviors>
         <behavior name="STSBehaviour">
             <!--Custom credentials processing-->
             <serviceCredentials>
                 <userNameAuthentication userNamePasswordValidationMode="Custom" 
                                         customUserNamePasswordValidatorType="SecurityTokenService.UserNameValidator, SecurityTokenService"/>
             </serviceCredentials>
             <!--------------------------------->
         </behavior>
    </serviceBehaviors>
</behaviors>
<bindings>
    <wsHttpBinding>
        <binding name="wsHttpUsername">
            ...
            <security mode="Message">
                <message clientCredentialType="UserName"
                         negotiateServiceCredential="false"
                         establishSecurityContext="false" />
            </security>
            ...
        </binding>
    </wsHttpBinding>
</bindings>
<services>
    <service behaviorConfiguration ="STSBehaviour"
               name="Microsoft.ServiceModel.Samples.SecurityTokenService" >
           ....
    </service>
</services> 
```

用户名验证器

```
public class UserNameValidator : UserNamePasswordValidator
{
    public override void Validate(string userName, string password)
    {
        if (!VerifyCredentials(userName, password))
            throw new SecurityException("Invalid credentials");
    }
} 
```

# sql - 如何有效地从 Postgresql 8.1 表中删除行？

> ID：777880
> 
> 赞同：6
> 
> 时间：2009-04-22T15:38:23.220
> 
> 标签：sql, database, postgresql

我正在研究一个 PostgreSQL 8.1 SQL 脚本，它需要从表中删除大量行。

假设我需要从中删除的表是员工（~260K 行）。它具有名为 id 的主键。

我需要从此表中删除的行存储在一个名为EmployeesToDelete（约10K 条记录）的单独临时表中，其中包含对Employees.id 的外键引用，称为employee_id。

有没有一种有效的方法来做到这一点？

起初，我想到了以下几点：

```
DELETE
FROM    Employees
WHERE   id IN
        (
        SELECT  employee_id
        FROM    EmployeesToDelete
        ) 
```

但我听说使用“IN”子句和子查询可能效率低下，尤其是对于较大的表。

我查看了 PostgreSQL 8.1 文档，其中提到了 DELETE FROM ... USING 但它没有示例，所以我不确定如何使用它。

我想知道以下是否有效并且更有效？

```
DELETE
FROM    Employees
USING   Employees e
INNER JOIN
        EmployeesToDelete ed
ON      e.id = ed.employee_id 
```

非常感谢您的意见。

编辑：我运行了 EXPLAIN ANALYZE，奇怪的是第一个 DELETE 运行得非常快（几秒钟内），而第二个 DELETE 花了很长时间（超过 20 分钟）我最终取消了它。

向临时表添加索引对性能有很大帮助。

这是任何有兴趣的人的第一个 DELETE 的查询计划：

```
 Hash Join  (cost=184.64..7854.69 rows=256482 width=6) (actual time=54.089..660.788 rows=27295 loops=1)
   Hash Cond: ("outer".id = "inner".employee_id)
   ->  Seq Scan on Employees  (cost=0.00..3822.82 rows=256482 width=10) (actual time=15.218..351.978 rows=256482 loops=1)
   ->  Hash  (cost=184.14..184.14 rows=200 width=4) (actual time=38.807..38.807 rows=10731 loops=1)
         ->  HashAggregate  (cost=182.14..184.14 rows=200 width=4) (actual time=19.801..28.773 rows=10731 loops=1)
               ->  Seq Scan on EmployeesToDelete  (cost=0.00..155.31 rows=10731 width=4) (actual time=0.005..9.062 rows=10731 loops=1)

 Total runtime: 935.316 ms
(7 rows) 
```

在这一点上，除非我能找到更好的写法，否则我会坚持使用第一个 DELETE。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-22T16:24:37.137

不要猜测，测量。尝试各种方法，看看哪一种执行时间最短。此外，使用[EXPLAIN](http://www.postgresql.org/docs/8.1/interactive/sql-explain.html)了解 PostgreSQL 将做什么并查看可以优化的地方。很少有 PostgreSQL 用户能够**正确**猜出最快的查询...

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-04-22T15:43:35.940

> 我想知道以下是否有效并且更有效？

```
 DELETE
    FROM    Employees e
    USING   EmployeesToDelete ed
    WHERE   id = ed.employee_id; 
```

这完全取决于您的索引选择性。

`PostgreSQL`倾向于使用具有稳定执行时间`MERGE IN JOIN`的谓词。`IN`

只要您已经有一个有序的结果集，它就不受满足此条件的行数的影响。

有序结果集需要排序操作或索引。`PostgreSQL`与 相比，全索引遍历效率非常低`SEQ SCAN`。

`JOIN`另一方面，如果您的索引非常有选择性，则谓词可能会受益于使用，`NESTED LOOPS`而使用`HASH JOIN`它是非选择性的。

`PostgreSQL`应该通过估计行数来选择正确的。

由于您有`30k`对行的`260K`行，因此我希望`HASH JOIN`效率更高，您应该尝试在`DELETE ... USING`查询上构建计划。

为确保，请发布两个查询的执行计划。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-22T15:42:50.293

我不确定`DELETE FROM ... USING syntax`，但一般来说，子查询在逻辑上应该与 an 相同`INNER JOIN`。数据库查询优化器应该能够（这只是一个猜测）为两者执行相同的查询计划。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-22T15:42:20.433

为什么不能首先删除行而不是将它们添加到`EmployeesToDelete`表中？

或者如果您需要撤消，只需在 中添加一个“已删除”标志`Employees`，这样您就可以撤消删除，或者永久删除，全部在一个表中？

# .net - 在不同域中使用双工通道的 WCF 服务

> ID：777884
> 
> 赞同：0
> 
> 时间：2009-04-22T15:38:56.107
> 
> 标签：.net, wcf

我有一个 WCF 服务和一个 Windows 客户端。它们通过双工 WCF 通道进行通信，当我从单个网络域中运行时，该通道运行良好，但是当我将服务器放在单独的网络域上时，我在 WCF 服务器跟踪中收到以下消息...

带有 to 的消息

> 由于 EndpointDispatcher 的 AddressFilter 不匹配，无法在接收器处处理“net.tcp://abc:8731/ActiveAreaService/mex/mex”。检查发送方和接收方的 EndpointAddresses 是否一致。

因此，如果组件位于两个单独的域中，则看起来通信只能在一个方向（从客户端到服务器）进行。

网络域是完全信任的，所以我有点困惑还有什么可能导致这种情况？

## 服务器 app.config

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <system.serviceModel>
        <behaviors>
            <serviceBehaviors>
                <behavior name="JobController.ActiveAreaBehavior">
                    <serviceMetadata httpGetEnabled="false" />
                    <serviceDebug includeExceptionDetailInFaults="true" />
                </behavior>
            </serviceBehaviors>
        </behaviors>
        <services>
            <service behaviorConfiguration="JobController.ActiveAreaBehavior"
                     name="JobController.ActiveAreaServer">
                <endpoint address="mex" binding="mexTcpBinding" bindingConfiguration="" contract="IMetadataExchange" />
                <host>
                    <baseAddresses>
                        <add baseAddress="net.tcp://SERVER:8731/ActiveAreaService/" />
                    </baseAddresses>
                </host>
            </service>
        </services>
    </system.serviceModel>

</configuration> 
```

但我还在 Visual C++ 中以编程方式添加了一个端点

```
host = gcnew ServiceHost(ActiveAreaServer::typeid);

NetTcpBinding^ binding = gcnew NetTcpBinding();
binding->MaxBufferSize = Int32::MaxValue;
binding->MaxReceivedMessageSize = Int32::MaxValue;
binding->ReceiveTimeout = TimeSpan::MaxValue;

binding->Security->Mode = SecurityMode::Transport;
binding->Security->Transport->ClientCredentialType = TcpClientCredentialType::Windows;

ServiceEndpoint^ ep = host->AddServiceEndpoint(IActiveAreaServer::typeid, binding, String::Empty); // Use the base address 
```

## 客户端 app.config

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <system.serviceModel>
        <bindings>
            <netTcpBinding>
                <binding name="NetTcpBinding_IActiveAreaServer" closeTimeout="00:01:00"
                    openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                    transactionFlow="false" transferMode="Buffered" transactionProtocol="OleTransactions"
                    hostNameComparisonMode="StrongWildcard" listenBacklog="10"
                    maxBufferPoolSize="524288" maxBufferSize="65536" maxConnections="10"
                    maxReceivedMessageSize="65536">
                    <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                    <reliableSession ordered="true" inactivityTimeout="00:10:00"
                        enabled="false" />
                    <security mode="Transport">
                        <transport clientCredentialType="Windows" protectionLevel="EncryptAndSign" />
                        <message clientCredentialType="Windows" />
                    </security>
                </binding>
            </netTcpBinding>
        </bindings>
        <client>
            <endpoint address="net.tcp://SERVER:8731/ActiveAreaService/"
                binding="netTcpBinding" bindingConfiguration="NetTcpBinding_IActiveAreaServer"
                contract="ActiveArea.IActiveAreaServer" name="NetTcpBinding_IActiveAreaServer">
                <identity>
                    <userPrincipalName value="user@SERVERDOMIAIN.CLIENTDOMAIN.COM" />
                </identity>
            </endpoint>
        </client>
    </system.serviceModel>
</configuration> 
```

任何帮助表示赞赏！

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-23T05:31:41.050

如果我没记错的话，回调通道实际上发生在某种愚蠢的地方，比如端口 80。看看你选择的地址，我敢打赌你的两台机器之间有一个防火墙，并且你已经明确地打开了一个端口。您可能必须打开端口 80。

如果端口 80 不是您喜欢的，我认为您可以使用正在使用的绑定的 clientBaseAddress 属性来配置它。

让我们知道事情的进展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-01T11:36:42.170

这实际上是我的一位同事发布的问题，奇怪的是我知道不问，我检查了用于回调通道的端口，它们似乎是在一定范围内随机生成的。到目前为止，我已经看到了 3501、4595 和其他一些，所以我已经排除了端口是问题。

还有其他想法吗？

# .net - 反射和铸造

> ID：777888
> 
> 赞同：1
> 
> 时间：2009-04-22T15:39:16.057
> 
> 标签：.net, reflection

我有以下情况，当我尝试投射时抛出异常：

1.  我添加了一个项目引用并导入了项目的命名空间。
2.  LoadFile 行加载构建此项目时生成的 dll。
3.  我正在尝试访问从 dll 中装饰对象属性的属性的公共字段。
4.  这是异常文本：

> [A]MyNamespace.PropertyMetaDataAttribute 无法转换为 [B]MyNamespace.PropertyMetaDataAttribute。类型 A 源自位置 'C:\projectA\bin\debug\A.dll' 的上下文 'LoadFrom' 中的 'A, Version=12.0.0.25, Culture=neutral, PublicKeyToken=null'。类型 B 源自位置“C:\currentProject\bin\debug\A.dll”的上下文“Default”中的“A, Version=12.0.0.25, Culture=neutral, PublicKeyToken=null”。

代码片段：

```
using MyNamespace; // added project reference to this item

m_Assembly = Assembly.LoadFile(ConfigurationManager.AppSettings["DLL_File_Path"]);

 Type objectType = m_Assembly.GetType(string.Format("{0}.{1}", NAMESPACE_PREFIX, "MyObject"));

 // Crash happens on line below:

 Attribute attr = (Attribute) objectType.GetProperty("Name").GetCustomAttributes(false)[0];

//This is the layout of the object which has the property
 MyObject
 {
    [MyAttribute(Name="FooName")]
    Foo {get;set;}
 }

// This is the definition of the attribute
 MyAttribute :Attribute
 {
    // Want to access the value
    public string Name = string.Empty;
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-22T15:45:57.320

好像你的

```
ConfigurationManager.AppSettings["DLL_File_Path"] 
```

指向其他位置的同一个 dll，因此 .Net 运行时尝试加载已加载的 dll，当您尝试使用它时，类型系统会因为 2 个 dll 之间重复的类型而崩溃...

根据错误，这些是两个dll的位置

*   C:\currentProject\bin\debug\A.dll
*   C:\projectA\bin\debug\A.dll

如果在解决方案上明确设​​置了引用，您可以尝试将 copy local 设置为 False 以便在解决方案生成时，不要复制依赖项的结果

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-22T20:31:40.770

加载程序集时，可以将类型加载到不同的上下文中。这就是为什么您不能从一种类型转换为另一种类型的原因。您可以使用 AssemblyResolve 事件（如 jishi 建议的那样）解决此问题，或者还有一个[TypeResolve](http://msdn.microsoft.com/en-us/library/system.appdomain.typeresolve.aspx)事件，您可以在使用它时使用它来返回正确的类型，但我认为您只需要将程序集与正确的上下文并了解加载的时间和方式以及适合您的内容。

来自 Suzanne Cook 博客的这些文章确实帮助我了解了不同的上下文以及事物是如何加载到其中的以及为什么。

[http://blogs.msdn.com/suzcook/archive/2003/09/19/loadfile-vs-loadfrom.aspx](http://blogs.msdn.com/suzcook/archive/2003/09/19/loadfile-vs-loadfrom.aspx)

[http://blogs.msdn.com/suzcook/archive/2003/05/29/57143.aspx](http://blogs.msdn.com/suzcook/archive/2003/05/29/57143.aspx)

此外，如果您想查看它们的加载方式和原因，您应该查看[Fusion 日志](http://blogs.msdn.com/suzcook/archive/2003/05/29/57120.aspx)，并将它们设置为转储所有信息，它会向您显示程序集的加载信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-22T16:07:13.993

如果您的 dll 已经在自动搜索的路径（当前目录、bin 等）中，并且由于您在该程序集中引用了某些内容而被加载，那么您的 LoadFile（您可能也希望使用 LoadFrom）会将相同的 DLL 加载到另一个上下文中（ LoadFrom-context) 而不是默认值。

您应该考虑只加载 DLL 一次，或者尝试首先从默认上下文中获取程序集以避免冲突，方法是查看 AppDomain.CurrentDomain.GetAssemblies()。

如果您尝试访问不在默认上下文中的程序集，您甚至可以将 AssemblyResolve-eventhandler 附加到 AppDomain.CurrentDomain 作为后备。

[http://msdn.microsoft.com/en-us/library/system.appdomain.assemblyresolve.aspx](http://msdn.microsoft.com/en-us/library/system.appdomain.assemblyresolve.aspx)

AppDomain.CurrentDomain.GetAssemblies() 将包含来自所有上下文的程序集，甚至是您使用 LoadFrom/LoadFile 加载的程序集。

# asp.net - 在回发时，如何向验证摘要添加错误消息？

> ID：777889
> 
> 赞同：58
> 
> 时间：2009-04-22T15:39:26.277
> 
> 标签：asp.net, validation

**两个问题：**

在用户单击提交时回发时，如何将错误消息添加到验证摘要？

是否也可以使用内置的 .net 验证控件突出显示特定的文本框？

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2010-09-15T10:06:55.867

动态创建一个 CustomValidator 控件并将其直接添加到 Page.Validators 集合中。

```
Dim err As New CustomValidator
err.ValidationGroup = "MyGroup"
err.IsValid = False
err.ErrorMessage = "The password is invalid"
Page.Validators.Add(err) 
```

与将 CustomValidator 添加到标记不同，此方法允许您根据服务器端业务逻辑添加任意数量的任意错误消息。

请注意，您也可以直接将其添加到页面中，但需要遵循一些规则：

1.  您必须将控件添加到与验证组的控件相同的命名容器中。
2.  如果您不希望验证消息出现在页面中的随机位置，则必须将验证器添加到特定容器中，或者您需要使用 CSS 类或样式来抑制它。

您还可以创建[自定义类并实现 IValidator](http://blog.webmastersam.net/post/Adding-custom-error-message-to-ValidationSummary-without-validators.aspx)，这样您就可以使用一行代码添加消息，但此方法不支持验证组。

根据 Anders Fjeldstad 的建议，这里有一组方便的扩展方法。

```
Imports Microsoft.VisualBasic
Imports System.Runtime.CompilerServices

Public Module PageExtensions

    <Extension()> _
    Public Sub AddValidationError(ByVal p As System.Web.UI.Page, ByVal errorMessage As String)
        p.AddValidationError(errorMessage, String.Empty)
    End Sub

    <Extension()> _
    Public Sub AddValidationError(ByVal p As System.Web.UI.Page, ByVal errorMessage As String, ByVal validationGroup As String)
        Dim err As New CustomValidator
        err.ValidationGroup = validationGroup
        err.ErrorMessage = errorMessage
        err.IsValid = False
        p.Validators.Add(err)
    End Sub

End Module 
```

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2009-04-22T15:52:28.523

添加自定义验证器并手动设置它的`IsValid`和`ErrorMessage`属性。有点像这样：

```
<asp:panel ID="ErrorsPanel" runat="server" CssClass="ErrorSummary">
    <asp:CustomValidator id="CustomValidator1" runat="server" 
        Display="None" EnableClientScript="False"></asp:CustomValidator>
    <asp:ValidationSummary id="ErrorSummary" runat="server" 
        HeaderText="Errors occurred:"></asp:ValidationSummary>
</asp:panel> 
```

在后面的代码中：

```
//
// Update the database with the changes
//
string ErrorDetails;
if (!Db.Update(out ErrorDetails))
{
    CustomValidator1.IsValid = false;
    CustomValidator1.ErrorMessage = ErrorDetails;
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-08-01T12:49:23.120

这是 NightOwl888 的好主意的一个小扩展：

```
public class ValidationError : CustomValidator
{
    public ValidationError(string group, string msg)
        : base()
    {
        base.ValidationGroup = group;
        base.ErrorMessage = msg;
        base.IsValid = false;
    }
}

public static class PageExtensions
{
    public static void ErrorMessage(this Page page, string group, string msg)
    {
        page.Validators.Add(new ValidationError(group, msg));
    }
} 
```

每当您想发出错误消息时，只需调用`Page.ErrorMessage`; 机制与他建议的相同。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-11-07T05:26:36.073

好吧，您需要做的就是创建一个自定义验证器并将其添加到页面的验证器集合中，只要出现这样做的条件。

```
CustomValidator cv = new CustomValidator();

if(condition)
{
cv.IsValid = false;
cv.ErrorMessage = "This Catalog Data already exists.";
cv.ValidationGroup = "InputList";
this.Page.Validators.Add(cv);
} 
```

**注意**：不要忘记指定*ValidationGroup*，否则即使将自定义验证器添加到您的页面，也不会显示错误消息。而且，如果您确实得到了第二个问题的答案（*突出显示文本框*），请发布！

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-04-22T15:44:04.597

要在验证摘要上添加错误消息，您可以使用ValidationSummary 的**EnableClientScript**属性和其他验证控件。将 EnableClientScript 全部设置为 false ：

```
<asp:ValidationSummary
HeaderText="You must enter a value in the following fields :"
DisplayMode="BulletList"
EnableClientScript="false"
runat="server"/> 
```

对于突出显示控件，不，当前控件是不可能的。

但是我将验证控件放在相关控件附近，并将它们的**Text**属性设置为“*”。然后，如果验证失败，它就会出现在失败的控制附近。

也许您可以使用自定义验证器来突出显示失败的控件。但是您应该编写自己的实现。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-05T20:32:36.717

这是上述答案的一个版本，它是 ValidationSummary 的扩展方法，它负责验证组 ID。

```
public static void AddCustomMessage(this ValidationSummary summaryControl, string message)
{
    summaryControl.Page.Validators.Add(new CustomValidator {
        ValidationGroup = summaryControl.ValidationGroup,
        ErrorMessage = message,
        IsValid = false
    });
} 
```

# java - 将命令行输入转换为数组

> ID：777898
> 
> 赞同：2
> 
> 时间：2009-04-22T15:41:13.120
> 
> 标签：java, arrays, command-line

我正在做关于如何获取键盘命令行输入并将其放入数组的 Bruce Eckel 练习。它应该采用 3 个单独的输入并将它们放入一个数组中并将它们打印出来。

这是我到目前为止的代码：

```
//: object/PushtoArray
import java.io.*;
import java.util.*; 
class PushtoArray { 
    public static void main(String[] args) { 
    String[] s = new String[3]; 
    int i = 0; 

    //initialize console 
    Console c = System.console();   

    while ( i <= 2 ) {
        //prompt entry:
        //System.out.println("Enter entry #" + i + ": ");  
        //readin 
            s[i] = c.readLine("enter entry #" + i + ": "); 

        //increment counter 
        i++;                

    } //end while 

    //reset counter 
    i = 0; 

    //print out array
    while ( i <= 2 ) { 
        System.out.println(s[i]);
            i++;
    } //end while 
    }//end main

} //end class 
```

**更新：**现在我得到一个不同的错误：

```
PushtoArray.java:15: readline(boolean) in java.io.Console cannot be applied to (java.lang.string) 
      s[i]= c.readline("Enter entry #" + i + ": "); 
```

我正在尝试从命令提示符读取，但它根本没有提示。当我对 java 文件进行 javac 时，它可以正确编译。

我使用了错误的功能吗？我应该使用推送方法而不是分配吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-22T15:52:34.623

你确定你在`javac`正确的文件上运行吗？该文件无法编译。

1.  您需要在 import 语句上使用分号：

    ```
    import java.io.*; 
    ```

2.  你忘记了一个端括号：

    ```
    } // end main() 
    ```

3.  没有这样的方法`readline()`。您需要从`System.in`. 最简单的方法是在循环之前创建一个`Scanner`，然后在循环中读取它。[`Scanner`](http://java.sun.com/javase/6/docs/api/java/util/Scanner.html)有关示例，请参阅 Javadocs 。

**编辑：**有关从命令行读取的更多信息，请参阅[Java 教程。](http://java.sun.com/docs/books/tutorial/essential/io/cl.html)该类（在 Java 6 中引入）看起来具有您想要的[`Console`方法](http://java.sun.com/javase/6/docs/api/java/io/Console.html)`readLine()`。

**编辑 2：**您需要大写 Line。你写了“ `readline`”，但它应该是“ `readLine`”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-22T15:55:11.700

尝试

```
BufferedReader in = new BufferedReader(new InputStreamReader(System.in)); 
```

然后在你的循环中：

```
in.readline(); 
```

我会将收到的行推入 ArrayList 或类似的。这样，您可以接受多于/少于 3 行数据（但仅当您要接受的行数可变时才需要）

编辑：我最初认为 NoSuchMethod 异常突出了范围问题。显然不是，感谢那些指出这一点的人！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-22T15:56:29.043

```
//print out array
    while ( i < 2 ) { 
        System.out.println(s[i]);
        i++; //increase counter!
    } //end while 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-22T18:44:14.117

这可能不是您想要的，但它需要三个命令行参数，将它们存储到一个数组中，然后从新数组中打印出参数：

```
public class CommandArray {

    public static void main (String[] args){

        //Set up array to hold command line values
        String[] arr = new String[3];

        //Copy command line values into new array
        for(int i = 0;i < 3;i++)
            arr[i] = args[i];

        //Print command line values from new array
        for(int j = 0; j < 3; j++)
            System.out.print(arr[j] + " ");

            //Extra line for terminal
            System.out.println();
    }
} 
```

然后，在你用 编译你的代码之后`javac CommandArray.java`，你可以用`java CommandArray Arg1 Arg2 Arg3`.

另外，我注意到，在你的最后一个 while 循环中，你有：

```
while(i < 2) { 
```

如果命令行接受 3 个参数，您将只打印 2。打印的数组索引将是 0 和 1，因为 1 < 2。您可以将其更改为：

```
while(i <= 2) { 
```

并且不要忘记增加 i。

# css - 是否有替代 IE 填充不会使文本消失的替代方法？

> ID：777900
> 
> 赞同：1
> 
> 时间：2009-04-22T15:41:37.847
> 
> 标签：css, internet-explorer

是否有一个干净的替代方案不会使文本在以下内容中消失：

```
<div style="background-color:#ddd; padding:10px 0 50px 0;">
<ol><li>In what year were you born?</li></ol>
<div><select name="c_record" size="1">
    <option value="">-- Select One --</option>
    <option value="1">1900</option>
    <option value="2">1902</option>
</select></div>
</div> 
```

如果我将外部 div 上的填充更改为：`padding:10px 0 0 0;`文本再次显示。

我还尝试在最外面的 div 中添加第二个 div 并向其添加填充，但这也不起作用。在 div 内部添加边距对顶部和底部边距没有任何影响。

有任何想法吗？

**编辑：**我使用的是 IE 6 和 7，页面上没有其他代码，没有文档类型，样式表——只有上面的代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-22T15:53:47.303

添加位置：相对；你的风格将解决这个问题。它被亲切地称为 Peekaboo bug。

[这](http://www.communitymx.com/content/article.cfm?page=3&cid=7A8DF)是一个更详细地解释它的链接。

我同意您应该尝试使用边距，因为添加 position:relative 可能会导致其他问题。此外，浏览器也不会始终遵循带有填充的盒子模型标准。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-22T15:43:29.480

尝试边距而不是填充？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-22T19:29:16.973

> 我使用的是 IE 6 和 7，页面上没有其他代码，没有 doctype，样式表——只有上面的代码。

试图通过让 IE 默认为怪癖模式来解决问题是愚蠢的。

无论如何，@Jeremy B 有一个很好的解决方案，高度为：1%。这在 IE6 中对我来说很好用：

```
<div style="background-color:#ddd; padding:10px 0 50px 0; height: 1%;"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-22T15:50:54.767

这些是唯一的风格吗？如果有任何漂浮的东西，事情会很快变得复杂。请在它自己的文件中尝试这个，只有 doctype、html、head 等。上面没有任何问题，孤立地。

# video - Flash播放视频半速，音频正常速度

> ID：777910
> 
> 赞同：0
> 
> 时间：2009-04-22T15:43:56.220
> 
> 标签：video, flash

我在播放flv 的网页上有一个swf。在服务器上，它以半速播放视频，以正常速度播放音频。当我在本地机器上播放相同的 swf 时，一切都正常播放。这是页面上的目标代码：

```
<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"
codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,40,0,0"
width="640" height="480" id="myMovieName">
<param name="movie" value="/App_Flash/EdandMike2_VP6.swf" />
<param name="quality" value="high" />
<param name="bgcolor" value="#FFFFFF" />
<embed src="/App_Flash/EdandMike2_VP6.swf" quality="high" bgcolor="#FFFFFF" width="640" height="480"
name="myMovieName" align="" type="application/x-shockwave-flash"
pluginspage="http://www.macromedia.com/go/getflashplayer">
</embed>
</object> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-30T02:49:24.847

好吧，首先，播放问题实际上与您的嵌入代码没有太大关系，尽管它确实提出了您为什么要针对 FP6 的问题。如果这不是客户要求，我会使用更现代的 flashplayer 版本。

如果这是一个渐进式下载视频，我认为预加载/缓冲更多的 flv 是一个很好的解决方案。从我读过的内容来看，这似乎是渐进式 flv 的问题，所以如果你可以切换到流媒体，它可能会解决问题。我也读过flv，尤其是音频/视频同步有问题，所以如果你可以升级到支持mov、h.264和mp4的flash player 9。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-26T03:03:14.160

Sounds like a streaming issue. If you're loading the FLV externally (it's not embedded in the SWF file), make sure you've set up a network stream and a buffer time. Otherwise, the FLV may not be loading fast enough to keep up.

Adobe has an article on [playing back external FLV files dynamically](http://livedocs.adobe.com/flash/8/main/wwhelp/wwhimpl/common/html/wwhelp.htm?context=LiveDocs_Parts&file=00001569.html) that covers these topics.

You can also explicitly [preload the FLV](http://livedocs.adobe.com/flash/8/main/wwhelp/wwhimpl/common/html/wwhelp.htm?context=LiveDocs_Parts&file=00001569.html).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-01T21:53:58.910

听起来我对最初来自某人手机的视频文件有问题。将其正确编码为flv（在所有机器上同步音频+视频）的唯一工具是[ffmpegx](http://www.ffmpegx.com/)。

如果您在 windows/linux 上，您可能想查看[ffmpeg](http://www.ffmpeg.org/)或[mencoder/mplayer](http://www.ffmpeg.org/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-11-20T18:54:39.577

我有同样的问题。我将 mov 文件嵌入到 swf 和 flv 中。如果要转换的视频，您必须更改新文件的帧速率以匹配帧速率。Flash 将我的帧速率默认为 12 fps，而我的电影以 30 fps 完成，导致视频似乎以大约一半的音频速度运行。在导出电影之前更改帧速率为我完美地修复了它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-01T20:43:26.613

**尝试的可能性：**

1) 尝试使用其他 FLV 视频并检查本地和远程服务器

2) 使用现有的基于 FLV Web 的播放器播放 flv 以确保您拥有的 swf 工作正常。试试这个 flv 播放器[http://www.longtailvideo.com/players/jw-flv-player/](http://www.longtailvideo.com/players/jw-flv-player/)

在某些情况下，swf 加载 flv 有一些 Action 脚本加载问题或一些相对/绝对路径问题。试用后分享结果。

# sql-server - SQL Server 上的颠覆

> ID：777912
> 
> 赞同：3
> 
> 时间：2009-04-22T15:44:12.163
> 
> 标签：sql-server, svn

是否可以在 SQL Server 中存储 Subversion 元数据？我们想要一个基于 SQL Server 的 Subversion。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-22T15:49:09.467

反正现在也没有办法这样做。Subversion 允许您在 FSFS 和 Berkeley DB 之间进行选择，对于大多数人来说，FSFS 是更好的选择。（Berkeley DB 在腐败方面存在一些问题）。

是否有理由要将数据存储在 SQL Server 中？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-22T16:14:19.423

我和 James Avery - 为什么要将数据存储在 SQL Server 中？如果您想以某种方式与 .NET 库中的底层颠覆数据进行交互，请查看 SharpSVN：[http](http://sharpsvn.open.collab.net/) ://sharpsvn.open.collab.net/ 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-22T15:50:23.223

Subversion 曾经以 BDB（伯克利数据库）作为其核心存储。大多数人都放弃了这一点，因为它很难支持，而且腐败有时会成为一个问题。我不推荐它，但我相信您可以查看 BDB 代码并将其连接到 SQL Server。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T22:03:47.353

为什么要使用很容易损坏的后备存储？当然，您可以破坏文件系统存储，但大多数人有足够的意识不去碰它。

事实上，未来版本的 SVN 正在寻求将 revprop 数据存储在 sqlite 数据库而不是文件中。如果他们这样做，那么您应该能够以几乎相同的方式访问它，但仅限于可变的 revprops。我不确定他们是否打算限制对 svn 库的访问，以允许任何其他进程对其进行读写。

当然，SQL server 不适合 subversion 的最大原因是它会彻底破坏它的跨平台能力。

# iis - IIS 7 上的负载平衡网站

> ID：777921
> 
> 赞同：3
> 
> 时间：2009-04-22T15:45:49.897
> 
> 标签：iis, iis-7

正在研究在 IIS 上为 Windows 托管网站实现负载平衡，但想知道这样做所涉及的问题。网站是 ASP.NET - 混合了自定义身份验证和 ASP.NET 身份验证。例如：

*   文件：存储在网络共享上是显而易见的选择，但我预计它会对文件服务器提出很多要求，使网站变慢并可能导致“已达到网络 BIOS 命令限制”问题，或减慢其他数据流量
*   会话状态：最好存储在 SQL 数据库中，以防止响应来自不同服务器时出现问题？这该怎么做？我假设的 web.config 设置？
*   服务器停机时间：当服务器停机（崩溃、硬件故障等）或更新时，网站还能运行吗？
*   DNS：因为它是负载平衡的，我假设站点需要两个 IP 地址？使用微软 DNS

关于文件，它们可以在服务器之间轻松同步吗？可能有多达 8MB 的文件（有时更大）。DFS 是未来可能会考虑的一个选项，但是还有其他技术（除了 robocopy）可以使用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-23T00:26:28.957

*   文件：指向网络共享解决了一​​些问题并引入了其他问题，例如单点故障。对文件共享进行集群可以稍微缓解这种情况，但您仍然拥有数据的单个副本。我更喜欢无共享的方法，其中内容对于每个网络服务器都是本地的，在提供内容时消除了 SPOF 并从等式中删除了网络。我目前正在使用 robocopy 来执行此操作，而不是 DFS - 不喜欢 AD 配合，对分区网络基础设施中服务器放置的限制。Robocopy 也不理想。

*   会话状态 - 同意，ASPState SQL 数据库。不过，当我在考虑这个问题时，请确保在 web.config 中为所有服务器设置了一个通用机器密钥。

降低`<sessionState allowCustomSqlDatabase="true" cookieName="yourcookiname" mode="SQLServer" cookieless="false" sqlConnectionString="connnstringname" sqlCommandTimeout="10" timeout="30"/>`

和 `<connectionStrings> <add name="connstringname" connectionString="Data Source=sqlservername;Initial Catalog=DTLAspState;Persist Security Info=True;User ID=userid;Password=password" providerName="System.Data.SqlClient"/> </connectionStrings>`

进入 web.config。最后，运行 C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_regsql.exe -S sqlservername -E -ssadd -sstype p

*   服务器停机时间 - 当单个服务器停机时，网站仍然可以运行。当然，这取决于您的网络服务器 - 确保它没有使用“ping”作为唯一指标来确定它是否应该向该网络服务器发送请求。
*   DNS - 单一条目。遗憾的是 HTTP 不支持 SRV 记录。

# c# - 不能在静态类中将锁定对象设为私有 - 为什么？

> ID：777923
> 
> 赞同：0
> 
> 时间：2009-04-22T15:46:00.177
> 
> 标签：c#

在静态类中，我有一个可以编辑变量的方法。该类是静态的，因为该类是关于站点详细信息的，因此只需要一个实例。

无论如何，需要线程同步。我有一个锁对象，但是当我将它设为私有并说 lock (obj){} 时，我得到了各种各样的错误。

为什么不能将锁对象设为私有？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-22T15:48:56.660

一个想法，你是否静态地初始化对象。尝试声明：

```
private static object lockObject = new object(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-22T15:48:41.607

它应该工作。您是否将其声明为`private static`？

```
private static readonly object lockObject = new object();

public static void Method() {
    lock(lockObject) { 
         // ...
    }
} 
```

# python - 除了基本的 Python 语法之外，我还应该学习哪些其他关键领域才能让网站上线？

> ID：777924
> 
> 赞同：0
> 
> 时间：2009-04-22T15:46:24.887
> 
> 标签：python

除了基本的 Python 语法之外，我还应该学习哪些其他关键领域才能让网站上线？

python 世界中有 web.config 吗？

哪些库处理诸如身份验证之类的事情？还是所有这些都是通过会话 cookie 和数据库表手动完成的？

是否有任何特定于 Web 的库？

**编辑：对不起！** 我精通asp.net，我想扩展并学习Python，因此提出了这个问题（对不起，我知道这个问题的开头很糟糕）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-22T15:51:59.240

基本的 Python 语法并不是您需要了解的一半。

1.  所有 Python 内置数据结构。

2.  面向对象的设计。

3.  python模块和包是什么。

4.  Python 库——几乎所有你想要的东西都已经写好了。

仅举几例。

如果您做过一些 Web 开发，您可能对 HTTP 协议、HTML、.CSS 以及 Javascript 和 SQL 有一定的了解。

您应该使用一个框架来处理无休止的平凡细节集合，例如身份验证。看看[姜戈](http://www.djangoproject.com/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-22T15:54:25.023

*已替换答案以与更新的问题相对应。*

如果您已经熟悉 ASP.NET，那么开始使用 Python 创建网站的最简单方法可能是研究主要的 Web 框架之一。[Django](http://www.djangoproject.com/)非常受欢迎，通过[安装指南](http://docs.djangoproject.com/en/dev/intro/install/)和[教程](http://docs.djangoproject.com/en/dev/intro/tutorial01/)可能会让您顺利进行。

但实际上，我个人建议至少先将语言本身学习到基本的能力水平，然后再尝试直接在 Web 框架中使用它。我认为你会试图强迫自己一次学习太多。仅就学习 Python 而言，免费书籍[Dive Into Python](http://www.diveintopython.net/)总是被高度评价。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-22T16:24:58.833

不要忘记尝试[IronPython](http://www.codeplex.com/IronPython) - 您的`.NET`经验可以帮助理解新学的`Python`习语。

> IronPython 是在 .NET 和 Silverlight 下运行的 Python 编程语言的实现。它支持具有完全动态编译的交互式控制台。它与 .NET Framework 的其余部分很好地集成，使 Python 程序员可以轻松使用所有 .NET 库，同时保持与 Python 语言的兼容性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-22T19:31:53.067

当然是内置的。并熟悉标准库（在您开始记住其中的内容之前，我建议您在要实现某些东西时随时查看它......它可能已经存在了！）

你需要某种框架，我推荐 Django 或 TurboGears

但是您还需要学习pythonic方式。为此，打开 Python 解释器并输入：

```
import this 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-22T15:52:07.150

哦，天哪。

看，这真的很难回答，因为在你写它的时候阅读，你错过了*很多*步骤。比如，您需要一个 Web 服务器、一个设计、一些 HTML 等等。

你是从头开始建设吗？询问 Python 让我怀疑您可能使用的是 Zope 之类的东西。

# xslt - 如何在 XSLT 中应用字母数字排序

> ID：777930
> 
> 赞同：2
> 
> 时间：2009-04-22T15:47:34.930
> 
> 标签：xslt, sorting, alphanumeric

基于以下 XML，在 XSL 中实现字母数字排序的最佳方法是什么？

***编辑****：澄清一下，下面的 XML 只是一个简单的示例，真正的 XML 将包含更多的变体值。*

```
<colors>
  <item>
    <label>Yellow 100</label>
  </item>
  <item>
    <label>Blue 12</label>
  </item>
  <item>
    <label>Orange 3</label>
  </item>
  <item>
    <label>Yellow 10</label>
  </item>
  <item>
    <label>Orange 26</label>
  </item>
  <item>
    <label>Blue 117</label>
  </item>
</colors> 
```

例如，我希望按以下顺序获得最终结果：

```
Blue 12, Blue 117, Orange 3, Orange 26, Yellow 10, Yellow 100 
```

这是“*有效地*”我想要的。

```
<xsl:apply-templates select="colors/item">
  <xsl:sort select="label" data-type="text" order="ascending"/><!--1st sort-->
  <xsl:sort select="label" data-type="number" order="ascending"/><!--2nd sort-->
</xsl:apply-templates>   

<xsl:template match="item">
  <xsl:value-of select="label"/>
  <xsl:if test="position() != last()">,</xsl:if>
</xsl:template> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-22T16:04:56.933

`substring-before`在您的示例中使用and将标签文本拆分为文本和数字部分`substring-after`（但是，这不是一般方法，但您明白了）：

```
<xsl:template match="/">
    <xsl:apply-templates select="colors/item">
      <xsl:sort select="substring-before(label, ' ')" data-type="text" order="ascending"/>
      <!--1st sort-->
      <xsl:sort select="substring-after(label, ' ')" data-type="number" order="ascending"/>
      <!--2nd sort-->
    </xsl:apply-templates>
  </xsl:template>

  <xsl:template match="item">
    <xsl:value-of select="label"/>
    <xsl:if test="position() != last()">, </xsl:if>
  </xsl:template> 
```

这给出了以下输出：

```
Blue 12, Blue 117, Orange 3, Orange 26, Yellow 10, Yellow 100 
```

* * *

**更新**

解决排序问题的一种更通用的方法是让元素的`select`属性`xls:sort`包含一个字符串，该字符串可根据您期望的排序规则进行排序。例如，在这个字符串中，所有数字都可以用前导 0 填充，以便按字典顺序对它们进行排序，`data-type="text"`从而得到正确的字母数字顺序。

如果您使用的是 .NET 的 XSLT 引擎，您可以在 C# 中使用一个简单的扩展函数来用前导 0 填充数字：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0"
                xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:myExt="urn:myExtension"
                xmlns:msxsl="urn:schemas-microsoft-com:xslt"
                exclude-result-prefixes="msxsl myExt">
  <xsl:output method="xml" indent="yes" />

  <msxsl:script language="C#" implements-prefix="myExt">

    <![CDATA[
        private static string PadMatch(Match match)
        {
            // pad numbers with zeros to a maximum length of the largest int value 
            int maxLength = int.MaxValue.ToString().Length;
            return match.Value.PadLeft(maxLength, '0');
        }

        public string padNumbers(string text)
        {
            return System.Text.RegularExpressions.Regex.Replace(text, "[0-9]+", new System.Text.RegularExpressions.MatchEvaluator(PadMatch));
        }
    ]]>

  </msxsl:script>
  <xsl:template match="/">
    <sorted>
      <xsl:apply-templates select="colors/item">
        <xsl:sort select="myExt:padNumbers(label)" data-type="text" order="ascending"/>
      </xsl:apply-templates>
    </sorted>
  </xsl:template>

  <xsl:template match="item">
    <xsl:value-of select="label"/>
    <xsl:if test="position() != last()">, </xsl:if>
  </xsl:template>

</xsl:stylesheet> 
```

# asp.net - 以编程方式设置自定义 404 错误页面

> ID：777940
> 
> 赞同：1
> 
> 时间：2009-04-22T15:49:57.063
> 
> 标签：asp.net, configuration, error-handling, web-config

在常规 ASP.NET 应用程序中，您可能有一个 customErrors 部分，如下所示：

```
<customErrors mode="On">
  <error statusCode="404" redirect="Nice-FileNotFound-Page.aspx"/>
</customErrors> 
```

是否可以在 Application_Start 以编程方式设置 404 错误？类似于以下内容：

```
// Figure out which page should be used... using some logic somewhere in the application
// (obviously) Pseudo-code: Application.ErrorCode.404.Page = Page-Found-Above 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-22T15:53:35.697

您可以将该逻辑放入 Nice-FileNotFound-Page.aspx 并使用您需要的任何业务逻辑从那里重定向到适当的页面。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-04-22T15:54:05.210

这不是特定于 asp 的，但只要“Nice-FileNotFound-Page.aspx”是一个动态脚本，你就不能让它成为你想要的任何东西吗？也就是说，让它以编程方式根据逻辑计算出它应该是什么样的页面，然后是那个页面？

# c# - 在 c# webservice 客户端中指定故障转移服务器

> ID：777942
> 
> 赞同：0
> 
> 时间：2009-04-22T15:50:11.540
> 
> 标签：c#, dns, failover, webservice-client, mission-critical

我需要在 Web 服务客户端应用程序中建立一些弹性。标准 dot.net Web 服务生成客户端（经典或 3.0）是否支持这两种方案？

*   指定服务器地址列表，以便客户端可以在一台服务器出现故障时自动回退。

*   配置客户端，使其查找 DNS 服务记录而不是标准主机，并按优先级使用主机列表，跟踪哪些主机已启动。

负载平衡服务器或通过代理并不能解决我的问题，这与地理弹性有关。

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-22T17:26:12.777

我们通常构建自己的层；我不认为默认生成的客户端代码会做这样的事情。

更常见的是，我们定义一个自定义 configSection，然后在该部分中添加一堆键/值对。然后，我们为每个请求循环遍历该列表。

# c# - 如何将“~/default.aspx”转换为“http://www.website.com/default.aspx”C#？

> ID：777944
> 
> 赞同：5
> 
> 时间：2009-04-22T15:50:47.327
> 
> 标签：c#, methods

我知道 ASP.NET 会自动执行此操作，但由于某种原因，我似乎找不到该方法。

帮助任何人？正如标题所说。

如果我执行 Response.Redirect("~/Default.aspx")，它可以工作，但我不想重定向站点。我只想要完整的网址。

谁能帮我吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-22T15:54:56.177

对于“/#{path}/Default.aspx”部分，使用：

```
Page.ResolveUrl("~/Default.aspx") 
```

如果您需要更多：

```
Request.Url.Scheme + "://" + Request.Url.Host + ":" + Request.Url.Port 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-22T15:52:08.103

在 web 控件中，方法是`ResolveUrl("~/Default.aspx")`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-22T15:52:34.903

看看[VirtualPathUtility](http://msdn.microsoft.com/en-us/library/system.web.virtualpathutility.aspx)类。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-22T15:56:06.330

至少有三种方法可以做到这一点。我[问](https://stackoverflow.com/questions/518199/control-resolveurl-versus-control-resolveclienturl-versus-virtualpathutility-toab)有没有区别，但我没有得到任何答案。

1.  Control.ResolveUrl
2.  Control.ResolveClientUrl
3.  VirtualPathUtility.ToAbsolute

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-22T16:04:36.747

这是我使用的：

```
Response.Redirect(Response.ApplyAppPathModifier("~/default.aspx")) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-09-04T19:24:58.223

这是一篇文章，解释了在 ASP.NET 中解析路径的各种方法之间的区别 -

[在 ASP.NET 中解析 URL 的不同方法](http://refactoringaspnet.blogspot.com/2009/09/different-approaches-for-resolving-urls.html)

# java - spring MVC sample web app

> ID：777946
> 
> 赞同：19
> 
> 时间：2009-04-22T15:51:11.397
> 
> 标签：java, spring-mvc, spring, sample

I'm looking for an example Spring MVC 2.5 web app that I can easily:

*   Setup as a project in Eclipse
*   Deploy to a local app server (using Ant/Maven)

There are a couple of example applications included with the Spring distribution ('petclinic' and 'jpetstore'), but they don't provide any Eclipse project files (or a way to generate them). They also seem a bit complicated for my needs, e.g. require a local database to be setup.

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2010-03-15T02:48:20.103

The easiest way to get up and running with a Spring MVC project is to use [SpringSource Tool Suite](http://www.springsource.com/products/springsource-tool-suite-download), which is another free IDE based on Eclipse.

The integration between the IDE and Spring/Maven is tight, and it comes with an application server already setup for you to deploy your web app.

Follow these steps to get a working Spring MVC web app.

1.  To setup a new project in STS: Click File -> New -> Spring Template Project -> Spring MVC Project
2.  To pull in dependencies and compile your project: Right click your new project -> Run As -> Maven install
3.  To run your project inside an application server: Right click your new project -> Run As -> Run on Server -> SpringSource tc Server

If it works, you'll see a web page saying "Congratulations! You're running Spring!"

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-04-22T16:04:51.223

While not specifically an app you can download, [Developing a Spring Framework MVC application step-by-step](http://static.springframework.org/docs/Spring-MVC-step-by-step/) covers creating a spring application in Eclipse with an ant build script, complete with unit tests.

This meets the following requirements:

*   Spring MVC 2.5
*   Project in Eclipse
*   Deploy to a local app server using Ant
*   Uses HSQL (no need to install a local DB)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-22T16:13:59.360

There's a Maven archetype (template project structure) for Spring MVC here:

[http://docs.codehaus.org/display/MAVENUSER/Archetypes+List](http://docs.codehaus.org/display/MAVENUSER/Archetypes+List)

That's a good starting place for this kind of investigation. To create an archetype using Maven, first install Maven:

[http://maven.apache.org/plugins/maven-install-plugin/](http://maven.apache.org/plugins/maven-install-plugin/)

and then create a project using the archetype:

[http://maven.apache.org/guides/introduction/introduction-to-archetypes.html](http://maven.apache.org/guides/introduction/introduction-to-archetypes.html)

You can also use the m2eclipse plugin for Eclipse to simplify this and it takes you through the stages of the project using a wizard. Just right click -> New Project -> Other, Maven and select the archetype. Hope that helps.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2010-07-26T08:32:22.183

Just spotted [http://blog.springsource.com/2010/07/22/spring-mvc-3-showcase/](http://blog.springsource.com/2010/07/22/spring-mvc-3-showcase/) which could be interessting for you.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2010-07-25T23:22:52.983

To generate Eclipse project files: Use mvn eclipse:eclipse before importing the project into your workspace. This will create all required configuration files and hook your project up with all the required dependencies.

The mvc-basic and mvc-ajax sample projects in spring-samples (SVN URL: [https://src.springframework.org/svn/spring-samples](https://src.springframework.org/svn/spring-samples)) are simple projects that do not need any local database support.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-22T16:06:00.940

Use AppFuse

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2010-04-23T20:26:55.370

I got it working just as Drew described, but there is a trap for new users (meaning fresh install, no familiarity with Maven or m2eclipse). You'll get this error:

```
[ERROR] Error executing Maven.
[ERROR] The specified user settings file does not exist: /home/user/.m2/settings.xml 
```

And the work around is to just make an *almost* empty settings.xml:

```
<settings xmlns="http://maven.apache.org/SETTINGS/1.0.0"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0
http://maven.apache.org/xsd/settings-1.0.0.xsd">
</settings> 
```

(I later found [this bug report](https://issues.sonatype.org/browse/MNGECLIPSE-1882?page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#issue-tabs).) After that, I was in business. I was even able to export as a WAR file and deploy onto my installation of WebSphere Community Edition. Thank you, Drew!

* * *

A little less earlier, I wrote:

Hmph. Never mind. I gave up, shut down my machine, and when I came back, everything worked (except for a minor Maven issue I'm working on). Chalk it up to a bug.

* * *

Earlier, I wrote:

I was very excited to hear about STS, so I downloaded and installed it. It went perfectly. This is a new machine, so I have the latest of everything - java 1.6, eclipse 3.5.1, etc.

On step 2 of the above instructions, I get this error: "The specified JRE installation does not exist"

I've set paths everywhere I can find, so I'm not sure which JRE it's complaining about. Help?

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2010-06-17T05:50:59.840

You could also use Spring Roo to do this. [http://www.springsource.org/roo](http://www.springsource.org/roo)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-07-28T18:12:57.023

You can use below link to download hello world spring mvc project

[Spring MVC hello world example](https://github.com/chirag20388/springbasic)

# java - 使用 ImageIO 创建动画 GIF？

> ID：777947
> 
> 赞同：23
> 
> 时间：2009-04-22T15:51:23.080
> 
> 标签：java, animated-gif, javax.imageio

有没有人设法说服 ImageIO 编写动画 GIF，特别是设置正确的元数据？我的第一次尝试大致如下（其中 b1 和 b2 是 BufferedImages）：

```
ImageTypeSpecifier spec = new ImageTypeSpecifier(b1);
ImageWriter wr = ImageIO.getImageWriters(spec, "GIF").next();
wr.setOutput(ImageIO.createImageOutputStream(new File("C:\\Flashing.gif")));
ImageWriteParam param = wr.getDefaultWriteParam();
IIOMetadata meta = wr.getDefaultImageMetadata(spec, param);
wr.prepareWriteSequence(meta);
wr.writeToSequence(new IIOImage(b1, null, null), param);
wr.writeToSequence(new IIOImage(b2, null, null), param); 
```

这似乎几乎可以工作，但是：

*   我显然需要以某种方式设置“正确”元数据来设置图像之间的时间并理想地使它们循环（我天真地希望默认值会做一些明智的事情，但是嘿......）
*   它默认写入的任何元数据显然都不太正确：GIMP 在加载文件时会给出一些错误消息，尽管将图像嵌入到 Firefox 的测试网页中确实会很快连续显示这两个图像，这很诱人接近我想要的...

如果有人从 ImageIO 编写动画 GIF 并可以分享一段工作代码或如何解决上述问题，将不胜感激！

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2009-04-25T21:05:02.853

我遇到了这个问题，并决定尝试一下；[创建一个可用的类（感谢ax](https://stackoverflow.com/users/68939/ax) ）花费了少量但不平凡的量——所以我想我可以分享一下代码： [这里](http://elliot.kroo.net/software/java/GifSequenceWriter/)是一个用于从许多其他图像创建动画 gif 图像的小类。[存档版本](https://web.archive.org/web/20190114060546/elliot.kroo.net/software/java/GifSequenceWriter/)

# git - 我可以让 git 将 UTF-16 文件识别为文本吗？

> ID：777949
> 
> 赞同：157
> 
> 时间：2009-04-22T15:51:32.283
> 
> 标签：git, unicode, character-encoding, diff, utf-16

我在 git 中跟踪一个 Virtual PC 虚拟机文件 (*.vmc)，在进行更改后，git 将该文件识别为二进制文件并且不会为我区分它。我发现该文件是用 UTF-16 编码的。

可以教 git 识别这个文件是文本并适当地处理它吗？

我在 Cygwin 下使用 git，core.autocrlf 设置为 false。如有必要，我可以在 UNIX 下使用 mSysGit 或 git。

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2009-08-19T15:55:47.223

我已经为这个问题苦苦挣扎了一段时间，刚刚发现（对我来说）一个完美的解决方案：

```
$ git config --global diff.tool vimdiff      # or merge.tool to get merging too!
$ git difftool commit1 commit2 
```

`git difftool`采用相同的参数`git diff`，但运行您选择的差异程序而不是内置的 GNU `diff`。所以选择一个多字节感知差异（在我的例子中，`vim`在差异模式下）并使用`git difftool`而不是`git diff`.

发现“difftool”太长而无法输入？没问题：

```
$ git config --global alias.dt difftool
$ git dt commit1 commit2 
```

吉特摇滚。

* * *

## 回答 #2

> 赞同：73
> 
> 时间：2014-01-09T12:42:45.740

有一个非常简单的解决方案可以在 Unices 上开箱即用。

例如，使用 Apple 的`.strings`文件：

1.  `.gitattributes`在存储库的根目录中创建一个文件：

    ```
     *.strings diff=localizablestrings 
    ```

2.  将以下内容添加到您的`~/.gitconfig`文件中：

    ```
     [diff "localizablestrings"]
     textconv = "iconv -f utf-16 -t utf-8" 
    ```

**来源**：[Git 中的 Diff .strings 文件](http://blog.xk72.com/post/31456986659/diff-strings-files-in-git)（以及2010 年[的旧帖子](http://web.archive.org/web/20120127033149/http://www.entropy.ch/blog/Developer/2010/04/15/Git-diff-for-Localizable-strings-Files.html)）。

* * *

## 回答 #3

> 赞同：43
> 
> 时间：2009-04-22T16:42:22.537

您是否尝试过将其设置`.gitattributes`为将其视为文本文件？

例如：

```
*.vmc diff 
```

更多详细信息，[请访问 http://www.git-scm.com/docs/gitattributes.html](http://www.git-scm.com/docs/gitattributes.html)。

* * *

## 回答 #4

> 赞同：32
> 
> 时间：2009-04-22T16:40:54.583

默认情况下，它看起来`git`不适用于 UTF-16；对于这样的文件，您必须确保未对其进行任何`CRLF`处理，但您希望`diff`并`merge`作为普通文本文件工作（这忽略了您的终端/编辑器是否可以处理 UTF-16）。

但是查看[`.gitattributes`手册页](http://git-scm.com/docs/gitattributes)，这是自定义属性`binary`：

```
[attr]binary -diff -crlf 
```

所以在我看来，您可以在顶层定义一个自定义属性（`.gitattributes`请`utf16`注意，我在此处添加合并以确保将其视为文本）：

```
[attr]utf16 diff merge -crlf 
```

从那里您可以在任何`.gitattributes`文件中指定如下内容：

```
*.vmc utf16 
```

另请注意，您仍然应该能够访问[`diff`](http://git-scm.com/docs/git-diff)文件，即使`git`认为它是二进制文件：

```
git diff --text 
```

**编辑**

[这个答案](https://stackoverflow.com/questions/778291/how-do-i-diff-utf-16-files-with-gnu-diff/778315#778315)基本上说带有 UTF-16 甚至 UTF-8 的 GNU diff 不能很好地工作。如果您想`git`使用不同的工具来查看差异（通过`--ext-diff`），该答案建议[使用 Guiffy](http://www.guiffy.com/Diff-Tool.html)。

但是您可能需要的只是`diff`一个仅包含 ASCII 字符的 UTF-16 文件。使其工作的一种方法是使用`--ext-diff`以下 shell 脚本：

```
#!/bin/bash
diff <(iconv -f utf-16 -t utf-8 "$1") <(iconv -f utf-16 -t utf-8 "$2") 
```

请注意，转换为 UTF-8 也可能适用于合并，您只需确保它在两个方向上都完成。

至于查看 UTF-16 文件的差异时到终端的输出：

> 尝试像这样区分会导致二进制垃圾喷到屏幕上。如果 git 使用的是 GNU diff，那么 GNU diff 似乎不支持 unicode。

GNU diff 并不真正关心 unicode，因此当您使用 diff --text 时，它只是区分并输出文本。问题是您使用的终端无法处理发出的 UTF-16（结合 ASCII 字符的差异标记）。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2019-02-14T05:02:18.513

git 最近开始理解 utf16 等编码。查看[gitattributes](https://git-scm.com/docs/gitattributes)文档，搜索`working-tree-encoding`

[确保您的手册页匹配，因为这是相当新的！]

如果（比如说）文件是 UTF-16，在 Windows 机器上没有 BOM，那么添加到您的`.gitattributes`文件中

```
*.vmc text working-tree-encoding=UTF-16LE eol=CRLF 
```

如果 *nix 上的 UTF-16（带 bom）使它：

```
*.vmc text working-tree-encoding=UTF-16-BOM eol=LF 
```

（替换为您需要处理的类型文件`*.vmc`）`*.whatever``whatever`

请参阅：[支持工作树编码“UTF-16LE-BOM”](https://github.com/git/git/commit/aab2a1ae48ff65781a5379a01a4abb4f75e5641d)。

* * *

# 稍后添加

关注@Hackslash，可能会发现这还不够

```
 *.vmc text working-tree... 
```

要获得漂亮的文本差异，您需要

```
 *.vmc diff working-tree... 
```

把这*两个*作品以及

```
 *.vmc text diff working-tree... 
```

但可以说是

*   冗余——`eol=...`意味着`text`
*   冗长——一个大型项目很容易有几十种不同的文本文件类型

## 问题

Git 有一个*宏属性* `binary`，意思是`-text -diff`. 相反`+text +diff`的内置不可用，但 git 提供了用于合成它的工具（我认为！）

## 解决方案

Git 允许定义新的宏属性。

我建议`.gitattributes`你拥有的文件的顶部

```
 [attr]textfile text diff 
```

然后对于需要是文本和差异的所有路径

```
 path textfile working-tree-encoding= eol=... 
```

请注意，在大多数情况下，我们需要默认编码（utf-8）和默认 eol（本机），因此*可能会被删除。*

大多数线条应该看起来像

```
*.c textfile
*.py textfile
Etc 
```

### 为什么不只使用差异？

实用：在大多数情况下，我们需要原生 eol。这意味着没有`eol=...`。所以`text`不会被暗示，需要明确说明。

概念：文本与二进制是根本区别。eol，编码，差异等只是它的一些方面。

### 免责声明

由于我们生活在一个奇怪的时代，我没有一台带有当前工作 git 的机器。所以我目前无法检查最新添加的内容。如果有人发现有问题，我会修改/删除。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2009-07-09T03:48:46.320

解决办法是过滤掉`cmd.exe /c "type %1"`。cmd 的`type`内置函数将进行转换，因此您可以将其与 git diff 的 textconv 功能一起使用，以启用 UTF-16 文件的文本差异（也应与 UTF-8 一起使用，尽管未经测试）。

引用 gitattributes 手册页：

* * *

## 执行二进制文件的文本差异

有时希望查看某些二进制文件的文本转换版本的差异。例如，可以将文字处理器文档转换为 ASCII 文本表示，并显示文本的差异。尽管这种转换会丢失一些信息，但生成的差异对于人类查看很有用（但不能直接应用）。

textconv 配置选项用于定义执行此类转换的程序。该程序应采用单个参数，即要转换的文件的名称，并在标准输出上生成结果文本。

例如，要显示文件的 exif 信息而不是二进制信息的差异（假设您安装了 exif 工具），请将以下部分添加到您的`$GIT_DIR/config`文件（或`$HOME/.gitconfig`文件）中：

```
[diff "jpg"]
        textconv = exif 
```

* * *

**mingw32 的解决方案**，cygwin 粉丝可能不得不改变方法。问题在于传递文件名以转换为 cmd.exe - 它将使用正斜杠，并且 cmd 假定反斜杠目录分隔符。

## 步骤1：

创建将转换为标准输出的单参数脚本。c:\path\to\some\script.sh:

```
#!/bin/bash
SED='s/\//\\\\\\\\/g'
FILE=\`echo $1 | sed -e "$SED"\`
cmd.exe /c "type $FILE" 
```

## 第2步：

设置 git 以便能够使用脚本文件。在你的 git config ( `~/.gitconfig`or `.git/config`or see `man git-config`) 中，输入：

```
[diff "cmdtype"]
textconv = c:/path/to/some/script.sh 
```

## 第 3 步：

通过使用 .gitattributes 文件指出要应用此工作的文件（请参阅 man gitattributes(5)）：

```
*vmc diff=cmdtype 
```

然后`git diff`在您的文件上使用。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2013-04-02T08:37:01.467

我编写了一个小的 git-diff 驱动程序，`to-utf8`它应该可以轻松区分任何非 ASCII/UTF-8 编码的文件。您可以使用此处的说明安装它：[https](https://github.com/chaitanyagupta/gitutils#to-utf8) ://github.com/chaitanyagupta/gitutils#to-utf8 （该`to-utf8`脚本在同一个仓库中可用）。

请注意，此脚本要求系统上同时提供`file`和`iconv`命令。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2018-07-24T15:46:20.727

最近在 Windows 上遇到了这个问题，而 git for windows 附带的`dos2unix`and `unix2dos`bins 解决了这个问题。默认情况下，它们位于`C:\Program Files\Git\usr\bin\`. **请注意，这仅在您的文件*不需要*是 UTF-16 时才有效。**例如，有人在不需要时（在我的情况下）意外地将 python 文件编码为 UTF-16。

```
PS C:\Users\xxx> dos2unix my_file.py
dos2unix: converting UTF-16LE file my_file.py to ANSI_X3.4-1968 Unix format... 
```

和

```
PS C:\Users\xxx> unix2dos my_file.py
unix2dos: converting UTF-16LE file my_file.py to ANSI_X3.4-1968 DOS format... 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-03-29T14:51:59.527

如其他答案中所述，git diff 不会将 UTF-16 文件作为文本处理，这使得它们在 Atlassian SourceTree 中不可见。如果文件名/或后缀已知，则以下修复将使这些文件在 SourceTree 下正常可见和可比较。

如果 UTF-16 文件的文件后缀是已知的（例如 *.uni），那么所有具有该后缀的文件都可以与 UTF-16 到 UTF-8 转换器相关联，并进行以下两个更改：

1.  使用以下行在存储库的根目录中创建或修改 .gitattributes 文件：

    ```
     *.uni diff=utf16 
    ```

2.  然后使用以下部分修改用户主目录 (C:\Users\yourusername\.gitconfig) 中的 .gitconfig 文件：

    ```
    [diff=utf16]
        textconv = "iconv -f utf-16 -t utf-8" 
    ```

这两项更改应立即生效，无需将存储库重新加载到 SourceTree。它将文本转换应用于所有 *.uni 文件，使它们像其他文本文件一样可查看和可比较。如果其他文件需要这种转换，您可以在 .gitattributes 文件中添加额外的行。（如果指定的文件不是 UTF-16，您将获得该文件的不可读结果。）

请注意，此答案是对 Tony Kuneck 答案的简化重写。

# c# - c#非线性渐变画笔？

> ID：777950
> 
> 赞同：2
> 
> 时间：2009-04-22T15:51:44.843
> 
> 标签：c#, gdi+

有没有一种方法可以用来在 c# 中生成非线性渐变画笔？

澄清一下：我不是在寻找可以应用于非线性路径的渐变。相反，我正在寻找两种颜色之间的渐变，这种渐变在两种颜色之间以非线性方式淡化，即变化的速度在渐变开始时更快，并且随着画笔接近终点而减慢。

这在使用 gdi+ 的 c# 中是否可能实现？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-22T15:59:37.570

是的，为画笔设置混合。

```
LinearGradientBrush blendBrush = new LinearGradientBrush(Rectangle, Color.Red, Color.White, 360f);
Blend blend = new Blend();
blend .Factors = new float[] { 1.0f, 0.9f, 0.8f, 0.7f, 0.6f, 0.5f, 0.4f, 0.5f, 0.6f, 0.7f, 0.8f };
blend .Positions = new float[] { 0, 0.1f, 0.2f, 0.3f, 0.4f, 0.5f, 0.6f, 0.7f, 0.8f, 0.9f, 1.0f };
blendBrush.Blend = blend ; 
```

这个例子将开始淡出，然后回到以前的颜色。所以有点从中心效果填充。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-22T16:03:43.723

使用 LinearGradientBrush 的 Blend 属性 -

[http://msdn.microsoft.com/en-us/library/system.drawing.drawing2d.blend(VS.80).aspx](http://msdn.microsoft.com/en-us/library/system.drawing.drawing2d.blend(VS.80).aspx)

# c# - 如何使用 Ado.NET Entity 在 ASP.NET MVC 中实现 Development 和 ProductionDatabase？

> ID：777973
> 
> 赞同：0
> 
> 时间：2009-04-22T15:58:57.540
> 
> 标签：c#, asp.net-mvc, database, ado.net

我已经将 Ruby on Rails 与 ActiveRecord 一起使用，因此我非常习惯于切换到生产/开发数据库。

我想知道，人们如何在 ASP.NET MVC 中实现开发和生产数据库的差异（最好使用 ado.net 实体）。

我试图通过在不同的命名空间中创建 2 个具有相同名称的实体数据集来获得它，所以我只需要在我的数据库代码中切换使用的命名空间。不幸的是，这不起作用，因为实体数据集不允许使用相同的名称......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-22T16:11:41.300

我这样做的方式（使用 Web 应用程序）是为开发 (web.config)、QA (web-qa.config) 和生产 (web-prod.config) 中的每一个设置单独版本的 Web.config 文件安装。配置文件有不同的连接字符串指向相应的数据库实例。默认连接字符串指向我的本地计算机上的 SQL 服务器实例，该实例对网络不可用。

作为发布步骤的一部分，我手动删除了 web.config 文件并将相应的 QA/Prod 配置重命名为 web.config。这会将应用程序的实例连接到正确的数据库实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-22T16:02:09.733

最简单的方法（尽管它仍然不像在 Rails 中那么容易）是将连接字符串包含到[App.config](http://msdn.microsoft.com/en-us/library/aa903313(VS.71).aspx)中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-23T08:05:28.793

您应该有一个实体数据集，并使用带有 ConnectionString 的构造函数来实例化实体对象，您可以从以下位置读取：

```
WebConfigurationManager.ConnectionStrings["ConnStrName"].ConnectionString; 
```

[ConnectionStrings](http://msdn.microsoft.com/en-us/library/bf7sd233.aspx)元素还支持通用[configSource](http://msdn.microsoft.com/en-us/library/system.configuration.sectioninformation.configsource.aspx)属性。

因此，您可以拥有类似的东西：

```
<connectionStrings configSource="PathToConnectionStrings.config" /> 
```

这允许您将所有连接字符串保存在单独的文件中，然后在每个环境中可以具有不同的值。

请注意，与[appSettings 文件](http://msdn.microsoft.com/en-us/library/ms228154.aspx)属性不同，这不会进行合并，它会完全替换该部分。

请注意，在 VS2010 中，您可以根据构建配置修改 .config，因此只需将构建设置为“生产”即可更改值。

# php - 如何将来自互联网的图像 url 放入 tcpdf 文件中？

> ID：777974
> 
> 赞同：0
> 
> 时间：2009-04-22T15:59:06.090
> 
> 标签：php, pdf-generation, tcpdf

嗨，我想将图像放入我正在使用 TCPDF 制作的 PDF 文件中。它是由在线 API 生成的图像，因此我无法将其存储在我的虚拟主机上。但是，当我放置用于创建的图像 URL 时，在生成 PDF 文件时出现错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-09-10T17:34:16.853

TCPDF 只能使用保存在您的网络主机上的图像 - 本地文件，因为它需要图像的物理路径才能将其包含在文档中。您可以从 HTTP 抓取图像以用于 TCPDF 的唯一方法是使用 cURL，这是我仅用于文本和 html 的东西，但没有抓取图像的经验，但我确信有办法可以做到。

# c# - 为什么模拟进程返回“目录名无效”？

> ID：777976
> 
> 赞同：6
> 
> 时间：2009-04-22T15:59:33.000
> 
> 标签：c#, winforms

我有一个需要在管理权限下运行的进程。我需要普通的 joe 来运行该过程，但我不想让每个人都可以访问......所以我创建了一个简单的类，它将以管理员身份运行这个 ONE 任务，使用模拟。

代码非常简单，但我不明白为什么会崩溃。帮助？？！！

我通过批处理文件运行它，我什至将需要执行的文件复制到本地硬盘驱动器，认为这可能是通过网络运行应用程序的权限问题。

 `````
 public static Process ImpersonateProcess(string exe, string args, string Username, string Password)
    {
        ProcessStartInfo psi = new ProcessStartInfo(exe);
        psi.Arguments = args;
        psi.UseShellExecute = false;
        psi.UserName = Username;

        psi.Password = new SecureString();

        foreach (char c in Password.ToCharArray())
        {
            psi.Password.AppendChar(c);
        }

        Process proc = null;

        Console.WriteLine("starting...");
        proc = Process.Start(psi);
        Console.WriteLine("started");

        return proc;
    } 
````  `在上面的代码中，我从来没有“开始”。它在 Process.Start(psi) 中引发错误，并显示“目录名称无效”的错误消息。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-04-22T16:09:45.703

这可能是因为您没有设置[WorkingDirectory](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.workingdirectory.aspx)属性。根据文档：

> **重要的提示：**
> 
> 如果提供了 UserName 和 Password，则必须设置 WorkingDirectory 属性。如果未设置该属性，则默认工作目录为 %SYSTEMROOT%\system32。

# java - 为什么这个 Java 正则表达式不起作用？

> ID：777980
> 
> 赞同：2
> 
> 时间：2009-04-22T16:00:10.983
> 
> 标签：java, regex, regexbuddy

我需要创建一个允许字符串包含任意数量的正则表达式：

*   字母数字字符
*   空间
*   (
*   )
*   &
*   .

不允许使用其他字符。我使用[RegexBuddy](http://www.regexbuddy.com/)构建了以下正则表达式，当我在 RegexBuddy 中对其进行测试时，它可以正常工作：

```
\w* *\(*\)*&*\.* 
```

然后我使用 RegexBuddy 的“使用”功能将其转换为 Java 代码，但使用简单的测试程序似乎无法正常工作：

```
public class RegexTest
{
  public static void main(String[] args)
  {
    String test = "(AT) & (T)."; // Should be valid
    System.out.println("Test string matches: "
      + test.matches("\\w* *\\(*\\)*&*\\.*")); // Outputs false
  }
} 
```

*   我必须承认，在正则表达式方面我有点盲点。谁能解释为什么它不起作用？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-04-22T16:03:13.100

该正则表达式测试任意数量的空格，然后是任意数量的字母数字字符，然后是任意数量的左括号，然后是任意数量的右括号，然后是任意数量的＆符号，然后是任意数量的句点。

你想要的是...

```
test.matches("[\\w \\(\\)&\\.]*") 
```

正如 mmyers 所提到的，这允许空字符串。如果您不想允许空字符串...

```
test.matches("[\\w \\(\\)&\\.]+") 
```

虽然这也将允许一个只有空格或只有句点等的字符串。如果你想确保至少有一个字母数字字符......

```
test.matches("[\\w \\(\\)&\\.]*\\w+[\\w \\(\\)&\\.]*") 
```

所以你明白正则表达式在说什么......方括号（“[]”）内的任何内容都表示一组字符。因此，“a*”表示 0 个或多个 a，[abc]* 表示 0 个或多个字符，所有字符都是 a、b 或 c。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-22T16:03:00.307

也许我误解了您的描述，但是您本质上不是在定义一类没有顺序而不是特定序列的字符吗？您的正则表达式不应该具有 [xxxx]+ 的结构，其中 xxxx 是您想要的实际字符吗？

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-23T12:30:15.630

Java 代码片段与 RegexBuddy 中的 Test 选项卡之间的区别在于 Java 中的 matches() 方法需要正则表达式来匹配整个字符串，而 RegexBuddy 中的 Test 选项卡允许部分匹配。如果您在 RegexBuddy 中使用原始正则表达式，您将看到多个黄色和蓝色突出显示的块。这表明 RegexBuddy 在您的字符串中发现了多个部分匹配项。要获得与 match() 一起使用的正则表达式，您需要对其进行编辑，直到整个测试主题以黄色突出显示，或者如果您关闭突出显示，直到 Find First 按钮选择整个文本。

或者，您可以在正则表达式的开头和结尾使用锚点 \A 和 \Z 来强制它匹配整个字符串。当您这样做时，您的正则表达式总是以相同的方式运行，无论您是在 RegexBuddy 中测试它，还是在 Java 中使用 match() 或其他方法。只有matches() 需要完整的字符串匹配。Java 中的所有其他 Matcher 方法都允许部分匹配。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-22T16:06:14.620

正则表达式

```
\w* *\(*\)*&*\.* 
```

会给你你描述的项目，但只能按照你描述的顺序，每一个都可以随心所欲。所以“skjhsklasdkjgsh((((())))))&&&&&.....”有效，但不能混合字符。

你想要这样的正则表达式：

```
\[\w\(\)\&\.]+\ 
```

这将允许混合所有字符。

编辑：我的正则表达式知识有限，所以上面的语法可能并不完美。

# c# - 架构：基于集合的数据管道挑战

> ID：777982
> 
> 赞同：0
> 
> 时间：2009-04-22T16:01:15.647
> 
> 标签：c#, asp.net, sql, xml

我正在开发一个数据库驱动的 Web 应用程序（ASP.NET，SQL 2008），它从各种来源接收结构化 XML 数据。数据类似于一个集合，并且经常需要“清理”，因此它以 XML 的形式通过数据库，并转换为结果集以供显示。

我想捕获生成的“干净”结果，并将它们发送到存档数据库以将它们保存到磁盘。

到目前为止我考虑过的选项是：

*   将整个“干净”结果集序列化为一个对象（XML/.NET 序列化），并将其发送回存档数据库

    *   PRO：易于重复 - 可以分析/捕获存档机器上的数据库调用，并重新运行它们以识别任何问题
    *   CON：版本控制可能很棘手
*   将清理后的结果存储在一个表中，并定期将这个表中的新记录复制到存档机

    *   PRO：易于构建 - 快速安排的工作
    *   缺点：更难在存档机器上重现调用；需要保留输入表内容

还有其他选择吗，有没有人遇到过类似情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-22T16:07:34.960

我已经成功使用了这两种情况，我所做的取决于系统。

# 保存原始 Xml：

当我处理非结构化数据或处理消息传递系统并且我们想要跟踪消息时，我倾向于保存 Raw Xml。例如，我处理的一个应用程序从已部署的 Windows 客户端收集消息，我们会将消息转储到关系结构中，然后将它们滚动到仓库中。当我接手这个项目时，我们开始存储即将到来的原始 xml，因为它确实让我们能够重播，并且能够准确地看到进入系统的内容。

# 关系数据

如果我需要对数据进行任何报告聚合，我会将数据拆分出来并将其存储到常规表中。我知道您可以在数据库中查询 xml 数据，但我尽量避免这种情况。我可能仍会保存原始原始消息以进行重播和故障排除。

# 保存二进制对象

我做的最后一件事是保存整个序列化的二进制对象。当对象图非常复杂并且对象之间的关系很重要时，我发现这很方便。它确实有一个巨大的缺点，那就是版本控制。但是，即使在命名空间更改、对象层次结构更改等情况下，我也已经非常成功地进行了版本控制。如果您需要访问 SQL 中的数据，这不是要走的路。

# asp.net - 我可以向 ASP.NET 中的 DetailsView 添加其他操作吗？

> ID：777984
> 
> 赞同：3
> 
> 时间：2009-04-22T16:02:47.453
> 
> 标签：asp.net, gridview, detailsview

目前我有一个附加到 GridView 的 DetailsView。当您从 GridView 中选择一个项目时，详细信息会显示在 DetailsView 中（duh）。现在，DetailsView 上有 3 个事件选项：编辑、删除和新建。我想添加第四个，格式。这将简单地运行一些查询，然后执行删除。这可能吗？如何？

另一种可能性是将此事件添加到 GridView 中（也许在编辑模式下？）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-29T05:46:22.700

如果您按照建议将自己的按钮添加到 DetailsView，您可以在 DetailsView 上挂钩 ItemCommand 事件，并在 ItemCommand 方法中为每个 CommandName 添加任何逻辑

```
<%@ Page Language="C#" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<script runat="server">

    void CustomerDetailView_ItemCommand(Object sender, DetailsViewCommandEventArgs e)
    {

        // Use the CommandName property to determine which button
        // was clicked. 
        if (e.CommandName == "Add")
        {

            // Add the current store to the contact list. 

            // Get the row that contains the store name. In this
            // example, the store name is in the second row (index 1)  
            // of the DetailsView control.
            DetailsViewRow row = CustomerDetailView.Rows[1];

            // Get the store's name from the appropriate cell.
            // In this example, the store name is in the second cell  
            // (index 1) of the row.
            String name = row.Cells[1].Text;

            // Create a ListItem object with the store's name.
            ListItem item = new ListItem(name);

            // Add the ListItem object to the ListBox, if the 
            // item doesn't already exist.
            if (!ContactListBox.Items.Contains(item))
            {
                ContactListBox.Items.Add(item);
            }

        }

    }

</script>

<html  >
<head runat="server">
    <title>
            DetailsView ItemCommand Example</title>
</head>
<body>
    <form id="Form1" runat="server">
        <h3>
            DetailsView ItemCommand Example</h3>
        <asp:DetailsView ID="CustomerDetailView" 
            DataSourceID="DetailsViewSource"
            AutoGenerateRows="false" 
            DataKeyNames="CustomerID" 
            AllowPaging="true" 
            OnItemCommand="CustomerDetailView_ItemCommand"
            runat="server">

            <FieldHeaderStyle BackColor="Navy" ForeColor="White" />

            <Fields>
                <asp:BoundField DataField="CustomerID" HeaderText="Store ID" />
                <asp:BoundField DataField="CompanyName" HeaderText="Store Name" />
                <asp:BoundField DataField="City" HeaderText="City" />
                <asp:ButtonField CommandName="Add" Text="Add Contact" />
            </Fields>
        </asp:DetailsView>

        <hr />

        Contacts:<br />
        <asp:ListBox ID="ContactListBox" runat="server" />
        <!-- This example uses Microsoft SQL Server and connects  -->
        <!-- to the Northwind sample database. Use an ASP.NET     -->
        <!-- expression to retrieve the connection string value   -->
        <!-- from the web.config file.                            -->
        <asp:SqlDataSource ID="DetailsViewSource" runat="server" 
          ConnectionString=
            "<%$ ConnectionStrings:NorthWindConnectionString%>"
            InsertCommand="INSERT INTO [Customers]([CustomerID], [CompanyName], [Address], [City], [PostalCode], [Country]) VALUES (@CustomerID, @CompanyName, @Address, @City, @PostalCode, @Country)"
          SelectCommand="Select [CustomerID], [CompanyName], 
            [Address], [City], [PostalCode], [Country] From 
            [Customers]">
        </asp:SqlDataSource>
    </form>
</body>
</html> 
```

# mysql - 记录集迭代

> ID：777990
> 
> 赞同：0
> 
> 时间：2009-04-22T16:04:10.147
> 
> 标签：mysql, perl, iteration, recordset

我想遍历使用 Perl 从 MySQL 数据库返回的记录，但一次只有十条记录。原因是服务器组件每个请求只能处理 10 个项目。

例如：

> 如果查询返回 35 条记录，那么我必须在 4 个请求中发送数据：

```
请求 ## 的记录
-------- --------
   1 10
   2 10
   3 10
   4 5

```

完成任务的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-22T16:15:30.527

查看 MySQL 的 LIMIT 子句。你可以有这样的查询：

```
SELECT * from some_table LIMIT 0, 10;
SELECT * from some_table LIMIT 10, 10; 
```

等等，其中 LIMIT 之后的第一个数字是偏移量，第二个数字是记录数。

您当然首先需要对总数进行查询，并计算出您需要运行多少次选择查询才能获得所有结果。

或者，在 Perl 中，您可以使用像 DBIx::Class 这样的 ORM 包，它可以通过结果集处理分页并为您自动检索它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-22T16:16:23.863

您可以调整查询以选择 10 行：

```
select * 
from yourtable
order by idcolumn
limit 10; 
```

遍历行时，存储您处理的行的 ID。处理完 10 行后，获取接下来的 10 行：

```
select * 
from yourtable
where idcolumn > stored_id
order by idcolumn
limit 10; 
```

继续最后一个查询，直到它返回少于 10 行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-22T16:15:54.270

对于第一页：

```
SELECT  *
FROM    table1
ORDER BY
        field
LIMIT 0, 10 
```

对于秒页面：

```
SELECT  *
FROM    table1
ORDER BY
        field
LIMIT 10, 10 
```

等等

# .net - 如何将 Binding.Path 属性绑定到基础数据？

> ID：777991
> 
> 赞同：7
> 
> 时间：2009-04-22T16:04:16.060
> 
> 标签：.net, wpf, data-binding

我正在尝试以非常动态的方式绑定 TextBlock 的 Text 属性。我需要从底层对象获取路径。

这是数据模板：

```
<DataTemplate DataType={x:Type local:DummyClass}>
  <TextBlock Text={Binding Path=???} />
</DataTemplate> 
```

DummyClass 对象有一个名为“FieldValuePath”的属性 - 需要放在 ??? 是。

这背后的想法是数据模板应该是一个用于查看/编辑任何对象的任何属性的 GUI。因此，最好能够声明 XAML，它将一些控件（文本框、文本块、日期选择器等）绑定到给定的属性。

也许有人对如何实施这样的事情有任何建议？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-22T16:38:37.787

如果您在后面的代码中创建绑定，那么您可以让它工作。例如，一个简单的代码生成绑定是：

```
Binding binding = new Binding("BindingPath");
binding.Mode = BindingMode.TwoWay;
BindingOperations.SetBinding(textBoxName, TextBox.TextProperty, binding); 
```

由于此绑定中的路径（“BindingPath”）只是一个字符串，因此该字符串可以来自任何可用对象。

不过，您需要挂钩数据项的创建以设置这些绑定。

* * *

根据您的评论的另一种可能性：

[这篇博文](http://www.hardcodet.net/2008/04/wpf-custom-binding-class)概述了一种通过从 MarkupExtension 继承来创建自定义绑定类的方法。您可以以此为起点，将我的建议包装成可重复使用的 xaml 标记，以用于您的特殊绑定案例。

* * *

更多想法：

好的，这是一个有趣的问题，所以我决定花一点时间看看我是否能想出一个可行的解决方案。对于以下代码示例的长度，我提前道歉...

基于我在上面链接到的博客文章的解决方案，我创建了这个类：

```
public class IndirectBinder : MarkupExtension
    {
        public string IndirectProperty { get; set; }

        public override object ProvideValue(IServiceProvider serviceProvider)
        {
            //try to get bound items for our custom work
            DependencyObject targetObject;
            DependencyProperty targetProperty;
            bool status = TryGetTargetItems(serviceProvider, out targetObject, out targetProperty);

            if (status)
            {
                Control targetControl = targetObject as Control;
                if (targetControl == null) return null;

                //Find the object to take the binding from
                object dataContext = targetControl.DataContext;
                if (dataContext == null) return null;

                //Reflect out the indirect property and get the value
                PropertyInfo pi = dataContext.GetType().GetProperty(IndirectProperty);
                if (pi == null) return null;

                string realProperty = pi.GetValue(dataContext, null) as string;
                if (realProperty == null) return null;

                //Create the binding against the inner property
                Binding binding = new Binding(realProperty);
                binding.Mode = BindingMode.TwoWay;
                BindingOperations.SetBinding(targetObject, targetProperty, binding);

                //Return the initial value of the binding
                PropertyInfo realPi = dataContext.GetType().GetProperty(realProperty);
                if (realPi == null) return null;

                return realPi.GetValue(dataContext, null);

            }

            return null;

        }

        protected virtual bool TryGetTargetItems(IServiceProvider provider, out DependencyObject target, out DependencyProperty dp)
        {
            target = null;
            dp = null;
            if (provider == null) return false;

            //create a binding and assign it to the target
            IProvideValueTarget service = (IProvideValueTarget)provider.GetService(typeof(IProvideValueTarget));
            if (service == null) return false;

            //we need dependency objects / properties
            target = service.TargetObject as DependencyObject;
            dp = service.TargetProperty as DependencyProperty;
            return target != null && dp != null;
        } 
```

您可以将此新标记与以下 xaml 一起使用：

```
<TextBox Text="{local:IndirectBinder IndirectProperty=FieldValuePath}"/> 
```

其中 TextBox 可以是任何从控件继承的类，而 Text 可以是任何依赖属性。

显然，如果您需要公开任何其他数据绑定选项（例如单向或双向绑定），那么您需要向该类添加更多属性。

虽然这是一个复杂的解决方案，但它比使用转换器的一个优点是最终创建的绑定是针对实际的内部属性而不是对象。这意味着它正确地响应 PropertyChanged 事件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-22T17:43:20.097

我建议使用转换器：

```
 <DataTemplate DataType={x:Type local:DummyClass}>
    <TextBlock Text={Binding Converter={StaticResource PropertyNameToValueConverter, ConverterParameter=FieldValuePath}} />
 </DataTemplate> 
```

转换器将获取类和属性名称，并从那里使用反射返回值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-22T17:10:02.080

```
<DataTemplate DataType={x:Type local:DummyClass}>
  <TextBlock Text={Binding Path=FieldValuePath} />
</DataTemplate> 
```

应该是正确的方法。如果您正在侦听 FieldValuePath 中的更改，则需要确保 DummyClass 继承自 INotifyPropertyChanged，并且当 FieldValuePath 更改时会触发属性更改事件。

# asp.net - 正则表达式验证器允许空作为输入

> ID：777993
> 
> 赞同：5
> 
> 时间：2009-04-22T16:04:51.020
> 
> 标签：asp.net, validation

这个正则表达式验证器不应该确保用户在文本框中输入内容吗？由于某种原因，一个空的文本框通过。

```
<asp:RegularExpressionValidator ID="revNumericValidator" runat="server" ValidationExpression="^\d+$"
                    ControlToValidate="tb1" ErrorMessage="Please enter blah (must be a number)." /> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-22T16:07:35.477

按照惯例，验证器不会验证空文本。如果你想要一个值，你还必须*添加*一个[RequiredFieldValidator](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.requiredfieldvalidator.aspx)。

[MSDN](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.regularexpressionvalidator.aspx)说

> 如果输入控件为空，则验证成功。如果关联的输入控件需要一个值，请使用除**RegularExpressionValidator控件之外的**[RequiredFieldValidator](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.requiredfieldvalidator.aspx)控件。

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-22T16:09:34.457

我不确定为什么会这样，但是对于 ASP.NET 验证器控件，我总是不得不将 RegEx 验证器与必需字段验证器结合起来，因为 RegEx 似乎只有在字段中包含文本时才会触发。

# python - Python子进程“对象没有属性'fileno'”错误

> ID：777996
> 
> 赞同：7
> 
> 时间：2009-04-22T16:05:06.480
> 
> 标签：python, pipe, subprocess

此代码在使用 Python 2.5.1 运行时生成“AttributeError：'Popen' 对象没有属性 'fileno'”

代码：

```
def get_blame(filename): 
    proc = []
    proc.append(Popen(['svn', 'blame', shellquote(filename)], stdout=PIPE))
    proc.append(Popen(['tr', '-s', r"'\040'"], stdin=proc[-1]), stdout=PIPE)
    proc.append(Popen(['tr', r"'\040'", r"';'"], stdin=proc[-1]), stdout=PIPE)
    proc.append(Popen(['cut', r"-d", r"\;", '-f', '3'], stdin=proc[-1]), stdout=PIPE)
    return proc[-1].stdout.read() 
```

堆：

```
function walk_folder in blame.py at line 55
print_file(os.path.join(os.getcwd(), filename), path)

function print_file in blame.py at line 34
users = get_blame(filename)

function get_blame in blame.py at line 20
proc.append(Popen(['tr', '-s', r"'\040'"], stdin=proc[-1]), stdout=PIPE)

function __init__ in subprocess.py at line 533
(p2cread, p2cwrite,

function _get_handles in subprocess.py at line 830
p2cread = stdin.fileno() 
```

此代码应该在 python 文档中描述[此用法](http://docs.python.org/library/subprocess.html#subprocess-replacements)。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-22T16:15:09.047

三件事

首先，你的（）是错误的。

其次，结果`subprocess.Popen()`是一个进程对象，而不是一个文件。

```
proc = []
proc.append(Popen(['svn', 'blame', shellquote(filename)], stdout=PIPE))
proc.append(Popen(['tr', '-s', r"'\040'"], stdin=proc[-1]), stdout=PIPE) 
```

的值`proc[-1]`不是文件，而是包含文件的进程。

```
proc.append(Popen(['tr', '-s', r"'\040'"], stdin=proc[-1].stdout, stdout=PIPE)) 
```

第三，不要在shell中做所有这些事情`tr`，`cut`很少有事情会更慢。用 Python编写`tr`和`cut`处理——它更快更简单。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-22T17:13:09.420

剧本里有一些奇怪的东西，

*   为什么要将每个进程存储在列表中？简单地使用变量不是更具可读性吗？删除所有的`.append()s`揭示了一个语法错误，几次你已经将 stdout=PIPE 传递给`append`参数，而不是 Popen：

    ```
    proc.append(Popen(...), stdout=PIPE) 
    ```

    因此，直接重写（仍然存在错误，我将在稍后提及）将变为..

    ```
    def get_blame(filename): 
        blame = Popen(['svn', 'blame', shellquote(filename)], stdout=PIPE)
        tr1 = Popen(['tr', '-s', r"'\040'"], stdin=blame, stdout=PIPE)
        tr2 = Popen(['tr', r"'\040'", r"';'"], stdin=tr1), stdout=PIPE)
        cut = Popen(['cut', r"-d", r"\;", '-f', '3'], stdin=tr2, stdout=PIPE)
        return cut.stdout.read() 
    ```

*   在每个后续命令中，您都传递了 Popen 对象，*而不是*processes `stdout`。从子流程文档的[“替换 shell 管道”](http://docs.python.org/library/subprocess.html#replacing-shell-pipeline)部分，您可以......

    ```
    p1 = Popen(["dmesg"], stdout=PIPE)
    p2 = Popen(["grep", "hda"], stdin=p1.stdout, stdout=PIPE) 
    ```

    ..而你正在做相当于`stdin=p1`.

    （`tr1 =`在上面重写的代码中）行将变为..

    ```
    tr1 = Popen(['tr', '-s', r"'\040'"], stdin=blame.stdout, stdout=PIPE) 
    ```

*   您不需要使用 subprocess 转义命令/参数，因为 subprocess 不会在任何 shell 中运行命令（除非您指定`shell=True`）。请参阅子流程文档的[安全](http://docs.python.org/library/subprocess.html#security)部分。

    代替..

    ```
    proc.append(Popen(['svn', 'blame', shellquote(filename)], stdout=PIPE)) 
    ```

    ..你可以安全地做..

    ```
    Popen(['svn', 'blame', filename], stdout=PIPE) 
    ```

*   正如 S.Lott 建议的那样，不要使用 subprocess 在 Python 中更轻松地进行文本操作（tr/cut 命令）。一方面，tr/cut 等不是非常便携（不同的版本有不同的论点），而且它们也很难阅读（我不知道 tr 和 cut 在做什么）

    如果我要重写命令，我可能会做类似..

    ```
    def get_blame(filename): 
        blame = Popen(['svn', 'blame', filename], stdout=PIPE)
        output = blame.communicate()[0] # preferred to blame.stdout.read()
        # process commands output:
        ret = []
        for line in output.split("\n"):
            split_line = line.strip().split(" ")
            if len(split_line) > 2:
                rev = split_line[0]
                author = split_line[1]
                line = " ".join(split_line[2:])

                ret.append({'rev':rev, 'author':author, 'line':line})

        return ret 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-22T16:11:54.997

您想要该过程的标准输出，因此将您的替换`stdin=proc[-1]`为`stdin=proc[-1].stdout`

此外，你需要移动你的括号，它应该在`stdout`争论之后。

```
 proc.append(Popen(['tr', '-s', r"'\040'"], stdin=proc[-1]), stdout=PIPE) 
```

应该：

```
 proc.append(Popen(['tr', '-s', r"'\040'"], stdin=proc[-1].stdout, stdout=PIPE)) 
```

以同样的方式修复您的其他`append`呼叫。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-04-22T16:11:38.353

看起来像语法错误。除了第一个附加之外，其余都是错误的（复习括号）。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2009-04-22T18:01:31.177

就像 S.Lott 所说，用 Python 处理文本更好。

但是，如果您想使用 cmdline 实用程序，可以使用以下命令使其保持可读性`shell=True`：

```
cmdline = r"svn blame %s | tr -s '\040' | tr '\040' ';' | cut -d \; -f 3" % shellquote(filename)
return Popen(cmdline, shell=True, stdout=PIPE).communicate()[0] 
```

# performance - 提高光线追踪器的性能

> ID：777997
> 
> 赞同：24
> 
> 时间：2009-04-22T16:05:08.070
> 
> 标签：performance, graphics, d, raytracing

我正在用 D ( [http://dsource.org/projects/stacy](http://dsource.org/projects/stacy) ) 编写一个相对简单的光线追踪器/路径追踪器，但即使经过全面优化，每条光线仍需要数千个处理器周期。我还能做些什么来加快速度吗？更一般地说，您知道光线追踪的良好优化/更快的方法吗？

编辑：这是我已经在做的。

*   代码已经高度并行运行
*   临时数据以缓存高效的方式结构化，并与 16b 对齐
*   屏幕分为 32x32 块
*   目标数组的排列方式使得块中的所有后续像素在内存中都是连续的
*   执行基本场景图优化
    *   对象的常见组合（如盒子中的平面 CSG）被预先优化的对象替换
*   能够利用 GDC 的自动矢量化支持的矢量结构
*   射线上的后续命中是通过惰性求值找到的；这可以防止对 CSG 进行不必要的计算
*   既不支持也不优先的三角形。仅普通图元，以及 CSG 操作和基本材料属性
*   支持边界

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-22T16:10:22.270

光线追踪器速度的典型一阶改进是某种空间分区方案。仅基于您的项目大纲页面，您似乎还没有这样做。

可能最常用的方法是八叉树，但最好的方法很可能是方法的组合（例如空间分区树和邮箱等）。边界框/球体测试是一种快速廉价且令人讨厌的方法，但您应该注意两点：1）它们在许多情况下没有多大帮助；2）如果您的对象已经是简单的基元，您将不会获得太多收益（甚至可能会输）。您可以更容易（比八叉树）为空间分区实现规则网格，但它仅适用于稍微均匀分布的场景（就表面位置而言）

很大程度上取决于您所代表的对象的复杂性、您的内部设计（即您是否允许本地转换、对象的引用副本、隐式曲面等），以及您想要达到的准确度。如果您正在编写具有隐式表面的全局照明算法，则权衡可能与您正在为网格对象或其他任何东西编写基本光线追踪器时有所不同。我没有详细查看您的设计，所以我不确定您已经考虑过以上哪些内容（如果有的话）。

像任何性能优化过程一样，您必须首先进行测量以找到您实际花费时间的地方，然后改进事物（根据偏好进行算法，然后根据需要进行代码混乱）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-05-26T23:29:18.647

我从光线追踪器中学到的一件事是，许多旧规则不再适用。例如，许多光线追踪算法会进行大量测试以“尽早”完成计算量大的计算。在某些情况下，我发现消除额外的测试并始终运行计算以完成要好得多。算术在现代机器上很快，但错过的分支预测代价高昂。通过用最少的条件分支重写它，我的光线-多边形相交测试的速度提高了 30%。

有时最好的方法是违反直觉的。例如，当我将它们分解为大量较小的对象时，我发现许多包含几个大对象的场景运行得更快。根据场景几何，这可以让您的空间细分算法抛出大量的交叉测试。让我们面对现实吧，相交测试只能这么快进行。您必须消除它们才能获得显着的加速。

分层边界体积有很大帮助，但我最终摸索了 kd-tree，并获得了巨大的速度提升。当然，构建树的成本可能会使实时动画望而却步。

注意同步瓶颈。

您必须进行简介以确保将注意力集中在正确的位置。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-04-22T16:12:22.577

**我还能做些什么来加快速度吗？**

D，取决于实现和编译器，提出了相当好的性能。由于您还没有解释您已经使用了哪些光线追踪方法和优化，因此我无法为您提供太多帮助。

然后，下一步是对程序运行时序分析，并重新编码最常用的代码或最慢的代码，而不是在汇编中影响最大的性能。

更一般地，请查看以下问题中的资源：

*   [编写光线追踪器的文献和教程](https://stackoverflow.com/questions/362140/literature-and-tutorials-for-writing-a-ray-tracer)
*   [有人知道一本关于光线追踪的好书吗？](https://stackoverflow.com/questions/600357/anyone-know-of-a-really-good-book-about-ray-tracing)
*   [计算机图形学：光线追踪和编程 3D 渲染](https://stackoverflow.com/questions/445456/computer-graphics-raytracing-and-programming-3d-renders)
*   [使用 CUDA 进行光线追踪](https://stackoverflow.com/questions/39473/raytracing-with-cuda)

我真的很喜欢使用显卡（大规模并行计算机）来完成一些工作的想法。

本站还有很多其他的光线追踪相关资源，其中一些在本题的侧边栏中列出，大部分都可以在[光线追踪标签](https://stackoverflow.com/questions/tagged/raytracing)中找到。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-22T16:15:18.657

一些建议。

*   使用边界对象快速失败。
*   第一步投影场景（就像普通显卡一样），光线追踪仅用于光照计算。
*   并行化代码。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-04-22T16:11:46.900

我完全不懂D，所以看代码也找不到具体的优化，但我可以说一般。

这真的取决于你的要求。最简单的优化之一就是减少任何特定光线可以跟随的反射/折射的数量，但是你开始失去“完美的结果”。

光线追踪也是一个[“令人尴尬的并行”](http://en.wikipedia.org/wiki/Embarrassingly_parallel)问题，所以如果你有资源（例如多核处理器），你可以考虑并行计算多个像素。

除此之外，您可能只需要分析并弄清楚究竟是什么花了这么长时间，然后尝试优化它。是路口检测吗？然后努力为此优化代码，依此类推。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2010-07-22T03:56:18.590

每隔一个像素进行光线追踪。通过插值获得中间的颜色。如果颜色变化很大（您位于对象的边缘），请对中间的像素进行光线追踪。这是作弊，但在简单的场景中，它几乎可以在牺牲一些图像质量的同时将性能提高一倍。

在 GPU 上渲染场景，然后将其加载回来。这将为您提供以 GPU 速度命中的第一条光线/场景。如果场景中没有很多反射表面，这会将您的大部分工作减少为普通的旧渲染。不幸的是，在 GPU 上渲染 CSG 并不完全简单。

阅读 PovRay 的源代码以获得灵感。:)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2010-07-17T22:09:00.013

您必须首先确保使用非常快的算法（实现它们可能会很痛苦，但是您想做什么以及要走多远以及应该多快，这是一种权衡）。

来自我的更多提示 - 不要使用邮箱技术，在论文中有时会讨论它们由于计数开销而无法与实际架构很好地扩展 - 不要使用 BSP/Octtrees，它们相对较慢。-**不要**使用 GPU 进行光线追踪，它对于反射和阴影、折射和光子映射等高级效果来说太慢了（我只将它用于着色，但这是我的啤酒）

对于一个完整的静态场景，kd-Trees 是无与伦比的，而对于动态场景，有一些聪明的算法可以在四核上很好地扩展（我不确定上面的性能）。

当然，为了获得真正好的性能，您需要使用非常多的 SSE 代码（当然不会有太多的跳转），但对于不是“那么好”的性能（我在这里谈论的可能是 10-15%）编译器内在的东西就足够了实施你的 SSE 东西。

还有一些关于我正在谈论的一些算法的不错的论文：

《Fast Ray/Axis-Aligned Bounding Box - Overlap Tests using Ray Slopes》（very fast very good paralelisizable (SSE) AABB-Ray hit test）（注意，论文中的代码并不是全部代码，只是google一下标题纸，你会找到的）

[http://graphics.tu-bs.de/publications/Eisemann07RS.pdf](http://graphics.tu-bs.de/publications/Eisemann07RS.pdf)

“使用动态边界体积层次结构的光线追踪可变形场景”

[http://www.sci.utah.edu/~wald/Publications/2007///BVH/download//togbvh.pdf](http://www.sci.utah.edu/~wald/Publications/2007///BVH/download//togbvh.pdf)

如果您知道上述算法的工作原理，那么这是一个更强大的算法：

“在动态场景中使用预先计算的三角形集群进行加速光线追踪”

[http://garanzha.com/Documents/UPTC-ART-DS-8-600dpi.pdf](http://garanzha.com/Documents/UPTC-ART-DS-8-600dpi.pdf)

我还使用 pluecker-test 来确定快速（不准确，但好吧，你不能拥有所有）如果我击中一个多边形，在 SSE 及更高版本上工作得非常好。

所以我的结论是，那里有很多很棒的论文，涉及很多与光线追踪相关的主题（如何构建快速、高效的树以及如何着色（BRDF 模型）等等），这是一个真正的“实验”这个神奇而有趣的领域，但你也需要有很多空闲时间，因为它非常复杂但很有趣。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-04T16:38:40.857

你可以

*   使用 SAH 优化的包围体层次结构......
*   ...最终使用数据包遍历，
*   引入重要性抽样，
*   访问按 Morton 代码排序的切片以获得更好的缓存一致性，以及

更多——但这些是我能立即想到的建议。更多的话：

您可以基于统计数据构建优化的层次结构，以便在与几何体相交时快速识别候选节点。在您的情况下，您必须将自动层次结构与建模层次结构相结合，即约束构建或让它最终克隆建模信息。

“数据包遍历”意味着您使用 SIMD 指令来计算 4 个并行标量，每个标量都有自己的射线用于遍历层次结构（通常是热点），以便从硬件中获得最大的性能。

您可以执行一些每条光线的统计数据，以便根据对生成的像素颜色的贡献来控制采样率（二次光线拍摄的数量）。

在图块上使用面积曲线可以减少像素之间的平均空间距离，从而降低性能从缓存命中中受益的可能性。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-21T00:45:47.497

我的第一个问题是-您是要优化单个静止屏幕的跟踪，还是要优化多个屏幕的跟踪以计算动画？

优化单次镜头是一回事，如果您想计算动画中的连续帧，则需要考虑/优化很多新事物。**``*~~~~********